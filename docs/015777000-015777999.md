# StackOverflow 问答 15777000-15777999

# php - 使用 PHP 从数据库中打印数据

> ID：15777001
> 
> 赞同：0
> 
> 时间：2013-04-03T00:45:22.117
> 
> 标签：php, mysql, database, phpmyadmin

每个人都说从 MySQL 数据库打印数据很容易，但到目前为止我很难过。我是 PHP 新手，正在尝试从数据库中打印出个人数据。例如，Joe Bloggs 已经登录，然后他可以查看他的爱好等。所以我想要实现的是让用户登录并查看他们的信息。

基本上，用户可以登录，但是我尝试设置一个变量来存储 SQL 查询，然后在用户成功登录时将其打印出来，但是我现在收到以下错误消息 - 这不会消失。

```
( ! ) SCREAM: Error suppression ignored for
( ! ) Warning: mysql_fetch_array() expects parameter 1 to be resource, string given in    C:\wamp\www\myfiles\login.inc.php on line 32
Call Stack
#   Time    Memory  Function    Location
1   0.0015  365584  {main}( )   ..\index.php:0
2   1.0144  387472  include( 'C:\wamp\www\myfiles\login.inc.php' )  ..\index.php:6
3   1.0427  390752  mysql_fetch_array ( )   ..\login.inc.php:32 
```

像几乎所有初学者一样，我犯了一个错误，即创建了一个使尝试编码的内容过于复杂的大型文件，（这也是一个深夜，我很累，因此我可能看不到任何错误）。不过评论很好

我将不胜感激任何意见和建议！

```
// create variables username and password,if a user doesn't enter a UN and PW send error message
if (isset($_POST['username'])&& isset ($_POST['password'])){
    $username= $_POST['username'];
    $password= $_POST['password'];

    if (empty ($username)&&empty ($password)){
        echo 'supply username and password';
    }
// save  our MySQl queries as variables in order to reference them later on

    // for login
    $query = "SELECT * FROM `students` WHERE `username`='$username'AND `password`='$password'";
    // user login result
    $result= mysql_query($query);
    // display the courses that user is taking
    $user= "SELECT * FROM `students`";

// set conditions for login 
    if($result) {
    // if the data matches by rows send a message saying the user has logged in
        if(mysql_num_rows($result) > 0) {
            session_regenerate_id();
            $member = mysql_fetch_assoc($result);

            $_SESSION['SURNAME_NAME'] = $member['username'];
            $_SESSION['SESS_ID'] = $member['password'];
            session_write_close();
            //if logged on list course they are studying
            echo 'you are now logged in.<a href = "logout.inc.php">Log out</a>';
                while($row = mysql_fetch_array($user))
                {
                    echo $row['GivenName'],$row['username'], $row['password'],$row['Course1'],$row['Course2'], $row['Course2'];
                    echo "<br />";
                }
            exit();
        }else {
            // create boolean condition- if no match send error message
            $errflag = true;
            if($errflag) {
            session_write_close();
            echo 'invalid username/password combination';   
            exit();

            }
        }
    }else {
    // display errors
        echo mysql_errno() . ": " . mysql_error(); exit();

    }

}

?>
<form method="POST">
Username: <input type = "text" name="username"> Password: <input type ="password" name="password">
<input type="submit" value="Log in">
</form 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:49:28.873

如果您是使用 php 和 mysql 的初学者取决于您适合使用的连接，以下是一些可能对您有所帮助的基本步骤。

**MYSQL**：

首先：为数据库用户、密码、主机、数据库名设置配置

```
$conn = new mysqli('database_server','database_username','database_password','database_name'); 
```

第二：创建一个查询（您可以在此处插入您的查询）..

```
$result= $conn->query("SELECT SUM(Total_Steps) AS value_sum FROM users"); 
```

最后：使用 MYSQL 函数显示的记录，如..

```
while($row = $result->fetch_assoc()){
    echo $row['dabatase_columnname'];
    echo $row['database_columnname'];
} 
```

**PDO**：

连接到数据库 db = new PDO("...");

创建查询

```
$statement = $db->prepare("select id from some_table where name = :name"); 
```

使用绑定参数执行查询

$statement->execute(array(':name' => "Jimbo"));

获取查询返回的所有数据

```
$row = $statement->fetch(); // Use fetchAll() if you want all results, or just iterate over the statement, since it implements Iterator 
```

**MYSQL**：

首先：为数据库用户、密码、主机、数据库名设置配置

```
$conn = mysql_connect('database_server','database_username','database_password');
mysql_select_db($conn,'databasename') 
```

第二：创建一个查询（您可以在此处插入您的查询）..

```
$result= mysql_query("SELECT SUM(Total_Steps) AS value_sum FROM users"); 
```

最后：使用 MYSQL 函数显示的记录，如..

```
while($row = $result->mysql_fetch_array($result)){
    echo $row['dabatase_columnname'];
    echo $row['database_columnname'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:11:17.357

如前所述，[避免在新代码中使用 mysql_* 函数](https://stackoverflow.com/q/12859942/)。它们不再被维护并被正式弃用。

这是您的代码示例，使用 PDO 和准备好的语句。您可能只需要更改连接信息。

```
<?php
// Get your connection sorted.
$db = new PDO('mysql:host=localhost;dbname=testdb;charset=utf8', 'username', 'password');
// Prepare a few statements for use later.
$stmtResult = $db->prepare("SELECT * FROM `students` WHERE `username`=?AND `password`=?");
$stmtUser = $db->prepare("SELECT * FROM `students`");

// create variables username and password,if a user doesn't enter a UN and PW send error message
if (isset($_POST['username'])&& isset ($_POST['password'])){
    $username= $_POST['username'];
    $password= $_POST['password'];

    if (empty ($username)&&empty ($password)){
        echo 'supply username and password';
    }

    // Use the try catch paradigm instead of if/else, because PDO will
    // throw an exception if things go sideways.
    try{
        // Execute the prepared statement, passing in the variables.
        $stmtResult->execute(array($username, $password));
        // Get the results in an array & then get the result count.
        $rows = $stmtResult->fetchAll(PDO::FETCH_ASSOC);
        $row_count = $stmt->rowCount()

        if($row_count > 0) {
            session_regenerate_id();
            $member = $rows[0];

            $_SESSION['SURNAME_NAME'] = $member['username'];
            $_SESSION['SESS_ID'] = $member['password'];
            session_write_close();
            //if logged on list course they are studying
            echo 'you are now logged in.<a href = "logout.inc.php">Log out</a>';
            $stmtUser->execute();

            // I moved this next call down to the loop because
            // there is no real reason to call it sooner than this
            while($row =  $stmtResult->fetchAll(PDO::FETCH_ASSOC))
            {
                echo $row['GivenName'],$row['username'], $row['password'],$row['Course1'],$row['Course2'], $row['Course2'];
                echo "<br />";
            }
            exit();
        }else {
            // create boolean condition- if no match send error message
            $errflag = true;
            if($errflag) {
            session_write_close();
            echo 'invalid username/password combination';   
            exit();

            }
        }
    }catch(PDOException $ex) {
        // This is what happens if something did go sideways.
        echo $ex->getCode() . ": " . $ex->getMessage(); 
        exit();
    }
}

?>
<form method="POST">
Username: <input type = "text" name="username"> Password: <input type ="password" name="password">
<input type="submit" value="Log in">
</form 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:58:16.617

问题是你没有这样做：

```
 mysql_query($user); 
```

只需在`mysql_fetch_array`like之前添加：

```
$user_result = mysql_query($user);
while($row = mysql_fetch_array($user_result)){
     //...
} 
```

但是，是的，正如另一个人所说，请使用`MySqli`or`PDO`代替。

# asp.net - ASP.NET Session_End 事件未触发

> ID：15777004
> 
> 赞同：6
> 
> 时间：2013-04-03T00:45:34.003
> 
> 标签：asp.net, session-state, global-asax

我正在尝试在 ASP.NET 会话结束时执行数据库事务（在 Windows 2008 Server 上的简单 WebForms 应用程序中）。我意识到许多受访者会建议不要依赖 Session_End 事件（正如我在谷歌搜索产生的关于这个主题的一百篇论坛帖子中读到的那样）。请幽默我。

我做过这些事情：

1.  在 web.config 中启用会话状态：`<sessionState mode="InProc" cookieless="false" timeout="1" />`

2.  确认当我调用 Session.Abandon() 或会话超时时 Session_End 事件不会触发。

3.  确认会话在 1 分钟后超时（如上配置）。

4.  确认我没有尝试访问任何 Request 或 Response 或 Server 对象（我理解这会默默地出错）。

编辑：我还确认我在会话中存储数据——我使用许多会话变量来存储不同的数据点，这些在用户登录到应用程序时被实例化。

编辑：我还确认我没有创建会话，然后在同一个请求中放弃它。如上所述，即使会话超时（即没有发出请求），问题仍然存在。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-04T17:12:23.387

对于其他寻求解决方案但没有找到解决此问题的答案的人，我看到了一个案例，其中项目的 Global.asax 是使用引用的代码隐藏文件定义的，但事件是在 asax 而不是 .cs 文件中定义的。

在这种情况下，它会触发 Session_Start，但不会触发 Session_End，就好像它正在查看引用的 .cs 文件一样。

通过删除对文件背后代码的引用，Session_End 开始按预期触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T01:41:17.773

如果您不将任何内容保存到会话中，则 session_end 将不会触发。如果您在第一个请求中将数据保存在会话中，并在同一请求中调用放弃，则 session_end 也不会触发。

希望这可以帮助！

吨

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:52:17.460

尝试从查询数据库的同一方法中初始化会话。在查询数据库之前执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:43:43.917

结果是事件被触发了，但是正在执行的代码默默地出错了，因为我没有正确访问 Application 对象和我的一些 App_Code 类（我仍然不知道该怎么做，但值得一个单独的堆栈溢出问题）。

# java - 用于多用户聊天程序的 ArrayList

> ID：15777006
> 
> 赞同：0
> 
> 时间：2013-04-03T00:45:45.733
> 
> 标签：java

嘿那里堆栈溢出。

所以我一直在开发一个聊天程序来教自己一些 Java，我让它运行到任意数量的客户端都可以自由连接到服务器的地步，但每个客户端只能与服务器通信。

这显然是一个糟糕的聊天程序，所以我实现了一个处理程序数组列表，目的是将一个客户端写入的内容发送给所有客户端。问题是我无法让它工作，现在我在客户端和服务器之间输入了 3 行文本后我的程序崩溃了。

请看一下我的代码。我将突出显示在尝试实现数组列表时更改的代码部分。我想我只是把东西塞进了错误的地方。

服务器代码：

```
 import java.io.*;
    import java.net.*;
    import java.util.*;;

    public class Server{
    //----------------------------------------------------
    ArrayList<Handler> handlers = new ArrayList<Handler>();
    //----------------------------------------------------
public static void main(String[] args){

    try{
        ServerSocket ss = new ServerSocket(8822);
        while(true){

            Socket s = ss.accept();
            new Handler(s).start();

        }
    }catch(Exception e){
        System.out.println(e.getMessage());
    }
}
    }

    class Handler extends Thread{

Socket socket;
boolean notdone;
BufferedReader br;
PrintWriter pw;
String line;

public Handler(Socket socket){
    this.socket = socket;
    notdone = true;
}

public void run(){

    //------------------
    handlers.add(this);
    //------------------

    try{
        br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        pw = new PrintWriter(new OutputStreamWriter(socket.getOutputStream()),true);
                    //--------------------------------------------------------
        Iterator<Handler> handlerIterator = handlers.iterator();
                    //--------------------------------------------------------
        while(notdone){

            line = br.readLine();

            if(line.equals("bye")){
                System.out.println("Client said 'bye'");
                notdone = false;
                break;
            }else{
                System.out.println("Echo: " + line);
                            //----------------------------------------------
                while (handlerIterator.hasNext()){
                    Handler current = handlerIterator.next();

                    current.pw.println(line);

                }
                            //----------------------------------------------
            }

        }
        br.close();
        pw.close();
        socket.close();

    }catch(Exception e){
        System.out.println(e);
        System.out.println("Client severed connection.");
    }
}
    } 
```

至于客户，我想我应该在突出显示的部分更改一些内容，但我不确定是什么。

客户代码：

```
import java.io.*;
import java.net.*;
import java.util.*;

public class Client{

public static void main(String[] args){

    try{
        Socket s = new Socket("localhost", 8822);

        BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream()));
        PrintWriter pw = new PrintWriter(new OutputStreamWriter(s.getOutputStream()),true);

        Scanner scan = new Scanner(System.in);
        boolean notdone = true;

        while(notdone){
            String outString = scan.nextLine();
            if(outString.equals("bye")){
                pw.println(outString);
                notdone = false;
            }else{
                            //------------------
                pw.println(outString);
                String inString = br.readLine();
                            //------------------

                System.out.println("Received: " + inString);
            }
        }
        br.close();
        pw.close();
        s.close();

    }catch(Exception e){
        System.out.println("Server severed connection.");
    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:40:39.523

这是给你的一个错误：

```
 Iterator<Handler> handlerIterator = handlers.iterator();
    while(notdone){
        // ...
        while (handlerIterator.hasNext()){
            Handler current = handlerIterator.next();
            // ....
        }
    } 
```

第一次通过外循环时，您将通过内循环。第二*次*通过外循环，`handlerIterator`已经用尽，所以它会返回`false`，`hasNext()`你永远不会再进入内循环。

相反，使用 for-each 循环：

```
 while(notdone){
        // ...
        for (Handler current : handlers){
            // ....
        }
    } 
```

这等效于（但更简洁）

```
 while(notdone){
        // ...
        Iterator<Handler> handlerIterator = handlers.iterator()
        while (handlerIterator.hasNext()){
            Handler current = handlerIterator.next();
            // ....
        }
    } 
```

同时，在客户端，

```
 pw.println(outString);
            String inString = br.readLine(); 
```

表示您仅在写入服务器后才从服务器读取。所以客户不能只听。单个客户端应该没问题，但是如果你有两个客户端，那么你会得到这个：

1.  ClientA 向服务器发送“hello”
2.  服务器向两个客户端流打印“hello”
3.  ClientA 从其缓冲区中读取“hello”（ClientB 没有读取任何内容）
4.  ClientB 向服务器发送“世界”
5.  ClientB 从其缓冲区中读取“hello”
6.  服务器向两个客户端流打印“世界”

所以现在两个客户端都看到了 ClientA 的消息，但没有看到 ClientB 的消息。你会不断得到这种奇怪的延迟效果，最终缓冲区会填满并阻塞。

真正的解决方案是每个客户端都需要有一个单独的线程来读写。但这是代码难度的一个很大的飞跃。我认为您应该查看[BufferedReader#ready()](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#ready%28%29)，它会告诉您是否有数据等待读取。在客户端，您可以在 while-not-done 循环的开头使用它：

```
while(br.ready()) {
    String inString = br.readLine();
    // ...
}
// Now all the messages from the server have been printed 
```

您仍然会遇到客户需要不断交谈的问题，但只要他们这样做，事情就会奏效。

# eclipse - TypeSafe Scala IDE (Eclipse) 不显示任何 Scala 项目

> ID：15777008
> 
> 赞同：0
> 
> 时间：2013-04-03T00:45:50.803
> 
> 标签：eclipse, scala, sbt, scala-ide

我正在使用 java sdk 1.5.0_30 运行 Mac Os 10.5.8。我已经下载并安装了 sbt 包，并验证它运行正常。最后，我下载了 Mac OS Cocoa 32 位版本的 Typesafe IDE for Scala 2.10.1，并安装了它。

问题在于，尽管 Eclipse 似乎认识到它已设置为使用 Scala（默认窗口的标题以“资源 - Scala IDE ...”开头），但任何地方都没有 Scala 项目或工作表可用 - 仅“新”显示“Project”，而不是“Scala Project”，“New->Other”不显示任何 Scala 向导，右键单击从 Scala 项目导入的文件不会显示创建 Scala 工作表的可能性等。

### 附加信息：

1.  这是靛蓝
2.  Run 和 Window 之间没有 Scala 菜单
3.  左侧菜单显示“项目资源管理器”
4.  About>Installation Details> Features 包括 Scala 插件

### 配置详细信息（截断）：

```
*** Date: Saturday, April 6, 2013 9:00:43 AM Eastern Daylight Time

*** Platform Details:

*** System properties:
awt.nativeDoubleBuffering=true
awt.toolkit=apple.awt.CToolkit
eclipse.application=org.eclipse.ui.ide.workbench
eclipse.buildId=3.0.0-vfinal-20130326-1146-Typesafe
eclipse.commands=-os
macosx
-ws
cocoa
-arch
ppc
-showsplash
-launcher
/Users/me/Downloads/eclipse - Scala/Eclipse.app/Contents/MacOS/eclipse
-name
Eclipse
--launcher.library
/Users/me/Downloads/eclipse - Scala/Eclipse.app/Contents/MacOS//../../../plugins/org.eclipse.equinox.launcher.cocoa.macosx_1.1.101.v20120109-1504/eclipse_1408.so
-startup
/Users/me/Downloads/eclipse - Scala/Eclipse.app/Contents/MacOS//../../../plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.overrideVmargs
-keyring
/Users/me/.eclipse_keyring
-showlocation
-vm
/System/Library/Frameworks/JavaVM.framework
eclipse.home.location=file:/Users/me/Downloads/eclipse - Scala/
eclipse.launcher=/Users/me/Downloads/eclipse - Scala/Eclipse.app/Contents/MacOS/eclipse
eclipse.launcher.name=Eclipse
eclipse.p2.data.area=@config.dir/../p2
eclipse.p2.profile=SDKProfile
eclipse.product=org.scala-ide.sdk.product
eclipse.startTime=1365252840252
eclipse.vm=/System/Library/Frameworks/JavaVM.framework
eclipse.vmargs=-Xmx1048m
-Xms100m
-XX:MaxPermSize=256m
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts
-Djava.class.path=/Users/me/Downloads/eclipse - Scala/Eclipse.app/Contents/MacOS//../../../plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
equinox.use.ds=true
file.encoding=MacRoman
file.encoding.pkg=sun.io
file.separator=/
gopherProxySet=false
java.awt.graphicsenv=apple.awt.CGraphicsEnvironment
java.awt.printerjob=apple.awt.CPrinterJob
java.class.path=/Users/me/Downloads/eclipse - Scala/Eclipse.app/Contents/MacOS//../../../plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
java.class.version=49.0
java.endorsed.dirs=/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/endorsed
java.ext.dirs=/Users/me/Library/Java/Extensions:/Library/Java/Extensions:/System/Library/Java/Extensions:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext
java.home=/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home
java.io.tmpdir=/var/folders/Fi/FiG8O39A2Ra7AE+1YwLaJ++++TI/-Tmp-/
java.library.path=.:/Users/me/Library/Java/Extensions:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
java.runtime.name=Java(TM) 2 Runtime Environment, Standard Edition
java.runtime.version=1.5.0_30-b03-389-9M3425
java.specification.name=Java Platform API Specification
java.specification.vendor=Sun Microsystems Inc.
java.specification.version=1.5
java.vendor=Apple Inc.
java.vendor.url=http://www.apple.com/
java.vendor.url.bug=http://bugreport.apple.com/
java.version=1.5.0_30
java.vm.info=mixed mode
java.vm.name=Java HotSpot(TM) Client VM
java.vm.specification.name=Java Virtual Machine Specification
java.vm.specification.vendor=Sun Microsystems Inc.
java.vm.specification.version=1.0
java.vm.vendor=Apple Inc.
java.vm.version=1.5.0_30-161
line.separator=

mrj.build=9M3425
mrj.version=1050.1.5.0_30-389
org.eclipse.equinox.launcher.splash.location=/Users/me/Downloads/eclipse - Scala/plugins/org.eclipse.platform_3.7.2.v201202080800/splash.bmp
org.eclipse.equinox.simpleconfigurator.configUrl=file:org.eclipse.equinox.simpleconfigurator/bundles.info
org.eclipse.swt.internal.carbon.smallFonts=
org.eclipse.update.reconcile=false
org.osgi.framework.executionenvironment=OSGi/Minimum-1.0,OSGi/Minimum-1.1,OSGi/Minimum-1.2,JRE-1.1,J2SE-1.2,J2SE-1.3,J2SE-1.4,J2SE-1.5
org.osgi.framework.language=en
org.osgi.framework.os.name=MacOSX
org.osgi.framework.os.version=10.5.8
org.osgi.framework.processor=PowerPC
org.osgi.framework.system.capabilities=osgi.ee; osgi.ee="OSGi/Minimum"; version:List<Version>="1.0, 1.1, 1.2",osgi.ee; osgi.ee="JavaSE"; version:List<Version>="1.0, 1.1, 1.2, 1.3, 1.4, 1.5"
org.osgi.framework.system.packages=javax.accessibility,javax.activity,javax.crypto,javax.crypto.interfaces,javax.crypto.spec,javax.imageio,javax.imageio.event,javax.imageio.metadata,javax.imageio.plugins.bmp,javax.imageio.plugins.jpeg,javax.imageio.spi,javax.imageio.stream,javax.management,javax.management.loading,javax.management.modelmbean,javax.management.monitor,javax.management.openmbean,javax.management.relation,javax.management.remote,javax.management.remote.rmi,javax.management.timer,javax.naming,javax.naming.directory,javax.naming.event,javax.naming.ldap,javax.naming.spi,javax.net,javax.net.ssl,javax.print,javax.print.attribute,javax.print.attribute.standard,javax.print.event,javax.rmi,javax.rmi.CORBA,javax.rmi.ssl,javax.security.auth,javax.security.auth.callback,javax.security.auth.kerberos,javax.security.auth.login,javax.security.auth.spi,javax.security.auth.x500,javax.security.cert,javax.security.sasl,javax.sound.midi,javax.sound.midi.spi,javax.sound.sampled,javax.sound.sampled.spi,javax.sql,javax.sql.rowset,javax.sql.rowset.serial,javax.sql.rowset.spi,javax.swing,javax.swing.border,javax.swing.colorchooser,javax.swing.event,javax.swing.filechooser,javax.swing.plaf,javax.swing.plaf.basic,javax.swing.plaf.metal,javax.swing.plaf.multi,javax.swing.plaf.synth,javax.swing.table,javax.swing.text,javax.swing.text.html,javax.swing.text.html.parser,javax.swing.text.rtf,javax.swing.tree,javax.swing.undo,javax.transaction,javax.transaction.xa,javax.xml,javax.xml.datatype,javax.xml.namespace,javax.xml.parsers,javax.xml.transform,javax.xml.transform.dom,javax.xml.transform.sax,javax.xml.transform.stream,javax.xml.validation,javax.xml.xpath,org.ietf.jgss,org.omg.CORBA,org.omg.CORBA_2_3,org.omg.CORBA_2_3.portable,org.omg.CORBA.DynAnyPackage,org.omg.CORBA.ORBPackage,org.omg.CORBA.portable,org.omg.CORBA.TypeCodePackage,org.omg.CosNaming,org.omg.CosNaming.NamingContextExtPackage,org.omg.CosNaming.NamingContextPackage,org.omg.Dynamic,org.omg.DynamicAny,org.omg.DynamicAny.DynAnyFactoryPackage,org.omg.DynamicAny.DynAnyPackage,org.omg.IOP,org.omg.IOP.CodecFactoryPackage,org.omg.IOP.CodecPackage,org.omg.Messaging,org.omg.PortableInterceptor,org.omg.PortableInterceptor.ORBInitInfoPackage,org.omg.PortableServer,org.omg.PortableServer.CurrentPackage,org.omg.PortableServer.POAManagerPackage,org.omg.PortableServer.POAPackage,org.omg.PortableServer.portable,org.omg.PortableServer.ServantLocatorPackage,org.omg.SendingContext,org.omg.stub.java.rmi,org.w3c.dom,org.w3c.dom.bootstrap,org.w3c.dom.css,org.w3c.dom.events,org.w3c.dom.html,org.w3c.dom.ls,org.w3c.dom.ranges,org.w3c.dom.stylesheets,org.w3c.dom.traversal,org.w3c.dom.views ,org.xml.sax,org.xml.sax.ext,org.xml.sax.helpers
org.osgi.framework.uuid=f015af0e-b99e-0012-1997-8799bf6d8071
org.osgi.framework.vendor=Eclipse
org.osgi.framework.version=1.6.0
org.osgi.supports.framework.extension=true
org.osgi.supports.framework.fragment=true
org.osgi.supports.framework.requirebundle=true
os.arch=ppc
os.name=Mac OS X
os.version=10.5.8
osgi.arch=ppc
osgi.bundles=reference:file:org.eclipse.equinox.weaving.hook_1.0.200.I20120427-0800.jar,reference:file:org.eclipse.equinox.simpleconfigurator_1.0.200.v20110815-1438.jar@1:start
osgi.bundles.defaultStartLevel=4
osgi.bundlestore=/Users/me/Downloads/eclipse - Scala/configuration/org.eclipse.osgi/bundles
osgi.configuration.area=file:/Users/me/Downloads/eclipse - Scala/configuration/
osgi.framework=file:/Users/me/Downloads/eclipse - Scala/plugins/org.eclipse.osgi_3.7.2.v20120110-1415.jar
osgi.framework.extensions=reference:file:org.eclipse.equinox.weaving.hook_1.0.200.I20120427-0800.jar
osgi.framework.shape=jar
osgi.framework.version=3.7.2.v20120110-1415
osgi.frameworkClassPath=., file:/Users/me/Downloads/eclipse - Scala/plugins/org.eclipse.equinox.weaving.hook_1.0.200.I20120427-0800.jar
osgi.install.area=file:/Users/me/Downloads/eclipse - Scala/
osgi.instance.area=file:/Users/me/Scala class/
osgi.logfile=/Users/me/Scala class/.metadata/.log
osgi.manifest.cache=/Users/me/Downloads/eclipse - Scala/configuration/org.eclipse.osgi/manifests
osgi.nl=en_US
osgi.os=macosx
osgi.splashLocation=/Users/me/Downloads/eclipse - Scala/plugins/org.eclipse.platform_3.7.2.v201202080800/splash.bmp
osgi.splashPath=platform:/base/plugins/org.eclipse.platform
osgi.syspath=/Users/me/Downloads/eclipse - Scala/plugins
osgi.tracefile=/Users/me/Scala class/.metadata/trace.log
osgi.ws=cocoa
path.separator=:
sun.arch.data.model=32
sun.boot.class.path=/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/jsfd.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/classes.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/ui.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/laf.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/sunrsasign.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/jsse.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/jce.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/charsets.jar
sun.boot.library.path=/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Libraries
sun.cpu.endian=big
sun.cpu.isalist=
sun.io.unicode.encoding=UnicodeBig
sun.jnu.encoding=MacRoman
sun.management.compiler=HotSpot Client Compiler
sun.os.patch.level=unknown
user.country=US
user.dir=/Users/me/Downloads/eclipse - Scala/Eclipse.app/Contents/MacOS
user.home=/Users/me
user.language=en
user.name=me
user.timezone=America/New_York

*** Features:
org.eclipse.cvs (1.3.100.v20110520-0800-7B78FHl9VF7BD7KBM4GP9C) "Eclipse CVS Client"
org.eclipse.help (1.3.0.v20110530-0844-7i7uFFmFFl8nvqbDpEqTvx) "Help System Base"
org.eclipse.jdt (3.7.2.v20120120-1414-7z8gFcuFMP7BW5XTz0jLTnz0l9B1) "Eclipse Java Development Tools"
org.eclipse.m2e.feature (1.3.1.20130219-1424) "Maven Integration for Eclipse"
org.eclipse.pde (3.7.2.v20120120-1420-7b7rFUOFEx2Xnqafnpz0E--0) "PDE"
org.eclipse.platform (3.7.2.v20120207-1839-9gF7UHPDFxGjd-PqDr2jX_4yKaumkoHTz04_q-q) "Eclipse Platform"
org.eclipse.rcp (3.7.2.v20120120-1424-9DB5FmnFq5JCf1UA38R-kz0S0272) "Eclipse RCP"
org.scala-ide.sdk.feature (3.0.0.201303261047) "Scala Plugin" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:24:17.380

不幸的是，我无法访问 Mac OS 10.5.x，所以我无法直接复制您的设置。但是，在 10.7 上，**32 位**Cocoa 版本按预期工作。为了解决这个问题，我们需要更多的数据点：

*   您看到*Scala*菜单（在*Run*和*Window*之间）吗？
*   左侧面板是否称为*Package Explorer*？
*   你能发布安装细节（`Eclipse->About Scala IDE -> Installation Details/Configuration`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:52:54.787

您是否已切换到 Scala 视角？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:06:38.400

我遇到了同样的问题：可能没有加载 scala 插件。

要检查它，请转到菜单帮助 - > 关于，单击安装详细信息，名为已安装软件的选项卡：如果它在此处而不在功能选项卡中，则在安装详细信息选项卡中卸载所有与 scala 相关的软件（在底部）。然后通过在安装软件对话框中配置一个新的更新站点来重新安装它（菜单帮助->安装新软件）

# c# - 为什么要复制对象？

> ID：15777011
> 
> 赞同：3
> 
> 时间：2013-04-03T00:46:16.787
> 
> 标签：c#, reflection, copy

考虑以下代码：

```
class ObjectAccessor {
  ...
  static public void SetValueAtPath(ref object obj, List<PathEntry> path, 
                                    object value)
  {
    if (path.Count == 0)
      obj = value;

    object container = obj;
    for (int i = 0; i < path.Count - 1; i++)
      container = GetMember(container, path[i]);
    SetMember(container, path[path.Count - 1], value);
  }
  ...
} 
```

调用时，`SetValueAtPath`我打算分配`value`给内部深处的特定字段或属性`obj`，通过`path`. 我希望`container`变量指向包含该字段的实际对象并`SetMember`修改该字段。由于容器是一个参考，原来的`obj`也应该被修改。但是，根据调试器，只有`container`被修改并`obj`保持不变。创建副本的位置和原因？

以下是上面代码中使用的类型和函数的定义：

```
class PathEntry
{
  public enum PathEntryKind
  {
    Index,
    Name
  }
  public PathEntryKind Kind;
  public int Index;    // Kind == Index
  public string Name;  // Kind == Name
}

class ObjectAccessor {
  ...
  static public object GetMember(object obj, PathEntry member) 
  {
    if (member.Kind == PathEntry.PathEntryKind.Index)
      return ((IList)obj)[member.Index];
    else
      return GetFieldOrPropertyValue(obj, member.Name);
  }

  static public object GetFieldOrPropertyValue(object obj, string name)
  {
    FieldInfo fieldInfo = obj.GetType().GetField(name, BindingFlags.Public |
      BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.Instance);
    PropertyInfo propertyInfo = obj.GetType().GetProperty(name, BindingFlags.Public |
      BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.Instance);
    if (fieldInfo != null)
      return fieldInfo.GetValue(obj);
    else if (propertyInfo != null)
      return propertyInfo.GetValue(obj, null);
    throw new IncompatibleNativeTypeException();
  }

  static public void SetMember(object obj, PathEntry member, object value)
  {
    if (member.Kind == PathEntry.PathEntryKind.Index)
      ((IList)obj)[member.Index] = value;
    else
      SetFieldOrPropertyValue(obj, member.Name, value);
  }

  static public void SetFieldOrPropertyValue(object obj, string name, object value)
  {
    FieldInfo fieldInfo = obj.GetType().GetField(name, BindingFlags.Public |
      BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.Instance);
    PropertyInfo propertyInfo = obj.GetType().GetProperty(name, BindingFlags.Public |
      BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.Instance);
    if (fieldInfo != null)
      fieldInfo.SetValue(obj, value);
    else if (propertyInfo != null)
      propertyInfo.SetValue(obj, value, null);
  }
  ...
} 
```

**更新：**呼叫站点的代码：

```
object obj = ObjectConstructor.ConstructObject(encoding, objectType);
...
ObjectAccessor.SetValueAtPath(ref obj, encodingEntry.ValuePath, value); 
```

@Kirk：`container`执行后在调试器中悬停变量时，`SetMember`我看到修改后的字符串字段从`null`to更改`"Sergiy"`，而当悬停`obj`并导航到同一字段时，它仍然存在`null`。

顺便说一句，代码可在此处获得：[https ://github.com/rryk/opensim-omp/blob/kiara/KIARA/](https://github.com/rryk/opensim-omp/blob/kiara/KIARA/)

**更新：**我在以下测试中运行时遇到了这种奇怪的行为：[https ://github.com/rryk/opensim-omp/blob/kiara/KIARA.Test/FunctionMapingConfigTest.cs](https://github.com/rryk/opensim-omp/blob/kiara/KIARA.Test/FunctionMapingConfigTest.cs)

**更新：**感谢克里斯，我已经意识到问题出在哪里，并重新实现了代码，如下所示：

```
// Supports empty path in which case modifies passed obj as it's passed by reference.
static public void SetValueAtPath(ref object obj, List<PathEntry> path, object value)
{
  if (path.Count == 0)
  {
    obj = value;
    return;
  }

  // List of value types (structs) to be reassigned.
  List<KeyValuePair<object, PathEntry>> valueTypeContainers = new List<KeyValuePair<object,PathEntry>>();

  object container = obj;
  for (int i = 0; i < path.Count - 1; i++)
  {
    object newContainer = GetMember(container, path[i]);

    // Keep the trail of the value types (struct) or clear it if next container is non-value type.
    if (newContainer.GetType().IsValueType)
      valueTypeContainers.Add(new KeyValuePair<object, PathEntry>(container, path[i]));
    else
      valueTypeContainers.Clear();

    container = newContainer;
  }

  SetMember(container, path[path.Count - 1], value);

  // Reassign the value types (structs).
  for (int i = valueTypeContainers.Count - 1; i >= 0; i--)
  {
    object valueContainer = valueTypeContainers[i].Key;
    PathEntry pathEntry = valueTypeContainers[i].Value;
    SetMember(valueContainer, pathEntry, container);
    container = valueContainer;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:23:06.187

原因是`struct`您的对象成员路径中有值类型。

当您调用`ObjectAccessor.GetFieldOrPropertyType`值类型时，它会返回原始值的*副本*。然后，当您最终更改一个值（或进一步深入兔子洞复制更多值类型成员）时，您正在更改一个副本。

我建议您[完全避免使用可变结构](http://blogs.msdn.com/b/ericlippert/archive/2008/05/14/mutating-readonly-structs.aspx)。如果您将类型更改为引用类型，它可能会正常工作。

编辑：鉴于您的测试使用类型`FullName`和`LoginRequest`：

```
struct FullName 
{
    public string first;
    public string last;
}

struct LoginRequest 
{
    FullName name;
    string pwdHash;
    string start;
    string channel;
    string version;
    string platform;
    string mac;
    string[] options;
    string id0;
    string agree_to_tos;
    string read_critical;
    string viewer_digest;
} 
```

和 path `["name", "first"]`，它将创建`FullName`at "name" 的副本，并设置其 "first" 字段值。但是这个副本最终被扔掉了。

这与写作相同：

```
LoginRequest login = new LoginRequest();
FullName name = login.name;
name.first = "My name!";
Console.WriteLine(name.first); //My name!
Console.WriteLine(login.name.first); //null 
```

EDITx2：如果避免嵌套值类型是不可行的（考虑到库的性质，我怀疑是这样），你*可以*做的就是设置每个检索到的值。因此，如果您确定在循环/堆栈中遍历`ValuePath`您检索 a 的步骤`struct`，然后确保重新分配您制作的每个副本，它可能会起作用。

# javascript - 将标签转换为输入文本

> ID：15777017
> 
> 赞同：1
> 
> 时间：2013-04-03T00:46:59.577
> 
> 标签：javascript, dom, contenteditable, inplace-editing

有一些大公司允许您单击标签并触发将该标签转换为可编辑标签的事件。因此，您可以进行任何您想要的更改，然后按 Enter（或其他）进行编辑（主要使用 ajax）。

有没有这样一种使用javascript或其他方法来做到这一点？

已经尝试更改 tagName 属性，但我认为这显然行不通。

有人有办法吗？

ps：在SO中没有找到这个。如果我没有使用正确的关键字来搜索它，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:50:16.197

那里有多个内嵌编辑脚本/插件。我最近成功使用的一个是：

[http://vitalets.github.com/x-editable/](http://vitalets.github.com/x-editable/)

对于完整的跨浏览器支持，他们通常抓取文本，用 an 替换元素，`input type="text"`然后抓取值并在完成后用新文本恢复原始元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:33:24.813

如果您只需要编辑纯文本，请使用*BotskoNet*提到的解决方案。

如果您需要更多的编辑选项（所见即所得的编辑器），那么您应该尝试例如[http://ckeditor.com/demo#inline](http://ckeditor.com/demo#inline)。CKEditor 基于*elclanrs*`contenteditable`提到的，但它修复了大量浏览器的错误并统一了它们的行为。

# python - Flask：无法从 socket.io 监听器中访问 c urrent_app

> ID：15777018
> 
> 赞同：4
> 
> 时间：2013-04-03T00:47:08.140
> 
> 标签：python, redis, socket.io, flask, gevent

我正在尝试从侦听器中访问 c​​urrent_app，以便我可以使用应用程序配置值来订阅哪个频道。但是我收到“RuntimeError：在应用程序上下文之外工作”。

这是有问题的代码：

```
from flask import Blueprint, Response, request, current_app
from socketio import socketio_manage
from socketio.namespace import BaseNamespace
from redis import StrictRedis
import pprint

socketapp = Blueprint('socketapp', __name__)

class MessageNamespace(BaseNamespace):
    def listener(self):
        pprint.pprint(current_app.config)
        r = StrictRedis()
        p = r.pubsub()
        p.subscribe('message-channel')

        messages = r.lrange('message', 0, -1)
        self.emit('message-message', ''.join(messages))

        for m in p.listen():
            if m['type'] == 'message':
                self.emit('message-message', m['data'])

    def on_subscribe(self):
        self.spawn(self.listener)

@socketapp.route('/socket.io/<path:remaining>')
def socketio(remaining):
    try:
        socketio_manage(request.environ, {'/messages': MessageNamespace}, request)
    except BaseException:
        pass
    return Response()

@socketapp.route('/message', methods=['GET'])
def say():
    msg = request.args.get('msg', None)
    if msg:
        r = StrictRedis(host=current_app.config['REDIS_HOST'])
        r.rpush('message', msg)
        r.publish('message-channel', msg)

        return Response('Message sent!')
    else:
        return Response('Please specify your message in the "msg" parameter') 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T02:06:56.177

`current_app`仅在处理 HTTP 请求时有效（它是暂时指向实际应用程序对象的代理）。您需要从此模块访问实际的应用程序对象，或者通过`current_app._get_current_object()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:05:10.480

肖恩的片段对我不起作用。我基于它编写了以下hack：

```
@bp.route('/<path:remaining>')
def socketio(remaining):
    app = current_app._get_current_object()
    try:
        # Hack: set app instead of request to make it available in the namespace.
        socketio_manage(request.environ, {'': ChatNamespace}, app)
    except:
        app.logger.error("Exception while handling socket.io connection", exc_info=True)
    return Response()

class ChatNamespace(BaseNamespace, RoomsMixin, BroadcastMixin):
    def __init__(self, environ, ns_name, request=None):
        self.context = None
        if request:
            # Hack: initialize context with app that was set instead of request. Then miss it in parent constructor call.
            app = request
            self.context = app.request_context(environ)
            self.context.push()
            app.preprocess_request()
        super(ChatNamespace, self).__init__(environ, ns_name)

def log(self, message):
        # Now we can access app and other goodies.
        self.context.app.logger.info("[{0}] {1}".format(self.socket.sessid, message))

def disconnect(self, *args, **kwargs):
        if self.context:
            self.context.pop()
        super(ChatNamespace, self).disconnect(*args, **kwargs) 
```

# android - 为 NDK 应用开启 Android 模拟器 GPU

> ID：15777020
> 
> 赞同：1
> 
> 时间：2013-04-03T00:47:14.507
> 
> 标签：android, opengl-es, android-emulator, android-ndk, avd

我注意到使用 Android SDK 创建的应用程序可以很好地使用 avd 中的 OpenGL ES 命令和*GPU 加速 on*，另一方面，使用 NDK 创建的与 OpenGL ES 一起使用的应用程序总是无法启动：这是预期的行为吗安卓模拟器？

需要明确的是，我没有性能问题，*模拟器速度*对于其他应用程序来说很好，这“只是”这样一个事实，即如果涉及 OpenGL ES，NDK 应用程序甚至都不会启动。

我在 Ubuntu 64 位下运行我的 avds。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T06:17:55.503

我正在使用带有 Android NDK R9 的 Android 4.3（API 级别 18）Intel Atom (x86) AVD。OpenGL ES 2.0 加速非常适合这种情况。我正在使用带有 Mac OS X 10.9.1 的 Macbook Pro。

不确定这是否重要，但我也有英特尔® 硬件加速执行管理器 (HAXM) 和 Mac OS X 10.9 的修补程序。（[Android 模拟器使用 HAXM 冻结 OS X v10.9 (Mavericks)](https://stackoverflow.com/questions/19243490/android-emulator-freezing-osx-10-9-mavericks-with-haxm)）

TL;DR：它在我的开发环境中按预期工作，但我认为可以安全地假设某些因素可能会阻止它在您的开发环境中工作。

# pandas - pandas.io.data get_data_yahoo ^DJI 检索错误

> ID：15777021
> 
> 赞同：1
> 
> 时间：2013-04-03T00:47:19.567
> 
> 标签：pandas

我在 Snow Leopard 中使用 Python 2.7.3 和当前（2013 年 4 月 2 日）最新版本的 pandas 0.10.1

我正在尝试使用 pandas Yahoo Finance API 来获取股票价值（查询中的日期在这里并不重要）。

这有效：

```
import pandas.io.data as web 

GOOG = web.get_data_yahoo('GOOG', '8/19/2004') 
```

这**不会**：

```
import pandas.io.data as web

DJI = web.get_data_yahoo('^DJI', '8/19/2004') 
```

^ 似乎是问题所在。Yahoo Finance 将 ^ 替换为 %5E 或 @%5E。我试过直接替换这些但没有成功。我还发现了 2 个月前的[这个提交](https://github.com/nehalecky/pandas/commit/9a48b4527670ff56b8529c01aa961873bbd610d5)，它似乎在第 232 行解决了这个问题。我查看了我自己的 pandas/io/data.py ，它并不完全相同，它没有提到这是问题。

是否有使用 API 的简单解决方案？

我想我可以自己使用 Beautiful Soup 或其他东西并将结果塞进 a`DataFrame`但我更愿意找到一种使用 API 的方法，因为它可以保持清洁并且工作已经完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:18:38.103

我认为问题是缺少数据源。例如，GOOG 的来源是[http://ichart.yahoo.com/table.csv?s=GOOG](http://ichart.yahoo.com/table.csv?s=GOOG)，看起来还可以。此外，一些带有“^”的符号也可以使用，例如[http://ichart.yahoo.com/table.csv?s=%5ETWII](http://ichart.yahoo.com/table.csv?s=%5ETWII)也可以使用。但是， http://ichart.yahoo.com/table.csv? [s=%5EDJI](http://ichart.yahoo.com/table.csv?s=%5EDJI)不起作用。请注意，“^”将被编码为`%5e`

还有，什么链接坏了？[或许你可以在这里](http://developer.yahoo.com/forum/General-Discussion-at-YDN/Dow-Jones-Average-Error/1283975525000-e462d312-827e-3316-900e-c85f668f587d)找到一些答案

# c# - 范围如何影响“do...while”循环，反之亦然？

> ID：15777029
> 
> 赞同：5
> 
> 时间：2013-04-03T00:48:24.627
> 
> 标签：c#, loops, scope

C# 作业问题：我刚刚使用 do-while 循环添加了一些“再次播放”逻辑。这是我的原始代码：

```
namespace demo
{
    class Program
    {
        static void Main(string[] args)
        {
            Info myInfo = new Info();
            myInfo.DisplayInfo("Daniel Wilson", "4 - Hi-Lo Game");
               // I moved  String playAgain = "N"; to here 
            do
            {
                DWHiLowUI theUI = new DWHiLowUI();
                theUI.Play();
                String playAgain = "N";
                Console.WriteLine("Enter 'Y' to play again, any other key to exit.");
                playAgain = Console.ReadLine();
            }
            while ((playAgain == "Y")||(playAgain =="y"));
            Console.ReadLine();
        }
    }
} 
```

这给了我一个错误：

```
Error   7   The name 'playAgain' does not exist in the current context 
```

我搬到`String playAgain = "N";`了我的上方`do`（见评论），它工作得很好。

我试图了解我究竟*做*了什么来解决这个问题。这似乎是一个范围问题，但在我看来，在循环中定义一个变量可以想象将它传递到循环的末尾。我浏览了我的教科书，没有任何关于范围的内容，因为它与循环有关。这将向我表明循环内的范围不是问题，但这表现得好像它是一个范围问题。我正在困惑自己思考它。

如果这*是*一个范围问题，我希望更好地了解`do...while`方法中循环的范围。如果这*不是*范围问题，那是我的幸运猜测。在那种情况下，出了什么问题，移动那行代码是如何解决的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T00:53:55.943

你是对的，这是一个范围界定问题。C# 具有*块作用域*，这意味着在块内声明的变量（在 之间声明的代码`{}`）只能在该块（和子块）内访问。

由于`playAgain`是在循环体内部定义的，因此在该块之外无法访问它，甚至在`while`表达式内也无法访问。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T00:52:47.187

是的，这是范围问题。do..while 周围的范围如下所示

```
// outer scope
do 
{
    // inner scope
} while (/*outer scope*/);
// outer scope 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T00:59:57.550

添加..循环的每次迭代都会破坏该块中定义的变量，因此当您处于块外的条件评估中时，不知道`playAgain`内部上下文中定义的是什么。

# java - 二维字符

> ID：15777034
> 
> 赞同：0
> 
> 时间：2013-04-03T00:49:26.030
> 
> 标签：java, arrays

```
 public static void main(String[] args) {
      Scanner s= new Scanner(System.in);
      String m ;
      char cur;
      String k;
      System.out.print("enetr the text ");
      m=s.next();
      System.out.print("enetr the key: ");
      k=s.next();
      char d[][]= new char [m.length()][k.length()];

      for(int i=0;i<1;i++){
        for(int j=0;j<k.length();j++){
           cur=k.charAt(j);
           System.out.print(""+cur);

           d[0][j]=cur;
           System.out.print(d);

        }
      } 
```

我想请求帮助更正这段代码。

这段代码需要完成的思想：我想把一个句子复制到一个二维数组中，让矩阵的大小和句子的长度一样；例如，如果 k 是“jon”，我希望有

```
D[0][0]=j   D[0][1]=o   D[0][2]=n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:55:34.783

将 i 循环更改为此

```
for(int i=0;i<m.length();i++) 
```

将`d[0][j]=cur;`行更改为`d[i][j]=cur;`

# e-commerce - 如何计算给定百分比包含值的原始值？

> ID：15777037
> 
> 赞同：6
> 
> 时间：2013-04-03T00:49:32.110
> 
> 标签：e-commerce, formula, percentage

我们有一个在不同地方使用的购物车，因此税收存储在一个配置文件中，目前在新西兰是 15%，所以在我们存储的配置文件中`.15`但是这个数字可以更改，所以我需要不依赖此值作为特定值的公式！

我们还有另一个键来存储我们存储的价格是含税价格还是不含税价格（用户很挑剔，有些人想输入价格，有些人不输入：/）。

因此，如果密钥包含`inclusive`它意味着存储的价格也包含 gst 内容。

如果密钥包含`exclusive`，那么。你明白了。

反正。

我在计算公式以获得含税和独家价格时遇到了一些问题。

让我们使用这些变量。

```
$tax_type = 'exclusive'
$product_price = 150
$tax_amount = 0.15 
```

如果一个产品有它的价格存储税排除那很容易。

独享价 = `$product_price`= 150
包价 = `$product_price + ($product_price*$tax_amount)`=`150 + (150*0.15)`

但是，如果产品的价格包含含税价格，那我就会感到困惑。

所以，变量现在变成了

```
$tax_type = 'inclusive'
$product_price = 172.5
$tax_amount = 0.15 
```

含税价格现在是 $product_price。但是如何计算不含税价格？

在 IRD 网站上，它声明您可以使用`$product_price - ($product_price*3/23)`，但我想这仅适用于 15% 的税收？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T00:57:36.197

公式很简单：

`Inclusive = Exclusive * (1 + tax rate)`

税率是小数点，例如您发布的 0.15。那么通过代数，独家价格将是：

`Exclusive = Inclusive / (1 + tax rate)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-15T08:27:04.903

我知道这是一个老问题，但有些问题可能对其他人有用。

假设`item price is 20.00`（含税）

```
Tax rate is 14.5 
```

我们需要计算独家价格，公式如下。

```
tax excluded price  = item price / ((tax rate /100) + 1 ) 
```

例如：`20 / ((14.5/100) + 1)) = 17.4672489.`

[可在此处找到详细文档，用于计算计费应用程序](http://www.accountingcoach.com/blog/calculate-sales-tax)中的含税和不含税

希望它可以帮助别人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-17T22:21:34.707

如果您想要包含金额的税收部分，下面是一个更简单的等式，它跳过了必须计算专有数字然后减去它：

税额 = 金额 * (税率 / (100 + 税率))

例如 15% GST - 商品售价为 92.00 美元

税费 = 92.00 美元 * (15 / 115) = 12.00 美元

# ruby-on-rails - 使用nested_form_for为nil：NilClass获取未定义的方法`values_at'

> ID：15777038
> 
> 赞同：3
> 
> 时间：2013-04-03T00:49:46.383
> 
> 标签：ruby-on-rails, nested-form-for

我正在使用 ryanb 的 nested_form gem，但它似乎无法正常工作。删除链接不起作用（我正确安装了 //= require jquery_nested_form 并且看起来它正在加载但我不断收到此错误：

```
undefined method `values_at' for nil:NilClass 
```

当我去添加：

```
= f.link_to_add "Add a line item", :invoice_line_items 
```

此外，没有该行它可以工作，但删除链接不做任何事情：

```
line_item.link_to_remove "Remove this line item" 
```

这是我的代码：

```
.row-fluid
  .span10.offset1
    = nested_form_for(@invoice) do |f|
      - if @invoice.errors.any?
        #error_explanation
          %h2
            = pluralize(@invoice.errors.count, "error")
            prohibited this invoice from being saved:
          %ul
            - @invoice.errors.full_messages.each do |msg|
              %li= msg
      .fieldset
        %legend
          = "New Invoice for #{@client.name}"
        .form-horizontal
          .pull-left
            .control-group
              %label.control-label{:style => "width: 100px;"}
                Invoice ID
              .controls{:style => "margin-left: 120px;"}
                = f.text_field :client_invoice_id, :class => "input-small", :placeholder => @invoice_count_placeholder
            .control-group
              %label.control-label{:style => "width: 100px;"}
                Due Date
              .controls{:style => "margin-left: 120px;"}
                = f.select :payment_term, @payment_terms, { :required => "true" }, { :class => "span10" }
          .pull-right
            .control-group
              %label.control-label
                Issue Date
              .controls{:style => "margin-right: 60px;"}
                = f.text_field :issue_date, :id => "date-picker", :class => "input-small", :required => "true"
            .control-group
              %label.control-label
                Discount
              .controls{:style => "margin-right: 60px;"}
                .input-append
                  = f.text_field :discount, :class => "input-small", :placeholder => "Optional"
                  %span.add-on %
        .row-fluid
          %table.table
            = f.fields_for :invoice_line_item do |line_item|
              %tr
                %th
                %th.span8 Description
                %th.span1 Quantity
                %th.span1 Rate
                %th.span1 Amount
              %tr
                %td= line_item.link_to_remove "Remove this line item"
                %td= line_item.text_field :description
                / %td= text_area_tag 'body', nil, :style => "width:96%;"
                %td= text_field_tag 'hello', nil, :class => "input-mini"
                %td= text_field_tag 'hello', nil, :class => "input-mini"
                %td $99.99

            = f.link_to_add "Add a line item", :invoice_line_items
        .form-actions
          = f.submit "Preview Invoice", :class => "btn btn-primary pull-right" 
```

知道我做错了什么吗？我希望能够轻松地将行项目添加到发票中，然后保存整个内容。这是我的联想：

```
class Invoice < ActiveRecord::Base
  ## ASSOCIATIONS ##
  belongs_to :user
  belongs_to :client
  has_many :invoice_line_items
  ## NESTED ATTRIBUTES ##
  accepts_nested_attributes_for :invoice_line_items, :allow_destroy => true

class InvoiceLineItem < ActiveRecord::Base
  ## ASSOCIATIONS ##
  belongs_to :invoice 
```

编辑：这是我的发票控制器新操作：

```
def new
    @client = current_user.clients.find(params[:client_id])
    @invoice = Invoice.new(:client_id => @client.id)
    @payment_terms = Invoice.payment_terms

    if @client.invoices.count > 0
      @invoice_count_placeholder = "Last used: #{@client.invoices.last.client_invoice_id}"
    else
      @invoice_count_placeholder = ""
    end

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @invoice }
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-10T23:11:52.417

我陷入了同样的“未定义方法”错误，在我将`f.fields_for`调用的第一个参数更改为**复数**形式后一切正常，就像**has_many**关联一样。所以在你的情况下应该是：

```
= f.fields_for :invoice_line_items do |line_item| 
```

因为 Invoice 模型中的关联是`has_many :invoice_line_items`

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T07:12:30.977

看起来你有两个不同的问题。

1）删除链接不做任何事情。你用的是什么版本的 Rails？资产管道直到 3.1 才添加，所以如果你使用较低的东西，你可以按照 Github 上“非资产管道设置”下的说明进行操作，这可能会解决问题一。

2) 使用 link_to_add 助手会给你一个错误。我在这里偷看了代码[https://github.com/ryanb/nested_form/blob/master/lib/nested_form/builder_mixin.rb](https://github.com/ryanb/nested_form/blob/master/lib/nested_form/builder_mixin.rb)

该方法调用 values_at on

```
@fields[fields_blueprint_id] 
```

根据您的错误消息，这显然是零。我对 Ryan 的代码感到迷茫。我看不出这个值是如何设置的，所以我无法帮助你弄清楚为什么这个值是 nil。但如果我不得不猜测，那是因为你没有添加

```
attr_accessible :invoice_line_items_attributes 
```

到您的发票模型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-15T00:53:53.427

这就是我想出的。如果关系的嵌套侧没有项目 - 比如说，如果这本书没有作者 - 我得到了错误。当我`@book`在控制器中加载时，我尝试检查`authors`数组是否为空，如果是，则添加一个新的空数组`Author`。当我这样做时，嵌套表单从未看到空关系，并且错误消失了。

我怀疑这是一个陷阱，`nested_form`如果有人想这样做并提交拉取请求，可以将其编码出来。

# c++ - 未实现的纯虚方法？

> ID：15777056
> 
> 赞同：4
> 
> 时间：2013-04-03T00:51:30.203
> 
> 标签：c++, inheritance, abstract-class, pure-virtual

这是问题所在：尝试编译时，我不断收到未实现的纯虚拟方法错误。我已经在抽象基类中实现了所有纯虚方法。有任何想法吗？

这是抽象基类：

```
class record{
public:
    virtual int getID()=0;
    virtual record *clone(); 
}; 
```

和实施：

```
class sdata: public record{
public:
    sdata(std::string s = ""){data=s; ID=atoi(data.substr(0,8).c_str());}
    virtual int getID(){return ID;}
private:
    std::string data;
    int ID;
}; 
```

抱歉，这是完整的错误信息：

“记录”中未实现的纯虚拟方法“getID”

也许这段代码会导致错误：

```
int hashTable::hash(record *x) {
   return floor(m * (x->getID() * A - floor(x->getID() * A)));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T01:19:03.490

如果没有看到导致错误的代码，就很难确切地知道发生了什么。如果这是一个编译时错误，我在这里看不到任何会导致它的东西。

但是，如果您看到运行时错误，我能想到的两个最常见的原因是：

(1) 从基类的构造函数或析构函数中调用成员函数（甚至间接调用）。

(2) 派生类调用基类的函数版本，但未实现。

显示这两个错误的示例是：

```
`struct Base {
    Base()
    {
        call_foo(); // Oops, indirectly calls Base::foo() (Scenario 1)
    }
    void call_foo() const {
        foo();
    }
protected:
    virtual void foo() const = 0;
};

struct Derived : Base {
protected:
    virtual void foo() const {
        Base::foo(); // Oops, unimplemented virtual base function (Scenario 2)
    }
};

int main() {
    Derived().call_foo();
}` 
```

`**== 更新：可能的编译时错误 ==**`

 `我在您的示例代码中观察到记录有一个非纯虚拟 clone() 成员函数返回一个`record *`. 由于记录是抽象的，您不能直接创建记录（只能创建它的具体子类）。这表明您的 clone() 成员函数也应该是纯虚拟的；如果它尝试（例如）`return new record()`，你会得到一个错误，你的基类有纯虚函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T01:04:39.413

听起来您还没有实现抽象基类中的所有功能。如果您的基础中的函数具有签名：

```
 void SomeFuction() const; 
```

您在派生类中实现以下内容：

```
 void SomeFuction(); 
```

那么您还没有实现该功能，因为您省略了`const`. GCC 应该告诉你你没有实现什么。

相关：如果你有一个基的具体实现，你会在派生类中隐藏它的名字。要查找您 [意外] 隐藏的功能，请使用`-Woverloaded-virtual`.`

# c# - c# FTP文件下载超时

> ID：15777057
> 
> 赞同：0
> 
> 时间：2013-04-03T00:51:55.937
> 
> 标签：c#, ftpwebrequest

我正在从我的 FTP 服务器下载一个文件。当它到达最后一个字节时，它会冻结并超时。我必须将超时设置为 -1，这样它就不会超时，但最后一个字节永远不会完成。

有任何想法吗？

```
 FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://xxx" + "/" + fileDownload);
            request.Credentials = new NetworkCredential("xxx", "xxx");
            request.UseBinary = true;
            request.KeepAlive = true;

            request.Timeout = -1;
            request.Method = WebRequestMethods.Ftp.DownloadFile;
            FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            Stream responseStream = response.GetResponseStream();
            FileStream writer = File.Create(@"c:\temp\" + Path.GetFileNameWithoutExtension(fileDownload) + ".csv");

            long length = response.ContentLength;
            int bufferSize = 2048;
            int readCount;
            byte[] buffer = new byte[2048];

           // readCount = responseStream.Read(buffer, 0, bufferSize);

            while (responseStream.CanRead)
            {
                readCount = responseStream.Read(buffer, 0, bufferSize);
                writer.Write(buffer, 0, readCount);

            }     
            responseStream.Close();
            response.Close();

            writer.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:58:30.377

[`CanRead`](http://msdn.microsoft.com/en-us/library/system.io.stream.canread.aspx)不做你认为它做的事。它只是表示实际上是否可以读取流*。*不是是否还有剩余字节。而是像这样重写你的循环：

```
for (int readCount; (readCount = responseStream.Read(buffer, 0, bufferSize)) > 0;) 
{ 
    writer.Write(buffer, 0, readCount); 
} 
```

# regex - 正则表达式或运算符

> ID：15777058
> 
> 赞同：0
> 
> 时间：2013-04-03T00:51:58.277
> 
> 标签：regex

我对 or 操作符有一点小问题

我想寻找

```
[a-zA-Z]+ 
```

其次是

```
\-[a-zA-Z]? 
```

或者

```
\'[a-zA-Z]? 
```

基本上抓住任何单词，所以我可以省略：空格、`\t`、`\n`等`\n\r`。我也明白这`\w`会很好用，但我不想要这样`9-10`的结果，我只是在寻找单词。

我知道这`(thing|thing2)`是 or 的语法，但它只是捕获整个单词，然后作为第二个匹配项，收缩和连字符的后半部分。非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:56:08.033

您可以为此使用字符类：

```
[a-zA-Z]+[-\'][a-zA-Z]+ 
```

或者，如果你真的想使用`or`操作符，你可以使用非捕获组`(?:)`：

```
[a-zA-Z]+(?:-|\')[a-zA-Z]+ 
```

# java - 在 Rhino 中，我可以枚举可用 Java 包的列表吗？如何？

> ID：15777059
> 
> 赞同：3
> 
> 时间：2013-04-03T00:52:12.333
> 
> 标签：java, javascript, rhino

我试过这样做：

```
var r = {};
for (p in Packages) {
  if (Packages.hasOwnProperty(p)) {
    r[p] = p.toString();
  }
} 
```

...但我得到一个错误：

> TypeError: Invalid iterator value ... at line xx

错误消息中指示的行是带有

```
for (p in Packages) { ... } 
```

* * *

还，

```
var r = {
  "Packages" : typeof Packages,
  "Packages.length" : typeof Packages.length,
  "Packages.java" : typeof Packages.java,
  "Packages.surelyThisIsNotDefined" : typeof Packages.surelyThisIsNotDefined
}; 
```

结果是：

```
{
  "Packages": "object",
  "Packages.length": "object",
  "Packages.java": "object",
  "Packages.surelyThisIsNotDefined": "object"
} 
```

...这根本没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:48:16.270

不确定您想要的输出格式，以下代码返回 ClassLoader 在运行时加载的 Java 包的列表：

```
packs = java.lang.Package.getPackages()
for (p in packs) 
print(packs[p]); 
```

# php - 使用 PHP 在电子邮件中将 HTML 表单输入作为 PDF 附件发送

> ID：15777062
> 
> 赞同：0
> 
> 时间：2013-04-03T00:52:52.293
> 
> 标签：php, html, phpmailer, fpdf

我想创建一个接受用户基本输入的表单。我想通过电子邮件将这些数据以 PDF 文档的形式发送给另一个用户。

*   用户在表单中给出一些输入值
*   用户提交表单后，数据应转换为 PDF 并通过电子邮件发送给管理员

我想知道是否有一种方法可以在不将文件存储在服务器上的情况下完成此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:39:24.390

我得到了答案：您可以使用 PHPMailer 来执行此操作。代码看起来有点像这样：

```
$mail = new PHPMailer(); 
...
$doc = $pdf->Output('', 'S'); 
$mail->AddStringAttachment($doc, 'doc.pdf', 'base64', 'application/pdf'); 
$mail->Send(); 
```

# java - 如何使用 Rectangle 类创建一个 Rectangle 数组？

> ID：15777064
> 
> 赞同：0
> 
> 时间：2013-04-03T00:52:54.823
> 
> 标签：java, arrays

我正在处理一个任务，该任务应该返回一个由 10 个矩形组成的数组，这些矩形具有从字符串中选择的随机高度、随机宽度和随机颜色。

该程序可以很好地返回一个矩形的对象，但是我将如何实现它来创建一个由 10 个矩形组成的数组，然后在循环中返回每个矩形？

这是我的类文件和我的对象：

```
import java.util.*;

public class Rectangle 
{
    private double width;
    private double height;
    public static String color = "White";
    private Date date;

Rectangle() {
    width = 1;
    height = 1;
    date = new Date(); 
    }

Rectangle (double w, double h) {
    width = w;
    height = h;
    date = new Date();
    }

public double getHeight() {
    return height;
    }

public void setHeight(double h) {
    height = h;
    }

public double getWidth() {
    return width;
    }

public void setWidth(double w) {
    width = w;
    }

public static String getColor() {
    return color;
    }

public static void setColor(String c) {
    color = c;
    }

public Date getDate() {
    return date;
    }

public void setDate (Date d) {
    date = d; 
    }

public double getArea() {
    return width * height;
    }

public double getPerimeter() {
    return 2  * (width + height);
    }

public String toString() {
    String S;
    S = "Rectangle with width of " + width;
    S = S + " and height of " + height;
    S = S + " was created on " + date.toString();
    return S;
    } 
```

}

到目前为止，这是我的客户程序。我正在设置随机高度和随机宽度，并从颜色字符串中选择随机颜色。

我希望能够为 10 个不同矩形的数组执行此操作：

```
import java.util.*;

public class ClientRectangle 
{
    public static void main(String[] args)
    {
        String[] colors = {"White","Blue","Yellow","Red","Green"};

        Rectangle r = new Rectangle();
        int k;
        for(int i = 0; i < 10; i++)
        {
            r.setWidth((Math.random()*40)+10); 
            r.setHeight((Math.random()*40)+10);
            System.out.println(r.toString() + " has area of " + r.getArea() + " and perimeter of " + r.getPerimeter());
            k = (int)(Math.random()*4)+1;
            System.out.println(colors[k]);

        }

    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T00:58:18.450

创建一个矩形数组并为每个索引添加一个矩形。

```
Rectangle[] arr = new Rectangle[10];

for(int i = 0; i < 10; i++)
{
 Rectangle r = new Rectangle();
 r.setWidth((Math.random()*40)+10); 
 r.setHeight((Math.random()*40)+10);

 arr[i] = r;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:58:41.283

移动`Rectangle r = new Rectangle();`for 循环内部。在循环外初始化一个 Array(List)，并继续将循环中的 Rectangles 添加到数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:00:55.463

您似乎已经知道如何声明对象数组，因为您使用的是`String`s 数组。s数组的声明`Rectangle`非常相似：

```
Rectangle[] rects; 
```

请注意，您还*必须*初始化数组。由于数组本身就是对象，因此您使用`new`运算符，有点像将引用变量初始化为单个`Rectangle`:

```
Rectangle[] rects = new Rectangle[SIZE]; 
```

如您所见，唯一的区别是您将数组的大小放在`[]`s 中。这只会创建一个对对象的*引用*数组。`Rectangle`引用全部自动设置为`null`。这意味着您需要自己创建`Rectangles`。您可以在 for 循环中执行此操作：

```
for (int i = 0; i <= SIZE; ++i) {
    rects[i] = new Rectangle();
} 
```

您还可以根据需要设置每个的宽度和高度`Rectangle`。（我会将有关如何执行此操作的确切细节留给读者。）

最后，您需要将所有这些都放在一个方法中*，* `main()`以便您可以按照说明状态返回整个数组（一次不返回一个`Rectangle`）：

```
return rects; 
```

# c# - C# ASP.NET 中的连接字符串问题

> ID：15777068
> 
> 赞同：2
> 
> 时间：2013-04-03T00:53:24.523
> 
> 标签：c#, asp.net, sql-server

我正在处理的当前程序是用于购物车的注册页面，我已经设置了一个带有表格的 SQL Server，以允许将数据记录为

1.  用户名，
2.  电子邮件，
3.  密码都设置了一个`Nvarchar(max)`。

.NET Framework 的版本是 4.5，我使用的是 VS 2012 并使用 C# 进行编码，服务器是`KENSULLIVAN-PC\KSSQL`使用集成 Windows 身份验证的 SQL Server 实例。

到目前为止，我已经能够将注册页面运行到它将保存信息的 cookie，但不会将任何信息发送到 SQL Server 中的表。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;

public partial class Account_Register : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        RegisterUser.ContinueDestinationPageUrl = Request.QueryString["ReturnUrl"];      
    }
    //Submit button for user registration information
    protected void RegisterUser_CreatedUser(object sender, EventArgs e)
    {
        int TheUserID = 5000;
        SqlConnection conn = new SqlConnection("Server=KENSULLIVAN-PC/KSSQL;Database=GroupProject; Integrated Security=True");

        //INSERT command for values to be updated or added to the Database
        SqlCommand comm = new SqlCommand("INSERT INTO RegUser (UserName, Email, Password) VALUES (@UserName, @Email, @Password)", conn);
        comm.Parameters.Add("@UserName", System.Data.SqlDbType.NVarChar, 100);
        comm.Parameters["@UserName"].Value = RegisterUser.UserName; 
        comm.Parameters.Add("@Email", System.Data.SqlDbType.NVarChar, 100);
        comm.Parameters["@Email"].Value = RegisterUser.Email;
        comm.Parameters.Add("@Password", System.Data.SqlDbType.NVarChar, 100);
        comm.Parameters["@Password"].Value = RegisterUser.Password;       

        try
        {
            conn.Open();
            comm.ExecuteNonQuery();
            Response.Redirect("~/LoggedIn.aspx");
        }
        catch
        {
           //ErrorDB.Text = "Error Submitting, Try Again";
        }
        finally
        {
            conn.Close();
        }

        FormsAuthentication.SetAuthCookie(RegisterUser.UserName, false /* createPersistentCookie */);
        string continueUrl = RegisterUser.ContinueDestinationPageUrl;

        if (String.IsNullOrEmpty(continueUrl))
        {
            continueUrl = "~/LoggedIn.aspx";
        }
        Response.Redirect(continueUrl);  
    }
} 
```

我应该做些什么不同，你注意到什么不是真正推荐的？

谢谢你，肯尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:58:30.713

我看到了几个可能的问题。

首先，SQL 数据库的实例名称应该使用反斜杠。当然，你需要避开那个反斜杠，所以试试这个：

```
SqlConnection conn = new SqlConnection("Server=KENSULLIVAN-PC\\KSSQL;Database=GroupProject; Integrated Security=True"); 
```

其次，ASP.NET 的集成安全性可能有点棘手，因为它通常是从服务或系统帐户运行的。您可能希望在 MS-SQL 中启用 MIXED 身份验证模式，创建 SQL 帐户，并传入用户名和密码。我建议将您的连接字符串存储在 web.config 中并对其进行加密。

您是否收到特定的错误/异常？这对我们很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:41:21.323

首先@Adam 已经指出，您的连接字符串有问题，对于 SQl 服务器的命名实例，如果您使用的是 .Net，它应该是反斜杠

```
SqlConnection conn = new SqlConnection("Server=KENSULLIVAN-PC\\KSSQL;Database=GroupProject; Integrated Security=True"); 
```

或使用@

```
SqlConnection conn = new SqlConnection(@"Server=KENSULLIVAN-PC\KSSQL;Database=GroupProject; Integrated Security=True"); 
```

其次，因为您使用的是 Window 身份验证，所以您需要设置 ThreadPool 托管您的 Web 应用程序以在 Windows 域帐户下运行，该帐户对后端数据库具有足够的权限。

如果每个使用您网站的用户都使用 windows 域帐户登录，并且您想使用用户的 windows 域凭据访问后端数据库，那么您需要进行更多设置，您需要模拟，您可能还需要约束委派。

# static - 创建静态方法

> ID：15777070
> 
> 赞同：0
> 
> 时间：2013-04-03T00:53:50.837
> 
> 标签：static

这是我的代码。

```
public static String hBlanks(String a, String b){

    StringBuilder blanks = new StringBuilder();

    int j;
    for(int x = 0; x < a.length(); x++){
      blanks.append('-');
    }
    System.out.println(blanks);
    String strBlanks = blanks.toString();

    for(int i = 0; i < a.length(); i++){
      j = 0;
      while(j < b.length()){
        boolean check = a.contains(b.charAt(j)); 
```

//我不断收到布尔检查错误 = a.contains(b.charAt(j)); 线。它说：“java.lang.String 中的包含（java.lang.CharSequence）不能应用于（char）”

```
 if(check == true){
          strBlanks = blanks.replace('-', "" + a.charAt(i)); 
```

//我在 str = strBlanks.replace('-', "" + a.charAt(i)); 线。那个说“找不到符号符号：方法替换（char，java.lang.String）位置：类java.lang.String”

```
 }else{
          j++;
        }
      }
     return strBlanks;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:18:17.893

To get rid of your compilation issues, Change `strBlanks.replace('-', "" + a.charAt(i));` to

```
strBlanks.replace('-', a.charAt(1)); 
```

Also change `a.contains(b.charAt(j));` to

```
a.contains("" + b.charAt(1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:19:41.410

How about just one line, instead of all that code:

```
public static String wordBlanks(String a, CharSequence b){
    return a.replaceAll("[^" + b + "]", "-");
} 
```

This works by creating a regex that matches every character *not* in `b` and using that to replace ever occurrence in `a` with a dash.

# c++ - 如何打印 C++11 时间点？

> ID：15777073
> 
> 赞同：74
> 
> 时间：2013-04-03T00:54:03.897
> 
> 标签：c++, templates, time, c++11, chrono

我已经创建了一个时间点，但我一直在努力将它打印到终端。

```
#include <iostream>
#include <chrono>

int main(){

    //set time_point to current time
    std::chrono::time_point<std::chrono::system_clock,std::chrono::nanoseconds> time_point;
    time_point = std::chrono::system_clock::now();

    //print the time
    //...

    return 0;
} 
```

我能找到的唯一打印 time_point 的文档在这里找到：http: [//en.cppreference.com/w/cpp/chrono/time_point](http://en.cppreference.com/w/cpp/chrono/time_point)

但是，我什至无法根据我的 time_point（如示例）创建 time_t。

```
std::time_t now_c = std::chrono::system_clock::to_time_t(time_point); //does not compile 
```

**错误：**

```
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono: In instantiation of ‘constexpr std::chrono::time_point<_Clock, _Dur>::time_point(const std::chrono::time_point<_Clock, _Dur2>&) [with _Dur2 = std::chrono::duration<long int, std::ratio<1l, 1000000000l> >; _Clock = std::chrono::system_clock; _Dur = std::chrono::duration<long int, std::ratio<1l, 1000000l> >]’:
time.cpp:13:69:   required from here
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:540:32: error: no matching function for call to ‘std::chrono::duration<long int, std::ratio<1l, 1000000l> >::duration(std::chrono::time_point<std::chrono::system_clock, std::chrono::duration<long int, std::ratio<1l, 1000000000l> > >::duration)’
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:540:32: note: candidates are:
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:247:14: note: template<class _Rep2, class _Period2, class> constexpr std::chrono::duration::duration(const std::chrono::duration<_Rep2, _Period2>&)
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:247:14: note:   template argument deduction/substitution failed:
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:243:46: error: no type named ‘type’ in ‘struct std::enable_if<false, void>’
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:240:23: note: template<class _Rep2, class> constexpr std::chrono::duration::duration(const _Rep2&)
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:240:23: note:   template argument deduction/substitution failed:
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:236:27: error: no type named ‘type’ in ‘struct std::enable_if<false, void>’
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:234:12: note: constexpr std::chrono::duration<_Rep, _Period>::duration(const std::chrono::duration<_Rep, _Period>&) [with _Rep = long int; _Period = std::ratio<1l, 1000000l>]
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:234:12: note:   no known conversion for argument 1 from ‘std::chrono::time_point<std::chrono::system_clock, std::chrono::duration<long int, std::ratio<1l, 1000000000l> > >::duration {aka std::chrono::duration<long int, std::ratio<1l, 1000000000l> >}’ to ‘const std::chrono::duration<long int, std::ratio<1l, 1000000l> >&’
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:232:12: note: constexpr std::chrono::duration<_Rep, _Period>::duration() [with _Rep = long int; _Period = std::ratio<1l, 1000000l>]
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/chrono:232:12: note:   candidate expects 0 arguments, 1 provided 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-03T02:52:38.310

（在这篇文章中，为了清楚起见，我将省略`std::chrono::`限定条件。我相信你知道它们的去向。）

您的代码示例无法编译的原因是返回类型`system_clock::now()`与您尝试将其分配给 ( `time_point<system_clock, nanoseconds>`) 的变量类型不匹配。

`system_clock::now()`is的记录返回值`system_clock::time_point`，它是`time_point<system_clock, system_clock::duration>`. `system_clock::duration`是实现定义的，有`microseconds`并且`nanoseconds`被普遍使用。看来你的实现使用`microseconds`了，所以返回类型`system_clock::now()`是`time_point<system_clock, microseconds>`。

`time_point`具有不同持续时间的 s 不能相互隐式转换，因此会出现编译器错误。

您可以使用*显式*转换具有不同持续时间的时间点`time_point_cast`，因此以下内容将在您的系统上编译：

```
time_point<system_clock, nanoseconds> time_point;
time_point = time_point_cast<nanoseconds>(system_clock::now()); 
```

请注意，显式模板参数 to`time_point_cast`是目标**持续时间**类型，而不是目标 time_point 类型。时钟类型必须在 a 中匹配`time_point_cast`，因此指定整个 time_point 类型（在时钟类型和持续时间类型上都是模板）将是多余的。

当然，在您的情况下，由于您只是想打印时间点，因此不需要任何特定的分辨率，因此您只需声明与返回`time_point`的类型相同即可。`system_clock::now()`一个简单的方法是使用`system_clock::time_point`typedef：

```
system_clock::time_point time_point;
time_point = system_clock::now();  // no time_point_cast needed 
```

由于这是 C++11，您也可以只使用`auto`：

```
auto time_point = system_clock::now(); 
```

解决了这个编译器错误后，转换为`time_t`正常工作：

```
std::time_t now_c = std::chrono::system_clock::to_time_t(time_point); 
```

您现在可以使用标准方法来显示`time_t`值，例如`std::ctime`或`std::strftime`。（正如**Cassio Neri**在对您的问题的评论中指出的那样，`std::put_time`GCC 尚不支持更多的 C++-y 函数）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-07-19T03:25:51.317

更新了一个旧问题的答案：

对于 a`std::chrono::time_point<std::chrono::system_clock, some-duration>`现在有一个 3rd 方库，可以让您更好地控制。对于基于其他时钟的time_points，仍然没有比仅获取内部表示并打印出来更好的解决方案。

但是对于`system_clock`，使用[这个库](https://github.com/HowardHinnant/date)，这很简单：

```
#include "date.h"
#include <iostream>

int
main()
{
    using namespace date;
    using namespace std::chrono;
    std::cout << system_clock::now() << " UTC\n";
} 
```

这只是为我输出：

```
2016-07-19 03:21:01.910626 UTC 
```

这是当前 UTC 日期和时间，精度为微秒。如果您的平台上`system_clock::time_point`具有纳秒精度，它将为您打印出纳秒精度。

## 2021 更新

这是上述程序的 C++20 版本：

```
#include <chrono>
#include <iostream>

int
main()
{
    std::cout << std::chrono::system_clock::now() << " UTC\n";
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-05-22T13:02:50.590

此代码段可能会帮助您：

```
#include <iomanip>
#include <iostream>
#include <chrono>
#include <ctime>

template<typename Clock, typename Duration>
std::ostream &operator<<(std::ostream &stream,
  const std::chrono::time_point<Clock, Duration> &time_point) {
  const time_t time = Clock::to_time_t(time_point);
#if __GNUC__ > 4 || \
    ((__GNUC__ == 4) && __GNUC_MINOR__ > 8 && __GNUC_REVISION__ > 1)
  // Maybe the put_time will be implemented later?
  struct tm tm;
  localtime_r(&time, &tm);
  return stream << std::put_time(&tm, "%c"); // Print standard date&time
#else
  char buffer[26];
  ctime_r(&time, buffer);
  buffer[24] = '\0';  // Removes the newline that is added
  return stream << buffer;
#endif
}

int main() {
  std::cout << std::chrono::system_clock::now() << std::endl;
  // Wed May 22 14:17:03 2013
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-03T01:07:34.320

这`nanoseconds`似乎是问题的一部分，稍微查看一下文档我就能让它工作：

```
#include <iostream>
#include <chrono>
#include <ctime>

int main(){

    //set time_point to current time
    std::chrono::time_point<std::chrono::system_clock> time_point;
    time_point = std::chrono::system_clock::now();

    std::time_t ttp = std::chrono::system_clock::to_time_t(time_point);
    std::cout << "time: " << std::ctime(&ttp);

    return 0;
} 
```

虽然看起来`std::chrono::microseconds`工作正常：

```
std::chrono::time_point<std::chrono::system_clock,std::chrono::microseconds> time_point; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-07-03T12:54:35.717

对于与`time_point<steady_clock>`（不是`time_point<system_clock>`）一起工作的任何人：

```
#include <chrono>
#include <iostream>

template<std::intmax_t resolution>
std::ostream &operator<<(
    std::ostream &stream,
    const std::chrono::duration<
        std::intmax_t,
        std::ratio<std::intmax_t(1), resolution>
    > &duration)
{
    const std::intmax_t ticks = duration.count();
    stream << (ticks / resolution) << '.';
    std::intmax_t div = resolution;
    std::intmax_t frac = ticks;
    for (;;) {
        frac %= div;
        if (frac == 0) break;
        div /= 10;
        stream << frac / div;
    }
    return stream;
}

template<typename Clock, typename Duration>
std::ostream &operator<<(
    std::ostream &stream,
    const std::chrono::time_point<Clock, Duration> &timepoint)
{
    Duration ago = timepoint.time_since_epoch();
    return stream << ago;
}

int main(){
    // print time_point
    std::chrono::time_point<std::chrono::steady_clock> now =
        std::chrono::steady_clock::now();
    std::cout << now << "\n";

    // print duration (such as the difference between 2 time_points)
    std::chrono::steady_clock::duration age = now - now;
    std::cout << age << "\n";
} 
```

十进制数格式化程序不是最有效的，但不需要预先知道小数位数，如果你想`resolution`被模板化，这是不知道的，除非你能想出一个常量表达式`ceil(log10(resolution))`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-06T15:56:43.237

ctime() 不适用于 Visual C++。我使用 MS Visual Studio 2013。根据 MSVC 编译器的提示，我将上述代码更改为使用 ctime_s(...)。有效。

```
//set time_point to current time
std::chrono::time_point<std::chrono::system_clock> time_point;
time_point = std::chrono::system_clock::now();

std::time_t ttp = std::chrono::system_clock::to_time_t(time_point);
char chr[50];
errno_t e = ctime_s(chr, 50, &ttp);
if (e) std::cout << "Error." << std::endl;
else std::cout << chr << std::endl; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-21T08:37:11.297

又是一段代码。优点是它相当独立并且支持微秒文本表示。

```
std::ostream& operator<<(std::ostream& stream, const std::chrono::system_clock::time_point& point)
{
    auto time = std::chrono::system_clock::to_time_t(point);
    std::tm* tm = std::localtime(&time);
    char buffer[26];
    std::strftime(buffer, sizeof(buffer), "%Y-%m-%d %H:%M:%S.", tm);
    stream << buffer;
    auto duration = point.time_since_epoch();
    auto seconds = std::chrono::duration_cast<std::chrono::seconds>(duration);
    auto remaining = std::chrono::duration_cast<std::chrono::nanoseconds>(duration - seconds);
    // remove microsecond cast line if you would like a higher resolution sub second time representation, then just stream remaining.count()
    auto micro = std::chrono::duration_cast<std::chrono::microseconds>(remaining);
    return stream << micro.count();
} 
```

# sql - 1.7.0.2 中 Magento 各州的销售报告

> ID：15777075
> 
> 赞同：0
> 
> 时间：2013-04-03T00:54:18.403
> 
> 标签：sql, magento, magento-1.7

不幸的是，表结构已更改，为 1.4 [MySQL 查询“按国家和州/省的销售报告”提供了一个解决方案。](https://stackoverflow.com/questions/3105664/mysql-query-for-sales-report-by-country-and-state-province)有人知道在 1.7.0.2 中按州订购销售的查询吗？我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T22:02:28.757

这是我想出的：

```
SELECT
    sales_flat_order_address.region
    , count(*)
FROM 
    `sales_flat_order` AS `main_table` INNER JOIN `sales_flat_order_address` 
        ON main_table.entity_id = sales_flat_order_address.parent_id 
        AND sales_flat_order_address.address_type="shipping" 
GROUP BY
    sales_flat_order_address.region 
```

# apache-pig - 猪群中的简单 AVG？

> ID：15777076
> 
> 赞同：2
> 
> 时间：2013-04-03T00:54:44.673
> 
> 标签：apache-pig

我有一个非常简单的 2 列数据，带有一个 double 和一个 chararray：

```
user1 234.43
user1 432.23
user2 4321.213
etc. 
```

我想按用户分组，然后计算他们双打的平均值。如何？我需要“GROUP * ALL”吗？我正在尝试遵循示例 2 [http://wiki.apache.org/pig/PigOverview](http://wiki.apache.org/pig/PigOverview)，但它对我不起作用。

```
selfReportsAndDiscrepancies = FOREACH discrepancies1 GENERATE discrepancy,selfReportedText;
perDiscrepancy = GROUP selfReportsAndDiscrepancies BY selfReportedText;

allDiscrep = group perDiscrepancy all;

means = FOREACH allDiscrep GENERATE AVG(perDiscrepancy.discrepancy);

DUMP means;
DESCRIBE means; 
```

给我：

```
2013-04-02 17:54:06,611 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1128: Cannot find field discrepancy in group:chararray,selfReportsAndDiscrepancies:bag{:tuple(discrepancy:double,selfReportedText:chararray)} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:33:51.913

我希望我理解正确，你想要组平均值的平均值：

```
VISITS = LOAD 'data' USING PigStorage(' ')  AS (user:chararray, number:double);
USER_VISITS = GROUP VISITS BY user;
USER_AVG = FOREACH USER_VISITS GENERATE group AS user, AVG(VISITS.number) AS average;
ALL_AVG = GROUP USER_AVG ALL;
OVERALL_AVG = FOREACH ALL_AVG GENERATE AVG(USER_AVG.average);
DUMP OVERALL_AVG; 
```

结果是：

```
(2327.2715) 
```

# javascript - Javascript 编译器/压缩器 (Windows GUI)

> ID：15777077
> 
> 赞同：3
> 
> 时间：2013-04-03T00:54:48.170
> 
> 标签：javascript, windows, compiler-construction

我需要编译/压缩一个“不断增长的”javascript 应用程序（目前大约 40k LoC）。

我没有时间为我正在尝试做的事情集成“适当的”工具，比如**require.js**，因为它需要修改所述代码。

我原本打算手动将所有内容堆在一起以执行紧凑/编译例程，但在这一点上，我认为这将使其很难维护。（最终，我想将文件结构分解为当前的层次结构。）

话虽如此，我一直在使用名为[Winless](http://www.winless.org)的工具进行 .less 编译，我非常喜欢它的功能：

*   添加文件夹集
*   记下要包含的文件
*   注意这些文件中的更改并在发生这种情况时重新编译

我想知道 js 是否存在类似的工具？

[Closure Compiler](http://closure-compiler.appspot.com/home)做了一流的工作，我听说Uglifyjs[也](http://marijnhaverbeke.nl//uglifyjs)不错。我最终可能会使用 Closure 的 REST api 来手动管理文件集，但我想知道是否存在任何将过程抽象一点的东西 - 到一个**独立的 windows gui**中？

我已经四处寻找了几个星期，但还没有想出任何可靠的东西。

干杯 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:12:06.513

看看[http://gruntjs.com/](http://gruntjs.com/) - “JavaScript 任务运行器”。编写任务脚本变得非常容易，这将类似于

a) 运行 JSHint（用于发现代码中的错误）

b) 运行任何 QUnit 测试

c) 最后调用 Uglify.js 将你的源代码压缩成一个压缩的、可部署的文件（我在我的文件中包含了一个版本号以避免缓存问题）。

# android - 从 MyApplication 打开 SQLite DB - 无法以读/写模式打开

> ID：15777081
> 
> 赞同：0
> 
> 时间：2013-04-03T00:55:04.300
> 
> 标签：android, sqlite

我试图`DatabaseInterface`通过打开它`MyApplication extends Application`并基本上从不关闭它来改变我的实现（我做了一些研究，谷歌工程师推荐它，请参阅链接的问题[Best place to close database connection](https://stackoverflow.com/questions/6608498/best-place-to-close-database-connection)）。我所做的修改非常小，但现在系统在打开数据库时向我抛出以下错误：

```
E/SQLiteDatabase(15690): android.database.sqlite.SQLiteException: not an error (code 0): Could not open the database in read/write mode. 
```

这是相关代码

**我的应用程序.java**

```
@Override
public void onCreate() {
    super.onCreate();
    try {
        DatabaseInterface.open();
    } catch (SQLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

**数据库接口.java**

```
public class DatabaseInterface extends SQLiteOpenHelper {

    private final static String DB_PATH = Constants.DB_PATH;
    private final static String DB_NAME = Constants.DB_NAME;
    private static SQLiteDatabase mDatabase;
    private Context mContext;
    private static DatabaseInterface mInstance;

    private DatabaseInterface(Context context) {
        super(context, DB_NAME, null, 1);
        this.mContext = context;
    }

    public static DatabaseInterface getInstance(Context context) {
        if (mInstance == null) {
            mInstance = new DatabaseInterface(context);
        }
        return mInstance;
    }

    public static void open() throws SQLException, IOException {
        //Open the database
        String path = DB_PATH + DB_NAME;
        mDatabase = SQLiteDatabase.openOrCreateDatabase(new File(path), null);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:09:09.620

好的，这是因为我忘记添加

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

到我`AndroidManifest.xml`的，因为我的数据库驻留在手机的外部存储上。

# c# - 如何检索 .Net WinForms 图表控件中的选定范围？

> ID：15777087
> 
> 赞同：6
> 
> 时间：2013-04-03T00:56:19.910
> 
> 标签：c#, winforms, charts

我正在使用 C# 内置的 Winforms 图表控件 ( [System.Windows.Forms.DataVisualization.Charting.Chart](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.chart.aspx) )，它具有让用户选择范围的内置功能。我想做的是回读用户选择的范围。当然必须有一些简单的方法来做到这一点，但我一直无法找到它。

像这样启用光标：

```
var ca = chart1.ChartAreas["ChartArea1"].CursorX;
ca.CursorX.IsUserEnabled = true;
ca.CursorX.IsUserSelectionEnabled = true; 
```

我知道当用户通过启用选择范围时我可以使图表缩放`ca.AxisX.ScaleView.Zoomable`，但我不希望图片改变：相反，我使用图表作为显示信息并让用户选择范围的方式然后我对其进行一些额外处理的 X 值。

我尝试连接到 chart1.SelectionRangeChanged 并且每次更改范围时都会触发 - 我似乎无法从返回的 CursorEventArg 中获取选择范围。它有 " `NewSelectionStart`" 和 " `NewSelectionEnd`" 字段，但`NaN`令人失望的是这些字段。我尝试查看图表和坐标轴的各种属性，但没有发现任何听起来很有希望的东西。

进一步调查揭示了[ChartArea.CursorX.SelectionStart](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.cursor.selectionstart.aspx)属性，这听起来正是我所需要的......除了它也是 NaN 。我不知道这是正常的还是我遇到了某种错误？

那么，如何确定用户选择的范围？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T01:35:29.293

好吧，好吧，我想通了。这是独家新闻：

有一个 SelectionRangeChang* *ing* * 事件，当该事件运行时，`ChartArea.CursorX.SelectionStart`and`ChartArea.CursorX.SelectionEnd`字段中有正确的值。但是用户还没有释放鼠标按钮，所以你应该把它们存储起来。

当用户释放鼠标按钮时，将触发 SelectionRangeChang* *ed* * 事件。不知何故，它的设计方式是将 SelectionStart 和 SelectionEnd 重置为 NaN（就像事件参数中的`NewSelectionStart`and字段一样）。`NewSelectionEnd`您需要做的是使用从其他事件处理程序中分离出来的值，因为您知道使用它们的时机已经成熟。

所以你有它！希望这个答案可以避免其他人浪费时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-31T15:56:06.480

除了**redtuna**在 ac# 图表中设置光标：

我使用“SelectionRangeChanging ”而不是“SelectionRangeChang **ed** ”来解决 NaN 问题**对我有用：**

 **初始化表单时

```
this.chart1.SelectionRangeChanging += chart1_SelectionRangeChanging; 
```

和

```
 chart1.ChartAreas[0].CursorX.IsUserEnabled = false;         // red cursor at SelectionEnd
        chart1.ChartAreas[0].CursorX.IsUserSelectionEnabled = true;
        chart1.ChartAreas[0].AxisX.ScaleView.Zoomable = false;      // zoom into SelectedRange
        chart1.ChartAreas[0].AxisX.ScrollBar.IsPositionedInside = true;
        chart1.ChartAreas[0].CursorX.Interval = 0.01;               // set "resolution" of CursorX 
```

如果选择了范围/设置了光标，则执行什么

```
private void chart1_SelectionRangeChanging(object sender, CursorEventArgs e)
    {
        double x1 = x1 = e.NewSelectionStart; // or: chart1.ChartAreas[0].CursorX.SelectionStart;
        double x2 = e.NewSelectionEnd;        // or: x2 = chart1.ChartAreas[0].CursorX.SelectionEnd;

        double diffx1x2 = x2 - x1;
    } 
```

为了放大和缩小（x 轴），我刚刚添加了一个获取光标值的按钮。这样通过 mouseClick (ScaleView.Zoomable = false;) 进行缩放不会干扰我的光标定位:)

```
 private void button_ZoomIn(object sender, EventArgs e)
    {
        double x1 = chart1.ChartAreas[0].CursorX.SelectionStart;  // x1 = X1
        double x2 = chart1.ChartAreas[0].CursorX.SelectionEnd;    // x2 = X2

        if (x2 > x1)
        {
            // hard setting: chart1.ChartAreas[0].AxisX.Minimum = x1;
            // hard setting: chart1.ChartAreas[0].AxisX.Maximum = x2;
            chart1.ChartAreas[0].AxisX.ScaleView.Zoom(x1,x2); // dynamic approach with scrollbar
        }
        else
        {
            chart1.ChartAreas[0].AxisX.ScaleView.Zoom(x2,x1);
        }
    } 
```

缩小

```
private void button_ZoomOut(object sender, EventArgs e)
    {
        chart1.ChartAreas[0].AxisX.ScaleView.ZoomReset(0);
    } 
```

缩放也可以通过 mouseWheel 实现：[如何使用鼠标滚轮在 Microsoft 图表控件中启用缩放](https://stackoverflow.com/questions/13584061/how-to-enable-zooming-in-microsoft-chart-control-by-using-mouse-wheel) 如果您还想在图表中**进行右键单击**操作：[如何获得右键单击鼠标事件？将 EventArgs 更改为 MouseEventArgs 会导致 Form1Designer 出现错误？](https://stackoverflow.com/questions/19448346/how-to-get-a-right-click-mouse-event-changing-eventargs-to-mouseeventargs-cause)**

# android - 实施 HoloEverywhere 错误未找到资源标识符

> ID：15777095
> 
> 赞同：0
> 
> 时间：2013-04-03T00:58:08.607
> 
> 标签：android, android-holo-everywhere

构建项目时出现以下错误：

```
 [2013-04-03 03:52:49 - mydemoapp] D:\My Projects\HoloEverywhere
 Library\res\layout\time_picker_holo.xml:17: error: No resource identifier found for attribute 
'importantForAccessibility' in package 'android' 
```

我试图实施 HoloEverywhere 已经 2 天了，但我失败了。请问哪位高手可以帮忙？

我所做的是以下内容：

1）我将**HoloEverywhere 库**导入到 eclipse

2）我也将 contrib/ **ActionBarSherlock**导入到 eclipse 中

3）我还导入了由 Jake Wharton 创建的 ActionBarSherlock Library Called**库**（谢谢 Jake！）

在所有这些进口之后：

4) 我右键单击 HoloEverywhere Library>Properties>Android 并添加了 HoloEverywhere 压缩文件附带的导入的 contrib/ActionBarSherlock。然后，我去了 Java Build Path>Add>ActionBarSherlock （同一个导入的）

5）我右键单击ActionBarSherlock>Properties>Add（官方添加的**库**）并转到Android>checked(IsLibrary)

6）我右键单击库>属性>Android并检查**IsLibrary**

7）我还将**android-support-v4-r12.jar导入**到HoloEverywhere（我尝试创建/libs文件夹并将其放入其中，我还尝试右键单击Properties>Java Build Path>Libraries>Add Jars

现在，在创建名为 mydemoapp 的项目后，我看到了该错误：

```
 [2013-04-03 03:52:49 - mydemoapp] D:\My Projects\HoloEverywhere
 Library\res\layout\time_picker_holo.xml:17: error: No resource identifier found for attribute 
'importantForAccessibility' in package 'android' 
```

![在此处输入图像描述](https://i.stack.imgur.com/q5DAh.png)

![在此处输入图像描述](https://i.stack.imgur.com/m61Kd.png)

![在此处输入图像描述](https://i.stack.imgur.com/yyBjz.png)

![在此处输入图像描述](https://i.stack.imgur.com/ScNAa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:25:23.450

好的，听听那些面临同样问题的人...

首先摆脱**图书馆**。使Android (Properties) 中**HoloEverywhere 库**引用的**ActionBarSherlock**以及从 Java Build Path (Properties) 中导入。

 **然后右键单击您的项目属性>Android>添加 Holoeverywhere 库。不要导入它（不要去 JAVA BUILD PATH 并添加它）

在我的情况下，R.java 无法生成，因此请转到您的清单文件，更改任何内容并保存，然后将其恢复为默认状态并再次保存！

将生成一个 R.java，它会像魅力一样工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T06:38:12.523

我遇到了同样的问题。修复方法是检查 holoeverywhere 和项目的目标 android 版本，确保这两个匹配。**

# java - Eclipse Ant 构建脚本中的 Javah 命令

> ID：15777100
> 
> 赞同：0
> 
> 时间：2013-04-03T00:58:23.423
> 
> 标签：java, eclipse, ant, java-native-interface

我正在关注有关为 Mac OS X 创建 JNI 文件的教程。[该](http://solutions.weblite.ca/tutorials/jni_osx/)教程是为 NetBeans 编写的，但我正在尝试使用 Eclipse 来遵循它。不幸的是，这导致我被困在步骤 4.1.3，这是关于使用 ant 生成 .h 文件：

> 通过在结束标记前添加以下内容来修改 Netbeans 项目的 build.xml 文件：

```
<target name="-post-compile">
         <javah 
             destdir="./build" 
             force="yes" 
             class="ca.weblite.jniexample.NSSavePanel" 
             classpath="./build/classes"
         /> </target> 
```

首先，Eclipse 项目似乎默认不包含 build.xml 文件，所以我使用[这些说明](https://stackoverflow.com/a/4186557/531762)生成了一个。然后我添加了如上所示的命令。但是当我使用 ant 脚本构建时，.h 文件没有构建。不会生成与此相关的错误消息。

我相信原因是因为 Eclipse 项目没有示例中所示的“./build”文件夹，但我不知道该放什么。有人可以让我知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:08:29.457

首先，假设您的 Eclipse 项目文件夹结构是这样的：

```
src/ (source files)
bin/ (compiled class files) 
```

上述文件夹应在您的 Java 构建路径中配置（请参阅项目 > 属性）。您需要自己创建以下文件夹和文件（只需右键单击 > 新建...）。

```
build/ (build products)
build.xml  (build script) 
```

在每个`bin`和`src`文件夹中，您应该有一个子目录结构，例如：

```
ca
|--weblite
      |--jniexample 
```

src/ca/weblite/jniexample/NSSavePanel.java 应该有一个源文件。bin/ca/weblite/jniexample/NSSavePanel.class 应该有一个编译好的类文件。

您的 build.xml 文件应如下所示：

```
<project name="Build" default="-post-compile">
  <target name="-post-compile">
    <javah destdir="./build" force="yes" class="ca.weblite.jniexample.NSSavePanel" classpath="./bin" />
  </target>
</project> 
```

执行构建脚本后，您应该会在 build/ca_weblite_jniexampe_NSSavePanel.h 中看到一个文件。

# jquery - jQuery是否有可能通过statusCode？

> ID：15777107
> 
> 赞同：2
> 
> 时间：2013-04-03T00:58:56.030
> 
> 标签：jquery

谁能告诉我是否有可能使用 jquery statusCode 将一个状态代码切换到下一个状态代码，以便一个响应可以处理 2 个状态代码？下面的代码有一个错误，但它显示了我想要实现的目标...... 400 下降到 404。

```
    ,状态码：{
         200：功能（响应）{
            警报（'200'）；
        }
        ,201: 函数（响应）{
            警报（'201'）；
        }
        ,400:
        ,404：函数（响应）{
            警报（'400 或 404'）；
        }
    }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:03:39.163

您可以做的最好的事情是命名匿名函数并将对该函数的引用传递给`statusCode`对象：

```
var badRequestOrNotFound = function () {
    alert('400 or 404');
};

$.ajax({
    statusCode: {
        200: function (response) {
            alert('200');
        }
        ,201: function (response) {
            alert('201');
        }
        ,400: badRequestOrNotFound
        ,404: badRequestOrNotFound
    }
}); 
```

您也可以`statusCode`完全放弃该选项并利用回调传递的参数的`status`属性：`xhr``error`

```
$.ajax({
    error: function (xhr) {
        switch (xhr.status) {
            case 404:
            case 400:
                alert('400 or 404');
                break;
            case 200:
                alert('200');
                break;
            case 201:
                alert('201');
                break;
        }
    }
}); 
```

# iphone - 如何根据远程通知更改 ios 应用程序中的初始视图控制器？

> ID：15777108
> 
> 赞同：1
> 
> 时间：2013-04-03T00:59:02.550
> 
> 标签：iphone, cocoa-touch, uinavigationcontroller, apple-push-notifications

我有一个实现远程通知的应用程序。我的愿望是根据以下三个条件之一更改初始视图控制器：用户自己启动应用程序（无通知）；或者，用户收到可疑活动警报；或者，用户收到犯罪警报。我已经在 appDelegate 中实现了应用程序 didReceiveRemoteNotification: 方法。根据通知和用户对通知的响应，我实现了以下代码：

```
UITabBarController *tbContr = (UITabBarController*) self.window.rootViewController;
UINavigationController *navContr = [tbContr.viewControllers][2];
ViewCrimesController *viewCrimes = [navContr.storyboard instantiateViewControllerWithIdentifier:@"ViewCrimes"];
[navContr presentViewController:viewCrimes animated:YES completion:nil];

[self.window.makeKeyAndVisible]; 
```

我遇到的问题是导航控件——即后退按钮和导航栏标题；出现时不在 ViewCrimesController 上。我尝试以多种不同的方式加载 ViewCrimesController。每种方式我都得到错误，说没有segue（这个视图是地图视图的模型视图），或者我正在尝试加载活动视图，或者再次，我没有获得导航控件。

我是否需要专门对导航控件进行编程，或者我在尝试加载视图时遗漏了什么？

我在其他帖子中看到了对动态更改初始视图的引用。但我没有看到任何表明添加控件需要特定编程的东西。非常感谢您提供的任何帮助！

苏珊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:14:40.567

你看过帖子吗，[使用 Storyboards 以编程方式设置初始视图控制器](https://stackoverflow.com/questions/10428629/programatically-set-the-initial-view-controller-using-storyboards)

该帖子的答案可能会解决您的问题，

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

    UIViewController *viewController = // determine the initial view controller here and instantiate it with [storyboard instantiateViewControllerWithIdentifier:<storyboard id>];

   self.window.rootViewController = viewController;
   [self.window makeKeyAndVisible];

   return YES;
} 
```

您也可以[下载](http://dl.dropbox.com/u/58723521/SampleDetailView.zip)此示例，并根据您的要求实施它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T15:24:26.660

只需更改关键窗口的rootViewController，示例代码放在这里，希望对您有所帮助：

```
UIStoryboard *storyboard = self.window.rootViewController.storyboard;
    UIViewController *rootViewController = [storyboard instantiateViewControllerWithIdentifier:@"rootNavigationController"];
    self.window.rootViewController = rootViewController; 
```

# angularjs-directive - Angular UI select2 指令 - 以编程方式更新模型未反映在小部件上

> ID：15777109
> 
> 赞同：10
> 
> 时间：2013-04-03T00:59:04.060
> 
> 标签：angularjs-directive, jquery-select2, angular-ui

我正在尝试以编程方式更新 select2 模型并刷新视图，但它似乎不起作用。

这是一个来自 Angular UI 项目的示例 plunker：[http ://plnkr.co/edit/kQROgr?p=preview](http://plnkr.co/edit/kQROgr?p=preview)

[我尝试根据 select2 文档（ http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/) “对外部值更改做出反应”）添加 initSelection( )，但这没有用。我也尝试使用 select2 3.3.2，但也没有解决。

有两个问题： 1）单击“更新模型”，模型更新，但它没有为 select2 小部件添加标签。另外2）点击“Update-Model”，然后使用select2选择第二个标签，“Update-Model”添加的第一个标签消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T19:57:15.157

我知道这个问题有点老了，但是嘿......我找到了它但不知道答案。

我设法通过设置模型然后在 select2Options 配置上调用 initSelection() 来做我想做的事

所以我的配置是这样的：

```
$scope.select2Options = {
allowClear: true
minimumInputLength: 3
quietMillis: 1000
initSelection: ->
  $scope.property
query: (query)->
  Properties.query({q: query.term}, (response)->
    data = {results: processData(response['properties'])}
    query.callback(data)
    )

  processData = (data)->
    results = []
    angular.forEach(data, (item, index)->
      results.push(item)
      )
    return results 
```

}

然后我让我的模态返回新创建的对象，如下所示：

```
modalInstance.result.then((result)->
    $scope.property = result
    $scope.select2Options.initSelection()
  ) 
```

基本上，一旦它更新了模型，我就必须手动重新初始化 select2 小部件。我认为这可以通过 $scope.$watch 来处理，如果你真的想要的话，但这可能是一种浪费，除非你有从几个地方或其他地方更新的属性。

# c++ - 从具有固定长度记录的文件中读取

> ID：15777110
> 
> 赞同：0
> 
> 时间：2013-04-03T00:59:08.880
> 
> 标签：c++, file, fixed-length-record

假设您有一个包含以下内容的文件：

*   文件**头**包含：a) 第一个空记录号，b) 每条记录的大小，以及 c) 文件可以容纳的最大记录数。
*   **记录**包含：a) 指示记录是空闲还是占用的字节，b) 固定数量的字段。

当我想读取随机记录时，我使用这个函数：

```
int FixedLengthRecordFile :: read (int numRec, FixedLengthFieldsRecord & rec) 
```

问题是，为了让这个函数工作，我必须`FixedLengthFieldsRecord`事先创建一个，这意味着指定这个记录所具有的字段数......这不是我想要的。我希望文件处理程序足够“智能”以识别记录有多少个字段，并`FixedLengthFieldsRecord`在读取它时动态创建一个。

我怎样才能做到这一点？该函数必须返回一个，`int`因为我将它用作退出代码（错误/成功）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:19:01.813

潜在地，您可以定义 FixedLengthFieldsRecord 类，以便**该类本身强制执行正确的记录长度，但允许每个记录中的任意数量的字段**。实现此目的的一种可能的好方法是让 CONSTRUCTOR 从文件中读取下一条记录。

该类（减去一些必要的错误检查，您可以添加）可以以与以下类似的方式编写（该类假定您在创建此类的对象之前阅读了文件的第一行）：

```
using namespace std;
class FixedLengthFieldsRecord
{

    public:

        FixedLengthFieldsRecord(int const recordLength, istream & s); // Set the length of the record in the constructor
        bool IsEmpty() const;
        int FieldCount() const; // variable number of fields allowed; but LENGTH of record is enforced (see below)

        bool IsValidRecord(); // Does the record contain the correct number of bytes?
        string GetField(int const index) const; // This could throw an exception if the record is not valid

    protected:
        // Could have sophisticated functions here to replace fields, remove fields, reorder fields, etc.

    // This section contains the actual implementation.
    private:
        vector<string> fields; // The vector contains a VARIABLE number of fields
        bool is_empty;
        bool is_valid;
        int const record_length; // This contains the LENGTH of the record; it is set in the constructor and cannot be changed

    // The following variable and function store (and access) ALL the records
    static vector<FixedLengthFieldsRecord> records;
    static read(int numRec, FixedLengthFieldsRecord & rec);

}

FixedLengthFieldsRecord::FixedLengthFieldsRecord(int const recordLength_, istream & s)
    : record_length(recordLength)
{
    // pseudocode provided here
    // this functionality could be factored into other functions that are called by the constructor

    is_valid = true;

    is_empty = ReadFirstByte(s); // ReadFirstByte (not shown) reads first byte of current line and returns true if it indicates an empty record

    if (!is_empty)
    {
        string field;
        int currentRecordLength = 0;
        while (ReadNextField(s, field)) // ReadNextField() returns true if another field was read from the line (i.e., not end-of-line
        {
            currentRecordLength+= field.length();
        }
        if (currentRecordLength != record_length)
        {
            is_valid = false;
        }
        if (currentRecordLength > record_length)
        {
            break;
        }
        if (is_valid)
        {
            fields.push_back(field);
        }
    }
    if (is_valid)
    {
        records.push_back(*this); // not efficient, nor thread safe - deep copy occurs here
    }
}

bool FixedLengthFieldsRecord::IsEmpty()
{
    return is_empty();
}

bool FixedLengthFieldsRecord::IsValidRecord()
{
    return is_valid;
}

string FixedLengthFieldsRecord::GetField(int const index)
{
    if (!is_valid)
    {
        // throw an exception, or return an empty string
    }
    if (index < 0 || index >= fields.size())
    {
        // throw an exception, or return an empty string
    }
    return fields[index];
}

FixedLengthFieldsRecord::read(int numRec, FixedLengthFieldsRecord & rec)
{
    if (numRec < 0 || numRec >= records.size())
    {
        // throw an exception, or just return
    }
    rec = records[numRec];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:07:48.907

`FixedLengthRecordFile`应该打开文件（或者更好的是，在构造函数中取一个）`std::istream`，读取标题，然后`FixedLengthRecordFile::read(...)`成员函数可以使用`std::istream::seekg`并`std::istream::read`获取数据。

现在，到你的实际问题。为什么你希望`FixedLengthRecordFile::read`函数返回一段`int`时间，它通过引用获取记录？签名不会像

```
FixedLengthFieldsRecord FixedLengthRecordFile::read(size_t numRec, int& foo); 
```

更容易？

如果您坚持您的原始签名，请让`FixedLengthFieldsRecord`默认构造函数将对象初始化为无效状态（例如，添加一个`bool isValid`设置为 的标志`false`），并添加一个`setData(size_t length, const char* data)`成员函数，然后该函数可以调用该成员`FixedLengthRecordFile::read`函数。

# java - Project Euler 50 的错误答案

> ID：15777118
> 
> 赞同：1
> 
> 时间：2013-04-03T00:59:41.513
> 
> 标签：java, algorithm, numbers

我正在尝试 Euler 项目的第 50 题。

> 素数 41 可以写成六个连续素数之和：
> 
> 41 = 2 + 3 + 5 + 7 + 11 + 13 这是添加到小于 100 的素数的最长连续素数之和。与素数相加的一千以下的最长连续素数之和包含 21 项，等于 953。哪一个小于一百万的素数可以写为最多连续素数之和？

这是我的代码：

```
 public class consPrime
    {
        static int checker(int ar[],int num,int index) //returns no.of consecutive
        {                                              //primes for the given num  
            while(true)
        {

        int temp=num;

        for(int i=index;i>=0;i--)
        {
            temp=temp-ar[i];

            if(temp==0)
            {
                return (index-i+1);
            }               
        }           
        index--;
        if(index==0)
        return 0;           
        }
    }

    public static void main(String args[])
    {               
        int n=100000;
        int ar[]=new int[n];
        int total=0;int flag;

        for(int i=2;i<1000000;i++)   //Generates an array of primes below 1 million
        {
            flag=1;

            for(int j=2;j<=Math.sqrt(i);j++)
            {
                if(i%j==0)
                {
                    flag=0;
                    break;
                }                   
            }
            if(flag==1)
            {
                ar[total]=i;
                total++;
            }               
        }

        int m=0;
        int Big=0;

        for(int i=total;i>=0;i--) //Prints the current answer with no.of prime
        {
            m=checker(ar,ar[i],i-1);
            if(Big<=m)
            {Big=m;
                System.out.println(ar[i]+"     "+Big);
            }
        }           
    }       
} 
```

基本上，它只是创建一个包含最多 1000000 的所有素数的向量，然后循环遍历它们以找到正确的答案。答案是 997651，计数应该是 543，但我的程序分别输出 990707 和 75175。可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:16:40.237

几个大问题：

1.  首先是一些小问题：学习正确缩进代码，学习使用正确的命名约定。在 Java 中，变量名使用 camelCasing 而类型名使用 PascalCasing。

2.  你的逻辑中有很多问题：你循环遍历素数数组，直到你达到零或直到循环遍历数组中的所有数字。但是，请注意，整数存在下溢/上溢。有可能“温度”不断扣除并变成负数，然后变成正数，如此等等并达到零。然而这不是正确的答案

3.  您只尝试查找以索引 - 1 结尾的连续数字。例如，要检查索引 10 处的素数，您将从索引 9 向后查找连续素数。但是，与您的目标数相加的连续素数很少（实际上几乎从不，除了 5）包含“先前的”素数。整个逻辑是完全错误的。

4.  更不用说您为 checker 传递的参数不正确，用户 @pm-77-1 的评论中提到了这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T22:02:28.243

这是另一种需要**43 ms**的方法。

它基于以下方法：

1) 使用筛子生成 <= 1000000 的素数

**2) 它在O(n ² )**中迭代所有数字并计算连续素数。第一个循环更改序列的第一个元素，第二个循环从该位置开始获取元素并将它们添加到总和中。如果总和是素数并且它由最大数量的素数组成，则它被保存在一个变量中。

```
import java.util.ArrayList;
import java.util.List;

public class P50 {

    private final static int N = 1_000_000;

    public static void main(String[] args) {
        boolean primes[] = generatePrimes(N);
        List<Integer> primeIntegers = new ArrayList<Integer>();
        for (int i = 0; i < primes.length; i++) {
            if (primes[i]) {
                primeIntegers.add(i);
            }
        }
        int count = 0;
        int sum = 0;
        int finalSum = 0;
        int finalCount = 0;
        int totalPrimes = primeIntegers.size();
        for (int start = 0; start < totalPrimes; start++) {
            sum = 0;
            count = 0;
            for (int current = start; current < totalPrimes; current++) {
                int actual = primeIntegers.get(current);
                sum += actual;
                if ( sum >= N ) {
                    break;
                }
                if ( primes[sum] ) {
                    if ( count > finalCount ) {
                        finalCount = count;
                        finalSum = sum;
                    }
                }
                count++;
            }
        }
        System.out.println(finalSum);
    }

    private static boolean[] generatePrimes(int n) {
        boolean primes[] = new boolean[n];
        for (int i = 0; i < n; i++) {
            primes[i] = true;
        }
        primes[0] = false;
        primes[1] = false;
        // i = step
        for (int i = 2; i * i < n; i++) {
            if (primes[i]) {
                for (int j = i * i; j < n; j += i) {
                    primes[j] = false;
                }
            }
        }
        return primes;
    }

} 
```

# xcode - 从 xcode 编码迁移到 phonegap 编码

> ID：15777122
> 
> 赞同：0
> 
> 时间：2013-04-03T00:59:58.257
> 
> 标签：xcode, cordova, interface, migrate

我最初在 Xcode 中制作了一个应用程序，我完成了，但我想添加更多功能，但现在我想使用 PhoneGap 但重用我在第一个版本中拥有的界面，但这是直接在 Xcode 上制作的，现在我将使用 Dreamweaver ， 这可能吗？

# h2 - H2数据库加载csv数据更快

> ID：15777125
> 
> 赞同：6
> 
> 时间：2013-04-03T01:00:14.413
> 
> 标签：h2

我想从 CSV 格式的文件加载大约 200 万行到数据库并运行一些 SQL 语句进行分析，然后删除数据。文件大小为 2GB。数据是 Web 服务器日志消息。做了一些研究，发现 H2 内存数据库似乎更快，因为它将数据保存在内存中。当我尝试加载数据时，由于 32 位 java 而出现 OutOfMemory 错误消息。计划尝试使用 64 位 java。

我正在寻找所有优化选项来快速加载并运行 SQL。

测试.sql

```
CREATE TABLE temptable (
  f1 varchar(250) NOT NULL DEFAULT '',
  f2 varchar(250) NOT NULL DEFAULT '',
  f3 reponsetime NOT NULL DEFAULT ''
  ) as select * from CSVREAD('log.csv'); 
```

在 64 位 java 中这样运行：

```
java -Xms256m -Xmx4096m -cp h2*.jar org.h2.tools.RunScript -url 'jdbc:h2:mem:test;LOG=0;CACHE_SIZE=65536;LOCK_MODE=0;UNDO_LOG=0' -script  test.sql 
```

如果在 AIX 中可以使用任何其他数据库，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T04:46:21.373

如果 CSV 文件为 2 GB，那么在使用纯内存数据库时将需要超过 4 GB 的堆内存。确切的内存需求很大程度上取决于数据的冗余程度。如果相同的值一遍又一遍地出现，那么数据库将需要更少的内存，因为公共对象被重复使用（无论它是字符串、长整数、时间戳……）。

请注意`LOCK_MODE=0`，使用时不需要`UNDO_LOG=0`, 和。此外， 在使用前缀时没有帮助（但它对内存文件系统有帮助）。`LOG=0``create table as select``CACHE_SIZE``mem:`

我建议先尝试使用内存文件系统（`memFS:`而不是`mem:`），它比 略慢`mem:`，但通常需要更少的内存：

```
jdbc:h2:memFS:test;CACHE_SIZE=65536 
```

如果这还不够，请尝试压缩内存模式 ( `memLZF:`)，它再次变慢但使用更少的内存：

```
jdbc:h2:memLZF:test;CACHE_SIZE=65536 
```

如果这还不够，我建议尝试常规持久模式，看看它有多快：

```
jdbc:h2:~/data/test;CACHE_SIZE=65536 
```

# java - 为什么我不能在 JFrame 上调用 add() 而必须在 Container 上调用它？

> ID：15777126
> 
> 赞同：3
> 
> 时间：2013-04-03T01:00:17.380
> 
> 标签：java, swing, jframe

我正在阅读 Head First Java。在介绍 GUI 时（阅读本书的读者请参见第 354 页），作者写道：

```
frame.getContentPane().add(button); 
```

> “您不会*直接*将东西添加到框架中。将框架视为窗户周围的装饰，然后您将东西添加到*窗格*中。”

在查看[JFrame 的 Java API 条目](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)后，我看到 JFrame 是 Component 的子类，并且从 Component 继承了 add(Component)，因此可以简单地编写：

```
frame.add(button); 
```

为什么书中推荐使用frame.getContentPane.add(button)？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T01:02:08.833

您*可以*调用`add(...)`JFrame，但它实际上是`getContentPane().add(...)`根据 JFrame API 调用的，也称为“语法糖”。但是要明白，这样做实际上并不是将它直接添加到 JFrame，而是实际上将它添加到 contentPane。这一点很重要，因为 JFrame 是由组件组成的，正如[JFrame/顶级窗口 Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)很好地解释的那样。

我自己，我更喜欢文字`getContentPane().add(...)`，因为并非所有 JFrame 行为都会以这种方式工作，例如`setBackground(...)`，因此文字提醒我确切地在做什么。

# android - 字符串作为 TextView 中的链接

> ID：15777127
> 
> 赞同：-2
> 
> 时间：2013-04-03T01:00:37.447
> 
> 标签：android, string, android-layout, hyperlink, textview

```
public String getVisualFormInUI(){
    return "Name         :  "+ name +
    "\nRating        :  " + rating +  
    "\nPhone number : " + phoneNumber + 
    "\nAddress      : " + address + 
    "\nMobile Url   : " + mobileUrl ;
} 
```

它是我活动中文本视图的字符串值。是否可以仅将移动 url 表示为链接，而其他的则不可以？而且也没有创建其他 TextView 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:12:42.023

看到这个问题：[TextView 中的链接](https://stackoverflow.com/questions/4790746/links-in-textview)

或者：

```
textView.setText(Html.fromHtml(
        "<b>text3:</b>  Text with a " +
        "<a href=\"http://www.google.com\">link</a> " +
        "created in the Java source code using HTML."));
textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T01:13:54.047

让 Android 将您的 String 呈现为 HTML 内容，如下所示：

```
yourTextView.setText(Html.fromHtml(yourString)); 
```

然后，如果您围绕它包装一个超链接引用，您可以将 mobileUrl 显示为链接：

```
<a href='"+ mobileUrl +"'>"+ mobileUrl +"</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T01:19:12.547

如果您希望 URL 成为链接，您可以简单地在 XML 布局文件中使用您的[android:autoLink](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aautoLink)属性。`<TextView>`如果您想使用更具描述性的消息作为链接，您可以使用锚标记并`setMovementMethod()`按照@spatulamania 的回答中的说明进行调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-10T08:11:07.950

> 如果您遵循以下字符串表示方式，则无需提供 HTML 命令来链接 URL 和数字。

**--> 假设您在 strings.xml 文件夹中有字符串**

```
 <string name="string_name">Welcome to www.google.com .It is the worlds best online search engine.</string> 
```

**--> 现在在您的 xml 文件 TextView 小部件中添加以下属性。**

```
 <TextView
           android:layout_width="match_parent"
           android:layout_height="wrap_content"
           android:textSize="15dp"
           android:autoLink="all"
           android:textColor="@color/colorBlack"
           android:text="@string/string_name"
           android:id="@+id/id_string_name_textView" /> 
```

现在奇迹发生了……只需运行代码并查看自动允许链接 URL 和数字的更改。

如果您想提供描述性数据以链接字符串，请以编程方式将以下语句用于 TextView

```
string_name_textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

# android - Android - 如何防止片段失去焦点？

> ID：15777131
> 
> 赞同：8
> 
> 时间：2013-04-03T01:01:19.413
> 
> 标签：android

**简短版：** 如何防止片段失去焦点？

**长版：** 我正在使用片段事务在现有活动之上覆盖 3 个片段。

![覆盖片段](https://i.stack.imgur.com/n3vzZ.png)

在这里你可以看到它的样子。片段 C 是作为活动的一部分显示的原始片段。在某个事件之后，我提交了一个添加新片段的事务：

```
ContainerFragment containerFragment = new ContainerFragment();
FragmentA aFragment = new FragmentA();
FragmentB bFragment = new FragmentB();
bFragment.setListener(listener);

FragmentTransaction transaction = manager.beginTransaction();
transaction.add(R.id.c_fragment, containerFragment, TAG_CONTAINER);

// added within the layout used by containerFragment

transaction.add(R.id.a_fragment, aFragment, TAG_A);
transaction.add(R.id.b_fragment, bFragment, TAG_B);

transaction.addToBackStack(TRANSACTION_NAME);
transaction.commit(); 
```

注意：我没有使用单独的活动来启动片段 A 和 B，因为我不想暂停原始活动。

无论如何，这很好用。问题来自我使用 Dpad 的事实，我可以单击向下按钮，焦点离开 Fragment A 并选择 Fragment C 中的某些内容（Fragment B 不可聚焦）。如何防止焦点离开片段 A？

谢谢 ：）

# git - Git 合并行为异常，可能是由于意外合并/从过去恢复

> ID：15777132
> 
> 赞同：1
> 
> 时间：2013-04-03T01:01:26.403
> 
> 标签：git

几个月前，一个特性分支被意外地`featureA`合并到另一个特性分支中。`featureB`已完成还原，删除了由意外合并引起的文件。

昨天，`featureA`被合并到`master`. 为了保持`featureB`最新，我`master`每周都会合并到它中。今天，我正在`master`融入`featureB`其中，我注意到一些奇怪的事情。`featureB`几个月前意外合并的文件在合并时被自动删除或错误修改。

在将它们合并到今天时，似乎`featureA`从几个月前的意外合并中存在的文件状态优先。`featureB`

为什么会发生这种情况？可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:49:00.133

[我最近回答了一个关于恢复合并](https://stackoverflow.com/questions/15736564/why-after-merge-does-git-say-already-upto-date-but-differences-between-branch/)的类似问题。

此处无需赘述，其他答案非常详细。

总而言之，您已经合并了一个恢复提交，该提交否定了您所在的分支。您需要“还原还原”。Reverting 使用以“Reverting”开头的提交消息创建提交。找到该提交并`git revert <sha1>`在该提交上运行。这将解决您的问题。

# c++ - C++ 作用域变量重新排序和计时器

> ID：15777133
> 
> 赞同：4
> 
> 时间：2013-04-03T01:01:37.127
> 
> 标签：c++

我对 scoped_lock 的工作原理感到非常兴奋，并且想知道是否可以在特定的执行代码时间上执行类似的实现

如果说我实现了一个简单的类 scoped_timer，它在构造时启动一个计时器，在删除时它停止并报告经过的时间，那么这个示例代码是否会正确计时

```
func()
{
    //some code
    {
       scoped_timer a;
       //some code that does not include a
     }
     //some code
 } 
```

在实践中，我保证它`scoped_time a`是在开始时构建的，并在超出范围时准确地销毁。编译器是否可以决定以不完全在作用域末尾破坏它或在开头构造它的方式重新排序代码，因为不依赖于`object a`? C++ 标准有保证吗？

谢谢

丹尼尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T05:35:51.543

保证代码按照您的意愿运行。

这种保证在 C++ 中很重要，因为 C++ 不是[函数式编程语言](http://en.wikipedia.org/wiki/Functional_programming)，因为几乎 C++ 中的任何函数都可能有副作用（来自当前线程的执行流程，或者来自其他线程甚至其他进程） , 无论数据是否声明为`volatile`)。因此，语言规范保证了完整表达式的顺序。

为了将 C++11 标准拼凑起来，有许多子句必须一起考虑。

最重要的条款是§1.9：

> **§1.9**程序执行 [intro.execution]
> 
> 1 本国际标准中的语义描述定义了一个参数化的非确定性抽象机。本国际标准对一致性实现的结构没有要求。特别是，它们不需要复制或模仿抽象机器的结构。相反，需要符合要求的实现来模拟（仅）抽象机的可观察行为，如下所述。* (<-- 脚注在标准本身)
> 
> * 该规定有时被称为“好像”规则，因为只要从可观察到的结果可以确定，只要结果就好像该要求已被遵守，实施就可以自由地无视本国际标准的任何要求程序的行为。例如，如果一个实际的实现**可以推断出它的值没有被使用并且没有产生影响程序可观察行为的副作用，则它**不需要评估表达式的一部分。

（文本的粗体是我的。）

本条款提出了与该问题相关的两个重要要求。

1.  如果一个表达式可能有副作用，它将被评估。在您的情况下，表达式`scoped_timer a;`可能有副作用，因此将对其进行评估。

2.  “ *...符合要求的实现需要模拟（仅）抽象机的可观察行为，如下所述。* ”，其中“以下”包括同一部分的第 13 和 14 条：

> **§1.9.13**之前排序是由单个线程 (1.10) 执行的评估之间的不对称、传递、成对关系，这会在这些评估之间产生偏序。给定任意两个评估 A 和 B，如果 A 在 B 之前排序，则 A 的执行将在 B 的执行之前。如果 A 没有在 B 之前排序并且 B 没有在 A 之前排序，那么 A 和 B 是无序的。[注意：未排序评估的执行可以重叠。—尾注] 当 A 在 B 之前排序或 B 在 A 之前排序时，评估 A 和 B 的排序不确定，但未指定哪个。[注意：不确定顺序的评估不能重叠，但可以先执行。——尾注]
> 
> **§1.9.14**与完整表达式关联的每个值计算和副作用在与要评估的下一个完整表达式关联的每个值计算和副作用之前排序。* (<-- 这里的脚注不相关)

因此，您的表达式`scoped_timer a;`（这是一个完整的表达式）可能会产生副作用并将被评估；因此， 的值的计算`a`将在块中的以下任何语句之前进行排序。

关于对象的销毁`a`，这更简单。

> **§3.7.3.3**如果具有自动存储持续时间的变量具有初始化或具有副作用的析构函数，则不应在其块结束之前将其销毁，即使看起来未使用也不应作为优化消除，除非可以按照 12.8 中的规定消除类对象或其复制/移动。

这清楚地表明在块退出之前不会调用析构函数。

**附录**并确认所有块级变量在块范围的末尾*被销毁（并调用它们的析构函数），这里是 C++11 标准：*

> **§3.7.3.1**显式声明的块范围变量 register 或未显式声明的 static 或 extern 具有自动存储持续时间。这些实体的存储一直持续到创建它们的块退出。
> 
> **§3.7.3.2** [注意：这些变量如 6.7 所述被初始化和销毁​​。——尾注]

...以及上述§6.7：

> **§6.7.2**具有自动存储持续时间（3.7.3）的变量在每次执行其声明语句时都会被初始化。在块中声明的具有自动存储持续时间的变量在退出块时被销毁（6.6）。

该块在此处定义为一对花括号之间的所有代码`{}`：

> **§6.3.1**为了可以在需要一个的地方使用多个语句，提供了复合语句（也等效地称为“块”）。
> 
> ```
> compound-statement:
> 
>     { statement-seq }
> 
> statement-seq:
> 
>     statement
> 
>     statement-seq statement 
> ```
> 
> 复合语句定义块作用域 (3.3)。

注意：`compount-statement`(etc) 部分需要一段时间才能习惯，但重要的一点是，这里的开花括号`{`和闭花括号`}`实际上是指代码中的字面开花括号和闭花括号。这正是 C++11 标准`block`中将作用域定义为花括号之间的语句序列的确切位置。

将各个部分放在一起：因为上面引用的标准是这样说`The storage for these entities lasts until the block in which they are created exits`的，所以`Variables with automatic storage duration declared in the block are destroyed on exit from the block`您可以放心，`a`您的问题中的对象（以及任何块级对象）将持续到块结束，并且将被销毁并拥有它的块退出时调用的析构函数。

# extjs - ext js 同一个网格的多个实例

> ID：15777134
> 
> 赞同：0
> 
> 时间：2013-04-03T01:01:37.687
> 
> 标签：extjs, model, grid, store

我遇到了一个 ext js 网格的多个实例都显示相同数据的问题。我正在使用 Ext js 4.1.1。

我有一个主标签面板。在该面板中，有多个人员选项卡。每个人选项卡内都有一个详细信息选项卡和一个家庭选项卡。

详细信息选项卡是一个带有文本框、组合框等的简单表单。家庭选项卡具有数据视图和网格。

如果一次只打开一个人选项卡，则一切正常。一旦打开第二个人，家庭选项卡看起来相同（数据视图和网格）。在我看来，这个问题与模型有关。也许他们共享模型的同一个实例，这导致一次刷新就改变了所有数据。数据视图和网格都有相同的问题，但我认为如果我可以解决网格的问题，那么我可以应用相同的逻辑来修复数据视图。除非它变得相关，否则我将把数据视图的代码排除在这个问题之外。

PersonTab.js

```
Ext.require('Client.view.MainTab.PersonDetailsForm');
Ext.require('Client.view.MainTab.PersonFamilyForm');
Ext.require('Client.view.MainTab.EventForm');

Ext.define('Client.view.MainTab.PersonTab',
{
    extend: 'Ext.tab.Panel',
    waitMsgTarget: true,
    alias: 'widget.MainTabPersonTab',
    layout: 'fit',
    activeTab: 0,
    tabPosition: 'bottom',
    items:
        [
            {
                title: 'Details',
                closable: false,
                xtype: 'MainTabPersonDetailsForm'
            },
            {
                title: 'Family',
                closable: false,
                xtype: 'MainTabPersonFamilyForm'
            },
            {
                title: 'page 3',
                closable: false,
                xtype: 'MainTabEventForm'
            }
        ]
}); 
```

MainTabPersonFamilyForm.js

```
Ext.require('Client.view.MainTab.PersonFamilyHeadOfHouseholdDataView');
Ext.require('Client.view.MainTab.PersonFamilyGrid');

Ext.define('Client.view.MainTab.PersonFamilyForm',
{
    extend: 'Ext.form.Panel',
    alias: 'widget.MainTabPersonFamilyForm',
    waitMsgTarget: true,
    padding: '5 0 0 0',
    autoScroll: true,
    items:
        [
            {
                xtype: 'displayfield',
                name: 'HeadOfHouseholdLabel',
                value: 'The head of my household is:'
            },
            {
                xtype: 'MainTabPersonFamilyHeadOfHouseholdDataView'
            },
            {
                xtype: 'checkboxfield',
                boxLabel: "Use my Head of Household's address as my address",
                boxLabelAlign: 'after',
                inputValue: true,
                name: 'UseHeadOfHouseholdAddress',
                allowBlank: true,
                padding: '0 20 5 0'
            },
            {
                xtype: 'MainTabPersonFamilyGrid'
            }
        ],
    config:
        {
            idPerson: ''
        }
}); 
```

MainTabPersonFamilyGrid.js

```
Ext.require('Client.store.PersonFamilyGrid');
Ext.require('Ext.ux.CheckColumn');

Ext.define('Client.view.MainTab.PersonFamilyGrid',
{
    extend: 'Ext.grid.Panel',
    alias: 'widget.MainTabPersonFamilyGrid',
    waitMsgTarget: true,
    padding: '5 0 0 0',
    xtype: 'grid',
    title: 'My Family Members',
    store: Ext.create('Client.store.PersonFamilyGrid'),
    plugins: Ext.create('Ext.grid.plugin.CellEditing'),
    viewConfig:
        {
            plugins:
                {
                    ptype: 'gridviewdragdrop',
                    dragGroup: 'PersonFamilyGridTrash'
                }
        },
    columns:
        [
            { text: 'Name', dataIndex: 'Name'},
            { text: 'Relationship', dataIndex: 'Relationship', editor: { xtype: 'combobox', allowblank: true, displayField: 'display', valueField: 'value', editable: false, store: Ext.create('Client.store.Gender') }},
            { xtype: 'checkcolumn', text: 'Is My Guardian', dataIndex: 'IsMyGuardian', editor: { xtype: 'checkboxfield', allowBlank: true, inputValue: true }},
            { xtype: 'checkcolumn', text: 'I Am Guardian', dataIndex: 'IAmGuardian', editor: { xtype: 'checkboxfield', allowBlank: true, inputValue: true } }
        ],
    height: 200,
    width: 400,
    buttons:
        [
            {
                xtype: 'button',
                cls: 'trash-btn',
                iconCls: 'trash-icon-large',
                width: 64,
                height: 64,
                action: 'trash'
            }
        ]
}); 
```

PersonFamilyGrid.js（商店）

```
Ext.require('Client.model.PersonFamilyGrid');

Ext.define('Client.store.PersonFamilyGrid',
{
    extend: 'Ext.data.Store',
    autoLoad: false,
    model: 'Client.model.PersonFamilyGrid',
    proxy:
        {
            type: 'ajax',
            url: '/Person/GetFamily',
            reader:
                {
                    type: 'json'
                }
        }
}); 
```

PersonFamilyGrid.js（模型）

```
Ext.define('Client.model.PersonFamilyGrid',
{
    extend: 'Ext.data.Model',
    fields:
        [
            'idFamily',
            'idPerson',
            'idFamilyMember',
            'Name',
            'Relationship',
            'IsMyGuardian',
            'IAmGuardian'
        ]
}); 
```

来自控制器的相关代码：

```
....
....
var personTab = thisController.getMainTabPanel().add({
     xtype: 'MainTabPersonTab',
     title: dropData.data['Title'],
     closable: true,
     layout: 'fit',
     tabpanelid: dropData.data['ID'],
     tabpaneltype: dropData.data['Type']
});

personTab.items.items[0].idPerson = dropData.data['ID'];
personTab.items.items[1].idPerson = dropData.data['ID'];

thisController.getMainTabPanel().setActiveTab(personTab);
....
.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T23:53:46.110

您将 设置`store`为网格原型上的属性并在类定义时创建一次。这意味着从该类实例化的所有网格都将共享完全相同的存储。

请注意，您还创建了一个`cellediting`插件，该插件也将与该网格的所有实例共享。那肯定行不通。您可能只能在实例化的第一个或最后一个网格中进行编辑。

通常，您不应该在类原型上设置 、 或 之类`store`的属性`plugins`。相反，您应该在该方法中覆盖并设置它们，以便网格的每个实例化都获得这些属性的唯一副本。`viewConfig``columns``initComponent`

```
Ext.define('Client.view.MainTab.PersonFamilyGrid', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.MainTabPersonFamilyGrid',
    waitMsgTarget: true,
    padding: '5 0 0 0',
    title: 'My Family Members',
    height: 200,
    width: 400

    initComponent: function() {
        Ext.apply(this, {
            // Each grid will create its own store now when it is initialized.
            store: Ext.create('Client.store.PersonFamilyGrid'),
            // you may need to add the plugin in the config for this
            // grid
            plugins: Ext.create('Ext.grid.plugin.CellEditing'),
            viewConfig: {
                plugins: {
                    ptype: 'gridviewdragdrop',
                    dragGroup: 'PersonFamilyGridTrash'
                }
            },
            columns: /* ... */
        });

        this.callParent(arguments);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:30:29.420

很难准确判断，但从您提交的代码看来，您没有`id`在选项卡和商店​​上设置参数，这会导致 DOM 冲突，因为 DOM`id`用于使组件全局唯一。过去，当子类化组件（例如选项卡和商店​​）并使用这些类的多个实例时，这让我感到悲痛。

尝试给每个人一个唯一的标识符（例如人员 ID），然后使用该 ID 引用它们：

```
var personTab = thisController.getMainTabPanel().add({
    id: 'cmp-person-id',
    xtype: 'MainTabPersonTab',
    ...

store: Ext.create('Client.store.PersonFamilyGrid',
{
    id: 'store-person-id',
    ...
});

Ext.getCmp('cmp-person-id');

Ext.StoreManager.lookup('store-person-id'); 
```

希望有帮助。

# iphone - Facebook 访问令牌 - 强制测试过期

> ID：15777135
> 
> 赞同：2
> 
> 时间：2013-04-03T01:01:43.217
> 
> 标签：iphone, ios, facebook, oauth, access-token

是否可以在新的 3.2 Facebook SDK 中强制 Facebook 访问令牌过期？我需要在我的 iOS 应用程序中测试身份验证逻辑。

我知道过去有人问过这个问题..但我找到的所有答案都不相关..因为 Facebook 不断更改他们的 API。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:57:44.983

强制应用访问令牌过期的一种简单方法是撤销该应用在用户帐户中的权限（从您的 FB 帐户设置中删除该应用）。该令牌立即失效。请注意，在重新授权应用程序后，您很可能会取回相同的令牌，只是这一次它将是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:02:20.480

Jai 的回答是一种很好的方法，这是一种清除会话的程序化方式。

试试这行代码：

```
[FBSession.activeSession closeAndClearTokenInformation]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T22:00:40.533

在 Facebook 上更改用户密码也会使令牌失效。但是，我看到了一些极端情况，其中不同的身份验证错误的行为略有不同。如果有人知道强制使令牌过期的方法，那将很有帮助。

# ruby - 在 Ruby 中迭代哈希的问题

> ID：15777139
> 
> 赞同：0
> 
> 时间：2013-04-03T01:02:11.027
> 
> 标签：ruby, recursion, hash

我想做的是传入一个看起来像这样的哈希值：

```
input = {
    "configVersion" => "someVers",
    "box" => 
    {
        "primary"  => {
            "ip" => "192.168.1.1", 
            "host" => "something"
            },
        "api" => {
            "live" => "livekey", 
            "test" => "testkey"
            }
    }
} 
```

然后迭代它，如果该值是另一个散列，则继续，并用它生成输出。结果应该是这样的：

```
configVersion = "someVers"
box.primary.ip = "192.168.1.1"
box.primary.host = "something" 
```

等等...

如果值是散列，我知道如何爬行并继续，但我不确定如何将整个事物连接在一起并将值传递回去。这是我的代码：

```
def crawl(input)
  input.each do |k,v|
    case v
    when Hash
      out < "#{k}."
      crawl(v)
    else
      out < " = '#{v}';"
    end
  end
end 
```

我的问题是：在哪里定义`out`以及如何将其全部返回。我对Ruby很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:30:55.027

您可以在递归方法的多个调用之间传递字符串，并像使用累加器一样使用它们。

此方法使用一个`ancestors`字符串来构建您的点表示法字符串，以及一个`str`收集输出并在方法结束时返回它的输出。`str`每次调用都会传递；该`chain`变量是`ancestor`字符串的修改版本，从调用到调用会发生变化：

```
def hash_to_string(hash, ancestors = "", str = "")
  hash.each do |key, value|
    chain = ancestors.empty? ? key : "#{ancestors}.#{key}"
    if value.is_a? Hash
      hash_to_string(value, chain, str)
    else
      str << "#{chain} = \"#{value}\"\n"
    end
  end
  str
end

hash_to_string input 
```

（这假设您希望您的输出是如上所示格式化的字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:17:09.607

这篇[博客文章](http://www.goodercode.com/wp/convert-your-hash-keys-to-object-properties-in-ruby/)`method_missing`为递归提供了一个不错的解决方案，并使用Ruby 中可用的方法提供了一个更好的替代方案。

一般来说，您的递归是正确的，您只想做一些不同的事情，而不是将输出连接到`out`.

# php - ZF2中同一模块下的多个命名空间

> ID：15777140
> 
> 赞同：5
> 
> 时间：2013-04-03T01:02:17.577
> 
> 标签：php, module, namespaces, zend-framework2

我在同一模块下配置多个命名空间/类时遇到问题。例如，我有一个名为“Account”的模块，我想在其中包含所有与帐户相关的类（公司：'accounts'，用户：'users'，外部 api：'api' 等）。模块结构看起来像这样..

```
 /Account
        - Module.php
        - /config
        - /view
        - /src
          - /Account
            - /Controller (AccountController.php)
            - /Form       (AccountForm.php)
            - /Model      (Account.php + AccountTable.php)
          - /User
            - /Controller (UserController.php)
            - /Form       (UserForm.php)
            - /Model      (User.php + UserTable.php)
          - /Api
            - Api.php     (simple class) 
```

作为 ZF2 的新手，我决定让事情变得简单而愚蠢，而不是尝试实现到 Account 模块的复杂路由。因此，为了触发 UserController 的 indexAction，url 应该是 /user (!)

这是模块类：

```
namespace Account;

use Account\Model\AccountTable;
use Account\Model\UserTable;

class Module
{
    public function getAutoloaderConfig()
    {
        return array(
                            'Zend\Loader\ClassMapAutoloader' => array(
                                                                                        __DIR__ . '/autoload_classmap.php',
                                                                                  ),
                            'Zend\Loader\StandardAutoloader' => array(
                                                                                        'namespaces' => array(
                                                                                                                        __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                                                                                                                    ),
                                                                               ),
        );
    }

    public function getServiceConfig()
    {
        return array(
                            'factories' => array(
                                                            'Account\Model\AccountTable'  =>  function($sm) {
                                                                                                                                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                                                                                                                                $table = new AccountTable($dbAdapter);
                                                                                                                                return $table;
                                                                                                                            },
                                                            'Account\Model\UserTable'           =>  function($sm) {
                                                                                                                                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                                                                                                                                $table = new UserTable($dbAdapter);
                                                                                                                                return $table;
                                                                                                                            },                                                              
                                                      ),
        );
    }    

    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }
} 
```

和 module.config 文件

```
return array(
    'controllers' => array(
        'invokables' => array(
            'Account\Controller\Account'    => 'Account\Controller\AccountController',
            'Account\Controller\User'           => 'Account\Controller\UserController',
        ),
    ),

    'router' => array(
        'routes' => array(
            'account' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'      => '/account[/:action[/:accountId]]',
                    'constraints' => array(
                                                    'action'         => '[a-zA-Z][a-zA-Z0-9_-]*',
                                                    'accountId'      => '[0-9]+',
                                                ),
                    'defaults' => array(
                        'controller' => 'Account\Controller\Account',
                        'action'     => 'index',
                    ),
                ),
/*
                'may_terminate' => true,
                'child_routes' => array(
                      'user' => array(
                            'type' => 'literal',
                            'options' => array(
                                'route' => '/user[/:action[/:userId]]',
                                'constraints' => array(
                                                    'action'         => '[a-zA-Z][a-zA-Z0-9_-]*',
                                                    'userId'         => '[0-9]+',
                                                ),
                                'defaults' => array(
                                        'controller' => 'Account\Controller\User',
                                        'action'     => 'index'
                                )
                        )
                    )
                ),
*/
            ),
            'user' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'      => '/user[/:action[/:userId]]',
                    'constraints' => array(
                                                    'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                                                    'userId'     => '[0-9]+',
                                                ),
                    'defaults' => array(
                        'controller' => 'Account\Controller\User',
                        'action'     => 'index',
                    ),
                ),
             )

        ),
    ),

    'view_manager' => array(
        'template_path_stack' => array(
            'account' => __DIR__ . '/../view',
            'user'    => __DIR__ . '/../view',

        ),
    ),
); 
```

但我得到的错误是“找不到类'Account\Controller\UserController'”。我确定我错过了一些东西。请问有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T05:23:03.610

您必须`StandardAutoloader`告知您的新命名空间：

```
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\ClassMapAutoloader' => array(
            __DIR__ . '/autoload_classmap.php',
        ),
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                // This is for the Account namespace
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                // And this is for the User namespace
                'User'        => __DIR__ . '/src/' . 'User',
            ),
        ),
    );
} 
```

在 module.config.php

```
return array(
    'controllers' => array(
        'invokables' => array(
            'Account\Controller\Account' => 'Account\Controller\AccountController',
            // The key can be what ever you want, but the value must be a valid
            // class name. Your UserController lives in the User namespace,
            // not in Account
            'Account\Controller\User'    => 'User\Controller\UserController',
        ),
    ),
    /* ... */
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:41:45.017

StandardLoader 需要知道在哪里可以找到类。您可以使用名为**namespaces**的选项来定义它，该选项是一个包含绝对（或相对于当前脚本）路径的数组。它应该如下所示：

```
'Zend\Loader\StandardAutoloader' => array(
    'namespaces' => array(
        __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__
    ) 
) 
```

__NAMESPACE__ 是模块的名称，而 __DIR__ 是 Module.php 脚本的绝对路径

检查[http://framework.zend.com/manual/2.0/en/modules/zend.loader.standard-autoloader.html](http://framework.zend.com/manual/2.0/en/modules/zend.loader.standard-autoloader.html)

ClassMapAutoloader 用于性能：您定义类键及其文件的确切路径，而不是 zf2 必须浏览其内容以执行文件系统操作的文件夹（StandardLoader 的方式）。

检查[http://framework.zend.com/manual/2.0/en/modules/zend.loader.class-map-autoloader.html](http://framework.zend.com/manual/2.0/en/modules/zend.loader.class-map-autoloader.html)

# c# - 获取和设置如何影响变量的分配？

> ID：15777141
> 
> 赞同：1
> 
> 时间：2013-04-03T01:02:20.643
> 
> 标签：c#, visual-studio-2010, compiler-warnings, getter-setter

C# 作业问题：我们在`getting`和中进行练习，`setting`并以非常复杂的方式访问变量。

我有一个`if...then`循环生成的用户消息：

```
if (condition a)
{String userMessage = "foo";}
else if (condition b)
{String userMessage = "bar";}
...etc. 
```

我正在使用 a`getter`来访问`userMessage`变量...

```
public String Result
{
  get { return userMessage; }
} 
```

...然后将消息输出到控制台。

```
Console.WriteLine(thegame.Result); 
```

`String userMessage =....`我从 Visual Studio 2010 收到一条信息性消息，在我为,分配值的四行中`Warning 5 The variable 'userMessage' is assigned but its value is never used`。

收到这条消息是因为我访问变量的迂回方式吗？还是更大问题的症状？`userMessage`所有对在线消息的引用都是在声明一个从未使用过的变量的上下文中......但在这种情况下我使用的是该变量。是什么导致了错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:06:48.847

您在条件范围内声明变量：

```
string userMessage; // class scope

...

if (condition) {
     String userMessage = "blah"; // only available until the closing brace
} // out of scope here 
```

这就是警告。您正在创建一个仅限于一行的变量.. 但从不使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T01:08:29.063

```
if (condition a)
{userMessage = "foo";}
else if (condition b)
{userMessage = "bar";}
...etc. 
```

这是因为您在每种情况下都定义了不同的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T01:06:46.993

这是因为您正在定义一个在块中调用的*新*变量。将修饰符从块中取出，你应该没问题。`userMessage``if``String``if`

# mysql - 为什么我们应该在用户表中有一个 ID 列？

> ID：15777142
> 
> 赞同：15
> 
> 时间：2013-04-03T01:02:20.893
> 
> 标签：mysql, database

很明显，我们已经有了每个用户的另一个唯一信息，那就是用户名。那么，为什么我们需要为每个用户提供另一个独特的东西呢？为什么我们还应该为每个用户创建一个 id？如果我们省略 id 列会发生什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-03T01:24:23.673

即使您的用户名是唯一的，使用额外的 id 列而不是使用 varchar 作为主键也没有什么好处。

*   有些人更喜欢使用整数列作为主键，作为永远不需要更改的代理键，即使其他列可能会发生变化。尽管自然主键也无法更改，但您必须使用级联外键约束来确保相关表中的外键与任何此类更改同步更新。

*   主键是 32 位整数而不是 varchar 可以节省空间。在引用您的用户表的所有其他表中选择 int 或 varchar 外键列可能是一个很好的理由。

*   如果将新行添加到索引的末尾，与将它们楔入索引中间相比，插入到主键索引的效率会更高一些。MySQL 表中的索引通常是 B+Tree 数据结构，您可以研究这些以了解它们的性能。

*   一些应用程序框架更喜欢这样的约定，即数据库中的每个表都有一个名为 的主键列`id`，而不是使用自然键或复合键。遵循这样的约定可以使某些编程任务更简单。

这些问题都不是交易破坏者。使用自然键也有好处：

*   如果按用户名查找行比按 id 搜索更多，最好选择用户名作为主键，并利用 InnoDB 的索引组织存储。如果可能的话，让你的主查找列成为主键，因为主键查找在 InnoDB 中更有效（你应该在 MySQL 中使用 InnoDB）。

*   正如您所注意到的，如果您已经对用户名有一个唯一约束，那么保留一个您不需要的额外 id 列似乎是一种存储浪费。

*   使用自然键意味着外键包含人类可读的值，而不是任意整数 id。这允许查询使用外键值，而不必连接回父表以获得“真实”值。

关键是没有涵盖 100% 案例的规则。我经常建议你应该保持你的选择开放，即使在单个数据库中也可以使用自然键、复合键和代理键。

我在我的书[SQL Antipatterns: Avoiding the Pitfalls of Database Programming 的](http://pragprog.com/book/bksqla/sql-antipatterns)“需要 ID”一章中介绍了代理键的一些问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T01:13:41.213

此标识符称为[代理键](http://en.wikipedia.org/wiki/Surrogate_key)。我链接的页面列出了优点和缺点。

在实践中，我发现它们是有利的，因为即使是超级键数据也会随着时间而改变（即用户的电子邮件地址可能会改变，因此任何对应关系都*必须*改变），但是代理键永远不需要改变它所识别的数据，因为它的value 对关系没有意义。

从一个`JOIN`角度来看，它也很好，因为它可以是一个具有比 varchar 更小的密钥长度的整数。

我可以说在实践中我更喜欢使用它们。由于开发过程中需求的变化，我被多次使用跨表使用的多列主键或数据表示超键不得不变得非唯一，这不是你想要处理的情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T01:06:50.977

在我看来，每个表都应该有一个唯一的、自动递增的 id。

以下是一些实际原因。如果您有重复的行，您可以轻松确定要删除的行。如果您想知道插入行的顺序，您可以在 id 中找到该信息。至于用户，世界上不止《约翰·史密斯》。id 为外部引用提供了一个键。

最后，几乎任何可以描述用户的东西——姓名、地址、电话号码、电子邮件地址——都可能随着时间而改变。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-03T01:08:01.890

我有 mysql。

```
 1:Index fields 2:Unique fields and 3:PK fields.
index means pointable
unique means in a table must be one in all rows.
PK = index + unique 
```

在一个表中，您可能有许多独特的字段，例如
用户名或护照代码或电子邮件。
但你需要一个像 ID 这样的字段。这既是唯一的又是索引（=PK）。第一个总是一回事，永远不会改变，第二个是唯一的，第三个很简单（因为通常是数字）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-03T01:06:41.270

使用数字 id 的一个原因是在其上创建索引比在文本字段上更精简，从而减少了查找特定用户所需的索引大小和处理时间。此外，当交叉引用不同表中的用户（关系数据库）时，节省的字节数也更少。

# security - 我可以公开哈希盐 + 密码吗？

> ID：15777143
> 
> 赞同：7
> 
> 时间：2013-04-03T01:02:21.293
> 
> 标签：security, hash, passwords, public, salt

我在盐 + 密码上使用 SHA-512 哈希 1000 次。在查询有关用户的信息时返回它是否安全，或者我应该保护它并使其仅通过 HTTPS 可用？

例如，如果我提出以下请求：

```
GET: http://domain.com/users?id=437 
```

它返回：

```
{"firstName":"Eliot","lastName":"My last name","email":"email@emailplace.com","password":[91,49,-34,77,79,-48,67,-62,-12,84,84,-18,-81,23,-92,-31,74,-28,-80,102,60,35,-102,115,18,-76,20,-90,-8,91,13,23],"authToken":"33c977b1-5ab6-4a8a-8da9-68c8028eff92","id":179} 
```

公之于众有什么关系吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T01:05:19.230

为什么您会**返回**用户密码以响应任何面向公众的查询？以何种形式返回密码并不重要——这根本上是不安全的！

密码可以被破解。给定一个散列和如何构造散列的知识，您可以暴力破解相关参数。即使它需要 1000 倍的时间，并且盐可能必须被暴力破解（如果不包含在查询响应中），但这种可能性仍然存在（如果价值很高，有足够耐心、拥有正确资源的人可能会这样做足够）。不要冒险——只是不要以任何形式泄露密码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T01:05:34.220

您不应公开任何不必要的信息。让它只能通过 HTTPS 使用什么都不做——我可以通过 HTTPS 访问 URL，而他们的密码哈希仍然暴露在外。

忘记密码，您还会暴露用户的电子邮件地址。锁定这个 API 是什么。

# knockout.js - 淘汰赛foreach服务器端

> ID：15777146
> 
> 赞同：0
> 
> 时间：2013-04-03T01:02:39.317
> 
> 标签：knockout.js

当我已经为每个元素提供服务器端时，如何为每个客户端提供客户端？

两者都做后有双倍的元素。

这是一个使用旧版本淘汰的修复程序，方法是创建一个绑定处理程序，该处理程序删除 init 上的子元素。任何人都可以使用淘汰赛 2.1 来解决这个问题吗？

[http://jsfiddle.net/4f9N2/4/](http://jsfiddle.net/4f9N2/4/)

```
var viewModel = {
    countries : [
        { name: 'UK' },
        { name: 'France' },
        { name: 'USA' }
    ]
}

ko.bindingHandlers.serverForEach = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
        // clear the list first
        $(element).children().remove();
    },
    update: function(element, valueAccessor, allBindingsAccessor, viewModel) { 
        ko.bindingHandlers['template'].update(element, valueAccessor, allBindingsAccessor, viewModel);
    }
};

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:08:24.320

`template`绑定包含一个`init`也需要调用的函数。您还可以简化包装`template`处理程序函数的方式。

```
ko.bindingHandlers.serverForEach = {
    init: function(element) {
        // clear the list first
        $(element).children().remove();
        return ko.bindingHandlers.template.init.apply(this, arguments);
    },
    update: ko.bindingHandlers.template.update
}; 
```

示例：http: [//jsfiddle.net/mbest/4f9N2/12/](http://jsfiddle.net/mbest/4f9N2/12/)

# c++ - C++ - zlib 解压缩函数使程序崩溃

> ID：15777147
> 
> 赞同：0
> 
> 时间：2013-04-03T01:02:40.940
> 
> 标签：c++, compression, zlib

我应该注意到，这个程序坚持（至少，试图）到[Tiled API](https://github.com/bjorn/tiled/wiki/TMX-Map-Format)。

我正在尝试`uncompress()`在 zlib 中使用该函数，但由于某种原因，每当我调用该函数时，我的程序就会崩溃。这就是我所拥有的，所有参数看起来都正确，所以我不太确定问题出在哪里。

```
// const char* filedata passed in function is Zlib compressed and Base64 encoded

uLong inLen = static_cast<uLong>((strlen(filedata)*6)/8);   // Calculate the length
std::string inBuffer = BASE64_DECODE(filedata);    // My data

uLongf outLen = static_cast<uLongf>(width*height*4);    // Tiled API specification
Bytef* outBuffer = new Bytef(outLen);     // Destination

int ret = uncompress(outBuffer, &outLen,
              reinterpret_cast<Bytef*>(&inBuffer[0]), inLen); 
```

`ret`什么都不返回，程序崩溃。有人有什么想法吗？这是`BASE64_DECODE`功能：

```
std::string BASE64_DECODE(std::string const& encoded_string)
{
    int in_len = encoded_string.size();
    int i = 0;
    int j = 0;
    int in_ = 0;

    unsigned char char_array_4[4], char_array_3[3];
    std::string ret;

    while(in_len-- && ( encoded_string[in_] != '=') && is_base64(encoded_string[in_]))
    {
        char_array_4[i++] = encoded_string[in_]; in_++;

        if (i == 4)
        {
            for (i = 0; i <4; i++)
                char_array_4[i] = base64_chars.find(char_array_4[i]);

            char_array_3[0] = (char_array_4[0] << 2) + ((char_array_4[1] & 0x30) >> 4);
            char_array_3[1] = ((char_array_4[1] & 0xf) << 4) + ((char_array_4[2] & 0x3c) >> 2);
            char_array_3[2] = ((char_array_4[2] & 0x3) << 6) + char_array_4[3];

            for (i = 0; (i < 3); i++)
                ret += char_array_3[i];

            i = 0;
        }
    }

    if(i)
    {
        for (j = i; j <4; j++)
          char_array_4[j] = 0;

        for (j = 0; j <4; j++)
          char_array_4[j] = base64_chars.find(char_array_4[j]);

        char_array_3[0] = (char_array_4[0] << 2) + ((char_array_4[1] & 0x30) >> 4);
        char_array_3[1] = ((char_array_4[1] & 0xf) << 4) + ((char_array_4[2] & 0x3c) >> 2);
        char_array_3[2] = ((char_array_4[2] & 0x3) << 6) + char_array_4[3];

        for (j = 0; (j < i - 1); j++) ret += char_array_3[j];
    }

    return ret;
} 
```

**编辑：**如果您将来要查看此内容，请确保稍后在程序中使用`delete`该变量以防止内存泄漏。`outBuffer`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:04:57.380

`Bytef`不与带有长度参数的构造函数一起使用。您可能的意思是`Bytef* outBuffer = new Bytef[outLen];`（方括号）。

我认为`Bytef`无论如何通常都是对某些原始类型进行类型定义的，因此使用它类似于`new int[len]`or之类的东西`new uint64_t[len]`。

# objective-c - 如何将此依赖于视图控制器的方法移至辅助类？

> ID：15777148
> 
> 赞同：0
> 
> 时间：2013-04-03T01:02:41.797
> 
> 标签：objective-c, cocoa, design-patterns, uiviewcontroller, abstraction

我正在使用 Evernote API，并且我创建了一个帮助类，该类将包含 Evernote API 特定的方法，以尽可能保持代码抽象。

但是需要从视图控制器调用一种方法来显示登录表单，以及在发生错误时显示警报视图。这是代码：

```
- (IBAction)loginToEvernote:(id)sender {

EvernoteSession *session = [EvernoteSession sharedSession];
[session authenticateWithViewController:self completionHandler:^(NSError *error) {
    if (error || !session.isAuthenticated) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:@"Could not authenticate"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];

    } else {

    }
}]; 
```

}

在我看来，“authenticateWithViewController:completionHandler”方法需要在视图控制器中，以便显示包含登录信息的模式视图控制器。

同样，这是来自 API 的方法，所以我无法更改它。

如何将此方法移至帮助程序类？起初我想到了委托，但我已经让**这个视图控制器成为助手类的委托，**以便向它发送其他错误消息，并且让助手类和视图控制器委托对我来说似乎是代码异味，如果它是甚至可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:31:10.220

如果 Evernote API 需要一个视图控制器，并且你想要完全抽象，我会在帮助器类中有一个类似这样的方法，在帮助器类中是这样的：

```
- (void)authenticateWithViewController:(UIViewController *)viewController 
```

在这个方法中，你可以封装任何共享行为，通过调用 Evernote 会话 API 将`viewController`参数传递给方法。

# c++ - std::normal_distribution 构造函数的参数

> ID：15777149
> 
> 赞同：-1
> 
> 时间：2013-04-03T01:02:49.483
> 
> 标签：c++, c++11

`sigma`的构造函数的参数是否`std::normal_distribution`平方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:12:04.847

`sigma`参数是标准偏差而不是方差。例如，下面的代码输出`4`（而不是`2`）。

```
#include <iostream>
#include <random>
int main() {
    std::normal_distribution<double> d(0.0, 4.0);
    std::cout << d.stddev() << std::endl;
} 
```

# java - ArrayList.clear() 中的二维 ArrayList(ArrayList of ArrayLists)

> ID：15777152
> 
> 赞同：2
> 
> 时间：2013-04-03T01:03:07.790
> 
> 标签：java, multidimensional-array, arraylist

所以我在将 ArrayLists 添加到我的 ArrayList 时遇到了一些问题。把它想象成一张桌子。

这是一些示例代码：

```
 ArrayList<String> currentRow = new ArrayList<String>(); 

  while ((myLine = myBuffered.readLine()) != null) {

    if(rowCount == 0) {// get Column names  since it's the first row

        String[] mySplits;
        mySplits = myLine.split(","); //split the first row

        for(int i = 0;i<mySplits.length;++i){ //add each element of the splits array to the myColumns ArrayList
            myTable.myColumns.add(mySplits[i]);
            myTable.numColumns++;
            }
        }
    else{ //rowCount is not zero, so this is data, not column names.
    String[] mySplits = myLine.split(","); //split the line
    for(int i = 0; i<mySplits.length;++i){

    currentRow.add(mySplits[i]); //add each element to the row Arraylist

    }
    myTable.myRows.add(currentRow);//add the row arrayList to the myRows ArrayList
    currentRow.clear(); //clear the row since it's already added
        //the problem lies here *****************
     }
    rowCount++;//increment rowCount
    }
 } 
```

问题是当我不调用`currentRow.clear()`来清除我在每次迭代中使用的 ArrayList 的内容（放入我的 ArrayList 的 ArrayList 中）时，每次迭代，我都会得到该行加上每隔一行。

但是，当我`currentRow.clear()`在添加`currentRow`到 my之后调用时`arrayList<ArrayList<String>`，它实际上会清除我添加到主 arrayList 以及 currentRow 对象的数据....而且我只希望 currentRow ArrayList 为空，而不是我刚刚添加到的 ArrayList我的 ArrayList (Mytable.MyRows[currentRow])。

谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T01:08:40.560

问题出在这里：

`myTable.myRows.add(currentRow);`

您在`ArrayList currentRow`此处添加到“主”列表。请注意，在 Java 语义下，您正在添加对变量的*引用。*`currentRow`

在下一行，您立即清除`currentRow`：

`currentRow.clear()`

因此，当您稍后尝试使用它时，“主”列表会从之前查找该引用并发现虽然有一个`ArrayList`对象，但其中不包含`String`s。

你真正想做的是从一个*新* `ArrayList`的开始，所以用这个替换上一行：

`currentRow = new ArrayList<String>();`

然后旧对象仍然被“主”列表引用（因此它不会被垃圾收集），并且当以后访问它时，它的内容不会被清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T01:08:33.400

不要清除当前行，而是在外循环内为每一行创建一个全新的 ArrayList。

当您将 currentRow 添加到列表时，您添加的是对列表的引用，而不是将继续独立存在的副本。

# extjs - Sencha Desktop Packager 可执行文件

> ID：15777153
> 
> 赞同：0
> 
> 时间：2013-04-03T01:03:16.020
> 
> 标签：extjs

我已经使用 Sencha 桌面打包器试用版构建了我的 extjs 应用程序的桌面版本。它创建了一个包含大量 dll 文件和一个 .exe 文件的输出文件夹。当我从这个文件夹中打开它时，可执行文件运行正常，但是一旦我将 .exe 移到外面，它就不再运行。所以它似乎依赖于与之一起生成的其他文件。

1.  我在这里做错了什么还是应该是这样？是否可以获得将在客户端计算机上运行的单个可执行文件？

2.  其次，安装后，是否可以根据版本号进行自动更新（或至少提示更新）？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T19:29:46.857

您应该使用 InnoSetup 之类的东西来自动在外国计算机上安装整个 App 目录。

# java - 从移动物体的速度x，y获得旋转角度？

> ID：15777158
> 
> 赞同：1
> 
> 时间：2013-04-03T01:03:46.400
> 
> 标签：java, flash, math, actionscript, formula

用于从速度或矢量行进方向确定运动物体旋转角度的公式是什么？

例如，如果一架飞机从位置 (x0, y0) = (0,0) 向位置 (x1,y1) = (200, 100) 移动，飞机将面向哪个角度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:14:36.720

通过旋转角度，您显然是指方位角。该功能`Math.atan2(dy, dx)`是正确的方法。在您使用 and 的示例中`p1 = (x1, y1) = (200,100)`，`p0 = (x0, y0) = (0,0)`您需要`Math.atan2(y1 - y0, x1 - x0)`. 这将以弧度返回角度。要转换为度数，请乘以`180 / Math.PI`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T03:45:15.133

要获得两点之间的角度，请将这些点插入以下代码：

```
var _radians:Number = Math.atan2(y2-y1, x2-x1); 
```

“_radians”是以弧度表示的角度。

要旋转 DisplayObject，您可以在将角度转换为度数后使用它的旋转属性。

```
var _degrees:Number = _radians * ( 180 / Math.PI );
_displayObject.rotation = _degrees; 
```

您可能需要在旋转中添加一个内容以与您的艺术保持一致。

# python - 如何在列表视图中设置选择？

> ID：15777159
> 
> 赞同：4
> 
> 时间：2013-04-03T01:03:55.210
> 
> 标签：python, qt, pyqt

我有一个带有 QStringModel 的列表视图，我想以编程方式将其更改为选择。我有一个 python 索引列表作为整数 [1,3,4]，我想选择它。如何选择这些指数？列表视图是否具有允许我选择一行的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T23:19:02.633

终于自己想通了，这就是答案，假设你有一个列表视图“myListview”，一个对应的模型“myQStringListModel”至少有6个元素（0-5）和一个索引数组[1,3,5]：

```
theIndices = [1,3,5]
theQIndexObjects = [self.myQStringListModel.createIndex(rowIndex, 0, self.coverages_lm) for rowIndex in theIndices]
for Qindex in theQIndexObjects:
    myListview.selectionModel().select(Qindex, QtGui.QItemSelectionModel.Select) 
```

IMO 不是很直接，您必须使用模型来创建索引对象，但我想这是有道理的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-03T03:40:35.880

我猜你使用的是 QStringListModel 而不是 QStringModel，假设你使用的是 QListView。这里是代码

```
 model = new QStringListModel(this);

listView = new QListView;
listView->setModel(model);
listView->setSelectionMode(QAbstractItemView::MultiSelection);//you can select many selections; 
```

# c++ - 如何在静态方法中实例化当前类的实例？

> ID：15777161
> 
> 赞同：1
> 
> 时间：2013-04-03T01:04:15.567
> 
> 标签：c++, qt, templates

我有一个看起来像这样的 Qt 类：

```
class MyClass : public QObject
{
    Q_OBJECT

    public:

        virtual void doSomething();
        static void createInstance();
}; 
```

该`createInstance`方法应该创建当前类的实例并`doSomething`在其上调用该方法。例如，如果我创建一个名为 的派生类`MyOtherClass`，`createInstance`应该创建一个实例`MyOtherClass`并在该实例上调用`doSomething`。

起初我认为模板可能是这里的解决方案，但以下代码：

```
template <typename T>
static void createInstance();

// ...in myclass.cpp...

template <typename T>
void MyClass::createInstance()
{
    T().doSomething();
} 
```

...产生以下链接器错误：

```
错误：未定义对 `void MyClass::createInstance<MyOtherClass>()' 的引用
```

[这个答案](https://stackoverflow.com/a/15629641/193619)可能有效，但`moc`不适用于模板类。我有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:12:35.487

把实现`createInstance`放在你的头文件中。使用的每个编译单元都`createInstance<Foo>`需要能够创建实现。

作为改进，创建一个两层系统：

```
class MyClassBase: public QObject {
  Q_OBJECT
public:
  virtual void doSomething() = 0;
};

template<typename Derived>
class MyClass: public MyClassBase {
public:
  static void createInstanceAndDoSomething() {
    Derived d;
    d.doSomething();
  }
}; 
```

然后，从 MyClass 继承时，传入派生类：

```
class DerivedClass: MyClass<DerivedClass> {
  // ...
}; 
```

你也可以抛出一些静态（或者，如果你的编译器没有）运行时断言，它`Derived`是`MyClass<Derived>`. `MyClass<Derived>`只是为了保持理智。

通过仅`Q_OBJECT`在具体类中使用（而不是在模板类中），我希望您`moc`能够处理它。模板类的存在只是为了创建具有编译时调度的静态方法，而不必一次又一次地编写它，也不必每次调用它时都重复自己。如果没有，您可以随时退回到第一个版本。

# spring - 在 spring 中省略特定方法的事务

> ID：15777167
> 
> 赞同：0
> 
> 时间：2013-04-03T01:05:00.807
> 
> 标签：spring, hibernate, debugging, spring-transactions

我正在为我的整个 Dao 类使用 @Transactional 注释，并使用 spring 和 hibernate。一切都很好，只是我想在我的 Dao 中省略一些与数据库无关的方法的行为。

[http://static.springsource.org/spring/docs/2.5.4/reference/transaction.html#transaction-declarative-annotations](http://static.springsource.org/spring/docs/2.5.4/reference/transaction.html#transaction-declarative-annotations)

每次我在调试会话期间进入这些方法时，我总是会遇到非常烦人的 JdkDynamicAopProxy.class。

有什么方法可以省略特定方法的事务性？或者至少修复这个烦人的调试行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:32:41.127

在 Spring 中，您可以`@Transactional`仅将注释放在您想要进行事务处理的方法上，而不是将其放在类级别。

否则也许考虑将那些特定的非事务性方法提取到一个单独的类中？

# php - htaccess Mod-Rewrite（GET参数+重写之上）

> ID：15777168
> 
> 赞同：0
> 
> 时间：2013-04-03T01:05:01.307
> 
> 标签：php, apache, .htaccess, mod-rewrite, get

我正在开发这个应用程序，但我遇到了关于 htaccess mod_rewrite 的小问题。

在我解释我想要做什么之前，我将向您展示我到目前为止所做的事情：

```
RewriteRule ^client([0-9]*)$ index.php?clientID=$1 
```

这基本上允许我使用**url.com/client5**而不是**url.com/clientID=5**，效果很好。但是可以说我想实际使用 GET 变量并执行类似**url.com/client5?page=main**之类的操作，如果没有人可以提出替代方法，是否有可能实现这一目标？

谢谢！！！

请记住，.htaccess 文件存储在根目录中，这意味着它将影响所有文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:09:16.730

你可以用`[qsappend]`.

```
RewriteRule ^login.html$ ?action=login [qsappend] 
```

你可以这样称呼它。.com/login.html?page=main

# c++ - 跨平台 C++ 库/库：显示窗口、在屏幕上渲染 2D 形状、在屏幕上渲染文本

> ID：15777175
> 
> 赞同：1
> 
> 时间：2013-04-03T01:06:06.217
> 
> 标签：c++, 2d

任何人都可以推荐一组 C++ 库来执行上述操作吗？我已经尝试了几件事，但都遇到了问题，但我没有深入研究，而是更感兴趣的是关于一些好的技术的公正建议。一般来说，我会优先考虑简单性而不是性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:06:48.630

[Qt](http://qt-project.org/doc/qt-5.0/qtdoc/topics-ui.html)和它的[QGLWidget](http://qt-project.org/doc/qt-5.0/qtopengl/qglwidget.html)怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:27:22.157

[OpenGL 用于图形，U++ 用于 GUI](http://www.ultimatepp.org/reference%24OpenGL%24en-us.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T08:04:31.323

你也可以考虑看看[wxWidget + OpenGL](http://www.wxwidgets.org/docs/tutorials/opengl.htm)

# wordpress - 自定义分类蛞蝓？

> ID：15777177
> 
> 赞同：0
> 
> 时间：2013-04-03T01:06:16.877
> 
> 标签：wordpress, taxonomy, slug

为了避免命名问题，我决定尝试在提交时更改 url slug，方法是附加一个“unique-to-taxonomy”后缀。

做这样的事情的钩子是什么？它将如何使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:49:28.970

我确实找到了解决问题的好方法：

问题：Like-slug 会发生冲突并在不同的分类中产生 404。我的主题是非常重的关键字和类别，我的用户并不是非常精通wordpress。所以不能允许冲突。

在自定义税收区域或自定义发布区域中提交新类别后，分类将更改为自定义分类和防冲突的唯一分类

```
function symbiostock_unique_category( $term_id, $tt_id, $taxonomy )
{

    if ( $taxonomy == 'image-type' ) {

        if ( isset( $_POST[ 'slug' ] ) && !empty( $_POST[ 'slug' ] ) ) {
            $name = sanitize_title( $_POST[ 'slug' ] ) . '-images';
        } elseif ( isset( $_POST[ 'tag-name' ] ) && !empty( $_POST[ 'tag-name' ] ) ) {
            $name = sanitize_title( $_POST[ 'tag-name' ] ) . '-images';
        } elseif ( isset( $_POST[ 'newimage-type' ] ) && !empty( $_POST[ 'newimage-type' ] ) ) {
            $name = sanitize_title( $_POST[ 'newimage-type' ] ) . '-images';
        }

        wp_update_term( $term_id, $taxonomy, array(

             'slug' => $name 

        ) );

    }

}
add_action( 'create_term', 'symbiostock_unique_category', 10, 3 ); 
```

# android - 单元测试 Android 应用程序逻辑

> ID：15777179
> 
> 赞同：4
> 
> 时间：2013-04-03T01:06:25.610
> 
> 标签：android, unit-testing, junit

为了为我的应用程序编写一些测试，我偶然发现了[Android 测试页面](http://developer.android.com/tools/testing/index.html "安卓测试指南")。经过相当长的阅读后，我很快就发现我唯一能从中得到的就是关于如何测试 UI/Activity 的信息。我真正想要的是简单地测试我的逻辑的方法`ant test`，最好甚至不涉及设备。在这个阶段我应该提一下，我没有使用 Eclipse，而且令人遗憾的是，Android 上 99% 的 Java 资源都假设人们会这样做。

无论如何，为了让任何东西都运行起来，我尽可能多地按照教程进行操作。它要求`tests`在与`src`. 当然，即使他们的其他页面都暗示测试项目是一个完全独立的实体。在顶级项目目录中，我运行了 `android create test-project -m /path/to/my/project/ -n MyProjectTest -p tests`. [值得一提的是，他们与在这个问题上看到的](https://stackoverflow.com/questions/6859807/is-creating-unit-tests-in-a-separate-project-the-correct-approach-for-android "路径不一致")他们希望如何设置事物不一致。访问该目录，我发现了默认的测试文件。这是问题开始的地方。

据我了解，测试如下：构建应用程序，安装；去测试，构建测试，安装；使用从测试目录运行测试`ant test`或直接使用启动它们`adb shell am instrument`。这工作得很好。但是，我不想测试活动，而只是测试逻辑（不访问任何视图/活动）。

将默认测试更改为扩展`AndroidTestClass`似乎有一段时间了。测试正在运行，但有一些警告：清理`tests`项目目录`ant clean`（`../tests``ant debug`

再做几次测试，我就`java.lang.VerifyError`上了我唯一的测试课。谷歌搜索和堆叠，它归结为外部库有问题或我的类路径有问题。我没有使用任何 external `.jar`s 所以这可能是我的路径。

无论如何，这是我的问题：使用 JUnit 在 Android 应用程序中对逻辑进行单元测试的正确方法是什么？我根本找不到与此相关的任何资源：所有资源要么用于测试 UI 部分，要么用于对普通应用程序进行单元测试。

*如何仅对*我的逻辑进行单元测试？考虑到我不需要使用 Android 的任何部分，这甚至不需要设备运行。我在哪里进行测试？我需要更改什么以便`ant test`在我的项目目录中运行然后运行这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:06:43.500

很长一段时间后，我设法做到了。

首先，我忽略了任何使用`adb`.

想象一下我的包叫做`com.foo.bar`. 我`tests`在`src/com/foo/bar/tests`. 在那里，编写您的常规 JUnit 测试。确保您`package com.foo.bar.tests`参加了测试课程。这是一个示例类：

```
package com.foo.bar.tests;

import com.foo.bar.baz.Foo;

import org.junit.*;
import junit.framework.*;
import static org.junit.Assert.*;

public class MyTests extends TestCase {

    public void testSomething() {
        Foo testFoo= new Foo();
        assertEqual(testFoo.getBar(), 1);
    }
} 
```

接下来是使用`ant test`. 为此，请`AndroidManifest.xml`在最后一个右括号 ( ) 之前添加以下内容`</manifest>`：

```
<instrumentation android:name="android.test.InstrumentationTestRunner"
                 android:targetPackage="com.foo.bar"
                 android:label="Tests for com.foo.bar"/> 
```

你还需要

```
<uses-library android:name="android.test.runner" /> 
```

添加到您的`<application>`部分。

我不知道需要更改哪些内容才能在本地而不是在设备上进行测试，但这是 75% 的答案，希望将来对像我这样的人有所帮助。

`ant test`编辑：可以通过在最后一个导入下方添加以下内容来隐藏原始行为`build.xml`：

```
 <target name="test" >
       <junit>
           <!-- all your junit stuff here -->
       </junit>
   </target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T01:29:09.020

查看[Robolectric——](http://robolectric.org/)它可以让您避免 Google 的测试解决方案的大部分噩梦。

Square 的一篇关于该主题的好文章：[Android 测试的复活](http://corner.squareup.com/2013/04/the-resurrection-of-testing-for-android.html)。

# opencv - Canny Edge 算法与 OpenCv - Windows Phone 8

> ID：15777181
> 
> 赞同：1
> 
> 时间：2013-04-03T01:06:32.563
> 
> 标签：opencv, windows-phone-8

我正在制作一个从相机获取流并使用精明算法显示边缘的应用程序。在 android 中一切正常，使用 OpenCv 获取 egdes 并且它是实时的。之后我继续开发到 WP8，发现 WP8 还不支持 OpenCv。因为我唯一的问题是我从互联网上获得了一个精明的边缘算法，将代码改编为 Silverlight，结果一团糟。这根本不是实时的，我在 1 秒内显示了信息。我搜索了一些替代方案，发现：EmguCv（但没有关于精明的边缘算法）和一些试图为 W8 编译 Opencv 子集的人ARM。甚至尝试了第二个，但最终失败了。我现在的问题是：

1.  为什么它移动得这么慢？
2.  如果我设法获得一个 OpenCv 库，它会更快吗？
3.  你们还有其他选择/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T15:27:38.573

认为他们带来了我们的 windows phone 8 支持 - 使用 emgucv，您可以访问所有 opencv 功能，我相信 canny edge 就是其中之一。显然opencvsharp很好。至于速度 - 不知道。

# c++ - 如何调试 LLVM3.2 插件断言错误

> ID：15777182
> 
> 赞同：1
> 
> 时间：2013-04-03T01:06:40.863
> 
> 标签：c++, llvm, clang

我正在将一个为 LLVM 2.9 编写的 LLVM 插件 (LLFI) 移植到最新版本的 LLVM/Clang。

使用启用断言的 LLVM3.2 构建测试我的插件时，我收到以下错误：

```
opt: /home/kzvr/ubc/llfi/llvm3/llvmsrc/lib/IR/Instructions.cpp:281: 
 void llvm::CallInst::init(llvm::Value*, llvm::ArrayRef<llvm::Value*>, 
 const llvm::Twine&): Assertion `(i >= FTy->getNumParams() || 
 FTy->getParamType(i) == Args[i]->getType()) && "Calling a function with a bad
 signature!"' failed.
0  opt             0x00000000017931a6 llvm::sys::PrintStackTrace(_IO_FILE*) + 38
1  opt             0x0000000001793423
2  opt             0x0000000001792e7b
3  libpthread.so.0 0x00007f0c0279fff0
4  libc.so.6       0x00007f0c018a91b5 gsignal + 53
5  libc.so.6       0x00007f0c018abfc0 abort + 384
6  libc.so.6       0x00007f0c018a2301 __assert_fail + 241
7  opt             0x00000000016e78c4 llvm::CallInst::init(llvm::Value*, llvm::ArrayRef<llvm::Value*>, llvm::Twine const&) + 402
8  LLFI.so         0x00007f0c0165adcb
9  LLFI.so         0x00007f0c0165aa83
10 LLFI.so         0x00007f0c016581c5
11 opt             0x000000000171c02c llvm::FPPassManager::doFinalization(llvm::Module&) + 88
12 opt             0x000000000171c449 llvm::MPPassManager::runOnModule(llvm::Module&) + 1013
13 opt             0x000000000171c8a6 llvm::PassManagerImpl::run(llvm::Module&) + 254
14 opt             0x000000000171cc01 llvm::PassManager::run(llvm::Module&) + 39
15 opt             0x000000000087a089 main + 5591
16 libc.so.6       0x00007f0c01895c8d __libc_start_main + 253
17 opt             0x000000000086bf59 
```

在插件代码中，我对 llvm::CallInst::Create 进行了多次调用，基于上述情况，我相信其中至少有一个执行不正确。它们几乎都是这样的：

```
ArrayRef<Value*> arrayArgs(args);
Instruction* callInst = CallInst::Create( injectFunc, arrayArgs, fiName, insertInst); 
```

其中 args 是 std::vector，injectFunc 是 llvm::Constant*，fiName 是 std::string，insertInst 是 llvm::Instruction*

问题是，作为 LLVM 新手，我不知道如何从这一点上缩小我的 bughunt 范围。所以我有几个问题：

1.  如何找到对 CallInst::Create 的调用是导致 CallInst::init 断言失败的调用？
2.  说明正确使用 CallInst 类的文档在哪里？谷歌搜索会产生自动生成的源代码文档，我已经仔细研究过但无济于事。
3.  这个插件的 2.9 和 3.2 版本之间的唯一区别（就 CallInst 而言）是传递 std::vector 迭代器到 CallInst::create 替换为传递从 std::vector 构造的 ArrayRef。我是否不正确地从 Vector 构造了 ArrayRef？

在此先感谢您的帮助，我希望这个问题不会太模糊。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T07:14:12.640

关于如何调试 LLVM 断言错误的最佳提示 - 标题中的问题 - 是阅读断言的代码 :)

消息 - “调用签名错误的函数！” - 有点模棱两可，但是查看实际的断言条件（失败），您可以看到问题所在：

```
i >= FTy->getNumParams() ||  FTy->getParamType(i) == Args[i]->getType() 
```

因此，您要么提供了太多参数，要么您的参数之一与函数所期望的类型不同。您还可以查看断言位置，Instructions.cpp 第 281 行，以查看上下文的周围代码。

为了解决这个问题，我首先看看函数类型到底是什么（一种简单的方法就是调用`->dump()`函数或函数类型，它将把它打印到标准输出）。然后我会将这些类型与我发送到 CallInst 的类型进行比较（`->dump()`也可以在那里工作）。此外，根据预期的参数数量验证参数的数量。

关于您剩下的问题：

1.  为什么不直接使用标准编程实践来定位坏线呢？
    *   例如注释掉一些行，或者在行之间添加打印，或者只是启动一个调试器并查看哪一行失败
2.  查看源代码（在实现和注释中）通常是我寻找如何使用这些函数的首选方式。无论如何，您的用法似乎很好。
3.  您没有不正确地从 Vector 构造 ArrayRef，只是冗余：存在从 std::vector 到 ArrayRef 的隐式转换，因此您可以将`args`向量作为第二个参数传递。您的用法是*正确*的，但这不是断言失败的原因。

# c# - 天气跟踪应用程序

> ID：15777192
> 
> 赞同：1
> 
> 时间：2013-04-03T01:07:33.723
> 
> 标签：c#

该应用程序必须显示五个城市的温度。我无法显示最低和最高温度列。我将温度读数的前三列与平均温度列一起显示，但无法显示第四列温度读数。另外，我无法获得面积平均值标签来显示面积平均值。有任何想法吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Lab8practice1
{
  public partial class Form1 : Form
  {

    string[] strCities = {  "Troy",
                            "West Bloomfield",
                            "Farmington Hills",
                            "Brighton",
                            "Canton"};

    int[,] intTemperatures = new int[5, 3];

    public Form1()
    {
        InitializeComponent();
    }

    private void btnAddTemperature_Click(object sender, EventArgs e)
    {
        try
        {
            if (cmbCities.SelectedIndex >= 0 && cmbCities.SelectedIndex <= 4)
            {
                if (intTemperatures[cmbCities.SelectedIndex, (int)nudReading.Value -1] == 0)
                {
                    intTemperatures[cmbCities.SelectedIndex, (int)nudReading.Value - 1] = Int32.Parse(txtTemperature.Text);
                }
                else
                {
                    MessageBoxButtons buttons = MessageBoxButtons.YesNo;
                    DialogResult result;
                    result = MessageBox.Show("Modify Temperature?", "Temperature already exists!", buttons);
                    if (result == System.Windows.Forms.DialogResult.Yes)
                    {
                        intTemperatures[cmbCities.SelectedIndex, (int)nudReading.Value - 1] = Int32.Parse(txtTemperature.Text);
                    }
                }
                displayTemperatures();

            }
            else
            {
                MessageBox.Show("Select a city!");
            }
        }
        catch (FormatException)
        {
            MessageBox.Show("Temperatures must be whole numbers!");
        }
    }

    private void displayTemperatures()
    {
        string strCities;
        lstTemperatures.Items.Clear();
        double[] dblAverages = new double[5];
        int intNonBlank = 0;
        double dblNonBlank = 0.0;
        int intMin = 150, intMax = 0, intTotal = 0;

        for (int g = 0; g <= 4; g++)
        {
            intNonBlank = 0;
            for (int d = 0; d <= 2; d++)
            {
                if (intTemperatures[g, d] != 0)
                {
                    dblAverages[g] += intTemperatures[g, d];
                    intNonBlank++;
                }
            }
            if (intNonBlank != 0)
            {
                dblAverages[g] /= intNonBlank;
            }
        }

        for (int g = 0; g <= 4; g++)
        {
            for (int d = 0; d <= 2; d++)
            {
                if (intTemperatures[g, d] != 0)
                {
                    intTotal += intTemperatures[g, d];
                    dblNonBlank++;
                }

                if (intTemperatures[g, d] < intMin && intTemperatures[g, d] != 0)
                {
                    intMin = intTemperatures[g, d];
                }

                if (intTemperatures[g, d] > intMax)
                {
                    intMax = intTemperatures[g, d];
                }
            }
        }

        for (int g = 0; g <= 4; g++)
        {
            strCities = " ";

            for (int d = 0; d <= 2; d++)
            {
                if (intTemperatures[g, d] == 0)
                {
                    strCities += "          ";
                }
                else
                {
                    if (intTemperatures[g, d] == 103)
                    {
                        strCities += intTemperatures[g, d] + "       ";
                    }
                    else
                    {
                        strCities += intTemperatures[g, d] + "       ";
                    }
                }
            }

            if (dblAverages[g] == 0)
            {
                strCities += "             ";
            }
            else
            {
                if (dblAverages[g] == 140)
                {
                    strCities += dblAverages[g].ToString("f2") + "          ";
                }
                else
                {
                    strCities += dblAverages[g].ToString("f2") + "          ";
                }
            }

            lstTemperatures.Items.Add(strCities);
            lblAreaAverage.Text = dblAverages.ToString("f2");

        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        for (int i = 0; i <= 4; i++)
        {
            cmbCities.Items.Add(strCities[i]);
            lstCities.Items.Add(strCities[i]);
        }
    }
  }
} 
```

# ios - 使用情节提要，如何判断用户何时离开场景？

> ID：15777197
> 
> 赞同：0
> 
> 时间：2013-04-03T01:08:27.967
> 
> 标签：ios, uitabbarcontroller, xcode4.6

我有一个 iPad 应用程序（XCode 4.6、Storyboards、UITabBarController 和 iOS 6.2）。我希望能够知道用户何时离开特定的“场景”，以便保存刚刚输入的数据。

我看了又看，一无所获；我很确定我的搜索参数不正确，但我尝试了 Google 和 SO。那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:10:16.063

您可以使用[viewWillDisappear:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW18)方法。

```
-(void)viewWillDisappear:(BOOL)animated{
    //Save data logic here 
} 
```

# machine-learning - 为什么向量归一化可以提高聚类和分类的准确性？

> ID：15777201
> 
> 赞同：15
> 
> 时间：2013-04-03T01:08:50.457
> 
> 标签：machine-learning, nlp, classification, mahout

Mahout in Action 中描述了标准化可以稍微提高准确性。谁能解释一下原因，谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-03T04:51:36.523

标准化并不总是需要，但它很少会造成伤害。

一些例子：

[K-均值](https://stats.stackexchange.com/a/21226/12359)：

> K-means 聚类在空间的所有方向上都是“各向同性的”，因此往往会产生或多或少的圆形（而不是细长的）聚类。在这种情况下，使方差不相等等同于对方差较小的变量赋予更多的权重。

Matlab 中的示例：

```
X = [randn(100,2)+ones(100,2);...
     randn(100,2)-ones(100,2)];

% Introduce denormalization
% X(:, 2) = X(:, 2) * 1000 + 500;

opts = statset('Display','final');

[idx,ctrs] = kmeans(X,2,...
                    'Distance','city',...
                    'Replicates',5,...
                    'Options',opts);

plot(X(idx==1,1),X(idx==1,2),'r.','MarkerSize',12)
hold on
plot(X(idx==2,1),X(idx==2,2),'b.','MarkerSize',12)
plot(ctrs(:,1),ctrs(:,2),'kx',...
     'MarkerSize',12,'LineWidth',2)
plot(ctrs(:,1),ctrs(:,2),'ko',...
     'MarkerSize',12,'LineWidth',2)
legend('Cluster 1','Cluster 2','Centroids',...
       'Location','NW')
title('K-means with normalization') 
```

![在此处输入图像描述](https://i.stack.imgur.com/N2unM.png)

![在此处输入图像描述](https://i.stack.imgur.com/e5G2M.png)

（仅供参考：[我如何检测我的数据集是集群的还是非集群的（即形成一个集群](https://www.quora.com/Machine-Learning/How-can-I-detect-if-my-dataset-is-clustered-or-unclustered-i-e-forming-one-single-cluster/answer/Franck-Dernoncourt)）

[分布式集群](http://www.medwelljournals.com/fulltext/?doi=ijscomp.2009.168.172)：

> 比较分析表明，分布式聚类结果取决于归一化过程的类型。

[人工神经网络（输入）](https://stackoverflow.com/a/4674770/395857)：

> 如果输入变量是线性组合的，就像在 MLP 中一样，那么很少有必要对输入进行标准化，至少在理论上是这样。原因是输入向量的任何重新缩放都可以通过更改相应的权重和偏差来有效地撤消，从而使您获得与以前完全相同的输出。然而，标准化输入可以加快训练速度并减少陷入局部最优的机会有多种实际原因。此外，使用标准化输入可以更方便地完成权重衰减和贝叶斯估计。

[人工神经网络（输入/输出）](http://www.faqs.org/faqs/ai-faq/neural-nets/part2/section-16.html)

> 你应该对你的数据做这些事情吗？答案是，这取决于。
> 
> 通过改进优化问题的数值条件（参见 [ftp://ftp.sas.com/pub/neural/illcond/illcond.html](ftp://ftp.sas.com/pub/neural/illcond/illcond.html)）并确保各种默认初始化和终止中涉及的值是适当的。标准化目标也会影响目标函数。
> 
> 案例标准化应该谨慎对待，因为它会丢弃信息。如果这些信息无关紧要，那么标准化案例可能会很有帮助。如果这些信息很重要，那么标准化案例可能是灾难性的。

* * *

有趣的是，改变测量单位甚至可能导致人们看到一种非常不同的聚类结构：[Kaufman、Leonard 和 Peter J. Rousseeuw。“在数据中寻找组：聚类分析简介。” （2005 年）。](https://rads.stackoverflow.com/amzn/click/com/0471735787)

> 在某些应用程序中，更改测量单位甚至可能导致人们看到非常不同的聚类结构。例如，表 3 中给出了四个假想人的年龄（以年为单位）和身高（以厘米为单位）并绘制在图 3 中。看起来 {A, B ) 和 { C, 0) 是两个分离良好的集群. 另一方面，当高度以英尺表示时，可以得到表 4 和图 4，其中明显的簇现在是 {A, C} 和 {B, D}。这个分区与第一个分区完全不同，因为每个主题都收到了另一个同伴。（如果以天为单位来衡量年龄，图 4 会更加扁平。）
> 
> 为了避免这种对测量单位选择的依赖，可以选择对数据进行标准化。这会将原始测量值转换为无单位变量。

![在此处输入图像描述](https://i.stack.imgur.com/Ppu5Y.png) ![在此处输入图像描述](https://i.stack.imgur.com/zW6rI.png)

[考夫曼等人。](https://rads.stackoverflow.com/amzn/click/com/0471735787)继续一些有趣的考虑（第 11 页）：

> 从哲学的角度来看，标准化并不能真正解决问题。实际上，测量单位的选择会产生变量的相对权重。以较小的单位表示变量将导致该变量的范围更大，这将对最终的结构产生很大的影响。另一方面，通过标准化尝试赋予所有变量同等权重，以期实现客观性。因此，它可以由没有先验知识的从业者使用。然而，很可能某些变量在特定应用中本质上比其他变量更重要，然后权重的分配应该基于主题知识（例如，参见 Abrahamowicz，1985）。另一方面，已经尝试设计独立于变量规模的聚类技术（弗里德曼和鲁宾，1967）。Hardy 和 Rasson (1982) 的建议是寻找一个最小化集群凸包总体积的分区。原则上，这种方法对于数据的线性变换是不变的，但不幸的是，不存在用于其实现的算法（除了限于二维的近似值）。因此，标准化的困境在目前看来是不可避免的，本书中描述的程序将选择权留给了用户。Hardy 和 Rasson (1982) 的建议是寻找一个最小化集群凸包总体积的分区。原则上，这种方法对于数据的线性变换是不变的，但不幸的是，不存在用于其实现的算法（除了限于二维的近似值）。因此，标准化的困境在目前看来是不可避免的，本书中描述的程序将选择权留给了用户。Hardy 和 Rasson (1982) 的建议是寻找一个最小化集群凸包总体积的分区。原则上，这种方法对于数据的线性变换是不变的，但不幸的是，不存在用于其实现的算法（除了限于二维的近似值）。因此，标准化的困境在目前看来是不可避免的，本书中描述的程序将选择权留给了用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-03T06:31:51.507

其背后的原因是，有时不同变量的测量本质上是不同的，因此通过标准化来调整结果的方差。例如，在一组儿童的年龄 (x) 与体重 (y) 比较中，年龄可以从 1 到 10，体重可以从 10 磅到 100。如果不规范化图形将产生两个非常图形右侧奇怪的长椭圆形，因为两个比例都需要从 1 到 100。归一化将使两个轴都有 1 到 100 的比例，因此图形将显示更有意义的集群。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-23T14:57:54.810

由于聚类在形成聚类时使用距离度量（如欧几里得），因此执行输入的标准化/归一化以确保具有小幅度的重要输入不会在聚类过程中失去其重要性。

> ### 例子：
> 
> √(3-1)^2+(1000-900)^2 ≈ √(1000-900)^2
> 
> 这里，(3-1) 对结果几乎没有贡献，因此与这些值对应的输入被认为是徒劳的由模型。

类似地，大多数（不是全部）分类器也使用距离度量进行分类。因此，在这些分类器中标准化输入数据是一个很好的做法。

### *结论*：

> *当直观重要的参数值较小时，*归一化确实有帮助。**

# algorithm - 收集积分游戏

> ID：15777203
> 
> 赞同：0
> 
> 时间：2013-04-03T01:09:01.443
> 
> 标签：algorithm, optimization

有一个 2 人游戏，你有一个数字序列，例如：`2 -6 12`. 可以说它们写在卡片上。

游戏需要时间轮流。每个回合玩家**有义务**从序列的开始或结束处拿走一张牌（不可跳过）。取完最后一张牌后游戏结束。目的是以尽可能高的正分数结束游戏（分数是玩家所拿卡上所有数字的总和）。我们也知道两个玩家都使用最优策略（最大化他们的收益）。我们必须说他们最终会达到什么分数。

知道最优策略是什么样子的吗？

到目前为止我的研究：

```
1-3 cards is trivial
{a}, no choice take a;
{a,b} take max(a,b) reduces to problem {a}
{a,b,c} take max(a,c) reduces to problem {a,b}
4 cards : {a,b,c,d}
if (a + max(c, min(b,d)) > d + max(b, min(a,c)))
    take a;
else
    take d; 
```

如果我决定拿`a`，我的对手拿 max(b,d) 就像 3 张牌策略说的那样，所以我要做的就是拿最大的`c`（在对手转牌时是“安全的”），从`b`,中取较小的`d`牌，因为对手会需要更大的一个。双胞胎的情况`d`。但我不知道如何扩展（如果可能的话）n-cards 案例。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:58:30.610

```
//globals
int[N] cards;
int[N][N] v;  //initialized to 0
int[N][N] sum; // precomputed such that sum(i,j)=cards[i]+...+cards[j]

void updateValue(int i,int j){
    int left=cards[i]+sum(i+1,j)-v(i+1,j);
    int right=cards[j]+sum(i,j-1)-v(i,j-1);
    v[i,j]=max(left,right);
}

void do(){
    for (int d=1;d<N;d++)
        for (int i=0;i<N-d;i++)
            updateValue(i,i+d);  
} 
```

答案将在值 [0,N-1] 中

可以通过注意以下几点来提高内存使用率：如果我们将 v 视为一个大方桌，我们会填充它的上三角形一半。对于外循环中的每个 d 值，我们填充从 [0,d] 到 [Nd,N-1]的*对角线。*现在请注意，在填充这条对角线时，我们只使用之前最后一条对角线的值，因此我们实际上不需要将所有先前的值保存在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:25:28.593

乍一看让我想起了 Knackpack 问题，但后来我意识到这是一个递归问题。你熟悉 OCaml 吗？考虑这个问题的方法是根据“一组功能”。

需要从基本案例入手，定义基本功能：

```
e.g. f1(a) -> a
     f2(x, y ) -> max(x,y)
     f3(x, y, z) -> max(f(x,y),z) 
```

然后您需要定义更复杂的情况，如下所示：

```
if (a + max(c, min(b,d)) > d + max(b, min(a,c)))
    take a;
else
    take d; 
```

这看起来像一个 4 输入函数，您在其中使用先前定义的 max 和 min。像这样的东西：

```
f2 (a, b,c, d) -> if (a + max(c, min(b,d)) > d + max(b, min(a,c))) then true, else false
f3(a, b,c, d) -> if(f2(a,b,c,d) then a else d 
```

如果需要，您需要定义“基本”函数 f2、f3 和其他函数，然后将输入值替换为其他函数的输出。

我知道这不是一个解决方案，但希望是一个足够好的提示，可以开始以递归方式进行推理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:31:40.857

我认为这样的事情会起作用：

```
int[] cards;

int low = 0;
int high = cards.length - 1;

int bestScore(int low, int high)
{
  if (low > high)
    return 0;

  // our best score is our immediate score minus the opponents best response
  int lowScore = cards[low] - bestScore(low + 1, high);
  int highScore = cards[high] - bestScore(low, high - 1);

  if (lowScore >= highScore)
    return lowScore;
  else
    return highScore;
}

int bestMove(int low, int high)
{
  int lowScore = cards[low] - bestScore(low + 1, high);
  int highScore = cards[high] - bestScore(low, high - 1);

  if (lowScore >= highScore)
    return low;
  else
    return high;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T20:35:35.287

如果序列的长度是偶数，则回答：

第一个玩家总是有一个不松懈的策略。关键的观察是，第一个玩家可以收集所有偶数位的数字，如果他愿意，他可以收集所有奇数位的数字。所以他只需要事先检查哪个总和更大：

如果序列是 {x_1, x_2, ...,x_n} 其中 n=2k

计算：A=x_1+x_3_...x_2k-1 和 B=x_2+x_4+...+x_2k

如果 A>=B，首先选择 x_2k，无论对手做什么，第一个玩家总是可以选择 x_2i 获得一些 i。如果 A< B，从选择 x_1 开始，无论对手做什么，第一个玩家总是可以选择 x_2i+1 来获得一些 i。

# python - --no-site-packages 与 Apache mod_wsgi

> ID：15777208
> 
> 赞同：0
> 
> 时间：2013-04-03T01:09:30.167
> 
> 标签：python, mod-wsgi, virtualenv

我将 Django 1.5 安装到使用 --no-site-packages 选项创建的虚拟环境中。

虽然 virtualenv 的 site-packges 路径添加到 wsgi 文件中的 ystem 路径，但 Apache 忽略了 Django1.5 并使用 Django 1.3（之前安装到全局 python 库）

什么可能导致此问题，我该如何解决？你可以在下面找到我的 django.wsgi 文件，我可以提供任何必要的信息。

**django.wsgi**

```
import os
import sys
import site

vepath = '/home/myuser/projects/myenviron/lib/python2.7/site-packages'
site.addsitedir(vepath)

sys.path.append('/home/myuser/projects/')
sys.path.append('/home/myuser/projects/myproject/')

os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:15:39.507

您必须使用相当旧的 virtualenv 版本，因为 --no-site-packages 选项现在已被弃用，因为它是默认选项。因此，您不需要明确提供它。

无论如何，请阅读：

*   [http://code.google.com/p/modwsgi/wiki/VirtualEnvironments](http://code.google.com/p/modwsgi/wiki/VirtualEnvironments)

更好的是，使用 mod_wsgi 守护进程模式和 python-home 选项。

*   [http://code.google.com/p/modwsgi/wiki/ChangesInVersion0304](http://code.google.com/p/modwsgi/wiki/ChangesInVersion0304)

# php - $_SERVER['REQUEST_URI'] 是否返回它被编程的页面或发起调用的页面

> ID：15777211
> 
> 赞同：0
> 
> 时间：2013-04-03T01:09:46.600
> 
> 标签：php, server-variables

我正在构建一个类，它将容纳我最常用的函数的包装器，一个是运行查询函数，当​​我想运行 MySQL 查询时我总是会调用它，在它里面会清理查询以确保有没有 SQL 注入。

这个包装函数会做的一些事情是，如果它检测到查询是 SQL 注入的尝试，它会将用户 IP、日期和查询本身记录在一个表中，以便我稍后查看，我正在考虑存储的一些事情是`$_SERVER['REQUEST_URI']`这样，如果我的某个页面有问题，我可以找到有问题的页面并修复它。

但是，我突然想到了一些东西，确实`$_SERVER['REQUEST_URI']`返回了调用它的页面，我的类文件的名称是 main.php

所以我想知道，如果我将`$_SERVER['REQUEST_URI']`我的 main.php 文件放入一个函数中，然后在 test.php 中调用该函数，它会返回 main 还是 test

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:15:31.270

它是 URI，不一定是原始脚本。 [http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

因此，它将取决于为提供脚本而调用的 url。

因此，例如，您可以让 htaccess 重写 url，以便 www.yoursite.com/something 实际上服务于 main.php，其中包括 test.php。请求 URI 将记录 /something 而不是用于服务页面的任何文件。

您可以将唯一 ID 传递给您创建的包装方法。假设您以一种有意义的方式将其写出来，您应该能够很容易地跟踪和记录哪个查询被更改。

# html - 暂停时显示 HTML5 视频海报

> ID：15777214
> 
> 赞同：2
> 
> 时间：2013-04-03T01:10:48.550
> 
> 标签：html, html5-video

是否可以在暂停时显示视频的海报属性，而不是视频的当前帧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-18T18:56:11.297

这是一种不需要额外标记的方法。

在暂停事件中，添加以下内容：

```
var mediaElement = document.getElementById("myvideo");
var pauseTime = mediaElement.currentTime;
mediaElement.load(); 
```

基本上，加载方法会重新加载视频，以便您的海报再次可见。

游戏活动中：

```
mediaElement.currentTime = pauseTime;
mediaElement.play(); 
```

请注意，pauseTime 变量需要在范围内或作为参数传递给暂停/播放事件侦听器函数。

# activemq - 即使端口 61616 上没有运行任何东西，Activemq 也没有运行

> ID：15777216
> 
> 赞同：2
> 
> 时间：2013-04-03T01:11:18.520
> 
> 标签：activemq

嗨，我在我们的项目中使用 activemq，每次我在本地网络中运行 activemq，但即使端口 61616 上没有运行任何东西，我总是会收到此错误

2013-04-03 08:48:28,139 | 错误 | 无法启动 Apache ActiveMQ (localhost, ID:batag-1562-1364950107650-0:1)。原因：java.io.IOException：无法在 JMX 中注册传输连接器：无法绑定到服务器套接字：tcp://0.0.0.0:61616?maximumConnections=1000&wireformat.maxFrameSize=104857600 由于：java.net.BindException：地址已在使用：JVM_Bind | org.apache.activemq.broker.BrokerService | main java.io.IOException：无法在 JMX 中注册传输连接器：无法绑定到服务器套接字：tcp://0.0.0.0:61616?maximumConnections=1000&wireformat.maxFrameSize=104857600 由于：java.net.BindException：地址已在使用：JVM_Bind

我在其他路由器上测试过，有时它确实有效，但大多数时候我都会收到此错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-03T08:52:24.837

我遇到了同样的问题，netstat 没有显示任何内容。

解决方案是禁用“Internet 连接共享”服务。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-18T10:06:36.953

转到控制面板->查看网络连接->右键单击您连接的网络，然后单击属性。

出现一个新的弹出窗口。在该窗口中选择共享选项卡并禁用网络共享。

会自动释放 61616 端口。你可以启动activemq

# c# - 如何在 C# 中针对 Odata 源向 LINQ 查询动态添加过滤器

> ID：15777219
> 
> 赞同：4
> 
> 时间：2013-04-03T01:12:04.440
> 
> 标签：c#, linq, wcf-data-services, odata

我有如下查询

```
var query = (from x in NetworkDevices
where   
x.Name == "blabla1" ||
x.Name == "blabla2" 
select x ); 
```

我正在针对 Odata 端点运行它，因此它有效地被翻译成以下 URL

```
https://targetserver/endpoint.svc/NetworkDevices()?$filter=Name eq 'blabla1' or Name eq 'blabla2' 
```

所以我想动态添加很多过滤器......在C＃中我可以继续将它添加到我的查询中，但这不是动态的。我想在运行时这样做。如果我是从 Javascript 调用它，那么我也可以轻松地更新 URL。

我的问题是，在 C# 中，我如何将这些过滤器动态添加到 where 子句。

在普通的旧 LINQ（如 linq 2 对象）中，我可以做这样的事情。

```
var machines = new string[] { "blabla1" , "blabla2" } ;
res1.Where ( x => machines.Contains(x.Name) ).ToArray() 
```

这会起作用，但这对 Odata 端点不起作用，因为我收到这样的错误。

不支持“包含”方法

所以我认为唯一的方法是动态地编辑表达式树或添加这些过滤器的东西。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T18:11:28.573

在其他一些链接之后，我发现了几个选项。一种是动态创建很快就陷入泥潭的表达式树，另一种是手动构建$filter。但是并使用 .AddQueryOption() 添加它。但是，如果查询中已经有其他 where 子句，这会中断，因为生成的 URL 现在有两个 $filter 条目。所以我要做的是获取我的原始查询，然后获取 URL 和查询字符串并获取 $filter ，然后然后如果它存在添加我自己的动态内容并运行一个新查询。这是一个演示（在 linqpad 中运行）

```
//Grab original query as a DataServiceQuery
DataServiceQuery<NetworkDevice> originalquery = (DataServiceQuery<NetworkDevice>) 
    (from x in NetworkDevices
    where   
    x.Type == "switch"
    select x);
//Get the HTTP QueryString
var querystr = (originalquery).RequestUri.Query;
var filter = System.Web.HttpUtility.ParseQueryString(querystr)["$filter"];

/* Create our own dynamic filter equivilant to 
    x.Name == "x" ||
    x.Name == "y" 
*/
string[] names = { "device1", "device2" };
StringBuilder sb = new StringBuilder();
sb.Append("(");
foreach (string s in names)
{
    sb.Append(String.Format("Name eq '{0}'",s));
    sb.Append(" or ");
}
sb.Remove(sb.Length - 4, 4);
sb.Append(")");
var dynamicfilter = sb.ToString();
// If there was an original filter we'll add the dynamic one with AND , otherwise we'll just use the dynamicone
var newfilter = dynamicfilter;
if ( filter != null && filter.Trim() != string.Empty )
{
newfilter = filter + " and " + newfilter;
}
newfilter.Dump();

var finalquery = 
    (from x in NetworkDevices.AddQueryOption("$filter",newfilter)
    select x).Take(50);

finalquery.Dump(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:57:12.723

这是我用来将 Contains 转换为 OrElse 的 ExpressionVistor 示例：

```
 public class WhereContainsTreeModifier : ExpressionVisitor
    {
        private Expression TranslateContains(LambdaExpression lambda)
        {
            var methodCall = lambda.Body as MethodCallExpression;
            var member = methodCall.Object as MemberExpression;
            var objectMember = Expression.Convert(member, typeof(object));
            var getterLambda = Expression.Lambda<Func<object>>(objectMember);
            var getter = getterLambda.Compile();

            var list = (IEnumerable)getter();

            Expression result = null;
            foreach (object item in list)
            {
                var equal = Expression.Equal(methodCall.Arguments[0], Expression.Constant(item));
                if (result == null)
                    result = equal;
                else
                    result = Expression.OrElse(result, equal);
            }

            result = Expression.Lambda(lambda.Type, result, lambda.Parameters);
            return result;
        }

        protected override Expression VisitLambda<T>(Expression<T> node)
        {
            if ((node.Body as MethodCallExpression).Method.Name == "Contains")
                return TranslateContains(node);
            else
                return node;
        }
    } 
```

# javascript - 遍历嵌套数组

> ID：15777224
> 
> 赞同：0
> 
> 时间：2013-04-03T01:12:36.833
> 
> 标签：javascript

```
var map = [
        ["Blank", "Blank", "Blank"],
        ["Blank", "Player", "Blank"],
        ["Blank", "Blank", "Blank"]
]; 
```

我在遍历数组时遇到问题。这里主要是这个功能。假设在矩阵中将“播放器”向下移动一个。

当玩家的位置在顶部时，我尝试“玩家”的所有内容总是会下降到最后一行。我也遇到了奇怪的越野车问题。有时我根本不会更改代码（或者至少我是这么认为的）。然后代码不会有这个问题，然后它会再次出现。同样，现在我无法让“播放器”向左移动，然后再向中间移动。我将在最后展示该函数的代码。感谢您尝试提供帮助。

```
function moveDown() {
        for (y = map.length - 1; y >= 0 ; y--) {
            for (x = map[y].length - 1; x >= 0; x--) {
                var posX = map[y].indexOf("Player");

                if (posX > -1 && y == 0) {
                    map[1].splice(posX, 1,"Player");
                    map[y].splice(posX, 1,"Blank");
                    return;
                } else if (posX > -1 && y == 1) {
                    map[2].splice(posX, 1,"Player");
                    map[y].splice(posX, 1,"Blank");
                    return;
                } else if (posX > -1 && y == 2) {
                    return;
                }
            }
        }

    } 
```

这是我所有的代码。如果你没有时间，不要全部阅读。我现在的主要问题是 moveDown() 函数。（我认为）

```
var map = [
        ["Blank", "Blank", "Blank"],
        ["Blank", "Player", "Blank"],
        ["Blank", "Blank", "Blank"]
];

var run = true;

menu();
printLoop(map);

while (run) {
    var input = prompt();

    if (input == "left") {
        movePlayer("left");
    } else if (input == "right") {
        movePlayer("right");
    } else if (input == "up") {
        movePlayer("up");
    } else if (input == "down") {
        movePlayer("down");
    }

    switch (input) {
      case "menu":
        menu(); break;
      case "quit": 
        run = false; break;
    }
    menu();
    printLoop(map);
}

function movePlayer(direction) {
    for (y=0; y<map.length; y++) {
        var playerPos = map[y].indexOf("Player");

        if (movableRight(playerPos)) {
            if (direction == "right") {
                map[y].splice(playerPos, 1,"Blank");
                map[y].splice(playerPos + 1, 1,"Player");
            }
        } else if (movableLeft(playerPos)) {
            if (direction == "left") {
                map[y].splice(playerPos, 1,"Blank");
                map[y].splice(playerPos - 1, 1,"Player");
            }
        }

        if (direction == "up") {
            moveUp();
        } else if (direction == "down") {
            moveDown();
        }

    }

}

/*function getX(obj) {
    for (x = 0; x < map.length; x++) {
        for (y = 0; y < map[x].length; y++) {
            if (map[x][y] == obj) {
                return x;
            }
        }
    }
}

function getY(obj) {
    for (x = 0; x < map.length; x++) {
        for (y = 0; y < map[x].length; y++) {
            if (map[x][y] == obj) {
                return y;
            }
        }
    }
}*/

function movableLeft(pos) {
    if (pos <= 0) {
        console.log(pos + "<= 0");
        return false;
    } else if (pos > map.length - 1) {
        console.log(pos + "> map.length - 1");
        return false;
    } else {
        console.log(pos + "true");
        return true;
    }
}

function movableRight(pos) {
    if (pos < 0) {
        return false;
    } else if (pos >= map.length - 1) {
        return false;
    } else {
        return true;
    }
}

function moveUp() {
    for (y = 0; y < map.length; y++) {
        for (x = 0; x < map[y].length; x++) {
            var posX = map[y].indexOf("Player");
                if(posX > -1) {
                    switch (y) {
                        case 1:
                            map[0].splice(posX, 1,"Player");
                            map[y].splice(posX, 1,"Blank");
                            break;
                        case 2:
                            map[1].splice(posX, 1,"Player");
                            map[y].splice(posX, 1,"Blank");
                }
            }
        }   
    }

}

function moveDown() {
    for (y = map.length - 1; y >= 0 ; y--) {
        for (x = map[y].length - 1; x >= 0; x--) {
            var posX = map[y].indexOf("Player");

            if (posX > -1 && y == 0) {
                map[1].splice(posX, 1,"Player");
                map[y].splice(posX, 1,"Blank");
                return;
            } else if (posX > -1 && y == 1) {
                map[2].splice(posX, 1,"Player");
                map[y].splice(posX, 1,"Blank");
                return;
            } else if (posX > -1 && y == 2) {
                return;
            }
        }
    }

}

function printLoop(array) {
    var line0 = "";
    var line1 = "";
    var line2 = "";

    for (y = 0; y < array.length; y++) {
        for (x = 0; x < array[y].length; x++) {
            switch (y) {
                case 0:
                    line0 += array[y][x] + ", "; break;
                case 1:
                    line1 += array[y][x] + ", "; break;
                case 2:
                    line2 += array[y][x] + ", "; break;
            }
        }
    }
    console.log(" ");
    console.log(line0);
    console.log(line1);
    console.log(line2);
    console.log(" ");

}

function menu() {
    console.log("===============================");
    console.log("up - down - right - left - quit");
    console.log("===============================");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:35:21.200

除非我误解了你的问题，否则你把事情复杂化了。这就是你所需要的：

```
function moveDown() {
    for (y = 0; y < map.length; y++) {
        var posX = map[y].indexOf("Player");
        if (posX < 0) continue;
        if ( y == map.length-1 ) break;

        map[y][posX] = "Blank";
        map[y+1][posX] = "Player";
        break;
    }
} 
```

遍历顶层数组，直到找到包含播放器的行。然后，一旦你找到了播放器，如果它已经在底部，你就完成了。否则，用 覆盖它`"Blank"`，并用 覆盖下一行中的相应位置`"Player"`。

# php - 与正则表达式匹配的链接

> ID：15777225
> 
> 赞同：0
> 
> 时间：2013-04-03T01:12:38.050
> 
> 标签：php, regex

我想将链接与正则表达式匹配，直到第一个空格或`<`发生。我试过这个正则表达式

```
\b(((http|ftp)(.)?\:\/\/)?(www\.)?example\.com([^\s|<]+)?)\b 
```

但是这个正则表达式的问题是它也是匹配`example.com.au`的。所以我想匹配什么

```
example.com                      // match
example.com/somelink/link        // match

example.com.au                   // do not match
example.com.au/somelink/link     // do not match 
```

匹配到第一个空格或`<`发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:40:52.050

[这是一个匹配http://example.com/whatever](http://example.com/whatever)但不匹配[http://example.com.au/whatever](http://example.com.au/whatever)的解决方案。

```
/\b(((http|ftp)(.)?:\/\/)?(www\.)?example\.com(?!\.[\w\d])(\/[^\s<]*)?)\b/ 
```

对此文本进行了测试：

```
Match http://example.com/ but not http://example.com.au
This is a sentence about http://example.com/.
http://example.com<
http://example.com/asdf.asdf.asdf/ asdf
http://example.computer 
```

它使用否定前瞻来明确排除 example.com 后跟`\.[\w\d]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:23:34.983

告诉它你不想匹配 .com 之后的任何点

```
\b(((http|ftp)(.)?\:\/\/)?(www\.)?example\.com([^\s|<|\.]+)?)\b 
```

或者变得更聪明，告诉它如果 .com 后面有任何内容，您希望在 .com 后面加上正斜杠

```
\b(((http|ftp)(.)?\:\/\/)?(www\.)?example\.com(\/[^\s|<]+)?)\b 
```

# qt5 - 我可以在 windows 上用 intel 编译器编译 qt 5.0 吗？

> ID：15777227
> 
> 赞同：1
> 
> 时间：2013-04-03T01:12:39.210
> 
> 标签：qt5, icc

我正在尝试使用 Windows 上的英特尔编译器从源代码编译 Qt 5.0.1。这样的事情可能吗？我在任何地方都看不到如何为任何平台选择编译器，更不用说窗口了。

我看过这里：

[从 git 构建 Qt5](http://qt-project.org/wiki/Building_Qt_5_from_Git)

和这里：

[Qt 论坛](http://qt-project.org/forums/viewthread/25719)

在其他地方中，但这两个是我最接近答案的地方。

# php - 重命名网址 .htaccess

> ID：15777229
> 
> 赞同：0
> 
> 时间：2013-04-03T01:12:43.460
> 
> 标签：php, .htaccess, mod-rewrite

我在使用 mod-rewrite 重写这些 url 时遇到问题：

```
mywebsite.com/index.php?page=folder/file
mywebsite.com/index.php?page=folder/file&id=10 
```

进入这些

```
mywebsite.com/file
mywebsite.com/file/10 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:31:35.560

你想要类似的东西

```
#With mod_rewrite
RewriteEngine on
RewriteRule   ^/file/(.+)  /index.php?page=folder/file&id=$1 [R,L]
RewriteRule   ^/file       /index.php?page=folder/file [R,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:40:09.283

> `mywebsite.com/index.php?page=folder/file`
> `mywebsite.com/index.php?page=folder/file&id=10`
> 进入这些
> `mywebsite.com/file`
> `mywebsite.com/file/10`

目前尚不清楚*文件夹*是固定字符串还是*文件*所在的目录，因此在此答案中假定为固定字符串，因为两种情况下的目录都是根目录。

您可以在根目录的一个 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  !index\.php  [NC]
RewriteRule  ^([^/]+)/?$  /index.php?page=folder/$1 [L,NC]

RewriteCond %{REQUEST_URI}  !index\.php  [NC]
RewriteRule  ^([^/]+)/([^/]+)/? /index.php?page=folder/$1&id=$2  [L,NC] 
```

静默地图：

`http://mywebsite.com/file`到
`http://mywebsite.com/index.php?page=folder/file`

和

`http://mywebsite.com/file/10`到
`http://mywebsite.com/index.php?page=folder/file&id=10`

其中字符串**文件**和**10**被假定为动态的。

对于永久重定向，将 [L,NC] 替换为 [R=301,L,NC]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:38:38.437

你的意思是你想重写而不是重定向`mywebsite.com/$var`到`mywebsite.com/index.php?page=folder/$var`和`mywebsite.com/$var1/$var2`到`mywebsite.com/index.php?page=folder/$var1&id=$var2`？你可以检查这个：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^([a-z0-9-_]+)$ /index.php?page=folder/$1

RewriteRule ^([a-z0-9-_]+)/([a-z0-9-_]+)$ /index.php?page=folder/$1&id=$2 
```

# bash - 如何从 bash 变量中回显/打印特定行

> ID：15777232
> 
> 赞同：9
> 
> 时间：2013-04-03T01:13:23.740
> 
> 标签：bash, variables, debian

我正在尝试从多行 bash 变量中打印特定行。我发现了以下内容：

```
while read line; do echo LINE: "$line"; done <<< "$x" 
```

其中 x 将是变量，但这只是打印出所有行而不是单个行（例如第 1 行）。我该如何调整它以打印出特定的行而不是所有行？（希望避免将变量写入文件）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T01:14:38.340

打印第 N 行：

```
sed -n ${N}p <<< "$x" 
```

或（更便携）：

```
sed -n ${N}p << EOF
$x
EOF 
```

或者

```
echo "$x" | sed -n "$N"p 
```

或者

```
echo "$x" | sed -n ${N}p 
```

或（对于特定情况 N==3）

```
echo "$x" | sed -n 3p 
```

或者

```
while read line; do echo LINE: "$line"; done <<< "$x" | sed -n ${N}p 
```

或者

```
while read line; do echo LINE: "$line"; done << EOF | sed -n ${N}p
$x
EOF 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-03T01:18:43.250

您可以将其拆分为一个数组，例如：

```
IFS=$'\n' lines=($x) 
```

然后您可以通过索引数组来访问任何行，例如：

```
echo ${lines[1]} 
```

（当然`lines[0]`是“第 1 行”）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T01:46:28.713

如果您出于某种原因不想使用数组，并且想在 bash 中执行此操作而不是通过生成像 之类的外部工具`sed`，则可以简单地计算行数：

```
[ghoti@pc ~]$ x=$'one\ntwo\nthree\nfour\nfive\n'
[ghoti@pc ~]$ n=3
[ghoti@pc ~]$ for (( c=0; c<n; c++ )); do read line; done <<< "$x"
[ghoti@pc ~]$ echo $line
three
[ghoti@pc ~]$ 
```

或者少用一个变量：

```
[ghoti@pc ~]$ n=2
[ghoti@pc ~]$ for (( ; n>0; n-- )); do read line; done <<< "$x"
[ghoti@pc ~]$ echo $line
two 
```

这些方法使用有时称为“循环的三个表达式”的东西。这是一种在许多语言中都很常见的结构，从 bash 到 awk 到 perl 到 PHP 到 C（但不是 Python！）。了解它们将有助于您的编程。

虽然......您可能不想使用 bash 来学习“真正的”编程。:-)

# javascript - 加载时的 Google Map Geocoding API

> ID：15777237
> 
> 赞同：0
> 
> 时间：2013-04-03T01:13:57.760
> 
> 标签：javascript, google-maps

我正在寻找调整此处找到的示例谷歌地图代码[https://developers.google.com/maps/documentation/javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding)以便在页面加载时对地址进行地理编码。所以没有更多的固定坐标（已经从我的视图文件中加载）并且应该在没有人工交互的情况下自行进行地理编码

```
var geocoder;
var map;
function initialize() {
  geocoder = new google.maps.Geocoder();
  var latlng = new google.maps.LatLng(-34.397, 150.644);
  var mapOptions = {
    zoom: 8,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
}

function codeAddress() {
  var address = document.getElementById("address").value;
  geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      map.setCenter(results[0].geometry.location);
      var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
    });
    } else {
    alert("Geocode was not successful for the following reason: " + status);
    }
  });
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:29:03.777

不知道你在这里问什么。如果您希望在页面显示时对地址进行地理编码，则`#address`元素中需要有一个值：

```
<input type="text" id="address" value="1600 Pennsylvania Ave NW  Washington, DC 20500"> 
```

...然后您只需在函数中调用`initialize()`and`geocode()`函数`window.onload`：

```
window.onload = function() {
    initialize();
    codeAddress();
} 
```

这是一个 jsFiddle 演示：http: [//jsfiddle.net/fYbqe/](http://jsfiddle.net/fYbqe/)

**编辑**更新了 jsFiddle，使其更容易使用自定义地址：http: [//jsfiddle.net/fYbqe/1/](http://jsfiddle.net/fYbqe/1/)

# session - 使用Tomcat编程websocket时如何在函数createWebSocketInbound()中获取会话

> ID：15777240
> 
> 赞同：1
> 
> 时间：2013-04-03T01:14:24.250
> 
> 标签：session, tomcat, websocket

众所周知，函数 createWebSocketInbound(String subprotocol, HttpServletRequest request) 有 2 个参数。

但是，当我使用此功能时，我无法使用从参数“request”登录时输入的用户信息进行会话。相反，当我使用 request.getSession() 时，我得到一个没有任何内容的新会话......我可以做些什么来获取请求中的用户登录信息，或者如何将我的登录信息传递给这个函数？

我的代码：

```
@WebServlet(urlPatterns = { "/websocket"})
public class WebSocketWebSocketServlet extends WebSocketServlet {

private static final long serialVersionUID = 1L;

private AdminBean chatter;  //Login information

public void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    Object obj = request.getAttribute("admin");  //obj turns out to be null ...
    super.doGet(request, response);
}

@Override
protected StreamInbound createWebSocketInbound(String subProtocol,HttpServletRequest request) {
    System.out.println("Create a new Instance of WebSocketServlet");
    HttpSession session = request.getSession();
    this.chatter = (AdminBean) session.getAttribute("LoginUser"); //chatter turns out to be null ...
    Object obj = request.getAttribute("admin");  //obj turns out to be null ...
    return new WebSocketMessageInbound(chatter);
} 
```

}

# arrays - Matlab在parfor中为数组索引乘以迭代器 - 切片

> ID：15777241
> 
> 赞同：1
> 
> 时间：2013-04-03T01:14:25.387
> 
> 标签：arrays, matlab, indexing, iterator, parfor

是否可以切片第 3 行 (tt)？这段代码被简化了，但问题是相似的。我在数组索引中使用了乘法迭代器 (3*i)，但是它不起作用。也许有可能以某种方式改变它。

```
parfor i = 1 : NE      
   tmp = i * [1, -1; -1, 1];                 
   tt(3*i-1:3*i+1) = tmp([3,2,4]);          
   pp(i) = tmp(1,1,i);   
end; 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:34:54.903

要成为[切片输出变量](http://www.mathworks.co.uk/help/distcomp/advanced-topics.html#bq_of7_-1)，`tt`必须仅使用循环变量`i`和其他常数项（包括`:`）进行索引。也许您可以制作`tt`矩形，一次分配一整列，然后再重新整形，如下所示：

```
tt = zeros(3, 10);  
parfor ii = 1:10
  tt(:, ii) = [ii; ii; ii];
end
tt = reshape(tt, 1, numel(tt)); 
```

# android - 在 OpenGL ES 中，如何将绘图“剪辑”到矩形？

> ID：15777244
> 
> 赞同：1
> 
> 时间：2013-04-03T01:14:41.157
> 
> 标签：android, graphics, opengl-es, 2d, culling

我正在开发一个使用单个 OpenGL ES 实例的 Android 应用程序。在某些情况下，我会在其他所有内容之上绘制一个自定义（矩形）对话框，其中包含滚动文本、线条等。对话框不会占据整个屏幕，并且我绘制的内容*大于*对话框，其中在对话框中滚动，就像一个选框。

当然，由于我*最后*绘制了这个对话框（在所有其他视图的顶部），所以我绘制的所有顶点都将是可见的，但我想告诉 OpenGL*不要*在对话框矩形之外绘制任何渲染命令。像这样...

![剔除为矩形](https://i.stack.imgur.com/GHhL1.png)

我的大部分绘图都是`glDrawArrays(...)`使用`FloatBuffer`数组完成的。我想要的是一种向 OpenGL 指定我希望*任何*绘图在指定区域之外不可见的方法。

我对剔除了解不多，但这似乎与我正在寻找的东西非常相关。但是，剔除似乎只是为了跳过在 3D 中从相机视图中“看到”的三角形的绘制，而我想“跳过”在视口内任意矩形之外的任何三角形的绘制.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T01:32:20.860

如果您知道如何将纹理保存为类参考，则可以使用它，并且当您来回滚动或任何可以更改其中的参数时

```
public class TextureRegion {    
public final float u1, v1;
public final float u2, v2;
public final Texture texture;

public TextureRegion(Texture texture, float x, float y, float width, float height) {
    this.u1 = x / texture.width;
    this.v1 = y / texture.height;
    this.u2 = this.u1 + width / texture.width;
    this.v2 = this.v1 + height / texture.height;        
    this.texture = texture;
}
} 
```

# html - 防止菜单列表换行

> ID：15777246
> 
> 赞同：-1
> 
> 时间：2013-04-03T01:14:53.063
> 
> 标签：html, css

嗨，我用 CSS 和 HTML 制作了一个简单的导航栏。我需要它完全水平唯一的问题是如果你放大它开始四处移动。请参见下面的示例。只是想知道如何阻止这种情况。另外，我如何将文本放在框的中间？正如你所看到的，它在靠近顶部的中间位置上方一点。谢谢您的帮助

这是示例 [http://jsfiddle.net/NfHFH/](http://jsfiddle.net/NfHFH/)

CSS：

```
ul {
    list-style-type:none;
    margin:0;
    padding:0;
    overflow:hidden;
}
li {
    float:left;
}
a:link, a:visited {
    display:block;
    width:155px;
    height: 60px;
    font-weight:bold;
    color:#FFFFFF;
    background-color:#98bf21;
    text-align:center;
    padding:4px;
    text-decoration:none;
    text-transform:uppercase;
}
a:hover, a:active {
    background-color:#7A991A;
} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:19:50.760

`<ul>`如果您不希望它环绕，您需要设置它的宽度。

```
ul
{
    width:820px;
} 
```

要使文本居中，设置`line-height`为与`height`

```
a:link,a:visited
{
    line-height: 60px;
} 
```

[jsFiddle](http://jsfiddle.net/dnVNd/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:22:05.390

或者设置一个有宽度的容器。

```
.wrapper {
 width:800px   

} 
```

[http://jsfiddle.net/h4CHr/](http://jsfiddle.net/h4CHr/)

# java - jtextarea 鼠标事件覆盖容器鼠标事件

> ID：15777247
> 
> 赞同：0
> 
> 时间：2013-04-03T01:15:07.373
> 
> 标签：java, swing, resize, mouseevent, jtextarea

这是我的问题：我有一个 jpanel，里面有三个面板。垂直分隔面板、聊天输入面板和聊天输入面板。主jpanel，chatpanel，实现mousemotionlistener，代码如下：

```
 public void mouseMoved(MouseEvent e) {
   int y = e.getY();

   //change cursor look if hovering over vertical spacer
   if(y >= (int)(verticalPanelSeperator.getLocation().getY()) && y <=    (int)(verticalPanelSeperator.getLocation().getY() + verticalPanelSeperator.getHeight())) {
       setCursor(Cursor.getPredefinedCursor(Cursor.N_RESIZE_CURSOR));
   }
   else {
       setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR ));
   }
}

public void mouseDragged(MouseEvent e) {
//vertical spacer can be draged up/down to change height of input/output areas
    if(getCursor().getType() == Cursor.getPredefinedCursor(Cursor.N_RESIZE_CURSOR).getType()) {
        int edge = (int)this.getLocation().getY();
        int cur = e.getY();
        int height = this.getHeight();
        output.setHeightPercent((((double)(cur-edge))/height));
        output.componentResized(new ComponentEvent(this, 1));
        input.setHeightPercent((((double)(height-cur-edge))/height));
        input.componentResized(new ComponentEvent(this, 2));
        e.consume();
    }
} 
```

问题是，由于某种原因，当您将鼠标移动到垂直面板分隔符上时，它会变为调整大小的光标，但是当您向上移动它时，无需拖动，它就会保持为调整大小的光标。此外，从打印语句来看，当鼠标向上进入聊天输出时，e.getY() 的值不会增加，它保持在垂直分隔面板的范围内。它就像聊天输出默认鼠标监听器覆盖了聊天面板上的鼠标监听器并且什么都不做。有人可以告诉我这里发生了什么以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:25:45.767

A`MouseListener`只会响应其容器的鼠标事件，只要没有其他容器在其上方监视鼠标事件。将鼠标事件想象成雨滴。如果你在你和雨滴之间撑起一把伞，雨滴就不会接触到你。

我建议您应该使用`mouseEnter`and `mouseExit`from the `MouseListener`interface 而是直接在`verticalPanelSeperator`

# less - 在 less 中为选择器使用变量名

> ID：15777257
> 
> 赞同：26
> 
> 时间：2013-04-03T01:16:29.930
> 
> 标签：less

有没有办法使用变量名来存储选择器并使用它？

```
#master #leftcontent div,
#master #rightcontent div{
    background-color: #fff;    
}

#master #leftcontent a,
#master #rightcontent a{
    color:blue;    
} 
```

是否可以将#master #leftcontent 存储在变量中并引用它

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-03T10:45:04.167

## 是的，这可以做到

这适用于 LESS 1.3.1+。您可以更改字符串，但这只是可以完成的一种方式的示例：

**较少的**

```
@selector1: ~'#master';
@selector2: ~'@{selector1} #leftcontent';
@selector3: ~'@{selector1} #rightcontent';

@{selector2} div,
@{selector3} div { 
   background-color: #fff; 
}

@{selector2} a,
@{selector3} a { 
   color: blue; 
} 
```

**CSS 输出**与您在问题中显示的完全一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-03T18:16:00.793

如果您来到这里希望将媒体查询选择器放在一个较少的变量中（这就是我来到这里的方式），您可以这样做：

```
@phone-width: 600px;
@phone: ~"screen and (max-width: @{phone-width})";

@media @phone {
  background-color: white;
} 
```

# unix - 如何在磁盘空间限制内解压大型 tarball 文件？

> ID：15777258
> 
> 赞同：2
> 
> 时间：2013-04-03T01:16:30.303
> 
> 标签：unix, gzip, tar

我们需要从包含 30 多个文件的 tarball 文件中提取 5 个文件，并在解压后扩展至大约 60 GB。不幸的是，我们的机器上只有大约 20 GB 的可用空间。所需的五个文件解压后只需大约 5 GB。

有没有办法在我们的磁盘空间限制内只提取这五个文件？

使用`tar xvjf <archive> <file>`似乎不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:10:03.580

GNU tar 具有从 tarball中[删除元素的功能。](http://www.gnu.org/software/tar/manual/tar.html#SEC64)从理论上讲，这将允许您将 tarball 缩减为您需要的 5 个文件。此功能被描述为很慢，并且在这样大小的 tarball 上，可能非常慢。如果您没有 tarball 的备份，这不是您想尝试的。

从 GNU tar 的手册中复制的是这个例子：

> 要从“practice”目录中的存档“collection.tar”中删除文件“blues”的所有版本，请确保您位于该目录中，然后，
> 
> ```
> $ tar --list --file=collection.tar
> blues
> folk
> jazz
> rock
> $ tar --delete --file=collection.tar blues
> $ tar --list --file=collection.tar
> folk
> jazz
> rock 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-12T03:41:04.737

在本地服务器上：nc server 9999 | 焦油 -zxvf -

在远程服务器上：nc -l 9999 < yourfile.tar.gz

# jquery - jquery scroll function issue in webkit

> ID：15777265
> 
> 赞同：0
> 
> 时间：2013-04-03T01:18:02.217
> 
> 标签：jquery

This fires a jquery function when the page is 300px from the bottom, works fine in firefox but in webkit browsers like chrome, it fires after scrolling even 1 pixel.

```
$(document).ready(function() {
    var timeout = '';

    var $scollEl=$('body').scroll(function (e) { 
        var intBottomMargin = 500; 
        clearTimeout(timeout);
        //if less than intBottomMargin px from bottom 

        if ($scollEl.scrollTop() >= $(document).height() - $scollEl.height() - intBottomMargin) {
          timeout = setTimeout(function(){ 
                $("#next-paginav")[0].click(); 
          }, 300);
        }
    });
}); 
```

Here's a jsfiddle of the code. [http://jsfiddle.net/LnmsR/2/](http://jsfiddle.net/LnmsR/2/)

Try in chrome - fires immediately, then in firefox it fires at the bottom, like it should. What exactly is the bug here and does anyone know how to make this work in webkit?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:24:18.853

I use this code

```
$(window).scroll(function() {
    if ($(document).height()-$(window).height()-$(window).scrollTop() < 300) {
        // your code
    });
}); 
```

# jpa - populate the master-detail table at the same time from JPA

> ID：15777267
> 
> 赞同：1
> 
> 时间：2013-04-03T01:18:10.573
> 
> 标签：jpa

I have a bidirectional entity similar like the one in hibernate example: [http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-association](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-association)

```
@Entity
public class Troop {
    @OneToMany
    @JoinColumn(name="troop_fk") //we need to duplicate the physical information
    public Set<Soldier> getSoldiers() {
    ...
}

@Entity
public class Soldier {
    @ManyToOne
    @JoinColumn(name="troop_fk", insertable=false, updatable=false)
    public Troop getTroop() {
    ...
} 
```

Now I need save all the records into 2 tables through a JSON like this:

```
{
  "TroopName": "ABC", 
  "Soldiers": [{"Name":"Jack", "Age": "40"}, {"Name":"TOM", "Age": "30"}]
} 
```

It will insert 1 record in the troop table and 2 records in soldier table which works fine. The only problem is in the soldier the foreign key is missing. I think it might relate to the troop.Id is not generated when the soldier table get populated. How can I populate this id to the soldier then?

I am using spring mvc + spring roo + json support

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:52:06.343

自我回答：问题是 Spring Roo 生成 AspectJ 代码来设置士兵而不设置反向引用（尽管我已经指定它是双向关系）。所以我必须自己添加它。

```
public void Troop.setSoldiers(Set<Soldier> soldiers) {
    this.soldiers= soldiers;  // spring roo only generate this line!

    // I add the following segment:
    for(Soldier soldier: soldiers) {
        soldier.setTroop(this);
    }
} 
```

# html - iOS offline app html5, google maps not loading on app, just on safari

> ID：15777273
> 
> 赞同：1
> 
> 时间：2013-04-03T01:18:56.703
> 
> 标签：html, google-maps, ios6, mobile-safari, offlineapps

so i have a web app, when i save to iphone the google maps, sometimes load, but not every time, using safari on iphone it`s always loading.

the manifest file content:

```
CACHE MANIFEST
favicon.ico
index.html
enviar-imagens.php
css/mobile.css
css/upload-style.css
images/logo-mobile.png
js/jquery.maskMoney.js
js/jquery.maskedinput-1.3.js
test.js
js/jquery.min.js
images/inicial_retina.png

NETWORK:
*
anunciar-passo2.php
https://maps.googleapis.com/
http://maps.gstatic.com/
http://maps.google.com/
http://maps.googleapis.com/
http://mt0.googleapis.com/
http://mt1.googleapis.com/
http://mt2.googleapis.com/
http://mt3.googleapis.com/
http://khm0.googleapis.com/
http://khm1.googleapis.com/
http://cbk0.googleapis.com/
http://cbk1.googleapis.com/
http://www.google-analytics.com/
http://gg.google.com/ 
```

The page with map:

```
<script src="https://maps.googleapis.com/maps/api/js?key=(mykey)&v=3.exp&sensor=true"></script>

    <script type="text/javascript">

      var map;

      function initialize() {
        var mapOptions = {
          zoom: 18,
          panControl: true,
             zoomControl: true,
             scaleControl: true,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);

 //Delay customizations until the map has loaded
    var element = document.createElement('script');
    element.src = 'test.js';
    element.type = 'text/javascript';
    var scripts = document.getElementsByTagName('script')[0];
    scripts.parentNode.insertBefore(element, scripts);

      }

 google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
```

I'm also using php no-cache on this page. Using pc browser always works, just on mobile offline app the map sometimes not load.

I tryed this configs [http://blogs.missouristate.edu/web/2010/05/12/google-maps-api-v3-developing-for-mobile-devices/](http://blogs.missouristate.edu/web/2010/05/12/google-maps-api-v3-developing-for-mobile-devices/) with no success

the mime.types is with manifest config.

# python - 为什么 gevent.spawn 在调用 Greenlet.join 之前不执行参数化函数？

> ID：15777274
> 
> 赞同：9
> 
> 时间：2013-04-03T01:18:57.867
> 
> 标签：python, asynchronous, gevent

我想发出一个异步 HTTP POST 请求`gevent`——我不关心响应，我只是想尽快执行请求。但是，每当我尝试使用`gevent.spawn`时，请求永远不会执行。我知道这一点，因为在从always 返回的那个上调用`.ready()`or`.successful()`方法。`Greenlet``gevent.spawn``False`

但是，Greenlet*已经*启动，因为如果我调用`glet = gevent.spawn(...)`, then `glet.start()`，我会收到一条错误消息`AssertionError: Greenlet already started`。

我得到 a 的唯一时间`glet.ready() == True`是当我打电话时`glet.join()`，但这是一个阻塞操作。我怎样才能让 Greenlet 在不等待它完成的情况下执行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T01:26:56.477

由于greenlet 是合作的，因此您的新greenlet 在您屈服之前不会运行。调用 spawn 后，调用`gevent.sleep(0)`yield 并且你的 greenlet 应该运行。

它将继续运行，直到它做了一些导致它屈服的事情（比如启动那个 http req）。然后您的其他代码可以再次恢复。

编辑：

为了解决您关于 的问题`grequests`，`grequests.send()`文档说：

```
send(r, pool=None, stream=False)
    Sends the request object using the specified pool. If a pool isn't
    specified this method blocks. Pools are useful because you can specify size
    and can hence limit concurrency 
```

由于您尚未指定池，因此请求会阻止您的 greenlet 完成。换句话说，一旦它返回，greenlet 就已经完成了。要获得响应，请参阅`glt.get()`返回的 greenlet。

# magento - magento - 使用 local.xml 添加和定位块

> ID：15777278
> 
> 赞同：1
> 
> 时间：2013-04-03T01:19:41.533
> 
> 标签：magento, block

我有一个模板

```
 app\design\frontend\base\default\template\dir\template.phtml 
```

看起来像这样

```
<div class='block block-list'>  
    <div class='block-title'><strong><span>Some Block</span></strong></div>
        <div class='block-content'>  
            &nbsp;<?php echo "my content"; ?>
        </div>
    </div> 
```

通过将以下代码添加到 local.xml 文件中，我将块定位在目录页面上。但是，是否可以同时将块定位到列的顶部？

```
 <?xml version="1.0"?>
 <layout version="0.1.0">    
      <catalog_category_default translate="label"> 
       <reference name="right">
         <block  type="core/template" 
            name="somename"
            template="dir/template.phtml" />
      </reference>
     </catalog_category_default>    
 </layout> 
```

跟进[https://stackoverflow.com/posts/15736207/edit](https://stackoverflow.com/posts/15736207/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:16:34.800

用于定位 CMS 块的代码（布局 xml 文件）

```
<block type="cms/block" before="-" name="left.permanent.callout">
<block type="cms/block" before="some-other-block" name="left.permanent.callout">
<block type="cms/block" after="-" name="left.permanent.callout">
<block type="cms/block" after="some-other-block" name="left.permanent.callout"> 
```

使用**before**和**after**属性可以更改块顺序...

`some-other-block`是块的名称属性

[http://www.magentocommerce.com/knowledge-base/entry/controlling-block-order](http://www.magentocommerce.com/knowledge-base/entry/controlling-block-order)

# database - LibreOffice Base 数据库的 Node.js 连接库？

> ID：15777281
> 
> 赞同：0
> 
> 时间：2013-04-03T01:20:04.387
> 
> 标签：database, node.js, hsqldb, libreoffice

我想将 LibreOffice 的数据库应用程序 (Base) 用于我正在编写的小型单用户 Node.js 应用程序。我相信 Base 使用 HSQLDB 后端。我可以使用哪些 Node.js 库来针对 .odb 数据库文件执行 SQL 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:24:20.580

除了 Base 本身，不存在连接和执行针对 .odb 数据库文件的语句的东西。

如果您将 LibreOffice 设置为使用外部 HSQLDB 服务器，这非常简单，那么其他库也可以连接到该服务器。

但据我所知，目前还没有node.js通过JDBC连接的连接模块，HSQLDB支持。

您可能必须使用 Base 连接到 MySQL 服务器并从 node.js 连接到该服务器

# java - 使用 DbUtils BeanListHandler 对可重用 JavaFX 数据检索服务进行通用类型摸索

> ID：15777282
> 
> 赞同：2
> 
> 时间：2013-04-03T01:20:08.953
> 
> 标签：java, generics, javafx-2, javabeans, apache-commons-dbutils

我正在尝试创建一个通用 JavaFX `Service`，该 JavaFX 将使用[DbUtils'](http://commons.apache.org/proper/commons-dbutils/index.html) `BeanListHandler`将`ObservableList`返回给应用程序 GUI 线程。目的是重用它以将许多表加载到不同 bean 类的许多不同列表中。

我遇到的问题是`call()`处理`Task`.

`ICINGBean`是一个抽象类，我处理的所有 bean 都继承自extend。

```
public class StaticDataFetcher extends Service<ObservableList<? extends ICINGBean>> {
    private Class<? extends ICINGBean> beanClass;

    @Override
    protected Task createTask() {
        DataGetter dget = new DataGetter();
        dget.setBeanClass(beanClass);
        return dget;
    }

    public Class<? extends ICINGBean> getBeanClass() { return beanClass; }

    public void setBeanClass(Class<? extends ICINGBean> beanClass) { this.beanClass = beanClass; }
}

class DataGetter extends Task<ObservableList<? extends ICINGBean>> {
    private Class<? extends ICINGBean> beanClass;

    @Override
    protected ObservableList<? extends ICINGBean> call() {
        ObservableList<? extends ICINGBean> staticList;
        staticList = FXCollections.observableArrayList();   
        ResultSetHandler<List<? extends ICINGBean>> handler;
        handler = new BeanListHandler<? extends ICINGBean>(beanClass);
        try {
            List<? extends ICINGBean> resultList;
            resultList = EntryPoint.getQRunner().query("SELECT * FROM ?", handler, beanClass.getSimpleName());
            staticList = FXCollections.observableList(resultList);
        } catch (SQLException ex) {
                Logger.getLogger(DataGetter.class.getName()).log(Level.SEVERE, null, ex);
        }
        return staticList;
    }

    public Class<? extends ICINGBean> getBeanClass() { return beanClass; }

    public void setBeanClass(Class<? extends ICINGBean> beanClass) { this.beanClass = beanClass; }
} 
```

我得到的编译时错误是：

```
.../ICING/src/com/cccg/icing/StaticDataFetcher.java:55: error: unexpected type
            handler = new BeanListHandler<? extends ICINGBean>(beanClass);
                                         ^
  required: class or interface without bounds
  found:    ? extends ICINGBean 
```

我很确定我只是在搞乱仿制药的处理，但我不确定如何。我已经按照DbUtils 示例页面上[列出](http://commons.apache.org/proper/commons-dbutils/examples.html#ResultSetHandler_Implementations)的示例来使用 BeanListHandler，将我认为适合使用泛型类型的地方替换为它，但我对错误一无所知。

非常感谢任何帮助，谢谢！

## 解决了！

在下面 Paul Bellora 的有用建议下，我能够解决这个问题。我为该类声明了一个类型参数，并将其与菱形运算符一起使用。

```
public class StaticDataFetcher<T extends ICINGBean> extends Task<ObservableList<? extends ICINGBean>> {
    private Class<T> beanClass;
    //...

    public StaticDataFetcher(Class<T> beanClass) {
        super();
        this.beanClass = beanClass;
    }

    protected ObservableList<? extends ICINGBean> call() {
        //...
        ResultSetHandler<List<T>> handler;
        handler = new BeanListHandler<>(beanClass);
        //...
    }
} 
```

感谢大家的帮助，我希望这对其他人有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:16:31.673

不允许使用通配符类型参数实例化泛型类型。请参阅我在[此答案](https://stackoverflow.com/a/9147768/697449)中对原因的解释。

一个简单的解决方案是使用[菱形运算符](https://stackoverflow.com/questions/4166966/what-is-the-point-of-the-diamond-operator-in-java-7)（Java 7 及更高版本）：

```
handler = new BeanListHandler<>(beanClass); 
```

如果这不可用，则需要使用通用辅助方法：

```
<T extends ICINGBean> BeanListHandler<T> makeContainer(Class<T> beanClass) {
    return new BeanListHandler<T>(beanClass);
}

...

handler = makeContainer(beanClass); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:58:10.357

[我也在努力让它在Yank](http://xeiam.com/yank.jsp)中正常工作。以下是在 Java 6 中对我有用的方法：

```
public static <T> List<T> queryObjectListSQL(String poolName, String sql, Class<T> type, Object[] params) {

    List<T> returnList = null;

    Connection con = null;

    try {
      con = DB_CONNECTION_MANAGER.getConnection(poolName);

      if (con == null) {
        throw new ConnectionException(poolName);
      }

      con.setAutoCommit(false);

      BeanListHandler<T> resultSetHandler = new BeanListHandler<T>(type);

      returnList = new QueryRunner().query(con, sql, resultSetHandler, params);

      con.commit();

    } catch (Exception e) {
      logger.error(QUERY_EXCEPTION_MESSAGE, e);
      try {
        con.rollback();
      } catch (SQLException e2) {
        logger.error(ROLLBACK_EXCEPTION_MESSAGE, e2);
      }
    } finally {
      DB_CONNECTION_MANAGER.freeConnection(poolName, con);
    }

    return returnList;
  } 
```

完整的源代码在[这里](https://github.com/timmolter/Yank/blob/develop/src/main/java/com/xeiam/yank/DBProxy.java)。上面的代码显然与您的确切示例不同，但您可以看到泛型是如何工作的。这样做的好处是您在调用该方法时根本不需要强制转换。

我希望这会有所帮助。

# java - Error compiling

> ID：15777283
> 
> 赞同：0
> 
> 时间：2013-04-03T01:20:11.340
> 
> 标签：java, jasper-reports

I just opened a "project" I made when I was studying Java some years ago, and although it runs fine, I get these errors and I don't know what they mean:

> warning: [options] bootstrap class path not set in conjunction with -source 1.5 Note: D:***\src\java\reportes\ServletRLineaMunieca.java uses or overrides a deprecated API.
> 
> Note: Recompile with -Xlint:deprecation for details.
> 
> Note: D:***\src\java\reportes\ServletRLineaMunieca.java uses unchecked or unsafe operations.
> 
> Note: Recompile with -Xlint:unchecked for details.
> 
> 1 warning

* * *

This web project includes many files, but I will only paste the one that gives the error:

```
package reportes;

import com.sql.ConectaDb;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.util.HashMap;
import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletRequestWrapper;
import javax.servlet.http.HttpServletResponse;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.JasperRunManager;
import net.sf.jasperreports.engine.design.JasperDesign;
import net.sf.jasperreports.engine.xml.JRXmlLoader;

public class ServletRLineaMunieca extends HttpServlet {

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {

    try {
        HttpServletRequestWrapper srw =
                new HttpServletRequestWrapper(request);
        String fpath = srw.getRealPath("") +
                "/reporte/RLineaMunieca.jrxml";

        JasperDesign jasperDesign =
                JRXmlLoader.load(fpath);
        JasperReport jasperReport =
                JasperCompileManager.compileReport(
                jasperDesign);

        HashMap jasperParameter = new HashMap();
        jasperParameter.put("logo", "http://localhost:8084/tarea/images/logo.jpg");

        Connection cn = new ConectaDb().getConnection();
        byte[] bytes =
                JasperRunManager.runReportToPdf(
                jasperReport, jasperParameter, cn);
        cn.close();

        response.setContentType("application/pdf");
        response.setContentLength(bytes.length);
        ServletOutputStream out =
                response.getOutputStream();
        out.write(bytes, 0, bytes.length);
        out.flush();
        out.close();

    } catch (Exception e) {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<html>");
        out.println("<head><title>Reportes</title></head>");
        out.println("<body>");
        out.println("<pre>");
        e.printStackTrace(out);
        out.println("</pre>");
        out.println("</body>");
        out.println("</html>");
    }

} 

// <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
/** 
 * Handles the HTTP <code>GET</code> method.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    processRequest(request, response);
} 

/** 
 * Handles the HTTP <code>POST</code> method.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    processRequest(request, response);
}

/** 
 * Returns a short description of the servlet.
 * @return a String containing servlet description
 */
@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold> 
```

}

Since I made this a long time ago I have forgotten a lot about Java. Please bear with me, this is also my first time posting here, if my code is pasted wrong please show me how to do it properly.

i forgot to add that this part:

```
String fpath = srw.getRealPath("") + 
```

the getrealpath is strikeout (is that how you say it?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:39:32.147

我已经解决了我的问题，我改变了它：

```
String fpath = srw.getRealPath("") + 
```

至

```
String fpath = srw.getSession().getServletContext().getRealPath("") + 
```

还

```
HashMap jasperParameter = new HashMap(); 
```

至

```
HashMap<String, String> jasperParameter;
jasperParameter = new HashMap<>(); 
```

谢谢大家:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:27:03.023

从 Java 5 开始，如果您使用没有类型说明符的集合（例如，HashMap() 而不是 HashMap()）。这意味着编译器无法使用泛型检查您是否以类型安全的方式使用集合。

要消除警告，只需具体说明您在集合中存储的对象类型。所以，而不是

```
HashMap jasperParameter = new HashMap(); 
```

利用

```
HashMap<String, String> jasperParameter = HashMap<String, String>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:29:57.913

当 Oracle 的好心人因为存在问题或厌倦了更新它而将类或方法退休时，他们会将其标记为 @Deprecated。您正在使用的一种方法是这样标记的。

`javac -Xlint:unchecked myFile.java`将告诉您使用了哪种方法，此时您可以查找有关该方法的 javadoc 并找出它被淘汰的原因以及您是否关心。

你可能不会。例如，如果一个计时器方法因为对夏令时处理不当而被淘汰，那么您的应用程序可能不会以这种缺陷很重要的方式使用它。

在这种情况下，您没有为您的`HashMap` 检查下面的链接添加类型检查以了解泛型如何工作。值得学习，即使它不会改变这个程序的行为。

[http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

# html - JQuery Mobile 和 HTML5 视频标签

> ID：15777284
> 
> 赞同：3
> 
> 时间：2013-04-03T01:20:13.067
> 
> 标签：html, jquery-mobile, video

我正在开发一个以分步教程为中心的视频共享移动网站。我正在使用 JQuery Mobile 并尝试使用 html5 标签嵌入视频。但是，它似乎不起作用。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:06:06.483

理想情况下，您应该有一个 HTML 标签，如下所示

```
<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
Your browser does not support the video tag.
</video> 
```

但一些较旧的 Android 浏览器似乎搞砸了。因此，删除`type`标签并嵌入到您的 html 文件中并检查。如下所示。

```
<video width="320" height="240" controls>
  <source src="movie.mp4">
  <source src="movie.ogg" >
Your browser does not support the video tag.
</video> 
```

# c - Dot product two array

> ID：15777285
> 
> 赞同：1
> 
> 时间：2013-04-03T01:20:13.783
> 
> 标签：c, arrays, vector

Im trying to write a program that take two arrays on different printf input, and then compute the dot product, so far this is where i get, i need help

```
#include <stdio.h>
#include <stdio.h>
#define SIZE 8
float droprod(float x[], float y[], int size[]);

int main()
{
    int i ;
    int Vx[SIZE], Vy[SIZE] ;

    printf("Enter 1st vector (q to quit) ");
    for (i=0;i<SIZE;i++)
    { 
                scanf("%d", &Vx[i]);
    }

    printf("Enter 2nd vector (q to quit) ");
    for (i=0;i<SIZE;i++)
    {
                    scanf("%d", &Vy[i]);
    }

printf("vectors [%d] [[%d] ", Vx[SIZE], Vy[SIZE]); // to double check my input, and it is not giving me the right input.

return 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:23:09.513

`printf` cannot directly print arrays. You must print each element manually using, say, a `for` loop:

```
printf("vectors [");
for(i = 0; i < SIZE; i++) {
    if(i != 0) {
        printf(", ");
    }
    printf("%d", Vx[i]);
}
printf("] [");
/* same for the other array */
printf("]"); 
```

You could even wrap that logic in a function:

```
void print_vector(int vec[SIZE]) {
    printf("[");
    for(int i = 0; i < SIZE; i++) {
        if(i != 0) {
            printf(", ");
        }
        printf("%d", vec[i]);
    }
    printf("]");
} 
```

Then your code would look like this:

```
printf("vectors ");
print_vector(Vx);
printf(" ");
print_vector(Vy); 
```

# php - stream vimeo file through server without revealing src

> ID：15777290
> 
> 赞同：1
> 
> 时间：2013-04-03T01:21:16.900
> 
> 标签：php, codeigniter, video-streaming, embed, vimeo

I'm using a LAMP stack with CodeIgniter to "power" a site. I'm trying to find a way to stream/embed a video that's hosted on Vimeo but without revealing the vimeo source of the file. My purpose is to restrict access to certain users. Is this even possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:03:50.153

找到了我自己可能的答案，但我还没有接受我自己的答案，以防万一有人有更好的主意。

显然，我通过 PHP/CodeIgniter 限制访问 Vimeo 视频 URL 的想法是不可行的。但是，Vimeo 为 Plus 和 PRO 帐户提供了限制对视频的访问权限的功能，因此它们只能嵌入到一组特定的域中。这是他们论坛上更全面的讨论：http: [//vimeo.com/forums/api/topic :31238](http://vimeo.com/forums/api/topic:31238)

他们还提供 oEmbed 和其他 API： [https ://developer.vimeo.com/apis](https://developer.vimeo.com/apis)

因此，实际上，我可以通过以下方式实现我的目标：

1.  将视频限制为只能嵌入到我的域中
2.  使用我自己的访问限制将视频嵌入 CodeIgniter。

这似乎会阻止用户仅输入 vimeo 视频 url 并绕过我的访问控制。

# ruby-on-rails - Susy 嵌套网格

> ID：15777299
> 
> 赞同：1
> 
> 时间：2013-04-03T01:22:20.640
> 
> 标签：ruby-on-rails, sass, compass-sass, susy-compass

我创建了一个 susy 网格，并试图将其用于复杂的嵌套导航。我遇到的问题是我想在标题范围内有一个 0em $gutter-width （我正在使用导航的标签），但在整个页面的其余部分，我想要一个 1em 的排水沟. 我的导航栏是 100% 的屏幕宽度，理想情况下能够顺利处理小数列。

这是我正在使用的：

标题

```
$container-width: 100%
@include container

// basic div configuration for all of the various horizontal navigations etc 
> div

    // do something here

// do some one off grid math to help with the drop down navigation system
#main

    > ul
        @include horizontal_ul_structure(5,5)
        // approximate the size of the li element
        // 
        > li 
```

mixin (horizo​​ntal_ul_structure)：现在嵌套效果很好，悬停 ul 应该是 100% 宽度。因此，我在 1 列的上下文中将其设为 12 列。

```
@mixin horizontal_ul_structure($parent, $elements)

    // best if this works as no decimal otherwise screws up everything!
    $element_size: $parent / $elements
    // assumes that it will be called in the context of a ul
    // span the parent # number of elements across
    @include span-columns($parent)

    // now make sure that the child spans the proper amount of elements with no overflow
    > li
        background-color: gray
        @include span-columns($element_size, $parent)

        &:last-of-type      

            @include span-columns($element_size omega, $parent)

        // do a clever little hack to keep the anchor tags looking correct? 
        > a         

            position: relative
            width: $column-width + $gutter-width
            left: $gutter-padding/2
            height: 100%
            background-color: brown 
```

在这里，如果您注意到我正在使用的锚标记 hack 基本上将锚标记扩展到 li 元素之外，以防止我不工作的排水沟。

有什么办法可以摆脱这个排水沟宽度，然后为我的应用程序的不同部分设置另一个网格？

无论如何命名susy配置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T21:13:48.440

有几种选择。

1) 如果你没有排水沟，你就不需要 Susy。数学很简单，您无需担心小数列。

```
li {
  float: left;
  width: percentage($elements/$parent);
  &:last-of-type {
    float: right;
  }
} 
```

2）您可以使用`with-grid-settings() { ... }`mixin 将任何代码块包装在您选择的不同网格中。也许是这样的：

```
@mixin horizontal_ul_structure($parent, $elements) {
  @include span-columns($parent);

  @include with-grid-settings($elements, $gutter-width: 0) {
    > li {
      @include isolate-grid(1);
    }
  }    
} 
```

如果您只是更改上下文以满足您的需求，您将永远不会有小数列。

# c# - C#团队项目设置

> ID：15777308
> 
> 赞同：2
> 
> 时间：2013-04-03T01:23:16.007
> 
> 标签：c#, version-control, collaboration

我和几个同学将开始一起做一个 ASP 网站。有没有办法让我们所有人在不同的机器和站点的不同部分上工作，然后将代码组合成一个整体。我正在阅读网站和网络应用程序之间的差异，但这似乎并没有回答我的问题。这看起来与代码的处理方式有关，即；编译，未编译，我也无法在互联网上找到任何关于它的内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T01:27:57.780

您正在寻找的是源代码控制。根据您的需要，有许多不同的系统。请参阅[subversion](http://subversion.apache.org/)、[git](http://git-scm.com/)或[mercurial](http://mercurial.selenic.com/)等等。

如果您正在使用 Visual Studio 并且想要使用 Subversion，我个人使用[AnkhSVN](http://ankhsvn.open.collab.net/)。为此有许多不同的插件，所以看看并找出你想要的。

注意：您在那里给出了相互冲突的标签。C# 是 ASP.Net。Asp classic 是（通常）用 VB 脚本编写的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T01:27:22.717

您想要的称为源代码控制。这是你们所有人在同一个项目、不同（甚至相同！）文件中工作的一种方式。

由 Microsoft 设计的称为 Team Foundation Server，对于专业网点而言，它们通常很昂贵，但 Microsoft 有一些东西可以提供您需要的服务水平（可能比您需要的功能多得多）。不过，它最好的部分是它无缝集成到 Visual Studio 中。[http://tfs.visualstudio.com/](http://tfs.visualstudio.com/)

或者，还有其他免费选项，例如 github，但它们通常要求您的软件遵守某些规则（例如开源）。也检查一下。[https://github.com/](https://github.com/)

# cucumber - 使用“当我等待”测试时，Frank Cucumber 测试用例挂起

> ID：15777312
> 
> 赞同：0
> 
> 时间：2013-04-03T01:23:39.660
> 
> 标签：cucumber, frank

我正在使用 frank-cucumber 测试我的 iOS 应用程序，当我的测试采用以下形式时遇到了一些问题

```
When I wait to see "OpenButton" 
```

如果具有可访问性标签“OpenButton”的 UIView 永远不会出现，而不是在 WAIT_TIMEOUT 被击中后超时并在测试中报告错误，黄瓜就会挂起。

由于我什至在 core_frank_steps.rb 中都没有看到 WAIT_TIMEOUT，我想知道这是否是任何“当我等待时..”形式的测试用例都会挂起的原因。

注意：core_frank_steps.rb 可以在[这里找到](https://github.com/moredip/Frank/blob/master/gem/lib/frank-cucumber/core_frank_steps.rb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T13:47:06.213

```
# Polls every 0.1s , returns true when element is present
# @param selector [String] Frankly selector e.g. view marked:''
# @param timeout [Int] seconds to wait
def wait_for_element(selector, timeout=10)

  #the return value of the yield expression isn't working, so we use a closure
  res = nil
  wait_until(:timeout => timeout, :message => "Waited for element #{selector} to exist") {
    res = element_exists(selector)
  }
  res
end 
```

上面的函数帮助我们绕过了一些等待场景。

# javascript - 用字母匹配电话号码 - 正则表达式

> ID：15777314
> 
> 赞同：0
> 
> 时间：2013-04-03T01:24:03.757
> 
> 标签：javascript, regex

如何在 javascript 中为这种格式的电话号码创建正则表达式？我需要验证电话号码如下

```
1800YOUSAVE OR 800YOUSAVE OR 8001234567 OR 18001234567 
```

以上都应该没问题。根据我在此处看到的关于堆栈溢出的另一篇文章，我有以下内容，但它在 1800YOUSAVE 或 800YOUSAVE 上失败。对于所有这些，至少前 3 个应该是数字。

```
var reg1 = /^(?:(?:[0-9]{3}[a-zA-Z0-9]{4,})|(?:[0-9]{1,}))$/; //less than 10
var reg2 = /^(?:(?:[2-9]{3}[a-zA-Z0-9]{7})|(?:[2-9]{1}[0-9]{2,}))$/; //10 digits
var reg3 = /^(?:(?:[1-9]{1}[0-9]{3}[a-zA-Z0-9]{10})|(?:[1-9]{11}))$/; //11 digits
var reg4 = /^(?:(?:[0-9]{7}[a-zA-Z0-9]{7})|(?:[0-9]{1,15}))$/; //12 or more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:34:06.243

在我看来，您想要一个可选的前导“1”，后跟“800”，后跟 7 个字母或 7 个数字，因此以下内容应该适合：

```
 var re = /^1?800[a-z]{7}$|^1?800[0-9]{7}$/i;

  alert(re.test('800yousave'));    // true
  alert(re.test('1800yousave'));   // true
  alert(re.test('1800yousavee'));  // false

  alert(re.test('8001234567'));    // true
  alert(re.test('18001234567'));   // true
  alert(re.test('180012345678'));  // false 
```

保持简单有好处。你也可以这样做：

```
 var re = /^1?800(?:[a-z]{7}|[0-9]{7})$/i; 
```

### 编辑

如果你想要三个数字而不是“800”，你可以使用：

```
 var re = /^1?\d{3}(?:[a-z]{7}|[\d]{7})$/i; 
```

# reference - 为什么在 AppleScript 中不能声明对处理程序本地变量的引用？

> ID：15777321
> 
> 赞同：2
> 
> 时间：2013-04-03T01:24:33.193
> 
> 标签：reference, scope, applescript, handler

为什么你不能声明和使用对变量的引用，除非引用的变量是全局范围的？请解释导致以下现象的运行时内存或对象结构：

脚本 A 失败：

```
on foo()        
    set l to {0}
    set lref to a reference to l
    return item 1 of lref
end foo

foo() 
```

脚本 B 成功：

```
on run
    set l to {0}
    set lref to a reference to l
    return item 1 of lref
end run 
```

脚本 C 成功：

```
on foo()        
    global l
    set l to {0}
    set lref to a reference to l
    return item 1 of lref
end foo

foo() 
```

另请参阅：[如何在 AppleScript 的处理程序中有效地构建列表？](https://stackoverflow.com/questions/15753161/how-do-you-efficiently-build-a-list-within-a-handler-in-applescript/15754609#15754609)以及[为什么 AppleScript 不能在此测试代码中将散列的 firstValue 转换为类型引用？](https://stackoverflow.com/questions/3569847/why-cant-applescript-make-firstvalue-of-hash-into-type-reference-in-this-test-c?rq=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T20:09:53.950

因为“引用”与对象说明符是一样的东西，所以就AppleScript 而言，您不能引用不是（或包含在不是）对象的对象。

全局变量由顶级脚本对象拥有——它实际上是一个没有初始化器的属性。（您也可以引用脚本属性；它不必是严格全局的。）

另一方面，局部变量由它所在的处理程序的调用框架所有，调用框架不是 AppleScript 中的对象，因此没有引用。

# jquery - 如何显示选择选项的标签？

> ID：15777325
> 
> 赞同：0
> 
> 时间：2013-04-03T01:25:33.977
> 
> 标签：jquery, select

我编写了以下脚本：

[http://jsfiddle.net/rgf8K/](http://jsfiddle.net/rgf8K/)

它的工作方式是你选择你的出生月份和最喜欢的颜色，然后它应该为你提供你的“名人姓名”。

现在脚本的编写方式是错误的......因为输出不显示所选选项值的选项标签。如果此人选择一月作为月份并选择绿色作为颜色，我希望输出显示：您的名人姓名是 Linda Green。

如何改为显示所选标签选项的标签？非常感谢！！

HTML

```
<form>
    <select id="month">
        <option value="">- birth month -</option>
        <option value="January">January</option>
        <option value="February">February</option>
        <option value="March">March</option>
    </select>  
    <label class="January" for="January">Linda</label>
    <label class="February" for="February">Chris</label>
    <label class="March" for="March">James</label>

    <select id="color">
        <option value="">- favorite color -</option>
        <option value="Green">Green</option>
        <option value="Blue">Blue</option>
        <option value="Red">Red</option>
    </select>  
    <label class="Green" for="Green">Roberts</label>
    <label class="Blue" for="Blue">Blue</label>
    <label class="Red" for="Red">Unger</label>
</form>

    <p id="output"></p> 
```

jQuery

```
$("#month, #color").change(function () {
    var month = $("#month").val();
    var color = $("#color").val();
    var content = '';
    if (month && color) {
        content = 'Your celebrity name is ' + month + ' name ' + color + ' name';
    }
    $("#output").text(content).fadeIn();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:19:59.953

因为你有月份选择值的类名，你可以试试这个：

改变：

```
var month = $("#month").val();
var color =$("#color").val(); 
```

至：

```
var month = $('.'+$("#month").val()).text();
var color = $('.'+$("#color").val()).text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:34:03.040

您可以更改选项的值属性：

```
<select id="month">
        <option value="">- birth month -</option>
        <option value="Linda">January</option>
        <option value="Chris">February</option>
        <option value="James">March</option>
    </select> 
```

颜色也是如此。

```
<select id="color">
        <option value="">- favorite color -</option>
        <option value="Roberts">Green</option>
        <option value="Blue">Blue</option>
        <option value="Unger">Red</option>
    </select> 
```

然后取下标签，它应该可以按预期工作。

# vba - VBA想要比较2个日期列和2个值列来创建一个

> ID：15777334
> 
> 赞同：0
> 
> 时间：2013-04-03T01:26:40.323
> 
> 标签：vba, excel

我想比较行中的每个日期，取最高的，按最接近的对它们进行排序，然后对这些值做同样的事情。

这是我的代码

```
Sub Intersection()

Dim nombre As Integer
Dim tableauDate(1 To 130) As Date
Dim tableauValeur(1 To 130) As String
Dim incrementeurForeach As Integer

nombre = 115
incrementeurForeach = 1

For incrementeur = 0 To nombre
    If Range("A" & incrementeur).Value = Range("C" & incrementeur).Value Then
        tableauDate(incrementeur) = Range("A" & incrementeur).Value
        If Range("B" & incrementeur).Value > Range("D" & incrementeur).Value Then
            tableauValeur(incrementeur) = Range("B" & incrementeur).Value
        Else
            tableauValeur(incrementeur) = Range("D" & incrementeur).Value
        End If
    Else
        If Range("A" & incrementeur).Value > Range("C" & incrementeur).Value Then
            tableauDate(incrementeur) = Range("A" & incrementeur).Value
        Else
            tableauDate(incrementeur) = Range("C" & incrementeur).Value
        End If
    End If

Next incrementeur

For Each valeur In tableauDate

    Range("A", incrementeurForeach).Value = tableauDate(incrementeurForeach)
    Range("B", incrementeurForeach).Value = tableauValeur(incrementeurForeach)

    incrementeurForeach = incrementeurForeach + 1

Next valeur
End Sub 
```

还有桌子的一部分

```
 A                  B               C               D
1        Date A         Prix A          Date B          Prix B
2        2000-01-31         34,84 $     2000-01-31  48,07 $ 
3        2000-05-31         29,22 $     2000-02-29  39,15 $ 
4        2000-06-30         29,00 $     2000-03-31  43,46 $ 
5        2000-07-31         30,25 $     2000-04-30  43,62 $ 
6        2000-08-31         33,27 $     2000-05-31  47,27 $ 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:37:17.640

我尝试稍微清理一下您的代码，这可能会对您或其他人有所帮助。

有一些错误，例如`incrementeur`must begin at`1`因为`Range("A" & incrementeur)`会出错 if `incrementeur = 0`。这需要在代码的其他地方进行一些小的更改。

我不确定具体问题是什么，但是我注意到您只填充了`tableauValeur`if Date A = Date B。

```
Sub Intersection()

Dim nombre As Integer
Dim tableauDate(1 To 130) As Date
Dim tableauValeur(1 To 130) As String
Dim valeur as Variant
Dim incrementeurForeach As Integer
Dim dateA As Date
Dim dateB As Date
Dim prixA As Variant
Dim prixB As Variant

nombre = 115
incrementeurForeach = 1  

For incrementeur = 2 To nombre  'change to "2"'
    'Add some variables to make the code more legible.'
    dateA = Range("A" & incrementeur).Value
    dateB = Range("c" & incrementeur).Value
    prixA = Range("B" & incrementeur).Value
    prixB = Range("D" & incrementeur).Value

    'Rewrite the expressions using the variables'.
    ' Also favor a Select Case instead of nested IF/Then.'
    Select Case dateA
        Case Is = dateB
            tableauDate(incrementeur) = dateA
            If prixA > prixB Then
                tableauValeur(incrementeur - 1) = prixA
            Else
                tableauValeur(incrementeur - 1) = prixB
            End If

        Case Is > dateB
            tableauDate(incrementeur - 1) = dateA

        Case Else:
            tableauDate(incrementeur - 1) = dateB

    End Select

Next incrementeur

Sheets.Add After:=ActiveSheet  'I add a new worksheet to debug, you can remove this if necessary'

For Each valeur In tableauDate

'I also change the way you specify the Ranges, to use OFFSET.
    Range("A1").Offset(incrementeurForEach,0).Value = tableauDate(incrementeurForeach)
    Range("B1").Offset(incrementeurForEach,0).Value = tableauValeur(incrementeurForeach)

    incrementeurForeach = incrementeurForeach + 1

Next valeur

End Sub 
```

# knockout.js - 使用 Knockout 模板时，在 IE 中不更新 Knockout-Kendo ListView

> ID：15777338
> 
> 赞同：2
> 
> 时间：2013-04-03T01:27:14.587
> 
> 标签：knockout.js, kendo-ui

我有一个使用 Knockout-Kendo 插件绑定到 Knockout ObservableArray 和模板的 KendoUI 列表视图。当我将新项目推送到 ObservableArray 时，在 IE7-8 中查看时，Kendo ListView 不会更新。在 Chrome 和 Firefox 中运行良好。

有点奇怪的是，如果我登录到控制台，我看到可观察数组的长度 > 0。但是，如果我在绑定视图模型并且数组已由 api 调用填充后放置一个断点，则长度为 0即使控制台条目刚刚告诉我长度> 0。

这是绑定：

```
<div id="lvBill" data-bind="kendoListView: { data: accounts, template: 'listTmpl', useKOTemplates: true }"></div> 
```

这是模板：

```
<!-- Template for list -->
<script id="listTmpl" type="text/html">
    <div class="savedBills">
        <!-- ko if: fileThumbnail -->
        <div style="padding: 1px 1px 2px 1px; background-color: black">
            <img data-bind="attr: { src: fileThumbnail }" />
        </div>
        <!-- /ko -->
        <div class="savedBillInfo">
            <h3><span data-bind="text: carrier"></span></h3>
            <h3><span data-bind="text: accountNumber"></span></h3>

            <p><span data-bind="currencyString: billAmount"></span></p>
            <p><span data-bind="dateString: billDate"></span></p>
            <span style="float: right"><a data-bind="click: $root.deleteAccount"><i class="icon-trash"></i></a></span>
        </div>
    </div>
</script> 
```

# ruby-on-rails - Rails：一个具有 2 个域的应用程序 - 共享身份验证

> ID：15777341
> 
> 赞同：2
> 
> 时间：2013-04-03T01:27:46.890
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, authentication

我的网站在 Heroku 上的 mydomain.com 上，使用 Devise 身份验证。

我买了一个简短的网址 me.do，我也指向我的同一个 Heroku 应用程序。

当用户在 mydomain.com 上登录时，我还需要他们在 me.do 上登录，因此当他们在 mydomain.com 上登录后转到 me.do 时，他们不必再次登录。

如何在 mydomain.com 和 me.do 上使用 Devise 共享身份验证会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:55:41.120

跨域共享身份验证没有简单的方法，因为身份验证通常绑定到仅绑定到一个域且无法跨域访问的 cookie（会话）。

您可以设法拥有这样的东西的唯一方法是确保您在登录时在两个域上都设置了 cookie。您可以通过重定向循环执行此操作：

*   登录请求到达 domain1（例如来自登录表单）
*   您为 domain1 设置会话 cookie
*   然后重定向到 domain2 并在那里设置会话 cookie
*   然后将用户重定向回 domain1 （继续他原来要去的地方）

为了确保这不是一个无限循环，您必须在重定向中添加一些参数以了解如何处理这种情况。

但如果有可能避免它，我会建议你不要执行此操作。没有唯一域是非常糟糕的做法。即使允许带有 www 和不带 www 的域，也会给用户带来相当多的困惑，给开发人员带来很多麻烦——在您的情况下，情况会更糟。

这些会话不像通常那样有用。设置额外的 cookie 或会话值不再起作用（除非您每次都进行循环）。在用户实际使用第二个域之前，他的会话甚至可能已经过期（取决于您的身份验证框架如何处理它）。这些只是您可能遇到的一些问题。

# xamarin.android - usb调试，vmware windows 8上的android单声道？

> ID：15777342
> 
> 赞同：0
> 
> 时间：2013-04-03T01:27:56.227
> 
> 标签：xamarin.android, vmware-fusion

我在这个环境中使用安卓模拟器（VMware fusion5/windows 8/vs2012-mono for android），它可以正常工作，但我想将许可证切换到这台机器，这样我就可以将它用于实际设备测试。由于您可以使用 xamarin 重新使用许可证的次数有限，因此我想知道在我在此环境中激活许可证之前它是否真的可以工作。有人在做吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:45:38.210

如果有人需要知道，它可以正常工作。VMware 会在设备插入时看到它，并询问您是否要连接到 windows 或 mac。选择 windows 让 adb 查看设备。

# delphi - 是否可以使用 Delphi XE2 开发 Windows CE 应用程序？

> ID：15777346
> 
> 赞同：4
> 
> 时间：2013-04-03T01:28:37.557
> 
> 标签：delphi, windows-ce, delphi-xe2

我必须开发一个应用程序以在访问远程 Firebird 数据库的 Windows CE 上运行。我想使用 Delphi 来做到这一点。是否可以？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T05:51:35.973

本机 Delphi 仅适用于 x86 兼容处理器和 Win32/Win64 或 MacOS 10 API。

Ken White 已经向您指出了 Delphi Prism，但是如果您购买它，而不是重新标记的工具，您可能会购买原始产品，我听说它支持多个平台而不是一个。[RemObjects Oxygene](http://www.remobjects.com/oxygene/platforms/)是原始产品，其中一部分作为 Prism 转售。

另一种选择是使用 Lazarus（香草或 CodeTyphon 发行版）。它的 LCL 库在许多方面模仿 VCL，FPC 编译器模仿 Delphi 语言（以及其他一些 Pascal 方言）。

*   [http://www.pilotlogic.com/codetyphon/help/index.html?cross_build_for_windows_mobile.htm](http://www.pilotlogic.com/codetyphon/help/index.html?cross_build_for_windows_mobile.htm)
*   [http://wiki.freepascal.org/Windows_CE_Interface](http://wiki.freepascal.org/Windows_CE_Interface)
*   [http://www.lazarus.freepascal.org/index.php?topic=8175.0](http://www.lazarus.freepascal.org/index.php?topic=8175.0)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T01:37:34.220

不，不是。Delphi XE2 为 Win32/64、OS X （并在 FreePascal、iOS 的帮助下）提供应用程序，但不适用于 CE。

您可能可以使用 Delphi Prism 来执行此操作。在 SO有一个单独的`delphi-prism`标签。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T07:25:55.310

事实上，经过一些修改，您或许可以使用Delphi IDE 构建Windows CE 应用程序，使用[KOL-CE](http://wiki.freepascal.org/KOL-CE)库。

KOL-CE - 关键对象库 CE 是一组对象，用于使用 Free Pascal 编译器开发功能强大（但紧凑）的 Windows CE/Pocket PC/Windows Mobile/Win32 GUI 应用程序。该库基于 Vladimir Kladov ( [http://kolmck.net](http://kolmck.net) ) 的 KOL 库。

它以 Lazarus IDE 为目标，但由于它是 Delphi 项目的一个分支，您也许可以在您的 Delphi IDE 中使用它，也许经过一些修改。如果您不能（或没有时间）进行所需的修改，我相信您会很高兴使用 Lazarus IDE 和现代对象 pascal，而不是切换到另一种语言。

您需要为 Win32 安装 FPC arm-wince 交叉编译器以编译 WinCE 可执行文件，但您在 Windows 中使用 IDE 开发应用程序。

请注意，KOL 是一组轻量级的新组件，与 VCL 非常不同。非常强大，但只能重用低级目标代码，因为它们与 VCL（或 Lazarus LVCL）不兼容。

使用 Lazarus 及其原生 LVCL 组件也可用于 Windows CE，非常接近 VCL 类布局，但会产生比 KOL-CE 更大的可执行文件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-03T07:26:10.437

从历史的角度来看：不，您不能在 Delphi 2007 中使用 Delphi 本身。

在 Delphi 2005 和 Delphi 2006 中可以做到这一点，针对 Windows CE 上的 .NET Compact Framework，因为 Delphi 包含一个 Delphi .NET 编译器，它比当前（但更进化）的 Oxygene .NET/Java 平台更兼容 Delphi 语言Delphi语言的实现。

自 Delphi 2007 起，Delphi .NET 编译器已退役。

现在，Oxygene 比 Delphi .NET 支持的语言和平台功能更广泛，因此要好得多。它与 Delphi 语言的兼容性较差，因为它支持的平台保证了一些在实践中非常有用的语言偏差。

Oxygene 单独发布（带有完整的功能集）和 Delphi Prism（仅带有 .NET 部分）。

对于 Delphi 2005/2006，您需要 Jeremy North 的[CF Build Helper](http://www.jed-software.com/cf.htm)和我编写的 Class Helper（它们包含在 CF Build Helper 中）。[EDN 上有一篇关于如何使用两者的好文章](https://edn.embarcadero.com/article/33507)。

考虑到您当时必须经历的喧嚣，如果您想要一种非常接近 Delphi 语言的语言，使用 Oxygene 会更明智。

有关 Pascal 和 Delphi 类语言的历史概述，请阅读[Jim McKeeth 的这篇文章](http://www.remobjects.com/oxygene/language/history.aspx)。

# kendo-ui - 如何设置 SubGrid 数据绑定条件？

> ID：15777347
> 
> 赞同：-1
> 
> 时间：2013-04-03T01:28:58.017
> 
> 标签：kendo-ui, kendo-grid

我按照演示设置了主/详细网格（或层次网格），它们按预期工作。但是，我想通过询问如何使 SubGrid 数据绑定有条件来进行改进。

默认情况下，如果 MasterGrid 返回 10 行，则绑定到 SubGrid 的数据（即 Controller/Action 的 url）被调用 10 次，每次都从 MasterGrid 传递不同的 ID。

在我的情况下，我只需要在 MasterGrid 中的值满足要求时调用数据绑定到 SubGrid。即对于返回的每一行MasterGrid，只有当列MyFlag=1 时，才需要调用SubGrid。所以翻了10行，如果只有3行MyFlag=1，那么对SubGrid的数据调用只需要3次，而不是10次。

我不知道该怎么做，请指教。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:58:26.640

`SubGrid`仅应在扩展时访问，因此`MasterGrid`实际上您不应该**对**服务器进行 10 次访问。

如果您想控制是否`MasterGrid`可以扩展行，那么您需要在逻辑`detailInit`功能中`MasterGrid`实现用于决定 - 取决于`MasterGrid`（`MyFlag`等于`1`）的内容 - 是否`SubGrid`必须创建或什么都不做。

这种方法不会阻止显示扩展指示器（小三角形）。

# c# - 为什么输出（来自多个线程）到 WPF UI 需要 Dispatcher 而控制台不需要？

> ID：15777354
> 
> 赞同：0
> 
> 时间：2013-04-03T01:30:44.837
> 
> 标签：c#, multithreading, concurrency, thread-safety, task-parallel-library

我正在学习多线程（以及相关的东西，如并发、TPL - 在 .NET、Windows 中），并希望你对这个问题的回答能大大减少我的疑虑。

为什么 WPF UI 需要通过 Dispatcher 输出（来自多个线程）而控制台不需要？
我希望这个解释会比MSDN 文档中[过度使用和定义不足的短语更详细一点，即](http://blogs.msdn.com/b/ericlippert/archive/2009/10/19/what-is-this-thing-you-call-thread-safe.aspx)[Console 类是线程安全的](http://msdn.microsoft.com/en-us/library/system.console.aspx)（或者更好地避免使用模棱两可的术语）。

更新：
感谢 Justin Pihony 的评论，子问题：
[为什么没有 Dispatcher 对象就无法从 WPF UI 读取，](https://stackoverflow.com/a/10450783/2031316)而 Windows 窗体允许在没有 Invoke/BeginInvoke 的情况下读取和写入？
为什么（或如何）阅读会损害 WPF UI 的线程安全？

我试图为我消除[.NET Framework 4 中的并行编程中的短语：入门](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/01/parallel-programming-in-net-framework-4-getting-started.aspx)：

> “我对控制台应用程序没有问题，因为 Console 类是线程安全的。但在 WPF 中，UI 组件只能由专用的 UI 线程安全访问”

# 阅读答案的建议主题：

*   [为什么 Console.ReadKey() 会阻止在另一个线程中调用 Console.WriteLine 的输出？](https://stackoverflow.com/questions/15743717/why-does-console-readkey-block-output-of-console-writeline-called-in-another-t)
*   [您可以从另一个线程访问 UI 元素吗？（不设置）](https://stackoverflow.com/questions/10450750/can-you-access-ui-elements-from-another-thread-get-not-set)
*   [为什么 WPF 中的 UI 控件具有线程关联性？](https://stackoverflow.com/questions/8733303/why-do-ui-controls-in-wpf-have-thread-affinity)
*   [从多个线程调用 Console.WriteLine](https://stackoverflow.com/questions/1079980/calling-console-writeline-from-multiple-threads)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:17:16.867

WPF/WinForm 创建和使用窗口，对单线程有亲和力。

控制台不使用窗口，它只是输出/回复字符串。

它是“窗口开发的设计”。

# python - 计算由空格分隔的未指定数量的整数并使用字典查找python中每个数字的出现

> ID：15777357
> 
> 赞同：1
> 
> 时间：2013-04-03T01:30:57.620
> 
> 标签：python, dictionary, integer

样本输出

```
输入以空格分隔的数字：1 2 3 3 2 2 2 1 3 4 5 3

{'1'：2，'3'：4，'2'：4，'5'：1，'4'：1}

1 发生 2 次

3 发生 4 次

2 出现 4 次

5 发生一次

4 发生一次

```

所以我是 python 的新手，但我想这样开始：

```
d = {}     
user = input("Enter numbers separated by spaces :") 
data = user.split() 
```

除了我尝试的每个循环都一直说我不能将 str() 转换为 int()，我会很感激任何帮助，我已经盯着这个问题几个小时了..这是我在输入是字符串时尝试的东西，试图为字典实现类似的东西

```
def countdigits (aString):  
  c = 10 * [0]

  for e in aString: 
    c[int(e)] += 1 

  return c 

def main (): 
  n = 0 

  for v in (countdigits(str(input('Enter a string: ')))): 
    if v == 1: 
      print(n, "occurs 1 time")
    elif v!=0:
      print(n, "occurs", v, "times")

    n += 1 

main() 
```

对于给定的输出，我想要一个类似的解决方案（但使用字典）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:35:49.707

尝试

```
d = {i:data.count(i) for i in data}

for k,v in d:
    print "{0} occurs {1} times\n".format(k,v) 
```

或喜欢以下评论中的示例：

```
import collections

for a,b in collections.Counter(data).items():
    print "{0} occurs {1} times\n".format(a,b) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T01:37:38.067

我只能猜测你正在尝试这样的事情

```
    >>> 用户 = “1 2 3 3 2 2 2 1 3 4 5 3”
    >>> 数据 = int（用户）
    回溯（最近一次通话最后）：
      文件“”，第 1 行，在
    ValueError：int() 的无效文字，基数为 10：'1 2 3 3 2 2 2 1 3 4 5 3'

```

像这样的东西：

```
data = user.split()
for item in data:
   number = int(item) 
```

应该可以正常工作。请注意，您可能不需要`int`为此问题转换为。留下数字 a`str`应该也可以

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T04:08:18.403

不导入任何东西

```
nk="1 2 3 3 2 2 2 1 3 4 5 3"
nk=nk.split()
result={}
for x in nk:
    result.setdefault(x,0)
    result[x]+=1
print result 
```

输出

```
{'1': 2, '3': 4, '2': 4, '5': 1, '4': 1} 
```

# java - 有没有很好的解释java语言的库？

> ID：15777359
> 
> 赞同：0
> 
> 时间：2013-04-03T01:31:13.653
> 
> 标签：java, jvm, interpreter, static-typing

在很多情况下，不需要显式编译类（即运行单元测试——我希望它们只是*可运行*的，不一定要编译和打包）。

我很好奇是否有任何解释java的库。

Scala（静态类型，在 jvm 上运行）内置了解释器，因此在我的理解中，它在技术上也应该适用于 java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:36:16.350

你可以去看看 BeanShell。它是一个 Java 解释器。它可能有点过时了，我不知道它是否支持泛型，但你应该看看它。它可能适合您想要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T01:36:26.440

看看 beanshell ( [http://www.beanshell.org](http://www.beanshell.org) )。

# webgl - 在 WebGL 和 Typescript 中渲染球体时出现问题

> ID：15777360
> 
> 赞同：0
> 
> 时间：2013-04-03T01:31:25.017
> 
> 标签：webgl, typescript

我已经移植了一些在 opengl 中为我正在处理的 webgl/typescript 项目渲染球体的 c 代码，但是它不能正确渲染。我比较了 c 和 ts 版本之间的索引和顶点，它们似乎匹配。代码如下：

```
constructor(ctx: WebGLRenderingContext, stacks:number, 
                slices:number, scale: number){
    var vertices: number[] = [];
    var normals: number[] = [];
    var indices: number[] = [];

    var ii: number;
    var jj: number;
    var v: number;
    var u: number;

    normals.push(0, 0, 1);
    vertices.push(0, 0, scale);

    for (ii = 0; ii < slices; ++ii) {
        indices.push(0);
        indices.push(ii + 1);
    }
    indices.push(0);
    indices.push(1);

    for (ii = 1; ii < stacks; ++ii) {
        v = ii / stacks;
        for (jj = 0; jj < slices; ++jj) {
            u = jj / slices;
            normals.push.apply(normals, this.shapeNormal(u, v));
            vertices.push.apply(vertices, this.shapeVertex(scale, u, v));

            indices.push((ii - 1) * slices + (jj + 1));
            var index_offset: number = ((ii + 1) === stacks) ? 0 : jj;
            var second: number = ii * slices + (index_offset + 1);
            //console.log("Offset: " + String(index_offset) + " Value: " + String(second));
            indices.push(second);
        }
        indices.push((ii - 1) * slices + 1);
        indices.push(ii * slices + 1);
    }

    normals.push(0, 0, -1);
    vertices.push(0, 0, -scale);

    //console.log("Theoretical vertices: " + String(3 * (2 + slices * (stacks - 1))));

    //initialise vbos
    console.log("Vertices: " + String(vertices.length / 3));
    for(var l = 0; l < vertices.length; l += 3)
        console.log(vertices[l].toFixed(6) + " " + vertices[l+1].toFixed(6) + " " + vertices[l+2].toFixed(6));
    this.vertices = new VertexBufferObject(ctx, 3, vertices.length / 3);
    //console.log("Normals: " + String(normals.length));
    this.normals = new VertexBufferObject(ctx, 3, normals.length / 3);
    console.log("Indices: " + String(indices.length) + " " + indices.toString());
    this.indices = new VertexBufferObject(ctx, 1, indices.length);

    //populate vbo
    ctx.enableVertexAttribArray(0);
    ctx.bindBuffer(ctx.ARRAY_BUFFER, this.vertices.buffer);
    ctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(vertices), ctx.STATIC_DRAW);

    ctx.enableVertexAttribArray(1);
    ctx.bindBuffer(ctx.ARRAY_BUFFER, this.normals.buffer); 
    ctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(normals), ctx.STATIC_DRAW);

    ctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER, this.indices.buffer);
    ctx.bufferData(ctx.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), 
                        ctx.STATIC_DRAW);

    ctx.bindBuffer(ctx.ARRAY_BUFFER, null);
    ctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER, null);

    ctx.disableVertexAttribArray(0);
    ctx.disableVertexAttribArray(1);

    this.ctx = ctx;
}

private shapeVertex(r: number, u: number, v: number): number[] {
    /* Use maths rather than physics spherical coordinate convention */
    var theta: number = u * 2.0 * Math.PI;
    var phi: number = v * Math.PI;

    var vert: number[] = [
        r * Math.cos(theta) * Math.sin(phi),
        r * Math.sin(theta) * Math.sin(phi),
        r * Math.cos(phi)
    ];

    return vert;
}

private shapeNormal(u: number, v: number): number[] {
    /* Use maths rather than physics spherical coordinate convention */
    var theta: number = u * 2.0 * Math.PI;
    var phi: number = v * Math.PI;

    var norm: number[] = [
        Math.cos(theta) * Math.sin(phi),
        Math.sin(theta) * Math.sin(phi),
        Math.cos(phi)
    ];

    var mag: number = Math.sqrt(norm[0] * norm[0] + norm[1] * norm[1] + norm[2] * norm[2]);

    norm[0] /= mag;
    norm[1] /= mag;
    norm[2] /= mag;

    return norm;
}

public draw(shaderProgram: ShaderProgram): void {
    //bind and draw vbo's
    this.ctx.enableVertexAttribArray(0);
    this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER, this.vertices.buffer);
    this.ctx.vertexAttribPointer(shaderProgram.attributes.position, 
                        this.vertices.itemSize, this.ctx.FLOAT, false, 0, 0);

    this.ctx.enableVertexAttribArray(1);
    this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER, this.normals.buffer);
    this.ctx.vertexAttribPointer(shaderProgram.attributes.normal, 
                        this.normals.itemSize, this.ctx.FLOAT, false, 0, 0);

    this.ctx.bindBuffer(this.ctx.ELEMENT_ARRAY_BUFFER, this.indices.buffer);
    this.ctx.drawElements(this.ctx.TRIANGLES, this.indices.numItems, 
                        this.ctx.UNSIGNED_SHORT, 0);

    this.ctx.bindBuffer(this.ctx.ELEMENT_ARRAY_BUFFER, null);
    this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER, null);

    this.ctx.disableVertexAttribArray(0);
    this.ctx.disableVertexAttribArray(1);
} 
```

和结果截图：

[破碎的球体](http://dl.dropbox.com/u/117543167/Capture.PNG)

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:39:29.757

由于 TypeScript 只是 Javascript 的替代品，因此您的问题可能与 Javascript 如何处理您的代码计算有关。

我不确定您的代码，因为您没有提供原始来源。假设您的代码是正确的，您可能会遇到[浮点近似错误](http://blog.greweb.fr/2013/01/be-careful-with-js-numbers/)。

# c# - 将 ClassA 中的事件处理程序添加到 ClassB 中调用的事件

> ID：15777363
> 
> 赞同：0
> 
> 时间：2013-04-03T01:31:50.123
> 
> 标签：c#, .net, c#-4.0

我真的很纠结如何在我的应用程序中使用事件。我有两个文件：

```
RTimer.cs
SettingsForm.cs 
```

我设置了一个计时器，`RTimer.cs`用于初始化计时器并设置间隔等。

我有一种方法，`SettingsForm.cs`每次计时器滴答时都需要做一些事情。该文件还有一个方法，`SetTimer()`通过`RTimer.cs`

我一生都无法弄清楚如何让`Tick`事件从另一个类调用方法，或者让另一个类中的方法订阅`Tick`事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:40:58.890

你可以这样实现：

```
class SettingsForm
{
    public void OnTimerEvent(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    }
}

class RTimer
{
    Timer timer = new Timer();
    public void StartTimer(SettingsForm settingForm)
    {
        timer.Tick += settingForm.OnTimerEvent;
        timer.Interval = 5000;
        timer.Enabled = true;
    }
} 
```

# drupal - 在 Drupal SOLR Search API 中添加自定义索引

> ID：15777365
> 
> 赞同：0
> 
> 时间：2013-04-03T01:31:55.763
> 
> 标签：drupal, solr

您好，我有以下要求

我有一个存储技能和多年经验的现场收藏。例如

Java 5 年 Spring 1 年

我添加了自定义模块以使用 hook_entity_property_info_alter 将技能提取到索引，例如：Java、Spring。

我还想索引每个技能的年数，即 java_year_of_experience = 5 年，spring_years_of_experience = 1 年，等等......

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:54:50.000

使用[Solr 动态字段](http://wiki.apache.org/solr/SchemaXml#Dynamic_fields)。

动态字段将允许传递与某些模式匹配的字段名称，并定义如下

例如`<dynamicField name="*__year_of_experience" type="integer" indexed="true" stored="true"/>`

*   通过这种方式，您可以处理任意数量的 *_year_of_experience 字段。
*   这些字段将动态创建，无需定义。

# arrays - 在字符串数组中查找特定字符/字母的算法？

> ID：15777370
> 
> 赞同：1
> 
> 时间：2013-04-03T01:32:21.437
> 
> 标签：arrays, performance, algorithm, search

因此，我试图提出一种算法来在字符串数组中查找具有特定字符/字母的单词。

如果我想要带有元音 e 的单词，我会从下面的集合中得到单词 apple 和 hello。

{苹果，鸟，你好}

要查找具有特定字符的单词，我是否需要查看数组中的所有字母并查看每个单词的每个字符？

有没有一种聪明的方法可以通过对列表进行排序然后以某种方式搜索？

另外，这个算法的运行时间是多少？它会被视为 O(n) 还是 O(n*m)？其中 n 是字典中的单词数，m 是数组中每个单词的长度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:53:26.540

为了找到具有特定字符的单词，您需要至少阅读该字符一次。因此，您必须从每个单词中访问每个字符一次，运行时间为 O(n*m)，其中 n 是单词数，m 是平均单词长度。所以是的，您需要从每个单词中查找每个字符。

现在，如果您要对不同的字母进行大量查询，您可以对所有单词进行一次遍历并将这些单词映射到它们所在的字符。即苹果 => a, p, l, e 集合。那么你将有 26 个集合，其中包含具有该字符的所有单词（'a'：[apple]，'b'：[bird]，'c'：[]，...'l'：[apple，hello]， ...）。随着查询数量相对于单词集大小的增加，您最终会得到 O(1) 的分摊查找时间——尽管您仍然有 O(n*m) 初始化复杂度。

# php - Yahoo Placefinder Geocoding 随机停止工作......他们现在不支持它吗？

> ID：15777371
> 
> 赞同：3
> 
> 时间：2013-04-03T01:32:35.280
> 
> 标签：php, yahoo, yahoo-api

我有一个使用 Yahoo Geocoding Placefinder API 的网络应用程序，直到今天早些时候它都运行良好。它只是随机退出工作。他们不再支持了吗？我浏览了整个网络，找不到任何关于他们放弃支持的信息，但我的代码不再有效。这是我的代码...

```
function geocode_yahoo($address,$city,$state,$country) {
    $address = array($address, $city, $state, $country);
    $address = array_filter($address);
    $address = urlencode(implode(', ', $address));

    $appid = 'CYxSRa64';

    $url = 'http://where.yahooapis.com/geocode?location='.$address.'&flags=J&appid='.$appid;
    $data = file_get_contents($url);
    if ($data != '') {
        $data = json_decode($data);
        if ($data && $data->ResultSet && $data->ResultSet->Error == '0' && $data->ResultSet->Found) {
            return (object) array('lat'=>$data->ResultSet->Results[0]->latitude, 'lng'=>$data->ResultSet->Results[0]->longitude); 
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T07:14:07.707

您的代码没有问题，服务已停止。

请注意，[http](http://where.yahooapis.com) ://where.yahooapis.com 现在返回 404 页面。

该服务原定于 2012 年 11 月结束，但为了让开发人员有时间迁移到替代雅虎 BOSS 服务而继续运行：http: [//developer.yahoo.com/boss/geo/](http://developer.yahoo.com/boss/geo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T10:16:45.280

这里没有任何内容表明该服务将被停止：[https ://developer.yahoo.com/boss/geo/docs/free_YQL.html#table_pf](https://developer.yahoo.com/boss/geo/docs/free_YQL.html#table_pf)

事实上，在这个页面的底部有一个链接：[https](https://developer.yahoo.com/boss/geo/) ://developer.yahoo.com/boss/geo/到免费的 YQL 版本。

# facebook - 管理设置中的 phpfox facebook-connect 丢失

> ID：15777372
> 
> 赞同：0
> 
> 时间：2013-04-03T01:32:37.890
> 
> 标签：facebook, phpfox

**[phpfox 中的新功能，需要进行 facebook 登录我在此处](http://phpfoxdemo.ceofox.com/faqs/view/15/enabling-facebook-connect/)**寻找 facebook-connect 到本教程中所说的内容，找到它并且只是浏览更多内容以检查它是否类似于 fb 登录。后来我又来找它，但似乎 facebook-connect 在 AdminCP 管理设置中消失了。检查历史记录并找到页面，但是当我去那里时，我得到这个**“这个设置组没有可用的设置”。**尝试使用查找缺少的设置，但没有运气。如何恢复 facebook-connect 选项设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:19:11.737

如何启用 Facebook Connect 教程在[这里](http://www.phpfox.com/kb/article/83/enabling-facebook-connect/)，如果您仍然不明白，您可能禁用了 Facebook 模块，如果启用，您应该联系支持部门，也许您编辑了一个模板？

# linux - 什么是带有 ftp 的 linux 文本编辑器程序？

> ID：15777373
> 
> 赞同：-4
> 
> 时间：2013-04-03T01:32:40.783
> 
> 标签：linux, ubuntu, ftp

只是一个我可以像notepad++ for linux那样编写的程序？想安装linux，这是我最需要的，如果他们没有像notepad++这样的程序，那么我不会安装它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:40:30.207

使用某些基于 Fuse 的 FTP 文件系统时使用任何编辑器进行远程编辑。

[卷曲FFTPS](http://curlftpfs.sourceforge.net/)

```
urlftpfs -o user=username:password ftp.example.com /my/mount/point 
```

* * *

或者，如果可能，您可以使用 SSH 和 SSHFS。[http://fuse.sourceforge.net/sshfs.html](http://fuse.sourceforge.net/sshfs.html)

对于编辑器，我会推荐 Eclipse。

* * *

或者还应该查看 JetBrains 的 PHPStrom [http://www.jetbrains.com/phpstorm/](http://www.jetbrains.com/phpstorm/)

* * *

GVim/Vim 支持 ftp & ssh/scp ( [link1](http://vim.wikia.com/wiki/Edit_remote_files_locally_via_SCP/RCP/FTP) [link2](http://vim.wikia.com/wiki/Editing_remote_files_via_scp_in_vim) )

Emacs 似乎也支持它们（[链接](http://www.emacswiki.org/emacs/AngeFtp)）

一般格式为：protocol:user@host#port:dir/file

* * *

**您还可以通过 FTP 和 SSH (Ubuntu) 使用 Gedit 作为远程文件编辑器**

通过 FTP 和 SSH (Ubuntu) 使用 Gedit 作为远程文件编辑器（[链接在这里](http://thecodecentral.com/2010/04/02/use-gedit-as-remote-file-editor-via-ftp-and-ssh-ubuntu)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:35:10.730

[Vim](http://www.vim.org/)在其捆绑`netrw`插件中集成了 FTP（和其他协议！）支持。

要使用它，您可以像编辑任何其他文件一样开始编辑文件，除了使用 URL 而不是文件名。例如：

```
$ vim ftp://www.example.com/file.txt 
```

你也可以给它一个目录名而不是一个文件名，它会显示一个目录列表。

有关详细信息，请参阅[其文档](http://vimhelp.appspot.com/pi_netrw.txt.html#pi_netrw.txt)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:37:09.473

正如**icktoofay**建议的那样，但是如果您没有使用 Vim 的经验并且希望避免学习如何使用它，那么我强烈建议您使用 Sublime 文本。

如果我们在谈论文本编辑器，我会添加`Sublime Text`为主角。它不包含 FTP 支持，但具有极好的`S/FTP`易于安装和使用的插件。

**Sublime Text 就像 Notepad++ 一样更好。** [崇高的文本](http://www.sublimetext.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:00:24.160

Vim 可能是最好的编辑器，但它与 notepad++ 完全不同。
对于 Web 开发，我强烈建议使用**KDE 的[http://kate-editor.org/](http://kate-editor.org/)**
通过利用 KDE 网络堆栈，您将拥有一个（远程）文件系统浏览器、ftp 编辑、漂亮的语法高亮和 javascript 符号列表， css 和许多其他文件类型，列模式编辑......它非常干净且易于使用。
作为奖励，它可以在 vim 仿真模式下运行，所以你可以同时拥有 :)
我真的很惊讶没有得到最好的文本编辑器之一的关注

# ios - 奇怪的 iOS 5 FetchedResultsController 谓词问题

> ID：15777374
> 
> 赞同：0
> 
> 时间：2013-04-03T01:32:58.693
> 
> 标签：ios, nsfetchedresultscontroller

此代码在 iOS 6 上运行良好，但在 iOS 5 上不返回任何结果。日期使用类别方法设置为今天。任何人都可以发现任何奇怪的东西吗？谢谢！

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"KSJob"];

NSLog(@"today: %@", [NSDate today]);

// We only want to show upcoming jobs.
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"scheduledOn > %@", [NSDate today]]];

fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"scheduledOn" ascending:YES]];
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                managedObjectContext:[(id)[[UIApplication sharedApplication] delegate]managedObjectContext]                                                 sectionNameKeyPath:@"dateToStringForSectionTitles"
                                                                           cacheName:@"UpcomingJobs"];
self.fetchedResultsController.delegate = self; 
```

NSDate 类别方法：

```
+ (NSDate*) today
{
    NSCalendar *cal = [NSCalendar currentCalendar];
    NSDateComponents *components = [cal components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ) fromDate:[[NSDate alloc] init]];
    components.timeZone = [NSTimeZone localTimeZone];
    components.hour = 0;
    components.minute = 0;

    NSDate *today = [cal dateByAddingComponents:components toDate:[[NSDate alloc] init] options:0];    
    return today;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:47:07.570

好的，我想我找到了。由于某种原因，它似乎没有为 iOS 5 上的这些日期字段插入任何内容。但这解释了很多。

# html - 导航栏下拉框格式化问题css

> ID：15777375
> 
> 赞同：0
> 
> 时间：2013-04-03T01:33:02.843
> 
> 标签：html, css, drop-down-menu, menu

我正在制作一个导航栏，但似乎无法弄清楚为什么我的下拉菜单选项并排堆叠，而不是一个在另一个之上。我搜索并尝试了几乎所有内容。有什么建议么？

[http://jsfiddle.net/isherwood/rUsNr/](http://jsfiddle.net/isherwood/rUsNr/)

HTML 标记：

```
<ul class="jsddm">
    <li><a href="home">Home</a>
    <li><a href="#">OS</a>
        <ul>
            <li><a href="#">Android</a></li>
            <li><a href="#">iOS</a></li>
        </ul>
    </li>
    <li><a href="#">Category</a>
        <ul>
            <li><a href="#">Category 1</a></li>
            <li><a href="#">Category 2</a></li>
        </ul>
    </li>
    <li><a href="#">Rating</a>
        <ul>
            <li><a href="#">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li><a href="#">5</a></li>
        </ul>
    </li>
    <li><a href="login">Login</a></li>
    <li><a href="register">Register</a></li>
</ul> 
```

css

```
ul.jsddm
{
    margin: 0;
    padding: 0;
    position: relative;
    line-height: 1.5em;

}

ul.jsddm a
    {
    color: #FFF;
    background-color: #333;
    border: 1px solid #444;
    display: block;
    text-decoration: none;
    text-align: center;
    width: auto;
}

ul.jsddm a:hover
{
    color: #000;
    background-color: #FFF;
}

ul.jsddm li
{
    position: relative;
    float: left;
    list-style: none;
    width: 16%;
}

ul.jsddm ul
{
    position: absolute;
    width: 150px;
    top: 25px;
    padding: 0;
    visibility: hidden;
} 
```

我想在代码的 ul.jsddm li 部分中将宽度保持在 16%（这是 bav 栏缩小以适应较小的屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:44:00.680

我相信你的问题是由于以下CSS：

```
ul.jsddm li
{
    position: relative;
    float: left;
    list-style: none;
    width: 16%;
} 
```

这些规则将适用于所有`<li>`……甚至是嵌套的。

试着把它变成：

```
ul.jsddm > li
{
    position: relative;
    float: left;
    list-style: none;
    width: 16%;
} 
```

然后你可能想为你的嵌套添加一些东西`<li>`

```
ul.jsddm li ul li { list-style:none; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:39:58.953

改变

```
ul.jsddm li {
    float: left; 
```

到

```
ul.jsddm > li {
   float: left; 
```

将您的浮动语句限制为第一级菜单项。

[http://jsfiddle.net/isherwood/rUsNr/6](http://jsfiddle.net/isherwood/rUsNr/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:44:15.397

为了保持 16% 的宽度`ul.jsddm li`，你需要做 isherwood 所说的加上：

```
ul.jsddm > li {
    float: left;
}

ul.jsddm li {
    position: relative;
    list-style: none;
    width: 16%;  
} 
```

[http://jsfiddle.net/Gcbrp/](http://jsfiddle.net/Gcbrp/)

# javascript - 等待所有异步函数在 jQuery 中完成

> ID：15777377
> 
> 赞同：2
> 
> 时间：2013-04-03T01:33:16.017
> 
> 标签：javascript, jquery

我正在使用 jQuery 过滤表，一切都很好。此代码运行良好：

```
$("*[id$='EquipmentTypeDropDownList']").change(filterTable);
$("*[id$='StateDropDownList']").change(filterTable);

function filterTable() {
  var $equipmentDropDown = $("*[id$='EquipmentTypeDropDownList']");
  var $stateDropDown = $("*[id$='StateDropDownList']");

  var equipmentFilter = $equipmentDropDown.val();
  var stateFilter = $stateDropDown.val();

  $("tr.dataRow").each(function () {
    var show = true;

    var equimpent = $(this).find("td.equipment").text();
    var state = $(this).find("td.readyState").text();

    if (equipmentFilter != "Any" && equipmentFilter != equimpent) show = false;
    if (stateFilter != "Any" && stateFilter != state) show = false;

    if (show) {
      $(this).fadeIn();
    } else {
      $(this).fadeOut();
    }
  });

  $("table").promise().done(colorGridRows);
}

function colorGridRows() {
  //for table row
  $("tr:visible:even").css("background-color", "#DED7D1");
  $("tr:visible:odd").css("background-color", "#EEEAE7");
} 
```

`colorGridRows`函数更改偶数/奇数行的背景颜色以提高可读性现在，如果我可以用淡入/淡出替换显示/隐藏调用会很好，但我不能，因为着色不起作用（它在 UI 效果完成之前运行。如果它只是一个函数参数 - 我只是创建函数以完成并完成它。但是我的表有很多行并且循环遍历每一行。我如何等待 ALL 完成？

已编辑：代码示例已更新，显示了我如何尝试使用`promise()`但它不起作用。它会开火，但我没有得到奇数/偶数颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:38:31.510

将 promise 对象用于动画。

```
 $("*[id$='StateDropDownList']").change(function () {
            var filtervar = $(this).val();
            $('tr td.readyState').each(function () {
                if (filtervar == "Any" || $(this).text() == filtervar) {
                    $(this).parent().fadeIn();
                } else {
                    $(this).parent().fadeOut();
                }
            }).parent().promise().done(colorGridRows);

            //colorGridRows();
        }); 
```

# c# - MVP 与 DDD 的概念

> ID：15777378
> 
> 赞同：0
> 
> 时间：2013-04-03T01:33:19.453
> 
> 标签：c#, domain-driven-design, mvp

我最近开始用 C# 做 web 开发，我对 MVP 模式和领域驱动设计的概念感到困惑。

一位前辈告诉我，该应用程序分为 5 个不同的层。层次结构是这样的：View、Presenter、Service、Repository、Entity。

以下是我对这些不同层次的理解：

`View:`正在交付给客户端的数据的表示

`Presenter:`代码隐藏。处理客户的请求并将信息发送到服务

`Serivce:`业务逻辑层。操纵数据。

`Repo:` 不完全确定它的作用。

`Entity:`域中唯一的对象，没有两个对象是相同的，除非它们具有相同的身份（属性）

那么，我的描述是否正确？有人可以详细说明吗？另外，Repo 层是做什么的？它是否处理数据库事务？

这可能不是纯粹的 MVP 模式，但似乎这是应用程序的状态，我对所有这些概念都很陌生。如果有人能用更简单的术语向我解释，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:41:10.023

根据我的经验，有一个飞行的冲突。

*   查看 - 呈现数据的实际页面。代码隐藏将实现视图所需的接口。
*   Presenter - 不，不是代码隐藏。代码隐藏将实例化一个 Presenter。代码隐藏实现了 View 接口，并实例化了一个 Presenter（并且通常将自己传递），如下所示：

    ```
    public class CodeBehindPage : System.Web.UI.Page, IViewInterface {
        private Presenter myPresenter;

        public CodeBehindPage() {
            myPresenter = new Presenter(this); // Presenter will require IViewInterface
        }
    } 
    ```

*   服务 - 正确。

*   存储库 - 正确，它处理数据库事务（加载/保存/等）。
*   实体 - 正确。实体是数据库对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T01:59:40.680

我不喜欢将 MVP 设计模式与 N 层架构结合起来。您所描述的更可能是关于 N 层架构。N-Tier 是一种在逻辑之间创建层的架构。

主要有 3 个逻辑，表示逻辑（UI 特定逻辑，例如计算控件的高度或宽度）、业务逻辑（数据操作、验证等）和数据访问（CRUD 操作）。

MVP 设计模式本身只包含 Model、View 和 Presenter。N-Tier 架构中的视图和演示者被视为演示逻辑。模型在 N-Tier 中过于笼统，它可以同时包含业务逻辑和数据访问。MVP 是一种设计，其中视图通过事件驱动与背后的代码进行通信。例如 Asp.Net 和 C# Winform。另一个很好的设计模式是在 ASP.Net MVC 中使用的 MVC。

现在谈谈你对层的理解：

*   视图是 UI。在 Asp.Net 中，它是 .aspx 文件。它被认为是 N-Tier 中的表示逻辑层
*   Presenter 是背后的代码。在 Asp.Net 中，它是 .aspx.cs 文件。它被认为是 N-Tier 中的表示逻辑层
*   服务好，被认为是N-Tier中的业务逻辑层
*   存储库是数据访问。它的主要目的是与数据存储进行通信。它可以是 Xml、平面文件、CSV 或常用数据库。它被认为是 N-Tier 中的数据访问层
*   实体是一个对象，其目的是对数据进行建模，并将在层之间传递。还有一个 POCO 原则，您的实体应该尽可能简单（仅由属性组成）。它的主要目的是让您的实体可以在任何类型的层中使用。

领域驱动设计本身是另一个概念。它是针对业务流程需求设计应用程序的概念。不基于通常由大多数程序员完成的数据。

# javascript - 通过使用自定义变量查找 div 来切换 div

> ID：15777379
> 
> 赞同：0
> 
> 时间：2013-04-03T01:33:20.890
> 
> 标签：javascript, jquery, google-maps-api-3

是否可以在 javascript/jquery 中选择一个 div（例如带有 compid 80 的那个），然后在其中滑动切换内容 div？我知道可以使用 .next()。但是，我需要从谷歌地图信息窗口中的另一段代码调用 slideToggle。

基本上有没有办法用 compid80 抓取 div 并以某种方式调用：

```
$(div with compid80).next().slideToggle('slow') 
```

目前我使用（它工作正常，但我需要在另一个事件发生时手动调用此函数）

```
$(document).delegate(".heading",'click',function(){
    $(this).next().slideToggle('slow');
});

<div class="heading" compid="80" usedspec="33"><div class="content">content in here</div></div>
<div class="heading" compid="81" usedspec="34"><div class="content">content in here</div></div>
<div class="heading" compid="82" usedspec="35"><div class="content">content in here</div></div>
<div class="heading" compid="83" usedspec="36"><div class="content">content in here</div></div>
<div class="heading" compid="84" usedspec="37"><div class="content">content in here</div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:55:58.460

[http://jsfiddle.net/isherwood/nCHbK/](http://jsfiddle.net/isherwood/nCHbK/)

```
$('.heading').each(function() {
    if ($(this).attr('compid') == '80') {
        $(this).find('.content').slideToggle();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:14:05.267

固定使用： $('div[compid="' + compid + '"]').next().slideToggle('slow');

# javascript - 是否可以将 '$(this)' 传递给 jQuery 中的委托用户函数？

> ID：15777380
> 
> 赞同：1
> 
> 时间：2013-04-03T01:33:28.757
> 
> 标签：javascript, jquery

```
function myfunc() {
  alert($(this));
}

$("#SELECTOR").delegate("SELECTOR","click",myfunc); 
```

这是关于单击不同的图像，因此，我真的很想在我的用户函数中使用 $(this) 变量。

那可能吗？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:07:27.890

是的。委托的语法是：

```
$('#container').delegate('selector','event',function(){
//code to respond to event
});//end delegate 
```

这几乎是你已经拥有的，..

一个包含您正在尝试的方法的工作示例在这里 - [http://jsfiddle.net/E9dgU/5/](http://jsfiddle.net/E9dgU/5/)

# arrays - MATLAB，3D曲线交叉xy平面的插值

> ID：15777385
> 
> 赞同：2
> 
> 时间：2013-04-03T01:34:23.023
> 
> 标签：arrays, matlab, indexing

在 Matlab 中，我有一个在 3 维坐标系中穿过 xy 平面的 3D 曲线（具有 3 个坐标的数组）。“曲线”只是一堆 x、y、z 点，它的形状是椭圆形的，横跨 3D 空间并螺旋向原点。它多次穿过 xy 平面，我想在曲线与 xy 平面相交时（即当 z=0 时）插入 x 和 y 坐标。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:47:32.437

假设你有 3 个向量`x`, `y`, 和`z`坐标，

```
crossidx = find(diff(sign(z)) ~= 0); % z(zcross) and z(zcross+1) have different signs
z1 = z(crossidx);
z2 = z(crossidx+1);
dz = z2 - z1;
alpha = -z1;
beta = z2;
xcross = (beta*x(crossidx) + alpha*x(crossidx+1))./dz;
ycross = (beta*y(crossidx) + alpha*y(crossidx+1))./dz;
zcross = 0;
hold on; plot3(xcross, ycross, zcross, '*'); 
```

它应该适用于正到负或负到正交叉。我编写的代码假设只有 1 个零交叉，但我认为它也适用于任意数量的交叉。

# mysql - MySQL在字段中搜索大写，然后用空格替换

> ID：15777386
> 
> 赞同：0
> 
> 时间：2013-04-03T01:34:26.350
> 
> 标签：mysql

我想在列中搜索大写字母，然后用空格和那个字母替换它，以便在大写字母之前有一个空格。

我怎样才能在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:06:18.797

您可以创建特殊功能，您可以在本文中查看示例：

[http://techras.wordpress.com/2011/06/02/regex-replace-for-mysql/](http://techras.wordpress.com/2011/06/02/regex-replace-for-mysql/)

# ios - iOS后台模式

> ID：15777389
> 
> 赞同：10
> 
> 时间：2013-04-03T01:34:45.837
> 
> 标签：ios, background, monitor, mode

我有一个关于在后台运行应用程序的问题。我知道该怎么做，但苹果不喜欢我这样做的方式。

为了让你在同一页面上，我有一个安全应用程序，即使它在后台，我也需要它监控设备。有点像防盗报警器。我正在使用背景音频模式，认为这没关系，因为我会在触发时播放声音。不用说，苹果不喜欢这样。所以我加了一个ping！它在活动时 ping，因此在后台播放背景音频。再一次，他们也不喜欢那样。

我的应用程序也监视加速度计（但并非总是如此，仅在用户选择时）。

我的问题是，像 Skype 这样的应用程序和其他类似应用程序如何能够将状态栏变为红色并留在后台？（甚至一些警报应用程序也会这样做，而不播放任何音频或任何东西）。

此外，我无法使用通知系统，因为如果我正在监控电池电量，它的更新速度不够快。对于我的应用程序，我需要立即响应。

在发布我的问题之前，我也不知疲倦地寻找这个答案（我找到的答案对我不起作用..）:(

我将非常感谢您对此的任何见解，在此先感谢！

（如果您需要更多信息，请询问！）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T02:42:31.770

从我从他们的文档中可以看出，保持持久后台连接的唯一方法似乎是使用他们的七个[后台模式键](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)之一，我可以看到您自从注册后台音频以来一直在尝试。我也知道一些使用此功能的警报应用程序（例如睡眠周期），我的假设是他们也使用背景音频模式，考虑到其他六种模式与他们需要的模式相差甚远。

我认为 Apple 的理由可能是允许这些应用程序这样做，因为他们的应用程序设计为在用户不主动使用手机时（即他们睡觉时）使用，并且需要音频来唤醒用户，而如果您正在运行一个想要始终处于活动状态的安全应用程序，它可能会干扰用户可能使用的其他功能，例如 Skype。当用户使用它时，红色条也将始终保持在设备顶部，他们可能会将其误认为仍在播放的东西，因为通常当出现红色条时，对用户来说意味着他们仍在积极使用某物。同样，我认为唤醒警报应用程序和其他类似的不使用持久音频的应用程序能够摆脱这种情况，因为它们是为手机不活动时使用而设计的，

在其他一些情况下，例如 Nike+（在[此处](https://stackoverflow.com/questions/8716466/how-nike-gps-on-iphone-receives-accelerometer-updates-in-the-background)讨论）和可能的计步器，它们似乎正在使用位置背景模式，因为它们通常还会跟踪您的去向并需要知道距离。在我链接到的那个讨论中，看起来其他人能够通过注册适用于他们的后台模式来获得加速度计更新。您是否尝试过注册位置移动？我可以看到的一个缺点是它可能会更快地耗尽电池寿命，但如果你不经常检查位置，它可能不会太糟糕？另一个是我认为您在位置背景模式下无法直接播放音频，但您可以尝试触发声音通知？:) 如果它适用于您的应用程序，这可能是一个很好的解决方法。

同样，我对这些应用程序能够做到这一点的原因只是基于我看到其他应用程序的运行方式，Apple 接受它们的原因可能不同，但这是我思考为什么你的应用程序因使用这些模式而被拒绝，而其他人能够做到这一点。如果位置不是您想要的，不幸的是，我不确定您的应用程序在做什么，您是否能够以您期望的方式在后台连续操作它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-30T11:18:26.813

每个应用程序都需要响应。用户希望应用程序在打开时就可以准备好内容，因此开发人员应该使用后台模式来使他们的应用程序更加用户友好。

**打开后台模式功能**

1.  转到 Xcode 并打开您的项目。
2.  在您的应用目标中，导航到功能选项卡。
3.  打开后台模式。

**后台获取**

后台获取是一种新模式，可让您的应用始终与最新信息保持同步，同时最大限度地减少对电池的影响。您可以使用此功能在固定时间间隔内下载提要。

开始：

1- 在 Xcode 的功能屏幕中检查 Background Fetch。

2- 在 AppDelegate 的 application(_:didFinishLaunchingWithOptions:) 方法中，

参考：[https ://medium.com/@javedmultani16/background-modes-in-ios-3da25b9e6474](https://medium.com/@javedmultani16/background-modes-in-ios-3da25b9e6474)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:02:08.563

只有当您积极使用使应用保持清醒的活动时，您才能使用背景模式：例如，*持续*播放音频是对音频背景键的有效使用。他们会非常努力地查看您是否真的需要您请求的访问权限，如果不需要，他们会拒绝您（正如您已经发现的那样），因为后台服务比其他服务消耗的电池电量要多得多。

从[文档](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)：

> 这些密钥应谨慎使用，并且只能由提供指定服务的应用程序使用。

短篇小说：我认为您对提议的实施不走运。

# jquery - jQuery：未捕获的 TypeError：无法读取未定义的属性“nodeType”

> ID：15777392
> 
> 赞同：6
> 
> 时间：2013-04-03T01:35:01.087
> 
> 标签：jquery, jquery-ui

我使用 jQUery UI Position 插件： http: [//jqueryui.com/position/](http://jqueryui.com/position/)将我的图标定位在网页上。选择器从数据库中获取并使用 PHP 在 $myselector 变量中输出到 JS。这是我当前的代码：

```
var element_selector='<?php echo $myselector;?>';

$('#inline_docxdiv .Featured.Slider').position({
my: "center",
at: "right top",
of: $(element_selector)

});

//append icons,applicable to all

$(divname<?php echo $uniqueid;?>).append('<div id="inline_docxdiv" class="<?php echo $uniqueid;?>"><div id="helpericons_display"><a class="<?php echo $title_toolsetdisplayed;?>" id="questionmarkicon_inlinedoc" title="Display Explanation"><img src="<?php echo $helper_iconpng;?>"></a><a target="_blank" href="<?php echo admin_url().'post.php?post='.$id_toolsetdisplayed.'&action=edit';?>" class="<?php echo $title_toolsetdisplayed;?>" id="sourceicon_inlinedoc" title="View source"><img src="<?php echo $helpersource_iconpng;?>"></a></div></div>'); 
```

但是，图标未正确附加，并在控制台中返回错误：

> 未捕获的类型错误：无法读取未定义的属性“nodeType”

奇怪的是，如果我在 JS 代码中硬编码选择器（不是由 PHP 输出），一切正常，并且控制台中没有返回错误。这是我硬编码元素选择器的代码：

```
var element_selector='.idoc-featured-slider'; 
```

有没有办法使用 PHP 输出选择器而不遇到错误？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-07T22:15:01.520

I ran into a similar issue. I was getting the following error:

> Uncaught TypeError: Cannot read property 'nodeType' of undefined

With these dialog position configuration values:

```
position: {my: "center", at: "left top", of: "window"} 
```

Per the jQuery [UI documentation](http://api.jqueryui.com/dialog/#option-position), the value of the "of" property is an object rather than a string. So, when I changed the position values to the following:

```
position: {my: "center", at: "left top", of: window} 
```

the error disappeared.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-22T13:48:07.320

问题是由于`of:$()`对象/选择器无效时无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T21:00:46.697

如果任何标签未关闭，请检查您的代码。我尝试了同样的方法，它工作正常。显然，我有一个额外的标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-28T09:31:25.127

通常，当您不应用 prop() 之类的方法的属性时，会发生这种错误。例如：`$(#"id").prop()`如果您没有指定其属性，也会发生此错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-30T08:22:00.160

在我的情况下，我只是在我的错误 *[DataTables 警告：表 id=bootstrap-data-table2 - Requested unknown parameter '0' for row 0' 中更改了以下内容。有关此错误的更多信息，请参阅[http://datatables .net/tn/4]](http://datatables.net/tn/4])* 不见了：

从：

```
 [enter image description here][1] <tbody>
                                            @foreach (var item in Model.HRMS_Tbl_ExpenseClaimModelList)
                                            {

                                                <tr>
                                                    @if (item.Approved == "1")
                                                    {
                                                        <td>@item.Date</td>
                                                        <td>@item.Date</td>
                                                        <td>@item.Type</td>
                                                        <td>@item.Amount</td>
                                                                               }
                                                </tr>

                                            }
                                        </tbody>

                        TO:

                                         <tbody>
                                            @foreach (var item in Model.HRMS_Tbl_ExpenseClaimModelList)
                                            {
                                              if (item.Approved == "1")
                                                    {
                                                <tr>

                                                        <td>@item.Date</td>
                                                        <td>@item.Date</td>
                                                        <td>@item.Type</td>
                                                        <td>@item.Amount</td>

                                                </tr>
                                                    }
                                            }
                                        </tbody> 
```

# vb.net - 如何在列表框或列表视图中添加组合框项目

> ID：15777393
> 
> 赞同：0
> 
> 时间：2013-04-03T01:35:03.197
> 
> 标签：vb.net, listview, listbox

我想知道要在我的项目中使用的控件是 Listview 还是 listbox ？？？。我的项目中有一个组合框控件我想要做的是，当我在组合框中选择 1 个项目时，它会自动添加到列表框或列表视图中，当我选择超过 1 个项目时，我想将其添加到列表框或列表视图中的换行符上。 ..

是不是很简单，请帮我在列表框或列表视图中做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:40:10.127

```
Listbox > Is for viewing too but user can select it
Listview > Is for viewing only, user cannot select also it viewing by five view directly cause it's for viewing only 
```

如果您的项目希望从 Combobox 选择的内容中查看列表，那么您只需选择列表视图，但如果您还想查看用户可以选择它，最好使用列表框，这取决于您。您还可以通过将鼠标光标聚焦到工具上来了解工具的工作原理，然后它会弹出一个工具提示，说明该工具的用途。

```
Private Sub ComboBox1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ComboBox1.SelectedIndexChanged
        ListView1.Items.Add(ComboBox1.SelectedIndex)
    End Sub 
```

这是在列表视图中查看您在组合框中选择的代码的代码

要清除列表视图或列表框中的所有项目，只需写入您的 form_load

```
Listview.items.clear 
```

为什么我说在表单加载中，因为列表只是为了查看，当然每次表单开始运行时，它都会需要空白列表，所以最好放在表单加载中

**更新**

删除列表框中选定的索引

```
 Private Sub ListBox1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ListBox1.SelectedIndexChanged
        ListBox1.Items.Remove(ListBox1.SelectedItem)
    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-02T20:33:01.930

可以通过多种方式选择 ListView 项目 在 ListBox 的“属性”窗口中，激活属性允许通过单击或单击两次来激活项目。这是如何使用所选项目的示例

```
 If Me.ListView1.SelectedItems.Count = (1) Then
    'Declare the selected item
     Dim lviSelectedItem As ListViewItem = Me.listView1.SelectedItems(0)
    'Now you can use it
    lblLabel1.Text = lviSelecetedItem.Text

    Else
    lblLabel2.Text = "You can make Items selectable  by switching CheckBoxes property to True in the Properties windows and using CheckBox event handlers"
    End If 
```

# php - 如何从外部页面获取整个元素？

> ID：15777394
> 
> 赞同：0
> 
> 时间：2013-04-03T01:35:09.450
> 
> 标签：php, jquery

我怎样才能得到一个

```
<table class="precios"> 
```

来自 HTML 格式的另一个网址（www.example.com）？因为使用 DOM 我可以获取表格，但是以数组模式。

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:41:27.293

假设您没有跨域问题，您可以使用[`.load()`](http://api.jquery.com/load/)：

```
$container.load('http://www.example.com/path/to/page table.precios'); 
```

Whereby`$container`是一个 jQuery 对象，您希望将表格“保存”到其中。

在 PHP 中，您可以这样解决：

```
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTMLFile('http://www.example.com/path/to/page.html');
libxml_clear_errors();
$xp = new DOMXPath($doc);
$table = $xp->query('//table[@class="precios"]')->item(0);

echo $doc->saveHTML($table); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:39:25.827

向该页面发出 AJAX 请求并用于`.find()`获取元素

```
$.ajax( {
  url: myUrl,
  success: function(html) {
    table = $(html).find(".precious");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:41:29.193

您还可以使用 cURL（如果已安装）并在 php 中使用 DOMDocument 类

# javascript - 如何在输入更改事件之前获取 Bootstrap 预输入点击结果

> ID：15777398
> 
> 赞同：4
> 
> 时间：2013-04-03T01:35:21.620
> 
> 标签：javascript, twitter-bootstrap, onchange, bootstrap-typeahead

我正在尝试使用 bootstraps typeahead 作为用户的灵活选择。因此，如果该项目是已知的，他们会选择它，如果不是，则会打开一个对话框，允许他们输入一个新项目。

我通过观察输入上的更改事件来做到这一点，如果输入 val 不在源数组中（对于预输入），则向用户显示“添加项目”对话框。问题是，如果用户单击选项之一，则在预先输入有机会设置 val 之前发送更改事件。这是因为单击会导致文本模糊。

我想检查活动元素以解决此问题，因此在更改事件中查看 document.activeElement 并查看它是否是 typeahead 选项之一，这不起作用并返回了整个 body 元素。

这是代码的精简版本：

**html**

```
<div id="contactModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Unknown Contact</h3>
  </div>
  <div class="modal-body">
    <p>The contact you have entered is unknown. Press cancel to enter a different contact or fill out the details below to create a new contact</p>
    <label>Name</label>
    <input id="modal_contact"  type="text" placeholder="dealership contact" value=""/>
    <label>Email</label>
    <input id="modal_contact_email" type="text" placeholder="dealership contact" value=""/>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button id="save" class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

**Javascript**

```
var contacts = ['pete','geoff'];

$('.typeahead').typeahead({source:contacts, updater : function(item){
    console.log('updater fired'); //fires after first change event
    return item;
}});

$('input').change(function(ev){
    console.log($(ev.target).val());

    if ($.inArray($(ev.target).val(), contacts) < 0)
        $('#contactModal').modal();
}) 
```

还有一个 JSFiddle 版本[http://jsfiddle.net/k39vM/](http://jsfiddle.net/k39vM/)

有谁知道我如何测试用户是否点击了一个提前输入来确定这是否导致了更改事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T02:50:29.830

我之前的建议实际上并没有奏效，因为正如您所提到的，有一个意外事件`blur`触发了菜单上的`change` *before*事件。`click`我曾假设它与方法`this.hide()`内部的调用有关`Typeahead.prototype.select`。

但是，经过一番反复试验，我确实认为我可能找到了[解决方法](http://jsfiddle.net/KTKFh/)。实际上，导致问题的不是方法中的`this.hide()`调用。`select`知道用户可以通过两种方式触发选择有助于理解有希望的解决方法（我只在 Chrome 中测试过）：使用键盘，例如按 Enter 或单击项目。结果，知道单击是两者的问题子项，我注意到`mousedover`当用户将鼠标悬停在下拉菜单上时，该事件被保持。

因此，可以在事件中手动*忽略奇怪的行为。*`change`为了简化确定实际导致*下一个* `change`事件的原因的过程，我使用了一个名为“ `selected`”的不同（自定义）事件来表示用户更改了值而不是标准`change`。不幸的是，当属性为时，您仍然必须手动忽略`change`事件：`mousedover``true`

简化的 HTML（我使用了这个`p`标签，因为我发现 Chrome 在调试 JSFiddle 的 JavaScript 时遇到了麻烦，并且与控制台结合使用会导致糟糕的时间）：

```
<input class="typeahead " type="text" placeholder="contact" value="Peter skillet"></input>
<input type="text"></input>
<p id="text" /> 
```

`console.log`JavaScript（对于那些感兴趣的人来说，文本可以替换为舒适）：

```
var contacts = ['pete', 'geoffrey'];

var $text = $("#text");
var typeahead = $('.typeahead').typeahead({source: contacts}).data('typeahead');

typeahead.select = function () {
    var val = this.$menu.find('.active').attr('data-value');
    this.$element.val(this.updater(val))
        .trigger('selected'); // <- unique event
    return this.hide()
};

$('input.typeahead').on('change', function (e) {
    var $target = $(e.target);
    if (typeahead.mousedover) {
        $text.html($text.html() + "mousedover [ignored selection]<br />");
    }
    else if ($.inArray($target.val(), contacts) < 0) {
        $text.html($text.html() + "show add<br/>");
    }
}).on('selected', function () {
    $text.html($text.html() + "selected<br />");
}); 
```

作为参考，这是默认`select`方法：

```
select: function () {
  var val = this.$menu.find('.active').attr('data-value')
  this.$element
    .val(this.updater(val))
    .change()
  return this.hide()
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-28T18:56:42.320

该问题的一个更简单的解决方案是在您的点击事件中包含以下内容：

```
var typeahead = $(this).data("typeahead");
if (typeahead && this.value != typeahead.$menu.find('.active').attr('data-value')) 
  return; 
```

如果附加了预输入，第一行将检索它。第二个将确保当前值与所选值匹配。

您还可以`typeahead.mousedover`在 if 中进行检查以允许无效（意味着不是预先输入选项）输入在控件失去焦点而不进行选择时仍然触发默认更改行为。

# networking - 关于以太网、MII、SGMII、RGMII 和 PHY 的说明

> ID：15777399
> 
> 赞同：40
> 
> 时间：2013-04-03T01:35:21.870
> 
> 标签：networking, ethernet

我主要来自嵌入式软件背景，因此我对硬件的一般知识非常有限。我一直认为以太网是计算机上连接以太网电缆的小物理连接器。从软件的角度来看，您需要做的就是安装驱动程序（在 Windows 中）或配置 Linux 内核以包含以太网驱动程序。

问题：

但是当我开始向下一层（朝向硬件）并查看各种数据表和原理图时，我开始遇到诸如 PHY、MII、SGMII、RGMII 等术语。现在我对什么构成有点困惑以太网？例如，当我说 Intel 82574L 1.0 Gbps 以太网端口时，所有这些术语都适用于哪里？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-03T01:52:13.347

让我试着解释一下：

1.  [MII、SGMII、RGMII是MAC块](https://en.wikipedia.org/wiki/Medium_access_control)与PHY芯片之间的三种接口。Intel 82574L 是一款 MAC 芯片。看下图：

    ```
    _______         __________                  ___________
     CPU  | PCI-E   |        |  MII/SGMII/RGMII |         |
     or   |<=======>| MAC    |<================>| PHY     |<====>physical interface 
     board| or else |        |                  |         |
    _______         __________                  ___________ 
    ```

    关于MII（100Mbps）、SGMII（1Gbps，串行）、RGMII（1Gbps，缩减）定义的详细信息，您可以google它们。

2.  NIC（Network Interface Card）基本上由一个MAC块和相关的PHY芯片以及其他外围模块组成。还有一个以太网设备驱动程序应该与 NIC 硬件一起工作。MAC块有一个与控制CPU或PC主板的接口，例如PCIe总线或其他。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-01-27T09:43:44.523

一些定义：

*   MAC - 媒体访问控制器。这是系统的一部分，它将来自操作系统的数据包转换为字节流，以放置在线路（或光纤）上。通常通过诸如 PCI Express 之类的东西连接到主机处理器（例如）。
*   PHY - 物理层 - 将来自 MAC 的字节流转换为一根或多根电线或光纤上的信号。
*   MII - 媒体独立接口。只是 MAC 和 PHY 之间的一组标准引脚，因此 MAC 不必知道或关心物理介质是什么，而 PHY 不必知道或关心主机处理器接口的外观。

MII 很久以前就已经标准化，支持 100Mbit/sec 的速度。还提供使用更少引脚的版本，RMII（“R”表示减少）。

对于千兆速度，使用 GMII（“G”表示千兆）接口，以及称为 RGMII 的减少引脚数版本。还提供了一个称为 SGMII 的引脚数非常少的版本（“S”表示串行），它需要 MAC 的 IO 引脚上的特殊功能，而其他 xMII 是相对传统的逻辑信号。

在其他情况下还使用了更多种类的接口，其中可能链接到 Wikipedia MII 页面：

[http://en.wikipedia.org/wiki/Media_Independent_Interface](http://en.wikipedia.org/wiki/Media_Independent_Interface)

关于您的特定英特尔芯片问题-据我所知（数据表链接似乎已死），该芯片是带有 PCIe 的 MAC。因此它将位于主机上的 PCIe 总线和某种千兆物理层 (PHY) 之间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-17T07:25:48.680

您可能想查找一些经常听到的术语“OSI 的 7 层”；

*   以太网 PHY 对应于物理层，它由通信的字面物理组件组成。

*   以太网 MAC（不是 Mac 地址，而是媒体访问控制器）对应于数据链路层，数据链路层负责在将帧发送到物理层之前对其进行排列。

    MII，RMII，Auto-Negotion等配置都是从这两个配置的。还有一些库可以让你的生活变得轻松。

*   网络层负责数据包的路由。诸如 IP 和 DHCP 之类的协议被认为是在这一层中。此外，这一层是第一个完全基于软件的最低层。如果您使用的是轻量级 IP，例如 ip 和 netif 库是其他一切构建的基础。

*   传输层是可以找到 TCP 和 UDP 等传输协议的地方。

希望对您有所帮助，遗憾的是，我对上层了解不多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-11T03:10:15.093

Intel 82574L 芯片包含 MAC 和 PHY。

请参阅此处提供的数据表中第 15 页的架构框图：[https://ark.intel.com/content/www/us/en/ark/products/32209/intel-82574l-gigabit-ethernet-controller。 html](https://ark.intel.com/content/www/us/en/ark/products/32209/intel-82574l-gigabit-ethernet-controller.html)

MAC 和 PHY 都在那里，但从我非工程师的角度来看，我对 MII 连接感到困惑，因为我期待两个独立的芯片。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-06T23:59:07.057

在非常基本的术语中，当您将以太网电缆连接到笔记本电脑时，您就可以访问互联网。以太网端口是上例中的接口。同样，有一个接口将您的以太网媒体访问控制 (MAC) 连接到以太网 PHY。让我在这里分解一下以太网 MAC 是 NIC（网络接口卡）的地址。以太网 PHY 是物理层，充当以太网端口和以太网 MAC 之间的接口。现在，以太网 MAC 从处理器获取打包器将其转换为位，而以太网 PHY 将位转换为电信号。MAC 和 PHY 之间的接口是 MII/RGMII(etc) 发挥作用的地方。媒体独立意味着可以使用不同类型的 PHY 设备连接到不同的传输媒体（即双绞线、光纤等），而无需重新设计或更换 MAC 硬件。

# r - R 2.15.3 的 R 包中的 searchTwitter()。大量重复

> ID：15777400
> 
> 赞同：1
> 
> 时间：2013-04-03T01:35:23.970
> 
> 标签：r, twitter, duplicates

从 searchTwitter 输出中删除重复项工作正常，问题是 searchTwitter() 函数提供的原始推文数量始终为 100，无论 n=1000 或 n=3000。

这是我使用的代码：

```
tweets <- searchTwitter("#rstats", n = 1000)
tweets.df <- do.call("rbind", lapply(tweets, as.data.frame))

df.undup <- tweets.df[duplicated(tweets.df) == FALSE,] 
dim(df.undup) 
```

结果数据框总是有 100 行，这意味着原始推文的数量是 100。

```
dim(df.undup)
tweets [1] 100 12 
```

我的问题是：这是否与 twitter API 有关，我该如何解决这个问题。

我在 Mac OS X 10.7.5 上使用 R 版本 2.15.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:02:55.183

不幸的是，目前可用的`twitteR`软件包版本不能正常工作。您可以从 Geoff Jentry 的网页上获取似乎比 CRAN 上可用的版本更好的最新版本。

[http://geoffjentry.hexdump.org/twitteR_1.1.5.tar.gz](http://geoffjentry.hexdump.org/twitteR_1.1.5.tar.gz)

它需要 ROAuth 0.9.4（也尚未在 CRAN 上更新）

[http://geoffjentry.hexdump.org/ROAuth_0.9.4.tar.gz](http://geoffjentry.hexdump.org/ROAuth_0.9.4.tar.gz)

我有一种感觉，除非您可以编译软件包（即除非您不需要二进制软件包），否则您可能无法让它在 MacOSX 上运行。

我仍然被这些新版本欺骗，但没有那么多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:57:35.337

我已经设法安装了这些软件包。这是我使用的代码，以防有人感兴趣。但问题仍然存在，原始推文仍然只有 100 条。

我想知道为什么我们会得到关于重复的不同结果。

```
install.packages("~/Downloads/ROAuth_0.9.4.tar.gz",
             repos=NULL,type="source",
             INSTALL_opts="--no-multiarch")

install.packages("~/Downloads/twitteR_1.1.5.tar.gz",
             repos=NULL,type="source",
             INSTALL_opts="--no-multiarch")

library(twitteR)
library(ROAuth)

tweets <- searchTwitter("#rstats", n = 1000)
tweets.df <- do.call("rbind", lapply(tweets, as.data.frame))

df.undup <- tweets.df[duplicated(tweets.df) == FALSE,]
dim(df.undup)

dim(df.undup)
[1] 100  12 
```

# time - setConnectTimeout 导致挂起？

> ID：15777403
> 
> 赞同：0
> 
> 时间：2013-04-03T01:35:39.723
> 
> 标签：time, out

嗨，我正在尝试测试代理，但如果我将 setConnectTimeout 设置为超过 1500，它会导致程序挂起，它只会死，什么都不会打印我的处理器和内存，它做的很多，它就死了，有人知道解决方案吗？代码是
HttpURLConnection inSite = (HttpURLConnection) site.openConnection(代理);
inSite.setConnectTimeout(2000); //如果设置在1500以下就可以了

这是一个真正的问题，因为大多数代理此时响应速度太慢，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T11:16:55.573

private final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);

```
public void sixtymin() {

    final Runnable logger= new Runnable() {//instansiation

        @Override
        public void run() {
            System.out.println(System.currentTimeMillis());//code to execute
        }
            //You application logic as shown in the question
        };
    final ScheduledFuture<?> loggerHandle =
        scheduler.scheduleAtFixedRate(logger, 0, 5, SECONDS );//action,delay before first run,delay between,unit 
```

这是解决方案上面的代码每5秒打印一次，所以我用它来终止进程超时

# c++ - 这个长长的“if argA == argB do ...”列表是否有替代方案？

> ID：15777404
> 
> 赞同：1
> 
> 时间：2013-04-03T01:35:39.777
> 
> 标签：c++, oop, enums

**编辑：由于attack.condition 偶尔会有多个值，switch 语句将不起作用！**

所以我有这个**将会增长的**枚举：

```
enum Condition {    Null            =   0x0001,
            SelfIsUnderground   =   0x0002,
            SelfIsGround        =   0x0004,
            SelfIsAir       =   0x0008,
            SelfIsWater     =   0x0010,
            OtherIsUnderground  =   0x0020,
            OtherIsGround       =   0x0040,
            OtherIsAir      =   0x0080,
            OtherIsWater        =   0x0100,
            Tile            =   0x0200,
            CONDITION_COUNTX    =   0x03FF}; 
```

这个功能也将增长：

```
bool Attack::CanBeDone(Spirit* pSelf, Spirit* pTarget,Map* pMap)
{
    if(this->condition!=Null)
    {
        if(this->condition & SelfIsUnderground)
            if(pSelf->GetcurrentLayer()!=Underground)
                return false;

        if(this->condition & SelfIsGround)
            if(pSelf->GetcurrentLayer()!=Ground)
                return false;

        if(this->condition & SelfIsAir)
            if(pSelf->GetcurrentLayer()!=Air)
                return false;

        if(this->condition & SelfIsWater)
            if(pSelf->GetcurrentLayer()!=Water)
                return false;

        if(this->condition & OtherIsUnderground)
            if(pTarget->GetcurrentLayer()!=Underground)
                return false;

        if(this->condition & OtherIsGround)
            if(pTarget->GetcurrentLayer()!=Ground)
                return false;

        ... 
```

除了一遍又一遍地写，有没有替代方法：

```
 if(this->condition & arg)
        if(pSelf->GetcurrentLayer()!=value)
            return false; 
```

?

奖励：如果我给 Condition::Null 值 0x0000、SelfIsUnderground 0x0001、SelfIsGround 0x0002 并再次使用 2 的幂，它会起作用吗？最终，Tile 的值将是 0x0100。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:57:50.743

首先，我会写这样的东西：

```
enum Condition {    Null            =   0x0001,
            SelfBase        =   0x0002,
            SelfIsUnderground   =   SelfBase * (1 << Underground),
            SelfIsGround        =   SelfBase * (1 << Ground),
            SelfIsAir       =   SelfBase * (1 << Air),
            SelfIsWater     =   SelfBase * (1 << Water),
            SelfMask        =   SelfBase * ((1 << Max) - 1),
            OtherBase       =   0x0020,
            OtherIsUnderground  =   OtherBase * (1 << Underground),
            OtherIsGround       =   OtherBase * (1 << Ground),
            OtherIsAir      =   OtherBase * (1 << Air),
            OtherIsWater        =   OtherBase * (1 << Water),
            OtherMask       =   OtherBase * ((1 << Max) - 1),
            Tile            =   0x0200,
            CONDITION_COUNTX    =   0x03FF}; 
```

（假设`Underground == 0`和`Max == Water + 1`）。然后，长列表简化为两个相当清晰的表达式：

```
if ( (SelfMask & this->condition & (SelfBase * (1 << pSelf->GetcurrentLayer()))) )
    return false;

if ( (OtherMask & this->condition & (OtherBase * (1 << pTarget->GetcurrentLayer()))) )
    return false;

return true; 
```

当您扩展枚举时，这仍然是正确的。但是请注意，仍然存在一些冗余（例如，如何定义`OtherBase`和`Tile`定义），这也可以减少。静态断言可以帮助确保`Condition`枚举是明确定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:10:21.410

如果将`Layer`和`Condition`枚举绑定在一起，则可以在以下行中编写一些内容：

```
enum Condition {    Null            =   0x0001,
    SelfIsUnderground   =   0x0002,
    SelfIsGround        =   0x0004,
    SelfIsAir       =   0x0008,
    SelfIsWater     =   0x0010,
    OtherIsUnderground  =   0x0020,
    OtherIsGround       =   0x0040,
    OtherIsAir      =   0x0080,
    OtherIsWater        =   0x0100,
    Tile            =   0x0200,
    CONDITION_COUNTX    =   0x03FF};

enum Layer
{
    Ground = SelfIsGround,
    Underground = SelfIsUnderground,
    Air = SelfIsAir,
    Water =  SelfIsWater
};

struct Spirit
{
    Layer GetcurrentLayer() const;

};

struct Map;

struct Attack
{
    Condition condition;
    bool CanBeDone(Spirit* pSelf, Spirit* pTarget,Map* pMap)
    {
        return (condition & pSelf->GetcurrentLayer() )&&
             ( (condition / 0x10) & pTarget->GetcurrentLayer());
    }

}; 
```

更有可能的是，我希望您根据 来定义`Condition`，`Layer`但这只是细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:33:16.417

我会说`Condition`完全放弃枚举，而改用结构。自我和目标的条件是分开的，应该这样对待

```
enum Layer : char //only takes 1 byte
{
    Ground      = 1<<0,
    Underground = 1<<1,
    Air         = 1<<2,
    Water       = 1<<3
};
struct Condition {
    Layer Self;
    Layer Target;
};
bool Attack::CanBeDone(Spirit* pSelf, Spirit* pTarget,Map* pMap) {
    return this->Condition.Self & pSelf->GetcurrentLayer() 
        && this->Condition.Target & pTarget->GetcurrentLayer();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T02:46:39.770

这就是使用位掩码和按位运算过早优化所获得的结果；没有简单的选择。

为什么不`std::vector<Layer> selfLayers, otherLayers`呢？（或者你不能有多个图层 - 你的代码暗示你可以。）
或者也许使用从图层到 requiredConditionBits 的映射？

另外，我不明白为什么`Attack`该类存储两个`Spirit`s 的条件。谁先设置`Attack::condition`？

我会首先不对不是位的事物使用位图，也对不是枚举的事物使用枚举。我会考虑花一些时间创建简单的类（例如`Layer`, `Condition`）和辅助函数（`Attack::getSourceLayer`也许？我太困惑了，无法确定。）我还会检查我的类关系以确保`Attack`确实需要`condition`标志等。

# javascript - 如何在ckeditor中包装选定的文本

> ID：15777407
> 
> 赞同：9
> 
> 时间：2013-04-03T01:35:53.207
> 
> 标签：javascript, ckeditor

我想将选定的单词包装`CKEditor`在一个`<p>`元素中。

从：

```
<p>This is a paragraph. And this is Selected text.</p> 
```

到：

```
<p>This is a paragraph. And this is</p>
<p class="myclass">Selected text.</p> 
```

我找到了一些代码：

```
( function() {
    CKEDITOR.plugins.add( 'qna', { 
        init: function( editor ) {
            editor.addCommand( 'insertQnA', { 
                exec : function( editor ) {    
                    if(CKEDITOR.env.ie) {
                        editor.getSelection().unlock(true); 
                            var selected_text = editor.getSelection().getNative().createRange().text; 
                    } else { 
                        var selected_text = editor.getSelection().getNative();
                    }
                    editor.insertHtml('[before]' + selected_text + '[after]'); 
                } 
            }); 
            editor.ui.addButton( 'qna', { 
                label: 'Insert QnA', 
                command: 'insertQnA', 
                icon: this.path + 'images/qna.png'
            }); 
        } 
    });
})(); 
```

我想用 and 替换`[before]`and`[after]`但`<p class"myclass">`它`</p>`不起作用。

我是 JS/Jquery 的新手。我希望你能给我一些启示。

**编辑：来自 Spon 的回复。**

```
( function() {
  CKEDITOR.plugins.add( 'qna', { 
    init: function( editor ) {
      editor.addCommand( 'insertQnA', { 
        exec : function( editor ) {    
          editor.applyStyle(new CKEDITOR.style({
            Element : 'p', 
            Attributes : { class : 'Myclass' }, 
            Styles : { color : '#ff0000','font-family' : 'Courier'} 
          }));
        } 
      }); 
      editor.ui.addButton( 'qna', { 
        label: 'Insert QnA', 
        command: 'insertQnA', 
        icon: this.path + 'images/question.png'
      }); 
    } 
  });
})(); 
```

`<span>`上面的代码出于某种未知原因将选定的文本/单词包装在一个元素中。

例子：

从...

```
<p>This is a paragraph. And this is Selected text.</p> 
```

到...

```
<p>This is a paragraph. And this is <span>Selected text.</span></p> 
```

这不是我想要的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-03T09:47:05.503

```
exec : function( editor ) {
  var selected_text = editor.getSelection().getSelectedText(); // Get Text
  var newElement = new CKEDITOR.dom.element("p");              // Make Paragraff
  newElement.setAttributes({style: 'myclass'})                 // Set Attributes
  newElement.setText(selected_text);                           // Set text to element
  editor.insertElement(newElement);                            // Add Element
} 
```

这将解决它。如您所见，这是 Exec 部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T06:37:22.347

重复请参阅[Stackoverflow：Ckeditor 选择包装](https://stackoverflow.com/questions/15568732/ckeditor-inline-selection-wrapping)

```
editor.applyStyle(new CKEDITOR.style({Element : 'p', Attributes : { class : 'Myclass' }, Styles : { color : '#ff0000','font-family' : 'Courier' } )); 
```

这段代码确保如果您有多个块级选择，您将保持相同的结构。（如果您将 p.myclass 设为内联课程）。

```
<p>This is a paragraph. And this is </p><p> Selected text.</p> 
```

此示例将被合并并输出为：

```
<p>This is a paragraph. </p><p class="myClass">And this is  Selected text.</p> 
```

但是这个例子：

```
<div>This is a paragraph. And this is</div><div>  Selected text.</div> 
```

此示例将被合并并输出为：

```
<div>This is a paragraph. <P class="myclass">And this is</p></div><div><P class="myclass">  Selected text.</p></div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-20T13:05:39.753

值得注意的是 CKEDITOR.style 语法在 CKEditor 4 中（显然）发生了变化；使用 editor.applyStyle() （在某些情况下更可取，这样您就不会得到一堆嵌套的 HTML），`editor.applyStyle()`将问题的第二个示例中的节更改为：

```
editor.applyStyle(new CKEDITOR.style({
        element : 'p', 
        attributes : { class : 'Myclass' }, 
        styles : { color : '#ff0000','font-family' : 'Courier'} 
      })
); 
```

注意键现在都是小写的。

如果他们[记录下来](http://docs.ckeditor.com/#!/api/CKEDITOR.style)，那真的很有帮助——目前唯一的文档是“TODO ...”！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-30T12:38:26.253

如果您想要一个适用于选择文本和任意数量元素的通用解决方案，那么这将起作用：

```
var selectedHtml = "";
var selection = editor.getSelection();
if (selection) {
    selectedHtml = getSelectionHtml(selection);
}
editor.insertHtml('something' + selectedHtml + 'something'); 
```

您将需要两个附加功能：

```
/**
    Get HTML of a range.
*/
function getRangeHtml(range) {
    var content = range.extractContents();
    // `content.$` is an actual DocumentFragment object (not a CKEDitor abstract)
    var children = content.$.childNodes;
    var html = '';
    for (var i = 0; i < children.length; i++) {
        var child = children[i];
        if (typeof child.outerHTML === 'string') {
            html += child.outerHTML;
        } else {
            html += child.textContent;
        }
    }
    return html;
}
/**
    Get HTML of a selection.
*/
function getSelectionHtml(selection) {
    var ranges = selection.getRanges();
    var html = '';
    for (var i = 0; i < ranges.length; i++) {
        html += getRangeHtml(ranges[i]);
    }
    return html;
} 
```

请注意，在 CKEditor 4.5 中，您实际上具有`getHtml`功能，因此`getRangeHtml`可以通过使用`content.getHtml()`. 请参阅[文档片段文档](http://docs.ckeditor.com/#!/api/CKEDITOR.dom.documentFragment)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-17T04:35:10.257

它适用于ckeditor中的图像和文本

```
var selection = CKEDITOR.instances['content'].getSelection();
if (selection.getType() == CKEDITOR.SELECTION_ELEMENT) {
  var selectedContent = selection.getSelectedElement().$.outerHTML;
} else if (selection.getType() == CKEDITOR.SELECTION_TEXT) {
  if (CKEDITOR.env.ie) {
    selection.unlock(true);
    selectedContent = selection.getNative().createRange().text;
  } else {
    selectedContent = selection.getNative();
    console.log("The selectedContent is: " + selectedContent);
  }
} 
```

这里的内容是 textarea id

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-16T14:25:27.067

此代码示例为 CK 编辑器添加带有按钮的插件，该编辑器使用类“vip-content”包装 html。它处理每种类型的元素：单击文本内部、单击元素（例如 img）或选择一些元素（一些代码行）。

```
(function () {
const WRAP_CONTENT_CLASS = 'vip-content';

function getSelectionHtml(selection) {
    var ranges = selection.getRanges();
    var html = '';

    for (var i = 0; i < ranges.length; i++) {
        html += ranges[i].extractContents().getHtml();
    }

    return html;
}

CKEDITOR.plugins.add('wrapcontent', {
    init: function (editor) {
        editor.addCommand('WrapContent', {
            exec: function () {
                var selection = editor.getSelection();
                var div = new CKEDITOR.dom.element('div').addClass(WRAP_CONTENT_CLASS);

                // Process element
                if (selection.getSelectedElement()) {
                    div.append(selection.getSelectedElement());
                    editor.insertElement(div);

                    return;
                }

                if (selection.getNative().type === 'Caret') {
                    editor.applyStyle(new CKEDITOR.style({
                        element: 'div',
                        attributes: {class: WRAP_CONTENT_CLASS},
                    }));
                } else {
                    var html = getSelectionHtml(selection);
                    if (html !== '') {
                        div.setHtml(html);
                        editor.insertElement(div);
                    }
                }
            }
        });

        editor.ui.addButton('WrapContent', {
            label: 'Wrap content',
            toolbar: 'insert',
            command: 'WrapContent',
            icon: this.path + 'icons/icon.png'
        });
    }
});
})(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-02T00:46:49.413

我发现这种方式可以更好地获得样式的添加删除效果：

```
CKEDITOR.plugins.add('my_style', {

    init: function (editor) {
        'use strict';
        editor.addCommand('my_style', {
            exec: function (editor) {
                var myStyle = new CKEDITOR.style({
                    element: 'span',
                    attributes: {class: 'my_style'}
                });

                if (myStyle.checkActive(editor.elementPath(), editor)) {
                    editor.removeStyle(myStyle);
                } else {
                    editor.applyStyle(myStyle);
                }
            }
        });
    }
}); 
```

# iphone - iOS：从 UITableView 动态添加数据到 NSArray

> ID：15777408
> 
> 赞同：0
> 
> 时间：2013-04-03T01:35:56.560
> 
> 标签：iphone, ios, uitableview, uitextfield

我有一个 UITableView，其中有一个自定义原型单元格，在另一个类 (CustomCell) 中定义，其中有一个 UITextField。每次我按下按钮时，它都会调用一个名为 addItem 的方法，该方法会创建一个新单元格。我希望 UITextFields 中的文本进入一个数组。为了更好地解释它，如果我向 UITableView 添加 3 个单元格并在相应的 UITextFields 中输入 3 个文本，我希望第一个单元格中的文本进入索引 0 中的数组，第二个单元格中的文本进入索引 1以及第 3 个单元格中的文本到索引 2。我最大的问题是我希望能够回到单元格 1 中的 UITextField 并对其进行更新，并让它动态更新与其对应的 NSArray 对象，即一个在索引 0。我不知道如何处理它。有人可以帮忙吗？？？非常感谢你！！

我的代码（obs：itemTable 是 UITableView）：

主视图控制器.m

```
@implementation addViewController{
    NSInteger n;
    NSString *aid;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(void)viewWillAppear:(BOOL)animated{
    n=1;
    aid=@"";
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{

    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    return n;

}

- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier= @"Cell";

    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }

    cell.itemNumber.text=[NSString stringWithFormat:@"Item %d",indexPath.row];

    return cell;

}
- (IBAction)addItem:(UIButton *)sender {
    ++n;
    [_itemTable reloadData];
}
- (IBAction)removeItem:(UIButton *)sender {
    if (n>=0)--n;
    [_itemTable reloadData];
} 
```

自定义单元格.m：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {_itemValue = [[UITextField alloc]init];

        _item = [[UILabel alloc]init];

        [self.contentView addSubview:_itemValue];

        [self.contentView addSubview:_item];

    }
    return self;
} 
```

自定义单元格.h

```
@interface CustomCell : UITableViewCell
@property (strong, nonatomic) IBOutlet UILabel *itemNumber;
@property (strong, nonatomic) IBOutlet UITextField *itemValue;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:52:42.953

首先，当您创建每个文本字段时，您将自己设置为该文本字段的代理，因此您将在文本字段中发生任何事情时收到消息。

好的，所以现在当用户在文本字段中键入时，您将收到消息，并且您可以修改您的模型（数组，我想您应该将其保留为 NSMutableArray）。但要做到这一点，您需要弄清楚哪个单元格包含该消息来自的文本字段！你会这样做：

```
- (void)textFieldDidEndEditing:(UITextField *)tf {
    // some cell's text field has finished editing; which cell?
    UIView* v = tf;
    do {
        v = v.superview;
    } while (![v isKindOfClass: [UITableViewCell class]]);
    CustomCell* cell = (CustomCell*)v;
    // so which row is it?
    NSIndexPath* ip = [self.tableView indexPathForCell:cell];
    //  aha! so now ip.row is the row, and you can update your data model
    //   ... left as an exercise for the reader ...
} 
```

我在我的书中做了这种事情，在[http://www.aeth.com/iOSBook/ch21.html#_editable_content_in_table_items](http://www.apeth.com/iOSBook/ch21.html#_editable_content_in_table_items)（这就是上面代码的来源），所以看看它给了你什么想法.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:06:00.897

当用户完成输入文本后，您可以执行以下操作，将 tableview 中行的索引路径映射到数组中的索引。

```
- (NSMutableArray *)updateText {

    NSUInteger cellsCount = [self.tableView numberOfRowsInSection:0];
    NSMutableArray *cellTextArray = [[NSMutableArray alloc] initWithCapacity:cellsCount];

    for(NSInteger i = 0; i < cellsCount; i++) {

        NSIndexPath *indexPath = [NSIndexPath indexPathForItem:i inSection:0];
        CustomCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

        NSString *item = cell.itemNumber.text;

        [cellTextArray insertObject:item atIndex:i];
    }

    return cellTextArray;
} 
```

假设您的单元格设置了 UITextFieldDelegate，当用户完成输入文本时，您可以执行以下操作：

```
- (void)textFieldDidEndEditing:(UITextField *)textField {

    [self.delegate didFinishEditing];
} 
```

UITableViewController在哪里`self.delegate`，它会`updateText`在必要时调用。

需要注意的事情 - for 循环`updateText`需要遍历 tableview 并为每个索引路径出列单元格。简单地使用 tableview 的可见单元格很可能会让您丢失屏幕外并被重用的单元格中的文本。

希望这会有所帮助，祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:54:58.890

这个问题显然有几个方面。首先，您希望能够恢复对`UILabel`'s 的引用，以便找出特定 UILabel 所在的行。我建议使用该`tag`属性执行此操作，如下所示：

```
_item = [[UILabel alloc] init];
_item.tag = 100; // or any value
[self.contentView addSubview:_item]; 
```

您还需要设置一个在标签中的文本发生更改时调用的操作。你可以这样做：

```
[_item addTarget:someObject
          action:@selector(labelChanged:)
forControlEvents:UIControlEventEditingChanged]; 
```

无论是什么类`someObject`，它都需要有一个带有这个签名的方法：

```
- (void)labelChanged:(id)sender; 
```

在该方法中，您可以检查它`sender`实际上是 a `UILabel`，然后您可以使用 访问新文本`sender.text`。

为了确定将文本放入数组中的哪个点，您可以在表中的行数上声明一个循环：

```
for (int i = 0; i < [mainViewControllerInstance tableView:theTableInQuestion numberOfRowsInSection:0]; ++i) {
    if(sender == [[mainViewControllerInstance tableView:theTableInQuestion
                                 cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]] viewWithTag:100]) {
        // Put `sender.text` in the appropriate spot in your array
    }
} 
```

一些额外的注意事项：我会使用 an`NSMutableArray`来跟踪您的字符串，因为您将更新它们，但我不完全确定这里有哪些最佳实践。您还需要确保初始化数组（无论您将其设为 an`NSArray`还是 an `NSMutableArray`）以获得正确的行数，并确保在`+`按下按钮时向其中添加行，否则您将面临风险当您尝试更改尚不存在的行的条目时出现异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T02:04:43.280

您可能还想看看免费的 Sensible TableView 框架。该框架几乎可以自动执行您需要的所有操作。应该可以为您节省大量的手工工作。祝你好运！

# git - Git子树合并，但保留本地更改？

> ID：15777415
> 
> 赞同：6
> 
> 时间：2013-04-03T01:36:52.333
> 
> 标签：git

第 3 方存储库中有一个分支，我想将其添加为我的存储库的子目录。我希望能够更改该 3rd 方代码，在我的 repo 中维护这些更改，并且仍然能够获得对 3rd 方 repo 所做的更新。本质上，我正在尝试创建一个叠加层。

按照[此处](http://git-scm.com/book/ch6-7.html)的子树合并指南（它准确描述了我要完成的工作），我创建了一个指向该第 3 方存储库的远程，创建了一个引用我想要的远程分支的本地分支，完成了拉动该分支，并使用 read-tree 将本地分支的内容复制到 master 的子目录中。

我已将此子目录中的更改（新文件和对现有文件的编辑）提交并推送到 master。上游分支中的各种文件也进行了更改。我已经能够将更改下拉到我的分支。但是，当我尝试如下合并时，

```
git merge --squash -s subtree --no-commit <my_branch> 
```

我的本地更改被上游的更改覆盖。我创建的新文件被删除，我对现有文件所做的更改丢失。

我做错了什么还是预期的行为？如何保留我的更改并仍然合并来自上游的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T20:06:01.253

我不相信这是理想的行为，但是我自己也解决了类似的问题。

就我而言，问题在于当其他开发人员最初将子树添加到主分支时，他一次添加了多个子树。这导致更改结果提交的 SHA。

结果，当我尝试进行子树合并时，git 无法找到一个共同的父级。这有 git 的最终结果，假设我的本地树中的所有内容都旨在早于原始 repo 中的代码，并且在合并完成后本地更改丢失。

我通过`git log --oneline`在子树的前缀目录中执行 a 并确定第一个提交到本地 repo 来解决这个问题。

然后，

```
git checkout -b <subtree>_merge <first commit SHA>
git merge --squash -s subtree --no-commit <subtree_remote/ref>
git checkout master
git merge <subtree>_merge 
```

这应该会给您留下与从顶部成功合并子树所期望看到的相同的结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T06:04:46.760

As a general rule, you want to do such operations on a clean working tree. Git would abort if it would need over overwrite non-committed changes.

You can use `git stash` to temporarily store those uncomitted changes, so that you can do the merge, and `git stash pop` to apply them again and remove the stash.

# java - android中的SQLite查询以搜索所有字段以匹配输入

> ID：15777416
> 
> 赞同：0
> 
> 时间：2013-04-03T01:37:05.300
> 
> 标签：java, android

是否可以搜索整个 SQLite 表以`like`匹配用户输入的字符串？

就像是：

```
cursor = db.query("myDBName", null, "* like '%"+input_string+"%'", null, null, null, null); 
```

我只想说“查看数据库中的每个字段以查找与 input_string 匹配的任何内容”

谢谢大家！抱歉，如果这是一个格式不正确的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:44:36.687

恐怕 SQLite 不支持这种语法。
如果您已经知道表的结构，您可以一一搜索每一列，或者构建一个长的“col1 LIKE .. OR col2 LIKE..”查询。

# mysql - 如何在mysql中创建同义词

> ID：15777420
> 
> 赞同：6
> 
> 时间：2013-04-03T01:37:22.503
> 
> 标签：mysql, synonym

我在数据库中有一个视图`B`，我在数据库中使用它`A`。

我想为这个视图创建一个同义词。因为现在每次我都必须像这样编写查询

```
Select * from DBNAME.VIEWNAME 
```

而我只是想能够写

```
SELECT * FROM MYSYNONYMNAME 
```

这可以在mysql中做吗？说明书上看的不多。。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T01:39:40.170

[不能像在 Oracle](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_7001.htm)中那样在 mysql 中创建同义词

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-05T19:56:54.443

显然 a`VIEW`可以作为 a 工作`SYNONYM`：

```
DROP VIEW IF EXISTS `MYSYNONYMNAME` $$
CREATE ALGORITHM=MERGE DEFINER=`root`@`localhost`
SQL SECURITY DEFINER VIEW `MYSYNONYMNAME` AS
SELECT * FROM DBNAME.VIEWNAME $$ 
```

不确定性能或您可以在视图中堆叠视图多远等。当基表列更改时也可能需要重新创建。

见：[http ://blog.mclaughlinsoftware.com/2013/11/24/mysql-synonym/](http://blog.mclaughlinsoftware.com/2013/11/24/mysql-synonym/)

# spring-mvc - SpringMVC+T hymeleaf ，错误消息是：模板可能不存在或可能无法被任何配置的模板解析器访问

> ID：15777425
> 
> 赞同：13
> 
> 时间：2013-04-03T01:38:05.493
> 
> 标签：spring-mvc, thymeleaf

我已经阅读了其他答案，但没关系，谢谢

春天：

```
<bean id="templateEngine" class="org.thymeleaf.spring3.SpringTemplateEngine">
    <property name="templateResolver" ref="templateResolver" />
</bean>

<bean class="org.thymeleaf.spring3.view.ThymeleafViewResolver">
    <property name="templateEngine" ref="templateEngine" />
    <property name="order" value="1" />
</bean> 
```

pom.xml：

```
<dependency>
    <groupId>org.thymeleaf</groupId>
    <artifactId>thymeleaf</artifactId>
    <version>2.0.13</version>
</dependency>
<dependency>
    <groupId>org.thymeleaf</groupId>
    <artifactId>thymeleaf-spring3</artifactId>
    <version>2.0.13</version>
    <exclusions>
        <exclusion>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
        </exclusion>
    </exclusions>
    <scope>compile</scope>
</dependency> 
```

org.thymeleaf.exceptions.TemplateInputException：解析模板“login.html”时出错，模板可能不存在或可能无法被任何已配置的模板解析器访问

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T20:20:10.583

您需要模板解析器吗？

尝试这样的事情：

```
<bean id="templateResolver"
      class="org.thymeleaf.templateresolver.ServletContextTemplateResolver">
    <property name="prefix" value="/WEB-INF/" />
    <property name="templateMode" value="HTML5" />
 </bean> 
```

确保 Spring MVC 控制器正在返回 /path/after/web-inf/login.html。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-30T14:47:29.827

您可能缺少 templateResolver 配置中的“后缀”属性。最好的做法是在模板解析器配置中同时使用路径“前缀”（文件所在的位置）和“后缀”（文件扩展名 - 否则 thymeleaf 尝试仅解析“不带扩展名的登录”） . 像这样：

```
<beans:bean id="templateResolver" class="org.thymeleaf.templateresolver.ServletContextTemplateResolver">
    <beans:property name="prefix" value="/WEB-INF/views/"/>
    <beans:property name="suffix" value=".html"/>
    <beans:property name="templateMode" value="HTML5"/>
    <beans:property name="cacheable" value="false"/> <!-- Development only -->
</beans:bean> 
```

并且在控制器中请求登录视图不包括文件扩展名。

```
@RequestMapping(value = "/login")
public String login(HttpSession session) {
    // do stuff

    // Thymeleaf (delegated by springmvc) will request the "login" view at which 
    // point the prefix and suffix are added to resolve the template location. 
    return "login"; 
} 
```

因此，基于此配置并在基于 maven 的项目中，login.html 应位于

```
${project_home}/src/main/webapp/WEB-INF/views/login.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-16T04:10:13.267

也许在控制器请求映射中删除斜杠“/”会起作用。

```
@RequestMapping(value = "login") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-12T13:23:01.987

就我而言，事实证明 thymeleaf html 解析器工作不佳并且不接受一行 html 文件。格式化解决了这个问题。

# java - 在文件输出excel android中加入一些单元格

> ID：15777426
> 
> 赞同：1
> 
> 时间：2013-04-03T01:38:17.963
> 
> 标签：java, android, eclipse, cell, jxl

我有带有文件输出excel的项目android。我只是用逐个单元格的方式显示这个文件的excel。现在我想显示这个文件并加入一些单元格，制作边缘和中心，并添加颜色。

源如何加入一些单元格，制作边缘和中心，并像这样在输出excel中添加颜色？

我现在的来源：

```
WritableSheet sheet = r_excel.createSheet("First Sheet", 0);
WritableSheet sheet1 = r_excel.createSheet("Second Sheet", 1);
Label label1 = new Label(0, 0, "Name");
Label label2 = new Label(1, 0, "Class");
Label label3 = new Label(2, 0, "Address");
sheet.addCell(label1);
sheet.addCell(label2);
sheet.addCell(label3);
r_excel.write();
r_excel.close(); 
```

# cmd - 这不会在 sqlcmd 中执行以及如何从 python3.2 执行

> ID：15777427
> 
> 赞同：1
> 
> 时间：2013-04-03T01:38:21.930
> 
> 标签：cmd, sqlcmd, python-3.3

我正在尝试在 python 中从`call()`or执行此操作`Popen()`：

```
sqlcmd -E -S .\ 
USE MASTER 
GO 
SELECT 
name AS [Logical_name], 
physical_name AS [File_Path], 
type_desc AS [File_Type], 
state_desc AS [State] 
FROM sys.master_files 
WHERE database_id = DB_ID(N'AdventureWorksLT2008_old')
GO 
```

它会引发一些错误。现在，我想看看问题出在哪里。我制作了一个命令的 .bat 文件。我执行了它，只是`sqlcmd -E -S .\`被执行。其余部分没有。如何在 python 中的 cmd 之后控制 sqlcmd 以执行其余代码？你能帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T02:06:57.293

你需要指定一个输入选项，比如`-q`去掉`GO`命令。请[阅读文档](http://msdn.microsoft.com/en-us/library/ms180944.aspx)以获取示例。尝试：

```
sqlcmd -E -S .\ -q "
SELECT 
name AS [Logical_name], 
physical_name AS [File_Path], 
type_desc AS [File_Type], 
state_desc AS [State] 
FROM sys.master_files 
WHERE database_id = DB_ID(N'AdventureWorksLT2008_old')" 
```

或者，如果需要，将它们全部放在一行中。

# arrays - 从c中的文本文件存储到数组中

> ID：15777428
> 
> 赞同：1
> 
> 时间：2013-04-03T01:38:23.890
> 
> 标签：arrays, sorting, text, integer, scanf

首先，我想向大家介绍一下自己，因为我是论坛的新手；我的名字是 Max，我是 C 的初学者。**我无法创建一个可以执行以下操作的程序：**

1.  为汽车数据创建一个数组。
2.  为鸡肉数据创建三个并行数组，读取时跳过输入文件中的行。
3.  为污染数据创建一个字符和整数数组，最后
4.  允许用户选择如何显示数据（升序或降序）。

**数据可以在下面找到：**
[https://github.com/untamedspud/Lab-Assignment-8-data-files/blob/master/motorway.txt](https://github.com/untamedspud/Lab-Assignment-8-data-files/blob/master/motorway.txt) [https://github.com/untamedspud/Lab-Assignment-8-数据文件/blob/master/pollution.txt](https://github.com/untamedspud/Lab-Assignment-8-data-files/blob/master/pollution.txt)

我非常感谢你们能给我的任何帮助，如果您有任何问题，请告诉我。

**这是我当前的非功能代码，该代码将从文本文件中读取数据并将数据存储到适当的数组中：**

```
#include <stdio.h>
#include <stdlib.h>
#include "/home/TU/tue44432/include/selectionSort.h"

// Using a C global constant variable.
// The only global variables you can use in your program are const.
const char *filename = "pollution.txt";

int main()
{
    FILE *F;                // C file structure
    int i = 0;
    int level[30];
    int pl;                 // holds the first value we read in from the file
    char city[30];          // holds the second value we read in from the file

    // associate the internal file name, F, with the external file name, pop.txt.
    F = fopen( filename, "r" );

    fscanf( F, "%d ", &pl );
    fgets( city, 30, F );
    chomp( city );                     // removes the newline at the end of the line         read in
    level[0] = pl;

    while ( ! feof( F ) ) {
//          printf("Pollution level is %d in %s.\n", pl, city);
            printf("Pollution level is %d in %s.\n", level[i], city);
            fscanf( F, "%d", &pl );    // scan in the first value from the file
            fgets( city, 30, F );      // reads in UP TO 30 characters, stopping at the
            chomp( city );
            i += 1;
            level[i] = pl;

//              printf("loop controll variable i == %d.\n", i);

}

    fclose( F );

    return EXIT_SUCCESS;
} 
```

# java - 可以列出 被实例化？

> ID：15777431
> 
> 赞同：1
> 
> 时间：2013-04-03T01:38:45.933
> 
> 标签：java

当我写这个时，它有错误“无法实例化类型列表<字符>”

```
Character[] ray = {'a','s','e'};
List<Character> l = new List<Character>(Arrays.asList(ray)); 
```

但是当我写这个时，没有错误

```
Character[] ray = {'a','s','e'};
List<Character> l = Arrays.asList(ray); 
```

那为什么呢？

编辑：第二个例子中 l 的类型是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T01:40:18.463

问题是这[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)是一个[接口](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)（它定义了一些方法，但没有实现它们）。尝试使用实现它的类，例如[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)or [`LinkedList`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)：

```
List<Character> l = new ArrayList<Character>(Arrays.asList(ray)); 
```

# c++ - C 从 GetSaveFileName() 返回的字符包含空字符

> ID：15777432
> 
> 赞同：2
> 
> 时间：2013-04-03T01:38:46.890
> 
> 标签：c++, char, savefiledialog

我正在使用以下代码来获取要保存到用于 tinyxml2 的文件路径：

```
OPENFILENAME ofn;

char szFileName[MAX_PATH] = "";

ZeroMemory(&ofn, sizeof(ofn));
ofn.lStructSize = sizeof(ofn); 
ofn.hwndOwner = NULL;
ofn.lpstrFilter = (LPCWSTR)L"XML Files (*.xml)\0*.xml\0All Files (*.*)\0*.*\0";
ofn.lpstrFile = (LPWSTR)szFileName;
ofn.lpstrFile[0] = '\0';
ofn.nMaxFile = MAX_PATH;
ofn.Flags = OFN_EXPLORER | OFN_FILEMUSTEXIST | OFN_HIDEREADONLY;
ofn.lpstrDefExt = (LPCWSTR)L"xml";
GetSaveFileName(&ofn); 
```

这工作正常并显示对话框但是当我在 szFileName 中查找返回值时，它似乎包含许多空字符：

```
szFileName  0x0026f5b0 "C"  char[0x00000104]
[0x00000000]    0x43 'C'    char
[0x00000001]    0x00 '\0'   char
[0x00000002]    0x3a ':'    char
[0x00000003]    0x00 '\0'   char
[0x00000004]    0x5c '\\'   char
[0x00000005]    0x00 '\0'   char
[0x00000006]    0x61 'a'    char
[0x00000007]    0x00 '\0'   char
[0x00000008]    0x73 's'    char
[0x00000009]    0x00 '\0'   char
[0x0000000a]    0x64 'd'    char
[0x0000000b]    0x00 '\0'   char
[0x0000000c]    0x61 'a'    char
[0x0000000d]    0x00 '\0'   char
[0x0000000e]    0x73 's'    char
[0x0000000f]    0x00 '\0'   char
[0x00000010]    0x64 'd'    char
[0x00000011]    0x00 '\0'   char
[0x00000012]    0x61 'a'    char
[0x00000013]    0x00 '\0'   char
[0x00000014]    0x73 's'    char
[0x00000015]    0x00 '\0'   char
[0x00000016]    0x2e '.'    char
[0x00000017]    0x00 '\0'   char
[0x00000018]    0x78 'x'    char
[0x00000019]    0x00 '\0'   char
[0x0000001a]    0x6d 'm'    char
[0x0000001b]    0x00 '\0'   char
[0x0000001c]    0x6c 'l'    char 
```

当传递给 tinyxml2 时，最终会保存一个名称为 1 个字符长的文件，以及 szFileName 中的第一个字符。

为什么要在每个字符之后添加这些空字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:41:26.660

你打电话`GetSaveFileNameW`而不是`GetSaveFileNameA`. 声明`szFileName`为`TCHAR`（或`WCHAR`）的数组。

该名称`GetSaveFileName`将解析为名称`GetSaveFileNameW`或`GetSaveFileNameA`取决于`#define`您的代码（或项目设置）中的名称。默认情况下，它`_UNICODE`在现代 Visual Studio 版本中定义（“宽字符”）。

如果将它传递给另一个需要特定字符集的库，则可能必须转换 using`WideCharToMultiByte`或相关函数。

另外：不要像使用`szFileName`(being `char[MAX_PATH]`) 和`(LPWSTR)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:42:54.037

我不是 Win32 API 的专业人士，但是：

```
ofn.lpstrFile = (LPWSTR)szFileName; 
```

您正在使用[LPWSTR](http://msdn.microsoft.com/en-us/library/cc230355.aspx)，它是“指向 16 位 Unicode 字符的字符串的 32 位指针”。这意味着每个字符都被编码为两个字节。由于 ASCII 字符值适合单个字节，我将假设第二个始终设置为 0。

# c++ - 在 C++ 中使用向量的通用列表

> ID：15777433
> 
> 赞同：1
> 
> 时间：2013-04-03T01:39:16.123
> 
> 标签：c++, templates, vector, typename

我对编程比较陌生，我在入门课上做得很好。然而，随着我们开始深入了解 C++ 的更高级概念，我越来越迷茫。实验室作业有问题，希望大家帮忙！

> 编写一个名为 GenericList 的通用列表类。该类应该使用向量并且能够以任何类型名称创建。该类应具有以下成员：
> 
> *   一个简单的构造函数
> *   add(item) - 将项目添加到列表中
> *   grabSmallest() - 查找、返回和删除列表中的最小项

这是我到目前为止所拥有的，我相信它至少设置正确：

***编辑***

这是我在建议的更正之后所拥有的，不过我现在遇到了另一个问题。这是修改后的代码：

```
#include <iostream>
#include <vector>
#include <string>
using namespace std;

template<typename T>
class GenericList
{
public:
    GenericList();
    void add(T value);
    T grabSmallest();

private:
    vector<T> listVector;
};

template<typename T>
GenericList<T>::GenericList()
{
}

template<typename T>
void GenericList<T>::add(T value)
{
    listVector.push_back(value);
}

template<typename T>
T GenericList<T>::grabSmallest()
{
    int smallest = listVector[0];
    for (int i = 0; i < listVector.size(); i++)
    {
        if (listVector[i] < smallest)
        {
        smallest = listVector[i];
        }
    }
}

int main (){
    GenericList<int> myList;
    myList.add(10);
    myList.add(5);
    myList.add(20);
    myList.add(15);

    for(int i=0;i<4;i++)
        cout << myList.grabSmallest() << " ";
} 
```

我现在在抓取功能中的 for 循环出现问题。显然，编译器正在将随机数放入向量中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:41:11.117

1.  在哪里`last`？

2.  即使你有`last`，

    ```
    template<typename T>
    void GenericList<T>::add(const T &value)
    {
        listVector[last++] = value; // <- should it be last++ or ++last?
    } 
    ```

    还是您的意思是：

    ```
    template<typename T>
    void GenericList<T>::add(const T &value)
    {
        listVector.push_back(value)
    } 
    ```

    顺便说一句，有了`vector`，您不需要该`last`字段。它保存在`vector`: ` `vector.size()`中。`vector`但是当你可以直接使用vector时为什么要换行呢？

3.  如果你想要最小的，`priority_queue`就行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:53:20.510

正如公之涛所说，那行不喜欢你，因为你从不声明`last`，因此编译器不知道如何处理它。正如他们所说，您需要使用`push_back`来解决该问题。

但是您还需要解决另一个问题：如果它们不用`int`作它们的类型会发生什么？如果他们想要自定义类的“最少”成员怎么办？你需要改变这个：

```
vector<int> listVector; 
```

对此

```
vector<T> listVector; 
```

以便获取模板参数指定`vector`的自定义类型。`T`

因为`grabSmallest`我建议您使用某种类型的搜索来确定哪个元素是最小的，例如选择第一个元素，然后在之后循环查看每个后续元素是否更小。如果是，则将其作为您的值，然后循环。如果没有，请继续。最后剩下的那个是最小的。但请记住`T`始终用作您的类型。这种方法不需要在每次插入时对其进行排序。

由于这是家庭作业，我不想用代码给你 100% 的答案，但希望前面的段落足以让你继续前进。

编辑：想通了。试试 www.codepad.org 并通过它运行您的代码。

基本上，您的 grabSmallest() 方法中有两个错误。

1.  应该`T smallest = listVector[0]`不是`int`。如果列表为空，您还应该有一个“守卫”，它返回默认值（或引发异常）。
2.  grabSmallest() 应该返回一个值，但你忘了。因此，您的编译器显然过于宽容，并没有将其标记为错误。放在`return smallest`方法的最后一行，就在`for`循环之后。

# angularjs - angular-loader.js 是干什么用的？

> ID：15777449
> 
> 赞同：57
> 
> 时间：2013-04-03T01:40:49.873
> 
> 标签：angularjs

我在 Google 群组和 Stackoverflow 上看到了类似的问题。两次都没有回答这个问题。这个文件中的代码并没有很清楚地说明它到底做了什么以及它是如何使用的。从 Angular 文档中也不清楚。

有人可以解释这是如何使用的。这也可以与 Require.js 一起使用吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-03T07:12:32.850

Angular loader 允许以任何顺序加载您的 Angular 脚本。

正如 angular-seed 项目[向我们展示](https://github.com/angular/angular-seed/blob/v0.10.x/app/index-async.html)的那样，Angular 加载器没有任何特定的 api，您只需将它放在索引文件的顶部（以便它首先执行），然后继续加载您喜欢的应用程序文件。

但是，对于您的用例来说，最重要的是您根本不需要角度加载器。RequireJS 还允许以任何顺序加载您的文件，但它还为您提供了许多其他功能，而 Angular 加载器并不适合。

所以，是的，你可以将它与 RequireJS 一起使用，但你不需要，因为它变得多余了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-17T02:18:01.570

> Angular 模块解决了从应用程序中删除全局状态的问题，并提供了一种配置注入器的方法。与 AMD 或 require.js 模块相反，Angular 模块不会尝试解决脚本加载顺序或延迟脚本获取的问题。这些目标是正交的，两个模块系统可以并存并实现它们的目标。

[http://docs.angularjs.org/tutorial/step_07#anoteaboutdiinjectorandproviders](http://docs.angularjs.org/tutorial/step_07#anoteaboutdiinjectorandproviders)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T01:54:07.643

它允许您在引导 Angular 应用程序时异步加载文件。一个很好的例子是 angular-seed 项目，它有一个 index-async.html 文件来执行此操作。

[索引-async.html](https://github.com/angular/angular-seed/blob/master/app/index-async.html)

这对于使用异步加载模块的其他库很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-04T12:07:02.243

参见 angular-async-loader： [https ://github.com/subchen/angular-async-loader/](https://github.com/subchen/angular-async-loader/)

异步加载以下组件：

*   项目清单
*   控制器
*   服务
*   筛选
*   指示
*   价值
*   持续的
*   提供者
*   装饰师

# php - 从 PHP 中的组合框获取值

> ID：15777455
> 
> 赞同：2
> 
> 时间：2013-04-03T01:41:16.100
> 
> 标签：php

我正在尝试从组合框的上一页中获取值。

[删除.php]

```
 <form name="delete" action="deleted.php" method="post">
<?php
$connect = mysql_connect("a","b","") or die("Error connecting");
mysql_select_db("c") or die("Error connecting to database");
$result = mysql_query("SELECT * FROM d ORDER BY e ASC");
echo "<select name='forward'>";
while ($row = mysql_fetch_array($result))
  {
 echo "<option class='class' name=" .$row['t'] . ">".$row['t'] ."</option>";
}
echo "</select><br/><br/><br/><br/>";
?>
<input type="submit" id="thisSbmit" value="Delete Contact" onClick="chck()">&nbsp;&nbsp;<input type="button" id="cls" class="cls" value="Clear">
</form> 
```

[已删除.php]

```
<?php
$selected = $_POST['forward'];

if ($selected== 'kryptix') 
{
    alert('No one was seleclted');
}else{
alert('Success');
}
?> 
```

但我收到以下错误：

> 注意：未定义的索引：在第 2 行的 C:\xampp\htdocs\folder\deleted.php 中转发

*   第 2 行 = $selected = $_POST['forward']; *

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T06:36:50.600

当您尝试获取 $_POST['forward'] 的值时，您会得到未定义的索引，此时代码如下：

```
<form name="delete" action="deleted.php" method="post">
<?php
$connect = mysql_connect("a","b","") or die("Error connecting");
mysql_select_db("c") or die("Error connecting to database");
$result = mysql_query("SELECT * FROM d ORDER BY e ASC");
echo "<select name='forward'>";
while ($row = mysql_fetch_array($result))
  {
 echo "<option class='class' name=" .$row['t'] . ">".$row['t'] ."</option>";
}
echo "</select><br/><br/><br/><br/>";
?>
<input type="submit" id="thisSbmit" value="Delete Contact" onClick="chck()">&nbsp;&nbsp;<input type="button" id="cls" class="cls" value="Clear">
</form> 
```

当做这样的代码时：（我已经注释掉了数据库部分）

```
 <form name="delete" action="deleted.php" method="post">
<?php
//$connect = mysql_connect("a","b","") or die("Error connecting");
//mysql_select_db("c") or die("Error connecting to database");
//$result = mysql_query("SELECT * FROM d ORDER BY e ASC");
$row['t'] = 1; //Dummy
echo "<select name='forward'>";
echo "<option class='class' name=" .$row['t'] . ">".$row['t'] ."</option>";
echo "</select><br/><br/><br/><br/>";
?>
<input type="submit" id="thisSbmit" value="Delete Contact" onClick="chck()">&nbsp;&nbsp;<input type="button" id="cls" class="cls" value="Clear">
</form> 
```

您不会在您的 deleted.php 中收到未定义的索引警告。

使用以下代码，您也不会收到索引警告。

```
 <form name="delete" action="deleted.php" method="post">
<?php
//$connect = mysql_connect("a","b","") or die("Error connecting");
//mysql_select_db("c") or die("Error connecting to database");
//$result = mysql_query("SELECT * FROM d ORDER BY e ASC");
$row['t'] = 1; //Dummy
$row['u'] = 2; //Dummy
echo "<select name='forward'>";
echo "<option class='class' name=" .$row['t'] . ">".$row['t'] ."</option>";
echo "<option class='class' name=" .$row['u'] . ">".$row['u'] ."</option>";
echo "</select><br/><br/><br/><br/>";
?>
<input type="submit" id="thisSbmit" value="Delete Contact" onClick="chck()">&nbsp;&nbsp;<input type="button" id="cls" class="cls" value="Clear">
</form> 
```

AND $_POST['forward']***实际上****会在未设置值时*返回选项的名称。（1 或 2）。但是你应该像这样使用 value="" ：

```
 <form name="delete" action="deleted.php" method="post">
<?php
//$connect = mysql_connect("a","b","") or die("Error connecting");
//mysql_select_db("c") or die("Error connecting to database");
//$result = mysql_query("SELECT * FROM d ORDER BY e ASC");
$row['t'] = 1; //Dummy
$row['u'] = 2; //Dummy
echo "<select name='forward'>";
echo "<option class='class' value=" .$row['t'] . ">".$row['t'] ."</option>";
echo "<option class='class' value=" .$row['u'] . ">".$row['u'] ."</option>";
echo "</select><br/><br/><br/><br/>";
?>
<input type="submit" id="thisSbmit" value="Delete Contact" onClick="chck()">&nbsp;&nbsp;<input type="button" id="cls" class="cls" value="Clear">
</form> 
```

但是，当您在代码中没有任何选项时（在下面注释掉），您将收到未定义的索引警告。

```
 <form name="delete" action="deleted.php" method="post">
<?php
//$connect = mysql_connect("a","b","") or die("Error connecting");
//mysql_select_db("c") or die("Error connecting to database");
//$result = mysql_query("SELECT * FROM d ORDER BY e ASC");
$row['t'] = 1; //Dummy
$row['u'] = 2; //Dummy
echo "<select name='forward'>";
//echo "<option class='class' value=" .$row['t'] . ">".$row['t'] ."</option>";
//echo "<option class='class' value=" .$row['u'] . ">".$row['u'] ."</option>";
echo "</select><br/><br/><br/><br/>";
?>
<input type="submit" id="thisSbmit" value="Delete Contact" onClick="chck()">&nbsp;&nbsp;<input type="button" id="cls" class="cls" value="Clear">
</form> 
```

这是因为选择列表不包含任何内容（没有选项）。

因此我的问题是：您的选择列表中实际上有任何选项吗？

**试试这段代码**，看看`echo print_r($row,true);`会给你带来什么：

```
 <form name="delete" action="deleted.php" method="post">
<?php
$connect = mysql_connect("a","b","") or die("Error connecting");
mysql_select_db("c") or die("Error connecting to database");
$result = mysql_query("SELECT * FROM d ORDER BY e ASC");

/*debugging start
$row = mysql_fetch_array($result)
echo print_r($row,true);
debugging end */

echo "<select name='forward'>";
while ($row = mysql_fetch_array($result))
  {
 echo "<option class='class' value=\"" .$row['t'] . "\">".$row['t'] ."</option>";
}
echo "</select><br/><br/><br/><br/>";
?>
<input type="submit" id="thisSbmit" value="Delete Contact" onClick="chck()">&nbsp;&nbsp;<input type="button" id="cls" class="cls" value="Clear">
</form> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T01:44:28.690

你没有回应你的选择。因此，永远不会设置 $_POST['forward']：

```
"<select name='forward'>"; 
```

应该

```
echo "<select name='forward'>"; 
```

你最好还是跳出 php 来写 html。它更易于阅读，并允许更好的标记编写而无需转义等。

```
<select name='forward'>
<?php while ($row = mysql_fetch_array($result)): ?>
    <option class='class' value="<?php echo $row['t']; ?>"><?php echo $row['t']; ?></option>
<?php endwhile; ?>
</select> 
```

此外，正如 IOIO MAD 在他的标记示例中显示的那样，除非您使用 ajax，否则您肯定需要在表单中发布任何内容

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T01:44:43.820

```
echo "<select name='forward'>"; //cant find a echo there in your code 
```

添加到您的 php 接收器代码以进行额外验证

```
if(isset($_POST['forward']))
    {

    //your code here  {put [query] here} code
    } 
```

**更新：** 您在标签中缺少`value`属性 `<option>`

```
echo "<option class='class' name=" .$row['t'] . ">".$row['t'] ."</option>"; 
```

**您的代码中的上述行没有值字段**（即转发的值是 Undefined ）？添加**`value field`**

```
echo "<option class='class' name='" .$row['t'] ."' value='".$row['t'] ."'>".$row['t'] ."</option>"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T01:46:26.650

没有错，只是对 PHP 的警告。如果您想避免该警告，您可以使用该`isset()`功能或​​关闭 php.ini 中的“通知”错误报告。[看到这个答案](https://stackoverflow.com/questions/2867057/how-do-i-turn-off-php-notices)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-24T10:15:27.487

there is no problem in code.You are using **Alert** in the PHP.that is why you are getting error. if you want you can **isset($_POST(forward))** for checking.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-07-14T10:15:37.613

尝试以下操作：

你的错误是你提到**name**而不是**value**。

所以更改以下内容并测试它，让我知道。

```
 echo "<option class='class' name=" .$row['t'] . ">".$row['t'] ."</option>"; 
```

进入

```
echo "<option class='class' value=" .$row['t'] . ">".$row['t'] ."</option>"; 
```

谢谢。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-06-13T10:36:34.990

```
<form name="delete" action="delete.php" method="post">
<?php
$connect = mysql_connect("localhost","root","menu32") or die("Error connecting");
mysql_select_db("MyProject") or die("Error connecting to database");
$result = mysql_query("SELECT name FROM teacher_detail ORDER BY name ASC limit 5");?>
<select name='forward'>
<option name='' value=''>--select--</option>
<?php 
while ($row = mysql_fetch_array($result))
  {?>
 <option class='class' name="<?= $row['name'] ?>"><?=$row['name'] ?></option>";
<?php } ?>
</select><br/><br/><br/><br/>

<input type="submit" id="thisSbmit" value="Delete Contact" onClick="chck()">&nbsp;&nbsp;
<input type="button" id="cls" class="cls" value="Clear">
</form> 
```

**删除.php**

```
<?php

$selected= $_POST['forward'];
if($selected=='Babita')
    echo "matched string";
else
    echo "not found"; 
```

# python - Python中调用构造函数的顺序

> ID：15777466
> 
> 赞同：5
> 
> 时间：2013-04-03T01:41:53.107
> 
> 标签：python

```
#!/usr/bin/python

class Parent(object):        # define parent class
   parentAttr = 100
   def __init__(self):
      print "Calling parent constructor"

   def parentMethod(self):
      print 'Calling parent method'

   def setAttr(self, attr):
      Parent.parentAttr = attr

   def getAttr(self):
      print "Parent attribute :", Parent.parentAttr

class Child(Parent): # define child class
   def __init__(self):
      print "Calling child constructor"

   def childMethod(self):
      print 'Calling child method'

c = Child()          # instance of child 
```

我在这里调用了创建子类​​的实例。它似乎没有调用父类的构造函数。输出如下所示。

```
Calling child constructor 
```

例如，在 C++ 中，当您调用派生类的构造函数时，首先调用基类构造函数。为什么在 Python 中不会发生这种情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T01:44:31.380

来自[Python 之禅](http://www.python.org/dev/peps/pep-0020/)：

> 显式优于隐式。

Python 应该在子构造函数之前还是之后调用父构造函数？有什么论据？不知道，留给你决定。

```
class Child(Parent): # define child class
    def __init__(self):
        super(Child, self).__init__()  # call the appropriate superclass constructor
        print "Calling child constructor" 
```

另请参阅[此 StackOverflow 帖子](https://stackoverflow.com/q/576169/1558890)，了解使用`super()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T01:44:25.537

您需要[`__init__`](http://docs.python.org/2/reference/datamodel.html#object.__init__)在子类的方法中显式调用父构造函数。尝试：

```
class Child(Parent): # define child class
   def __init__(self):
      Parent.__init__(self)
      print "Calling child constructor" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T01:59:12.280

如果你有 Python 3.x，你可以运行它（这几乎是你在自己的代码中所做的）：

```
#! /usr/bin/env python3

def main():
    c = Child()
    c.method_a()
    c.method_b()
    c.get_attr()
    c.set_attr(200)
    Child().get_attr()

class Parent:

    static_attr = 100

    def __init__(self):
        print('Calling parent constructor')

    def method_a(self):
        print('Calling parent method')

    def set_attr(self, value):
        type(self).static_attr = value

    def get_attr(self):
        print('Parent attribute:', self.static_attr)

class Child(Parent):

    def __init__(self):
        print('Calling child constructor')
        super().__init__()

    def method_b(self):
        print('Calling child method')

if __name__ == '__main__':
    main() 
```

# list - Haskell-在列表中查找元素并返回其位置

> ID：15777468
> 
> 赞同：5
> 
> 时间：2013-04-03T01:42:03.060
> 
> 标签：list, haskell, indexing, fibonacci, maybe

所以我需要制作一个描述为的函数

```
invFib :: Integer -> Maybe Integer 
```

它接受一个整数并在斐波那契数列中查找它（如下面的函数所述）

```
fibs :: [Integer]
fibs = 0:1:(zipWith (+) fibs (tail fibs)) 
```

并返回数字示例的索引：

`invFib 0`~>`Just 0`

`invFib 1`~>`Just 1`或`Just 2`

`map invFib [54, 55, 56]`~>`[Nothing,Just 10,Nothing]`

`invFib (fibs !! 99)`~>`Just 99`

我尝试制作一个接受整数列表并吐出索引的函数，但它一直失败。有什么想法吗？

这是我尝试过的功能-

```
findNum :: [Integer] -> Integer -> Integer -> Integer
findNum x:xs y z = if x == y
                then z
                else findNum xs y (z+1) 
```

编辑：该函数冻结不在斐波那契数列中的数字，当输入 1 时也只显示 1 个值

```
invFib :: Integer -> Maybe Integer
invFib n = if n < 0
        then Nothing
        else fmap fromIntegral (elemIndex n fibs) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T06:54:18.077

所以这里的关键是它`fibs`是无限的，*但也是*单调递增的。因此，一旦它超过了正在寻找的数字，它就可以返回`Nothing`：

```
findIndexInAscendingList :: (Ord a) => a -> [a] -> Maybe Integer
findIndexInAscendingList a xs = find 0 xs
  where
    find i [] = Nothing -- won't get used for fibs
    find i (x:xs) | a == x    = Just i
                  | a < x     = Nothing
                  | otherwise = find (i + 1) xs

invFib :: Integer -> Maybe Integer
invFib n = findIndexInAscendingList n fibs 
```

所以：

```
$ ghci
GHCi, version 7.4.2: http://www.haskell.org/ghc/  :? for help
λ: :load Fib.hs 
[1 of 1] Compiling Main             ( Fib.hs, interpreted )
Ok, modules loaded: Main.
λ: map invFib [54,55,56]
[Nothing,Just 10,Nothing] 
```

还有其他一些方法可以做到这一点。考虑一下`zip fibs [0..]`，然后您可以使用`dropWhile`删除小于的部分`n`并测试剩下的部分。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T04:00:41.283

为什么不使用像“takeWhile”这样的函数来返回要检查的无限“fibs”列表的一部分？使用有限列表，您可以应用像“elemIndex”这样的函数，只需稍微调整一下类型，就可以返回您想要的内容。

```
elemIndex myInteger (takeWhile (<= myInteger) fibs) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T02:12:49.187

如果您已经计算过`fibs`，那么答案很简单：

```
import Data.List

invFib :: Integer -> Maybe Integer
invFib n = fmap fromIntegral (elemIndex n fibs)

fibs :: [Integer]
fibs = 0:1:(zipWith (+) fibs (tail fibs)) 
```

# path - 在 CMAKE UI 中，指定头文件写入位置的参数名称是什么

> ID：15777470
> 
> 赞同：1
> 
> 时间：2013-04-03T01:42:36.357
> 
> 标签：path, cmake, header-files

我正在使用 CMAKE UI (2.8-10.app) 构建一个项目，并且想知道我指定项目的系统头文件应该写入的位置。

我看到 'LIBRARY_OUTPUT_PATH' - 我看到我的库是写在这里的。

但是，我找不到等效的“HEADERFILE_OUTPUT_PATH”

任何帮助，将不胜感激。

# forms - FuelPHP 中的基本用户认证示例

> ID：15777474
> 
> 赞同：2
> 
> 时间：2013-04-03T01:43:02.983
> 
> 标签：forms, authentication, orm, model, fuelphp

我刚刚开始使用 Fuel，我正在尝试使用该`auth`软件包实现基本的用户身份验证和注册。

我有一个控制器`auth.php`，其中我有`action_login`,`action_register`和`action_logout`功能。这些函数（当前）仅调用为登录和注册过程生成 html 表单的视图（但它们当前不执行任何操作）。

我查看了文档并试图在网上找到一些教程，但似乎缺少。我需要用户模型吗？我需要使用`orm`吗？我有用户表，我用`oil`. 我是否需要安全令牌才能与表单一起使用？写这个最简单的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T17:18:12.457

以下是创建登录和注册系统的步骤

> 请注意，这些步骤只是一个示例，我没有添加创建视图的步骤，因为您的帖子显示您已经实现了它

1.  将 simpleauth.php 文件从 /home/aravind/ietscholarship/fuel/packages/auth 复制到 fuel/app/config 文件夹。并在fuel/app/config/simpleauth.php 中的那个文件中做所有你需要的配置
2.  使用此 SQL 语句创建表

    如果不存在则创建表`users`（ `id`int(11) NOT NULL AUTO_INCREMENT, `username`varchar(255) NOT NULL, `password`varchar(255) NOT NULL, `email`varchar(255) NOT NULL, `profile_fields`text NOT NULL, `group`int(11) NOT NULL, `last_login`int(20) NOT NULL, `login_hash`varchar(255) NOT NULL, `created_at`int(11) NOT NULL, `updated_at`int(11) NOT NULL, PRIMARY KEY ( `id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1834 ;

这也可以使用 oil generate 命令并在上面的 create 语句中指定相同的字段来完成

3\. 在侧 Fuel/app/classes/model 文件夹中创建一个 Model_User 类来发布代码它有点冗长所以我在[这里创建了一个 github gist](https://gist.github.com/anonymous/5312201)

4\. 并在fuel/app/classes/controller 中创建您的登录、注销和注册操作，我创建了一个使用[它的要点](https://gist.github.com/anonymous/5312225)

5\. 在fuel/app/config/routes.php 中创建路由，如下所示

```
 'login' => 'users/login',
    'logout' => 'users/logout',
    'register' => 'users/register', 
```

这就是你所有的系统都准备好了

在fuel php 中，几乎所有的数据库访问都是使用ORM 包完成的，这使得开发人员在处理任何CRUD 操作时变得非常轻松。

所以要使用 Auth 包，你必须使用 ORM 包。

最后但并非最不重要的一个最工作稳定的示例燃料 php 应用程序可以在 github 中找到，它是中央佛罗里达大学为燃料php 速成课程创建的存储库，您可以分叉并使用现有的功能，让您自己对燃料php 感到满意。

这是存储库的链接

[Fuelphp 速成课程](https://github.com/UCF/fuelphp-crash-course)

**这里还有一些你的问题的答案**

我是否需要安全令牌才能与表单一起使用？

我不认为你总是需要它来满足你的要求

希望这可以帮助您入门

# macos - Postsql 和 Postgis

> ID：15777475
> 
> 赞同：1
> 
> 时间：2013-04-03T01:43:27.967
> 
> 标签：macos, postgis, postgres.app

我试图让 postsql 和 postgis 一起工作，但一直遇到同样的问题。

使用：PostgreSQL 9.2.3 (postgres.app)

当我运行时：

```
CREATE EXTENSION postgis;  
ERROR:  could not access file "$libdir/postgis-2.0": No such file or directory 
```

我运行时也遇到同样的错误：

```
$psql -d myDB -f postgis.sql

psql:postgis.sql:49: ERROR:  could not access file "$libdir/postgis-2.0": No such file or directory 
```

当我检查我的 $libdir

```
$pg_config --libdir  
/Applications/Postgres.app/Contents/MacOS/lib  
$pg_config --pkglibdir  
/Applications/Postgres.app/Contents/MacOS/lib 
```

如果我检查目录，我会找到一个文件：postgis-2.0.so

几天来我一直在努力解决这个问题，但无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T19:34:12.850

我使用[kyngchaos 发行版](http://www.kyngchaos.com/software/postgres)重新安装了 postgres并解决了这个问题——我以前自己从源代码编译过它。如果您有不想替换的数据，您可以升级您的数据目录并将 KyngCHAOS 指向它，使用 PGDATA 环境变量。祝你好运，我希望你能解决你的问题。不过，如果您还有其他问题，请发表评论。

# c++ - 通过 C++ 中的套接字发送图像

> ID：15777479
> 
> 赞同：2
> 
> 时间：2013-04-03T01:43:48.123
> 
> 标签：c++, image, sockets, char, send

我正在尝试使用套接字在 C++ 中发送图像。

我面临的问题是将图像读取为二进制 base64，然后将其插入 char 数组以发送它。

如果你能帮助我或给我一个关于如何将图像读取为二进制 base64 然后将其插入 char 数组的提示，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:30:34.120

您应该首先将文件作为二进制文件读取。然后使用读取缓冲区编码为 base64 并将其发送给接收者。尝试在 C++ 中准备 binaryIO，并且有很多 base64 库，例如 apache、openssl 等。

对于二进制 IO。 [读取二进制文件 c++](https://stackoverflow.com/questions/6162601/read-binary-file-c) [http://courses.cs.vt.edu/cs2604/fall02/binio.html](http://courses.cs.vt.edu/cs2604/fall02/binio.html)

Base64： [如何将二进制字符串转换为 base64 编码数据..？](https://stackoverflow.com/questions/6385319/how-to-convert-the-binary-string-into-base64-encode-data)

# c++ - 你好！我想让我的程序定期显示文本。作为“加载栏”的东西。

> ID：15777480
> 
> 赞同：0
> 
> 时间：2013-04-03T01:43:52.663
> 
> 标签：c++, time, timer

我的名字是 Alvaro，我正在使用 notepad++ 和 cygwin（在 Windows 上）用 C++ 编程。

我想为我的程序制作一个“加载栏”。我不打算做一个真正的加载栏，每 x 秒只出现一段文本。

我在想 C++ 中是否有一些函数可以在给定的时间内保存命令。

如果是一种制作真正加载栏的方式（在执行主进程时实现命令）

这是我想在其中应用任何这些功能的一段代码。它是一个简单的打印命令，我希望它每 x 秒显示一次冒号：

```

`cout <<":::::::::::::::::::::::::::::::::::::::::"<<endl;
cout << endl;` 

感谢您的回答，请尽量保持简单:)。

            回答 #1

赞同：1

时间：2013-04-03T01:45:58.400

```
cout << ":";
cout.flush(); 
```

通过在每次写入后刷新流，文本应该立即出现而不需要换行符。

```

# c++ - 多次调用同一函数返回值的问题

> ID：15777482
> 
> 赞同：0
> 
> 时间：2013-04-03T01:44:08.143
> 
> 标签：c++, return, invoke

好的，所以我正在做这个家庭作业，我老师的第一语言不是英语，而且并不总是最擅长指路。我正在尝试编写一个程序，要求提供期中成绩和期末考试成绩，然后将这两个值相加以显示总分。

我的问题是它似乎没有返回输入的分数或将它们存储在各自的变量中以便加在一起（也就是总显示为零）

这是我的代码：

```
// Lab11P2.cpp

#include<iostream>
using namespace std;

double getNcheckScore(double, double);

int main()
{
    double midterm = 0.0;
    double final = 0.0;
    double total =0.0;

    cout << "MIDTERM EXAM" << endl;
    midterm == getNcheckScore(midterm, final);

    cout << "FINAL EXAM" << endl;
    final == getNcheckScore(midterm, final);

    total = midterm + final;
    cout << "Total score: " << total << endl;   

    system("pause");
    return 0;
}

    double getNcheckScore(double midterm, double final)
{
    double score = 0.0;
    cout << "Please enter your score: ";
    cin >> score;
    while (score < 0 || score > 100)
    {
          cout << "Score must be between 0 and 100\.  Please enter again: ";
          cin >> score;
    } 
    return score;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:48:16.663

您正在使用`==`而不是在`=`这里：

```
midterm == getNcheckScore(midterm, final); 
```

和这里：

```
final == getNcheckScore(midterm, final); 
```

所以这些根本没有为这些变量赋值。这是在打开警告的情况下编译的一个很好的理由，因为您会看到如下内容：

```
warning: value computed is not used [-Wunused-value]
 midterm == getNcheckScore(midterm, final); 
```

这本来是一个很好的线索。此外，您没有对函数的两个参数做任何事情：

```
double getNcheckScore(double midterm, double final) 
```

但是，如果您计划最终通过这些参数传回数据，它们将需要成为引用，如下所示：

```
double getNcheckScore(double &midterm, double &final) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T01:48:09.603

> 期中 == getNcheckScore（期中，期末）；

不要使用 ==，这是一个比较运算符。使用 = 进行赋值。

# c# - System.Data.Common.DataAdapter：RowUpdated 和 RowUpdating 事件不存在

> ID：15777483
> 
> 赞同：1
> 
> 时间：2013-04-03T01:44:09.800
> 
> 标签：c#, .net, events, dataadapter

我目前正在开发一个允许连接到多个提供者特定数据库的程序，所以显然我正在使用非提供者特定类（在 System.Data.Common 中）来处理这些不同的连接，一旦连接或数据适配器已通过使用提供者的实现进行了实例化。

但是，我想利用根据 MSDN ( [http://msdn.microsoft.com/en-us/library/6d1wk41s.aspx](http://msdn.microsoft.com/en-us/library/6d1wk41s.aspx) ) 被认为是 DataAdapter 基类的一部分的 RowUpdated 和 RowUpdating 事件。但显然情况并非如此，因为那些事件仅通过 DbDataAdapter 的提供者特定的实现（如 SqlDataAdapter、OleDbDataAdapter 等）来实现。

我的主要目标是能够通过使用通用的 DbDataAdapter 类来处理这些事件，并且必须将事情转换回数据适配器的特定于提供程序的实现的派生类将是一个很大的痛苦。

这样做有什么巧妙的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:44:09.800

我在网上做了很多搜索，除了将实例重新转换回派生类以访问这些事件之外，真的没有找到任何具体的东西。

因此，通过使用扩展方法，我向 DbDataAdapter 抽象类添加了两个新方法，这将允许为这两个特定事件添加事件处理程序，这是我的实现（编辑于 2013 年 4 月 23 日，用于处理实例或静态处理程序方法）：

```
using System;
using System.Data.Common;
using System.Reflection;

namespace Extensions
{
    /// <summary>
    /// Delegate event handler used with the <c>DbDataAdapter.RowUpdated</c> event.
    /// </summary>
    public delegate void RowUpdatedEventHandler(object sender, RowUpdatedEventArgs e);

    /// <summary>
    /// Delegate event handler used with the <c>DbDataAdapter.RowUpdating</c> event.
    /// </summary>
    public delegate void RowUpdatingEventHandler(object sender, RowUpdatingEventArgs e);

    public static class DbDataAdapterExtension
    {
        private static EventInfo GetEvent(string eventName, Type type)
        {
            return type.GetEvent(eventName, BindingFlags.Public | BindingFlags.Instance | BindingFlags.DeclaredOnly);
        }

        /// <summary>
        /// Registers a <c>RowUpdatedEventHandler</c> with this instance's <c>RowUpdated</c> event.
        /// </summary>
        /// <param name="handler">The event handler to register for the event.</param>
        /// <returns><c>true</c> if the event handler was successfully registered, otherwise <c>false</c>.</returns>
        public static bool AddRowUpdatedHandler(this DbDataAdapter adapter, RowUpdatedEventHandler handler)
        {
            EventInfo updEvent = GetEvent("RowUpdated", adapter.GetType());

            if (updEvent != null)
            {
                try
                {
                    if (handler.Method.IsStatic)
                    {
                        updEvent.AddEventHandler(adapter, Delegate.CreateDelegate(updEvent.EventHandlerType, handler.Method));
                    }
                    else
                    {
                        updEvent.AddEventHandler(adapter, Delegate.CreateDelegate(updEvent.EventHandlerType, handler.Target, handler.Method));
                    }

                    return true;
                }
                catch { }
            }

            return false;
        }

        /// <summary>
        /// Registers a <c>RowUpdatingEventHandler</c> with this instance's <c>RowUpdating</c> event.
        /// </summary>
        /// <param name="handler">The event handler to register for the event.</param>
        /// <returns><c>true</c> if the event handler was successfully registered, otherwise <c>false</c>.</returns>
        public static bool AddRowUpdatingHandler(this DbDataAdapter adapter, RowUpdatingEventHandler handler)
        {
            EventInfo updEvent = GetEvent("RowUpdating", adapter.GetType());

            if (updEvent != null)
            {
                try
                {
                    if (handler.Method.IsStatic)
                    {
                        updEvent.AddEventHandler(adapter, Delegate.CreateDelegate(updEvent.EventHandlerType, handler.Method));
                    }
                    else
                    {
                        updEvent.AddEventHandler(adapter, Delegate.CreateDelegate(updEvent.EventHandlerType, handler.Target, handler.Method));
                    }

                    return true;
                }
                catch { }
            }

            return false;
        }
    }
} 
```

我将基本 RowUpdatedEventArgs 和 RowUpdatingEventArgs 用于返回给委托的事件参数，因此如果您需要特定于提供程序的成员，这些成员只能通过从上述两个基本事件参数类派生的提供程序定义的类获得，然后他们将需要被强制转换为这些类。否则，它可以正常工作，现在我可以从 DbDataAdapter 类中获得独立于提供程序的事件处理程序（这是 Microsoft 应该从一开始就实现它们的方式）。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T23:43:38.153

谢谢 - 非常有用！

也许有人在 Visual Basic 中需要这个

例如这样称呼它：

```
Imports YourProject.DbDataAdapterExtension 
```

. . .

```
Dim HandleOnRowUpd As RowUpdatedEventHandler = AddressOf OnRowUpdated

Dim TrueFalse As Boolean = YourDataAdapter.AddRowUpdatedHandler(HandleOnRowUpd) 
```

* * *

```
Imports System.Data.Common
Imports System.Reflection
Imports System.Runtime.CompilerServices

' Namespace Extensions

''' <summary>
''' Delegate event handler used with the <c>DbDataAdapter.RowUpdated</c> event.
''' </summary>
''' 
Public Delegate Sub RowUpdatedEventHandler(sender As Object, e As RowUpdatedEventArgs)

''' <summary>
''' Delegate event handler used with the <c>DbDataAdapter.RowUpdating</c> event.
''' </summary>
''' 
Public Delegate Sub RowUpdatingEventHandler(sender As Object, e As RowUpdatingEventArgs)

Public Module DbDataAdapterExtension

    Sub New()
    End Sub

    Private Function GetEvent(eventName As String, type As Type) As EventInfo
        Return type.GetEvent(eventName, BindingFlags.[Public] Or BindingFlags.Instance Or BindingFlags.DeclaredOnly)
    End Function

    ''' <summary>
    ''' Registers a <c>RowUpdatedEventHandler</c> with this instance's <c>RowUpdated</c> event.
    ''' </summary>
    ''' <param name="handler">The event handler to register for the event.</param>
    ''' <returns><c>true</c> if the event handler was successfully registered, otherwise <c>false</c>.</returns>
    ''' 
    <Extension> Public Function AddRowUpdatedHandler(adapter As DbDataAdapter, handler As RowUpdatedEventHandler) As Boolean

        Dim updEvent As EventInfo = GetEvent("RowUpdated", adapter.[GetType]())

        If updEvent IsNot Nothing Then
            Try
                If handler.Method.IsStatic Then
                    updEvent.AddEventHandler(adapter, [Delegate].CreateDelegate(updEvent.EventHandlerType, handler.Method))
                Else
                    updEvent.AddEventHandler(adapter, [Delegate].CreateDelegate(updEvent.EventHandlerType, handler.Target, handler.Method))
                End If

                Return True
            Catch
            End Try
        End If

        Return False
    End Function

    ''' <summary>
    ''' Registers a <c>RowUpdatingEventHandler</c> with this instance's <c>RowUpdating</c> event.
    ''' </summary>
    ''' <param name="handler">The event handler to register for the event.</param>
    ''' <returns><c>true</c> if the event handler was successfully registered, otherwise <c>false</c>.</returns>
    ''' 
    <Extension> Public Function AddRowUpdatingHandler(adapter As DbDataAdapter, handler As RowUpdatingEventHandler) As Boolean

        Dim updEvent As EventInfo = GetEvent("RowUpdating", adapter.[GetType]())

        If updEvent IsNot Nothing Then
            Try
                If handler.Method.IsStatic Then
                    updEvent.AddEventHandler(adapter, [Delegate].CreateDelegate(updEvent.EventHandlerType, handler.Method))
                Else
                    updEvent.AddEventHandler(adapter, [Delegate].CreateDelegate(updEvent.EventHandlerType, handler.Target, handler.Method))
                End If

                Return True
            Catch
            End Try
        End If

        Return False
    End Function
End Module

' End Namespace 
```

# c++ - 创建一个计时器以在 X 秒内调用一个函数

> ID：15777489
> 
> 赞同：0
> 
> 时间：2013-04-03T01:44:31.677
> 
> 标签：c++, c++11, timer

所以我有我想在 5 秒内执行的打印功能。问题是我想要函数中的所有其他内容。所以例如，如果我的代码是：

```
// insert code here...
printf("(5 seconds later) Hello"); /* should be executed in 5 seconds */
printf("heya"); 
```

以主函数为例。现在这是棘手的部分。虽然第一行应该在 5 秒内执行，但如果第一行根本不存在，则第二行应该像往常一样执行。所以输出将是：

```
heya
(5 seconds later) Hello 
```

如果您熟悉 Cocoa 或 Cocoa Touch，这正是 NSTimer 类的工作原理。使用 C++，除了使用线程之外，还有更简单或内置的方式吗？如果没有，我将如何使用多线程来执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T01:49:14.813

使用`<chrono>`and `<thread>`，您可以创建一个非常基本但简单的：

```
std::thread printLater{[] {
    std::this_thread::sleep_for(std::chrono::seconds(5));
    printf("(5 seconds later) Hello");
}};

printf("heya");

printLater.join(); //when you want to wait for the thread to complete 
```

Pubby 指出的另一种方法是使用`std::async`：

```
auto f = std::async(std::launch::async, [] {
    std::this_thread::sleep_for(std::chrono::seconds(5));
    printf("(5 seconds later) Hello");
});

printf("heya"); 
```

存储到变量中的结果`std::async`意味着调用将启动一个新线程来运行该函数。如果不存储结果，则没有新线程。这是该语言中的新问题之一。

请注意，打印时可能不会恰好在 5 秒后，并且没有同步输出，因此`printf`如果打印不止一个，您可能会得到交错的输出块（是原子的，因此每个调用的整个输出都会交错）每个线程中的东西。如果没有同步，则无法保证哪些语句何时发生，因此如果您确实需要注意可能出现的同步问题，则应小心。不过，出于基本目的，这应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:17:28.067

以下是我解决此问题的方法：

```
#include <iostream>
#include <thread>
#include <chrono>

std::thread timerThread;

void printStatement() {
    std::this_thread::sleep_for(std::chrono::seconds(5));
    printf("(5 seconds later) Hello");
}

bool myBool() {
    timerThread = std::thread(printStatement);
    return YES;
}

int main(int argc, const char * argv[])
{
    // insert code here...
    printf("%i\n", myBool());
    printf("heya\n");
    // you could also use the async stuff, join or std::future instead of sleep()
    sleep(5); // this is only here to keep the thread from being detatched before it can even finish sleeping
    timerThread.detach();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T09:35:11.910

我的带有 boost asio 和 std::async 的 snap 版本。没有使用睡眠。

```
#include <boost/asio.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>
#include <boost/noncopyable.hpp>

#include <chrono>
#include <future>
#include <memory>
#include <iostream>

class MonotonicExecutor
    : public boost::noncopyable,
      public std::enable_shared_from_this<MonotonicExecutor> {
  typedef std::function<void()> Functor;

public:
  MonotonicExecutor(boost::posix_time::time_duration trig)
      : m_service(),
        m_serviceWork(
            std::make_shared<boost::asio::io_service::work>(m_service)),
        m_deadlineTimer(m_service), m_trigger(trig) {
    auto fut = std::async(std::launch::async, [&]() { m_service.run(); });
    fut.wait_for(std::chrono::milliseconds(1));
  }
  void executeAsync(Functor fun) {
    m_deadlineTimer.expires_from_now(m_trigger);
    m_deadlineTimer.async_wait(std::bind(&MonotonicExecutor::execute,
                                         shared_from_this(),
                                         std::placeholders::_1, fun));
  }
  void abort() { m_deadlineTimer.cancel(); }

private:
  void execute(const boost::system::error_code &err, Functor fun) {
    if (err != boost::asio::error::operation_aborted &&
        m_deadlineTimer.expires_at() <=
            boost::asio::deadline_timer::traits_type::now()) {
      m_deadlineTimer.cancel();
      fun();
      m_deadlineTimer.expires_from_now(m_trigger);
      m_deadlineTimer.async_wait(std::bind(&MonotonicExecutor::execute,
                                           shared_from_this(),
                                           std::placeholders::_1, fun));
    }
  }

private:
  boost::asio::io_service m_service;
  std::shared_ptr<boost::asio::io_service::work> m_serviceWork;
  boost::asio::deadline_timer m_deadlineTimer;
  boost::posix_time::time_duration m_trigger;
};

int main(int argc, char *argv[]) {
  auto executor =
      std::make_shared<MonotonicExecutor>(boost::posix_time::seconds(3));
  executor->executeAsync([&]() {
    std::cout << boost::posix_time::to_iso_string(
                     boost::posix_time::second_clock::local_time())
              << std::endl;
  });

  auto stop = std::chrono::system_clock::now() + std::chrono::seconds(30);
  while (std::chrono::system_clock::now() < stop) {
    std::this_thread::sleep_for(std::chrono::seconds(1));
  }
  executor->abort();
  std::cout << "Wait and see if the task is aborted" << std::endl;
  stop = std::chrono::system_clock::now() + std::chrono::seconds(30);
  while (std::chrono::system_clock::now() < stop) {
    std::this_thread::sleep_for(std::chrono::seconds(1));
  }
  return 0;
} 
```

# powershell - 为什么我的 PowerShell 退出代码总是“0”？

> ID：15777492
> 
> 赞同：78
> 
> 时间：2013-04-03T01:45:27.623
> 
> 标签：powershell, teamcity, exit-code

我有一个 PowerShell 脚本如下

```
##teamcity[progressMessage 'Beginning build']
# If the build computer is not running the appropriate version of .NET, then the build will not run. Throw an error immediately.
if( (ls "$env:windir\Microsoft.NET\Framework\v4.0*") -eq $null ) {
    throw "This project requires .NET 4.0 to compile. Unfortunately .NET 4.0 doesn't appear to be installed on this machine."
    ##teamcity[buildStatus status='FAILURE' ]
}

##teamcity[progressMessage 'Setting up variables']
# Set up variables for the build script
$invocation = (Get-Variable MyInvocation).Value
$directorypath = Split-Path $invocation.MyCommand.Path
$v4_net_version = (ls "$env:windir\Microsoft.NET\Framework\v4.0*").Name
$nl = [Environment]::NewLine

Copy-Item -LiteralPath "$directorypath\packages\NUnit.2.6.2\lib\nunit.framework.dll" "$directorypath\Pandell.Tests\bin\debug" -Force

##teamcity[progressMessage 'Using msbuild.exe to build the project']
# Build the project using msbuild.exe.
# Note we've already determined that .NET is already installed on this computer.
cmd /c C:\Windows\Microsoft.NET\Framework\$v4_net_version\msbuild.exe "$directorypath\Pandell.sln" /p:Configuration=Release
cmd /c C:\Windows\Microsoft.NET\Framework\$v4_net_version\msbuild.exe "$directorypath\Pandell.sln" /p:Configuration=Debug

# Break if the build throws an error.
if(! $?) {
    throw "Fatal error, project build failed"
    ##teamcity[buildStatus status='FAILURE' ]
}

##teamcity[progressMessage 'Build Passed']
# Good, the build passed
Write-Host "$nl project build passed."  -ForegroundColor Green

##teamcity[progressMessage 'running tests']
# Run the tests.
cmd /c $directorypath\build_tools\nunit\nunit-console.exe $directorypath\Pandell.Tests\bin\debug\Pandell.Tests.dll

# Break if the tests throw an error.
if(! $?) {
    throw "Test run failed."
    ##teamcity[buildStatus status='FAILURE' ]
}

##teamcity[progressMessage 'Tests passed'] 
```

据我所知，[未捕获`Throw`](https://devblogs.microsoft.com/powershell/windows-powershell-exit-codes?Redirected=true)将导致退出代码为`1`，但不幸的是，TeamCity 另有说法。

```
[19:32:20]Test run failed.
[19:32:20]At C:\BuildAgent\work\e903de7564e599c8\build.ps1:44 char:2
[19:32:20]+     throw "Test run failed."
[19:32:20]+     ~~~~~~~~~~~~~~~~~~~~~~~~
[19:32:20]    + CategoryInfo          : OperationStopped: (Test run failed.:String) [],
[19:32:20]   RuntimeException
[19:32:20]    + FullyQualifiedErrorId : Test run failed.
[19:32:20]
[19:32:20]Process exited with code 0
[19:32:20]Publishing internal artifacts
[19:32:20][Publishing internal artifacts] Sending build.finish.properties.gz file
[19:32:20]Build finished 
```

注意 my`Execution Mode`设置为`Execute .ps1 script with "-File" argument`.

我尝试将其更改为`Put script into PowerShell stdin with "-Command -" arguments`，但随后它以退出代码失败，`1`即使通过了测试。我确信`-File`按照正确的方式运行它。

如果我打开位于的脚本`C:\BuildAgent\work\e903de7564e599c8\build.ps1`并在 CMD 中手动运行它，它会做同样的事情......即，失败的测试失败，并且`%errorlevel%`仍然是`0`.

然而，如果我在 PowerShell 中运行它并调用`$LASTEXITCODE`它，它每次都会返回正确的代码。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-04-03T05:09:19.507

这是 PowerShell 的一个已知问题。执行脚本`-file`返回退出代码 0 时它不应该。

（更新：下面的链接不再有效。请在*[PowerShell 上查找或报告此问题：Hot (1454 idea) – Windows Server](https://windowsserver.uservoice.com/forums/301869-powershell)*）

*   [https://connect.microsoft.com/PowerShell/feedback/details/777375/powershell-exe-does-not-set-an-exit-code-when-file-is-used](https://connect.microsoft.com/PowerShell/feedback/details/777375/powershell-exe-does-not-set-an-exit-code-when-file-is-used)

*   [https://connect.microsoft.com/PowerShell/feedback/details/750653/powershell-exe-doesn-t-return-correct-exit-codes-when-using-the-file-option](https://connect.microsoft.com/PowerShell/feedback/details/750653/powershell-exe-doesn-t-return-correct-exit-codes-when-using-the-file-option)

由于 using`-command`对您不起作用，您可以尝试在脚本顶部添加一个陷阱：

```
trap
{
    write-output $_
    ##teamcity[buildStatus status='FAILURE' ]
    exit 1
} 
```

当抛出异常时，上述内容应导致正确的退出代码。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-11-06T14:19:17.460

我在使用 运行时遇到了这个确切的问题`-file`，但由于某种原因，Kevin 提供的陷阱语法或“退出”语法在我的场景中不起作用。

我不知道为什么，但以防其他人遇到同样的问题，我使用了下面的语法，它对我有用：

```
try{
    #DO SOMETHING HERE
}
catch
{
    Write-Error $_
    ##teamcity[buildStatus status='FAILURE']
    [System.Environment]::Exit(1)
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-05-04T10:42:53.710

直到这个（大概）作为[我对旧问题的自我回答的](https://stackoverflow.com/questions/11647987/how-do-i-get-errors-to-propagate-in-the-teamcity-powershell-runner)重复而被关闭，我将在这里总结最干净的解决方案：

*   大多数其他答案都涉及`stderr`从 PowerShell 位向 发射一些东西。这可以通过**Format stderr output as**选项直接使用 TeamCity 完成（将其设置为**Error**而不是默认值，即*Warning*）

*   但是，至关重要的是，还需要在“**失败条件**”下打开“如果构建失败：... **（原文如此）构建运行程序记录了错误消息**”（如果任何其他答案对您有用，您将可能已经打开了，但 IME*很*容易忘记！）

 **** * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-11T11:48:21.773

默认情况下，在命令上使用`-ErrorAction stop`会返回退出代码 1，并且在没有添加失败条件的情况下也在 TeamCity 中显示它。我们现在将默认为每个使用`$ErrorActionPreference = "Stop";`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-13T18:22:54.873

无论出于何种原因，这些选项都不适用于我的 PowerShell 脚本。我花了几个小时在上面。

对我来说，最好的选择是在 TeamCity 和 PowerShell 之间放置一个层。所以我简单地编写了一个调用 PowerShell 脚本的 C# 控制台应用程序。

我这样做的方式是，在 TeamCity 中，我们调用一个名为：`RemoteFile.ps1`

使用脚本参数： %system.RemoteServerFQDN% %system.RemoteUser% %system.RemoteUserPassword% %system.RemoteScriptName% %system.RemotePropertiesFile% %system.BuildVersion% %system.RunList%

```
param (
    [Parameter(Mandatory=$true)]
    $Computername,
    [Parameter(Mandatory=$true)]
    $Username,
    [Parameter(Mandatory=$true)]
    $Password,
    [Parameter(Mandatory=$true)]
    $ScriptName,
    [Parameter(Mandatory=$true)]
    $Propfile,
    [Parameter(Mandatory=$true)]
    $Version,
    [Parameter(Mandatory=$true)]
    [string[]]$DeploymentTypes
)

$securePassword = ConvertTo-SecureString -AsPlainText -Force $Password
$cred = New-Object System.Management.Automation.PSCredential $Username, $securePassword
Write-Host "Readying to execute invoke-command..."
Invoke-Command -ComputerName $Computername -Credential $cred -ScriptBlock {       D:\Deployment\PowershellWrapper.exe $using:ScriptName $using:Propfile $using:Version      $using:DeploymentTypes } -ArgumentList $ScriptName,$Propfile,$Version,$DeploymentTypes 
```

它存在于指定位置的远程服务器上。

然后该文件在指定位置调用：powershellwrapper.exe（我的脚本有四个参数要传递给 PowerShell 脚本）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Diagnostics;

namespace PowershellWrapper
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                string argFull = @"""{0} {1} {2} {3}""";
                string arg0 = args[0];
                string arg1 = args[1];
                string arg2 = args[2];
                string arg3 = args[3];
                string argFinal = string.Format(argFull, arg0, arg1, arg2, arg3);

                ProcessStartInfo startInfo = new ProcessStartInfo();
                startInfo.FileName = @"powershell.exe";
                startInfo.Arguments = argFinal;
                startInfo.RedirectStandardOutput = false;
                startInfo.RedirectStandardError = false;
                startInfo.UseShellExecute = false;
                startInfo.RedirectStandardInput = true;
                startInfo.CreateNoWindow = false;
                Process process = new Process();
                process.StartInfo = startInfo;
                process.Start();
            }
            catch (Exception e)
            {
                Console.WriteLine("{0} Exception caught.", e);
                Console.WriteLine("An error occurred in the deployment.", e);
                Console.WriteLine("Please contact test@test.com if error occurs.");
            }
        }
    }
} 
```

这用四个参数调用我的脚本。脚本是第一个参数，加上三个参数。所以基本上这里发生的事情是我正在执行 PowershellWrapper.exe 而不是 PowerShell 脚本本身来捕获错误的退出代码 0，它仍然会将完整的脚本报告回 TeamCity 日志。

我希望这是有道理的。它对我们来说就像一个魅力。***

# meteor - Meteor 是否利用了多个核心系统？

> ID：15777495
> 
> 赞同：1
> 
> 时间：2013-04-03T01:45:57.090
> 
> 标签：meteor

Meteor 是否利用了多核处理器？是否有需要设置的配置选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-03T19:38:08.487

简短的回答是否定的，Meteor 没有利用多核处理器。

原因很简单：Meteor 基于 node.js，根据定义 node.js 不会自动扩展到多个 CPU 或 CPU 内核。

您可能想知道是否有可能以某种方式“强制”它利用多个内核。好吧，我认为答案是“也许，但不容易”。最近 node.js 包含了集群模块[http://nodejs.org/docs/latest/api/cluster.html](http://nodejs.org/docs/latest/api/cluster.html)，它允许您启动最终返回的子进程。这对您来说可能是一个很好的用例，例如，如果您正在大规模进行图像处理或类似的事情。但我不知道有任何 Meteor-native 方式来实现这一点。

如果您从扩展的角度来看这个，您可以尝试通过在 *nix 上使用 Taskset 设置核心亲和性来启动每个核心的节点进程，然后在每个核心上生成一个流星实例。这*可能*有效，但我的直觉是您的硬件更有可能在 I/O 而不是 CPU 上阻塞。此外，目前两个流星服务器无法相互通信。

当 Meteor 进入 V1 版本时，您可能会有更多的运气 - 请参阅有关服务器到服务器通信的路线图上的 Trello 注释：[https ://trello.com/c/RKEYpJ4P/46-multitier-server-architecture-support-very-large -同时的客户数量](https://trello.com/c/RKEYpJ4P/46-multitier-server-architecture-support-very-large-numbers-of-simultaneous-clients)。

最后，请记住 Meteor 仍在开发中，Galaxy 可能（我在这里推测）支持多核处理。Galaxy 是 MDG 团队目前正在开发的流星平台。[您可以在http://www.meteor.com/blog/2012/07/25/meteors-new-112-million-development-budget](http://www.meteor.com/blog/2012/07/25/meteors-new-112-million-development-budget)上阅读有关此项目的更多信息

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-24T01:20:47.343

现在，您可以通过[Cluster](https://github.com/meteorhacks/cluster)获得带有 Meteor 的 Multiple Cores 。这是你必须做的。

首先添加集群包：

```
meteor add meteorhacks:kadira 
```

然后公开这个环境。运行应用程序时的变量：

```
export CLUSTER_WORKERS_COUNT=auto 
```

有关更多信息，请遵循[本文](https://meteorhacks.com/introducing-multi-core-support-for-meteor.html)。

# ruby-on-rails - 如何新建 Rails 项目

> ID：15777498
> 
> 赞同：-1
> 
> 时间：2013-04-03T01:46:15.273
> 
> 标签：ruby-on-rails, ubuntu

我试图在我的 Ubuntu 12.04 上安装 ruby​​ on rails。

我正在尝试创建一个新项目，一切看起来都很酷

```
 create  
  create  README.rdoc
  create  Rakefile
  create  config.ru
  create  .gitignore
  create  Gemfile
  create  app
  create  app/assets/images/rails.png
  create  app/assets/javascripts/application.js
  create  app/assets/stylesheets/application.css
  create  app/controllers/application_controller.rb
  create  app/helpers/application_helper.rb
  create  app/views/layouts/application.html.erb
  create  app/mailers/.gitkeep
  create  app/models/.gitkeep
  create  config
  create  config/routes.rb
  create  config/application.rb
  create  config/environment.rb
  create  config/environments
  create  config/environments/development.rb
  create  config/environments/production.rb
  create  config/environments/test.rb
  create  config/initializers
  create  config/initializers/backtrace_silencers.rb
  create  config/initializers/inflections.rb
  create  config/initializers/mime_types.rb
  create  config/initializers/secret_token.rb
  create  config/initializers/session_store.rb
  create  config/initializers/wrap_parameters.rb
  create  config/locales
  create  config/locales/en.yml
  create  config/boot.rb
  create  config/database.yml
  create  db
  create  db/seeds.rb
  create  doc
  create  doc/README_FOR_APP
  create  lib
  create  lib/tasks
  create  lib/tasks/.gitkeep
  create  lib/assets
  create  lib/assets/.gitkeep
  create  log
  create  log/.gitkeep
  create  public
  create  public/404.html
  create  public/422.html
  create  public/500.html
  create  public/favicon.ico
  create  public/index.html
  create  public/robots.txt
  create  script
  create  script/rails
  create  test/fixtures
  create  test/fixtures/.gitkeep
  create  test/functional
  create  test/functional/.gitkeep
  create  test/integration
  create  test/integration/.gitkeep
  create  test/unit
  create  test/unit/.gitkeep
  create  test/performance/browsing_test.rb
  create  test/test_helper.rb
  create  tmp/cache
  create  tmp/cache/assets
  create  vendor/assets/javascripts
  create  vendor/assets/javascripts/.gitkeep
  create  vendor/assets/stylesheets
  create  vendor/assets/stylesheets/.gitkeep
  create  vendor/plugins
  create  vendor/plugins/.gitkeep
     run  bundle install --local 
```

但最后一行有错误

```
/usr/bin/ruby1.9.1: No such file or directory -- /usr/bin/bundle (LoadError) 
```

之后，我尝试启动 rails 服务器，但我再次收到错误消息

```
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- bundler/setup (LoadError)
from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/mehmet/Desktop/ror/denemeee/config/boot.rb:6:in `<top (required)>'
from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from script/rails:5:in `<main>' 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:57:20.527

我也遇到过这样的问题

如果您查看错误消息，大多数情况下您可以找到有用的信息来帮助您进行下一步

例如，在您的情况下 `require': cannot load such file -- bundler/setup

这表示他们找不到捆绑程序，此时，您会发现您需要运行此命令

```
sudo gem install bundler 
```

如果没有 sudo，您可能会收到写入文件夹的权限错误。

大多数情况下，宝石会告诉你该怎么做，所以在后一种情况下，

赶紧跑

```
sudo bundle install 
```

再次，您可以使用 sudo 执行此操作，以获取权限抱怨。但我会建议您查看 rvm、rvmsudo，这将帮助您根据铁路项目分割您的 gem 发行版。

如果您是 Rails 新手，也许我可以给您一个简短而通用的步骤，而无需深入了解它的详细信息，您可以稍后在 Google 上搜索详细信息。

1）首先创建或加载新的rails项目（此时您已完成）

2）通过运行以下命令加载rails项目的gem和依赖项

```
gem install bundler 
```

3）你需要考虑，如果你要在一个项目中工作，或者不同类型的项目。因为每个项目都有自己的一组 gem 或依赖项，并且所需 gem 的版本可能会破坏另一个 rails 项目的依赖项。为避免这种情况，我建议您开始研究 rvm 和 rvmsudo。

在某些时候，你最终还是会这样做，因为你会想要处理多个 Rails 项目。

快乐编码！

# css - 使用 CSS 属性包含时如何防止剪切 2 个背景？

> ID：15777501
> 
> 赞同：0
> 
> 时间：2013-04-03T01:46:29.903
> 
> 标签：css, clipping

我想要页面顶部和页面底部的背景。使用这个 CSS 给了我正确的效果，但它以特定的分辨率将图像剪辑在一起。有没有办法停止剪辑效果？

```
body{
position:static;
background-image:url(images/header.png), url(images/footer.png);
background-size:contain, contain;
background-position:center top, center bottom;
background-repeat:no-repeat, no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:51:17.867

我通过交换图像作弊了一点，但到目前为止，这是我的解决方案：http: [//jsbin.com/otuvuj/1](http://jsbin.com/otuvuj/1)

这是你想要的效果吗？

# commonjs - commonJS - 它有公共属性吗？

> ID：15777509
> 
> 赞同：0
> 
> 时间：2013-04-03T01:47:06.110
> 
> 标签：commonjs

我读了一篇关于 commonJS - foun 的有趣文章

[http://smorgasbork.com/index.php?option=com_content&view=article&id=132](http://smorgasbork.com/index.php?option=com_content&view=article&id=132)

但是，它没有回答我的主要问题——通用 commonJS 对象中是否可以有一个公共成员？

也就是说，不是使用创建的整个精美对象（本教程将详细介绍令人耳目一新的细节），而只是，您知道，通用样式。

如何声明，如果它是静态的或不是等 - 有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:43:09.533

如果我理解你的问题，那么**是**的。

```
function MyClass(options) {
    // something like a constructor in java
    this.myProperty = 'foo'; // instance property
}

MyClass.prototype.doSometing(what)
    // this is an instance method (because of prototype, this is generated for each instance, can have a reference to `this`)
}

MyClass.doSomethingElse(andWhat)
    // this is a static method, which is not available for an instantiated object (only via MyClass.doSometingElse();)
}

MyClass.staticProperty = 'bar'; // static property;

module.exports = MyClass; 
```

我希望这是你想知道的。它们都是公开的。不可能创建私有静态属性，因为这些属性始终是公共的。此外，私有实例属性通常不是私有的或不是不动产。它只是一个局部变量，只能在定义它的函数内访问。如果您可以通过 访问它`this`，那么它也是公开可用的。

* * *

题外话：在导出此模块之前，您可以创建一个实例并导出该实例。这将在 Java 中创建类似单例的东西。因此，每当您请求此模块时，您都会得到相同的实例：

```
MyClass = new MyClass();
module.exports = MyClass; 
```

但这将删除所有静态引用，因为在这种情况下 MyClass 将是一个实例。

# url - 从 Google 快讯链接中提取原始网址

> ID：15777513
> 
> 赞同：1
> 
> 时间：2013-04-03T01:47:54.223
> 
> 标签：url, extract

我希望有人可以帮助我解决这个小问题..？

我正在使用 Google 快讯将突发新闻故事拉到网站上，不幸的是，当我尝试找到原始网址（在 Google 快讯之前）时，我得到的只是一个 Google 网址，如下所示；

[http://www.google.com/url?sa=X&q=](http://www.google.com/url?sa=X&q=)

**[http://www.source.com/2013/04/02/title.html](http://www.source.com/2013/04/02/title.html)**

&ct=ga&cad=CAcQARgAIAAoATAAOABArOXtigVIAlAAWABiBWVuLVVT&cd=ZQHHhnCXS8w&usg=AFQjCNGGGZgSyC3KvMJUW0ICYsCtRZ2uJA

我已将此网址分解为相关部分以使其更易于理解，第 1 部分始终完全相同，但第 2 和第 3 部分确实发生了变化。然而，第三部分总是以 &ct= 开头，我认为它是查询的一部分..？

在我正在使用的脚本中，整个 url 被分配为 $link 并且如果可能的话，我想做的是从 Google Alerts url 中提取原始源 url，以便归属于它应该去的地方而不是去中间那个人！

我的 php 知识非常基础，因此我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:33:23.337

您可以使用这个函数，它基本上采用起始 URL，跟踪所有重定向并返回最后一个有效 URL。

```
/**
 * Get target url from a redirect
 *
 * @param string $url Source url
 * @return string
 */

function getLastEffectiveUrl($url) {

    // initialize cURL
    $curl = curl_init($url);
    curl_setopt_array($curl, array(
        CURLOPT_RETURNTRANSFER  => true,
        CURLOPT_FOLLOWLOCATION  => true,
    ));

    // execute the request
    $result = curl_exec($curl);

    // fail if the request was not successful
    if ($result === false) {
        curl_close($curl);
        return null;
    }

    // extract the target url
    $redirectUrl = curl_getinfo($curl, CURLINFO_EFFECTIVE_URL);
    curl_close($curl);

        return $redirectUrl;
    } 
```

用法很简单。如果我们想获取 Mark Zuckerberg 的个人资料图片的最后一个有效 URL，我们可以这样调用该函数：

```
 $lastEffectiveUrl = getLastEffectiveUrl('http://graph.facebook.com/4/picture'); 
```

调用后的值`$lastEffectiveUrl`将是预期的：

```
 'http://profile.ak.fbcdn.net/hprofile-ak-snc4/157340_4_3955636_q.jpg'; 
```

**所有**的功劳都归功于写这篇文章的人，我只是做了一点挖掘：[从给定 URL 的一系列重定向中获取最后一个有效 URL](http://codeaid.net/php/get-the-last-effective-url-from-a-series-of-redirects-for-the-given-url)

# javascript - 在包装 jQuery 插件的匿名函数中使用“窗口”、“文档”和“未定义”作为参数

> ID：15777519
> 
> 赞同：25
> 
> 时间：2013-04-03T01:48:18.820
> 
> 标签：javascript, jquery, jquery-plugins, boilerplate, dollar-sign

老实说，我不知道如何缩短标题。

[通过学习SlidesJS](http://slidesjs.com/)插件的源码，我学会了如何编写一个 jQuery插件。当我遇到新事物时，我只是问了我的好朋友**谷歌**，大多数时候都得到了满意的答案。不过老实说，我从来没有努力过。我所知道的`$`是（可能）是一个简写的 jQuery 对象构造函数，`$()`并且`jQuery()`在包含 jQuery 的情况下也是一样的。

不过，最近，我试图了解 jQuery 背后的科学以及如何编写一个**好的**jQuery 插件。我遇到了一篇非常好的[文章](http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/)，其中作者列出了几个用于创建 jQuery 插件的*模板。*由于其余的太复杂了，我无法理解，我喜欢第一个：*轻量级的开始*。现在，这里是上述模板的代码。

```
/*!
 * jQuery lightweight plugin boilerplate
 * Original author: @ajpiano
 * Further changes, comments: @addyosmani
 * Licensed under the MIT license
 */

// the semi-colon before the function invocation is a safety 
// net against concatenated scripts and/or other plugins 
// that are not closed properly.
;(function ( $, window, document, undefined ) {

    // undefined is used here as the undefined global 
    // variable in ECMAScript 3 and is mutable (i.e. it can 
    // be changed by someone else). undefined isn't really 
    // being passed in so we can ensure that its value is 
    // truly undefined. In ES5, undefined can no longer be 
    // modified.

    // window and document are passed through as local 
    // variables rather than as globals, because this (slightly) 
    // quickens the resolution process and can be more 
    // efficiently minified (especially when both are 
    // regularly referenced in your plugin).

    // Create the defaults once
    var pluginName = 'defaultPluginName',
        defaults = {
            propertyName: "value"
        };

    // The actual plugin constructor
    function Plugin( element, options ) {
        this.element = element;

        // jQuery has an extend method that merges the 
        // contents of two or more objects, storing the 
        // result in the first object. The first object 
        // is generally empty because we don't want to alter 
        // the default options for future instances of the plugin
        this.options = $.extend( {}, defaults, options) ;

        this._defaults = defaults;
        this._name = pluginName;

        this.init();
    }

    Plugin.prototype.init = function () {
        // Place initialization logic here
        // You already have access to the DOM element and
        // the options via the instance, e.g. this.element 
        // and this.options
    };

    // A really lightweight plugin wrapper around the constructor, 
    // preventing against multiple instantiations
    $.fn[pluginName] = function ( options ) {
        return this.each(function () {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName, 
                new Plugin( this, options ));
            }
        });
    }

})( jQuery, window, document ); 
```

我已将评论包括在内，以便在我的问题中引用它们。

我有一个粗略的想法，为什么`window`并且`document`已经包含在包装插件的匿名函数的参数中*（我不知道还能调用什么）*，因为它在评论中给出了它有点缩短了执行时间。但这是如何工作的？包装插件的上述匿名函数的任何参数都会传递到哪里？这些在插件中是如何解决的？

通常，我会这样做`$(window).resize(function(){})`，但在这种情况下不起作用。如果我`console.log(window)`在插件函数内部执行，它会显示“未定义”。

这让我想到了另一个问题：什么是**未定义**的？它不是分配给未在范围内定义的**对象的****数据类型吗？**它如何作为参数传递？论点不是必须是对象吗？评论里写了几行关于这个，但我一个字都看不懂：<*所以我们可以确保它的值是真正的未定义*> whaaa？

 ***总结一下：

*   究竟是什么意思`function($)`？
*   为什么我应该包含`window`,`document`和`undefined`作为 的参数`function($)`？
*   如果我这样做，我如何访问实际`window`和`document`对象？
*   `undefined`什么，为什么？

* * *

请对我放轻松。我从来没有为了编写应用程序的明确目的而将编程语言作为一门学科。我学习了基本的 C 语言，用于为微型核心微控制器编写面向硬件的低级例程，仅此而已。我确实广泛地学习了 C++ 和一点点 Java。只是为了让你知道会发生什么。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-03T02:24:10.770

当您编写如下函数时：

```
(function (foo, bar) {
    return foo.getElementById(bar);
})(document, "myElement") 
```

然后立即使用参数调用该函数，`document`并`"myElement"`为参数`foo`和`bar`. 因此，在函数内部，`foo.getElementById(bar)`等价于`document.getElementById("myElement")`.

同样，在您的插件示例中，您会立即使用 arguments 调用该函数`jQuery, document, window`。

> 究竟是什么意思`function($)`？

简单地表示对传递给包装函数的对象的`$`引用。`jQuery`稍后，当使用 调用匿名函数时，函数`(jQuery, window, document)`内部`$`的引用会引用该`jQuery`对象。这样做的原因有很多，其中最重要的是`$`打字速度更快。它还允许用户将包装器中的插件应用到*可能*`jQuery`由`jQuery.noConflict()`.

> 为什么我应该包含`window`,`document`和`undefined`作为 的参数`function($)`？

你*不需要*包括这些。原作者的推理是分配函数局部变量来引用这些将缩短解析这些变量所需的时间。我断言节省的费用微不足道；除非我*大量*引用`window`和/或`document`.

至于`undefined`，原作者包含此内容的目的是确保有人没有更改`undefined`EcmaScript 4 中的全局变量（编辑：实际上是 ECMAScript 3 - 版本 4 从未实现过）或更早版本。同样，我无法想象会出现这个问题。如果您真的担心这可能是一个问题，只需在您的函数中包含以下内容：

```
if(typeof undefined !== "undefined") {
    undefined = void 0;
} 
```

> 如果我这样做，我如何访问实际`window`和`document`对象？

您所要做的就是确保匿名函数末尾的函数调用传入实际的（jQuery、窗口、文档）参数。或者，不要在函数签名中包含`window`and参数。`document`无论哪种方式，您都将引用*实际*对象，而不管间接级别如何。

> `undefined`什么，为什么？

`undefined`是“未定义”类型的全局变量。尚未初始化的字段与未定义完全相等 (===)。它允许程序员区分一个故意为空的值和一个简单的未初始化的值。在 ECMAScript 5 及更高版本中，`undefined`是只读的。在此之前，其他代码可能会修改`undefined`. 您*始终*`undefined`可以使用表达式`void 0`...获得真实值，如`myUndefinedVar = void 0;`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T02:18:00.580

> 是什么意思`function($)`？

作为参数传递`$`给您的函数使您可以使用`jQuery`速记对象，正如您清楚地指出的那样，它只是`jQuery`对象的别名（另请查看[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)）。

> 为什么我应该包含`window`,`document`和`undefined`作为 的参数`function($)`？我有一个粗略的想法，为什么 window 和 document 已包含在包装插件的匿名函数的参数中（我不知道还能调用什么），因为它在评论中给出了它有点缩短了执行时间. 但这是如何工作的？包装插件的上述匿名函数的任何参数都会传递到哪里？

传递`window`和`document`作为局部变量*有点缩短执行时间*，因为访问局部变量比访问全局变量更容易和更快，因为[局部变量在链中是第一个](http://jonraasch.com/blog/10-javascript-performance-boosting-tips-from-nicholas-zakas)。哪种回答你的第二个问题：参数在匿名函数**范围内**传递，这就是你创建匿名函数的全部意义：创建一个闭包。

这些参数在函数末尾传递，您可以在其中看到最后一个括号。闭包中的变量`window`指的是，`global window`因为您在最后传递了它。

你通过的原因`undefined`是因为`undefined`是一个 Javascript 混乱的混乱。基本上，[**`undefined`是*全局对象***](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/undefined)的一个​​属性，也就是说，它是一个变量，一个*单例*。**它不受保护**，这意味着可以被覆盖。这意味着你可以有一个`undefined`实际定义的。

通过传递，`undefined`您可以确保，即使有人`undefined`在全局范围内搞砸了（永远不要相信全局范围！:)），您仍然会得到正确的`undefined`.

此外，同样的性能原因也适用于`undefined`.

> 如果我这样做，我如何访问实际的窗口和文档对象？

您已经在访问它们，因为您正在将它们传递给您的函数。因此，您可以操纵它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T02:30:28.437

在详细回答之前，让我指出，与其他编程语言不同，javascript 有点奇怪，原因有两个：首先，它是仓促创建的，这意味着很多东西没有得到完善或实现。其次，它很快就被互联网采用了，微软非常快速、非常准确地复制了这种语言（包括语言中的错误）。这样做的结果是，试图纠正语言设计中的错误是困难的和/或不可能的，因为他们不想破坏与现有网站的兼容性。

现在进入细节：

## function($) 的真正含义是什么

没什么特别的。在 javascript 中，函数和变量名允许使用`a-z`包括大写、数字`0-9`和符号在内的字母`$`和`_`. 对于如何使用它们没有其他限制。尽管有一些指导方针和约定，有些是语言规范本身提到的，有些是随着编程社区的发展而发展起来的。

因此，`$`只是一个变量名。两者之间没有区别：

```
function foo ($) {alert($)} 
```

和

```
function foo (x) {alert(x)} 
```

它只是为参数选择的名称。但是，该规范强烈建议`$`不应由人类编写的代码使用。对于计算机生成的代码（例如咖啡脚本编译器）可以，但对于常规脚本则不行。另一方面，强烈建议在使用 jQuery 的脚本中`$`总是引用 jQuery 对象（顺便说一下，它也是一个函数，这在 javascript 中很好，因为函数是对象）。

由于您正在编写 jQuery，因此 的含义`function ($)`是一个接受一个参数的匿名函数，它期望的参数是一个 jQuery 对象。

## 为什么我应该包含窗口、文档和未定义作为函数（$）的参数？

可以说，javascript 中的设计错误之一是缺乏对常量和/或不可变/受保护的变量/对象的支持。因此`window`，`document`和`undefined`实际上是常规的全局变量 - 任何人都可以将它们重新分配给任何东西。

以下是疯狂但有效的 javascript 代码：

```
window = 42; 
```

没有理智的程序员会这样做，但仍然有可能。jQuery 开发人员对此非常关注，因此 jQuery 尽最大努力将真实的`window`,`document`和插件传递给`undefined`插件，以防有人疯狂地做疯狂的事情。

javascript 的功能之一是函数参数覆盖全局变量。因此，如果上述任何变量已被其他人劫持，它们将在函数中重新分配给它们的专有名称。

## 如果我这样做，我如何访问实际的窗口和文档对象？

您应该将正确的`window`,`document`和`undefined`作为名为`window`,`document`的参数传递`undefined`给函数。做任何其他事情意味着您不再有权访问`window`,`document`和`undefined`对象。

您可以采取一些疯狂的解决方法来尝试抓住`window`对象（也称为全局对象），然后您可以从那里获得`document`. `undefined`jQuery 代码实际上是在被劫持的情况下找回的一种解决方法。

## 未定义什么，为什么？

正如你所说的那样。`undefined`是 javascript 赋予已声明但未分配值的事物的值。但在 javascript`undefined`中只是一个全局变量。如果你不碰它，它最初的值是`undefined`（循环逻辑，我知道）。但是可以修改：

```
undefined = 'boom!'; 
```

此后所有未定义的变量都将具有 的值`"boom!"`。javascript 语言的最新规范实际上不允许重新分配给 undefined 但截至今天只有 Safari 这样做。

同样，没有理智的程序员会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T02:36:19.200

在参数列表中包含标识符实际上与在函数体中声明变量相同，例如

```
function bar(foo) {
} 
```

相当于

```
function bar(foo) {
  var foo;
} 
```

但是当然，如​​果您想将值传递给*foo* ，您只需执行第一个。

这样做的主要原因：

```
(function($) {
    // use $ here instead of jQuery
}(jQuery)); 
```

就是在 jQuery 发布时，Prototype.js 已经使用“$”作为其 main 函数的标识符已有一段时间了。上面的模式允许在同一个页面中使用 jQuery 和prototype.js，使用“$”作为不同事物的标识符。

传入*document*和*window*充其量只是一个没有什么好处的微优化。它不能防止它们被赋予与预期不同的值。只是不要打扰并使用函数内部的*窗口*和*文档*作为全局标识符。

在参数中包含*undefined*并且不向其传递值并不是确保*undefined*确实是未定义的明智方法，因为如果意外传递了值，它仍然会受到影响。更安全的方法是：

```
(function() {
    var undefined;
    ...
}()); 
```

现在您**确定**函数范围内的未定义确实是未定义的*。*或者，如果您想要分配：

```
(function() {
    var undefined = void 0;
    ...
}()); 
```

但这只是额外的打字。***

# java - 需要帮助调试 Java 代码（EJML 库）

> ID：15777521
> 
> 赞同：0
> 
> 时间：2013-04-03T01:48:58.427
> 
> 标签：java, ejml

有人可以帮我找到以下代码中的错误。我收到一个 Java 异常，但我不知道它为什么会发生。感谢您的关注！异常描述如下：

```
>    Exception in thread "main" java.lang.ExceptionInInitializerError
>    Caused by: java.lang.ArrayIndexOutOfBoundsException
>       at java.lang.System.arraycopy(Native Method)
>       at org.ejml.data.DenseMatrix64F.set(Unknown Source)
>       at org.ejml.data.DenseMatrix64F.<init>(Unknown Source)
>       at org.ejml.simple.SimpleMatrix.<init>(Unknown Source)
>       at test1.<clinit>(test1.java:14) 
```

对于此代码：

```
 import org.ejml.simple.SimpleMatrix;
    import java.lang.Math;

    import java.util.Scanner;

    public class test1 {
        class testcase3 {
            public testcase3() {
                Mkt = 100000;
                E1name = new SimpleMatrix(2, 5, true, -10, -5, 0, 5, 10, 1, 2, 3,
                        4, 5);
                E1name2 = new SimpleMatrix(2, 5, true, 1, 2, 3, 4, 5, -10, -5, 0,
                        5, 10);
                E2name = new SimpleMatrix(2, 2, true, 1, 3, 1, 2);
                E2name2 = new SimpleMatrix(2, 2, true, 1, 2, 1, 3);
                EM1 = new SimpleMatrix(2, 5, true, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
                EM2 = new SimpleMatrix(2, 2, true, 0, 0, 0, 0);
                T = new SimpleMatrix(2, 2, true, 0, 0, 0, 0);
                Pa = new SimpleMatrix(1, 2, true, 0, 0);
                Position = 0;
            }

            public double Mkt;
            public SimpleMatrix E1name;
            public SimpleMatrix E2name;
            public SimpleMatrix E1name2;
            public SimpleMatrix E2name2;
            public SimpleMatrix EM1;
            public SimpleMatrix EM2;
            public SimpleMatrix T;
            public SimpleMatrix Pa;
            public int Position;

            public int newBidAsk(double bidPrice, double askPrice) {
                // log("I received a new Top-of-Book update, bid=" + bidPrice +
                // ", offer=" + askPrice);

                // data transformation
                double newMkt = (bidPrice + askPrice) / 2;
                double Grow = newMkt - Mkt;
                double Spread = (askPrice - bidPrice) / 2;

                SimpleMatrix seq = new SimpleMatrix(1, 2, true, Grow, Spread);
                SimpleMatrix z = new SimpleMatrix(1, 2, true, 0, 0);

                z.set(0, 0, Nametrans(seq.getIndex(0, 0), E1name));
                z.set(0, 1, Nametrans(seq.getIndex(0, 1), E2name));
                int act = 0;

                // parameter updating
                SimpleMatrix Px = Hmmupdate(Pa, z, EM1, EM2);
                SimpleMatrix newPa = Hmmpredict(Px, T);
                SimpleMatrix E1n = Hmmempredict(newPa, EM1, EM2, 5);
                SimpleMatrix E2n = Hmmempredict(newPa, EM1, EM2, 2);
                SimpleMatrix E = Eab(newMkt, E1n, E2n, E1name2, E2name2);
                int E1 = E.getIndex(0, 0);
                int E2 = E.getIndex(0, 1);

                // action
                if (Position == 0) {
                    int L = (int) Math.max(0,
                            Math.max(E1 - askPrice, bidPrice - E2));
                    switch (L) {
                    case 1:
                        act = 0;
                        break;
                    case 2:
                        act = 1;
                        break;
                    case 3:
                        act = -1;
                        break;
                    }
                } else if (Position == -1) {
                    int L = (int) Math.max(-askPrice, -E1);
                    switch (L) {
                    case 1:
                        act = 1;
                        break;
                    case 2:
                        act = 0;
                        break;
                    }
                } else if (Position == 1) {
                    int L = (int) Math.max(bidPrice, E2);
                    switch (L) {
                    case 1:
                        act = -1;
                        break;
                    case 2:
                        act = 0;
                        break;
                    }
                }

                Position = act + Position;
                // log("The act is " + Position);
                return Position;
            }

            public SimpleMatrix Eab(double Mkt, SimpleMatrix E1, SimpleMatrix E2,
                    SimpleMatrix E1name2, SimpleMatrix E2name2) {
                SimpleMatrix Easkbid = new SimpleMatrix(1, 2, true, Mkt, Mkt);
                for (int i = 0; i < 5; i++) {
                    for (int j = 0; j < 2; j++) {
                        Easkbid.set(0, 0,
                                Easkbid.getIndex(0, 0) + (Nametrans(i, E1name2))
                                        * E1.getIndex(0, i) * E2.getIndex(0, j));
                        Easkbid.set(0, 1,
                                Easkbid.getIndex(0, 1) + (Nametrans(i, E2name2))
                                        * E1.getIndex(0, i) * E2.getIndex(0, j));
                    }
                }
                return Easkbid;
            }

            public SimpleMatrix Hmmempredict(SimpleMatrix Pxkla, SimpleMatrix EM1,
                    SimpleMatrix EM2, int length) {
                SimpleMatrix E = new SimpleMatrix(1, length, true);
                for (int i = 0; i < 2; i++) {
                    for (int j = 0; j < length; j++) {
                        E.set(1,
                                j,
                                E.getIndex(1, j) + EM2.getIndex(i, j)
                                        * Pxkla.getIndex(1, i));
                    }
                }
                E = normalize(E);
                return E;
            }

            public SimpleMatrix Hmmpredict(SimpleMatrix Pxk, SimpleMatrix T) {
                SimpleMatrix Pxkla = new SimpleMatrix(1, 2, true, 0, 0);
                for (int i = 0; i < 2; i++) {
                    for (int j = 0; j < 2; j++) {
                        Pxkla.set(0, i, Pxkla.getIndex(0, i) + Pxkla.getIndex(0, j)
                                * T.getIndex(j, i));
                    }
                }
                Pxkla = normalize(Pxkla);
                return Pxkla;
            }

            public SimpleMatrix Hmmupdate(SimpleMatrix Pxka, SimpleMatrix zk,
                    SimpleMatrix EM1, SimpleMatrix EM2) {
                SimpleMatrix Pxk = new SimpleMatrix(1, 2, true, 0, 0);
                for (int i = 0; i < 2; i++) {
                    Pxk.set(0,
                            i,
                            (Pxka.getIndex(0, i)
                                    * EM1.getIndex(i, zk.getIndex(0, 0)) * EM2
                                    .getIndex(i, zk.getIndex(0, 1))));
                }
                Pxk = normalize(Pxk);
                return Pxk;
            }

            public SimpleMatrix normalize(SimpleMatrix B) {
                double temp = 0;
                for (int i = 0; i < B.numCols(); i++) {
                    temp = B.getIndex(0, i);
                }
                SimpleMatrix A = B;
                for (int j = 0; j < A.numCols(); j++) {
                    A.set(0, j, B.getIndex(0, j) / temp);
                }
                return A;
            }

            public double Nametrans(double a, SimpleMatrix Nama) {
                int n = Nama.numCols();
                double b = 0;
                for (int i = 0; i < n; i++) {
                    if (a == Nama.getIndex(0, i)) {
                        b = Nama.getIndex(1, i);
                    }
                }
                return b;
            }
        }

        public static void main(String[] args) {
            Scanner s = new Scanner(System.in);
            double bid = s.nextDouble();
            double ask = s.nextDouble();
            testcase3 tc3;
            int act = tc3.newBidAsk(bid, ask);
            System.out.printf("%d", act);

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:05:24.073

堆栈跟踪很棒，它们会告诉您发生错误的那一行 - 或之后的那一行。关于您的代码，我唯一能看到的可能是负数；尝试在没有它们的情况下制作矩阵，看看是否可以清除错误。如果是这样，您可以尝试在那里传递真正的双精度数，而不是必须由运行时转换的整数。

而且，如果确实如此，库作者应该在他们的 javadoc 中提到它，或者您可能在他们的代码中发现了一个（可怕的！）主要错误。

# android - 如何在json数据中添加索引？

> ID：15777525
> 
> 赞同：1
> 
> 时间：2013-04-03T01:49:16.637
> 
> 标签：android, json, gson, datamodel

我有以下数据结构：

```
Class UserModel {
Long pkid;
String name;
public UserModel() {
this.pkid = new Long(1001);
this.name = "ABC";
}
} 
```

现在我已将其转换为 json：

```
UserModel usrObj = new UserModel();
Gson gson = new Gson();
String json = gson.toJson(userObj); 
```

所以我的 json 字符串现在是这样的：

```
{  "pkid": 1001,
    "name": "ABC" } 
```

但我需要将 json 创建为

```
{"com.vlee.ejb.UserModel": [
{  "pkid": 1001,
    "name": "ABC" } ] } 
```

我可以轻松地创建一个像这样的 json：

```
{"userModel": [
{  "pkid": 1001,
        "name": "ABC" } ] } 
```

当我遇到使用点创建索引的问题时。

我不确定如何添加密钥`"com.vlee.ejb.UserModel"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T02:19:12.600

```
 UserModel userObj = new UserModel();
    HashMap map = new HashMap();
    ArrayList array = new ArrayList();
    array.add(userObj);
    map.put(userObj.getClass().getName(), array);
    Gson gson = new Gson();
    String json = gson.toJson(map);
    System.out.println(json); 
```

它输出： {"com.vlee.ejb.UserModel":[{"pkid":1001,"name":"ABC"}]}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:12:56.823

创建一个[序列化](https://sites.google.com/site/gson/gson-user-guide#TOC-Writing-a-Serializer)器类来自定义输出。这可能涉及创建和安排一些[JsonElement](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)子类实例。在这种情况下，您将创建一个 JsonObject，并将 JsonArray 作为其值之一，该 JsonObject 又包含一个 JsonObject，其中包含“pkid”和“name”内容。

假设您希望能够重新读取这些对象，则同一个类也可以实现反序列化接口，在这种情况下，它将被赋予一个 JsonElement 实例，并且必须将其分离以构造所需的 Java 对象。

# haskell - 使用“派生”时的模板 Haskell 错误

> ID：15777527
> 
> 赞同：7
> 
> 时间：2013-04-03T01:49:26.203
> 
> 标签：haskell, template-haskell

对我得到的结果有点困惑。使用以下内容：

```
GHCi, version 7.4.2: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Prelude> :m + Language.Haskell.TH 
```

我得到了这个成功的结果：

```
Prelude Language.Haskell.TH> runQ [d| data X = X |]
[DataD [] X_0 [] [NormalC X_1 []] []] 
```

但我得到这个错误：

```
Prelude Language.Haskell.TH> runQ [d| data X = X deriving Show |]

<interactive>:4:30:
    The exact Name `X' is not in scope
      Probable cause: you used a unique name (NameU) in Template Haskell but did not bind it
    In the Template Haskell quotation [d| data X = X deriving (Show) |]
    In the first argument of `runQ', namely
      `[d| data X = X deriving (Show) |]'
    In the expression: runQ [d| data X = X deriving (Show) |] 
```

使用 Template Haskell 时无法派生 Show？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T08:33:16.587

看起来这是[GHC](http://hackage.haskell.org/trac/ghc/ticket/5737)中的一个错误，已在 7.6.1 版中[修复：](http://hackage.haskell.org/trac/ghc/ticket/6005)

```
$ ~/bin/ghc-7.6.1/bin/ghci
GHCi, version 7.6.1: http://www.haskell.org/ghc/  :? for help
[...]
Prelude> :set -XTemplateHaskell
Prelude> import Language.Haskell.TH
Prelude Language.Haskell.TH> runQ [d| data X = X deriving (Show) |]
[...]
[DataD [] X_0 [] [NormalC X_1 []] [GHC.Show.Show]] 
```

# nginx - nginx如何重定向到localhost中的不同路由

> ID：15777528
> 
> 赞同：3
> 
> 时间：2013-04-03T01:49:26.493
> 
> 标签：nginx

我有两个关于 nginx 的基本问题：

**如何`aliases`在 localhost 中设置？**

为了能够在 localhost 上访问许多不同的项目（例如 localhost/project1、localhost/project2 ...）。

我试过了

```
server {
    listen 80;
    server_name localhost;
    location /project1 { //Is it to match localhost/project1?
        root /var/www/project1/;
        index  index.html index.htm;
    }

    location /project2 {
        root /var/www/project2/;
        index  index.html index.htm;
    }
} 
```

但是我得到一个404，我不明白为什么......

**如何组织我们的域？**

我见过许多 conf 使用与 apache2 （`sites-available`和`sites-enabled`）相同的组织，但默认情况下似乎不包含这些存储库，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:27:19.040

您所指的目录结构`sites-available`也`sites-enabled`可以在 nginx 中复制。事实上，这也是我存储服务器配置的方式。

它们不会在 nginx 的标准安装中读取（来自源代码）。您必须编辑`httpd.conf`以下行并将其添加到`http`块的底部：

```
include /path/to/sites-enabled/*; 
```

* * *

至于别名，很难确定您到底在寻找什么。您是否希望能够`example.org/project1`通过 url访问`project1.example.org`？

如果是这样，其中一种方法是设置一个`CNAME`记录`project1`以指向您的服务器的 IP 地址。完成后，您将修改该站点的`server`块以接受来自该虚拟主机的连接：

```
server {
    listen 80;

    server_name project1.example.org;
    ... other declarations...
} 
```

# asp.net-mvc-4 - MVC 将模型传回控制器并预填充数据

> ID：15777530
> 
> 赞同：1
> 
> 时间：2013-04-03T01:49:31.203
> 
> 标签：asp.net-mvc-4, model, controller, sql-update

我现在已经多次遇到这个问题。我以不同的方式解决了这个问题，但总觉得有更好的方法来处理这种情况。寻找解决方案（最佳实践）已经取得了成果。希望得到一些圣人的建议。

场景是这样的：我正在构建一个 MVC4 Web 应用程序。我正在将一个复杂的模型传递给我的视图。例如：

```
public class Uat 
{
    public int UatId { get; set; }
    public int ProjectId { get; set; }
    public virtual Project Project { get; set; }
    public virtual ICollection<TestCase> TestCases { get; set; }
    public UatStatus Status { get; set; }
    public string StartDate { get; set; }
    public string StatusChangeDate { get; set; }
    public string ProductVersion { get; set; }
    public string Introduction { get; set; }
    public bool isActive { get; set; }
} 
```

我想将此模型传递给视图并让用户仅更新模型的某些部分。在我正在处理的当前实例中，用户正在更新子对象（TestCase）的两个字段。TestCase 对象如下所示：

```
 public class TestCase
 {
    [Key]
    public int TestCaseId { get; set; }
    public int UatId { get; set; }
    public virtual Uat Uat { get; set; }
    public virtual ICollection<Step> Steps { get; set; }
    public TestCaseStatus Status { get; set; }
    public string Title { get; set; }
    public string Comment { get; set; }
} 
```

用户只编辑TestCase.Comment 和TestCase.Status。大多数其他值已由管理员用户设置。所以我将一个 Uat 对象传递给我的视图，如下所示：

```
@Model ClientPortal.Models.Uat

@{
ViewBag.Title = "Uat";
}

<h2>Uat</h2>

@using (Html.BeginForm("UatEvalution", "Client")) 
{
@Html.ValidationSummary(true)
<div>
    @{var iteration = 0;}
    @foreach (var testCase in Model.TestCases)
    {
        <div class="well">
        <span class="testCaseTitle"><h4>@testCase.Title</h4></span> 

        <br />
        <br />

        <ol style="margin-left:40px">
            @foreach (var step in testCase.Steps)
            {
                <li>@step.Description</li>
            }
        </ol>

        <br />

        <input type="checkbox" name="TestCases[@iteration].Status" value="2" />Approve &nbsp; &nbsp; 
        <input type="checkbox" name="TestCases[@iteration].Status" value="1" />Deny 

        <br />

        <span><textarea name="TestCases[@iteration].Comment"></textarea></span>

        @{iteration = iteration + 1;
    }
        </div>
    }
</div>
<input type="submit" />
} 
```

我的控制器动作看起来像这样：

```
 [HttpPost]
    public ActionResult UatEvalution(Uat uat)
    {
        //process data
        //Update(uat);
        //SaveChanges();
    } 
```

问题是，我在控制器中的 uat 对象只有 TestCases 数据。其他所有内容为 null 或 0。Uat 中的 TestCases 仅包含 Comment 和 Status 的数据，其他所有内容均为 null 或 0。因此，如果我尝试在此模型上运行 Update，我会收到错误消息：具有相同键的对象ObjectStateManager 中已经存在。我已经研究过了，这对我来说很有意义。但是为了解决这个问题，我过去做了两件事之一：

1.  我在视图中创建了一堆隐藏字段来填充模型中的其余属性，这样当模型传回控制器时，所有数据的填写方式与我从D b; 除了它具有用户所做的更改。

2.  我从数据库中重新提取 TestCase 条目，对该条目进行适当的更改，然后 SaveChanges()。

这两种解决方案对我来说都很难看，而且我确信我做错了什么。虽然这在过去为我解决了这个问题，但它会导致我的视​​图被隐藏字段弄得杂乱无章，或者我最终向数据库发出了太多请求。我的应用程序很小，所以这些变通办法现在没有太大的效果，但我真的很想养成最佳实践的习惯。任何帮助将不胜感激，因为它总是来自 SO 社区。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:00:07.213

这就是为什么您需要一个代表实体的全部或部分的视图模型。使用视图模型的好处之一是防止发布过多或过少。你的情况就是一个很好的例子。您只需要更新实体的几个字段，这在大多数情况下实际上是有意义的，因此您不需要将其余字段返回到视图。甚至没有将它们作为隐藏字段，只是为了将值回发并保存在数据库中。如果您只需要两个字段，请为其创建一个模型，例如：

```
public class TestCaseModel
{
    public int TestCaseId { get; set; }
    public TestCaseStatus Status { get; set; }
    public string Comment { get; set; }
} 
```

由于您将采用 viewmodel 路线，因此您可能还需要为您的`Uat`实体提供一个 viewmodel。或者最好的方法是有一个像这样的**平面**模型：

```
 public class TestCaseInputModel
    {
        public int UatId{ get; set; } // for reference
        public int TestCaseId { get; set; }
        public TestCaseStatus Status { get; set; }
        public string Comment { get; set; }
    } 
```

然后只需添加必要的字段或您想要“显示”的字段，这意味着您不希望有输入。然后，您必须将模型的所有“输入”字段映射回您的实体。就像是：

```
var testCaseEntity = retrieve_from_db();
testCaseEntity.UatId = input.UatId;
testCaseEntity.Status = input.Status;
testCaseEntity.Comment  = input.Comment; 
```

此外，您可以使用自动映射工具将模型中的值返回给实体。这是你能做到的最干净的方式，IMO。

# c - 结构数组的查找表索引

> ID：15777533
> 
> 赞同：3
> 
> 时间：2013-04-03T01:50:00.370
> 
> 标签：c

我正在读取一个二进制文件，其中一个字节定义了一种数据类型。

通常：

```
0x13 => FOO
0x14 => BAR 
```

但是，实际上，可以有多个相同类型的定义，然后在其他地方定义真正的类型，**但它并不总是可访问**的。因此，如果没有定义子规范，我想打印所有可能性。

例如：

```
0x13 => FOO
0x14 => BAR
0x14 => BAZ <-- also "type" 0x14
0x15 => XEN 
```

为了存储类型定义和描述，我有一个格式为：

```
struct data_def {
    char id;
    char *name;
    char *desc;
    ...
}; 
```

* * *

如果可能的话，我会有一个数组，如下所示：

```
static const struct data_def data_db[][] = {

    ...
    } /* index 0x13 */
        {0x13, "FOO", "This is foo", ...}
    }, /* index 0x14 */
        {0x14, "BAR", "This is bar", ...},
        {0x14, "BAZ", "This is baz", ...}
    }, /* index 0x15 */
        {0x15, "XEN", "This is xen", ...}
    }
} 
```

为了这样`data_db[0x14][1].name == BAZ`，等等。

但是AFAIK这是不可能的。或者是吗？(C89)。

* * *

我正在寻找另一种方法来做到这一点。正在考虑这样的事情：

```
static const struct data_def data_db[] = {
    ...
    {0x13, "FOO", "This is foo", ...},
    {0x14, "BAR", "This is bar", ...},
    {0x14, "BAZ", "This is baz", ...},
    {0x15, "XEN", "This is xen", ...}
} 
```

然后有一个查找表，就像每个第一个条目开始的位置一样。当然，这也可以通过 looping 动态创建`data_db`，但宁愿静态定义它（我认为 - 我还没有决定）：

```
static const char data_index[] {
    ...
    0x20, /* at index 0x13 of data_index */
    0x21, /* at index 0x14 of data_index */
    0x23, /* at index 0x15 of data_index */
} 
```

通过执行以下操作，可以打印（或其他）：

```
while (data_db[data_index[0x14 + i]].id == 0x14) {
         print data_db[data_index[0x14 + i]].name
         ++i
} 
```

* * *

有没有更好的方法来解决这个问题？我想这是以前在类似情况下已经做过十亿次的事情。我宁愿不使用标准库之外的任何库，因为这最终只是程序的一小部分，其余代码也是*“免费*的”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T00:43:21.570

这只是在黑暗中拍摄，但**如果**标识符组中的类型数量有上限，并且**如果**您可以使用您知道不会是您的类型之一的值，您可以执行以下操作：

```
#define MAX_NUM_TYPES    3
#define INVALID_TYPE     0xff

struct Data_Def{
    unsigned char id;
    char * name;
    char * desc;
};

static const struct Data_Def data_db[][MAX_NUM_TYPES] = {
 .
 .
 .

    {    /* Index 0x13  */
         /*  id           name      desc            */
        {    0x13,        "FOO",    "This is foo"    },
        {    0x13,        "BAR",    "This is bar"    },
        {    INVALID_TYPE, NULL,    NULL             },
    },
    {    /* Index 0x14  */
         /*  id           name      desc            */
        {    0x14,        "BAZ",    "This is baz"    },
        {    INVALID_TYPE, NULL,    NULL             },
        {    INVALID_TYPE, NULL,    NULL             },
    },
}; 
```

如果你想打印...

```
unsigned char index = 0;
/* Print all types within a group with id 0x13\. */
while ((data_db[0x13][index].id != INVALID_TYPE) && (index < MAX_NUM_TYPES))
{
    printf("%s", data_db[0x13][index].name);
    index++;
} 
```

对于您要完成的工作，这可能根本不起作用，并且取决于每组的类型数量，这可能完全浪费了代码空间。然而，这是解决问题的一种方式。

希望这可以帮助！

# sql - Oracle PL/SQL 字符串格式化

> ID：15777535
> 
> 赞同：5
> 
> 时间：2013-04-03T01:50:06.543
> 
> 标签：sql, database, oracle, plsql, oracle10g

我开始学习 Oracle PL/SQL，并下载了带有相同示例和问题的 Oracle Database 10g Express。

有一个我无法解决的问题。

问题是：

> 编写一个 SQL 查询来检索每个员工的名字、姓氏和代码，其中找到员工的代码如下：首先删除所有出现的字符“i”和“l”，然后连接第一个姓名的六个字母、一个破折号“-”和姓氏的最后六个字符，其中只有代码的第一个和最后一个字符应为大写。如果名称不包含六个字母，则在片尾加下划线（“<em>”）；如果姓氏不包含六个字母，则将下划线（“</em>”）放在乐曲的开头。先按姓氏排序，再按姓名排序。

**输出必须是这样的**

![在此处输入图像描述](https://i.stack.imgur.com/TB8J7.jpg)

**我写了一些东西，但完全错误且不清楚。我应该修理哪些部分？**

* * *

```
SELECT employees.first_name, employees.last_name,
replace(replace(first_name,'l',''),'i'),
initcap(substr(rpad(employees.first_name,6,'_'),1,6)) || '-' ||

case when length(employees.last_name)>4
then lower(substr(employees.last_name,-5,4))
else lower(substr(lpad(employees.last_name,5,'_'),-5,4)) end ||
upper(substr(employees.last_name,-1,1)) code

FROM employees
ORDER BY last_name, first_name; 
```

这是我的输出（错误） ![在此处输入图像描述](https://i.stack.imgur.com/AlHZ8.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T02:09:22.773

你可以这样写：

```
select first_name, last_name, f
       ||'-'
       ||substr(l, 1, length(l) - 1)
       ||upper(substr(l, -1)) code
  from (select first_name, last_name,
               initcap(rpad(substr(translate(first_name, 'xil', 'x'), 1, 6), 6,
                       '_')) f,
               lpad(substr(translate(last_name, 'xil', 'x'),
                           greatest(-6, -length(translate(last_name, 'xil', 'x')))), 6,
                          '_')
                          l
          from employees); 
```

我假设您只想替换`i`and`l`而不是`I`and `L`。translate 将与这种情况下的行为相同`replace(replace(str, 'l', ''), 'i', '')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T10:18:58.200

此代码完全符合您的要求：将列名和表名替换为所需的值

```
SELECT ENAME,
       JOB,
          INITCAP (RPAD (REPLACE (REPLACE (ENAME, 'I'), 'i'), 6, '_'))
       || '-'
       || LPAD (
             reverse (
                INITCAP (
                   SUBSTR (reverse ( (REPLACE (REPLACE (JOB, 'I'), 'i'))),
                           1,
                           6))),
             6,
             '_')
          code
  FROM emp 
  ORDER BY JOB, Ename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:27:31.207

此代码在某种程度上遵循您的原始逻辑：

```
SELECT e."First_Name", e."Last_Name",
       initcap(rpad(replace(replace(e."First_Name", 'l'), 'i'),6,'_'))
       || '-' ||
       reverse(initcap(reverse(lpad(replace(replace(e."Last_Name", 'l'), 'i'),6,'_')))) "Code"
FROM Employees e
ORDER BY e."Last_Name", e."First_Name"; 
```

我使用`REVERSE`了两次，所以我也可以使用`INITCAP`姓氏。我也省略了第三个参数，`REPLACE`因为该函数默认使用空字符串。

这是我根据您的部分数据构建的[SQL Fiddle DEMO 。](http://sqlfiddle.com/#!4/c9e5c/1)随意添加更多数据。

# ios - 使用 for 循环逻辑进行循环 - 年份

> ID：15777538
> 
> 赞同：0
> 
> 时间：2013-04-03T01:50:36.557
> 
> 标签：ios, nsdate, nscalendar

我正在开发一个 iOS 应用程序。从当前日期和时间开始的全年函数循环之一。

```
for (int month_i = monthInt; month_i < 13; month_i++) {

       for (int i = dayInt  ; i <= monthRange.length ; i ++){

      }

} 
```

我已检索到月份编号和范围，如下所示：

```
 NSDateComponents *components = [calCurrent components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:today];
    NSInteger year = [components year];
    NSInteger month = [components month];
    NSInteger day = [components day];

    NSNumber *monthNumber = [NSNumber numberWithInteger: month];

    int monthInt = [monthNumber intValue];

    NSCalendar* cal = [NSCalendar currentCalendar];
    NSDateComponents* comps = [[NSDateComponents alloc] init];

        // Set your month here
    [comps setMonth:monthInt];

     monthRange = [cal rangeOfUnit:NSDayCalendarUnit
                               inUnit:NSMonthCalendarUnit
                              forDate:[cal dateFromComponents:comps]]; 
```

这是我目前的执行。但是，我有一种情况，我需要从日历应用程序中添加公共假期，并避免在日历上标记为假期的日期。我正在考虑使用 NSMutableDictionary ，其中对象项使用日历项进行过滤，并将键值设置为月份名称。有没有更好的方法来解决这个问题。

# javascript - Javascript form: call a specified submit button when a select field changes value

> ID：15777539
> 
> 赞同：1
> 
> 时间：2013-04-03T01:50:37.737
> 
> 标签：javascript, submit, onchange

我有一个带有多个提交按钮的表单，其中一个是重新加载按钮，这证明很难编码。

这个想法是，当用户单击“重新加载”时，表单被提交，并根据选择字段的值进行更新。该位的代码片段很简单（简化为基础）：

```
<select type="text" id="dataamount" size="1">
    <option value="time0h10m">Latest 10 minutes</option>
    <option value="time1h00m">Latest 1 hour</option>
    <option value="time12h00m">Latest 12 hours</option>
</select>
<input type="submit" id="btnreload" value="reload latest data">
<input type="submit" id="btndelete" value="delete all">
<input type="submit" id="btnrun" value="run"> 
```

然后我想，如果用户更改了“重新加载”字段值，那么无论如何都应该通过“重新加载”按钮触发提交。（为什么要强制他们更改*然后*单击，= 2 个操作？当 dataamount -> onchange 发生时自动触发提交要好得多。）但是我必须指定哪个提交按钮，而不仅仅是提交表单。那就是问题所在。

我想做这样的事情，但我认为这不起作用或不可靠：

```
<select type="text" id="dataamount" size="1" 
         onchange="document.getElementById('btnreload').submit();">
etc

or              "..... ('btnreload').click(); 
```

但我找不到任何指南来执行此操作，或提供我拥有的选项。偶尔会有一些提示，提交字段的 click() 可能得不到很好的支持，或者提交字段不能总是使用 .submit() 来执行。

我追求良好的兼容性并使用纯javascript（没有jquery等）。理想情况下，我希望将其保持内联并尽可能避免（启用/禁用 + form.submit()）解决方法（提交按钮可能会更改或变为动态）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T07:56:49.150

用这个：

```
<select type="text" id="dataamount" size="1" 
         onchange="myFunction();">

 function myFunction() {
        document.querySelectorAll("input[type=submit]")[0].click();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:58:49.557

首先，您必须为要提交到服务器的任何数据提供您的`select`和`input`元素属性。`name`

其次，向表单添加一个隐藏的输入，并在`select` `onchange`事件中将其值设置为您可以在服务器端代码中检查的内容，然后提交表单：

```
document.getElementById("hiddenInputId").value = "dataAmountChanged";
document.forms[0].submit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T06:48:55.720

采用 ：

```
 document.querySelectorAll("input[type=submit]")[0].click(); 
```

# ubuntu - RabbitMQ：Ubuntu 12.04 rabbitmq 无法启动防火墙

> ID：15777544
> 
> 赞同：0
> 
> 时间：2013-04-03T01:51:24.420
> 
> 标签：ubuntu, rabbitmq

在打开防火墙的情况下，我无法在 ubuntu 12.04 上启动 rabbitmq，但在 10.04 中可以。我已经为erlang打开了5672、4639端口和inet_kernel端口。

如果我关闭防火墙，那很好。

有谁知道为什么？

我只是基于[本指南](http://marcqualie.com/2012/12/install-rabbitmq-on-ubuntu-12.04) ，但应该没问题。

错误是

```
{error_logger,{{2013,4,18},{3,53,6}},"Protocol: ~p: register error: ~p~n",["inet_tcp",{{badmatch,{error,epmd_close}},[{inet_tcp_dist,listen,1},{net_kernel,start_protos,4},{net_kernel,start_protos,3},{net_kernel,init_node,2},{net_kernel,init,1},{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]}]}
{error_logger,{{2013,4,18},{3,53,6}},crash_report,[[{initial_call,{net_kernel,init,['Argument__1']}},{pid,<0.20.0>},{registered_name,[]},{error_info,{exit,{error,badarg},[{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]}},{ancestors,[net_sup,kernel_sup,<0.9.0>]},{messages,[]},{links,[#Port<0.90>,<0.17.0>]},{dictionary,[{longnames,false}]},{trap_exit,true},{status,running},{heap_size,610},{stack_size,24},{reductions,510}],[]]}
{error_logger,{{2013,4,18},{3,53,6}},supervisor_report,[{supervisor,{local,net_sup}},{errorContext,start_error},{reason,{'EXIT',nodistribution}},{offender,[{pid,undefined},{name,net_kernel},{mfargs,{net_kernel,start_link,[[rabbitmqprelaunch21856,shortnames]]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]}]}
{error_logger,{{2013,4,18},{3,53,6}},supervisor_report,[{supervisor,{local,kernel_sup}},{errorContext,start_error},{reason,shutdown},{offender,[{pid,undefined},{name,net_sup},{mfargs,{erl_distribution,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]}]}
{error_logger,{{2013,4,18},{3,53,6}},std_info,[{application,kernel},{exited,{shutdown,{kernel,start,[normal,[]]}}},{type,permanent}]}
{"Kernel pid terminated",application_controller,"{application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:52:29.623

据我所知，有几件事可能会阻止它工作；如果您的机器上运行了任何防病毒软件，您也必须打开该程序中的端口（常见的疏忽），或者您可能错过了阻止使用 RabbitMQ 的东西？

如果您不确定防火墙设置和配置，那么也许查看[官方文档](https://help.ubuntu.com/12.04/serverguide/firewall.html)。在 Ubuntu 恕我直言上安装 RabbitMq 的最有用的解释在[本教程中](http://www.theprogrammer.co.za/wordpress/2012/08/installing-rabbitmq-on-ubuntu-12-04-lts/)

# ubuntu - 防止同时安装 PostgreSQL 9.1 和 9.2

> ID：15777546
> 
> 赞同：2
> 
> 时间：2013-04-03T01:51:32.003
> 
> 标签：ubuntu, debian, postgis, puppet, apt

为了自动部署包含 Postgresql 9.2 和 PostGIS 2.x 的 Ubuntu 12.04 服务器（使用 Puppet），我最终安装了 PostgreSQL 9.1 和 9.2，并且它们的服务都在端口 5432 和 5433 上启动。

即使我只安装了为什么会发生这种情况`postgresql-9.2`？如何解决问题？

**安装程序**

```
apt-get install postgresql-9.2 postgresql-server-dev-9.2 postgresql-client-9.2 postgresql-contrib-9.2 postgis

apt-get install libxml2-dev, libjson0-dev, xsltproc, docbook-xsl, docbook-mathml, gettext, libgeos-3.2.2, libgeos-c1, libgeos-dev, proj, geos, pg_top 
```

* * *

**回购：**

```
ppa:pitti/postgresql
ppa:ubuntugis/ubuntugis-unstable 
```

**apt-cache 显示 postgis**

```
Package: postgis
Priority: optional
Section: misc
Installed-Size: 2917
Maintainer: Debian GIS Project <pkg-grass-devel@lists.alioth.debian.org>
Architecture: amd64
Version: 2.0.1-2~precise3
Depends: libc6 (>= 2.14), libgdal1 (>= 1.9.0), libgeos-c1 (>= 3.3.3), libglib2.0-0 (>= 2.12.0), libgtk2.0-0 (>= 2.14.0), libpq5, postgresql-9.1-postgis
Filename: pool/main/p/postgis/postgis_2.0.1-2~precise3_amd64.deb
Size: 889350
MD5sum: 243ef9b2668417391a4d911024b43260
SHA1: 3588bca6e15f6bbb6e2c478d33da424a1fc8da77
Description-en: Geographic objects support for PostgreSQL -- common files
 PostGIS adds support for geographic objects to the PostgreSQL object-relational
 database. In effect, PostGIS "spatially enables" the PostgreSQL server,
 allowing it to be used as a backend spatial database for geographic information
 systems (GIS), much like ESRI's SDE or Oracle's Spatial extension. PostGIS
 follows the OpenGIS "Simple Features Specification for SQL".
 .
 This package contains the PostGIS userland binaries, common files and
 documentation. 
```

**apt-cache 策略**

```
postgis:
  Installed: 2.0.1-2~precise3
  Candidate: 2.0.1-2~precise3
  Version table:
 *** 2.0.1-2~precise3 0
        500 http://ppa.launchpad.net/ubuntugis/ubuntugis-unstable/ubuntu/ precise/main amd64 Packages
        100 /var/lib/dpkg/status
     1.5.3-2 0
        500 http://ubuntu.bhs.mirrors.ovh.net/ubuntu/ precise/universe amd64 Packages 
```

# c# - silverlight 选择性地将属性绑定到饼图？

> ID：15777552
> 
> 赞同：0
> 
> 时间：2013-04-03T01:52:04.983
> 
> 标签：c#, silverlight, data-binding, charts, pie-chart

如果我有一个包含许多属性的自定义类，如何将其中的一些属性绑定到 silverlight 工具包饼图？例如：

```
public class Expense
{
    public double food;
    public string food_description;
    public double rent;
    public string rent_description;
    public double renterInsurance;
    public string renterInsurance_description;

    ...
} 
```

如何将其绑定到饼图，以便在饼图中显示“食物”和“租客保险”（但不是“租金”），并在图例中显示它们的相应描述？

这源于我早些时候发布的一个未回答的问题。有人提出了一个建议，我认为如果调整数据结构可能会有所帮助。但这取决于是否会回答这个问题。

这是我原来的问题。如果您有一个好的答案，我将不胜感激： [https ://stackoverflow.com/questions/15704622/silverlight-can-i-do-this-through-data-binding](https://stackoverflow.com/questions/15704622/silverlight-can-i-do-this-through-data-binding)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:03:38.580

这样做，

```
 PieSeries pie1 = new PieSeries();
 pie1.IndependentValueBinding = new Binding("food");
                                pie1.DependentValueBinding=new Binding("renterInsurance");
                                pie1.ItemsSource = tempData;
                                chart1.Series.Add(pie1);

 pie1.ItemsSource = List<YourClass>; 
```

# jquery - 从 JSON 中获取特定值

> ID：15777554
> 
> 赞同：-2
> 
> 时间：2013-04-03T01:52:17.057
> 
> 标签：jquery, json

我正在使用这个

```
afterEachUpload: function(data){
var xyz = $.parseJSON(data);
console.log(xyz); gives below thing.
} 
```

这是我的 JSON 输出

```
Object {upl: Object}
upl: Object
file_name: "testt.jpg" 
```

我需要获取文件名。我尝试过的 `xyz.upl[0] and xyz[0].upl`都给了我一个错误，说未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:54:45.763

看起来会是`xyz.upl.file_name`吗？我看到的没有涉及数组，所以 [0] 不适用。

有点难以分辨，但从示例中，我假设 jquery 响应本质上是：

```
xyz = {
    upl: {
       field_name: "val"
    }
} 
```

这是两个不同 JSON 对象的示例 - 一个与我认为您的示例的意图相匹配，一个与您在评论中的请求相匹配：

```
var json_without_array = { upl: { fieldname: "it works" } };

var json_with_array = { upl: [
    { fieldname: "it works #1" },
    { fieldname: "it works #2" },
    { fieldname: "it works #3" } 
]}

document.write( json_without_array.upl.fieldname + "<br>" );

for( i in json_with_array.upl ){
   document.write( json_with_array.upl[i].fieldname + "<br>" ); 
} 
```

[http://jsfiddle.net/Z4dgy/](http://jsfiddle.net/Z4dgy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:55:03.140

根据您的输出，我相信您只需要查看参考`xyz.upl.file_name`。

这是一个模仿原始 console.log 的示例：http: [//jsfiddle.net/VVSvv/](http://jsfiddle.net/VVSvv/)

```
$(document).ready(function(){
    var json = '{"upl" : {"file_name": "test.jpg"}}';
    var xyz = $.parseJSON(json);
    console.log(xyz);
    document.write(xyz.upl.file_name);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:56:19.907

应该只是：

```
xyz.file_name 
```

或者，如果您使用方括号表示法：

```
xyz[file_name] || xyz["file_name"] 
```

# verilog - Verilog 帮助。根据 ISE 的简单语法错误。将 FSM 编程到基本板

> ID：15777556
> 
> 赞同：-2
> 
> 时间：2013-04-03T01:52:23.483
> 
> 标签：verilog, xilinx, fsm

抱歉，如果此类问题已经提出。
我一直在寻找几天的帮助。

我在参数行附近遇到错误。说 ERROR:HDLCompiler:806 - ";" 附近的语法错误。和“（”附近的另一个错误（状态）语法错误。但我觉得它不是语法错误。

```
`timescale 1ns / 1ps

module movSeven(Clk, Rst, A, an0, an1, an2, an3 );

input A;

output reg  an0, an1, an2, an3;

input Clk, Rst;

parameter W = 1, X = 2, Y = 3, Z = 4 ;

reg [1:0] State, StateNext;

always @(State, A) begin

    case(State) 
      W:begin
        an0 <= 0;
        if (A == 0)
          StateNext <= W;
        else
          StateNext <= X;
        end

     X:begin
      an1 <= 0;
      if (A == 0)
        StateNext <= X;
      else
        StateNext <= Y;
      end

    Y:begin 
      an2 <= 0;
      if (A == 0)
        StateNext <= Y;
      else
        StateNext <= X;
    end

     Z:begin
      an3 <= 0;
      if (A == 0)
        StateNext <= Z;
      else
        StateNext <= W;
    end
endcase
end

always @(posedge Clk)
begin 
    if (Rst == 1)
      State <= X;
    else
      State <= StateNext;   
    end
endmodule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:28:23.073

`State`并且`StateNext`是 2 位宽。所以他们不能有一个值= 4（参数Z）也尝试为每个参数提供单独的行并以位格式定义它们。

```
parameter W = 2'b00;
parameter X = 2'b01;
parameter Y = 2'b10;
parameter Z = 2'b11; 
```

# javascript - 仅加载一次相同的文件 HTML

> ID：15777557
> 
> 赞同：1
> 
> 时间：2013-04-03T01:52:31.733
> 
> 标签：javascript, html, video

目前我正在使用 html5 视频和 JavaScript 滑块。问题是，即使只有一个滑块，滑块也应该可以工作，所以我为此做的是通过 PHP 复制幻灯片，以便保持过渡。

问题是当我复制视频时，浏览器会两次加载同一个文件！（请记住，我复制了它们，因此它们具有相同的 src）。有可能避免吗？我需要在启动脚本之前加载视频，因为我不能有延迟。

任何想法？

# mobile - primefaces 移动和桌面

> ID：15777558
> 
> 赞同：1
> 
> 时间：2013-04-03T01:52:33.720
> 
> 标签：mobile, primefaces, prettyfaces

我有一个用 Primefaces 和 PrettyFaces 编写的工作桌面应用程序。为了包括移动设备，我遵循了[他们论坛](http://forum.primefaces.org/viewtopic.php?f=8&t=19887)上建议的解决方案。
我的要求是在众多页面之一中，我想公开某些页面（屏幕）仅用于移动设备并且分阶段进行，其余页面将在以后迁移。

在漂亮的配置文件中，

```
<url-mapping id="home">
    <pattern value="/home" />
    <action>#{homeBean.renderView}</action>     
    <view-id>/xhtml/home/home.xhtml</view-id>
</url-mapping> 
```

在 HomeBean 中，

```
public String renderView(){
    String renderKitId = FacesContext.getCurrentInstance().getViewRoot().getRenderKitId();        
    System.out.println("renderKitId:::"+renderKitId);
    if(renderKitId.equalsIgnoreCase("PRIMEFACES_MOBILE")){
        return "/mobile_xhtml/home/home.xhtml";
    }else{
        return "/xhtml/home/home.xhtml";
    }
} 
```

这适用于移动设备和桌面设备。
但是当我点击其他链接时，页面没有提交，只呈现主页。
我的问题是

1.  为什么其他链接不起作用？

2.  如何将某些屏幕和剩余屏幕的移动页面无缝呈现为基本 HTML？

希望我清楚地解释了这个问题。
谢谢！

# join - 能够在多对多表查询中删除从 LEFT JOIN 返回的重复记录

> ID：15777561
> 
> 赞同：0
> 
> 时间：2013-04-03T01:52:43.537
> 
> 标签：join, duplicate-removal

我有以下问题要问，也许你可以帮忙。我确实在这里也发现了类似的问题，但无法真正找出有效的方法来使其发挥作用。

我正在为使用 Access 数据库的客户开发此应用程序。

1.  我有 2 个表，它们之间是多对多的关系。一个表是 Grants，另一个表是 Key_People。

2.  为了支持多对多关系，我创建了另一个名为 Key_People_To_Grants 的表。

3.  为了简化我的示例：我的 Grant 表包含：GrantID 和 GrantName 我的 Key_People 表包含：KeyPersonID 和 KeyPersonFName 和 KeyPersonLName 我的 Key_People_To_Grants 表当然包含：KeyPersonID 和 GrantID

4.  我正在尝试使用带有此查询的 LEFT JOIN 获取所有 Grants，它工作得很好，我得到了 Key_People_To_Grants 表中的 Grants 以及其他尚未链接到 Key_People 的 Grants，这是根据需要。这是我正在使用的查询：

    SELECT Grants.*, Key_People.firstName, Key_People.lastName FROM (Grants LEFT JOIN Key_People_To_Grants ON Grants.grantID = Key_People_To_Grants.grantID) LEFT JOIN Key_People ON Key_People_To_Grants.keyPersonID = Key_People.personID;

这个查询的唯一问题，正如我在网上许多关于 JOIN 的帖子中发现的那样，如果给定的 Grant 分配给多个 Key_People，它会返回重复的 Grants 记录。我尝试使用 Distinct（正如我在下面的查询中列出的那样），如果我只从 Grants 表中选择信息，它就可以工作，但只要我还要求 Key_People.firstName 和 Key_People.lastName 信息，Distinct 当然可以不行。

```
SELECT DISTINCT Grants.*, Key_People.firstName, Key_People.lastName
FROM (Grants LEFT JOIN Key_People_To_Grants ON Grants.grantID =
Key_People_To_Grants.grantID) LEFT JOIN Key_People ON 
Key_People_To_Grants.keyPersonID = Key_People.personID; 
```

您对如何完成摆脱返回的重复信息有任何建议，但仍然能够在我的示例中加入表格？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:37:03.270

我想你正在寻找这样的东西：

```
SELECT g.*, kp.firstName, kp.lastName
FROM `Grants` g
LEFT JOIN (
    SELECT MIN(keyPersonID) AS kpid, grantID 
        FROM key_people_to_grants 
        GROUP BY grantID
) kpg ON kpg.grantID = g.grantID
LEFT JOIN Key_People kp ON kp.personID = kpg.kpid 
```

# ruby-on-rails - Rails：个人资料图片模型协会

> ID：15777563
> 
> 赞同：1
> 
> 时间：2013-04-03T01:52:51.900
> 
> 标签：ruby-on-rails, paperclip, model-associations

我有两个模型用户和照片。

现在，用户可以拥有许多照片。我正在寻找最好的 rails/database 模式来表示他们有一张个人资料图片。这是他们的其中一张照片。

**用户模型**

```
class User < ActiveRecord::Base
  attr_accessible :emailAddress, :firstName, :lastName, :middleName, :phoneNumber
  has_many :photos
end 
```

**照片模型**

```
class Photo < ActiveRecord::Base
  belongs_to :client
  attr_accessible :image, :client_id
  has_attached_file :image
end 
```

我应该向 User 添加一个指向现有 photoId 的 :profilePicture 属性，还是应该添加一个名为 ProfilePicture 的新模型，该模型具有 belongs_to :client 和 has_one :photo？

任何可以帮助我找出最佳设置方法的建议或链接都​​会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:43:50.010

我做了类似的东西，我将 profilePicture 称为头像。用户模型必须在表中有一个 avatar_id 字段，该字段是用作用户头像的图片的 photo_id。请注意，照片中的 avatar_owner 只会在作为头像照片的照片实例中分配。

**用户模型**

```
class User < ActiveRecord::Base
  attr_accessible :emailAddress, :firstName, :lastName, :middleName, :phoneNumber, :avatar_id
  has_many :photos
  belongs_to :avatar, :class_name => "Photo", :foreign_key => "avatar_id"
end 
```

**照片模型**

```
class Photo < ActiveRecord::Base
  belongs_to :client
  attr_accessible :image, :client_id
  has_attached_file :image
  has_one  :avatar_owner, :class_name => "User", :foreign_key => "avatar_id" 
```

结尾

# ruby - ruby 中 html_safe 字符串的正确格式

> ID：15777565
> 
> 赞同：0
> 
> 时间：2013-04-03T01:53:16.483
> 
> 标签：ruby, string, html-safe

我已经尝试了一段时间了...

```
<%= ("<h3>(#{@user.first_name.capitalize}" + I18n.t('helpers.s_page') + 
      I18n.t('find_something.empty_user_other')</h3>").html_safe %> 
```

你能告诉我正确的放置方式是什么...谢谢你的帮助。

克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:04:10.893

这应该有效：

```
<h3>
  <%= @user.first_name.capitalize %>
  <%= I18n.t 'helpers.s_page' %>
  <%= I18n.t 'find_something.empty_user_other' %>
</h3> 
```

`html_safe`假设这些`<% %>`部分中的字符串不包含 HTML ，那么您根本不需要使用这种方式。

# c++ - 自定义赋值运算符和迭代器

> ID：15777568
> 
> 赞同：0
> 
> 时间：2013-04-03T01:53:26.743
> 
> 标签：c++, iterator, variable-assignment, operator-keyword

我在基本运算符重载方面遇到了麻烦。我正在使用以下课程：

```
template <class T> 
class Node
{
    public:
        Node() {value = NULL; next = NULL; prev = NULL;}
        T* value;
        Node* next;
        Node* prev;   
};    

class fixedList
{
public:
    class fListIterator
    {
    public:
        Node<T>* point;
        fListIterator & operator=(Node<T>* x) {point = x; return this}
    };

    Node<T>* first;
    Node<T>* last
   fListIterator begin() {fListITerator a = first; return a;}
}

template <class T> fixedList<T>::fixedList(int x, T y)
{
     Node<T> data[x];

     for (int z = 0; z < x; z++)
     {
         data[0].value = &y;
     }

     first = &data[0];
     last = &data[x-1];

     Node<T>* assign = first;

     for (int i = 0; i < x - 1; i++)
     {
         Node<T>* temp = new Node<T>;
         temp = &data[i];
         assign->next = temp;
         assign->next->prev = assign;
         assign = assign->next;
     }

}

int main(int argc, char** argv) 
{
    fixedList<int>* test = new fixedList<int>(5, 2);
    fixedList<int>::fListIterator a = test->begin();

    return 0;
} 
```

我在 begin() 函数中不断收到错误：“请求从 'Node*' 转换为非标量类型 'fixedList::fListIterator'”

谁能弄清楚我做错了什么？

编辑：抱歉，我试图保持紧凑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:11:52.693

当您`this`在等号运算符中返回时，程序会尝试返回`Node*`您从中调用它的那个（因为它接受`Node<T>*`作为参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:15:40.353

`fListIterator begin() {fListITerator a = first; return a;}`

该语句`fListITerator a = first;`是一种构造。您正在尝试调用`fListIterator`以 a`Node<T>*`作为参数的构造函数-除非您没有！

如果您在两个语句中打破此代码：

`fListIterator begin() {fListITerator a; a = first; return a;}`

它会 ：

*   `a`使用默认构造函数构造（`fListIterator`由于您没有显式提供构造函数，编译器会自动为您生成一个）；
*   分配`first`给`a`使用你的`operator=`重载；
*   正确返回`a`

但是，您应该小心：正如 user1167662 的答案所指定的那样，您`fListIterator::operator=`没有返回正确的值。`this`，在这种情况下，是 类型`fListIterator*`。

# python - 查找图像是否有 EXIF

> ID：15777569
> 
> 赞同：1
> 
> 时间：2013-04-03T01:53:33.820
> 
> 标签：python, exif, pyexiv2

是否可以确定图像是否包含 exif 数据？我尝试使用 pyexiv2 如下：

```
import pyexiv2 as pex
pex.metadata("test.jpg")
metadata.read()
print metadata.exif_keys 
```

现在如果没有 EXIF 数据，那么最后一行将打印一个空列表。这是做到这一点的唯一方法还是我可以用任何其他方式做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:02:22.220

`pyexiv2`是处理 EXIF 数据的好工具。因此，如果您在开发方面提出问题，那么您就可以在那里找到答案，我不确定您到底在寻找什么。您只是想要一个工具来手动检查图像是否有 EXIF 数据？

然后我会推荐[exif-py](https://github.com/ianare/exif-py) - 非常简单的脚本，它可以干净地显示数据（如果存在），如果不存在则告诉你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:05:13.693

不完全确定，因为我从未使用过这个模块或玩过图像，就此而言。你不能只做这样的事情吗？我查看了文档，它说这`metadata.exif_keys`是一个列表。看来您只需要检查列表是否为空。

```
if metadata.exif_keys:
    print(metadata.exif_keys) 
```

# matlab - matlab中的近似字符串匹配

> ID：15777575
> 
> 赞同：-1
> 
> 时间：2013-04-03T01:54:23.410
> 
> 标签：matlab, computer-vision, signal-processing

假设我有两个小的（A）和非常大的字符串（B）。我想在 B 中找到 A 的匹配字符串，但我对精确匹配不感兴趣。换句话说，我想考虑一个阈值来找到匹配字符串。因此，在这种情况下，我接受 A 的 2-3 个元素与 B 中选定的字符串不完全匹配的字符串。所以，我的问题是我如何在 matlab 中考虑这种近似？因为，据我所知，matlab 中的大多数字符串匹配代码只是找到完全匹配的。

此外，我希望它产生一堆字符串而不是一个匹配。例如，它应该提供 10 个与 A 匹配的字符串，例如 2-3 不匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T02:50:52.960

这听起来像是您想要的 Smith-Waterman ( [http://en.wikipedia.org/wiki/Smith%E2%80%93Waterman_algorithm](http://en.wikipedia.org/wiki/Smith%E2%80%93Waterman_algorithm) ) 算法，该算法在生物信息学工具箱中实现。

如果这不完全符合您的要求，您可能会通过使用 Levenshtein 距离将 A 与 B 的子串进行比较来编写自己的匹配例程，效率可能会有些低。Matlab Central 上有几个用于 Levenshtein 距离的包（例如，[https](https://www.mathworks.com/matlabcentral/fileexchange/17585-calculation-of-distance-between-strings) ://www.mathworks.com/matlabcentral/fileexchange/17585-calculation-of-distance-between-strings ）。

# google-drive-api - 搜索文件时出现 Google Drive API 调用问题

> ID：15777577
> 
> 赞同：4
> 
> 时间：2013-04-03T01:54:37.793
> 
> 标签：google-drive-api

如果您在驱动器中创建一个名为“HelloWorld”的文件，然后进行以下 API 调用，[https://www.googleapis.com/drive/v2/files?q=title](https://www.googleapis.com/drive/v2/files?q=title+contains+) +contains+ 'World' 文件不会出现在结果中。

1.  它在 ?fullText+contains+'World' 上正常工作
2.  它也适用于 ?title+contains+'HelloW'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:50:48.870

这是预期的行为。`"title contains <substring>"`不支持查询。Google Drive 前端的搜索功能也是如此。

# prolog - 如何在 Prolog 中强制失败？

> ID：15777589
> 
> 赞同：0
> 
> 时间：2013-04-03T01:55:39.187
> 
> 标签：prolog

在序言中，是否可以强制失败？就像是：

```
check(F,A,[1,2,3]) :- FAIL.
check(F,A,_) : greater_than(F,A). 
```

这可能是一个不好的例子，但与此类似。

因此，如果它在 F,A,[1,2,3] 上进行模式匹配，那么我们只需停止 who 统一过程，并返回 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:44:53.747

Prolog has a built-in [`fail/0`](http://www.swi-prolog.org/pldoc/man?predicate=fail/0) predicate, which always fails. You need a cut `!` in front of it in order to prevent further matching of the same `check/3` rule:

```
check(F,A,[1,2,3]) :- !, fail. 
```

# c# - 如何解决 0x80040154（类未注册）错误？

> ID：15777591
> 
> 赞同：1
> 
> 时间：2013-04-03T01:55:52.533
> 
> 标签：c#, class

我使用需要一些 .dll 文件的 Windows 窗体应用程序。

我第一次完成它，构建并运行，它工作并且很好。（64 位处理器、64 位 Windows 7、Visual Studio 2012）

然后，我将整个项目复制并粘贴到其他 PC（64 位处理器、32 位 Windows 8、Visual Studio 2012）。我无法运行它，出现错误消息“类未注册，异常形式 HResult 0x080040154 (REGDB_E_CLASSNOTREG)”

我已经尝试过解决方案：

1.  将平台从anyCPU更改为x86，不起作用
2.  将所有 .dll 文件放入 system32 文件夹，不起作用
3.  尝试使用 regsvr32 注册类，但我收到错误消息说我的 .dll 文件：“已加载但未找到入口点”

而且我什至无法在 Visual Studio 中打开我的 Form.cs[design]，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T05:21:25.243

您可以尝试 gflags [Show loader snaps](http://msdn.microsoft.com/en-us/library/windows/hardware/ff556886%28v=vs.85%29.aspx)。

在 gflags 中检查并将 windbg 附加到您的应用程序，然后您将看到有关模块加载的所有详细信息。您可能会发现一些类似于以下的错误：

> LdrpGenericExceptionFilter - 错误：函数 LdrpSnapIAT 引发异常 0xc0000139

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:13:57.010

看看你的依赖dll是否可以在win32下工作。

这可能是由于 dll 依赖于仅在 64 中可用的其他。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:13:00.727

正如 Hans 建议的那样，您似乎正在使用一些 ActiveX 组件。尝试查找提供它的 dll，然后首先通过 regsvr32 注册它。

# hibernate - TransientObjectException：在刷新之前保存瞬态实例

> ID：15777592
> 
> 赞同：0
> 
> 时间：2013-04-03T01:55:55.697
> 
> 标签：hibernate, jpa, jpa-2.0

我目前正在做一个项目，我遇到了这个错误：

```
org.hibernate.TransientObjectException: object references an unsaved transient instance – save the transient instance before flushing 
```

发生了什么： 1.) 我在登录后设置了一个会话范围变量，比如说 SessionScopeVariableA。

2.) 然后我有一个页面，我要在其中添加一个实体，比如说 EntityA。

3.) EntityA 有一个惰性字段 sessionScopeVariableA，所以当我调用 add 方法时，我必须设置这个变量。

```
entityA.setSessionScopeVariableA(sessionScopeVariableA);
em.persist(entityA); 
```

4.) 请注意 SessionScopeVariableA 包装在会话范围生产者中，而操作是会话范围。

5.) 无论我做什么，我总是以上面指定的瞬态错误告终。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:28:45.077

解决这个问题的方法是使用焊料管理与 CDI 的连接资源。我们是这样做的：

//租户的限定符

```
@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.METHOD, ElementType.FIELD, ElementType.PARAMETER, ElementType.TYPE })
public @interface CurrentTenant { }

//producer for the current tenant
@Produces
@Named("currentTenant")
@CurrentTenant
public Provider getCurrentTenant() { //.. } 
```

//在一个单独的util类中，定义你想如何管理连接资源（cdi）

```
@ExtensionManaged
@ConversationScoped
@Produces
@PersistenceUnit(unitName="myEM")
@MyEMJpa
private EntityManagerFactory em; 
```

//连接资源的接口

```
@Qualifier
@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.METHOD, ElementType.FIELD, ElementType.PARAMETER, ElementType.TYPE })
public @interface MyEMJpa { } 
```

//在你的服务中注入实体管理器

```
@Inject
@MyEMJpa
protected EntityManager em; 
```

//如何注入当前租户

```
@Inject
@CurrentTenant
private Provider currentTenant; 
```

# mongodb - 是否可以使用 MongoDB 替换 BerkelyDB for OpenLDAP？

> ID：15777596
> 
> 赞同：2
> 
> 时间：2013-04-03T01:56:21.773
> 
> 标签：mongodb, openldap, berkeley-db

根据我的日常工作，我们使用`BerkeleyDB (bdb)`+`OpenLDAP`进行用户身份验证，但目前我正在研究使用`MongoDB`替换的可行性`BerkeleyDB (bdb)`？

我知道如果可能我需要考虑从`BerkeleyDB`to`MongoDB`的数据迁移，旧数据必须更改为 BSON 格式，但这是另一个问题。

目的是我们需要更快的数据存储层，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T18:01:42.477

在 OpenLDAP 下，没有简单的方法可以用 MongoDB 替换 BerkeleyDB。

# c++ - 缓存刷新后的时序不确定性非常高

> ID：15777598
> 
> 赞同：3
> 
> 时间：2013-04-03T01:56:52.567
> 
> 标签：c++, c, performance, optimization

我正在使用以下代码来测试在运行时初始化后刷新缓存的效果 daxpy 例程（带有 fill() 和 wall_time() 例程的完整代码在这里：[http](http://codepad.org/QuLT3cbD) ://codepad.org/QuLT3cbD - 它是 150 行）：

```
#define KB 1024

int main()
{
    int cache_size = 32*KB;
    double alpha = 42.5;

    int operand_size = cache_size/(sizeof(double)*2);
    double* X = new double[operand_size];
    double* Y = new double[operand_size];

    //95% confidence interval
    double max_risk = 0.05;
    //Interval half width
    double w;
    int n_iterations = 100;
    students_t dist(n_iterations-1);
    double T = boost::math::quantile(complement(dist,max_risk/2));
    accumulator_set<double, stats<tag::mean,tag::variance> > unflushed_acc;

    for(int i = 0; i < n_iterations; ++i)
    {
        fill(X,operand_size);
        fill(Y,operand_size);
        double seconds = wall_time();
        daxpy(alpha,X,Y,operand_size);
        seconds = wall_time() - seconds;
        unflushed_acc(seconds);
    }

    w = T*sqrt(variance(unflushed_acc))/sqrt(count(unflushed_acc));
    printf("Without flush: time=%g +/- %g ns\n",mean(unflushed_acc)*1e9,w*1e9);

    //Using clflush instruction
    //We need to put the operands back in cache
    accumulator_set<double, stats<tag::mean,tag::variance> > clflush_acc;
    for(int i = 0; i < n_iterations; ++i)
    {
        fill(X,operand_size);
        fill(Y,operand_size);

        flush_array(X,operand_size);
        flush_array(Y,operand_size);
        double seconds = wall_time();
        daxpy(alpha,X,Y,operand_size);
        seconds = wall_time() - seconds;
        clflush_acc(seconds);
    }

    w = T*sqrt(variance(clflush_acc))/sqrt(count(clflush_acc));
    printf("With clflush: time=%g +/- %g ns\n",mean(clflush_acc)*1e9,w*1e9);

    return 0;
} 
```

当我运行此代码时，它会报告其中的比率和不确定性的这些数字（在 95% 的置信水平下）：

没有刷新：时间=3103.75 +/- 0.524506 ns 使用 clflush：时间=4651.72 +/- 201.25 ns

为什么使用 clflush 从缓存中刷新操作数 X 和 Y 会使测量中的噪声增加 100 倍以上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:23:40.643

在 3GHz 时，0.52 ns 是 1.5 个 CPU 周期，201.25 ns 是 604 个 CPU 周期......考虑到当它在缓存层次结构中未命中时从 DRAM 读取缓存线需要几百个 CPU 周期或更多周期，您正在测量引起的方差1 或 2 个缓存行未命中……这并不多。在未刷新的情况下，您对平均时间的读数非常严格，方差非常小……没有发生缓存未命中。

我发现通过在我的 Mac 上将迭代次数增加到大约 5000 次（你有 100 次迭代），我可以像未刷新的情况一样准确地读取已冲洗案例的方差。理所当然地，数据不在缓存中的平均时间比所有数据都在缓存中的时间要长——但它并没有你想象的那么慢——这是因为 CPU 非常有效地预测您的情况是访问模式，并且（推测性地）在您预期的使用之前预取数据（实际上，前面有许多缓存线，以隐藏进入 DRAM 的相对较长的延迟）。

CPU 可能会在预期使用之前发出多个数据缓存（和指令缓存）预取……通过同时进行许多内存读取，它有效地减少了内存延迟（当然前提是它正确猜测）。这引入了非确定性。在您未刷新的情况下，实际上所有数据都在 1 级数据缓存中-堆栈内存引用是您的 32KB 数据的补充，因此会溢出 L1 数据缓存，但这并不多，很快就会从二级缓存——关键是不需要去内存控制器/DRAM。在刷新的情况下，您的数据仅在内存中，因此您会根据处理器预取内存控制器（数据和指令）的竞争方式以及共享同一内存控制器的其他内核中发生的任何事情而获得可变性。

# delphi - 获取 3dgrid 上某个位置的坐标

> ID：15777601
> 
> 赞同：1
> 
> 时间：2013-04-03T01:57:11.650
> 
> 标签：delphi, delphi-xe3, firemonkey-fm2

我有一个 Firemonkey 表单，表单上的 3dgrid 组件设置为 (0,0,0)。单击鼠标时，我想获取网格上某个点的坐标。我知道如何获取光标的屏幕位置，但我需要 3d 网格本身相对于 3dgrid 上的鼠标位置的坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T16:23:23.797

你可以试试那个...

伊曼纽尔

```
procedure TFormMain.EveOnMyLayer3D_MouseUp(Sender: TObject;
      Button: TMouseButton; Shift: TShiftState; X, Y: Single; RayPos,
      RayDir: TVector3D);
var
  P3: TVector3D;
  LocalX, LocalY: single;

begin
  if MyLayer3D.RayCastIntersect(rayPos, rayDir, P3) then
  begin
    P3 :=  MyLayer3D.AbsoluteToLocalVector(P3);
    LocalX := P3.X*MyLayer3D.Resolution;
    LocalY := P3.Y*MyLayer3D.Resolution;
    ... 
```

# asp.net-mvc-3 - 提交表单时下拉列表为空（MVC3）

> ID：15777609
> 
> 赞同：1
> 
> 时间：2013-04-03T01:57:50.397
> 
> 标签：asp.net-mvc-3

我有一个创建页面并有下拉列表。我的问题是，当我提交表单时，下拉列表为空。请帮忙。这是我的代码。

**班级**

```
 public class Product
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public List<SelectListItem> Types { get; set; }
    } 
```

**创建（获取）**

```
 // GET: /Products/Create

        public ActionResult Create(string id)
        {
            List<Product> products;
            if (Session["products"] != null) products = Session["products"] as List<Product>;
            else products = new List<Product>();
            var product = products.FirstOrDefault(x => id != null && x.Id == int.Parse(id))??new Product();
            var types = new List<SelectListItem>();
            var type = new SelectListItem { Selected = false, Value = "0", Text = "Electronics" };
            types.Add(type);
            type = new SelectListItem { Selected = false, Value = "1", Text = "Non-Electronics" };
            types.Add(type);
            product.Types = types.Select(x => new SelectListItem { Value = x.Value, Text = x.Text }).ToList();
            return View(product);
        } 
```

**看法**

@model MVCViewState.Models.Product

```
@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Product</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Description)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Description)
            @Html.ValidationMessageFor(model => model.Description)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Types)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Types, Model.Types)
            @Html.ValidationMessageFor(model => model.Types)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

**创建（发布）**

![在此处输入图像描述](https://i.stack.imgur.com/I4vE2.png) ![在此处输入图像描述](https://i.stack.imgur.com/H0mUS.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T02:04:14.343

我认为您的意图是捕获**selected`Type`**的价值。所以你需要这样的东西：

```
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public List<SelectListItem> Types { get; set; }
    public int TypeId { get; set; } // the selected type from the dropdown
} 
```

在你看来，你需要这个：

```
 @Html.DropDownListFor(model => model.TypeId, Model.Types) 
```

# javascript - 在 Ember 视图中绑定到比较

> ID：15777611
> 
> 赞同：1
> 
> 时间：2013-04-03T01:57:54.780
> 
> 标签：javascript, ember.js

我的控制器中有一个值，而不是我想用来绑定到动态类的值。

```
isSelected: (->
    this.get('selectedConference') == '1A'
  ).property('selectedConference') 
```

但不是 1A 我希望它与每个块中循环的值进行比较。

```
 {{each conference in controller.reverseConferences}}
    <li>
      <a>
        {{isSelected}} 
```

我如何将 {{this}} 传递给 isSelected？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:03:57.960

这里的解决方案是创建一个视图并在其中进行绑定

```
App.TeamsConferencesView = Ember.View.extend
  templateName: "teams/conferences"
  selectedBinding: 'controller.selectedConference'
  loadingBinding: 'controller.loadingData'
  ConferenceItemView: Ember.View.extend
    tagName: 'li'
    classNameBindings: 'isActive:active'.w()
    isActive: (->
        this.get('content') == this.get('parentView.selected');
    ).property('item', 'parentView.selected').cacheable() 
```

现在，当我在控制器中更新 selectedConference 时，它​​绑定到我的视图并激活了相应的项目。

我的标志模板看起来像这样

```
each conference in controller.reverseConferences
  view view.ConferenceItemView contentBinding="conference"
    linkTo teams.conferences conference
      conference 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:29:53.410

在这种情况下，您需要使用会议控制器上`itemController`的`each`助手和属性。`needs`这是一个可以帮助您的 jsbin：http: [//jsbin.com/atomuy/3/](http://jsbin.com/atomuy/3/)。

允许将`itemController`您的会议模型包装到控制器中并`isSelected`在模板中创建您需要的属性。每次点击会议，`select`都会触发动作，通过的会议会被设置为`selected`会议`ConferencesController`。每个`ConferenceController`观察选定的会议。`isSelected`如果它恰好与传递的属性相同，则属性将发生变化。数据绑定会为您更新所有内容。

希望能帮助到你

# php - 将嵌套值附加到下拉菜单

> ID：15777613
> 
> 赞同：0
> 
> 时间：2013-04-03T01:58:07.507
> 
> 标签：php, json, jquery, jquery-mobile

我需要访问嵌套数据并将其动态添加到下拉菜单中。使用场景是jquery mobile web app。因此，ajax 调用将 curls 转换为 php，然后将 json 返回到分解数据的 Web 应用程序。

这是一个对象的示例（注意：它已在 php 中解码，然后将被重新编码）

```
[rates] => Array
    (
        [0] => stdClass Object
            (
                [type] => rate
                [categoryID] => 
                [duration] => PT60M
                [cost] => 5.00
                [recordID] => PT60M|59
                [summary] => $5 for the first 60 minutes, then $5 for each additional 60 minutes
                [summaryColumns] => Array
                    (
                        [0] => stdClass Object
                            (
                                [type] => rateSummaryColumn
                                [text] => $5.00
                                [align] => right
                                [lines] => 1
                            )

                        [1] => stdClass Object
                            (
                                [type] => rateSummaryColumn
                                [text] => 60 minutes
                                [align] => right
                                [lines] => 1
                            )

                    )

            )

        [1] => stdClass Object
            (
                [type] => rate
                [categoryID] => 
                [duration] => PT120M
                [cost] => 10.00
                [recordID] => PT120M|59
                [summary] => $10 for the first 2 hours, then $5 for each additional 60 minutes
                [summaryColumns] => Array
                    (
                        [0] => stdClass Object
                            (
                                [type] => rateSummaryColumn
                                [text] => $10.00
                                [align] => right
                                [lines] => 1
                            )

                        [1] => stdClass Object
                            (
                                [type] => rateSummaryColumn
                                [text] => 2 hours
                                [align] => right
                                [lines] => 1
                            )

                    )

            )

        [2] => stdClass Object
            (
                [type] => rate
                [categoryID] => 
                [duration] => PT180M
                [cost] => 15.00
                [recordID] => PT180M|59
                [summary] => $15 for the first 3 hours, then $5 for each additional 60 minutes
                [summaryColumns] => Array
                    (
                        [0] => stdClass Object
                            (
                                [type] => rateSummaryColumn
                                [text] => $15.00
                                [align] => right
                                [lines] => 1
                            )

                        [1] => stdClass Object
                            (
                                [type] => rateSummaryColumn
                                [text] => 3 hours
                                [align] => right
                                [lines] => 1
                            )

                    )

            ) 
```

我需要访问摘要列中的文本并将它们附加到下拉列表中，其中包含 rate[0].summaryColumns[0].text + rates[0]summaryColumns[1].text 的 [text]。我有一个 each 语句，将每个文本作为一个选项附加，但我需要将其中两个组合在一起 - 所以需要重写

```
 var _rate = result.rates;
$.each(_rate, function(i, vDetails) {
                        var vRate = (vDetails.summaryColumns);
                        $.each(vRate, function(i2, vHandle){
                        //console.log(vHandle.text);
                        $('#rates').append($('<option/>').attr("value", vHandle.text).text(vHandle.text));

                        });
                    }); 
```

如果可以，请提出建议-谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:44:03.797

我发现这对我有用。

```
 var _rate = result.rates;
                        $.each(_rate, function(i) {
                        $('#rates').append($('<option/>').attr("value", _rate[i].cost).text(_rate[i].summaryColumns[0].text + _rate[i].summaryColumns[1].text));
                        }); 
```

这行得通 - 如果摘要列超出 text 属性下的 2 个值，我可能会遇到问题。感谢您的反馈。

# python - 如何从给定文本创建单个字典并使用 for 循环按说明输出

> ID：15777621
> 
> 赞同：-2
> 
> 时间：2013-04-03T01:59:34.830
> 
> 标签：python, for-loop, dictionary

**给定以下关于我们太阳系中行星的信息，创建一个字典。（我把输出放在下面，对不起，我是新手，可能毫无意义地发布全文）**

汞

半径 - 2,439.7 公里

```
Distance from the sun - 58 million km

Moons - none

Atmosphere? True

Gas planet? False 
```

金星

```
Radius - 6,051.8 km

Distance from the sun - 108 million km

Moons - none

Atmosphere? True

Gas planet? False 
```

地球

```
Radius - 6,371.0 km

Distance from the sun - 150 million km

Moons - Moon

Atmosphere? True

Gas planet? False 
```

火星

```
Radius - 3,396.2 km

Distance from the sun - 207 million km

Moons - Phobos and Deimos

Atmosphere? True

Gas planet? False 
```

木星

```
Radius - 69,911 km

Distance from the sun - 483 million km

Moons - Io, Ganymede, Callisto, Europa, Adrastea

Atmosphere? True

Gas planet? True 
```

土星

```
Radius - 60,268 km

Distance from the sun - 1,400 million km

Moons - Pan, Prometheus, Titan, Phoebe, Rhea

Atmosphere? True

Gas planet? True 
```

天王星

```
Radius - 25,559 km

Distance from the sun - 3,000 million km

Moons - Miranda, Ariel, Umbriel, Titania, Oberon

Atmosphere? True

Gas planet? True 
```

海王星

```
Radius - 24,764 km

Distance from the sun - 4,500 million km

Moons - Triton, Nereid, Proteus, Naiad, Thalassa

Atmosphere? True

Gas planet? True 
```

**该程序将上述信息存储在单个字典中，然后使用 for 循环打印字典的内容。**

**样本输出：**

汞

与太阳的距离：58

半径：2439.7

气体星球？： 错误的

气氛？： 真的

月亮：[]

木星

与太阳的距离：483

半径：69911

气体星球？： 真的

气氛？： 真的

卫星：['Io'、'Ganymede'、'Callisto'、'Europa'、'Adrastea']

天王星

与太阳的距离：3000

半径：25559

气体星球？： 真的

气氛？： 真的

月亮：['Miranda'，'Ariel'，'Umbriel'，'Titania'，'Oberon']

火星

与太阳的距离：207

半径：3396.2

气体星球？： 错误的

气氛？： 真的

卫星：['火卫一'，'火卫二']

地球

与太阳的距离：150

半径：6371.0

气体星球？： 错误的

气氛？： 真的

月亮：['月亮']

金星

与太阳的距离：108

半径：6051.8

气体星球？： 错误的

气氛？： 真的

月亮：[]

土星

与太阳的距离：1400

半径：60268

气体星球？： 真的

气氛？： 真的

月亮：['潘'，'普罗米修斯'，'泰坦'，'菲比'，'瑞亚']

海王星

与太阳的距离：4500

半径：24764

气体星球？： 真的

气氛？： 真的

卫星：['Triton'、'Nereid'、'Proteus'、'Naiad'、'Thalassa']

**所以我想知道如何将输入放入字典然后按照上面给出的输出，我尝试将它保存到字典中，但我认为我做的不对，因为我不断收到语法错误，我非常感谢任何帮助！！！，我已经盯着这个看了几个小时了..**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:36:56.433

好的，除非您被明确告知使用 a `Dictionary`，否则存储此数据的数据结构是错误的。字典旨在存储内在链接的数据键值对（如 BookTitle:ISBN）

附录：虽然“半径：2439.7”等......是键值对的示例，但在这种情况下字典不适合的原因是所有对都与“元”定义相关联（在这种情况下，所有信息对是单个行星的一部分）。如果这是有道理的。

由于每个行星都有许多与之关联的数据字段，因此您需要定义一个`Planet`将所有数据封装在一个对象中的类。

例子：

```
class Planet:  
    def __init__(self, name, radius, distFromSun, moons, atmosphere, isGasPlanet):
        """Planet Constructor"""
        self.name = name
        self.radius = radius
        self.distFromSun = distFromSun
        self.moons = moons
        self.atmosphere = atmosphere
        self.isGasPlanet = isGasPlanet

    def __str__(self):
        """Overwrites the string output of the class (what gets called by print())""" 

        return str.format("{0}\n"
                          "Distance from the sun: {1}\n"
                          "Radius: {2}\n"
                          "Gas Planet: {3}\n"
                          "Atmosphere: {4}\n"
                          "Moons: {5}\n",
                          self.name,
                          self.distFromSun,
                          self.radius,
                          self.isGasPlanet,
                          self.atmosphere,
                          self.moons) 
```

这将允许您定义您喜欢的任何行星并轻松打印。

```
merc = Planet("Mercury", 2439.7, 58, [], True, False)

print(merc) 
```

会给你。

```
Mercury
Distance from the sun: 58
Radius: 2439.7
Gas Planet: False
Atmosphere: True
Moons: [] 
```

此外，类是可扩展的，允许您在它们的基础上进行构建。例如，您可以实现一种`AddMoon()`方法，将新月附加到您的行星对象内的“月球阵列”。

# java - 启动画面后不显示主要活动

> ID：15777625
> 
> 赞同：0
> 
> 时间：2013-04-03T01:59:48.977
> 
> 标签：java, android, xml, splash-screen

我理解成千上万的人说“不要使用飞溅”，我明白了，但应用程序并没有那么大，我只是想知道我做错了什么我认为这是我的清单的问题，但在我之后启动画面，当它应该进入主页时，我收到错误“对不起！应用程序 Grifball（进程 com.grifball.info）已意外停止。请重试。

这是我的清单。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.grifball.info"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

     <activity android:name="Splash">
                    <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>       
    <activity
        android:name="MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.grifball.info.MAINACTIVITY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

这是我的 Splash 的 Java

```
package com.grifball.info;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class Splash extends Activity{

@Override
protected void onCreate(Bundle startup) {
    // TODO Auto-generated method stub
    super.onCreate(startup);
    setContentView(R.layout.splash);

    Thread timer = new Thread(){

        public void run(){

            try{
                sleep(5000);
            }catch(InterruptedException e){
                e.printStackTrace();
            }finally{
                Intent openMainActivity = new Intent("com.grifball.info.MAINACTIVITY");
                startActivity(openMainActivity);
            }
        }

    };
    timer.start();
}

} 
```

这是XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@drawable/splashbg">

</LinearLayout> 
```

这是我的原木猫

```
04-03 02:39:20.527: D/AndroidRuntime(318): Shutting down VM
04-03 02:39:20.527: W/dalvikvm(318): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-03 02:39:20.537: E/AndroidRuntime(318): FATAL EXCEPTION: main
04-03 02:39:20.537: E/AndroidRuntime(318): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.grifball.info/com.grifball.info.MainActivity}: java.lang.RuntimeException: native typeface cannot be made
04-03 02:39:20.537: E/AndroidRuntime(318):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-03 02:39:20.537: E/AndroidRuntime(318):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-03 02:39:20.537: E/AndroidRuntime(318):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-03 02:39:20.537: E/AndroidRuntime(318):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-03 02:39:20.537: E/AndroidRuntime(318):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-03 02:39:20.537: E/AndroidRuntime(318):  at android.os.Looper.loop(Looper.java:123)
04-03 02:39:20.537: E/AndroidRuntime(318):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-03 02:39:20.537: E/AndroidRuntime(318):  at java.lang.reflect.Method.invokeNative(Native Method)
04-03 02:39:20.537: E/AndroidRuntime(318):  at java.lang.reflect.Method.invoke(Method.java:521)
04-03 02:39:20.537: E/AndroidRuntime(318):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-03 02:39:20.537: E/AndroidRuntime(318):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-03 02:39:20.537: E/AndroidRuntime(318):  at dalvik.system.NativeStart.main(Native Method)
04-03 02:39:20.537: E/AndroidRuntime(318): Caused by: java.lang.RuntimeException: native typeface cannot be made
04-03 02:39:20.537: E/AndroidRuntime(318):  at android.graphics.Typeface.<init>(Typeface.java:147)
04-03 02:39:20.537: E/AndroidRuntime(318):  at android.graphics.Typeface.createFromAsset(Typeface.java:121)
04-03 02:39:20.537: E/AndroidRuntime(318):  at com.grifball.info.MainActivity.onCreate(MainActivity.java:27)
04-03 02:39:20.537: E/AndroidRuntime(318):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-03 02:39:20.537: E/AndroidRuntime(318):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-03 02:39:20.537: E/AndroidRuntime(318):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T02:10:14.660

在“AndroidManifest.xml”中，你应该改变这个：

```
<action android:name="com.grifball.info.MAINACTIVITY" /> 
```

对此：

```
<action android:name="android.intent.action.MAINACTIVITY" /> 
```

而且，在“Splash.java”中，您应该更改：

```
Intent openMainActivity = new Intent("com.grifball.info.MAINACTIVITY"); 
```

对此：

```
Intent openMainActivity = new Intent(Splash.this, MainActivity.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:11:08.340

您必须进行以下更改

```
<activity android:name=".Splash">
                <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>       
<activity
    android:name=".MainActivity"
    android:label="@string/app_name" >

</activity>

finally{
            Intent openMainActivity = new Intent(Splash.this, MainActivity.class);
            startActivity(openMainActivity); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:16:07.587

试试下面的代码，它应该可以工作。

```
public class Splash extends Activity {

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    setTheme(android.R.style.Theme_Light_NoTitleBar);
    setContentView(R.layout.splash);

    Handler handler = new Handler();

    handler.postDelayed(new Runnable(){
        public void run(){

            finish();
            Intent intent = new Intent(Splash.this, MainActivity.class);
            Splash.this.startActivity(intent);
        }
    }, 2000);
}

} 
```

# mediawiki - MediaWiki 中的横幅

> ID：15777632
> 
> 赞同：0
> 
> 时间：2013-04-03T02:00:38.887
> 
> 标签：mediawiki, banner-ads

我希望在 MediaWiki 支持的 wiki 中每个页面的底部添加横幅，以便当用户加载或刷新页面时，随机广告横幅广告外部网站会显示在所述页面的页脚中。我找不到这样做的扩展，那么有没有不同的方法来实现横幅？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T00:59:53.830

您没有提及您使用的是什么皮肤，但 Vector 是当前安装的默认皮肤。最简单的方法是将您的广告代码包含`<!-- /bodyContent -->`在皮肤文件中的标记下方`/skins/Vector.php`。我发现的最全面的扩展是[PCR GUI Inserts](http://www.mediawiki.org/wiki/Extension%3aPCR_GUI_Inserts)。

# c++ - C++ 调用基类构造函数

> ID：15777635
> 
> 赞同：59
> 
> 时间：2013-04-03T02:01:02.553
> 
> 标签：c++, object, inheritance

```
#include <iostream>
#include <stdio.h> 
using namespace std;

// Base class
class Shape 
{
   public:
      void setWidth(int w)
      {
         width = w;
      }
      void setHeight(int h)
      {
         height = h;
      }
      Shape()
      {
    printf("creating shape \n");
      }
      Shape(int h,int w)
      {
     height = h;
         width = w;
         printf("creatig shape with attributes\n");
      } 
   protected:
      int width;
      int height;
};

// Derived class
class Rectangle: public Shape
{
   public:
      int getArea()
      { 
         return (width * height); 
      }
      Rectangle()
      {
     printf("creating rectangle \n");
      }
      Rectangle(int h,int w)
      {
     printf("creating rectangle with attributes \n");
     height = h;
         width = w;
      }
};

int main(void)
{
   Rectangle Rect;

   Rect.setWidth(5);
   Rect.setHeight(7);

   Rectangle *square = new Rectangle(5,5);
   // Print the area of the object.
   cout << "Total area: " << Rect.getArea() << endl;

   return 0;
} 
```

该程序的输出如下所示

```
creating shape 
creating rectangle 
creating shape 
creating rectangle with attributes 
Total area: 35 
```

在构造两个派生类对象时，我看到它始终是首先调用的基类的默认构造函数。是否有一个原因？这就是为什么像 python 这样的语言坚持显式调用基类构造函数而不是像 C++ 这样的隐式调用的原因吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-04-03T02:13:03.813

对此的简短回答是，“因为这是 C++ 标准所指定的”。

请注意，您始终可以指定与默认构造函数不同的构造函数，如下所示：

```
class Shape  {

  Shape()  {...} //default constructor
  Shape(int h, int w) {....} //some custom constructor

};

class Rectangle : public Shape {
  Rectangle(int h, int w) : Shape(h, w) {...} //you can specify which base class constructor to call

} 
```

仅当您未指定要调用哪一个时，才会调用基类的默认构造函数。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-03T02:05:24.880

除非您在派生类中显式调用另一个构造函数，否则将调用默认类构造函数。语言指定了这一点。

```
Rectangle(int h,int w):
   Shape(h,w)
  {...} 
```

将调用其他基类构造函数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T02:03:05.750

构造对象时，总是先构造基类子对象，因此，先调用基类构造函数，再调用派生类构造函数。原因是派生类对象包含从基类继承的子对象。您总是需要调用基类构造函数来初始化基类子对象。我们通常在派生类的成员初始化列表上调用基类构造函数。如果不显式调用基类构造函数，编译将调用基类的默认构造函数来初始化基类子对象。但是，对默认构造函数的隐式调用不一定总是有效（例如，如果基类定义了一个没有参数就无法调用的构造函数）。

当对象超出范围时，它会先调用派生类的析构函数，然后调用基类的析构函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-24T14:33:34.583

在 c++ 中，编译器始终确保对象层次结构中的函数被成功调用。这些函数是构造函数和析构函数，对象层次结构意味着继承树。

根据这个规则，我们可以猜测编译器会为继承层次结构中的每个对象调用构造函数和析构函数，即使我们没有实现它。为了执行这个操作，编译器会为我们合成未定义的构造函数和析构函数，我们将它们命名为默认构造函数和析构函数。然后，编译器会调用基类的默认构造函数，然后调用派生类的构造函数。

在您的情况下，您不调用基类构造函数，但编译器通过调用基类的默认构造函数为您执行此操作，因为如果编译器不这样做，您的派生类（在您的示例中为 Rectangle）将不完整，并且可能会导致灾难因为也许你会在派生类中使用基类的一些成员函数。所以为了安全编译器总是需要所有的构造函数调用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-16T08:12:54.847

为什么调用基类的默认构造函数？事实并非总是如此。基类的任何构造函数（具有不同的签名）都可以从派生类的构造函数中调用。在您的情况下，调用默认构造函数是因为它没有参数，所以它是默认的。

创建派生类时，在层次结构中调用构造函数的顺序始终是 Base -> Derived。如果我们有：

```
class A {..}
class B : A {...}
class C : B {...}
C c; 
```

创建 c 时，首先调用 A 的构造函数，然后调用 B 的构造函数，然后调用 C 的构造函数。

为了保证这个顺序，当一个派生类的构造函数被调用时，它总是在派生类的构造函数可以做任何事情之前调用基类的构造函数。出于这个原因，程序员可以在派生类的构造函数的唯一初始化列表中手动调用基类的构造函数，并带有相应的参数。例如，在下面的代码中，Derived 的默认构造函数将调用 Base 的构造函数 Base::Base(int i) 而不是默认构造函数。

```
Derived() : Base(5)
{      
} 
```

如果在派生类的构造函数的初始化列表中没有调用这样的构造函数，则程序假定一个没有参数的基类构造函数。这就是调用没有参数的构造函数（即默认构造函数）的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T02:35:07.700

想象一下：当您的子类从超类继承属性时，它们不会神奇地出现。您仍然必须构造对象。因此，您调用基本构造函数。想象一下，如果你的类继承了一个变量，你的超类构造函数将其初始化为一个重要的值。如果我们不这样做，您的代码可能会因为变量未初始化而失败。

# oracle - 布尔值的 Oracle YN 不明确

> ID：15777637
> 
> 赞同：0
> 
> 时间：2013-04-03T02:01:17.257
> 
> 标签：oracle, boolean, qooxdoo

很长一段时间以来，我一直使用 char(1) Y/N 方法在 Oracle 中表示布尔值，并且它通常可以很好地完成工作。但是，我无法弄清楚如何为我当前的项目安全地实施布尔值。

以前从 Oracle 返回到 PHP 的数据将用于填充具有已定义属性和类型的类。这意味着将 Y/N 转换为实际的布尔值很容易通过构造函数或其他方法在属性级别进行处理。这次我想做的有点不同。

我正在使用 Qooxdoo 框架并为其提供 JSON，然后用于动态生成模型。这里的要点是 Qooxdoo 不包含什么属性是什么类型的映射。它们在 JSON 中的内容就是它们在 Qooxdoo 中的最终结果。

当然，我不想在 Qooxdoo 中将 Y/N 值解释为布尔值，所以我的第一个动作是在 PHP 中预处理数据集，并在编码之前将 Y 和 N 转换为布尔值。理论上这一切都很好，直到有人输入他们的姓名（或任何其他字符串数据）作为 Y 或 N，这很高兴进入 Oracle，但随后作为布尔值返回。

我可以想到一些解决方案，例如使用更长更唯一的标识符，或者在 Qooxdoo 中不强制执行 Y 和 N 字符串（我最不喜欢的想法），但我欢迎任何关于如何处理这个问题的替代想法，因为我确信我'不是唯一的问题，而且这个问题不仅限于 Qooxdoo 开发。

# spring-data-jpa - 使用弹簧数据进行不区分大小写的排序

> ID：15777638
> 
> 赞同：13
> 
> 时间：2013-04-03T02:02:03.867
> 
> 标签：spring-data-jpa

如何使用 Spring-data Pageable 进行不区分大小写的排序？

我的存储库中有这个方法

```
public interface ItemRepository extends QueryDslPredicateExecutor<Item>{
    @Query("SELECT o FROM Item o WHERE o.status = ?1")
    Page<Item> findByStatus(Item.Status status, Pageable pageable);
} 
```

我希望能够通过以下方式调用它：

```
itemRepository.findByStatus(Status.completed, new PageRequest(0, 10, Direction.ASC, "lower(name)") 
```

请注意`lower`属性字符串中的函数。这不起作用，因为 Spring-data 期望那里有一个属性。这将被翻译成如下内容：

```
SELECT o FROM Item o WHERE o.status = ?1 ORDER BY o.lower(name) 
```

这当然不起作用，因为对象上没有“较低”属性。

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-10-10T08:42:11.350

`Sort.Order.ignoreCase()`大约 8 个月前被引入 spring-data-jpa，看这里：

[https://jira.springsource.org/browse/DATAJPA-296](https://jira.springsource.org/browse/DATAJPA-296)

[https://github.com/kraymondksc/spring-data-jpa/commit/c3adce0bd36799d3754a5f4c61aee64982abd7e0](https://github.com/kraymondksc/spring-data-jpa/commit/c3adce0bd36799d3754a5f4c61aee64982abd7e0)

一旦你有一个合适的 spring-data-jpa 版本（我想从 1.4 M1 开始，我有 1.4.1）你可以写这样的东西：

```
Sort.Order order = new Sort.Order(Sort.Direction.ASC, "name").ignoreCase();
itemRepository.findByStatus(Status.completed, new PageRequest(0, 10, new Sort(order)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-25T17:45:30.453

以下是我用来排序的代码：

```
db.getCollection('employee').aggregate([
  {
    $project: {
         fieldToSortWith: { $toLower: "$lastName" },
         subject: 1
             }
 },
{
    $sort: { fieldToSortWith: 1 },
}
]) 
```

这就是你在春季数据中的做法

```
DBCollection coll = mongoTemplate.getCollection("employee");
       List<DBObject> pipe = new ArrayList<>();
        DBObject prjflds = new BasicDBObject();
        prjflds.put("id", 1);
        prjflds.put("firstName", 2);
        prjflds.put("lastName", new BasicDBObject("$toLower", "$lastName"));
        DBObject project = new BasicDBObject();
        project.put("$project", prjflds);
        pipe.add(project);
        DBObject sort = new BasicDBObject();
        sort.put("$sort", new BasicDBObject("lastName", 1));
        pipe.add(sort);
        BasicDBObject skip = new BasicDBObject("$skip", searchCriteria.getCurrentPage() * searchCriteria.getPageSize());
        BasicDBObject limit = new BasicDBObject("$limit", searchCriteria.getPageSize());
        pipe.add(skip);
        pipe.add(limit);
        BasicDBObject employeeRoleFilter = new BasicDBObject("$match", new BasicDBObject("employeeRoles", new BasicDBObject("$in", searchCriteria.getEmployeeRolesNames())));
        pipe.add(employeeRoleFilter);
        BasicDBObject employeeStatusFilter = new BasicDBObject("$match", new BasicDBObject("active", new BasicDBObject("$eq", Boolean.valueOf(searchCriteria.getEmployeeStatus()))));
        pipe.add(employeeStatusFilter);
        searchCriteria.isEmployeeNameSearchIndicator());
        pipe.add(searchTextFilter);
        coll.aggregate(pipe).results(); 
```

之后，您将获得需要在您的域中转换的本机 BasicDBObjects。如果您需要任何帮助，请告知此代码是混乱的。

# bash - bash 将数组添加到 plist

> ID：15777639
> 
> 赞同：0
> 
> 时间：2013-04-03T02:02:12.010
> 
> 标签：bash, post-install

我正在通过 Cydia 制作一个可安装的包，它将 com.intelliborn.intelliscreenx 写入：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Hidden</key>
    <array>
        <string>libactivator</string>
        <string>com.aaronash.BarrelSettings</string>
        <string>com.iptm.bigboss.sbsettings</string>
    </array>
</dict>
</plist> 
```

但我不知道如何将 postinst 脚本写入正确添加的位置，并将 postrmv 脚本写入正确删除的位置。

安装此包后 hidden.plist 应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Hidden</key>
    <array>
        <string>libactivator</string>
        <string>com.aaronash.BarrelSettings</string>
        <string>com.iptm.bigboss.sbsettings</string>
            <string>com.intelliborn.intelliscreenx</string>
    </array>
</dict> 
```

这是我的 postinst 和 postrmv 脚本的外观：

后勤

```
#!/bin/bash

declare -a cydia
cydia=($CYDIA)

if [[ $1 == install ]]; then
    if [[ ${CYDIA+@} ]]; then
        eval "echo 'finish:restart' >&${cydia[0]}"
    fi
fi
echo -e "\n\<string>com.intelliborn.intelliscreenx</string>\n" >> /var/mobile/Library/LibHide/hidden.plist

exit 0 
```

后rmv

```
#!/bin/bash
echo " " >> /var/mobile/Library/LibHide/
sed -i 's/<string>com.intelliborn.intelliscreenx</string>\n" >> /var/mobile/Library/LibHide/hidden.plist

declare -a cydia
cydia=($CYDIA)

if [[ $1 == install ]]; then
    if [[ ${CYDIA+@} ]]; then
        eval "echo 'finish:restart' >&${cydia[0]}"
    fi
fi

exit 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:55:07.847

您可以使用 plutil for iPhone，因为它适用于 plists 文件。

在您的 cydia 包的控制文件中，将以下内容添加到您的 pre-depends 中，如下例所示，以便如果事先安装了 plutil，则可以安装它以使 postinst 和 postrm 不会失败。

**控制**

```
Name: com.test.package
Pre-Depends: com.ericasadun.utilities 
```

**后勤**

```
#!/bin/bash

#add value to array
plutil -key Hidden -arrayadd -value com.intelliborn.intelliscreenx /var/mobile/Library/LibHide/hidden.plist

declare -a cydia
cydia=($CYDIA)

if [[ $1 == install ]]; then
    if [[ ${CYDIA+@} ]]; then
    eval "echo 'finish:restart' >&${cydia[0]}"
    fi
fi

exit 0 
```

# c# - Silverlight webservice 直接调用方法

> ID：15777645
> 
> 赞同：0
> 
> 时间：2013-04-03T02:02:33.650
> 
> 标签：c#, asp.net, web-services, silverlight

```
var lockClient = new ServiceReference1.LockSoapClient();
lockClient.AcquireLockAsync();

bool status=true;
lockClient.AcquireLockCompleted += (s, e1) =>
{
     status = e1.Result;
};

sendStat(status); 
```

我想直接在 sendStat() 方法中传递`boolean true/false`我得到的那个。`e.Result`例如`sendStat(e1.Result)`，我不想在该`lockClient.AcquireLockCompleted`部分中调用此方法。我该怎么做？

真实的例子

```
Brush brush = GetPolygonFill(vectorPolygon, false, Settings.LightSourcePosition, adjust); 
```

这个

Settings.LightSourcePosition

部分需要来自网络服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:18:31.220

There's no way to that outside of the completed method because of the async call. Anything inside the completed method is guaranteed to be executed once you have the results from your async call.

# unit-testing - symfony2 AppKernel 查找内核类中的致命错误

> ID：15777648
> 
> 赞同：0
> 
> 时间：2013-04-03T02:02:37.620
> 
> 标签：unit-testing, symfony, phpunit

我正在使用 symfony2。我的 AppKernel 中的代码如下所示：

```
use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
            new Symfony\Bundle\SecurityBundle\SecurityBundle(),
            new Symfony\Bundle\TwigBundle\TwigBundle(),
            new Symfony\Bundle\MonologBundle\MonologBundle(),
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
            new Symfony\Bundle\AsseticBundle\AsseticBundle(),
            new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(),
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
            new JMS\AopBundle\JMSAopBundle(),
            new JMS\DiExtraBundle\JMSDiExtraBundle($this),
            new JMS\SecurityExtraBundle\JMSSecurityExtraBundle()
        );

        if (in_array($this->getEnvironment(), array('dev', 'test'))) {
            $bundles[] = new My\BookBundle\MyBookBundle();
            $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
            $bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
            $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
        }

        return $bundles;
    } 
```

现在我的 Bookbundle 下的单元测试之一的代码如下所示：

```
namespace My\BookBundle\Tests\Controller;

use My\BookBundle\Services\TestHelper;
use My\BookBundle\Tests\BaseTest;

class WriterControllerTest extends BaseTest
{
    /**
     * @var TestHelper
     */
    protected $testHelper;

    public function __construct()
    {
        parent::__construct();
        $this->testHelper = $this->get('test_helper');
    }

    public function setUp()
    {
        $this->testHelper->setupTestData();
    } 
```

以前它运行应用程序和测试非常顺利。然后我添加了很多功能代码（例如控制器、存储库功能等）。现在，当我尝试通过编写测试来备份代码时，我在命令提示符下遇到以下错误：

```
PHP Fatal error: Class 'Symfony\Component\HttpKernel\Kernel' not found in /var/www/Symfony/app/AppKernel.php on line 7 
```

如您在上述代码中所见，第 7 行指的是 AppKernel 类的声明。

我很困惑，我无法找到代码突然中断的原因。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:07:01.713

致@ONE：我在 app 文件夹中定义了我的自动加载

致@Wouter J：单元测试没有使用appkernel - 它只是显示的错误

致@Ramon Kleiss：我安装并卸载了供应商，然后重新安装。没有改变。

我无法弄清楚背后的原因是什么，但我能够解决问题。它与Test和Vendor文件夹的权限更改有关。正如我所提到的，它之前运行过——出于某种未知原因，我的 bundles 测试文件夹和供应商文件夹的权限已更改，因此它无法访问正确的文件。我删除了我的安装并从存储库中获取了新的克隆，并按照规则安装了项目，一切都很好。我弄清楚了旧项目文件系统和最新项目文件系统的区别，发现只有权限是区别。

谢谢你的回答。

# jquery - 到达 div 时菜单 ul 样式更改

> ID：15777657
> 
> 赞同：-1
> 
> 时间：2013-04-03T02:03:30.987
> 
> 标签：jquery, css, html, scroll

我有一个简单的菜单，里面有 uls，我想在页面到达 div（在内容中）时更改 ul 的样式（使用 css），我的意思是滚动并到达那个 div。例如，我有这个代码：

css 文件

```
#menu {
    background-color: #ccc;
    width:100%;
}

.menutext {
    padding:25 40 30 !important;
    display:inline-block;
}

.menutext2 {
    padding:25 40 0 !important;
    display:inline-block;
    color:red;
}

.alldivs {
    width:300px;
    height:200px;
    background-color:a9a9a9;
} 
```

HTML

```
<div id="menu">
    <div class="menutext">Change the style of me to .mebutext2 on arriving to DIV1</div>
    <div class="menutext">Change the style of me to .mebutext2 on arriving to DIV2</div>
    <div class="menutext">Change the style of me to .mebutext2 on arriving to DIV3</div>
</div>

<br><br><br>

<div class="alldivs"><div id="DIV1">DIV1</div></div>
<br><br><br><br>
<div class="alldivs"><div id="DIV2">DIV2</div></div>
<br><br><br><br>
<div class="alldivs"><div id="DIV3">DIV3</div></div>
<br><br><br><br> 
```

这是我的代码[http://jsfiddle.net/vu7Hh/](http://jsfiddle.net/vu7Hh/)

很快：当我滚动并到达 DIV2 的顶部时，例如菜单样式中的第二个 ul 更改为 .menustyle2（换句话说，它变为红色）。所以我认为我应该在这里使用 jQuery 来做到这一点。

# asp.net - 如何在示例 C# ASP.NET 应用程序（webforms，非 MVC）中更改登录数据库

> ID：15777658
> 
> 赞同：1
> 
> 时间：2013-04-03T02:03:32.713
> 
> 标签：asp.net, webforms

我一直在寻找有关如何将 ASP.NET Webforms 模板应用程序（您在 Visual Studio 2012 中获得的默认项目）上的登录系统从 LocalDB 更改为 SQL 2012 Express 服务器的方法。

这是我到目前为止所做的：1）将架构从 localDB 复制到 SQL Express 实例 2）将 SQL Express 实例添加到 SQL Server 对象资源管理器和服务器资源管理器 3）从 SQL Server 对象资源管理器中删除 localdb 的所有痕迹

令我惊讶的是，我针对 localDB 创建的所有测试登录帐户仍然有效，并且通过 Management Studio 发出的 SELECT 语句显示 SQL Express 实例中没有任何用户。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:33:57.687

您是否尝试过 ASP.Net 配置（在您的 Visual Studio 中单击 Project => ASP.Net 配置）并按照他们的步骤操作

# java - 如何在 JPanel 中制作简单的图形动画

> ID：15777659
> 
> 赞同：0
> 
> 时间：2013-04-03T02:03:43.460
> 
> 标签：java, swing, animation, jframe, jpanel

我想做的只是掷骰子并有一个掷骰子动画（只是在掷骰子时显示随机骰子值）

到目前为止，我的模具代码：

```
import java.awt.*;

import javax.swing.*;

public class diePanel extends JPanel{

private int dieValue;
private boolean onHold=false;
private int pNum;

public diePanel(){
    super();
}

public void setPlayerNumber(int pNum){
    this.pNum=pNum;
}

public void setDieValue(int dieValue){
    this.dieValue=dieValue;
}

public int checkDieValue(){
    return dieValue;
}

public void roll(){
    dieValue=(int) ((Math.random()*6)+1);
    repaint();
}

public void changeOnHold(){
    onHold=!onHold;
}

public void unHold(){
    onHold=false;
}

public boolean checkOnHold(){
    return onHold;
}

public void paintComponent(Graphics g){
    super.paintComponent(g);
    this.setSize(50,50);
    this.setVisible(true);
    if(pNum==1){
        if(dieValue==1){
            if(onHold==false){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillOval(23,23,5,5);
        }
        else if(dieValue==2){
            if(onHold==false){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
        }
        else if(dieValue==3){
            if(onHold==false){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(23,23,5,5);

        }
        else if(dieValue==4){
            if(onHold==false){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
        }
        else if(dieValue==5){
            if(onHold==false){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
            g.fillOval(23,23,5,5);
        }
        else if(dieValue==6){
            if(onHold==false){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.black);
            }
            else{
                g.setColor(Color.white);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
            g.fillOval(7,23,5,5);
            g.fillOval(38,23,5,5);
        }
    }
    if(pNum==2){
        if(dieValue==1){
            if(onHold==false){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillOval(23,23,5,5);
        }
        else if(dieValue==2){
            if(onHold==false){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
        }
        else if(dieValue==3){
            if(onHold==false){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(23,23,5,5);

        }
        else if(dieValue==4){
            if(onHold==false){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
        }
        else if(dieValue==5){
            if(onHold==false){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
            g.fillOval(23,23,5,5);
        }
        else if(dieValue==6){
            if(onHold==false){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.blue);
            }
            else{
                g.setColor(Color.green);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
            g.fillOval(7,23,5,5);
            g.fillOval(38,23,5,5);
        }
    }
    if(pNum==3){
        if(dieValue==1){
            if(onHold==false){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillOval(23,23,5,5);
        }
        else if(dieValue==2){
            if(onHold==false){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
        }
        else if(dieValue==3){
            if(onHold==false){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(23,23,5,5);

        }
        else if(dieValue==4){
            if(onHold==false){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
        }
        else if(dieValue==5){
            if(onHold==false){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
            g.fillOval(23,23,5,5);
        }
        else if(dieValue==6){
            if(onHold==false){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.pink);
            }
            else{
                g.setColor(Color.orange);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
            g.fillOval(7,23,5,5);
            g.fillOval(38,23,5,5);
        }
    }
    if(pNum==4){
        if(dieValue==1){
            if(onHold==false){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillOval(23,23,5,5);
        }
        else if(dieValue==2){
            if(onHold==false){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
        }
        else if(dieValue==3){
            if(onHold==false){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(23,23,5,5);

        }
        else if(dieValue==4){
            if(onHold==false){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
        }
        else if(dieValue==5){
            if(onHold==false){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
            g.fillOval(23,23,5,5);
        }
        else if(dieValue==6){
            if(onHold==false){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillRoundRect(0, 0, 50, 50, 10, 10);
            if(onHold==true){
                g.setColor(Color.red);
            }
            else{
                g.setColor(Color.gray);
            }
            g.fillOval(7,7,5,5);
            g.fillOval(38,38,5,5);
            g.fillOval(7,38,5,5);
            g.fillOval(38,7,5,5);
            g.fillOval(7,23,5,5);
            g.fillOval(38,23,5,5);
        }
    }
   }
} 
```

我呼吁在我的框架中滚动：

```
 for(int i=0;i<numDice;i++){
     die[i].setPlayerNumber(cPlayer+1);
    if(die[i].checkOnHold()==false){
        for(int i2=0;i2<100;i2++){
            die[i].roll();
            try {
                    Thread.sleep(5);
            } catch (InterruptedException e) {
                // TODO Auto-generated      catch block
                e.printStackTrace();
            }
            repaint();
        }
    }
 } 
```

使用 repaint() 只是导致按下的按钮被延迟

任何帮助将非常感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:07:22.787

您基本上违反了 Swing 的单线程规则。特别是，您正在事件调度线程中执行长时间运行和阻塞操作，阻止它处理重绘请求，因此没有任何工作的原因。

您可以使用 Swing`Timer`来解决问题，但 a 更有可能`SwingWorker`产生更理想的结果。

查看[Concurrency in swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)了解更多详情

**更新了示例**

我浏览了你的代码，有很多让我害怕的事情。

*   无论如何，您都不应该在`paint`方法中修改 UI，这将导致重绘管理器安排新的重绘，这将调用您的`paint`方法等等......

这...

```
this.setSize(50,50);
this.setVisible(true); 
```

是一个非常糟糕的主意。首先，你不应该依赖`setSize`，而应该覆盖`getPreferredSize`。这将允许您使用适当的布局管理器来布局您的组件。

*   在 中使用“玩家”标志`DiePanel`来确定每个骰子应该涂在哪里。

这是一个坏主意，原因有很多。首先，您实际上并没有以任何方式跟踪每个玩家的掷骰，因此只会绘制玩家的骰子，但每个玩家将共享相同的骰子。

您还为每个玩家重复相同的代码，这完全是浪费。

A`DiePanel`应该代表单个工作单元，它应该代表单个玩家的结果，或者可以根据需要使用多个面板来产生累积结果。

*   你不应该依赖“神奇”的数字。

您的绘制代码依赖于组件是给定尺寸的事实，这并不总是可能的，相反，您应该使用组件`width`和`height`值来更好地生成结果或将模具保持在静态尺寸，但更好地定位它，比如在组件的中间。

下面的示例纠正了这些问题中更严重的问题，但旨在演示使用 a`SwingWorker`来模拟掷骰子。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class DiceRoll {

    public static void main(String[] args) {
        new DiceRoll();
    }

    public DiceRoll() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private DiePanel diePane;

        public TestPane() {
            setLayout(new BorderLayout());
            diePane = new DiePanel();
            diePane.roll();
            add(diePane);
            JButton roll = new JButton("Roll");
            add(roll, BorderLayout.SOUTH);
            roll.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    new DieRoller(diePane).execute();
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }

    public class DieRoller extends SwingWorker<Void, Integer> {

        private DiePanel diePane;

        public DieRoller(DiePanel diePane) {
            this.diePane = diePane;
        }

        @Override
        protected void process(List<Integer> chunks) {
            diePane.roll();
        }

        @Override
        protected Void doInBackground() throws Exception {
            int rolls = ((int) Math.round(Math.random() * 100)) + 1;
            System.out.println("Rolls = " + rolls);
            for (int roll = 0; roll < rolls; roll++) {
                publish(roll);
                Thread.sleep(125);
            }
            return null;
        }
    }

    public class DiePanel extends JPanel {

        private int dieValue;
        private boolean onHold = false;

        public DiePanel() {
            super();
        }

        public void setDieValue(int dieValue) {
            this.dieValue = dieValue;
        }

        public int checkDieValue() {
            return dieValue;
        }

        public void roll() {
            dieValue = (int) ((Math.random() * 6) + 1);
            repaint();
        }

        public void changeOnHold() {
            onHold = !onHold;
        }

        public void unHold() {
            onHold = false;
        }

        public boolean checkOnHold() {
            return onHold;
        }

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (dieValue == 1) {
                if (onHold == false) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillRoundRect(0, 0, 50, 50, 10, 10);
                if (onHold == true) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillOval(23, 23, 5, 5);
            } else if (dieValue == 2) {
                if (onHold == false) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillRoundRect(0, 0, 50, 50, 10, 10);
                if (onHold == true) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillOval(7, 7, 5, 5);
                g.fillOval(38, 38, 5, 5);
            } else if (dieValue == 3) {
                if (onHold == false) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillRoundRect(0, 0, 50, 50, 10, 10);
                if (onHold == true) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillOval(7, 7, 5, 5);
                g.fillOval(38, 38, 5, 5);
                g.fillOval(23, 23, 5, 5);

            } else if (dieValue == 4) {
                if (onHold == false) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillRoundRect(0, 0, 50, 50, 10, 10);
                if (onHold == true) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillOval(7, 7, 5, 5);
                g.fillOval(38, 38, 5, 5);
                g.fillOval(7, 38, 5, 5);
                g.fillOval(38, 7, 5, 5);
            } else if (dieValue == 5) {
                if (onHold == false) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillRoundRect(0, 0, 50, 50, 10, 10);
                if (onHold == true) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillOval(7, 7, 5, 5);
                g.fillOval(38, 38, 5, 5);
                g.fillOval(7, 38, 5, 5);
                g.fillOval(38, 7, 5, 5);
                g.fillOval(23, 23, 5, 5);
            } else if (dieValue == 6) {
                if (onHold == false) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillRoundRect(0, 0, 50, 50, 10, 10);
                if (onHold == true) {
                    g.setColor(Color.black);
                } else {
                    g.setColor(Color.white);
                }
                g.fillOval(7, 7, 5, 5);
                g.fillOval(38, 38, 5, 5);
                g.fillOval(7, 38, 5, 5);
                g.fillOval(38, 7, 5, 5);
                g.fillOval(7, 23, 5, 5);
                g.fillOval(38, 23, 5, 5);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T02:07:41.773

谷歌“java动画”。

您已经在事件调度线程 (EDT) 上获得了所有内容，因此它永远没有机会实际处理任何事件。

# bash - zshrc“找不到命令：npm”

> ID：15777660
> 
> 赞同：12
> 
> 时间：2013-04-03T02:03:49.047
> 
> 标签：bash, node.js, npm, zsh

所以我正在研究学习node.js。我一直在按照[本教程](http://net.tutsplus.com/tutorials/javascript-ajax/node-js-infrastructure-part-2/)安装它并尝试一些东西。

无论如何，npm 的行为真的很奇怪。它会在一段时间内正常工作（例如，我更改了它的查看器配置设置），但随后突然“消失”，以便下次我进入

```
npm ...(anything) 
```

在命令行中，我的 shell 通知我没有找到 npm 命令。以前，使用 nvm 卸载然后重新安装 npm 是可行的，但我宁愿不要每十分钟这样做一次，而且它会突然停止工作，这对我来说非常奇怪。

我认为上次，它在我编辑并重新获取我的 ~/.zshrc 文件后停止工作——只是添加了 npm 和节点选项卡完成插件。

知道发生了什么吗？我将发布几个基本命令的结果，但我对系统管理员的东西真的很糟糕，而且我真的不知道在这里寻找什么。

非虚拟机 -ls

```
 v0.8.22
current:    v0.10.2
default -> 0.8 (-> v0.8.22) 
```

哪个节点

```
/usr/bin/node 
```

哪个 npm

```
npm not found 
```

在我的根文件夹中直接有 nvm（这是重复的吗？）和 npm 目录。

如果我进入 /usr/bin，节点是一个文件，而不是一个目录。还有一个文件 npm，但没有文件 nvm。

正如以上所有可能显示的那样，我真的不知道发生了什么。我已经搜索过这个，但似乎没有人有这个问题。任何想法发生了什么或如何找出？

**编辑**注意到我的默认节点不是最新的，我做了所有这些。撇开为什么我的 shell 会自动将我切换到 bin 目录（以及为什么这似乎是一个 github 存储库——不知道我的计算机出了什么问题），这是否提供了任何线索？：

```
➜  node  nvm alias default v0.10.2
default -> v0.10.2
➜  node  nvm ls
   v0.8.22
current:    v0.10.2
default -> v0.10.2
➜  node  npm
zsh: command not found: npm
➜  node  nvm install npm
######################################################################## 100.0%
Checksums do not match.
Binary download failed, trying source.
Additional options while compiling: 
nvm: install N/A failed!
➜  bin git:(master) nvm uninstall npm
N/A version is not installed yet... installing
######################################################################## 100.0%
Checksums do not match.
Binary download failed, trying source.
Additional options while compiling: 
nvm: install N/A failed!
➜  bin git:(master) cd ~/rails/node 
```

**编辑 2** - 我确保将节点路径添加到我的 zshrc 文件中：

```
#other stuff...
export PATH=(...):/usr/bin/node 
```

但是当我尝试跑步时

```
source ~./zshrc 
```

我收到了这样的投诉：

```
.zshrc:11: command not found: npm 
```

指向这些行（添加数字）：

```
10 . ~/nvm/nvm.sh
11 . <(npm completion) 
```

这是我从上面的 tut 中得到的，当 npm 工作时，我正在查找如何实现选项卡完成。

**作为对延斯的回应**

这是在我的 ~/nvm/nvm.sh 文件中，靠近开始：

```
# Auto detect the NVM_DIR
if [ ! -d "$NVM_DIR" ]; then
    export NVM_DIR=$(cd $(dirname ${BASH_SOURCE[0]:-$0}) && pwd)
fi

# Make zsh glob matching behave same as bash
# This fixes the "zsh: no matches found" errors
if [ ! -z "$(which unsetopt 2>/dev/null)" ]; then
    unsetopt nomatch 2>/dev/null
fi 
```

我尝试（并且我认为成功地做到了）对 npm 目录进行 chmod 以使其成为读/写/可执行文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-04-01T23:05:55.700

# 1) 打开你的 zsh 配置文件

```
nano ~/.zshrc 
```

# 2) 添加路径

```
export PATH="$PATH:/usr/local/share/npm/bin" 
```

# 3) 按 CTRL + X 然后按 Y 保存文件

# 4) 执行文件内容

```
source ~/.zshrc 
```

这个简单的过程对我有用:-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-07T01:43:41.517

我遇到了 Node 和 npm 都不起作用的问题。我花了大约 6 个小时在网上搜索解决方案，但没有运气。

正如[npm 网站](https://www.npmjs.com/package/npm#super-easy-install)提到的：

> npm 现在自带[node](https://nodejs.org/download/)。

我想再次安装 Node.js，希望它能解决这些问题，它做到了:)

安装后完全成功。节点安装程序显示最后一条消息：

> 节点安装在
> 
> `/usr/local/bin/node`
> 
> npm 安装在
> 
> `/usr/local/bin/npm`
> 
> 确保`/usr/local/bin is in your $PATH`.

这就是我注意到我的`$PATH`安装目录和安装目录错误的地方。安装后我可以运行 node 和 npm。

希望能帮助到你...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-03T09:57:55.280

我的 Mac 遇到了同样的问题，我做了以下操作：

1.  卸载现有节点
2.  去node网页下载包，然后安装
3.  去，`~/.zshrc`路径通常是`/usr/local/bin`
4.  从...中得到快乐`npm`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-26T17:51:03.383

老实说，不确定这是否会/会解决您遇到/遇到的问题，但我遇到的问题几乎与您所详述的完全一样——npm 在哪里工作，但随后随机完全停止工作——我尝试了很多相同的人们在这里建议的东西没有运气。

最终为我做的伎俩，就像这听起来一样简单/愚蠢，是：

```
source ~/.bash_profile 
```

我希望我能更好地解释为什么那是灵丹妙药，但至少它有效！

干杯!

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-17T16:23:07.937

将此添加到我的 ./zshrc 文件中对我在 ubuntu 19.10 上有所帮助：

导出 NVM_DIR=~/.nvm [ -s "$NVM_DIR/nvm.sh" ] && 。“$NVM_DIR/nvm.sh”

来源：[https ://superuser.com/questions/1403007/zsh-npm-node-nvm-command-not-found-after-installing-ohmyzsh](https://superuser.com/questions/1403007/zsh-npm-node-nvm-command-not-found-after-installing-ohmyzsh)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-15T10:33:34.360

对于我和其他到达这里的谷歌人来说，问题是在 Ubuntu 上调用 sudo 时，`secure_path`正在使用不包括 NPM 的。

您可以禁用`secure_Path`，这似乎绝对不推荐。因此，我只是将节点 bin 附加到`secure path`，当通过 NVM 安装时，它对我来说看起来像这样

*   # $: 须藤苏

*   # $: 视觉

然后添加`/home/YourUsername/.nvm/versions/node/v8.5.0/bin:`到`secure_path`变量中。

更多信息：[sudo 更改 PATH - 为什么？](https://stackoverflow.com/questions/257616/sudo-changes-path-why)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-03T14:28:55.537

```
curl -L https://npmjs.org/install.sh | sh 
```

我在全新的 Mac OS 安装上尝试过它，它可以工作！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-25T17:35:56.153

所以我遇到了确切的问题（我也是一个从零开始学习的学生），我使用的是 Ubuntu 21.04，并且在重新安装 VSC 并更新 OhMyZSH 之后。节点仍然存在，因为当我这样做时，`node -v`我能够观看当前版本，但`npm -v`它给出了： `zsh: command not found: npm`

我正在检查以前的答案并尝试在将其写入终端时复制粘贴“命令”：`~ sudo nano ~/.zshrc` ，在我开始将隐藏文件检查到“主”文件夹之前，没有任何效果，并且我注意到节点在 LTS 中被“收费”版本，但 NPM 是最新版本，所以我只需将 PATH 更改为最后一个文件夹，**现在它又可以工作**了。最终结果对我来说是这样的： `export PATH="$PATH:/home/myLaptopName/.nvm/versions/node/v17.0.1/bin"` 所以我的建议是检查你是否已经有Node：`node -v`以了解版本，你也可以使用：找到目录路径，`whereis node`然后开始制作一些目录考古，直到找到*npm*文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-27T13:16:17.037

我使用了以下命令，并且在 ubuntu 中有效

```
export NVM_DIR=~/.nvm
 [ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-19T23:15:39.080

尝试通过 Nodesource 再次安装节点和 npm。按着这些次序：

1.  **通过以具有 sudo 权限的用户**身份运行以下`curl` 命令来启用 NodeSource 存储库：

     **curl -sL [https://deb.nodesource.com/setup_12.x](https://deb.nodesource.com/setup_12.x) | 须藤 -E bash -** 

 **该命令会将 NodeSource 签名密钥添加到您的系统，创建一个 apt 源存储库文件，安装所有必要的软件包并刷新 apt 缓存。

如果您需要安装其他版本，例如 14.x，只需更改`setup_12.x`为`setup_14.x`

2.  启用 NodeSource 存储库后，通过键入以下命令安装 Node.js 和 npm：

    sudo apt install nodejs

*nodejs 包包含 node 和 npm 二进制文件。*

通过打印它们的版本来验证 Node.js 和 npm 是否已成功安装：

```
node --version and npm --version 
```

参考：[https ://linuxize.com/post/how-to-install-node-js-on-ubuntu-18.04/](https://linuxize.com/post/how-to-install-node-js-on-ubuntu-18.04/)**

# ios - iOS 何时何地为视图控制器获取服务器数据

> ID：15777662
> 
> 赞同：1
> 
> 时间：2013-04-03T02:03:58.420
> 
> 标签：ios, uiviewcontroller

我有一个视图控制器，它需要显示从服务器中提取的数据。

通常我通过服务器 api 适配器单例从这个视图控制器中加载我需要的数据。

但最近我一直在想，也许最好从 VC 外部加载数据，然后在有新数据可用时告诉 VC。这样 VC 不依赖于服务器获取代码。

或者换句话说：

现在

1.  介绍 VC
2.  在 VC 的 viewDidLoad 中调用服务器 api 单例并获取数据

选择

1.  调用服务器 api 单例并获取数据
2.  介绍 VC
3.  当服务器数据准备好后，告诉 VC 并传入数据

根据您的经验，哪种方法更好，为什么？还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:11:05.383

我更喜欢先呈现 viewController，然后获取数据，最后在 viewController 上显示数据。在获取数据时，您可以在 VC 上放置加载状态 HUD，用户始终知道您的应用程序正在运行。

你的第二种方式有一个问题，先获取数据然后呈现VC，如果获取数据失败，用户的触摸/点击动作将无效，用户可能会认为你的应用程序不工作。这是一种糟糕的用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:22:58.030

我的基本流程，效果很好。

```
- (void)viewDidLoad
{
    //some code
    [self loadAPIData]
}

-(void)viewWillDisappear:(BOOL)animated
{
    if ([self.navigationController.viewControllers indexOfObject:self]==NSNotFound) {
        //cancel api operation
    }
}

-(void) loadAPIData
{
    //Call Api and show UIActivityIndicatorView
} 
```

# objective-c - 如何初始化一个 NSObject 类

> ID：15777663
> 
> 赞同：1
> 
> 时间：2013-04-03T02:04:07.140
> 
> 标签：objective-c, nsdictionary, nsobject

我正在尝试将一个 NSDictionary 对象传递给我的 NSObject 类，以便我可以在我当前的 viewController 中使用对象元素，但是我在初始化它时遇到了一些麻烦。

这就是我的 NSObject 类方法头的样子

**NSObjectClass.m**

```
- (GetSeriesDictionary *)assignSeriesDictionaryData:(NSMutableDictionary*)seriesDictionaryData {

    // Initialize values
    seriesID = [[seriesDictionaryData valueForKey:@"SeriesID"] integerValue];

    seriesType = [[seriesDictionaryData valueForKey:@"SeriesType"] integerValue];

//... 
```

然后在视图控制器中，我试图像这样使用这个 NSObject

**视图控制器.m**

```
// inside random method
    GetSeriesDictionary *getSeriesObj = [[GetSeriesSeriesDictionary alloc] init];
    getSeriesObj = (GetSeriesSeriesDictionary *)series; // this is where I am having the problem

    NSLog(@"%i", getSeriesObj.seriesID);
//.. 
```

但后来我正在恢复这个错误

```
-[__NSDictionaryM seriesID]: unrecognized selector sent to instance 0x1e8de940 
```

所以我需要一些帮助来初始化我的 NSObject 以便我可以从对象中调用元素，例如

```
getSeriesObj.seriesID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T02:08:04.860

你不能只投射物体。你需要调用`assignSeriesDictionaryData:`你已经创建的。

```
// inside random method
GetSeriesDictionary *getSeriesObj = [[GetSeriesSeriesDictionary alloc] init];
[getSeriesObj assignSeriesDictionaryData:series]; 

NSLog(@"%i", getSeriesObj.seriesID);
//.. 
```

另外，您可能已经注意到，我没有 NSObjectClass。该映射更适合 GetSeriesDictionary 本身（您可以创建一个执行此操作的自定义 init）。

# arrays - ArrayIndexOutOfBoundsException：6

> ID：15777665
> 
> 赞同：0
> 
> 时间：2013-04-03T02:04:11.773
> 
> 标签：arrays, exception, bounds, out, slot

```
public boolean horizontal(Populate a, int[][][] ar, int row, int col, int dep)
    {
        ar = new int[6][6][6];
        a.pop(ar);
        for(dep=0;dep<6;dep++)
        {
            for(col=0;col<6;col++)
            {
                for(int count=0;count<5;count++)
                {    
                    int num = ar[row][col][dep];
                    int num1 = ar[row+1][col][dep];
                    if(num==num1)
                    {
                        count1++;
                    }
                    row++;

                }   

            }

        }
        if(count1==5)
            return true;
        else
            return false;
    } 
```

这段代码应该扫描一个 3d 数组以查找 6 的水平行（如老虎机），如果扫描则返回 true，否则返回 false。它编译但是当我尝试运行它时得到一个 ArrayOutOfBoundsException:6 。

```
for(int count=0;count<5;count++) 
```

即使我尝试将上面的这一行更改为下面的内容（就像只是降低循环的距离），它仍然超出范围。

```
 for(int count=0;count<2;count++) 
```

任何建议或解决方案表示赞赏。谢谢你。

如果有帮助的话，这就是我调用该方法的地方。

```
 public class runCheck
    {
        public static void main(String[] args)
        {
            Populate ch = new Populate();
            int[][][] ar = new int[6][6][6];
            ch.pop(ar);
            ArrayList al = new ArrayList();
            scan a = new scan();
            boolean abool = a.horizontal(ch,ar,0,0,0);
            if(abool==true)
                al.add(true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:08:14.347

由于我不知道您如何调用此方法的完整代码，因此我假设问题出在这些行之一

int num = ar[row][col][dep]; int num1 = ar[row+1][col][dep];

行++；

变量 row 可能会超过 5，从而引发数组越界异常。

# ios - 无论如何要将 UIImageView 的 contentMode 从 aspectFill 设置为 aspectFit？

> ID：15777672
> 
> 赞同：5
> 
> 时间：2013-04-03T02:05:00.480
> 
> 标签：ios, animation, uiimageview

```
[UIView animateWithDuration:30.0f delay:0.0f options:UIViewAnimationOptionCurveEaseInOut animations:^{
    v.contentMode = UIViewContentModeScaleAspectFit;
    v.frame = v.superview.bounds;
} completion:^(BOOL finished) {
    [v removeFromSuperview];
}]; 
```

我想要一个 UIImageView 来调整大小和更改 contentMode，但是上面的代码不起作用。它在动画开始时立即更改了 contentMode。

有没有办法让它动起来？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-12-14T10:14:27.450

正如其他人所提到的，没有办法为 contentMode 设置动画。

这个库的存在就是为了解决这个问题！ [https://github.com/patrickbdev/PBImageView](https://github.com/patrickbdev/PBImageView)

```
imageView.contentMode = .scaleAspectFit

UIView.animateWithDuration(1) {
    self.imageView.contentMode = .scaleAspectFill
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T02:29:56.787

基于“ [What Can Be Animated](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html) ”，您不能直接为 contentmode 设置动画。但是，您可以尝试为框架设置动画，以获得与 contentmode 相同的行为。动画完成后，您可以将 contentmode 和 frame 设置回原始状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T02:25:00.157

`UIImageView`从 继承其`contentMode`属性`UIView`。它不是您可以设置动画的属性之一。更多信息可以在[View Programming Guide](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)中找到。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-29T14:21:50.513

为此，您可以在 github 上使用此组件：[https ://github.com/VivienCormier/UIImageViewModeScaleAspect](https://github.com/VivienCormier/UIImageViewModeScaleAspect)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-21T13:49:37.090

是的 contentMode 不能动画，但“center”可以 - 在帧或边界动画不符合要求的情况下将其用于 contentMode 动画仿真

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T02:33:14.963

MishieMoo 是正确的。contentMode 不能动画。我认为你可以改变视图的边界来实现你想要的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-31T07:51:25.440

我认为你需要这个：[https ://github.com/vitoziv/VICMAImageView](https://github.com/vitoziv/VICMAImageView)

您可以像 UIImageView 一样使用 VICMAImageView，并在动画块中为 contentMode 设置动画：

```
[UIView animateWithDuration:0.3
                 animations:^{
                     imageView.contentMode = UIViewContentModeScaleAspectFill;
                 }]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-09T16:41:28.657

我认为，从 iOS 4.0 开始，您可以使用 UIView.transition(...) 为过渡设置动画，如[本文](https://stackoverflow.com/a/46701541/11760652)所述。在 Swift 5 中，它看起来像这样：

```
let contentMode: UIView.ContentMode = imageView.contentMode == .scaleAspectFit ? .scaleAspectFill : .scaleAspectFit
UIView.transition(with: imageView, duration: 0.5,
                  options: .transitionFlipFromBottom,
                  animations: {
                    self.imageView.contentMode = contentMode
                  },
                  completion: nil) 
```

# c# - 检索 Sql FileStream 文件

> ID：15777673
> 
> 赞同：4
> 
> 时间：2013-04-03T02:05:11.930
> 
> 标签：c#, sql-server-2008, filestream

我们在 sql filestream db 中有超过 200gb 的数据。那么，有人可以建议我提取文件流文件的最佳和最快方法是什么？

我打算使用 C# 应用程序来提取文件（通过一个一个循环）。有没有其他可用的方法，或者你们知道如何使用 C# 快速提取文件？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:16:46.893

如果您要提取大量文件（在这种情况下听起来像您），并且您可以访问 SQL 服务器计算机，则只需从磁盘上的文件夹中复制所有文件。

这取决于版本，但您可以在此处为 SQL Server 2008 找到它们：

```
C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA 
```

这将包含所有以 GUID 命名的文件，您可以通过查看 C# 应用程序中的数据库表将其重命名为更具可读性的文件。

如果您无权访问 SQL 服务器机器，那么远程读取它们并保存每个文件可能是可行的方法。只需确保您有足够的带宽并检查并行运行查询是否会提高速度。

有关更多信息，请参阅此链接：

[http://www.codeproject.com/Articles/128657/How-Do-I-Use-SQL-File-Stream](http://www.codeproject.com/Articles/128657/How-Do-I-Use-SQL-File-Stream)

# android - 获取 Android AudioRecord startRecording 时间延迟

> ID：15777678
> 
> 赞同：0
> 
> 时间：2013-04-03T02:06:00.243
> 
> 标签：android, android-mediaplayer, android-audiorecord

我正在使用`AudioRecord`来自[https://github.com/nonameentername/soundtouch-android/blob/master/src/org/tecunhuman/ExtAudioRecorder.java](https://github.com/nonameentername/soundtouch-android/blob/master/src/org/tecunhuman/ExtAudioRecorder.java)的类，但稍作修改。

在方法中，我开始与班级`start()`一起录制。`AudioRecord`我也开始`MediaPlayer`演奏器乐。为了让人声和乐器在服务器上的正确位置混合，我发送乐器延迟以在开始时用静音填充乐器（beatDelayInSeconds -`MediaPlayer`从调用开始到实际播放的延迟，因为当有延迟时启动媒体播放器）。

我的逻辑一定是错误的，因为人声和乐器的播放时间在设备上是关闭的。与演奏乐器时相比，有时录音会太快，有时会太慢。有什么建议么。任何帮助将不胜感激。

为了更好的解释：

录音开始

|----------------------------------------|

Beat/Instrumental 之后开始播放

[X]|--------------------------------------------- -|

我正在尝试查找 X，以便可以将其作为 beatDelayInSeconds 发送到 startPlayback() 方法并发送到服务器。X 是从声音开始录制到节拍实际开始播放之间的时间。目前在我的 startPlayback() 方法中，同时播放节拍和人声，它们不像录制时那样同步。希望这是有道理的。

注意：我不得不为一些 Jelly Bean 设备放置延迟处理程序，因为`AudioRecord`没有调用监听器。

```
public void start()
{
    if (state == State.READY)
    {
        if (rUncompressed)
        {
            payloadSize = 0;
            RecordReadDelayInSeconds = 0;
            RecordDelayInSeconds = 0;

            mPlayer = new MediaPlayer();

            try {

                mPlayer.setDataSource(mp3Path);

                mPlayer.prepare();

            } catch (IllegalArgumentException e) {e.printStackTrace();} 
              catch (SecurityException e) {e.printStackTrace();} 
              catch (IllegalStateException e) {e.printStackTrace();} 
              catch (IOException e) { e.printStackTrace();}

            final long recordstarted = System.nanoTime() + 1500000000; //handler delay

            audioRecorder.startRecording();

            //Fix for recording issue with Samsung s3 Sprint phones.Doing a delayed first read
              new Handler().postDelayed(new Runnable() {                    
                   @Override
                    public void run() {

                       long recordstopped = System.nanoTime();

                        long recordDelay = recordstopped - recordstarted;

                        double RecordDelayInSeconds = recordDelay / 1000000.0;

                        Log.i("StartRecording() Delay in seconds",
                                String.valueOf(RecordDelayInSeconds));

                        long recordreadstarted = System.nanoTime();

                        int bytesReceived = audioRecorder.read(buffer, 0, buffer.length);
                        Log.d(TAG,"Delayed first read: bytes recieved "+ bytesReceived);

                        long recordreadstopped = System.nanoTime();

                        long recordreadDelay = recordreadstopped - recordreadstarted;

                        RecordReadDelayInSeconds = recordreadDelay / 1000000.0;

                        Log.i("Record read() Delay in seconds",
                                String.valueOf(RecordReadDelayInSeconds));

                        long mediastarted = System.nanoTime();

                        mPlayer.start();

                        long mediastopped = System.nanoTime();

                        long beatDelay = mediastopped - mediastarted;

                        beatDelayInSeconds = 0;

                        beatDelayInSeconds = (beatDelay) / 1000000000.0;

                        Log.i("Beat Delay in seconds",
                                String.valueOf(beatDelayInSeconds));

                    }
                }, 1500);
} 
```

这是用户在向服务器发送信息之前收听的播放代码。它首先开始播放用户刚刚录制的 wav，然后根据其他方法的 beatDelayInSeconds 变量播放器乐。

```
private void startPlayback() {

    wavPlayer.start();
    RefreshHandler mp3PlaybackHandler = new RefreshHandler();
            mp3PlaybackHandler.sleep((long) (beatDelayInSeconds * 1000));

}

class RefreshHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        mp3Player.start();
    }

    public void sleep(long delayMillis) {
        this.removeMessages(0);
        Log.i(TAG, "Beat delayed for " + delayMillis + " milliseconds");
        sendMessageDelayed(obtainMessage(0), delayMillis);
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:22:23.843

我不明白“**时间总是关闭**”？这是什么意思？

我对您的问题和描述不是很清楚，但这是真的：您想在一段时间后推迟执行代码块吗？

如果是这种情况，您必须考虑是否**`new Handler().postDelayed(..)`**在另一个 UI 线程中调用了您的。如果这是一个活动的过程，试试这个：

```
your_activity_instance.runOnUiThread(new Runnable() 
{
            @Override
            public void run() 
            {
               //delay with thread
               try{
                   Thread.sleep(1500);
               }catch(.....)
               {..}

               //your work load here
            }
}); 
```

笔记：

*   Handler.postDelayed() 不会为您的代码块创建单独的线程，而只会将带有计时器标签的新消息（与您的 Runnable 实例相关）附加到当前线程的消息队列中。

*   activity.runOnUiThread() 做类似的事情，但**`Runnable.run()`**必须等到系统返回到活动 UI 线程然后才被执行。当您想在其子线程中执行某些活动的工作时，这很有帮助。

**修改问题的更新：**

我可能理解你的意图：试图同时**`wavPlayer.start()`**执行**`mp3Player.start()`**；但是您当前的解决方案并不好，甚至是不可能的：

*   在您使用处理程序的同一线程中，您几乎不会同步 2 个函数（正如我提到的，handler.run() 不会产生分离的线程）。

*   您无法确定确切的时间戳，**`hanler.run()`**因为系统控制何时将消息附加到队列，延迟发布是一个相对值。

我建议的解决方案：

*   您为每个玩家生成一个单独的线程。

*   在每个线程 start() 之前，您标记时间戳（可能使用毫秒，而不是使用 nano 的精度）

*   在稍后调用的第二个线程中，您还将时间戳的 DELTA 传递给它（标记之间的差异）。然后使用**`Thread.Sleep()`**或**`Handler.postDelayed()`**为您调整同步。

# string - bash echo 中的 *G* 是什么意思？

> ID：15777695
> 
> 赞同：2
> 
> 时间：2013-04-03T02:08:14.997
> 
> 标签：string, bash, replace, echo

不是太频繁，但经常让我烦恼，当我将字符串`*G*`放入变量中并“回显”它时，我会看到一些文件名，通常来自 BASH 指向的目录中的文本文件。我认为这可能是一个自动完成功能，但在这些区域我找不到任何东西。当我用这种字符组合回显一个字符串时，有人能告诉我发生了什么吗？如果可以的话，我想“关闭它”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T02:11:59.880

它是一个通配符，将当前目录中的所有文件`G`与其名称中的字符匹配。

[Bash 参考手册的](http://www.gnu.org/software/bash/manual/html_node/index.html)[这一部分对此](http://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html)进行了解释。

如果你真的想禁用它，你可以使用：

```
set -f 
```

或者

```
set -o noglob 
```

正如[这里所解释的](http://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html)

但这是一个非常有用的功能，我鼓励您保持启用状态并学习使用它。

如果要为单个命令关闭它，可以使用引号或反斜杠转义任何特殊字符：

```
echo '*G*'
echo "*G*"
echo \*G\* 
```

顺便说一下，这个特性不是特定于`echo`命令的；它适用于 shell 中的*所有命令。*例如：

```
ls *.txt 
```

为您提供名称以 . 结尾的所有文件的目录列表`.txt`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:10:30.233

它是一个通配符文件名，`*G*`仅表示任意数量的字符（零个或多个）后跟`G`任意数量的字符。

换句话说，任何带有 a`G`的文件名。如果其中*没有*包含 a 的文件`G`，`bash`只需按照以下成绩单为您提供原始字符串：

```
pax> mkdir qqq ; cd qqq ; touch paxfile

pax> ls -al
total 0
-rw-r--r-- 1 pax pax 0 Apr  3 10:05 paxfile

pax> echo *x*
paxfile

pax> echo *G*
*G* 
```

您可以通过简单地阻止 shell 扩展文件名来*关闭它：*

```
pax> echo '*x*'
*x* 
```

或者，`bash`有一个`GLOBIGNORE`变量，它包含一个以冒号分隔的文件名列表，您*不想*扩展这些文件名，因此您也可以使用它，尽管为任意目录设置它是相当痛苦的（而且，是的，该方法以下不适用于带有嵌入空格的文件，因此，在您抱怨之前，它仅用于演示目的）：

```
pax> GLOBIGNORE=pax

pax> echo *x*
*x*

pax> touch xyzzy twisty ; unset GLOBIGNORE ; GLOBIGNORE=$(echo *x* | tr ' ' ':')

pax> echo $GLOBIGNORE == * # only twisty should expand here (no x)
paxfile:xyzzy == twisty 
```

# vim - 带有 Syntastic 段的 Vim 电力线

> ID：15777705
> 
> 赞同：4
> 
> 时间：2013-04-03T02:10:28.973
> 
> 标签：vim, syntastic, vim-powerline

如何在 Vim 的[电力线](https://github.com/Lokaltog/powerline)页脚中添加[合成](https://github.com/scrooloose/syntastic)段？（*新的电力线，而不是 vim-powerline） Syntastic 文档只说明如何将其添加到标准 Vim 页脚中，而我在*[powerline 文档](https://powerline.readthedocs.org/en/latest/)中找不到如何添加它。

 ** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-12T03:29:29.200

这些指令中的大部分来自电力线的[这个拉取请求（451）](https://github.com/Lokaltog/powerline/pull/451)。

这个拉取请求向电力线添加了一个句法段。由于该段未合并到主电源线树中，因此您需要手动执行补丁。幸运的是，您只需要修改三个文件。（+ 表示添加行/ - 表示删除行）。查看颜色差异的拉取请求。

文件：（`powerline/config_files/colorschemes/vim/default.json`第 28 行）

```
 "line_current_symbol": { "fg": "gray1", "bg": "gray10" },
     "virtcol_current_gradient": { "fg": "dark_GREEN_Orange_red", "bg": "gray10" },
     "col_current": { "fg": "gray6", "bg": "gray10" },
-    "modified_buffers": { "fg": "brightyellow", "bg": "gray2" }
+    "modified_buffers": { "fg": "brightyellow", "bg": "gray2" },
+    "syntastic_segment": { "fg": "brightestred", "bg": "gray2", "attr": ["bold"] }
   },
   "mode_translations": {
     "nc": { 
```

* * *

文件：（`powerline/config_files/colorschemes/vim/default.json`第 68 行）

```
 "groups": {
         "mode": { "fg": "darkestcyan", "bg": "white", "attr": ["bold"] },
         "background:divider": { "fg": "darkcyan", "bg": "darkestblue" },
-        "branch:divider": { "fg": "darkcyan", "bg": "darkblue" }
+        "branch:divider": { "fg": "darkcyan", "bg": "darkblue" },
+        "syntastic_segment": { "fg": "white", "bg": "darkestblue", "attr": ["bold"] }
       }
     },
     "v": { 
```

* * *

文件：powerline/config_files/colorschemes/vim/solarized.json（第 27 行）

```
 "line_current":             { "fg": "gray13", "bg": "lightyellow", "attr": ["bold"] },
     "line_current_symbol":      { "fg": "gray13", "bg": "lightyellow" },
     "virtcol_current_gradient": { "fg": "GREEN_Orange_red", "bg": "gray10" },
-    "col_current":              { "fg": "azure4", "bg": "lightyellow" }
+    "col_current":              { "fg": "azure4", "bg": "lightyellow" },
+    "syntastic_segment":        { "fg": "red", "bg": "royalblue5", "attr": ["bold"] }
   },
   "mode_translations": {
     "nc": { 
```

* * *

文件：powerline/config_files/colorschemes/vim/solarized.json（第 65 行）

```
 "line_percent_gradient":  { "fg": "oldlace", "bg": "gray61" },
         "line_current":           { "fg": "gray13", "bg": "oldlace", "attr": ["bold"] },
         "line_current_symbol":    { "fg": "gray13", "bg": "oldlace" },
-        "col_current":            { "fg": "azure4", "bg": "oldlace" }
+        "col_current":            { "fg": "azure4", "bg": "oldlace" },
+        "syntastic_segment":      { "fg": "lightyellow", "bg": "darkgreencopper", "attr": ["bold"] }
       }
     },
     "v": { 
```

* * *

文件：（`powerline/segments/vim.py`第 23 行）

```
 'expand': vim_get_func('expand', rettype=str),
   'bufnr': vim_get_func('bufnr', rettype=int),
   'line2byte': vim_get_func('line2byte', rettype=int),
+  'exists': vim_get_func('exists', rettype=int),
 }

 vim_modes = { 
```

* * *

在最后`powerline/segments/vim.py`添加以下函数。（确保使用制表符来缩进函数。您正在修改 python 文件缩进很重要）

```
@window_cached
def syntastic_segment(pl):
    '''Return the syntastic statusline flag
    '''
    if int(vim_funcs['exists']('*SyntasticStatuslineFlag')) > 0:
        syntastic_flag_func = vim_get_func('SyntasticStatuslineFlag', rettype=str)
        return [{
            'contents': str(syntastic_flag_func()),
        }]
    else:
        return None 
```

* * *

完成所有这些更改后，您现在需要打开该段。一种方法是编辑配置文件`~/.config/powerline/themes/vim/default.json`

在该部分`segments:`中，将以下内容放在右侧或左侧部分中。

```
{
    "name": "syntastic_segment",
    "before": " "
}, 
```

在所有这些更改之后，您现在应该能够看到电力线段上的综合错误输出。

* * *

故障排除：

*   如果您在 json 中引入解析错误，您可以启动 vim 以`vim --noplugin`在没有插件的情况下启动 vim 电源线不会尝试解析文件。
*   确保 json 的逗号位于正确的位置。
*   确保在编辑 python 文件时使用制表符而不是空格。*

# java - XMLEncoder 跳过 ActionListener

> ID：15777712
> 
> 赞同：2
> 
> 时间：2013-04-03T02:11:19.947
> 
> 标签：java, swing, actionlistener, instantiationexception, xmlencoder

我有一个用 XMLEncoder 编码的 JButton，一切都很好，直到我尝试添加一个 ActionListener。现在，我收到了这条消息

```
java.lang.InstantiationException: Temp$1
Continuing ...
java.lang.Exception: XMLEncoder: discarding statement JButton.addActionListener(Temp$1);
Continuing ... 
```

有谁知道为什么会发生这种情况，或者如何预防？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:09:01.090

开箱即用`XMLEncoder`只能处理作为 Java Bean 的自定义类，特别是该类必须具有无参数构造函数。匿名内部类（例如您`Test$1`的）在字节码级别没有无参数构造函数，因为编译器在构造函数的参数列表的开头插入了一个不可见的参数，以传递对“包含实例”的类的引用封闭了内部类。

[java.beans 包文档](http://docs.oracle.com/javase/6/docs/api/java/beans/package-summary.html#package_description)恰恰说明了这一点，并建议使用[java.beans.EventHandler](http://docs.oracle.com/javase/6/docs/api/java/beans/EventHandler.html)而不是侦听器的内部类。

# pyrocms - 如何在 PyroCMS / Lex 中包含托管的 JS 文件？

> ID：15777715
> 
> 赞同：0
> 
> 时间：2013-04-03T02:11:26.230
> 
> 标签：pyrocms, pyrocms-lex

要在我的主题中加载文件，我使用`{{ theme:js file="bootstrap.min.js" }}`. 但是如果我想从 CDN 加载一些东西，比如`http://code.jquery.com/jquery-1.9.1.js`.

我试过`{{ theme:js file="http://code.jquery.com/jquery-1.9.1.js" }}`了，但错误出来了。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:25:48.410

您可以像往常一样直接链接到它，而无需使用实际的“标签”。例如，看一下 Pyro 2.2 基本主题中的这个标题部分：

[https://github.com/pyrocms/pyrocms/blob/2.2/develop/addons/shared_addons/themes/base/views/partials/header.html#L33](https://github.com/pyrocms/pyrocms/blob/2.2/develop/addons/shared_addons/themes/base/views/partials/header.html#L33)

（注意这个例子是一个远程 css 文件，但是同样可以使用 js 文件等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T20:11:09.453

为什么要这么做？！

我写信`{{ theme:js }}`是为了帮助人们不需要考虑他们的文件在哪里。如果您尝试包含，`http://code.jquery.com/jquery-1.9.1.js`那么您知道它在哪里。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js" /> 
```

这就是你需要做的。不要想太多。

# c++ - 提取出现在字符串 c++ 中的前两个整数

> ID：15777716
> 
> 赞同：1
> 
> 时间：2013-04-03T02:11:26.423
> 
> 标签：c++, regex, string-parsing

我有一个关于从 C++ 字符串中删除整数的基本问题。我对 c++ 不是特别熟悉，对正则表达式也不是很熟悉。

我有一个字符串，例如

```
string myString = "12 text 345 text" 
```

整数可以是任意长度，文本也可以（它不是固定的）。我需要做的是将第一个整数（12）和第二个整数（345）提取到两个单独的整数对象中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:16:14.890

您可以使用`stringstream`如下：

```
 std::string myString = "12 text 345 text";
 int firstInteger = 0;
 int secondInteger = 0;
 std::string firstString= "";
 std:string secondString="";

 std::stringstream ss(myString);
 ss >> firstInteger >> firstString >> secondInteger >> secondString;
 std::cout << "firstInteger " << firstInteger 
      << "\nSecondInteger " << secondInteger <<std::endl; 
```

它输出：

```
 firstInteger 12
 secondInteger 345 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:17:13.720

做这个

```
stringstream os(myString);
os >> int imp1 >> string dummy >> int imp2;

cout << imp1 << " and " << imp2; 
```

# php - 我在 Symfony 1.4.20 中发送表单时未保存数据

> ID：15777717
> 
> 赞同：1
> 
> 时间：2013-04-03T02:11:31.540
> 
> 标签：php, forms, symfony1, symfony-1.4, symfony-forms

我有一个名为 PersonaForm.class.php 的表单类，这是该类中的代码：

```
class PersonaForm extends BasePersonaForm {

    private $enfermedades_noseleccionadas = array();
    private $antecedentes_noseleccionados = array();
    private $adicciones_noseleccionadas = array();
    private $alteraciones_noseleccionadas = array();
    private $intolerancias_noseleccionadas = array();

    public function configure() {
        $this->widgetSchema['nombres'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Nombres', 'class' => 'span4', 'required' => 'required'));
        $this->widgetSchema['apellidos'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Apellidos', 'class' => 'span4', 'required' => 'required'));
        $this->widgetSchema['edad'] = new sfWidgetFormInputText(array(), array('class' => 'span1'));
        $this->widgetSchema['estatura'] = new sfWidgetFormInputText(array(), array('class' => 'span1'));
        $this->widgetSchema['lugar_nacimiento'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Lugar de Nacimiento', 'class' => 'span4'));
        $this->widgetSchema['urbanizacion_sector'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Urbanización/Sector', 'class' => 'span4'));
        $this->widgetSchema['calle_avenida'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Calle/Avenida', 'class' => 'span4'));
        $this->widgetSchema['edificio_casa'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Edificio/Casa Nro.', 'class' => 'span4'));
        $this->widgetSchema['piso'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Piso', 'class' => 'span4'));
        $this->widgetSchema['apto'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Apartamento', 'class' => 'span4'));
        $this->widgetSchema['zona_postal'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Zona Postal', 'class' => 'span4'));
        $this->widgetSchema['profesion'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Profesión', 'class' => 'span4'));
        $this->widgetSchema['ocupacion'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Ocupación', 'class' => 'span4'));
        $this->widgetSchema['telefono_fijo'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Teléfono Fijo', 'class' => 'span4'));
        $this->widgetSchema['celular'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Celular', 'class' => 'span4'));
        $this->widgetSchema['correo_electronico'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Correo Electrónico', 'class' => 'span4'));
        $this->widgetSchema['empresa'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Empresa', 'class' => 'span4'));
        $this->widgetSchema['urbanizacion_empresa'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Urbanización Empresa', 'class' => 'span4'));
        $this->widgetSchema['telefono_oficina'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Teléfono Oficina', 'class' => 'span4'));
        $this->widgetSchema['fax_oficina'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Fax Oficina', 'class' => 'span4'));
        $this->widgetSchema['persona_recomienda'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Persona que lo recomendó', 'class' => 'span4'));

        $this->widgetSchema['estado_civil'] = new sfWidgetFormSelectRadio(array('choices' => array('d' => 'Divorciado', 'c' => 'Casado', 's' => 'Soltero', 'co' => 'Concubinato'), 'formatter' => array($this, 'RadioFormatterCallback')));
        $this->widgetSchema['sexo'] = new sfWidgetFormSelectRadio(array('choices' => array('m' => 'Hombre', 'f' => 'Mujer'), 'formatter' => array($this, 'RadioFormatterCallback')));

        $this->widgetSchema['estado_id'] = new sfWidgetFormDoctrineDependentSelect(array(
            'model' => 'Estado',
            'add_empty' => 'Seleccione estado',
            'ajax' => true
        ));

        $this->widgetSchema['municipio_id'] = new sfWidgetFormDoctrineDependentSelect(array(
            'model' => 'Municipio',
            'depends' => 'Estado',
            'add_empty' => 'Seleccione municipio',
            'ajax' => true,
            'order_by' => array('nombre', 'asc')
        ));

        $this->widgetSchema['fecha_nacimiento'] = new sfWidgetFormDateTime(array('date' => array('format' => '%day%-%month%-%year%'), 'with_time' => false));

        $this->validatorSchema['estado_id'] = new sfValidatorDoctrineChoice(array('model' => 'Estado'));
        $this->validatorSchema['municipio_id'] = new sfValidatorDoctrineChoice(array('model' => 'Municipio'));
        $this->validatorSchema['correo_electronico'] = new sfValidatorEmail(array('required' => true), array('invalid' => 'La dirección de correo no es vÃ¡lida'));

        $historia_clinica = new Hclinica();
        $historia_clinica->setPersona($this->getObject());
        $this->embedForm('historia_clinica', new HclinicaForm($historia_clinica));

        $antecedentes = Doctrine::getTable('Antecedentes')->findAll();
        foreach ($antecedentes as $antecedente) {
            $personaHasAntecedentes = new PersonaHasAntecedentes();
            $personaHasAntecedentes->setAntecedentes($antecedente);
            $personaHasAntecedentes->setPersona($this->getObject());

            $this->embedForm('antecedente_' . $antecedente->getId(), new PersonaHasAntecedentesForm($personaHasAntecedentes));
        }

        $adicciones = Doctrine::getTable('Adicciones')->findAll();
        foreach ($adicciones as $adiccion) {
            $personaHasAdicciones = new PersonaHasAdicciones();
            $personaHasAdicciones->setAdicciones($adiccion);
            $personaHasAdicciones->setPersona($this->getObject());

            $this->embedForm('adiccion_' . $adiccion->getId(), new PersonaHasAdiccionesForm($personaHasAdicciones));
        }

        $intolerancias = Doctrine::getTable('Intolerancias')->findAll();
        foreach ($intolerancias as $intolerancia) {
            $personaHasIntolerancias = new PersonaHasIntolerancias();
            $personaHasIntolerancias->setIntolerancias($intolerancia);
            $personaHasIntolerancias->setPersona($this->getObject());

            $this->embedForm('intolerancia_' . $intolerancia->getId(), new PersonaHasIntoleranciasForm($personaHasIntolerancias));
        }

        $enfermedades = Doctrine::getTable('Enfermedades')->findAll();
        foreach ($enfermedades as $enfermedad) {
            $personaHasEnfermedades = new PersonaHasEnfermedades();
            $personaHasEnfermedades->setEnfermedades($enfermedad);
            $personaHasEnfermedades->setPersona($this->getObject());

            $this->embedForm('enfermedad_' . $enfermedad->getId(), new PersonaHasEnfermedadesForm($personaHasEnfermedades));
        }

        $alteraciones = Doctrine::getTable('Alteraciones')->findAll();
        foreach ($alteraciones as $alteracion) {
            $personaHasAlteraciones = new PersonaHasAlteraciones();
            $personaHasAlteraciones->setAlteraciones($alteracion);
            $personaHasAlteraciones->setPersona($this->getObject());

            $this->embedForm('alteracion_' . $alteracion->getId(), new PersonaHasAlteracionesForm($personaHasAlteraciones));
        }
    }

    public function doBind(array $values) {
        $alteraciones = Doctrine::getTable('Alteraciones')->findAll();
        foreach ($alteraciones as $alteracion) {
            if (empty($values['alteracion_' . $alteracion->getId()]['selected'])) {
                $this->alteraciones_noseleccionadas[] = $alteracion->getId();
            }
        }

        $adicciones = Doctrine::getTable('Adicciones')->findAll();
        foreach ($adicciones as $adiccion) {
            if (empty($values['adiccion_' . $adiccion->getId()]['selected'])) {
                $this->adicciones_noseleccionadas[] = $adiccion->getId();
            }
        }

        $intolerancias = Doctrine::getTable('Intolerancias')->findAll();
        foreach ($intolerancias as $intolerancia) {
            if (empty($values['intolerancia_' . $intolerancia->getId()]['selected'])) {
                $this->intolerancias_noseleccionadas[] = $intolerancia->getId();
            }
        }

        $enfermedades = Doctrine::getTable('Enfermedades')->findAll();
        foreach ($enfermedades as $enfermedad) {
            if (empty($values['enfermedad_' . $enfermedad->getId()]['selected'])) {
                $this->enfermedades_noseleccionadas[] = $enfermedad->getId();
            }
        }
        return parent::doBind($values);
    }

    //modificar la funcion doSave
    public function doSave($con = null) {
        if (!$this->isNew()) {
            foreach ($this->intolerancias_noseleccionadas as $intolerancia_id) {
                unset($this->embeddedForms["intolerancia_" . $intolerancia_id]);
                Doctrine::getTable('PersonaHasIntolerancias')->createQuery()->delete()->where("id_persona = ? and id_intolerancias = ?", array($this->getObject()->getId(), $intolerancia_id))->execute();
            }

            foreach ($this->adicciones_noseleccionadas as $adiccion_id) {
                unset($this->embeddedForms["adiccion_" . $adiccion_id]);
                Doctrine::getTable('PersonaHasAdicciones')->createQuery()->delete()->where("id_persona = ? and id_adiciones = ?", array($this->getObject()->getId(), $adiccion_id))->execute();
            }

            foreach ($this->alteraciones_noseleccionadasas as $alteracion_id) {
                unset($this->embeddedForms["alteracion_" . $alteracion_id]);
                Doctrine::getTable('PersonaHasAlteraciones')->createQuery()->delete()->where("id_persona = ? and id_alteraciones = ?", array($this->getObject()->getId(), $alteracion_id))->execute();
            }

            foreach ($this->enfermedades_noseleccionadas as $enfermedad_id) {
                unset($this->embeddedForms["enfermedad_" . $enfermedad_id]);
                Doctrine::getTable('PersonaHasEnfermedades')->createQuery()->delete()->where("id_persona = ? and id_enfermedades = ?", array($this->getObject()->getId(), $enfermedad_id))->execute();
            }
        }
    }

    public function RadioFormatterCallback($widget, $inputs) {
        $rows = array();
        foreach ($inputs as $input) {
            $rows[] = $widget->renderContentTag('label', $input['input'] . $widget->getOption('separator') . $input['label'], array('class' => 'radio inline'));
        }

        return !$rows ? '' : implode($widget->getOption('separator'), $rows);
    }
} 
```

另一个名为 HclinicaForm.class.php 的表单类使用以下代码：

```
class HclinicaForm extends BaseHclinicaForm {

    public function configure() {
        $this->widgetSchema['medicamentos'] = new sfWidgetFormSelectRadio(array('choices' => array('n' => 'No', 's' => 'Sí'), 'formatter' => array($this, 'RadioFormatterCallback')));
        $this->widgetSchema['motivo_consulta'] = new sfWidgetFormSelectRadio(array('choices' => array('c' => 'Celulitis', 's' => 'Sobrepeso', 'f' => 'Flacidez', 'o' => 'Otro'), 'formatter' => array($this, 'RadioFormatterCallback')));

        $this->widgetSchema['padre_vivo'] = new sfWidgetFormSelectRadio(array('choices' => array('s' => 'Sí', 'n' => 'No'), 'formatter' => array($this, 'RadioFormatterCallback')));
        $this->widgetSchema['causa_muerte_padre'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Causa de la muerte', 'class' => 'span3'));

        $this->widgetSchema['madre_vivo'] = new sfWidgetFormSelectRadio(array('choices' => array('s' => 'Sí', 'n' => 'No'), 'formatter' => array($this, 'RadioFormatterCallback')));
        $this->widgetSchema['causa_muerte_madre'] = new sfWidgetFormInputText(array(), array('placeholder' => 'Causa de la muerte', 'class' => 'span3'));

        $this->widgetSchema['recibe_inmunizacion'] = new sfWidgetFormSelectRadio(array('choices' => array('s' => 'Sí', 'n' => 'No'), 'formatter' => array($this, 'RadioFormatterCallback')));

        $this->widgetSchema['operacion_practicadas'] = new sfWidgetFormTextarea(array(), array('placeholder' => 'Escriba las operaciones a las cuales a sido sometido el paciente', 'class' => 'span9', 'rows' => 6));
        $this->widgetSchema['terapias_recibidas'] = new sfWidgetFormTextarea(array(), array('placeholder' => 'Escriba las terapias a las cuales a sido sometido el paciente', 'class' => 'span9', 'rows' => 6));
        $this->widgetSchema['alergias_medicamentes'] = new sfWidgetFormTextarea(array(), array('placeholder' => 'Escriba las alergias a medicamentos del paciente', 'class' => 'span9', 'rows' => 6));

        $this->widgetSchema['edad_primera_menstruacion'] = new sfWidgetFormInput(array(), array('class' => 'span1'));
        $this->widgetSchema['edad_menopausia'] = new sfWidgetFormInput(array(), array('class' => 'span1'));
        $this->widgetSchema['metodo_control_natal'] = new sfWidgetFormInput(array(), array('class' => 'span4'));

        $this->widgetSchema['deporte_practicado'] = new sfWidgetFormInput(array(), array('placeholder' => 'Deporte(s) que practica', 'class' => 'span5'));
        $this->widgetSchema['frecuencia'] = new sfWidgetFormInput(array(), array('placeholder' => 'Frecuencia', 'class' => 'span2'));

        $this->widgetSchema['enfermedad_actual'] = new sfWidgetFormInput(array(), array('placeholder' => 'Enfermedad actual', 'class' => 'span5'));

        $this->widgetSchema['veces_come_x_dia'] = new sfWidgetFormInput(array(), array('placeholder' => 'X', 'class' => 'input-mini'));
        $this->widgetSchema['estados_comida'] = new sfWidgetFormSelectCheckbox(array('choices' => array(1 => 'Es inapetente', 2 => 'Es normal', 3 => 'Muy apetente')));

        $this->widgetSchema['evacua_x_dia'] = new sfWidgetFormInput(array(), array('placeholder' => 'X', 'class' => 'input-mini'));
        $this->widgetSchema['veces_evacua'] = new sfWidgetFormSelectCheckbox(array('choices' => array('1' => 'Diaria', '2' => 'Interdiaria')));

        $this->widgetSchema['veces_orina_x_dia'] = new sfWidgetFormInput(array(), array('placeholder' => 'X', 'class' => 'input-mini'));
        $this->widgetSchema['cantidad_orina_x_dia'] = new sfWidgetFormSelectCheckbox(array('choices' => array(1 => 'Poca', 2 => 'Normal', 3 => 'Abundante')));

        $this->widgetSchema['sudoracion'] = new sfWidgetFormSelectCheckbox(array('choices' => array(1 => 'Escasa', 2 => 'Normal', 3 => 'Abundante')));

        $this->widgetSchema['horas_duerme'] = new sfWidgetFormSelectCheckbox(array('choices' => array(1 => 'Leve', 2 => 'Normal', 3 => 'Profundo')));

        $this->widgetSchema['menstruacion'] = new sfWidgetFormSelectCheckbox(array('choices' => array(1 => 'Regular', 2 => 'Irregular')));

        $this->widgetSchema['flujo'] = new sfWidgetFormSelectCheckbox(array('choices' => array(1 => 'Escaso', 2 => 'Normal', 3 => 'Abundante')));

        // These validators need to be checked because it's failing
        $this->validatorSchema['menstruacion'] = new sfValidatorPass();
        $this->validatorSchema['horas_duerme'] = new sfValidatorPass();
        $this->validatorSchema['veces_evacua'] = new sfValidatorPass();
        $this->validatorSchema['estados_comida'] = new sfValidatorPass();
        $this->validatorSchema['flujo'] = new sfValidatorPass();
        $this->validatorSchema['sudoracion'] = new sfValidatorPass();
        $this->validatorSchema['cantidad_orina_x_dia'] = new sfValidatorPass();
    }

    public function RadioFormatterCallback($widget, $inputs) {
        $rows = array();
        foreach ($inputs as $input) {
            $rows[] = $widget->renderContentTag('label', $input['input'] . $widget->getOption('separator') . $input['label'], array('class' => 'radio inline'));
        }

        return !$rows ? '' : implode($widget->getOption('separator'), $rows);
    }

} 
```

当我发送表单时，没有保存任何数据，我被重定向到`http://his.devserver/frontend_dev.php/persona/edit/id/`这个错误

> 404 | 未找到 | sfError404Exception 对象角色不存在 ()。
> 
> ```
> stack trace
> at ()
> in SF_ROOT_DIR/lib/vendor/symfony/lib/action/sfAction.class.php line 89 ...
>   {
> 
>     if (!$condition)
> 
>     {
> 
>       throw new sfError404Exception($this->get404Message($message));
> 
>     }
> 
>   }
> 
> at sfAction->forward404Unless(, 'Object persona does not exist ().')
> in SF_ROOT_DIR/apps/frontend/modules/persona/actions/actions.class.php 
> ```
> 
> 第 31 行 ... 在 SF_ROOT_DIR/lib/vendor/symfony/lib/action/sfActions.class.php 中的 personaActions->executeEdit(object('sfWebRequest')) 第 60 行 ... 在 sfActions->execute(object(' SF_ROOT_DIR/lib/vendor/symfony/lib/filter/sfExecutionFilter.class.php 中的 sfWebRequest')) 第 92 行 ...在 SF_ROOT_DIR/lib/vendor/symfony/lib 中的 sfExecutionFilter->executeAction(object('personaActions')) /filter/sfExecutionFilter.class.php 第 78 行 ... 在 SF_ROOT_DIR/lib/vendor/symfony/lib/filter/sfExecutionFilter.class 中的 sfExecutionFilter->handleAction(object('sfFilterChain'), object('personaActions'))。 php 第 42 行 ... 在 SF_ROOT_DIR/lib/vendor/symfony/lib/filter/sfFilterChain.class.php 第 53 行中的 sfExecutionFilter->execute(object('sfFilterChain')) ...在 SF_ROOT_DIR/lib/vendor/symfony/lib/filter/sfBasicSecurityFilter.class.php 第 72 行中的 sfFilterChain->execute() ... 在 SF_ROOT_DIR/lib/vendor/ 中的 sfBasicSecurityFilter->execute(object('sfFilterChain')) symfony/lib/filter/sfFilterChain.class.php 第 53 行 ... 在 SF_ROOT_DIR/lib/vendor/symfony/lib/filter/sfRenderingFilter.class.php 中的 sfFilterChain->execute() 第 33 行 ... 在 sfRenderingFilter-> SF_ROOT_DIR/lib/vendor/symfony/lib/filter/sfFilterChain.class.php 第 53 行中的 execute(object('sfFilterChain')) ... 在 SF_ROOT_DIR/lib/vendor/symfony/lib/ 中的 sfFilterChain->execute()控制器/sfController.class.php 第 238 行 ... 在 sfController->forward('persona', 'edit') 在 SF_ROOT_DIR/lib/vendor/symfony/lib/controller/sfFrontWebController.class.php 第 48 行 ...在 SF_ROOT_DIR/lib/vendor/symfony/lib/util/sfContext.class.php 行中的 sfFrontWebController->dispatch() 170 ... 在 SF_ROOT_DIR/web/frontend_dev.php 第 13 行中的 sfContext->dispatch() ...

我检查日志并看到：

> 10 Doctrine_Connection_Statement 执行：SELECT p.id AS p_ *id, p.sexo AS* p_sexo, p.nombres AS p_ *nombres, p.apellidos AS* p_apellidos, p.fecha_nacimiento AS p__fecha_nacimiento, p.edad AS p_ *edad, p.estatura AS p* _estatura, p.lugar_nacimiento AS p__lugar_nacimiento, p.estado_civil AS p__estado_civil, p.direccion AS p__direccion, p.urbanizacion_sector AS p__urbanizacion_sector, p.calle_avenida AS p__calle_avenida, p.edificio_casa AS p__edificio_casa, p.piso AS p_ *piso, p. p* _apto, p.zona_postal AS p__zona_postal, p.profesion AS p_profesion, *p.ocupacion AS p*_ocupacion, p.telefono_fijo AS p__telefono_fijo, p.celular AS p__celular, p.correo_electronico AS p__correo_electronico, p.empresa AS p__empresa, p.urbanizacion_empresa AS p__urbanizacion_empresa, p.telefono_oficina AS p__telefono_oficina, p.fax_oficina AS p__fax_oficina, p.persona_recomienda AS p__persona_recomienda, p.estado_id AS p__estado_id, p.municipio_id AS p__municipio_id FROM persona p WHERE (p.id = ?) LIMIT 1 - ()
> 
> ```
> 11   sfError404Exception    Object persona does not exist (). 
> ```

为什么它没有节省任何东西？有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:04:36.773

好的，我发现了我的错误。我想添加`parent::doSave($con)`到我的**doSave**方法中。出于这个原因，该功能没有保存任何内容。谢谢大家，希望解决方案对其他人有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:07:07.783

错误消息看起来很清楚：您没有 Persona 对象类。

请参阅[此 symfony 文档页面](http://symfony.com/legacy/doc/jobeet/1_4/en/03?orm=Doctrine)以使用如下命令行生成模型对象：

```
$ php symfony doctrine:build --model 
```

# magento - 为什么 Magento 会阻止显示根类别

> ID：15777718
> 
> 赞同：1
> 
> 时间：2013-04-03T02:11:40.080
> 
> 标签：magento, categories, layered-navigation

Magento`categoryController::viewAction()`调用了明确拒绝显示根类别的类别 Helper。

```
public function canShow($category){
...
if (!$category->isInRootCategoryList()) {
        return false;
} 
```

除了性能之外，是否有特定原因会阻止显示此类别？

我们的客户希望使用分层导航过滤器在一个页面上显示所有产品，并且使用根类别`isAnchor = true`将是理想的。

# python - 控制台窗口失去焦点时如何检测按键

> ID：15777719
> 
> 赞同：4
> 
> 时间：2013-04-03T02:11:40.230
> 
> 标签：python, winapi, msvcrt

我的应用程序使用`win32api.mouse_event`. 这会导致我的窗口失去焦点，所以我无法检测到按键使用`msvcrt.kbhit.`

我的问题是，如何在控制台窗口不可见/不活动的情况下实现这样的事情？

编辑：

这是示例代码。这只是一个基本的控制台版本。如果控制台消失，请将其设置为保持在顶部。一旦它在控制台外（100,100）单击，按 Esc 键将不会跳出循环。对于这样的问题，如何实现中断？

```
import msvcrt, win32api, win32con

pixelx = 100
pixely = 100

win32api.SetCursorPos((pixelx,pixely))
win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN,pixelx,pixely,0,0)
win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP,pixelx,pixely,0,0)

while 1:
    print 'Testing..'
    # body of the loop ...
    if msvcrt.kbhit():
        if ord(msvcrt.getch()) == 27:
            break 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-29T04:31:36.327

我可以看到 3 种可能的方法。第一个是在单击鼠标后将您的窗口置于顶部，但是我认为这不是您想要发生的。

如果您想要的只是 ESC 键，第二种方法应该可以正常工作，那就是使用热键。这可以使用与此类似的方法来完成：

```
import win32con, ctypes, ctypes.wintypes

def esc_pressed():
    print("Escape was pressed.")

ctypes.windll.user32.RegisterHotKey(None, 1, 0, win32con.VK_ESCAPE)

try:
    msg = ctypes.wintypes.MSG()
    while ctypes.windll.user32.GetMessageA(ctypes.byref(msg), None, 0, 0) != 0:
        if msg.message == win32con.WM_HOTKEY:
            esc_pressed()
        ctypes.windll.user32.TranslateMessage(ctypes.byref(msg))
        ctypes.windll.user32.DispatchMessageA(ctypes.byref(msg))
finally:
    ctypes.windll.user32.UnregisterHotKey(None, 1) 
```

有关使用 Python 注册热键的更多信息，您可以查看[此处](http://timgolden.me.uk/python/win32_how_do_i/catch_system_wide_hotkeys.html)。

第三种方法，如果你想捕捉每一个按键，你必须使用它，就是设置一个低级键盘钩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-25T07:18:26.017

可能这个会起作用。

```
import win32api
while True:
     state = win32api.GetKeyState(117)  #F6
     while state:
          state = win32api.GetKeyState(117)
          #do something 
```

如果按 F6，即使控制台不可见，脚本也会停止，然后再按一次 F6 即可恢复。希望这有帮助！

# c# - 在消息框 C# 中的列表框中显示项目

> ID：15777721
> 
> 赞同：1
> 
> 时间：2013-04-03T02:11:45.357
> 
> 标签：c#, listbox

我正在编写一个 Windows 窗体应用程序，该应用程序需要我在消息框中打印列表框的项目并且很好。. . 这是我所拥有的：

```
private void btnDisplay_Click(object sender, EventArgs e)
{
    StringBuilder str = new StringBuilder();
    foreach (object selectedItem in ListBoxCondiments.Items)
    {
        str.AppendLine(ListBoxCondiments.Items.ToString());
    }
    MessageBox.Show("Your made-to-order Burger will include:" + str, "Custom Burger!");
} 
```

结果，我收到了一个带有字符串的消息框，而不是列表中的项目，我收到了 System.Windows.Forms.CheckedListBox + 。. . （直到列表结束）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:13:40.707

你会想要使用 selectedItem.ToString()。

```
str.AppendLine(selectedItem.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:14:11.593

改变这个

```
str.AppendLine(ListBoxCondiments.Items.ToString()) 
```

进入这个

```
str.AppendLine(selectedItem.ToString()) 
```

# lisp - Lisp 中的相等和反向函数

> ID：15777724
> 
> 赞同：-1
> 
> 时间：2013-04-03T02:11:55.173
> 
> 标签：lisp, common-lisp

我是 Common Lisp 的新手，正在学习教程并且无法理解

```
 (equal '(reverse (a b)) '(b a))) 
```

返回零。

非常感谢您的帮助。

M。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T02:19:01.427

在 lisp 中引用会阻止对 s-exp 的评估并将其作为函数传递。

因此，您将非评估函数 '(reverse (ab)) 与列表 '(ab)

如果您将代码更改为

```
(equal (reverse '(a b)) '(b a)) 
```

(reverse '(ab)) 将产生 '(ba)，因此相等比较将返回 true。

# c# - 调用 Expression.Call

> ID：15777730
> 
> 赞同：1
> 
> 时间：2013-04-03T02:12:51.453
> 
> 标签：c#, linq, expression

我有：

```
class X<t1>
{
   class Y<t2>
   {

      public Y<t2> Skip(int count)
      {
          var mi = (MethodInfo)MethodBase.GetCurrentMethod();
          var f = Expression.Call(null, mi,Expression.Constant(count));
          var x = this.Provider.CreateQuery(f);
          return something_else;
      }
   }
} 
```

我得到 Y`1 Skip(Int32) 包含通用参数。

不能使方法通用，所以我可以调用 method.MakeGenericType

关于如何创建 Expression.Call 的任何想法？

我也试过：

```
var f = Expression.Call(typeof(Y<>), "Skip", new Type[] { gt }, Expression.Constant(count)); 
```

这次我得到：

`1+Y`类型“X 1[t1,t2]”上不存在方法“Skip” 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:35:33.390

这似乎有效：

```
var f = Expression.Call(
     Expression.Constant(this), 
     "Skip", 
     Type.EmptyTypes, 
     Expression.Constant(count)); 
```

顺便说一句，`Type.EmptyTypes`相当于`new Type[0]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:36:50.313

如[文档所述](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getcurrentmethod.aspx)，GetCurrentMethod 不填写拥有当前方法的类型的通用参数。

相反，一个选项是使用：

```
MethodInfo mi = typeof(X<t1>.Y<t2>).GetMethod("Skip");
Expression f = Expression.Call(null, mi, Expression.Constant(count)) 
```

此外，第一个参数不应该是`null`，但这是一个单独的问题。

# ruby-on-rails - 如何使用FactoryGirl工厂建立开发数据库？

> ID：15777731
> 
> 赞同：10
> 
> 时间：2013-04-03T02:12:52.377
> 
> 标签：ruby-on-rails, development-environment, factory-bot

我已经为测试 Rails 项目构建了一些精心制作的 FactoryGirl 工厂定义，为此它们运行良好。

我现在想将相同的定义与脚本（Ruby、Rake 等）一起使用，以使用大量有效、正确关联的记录来填充 Rails 开发数据库。

我确定这是一项常见任务，但找不到有用的参考。

什么是最佳实践？如何进行？

说工厂在`spec/factories.rb`。接下来是什么？谢谢。

**更新**

还在挣扎。尝试将此作为一项`rake`任务。

```
require 'factory_girl'
require 'spec/factories'

namespace :db do
  desc "Fill database with trial data"
  task :populate => :environment do
    Rake::Task['db:reset'].invoke
    50.times do |n|
      # Make a consistent set of related records.
      team = FactoryGirl.create(:team, :completed)
      team.members << FactoryGirl.create(:member)
      FactoryGirl.create(:design, :team => team)
    end
  end
end 
```

唉，这找不到我的`factories.rb`：

```
rake aborted!
cannot load such file -- spec/factories 
```

在其他任何地方，项目根相关的要求路径都可以正常工作。什么是秘密握手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:31:50.860

正如我在评论中提到的，这通常是种子数据的工作。如果您希望仅将这些数据植入您的开发数据库，​​您可以`seed`通过执行以下操作来修改 Rake 任务：

```
namespace :db do
  task :seed => :environment do
    env_seed_file = File.join(Rails.root, 'db', 'seeds', "#{Rails.env}.rb")
    load(env_seed_file) if File.exist?(env_seed_file)
  end
end 
```

这将使您能够为每个环境创建一个文件（即 db/seeds/development.rb）。[您还可以使用像种子库](https://github.com/james2m/seedbank)这样的 gem ，它为您提供环境特定的种子文件以及 Rails 中已有的一些其他附加内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T20:49:22.937

@Gene您即将解决这个难题。我认为你离这个只有一条路。我没有使用 RSpecs，路径可能会略有不同，但您大致了解。

```
namespace :db do
  desc "Fill database with trial data"
  task :populate => :environment do
    require 'factory_girl'
    require Rails.root + 'spec/factories'

    Rake::Task['db:reset'].invoke
    Rake::Task['db:seed'].invoke
    50.times do |n|
      # Make a consistent set of related records.
      team = FactoryGirl.create(:team, :completed)
      team.members << FactoryGirl.create(:member)
      FactoryGirl.create(:design, :team => team)
    end
  end
end 
```

我只为您提供所需工厂文件的路径，并在您重置后添加 rake db:seed。

DB 种子不是在开发时填充您的数据库，而是使用适当的信息引导您的新应用程序以便能够正常工作。IE。创建管理员用户和默认状态

# python - python 2.7.3 while循环

> ID：15777741
> 
> 赞同：4
> 
> 时间：2013-04-03T02:13:43.160
> 
> 标签：python

我对python很陌生。我需要反复循环，要求用户选择一个选项，然后运行命令并重复，直到用户选择退出。如果用户选择任何其他选项，程序必须不断要求他们选择一个值，直到他们选择一个正确的值。到目前为止，我的计划进展不顺利。如果可能的话，我想保持 while,if,elif 条件。有人可以提供帮助吗？非常感谢！

```
print """
How do you feel today?
1 = happy
2 = average
3 = sad
0 = exit program
"""

option = input("Please select one of the above options: ")
while option > 0 or option <=3:
    if option > 3:
        print "Please try again"
    elif option == 1:
        print "happy"
    elif option == 2:
        print "average"
    elif option == 3:
        print "sad"
    else:
        print "done" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T02:18:17.257

该`break`命令将为您退出一个循环 - 但是，就开始控制流而言，它也不是真正推荐的。但是请注意，用户永远不能输入新值，因此您将陷入无限循环。

也许试试这个：

```
running = True

while running:
    option = input("Please select one of the above options: ")
    if option > 3:
        print "Please try again"
    elif option == 1:
        print "happy"
    elif option == 2:
        print "average"
    elif option == 3:
        print "sad"
    else:
        print "done"
        running = False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T02:26:51.927

这就是我修改它以达到预期结果的方式。你在哪里关闭但 if 和 else 不应该在循环内:)。

```
print """
How do you feel today?
1 = happy
2 = average
3 = sad
0 = exit program
"""

option = input("Please select one of the above options: ")
while option >3:
    print "Please try again"
    option = input("Please select one of the above options: ")

if option == 1:
    print "happy"
elif option == 2:
    print "average"
elif option == 3:
    print "sad"
else:
    print "done" 
```

请注意，您可以随时使用 break 来停止循环

谢谢本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T02:17:03.610

```
import sys
option = int(input("Please select one of the above options: "))
while not option in (0, 1, 2, 3):
    option = int(input("Please select one of the above options: ")
    if option == 0: sys.exit()
    else: print "Please try again"
if option == 1:
        print "happy"
elif option == 2:
        print "average"
elif option == 3:
        print "sad" 
```

逻辑是，如果选项不是 0、1、2 或 3，程序会一直要求输入。如果它在该范围内，则循环结束并打印结果。如果输入为 0，则程序使用 结束`sys.exit()`。

或者，您可以使用[字典](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)来创建更简单、更短的程序：

```
import sys
userOptions = {1: 'happy', 2: 'average', 3: 'sad'}
option = int(input("Please select one of the above options: "))
while not option in (0, 1, 2, 3):
    option = int(input("Please select one of the above options: ")
    if option == 0: sys.exit()
    else: print "Please try again"
print userOptions[option] 
```

# c# - 比较运算符如何与 null int 一起使用？

> ID：15777745
> 
> 赞同：183
> 
> 时间：2013-04-03T02:14:19.160
> 
> 标签：c#, nullable

我开始学习可空类型并遇到以下行为。

在尝试 nullable int 时，我看到比较运算符给了我意想不到的结果。例如，在我下面的代码中，我得到的输出是**"both and 1 are equal"**。请注意，它也不会打印“null”。

```
int? a = null;
int? b = 1;

if (a < b)
    Console.WriteLine("{0} is bigger than {1}", b, a);
else if (a > b)
    Console.WriteLine("{0} is bigger than {1}", a, b);
else
    Console.WriteLine("both {0} and {1} are equal", a, b); 
```

我希望任何非负整数都大于 null，我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2013-04-03T02:16:48.580

根据[MSDN](http://msdn.microsoft.com/en-us/library/2cf62fcy.aspx) - 它位于“运营商”部分的页面下方：

> 当您对可空类型执行比较时，如果可空类型之一的值是`null`而另一个不是，则所有比较的计算结果`false`都为`!=`

所以两者都`a > b`和`a < b`评估到`false`因为`a`是空的......

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-04-03T02:20:46.747

正如 MSDN 所说

> 当您对可空类型执行比较时，如果其中一个可空类型的值为 null 而另一个不是，则所有比较的结果都为 false，但 !=（不等于）除外。重要的是不要假设因为特定的比较返回 false，相反的情况返回 true。在以下示例中，10 不大于、小于或等于 null。只有 num1 != num2 的计算结果为真。

```
int? num1 = 10;
int? num2 = null;
if (num1 >= num2)
{
    Console.WriteLine("num1 is greater than or equal to num2");
}
else
{
    // This clause is selected, but num1 is not less than num2.
    Console.WriteLine("num1 >= num2 returned false (but num1 < num2 also is false)");
}

if (num1 < num2)
{
    Console.WriteLine("num1 is less than num2");
}
else
{
    // The else clause is selected again, but num1 is not greater than 
    // or equal to num2.
    Console.WriteLine("num1 < num2 returned false (but num1 >= num2 also is false)");
}

if (num1 != num2)
{
    // This comparison is true, num1 and num2 are not equal.
    Console.WriteLine("Finally, num1 != num2 returns true!");
}

// Change the value of num1, so that both num1 and num2 are null.
num1 = null;
if (num1 == num2)
{
    // The equality comparison returns true when both operands are null.
    Console.WriteLine("num1 == num2 returns true when the value of each is null");
}

/* Output:
 * num1 >= num2 returned false (but num1 < num2 also is false)
 * num1 < num2 returned false (but num1 >= num2 also is false)
 * Finally, num1 != num2 returns true!
 * num1 == num2 returns true when the value of each is null
 */ 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2016-12-09T01:09:24.213

总结一下：任何与 null ( `>=`, `<`, `<=`, `>`) 的不等式比较都会返回，`false`即使两个操作数都为 null。IE

```
null >  anyValue //false
null <= null     //false 
```

`==`任何与 null ( , )的相等或不相等比较都`!=`“按预期”工作。IE

```
null == null     //true
null != null     //false
null == nonNull  //false
null != nonNull  //true 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-09-06T06:08:57.937

比较 C# 和 SQL

C#：a=null 和 b=null => a==b => true

SQL：a=null 和 b=null => a==b => false

# java - Java - 如何将对象作为参数传递给该对象类的构造函数

> ID：15777746
> 
> 赞同：0
> 
> 时间：2013-04-03T02:14:28.817
> 
> 标签：java, oop, inheritance

我有一个充当投注者的类，在该类中，投注者可以在创建投注的方法中下注。但是，bet 类的构造函数需要从 bettor 类中获取该 bettor 的相同引用。如何做到这一点？

这是我试图用于此的代码。我意识到对 bettor 类进行了新的引用，但我想无论如何我都会尝试一下

```
public Bet placeBet(Bet.BetType betType, double amount)
{
    if(betType.equals(Bet.BetType.passBet))
    {
        this.bankroll=bankroll-amount;
        return new PassBet(new Bettor(this.name,this.bankroll),amount);
    }
    else if(betType.equals(Bet.BetType.any7))
    {
        this.bankroll=bankroll-amount;
        return new Any7Bet(new Bettor(this.name,this.bankroll),amount);
    }
    else if(betType.equals(Bet.BetType.hard8)||betType.equals(Bet.BetType.hard10))
    {
        this.bankroll=bankroll-amount;
        return new HardWayBet(new Bettor(this.name,this.bankroll),amount);
    }
    return null;
} 
```

而 PassBet 类看起来是这样的（它是 Bet 类的子类，它包含 Bettor 参考和投注金额）。

```
public PassBet(Bettor b, double amount)
{
    super(b,amount);
} 
```

我将如何将原始 Bettor 作为参数传递到我的 PassBet 子类中，然后将其存储在超类 Bet 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:30:50.317

您可以`this`像任何其他参考一样传递给另一个方法/构造函数。例如：

```
public Bet placeBet(Bet.BetType betType, double amount)
{
    if(betType.equals(Bet.BetType.passBet))
    {
        this.bankroll=bankroll-amount;
        return new PassBet(this,amount);
    }
    else if(betType.equals(Bet.BetType.any7))
    {
        this.bankroll=bankroll-amount;
        return new Any7Bet(this,amount);
    }
    else if(betType.equals(Bet.BetType.hard8)||betType.equals(Bet.BetType.hard10))
    {
        this.bankroll=bankroll-amount;
        return new HardWayBet(this,amount);
    }
    return null;
} 
```

顺便说一句，我建议不要`null`在条件都不匹配时返回。例如，考虑抛出一个`IllegalArgumentException`。就像[rcook](https://stackoverflow.com/questions/15777746/java-how-do-you-pass-an-object-as-an-argument-into-a-constructor-from-that-obj/15777893#comment22429959_15777746)指出的那样，`BetType`似乎是一个很好的[enum](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)候选者，在这种情况下，您可以使用[switch](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)而不是 else if 等。这是一个粗略的例子：

```
public enum BetType {
    PASS,
    ANY_7,
    HARD_8,
    HARD_10;
}

...

public Bet placeBet(BetType betType, double amount) {

    final Bet bet;

    switch (betType) {
        case PASS:
            bet = new PassBet(this, amount);
            break;
        case ANY_7:
            bet = new Any7Bet(this, amount);
            break;
        case HARD_8:
        case HARD_10:
            bet = new HardWayBet(this, amount);
            break;
        default:
            throw new IllegalArgumentException("Invalid bet type: " + betType + ".");
    }

    this.bankroll -= amount;

    return bet;
} 
```

这个解决方案仍然可以更加面向对象，例如为什么不提供`BetType`一个创建`Bet`? 我们可以利用多态性：

```
public enum BetType {
    PASS {
        @Override
        public Bet makeBet(Bettor bettor, double amount) {
            return new PassBet(bettor, amount);
        }
    },
    ANY_7 {
        @Override
        public Bet makeBet(Bettor bettor, double amount) {
            return new Any7Bet(bettor, amount);
        }
    },
    HARD_8 {
        @Override
        public Bet makeBet(Bettor bettor, double amount) {
            return new HardWayBet(bettor, amount);
        }
    },
    HARD_10 {
        @Override
        public Bet makeBet(Bettor bettor, double amount) {
            return new HardWayBet(bettor, amount);
        }
    };

    public abstract Bet makeBet(Bettor bettor, double amount);
}

...

public Bet placeBet(BetType betType, double amount) {

    this.bankroll -= amount;

    return betType.makeBet(this, amount);
} 
```

这甚至可能不是最好的解决方案，但我希望它至少为您开辟了一些可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:21:48.023

只需将`this`关键字作为 bettor 实例传递。

# android - 如何为一个 facebook fanpage feed 构建图形 api？

> ID：15777747
> 
> 赞同：0
> 
> 时间：2013-04-03T02:14:34.567
> 
> 标签：android, facebook

下面是获取所有粉丝页面的提要。graph.facebook.com/100005400245816?fields=feed

我如何为一个带有评论和喜欢的 facebook fanpage feed 制作图形 api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:38:52.923

当您列出来自粉丝页面的所有提要时，从该数据中选择**id**以获取详细信息。使用该帖子**ID**来获取包含 3 条评论和喜欢的所有详细信息。

```
https://graph.facebook.com/[id]?access_token=[access_token] 
```

要获得所有评论，您需要使用下面的链接

```
https://graph.facebook.com/[id]/comments?access_token=[access_token] 
```

您可以使用相同的链接来点赞，也可以将**评论**替换为点**赞**

# php - 在网页上包含评论系统

> ID：15777750
> 
> 赞同：0
> 
> 时间：2013-04-03T02:15:31.667
> 
> 标签：php, javascript, html, database, web

所以我开始尝试学习 Web 开发，并且我已经对基本的 HTML/css 非常熟悉，并且我已经制作了一个非常好的示例页面。然而，到目前为止，它只是一个漂亮的、标记过的文本文档，位于我的桌面上。我想包括一个评论系统，在那里我可以作为模拟网络用户给自己写“评论”。我有一个文本框和一个表单来“提交”评论，但没有附加任何内容。我意识到我需要编写某种脚本，javascript 或 php，但是我需要以某种格式保存评论，比如数据库，但我不知道从哪里开始。我应该从哪里开始为桌面上的这个基本网页添加评论系统？（也欢迎推荐书籍）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:20:09.917

有一篇关于如何使用`JQUERY, AJAX and PHP`.

检查这个：[http ://www.9lessons.info/2009/09/comment-system-database-with-jquery.html](http://www.9lessons.info/2009/09/comment-system-database-with-jquery.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:21:04.553

如果您希望开启动态网页的冒险之旅，您将不得不研究某种服务器端语言。今天最流行的很可能是 PHP、ASP.NET 和 Ruby on Rails。Python 也有相当多的框架可用于动态网页。

就个人而言，我是 PHP 和 Python 人。

从 PHP 的经验来看，我非常喜欢现有的 MVC 框架，例如 Codeigniter 和 Laravel。不过，我建议在深入研究其中一个框架之前先阅读有关 PHP 的文档。它将帮助您更好地了解正在发生的事情。如果您了解 OOP，那么 PHP 对您来说会很有意义。

我提到的一些 MVC 框架也使用了允许简单数据库查询的 Active Record。学习 SQL/MySQL 的基础知识将对您有所帮助。

您可以将 JavaScript 的 AJAX 与您的网页结合起来，使它们与 PHP 异步工作，最终获得更好的用户体验。

最后一点，选择要内置的服务器端语言确实没有错误的答案，真的只是个人喜好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T02:54:21.317

一种简单的方法是使用[Disqus](http://disqus.com/)评论服务。

如果你追求的是实施评论的学习经验，当然，这不适合你。但是，如果您只是想快速添加评论，这是一种理想的方法。

# javascript - 缩放：140% 放大safari 中除 svg 元素之外的所有元素

> ID：15777756
> 
> 赞同：1
> 
> 时间：2013-04-03T02:15:46.120
> 
> 标签：javascript, svg, safari, raphael, magnify

我使用 raphael.js 进行绘图，我通过以下方式在页面中添加图像：

`paper = Raphael("manipulate-canvas",0,0, 640, 480)`

`paper.image("assets/irm.jpg", 0, 0, 640, 480)`

当我在 safari 中注入样式表时，样式表包含 css `body {zoom: 140%}`，页面中的所有元素都被放大但 svg 的`<image>`，所以图像不会填充整个 svg（`<svg>`被放大）。在这种情况下，我如何放大 svg`<image>`并使其填充整个 svg。我尝试添加属性`<svg>`，`<image>`如下所示：

`$("svg").attr({height:480,width:640,viewBox:"0 0 640 480",preserveAspectRatio:"xMidYMid meet"})`

`$("svg image").attr({"preserveAspectRatio":"xMidYMid meet",height:480,width:640})`

但它没有用。

有谁知道如何修理它。多谢！！！

# opengl - 在 LWJGL 中绘制法线会影响照明

> ID：15777757
> 
> 赞同：2
> 
> 时间：2013-04-03T02:15:58.123
> 
> 标签：opengl, lwjgl, lighting

我的问题相当简单：在 LWJGL 中绘制法线会导致光源仅应用于模型，直到在初始化后手动更新它。这是照明初始化：

```
static Vector3f lightPosition = new Vector3f(-500f, -100f, 500f);
GL11.glEnable(GL11.GL_LIGHTING);
GL11.glEnable(GL11.GL_LIGHT0);
GL11.glLightModel(GL11.GL_LIGHT_MODEL_AMBIENT, asFloatBuffer(new float[]{0.05f, 0.05f, 0.05f, 1f}));
GL11.glLight(GL11.GL_LIGHT0, GL11.GL_DIFFUSE, asFloatBuffer(new float[]{1.5f, 1.5f, 1.5f, 1f})); 
```

这是我绘制法线的代码（从 Standford Bunny 模型加载）：

```
for (Face f : bunnyModel.faces){
Vector3f n1 = bunnyModel.normals.get((int)f.normal.x - 1);
GL11.glNormal3f(n1.x, n1.y, n1.z);
Vector3f v1 = bunnyModel.vertices.get((int)f.vertex.x - 1);
GL11.glVertex3f(v1.x, v1.y, v1.z);
Vector3f n2 = bunnyModel.normals.get((int)f.normal.y - 1);
GL11.glNormal3f(n2.x, n2.y, n2.z);
Vector3f v2 = bunnyModel.vertices.get((int)f.vertex.y - 1);
GL11.glVertex3f(v2.x, v2.y, v2.z);
Vector3f n3 = bunnyModel.normals.get((int)f.normal.z - 1);
GL11.glNormal3f(n3.x, n3.y, n3.z);
Vector3f v3 = bunnyModel.vertices.get((int)f.vertex.z - 1);
GL11.glVertex3f(v3.x, v3.y, v3.z);
} 
```

我在这里做错了什么？当我禁用法线时，除了模型之外的所有东西都可以正常工作。但是当我启用它们时，兔子会收到光，但其他表面没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:47:54.400

在 OpenGL 中启用光照时，所有多边形将根据其法线进行光照。如果没有为多边形提供法线，则该对象的法线将默认为 vec3 `{0, 0, 1}`。基本上，启用照明，绘制模型，然后禁用照明并绘制场景的其余部分。

计算每个面的法线相当容易，这是我写的一个 getNormal() 函数：

```
//Feel free to use this for whatever you want, no licenses applied or anything.

//p1, p2, p3 - Vertices of triangle
public Vector3f getNormal(Vector3f p1, Vector3f p2, Vector3f p3) {

    //Create normal vector we are going to output.
    Vector3f output = new Vector3f();

    //Calculate vectors used for creating normal (these are the edges of the triangle).
    Vector3f calU = new Vector3f(p2.x-p1.x, p2.y-p1.y, p2.z-p1.z);
    Vector3f calV = new Vector3f(p3.x-p1.x, p3.y-p1.y, p3.z-p1.z);

    //The output vector is equal to the cross products of the two edges of the triangle
    output.x = calU.y*calV.z - calU.z*calV.y;
    output.y = calU.z*calV.x - calU.x*calV.z;
    output.z = calU.x*calV.y - calU.y*calV.x;

    //Return the resulting vector.
    return output.normalise();
} 
```

[[OpenGL 文档]](http://www.opengl.org/wiki/Calculating_a_Surface_Normal)

[[另一个类似的问题]](https://math.stackexchange.com/questions/305642/how-to-find-surface-normal-of-a-triangle)

[[更多关于叉积]](http://freespace.virgin.net/hugo.elias/routines/r_cross.htm)

但是……每张脸的法线看起来有点……不好。如果你想要一个更平滑的结果，你应该使用每个顶点法线。区别如下：

每面： ![你可以看到三角形...](https://i.stack.imgur.com/LzD9z.jpg)

每个顶点： ![在此处输入图像描述](https://i.stack.imgur.com/QuuU1.jpg)

确保不要将每面法线用于立方体之类的东西，立方体是平坦的，而不是弯曲的。Per-Vertex normals 将用于您希望使某些东西看起来更平滑和逼真的情况（皮肤、土豆、枕头等）。

为了计算每个顶点的法线，你基本上平均了连接多边形的所有法线，如下所示：

![这是平均水平](https://i.stack.imgur.com/9l3xF.gif)

如果您碰巧让模型看起来完全是黑色的或者面对您的部分是不可见的，请尝试颠倒将点放入 getNormal() 函数的顺序（或否定法线，错误是由于法线是向内，而不是向外）。

希望这有帮助！

# twitter-bootstrap - Bootstrap 内联表单 - 如何使用固定宽度/跨度？

> ID：15777770
> 
> 赞同：1
> 
> 时间：2013-04-03T02:17:02.580
> 
> 标签：twitter-bootstrap

我有两行或更多行，每行有三个复选框。我希望它们在行之间均匀排列，就像它们在表格列中一样。现在，根据文本标签的长度，它们看起来是交错的。如何模拟每一行的表格列，使布局看起来更有条理？

```
<form id="form-filter" name="form-filter" method="POST" action="/filter" class="form-inline">
                  <fieldset>
                    <legend style="margin-bottom:-10px;">Select up to 6 filters</legend>
                    <div class="control-group">
                      <div class="controls">
                        <label class="checkbox inline">
                          <input id="Medjugorje" name="Medjugorje" type="checkbox" checked>Medjugorje
                        </label>
                        <label class="checkbox inline">
                          <input id="Kibeho" name="Kibeho" type="checkbox">Kibeho
                        </label>
                        <label class="checkbox inline">
                          <input id="Lourdes" name="Lourdes" type="checkbox">Lourdes
                        </label>
                      </div>
                      <div class="controls">
                        <label class="checkbox inline">
                          <input id="Fatima" name="Fatima" type="checkbox">Fatima
                        </label>
                        <label class="checkbox inline">
                          <input id="Secrets" name="Secrets" type="checkbox">Secrets
                        </label>
                      </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Filter</button>
                    <button id="clearButton" type="button" class="btn">Clear</button>
                  </fieldset>
                </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:42:49.317

```
<form id="form-filter" name="form-filter" method="POST" action="/filter">
                  <fieldset>
                    <legend>Select up to 6 filters</legend>
                    <div class="row-fluid">
                      <div class="span12">
                        <label class="checkbox span4">
                          <input id="Medjugorje" name="Medjugorje" type="checkbox" checked>Medjugorje
                        </label>
                        <label class="checkbox span4">
                          <input id="Kibeho" name="Kibeho" type="checkbox">Kibeho
                        </label>
                        <label class="checkbox span4">
                          <input id="Lourdes" name="Lourdes" type="checkbox">Lourdes
                        </label>
                      </div>
                    </div>
                    <div class="row-fluid">
                      <div class="span12">
                        <label class="checkbox span4">
                          <input id="Fatima" name="Fatima" type="checkbox" checked>Fatima
                        </label>
                        <label class="checkbox span4">
                          <input id="Banneux" name="Banneux" type="checkbox">Banneux
                        </label>
                        <label class="checkbox span4">
                          <input id="Beauraing" name="Beauraing" type="checkbox">Beauraing
                        </label>
                      </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Filter</button>
                    <button id="clearButton" type="button" class="btn">Clear</button>
                  </fieldset>
                </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:46:20.277

```
<form id="form-filter" name="form-filter" method="POST" action="/filter">
    <fieldset>
        <legend>
            Select up to 6 filters
        </legend>
        <div class="row-fluid">
            <div class="span4">

                <label class="checkbox">
                    <input id="Medjugorje" name="Medjugorje" type="checkbox" checked>
                    Medjugorje </label>
                <label class="checkbox">
                    <input id="Kibeho" name="Kibeho" type="checkbox">
                    Kibeho </label>
            </div>
            <div class="span4">

                <label class="checkbox">
                    <input id="Lourdes" name="Lourdes" type="checkbox">
                    Lourdes </label>
                <label class="checkbox">
                    <input id="Fatima" name="Fatima" type="checkbox" checked>
                    Fatima </label>
            </div>
            <div class="span4">

                <label class="checkbox">
                    <input id="Banneux" name="Banneux" type="checkbox">
                    Banneux </label>
                <label class="checkbox">
                    <input id="Beauraing" name="Beauraing" type="checkbox">
                    Beauraing </label>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">
            Filter
        </button>
        <button id="clearButton" type="button" class="btn">
            Clear
        </button>
    </fieldset>
</form> 
```

# wordpress - HTML5 Boilerplate .htaccess 缓存破坏不适用于 WordPress

> ID：15777774
> 
> 赞同：9
> 
> 时间：2013-04-03T02:17:09.910
> 
> 标签：wordpress, html5boilerplate

[HTML5 Boilerplate ( http://html5boilerplate.com/](http://html5boilerplate.com/) )的`.htaccess`缓存设置很棒，但我遇到了 JS 和 CSS 版本控制的缓存破坏设置的问题。

```
<IfModule mod_rewrite.c>
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.+)\.(\d+)\.(js|css|png|jpg|gif)$ $1.$3 [L]
</IfModule> 
```

我似乎无法让它与`.htaccess`文件中已经存在的 WordPress 重写设置一起使用。

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.php$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L]
</IfModule> 
```

充其量，我的 JS 文件的重写永远不会发生。在最坏的情况下，它会破坏网站。

任何人都幸运地让它与 WordPress 一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T17:23:41.923

*   确保您的缓存破坏 URL 实际匹配重写模式 (script.0.js)
*   将缓存清除重写规则放在WordPress**之前**
*   如果您可以访问服务器配置并读取日志，请设置`RewriteLog 2`（或更高），然后查看重写日志。他们很难理解，但他们可以给你一些线索。
*   “在最坏的情况下，它会破坏网站。” 如果这意味着您收到 500 服务器错误，请检查您的服务器日志——它会告诉您是否存在重写循环。

将 WordPress 的规则更改为

```
RewriteRule ^[\w/-]+$ /index.php [L] 
```

看看是否有帮助。

> 充其量，我的 JS 文件的重写永远不会发生。

您看到的是 WordPress 的“未找到”响应还是 Apache 的？

> 在最坏的情况下，它会破坏网站。

Apache 服务器错误或 WordPress 错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T22:32:00.357

试试这些

```
<IfModule mod_expires.c>
  ExpiresActive off
</IfModule>
<IfModule mod_headers.c>
  Header unset Cache-Control
</IfModule> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T14:53:47.343

您可以将一些 php.ini 设置嵌入到您的 .htaccess 中，然后测试网站的更改，只是为了测试您的 .htaccess 文件是否工作？

在大多数情况下我都经历过，有一些基于 CentOS 5.5 的系统没有显示的隐藏文件（不知道它是否已知错误）。但是，如果您创建一个具有相同名称的新文件 .htaccess，您将看到与原始文件不同的几行。

只是意味着两者都是两个不同的文件。因此，只需尝试检查哪个与您的网站一起使用。此外，对于压缩 JS 和 CSS 文件，我在这里写了一个非常详细的教程 [http://www.codeandcommand.com/web-based/how-to-optimize-joomla-3-x-pagespeed.html](http://www.codeandcommand.com/web-based/how-to-optimize-joomla-3-x-pagespeed.html)

# java - 为 Windows 查找 javafx jar 文件

> ID：15777777
> 
> 赞同：4
> 
> 时间：2013-04-03T02:17:21.490
> 
> 标签：java, jar, javafx

有谁知道我在哪里可以找到`javafx`Windows 包的 jar 文件？我只能找到 zip 文件和 exe 文件。有人可以回答下载包的链接吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T08:27:59.430

JavaFX 与 Oracle 的最新 JDK/JRE 一起提供。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T10:25:32.457

您需要首先安装 javafx_sdk-2_0_1-windows-i586.exe 这将在您的机器上通过默认 C 驱动器安装 JavaFx 2 sdk。您可以在以下位置获取 jfxrt.jar C:\Program Files\Oracle\JavaFX Runtime 2.0\lib\jfxrt.jar

您必须在项目的类路径中引用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-26T09:22:24.870

由于 java 1.7 javafx 嵌入在 JRE/JDK 中，您可以找到 jfxrt.jar

在目录 C:\Program Files\Java[jdk1.8.0_25]\jre\lib\ext 下（符合您的 jdk 位置）

请注意，如果您使用的是 java 1.6 或更低版本，您将找不到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-20T19:21:18.660

它带有 JRE - 目前，我在 Windows 中有 1.8 - 1\. 访问此路径 C:\Program Files\Java\jre1.8.0_162\lib 2\. 将“jfxswt.jar”添加到库

确保你也有相同的 JRE

[Eclipse - 构建路径](https://i.stack.imgur.com/7lq2C.png)

# javascript - 使用 Angularjs 绑定 Backbone 样式的对象

> ID：15777779
> 
> 赞同：0
> 
> 时间：2013-04-03T02:17:33.077
> 
> 标签：javascript, backbone.js, angularjs, parse-platform

我正在开发一个使用 Parse.com 后端和 Angularjs 前端的应用程序。Parse 使用带有 getter 和 setter 的 Backbone 样式对象，例如，我不能只将对象属性连接到带有`ng-model="object.property"`. 这些属性在 object.attributes 属性中可用，但我相信这并不意味着直接设置为。现在，我正在做类似的事情（假设键是属性名称的列表）：

```
for (var i = 0; i < keys.length; i++) {
  object[keys[i]] = object.get(keys[i]);
} 
```

然后让事情发生在 Angular 中的对象上，然后：

```
for (var i = 0; i < keys.length; i++) {
  object.set(keys[i], object[keys[i]]);
}
object.save(); 
```

谁能想到更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:31:44.537

我不会弄乱 Model#set 方法，因为它涉及内部的东西，但我想不出任何错误使用 model.attributes 而不是 Model#get 如果它对你来说更容易的话。
也就是说，我认为你更喜欢那些：

```
// Model#get
myModel.toJSON(); // returns a clone of model.attributes, cool eh?

// Model#set
myModel.set(JSON); // Model#get doesn't support it, but you can set several attributes at the same time 
```

我猜这两种方法可以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-17T19:49:56.610

您可以删除 ParseSDK 并改用此 AngularJS 模块：[https ://github.com/jimrhoskins/angular-parse](https://github.com/jimrhoskins/angular-parse)

> AngularJS 中现有的 Parse JavaScript API 有一些不理想的地方。现有的 API 是在 Backbone Models 之后建模的，主要问题是使用 setter 而不是对象属性。instance.set('property', 'value') 不太适合 ng-model 之类的东西
> 
> 相反，角度解析松散地基于使用直接在对象上定义的属性的 Spine 模型。为了促进这一点，在定义模型时，通过提供类名（如 Parse 中定义的）以及哪些属性是该类的一部分来“配置”它。
> 
> Angular-parse 还对任何进行网络调用的方法使用 Promise。

# android - android中应用程序的Facebook集成

> ID：15777780
> 
> 赞同：0
> 
> 时间：2013-04-03T02:17:40.040
> 
> 标签：android, facebook

我在我的应用程序中包含了 Facebook 功能。我在这里有几个问题：

我的应用程序中有登录和注销功能，但是如果我从我的 Facebook 应用程序注销。我的应用程序的 facebook 也被注销。我不确定为什么会这样？

使用以下帮助：[http ://www.androidhive.info/2012/03/android-facebook-connect-tutorial/](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)

为此，我有两个问题：

1.  我是否可以安装独立的 Facebook 集成，例如安装或不安装 Facebook 应用程序或安装或未登录 Facebook 应用程序？我应该能够在我的应用程序中登录或注销。这可能吗？

2.  如果不可能，我能否知道 Facebook 应用程序是否已在手机上登录？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:21:50.043

您提供的示例使用旧的 SDK。我正在使用 SDK3.0，如果您从 facebook 应用程序注销，您的应用程序将不会注销。您可以从 Facebook关注[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/ 。](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)您可以按照 SDK 中的几个示例来掌握这个想法。希望有帮助。

# matlab - 如何在matlab中计算相关矩阵

> ID：15777781
> 
> 赞同：4
> 
> 时间：2013-04-03T02:17:50.973
> 
> 标签：matlab, correlation

我有一个数据集，如下所示；

```
x1          x2          x3
-10.593017  NaN         NaN
-10.300049  3.624823938 NaN
-11.776855  3.707569866 NaN
-10.342041  3.770059949 NaN
-19.416992  3.819520417 6.516808442
-12.051026  3.898067841 6.753639662
NaN         3.687338806 6.317082898
NaN         NaN         6.226243427 
```

你能告诉我如何计算相关矩阵吗？程序中可以使用“corrcoef”吗？或者还有其他方法。请告诉我。谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T04:13:51.503

您可以使用[CORR](http://www.mathworks.com/help/matlab/ref/corr.html)或[CORRCOEF](http://www.mathworks.com/help/matlab/ref/corrcoef.html)函数。两个函数都将返回相同的相关矩阵（对于非常低的 p 值，结果可能会有所不同，具体取决于您的 MATLAB 版本）。

您需要注意 NaN 值。两者都有参数`'rows'`。这是来自文档的引用，其中包含可能的参数值：

> “all”（默认）使用所有行，“complete”使用没有 NaN 值的行，或者“pairwise”使用 i 或 j 列中没有 NaN 值的行计算 R(i,j)。

如果您将 NaN 元素设置`'rows'`为`'all '`将使用所有元素，但您将获得 NaN 作为结果。`'complete'`将只使用任何列中没有 NaN 的行。`'pairwise'`是我通常使用的，它会为每个比较独立地删除带有 NaN 的行。

因此，如果您`x1`和是列向量来获取相关矩阵，请使用`x2`：`x3`

```
[rho, pval] = corr([x1, x2, x3], 'rows','pairwise'); 
```

如果您的变量是一个矩阵中的列`x`：

```
[rho, pval] = corr(x, 'rows','pairwise'); 
```

或使用`corrcoef`代替`corr`. CORR 还可以计算 Pearson 相关性以外的其他计算方法，例如 Spearman 或 Kendall。`'type'`用参数指定它。

# php - 用超链接词替换词，不理会超链接文本，

> ID：15777782
> 
> 赞同：2
> 
> 时间：2013-04-03T02:17:54.193
> 
> 标签：php, regex

我有一个字典单词列表，我将其加载到数组中。我从数据库表文本字段中获取了一段文本。

我遍历字典单词，并且在每次迭代中，我检查文本块中单词的出现。每当找到匹配项时，我用超链接版本替换块中的那个单词，所以当文本块发布时，我可以用鼠标指针悬停在它上面并弹出一个定义。

使用正则表达式很容易实现：

```
$text = preg_replace("/($dictionary_word)/i", '<a href="" class="glossary_term">$1</a>', $text, -1, $count); 
```

如果我不止一次运行“字典单词链接器”，链接将加倍。

我需要做的是代码正则表达式，它检测到到达字典单词时尚未关闭的打开锚标记。这样我就知道这个词已经链接了，所以我跳过它。

我尝试了向前和向后看的各种组合，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:03:48.680

为简单起见，您只需检查匹配的单词是否没有紧跟`</a>`：

```
"/\b($dictionary_word)\b(?!<\/a>)/i" 
```

还要注意`\b`添加。例如，这将避免匹配`pit`in `spitting`（这会将其变成`s<a ...>pit</a>ting`）。

也许您的文档中有其他类型的超链接文本？这将阻止所有超链接的*单个*单词链接到字典，这是适当的，因为一个单词不能成为两个 URL 的一部分。但是这些都不会检测到`<a href="...">a longer stretch of linked text</a>`. 如果您需要更聪明的行为，您需要的不仅仅是一种愚蠢的正则表达式替换方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:15:39.087

```
$str = "today is 2013-04-03, tomrrow is 2013-04-04";
$output1 = preg_replace("/(\d{4}-\d{2}-\d{2})/i", "happy day", $str, 1);
$output2 = preg_replace("/(\d{4}-\d{2}-\d{2})/i", "happy day", $str); 
```

只更换一次。

```
echo $output1;
today is happy day, tomrrow is 2013-04-04 
```

全部替换

```
echo $output2;
today is happy day, tomrrow is happy day 
```

你看到区别了吗？

# javascript - 页面完全加载后显示 Webview？

> ID：15777788
> 
> 赞同：0
> 
> 时间：2013-04-03T02:18:41.560
> 
> 标签：javascript, android, webview, android-webview

为简单起见，假设我有 1 个活动，其中包含一些 textView、progressSpinner 和 webView。

webView 可见性设置为“消失”，所有其他设置为可见。当页面完成加载并且我要删除的 2 个 div 被隐藏时，我想隐藏所有可见项目并显示完全加载的 webView。

但是，当我运行它时，我看到了所有可见的项目，并且 webView 此时没有显示（这很好）。几秒钟后，可见的项目消失了，出现了一个空白的 webView（不应该发生），然后页面加载，然后 2 个 div 被隐藏。

我想对用户隐藏它，如何将其设置为仅在页面完全加载完成并且隐藏 2 个 div 后才显示 webView？

```
public void onPageFinished(WebView view, String url)  {  
    webview.loadUrl("javascript:$('#MainMenu').hide()");
    webview.loadUrl("javascript:$('#EmployeeDashboard').hide()");
    android.os.SystemClock.sleep(2500); // My attempt to allow the divs to be hidden before it's displayed to the user
    findViewById(R.id.progressSpinner).setVisibility(View.GONE);
    findViewById(R.id.imageView1).setVisibility(View.GONE);
    findViewById(R.id.textView1).setVisibility(View.GONE);
    findViewById(R.id.textView2).setVisibility(View.GONE);
    findViewById(R.id.tvLoading).setVisibility(View.GONE);
    findViewById(R.id.webview).setVisibility(View.VISIBLE);
} 
```

在xml中我有：

```
<WebView
        android:id="@+id/webview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:visibility="gone" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:37:20.887

我假设您正在创建 webview 对象，然后调用 loadUrl(...)

之后，不要将 contentView 设置为您的 webView，而是将其设置为您的视图/图形/您在加载时要显示的任何内容。

在您的 onPageFinished 中，将 setContentView 调用到您的 webView。

```
MyWebView myWebView = new MyWebView();
myWebView.loadUrl ("http://whatever.com/goes/here");
setContentView(R.loadingurlspinner); 
```

然后在你的 onPageFinished()

```
//stuff you have above
setContentView(myWebView); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:05:10.247

发现我因为重定向而遇到麻烦，这对我有帮助： [如何监听 WebView 完成加载 URL？](https://stackoverflow.com/questions/3149216/how-to-listen-for-a-webview-finishing-loading-a-url-in-android/5172952#5172952)

# mysql - 使用联合的 SQL 查询

> ID：15777795
> 
> 赞同：1
> 
> 时间：2013-04-03T02:19:13.263
> 
> 标签：mysql, sql

我有以下查询。我做了联合以获得所需的输出，但我没有得到它。

```
create table foo (dateFact date, id int);
create table bar (dateFact date, id int);

insert into foo(dateFact, id) values('2013-03-01', 88), ('2013-03-02', 89),('2013-03-03', 90);
insert into bar(dateFact, id) values('2013-03-01', 88), ('2013-03-02', 89),('2013-03-03', 90);

select * from foo;
select * from bar;

(select dateFact, id as idA, 0 from foo order by dateFact) union (select dateFact, 0, id as idB from bar order by dateFact); 
```

上面的查询给了我以下结果：

```
dateFact               idA                  0
2013-03-01             88                   0
2013-03-02             89                   0
2013-03-03             90                   0
2013-03-01             0                    88
2013-03-02             0                    89
2013-03-03             0                    90 
```

但我想要：

```
dateFact               idA                 idB
2013-03-01             88                   88
2013-03-02             89                   89
2013-03-03             90                   90 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:20:44.713

包装联合查询并使用 对外部查询执行聚合`MAX()`并将它们分组`dateFact`。

```
SELECT dateFact, MAX(idA) idA, MAX(idB) idB
FROM
        (
            SELECT dateFact, id AS idA, 0 AS idB FROM foo
            UNION
            SELECT dateFact, 0 AS idA, id AS idB FROM bar 
        ) s
GROUP   BY dateFact
ORDER   BY dateFact 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:35:05.373

似乎您可以使用`MAX`and ：`CASE``CROSS JOIN`

```
select f.dateFact,
  max(case when f.dateFact = b.dateFact then f.id end) IDA,
  max(case when f.dateFact = b.dateFact then b.id end) IDB
from foo f cross join bar b
group by f.dateFact 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/e22ee/1)

结果：

```
DATEFACT         IDA   IDB
March, 01 2013   88    88
March, 02 2013   89    89
March, 03 2013   90    90 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:22:05.887

我不知道你为什么对结果感到惊讶。为了得到你想要的，你需要一个`group by`：

```
select dateFact, max(idA), max(idB)
from ((select dateFact, id as idA, 0
       from foo
      ) union all
      (select dateFact, 0, id as idB
       from bar
       order by dateFact
      )
     ) t
group by dateFact 
```

在这种情况下`union all`，最好使用`union`，因为`union`删除重复项并且不需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T02:53:18.590

给定示例数据，有几个不同的查询将返回您指定的结果集。但是当表中的行具有不同的值、不同的基数、不同的行数等时，查询中的差异会变得很明显。

需要不同的数据来显示查询中的差异。

例如，给定表格中的行`foo`并`bar`显示在问题中，此查询还将返回指定的结果集：

```
SELECT f.dateFact
     , f.id AS idA
     , b.id AS idB
  FROM foo f
  JOIN bar b
    ON f.dateFact = b.dateFact 
 ORDER BY f.dateFact 
```

但是，如果表的内容不同，则此查询的结果集将与其他答案中给出的某些查询有很大不同。

（我试图指出这个问题没有提供足够的信息来确定什么查询是“正确的”查询。）

您选择使用哪个查询实际上取决于您想要的结果集，例如，在 foo 或 bar 表中没有“匹配”行，或者当相同的 dateFact 值出现在 foo 和/或吧台，等等。

# git - git push 错误 git-receive-pack

> ID：15777797
> 
> 赞同：6
> 
> 时间：2013-04-03T02:19:42.157
> 
> 标签：git

我在不同的网络上有两个 git 存储库。我一直在他们两个之间毫无问题地交流，但由于某种原因，今天当我执行“git push”时，我收到以下错误：

```
----------------------------------------------
bash: git-receive-pack: command not found
fatal: The remote end hung up unexpectedly
---------------------------------------------- 
```

我用谷歌搜索并确保“/usr/local/bin”在我的“$PATH”中。这是我的 git 的 bin 目录的输出：

```
[pradeep@laptop ]$ls -l /usr/local/git/bin/
total 16760
-rwxr-xr-x  1 root  wheel  4329416 Mar 26 20:06 git*
-rwxr-xr-x  1 root  wheel    14852 Mar 26 20:06 git-credential-osxkeychain*
-rwxr-xr-x  2 root  wheel   162402 Mar 26 20:06 git-cvsserver*
lrwxr-xr-x  1 root  wheel        3 Apr  3 11:02 git-receive-pack@ -> git
-rwxr-xr-x  2 root  wheel  1830248 Mar 26 20:06 git-shell*
lrwxr-xr-x  1 root  wheel        3 Apr  3 11:02 git-upload-archive@ -> git
-rwxr-xr-x  2 root  wheel  1893064 Mar 26 20:06 git-upload-pack*
-rwxr-xr-x  1 root  wheel   333121 Mar 26 20:06 gitk* 
```

有什么想法可能会出错吗？

谢谢

-------------- 编辑 -------------------- 我的远程系统的“.bashrc”中有以下行：

```
export PATH=$LOCAL/git-1.8/bin/:$PATH 
```

这是远程机器上的输出：

```
$ls $LOCAL/git-1.8/bin
git  git-cvsserver  gitk  git-receive-pack  git-shell  git-upload-archive  git-upload-pack 
```

这是我从我的机器到远程机器执行“ssh user@remote env”时的输出：

```
[pradeep@laptop ~]$ssh k00603@k.rics.riken.jp env
SHELL=/bin/bash
SSH_CLIENT=153.133.52.171 52379 22
USER=k00603
MAIL=/var/mail/k00603
PATH=/usr/local/bin:/bin:/usr/bin:/usr/local/openssh/bin
PWD=/volume2/home/hp120242/k00603
SHLVL=1
HOME=/home/hp120242/k00603
LOGNAME=k00603
SSH_CONNECTION=153.133.52.171 52379 10.7.160.4 22
LC_CTYPE=en_US.UTF-8
_=/bin/env 
```

bash 中缺少 git 路径。

编辑：以下是我的远程系统主目录中的“.bash_profile”：

```
# .bash_profile

# Get the aliases and functions
if [ -f ~/.bashrc ]; then
. ~/.bashrc
fi

# User specific environment and startup programs

PATH=$PATH:$HOME/bin:$LOCAL/git-1.8/bin

export PATH 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T08:42:08.173

当你 ssh 进入一个盒子并得到一个提示时，你实际上正在经历一个与运行命令时略有不同的过程。Shell 根据是否为登录 Shell 和/或是否为交互式会话，对获取哪些配置有规则。尝试运行：

```
ssh user@host env 
```

这将打印您的环境，如非交互式登录会话所见。我的猜测是，`/usr/local/git/bin`在这种情况下，它不在路上。您可以使用以下`--receive-pack`选项解决此问题`git push`：

```
git push --receive-pack=/path/to/git-receive-pack 
```

`/path/to/git-receive-pack`*是远程*机器上的路径。它告诉 git 在 ssh 进入遥控器时在哪里可以找到另一端。

最好的答案是修复你的 shell 配置，但根据 shell 的不同，这可能会很棘手。我主要使用 ZSH，我通过设置 a 来解决这个问题`~/.zshenv`，它由 ZSH 在非交互式 shell 中获取。我认为 bash 的情况往往不太清楚。您可能需要编辑您的`~/.bashrc`和/或您的`~/.bash_profile`.

假设您在远程端安装了 vanilla Linux（可能是这种情况），并且它正在运行 bash shell，最简单的解决方法是更改​​您的`.bashrc`. 编辑`~/.bashrc`，并添加：

```
export PATH=/path/to/your/installed/git/bin:$PATH 
```

`/path/to/your/installed/git/bin`您在主目录中安装 git 的位置在哪里。我倾向于将本地安装放在 中`~/.local/bin`，所以我的看起来像：

```
export PATH=$HOME/.local/bin:$PATH 
```

你的可能只是：

```
export PATH=$HOME/bin:$PATH 
```

你不说地点，所以我不能给你正确的表述。

在大多数系统上，`.bashrc`即使向 ssh 提供了命令，也是 source。进行此更改后，`ssh user@host env`再次尝试运行。您应该在路径变量中看到包含 git 二进制文件的 bin 文件夹的位置。然后你应该能够做类似的事情`ssh user@host git --version`并看到类似的东西：

```
git version 1.8.2 
```

如果您看到一个错误，那么您可能没有正确输入路径，或者当您 ssh 进入机器时 .bashrc 没有被拾取。

**示例 .profile**

```
# if running bash
if [ -n "$BASH_VERSION" ]; then
    # include .bashrc if it exists
    if [ -f "$HOME/.bashrc" ]; then
    . "$HOME/.bashrc"
    fi
fi

# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/bin" ] ; then
    PATH="$HOME/bin:$PATH"
fi 
```

**自动使用`--receive-pack`**

假设您的遥控器名为`origin`，您可以这样做：

```
git config --local remote.origin.receivepack \
    /path/to/git-receive-pack/on/the/remote 
```

您可能还需要修复上传包：

```
git config --local remote.origin.uploadpack \
    /path/to/git-upload-pack/on/the/remote 
```

# ruby-on-rails-3 - less-rails gem 没有按预期导入更少的文件

> ID：15777804
> 
> 赞同：1
> 
> 时间：2013-04-03T02:20:54.050
> 
> 标签：ruby-on-rails-3, asset-pipeline, less-rails

我正在尝试在我的 rails 3 项目中包含 less，以便我可以拥有一个如下所示的 global.css.less 文件：

```
@import "variables";
@import "app"; 
```

但是，每当我这样做时，app.less 都无法访问 variables.less 中定义的变量。

问题在这里解释：

[https://github.com/christiannelson/less-rails-example](https://github.com/christiannelson/less-rails-example)

有没有人遇到过这个问题或知道谁来解决它？

谢谢

# java - 请帮助我使用 Java 中的 JFrame 和 BorderLayout

> ID：15777806
> 
> 赞同：0
> 
> 时间：2013-04-03T02:20:59.427
> 
> 标签：java, swing, jframe, layout-manager, jlist

有人能告诉我为什么我的 JList 和 JLabel 不会自动调整大小以填满整个屏幕吗？还有为什么 JButton 不自动调整大小？万分感谢

```
public class testing extends JFrame {

    private String[] testArray = {"apple", "banana", "cat"};
    private JPanel firstLayer = new JPanel();
    private JPanel secondLayerLeft = new JPanel();
    private JPanel secondLayerRight = new JPanel();
    private JList<String> leftText = new JList<String>();
    private JLabel rightOutput = new JLabel();
    private JButton button = new JButton("test button");

    public testing(){
        firstLayer.setLayout(new BorderLayout());
        firstLayer.add(secondLayerLeft, BorderLayout.WEST);
        firstLayer.add(secondLayerRight, BorderLayout.EAST);
        firstLayer.add(button, BorderLayout.SOUTH);

        secondLayerLeft.add(leftText);
        leftText.setListData(testArray);
        secondLayerRight.add(rightOutput);
        rightOutput.setText("testing 12345");

        secondLayerLeft.setBorder(new EtchedBorder());
        secondLayerRight.setBorder(new EtchedBorder());

        this.add(firstLayer);
    }

    public static void main(String[] args) {
        testing gui = new testing();
        gui.setSize(700, 800);
        gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        gui.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:30:29.597

这是一个基本特征`BorderLayout`。只有`CENTER`位置会自动调整大小。任何边框组件可以更改大小的唯一方法是，它们实际上会更改大小（`getPreferredSize`在执行下一个布局之前更改）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:35:10.273

您的左右面板的大小正好可以容纳它们所包含的 JPanel 的首选大小。你的按钮占据了边框布局的整个南部，就像它应该的那样，并且可以漂亮地调整大小。如果你想让某些东西伸展到整个窗口，把它放在中间。

# c - 寻求 Valgrind 程序分析方面的帮助

> ID：15777810
> 
> 赞同：0
> 
> 时间：2013-04-03T02:21:56.947
> 
> 标签：c, valgrind

总而言之，我在棋盘程序中收到了一些有趣的错误。我运行 Valgrind`~$ valgrind --track-origins=yes ./a.out`并得到了一些我难以解释的错误报告。

```
==10171== Conditional jump or move depends on uninitialised value(s)
==10171==    at 0x80488C2: diagnols.2353 (eq1.c:95)
==10171==    by 0x8048942: check.2372 (eq1.c:109)
==10171==    by 0x80485E6: recur (eq1.c:118)
==10171==    by 0x804872B: recur (eq1.c:151)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x8048618: recur (eq1.c:123)
==10171==  Uninitialised value was created by a heap allocation
==10171==    at 0x402BB7A: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==10171==    by 0x804897A: main (eq1.c:159) 
```

以下是代码中的一些实例：

*   重复，第 123 行：

    ```
    if ( (result == 2)/*&&(width!=7)*/  ) {
      // go to next row, try first column
      puts("Option 1\n");
      recur(key, (depth + 1), 0);  // line 123
    } 
    ```

*   重复，第 141 行：

    ```
    else if (  (result != 2)&&(width<7)  ) { // didn't work, try next column
      // go to next column, same row
      puts("Option 3\n");
      key->board[depth][width] = 0;
      recur(key, depth, (width+1));  // line 141 
    ```

*   诊断，第 95 行：

    ```
    while (  ((abc>=0)&&(bcd>=0) && (abc<=7)&&(bcd<=7))  ) {
      if (key->board[abc][bcd] == 1) {
    counter++;
      } 
    ```

* * *

完整的诊断功能：

```
 int diagnols(int PARAMETER_ONE, int PARAMETER_TWO) { // returns 0 if good
    int abc = 0;
    int bcd = 0;
    int counter = 0;

    // first check diagnol up and to the left
    abc = PARAMETER_ONE-1;
    bcd = PARAMETER_TWO-1;
    while ( bcd>=0 && abc>=0 && abc<=7 && bcd<=7  ) {
      if (key->board[abc][bcd] == 1) {
        counter++;
      } abc--;
      bcd--;
    }

    // checking diagnol up and to the right
    abc = PARAMETER_ONE-1;
    bcd = PARAMETER_TWO+1;
    while ( abc>=0 && bcd>=0  && abc<=7 && bcd<=7  ) {
      if (key->board[abc][bcd] == 1) {
        counter++;
      } abc--;
      bcd++;
    }

    // checkign diagnol down and to the left
    abc = PARAMETER_ONE+1;
    bcd = PARAMETER_TWO-1;
    while ( abc>=0 && bcd>=0 && abc<=7 && bcd<=7  ) {
      if (key->board[abc][bcd] == 1) {
        counter++;
      } abc++;
      bcd--;
    }

    // checking diagnol down and to the right
    abc = PARAMETER_ONE+1;
    bcd = PARAMETER_TWO+1;
    while ( abc>=0 && bcd>=0 && abc<=7 && bcd<=7  ) {
      if (key->board[abc][bcd] == 1) {
        counter++;
      } abc++;
      bcd++;
    }

    return counter;
  } 
```

* * *

起源追踪：

```
int main() {
  struct chessboard* master = malloc(sizeof(struct chessboard));

 /* zero out board */
 int one = 0;
 int two = 0;
 for (one; one <= 7; one++) {
   for (two; two <= 7; two++) {
     master->board[one][two] = 0;
   }
 } 
```

结构是：

```
struct chessboard {
  int board[8][8];  // corrected
}; 
```

**第二组错误**

```
==10171== Invalid read of size 4
==10171==    at 0x8048767: vertical.2344 (eq1.c:51)
==10171==    by 0x804892B: check.2372 (eq1.c:108)
==10171==    by 0x80485E6: recur (eq1.c:118)
==10171==    by 0x804872B: recur (eq1.c:151)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x804868C: recur (eq1.c:141)
==10171==    by 0x8048618: recur (eq1.c:123)
==10171==  Address 0x41f8128 is 0 bytes after a block of size 256 alloc'd
==10171==    at 0x402BB7A: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==10171==    by 0x804897A: main (eq1.c:159) 
```

显然，出现了很多相同的行。

*   垂直功能：

    ```
    int vertical(int PARAMETER) { // param = 2nd val in 2D || returns 1 if good
      int ab = 0;
      int counter = 0;
      for (ab; ab <= 7; ab++) {
        if (  (key->board[ab][PARAMETER] == 1)  ) {
        counter++;
        }
      } return counter; // if one, it is okay; if > 1, not okay
    } 
    ```

我不确定问题是什么。它似乎不喜欢我的`malloc`，但我立即初始化它。我试过改变数组大小，改变循环边界，`calloc()`而不是`malloc()`等等。任何帮助表示赞赏！

* * *

整个程序：

```
#include <stdio.h>
#include <stdlib.h>

struct chessboard {
  int board[8][8];
};

void print_board(struct chessboard* key) {
  for(int a = 0; a <= 7; a++) {
    for(int b = 0; b <= 7; b++) {
      if (key->board[a][b]==0) {
    printf("[x]");
      } else {
    printf(" q ");
      }
    } 
    printf("\n");
  } 
  puts("\n");
}

int recur(struct chessboard* key, int DEPTH, int WIDTH) {

  int depth = DEPTH;
  int width = WIDTH;

  /* set a piece as a queen */
  key->board[depth][width] = 1;

  /* check for conflicts */
  int horizontal(int column) { // param = first val in 2D || returns 1 if good
    int a = 0;
    int counter = 0;
    for(;a <= 7; a++) {
      if (  key->board[column][a] == 1  ) {
    counter++;
      }
    }
    return counter; // if one, it it is okay; if > 1, not okay
  }

  int vertical(int row) { // param = 2nd val in 2D || returns 1 if good
    int ab = 0;
    int counter = 0;
    for(;ab <= 7; ab++) {
      if (  (key->board[ab][row] == 1)  ) {
    counter++;
      }
    } 
    return counter; // if one, it is okay; if > 1, not okay
  }

  int diagnols(int column, int row) { // returns 0 if good

    int counter = 0;

    // first check diagnol up and to the left
    int abc = column-1;
    int bcd = row-1;
    while (  bcd>=0 && abc>=0 && abc<=7 && bcd<=7  ) {
      if (key->board[abc][bcd] == 1) {
    counter++;
      } abc--;
      bcd--;
    }

    // checking diagnol up and to the right
    abc = column-1;
    bcd = row+1;
    while (  abc>=0 && bcd>=0 && abc<=7 && bcd<=7  ) {
      if (key->board[abc][bcd] == 1) {
    counter++;
      } 
      abc--;
      bcd++;
    }

    // checkign diagnol down and to the left
    abc = column+1;
    bcd = row-1;
    while (  (abc>=0)&&(bcd>=0) && (abc<=7)&&(bcd<=7)  ) {
      if (key->board[abc][bcd] == 1) {
    counter++;
      } 
      abc++;
      bcd--;
    }

    // checking diagnol down and to the right
    abc = column+1;
    bcd = row+1;
    while (  abc>=0 && bcd>=0 && abc<=7 && bcd<=7  ) {
      if (key->board[abc][bcd] == 1) {
    counter++;
      } 
      abc++;
      bcd++;
    }

    return counter;
  }
  int check(int param1, int param2) { // if okay returns 2 
    int h = horizontal(param1);
    int v = vertical(param2);
    int d = diagnols(param1, param2);
    int total = 0;
    total = (h + v + d); // if okay, equals 2
    return total;
  }
  print_board(key); // shows process, can be annoying

  /* choose what to do next 
  * option puts() statements are there for debugging
  */
  int result = check(depth,width);

  if ( result == 2 && depth != 7 ) { // worked, go deeper
    // go to next row, try first column
    puts("Option 1\n");
    recur(key, (depth + 1), 0);
  } 

  else if (  result == 2 && depth==7  ) { // done
    puts("Option 2\n");
    return 1;
  } 

  else if (  result != 2 && width<7  ) { // didn't work, try next column
    // go to next column, same row
    puts("Option 3\n");
    key->board[depth][width] = 0;
    recur(key, depth, (width+1));
  } 

  else if (  result !=2 && width == 7  ) { // didn't work AND no more column space
    puts("Option 1\n");
    key->board[depth][width] = 0;  // set this queen to zero
    for (int e = 0;e<=7;e++){ // find queen in previous row, set it to zero and recur
    if (key->board[(depth-1)][e] == 1) {
        key->board[(depth-1)][e] = 0;
        recur(key, (depth-1), (e+1)); // could go out of bounds
    }
    }
  }
  return 0;
}

int main() {
  struct chessboard* master = malloc(sizeof(struct chessboard));

  /* zero out board */
  for(int one = 0; one <= 7; one++) {
    for(int two = 0; two <= 7; two++) {
      master->board[one][two] = 0;
    }
  }

  /* run */
  int result = 0;
  result = recur(master, 0, 0);

  /* finish */
  printf("Result was: %i\n", result);
  free(master);
  return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:25:50.103

发生第一个错误是因为您`malloc`编辑了一些东西（大概是 a`chessboard`似乎被称为`key`）并且在尝试读取它们之前未能设置一些结构的内部成员。也就是说，您尝试阅读`key->board[abc][bcd]`而不先分配到该位置。

您还没有为其他错误发布适当的代码。另请注意，发布所有代码很有帮助，因为程序的行很少存在于真空中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:36:15.433

### 问题的原始版本

出于某种原因，您使用的是 7x7 棋盘而不是普通的 8x8 棋盘：

```
struct chessboard {
  int board[7][7];
}; 
```

此结构可以正确索引，每个维度中的索引值为 0..6。您可以摆脱（但它只是“摆脱”）一些（并且只有“一些”）索引为 7 的访问，但它们严格调用未定义的行为，这意味着“任何事情都可能发生”，包括“它几乎按预期工作'。

在第 95 行的代码中`diagnols()`，您有：

```
while (((abc >= 0) && (bcd >= 0) && (abc <= 7) && (bcd <= 7)))
{
    if (key->board[abc][bcd] == 1)
        counter++;
    ...
} 
```

现在，如果任一索引等于 7，您可能正在访问越界内存。

* * *

### 修改后的问题

好吧，既然你的电路板是 8x8，而不是 7x7，那就更有意义了。`8 * 8 * sizeof(int)`为棋盘分配 256 字节 ( ) 的内存也很有意义。

当您有数组时，编写数组边界的标准惯用数组不是：

```
/* zero out board */
int one = 0;
int two = 0;
for (one; one <= 7; one++) {
  for (two; two <= 7; two++) {
    master->board[one][two] = 0;
  }
} 
```

但

```
for (int i = 0; i < 8; i++)
{
    for (int j = 0; j < 8; j++)
        master->board[i][j] = 0;
} 
```

惯用的一点是使用`for (int index = 0; index < bound; index++)`，而不是选择变量名（尽管`i`and`j`比`one`and更传统`two`），或者大括号的位置或数量（两者都是完全主观的）。并且预先声明索引然后使用没有问题`for (index = 0; index < bound; index++)`，特别是如果您的编译器不支持 C99。

第 1 组问题发生在：

```
while (  ((abc>=0)&&(bcd>=0) && (abc<=7)&&(bcd<=7))  ) {
  if (key->board[abc][bcd] == 1) {
    counter++;
  } 
```

这可能意味着其中一个`abc`或未`bcd`正确初始化，因此您正在根据未初始化的变量进行条件计算。另一种方法`key->board[abc][bcd]`是没有正确初始化，这意味着初始化循环是错误的。

此外，循环中的条件`while`应与循环中的条件类似`for`：

```
while (abc >= 0 && bcd >= 0 && abc < 8 and bcd < 8) 
```

这些不对称的界限（大于或等于下限——通常为零——并且小于上限）通常被认为是更好的风格。除此之外，您可以在任何地方使用`enum { SIDE = 8 };`然后引用`SIZE`而不是 7（或 8）。

对于第 2 组错误，您没有向我们展示函数中的代码，`vertical`因此我们无法判断您做错了什么，除非您的数组索引看起来太大。

* * *

### 批评继续

现在有一些额外的代码需要审查......

```
int vertical(int PARAMETER) { // param = 2nd val in 2D || returns 1 if good
  int ab = 0;
  int counter = 0;
  for (ab; ab <= 7; ab++) {
    if (  (key->board[ab][PARAMETER] == 1)  ) {
    counter++;
    }
  } return counter; // if one, it is okay; if > 1, not okay
} 
```

通常，C 编码器使用 ALL_CAPS_NAMES 来表示宏值`#define SIZE 8`或`enum`常量`enum { SIZE = 8 };`​​。如果其他人要阅读您的代码，他们会期望的，因此我建议遵循该样式指南。另外，选择更有意义的名字；`int vertical(int column)`会更明智，不是吗？或者`int vertical(int col)`由于另一个维度是`row`，然后您有两个 3 字母名称。您是否考虑过使用`assert`from `<assert.h>`？

```
int vertical(int column)
{
    int counter = 0;
    assert(column >= 0 && column < 8);
    for (int row = 0; row < 8; row++)
    {
        if (key->board[row][column] == 1)
           counter++;
    }
    return counter;
} 
```

如果板上只有 0 和 1 的值，你甚至不需要条件；你可以简单地写：

```
int vertical(int column)
{
    int counter = 0;
    assert(column >= 0 && column < 8);
    for (int row = 0; row < 8; row++)
        counter += key->board[row][column];
    return counter;
} 
```

目前，我能想到的发生越界内存访问的唯一方法`vertical()`——任何版本——是因为`column`参数是 8。断言将诊断这是否是问题所在。

我猜这个函数`diagnols()`是确定同一对角线上是否有两个皇后？你看过哈利波特系列电影吗？记住对角巷——对角线。

您显示的代码是：

```
 int diagnols(int PARAMETER_ONE, int PARAMETER_TWO) { // returns 0 if good
    int abc = 0;
    int bcd = 0;
    int counter = 0; 
```

我认为参数名称应该是`row`and `col`; 您正在从给定位置`[row][col]`上下搜索对角线。

```
 // first check diagnol up and to the left
    abc = PARAMETER_ONE-1;
    bcd = PARAMETER_TWO-1; 
```

考虑到这里的分配，上面的`abc`和到 0的初始化是多余的。`bcd`您可能应该断言参数都在 0..7 范围内。

```
 while ( bcd>=0 && abc>=0 && abc<=7 && bcd<=7  ) {
      if (key->board[abc][bcd] == 1) {
        counter++;
      } abc--;
      bcd--;
    } 
```

请不要将右大括号和另一个语句放在同一行。当然，关于不对称范围等的其他评论仍然适用，但我不会重复它们。还有关于 0、1 和简单求和的观察。

```
 // checking diagnol up and to the right
    abc = PARAMETER_ONE-1;
    bcd = PARAMETER_TWO+1;
    while ( abc>=0 && bcd>=0  && abc<=7 && bcd<=7  ) {
      if (key->board[abc][bcd] == 1) {
        counter++;
      } abc--;
      bcd++;
    }

    // checkign diagnol down and to the left
    abc = PARAMETER_ONE+1;
    bcd = PARAMETER_TWO-1;
    while ( abc>=0 && bcd>=0 && abc<=7 && bcd<=7  ) {
      if (key->board[abc][bcd] == 1) {
        counter++;
      } abc++;
      bcd--;
    }

    // checking diagnol down and to the right
    abc = PARAMETER_ONE+1;
    bcd = PARAMETER_TWO+1;
    while ( abc>=0 && bcd>=0 && abc<=7 && bcd<=7  ) {
      if (key->board[abc][bcd] == 1) {
        counter++;
      } abc++;
      bcd++;
    }

    return counter;
  } 
```

这四个代码块非常相似。事实上，我认为您可以创建一个简单的函数来进行通用搜索。

```
int count_collisions(int row, int col, int row_inc, int col_inc)
{
    int count = 0;
    assert(row >= 0 && row < 8);
    assert(col >= 0 && col < 8);
    assert(row_inc >= -1 && row_inc <= +1);  // Not good for jumps in draughts/checkers
    assert(col_inc >= -1 && row_inc <= +1);
    assert(col_inc !=  0 || row_inc !=  0);  // Both zero is gives an infinite loop
    while (row >= 0 && row < 8 && col >= 0 && col < 8)
    {
        count += key->board[row][col];
        col += col_inc;
        row += row_inc;
    }
    return count;
}

int diagonals(int row, int col)
{
    int num = 0;
    num += count_collisions(row, col, +1, +1);
    num += count_collisions(row, col, +1, -1);
    num += count_collisions(row, col, -1, +1);
    num += count_collisions(row, col, -1, -1);
    return num;
}

int vertical(int col)
{
    return count_collisions(0, col, +1, 0);
}

int horizontal(int row)
{
    return count_collisions(row, 0, 0, +1);
} 
```

Kernighan 和 Plauger 的优秀（但略微过时且已绝版）书“[The Elements of Programming Style][1]”中的一句格言适用：

*   子例程调用允许我们总结参数列表中的不规则性 [...]
*   [t]子程序本身总结了代码的规律 [...]

我认为`count_collisions()`例程和使用它的函数合理地体现了这一点。

（另请参阅：[DRY if 语句](https://stackoverflow.com/questions/10535962/dry-if-statements/10536325#10536325)。）

* * *

我可以看到当前存在未初始化变量的唯一方法`diagnols()`是，如果一个或另一个参数值未初始化。确定那里发生了什么需要仔细检查调用`diagnols()`.

* * *

### 存在完整代码

基本编译非常干净。我没有提到我在编译时实际使用的一些选项，所以我收到了 4 个根本不是灾难性的警告：

```
$ gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition 8q.c -o 8q  
8q.c:8:6: warning: no previous prototype for ‘print_board’ [-Wmissing-prototypes]
8q.c:22:5: warning: no previous prototype for ‘recur’ [-Wmissing-prototypes]
8q.c:150:5: warning: function declaration isn’t a prototype [-Wstrict-prototypes]
8q.c: In function ‘main’:
8q.c:150:5: warning: old-style function definition [-Wold-style-definition]
$ 
```

我收到了一份投诉`valgrind`，最后是阅读。我在没有的情况下重新编译`-O3`并获得了更好的诊断`valgrind`：

`row >= 0 && row < 8`然后，我为范围或等效范围内的行和列的函数参数添加了断言，并触发了其中一个断言：

```
Assertion failed: (WIDTH >= 0 && WIDTH < 8), function recur, file 8q.c, line 30.
==23867== 
==23867== Process terminating with default action of signal 6 (SIGABRT)
==23867==    at 0x2C582A: __kill (in /usr/lib/system/libsystem_kernel.dylib)
==23867==    by 0x1A85DD: __assert_rtn (in /usr/lib/system/libsystem_c.dylib)
==23867==    by 0x100001747: recur (8q.c:30)
==23867==    by 0x1000018D8: recur (8q.c:152)
==23867==    by 0x10000182F: recur (8q.c:143)
==23867==    by 0x10000182F: recur (8q.c:143)
==23867==    by 0x10000182F: recur (8q.c:143)
==23867==    by 0x10000182F: recur (8q.c:143)
==23867==    by 0x10000182F: recur (8q.c:143)
==23867==    by 0x10000182F: recur (8q.c:143)
==23867==    by 0x10000182F: recur (8q.c:143)
==23867==    by 0x1000017BB: recur (8q.c:131)
==23867== 
```

因此，在最后，您（可能）`recur()`使用 WIDTH 8 进行调用（而不是负值——您可以将断言拆分为两个单独的条件以确保）。您的`recur()`函数中有关于超出范围的注释：

```
 recur(key, (depth-1), (e+1)); // could go out of bounds 
```

不！这不安全。确保你在通行证上避开麻烦。并且`assert`是一个简单但有时（实际上，经常）有效的工具。

*我自信地说，但当我想得更多时，信心减弱了：*

实际造成问题的那一行可能是这一行，虽然那应该是写，而不是读：

```
/* set a piece as a queen */
key->board[depth][width] = 1; 
```

您还没有检查`depth`和（在这种情况下）`width`的有效性。

# .htaccess - htaccess 将站点/子文件夹重定向到 site/subfolder.php

> ID：15777813
> 
> 赞同：1
> 
> 时间：2013-04-03T02:22:22.507
> 
> 标签：.htaccess, web

我有以下 .htaccess 文件

```
#~ Turn on rewrite engine
RewriteEngine on

#~ Re-write urls for PHP documents.
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

#~ redirect site/subfolder to site/subfolder.php
RewriteCond %{REQUESTFILENAME} !-f
RewriteRule ^(.*)/$ $1.php 
```

这会将 URL 从 site.com/something.php 更改为 site.com/something 但最后一点没有按预期工作，我有一个文件夹 site.com/myfolder/ 当用户转到“site.com/myfolder”时我希望显示 site.com/myfolder.php 而不是实际文件夹。这实际上现在发生了，但是它像在子文件夹中而不是在根目录中一样踩踏页面，因此所有相对 url 都被破坏了，任何人都可以想到解决方案吗？

**我的最终解决方案：** [编辑] 在下面发布了完整的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:36:36.797

你想不想`/myfolder`被`/myfolder/`改写成`myfolder.php`? 尝试在`.htaccess`隐藏文件中使用此代码：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)$
RewriteRule ^(.*) /%1.php 
```

但是如果你想重定向它而不是被重写，那么只需在代码之后添加*（一个空格和一个）* `[R]`标志`.php`。要不然？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:55:48.490

使用 DirectorySlash Off 后出现的最后一个问题是该站点只能通过[http://mysite.com/](http://mysite.com/)而不是[http://mysite.com访问](http://mysite.com)

所以你需要用一个简单的错误重定向来解决这个问题

所以完整的解决方案是这样的：

```
#~ Turn off displaying index for folders and give a error 403 instead.
Options -Indexes

#~ Set the error page to the top folder of your website ending with a slash, use a http adres to make it act like a re-direct.
ErrorDocument 403 http://mysite.com/

#~ Set default page for folders.
DirectoryIndex index.php

#~ Turn off directory slashes.
DirectorySlash Off

#~ Turn on rewrite engine
RewriteEngine on

#~ Re-write urls for PHP documents.
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

# javascript - 在 HTML 文档中创建链接标记的最佳实践是什么？

> ID：15777814
> 
> 赞同：1
> 
> 时间：2013-04-03T02:22:42.337
> 
> 标签：javascript, html, semantics

我已经看到了几种在 HTML 文档中创建可点击区域或元素组的不同方法。

一种方法是将一堆元素包装在一个锚标记中并使其显示块。然而，有些人认为这在语义上是不正确的。另一种方法是使用 JavaScript，但是如果不小心操作，它会通过禁用中间单击和右键单击来破坏用户体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:59:08.950

W3 说：

（编辑：一个链接会很好...... [dev.w3.org](http://dev.w3.org/html5/spec-LC/text-level-semantics.html#the-a-element)）

> a 元素可以围绕整个段落、列表、表格等，甚至整个部分，只要其中没有交互内容（例如按钮或其他链接）。这个例子展示了如何使用它来将整个广告块变成一个链接：

```
<aside class="advertising">
 <h1>Advertising</h1>
 <a href="http://ad.example.com/?adid=1929&amp;pubid=1422">
  <section>
       <h1>Mellblomatic 9000!</h1>
   <p>Turn all your widgets into mellbloms!</p>
   <p>Only $9.99 plus shipping and handling.</p>
  </section>
 </a>
 <a href="http://ad.example.com/?adid=375&amp;pubid=1422">
  <section>
   <h1>The Mellblom Browser</h1>
   <p>Web browsing at the speed of light.</p>
   <p>No other browser goes faster!</p>
  </section>
 </a>
</aside> 
```

因此，如果您没有交互式内容，请使用`<a>`; 否则，请使用 JavaScript。无论如何，这是我的看法。

此外，我还断言，由于`<a>`具有文本级语义，任何不是文本的内容都应该使用 JavaScript 而不是`<a>`. 也就是说，很多人都会写 eg `<a href="..."><img ...></a>`，而图像肯定不像文本。所以这充其量是一个模糊的话题。

# java - 返回对象或 null 时缺少 return 语句

> ID：15777815
> 
> 赞同：2
> 
> 时间：2013-04-03T02:22:45.307
> 
> 标签：java, compiler-errors, return

我是一名学生，这是一个练习，这是此方法的目标：此方法应返回 Athlete 数组的第一个元素，该元素的名称与 name 参数匹配。如果没有匹配的运动员，则返回 null。

出于某种原因，我收到了这个错误，

```
TestAthletes.java:15: error: missing return statement
 } 
```

这是我的代码：

```
public class TestAthletes{

   public static Athlete findAthleteByName(Athlete[] athletes, String name){
        for(int i=0; i<athletes.length; i++){
            if(name.equals(athletes[i].getName()))
                return athletes[i];
            else
                return null;
        }
    }
} 
```

无法弄清楚问题是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T02:25:28.970

编译器告诉您，如果您有机会到达方法的末尾，则没有 return 语句可以返回任何内容。

并不是说您的代码正在执行您希望它执行的操作，但无论如何，您应该放置一个 return 语句，可能是：

```
return null; 
```

在方法块的末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T02:25:59.620

您还需要在`for`循环之后有一个 return 语句，因为`athletes.length`可以为 0，这意味着`for`循环的主体永远不会被执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T02:25:44.227

我认为您的意思如下

```
public class TestAthletes{

   public static Athlete findAthleteByName(Athlete[] athletes, String name){
        for(int i=0; i<athletes.length; i++){
            if(name.equals(athletes[i].getName()))
                return athletes[i];
        }
        return null;
    }
} 
```

在您的原始代码中，如果`athletes.length`为 0，则您的循环永远不会执行，并且代码到达函数的末尾而不返回任何内容。

`null`另外，我认为如果您在任何迭代中都没有找到匹配项，您只想返回，所以这就是我在循环之后移动该 return 语句的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T02:26:02.333

你的`return null`陈述应该在循环之外。`null`当前，如果第一个值不匹配，它将返回。

```
public static Athlete findAthleteByName(Athlete[] athletes, String name){
    for(int i=0; i<athletes.length; i++){
        if(name.equals(athletes[i].getName()))
            return athletes[i];
    }
    return null;
} 
```

追踪当前发生的事情。您`athletes[0]`第一次在`for`循环中进行测试。如果不匹配，则`if`失败，它执行`else`，返回`null`。

此外，如果数组长度为 0，则`for`循环中的任何内容都不会执行，因此它永远不会`return`.

# java - 如何使用 java 对 jpg 进行像素化？

> ID：15777821
> 
> 赞同：7
> 
> 时间：2013-04-03T02:23:18.970
> 
> 标签：java, jpeg, pixel, pixelate

我正在尝试使用 Java 6 对 JPEG 进行像素化，但运气不佳。它需要使用 Java——而不是像 Photoshop 这样的图像处理程序，而且它需要看起来像老派——像这样：

![像素化图像](https://i.stack.imgur.com/3VAtB.gif)

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T03:18:33.467

使用`java.awt.image`( [javadoc](http://docs.oracle.com/javase/6/docs/api/java/awt/image/package-summary.html) ) 和`javax.imageio`( [javadoc](http://docs.oracle.com/javase/6/docs/api/javax/imageio/package-summary.html) ) API，您可以轻松地遍历图像的像素并自己执行像素化。

示例代码如下。您将至少需要这些导入：`javax.imageio.ImageIO`、`java.awt.image.BufferedImage`、`java.awt.image.Raster`、`java.awt.image.WritableRaster`和`java.io.File`.

例子：

```
// How big should the pixelations be?
final int PIX_SIZE = 10;

// Read the file as an Image
img = ImageIO.read(new File("image.jpg"));

// Get the raster data (array of pixels)
Raster src = img.getData();

// Create an identically-sized output raster
WritableRaster dest = src.createCompatibleWritableRaster();

// Loop through every PIX_SIZE pixels, in both x and y directions
for(int y = 0; y < src.getHeight(); y += PIX_SIZE) {
    for(int x = 0; x < src.getWidth(); x += PIX_SIZE) {

        // Copy the pixel
        double[] pixel = new double[3];
        pixel = src.getPixel(x, y, pixel);

        // "Paste" the pixel onto the surrounding PIX_SIZE by PIX_SIZE neighbors
        // Also make sure that our loop never goes outside the bounds of the image
        for(int yd = y; (yd < y + PIX_SIZE) && (yd < dest.getHeight()); yd++) {
            for(int xd = x; (xd < x + PIX_SIZE) && (xd < dest.getWidth()); xd++) {
                dest.setPixel(xd, yd, pixel);
            }
        }
    }
}

// Save the raster back to the Image
img.setData(dest);

// Write the new file
ImageIO.write(img, "jpg", new File("image-pixelated.jpg")); 
```

* * *

编辑：我想我应该提到 -`double[] pixel`据我所知，这只是 RGB 颜色值。例如，当我转储一个像素时，它看起来像`{204.0, 197.0, 189.0}`，浅棕褐色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-04T16:14:41.547

完成@bchociej 的回答

我在像素中使用由 定义的区域的主色`PIX_SIZE`。这不是一个完美的解决方案，但它更好一点。

这里有一个例子：

**原来的：**
[![在此处输入图像描述](https://i.stack.imgur.com/ZtsGA.jpg)](https://i.stack.imgur.com/ZtsGA.jpg)

**旧算法：**
[![在此处输入图像描述](https://i.stack.imgur.com/QohNd.jpg)](https://i.stack.imgur.com/QohNd.jpg)

**新算法：**
[![在此处输入图像描述](https://i.stack.imgur.com/w78MH.jpg)](https://i.stack.imgur.com/w78MH.jpg)

### 代码示例

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.util.*;
import java.util.List;

public final class ImageUtil {

    public static BufferedImage pixelate(BufferedImage imageToPixelate, int pixelSize) {
        BufferedImage pixelateImage = new BufferedImage(
            imageToPixelate.getWidth(),
            imageToPixelate.getHeight(),
            imageToPixelate.getType());

        for (int y = 0; y < imageToPixelate.getHeight(); y += pixelSize) {
            for (int x = 0; x < imageToPixelate.getWidth(); x += pixelSize) {
                BufferedImage croppedImage = getCroppedImage(imageToPixelate, x, y, pixelSize, pixelSize);
                Color dominantColor = getDominantColor(croppedImage);
                for (int yd = y; (yd < y + pixelSize) && (yd < pixelateImage.getHeight()); yd++) {
                    for (int xd = x; (xd < x + pixelSize) && (xd < pixelateImage.getWidth()); xd++) {
                        pixelateImage.setRGB(xd, yd, dominantColor.getRGB());
                    }
                }
            }
        }

        return pixelateImage;
    }

    public static BufferedImage getCroppedImage(BufferedImage image, int startx, int starty, int width, int height) {
        if (startx < 0) startx = 0;
        if (starty < 0) starty = 0;
        if (startx > image.getWidth()) startx = image.getWidth();
        if (starty > image.getHeight()) starty = image.getHeight();
        if (startx + width > image.getWidth()) width = image.getWidth() - startx;
        if (starty + height > image.getHeight()) height = image.getHeight() - starty;
        return image.getSubimage(startx, starty, width, height);
    }

    public static Color getDominantColor(BufferedImage image) {
        Map<Integer, Integer> colorCounter = new HashMap<>(100);
        for (int x = 0; x < image.getWidth(); x++) {
            for (int y = 0; y < image.getHeight(); y++) {
                int currentRGB = image.getRGB(x, y);
                int count = colorCounter.getOrDefault(currentRGB, 0);
                colorCounter.put(currentRGB, count + 1);
            }
        }
        return getDominantColor(colorCounter);
    }

    private static Color getDominantColor(Map<Integer, Integer> colorCounter) {
        int dominantRGB = colorCounter.entrySet().stream()
            .max((entry1, entry2) -> entry1.getValue() > entry2.getValue() ? 1 : -1)
            .get()
            .getKey();
        return new Color(dominantRGB);
    }
} 
```

### 如何使用它

```
img = ImageIO.read(new File("image.jpg"));
BufferedImage imagePixelated = ImageUtil.pixelate(img, PIX_SIZE);
ImageIO.write(imagePixelated, "jpg", new File("image-pixelated.jpg")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T02:28:00.497

我手头没有代码，但是如果您可以将图像大小调整为原始大小的 1/4，然后将其重新采样回原始大小，它应该可以解决问题。大多数图像库都可以做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-30T18:35:53.117

我在 Thibaut Mottet 的回答中修改了dominantColor 函数，所以它不是最常见的颜色，而是返回该像素
原始的平均RGB：
[![在此处输入图像描述](https://i.stack.imgur.com/KPze5.png)](https://i.stack.imgur.com/KPze5.png)

之后： 它不是很优化，但你明白了。
[![在此处输入图像描述](https://i.stack.imgur.com/truU8.png)](https://i.stack.imgur.com/truU8.png)

```
public static Color getDominantColor(BufferedImage image) {
    int sumR = 0, sumB = 0, sumG = 0, int sum2 = 0;
    int color = 0;
    for (int x = 0; x < image.getWidth(); x++) {
        for (int y = 0; y < image.getHeight(); y++) {
            color = image.getRGB(x, y);
            Color c = new Color(color);
            sumR += c.getRed();
            sumB += c.getBlue();
            sumG += c.getGreen();
            sum2++;
        }
    }
    return new Color(sumR/sum2, sumG/sum2, sumB/sum2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T02:32:09.030

搜索“Close Pixelate”项目，可能这就是你需要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-19T12:39:01.077

改进@thibaut-mottet 答案，因为我在“getDominantColor”方法上遇到编译器错误（“entry1”和“entry2”未定义）。

```
import java.awt.Color;
import java.awt.image.BufferedImage;
import java.util.Comparator;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

public class ImageUtil {

    public static BufferedImage pixelate(BufferedImage imageToPixelate, int pixelSize) {
        BufferedImage pixelateImage = new BufferedImage(
            imageToPixelate.getWidth(),
            imageToPixelate.getHeight(),
            imageToPixelate.getType());

        for (int y = 0; y < imageToPixelate.getHeight(); y += pixelSize) {
            for (int x = 0; x < imageToPixelate.getWidth(); x += pixelSize) {
                BufferedImage croppedImage = getCroppedImage(imageToPixelate, x, y, pixelSize, pixelSize);
                Color dominantColor = getDominantColor(croppedImage);
                for (int yd = y; (yd < y + pixelSize) && (yd < pixelateImage.getHeight()); yd++) {
                    for (int xd = x; (xd < x + pixelSize) && (xd < pixelateImage.getWidth()); xd++) {
                        pixelateImage.setRGB(xd, yd, dominantColor.getRGB());
                    }
                }
            }
        }

        return pixelateImage;
    }

    public static BufferedImage getCroppedImage(BufferedImage image, int startx, int starty, int width, int height) {
        if (startx < 0) startx = 0;
        if (starty < 0) starty = 0;
        if (startx > image.getWidth()) startx = image.getWidth();
        if (starty > image.getHeight()) starty = image.getHeight();
        if (startx + width > image.getWidth()) width = image.getWidth() - startx;
        if (starty + height > image.getHeight()) height = image.getHeight() - starty;
        return image.getSubimage(startx, starty, width, height);
    }

    public static Color getDominantColor(BufferedImage image) {
        Map<Integer, Integer> colorCounter = new HashMap<>(100);
        for (int x = 0; x < image.getWidth(); x++) {
            for (int y = 0; y < image.getHeight(); y++) {
                int currentRGB = image.getRGB(x, y);
                int count = colorCounter.getOrDefault(currentRGB, 0);
                colorCounter.put(currentRGB, count + 1);
            }
        }
        return getDominantColor(colorCounter);
    }

    @SuppressWarnings("unchecked")
    private static Color getDominantColor(Map<Integer, Integer> colorCounter) {
        int dominantRGB = colorCounter.entrySet().stream()
            .max(new EntryComparator())
            .get()
            .getKey();
        return new Color(dominantRGB);
    }
}

@SuppressWarnings("rawtypes")
class EntryComparator implements Comparator {

    @SuppressWarnings("unchecked")
    @Override
    public int compare(Object o1, Object o2) {
        Entry<Integer, Integer> entry1 = (Map.Entry<Integer, Integer>) o1;
        Entry<Integer, Integer> entry2 = (Map.Entry<Integer, Integer>) o2;
        return (entry1.getValue() > entry2.getValue() ? 1 : -1);
    }
} 
```

以完全相同的方式使用它：

```
img = ImageIO.read(new File("image.jpg"));
BufferedImage imagePixelated = ImageUtil.pixelate(img, PIX_SIZE);
ImageIO.write(imagePixelated, "jpg", new File("image-pixelated.jpg")); 
```

# jquery - 点击div =淡出我所有的html页面+卸载+加载新页面+淡入

> ID：15777822
> 
> 赞同：0
> 
> 时间：2013-04-03T02:23:26.923
> 
> 标签：jquery, html, load, click

我正在尝试这样做：

单击 Div + FadeOut 我所有的 HTML 页面 + 卸载所有 html 页面 + 加载另一个 html 页面 + 在此新闻页面上淡入

但是下班后……什么都没有……你能帮帮我吗？

谢谢

```
$('#bt1').click(function() {

        $('html').fadeOut(1000),function() {
               .load('page2.html',function() {
        $(this).fadeIn(1000);
    });
            return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:09:34.183

脚本中有很多语法问题

尝试

```
$(function(){
    $('#bt1').click(function() {
        $('html').fadeOut(1000, function() {
            $(this).load('page2.html', function() {
                $(this).fadeIn(1000);
            });
        });
        return false;
    });
}) 
```

演示：[Plunker](http://plnkr.co/edit/Ey4YfzE8CKZSGoFIo6gA?p=preview)

# ruby-on-rails - Rails 如何知道表中的哪一列是相关表中的索引？

> ID：15777823
> 
> 赞同：1
> 
> 时间：2013-04-03T02:23:32.230
> 
> 标签：ruby-on-rails, ruby, activerecord, associations

`has_many`,等数据模式修饰符的语法`belongs_to`不需要指定列标识符来建立关联。 *Rails 如何推断表之间的关系？* 我见过的所有示例都使用`<table_name>_id`具有外部关系的表中的约定：这不仅仅是一种常见的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:33:54.620

Ruby on Rails 使用“约定优于配置”模式（[约定优于配置](http://en.wikipedia.org/wiki/Convention_over_configuration)）。例如，对于`has_many`关联，应该有`foreign_key`（没有它就无法理解如何链接事物），默认情况下它是`model_name_id`列，但您可以指定它（这里是关于[关联基础](http://guides.rubyonrails.org/association_basics.html)的信息）。

所以你可能有`Category`和`Article`模型通过`has_many`关联链接，默认情况下`active_record`会在表中查找`category_id`列`articles`，但你可能有`cat_id`列，然后写：

```
# in category model
has_many :articles, :class_name => 'Article', :foreign_key => "cat_id"
# in article model
belong_to :category, :class_name => 'Category', :foreign_key => "cat_id" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:40:57.237

这看起来像 rails 的“魔术”，但这只是 ActiveRecord 所做的假设

> 4.1.2.6：外键
> 
> 按照惯例，Rails 假定在这个模型上用于保存外键的列是关联名称加上后缀 _id。:foreign_key 选项允许您直接设置外键的名称：

资料来源： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

# cookies - 无法在 Laravel 4 中设置 cookie

> ID：15777824
> 
> 赞同：5
> 
> 时间：2013-04-03T02:23:36.167
> 
> 标签：cookies, laravel, laravel-4

我正在使用最新版本的 Laravel 4，但无法设置 cookie：

```
Route::get('cookietest', function()
{
    Cookie::forever('forever', 'Success');
    $forever = Cookie::get('forever');
    Cookie::make('temporary', 'Victory', 5);
    $temporary = Cookie::get('temporary');
    return View::make('cookietest', array('forever' => $forever, 'temporary' => $temporary, 'variableTest' => 'works'));
}); 
```

查看脚本：

```
@extends('layouts.master')

@section('content')
    Forever cookie: {{ $forever }} <br />
    Temporary cookie: {{ $temporary }} <br />
    Variable test: {{ $variableTest }}
@stop 
```

产量：

```
Forever cookie: 
Temporary cookie: 
Variable test: works 
```

如果我刷新页面或在一个路由中创建 cookie 并尝试在另一个路由中访问它们并不重要。我可以确认没有通过上述操作设置 cookie。cookie 'laravel_payload' 和 'laravel_session' 以及 'remember_[HASH]' 确实存在，我可以使用 setcookie 使用常规 PHP 设置 cookie。

在我能找到的任何地方都不会抛出或记录任何错误。我在本地运行 Linux Mint 并在我的服务器上运行 Debian，两者都使用 nginx，我在这两个地方都有同样的问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-04T09:26:25.870

Cookie 不应该像这样使用，它们是为下一个请求设置的，而不是为当前请求设置的。并且您必须手动将它们附加到您的响应中，如[文档](http://four.laravel.com/docs/requests#cookies)中所述。

所以这段代码

```
Cookie::forever('cookie', 'value');
$cookie = Cookie::get('cookie'); 
```

将不会得到任何结果，因为 cookie 未在请求结束时附加。

您可以通过将其分成两条路线来尝试，例如

```
Route::get('cookieset', function()
{
    $foreverCookie = Cookie::forever('forever', 'Success');
    $tempCookie = Cookie::make('temporary', 'Victory', 5);
    return Response::make()->withCookie($foreverCookie)->withCookie($tempCookie);
});

Route::get('cookietest', function()
{
     $forever = Cookie::get('forever');
     $temporary = Cookie::get('temporary');
     return View::make('cookietest', array('forever' => $forever, 'temporary' => $temporary, 'variableTest' => 'works'));
}); 
```

然后首先访问`yoursite.local/cookieset`然后`yoursite.local/cookietest`查看它是否以这种方式工作并且将设置cookie。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-14T23:40:43.503

在**Laravel 4**中，我们得到了预期的 cookie 行为`queue`。

```
// Set a cookie before a response has been created
Cookie::queue('key', 'value', 'minutes'); 
```

例子：

```
Cookie::queue('username', 'mojoman', 60 * 24 * 30); // 30 days 
```

**警告**：在**Laravel 3 中**使用`put`（[http://v3.golaravel.com/api/class-Laravel.Cookie.html#_put](http://v3.golaravel.com/api/class-Laravel.Cookie.html#_put)）。

例子：

```
Cookie::put('username', 'mojoman', 60 * 24 * 30); // 30 days 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T20:34:40.293

afterFilter 可用于在控制器中设置 Cookie。假设 cookie 存储在控制器的类变量 $cookie 中。在控制器的构造函数中，以下代码将自动将 cookie 插入到返回给客户端的任何视图中：

```
public function __construct () {
    $cookie = &$this->cookie;
    $this->afterFilter(function ($route, $request, $response) use(&$cookie)  {
            if ($cookie) {
                $response->withCookie( $cookie );
            }
    });
} 
```

# c++ - 打开文件时遇到问题？

> ID：15777829
> 
> 赞同：1
> 
> 时间：2013-04-03T02:24:01.560
> 
> 标签：c++

我不知道到底是什么问题。我收到一条错误消息，说我需要初始化我的 char* 文件名，但是如果我将它初始化为 NULL，我还会收到另一个错误吗？

我的主要功能中有这个：

```
char * filename;
cout << "Enter the name of the graph file: ";
cin >> filename;
readgraph(filename, 1); 
```

这是 readgraph 函数：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T02:29:10.040

问题是指针只*指向*一个包含内存的空间。在您的代码中，**文件名**是（在这里挥手）一个指向字符数组的指针，但您实际上从未给它任何指向的东西。

您可以使用特定大小对其进行初始化：

```
char filename[50]; // An array that can hold 49 characters plus a NULL terminator 
```

或动态大小：

```
size_t size = whatever_you_want;
char *filename = new char[whatever_you_want];
// make sure to delete[] filename when you're done 
```

但是你应该知道，如果你试图在字符串中放入比分配的更多的数据，它会导致一个巨大的安全漏洞，称为[缓冲区溢出](https://en.wikipedia.org/wiki/Buffer_overflow)，这（如果你幸运的话）会导致你的程序崩溃.

或者你可以用简单的方法做到这一点并使用`string`：

```
string filename;
cin >> filename; 
```

最后一种方法可能是最好的，因为您不需要像自己处理字符串大小那样担心缓冲区溢出错误，并且在完成后也不需要处理`delete`它，因为`string`句柄自动为您服务。

您始终可以使用[function](http://www.cplusplus.com/reference/string/string/c_str/)`char*`转换为 C 字符串 ( ) ，但我建议仅使用它来向后兼容无法处理参数的函数。[`c_str()`](http://www.cplusplus.com/reference/string/string/c_str/)`string`

# python - 如何在 ec2 服务器上安装 Scipy

> ID：15777836
> 
> 赞同：1
> 
> 时间：2013-04-03T02:25:02.850
> 
> 标签：python, amazon-ec2, scipy, remote-access

我一直无法在 ec2 上安装 scipy。所以我试图让文件下载，它显示以下错误。我错过了什么？非常感谢！真正的新手在这里使用远程环境。

```
$ curl http://downloads.sourceforge.net/project/scipy/scipy/0.11.0/scipy-0.11.0.zip?r=&amp;ts=1364951046&amp;use_mirror=iweb
[1] 2355
-bash: amp: command not found
[2] 2357
-bash: amp: command not found 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T02:35:59.440

您可以通过[pip安装它](https://pypi.python.org/pypi/pip)

1.  sudo apt-get install -y python-pip

2.  sudo pip install numpy #scipy 依赖于 numpy

3.  sudo pip install scipy

PS 我建议你在 virtualenv 上安装第 2 步和第 3 步

## 编辑

看来你应该`Fortune`在第 3 步之前安装。你可以看看[这里](https://stackoverflow.com/questions/7496547/python-scipy-needs-blas)

## 编辑

最后，我启动了一个新的 EC2 实例并为您安装了它：

1.  sudo apt-get install -y python-pip

2.  sudo pip install numpy

3.  sudo apt-get install gfortran

4.  sudo apt-get install libblas-dev

5.  sudo apt-get install liblapack-dev

6.  sudo apt-get install g++

7.  sudo pip install scipy

希望这些可能会奏效。

# python - cx_freeze 将我的共享对象库嵌入到二进制可执行文件中？

> ID：15777837
> 
> 赞同：3
> 
> 时间：2013-04-03T02:25:05.103
> 
> 标签：python, shared-libraries, cx-freeze

我可以使用 cx_freeze 来打包我的 python 工具，但是我需要的库无法加载。由于某种原因，输出的可执行文件/二进制文件名称不断包含在路径中。

我收到以下错误：

OSError：/home/derekx/sbu/build/exe.linux-x86_64-2.7/secure_boot_utility/lib/libcrypto.so.1.0.0：无法打开共享对象文件：不是目录

该库被打包到 /home/derekx/sbu/build/exe.linux-x86_64-2.7/lib/libcrypto.so.1.0.0

创建的二进制“secure_boot_utility”也在 build/exe.linux86_64-2.7 目录中。

我的输入脚本和 setup.py 在 /home/derekx/sbu 中。

我使用“python setup.py build”来打包工具/依赖项..

任何帮助将不胜感激。我已经尝试了这些选项的组合，但仍然得到相同的错误。

我的 setup.py 是：

```
import sys
from cx_Freeze import setup, Executable

sys.path.append('sbu_scripts/')
sys.path.append('lib/')

binincludes = ['libcrypto.so.1.0.0']
binpaths = ['/home/derekx/sbu/lib']
includefiles = [('lib/libcrypto.so.1.0.0','lib/libcrypto.so.1.0.0'),]

exe = Executable(
    script="secure_boot_utility.py",
    )

setup(
    name = "SecureBoot",
    version = "0.1",
    description = "Test Secure Boot",
    options = {"build_exe": {'copy_dependent_files':True, 'create_shared_zip':True, 'bin_includes':binincludes, 'bin_path_includes':binpaths, 'include_files':includefiles}},
    executables = [exe]
    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T23:57:22.880

我不确定为什么顶级目录（getcwd）是可执行文件名。

无论如何，我能够使用 os.path.exists 在我的代码中添加一些内容并重新调整发送到 LoadLibrary 的值。

谢谢，托马斯，花时间回复。

这本来是别人的工具，我不得不支持。发生的事情是 sys.path[0] 被用于获取当前工作目录以构建正在加载的库的完整路径。我不确定为什么使用 cx_freeze 创建的可执行文件总是将可执行文件名称嵌入到当前工作目录中。

我是如何修复它的，检查了构建的库的完整路径是否存在于 os.path.exists 中：

```
if os.path.exists(path_to_lib) is False:
    path_to_lib = LibName

return path_to_lib 
```

这样，如果完整路径存在，它就可以工作，并且如果它不只是使用应该从 LD_LIBRARY_PATH 环境设置中获取它的 LibName。

# php - 使用 $_GET 通过该 id 从 MySql 获取数据。如果 ?id=2dsfajhf 它从数据库中的 id "2" 获取数据

> ID：15777838
> 
> 赞同：1
> 
> 时间：2013-04-03T02:25:21.720
> 
> 标签：php, mysql

正如标题所说，非常简单的脚本，我以前从未遇到过这个问题。只是为新闻系统获取数据。我正在测试的 id 在数据库中是“2”。但是如果我做 article.php?id=2fjfkhshs 它会显示 id "2" 的信息而不是错误。“id”是数据库中的 A_I 主 int。

```
 <?php
          $nid = mysql_real_escape_string($_GET['id']);
          $newsQuery = mysql_query("SELECT * FROM news WHERE id = '$nid' LIMIT 1");
          $newsExist = mysql_num_rows($newsQuery);
          $newsData = mysql_fetch_array($newsQuery);

          if ($newsExist == 1) {
            echo $newsData['title'];
          }
          else {
            echo "error";
          }
          ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:28:57.507

在 MySQL 中，当将数字与字符串进行比较时，字符串也会转换为数字。

```
SELECT 2 = '2abcdxyz'; 
```

结果是`1`

基本上，当将字符串转换为数字时，字符串只是被截断为第一个非数字字符。

```
SELECT CAST('2zbcxyz' AS UNSIGNED INTEGER); 
```

结果是`2`

相反，对于完全匹配，您可以使用：

```
SELECT BINARY 2 = '2abcdxyz'; 
```

在此处查看实际操作：[http ://sqlfiddle.com/#!2/01abf/2](http://sqlfiddle.com/#!2/01abf/2)

# c# - 将函数传递给 c# 中的另一个函数以调用给定模型

> ID：15777841
> 
> 赞同：0
> 
> 时间：2013-04-03T02:25:36.940
> 
> 标签：c#, generics, delegates

我在这里有这个不完整且损坏的示例，我想知道是否可以将一个函数传递给另一个考虑模型和属性的函数？请参阅下面示例中的评论以了解我的意思。

```
private void ValidateSurvey(Survey survey)
{
    // lines 1 to 10, or 1 to 8 or 11 to 16, etc
    for (var i = survey.FirstLine; i <= survey.LastLine; i++)
    {
        IsAnswerValid(survey, "1.1.1", i, /* some rules to apply here i.e. [TModel] != null && [TModel].Value == "foo" */ ) 
    }

}

private bool IsAnswerValid<TAnswer>(
    Survey survey,
    string rowName, 
    int lineNumber,
    Func<TAnswer, bool> answerValueValidator 
) where TAnswer : Answer
{
    if (survey == null)
        throw new ArgumentNullException("survey");
    if (answerValueValidator == null)
        throw new ArgumentNullException("answerValueValidator");
    if (string.IsNullOrWhiteSpace(rowName))
        throw new ArgumentNullException("Null/blank rowName specified");
    if(lineNumber < 0)
        throw new ArgumentOutOfRangeException("lineNumber must be positive");

    // get answer list for the required row
    var answerList = survey.Rows
        .Where(
            r => r.Name.Trim().ToLower() == rowName.Trim().ToLower() && r.Answers != null
        ).SelectMany(a => a.Answers);

    // get the first relevant answer for the line number specified
    var answer = answerList.FirstOrDefault(a => a.LineNumber == lineNumber);

    return answerValueValidator(answer);

    //return (answer != null && answer.Value);
} 
```

**更新：根据答案显示 lambda 使用和删除泛型，现在很抱歉只是让自己对导致智能感知不出现的语法错误感到困惑，希望有人会觉得这很有用**

```
private void ValidateSurvey(Survey survey)
{
    // lines 1 to 10, or 1 to 8 or 11 to 16, etc
    for (var i = survey.FirstLine; i <= survey.LastLine; i++)
    {
        IsAnswerValid(survey, "1.1.1", i, a => a != null && a.Value = "foo" ) 
    }

}

private bool IsAnswerValid(
    Survey survey,
    string rowName, 
    int lineNumber,
    Func<Answer, bool> answerValueValidator 
)
{
    if (survey == null)
        throw new ArgumentNullException("survey");
    if (answerValueValidator == null)
        throw new ArgumentNullException("answerValueValidator");
    if (string.IsNullOrWhiteSpace(rowName))
        throw new ArgumentNullException("Null/blank rowName specified");
    if(lineNumber < 0)
        throw new ArgumentOutOfRangeException("lineNumber must be positive");

    // get answer list for the required row
    var answerList = survey.Rows
        .Where(
            r => r.Name.Trim().ToLower() == rowName.Trim().ToLower() && r.Answers != null
        ).SelectMany(a => a.Answers);

    // get the first relevant answer for the line number specified
    var answer = answerList.FirstOrDefault(a => a.LineNumber == lineNumber);

    return answerValueValidator(answer);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:26:55.650

您正在寻找 lambda 表达式：

```
IsAnswerValid<Answer>(survey, "1.1.1", i, a => a.Something || a.SomethingElse); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:32:12.967

我认为你已经接近你想要的 - 尝试改变这个：

```
// get the first relevant answer for the line number specified
var answer = answerList.FirstOrDefault(a => a.LineNumber == lineNumber); 
```

对此：

```
// get the first relevant answer for the line number specified
var answer = answerList
    .OfType<TAnswer>()
    .FirstOrDefault(a => a.LineNumber == lineNumber); 
```

然后你可以传入任何`Answer -> bool`lambda：

```
IsAnswerValid<Answer>(survey, "1.1.1", i, ans => ans.LineNumber == 1); 
```

# java - 方法错误，Class不能应用于不同的类型？

> ID：15777844
> 
> 赞同：0
> 
> 时间：2013-04-03T02:25:47.107
> 
> 标签：java

我想在另一种方法中将字符串从主方法转换为整数，但出现错误。

```
`    public static void main(String[] args) 
 {

      System.out.println("Enter a date (use the format -> (MM/DD/YYYY)");

      //declare Scanner
      Scanner in = new Scanner (System.in);

      System.out.println("Enter a month (MM): ");
      String month = in.nextLine();

      System.out.println("Enter a day (DD): ");
      String day = in.nextLine();

      System.out.println("Enter a year (YYYY): ");
      String year = in.nextLine();

    String enteredDate = month + "/" + day + "/" + year;

    if (main.isValidDate(enteredDate))
      {
        main.leapYearCheck();
    }
}

private boolean isValidDate(String enteredDate) 
 {
    //logic
    parsedDate = null;// if it's valid set the parsed Calendar object up.
    return true;
}

// other code

private void leapYearCheck(String year) 
 {
        //leapyear
        int theYear = Integer.parseInt(year);

        if (theYear < 100) 
        {
            if (theYear > 40) 
            {
                theYear = theYear + 1900;
            }
            else 
            {               
                theYear = theYear + 2000;
            }
        }

        if (theYear % 4 == 0) 
        {
            if (theYear % 100 != 0) 
            {
                System.out.println(theYear + " is a leap year.");
            }
            else if (theYear % 400 == 0) 
            {
                System.out.println(theYear + " is a leap year.");
            }
            else 
            {
                System.out.println(theYear + " is not a leap year.");
            }
        }
        else 
        {
            System.out.println(theYear + " is not a leap year.");
        }
}//end of leap year

//other code }` 
```

我得到错误： `Date.java:31: error: method leapYearCheck in class Date cannot be applied to given types; main.leapYearCheck(); ^ required: String found: no arguments reason: actual and formal argument lists differ in length 1 error`

我不明白这个错误。说我需要一个字符串，并且由于该方法使用整数（我想）我需要返回一个字符串？我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:30:45.630

您需要根据`leapYearCheck`定义将字符串中的年份传递给方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:33:36.603

在主要方法中传递年份为：

```
if (main.isValidDate(enteredDate)) {
    main.leapYearCheck(year);
} 
```

`

# java - 遍历列表会产生 NullPointerException

> ID：15777852
> 
> 赞同：0
> 
> 时间：2013-04-03T02:26:28.240
> 
> 标签：java, list, if-statement, for-loop, nullpointerexception

我在一个类中定义了一个嵌套的 Node 类，并且

```
class HNode<T extends ArrayList> {
    private T _datum;
    private HNode<T> _prev;
    private HNode<T> _next;

    public HNode(T datum, HNode<T> prev, HNode<T> next) {
        _datum = datum;
        _prev = prev;
        _next = next;
    }

    public HNode<T> getNext() {
        return _next;
    } 
```

当我创建这个 Node 类时，我手动指定了 _datum、_prev 和 _next 字段。

```
 _r0 = new HNode<ArrayList<String>>(_al.get(3), _r0, _r1);
    _r1 = new HNode<ArrayList<String>>(_al.get(4), _r0, _r2);
    _r2 = new HNode<ArrayList<String>>(_al.get(5), _r1, _pos3);
    _pos3 = new HNode<ArrayList<String>>(_al.get(6), _r2, _pos4);
    _pos4 = new HNode<ArrayList<String>>(_al.get(7), _pos3, _pos5); 
```

（这是初始化的一部分。）

你好。我在名为“结构”的类中定义了一个嵌套节点类，并且

```
class HNode<T extends ArrayList> {
    private T _datum;
    private HNode<T> _prev;
    private HNode<T> _next;

    public HNode(T datum, HNode<T> prev, HNode<T> next) {
        _datum = datum;
        _prev = prev;
        _next = next;
    }

    public HNode<T> getNext() {
        return _next;
    } 
```

当我创建这个 Node 类时，我手动指定了 _datum、_prev 和 _next 字段。

```
 _r0 = new HNode<ArrayList<String>>(_al.get(3), _r0, _r1);
    _r1 = new HNode<ArrayList<String>>(_al.get(4), _r0, _r2);
    _r2 = new HNode<ArrayList<String>>(_al.get(5), _r1, _pos3);
    _pos3 = new HNode<ArrayList<String>>(_al.get(6), _r2, _pos4);
    _pos4 = new HNode<ArrayList<String>>(_al.get(7), _pos3, _pos5); 
```

（这是初始化的一部分。_al 是 ArrayList 的一个 ArrayList，我曾经为此调用 Collections.shuffle(_al) 方法。）

然后我想在“结构”类中定义一个 getPosition 方法。当我测试这个方法时，它会抛出一个 NullPointerException。

我用 if 语句划分这个方法的原因是第 2 和第 3、第 16 和第 17 节点没有相互连接。

我猜是 pos.getNext(); 的 for 循环。不过，可能是问题的原因，而不是条件语句。

```
public HNode<ArrayList<String>> getPosition(int index) {
    HNode<ArrayList<String>> pos = null;
    if(index<3) {
        pos = _l0;
        for(int i=0; i<index; i++) {
            pos = pos.getNext();
        }
    }
    else if(3<=index && index <= 16) {
        pos = _r0;
        for(int i=0; i<(index-3); i++) {
            pos = pos.getNext();
        }
    }
    else if(index <= 17 && index <= 24) {
        pos = _w1;
        for(int i=0; i<(index-17); i++) {
            pos = pos.getNext();
        }
    }
    return pos;
} 
```

你知道为什么这会产生 NullPointerException 吗？我试图弄清楚这一点，但无法解决。请给我一个建议。谢谢！

* * *

当我调用 getNext() 方法时发生错误。有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:44:01.360

从空引用的个人经验来看，似乎很可能

```
 _r0 = new HNode 
 _pos3 = new HNode etc 
```

一片空白。您是否尝试过使用调试器？

# events - 数据转换和编码CP037

> ID：15777853
> 
> 赞同：0
> 
> 时间：2013-04-03T02:26:28.587
> 
> 标签：events, encoding, ibm-mq, mainframe

我的系统读取`Websphere MQ`来自`Mainframe`队列的数据，应用程序读取的数据是 EBCDIC 格式 -

它早些时候工作正常，我们今年早些时候搬到了 jdk1.6（不确定这是否会导致这个问题）。

我得到一个变量值为 40，其中 EBCDIC 表示“”，但这并没有得到隐蔽。

那么问题是 MQ 还是 Mainframe 应该负责这种转换？因为我们正在进行以下转换，但这不起作用 -

```
 UnicodeFormat = "CP037";
                        byte[] b;
                        b = UninterpretedRowdata.getBytes("Cp037");
                        //System.out.println("DEST CP : "+UnicodeFormat);
                        UnicodedRow = new String(b, UnicodeFormat); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:12:00.297

我不知道为什么你会想要自己进行转换。诡异的。MQ 为您进行转换要好得多。即RTM [http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/zd00050_.htm](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/zd00050_.htm)

MQ 进行转换需要两件事：

1）消息需要将MD.Format字段设置为MQC.MQFMT_STRING

2) 您使用 convert 发出 MQGet API 调用

IE

```
MQGetMessageOptions gmo = new MQGetMessageOptions();
gmo.options = MQC.MQGMO_FAIL_IF_QUIESCING + MQC.MQGMO_CONVERT;
MQMessage receiveMsg = new MQMessage();
inQ.get(receiveMsg, gmo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T17:06:21.617

我编写了以下转换编码的代码：

```
public class Converter{

    public static void main(String[] args) {

        Charset charsetEBCDIC = Charset.forName("CP037");
        Charset charsetACSII = Charset.forName("US-ASCII");

        String ebcdic = "(((((((";
        System.out.println("String EBCDIC: " + ebcdic);
        System.out.println("String converted to ASCII: " + convertTO(ebcdic, charsetEBCDIC, charsetACSII));

        String ascII = "MMMMMM";
        System.out.println("String ASCII: " + ascII);
        System.out.println("String converted to EBCDIC: " + convertTO(ascII, charsetACSII, charsetEBCDIC));
    }

    public static String convertTO(String dados, Charset encondingFrom, Charset encondingTo) {
        return new String(dados.getBytes(encondingFrom), encondingTo);
    }
} 
```

# node.js - 在本地安装 Node Grunt

> ID：15777859
> 
> 赞同：16
> 
> 时间：2013-04-03T02:27:14.967
> 
> 标签：node.js, build-automation, portable-executable, gruntjs

我正在重新设计我的构建系统，并且我已经阅读了带有 grunt 的 node.js 是一个很好的方法。我也从来没有用过，而且我遇到了一些麻烦。

问题是我想建立一个可移植的构建环境，我可以将它包含在我的项目的版本控制中（也许这是不可能的）。让 node.js 和 npm 工作没有问题。但是，我看到的每条安装 grunt 的指令都说要使用`-g`带有 npm 的标志来全局安装它。因为我想要一个完全可移植的环境，所以我试图把它关掉，但我不能咕噜咕噜地工作。

我错过了什么，还是我试图做的事情不可行？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-03T05:56:12.333

看看[http://gruntjs.com/getting-started](http://gruntjs.com/getting-started)

Grunt 最近被拆分为一个项目本地依赖项（`grunt`）和一个命令行启动器（`grunt-cli`）。后者应该全局安装。

作为确保您可以在任何地方进行构建的额外提示：确保您将所有依赖项保存在`package.json`, 使用时使用`--save`and`--save-dev`参数`npm install`。更多信息：[https ://npmjs.org/doc/install.html](https://npmjs.org/doc/install.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-08-19T20:42:29.200

您可以通过调用以下命令来使用本地 grunt，而无需全局 (-g) 安装 grunt-cli：

```
node node_modules/grunt-cli/bin/grunt --version 
```

当然首先你需要将它安装在你本地的项目中并且有一个大于 0.3 的 grunt 版本；例如：

```
npm install grunt-cli
npm install grunt@0.4.5 
```

或者将它们都添加到您的 packages.json 并调用

```
npm install 
```

当您无法像我在[https://stackoverflow.com/a/39046355/2201879中描述的那样全局安装任何软件包时，这也应该会有所帮助](https://stackoverflow.com/a/39046355/2201879)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-27T21:45:14.647

请参阅[https://www.npmjs.com/package/grunt-cli#installing-grunt-cli-locally](https://www.npmjs.com/package/grunt-cli#installing-grunt-cli-locally)：

**在本地安装 grunt-cli**

如果您更喜欢惯用的 Node.js 方法来开始项目 ( `npm install && npm test`)，请使用 npm install grunt-cli --save-dev 在本地安装 grunt-cli。然后将脚本添加到您的 package.json 以运行相关的 grunt 命令：`"scripts": { "test": "grunt test" }`。现在 npm test 将使用本地安装的`./node_modules/.bin/grunt`可执行文件来运行你的 Grunt 命令。

要了解有关 npm 脚本的更多信息，请访问 npm 文档：
[https](https://docs.npmjs.com/misc/scripts) ://docs.npmjs.com/misc/scripts 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-07T11:26:50.527

以下是将最新版本的 Grunt 安装到您的项目文件夹中的命令行代码，并将其添加到您的 devDependencies：

```
npm install grunt --save-dev 
```

对于 gruntplugins 和其他节点模块也可以这样做。如以下安装 JSHint 任务模块的示例所示：

```
npm install grunt-contrib-jshint --save-dev 
```

在插件页面查看当前可用的 gruntplugins 以在您的项目中安装和使用。

完成后，请务必将更新后的 package.json 文件与您的项目一起提交！

# c - 替代 C 中的嵌套结构

> ID：15777860
> 
> 赞同：1
> 
> 时间：2013-04-03T02:27:15.063
> 
> 标签：c, struct

当我想跟踪内部结构中有多少项目时，我倾向于使用嵌套结构。所以我通常会做以下事情：

```
typedef struct Product {
    char *name;
    int qty;
} Prods;

typedef struct Category {
    char *name;
    int qty;
    int prods_count;
    Prods *prod;
} Cats; 
```

然后我可以访问/释放数据：

```
Cats *cat = malloc(sizeof(Cats));
cat->prods_count = 10;
cat->prod = malloc(cat->prods_count, sizeof(Prods));
cat->prod[0].name = malloc(15);
strcpy(cat->prod[0].name, "Hello World!!!");
cat->prod[0].qty = 100;
for (i=0; i<cat->prods_count; i++)
    free(cat->prod[i].name);
... 
```

我想知道是否有办法只用一个来做到这一点`struct`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:32:43.177

您可以为 qty 保留一个数组，为 name 保留一个数组，但这会非常麻烦，因为它消除了将它们放在自己的结构中所暗示的逻辑关系。

嵌套结构（以及它们在面向对象语言中的对象对应物）是非常自然的，您应该习惯它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:30:13.103

你可以这样做

```
typedef struct Category {
    char *name;
    int qty;
    int prods_count;
    Prods *prod;
    int * qty;
    char ** name;
} Cats; 
```

但是你现在必须 malloc 两次而不是一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:33:37.773

您当前的设置是构建它的好方法。它被称为[聚合](http://en.wikipedia.org/wiki/Aggregation_%28object-oriented_programming%29#Aggregation)。

# ios - UICollectionView 自定义布局

> ID：15777863
> 
> 赞同：1
> 
> 时间：2013-04-03T02:27:42.703
> 
> 标签：ios, objective-c, uitableview, uicollectionview

我想在 iphone 的 appstore 应用程序中实现一个 UI。UI 看起来相当复杂，其中包含许多活动部件。下面是应用程序的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/DPAl9.png)

该视图具有三行单元格。这些行中的每一行都包含很少的其他可以滚动的视图。我首先尝试使用 UITableView 来实现这一点。所以，我创建了一个自定义单元格，并意识到我必须为每个单元格添加滚动视图。我添加了滚动视图，但我不得不再次在滚动视图的顶部添加其他视图。同样，我创建了 nib，然后动态创建了视图并添加到单元格上，但这会带来非常糟糕的性能。UI 经常滞后，我知道这是因为每次都实例化自定义视图并添加到滚动视图。

然后，我尝试用 UICollectionView 做同样的事情。我继承了 UICollectionViewFlowLayout 类。但是，我不知道如何实现这一目标。这对我来说似乎很有趣。如果有人能给我一个线索，我会尝试自己实现。我不认为 tableview 方式是一个好方法，但我认为集合视图可能是一个更好的解决方案。我真的很感谢所有那些总是试图通过让别人变得更好、教书和让人们成长来让世界变得更美好的人。;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:40:24.837

我认为您不能使用集合视图来做到这一点，但您可以在滚动视图中使用 3 个集合视图。很难说他们是如何实现的，但我认为您可以使用三个标准集合视图来做到这一点，这些视图在滚动视图中一个位于另一个之下。我认为没有必要继承 UICollectionViewFlowLayout ——像这样的一条水平线很容易通过标准行为实现。

# php - 如何使用 CSS 在成对的列分组之间添加空白列？

> ID：15777864
> 
> 赞同：0
> 
> 时间：2013-04-03T02:27:49.453
> 
> 标签：php, css, arrays, formatting, multiple-columns

我有以下代码，它在五对行的三列中显示单词计数矩阵，每对包含一个单词和一个计数（由@Aiias 在stackoverflow 中提供）。我将标签添加到成对分组中的交替颜色。现在看起来像这样：

   | 词 | 计数 | 词 | 计数 | 词 | 计数 |
   | 词 | 计数 | 词 | 计数 | 词 | 计数|等

我正在努力在每个配对列之间添加一个可变宽度的空白空格，并删除“word”和“count”之间的边框，如下所示：

   | 字数| 空间 | 字数| 空间 | 字数|
   | 字数| 空间 | 字数| 空间 | 字数|等

这是我所拥有的：

```
function showWords($words) {
        $rows = array();
        $max_per_column = 5;
        $max_words = 15;
        $rows = array_pad($rows, $max_per_column, array());
        $count = 0;
        foreach ($words as $word => $item) {
            if ($count >= $max_words) {
                break;
            }
            array_push($rows[$count % $max_per_column], $word, $item);
            $count++;
        }           
        ?>

        <table id="table" class="table-list">
            <colgroup span="2">
                <col style="background: #CCFFCC;">
                <col style="background: #FFCCCC;">
            </colgroup>
            <colgroup span="2">
                <col style="background: #CCFFCC;">
                <col style="background: #FFCCCC;">
            </colgroup>
            <colgroup span="2">
                <col style="background: #CCFFCC;">
                <col style="background: #FFCCCC;">
            </colgroup>
          <tbody>
            <?php
              foreach ($rows as $cols) {
                echo '<tr><td>' . implode('</td><td>', $cols) . '</td></tr>';
              }
            ?>
          </tbody>
        </table>   
        <?            
    } 
```

这是附加的CSS：

```
#table {
   font-family: "Calibri", Sans-Serif;
   font-size: 11px;
   margin: 0px;
   width: auto;
   text-align: left;
   border-collapse: collapse; 
}
table.table-list {
   width: 36%;
   line-height: 1;
   text-align: left;
} 
```

预先感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T02:54:14.360

[这是我只使用 CSS 修改（JSFiddle：http: //jsfiddle.net/zKRYM/2/](http://jsfiddle.net/zKRYM/2/)）能想到的最好的方法：

```
td:nth-child(2n-1) {
    background: lightgreen;
    border-left: 2px solid blue;
}

td:nth-child(2n) {
    display: block;
    background: pink;
    margin-right: 30px;
    border-right: 2px solid blue;
} 
```

我使用 CSS 伪选择器来获取每个奇数表元素，添加 a `border-left`，然后得到偶数元素并添加`margin-right`间距和`border-right`.

请注意，我还删除了表格标题并将颜色转移到`td`元素上，而不是保留在`col`元素上。这是因为我添加了边距，并且我假设您希望它们是白色的（不填充颜色）。请注意，您仍然可以保留您的`col`和`colgroup`s，只需删除背景颜色即可。

# haproxy - HAProxy 和 reqrep 重写配置

> ID：15777869
> 
> 赞同：2
> 
> 时间：2013-04-03T02:28:28.630
> 
> 标签：haproxy

我正在尝试配置 Haproxy acl。例如，`http://www.abc.com/test/test.html`重写为`http://www.abc.com/index.html`. 请告诉我该怎么做？谢谢

```
reqrep ^([^\ :]*)\ /test/test.html     \1\ /index.html 
```

但网络服务器反馈：

> 502错误的网关

服务器返回无效或不完整的响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:32:30.703

您的请求的配置应如下所示：

```
reqrep ^GET\ /test/test.html\ HTTP/1.1 GET\ /index.html\ HTTP/1.1

default_backend dyn_server

backend dyn_server
mode http
server web1 ip:port 
```

希望这会帮助你

# c - 复制一个双精度数组，然后返回一个指向基数的指针

> ID：15777871
> 
> 赞同：0
> 
> 时间：2013-04-03T02:28:38.810
> 
> 标签：c

我收到了一项任务，但很难完成它。本质上，我要创建一个函数，该函数复制一个双精度数组，分配足够的内存，然后返回一个指向新数组基址的指针。我尝试了各种事情，但不相信我已经做对了......

这是我到目前为止所拥有的：

```
int *arrayCopyAndBase(double *array, int size)
{
    int i;
    int *arrayCopy;
    array_copy = malloc(size * sizeof(int));
    for (i = 0; i < size; i++)
    {
         arrayCopy[i] = array[i];
    }
    return &arrayCopy;
} 
```

我确信错误很明显，但作为初学者，我很难发现它们。我知道 &arrayCopy 可能应该是 &arrayCopy[0] 但这会导致地址不断变化。任何帮助表示赞赏；只需要走上正确的轨道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:31:16.510

几个问题：

你正在使用`sizeof(int)`. 您正在分配一个双精度数组。整数与双精度数不同。

`arrayCopy`是一个指向整数的指针。这应该是一个指向双精度的指针

您正在返回一个指向 a 的指针`int`。您应该返回一个指向 a 的指针`double`。

return 语句采用指针的地址。您只需要返回指针的值。

你不需要`for`循环。使用`memcpy`更明智。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:31:26.937

您的退货声明不正确。`int**`当前，当您实际上想要返回一个整数数组 () 时，您正在返回一个指向整数数组 ( ) 的指针`int*`。我很惊讶你的编译器没有抱怨这个（或者可能是，但你没有提到它）。

尝试：

```
return arrayCopy; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:28:00.587

当您使用 malloc 时，它返回一个 void 指针，您需要将其类型转换为 double。

# javascript - javascript正则表达式检查url中的某些特殊字符

> ID：15777873
> 
> 赞同：1
> 
> 时间：2013-04-03T02:29:05.010
> 
> 标签：javascript, regex

我需要一个 javascript 正则表达式来验证以 http 或 rtmp 开头且长度为 <= 100 且不包含`# % +`, 字符的流式视频 url。我已经提出了`(http|rtmp)://.{10,93}`第一部分和`/^[^#%+,]+$/g`第二个要求。

我对将这些组合成一个正则表达式感到困惑。我将不胜感激这方面的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T02:31:55.080

你不能像这样简单地组合它们吗？

`^(http|rtmp)://[^#%+,]{10,93}$`

然后，您将拥有`http`或`rtmp`后跟`://`10 到 93 个字符，这些字符超出了您希望排除的字符。

# flash - 如何从 Flash Builder 视图中停止或删除视频流

> ID：15777881
> 
> 赞同：0
> 
> 时间：2013-04-03T02:29:46.577
> 
> 标签：flash, view, builder, video-player

一旦用户尝试单击后退按钮或更改视图，我无法让此视图生成的视频流停止。有人可以帮我们弄清楚如何在退出的后退按钮上添加一个停止，以便在单击流时停止然后正确导航？

这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
xmlns:s="library://ns.adobe.com/flex/spark"
viewDeactivate="view1_viewDeactivateHandler(event)"    
initialize="view1_initializeHandler(event)" 
backgroundColor="#000000" title="{data.title}">

<fx:Script>
<![CDATA[
import mx.core.mx_internal;
import mx.events.FlexEvent;

import spark.events.ViewNavigatorEvent;
protected function liveStream_completeHandler(event:Event):void
{
// TODO Auto-generated method stub
if(!this.parentApplication.isTablet) 
theGroup.horizontalScrollPosition = liveStream.width / 2;

bi.visible = false;
}

protected function view1_initializeHandler(event:FlexEvent):void
{
// TODO Auto-generated method stub
systemManager.stage.addEventListener(KeyboardEvent.KEY_DOWN, deviceKeyDownHandler);
systemManager.stage.addEventListener(KeyboardEvent.KEY_UP, deviceKeyUpHandler);
}

protected function deviceKeyDownHandler(event:KeyboardEvent):void
{
// TODO Auto-generated method stub
if(event.keyCode == Keyboard.BACK && navigator.length > 1){
event.preventDefault(); 
this.liveStream.source = null;
this.liveStream.source = VideoPlayer;
}
}

protected function deviceKeyUpHandler(event:KeyboardEvent):void
{
// TODO Auto-generated method stub
if(event.keyCode == Keyboard.BACK && navigator.length > 1){
 navigator.popView(); 
}
}

protected function view1_viewDeactivateHandler(event:ViewNavigatorEvent):void
{
// TODO Auto-generated method stub
systemManager.stage.removeEventListener(KeyboardEvent.KEY_DOWN, deviceKeyDownHandler);
systemManager.stage.removeEventListener(KeyboardEvent.KEY_UP, deviceKeyUpHandler);
}

]]>
</fx:Script>

<fx:Declarations>
<!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:navigationContent>
<s:Button label="Back" visible="{!this.parentApplication.isTablet}" 
click="navigator.popView()"/>
</s:navigationContent>

<s:Scroller width="100%" height="100%" id="streamScroller">
<s:Group id="theGroup">
<s:VideoPlayer width="100%" height="100%" complete="liveStream_completeHandler(event)"
source="some_source/livestream.f4m" maintainProjectionCenter="true" scaleMode="zoom" id="liveStream"/>
</s:Group>
</s:Scroller>
<s:BusyIndicator id="bi" width="40" height="40"  horizontalCenter="0" verticalCenter="0"/>

</s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:03:22.460

显然，您需要将现有的按钮单击行为移动到新的处理程序，如下所示：

```
<s:Button ... click="buttonHandler()"/> 
```

然后添加一个处理程序

```
protected function buttonHandler():void
{
   this.liveStream.source = null // stop stream
   navigator.popView() // moved behavior
} 
```

# java - Java 包问题

> ID：15777885
> 
> 赞同：1
> 
> 时间：2013-04-03T02:30:05.583
> 
> 标签：java, packages

好的，我习惯于像这样构建我的项目

```
|--com.mycompany.interfaces
|         |--IFoo1(public)
|         |--IFoo2(public)
|         |--IBar1(public)
|         |--IBar2(public)
|
|--com.mycompany.foos.impl
|         |--Foo1(default) implements IFoo1
|         |--Foo2(default) implements IFoo2
|
|--com.mycompany.bars.impl
|         |--Bar1(default) implements IBar1
|         |--Bar2(default) implements IBar2
|
|--com.mycompany.services
|         |-FooBarService (public) 
```

我有一个包来组织所有接口，然后实现在它们自己的相关包中。

公共类 FooBarService 必须通过接口 IFoo1、IFoo2 等将 Foo1、Foo2 等的实例返回给该项目外的调用者。但是类 FooBarService 不能访问具体类 Foo1、Foo2 等，因为它们是包作用域的。

什么是不将具体类公开给外部库但仍将实现保留在有意义的多个包中的好方法？或者这甚至可能吗？在.net中，我可以将具体类指定为`internal`，它们在哪里实现以及它们的命名空间是什么，但我想知道在java中是否可以使用这种结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:40:11.407

**首先，您真的需要所有这些接口吗？**除非您构建一个框架、库，或者您预见到多个实现，否则不要四处制作接口，因为它看起来像是好的设计。使用现代 AOP 和模拟库以及可以像魅力一样重构的 IDE，制作数百个接口几乎没有什么好处。为每个 Java Bean POJO 创建一个接口只是为了隐藏特殊的（或所有）setter 是特别愚蠢的（恕我直言）。我知道这似乎是不错的设计，但 KISS 更好。

**让我们假设你这样做。** 您应该处理具有项目依赖关系的包可见性。最好的方法是制作多个项目，例如[多模块 maven 项目](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)。

就像是

```
myproject
|  | myproject-api  // interfaces here, depends on pretty much nothing
|  |  | src
|  |  | pom.xml // or build.xml or whatever
|  | myproject-foo // implementations here, depends on myproject-api
|  |  | src
|  |  | pom.xml // or build.xml or whatever
|  | myproject-bar //implementations here, depends on myproject-api and maybe foo.
|  |  | src
|  |  | pom.xml // or build.xml or whatever
|  pom.xml  // or build.xml or whatever 
```

myproject 构建将生成三个不同的 jar（名称可能不同）：`myproject-api.jar`, `myproject-foo.jar`,`myproject-bar.jar`

如果你正在寻找一个更迂腐的组织[，你应该看看这个家伙的博客](http://edmundkirwan.com/encap/index.html)，但你不能真正执行它（就像你在 C# 中一样）而不分离成单独的项目。

您还应该熟悉[规范的 Java SPI 实践](https://stackoverflow.com/questions/2954372/difference-between-spi-and-api)和[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)（现在它已经标准化了`@Inject`）。

我真的不建议您为服务（尤其是实例化接口的实例）执行[@his 静态方法工厂模式。](https://stackoverflow.com/a/15778111/318174)如果你这样做，充其量会发生[服务定位器模式](http://en.wikipedia.org/wiki/Service_locator_pattern)，但更糟糕的情况可能会发生，开发人员将在构造函数中连接依赖对象（即聚合构造模式），有时你会遇到邪恶的单例模式。最后，静态方法始终可用，导致不可预测的使用和生命周期（与 DI 相比）。

此外，如果您真的很喜欢冒险，您可以[去看看 OSGI](https://stackoverflow.com/questions/7498540/osgi-java-modularity-and-jigsaw)。

无论 SPI 和 OSGI 如何，我都强烈推荐多模块方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:56:26.730

我对“一个包中的每个接口，不同包中按类型分开的实现”的分离不太满意。我会将实现和接口放在一个包中，并按功能进一步分开。但你当然有充分的理由。

除了“大”解决方案（像 OSGi 这样的模块系统，除了已发布的接口之外隐藏任何东西），您只能隐藏带有工厂和内部类的具体类。关键是将工厂放在`impl`包内，并使具体类成为工厂的内部类。工厂显然仍然对外可见，但关键是防止程序员使用具体实现的细节，这不是问题。

所以：

```
package com.mycompany.foos.impl
public class FooFactory {
    private static class FooImpl implements IFoo1 {
        ...
    }
    public static IFoo getFoo() {
        return new FooImpl();
    }
} 
```

如果您的意图是防止对类进行任何更深入的检查，那么纯 Java 确实无法做到；这不是可见性修饰符的目的；并且需要一些模块系统。但即便如此，也可以通过反射检查该类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:32:54.560

您需要有一个工厂类，它将返回您的实现实例。

就像是

```
if(requestedClass.equals("IFoo1"))
     return(IFoo1)new Foo1(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T02:35:10.383

在 Java 中不可能做到这一点。外部库可以使用与您的应用程序相同的包创建一个类，并且它将具有包可见性。

# java - 如何正确使用 bouncycastle 的 PaddedBufferedBlockCipher？

> ID：15777886
> 
> 赞同：4
> 
> 时间：2013-04-03T02:30:07.157
> 
> 标签：java, cryptography, bouncycastle

我一直在研究 BouncyCastle 的加密 API 的 java 版本。[我对PaddedBufferedBlockCipher](http://www.bouncycastle.org/docs/docs1.4/org/bouncycastle/crypto/paddings/PaddedBufferedBlockCipher.html?is-external=true)类有点困惑。我理解（可能是错误的？）它的目的是用于增量处理加密，即从文件中读取数据。

当我调用一次 processBytes() 时，一次提供所有要加密的数据，然后 doFinal() 它按预期工作。但是，当我使用适当的偏移量/长度对 processBytes 进行多次调用，意图以较小的块进行处理，然后是 doFinal() 时，它失败了。谁能解释为什么以下代码失败？假设明文长度为 64 字节，并且以 4 x 16 字节块执行加密，则对值进行硬编码。

```
byte[] key= Hex.decode("a4ea1a7227e032c37f5635e70ba1bd38a4ea1a7227e032c37f5635e70ba1bd38");
byte[] iv= Hex.decode("a4ea1a7227e032c37f5635e70ba1bd38");
byte[] clearText= Hex.decode("28d3966905e33c063e7b74c7c7dcb2d688d48d53101d2a6901d365146faf0c9cde3da9ef37664a5e32e4e468f9b52f587d76b78caaf9d9823dd9eb2c1d700d7c");

BlockCipher bc  = new AESFastEngine();
CBCBlockCipher cipher   = new CBCBlockCipher(bc);
PaddedBufferedBlockCipher mode  = new PaddedBufferedBlockCipher(cipher);
KeyParameter kp = new KeyParameter(key);
CipherParameters ivAndKey= new ParametersWithIV(kp, iv);
mode.init(true, ivAndKey);

byte[] outBuf   = new byte[mode.getOutputSize(clearText.length)];

int blockSize    = mode.getBlockSize();

// process the 64 bytes of clearText, in 4 x 16-byte chunks 
for (int i = 0; i < 4; i++) {

    mode.processBytes(clearText, i * blockSize, blockSize, outBuf, i * blockSize);
}

try {
    // call doFinal on the last block (bytes 48->64)
    mode.doFinal(outBuf, 48);
} catch (Exception e){}

System.out.println(new String(Hex.encode(outBuf))); 
```

The expected output is: fe391ed41650f3b344ed3d200ffa3c55e71b1d97dbd91c0fbdd0989c3a48822e7e5230e9d6d073bc0752436d9bea9f26328a11586a290e712fbbf874ddfd4ba14e28600e55c7d6ac69467693320a82d3

But the result I'm getting is: 00000000000000000000000000000000fe391ed41650f3b344ed3d200ffa3c55e71b1d97dbd91c0fbdd0989c3a48822e328a11586a290e712fbbf874ddfd4ba14e28600e55c7d6ac69467693320a82d3

**编辑**

根据 PeterDettman 的建议修改代码：

```
int bytesProcessed = 0;

for (int i = 0; i < 4; i++) {
            // Fixed to be '+='
    bytesProcessed += mode.processBytes(clearText, i * blockSize, blockSize, outBuf, bytesProcessed);
}

mode.doFinal(outBuf, bytesProcessed); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:02:13.497

至于如何修复代码：processBytes 方法返回它写入输出的实际数量，因此您需要跟踪 outBuf 中的位置并为每次调用添加返回的长度（对于 doFinal 也是如此）。请注意，您不应在内部假设任何特定的缓冲区大小，或者是否立即或延迟刷新“满”缓冲区。

至于原因：在解密的情况下，填充模式不能输出一个块，直到它知道是否还有更多块要到来（因为它会从最后一个块中删除填充）。所以它被迫对输出块“懒惰”。对于加密，情况并非如此，但我猜它是为了 processBytes 代码的简单性/一致性而完成的。

# iphone - UITableViewCell 重用：单元格显示不正确 - 未按预期重用

> ID：15777890
> 
> 赞同：7
> 
> 时间：2013-04-03T02:30:44.657
> 
> 标签：iphone, ios, xcode, uitableview

我创建了一个多选列表，允许选择多种成分。

在我的表格视图中，可以根据成分的列表属性启用或禁用单元格。如果设置了成分的列表属性，则单元格将被禁用。

但是，当重新使用一个单元格时，它并没有像我预期的那样显示。下面的图片比我更有效地解释了这个问题。

**（不应启用的成分是：蛋糕糖霜、炼乳和香粉。）**

![](https://i.stack.imgur.com/tzBfU.png)

1.  第一张图片显示了三种成分按预期禁用和注释。

2.  但是，在第二张图片中，向下滚动显示某些成分显示为已禁用（但您可以选择它们，并且它们具有完整的交互作用）。

3.  第三张图片显示了向上滚动到顶部后的列表。一些成分已显示为灰色，请注意玉米粉是如何显示为启用的，即使您无法交互/选择它。

问题与细胞重用有关。重复使用时，单元格似乎没有“重置”，因此保留了它的一些“旧”外观。

下面是来自 的代码`cellForRowAtIndexPath:`，因为我确定这就是问题所在（尽管我看不出有什么问题）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }    

    // Fetches the corresponding Ingredient from the ingredientArray
    Ingredient *ingredient = [self.ingredientArray objectAtIndex:indexPath.row];

    if ([ingredient.list isEqualToString:@"Lardr"])
    {
        cell.userInteractionEnabled = NO;
        cell.detailTextLabel.text = @"   Already in your Lardr";
    }
    else if ([ingredient.list isEqualToString:@"Shopping List"])
    {
        cell.userInteractionEnabled = NO;
        cell.detailTextLabel.text = @"   Already on your Shopping List";
    }
    else
    {
        cell.userInteractionEnabled = YES;
        cell.detailTextLabel.text = @"";
    }

    // Add a checkmark accessory to the cell if the ingredient is on the selectedIngredients array
    if ([self.selectedIngredients containsObject:ingredient])
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    else
        cell.accessoryType = UITableViewCellAccessoryNone;

    cell.textLabel.text = ingredient.name;

    return cell;
} 
```

我想尽办法解决这个问题，我已经阅读了所有甚至远程相关的 SO 问题，但无济于事。有什么问题？！

* * *

我的逻辑是，对于每个单元格，都设置了 textLabel、detailTextLabel、userInteractionEnabled 和 accessoryType 属性，无论通过 if 语句的哪个执行路径，所以我看不出为什么，即使在重用之后，单元格也不能正确显示。

* * *

**编辑：**为了找出问题的根源，我尝试通过在获取相应成分的行上方添加以下内容，将单元格“重置”回默认值：但无济于事。

```
cell.userInteractionEnabled = YES;
cell.textLabel.text = nil;
cell.detailTextLabel.text = nil;
cell.accessoryType = UITableViewAccessoryNone; 
```

但是，有趣且完全不合逻辑的地方-当我将以下行`cell.textLabel.text = ingredient.name`移到读取行的正下方`Ingredient *ingredient = [self.ingredientArray objectAtIndex:indexPath.row];`时，即使在下面进一步设置了 userInteraction （并且相关单元格按预期禁用），也绝对不会将样式应用于任何单元格.

我在想，设置单元格属性的顺序重要吗？我知道不应该，但外观会根据上述情况发生变化。

* * *

**更新：我已经解决了这个问题；请参阅下面的答案。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:32:08.800

**在willDisplayCell**中明确设置单元格的颜色

 **```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{

 Ingredient *ingredient = [self.ingredientArray objectAtIndex:indexPath.row];

    if ([ingredient.list isEqualToString:@"Lardr"])
    {
        cell.textLabel.textColor = [UIColor lightGrayColor];
    }
    else if ([ingredient.list isEqualToString:@"Shopping List"])
    {
        cell.textLabel.textColor = [UIColor lightGrayColor];
    }
    else
    {
        cell.textLabel.textColor = [UIColor blackColor];
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:48:20.897

我已经解决了这个问题。问题是我在设置单元格文本之前设置了 userInteractionEnabled（感谢评论中 Carl Veazey的[链接）。](https://stackoverflow.com/questions/11654551/weird-ios-bug-with-uitableviewcell-and-userinteractionenabled)

我通过在调整 userInteractionEnabled 属性之前设置单元格的文本来解决此问题。但是，没有对单元格应用样式（即使该单元格被禁用）。因此，我必须通过设置单元格的 textColor 来手动设置单元格的样式。下面是带有注释的调整后的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    } 

    // Fetches the relevent ingredient from the ingredientArray
    Ingredient *ingredient = [self.ingredientArray objectAtIndex:indexPath.row];
    cell.textLabel.text = ingredient.name; // Moved this line before setting userInteractionEnabled

    if ([ingredient.list isEqualToString:@"Lardr"])
    {
        cell.userInteractionEnabled = NO;
        cell.detailTextLabel.text = @"   Already in your Lardr";
        cell.textLabel.textColor = [UIColor grayColor]; // Update the color accordingly
    }
    else if ([ingredient.list isEqualToString:@"Shopping List"])
    {
        cell.userInteractionEnabled = NO;
        cell.detailTextLabel.text = @"   Already on your Shopping List";
        cell.textLabel.textColor = [UIColor grayColor];
    }
    else
    {
        cell.userInteractionEnabled = YES;
        cell.detailTextLabel.text = @"";
        cell.textLabel.textColor = [UIColor blackColor];
    }

    // Add a checkmark accessory to the cell if the ingredient is on the selectedIngredients array
    if ([self.selectedIngredients containsObject:ingredient])
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    else
        cell.accessoryType = UITableViewCellAccessoryNone;

    return cell;
} 
```

显然，设置单元格属性的顺序应该是无关紧要的，所以我确信这是一个错误。希望这对遇到同样问题的其他人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:53:02.050

维护表格视图中选定单元格的列表，在重用单元格时只需检查单元格是否已在选择列表中。如果是，只需在那里进行自定义。像这样试试。

宣言

```
 TableViewCell *_selectedCell; 
```

自定义行以存储选定的单元格并维护选择列表。

```
_selectedCell = (TableViewCell*)[self.ItemTable cellForRowAtIndexPath:[NSIndexPath indexPathForRow:rowIndex inSection:0]]; 
```

在 cellForRowAtIndexPath 检查当前单元格是否在

```
if(_selectedCell)
        [cell setBackgroundColor:[UIColor whiteColor]];// Customize the cell 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T03:54:14.860

将以下代码与情节提要中的表视图控制器一起使用，一切正常。似乎在不使用情节提要时默认获得的表格视图存在一些错误：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Fetches the corresponding Ingredient from the ingredientArray
    Ingredient *ingredient = [self.ingredientArray objectAtIndex:indexPath.row];

    if ([ingredient.list isEqualToString:@"Lardr"])
    {
        cell.userInteractionEnabled = NO;
        cell.detailTextLabel.text = @"   Already in your Lardr";
        cell.textLabel.textColor = [UIColor lightGrayColor];
    }
    else if ([ingredient.list isEqualToString:@"Shopping List"])
    {
        cell.userInteractionEnabled = NO;
        cell.detailTextLabel.text = @"   Already on your Shopping List";
        cell.textLabel.textColor = [UIColor lightGrayColor];
    }
    else
    {
        cell.userInteractionEnabled = YES;
        cell.detailTextLabel.text = @"";
        cell.textLabel.textColor = [UIColor blackColor];
    }

    if ([self.selectedIngredients containsObject:ingredient])
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    else
        cell.accessoryType = UITableViewCellAccessoryNone;

    cell.textLabel.text = ingredient.name;

    return cell;
} 
```

请注意，我使用 dequeueReusableCellWithIdentifier:forIndexPath: 而不是 dequeueReusableCellWithIdentifier:，并消除了 if 子句。这与您的问题没有任何关系，但它是为情节提要中的表格视图执行此操作的最新方法。**

# iphone - iOS 上的 Iphone5 / ios6.1.3 和 Facebook SDK 3.2.1 - 设备上的 com.facebook.sdk 错误 2

> ID：15777892
> 
> 赞同：0
> 
> 时间：2013-04-03T02:30:47.570
> 
> 标签：iphone, ios, facebook

当我运行 LoginUI 并单击取消按钮时，尝试登录而不是再次登录

我尝试在 iOS 上使用 Iphone4s / ios6.1.3 和 Facebook SDK 3.2.1，而不是取消登录可以再次登录。

iphone5发生了什么：

`[FBSession.activeSession closeAndClearTokenInformation];` 不行

这是我的代码：

```
 - (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
    {
        switch (state) {
            case FBSessionStateOpen:
                if (!error) {
                }

        break;
    case FBSessionStateClosed:
    case FBSessionStateClosedLoginFailed:
        [FBSession.activeSession closeAndClearTokenInformation];

        break;
    default:
        break;
}

[[NSNotificationCenter defaultCenter]
 postNotificationName:FBSessionStateChangedNotification
 object:session];

if (error) {
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:error.localizedDescription
                              delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
    [alertView show];
    }
}

- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    return [FBSession openActiveSessionWithReadPermissions:nil
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self sessionStateChanged:session
                                                                 state:state
                                                                 error:error];
                                         }];
}

- (void) closeSession {
    [FBSession.activeSession closeAndClearTokenInformation];
}

- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {

    return [FBSession.activeSession handleOpenURL:url];
}

- (void)sessionStateChanged:(NSNotification*)notification {

    if (FBSession.activeSession.isOpen) {

        if (nil == self.facebook) {
            self.facebook = [[Facebook alloc]
                             initWithAppId:FBSession.activeSession.appID
                             andDelegate:nil];

            self.facebook.accessToken = FBSession.activeSession.accessTokenData.accessToken;
            self.facebook.expirationDate = FBSession.activeSession.accessTokenData.expirationDate;
        }
    } else {
        self.facebook = nil;
    }
}

- (void) Loginfb {
    AppDelegate *appDelegate =
    [[UIApplication sharedApplication] delegate];

    if (FBSession.activeSession.isOpen) {
    } else {   
        [appDelegate openSessionWithAllowLoginUI:YES];
    } 
```

我该如何解决这个问题？`Thanks in advance.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:35:11.083

如果您使用系统 Facebook 帐户登录并且未使用快速应用切换登录，则用户第一次拒绝“读取”权限时，您的应用在手机的 Facebook 隐私设置中的访问权限设置为关闭。

从那时起，您将无法再使用 SDK 授予访问权限。相反，用户必须手动进入他们手机的设置 - 隐私 - Facebook 并启用您的应用程序的访问权限。

这不适用于“发布”权限。即使用户第一次拒绝“发布”权限，您也可以继续使用 SDK 请求“发布”权限。

# java - 使用哪种布局来确保组件尺寸的固定比例？

> ID：15777894
> 
> 赞同：0
> 
> 时间：2013-04-03T02:30:53.013
> 
> 标签：java, swing, layout, layout-manager

我想要一个摆动布局，其中组件可以放置在任何地方（而不是固定位置），并且组件的位置不会改变，并且它们的大小（相对于彼此）保持固定比例。当最外面的框架被调整大小时，一切看起来都一样，只是它由于调整大小而变得更大或更小。

我看到 Border 强迫我把所有东西都放在它为数不多的固定位置之一。我真的不喜欢那样。Grid 和 Flow 不是我需要的。哪个是最好的布局？可能是 MigLayout 吗？

！[我可以使用摇摆布局非常容易地做到这一点吗？它几乎应该是一个不费吹灰之力的使用方法，并且不应该涉及任何复杂性。](https://i.stack.imgur.com/og7F3.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T02:56:26.373

> 这是最好的布局。

您不必总是使用单个布局管理器。

例如，您可能从 BorderLayout 开始。右边的面板去东，其余的去中心。然后将中心面板分解以使用具有不同布局的面板。

# javascript - 将对象和函数转换为有效的 JavaScript 源代码？

> ID：15777895
> 
> 赞同：7
> 
> 时间：2013-04-03T02:31:04.320
> 
> 标签：javascript, node.js

我有一个看起来像这样的 JavaScript 对象：

```
{ bacon: [Function], hello: [Function], tables: [Function] } 
```

`[Function]`实际的 JavaScript 函数在哪里。

我想把它写到一个`.js`内容如下的文件中：

```
var Templates = /*source code here*/ 
```

如何将对象和函数属性的源代码作为字符串获取，以便评估此“源代码字符串”将返回相同的对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T02:56:10.180

我推出了自己的序列化程序：

```
var templates = { /* object to stringify */ };
var properties = [];
_.each(templates, function(value, key) {
    properties.push(JSON.stringify(key)+': '+value.toString());
});
var sourceCode = 'var Templates = {' + properties.join(",\n") +'};'; 
```

这让我回来了：

```
var Templates = {"bacon": function anonymous(locals, attrs, escape, rethrow, merge) { ... },
"hello": function anonymous(locals, attrs, escape, rethrow, merge) { ... },
"tables": function anonymous(locals, attrs, escape, rethrow, merge) { ... }
}; 
```

（为简洁起见，剪掉了身体）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T02:37:36.420

在 Javascript 中，函数是一个对象。该`Function`对象支持该方法`toString()`。这实际上会给你一个函数的源代码。像这样：

```
function foo() {
    var a = 1 + 1;
}

alert(foo.toString()); // will give you the above definition 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T02:35:48.580

如果我明白你想说什么，这将向我显示功能代码：

```
myObj = {

    myMethod: function() {
        console.log("This is my function");
    }
}

console.log(myObj.myMethod.toString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T02:45:07.473

您可以使用[JSON.stringify](http://msdn.microsoft.com/en-us/library/ie/cc836459%28v=vs.94%29.aspx)通过`replacer`参数来完成此操作：

```
var myObj = { a  : 1, b : function(val) { doStuff(); };

var replacer = function(key, val) {
      return "key : " + val.toString();
};

console.log(JSON.stringify(myObj, replacer)); 
```

我没有对此进行测试，但这个想法应该是合理的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T05:20:06.027

如果您可能想使用 node.js，您可以使用可以处理 AST 的库。你可以看看[https://github.com/substack/node-falafel](https://github.com/substack/node-falafel)

# eclipse - 在 JSP 中显示汉字的文本文档

> ID：15777897
> 
> 赞同：0
> 
> 时间：2013-04-03T02:31:14.157
> 
> 标签：eclipse, jsp, character-encoding

我正在使用 Eclipse 创建一个小型 Web 项目。我有一篇中文文本的文章要显示在我的jsp页面中。文章以 UTF-8 保存，我已将字符编码设置为 utf-8。我在 jsp 文件中输入的汉字显示正常，但是当我尝试读入并显示文章文本时，汉字显示不正确。这是我用于阅读文档并将其显示在我的 JSP 页面中的代码。

```
<p>你好，你今天怎么样呢？&lt;/p>
<p>我今天很好。你呢&lt;/p>

<%
     BufferedReader input = new BufferedReader(new FileReader("testArticle.txt"));
     String line = "";
     while ((line = input.readLine()) != null) {
         out.println(line + "<BR>");
     }
     out.flush();
     input.close();
%> 
```

段落标签中的中文显示很好，但其余部分都搞砸了。我不确定出了什么问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:41:11.253

可能无法读取正确字符集中的`BufferedReader`数据。试试这个：

```
InputStreamReader input = new InputStreamReader(new FileInputStream("testArticle.txt"), "UTF-8");  
BufferedReader br = new BufferedReader(input); 
```

您是否将 Eclipse 编码设置为 UTF-8？请将您的 JSP 页面编码也设置为 UTF-8。

# cloud-foundry - Cloud Foundry 应用程序内通信

> ID：15777900
> 
> 赞同：5
> 
> 时间：2013-04-03T02:31:27.507
> 
> 标签：cloud-foundry, paas

我有 3 个应用程序在私有 vcap 实例中运行。一个充当面向客户的 Web 应用程序，而另一个是后端系统，一个通过 Web 应用程序使用的 REST 公开数据服务，另一个应用程序通过 rabbitmq 异步写入数据库。

现在，我的问题是：

1）我怎样才能直接与其他 url 通信，而不是面向客户的 webapp 调用公共 URL？

2) 如何将 webapp 和数据库写入器应用程序绑定到同一个 rabbit 实例。我将选择退出自动重新配置，但我如何获取 rabbit 连接参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:43:07.883

我要反过来回答这些！您可以通过检查 VCAP_SERVICES 环境变量来绑定应用程序，这将包含绑定 Rabbit 实例的详细信息。

当您部署应用程序的实例时，它会在 VM（称为 DEA）上启动。应用程序实例在 VM 上分配有一个端口。在内部，所有 DEA 都可以“看到”彼此，因此应用程序没有理由不能在私有 IP 地址上与运行在不同 DEA 上的另一个应用程序通信。

显然，在推送之前，您不知道应用程序将使用哪个私有 IP 地址甚至端口，因此我建议您让每个应用程序在推送后通过 Rabbit “注册”它的地址，以便其他应用程序可以找到它.

# c# - 无法生成 DocuSign 集成商密钥

> ID：15777901
> 
> 赞同：0
> 
> 时间：2013-04-03T02:31:35.273
> 
> 标签：c#, integration, document, docusignapi

我们正在集成 DocuSign 以获取用户的姓名首字母。当我尝试从此处提到的 DocuSign 开发人员沙箱生成集成商密钥时（[http://community.docusign.com/t5/Announcements-Knowledge-Base/How-to-Get-and-Setup-Your-Integrator-Key /ta-p/4587](http://community.docusign.com/t5/Announcements-Knowledge-Base/How-to-Get-and-Setup-Your-Integrator-Key/ta-p/4587)），它重新加载页面但什么也不做。

知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T19:18:27.167

这是 DocuSign 的一个已知问题，已解决。

[http://community.docusign.com/t5/Misc-Questions/Get-Demo-Integrator-Key-Doesn-t-Return-a-Key/mp/18167/highlight/true#M931](http://community.docusign.com/t5/Misc-Questions/Get-Demo-Integrator-Key-Doesn-t-Return-a-Key/m-p/18167/highlight/true#M931)

# ruby-on-rails-3 - 我应该在我的模型中写什么？

> ID：15777908
> 
> 赞同：0
> 
> 时间：2013-04-03T02:32:46.927
> 
> 标签：ruby-on-rails-3

我对rails很陌生。我有以下文本字段：

```
<%= form_for(@user) do |f| %> <div class="field">
  <%= f.text_field :nemail, :placeholder => " First Name" %>   </div> <div class="actions">
  <%= f.submit %>   </div>
<% end %> 
```

我想将输入的文本放入符号 :nemail 中，然后将 :nemail 与 @user.email 进行比较。我不知道在模型中为 :nemail 写什么，目前只有

```
def loginemail
  end 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:17:21.047

你可能想知道什么样的比较。此外，目前您的表单将转到 /users POST 而不是 loginemail。那是你要的吗？在我看来，您的表格没有任何意义。您如何将新用户的属性与您尚未获得的属性进行比较？

比较：

```
def loginemail
   @user = ..
   if params[:nemail] == @user.email
      ..
   else ...
   end
end 
```

# php - PHP：未定义的索引错误

> ID：15777916
> 
> 赞同：-3
> 
> 时间：2013-04-03T02:33:50.367
> 
> 标签：php

这是我目前唯一遇到问题的代码部分

```
<?php
include('config.php');

$term = $_POST['term']; <----- this would be line 22 in the error

$sql = mysql_query("select * from customers where F_Name like '%$term%' or L_Name like '%$term%'     or H_Phone like '%$term%'"); 
if (mysql_num_rows($sql) <= 0) {
// no results
echo 'No results found!';
} else 
while ($row = mysql_fetch_array($sql)){
}   
?> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:53:41.517

当您的页面在浏览器中加载时，通常是通过 GET 方法完成的；当这种情况发生时，你的`$_POST`将是空的。

要仅在提交表单时执行搜索，您需要如下代码：

```
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // do your search here
    $term = filter_input(INPUT_POST, 'term', FILTER_UNSAFE_RAW);
    if ($term !== null) {
        $stmt = $db->prepare('select * 
            from customers 
            where F_Name like ? or L_Name like ? or H_Phone like ?");
        $stmt->execute(array("%$term%", "%$term%", "%$term%"));
        $results = $stmt->fetchAll(PDO::FETCH_ASSOC);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:36:31.960

`$_POST['term']`最初转到该页面时未设置。

您需要做的是在尝试使用该变量之前检查该变量是否存在。

```
if (isset($_POST['term']))
{
    $term = $_POST['term'];
}
    else
{
    $term = 'something else';
} 
```

或将所有这些包装在顶部，这样您就不会在数据库中插入一些随机值。

此外，您至少需要对[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)友好。`mysql`不应使用扩展名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:47:11.303

用于`$_POST[]`设置变量意味着您来自先前的表单事务，该事务往往`$_POST[]`具有值，否则最终将*不存在*，可能导致**错误发生**

一般举个例子。

如果提交了这样的表格

```
<form method='post' action=''>
<input name='term' value='SampleValue'>
<input type='submit'>
</form> 
```

你最终会得到`$_POST['term']`一个值为`<input name='term'>`

否则，如果不是

`$_POST['term']`将不存在并会生成一个`ERROR`

# python - Enthought Python 和 MatPlotLib 中出现乱码的 .csv 时间序列数据

> ID：15777919
> 
> 赞同：0
> 
> 时间：2013-04-03T02:34:22.300
> 
> 标签：python, csv, character-encoding, matplotlib, enthought

编辑：

谢谢你的及时回复，乔纳森。

正如您在下面建议的那样，我尝试使用`numpy.loadtxt`. 不幸的是，出现了类似的错误。的输出`data = numpy.loadtxt("MyData.csv", skiprows = 39, delimiter = ",")`是

```
Traceback (most recent call last):
  File "/Users/aleksnavratil/Desktop/sandbox.py", line 23, in <module>
    data = numpy.loadtxt("MyData.csv", skiprows = 39, delimiter = ",")
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/numpy/lib/npyio.py", line 805, in loadtxt
    items = [conv(val) for (conv, val) in zip(converters, vals)]
ValueError: could not convert string to float: ﾿ÒﾭóﾈÀëÐٟﾡB.AØME84ﾊﾓ 
```

任意 skiprows kwargs 都会引发相同的错误。也许这为字符编码问题假设提供了依据。我仍然不知所措。

/编辑

我有一个由科学仪器（CETR Universal Media Tester UMT-2）生成的[.csv 数据文件。](http://aleksnavratil.com/wp-content/uploads/2013/04/MyData.csv)数据代表测量的时间序列。当我从 Python 访问该文件时，它的行为很奇怪，但在通过 cat、Nano、TextEdit 等访问时表现良好。这种现象在 Windows 7 和 Snow Leopard 机器上仍然存在，尽管两者都使用 Enthought Scientific Python 发行版。

的输出

```
f = codecs.open("MyData.csv",encoding="ascii")
data = f.xreadlines()
for line in data:
    print line 
```

是

```
****
?****************************************
?****************************************

ÿÿÿZ
Ðí0

þÿÿî
üÿÿð
éí0
óÿÿí
ôí0 
```

ETC…。

这闻起来像一个编码问题，所以我调查了一下：

的输出`file -i "MyData.csv"`是

```
MyData.csv: text/plain; charset=us-ascii 
```

使用 CharDet 模块；的输出`chardetect.py "MyData.csv"`是

```
MyData.csv: ascii with confidence 1.0 
```

使用 Codecs 包，我尝试了几种常见的编码都无济于事。另外，我尝试使用`Matplotlib's` `csv2rec`. 的输出

```
r = mlab.csv2rec(codecs.open("MyData.csv", 'rU',),skiprows=39, delimiter=",") 
```

是

```
Traceback (most recent call last):
  File "/Volumes/AVN2109/Raw Data/CETR_Plotter.py", line 40, in <module>
    r = mlab.csv2rec(codecs.open("MyData.csv", 'rU',),skiprows=39, delimiter=",")
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-        packages/matplotlib/mlab.py", line 2181, in csv2rec
    process_skiprows(reader)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-    packages/matplotlib/mlab.py", line 2176, in process_skiprows
    for i, row in enumerate(reader):
Error: line contains NULL byte 
```

这对于任意的 skiprows kwargs 也是如此。

此外，该仪器还可以选择生成 .txt（以及 .csv）作为其输出。两种情况下的行为是相同的。也许我错过了一些明显的东西。有谁知道如何说服这些数据与 Python 一起玩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:30:36.833

您需要用来加载数据的包是`numpy`，我建议您开始使用的功能是`loadtxt`. 它是最简单的，并且在您的情况下效果很好，因为您的数据是同质的：

```
import numpy
data = numpy.loadtxt("MyData.csv", skiprows = 39, delimiter = ",") 
```

当然，您的文件有点复杂，看似 2 个数组，顶部有一些您可能想或不想扔掉的东西。您可以对此进行细化，首先加载元数据，然后加载数值。您可能也有兴趣保留列的标题以创建[“结构化数组”](http://docs.scipy.org/doc/numpy/user/basics.rec.html) ，也称为“记录数组”。为此，我建议您首先通过打开文件并检测列的名称及其单位，然后像上面一样将此 dtype 传递给 loadtxt 来构建 dtype。

# sql - 如何添加 SQL LocalDB 权限

> ID：15777927
> 
> 赞同：1
> 
> 时间：2013-04-03T02:35:17.920
> 
> 标签：sql, authentication, database-permissions, localdb

我..“意外”删除了我的 Windows 登录到 localdb 的数据库权限

知道如何将权限授予该数据库吗？

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-04-03T09:56:37.603

检查以下内容：

[http://msdn.microsoft.com/en-us/library/ms189751(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms189751%28v=sql.100%29.aspx)

[http://technet.microsoft.com/en-us/library/aa337562(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/aa337562%28v=sql.100%29.aspx)

[http://msdn.microsoft.com/en-us/library/ms173463.aspx](http://msdn.microsoft.com/en-us/library/ms173463.aspx)

[t-sql 创建用户并授予对存储过程的执行权限](https://stackoverflow.com/questions/3374436/t-sql-create-user-and-grant-execute-on-permission-for-stored-procedures#)

# ios - 带有 IOS 的 Django：通过 POST 获取多部分数据（json + 图像）

> ID：15777928
> 
> 赞同：5
> 
> 时间：2013-04-03T02:35:19.823
> 
> 标签：ios, django, post, file-upload, django-forms

我是 Django 和 IOS 的新手。我陷入了这种多部分数据传递中，需要您的建议！

目前，我正在研究图像上传功能。从客户端，我想将图像文件与附加信息（例如 access_token）一起发送。在服务器端，我尝试通过 request.raw_post_data 获取 json 数据，并通过 reuqest.FILES 获取图像

事实证明，我只能获取 JSON 数据或图像，不能同时获取两者。更糟糕的是，客户端只返回 500 错误而没有其他信息......

这是**客户端代码**

```
NSURL *url = [NSURL URLWithString:urlPath];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

// The parameter to send
NSDictionary * params = dictionaryToSent;

// the image need to upload
NSData *imageData = UIImageJPEGRepresentation(image, 1);
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"" parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData
     appendPartWithFileData:imageData
     name:@"image"
     fileName:@"uniqueFileName"
     mimeType:@"image/jpeg"];
}];

AFJSONRequestOperation* jsonOperation=[[AFJSONRequestOperation alloc]initWithRequest:request];

[jsonOperation setUploadProgressBlock:^(NSInteger bytesWritten, NSInteger totalBytesWritten, NSInteger totalBytesExpectedToWrite) {

    NSLog(@"Sent %d of %d bytes", totalBytesWritten, totalBytesExpectedToWrite);

}];

[jsonOperation setCompletionBlockWithSuccess: ^(AFHTTPRequestOperation *operation, id JSON) {

   // Handler for request is completed    
}failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    //Handler for request is failured;
}];

[jsonOperation start]; 
```

我在**服务器端**尝试了两种方法。一个是给我500错误的表格

```
form = UploadFileForm(request.POST, request.FILES) 
```

另一个如下（请忽略缩进问题）

```
data=json.loads(request.raw_post_data)
ck_token = data['access_token']
if 'image' in request.FILES:
upload = request.FILES['image']
filename = upload.name
user = Basic.objects.get(ck_token = ck_token)
post = Post(user_id = user.user_id, image = upload, caption = "Hello World")
post.save()
ret_json = { 
    'success': True, 
    'post_id': post.id
}
else:
ret_json = { 
    'success': False,
    'error_message': "image not found"
} 
```

使用第二种方法，我可以上传图片但找不到 access_token。我想知道 access_token 存储在哪里-.-||| 还是客户端的问题？

非常感谢您的帮助！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T08:48:11.367

应该是服务器端的问题。而不是从 获取`request.raw_post_data`，令牌信息实际上是在`request.POST`. 所以它会像：

```
ck_token = request.POST['access_token'] 
```

# python - 如何找到输入数字的最大值

> ID：15777929
> 
> 赞同：0
> 
> 时间：2013-04-03T02:35:20.173
> 
> 标签：python, max

如何找到输入数字的最大值？这是我到目前为止所拥有的。它给了我一条错误消息：'"int" object is not iterable'

```
def greatest(num):
    for index in range(10):
        num=input('Enter the number of units sold')
    print max(num) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:39:23.863

您可以将它们全部放入一个列表中，然后`max()`在该*列表上运行，*或者（如果您不需要该列表用于其他任何事情）简单地保持您自己的最大值，例如：

```
def greatest(num):   # why num here??
    maxnum = -1
    for index in range(10):
        num = input ('Enter the number of units sold')
        if num > maxnum:
            maxnum = num
    print maxnum 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:39:44.827

您需要在列表或其他可迭代数据结构中累积数字：

```
def greatest():
    data = [input('Enter the number of units sold') for _ in range(10)]
    print max(data) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T02:41:23.647

您需要将那些从用户那里获得的数字保存在数据结构中，然后在完成收集后找到最大值。现在，您只是`num`在每次迭代中覆盖 的值，这根本没有帮助，因为您无法检查以前的输入数字。这就是为什么你从 中得到一个错误`max`，期望有一些东西可以迭代。与你到目前为止所拥有的一样，这样的事情会奏效，

```
def greatest():
    l = []
    for index in range(10):
        l.append(input('Enter the number of units sold'))
    return max(l) 
```

但这会更好：

```
def greatest():
    return max(input('Enter the number of units sold') for _ in xrange(10)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T02:40:42.980

错误消息是因为`max`为您提供了一系列数字中的最大数字，而`input`返回一个 int。

你可能想要做的是：

```
def greatest(num):
    numbers = []
    for index in range(10):
        numbers.append(input('Enter the number of units sold'))
    print max(numbers) 
```

# riak - 跨多个存储桶的 Riak 搜索

> ID：15777932
> 
> 赞同：2
> 
> 时间：2013-04-03T02:35:49.787
> 
> 标签：riak, riak-search

我有三个存储桶，分别称为 A、B 和 C。每个存储桶都有一些具有相同结构的内容，这些内容已在 Riak Search 中被索引。为简单起见，我们假设有一个电子邮件地址和一个密码。

我想创建一个跨越所有 3 个存储桶的 Riak 搜索或 Map/Reduce（如有必要）。但我尝试的任何方法都不起作用。Riak Search 有一种没有索引的格式（桶？），但需要在参数中指定索引，否则它总是返回 0 条记录。

[此处描述](http://docs.basho.com/riak/latest/references/appendices/MapReduce-Implementation/)的Map/Reduces显示“输入”字段以获取数组，但您不能提供存储桶/查询对的数组来运行搜索，只能提供存储桶/键对。

看起来这应该是可能的，但我不知道如何。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-24T16:37:17.677

在 Riak 2.x 中，可以将索引分配给多个存储桶。它非常适合您的用例，因为所有存储桶的内容结构都是相同的（因此它们适合相同的 Solr 模式）。搜索索引将返回与其关联的所有存储桶的结果，这是您需要的。您仍然知道每条记录来自哪个存储桶 - 使用搜索结果中返回的位置数据（类型、存储桶、键）。

# python - 在 gunicorn 下运行时，Mako 无法使用 TopLevelLookupException 定位模板

> ID：15777936
> 
> 赞同：1
> 
> 时间：2013-04-03T02:36:11.707
> 
> 标签：python, flask, gunicorn, mako

我使用以下代码在烧瓶应用程序中指定我的模板目录：

```
directory = os.path.join(os.path.dirname(os.path.realpath(__file__)), "templates/")
lookup = TemplateLookup([directory]) 
```

当我启动烧瓶测试服务器时，这可以正常工作。当我在 python 控制台中手动指定目录时，它也可以正常工作。由于某种原因，它在被 gunicorn 调用时不起作用；相反，任何 get_template 调用都会失败并返回 TopLevelLookupException，即使创建 TemplateLookup 时使用的目录列表与手动运行时完全相同。

我喜欢任何想法。我已经通过以 root 身份运行 gunicorn、验证 root 具有读取权限并验证脚本从 os.getuid() 返回 0 来验证这不是权限问题。

# javascript - 表单验证期间 Javascript 警报不起作用

> ID：15777938
> 
> 赞同：0
> 
> 时间：2013-04-03T02:36:16.757
> 
> 标签：javascript

我不确定是什么错误，但是当我在未选中复选框的情况下按下按钮时无法收到警报。有人可以让我知道我在这里犯了什么错误。

```
<html>  
    <head>
        <script type="text/javascript">
            function validator(form) {
                if (form.q36.value.length == 0) {
                    alert("Select one environment");
                    form.q36.setfocus();
                    return (false);
                }
                if (form.q56.value.length == 0) {
                    alert("Select one environment");
                    form.q56.setfocus();
                    return (false);
                }
                if (form.q77.value.length == 0) {
                    alert("Select one environment");
                    form.q77.setfocus();
                    return (false);
                }

                if (form.apppath.value.length == 0) {
                    alert("Enter the path");
                    form.apppath.setfocus();
                    return (false);
                }
                return (true);
            }
        </script>
    </head>

    <body>
        <form action="/car.java" onsubmit="return validator(this);">
            <br />
            <p>One
                <input name="q36" id="q36" type="checkbox" />Two
                <input name="q56" id="q56" type="checkbox" />Three
                <input name="q77" id="q77" type="checkbox" />
            </p>
            <br />
            <input name="apppath" size="123" style="width: 766px; height: 21px;" type="text" />
            </p>
            <p>
                <input name="uipath" size="123" style="width: 766px; height: 21px;" type="text" />
            </p>
            <textarea cols="95" name="status" rows="11"></textarea>
            <input name="sub" size="28" style="width: 156px; height: 29px;" type="button" value="Deploy" />
            </p>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T02:48:46.180

将您的按钮更改为 type='submit' 而不是 type='button'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:40:46.517

我的猜测是您的值未定义，因此长度函数不会执行。您可以尝试使用萤火虫或制作小提琴来逐步完成它。

您也可以尝试在输入复选框上添加一个值。

# selenium - 使用 Selenium WebDriver 将鼠标悬停在图像上

> ID：15777939
> 
> 赞同：1
> 
> 时间：2013-04-03T02:36:17.227
> 
> 标签：selenium, selenium-webdriver

编辑：

```
FF version 19.0.2
Selenium WebDriver version: 2.31.2.0 
```

如何使用 Webdriver 验证图像悬停是否有效？所以我有 5 颗星，每颗星代表不同的标题，我正在寻找一种将鼠标悬停在这些星星上的方法。

我使用了下面的代码，但我没有看到将鼠标悬停在图像上......

我使用了以下代码片段

```
Actions builder = new Actions(driver);
WebElement tagElement = driver.findElement(By.CssSelector("#divctl00....."));
builder.moveToElement(tagElement).build().perform(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:43:40.673

如果您使用旧版本的 Webdriver 和新版本的 Firefox，则鼠标悬停不起作用。请分享您的版本。

# c# - EntityFramework 创建一个新对象并将现有对象添加到其导航属性

> ID：15777942
> 
> 赞同：0
> 
> 时间：2013-04-03T02:36:43.473
> 
> 标签：c#, navigation, entity-framework-5

我是 Entity Framework 5 的新手。我尝试在网站中搜索，有一些类似的问题但没有答案。

我有一个 Announcement 对象并有导航属性 Files

```
public partial class Announcement
    {
        //remove other properties

        public virtual ICollection<File> Files { get; set; }
    } 
```

在sql server中有Announcement表，File表和AnnouncementFiles表只有[AnnouncementId]和[FileId]两个字段。情景是：我创建了一个新的公告，但所有文件都已经存在于数据库中。代码在这里：

```
public void CreateAnnouncement(Announcement announcement, List<Guid> fileIds)
        {
            using (var db = new MyDbEntities())
            {
                var files = db.Files.Where(f => fileIds.Contains(f.Id));
                db.Announcements.Add(announcement);
                foreach (var file in files)
                {
                    announcement.Files.Add(file);
                }
                db.SaveChanges();
            }
        } 
```

并且出现类似（我的.net框架不是英文的）无法更新EntitySet“AnnouncementFiles”的错误，因为它有一个DefiningQuery，但没有支持currnet元素的操作。

我无法更改表结构，那么有什么办法吗？一些帖子说使用**附加**方法，但公告。文件没有这种方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:04:07.577

您需要在 DbContext 的`OnModelCreating`方法中定义链接表。

您应该查找使用 FluentApi 在实体框架中定义多对多关系。代码看起来像这样

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
  base.OnModelCreating(modelBuilder);

  modelBuilder.Entity<Annoucement>()
    .HasMany(x => x.Files)
    .WithMany(x => x.Announcements)
    .Map(x => { 
      x.ToTable("AnnouncementFiles"; 
      x.MapLeftKey("AnnouncementID"); 
      x.MapRightKey("FileID"); 
    });
} 
```

您的其余代码都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:05:20.303

fileIds.Contains(f.id) 无法转换为 sql 查询。您可以使用此链接构建表达式树：

[http://social.msdn.microsoft.com/forums/en-US/adodotnetentityframework/thread/095745fe-dcf0-4142-b684-b7e4a1ab59f0/](http://social.msdn.microsoft.com/forums/en-US/adodotnetentityframework/thread/095745fe-dcf0-4142-b684-b7e4a1ab59f0/)

# c++ - 重载<<操作符错误C2804：二进制'操作符<<'有太多参数

> ID：15777944
> 
> 赞同：4
> 
> 时间：2013-04-03T02:37:12.663
> 
> 标签：c++, class, operator-overloading

这是我的课：

```
#ifndef CLOCK_H
#define CLOCK_H
using namespace std;

class Clock
{
    //Member Variables

    private: int hours, minutes;

    void fixTime( );

    public:
        //Getter & settor methods.
        void setHours(int hrs); 
        int getHours() const;
        void setMinutes(int mins); 
        int getMinutes() const; 

        //Constructors
        Clock(); 
        Clock(int);
        Clock(int, int);
        //Copy Constructor
        Clock(const Clock &obj);
        //Overloaded operator functions
        void operator+(const Clock &hours);
        void operator+(int mins);
        void operator-(const Clock &hours);
        void operator-(int minutes1);
        ostream &operator<<(ostream &out, Clock &clockObj); //This however is my problem where i get the error C2804\. Saying that it has to many parameters 
};
#endif 
```

所有这个功能应该做的是在不同时间输出时钟的值。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T02:40:38.150

```
ostream &operator<<(ostream &out, Clock &clockObj); 
```

应该

```
friend ostream &operator<<(ostream& out, Clock &clockObj); 
```

在类之外定义。

请参阅此处：[应该将 operator<< 实现为朋友还是成员函数？](https://stackoverflow.com/questions/236801/should-operator-be-implemented-as-a-friend-or-as-a-member-function)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-03T02:41:47.553

```
 ostream &operator<<(ostream &out, Clock &clockObj); 
```

应该

```
 friend ostream &operator<<(ostream &out, Clock &clockObj); 
```

根据 Stanley 等人的 C++ Primer (Fourth Edition pp 514)：

> 当我们定义一个符合 iostream 库约定的输入或输出操作符时，我们必须将其设为非成员操作符。我们不能让操作符成为我们自己类的成员。如果我们这样做了，那么左边的操作数必须是我们类类型的对象

因此，重载`<<`并`>>`作为类的友元函数是一种很好的做法。

# python - 在 matplotlib 中操作 x 轴刻度标签

> ID：15777945
> 
> 赞同：6
> 
> 时间：2013-04-03T02:37:15.200
> 
> 标签：python, matplotlib, pandas, bar-chart

我注意到，当我的条形图中有 5 个或更少的数据条时，x 轴会自动添加额外的刻度： ![在此处输入图像描述](https://i.stack.imgur.com/d2b5H.png) 我想要的是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/QWtWM.png)

有什么方法可以强制 matplotlib 为第一个图表的每个条生成一个刻度标签？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-03T03:05:49.977

该`bar`方法接受一个参数`align`。将此参数设置为`align='center'`。`align`在我们给它的 x 值的中心对齐条形，而不是在条形的左侧对齐（这是默认设置）。

然后使用该`xticks`方法指定 x 轴上有多少刻度以及放置它们的位置。

```
import matplotlib.pyplot as plot

x = range(1, 7)
y = (0, 300, 300, 290, 320, 315)
plot.bar(x, y, width=0.7, align="center")

ind = range(2, 7)    # the x locations for the groups
plot.xticks(ind, x)

plot.axhline(305, linewidth=3, color='r')

plot.show() 
```

文档位于[http://matplotlib.org/api/pyplot_api.html](http://matplotlib.org/api/pyplot_api.html)

# routing - 我可以在 Laravel 4 中拥有可变数量的 URI 参数或键值对吗？

> ID：15777947
> 
> 赞同：3
> 
> 时间：2013-04-03T02:37:22.997
> 
> 标签：routing, laravel, optional-parameters, laravel-4, url-parameters

我有一个购物车，我希望能够传递可变数量的可选参数。诸如：排序、过滤、包含/排除等。所以 URL 可能是：

```
/products
/products/sort/alphabetically
/products/filter/cloths
/products/socks/true
/products/sort/alphabetically/socks/true/hats/false/ 
```

等等。

我想我可以为所有可能的参数设置一个带有占位符的路由，并在 URL 中设置默认值，例如：

```
Route::get('products/sort/{$sort?}/filter/{$filter?}/socks/{$socks?}/hats/{$hats?}/...', function($sort = 'alphabetically', $filter = false, $socks = true, $hats = true, ...)
{
    ...
}); 
```

然后例如只排除帽子我必须有一个如下的网址：

```
/products/sort/alphabetically/filter/false/socks/true/hats/false 
```

但这似乎真的……不优雅。有没有这样做的好方法？我想我也可以尝试编写一个服务器重写规则来解决这个问题，但我不喜欢绕过 Laravel 的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:10:20.473

您应该将查询字符串（GET 参数）用于此类过滤器。使用查询字符串时，参数可以按任何顺序排列，如果不需要，可以轻松跳过。`method="GET"`制作一个可以过滤列表的简单表单（带有 ）也很容易

使用 GET 参数的 URL 看起来更像：

```
/products
/products?sort=alphabetically
/products?filter=cloths
/products?socks=true
/products?sort=alphabetically&socks=true&hats=false 
```

然后可以使用 GET 参数单独检索`Input::get('name', 'default')`或作为一个集合检索`Input::all()`. 这也是分页器将页码添加到您的链接的方式。

# javascript - 在 javascript 中，如何将电子邮件地址转换为有效的 DOM id？

> ID：15777948
> 
> 赞同：0
> 
> 时间：2013-04-03T02:37:24.447
> 
> 标签：javascript, jquery, dom

我想获取一个电子邮件地址并将其转换为[有效的 DOM id](https://stackoverflow.com/a/79022/1093087)，以便它可以用于使用 jQuery 动态构建 HTML 元素。

例如：

*   鉴于：`some.user@example.com`
*   回报：`some-user-at-example-com`
*   为了：`$('<div />').attr('id, 'some-user-at-example-com');`

有点像 Rails 的参数化方法。什么是干净，简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:39:56.757

如果你想要那个输入的输出，你可以使用一个或三个正则表达式：

```
var id = email.replace(/@/g, ' at ').replace(/[^a-z0-9-]+/gi, '-')
              .replace(/^-|-$/g, ''); 
```

首先，我们将 at 符号替换为“at”（带有前导和尾随空格）。然后我们用破折号替换任何非字母数字字符序列。

但是请注意，多个电子邮件地址可以成为同一个 ID。例如，`john.doe@example.com`两者`john-doe@example.com`都成为`john-doe-at-example-com`. 您不应将这些标识符用于 ID，因为它们不是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:40:22.173

正则表达式`replace`应该做，但你真的应该考虑这种方法是否值得做，因为有太多潜在的有效电子邮件地址。

```
'some.user@example.com'.replace(/[.@]/g ,'-') 
```

来自“有效电子邮件地址”的[维基百科：](http://en.wikipedia.org/wiki/Email_address)

```
niceandsimple@example.com
very.common@example.com
a.little.lengthy.but.fine@dept.example.com
disposable.style.email.with+symbol@example.com
user@[IPv6:2001:db8:1ff::a0b:dbd0]
"much.more unusual"@example.com
"very.unusual.@.unusual.com"@example.com
"very.(),:;<>[]\".VERY.\"very@\\ \"very\".unusual"@strange.example.com
postbox@com (top-level domains are valid hostnames)
admin@mailserver1 (local domain name with no TLD)
!#$%&'*+-/=?^_`{}|~@example.org
"()<>[]:,;@\\\"!#$%&'*+-/=?^_`{}| ~.a"@example.org
" "@example.org (space between the quotes) 
```

# python - 如何抑制 Pandas Future 警告？

> ID：15777951
> 
> 赞同：176
> 
> 时间：2013-04-03T02:37:48.730
> 
> 标签：python, pandas, suppress-warnings, future-warning

当我运行程序时，Pandas 每次都会给出如下所示的“未来警告”。

```
D:\Python\lib\site-packages\pandas\core\frame.py:3581: FutureWarning: rename with inplace=True  will return None from pandas 0.11 onward
  " from pandas 0.11 onward", FutureWarning) 
```

我收到了味精，但我只是想阻止 Pandas 一次又一次地显示这样的味精，有没有我可以设置的内置参数让 Pandas 不弹出“未来警告”？

* * *

## 回答 #1

> 赞同：377
> 
> 时间：2013-04-03T03:19:42.940

[在github](https://github.com/pydata/pandas/issues/2841)上找到这个...

```
import warnings
warnings.simplefilter(action='ignore', category=FutureWarning)

import pandas 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-12-21T19:29:25.337

@bdiamante 的回答可能只能部分帮助您。如果您在抑制警告后仍然收到一条消息，那是因为`pandas`库本身正在打印该消息。除非您自己编辑 Pandas 源代码，否则您无能为力。也许内部有一个选项可以抑制它们，或者有一种方法可以覆盖它们，但我找不到。

* * *

# 对于那些*需要*知道为什么...

假设您要确保清洁的工作环境。在脚本的顶部，放置`pd.reset_option('all')`. 使用 Pandas 0.23.4，您可以获得以下内容：

```
>>> import pandas as pd
>>> pd.reset_option('all')
html.border has been deprecated, use display.html.border instead
(currently both are identical)

C:\projects\stackoverflow\venv\lib\site-packages\pandas\core\config.py:619: FutureWarning: html.bord
er has been deprecated, use display.html.border instead
(currently both are identical)

  warnings.warn(d.msg, FutureWarning)

: boolean
    use_inf_as_null had been deprecated and will be removed in a future
    version. Use `use_inf_as_na` instead.

C:\projects\stackoverflow\venv\lib\site-packages\pandas\core\config.py:619: FutureWarning:
: boolean
    use_inf_as_null had been deprecated and will be removed in a future
    version. Use `use_inf_as_na` instead.

  warnings.warn(d.msg, FutureWarning)

>>> 
```

按照@bdiamante 的建议，您可以使用该`warnings`库。现在，确实，*警告*已被删除。但是，仍然存在一些令人讨厌的消息：

```
>>> import warnings
>>> warnings.simplefilter(action='ignore', category=FutureWarning)
>>> import pandas as pd
>>> pd.reset_option('all')
html.border has been deprecated, use display.html.border instead
(currently both are identical)

: boolean
    use_inf_as_null had been deprecated and will be removed in a future
    version. Use `use_inf_as_na` instead.

>>> 
```

事实上，禁用**所有**警告会产生相同的输出：

```
>>> import warnings
>>> warnings.simplefilter(action='ignore', category=Warning)
>>> import pandas as pd
>>> pd.reset_option('all')
html.border has been deprecated, use display.html.border instead
(currently both are identical)

: boolean
    use_inf_as_null had been deprecated and will be removed in a future
    version. Use `use_inf_as_na` instead.

>>> 
```

在标准库的意义上，*这些不是真正的警告*。Pandas 实现了自己的警告系统。在警告消息上运行`grep -rn`表明`pandas`警告系统在以下位置实现`core/config_init.py`：

```
$ grep -rn "html.border has been deprecated"
core/config_init.py:207:html.border has been deprecated, use display.html.border instead 
```

进一步的追逐表明我没有时间做这个。你可能也不知道。希望这可以使您免于掉入兔子洞，或者可能会激发某人弄清楚如何真正压制这些消息！

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2019-09-27T15:45:51.143

警告很烦人。如其他答案中所述，您可以使用以下方法抑制它们：

```
import warnings
warnings.simplefilter(action='ignore', category=FutureWarning) 
```

但是如果你想一个一个地处理它们并且你正在管理一个更大的代码库，那么很难找到导致警告的代码行。由于与错误不同的警告不带有代码回溯。为了跟踪错误之类的警告，您可以在代码顶部编写以下代码：

```
import warnings
warnings.filterwarnings("error") 
```

但是如果代码库更大并且它正在导入一堆其他库/包，那么所有类型的警告都将开始作为错误引发。为了仅将某些类型的警告（在您的情况下为 FutureWarning）引发为错误，您可以编写：

```
import warnings
warnings.simplefilter(action='error', category=FutureWarning) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2021-03-06T10:53:06.963

这是上下文管理器版本，如果您只想禁止特定代码行的警告。

```
import warnings
with warnings.catch_warnings():
    warnings.simplefilter(action='ignore', category=FutureWarning)
    # Warning-causing lines of code here 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2021-10-10T14:31:20.903

只需在开始代码之前输入这一行。

```
import warnings
warnings.filterwarnings("ignore") 
```

# jquery - jQuery .post 并不总是运行

> ID：15777955
> 
> 赞同：0
> 
> 时间：2013-04-03T02:38:21.503
> 
> 标签：jquery, timeout, .post

我正在创建一个允许用户选择任意数量答案之一的网站。最终，我已经完成了所有工作。系统工作，但如果用户在页面上超过 30 秒，提交似乎不起作用。网站上没有设置应该导致此问题的超时设置，而且我似乎无法在 jQuery .post 中找到导致此问题的原因。这是我正在使用的代码：

```
function submitAns(str, num) {
    var radios = document.getElementsByName(str);
    for (var i = 0, length = radios.length; i < length; i++) {
        if (radios[i].checked) {
            $.post('saveAnswer.aspx', {
                'answer': String(radios[i].value),
                'question': num,
                'comment': String($("#comment").val())
            }, function (msg) {
                if (msg == "failed") {
                    jAlert('Error Saving Data.');
                } else {
                    window.location = "Voting-Page";
                }
            });
        }
    }
} 
```

这是在用户单击一个类似于此的表单的按钮后触发的：

```
<input type='radio' name='group0' value='Yes'>Yes
<input type='radio' name='group0' value='No'>No
<textarea id='comment' rows='7' cols='40'></textarea>
<input type="submit" name="submitbtn" value="Submit" onclick="submitAns('group0','0');" class="btnSubmit" /> 
```

如果我在 30 秒的时间范围内提交表格，它会毫无问题地通过。否则，页面会重新加载，并且不会提交表单。我尝试通过添加 .post 向 .post 添加大超时`'timeout': 300000`，但这仍然不起作用。我还尝试删除 jAlert 并检查是否有任何站点错误（未找到）。这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:57:15.843

我可以看到`submit`您的页面中有一个按钮，提交按钮的默认操作是提交表单，为了防止它您可以`false`从`onclick`事件处理程序返回。

但令我困惑的是，在这种情况下它必须保持一致，30 秒部分在这里没有任何作用。

任何方式尝试将`onclick`提交按钮中的处理程序更改为

```
<input type="submit" name="submitbtn" value="Submit" onclick="submitAns('group0','0'); return false;" class="btnSubmit" /> 
```

# apache-flex - 带有多个复选框的 Flex 自动完成

> ID：15777957
> 
> 赞同：0
> 
> 时间：2013-04-03T02:39:04.720
> 
> 标签：apache-flex, flex4

我的要求是构建一个具有这些功能的组合框

1.  自动完成（类似于 Google 的搜索，并且不希望仅限于搜索前缀）
2.  支持多选（首选使用组合框）
3.  可以手动输入一个新值吗

我发现[AutoComplete](http://hillelcoren.com/flex-autocomplete/)组件可以满足我的大部分要求，但它的多选不是在组合框中显示复选框。如果用户要选择 3 个项目，他需要搜索 3 次。没关系，但不是很方便。对这个要求有什么建议吗？

这是这个组件的[Demo](http://flex-autocomplete.com/demo/#app=40da&b817-selectedIndex=0)。

[更新] 对于多选，我的想法是，如果我们在组合框中有以下 6 项。

```
AA1
AA2
ABC
AA3
AXX
BAA 
```

当用户输入“AA”时，现在只有 4 个项目。并且用户可以选择多于一项而无需重新搜索。使用 ctrl-click 或多选框是可以的。

```
AA1
AA2
AA3
BAA 
```

# assembly - 将此程序集更改为 C 时遇到问题

> ID：15777958
> 
> 赞同：1
> 
> 时间：2013-04-03T02:39:08.957
> 
> 标签：assembly, x86

```
...
.L5: 
 movl 8(%ebp), %eax #  A(param) is at ebp + 8
 movl 12(%ebp), %edx # B(param) is at ebp + 12 
 movl %edx, %ecx
 subl %eax, %ecx 
 movl %ecx, %eax 
 addl $1, %eax 
 movl %eax, %edx 
 shrl $31, %edx 
 leal (%edx,%eax), %eax 
 sarl %eax  
 addl %eax, 8(%ebp) 
 movl 8(%ebp), %eax 
 cmpl 12(%ebp), %eax 
 jge .L5 
```

我在逆向工程这个 x86 时遇到问题，我现在在想的是它是一个 do-while，但我得到的表达式似乎不正确，并且不使用变量它很长。我认为`shrl $31, %edx`，寄存器`edx`应该相等`((B-A)+1)>>31`？我走远了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:50:38.827

不，这是正确的。

# api - 如何从另一个模块访问模块的 API (Backbone Marionette)

> ID：15777963
> 
> 赞同：1
> 
> 时间：2013-04-03T02:39:39.097
> 
> 标签：api, module, code-reuse, marionette, infrastructure

这是我第一次尝试使用木偶，我已经设计了我的应用程序的应用程序基础架构，如下所示。

本质上，这个想法是有一个可以在多个地方重复使用的“答案”模块，即饲料模块、配置文件模块等

![在此处输入图像描述](https://i.stack.imgur.com/4fKKF.png)

答案模块的示例如下：

```
@MyApp.module "AnswersModule", (MusesModule, App, Backbone, Marionette, $, _) ->
  class AnswersModule.Router extends Marionette.AppRouter
    appRoutes:
      "answers" : "listAnswers"

  API =
    listAnswers: ->
      //Method will fetch a list of muses and populate a view template
      AnswersModule.List.Controller.listAnswers()

  App.addInitializer ->
    new AnswersModule.Router
      controller: API 
```

问题：

1) 这种设计是否符合使用木偶的最佳实践？

2) 我可以/我应该能够直接从其他模块（例如 Feed 模块）访问 AnswersModule 中的“listAnswers”方法吗？我应该怎么做呢？

3) 对于需要在自己的布局中嵌入 AnswersModule 的每个模块，需要不同的 URL 来获取不同的答案列表，即提要有自己的 url 用于获取答案，配置文件有自己的 URL 来获取答案。如何通过答案模块请求不同的列表？

我对木偶比较陌生，真的很想在继续之前得到这个想法和概念。任何关于上述的建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T00:58:20.060

我会避免直接调用另一个模块。Marionette 包含[这个](https://github.com/marionettejs/backbone.wreqr)非常有用的库。

您的模块应该通过事件、命令和请求/响应进行交互。这将使您的模块解耦并使您的应用程序更加模块化。

所以你的其他模块会做这样的事情：

```
API =
  someMethod: ->
  App.commands.execute('list-answers', { url: 'amazing-answers' }) 
```

那么您的 AnswersModule 将自行设置以响应该命令并执行它需要执行的操作。

请参阅[此演讲](http://www.youtube.com/watch?v=0o2whtCJw8I)以获得良好的概述。

# c# - 数据模板 wp7/8

> ID：15777965
> 
> 赞同：0
> 
> 时间：2013-04-03T02:39:46.477
> 
> 标签：c#, windows-phone-7

我正在尝试创建一个项目列表，这些项目由多行信息组成-我正在使用列表框并使用 itemtemplate 添加一个按钮并将按钮的内容设置为使用数据模板的多行文本但是它没有用 - 只显示了 2 行。现在，我正在做同样的事情，除了我没有使用按钮并且我无法让文本行进入下一行......

**例子：**

（此处格式不正确 - 但每个都在新行上） *方向\n 时间点\n 坚持*

**目前它在做：（** 没有新行）DirectionTimePointAdherence

**这是xaml ...绑定在后面的代码中完成**

```
 <ListBox Name="listBox_1"  Background="Transparent" Margin="0,125,0,0" VerticalAlignment="Top">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Height="100">
                                    <TextBlock FontSize="28" Foreground="#FF348F8F" Text="{Binding Direction}" Height="40"/>
                                    <TextBlock FontSize="28" Foreground="White" Text="{Binding TimePoint}" Height="40"/>
                                    <Grid Background="#FFE3EFFF">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Orientation="Vertical" Height="40" Margin="-2,0,0,0">
                                            <TextBlock FontSize="28" Foreground="White" Text="{Binding Adherence}" Height="40"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:39:29.563

包装你的文字。它可能会奏效：

```
<TextBlock TextWrapping="Wrap" /> 
```

# mysql - 几乎无限的列

> ID：15777967
> 
> 赞同：1
> 
> 时间：2013-04-03T02:39:59.423
> 
> 标签：mysql, database-design

我想创建不同的问题集并存储答案

这是我试过的

**表问题** ID、名称

**表字段** id、标签

**表关系** id、question_id、field_id

这很好用，但仅适用于问题的显示部分，但是存储答案呢？我无法水平存储答案，因为我没有参考（列名），垂直存储对数据库非常不利，对吧？

我正在使用 mysql。最好的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:43:29.217

您可以再添加 1 个表来存储答案：

```
question_id  PK   INT
user_id      PK   INT <-- or maybe anything that identifies the user
field_id     PK   INT
answer            VARCHAR <-- or TEXT , depends on your usage 
```

返回所有结果（假设答案表命名为`tbl_answer`）：

```
SELECT `c.name` AS question, b.label, answer FROM tbl_answer a 
LEFT JOIN fields b ON a.field_id=b.id 
LEFT JOIN questions c ON a.question_id=c.id 
```

返回特定用户的结果：

```
SELECT `c.name` AS question, b.label, answer FROM tbl_answer a 
LEFT JOIN fields b ON a.field_id=b.id 
LEFT JOIN questions c ON a.question_id=c.id 
WHERE user_id={user id here} 
```

要返回特定问题的结果：

```
SELECT `c.name` AS question, b.label, answer FROM tbl_answer a 
LEFT JOIN fields b ON a.field_id=b.id 
LEFT JOIN questions c ON a.question_id=c.id 
WHERE question_id={question id here} 
```

当然，您必须对结果进行进一步处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:43:36.213

简单的。

您只需要另一个表来存储答案：

# 答案

id question_id field_id（答案）

您可能还需要一个字段来将您的“答案”与某事相关联，例如正在回答的人或问卷。

# string - 检查文件是否包含VB6中的字符串

> ID：15777974
> 
> 赞同：0
> 
> 时间：2013-04-03T02:40:45.760
> 
> 标签：string, file, vb6

如何检查某个文本文件是否包含某个字符串？我是否必须实际打开文件并使用 InStr()，或者有更方便的方法吗？

顺便说一句，语言是 Visual Basic 6.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:26:23.120

你不能不打开文件，但有一个替代方案（也涉及文件打开）你可以使用 Shell，如下所示：

```
<filename> is the name of the file
<string> is the string you want to check 
```

（假设您要检查的文件在当前目录中）

```
 Shell("find /c "+chr(34)+"<string>"+chr(34)+" <filename>  > test.txt")

    Open "test.txt" for input as #1
        input #1, A
    Close #1

    If (Right(A,3)=": 0") Then 
            Msgbox "Does not exist"
    Else
            Msgbox "String exists"
    End if 
```

虽然这也涉及打开文件，但它会比使用 InStr() 函数搜索字符串快得多（如果文件很大），因为它现在检查一个常量字符串。此外，您可以稍微更改一下 shell 命令以同时搜索多个文件中的文本（使用通配符），这肯定比使用循环打开所有这些文件并使用另一个循环读取要快得多所有行并在每行上使用 InStr() 。

# android - 无法使用 apache commons 库在 android ftp 客户端中获取 Internet ftp 服务器目录列表

> ID：15777975
> 
> 赞同：0
> 
> 时间：2013-04-03T02:40:46.260
> 
> 标签：android, ftp-client

当我尝试使用来自 android 的 ftp 客户端从 drivehq ftp 服务器获取目录列表时，出现连接被拒绝异常。请帮助我并解决我的问题。下面给出了我为此目的的代码，我也在真实设备三星银河手机上进行测试。是的，我已经添加了这些权限

```
<uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
    <uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS"/>
    public void login(String host,String username,String password,int port)
        {
            try 
            {
                ftpClient.connect(host);
                ftpClient.login(username, password);
                ftpClient.changeWorkingDirectory("/MyData");
                ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
                ftpClient.enterLocalPassiveMode();
            } catch (SocketException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    public ArrayList<File> getDirectoryListing()
    {       
            ArrayList<File> list=new ArrayList<File>();
            FTPFile[] files = null;

            try
            {
                Log.d(ftpClient.printWorkingDirectory(), "is working directory");
                files=ftpClient.listFiles();
                for(FTPFile f:files)
                {
                    String s=f.getName();
                    Log.d(s, "is file");
                    File fs=new File(s);
                    list.add(fs);
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return list;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:25:18.097

我已经使用`ftp-4j`库将我的文件上传到服务器。您可以为您的项目使用类似的概念。这是链接：[SampleDemo](https://github.com/Abhan/FTPS)

谢谢。

# ajax - jQuery Mobile 在 Phonegap 设备就绪时未构建第一个动态页面

> ID：15777978
> 
> 赞同：1
> 
> 时间：2013-04-03T02:41:04.147
> 
> 标签：ajax, cordova, jquery-mobile, hybrid-mobile-app

我有一个使用 JQM 1.3.0 和 Phonegap 的移动应用程序。该应用程序调用 Web 服务并使用 AJAX 填充所有页面的内容。在浏览器中开发并直接调用我的脚本时，一切正常：

```
applicationScripts()

function applicationScripts(){

    $(document).on("pageinit", "#page1, #page2,  #page3, #page4,  #page5", function() {

        $.ajax({
            //make call and populate content.
        })
    });
} 
```

但是，一旦我从 deviceready 侦听器内部调用该函数，#page1 就不会获取数据。第 2-5 页工作正常。（我也尝试将事件侦听器嵌套在`<body onload="onLoad()">`函数中，但结果相似。）

```
document.addEventListener('deviceready', applicationScripts, false);

function applicationScripts(){

    $(document).on("pageinit", "#page1, #page2,  #page3, #page4,  #page5", function() {

        $.ajax({
            //#page1 not getting content. 
        })
    });
} 
```

这是我的文件的开头。我所有的脚本都在 application.js 文件中。

```
<script type="text/javascript" src="js/cordova.ios.js"></script>    
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/jquery.mobile-1.3.0.min.js"></script>
<script src="js/application.js" ></script> 
```

我不知道这是否是一些文件/事件在其他文件/事件之前加载的时间问题，但似乎我已经尝试了脚本命令的所有可能组合以及调用“deviceready”的不同方式。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:21:59.517

你可以试试下面的代码：

```
var deviceReadyDeferred = $.Deferred();
var jqmReadyDeferred = $.Deferred();

document.addEventListener("deviceReady", deviceReady, false);

function deviceReady() {
  deviceReadyDeferred.resolve();
}

$(document).one("mobileinit", function () {
  jqmReadyDeferred.resolve();
});

$.when(deviceReadyDeferred, jqmReadyDeferred).then(doWhenBothFrameworksLoaded);

function doWhenBothFrameworksLoaded() {
  $(document).on("pageinit", "#page1, #page2,  #page3, #page4,  #page5", function() {
    $.ajax({
          //Do something here
    })
});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:13:38.830

我已经完成了几个 PhoneGap 项目，但我从未在`deviceready`函数内绑定页面事件。

只需在js文件中绑定页面事件即可。它工作得很好。毕竟我有 3 个 PhoneGap 项目在生产中运行，并且由于这个原因，没有一个项目报告有问题。

我在我的项目中使用`deviceready`了功能来禁用后退按钮，而不是初始化任何页面等。

希望对您有所帮助。

# c++ - 从 C++ 中的字符串继承

> ID：15777983
> 
> 赞同：-1
> 
> 时间：2013-04-03T02:41:36.663
> 
> 标签：c++, string, inheritance

我正在阅读 C++ 中的思考。我对那本书中显示的以下代码片段感到困惑。

```
class MyString: public string, public Object {
public:
  ~MyString() {
    cout << "deleting string: " << *this << endl;
  }
  MyString(string s) : string(s) {}
}; 
```

我很困惑`*this`。`this`是一个指向 MyString 对象本身的指针。为什么被`*this`取消引用为初始化字符串？为了让我的问题更清楚，我举一个例子：

```
Mystring* x = new string("Hello");
delete x; 
```

我没有列出完整的代码。如果运行完整的代码，输出是：

> 删除字符串：你好。

这意味着 *this = "你好"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:43:59.620

因为`operator <<`with的重载`std::ostream`和`std::string`提取和打印字符串的`c_str()`表示，或者字符串本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:51:20.193

这是指向当前对象的指针。*this 取消引用指向当前对象的指针，因为它是从字符串派生的字符串。然后调用重载的 osteram 运算符。

当您从和对象派生时，您创建的是与派生对象的关系。

也不要从 std 类派生，因为大多数没有虚拟析构函数。

# c# - C# msbuild 如何使用构建引擎日志

> ID：15777986
> 
> 赞同：4
> 
> 时间：2013-04-03T02:42:02.070
> 
> 标签：c#, logging, msbuild, microsoft.build

我想在 C# 中使用**msbuild**，有两种方法：
我们有一个构建引擎来编译一些 xml，并且引擎有自己的日志记录系统。

1) 在 C# 中调用 msbuild

```
Process P=new Process();
p.StartInfo.FileName=... 
```

这行得通，但我想要一种更程序化的方式。

2) 使用 [Microsoft.Build](http://msdn.microsoft.com/en-us/library/gg145008.aspx)命名空间

```
BuildManager.DefaultBuildManager.Build(
                new BuildParameters()
                {
                    DetailedSummary = false,
                    Loggers = new List<ILogger>() { logger }
                }, buildRequest); 
```

问题是，我不能使用构建引擎日志系统，比如说，Microsoft.Build Logger 返回构建结果但不是很有用，我们的构建引擎的记录器可以找出更多关于错误的详细信息。
由于 Microsoft.Build 也使用`*.vproj`并且程序集 dll 工作正常，有没有办法使用客户构建引擎的记录器并输出到某个地方......

# yaml - YAML 中的字符串插值

> ID：15777987
> 
> 赞同：18
> 
> 时间：2013-04-03T02:42:00.603
> 
> 标签：yaml, string-interpolation, template-variables

在 Perl 中，我可以执行以下操作：

```
my $home = "/home";
my $alice = "$home/alice"; 
```

我可以在 YAML 中执行以下操作：

```
Home: /home
Alice: $Home/alice 
```

那么《爱丽丝》`/home/alice`到底有效吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T05:53:32.710

不幸的是，你运气不好。要执行您想要的操作，您需要`$home`从视图文件（或任何地方）传入并将其插入到您的 yaml 条目中，这可能看起来像：

```
Alice: ! '%{home}/Alice' 
```

有关您的问题的详细答案，请参阅[此 StackOverflow Q&A 。](https://stackoverflow.com/q/13055753/567863)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-09T10:48:45.347

您应该使用 ERB 模板。

你可以这样写：

```
Alice: <%=home%>/alice 
```

使用时需要`home`先用 ERB 解析值，然后解析为 YAML。如果 home 是局部变量，则需要将局部绑定作为#result 方法的参数传入。如果你没有通过这个，将默认使用 TOP LEVEL 绑定。

像这样：

```
require 'erb'

home = 'home'
YAML.load(ERB.new(yaml_content).result(binding)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-20T08:14:45.633

我最近也在为 Python 寻找这个，并`dynamic-yaml`通过 Github 上的 Awesome YAML 存储库偶然发现了这个包。

链接 Awesome YAML Github 存储库：[https](https://github.com/dreftymac/awesome-yaml#parsers) ://github.com/dreftymac/awesome-yaml#parsers 链接 Python 的动态 YAML：[https ://github.com/childsish/dynamic-yaml](https://github.com/childsish/dynamic-yaml)

希望这可以帮助！

编辑：由于评论是正确的，链接可能会中断，这里是一个简单的例子：

如果您有一个如下所示的 YAML 文件：

```
house:
    street: cool_street_name
    number: 45
    street_and_number: {house.street}-{house.number} 
```

安装 dynamic_yaml`python -m pip install dynamic_yaml`以运行以下脚本。

```
import dynamic_yaml

with open(path_to_yaml_file, 'r') as f:
    data = dynamic_yaml.load(f) 
```

然后你会得到：

```
print(data['house']['street_and_number'])
>> cool_street_name-45 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T04:30:23.210

我最终使用了，[`YAML::AppConfig`](http://search.cpan.org/~moconnor/YAML-AppConfig-0.16/lib/YAML/AppConfig.pm)但我承认这不是 YAML 解决方案，而是 Perl 特定的解决方案。它允许 YAML 包含`$var`被插值的 s。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-17T23:50:00.330

使用[Yglu](https://yglu.io)，您可以这样编写示例：

```
Home: /home
Alice: !? .Home + '/alice' 
```

或者

```
Home: /home
Alice: !? ('{0}/alice').format($_.Home) 
```

免责声明：我是 Yglu 的作者。

# java - 使用 swt/Jface 为任何特定列改变表中的行大小

> ID：15777989
> 
> 赞同：0
> 
> 时间：2013-04-03T02:42:04.110
> 
> 标签：java, swt, jface

请让我知道如何使用 swt/Jface 为任何特定列获取表中不同大小的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:44:31.620

看看[这个](https://stackoverflow.com/questions/4082082/swt-table-with-variable-row-height-working-on-linux-but-not-mac-windows)相关的问题。

在 Linux 中可以使用不同高度的表格行，但在 Windows 中不行。

您可以查看其他表格小部件，例如 Nebula 的[`Grid`](http://www.eclipse.org/nebula/widgets/grid/grid.php).

[`KTable`](http://sourceforge.net/projects/ktable/)可以合并/跨表行：

![在此处输入图像描述](https://i.stack.imgur.com/sH6XN.jpg)

# python - 在比较值与“=”时，“==”运算符的目的是什么？

> ID：15777992
> 
> 赞同：5
> 
> 时间：2013-04-03T02:42:15.940
> 
> 标签：python

首先，请注意，我理解它`==`用于比较两个表达式，而`=`用于为变量赋值。然而，python 是一种语法要求极低的简洁语言，这似乎是一个容易被砍掉的运算符。此外，我并不是要开始辩论或讨论，而是要了解我是否缺少某些东西来提高我的编程知识。

就像（在 python 中）我们不需要将变量声明为 int 或字符串，并且语言根据分配的值来确定这一点，为什么 'if' 语句不简单地确定它`=`是一个比较，不是作业？

另一个例子是python去掉了其他语言中的很多{}和[]，只使用了缩进，因为缩进和使用大括号是多余的。在我看来，这`if foo == goo:`也是多余的。但也许有些事情我还没有意识到。因此问题！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T02:46:33.803

一个非常简单的原因是 python 允许布尔表达式：

```
a = b == c 
```

以及多重分配：

```
a = b = c 
```

在第一种情况下，根据和是否相等，`a`分配一个布尔值*（`True`或）。在第二种情况下，最终引用同一个对象 ( )。显然，您不能仅使用一个运算符来支持两者。`False``b``c``a``b``c`

我想你可以（原则上）`=`只在`if`语句中重载（因为那里不允许赋值），但这会让人感到困惑——特别是对于来自语句[*中*](https://stackoverflow.com/q/151850/748858)[允许](https://stackoverflow.com/q/151850/748858)[赋值](https://stackoverflow.com/q/151850/748858)`C`的地方的人[。](https://stackoverflow.com/q/151850/748858) 禅再次获胜（“显式胜于隐式”）。[*`if`*](https://stackoverflow.com/q/151850/748858)

 ** * *

*   它实际上不必是布尔值。它实际上是`a`'`__eq__`方法返回的任何内容（或者`b`' ，`__eq__`如果前者返回`NotImplemented`）——*大多数*对象返回一个布尔值，但少数不返回（例如`numpy.ndarray`，一个常见的对象有一个`__eq__`返回另一个`ndarray`的对象）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T02:47:08.207

这两个运算符可以重叠。例如，考虑

```
a = b = c 
```

将`a`and设置`b`为`c`, 和

```
a = b == c 
```

它设置`a`为要么`True`或`False`基于是否`b`和`c`相等。

* * *

更一般地说，Python 试图避免甚至可能模棱两可的语法，以使解析器更简单。即使可以解决上述歧义，也将涉及添加许多特殊情况，并且通常会增加解析器的复杂性。将两个运算符分开整齐地避免了这个问题。*

# wix - 不使用 msiexec 的 Wix 升级安装程序

> ID：15777993
> 
> 赞同：1
> 
> 时间：2013-04-03T02:42:20.330
> 
> 标签：wix, upgrade

我必须创建一个带有升级部分的安装程序。我可以通过阅读本网站上有关该主题的许多帖子来发展这一点。但是，我发现正确运行升级安装程序的唯一方法是使用以下命令行：

msiexec /i MyInstaller.msi REINSTALL=ALL REINSTALLMODE=vomus

如果我通过双击 MSI 文件运行安装程序，我会收到错误消息：“已安装此产品的另一个版本...”

我需要通过双击 MSI 而不是使用命令行来运行安装程序。由于此安装程序的用户非常不愿意以不同的方式执行安装程序，因此我强烈需要解决它。

我在 StackOverflow 中遇到了很多问题，在那里我找到了如何实现升级标签（但它从来没有通过双击工作）：

```
<Product Id="3ddf61a1-668f-421d-856f-4bb535a2ccc2"
       Name="Product v1.7.5.21"
       Language="1033"
       Version="1.7.5.21"
       Manufacturer="Company"
       UpgradeCode="BC52FD13-7F1D-4D92-BB6E-D3FCB2727E9B">
<Package InstallerVersion="200" Compressed="yes"/>

<Upgrade Id='15E2DAFB-35C5-4043-974B-0E342C25D76B'>
  <UpgradeVersion Property='OLDVERSIONFOUND' IncludeMinimum='no' Minimum='0.0.0.0' />
</Upgrade>

<InstallExecuteSequence>
  <LaunchConditions After='AppSearch' />
  <RemoveExistingProducts After='InstallValidate' />
</InstallExecuteSequence> 
```

但是，无论我做什么，我都必须通过命令行运行升级安装程序。否则，我会收到以下错误：

“已安装此产品的另一个版本。无法继续安装此版本。要配置或删除此产品的现有版本，请使用控制面板上的添加/删除程序。”

我将非常感谢您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:43:08.463

两件事情：

1.  尝试使用`MajorUpgrade`WiX v3.5+ 中可用的元素而不是`Upgrade`元素。更容易得到正确。
2.  `Product/@Id`每次要启用主要升级时都必须更改。一般来说，我建议始终进行重大升级并使用`Product/@Id='*'`.

这记录在 MSI SDK 中：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa369786 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369786(v=vs.85).aspx)

# gwt - 如何在文本区域小部件上捕获 gwt 中的滚动事件

> ID：15777995
> 
> 赞同：0
> 
> 时间：2013-04-03T02:42:48.913
> 
> 标签：gwt

当文本溢出时，滚动条会添加到 gwt 中的只读文本区域。当我单击滚动条向下箭头时，例如我的文本区域中有 3 行文本！（因此三行如下：文本区域 3（顶部）文本区域 2 文本区域 1）

[文本区](http://i.stack.imgur.com/n1y0C.png)。

当我使用滚动条的向下箭头向下滚动时，我可以看到文本 3 并直接滚动到文本 1 跳过文本 2。当滚动条滚动时，我应该如何控制文本区域中显示的文本的高度下。向上滚动时，可以按顺序看到所有三个文本行。用于此的浏览器是谷歌浏览器。它在Firefox中正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:05:21.407

I guess this will solve your problelm

[How to scroll a GWT TextArea?](https://stackoverflow.com/questions/2409316/how-to-scroll-a-gwt-textarea)

just use scroll api's and you are good to go

# bash - Bash 在分隔符上拆分字符串，将段分配给数组

> ID：15777996
> 
> 赞同：13
> 
> 时间：2013-04-03T02:42:49.220
> 
> 标签：bash, bash, python, bash, bash, osx, bash

在[bash](/questions/tagged/bash "显示标记为“bash”的问题")中，我想将*可能*包含空格分隔元素的类似 PATH 的环境变量转换为`array`，*确保*带有空格的元素不会导致分词，显示为“多个元素”。

* * *

让`PATH_VARIABLE`成为有问题的变量。

令`un:dodecaedro:per:tirare:per:i danni`为变量的内容。

*它* **适用** *于所需的* `array`_to`6`元素，而不是`7`.

```
0) un
1) dodecaedro
2) per
3) tirare
4) per
5) i danni 
```

“棘手”条目可能是空格分隔的值：`i danni`.

我正在寻找实现这一目标的绝对*最优雅* **和**正确的方法。

限制：它必须适用于我的[bash](/questions/tagged/bash "显示标记为“bash”的问题")版本：`v3.2.48(1)-release`

* * *

在[python](/questions/tagged/python "显示标记为“python”的问题")中，这样做非常*漂亮*：

```
>>> v='un:dodecaedro:per:tirare:per:i danni'
>>> len(v.split(':'))
6 
```

作品。显示我在寻找什么。

* * *

在我们心爱的[bash](/questions/tagged/bash "显示标记为“bash”的问题")中执行此操作的最佳方法是什么？

你能具体改进我的尝试`4`吗？

### 这是我的尝试

* * *

```
#!/bin/bash

PATH_VARIABLE='un:dodecaedro:per:tirare:per:i danni'

# WRONG
a1=($(echo $PATH_VARIABLE | tr ':' '\n'))

# WRONG
a2=($(
  while read path_component; do
  echo "$path_component"
  done < <(echo "$PATH_VARIABLE" | tr ':' '\n')
))

# WORKS, it is elegant.. but I have no bash 4!
# readarray -t a3 < <(echo "$PATH_VARIABLE" | tr ':' '\n')

# WORKS, but it looks "clunky" to me :(
i=0
while read line; do
  a4[i++]=$line
done < <(echo "$PATH_VARIABLE" | tr ':' '\n')

n=${#a4[@]}
for ((i=0; i < n; i++)); do
  printf '%2d) %s\n' "$i" "${a4[i]}"
done 
```

* * *

### 我的环境

[bash](/questions/tagged/bash "显示标记为“bash”的问题") v3.2.48(1)-发布

[osx](/questions/tagged/osx "显示标记为“osx”的问题") OS X v10.8.3 (build 12D78)

* * *

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T03:19:49.753

```
f() {
  local IFS=:
  local foo
  set -f # Disable glob expansion
  foo=( $@ ) # Deliberately unquoted 
  set +f
  printf '%d\n' "${#foo[@]}"
  printf '%s\n' "${foo[@]}"
}

f 'un:dodecaedro:per:tirare:per:i danni'
6
un
dodecaedro
per
tirare
per
i danni 
```

修改 Jim McNamara 的答案，您可以重置 IFS：

```
oIFS="$IFS"
foo='un:dodecaedro:per:tirare:per:i danni'
IFS=: arr=( $foo )
IFS="$oIFS" 
```

我更喜欢函数作用域，因为它可以保护 IFS 更改不会渗入全局作用域，而无需特别小心地重置它。

## 编辑和解释：

澄清一下：在第二个示例中， IFS 设置*确实*更改了全局变量。这之间的显着区别：

```
IFS=: arr=( $foo ) 
```

还有这个：

```
IFS=: read -a arr <<< "$foo" 
```

是前者是两个变量赋值，没有命令，后者是*一个简单的命令*（见*简单命令*。`man (1) bash`）

### 示范：

```
$ echo "$BASH_VERSION"
3.2.48(1)-release
$ echo "$IFS"

$ foo='un:dodecaedro:per:tirare:per:i danni'
$ IFS=: read -a arr <<< "$foo"
$ echo "${#arr[@]}"
6
$ echo "$IFS"

$ IFS=: arr1=( $foo )
$ echo "${#arr1[@]}"
6
$ echo "$IFS"
: 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T21:20:28.403

```
# Right. Add -d '' if PATH members may contain newlines.
IFS=: read -ra myPath <<<"$PATH"

# Wrong!
IFS=: myPath=($PATH)

# Wrong!
IFS=:
for x in $PATH; do ...

# How to do it wrong right...
# Works around some but not all word split problems
# For portability, some extra wrappers are needed and it's even harder.
function stupidSplit {
    if [[ -z $3 ]]; then
        return 1
    elif [[ $- != *f* ]]; then
        trap 'trap RETURN; set +f' RETURN
        set -f
    fi
    IFS=$3 command eval "${1}=(\$${2})"
}

function main {
    typeset -a myPath
    if ! stupidSplit myPath PATH :; then
        echo "Don't pass stupid stuff to stupidSplit" >&2
        return 1
    fi
}

main 
```

规则 #1：除非别无选择，否则不要将复合数据结构塞入字符串或流中。`PATH`是您必须处理的一种情况。

规则#2：不惜一切代价避免单词/字段拆分。几乎没有正当理由对非极简外壳（如 Bash）中的参数值应用分词。几乎所有初学者的陷阱都可以通过从不使用 IFS 进行分词来避免。总是引用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-03T03:29:16.940

考虑：

```
$ foo='1:2 3:4 5:6'
$ IFS=':'; arr=($foo)
$ echo "${arr[0]}"
1
$ echo "${arr[1]}"
2 3
$ echo "${arr[2]}"
4 5
$ echo "${arr[3]}"
6 
```

哦，好吧-我花了太长时间来格式化答案... +1 @kojiro。

# java - 查找数组中重复数据的位置

> ID：15777997
> 
> 赞同：1
> 
> 时间：2013-04-03T02:42:55.787
> 
> 标签：java, arrays

如果我有一个像这样的数组：

int [] numb = {0, 1, 2, 3};

我想找到数组的最小值。我只是做一个快速简单的循环来找到它，但如果我有重复的最小值，例如：

int [] numb = {0, 1, 0, 2, 3};

如何找到所有最小值的位置以及它在数组中出现的次数？

如果已经问过这个问题，我没有找到它，但请随时将我引导到正确的线程/问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:57:38.823

此代码只需一个循环即可完成您想要的所有操作。它也不需要您硬编码初始“最小值”。

```
 int[] values = {6, 2, 4, 3, 1, 1, 7, 2, 1};
    Integer minimum = null;
    List<Integer> indexes = new ArrayList<Integer>();
    for(int i = 0; i < values.length; i++)
    {
        if(minimum == null || values[i] < minimum)
        {
            minimum = values[i];
            indexes.clear();
            indexes.add(i);
        }
        else if(minimum == values[i])
        {
            indexes.add(i);
        }
    }
    System.out.println("The minimum was: " + minimum);
    System.out.println("It occurred " + indexes.size() + " times in the array");
    System.out.println("Indexes it occured at were: " + Arrays.toString(indexes.toArray(new Integer[]{}))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:51:22.720

当你对一个元素进行罚款时，不要从循环中中断，而是增加一个计数器来计算它在数组中重复的次数。并跟踪它出现的所有地方。或者让您的方法返回找到第一个元素的索引，然后再次运行相同的方法，以更高的索引除外

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:52:05.690

```
 int[] array = {0, 1, 0, 2, 3}
 int mininum=999999       //initialize to a number larger than anything in the array would reasonably be
 for (int curr = 0; curr < array.size; curr++) {
     if (array1[curr] < minimum) {
          minimum = array[i];   
     }
 }
 int duplicates = 0;
 for (int i : array){
     if (i == minumum){
         duplicates++;
     }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T03:11:10.873

尝试使用 Guava 库 multiset。

如果您不使用它，请参阅此链接 [http://www.zparacha.com/minimum-maximum-array-value/](http://www.zparacha.com/minimum-maximum-array-value/)

# python - Python：在不使用 __dict__ 的情况下将现有值转换为 Class 中的字典

> ID：15777998
> 
> 赞同：0
> 
> 时间：2013-04-03T02:43:04.297
> 
> 标签：python, class, dictionary

我需要在不使用 __dict__ 函数的情况下将现有值转换为 Class 中的字典。详情如下。

* * *

当前输出如下所示（仅占总记录的一部分，这只是示例）：

```
Abair, 131 Laconia St, 7, PHYS271:C|CHEM271:C|MUSC101:A|ANTA321:B
Babeau, 60 Parker St, 8, GERM111:B|COM432:A|ENGR251:C
Babin, 44 Griggs Rd, 9, MECH312:D|MATH142C|GEOG108:B 
```

我需要的是课程等级对的字典格式的输出：

```
Babeau, 60 Parker St, 8, {GERM111:B, COM432:A, ENGR251:C} 
```

* * *

我的课在下面。Class Student 是 Class Person 的子类。

```
class Person(object):

    def __init__(self, name, address):
        self.name    = name
        self.address = address

    def get_name(self):
        return self.name

    def get_address(self):
        return self.address

    def greet(self):
        print "Hello, my name is " + self.name

    def print_person(self):
        print self.name, self.address

class Student(Person):

    next_id = 0          # A unique ID for each student

    def __init__(self, name, address, record):
        Person.__init__(self, name, address)
        Student.next_id += 1
        self.id = Student.next_id   
        self.record = record

    def get_id(self):
        return self.id

    def add_to_record(self, semester_grades):
        self.record += semester_grades

    def get_record(self):
        return self.record

    def greet(self):
        print "How's it going? I'm " + self.name

    def print_person(self):
        grades = str(self.record)
        print "%s, %s, %i, %s" % (self.name, self.address, self.id, grades) 
```

* * *

创建字典的说明如下。我不认为我可以使用 __dict__ 功能。

> 将现有值添加到每个学生的字典中，然后有代码允许添加额外的 course:grade 对。至于创建字典，文件中的数据已经在 course (key):grade(value) 对中，因此构建字典应该相当容易。只需使用 split 获取对，然后再次获取两个部分并构建字典。因此，对于每个学生，在初始化程序 (__init__) 函数中创建一个空字典，然后拆分 course:grade 对并使用成绩添加方法将它们添加到学生对象中。然后编写一些代码来使用添加、更改和检索方法。”

我仍然无法弄清楚如何创建这样的字典。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:50:51.827

假设您想将课程/等级字符串拆分为一个字典，您可以这样做：

```
s = "PHYS271:C|CHEM271:C|MUSC101:A|ANTA321:B"
d = dict(x.split(':') for x in s.split('|'))

>>> d
{'CHEM271': 'C', 'MUSC101': 'A', 'PHYS271': 'C', 'ANTA321': 'B'} 
```