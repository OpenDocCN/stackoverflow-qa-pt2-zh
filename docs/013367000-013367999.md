# StackOverflow 问答 13367000-13367999

# html - @font-face 无法从服务器生成字体

> ID：13367000
> 
> 赞同：0
> 
> 时间：2012-11-13T19:02:10.893
> 
> 标签：html, url, css, font-face, src

我在网上环顾四周，决定使用以下@font-face 实现：

我的 CSS：

```
@font-face {
font-family: matt;
src: url("/uploads/testing/Interstate-Regular.eot?#iefix") format('embedded-opentype')
     url("/uploads/testing/Interstate-Regular.ttf")  format('truetype');
}
h5.pleasework {
font-family: matt;
font-size:72px;
} 
```

我的 HTML：

```
<head>
 <link rel="stylesheet" type="text/css" media="all" href="{stylesheet='in-store-analytics/testingStyle'}" />

</head>
<h1> this is a test </h1>

<img src="/uploads/features/featured-block_inthenumbers.png" alt="Smiley face" height="420" width="420">
<img src="/uploads/testing/awesomeness.jpg" alt="Smiley face" height="420" width="420">

<div id="happiness">
    <h5 class="pleasework"> PLEASE WORK FOR ME </h5>
</div> 
```

无论出于何种原因，字体都不会生成，但图像会生成，这让我怀疑问题出在 src 参数中的 url 标签上。

有任何想法吗？帮助将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:21:22.367

尝试这个...

*确保放在`@font-face`样式表的顶部*

```
@font-face {  
  font-family: "Interstate-Regular";  
  src: url(/uploads/testing/Interstate-Regular.eot);
  src: local("Interstate-Regular"), url(/uploads/testing/Interstate-Regular.ttf) format("truetype");
} 

h5.pleasework {
font-family: "Interstate-Regular";
font-size:72px;
} 
```

但是，如果您只使用 .tff，那么它会如下所示：

```
@font-face {  
      font-family: matt;  
      src: url(/uploads/testing/Interstate-Regular.ttf) format("truetype");
    } 

h5.pleasework {
font-family: matt;
font-size:72px;
} 
```

希望这可以帮助！

**编辑：**

这个网站非常有帮助：（参考章节：'@font-face 的工作原理：Easy Peasy'和'来吧，真的那么简单吗？' [http://randsco.com/index.php/2009/07 /04/p680](http://randsco.com/index.php/2009/07/04/p680)

# recursion - 二叉树的中间节点

> ID：13367002
> 
> 赞同：0
> 
> 时间：2012-11-13T19:02:19.410
> 
> 标签：recursion, tree, binary-tree, tree-traversal

我有一个我无法回答的问题的考试：我们有一个二叉树，其中每个节点都有一定的高度（从底部）和一定的深度（从根）。我们从零开始计数；例如：对于具有单个子节点的根树，子节点的深度为 1，高度为 0。

找到一个递归算法，它打印所有的中间节点，即当一个节点的高度等于它的深度时。

给出的提示是：将 d(depth) 作为函数的参数，将高度作为返回值...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:10:15.393

Python 实现，其中 node 是具有属性的对象`children`。

```
def R(node, d):
  if not node.children: # No children, leaf node
    height = 0
  else:
    height = max( R(child, d+1) for child in node.children ) + 1
  if height == d:
    print node  # Or some node.id
  return height

R(root, 0)  # Call with a root node 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T10:33:11.873

```
void medianInTree(class tree* root, int depth, int height)
{

    if(root)
    {
         if(height == depth)
             cout<<"   "<<root->data;
         medianInTree(root->left, depth-1, height+1);
         medianInTree(root->right, depth-1, height+1);
    }
} 
```

将深度作为树的高度（考虑根的高度=1）。

# webview - 使用钛从磁盘加载图像

> ID：13367004
> 
> 赞同：0
> 
> 时间：2012-11-13T19:02:24.487
> 
> 标签：webview, titanium, appcelerator

我的应用程序中有一些 webviews，webviews 从服务器加载图像，我解析了所有路径并兑现了图像。

所以我得到这样的路径：

file://localhost/Users/Fincha/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/1DC70FE8-0FEA-46AD-9A49-18E78282C2CA/Documents/files/4c06c87edbc3994829483e7b6be1d89c.png

在我的 iphone 模拟器中，在 iphone 上类似。

我尝试替换我的 webview 中的路径以使应用程序从磁盘加载图像，并且它成功但我看不到图像甚至 js 或样式表（它们也被缓存）。图像标签呈现为空。

路径是正确的，如果我创建一个具有相同路径的图像视图，它可以完美地工作。

这里有一些代码：

```
var webView = Ti.UI.createWebView({
            // url : urlToShow,
            // image : "file://localhost/Users/Fincha/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/1DC70FE8-0FEA-46AD-9A49-18E78282C2CA/Documents/files/4c06c87edbc3994829483e7b6be1d89c.png",
            html : "<img height='200' width='300' src='file://localhost/Users/Fincha/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/1DC70FE8-0FEA-46AD-9A49-18E78282C2CA/Documents/files/4c06c87edbc3994829483e7b6be1d89c.png' />", // replacePathesInHTML(data.data[elDiD].content),
            height : Titanium.UI.SIZE
        }); 
```

那么如何在 webview 表单设备中显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:37:14.120

我根本不明白你是如何让这个成功的。指向计算机上的文件有什么意义？如果要使用 localhost，请设置本地 mamp 服务器： http: [//www.mamp.info](http://www.mamp.info)，然后使用类似的 url`http://localhost/yourimage.png`

# c# - 有没有办法指定在站点范围内使用哪个字符串比较？

> ID：13367005
> 
> 赞同：2
> 
> 时间：2012-11-13T19:02:38.510
> 
> 标签：c#, asp.net

我问的原因是因为我刚刚发现了一个非常奇怪的错误，它只发生在我们的生产盒上。这是一个小例子：

```
protected void Page_Load(object sender, EventArgs e)
{
    ...
    var form = Request.Form;
    string name = form.GetValueOrDefaultIfKeyExists("firstName");
    string email = form.GetValueOrDefaultIfKeyExists("emailAddress");
    ... 
} 
```

在我们的生产框中 - 在此代码运行后，名称和电子邮件将是 String.Empty - 即使表单包含带有“firstName”和“emailAddress”的键。这`GetValueOrDefaultIfKeyExists`是一个自定义扩展方法，以这种方式实现：

```
public static Boolean HasKey(this NameValueCollection collection, String key)
{
    return collection.AllKeys.Any(x => x.Equals(key));
}

public static String GetValueOrDefaultIfKeyExists(this NameValueCollection collection, String key)
{
    return GetValueOrDefaultIfKeyExists(collection, key, String.Empty);
}

public static String GetValueOrDefaultIfKeyExists(this NameValueCollection collection, String key, String defaultValue)
{
    return collection.HasKey(key) ? collection[key].Trim() : defaultValue;
} 
```

问题出`HasKey()`在我们生产盒上的方法上。这在我们的生产盒上返回 false ，直到我将其更改为此实现：

```
public static Boolean HasKey(this NameValueCollection collection, String key)
{
    return collection.AllKeys.Any(x => x.Equals(key, StringComparison.OrdinalIgnoreCase));
} 
```

有没有人对行为差异有可能的解释？开发盒和生产盒都使用 IIS6.0 和 asp.net v2.0。我真的不知道这里还有什么可以看的......

编辑：当我在 localhost 上运行页面并通过遍历 Request.Form 键/值将变量转储到页面时，我得到如下输出：

```
__VIEWSTATE = /wEPDwUJNTE2ODkwODQ2ZGS2XnJpbO5ngrJFByrGtuNn3PkU5A==

LandingPage = ~/Newsletter/thank-you.aspx

SourceDesc = 676

emailAddress = bntest222@test.com

confirmEmailAddress = bntest222@test.com

firstName = mtest

postalCode = 23320 
```

在我们的生产机器上运行的相同代码会转储：

```
__viewstate = /wEPDwUJNTE2ODkwODQ2ZGSWeuNU+/5eQHvpsMc66Ayh4lEdWQ==

confirmemailaddress = mtest332@test.com

emailaddress = mtest332@test.com

firstname = mtest

landingpage = ~/Newsletter/thank-you.aspx

postalcode = 23320 
```

看起来键是小写的……为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:11:40.757

不能*准确*回答您的问题，但是：FxCop/代码分析会警告您项目中未指定显式`StringComparison`或格式提供程序但应该指定的任何代码。

# compare - 用于列出文件 A 中不存在的用户名的 Bash 命令

> ID：13367006
> 
> 赞同：0
> 
> 时间：2012-11-13T19:02:43.680
> 
> 标签：compare

文件 A：-

詹姆士

彼得

麦克风

汤姆

玛莎

珍妮

文件 B：-

詹姆士

贝基

玛丽

塔尼亚

玛丽亚

坦尼

夏奇拉

输出应该在第三个文件中：->

文件 C:-

贝基

玛丽

塔尼亚

玛丽亚

坦尼

夏奇拉

我找不到或可能不明白该使用哪个。我尝试 diff 和 comm 但无法得到我想要的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:11:45.000

使用 join -v 2 AB

请注意，与其他关系命令一样，join 假定所有输入文件都已排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:13:28.293

我没有尝试用你的数据运行它，但 fgrep 应该在这里工作：

```
fgrep -fA -v B > C 
```

不过，您可能希望在将 A 用作模式文件之前从 A 中删除空行。

# android - 我无法更新我的 apk

> ID：13367007
> 
> 赞同：0
> 
> 时间：2012-11-13T19:02:44.990
> 
> 标签：android, publishing, keystore, signing

我制作了一个应用程序并成功发布到 Play 商店。然后我发现了一个错误并修复了它。现在我无法更新应用程序，因为它说两个 apk 的证书不同。

使用 Eclipse 签名工具，我尝试填写我上次编写的相同内容，但事实并非如此。我看到如果我链接旧的 apk，我可以使用“使用现有的密钥库”，虽然我不能选择别名。

如果我尝试创建一个新的密钥库并填写与之前相同的内容，则会收到“keytool 错误：java.io.IOException：无效的密钥库格式”。

请告诉我如何更新已发布的 apk。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:06:26.953

我刚刚在这里发布了这个答案 -[我能以某种方式从 android 密钥别名中获取详细信息吗？像有效性，组织等等](https://stackoverflow.com/questions/13366644/can-i-somehow-get-details-from-android-key-alias-like-validity-organisation-an/13366856#13366856)- 不是同一个问题，但它有相同的答案 -

抱歉，无法替换丢失的密钥库。一旦丢失，您将无法找回它，尽最大努力找到它，但如果失败，您可以做的最好的事情是发布一个新应用程序（使用新的密钥库），并告诉您的用户安装新应用程序以进行更新。

**确保备份新的密钥库**，通过电子邮件将其发送给自己，将其放在云中，然后将其放在另一台计算机上，这样就不会再发生这种情况。

即使您知道放入旧密钥库的详细信息，您也无法重新创建它 - 密钥库被设计为无法重新创建。

以防万一你想要另一个来源：

*   [https://groups.google.com/forum/?fromgroups=#!topic/android-developers/tcmT2uHOmGY](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/tcmT2uHOmGY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-27T19:39:38.587

我的建议和我做的一样，是使用 GitHub.com 或 bitbucket.org 私有存储库源代码控制，并使用您的代码签入您的密钥库。

# jquery - jQuery Flexslider 插件在 Phonegap iOS 应用程序中不起作用

> ID：13367010
> 
> 赞同：1
> 
> 时间：2012-11-13T19:02:55.933
> 
> 标签：jquery, ios, xcode, cordova, flexslider

使用手机间隙进行开发时，是否可以在 xcode 中使用图片库滑块？

我已经放入了一些在浏览器中运行良好但在我的 ios 模拟器中运行良好的 jquery 代码。

```
 <title>Test App</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.flexslider-min.js"></script>
    <script type="text/javascript" src="js/jquery.flexslider.js"></script>
    <link rel="stylesheet" type="text/css" href="css/flexslider.css" />
</head>
<body><h1>Test App</h1>
    <div class="flexslider">
        <ul class="slides">
            <li>
                <img src="img/cordova.png" />
            </li>
            <li>
                <img src="img/cordova.png" />
            </li>
            <li>
                <img src="img/cordova.png" />
            </li>
            <li>
                <img src="img/cordova.png" />
            </li>
        </ul>
    </div>
    <script type="text/javascript">
        $(window).load(function(){
                       $('.flexslider').flexslider({
                                                   animation: "slide",
                                                   start: function(slider){
                                                   $('body').removeClass('loading');
                                                   }
                                                   });
                       });
        </script>
        </body> 
```

这会在电话间隙科尔多瓦工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:47:10.867

我会说这是你如何使用 Flexslider 插件的问题。flexslider 的文档表明它适用于移动浏览器。我想不出为什么它在 phonegap 应用程序中的行为会有所不同，所以我认为你做错了什么。

Phonegap 在显示 javascript 错误方面并不是最好的。仅仅因为您在 Xcode 控制台中没有看到任何内容并不意味着没有任何内容。

我发现这些天来调试 Phonegap 应用程序的最佳方法是在 OSX 上使用桌面 Safari。

在 Safari 的开发菜单下，您应该能够打开开发者工具来检查在 iOS 模拟器中运行的 phonegap 应用程序。如果需要，您也可以定位连接的 iPhone 设备。

不幸的是，开发工具中的控制台只会在您打开它之后接收到发生的 JS 错误，因此您可能需要在工具打开后手动触发您的 JS 代码。

您还应该能够使用开发工具查看`<img>`标签。这将为您提供有关它们是否存在的线索，但只是不可见。也许是某种 CSS 问题等。

# sublimetext2 - 是否可以从 Sublime Text 2 中删除正确的“代码概述”？

> ID：13367013
> 
> 赞同：18
> 
> 时间：2012-11-13T19:02:57.693
> 
> 标签：sublimetext2

我用谷歌搜索过，但部分原因是我不知道该怎么称呼它，我不知道如何删除它。我从不使用它，而且在我的笔记本电脑屏幕上它占用了很多空间，尤其是多列视图。

谢谢。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-13T19:05:07.493

在`View`菜单下有一个选项`Show/Hide Minimap`（至少在 Linux 和 Mac 下）。

# python - 将纪元时间戳转换为 datetime.datetime 对象

> ID：13367014
> 
> 赞同：1
> 
> 时间：2012-11-13T19:03:00.453
> 
> 标签：python, datetime, epoch

我想将一个纪元时间戳（例如，et =1351036517.179364）转换为 datetime.datetime 对象。到目前为止，我已经使用了 time.ctime(et) ，它给了我类似“Fri Oct 5 22:20:33 2012”的字符串。

最终，我需要 datetime 对象来计算两个数据点之间的时间差，另一个数据点也是一个 datetime 对象。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:09:04.100

值得记住的是，**时间戳没有关联的时区信息**。 [Unix 时间](https://en.wikipedia.org/wiki/Unix_time)是明确的 UTC，但将本地时间存储在*Unix 样式的*时间戳中并不罕见。您必须对照已知的参考资料进行检查以确定。

* * *

**如果您的时间戳已经是 UTC（Unix 时间）**，您可以使用 Marc B 的建议直接减去两个 unix 时间戳，以得出它们之间的差异秒数。然后您可能想要创建一个[timedelta](http://docs.python.org/2/library/datetime.html#datetime.timedelta)，这将允许您轻松地`datetime`使用它来操作 s （例如，您可以将 timedelta 与日期时间相加或减去）。

`datetime.timedelta( seconds= n_seconds )`

* * *

**如果您的时间戳是本地时间**，请不要直接减去它们，因为您可能会得到不正确的结果。

相反，您应该首先使用[datetime.fromtimestamp](http://docs.python.org/2/library/datetime.html#datetime.datetime.fromtimestamp)，[将时区附加到每个 datetime](http://pytz.sourceforge.net/)，然后再减去它们以获得 timedelta。

要从 a 转换回`timedelta`秒数，可以使用[timedelta.total_seconds](http://docs.python.org/2/library/datetime.html#datetime.timedelta.total_seconds)，假设您使用的是 python 2.7 。如果您有较早的版本，则必须手动进行计算，或者`pip install datetime`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-08T10:14:05.657

要将 POSIX 时间戳转换为`datetime.datetime`表示 UTC 时间的对象：

```
from datetime import datetime, timedelta, timezone

timestamp = 1351036517.179364
utc_time = datetime(1970, 1, 1, tzinfo=timezone.utc) + timedelta(seconds=timestamp)
# -> 2012-10-23 23:55:17.179363+00:00 
```

如果您的 Python 版本不支持`datetime.timezone`；您可以省略它，以在 UTC 中获取天真的日期时间对象。

* * *

> 我需要 datetime 对象来计算两个数据点之间的时间差，另一个数据点也是 datetime 对象。

如果天真`datetime`的对象表示具有不同 UTC 偏移量的本地时间，则您无法直接比较它们，否则您可能会得到错误的结果。您要么需要可识别时区的日期时间对象，要么应首先将日期时间对象转换为 UTC。看

*   [如何在 Python 中将本地时间转换为 UTC？](https://stackoverflow.com/q/79797/4279)
*   [在 Python 中将 datetime.date 转换为 UTC 时间戳](https://stackoverflow.com/q/8777753/4279)
*   [查找日期时间之间是否经过了 24 小时 - Python](https://stackoverflow.com/a/26313848/4279)
*   [两次之间的差异（python）](https://stackoverflow.com/q/27643554/4279)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-02T14:06:37.143

# TLDR

`fromtimestamp`按照[文档中的说明](https://docs.python.org/3.9/library/datetime.html#datetime.datetime.fromtimestamp)使用

> 返回与 POSIX 时间戳对应的本地日期 [...如果提供了 tz...]，则时间戳将转换为 [提供] tz 的时区。

# 给定一个 UNIX/EPOCH 时间戳

这是由 python 生成的时间戳的示例（感谢@jfs 和[Paul Ganssle](https://blog.ganssle.io/articles/2019/11/utcnow.html)更新）

```
from datetime import datetime, timezone
epoch = datetime.now(tz=timezone.utc).timestamp()  # example: 1520020585.536527 
```

***注意**：并非所有纪元都是相似的，使用`time.time()`将给出自[平台相关纪元](https://docs.python.org/3/library/time.html#time.time)以来经过的秒数，其中 as`date.timestamp()`为您提供[其声称的 POSIX 时间戳](https://docs.python.org/3.9/library/datetime.html#datetime.datetime.timestamp)，请参阅下面的警告*

***注意**：我特别避免调用`.timestamp()`' 输出“符合 POSIX 的”时间戳。如果您的应用程序[依赖于该级别的准确性，](https://en.wikipedia.org/wiki/Unix_time#Leap_seconds)那么您可能希望使用除`.timestamp()`*

***注意**：使用`datetime.now`它可能会[提供更高的精度](https://docs.python.org/3/library/datetime.html#datetime.datetime.now)*

***注意**：我们可以省略`tz`上面的参数，但是使用时区感知日期是一个好习惯，因为 python 3 在使用天真日期时可能会做出错误的假设（或者不会在我们认为会抛出错误的地方抛出错误）*

# 将时间戳转换为日期时间对象

给定时间戳（例如`1520020585.536527`），我们可以使用如下方式将其转换为 datetime tz 感知对象`fromtimestamp`：

```
from datetime import datetime, timezone
ts = 1520020585.536527  # remember me? I'm the epoch example output from above
utc_date = datetime.fromtimestamp(ts, tz=timezone.utc) # outputs: datetime date object 
```

***注意**：`fromtimestamp`需要一个“POSIX”时间戳，`tz`我们在这里提供只是为了避免天真的日期时间对象。`fromtimestamp`将为我们提供的时区执行任何需要的转换，但是哪个时区比 UTC 更好，对吧？*

***注意**：虽然python文献明确将输入引用`fromtimestamp()`为“POSIX”时间戳，但并未明确将输入称为“POSIX兼容”，因此我们只能从其文献的其他部分推断“POSIX”时间戳是什么，比如当它把 POSIX 输出称为“由 time.time() 返回”时*

# python - 使用 mocks 的 Python 单元测试功能

> ID：13367015
> 
> 赞同：3
> 
> 时间：2012-11-13T19:03:00.453
> 
> 标签：python, unit-testing, mocking

我对 python 开发相当陌生，我不确定将模拟注入到单元测试函数中的最佳方法是什么。

我有一个看起来像这样的函数：

```
import exampleModule

def func():
    ls = createList()
    exampleModule.send(ls) 
```

在上面的代码中，我想模拟`exampleModule.send`方法。

我应该将方法作为参数传递给函数吗？喜欢：

```
def func(invokeMethod):
    ls = createList()
    invokeMethod(ls) 
```

在单元测试中我可以通过模拟。但我不希望调用者指定调用方法。

正确的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:41:17.613

您可以使用Michael Foord 的[模拟库，它是 Python 3 的一部分。它使这种模拟非常方便。](http://www.voidspace.org.uk/python/mock/)一种方法是：

```
>>> from mock import patch
>>> import exampleModule
>>>    
>>> def func():
...     ls = []
...     exampleModule.send(ls)
... 
>>> with patch('exampleModule.send') as send:
...     func()
...     assert send.called 
```

在这里，我们将其用作上下文管理器。但你也可以`patch`用作装饰器。但是有更多的使用方式`mock`，它可能会满足你在模拟/存根中的所有需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:15:08.370

Python 支持函数作为一等公民，因此您可以覆盖方法的实现以进行单元测试。

[这种方法基本上向您展示了方法。](https://stackoverflow.com/questions/3154441/how-to-mock-a-free-function-in-python)

```
class Foo
   def thing_to_mock():
      really_expensive_stuff()

   def thing_to_test():
       i = 1 + 2
       thing_to_mock()
       return i

class FooTest
  def testingThingToTest():
       def mocker():
           pass
       toTest = Foo()
       toTest.thing_to_mock = mocker
       # assert here 
```

或者，在 Python 3.3 中，您可以使用[内置的模拟支持](http://docs.python.org/dev/library/unittest.mock.html#module-unittest.mock)。

# asp.net-mvc-3 - 在 IE8 中未调用 MVC3 Ajax.BeginForm 的 AjaxOptions 回调

> ID：13367021
> 
> 赞同：0
> 
> 时间：2012-11-13T19:03:20.160
> 
> 标签：asp.net-mvc-3, internet-explorer-8

我有一个非常标准的 ajax.beginform 布局，带有 OnSuccess 回调。但在 IE8 中，不会调用回调，但在 Chrome 中可以正常工作。

我的观点包括 jquery.validate.min.js、jquery.validate.unobstusive.min.js 和 jquery.unobstrusive-ajax.min.js。

该视图用作局部视图，并包含它需要的所有脚本，以及回调将调用的 javascript 函数。

我还要注意，我必须将最初创建 MVC3 项目时附带的 jquery.validate.min.js 升级到已经可以在 IE8 上正常工作的项目。

为什么这不起作用有任何已知问题吗？还是我错过了什么？

[cshtml]

```
<script type="text/javascript">
    function FormSuccess(context) {
        alert("FormSuccess()");
    };
</script>

@using (Ajax.BeginForm("GetMessage", "Form", new AjaxOptions { OnSuccess = "FormSuccess" }))
{ 
```

[控制器]

```
[HttpPost]
public JsonResult GetMessage(MessageModel model)
{
    return Json( success = true, message = "success" );
} 
```

在 Chrome 中，回调被击中，但在 IE8 中我得到一个文件下载对话框。下载文件后，我得到一个包含以下内容的文件：

```
{"success":false,"messages":"success"} 
```

正如你所看到的，这是我在这里做的一件非常简单的事情，但它似乎并不想在 IE8 中工作。

有任何想法吗？

**更新**

我发现因为我正在从 ascx 页面呈现 razor cshtml 文件，所以没有调用 AjaxOptions 回调。我创建了一个做同样事情的沙盒应用程序，如果我有一个 cshtml 渲染部分 cshtml，一切正常，但如果我有一个 aspx 渲染部分 cshtml，则不会调用回调

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:08:33.697

以下不正确

```
[HttpPost]
public JsonResult GetMessage(MessageModel model)
{
    return Json( success = true, message = "success" );
} 
```

.将其更改为：

```
 [HttpPost]
    public JsonResult GetMessage(MessageModel model)
    {

        return new JsonResult{success = true, message = "success"};
    } 
```

**编辑：**

您必须返回完整的 View 而不是 json 结果。

如果要发送 ajax 请求并获取 JSON 结果，则必须通过 jquery ajax 函数发送。

# page-curl - CATransition 不尊重 iPad 上的方向变化

> ID：13367022
> 
> 赞同：3
> 
> 时间：2012-11-13T19:03:24.910
> 
> 标签：page-curl, catransition

我有一个正常工作的页面卷曲。问题是 iPad 的旋转。该应用程序仅在横向运行，并支持 l 左和 l 右。如果 iPad 是“横向”，则卷曲应该发生在右下角。如果我旋转 iPad，视图会按预期旋转，但现在当我尝试卷曲发生在左上角时。我添加了一条通知，告诉我它何时旋转并尝试更改动画子类型但没有骰子。

```
 -(IBAction)curlViewUp
{
    uiv_help.alpha = 1.0;

    [UIView animateWithDuration:1.0
                     animations:^{
                         CATransition *animation = [CATransition animation];
                         [animation setDelegate:self];
                         [animation setDuration:0.7];
                         [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
                         animation.type = @"pageCurl";
                         animation.subtype = curlDirection;
                         animation.fillMode = kCAFillModeForwards;
                         animation.endProgress = 0.20;
                         [animation setRemovedOnCompletion:NO];
                         [self.view.layer addAnimation:animation forKey:@"pageCurlAnimation"];
                         [self.view addSubview:uiv_help];
                         ;}
     ];
}

-(IBAction)curlViewDown
{
    uiv_help.alpha = 0.0;

    [UIView animateWithDuration:1.0
                     animations:^{
                         CATransition *animation = [CATransition animation];
                         [animation setDelegate:self];
                         [animation setDuration:0.7];
                         [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]];
                         animation.type = @"pageUnCurl";
                         animation.subtype = curlDirection;
                         animation.fillMode = kCAFillModeForwards;
                         animation.startProgress = 0.80;
                         [animation setRemovedOnCompletion:YES];
                         [self.view.layer addAnimation:animation forKey:@"pageUnCurlAnimation"];
                         //[self.view removeFromSuperview];
                         [uiv_help removeFromSuperview];
                         ;}
     ];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft | interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

-(void)checkRotation:(NSNotification*)notification
{
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    if(orientation == UIInterfaceOrientationLandscapeLeft)
    {
        NSLog(@"UIInterfaceOrientationLandscapeLeft");

        curlDirection = @"fromRight";
    } else if (orientation == UIInterfaceOrientationLandscapeRight) {
        NSLog(@"UIInterfaceOrientationLandscapeRight");

        curlDirection = @"fromRight";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:17:13.480

您的 pagecurl 没有随设备旋转。

这是因为它的视图没有随着设备旋转而旋转。

*这*是因为它的视图是视图层次结构中的最顶层视图。

我在任何地方都找不到这方面的文档（其他人可以把它挖出来吗？），但是视图层次结构中最外层的视图仍然没有旋转。我想这是因为这个视图负责旋转其他所有内容（或者更确切地说，这个视图应用了某种旋转变换）。

这是一件很容易验证的事情，只需记录视图的框架和边界并观察旋转时会发生什么。

在这里，我们处于肖像模式。我已经设置了一个包含在 self.view 中的子视图，具有相同的尺寸。

```
self.view frame {{0, 20}, {768, 1004}}
self.view bounds {{0, 0}, {768, 1004}}
self.view center {384, 522}
--------
self.subview frame {{0, 0}, {768, 1004}}
self.subview bounds {{0, 0}, {768, 1004}}
self.subview center {384, 502} 
```

现在让我们旋转到横向

```
self.view frame {{20, 0}, {748, 1024}}
self.view bounds {{0, 0}, {1024, 748}}
self.view center {394, 512}
--------
self.subview frame {{0, 0}, {1024, 748}}
self.subview bounds {{0, 0}, {1024, 748}}
self.subview center {512, 374} 
```

您会看到内部子视图正确地将宽度报告为 1024，高度报告为 748px。但是外面的景色变得很奇怪。它的框架报告宽度为 748，高度为 1024，就好像它仍然是纵向的（加上状态栏 20px）。但它的*界限*告诉我们这是风景。

我们显然不想依赖报告这种奇怪结果的视图的几何属性。我想这与 Apple 的警告有关，即如果视图的框架经过身份变换以外的任何变换，则不应引用它。

解决方案是将您的页面卷曲视图嵌入到另一个最外层视图中。创建一个新视图，将其命名为 self.subview（或其他），并将其作为 self.view 的唯一子级添加到您的视图层次结构中。将其调整为与 self.view 相同的矩形。在 self.subview 而不是 self.view 上操作。

更改此行：

```
[self.view.layer addAnimation:animation forKey:@"pageCurlAnimation"]; 
```

至

```
[self.subview.layer addAnimation:animation forKey:@"pageCurlAnimation"]; 
```

并更改此行：

```
[self.view.layer addAnimation:animation forKey:@"pageUnCurlAnimation"]; 
```

至：

```
[self.subview.layer addAnimation:animation forKey:@"pageUnCurlAnimation"]; 
```

然后您的卷发将按您的预期运行，因为您将它们应用到一个按您预期旋转的视图。

您可以在不更改代码的情况下获得相同的结果，但将 viewController 嵌入 UINavigationViewController。在这种情况下，NavViewController 的视图是不旋转的最外层视图。所以你的 self.view 会旋转。

**更新**

```
UIWindow* mWindow = [[UIApplication sharedApplication] keyWindow];
UIView *topView = [[mWindow subviews] lastObject];
NSLog("%@",topView);

topView <UILayoutContainerView: 0x71eb450; 
frame = (0 0; 748 1024); 
transform = [0, 1, -1, 0, 0, 0];     
autoresize = W+H; gestureRecognizers = <NSArray: 0x71f8a30>; 
layer = <CALayer: 0x71eb540>> 
```

注意变换。

# php - 带有验证过程的php oop文件上传表单

> ID：13367023
> 
> 赞同：0
> 
> 时间：2012-11-13T19:03:33.333
> 
> 标签：php, file-upload, mysqli

嗨，我是 OOP 实践的新手，我正在尝试通过使用函数将文件上传到使用 PHP 上。我需要我的文件上传系统做的是：

**文件上传规范**

1.  特定文件扩展名 - 即 jpg、jpeg、gif、png 等
2.  上传到特定目录，但在上传时根据 SQL 数据库中条目的 id 创建一个新目录 - 即 house id 234 将创建上传目录 234。
3.  保留已上传文件的扩展名 - 即，如果已上传 jpeg，请保留该扩展名。
4.  将文件重命名为随机文件名

我已经创建了函数，但我不断收到以下错误

```
Warning: mkdir() [function.mkdir]: File exists in /Applications/XAMPP/xamppfiles/htdocs/undergradpad/classes/class.House.inc on line 52 
```

我不明白这意味着什么，因为该目录中不存在该文件，但是将添加房屋详细信息的语句输入到数据库中。

任何帮助都会受到热烈欢迎。

我的代码如下：

类/class.House.inc

```
<?php
    include("connect/class.Database.inc");

    class House extends Database {
    public function insert ($field) {

         $sql = "INSERT INTO houses(bedrooms, description, roadname, postcode, price, deposit, contractlength, available, bathrooms, livingrooms, outdoorspace, furnishing, contactdetails) 
              VALUES('".$this->bedrooms."', '".$this->description."', '".$this->roadname."', '".$this->postcode."', '".$this->price."', '".$this->deposit."', '".$this->contractlength."', '".$this->available."', '".$this->bathrooms."', '".$this->livingrooms."', '".$this->outdoorspace."', '".$this->furnishing."', '".$this->contactdetails."')";
            $result = $this->mysqli->query($sql) or die("insert:".$mysqli->error());

             $allowedExtensions = array("jpg","jpeg","gif","png"); 
             $path =  "../files/uploads/houses_gallery/$mysqli->insert_id";

            if (!$this->mysqli->query($sql) && is_dir($path))
                  {
                    die('Error: ' . $mysqli->error());
                  }
                            echo "<h3>1 record added</h3>";
                            mkdir($path);
                    move_uploaded_file($_FILES['fileField']['tmp_name'], "$path");      
        }
    }
?> 
```

插入.php

```
<?php 
include("classes/class.House.inc");
include("header.php"); 
?>
<?php
$obj = new House();
    if(isset($_POST['submit'])){

        $fields = array(
        'description'   => array('required' => True),
        'roadname'  => array('required' => True),
        'postcode'  => array('required' => True),
        'price'     => array('required' => True),
        'deposit'   => array('required' => True),
        'contractlength'=> array('required' => True),
        'available' => array('required' => True),
        'bedrooms'  => array('required' => True),
        'bathrooms' => array('required' => True),
        'livingrooms'   => array('required' => True),
        'outdoorspace'  => array('required' => True),
        'furnishing'    => array('required' => True),
        'contactdetails'=> array('required' => True),
    );
    // We will check ALL fields, and store here any missing ones
        $missing = array();

        foreach($fields as $field => $definition)
        {
            if (!empty($_POST[$field]))
            {   
                 $obj->bedrooms = $_POST['bedrooms'];
                 $obj->description = $_POST['description'];
                 $obj->roadname  = $_POST['roadname'];
                 $obj->postcode = $_POST['postcode'];
                 $obj->price  = $_POST['price'];
                 $obj->deposit  = $_POST['deposit'];
                 $obj->contractlength  = $_POST['contractlength'];
                 $obj->available  = $_POST['available'];
                 $obj->bathrooms  = $_POST['bathrooms'];
                 $obj->livingrooms  = $_POST['livingrooms'];
                 $obj->outdoorspace = $_POST['outdoorspace'];
                 $obj->furnishing  = $_POST['furnishing'];
                 $obj->contactdetails  = $_POST['contactdetails'];
                // We store the content in the object
                $obj->$field = $_POST[$field];

            }
            else
            {
                // Field is required? If so, its lack is an error
                if (True === $definition['required'])
                    $missing[] = $field;
                    }
                        }
                            if (!empty($missing))
                            {
                                echo "Sorry, field(s) missing: " . implode(',', $missing);
                            } else {
                                $obj->insert($field);
                            }
                 }
?>

<div id="mainContent">
<br/>
<div id="insertform"> <!-- Insert Form Div -->

<div id="formWrap">
    <h2>Add a New House</h2>
    <h3> </h3>
    <div id="form">
    <form action="insert.php" method="post" name="insert" id="comments_form">
    <div class="row">
    <div class="label">Picture</div>
    <div class="input">  
    <input type="file" name="fileField" id="fileField" class="detail" />         
                </div> <!-- end input -->
                <div class="context">e.g. Upload pictures to enable students to view your house.</div> <!-- end context -->
                </div> <!-- end .row -->   
    <div class="row">
    <div class="label">No. of Bedroms</div>
    <div class="input"> 
            <select name="bedrooms" id="bedrooms" class="detail">
                <?php 
                 $no_rooms = array("1", "2", "3", "4", "5", "6", "7", "8+");
                    foreach ($no_rooms as $number) {    
                        echo "<option value='$number'>$number</option>";
                    }
                ?>                </select> 

                </div> <!-- end input -->
                <div class="context"> e.g. John Smith </div> <!-- end context -->
                </div> <!-- end .row -->
    <div class="row">
    <div class="label">Description</div>
    <div class="input">            
            <textarea name="description" name="description" id="description" class="detail"></textarea>
                </div> <!-- end input -->
                <div class="context"> e.g. 3 Bedroom house in London close to University bus stops. </div> <!-- end context -->
                </div> <!-- end .row -->      
    <div class="row">
    <div class="label">Road Name</div>
    <div class="input">        
            <input type="input" name="roadname" id="roadname" class="detail"/>
                </div> <!-- end input -->
                <div class="context"> e.g. New Road </div> <!-- end context -->
                </div> <!-- end .row -->         
    <div class="row">
    <div class="label">Postcode</div>
    <div class="input">                             
            <input type="input" name="postcode" id="postcode" class="detail" />
                </div> <!-- end input -->
                <div class="context"> e.g. PO5 3QJ </div> <!-- end context -->
                </div> <!-- end .row -->  
    <div class="row">
    <div class="label">Price</div>
    <div class="input">                                      
            <input type="input" name="price" class="detail" id="price" />
                </div> <!-- end input -->
                <div class="context"> e.g. "300" - price will be calcuated per month plese only enter a numerical figure </div> <!-- end context -->
                </div> <!-- end .row -->        
    <div class="row">
    <div class="label">Depoist</div>
    <div class="input">                               
            <input type="input" name="deposit" id="deposit" class="detail" />
                </div> <!-- end input -->
                <div class="context"> e.g. "200" - please only enter a numerical figure </div> <!-- end context -->
                </div> <!-- end .row -->                    
    <div class="row">
    <div class="label">Length of contract</div>
    <div class="input">                     
            <input type="input" name="contractlength" id="contractlength" class="detail" />
                </div> <!-- end input -->
                <div class="context"> e.g. 10 months, please only enter a numerical figure. </div> <!-- end context -->
                </div> <!-- end .row -->      
    <div class="row">
    <div class="label">Available</div>
    <div class="input">                                    
            <select name="available" id="available" class="detail">
                <?php 
                 $months = array("January", "February", "March", "April", "May", "June", "July", "August", "Septemeber", "October", "Novemeber", "December");
                    foreach ($months as $month) {   
                        echo "<option value='$month'>$month</option>";
                    }
                ?>          
            </select>                   
                </div> <!-- end input -->
                <div class="context"> e.g. September </div> <!-- end context -->
                </div> <!-- end .row --> 
    <div class="row">
    <div class="label">Bathrooms</div>
    <div class="input">                                                 
            <select name="bathrooms" id="bathrooms" class="detail">
                <?php 
                 $no_bathrooms = array("1", "2", "3+");
                    foreach ($no_bathrooms as $number) {    
                        echo "<option value='$number'>$number</option>";
                    }
                ?>          
            </select>
                </div> <!-- end input -->
                <div class="context"> </div> <!-- end context -->
                </div> <!-- end .row -->               
    <div class="row">
    <div class="label">Living Rooms</div>
    <div class="input">                  
            <select name="livingrooms" id="livingrooms" class="detail">
                <?php 
                 $no_livingrooms = array("1", "2+");
                    foreach ($no_livingrooms as $number) {  
                        echo "<option value='$number'>$number</option>";
                    }
                ?>        
            </select>
                </div> <!-- end input -->
                <div class="context">  </div> <!-- end context -->
                </div> <!-- end .row -->                  
    <div class="row">
    <div class="label">Outdoor Space</div>
    <div class="input">                     
            <select name="outdoorspace" id="outdoorspace" class="detail">
                <?php 
                 $outdoor_space_op = array("Garden", "No Garden");
                    foreach ($outdoor_space_op as $option) {    
                        echo "<option value='$option'>$option</option>";
                    }
                ?>        
            </select>
                </div> <!-- end input -->
                <div class="context">  </div> <!-- end context -->
                </div> <!-- end .row -->                  
    <div class="row">
    <div class="label">Description</div>
    <div class="input">                    
            <select name="furnishing" id="furnishing" class="detail">
                <?php 
                 $furnishing_type = array("Fully Furnished", "Part Furnished", "Not Furnished");
                    foreach ($furnishing_type as $option) { 
                        echo "<option value='$option'>$option</option>";
                    }
                ?>        
            </select>
                </div> <!-- end input -->
                <div class="context">  </div> <!-- end context -->
                </div> <!-- end .row -->                      
    <div class="row">
    <div class="label">Contact No</div>
    <div class="input">                   
            <input type="input" name="contactdetails" id="contactdetails" class="detail"  />
                </div> <!-- end input -->
                <div class="context"> e.g. 01682 853214</div> <!-- end context -->
                </div> <!-- end .row -->         
    <div class="row">
    <div class="label">Email Address</div>
    <div class="input">                   
            <input type="input" name="email" id="email" class="detail"  />
                </div> <!-- end input -->
                <div class="context"> e.g. john.smith@gmail.com</div> <!-- end context -->
                </div> <!-- end .row -->                         
            <input type="submit" id="submit" name="submit" value="Submit Message" />
                    <div class="submit"> </div> <!-- end submit -->                
        </form>
</div> <!-- end form -->
</div> <!-- end form wrapper -->

 </div>
<?php include("footer.php");?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:37:32.863

您也不一致地使用 mysqli。我不确定它是否应该是`$mysqli`或`$this->mysqli`，但我肯定会猜到后者。

这种情况是否符合您的预期？检查查询是否失败并且目录是否已经存在？

```
 if (!$this->mysqli->query($sql) && is_dir($path))
              {
                die('Error: ' . $mysqli->error());
              } 
```

该摘录也是您第二次要求`mysqli->query`插入相同的内容。我认为你应该在`$result`这里使用，而不是尝试插入两次。

实际上，我认为您此时不需要检查查询是否失败，因为您已经检查过它是否失败：

```
$result = $this->mysqli->query($sql) or die("insert:".$mysqli->error()); 
```

这有效地防止了该条件永远评估为真，如果写成：

```
if (!$result && is_dir($path)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:06:09.450

```
$path =  "../files/uploads/houses_gallery/$mysqli->insert_id"; 
```

应该是

```
$path =  "../files/uploads/houses_gallery/" . $this->mysqli->insert_id; 
```

正如 Mark B 所指出的，小心 sql 注入。你应该准备你的查询： http: [//php.net/manual/en/mysqli.prepare.php](http://php.net/manual/en/mysqli.prepare.php)

# c++ - 如何强制使用本地共享库而不是系统库？

> ID：13367025
> 
> 赞同：15
> 
> 时间：2012-11-13T19:03:41.650
> 
> 标签：c++, c, linux, linker, shared-libraries

如何在 linux 中强制使用本地库而不是系统库？

我将我的可执行文件显式链接到我的项目/lib 目录中的一些 .so 文件，例如（../lib/libluajit.so）。

在 gdb 下运行我的可执行文件或使用 ldd 表明它仍然使用系统 libluajit-5.1.so.2

然后我将 LD_LIBRARY_PATH 设置为我的项目/lib 目录并将其导出，然后运行我的可执行文件。不知何故，它仍在拾取系统库（由 gdb 和 ldd 确认）

我想知道这怎么可能，以及我能做些什么来强制它使用我的项目/lib 目录中的本地 libluajit.so。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-13T19:09:39.753

链接时，指定库的目录并使用 rpath：

```
-Wl,-rpath,/absolute/path/to/your/library -L/absolute/path/to/your/library -llibrary
```

`-L`告诉链接器在链接时在哪里找到你的库，并`-rpath`告诉它在运行时在哪里搜索库。

请注意，`-L`需要`-rpath`包含 .so 文件的目录，而不是库文件本身的实际路径。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T19:08:46.197

我不得不质疑为什么你要使用你自己的库版本而不是系统提供的版本（有多个不同的版本四处浮动只不过是麻烦和用户混淆的秘诀）。

但是，您应该能够`export LD_PRELOAD=<path_to_your_shared_obj>`强制它加载您自己的版本。

请注意，任何覆盖库版本的机制都不会通过任何类型的特权提升（例如`sudo`）持续存在。

# javascript - 私钥的客户端存储

> ID：13367027
> 
> 赞同：1
> 
> 时间：2012-11-13T19:04:00.377
> 
> 标签：javascript

我知道我们不应该“信任”客户端，因为 JavaScript 是一种解释性语言，检查变量是微不足道的，即使代码混淆和丑化也是如此。

不过，我想问以下问题：

*   是否可以存储一个*很难*访问的变量？即某种能够检测事件循环何时停止的javascript触发器（并做出相应的反应？）
*   即，我想在客户端中存储一个秘密值，但我不希望客户端实际去查看实际值是多少。

谢谢

追问：即使客户端能找到变量，是否可以检测到变量被篡改？即客户端/服务器之间的一些轮询，如果客户端事件循环没有每隔 X 秒周期性地响应，那么服务器认为客户端受到了损害？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:04:50.990

如果客户有它，客户可以找到它。

# hadoop - 如何强制 HBase 在 HDFS 上运行？

> ID：13367028
> 
> 赞同：1
> 
> 时间：2012-11-13T19:04:07.123
> 
> 标签：hadoop, hbase, hdfs

我在本机文件系统上使用 HBase 并创建了一些表。现在我配置了 HDFS 并希望 HBase 使用它。我启动了 Namenode 和 Datanode，但找不到可以告诉 HBase 使用 HDFS 的设置。

我认为它可能会在重新启动时获取 HDFS，所以我这样做了（stop-hbase + start-hbase），但我仍然能够看到我之前在本机文件系统上创建的表。

**如何告诉 HBase 使用 HDFS？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:57:35.677

在 $HBASE_HOME/conf/hbase-site.xml`hbase.rootdir`中定义了 HBase 保存的文件系统/目录。请参阅： [http ://hbase.apache.org/book/config.files.html#hbase_default_configurations](http://hbase.apache.org/book/config.files.html#hbase_default_configurations)

我假设您想在*伪分布式*模式下配置 HBase。如果是这样，请在 中设置以下内容`hbase-site.xml`：

```
<configuration>
  ...
  <property>
    <name>hbase.rootdir</name>
    <value>hdfs://localhost:9000/hbase</value>
  </property>
  <property>
    <name>dfs.replication</name>
    <value>1</value>
  </property>
  ...
</configuration> 
```

在这种情况下，HBase 将使用 HDFS 中的**/hbase**目录。

# android - 向 SQLite 数据库表添加其他列

> ID：13367029
> 
> 赞同：-1
> 
> 时间：2012-11-13T19:04:15.687
> 
> 标签：android, database, sqlite

我已经在一个安卓应用程序上工作了一段时间，并且已经把它交给了我已经提交并收到了我的成绩。但是，我一直在业余时间玩它，并想对其进行一些升级。总结一下我的应用程序到目前为止所做的事情：

*   允许用户创建类列表
*   允许用户为这些课程创建作业列表
*   允许用户编辑课程/作业

在为作业编辑了我的助手类之后，我最近一直在努力关闭。我已经能够缩小问题的根源。

```
return (getReadableDatabase().rawQuery("SELECT _id, assname, urge, name, assday, assmonth FROM assignments ORDER BY "+ orderBy, null)); 
```

似乎该特定语句在出现的两种情况下都给了我一个错误。

```
return (getReadableDatabase().rawQuery("SELECT _id, assname, urge, name, assday, assmonth FROM assignments WHERE _ID=?", args)); 
```

当我从这两个语句中删除*assday*和*assmonth*并阻止程序将它们添加到内容值时，错误就消失了。

我要做的就是为截止日期和月份添加一列，以便我可以将其显示在分配列表中。我知道该怎么做，但是错误阻止了我。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:09:31.160

对于含糊不清的问题和缓慢的响应时间，我深表歉意。我在尝试实现此功能时粗心，并设法忽略了在“CREATE TABLE”语句中将列添加到表中。我为大家浪费的时间道歉。

前：`db.execSQL("CREATE TABLE assignments (_id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, address TEXT, type TEXT);");`

后：`db.execSQL("CREATE TABLE restaurants (_id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, address TEXT, type TEXT, assday TEXT, assmonth TEXT);");`

Since I have two helper classes (which I have been informed is a bad idea, and I now see why) I forgot to edit the one whose onCreate() is called. I once again am sorry for the negligence on my part.

# knockout.js - Knockout.js 如何将我的数据绑定移动到头部的函数中？

> ID：13367033
> 
> 赞同：1
> 
> 时间：2012-11-13T19:04:28.043
> 
> 标签：knockout.js, knockout-2.0

我有一个包含很多逻辑的数据绑定。目前我必须将它粘贴到几个地方才能得到我想要的。我希望能够使其成为仅在一个地方最好作为 KO 对象的方法的函数。我需要移动的数据绑定是创建斜体计数文本的数据绑定。

```
data-bind="text: ($data.children)?($data.children.filter(function(e){return e.enabled()}).length + ' Children On'):('No Children')" 
```

[http://jsfiddle.net/5UeND/6/](http://jsfiddle.net/5UeND/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:06:16.357

您可以在主视图模型上创建一个函数，该函数返回 a`ko.computed`并进行计算：

```
self.childrenCounter = function(data) {
        return ko.computed(function() {
            return (this.children) ? (this.children.filter(function(e) {
                return e.enabled()
            }).length + ' Children On') : ('No Children')
        }, data);
    } 
```

然后你可以在你的模板里面这样使用：

```
<i data-bind="text: $root.childrenCounter($data)"></i> 
```

[演示 JSFiddle。](http://jsfiddle.net/nemesv/Gqd9c/)

# c# - 需要 Shiro C# 客户端

> ID：13367035
> 
> 赞同：-1
> 
> 时间：2012-11-13T19:04:30.180
> 
> 标签：c#, shiro

根据详细架构[http://shiro.apache.org/architecture.html](http://shiro.apache.org/architecture.html) Apache shiro 支持 C# 客户端，但我无法找到关于如何创建一个好的文档/示例。如果您知道有关如何执行此操作的任何文档或想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:23:55.577

Apache Shiro 可以*与*C# 客户端一起使用，但它本身不提供 C# 库。

链接中的体系结构图显示，只要客户端可以与服务器通信，任何客户端技术都可以与启用 Shiro 的服务器一起使用，向服务器发送会话 ID 或主体集合。

Apache Shiro（目前）不为除 JVM 之外的任何平台提供库（这意味着像 Groovy、JRuby、Scala 等——当然还有 Java——现在都可以使用 Shiro）。

（我是 Apache Shiro 团队成员）。

PS 如果有人想在 C# 中提供一个可以与支持 Shiro 的服务器通信的 Subject 接口的轻量级实现，我个人绝对愿意合作！请在 Shiro 开发人员列表中讨论。

# jquery - How to loop a jQuery div animation?

> ID：13367036
> 
> 赞同：6
> 
> 时间：2012-11-13T19:04:31.690
> 
> 标签：jquery, loops, jquery-animate

I’m trying to implement a jQuery function with an infinite loop to animate a div. I can’t figure out how to do it. This is my code:

```
$(document).ready(function () {
    $('#divers').animate({
        'margin-top': '90px'
    }, 6000).animate({
        'margin-top': '40px'
    }, 6000);
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T19:08:39.853

put the code that does the full animation into a function, then pass that function as the callback param to the last animation. Something like...

```
$(document).ready(function() {   
    function animateDivers() {
        $('#divers').animate(
            {'margin-top':'90px'}
            ,6000
        )
        .animate(
            {'margin-top':'40px'}
            ,6000
            ,animateDivers //callback the function, to restart animation cycle
        ); 
    }

    animateDivers(); //call, to start the animation
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T19:07:48.507

```
$(document).ready(function() {
    function ani() {
        $('#divers').animate({
               'margin-top':'90px'
            },6000).animate({
               'margin-top':'40px'
           },6000, ani); //call the function again in the callback
        }); 
    }); 
    ani();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T19:11:18.620

use the `.animate()` callback to 'recall' your function:

## *[jsBin demo](http://jsbin.com/ihapah/1/edit)*

```
$(function() {

  function loop(){
   $('#divers')
     .animate({marginTop:90},6000)
     .animate({marginTop:40},6000, loop); // callback
  }

  loop(); // call this wherever you want

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-21T20:17:50.023

Using setInterval is the way to go. Too much recursion will just get you "Stack Overflow" :-) "Uncaught RangeError: Maximum call stack size exceeded"

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T19:07:10.683

The `animate()` function has an option to take a function to call when the animation ends. You could just do the same call, and voila.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-13T19:08:56.750

You can also set the set interval function specifying which method to call at what interval

```
$(function () { setInterval(fnName, 6000); }); 
```

# asp.net-mvc - 使用 MVC4 在运行时处理文件权限

> ID：13367037
> 
> 赞同：1
> 
> 时间：2012-11-13T19:04:32.677
> 
> 标签：asp.net-mvc, asp.net-mvc-4, runtime, file-permissions

我目前正在使用 MVC4。

*   我的项目中有一个文件夹，其中包含文件（图像、doc 和 pdf 文件）。
*   我有一个数据库，其中包含有权访问每个文件的用户列表（.net 会员 guid）。

我目前正在研究什么，我在问你建议，因为我从未在 MVC 上做过：

关于如何捕获文件的http请求然后决定运行时用户是否有权访问的任何提示？是否有任何类型的 http 处理程序可以让我在 MVC 上做到这一点？任何其他想法或提示？

提前致谢！..

即插即用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:08:12.687

我会创建一个新的`FileAuthorizeAttribute`并装饰一个新的控制器方法。

```
public class FileAuthorizeAttribute: AuthorizeAttribute
{
    protected override bool IsAuthorized(HttpActionContext actionContext)
    {
        if (base.IsAuthorized(actionContext))
        {
            // check if guid is in your database
        }

        return false;
    }

    public override void OnAuthorization(HttpActionContext actionContext)
    {
        base.OnAuthorization(actionContext);
    }
}

public class FileController : Controller
{
    [FileAuthorize]
    public FileResult Load(string fileName)
    {
        //return File(fileName, contentType);
    }
} 
```

# android - jQuery mobile + phonegap +android 4.0.4 header 闪烁

> ID：13367039
> 
> 赞同：4
> 
> 时间：2012-11-13T19:04:41.680
> 
> 标签：android, cordova, jquery-mobile

我正在使用 jQuery mobile 1.2 和 phonegap 开发一个应用程序。在 android 2.3 上测试它工作正常。在 android 4.0.4 上有一个恼人的页眉和页脚闪烁。它们在一页和另一页之间的转换过程中消失。

我试图预加载所有页面。

我设置

```
$.mobile.defaultPageTransition = 'none';
$.mobile.defaultDialogTransition = 'none'; 
```

我试过了

```
.ui-page {
    -webkit-backface-visibility: hidden;
}

.ui-mobile-viewport-transitioning,
.ui-mobile-viewport-transitioning .ui-page {
    overflow: visible;
} 
```

还是有这个问题。正如我所说：在 android 2.3 上，相同的代码正在运行，即使我更改页面，我也看到标题好像已修复。

希望有人能够提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T06:38:27.637

**我遇到了同样的问题，然后我通过在每个标题中添加data-id**属性使标题在所有页面中“持久” 。

所以我有第 1 页到第 4 页，每个页面上都有标题，如果我向每个页面添加**data-id="mainHeader"**（mainHeader 可以是任何你想要的），这会使标题在包含该属性的所有页面中持久存在。它不应该在页面转换之间消失。*注意，data-id 标签也可以用在页脚中。

这是我的一个应用程序的标题：

`<div data-role="header" data-position="fixed" data-theme="a" data-id="mainHeader">`

更多信息：http: [//jquerymobile.com/demos/1.2.0/docs/toolbars/footer-persist-a.html](http://jquerymobile.com/demos/1.2.0/docs/toolbars/footer-persist-a.html)

# c# - 无法从 XNA C# 中的外部类访问公共枚举

> ID：13367046
> 
> 赞同：0
> 
> 时间：2012-11-13T19:05:02.777
> 
> 标签：c#, enums, xna, scope

我有一个包含 GameStates 类实例的 GameServices 类。
GameStates 类有一个名为 GameState 的公共枚举和一个名为 CurrentGameState 的静态变量。

我的问题是，我可以从 GameStates 类访问 CurrentGameState，但不能访问它自己的 GameState 枚举，而它是公共的。

**游戏服务类**

```
using System;
using System.Linq;
using System.Text;
using System.Collections.Generic;
using SpaceGame.UI;
using SpaceGame.Content;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.Graphics;

namespace SpaceGame.Game
{
    public class GameServices
    {
        public static ContentLoader ContentLoaderService;
        public static UIHandler UIHandlerService;
        public static GameStates GameStatesService;

        public static void Initialize(ContentManager contentManager, GraphicsDevice graphicsDevice)
        {
             ContentLoaderService = new ContentLoader(contentManager);
             UIHandlerService = new UIHandler(graphicsDevice);
             GameStatesService = new GameStates();
        }
    }
} 
```

**GameStates 类**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace SpaceGame.Game
{
    public class GameStates
    {
        public GameState CurrentGameState { get; set; }
        public enum GameState
        {
            Settings,
            Splash,
            SpaceShipyard
        }

        public GameStates()
        {
            CurrentGameState = GameState.Splash;
        }
    }
} 
```

难道我做错了什么？

提前致谢，
马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:10:38.847

您应该可以访问它。由于您已在`GameStates`类中定义它，因此该类型的全名将是：

```
SpaceGame.Game.GameStates.GameState 
```

如果仍然无法解决，那么您可能会遇到命名空间问题，这应该始终有效：

```
global::SpaceGame.Game.GameStates.GameState 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:13:16.950

如果您尝试从同一个名称空间访问它，则必须执行类似的操作

```
GameStates.GameState state = GameStates.GameState.Settings 
```

如果您正在这样做，但它不起作用，那么我现在无法帮助您。

这是我做的一个样本。它为我编译。

```
namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {

            A.AEnum a = A.AEnum.a;

        }
    }

    public class A
    {
        public enum AEnum
        {
            a,b
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:12:28.397

基本上，不要在其他类中使用枚举（或类）。使用它们时有很多并发症。

此外， CurrentGameState 不是静态的（至少在您提供的代码中），并且您说它应该是静态的，因此更改它应该可以工作。

# python - 采购不同的配置文件

> ID：13367053
> 
> 赞同：1
> 
> 时间：2012-11-13T19:05:17.933
> 
> 标签：python, configparser

我需要从两个配置文件中的三个不同可能位置读取某个路径：

*   一个全球性的，`/etc/program.conf`
*   一个本地人，`~/.config/program/config`

本地的有一个`[DEFAULT]`部分，可能有也可能没有每个案例特定的部分，比如说`[case]`。我想

1.  读取本地配置的特定案例部分给出的路径
2.  如果没有，请阅读本地配置的默认部分给出的路径
3.  如果没有，请阅读全局配置给出的路径
4.  如果没有 (!)，请提供默认路径

我`configparser`在 Python 中使用。这实际上不是一个难题，但我想出的解决方案让我觉得不优雅和笨拙。我认为这是一种相当普遍的情况，我想我会向更有经验的程序员寻求更好的解决方案。

我的代码是这样的：

```
def retrieve_download_path(feed):
    download_path = os.path.expanduser('~/Downloads')
    config = configparser.ConfigParser()
    if os.path.isfile(CONFIG_FILENAME_GLOBAL):
        config.read(CONFIG_FILENAME_GLOBAL)
        if config.has_option('DEFAULT','Download directory'):
            download_path = os.path.expanduser(config['DEFAULT']['Download directory'])
    if os.path.isfile(CONFIG_FILENAME_USER):
        config.read(CONFIG_FILENAME_USER)
        if config.has_option(feed,'Download directory'):
            download_path = os.path.expanduser(config[feed]['Download directory'])
        elif config.has_option('DEFAULT','Download directory'):
            download_path = os.path.expanduser(config['DEFAULT']['Download directory'])
    return download_path 
```

我该如何改进呢？采购不同配置文件的常用方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:08:46.950

[`configparser`](http://docs.python.org/3/library/configparser.html#module-configparser)似乎为您尝试实现的内容提供支持，特别是多个配置文件和一个`DEFAULT`部分。

这是做你想做的吗？

```
def retrieve_download_path(feed):
    # Read the config files.
    config = configparser.ConfigParser()
    config.read((CONFIG_FILENAME_GLOBAL, CONFIG_FILENAME_USER))

    # Resolve the section (configparser doesn't fallback to DEFAULT if the entire section is missing).
    section = feed if config.has_section(feed) else config.default_section

    # Extract the download path.
    download_path = config.get(section, 'Download directory', fallback='~/Downloads')

    # Expand the user directory.
    return os.path.expanduser(download_path) 
```

我看到的唯一区别是它将允许（并咨询）`DEFAULT`全局配置文件中的一个部分（这似乎是可取的）。

# php - 使用 livedocx 和 php 在 Word 2007 中不显示图像的合并字段

> ID：13367055
> 
> 赞同：0
> 
> 时间：2012-11-13T19:05:22.830
> 
> 标签：php, word-2007, livedocx

我正在尝试将从用户表单上传的服务器端图像添加到使用 LiveDocx 生成的 Word 文档中。

我的word模板看起来像这样。

```
«image:photo» 
```

又名

```
{ MERGEFIELD image:photo \* MERGEFORMAT } 
```

我的 php 看起来像这样。

```
$mailMerge = new Zend_Service_LiveDocx_MailMerge();
$mailMerge->uploadImage($this->logo_path);
$mailMerge->assign('image:photo', $this->logo_path); 
```

我只是得到一个图像应该在的空白区域。我的其他合并字段工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:05:22.830

我没有意识到 LiveDocx 只存储要引用的文件的名称。我使用以下方法发现了这一点：

```
$mailMerge->listImages(); 
```

格式是这样回来的：

```
array
0 => array
  'filename' => string 'directory_logo.png' (length=18)
  'fileSize' => int 12829
  'createTime' => int 1352835686
  'modifyTime' => int 1352835686 
```

所以模板文件可以使用这种格式：

```
«image:photo» 
```

又名

```
{ MERGEFIELD image:photo \* MERGEFORMAT } 
```

但我的 php 需要看起来像这样：

```
$mailMerge->uploadImage($this->logo_path);
$mailMerge->assign('image:photo', $this->logo_file); 
```

我的完整工作代码如下所示：

```
$mailMerge = new Zend_Service_LiveDocx_MailMerge();
$mailMerge->setUsername($username)
  ->setPassword($password);
$mailMerge->setLocalTemplate($template_path . '/service_template.docx');
$mailMerge->uploadImage($this->logo_path);
$mailMerge->assign('image:photo', 'directory_logo.png');
$mailMerge->createDocument();
$document = $mailMerge->retrieveDocument('docx');
file_put_contents($this->config->livedocx->document . '/' . $this->prefs['serverid'] . '/service_directory.docx', $document);
$mailMerge->deleteImage('directory_logo.png'); 
```

# oracle - Oracle - 每月检查约束的触发器

> ID：13367060
> 
> 赞同：0
> 
> 时间：2012-11-13T19:05:54.067
> 
> 标签：oracle, plsql, triggers

我一直在用各种约束在 oracle 中试验触发功能，最近有人建议我在以下条件下使用物化视图而不是触发，我认为这样做是一个非常明智的选择。但出于学习目的，我想知道触发功能是如何工作的。

创建一个触发器以每月检查指定的约束条件。

桌租

```
|ID|Member|book|
----------------------
1  | John |fairytale|2-jun-12| 
2  | Peter |friction|4-jun-12|  
3  | John |comic|12-jun-12|  
4  | Peter |magazine|20-jun-12|  
5  | Peter |magazine|20-jul-12|  
6  | Peter |magazine|20-jul-12| 
```

限制：会员每月只能借两本书。

@HiltoN 贡献的代码我不太明白：

```
create or replace trigger tr_rent
  before insert on rent
  for each row 
declare
  v_count number;
begin
  select count(id) 
    into v_count
    from rent 
   where member = :new.member;

  if v_count > 2 then 
    raise_application_error (-20001, 'Limit reached'); 
  end if;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:31:59.013

通常，该触发器不起作用。

通常，表 X 上的行级触发器无法查询表 X。因此，在您的情况下，`RENT`通常不允许行级触发器查询表 -`RENT`这样做会引发 mutating trigger 异常。如果您想保证您的应用程序一次只使用一条`INSERT ... VALUES`语句插入 1 行，您将不会遇到变异触发器错误，但这通常不是适当的限制。在多用户环境中也不合适——如果有两个事务几乎同时运行，都向同一个用户签出一本书，这个触发器将潜在地允许两个事务成功。

添加此类检查的适当位置几乎可以肯定是在创建`RENT`记录的存储过程中。该存储过程应该检查会员在当前月份有多少租金，如果超过限制，则会出错。就像是

```
CREATE OR REPLACE PROCEDURE rent_book( p_member IN rent.member%type,
                                       p_book   IN rent.book%type )
AS
  l_max_rentals_per_month constant number := 2;

  type rental_nt is table of rent.rend_id%type;
  l_rentals_this_month             rental_nt;

BEGIN
  SELECT rent_id
    BULK COLLECT INTO l_rentals_this_month
    FROM rent
   WHERE member = p_member
     AND trunc(rental_date,'MM') = trunc(sysdate, 'MM')
     FOR UPDATE;

  IF( l_rentals_this_month.count > l_max_rentals_per_month )
  THEN
    RAISE_APPLICATION_ERROR( -20001, 'Rental limit exceeded' );
  ELSE
    INSERT INTO rent( rent_id, member, book, rental_date )
      VALUES( rent_id_seq.nextval, p_member, p_book, sysdate );
  END IF;
END; 
```

如果您真的想使用触发器强制执行类似的操作，那么解决方案会变得更加复杂。如果你不关心效率，你可以创建一个语句级触发器

```
create or replace trigger tr_rent
  after insert on rent
declare
  v_count number;
begin
  select count(id) 
    into v_count
    from (select member, count(*)
            from rent
           where trunc(rental_date,'MM') = trunc(sysdate,'MM')
           group by member
          having count(*) > 2); 

  if v_count >= 1 then 
    raise_application_error (-20001, 'At least one person has exceeded their rental limit'); 
  end if;
end; 
```

这可行，但它（至少）需要您每次都对每个成员进行验证。当您拥有大量成员时，这是非常低效的。您可以通过大幅增加复杂性来减少工作量。如果你

1.  创建一个包，该包声明一个包全局变量，该变量是`rent.member%type`.
2.  创建一个初始化此集合的 before 语句触发器。
3.  `:new.member`创建一个添加到此集合的行级触发器
4.  创建一个与上述类似的 after 语句触发器，但它有一个附加条件，即`member`在您正在维护的集合中。

这种“三触发器解决方案”给系统增加了大量的复杂性，特别是在适当的解决方案首先不使用触发器的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:40:56.803

我同意贾斯汀的观点，由于多种原因，您的触发器无法正常工作。物化视图或存储过程解决方案可以帮助您实现目标。我建议这个问题的最佳解决方案是一个简单的唯一索引：

`create unique index rent_user_limit on rent (member, trunc(rental_date, 'month'));`

# symfony - Symfony2 - kernel.exception 似乎没有在 prod / no-debug 模式下调用

> ID：13367061
> 
> 赞同：1
> 
> 时间：2012-11-13T19:05:54.807
> 
> 标签：symfony

我在 kernel.exception 上附加了一个观察者来打印自定义错误页面。

在产品中，使用调试模式：没关系。在 prod 中，使用无调试模式：没问题。

我尝试清除缓存（--env=prod --no-debug）、（--env=prod）（并直接删除文件）。没有结果。

就像 kernel.exception 事件被禁用或停止。

在容器缓存文件（appProdProjectContainer.php）中，我看到了我的观察者条目：

```
$instance->addListenerService('kernel.exception', array(0 => 'ui.exception.event_listener', 1 => 'onKernelException'), 0);
[...]
$instance->addListenerService('kernel.exception', array(0 => 'twig.exception_listener', 1 => 'onKernelException'), -128); 
```

也许，这是一个优先问题？（-128 对 0）？我试图改变它：没有结果。

你有想法，方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-17T15:59:01.147

就我而言，我已经升级了旧 symfony2 应用程序的供应商，我的 app/AppKernel.php 有这样的代码 `\Monolog\ErrorHandler::register($logger);`

禁用该行后，我的错误侦听器开始工作。

# c++ - Nodej.s C++ 控制台应用程序

> ID：13367062
> 
> 赞同：1
> 
> 时间：2012-11-13T19:05:56.843
> 
> 标签：c++, node.js, cmd

我有一个连接到服务器并将动态数据写入控制台的 C++ 控制台应用程序 (exe)，我如何使用 node.js 将动态数据实时推送到 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:33:02.723

您可以将 C++ 应用程序作为 Node.js 服务器代码中的子进程启动。我不知道您正在使用什么（如果有的话）框架，但是在 Express.js 之类的框架中，这在您的路由逻辑中很容易做到。

您需要查看`child_process`node 的文档，可以在此处找到[http://nodejs.org/api/child_process.html](http://nodejs.org/api/child_process.html)。

```
var exec = require('child_process').exec
var _process = exec('command to invoke binary');
_process.stdout.on('data',function(data){
    console.log(data);
}); 
```

此代码包含`child_process`模块，然后执行调用 C++ 二进制文件所需的命令。然后，它等待并将此进程打印到标准输出的任何数据记录到控制台。您可以将此代码包含在 HTTP 服务器中，然后将其作为响应数据的一部分发回，而不是打印到控制台。

# date - 从文本中提取日期

> ID：13367066
> 
> 赞同：4
> 
> 时间：2012-11-13T19:06:02.633
> 
> 标签：date, nlp, stanford-nlp

我正在尝试使用斯坦福 NLP 工具从文本中提取日期（ 8/11/2012 ）。

这是[一个链接](http://nlp.stanford.edu:8080/ner/process/)！对于这个工具的演示

你能帮助我如何训练分类器来识别日期（2012 年 8 月 11 日）。

我尝试使用训练数据作为

Woodhouse PERS 2012 年 8 月 18 日日期，O 帅 O

但不适用于相同的测试数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T21:30:21.983

如果这就是您想要完成的全部工作，那么使用 NLP 工具从文本中提取日期似乎有点过头了。您应该考虑其他选项，例如简单的 Java 正则表达式（例如，[此处](https://stackoverflow.com/questions/5270195/extracting-dates-from-text-in-java)）。

如果您正在做一些需要斯坦福 NLP 工具提供更多功能的事情，请查看[SUTime](http://nlp.stanford.edu/software/sutime.shtml)注释器。他们的[演示页面](http://nlp.stanford.edu:8080/sutime/process)将让您了解它的行为方式。确保选中该选项`Read rules from file`，您将看到您的日期被注释。

用法：

```
SUTime annotations are provided automatically with the StanfordCoreNLP pipeline by including the ner annotator. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T19:17:30.317

你当然可以训练基于 CRF 的 NER 来识别日期和时间。您可以通过运行提供的 english.muc.7class.dissim.crf.ser.gz 模型来查看一个示例。请参阅培训 NER 系统[的常见问题解答。](http://nlp.stanford.edu/software/crf-faq.shtml#a)但请注意，我们用于时间/日期识别的主要工具现在是基于正则表达式的：SUTime。您还可以为其他应用程序编写 SUTime 规则。请参阅[SUTime 页面](http://nlp.stanford.edu/software/sutime.shtml)和该页面上指向 TokensRegex 的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T11:07:55.243

在 sutime/english.sutime.txt 第 319 行中，美国标记的模式很少：

```
{ ruleType: "time", pattern: /yyyy-?MM-?dd-?'T'HH(:?mm(:?ss([.,]S{1,3})?)?)?(Z)?/ } 
{ ruleType: "time", pattern: /yyyy-MM-dd/ }  
{ ruleType: "time", pattern: /'T'HH(:?mm(:?ss(.,)?)?)?(Z)?/ } 
// Tokenizer "sometimes adds extra slash  
{ ruleType: "time", pattern: /yyyy\?/MM\?/dd/ }  
{ ruleType: "time", pattern: /MM?\?/dd?\?/(yyyy|yy)/ } 
{ ruleType: "time", pattern: /MM?-dd?-(yyyy|yy)/ } 
{ ruleType: "time", pattern: /HH?:mm(:ss)?/ }
{ ruleType: "time", pattern: /yyyy-MM/ } 
```

只需要添加一些规则类型，就可以得到所需的顺序

# java - 您如何比较上次修改日期和文件上次修改日期？

> ID：13367070
> 
> 赞同：0
> 
> 时间：2012-11-13T19:06:12.067
> 
> 标签：java, date, http-headers, timestamp, last-modified

我正在尝试将 HTTP Last Modified 标头中的日期与请求文件的最后修改日期进行比较。

我在 Firefox 中使用 Tamper Data 插件来添加 Last-Modified 标头来测试它和日期：`"Wed, 09 Apr 2008 23:55:38 GMT"`以及我正在使用的文件`file.lastModified()`。

然后我将 file.lastModified 转换为 Date 对象，然后尝试将请求 Last Modified 日期字符串转换为 Date 但我收到此错误：`java.text.ParseException: Unparseable date: " Wed, 09 Apr 2008 23:55:38 GMT"`

```
Date fileDate = new Date(fileLm);
SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss zzz");
Date requestDate = format.parse(lmRequest);

System.out.println("this is filedate: " + fileDate);
System.out.println("this is requestdate: " + requestDate); 
```

如果有人可以帮助我，那就太好了。我不知道出了什么问题:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:34:05.810

```
SimpleDateFormat format = new SimpleDateFormat(" EEE, dd MMM yyyy HH:mm:ss zzz"); 
```

应该管用。它在这里为我工作。

额外的空间可能与 xml 的格式化方式有关。

# bash - bash 逗号分隔值的反转顺序

> ID：13367071
> 
> 赞同：7
> 
> 时间：2012-11-13T19:06:13.370
> 
> 标签：bash

我有以下元素列表：

```
a, b, c, 1337, d, e 
```

我希望我有：

```
e, d, 1337, c, b, a 
```

我怎样才能在 bash 中实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T19:13:40.570

你可以这样做**`awk`**：

```
#!/bin/bash

awk 'BEGIN{FS=",[ ]*"; OFS=", "}
    {
        for (i=NF; i>0; i--) {
            printf "%s", $i;
            if (i>1) {
                printf "%s", OFS;
            }
        }
        printf "\n"
    }' 
```

**脚本解释**：

*   `FS=",[ ]*";`：*字段分隔符*（输入的分隔符）的正则表达式匹配逗号，后跟零个或多个空格，因此您的输入可以是以下任何一种：
    *   `a, b, c, 1337, d, e`
    *   `a,b,c,1337,d,e`
    *   `a, (many spaces) b, c,1337,d, e`
*   `OFS=", "`：*输出字段分隔符*（输出的分隔符​​）将明确地是一个逗号后跟一个空格（因此输出看起来一致）
*   `for (i=NF; i>0; i--) { ... }`:`NF`表示当前行*的字段数。*这里我们向后迭代，从最后一个字段打印到第一个字段。
*   `if (i>1) { ... }`：仅打印`OFS`如果它不是输出中的最后一个字段
*   `printf "\n"`： 新队。

**示例用法**：

```
$ ./script_name < input_file > output_file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:12:22.417

如果您的输入很简单，并且列数是静态的，那么您总是可以使用硬编码的`awk`解决方案：

```
awk -F, '{ print $6", "$5", "$4", "$3", "$2", "$1 }' 
```

这假设您有 6 列用逗号分隔。如果您有“逗号 + 空格”分隔符，`,`则可以使用.`-F', '`而不是`-F,`.

带有输出的简单示例用法：

```
$ echo "a, b, c, 1337, d, e" | awk -F', ' '{ print $6", "$5", "$4", "$3", "$2", "$1 }'
e, d, 1337, c, b, a 
```

使用文件作为输入：

```
awk -F', ' '{ print $6", "$5", "$4", "$3", "$2", "$1 }' your_file 
```

然后，您可以通过附加将输出从该文件重定向到另一个文件`> reversed_columns`；在这种情况下，“reversed_columns”是新文件的名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T19:14:42.983

这个解决方案不是很优雅，但应该适用于任意数量的字段：

```
sed 's/, /\n/g' | tac | sed ':a;$!{N;ba};s/\n/, /g' 
```

要么通过管道将数据传递给它，要么将文件作为第二个参数提供给 first `sed`（不过，它会将整个文件打印为一个逗号分隔的行）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T19:22:35.630

```
$ awk -F", " '{for (i=NF;i;i--) printf "%s ",$i; print ""}' < datafile
e d 1337 c b a 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T19:21:42.177

使用以下脚本，列表中有多少元素并不重要：

```
IFS=', '; read -a array <<< "a, b, c, 1337, d, e"
let i=${#array[@]}-1; 
while [ $i -ge 0 ]; do 
    echo -n "${array[$i]}, "; 
    let i--; 
done 
```

此外，您可以使用以下 perl one-liner（它会`\n`在第一个元素之后添加一个）

```
echo "a, b, c, 1337, d, e" | perl -ne 'foreach(reverse(split(", ",$_))){print "$_, "}' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-13T19:48:56.087

重击：

```
echo "a, b, c, 1337, d, e" | (
  IFS=", "
  while read line; do
    set -- $line
    for (( i=$#; i > 1; i-- )); do
      printf "%s, " "${!i}"
    done
    echo "$1"
  done
) 
```

我使用括号来创建一个子shell，因此我不会更改当前shell 中的IFS 变量。

# android - 使用动态 TextView 处理应用程序

> ID：13367074
> 
> 赞同：0
> 
> 时间：2012-11-13T19:06:32.770
> 
> 标签：android, textview

我在使用这个 textView 时遇到问题，应用程序意外停止，这是 xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+button/btnAnterior"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="46dp"
    android:text="Anterior" />

<Button
    android:id="@+button/btnProxima"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginRight="45dp"
    android:text="Próxima" />

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/button2"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TextView
    android:id="@+id/tvPiada"
    android:layout_width="match_parent"
    android:layout_height="400dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" />

    </LinearLayout>
</ScrollView> 
```

这是.java：

```
// Buttons
Button btnProxima = (Button) findViewById(R.button.btnProxima);
Button btnAnterior = (Button) findViewById(R.button.btnAnterior);   
int piadaN;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

 // Strings
    final String piada1 = ("Piada1");
    final String piada2 = ("Piada2");

    /*piada2 = ("Piada2");
    String piada3 = new String();
    piada3 = ("Piada3");
    String piada4 = new String();
    piada4 = ("Piada4");*/

    final TextView tvPiada = (TextView) findViewById(R.id.tvPiada);

    // Evento dos botões
    btnProxima.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            piadaN = piadaN + 1;

            switch (piadaN) {
            case 1:
                tvPiada.setText(piada1);
                break;
            case 2:
                tvPiada.setText(piada2);
                break;
            }               
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

这是我运行应用程序时的 logcat

```
11-13 19:00:47.843: E/AndroidRuntime(585): FATAL EXCEPTION: main
11-13 19:00:47.843: E/AndroidRuntime(585): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.piadas/com.example.piadas.MainActivity}: java.lang.NullPointerException
11-13 19:00:47.843: E/AndroidRuntime(585):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1879)
11-13 19:00:47.843: E/AndroidRuntime(585):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
11-13 19:00:47.843: E/AndroidRuntime(585):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
11-13 19:00:47.843: E/AndroidRuntime(585):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
11-13 19:00:47.843: E/AndroidRuntime(585):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-13 19:00:47.843: E/AndroidRuntime(585):  at android.os.Looper.loop(Looper.java:137)
11-13 19:00:47.843: E/AndroidRuntime(585):  at android.app.ActivityThread.main(ActivityThread.java:4340)
11-13 19:00:47.843: E/AndroidRuntime(585):  at java.lang.reflect.Method.invokeNative(Native Method)
11-13 19:00:47.843: E/AndroidRuntime(585):  at java.lang.reflect.Method.invoke(Method.java:511)
11-13 19:00:47.843: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-13 19:00:47.843: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-13 19:00:47.843: E/AndroidRuntime(585):  at dalvik.system.NativeStart.main(Native Method)
11-13 19:00:47.843: E/AndroidRuntime(585): Caused by: java.lang.NullPointerException
11-13 19:00:47.843: E/AndroidRuntime(585):  at android.app.Activity.findViewById(Activity.java:1794)
11-13 19:00:47.843: E/AndroidRuntime(585):  at com.example.piadas.MainActivity.<init>(MainActivity.java:13)
11-13 19:00:47.843: E/AndroidRuntime(585):  at java.lang.Class.newInstanceImpl(Native Method)
11-13 19:00:47.843: E/AndroidRuntime(585):  at java.lang.Class.newInstance(Class.java:1319)
11-13 19:00:47.843: E/AndroidRuntime(585):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
11-13 19:00:47.843: E/AndroidRuntime(585):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
11-13 19:00:47.843: E/AndroidRuntime(585):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:20:43.117

在我看来，您收到此错误是因为您试图在声明布局之前声明按钮。将按钮声明移动到您的`onCreate()`方法内部，并将它们放在您的`setContentView(R.layout.main)`

所以你需要`Button btnProxima = (Button)findViewById(R.button.btnProxima);`在使用你的`setContentView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:21:48.347

如果没有上下文或活动布局，则无法使用，请在after`findViewById()`中调用此方法：`onCreate()``setContentView()`

```
// Buttons
Button btnProxima;
Button btnAnterior;   
int piadaN;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btnProxima = (Button) findViewById(R.button.btnProxima);
    btnAnterior = (Button) findViewById(R.button.btnAnterior); 
```

# android - 逆向工程 Android 应用程序（附源码）

> ID：13367075
> 
> 赞同：3
> 
> 时间：2012-11-13T19:06:33.653
> 
> 标签：android, view, adapter, reverse-engineering

查看现有的 Android 应用程序，我有完整的源代码，我想知道如何确定哪个适配器处理来自正在运行的应用程序中特定*屏幕的 UI 的事件。*

有许多布局 (XML) 文件和大量（数量极少）的适配器。到目前为止，猜测、grepping 和设置调试点并没有让我找到有问题的适配器。（坦率地说，我不确定我什至可以为我正在尝试处理的*屏幕找到正确的布局文件！）*

我非常熟悉 Web 开发和 PHP，并且给定了一个应用程序，有很多方法可以找到进入“控制器”代码的方法。也非常了解Java，并且到目前为止一直在为应用程序制作mod，但现在卡住了......有人可以给我一些关于逆向工程Android应用程序的指针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:16:51.010

上次我这样做是一年前，当时 Android 安全性很差（而且不是很多 proguard），所以我使用了 eclipse 反编译器和 dex2jar。其实我很惊讶 - 你怎么能得到完整的代码？

使用 eclipse 的好处是您可以回溯调用者的功能。

问题是 - 我不认为你是在适配器之后。如果屏幕是一个列表，那么您实际上是在`ListView`（包含适配器）之后。也许适配器甚至可能包含对列表视图本身的引用。所以，尝试找到视图而不是适配器

如果它是一个listView，那么实际上，寻找一个名为“xxxx_row.xml”的东西，里面有“row”这个词，因为这是listview视图的标准约定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T22:16:18.533

这适用于大多数 Android 应用程序。

通常，每个屏幕都是由 Activity 类的一个实例构建的。

*   检查项目根目录中的 AndroidManifest.xml。查找包含如下意图过滤器的活动声明：

    ```
     <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>

    </activity> 
    ```

这是应用程序的“入口”点，不是严格意义上的，但足够接近此任务。事实上，Android 会创建 Application 类的内部单例实例，该实例可以扩展但通常不会扩展。Grep 用于“扩展应用程序”或“：应用程序”以了解。

*   找到与活动名称同名的类文件，本例中`SampleAppMainActivity.`

*   打开这个类文件，找到 onCreate()。这是实例化 Activity 时 Android 调用的第一个方法。

*   找到 setContentView()。它将引用一个布局，可以在 res/layout 或其中的子文件夹中找到，就像这样。R.layout.sampleappmainlayout。文件本身将是 XML。此文件定义活动屏幕中使用的 UI 元素（它可能包含合并其他布局）。

*   如果有多个活动，则在此活动中寻找创建`Intent`类的实例，通常附加到按钮或菜单单击侦听器。

从第2步递归:)

其他答案涉及适配器的细节。或者也许不是？Android 使用适配器来处理数据的检索并将这些数据绑定到 UI 元素。它们不“响应 UI 事件”。您是否在询问 MVC 模型中的视图控制器？

祝你好运。

PS 无论你的客户付给你什么，这还不够。我可以猜到你是如何获得这个演出的，但是你好。只是哟。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T19:49:57.217

操作系统 Windows 的说明：

1.  **下载 dex2jar-0.0.7.10-SNAPSHOT.zip**（版本可以不同）并解压到文件夹 D:\Decompile。
2.  **下载Java Decompiler**即JD **-GUI**并解压到同一个文件夹。
3.  **下载 apktool1.4.1.tar.bz2**和apktool **-install-windows-r04-brut1.tar.bz2**并解压到系统文件夹，即 C:\Windows。
4.  例如我们的应用程序名为 Calculator.apk，将其移动到带有**Java Decompiler**和**dex2jar的文件夹**
5.  打开命令行工具 C:\Windows\System32\cmd.exe
6.  **将目录改成dex2jar**所在的文件夹，输入命令`dex2jar Calculator.apk`，如果都成功的话在同一个文件夹中出现文件**Calculator.apk.dex2jar.jar**
7.  `jd-gui`从上一步打开并打开文件。
8.  选择`File-Save All Sources`并保存文件。
9.  提取生成的 zip 存档。
10.  将生成的文件夹放入文件夹 src（必须预先创建）。（绕过这个结构是D:\Decompile\Calculator\src\com\android）。
11.  再次，在命令行输入命令`apktool d Calculator.apk Calculator`，其中Calculator.apk-包名，Calculator-文件夹进行反编译。
12.  如果一切顺利，那么文件夹中将有两种格式的源文件（java 和 smali），资源和文件 AndroidManifest.xml、apktool.yml。

# c++ - 如何在 C++ 中随机分配给向量？

> ID：13367079
> 
> 赞同：13
> 
> 时间：2012-11-13T19:06:44.780
> 
> 标签：c++, arrays, vector

我是 C++ 新手，并且不断被告知要使用`std::vector`而不是`new[]`.

我正在尝试实现此功能，其中我知道向量的大小并希望随机分配给它（而不是按顺序分配）。

但是，当运行它时，我的程序终止并且没有错误输出，所以我很难过。

```
vector<string> v1;
v1.resize(2);
v1.insert(v1.begin() + 1, "world");
v1.insert(v1.begin() + 0, "world");

cout << v1.at(1) << endl; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T19:08:46.320

不要放弃，这比那更容易

```
vector<string> v1(2);
v1[1] = "world";
v1[0] = "world";

cout << v1[1] << endl; 
```

`vector::insert`用于当您想将项目添加到向量时，而不是当您想替换已经存在的项目时，`vector::insert`换句话说，会更改向量的大小。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-13T19:10:54.150

首先，您调整它的大小以具有两个空字符串：

```
{"", ""} 
```

然后在`"world"`之前`begin() + 1`或第二个元素之前插入：

```
{"", "world", ""} 
```

然后在`"world"`之前`begin()`或第一个元素之前插入：

```
{"world", "", "world, ""} 
```

然后您访问第二个元素`v1.at(1)`并获取空字符串。

据推测，您不希望[`std::vector::insert`](http://en.cppreference.com/w/cpp/container/vector/insert)which 在现有元素之间插入新元素。您想像使用数组一样执行此操作，使用[`operator[]`](http://en.cppreference.com/w/cpp/container/vector/operator_at)：

```
vector<string> v1(2);
v1[1] = "world";
v1[0] = "world";
cout << v1.at(1) << endl; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-13T19:15:44.320

随机**分配**

只需使用索引（显然，验证它是 < `size`）

```
v1[index] = value; 
```

随机**插入**（验证索引 < `size`）

```
v1.insert(v1.begin() + index, value); 
```

**在末尾/追加**顺序插入（不需要索引，您的值将插入到向量的末尾）

```
v1.push_back(value); 
```

如果您计划插入许多值，请考虑调用`reserve()`您的向量，以便分配足够的内存来存储所有项目，否则当您插入数据时，随着向量的增长，您最终可能会进行许多重新分配

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-13T19:20:44.647

您的程序运行正常。您的错误在于代码的逻辑。

Insert 不会更改存储在索引 1 处的字符串。它将字符串放在位置 1，并将 1 之后的所有索引向右移动。

```
开始第一个插入 第二个插入
("","") -> ("", "world, "") -> ("world","","world","")

```

因此，当您打印 v1.at(1) 时，您正在打印一个空字符串。

要解决此问题，您需要使用：

```
v1.at(1)="world"
v1.at(0)="world" 
```

- 或者 -

```
v1[1] ="world"
v1[0] ="world" 
```

这两种解决方案是等效的，但是第二种解决方案不会进行任何边界检查。如果存在越界错误，第一个将引发错误。只要您可以保证您永远不会索引越界，这无关紧要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-14T02:24:14.663

就像许多人所说的那样，您可以只使用`operator[]`重新分配旧值，因为您已经调整了向量的大小或用其他值填充了它。如果你的数组总是有一个固定的大小，你可以使用`std::array`，这应该会提供性能提升，但会牺牲调整数组大小或在运行时确定其大小的能力。

```
std::array<std::string,2> a1;
a1[0] = "world";
a1[1] = "world2";
std::cout<<a1.at(1)<<std::endl; //outputs world2 
```

请注意，大小必须是静态的，因此您不能执行以下操作：

```
int numStrings;
std::cin>>numStrings;
std::array<std::string,numStrings> a2; //ERROR 
```

`std::array`不幸的是，除了使用初始化列表之外，我认为没有任何方法可以在没有默认构造函数的情况下进行初始化。

```
struct T
{
   T(std::string s):str(s){} //no default constructor
   std::string str;
}
std::array<T,2> a3 = {T(""), ""}; //you can use a conversion constructor implicitly 
```

显然，如果您想要一个包含大量对象的数组，这是不切实际的。

# ipad - 某些元素而不是其他元素的 iPad 视口问题

> ID：13367082
> 
> 赞同：0
> 
> 时间：2012-11-13T19:06:49.610
> 
> 标签：ipad, viewport

我有一个网站 (ils-main.attorneysonlinepreview.com)，可以针对除菜单栏以外的所有内容进行适当缩放。这是一个固定宽度的网站，我已经适当地设置了视口元标记。出于某种原因，菜单项是按比例放大而不是缩小，因此它们会包裹而不是按照应有的方式调整。

以前有人见过这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:42:14.670

这个问题只在 iPad 上，而不是在“真正的”电脑上。iPad 上的 Chrome 也存在缩放问题。菜单应该有 5 个项目，但最后两个包裹，因为它是白色背景上的白色字体，你可能没有注意到它。

# javascript - 如何在ajax回调函数中调用方法？

> ID：13367086
> 
> 赞同：0
> 
> 时间：2012-11-13T19:07:09.310
> 
> 标签：javascript, ajax

我试图在回调函数中调用一个方法。

```
jsTest.prototype.getTitle = function() {
   thisJS=this

   //the console will returns my object...so it's not undefined.
   console.log(thisJS);

   //codes.....

   //ajax callback function
    ajaxcall.callback=function(data){

        //call the addName method
        thisJS.addName(data, 1);

    };

}

jsTest.prototype.addName=function(data, bool){
    console.log(data);
} 
```

我有一个错误说

```
Uncaught TypeError: Cannot call method 'addName' of undefined 
```

有没有办法解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:12:12.510

尝试改变

```
thisJS=this 
```

对此：

```
var thisJS=this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:12:43.473

要调用 addName 方法，您必须像在 OOP 中那样引用该类。

如果您没有创建 jsTest 对象，则不能使用 addName

```
var item = new jsTest();
item.addName(data, 1); 
```

# php - 当用户离开“购物车”页面时，如何在不使用数据库的情况下保持购物车的填充状态

> ID：13367090
> 
> 赞同：1
> 
> 时间：2012-11-13T19:07:45.533
> 
> 标签：php, session, shopping-cart

我正在用 php 构建一个购物车，并且我拥有所有能够传递到购物车页面的物品。但是，如果用户要离开页面，所有项目都会消失。我知道我可以使用它来开始会话，但是如何在不使用数据库的情况下将数据保存在会话中？

我应该学习 HTML5 会话存储吗？

* * *

谢谢，埃里克。我同意，'如果它没有坏，那么不要尝试修复它'......那么，我究竟如何将数据读/写到 $_SESSION 数组。我已经阅读了 php 手册页，但仍然不知所措……我的数据没有传输。这是我的代码：

```
 <?php session_start();
$mytext = $_SESSION['mytext']; 
    $mytext1 = $_SESSION['mytext1']; 
    $mytext2 = $_SESSION['mytext2']; 
    $mytext3 = $_SESSION['mytext3'];

$price = $_SESSION['price']; 
    $price1 = $_SESSION['price1']; 
    $price2 = $_SESSION['price2']; 
    $price3 = $_SESSION['price3']; 

    $total = $mytext * $price;     
    $total1 = $mytext1 * $price1; 
    $total2 = $mytext2 * $price2; 
    $total3 = $mytext3 * $price3; 
```

?>'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:17:10.837

默认情况下，PHP $_SESSION 变量不使用适当的数据库，或者需要您安装除 PHP 之外的任何东西。它只会将每个用户的会话数据存储在您服务器上的文件中。

调用后，您可以像任何其他数组一样[`session_start()`](http://php.net/manual/en/function.session-start.php)简单地将数据读/写到数组中。`$_SESSION`查看[`session_start()`页面](http://php.net/manual/en/function.session-start.php)以获取示例。

不，我不会在 HTML 5 中这样做。PHP 会话多年来一直运行良好，不会有任何浏览器兼容性问题。

**编辑**

你是先写数组吗？如果你没有把物品放进去，你就什么也拿不出来。您会注意到，在链接页面的示例中，有两个页面在运行。第一页分配**给**会话数组。在您的代码中，您只尝试从会话数组中取出内容。在您向其中添加项目之前，您不会从中得到任何东西。

# sql - oracle udump trc 文件大小问题

> ID：13367098
> 
> 赞同：0
> 
> 时间：2012-11-13T19:08:24.003
> 
> 标签：sql, oracle, logging, jvm

我的项目使用托管在 unix 机器上的 oracle db。问题是在 udump 位置生成的跟踪文件也有来自我的自定义代码的记录器。（自定义代码记录器来自 java 标注，它们是 db 上的 loadjava）。现在，每次我使用该模块时，udump 文件夹都会被 3 个新的 trc 文件淹没，这些文件具有默认的 oracle 日志以及我的自定义代码日志。我想禁用从我的代码生成的日志。直到现在我已经尝试编写一个自定义 log4j.properties 并加载它 n 将它用于我的代码，在那个 prop 文件中，我使用了指向 unix 机器上的自定义位置而不是 udump 位置的文件和控制台处理程序。但是自定义日志仍然只出现在 udump 位置，并且我从 prop 文件中尝试过的新位置没有日志。我尝试在日志记录中禁用 logging.trace=false。oracle jvm 的属性文件。我检查了一些可以禁用会话跟踪的 sql 查询。它确定了大约 70 个会话。我只想禁用 java 日志，我想知道是否可以找到我的 java 日志使用的会话并禁用它的跟踪。

我正在使用 oracle 9i 版本和 java 1.4 版本。需要禁用自定义日志进入 udump 位置。此外，该解决方案通常应该是可实施的，因为我的应用程序可以使用多个环境，例如测试环境、阶段环境、产品环境。任何提示都会非常有帮助。

# php - strtotime PHP 日期数值 + 1 周

> ID：13367103
> 
> 赞同：0
> 
> 时间：2012-11-13T19:08:42.200
> 
> 标签：php, strtotime

我有一个从 1 到 7 的日期值，其中 1 是星期一，7 是星期日。

我需要获得下周适当日期的 strtotime 值。

例如：今天是 11 月 13 日星期二。

我的日期值是“2”，所以 strtotime 应该返回 11 月 20 日星期二的适当值。我的日期值为“1”，因此 strtotime 应返回 11 月 19 日星期一的适当值。我的日期值为“5”，因此 strtotime 应返回 11 月 23 日星期五的适当值。

我希望这可以通过几个内置的 PHP 函数 (strtotime(+1week+something)) 来完成？如果不是，我将尝试编写一些比较检查！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:31:50.317

```
function dayNextWeek($num) {
  return date('Y-m-d', strtotime("+1 week +" . ($num - date('w'))  . "days"));
} 
```

并测试：

```
foreach (range(1, 7) as $i) {
  echo $i . ' ' . dayNextWeek($i) . "\n";
} 
```

**输出**

```
1 2012-11-19
2 2012-11-20
3 2012-11-21
4 2012-11-22
5 2012-11-23
6 2012-11-24
7 2012-11-25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:19:54.483

未经广泛测试：

```
$givenDayNumber = 1;             // Your value here
$date = new DateTime();          // Today (reference point)
$currentDayOfWeek = date('N');   // This is 1 = Monday, see php date manual for more options
$diff = $givenDayNumber- $currentDayOfWeek; // Difference between given number and todays number
$date->modify('+ '.$diff.' day'); // Subtract difference
$date->modify('+ 1 week');        // Add a week
echo $date->format('d/m/Y');      // Output 
```

在这里摆弄键盘：[http ://codepad.org/7SylbJOX](http://codepad.org/7SylbJOX)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:23:43.653

```
function getNext($dow)
{
    $now = intval(date('N'));

    $toAdd = $dow - $now;
    if($toAdd<=0)
    {
        $toAdd += 7;
    }

    return date('r', strtotime('+'.$toAdd.'day'));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T19:27:00.317

希望这对您有用。

```
<?php
$array = array('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday');
$your_value = 2;
$str = 'next ' . $array[$your_value -1];
echo date('D d M Y', strtotime($str));

?> 
```

[http://codepad.org/OIrzRxpl](http://codepad.org/OIrzRxpl)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T19:27:36.670

尝试：

```
 $day_nxt_week = date('N', strtotime(date('Ymd') . '+1 week'));
 print_r($day_nxt_week); 
```

[演示](http://codepad.org/tWSsT4aD)

# python - 在 Linux 上开始新安装的 web2py 时出现异常

> ID：13367104
> 
> 赞同：1
> 
> 时间：2012-11-13T19:08:43.953
> 
> 标签：python, linux, web2py, redhat

在 Linux Redhat 64bit (Python 2.7.3) 上解压 web2py 最新源代码后，我启动服务器，第一次调用会生成这个堆栈跟踪：

```
test@test:~/web2py> python web2py.py --ip xxx.xxx.xxx.xxx
web2py Web Framework
Created by Massimo Di Pierro, Copyright 2007-2012
Version 2.2.1 (2012-10-21 16:57:04) stable
Database drivers available: MySQL(pymysql), PostgreSQL(pg8000), IMAP(imaplib)
WARNING:web2py:GUI not available because Tk library is not installed

choose a password:
please visit:
        http://xxx.xxx.xxx.xxx:8000
use "kill -SIGTERM 4341" to shutdown the web2py server
DEBUG: connect attempt 0, connection error:
Traceback (most recent call last):
  File "/home/aomoper/web2py/gluon/dal.py", line 6755, in __init__
    self._adapter = ADAPTERS[self._dbname](**kwargs)
  File "/home/aomoper/web2py/gluon/dal.py", line 2079, in __init__
    if do_connect: self.find_driver(adapter_args)
  File "/home/aomoper/web2py/gluon/dal.py", line 695, in find_driver
    raise RuntimeError, "no driver available %s" % self.drivers
TypeError: not all arguments converted during string formatting
DEBUG: connect attempt 1, connection error:
Traceback (most recent call last):
  File "/home/aomoper/web2py/gluon/dal.py", line 6755, in __init__
    self._adapter = ADAPTERS[self._dbname](**kwargs)
  File "/home/aomoper/web2py/gluon/dal.py", line 2079, in __init__
    if do_connect: self.find_driver(adapter_args)
  File "/home/aomoper/web2py/gluon/dal.py", line 695, in find_driver
    raise RuntimeError, "no driver available %s" % self.drivers
TypeError: not all arguments converted during string formatting
DEBUG: connect attempt 2, connection error:
Traceback (most recent call last):
  File "/home/aomoper/web2py/gluon/dal.py", line 6755, in __init__
    self._adapter = ADAPTERS[self._dbname](**kwargs)
  File "/home/aomoper/web2py/gluon/dal.py", line 2079, in __init__
    if do_connect: self.find_driver(adapter_args)
  File "/home/aomoper/web2py/gluon/dal.py", line 695, in find_driver
    raise RuntimeError, "no driver available %s" % self.drivers
TypeError: not all arguments converted during string formatting
DEBUG: connect attempt 3, connection error:
Traceback (most recent call last):
  File "/home/aomoper/web2py/gluon/dal.py", line 6755, in __init__
    self._adapter = ADAPTERS[self._dbname](**kwargs)
  File "/home/aomoper/web2py/gluon/dal.py", line 2079, in __init__
    if do_connect: self.find_driver(adapter_args)
  File "/home/aomoper/web2py/gluon/dal.py", line 695, in find_driver
    raise RuntimeError, "no driver available %s" % self.drivers
TypeError: not all arguments converted during string formatting
DEBUG: connect attempt 4, connection error:
Traceback (most recent call last):
  File "/home/aomoper/web2py/gluon/dal.py", line 6755, in __init__
    self._adapter = ADAPTERS[self._dbname](**kwargs)
  File "/home/aomoper/web2py/gluon/dal.py", line 2079, in __init__
    if do_connect: self.find_driver(adapter_args)
  File "/home/aomoper/web2py/gluon/dal.py", line 695, in find_driver
    raise RuntimeError, "no driver available %s" % self.drivers
TypeError: not all arguments converted during string formatting

Anyone can help please?
Thanks 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:44:05.557

此问题与 Python 安装中缺少 sqlite3 有关。

使用该库重新编译 Python 解决了这个问题。

# oauth - oAuth manage_pages 范围已请求，但缺少管理您的页面权限请求

> ID：13367114
> 
> 赞同：4
> 
> 时间：2012-11-13T19:09:11.173
> 
> 标签：oauth, permissions, facebook-page

我有工作代码请求用户在 oAuth 过程中向我的应用授予 manage_pages 权限。这段代码已经使用了好几个月并且没有改变。当我测试这些步骤时，在“Your App Name Here”想请求权限：弹出窗口中，我清楚地看到“Manage your Pages”权限请求。

我有一个客户遵循与我完全相同的步骤（我发送了一个带有屏幕截图的文档并做了一个 WebEx 观看），当她到达请求特定权限的页面时，“管理您的页面”权限未列出.

有谁知道为什么一个 Facebook 帐户而不是另一个帐户会缺少该权限？

# android - XHDPI 图像是否适用于 Android 中的视网膜显示器？

> ID：13367116
> 
> 赞同：0
> 
> 时间：2012-11-13T19:09:18.503
> 
> 标签：android

我们应该在 Android 中使用 XHDPI 图像进行视网膜显示吗？如果没有，我应该在哪里放置三星 Galaxy S3 的图像/资产。

**更新：**
我发现了一篇有用的文章：
[具有像素密度桶的 Android 设备列表](http://blog.blundell-apps.com/list-of-android-devices-with-pixel-density-buckets/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:26:31.080

三星 Galaxy S3 的密度约为每英寸 309 像素。来自有关支持多种屏幕密度的[Android 文档：](http://developer.android.com/guide/practices/screens_support.html)

> xhdpi：超高密度 (xhdpi) 屏幕 (~320dpi) 的资源

我认为我们可以得出结论，S3 的资产应该放在**xhdpi**文件夹中。

# objective-c - 为什么我的 CCParticleSystem 没有显示 Cocos2d？

> ID：13367118
> 
> 赞同：0
> 
> 时间：2012-11-13T19:09:24.443
> 
> 标签：objective-c, ios, animation, cocos2d-iphone

这可能与粒子系统无关，而与分层有关，但是......我有以下粒子系统代码：

```
CCParticleExplosion *explosion = [[CCParticleExplosion alloc] init];
explosion.texture = [[CCTextureCache sharedTextureCache] addImage:@"blah.png"];
explosion.position = ccp(100,100);
[explosion setAutoRemoveOnFinish:YES];
[explosion setTotalParticles:10];
[self addChild:explosion];
[explosion autorelease]; 
```

如果我将该代码像“HelloWorld”场景一样粘贴，它会呈现良好。但是，如果我将代码放在 CCLayer 下，然后将该 CCLayer 添加到“HelloWorld”场景中，则粒子不会出现。这是为什么？（我看到 CCLayer 就好了）

唯一明显的区别是在我的“HelloWorld”场景中，我有一个“world”对象。我什至尝试添加到`[self scheduleUpdate]`我的 CCLayer 中。

在我的 CCLayer 中，我也有一个空白更新。我应该在这里做点什么吗？

```
-(void) update:(ccTime)delta{

} 
```

任何帮助，包括良好的一般做法（尤其是内存管理）将不胜感激。（刚开始 cocos/iOS 开发）谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:07:24.310

检查：

*   质地不是零
*   纹理不太大（最大 512x512）
*   纹理具有二维的力量（4、8、16、32 等）
*   持续时间为正（否则它会自动移除效果）
*   self.visible == 是
*   (self.position + explode.position) == 屏幕上的某处（爆炸的位置被添加到自身的位置，因为它的位置是相对于其父级的）

# inno-setup - 如何更改 InnoSetup 中的页面顺序？

> ID：13367119
> 
> 赞同：4
> 
> 时间：2012-11-13T19:09:32.107
> 
> 标签：inno-setup, pascal, swap

我想在我的设置中将 SelectDir 页面与 Components 页面交换。

我找到了一个解决方案，将其他页面的内容分配给当前页面。

```
Procedure CurPageChanged(CurPageID: Integer);
Begin
  Case CurPageID of
  wpSelectDir:
    begin
      WizardForm.SelectDirPage.Notebook.ActivePage:= WizardForm.SelectComponentsPage;
      WizardForm.PageNameLabel.Caption:= SetupMessage(msgWizardSelectComponents)
      WizardForm.Hint:= WizardForm.PageDescriptionLabel.Caption;
      WizardForm.PageDescriptionLabel.Caption:= SetupMessage(msgSelectComponentsDesc)
    end;
  wpSelectComponents:
    begin
      WizardForm.SelectComponentsPage.Notebook.ActivePage:= WizardForm.SelectDirPage;
      WizardForm.DiskSpaceLabel.Caption:= WzardForm.ComponentsDiskSpaceLabel.Caption;
      WizardForm.PageNameLabel.Caption:= SetupMessage(msgWizardSelectDir)
      WizardForm.PageDescriptionLabel.Caption:= WizardForm.Hint
    end;
  end;
End; 
```

使用这种方法的问题是只有内容而不是实际页面被改变。消息框和错误消息不受影响。我写了很多行代码来解决这些问题，但我遇到了越来越多的问题......

有更好的解决方案吗？我希望你能帮帮我！

编辑：经过一番试验后，我想出了这个：

```
procedure RedesignWizard;
var
  Page: TWizardPage;
begin
  Page := CreateCustomPage(wpWelcome, 'bla', 'bla');
  WizardForm.ComponentsList.Parent := Page.Surface;
  //Here  I am changing the layout of the pages...
end;

procedure InitializeWizard;
begin
  RedesignWizard;
end;

procedure CurPageChanged(CurPageID: Integer);
begin
  if (CurPageID = Page.ID) then
  begin
  //perform your actions specific to the Custom page here.
  end;
end; 
```

这样组件列表出现在 SelctDirPage 之前，我对这些消息框没有任何问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T20:13:37.277

绝对没有办法安全地交换任何内置页面的顺序。（通常，人们唯一会问的问题是当他们试图复制不同安装系统的流程时。放松并放手；Inno 的工作方式不同，拥抱它而不是对抗它。）

话虽如此，可以通过将其中一个或另一个重新创建为自定义页面来呈现交换页面的外观。但是，这样做您将丧失与该页面相关的所有内置功能 - 例如。如果替换组件页面，则不能使用 [Components] 部分或参数，如果替换目录页面，则不能使用 {app}（即使在隐式使用它的那些地方，例如 UninstallFilesDir）。

如果你愿意投入大量的时间和精力（尤其是测试），是可以做到的。但结果一切都变得更糟了——所以通常你最好不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-21T22:10:51.670

添加到米拉尔所说的：

```
[Setup]
DisableDirPage=yes // disable the built-in page

[Code]
var
  ApacheDirPage: TInputDirWizardPage;
  ApacheDir: AnsiString;

procedure InitializeWizard;
begin
  { Create the custom wizard pages }
    ApacheDirPage := 
       CreateInputDirPage( wpSelectComponents,  // display AFTER select Type/Components page
                           'Select Apache Directory', 
                           'Select the Apache x.x Directory' + #13#10 + '(the one that contains the BIN folder)',
                           'Select the Apache directory, then click Next.',
                           False, '' );
   ApacheDirPage.Add( '');           
   ApacheDirPage.Values[0] := csApacheLocation;
end; 
```

# c++ - CFX_ImageCR3 | 无法在运行 ColdFusion 10 64 位的 Windows Server 2008 R2 64 位上加载库

> ID：13367121
> 
> 赞同：1
> 
> 时间：2012-11-13T19:09:33.587
> 
> 标签：c++, dll, coldfusion, 64-bit, windows-server-2008

我们正在尝试将旧的 Web 服务器迁移到新的 Web 服务器。我们正在尝试在运行 ColdFusion 10 64 位的 Windows Server 2008 R2 64 位服务器上安装 Effalre 的 CFX_ImageCR3 标签。

我们已经从 Efflare 的网站安装了最新的设置文件，并按照文档描述在 ColdFusion 管理员中注册了 CFX C++ 标签，但是当使用 CFX_ImageCR3 标签的代码执行时，它显示“无法加载库”。

在谷歌搜索后，有人建议我们运行 Dependency Walker 来查看缺少哪些 DLL。在新服务器上，它显示以下“未找到延迟加载依赖模块” - GPSVC.DLL - IESHIMS.DLL - MF.DLL - MFPLAT.DLL - MFREADWRITE.DLL - WLANAPI.DLL

为了比较，我在 CFX 标签工作的旧服务器上运行了相同的程序。它报告 GPSVC.DLL 和 IESHIMS.DLL 无法加载，但其他的可以。

两台服务器都运行相同的操作系统，唯一的区别是 Cold Fusion 10。我是否可能只是在新服务器上丢失了一些 DLL？会不会是与 ColdFusion 10 64-Bit 不兼容？您可以在 64 位安装的 CF 上加载 32 位 DLL CFX C++ 标签吗？

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:40:20.640

找到解决方案。看来 C++ CFX 税是 32 位的，并且与 ColdFusion 64 位版本兼容。Effalre 目前在其 VIP 下载站点上有一个 beta 安装程序，cfx_imagecr_3_service_beta_081030.exe，它是 Java 标记。

一开始这有点棘手，但是一旦你安装了测试版，请确保你遵循以下步骤：

1.  将 beta 安装程序安装到 C:\efflare\（不要安装到 C:\Program Files (x86)！）
2.  启动 Windows 服务“Efflare ImageCR 3 服务”
3.  打开 CF 管理器，然后转到 Java 和 JVM，在 ColdFusion 类路径中添加：{appplicatino.home}/wwwroot/WEB-INF/lib,C:/Efflare/imagecr3.jar
4.  重新启动 ColdFusion

注意：默认 ColdFusion 10 安装的类路径。第一个路径必须指向您拥有 cfx.jar 文件的目录。如果您收到错误 -java.lang.NoClassDefFoundError Exception com/allaire/cfx/CustomTag 这是因为类路径未指向 cfx.jar 文件所在的位置。

# scala - Scala 的中缀符号与对象 +，为什么不可能？

> ID：13367122
> 
> 赞同：10
> 
> 时间：2012-11-13T19:09:36.583
> 
> 标签：scala

我可以这样命名对象，但不能调用`m`：

```
object + {
  def m (s: String) = println(s)
} 
```

不能打电话`+.m("hi")`：

```
<console>:1: error: illegal start of simple expression
       +.m("hi") 
```

也无法调用`+ m "hi"`（首选 DSL 使用）。

但`object ++`它工作正常！它们是否与（不存在的）`unary_+`方法冲突？有可能避免这种情况吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T19:16:31.977

实际上，一元运算符是不可能的。如果您仍然想调用它，您可以使用编译器为 JVM 生成的名称（以美元开头）：

```
scala> object + {
     | def m( s: String ) = println(s)
     | }
defined module $plus

scala> +.m("hello")
<console>:1: error: illegal start of simple expression
       +.m("hello")
        ^

scala> $plus.m("hello")
hello 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T19:25:35.707

我认为问题在于，为了不产生歧义地处理一元运算符，scala 依赖于一种特殊情况：只有`!`, `+`,`-`和`~`被视为一元运算符。因此，在 中`+.m("hi")`，scala 将`+`其视为一元运算符，无法理解整个表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T05:10:31.527

另一个使用包的代码：

```
object Operator extends App {
    // http://stackoverflow.com/questions/13367122/scalas-infix-notation-with-object-why-not-possible
    pkg1.Sample.f
    pkg2.Sample.f
}

package pkg1 {
    object + {
        def m (s: String) = println(s)
    }

    object Sample {
        def f = {
            // +.m("hi") => compile error: illegal start of simple expression
            // + m "hi" => compile error: expected but string literal found.
            $plus.m("hi pkg1")
            $plus m "hi pkg1"
        }
    }
}

package pkg2 {
    object + {
        def m (s: String) = println(s)
    }

    object Sample {
        def f = {
            pkg2.+.m("hi pkg2")
            pkg2.+ m "hi pkg2"
            pkg2.$plus.m("hi pkg2")
            pkg2.$plus m "hi pkg2"
        }
    }
} 
```

java版本“1.7.0_09”

Scala 代码运行器版本 2.9.2

# iphone - iOS / iPhone 日记 / 文件系统缓存

> ID：13367124
> 
> 赞同：1
> 
> 时间：2012-11-13T19:09:47.150
> 
> 标签：iphone, ios, unix, filesystems, journaling

从本地设备测试中，我看到将文件写入 iOS 文件系统（无论您使用的调用级别如何）通常会在文件完全提交到闪存之前返回成功。这意味着，如果您硬重置设备然后重新启动，您的文件可能会回滚（如果写入完成或是原子的）或损坏。这种延迟的原因是什么（感谢文档，我找不到任何东西），有没有办法在实际文件系统写入完成时获得反馈。例如，我想确认从远程服务器接收并存储了一条数据，但我发现在写入“报告”成功后确认它可能会在发生硬崩溃或电源故障时导致数据丢失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-17T13:15:42.123

由于这是一个 4 年前的问题，我不仅会提供答案，还会提供我在寻找它时所走的路。

我在官方文档中找不到任何明确的解释：[文件系统编程指南](https://developer.apple.com/library/content/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/)。[性能提示部分](https://developer.apple.com/library/content/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/PerformanceTips/PerformanceTips.html#//apple_ref/doc/uid/TP40010672-CH7-99732-CJBDHHBG)只有一条线索。它指出：

> 应用程序可以调用带有 F_NOCACHE 标志的 BSD fcntl 函数来启用或禁用文件的缓存。有关此函数的更多信息，请参阅 fcntl。

启用该`F_NOCACHE`标志并不能解决您所说的问题，但是，`fcntl`方法手册指出有一个您可能会觉得有趣的选项：

> F_FULLFSYNC 与 fsync(2) 执行相同的操作，然后要求驱动器将所有缓冲数据刷新到永久存储设备

（从`man fcntl`，见[这里](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man2/fcntl.2.html)）。

我已经检查了手册以`fsync`获取更多详细信息。最终，它给了我对问题和解决方案的最清晰和最容易理解的解释：

> 请注意，虽然 fsync() 会将所有数据从主机刷新到驱动器（即“永久存储设备”），但驱动器本身可能在相当长的一段时间内不会将数据物理写入盘片，并且可能会被写入输出序序列。
> 
> 具体来说，如果驱动器断电或操作系统崩溃，应用程序可能会发现只有部分数据或没有数据被写入。磁盘驱动器还可以重新排序数据，以便以后的写入可能存在，而较早的写入不存在。
> 
> 这不是理论上的边缘情况。这种情况很容易在现实世界的工作负载和驱动器电源故障中重现。
> 
> 对于需要更严格保证数据完整性的应用程序，Mac OS X 提供了 F_FULLFSYNC fcntl。F_FULLFSYNC fcntl 要求驱动器将所有缓冲数据刷新到永久存储。需要严格的写入顺序的应用程序（例如数据库）应使用 F_FULLFSYNC 以确保其数据按预期顺序写入。

（从`man fsync`，见[这里](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man2/fsync.2.html)）。

是的，这绝对不是理论上的边缘案例。值得庆幸的是，一旦您知道问题所在，解决方案就很简单了：

```
let filePath: String = "your file path"

// you can use other option than read-write
let fd = open(String(path.utf8), O_RDWR)

// if fd is -1, there was an error opening file, handle it as you wish
guard fd != -1 else { return }

// syncResult is -1 if sync operation failed, handle it as you wish
let syncResult = fcntl(fd, F_FULLFSYNC)

// don't forget to close opened file
close(fd) 
```

完成后，您的数据将`fcntl`被保存。

请注意，此操作比通常写入文件（通过`NSFileManager`或`writeToURL`方法系列）要慢。如果出现性能问题，最好将写入移至后台线程。

# sql-server - 在 T-SQL 中，如何根据今天的条件获取属于上个月的记录？

> ID：13367127
> 
> 赞同：0
> 
> 时间：2012-11-13T19:09:47.497
> 
> 标签：sql-server, tsql

如果今天的日期部分小于或等于 19，我需要从上个月 20**日**到未来的记录。例如：

dbo.发票

```
Date        InvoiceNumber
10/20/2012  x
11/13/2012  y
11/20/2012  z
12/19/2012  aa
12/21/2012  bb 
```

今天（11/13），我需要x，y，z，aa，bb。
在 11/20，我需要 z、aa、bb。
在 12/19，我需要 z、aa、bb。
12/21，我需要bb。

这是我到目前为止所拥有的：

```
SELECT [omitted]
,CASE
    WHEN DAY(GETDATE()) <= 19 THEN

FROM QB_INVOICES_HEADER a
INNER JOIN CI_INVOICEADJS b
ON a.InvoiceNumber = b.InvoiceNumber
WHERE DATEDIFF(day, a.InvoiceDt, b.EffectiveCheckingDt) <= 60
ORDER BY b.EffectiveCheckingDt ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:24:18.530

只是 SQL 查询：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/2a8e6/21)**

```
SELECT
InvoiceNumber
FROM Invoices
WHERE Date >= CASE WHEN DAY(GETDATE())<=19 
                    THEN CAST(MONTH(DATEADD (mm , -1 , GETDATE() )) as varchar(2))+
                         '/20/'+CAST(YEAR(DATEADD (mm , -1 , GETDATE() )) as varchar(4))
                    ELSE CONVERT(VARCHAR(10), GETDATE(), 101) 
              END 
```

如果您想要不同的日期，只需将 GETDATE() 替换为 '10/19/2012'

```
SELECT
InvoiceNumber
FROM Invoices
WHERE Date >= CASE WHEN DAY('12/19/2012')<=19 
                    THEN CAST(MONTH(DATEADD (mm , -1 , '12/19/2012' )) as varchar(2))+
                         '/20/'+CAST(YEAR(DATEADD (mm , -1 , '12/19/2012' )) as varchar(4))
                    ELSE CONVERT(VARCHAR(10), '12/19/2012', 101) 
              END 
```

第二个查询的结果：

```
| INVOICENUMBER |
-----------------
|             z |
|            aa |
|            bb | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:24:33.293

你需要用它`DATEPART(DAY, [YOUR DATE COLUMN])`来告诉它是一个月中的哪一天。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T19:36:20.410

下面的代码解决了您的任务。我使用表变量`@invoices`而不是你的`dbo.invoices`表

```
DECLARE @invoices TABLE ([date] DATE, invoiceNumber varchar(255));

INSERT INTO @invoices VALUES
    ('10/20/2012', 'x'),
    ('11/13/2012', 'y'),
    ('11/20/2012', 'z'),
    ('12/19/2012', 'aa'),
    ('12/21/2012', 'bb');

DECLARE @StartDate DATE;
DECLARE @today DATE ;

SET @today = '11/13/2012';
--SET @today = '11/20/2012';
--SET @today = '12/19/2012';
--SET @today = '12/21/2012';

IF DAY(@today) <= 19 BEGIN
    SET @startDate = DATETIMEFROMPARTS(YEAR(@today), MONTH(@today) - 1, 20,0,0,0.0,0);
END
ELSE BEGIN
    SET @startDate = @today
END

SELECT [date], invoiceNumber
FROM @invoices
WHERE [date] >= @StartDate 
```

# heroku - Heroku Error R14（超出内存配额）后果？

> ID：13367128
> 
> 赞同：4
> 
> 时间：2012-11-13T19:09:54.997
> 
> 标签：heroku

我在 heroku 上有一个网络应用程序，它一直使用大约 300% 的允许 RAM (512 MB)。我看到我的日志充满了错误 R14（超出内存配额）[每秒一个条目]。虽然状况不佳，但我的应用程序仍然有效。

除了性能下降之外，是否还有其他我应该注意的后果（例如 heroku 对与此问题相关的任何事情收取额外费用，预定的作业可能会失败等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:14:04.433

据我所知，即使您继续超出内存要求，Heroku 也不会采取行动。但是，我不认为完全 1 GB 的超额容量（在您消耗的 1.5 GB 之外）的可用性是有保证的，或者在任何时候都保证是物理内存。此外，如果您运行接近 1.5 GB，那么您可能会超过 1.5 GB 的硬限制，此时您的测功机将被终止。

# ember.js - 如何在 ember.js 和 ember-data 中实现类似流星的实时功能？

> ID：13367130
> 
> 赞同：2
> 
> 时间：2012-11-13T19:09:59.033
> 
> 标签：ember.js, meteor, ember-data

我正在评估 ember.js 与 ember-data 和 meteor 的单页 Web 应用程序。到目前为止，我的结论是，最适合将流星与 ember.s 和 ember 数据的组合进行比较，而 ember 数据则扮演 minimongo 的角色。我真的很喜欢流星中与 minimongo 的数据实时同步，并希望在 ember.js 中看到这个功能。我的问题是我们是否会看到这一点，或者这是否完全超出范围？也许有一个辅助库或项目可以插入以具有这样的功能？这个问题非常具体，但我认为对于这个主题，任何范围更广的贡献都是有价值的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:13:16.980

一个 ember-data 存储可以通过适配器由许多源提供，其中一个肯定可以与 Web 套接字连接。我更喜欢 ember 将存储与适配器的干净分离，而不是流星的方法，这似乎需要客户端/服务器之间更紧密的耦合（我在这里可能错了——我承认我没有使用流星的经验）。

您可能想查看 Paul Chavard (@tchak) 的[colors-demo](https://github.com/tchak/colors-demo)，这是一个复制原始 Meteor 演示的 rails / ember / web sockets 应用程序。这是一个快速的概念验证应用程序，在这一点上可能有点过时，但它确实表明实时 ember 应用程序是可能的。

# workflow - 关于如何使 SqlWorkflowInstanceStore 与不同的模式一起工作的任何想法？

> ID：13367135
> 
> 赞同：2
> 
> 时间：2012-11-13T19:10:53.107
> 
> 标签：workflow, workflow-foundation-4

提前感谢您的任何意见或建议！

我在一个需要长时间运行工作流持久性的大型项目中使用 WF4。出于部署一致性的原因，为实例存储对象使用备用模式名称会很有帮助。例如，System.Activities.DurableInstancing.InstanceTable 会变成 DurableInstancing.InstanceTable 等等。

更新 SQL 脚本来完成这个服务器端并不难，但据我所知，在生成命令时无法修改 SqlWorkflowInstanceStore 使用的默认模式。似乎架构名称是从 SqlWorkflowInstanceStoreConstants.DefaultSchema 中读取的，这是一个常量（顾名思义）。SqlWorkflowInstanceStore 是密封的，推出自己的 InstanceStore 似乎是一项艰巨的任务，所以我不愿意追求这个选项。

有谁知道我可能会错过的更简单的方法？另外，我知道更改架构名称会增加应用未来实例存储更新的步骤，但任何人都可以预见其他潜在问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:23:07.053

我从未尝试过，但据我所知 SqlWorkflowInstanceStore 只调用存储过程。所有这些都需要在 System.Activities.DurableInstancing 数据库方案中，但您应该能够将表和视图移动到另一个数据库方案。

坦率地说，我可能永远不会这样做，因为这意味着我不再处于受支持的场景中并且看不到任何好处。如果由于某种原因您需要查询 System.Activities.DurableInstancing 表/视图，并且因为您的应用程序的设置方式需要在另一个数据库方案中，我将在那里创建指向原始表的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:25:35.743

实现您自己的 InstanceStore 并不困难。我们处于类似的情况，我们真的不希望有两个模式，我们的和工作流 SQL。我们实现了自己的 InstanceStore，它大约有 280 行代码。我们必须将一个表添加到我们的架构中，并将几个字段添加到现有表中。

我鼓励您尝试实现自己的 InstanceStore。

# asp.net-mvc-3 - 在没有魔术字符串的情况下以编程方式确定 Orchard 中的内容项类型

> ID：13367136
> 
> 赞同：0
> 
> 时间：2012-11-13T19:10:56.330
> 
> 标签：asp.net-mvc-3, orchardcms

我正在 Orchard 中实现一个自定义模块来跟踪每个内容项的视图数量。在我的处理程序中，我正在检查内容项的类型是否是默认的 Orchard“页面”类型，但现在它正在使用 Equals 函数和魔术字符串。这是我的代码：

```
public class ContentItemViewRecordHandler : ContentHandler
{
    private readonly IOrchardServices services;
    private readonly IRepository<ContentItemViewRecord> repository;

    public ContentItemViewRecordHandler(IOrchardServices services, IRepository<ContentItemViewRecord> repository)
    {
        this.services = services;
        this.repository = repository;

        OnGetDisplayShape<CommonPart>(RecordView);
    }

    private void RecordView(BuildDisplayContext context, CommonPart part)
    {
        var contentItemType = context.ContentItem.ContentType;

        // THIS IS THE IF STATEMENT IN QUESTION
        if (!contentItemType.Equals("Page", StringComparison.CurrentCultureIgnoreCase))
        {
            return;
        }

        var contentItemViewRecord = new ContentItemViewRecord
        {
            ContentItemRecordId = context.ContentItem.Id,
            Username = services.WorkContext.CurrentUser.UserName,
            HostAddress = services.WorkContext.HttpContext.Request.UserHostAddress,
            DateCreated = DateTime.UtcNow
        };

        repository.Create(contentItemViewRecord);
    }
} 
```

任何人都知道是否有一种方法可以在没有魔术字符串的情况下确定内容项的类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:38:23.690

内容类型不是 .NET 类型。它们是仅在运行时存在的动态实体。因此，字符串可以很好地识别它们。

# java - 如何知道一个点是否在二维圆锥（圆的扇区）内？

> ID：13367139
> 
> 赞同：0
> 
> 时间：2012-11-13T19:11:08.717
> 
> 标签：java

我想看看是否有一种方法可以理解一个点在一个圆的扇区内？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:15:42.453

将您的点转换为极坐标，然后将点的 r 与圆的半径进行比较，将点的 theta 与描述您的扇区的弧进行比较。 [极坐标系](http://en.wikipedia.org/wiki/Polar_coordinate_system)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T19:13:27.717

使用距离公式。

```
if(distance from point to circle center < radius) {/*this means point is in circle*/} 
```

您可以使用 trig 来查找角度。

# asp.net-mvc - 正在使用 MVC WebGrid 不好的做法

> ID：13367140
> 
> 赞同：1
> 
> 时间：2012-11-13T19:11:17.843
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我团队中的一名初级开发人员刚刚使用名为 WebGrid 的 MVC Helper 创建了一个屏幕。

我的第一反应是经典的**不！**任何听起来像网格/绑定技术的东西。

当他演示了这个功能时，它还不错，虽然它确实使用了

```
?sort=Title 
```

一般困扰我的语法类型。他还向我展示了许多有关在 Stack 等论坛上使用的帖子示例。其中一个警告不要使用它们，但它是明确的并且没有给出任何澄清。我想知道用户是否对 WebGrid 控件有任何积极或消极的体验。

您会推荐还是反对“最佳实践”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:57:05.097

我不认为你会得到这个问题的明确答案，但我认为这是一个很好的问题，值得回答（其他人可能会投票结束它，就像提醒一样）。但这是我个人的看法，FWIW。

对我来说，MVC（相对于 Web 表单）的好处之一是它几乎可以完全控制呈现的 HTML。使用 Web 窗体，.NET 做了自己疯狂的事情来让前端绑定到后面的代码，而这在使用 Web 控件时被放大了。

一般来说，在 MVC 中使用这样的控件也是如此——它们通常会限制人们对呈现的 HTML 的控制。

另一个论点是，它们通常会限制您可以通过客户端代码执行的操作（或者您可以执行的难易程度）。这可能是无法完全控制 HTML 的副作用。

我会看一下它生成的 HTML——你可能很快就会看到足够的理由不使用它（或者，使用它）。

当然，另一个论点是第三方控件经常尝试做太多事情，或者做的事情与您想要的不同（例如通过查询字符串传递排序，正如您所提到的）。

# antlr - 如何创建规则以匹配 2^3 以创建幂运算符？

> ID：13367143
> 
> 赞同：1
> 
> 时间：2012-11-13T19:11:22.073
> 
> 标签：antlr, antlr3

### 鉴于我具有以下语法，我将如何添加规则以匹配诸如`2^3`创建`power`运算符之类的内容？

```
negation : '!'* term ;

unary : ('+'!|'-'^)* negation ;

mult : unary (('*' | '/' | ('%'|'mod') ) unary)* ;

add : mult (('+' | '-') mult)* ;

relation : add (('=' | '!=' | '<' | '<=' | '>=' | '>') add)* ;

expression : relation (('&&' | '||') relation)* ;

// LEXER ================================================================

HEX_NUMBER : '0x' HEX_DIGIT+;

fragment 
FLOAT: ;

INTEGER : DIGIT+ ({input.LA(1)=='.' && input.LA(2)>='0' && input.LA(2)<='9'}?=> '.' DIGIT+ {$type=FLOAT;})? ;

fragment
HEX_DIGIT : (DIGIT|'a'..'f'|'A'..'F') ;

fragment
DIGIT : ('0'..'9') ; 
```

### 我试过的：

我尝试了类似`power : ('+' | '-') unary'^' unary`的方法，但这似乎不起作用。

我也试过`mult : unary (('*' | '/' | ('%'|'mod') | '^' ) unary)* ;`，但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:19:04.960

要给予`^`高于 的优先级`negation`，请执行以下操作：

```
pow      : term ('^' term)* ;

negation : '!' negation | pow ;

unary    : ('+'! | '-'^)* negation ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:55:18.050

如果要考虑语法中已经存在的右结合性，还可以使用递归：

```
 pow  :   term ('^'^ pow)?
        ;

   negation : '!'* pow;

   ... 
```

# sugarcrm - SugarCRM 社区版建议

> ID：13367144
> 
> 赞同：0
> 
> 时间：2012-11-13T19:11:24.233
> 
> 标签：sugarcrm

我想知道什么服务器更适合运行 SugarCRM 社区版？Centos，debian还是ubuntu？我可以在 3 之间进行选择。任何建议将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:11:16.603

无论哪种方式都不重要，只要确保您运行的是最新版本的 PHP 5.3 以获得最佳性能。

# sharepoint-2010 - 如何将自定义 web.config 文件作为包的一部分包含在内？

> ID：13367148
> 
> 赞同：2
> 
> 时间：2012-11-13T19:11:46.123
> 
> 标签：sharepoint-2010

我是 SharePoint 2010 的新手。我右键单击项目，如果要在本地部署，请选择部署。项目上的站点 URL 设置为我的本地计算机。如果我想部署到 QA 服务器，我选择 Deploy，导航到 Debug/Release 文件夹，获取 .wsp 文件，在 QA 上登录到管理中心，收回解决方案，然后`Add-SPsolution <path to wsp file>`通过 powershell 执行，返回到管理中心，单击该包的部署解决方案。工作正常。

我本地机器上的 web.config 有一个自定义连接字符串和 appsettings。当我在 QA 服务器上部署包时，我正在手动更改特定于 QA 的连接字符串和应用设置。我想自动化这个过程。我希望 web.config 成为包的一部分，它有自己的自定义连接字符串（一个用于本地，一个用于 QA 和生产）和 appsettings。我该怎么做？目标是在一台新机器上，我应该能够部署 wsp 并且 appsettings+web.config 应该都是正确的，而无需手动修改任何内容。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:14:20.233

我很确定仅使用包文件/ CAML*无法*完成 web.config 修改。

但是，*可以*做的是部署一个 WebApplication Feature Reciever，它通过[SPWebApplication.WebConfigModifications](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spwebapplication.webconfigmodifications.aspx)修改 web.config 。

这是我项目中的代码片段，有关更多详细信息，请参阅[代码项目 KB](http://www.codeproject.com/KB/sharepoint/SPWebConfigModTool.aspx)：（第一个部分只是一个带有一些注释的方便函数。）

```
// For WebConfigModifications access,
// see http://www.codeproject.com/KB/sharepoint/SPWebConfigModTool.aspx
// Hints:
// app.WebConfigModifications.Add(new SPWebConfigModification
//    {
//        Type =     [add/update child node?]
//        Path =     [XPath of parent node]
//        Name =     [XPath to identify child node UNIQUELY]
//        Owner =    [Use GUID to identify as ours]
//        Sequence = [Sequence number, likely 0 for only one]
//        Value =    [XML node to add/update]
//    });
void ModfiyWebConfig (SPWebApplication app, string path, string name, XElement node)
{
    app.WebConfigModifications.Add(new SPWebConfigModification
    {
        Type = SPWebConfigModificationType.EnsureChildNode,
        Path = path,
        Name = name,
        Owner = OwnerId,
        Sequence = 0,
        Value = node.ToString(),
    });
} 
```

获取/初始化 SPWebApplication

```
var app = properties.Feature.Parent as SPWebApplication; 
```

队列/设置修改

```
ModfiyWebConfig(app,
            "configuration/system.webServer/modules",
            "add[@name='ASPxHttpHandlerModule']",
            new XElement("add",
                new XAttribute("name", "ASPxHttpHandlerModule"),
                new XAttribute("type", aspxHandlerModule))); 
```

应用修改

```
app.WebService.ApplyWebConfigModifications();
app.Update(); 
```

# jquery - 在 jquery smootscroll 中链接图像

> ID：13367149
> 
> 赞同：1
> 
> 时间：2012-11-13T19:11:58.960
> 
> 标签：jquery, image, smooth-scrolling

我使用了一个 jquery 插件来创建一个无限滚动： http: [//go.nbm.org/site/PageNavigator/museum shop/general shop site pages/Shop_Slider_Test.html](http://go.nbm.org/site/PageNavigator/museum%20shop/general%20shop%20site%20pages/Shop_Slider_Test.html)

不过，我想将每个图像链接到不同的页面。我试图这样做使用：

```
 <img src="../images/content/pagebuilder/a.toy_banner.jpg" border="0" alt="The Toy Shop Banner" width="670" height="290" /></p>
<div id="makeMeScrollable" style="width: 670px; height: 160px;">
<div class="scrollingHotSpotLeft" style="opacity: 0;"></div>
<div class="scrollingHotSpotRight" style="opacity: 0;"></div>
<div class="scrollWrapper">
<div class="scrollableArea" style="width: 963px;">
<a target="_self" href"Ecommerce/1940604903?FOLDER=1340&amp;store_id=1161">
     <img src="../images/content/pagebuilder/kidsbooks_button.jpg" alt="Kids Books"  />
</a>
<a target="_self" href"Ecommerce/1940604903?FOLDER=1086&amp;store_id=1161">
     <img src="../images/content/pagebuilder/games_button.jpg" alt="Games"  />
</a>
<a target="_self" href"Ecommerce/1940604903?FOLDER=1089&amp;store_id=1161">
     <img src="../images/content/pagebuilder/kidsdecor_button_1.jpg" alt="Kids Decor"  />
</a>
<a target="_self" href"Ecommerce/1940604903?FOLDER=1934&amp;store_id=1161">
    <img src="../images/content/pagebuilder/models_button.jpg" alt="Models"  />
</a>
<a target="_self" href"Ecommerce/1940604903?FOLDER=1930&amp;store_id=1161">
    <img src="../images/content/pagebuilder/science_button.jpg" alt="Science"  />
</a>
<a target="_self" href"Ecommerce/1940604903?FOLDER=1084&amp;store_id=1161">
    <img src="../images/content/pagebuilder/toys_button.jpg" alt="Toys"  />
</a>
</div>
</div>
</div> 
```

但随后图像不再滚动。相反，只有一个图像位于 div 的左侧，它们在该空间中单独滚动，而不是一行。

有什么建议吗？？在大多数情况下，我仍然是新手，所以我可能会遗漏一些非常明显的东西。但我真的很感激任何帮助。

# objective-c - 向 Class 发送消息 - 摆脱“多个名为 [...] 的方法”警告

> ID：13367153
> 
> 赞同：2
> 
> 时间：2012-11-13T19:12:14.883
> 
> 标签：objective-c

我将 Class 类型作为参数传递给方法，XCode 4.5.2 中的 LLVM 编译器生成警告“找到多个名为 'foo' 的方法”，这是可以理解的，但在这种情况下是不希望的。如何通过禁用此类警告或更改我的代码来消除此警告？

```
- (void) fooWithClass: (Class) theClass
{
    [theClass aClassMethodOfThatClass];
} 
```

更具体地说，参数是某个基类的子类，我正在发送一条在该基类中声明的消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-22T12:04:22.670

停用`-Wall`对我不起作用，以防有人仍然感兴趣：在 LLVM 手册中挖掘之后，我发现使用 Peres 的方法（从 Xcode 7 开始）需要忽略的确切警告是：

```
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wstrict-selector-match"
// code
#pragma GCC diagnostic pop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:20:20.037

要禁用警告，您可以查看[clang 手册](http://clang.llvm.org/docs/UsersManual.html#diagnostics)。像这样：

```
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wall"
    [theClass aClassMethodOfThatClass];
#pragma GCC diagnostic pop 
```

# asp.net - 基本身份验证 IHttpModule 意外行为

> ID：13367154
> 
> 赞同：0
> 
> 时间：2012-11-13T19:12:19.837
> 
> 标签：asp.net, basic-authentication

我在 IIS7 中为我的站点启用了基本身份验证，并按照此[链接](http://blog.smithfamily.dk/2008/08/27/ImplementingBasicAuthenticationInASPNET20.aspx)为基本身份验证请求创建处理程序。问题是，无论用户输入什么凭据，即使输入了正确的凭据，站点也会不断返回 401。这只是一个测试，凭据会根据硬编码值进行检查。

以下是相关代码：

```
 public class BasicAuthenticationHttpModule : IHttpModule 
{
    public void Init(HttpApplication context)
    {
        context.BeginRequest+=context_BeginRequest;
        context.AuthenticateRequest += context_AuthenticateRequest;
    }

    void context_AuthenticateRequest(object sender, EventArgs e)
    {
        HttpApplication application = (HttpApplication)sender;

        TryAuthenticate(application);
    }

    private void context_BeginRequest(object sender, EventArgs e)
    {
        HttpApplication application = (HttpApplication)sender;

        TryAuthenticate(application);
    }

    private static void TryAuthenticate(HttpApplication application)
    {
        if (!Authenticate(application.Context))
        {
            application.Context.Response.Status = "401 Unauthorized";
            application.Context.Response.StatusCode = 401;
            application.Context.Response.AddHeader("WWW-Authenticate", "Basic");
            application.CompleteRequest();
        }
    }

    private static bool Authenticate(HttpContext context)
    {            
        if (context.User!=null && context.User.Identity.IsAuthenticated)
        {
            return true;
        }

        if (!context.Request.Headers.AllKeys.Contains("Authorization"))
            return false;

        string authHeader = HttpContext.Current.Request.Headers["Authorization"];

        IPrincipal principal;
        if (TryGetPrincipal(authHeader, out principal))
        {
            context.User = principal; 
            return true;
        }
        return false;
    }

    private static bool TryGetPrincipal(string[] creds, out IPrincipal principal)
    {
        if (creds[0] == "Administrator" && creds[1] == "SecurePassword")
        {
            principal = new GenericPrincipal(
               new GenericIdentity("Administrator"),
               new string[] { "Administrator", "User" }
            );
            return true;
        }
        if (creds[0] == "BasicUser" && creds[1] == "Password")
        { 
            principal = new GenericPrincipal(
               new GenericIdentity("BasicUser"),
               new string[] { "User", "SystemUser" }
            );
            return true;
        }
        else
        {
            principal = null;
            return false;
        }
    } 
```

当客户端输入正确的凭据（即“BasicUser”、“Password”）时，会创建 GenericPrincipal 对象并将其分配给 HttpContext 的 User 属性。调查 Request.IsAuthenticated 告诉它是`true`.

这就是为什么我不明白为什么客户一次又一次地收到 401。
我不确定所有管道是如何工作的 - 可能是基本身份验证更进一步到一些也服务于请求的 IIS HttpModule？或者可能是代码不完整，`context_BeginRequest`需要扩展？（我知道在 Forms 身份验证类型的情况下，您会执行 Response.Redirect(goodguy.aspx) 之类的操作）

无论如何，感谢任何帮助/问题。

忘了说在 web.config 我也放了

```
<system.webServer>
    <modules>
      <add name="BasicAuthenticationHttpModule" type="Analytics.BasicAuthenticationHttpModule" />
    </modules>
  </system.webServer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:34:57.757

显然实现了它自己的基本身份验证。因此我们的模块可以成功地验证请求，它会被传递给内置的 IIS 模块，该模块拒绝验证。不复制粘贴真的很有帮助，但也确实要自己思考。所以回答我的问题 - 禁用除匿名之外的 IIS 上的所有身份验证。

# javascript - 使用内联 CSS 和调用 javascript 函数动态设置 div 高度

> ID：13367161
> 
> 赞同：0
> 
> 时间：2012-11-13T19:12:35.183
> 
> 标签：javascript, jquery, html, css

出于我的目的，我需要尽快设置 div 高度。

使用`document.ready()`事件的速度不够快，所以想设置div的内联CSS样式。

怎么能做到这样？

```
<div id="map-container" style="height:javascript(getwindowheight)px;">
    <div id="map">

    </div>
</div>

function getwindowsheight() {
    return window.height;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:20:35.083

由于您希望它是动态的，因此您需要注意以下事件：

*   窗口调整大小
*   窗口准备好了

首先设置您的 HTML：

```
<div id="map-container"></div> 
```

然后在你的 JavaScript 中，设置一个函数来检测这些：

```
var applyMapContainerHeight = function() {
  var height = $(window).height();
  $("#map-container").height(height);
};

document.ready(function() {
  applyMapContainerHeight();
});

$(window).resize(function() {
  applyMapContainerHeight();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:15:04.887

如果 jQuery 是脚本文件包含在 HTML 的最开头，请在`div`声明之后放置一些脚本：

```
<div id="map-container">
    <div id="map">

    </div>
</div>
<script type="text/javascript">
    $("#map-container").height(getwindowsheight());
    function getwindowsheight() {
        return window.height;
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:15:11.357

然后不要使用 document.ready

只需在 div 之后执行你的 js

```
<div id="map-container">
    <div id="map">

    </div>
</div>
<script type="text/javascript">
$('#map-container').css({ height: 'your height'});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T19:27:10.570

```
<div id="map-container">
    <div id="map">
    </div>
</div>

<script type="text/javascript">
document.getElementById("map-container").style.height= $(window).height() + "px";
</script> 
```

# java - getclass() 与 .class

> ID：13367173
> 
> 赞同：6
> 
> 时间：2012-11-13T19:13:24.207
> 
> 标签：java

> **可能重复：**
> [调用 MyClass.class 和 MyClass.getClass() 有什么区别](https://stackoverflow.com/questions/2467970/whats-the-difference-between-calling-myclass-class-and-myclass-getclass)

想要一个`Class<T>`对象，这两种方法有什么区别？

```
Test ob = new Test();

ob.getclass(); 
```

或者

```
Test.class 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T19:14:35.373

根据[类 javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)

第一种**方法**从`Object`.

第二种方法使用文字获取命名类型（或 void）的**Class对象。**`class`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T19:17:56.393

该`getClass()`方法在中定义`java.lang.Object`，因此可以在任何对象引用上调用。

> 它获取与引用指向的对象的运行时类型关联的 Class 对象。.
> 
> getClass() 方法根本不类似于 .class。更接近的是 Class.forName(String)，它为由 String 命名的类获取一个 Class 对象。

在可以使用其中任何一个的情况下，请使用`.class`，因为它更有效。

# c# - DirectoryInfo 类在 Metro App 中不起作用

> ID：13367177
> 
> 赞同：2
> 
> 时间：2012-11-13T19:13:29.337
> 
> 标签：c#, windows-8, microsoft-metro, .net-4.5

我正在开发地铁应用程序。我需要访问 DirectoryInfo 类。如此[处所述](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)，它也可以在 Windows 8 上运行。但我无法使用它！它给了：

> 找不到类型或命名空间名称“DirectoryInfo”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:25:54.190

Windows 应用商店应用使用中定义的类型，[`Windows.Storage`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.aspx)而不是`System.IO`. 这主要是因为`System.IO`类型 API 几乎都是同步的，并且访问文件系统可能阻塞调用线程的时间比现代响应式应用程序中可接受的时间长。如果检查`Windows.Storage`类型，它们几乎都是异步的。

您使用哪种类型取决于您要执行的操作。你可能想看看`StorageFolder`.

# javascript - Css链接风格礼仪

> ID：13367178
> 
> 赞同：1
> 
> 时间：2012-11-13T19:13:32.907
> 
> 标签：javascript, html, css, tags, styles

您好想知道是否最好在 Web 应用程序中设置页面的菜单链接样式，仅设置*a*标签或*li*标签或两者兼而有之。

例子：

```
<ul id="mainMenu">
<li><a href="">myLink</a></li>
</ul> 
```

我希望它是绿色的，在*a*标签或*li*上设置绿色更好吗？考虑到我将主要使用 js 与 php 和其他所有内容进行交互，根本不添加*a*标签并坚持使用*li*标签来触发 js 功能是不是很糟糕？（它主要是 ajax 和动态内容）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:21:40.727

`a`标签具有默认样式，可以赋予它们颜色，通常是下划线。因此，如果您想覆盖这些样式，则必须将它们应用于`a`自身，而不是`li`包含它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:25:24.953

通常，您不想为整个`tag`. 当有更改或项目扩展时，它会变得混乱。

所以，而不是

```
li {
    /*Your styles here*/
    /*this is not a great method*/
} 
```

您可能想添加一些对它的引用。所以你的html喜欢，

```
<ul class="someclass">
    <li>
         <a>This is a link</a>
    </li>
</ul> 
```

因此，CSS喜欢

```
ul.someclass li {
    /*Your styles here */
} 
```

现在，在上面的示例样式中，混淆是将样式应用于父元素 ( `<li>`) 还是子元素 ( `<a>`)。

子元素将从其父元素继承属性。

因此，如果您的大多数子元素具有与其父元素相同的大多数属性，请将样式应用于父元素。

如果您只需要子元素的某些样式，只需将该样式添加到子元素即可。

示例（上面的 HTML）：

```
ul.someclass li {
    font-size:24px;
    font-weight: bold;
}
ul.someclass li a {
    color:blue;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T19:31:31.837

> 您好想知道是否最好在 Web 应用程序中设置页面的菜单链接样式，仅设置 a 标签或 li 标签或两者兼而有之。

好吧，这取决于您希望站点导航（或其他列表使用）的格式类型，因为样式属性在两个元素之间的行为会有所不同。

一个明显的例子是来自某些属性的默认值，例如`display`。链接`<a>`标签的默认值是`display:inline`并且列表`li`标签将具有`display:list-item`默认样式，因此设置如下：

```
li {background-color: red;} 
```

将不同于

```
a { background-color:blue;} 
```

您可以看到一个功能[小提琴](http://jsfiddle.net/brunovieira/qawGJ/)，旨在显示两个标签占用的空间。

> 根本不添加 a 标签而只添加 li 标签来触发 js 功能是不是很糟糕？

a 标签已经具有一些使它们更加用户友好的属性。例如，如果您的用户已经访问过一个站点，您可以使用伪选择器设置您的标签样式`:visited`。您可以使用`<li>`元素轻松完成此操作。此外，标签已经将`cursor`属性设置为`pointer`当悬停时，即使您可以在列表元素中使用它，您也将使用更多的 css 来执行`a`标签默认的相同操作。

我的最后一条建议是，使用`lists`元素来设置导航链接的内部位置，并使用链接来关联 js 函数并设置导航规则的样式，例如何时访问链接、何时激活链接等等。

我希望它有所帮助。干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T19:17:31.970

我会说做类似的事情：

```
 ul#mainMenu li a{
      your style
 } 
```

这样，您就可以将样式应用于该菜单中的链接，而不会弄乱您将来可能添加的链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T19:20:07.157

在这种情况下，您的 a 标签将始终覆盖父元素的颜色属性。也就是说，您需要为不同的属性设置样式，例如 li 的显示和标签的颜色。您的布局是完全有效的。

# asp.net - Spreadsheetgear .find 方法

> ID：13367180
> 
> 赞同：0
> 
> 时间：2012-11-13T19:13:47.507
> 
> 标签：asp.net, excel-2007, spreadsheetgear

工具：asp.net VB、SpreadsheetGear 2010

我需要从外部用户那里读取 Excel 文件，而且我不控制格式。有3个数据部分。我可以在标题中阅读。挑战在于正文细节可以包含无限数量的行，有时这些行是空白的。我可以确定页脚行，因为有一段文字是独一无二的。因此我可以执行以下操作：

```
Dim dFoot As SpreadsheetGear.IRange = worksheet.Cells("20:21").Rows

Dim rngDet As SpreadsheetGear.IRange  

rngDet = dFoot.Find(what:="UNIQUE TEXT HERE", 
                    lookIn:=SpreadsheetGear.FindLookIn.Values, 
                    lookAt:=SpreadsheetGear.LookAt.Whole, 
                    searchOrder:=SpreadsheetGear.SearchOrder.ByColumns, 
                    searchDirection:=SpreadsheetGear.SearchDirection.Next, 
                    matchCase:=False, 
                    after:=dFoot) 
```

不幸的是，我现在被困在这里。我无法确定单元格的位置（即 V79）或如何将 7 列上移和 3 列下移以获得第一个插入值。我尝试过偏移和不同的阅读方法`rngDet`，但没有运气。我也尝试过`rngDet.Activate()`读取活动单元格，但它的工作方式与 Microsoft 不同。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:41:08.027

蒂姆，谢谢你的提问。第一次问所以我可能不是很清楚。我今天确实为自己找到了答案。我有一组需要上传的单元格。问题是他们将根据在上面部分中输入的行数上下移动页面。我意识到我确实知道它将在哪个列中，所以我执行了以下操作：

```
Dim x As Integer
    Dim xFooter As Integer
    Dim columnnumber As Integer = 21 'Column V

    txtTest.Text = worksheet.Cells.RowCount
    For x = 500 To 1 Step -1

        If worksheet.Cells(x, columnnumber).Value = "TOTAL PRODUCT COST CALCULATION" Then
            txtTest.Text = x
            xFooter = x
            Exit For
        End If
    Next x 
```

我现在可以使用我的 x 值作为我的一组单元格的左手角。我知道这些值从这里开始超过 7 列，向下 20 行，这给了我我的值的范围。

以为我会分享以防万一有人遇到同样的问题。

# android - 是否可以在安卓手机上修改内置消息应用程序的源代码？

> ID：13367181
> 
> 赞同：-1
> 
> 时间：2012-11-13T19:13:48.527
> 
> 标签：android, messaging

是否可以更改 Android 手机上的内置消息应用程序？我正在做一个项目，我想在其中加密和存储所有传入的消息。是否可以查看手机消息应用程序的源代码，以便我可以在其中添加一个新功能，该功能将加密和存储传入的消息？我现在被困住了。我在某处读到，如果我们根植手机，我们可以改变某些内置应用程序的工作方式。但是即使在我的手机root之后，我也不知道该怎么办。因此，请帮助我提供任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:21:44.423

[安卓内置短信应用源代码链接](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.0_r1/com/android/mms/ui/ComposeMessageActivity.java/)。

# javascript - 如何在 Windows Store App 中加载 CDN JS 文件？

> ID：13367184
> 
> 赞同：1
> 
> 时间：2012-11-13T19:13:57.200
> 
> 标签：javascript, winjs, windows-store-apps

是否可以在 Windows 应用商店应用程序（用 JavaScript 编写）中加载远程 JavaScript 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:51:18.717

好吧，这取决于：

如果您的应用程序旨在部署在 Web 上下文中，答案是肯定的，否则（在本地上下文中），脚本引用受限于本地打包的范围。

**资源**

*   *[上下文的功能和限制](http://msdn.microsoft.com/en-us/library/windows/apps/hh465373.aspx)*，位于 MSDN 的 Windows 应用商店应用开发中心。

# c# - 为什么 graphicsDevice.viewport(x,y,z,w) 使用 x 表示 x 和 y？

> ID：13367190
> 
> 赞同：0
> 
> 时间：2012-11-13T19:14:18.053
> 
> 标签：c#, xna, camera

我正在尝试为我的 XNA 游戏创建一个 splitScreen。我有一个用作相机的相机类，当需要绘制时，我调用包含以下代码的函数。cameraViewport 是一个vector4，所有值都在0,1之间。对于我使用的第一台相机

```
camera1.viewport = new vector4(0,0,1,.5f); // this works perfect 
```

对于我正在使用的第二台相机

```
camera2.viewport = new vector4(0,.5f,1,.5f); // this is drawling the same view as camera1 
```

但是当我为相机二做这个时

```
camera2.viewport = new vector3(.5f,0,.5f,.5f); 
```

结果好像我把它分成了 4 种方式，它在右下角，但它应该在右上角。所以看起来它根本不使用 y 值而只使用 x 值。这是为什么？

```
 int x = (int)(defaultViewport.Width * CameraViewport.X);
            int y = (int)(defaultViewport.Height * CameraViewport.Y);
            int w = (int)(defaultViewport.Width * CameraViewport.Z);
            int h = (int)(defaultViewport.Height * CameraViewport.W);
            Viewport viewport = new Viewport(x, y, w, h);
            graphics.Viewport = viewport;
            this.Projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(45), viewport.AspectRatio, .1f, 5000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:42:10.280

实际上这是我的错，错误在于我如何设置视口。

```
Vector4 cameraViewport;
public Vecor4 viewport
{
     Vector4 newviewport = value;
     cameraViewport = new Vector4(mathhelper.clamp(newviewport.x,0,1),...  //here was my problem i was setting the y value the same as the x value i didnt even think to check here sorry for this kinda point less question unless someone else has the same problem.  
} 
```

# python - 基本 wx 尺寸问题

> ID：13367192
> 
> 赞同：1
> 
> 时间：2012-11-13T19:14:35.157
> 
> 标签：python, user-interface, layout, wxpython, sizer

我有以下与尺寸相关的代码：

```
import wx

class TableSelectPanel(wx.Panel):
    def __init__(self, parent, *args, **kwargs):
        wx.Panel.__init__(self, parent, *args, **kwargs)

        self.title = wx.StaticText(self, label="Select Table")
        self.tableList = wx.ListBox(self)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.title)
        sizer.Add(self.tableList, flag=wx.EXPAND)
        self.SetSizerAndFit(sizer)

class LobbyFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None)

        self.tableSelect = TableSelectPanel(self)

        #window size
        self.SetMinSize((800, 600))
        self.SetMaxSize((800, 600))
        self.SetSize((800, 600))

        #sizers
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        sizer.Add(self.tableSelect, flag=wx.EXPAND)

        self.SetSizer(sizer)

        self.Show(True) 
```

我期望的是我将有一个 800x600 的窗口，`wx.ListBox`垂直拉伸以适应桌子的整个高度。但是，虽然我确实有一个 800x600 的窗口，但`wx.ListBox`它并没有扩展到整个高度。相反，似乎面板确实伸展了，但列表框没有：

[![布局不正确](../Images/557c919ef104b769c6632915d8e96d1c.png)](https://i.stack.imgur.com/MXAbf.png)

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:26:39.140

设置`proportion`为 1：

```
sizer.Add(self.tableList, proportion=1, flag=wx.EXPAND) 
```

> 虽然这个参数的含义在 wxSizer 中是未定义的，但它在 wxBoxSizer 中用于指示一个 sizer 的子节点是否可以在 wxBoxSizer 的主方向上改变它的大小——其中 0 代表不可改变，大于零的值是相对于同一 wxBoxSizer 的其他子项的值进行解释。例如，你可能有一个水平的 wxBoxSizer，它有三个孩子，其中两个应该用 sizer 改变它们的大小。然后两个可拉伸窗口将分别获得 1 的值，以使它们与 sizer 的水平尺寸相等地增长和收缩。

# c# - Datalist 内 Accordion 内的 TextBox ... findcontrol 不起作用

> ID：13367197
> 
> 赞同：0
> 
> 时间：2012-11-13T19:14:48.440
> 
> 标签：c#, asp.net, accordion, datalist, findcontrol

我已经搜索过，但没有运气...

我在手风琴控件中有一个文本框，它位于数据列表中...我想允许手风琴表单提交一些值，但我无法将这些值从文本框中取出，并且 findcontrol 不起作用。

```
<asp:DataList ID="AddProjectDataList" runat="server">
<ItemTemplate>

 <asp:HiddenField ID="clientid" runat="server" Value='<%# Eval("mmmclientlistid") %>'></asp:HiddenField>
  <asp:Table ID="ProjectTableClass" runat="server" style="width:600px;height:600px"><asp:TableRow><asp:TableCell VerticalAlign="Top">
<b>New <asp:Label ID="ProjectTypeLabel" Text='<%# Eval("ProjectTypeName") %>' runat="server"></asp:Label> Project</b>
      <table class="AddProject" cellpadding="5">
          <tr>
              <td valign="top">
                  <b>Campaign</b> information:
              </td>
              <td>

                  <asp:DropDownList ID="DDCampaignList" runat="server" AutoPostBack="true" OnSelectedIndexChanged="OnChange_selectCampaign" AppendDataBoundItems="True" >
                      <asp:ListItem Text="SELECT A CAMPAIGN:" Value="-1"></asp:ListItem>
                  </asp:DropDownList>
                  <br />

                  <ajaxToolkit:Accordion
ID="CampaignAccordion"
runat="Server"
SelectedIndex="1"
HeaderCssClass="accordionHeader"
HeaderSelectedCssClass="accordionHeaderSelected"
ContentCssClass="accordionContent"
AutoSize="None"
FadeTransitions="true"
TransitionDuration="250"
FramesPerSecond="40"
RequireOpenedPane="false"
SuppressHeaderPostbacks="true">
<Panes>
    <ajaxToolkit:AccordionPane ID="AccordionPane1" runat="server"
        HeaderCssClass="accordionHeader"
        HeaderSelectedCssClass="accordionHeaderSelected"
        ContentCssClass="accordionContent">
        <Header> 
            <asp:LinkButton ID="AddCampaignLink" runat="server">Or Click to Add New Campaign</asp:LinkButton> </Header>
        <Content> 
                             <asp:TextBox ID="campaignNameTextBox" Style="width: 400px" runat="server"></asp:TextBox><br />
                  Description (optional):<br />
                  <asp:TextBox ID="campaignDescriptionTextBox" runat="server" TextMode="MultiLine"
                      Columns="30" Rows="3"></asp:TextBox>
            <br />
            <asp:Button ID="AddCampaignButton" runat="server" Text="Add New Campaign" OnClick="AddCampaign_Click" />
        </Content>
    </ajaxToolkit:AccordionPane>        
</Panes>            
<HeaderTemplate>...</HeaderTemplate>
<ContentTemplate>...</ContentTemplate> 
```

然后在代码隐藏中

```
protected void AddCampaign_Click(object sender, EventArgs e)
    {
        //click to add campaign
        //campaignname
        //clientid

            HiddenField EID = (HiddenField)FindControl("HiddenFieldEID");
            TextBox campaignNameTextBox = (TextBox)AddProjectDataList.Items[0].FindControl("campaignNameTextBox");
            TextBox campaignDescriptionTextBox = (TextBox)AddProjectDataList.Items[0].FindControl("campaignDescriptionTextBox");

            tbl_campaign newcampaign = new tbl_campaign();
            newcampaign.clientID = Convert.ToInt32(DDClientList.SelectedValue); 
            newcampaign.employeeID = Convert.ToInt32(HiddenFieldEID.Value);
            newcampaign.campaignName = campaignNameTextBox.Text;
            newcampaign.campaignDescription = campaignDescriptionTextBox.Text;

            db.AddTotbl_campaign(newcampaign);

            db.SaveChanges();
    } 
```

如果我摆脱手风琴窗格，它工作正常。控件定位没问题。但是对于手风琴，就没有这样的运气了。（“hiddenFieldEID”字段的位置很好，因为它位于手风琴之外。）

DataList 控件中是否需要单独的 onItemDataBound 事件？如果是这样，里面有什么，我如何将它与 buttonclick 事件联系起来？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:22:28.813

好吧，我可能刚刚想通了。

我这样做了：

```
 Control CampaignAccordion = (Control)AddProjectDataList.Items[0].FindControl("CampaignAccordion");
            TextBox campaignNameTextBox = (TextBox)CampaignAccordion.FindControl("campaignNameTextBox");
            TextBox campaignDescriptionTextBox = (TextBox)CampaignAccordion.FindControl("campaignDescriptionTextBox"); 
```

它奏效了。没有单独的数据绑定事件。这是正常的做法吗？

# arrays - 如何在 Irvine 汇编语言中反转数组？

> ID：13367200
> 
> 赞同：0
> 
> 时间：2012-11-13T19:14:56.070
> 
> 标签：arrays, loops, assembly, masm, irvine32

我正在编写一个数字操作程序，其中一个步骤是反转数组。到目前为止我有

```
reverseArray proc
mov eax, arraySize
mov temp, eax
Imul eax, 4
mov esi, eax
mov eax, 0
mov number, 0
jne L1
L1: 
cmp temp, 0
je L3

mov eax, numbers[esi]
mov tempnumbers[ecx], eax

mov eax, tempnumbers[ecx]
call writeDec
call crlf

sub esi,4
add ecx, 4
sub temp, 1

loop L1

L2:
ret

L3:

.If(number >= 0)

 mov esi, 0
.ENDIF
mov eax, number
cmp eax, arraySize
je L2

mov eax, tempnumbers[esi]
mov numbers[esi], eax

add esi, 4
add number, 1
loop L3 
```

然而，这只反转了我阵列的大约一半。我对 esi 或 ecx 计数器做错了吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:46:08.293

使用 edi 代替 ecx，并在开始时将其设置为 0。

# php - 使用 PHP 清除所有用户的所有 cookie

> ID：13367201
> 
> 赞同：0
> 
> 时间：2012-11-13T19:14:56.413
> 
> 标签：php, cookies

我有一个用 PHP 编写的网站，允许用户创建帐户并登录。每个用户都已登录，直到他们按下“注销”链接。我在公共计算机上登录并忘记注销。我现在想知道是否有一种方法可以注销当前使用 PHP 登录到我的网站的所有用户。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:18:01.470

当然。只需更改保持登录的 cookie 的名称。当然，这会破坏所有用户的登录（我猜，这就是你想要的）。

如果您只是担心您的登录，那么我认为如果您的 cookie 存储某种密码哈希值，您可以更改密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:17:03.600

您应该考虑使用 PHP 会话而不是 cookie，我最近一直在使用相同类型的系统。然后，您可以将令牌存储在数据库中，如果您想注销所有用户，您可以简单地使令牌过期。

# google-app-engine - 如何将在线 GAE 数据存储中的数据加载到本地开发服务器中？

> ID：13367208
> 
> 赞同：4
> 
> 时间：2012-11-13T19:15:14.033
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb, database-backups, bulkloader

我以前使用[GAE 文档](https://developers.google.com/appengine/docs/python/tools/uploadingdata#Loading_Data_Into_the_Development_Server)中描述的方法将我的实体的备份下载到实时数据存储中。

目前，我通过编写`bulkloader.yaml`和使用以下命令获得了每个实体类型的 csv 文件：

```
appcfg.py download_data --config_file=bulkloader.yaml --filename=users.csv --kind=Permission --url=http://your_app_id.appspot.com/_ah/remote_api 
```

我还有一个使用以下命令获得的 sql3 转储文件：

```
appcfg.py download_data --kind=<kind> --url=http://your_app_id.appspot.com/_ah/remote_api --filename=<data-filename> 
```

现在如果我尝试这个命令：

```
appcfg.py upload_data --url=http://your_app_id.appspot.com/_ah/remote_api --kind=<kind> --filename=<data-filename> 
```

用 localhost:8080 替换 URL，它要求我输入用户名/密码。现在，即使提供一个模拟用户名 (test@example.com)`http://localhost:8080/_ah/remote_api`并选中“管理员”复选框，它总是会给我一个身份验证错误。

文档中提到的另一种选择是使用这个：

```
appcfg.py upload_data --config_file=album_loader.py --filename=album_data.csv --kind=Album --url=http://localhost:8080/_ah/remote_api <app-directory> 
```

我写了一个加载器，试了一下，它还要求输入用户名和密码，但它在这里接受任何东西。输出如下：

```
/usr/local/google_appengine/google/appengine/api/search/search.py:232: UserWarning: DocumentOperationResult._code is deprecated. Use OperationResult._code instead.
  'Use OperationResult.%s instead.' % (name, name))
/usr/local/google_appengine/google/appengine/api/search/search.py:232: UserWarning: DocumentOperationResult._CODES is deprecated. Use OperationResult._CODES instead.
  'Use OperationResult.%s instead.' % (name, name))
Application: knowledgetestgame
Uploading data records.
[INFO    ] Logging to bulkloader-log-20121113.210613
[INFO    ] Throttling transfers:
[INFO    ] Bandwidth: 250000 bytes/second
[INFO    ] HTTP connections: 8/second
[INFO    ] Entities inserted/fetched/modified: 20/second
[INFO    ] Batch Size: 10
[INFO    ] Opening database: bulkloader-progress-20121113.210613.sql3
Please enter login credentials for localhost
Email: test@example.com
Password for test@example.com: 
[INFO    ] Connecting to localhost:8080/_ah/remote_api
[INFO    ] Starting import; maximum 10 entities per post
[ERROR   ] [WorkerThread-4] WorkerThread:
Traceback (most recent call last):
  File "/usr/local/google_appengine/google/appengine/tools/adaptive_thread_pool.py", line 176, in WorkOnItems
    status, instruction = item.PerformWork(self.__thread_pool)
  File "/usr/local/google_appengine/google/appengine/tools/bulkloader.py", line 764, in PerformWork
    transfer_time = self._TransferItem(thread_pool)
  File "/usr/local/google_appengine/google/appengine/tools/bulkloader.py", line 933, in _TransferItem
    self.content = self.request_manager.EncodeContent(self.rows)
  File "/usr/local/google_appengine/google/appengine/tools/bulkloader.py", line 1394, in EncodeContent
    entity = loader.create_entity(values, key_name=key, parent=parent)
  File "/usr/local/google_appengine/google/appengine/tools/bulkloader.py", line 2728, in create_entity
    (len(self.__properties), len(values)))
AssertionError: Expected 17 columns, found 18.
[INFO    ] [WorkerThread-5] Backing off due to errors: 1.0 seconds
[INFO    ] Unexpected thread death: WorkerThread-4
[INFO    ] An error occurred. Shutting down...
[ERROR   ] Error in WorkerThread-4: Expected 17 columns, found 18.

[INFO    ] 980 entities total, 0 previously transferred
[INFO    ] 0 entities (278 bytes) transferred in 5.9 seconds
[INFO    ] Some entities not successfully transferred 
```

我总共有大约 4000 个实体，这里说有 980 个被转移，但实际上我检查了本地数据存储，但我没有找到它们。

下面是我使用的加载器（我用于`NDB`Guess 实体）

```
import datetime
from google.appengine.ext import db
from google.appengine.tools import bulkloader
from google.appengine.ext.ndb import key

class Guess(db.Model):
    pass

class GuessLoader(bulkloader.Loader):
    def __init__(self):
        bulkloader.Loader.__init__(self, 'Guess',
                                   [('selectedAssociation', lambda x: x.decode('utf-8')),
                                    ('suggestionsList', lambda x: x.decode('utf-8')),
                                    ('associationIndexInList', int),                                    
                                    ('timeEntered',
                                     lambda x: datetime.datetime.strptime(x, '%m/%d/%Y').date()),
                                    ('rank', int),
                                    ('topicName', lambda x: x.decode('utf-8')),
                                    ('topic', int),
                                    ('player', int),
                                    ('game', int),
                                    ('guessString', lambda x: x.decode('utf-8')),
                                    ('guessTime',
                                     lambda x: datetime.datetime.strptime(x, '%m/%d/%Y').date()),
                                    ('accountType', lambda x: x.decode('utf-8')),
                                    ('nthGuess', int),
                                    ('score', float),
                                    ('cutByRoundEnd', bool),
                                    ('suggestionsListDelay', int),
                                    ('occurrences', float)
                                   ])

loaders = [GuessLoader] 
```

编辑：我只是注意到错误消息中的这一部分，`[ERROR ] Error in WorkerThread-0: Expected 17 columns, found 18.`而实际上我只是浏览了整个 csv 文件，并确保每一行都有 18 列。我检查了加载器，发现我缺少`key`列，我给它一个类型`int`，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-05T12:15:15.427

如果您在身份验证方面遇到问题，请将以下内容放入您的 appengine_config.py 中：

```
if os.environ.get('SERVER_SOFTWARE','').startswith('Development'):
    remoteapi_CUSTOM_ENVIRONMENT_AUTHENTICATION = (
    'REMOTE_ADDR', ['127.0.0.1']) 
```

然后运行

```
appcfg.py download_data --url=http://APPNAME.appspot.com/_ah/remote_api --filename=dump --kind=EntityName
appcfg.py upload_data --url=http://localhost:8080/_ah/remote_api --filename=dump --application=dev~APPNAME 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:17:49.087

尝试按`Enter`（无用户名/密码）。这似乎对我有用。我的命令（包装在 bash 脚本中以防止我偶尔收到的导入错误）是：

```
#!/bin/bash

# Modify path
export PYTHONPATH=$PYTHONPATH:.

# Load data
python /path/to/app/config/appcfg.py upload_data \
--config_file=<my_loader.py> \
--filename=<output.csv> \
--kind=<kind> \
--application=dev~<application_id> \
--url=http://localhost:8088/_ah/remote_api ./ 
```

当提示输入时`Email`，我按回车键，所有内容都上传到开发服务器。我没有`NDB`在这种情况下使用，尽管我认为这不会有所作为。

# android - 清除 ListView 项目并在 Android 中刷新

> ID：13367209
> 
> 赞同：0
> 
> 时间：2012-11-13T19:15:18.720
> 
> 标签：android, listview

我使用互联网服务来填写列表视图。当用户按下刷新按钮时，我想刷新列表视图项。我怎样才能做到这一点？

在 AsyncTask 和 postExecute 我填写列表视图：

```
protected void onPostExecute(String file_url) {
    pDialog.dismiss();
    try {
        if (jSon.has(KEY_SUCCESS)) {
            String success = jSon.getString(KEY_SUCCESS);
            if (success.equals("1")) {

                notes = jSon.getJSONObject("notes");
                for (int i = 0; i < notes.length(); i++) {
                    JSONObject c = notes.getJSONObject(Integer
                            .toString(i));

                    Log.i("JSONObject c >>", c.toString());

                    String id = c.getString(KEY_NOTE_ID);
                    String subject = c.getString(KEY_NOTE_SUBJECT);
                    String date = c.getString(KEY_NOTE_DATE);

                    HashMap<String, String> map = new HashMap<String, String>();
                    map.put(KEY_NOTE_ID, id);
                    map.put(KEY_NOTE_SUBJECT, subject);
                    map.put(KEY_NOTE_DATE, date);

                    noteList.add(map);
                }

            }
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    runOnUiThread(new Runnable() {

        public void run() {
            ListAdapter adapter = new SimpleAdapter(AllNotes.this,
                    noteList, R.layout.list_item, new String[] {
                            KEY_NOTE_ID, KEY_NOTE_SUBJECT,
                            KEY_NOTE_DATE }, new int[] {
                            R.id.list_lbl_id, R.id.list_lbl_subject,
                            R.id.list_lbl_date });
            setListAdapter(adapter);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:33:59.800

最基本的方法是清空`noteList`并再次运行 AsyncTask。

1.  内部`onPreExecute()`（或第一行`doInBackground()`）调用：

    ```
    noteList = new ArrayList<Map<String, String>>(); // or noteList.clear(); 
    ```

2.  再次调用 AsyncTask 的`execute()`方法。

另外我不相信你需要使用`runOnUiThread()`in`onPostExecute()`因为它已经可以访问主线程。

# node.js - Moving all redis records

> ID：13367213
> 
> 赞同：1
> 
> 时间：2012-11-13T19:15:35.847
> 
> 标签：node.js, redis

I am using Node + Redis in a dynamically instanced cluster of these servers. When these servers are instanced(on separate vm's) I want to cut up the database. I have a hash ring function to point keys to the appropriate server.
How do I iterate over all the keys in the store?
Then when pushing that key thru the hash ring, how do I deal with the keys that are pushed back to the current server without causing an endless loop?
Will I need a new redis instance locally? and then kill the old one when the operation is finished? Is there a way for the node redis client to do this operation?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:30:26.883

Unfortunately there is no proper keyspace iteration in Redis so far. You have two options:

*   Use RANDOMKEY to random sample the dataset.
*   Use KEYS * that is blocking but can do the trick if you can block for a few seconds the server.

To atomically move a key you can use MIGRATE if you use Redis 2.6, however your cluster setup is not clearly specified in your question and to design a proper Redis cluster is full of details.

I suggest you to read the Redis Cluster specification here: [http://redis.io/topics/cluster-spec](http://redis.io/topics/cluster-spec) And the following blog post about creating a eventually consistent Redis cluster client-side: [http://antirez.com/news/36](http://antirez.com/news/36)

# php - 创建 PHP Composer 安装程序以提取到多个目录

> ID：13367228
> 
> 赞同：1
> 
> 时间：2012-11-13T19:17:04.400
> 
> 标签：php, composer-php

是否可以创建将代码放置在多个不同目录中的自定义 PHP Composer 安装程序？我想链接到这样设置的存储库：

/树干

*   /上市
*   /图书馆
*   /内容

和作曲家将其提取到

/我的项目/公共

/myproject/库

/我的项目/内容

那可能吗？我知道我需要一个自定义安装程序来执行此操作，但我不确定如何设置安装程序以从 repo 导出代码并将其放在多个不同的目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-22T14:51:53.730

如果仍然有问题，请考虑测试我的库（基于插件`mnsami`）：

[https://github.com/ideaconnect/composer-custom-directory](https://github.com/ideaconnect/composer-custom-directory)

允许自定义路径：

```
"extra":{
    "installer-paths":{
      "./monolog/": ["monolog/monolog"]
} 
```

甚至动态名称替换：

```
"extra": {
    "installer-paths": {
        "./packages/{$name}": ["sourcepackage/package_A","sourcepackage/package_B","sourcepackage/package_B"]
    }
}, 
```

带有标志链：

目前支持的标志是：

```
F - capitalizes first letter.
P - changes all entries of a _ or - followed by a character to only that character, capitalized. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T23:00:45.157

您可以创建一个自定义安装程序，负责将您的包安装到这些目录中。您可以使用包上的“类型”属性来指示要使用哪个自定义安装程序。自定义安装程序允许您在下载包后运行任何 PHP 代码，因此您可以在其中做任何您能想到的事情，特别是将不同的文件移动到不同的位置。有关创建自定义安装程序的更多详细信息，请参阅[http://getcomposer.org/doc/articles/custom-installers.md](http://getcomposer.org/doc/articles/custom-installers.md)

总的来说，尽管我同意人们对您的问题的评论，但您真的不应该从一开始就这样做。尝试重新构建您的项目，这样您就不需要此功能，您将为自己节省大量工作。

# objective-c - 如何在运行时找出屏幕上有哪些 UIVIews

> ID：13367230
> 
> 赞同：0
> 
> 时间：2012-11-13T19:17:24.397
> 
> 标签：objective-c, ios, xcode

我正在开发一个 iPhone 应用程序，该应用程序具有复杂的视图构建方式，我正处于一些 UI 行为不一致并且一些 UI 视图没有正确呈现的地步，没有深入了解很多细节，我我正在寻找一种在运行时找出屏幕上每个 UI 元素的方法，以及它的位置以及我可以获得的任何信息（UI 堆栈、分层、UIVIew 位于什么之上）是可用的开发商/

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:55:48.040

在调试控制台中，将`recursiveDescription`消息发送到您的最顶层视图。

```
(lldb) po [self.view recursiveDescription]
(id) $1 = 0x0929f000 <UIView: 0x944be30; frame = (0 20; 320 548); autoresize = RM+BM; layer = <CALayer: 0x944be90>>
   | <UITableView: 0xab02800; frame = (0 0; 320 548); clipsToBounds = YES; autoresize = W+H; gestureRecognizers = <NSArray: 0x9449920>; layer = <CALayer: 0x944bc70>; contentOffset: {0, 0}>
   |    | <UIImageView: 0x944c330; frame = (0 541; 320 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x944c390>>
   |    | <UIImageView: 0x944c440; frame = (313 404; 7 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x944c4e0>>
(lldb) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-02T20:38:46.883

![Spark Inspector 主视图](../Images/0b9fab41200652eb6bbb79ec50a13c6d.png)

我是名为[Spark Inspector](http://www.sparkinspector.com/)的工具的作者，该工具允许您在应用运行时查看应用的 UIView 并与之交互。我把它放在一起是因为我发现自己`-recursiveDescription`一直在使用并且倾注在控制台输出上很烦人——我认为这可能正是你所需要的。您无需调用`-recursiveDescription`，而是向您的应用程序添加一个框架，该框架允许检查器工具连接并显示您的视图。

我还建议检查其他两个工具：[PonyDebugger](https://github.com/square/PonyDebugger)和[DCIntrospect](https://github.com/domesticcatsoftware/DCIntrospect)。它们需要更多的设置，但如果您发现自己需要调试视图，它们都是救命稻草。

# asp.net-mvc - ASP.NET MVC 在 DisplayTemplate 中使用子类

> ID：13367239
> 
> 赞同：1
> 
> 时间：2012-11-13T19:18:07.307
> 
> 标签：asp.net-mvc, razor

我在让我的控制器在回发时识别子类模型时遇到问题。

我正在使用存储在数据库中的字段元数据创建一个动态 Web 表单。对于我的 ViewModel，我有两种父类型

```
public class Form
{
    public List<Question> Questions { get; set; }
}
public class Question
{
    public string QuestionText { get; set; }
} 
```

和问题的子类

```
public class TextBoxQuestion : Question
{
    public string TextAnswer { get; set; }
    public int TextBoxWidth { get; set; }
} 
```

我还有一个视图，它将表单类型作为模型和两个显示模板，一个用于问题，一个用于 TextBoxQuestion。

```
//Views/Form/index.cshtml
@model Form
@Html.DisplayFor(m => m.Questions) 
```

-

```
//Views/Shared/DisplayTemplates/Question.cshtml
@model Question
@if(Model is TextBoxQuestion)
{
    @Html.DisplayForModel("TextBoxQuestion")
} 
```

-

```
//Views/Shared/DisplayTemplates/TextBoxQuestion.cshtml
@model TextBoxQuestion
<div>
    @Model.QuestionText
    @Html.TextBoxFor(m => m.TextAnswer)
</div> 
```

当页面加载时，我的控制器创建一个 TextBoxQuestion 实例，将其添加到 Question 集合中，并将 Form 对象传递给视图。一切正常，文本框出现在页面上。

但是当我回发到控制器时，代码无法将问题识别为 TextBoxQuestion。它只将其视为父类型问题。

```
[HttpPost]
public ActionResult Index(Form f)
{
    foreach (var q in f.Questions)
    {
        if (q is TextBoxQuestion)
        {
            //code never gets here
        }
        else if (q is Form)
        {
            //gets here instead
        }
    }
} 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:12:04.190

模型绑定器将创建该方法期望的类型的实例。如果您想以这种方式使用子类和显示模板，您将需要编写自己的模型绑定器。

我建议检查一个或多个属性的存在以确定是否发布了一个`TextBoxQuestion`或`Question`。

模型粘合剂：

```
public class QuestionModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        Question result;
        ValueProviderResult text = bindingContext.ValueProvider.GetValue("TextAnswer");
        if (text != null) // TextAnswer was submitted, we'll asume the user wants to create a TextBoxAnswer
            result = new TextBoxQuestion { TextAnswer = text.AttemptedValue /* Other attributes */ };
        else
            result = new Question();

        // Set base class attributes
        result.QuestionText = bindingContext.ValueProvider.GetValue("QuestionText").AttemptedValue;
        return result;
    }
} 
```

然后将其连接到 Global.asax.cs：

```
ModelBinders.Binders.Add(typeof(Question), new QuestionModelBinder()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:24:52.590

在我看来，您一次只问一个问题。因此，当您最有可能发布您的信息时，您只会发送一个问题，而不是一组问题。将您的方法更改为：

```
[HttpPost]
public ActionResult Index(Question q)
{
    if (q is TextBoxQuestion)
    {
        //proces TextBoxQuestion
    }
    else if (q is Question)
    {
        //process generic question
    }
} 
```

# javascript - Javascript 横幅交换

> ID：13367247
> 
> 赞同：0
> 
> 时间：2012-11-13T19:19:06.623
> 
> 标签：javascript

该部分是 foo.com/agriculture。它有一个与 javascript 中的名称相对应的横幅图像。我需要内部页面 foo.com/agriculture/harvest 有一个单独的横幅，而不是 foo.com/agriculture。我正在使用的用于每个页面的横幅交换的脚本如下：

```
<script type="text/javascript"> 
var dir = location.pathname.split("/")[1]; 
//var dir2 = location.pathname;
if (dir == "agriculture")        
document.write('<IMG SRC="/images/ib_agriculture.jpg" WIDTH=1024 HEIGHT=91 BORDER=0>')  
else if (dir == "showcase")
document.write('<IMG SRC="/images/ib_show.jpg" WIDTH=1024 HEIGHT=91 BORDER=0>')  
else if (dir == "contact")      
document.write('<IMG SRC="/images/ib_contact.jpg" WIDTH=1024 HEIGHT=91 BORDER=0>')   
else if (dir == "distribution")     
</script> 
```

我尝试了以下不同的代码来尝试为内部页面 foo.com/agriculture/harvest 分配一个单独的横幅。

```
var dir = location.pathname.split("/")[1]; 
//var dir2 = location.pathname;
if (dir == "agriculture/harvest")        
document.write('<IMG SRC="/images/ib_agriculture_harvest.jpg" WIDTH=1024 HEIGHT=91 BORDER=0>')  
else if (dir == "showcase") 

var dir = location.pathname.split("/")[1]; 
//var dir2 = location.pathname;
if (dir == "harvest")        
document.write('<IMG SRC="/images/ib_agriculture_harvest.jpg" WIDTH=1024 HEIGHT=91 BORDER=0>')  
else if (dir == "showcase") 
```

上面的两个脚本继续抓取 foo.com/agriculture 横幅 (ib_agriculture.jpg) 而不是调用的 foo.com/agriculture/harvest (ib_agriculture_harvest.jpg)。我不确定如何让脚本每页调用适当的横幅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:30:14.380

当你调用 pathname.split 时，你会得到一个这样的数组：

```
["foo.com", "agriculture", "harvest"] 
```

然后，您将索引为 1 的项目放入`dir`变量中：

```
var dir = location.pathname.split("/")[1] 
```

所以 的值`dir`是“农业”，即使“收获”也是 url 的一部分。要检查该字符串，您需要使用`location.pathname.split("/")[2]`.

或者你可以这样做：

```
var parts = location.pathname.split("/");
var dir = parts[1]; 
if (parts.length > 2)
{
     dir += "/" + parts[2];
}
if (dir == "agriculture/harvest")        
     document.write('<IMG SRC="/images/ib_agriculture_harvest.jpg" WIDTH=1024 HEIGHT=91 BORDER=0>') 
```

# r - pair() 将标签移动到散点图的两侧

> ID：13367248
> 
> 赞同：2
> 
> 时间：2012-11-13T19:19:15.417
> 
> 标签：r

对于虹膜数据，我们使用pairs()函数得到散点图，如下所示：

```
pairs(iris[1:4], 
      main = "Edgar Anderson's Iris Data", 
      lower.panel=panel.pearson, 
      pch = 21, 
      bg = c("red", "green3", "blue")[unclass(iris$Species)]) 
```

函数 panel.pearson 定义如下：

`panel.pearson <- function(x, y, ...) { horizontal <- (par("usr")[1] + par("usr")[2]) / 2; vertical <- (par("usr")[3] + par("usr")[4]) / 2; text(horizontal, vertical, format(abs(cor(x,y)), digits=2)) }`

我需要将下面板转换为相关矩阵并从对角线上删除标签并将它们放在右轴和下轴上。我尝试了以下方法：

```
pairs(iris[1:4], 
      main = "Edgar Anderson's Iris Data", 
      labels=NULL, 
      lower.panel=panel.pearson, 
      xaxt='n', 
      yaxt='n', 
      pch = 21, 
      bg = c("red", "green3", "blue")[unclass(iris$Species)]) 
```

这给了我我需要的东西。除了我不明白如何获取底部和右侧轴上的标签（变量标签，我的意思是 Sepal.Length、Sepal.Width 等）。非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:18:18.860

这是你的想法吗？

```
# Horizontal axis
text(seq(.2, 2, length.out=4), 0,
     c("Sepal Length","Sepal Width","Petal Length","Petal Width"),
     xpd=TRUE, adj=c(0,.5), cex=.9)

# Vertical axis
text(0, seq(0.35, 2.05, length.out=4),
     rev(c("Sepal Length","Sepal Width","Petal Length","Petal Width")),
     xpd=TRUE, adj=c(0.5, 0), 
     srt=90,  # rotates text to be parallel to axis
     cex=.9) 
```

我通过反复试验定位标签。可能有更好的方法，但至少这会将标签放在（几乎）正确的位置。

**更新**：一个[新的 SO 问题](https://stackoverflow.com/questions/13652161/how-can-i-use-a-jpg-or-other-format-image-as-a-background-in-a-histogram-using)让我想到了一种更好的方式来定位轴标签。正如链接的答案所指出的，您可以使用 获取绘图区域的当前坐标`par('usr')`。所以这里是对代码的更新，基于此：

```
x.coords = par('usr')[1:2]
y.coords = par('usr')[3:4]

# Offset is estimated distance between edge of plot area and beginning of actual plot
x.offset = 0.03 * (x.coords[2] - x.coords[1])  
xrng =  (x.coords[2] - x.coords[1]) - 2*x.offset
x.width = xrng/4  

y.offset = 0.028 * (y.coords[2] - y.coords[1])
yrng =  (y.coords[2] - y.coords[1]) - 2*y.offset
y.width = yrng/4  

# seq function below calculates the location of the midpoint of each panel

# x-axis labels
text(seq(x.coords[1] + x.offset + 0.5*x.width, x.coords[2] - x.offset - 0.5*x.width,
         length.out=4), 0,
     c("Sepal Length","Sepal Width","Petal Length","Petal Width"),
     xpd=TRUE,adj=c(.5,.5), cex=.9)

# y-axis labels
text(0, seq(y.coords[1] + y.offset + 0.5*y.width, y.coords[2] - 3*y.offset - 0.5*y.width, 
     length.out=4),
     rev(c("Sepal Length","Sepal Width","Petal Length","Petal Width")),
     xpd=TRUE, adj=c(0.5, 0.5), 
     srt=90,  # rotates text to be parallel to axis
     cex=.9) 
```

它仍然不理想，因为偏移量的大小是通过反复试验确定的。如果有人知道 R 如何确定绘图区域边界与实际绘图开始位置之间的偏移大小，那么偏移也可以通过编程方式确定。

# c# - WPF窗口阴影效果

> ID：13367249
> 
> 赞同：25
> 
> 时间：2012-11-13T19:19:18.467
> 
> 标签：c#, wpf, effects, shadow

我是 WPF 技术的新手。我在 WPF 中有以下窗口声明：

```
<Window x:Class="CustomWindows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="480" Width="640" ScrollViewer.VerticalScrollBarVisibility="Disabled" WindowStyle="None" AllowsTransparency="True">
    <Window.Effect>
        <DropShadowEffect BlurRadius="15" Direction="-90" RenderingBias="Quality" ShadowDepth="2"/>
    </Window.Effect>
    <Grid>

    </Grid>
</Window> 
```

但是当我运行它时，阴影不会出现。我能做什么，或者错误在哪里？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-13T19:33:18.797

`DropShadowEffect`不能应用于`Window`. 相反，如果要覆盖默认窗口外观，则必须将效果应用于窗口中包含的其他一些元素：

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" WindowStyle="None"
        AllowsTransparency="True" Background="Transparent">

    <Grid Margin="20" Background="Red">
        <Grid.Effect>
            <DropShadowEffect BlurRadius="15" Direction="-90"
                              RenderingBias="Quality" ShadowDepth="2"/>
        </Grid.Effect>
        ...

    </Grid>
</Window> 
```

# facebook - Facebook Open graph App 被拒绝 3 次，原因不明

> ID：13367250
> 
> 赞同：0
> 
> 时间：2012-11-13T19:19:22.187
> 
> 标签：facebook, facebook-opengraph

我在[http://apps.facebook.com/chatboss/](http://apps.facebook.com/chatboss/)开发了一个 facebook 聊天应用程序。

我的聊天操作是`chat`，对象是。`chat room`它在我创建的 10 多个测试用户中运行良好。但是每次我提交它以供批准时，它都会被拒绝说

```
App is not Performing actions that is mentioned,Please test with auth test users before submitting again 
```

但是活动一直在发布。下面是屏幕截图。

![在此处输入图像描述](../Images/4f5cefb88d73c3e89b85e71a8b816903.png)

附言：

---> 我已经创建了 10 多个测试用户，并且它们都可以正常工作。

---> 我确信 Facebook 团队可以成功进入我的应用程序（他们在我的聊天应用程序 xD 中与他们的身份验证用户发布消息作为“测试”）

---> 出于同样的原因，它被拒绝了 3 次。我不知道他们正在测试什么测试用户：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:48:20.433

让 facebook 的人告诉你他们使用哪些用户 ID 来测试并使用那个确切的用户进行测试。请记住：

*   当您在应用程序管理面板中“创建”一个测试用户并“授权”它时，它不会分配所需的权限（例如流帖子等）。所以你需要在你的应用程序中分别检查权限和范围（通过 js-sdk 或 php-sdk 等）
*   测试用户不能与普通用户交互，反之亦然。所以请记住，您的聚合应该在两个测试用户之间做一些事情
*   测试用户无法点赞页面，因此不要将您的应用置于点赞门之后。

# algorithm - 对范围列表执行查找

> ID：13367251
> 
> 赞同：0
> 
> 时间：2012-11-13T19:19:25.547
> 
> 标签：algorithm

我有一个要查询的范围列表。范围是有序的，不重叠。

前任：

1-10、11-17、18-20、21-30等...

目前我使用修改后的二进制搜索。但是我现在有一个新列表……除了不重叠的范围之外，新列表现在可以被位掩码。

前任：

0-255、256-287、288-303等...

有几千个范围，以大约 500,000 结尾

我将在 c 中实现它，但语言并不重要。我只是在寻找一些关于如何利用这个新属性的想法。有没有人遇到过这个/读过它？如果有人有任何想法，他们将是最受欢迎的。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:40:03.863

保存一个大小为 500000 的位向量怎么样？这将需要大约 61kb。

然后您可以通过执行 AND 来查询一个数字是否在 O(1) 的范围内。您还可以同时查询多个值。此外，设置范围位向量将非常快，因为您不需要排序。

# objective-c - UICollectionView 上的 UISwipeGestureRecognizer 不起作用

> ID：13367254
> 
> 赞同：0
> 
> 时间：2012-11-13T19:19:36.553
> 
> 标签：objective-c, ios

我尝试将 UISwipeGestureRecognizer 添加到我以编程方式创建的 UIColletionView 中，但识别器从未调用该操作。这是我的代码。

```
UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
flowLayout.scrollDirection = UICollectionViewScrollDirectionVertical;
self.currentCollectionView = [[UICollectionView alloc] initWithFrame:CGRectMake( 0.0f, 54.0f, 320.0f, 470.0f) collectionViewLayout:flowLayout];
[self.currentCollectionView setBackgroundColor:[UIColor whiteColor]];
self.currentCollectionView.delegate = self;
self.currentCollectionView.dataSource = self;
self.currentCollectionView.showsHorizontalScrollIndicator = NO;
self.currentCollectionView.showsVerticalScrollIndicator = NO;
self.currentCollectionView.scrollEnabled = YES;
self.currentCollectionView.bounces = YES;
[self.currentCollectionView setBackgroundColor:[UIColor lightGrayColor]];
[self.currentCollectionView registerClass:[TripexpPhotoCell class] forCellWithReuseIdentifier:@"photoCell"];
[self.view addSubview:self.currentCollectionView];
self.swipeUpRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipeUp:)];
self.swipeUpRecognizer.numberOfTouchesRequired = 1;
[self.swipeUpRecognizer setDirection:UISwipeGestureRecognizerDirectionUp];

self.swipeDownRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipeDown:)];
self.swipeDownRecognizer.numberOfTouchesRequired = 1;
[self.swipeDownRecognizer setDirection:UISwipeGestureRecognizerDirectionDown];

[self.currentCollectionView addGestureRecognizer:self.swipeDownRecognizer];
[self.currentCollectionView addGestureRecognizer:self.swipeUpRecognizer]; 
```

这是同时接收相同识别器的函数和委托

```
#pragma mark - UISwipeGestureRecognizer Action
-(void)didSwipeUp: (UISwipeGestureRecognizer*) recognizer {
    NSLog(@"Swiped Up");
}

-(void)didSwipeDown: (UISwipeGestureRecognizer*) recognizer {
    NSLog(@"Swiped Down");
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer     shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    NSLog(@"Asking permission");
    return YES;
} 
```

我还在 UICollectionView 内部循环并检查是否有任何现有的 UISwipeGestureRecognizer 但我没有找到。所以在我附加了我的 2 个识别器之后，我看到了那些 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:43:13.517

我知道这是一篇旧帖子，但这可能会对某人有所帮助，所以我在这里给出我的解决方案。

UICollectionView 继承自 UIScrollView。您需要先禁用滚动

```
self.currentCollectionView.scrollEnabled = FALSE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:27:37.273

尝试：

```
[self.currentCollectionView addGestureRecognizer:self.swipeDownRecognizer]; 
```

你也不是当前添加 swipeUpRecognizer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-20T14:10:07.600

错误的方法@aobs。它不适用于希望滚动作为默认值并根据滑动执行更多操作的人。在我的情况下，我必须在手动滑动的情况下停止自动滚动行为，但在所有情况下都允许手动滚动。（典型的促销报价行为）。

我认为

```
self.swipeDownRecognizer.delegate=self
self.swipeUpRecognizer.delegate=self 
```

是代码中缺少的东西，因为没有委托

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer     shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    NSLog(@"Asking permission");
    return YES;
} 
```

在调试器中没有受到影响。

我知道这是一个旧答案，但我希望它可以帮助搜索这个的人。

# html - Wordpress 的动态网格照片库无法正确显示图像

> ID：13367258
> 
> 赞同：0
> 
> 时间：2012-11-13T19:20:04.030
> 
> 标签：html, css, wordpress

我的一个 wordpress 页面有问题。我正在尝试显示图片库，但没有显示完整的图片，我不明白是什么问题。

请指导我

[http://www.photographercourses.org/portrait-photography/](http://www.photographercourses.org/portrait-photography/)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:27:12.063

在你的 css genesis18.css:545 你有这个：

```
.entry-content {
    overflow: hidden;
} 
```

如果你删除它，它会起作用，但你可能会破坏其他东西，这取决于你的主题和页面内容！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:28:24.313

我不确定您指的是什么图片，但您提供的页面上有几个错误。您提供的路径似乎不正确。确保检查路径并***始终***检查您的控制台...

![在此处输入图像描述](../Images/1241b7897cb41156ee22e430a45e0c90.png)

# jquery - 通过 jquery 使 div 可编辑适用于除 IE7+ 之外的所有浏览器

> ID：13367263
> 
> 赞同：1
> 
> 时间：2012-11-13T19:20:25.927
> 
> 标签：jquery

我正在使用可编辑的 jquery 插件（http://www.tectual.com.au/posts/7/jQuery-Editable-Plugin-Best-In-Place-Editor-.html）

当使用以下代码使 div 可编辑时，它似乎只适用于除 IE 之外的所有浏览器。

有趣的是，在作者的插件网站上，我在 IE 中对其进行了测试，该插件似乎工作正常，所以我想知道它是否与我正在做的事情有关？

这是 jQuery

```
$(document).ready(function() {
 $('.edit').editable('', {
     indicator : 'Saving...',
     onblur : 'submit',
     style   : 'display: inline'
 });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:23:40.753

`div`无需使用任何js即可设置为可编辑。设置`contentEditable = "true"`，你就完成了。

```
<div style="width:200px;height:300px;border:2px solid red;" contentEditable="true"></div> 
```

# php - 登录表单在电子邮件和密码不匹配或电子邮件不存在时显示消息

> ID：13367265
> 
> 赞同：0
> 
> 时间：2012-11-13T19:20:29.773
> 
> 标签：php, login, user-input, verify

我有一个登录表单，当密码输入错误但电子邮件不正确时会显示一条消息。但是当电子邮件或两者都不正确时，它不会显示任何内容。我希望它在这两种情况下都显示消息（“密码和电子邮件不匹配”）丢失。我真的很感激任何帮助。

```
 <div id="container">
            <div>
                <h1>Log In</h1>
                <form method="POST" action="logIn.php">
                    <label>Email</label>
                    <input name= "txtEmail"/>
                    <label>Password</label>
                    <input type="password" name="txtPass"/>
                    <input type= "submit" name= "submit" value="Log In"/>
                </form>
            </div>  
        </div>

<?php

    require ('connection.php');

            if (isset($_POST["txtEmail"]))
            {
            $email= $_POST["txtEmail"];//NO RECONOCE LOS TEXT FIELDS!!
            }
            else
            {$email= "";
            echo "Email empty";}

            if (!empty($_POST['txtPass']))
            {
            $pass= $_POST['txtPass'];
            }
            else
            {$pass= "";
            echo "Password empty.";}

            // Enviar consulta
              $instruction = "SELECT Password, Email FROM customer WHERE Email = '". $email . "'";
              $query = mysql_query ($instruction, $connection)
                 or die ("Fallo en la consulta");       
           // Mostrar resultados de la consulta
              $nrows = mysql_num_rows ($query);
              if ($nrows > 0)
              {
                    $result = mysql_fetch_array ($query);
                    if (isset($result['Password']))
                    {
                    $clave = $result['Password'];
                    //echo "Isset password works.";
                    }
                    else {$result= "";}
                    Email doesnt exist, or ;}

                    if ($clave == $pass){
                        header('Location: welcomeLogIn.php');
                    }
                    else{
                        echo "Password or Email doesnt match.";
                    }
              }
    mysql_close($connection);
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:33:42.437

感谢您提供代码供我们审核。根据代码，我可以看到您刚刚开始学习 PHP。我已经用一种非常简单的方法更新了你的代码来完成你所要求的事情。基本上，如果电子邮件或密码为空，那么它会将 $empty_value 变量设置为 1。然后在脚本结束时检查 $empty_value 变量是否等于 1。如果是您想要的消息将是打印。请注意，您的代码存在许多安全问题，我建议阅读以下指南中的所有信息：http: [//phpsec.org/projects/guide/](http://phpsec.org/projects/guide/)。

```
<?php

    require ('connection.php');
$empty_value = 0;

            if (isset($_POST["txtEmail"]))
            {
            $email= $_POST["txtEmail"];//NO RECONOCE LOS TEXT FIELDS!!
            }
            else
            {$email= "";
            $empty_value = 1;}

            if (!empty($_POST['txtPass']))
            {
            $pass= $_POST['txtPass'];
            }
            else
            {$pass= "";
            $empty_value = 1;}

            // Enviar consulta
              $instruction = "SELECT Password, Email FROM customer WHERE Email = '". $email . "'";
              $query = mysql_query ($instruction, $connection)
                 or die ("Fallo en la consulta");       
           // Mostrar resultados de la consulta
              $nrows = mysql_num_rows ($query);
              if ($nrows > 0)
              {
                    $result = mysql_fetch_array ($query);
                    if (isset($result['Password']))
                    {
                    $clave = $result['Password'];
                    //echo "Isset password works.";
                    }
                    else {$result= "";}
                    Email doesnt exist, or ;}

                    if ($clave == $pass){
                        header('Location: welcomeLogIn.php');
                    }
                    else{
                        echo "Password or Email doesnt match.";
                    }
              }
    mysql_close($connection);
    ?>

<?php
if ($empty_value == 1) {
echo "Password or Email doesn't match.";
}
?>

  <div id="container">
            <div>
                <h1>Log In</h1>
                <form method="POST" action="logIn.php">
                    <label>Email</label>
                    <input name= "txtEmail"/>
                    <label>Password</label>
                    <input type="password" name="txtPass"/>
                    <input type= "submit" name= "submit" value="Log In"/>
                </form>
            </div>  
        </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:34:23.390

如果没有匹配的电子邮件，那么您将不会得到任何结果，因此您可以简单地添加：

```
if ($nrows > 0)
{
   //You current code to check if the password is correct                 
}
else{
  echo "No matching email found";
} 
```

# ruby-on-rails - 在访问两个模型的一个控制器中创建逻辑

> ID：13367272
> 
> 赞同：0
> 
> 时间：2012-11-13T19:21:14.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有三个模型，`Artwork`、`ArtworkTag`和`Tag`，其中表示和`ArtworkTag`之间的 m:n 关系。仅存储标签名称，即.`Artwork``Tag``Tag``:tag`

从 中创建标签时`ArtworkTagsController`，需要先查看表中是否`:tag`存在，`tags`如果不存在则创建，然后使用标签`id`在 中建立关系`ArtworkTag`。

下面你可以看到我`Tag`直接从这个控制器调用，我认为这不是正确的做法。

我应该如何通过适当的关注点分离来处理这种情况？

```
def create
  tag = params[:artwork_tag][:tag].downcase
  @tag = Tag.find_by_tag(tag)

  if @tag.blank?
    @tag = Tag.new(:tag => tag)
    @tag.save
  end

  artwork_id = params[:artwork_tag][:artwork_id]
  user_id = params[:artwork_tag][:user_id]

  artwork_tag = {
    "tag_id" => @tag.id,
    "artwork_id" => artwork_id,
    "user_id" => user_id
  }

  @artwork_tag = ArtworkTag.new(:tag_id => @tag.id, :artwork_id => artwork_id, :user_id => user_id)
  @artwork_tag.save
  respond_to do |format|
    format.json { render :json => {
      "id" => @artwork_tag.id, "tag" => @tag.tag, "artwork_id" => artwork_id },
      :status => :created }
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:46:40.127

我会做这样的事情：

```
def create
  artwork_tag = ArtworkTag.create(
    :tag => Tag.find_or_create_by_tag(params[:artwork_tag][:tag].downcase),
    :artwork_id => params[:artwork_tag][:artwork_id],
    :user_id => params[:artwork_tag][:user_id]
  )

  respond_to do |format|
    format.json { render :json => { :artwork_tag => artwork_tag } }
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:17:52.650

我不确定我是否理解您的问题，但是您可以使用`first_or_create`方法检查记录是否已经存在，如果不存在，它将创建新记录。你可以替换这个：

```
@tag = Tag.find_by_tag(tag)

if @tag.blank?
  @tag = Tag.new(:tag => tag)
  @tag.save
end 
```

只有一行：（我不使用实例变量，因为我认为您不需要在视图中使用它，如果您只需将其更改为`@tag`并在参数中更改为`tag_id: @tag.id`）

```
tag = Tag.where(tag: tag).first_or_create() 
```

我看到你定义`artwork_tag`了，但为什么你不使用它？我认为您可以替换：

```
artwork_tag = {
  "tag_id" => @tag.id,
  "artwork_id" => artwork_id,
  "user_id" => user_id
}

@artwork_tag = ArtworkTag.new(:tag_id => @tag.id, :artwork_id => artwork_id, :user_id => user_id)
@artwork_tag.save 
```

使用此代码：

```
params = { artwork_tag: { 
                          tag_id: tag.id, 
                          artwork_id: artwork_id, 
                          user_id: user_id  } }
@artwork_tag = ArtworkTag.create(params[:artwork_tag]) 
```

# vba - 宏完成后 VBA 保留实例 (Excel)

> ID：13367273
> 
> 赞同：2
> 
> 时间：2012-11-13T19:21:17.327
> 
> 标签：vba, excel, scope, instance

我有一些我自己的对象，我`ThisWorkbook`在 Excel 中实例化了这些对象。我遇到[了一些麻烦](https://stackoverflow.com/questions/13365758/vba-change-instance-variable-from-module-excel)，我认为问题在于 VBA 在宏结束后立即杀死我的实例。

我们正在使用`ThisWorkbook`：

*   如果我在宏中定义我自己的变量`ThisWorkbook`，该变量的值会在宏完成后返回到初始化值，即使该变量在类中`ThisWorkbook`而不是在模块中是 Dim'd。（即 0、Nothing 等）

*   如果我在事件中实例化一个对象`ThisWorkbook`，`Workbook_Open()`则该对象在事件完成触发时被销毁。同样，即使变量在类中变暗`ThisWorkbook`而不是在子类中`Workbook_Open()`

我可以做些什么来确保这些对象存活并且这些变量保留它们的值吗？

在`ThisWorkbook`：

```
'Object we want to survive
Dim myInstance As MyObject

Private Sub Open_Workbook()
    Set myInstance = new MyObject ' Object is instantiated
End Sub

' Macro 1
Public Sub MyMacro()
    Set myInstance = new MyObject ' Object is instantiated
End Sub

' Macro 2
Public Sub CheckInstance()
    If Not myInstance is Nothing Then
        MsgBox "I found an instance!"
    End If
End Sub 
```

打开工作簿或运行宏 1 都不会导致宏 2 找到 myInstance。在这两种情况下，Macro2 都会认为 myInstance 是 Nothing。只有在宏 1 或 Open_Workbook（在它们的 End Sub 之前）调用宏 2 时，它才会找到 myInstance。我需要解决这个问题。（我从单独的表单按钮运行这些宏，而不是在其他宏中。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:34:57.417

是的，您需要在宏之外创建变量。

否则，它们将始终在宏结束时被销毁。

```
'will be available as long the file is open
Private lngTest as long

Private Sub Worksheet_Change()
    'will be available as long as routine is running   
    Dim lngTest2 as long
    lngTest = lngTest + 1
    lngTest2 = lngTest2 + 1

    debug.print lngTest
    debug.print lngTest2
End Sub 
```

因为您在谈论`Workbook_Open`-保存变量，即使通过关闭和重新打开工作簿，您也需要另一个构造。我的建议是将它们存储在工作表中，但我相信还有其他方法。

*编辑：*

用这个测试你发布的代码 - 工作正常，找到实例。

MyObject 作为一个类：

```
Private lngTest As Long

Public Property Get test() As Long
    test = lngTest
End Property

Public Property Let test(ByVal lngValue As Long)
    lngTest = lngValue
End Property 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:51:05.207

在 VBA 编辑器 ( ) 中为项目创建一个新模块`Module1`，并插入以下代码：

```
Dim testVar As Integer

Sub Test()
    testVar = testVar + 1
    MsgBox testVar
End Sub 
```

然后添加一行，例如 Worksheet 的 Activate 或 Open 事件：

```
Module1.Test 
```

它对我有用，每次激活工作表时值都会增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T05:15:39.247

为什么不尝试使用数组？您将其从宏中调暗，它将保留数据，直到您使用另一个宏清除它或关闭工作簿。

# php - magento - 将静态块添加到发票文档

> ID：13367276
> 
> 赞同：0
> 
> 时间：2012-11-13T19:21:19.223
> 
> 标签：php, magento, block

我想将 Magento CMS 静态块的内容添加到发送给客户的发票中。我创建了一个名为 my_invoice_message 的静态块。

如何将内容推送到发票并放置？该模板称为 /sales/order_new.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:24:47.553

它与在 cms/page 中注入它的语法相同：

```
 {{block type="cms/block" block_id="id-of-your-block" }} 
```

# python - 将列表转换为元组也转换列表中的列表

> ID：13367279
> 
> 赞同：1
> 
> 时间：2012-11-13T19:21:36.803
> 
> 标签：python, list, type-conversion, tuples

在 Python 中将列表转换为元组的一种简单方法是：

```
tuple1=tuple(list1) 
```

但如果 list1 包含一个或多个列表，则它们保持不变。有没有办法我们也可以转换它们？例如

```
list1=[1,3,'abc',[3,4,5]] 
```

去：

```
tuple1=(1,3,'abc',(3,4,5)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T19:23:26.127

这里只需要递归：

```
def convert(l):
    return tuple(convert(x) for x in l) if type(l) is list else l 
```

```
>>> convert([1,3,'abc',[3,4,5]])
(1, 3, 'abc', (3, 4, 5))
>>> convert([[[[[[]]]]]])
((((((),),),),),)
>>> convert(42)
42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:24:17.753

用于`isinstance()`查看元素是否为列表：

```
In [64]: lis=[1,3,'abc',[3,4,5]]

In [66]: tuple(tuple(x) if isinstance(x,list) else x for x in lis)
Out[66]: (1, 3, 'abc', (3, 4, 5)) 
```

# actionscript-3 - Flex 4：为 ButtonBar 创建透明皮肤

> ID：13367280
> 
> 赞同：1
> 
> 时间：2012-11-13T19:21:37.693
> 
> 标签：actionscript-3, apache-flex

我正在为我的 ButtonBar 组件创建皮肤，因为我需要使用工具提示。如何让它透明？如何删除除标签和工具提示之外的所有绘图？

感谢您提供任何有用的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:40:22.250

您需要为按钮创建单独的皮肤。第一个按钮、中间按钮和最后一个按钮有一个皮肤。使它们透明以及您想要的任何样式。这是有关它的文档的链接： [Button Bar and Tab Control Skins](http://help.adobe.com/en_US/flex/using/WSc2368ca491e3ff92-59bf082612135c9e688-8000.html#WS685c4ccbb85d340c37aa4c55121d51f471a-8000)

# geometry - 具有一种几何形状和不同纹理的多个网格

> ID：13367287
> 
> 赞同：2
> 
> 时间：2012-11-13T19:21:55.710
> 
> 标签：geometry, textures, three.js, mesh

我有一个循环，在其中创建具有不同几何形状的多个网格，因为每个网格都有一个纹理。

```
for( var i = 0; i < voxels.length; i++ ){
  texture = almacen.textPlaneTexture(voxel.texto,color,voxelSize);
  material = new THREE.MeshBasicMaterial({ map: texture });                       
  object = new THREE.Mesh(new THREE.CubeGeometry(voxelSize, voxelSize, voxelSize, 1, 1, 1, new THREE.MeshBasicMaterial() ), material);
} 
```

我有一个性能问题，我认为如果我只能创建一个几何图形，我会得到更好的结果。但我不知道如何为每个网格创建一个几何图形并使每个网格具有不同的纹理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:31:37.013

您的网格都可以共享一个几何图形，如下所示：

```
var geometry = new THREE.CubeGeometry( 10, 10, 10 );

for( var i = 0; i < N; i++ ) {

    texture = new THREE.Texture( ... );

    material = new THREE.MeshBasicMaterial( { map: texture } );   

    mesh = new THREE.Mesh( geometry, material );

    scene.add( mesh );

} 
```

然后，如果要更改纹理，请执行以下操作：

```
var texture = new THREE.Texture( ... );
texture.needsUpdate = true;

mesh.material.map = texture; 
```

三.js r.52

# perl - Perl，读取文件并将内容插入电子邮件正文

> ID：13367288
> 
> 赞同：2
> 
> 时间：2012-11-13T19:22:05.407
> 
> 标签：perl

我面临着小的挑战，但时间在流逝，而不是一个真正的 perl 人，所以欢迎任何帮助。我所拥有的是检查所有正在运行的进程并在 /tmp/error 中写入状态的脚本然后我有 perl 脚本来通过外部 stmp 发送带有附件的电子邮件，但我需要的是穿透 /tmp/error 并将其放入的代码在电子邮件正文中，因此不需要附件。这是我发现的>这将文件作为附件发送，但我需要在正文中。

```
 #!/usr/bin/perl

use MIME::Lite;

# Set this variable to your smtp server name 
my $ServerName = "smtp.comcast.net"; 

my $from_address = 'me@comcast.net';
my $to_address   = 'me@hotmail.com';
my $subject      = 'MIME Test: Text';
my $mime_type    = 'text';
my $message_body = "Testing text in email.\n";

# Create the initial text of the message
my $mime_msg = MIME::Lite->new(
   From => $from_address,
   To   => $to_address,
   Subject => $subject,
   Type => $mime_type,
   Data => $message_body
   )
  or die "Error creating MIME body: $!\n";

# Attach the text file
my $filename = 'C:\tmp\test.txt';
my $recommended_filename = 'test.txt';
$mime_msg->attach(
   Type => 'application/text',
   Path => $filename,
   Filename => $recommended_filename
   )
  or die "Error attaching text file: $!\n";

# encode body of message as a string so that we can pass it to Net::SMTP.
my $message_body = $mime_msg->body_as_string();

# Let MIME::Lite handle the Net::SMTP details
MIME::Lite->send('smtp', $ServerName);
$mime_msg->send() or die "Error sending message: $!\n"; 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:29:09.697

只需将文件内容添加到您的`$message_body`，对吗？

```
my $message_body = "Testing text in email.\n";
{
  local $/ = undef;
  open FILE, "file" or die "...: !$";
  $message_body .= <FILE>;
  close FILE;
} 
```

如果该文件太大，请小心。

# javascript - 如何从日期数组中获取平均时间？

> ID：13367289
> 
> 赞同：1
> 
> 时间：2012-11-13T19:22:22.627
> 
> 标签：javascript, date, math, underscore.js, unix-timestamp

我正在尝试为 xml 站点地图生成“changefreq”。每次我保存一个页面时，我都会在“save_history”数组中添加一个日期，它会为我提供一个可以使用的日期列表。最初我以为我只需将所有日期相加并除以长度，但这只是给了我自 1970 年 1 月 1 日以来的平均时间。如何修复此功能以获取日期*之间*的平均时间？

[http://jsfiddle.net/jwerre/pAfdM/19/](http://jsfiddle.net/jwerre/pAfdM/19/)

或者

```
 getChangeFequency = function(history) {

    var sum = _.reduce(history, function(memo, num) {
      return memo + num.getTime();
    }, 0);
    var average = sum / history.length;
    var hours = average / 3600000;

    console.log("totals:", sum, average, hours); // 20292433147523 1352828876501.5334 375785.7990282037

    if (hours > 17532) {
      return "never";
    } else if ((8766 < hours && hours > 17531)) {
      return "yearly";
    } else if ((730 < hours && hours > 8765)) {
      return "monthly";
    } else if ((168 < hours && hours > 729)) {
      return "weekly";
    } else if ((24 < hours && hours > 167)) {
      return "daily";
    } else if ((1 < hours && hours > 23)) {
      return "hourly";
    } else {
      return "always";
    }
  };

  save_history = [ Tue Nov 13 2012 09:47:39 GMT-0800 (PST), Tue Nov 13 2012 09:47:44 GMT-0800 (PST), Tue Nov 13 2012 09:47:45 GMT-0800 (PST), Tue Nov 13 2012 09:47:46 GMT-0800 (PST), Tue Nov 13 2012 09:47:47 GMT-0800 (PST) ]

  getChangeFrequency(save_history) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T19:35:17.100

> 如何修复此功能以获取日期之间的平均时间？

由于您的历史是一个排序的日期数组，因此可以轻松计算平均时间跨度：

```
(_.last(history) - history[0]) / (history.length - 1) 
```

这在数学上等同于构建一个区间数组并对它们进行平均。结果以毫秒为单位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:34:35.563

建立一个区间数组。所以假设它`history`是从最早到最晚的更改日期排序的，它可能看起来像这样

```
var intervals = [];
for (i = 0; i < history.length - 1; i++) {
  intervals[i] = history[i+1].getTime() - history[i].getTime();
}

var sum = _.reduce(intervals, function(memo, num) {
  return memo + num;
}, 0);

var average = sum / intervals.length;
var hours = average / 3600000; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:28:53.683

> 如何修复此功能以获取日期之间的平均时间？

1.  从您现有的数据集中，生成一个新数组，它是原始数据中每个日期之间的时间差。
2.  使用这个新生成的数据集，找到平均值。
3.  计算相对于 1970 年午夜的时间值。也就是说，如果计算的平均值是 1970 年 1 月 2 日下午 2:03，则差值为 1 天 14 小时 3 分钟。

# php - 带有“#”符号（哈希符号）的 Symfony 路由

> ID：13367294
> 
> 赞同：1
> 
> 时间：2012-11-13T19:22:45.217
> 
> 标签：php, symfony-1.4, url-routing

我正在起诉 Symfony 1.4 并且在添加带有“#”（哈希）符号的路由时遇到问题

我希望路线例如：

```
mydomain.com/#example 
```

它应该导致：

```
module : example
action : index 
```

我应该如何使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:27:23.217

从[文档](http://symfony.com/legacy/doc/gentle-introduction/1_4/en/09-Links-and-the-Routing-System)：

```
<?php echo link_to('my article', 'article/read', array(
  'query_string' => 'title=Finance_in_France',
  'anchor' => 'foo'
)) ?>
=> <a href="/article/read?title=Finance_in_France#foo">my article</a>

<?php echo link_to('my article', 'article/read?title=Finance_in_France#foo') ?>
=> <a href="/routed/url/to/Finance_in_France#foo">my article</a> 
```

# wordpress - 没有后端的 Wordpress 编辑器

> ID：13367296
> 
> 赞同：0
> 
> 时间：2012-11-13T19:22:55.817
> 
> 标签：wordpress

我有一个奇怪的问题，假设我在 wordpress 的后端创建了一个名为“Favorite Foods”的新部分，其中包含“Location”、“Food”、“Verified”字段。注册到我网站的人将成为编辑，而不是成为定向到后端被重定向到一个页面，其中填写的信息与标记为“Favorite Foods”的部分相同的信息，但“已验证”布尔项除外。这些编辑器能否从我创建的那些页面中填写此信息并填充该部分在 wordpress 中？如果是这样，批准/拒绝他们应该只是一个是/否编辑。但如果可能的话，有人可以指出我在将表单链接到 wordpress 部分方面的帮助方向。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:17:41.013

一年多前我做过类似的事情，用户可以将他们的公司发布为新的 WordPress 项目。我这样做的方式是这样的：

*   为用户创建一个编辑页面以填写有关项目的信息，例如使用页面模板
*   在您`functions.php`创建一个运行的函数中，如果发送任何帖子数据
*   使用[wp_insert_post()](http://codex.wordpress.org/Function_Reference/wp_insert_post)创建一个新项目，最好作为您的自定义帖子类型
*   将帖子插入为`pending`，以便新帖子不会立即发布

这样，您可以从后端批准新帖子。此外，您的用户不需要具有“编辑”状态/用户角色（您不想这样做！！）。

让用户访问后端是一个非常微妙的话题。请务必阅读关于[nonce](http://codex.wordpress.org/Wordpress_Nonce_Implementation)的内容并实施类似验证码的内容，以提供基本的安全性并避免垃圾邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-28T10:26:32.357

我使用前端编辑器做了一个项目。正如@martinczerwi 所说，您必须维护访问权限（角色管理）。

## 这是我的代码示例，请从 id 获取想法，我想您了解编码

```
if(isset($_POST['submitted']) && isset($_POST['post_nonce_field']) && wp_verify_nonce($_POST['post_nonce_field'], 'post_nonce')) {
    $cpostStatus = 'draft';
    if(isset($_POST['proStatus'])){
        $cpostStatus = trim($_POST['proStatus']);
    }
    if(trim($_POST['projectName']) == '') {
        $projectNameError = 'Please enter a Project Name.';
        $hasError = true;
    } else {
        $projectName = trim($_POST['projectName']);
    }

    if(!$hasError){
        $post_information = array(
        'post_title' => esc_attr(strip_tags($_POST['projectName'])),
        'post_content' => esc_attr(strip_tags($_POST['projectDescription'])),
        'post-type' => 'post',
        'post_status' => $cpostStatus
        );

        **$post_id = wp_insert_post($post_information);**

        if($post_id)
        {

            // Update Custom Meta - your custom data
            update_post_meta($post_id, 'citerp_start_date', esc_attr(strip_tags($_POST['startDate'])));

            // Redirect
            wp_redirect( home_url('/projects') ); exit;
        }

    }

} 
```

## **与插入使用更新部分相同**

```
$post_information = array(
        'ID' => $current_post,
        'post_title' => esc_attr(strip_tags($_POST['projectName'])),
        'post_content' => esc_attr(strip_tags($_POST['projectDescription'])),
        'post-type' => 'post',
        'post_status' => $cpostStatus
    );

    $post_id = wp_update_post($post_information); 
```

# android - 在 android 上获取当前的快门速度/iso

> ID：13367298
> 
> 赞同：2
> 
> 时间：2012-11-13T19:23:24.653
> 
> 标签：android, camera

我知道有很多问题询问您是否可以设置快门速度/iso等，这似乎是不可能的......

**但是，是否至少可以获得快门速度、光圈和 ISO 等值**？（*没有先拍照并扫描exif值......）*

我的意思是对系统/硬件当前设置的值进行某种实时预览。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-06T02:00:49.453

使用 camera2，您可以查看通过 onCaptureCompleted 回调生成[的 CaptureResult](https://developer.android.com/reference/android/hardware/camera2/CaptureResult.html)对象[。](https://developer.android.com/reference/android/hardware/camera2/CameraCaptureSession.CaptureCallback.html#onCaptureCompleted(android.hardware.camera2.CameraCaptureSession,%20android.hardware.camera2.CaptureRequest,%20android.hardware.camera2.TotalCaptureResult))

如果设备支持[READ_SENSOR_SETTINGS](https://developer.android.com/reference/android/hardware/camera2/CameraMetadata.html#REQUEST_AVAILABLE_CAPABILITIES_READ_SENSOR_SETTINGS)功能，则 CaptureResult [SENSOR_EXPOSURE_TIME](https://developer.android.com/reference/android/hardware/camera2/CaptureResult.html#SENSOR_EXPOSURE_TIME)和[SENSOR_SENSITIVITY](https://developer.android.com/reference/android/hardware/camera2/CaptureRequest.html#SENSOR_SENSITIVITY)字段将具有自动曝光例程选择的曝光和增益的当前值。

否则，您需要捕获 JPEG 图像并查看其 EXIF，如其他答案所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-02T14:52:29.997

我想您可以使用 Camera2 Api 设置快门速度和曝光时间，我对此不太了解。但是，可以从拍摄照片时从相机获取的 byte[] 数据中读取 exif 数据。

如果有人希望获得**最新**的，而不是使用 Camera1 Api 或 Camera2、ISO、曝光时间和快门速度值的一组。对于 Camera1 Api，将数据写入 FileOutputStream 并使用 ExifInterface 读取 exif 数据。您可以使用此方法将每个元数据写入字节。获取数据后，您可以处理该文件并将图像压缩为 png 或 jpg 使用`Bitmap.compress();`

```
 private PictureCallback mPicture = new PictureCallback() {

            @Override
            public void onPictureTaken(byte[] data, Camera camera) {
                long startTime = System.currentTimeMillis();

                File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
                FileOutputStream fos = null;
                Bitmap bitmap = null;

                if (pictureFile == null) {
                    return;
                }

                try {
                    fos = new FileOutputStream(pictureFile);
                    // TODO Writes Exif Data to image
                    System.out.println("************ EXIF ************");
                    fos.write(data);
                    ExifInterface exifInterface = new ExifInterface(pictureFile.getAbsolutePath());
                    String model = exifInterface.getAttribute(ExifInterface.TAG_MODEL);
                    String make = exifInterface.getAttribute(ExifInterface.TAG_MAKE);
                    String flash = exifInterface.getAttribute(ExifInterface.TAG_FLASH);
                    String exposureMode = exifInterface.getAttribute(ExifInterface.TAG_EXPOSURE_MODE);

                    String focalLengthString = exifInterface.getAttribute(ExifInterface.TAG_FOCAL_LENGTH);
                    String isoString = exifInterface.getAttribute(ExifInterface.TAG_ISO_SPEED_RATINGS);
                    String apertureString = exifInterface.getAttribute(ExifInterface.TAG_APERTURE_VALUE);
                    String exposureTimeString = exifInterface.getAttribute(ExifInterface.TAG_EXPOSURE_TIME);
                    String shutterSpeedString = exifInterface.getAttribute(ExifInterface.TAG_SHUTTER_SPEED_VALUE);

                    Double focalLength = exifInterface.getAttributeDouble(ExifInterface.TAG_FOCAL_LENGTH, 0);
                    Double iso = exifInterface.getAttributeDouble(ExifInterface.TAG_ISO_SPEED_RATINGS, 0);
                    Double aperture = exifInterface.getAttributeDouble(ExifInterface.TAG_APERTURE_VALUE, 0);
                    Double exposureTime = exifInterface.getAttributeDouble(ExifInterface.TAG_EXPOSURE_TIME, 0);
                    Double shutterSpeed = exifInterface.getAttributeDouble(ExifInterface.TAG_SHUTTER_SPEED_VALUE, 0);

                    System.out.println("CameraActivity model " + model);
                    System.out.println("CameraActivity make " + make);
                    System.out.println("CameraActivity flash " + flash);
                    System.out.println("CameraActivity exposureMode " + exposureMode);
                    System.out.println("CameraActivity focalLengthString " + focalLengthString + ", focalLength " + focalLength);
                    System.out.println("CameraActivity isoString " + isoString + ", iso " + iso);
                    System.out.println("CameraActivity apertureString " + apertureString + ", aperture " + aperture);
                    System.out.println("CameraActivity exposureTimeString " + exposureTimeString + ", exposureTime " + exposureTime);
                    System.out.println("CameraActivity shutterSpeedString " + shutterSpeedString + ", shutterSpeed " + shutterSpeed);

                    System.out.println("************ EXIF ************");

                } catch (FileNotFoundException e) {
                    System.out.println("CameraActivity onPictureTaken() File not found: " + e.getMessage());
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    try {
                        if (fos != null) {
                            fos.close();
                        }
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                    sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.fromFile(pictureFile)));
                    fos = null;
                    pictureFile = null;

} 
```

这些是我为我的设备获得的结果

```
 ************ EXIF ************
CameraActivity model General Mobile 4G Dual
CameraActivity make General Mobile
CameraActivity flash 24
CameraActivity exposureMode 0
CameraActivity focalLengthString 1150/1000, focalLength 1.15
CameraActivity isoString 262, iso 262.0
CameraActivity apertureString 260/100, aperture 2.6
CameraActivity exposureTimeString 0.03333333333333333, exposureTime 0.03333333333333333
CameraActivity shutterSpeedString 4906/1000, shutterSpeed 4.906 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:38:48.033

关于 iso 值，请参阅这个问题[Android Camera API ISO Setting?](https://stackoverflow.com/questions/2978095/android-camera-api-iso-setting) ，关于快门，请参阅这篇文章[https://stackoverflow.com/a/3550573/1860199](https://stackoverflow.com/a/3550573/1860199)

# java - 如何在 Eclipse 中将 .jar 标记为“已提供”

> ID：13367299
> 
> 赞同：0
> 
> 时间：2012-11-13T19:23:24.643
> 
> 标签：java, android, eclipse, ant, intellij-idea

我正在开发一个 Android 项目。我需要使用库（libs/maps.jar）来编译代码。不幸的是，我提供的 .jar 只包含没有真正实现的存根。我需要能够构建一个不包含 .jar（亚马逊地图）的 .apk，因为它将由系统提供。

在 IntelliJ 中，您可以将库标记为“已提供”，这样它就不会被编译到 apk 中。如何在 Eclipse 中实现同样的功能？

作为后续，我怎样才能用 Ant 完成同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:23:59.500

您应该能够将 maps.jar 添加到项目构建路径。您可以通过转到 Project > Properties > Java Build Path > Libraries 来执行此操作，然后将该 jar 添加为外部 jar。这应该允许您的项目编译并且不包含 jar。

至于 Ant，你几乎会做同样的事情。您只需将该 jar 文件包含在构建任务的类路径标记中即可。 [http://ant.apache.org/manual/using.html](http://ant.apache.org/manual/using.html)（搜索类路径）。

然后，无论您实际需要使用 .apk 部署什么，只要确保将其包含在您的部署操作中即可。

# magento - 如何在前端禁用 Magento 发票

> ID：13367301
> 
> 赞同：2
> 
> 时间：2012-11-13T19:23:25.480
> 
> 标签：magento, magento-1.7

我正在部署一个 Magento 1.7 商店，但我不希望客户可以从前端查看和下载发票，访问他们的帐户。我将使用第三方应用程序管理发票流程，并将其发送给不涉及 Magento 的客户。我想使用管理界面中的“发票”按钮将订单标记为已付款并将订单置于“完成”状态，但我需要避免客户可以访问 Magento 发票，因为它不是真正的发票并且不符合欧洲法律。我找到了这个解决方法：我将 /app/design/frontend/base/default/layout/sales.xml 复制到我的模板文件夹中，并对其进行了编辑，删除了所有行

```
<action method="addLink" translate="label" module="sales"><name>invoice</name><path>*/*/invoice</path><label>Invoices</label></action> 
```

现在在前端帐户中，所有“发票”链接都消失了，但我不确定这是最好的解决方案，因为我可以访问指向 URL [http://mydomain.com/sales/order/invoice/order_id/的发票7/](http://mydomain.com/sales/order/invoice/order_id/7/) 其中“7”是发票编号...

有人可以帮我找到最佳解决方案吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:03:39.157

你可以用你自己的重载前端控制器，它什么都不做。就像是：

```
<global>
<rewrite>

        <mynamespace_mymodule_invoice_cart>
            <from><![CDATA[#^/sales/order/invoice/#]]></from>
            <to>/mymodule/cnewcontroller/</to>
        </mynamespace_mymodule_invoice_cart>
    </rewrite>
<global> 
```

然后为 mymodule/invoice 添加一个前端控制器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T09:38:53.760

我知道它可能很笨拙，但它对我有用......
我想做的只是阻止客户打印和查看发票，我使用自动发票扩展程序，然后将订单推送到我处理的第三方软件与订单。

在 `frontend\base\default\template\sales\order\invoice\items.phtml`我已经注释掉了这些行：

```
<!--<p class="order-links"><a href="<?php echo $this->getPrintAllInvoicesUrl($_order) ?>" onclick="this.target='_blank'" class="link-print"><?php echo $this->__('Print All Invoices') ?></a></p>-->

<!--<h2 class="sub-title"><?php echo $this->__('Invoice #') ?><?php echo $_invoice->getIncrementId(); ?> <span class="separator">|</span> <a href="<?php echo $this->getPrintInvoiceUrl($_invoice) ?>" onclick="this.target='_blank'" class="link-print"><?php echo $this->__('Print Invoice') ?></a></h2>--> 
```

那就是删除“打印发票”和“打印所有发票”链接。

# java - Appengine 调试 TagLibConfiguration (java jetty)

> ID：13367302
> 
> 赞同：0
> 
> 时间：2012-11-13T19:23:38.100
> 
> 标签：java, debugging, google-app-engine, jsp, jetty

我想在 GAE 中调试以下类： TagLibConfiguration

为此，我需要 GAE 使用的确切 Jetty 版本，以便获取源代码并能够逐步执行。

我在哪里可以获得源代码和确切的 Jetty 版本？

正如我通过命名空间“org.mortbay.jetty.webapp”推断的那样，它使用 1.6.* 版本，不是吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:42:33.030

我们知道 Google 正在使用某些版本的 jetty 6，但他们似乎在某个时候基本上已经分叉了 jetty，所以我们（Jetty）无法知道它们与我们分发的版本相比有什么变化。

至于访问他们的源代码，那必须来自谷歌的某个地方，而且只有在它可以免费获得的情况下。祝你好运！如果您确实以某种方式获得访问权限，请在此处为其他人发帖。

# c# - 如何检查 DNS 服务器是否设置为“自动获取”

> ID：13367306
> 
> 赞同：11
> 
> 时间：2012-11-13T19:23:47.640
> 
> 标签：c#, dns, wmi

当我使用网卡设置的 DNSServerSearchOrder 属性获取服务器 DNS 设置时，它会返回它自动解析到的 DNS 服务器，而不是一个表明它是动态的值（例如 null）。

例如，要将我的 DNS 服务器设置为“自动获取”，我会：

```
ManagementBaseObject newDNS = myNICManagementObject.GetMethodParameters("SetDNSServerSearchOrder");
newDNS["DNSServerSearchOrder"] = null;
ManagementBaseObject setDNS = myNICManagementObject.InvokeMethod("SetDNSServerSearchOrder", newDNS, null); 
```

现在，在我使用另一个命令将其设置为“自动获取”之后，我想确认它是否已设置：

```
if( myNICManagementObject["DNSServerSearchOrder"] == null )
{
    MessageBox.Show("DNS Servers Set to Dynamic!");
} 
```

但是，上面的代码并没有按预期返回 null（也没有弹出消息框）。相反，它返回从我的 ISP 动态计算出的 DNS 服务器。

有没有办法以编程方式确定我的 DNS 服务器设置为“自动获取”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-23T19:34:41.803

我发现的唯一方法是从注册表中读取：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\Interfaces\\{Network_Adaptor_GUID}\NameServer 
```

如果`NameServer`为空 - 那么 DNS 是动态的，否则 - 静态的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-05T22:24:10.173

Vad 的回答为我节省了大量寻找解决方案的时间。如果有人想看到一个非常基本的实现，这里有一些 C#。

```
using Microsoft.Win32;
//...
private void DNSAutoOrStatic(string NetworkAdapterGUID)
        {
            string path = "HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters\\Interfaces\\" + NetworkAdapterGUID;
            string ns = (string)Registry.GetValue(path, "NameServer", null);
            if (String.IsNullOrEmpty(ns))
            {
                Console.WriteLine("Dynamic DNS");
            }
            else
            {
                Console.WriteLine("Static DNS: " + ns);
            }
        } 
```

[您可以按照这些示例](https://stackoverflow.com/questions/6803073/get-local-ip-address)获取网络适配器 GUID 。

这是 Id 属性的值`System.Net.NetworkInformation.NetworkInterface`

# entity-framework - 如何告诉 EntityFramework 不要弄乱给定的实体？

> ID：13367307
> 
> 赞同：1
> 
> 时间：2012-11-13T19:23:53.617
> 
> 标签：entity-framework, poco, dto

我正在寻找一种方法来指示某个类不会用于数据库的生成（代码优先的 Web 应用程序）并且不会被监视更改。换句话说，我只是希望这个特定的类与任何自动持久性行为完全断开（因为它只会用作 View 和 Controller 之间的 DTO）。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:16:25.530

Entity Framework 使用 DbContext 类来检测数据库的预期结构。

EF 有 2 种方式假设数据库中存在实体。

1.  该实体由您的 DbContext 直接引用，例如您有一个`DbSet<TEntity>`(or `IDbSet<TEntity>`)
2.  该实体是从您的 DbContext 间接引用的，例如，您有一个如上所述引用的实体，该实体将您的实体作为属性。

当一个实体被引用时，它会期望具有该实体模式的表将存在于数据库中。您可以通过使用属性装饰实体或使用模型构建器来尝试实际预期模式的外观（名称、忽略的属性、必需/不需要等）。我个人的偏好是使用模型构建器，请查看我的文章[here](http://blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html)以获取使用模型构建器进行导航属性的示例。

# android - 自定义适配器未在 textview 中加载 drawableEnd

> ID：13367308
> 
> 赞同：1
> 
> 时间：2012-11-13T19:23:59.113
> 
> 标签：android, listview, adapter

当我向下滚动，如果我在列表中上升，适配器仅加载图标和文本。如果我没有在适配器中设置可绘制，则 texview 可以正常绘制，但我想务实地更改我的图标。我可以看到[android dev](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablesRelativeWithIntrinsicBounds%28int,%20int,%20int,%20int%29)将在 api 级别 17 中得到支持，但现在我无法在我的适配器中使用它，有没有办法解决这个问题？

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/item"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center_vertical"
android:layout_gravity="center_vertical"
android:padding="4dp"
android:drawablePadding="4dp"
android:drawableLeft="@drawable/file"
PROBLEM -> android:drawableEnd="@drawable/next" >
</TextView> 
```

和我的适配器代码：

```
public class MyAdapter extends ArrayAdapter<String> {
Context context; 
int layout_resourceId;
ArrayList<String> list_text;

public MyAdapter(Context context, int layout_resourceId, ArrayList<String> list_text) {
    super(context, layout_resourceId, list_text);
    this.context = context;
    this.layout_resourceId = layout_resourceId;
    this.list_text = list_text;
}

@Override
public View getView(int position, View convert_view, ViewGroup parent) {
    View row = convert_view;
    MyItemHolder holder = null;

    if(row == null) {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layout_resourceId, parent, false);

        holder = new MyItemHolder();
        holder.text_view = (TextView)row.findViewById(R.id.item);
        holder.icon_view = (TextView)row.findViewById(R.id.item);

        row.setTag(holder);
    }
    else {
        holder = (MyItemHolder)row.getTag();
    }

    //text
    String string_item = list_text.get(position);
    holder.text_view.setText(string_item);

    //icon
    MyExtension.myExtension(string_item);
    int drawable = MyExtension.file_icon_is;
    holder.icon_view.setCompoundDrawablesWithIntrinsicBounds(drawable, 0, 0, 0);

    return row;
}
public static class MyItemHolder {
    TextView icon_view;
    TextView text_view;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:03:14.470

新的 api lv 17 有这方面的工作方法。将 TextView 分离到 TextView 和 ImageView 对我来说在旧的 api 上有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:46:23.233

This won't work in every circumstance, but try using `android:width="wrap_content"` with `drawableLeft` and `drawableRight`.

```
MyExtension.myExtension(string_item);
holder.text_view.setDrawableRight(MyExtension.file_icon_is); 
```

# .htaccess - 如何使用 htaccess 重写将 domain.com/go/?custom_ref=001 更改为 domain.com/go/?ref=001？

> ID：13367310
> 
> 赞同：0
> 
> 时间：2012-11-13T19:24:31.947
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, url-rewrite-module

如何改变：

domain.com/go/?custom_ref=001

进入

domain.com/go/?ref=001

请使用 htaccess 重写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:05:23.527

不是特别灵活，但这适用于您的确切问题：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^ref=([0-9]*)
RewriteRule ^go/$ go/?custom_ref=%1 [QSA] 
```

请注意，要匹配的条件，`ref`必须先出现在查询字符串中。规则上的`[QSA]`（Query String Append）标志将保留原始查询字符串，因此传递的其他值不会丢失。

另请注意，此代码假定 .htaccess 文件位于文档根目录中。如果文件在其他地方，您将需要调整`RewriteRule`. 例如，当 .htaccess 文件位于 /go/.htaccess 时，将其更改为以下内容将起作用：

```
RewriteRule . ?custom_ref=%1 [QSA] 
```

如果您希望这更灵活，请查看[对此问题](https://stackoverflow.com/q/1497184/1470907)的回复- 它们包含用于更改查询字符串中的单个变量并保留其他所有内容的语法。

* * *

**编辑：**

要替换查询字符串中的`custom_ref`with `ref`，您可以使用以下内容重定向包含该`custom_ref`变量的请求。`RewriteEngine On`在和其他规则之间添加这个：

```
RewriteCond %{QUERY_STRING} ^(([^&]*&)*)custom_ref=(.*)
RewriteRule ^go/$ /go/?%1ref=%3 [R=301,L] 
```

这更像是一个补丁而不是一个解决方案。如果您可以访问代码，我建议您改为在此处修复变量名称。

# java - jsf 和 LinkedHashMap 导致 java.io.NotSerializableException

> ID：13367315
> 
> 赞同：1
> 
> 时间：2012-11-13T19:24:55.520
> 
> 标签：java, jsf, jakarta-ee, serialization, jsf-2

在我的 DetailsBean 类中，我使用 javax.faces 导入来使 bean 具有视图范围。@ManagedBean @ViewScoped 公共类 DetailsBean{

```
 @EJB
    RepositoryService repBean;
    private LinkedHashMap<String, String> folder;
    @Inject
    private ApplicationBean appBean;
    @Inject
    private UserBean userBean;
    } 
```

但是，当尝试访问 bean 时，我得到以下堆栈跟踪：

```
java.io.NotSerializableException: com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at java.util.HashMap.writeObject(HashMap.java:1014)
at sun.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at java.util.HashMap.writeObject(HashMap.java:1014) 
```

我查看了 LinkedHashMap 的 javadoc，它说它实现了 Serializable 接口。地图中也只有字符串，他们当然也实现了它。然后我尝试将地图标记为瞬态，但这并没有改变任何东西。这里有什么问题？

# objective-c - 将 NSView 拖到屏幕上的任意位置（无窗口）

> ID：13367316
> 
> 赞同：0
> 
> 时间：2012-11-13T19:24:57.097
> 
> 标签：objective-c, macos, drag-and-drop, nsview

我想在屏幕上的任何位置拖出菜单栏图标的副本。我 NSStatusItem 使用自定义视图，我已经能够让它在菜单栏中显示一个图标。正如您可能猜到的那样，我的应用程序没有使用 NSWindow。

我可以拖放它，但它被菜单栏中的小视图切断了。

![菜单栏图标](../Images/545c3946c9bd182fdeb10ba5dea97fe9.png)

例如，在 Clear for Mac 中，您可以将内容拖到其自己窗口之外的屏幕上的任何位置：

[截屏](http://cl.ly/image/0e0o3T433h0N)

在带有 UIView 的 iOS 上，这显然是通过 clipToBounds:NO 工作的，但我不知道 OS X 上的 NSView 有什么等价物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:02:42.367

你试过`-[NSView dragImage:at:offset:event:pasteboard:source:slideBack:]`吗？

# html - 在可变高度div旁边垂直居中img标签，都在一个div内？

> ID：13367321
> 
> 赞同：0
> 
> 时间：2012-11-13T19:25:24.407
> 
> 标签：html, css

考虑这个 HTML：

```
<table>
    <tr>
    <td>
        <span class="author">Author Name</span>
        <div class="imgtitlewrapper">
            <img src="img.png" class="image" width="18px" height="19px" />
            <div class="title">Title of variable length, causing parent div to be of variable height</div>
        </div>
    </td>
    </tr>
</table> 
```

使用以下 CSS：

```
<style type="text/css">
    .title {padding-left:8px; margin-left:26px;}
    .image {float:left; padding-left:8px;}
</style> 
```

图像正确浮动到左侧，并且标题没有正确环绕它，但我希望图像在其父 div 内垂直居中。怎么做呢？容器标签和布局可以更改，但都必须在表格单元格内。

# operating-system - Windows Server 2008 计划任务 - MS Word 挂起

> ID：13367331
> 
> 赞同：2
> 
> 时间：2012-11-13T19:25:55.313
> 
> 标签：operating-system, ms-word, windows-server-2008, ms-office, scheduled-tasks

我们最近将一台服务器从 2003 年“升级”到了 Windows 2008。我们有一个启动 VB6 exe 的计划任务。此 exe 从 FTP 服务器获取文件，启动 Word，正确格式化文件，将其保存为 PDF 并通过电子邮件发送。exe 从 FTP 服务器抓取文件很好，但是当它启动 Word 进行格式化步骤时，WINWORD.exe 出现在任务管理器中并且从不执​​行任何操作。但是，如果我手动启动它而不是作为计划任务，它运行正常。我将计划任务设置为“以最高权限运行”设置，并且我尝试将运行它的用户更改为几个不同的特权用户，但没有成功。如果我使用“仅在用户登录时运行”选项运行它并且我以该用户身份登录，它会运行但如果我选中“

[桌面文件夹](https://stackoverflow.com/questions/10317519/php-com-object-not-created-in-schedule-task-instead-hangs)适用于所有用于运行计划任务的用户，所以我认为这不是问题。我尝试设置[“Start In”可选参数](https://stackoverflow.com/questions/4437701/run-a-batch-file-with-windows-task-scheduler)，但这也不起作用。此外，服务器是 32 位的，因此[使用 32 位仿真](http://social.msdn.microsoft.com/Forums/sv/winserver2008appcompatabilityandcertification/thread/29446adf-8304-4b9f-bbc4-95daf2941d53)也不起作用。说真的，我们在这里完全不知所措。任何人都可以提供的帮助将不胜感激。

# java - 使用 WebView 的 Android 计算器

> ID：13367332
> 
> 赞同：2
> 
> 时间：2012-11-13T19:25:56.497
> 
> 标签：java, android, android-intent, android-webview, calculator

大家好，我有问题。我对 Android 开发非常陌生，目前 Uni 课程的任务是设计一个简单的计算器。导师告诉我们，我们可以自己实现计算器，使用两个堆栈来跟踪数字和运算符，然后手动完成所有操作

或者

使用带有 JavaScript 的 WebView 对象来解决用户输入的任何内容：P 这听起来更好，所以我搜索了一下以找到试图理解的基础。我找到了这个教程：

[http://www.androiddom.com/2011/04/creating-android-calculator-tutorial.html](http://www.androiddom.com/2011/04/creating-android-calculator-tutorial.html)

我将首先解释我的问题，然后粘贴代码：基本上 ButtonClickListener 不起作用！我按下一个按钮，没有任何反应，WebView 对象保持空白，就像没有发生任何事情一样。当我在教程中将 JavaScript 设置为“true”的行更改为我在 Google 的官方 Android 纪录片中找到的内容并运行应用程序时，它会在我按下按钮时立即崩溃。所以按钮正在发送广播，但我的代码没有做任何事情。现在这里的代码：

```
package edu.calpoly.android.lab1;

import android.app.Activity; 
import android.os.Bundle; 
import android.view.View; 
import android.view.View.OnClickListener; 
import android.webkit.WebView; 
import android.widget.Button;

public class MainActivity extends Activity {    
    private WebView mWebView;   
    private StringBuilder mMathString;  
    private ButtonClickListener mClickListener;

    /** Called when the activity is first created. */   
    @Override   
    public void onCreate(Bundle savedInstanceState){
         super.onCreate(savedInstanceState);        
         setContentView(R.layout.activity_main);

         // Create the math string      
         mMathString = new StringBuilder();

         // Enable javascript for the view      
         mWebView = (WebView) findViewById(R.id.webview);
         mWebView.getSettings().setJavaScriptEnabled(true);

         // Set the listener for all the buttons        
         mClickListener = new ButtonClickListener();        
         int idList[] = { R.id.button0, R.id.button1, R.id.button2,
                R.id.button3, R.id.button4, R.id.button5, R.id.button6,
                R.id.button7, R.id.button8, R.id.button9, R.id.buttonLeftParen,
                R.id.buttonRightParen, R.id.buttonPlus, R.id.buttonPlus,
                R.id.buttonMinus, R.id.buttonDivide, R.id.buttonTimes,
                R.id.buttonDecimal, R.id.buttonBackspace, R.id.buttonClear };

        for (int id : idList){ 
            View v = findViewById(id); 
            v.setOnClickListener(mClickListener);       
        }

    }

    private void updateWebView() {
        StringBuilder builder = new StringBuilder();
        builder.append("<html><body>");
        builder.append("<script type=\"text/javascript\">document.write('");
        builder.append(mMathString.toString());
        builder.append("');"); 
        builder.append("document.write('<br />=' + eval(\"");
        builder.append(mMathString.toString()); 
        builder.append("\"));</script>"); 
        builder.append("</body></html>");

        mWebView.loadData(builder.toString(), "application/xhtml", "UTF-8");    
    }

    private class ButtonClickListener implements OnClickListener {
        @Override 
        public void onClick(View v) {           
            switch (v.getId()) { 
                case R.id.buttonBackspace:
                    if (mMathString.length() > 0)
                        mMathString.deleteCharAt(mMathString.length() - 1);
                    break;          
                case R.id.buttonClear:
                    if (mMathString.length() > 0)
                        mMathString.delete(0, mMathString.length());
                    break;          
                default:
                    mMathString.append(((Button) v).getText());             
            }

            updateWebView();        
        }    
    } 
} 
```

和 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="50dip" />

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/buttonLeftParen"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="(" >
        </Button>

        <Button
            android:id="@+id/buttonRightParen"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text=")" >
        </Button>

        <Button
            android:id="@+id/buttonBackspace"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="B" >
        </Button>

        <Button
            android:id="@+id/buttonClear"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="C" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button7"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="7" >
        </Button>

        <Button
            android:id="@+id/button8"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="8" >
        </Button>

        <Button
            android:id="@+id/button9"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="9" >
        </Button>

        <Button
            android:id="@+id/buttonPlus"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="+" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="4" >
        </Button>

        <Button
            android:id="@+id/button5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="5" >
        </Button>

        <Button
            android:id="@+id/button6"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="6" >
        </Button>

        <Button
            android:id="@+id/buttonMinus"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="-" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="1" >
        </Button>

        <Button
            android:id="@+id/button2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="2" >
        </Button>

        <Button
            android:id="@+id/button3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="3" >
        </Button>

        <Button
            android:id="@+id/buttonTimes"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="*" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button0"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="0" >
        </Button>

        <Button
            android:id="@+id/buttonDecimal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="." >
        </Button>

        <Button
            android:id="@+id/buttonEquals"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="=" >
        </Button>

        <Button
            android:id="@+id/buttonDivide"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="/" >
        </Button>
    </LinearLayout>

</LinearLayout> 
```

^ 版式很无聊，只是为了它而发布它。提前谢谢你！

# javascript - Twitter Bootstrap - 为什么我的模态与背景一样褪色？

> ID：13367334
> 
> 赞同：20
> 
> 时间：2012-11-13T19:25:59.590
> 
> 标签：javascript, twitter-bootstrap, modal-dialog, fade

所以我正在使用 Twitter Bootstrap，当用户单击“注册”按钮时，我有一个向下滑动的模式。

唯一的问题是，不仅背景页面褪色，这是一个很好的效果，而且模态也褪色了。我怎样才能让模态在背景褪色时保持正常亮度？

我在这里创建了一个 JSFiddle 来演示我的问题：http: [//jsfiddle.net/jononomo/7z8RZ/7/](http://jsfiddle.net/jononomo/7z8RZ/7/)

下面的代码创建了一个淡入淡出的模态：

```
<div class="navbar navbar-fixed-top"> 
    <a href="#registration_modal" data-toggle="modal">
        Register
    </a>
    <div id="registration_modal" class="modal hide fade">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
                <h3 id="myModalLabel">Register An Account</h3>
        </div>

        <div class="modal-body">
            Registration form goes here.
        </div>

        <div class="modal-footer">
            <button class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button class="btn btn-primary">Register</button>
        </div>

    </div>
</div> 
```

**注意**：如果我删除外部 div，那么一切正常。所以问题是模态的代码在以下几行中：

```
<div class="navbar navbar-fixed-top">
</div> 
```

当然，我不想删除该 div，因为我希望启动模式的链接按钮位于固定在屏幕顶部的导航栏中。

**编辑**： 我已将其缩小到外部 div 属于该类的事实`navbar-fixed-top`。当我删除该标签时，一切都按预期工作-您可以在这里看到它正常工作：http: [//jsfiddle.net/jononomo/7z8RZ/8/](http://jsfiddle.net/jononomo/7z8RZ/8/) 当然，我希望将导航栏固定在顶部，所以这不能解决我的问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-13T20:45:12.077

在 Bootstrap git 存储库中检查[此问题。](https://github.com/twitter/bootstrap/issues/2254)

然后尝试将模态框放在导航栏*之前*，就像[这个 fiddle](http://jsfiddle.net/7z8RZ/13/)一样。

```
<div id="registration_modal" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Register An Account</h3>
    </div>

    <div class="modal-body">
        Registration form goes here.
    </div>

    <div class="modal-footer">
        <button class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button class="btn btn-primary">Register</button>
    </div>

</div>
<div class="navbar navbar-fixed-top"> 
    <a href="#registration_modal" data-toggle="modal">
        Register
    </a>    
</div> 
```

​</p>

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T21:59:43.980

不幸的是，这里的答案对我没有帮助.. 但幸运的是，这个讨论有同样的问题，他们有一个对我有用的答案。基本上，您必须确保模态不会从父 div 继承任何奇怪的定位元素：

[Bootstrap 模态出现在背景下](https://stackoverflow.com/questions/10636667/bootstrap-modal-appearing-under-background)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-22T07:39:16.760

我遇到过同样的问题。对我来说，解决方案是将模态 div 放在结束 body 标记之前。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-08T22:39:18.277

我解决它的方法是将模式中的所有内容包装在`<div class="modal-content">`标签内。它看起来像这样：

```
<div class="modal fade" id="TestModal">
    <div class="modal-content">
        <div class="modal-header">
            Modal header here
        </div>
        <div class="modal-body">
            <p>Modal content here</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" data-dismiss="modal">Close</button>
        </div>
    </div>
</div> 
```

如果没有`modal-content`div，模式最终会像背景一样灰色。

# python - DBus Rhythmbox Gobject 设置属性

> ID：13367336
> 
> 赞同：0
> 
> 时间：2012-11-13T19:26:05.033
> 
> 标签：python, dbus, gobject, rhythmbox

我在 Python 中遇到了 Gobject Introspection 的问题。我试图通过 DBUS 访问 Rhythmbox，我可以访问 org.mpris.MediaPlayer2.Player 内部的方法，但我试图为 org.mpris.MediaPlayer2.Player 的属性设置值，这对我不起作用。

```
from gi.repository import Gio
connection = Gio.bus_get_sync(Gio.BusType.SESSION, None)
player = Gio.DBusProxy.new_sync(connection, 0, None, 'org.gnome.Rhythmbox3', '/org/mpris/MediaPlayer2', 'org.mpris.MediaPlayer2.Player', None)

properties = Gio.DBusProxy.new_sync(connection, 0, None, 'org.gnome.Rhythmbox3', '/org/mpris/MediaPlayer2', 'org.freedesktop.DBus.Properties', None) 
```

我可以使用像 player.PlayPause() 这样的方法。当我尝试

```
 properties.Set('org.mpris.MediaPlayer2.Player.rhythmbox', 'Volume', data) 
```

我收到一条错误消息：

```
Unhandled Error
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/twisted/python/log.py", line 69, in callWithContext
    return context.call({ILogContext: newCtx}, func, *args, **kw)
  File "/usr/lib/python2.7/site-packages/twisted/python/context.py", line 118, in callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File "/usr/lib/python2.7/site-packages/twisted/python/context.py", line 81, in callWithContext
    return func(*args,**kw)
  File "/usr/lib/python2.7/site-packages/twisted/internet/posixbase.py", line 626, in _doReadOrWrite
    why = selectable.doRead()
--- <exception caught here> ---
  File "/usr/lib/python2.7/site-packages/twisted/internet/udp.py", line 147, in doRead
    self.protocol.datagramReceived(data, addr)
  File "RhythmboxDbus.py", line 27, in datagramReceived
    properties.Set('org.mpris.MediaPlayer2.Player.rhythmbox', 'Volume', data)
  File "/usr/lib/python2.7/site-packages/gi/overrides/Gio.py", line 156, in __call__
    arg_variant = GLib.Variant(signature, tuple(args))
  File "/usr/lib/python2.7/site-packages/gi/overrides/GLib.py", line 185, in __new__
    (v, rest_format, _) = creator._create(format_string, [value])
  File "/usr/lib/python2.7/site-packages/gi/overrides/GLib.py", line 68, in _create
    v = constructor(args[0])
  File "/usr/lib/python2.7/site-packages/gi/types.py", line 76, in constructor
    return info.invoke(cls, *args, **kwargs)
exceptions.TypeError: Must be string, not tuple 
```

# c++ - DirectX - VertexBuffer 是如何工作的？

> ID：13367337
> 
> 赞同：5
> 
> 时间：2012-11-13T19:26:17.850
> 
> 标签：c++, windows, directx, directx-11

我现在正在学习 DirectX，我读了很多关于 VertexBuffer 的文章。由于您无法通过阅读来学习编程，因此我正在使用 DX11 制作一个小型引擎（好吧，我的问题实际上与版本无关）

据我了解，我在 VertexBuffer 中存储顶点，实际上我将它存储在图形卡上。好吧，我阅读了有关动态和静态缓冲区的信息。所以如果我理解正确，静态缓冲区是用顶点初始化的，并且初始化的顶点不会改变。好的，但我什么时候真的需要它。我的意思是在游戏或其他什么情况下，我什么时候有恒定的顶点？也许对于一些 UI 对象..？- 但即使这些也不是每次都保持不变......你可以移动他们的二维位置......等等......

下一点是关于动态顶点缓冲区，例如：我有一个缓冲区，里面有一些顶点，这些顶点被绘制出来。然后我想添加或删除一些顶点。现在怎么办..所以我会简单地“更新”缓冲区。但这真的对性能有好处吗？想象一个地形编辑器。在那里你必须更新大量的顶点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T19:32:18.793

> > 我的意思是在游戏或其他什么情况下，我什么时候有恒定的顶点？

其实一直都是。例如，静态几何体、您提到的 UI 对象等。您对移动对象有一点误解，因此会产生混淆 - 您不会通过更改对象的顶点来移动对象。相反，您将通过着色器管道放置顶点。在顶点着色器中，您可以对顶点应用任意变换。因此，例如，如果您有一棵树由于某种原因在世界各地移动（可能在浮岛上或其他地方），而不是更改构成树的顶点，而是更改应用于顶点的转换.

> > 想象一个地形编辑器

这取决于你的地形编辑器应该做什么，但通常你不会在这里改变顶点。即在编辑高度时，而不是上下移动顶点，您写入高度图（大部分时间是灰度纹理），然后再次在着色器管道中计算 GPU 上的转换。

# android - 试图杀死一个应用程序

> ID：13367340
> 
> 赞同：1
> 
> 时间：2012-11-13T19:26:25.733
> 
> 标签：android, android-activity

我正在尝试编写一个进程来杀死在后台运行的应用程序，但这些应用程序仍然显示在最近的应用程序列表中并且没有死：

```
ActivityManager am = (ActivityManager) getApplicationContext().getSystemService(
                    Context.ACTIVITY_SERVICE);

            List<ActivityManager.RunningTaskInfo> processList = am.getRunningTasks(5);
for(int i=0; i<processList.size();i++){
                cProcess = processList.get(i).baseActivity.getPackageName();
                if(!allowedApps.contains(cProcess)){
                    am.killBackgroundProcesses(cProcess);
                    Log.v("","---------------------------------------------------------kill-----"+cProcess);
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:29:04.463

对于应用程序/任务杀手的需求存在（轻描淡写）意见分歧。我从来没有使用过，因为我从来没有看到需要。有些人可能会有不同的感觉。

我同意“保护”零售模式设备的最佳方法是禁用允许某人运行第三方应用程序的部分 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:05:39.043

> 不，我正在为零售客户构建启动器/信息亭模式，我们正在尝试保护平板电脑不访问某些第三方应用程序

这是不可能的，以任何可靠的方式，除非通过自定义固件。

# java - 使用 POI API 将页脚（带图像）添加到 Word Doc

> ID：13367342
> 
> 赞同：1
> 
> 时间：2012-11-13T19:26:36.303
> 
> 标签：java, ms-word, apache-poi, doc

我面临以下情况和问题：

我必须检索现有的 .doc/.docx 文件并通过为包含图像和一些文本的文档的每一页添加页脚来修改它。我一直在尝试通过使用 Apache POI API 来实现这一点，但到目前为止我还没有运气。尽管我已经搜索了很多示例和指南，但我找到的那些只会让我更加失望。

由于价格昂贵，我放弃了 Aspose，所以我相信 POI API 将是实现这一目标的唯一途径。

我相信我使用 .doc 做的最接近的就是做这段代码，但它只创建没有文本的页脚部分，并使文档中的图像崩溃：

```
POIFSFileSystem fs = new POIFSFileSystem(new FileInputStream("C:/testeF.doc"));
HWPFDocument doc = new HWPFDocument(fs);
//WordExtractor we = new WordExtractor(doc);
HeaderStories headerStories = new HeaderStories(doc);
Range rangeO = headerStories.getOddFooterSubrange();
if(rangeO == null)
    rangeO = headerStories.getRange();
rangeO.insertAfter("Footer text from POI");
FileOutputStream newdoc = new FileOutputStream("C:/output.doc");
doc.write(newdoc);
newdoc.close(); 
```

请你们中的任何人提供任何解决这些问题的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:08:28.863

关于 .docx 文件（XWPF，不是 HWPF）的一些更新，我现在可以创建一个带有一些文本的页脚或将一些文本插入到现有的页脚，但如果页脚已经存在，我只需将新文本附加到现有的一个，我找不到覆盖它的方法。

例如：现有页脚 =“测试”

执行以下代码后的页脚 = "TestTest"

Wanted result = "Test"(覆盖了第一个 "Test" 页脚文本

```
String text = "Test";
    File docxFile = new File("C:/testeXWPF.docx");
    FileInputStream finStream = new FileInputStream(docxFile.getAbsolutePath());
    XWPFDocument doc = new XWPFDocument(finStream);

    XWPFHeaderFooterPolicy policy = doc.getHeaderFooterPolicy();
    if (policy == null) {
        policy = new XWPFHeaderFooterPolicy(doc);
    }

    CTP ctP1 = CTP.Factory.newInstance();
    CTR ctR1 = ctP1.addNewR();
    CTText t = ctR1.addNewT();
    t.setStringValue(text);
    XWPFParagraph codePara = new XWPFParagraph(ctP1);

    XWPFParagraph[] newparagraphs = new XWPFParagraph[1];
    newparagraphs[0] = codePara;

    policy.createFooter(policy.DEFAULT, newparagraphs);

    FileOutputStream fileOut = new FileOutputStream(docxFile);

    doc.write(fileOut);

    fileOut.close(); 
```

目前，这仅适用于 docx 文件（XWPF），但我必须找到一些方法来对 doc 文件（HWPF）做同样的事情。

有什么提示吗？

# jquery - jqueryUI 上的打开事件间歇性地工作

> ID：13367344
> 
> 赞同：1
> 
> 时间：2012-11-13T19:26:39.007
> 
> 标签：jquery, jquery-ui, jquery-dialog

我有一个 jqueryUI 对话框，它向另一个页面发出请求并在对话框中加载内容。

```
jQuery("#someDialog").dialog({
    autoOpen: true,
    draggable: false,
    resizable: false,
    modal: true,
    open: function() {
        jQuery(this).load('myurl?type=something');
    }
});​ 
```

但是，此代码有时只是打开对话框，加载的内容不会显示在对话框中。我怀疑这是因为 open 事件中的异步代码。

有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:33:49.853

我通常将内容加载到一个变量 div 中，然后在打开它时将它的 html 作为对话框的文本。

```
$('#popupWindow').load('whatever?type=something', function () {

    // using the callback function on .load() we can ensure
    // the content is always loaded before opening the dialog also 

    var _dialogBox = $('<div id="dialogBox" />');

    // put the html inside of the dialog
    _dialogBox.html( $('#popupWindow').html() );

    _dialogBox.dialog({
        autoOpen: true,
        draggable: false,
        resizable: false,
        modal: true
    });​

    _dialogBox.dialog('open');
}); 
```

# maven - Maven 依赖 为什么 org.woden.apachi:woden-api:1.0M8 拉下 ant.jar？

> ID：13367346
> 
> 赞同：1
> 
> 时间：2012-11-13T19:26:40.567
> 
> 标签：maven, ivy, pom.xml

澄清一下：我使用的是 Ivy 而不是 Maven，但我使用的是 Maven 存储库结构。

我有一个依赖 org.apache.axis2:axis-kernel:1.5 的 jar。根据我生成的 Ivy Dependecy Report，axis2:axis-kernel:1.5 依赖于 woden-api:org.apache.woden，而后者又依赖于 org.apache.ant:ant:1.7。

我不是开发人员，但我认为`ant.jar`(and `ant-launcher.jar`) 不应该是另一个 jar 的依赖项。更奇怪的是，我去了[Maven Org 的搜索](http://search.maven.org)并拉下了Woden-API 的[pom.xml](http://search.maven.org/remotecontent?filepath=org/apache/woden/woden-api/1.0M8/woden-api-1.0M8.pom)，我什至没有在`pom.xml`.

那么，对 ant.jar 的依赖从何而来？如果我在 woden-api jar 文件中看不到它，为什么我的依赖报告声称 woden-api 负责？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:40:31.203

如果您仔细查看`pom.xml`of `woden-api`，您会发现它有 parent 命名`woden`。我猜这个项目不同部分所需的大部分依赖项都在[parent](http://search.maven.org/remotecontent?filepath=org/apache/woden/woden/1.0M8/woden-1.0M8.pom)中指定。

这是其中的摘录：

```
<dependency>
  <groupId>org.apache.ant</groupId>
  <artifactId>ant</artifactId>
  <version>1.7.0</version>
</dependency> 
```

我不确定依赖它是对还是错，`ant`但我知道许多其他工件都依赖于它。

# html - XML DOM 和 HTML DOM 有什么区别

> ID：13367349
> 
> 赞同：4
> 
> 时间：2012-11-13T19:26:56.443
> 
> 标签：html, xml, dom

我已经阅读了有关 XML DOM 和 HTML DOM 的信息，但我看不出有什么大的区别。在 w3schools 中有两篇文章，[XML DOM](http://www.w3schools.com/dom/default.asp)和[HTML DOM](http://www.w3schools.com/htmldom/default.asp)，描述了这两个 DOM，但我认为它们很像。我还阅读了[关于 stackoverflow 的帖子](https://stackoverflow.com/questions/6411723/what-is-the-difference-between-html-dom-and-xml-dom)，但更多的是关于使用 DOMS 之间的方法/属性，而不是差异。我在谷歌也找不到任何关于它的信息。

我知道 DOM 是一种表示 HTML 和 XML 文档的方式，并且用树来说明。我还知道 HTML 文档和 XML 文档的 DOM 是什么样的，以及如何操作它们。

那么有什么区别呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T21:53:00.967

主要区别在于 HTML DOM 了解 HTML：例如，它知道一个表格包含一个包含表格行的表格主体，并且它将确保当您向树中添加和删除节点时，该结构得到正确维护.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:03:48.737

主要区别在于 XML DOM API 中会保留字符大小写，但 HTML DOM API 中不一定会保留字符大小写。

有关这方面的示例，请参阅[JavaScript：检测使用的解析器、XML 或 SGML](https://stackoverflow.com/questions/8522951/javascript-detect-parser-used-xml-or-sgml/8531431#8531431)

# javascript - 从 JQuery 中的行中选择特定单元格

> ID：13367351
> 
> 赞同：0
> 
> 时间：2012-11-13T19:27:02.167
> 
> 标签：javascript, jquery, html

我正在使用带有 onDoubleClick 功能的 Flexigrid。当触发 dblclick 事件时，它将行作为变量返回（函数 (g,p)）

我需要获取具有缩写属性“TimeBillID”的行 (g) 中的一个单元格。我可以通过 g.cells[index] 访问单元格。带有缩写的单元格可能并不总是行中的第一个。我试过 g.cells.filter("[abbr='TimeBillID']") 和 g.cells.has("[abbr='TimeBillID']")

我知道我可以遍历每个单元格，直到找到具有缩写的单元格，但是我不想这样做，因为某些将使用它的表格每行可以有 20 个或更多单元格。

行结构：

```
<tr>
   <td abbr="TimeBillID"></td>
   <td></td>
..............
   <td></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:22:14.453

感谢 alexn，答案是 $(g).children('td').filter('[abbr="TimeBillID"]');

# java - Spring Security 使用 devise 授权 Rails 应用程序

> ID：13367360
> 
> 赞同：2
> 
> 时间：2012-11-13T19:27:38.437
> 
> 标签：java, ruby-on-rails, tomcat, spring-security, pentaho

我试图弄清楚如何将我的 Rails 应用程序授权到 pentaho spring 安全性中。我尝试使用 URL 参数 user=username&password=password 但不知何故应用程序不听它，它只是将我发送到登录页面。

现在我通过允许匿名访问文件中的 url 模式对 pentaho 服务器进行 hack`biserver-ce/pentaho-solutions/system/applicationContext-spring-security.xml`

> \A/viewaction.*\Z=管理员，匿名
> 
> \A/content/reporting.*\Z=匿名，已认证

但是，通过这样做，我不仅允许访问 rails，还允许访问这些 url 的任何人。

我需要的是使用 url 中的用户和密码参数启用 url 的执行，或者授权我的 rails 应用程序具有对这些模式的读取/执行访问权限。

任何帮助表示赞赏。

# javascript - 猫鼬模式设计

> ID：13367362
> 
> 赞同：0
> 
> 时间：2012-11-13T19:27:44.137
> 
> 标签：javascript, schema, mongoose

我执行以下操作：

```
var peoples = db.model('peeps', new mongoose.Schema());
peoples.find({}, {weights: 1}).exec(function(err, data) {
  // data is an array with objects
  data.forEach(function(el, index, array) {
    console.log(el); // --> {weights: [{weight: 45.78, diet: ln}, {weight: 21.89, diet: lgt}]}
    consoel.log(el.weights) // --> undefined
} ... }); 
```

但是当我建议这样的模式时：

```
var peoples = db.model('peeps', new mongoose.Schema({
   weights: []
   }));
peoples.find({}, {weights: 1}).exec(function(err, data) {
  // data is an array with objects
  data.forEach(function(el, index, array) {
    console.log(el); // --> {weights: [{weight: 45.78, diet: ln}, {weight: 21.89, diet: lgt}]}
    consoel.log(el.weights) // --> [[object Object], [object Object]]
 } ... }); 
```

然后第二个允许我通过`el.weights[0].weight`

这是猫鼬设计的差异还是我在我的第一个代码块中做错了什么来访问数组中的对象？

架构/数据的示例如下：

```
{ _id: 0,
    spname: 'INDV_748',
    weights:
     [ { weight: 1.463179736705023, diet: 'ln' },
       { weight: 11.78273309957772, diet: 'lgt' } ] } 
```

如果我没有在 中指定`_id: Number`，`new mongoose.Schema({...})`那么对于上述两种情况，`_id`都不会出现在任何`find()`查询中。

这也是设计的一部分吗？

# sqlite - Sinatra 中的 pg sql-lite 适配器出错

> ID：13367363
> 
> 赞同：1
> 
> 时间：2012-11-13T19:27:44.173
> 
> 标签：sqlite, postgresql

我在连接到 Sinatra 中的开发数据库时遇到问题。做后端的人在纽约，目前不可用。我对前端更熟悉，并且想知道，我缺少一些简单的东西吗？

生产数据库连接，好的，但是当我尝试在开发模式下启动它时，我在终端中遇到了一堆错误。我还尝试使用端口 5432 启动瘦，但没有成功。

有任何想法吗？ *编辑*下面添加的models.rb

**终端**

```
mdb|moreButton⚡ ⇒ ruby app.rb   
/Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/data_objects-0.10.10/lib/data_objects/connection.rb:79:in `initialize': could not connect to server: Connection     refused (DataObjects::ConnectionError)
    Is the server running on host "localhost" (127.0.0.1) and accepting
    TCP/IP connections on port 5432?
could not connect to server: Connection refused
    Is the server running on host "localhost" (::1) and accepting
    TCP/IP connections on port 5432?
could not connect to server: Connection refused
    Is the server running on host "localhost" (fe80::1) and accepting
    TCP/IP connections on port 5432?
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/data_objects-0.10.10/lib/data_objects/connection.rb:79:in `new'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/data_objects-0.10.10/lib/data_objects/pooling.rb:181:in `block in new'
    from <internal:prelude>:10:in `synchronize'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/data_objects-0.10.10/lib/data_objects/pooling.rb:176:in `new'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/data_objects-0.10.10/lib/data_objects/pooling.rb:121:in `new'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/data_objects-0.10.10/lib/data_objects/connection.rb:68:in `new'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-do-adapter-1.2.0/lib/dm-do-adapter/adapter.rb:251:in `open_connection'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-transactions-1.2.0/lib/dm-transactions/adapters/dm-do-adapter.rb:69:in `open_connection'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-do-adapter-1.2.0/lib/dm-do-adapter/adapter.rb:276:in `with_connection'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-do-adapter-1.2.0/lib/dm-do-adapter/adapter.rb:33:in `select'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-migrations-1.2.0/lib/dm-migrations/adapters/dm-postgres-adapter.rb:45:in `schema_name'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-migrations-1.2.0/lib/dm-migrations/adapters/dm-do-adapter.rb:26:in `storage_exists?'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-migrations-1.2.0/lib/dm-migrations/auto_migration.rb:65:in `storage_exists?'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-migrations-1.2.0/lib/dm-migrations/auto_migration.rb:120:in `storage_exists?'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-constraints-1.2.0/lib/data_mapper/constraints/migrations/model.rb:22:in `auto_migrate_constraints_down'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-constraints-1.2.0/lib/data_mapper/constraints/migrations/singleton_methods.rb:39:in `block in     auto_migrate_constraints_down'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-core-1.2.0/lib/dm-core/support/descendant_set.rb:64:in `block in each'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-core-1.2.0/lib/dm-core/support/subject_set.rb:210:in `block in each'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `block in each'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `each'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `each'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-core-1.2.0/lib/dm-core/support/subject_set.rb:210:in `each'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-core-1.2.0/lib/dm-core/support/descendant_set.rb:63:in `each'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-constraints-1.2.0/lib/data_mapper/constraints/migrations/singleton_methods.rb:38:in     `auto_migrate_constraints_down'
    from /Users/adam/.rvm/gems/ruby-1.9.3-p125@sinatra/gems/dm-constraints-1.2.0/lib/data_mapper/constraints/migrations/singleton_methods.rb:7:in `auto_migrate!'
    from /Users/adam/Git/mdb/models.rb:403:in `<top (required)>'
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from app.rb:1:in `<main>' 
```

**我的宝石**

```
mdb|moreButton⚡ ⇒ gem list

*** LOCAL GEMS ***

addressable (2.2.8)
backports (2.6.4, 2.6.1)
bcrypt-ruby (3.0.1)
bundler (1.1.5)
daemons (1.1.9)
data_mapper (1.2.0)
data_objects (0.10.10, 0.10.8)
dm-adjust (1.2.0)
dm-aggregates (1.2.0)
dm-constraints (1.2.0)
dm-core (1.2.0)
dm-do-adapter (1.2.0)
dm-migrations (1.2.0)
dm-postgres-adapter (1.2.0)
dm-serializer (1.2.2, 1.2.1)
dm-sqlite-adapter (1.2.0)
dm-timestamps (1.2.0)
dm-transactions (1.2.0)
dm-types (1.2.2, 1.2.1)
dm-validations (1.2.0)
do_postgres (0.10.10, 0.10.8)
do_sqlite3 (0.10.10, 0.10.8)
eventmachine (1.0.0, 0.12.10)
fastercsv (1.5.5)
hpricot (0.8.6)
json (1.7.5, 1.6.7)
json_pure (1.7.5, 1.6.7)
mime-types (1.19)
multi_json (1.3.6, 1.0.4)
multimap (1.1.2)
rack (1.4.1)
rack-protection (1.2.0)
rack-test (0.6.2, 0.6.1)
rake (0.9.2.2)
rest-client (1.6.7)
rubygems-bundler (1.0.3)
rvm (1.11.3.5)
sass (3.2.1)
shotgun (0.9)
sinatra (1.3.3, 1.3.2)
sinatra-contrib (1.3.1)
sinatra-reloader (1.0)
stringex (1.4.0, 1.3.3)
thin (1.5.0)
tilt (1.3.3)
time-ago-in-words (0.1.2)
uuidtools (2.1.3, 2.1.2) 
```

**app.rb 宝石文件**

```
source 'http://rubygems.org'
gem 'sinatra'
gem 'data_mapper'
gem 'hpricot'
gem 'dm-core'
gem 'json'
gem 'dm-postgres-adapter'
gem 'dm-adjust'
gem 'time-ago-in-words'
gem 'sass'
gem 'rest-client'
gem 'multimap'

group :development do
  gem "dm-sqlite-adapter"
  gem 'sinatra-reloader'
end 
```

**模型.rb**

```
if $development
    DataMapper.setup(:default, "postgres://localhost/mistakesdb_default")
else
    DataMapper.setup(:default, "postgres://giberish:giberish@ec2-23-21-209-147.compute-1.amazonaws.com:5432/giberish")
end
DataMapper.finalize
if $development
    #DataMapper.auto_upgrade!
    DataMapper.auto_migrate!
else
    DataMapper.auto_upgrade!
    #DataMapper.auto_migrate!
end

###### required.rb ######
$development = File.exists?('/Users/adam')

##### Top of app.rb #####
require "./models.rb"
require "./required.rb"
require "sinatra"
require "sass"
require "sinatra/reloader" if $development
require "time-ago-in-words"
require "rest_client"
require "multimap" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:52:38.153

在开发模式下，DataMapper 正在尝试连接到名为 errorsdb_default 的本地 PostgreSQL 数据库。看来您根本没有运行本地 postgres 安装，因此出现“连接被拒绝”错误。根据您的操作系统，您可以在[http://www.enterprisedb.com/](http://www.enterprisedb.com/)找到一个简单的 postgres 安装程序。

# java - 与 MySQL 的 Spring 池连接

> ID：13367364
> 
> 赞同：0
> 
> 时间：2012-11-13T19:27:47.350
> 
> 标签：java, mysql, spring, datasource, connection-pooling

我的应用程序（假设）有以下服务器；我使用 MySQL。

1) 应用程序使用的数据库（位于日本的服务器）
2) 数据库备份（位于秘鲁的服务器）
3) 紧急数据库（位于美国的服务器）

关于 Spring 的功能，我有几个问题：

A）如何在所有数据源中同时存在？

B) 我如何在 Spring 中创建一个连接池，以便如果我的第一个数据源没有响应，系统会自动使用第二个数据源？

这是我的实际`applicationContext-datasource.xml`

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<bean 
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location">
        <value>META-INF/database.properties</value>
    </property>
</bean>

<bean id="dataSource" 
      class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="hibernate.hbm2ddl.auto" value="${hibernate.hbm2ddl.auto}"/>
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean>

<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource">
        <ref local="dataSource"/>
    </property>
</bean> 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:54:35.970

如果我有同样的问题，我会尝试在应用程序边界之外解决它，以免应用程序与数据库拓扑耦合。

我应该请求将对象持久化到 Spring/Hibernate 将其视为数据库的逻辑实体，该实体不是应用程序的一部分，但它知道数据库拓扑和可用性，然后将数据分配委托给它。

通常你可以通过以下方式解决这个问题：

*   [数据库复制功能](http://dev.mysql.com/doc/refman/5.0/en/replication.html)
*   [数据库集群](http://dev.mysql.com/doc/refman/5.0/en/mysql-cluster.html)

# c# - 如何使用 SQL Command Builder 和 SQL Data Apdater

> ID：13367365
> 
> 赞同：1
> 
> 时间：2012-11-13T19:27:49.487
> 
> 标签：c#, .net, dataadapter, data-access, sqlcommandbuilder

[我从http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)阅读了 SQL 命令生成器类 ，我发现我可以使用 select 和 update 命令显示对数据集/数据库进行的更新.

如果我使用单个数据集，SQL 命令生成器的概念很清楚，但如果我想使用两个不同的数据集怎么办？

场景：我正在将数据库中的值读入一个数据集 ds1；这是分配给 sql 适配器和 sql 命令生成器。现在，我只从 ds1 中读取选定的值并将其存储到第二个数据集 ds2 中；未分配给 sql 数据适配器和 sql 命令生成器。

如果我要更新 ds2 上的任何数据，我担心它是否会更新数据库。另外，我应该如何使用 SQL 命令生成器和 SQL 适配器来做到这一点。

//主数据集

```
ds = new ProductDataSet();
        command = new SqlCommand(
            "SELECT no, name, price, cost, dept FROM PRODUCTS", connection);
        adapter = new SqlDataAdapter();
        adapter.SelectCommand = command;            
        adapter.Fill(ds, "table"); 
```

主数据集填充表单加载事件。用户将输入他选择的项目编号，该项目将从主 ds 搜索并保存/显示到 2nd ds（2nd ds 目前未与任何适配器或命令生成器连接）。例如；第二个 ds 有 3 个项目。

现在说用户更新第二个 ds 上的任何信息，它应该自动更新数据库并显示在网格上。

//第二次ds2更新代码

```
for (int i = 0; i < ds2.Tables[0].Rows.Count; i++)
                            {
 string item = ds2.Tables[0].Rows[i][0].ToString();                   

command = new SqlCommand("UPDATE PRODUCTS SET " + _colName + " = '" + _newValue + "'" + "WHERE ITEM_NO = '" + item + "'", Class1.conn);                                    
datagrid.DataSource = ds2.Tables[0]; 
```

}

根据您的建议，如果我在上面的代码中添加/声明适配器/生成器，它不起作用。我收到表映射错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:30:52.727

使用另一个 SQLAdapter 和 SQLCommandBuilder。该页面上的示例显示了如何更新数据库。您只需要以查询的形式提供要更新的字段，例如：

```
SELECT Name, Address, Phone, Email FROM Contact 
```

命令生成器将生成正确的 SQL`UPDATE`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-20T08:39:44.993

SqlCommandBuilder 会根据单个表的 SELECT 语句自动生成 INSERT、UPDATE 和 DELETE sql 语句。

对于要使用 SqlCommandBuilder 生成的 Transact-SQL 语句，有 2 个步骤

步骤 1\. 设置 SqlDataAdapter 对象的“SelectCommand”属性

```
 SqlDataAdapter dataAdapter = new SqlDataAdapter();

      dataAdapter.SelectCommand = new SqlCommand("SELECT_Query", con);

      DataSet dataSet = new DataSet();
      dataAdapter.Fill(dataSet, "Students"); 
```

步骤 2\. 创建 SqlCommandBuilder 类的实例，并使用 SqlCommandBuilder 对象的 DataAdapter 属性关联上面创建的 SqlDataAdapter 对象

```
 SqlCommandBuilder builder = new SqlCommandBuilder();
        builder.DataAdapter = dataAdapter; 
```

步骤 3\. 更新 ds1 的记录

```
 dataAdapter.Update(ds1, "Students"); 
```

# .net - WPF 外部程序集名称空间

> ID：13367366
> 
> 赞同：0
> 
> 时间：2012-11-13T19:27:55.500
> 
> 标签：.net, wpf, assemblies

我想知道如何在 XAML 中引用第三方项目的程序集。

有时我看到

```
xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit" 
```

有时我看到

```
xmlns:tn="clr-namespace:WPFTaskbarNotifier;assembly=WPFTaskbarNotifier" 
```

`URL`样式和样式之间有什么区别`clr-namespace`以及何时使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T19:42:05.747

XAML 加载器必须知道 XAML 树中的元素引用了哪些程序集。它使用 XML 命名空间来查找此值。

`clr-namespace`样式命名空间以 XAML 加载器可以定位程序集并加载其中定义的类型的方式进行特殊格式化。您可以使用此命名空间格式引用*任何程序集。**在同一程序*集中引用类型时，您**必须**使用此格式。

该`URL`样式是一种更传统的 XML 命名空间样式。URL[应该指向一个位置，您可以在其中获取有关命名空间的信息](http://www.oreillynet.com/pub/a/oreilly/xml/news/xmlnut2_0201.html)，例如 XSD 模式等。但通常它们只是 404'd。[您可以通过使用XmlnsDefinitionAttribute](http://msdn.microsoft.com/en-us/library/system.windows.markup.xmlnsdefinitionattribute.aspx)定义来允许引用程序集中类型的调用者使用这种命名空间样式。

只需在您的 AssemblyInfo.cs 文件中为每个命名空间段放置一个：

```
[assembly: XmlnsDefinition("http://www.Herp.com/2012/", "Herp")]
[assembly: XmlnsDefinition("http://www.Herp.com/2012/", "Herp.Derp")] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:38:01.663

两者没有区别；他们都指向同一个程序集。

WPF 允许开发人员使用[`XmlnsDefinition`](http://msdn.microsoft.com/en-us/library/system.windows.markup.xmlnsdefinitionattribute.aspx)程序集级别的属性注册自定义命名空间。这些命名空间随后可供引用已编译程序集的其他项目使用。您还可以使用此属性将多个 CLR 命名空间合并在一起（WPF 本身会执行此操作），这可以简化生成的 XAML 以及对 XAML 设计器隐藏您的内部项目结构。

但除了外观上的差异之外，这两个名称空间字符串的含义相同，并且可以互换使用。这里唯一的限制是您不能在定义它们的程序集中使用这些自定义命名*空间*；它们是添加到最终程序集中的元数据的一部分，在此之前编译器无法使用它们。

# asp.net-mvc - 将 MongoDB 和 SQL Server Express 与 Asp.net MVC 一起使用

> ID：13367368
> 
> 赞同：2
> 
> 时间：2012-11-13T19:28:07.183
> 
> 标签：asp.net-mvc, mongodb, sql-server-express

我正在使用托管在 VPS 中的 Asp.Net MVC 4 和 C# 构建一个网站。该网站有很多分享评论/回复功能（我需要存储很多评论）。[我本来打算免费使用MongoDB，也很适合存储博客/评论，但看了这篇文章后](http://blog.engineering.kiip.me/tagged/riak/chrono)有点犹豫。

所以现在我正在考虑使用 MongoDb 来存储评论和回复，以及使用 10GB 限制的 SQL Server Express 版本来存储用户帐户和其他用户配置文件数据。

可以在一个 Web 应用程序中使用 2 个这样的不同数据库吗？或者是否有任何其他类似于 MongoDb 的稳定文档数据库，我可以使用并且不必使用 SQL 服务器？RavenDb 是一种选择吗？提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:14:33.657

是的，可以在一个 Web 应用程序中使用两个不同的数据库。更重要的是 - 这样做非常好，因为每种类型的数据库都有其优点和缺点，它们永远不适合做每一项工作。您可能选择了 MongoDB，因为您听说它非常适合存储大量数据和繁重的查询。这大部分是正确的，但有一些警告。另一方面，SQL Server 可能要慢得多（取决于确切的工作流程），并且很容易因大量写入而超载。
首先 - 它运作良好。大多。在重负载时，它会尽可能地努力。但是它不如其他一些并行写入高效（因为大量使用锁定），并且如果您必须保持某些集合或文档同步，它也不是“非常安全” - 例如SQL事务，它在不同的地方做很多事情表，因为 mongo 只为您提供文档级事务（单个文档上的每个更改都是原子的）。
还有其他稳定的文档数据库，例如看看 CouchDB - 它更加面向写入并且由于多版本并发控制而具有一些有趣的可能性。

# hash - 是否有可能将手机号码的哈希码转换为实数我想从我的手机号码哈希码中知道手机号码

> ID：13367373
> 
> 赞同：0
> 
> 时间：2012-11-13T19:28:17.663
> 
> 标签：hash, hashmap, hashcode, hashset, gethashcode

是否有可能将手机号码的哈希码转换为实数我想从给定的手机号码哈希码中知道手机号码？仅作为测试目的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:31:04.427

不，你不会。散列函数具有破坏性

# javascript - 获取子域Javascript的域名

> ID：13367376
> 
> 赞同：33
> 
> 时间：2012-11-13T19:28:32.500
> 
> 标签：javascript, jquery, dns, subdomain

我如何使用 javascript`example.com`从一组可能的子域中获取域名`sub1.example.com` `sub2.example.com` `sub3.example.com` ...？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-11-13T19:44:01.337

```
var parts = location.hostname.split('.');
var subdomain = parts.shift();
var upperleveldomain = parts.join('.'); 
```

要仅获取二级域，您可以使用

```
var parts = location.hostname.split('.');
var sndleveldomain = parts.slice(-2).join('.'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-02-29T23:06:25.340

接受的答案将有助于获得二级域。但是，您可能需要考虑一些称为“公共后缀”的东西。否则，您可能会得到意想不到的错误结果。

例如，以域`www.amazon.co.uk`. 如果你只是尝试获得二级域名，你最终会得到`co.uk`，这可能不是你想要的。那是因为`co.uk`它是一个“公共后缀”，这意味着它本质上是一个顶级域。以下是公共后缀的定义，取自[https://publicsuffix.org](https://publicsuffix.org)：

> “公共后缀”是互联网用户可以（或历史上可以）直接注册名称的后缀。

如果这是您的应用程序的关键部分，我会研究类似`psl`( [https://github.com/lupomontero/psl](https://github.com/lupomontero/psl) ) 的域解析。它适用于 nodejs 和浏览器，并在 Mozilla 维护的公共后缀列表上进行了测试。

这是他们自述文件中的一个简单示例：

```
var psl = require('psl');

// TLD with some 2-level rules.
psl.get('uk.com'); // null);
psl.get('example.uk.com'); // 'example.uk.com');
psl.get('b.example.uk.com'); // 'example.uk.com'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-05T17:55:43.107

这更快

```
const firstDotIndex = subDomain.indexOf('.');
const domain = subDomain.substring(firstDotIndex + 1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-13T12:47:03.567

此处解释了通用解决方案[http://rosscrivener.co.uk/blog/javascript-get-domain-exclude-subdomain](http://rossscrivener.co.uk/blog/javascript-get-domain-exclude-subdomain) 从上面的链接

```
var domain = (function(){
   var i=0,domain=document.domain,p=domain.split('.'),s='_gd'+(new Date()).getTime();
   while(i<(p.length-1) && document.cookie.indexOf(s+'='+s)==-1){
      domain = p.slice(-1-(++i)).join('.');
      document.cookie = s+"="+s+";domain="+domain+";";
   }
   document.cookie = s+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+domain+";";
   return domain;
})(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-14T14:16:23.157

```
 function getDomain() {
        const hostnameArray = window.location.hostname.split('.')
        const numberOfSubdomains = hostnameArray.length - 2
        return hostnameArray.length === 2 ? window.location.hostname : hostnameArray.slice(numberOfSubdomains).join('.')
    }
    console.log(getDomain());
```

这将删除所有子域，因此“abcdtest.com”将变为“test.com”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-22T20:06:22.367

如果要验证特定子域是否存在

```
var parts = location.hostname.split('.');
if(parts.includes('subdomain_to_search_here')){
   //yes
}else{
   //no
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-25T16:04:23.150

一些更强大的版本，它与子域计数无关

```
function getDomain() {
   const hostname = window.location.hostname.split('.');
   domain.reverse();
   return `${hostname[1]}.${hostname[0]}`;
} 
```

# c++ - 如何确定最快的链接顺序？

> ID：13367377
> 
> 赞同：38
> 
> 时间：2012-11-13T19:28:40.787
> 
> 标签：c++, performance, linker, ld

我有大约 50 个不同的静态库链接到我的 c++ 项目中，链接平均需要 70 秒。

我发现这次库的链接顺序发生了变化。这是可以预料的，我猜如果链接器不必在它建立的整个符号表中继续搜索一组符号。

我想我可以使用“nm”来获取静态库之间的依赖关系图。但是，这只会给我一个“正确”的链接顺序。获得最快链接顺序涉及哪些因素？

我觉得它与上述依赖关系图有关，方法是通过遍历尝试最小化一些数量，但我真的不确定是哪个。

任何帮助，将不胜感激。

我主要使用 intel 编译器和 gcc 编译器。当我用 top 检查它时，它们似乎都在使用 GNU ld 链接器。希望这可以帮助...

因此，为了进一步澄清我要问的问题，我已经知道如何从一组静态库中获得 1-pass ordering。我自己编写了这个脚本，但正如奥拉夫在下面的回答所暗示的那样，有众所周知的工具可以做到这一点。

我的问题是，我已经有两个 1-pass 链接排序，其中一个在 ~85 秒内运行，另一个在 ~70 秒内运行。很明显，我们仍然可以在 1-pass 订单中进行更多优化。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T22:48:33.720

作为替代方案，为什么不尝试将您的库编译为共享库而不是静态库呢？

在我工作的地方，一个大型项目的链接时间约为 6 分钟，这仅适用于 5 个库！

我的解决方案是（对于调试版本），按字母顺序创建 .so 文件（libA.so、libB.so 等），这样每个单独的链接都不会太长，最终链接要短得多，因为所有（部分）链接以前做过。发布版本是以老式方式构建的，因为我的新方法存在感知“危险”。

使用这种方法，我设法将 1 个模块的编译/链接周期从 6 分钟缩短到 10 秒。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T20:00:10.593

过去，静态库中对象的顺序很重要。您可以使用以下方法对对象进行相应的排序：

> $ 领主 *.o | 排序

也许你可以对你的主要对象和库做同样的事情，例如`lorder main.o test.o libsome.a libthing.a | tsort`. 看[男主](http://www.unix.com/man-page/Linux/1/lorder/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T02:26:07.417

根据[比较 ld 和 gold](http://code.google.com/p/mclinker/wiki/RelatedWork)的信息，ld 的速度受符号表大小的影响。随着符号表从处理目标文件中增长，链接步骤变得越慢。因此，如果您有两个不同的 1-pass 链接顺序，则将具有大量符号的库按该顺序稍后修复的那个应该链接得更快。您应该能够修改拓扑排序以在排序标准中包含符号计数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-07T17:54:32.140

您说的是基于对象和库的顺序的一次性排序，但是如果它正在通过静态库进行搜索，则不能保证静态库中的任何内容都将以任何特定的顺序排列，实际上您只能控制它通过以某种方式订购静态库`ar`。

此外，在不了解链接器如何使用静态库（y|ies）的情况下，可以做出的两个最佳假设是：

1.  它创建一个符号哈希表，引用提供或需要它们的对象；如果这是一个准确的假设，那么您可以在静态库上获得的最佳下限是填充此类哈希表并从中读取所需的时间。
2.  它根据存档索引中给出的顺序盲目地从存档中读取。

作为尝试找到最佳链接时间的下限，请尝试将存档中的所有或部分对象链接为可重定位对象；对于子集，如果可能，识别所有实际链接的对象。

的手册页`lorder`表明您可以使用`ar ts <archive>`... 获得相同的结果，这将为您打印有序列表。的手册页`ar`似乎表明`ar`使用该`s`标志运行将自动将该最佳排序存储在存档的索引中。

另外，请注意可能存在循环依赖关系，但如果您已经搞砸了，`tsort`您应该已经意识到这一点。

最后，我将留给您最后一条信息。您想要的是可以解决 NP 完全问题的东西。祝你好运。

* * *

最近一段时间，我一直在为我正在处理的构建运行一些时间测试；我已经将`s`标志添加到我`ARFLAGS`的，看看它有什么效果。

总的来说，它似乎增加了我的构建时间，但我相信有一个合乎逻辑的解释：

*   大多数可执行文件/共享对象不使用静态链接
*   它正在构建每个静态库的 PIC 和非 PIC 版本

如果我们更多地使用静态库，我们可能会看到这样做的好处。

# c# - C# 正则表达式过滤

> ID：13367380
> 
> 赞同：0
> 
> 时间：2012-11-13T19:29:02.060
> 
> 标签：c#, regex

我需要获取 XML 的值：

```
<usr_clan_id>123</usr_clan_id> 
```

我需要得到 123，它的例子。我会尝试使用：

```
Match match = Regex.Match(input, @"<usr_clan_id>([0-9])</usr_clan_id>$",
RegexOptions.IgnoreCase); 
```

但这很糟糕：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:34:56.790

```
var doc = XDocument.Parse(xmlstring);
var value = doc.XPathSelectElement("//usr_clan_id").Value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:35:06.787

最简单的解决方案

```
XDocument xdoc = XDocument.Parse(@"<usr_clan_id>123</usr_clan_id>");
int id = (int)xdoc.Element("usr_clan_id"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:36:07.277

如果您得到一个巨大的 XML 文件，请使用解析器并按照注释中的建议使用 XPath 获取值。如果您只获得问题中包含的简短 XML 字符串，那么我认为 RegEx 非常好。

关于正则表达式：您只匹配一位数字。而是使用`+`which 匹配一个或多个数字。

```
@"<usr_clan_id>([0-9]+)</usr_clan_id>$" 
```

# java - 使用 GenericQueue 以相反的顺序打印用户输入的单词。爪哇

> ID：13367381
> 
> 赞同：0
> 
> 时间：2012-11-13T19:29:04.260
> 
> 标签：java, queue, stack

我对 GenericQueue 感到困惑。仅添加元素（queue.enqueue）并从中删除元素（queue.dequque），如何从用户输入中显示反向单词？

更具体地说，我有以下java代码。

```
import java.util.Scanner;

public class displayreverse {
public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        GenericQueue<String> queue = new GenericQueue<String>();
        System.out.print("Enter some words: ");
        String words = input.nextLine();

        queue.enqueue(words);
        System.out.println(queue);

    }
} 
```

输出将如下所示：

```
run:
Enter some words: who are you
Queue; [who are you] 
```

我将如何使用 GenericQueue 以使其以相反的顺序显示？输出应该是：“你是谁”而不是“你是谁”

我的 GenericQueue 类如下：

```
public class GenericQueue<E> {
    private java.util.LinkedList<E> list = new java.util.LinkedList<E>();
            public void enqueue(E e){
                list.addLast(e);
            }
            public E dequeue(){
                return list.removeFirst();
            }
            public int getSize(){
                return list.size();
            }
            public String toString(){
                return "Queue; " + list.toString();
            }
} 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:39:01.717

创建`enqueueFirst`方法在`GenericQueue`前面添加元素（或更改`enqueue`为在前面而不是最后添加）

```
 public void enqueueFirst(E e){
    list.addFirst(e);
  } 
```

用于接收所有在同一行中的单词`enqueueFirst`，如下所示：

```
 System.out.print("Enter some words: ");
    String wordsLine = input.nextLine();
    String[] words  = wordsLine.split(" ");//split the words separated by space
    for(String word: words){
        queue.enqueueFirst(word);//add one word at a time
    } 
```

休息看起来不错。

# sql - JOIN 不适用于 where

> ID：13367385
> 
> 赞同：1
> 
> 时间：2012-11-13T19:29:14.070
> 
> 标签：sql, sql-server, sql-server-2008

我有这个代码：

```
select
  B.plc_nomeConta, B.plc_classificador, B.plc_id,
  A.cap_idPlanoContasFin, SUM(A.cap_valorfatura) as Total     
from
  tbl_PlanoFinanceiro B
  left outer join erp_contaspagar A on B.plc_id = A.cap_idPlanoContasFin
   /*  where A.cap_idEmpresa like 2*/
group by
  B.plc_nomeConta,
  B.plc_classificador,
  B.plc_id,
  A.cap_idPlanoContasFin 
```

此代码返回 185 行，

```
(-) COFINS     10.01.01.01.004  330  330   971090,97
(-) ICMS       10.01.01.01.002  328  328   1378407,11
(-) IMPOSTOS   10.01.00.00.000  324  NULL  NULL
(-) IMPOSTOS   10.01.01.00.000  325  NULL  NULL
(-) IMPOSTOS   10.01.01.01.000  326  NULL  NULL
(-) ISS        10.01.01.01.001  327  327   1000960,59
(-) PIS        10.01.01.01.003  329  329   240600,27 
```

但是当我取消注释时`where /* where A.cap_idEmpresa like 2*/`，只返回 `A.cap_idPlanoContasFin is not null`, In need`B.plc_nomeConta, B.plc_classificador, B.plc_id`出现的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:31:50.437

您的`WHERE`过滤器正在将 转换`LEFT OUTER JOIN`为`INNER JOIN`.

本质上，您是在说“向我显示左侧的所有记录，并且仅显示右侧匹配`cap_idEmpresa`且值为`2`”的记录。

这意味着您只显示匹配的记录，即任何不匹配的记录在该字段中`INNER JOIN`都不能有值。`2`

要更正，您需要考虑 null：

`WHERE (A.cap_idEmpresa like 2 OR A.cap_idEmpresa IS NULL)`

或细化您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:24:50.180

我已经用 JNK 和 cadrell0 解决了，使 A.Cap_idempresa like 2 成为 JOin 的一部分，感谢这里的代码

```
 alter proc Ntrimestre (@emp integer,@inicio datetime,@fim datetime) as
        select  B.plc_nomeConta, B.plc_classificador ,B.plc_id ,
        A.cap_idPlanoContasFin, SUM (A.cap_valorfatura) as Total
        from tbl_PlanoFinanceiro B
        left outer join erp_contaspagar A on B.plc_id = A.cap_idPlanoContasFin 
        and   A.cap_idEmpresa like @emp
        and A.cap_vencfatura <= convert(datetime,@fim,1) 
        and cap_vencfatura >= convert(datetime,@inicio,1) 
        group by B.plc_nomeConta, B.plc_classificador ,B.plc_id, A.cap_idPlanoContasFin
       order by B.plc_classificador 
```

与 where 的另一种方式：

```
 alter proc NtrimestreMzFSant (@inicio datetime,@fim datetime) as
       select  B.plc_nomeConta, B.plc_classificador ,B.plc_id ,
        A.cap_idPlanoContasFin, SUM (A.cap_valorfatura) as Total
       from tbl_PlanoFinanceiro B
       left outer join erp_contaspagar A on B.plc_id = A.cap_idPlanoContasFin  
        and A.cap_vencfatura <= convert(datetime,@fim,1) 
         and A.cap_vencfatura >= convert(datetime,@inicio,1) 
        where B.plc_tipo <> 'Sintética' and A.cap_idEmpresa =2 or A.cap_idEmpresa=2234 
        group by B.plc_nomeConta, B.plc_classificador ,B.plc_id, A.cap_idPlanoContasFin
        order by B.plc_classificador 
```

感谢每个人的帮助

# python - 如何重新加载此模块？

> ID：13367386
> 
> 赞同：2
> 
> 时间：2012-11-13T19:29:16.243
> 
> 标签：python, module, reload

```
from mypackage.pkg import mymodule
...
reload(mypackage.pkg.mymodule) 
```

结果是`NameError: global name 'mypackage' is not defined.`

应该如何重新加载 mymodule？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T19:29:41.010

```
from mypackage.pkg import mymodule

reload(mymodule) 
```

或者

```
import mypackage.pkg.mymodule
...
reload(mypackage.pkg.mymodule) 
```

# javascript - Is there a limit on length of the key (string) in JS object?

> ID：13367391
> 
> 赞同：95
> 
> 时间：2012-11-13T19:29:46.147
> 
> 标签：javascript, android, android-webview, javascript-objects

So we had a case where we would have an object, where key is id (int) and the value is the string. But we noticed that most of the times, we look up id based on the string, so we decided to reverse it and make a string the key and the value is the id. Because that way instead of going through each item and compare values, we could just do `var id = storage[text];`. Below are the examples of what we did.

Here's the example of the old implementation:

```
var storage = {
  0 : null,
  1 : "Hello",
  2 : "world!",
  3 : "How are you?"
} 
```

Here's the example of the new implementation:

```
var storage = {
  "null" : 0,
  "Hello" : 1,
  "world!" : 2,
  "How are you?" : 3
} 
```

I understand that now the string is the key and it's ok to get the same id for the same strings. But since now the string can be potentially pretty huge (slim chance, but probably max 1KB per string), **is there a length limit JS or Android webview puts on the object keys?**

And also, does this implementation have disadvantages? I haven't noticed any issues so far, but you never know.

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2015-03-03T21:04:43.447

I have researched this a bit.

[MDN is silent](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_Accessors) on the issue, and so is the spec ([ES5](http://www.ecma-international.org/ecma-262/5.1/#sec-11.2.1), [ES6](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-property-accessors)). They only state that the property accessor must be a string, without any qualifications – in other words, there is no limit as far as the spec is concerned. That's hardly surprising.

How browsers handle it, is another matter. I have set up [a test](http://jsbin.com/nixafu/13/) and run it in a number of browsers. Chrome 40 (Desktop), Chrome 40 (Android 5.1), Firefox 36, Opera 27, and IE9+ can deal with a property name of up to 2^(27) characters. Safari 8 (OS X Yosemite) can even handle property names of 2^(30) characters.

For all those browsers except IE, the maximum property length is the same as the maximum string length. IE9+ can handle a maximum string length of ~2^(30) characters, but the limit for object keys is at 2^(27) characters, just as in the other browsers.

The test didn't work in IE8 and Safari on iOS, presumably due to memory issues caused by the test code.

In a nutshell, it is safe to use long property names, even when taking it to extremes. As long as the strings themselves stay within the limits of what browsers can handle, you can use them as property names as well.

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-11-13T20:11:41.080

No, there is no limit for the string length (as long as it fits into memory), and your implementation seems okay too. It's acutally quite common to have those 'turned around' arrays with e.g. boolean values. And as to the strings as keys: The strings are immutable symbols that are stored at a certain address, and what's actually used as the index for the array is that address (aka pointer aka reference) and not the string itself.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-05-09T16:19:01.237

It appears as though with ECMAScript 2016, there is now a definitive answer to this question. According to the [MDN Web Docs on string.length](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/length):

> ECMAScript 2016 (ed. 7) established a maximum length of 2^53 - 1 elements. Previously, no maximum length was specified.

You can also find this specified in the [ECMAScript® 2016 Language Specification](https://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types-string-type):

> The String type is the set of all ordered sequences of zero or more 16-bit unsigned integer values (“elements”) up to a maximum length of 2^(53)-1 elements.

# php - 如何从 2 个表中获取结果并且不显示重复项

> ID：13367393
> 
> 赞同：0
> 
> 时间：2012-11-13T19:29:47.273
> 
> 标签：php, mysql

我有 2 张桌子

```
USERS
------------
id   | user
1    | john
2    | George
3    | Andy

Text
--------------------------------
id | user |date        |text
1  |  1   |2012/10/2   | ABC
2  |  3   |2012/11/2   | ABCD
3  |  2   |2012/12/2   | ABCDE
4  |  2   |2012/1/2    | ABCDE 
```

在`Text`表中，`user`列`id`从`Users`表中获取。

我有以下查询：

```
 $sql= mysql_query ("SELECT
    user.id,
    users.user,
    CASE
        WHEN text.date = CURDATE() THEN '1'
        ELSE '0'
    END AS 'today',
    text.date,
    text.text
FROM  users user, text text
WHERE users.id = text.user;");

if (mysql_num_rows($sql)<=0)
echo  "NO ENTRIES FOUND";

while ($row = mysql_fetch_assoc($sql))
{

          $user =$row['user'];  
           $id  =$row['id'];  
             $date2  =$row['date'];  

            if ($row['today'] == 1) { echo"
 <div class='z'><a href='viewuser.php?id=$user'>$user</a></div><br>         
        "; } else { echo"
 <div class='zx'><a href='viewuser.php?id=$user'>$user</a></div><br>         
        "; }; 

} 
```

我的问题是：

如何显示日期与今天日期相同的用户，第一个`div(zx)`，如果不是第二个`div(z)`，从 2 个表中比较，如果是用户的 2 倍，则显示一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:43:12.383

```
<!-- language: lang-sql -->

SELECT
    u.id,
    u.user,
    CASE
        WHEN t.date = CURDATE() THEN '1'
        ELSE '0'
    END AS 'today',
    t.date,
    t.text
FROM  users u, text t
WHERE u.id = t.user; 
```

现在显示结果只是说

```
if ($row['today'] == 0) { class="zx"; } else { class="z"; } 
```

代码是缩写的，如果您需要详细说明，请告诉我。

这是您使用上面的解决方案更新的代码：

```
$sql = mysql_query ("
SELECT
    u.id,
    u.user,
    CASE
        WHEN MAX(t.date) = CURDATE() THEN '1'
        ELSE '0'
    END AS 'today'
FROM  users u, text t
WHERE u.id = t.user
GROUP BY u.id, u.user");

if (mysql_num_rows($sql) <= 0)
    echo  "NO ENTRIES FOUND";

while ($row = mysql_fetch_assoc($sql))
{
    $user =$row['user'];
    $id =$row['id']; 

if ($row['today'] == 1) {
     echo "<div class='zx'><a href='viewuser.php?id=$id'>$user</a></div><br>";
} else {
     echo "<div class='z'><a href='viewuser.php?id=$id'>$user</a></div><br>";
}

} 
```

# svn - 无法将乌龟 svn 树信息复制到剪贴板，所以我可以将其粘贴到 MS Word

> ID：13367394
> 
> 赞同：0
> 
> 时间：2012-11-13T19:29:50.240
> 
> 标签：svn, tortoisesvn

我正在使用存储库浏览器 Torstoise SVN，我需要将最新修订文件名/修订/日期/大小信息的整个树复制到 MS Word。有没有简单的方法来复制这些信息？

我可以看到此信息，当我选择并右键单击时，我没有看到任何复制到剪贴板此信息。只有一个复制 URL 到剪贴板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:52:01.593

如果您使用 svn 命令行[ls 命令](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.list.html)并将结果通过管道传输到文件，这非常容易。

svn ls -Rv [http://path.to.repo](http://path.to.repo) > output.txt

'R' 参数是递归的，而 'v' 是冗长的。

# php - 如果我在 phpmyadmin 上删除一个 mySQL 数据库，它会影响上传到我的 ftp 服务器上的内容吗？

> ID：13367395
> 
> 赞同：0
> 
> 时间：2012-11-13T19:29:57.577
> 
> 标签：php, mysql, wordpress, phpmyadmin

如果我在 phpmyadmin 上删除一个 mySQL 数据库，它会影响上传到我的 ftp 服务器上的内容吗？mySQL 表和 FTP 内容是否以某种方式相关？我正在使用 wordpress 设置网站。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T19:30:51.157

不，它们没有关系。

删除 MySQL 数据库不会影响 FTP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:37:30.587

数据库与您的 FTP 文件没有直接关系，因此删除数据库不会删除 FTP 内容。不过，您的网站有可能使用数据库中的数据来引用 FTP 内容。我不知道您的网站是做什么的，但如果您允许上传文件，这些文件可能会存储在您的 FTP 目录中，并带有来自数据库的文件列表。因此，删除数据库可能会破坏您的网站，并且您将不再拥有存储在数据库中的有关 FTP 文件的数据。如果您对此有任何疑问，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T19:32:32.660

不会。删除不会影响您服务器上的文件。

# android - Android AppWidgetManager 方法 updateAppWidget 未能设置意图、加载数据。它随机发生

> ID：13367397
> 
> 赞同：8
> 
> 时间：2012-11-13T19:30:07.817
> 
> 标签：android, android-appwidget

我的小部件由 2 个按钮和一个显示数据的列表视图组成。大多数时候，当小部件提供者的 onUpdate 方法被调用时，一切都正常加载并且每个人都很开心。

但是我注意到有时在调用更新方法后，小部件完全无法加载其数据。列表视图为空，所有按钮均无响应。就好像我将布局初始化到小部件中，但没有设置任何待处理的意图和列表适配器。

我记录了所有内容，发现情况并非如此。每次都会创建挂起的意图，就像列表适配器一样，包括失败的随机时间。很长一段时间以来，我认为这与列表数据如何填充到适配器中有关，但每次看到它都有效，再加上按钮意图不起作用的事实让我相信 updateAppWidget 方法(ComponentName, RemoteViews) 是失败的原因。但是，没有错误堆栈可以帮助我确认这一点。

这是在 AppWidgetProvider 的 onUpdate 方法调用的单独服务中运行的代码：

```
@SuppressWarnings("deprecation")
private void updateWidget(int[] ids) {

    AppWidgetManager widgetManager = AppWidgetManager.getInstance(this);
    int[] widgetIds = widgetManager.getAppWidgetIds(new ComponentName(this, WidgetReceiver.class));

    for (int currentWidgetId : widgetIds) {

        RemoteViews widget = new RemoteViews(this.getPackageName(), R.layout.widget_layout);

        Intent intent = new Intent(this, WidgetService.class);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, currentWidgetId);
        intent.putExtra("random", randomNumber);
        randomNumber++;
        intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));

        widget.setRemoteAdapter(currentWidgetId, android.R.id.list, intent);

        Intent clickIntent = new Intent(this, DetailsActivity.class);
        PendingIntent pending = PendingIntent.getActivity(this, 0, clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        widget.setPendingIntentTemplate(android.R.id.list, pending);

        Intent settingsIntent = new Intent(this, WidgetSettingsActivity.class);
        settingsIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        settingsIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        PendingIntent settingsPending = PendingIntent.getActivity(this, 0, settingsIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        widget.setOnClickPendingIntent(R.id.widget_settings, settingsPending);

        Intent mainIntent = new Intent(this, MainActivity.class);
        PendingIntent mainPending = PendingIntent.getActivity(this, 0, mainIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        widget.setOnClickPendingIntent(R.id.widget_logo, mainPending);

        ComponentName widgetCompName = new ComponentName(this, WidgetReceiver.class);
        widgetManager.updateAppWidget(widgetCompName, widget);
    }
} 
```

这个错误最令人沮丧的是我无法可靠地重新创建它。有时我会（不）走运，它显示出丑陋的头，其他时候（大部分时间）它工作得很好。

我认为有趣的另一件事是，我在 Facebook 的小部件中看到了同样的问题。由于 NDA 我无法在我的应用程序失败时显示屏幕，但我可以显示 Facebook 相同问题的屏幕：

![脸书失败](../Images/258c84651ae946b81a288261d30af132.png)

当 Facebook 的小部件看起来像这样时，它和我的问题完全相同。未加载数据，所有按钮均无响应。

对于 Facebook 和我的小部件，后续的更新间隔通常会使问题消失。

尽管我很感激我不是唯一遇到此问题的人，但在解决此问题之前我仍然不想发布。这里有没有人遇到过这个问题，并且更好地找到了解决方案，甚至是问题的原因？感谢您的帮助。

编辑：有趣的东西。我进行了一项实验，将更新间隔设置为一整天，而不是每 30 分钟一次。我的假设是，更新方法可能不是原因，而是其他原因导致小部件变为空白且无响应。

果然，大约 2 小时后，我检查了我的手机，尽管没有调用更新方法，但小部件已经死了。这会让我相信是其他东西导致了这个问题，`widgetManager.updateAppWidget(widgetCompName, widget);`不像我以前想象的那样。

我知道配置更改可能会导致小部件被重建，因此它可能会失败。但是，如果需要，我已经使用 Service 类的 onConfigurationChanged 方法重新加载小部件。是否还有另一种情况，例如配置更改会导致小部件自行销毁并重新创建？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T00:33:33.887

经过大量的鲜血、汗水和泪水，我找到了解决办法。我将推迟几天确认这个答案，以确保错误不会再次出现，但经过大量观察，我认为它已经解决了。

所以我在原始问题中的编辑评论中是正确的。导致问题的不是 AppWidgetManager 的更新方法，而是其他一些 Android 进程导致应用小部件重新创建自身。不幸的是，我无法隔离该触发器，但我确实找到了解决方案。

在我的 RemoteViewsFactory 类（基本上是用于加载数据集的包装器）中，我有一个如下所示的代码块：

```
RemoteViews views = new RemoteViews(mContext.getPackageName(), R.layout.widget_layout);
if(mItems.size() == 0)
    views.setViewVisibility(R.id.widget_empty, View.VISIBLE);
else
    views.setViewVisibility(R.id.widget_empty, View.GONE);

AppWidgetManager manager = AppWidgetManager.getInstance(mContext);
ComponentName widgetCompName = new ComponentName(mContext, WidgetReceiver.class);
manager.updateAppWidget(widgetCompName, views); 
```

基本上，如果列表为空，我会显示一条 Loading 消息，该消息占据了 listview 所在的整个区域。如果列表不为空，我会隐藏该消息。

所以这就是发生的事情：当工厂被销毁（可能是出于记忆目的）时，小部件*本身*并没有。因此，所有设置数据和内容意图的代码都没有运行。但是，工厂被重新创建，它运行了用新的远程视图对象更新应用程序小部件的代码块。这个远程视图对象没有执行您在我最初发布的 onUpdate() 方法中看到的任何方法，因此它的所有功能都不起作用。

故事的寓意：不要`updateAppWidget`在你的 RemoteViewsFactory 类中使​​用！现在，如果您运行所有必要的行，它可能会起作用，但我无法确认。

# html - 背景图像不覆盖整个屏幕

> ID：13367403
> 
> 赞同：3
> 
> 时间：2012-11-13T19:30:31.377
> 
> 标签：html, css, background

我的背景图片大小为 1620*1080，屏幕分辨率为 1366*768。它怎么可能不覆盖我屏幕的大约 15%（右侧部分）？

这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
body { 
    min-height: 100%;
    min-width: 100%;
    background-image:url(background.png);
    background-repeat: no-repeat;
}

div#container {
    margin: 0 auto;
    background-color: red;

}
</style>
</head>
<div id="container">

</div>
<body>
</body>
</html> 
```

如您所见，我已添加

```
min-height: 100%;
min-width: 100%; 
```

想也许这会有所帮助。并且`background-repeat: no-repeat;`只是因为它不覆盖屏幕而存在。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T19:32:33.630

试试这个：

```
body { 
    background: url(background.png) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

无论窗口比您的图像大还是小，这都会为您提供全尺寸的背景图像。

如果这不起作用，请阅读[这篇 css-tricks 帖子](http://css-tricks.com/perfect-full-page-background-image/)的其余部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T19:34:48.600

你的图像比例是`1620/1080=1.5,`，屏幕分辨率是`1366/768=1.77`。本质上，正在发生的事情是图像以较小的尺寸显示，同时保持按比例缩放。右侧区域被封锁。

尝试只发布尺寸

```
background-size:100% 100%; 
```

# java - 在 Java 中使用 Class.getMethods() 是一项繁重的操作吗？

> ID：13367404
> 
> 赞同：0
> 
> 时间：2012-11-13T19:30:47.873
> 
> 标签：java, reflection

我对 java“Class”API 的性能有疑问。我有一个要求，我有可能像`/car`或`/cars[0]/make`. 对于这些数据库值中的每一个，我必须查看我正在处理的特定类是否具有`/car`类似`setCar`（或方法）`/cars[0]/make`的setter 方法`setCars`。目前，我只是遍历类的所有声明的方法（使用`getMethods`），然后进行一些字符串检查以查看使用的方法名称是否与数据库值匹配。当我这样做时，我不会调用任何方法。虽然，这是使用`Method`API，但实际上并没有进行任何方法调用。就java反射而言，这仍然是一个繁重的操作吗？套用这一点，这是在使用 Java 反射吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:37:57.847

是的，您正在通过调用 getMethods 使用反射。如果您担心性能，您可以使用[JIP 之类的 java 分析器来分析您的代码](http://sourceforge.net/projects/jiprof/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-20T08:30:08.143

是的，java 反射用于查找声明的方法，并且查找已经是一项昂贵的操作，而无需事后调用该方法。

但是 OpenJDK（java 的默认实现）使用内部缓存，因此后续查找同一类上声明的方法要快得多。

任何主要的对象映射框架（到数据库或 JSON）都使用反射，因此只要您的应用程序不处理亚毫秒反应时间内的高频交易，您应该可以在这里使用反射。

# sql - 具有“1-1”搜索的 CONTAINSTABLE 性能

> ID：13367411
> 
> 赞同：2
> 
> 时间：2012-11-13T19:31:17.177
> 
> 标签：sql, sql-server, full-text-search, containstable

我正在使用带有 containstable 函数的查询，使用这样的字符串搜索：“1-1”或类似（如“1 1”或“a a”）问题是查询花费的时间太长并且不会带来很多结果. 取而代之的是相同的查询，但使用其他搜索字符串（如“a”）检索更多结果，完成时间要少得多。这是查询：

```
SELECT     COUNT(d.DocumentID) 
FROM       KnowledgeIndex_Data.dbo.Document d
INNER JOIN CONTAINSTABLE ( KnowledgeIndex_Data.dbo.Document , * , '"1-1"' ) ftt 
        ON ( d.DocumentID = ftt.[Key] ) 
```

注意：全文索引的停用词列表不包含 1

你知道会发生什么吗？谢谢！

这是执行计划

[![计划](../Images/3edd476433dc6c66829b7b0d7c2176fd.png)](https://i.stack.imgur.com/HdVXr.png)

这是表格文档的创建脚本：

```
CREATE TABLE dbo.Document
(
      DocumentID int IDENTITY (1, 1) NOT NULL -- Local int for cross reference tables to save 12 bytes per record
    , DocumentGUID uniqueidentifier NOT NULL

--  , DocumentTypeID tinyint NOT NULL
    , DocumentSourceID smallint NOT NULL -- New Document Source identifier
    , SourceDocumentID nvarchar(80) NOT NULL --crb 2011/08/23 changed from nvarchar(40) to support PageCodes -- asw 2010/02/12 renamed to make purpose more clear

    , DocumentStructureID tinyint NOT NULL -- New Document Structure identifier

    , SortOrder nvarchar(450) NOT NULL -- 2010/06/18 bdw- Add the Sort Order column and index to the Document table

    , ResultDisplayContent xml (DOCUMENT DocumentResultDisplayContentSchemaCollection) NOT NULL  -- Required For All DocumentTypes -- jci 2011/02/22 DOCUMENT added -- jci 2010/07/02 xml schema added
    , DetailDisplayContent xml (DOCUMENT DocumentDetailDisplayContentSchemaCollection) NULL -- Only required for some DocumentTypes -- jci 2011/02/22 DOCUMENT added  -- jci 2011/0/31 xml schema added
    , TeaserDisplayContent xml (DOCUMENT DocumentResultDisplayContentSchemaCollection) NULL -- Teaser Result data. Optional, replaced with main ResultDisplayContent if null. -- jci 2011/02/22 DOCUMENT added -- jci 2010/07/02 xml schema added

, TitleQueryContent nvarchar(max) NOT NULL
, QueryContent nvarchar(max) NOT NULL

, CreatedAt datetimeoffset(2) NOT NULL

, CONSTRAINT pcDocument PRIMARY KEY CLUSTERED -- jci 2011/07/01 replaced -- CONSTRAINT pncDocument PRIMARY KEY NONCLUSTERED
    ( DocumentID ) WITH FILLFACTOR = 100
, CONSTRAINT fkDocumentDocumentSourceID FOREIGN KEY
    ( DocumentSourceID )
    REFERENCES dbo.DocumentSource ( DocumentSourceID )
    ON DELETE CASCADE
, CONSTRAINT fkDocumentDocumentStructureID FOREIGN KEY
    ( DocumentStructureID )
    REFERENCES dbo.DocumentStructure ( DocumentStructureID )
    ON DELETE CASCADE
)
GO 
```

和索引：

```
-- Create Index On Table
CREATE FULLTEXT INDEX ON dbo.Document(QueryContent LANGUAGE N'English' , TitleQueryContent LANGUAGE N'English')
    KEY INDEX pcDocument -- 2011/07/01 replaced --pncDocument
    ON (FILEGROUP SECONDARY)
    WITH STOPLIST = SrsStopWordList -- Use SrsStopWordList
        , CHANGE_TRACKING = OFF , NO POPULATION; -- Update Manually For Performance

GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:27:05.597

我做了如下查询：

```
 SELECT count(*) FROM sys.dm_fts_index_keywords(db_id('KnowledgeIndex_Data'),              object_id('dbo.Document'))
   where display_term like '%1-1%'
   GO 
```

它返回 685053 和 '%nn1%' ir 返回 413578 和 '%engine%' 它返回 2500

请注意，对于我的全文索引，1 不是干扰词。认为这可能与此有关吗？

用表的一部分而不是全部做一个 CONTAINSTABLE 是可能的吗？

CONTAINSTABLE 对所有表 dbo.Document 进行搜索，实际上在该查询之后，我将 WHERE 应用于 Document 的一个字段，这使得 CONTAINSTABLE 做不必要的工作。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:35:49.153

在搜索词上运行 sys.dm_fts_parser 会产生以下结果 -

```
select  *from sys.dm_fts_parser('"1-1"', 1033, 0 ,0)

display_term    expansion_type  source_term
1                0       1-1
nn1              0       1-1
1                0       1-1
nn1              0       1-1 
```

所以全文引擎最终会搜索 4 个不同的搜索词，然后组合结果。你能用 display_term LIKE '1' 或 'nn1' 在你的桌子上运行 sys.dm_fts_index_keywords 并分享结果吗？这可能有助于解释长期运行时间。

# linux - Linux搜索单词并显示整行

> ID：13367412
> 
> 赞同：36
> 
> 时间：2012-11-13T19:31:23.207
> 
> 标签：linux, find, grep

我有一个非常大的日志文件（6 gig）。

我想搜索“2012 年 11 月 12 日”并打印出每一行。

我是一个linux新手，不知道这是怎么做到的。很可能需要更多选项来查看 X 行并通过搜索继续前进。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-11-13T19:33:31.157

```
grep --after-context=5 --before-context=10 'Nov 12 2012' yourfile.log 
```

这将显示包含您的日期文本的每一行，以及匹配行之前的 10 行文本，以及匹配行之后的 5 行。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-13T19:33:18.343

您可以使用`grep`显示匹配的行和`less`作为寻呼机：

```
grep 'Nov 12 2012' /path/to/logfile | less 
```

在每页末尾键入“空格”以前进到下一个结果屏幕。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-13T19:57:36.750

您可以`grep`按如下方式使用：

```
grep 'Nov 12 2012' file_to_search.log > search_results.log 
```

一些解释：

*   `grep`是用于搜索模式的命令/工具的名称
*   `'Nov 12 2012'`: 紧随其后`grep`并由至少 1 个空格分隔，您指定要搜索的模式
*   `file_to_search.log`：作为`grep`此处的最后一个参数，您指定要搜索的文件
*   `> search_results.log`:`>`表示输出[重定向](http://www.linuxsa.org.au/tips/io-redirection.html)。这里它的意思是“将此命令的输出写入一个名为 的文件`search_results.log`。如果该文件已经存在，则完全覆盖它。

获得输出后，您可以使用您选择的文本编辑器或使用 来查看结果`less`，因此请使用以下任何一种：

```
less search_results.log
gedit search_results.log
emacs search_results.log
vim search_results.log 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-21T01:57:42.060

以脚本格式打开文件，然后使用您要查找的关键字进行搜索，如下所示。

```
$vi <logfilename>
     &
:/search 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-27T20:11:02.760

```
grep -A 5 -B 10 'Nov 12 2012' <yourfile.log> 
```

`-A <n>`查看`n`之后`-B <n>`的`n`行和之前的行。或者，两者一起显示，`-C <n>`即在搜索文本之前和之后显示`n`行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-13T13:39:00.647

这是在大日志文件中定位错误的好方法： grep --after-context=5 --before-context=10 'Error' yourfile.log 或 grep --after-context=5 --before-context=10 '例外' yourfile.log

# java - Selenium.isVisible() --- 如何使用？

> ID：13367414
> 
> 赞同：0
> 
> 时间：2012-11-13T19:31:25.527
> 
> 标签：java, selenium, internet-explorer-8, visibility, runtime-error

我目前正在使用 selenium 对我的 Web 应用程序进行自动化测试。我对 Selenium.isVisible() 的真正工作原理感到非常困惑。

我收到了错误（我可能偶尔会提到）：

> 线程“main” com.thoughtworks.selenium.SeleniumException 中的异常：确定 >if 元素显示时出错（警告：服务器未提供任何堆栈跟踪信息） 命令持续时间或超时：83 毫秒

以下是我的代码片段：

```
 while (!selenium.isElementPresent("id=resultTable_0_0")){
        }
        selenium.isVisible("id=resultTable_0_0"); 
```

所以我正在做的是，

1.) 将程序置于停止循环中，直到我发现我将对其采取行动的元素是**PRESENT**。

2.) 确定 PRESENT 元素是实际可见还是隐藏等。

根据我对基于 web 引用的 selenium api 的 Selenium.isVisible() 的理解，这将返回 true 或 false。这就是将要发生的一切。

为什么我在运行脚本时会收到错误消息，我该如何解决这个偶尔出现的错误？每次我运行它都不会发生。我正在连续运行几个脚本并不断检查元素是否可见，所以这对我来说是一个大问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:44:35.863

我为解决这个问题所做的只是在检查 .isVisible() 之前延迟我再也不会收到错误了。

# powershell - 将输入列表分解为几列

> ID：13367418
> 
> 赞同：2
> 
> 时间：2012-11-13T19:31:41.027
> 
> 标签：powershell

如何输入一个列表，并将内容显示在多列中，比如在三个项目之后；例子：

```
$carlist = "c:\temp\list-of-cars.txt"             # listing 10 cars               
$num-cols = 4 
```

内容将是：

```
Car1          
Car2
..       
Car9      
Car10

$c = $carlist.count/$num-cols                     # some number of columns  
write-host $carlist (something) 
```

输出将是（基于列数：

```
Car1          Car4          Car7          Car10                                             
Car2          Car5          Car8                           
Car3          Car6          Car9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:14:54.210

试试`Format-Wide`cmdlet：

```
Get-Content cars.txt | Select-Object @{n='name';e={$_}} | Format-Wide -Column 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:14:03.593

```
$cars = get-content "list-of-cars.txt"
$cars | Format-Wide {$_} -Column 4 -Force 
```

或者，如果您更喜欢单线：

```
Get-Content .\list-of-cars.txt | Format-Wide {$_} -Column 4 -Force 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:02:47.857

这是一种方式：

```
Function SplitTo-Column($colnum, [object[]]$list)
{
  for($i=1; $i -le $list.Length; $i++)
  {    
    if ( ($i % $colnum)  -eq 0) 
    {
       [Console]::WriteLine($list[$i-1]) #or write-host "$($list[$i-1])" is more posh    
    }
    elseif ($i -eq $list.count)
    {
       [Console]::WriteLine($list[$i-1]) #or write-host "$($list[$i-1])"
    }
    else
    {
       [Console]::Write($list[$i-1] + "`t" ) #or write-host "$($list[$i-1])`t" -NoNewline  
    }
  }
} 
```

采用：

```
$carlist = gc c:\temp\list-of-cars.txt             # listing 10 cars               
$numcols = 4

SplitTo-Column -colnum $numcols -list $carlist 
```

# cordova - PhoneGap 构建 BlackBerry 示例项目卡在接收响应中

> ID：13367423
> 
> 赞同：1
> 
> 时间：2012-11-13T19:32:08.300
> 
> 标签：cordova, blackberry-webworks

我试图学习如何使用 PhoneGap 来构建 BlackBerry 应用程序。我按照[PhoneGap 的指南](http://docs.phonegap.com/en/2.2.0/guide_getting-started_blackberry_index.md.html#Getting%20Started%20with%20Blackberry)整理了 Webworks SDK 并检索了签名密钥。

然后我`ant blackberry load-device`尝试将示例应用程序部署到真实设备上。但是签名过程似乎永远冻结了，一些 *.cod 文件已签名，但其中大多数只显示“接收响应”：

![签名工具](../Images/86f01b13bc806996dd5634e9476ceb79.png)

和命令行输出：

```
Buildfile: /path-to-sample/sample/build.xml

blackberry:

load-device:

generate-cod-name:
     [echo] Generated name: cordovaExample.cod

clean:
   [delete] Deleting directory /path-to-sample/sample/build

package-app:
    [mkdir] Created dir: /path-to-sample/sample/build/widget
     [copy] Copying 22 files to /path-to-sample/sample/build/widget
      [zip] Building zip: /path-to-sample/sample/build/cordovaExample.zip

load-device:
     [exec] [INFO]              Parsing command line options
     [exec] [INFO]              Parsing bbwp.properties
     [exec] [INFO]              Validating application archive
     [exec] [INFO]              Parsing config.xml 
     [exec] [INFO]              Populating application source
     [exec] [INFO]              Compiling BlackBerry WebWorks application
     [exec] [INFO]              Starting signing tool 
```

我已经尝试了两次，其中任何一个都没有运气。不同之处在于签名工具中签署了哪个 *.cod 文件。

所以你们能帮我弄清楚为什么它卡在那里吗？干杯。

**更新**

如果我强制退出签名工具，我将得到如下输出：

```
 [exec] [ERROR]             Signing failed
     [exec] RIM Wireless Handheld Java Loader
     [exec] Copyright 2001-2010 Research In Motion Limited
     [exec] Connecting to device...
     [exec] 
     [exec] Connected                 Loading /path-to-sample/sample/build/StandardInstall/cordovaExampleError: unable to open file
     [exec] Disconnected

BUILD SUCCESSFUL
Total time: 22 minutes 4 seconds 
```

我确定我的设备已连接并能够与我的计算机通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:58:44.717

打包器使用的签名工具需要 JDK6，32 位，即使您在 64 位机器上也是如此。您可以确认已安装在**C:\Program Files\Java**或**C:\Program Files (x86)\Java**中。

一般来说，你应该只安装一个 JDK/JRE 组合，多个可能会干扰，即使安装了 JDK6，32 位，如果它正在访问 JDK7（或 64 位版本），签名者仍然可能会挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:35:52.537

经过几个小时不断地重新尝试这个签名过程，我终于成功地获得了二进制签名。

看起来成功率在 6/10 到 7/10 之间。同时，我很确定我的互联网连接良好。

这是一个奇怪的问题，可能是由于 RIM 的签名服务器或签名工具的错误。继续尝试可能会解决这个问题。

# ruby-on-rails - 从rails中的控制器渲染部分

> ID：13367426
> 
> 赞同：15
> 
> 时间：2012-11-13T19:32:20.000
> 
> 标签：ruby-on-rails, ruby, ajax, controller

我有一个通过远程 => true 向数据库添加行的表单。然后我想将新数据附加到表中，但无法获得要呈现的正确视图。

截至目前，它正在为新条目呈现整个 show.html.erb 页面，但我想布局一个最小版本以添加为 . 有没有一种快速的方法来告诉我的控制器在插入数据库后要呈现什么视图？我想渲染我的部分名为 _newly_added.html.erb

**我的控制器**

```
 def new
    @task = Task.new
    render :partial => "/tasks/newly_added", :locals => { :t => @task }
  end 
```

谢谢！！

**编辑** 我认为我需要的只是另一种“显示”视图。

我发现我需要改变的方法实际上是这样的：

```
 def create
    @task = Task.new(params[:task])

    respond_to do |format|
      if @task.save
        format.html { redirect_to @task, notice: 'Task was successfully created.' }
        format.json { render json: @task, status: :created, location: @task }
      else
        format.html { render action: "new" }
        format.json { render json: @task.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我只需要制作一个替代的显示视图，然后告诉它重定向到那个视图。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T19:53:48.767

根据您问题中的更改进行编辑。然而，什么都没有真正改变。你的想法是错误的，需要调整你的想法。您不需要替代节目，您需要处理 format.js 请求。

部分应该在 JavaScript 响应中呈现，而不是在控制器中。控制器看起来更像这样：

```
 def create
    @task = Task.new(params[:task])

    respond_to do |format|
      if @task.save
        format.html { redirect_to @task, notice: 'Task was successfully created.' }
        format.json { render json: @task, status: :created, location: @task }
        format.js
      else
        format.html { render action: "new" }
        format.json { render json: @task.errors, status: :unprocessable_entity }
        format.js
      end
    end
  end 
```

然后，在views/tasks/create.js.coffee

```
($ '#mytable').append("<%= j render(partial: 'tasks/newly_added', locals: { t: @task }) %>") 
```

这里发生的是浏览器调用`create.js`. 由于`create.js`块`respond_to`的`format.js`. `j`转义文件的`_newly_added.html.erb`内容，并将其内容附加到表中。控制器不与现有视图交互，而是将 JavaScript 发送到浏览器，并与视图交互。

如果您使用像 Backbone 或 Ember 这样的客户端 MVC 框架，这一切都会有所改变，但您没有指定，所以我假设您使用的是现有的 Rails。

# node.js - Step.js 和 CoffeeScript 的异步控制流

> ID：13367427
> 
> 赞同：1
> 
> 时间：2012-11-13T19:32:22.167
> 
> 标签：node.js, asynchronous, coffeescript

我正在尝试让 Step.js 库与咖啡脚本一起正常工作。我对咖啡很陌生，但这是我的尝试：

```
setTimeout(
  =>
    console.log("step 1 at #{new Date}")
    setTimeout(
      =>
        console.log("step 2 at #{new Date}")
        setTimeout(
          =>
            console.log("step 3 at #{new Date}")
          10000
        )
      10000
    )
  10000
)

# step 1 at Tue Nov 13 2012 13:18:51 GMT-0600 (CST)
# step 2 at Tue Nov 13 2012 13:19:01 GMT-0600 (CST)
# step 3 at Tue Nov 13 2012 13:19:11 GMT-0600 (CST) 
```

应与以下内容相同：

```
step(
  ->
    setTimeout(
      =>
        console.log("step 1 at #{new Date}")
        this(null)
      10000
    )
  ->
    setTimeout(
      =>
        console.log("step 2 at #{new Date}")
        this(null)
      10000
    )
  ->
    setTimeout(
      =>
        console.log("step 3 at #{new Date}")
        this(null)
      10000
    )
)

# step 1 at Tue Nov 13 2012 13:12:04 GMT-0600 (CST)
# step 2 at Tue Nov 13 2012 13:12:04 GMT-0600 (CST)
# step 3 at Tue Nov 13 2012 13:12:04 GMT-0600 (CST) 
```

正如您从上面的示例步骤中看到的那样，同时执行所有步骤，而不是像预期的那样一次执行一个步骤。我不太清楚为什么现在是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:41:38.947

CoffeeScript`return`在函数的最后一个表达式前隐式添加了 a。这是 Step 的一个问题，它假定如果您返回任何内容，则该步骤是同步的。

`return`解决方案是在每个 step 函数的末尾添加一个显式：

```
step(
  ->
    setTimeout(
      =>
        console.log("step 1 at #{new Date}")
        this(null)
      10000
    )
    return
  ->
    setTimeout(
      =>
        console.log("step 2 at #{new Date}")
        this(null)
      10000
    )
    return
  ->
    setTimeout(
      =>
        console.log("step 3 at #{new Date}")
        this(null)
      10000
    )
    return
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:43:23.357

弄清楚了。因此，由于咖啡具有隐式返回语句，它将返回最后一条语句的值（或表达式，如果你愿意的话）。Step 库假定当您从函数返回显式值时，您正在执行同步步进（使其更容易混合和匹配同步和异步操作）。这在 Javascript 中效果很好，我们有明确的返回语句。

一种解决方法是始终返回 undefined：

```
step(
  ->
    setTimeout(
      =>
        console.log("step 1 at #{new Date}")
        this(null)
      10000
    )
    return undefined
  ->
    setTimeout(
      =>
        console.log("step 2 at #{new Date}")
        this(null)
      10000
    )
    return undefined
  ->
    setTimeout(
      =>
        console.log("step 3 at #{new Date}")
        this(null)
      10000
    )
    return undefined
)

# step 1 at Tue Nov 13 2012 13:38:51 GMT-0600 (CST)
# step 2 at Tue Nov 13 2012 13:39:01 GMT-0600 (CST)
# step 3 at Tue Nov 13 2012 13:39:11 GMT-0600 (CST) 
```

# android - Android添加adMob不起作用

> ID：13367428
> 
> 赞同：1
> 
> 时间：2012-11-13T19:32:27.297
> 
> 标签：android, admob, ads

我一直在尝试在我的应用程序上添加 adMob，但我无法让它在我的应用程序上运行。最后，我从 adMob 的网站下载了一个示例 adMob 应用程序。但是，这也不起作用。我得到下面的日志：

```
11-13 18:24:21.477: D/AndroidRuntime(2225): Shutting down VM
11-13 18:24:21.477: W/dalvikvm(2225): threadid=1: thread exiting with uncaught exception (group=0xb40cb180)
11-13 18:24:21.507: E/AndroidRuntime(2225): FATAL EXCEPTION: main
11-13 18:24:21.507: E/AndroidRuntime(2225): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.google.example.ads.xml/com.google.example.ads.xml.BannerSample}: android.view.InflateException: Binary XML file line #10: Error inflating class com.google.ads.AdView
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.os.Looper.loop(Looper.java:137)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.app.ActivityThread.main(ActivityThread.java:4424)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at java.lang.reflect.Method.invokeNative(Native Method)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at java.lang.reflect.Method.invoke(Method.java:511)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at dalvik.system.NativeStart.main(Native Method)
11-13 18:24:21.507: E/AndroidRuntime(2225): Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class com.google.ads.AdView
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.app.Activity.setContentView(Activity.java:1835)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at com.google.example.ads.xml.BannerSample.onCreate(BannerSample.java:14)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.app.Activity.performCreate(Activity.java:4465)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
11-13 18:24:21.507: E/AndroidRuntime(2225):     ... 11 more
11-13 18:24:21.507: E/AndroidRuntime(2225): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView
11-13 18:24:21.507: E/AndroidRuntime(2225):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.view.LayoutInflater.createView(LayoutInflater.java:552)
11-13 18:24:21.507: E/AndroidRuntime(2225):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
11-13 18:24:21.507: E/AndroidRuntime(2225):     ... 21 more
11-13 18:24:21.798: I/dalvikvm(2225): threadid=3: reacting to signal 3
11-13 18:24:21.808: I/dalvikvm(2225): Wrote stack traces to '/data/anr/traces.txt'
11-13 18:24:22.148: I/dalvikvm(2225): threadid=3: reacting to signal 3
11-13 18:24:22.158: I/dalvikvm(2225): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:37:03.170

我之前遇到过这个错误，当我得到它时，是因为我不小心`admobSDK.jar`从我的应用程序中删除了。但是，以下解决方案似乎更有可能更适合您。

如果您使用的是 ADT r17 或更高版本，则需要`libs/`在项目中创建一个文件夹，然后将 adMob SDK 复制到该文件夹​​中。

这是另一个类似的帖子

*   [膨胀类 com.google.ads.AdView 时出错](https://stackoverflow.com/questions/10523703/error-inflating-class-com-google-ads-adview)

# git - 尝试重新打包 git repo 以提高性能后的问题

> ID：13367431
> 
> 赞同：9
> 
> 时间：2012-11-13T19:33:01.317
> 
> 标签：git

不久前，我发布了一个问题，征求有关修复由于大量二进制文件而导致速度缓慢的 repo 的计划的反馈。那个问题（不是这个问题的必读问题）：[Fixing up a git repo that was slowing because of big binary files](https://stackoverflow.com/questions/12483910/fixing-up-a-git-repo-that-is-slowed-because-of-big-binary-files)

我遵循了我的计划，并经历了意想不到的副作用。

我们 repo 的新克隆最初需要 2-3 个小时。发现服务器开始交换，并且在执行*git config pack.windowMemory 100m && git config pack.packSizeLimit 200m*之后，克隆时间下降到约 15 分钟。

我想我仍然会做剩下的计划，所以我为我们拥有的二进制类型禁用了 delta compresson，并在 repo 上运行了*git repack -a -d -F 。*

在此之后，回购的新克隆需要大约 20 分钟，所以实际上变得更糟了。但真正的问题是，每次已经克隆了存储库的人尝试推送提交时，他们都会得到“自动打包存储库以获得最佳性能。”。

关于可能出了什么问题以及如何/应该如何解决的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-10T19:20:02.970

可能你的 repo 的大小和你的低价值`pack.packSizeLimit`使得包的数量总是高于`gc.autopacklimit`. 所以增加它们中的任何一个以确保 gc 不会运行每个提交。

我不确定会以何种方式`packSizeLimit`影响记忆，但我不相信它会产生任何重大影响。如果您的实验结果并非如此，请纠正我。直接影响内存使用的参数是`pack.windowMemory`和`pack.deltaCacheSize`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-27T14:07:07.890

您可能想重试相同的`git repack`，这次使用 Git 2.32（2021 年第二季度，将近 8 年后）及其新`--geometric=<n>`选项：

" [`git repack`](https://github.com/git/git/blob/2744383cbda9bbbe4219bd3532757ae6d28460e1/Documentation/git-repack.txt)" ^(( [man](https://git-scm.com/docs/git-repack) ))到目前为止，只能将阳光下的所有东西重新包装成一个包装（或按大小拆分）。

引入了一种更聪明的策略来降低重新打包存储库的成本。

请参阅Taylor Blau 的[提交 14e7b83](https://github.com/git/git/commit/14e7b8344f0b7349b914331c0aff18f73faf03da)（2021 年 3 月 19 日）、[提交 2a15964](https://github.com/git/git/commit/2a15964128edd08278efeacc75e75c77cfdde77e)、[提交 13d746a](https://github.com/git/git/commit/13d746a303592068826824b30c47941fb328c8a7)、[提交 dab3247](https://github.com/git/git/commit/dab324773422f38f8572185127a268813342805e)、[提交 f25e33c](https://github.com/git/git/commit/f25e33c1566fecb097a460f0649ac1a20c418843)（2021 年 3 月 5 日）和[提交 0fabafd](https://github.com/git/git/commit/0fabafd0b948bfc1c07db73494863d581c7f5d04)、[提交 339bce2](https://github.com/git/git/commit/339bce27f4f2a6f3bfab3e708429c810f4030c43)、[提交 c9fff00](https://github.com/git/git/commit/c9fff0001699dd2862bf350146631fe53c1226d9)、[提交 f62312e](https://github.com/git/git/commit/f62312e02837d91e3b47ea876654bf3ac97b2905) [（`ttaylorr`](https://github.com/ttaylorr) 2021 年 2 月 22 日[）](https://github.com/ttaylorr)。
请参阅[Junio C Hamano ( ) 的](https://github.com/gitster)[提交 ccae01c](https://github.com/git/git/commit/ccae01cab817f64a52fcb403cb355e41c2303b74)（2021 年 3 月 5 日[）](https://github.com/gitster)。 请参阅[Jeff King的](https://github.com/peff)[提交 20b031f](https://github.com/git/git/commit/20b031fedeeb6e8df428b6b7cdc05c14375cd1e1)、[提交 6325da1](https://github.com/git/git/commit/6325da14af2b76585a72cf639fa08e4cb1a370c8)、[提交 fbf20ae](https://github.com/git/git/commit/fbf20aeeef062e8cbd7db43788cfd3a69764071f)、[提交 60bb5f2](https://github.com/git/git/commit/60bb5f2f5d0c8a71254f31fa5d3d3fe42792aaf8)（2021 年 2 月 22 日） （[`gitster`](https://github.com/gitster)
[`peff`)](https://github.com/peff) .
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 2744383](https://github.com/git/git/commit/2744383cbda9bbbe4219bd3532757ae6d28460e1)中，2021 年 3 月 24 日）)

* * *

第一的：`find_kept_pack_entry()`

> ## [`packfile`](https://github.com/git/git/commit/f62312e02837d91e3b47ea876654bf3ac97b2905)：介绍' `find_kept_pack_entry()`'
> 
> ^(合着：Jeff King)
> ^(署名：Jeff King)
> ^(署名：Taylor Blau)
> ^(审核人：Jeff King)

> 未来的调用者将需要一个函数来填充`pack_entry`给定对象 id 的“结构”，但*只能*从它在任何保留包中的位置开始。
> 
> 特别是，一个新的 ' [`git repack`](https://github.com/git/git/blob/f62312e02837d91e3b47ea876654bf3ac97b2905/Documentation/git-repack.txt)' ^(( [man](https://git-scm.com/docs/git-repack) ))模式可以确保生成的包通过对象计数形成几何进度，它将把不想重新打包的包标记为“保持在核心”，并且它会想要停止可达性遍历一旦它访问任何保留包中的对象。
> 但是，它不想在非保留包或 .keep 包处停止遍历。
> 
> 显而易见的替代方案是 ' `find_pack_entry()`'，但这还不够，因为它只返回它找到的第一个包，可能会或可能不会保留（并且 mru 缓存使其无法预测如果有选项你会得到哪个包） .
> 
> 除此之外，您可以遍历所有包以查找每个包中的对象，但它会随着包的数量而缩放，这可能会令人望而却步。
> 
> 引入' `find_kept_pack_entry()`'，一个类似于' `find_pack_entry()`'的函数，但只填充保留包中的对象。

* * *

然后：`git pack-objects --stdin-packs`

> ## [`builtin/pack-objects.c`](https://github.com/git/git/commit/339bce27f4f2a6f3bfab3e708429c810f4030c43): 添加 '--stdin-packs' 选项
> 
> ^(建议人：Jeff King)
> ^(签字人：Taylor Blau)
> ^(审核人：Jeff King)

> 在即将到来的提交中，' [`git repack`](https://github.com/git/git/blob/339bce27f4f2a6f3bfab3e708429c810f4030c43/Documentation/git-repack.txt)' ^(( [man](https://git-scm.com/docs/git-repack) ))将希望创建一个包含某些包（包含的包）中的所有对象的包，**不包括某些其他包**（排除的包）中的任何对象。
> 
> 这个调用者可以自己迭代这些包并将它找到的对象直接通过标准输入提供给' [`git pack-objects`](https://github.com/git/git/blob/339bce27f4f2a6f3bfab3e708429c810f4030c43/Documentation/git-pack-objects.txt)' ^(（[man](https://git-scm.com/docs/git-pack-objects)）)，但这种方法有一些缺点：
> 
> *   它要求每个想要以`git pack-objects`这种方式驱动“”的调用者自己实现包迭代。
>     这迫使调用者考虑诸如将什么订单对象提供给打包对象之类的细节，而调用者可能宁愿不这样做。
> *   如果包含的包中的对象集很大，则需要通过管道发送大量数据，这是低效的。
> *   调用者也被迫跟踪排除的对象，并确保它不发送任何出现在包含和排除包中的对象。
> 
> 但最大的缺点是缺乏可达性遍历。
> 因为调用者直接传入一个对象列表，所以这些对象不会获得分配给它们的 namehash，这会对 delta 选择过程产生负面影响，导致“ `git pack-objects`”即使存在也无法找到好的 delta。
> 
> 调用者可以自己制定可达性遍历，但以`git pack-objects`这种方式驱动''的唯一方法是进行完全遍历，然后在遍历完成后删除排除包中的对象。
> 这可能对关心性能的调用者不利，尤其是在具有许多对象的存储库中。
> 
> 引入 ' [`git pack-objects --stdin-packs`](https://github.com/git/git/blob/339bce27f4f2a6f3bfab3e708429c810f4030c43/Documentation/git-pack-objects.txt#L88)' ^(( [man](https://git-scm.com/docs/git-pack-objects#Documentation/git-pack-objects.txt---stdin-packs) ))来解决这四个问题。
> 
> ' `git pack-objects --stdin-packs`' 需要标准输入上的包名称列表，其中 ' `pack-xyz.pack`' 表示包含该包，而 ' `^pack-xyz.pack`' 表示排除它。
> 生成的包包括存在于至少一个包含包中且不存在于任何排除包中的所有对象。

`git pack-objects`现在在其[手册页](https://github.com/git/git/blob/339bce27f4f2a6f3bfab3e708429c810f4030c43/Documentation/git-pack-objects.txt#L88-L97)中包含：

> ## `--stdin-packs`
> 
> 从标准输入读取包文件的基本名称（例如，`pack-1234abcd.pack`），而不是对象名称或修订参数。
> 
> 生成的包包含包含包中列出的所有对象（不以 开头的`^`对象），不包括排除包中列出的任何对象（以 开头`^`）。
> 
> 不兼容`--revs`，或暗示的选项`--revs`（例如 `--all`），但兼容的 除外`--unpacked`。

* * *

最后：`git repack --geometric=<n>`

> ## [`builtin/repack.c`](https://github.com/git/git/commit/0fabafd0b948bfc1c07db73494863d581c7f5d04): 添加 '--geometric' 选项
> 
> ^(建议人：Derrick Stolee)
> ^(签字人：Taylor Blau)
> ^(审核人：Jeff King)

> 通常对两者都有用：
> 
> *   存储库中的包文件相对较少，并且
> *   避免存储库中的打包文件太少，以至于我们会定期重新打包其全部内容
> 
> [`git repack`](https://github.com/git/git/blob/0fabafd0b948bfc1c07db73494863d581c7f5d04/Documentation/git-repack.txt)这个补丁在 ' ' ^(( [man](https://git-scm.com/docs/git-repack) ))中实现了一个 '--geometric=' 选项。
> 这允许调用者指定他们希望每个包至少是前一个最大包的倍数（按对象计数）。
> 
> 具体来说，假设一个存储库有“n”个包文件，标记为 P1、P2、...，直到 Pn。
> 每个包文件的对象计数等于“ `objects(Pn)`”。
> 几何因子为 ' `r`'，应该是：
> 
> ```
> objects(Pi) > r*objects(P(i-1)) 
> ```
> 
> 对于所有 i in `[1, n]`，包按以下顺序排序
> 
> ```
> objects(P1) <= objects(P2) <= ... <= objects(Pn). 
> ```
> 
> 由于找到一个真正的最优重新包装是 NP 难的，我们沿着两个方向对其进行近似：
> 
> 1.  我们假设*在开始重新打包之前*有一个包的截止点，该截止点右侧的所有内容都已经形成了几何级数（或者不存在截止点并且所有内容都必须重新打包）。
>     
>     
> 2.  我们假设所有小于截止计数的东西都必须重新打包。
>     这构成了我们的基本假设，但它也可能导致甚至“重”包被重新打包，例如，如果我们有 6 个包含以下对象数量的包：
>     
>     
>     
>     1, 1, 1, 2, 4, 32
>     
>     
> 
> 然后我们将在 '1, 1' 和 '1, 2, 4, 32' 之间放置截止点，将前两个包卷成一个包含 2 个对象的包。
> 这打破了我们的进步，让我们：
> 
> ```
> 2, 1, 2, 4, 32
>   ^ 
> ```
> 
> （其中 ' `^`' 表示我们拆分的位置）。
> 为了恢复进度，我们将拆分向前（朝向更大的包）将每个包连接到我们的新包中，直到恢复几何级数。
> 在这里，看起来像：
> 
> ```
> 2, 1, 2, 4, 32  ~>  3, 2, 4, 32  ~>  5, 4, 32  ~> ... ~> 9, 32
>   ^                   ^                ^                   ^ 
> ```
> 
> 这样做的好处是不会过于频繁地重新包装沉重的包装，同时也一次只创建一个新包装。
> 另一个问题是我们假设松散的、索引的和重新记录的对象是微不足道的，并将它们集中到我们创建的任何新包中。
> 这可能导致非幂等结果。

`git repack`现在在其[手册页](https://github.com/git/git/blob/0fabafd0b948bfc1c07db73494863d581c7f5d04/Documentation/git-repack.txt#L168-L190)中包含：

> ## `-g=<factor>`
> 
> ## `--geometric=<factor>`
> 
> 排列生成的包结构，以便每个连续包包含的对象数量至少`<factor>`是次大包的数量。
> 
> `git repack`通过确定需要重新打包成一个以确保几何级数的包文件的“剪切”来确保这一点。它选择最小的包文件集，以便尽可能多的较大的包文件（按该包中包含的对象数）可以保持不变。
> 
> 与其他重新打包模式不同，要打包的对象集由“卷起”的包集唯一确定；换句话说，确定需要组合的包才能恢复几何级数。
> 
> 指定时`--unpacked`，松散对象隐式包含在此“汇总”中，而不考虑它们的可达性。这在未来可能会发生变化。此选项（意味着完全不同的重新打包模式）不能保证与选项的所有其他组合一起使用`git repack`）。

* * *

[结果](https://github.com/git/git/commit/20b031fedeeb6e8df428b6b7cdc05c14375cd1e1)：

```
 Test                                        HEAD^                   HEAD
  -----------------------------------------------------------------------------------------------
  5303.5: repack (1)                          57.34(54.66+10.88)      56.98(54.36+10.98) -0.6%
  5303.6: repack with kept (1)                57.38(54.83+10.49)      57.17(54.97+10.26) -0.4%
  5303.11: repack (50)                        71.70(88.99+4.74)       71.62(88.48+5.08) -0.1%
  5303.12: repack with kept (50)              72.58(89.61+4.78)       71.56(88.80+4.59) -1.4%
  5303.17: repack (1000)                      217.19(491.72+14.25)    217.31(490.82+14.53) +0.1%
  5303.18: repack with kept (1000)            246.12(520.07+14.93)    217.08(490.37+15.10) -11.8% 
```

> 还有这种`--stdin-packs`情况，它的扩展性更好一些（尽管即使在 1,000 包时也没有那么多）：

```
 5303.7: repack with --stdin-packs (1)       0.00(0.00+0.00)         0.00(0.00+0.00) =
  5303.13: repack with --stdin-packs (50)     3.43(11.75+0.24)        3.43(11.69+0.30) +0.0%
  5303.19: repack with --stdin-packs (1000)   130.50(307.15+7.66)     125.13(301.36+8.04) -4.1% 
```

* * *

**[请参阅Taylor Blau](https://github.com/ttaylorr)**的“ [Git 2.33：几何重新打包](https://github.blog/2021-08-16-highlights-from-git-2-33/#geometric-repacking)” ：

> 从历史上看，`git repack`做了两件事之一：
> 
> *   它要么将所有松散的对象重新打包到一个新包中（可选地删除每个对象的松散副本），
> *   或者它将所有包重新打包成一个新包（可选地删除冗余包）。
> 
> 一般来说，当包较少时，Git 具有更好的性能，因为许多操作会随着存储库中包的数量而扩展。
> 因此，将所有东西打包成一个包通常是个好主意。> 但是从历史上看，繁忙的存储库通常需要将所有内容打包到一个巨大的包中。
> 这是因为**可达性位图**是服务器端 Git 性能的关键优化，只能描述单个包中的对象。
> 因此，如果您想使用位图有效地覆盖存储库中的许多对象，则这些对象必须一起存储在同一个包中。
> 
> 我们正在努力消除这一限制（您可以[阅读更多关于我们如何做到这一点的信息](https://github.blog/2021-04-29-scaling-monorepo-maintenance/#multi-pack-indexes)），但其中一个重要步骤是实施一种新的重新包装方案，该方案在包装数量相对较少和包装之间进行权衡一起最近添加的对象（换句话说，近似于自上次重新打包以来添加的新对象）。

为此，**Git 学习了一种新的“几何”重新打包策略**。

> 这个想法是确定一组（小）可以组合在一起的包，以便剩余的包根据对象大小形成几何级数。
> 换句话说，如果最小的包有 N 个对象，那么次大的包将至少有 2N 个对象，依此类推，在此过程中的每一步都会加倍（或增长任意常数）。
> 
> [![https://github.blog/wp-content/uploads/2021/04/Scaling-monorepo-maintenance-fig-12.png?w=1958](../Images/33a6a646f6066d587266fe47655edc3d.png)](https://i.stack.imgur.com/h6eCy.png)

* * *

[`git pack-objects --stdin-packs`](https://github.com/git/git/blob/5c933f0155959452f299cd4a0a65fe22b5c239be/Documentation/git-pack-objects.txt#L88)“ ” ^(( [man](https://git-scm.com/docs/git-pack-objects#Documentation/git-pack-objects.txt---stdin-packs) ))的输入验证已在 Git 2.34（2021 年第四季度）中更正。

请参阅[提交 561fa03](https://github.com/git/git/commit/561fa03529202a36e0d77548fdcb5d81422c1865)（2021 年 7 月 9 日）和[提交 fb20d4b](https://github.com/git/git/commit/fb20d4b1268d97646ae24f07661892cf6da64c31)（2021 年 6 月 21 日），[作者 Ævar Arnfjörð Bjarmason ( `avar`)](https://github.com/avar)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 5c933f0](https://github.com/git/git/commit/5c933f0155959452f299cd4a0a65fe22b5c239be)中，2021 年 8 月 24 日）)

> ## [`pack-objects`](https://github.com/git/git/commit/561fa03529202a36e0d77548fdcb5d81422c1865)：修复`--stdin-packs`选项中的段错误
> 
> ^(签字人：Ævar Arnfjörð Bjarmason)

> 修复 339bce2 中[添加](https://github.com/git/git/commit/339bce27f4f2a6f3bfab3e708429c810f4030c43)`--stdin-packs`的选项中的段错误（“ ：添加 '--stdin-packs' 选项”，2021-02-22，Git v2.32.0-rc0 --[批次 #4](https://github.com/git/git/commit/26c4f98ffda512bc0731c4bd13e22338137e9a7c)中列出的[合并](https://github.com/git/git/commit/2744383cbda9bbbe4219bd3532757ae6d28460e1)）。[`builtin/pack-objects.c`](https://github.com/git/git/blob/339bce27f4f2a6f3bfab3e708429c810f4030c43/builtin/pack-objects.c)
> 
> 该`read_packs_list_from_stdin()`函数没有检查它正在读取的行是否是有效的包，因此在使用 QSORT() 时`pack_mtime_cmp()`我们会有一个`NULL`“util”字段。
> “util”字段用于将包含/排除包的名称与`packed_git`它们对应的结构相关联。
> 
> 逻辑错误在于假设我们可以迭代所有包并注释我们得到的排除和包含的包，而不是检查我们在标准输入上得到的行。
> 对排除的包进行了检查，但包含的包被简单地假定为有效。
> 
> 正如测试中所指出的，我们不会报告第一个坏行，而是根据[`string-list.c`](https://github.com/git/git/blob/561fa03529202a36e0d77548fdcb5d81422c1865/string-list.c)API 首先排序的任何行。
> 在这种情况下，我认为这很好。
> 对替代方法进行[了进一步讨论](http://lore.kernel.org/git/YND3h2l10PlnSNGJ@nand.local)。
> 
> 即使我们很懒，让我们断言我们确实希望在测试中获得的行，因为将来更改此代码的人可能会错过这种情况，并且希望更新测试和注释。

* * *

另一种加快重新打包的方法：`--quiet`，它实际上适用于 Git 2.35（2022 年第一季度）。

请参阅[Derrick Stolee ( ) 的](https://github.com/derrickstolee)[提交 47ca93d](https://github.com/git/git/commit/47ca93d0710c114b61b3079d3b88d2d7528f5666)和[提交 e4d0c11](https://github.com/git/git/commit/e4d0c11c04ec3c28922168844ae2694e0d015b4e)（2021 年 12 月 20 日[）](https://github.com/derrickstolee)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 88a516a](https://github.com/git/git/commit/88a516aca03e55f174fc1884250be1d0d3fb9fa8))^(中，2022 年 1 月 5 日）)[`derrickstolee`](https://github.com/derrickstolee)
^([`gitster`](https://github.com/gitster))

> ## [`repack`](https://github.com/git/git/commit/47ca93d0710c114b61b3079d3b88d2d7528f5666): 使 '--quiet' 禁用进度
> 
> ^(帮助者：Jeff King)
> ^(签字者：Derrick Stolee)

> 在 ' [`git repack`](https://github.com/git/git/blob/47ca93d0710c114b61b3079d3b88d2d7528f5666/Documentation/git-repack.txt)' ^(( [man](https://git-scm.com/docs/git-repack) ))中测试一些想法时，我用 ' `--quiet`' 运行它，发现仍然显示了一些进度输出。
> 具体来说，编写多包索引的输出显示了进度。
> 
> ' `show_progress`' 变量 in用 ' ' 标志`cmd_repack()`初始化`isatty(2)`并且根本不被 ' `--quiet`' 标志修改。
> '--quiet' 标志修改了`po_args`.quiet 选项，该选项被转换为 ' [`git pack-objects`](https://github.com/git/git/blob/47ca93d0710c114b61b3079d3b88d2d7528f5666/Documentation/git-pack-objects.txt)' ^(( [man](https://git-scm.com/docs/git-pack-objects) ))子进程的 '--quiet' 标志。
> 但是，“ `show_progress`”用于将进度信息直接发送到不使用子进程的多包索引编写逻辑。
> 
> 此处的解决方法是，如果为真，则将 ' `show_progress`' 修改为假，否则。 这种新的期望简化了后来检查两者的条件。`po_opts.quiet``isatty(2)`
> 
> 更新文档以明确“-q”将禁用所有进度，并确保“ `git pack-objects`”子进程将收到标志。

`git repack`现在在其[手册页](https://github.com/git/git/blob/47ca93d0710c114b61b3079d3b88d2d7528f5666/Documentation/git-repack.txt#L79-L81)中包含：

> ## `--quiet`
> 
> 在标准错误流上没有显示任何进展，并将`-q` 选项传递给“git pack-objects”。见[`git pack-objects`](https://git-scm.com/docs/git-pack-objects)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:06:41.710

正在重新包装什么？本地克隆，远程？请记住，本地和远程是*分开*的，这可能意味着您正在获取解包的东西，然后在本地打包......需要在本地复制远程的配置（再试一次，我可能完全不在基地）。

# ios - APNS MDM 推送通知主题 - 在哪里可以找到？

> ID：13367434
> 
> 赞同：4
> 
> 时间：2012-11-13T19:33:09.503
> 
> 标签：ios, apple-push-notifications, mdm

我到处寻找要在我的 MDM 注册配置文件中发送的推送通知主题，并且我查看了我的开发人员/分发密钥主题信息，但找不到像这样的任何内容：

```
b503419d-1e2a-a60f-7451-5b8832b5a9cb 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-03T06:56:41.600

正如迈克尔·加夫尼所说：

> 主题是您的 APNs 证书主题中 UID 的值。它将以 com.apple.mgmt 开头。

获取它：
  1.转到[https://identity.apple.com/pushcert/](https://identity.apple.com/pushcert/)并下载证书
  2.使用 OpenSSL 从证书中获取主题 例如，
`bash-4.2.45$ openssl x509 -noout -in MDM_ \ABC \,LTD_Certificate.pem -subject`
给出以下输出：
    `subject= /UID=com.apple.mgmt.External.9a68c111-109a-9084-a9f7-fffffffffff2/CN=APSP:9a68c111-109a-9084-a9f7-fffffffffff2/C=PE`

本例中的通知主题为**com.apple.mgmt.External.9a68c111-109a-9084-a9f7-fffffffffff2**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T05:49:51.770

主题是您的 APNs 证书主题中 UID 的值。它将开始`com.apple.mgmt.`

# javascript - 按对象属性对 javascript 对象数组进行排序

> ID：13367438
> 
> 赞同：1
> 
> 时间：2012-11-13T19:33:23.263
> 
> 标签：javascript

我正在尝试对数组进行排序。例如，给定数组 a（如下），我想返回数组 b。

我知道我可以这样做`a.sort()`，但是，我不想对实际的数组元素进行排序，而是对数组元素的一个属性（本例中）进行排序。如何实现？

谢谢

```
var a=[
  {s:"ced",o:{obj:1}},
  {s:"cde",o:{obj:2}},
  {s:"ade",o:{obj:3}},
  {s:"bde",o:{obj:4}}
]

var b=[
  {s:"ade",o:{obj:3}},
  {s:"bde",o:{obj:4}},
  {s:"cde",o:{obj:2}},
  {s:"ced",o:{obj:1}}
] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T19:35:22.240

`Array.prototype.sort`接受一个可选参数：一个告诉它如何排序的回调。

```
a.sort(function(x,y) {
    // do something here
    // return -1 if x < y
    // return  1 if x > y
    // otherwise, return 0
}); 
```

因此，在您的情况下，它将是：

```
a.sort(function(x,y) {return x.s == y.s ? 0 : (x.s < y.s ? -1 : 1);}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:37:12.390

该[`sort`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)方法接受一个*compareFunction*参数，您可以在其中定义如何计算排序顺序。
当你想比较字符串时，这个函数应该按照[这里](https://stackoverflow.com/a/2167619/1615483)[`localeCompare`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/localeCompare)的建议使用。 创建可以快速调整的排序函数的一种方法是通过另一个函数生成它。这意味着您可以为对象的任何属性自动创建排序函数。 将两者放在一起，你得到..

```
function genSortFn(prop){
    return function(a,b){ return a[prop].localeCompare( b[prop] ); };
}
a.sort( genSortFn('s') );
b.sort( genSortFn('s') ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T19:37:31.637

```
a.sort(function(a, b){
    if(a.s < b.s){
        return -1;
    }
    if(a.s > b.s){
        return 1;
    }
    return 0;
}); 
```

[http://jsfiddle.net/lbstr/nCKpG/](http://jsfiddle.net/lbstr/nCKpG/)

# iphone - Objective C - 访问普通 C 数组

> ID：13367443
> 
> 赞同：0
> 
> 时间：2012-11-13T19:33:36.487
> 
> 标签：iphone, objective-c, c, arrays

我正在制作一个游戏，它从常规 C 数组中分配一个问题的标签。

```
- (void)viewDidLoad
{
[super viewDidLoad];

for (int i = 0; i < 45; i++) {
    basketball_numbers1[i] = (arc4random()%999)+100;
    basketball_numbers2[i] = (arc4random()%999)+100;
    for (int j = 0; j < 30; j++) {
        int first = basketball_numbers1[i];
        int second = basketball_numbers2[i];
        basketball_questions[j] = [[NSString stringWithFormat: @"%d + %d", first, second] retain];
        basketball_answers[j] = [[NSString stringWithFormat: @"%d", basketball_numbers1[i] + basketball_numbers2[i]] retain];

    }

} 
```

在我将它们注释掉之前，这段代码可以正常工作并将问题和答案打印到控制台没有问题。

但是当我运行模拟器并输入正确答案时，相同的问题会留在标签上，即使计数（用于增加数组索引的变量）增加了，我通过 NSLog 确认了这一点。

其他一些注意事项：当我手动输入数组的值时，它没有问题。在做了一些研究之后，我还在数组末尾添加了“保留”，这实际上消除了我在此之前遇到的一些问题，但我不确定保留/释放是用于常规 C 数组还是仅用于 NSArray。

这是单击按钮时在文本字段中读取的代码。

```
- (IBAction)basketball_click:(id)sender {

basketball_input = self.basketball_textfield.text;
NSLog(@"INPUT: %@", self.basketball_textfield.text);

if ([self.basketball_textfield.text isEqualToString:(basketball_answers[count])]) {

    NSLog(@"THEY ARE EQUAL");

    isCorrect = TRUE;

    self.basketball_textfield.text = @"";

}

...

if(isCorrect) {

    NSLog(@"Retain Count: %d", [basketball_questions[count] retainCount]);

    correct.text = @"CORRECT!";
    basketball_right++;
    count++;

    NSLog(@"COUNT: %d", count);

    question_label.text = basketball_questions[count];

    NSLog(@"NEW QUESTION: %@", basketball_questions[count]);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:46:58.547

```
for (int i = 0; i < 45; i++) {
    first  = (arc4random()%999)+100;
    last   = (arc4random()%999)+100;
    basketball_questions[i] = [[NSString stringWithFormat: @"%d + %d", first, second] retain];
    basketball_answers[i] = [[NSString stringWithFormat: @"%d", first+last] retain];

    } 
```

# cluster-computing - 在 Varnish 3.0.3 集群上清除

> ID：13367447
> 
> 赞同：2
> 
> 时间：2012-11-13T19:33:47.170
> 
> 标签：cluster-computing, varnish

我有一个网站 www.mysite.com 在负载均衡器后面运行。负载均衡器集群中有两台服务器。每个都运行 Varnish 3.0 和 Apache/PHP（我知道 varnish 可以为我实现负载平衡——但我们偏爱不同的 LB 技术）。

时不时地我需要清除一个或两个 URL...

在我的 VCL 中，我将 127.0.0.1 作为 PURGE 的可信 URL。和一个标准的清除配置：

vcl_recv：

```
....

    if (req.request == "PURGE") {

        # Allow requests from trusted IPs to purge the cache

        if (!client.ip ~ trusted) {

           error 405 "Not allowed.";

        }

        return(lookup); # @see vcl_hit;

    }

... 
```

子 vcl_hit {

```
if (req.request == "PURGE") {

    purge;

    error 200 "Purged (via vcl_hit)";

}

if (!(obj.ttl > 0s)) {

    return (pass);

}

return (deliver); 
```

}

子 vcl_miss {

```
if (req.request == "PURGE"){

    purge;

    error 404 "Not in Cache";

}

return (fetch); 
```

}

现在从 shellscript 我想使 URL 无效。

```
curl -X PURGE http://127.0.0.1/product-47267.html 
```

**不起作用**，但是

```
curl -X PURGE http://www.mysite.com/product-47267.html 
```

**行得通**。这里的问题是 - 我需要在集群中的每台本地机器上失效 - 没有请求通过负载平衡器发出和返回（因为我不知道哪台机器将进行 PURGE）。

希望这是有道理的

长宽

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:47:41.160

你需要连接到**localhost**但 Varnish 仍然需要知道你想要清除**哪个主机。**

我不确定，但请尝试以下操作：

```
curl -X PURGE -H "Host: www.mysite.com" http://127.0.0.1/product-47267.html 
```

# orchardcms - 抑制 Widget.Wrapper 而不抑制 Widget.ControlWrapper

> ID：13367453
> 
> 赞同：0
> 
> 时间：2012-11-13T19:34:07.130
> 
> 标签：orchardcms

我有一个小部件的替代视图。在该视图中，我正在使用如下代码抑制包装器：

```
Model.Metadata.Wrappers.Clear(); 
```

这可行，但我只想抑制 Widget.Wrapper。现在它还在抑制 Widget.ControlWrapper ，当我启用了 Widget Control Wrapper 模块时，它会阻止显示编辑按钮。

有没有办法在保留 Widget.ControlWrapper 的同时只清除 Widget.Wrapper？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T22:03:50.020

如果有人遇到类似问题，我可以在我的主题中的 Widget-Sidebar.cshtml 文件中抑制 Widget.Wrapper：

```
@using Orchard.DisplayManagement.Descriptors;
@using Orchard.Environment.Extensions;
@{
    Model.Metadata.Wrappers.Remove("Widget_Wrapper");
    Model.Metadata.Wrappers.Add("Widget_SideBarWrapper");
    Model.Metadata.Wrappers.Add("Widget_ControlWrapper");
}
@Display(Model.Content) 
```

我开始使用形状跟踪工具为我在“侧边栏”列中的小部件创建一个替代品（基本上`<div id="sidebar">`我在我的布局中有一个`@Zone(Model.Sidebar)`）。

我将上面的代码放在我使用 Shape Tracing 创建的 Widget-Sidebar.cshtml 替代中。

```
Model.Metadata.Wrappers.Clear(); as used by the OP completely removes everything, to the point where in Shape Tracing it won't even show up as a widget. Adding my own alternate (Widget.SideBarWrapper.cshtml, which is added as "Widget_SideBarWrapper" above) would not fix this. I felt that was wrong even though the content displayed.

Model.Metadata.Wrappers.Remove("Widget_Wrapper"); 
```

似乎是正确的方法（即，Shape Tracing 仍然显示一个小部件），但它似乎删除了所有其他包装器，因此您必须添加新的包装器以及 Widget.ControlWrapper.cshtml（写为“Widget_ControlWrapper”上面的代码）。

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:59:18.670

我能够像这样添加回 Widget.ControlWrapper：

```
Model.Metadata.Wrappers.Add("Widget_ControlWrapper"); 
```

这似乎就像我想要的那样工作。

# php - 使用 Apache 进行基本身份验证

> ID：13367454
> 
> 赞同：0
> 
> 时间：2012-11-13T19:34:15.090
> 
> 标签：php, api, authentication

我在 Apache 服务器上启用了基本身份验证。服务器托管了一个我实现的 API，我想做的是从我的 PHP 脚本中调用这个 API。我已经弄清楚如何创建标题：

```
$user = 'my_name_api';
$pwd = 'xxxxxxxxx';
$auth_string = $user . ':' . $pwd;
$auth_b64 = base64_encode($auth_string);
$header   = 'Authorization: Basic ' . $auth_b64; 
```

如何在我的 API 调用中包含 $header？我正在寻找 cURL 以外的东西，并且我没有使用 zend 等任何环境（看到 Zend 等的一些示例，但我没有使用其中任何一个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:39:57.097

你试过 fopen / file_get_contents 吗？

从这里开始：http: [//php.net/manual/en/function.fopen.php](http://php.net/manual/en/function.fopen.php)

或在这里：[http ://www.php.net/manual/en/function.file-get-contents.php](http://www.php.net/manual/en/function.file-get-contents.php)

让我知道进展如何...

艾瑞特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:39:18.190

如果您不需要 SSL 或代理支持，您可以使用`file_get_contents()`流上下文。流上下文可以包含 HTTP 标头：

```
$opts = array
(
  'http'=>array
  (
    'method' => "GET",
    'header' => "Authorization: ..."
  )
);
$context = stream_context_create($opts);
$file = file_get_contents('http://www.example.com', false, $context); 
```

更多关于这个[here](http://php.net/stream-context-create)。

# c++ - 在列表小部件 Qt C++ 中显示数组内容

> ID：13367458
> 
> 赞同：2
> 
> 时间：2012-11-13T19:34:23.537
> 
> 标签：c++, arrays, qt, qstring

我想用 Qt 和 C++ 在 List Widget（基于项目）中显示我的数组的一些内容，我试过这个，但它不起作用：

```
QString exemple[2] = 'blablabla'
ui->listWidgetResult->addItem(exemple[2].toStdString().c_str()); 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T19:41:12.300

这是行不通的：

```
QString example[2] = 'blablabla' 
```

首先，`'`是`char`值，而不是字符串。其次，您要声明一个包含两个 QString 的数组，但将其分配给 C 字符串。你的意思可能是这样的：

```
QString example[2] = {"blabla", "blabla"}; 
```

您实际上可以缩写为：

```
QString example[] = {"blabla", "blabla"}; 
```

要将数组的每个字符串添加到列表小部件，您需要单独添加每个字符串。此外，无需转换为 C 字符串。QListWidget::addItem() 接受 QStrings：

```
for (int i = 0; i < sizeof(example); ++i) {
    ui->listWidgetResult->addItem(exemple[i]);
} 
```

或者，如果您有支持 C++-11 的最新编译器：

```
for (const auto& str : example) {
    ui->listWidgetResult->addItem(str);
} 
```

最后，不要使用普通数组来保存 QString，而是应该考虑将它们保存在 QStringList 中。然后，您可以简单地使用传递整个 QStringList `addItems()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-29T18:47:10.127

我认为这应该是您所要求的简单解决方案。

```
void MyClass::Set_List(QList<QString> filesList, int item_count)
{
    QVector<QString> load_set(item_count);
    for(int i = 0; i < item_count; i++)
    {
        load_set[i] = filesList[i];
        ui -> listWidget -> addItem(load_set[i]);
    }
} 
```

然后把信息找回来...

```
void MyClass::Selection(QListWidgestItem * item)
{
    for(int i = 0; i < item_count; i++)
    {
        if(ui -> listWidget -> item(i) == item)
        {
            str = ui -> listWidget -> item(i) -> text();
        }
    }
} 
```

# ruby-on-rails - 通过 JSON API 更新 Rails 中的布尔字段？

> ID：13367463
> 
> 赞同：0
> 
> 时间：2012-11-13T19:34:31.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, api, boolean

我有一个带有 5 个布尔字段的设置表。我希望能够通过 JSON 创建和更新这些字段。据我了解，Rails 将所有参数转换为字符串，因此布尔值始终返回 true。如果我发送：

```
{ "settings": { "setting1":true, "setting2":false } } 
```

然后尝试做: `Setting.new(params[:settings])`，这两个设置在数据库中都将为真，因为第二个设置的值`false`被转换为`"false"`，因此实际上计算为`true`。实际上我什至不能这样做，因为我得到：

```
NoMethodError (undefined method `stringify_keys' for #<String:0x000000213dcbd0>) 
```

在那条线上。互联网上的一些建议说将参数与 进行比较`"true"`，然后将其存储。不过，这是一个巨大的痛苦，因为那样我就无法利用批量分配。我不想这样做：

```
@setting = Setting.new
@setting.setting1 = (params[:settings][:setting1].eql? "true")
... 
```

对于所有 5 个字段，尤其是因为我必须为创建、更新甚至从其他控制器执行此操作（一些控制器接受 JSON 来创建设置对象以及它们自己的属性）。

有没有更好的方法来解决这个问题？JSON API 在 Rails 中看起来很标准，似乎会以更优雅的方式处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:03:27.900

您可以通过“0”而不是 false 将字段的值设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:56:31.777

只制作一个转换器类并将其粘贴在前置过滤器中怎么样？

```
class ApplicationController < ActionController::Base
  before_filter BooleanFilter
end

class BooleanFilter
  def self.filter(controller)
    # change all relevant string params to booleans, raise an exception if something other than "true" or "false" is detected
    # eg. params[:setting][:setting1] = ( params[:setting][:setting1] == "true" ? true : false )
  end
end 
```

将更改的参数分配给新的 Hash 对象并将其传递给模型可能更符合 Rails。

# jquery - getjson什么也没发生

> ID：13367468
> 
> 赞同：1
> 
> 时间：2012-11-13T19:34:42.343
> 
> 标签：jquery, ajax, json

以下代码有问题。在这一点上，我想看到警报，但甚至没有发生。

```
$.getJSON('demo.js',function(result){
        alert(1);
      $.each(result, function(i, field){
        $("div").append(field + " ");
      });
    }); 
```

demo.js 看起来像：

```
{ 
  "firstName": "John",
  "lastName": "Doe",
  "age": 25
} 
```

该警报甚至没有弹出。这是取自网络教程的代码，对我不起作用。我很困惑。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T16:28:43.690

出于调试目的，您可以执行

```
$.getJSON('demo.js',function(result) {
   console.log(result);
}).fail(function (j, t, e) {
   console.error(e);
}); 
```

但我认为您的问题是无效的 json 或标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:24:39.237

为了 $.getJSON，你必须提交一个 json 数据类型

如果您要省略数据类型，我相信使用手写 $.ajax 会起作用，但除非您自己的限制，演示出售的是 js 而不是 json 文件，否则真的没有理由

# android - Android 布局编辑器在问号上吓坏了

> ID：13367469
> 
> 赞同：2
> 
> 时间：2012-11-13T19:34:47.650
> 
> 标签：android, button, textview, graphical-layout-editor

这很奇怪，但我一直看到它，因为我有很多理由在这个应用程序中只显示一个简单的问号。

使用 Eclipse 图形布局编辑器进行编辑时，一切都很好……直到我告诉 TextEdit 或 Button 只显示一个问号。这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    >
    <TextView
        android:id="@+id/test_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/question_mark" />
</LinearLayout> 
```

并且字符串在 res/values/strings.xml 中定义。相关线路是：

```
<string name="question_mark">\u003f</string> 
```

我得到的错误信息是：

> 缺少样式。是否为此布局选择了正确的主题？使用布局上方的主题组合框选择不同的布局，或修复主题样式引用。
> 
> 找不到当前主题的主题资源

更改文本，错误消息就会消失。

您可以看到，在我的挣扎中，我什至尝试使用 unicode 版本的问号。是的， \？也不行。

请注意，这只发生在图形布局编辑器设置为 API 7 或更高版本时。

现在图形布局编辑器正确显示问号，模拟器和我的手机显示问号没有任何问题。我只是对占据我所有布局屏幕 1/4 的错误消息感到恼火（并且掩盖了可能出现的其他错误消息）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:25:43.177

首先，在今天发布的 ADT 21 版本上再次测试。

[如果问题仍然存在，请创建一个演示该问题的示例项目，并将其与Android 问题跟踪器](http://b.android.com)上的分步说明一起发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:56:13.590

好吧，这是一个非常糟糕的 hack，但它有点工作 - 如果你站在你的头上！

您可以使用 unicode \u00bf，如

```
 <TextView
    android:id="@+id/test_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="\u00bf" /> 
```

这不是一个普通的问号，但它足够接近黑客攻击并从你的头发中获取恼人的错误信息。它甚至可能增加你的应用程序的幽默商！

但是请，如果有人有真正的修复，请发布！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T16:56:47.660

哇，我输入了一份错误报告……[时间流逝]……最后，当 Google 团队开始查看它时，我收到了几封电子邮件。

今天，我收到了一个好消息。看起来该错误已被修复（他们发现了一些相关的错误，这些错误也已修复）。该修复程序将在下一个版本 21.1 预览版 2 中进行。您可以在[此处](http://code.google.com/p/android/issues/detail?id=39612)阅读官方详细信息。

期待它！

# xpages - XPage 应用程序、Notes 客户端和连接之间的 SSO

> ID：13367481
> 
> 赞同：2
> 
> 时间：2012-11-13T19:35:18.477
> 
> 标签：xpages, xpages-extlib, ibm-sbt

是否有人成功创建了包含 SSO 的 XPage 应用程序，以便用户登录到 notes 客户端并能够打开使用 Social Enabler 将 Connections 数据集成到 XPage 的 XPage 应用程序（数据库）？我的项目成功的关键是不需要提示用户输入他们的用户名和密码（用户刚刚登录到笔记！）。

我已经看到@nheidloff 博客关于在 xpage 和连接之间使用 LTPA 令牌的 SSO，但是我需要它才能在 notes 客户端中工作。如果有人在创建这个方面取得了任何成功，请您分享任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T19:40:50.083

我写了一篇关于技术的博客...

[http://lotusnotus.com/lotusnotus_en.nsf/dx/authenticating-notes-users-for-web-apps-automatically....htm](http://lotusnotus.com/lotusnotus_en.nsf/dx/authenticating-notes-users-for-web-apps-automatically....htm)

综上所述，我们需要一个 LtpaToken 来进行基于 Web 的身份验证。我们能够使用会话对象的 Java 方法在 Notes 客户端中创建 LtpaToken。所以我的解决方案有两个部分。

一个 java 代理，它在客户端为经过身份验证的用户生成有效的 LtpaToken。我们从任何 Lotusscript 例程中调用这个 java 代理。

第二部分是可以匿名访问的任何数据库上的重定向网页。这可能是 Lotusscript 代理、servlet 或 XAgent。它将从 GET 请求中获取 LTPAToken 和目标 URL，将 LTPAToken 添加到 cookie 中并将用户重定向回目标 URL。

在 Lotus Notes 客户端中，任何 Lotusscript 操作都可能调用 Java 代理、获取有效的 LTPAToken 并启动构造的 URL，该 URL 指向带有必要参数的重定向网页。

我在 Domino Web 服务器上检测到了几个错误。有关这些错误的技术和解决方法的详细信息，您可以参考我的博客条目。

# ssas - 处理分区比处理整个数据库花费更长的时间

> ID：13367483
> 
> 赞同：1
> 
> 时间：2012-11-13T19:35:22.260
> 
> 标签：ssas, tabular

我有一个表格模型多维数据集，我已将表拆分为分区以提高处理效率。

当我只*处理*每日分区时，它需要**2h 45m**。但是，当我*处理完整*的整个数据库（包括每日*和*历史数据）时，需要**1h 10m**。

有谁知道是什么原因造成的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:25:39.700

表格模型中的 ProcessFull 基本上是 ProcessData（从源中获取数据、构建字典等）和 ProcessReCalc（构建索引、属性层次结构等）的组合。虽然 ProcessData 只获取最新的数据（即分区的数据），但 ProcessReCalc 本身需要在整个数据库上执行。一个很好的参考是 Cathy Dumas 的博客文章：[http ://cathydumas.com/2012/01/25/processing-data-transactionally-in-amo/](http://cathydumas.com/2012/01/25/processing-data-transactionally-in-amo/)

要找到处理的原因，最好深入探查器跟踪/日志，以确定哪些操作需要很长时间才能完成处理。您的数据是否有可能包含大量重复的数据集，例如审计日志？完成整个数据库（与单个分区相比）可能更快，因为它能够更有效地压缩和组织数据，因为可以更好地压缩重复的数据，从而占用更少的内存。检查这一点的一种潜在方法是查看在分区上运行 ProcessFull 与在整个数据库上运行之后的模型大小。如果为真，则后面的处理将导致较小的数据库。

！

# android - 找到位置时的切换片段

> ID：13367484
> 
> 赞同：0
> 
> 时间：2012-11-13T19:35:23.807
> 
> 标签：android, geolocation, android-fragments

我有一个确定位置的主要活动。在这个主要活动中，我首先添加了一个闪屏片段。目前我发现第一个位置/GPS 工作正常并找到了一个位置，我想用我的主菜单替换这个闪屏。mainactivity中的相关代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.frame);

    //Check that the activity is using the layout version
    // the framelayout

    if(findViewById(R.id.fragment_container)!=null){
        //To avoid overlapping fragments check if we are restored from a state, then we don't have to do anything
        if(savedInstanceState != null){
            return;
        }

        Splash splashscr = new Splash();
        Main main = new Main();

        getSupportFragmentManager().beginTransaction()
        .add(R.id.fragment_container, splashscr).commit();

    // I **think something should be added here 
//to check if a location has been found yet.**

        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
        transaction.replace(R.id.fragment_container, main);
        transaction.commit();
        }

} 
```

我尝试在该位置添加一段时间（foundlocation！=true）。然后在 onLocationChanged() 或 getLocation() 结束时将 foundlocation 设置为 true。但是，它并没有解决我的问题。有人可以帮我吗？如果我的问题不够清楚，请说出来。

编辑：在考虑了 Gabe 的评论后，我尝试了这个（locationfound 是一个公共布尔值，在活动类中启动为 false）。但是，如果我现在使用 DDMS 发送位置，则启动画面不会消失。如果我是正确的，那么第一次更改位置时，布尔值仍然是错误的，因此它应该切换片段。我在没有 if 语句的情况下尝试了它，然后它就可以工作了。我在这里忘记了什么？

```
public void onLocationChanged(final Location location) { 

       if(locationfound=false)
       {
//Some irrelevant code about saving the new location

        Main main = new Main();

        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
        transaction.replace(R.id.fragment_container, main);
        transaction.commit();

        locationfound=true;
           }

//changing value of sometextboxes in the Main fragment

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:51:55.723

不要试图在 onCreate 中等待，这会阻止 UI 线程导致 UI 无响应。相反，您应该在第一次调用 onLocationChanged 函数时切换片段（通过使用布尔标志变量来判断它是否是第一次）。

# ruby-on-rails - best_in_place gem 不更新关联记录

> ID：13367485
> 
> 赞同：0
> 
> 时间：2012-11-13T19:35:25.140
> 
> 标签：ruby-on-rails, spree, best-in-place

我正在尝试更新购物车中订单的属性。为此，我想使用 best_in_place gem ( [https://github.com/bernat/best_in_place](https://github.com/bernat/best_in_place) )的就地编辑
无论如何，一旦它被实施，它不会更新提交记录。

这是我的看法：

```
= form_for @order, :url => update_cart_path, :html => {:id => 'update-cart'} do |order_form|
%div#line_items_list
  - @order.line_items.each do |line_item|
    %section#line-item.columns.twelve
      %div.line_picture.columns.three.alpha
        %div#line_picture
          = image_tag(line_item.variant.images.first.attachment.url(:product)) unless line_item.variant.images.length == 0
      %div#line_description.nine.columns.omega
        %span#line_title.nine.columns
          %span.columns.alpha= full_product_name(line_item.variant)
          %span#line_price.offset-by-five.columns.omega= money line_item.price
        %div#optionsvariant
          - if line_item.variant.option_values.any?
            - line_item.variant.sorted_values.each do |ov|
              %div#line_item_options
                %span= ov.option_type.presentation
                - if ov.swatch?
                  %span.imagelabel= image_tag("#{ov.swatch.url(:circle)}")
                - else
                  %span.textlabel.not_selected= ov.presentation
          %div#orderquantity
            Quantity
            = best_in_place [@order, line_item], :quantity, :type => :input
          - if line_item.subscription_line?
            %p#subline Auto ship: first pair ships today and every 1 month. 
```

这是我的控制器更新 aciton：

```
def update
@order = current_order
  respond_to do |format|
    if @order.update_attributes(params[:order])
      format.html do
        @order.line_items = @order.line_items.select {|li| li.quantity > 0 }
        fire_event('spree.order.contents_changed')
        respond_with(@order) { |f| f.html { redirect_to cart_path } }
      end

      format.json { respond_with_bip(@order)}
    else
      format.html {respond_with(@order)}
      format.json {respond_with_bip(@order)}

    end
  end
end 
```

这样做的正确方法是什么，所以它会更新购物车中我的 Line_item 的数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:50:24.623

删除

> = form_for @order, :url => update_cart_path, :html => {:id => 'update-cart'} 做 |order_form|

从表格顶部解决了这个问题。

# ruby - 在 CentOS 6.3 上安装 Rubinius 2.0.0-rc1 - 虽然我安装了它，但它抱怨没有找到 libyaml

> ID：13367487
> 
> 赞同：0
> 
> 时间：2012-11-13T19:35:41.177
> 
> 标签：ruby, centos, rubinius

请不要建议`RVM`相关的解决方案，我不使用它。我正在从源代码安装 Rubinius。我之前安装`libyaml`在`/usr/local`. 下文详述的任何以下尝试均失败，未找到共享对象 libyaml-0.so.2：

```
./configure --with-lib-dir /usr/local/lib

# same for

./configure --with-lib-dir /usr/local/lib --with-include-dir /usr/local/include 
```

无需将`lib`目录指向，`lib64`因为`locate libyaml`显示`libyaml`已安装在`/usr/local/lib`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:38:19.197

添加`/usr/local/lib`到`LD_LIBRARY_PATH`应该适合你：

在配置之前这样做：

```
export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH 
```

# wordpress - Wordpress 自定义帖子类别

> ID：13367489
> 
> 赞同：0
> 
> 时间：2012-11-13T19:35:58.687
> 
> 标签：wordpress, taxonomy, custom-post-type

我对 wordpress 很陌生，并且有一个问题，即使用一天的谷歌搜索，我似乎也无法解决。这就是我所做的：

1.  我创建了一个名为lookbook 的自定义帖子类型。这很好用，我可以添加新项目等。
2.  我添加了一个分类法，这样我就可以向它添加一个类别。

    ```
    function lookbook_taxonomy() {
    register_taxonomy( 'jeans','lookbook',
        array(
            'hierarchical' => true,
            'label' => 'jeans',
            'query_var' => true,
            'rewrite' => true
        )
    ); 
    ```

    }

3.  使用`wp_query`or`query_posts`我可以检索 Lookbook 项目并显示它们的内容。

4.  （问题）当我按下 word press 提供的类别链接时，页面只是回到索引。链接更改为所需的过滤器，但是没有帖子被过滤。我尝试了各种各样的东西，但我似乎可以找到一种方法来按下类别链接并显示这些帖子。

更新：（我用来注册帖子类型的代码）

```
add_action('init', 'lookbook_register_post_type'); 
```

功能lookbook_register_post_type（）{

```
register_post_type('lookbook', array(
      'labels' => array(
        'name' => __('lookbook'),
        'singular_name' => __('lookbook')),
      'public' => true,
      'capability_type' => 'post',
      'supports' => array(
        'title',
        'excerpt'
      ),
      'has_archive' => true,
      'taxonomies' => array('category','post_tag')
      )
    ); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:42:17.943

如果参数数组尚不存在，则需要将其添加`'has_archive' => true`到参数数组中。`register_post_type`

此外，请确保您已准备好必要的模板文件。阅读[Wordpress 的模板层次结构](http://codex.wordpress.org/Template_Hierarchy#Custom_Taxonomies_display)。

如果您向我们展示您用于注册帖子类型的代码，以及构成“类别链接”的代码，我们可能会提供更多帮助！

# lucene.net - Lucene.Net 2.9 和 3.0 之间的主要区别

> ID：13367490
> 
> 赞同：10
> 
> 时间：2012-11-13T19:36:06.103
> 
> 标签：lucene.net

我一直在四处寻找 Lucene.Net 3.0 的发行说明，但到目前为止都没有成功。目前我们使用 Lucene.Net 2.9，但它是一个内存猪，所以我试图找出 Lucene.Net 3.0 是否改进了内存管理。

至于我的问题，3.0的主要变化是什么？内存管理改进了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T08:23:28.857

查看源代码分发中的[CHANGES.TXT](https://svn.apache.org/repos/asf/lucene.net/tags/Lucene.Net_3_0_3_RC2_final/CHANGES.txt)。

```
=================== Release 3.0.3 2012-10-05 =====================

Bug
•[LUCENENET-54] - ArgumentOutOfRangeException caused by SF.Snowball.Ext.DanishStemmer
•[LUCENENET-420] - String.StartsWith has culture in it.
•[LUCENENET-423] - QueryParser differences between Java and .NET when parsing range queries involving dates
•[LUCENENET-445] - Lucene.Net.Index.TestIndexWriter.TestFutureCommit() Fails
•[LUCENENET-464] - The Lucene.Net.FastVectorHighligher.dll of the latest release 2.9.4 breaks any ASP.NET application
•[LUCENENET-472] - Operator == on Parameter does not check for null arguments
•[LUCENENET-473] - Fix linefeeds in more than 600 files
•[LUCENENET-474] - Missing License Headers in trunk after 3.0.3 merge
•[LUCENENET-475] - DanishStemmer doesn't work.
•[LUCENENET-476] - ScoreDocs in TopDocs is ambiguos when using Visual Basic .Net
•[LUCENENET-477] - NullReferenceException in ThreadLocal when Lucene.Net compiled for .Net 2.0
•[LUCENENET-478] - Parts of QueryParser are outdated or weren't previously ported correctly
•[LUCENENET-479] - QueryParser.SetEnablePositionIncrements(false) doesn't work
•[LUCENENET-483] - Spatial Search skipping records when one location is close to origin, another one is away and radius is wider
•[LUCENENET-484] - Some possibly major tests intermittently fail 
•[LUCENENET-485] - IndexOutOfRangeException in FrenchStemmer
•[LUCENENET-490] - QueryParser is culture-sensitive
•[LUCENENET-493] - Make lucene.net culture insensitive (like the java version)
•[LUCENENET-494] - Port error in FieldCacheRangeFilter
•[LUCENENET-495] - Use of DateTime.Now causes huge amount of System.Globalization.DaylightTime object allocations
•[LUCENENET-500] - Lucene fails to run in medium trust ASP.NET Application

Improvement
•[LUCENENET-179] - SnowballFilter speed improvment
•[LUCENENET-407] - Signing the assembly
•[LUCENENET-408] - Mark assembly as CLS compliant; make AlreadyClosedException serializable
•[LUCENENET-466] - optimisation for the GermanStemmer.vb‏
•[LUCENENET-504] - FastVectorHighlighter - support for prefix query
•[LUCENENET-506] - FastVectorHighlighter should use Query.ExtractTerms as fallback

New Feature
•[LUCENENET-463] - Would like to be able to use a SimpleSpanFragmenter for extrcting whole sentances 
•[LUCENENET-481] - Port Contrib.MemoryIndex

Task
•[LUCENENET-446] - Make Lucene.Net CLS Compliant
•[LUCENENET-471] - Remove Package.html and Overview.html artifacts
•[LUCENENET-480] - Investigate what needs to happen to make both .NET 3.5 and 4.0 builds possible
•[LUCENENET-487] - Remove Obsolete Members, Fields that are marked as obsolete and to be removed in 3.0
•[LUCENENET-503] - Update binary names

Sub-task
•[LUCENENET-468] - Implement the Dispose pattern properly in classes with Close
•[LUCENENET-470] - Change Getxxx() and Setxxx() methods to .NET Properties 
```

# flash - QML WebView flash 不播放

> ID：13367492
> 
> 赞同：2
> 
> 时间：2012-11-13T19:36:12.240
> 
> 标签：flash, webview, qml

使用 qmlviewer 运行以下 qml 脚本时，我无法播放 flash。

```
import QtQuick 1.0
import QtWebKit 1.0

WebView {
    id: webView
    width: 1280
    height: 720
    settings.pluginsEnabled: true
    url: "http://www.youtube.com"
} 
```

我使用的是 Qt 4.8.2，这在 Windows 7 或我的 Debian Linux 发行版上不起作用。尝试播放 youtube flash 内容时，我收到以下消息：

播放视频需要 Adob​​e Flash Player 或支持 HTML5 的浏览器。

我可以在 IE 8 和 Chrome 中播放这些内容。我应该使用什么插件才能让我的 WebView 识别？它不应该共享 Chrome 使用的同一个插件，因为它们都是基于 WebKit 的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:22:32.390

你的代码很好。我已经在我的系统（OpenSUSE Linux 和 Windows 7）上进行了测试，并且 Youtube Flash 播放器运行良好。我分别使用 Qt 4.8.7 和 Qt 4.8.2。所以你的flash插件肯定有问题。

如果启用`settings.pluginsEnabled`Web 视图，将使用安装在系统上的任何[NPAPI](http://en.wikipedia.org/wiki/NPAPI)样式的浏览器插件。在 Chrome 或 Internet Explorer 中进行测试对于检查 Flash NPAPI 插件是否有效没有帮助，因为 Google Chrome 附带了自己的捆绑 Flash 播放器，而 Internet Explorer 使用不同的 API 来加载插件。试试 Firefox，它实际上会使用与 web 视图相同的插件。

# javascript - 道场 iconClass 切换

> ID：13367495
> 
> 赞同：0
> 
> 时间：2012-11-13T19:36:26.440
> 
> 标签：javascript, dojo

我的 css 文件中有一系列具有不同类名的图像。然后我有一个外部js，它带有一个带有case语句的函数，可以检测我们所处的任何状态，然后我想要

```
dojo.addClass(this.id + "IDName", "iconName") 
```

但是，这不会改变我的默认 iconClass。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:35:07.033

我用了`registry.byId(this.id + "IDName").set("iconClass",functionName());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:30:23.403

您必须首先删除现有的图标类，然后添加新的。

# spring - Spring在jsp文件中输入某种格式

> ID：13367498
> 
> 赞同：1
> 
> 时间：2012-11-13T19:36:36.767
> 
> 标签：spring, jsp, spring-mvc, validation

大家好，我有一个简单的问题，Spring 3.0 MVC 中有没有办法格式化输入。这是一个示例：我有一个 jsp 页面，其输入如下

```
<th><spring:message code="label.hmerypogr" /></th> 
```

有没有办法让这个输入具有某种格式，如 F.../..../... 并且当用户键入数字时要填充的点（但格式保持不变）？例如，当用户按下 4545555666 时，输入将具有 F454/5555/666。

请帮我我在这里堆了很长时间。非常感谢！

# java - Java 抽象方法

> ID：13367500
> 
> 赞同：8
> 
> 时间：2012-11-13T19:36:43.613
> 
> 标签：java, abstract-class

我对`abstract`这里的关键字有点困惑。我的编译器告诉我，我不允许有一个抽象方法的主体。但是我的任务说：

> 抽象方法 orderDescription() 返回一个字符串，提供有关特定订单的详细信息。

```
abstract String orderDescription()
{
    return null;
} 
```

但是，如上所述，我的代码返回错误。所以我的问题是我应该为这个问题做些什么？

到目前为止，我刚刚删除了关键字 abstract 并且效果很好。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-13T19:37:24.023

```
abstract String orderDescription()
{
    return null;
} 
```

应该

```
abstract String orderDescription(); 
```

正如错误所说，您的抽象方法声明不应包含任何主体。

上面的语法要求实现（哪个类扩展抽象类并提供实现）返回一个字符串。

你不能实例化抽象类，所以有些类需要扩展抽象类并为这个抽象方法提供实现。

例子：

```
class MyabsClass 
{
  abstract String orderDescription();
}

class MyImplementation extends MyabsClass
{
   public String orderDescription()
    {
    return "This is description";
    }
}

 class MyClient
   {
     public static void main(String[] args)
      {
         MyImplementation imple = new MyImplementation();
         imple.orderDescription();
      }
   } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-13T19:39:46.797

当你**定义**一个抽象方法时，你是在告诉编译器任何子类都必须提供一个实现（或者也声明自己是抽象的）。

您在子类中**实现**抽象方法。

请记住，您不能自己创建抽象类的实例。抽象方法的全部意义在于告诉编译器您希望子类提供功能。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-13T19:39:21.710

本质上，抽象函数不应该包含任何细节，它是继承函数的占位符函数。正如 Nambari 所说，您应该只包括定义。

这用于当您希望一个类族都包含一个公共函数时，您希望每个子类都定义该函数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-13T20:15:25.020

抽象方法通常不应包含任何“真实”代码，抽象方法将被包含该方法的非抽象类覆盖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-20T11:09:17.500

抽象方法不应该有任何方法体。它只允许方法声明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-27T06:24:33.563

此外，添加到 Nambari 的示例中，您可以做的是

```
class MyabsClass 
{
  abstract String orderDescription();
}

 class MyClient
   {
     public static void main(String[] args)
      {
         MyabsClass mac = new MyabsClass(){
              public String orderDescription()
              {
                     return "This is description";
              }
         };
         mac.orderDescription();
      }
   } 
```

即通过匿名类。

# c# - 如何从实体框架中的数据库更新多对多关系？

> ID：13367501
> 
> 赞同：0
> 
> 时间：2012-11-13T19:36:50.333
> 
> 标签：c#, entity-framework

我们拥有：MySQL、.NET 连接器、C#、具有关系的 ADO 模型（多对多）

我有三个表：用户、组和用户组另一个程序将新项目添加到用户和用户组表中，但随后我尝试从任何组中获取所有用户，但我没有得到任何更改。只有当我重新启动我的程序时，我才会得到更改。所以我的问题是如何解决它？如何从数据库更新相关对象。或者是否可以关闭缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:39:44.987

您没有得到任何更改的原因是当您拉取数据时您的 DbContext 没有被更新，这*可以*解释为什么它仅在您的程序重新启动后才拉取更改。

# python - Python SQL游标给出不同的结果？

> ID：13367507
> 
> 赞同：1
> 
> 时间：2012-11-13T19:37:20.173
> 
> 标签：python, sqlite, python-2.x

我在 Python 中有以下函数：

```
def get_emo_results(emo, operator):
    cursor.execute("SELECT avg(?) FROM [LIWC Post Stats] "
                   "WHERE goals_scored {0} goals_taken "
                   "GROUP BY post_number "
                   "ORDER BY post_number ASC "
                   "LIMIT ?".format(operator), [emo, posts_limit])
    print "SELECT avg({1}) FROM [LIWC Post Stats] "\
            "WHERE goals_scored {0} goals_taken "\
            "GROUP BY post_number "\
            "ORDER BY post_number ASC "\
            "LIMIT {2}".format(operator, emo, posts_limit)
    return [x[0] for x in cursor.fetchall()] 
```

我调用它`get_emo_results('posemo', '>')`并将这个输出到标准输出：

```
SELECT avg(posemo) FROM [LIWC Post Stats] WHERE goals_scored > goals_taken GROUP BY post_number ORDER BY post_number ASC LIMIT 200 
```

但是，函数本身返回

```
[0.0, 0.0, 0.0, 0.0, 0.0, ... 0.0] 
```

我将 stdout 中的确切表达式复制并粘贴到我打开的 SQLite 进程中，我得到了这个：

```
1.8730701754386
2.48962719298246
2.18607456140351
2.15342105263158
2.33107456140351
2.11631578947368
2.37100877192982
1.95228070175439
2.01013157894737
...
3.37183673469388 
```

所以根本不是0。尽管使用相同的查询，为什么我的 Python 函数返回不同的东西？我究竟做错了什么？

**编辑**：

现在，当我去掉问号并直接格式化字符串时，它就可以工作了。为什么在这种情况下参数化查询不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:04:15.293

它的处理方式不同，因为您正在参数化您的查询。你不能真正参数化这样的列名。它试图保护您免受 SQL 注入，因此它（我在这里简化，但基本上）在将任何字符串传递给 SQL 引擎之前将其封装在引号中。

本质上，SQLlite 试图平均字符串文字 'posemo'

您可以将限制参数化，但是当涉及到列名时，您需要对它们进行硬编码，或者将它们以格式之类的方式放入字符串中。

# xslt - xslt 删除结束标点符号

> ID：13367509
> 
> 赞同：4
> 
> 时间：2012-11-13T19:37:26.537
> 
> 标签：xslt, xslt-2.0

我正在编写一个 xslt 样式表来将 MARC-xml 记录转换为 FGDC-xml 元数据。很多 MARC 字段末尾都有多余的标点符号（句点、冒号、逗号等），我想去掉它们。不过，我不想从行中删除*所有*标点符号。我的想法是编写一个带有*if*语句的模板并测试该字段是否以指定字符结尾，然后将其删除，但我不确定：1）这是否是一个好方法，以及 2）如何指定该过程。

**编辑了**我的 xslt：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" xmlns:marc="http://www.loc.gov/MARC21/slim" >
<xsl:output method="xml" encoding="UTF-8" indent="yes"/>

<xsl:template match="/">
<xsl:for-each select="marc:collection/marc:record">
  <xsl:result-document method="xml" href="banana_{marc:controlfield[@tag=001]}.xml">
    <metadata>
      <xsl:apply-templates select="self::marc:record"/>
    </metadata>
  </xsl:result-document>
</xsl:for-each>
</xsl:template>

<xsl:template match="marc:record">
  <pubinfo>
    <pubplace><xsl:value-of select="marc:datafield[@tag=260]/marc:subfield[@code='a']"/></pubplace>
    <publish><xsl:value-of select="marc:datafield[@tag=260]/marc:subfield[@code='b']" /></publish>
  </pubinfo>
</xsl:template>

</xsl:stylesheet> 
```

这是我的 xml 文档（或至少是其中的一个代表部分）：

```
<?xml version="1.0" encoding="UTF-8"?>
<marc:collection xmlns:marc="http://www.loc.gov/MARC21/slim" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.loc.gov/MARC21/slim http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd">
<marc:record>
    <marc:leader>01502cfm a2200313 a 4500</marc:leader>
    <marc:controlfield tag="001">7943586</marc:controlfield>
    <marc:datafield tag="260" ind1=" " ind2=" ">
        <marc:subfield code="a">[S.l. :</marc:subfield>
        <marc:subfield code="b">s.n. ,</marc:subfield>
        <marc:subfield code="c">18--]</marc:subfield>
    </marc:datafield>
</marc:record>
<marc:record>
    <marc:leader>01290cem a2200313 a 4500</marc:leader>
    <marc:controlfield tag="001">8108664</marc:controlfield>
    <marc:datafield tag="260" ind1=" " ind2=" ">
        <marc:subfield code="a">Torino :</marc:subfield>
        <marc:subfield code="b">Editore Gio. Batt. Maggi ,</marc:subfield>
        <marc:subfield code="c">1863.</marc:subfield>
    </marc:datafield>
</marc:record>
</marc:collection> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:59:16.067

`ends-with()`接受一个简单的字符串，而不是一个正则表达式。这就是您遇到以下问题的原因：

```
ends-with(marc:datafield[@tag=260]/marc:subfield[@code='b'],'.|:|,') 
```

如果要使用正则表达式，请使用`matches()`：

```
marc:datafield[@tag=260]/marc:subfield[@code='b']/matches(.,'^.*[\.:,]$') 
```

并删除使用`replace()`：

```
replace('Ends with punctuation.', '^(.*)[\.:,]$', '$1')
=>
Ends with punctuation 
```

仅在每个节点上执行替换而不是先使用 if 进行测试也可能更简单，因为不匹配的情况不会进行替换，这似乎是您想要的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T02:52:15.787

**存在一个通用的解决方案，它不需要提前知道所有结束标点符号是什么**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="text()[matches(., '^.*\p{P}$')]">
  <xsl:sequence select="replace(., '(^.*)\p{P}$', '$1')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于此 XML 文档时**：

```
<x>
    <t>Some text .</t>
    <t>Some text2 ;</t>
    <t>Some text3 (</t>
    <t>Some text4 !</t>
    <t>Some text5 "</t>
</x> 
```

**产生了想要的正确结果：**

```
<x>
      <t>Some text </t>
      <t>Some text2 </t>
      <t>Some text3 </t>
      <t>Some text4 </t>
      <t>Some text5 </t>
</x> 
```

**说明**：

正确使用**[`p{P}`](http://www.w3.org/TR/xmlschema-2/#charcter-classes)**字符类/类别。

`\p`是*标点符号*类别的转义。`P`是*所有标点符号*属性。

**更新**：

OP 提供了特定的源 XML 文档和她的转换代码。

**这是她的代码，用上述解决方案修改**：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" xmlns:marc="http://www.loc.gov/MARC21/slim" >
<xsl:output method="xml" encoding="UTF-8" indent="yes"/>

<xsl:template match="/">
<xsl:for-each select="marc:collection/marc:record">
  <xsl:result-document method="xml" href="banana_{marc:controlfield[@tag=001]}.xml">
    <metadata>
      <xsl:apply-templates select="self::marc:record"/>
    </metadata>
  </xsl:result-document>
</xsl:for-each>
</xsl:template>

<xsl:template match="marc:record">
  <pubinfo>
    <xsl:variable name="vSub1" select="marc:datafield[@tag=260]/marc:subfield[@code='a']"/>
    <xsl:variable name="vSub2" select="marc:datafield[@tag=260]/marc:subfield[@code='b']"/>
    <pubplace><xsl:value-of select="replace($vSub1, '(^.*)\s\p{P}$', '$1')"/></pubplace>
    <publish><xsl:value-of select="replace($vSub2, '(^.*)\s\p{P}$', '$1')" /></publish>
  </pubinfo>
</xsl:template>

</xsl:stylesheet> 
```

# smarty - 在子目录文档上使用扩展

> ID：13367511
> 
> 赞同：0
> 
> 时间：2012-11-13T19:37:30.650
> 
> 标签：smarty, extends, subdirectory, smarty3

目录设置如下：

```
common/base.tpl
main/foo.tpl
main/extras/bar.tpl
special/foo.tpl
special/bar.tpl 
```

在 main/foo.tpl 中，常规的`{extends file="common/base.tpl"}`工作正常。在 special/foo.tpl 中，`{extends file="main/foo.tpl"}`效果也很好。

我遇到的问题是扩展 main/extras/bar.tpl。我尝试过的任何方法都不会扩展此文档。如果我将它从 main/extras 中移出并移到 main/ 中，则一切都像 foo 示例一样。我什至尝试过 special/extras/bar.tpl，但这也不起作用。

那么如何在子目录中扩展文档呢？我设置了 $this->smarty->use_sub_dirs = true; 这没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:34:24.153

所以我找到了答案。它与extends 和includes 的渲染顺序有关，因为extends 是在includes 之后渲染的，因此extends 不会被继承。所以基本上你需要使用或其他，或两者但不包括/扩展对方。

# ruby - Path for persisting files between Capistrano deployments in a Ruby app

> ID：13367513
> 
> 赞同：1
> 
> 时间：2012-11-13T19:37:31.990
> 
> 标签：ruby, linux, file-io, filesystems, capistrano

Where is the proper path for creating files using Ruby on a *nix environment? The files must persist between restarts and releases. Obviously using the project path doesn't work as Capistrano will create a new folder for each push.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:45:20.443

Capistrano has a `system` directory created by default that should be linked to the `shared/system` directory at the root of your release path. This will persist between deployments.

You should put anything there that is not specific to your deployment, for example, attached files or other user uploads.

In your version control system you should be sure to not deploy this directory as to avoid packaging up your development-specific content. Generally it should be ignored, not included in your version control.

# protocol-buffers - Google 协议缓冲区的典型内存空间使用量是多少？

> ID：13367526
> 
> 赞同：2
> 
> 时间：2012-11-13T19:38:19.310
> 
> 标签：protocol-buffers

我正在开发一个小型设备，它有一组相当大的配置参数（~100 KB），这些参数是从 PC 软件生成的。过去，我们将参数存储在二进制文件中并将它们加载到数据结构中。维护有点烦（不同的语言，确保结构中的字段顺序匹配，不同的版本等），所以我们正在考虑去谷歌协议缓冲区。

从小型设备的角度来看，我担心存储序列化协议缓冲区所需的内存空间。我在 C 中工作，所以我下载了[protobuf-embedded-c](http://code.google.com/p/protobuf-embedded-c/)并开始研究一个示例。我对它计算的缓冲区的最大大小感到有点惊讶。例如，下面是空缓冲区的大小，然后是包含命名类型的单个变量的缓冲区：

```
#define MAX_M_Empty_SIZE 2
#define MAX_M_double_SIZE 12
#define MAX_M_float_SIZE 8
#define MAX_M_int32_SIZE 14
#define MAX_M_int64_SIZE 14
#define MAX_M_uint32_SIZE 9
#define MAX_M_uint64_SIZE 14
#define MAX_M_sint32_SIZE 9
#define MAX_M_sint64_SIZE 14
#define MAX_M_fixed32_SIZE 8
#define MAX_M_fixed64_SIZE 12
#define MAX_M_sfixed32_SIZE 8
#define MAX_M_sfixed64_SIZE 12
#define MAX_M_bool_SIZE 5 
```

每次我在结构中添加一个“int32”时，最大大小增加了 14 个字节。我知道这包括变体编码的关键和可能最坏的情况，但是我能期待什么？较大的消息比较小的消息更有效，还是更依赖于编码值？

总之，我只是想了解协议缓冲区上的内存空间使用情况。我讨厌用易用性换取大量增加存储配置数据所需的内存空间。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:04:37.003

`int32`写为*varint*，这意味着对于正值，它占用的空间取决于大小。小的正值可以是单字节的；较大的正值可能需要更多。负值占用更多空间 - 特别是，它占用的空间与非常大的**64 位**数字相同。"varint" 是 7 位加续；所以一个负数（或一个大的正数）可以占用 10 个字节。为避免这种情况，如果您知道您的值可能是负数，您可以使用`sint32`/ `sint64`- 这使用*zig-zag*编码（然后*是 varint*） - 这基本上使小**幅度值比****大幅度**值占用更少的空间（无论符号如何）。

如果您需要针对最坏情况进行优化，那么可以考虑使用`fixed32`/`fixed64`代替；这保证恰好占用 4 或 8 个字节。

概括：

*   总是（或几乎总是）积极的，通常是小到中等大小：`int32`/`int64`
*   正或负，通常为中小幅度：`sint32`/`sint64`
*   较大的值，或者需要保证大小：`fixed32`/`fixed64`

还有一些其他的；完整的详细信息在[语言指南中](https://developers.google.com/protocol-buffers/docs/proto)

（在上述所有情况下，您还需要包含标头，但这通常是 1 或 2 个字节）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:59:36.147

Nanopb 可以使用非常小的内存空间，它还可以直接序列化到文件/从文件序列化以避免需要内存缓冲区： http: [//koti.kapsi.fi/jpa/nanopb/](http://koti.kapsi.fi/jpa/nanopb/)

# java - Java 陷入无限循环，在 Windows Server 2003 上执行 wmic 命令

> ID：13367527
> 
> 赞同：2
> 
> 时间：2012-11-13T19:38:23.430
> 
> 标签：java, windows, windows-server-2003

我正在尝试获取 Windows Server 2003 机器上正在运行的进程及其文件路径的列表。我正在使用以下代码来尝试这样做：

```
protected Map<String,String> getProcesses() {
    Map<String,String> processes = new HashMap<String,String>();
    try {
        String line;
        Process p = null;

        // Windows
        if (OS.indexOf("win") >= 0) {
            p = Runtime.getRuntime().exec("wmic process get description,executablepath");
            BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
            LOG.info("Entering while loop");
            while ((line = input.readLine()) != null) {
                LOG.info("blah");
                String[] array = line.split("\\s+");
                if (array.length > 1) {
                    processes.put(array[0], array[1]);
                }
            }
            LOG.info("Exited while loop");
            input.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return processes;
} 
```

程序在 while 条件下陷入无限循环。“blah”和“Exited while loop”永远不会输出到日志中。我已经在我的 win7 本地计算机和输出信息的服务器上的命令提示符下运行了该命令。我还在我的本地机器上运行了上面的代码，它也可以正常工作。看起来这是 Java 和 Windows Server 2003 之间的一些问题，我在过去 3 小时的谷歌搜索中无法找到。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T19:49:22.967

`OutputStream`在获取和使用您的`InputStream`. 这将确认您已启动的流程已完成向流程发送输入（在本例中为无输入）。

```
p.getOutputStream().close(); 
```

请记住，在`Process`对象上，`getInputStream()`输入来自进程的输出流，而`getOutputStream()`输出则进入进程的输入流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:53:46.190

请记住，`BufferedReader.readLine()`如果没有到达输入的结尾，操作将阻塞，请参见[此处](https://stackoverflow.com/questions/2776724/java-bufferedreader-readline-blocking)。

我认为您所遇到的情况在[API](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html)中进行了解释`Process`：

> 创建进程的方法可能不适用于某些本机平台上的特殊进程，例如本机窗口进程、守护进程、Microsoft Windows 上的 Win16/DOS 进程或 shell 脚本。创建的子进程没有自己的终端或控制台。它所有的标准io（即stdin、stdout、stderr）操作都会通过三个流（getOutputStream()、getInputStream()、getErrorStream()）重定向到父进程。父进程使用这些流向子进程提供输入并从子进程获取输出。由于部分原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至死锁。

# javascript - 如何在 JavaScript 中实现“添加新项目”功能？

> ID：13367529
> 
> 赞同：2
> 
> 时间：2012-11-13T19:38:30.367
> 
> 标签：javascript, html, web-applications, web

标题不是很有描述性，但我找不到更好的。随意编辑它。

基本上我正在寻找的是执行以下操作的最佳方法：

![添加新项目](../Images/3360ae93e7559c5e15afea1273a74e5d.png)

当用户单击“添加新项目”时，会添加一个带有相同文本框的新行，并如上所示下拉。我能想到的选项如下：

*   在 JavaScript 代码中硬编码 HTML。这显然是一个非常丑陋的解决方案。
*   从 DOM 节点（或 jQuery 对象）组装 HTML。这也非常难看。
*   使用客户端模板系统。我曾经使用过其中一个，它很奇怪（它使用`<script language="html">`标签来定义模板）。
*   制作一个临时的客户端“模板”并用 CSS 以某种方式隐藏它。
*   发出 AJAX 请求以获取 HTML。这很慢并且不必要地使用服务器资源。

你有什么建议？我对上述任何解决方案都不完全满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:48:39.583

如果您已经在页面上使用了 jquery 或 sencha 之类的框架，那么您不妨使用它。

否则，我会尽可能简单。这看起来不是一个非常重要的核心功能，所以不要创建需要额外 https 请求甚至加载整个库的东西。克隆或生成 html 可能看起来不优雅，但它会是：

*   快速实施
*   易于阅读，因此易于调试
*   浪费资源少，速度极快
*   稳定的
*   不需要服务器端代码或额外的 http 请求
*   如果需要，以后可以很容易地更改实现

不要为像这样微不足道的事情创造一些矫枉过正的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:49:15.480

假设超级简单的方法并且您的格式在表格中：

```
<table>
    <tr>
        <td><input type="text" name="item_name" placeholder="item name" /></td>
        <td><select name="item_type"><option value="" selected="selected">Type</option></select></td>
    </tr>
    <tr>
        <td><input type="text" name="item_name" placeholder="item name" /></td>
        <td><select name="item_type"><option value="" selected="selected">Type</option></select></td>
    </tr>
    <tr>
        <td colspan="2" id="add">+ Add new item</td>
    </tr>
</table> 
```

您可以使用以下内容：

```
$('#add').on('click',function(e){
    var $this = $(this);
    var $newRow = $this.closest('table').find('tr:first').clone();
    $newRow.find(':input').val('');
    $newRow.insertBefore($this.parent());
}); 
```

分解：

1.  我们给最后一个项目一个 ID，以便更容易绑定点击事件。
2.  使用 jQuery 并将点击事件绑定到该 ID：
    *   抓取我们在 ( `$this.closest('table')`)内单击的当前表格
    *   找到该表中的第一行并将其复制 ( `.clone()`)
    *   删除任何可能存在的填充值 ( `.find(':input').val('')`)
    *   将这个新的克隆行附加到“添加新项目”行上方的表中 ( `$newRow.insertBefore(...)`)

您也可以采用模板方法，但这完全取决于您以及您希望对输出进行多少控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:07:43.197

虽然我意识到您已经有了一个公认的答案，但我想我会提供一种简单的 JavaScript 方法来实现相同的目标：

```
function closest(el, tag) {
    if (!el || !tag) {
        return false;
    }
    else {
        var curTag = el.tagName.toLowerCase();
        return curTag == tag.toLowerCase() && curTag !== 'body' ? el : closest(el.parentNode, tag);
    }
}

function addRow(el) {
    if (!el) {
        return false;
    }
    else {
        var tr = closest(el, 'tr').previousElementSibling,
            newRow = tr.cloneNode(true);
        tr.parentNode.insertBefore(newRow, tr.nextSibling);
    }
}

document.getElementById('add').onclick = function() {
    addRow(this);
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6FTbf/2/)。

稍微修改了上面的内容，添加一个简单的 shim 来应对那些没有实现的浏览器`previousElementSibling`：

```
function closest(el, tag) {
    if (!el || !tag) {
        return false;
    }
    else {
        var curTag = el.tagName.toLowerCase();
        return curTag == tag.toLowerCase() && curTag !== 'body' ? el : closest(el.parentNode, tag);
    }
}

function prevElementSiblingShim(el) {
    if (!el) {
        return false;
    }
    else {
        var prevSibling = el.previousSibling;
        return prevSibling.nodeType == 1 ? prevSibling : prevElementSiblingShim(prevSibling);
    }
}

function addRow(el) {
    if (!el) {
        return false;
    }
    else {
        var par = closest(el, 'tr'),
            tr = par.previousElementSibling || prevElementSiblingShim(par),
            newRow = tr.cloneNode(true);
        tr.parentNode.insertBefore(newRow, tr.nextSibling);
    }
}

document.getElementById('add').onclick = function() {
    addRow(this);
}​ 
```

参考：

*   [`cloneNode()`](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode).
*   [`insertBefore`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore).
*   [`nextSibling`](https://developer.mozilla.org/en-US/docs/DOM/Node.nextSibling).
*   [`nodeType`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType).
*   [`parentNode`](https://developer.mozilla.org/en-US/docs/DOM/Node.parentNode).
*   [`previousElementSibling`](https://developer.mozilla.org/en-US/docs/DOM/Element.previousElementSibling) ^([兼容性](http://www.quirksmode.org/dom/w3c_core.html#t84))。
*   [`previousSibling`](https://developer.mozilla.org/en-US/docs/DOM/Node.previousSibling).
*   [`tagName`](https://developer.mozilla.org/en-US/docs/DOM/element.tagName).
*   [`toLowerCase()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T19:46:41.703

将字符串中的 HTML 插入 DOM 是最有效的方法。除非您一次插入数百个，否则这并不重要。

# android - 如何在日期上使用 SectionIndexer

> ID：13367531
> 
> 赞同：3
> 
> 时间：2012-11-13T19:38:46.317
> 
> 标签：android, android-listview

我一直在寻找在我的 listView 中的日期上使用 SectionIndexer 的方法。我想在快速滚动我的列表时显示“短日期”。几年前我看到一个帖子，一个人说他可以正常工作，但他有一个不同的问题，但遗憾的是他没有为他的方法发布任何代码。

我想我将不得不对我的自定义 ArrayAdapter 做一些事情，但我不确定是什么，有人知道我在哪里可以找到这样的东西吗？

谢谢，-埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:55:06.723

好的，这就是我最终为了让它正常工作而做的事情，以防万一将来有人正在寻找类似的东西。

```
private class TransactionAdapter extends ArrayAdapter<Transaction> implements SectionIndexer
{
    private ArrayList<Transaction> items;
    private Context context;
    LinkedHashMap<String, Integer> dateIndexer;
    String[] sections;

    public TransactionAdapter(Context context, int textViewResourceId, ArrayList<Transaction> items)
    {
        super(context, textViewResourceId, items);
        this.context = context;
        this.items = items;

        this.dateIndexer = new LinkedHashMap<String, Integer>();
        int size = items.size();
        String prDate = " ";

        for (int x = 0; x < size; x++)
        {
            Transaction tr = items.get(x);
            Calendar date = tr.getDate();
            String month = date.getDisplayName(Calendar.MONTH, Calendar.SHORT, Locale.getDefault());
            String year = String.valueOf(date.get(Calendar.YEAR));
            String shortDate = month + " " + year;

            if( !shortDate.equals(prDate))
            {
                this.dateIndexer.put(shortDate, x);
                prDate = shortDate;
            }
        }

        Set<String> sectionDates = this.dateIndexer.keySet();

        // create a list from the set to sort
        ArrayList<String> sectionList = new ArrayList<String>(sectionDates);
        this.sections = new String[sectionList.size()];
        sectionList.toArray(this.sections);
    }

    public int getPositionForSection(int section) 
    {
        return dateIndexer.get(this.sections[section]);
    }

    public int getSectionForPosition(int position) 
    {
        return 0;
    }

    public Object[] getSections() 
    {
        return this.sections;
    }
} 
```

我在两个地方的组合中找到了答案：

1.  本教程帮助我初步实现了 SectionIndexter: [Android ListView with fastscroll and section index](http://twistbyte.com/tutorial/android-listview-with-fast-scroll-and-section-index)

2.  这篇文章解决了我在 HashMap 更改数组排序时遇到的问题，它建议改用 LinkedHashMap。[Java HashMap keySet() 迭代顺序是否一致](https://stackoverflow.com/questions/1882762/is-the-java-hashmap-keyset-iteration-order-consistent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:25:35.673

你可以使用[这个](https://github.com/ragunathjawahar/simple-section-adapter)库。这是可用于 Android 的 ListView 的最简单的部分适配器。它适用于您已经拥有的列表适配器。没有项目特定的依赖项。只需将最新的 jar 或源代码包含到您的 Android 项目中即可。

# registry - 注册表 UDDI 出现 WSO2 错误

> ID：13367533
> 
> 赞同：0
> 
> 时间：2012-11-13T19:38:57.703
> 
> 标签：registry, wso2, wso2esb, uddi

我正在使用 WSO2 Enterprise Service Bus 4.5.1。

我已经安装了 Registry UDDI，但是当我启动 wso2server.bat 时它没有启动，错误是：

```
ERROR - JUDDIJAXWSDeployer Exception creating Axis Ser
vice : java.lang.ClassNotFoundException: org.apache.openjpa.enhance.PersistenceCapable
java.lang.NoClassDefFoundError: org/apache/openjpa/enhance/PersistenceCapable
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(
DefaultClassLoader.java:188)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(Clas 
```

有什么建议？？？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:22:03.763

我相信你做对了。您看到的问题是这一系列版本中的一个已知错误。我们正在为此制定解决方案，并期待解决此问题。

请关注[https://wso2.org/jira/browse/REGISTRY-1575](https://wso2.org/jira/browse/REGISTRY-1575)。

谢谢，塞纳卡。

# vb.net - microsoft.office.interop.excel 留在进程列表中

> ID：13367534
> 
> 赞同：1
> 
> 时间：2012-11-13T19:38:58.643
> 
> 标签：vb.net, excel-interop

当我使用`microsoft.office.interop.excel`创建 Excel 文件时，我总是`quit`在最后调用命令。但是，比以往任何时候，如果我查看 Windows 任务管理器的进程列表，我可以清楚地看到该进程仍然存在，一段时间后我最终得到了一堆。

我想这在正常情况下并不是什么大问题，但我仍然想防止每次都发生这种情况。

有没有办法做到这一点？

我无法继续杀死所有 Excel 进程，因为其中一些可能真的在运行应用程序，我无法真正区分两者之间的区别。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:32:42.450

臭名昭著的罪犯（自动化）！要完全关闭您 为所有 Word 和 Excel 对象调用[Marshal.FinalReleaseComObject({com object})的过程。](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.finalreleasecomobject.aspx)

# javascript - 为什么 jQuery 的 show() 和 hide() 方法会触发淡入淡出？

> ID：13367535
> 
> 赞同：3
> 
> 时间：2012-11-13T19:39:00.607
> 
> 标签：javascript, jquery, html

我现在正试图在客户端显示和隐藏推文，但 jQuery 正在折叠元素 on`hide()`并将其淡入`show()`。

相关HTML：

```
<aside>
  <div class="tweet-author">
    <p class="name">Graham Swan</p>
    <p class="position">Managing Partner</p>
  </div>

  <div class="tweet">
    <blockquote>Just had the greatest cup of coffee ever!</blockquote>
    <div class="clearfix">
      <time>2 minutes ago <span>via</span> Twitter</time>
      <a href="#">Hide Tweets</a>
    </div>
  </div>
</aside> 
```

相关的 JavaScript：

```
// Hide tweets when "Hide Tweets" link is clicked
$(document).on('click', 'div.tweet > div.clearfix > a', function(e) {
  e.preventDefault();
  $("div.tweet").hide(function() {
    $("div.tweet-author > p.name").html("Show Recent Tweets");
    $("div.tweet-author > p.position").html("By the iNovia Team");
    $("aside").addClass("click-to-show-tweets");
  });
});

// Show tweets when "Show Recent Tweets" link is clicked
$(document).on('click', 'aside.click-to-show-tweets', function(e) {
  e.preventDefault();
  $("div.tweet").show(function() {
    $("div.tweet-author > p.name").html("Graham Swan");
    $("div.tweet-author > p.position").html("Managing Partner");
    $("aside").removeClass("click-to-show-tweets");
  });
}); 
```

jQuery 正在执行以下操作：

*   在调用时折叠`div.tweet`元素而不是立即隐藏它。`hide()`
*   淡入（在 webkit 浏览器中）或扩展（在 moz 浏览器中）`div.tweet`元素，而不是在`show()`调用时立即显示它。

我已经尝试过 jQuery 的 v1.7.2 和 v.1.8.2 以及不同的浏览器，但都产生了相同的效果。

**有谁知道为什么会这样？**

如果有帮助，您可以在[http://grahamswan.com/clients/inovia](http://grahamswan.com/clients/inovia)看到一个实时示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T19:42:11.670

您使用的方法签名 ( `.hide( duration [, callback] )`) 用于动画隐藏。立即隐藏的签名只是`$("div.tweet").hide();`为了立即隐藏元素，您可以`0`在回调参数之前传递一个持续时间的参数。

更好的是，只需在调用`$("div.tweet").hide();`. 你真的不需要回调；隐藏动作是同步的。

```
$("div.tweet").hide();
(function() {
    $("div.tweet-author > p.name").html("Show Recent Tweets");
    $("div.tweet-author > p.position").html("By the iNovia Team");
    $("aside").addClass("click-to-show-tweets");
  })(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:44:36.903

您需要更改隐藏和显示的持续时间。

```
$("div.tweet").hide(0, function() ...

$("div.tweet").show(0, function() ... 
```

[示例小提琴](http://jsfiddle.net/Gpj6e/)

# c# - 使用实体框架从 sql 语句的结果创建模型

> ID：13367539
> 
> 赞同：0
> 
> 时间：2012-11-13T19:39:10.623
> 
> 标签：c#, sql-server, entity-framework

在我工作的当前环境中，我遇到了一个不太信任的数据库。在我的所有 sannannigans 中，没有键的表、大小错误的字段、表中非常糟糕的分离和关系等等。
好吧，他们要求我在该数据库中进行查询，而我无法为此创建视图。我也没有对此类数据库的任何写入访问权限。
是否可以使用 Entity 解析查询结果并填充该模型的列表？

我知道如何使用 nhibernate 和手动进行操作，但是，是否可以在 EF 中进行操作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:49:05.817

您只需按照上一篇文章中的描述将[您](https://stackoverflow.com/questions/4660697/entity-framework-4-sql-to-linq-how-to-select-strings-that-are-not-uppercase)`SELECT`本来要放在视图中的内容直接放入 ExecuteQuery 中，然后按照您的意愿进行数据验证。

# database - 用于财务数据分析的面向列的数据库

> ID：13367542
> 
> 赞同：-1
> 
> 时间：2012-11-13T19:39:24.430
> 
> 标签：database, postgresql, nosql, finance

我目前有很多想要分析和计算的财务数据。我已经构建了一个从平面文件中读取数据的数据系统，并进行了一些相当智能的缓存来保持我想要的性能。但是我开始为这个系统提供大量数据......

我目前正在考虑使用 POSTGres 并有一个类似这样的模式：

```
Table: Things
Fields: T_id, Row, Sub-Row, Column, Resolution, Readable-Name, Meta

Table: Data
Fields: d_id, T_id, timestamp, value 
```

我想知道如果我的数据表有数十亿行，POSTGres 是否会在上述模式下表现出色。

我的另一个想法是使用面向列的数据库，但我似乎找不到任何好的开源数据库来开始使用。Cassandra 真的不适合这种情况，因为我会阅读比写作更多的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:26:18.187

取决于您的期望 - PostgreSQL 可能可以在您的架构上处理此查询，但它可能是几分钟或几小时长的查询 - 取决于已处理的行 - 但列存储数据库可以快 10 倍 - 只是 PostgreSQL 是关系 OLTP 数据库，而您的架构没有很好地规范化，您可能更喜欢 OLAP。

有一些开源列存储数据库，如 MonetDB 或 LucidDB，但它们不是来自 PostgreSQL 的空间。只有商业数据库 Vertica。您可以查看 MySQL 引擎[http://www.mysqlperformanceblog.com/2010/08/16/testing-mysql-column-stores/](http://www.mysqlperformanceblog.com/2010/08/16/testing-mysql-column-stores/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:06:47.070

答案取决于您的预算。

以下是我们在实践中使用的解决方案列表（从便宜到昂贵）：

MongoDB PostgreSQL InfiniDB kdb+

# java - Java：序列化和反序列化音频文件

> ID：13367543
> 
> 赞同：0
> 
> 时间：2012-11-13T19:39:25.513
> 
> 标签：java, serialization, wave

我正在写一个小格斗游戏。现在我正在使用动画、组合等创建角色制作器。我的精灵已经遇到了一些问题，因为 BufferedImage 无法序列化。这已通过 PixelGrabber 解决 - 当我单击 saveButton 时，此 pixelGrabber 从 Image 中抓取像素并将它们保存为数组。然后可以序列化这个数组。当我加载这个项目时，它可以被反序列化，并再次用作图像。现在，我的问题 - 是否可以将 .wav 文件保存为可序列化的数组？在此之后反序列化并再次将其用作音频文件？对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:39:54.903

这是一个处理 WAV 文件的简单框架：[http ://www.labbookpages.co.uk/audio/javaWavFiles.html](http://www.labbookpages.co.uk/audio/javaWavFiles.html)

我很快就写出来了，如果有任何错误，我深表歉意，但这是将 wav 文件加载到 ArrayList 中的样子：

```
//make sure to import java.util.ArrayList; 
try {
    // load the file, set up the buffer
    WavFile gameWav = WavFile.openWavFile( new File( "game_sound.wav" ) );
    ArrayList<double> gameWavArray = new ArrayList<double>();
    long framesRead = 0;
    long totalFrames = gameWav.getNumFrames();
    //read the buffer in 1000 frames at a time
    do {
        double[] gameWavBuffer = new double[1000];
        // Read the frames into array, increment framesRead
        framesRead = framesRead + Long.valueOf( gameWav.readFrames(gameWavBuffer, framesRead, 1000) );
        //add all of the new frames to our ArrayList
        Collections.addAll(gameWavArray, gameWavBuffer );
    }
    while (framesRead < totalFrames );
}
catch (Exception e) {
     System.err.println(e);
} 
```

# linux - openGL MSAA 不适用于带有 nouveau 驱动程序的 linux

> ID：13367544
> 
> 赞同：5
> 
> 时间：2012-11-13T19:39:25.810
> 
> 标签：linux, opengl, mesa, antialiasing, msaa

最近我尝试在 Linux 下使用 MSAA（多采样抗锯齿）。结果令人惊讶：使用 Nvidia 专有驱动程序一切正常，但使用 nouveau 驱动程序就不行了。奇怪的是，glxingo 说 GLX_ARB_multisample 是受支持的，我能够获得适当的 FBConfig，其中 GLX_SAMPLE_BUFFERS 设置为 1，GLX_SAMPLES 设置为 4（或 8）。但是在渲染方面，图片没有应用抗锯齿。我的项目和 freeglut 都存在这个问题，所以我将提供一个基于 glut 的小型程序来证明这个问题：

```
/*
 * Test multisampling and polygon smoothing.
 *
 * Brian Paul
 * 4 November 2002
 */

#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <GL/glut.h>

static GLfloat Zrot = 0;
static GLboolean Anim = GL_TRUE;
static GLboolean HaveMultisample = GL_TRUE;
static GLboolean DoMultisample = GL_TRUE;

static void
PrintString(const char *s)
{
   while (*s) {
      glutBitmapCharacter(GLUT_BITMAP_8_BY_13, (int) *s);
      s++;
   }
}

static void
Polygon( GLint verts, GLfloat radius, GLfloat z )
{
   int i;
   for (i = 0; i < verts; i++) {
      float a = (i * 2.0 * 3.14159) / verts;
      float x = radius * cos(a);
      float y = radius * sin(a);
      glVertex3f(x, y, z);
   }
}

static void
DrawObject( void )
{
   glLineWidth(3.0);
   glColor3f(1, 1, 1);
   glBegin(GL_LINE_LOOP);
   Polygon(12, 1.2, 0);
   glEnd();

   glLineWidth(1.0);
   glColor3f(1, 1, 1);
   glBegin(GL_LINE_LOOP);
   Polygon(12, 1.1, 0);
   glEnd();

   glColor3f(1, 0, 0);
   glBegin(GL_POLYGON);
   Polygon(12, 0.4, 0.3);
   glEnd();

   glColor3f(0, 1, 0);
   glBegin(GL_POLYGON);
   Polygon(12, 0.6, 0.2);
   glEnd();

   glColor3f(0, 0, 1);
   glBegin(GL_POLYGON);
   Polygon(12, 0.8, 0.1);
   glEnd();

   glColor3f(1, 1, 1);
   glBegin(GL_POLYGON);
   Polygon(12, 1.0, 0);
   glEnd();
}

static void
Display( void )
{
   glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

   glColor3f(1, 1, 1);
   if (HaveMultisample) {
      glRasterPos2f(-3.1, -1.6);
      if (DoMultisample)
         PrintString("MULTISAMPLE");
      else
         PrintString("MULTISAMPLE (off)");
   }
   glRasterPos2f(-0.8, -1.6);
   PrintString("No antialiasing");
   glRasterPos2f(1.6, -1.6);
   PrintString("GL_POLYGON_SMOOTH");

   /* multisample */
   if (HaveMultisample) {
      glEnable(GL_DEPTH_TEST);
      if (DoMultisample)
         glEnable(GL_MULTISAMPLE_ARB);
      glPushMatrix();
      glTranslatef(-2.5, 0, 0);
      glPushMatrix();
      glRotatef(Zrot, 0, 0, 1);
      DrawObject();
      glPopMatrix();
      glPopMatrix();
      glDisable(GL_MULTISAMPLE_ARB);
      glDisable(GL_DEPTH_TEST);
   }

   /* non-aa */
   glEnable(GL_DEPTH_TEST);
   glPushMatrix();
   glTranslatef(0, 0, 0);
   glPushMatrix();
   glRotatef(Zrot, 0, 0, 1);
   DrawObject();
   glPopMatrix();
   glPopMatrix();
   glDisable(GL_DEPTH_TEST);

   /* polygon smooth */
   glEnable(GL_POLYGON_SMOOTH);
   glEnable(GL_LINE_SMOOTH);
   glEnable(GL_BLEND);
   glPushMatrix();
   glTranslatef(2.5, 0, 0);
   glPushMatrix();
   glRotatef(Zrot, 0, 0, 1);
   DrawObject();
   glPopMatrix();
   glPopMatrix();
   glDisable(GL_LINE_SMOOTH);
   glDisable(GL_POLYGON_SMOOTH);
   glDisable(GL_BLEND);

   glutSwapBuffers();
}

static void
Reshape( int width, int height )
{
   GLfloat ar = (float) width / (float) height;
   glViewport( 0, 0, width, height );
   glMatrixMode( GL_PROJECTION );
   glLoadIdentity();
   glOrtho(-2.0*ar, 2.0*ar, -2.0, 2.0, -1.0, 1.0);
   glMatrixMode( GL_MODELVIEW );
   glLoadIdentity();
}

static void
Idle( void )
{
   Zrot = 0.01 * glutGet(GLUT_ELAPSED_TIME);
   glutPostRedisplay();
}

static void
Key( unsigned char key, int x, int y )
{
   const GLfloat step = 1.0;
   (void) x;
   (void) y;
   switch (key) {
      case 'a':
         Anim = !Anim;
         if (Anim)
            glutIdleFunc(Idle);
         else
            glutIdleFunc(NULL);
         break;
      case 'm':
         DoMultisample = !DoMultisample;
         break;
      case 'z':
         Zrot = (int) (Zrot - step);
         break;
      case 'Z':
         Zrot = (int) (Zrot + step);
         break;
      case 27:
         exit(0);
         break;
   }
   glutPostRedisplay();
}

static void
Init( void )
{
   /* GLUT imposes the four samples/pixel requirement */
   int s;
   glGetIntegerv(GL_SAMPLES_ARB, &s);
   if (!glutExtensionSupported("GL_ARB_multisample") || s < 1) {
      printf("Warning: multisample antialiasing not supported.\n");
      HaveMultisample = GL_FALSE;
   }
   printf("GL_RENDERER = %s\n", (char *) glGetString(GL_RENDERER));
   printf("GL_SAMPLES_ARB = %d\n", s);

   glBlendFunc(GL_SRC_ALPHA, GL_ONE);
   glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
   glBlendFunc(GL_SRC_ALPHA_SATURATE, GL_ONE);

   glGetIntegerv(GL_MULTISAMPLE_ARB, &s);
   printf("GL_MULTISAMPLE_ARB = %d\n", s);
}

int
main( int argc, char *argv[] )
{
   glutInit( &argc, argv );
   glutInitWindowPosition( 0, 0 );
   glutInitWindowSize( 600, 300 );
   glutInitDisplayMode( GLUT_RGB | GLUT_ALPHA | GLUT_DOUBLE |
                        GLUT_DEPTH | GLUT_MULTISAMPLE );
   glutCreateWindow(argv[0]);
   glutReshapeFunc( Reshape );
   glutKeyboardFunc( Key );
   glutDisplayFunc( Display );
   if (Anim)
      glutIdleFunc( Idle );
   Init();
   glutMainLoop();
   return 0;
} 
```

这是 glxinfo 输出（不包括视觉信息）：

```
name of display: :0.0
display: :0  screen: 0
direct rendering: Yes
server glx vendor string: SGI
server glx version string: 1.4
server glx extensions:
    GLX_ARB_multisample, GLX_EXT_import_context, GLX_EXT_texture_from_pixmap, 
    GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_MESA_copy_sub_buffer, 
    GLX_OML_swap_method, GLX_SGI_swap_control, GLX_SGIS_multisample, 
    GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, GLX_SGIX_visual_select_group, 
    GLX_INTEL_swap_event
client glx vendor string: Mesa Project and SGI
client glx version string: 1.4
client glx extensions:
    GLX_ARB_create_context, GLX_ARB_create_context_profile, 
    GLX_ARB_get_proc_address, GLX_ARB_multisample, GLX_EXT_import_context, 
    GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_EXT_framebuffer_sRGB, 
    GLX_EXT_create_context_es2_profile, GLX_MESA_copy_sub_buffer, 
    GLX_MESA_multithread_makecurrent, GLX_MESA_swap_control, 
    GLX_OML_swap_method, GLX_OML_sync_control, GLX_SGI_make_current_read, 
    GLX_SGI_swap_control, GLX_SGI_video_sync, GLX_SGIS_multisample, 
    GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, GLX_SGIX_visual_select_group, 
    GLX_EXT_texture_from_pixmap, GLX_INTEL_swap_event
GLX version: 1.4
GLX extensions:
    GLX_ARB_get_proc_address, GLX_ARB_multisample, GLX_EXT_import_context, 
    GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_MESA_copy_sub_buffer, 
    GLX_MESA_multithread_makecurrent, GLX_MESA_swap_control, 
    GLX_OML_swap_method, GLX_OML_sync_control, GLX_SGI_make_current_read, 
    GLX_SGI_swap_control, GLX_SGI_video_sync, GLX_SGIS_multisample, 
    GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, GLX_SGIX_visual_select_group, 
    GLX_EXT_texture_from_pixmap
OpenGL vendor string: nouveau
OpenGL renderer string: Gallium 0.4 on NVC1
OpenGL version string: 2.1 Mesa 8.0.4
OpenGL shading language version string: 1.30
OpenGL extensions:
    GL_ARB_multisample, GL_EXT_abgr, GL_EXT_bgra, GL_EXT_blend_color, 
    GL_EXT_blend_minmax, GL_EXT_blend_subtract, GL_EXT_copy_texture, 
    GL_EXT_polygon_offset, GL_EXT_subtexture, GL_EXT_texture_object, 
    GL_EXT_vertex_array, GL_EXT_compiled_vertex_array, GL_EXT_texture, 
    GL_EXT_texture3D, GL_IBM_rasterpos_clip, GL_ARB_point_parameters, 
    GL_EXT_draw_range_elements, GL_EXT_packed_pixels, GL_EXT_point_parameters, 
    GL_EXT_rescale_normal, GL_EXT_separate_specular_color, 
    GL_EXT_texture_edge_clamp, GL_SGIS_generate_mipmap, 
    GL_SGIS_texture_border_clamp, GL_SGIS_texture_edge_clamp, 
    GL_SGIS_texture_lod, GL_ARB_framebuffer_sRGB, GL_ARB_multitexture, 
    GL_EXT_framebuffer_sRGB, GL_IBM_multimode_draw_arrays, 
    GL_IBM_texture_mirrored_repeat, GL_ARB_texture_cube_map, 
    GL_ARB_texture_env_add, GL_ARB_transpose_matrix, 
    GL_EXT_blend_func_separate, GL_EXT_fog_coord, GL_EXT_multi_draw_arrays, 
    GL_EXT_secondary_color, GL_EXT_texture_env_add, 
    GL_EXT_texture_filter_anisotropic, GL_EXT_texture_lod_bias, 
    GL_INGR_blend_func_separate, GL_NV_blend_square, GL_NV_light_max_exponent, 
    GL_NV_texgen_reflection, GL_NV_texture_env_combine4, 
    GL_SUN_multi_draw_arrays, GL_ARB_texture_border_clamp, 
    GL_ARB_texture_compression, GL_EXT_framebuffer_object, 
    GL_EXT_texture_env_combine, GL_EXT_texture_env_dot3, GL_MESA_window_pos, 
    GL_NV_packed_depth_stencil, GL_NV_texture_rectangle, GL_ARB_depth_texture, 
    GL_ARB_occlusion_query, GL_ARB_shadow, GL_ARB_texture_env_combine, 
    GL_ARB_texture_env_crossbar, GL_ARB_texture_env_dot3, 
    GL_ARB_texture_mirrored_repeat, GL_ARB_window_pos, 
    GL_EXT_stencil_two_side, GL_EXT_texture_cube_map, GL_NV_depth_clamp, 
    GL_NV_fog_distance, GL_APPLE_packed_pixels, GL_APPLE_vertex_array_object, 
    GL_ARB_draw_buffers, GL_ARB_fragment_program, GL_ARB_fragment_shader, 
    GL_ARB_shader_objects, GL_ARB_vertex_program, GL_ARB_vertex_shader, 
    GL_ATI_draw_buffers, GL_ATI_texture_env_combine3, GL_EXT_shadow_funcs, 
    GL_EXT_stencil_wrap, GL_MESA_pack_invert, GL_NV_primitive_restart, 
    GL_ARB_depth_clamp, GL_ARB_fragment_program_shadow, 
    GL_ARB_half_float_pixel, GL_ARB_occlusion_query2, GL_ARB_point_sprite, 
    GL_ARB_shading_language_100, GL_ARB_sync, GL_ARB_texture_non_power_of_two, 
    GL_ARB_vertex_buffer_object, GL_ATI_blend_equation_separate, 
    GL_EXT_blend_equation_separate, GL_OES_read_format, 
    GL_ARB_color_buffer_float, GL_ARB_pixel_buffer_object, 
    GL_ARB_texture_compression_rgtc, GL_ARB_texture_rectangle, 
    GL_ATI_texture_compression_3dc, GL_EXT_packed_float, 
    GL_EXT_pixel_buffer_object, GL_EXT_texture_compression_rgtc, 
    GL_EXT_texture_mirror_clamp, GL_EXT_texture_rectangle, 
    GL_EXT_texture_sRGB, GL_EXT_texture_shared_exponent, 
    GL_ARB_framebuffer_object, GL_EXT_framebuffer_blit, 
    GL_EXT_framebuffer_multisample, GL_EXT_packed_depth_stencil, 
    GL_ARB_vertex_array_object, GL_ATI_separate_stencil, 
    GL_ATI_texture_mirror_once, GL_EXT_draw_buffers2, GL_EXT_draw_instanced, 
    GL_EXT_gpu_program_parameters, GL_EXT_texture_array, 
    GL_EXT_texture_compression_latc, GL_EXT_texture_integer, 
    GL_EXT_texture_sRGB_decode, GL_EXT_timer_query, GL_OES_EGL_image, 
    GL_MESA_texture_array, GL_ARB_copy_buffer, GL_ARB_depth_buffer_float, 
    GL_ARB_draw_instanced, GL_ARB_half_float_vertex, GL_ARB_instanced_arrays, 
    GL_ARB_map_buffer_range, GL_ARB_texture_rg, GL_ARB_texture_swizzle, 
    GL_ARB_vertex_array_bgra, GL_EXT_separate_shader_objects, 
    GL_EXT_texture_swizzle, GL_EXT_vertex_array_bgra, 
    GL_NV_conditional_render, GL_AMD_conservative_depth, 
    GL_AMD_draw_buffers_blend, GL_ARB_ES2_compatibility, 
    GL_ARB_draw_buffers_blend, GL_ARB_draw_elements_base_vertex, 
    GL_ARB_explicit_attrib_location, GL_ARB_fragment_coord_conventions, 
    GL_ARB_provoking_vertex, GL_ARB_sampler_objects, GL_ARB_seamless_cube_map, 
    GL_ARB_shader_texture_lod, GL_EXT_provoking_vertex, GL_EXT_texture_snorm, 
    GL_MESA_texture_signed_rgba, GL_NV_texture_barrier, GL_ARB_robustness, 
    GL_ARB_transform_feedback2, GL_ARB_conservative_depth, 
    GL_ARB_texture_storage, GL_EXT_transform_feedback 
```

glewIsSupported 表示扩展可用，glGetIntegerv 表示样本数为 4，在获取 FBConfig 时指定。我不知道发生了什么。

Edit: Here is the output of glXQueryExtensionsString: GLX_ARB_get_proc_address GLX_ARB_multisample GLX_EXT_import_context GLX_EXT_visual_info GLX_EXT_visual_rating GLX_MESA_copy_sub_buffer GLX_MESA_multithread_makecurrent GLX_MESA_swap_control GLX_OML_swap_method GLX_OML_sync_control GLX_SGI_make_current_read GLX_SGI_swap_control GLX_SGI_video_sync GLX_SGIS_multisample GLX_SGIX_fbconfig GLX_SGIX_pbuffer GLX_SGIX_visual_select_group GLX_EXT_texture_from_pixmap

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:10:05.743

忘记 MSAA。在 nouveau 上，除非你有非常新鲜的 MESA + kernel + X.org。

MSAA 是 OpenGL 3.0 及更高版本的要求。因此，直到最近，它在优先级列表中的位置并不高。为此，您需要 Mesa 9.0。

（如果您想获得有关如何获取所需软件的提示，请发布您的硬件和软件 - 发行版、内核、台面、xorg - 版本）。

# c++ - flex 没有生成 yyFlexLexer.h 标头

> ID：13367545
> 
> 赞同：2
> 
> 时间：2012-11-13T19:39:29.700
> 
> 标签：c++, c, flex-lexer, flex++

在使用 flex 创建词法分析器之前，我已经编写了几个解析器，但这次我希望 flex 生成一个 Lexer 类而不是经典的 C 文件，即我希望 flex 生成一个 C++ 扫描器类......事情是它没有为我生成 yyFlexLexer.h，只有 lex.yy.cc

我已经阅读[了 Flex 手册 C++ 章节](http://westes.github.io/flex/manual/Cxx.html)……所以我想知道该怎么做……是我的 flex for windows 不能正常工作吗？

这些是我目前使用的弹性选项：

```
%option outfile="cmdsLexer.cpp"
%option stdinit
%option case-insensitive
%option c++

%{
    #include "global-scope.h"
%}

ANDIGIT     [a-zA-Z0-9]
IDNTIFIER   [a-zA-Z_]({ANDIGIT}|_|-)*
INTEGER     [-+]?[0-9]+
STRING      \"[^\n\"]*\"
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T23:54:56.920

没有`yyFlexLexer.h`文件。相反，该`cmdsLexer.cpp`文件将包含一行

```
#include <FlexLexer.h> 
```

注意使用尖括号而不是双引号。该文件应安装在您的系统上，例如`/usr/include/FlexLexer.h`. 每个词法分析器都是一样的。对于 Windows，路径显然会有所不同。只需在您的 flex 安装中找到该文件，并将其添加到您的编译器搜索头文件的路径中，例如使用`-I`gcc 选项。

另请注意您为高级使用该标题而[引用的文档](http://westes.github.io/flex/manual/Cxx.html)的最后一段：

> 如果要创建多个（不同的）词法分析器类，请使用“<code>-P”标志（或`prefix=`选项）将每个重命名`yyFlexLexer`为其他一些“<code>xxFlexLexer”。然后，您可以`<FlexLexer.h>`在每个词法分析器类中包含一次其他源，首先重命名`yyFlexLexer`如下：
> 
> ```
>  #undef yyFlexLexer
>      #define yyFlexLexer xxFlexLexer
>      #include <FlexLexer.h>
> 
>      #undef yyFlexLexer
>      #define yyFlexLexer zzFlexLexer
>      #include <FlexLexer.h> 
> ```
> 
> 例如，如果您使用`%option prefix="xx"`其中一台扫描仪和`%option prefix="zz"`另一台扫描仪。

# sql - SQL物化路径还是有更简单的方法？

> ID：13367546
> 
> 赞同：4
> 
> 时间：2012-11-13T19:39:36.327
> 
> 标签：sql, oracle, recursion, hierarchy

好的，这个问题有点难以解释，但它就在这里..

我有一个查询，它可以提取在树中呈现的数据，如可视化。在此查询中计算的 yloc 用于确定 y 位置以呈现附加到这些功能的某些对象。

仅使用 MAX(coalesce(CAP_TREE2.depth),0) 不起作用。所以我写了一个算法来显示在某些情况下我需要什么 yloc。

这是算法：

```
 if (capability has c2 !=1)
    {
        yloc = 0
    }
    else if (capability is child (at any depth) of capability with c2 != 1)
    {
        yloc = depth - (depth of first parent with c2 != 1)
    }
    else
    {
        y = depth
    } 
```

**注意：** c2 代表 childNumber（按字母顺序）。因此，如果一个能力有两个孩子“A”和“B”。“A”的 c2 = 1，“B”的 c2 = 2。

尝试在 SQL (Oracle 11g R2) 中实现此算法时遇到了很多麻烦。我无法完成的问题是我算法中的**else if**子句。我已经能够获得具有 c2 != 1 的能力的所有子能力（在任何深度）。

但是，我无法完成的部分是 **yloc = depth - (depth of first parent with c2 !=1)**

谁能告诉我如何获得“第一个父母的深度与c2！= 1”？如果我能得到那个值，我的查询最终会完成。

我将展示我期望从我的样本数据中得到什么值，以尝试使其更清晰。

c2 != 1 的“投资管理”第一个父级是深度为 2 的“FPP”。c2 ！= 1 的“第 3 方产品管理”第一个父级是深度为 2 的“FPP”。“订单管理 ( PI)" 第一个父级 c2 != 1 是深度为 2 的 "Operations and Services (PI)"。

注意：抱歉，我无法更改架构。

这是我到目前为止所拥有的......底部的选择语句是我工作的地方。 [http://sqlfiddle.com/#!4/55b5a/116](http://sqlfiddle.com/#!4/55b5a/116)

架构 SQL：

```
CREATE TABLE capability 
    (
     id int,
     parent_id int,
     name varchar(200)
    )
;

CREATE TABLE tree
  (
     descendantid int,
     ancestorid int,
     depth int
  )
;

INSERT INTO capability (id, parent_id, name) VALUES (1, -1, 'BU-Specific Capabilities');
INSERT INTO capability (id, parent_id, name) VALUES (2, 1, 'PI Capability Model');
INSERT INTO capability (id, parent_id, name) VALUES (3, 2, 'Core Business Processing (PI)');
INSERT INTO capability (id, parent_id, name) VALUES (4, 3, 'Institutional Trust Administration (PI)');
INSERT INTO capability (id, parent_id, name) VALUES (5, 2, 'FPP');
INSERT INTO capability (id, parent_id, name) VALUES (6, 5, 'Investment Management');
INSERT INTO capability (id, parent_id, name) VALUES (7, 6, '3rd party Product Management');
INSERT INTO capability (id, parent_id, name) VALUES (8, 2, 'Operations and Shared Services (PI)');
INSERT INTO capability (id, parent_id, name) VALUES (9, 8, 'Order Management (PI)');
INSERT INTO capability (id, parent_id, name) VALUES (10, 8, 'Settlements (PI)');
INSERT INTO capability (id, parent_id, name) VALUES (11, -1, 'Common Core Capabilities');

INSERT INTO tree (descendantid, ancestorid, depth) VALUES (1, 1, 0);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (2, 1, 1);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (2, 2, 0);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (3, 1, 2);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (3, 2, 1);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (3, 3, 0);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (4, 1, 3);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (4, 2, 2);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (4, 3, 1);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (4, 4, 0);                                               
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (5, 1, 2);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (5, 2, 1);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (5, 5, 0);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (6, 1, 3);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (6, 2, 2);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (6, 5, 1);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (6, 6, 0);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (7, 1, 4);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (7, 2, 3);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (7, 5, 2);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (7, 6, 1);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (7, 7, 0);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (8, 1, 2);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (8, 2, 1);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (8, 8, 0);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (9, 1, 3);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (9, 2, 2);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (9, 8, 1);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (9, 9, 0);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (10, 1, 3);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (10, 2, 2);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (10, 8, 1);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (10, 10, 0);
INSERT INTO tree (descendantid, ancestorid, depth) VALUES (11, 11, 0); 
```

查询 SQL：

```
SELECT
  cap.name,
  max(coalesce(CAP_TREE2.depth,0)) as ydepth,

  CASE
    WHEN cap.parent_id != -1
       THEN DENSE_RANK() OVER (PARTITION BY cap.parent_id ORDER BY cap.name) --child number
    ELSE
       1
  END as c2

FROM capability cap
    INNER JOIN tree CAP_TREE2 ON CAP.id = CAP_TREE2.descendantid

group by cap.name, cap.id, cap.parent_id
;

  WITH ids(id, c2) AS ( -- Find the ids and the ranks
  SELECT
    id, 
    CASE
    WHEN parent_id = -1
      THEN 1
    ELSE
      DENSE_RANK() OVER (PARTITION BY parent_id ORDER BY name) --child number
    END as c2
  FROM capability
),
t(id, depth) AS (
    SELECT id, 0 AS depth FROM ids WHERE c2 != 1  -- Take only ranks not equal to one
UNION ALL
    SELECT c.id, depth+1 FROM capability c JOIN t ON (c.parent_id = t.id)  -- Tree-walking
)
--SELECT DISTINCT cap.name, t.depth
--SELECT DISTINCT cap.name, min(t.depth)
--FROM capability cap JOIN t USING(id)
--group by cap.name

SELECT
  cap.name,
  CASE

    -- cap has childNumber != 1
    WHEN DENSE_RANK() OVER (PARTITION BY cap.parent_id ORDER BY cap.name) != 1
      THEN 0 -- y = 0

    -- cap is child of cap with childNumber != 1
    WHEN cap.name IN (SELECT DISTINCT capa.name
                      FROM capability capa
                      JOIN t USING(id))
         THEN max(coalesce(CAP_TREE2.depth,0)) -- y = depth - (depth of first parent with childNumber != 1)

    ELSE max(coalesce(CAP_TREE2.depth,0)) -- y = depth 

  END as yloc

FROM capability cap
    INNER JOIN tree CAP_TREE2 ON CAP.id = CAP_TREE2.descendantid

group by cap.name,
         cap.id,
         cap.parent_id 
```

另外，这是我想要的结果集

```
NAME                                            DEPTH               C2            YLOC

BU-Specific Capabilities                          0                 1               0       --yloc=depth
Common Core Capabilities                          0                 1               0       --yloc=depth
PI Capability Model                               1                 1               1       --yloc=depth
Core Business Processing (PI)                     2                 1               2       --yloc=depth
FPP                                               2                 2               0       --yloc=0
Operations and Shared Services (PI)               2                 3               0       --yloc=0
Institutional Trust Administration (PI)           3                 1               3       --yloc=depth
Investment Management                             3                 1               1       --yloc=depth - (depth of FPP)
3rd party Product Management                      4                 1               2       --yloc=depth - (depth of FPP)
Order Management (PI)                             3                 1               1       --yloc=depth -(depth of Operations and..)
Settlements (PI)                                  3                 2               0       --yloc=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:41:09.517

我认为您不需要**树**表，因为您已经在**能力**表中声明了从父到子的关系。

当您使用 oracle 中的**CONNECT BY PRIOR**命令时，它会为您构建树，并允许您使用**LEVEL**伪列确定节点的深度。

唯一棘手的部分是获取深度 > 1 的第一个父节点。据我了解，您的问题应该是 c2。结果在 **FIRST_PARENT_IN_DEPTH_G_1**列中。

```
SELECT ID
    , PARENT_ID
    , NAME
    , DEPTH
    , NODES_PER_LEVEL
    , TO_NUMBER(SUBSTR(ID_PATH, LENGTH(REGEXP_SUBSTR(ID_PATH, '^\s\d{1,}\s')) + 1, 
            INSTR(SUBSTR(ID_PATH, LENGTH(REGEXP_SUBSTR(ID_PATH, '^\s\d{1,}\s')) + 1), ' '))) 
            AS FIRST_PARENT_IN_DEPTH_G_1
FROM (
    SELECT ID
        , PARENT_ID
        , NAME
        , LEVEL DEPTH
        , COUNT(*) OVER (PARTITION BY PARENT_ID, LEVEL) NODES_PER_LEVEL
        , sys_connect_by_path( id, ' ' ) ID_PATH
    FROM capability 
    START WITH PARENT_ID = -1
    CONNECT BY PRIOR ID = PARENT_ID
    )    
ORDER BY ID_PATH 
```

# javascript - jQuery 对被注入的元素应用动作

> ID：13367549
> 
> 赞同：0
> 
> 时间：2012-11-13T19:39:50.587
> 
> 标签：javascript, jquery, html

在页面加载后，我有一些页面元素被库注入。这些元素具有由 jQuery 控制的 onClick 操作。由于这些项目是在页面加载后呈现的，因此 jQuery 是否会针对这些项目应用 onClick 操作时遇到问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T19:43:51.763

这是使用委托事件的典型情况，您将处理程序绑定到父元素，并使用作为参数传递的特定选择器，并且 jQuery 仅当匹配的选择器是触发事件的选择器时才会触发处理程序。

**阅读更多关于直接和委托事件**下的 jQuery 文档-> [http://api.jquery.com/on/](http://api.jquery.com/on/)

> ```
> .on( events [, selector] [, data], handler(eventObject) ) 
> ```
> 
> `events`- 一种或多种以空格分隔的事件类型和可选的命名空间，例如“click”或“keydown.myPlugin”。
> 
> `selector`一个选择器字符串，用于过滤触发事件的选定元素的后代。如果选择器为 null 或省略，则始终在到达所选元素时触发事件。
> 
> `data`触发事件时要在 event.data 中传递给处理程序的数据。
> 
> `handler(eventObject)`触发事件时执行的函数。值 false 也可以作为简单返回 false 的函数的简写。

以上是针对以后可以添加到DOM的动态元素。

**笔记：**

1.  在委托事件的情况下，您应该始终将其绑定到绑定处理程序时可用的最近的静态容器。更多信息：[所有 jquery 事件都应该绑定到 $(document) 吗？](https://stackoverflow.com/questions/12824549/should-all-jquery-events-be-bound-to-document/12825060#12825060)

2.  但是，直接绑定到元素总是更好，这可以通过在元素插入到 DOM 之后绑定处理程序来实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T19:44:04.207

使用表格：

```
$("#myid").on("click",".myTargetElement", function(){
// do my click stuff here
}); 
```

示例标记：

```
<div id="myid">
   <div class="myTargetElement">Click Me</div>
   <div class="myTargetElement">Click Me</div>
</div> 
```

注意：此表单绑定到文档而不是父元素，强制文档遍历，因此不推荐最佳方式：

```
$(".myTargetElement").on("click", function(){
// do my click stuff here
}); 
```

示例：克隆上面标记中的第一个元素，并在单击时将它们变为蓝色：

```
$("#myid").on("click",".myTargetElement", function(){
    $(this).css('color','blue');
});

$('.myTargetElement').eq(0).clone().text("New").appendTo('#myid'); 
```

# android - 手动将微调器文本设置为不在 XML 中的内容？

> ID：13367551
> 
> 赞同：0
> 
> 时间：2012-11-13T19:39:56.120
> 
> 标签：android, android-spinner

我有一个带有文章“部分”列表的微调器 - “新闻，体育，本地，讣告......”等。

它还兼作该部分的标题，因此用户知道他们正在查看哪些文章。

当用户进行搜索时，它会自动选择“搜索”部分，因此微调器位于“搜索”上，并显示搜索结果。问题是，“搜索”不是一个部分，所以我不希望用户能够手动选择“搜索”部分，因为什么都不会发生。

我以为我可以从生成该微调器选项的 XML 文件中删除“搜索”，但是当他们进行搜索时，如何手动将微调器的文本设置为“搜索”？

有没有更好/另一种我没有想到的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:51:09.467

这取自我之前发布的这个答案 - [Spinner 上的 setPrompt 不起作用](https://stackoverflow.com/questions/13326565/setprompt-on-spinner-doesnt-work/13329980#13329980)

几乎可以回答您的问题 - 不，有几种方法可以解决这个问题 - 这篇文章将展示一个，其他一些将在底部的链接中

您可以使用一个按钮并从中创建一个下拉列表。

首先，在你的布局中用一个按钮替换你的微调器，并给它你提供提示的文本

然后将您的微调器上的项目列表移动到一个名为 optionmenu.xml 的文件中

然后声明您的按钮并为其设置一个 onClickListener。

在该方法中，输入以下代码

在第四行，您指定的布局是您的选项菜单布局

```
public void showPopup(View v) {
PopupMenu popup = new PopupMenu(this, v);
MenuInflater inflater = popup.getMenuInflater();
inflater.inflate(R.layout.optionmenu, popup.getMenu());
popup.show();
} When you call this method, you need to do the following

    View p = (View)findViewById(R.id.spinner button);
showPopup(p); 
```

在此代码价格中，View p 是您要显示菜单上角位置的视图。所以在这种情况下，这将是你的按钮

在此处查看答案以实现它 - [android 菜单代码不起作用](https://stackoverflow.com/questions/11077982/android-menu-code-not-working)

在每个`case:`语句中，放置一行将您的按钮文本设置为字符串。

```
case R.id.item1:
button.setText("item1"); 
```

这里还有一些其他好的解决方案 -

*   [如何使用初始文本“选择一个”制作 Android Spinner](https://stackoverflow.com/questions/867518/how-to-make-an-android-spinner-with-initial-text-select-one)

# asp.net - 将 html 文本显示为 html

> ID：13367556
> 
> 赞同：0
> 
> 时间：2012-11-13T19:40:08.773
> 
> 标签：asp.net, .net, html, visual-studio-2010

在我的页面中有一个时刻，我连接到数据库并检索一些数据。一个特别的领域是html代码。我想在我的页面中将它显示为可以理解它的控件中的 html。我有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:46:13.397

使用文字。

.aspx：

```
<asp:Literal runat="server" ID="myLiteral" /> 
```

代码隐藏：

```
myLiteral.Text = "<h2> this is a h2 html tag</h2>"; 
```

这将打印出来

## 这是一个 h2 html 标签

# wpf - WPF Checkbox 状态不会在 FixedPage 中更新

> ID：13367557
> 
> 赞同：4
> 
> 时间：2012-11-13T19:40:12.177
> 
> 标签：wpf, checkbox, fixeddocument

我正在尝试基于在 WPF 中用作模板的 FixedPage 元素导出一些数据，但我似乎在更新复选框的值时遇到了问题。奇怪的是我也在我的模板中使用了文本块和文本框，但是这些更新它们的内容没有问题。

所以……从一开始。我要导出的数据在一个名为 RepairStatement 的类中，它允许使用 printForm 函数打印到自定义 xps 文件。

```
 public class RepairStatement
{
    // Variables
    public bool hasKulanz { get; set; }
    public bool hasRepair { get; set; }
    public Client client { get; set; }

    /// <summary>
    /// Export repair statement to XPS file. 
    /// </summary>
    /// <param name="file">output xps file</param>
    public void printForm(string file)
    {
        string printTemplateRepairStatementPath = "Print Templates\\RepairStatement.xaml";

        // Define general purpose handlers to be used in browsing the print templates
        FileStream fileStream;

        if (!File.Exists(file))
        {
            FileStream newfile = File.Create(file);
            newfile.Close();
        }

        // Check that all xaml templates exist
        if (!File.Exists(printTemplateRepairStatementPath))
        {
            throw new ArgumentNullException(printTemplateRepairStatementPath, 
                "Repair Statement print template is not available. Check file source");
        }

        FixedDocument doc = new FixedDocument();
        // A4 Standard: 8.27 x 11.69 inch; 96 dpi
        Size documentSize = new Size(96 * 8.27, 96 * 11.69);
        doc.DocumentPaginator.PageSize = documentSize;

        // 1\. Reparatur-Bericht
        //  a. Open the filestream
        try
        {
            fileStream = new FileStream(printTemplateRepairStatementPath, FileMode.Open);
        }
        catch (Exception e)
        {
            throw new ArgumentNullException(LoginAgent.userSerializationPath,
                "Repair Statement print template could not be open due to " + e.Message);
        }

        //  b. Read the XAML tree
        FixedPage fixedPage = XamlReader.Load(fileStream) as FixedPage;

        //  c. Set the data
        (fixedPage.FindName("receiptAddress") as TextBox).Text = client.receiptAddress; // Works
        (fixedPage.FindName("deliveryAddress") as TextBox).Text = client.deliveryAddress;// Works
        (fixedPage.FindName("hasEndorser") as CheckBox).IsChecked = true;  // Has no effect

        //  d. Set the page size
        fixedPage.Width = doc.DocumentPaginator.PageSize.Width;
        fixedPage.Height = doc.DocumentPaginator.PageSize.Height;

        // Add to document
        PageContent pageContent = new PageContent();
        ((IAddChild)pageContent).AddChild(fixedPage);
        doc.Pages.Add(pageContent);

        // Convert to XPS
        XpsDocument xpsDocument = new XpsDocument(file, FileAccess.Write);
        XpsDocumentWriter documentWriter = XpsDocument.CreateXpsDocumentWriter(xpsDocument);
        documentWriter.Write(doc);
        xpsDocument.Close();
    }
} 
```

我使用的 xaml 模板如下所示：

```
<FixedPage xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       Name="RepairStatementFixedPage"
       Background="White"
       Width="793.92" Height="1122.24" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
<Border Name="bigPage" BorderThickness="1" BorderBrush="#FFCB9999" Width="793.92" Height="1122.24" 
        HorizontalAlignment="Center" VerticalAlignment="Center">
  <Border Name="content" Margin="96, 96">
    <DockPanel LastChildFill="False">
        <Grid DockPanel.Dock="Top" Name="title">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="120" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="120" />
          </Grid.ColumnDefinitions>
          <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="10" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>
            <Image Grid.Column="0" Grid.RowSpan="3" Width="120" 
              Source="/DesktopLibrarian;component/Content/lib-bg.jpg"
              VerticalAlignment="Top" HorizontalAlignment="Left" />
            <TextBlock Grid.Column="1" Grid.RowSpan="3" HorizontalAlignment="Center" VerticalAlignment="Bottom" 
              TextBlock.FontSize="23">
              Reparaturbericht
            </TextBlock>
            <TextBlock Grid.Column="2" Grid.Row="0" Grid.RowSpan="3" 
              VerticalAlignment="Top" HorizontalAlignment="Right" Name="repairNumber">
              TEST
            </TextBlock>
        </Grid>
        <Border DockPanel.Dock="Top" Height="20" />
        <Grid DockPanel.Dock="Top" Name="deviceInfo">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
          </Grid.ColumnDefinitions>
          <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>
        </Grid>

        <!-- Client information --> 
        <GroupBox DockPanel.Dock="Top" Header="Kundeninformationen">
          <Grid Margin="3">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="130" />
              <ColumnDefinition Width="3" />
              <ColumnDefinition Width="110" />
              <ColumnDefinition Width="8" />
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="8" />
              <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Name -->
            <TextBlock Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="0" Name="clientName" 
              TextBlock.FontWeight="Bold">
              TEST
            </TextBlock>

            <!-- Phone Number -->
            <TextBlock Grid.Column="0" Grid.Row="2">Telefonnummer:</TextBlock>
            <TextBlock Grid.Column="2" Grid.Row="2" Name="phoneNumber">TEST</TextBlock>

            <!-- Auftragsnummer -->
            <TextBlock Grid.Column="0" Grid.Row="3">Auftragsnummer (RMA):</TextBlock>
            <TextBlock Grid.Column="2" Grid.Row="3" Name="orderNumber">TEST</TextBlock>

            <!-- Receipt Address -->
            <TextBlock Grid.Column="4" Grid.Row="1">Rechnungsadresse:</TextBlock>
              <TextBox Grid.Column="4" Grid.Row="2" Grid.RowSpan="2" Name="receiptAddress" BorderThickness="0"
                 AcceptsReturn="True" TextWrapping="Wrap">
                TEST
              </TextBox>

            <!-- Delivery Address -->
            <TextBlock Grid.Column="6" Grid.Row="1">Lieferadresse:</TextBlock>
              <TextBox Grid.Column="6" Grid.Row="2" Grid.RowSpan="2" Name="deliveryAddress" BorderThickness="0"
                 AcceptsReturn="True" TextWrapping="Wrap">
                TEST
              </TextBox>
          </Grid>
        </GroupBox>
        <Border DockPanel.Dock="Top" Height="20" />

        <!-- Device information -->
        <GroupBox DockPanel.Dock="Top" Header="Geräteinformationen">
          <Grid Margin="3">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="90" />
              <ColumnDefinition Width="3" />
              <ColumnDefinition Width="150" />
              <ColumnDefinition Width="8" />
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Model -->
            <TextBlock Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="0" Name="model" TextBlock.FontWeight="Bold">
              TEST
            </TextBlock>

            <!-- Repair -->
            <CheckBox Grid.Column="4" Grid.Row="1" Name="hasRepair">Reparatur</CheckBox>

            <!-- Device has endorser -->
            <CheckBox Grid.Column="4" Grid.Row="2" Name="hasEndorser">Endorsergerät</CheckBox>
          </Grid>
        </GroupBox>

    </DockPanel>
  </Border>
</Border> 
```

问题出在 printForm 函数的这 3 行中：

```
 //  c. Set the data
        (fixedPage.FindName("receiptAddress") as TextBox).Text = client.receiptAddress;
        (fixedPage.FindName("deliveryAddress") as TextBox).Text = client.deliveryAddress;
        (fixedPage.FindName("hasEndorser") as CheckBox).IsChecked = true; 
```

前两行正常修改文本框的内容。我也可以毫无问题地修改 Textblocks 的内容，但无论我尝试做什么，复选框的值都不会改变。我认为这与 FixedPage 或 FixedDocument 有关，但我无法理解问题可能是什么。如果我在 XAML 中设置 IsChecked="True"，则复选框将在最终 xps 文档中显示为已选中，但同样我无法取消选中它。

任何关于可能出错的提示将不胜感激。如果您知道有关 FixedPage 和 FixedDocument 的良好教程或信息源，我也很想看看它们，因为到目前为止我找到的文档至少可以说是适度的。

谢谢！

[更新：我还在此处](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9bfdf1a0-99f6-4eba-82f9-48d55f9c7248/)的 msdn 论坛上问了这个问题，并得到了一些关于在导出到 xps 之前使用 Measure()、Arrange 和 updatelayout() 的提示。不幸的是，这个解决方案似乎不起作用。考虑到文本块和文本框元素的行为符合预期，我认为这将是一个遥远的目标，而我只有复选框有问题。

我决定做一个小项目来显示这个错误，这样你也可以自己做一些实验。你可以在[这里](https://dl.dropbox.com/u/3346930/FixedPagePrintingTest.zip)找到它。

让我知道你是否想出办法：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:34:44.477

我找到了问题，也找到了一些解决方案的开始。

导出到 wpf 时，显然启用的复选框不会检查。我猜开发人员在编写代码时的想法是，一张纸上启用的复选框只能手动检查。对我来说最不幸的是，我想以编程方式检查它们。

我也找到了一些解决这个问题的方法。禁用的复选框显示为选中和未选中。当然，主要缺点是它们都是灰色的，就像禁用的复选框应该看起来一样。

嗯...我想是时候弄清楚如何重新设置我禁用的复选框的样式，使其看起来像已启用。嗯....也许将其中的五个打印在一起？手指交叉！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T20:39:00.077

RadioButtons 也会出现同样的问题。我通过在打印之前在 PrintPreview 窗口中显示我的 FixedDocument 来解决它（使用 DocumentViewer）（链接：[http ://www.nbdtech.com/Blog/archive/2009/07/09/wpf-printing-part-4-ndash-print -preview.aspx](http://www.nbdtech.com/Blog/archive/2009/07/09/wpf-printing-part-4-ndash-print-preview.aspx)）。

编辑：差不多半年后回到这个问题。我的应用程序的要求发生了变化，我不得不实现静默打印，这不再允许我使用上面提到的 PrintPreview 窗口解决方法。该解决方案最终类似于另一个答案中提到的解决方案。我最终添加了自定义复选框/单选按钮模板，并禁用了 IsEnabled 样式触发器。问题是找到 Aero BulletChrome 模板。以下问题在这方面有所帮助[https://stackoverflow.com/a/24863563/1288473](https://stackoverflow.com/a/24863563/1288473)

# javascript - 谷歌图表数组中的 if 语句

> ID：13367559
> 
> 赞同：0
> 
> 时间：2012-11-13T19:40:15.963
> 
> 标签：javascript

我试图弄清楚如何在 js 数组中添加 if 语句，我在想也许速记条件会起作用，但我没有运气，这就是我所拥有的。

如果值不为空，我试图只包含数组。

```
gross1 = document.getElementById('gross1').value;
profit1 = document.getElementById('profit1').value;

gross2 = document.getElementById('gross2').value;
profit2 = document.getElementById('profit2').value;

gross3 = document.getElementById('gross3').value;
profit3 = document.getElementById('profit3').value;

function drawVisualization() {
var wrapper = new google.visualization.ChartWrapper({
          chartType: 'ColumnChart',
          dataTable: [['', 'Sales', 'Cost of Goods'],
                      ['Product 1', parseInt(gross1), parseInt(profit1)],
                        if(gross2 != '' && profit2 != ''){
                      ['Product 2', parseInt(gross2), parseInt(profit2)],
                        }elseif(gross3 != '' && profit != ''){
                      ['Product 3', parseInt(gross3), parseInt(profit3)]
                      }], 
```

# perl - Perl 词干提取英文文本

> ID：13367560
> 
> 赞同：1
> 
> 时间：2012-11-13T19:40:33.397
> 
> 标签：perl, file, porter-stemmer

我试图阻止英文文本，我阅读了很多论坛，但我看不到一个明确的例子。我正在使用搬运工词干分析器，就像使用 Text::ENglish 一样。这是我走了多远：

```
 use Lingua::StopWords qw(getStopWords);
    my $stopwords = getStopWords('en');
    use Text::English;

    @stopwords = grep { $stopwords->{$_} } (keys %$stopwords);

    chdir("c:/Test Facility/input");
    @files = <*>;

    foreach $file (@files) 
      {
        open (input, $file);

        while (<input>) 
          {
            open (output,">>c:/Test Facility/normalized/".$file);
        chomp;
        for my $w (@stopwords) 
        {
        s/\b\Q$w\E\b//ig;
        }
        $_ =~s/<[^>]*>//g;
        $_ =~ s/[[:punct:]]//g;
        ##What should I write here to apply porter stemming using Text::English##
        print output "$_\n";

          }

       }
    close (input);
    close (output); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:27:33.740

像这样运行以下代码：

`perl stemmer.pl /usr/lib/jvm/java-6-sun-1.6.0.26/jre/LICENSE`

它产生类似于以下的输出：

`operat system distributor licens java version sun microsystems inc sun willing to license java platform standard edition developer kit jdk`

请注意，除了停用词之外，长度为 1 和数值的字符串也将被删除。

```
#!/usr/bin/env perl
use common::sense;

use Encode;
use Lingua::Stem::Snowball;
use Lingua::StopWords qw(getStopWords);
use Scalar::Util qw(looks_like_number);

my $stemmer = Lingua::Stem::Snowball->new(
    encoding    => 'UTF-8',
    lang        => 'en',
);

my %stopwords = map {
    lc
} keys %{getStopWords(en => 'UTF-8')};

local $, = ' ';
say map {
    sub {
        my @w =
            map {
                encode_utf8 $_
            } grep {
                length >= 2
                and not looks_like_number($_)
                and not exists $stopwords{lc($_)}
            } split
                /[\W_]+/x,
                shift;

        $stemmer->stem_in_place(\@w);

        map {
            lc decode_utf8 $_
        } @w
    }->($_);
} <>; 
```

# rally - 登录所有者的拉力看板

> ID：13367563
> 
> 赞同：1
> 
> 时间：2012-11-13T19:40:51.507
> 
> 标签：rally

我是 Rally 的 SDK 的新手。我正在尝试创建一个看板，它只显示所有者字段=登录的人的卡片（即我的看板）。我应该添加什么代码，我应该在哪里添加它？

以下不是我对这个问题的理想答案，但我想我会发布以防它帮助其他人。我按照建议从[Filter Epic](https://stackoverflow.com/questions/9999975/filtering-epics-from-kanban-board)帖子中获取了代码并对其进行了修改。这对我来说并不理想，因为过滤器发生在初始数据拉取之后，因此它只过滤拉取初始查询的前 100 条记录。理想情况下，我想更改数据的初始拉取以过滤用户名。

在过滤史诗中的这段代码之后：

```
for (i=0;i<workproducts.length;i++) {
    thisWorkProduct = workproducts[i]; 
```

添加：

```
//get the owner field value

var owner = "";

if (thisWorkProduct.Owner) {
   if (thisWorkProduct.Owner.DisplayName) {
        owner = thisWorkProduct.Owner.DisplayName;
   }
   else if (thisWorkProduct.Owner.UserName) {
    owner = thisWorkProduct.Owner.UserName;
   }
} 
```

然后改变：

```
if (thisWorkProduct.Children.length === 0) { 
```

至：

```
if ((thisWorkProduct.Children.length === 0) && (owner === "__USER_NAME__")) { 
```

并在缺陷中添加一个 if else （所以它现在看起来像这样）：

```
else {

   // If it's a Defect, it has no children so push it
   if (owner === "__USER_NAME__") {
      childlessWorkProducts.push(thisWorkProduct);
 } 
```

它可能不是最有效的代码，因为我是 javascript 新手。

如果有人对如何在初始数据提取中进行用户名过滤有任何建议，我很想听听他们的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:25:46.063

看看这个答案：

[从看板过滤史诗](https://stackoverflow.com/questions/9999975/filtering-epics-from-kanban-board)

将过滤回调调整为按所有者过滤而不只是无子工件将非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:14:31.053

您可以通过在 cardboardConfig 对象中包含查询来过滤初始数据提取：

```
var cardboardConfig = {
    //... other properties
    query: new rally.sdk.util.Query('Owner = /user/__USER_OID__')
}; 
```

# asp.net-mvc - 未填充 HttpPostedFileBase

> ID：13367565
> 
> 赞同：1
> 
> 时间：2012-11-13T19:41:05.437
> 
> 标签：asp.net-mvc, file-upload, razor, asp.net-mvc-4, visual-studio-2012

我有一个模型（简化，删除无关属性）：

```
public class SubmitModel
{
    [Required]
    [DataType("FileUpload")]
    [Display(Name = "Formatted Data File")]
    public HttpPostedFileBase FormattedDataFile { get; set; }
} 
```

控制器：

```
[HttpPost]
public ActionResult Submit(SubmitModel model)
{
    if (this.ModelState.IsValid)
    {
        //...
    }

    return this.View(model);
} 
```

文件上传视图：

```
@{
    IDictionary<string, object> htmlAttributes = Html.GetUnobtrusiveValidationAttributes(string.Empty);
}

<input type="file" id="@this.ViewData.TemplateInfo.GetFullHtmlFieldId(string.Empty)" name="@this.ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty)" @(new MvcHtmlString(htmlAttributes.ToHtmlAttributesString())) />
@Html.ValidationMessage(string.Empty) 
```

和一个简单的观点：

```
@model SubmitModel

@using (Html.BeginForm())
{
    <div class="Form">
        @Html.EditorForModel()

        <div class="Footer">
            <button class="Button" data-options='{ "icons": { "primary": "ui-icon-disk" } }'>Submit</button>
        </div>
    </div>
} 
```

呈现为此 HTML：

```
<form action="/Data/Submit" method="post">
    <div class="Form">
        <div class="Item">
            <div class="Label Required">Formatted Data File:</div>
            <div class="Input">
                <input type="file" id="FormattedDataFile" name="FormattedDataFile"  data-val-required="The Formatted Data File field is required." data-val="true" />
                <span class="field-validation-error" data-valmsg-for="FormattedDataFile" data-valmsg-replace="true">The value &#39;Test.xlsx&#39; is invalid.</span>
            </div>
        </div>

        <div class="Footer">
            <button class="Button" data-options='{ "icons": { "primary": "ui-icon-disk" } }'>Submit</button>
        </div>
    </div>
</form> 
```

单击 后`Submit`，我被带到正确的控制器/操作，并且我的模型的`FormattedDataFile`属性为空。`ModelState`无效，说“需要格式化数据文件字段” 。同样的代码在我完成的一些 MVC-3 项目中运行良好——在 MVC-4 中这有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:08:16.870

i think you are missing `enctype="multipart/form-data"` in the form

[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)

# c - dev c++ 和指向字符串的指针，程序挂起

> ID：13367566
> 
> 赞同：0
> 
> 时间：2012-11-13T19:41:07.557
> 
> 标签：c, string, pointers

我有以下用 Dev C++ 制作的程序：

```
#include <stdio.h>
#include <stdlib.h>
#include<string.h>

#define MAX_STRING_LEN 80

int main(int argc, char *argv[])
{
     char* S1 = "cccc";
     char* S2 = "dddd";

     int i, l;

     S2 = S1;
     S1[0] = S1[1] = S1[2] = '*';
     S1[3] = 0;
     printf("S1:\t%s\n",S1);
     printf("S2:\t%s\n",S2);

     system("PAUSE");   
     return 0;
 } 
```

但是当我运行它时，程序挂起，实际上我使用的是 Dev C++ 4.9.2 和 Windows 7 有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:43:29.557

`char* S1 = "cccc";`实际上是在声明 a `const char*`which 指向的内存可能是只读的。写入行中的这些字符串

```
S1[0] = S1[1] = S1[2] = '*'; 
```

给出未定义的行为，并会在某些平台上崩溃。

# c++ - 抑制多个编译器构建的警告

> ID：13367569
> 
> 赞同：1
> 
> 时间：2012-11-13T19:41:27.077
> 
> 标签：c++, c, compiler-warnings

是否有我可以使用的通用抑制警告？

问题是有时我可能使用一个编译器版本 (gcc) 构建，然后我有一个合作伙伴使用一些常见的东西但使用不同的编译器。所以警告#是不同的。

我能想到的唯一方法是制作一个在文件中定义的宏，我将传入一些通用值：

```
SUPPRESS_WARNING_BEGIN(NEVER_USED)
//code
SUPPRESS_WARNING_END 
```

那么该文件将具有以下内容：

```
#if COMPILER_A
    NEVER_USED = 245
#endif

#if COMPILER_B
    NEVER_USED = 332
#endif

#define SUPPRESS_WARNING_BEGIN(x) /
     #if COMPILER_A
        //Compiler A suppress warning x
     #endif

     #if COMPILER_B
        //Compiler B suppress warning x
     #endif

#define SUPPRESS_WARNING_END /
     #if COMPILER_A
        // END Compiler A suppress warning
     #endif

     #if COMPILER_B
        // END Compiler A suppress warning
     #endif 
```

不知道有没有更简单的方法？我也知道理想情况下我们都只会使用相同的编译器，但不幸的是这不是一个选择。只是试图找到最简单的方法来支持这样的事情，并希望有一种更简单的方法然后上面提到。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:58:24.103

没有便携的方法可以做到这一点。不同的编译器以不同的方式（例如，等）执行此[`#pragma warning`](http://msdn.microsoft.com/en-us/library/2c8f766e%28v=vs.80%29.aspx)操作[`#pragma GCC diagnostic`](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html)。

最简单和最好的做法是编写在编译器处于任何警告级别时都不会生成任何警告的代码。

如果您的目标是抑制有关未使用变量的警告，我建议使用宏：

```
#define UNUSED(x) ((void)sizeof(x))
...
void some_function(int x, int y)
{
    // No warnings will be generated if x is otherwise unused
    UNUSED(x);
    ....
} 
```

该`sizeof`运算符在编译时进行评估，并且强制转换`void`不会产生任何结果，因此任何编译器都会将`UNUSED`语句优化为什么都没有，但会考虑要使用的操作数。

GCC 也有[`unused`属性`](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html)：

```
// No warnings will be generated if x is otherwise unused
int x __attribute__((unused)); 
```

# google-apps-script - 对 ScriptDb 的查询是否会消耗配额？

> ID：13367573
> 
> 赞同：0
> 
> 时间：2012-11-13T19:41:40.717
> 
> 标签：google-apps-script

在 ScriptDb 的官方文档中，对 ScriptDb 的存储能力有很好的记载。但是，我不清楚查询 ScriptDb 或将新对象保存到 ScriptDb 是否会消耗配额。应用程序每天可以对 ScriptDb 执行的查询数量是否有限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:09:21.257

ScritpDb 仅受总存储大小的限制，[从 50mb 开始，](https://developers.google.com/apps-script/scriptdb)是脚本作者拥有的所有数据库的总和。

您唯一需要确定的是 reads 不会在执行时间上超时（通常如果脚本运行几分钟，您应该担心）。例如，一天的总[触发器执行时间](https://script.google.com/dashboard)为 1 小时。如果您以访问脚本的人的身份运行脚本，那么您将不太可能遇到这种情况。

# python - scipy Minimize 函数有问题，它给了我奇怪的结果

> ID：13367576
> 
> 赞同：4
> 
> 时间：2012-11-13T19:41:55.803
> 
> 标签：python, scipy, minimize

创建了一个目标函数
添加了约束

问题是无论我使用什么初始猜测，最小化函数都会继续使用该数字。例如：如果我使用 15 作为初始猜测，求解器将不会尝试任何其他数字并说答案是 15。我确定代码有问题，但我不确定在哪里。

下面的代码：

```
from scipy.optimize import minimize
import numpy as np
from pandas import *

#----------------------------------------------------
#-------- Create Function ------------
#----------------------------------------------------
def MovingAverage(Input,N,test=0):

    # Create data frame
    df = DataFrame(Input, columns=['Revenue'])

    # Add columns
    df['CummSum'] = df['Revenue'].cumsum()
    df['Mavg'] = rolling_mean(df['Revenue'], N)
    df['Error'] = df['Revenue'] - df['Mavg']
    df['MFE'] = (df['Error']).mean()
    df['MAD'] = np.fabs(df['Error']).mean()
    df['MSE'] = np.sqrt(np.square(df['Error']).mean())
    df['TS'] = np.sum(df['Error'])/df['MAD']

    print N, df.MAD[0]

    if test == 0:
        return df.MAD[0]
    else: return df

#----------------------------------------------------
#-------- Input ------------
#----------------------------------------------------
data = [1,2,3,4,5,5,5,5,5,5,5,5,5,5,5]

#----------------------------------------------------
#-------- SOLVER ------------
#----------------------------------------------------

## Objective Function
fun = lambda x: MovingAverage(data, x[0])

## Contraints
cons = ({'type': 'ineq', 'fun': lambda x:  x[0] - 2}, # N>=2
        {'type': 'ineq', 'fun': lambda x:  len(data) - x[0]}) # N<=len(data)

## Bounds (note sure what this is yet)
bnds = (None,None)

## Solver
res = minimize(fun, 15, method='SLSQP', bounds=bnds, constraints=cons)

##print res
##print res.status
##print res.success
##print res.njev
##print res.nfev
##print res.fun
##for i in res.x:
##    print i
##print res.message
##for i in res.jac:
##    print i
##print res.nit

# print final results
result = MovingAverage(data,res.x,1)
print result 
```

List of possible values:
2 = 0.142857142857,
3 = 0.25641025641,
4 = 0.333333333333,
5 = 0.363636363636,
6 = 0.333333333333,
7 = 0.31746031746,
8 = 0.3125,
9 = 0.31746031746,
10 = 0.333333333333,
11 = 0.363636363636,
12 = 0.416666666667,
13 = 0.487179487179,
14 = 0.571428571429,
15 = 0.666666666667

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T15:37:47.220

您的函数在整数输入值之间是分段常数，如下图所示（在 x 轴上以 0.1 的步长绘制）：

![函数图](../Images/e3a9b064b22cdbd2a073635e83ff506e.png)

所以导数几乎在所有点都为零，这就是为什么基于梯度的最小化方法将返回任何给定的初始点作为局部最小值。

为了挽救这种情况，您可以考虑在目标函数中使用插值来获取非整数输入值的中间函数值。如果将其与基于梯度的最小化结合起来，它可能会在 15 开始时找到 8 附近的某个点作为局部最小值。

# css - 盒子没有正确对齐

> ID：13367577
> 
> 赞同：0
> 
> 时间：2012-11-13T19:41:57.163
> 
> 标签：css, html

我已经在 jsfiddle 上测试了我的代码，它看起来不错，但由于某种原因，在[实时](http://www.bmgl.co.nz/listings)站点上，这些框失去了对齐，为什么？它可以很好地加载前两个框

**HTML：**

```
<div class="listingContainer">
<h2></h2>
                    <div class="sectionListingAttributes">
                        <div class="col0">
                        <span class="name">Property type:</span>
                            <span class="value">Section</span><br/>
                                <span class="name">Price:</span>
                            <span class="value">To be sold by auction on 4 Dec</span><br/>
                                <span class="name">Land area:</span>
                            <span class="value">301m²</span>                                                                    
                        </div>
                    </div>  
                        <div class="description">
                            <span class="value text">

                            </span>
                        </div>

                        <div class="gallery">
                            <div class="flexslider loading">
                                <ul class="slides">
                                    {{ files:listing folder="10" }}
                                        <li><img src="{{ url:site }}files/large/{{ filename }}" alt="" /></li>
                                {{ /files:listing }}
                                </ul>
                            </div>
                        </div> 
                        </div><!-- listingAttributes End -->

                        <h2></h2>
                    <div class="sectionListingAttributes">
                        <div class="col0">
                        <span class="name">Property type:</span>
                            <span class="value">Section</span><br/>
                                <span class="name">Price:</span>
                            <span class="value">To be sold by auction on 4 Dec</span><br/>
                                <span class="name">Land area:</span>
                            <span class="value">333m²</span>                                                                    
                        </div>
                    </div>  
                        <div class="description">
                            <span class="value text">

                            </span>
                        </div>

                        <div class="gallery">
                            <div class="flexslider loading">
                                <ul class="slides">
                                    {{ files:listing folder="12" }}
                                        <li><img src="{{ url:site }}files/large/{{ filename }}" alt="" /></li>
                                {{ /files:listing }}
                                </ul>
                            </div>
                        </div> 
                        </div><!-- listingAttributes End -->
                        <h2></h2>
                    <div class="sectionListingAttributes">
                        <div class="col0">
                        <span class="name">Property type:</span>
                            <span class="value">Section</span><br/>
                                <span class="name">Price:</span>
                            <span class="value">To be sold by auction on 4 Dec</span><br/>
                                <span class="name">Land area:</span>
                            <span class="value">300m²</span>                                                                    
                        </div>
                    </div>  
                        <div class="description">
                            <span class="value text">
        </span>
                        </div>

                        <div class="gallery">
                            <div class="flexslider loading">
                                <ul class="slides">
                                    {{ files:listing folder="13" }}
                                        <li><img src="{{ url:site }}files/large/{{ filename }}" alt="" /></li>
                                {{ /files:listing }}
                                </ul>
                            </div>
                        </div> 
                        </div><!-- listingAttributes End -->

                        <h2></h2>
                    <div class="sectionListingAttributes">
                        <div class="col0">
                        <span class="name">Property type:</span>
                            <span class="value">Section</span><br/>
                                <span class="name">Price:</span>
                            <span class="value">To be sold by auction on 4 Dec</span><br/>
                                <span class="name">Land area:</span>
                            <span class="value">301m²</span>                                                                    
                        </div>
                    </div>  
                        <div class="description">
                            <span class="value text">
                            </span>
                        </div>

                        <div class="gallery">
                            <div class="flexslider loading">
                                <ul class="slides">
                                    {{ files:listing folder="14" }}
                                        <li><img src="{{ url:site }}files/large/{{ filename }}" alt="" /></li>
                                {{ /files:listing }}
                                </ul>
                            </div>
                        </div> 
                        </div><!-- listingAttributes End -->
                        </div> <!-- listingContainer End --> 
```

**CSS：**

```
.listingContainer{
    width:960px;
    height:100%;
}
.listingContainer h2{
    height:30px;
    width: 100%;
    margin: 10px 10px 0 10px;
}
.listingAttributes{
    width:100%;
    height:165px;
    margin: 15px 10px -5px 10px;
    border-bottom: 1px solid #FFB400;
}
.listingAttributes .col0, .col1{
    width:160px;
    height: 100%;
    margin:0 15px 0 0;
    float:left;
    display: inline-block;
}
.listingAttributes .col2{
    width:180px;
    height: 100%;
    margin:0 15px 0 0;
    float:left;
    display: inline-block;
}

.listingAttributes .col3{
    width:200px;
    height:100%;
    float:left;
    display: inline-block;
}
.listingAttributes .col4{
    width:200px;
    height:100%;
    float:left;
    display: inline-block;   
}
.listingAttributes .sectionListingAttributes, .name{
    font-weight: bold;
}

.sectionListingAttributes{
    width:100%;
    height:90px;
    margin: 15px 10px -5px 10px;
    border-bottom: 1px solid #FFB400;
}

.sectionListingAttributes .col0{
    width:250px;
    height: 100%;
    margin:0 15px 0 0;
    float:left;
    display: inline-block;
}

.description{
    width:930px;
    min-height: auto;
    max-height: 100%;
    overflow: auto;
    margin:0 0 0 10px;
    padding: 10px;
    border-bottom: 1px solid #FFB400;
}
.text, .value{
    font-size: 14px;
    text-align: left;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:47:34.657

前两个包含在`div`with id`container`和 class`w960`中，而其余的则不包含。

**更新**：根据您上面发布的代码，您有`</div><!-- listingAttributes End -->`大约一半的这条线，我相信您想要关闭`<div class="sectionListingAttributes">`元素，但是，该元素实际上是在关闭之后`<div class="col0">`关闭的，所以两个关闭之一似乎不正确。

# javascript - 蚂蚁和大于

> ID：13367578
> 
> 赞同：0
> 
> 时间：2012-11-13T19:41:58.503
> 
> 标签：javascript, ant, ant-contrib

我试图关注这个stackoverflow链接：

最初，我开始寻找一种比 ant 做得更好的方法，但我发现很少有方法都给我带来了问题。

1.  我找到了一种方法，通过使用 javascript 任务来做到这一点： [如何将两个属性与数值进行比较？](https://stackoverflow.com/questions/4639902/apache-ant-comparing-properties-variables)

但我收到以下错误消息：无法加载脚本引擎管理器（org.apache.bsf.BSFManager 或 javax.script.ScriptEngineManager）

我试图添加一个 bsf jar 并没有成功。你能给我一个例子吗..？

2.  我试图使用`<bool>`以下链接中建议的元素的 ant-contrib 附加属性：http: [//ant-contrib.sourceforge.net/tasks/tasks/more_conditions.html](http://ant-contrib.sourceforge.net/tasks/tasks/more_conditions.html)

我没有成功。你能给我一个例子吗..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:38:56.557

以下 ANT 演示适用于我，无需安装其他库：

```
<project name="hello" default="demo">
    <target name="demo">
        <script language="javascript">
            var version = parseInt(project.getProperty('version'));
            project.setProperty('isGreater', version > 1);
        </script>

        <echo message="${isGreater}"/>
    </target>
</project> 
```

您使用的是哪个版本的 ANT 和 Java？就我而言：

```
$ ant -version
Apache Ant(TM) version 1.8.2 compiled on December 3 2011

$ java -version
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:08:37.033

查看您收到的第一条错误消息：

```
Unable to load a script engine manager (org.apache.bsf.BSFManager or javax.script.ScriptEngineManager) 
```

这告诉您您缺少一个 Jar 文件。看[`<script>`](http://ant.apache.org/manual/Tasks/script.html)任务：

> 注意：此任务依赖于未包含在 Apache Ant 发行版中的外部库。有关详细信息，请参阅[库依赖项](http://ant.apache.org/manual/install.html#librarydependencies)。

Library Dependency 链接会将您带到一个表。搜索单词*script task*。脚本任务最多需要 10 个可选 jar 才能工作。您需要的是[bsf.jar](http://jakarta.apache.org/bsf/)。

要使用*Ant Contrib*任务，您需要 Ant Contrib Jarfile，并使用任务链接到`<taskdef>`任务。这是如何做到的：

*   下载最新版本的[ant-contrib.jar](http://sourceforge.net/projects/ant-contrib/files/ant-contrib/1.0b3/ant-contrib-1.0b3-bin.tar.gz/download)。
*   在您的项目中创建一个名为的目录`antlib/ant-contrib`并将 ant-contrib.jar 放在该目录中。

在您`build.xml`想要在顶部附近执行以下操作。这可以在任何任务之外完成：

```
<taskdef resource="net/sf/antcontrib/antlib.xml">
   <classpath>
       <fileset dir="${basedir}/antlib/ant-contrib"/>
   </classpath>
</taskdef> 
```

现在，您应该可以使用包含条件的[ant-contrib 任务](http://ant-contrib.sourceforge.net/tasks/tasks/index.html)[`<bool>`](http://ant-contrib.sourceforge.net/tasks/tasks/more_conditions.html)了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T10:35:57.257

用这个：

```
<scriptdef name="val1_mayorque_val2" language="javascript">
    <attribute name="val1" />
    <attribute name="val2" />
    <attribute name="resultado" />
    <![CDATA[
        if(attributes.get("val1") > attributes.get("val2"))
            project.setProperty(attributes.get("resultado"), "si");
        else
            project.setProperty(attributes.get("resultado"), "no");
    ]]>
</scriptdef> 
```

用这个调用它：

```
<val1_mayorigualque_val2 val1="5" val2="3" resultado="result"/> 
```

val1 = 值 1 val2 = 值 2

使用后，您必须测试 ${result}。如果它具有“si”值，则 val1 大于 val2。

# php - 充分利用单个 MySQL 查询

> ID：13367581
> 
> 赞同：0
> 
> 时间：2012-11-13T19:42:07.347
> 
> 标签：php, mysql

我有一个网站，列出了可供出租的公寓。我的 MySQL 数据库中有几个不同的表。一张表格是关于整个公寓楼的基本信息，包括地址、便利设施、照片、身份证 (NID) 等。

另一个表格列出了每栋建筑内可供出租的单元。所以每栋公寓楼都有多个平面图，有几个工作室，几个一居室单元，有时还有几个二居室单元等。

目前我查询我的“单元”表并询问给定公寓楼中的所有单元。我的查询看起来像`SELECT * FROM node_unit WHERE nid='555'`

这可能会返回如下内容：

```
NID    Name       Rent    SqFT    Bedrooms    Bathrooms
555    Unit 1     $500    620      0            1
555    Unit 2     $550    680      0            1
555    Unit 3     $600    820      1            1
555    Unit 4     $650    920      1            1
555    Unit 5     $700    1220     2            1
555    Unit 6     $800    1420     2            2
555    Unit 7     $900    1500     3            2
555    Unit 8     $1100   1620     3            3 
```

等等等等

然后我在我的 PHP 中做的是使用手风琴将 1 间卧室组合在一起，将 2 间卧室组合在一起，等等。

并非所有公寓都有 2 个卧室单元，有些只有 1 个卧室单元，所以我需要在我的 PHP 代码中知道我是否应该打印另一个手风琴。

目前我正在对数据库进行多次点击来确定给定的建筑物是否有任何 2 个卧室单元，如果有，则打印另一行。请问这栋楼有三房单位吗？如果是这样打印另一行，但我想停止这么多地访问我的数据库。

最后，这是我的问题：

如何存储我的第一个数据库调用的结果并以某种方式解析数据并确定给定的 NID 是否有工作室、1 张床、2 张床等？（我最近才开始学习 PHP/MySQL）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:56:57.810

我建议这样的查询：

```
SELECT * FROM node_unit WHERE nid='555'
ORDER BY Bedrooms ASC, Bathrooms ASC, Rent ASC 
```

这将返回按卧室数量、浴室数量和租金金额（按此顺序）排序的记录。

从这样的数据库读取时，您可以轻松地将其存储在多维数组中（假设`mysqli`与存储在中的结果集一起使用`$result`，但其他数据库连接库的概念相同）

```
$room_array = array();
while ($row = mysqli_fetch_assoc($result)) {
    $room_array[(int)$row['Bedrooms']][] = $row;
} 
```

您现在有一个以卧室数作为第一个索引的多维数组。如果你这样做，数组可能看起来像这样`var_dump`：

```
Array (
    [0] => Array (
        [0] => Array (
            'NID' => '555',
            'Name' => 'Unit 1',
            'Rent' => '$500',
            'SqFt' => '620',
            'Bedrooms' => '0',
            'Bathrooms' => '1',
        )
        [1] => Array (
            'NID' => '555',
            'Name' => 'Unit 2',
            'Rent' => '$550',
            'SqFt' => '680',
            'Bedrooms' => '0',
            'Bathrooms' => '1',
        )
    )
    [1] => Array (
        [0] => Array (
            'NID' => '555',
            'Name' => 'Unit 3',
            'Rent' => '$600',
            'SqFt' => '820',
            'Bedrooms' => '1',
            'Bathrooms' => '1',
        )
        [1] => Array (
            'NID' => '555',
            'Name' => 'Unit 4',
            'Rent' => '$650',
            'SqFt' => '920',
            'Bedrooms' => '1',
            'Bathrooms' => '1',
        )
    [2] => Array (
        ...
    )
    [3] => Array (
        ...
    )
) 
```

这使得在外部循环中迭代卧室值的数量变得非常容易，这会创建您的手风琴，然后在内部循环中迭代各个房间。

```
foreach ($room_array as $num_bedrooms => $rooms) {
    // start accordion
    foreach ($rooms as $room) {
        // output room details
    }
    // end accordion
} 
```

所有这些只需要一个查询。

还要确保你有关于卧室、浴室、租金（或你在排序中使用的任何一个）以及 nid 的索引，因为它被用作过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:24:47.407

尝试将此作为您的数据库查询，它将为每个建筑物为其拥有的每种单元类型生成一行。您还可以将其用作子查询并连接到父表，以便一次性获取有关建筑物的任何其他详细信息。

```
select 'studio' as unit_type, nid from node_unit group by nid having count(case when bedrooms = 0 then 1 end) > 0
union all
select 'one bedroom' as unit_type, nid from node_unit group by nid having count(case when bedrooms = 1 then 1 end) > 0
union all
select 'two bedroom' as unit_type, nid from node_unit group by nid having count(case when bedrooms = 2 then 1 end) > 0
union all
select 'three bedroom' as unit_type, nid from node_unit group by nid having count(case when bedrooms = 3 then 1 end) > 0
```

# ruby-on-rails - 带有域名的本地 Rails？

> ID：13367585
> 
> 赞同：7
> 
> 时间：2012-11-13T19:42:17.890
> 
> 标签：ruby-on-rails, webserver

> **可能重复：**
> [如何为 Rails 应用程序指定网址？](https://stackoverflow.com/questions/13276118/how-to-specify-a-web-address-to-a-rails-application)

我想在我的机器上启动 2 个 Rails。我可以这样做：

```
rails s -p 3000
rails s -p 3001 
```

`localhost:3000`并通过和访问它们`localhost:3001`。

但是有什么方法可以启动它们`foo.example.com`吗`bar.example.com`？我并不真正拥有域名`example.com`，我只是希望我的本地程序通过这个假域名而不是 localhost 来访问它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T22:20:56.880

如果您使用的是 Linux（我在 Mac 中不确定），请使用**sudo编辑文件****/etc/hosts**并添加两行：

 **```
127.0.1.1      foo.example.com
127.0.1.1      bar.example.com 
```

如果您将浏览器指向其中任何一个，它应该可以工作。然后启动 Rails 应用程序的服务器：

```
rails s 
rails s -p 3001 
```

最后将浏览器指向：

```
foo.example.com:3000
bar.example.com:3001 
```**

# java - Terracotta 的 BigMemory Go 可以在没有 EHCache 的情况下使用吗？

> ID：13367590
> 
> 赞同：1
> 
> 时间：2012-11-13T19:42:46.307
> 
> 标签：java, performance, ehcache, terracotta

对于即将到来的项目，我将在 RAM 中保留大量数据（最多 10GB），但不作为缓存。*是否可以在没有*EH Cache的情况下使用 BigMemory（特别是 Go，即免费版），只是作为非垃圾收集的内存存储？我在文档中没有找到明确的答案，这些文档大多谈论与 EHCache 的典型集成。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:00:46.500

是的，EhCache**是**[BigMemory](http://terracotta.org/documentation/bigmemorygo/api/key-classes-methods)的API ：

> BigMemory Go 目前使用 Ehcache 作为其面向用户的数据访问 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:08:18.577

基本上，BigMemory 的设计方式是另一种存储层。您将事物存储在堆中，超出了您在堆外存储的内容（即大内存），然后超出了您在磁盘上存储的内容。这样做是有意义的，因为在我们想要存储大数据的 nosql 范式中；如果它们是键值形式，事情就会很好地工作。您可以选择存储任何类型的值，只需使其可序列化即可。至于您对“不作为缓存”的约束，很有可能配置缓存以使值不会从内存中被逐出。无论如何，如果您使用 BigMemory Go，您将获得 32GB 的限制，因此即使没有任何配置，存储 10GB 也不会触发任何驱逐算法。

# cakephp - CakePHP 2：Acl 教程不起作用

> ID：13367591
> 
> 赞同：3
> 
> 时间：2012-11-13T19:42:51.667
> 
> 标签：cakephp, foreign-keys, acl, cakephp-2.2

正如标题已经说的那样，我在 CakePHP 2 的 Acl 教程中遇到了问题。我已经按照教程中提到的方式完成了所有操作，但仍然无法正常工作。

我知道互联网上有很多人对本教程也有问题，但我找不到任何博客条目或任何与我一样的问题。当我尝试访问我的应用程序的方向时，我收到以下错误：

```
Notice (8): Undefined index: group_id [APP\Model\User.php, line 98] 
```

和：

```
AclNode::node() - Couldn't find Aro node identified by "Array ( [Aro0.model] => Group [Aro0.foreign_key] => ) " 
```

因此，传递给 Acl 的 foreign_key 根本没有任何值。但奇怪的是——至少在用户控制器的功能中——foreign_key 设置正确，但是当它应该传递给 Acl 时它就消失了

```
Nr  Query   Error   Affected    Num. rows   Took (ms)

1   SELECT COUNT(*) AS `count` FROM `cake`.`users` AS `User` WHERE `User`.`id` = 4
2   SELECT COUNT(*) AS `count` FROM `cake`.`users` AS `User` WHERE `User`.`id` = 4
3   SELECT COUNT(*) AS `count` FROM `cake`.`users` AS `User` WHERE `User`.`id` = 4
4   UPDATE `cake`.`users` SET `modified` = '2012-11-13 19:59:47' WHERE `cake`.`users`.`id` = '4'
5   SELECT `User`.`group_id` FROM `cake`.`users` AS `User` WHERE `User`.`id` = 4 LIMIT 1
6   SELECT `Aro`.`id`, `Aro`.`parent_id`, `Aro`.`model`, `Aro`.`foreign_key`, `Aro`.`alias` FROM `cake`.`aros` AS `Aro` LEFT JOIN `cake`.`aros` AS `Aro0` ON (`Aro`.`lft` <= `Aro0`.`lft` AND `Aro`.`rght` >= `Aro0`.`rght`) WHERE `Aro0`.`model` = 'Group' AND `Aro0`.`foreign_key` = 2 ORDER BY `Aro`.`lft` DESC
7   SELECT `Aro`.`id`, `Aro`.`parent_id`, `Aro`.`model`, `Aro`.`foreign_key`, `Aro`.`alias` FROM `cake`.`aros` AS `Aro` LEFT JOIN `cake`.`aros` AS `Aro0` ON (`Aro`.`lft` <= `Aro0`.`lft` AND `Aro`.`rght` >= `Aro0`.`rght`) WHERE `Aro0`.`model` = 'User' AND `Aro0`.`foreign_key` = 4 ORDER BY `Aro`.`lft` DESC
8   SELECT COUNT(*) AS `count` FROM `cake`.`aros` AS `Aro` WHERE `Aro`.`id` = 6
9   SELECT COUNT(*) AS `count` FROM `cake`.`aros` AS `Aro` WHERE `Aro`.`id` = 6
10  SELECT `Aro`.`parent_id` FROM `cake`.`aros` AS `Aro` WHERE `Aro`.`id` = 6 LIMIT 1
11  SELECT `Aro`.`id`, `Aro`.`parent_id`, `Aro`.`lft`, `Aro`.`rght` FROM `cake`.`aros` AS `Aro` WHERE 1 = 1 AND `Aro`.`id` = 6 LIMIT 1
12  SELECT `Aro`.`id`, `Aro`.`lft`, `Aro`.`rght` FROM `cake`.`aros` AS `Aro` WHERE 1 = 1 AND `Aro`.`id` = 2 LIMIT 1
13  SELECT COUNT(*) AS `count` FROM `cake`.`aros` AS `Aro` WHERE `Aro`.`id` = 6
14  UPDATE `cake`.`aros` SET `parent_id` = 2, `model` = 'User', `foreign_key` = 4, `id` = 6 WHERE `cake`.`aros`.`id` = '6'
15  SELECT `Aro`.`id`, `Aro`.`parent_id`, `Aro`.`model`, `Aro`.`foreign_key`, `Aro`.`alias` FROM `cake`.`aros` AS `Aro` LEFT JOIN `cake`.`aros` AS `Aro0` ON (`Aro`.`lft` <= `Aro0`.`lft` AND `Aro`.`rght` >= `Aro0`.`rght`) WHERE `Aro0`.`model` = 'Group' AND `Aro0`.`foreign_key` IS NULL ORDER BY `Aro`.`lft` DESC 
```

错误消息中的行是：

```
public function bindNode($user) {
    return array('model'=>'Group','foreign_key'=>$user['User']['group_id']);
} 
```

那么为什么 foreign_key 的值首先是 '2' （它应该是）然后是 NULL ？

我希望你们中的一些人能够帮助我。谢谢。

PS：对于喜欢我的问题的德语版本的每个人，[这里](http://www.cakephp-forum.de/models/acl-tutorial-von-cake-lauft-nich-so-wie-es-soll-t1249.html)是

**更新：** 我能够通过以下方式使其适用于用户控制器的所有功能：

```
public function bindNode() {
    $this->id;
    $data = $this->read();
    return array('model' => 'Group', 'foreign_key' => $data['User']['group_id']);
    } 
```

但是对于所有其他控制器，它仍然是一样的。有没有人知道我如何在模型中获取用户数据，以便它也适用于其他控制器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:15:15.833

我知道回答我自己的问题有点愚蠢，但我认为与其删除问题，不如把它留给有同样问题的任何人，因为互联网上似乎没有答案。

我能够通过以下代码解决问题：

```
public function bindNode() {
    $data = AuthComponent::user();
    return array('model' => 'Group', 'foreign_key' => $data['User']['group_id']);
    } 
```

它似乎工作得很好，也许它可以帮助其他一些人;）

# c# - 如何让控制台应用程序在 Outlook 中创建新邮件

> ID：13367592
> 
> 赞同：0
> 
> 时间：2012-11-13T19:42:54.857
> 
> 标签：c#, outlook, console-application, email

我正在尝试找出一种在 Visual Studio 中编写 C# 控制台应用程序的方法，该应用程序将采用字符串“;” 分隔电子邮件地址并创建一个新邮件消息（在 Microsoft Outlook 中），地址是字符串中的联系人。

换句话说，有没有办法在控制台应用程序中获取一个字符串，然后在 Outlook 中打开一个无标题消息，该字符串在“收件人...”字段中。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T19:44:18.267

你可以写

```
Process.Start("mailto:a@example.com,b@example.com"); 
```

这将打开用户的默认邮件客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:48:28.833

如果要使用特定于 Outlook 的[命令行开关](http://office.microsoft.com/en-us/outlook-help/command-line-switches-HP001003110.aspx)，请执行以下操作：

```
Process.Start("[path to outlook]/Outlook.exe /c ipm.note /m "email1@email.com;email2@email.com" 
```

# javascript - PhoneGap 无法从 Media API 中获取 Duration()，但其他方法有效

> ID：13367593
> 
> 赞同：8
> 
> 时间：2012-11-13T19:43:06.100
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我正在使用 PhoneGap 构建音频媒体记录器/播放器。这一切都很好，但我遇到了我似乎无法熨烫的皱纹。

`my_media.play();`确实在我的 Eclipse 或 XCode 控制台中播放没有错误的媒体，这就是为什么显示 -1 的警报令人费解的原因。我希望`my_media.getDuration();`返回我尝试播放的文件的持续时间。

我的 try/catch 块没有抛出错误，我对此感到很困惑。 [这是有关 Media.getDuration() 的 PhoneGap 文档](http://docs.phonegap.com/en/2.1.0/cordova_media_media.md.html#media.getDuration)。

```
function playAudio() {

    $('#btnStopRecording').removeClass('ui-disabled');
    $('#btnPlayMessage, #btnStartStopRecording, #btnDeleteMessage, #btnAcceptUpload').addClass('ui-disabled');

    my_media = new Media(fullRecordPath,

        // success callback
        function () {
            $('#btnPlayMessage, #btnStartStopRecording, #btnDeleteMessage, #btnAcceptUpload').removeClass('ui-disabled');
            $('#btnStopRecording').addClass('ui-disabled');
        },

        // error callback
        function (err) {
            console.log("attempting to play fullRecordPath = "+fullRecordPath);
            console.log("playAudio():Audio Error: " + err.code);
        }
    );

    var thisDuration;

    try{
        thisDuration = my_media.getDuration();
    } catch (err) {
        console.log("attempting to get duration error code "+err.code);
        console.log("attempting to get duration error message "+err.message);
    }

    alert("we're about play a file of this duration "+thisDuration);

    my_media.play();

    // stop playback when the stop button is tapped
    $('#btnStopRecording').off('tap').on('tap',function()
    {
        my_media.stop();
        $('#btnPlayMessage, #btnStartStopRecording, #btnDeleteMessage, #btnAcceptUpload').removeClass('ui-disabled');
        $('#btnStopRecording').addClass('ui-disabled');
    });

    // if the user leaves the page, stop playback
    $('#pageRecordMessage').live('pagehide', function()
    {
        my_media.stop();
        $('#btnPlayMessage, #btnStartStopRecording, #btnDeleteMessage, #btnAcceptUpload').removeClass('ui-disabled');
        $('#btnStopRecording').addClass('ui-disabled');
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:54:13.990

当您调用 my_media.getDuration() 时，尚未加载相关媒体的元数据。在您在问题中引用的文档中，示例代码将 getDuration 调用置于一个间隔中：

```
var timerDur = setInterval(function() {
    counter = counter + 100;
    if (counter > 2000) {
        clearInterval(timerDur);
    }
    var dur = my_media.getDuration();
    if (dur > 0) {
        clearInterval(timerDur);
        document.getElementById('audio_duration').innerHTML = (dur) + " sec";
    }
}, 100); 
```

我建议做类似的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T05:21:14.487

这个解决方案对我有用。基本上，播放并立即停止。它似乎不需要任何时间，似乎是一个不错的解决方法。

```
media.play();
media.stop();
var length = media.getDuration(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-06T00:23:31.203

这个问题太老了。但这仍然是相关的，因为许多人可能面临同样的问题。每当没有任何效果时，我只做一件事，升级或降级版本。在这种情况下，我通过安装以下版本解决了我的问题。

```
cordova plugin add cordova-plugin-media@1.0.1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-16T11:36:38.280

我在 iOS 的 cordova 中也遇到了类似的问题。我能够成功录制、播放和停止音频，但无法获取音频文件的当前位置和总持续时间。所以我`my_media.release()`在完成录制音频之后添加了，即之后`my_media.stopRecord()`，它就像一个魅力。早些时候，我得到了`-1`for`getDuration()`和`0`for `getCurrentPosition()`。

希望它可以帮助某人。

# jquery - 通过 jQuery .post() 函数传递数据

> ID：13367597
> 
> 赞同：0
> 
> 时间：2012-11-13T19:43:15.300
> 
> 标签：jquery, post

我通常像这样通过 .post() 传递数据：

```
 $.post(
    "/ajax.php",
    $("#form").serialize(),
    function(responseJSON) {
        console.log(responseJSON);
    },
    "html"
); 
```

在我的表单`"#form"`中，我通常有一个名为“id”的隐藏输入，其中包含我要运行查询的项目的 id 的值。

我想要做的是取出隐藏的输入并`data-id="$id"`在我的提交按钮中添加一个属性，并让 jQuery 函数从那里提取数据并将其与其他`#form`字段一起发送。

简单来说，我要问的是如何在一个函数中`$('#form').serialize()`传递`$('#button').data('id')`到我的后端？`$.post()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:45:42.977

试试这个

```
var data = $("#form").serialize() + '&data-id=' + $('#button').data('id');
$.post(
    "/ajax.php",
    data,
    function(responseJSON) {
        console.log(responseJSON);
    },
    "html"
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:48:24.137

.serialize() 只是用数据创建一个字符串。你只需要追加`&<variable>=<value>`到最后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:49:31.477

您可以尝试一个自动为您执行此操作的库，您无需担心内部工作原理，使用[http://phery-php-ajax.net/](http://phery-php-ajax.net/)

```
Phery::instance()->set(array(
   'function' => function($data){ 
       // $data['id'] = the hidden in your form
       return PheryResponse::factory()->json($your_array_that_will_be_turned_to_json);
   }
))->process(); 
```

```
<form data-remote="function" method="POST">
  <input type="hidden" name="id">
</form> 
```

在您的 Javascript 中，您可以处理 JSON

```
$(function(){
  $('form').bind('phery:json', function(event, json_data){
    // deal with your json_data
  }
}); 
```

# oracle11g - Oracle：类似于描述命令的脚本

> ID：13367598
> 
> 赞同：0
> 
> 时间：2012-11-13T19:43:17.820
> 
> 标签：oracle11g, sqlplus, data-dictionary

我被要求创建一个基本上与 describe 命令执行相同操作的脚本。我已经想出了如何编写脚本并获得我想要的输出，但是任务的第二部分是“复制描述命令的格式”我很难过，真的有办法简单地复制那种格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:56:33.033

假设您的查询类似于（请注意，我不会费心处理每种不同的数据类型）

```
select column_name "Name",
       (case when nullable = 'N'
             then 'NOT NULL'
             else null
         end) "Null?",
       (case when data_type = 'DATE'
             then data_type
             when data_type = 'NUMBER' and data_scale > 0
             then data_type || '(' || data_precision || ',' || data_scale || ')'
             when data_type = 'NUMBER' and data_scale = 0
             then data_type || '(' || data_precision || ')'
             when data_type = 'VARCHAR2'
             then data_type || '(' || data_length || ')'
        end) "Type"
  from dba_tab_cols
 where table_name = 'EMP'
 order by column_id 
```

您可以发出一些 SQL*Plus 命令来格式化输出

```
SQL> column "Nmae" format a30;
SQL> column "Null?" format a8;
SQL> column "Type" format a30; 
```

然后查询的输出将与`DESCRIBE`命令的输出匹配

```
SQL> ed
Wrote file afiedt.buf

  1  select column_name "Name",
  2         (case when nullable = 'N'
  3               then 'NOT NULL'
  4               else null
  5           end) "Null?",
  6         (case when data_type = 'DATE'
  7               then data_type
  8               when data_type = 'NUMBER' and data_scale > 0
  9               then data_type || '(' || data_precision || ',' || data_scale || ')'
 10               when data_type = 'NUMBER' and data_scale = 0
 11               then data_type || '(' || data_precision || ')'
 12               when data_type = 'VARCHAR2'
 13               then data_type || '(' || data_length || ')'
 14          end) "Type"
 15    from dba_tab_cols
 16   where table_name = 'EMP'
 17*  order by column_id
SQL> /

Name                           Null?    Type
------------------------------ -------- ------------------------------
EMPNO                          NOT NULL NUMBER(4)
ENAME                                   VARCHAR2(10)
JOB                                     VARCHAR2(9)
MGR                                     NUMBER(4)
HIREDATE                                DATE
SAL                                     NUMBER(7,2)
COMM                                    NUMBER(7,2)
DEPTNO                                  NUMBER(2)

8 rows selected. 
```

# .net - 我可以自定义为 VB.net 中的属性自动生成的代码吗

> ID：13367602
> 
> 赞同：0
> 
> 时间：2012-11-13T19:43:45.160
> 
> 标签：.net, vb.net, visual-studio-2010

我通过更改某些类的接口实现顺序给自己挖了一个洞。就目前而言，我需要通过并扩展许多属性来实现 Get 和 Set。Get 和 Set 方法非常相似，但非常棘手，难以实现自动化。例子：

```
Public Property SpecificTable as SpecificTableType 
```

我有与此类似的属性，我需要将其扩展为：

```
Public Property SpecificTable as SpecificTableType
Get
  Return DirectCast(Me.Table, SpecificTableType)
End Get
Set(ByVal value as SpecificTableType)
  Me.Table = value
End Set 
```

它非常简单，当我键入 Get 并在属性下按 Enter 时，VS Studio 会自动生成很多，包括`Set(ByVal value as SpecificTableType)`

这让我想知道，除了片段，因为我已经定义了属性，VS如何完成这个自动生成，我可以自定义它吗？它可以让我的手指免于一些痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:48:24.013

这是很难做到的方法，但如果您想花时间学习 Roslyn 并编写代码问题，这绝对是一个答案。

使用 Microsoft Roslyn，这是一个编译器即服务项目，可让您访问解析器、编译器（语义）功能。你可以用 Roslyn 做的是创建一个基于 a 文件的抽象语法树（循环所有类型的文件），并为每个 AST 搜索不包含明确定义的 getter 和 setter 的属性，并将该 AST 替换为有你喜欢的道具。

如果我需要在简单的替换应用程序无法做到的地方重做这个，这就是我会做的。

检查这些：http: [//msdn.microsoft.com/en-us/vstudio/hh500769.aspx](http://msdn.microsoft.com/en-us/vstudio/hh500769.aspx) http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:51:58.410

默认情况下，Visual Studio 不允许您自定义代码生成的该方面，除了允许您禁用“结束构造”行（End If、End Get 等）的自动插入之外。

有一些扩展允许模板驱动的代码生成，例如： http://visualstudiogallery.msdn.microsoft.com/4fbfd05a-f3e8-4f79-b912-def3e9cb28fc?SRC= [VSIDE](http://visualstudiogallery.msdn.microsoft.com/4fbfd05a-f3e8-4f79-b912-def3e9cb28fc?SRC=VSIDE)

看看这是否符合您的要求。

# node.js - child_process.fork 和 cluster.fork 之间的有效区别是什么？

> ID：13367607
> 
> 赞同：15
> 
> 时间：2012-11-13T19:44:20.353
> 
> 标签：node.js

我知道 cluster.fork 将允许多个进程在同一个端口上侦听，我还想知道的是，当您的一些工作人员不是 tcp 的侦听器/处理程序时，支持这一点有多少额外的开销服务？

我有一项服务，我还想启动几个工作人员。例如：2 个 Web 服务侦听器进程和 3 个工作人员实例。最好对它们都使用集群，还是将集群用于 2 个 Web 服务，而 child_process 用于工作人员会更好？

我不知道节点的内部结构，但我认为如果我和其他人更好地了解在不同需求下采取哪条路线会很好。目前，我正在为所有进程使用集群。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-25T09:31:22.873

`cluser.fork`是在`child_process.fork`. 带来的额外内容`cluster.fork`是，它将使您能够在共享端口上侦听。如果您不想要它，只需使用`child_process.fork`. 所以，是的，将集群用于 Web 服务器，将 child_process 用于工作人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-20T18:32:00.360

Cluster 是 Node.js 的一个模块，其中包含一组函数和属性，可帮助开发人员分叉进程，通过这些进程，他们可以利用多核系统。使用集群模块，子进程和几个部分的创建和共享变得容易。在单个线程中，node.js 的单个实例专门运行并利用各种生态系统，启动一个 node.js 集群，以分配负载。

开发人员可以通过 child_process 模块访问操作系统功能，这可以通过在子进程中运行任何系统命令来实现。可以控制子进程的输入流，开发者也可以监听输出流。使用 Node 的 child_process 模块可以轻松地创建子进程，并且这些子进程可以在消息系统的帮助下轻松地相互通信

# javascript - 图像未加载后 附加了jquery

> ID：13367611
> 
> 赞同：1
> 
> 时间：2012-11-13T19:44:52.330
> 
> 标签：javascript, jquery, .net, html

我的网站包含以下代码：

```
<ul class="thumbnails1">
  <li>
   <img src="~/Images/man1.jpg" alt="n/a"/>
   </li>
</ul>
<input type="button" value="See More" onclick="OnSeeMore()"/>
<script type="text/javascript">
function OnSeeMore() {
  $('.thumbnails1').prepend('<li><img src="~/Images/man1.jpg" alt="n/a"/></li>');
}
</script> 
```

原始图像看起来不错，但是当我单击“查看更多”按钮时，我可以看到列表项是动态添加的，但图像显示的是“alt”文本 n/a 而不是“man1.jpg”图像。那我做错了什么？我基本上试图复制谷歌的图像搜索行为，只显示数据库中的一些图像，然后根据要求显示更多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T19:47:04.713

`~/Images/man1.jpg`是服务器端的相对路径。如果要在客户端添加节点，则需要使用`/Images/man1.jpg`假设 Images 文件夹位于站点的根文件夹中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T19:47:02.257

相对路径：

```
<img src="~/Images/man1.jpg" 
```

应该在服务端“解析”，如果在客户端按原样添加，路径无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:47:13.790

为什么您的 URL 包含`~`? 它不应该使用一些 linux 特定的路径，因为那不是 URL。它应该是从网络服务器而不是文件系统访问它的路径。

```
<!-- Relative -->
<img src="./Images/man1.jpg" alt="n/a"/>

<!-- Absolute -->
<img src="/Path/to/my/directory/Images/man1.jpg" alt="n/a"/> 
```

# oracle - 人员代码功能不起作用

> ID：13367612
> 
> 赞同：0
> 
> 时间：2012-11-13T19:44:53.693
> 
> 标签：oracle, peoplesoft

我正在使用 Peoplecode，它是一种 Peoplesoft 编码语言。

我正在尝试`'message text'`从消息目录中访问。

`7373`当我在另一页上使用相同的代码时， 它会提取正确的数字。

但在这种情况下，它返回消息

> 'GetMessageText：没有默认消息。(2012,2012)'。

这是我正在使用的代码..

```
 &cur_year = Year(%Date);
   &MsgNum = MsgGetText(2012, 2012, ""); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:00:45.383

这是因为它找不到消息（2012，2012）。您必须指定正确的消息集和消息编号才能从消息目录中检索。

看这里： [http ://docs.oracle.com/cd/E28394_01/pt852pbh1/eng/psbooks/tpcl/book.htm?File=tpcl/htm/tpcl02.htm%2337ee99c9453fb39_ef90c_10c791ddc07__3cd3](http://docs.oracle.com/cd/E28394_01/pt852pbh1/eng/psbooks/tpcl/book.htm?File=tpcl/htm/tpcl02.htm#37ee99c9453fb39_ef90c_10c791ddc07__3cd3 "Peoplebooks-MsgGetText")

# node.js - node.js读取文件多个实例

> ID：13367617
> 
> 赞同：0
> 
> 时间：2012-11-13T19:45:14.660
> 
> 标签：node.js, io, vlc

我的 node.js 服务器将生成一个子进程，该子进程启动 VLC 以拍摄视频照片，然后发回照片。

使用 nginx 作为负载均衡器，我将拥有 4 个 node.js 实例（我的服务器核心数）。拥有 4 个不同的视频文件（每个实例一个）更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:14:56.427

由于您正在生成一个子进程，因此节点在技术上根本不与视频交互，它正在与 VLC 交互，而 VLC 正在与视频交互。所以它会产生四个不同的 VLC 进程。因此，如果子进程可以从拥有自己的视频中获得任何好处，并且您将拥有与请求一样多的子进程，那么实际上这将是一个更大的问题。

根据我从问题中了解到的情况，该视频可能正在流式传输，并且您想从中拍摄静止图像，在这种情况下，我会花时间作为参数，并像这样启动 VLC 子进程：

```
C:\VideoLAN\VLC>vlc "path/to/video" --video-filter=scene 
--vout=dummy --start-time=1 --stop-time=5 --scene-ratio=1 
--scene-prefix=img- --scene-path=path/to/image vlc://quit 
```

VLC 应该能够处理多次访问这个文件（每个请求一个）。

# vba - 如何在 VBA 中处理 MS Access 2010 表单控件上的空/无/空白值？

> ID：13367623
> 
> 赞同：1
> 
> 时间：2012-11-13T19:45:35.433
> 
> 标签：vba, logging, null, ms-access-2010, nothing

我需要 Access 2010 中的“跟踪更改”功能。我遇到了[这个脚本](http://www.techrepublic.com/article/a-simple-solution-for-tracking-changes-to-access-data/6166807)，它应该可以通过一些工作来解决问题。

它清晰易懂，但还不能处理我需要的所有文本框案例。（稍后我将实现其他控件。）这是所编写的相关结构。它被称为表单上的更新前事件的事件过程：

```
Const cDQ As String = """"

Sub AuditTrail(frm As Form, recordid As Control)

    'Track changes to data.
    'recordid identifies the pk field's corresponding
    'control in frm, in order to id record.

    Dim ctl As Control
    Dim varBefore As Variant
    Dim varAfter As Variant
    Dim strControlName As String
    Dim strSQL As String

    On Error GoTo ErrHandler

    'Get changed values.

    For Each ctl In frm.Controls    
        With ctl
            'Avoid labels and other controls with Value property.
            If .ControlType = acTextBox Then
                If .Value <> .OldValue Then
                    'Add record of change to logging table   
                End If     
            End If     
        End With   
    Next   

    Set ctl = Nothing   
    Exit Sub  

    ErrHandler:
        'Handle error
End Sub 
```

只要文本框中的值不为空，这将起作用。如果其中一个`.Value`or`.OldValue`为空（或什么都没有——我在这一点上感到困惑），那么不等式就会失败。

我尝试将其中的部分更新`With ctl`为以下内容。这允许我记录其中一个值（之前或之后）为空的更改。其余被注释掉的东西是我尝试记录值为空但没有改变的所有情况。换句话说，`IsNull(ctl)`让一切都通过，但我不知道如何再次过滤掉平等的情况。

```
If .ControlType = acTextBox Then
    If IsNull(ctl) Or .Value <> .OldValue Then
        'If Not (Len(.Value & vbNullString) = 0 And Len(.OldValue & vbNullString) = 0) Then                 

            'If oldValueIsNull Then
            '    varBefore = "--NULL--"
            'Else
            '    varBefore = .OldValue
            'End If

            'If newValueIsNull Then
            '    varAfter = "--NULL--"
            'Else
            '    varAfter = .Value
            'End If

            'Add record of change to logging table

       'End If
    End If
End If 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:56:30.890

如果您乐于避免可能不适合所有人的整个 null 问题，您可以说

```
If .Value & "" <> .OldValue & "" Then 
```

这将比较字符串。

# flash - Flash Builder 4.6 移动版式

> ID：13367625
> 
> 赞同：-1
> 
> 时间：2012-11-13T19:45:42.597
> 
> 标签：flash, apache-flex, mobile, actionscript, builder

你能帮我解决这个弹性布局吗？我必须做一些类似的事情，我需要一些技巧来制作它，而不是代码。网格中的按钮是可点击的，并且可以更改视图。谢谢。:)

[http://a848.phobos.apple.com/us/r1000/061/Purple/v4/65/e4/c1/65e4c13b-cd19-8d23-f30c-10f29705097d/mzl.acytcmdz.320x480-75.jpg](http://a848.phobos.apple.com/us/r1000/061/Purple/v4/65/e4/c1/65e4c13b-cd19-8d23-f30c-10f29705097d/mzl.acytcmdz.320x480-75.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:03:44.920

将[List](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/List.html)或[Group](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Group.html)与[TileLayout](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/layouts/TileLayout.html)一起使用。

# objective-c - UITableView 仅在 iPhone 5 上忽略方法调用

> ID：13367628
> 
> 赞同：0
> 
> 时间：2012-11-13T19:46:01.497
> 
> 标签：objective-c, uitableview, ios6, iphone-5, nsindexpath

这看起来很奇怪，也许我没有完全解决这个问题，但我很困惑。

在我的应用程序中，我在 VC 中以模态方式呈现 UITableView，并创建了一个自定义 init 方法来另外发送表应该滚动到的索引路径。

在 ViewDidLoad 中，以下调用在 iPhone4S 及更早版本上正确执行，但在 iPhone5 上被忽略：

```
[table scrollToRowAtIndexPath:iP atScrollPosition:UITableViewScrollPositionTop animated:NO]; 
```

有什么建议么？我有没有做出任何错误的假设？

# c# - 如何确定列表's object? I am looking to create a generic method that receives a List. I need to determine what the object is within the list so that I can then do the necessary work according to the object that is being passed in within 问问题 问问题 2012-11-13T19:46:05.610 88 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am looking to create a generic method that receives a List. I need to determine what the object is within the list so that I can then do the necessary work according to the object that is being passed in within the list. How can I determine the kind of object that the List contains? Use a literal. .aspx: codebehind: myLiteral.Text = "

## this is a h2 html tag

"; this will print out This is a h2 html tag c#.net 4 3 回答 3 This answer is useful 2 好吧，您有is关键字，可以比较对象 if(myObject is MyClass) doStuff(); 你也有 typeof(myObject); 正如LB所说，你有 obj.GetType() too 于 2012-11-13T19:48:43.683 回答 This answer is useful 1 如果对象类型不是您的方法的泛型参数之一，那么您可以使用返回泛型类型参数类型的Type.GetGenericArguments方法（在您的情况下为 List）。 否则，如果对象类型是您方法的通用参数之一，则使用 Travis J 的答案。 于 2012-11-13T22:28:55.383 回答 This answer is useful 1 给定 List <t>objects; 你可以得到这样的类型 var objType = typeof(T); 于 2012-11-13T19:49:06.957 回答 Related 1 emacs - Emacs ediff 模式 2 string - 这些是什么 ？ه҈҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉ 1 html - html5画布创建标尺 2 eclipse - 无法理解 maven 如何与 Spring MVC 一起工作 0 ios - wp8 ios 音频录制和播放兼容性 2 ruby-on-rails - 网络应用协会 1 regex - 使用 RegEx（notepad++）删除重复的字符串/单词（不是行） 1 jquery - 使用 JQuery 进行正则表达式匹配 2 response - 示例 RTSP SET_PARAMETER 响应 4 c++ - 由另一个数组中的值组成的数组 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13367631
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, .net

I am looking to create a generic method that receives a List. I need to determine what the object is within the list so that I can then do the necessary work according to the object that is being passed in within the list. How can I determine the kind of object that the List contains?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:48:43.683

好吧，您有`is`关键字，可以比较对象

```
if(myObject is MyClass)
    doStuff(); 
```

你也有

```
typeof(myObject); 
```

正如LB所说，你有

```
obj.GetType() too 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:28:55.383

如果对象类型不是您的方法的泛型参数之一，那么您可以使用返回泛型类型参数类型的[Type.GetGenericArguments方法（在您的情况下为 List）。](http://msdn.microsoft.com/en-us/library/system.type.getgenericarguments.aspx)

否则，如果对象类型是您方法的通用参数之一，则使用 Travis J 的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T19:49:06.957

给定

```
List<T> objects; 
```

你可以得到这样的类型

```
var objType = typeof(T); 
```</t>

# javascript - 基础（3）Zurb下拉菜单问题

> ID：13367640
> 
> 赞同：0
> 
> 时间：2012-11-13T19:46:51.673
> 
> 标签：javascript, html, zurb-foundation

我已经设置了一个基本的“演示”页面，但无法让 Foundation 下拉菜单正常运行。正如您在此处看到的那样，[http](http://tinyurl.com/arhssm9) ://tinyurl.com/arhssm9，Nav Item 2 有一个下拉选项。然而，什么也没有发生。我相信我已经正确实现了导航并包含了正确的 js 文件。我真的很感激有人告诉我哪里出错了，这样我就可以继续我的项目了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:55:40.347

你错过了`app.js`. 只需添加它。

您可以在控制台中测试运行：

```
$.getScript('https://raw.github.com/zurb/foundation/master/vendor/assets/javascripts/foundation/app.js'); 
```

希望能帮助到你。

* * *

编辑

如果你不想下载额外的 JS，你可以简单地添加如下内容：

```
var $doc = $(document);
$doc.ready(function(){
  $doc.foundationTopBar();
}); 
```

# c# - 从 3d 文件制作 2d 绘图

> ID：13367645
> 
> 赞同：2
> 
> 时间：2012-11-13T19:47:05.177
> 
> 标签：c#, xna

所以我几天来一直被这个问题困扰，试图用 xna 和 c# 从 3d 对象创建 2d 绘图。例如，我在想类似的事情：当您在绘画中创建图片或其他任何东西然后将该图片保存到某个文件夹时。并将该文件夹文件显示（我认为这就是它的名称）设置为缩略图，它将将该图片显示为图标。

最好的祝福！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:08:42.173

将 3D 模型绘制到 RenderTarget2D，然后根据需要使用该纹理。

# c++ - Extract all items from SysListView32

> ID：13367646
> 
> 赞同：0
> 
> 时间：2012-11-13T19:47:06.567
> 
> 标签：c++

i tried to extract all items from SysListView32,

this is the code:

```
#define WIN32_LEAN_AND_MEAN
#include "stdafx.h"
#include <stdio.h>
#include <windows.h>
#include <commctrl.h>

int main(void) {

 HWND hwnd=FindWindow(TEXT("Window"), TEXT("Cheat Engine 6.1"));
 HWND win=FindWindowEx(hwnd, NULL, TEXT("Window"), NULL);
 HWND listview=FindWindowEx(win, NULL, TEXT("SysListView32"), NULL);

    int count=(int)SendMessage(listview, LVM_GETITEMCOUNT, 0, 0);
    int i;

    LVITEM lvi, *_lvi;
    char item[512], subitem[512];
    char *_item, *_subitem;
    unsigned long pid;
    HANDLE process;

    GetWindowThreadProcessId(listview, &pid);
    process=OpenProcess(PROCESS_VM_OPERATION|PROCESS_VM_READ|PROCESS_VM_WRITE|PROCESS_QUERY_INFORMATION, FALSE, pid);

    _lvi=(LVITEM*)VirtualAllocEx(process, NULL, sizeof(LVITEM), MEM_COMMIT, PAGE_READWRITE);
    _item=(char*)VirtualAllocEx(process, NULL, 512, MEM_COMMIT, PAGE_READWRITE);
    _subitem=(char*)VirtualAllocEx(process, NULL, 512, MEM_COMMIT, PAGE_READWRITE);

    lvi.cchTextMax=512;

    for(i=0; i<count; i++) {
        lvi.iSubItem=0;
        lvi.pszText=_item;
        WriteProcessMemory(process, _lvi, &lvi, sizeof(LVITEM), NULL);
        SendMessage(listview, LVM_GETITEMTEXT, (WPARAM)i, (LPARAM)_lvi);

        lvi.iSubItem=1;
        lvi.pszText=_subitem;
        WriteProcessMemory(process, _lvi, &lvi, sizeof(LVITEM), NULL);
        SendMessage(listview, LVM_GETITEMTEXT, (WPARAM)i, (LPARAM)_lvi);

        ReadProcessMemory(process, _item, item, 512, NULL);
        ReadProcessMemory(process, _subitem, subitem, 512, NULL);

        printf("%s - %s\n", item, subitem);
    }

    VirtualFreeEx(process, _lvi, 0, MEM_RELEASE);
    VirtualFreeEx(process, _item, 0, MEM_RELEASE);
    VirtualFreeEx(process, _subitem, 0, MEM_RELEASE);

    return 0;
} 
```

Error:

`cannot convert from 'char *' to 'LPWSTR'` at line: `lvi.pszText=_item;`

Error 2:

`IntelliSense: a value of type "char *" cannot be assigned to an entity of type "LPWSTR"` at line: `lvi.pszText=_subitem;`

i tried `TEXT(_subitem)` , Still not working.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:50:56.173

使用`TCHAR*`or`wchar_t*`代替`char*`. 仅用于`TEXT()`字符串文字。

# java - 为 Hibernate 测试配置 HSQL Server

> ID：13367653
> 
> 赞同：3
> 
> 时间：2012-11-13T19:47:32.463
> 
> 标签：java, database, hibernate, unit-testing, hsqldb

我刚刚开始使用 Hibernate 并开始思考问题。

目前我正在尝试设置一个测试环境，我可以在其中使用 HSQL 内存实例来测试我的项目。

我遇到的错误是：

```
javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: invalid schema name: TSG 
```

以下是我项目的相关部分：

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?> 
```

org.hibernate.ejb.HibernatePersistence com.foo.api.models.tsg.AlgPpcAlgorithmOutputEntity

```
<persistence-unit name="TestingPersistenceUnit" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>com.foo.api.models.tsg.AlgPpcAlgorithmOutputEntity
    </class>
    <properties>
        <property name="dialect" value="org.hibernate.dialect.HSQLDialect"/>
        <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
        <property name="hibernate.connection.url" value="jdbc:hsqldb:mem:tsg"/>
        <property name="hbm2ddl.auto" value="create-drop"/>
        <property name="hibernate.connection.autocommit" value="true"/>
        <property name="hibernate.connection.username" value="sa"/>
        <property name="hibernate.connection.password" value=""/>
        <property name="hibernate.show_sql" value="true"/>
    </properties>
</persistence-unit> 
```

如您所见，我有一个`peristence-unit`用于生产（工作正常）和一个内存中的 HSQL 一个用于测试（我无法开始工作）。

一个示例 Hibernate 实体：

```
package com.foo.api.models.tsg;

import javax.persistence.*;
import java.math.BigDecimal;

@IdClass(AlgPpcAlgorithmOutputEntityPK.class)
@Table(name = "alg_ppc_algorithm_output", schema = "", catalog = "tsg")
@Entity
public class AlgPpcAlgorithmOutputEntity {
    private int parameterId;

    @Column(name = "parameter_id")
    @Id
    public int getParameterId() {
        return parameterId;
    }

    public void setParameterId(int parameterId) {
        this.parameterId = parameterId;
    }

    private String matchType;

    @Column(name = "matchType")
    @Basic
    public String getMatchType() {
        return matchType;
    }

    // for brevity I have removed the rest of the implementation
    // It was auto-generated by Hibernate and works fine in production.
} 
```

最后，一个简单的 TestCase 类：

```
package tests.integration;

import com.foo.api.models.tsg.AlgPpcAlgorithmOutputEntity;
import com.foo.api.util.HibernateUtil;
import org.hsqldb.Server;
import org.hsqldb.persist.HsqlProperties;
import org.hsqldb.server.ServerConfiguration;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import tests.util.HSQLServerUtil;

import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityManager;
import javax.persistence.Persistence;

import com.foo.api.KeywordManager;

import java.sql.Date;
import java.util.HashSet;

public class KeywordManagerTestCase {

    private static final Logger LOG =   LoggerFactory.getLogger(KeywordManagerTestCase.class);
    private EntityManagerFactory eMF;
    protected EntityManager eM;

    @Before
    public void setUp() throws Exception {

        HsqlProperties props = new HsqlProperties();
        props.setProperty("server.database.0", "mem:tsg");
        props.setProperty("server.dbname.0", "tsg");

        ServerConfiguration.translateDefaultDatabaseProperty(props);

        Server hsqlServer = new Server();
        hsqlServer.setRestartOnShutdown(false);
        hsqlServer.setNoSystemExit(true);
        hsqlServer.setProperties(props);
        hsqlServer.setTrace(true);

        LOG.info("Configured the HSQLDB server...");
        hsqlServer.start();
        LOG.info("HSQLDB server started on port " + hsqlServer.getPort() + "...");

        LOG.info("Loading hibernate...");
        if (eMF == null) {
            eMF = Persistence.createEntityManagerFactory("TestingPersistenceUnit");
        }

        eM = eMF.createEntityManager();
    }

    /**
     * shutdown the server.
     * @throws Exception in case of errors.
     */
    @After
    public void tearDown() throws Exception {
        eM.close();
        HSQLServerUtil.getInstance().stop();
    }

    /**
     * Demo test to see that the number of user records in the database corresponds the flat file inserts.
     */
    @Test
    public void testDemo1() {
        AlgPpcAlgorithmOutputEntity entity = new AlgPpcAlgorithmOutputEntity();
        entity.setParameterId(200);
        entity.setMatchType("aa");
        KeywordManager km;
        eM.persist(entity);

        HashSet<Integer> params = new HashSet<Integer>();
        params.add(200);
        km = new KeywordManager(eM, params, new Date[2]);

        HashSet<AlgPpcAlgorithmOutputEntity> res = km.pullKeywords(params);
        for (AlgPpcAlgorithmOutputEntity s : res) {
            System.out.println(s.getMatchType());
        }

    }

} 
```

我确信我已经以一种奇怪的方式设置了一些东西，但正如我所说 - 这是我的第一次刺伤。

这是我正在尝试做的事情：

*   在 persistence.xml 中包含 HSQL 数据库的测试配置（以及所有休眠类映射）
*   让 HSQL db 开始进行单元测试，并使用我的项目模式创建内存数据库（如类元素下的 persistence.xml 中所述）。
*   创建实体对象并在测试时将它们添加到测试数据库，以便我可以将数据库用于我的集成测试。

我就是无法通过这个 PersistenceException！

**更新**

好的，所以我意识到我不需要在我的测试用例设置中设置显式 HSQL 服务器，因为这正是我的`persistence-unit`条目的`persistence.xml`用途。我还尝试更改 CATALOG 以使其与我的映射类使用的目录相匹配。我的测试用例的设置现在看起来像：

```
private EntityManagerFactory eMF;
protected EntityManager eM;

@Before
public void setUp() throws Exception {
    LOG.info("Loading hibernate...");
    if (eMF == null) {
        eMF = Persistence.createEntityManagerFactory("TestingPersistenceUnit");
    }

    eM = eMF.createEntityManager();

    EntityTransaction eT = null;
    eT = eM.getTransaction();
    eT.begin();
    Query q = eM.createNativeQuery("ALTER CATALOG PUBLIC RENAME TO TSG");
    q.executeUpdate();
    eT.commit();

    // And also it seems I need to create the schema
    eT = eM.getTransaction();
    eT.begin();
    q = eM.createNativeQuery("CREATE SCHEMA TSG AUTHORIZATION DBA");
    q.executeUpdate();
    eT.commit();
} 
```

但是，我现在遇到了一个新错误，特别是：

```
javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: user lacks privilege or object not found: ALG_PPC_ALGORITHM_OUTPUT 
```

所以我到了某个地方，但似乎没有创建表。请问是不是我的有问题`persistence.xml`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:30:14.700

据我所知（而且我不是 HSQL 专家），`TSG`您在连接 url 中指定的是与目录不同的数据库名称。请参阅[http://hsqldb.org/doc/2.0/guide/databaseobjects-chapt.html#dbc_schemas_schema_objects](http://hsqldb.org/doc/2.0/guide/databaseobjects-chapt.html#dbc_schemas_schema_objects)

> 在 HyperSQL 中，每个数据库只有一个目录。目录的名称是 PUBLIC。您可以使用 ALTER CATALOG RENAME TO 语句重命名目录。所有模式都属于此目录。目录名称与数据库的文件名无关。

正如我所读到的那样，当 HSQL 创建一个数据库时，它会创建一个`PUBLIC`在该数据库中命名的目录和一个`PUBLIC`在该目录中命名的模式。每个 HSQL 数据库只能有一个目录。该单个目录中可以有多个模式。

您得到的错误实际上来自尝试`catalog = "tsg"`在映射中指定。该目录不存在。由于 HSQL 数据库只能包含一个目录，因此您必须将该`PUBLIC`目录重命名为`TSG`（或更改您的映射）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:09:30.410

您在 URL 中指定服务器名称，但尝试使用导致问题的内存数据库。

尝试使用 DB URL：

```
 jdbc:hsqldb:mem:tsg 
```

IE

```
 <property name="hibernate.connection.url" value="jdbc:hsqldb:mem:tsg"/> 
```

也用于`ALTER CATALOG RENAME TO tsg`更改默认目录名称 (PUBLIC)。

编辑：要自动创建模式，请在下面更新 persistence.xml（hibernate.hbm2ddl.auto 代替 hbm2ddl.auto）

```
 <property name="hibernate.hbm2ddl.auto" value="create-drop"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T13:38:33.020

您可以通过将 orm.xml 文件放入 src/test/resources/META-INF 来覆盖单元测试的实体映射（如果使用 maven 布局）。在此您可以覆盖 JPA 注释映射。根据您的需要，您只需要覆盖表格位置，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd" version="1.0">

  <entity class="com.foo.api.models.tsg.AlgPpcAlgorithmOutputEntity">
    <table name="alg_ppc_algorithm_output"/>
  </entity>

</entity-mappings> 
```

这会将您的表放入 hsqldb 数据库的默认公共目录中，因此您不必更改 hsqldb 方案。当您的单元测试使用包含具有相同名称的表的多个目录时，它甚至可能会起作用，因为您只需在表名称属性中提供不同的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T19:54:06.360

设置中有明显错误。连接 URL 必须指向服务器：

```
<property name="hibernate.connection.url" value="jdbc:hsqldb:hsql://localhost/tsg"/> 
```

# wpf - UserControl 根据数据类型更新图像

> ID：13367655
> 
> 赞同：1
> 
> 时间：2012-11-13T19:47:38.933
> 
> 标签：wpf, image, mvvm, resourcedictionary

我有一个显示客户、公司或员工信息的程序。我想在此图像旁边显示一个图标，该图标会根据我显示的信息类型（客户、公司或员工）而变化。

我的资源字典中有以下设置来指定图像：

```
<ImageSource x:Key="CompanyIcon">../Images/companies_32.png</ImageSource>
<ImageSource x:Key="EmployeeIcon">../Images/employee_32.png</ImageSource>
<ImageSource x:Key="CustomerIcon">../Images/customer_32.png</ImageSource> 
```

在我的视图模型中，我想根据我正在使用的数据类型分配图像。例如，如果我正在查看公司的信息（使用 EF 4.5 的“公司”类型的 DBContext），我想将图像设置为“公司图标”的图像。

如何将图像分配给视图模型（并在我在“公司”、“员工”或“客户”DBContext 类型之间更改时更改它），然后将此图像绑定到视图中的占位符（它将显示在网格列）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:01:20.253

我会使用一个基于对象类型`DataTrigger`设置的转换器，并使用一个返回的转换器来获取类型`Image.Source``typeof(value)`

```
<Style x:Key="MyStyle" TargetType="{x:Type Image}">
    <!-- Default Value -->
    <Setter Property="Source" Value="{StaticResource CompanyIcon}" />

    <Style.Triggers>
        <DataTrigger Binding="{Binding Converter={StaticResource ObjectToTypeConverter}}" 
                     Value="{x:Type local:Employee}">
            <Setter Property="Source" Value="{StaticResource EmployeeIcon}" />
        </DataTrigger>
        <DataTrigger Binding="{Binding Converter={StaticResource ObjectToTypeConverter}}" 
                     Value="{x:Type local:Customer}">
            <Setter Property="Source" Value="{StaticResource CustomerIcon}" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

我通常使用的转换器如下所示：

```
public class ObjectToTypeConverter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
            return null;

        return value.GetType();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:54:33.630

我所做的是在 VM 中有一个指向图像位置的字符串属性（不知道这是否是最好的方法，但它对我来说效果很好）：

```
private string _imageSource;
public string ImageSource 
{
   get
   {
     return _imageSource;
   }
   set
   {
      _imageSource = value;
      NotifyPropertyChanged(() => ImageSource);
   }

}

public void SetImage()
{
    If (customer)
        ImageSource = "../Images/companies_32.png";
    ...
} 
```

在 XAML 中：

```
<Image Source="{Binding ImageSource}" .../> 
```

# ruby-on-rails - 在 Rails 中使用 ActiveModel::Serializer - JSON 数据在 json 和 index 响应之间存在差异

> ID：13367656
> 
> 赞同：4
> 
> 时间：2012-11-13T19:47:43.220
> 
> 标签：ruby-on-rails, ruby, json, mongoid, active-model-serializers

我正在使用[`active_model_serializers`](https://github.com/josevalim/active_model_serializers)gem 来控制序列化数据，并看到一些奇怪的行为。我的代码如下所示：

### 模型和序列化器

```
class User
  include Mongoid::Document
  field :first_name, :type => String
  field :last_name,  :type => String

  def full_name
    first_name + " " + last_name
  end
end

class UserSerializer < ActiveModel::Serializer
  attributes :id, :first_name, :last_name, :full_name
end 
```

### 控制器

```
class UsersController < ApplicationController
  respond_to :json, :html

  def index
    @users = User.all
    respond_with @users
  end
end 
```

### 视图（app/views/users/index.html.erb）

```
...
<script type="text/javascript">
  $(function(){
    // using a backbone collection to manage data
    App.users = new App.Collections.Users(<%= @users.to_json.html_sage %>);
  });
</script> 
```

现在，当我渲染视图时，我看到`full_name`我的数据中缺少该属性（通过模型中的方法生成）：

```
{
  "id": 2,
  "first_name": "John",
  "last_name": "Doe"
} 
```

当我访问`/users.json`（我`resources :users`的`routes.rb`文件中有）时，我看到了正确的 JSON：

```
{
  "id": 2,
  "first_name": "John",
  "last_name": "Doe",
  "full_name": "Jonn Doe"
} 
```

我看不出我可能做错了什么——任何输入都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T10:10:17.337

您没有在 HTML 视图中使用序列化程序。试试这个：

`App.users = new App.Collections.Users(<%= UserSerializer.new(@users).to_json.html_safe %>);`

这样做的原因是`respond_with`方法中提取了序列化程序，序列化程序[不会覆盖](https://github.com/rails-api/active_model_serializers#getting-the-old-version)您的`.to_json`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T16:42:53.453

@Gagan 这对我有用：

`App.users = new App.Collections.Users(<%= ActiveModel::ArraySerializer.new(@users).to_json.html_safe %>);`

# c++ - 使用基数排序检查索引

> ID：13367659
> 
> 赞同：1
> 
> 时间：2012-11-13T19:47:53.947
> 
> 标签：c++, recursion, digits, radix-sort

我已经阅读了基数排序的实现，它适用于小于十的 int 数据类型，即它们由一个 sig-fig 代替。（例如 1, 0, 3, 4, 9,... 只是为了清楚）。这个实现并不太难，但是大于 10 的数字呢？如何在第一遍仅比较一个位的数字，然后在第二遍的十位数字进行比较，依此类推，而无需将数组元素显式转换为字符串或字符类型。（或者这只是必要的？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:01:29.163

您始终可以将第 n 个数字拉为 v/(10**(n-1)) % 10。

从一位数基数排序到多位通用排序器并非易事。根据您处理数字的顺序，您要么最终跟踪组边界，要么必须使用“稳定”变体。

# rpm - 安装 rpm 两次会更改文件日期/时间吗？

> ID：13367661
> 
> 赞同：0
> 
> 时间：2012-11-13T19:48:04.840
> 
> 标签：rpm

我使用“rpm -ivh --force mine.rpm”在我的系统上安装 rpm，但我注意到当我在同一个 rpm 上运行两次时，我没有看到文件日期发生变化。这是预期的吗？我的意思是文件日期/时间是“ls -l”显示的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:51:22.963

当然不是。RPM 与任何其他存档一样 - 文件日期将是文件的构建日期（在 RPM 构建机器上）。使用“ `--force`”是另一个问题的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T19:27:59.863

**好的，但是为什么在这种情况下我会得到“最后更改时间”值的**一致更新？

这是了解何时安装 rpm 包的可靠方法吗？我必须将“ **hp.drv.gz** ”文件与另一个文件进行比较，“ **hp.drv.gz** ”由 rpm 包管理器更新。

```
rm /usr/share/cups/ppd/hp/hp.drv.gz
rpm -U --force /root/packages/print-driver-data-1.2.15-1.armv7l.rpm
stat -c "%x %y %z" /usr/share/cups/ppd/hp/hp.drv.gz 
2013-05-21 22:30:50.000000000 +0400 2013-05-21 22:30:50.000000000 +0400 2013-05-21 23:23:26.320005301 +0400

rpm -U --force /root/packages/print-driver-data-1.2.15-1.armv7l.rpm
stat -c "%x %y %z" /usr/share/cups/ppd/hp/hp.drv.gz 
2013-05-21 22:30:50.000000000 +0400 2013-05-21 22:30:50.000000000 +0400 2013-05-21 23:24:42.715005338 +0400 
```

# ios - 如何在以下词典中获取美国的所有城市？

> ID：13367662
> 
> 赞同：1
> 
> 时间：2012-11-13T19:48:08.087
> 
> 标签：ios, nsarray, nsdictionary

我有下面的字典，我想访问特定国家的所有城市。所以如果我在下面选择美国，我想访问休斯顿的达拉斯。例如，我有以下功能，但不确定如何获取国家/地区的所有城市。

```
-(NSArray*) fetchCitiesFromLocationDictionary:(NSMutableDictionary *)locationDictionary usingCountry:(NSString *)country
{

}

{
    509f3a914d026b589ba3a090 =     {
        coordinates =         {
            latitude = "29.76429";
            longitude = "-95.3837";
        };
        country = USA;
        id = 509f3a914d026b589ba3a090;
        name = Houston;
        state = Texas;
    };
    509f3b3a4d026b589ba3a091 =     {
        coordinates =         {
            latitude = "3.138722";
            longitude = "101.686849";
        };
        country = Malaysia;
        id = 509f3b3a4d026b589ba3a091;
        name = "Kuala Lumpur";
    };
    509f475b4d026b589ba3a093 =     {
        coordinates =         {
            latitude = "32.803468";
            longitude = "-96.769879";
        };
        country = USA;
        id = 509f475b4d026b589ba3a093;
        name = Dallas;
        state = Texas;
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:53:47.207

按照我的阅读方式，您可以遍历这些值（使用`NSDictionary.allValues`），如果 value.country=USA，则将 value.name 添加到您的返回列表 (NSMutableArray)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:55:01.180

尝试这样的事情：

```
NSDictionary *dictionary = [NSDictionary dictionary];
NSMutableArray *cities = [NSMutableArray array];
for (NSDictionary *individualDictionary in dictionary)
{
    if ([[individualDictionary objectForKey:@"country"] isEqualToString:@"USA"])
        [cities addObject:[individualDictionary objectForKey:@"name"]];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:22:17.223

两个答案都很好，但我提出了一个更好的答案（IMO：D）

1 行

```
id matches = [[dictOfDicts allValues] filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"country=='USA'"]]; 
```

* * *

工作示例

```
int main(int argc, char *argv[]) {
    @autoreleasepool {
        id dictOfDicts = @{@"1":@{@"country":@"USA", @"name":@"test"}, @"2":@{@"country":@"azUSA", @"name":@"test"}, @"3":@{@"country":@"USA", @"name":@"test"}, @"4":@{@"country":@"adsaUSA", @"name":@"test"}};

        NSLog(@"%@", [[dictOfDicts allValues] filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"country=='USA'"]]);
    }
} 
```

# ajax - 在 Google CSE v2 中获取查询字符串

> ID：13367669
> 
> 赞同：3
> 
> 时间：2012-11-13T19:48:33.910
> 
> 标签：ajax, google-custom-search

我正在使用 Google CSE v2，我需要获取用户输入的查询。问题是它是ajax，并且查询不在url中。

有谁知道解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:46:04.057

首先，当你创建搜索框时，你需要给它一个“gname”属性，这样你就可以在你的javascript中识别它，就像这样：

```
<gcse:searchbox gname="storesearch"></gcse:searchbox>
<gcse:searchresults gname="storesearch"></gcse:searchresults> 
```

或者，如果您使用的是 html5 样式标签（除非您有理由不这样做，否则您应该这样做）：

```
<div class="gcse-searchbox" data-gname="storesearch"></div>
<div class="gcse-searchresults" data-gname="storesearch"></div> 
```

（将“storesearch”替换为您要用于标识此自定义搜索的任何名称。）

更多信息在这里：[https ://developers.google.com/custom-search/docs/element#supported_attributes](https://developers.google.com/custom-search/docs/element#supported_attributes)

然后，您可以访问自定义搜索元素并获取当前查询，如下所示：

```
var cseElement = google.search.cse.element.getElement('storesearch'),
query = cseElement.getInputQuery(); 
```

或者，如果您不再需要对元素的引用，显然可以将其合并为一行：

```
var query = google.search.cse.element.getElement('storesearch').getInputQuery(); 
```

该部分的文档在这里：[https ://developers.google.com/custom-search/docs/element#cse-element](https://developers.google.com/custom-search/docs/element#cse-element)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T19:31:08.963

我知道这已经被正确回答了。但是对于那些也在寻找一个简单的 JS 函数来实现这一点的人来说，给你。将要从查询字符串中提取的变量的名称传递给它。

```
var qs = (function(a) {
  if (a == "") return {};
  var b = {};
  for (var i = 0; i < a.length; ++i) {
    var p=a[i].split('=');
    if (p.length != 2) continue;
      b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
  }
  return b;
})(window.location.search.substr(1).split('&')); 
```

# usb - 如何设置USB声卡的音量？

> ID：13367677
> 
> 赞同：0
> 
> 时间：2012-11-13T19:48:50.720
> 
> 标签：usb, driver, linux-device-driver

在编程甚至直接与驾驶员交谈时，我都是新手。我想做的事情是将我的 Raspberry Pi 与 5.1 外置 USB 声卡连接起来。我真的很想为此使用 Creative Sound Blaster X-Fi Surround Pro，但 Creative 仅提供 Windows 驱动程序。这基本上意味着我将不得不编写自己的驱动程序。虽然我认为进行音频播放会很容易（我一生中做过大量的音频处理），​​但我不知道如何设置 USB 卡的音量。老实说，我最恼火的是 Sound Blaster 有自己的外部音量控制（这是我使用它的主要原因）。只需在比特流上应用一个简单的增益因子就非常容易。

我的问题是：是不是我只需要设置系统音量，而声卡上的音量控制只是将值传输到 USB 主机，然后我必须理解这些值？如果您不知道 Sound Blaster 卡，那会是标准的做事方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T08:38:06.693

我有相同的声卡，并且对 Raspberry Pi 做同样的事情。您正在寻找的命令是：

```
$ alsamixer 
```

这将打开一个终端友好的 GUI，用于修改音频输出音量。您应该会在 USB 音频旁边看到 Raspberry Pi 板载音频驱动程序*BCM2835和相关设备。*

或者，您可以使用简单的 amixer 命令设置音量：

```
$ amixer -c 0 set Master 100% 
```

它将卡 0 的音量设置为 100%。

USB声卡很可能没有被选为默认值并且是卡1，而不是卡0。

有关 RasPi / USB 音频设置的更多信息，请查看以下指南：

*   [http://drewlustro.com/hi-fi-audio-via-airplay-on-raspberry-pi](http://drewlustro.com/hi-fi-audio-via-airplay-on-raspberry-pi)
*   [http://audioplastic.org/blog/2013/01/10/AP1/](http://audioplastic.org/blog/2013/01/10/AP1/)

# entity-framework - 如何配置具有鉴别器值的实体外键？

> ID：13367683
> 
> 赞同：2
> 
> 时间：2012-11-13T19:49:12.590
> 
> 标签：entity-framework, code-first

假设我有以下三个表：

```
Products
- Id
- Price

Categories
- Id
- Date

Descriptions 
- Type
- Id
- Description 
```

描述用于产品和类别。这就是为什么我们有作为鉴别器的列类型。例如，对于产品 Type=1 和类别 Type=2。

首先使用代码映射这些关系的适当方法是什么？我看到一个使用 TPH 创建抽象 Description 类和子 CategoryDe​​scription 和 ProductDescription 类的选项。还有其他选择吗？

# linux - 使用 Linux 故障注入框架

> ID：13367688
> 
> 赞同：15
> 
> 时间：2012-11-13T19:49:42.353
> 
> 标签：linux, debugging, linux-kernel, code-injection, fault

我正在尝试使用 Linux 错误注入框架来注入页面分配错误。我正在尝试使用`failcmd.sh`随 Linux 内核提供的脚本`tools/testing/fault-injection/`。

将变量设置`FAILCMD_TYPE`为后`fail_page_alloc`，我正在运行以下命令：

```
./failcmd.sh --times=-1 --interval=1 --verbose=2 <program_to_be_run_with_fi>. 
```

我尝试过的所有程序都运行良好，尽管我将详细设置为 2，但我没有得到任何调试信息。我在 Ubuntu 12.04.1 上使用内核 3.2.0-32。

有没有人有过 Linux 故障注入的经验？

# html - 如何填充 100% 的绝对定位 div？(IE7+)

> ID：13367689
> 
> 赞同：6
> 
> 时间：2012-11-13T19:49:44.410
> 
> 标签：html, css, internet-explorer, internet-explorer-7

> **可能重复：**
> [IE7 中的 CSS 高度 100%](https://stackoverflow.com/questions/8160417/css-height-100-in-ie7)

我想在一个被子 div 填充到 100% 的网页上有一个居中的块。

这是我的 HTML 代码：

```
<div id="parent">
    <div id="child"></div>
</div> 
```

这是我的CSS：

```
#parent {
   position: absolute;
   background-color: blue;
   top: 2em;
   left: 4em;
   bottom: 3em;
   right: 2em;  
}

#child {
   position: relative;
   background-color: red;
   height: 100%;   
} 
```

这是一个 JSfiddle：http: [//jsfiddle.net/XMS2G/1/](http://jsfiddle.net/XMS2G/1/)

问题是在 Internet Explorer 7 中，浏览器不会导致子 div 扩展到整个父 div。如果不使用 Javascript，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T19:55:51.250

考虑`position:absolute`也用于儿童。然后就用`top:0px; bottom:0px; right:0px; left:0px;`

我认为它会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T19:55:42.003

您需要给孩子`position: absolute`并设置`left`, `right`, `top`, `bottom`to `0`。

**[看到它在行动](http://jsfiddle.net/L6X9v/)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T19:55:12.287

您可能必须为父 DIV 设置硬编码宽度才能使 IE7 表现良好。居中可以通过“margin-left: auto;”来完成 “右边距：自动；” css。

# cocos2d-iphone - UIkit 与 Cocos2d 中的 Xcode 多个动画

> ID：13367692
> 
> 赞同：0
> 
> 时间：2012-11-13T19:49:56.803
> 
> 标签：cocos2d-iphone, uikit, core-animation

我目前正在 Xcode 中创建一个包含大量动画的游戏。用CoreAnimation做那些动画对我来说效率会不会太低，如果图片太多会不会有内存问题？

我想知道是否需要切换到 Cocos2d 以便可以使用精灵表和其他工具。游戏也非常注重音效。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:04:15.673

如果是游戏则不要使用 UIKit。

UIKit 在渲染大量动画图像时并不是很快。游戏引擎肯定会成为几乎所有游戏的更好选择。

# c# - 从 IQueryable 出发 到字符串

> ID：13367694
> 
> 赞同：1
> 
> 时间：2012-11-13T19:50:09.230
> 
> 标签：c#, asp.net-mvc, linq, model

我有一个模型，如下所示：

```
[Table("WebsiteText")]
public class WebsiteTextModel
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }

    public string WebsiteSection { get; set; }

    [DataType(DataType.MultilineText)]
    public string TextToDisplay { get; set; }
} 
```

我有一个 DataContext 类，如下所示：

```
public class WebsiteTextContext : DbContext
{
    public WebsiteTextContext()
        : base("DefaultConnection")
    {

    }

    public DbSet<WebsiteTextModel> WebsiteText { get; set; }
} 
```

我想使用 LINQ 为我的主页获取网站文本，并将其填充到 ViewBag 中，所以我正在尝试这个：

```
public ActionResult Index()
{
    var context = new WebsiteTextContext();

    var result = from x in context.WebsiteText
                 where x.WebsiteSection == "Home Page"
                 select x.TextToDisplay;

    ViewBag.Message = result;

    return View();
} 
```

但是 var 是 IQueryable，我不知道如何将其转换为字符串。这不起作用：

```
string result = from x in context.WebsiteText
    where x.WebsiteSection == "Home Page"
    select x.TextToDisplay; 
```

这不起作用：

```
var result = from x in context.WebsiteText
    where x.WebsiteSection == "Home Page"
    select x.TextToDisplay.ToString; //It's still IQueryable<String> 
```

这不起作用：

```
var result = from x in context.WebsiteText
    where x.WebsiteSection == "Home Page"
    select x.TextToDisplay.ToArray; //It's now IQueryable<char[]> 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:51:50.897

```
string result = (from x in context.WebsiteText
where x.WebsiteSection == "Home Page"
select x.TextToDisplay).FirstOrDefault(); 
```

你也有`First`and `Single`and`SingleOrDefault`

查看所有内容并选择最适合您的版本。

# mysql - 如何使用“group by”子句修复查询中的 count()？

> ID：13367696
> 
> 赞同：0
> 
> 时间：2012-11-13T19:50:11.047
> 
> 标签：mysql, sql, delphi, zeos

我有一个函数，它获取一个 SQL 代码并在其中插入一个计数字段并执行查询以返回其中的行数。目标是拥有一个动态 SQL 代码，并且无论它有什么代码都能够获得它的记录计数，因为我在注册表过滤器窗口中使用它，我永远不知道可能会生成什么代码，因为用户可以添加尽可能多的代码根据他/她的需要过滤。

但是当我使用该`group by`子句时，结果是错误的，因为它正在计算由于在许多`join`连接上使用而出现的主注册表的次数。

上面代码的结果应该只有一行，其中的列`10`作为结果，但是我得到一个新表，其中第一列`2`在第一行中，而`1`在其他行中。

如果我取消该`group by`子句，我将收到 a`11`作为计数结果，但第一行将被计算两次。

我应该怎么做才能获得单行和正确的数字？

```
SELECT 
 COUNT(*) QUERYRECORDCOUNT, // this line appears only in the Count() function 
 ARTISTA.*,
 CATEGORIA.NOME AS CATEGORIA,
 ATIVIDADE.NOME AS ATIVIDADE,
 LOCALIDADE.NOME AS CIDADE,
 MATRICULA.NUMERO AS MAP

FROM
 ARTISTA
 LEFT JOIN PERFIL ON PERFIL.REGISTRO = ARTISTA.ARTISTA_ID
 LEFT JOIN CATEGORIA ON CATEGORIA.CATEGORIA_ID = PERFIL.CATEGORIA
 LEFT JOIN ATIVIDADE ON ATIVIDADE.ATIVIDADE_ID = PERFIL.ATIVIDADE
 LEFT JOIN LOCALIDADE ON LOCALIDADE.LOCALIDADE_ID = ARTISTA.LOCAL_ATIV_CIDADE
 LEFT JOIN MATRICULA ON MATRICULA.REGISTRO = ARTISTA.ARTISTA_ID

WHERE 
 ((ARTISTA.SIT_PERFIL <> 'NORMAL') AND (ARTISTA.SIT_PERFIL <> 'PRIVADO'))
GROUP BY
 ARTISTA.ARTISTA_ID
ORDER BY 
 ARTISTA.ARTISTA_ID; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:55:12.240

这总是为您提供任何查询的行数：

```
Select count(*) as rowcount from
(

     Paste your query here

) as countquery 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T19:57:35.830

由于您是 GROUPING BY `ARTISTA.ARTISTA_ID`，因此将返回每个值`COUNT(*) QUERYRECORDCOUNT`的记录数。`ARTISTA.ARTISTA_ID`

如果您想要 GLOBAL 计数，那么您需要使用嵌套查询：

```
SELECT COUNT(*) AS QUERYRECORDCOUNT 
    FROM (SELECT 
     ARTISTA.*,
     CATEGORIA.NOME AS CATEGORIA,
     ATIVIDADE.NOME AS ATIVIDADE,
     LOCALIDADE.NOME AS CIDADE,
     MATRICULA.NUMERO AS MAP

    FROM
     ARTISTA
     LEFT JOIN PERFIL ON PERFIL.REGISTRO = ARTISTA.ARTISTA_ID
     LEFT JOIN CATEGORIA ON CATEGORIA.CATEGORIA_ID = PERFIL.CATEGORIA
     LEFT JOIN ATIVIDADE ON ATIVIDADE.ATIVIDADE_ID = PERFIL.ATIVIDADE
     LEFT JOIN LOCALIDADE ON LOCALIDADE.LOCALIDADE_ID = ARTISTA.LOCAL_ATIV_CIDADE
     LEFT JOIN MATRICULA ON MATRICULA.REGISTRO = ARTISTA.ARTISTA_ID

    WHERE 
     ((ARTISTA.SIT_PERFIL <> 'NORMAL') AND (ARTISTA.SIT_PERFIL <> 'PRIVADO'))
    GROUP BY
     ARTISTA.ARTISTA_ID
    ORDER BY 
     ARTISTA.ARTISTA_ID); 
```

在这种情况下，您可能不需要选择那么多列。

如果您需要检索带有详细信息的所有记录计数，那么最好使用两个单独的查询。

# objective-c - 可可将焦点切换到应用程序，然后将其切换回来

> ID：13367703
> 
> 赞同：9
> 
> 时间：2012-11-13T19:50:54.757
> 
> 标签：objective-c, macos, cocoa, macos-carbon

我想创建 OS X 应用程序，它显示并使用系统范围的热键获得焦点，然后，使用相同的热键它应该消失并*切换焦点*。就像阿尔弗雷德一样。

问题是我无法专注于以前使用的应用程序。通过专注于我的意思是我不能继续在以前的应用程序中输入。

这是我的热键处理程序：

```
OSStatus OnHotKeyEvent(EventHandlerCallRef nextHandler,EventRef theEvent, void *userData)
{
    AppDelegate *me = (__bridge AppDelegate*) userData;

    EventHotKeyID hkCom;

    GetEventParameter(theEvent, kEventParamDirectObject, typeEventHotKeyID, NULL, sizeof(hkCom), NULL, &hkCom);

    if([[me window] isVisible]) {
        [[NSApplication sharedApplication] activateIgnoringOtherApps:NO];
        [[me window] orderOut:NULL];
    }
    else {
        [[NSApplication sharedApplication] activateIgnoringOtherApps:YES];
        [[me window] makeKeyAndOrderFront:nil];

    }

    return noErr;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T19:59:32.177

在这两种情况下都很好激活......你应该停用。在您激活之前，请保存旧的活动应用程序

```
 _oldApp = [[NSWorkspace sharedWorkspace] frontmostApplication]; 
```

稍后激活

```
 [_oldApp activateWithOptions:NSApplicationActivateIgnoringOtherApps]; 
```

--- 完整来源

```
@implementation DDAppDelegate {
    NSStatusItem *_item;
    NSRunningApplication *_oldApp;
}

- (void)applicationWillFinishLaunching:(NSNotification *)notification {
    NSLog(@"%@", [[NSWorkspace sharedWorkspace] frontmostApplication].bundleIdentifier);

    _item = [[NSStatusBar systemStatusBar] statusItemWithLength:NSSquareStatusItemLength];
    _item.title = @"TEST";
    _item.target = self;
    _item.action = @selector(toggle:);
}

- (void)applicationWillBecomeActive:(NSNotification *)notification {
    NSLog(@"%@", [[NSWorkspace sharedWorkspace] frontmostApplication].bundleIdentifier);
}

//---

- (IBAction)toggle:(id)sender {
    if(!_oldApp) {
        NSLog(@"%@", [[NSWorkspace sharedWorkspace] frontmostApplication].bundleIdentifier);
        _oldApp = [[NSWorkspace sharedWorkspace] frontmostApplication];
        [NSApp activateIgnoringOtherApps:YES];
    }
    else {
        [_oldApp activateWithOptions:NSApplicationActivateIgnoringOtherApps];
        _oldApp = nil;
    }
}
@end 
```

# jsf-2 - 从许多菜单中选择项目

> ID：13367708
> 
> 赞同：0
> 
> 时间：2012-11-13T19:51:10.550
> 
> 标签：jsf-2, primefaces

好的，我有一个简单的许多菜单，我称之为听众

```
<p:selectManyMenu style="width: 100%;" id="cmbsectores" valueChangeListener="#{mbcompletado.removeItem}">                                            
      <f:selectItems value="#{mbcompletado.sectores}"/>    
      <f:ajax update="@this"/>
</p:selectManyMenu> 
```

我正在寻找可以使用 ValueChangeEvent 传递作为参数来检测选择了哪个项目的方法？所以我可以使用我的业务逻辑！

我需要使用ajax标签吗？我在我正在使用的框架 primeface 中发现了一个 itemSelect 事件，但它仅适用于图表组件！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:07:25.977

由于您已经在使用 PrimeFaces 使用`p:ajax`而不是`f:ajax`. `event`已设置为适当的事件 (valueChanged) 。

要检测属性的选定值是必要`selectManyMenu`的：`value`

```
<p:selectManyMenu style="width: 100%;" id="cmbsectores"
    value="#{mbcompletado.selectedSectores}">                                            
    <f:selectItems value="#{mbcompletado.sectores}"/>    
    <p:ajax/>
</p:selectManyMenu> 
```

您可以完全删除 valueChangeListener 侦听器。

有关更完整的示例，请参阅[SelectManyMenu](http://www.primefaces.org/showcase/ui/selectManyMenu.jsf)。

**编辑：**

在您的支持 bean`mbcompletado.selectedSectores`中应该指向与您的`mbcompletado.sectores`. 例如，如果您`sectores`是 a `List`of `TypeA`，`selectedSectores`则应该也是`List`同类型 ( `TypeA`) 的 a。

类似的 backing-bean 结构可以在以下示例[SelectManyCheckbox](http://www.primefaces.org/showcase/ui/selectManyCheckbox.jsf)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T23:30:07.187

您需要`<f:ajax listener>`（或在这种情况下更好`<p:ajax listener>`）方法。服务于完全不同的`ValueChangeListener`目的，只应在您真正对旧值和新值*都*感兴趣时使用，而不是在您只对新值感兴趣时使用。

例如

```
<p:selectManyMenu value="#{bean.selectedSectors>
    <f:selectItems value="#{bean.availableSectors}"/>    
    <p:ajax listener="#{bean.selectedSectorsChanged}" />
</p:selectManyMenu> 
```

和

```
private List<String> selectedSectors;
private List<String> availableSectors;

public void selectedSectorsChanged() {
    System.out.println("Selected sectors are: " + selectedSectors); // Look, JSF has already set it.
    // ...
} 
```

### 也可以看看：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener)

# python - 安全的“通过电子邮件验证”系统的工作流程是什么？

> ID：13367709
> 
> 赞同：12
> 
> 时间：2012-11-13T19:51:13.560
> 
> 标签：python, email, flask, email-verification

我正在考虑一个论坛类型的系统，它允许用户在没有帐户但通过电子邮件验证的情况下发布/编辑帖子。

因此，您将填写表格、提供电子邮件地址、提交，然后在电子邮件中收到一个链接，该链接将“激活”您的帖子。同样的事情要编辑。单击“编辑”，接收带有链接的电子邮件，链接将带您编辑表单。

我正在尝试了解安全执行此操作的确切步骤。如何创建将在一段时间后过期的链接？我如何确保它来自电子邮件地址，而不仅仅是一些通过潜在网址循环的机器人？

任何帮助开始正确的方向表示赞赏。

我在[Heroku上使用 Python、](https://www.heroku.com/) [flask](http://flask.pocoo.org/)、[Postgres](https://www.postgresql.org/)。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T20:15:21.020

由于您使用的是烧瓶，您可能想查看它的危险库：

[https://itsdangerous.palletsprojects.com/en/2.0.x/](https://itsdangerous.palletsprojects.com/en/2.0.x/)

使用 itsdangerous，工作流程可能类似于：

1.  用户输入电子邮件并发布。
2.  `itsdangerous`使用可以绑定到特定电子邮件的模块生成安全链接
3.  一旦用户收到电子邮件和步骤 2 中生成的特定 URL，他们就可以单击它来确认帖子。您甚至可以在用户单击此 URL 时添加额外的检查层，您可以要求他们再次输入他们的电子邮件地址，然后将其与与该 URL 关联的电子邮件进行匹配。

# python - 如何在 python 中创建一个元组的元组？

> ID：13367710
> 
> 赞同：3
> 
> 时间：2012-11-13T19:51:14.200
> 
> 标签：python

我想结合：

```
A = (1,3,5)
B = (2,4,6) 
```

进入：

```
C = ((1,2), (3,4), (5,6)) 
```

有没有在python中执行此操作的函数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T19:52:09.637

是的：

```
tuple(zip(A, B)) 
```

这就是全部。结果将如下所示（在 Python 2.x 和 3.x 中）：

```
>>> tuple(zip(A, B))
((1, 2), (3, 4), (5, 6)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T19:51:46.500

你想使用[`zip`](http://docs.python.org/2/library/functions.html#zip)：

```
zip((1,3,5),(2,4,6)) 
```

从技术上讲，这将`list`在 python2.x 上返回一个，在 python3.x 上返回一个可迭代对象。要获得一个`tuple`元组，您只需将整个内容包含在`tuple(zip((1,3,5),(2,4,6)))`

# c# - C# TcpListener 外部 IP

> ID：13367711
> 
> 赞同：0
> 
> 时间：2012-11-13T19:51:15.567
> 
> 标签：c#, sockets, tcp, tcpclient, tcplistener

我正在创建一个 TcpListener，我希望其他计算机的客户端能够加入我的监听器。

我已经阅读并理解我必须进行端口转发，但这对我来说没有任何意义 - 当我发布我的应用程序时，我希望其他人创建这个监听器，我不能告诉他们做端口转发。

是否有可能创建一个客户端无需端口转发就可以加入的 TcpListener？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:07:00.013

好吧，让我们先尝试清除一些东西。

使用端口转发的主要原因是因为您在内部网络前面有一个 NAT 路由器。设置端口转发是指示 NAT 路由器将流量转发到公共接口上的某个端口到内部计算机上的端口。

如果您没有 NAT 路由器，则不需要端口转发。

今天的许多路由器都支持[UPnP](http://en.wikipedia.org/wiki/Universal_Plug_and_Play)，这是一种请求路由器创建特定端口转发的技术。一个合适的库可能是[ManagedUPnP](http://managedupnp.codeplex.com/)。

但是，您仍然需要弄清楚路由器的公共 IP 以及您打开的端口，并将其与其他应用程序通信。

如果您的路由器不允许 UPnP 或存在其他防火墙规则，则您无法正确设置端口转发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:31:45.017

您可以在 PC 上创建服务器应用程序和转发端口。客户端应用程序（您将发布的这个）将连接到您的电脑，以便它们可以在 NAT 上。您也可以将您的应用程序与一些 php/asp 页面结合起来，但这取决于您要发送的数据。如果它是某种 PC 统计数据，如正常运行时间、硬件等。您只需在客户端应用程序中使用 http 查询到您创建的网站脚本（例如 mypage.com/?uptime=100&ram=2gb&hash=xxxx 等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:44:20.480

只有服务器（接受 TCP 请求的计算机）需要转发端口。

常见的模型是您（服务的开发者/生产者）托管服务器。然后客户（订阅您的服务的人）使用 IP 或 URL 连接到您的服务。如果您的服务位于防火墙后面（您的计算机和 Internet 调制解调器之间有一个路由器），那么您将不得不转发端口。您可能还必须在 Window 的防火墙中打开端口，但我希望您已经这样做了。在这个模型中，客户不必对他们的路由器做任何事情（就像使用网络浏览器一样）。

如果您要在客户托管服务的地方制造产品，那么他们将不得不处理端口问题。在这种情况下，您可以尝试像 Albin Sunnanbo 建议的 ManagedUPnP，或者将它们重定向到解释如何设置端口转发的众多站点之一。

# c# - 拆分方法有问题

> ID：13367717
> 
> 赞同：1
> 
> 时间：2012-11-13T19:51:57.457
> 
> 标签：c#

我正在尝试使用 split 方法将学生与分数分开，然后如果分数是好或坏加上你的负 100，而不是输出一条消息。split 方法无法将 char 转换为字符串

```
class Program
    {   //Here we declare some Const variables 
        const int MAX = 1;
        const int ZERO = 0;
        const int ONE = 1;

        static void Main(string[] args)
        {   //here we declare the variables and the 2 arrays for the main method

            int perfecto = 100;
            string input;
            string[] student = new string[MAX];
            int[] score = new int[MAX];            

            //this will be the introduction for the program nice and friendly.
            Console.WriteLine("Welcome to the Test score calculator!!");

                    Console.Write("\nPlease Input your name and your score, seperated by a space: ");
                    input = Console.ReadLine();

                    Console.WriteLine("Welcome to the Test score calculator!!");
                    Console.Write("\nPlease Input your name and your score, seperated by a space and Press Enter: ");
                    input = Console.ReadLine();

                    //SPLIT METHOD ACTIVATED.. here we call the split method 
                    SplitMethod(input, ref student, ref score);

            //Here we call the output           
            Output(student, score, perfecto);

            Console.ReadLine();
        }
        //Here is the split method. this will take the two kinds of data and split them into 2 arrays
        //the string and the int seperate so that its easyer to make calculations. 
        //also we referenced these arrays 
        static void SplitMethod(string input, ref string[] student, ref int[] score)
        {
            char rules = { ' ', '\r' };
            string splitArray = input.Split();

            //here is the actual split
            student = splitArray[ZERO];
            score = int.Parse(splitArray[]);
            return;
        }     

        static void Output(string[] student, int[] score, int perfecto)
        {         

                //here is the added if statement for the perfect score scenario 
                if (score[i] > perfecto)
                {
                    //here is the output incase someone scores a perfect game
                    Console.WriteLine("\n{0}'s score was {1}*...Congrats {2} you qualify for the TEAM!!!", student[], score[], student[]);
                }
                else
                {
                    //and if they dont it displayes here.
                    Console.WriteLine("\nSorry {0}, {1} is not good enough. \nIm afraid you dont qualify, but keep it up!", student[], score[]);
                }
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:58:08.077

首先，您应该将字符数组声明为数组

```
 char[] rules = { ' ', '\r' }; 
```

其次，您应该将规则传递给您的拆分

```
 string[] splitArray = input.Split(rules); 
```

我相信您还有其他编译器错误。你应该尝试自己做一些

当您提出问题时，您还应该告诉我们您的编译错误是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:58:32.737

阅读有关[String.Split的文档](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

```
string[] splitArray = input.Split(rules); 
```

您还需要修复规则的定义，使其成为 char 数组。再次，查看[文档](http://msdn.microsoft.com/en-us/library/9b9dty7d.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:17:42.913

你的代码有很多缺陷，我纠正了它们。第一个也是最明显的一点是您根本不应该使用数组。即使您想重复输入此名称和分数，也不需要数组，因为用户一次输入一个名称和分数。这是您的代码更改为工作：

```
class Program
    {   

        static void Main(string[] args)
        {   //here we declare the variables and the 2 arrays for the main method

            int perfecto = 100;
            string input;
            string student = string.Empty;
            int score = 0;            

            //this will be the introduction for the program nice and friendly.
            Console.WriteLine("Welcome to the Test score calculator!!");
            Console.Write("\nPlease Input your name and your score, seperated by a space and Press Enter: ");
            input = Console.ReadLine();

            //SPLIT METHOD ACTIVATED.. here we call the split method 
            SplitMethod(input, ref student, ref score);

            //Here we call the output           
            Output(student, score, perfecto);

            Console.ReadLine();
        }
        //Here is the split method. this will take the two kinds of data and split them into 2 arrays
        //the string and the int seperate so that its easyer to make calculations. 
        //also we referenced these arrays 
        static void SplitMethod(string input, ref string student, ref int score)
        {
            char [] rules = { ' ', '\r' };
            string [] splitArray = input.Split(rules);

            //here is the actual split
            if(splitArray.Length>1)
            {
                student = splitArray[0];
                int.TryParse(splitArray[1], out score);
            }
        }     

        static void Output(string student, int score, int perfecto)
        {         
            //here is the added if statement for the perfect score scenario 
            if (score > perfecto)
            {
                //here is the output incase someone scores a perfect game
                Console.WriteLine("\n{0}'s score was {1}*...Congrats {2} you qualify for the TEAM!!!", student, score, student);
            }
            else
            {
                //and if they dont it displayes here.
                Console.WriteLine("\nSorry {0}, {1} is not good enough. \nIm afraid you dont qualify, but keep it up!", student, score);
            }
        }
    } 
```

现在我假设您想对许多输入执行此操作，直到用户输入 end，然后您应该像这样更改 Main 方法：

```
static void Main(string[] args)
        {   //here we declare the variables and the 2 arrays for the main method

            int perfecto = 100;
            string input;
            string student = string.Empty;
            int score = 0;            

            //this will be the introduction for the program nice and friendly.
            Console.WriteLine("Welcome to the Test score calculator!!");
            Console.Write("\nPlease Input your name and your score, seperated by a space and Press Enter, insert END if you want to finish: ");

            while (!(input = Console.ReadLine()).Equals("end", StringComparison.CurrentCultureIgnoreCase))
            {
                SplitMethod(input, ref student, ref score);
                Output(student, score, perfecto);
                Console.Write("\nPlease Input your name and your score, seperated by a space and Press Enter, insert END if you want to finish: ");
            }
            Console.ReadLine();
        } 
```

# virtual-machine - vmware 备份过程

> ID：13367720
> 
> 赞同：1
> 
> 时间：2012-11-13T19:52:15.847
> 
> 标签：virtual-machine, esxi

我正在尝试将位于 ESXi 4.1 主机上的 VM 迁移到 ESXi 5.0 主机，从而完全更改数据存储。我通过 VMware 网站进行了研究，我看到了一些导出 ova 的方法，使用更新管理器，甚至是名为 VEEAM 的 3rd 方工具。我尝试使用 VEEAM，但由于版本限制而失败。是的，我在 4.1 服务器上使用免费版本的 VM。我目前正在测试我们所说的 OVA 方法，但我想我会问什么是最快和最安全的转移方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T11:24:23.660

将两个 ESX 连接到同一个 vCenter，您可以使用 migrate 选项迁移主机和数据存储

# android - Android - 在 ListView 中显示来自数据库的游标结果

> ID：13367721
> 
> 赞同：4
> 
> 时间：2012-11-13T19:52:27.700
> 
> 标签：android, android-listview, simplecursoradapter, android-cursoradapter

我一直试图让我的光标在列表视图中正确显示。它在使用 toast 时正确显示，因此光标可以正确检索数据，但我无法使其以列表格式显示。

每行应为 6 列。

它只显示一行没有数据。我确信这是一个非常基本的问题。也许有人可以告诉我哪里出错了，我将不胜感激。

显示光标.Java

```
public class DisplayCursor extends ListActivity 
{
MyDBManager db = new MyDBManager(this);

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_cursor);

    db.open();
    Cursor cursor = db.getAllRows();
    startManagingCursor(cursor);

    String[] columns = new String[] { MyDBManager.KEY_DESCRIPTION, MyDBManager.KEY_PERCENTAGE, MyDBManager.KEY_PRICE, 
            MyDBManager.KEY_VOLUME, MyDBManager.KEY_VFM, MyDBManager.KEY_QUANTITY };

    int[] to = new int[] { R.id.description,R.id.perc,R.id.price,R.id.units,R.id.vol, R.id.vfm };
    SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, R.layout.row, cursor, columns, to);
    this.setListAdapter(mAdapter);
    db.close();
}   
} 
```

行.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    android:id="@+id/description"
    android:layout_width="140dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="27dp" />

<TextView
    android:id="@+id/vol"
    android:layout_width="30dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/description"
    android:layout_alignBottom="@+id/description"
    android:layout_toRightOf="@+id/description" />

<TextView
    android:id="@+id/perc"
    android:layout_width="30dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/vol"
    android:layout_alignBottom="@+id/vol"
    android:layout_toRightOf="@+id/vol" />

<TextView
    android:id="@+id/price"
    android:layout_width="30dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/perc"
    android:layout_alignBottom="@+id/perc"
    android:layout_toRightOf="@+id/perc" />

<TextView
    android:id="@+id/units"
    android:layout_width="30dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/price"
    android:layout_alignBottom="@+id/price"
    android:layout_toRightOf="@+id/price" />

<TextView
    android:id="@+id/vfm"
    android:layout_width="80dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/units"
    android:layout_alignBottom="@+id/units"
    android:layout_toRightOf="@+id/units" />

</RelativeLayout> 
```

activity_display_cursor.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content">

<ListView android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

<TextView android:id="@android:id/empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/nodata"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:24:56.383

啊，带 CursorAdapter 的 ListView 又来了！第一次摸索并不容易，所以：

您的大部分内容都是正确的，但是，您的 row.xml 需要为要显示的光标中的每一列包含一个视图。CursorAdapter 构造函数中的“layout”参数指定布局文件的 resID；这个文件描述*了一行*。在您的情况下，您可能需要一个包含 6 个 TextViews 的 RelativeLayout，一个用于构造函数的“to”参数中的每个 R.id 值。CursorAdapter 负责将游标列映射到“to”参数中的视图，这就是为什么这些数组的大小必须相同的原因。

activity_display_cursor.xml 布局定义了 ListView。

请注意，我不怎么使用 ListActivity。在常规 Activity 中使用适配器设置 ListView 很容易。此外，API 11 中不推荐使用 startManagingCursor。更好的选择是使用 android.support.v4.content.CursorLoader 和 android.support.v4.widget.SimpleCursorAdapter。

# django - Django selenium 测试在表单输入属性上失败

> ID：13367723
> 
> 赞同：1
> 
> 时间：2012-11-13T19:52:35.313
> 
> 标签：django, selenium, django-testing

嗨，我有一个 Django 表单，其中一个字段根据前一个字段的选择填充。这在手动测试时工作正常，但在使用 selenium 测试时遇到了问题。

这是失败的测试：

```
# --- functional tests --- #
class ProjectFormsTest(LiveServerTestCase):
    def setUp(self):
        self.browser = webdriver.Firefox()
        self.browser.implicitly_wait(3)

    def tearDown(self):
        self.browser.quit()

    def test_project_info_form(self):
        ...        
        wind = self.browser.find_element_by_id('id_wind_speed')
        self.assertEquals('85', wind.text) 
```

因此，我可以看到 selenium 加载浏览器并且该字段按预期填充。我猜问题的根源在于`.text`它不是文本输入表单字段的正确属性，因为它正在返回`u''`.

有谁知道正确的方法是什么？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T22:27:01.070

转换评论：

用于`wind.get_attribute('value')`获取该元素的 value 属性。

从[这个文档页面](http://selenium-python.readthedocs.org/en/latest/api.html#module-selenium.webdriver.remote.webelement)。

# asp.net - asp.net 加密会员密码和用户名检索

> ID：13367725
> 
> 赞同：0
> 
> 时间：2012-11-13T19:52:49.853
> 
> 标签：asp.net, gridview, encryption, asp.net-membership, sqldatasource

我似乎不知道如何通过会员提供商使用 sha1 解密加密密码。

我不能在这里使用 .GetPassword() 方法，因为我正在从 sqldatasource 检索值并将它们放入 gridview 中。

这是网格视图：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="UserId" DataSourceID="SqlDataSource1" 
        EmptyDataText="There are no data records to display." 
        OnSelectedIndexChanged="GridView1_SelectedIndexChanged" >
        <Columns>
            <asp:CommandField ShowDeleteButton="True" ButtonType="Button" />
            <asp:TemplateField HeaderText="Block users">
                <ItemTemplate>
                    <asp:Button runat="server" ID="btnBlock" CommandName="Block" CommandArgument='<%# Eval("UserId") %>'
                        Text="Block" OnClick="btnBlock_Click" Visible='<%# !Convert.ToBoolean(Eval("IsLockedOut")) %>' />
                    <asp:Button runat="server" ID="btnDeblock" CommandName="Deblock" CommandArgument='<%# Eval("UserId") %>'
                        Text="Deblock" OnClick="btnBlock_Click" Visible='<%# Convert.ToBoolean(Eval("IsLockedOut")) %>' />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Username">
                <ItemTemplate>
                    <asp:Label ID="UserId" runat="server" Text='<%# Bind("UserId") %>' OnDataBinding="Decrypt" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="UserId" HeaderText="User id" ReadOnly="True"
                SortExpression="UserId" />
            <asp:BoundField DataField="Email" HeaderText="Email" SortExpression="Email" />
            <asp:BoundField DataField="LastLoginDate" HeaderText="Last login" 
                SortExpression="LastLoginDate" />
            <asp:CheckBoxField DataField="IsLockedOut" HeaderText="Locked" 
                SortExpression="IsLockedOut" />
            <asp:BoundField DataField="FailedPasswordAttemptCount" 
                HeaderText="Failed logins" 
                SortExpression="FailedPasswordAttemptCount" />
            <asp:BoundField DataField="Comment" HeaderText="Comments" 
                SortExpression="Comment" />
        </Columns>
    </asp:GridView> 
```

我已在 Templatefield 中用 itemtemplate 替换了 boundfield。itemtemplate 中的标签绑定到用户名，标签还有一个 OnDataBind="Decrypt" 应该解密标签的 Text 属性中的值。我一直在尝试一些我在网上找到的例子（甚至来自这个论坛），但我对 .net 的理解还没有那么好。这是我在解密（）监听器中尝试的：

```
public void Decrypt(object sender, EventArgs e)
{
    Label lbl = (Label)sender;
    string decrypted = string.Empty;
    UTF8Encoding encode = new UTF8Encoding();
    Decoder Decode = encode.GetDecoder();
    byte[] todecode_byte = Convert.FromBase64String(lbl.Text);
    int charCount = Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);
    char[] decoded_char = new char[charCount];
    Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);
    decrypted = new String(decoded_char);
    lbl.Text = decrypted;
} 
```

我试图先解密用户名，我想这与密码的方法相同。为了消除进一步的问题，这是我在 web.config 中的设置

```
<membership defaultProvider="MembershipProvider">
  <providers>
    <clear/>
    <add name="MembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="GustaafConnectionString" 
         applicationName="Gustaaf" enablePasswordRetrieval="true" enablePasswordReset="false" requiresQuestionAndAnswer="true" 
         requiresUniqueEmail="false" passwordFormat="Encrypted"/>
  </providers>
</membership>
<machineKey validationKey="..." decryptionKey="..." validation="SHA1" decryption="AES"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:00:01.567

SHA1 是一种散列算法，而不是加密算法，并且散列根据定义是一种方式，因此它们无法撤消。因此，您永远不会使用 sha 来“解密”任何东西，更不用说哈希了。

您的数据似乎是由 AES 加密的，而不是 sha。您也将编码与加密混淆了。以下是有关在 .net 中使用 AES 的一些信息：http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.aes.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aes.aspx)

编码就是将字节数据解释为一种或另一种方案（ascii、unicode、UCT-8）中的字符，因此一旦您解密了数据，您可能必须将其编码为字符串以进行显示，但这对于解密来说是次要的.

附录：您可能无法避免使用membership.GetPassword()，因为您的会员数据库实施中使用的加密密钥可能无法检索。您是否考虑过使用对象数据源？然后您可以使用 .GetPassword() 预填充代码中的条目列表并将它们绑定到网格。

# c# - .NET Framework 2.0 和 4.0 Visual Studio 工具箱项

> ID：13367727
> 
> 赞同：1
> 
> 时间：2012-11-13T19:53:07.587
> 
> 标签：c#, visual-studio-2010, visual-studio, visual-studio-2008, custom-controls

我想在 Visual Studio 工具箱中安装两个不同版本的 WinForms 自定义控件：.NET Framework 2.0 版本和 .NET Framework 4.0 一个。我找到了这个专业的解决方案[http://vstudiotoolbox.codeplex.com/](http://vstudiotoolbox.codeplex.com/)但没有涵盖选择正确的 .NET Framework。

我在哪里可以了解更多信息？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:23:37.657

[http://www.lextm.com/2012/08/how-to-install-custom-controls-to-visual-studio-part-i/](http://www.lextm.com/2012/08/how-to-install-custom-controls-to-visual-studio-part-i/)

这涵盖了安装 .NET 2 控件所需的内容。如果你想安装 .NET 4，你可以按照

[http://www.lextm.com/2012/08/how-to-install-custom-controls-to-visual-studio-part-ii/](http://www.lextm.com/2012/08/how-to-install-custom-controls-to-visual-studio-part-ii/)

我的开源项目是一个示例，供您查看如何执行所需的步骤，

[https://github.com/lextm/actionlistwinforms](https://github.com/lextm/actionlistwinforms)

Inno Setup 用于编写安装程序，但这些技巧应该适用于其他安装程序技术。

# jquery - Fancybox Youtube 视频返回“href”错误

> ID：13367729
> 
> 赞同：0
> 
> 时间：2012-11-13T19:53:19.483
> 
> 标签：jquery, video, youtube, fancybox

我正在尝试使用 Fancybox在此网页（ [http://medicalfutures.co.uk.s156312.gridserver.com/2011.php](http://medicalfutures.co.uk.s156312.gridserver.com/2011.php) ）上制作 Youtube 视频，但每次按下链接时，都没有任何反应，并且在我的错误控制台中Chrome 我收到消息“未捕获的类型错误：无法读取未定义的属性‘href’”

有任何想法吗？

编辑：

视频链接位于页面顶部附近（“在此处观看视频”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:31:43.523

啊，问题是 YouTube 链接 - 我有一个不起作用的嵌入式链接

# javascript - 如何从文本框中更新的日期添加日期

> ID：13367730
> 
> 赞同：-1
> 
> 时间：2012-11-13T19:53:27.580
> 
> 标签：javascript, html

我正在使用表单以文本框格式 (mm/dd/yyyy) 输入日期，下一个文本框将输入要添加的天数。这应该会自动计算天数并显示在第三个文本框中。例如

文本框 1：输入日期（月/日/年） 文本框 2：输入天数 文本框 3：文本框 1 值+文本框 3 值

我需要帮助来添加日期。

我尝试使用 Javascript 函数在 textbox2 中的 onblur 事件

代码：

```
//text box2 event
    onblur="adddate(this.value)"
//javascript fn    
    function adddate(a) {
        var rdat=document.telstoe.rdate.value;
        if(a==2) {
            document.telstoe.tdate.value=rdat+2;
        }
    } 
```

输入值： 文本框 1：11/14/2012 (mm/dd/yyyy) 文本框 2：2 或 3 或 4 输出应该是：只有天数应该被计算和显示，我越来越像 2012 年 1 月 14 日* *2* *

请帮助正确的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:01:33.453

您可以使用[Date 对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)来解析日期并为其添加天数：

```
var date = new Date(document.telstoe.rdate.value);
date.setDate(date.getDate() + 1);
document.telstoe.tdate.value = (date.getMonth() + 1) + "/" + date.getDate() + "/" date.getFullYear().toString().substring(2); 
```

或者使用[jQuery UI datepicker](http://docs.jquery.com/UI/Datepicker/formatDate)之类的东西来格式化日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:03:19.493

试试这个：

```
function adddate(a) {
    var tdate = document.telstoe.rdate.value;
    var theDate=new Date(tdate);
    theDate.setDate( theDate.getDate() + a );
    document.telstoe.tdate.value=(theDate.getMonth() + 1) + "/" + theDate.getDate() + "/" theDate.getFullYear();
} 
```

并使用此页面供您参考： [http ://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

请查看对象参考！为了您自己的缘故，最好学习javascript Date 对象。祝你好运。

# python - CSV，Python：正确使用 DictWriter（ValueError：dict 包含不在字段名中的字段）

> ID：13367732
> 
> 赞同：5
> 
> 时间：2012-11-13T19:53:44.507
> 
> 标签：python, csv, unicode, dictionary

我在掌握 csv 模块（Python 2.7）中的 DictWriter 时遇到了困难。我有这个（哦，我正在使用 unicodecsv 库，因为我读过有问题）：

```
f = object_instance.return_a_dictionary.keys()
with open('eggs.csv', 'wb') as csvfile:
    spamwriter = unicodecsv.DictWriter(csvfile, fieldnames=f)
    spamwriter.writerows(object_instance.return_a_dictionary) 
```

所以我传入我的对象实例。f 是：

```
[u'n6s2f0e1', u'n1s0f0e0', u'n2s0f0e1', u'n3s1f0e0', u'n5s2f0e0', u'n4s1f0e1'] 
```

object_instance.return_a_dictionary 是：

```
{u'n6s2f0e1': u'stuff', u'n1s0f0e0': u'stuff', u'n2s0f0e1': u'stuff', u'n3s1f0e0': u'stuff', u'n5s2f0e0': u'stuff', u'n4s1f0e1': u'stuff'} 
```

所以我真的想要第一行：

```
stuff stuff stuff stuff stuff 
```

我的印象是 writerow 遍历提供的字典，使用提供的 dictwriter 字段名调用提供的 dict 的键名，并输出值。

相反，我得到：

```
Traceback (most recent call last):
File "<stdin>", line 3, in <module>
File "/usr/lib/python2.7/csv.py", line 153, in writerows
rows.append(self._dict_to_list(rowdict))
>>> File "/usr/lib/python2.7/csv.py", line 144, in _dict_to_list
", ".join(wrong_fields))
ValueError: dict contains fields not in fieldnames: n, 6, s, 2, f, 0, e, 1 
```

我只是在这一点上不明白这一点。它使用常规 Python csv 库和我找到的 unicode csv 库来执行此操作。谁能解释问题是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-13T19:56:47.113

你`writerow`不想`writerows`。

前者采用单个参数，即要写入的行。后者采用可迭代的行。您正在`writerows`使用字典进行调用，该字典尝试遍历字典并写入每个条目。由于迭代 dicts 给出了它们的键，这与调用`writerow(n6s2f0e1)`which （显然）失败并出现您看到的错误相同。

# c - 在c中添加到链表的末尾

> ID：13367745
> 
> 赞同：-1
> 
> 时间：2012-11-13T19:54:23.337
> 
> 标签：c, insert, linked-list, singly-linked-list

我正在尝试编写一个程序来创建带有链表的一副卡片。我的插入功能需要将输入的卡号及其花色添加到列表的末尾。我创建的代码已经给了我一个分段错误。

```
#include <stdio.h>
#include <string.h>

struct node{
    char number;
    char suit;
    struct node *next;
    };

int insert(struct node *s, char su, char num)
{
   struct node *temp=s;
   struct node *newnode=(struct node*)malloc(sizeof(struct node));
   newnode->number=num;
   newnode->suit=su;
   while(temp->next)
   {
      temp=temp->next;
      temp->next=newnode;
   }
   return 0;
}

main()
{
   struct node *head;
   char x;
   while(1)
   {
      printf("What would you like to do?\n");
      printf("Insert: i\n");
      scanf("%s",&x);
      if(x=='i')
      {
         char su, num;
         printf("Please enter the suit\n");
         scanf("%s",&su);
         printf("Please enter the number\n");
         scanf("%s",&num);
         insert(head, su,num);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:59:24.983

```
while(temp->next)
{
   temp=temp->next;
   temp->next=newnode;
} 
```

是一个无限循环，除非传入的指针有`s->next == NULL`. 在第一次迭代中，`temp is moved to`s->next `, then its`next `pointer is set to point to`newnode `, so it's not`NULL `. Then`temp 移动到`newnode`并且它的`next`指针被设置为`newnode`-- 它本身，哎呀。

您需要将分配移到`newnode`循环外，

```
while(temp->next)
{
   temp=temp->next;
}
temp->next=newnode; 
```

并初始化`newnode->next = NULL;`施工。

当你打电话时

```
insert(head, su,num); 
```

in `main`,`head`是一个未初始化的指针，因此您正在调用未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:59:23.653

其他答案指出了您的错误，但它们给您留下了如何进入指向您创建的列表的`head`问题`main`。有两种方法可以做到这一点。一种是使用双指针，另一种是从`insert`.

在双指针方法中，`insert`会有原型

```
int insert(struct node **s, char su, char num); 
```

并将使用以下地址调用`head`：

```
struct node *head = NULL; // initialise to NULL, an empty list
... // get the new values for su/num
insert(&head, su, num); 
```

这允许`insert`访问头变量的地址并在该变量中设置一个值。这将在列表为空时完成。在`insert`你做类似的事情：

```
if (*s == NULL) {
    *s = newnode;
} else {
    // attach to end of list
} 
```

在指针返回方法中，`insert`会有原型

```
struct node *insert(struct node *s, char su, char num); 
```

并将使用以下地址调用`head`：

```
struct node *head = NULL; // initialise to NULL, an empty list
... // get the new values for su/num
head = insert(head, su, num); 
```

在这个方法中，`insert`返回一个指向链表头的指针；当列表为空时，它返回 newnode。在`insert`你做类似的事情：

```
if (s == NULL) {
    s = newnode;
} else {
    // attach to end of list
}
return s; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:58:50.027

在 insert() `temp->next=newnode;`中应该在 while 循环之外。
也应该分配`newnode->next = NULL;`

还 *head 未初始化，最后？您应该为*字符串*分配比一个字符更多的内存（ + 可能的填充）。

否：`char x, su, num; scanf("%s",&su);`
是：`const int MAX=100; char x[MAX], su[MAX], num[MAX]; scanf("%s",su);`

# file - 将 7 个最新文件保存在文件夹中的批处理文件

> ID：13367746
> 
> 赞同：19
> 
> 时间：2012-11-13T19:54:23.990
> 
> 标签：file, batch-file, delete-file

谁能帮我创建一个批处理文件？基本上，我的目标是创建一个批处理文件，将最新的 7 个 .txt 文件（换句话说，最新的）保存在文件夹中，然后删除其余文件。那是如果文件夹中有超过 7 个文件。

我现在遇到的问题是，我创建的批处理文件删除了大部分文件，因为它们的日期是一两个月左右。我想始终保留最新的 7 个文件，无论它们有多旧。

所以这就是我所拥有的 -

```
@echo off

setlocal enableextensions

rem ********************************************************************************
rem *******************************  LOCAL VARIABLES  ******************************
rem ********************************************************************************

SET TargetDirectory="C:\TEMP\test"

SET No_of_fles_to_keep=7

SET count=0 

set cnt=0

rem ********************************************************************************

cd /d %TargetDirectory%

REM timeout /T 500

 for %%x in (*) do set /a count+=1

 for %%A in (*.bat) do set /a cnt+=1

cd /d %TargetDirectory%

REM timeout /T 500

IF %count% gtr %No_of_fles_to_keep% forfiles -p %TargetDirectory% -s -m "*.txt" -d -%No_of_fles_to_keep% -c "cmd /c del @path"

echo %count% 

echo File count = %cnt% 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-13T20:17:34.513

您可以使用 DIR with`/O-D`按时间戳降序列出文本文件。FOR /F 允许您遍历每个文件。SET /A 用于跟踪到目前为止列出了多少文件。现在是棘手的部分。

在代码块中，您通常需要使用延迟扩展来处理之前在同一块中设置的变量的值。`!`但是，如果 FOR 变量值包含, 并且`!`在文件名中有效，则延迟扩展可能会导致 FOR 循环出现问题。我通过在读取第 7 个文件名时使用 SET /A 故意除以 0 来解决此问题。这会引发一个错误，导致执行未定义 KEEP 变量的条件代码。从那时起，所有剩余的文件都将被删除。

```
@echo off
setlocal
set /a cnt=0
set "keep=7"
for /f "eol=: delims=" %%F in ('dir /b /o-d /a-d *.txt') do (
  if defined keep (
    2>nul set /a "cnt+=1, 1/(keep-cnt)" || set "keep="
  ) else del "%%F"
) 
```

***更新***

哦，天哪，我刚刚意识到有一个简单的解决方案。只需使用 FOR /F SKIP 选项在按最后修改日期降序排序后忽略前 7 个条目。

```
for /f "skip=7 eol=: delims=" %%F in ('dir /b /o-d /a-d *.txt') do @del "%%F" 
```

您甚至不需要批处理文件。只需更改`%%`为`%`if 从命令提示符运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T22:49:47.233

下面的批处理文件使用了一种更简单的方法。它使用`findstr /N "^"`命令对每个文件进行编号，然后仅比较每个编号以保留前七个文件并删除其余文件...

```
@echo off
for /f "tokens=1* delims=:" %%a in ('dir /b /o-d *.txt ^| findstr /N "^"') do (
   if %%a gtr 7 del "%%b"
) 
```

安东尼奥

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-07-06T13:08:52.313

这将保留 7 个最新的 .txt 文件并删除所有其他 .txt 文件

在要从中删除文件的同一目录中执行以下命令

**在命令提示符下**

```
for /f "skip=7 eol=: delims=" %F in ('dir /b /o-d /a-d *.txt') do @del "%F" 
```

**内部批处理脚本**

```
for /f "skip=7 eol=: delims=" %%F in ('dir /b /o-d /a-d *.txt') do @del "%%F" 
```

# python-sphinx - 内联和多行方程失败

> ID：13367750
> 
> 赞同：0
> 
> 时间：2012-11-13T19:54:51.030
> 
> 标签：python-sphinx, restructuredtext

我正在尝试在 Sphinx Python 文档系统中编写一些方程式。我一直在尝试使以下多线方程起作用：

```
.. math:: 

   P_{Survival} (L) = P_{S} (L) = exp \{ - \frac{ \sigma (E) \rho L}{m_{T}} \}

   P_{Interaction} (L) = P_{I} (L) = = 1 - P_{S} (L) = 1 - exp \{ - \frac{\sigma \rho L}{m_{T}} \} 
```

它们显示为一个连续的内联方程，而不是两个方程的块。它们单独工作，所以它不能是 TeX 语法。此外，像这样的块类型方程

```
.. math:: 

   P_{Interaction} (L) = P_{I} (L) = = 1 - P_{S} (L) = 1 - exp \{ - \frac{\sigma \rho L}{m_{T}} \} 
```

仅显示为内联。

有什么建议可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:20:57.250

修复了问题。mathplotlib.sphinxext.mathmpl 是罪魁祸首。

# node.js - EmberJS 与 Ember-Runner 结合使用

> ID：13367751
> 
> 赞同：1
> 
> 时间：2012-11-13T19:54:59.980
> 
> 标签：node.js, build, ember.js

再会，

我刚开始将 EmberJS 与[Ember-Runner](https://github.com/envone/ember-runner)结合使用。[我在Github](https://github.com/envone/ember-runner-sample)上找到了一个工作示例。

Ember-runner 会自动将您所有的模板文件和 JS（至少我是这么认为的）添加在一起，并在每次保存时从您自己的文件中生成单个 HTML / JS / 模板 / CSS 文件。（并且可以选择缩小等）。一个构建工具，就像它在描述中所说的那样。

这就是它对 CSS 和模板部分所做的事情，但是对于 JS 部分，它似乎只在我的 JS 文件夹中包含一个名为“main.js”的文件。是否可以扫描该目录以查找其他文件，以便它也包含这些文件？（所以我可以有单独的控制器/模型文件等）。

我希望我的问题很清楚。

亲切的问候，

马蒂因·迪克斯特拉

# ruby - 在 Ruby 中，String() 和 #to_s 有什么区别

> ID：13367758
> 
> 赞同：10
> 
> 时间：2012-11-13T19:55:36.963
> 
> 标签：ruby, coding-style

```
String(1.1) == (1.1).to_s    => true
String(1.1) === (1.1).to_s   => true 
```

这两种强制方法有区别吗？如果是这样，你能证明吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T21:25:03.540

该[方法的](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-String)[文档`String`](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-String)说：

> 通过调用其 to_s 方法将 arg 转换为 String。

所以一般来说它们是相同的，但也有一些不同——尽管你不太可能看到它们真实存在。`String()`检查其参数的类，如果它还不是，`String`则调用`to_s`它。直接调用`to_s`意味着无论如何都会调用该方法。

考虑类：

```
class MyString < String
  def to_s
    "Overridden to_s method"
  end
end 
```

的实例`MyString`已经是一个`String`对象，因此将其作为参数传递给`String()`不会做任何事情。然而，调用`to_s`它会返回`Overridden to_s method`。

```
1.9.3p286 :010 > m = MyString.new 'my string'
 => "my string" 
1.9.3p286 :011 > o = String.new 'orig string'
 => "orig string" 
1.9.3p286 :012 > String o
 => "orig string" 
1.9.3p286 :013 > String m
 => "my string" 
1.9.3p286 :014 > o.to_s
 => "orig string" 
1.9.3p286 :015 > m.to_s
 => "Overridden to_s method" 
```

您不太可能需要覆盖`to_s`这样的`String`子类，通常您可以将`String()`和`to_s`视为相同，但了解正在发生的事情可能很有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T20:30:51.747

它们在失败时会引发不同的异常：

```
bo = BasicObject.new

String(bo)
TypeError: can't convert BasicObject into String

bo.to_s
NoMethodError: undefined method `to_s' for #<BasicObject:0x0003efbfd79c10> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T20:14:21.000

String(object) 是一个在对象上调用#to_s 的内核方法

# android - 滚动 ListView 以显示页脚

> ID：13367759
> 
> 赞同：3
> 
> 时间：2012-11-13T19:55:37.663
> 
> 标签：android, listview

我有一个显示搜索结果的 ListView。执行搜索时，我在 ListView 中添加一个页脚，指示搜索正在进行中。我想以编程方式将我的 ListView 滚动到底部，以便用户可以看到页脚。想法？

我的应用程序针对 2.1+

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:59:56.420

使用此方法将 ListView 滚动到底部。

```
private void scrollMyListViewToBottom() {
    myListView.post(new Runnable() {
        @Override
        public void run() {
            // Select the last row so it will scroll into view...
            myListView.setSelection(myListAdapter.getCount() - 1);
        }
    });
} 
```

取自[Listview 更新列表后滚动到列表末尾](https://stackoverflow.com/questions/3606530/listview-scroll-to-the-end-of-the-list-after-updating-the-list)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-18T06:19:08.273

试试这个

```
lv.post(new Runnable() {
                @Override
                public void run() {

                    lv.setTranscriptMode(ListView.TRANSCRIPT_MODE_ALWAYS_SCROLL);
                    lv.setStackFromBottom(true);
                }
            }); 
```

# actionscript-3 - 使用 FlexUnit 测试 NativeProcess

> ID：13367761
> 
> 赞同：0
> 
> 时间：2012-11-13T19:55:41.223
> 
> 标签：actionscript-3, air, flexunit4

我在我的 Adob​​e Air 项目上设置了一个 FlexUnit 测试，并想测试一些使用 NativeProcess 的功能。当我运行测试时，它给出了这个错误：

```
Error: Error #3219: The NativeProcess could not be started. 'Not supported in current profile.' 
```

这是因为 FlexUnitApplication-app.xml 没有启用 NativeProcess 的这一行：

```
<supportedProfiles>extendedDesktop</supportedProfiles> 
```

问题是 FlexUnitApplication-app.xml 每次在没有该行的情况下构建时都会自动生成。

我已经能够通过使用 FlexUnit 结果窗口中的“运行所有测试”运行测试并让它失败来让它工作。然后我在 bin-debug 中将这一行添加到 FlexUnitApplication-app.xml 并再次运行测试。如果项目中的任何内容发生变化，我需要重复这些步骤，所以这并不理想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:06:49.143

您需要将其添加到您的启动配置文件中：单击错误图标旁边的小箭头并选择调试配置（或选择项目属性>运行/调试设置）在新的左侧选择您要编辑的启动配置对话。在此配置的“主”选项卡中，最后一个选项是“配置文件”，您可以在“桌面”和“扩展桌面”之间切换。

# vb6 - VB6 中的占位符文本

> ID：13367765
> 
> 赞同：3
> 
> 时间：2012-11-13T19:55:52.293
> 
> 标签：vb6, textbox, placeholder, ocx

我知道这很奇怪，但是有没有办法在 VB6 中模拟占位符文本功能？如果没有，有没有人知道一个好的 OCX 控件我可以找到可以做到这一点的地方？我确信它可以通过一组功能进行编程来做到这一点，只是寻找已经完成的事情。

我要询问的占位符不是 VB6 中的“格式”，而是您在网络表单上看到的文本，而不是例如标签。

文本框内的文本，告诉您该框中的信息，或提供您希望用户输入该特定框的信息的示例。

一如既往地非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T21:55:28.303

听起来你想要提示横幅。这些也适用于 ComboBox 控件。

```
Private Const CBM_FIRST As Long = &H1700&
Private Const CB_SETCUEBANNER As Long = CBM_FIRST + 3
Private Const ECM_FIRST As Long = &H1500&
Private Const EM_SETCUEBANNER As Long = ECM_FIRST + 1

Private Declare Function SendMessage Lib "user32" Alias "SendMessageW" ( _
    ByVal hWnd As Long, _
    ByVal wMsg As Long, _
    ByVal wParam As Long, _
    ByVal lParam As Long) As Long

Private Sub SetCueBannerTXT(ByVal TextBox As TextBox, ByVal CueText As String)
    SendMessage TextBox.hWnd, EM_SETCUEBANNER, 0, StrPtr(CueText)
End Sub

Private Sub SetCueBannerCBO(ByVal ComboBox As ComboBox, ByVal CueText As String)
    SendMessage ComboBox.hWnd, CB_SETCUEBANNER, 0, StrPtr(CueText)
End Sub 
```

> 注意要使用此 API，您必须提供一个清单，指定 Comclt32.dll 版本 6.0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T20:28:59.640

让我们看看我是否理解你想要的正确。您想要一个显示（例如）：“名字”的文本框向用户显示要输入的内容？

这可以通过在设计模式中将文本值设置为“名字”来实现。然后，在 GotFocus 事件中，删除里面的文本，给用户一个空白文本框来输入他们的信息。

为了使其更加用户友好，您可以在它只是一个标签时使用灰色文本，在用户输入时使用黑色文本。您还可以测试文本颜色，以便在用户重新输入文本框时不会删除用户信息。

# .net - 如何在 VB.Net 中从 Dictionary(Of String, Object) 重铸对象

> ID：13367766
> 
> 赞同：3
> 
> 时间：2012-11-13T19:55:51.500
> 
> 标签：.net, vb.net, casting, npoi

我有一个程序可以运行一堆不同类型的测试。每个测试都有许多可以设置的不同设置。我正在尝试将用于每个测试的设置导出到 Excel 文件。现在写，我将所有设置都存储在 Dictionary(Of String, Object) 中，因为设置的值可以是不同的类型，即（Double、Integer、String、Boolean）。我正在尝试像这样重铸字典中的值，但 DirectCast 不喜欢 t，它说类型 t 未定义。我也试过 CType 但它似乎不起作用。设置的类型是 Dictionary(Of String, Object)

```
Private Sub writeTestSettings(ByRef book As HSSFWorkbook, ByVal settings As Dictionary(Of String, Object))
    Dim settingsSheet As HSSFSheet = book.CreateSheet("Test Configuration")

    Dim i As Integer = 0
    For Each key In settings.Keys
        Dim row = settingsSheet.CreateRow(i)
        Dim cell1 As HSSFCell = row.CreateCell(0)
        cell1.SetCellValue(key)
        Dim cell2 As HSSFCell = row.CreateCell(1)
        Dim value As Object = settings(key)
        Dim t As Type = value.GetType()
        cell2.SetCellValue(DirectCast(value, t))

    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:12:01.773

如果您使用的是 .NET 4.0 或更高版本，则可以改用[CTypeDynamic](http://msdn.microsoft.com/en-us/library/ee835926%28v=VS.100%29.aspx)。另请参阅[此问题](https://stackoverflow.com/questions/7534718/objtype-is-not-defined-actually-it-is-so-why-is-this-happening)。

```
 Dim t As Type = value.GetType()
    cell2.SetCellValue(CTypeDynamic(value, t)) 
```

您可能还需要考虑稍微更改设置的存储机制。将几种不同的类型放入对象字典中可能会使将来的维护和调试变得令人讨厌。作为一个即兴的想法，一种可能性是一个简单的包装类，它具有私有类型特定的字典和重载的访问器和修改器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:10:29.593

您不能直接转换，因为您在编译时不知道类型。这不是很干净的代码，但您可以使用 Select Case 来做到这一点：

```
Select Case t
    Case GetType(Double)
        Dim doubleValue = CType(value, Double)
        cell2.SetCellValue(doubleValue)
    Case GetType(Integer)
        Dim integerValue = CType(value, Integer)
        cell2.SetCellValue(integerValue)
    ...
End Select 
```

# matlab - 循环输入直到在 Matlab 脚本中给出正确的格式？

> ID：13367771
> 
> 赞同：0
> 
> 时间：2012-11-13T19:56:40.203
> 
> 标签：matlab

我找不到如何编写代码，所以我的 Matlab 脚本重新提出问题，因为用户输入的格式错误。

我的代码非常简单，一切正常，但如果用户第二次给出错误的格式，它就会跳过。由于 if 失败并且输入未通过要求的内容，因此在 Matlab 脚本中是否可以重复该问题？

```
 A1 = input('State the vector: ');
    if length(A1) < 3 || length(A1) > 3
    disp('The input needs 3 values.')
    A1 = input('State the vector again please: ');
  end 
```

我如何让它问这个问题，直到它通过索引 3 的长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:06:57.500

尝试这个：

```
A1 = input('State the vector: ');
while(1)
    if length(A1) ~= 3
        disp('The input needs 3 values.');
        A1 = input('State the vector again please: ');
    else
        break;
    end
end 
```

# ios - iPhone：iOS 6 和 5.1 之间的 cellForRowAtIndexPath 行为令人费解的差异

> ID：13367772
> 
> 赞同：1
> 
> 时间：2012-11-13T19:56:44.107
> 
> 标签：ios, uitableview, ios6, ios5.1, cell-formatting

我希望 UITableView 中的所有单元格*始终*显示删除附件和披露指示符：

*（原因是我没有/不想要编辑按钮）*

![在此处输入图像描述](../Images/79f67741fbb62f5359077d50b7f8b011.png)

这适用于 5.1 与此代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   *)indexPath
{
  //the usual code
      [self.tableView setEditing:YES animated:YES];
      cell.editingAccessoryType = UITableViewCellAccessoryDisclosureIndicator;

      return cell;
} 
```

这不会在 iOS 6.0 中产生相同的行为。当我添加一行时，它没有删除附件。有趣的是，如果我然后选择单元格（运行 didSelectRowAtIndexPath），我可以在我的详细信息视图中按取消，然后删除附件才会出现在我的表格单元格中。

谁能解释这种差异？我在 Apple 的文档中找不到任何关于此的内容（如果您能指出一些事情，我将不胜感激）。也许我不应该把代码放在这个方法中？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:14:22.560

您的问题是由`setEditing:animated:`在您的`cellForRowAtIndexPath:`. 你应该只在`viewDidLoad`.

# uinavigationcontroller - 用于导航返回按钮的 iOS 自定义图像

> ID：13367780
> 
> 赞同：4
> 
> 时间：2012-11-13T19:57:04.040
> 
> 标签：uinavigationcontroller

我正在 viewDidLoad{} 中尝试以下代码来取代自定义“主页”按钮，其中导航控制器中的库存“后退”按钮用于两个视图。

```
UIImage *image1 = [UIImage imageNamed:@"btn-home-hd.png"];
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:image1 forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

问题是，“Back”这个词仍然出现在新图像下。该图像是一个小房子，所以我们只想显示该图像，它下面什么都没有。我尝试在情节提要中的这个特定视图的“后退按钮”中放置一个空白区域

我看到很多文章都有这段代码，但没有人提到“返回”这个词仍然出现......为什么？这段代码是否需要在某个 init 的某个地方进一步上游？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:54:37.793

我不知道这是否是推荐的策略，但我解决这个问题的方法是将文本移出屏幕。例如

```
[[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(-100, -100) forBarMetrics:UIBarMetricsDefault]; 
```

# odata - Facebook Insights OData 提要消失了吗？

> ID：13367781
> 
> 赞同：1
> 
> 时间：2012-11-13T19:57:09.957
> 
> 标签：odata, facebook-insights

我希望通过 oData 将 Insights 数据提取到 excel 中。每个人都链接到的站点在[这里](http://facebook-insights.cloudapp.net)——也被[这个 URL](http://apps.facebook.com/insightsodata)引用——但据我所知，该地址没有服务器。

Facebook Insights oData 提要消失了吗？

# list - 将10个随机数分成两个列表的最简单方法是什么，其中列表总和的差异尽可能小

> ID：13367784
> 
> 赞同：1
> 
> 时间：2012-11-13T19:57:34.517
> 
> 标签：list, sorting, sum, mirc

你得到 10 个数字，你必须将它们分成两个列表，其中列表中数字的总和可能具有最小的差异。

所以假设你得到：

10 29 59 39 20 17 29 48 33 45

您如何将其分类为两个列表，其中列表总和的差异尽可能小

所以在这种情况下，答案（我认为）将是：

59 48 29 17 10 = 163

45 39 33 29 20 = 166

我使用 mIRC 脚本作为语言，但 perl 或 C++ 对我同样适用。

编辑：实际上可以有多个答案，例如在这种情况下，它也可能是：

59 48 29 20 10 = 166

45 39 33 29 17 = 163

对我来说，只要最终结果是列表总和的差异尽可能小就没有关系

编辑 2：每个列表必须包含 5 个数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T14:30:54.323

您列出的正是分区问题（有关更多详细信息，请参见[http://en.wikipedia.org/wiki/Partition_problem](http://en.wikipedia.org/wiki/Partition_problem)）。关键是这是一个 NP 完全问题，因此不存在能够解决此问题的任何实例（即具有更大数量的数字）的程序。

但是如果你的问题总是只有十个数字分成两个列表，每个列表正好五个项目，那么它变得可行，也可以天真地尝试所有可能的解决方案，因为它们只有 p^N，其中 p=2 是分区，N=10 是整数个数，因此只有 2^10=1024 个组合，每个只需要 O(N) 来验证（即计算差异）。

否则你可以实现维基百科页面中描述的贪心算法，它实现起来很简单但不能保证最优性，事实上你可以在Java中看到这个实现：

```
static void partition() {
    int[] set = {10, 29, 59, 39, 20, 17, 29, 48, 33, 45}; // array of data
    Arrays.sort(set); // sort data in descending order
    ArrayList<Integer> A = new ArrayList<Integer>(5); //first list
    ArrayList<Integer> B = new ArrayList<Integer>(5); //second list

    String stringA=new String(); //only to print result
    String stringB=new String(); //only to print result

    int sumA = 0; //sum of items in A
    int sumB = 0; //sum of items in B

    for (int i : set) {
        if (sumA <= sumB) {
            A.add(i); //add item to first list
            sumA+=i; //update sum of first list
            stringA+=" "+i;
        } else {
            B.add(i); //add item to second list
            sumB+=i; //update sum of second list
            stringB+=" "+i;
        }
    }
    System.out.println("First list:" + stringA + " = " + sumA);
    System.out.println("Second list:"+ stringB+ " = " + sumB);
    System.out.println("Difference (first-second):" + (sumA-sumB));
} 
```

它不会返回一个好的结果：

```
First list: 10 20 29 39 48 = 146
Second list: 17 29 33 45 59 = 183 
Difference (first-second):-37 
```

# cordova - 黑莓9860模拟器分辨率错误

> ID：13367788
> 
> 赞同：0
> 
> 时间：2012-11-13T19:57:39.287
> 
> 标签：cordova, blackberry, blackberry-simulator

我目前正在尝试通过 BlackBerry 9860 模拟器测试我的 phonegap 应用程序，但有很多问题。

所以我决定用 javascript (window.innerWidth & window.innerHeight) 输出宽度/高度，惊喜的是，我得到了 288x480。

如果我查看 BlackBerry 9860 规格，它应该是 480x800 分辨率。

有人可以知道为什么会这样。

# javascript - 如何使用 JayData 为 indexedDB 中的表创建索引

> ID：13367790
> 
> 赞同：4
> 
> 时间：2012-11-13T19:57:46.423
> 
> 标签：javascript, html, indexing, indexeddb, jaydata

我们一直在尝试将[JayData](http://jaydata.org/)作为针对多个平台和设备的 HTML5 Web 应用程序中多个数据提供者的抽象层。

我们也一直在使用[Linq2IndexedDB 库](http://linq2indexeddb.codeplex.com/)并取得了一定的成功，并且使用该库我们能够为表创建索引。但到目前为止，我们无法弄清楚如何使用[JayData IndexedDB 提供程序](http://jaydata.org/providers/indexeddb)来执行此操作，或者是否支持它。

有人可以展示如何使用 JayData 为使用 JayData 的 indexedDb 表创建索引吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:59:15.587

我可以确认对指数的支持正在进行中——预计今年会发布。不仅适用于 IndexedDB，也适用于 WebSQL/sqlite 和 mongoDB。在索引的帮助下，2013 年第一季度还将支持对基于键的存储（如 indexeddb 和 mongodb）的导航属性。

关于事务：当使用 saveChanges 保存一组更改时，一切都被视为一个（逻辑）事务。如果提供程序支持回滚，则保存任何项目时出错将恢复同一批次中的任何先前更改。作为示例，请参见：[webSQL transactions with JayData](https://stackoverflow.com/questions/13036693/websql-transactions-with-jaydata/13036836#13036836)

@Kyaw Tun请指点我指出indexedDB对JayData不重要的文档，我们必须修改它，谢谢。我检查你的图书馆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:09:59.743

从他们的文档来看，Jaydata 认为 Indexeddb 不值得成为高效的数据库。显然他们忽略了 indexeddb 最重要的两个特性：索引和事务。但是正确使用 Indexeddb 比 websql 更快。

试试我的图书馆[https://bitbucket.org/ytkyaw/ydn-db/overview](https://bitbucket.org/ytkyaw/ydn-db/overview)，它非常喜欢 indexeddb 以及使用它的许多技巧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T07:15:44.690

我是开发 linq2indexeddb 库的人。如果你对我的库有一些问题，你可以随时告诉我。我会看看它。此外，如果您想支持更多浏览器（使用 WebSQL 的浏览器），您可以将[indexeddb shim](http://nparashuram.com/IndexedDBShim/)添加到您的项目中。这是在 WebSQL API 之上使用 indexeddb API 的垫片。我与 shim 的开发人员密切合作，所以我的 lib 也支持这一点。

# jquery - load() 在模态体内多次触发

> ID：13367792
> 
> 赞同：1
> 
> 时间：2012-11-13T19:57:55.243
> 
> 标签：jquery, ajax, twitter-bootstrap

我正在编写一个打开引导模式的脚本，然后您使用“我确定”按钮确认您的选择，然后是 post()，如果它成功提交，它会将评论表单加载到模式正文中。评论表单存储在一个partial中，评论使用wysihtml5。这是我当前的代码：

```
 modal_div.find('.confirm-o-c').click(function(ee){
            $.post(
                lnk.attr('href'),
                function(data, textStatus, jqxhr){
                    console.log(data);

                    var lbl = lnk.parent().prev().children('.label').first();
                    lbl.fadeOut('fast');
                    lbl.attr('class','label label-'+data.status)
                       .text(data.text)
                       .fadeIn('fast');
                    var newlnk = $('<a href="#">newlink</a>');
                    newlnk.attr('href',lnk.attr('href').replace('complete','revert'));
                    lnk.parent().append(newlnk);
                    lnk.remove();
                    var status = data.status;
                    var id = data.object.id;
                    var objective_id = data.object.objective_id;

                    if(status === 'submitted'){
                        modal.fadeOut('fast', function(){
                            modal.load('<?=URL::to_action('objectives/completion_comment/')?>/'+id, function(){  
                                modal.fadeIn('fast');
                                $('#message-'+objective_id).wysihtml5();

                            });

                            $('#confirm-objective-complete').addClass('modal-large');
                            $('#submit-comment').css("display", "inline-block");
                            oldfooterbtn.css("display", "none");
                            footerbtncancel.css("display", "none"); 
                            footerbtnclose.css("display", "none");  
                            confirmtext.css("display", "none");                 
                        });
                    };

                });
            // objectives.init();
            ee.preventDefault(); 
```

**问题** 确认后，帖子效果很好，它返回提交，但是当评论表单被引导时，我的控制台显示它发生了 8 次，我收到了这个错误 `TypeError: f.contentWindow is null`

我见过一些像：

```
 $(this).one('load', function () {
        console.log("load complete");
    });' 
```

但我想不出我们如何使用像我这样的 URL 来实现。任何帮助将不胜感激。

感谢您查看我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:12:40.323

之所以发生这种情况，是因为变量 modal 被设置为`$('.modal-body')`它们在 DOM 中的多个实例。一旦我把它缩小到`var modal = modal_div.find('.modal-body');`它只能选择当前的模态体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:14:27.130

像这样：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

```
$(this).load('myurl/page',{/*JSON data*/},function () {
    console.log("load complete");
});' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-14T09:40:25.090

确保您没有将多个事件绑定到模式。您可以使用 unbind 函数清除它，特别是如果多次绑定事件：

```
$('#myModal').unbind(); 
```

# c# - 如何避免 linq 中视图的子查询

> ID：13367795
> 
> 赞同：1
> 
> 时间：2012-11-13T19:57:59.123
> 
> 标签：c#, .net, linq, linq-to-entities

我正在使用 linq 从表和视图类中检索 MVC 4 中的数据。如果我使用 linq 从视图中提取数据，如下所示：

```
db.vwContractMVC.Where(x => x.NID == id && x.Date >= pin && x.Date <= pen).ToList(); 
```

然后 linq 使用子查询构造 sql 查询，如下所示：

```
SELECT 
[Extent1].[NID] AS [NID], 
[Extent1].[Date] AS [Date], 
[Extent1].[Column1] AS [Column1], 
[Extent1].[Column2] AS [Column2], 
[Extent1].[Column3] AS [Column3]
FROM (SELECT 
      [vwContractMVC].[NID] AS [NID], 
      [vwContractMVC].[Date] AS [Date], 
      [vwContractMVC].[Column1] AS [Column1], 
      [vwContractMVC].[Column2] AS [Column2], 
      [vwContractMVC].[Column3] AS [Column3]
      FROM [dbo].[vwContractMVC] AS [vwContractMVC]) AS [Extent1]
WHERE ([Extent1].[NID] = @p__linq__0) AND ([Extent1].[Date] >= @p__linq__1) AND ([Extent1].[Date] <= @p__linq__2) 
```

如果使用表 - 查询很简单：

```
SELECT 
[Extent1].[NID] AS [NID], 
[Extent1].[Date] AS [Date], 
[Extent1].[Column1] AS [Column1], 
[Extent1].[Column2] AS [Column2], 
[Extent1].[Column3] AS [Column3]
FROM [dbo].[Contract] AS [Extent1]
WHERE ([Extent1].[NID] = @p__linq__0) AND ([Extent1].[Date] >= @p__linq__1) AND ([Extent1].[Date] <= @p__linq__2) 
```

问题是 - 如果可能的话，如何让 linq 从视图中进行简单的选择）

我可以为此创建存储过程，但我希望使用现有的表和视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:17:48.187

实际 SQL 是使用子查询创建的，因为您是从视图中选择的。如果您没有多次从同一个视图中选择，只需从实际表中创建 linq 查询，否则您可以创建一个返回视图 sql AsQueryable() 的方法并根据需要添加 where 子句。

代码：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    namespace LinqToView
    {
        class Program
        {
            static void Main(string[] args)
            {
                using (var context = new NWEntities())
                {
                    ViewQuery(context).Where(vw => vw.Product == "Foo").ToList();
                }
            }

            private static IQueryable<vwProducts_by_Categories> ViewQuery(NWEntities context)
            {
                return
                    from p in context.Products
                    join c in context.Categories on p.CategoryID equals c.CategoryID
                    select new vwProducts_by_Categories { Product = p.ProductName, Category = c.CategoryName };
            }
        }

        public class vwProducts_by_Categories
        {
            public string Product { get; set; }
            public string Category { get; set; }
        }
    } 
```

生成：

```
 SELECT 
    [Extent2].[CategoryID] AS [CategoryID], 
    [Extent1].[ProductName] AS [ProductName], 
    [Extent2].[CategoryName] AS [CategoryName]
    FROM  [dbo].[Products] AS [Extent1]
    INNER JOIN [dbo].[Categories] AS [Extent2] ON [Extent1].[CategoryID] = [Extent2].[CategoryID]
    WHERE N'Foo' = [Extent1].[ProductName] 
```

# google-sheets - Google 电子表格 SUMIF 日期比较

> ID：13367796
> 
> 赞同：17
> 
> 时间：2012-11-13T19:58:00.340
> 
> 标签：google-sheets, google-sheets-formula

我试图让这个聚合日期比较工作，我以为我理解了语法，但它显然不起作用。谁能帮我改正公式？

我正在尝试总结 I 列中的金额，其中 H 中的日期早于 A 中的日期

我的公式是 `=SUMIF(H$2:H,H$2:H<A4, I$2:I)`

![在此处输入图像描述](../Images/bc42154532c9dc4eac6aae7d451fc04d.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-13T22:04:48.423

[您的SUMIF](https://support.google.com/drive/bin/static.py?hl=en&topic=25273&page=table.cs&tab=1240293)语法只是一个小错误：

`=SUMIF(H$2:H;"<"&A4;I$2:I)`

# mysql - 将索引添加到 MySQL 中的 BIGINT 列是否有帮助？

> ID：13367797
> 
> 赞同：4
> 
> 时间：2012-11-13T19:58:00.767
> 
> 标签：mysql, performance, indexing, guid

我有一个包含数百万个条目的表，以及一个具有`BIGINT(20)`每行唯一值的列。它们不是主键，但在某些操作过程中，子句 中有数千个`SELECT`使用该列。`WHERE`

**问：当条目数量增长到数百万时**，向该列添加索引会有所帮助吗？**我知道它适用于文本值，但我不熟悉索引对`INT`or的作用`BIGINT`。**

 **`SELECT`一个会发生数千次的样本与此类似：

```
`SELECT * FROM table1 WHERE my_big_number=19287319283784 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T20:02:43.677

如果您有一个非常大的表，那么搜索未编入索引的值可能会非常慢。在 MySQL 术语中，这种查询最终成为“表扫描”，这是一种说法，它必须按顺序对表中的每一行进行测试。这显然不是最好的方法。

添加索引将有助于提高*读取速度，但您付出的代价是**写入*速度稍慢。进行优化时总是需要权衡取舍，但在您的情况下，读取时间的减少将是巨大的，而写入时间的增加将是微不足道的。

请记住，将索引添加到大表可能需要相当长的时间，因此在将其应用于生产系统之前，请针对生产数据进行测试。该表可能会在`ALTER TABLE`语句期间被锁定。

与往常一样，使用`EXPLAIN`您的查询来确定它们的执行策略。在你的情况下，它会是这样的：

```
EXPLAIN SELECT * FROM table1 WHERE my_big_number=19287319283784 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:59:51.007

它将提高您的查找 (SELECT) 性能（基于您的示例查询），但它也会使您的插入/更新速度变慢。您的数据库大小也会增加。您需要查看进行这些 SELECT 调用与 INSERT 调用的频率。如果您进行了很多 SELECT 调用，那么这应该会提高您的整体性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:26:38.063

我在亚马逊 ec2 小实例上有一个 2200 万行的表。因此，它绝对不是最快的服务器环境。我有这个创建：

```
CREATE TABLE huge
(
    myid int not null AUTO_INCREMENT PRIMARY KEY,
    version int not null,
    mykey char(40) not null,
    myvalue char(40) not null,
    productid int not null
);

CREATE INDEX prod_ver_index ON huge(productid,version); 
```

此调用运行立即结束：

```
select * from huge where productid=3333 and version=1988210878; 
```

至于`inserts`，我可以在 PHP 中执行 100/秒，但如果我将 1000 次插入塞入数组中，则在同一张表上使用 implode，我每秒得到 3400 次插入。自然，您的数据不会以这种方式出现。只是说服务器相对活泼。但正如 tadman 所建议的那样，他的意思是`EXPLAIN`不要检查，在一个典型的语句前面，看看键列是否显示了一个索引，如果你运行它，它将被使用。

## 普通的留言

对于慢查询调试，将单词放在单词`EXPLAIN`前面`select`（无论多么**复杂**） ，`select/join`然后运行它。尽管在解析结果集时查询不会以正常方式运行，但数据库引擎将（几乎立即）生成它将尝试的执行计划。当真正的查询运行时（将 EXPLAIN 放在它前面的那个），这个计划可能会被放弃，但它是模式缺陷的主要线索。

对于那些第一次阅读的人来说，输出`EXPLAIN`似乎很神秘。不过时间不长。在阅读了几篇关于它的文章后，例如[Using EXPLAIN to Write Better MySQL Queries](http://www.sitepoint.com/using-explain-to-write-better-mysql-queries/)，通常能够确定查询的哪些部分正在使用哪些索引，不使用并执行慢速表扫描，较慢的 where 子句，派生表和临时表.

使用针对您的架构调整大小的 EXPLAIN 的输出，您可以深入了解索引创建（例如`composite`和`covering`索引）的策略，从而获得可观的查询性能。

## 分享

与其他人共享此`EXPLAIN`输出和模式输出（例如在 stackoverflow 问题中）可以**加快**有关性能的更好答案。Schema 输出使用诸如`show create table myTableName`. 感谢你的分享。**

# android - 由于 GLThread 引用，Android Game Leaking memory

> ID：13367800
> 
> 赞同：2
> 
> 时间：2012-11-13T19:58:11.250
> 
> 标签：android, opengl-es, memory-leaks, surfaceview

现在我正在用 Android (OpenGL ES 1.1) 开发一个游戏，我看到每当我创建一个新的 SurfaceView (GLView) 时，它的线程就会被创建。没关系。当我想完成包含 SurfaceView 的 Activity （并返回菜单）时，问题就来了。似乎没有释放活动，因为每个 GLThread 都在引用它。这可能会以 OOM 错误结束。

一些MAT图片：

![MarkitActivity 表示处理 SurfaceView 的 Activity 的每个实例](../Images/f5a372d5c3e858ba9082a022b2ef6fc0.png)

![内存中所有活动的列表](../Images/17dba827bb409dc71439b6666a341212.png)

![GC 举办的活动是什么](../Images/25aea22bd7748ec435ed03b7510d3824.png)

第一张图：MarkitActivity 代表了处理 SurfaceView 的每个单独的 Activity 实例。

第二张图：内存中所有活动的列表。

第三张图：GC的活动是什么。

如果需要任何代码，我会发布它。尽管如此，我已经尝试过以下事情：

->活动上下文对渲染器和表面视图的弱引用。

-> 应用程序上下文而不是活动上下文（在正常和弱模式下）。

-> 试图停止（以一种艰难的方式）线程（中断）并等待加入（程序做了什么，但线程不在乎，它仍然存在......）

->尝试不调试，以防在调试器模式下值发生变化（MAT 图片没有调试器）。

-> 尝试将 Activity 作为单实例模式。到处都是奇怪的结果和错误。

->onPause 和 onResume 为视图正确控制。

任何提示、想法、问题或帮助将不胜感激。提前致谢！

卡洛斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:14:42.890

我在线程方面遇到了类似的问题（但不使用 OpenGL），最终使用一个简单的技巧解决了它。

在退出活动之前（在`onPause()`or中`onStop()`，尝试像这样将线程归零：

```
myThread = null; 
```

似乎它使`Thread`GC 可收集，因此您的活动也变得可收集。

它对我有用，也对我提出相同建议的一些有类似问题的人有用。

问候。

# delphi - Delphi 表单中缺少组件

> ID：13367801
> 
> 赞同：1
> 
> 时间：2012-11-13T19:58:14.250
> 
> 标签：delphi, components

在 Delphi 应用程序中，已开发了一个继承自 TFrame 的可视组件 VC，并通过 Structure 窗格（Structure \ 右键单击​​ \ Add to palette）将其添加到 Components Palette APP_PALETTE。

在应用程序的一种形式中，已通过单击调色板 APP_PALETTE 上的组件然后单击该窗体来创建所提到的组件的实例。
在 IDE 中，组件在表单中正确显示。
应用程序编译时没有错误或警告。

但是，**在运行时**，当表单被加载时，**组件并没有显示**出来。

此外，当项目关闭并重新打开时，会显示以下对话框：
**读取表单时出错：[创建组件的表单名称
] 找不到类 [组件 VC 的类]。忽略错误并继续？注意：忽略错误可能会导致组件被删除或属性值丢失。**

我没有开发组件或应用程序，但我可以访问源代码。我想知道是否缺少路径或某种配置...

关于如何解决问题的建议将不胜感激。
先感谢您。

PTM

这是我的环境：
Embarcadero Delphi 2010 Version 14.0.3593.25826
Windows XP Professional Version 2002 Service Pack 3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:05:24.847

这是使用 TFrame 的奇怪方式。通常的方法是使用调色板中的*框架*组件，然后从列表中选择要插入到表单中的框架类型。无需使用*添加到调色板*。框架必须是项目的一部分才能完成这项工作。

# java - Hibernate 没有为 jdbc 找到合适的驱动程序

> ID：13367802
> 
> 赞同：2
> 
> 时间：2012-11-13T19:58:16.607
> 
> 标签：java, hibernate, classloader

我有一个使用 Hibernate 的 Eclipse 插件。我使用的 Hibernate jar 是我安装的 JBOSS Tools 插件的一部分。我迁移到 Eclipse 4.2 Juno 并更新了适用于 Juno 的 JBOSS 工具。

现在我的问题是，我当前的代码不再工作了。对我来说，HIbernate 和我的应用程序之间似乎存在 ClassLoader 问题。

我有加载动态 JDBC 驱动程序的代码。**我使用扩展URLClassLoader**的类加载 jar，并使用**DriverManager**注册假驱动程序。接下来我构建**SessionFactory**，然后获取**Session**，然后是**Transaction**

```
Session hbmSession = mySessionFactory.getCurrentSession();
Transaction tx = hbmSession.getTransaction(); 
```

当我打电话给

```
DriverManager.getConnection(<my_jdbc_url>,<user>,<pwd>); 
```

我能够取回 Connection 对象，但是当我将 Session 调用到 beginTransaction() 时，它就爆炸了

```
if (tx == null || !tx.isActive()) {
  tx = hbmSession.beginTransaction();
} 
```

并抛出此错误：

```
Caused by: java.sql.SQLException: No suitable driver found for    
jdbc:oracle:thin:@190.255.10.10:1521:DBID
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:133)
at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446) 
```

这很奇怪，因为它还调用 DriverManager 来获取连接。有什么线索吗？

感谢你们的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:34:02.293

我找到了解决方案。看起来 JBoss 的 Hibernatools 有自己的 FakeDelegatingDriver 对象，供客户端在单独的插件包上使用。org.hibernate.eclipse.libs 我用它代替了我自己的 FakeDriver，所以我可以加载动态驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:43:35.877

在 Hibernate 中提供数据库连接的标准方法是使用返回 SessionFactory 的 Configuration().configure().buildSessionFactory()

SessionFactory 对象应配置为单例。它有一个静态方法：getCurrentSession()，它返回一个休眠会话。

重要提示：您需要将文件 hibernate.cfg.xml 放入您的类路径中。如果您使用 Eclipse，您可以将此文件放入 src 文件夹中。

此配置文件应包含 hibernate.connection.url、hibernate.connection.username 和 hibernate.connection.passsword

有很多例子，即[http://manikandanmv.wordpress.com/2011/04/13/hibernate-basics-simple-example/](http://manikandanmv.wordpress.com/2011/04/13/hibernate-basics-simple-example/)

# javascript - JS：通过 getElementsByClassName 隐藏某些元素

> ID：13367803
> 
> 赞同：4
> 
> 时间：2012-11-13T19:58:20.793
> 
> 标签：javascript, hidden, invisible, getelementsbyclassname

我正在尝试设置一个脚本，用某个类名设置不可见的所有内容。这是我要调用的示例：

```
<script type="text/javascript">
function hideItems(){
        document.getElementsByClassName('class1').style.visibility = "hidden";      
}
</script> 
```

类名位于表的维度上，类似于此示例：

```
<table onclick="hideItems()" width="200" border="1">
  <tr>
    <td class="class1">1</td>
    <td class="class2">2</td>
    <td class="class3">3</td>
    <td class="class1">1</td>
    <td class="class2">2</td>
    <td class="class3">3</td>
  </tr>
  <tr>
    <td class="class3">3</td>
    <td class="class1">1</td>
    <td class="class2">2</td>
    <td class="class3">3</td>
    <td class="class1">1</td>
    <td class="class2">2</td>
  </tr>
</table> 
```

最后，将有一个三个复选框，显示基于三个复选框中的哪一个被选中的尺寸。那部分，我可以做得很好，但是将特定维度称为不可见是我目前遇到的问题。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-13T20:00:26.100

`getElementsByClassName`返回一个集合。除非您使用类似的框架，否则您不能集体设置属性`jquery`

```
var elems = document.getElementsByClassName('class1');

for(var i = 0; i != elems.length; ++i)
{
elems[i].style.visibility = "hidden"; // hidden has to be a string
} 
```

# .net - 使用正则表达式提取北美邮政编码

> ID：13367806
> 
> 赞同：0
> 
> 时间：2012-11-13T19:58:38.000
> 
> 标签：.net, regex, capturing-group

我有以下用于验证北美邮政编码的正则表达式：

```
(?:(\d{5})(?:-\d{4})?)|(?:([a-zA-Z]\d[a-zA-Z]) ?(\d[a-zA-Z]\d)) 
```

仅供参考，我知道在验证某些位置的某些字符方面可能更准确。

我想做的是使用相同的验证常量来提取以下格式的邮政编码：

```
00000
  or
a0a0a0 
```

上面的正则表达式很接近；如果我连接所有捕获组（根除外），我会得到我想要的结果。例如，美国代码将在第 1 组中捕获，或者加拿大代码将在 2 + 3 中捕获。

有一个更好的方法吗？或者也许假设它是正则表达式库的一个特性，用于连接所有子组。（顺便说一下，这是 C# .NET）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:55:52.797

我会让你的 2nd( `([a-zA-Z]\d[a-zA-Z])`) 和 3rd( `(\d[a-zA-Z]\d)`) 组被动，但让加拿大代码组（`(?:([a-zA-Z]\d[a-zA-Z]) ?(\d[a-zA-Z]\d))`现在是被动的）非被动。在这种情况下，将只有两个非被动组：一个用于美国代码，一个用于加拿大代码。另外我会为每个组添加[单词边界：](http://www.regular-expressions.info/wordboundaries.html)

```
var regex = new Regex(@"\b(?:(\d{5})(?:-\d{4})?)\b|\b((?:[A-Z]\d[A-Z]) ?(?:\d[A-Z]\d))\b", RegexOptions.IgnoreCase);
var input = @"00000 or a0a 0a0 and not 11111a or b1b1b11";
var postalCodes = regex.Matches(input)
    .Cast<Match>()
    .Select(m => m.Value)
    .ToArray(); 
```

这将匹配`00000`and `a0a 0a0`，但会跳过不正确`11111a`的 and `b1b1b11`。

# apache - 从 Eclipse 服务器选项卡启动 tomee 服务器时出错

> ID：13367807
> 
> 赞同：1
> 
> 时间：2012-11-13T19:58:37.703
> 
> 标签：apache, eclipse-juno, apache-tomee

我的操作系统是 win 7 Ultimate 32 位
安装 JDK 7u9 后，eclipse Juno (4.2) SR1 for Java EE
并最终将新服务器
Apache TomEE 1.5.0 添加到其中 2012 年 10 月 2 日 apache-tomee-1.5.0-webprofile.zip
（使用 eclipse 向导添加新服务器并选择 tomcat 7 配置文件，然后选择它的安装目录）

我收到以下控制台错误

```
...
...
...
nov 13, 2012 8:07:53 PM org.apache.tomee.catalina.OpenEJBContextConfig processAnnotationsFile
SEVERE: OpenEJBContextConfig.processAnnotationsFile: failed.
java.util.regex.PatternSyntaxException: Illegal/unsupported escape sequence near index 32
C:\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\testtomee01\WEB-INF\classes
                            ^
    at java.util.regex.Pattern.error(Unknown Source)
...
...
... 
```

服务器，最终似乎启动了，但是你在下面的每个页面上都会收到 404 错误`http://localhost:8080/`

tomEE安装目录是`C:\apache-tomee-webprofile-1.5.0`
eclipse安装目录是`C:\eclipse`
和java jre下`C:\Program Files\Java\jre7`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:18:17.233

当前的 Windows 版本似乎已损坏。您必须按照此处的错误报告中的建议下载固定版本：[https ://issues.apache.org/jira/browse/TOMEE-436](https://issues.apache.org/jira/browse/TOMEE-436)

1.5.1 快照可在此处下载：[1.5.1-SNAPSHOT](http://openejb.apache.org/cgi-bin/builds.cgi/apache-tomee/1.5.1-SNAPSHOT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:26:46.923

是的，应该已经修复并包含在下一个版本 (1.5.1) 中。仅供参考，它应该在下周可用。

让-路易

# javascript - 通过单击按钮将位置更改为预设坐标和缩放

> ID：13367808
> 
> 赞同：1
> 
> 时间：2012-11-13T19:58:42.517
> 
> 标签：javascript, google-maps-api-3

我的 google maps api v3 web 应用程序有一个侧面板，我想添加在单击按钮时更改到预定义位置和缩放的功能。我在想 javascript 是我只是不确定如何实现的答案。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:11:35.780

这是一个代码片段：

```
<script>
function ZoomAndCenter() {
  map.setCenter(new google.maps.LatLng(-34.397, 150.644));
  map.setZoom(15);
}
</script>
<a href="javascript:ZoomAndCenter()">Move to location</a> 
```

# ruby - 哈希中的函数调用在 Ruby 中为空

> ID：13367810
> 
> 赞同：0
> 
> 时间：2012-11-13T19:58:55.283
> 
> 标签：ruby

我一直在筛选之前关于 stackoverflow 的问题和答案，并且我已经弄清楚了我的大部分问题。我发现如果不将函数调用放在 proc 或类似容器中，我就无法在哈希中放置函数调用。

我最终要做的是显示一个菜单，获取用户输入，然后遍历哈希，并运行指定的函数：

```
def Main()
    menu_titles = {"Answer1" => Proc.new{Choice1()}}
    Menu(menu_titles)
end

def Choice1()
    puts "Response answer"
end

def Menu(menu_titles)
   menu_titles.each_with_index do |(key, value),index|
        puts "#{index+1}. #{key}"
   end 

user_input = 0 

   menu_titles.each_with_index do |(key, value), index|
        if index.eql?(user_input)
           menu_titles[value]
           break
        end 
   end 
end

Main() 
```

我现在遇到的问题是我没有输入我的哈希要求的函数。无论我使用 return 还是“puts”，我要么得到一个空行，要么什么都没有。如果有人对我的代码有其他建议，我也会全神贯注。老实说，我不喜欢使用 procs，但这主要是因为我不完全知道它们是如何工作的以及在哪里使用它们。

现在我的菜单有：

```
user_input = 1
if user_input == 1
   Choice1()
...
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:59:45.497

这是我将如何重构它：

```
class Menu
  attr_reader :titles

  # initialize sets up a hard-coded titles instance variable,
  # but it could easily take an argument.
  def initialize 
    @titles = { 
      "Answer1" => Proc.new{ puts "choice 1" },
      "Answer2" => Proc.new{ puts "choice 2" } 
    }
  end

  # This is the only public instance method in your class,
  # which should give some idea about what the class is for
  # to whoever reads your code
  def choose
    proc_for_index(display_for_choice)
  end

  private

    # returns the index of the proc.
    def display_for_choice
      titles.each_with_index { |(key,value), index| puts "#{index + 1}. #{key}" }
      gets.chomp.to_i - 1 # gets will return the string value of user input (try it in IRB)
    end 

    # first finds the key for the selected index, then 
    # performs the hash lookup.
    def proc_for_index(index)
      titles[titles.keys[index]]
    end
end 
```

如果您对 Ruby（或一般的面向对象编程）很认真，我强烈建议您了解将代码打包成特定于行为的类的优势。此示例允许您执行此操作：

```
menu = Menu.new
proc = menu.choose
#=> 1\. Answer1
#=> 2\. Answer2
2 #(user input)

proc.call
#=> choice 2 
```

你实际上可以在一行上运行它：

```
Menu.new.choose.call 
```

# java - 如何在 Java 中安排重复任务，等待任务完成后再继续？

> ID：13367811
> 
> 赞同：0
> 
> 时间：2012-11-13T19:59:02.317
> 
> 标签：java, scheduled-tasks, scheduling, scheduler

> **可能重复：**
> [如何安排任务定期运行？](https://stackoverflow.com/questions/4544197/how-do-i-schedule-a-task-to-run-at-periodic-intervals)

我需要做的是有一个重复的任务，每隔几个可配置的分钟更新一个列表。我想等待任务完成，完成后它将返回调用者类并继续运行程序。调用者类也有一个无限循环，因为应用程序永远不会停止。我对 Timer 类没有运气，我尝试了 Quartz，但这比 Timer 成功实施要差。

有没有人遇到过和我一样的问题，并成功地创建了一个处理重复任务的调度程序，并且调用者类在时间开始时等待它完成任务？

# r - R CMD BATCH 选择非默认的 R 版本

> ID：13367813
> 
> 赞同：2
> 
> 时间：2012-11-13T19:59:07.420
> 
> 标签：r, batch-file, cmd

我需要使用非默认版本的 R 在集群上运行作业。通常我使用，

```
R CMD BATCH myfile.R myfileout 
```

但这使用了 R 的默认版本。我有我需要使用的不同版本的 R 的文件路径，它已经在集群上，类似于：

```
/file/path/R-x.y.z/ 
```

如何使用不同版本的 R 运行此作业？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T20:06:38.780

只需指定可执行文件的路径，例如

```
/file/path/R-x.y.z/bin/R CMD BATCH myfile.R myfileout 
```

? （您需要检查 R 可执行文件的实际位置......我*认为*它通常位于`bin`Rx.yz 目录的目录中，但尚未检查）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-11T06:55:41.423

上面的答案在我大学的集群系统上不起作用，它一直使用最新安装的版本，即使我使用的是旧版本的完整路径。

我仍然能够通过运行类似这样的东西来运行脚本（至少在命令行上）：

```
/share/apps/R-2.11.0/bin/R --vanilla "--args 1 2 3 herewego" < test.R > test.Rout 
```

它现在为我使用旧版本（2.11.0），而不是新版本（我认为是 3.1.2）。

希望这可以帮助有同样问题的人:-)

# c# - 根据值设置列表视图的选定项

> ID：13367818
> 
> 赞同：0
> 
> 时间：2012-11-13T19:59:41.303
> 
> 标签：c#, winforms, listview, selected

C#winforms。我有一个列表视图，对于单击的每个项目，我都会在标签和文本框中显示其属性。它们没有以任何方式绑定，我手动进行。因此，我更改了文本框中的值（通过下一个和上一个记录按钮）并且 listview.selected 没有改变。

我已经按照我的方式做到了，但我认为也许有一些优化甚至是单一的方法可以做到这一点。我正在寻找类似 selected=itemwithkey(idTextBox)

```
for (int i = 0; i < lstvClientes.Items.Count; i++) {
   if (lstvClientes.Items[i].SubItems[0].Text == idTextBox.Text) {
      lstvClientes.Items[i].Selected = true; break;
   }
} 
```

建议？谢谢社区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:30:21.243

您可以使用[ListView.FindItemWithText](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.finditemwithtext.aspx)方法：

```
var item = lstvClientes.FindItemWithText(idTextBox.Text);
if (item != null)
    item.Selected = true; 
```

# c# - 来自 IEnumerable 的 GroupBy 列表

> ID：13367820
> 
> 赞同：0
> 
> 时间：2012-11-13T19:59:44.010
> 
> 标签：c#, ienumerable, igrouping

我正在尝试创建按队列类别显示的队列列表。每个队列类别都被分配了一个枚举值。

```
 public enum QueueCategory
{
    None=0,
    Critical=1,
    High=2,
    Orphaned=3,
    Missing=4
} 
```

然后对于每个类别，我想显示这些字段。

```
 public class QueueInformation
{
    public string Name { get; set; }
    public Decimal PercentOfThreshold { get; set; }
    public string Host { get; set; }
    public DateTime OldestArrival { get; set; }
    public QueueCategory Category { get; set; }
} 
```

}

我将如何链接这两个页面，以便 QueueCategory 显示 QueueInformation？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:05:23.530

```
IEnumerable<QueueInformation> infos = ...;

foreach (var categoryGroup in infos.GroupBy(i => i.Category))
{
  Console.WriteLine("Current category: {0}", categoryGroup.Key);

  foreach (var queueInfo in categoryGroup)
  {
    Console.WriteLine(queueInfo.Name /*...*/);
  }

  Console.WriteLine("==========================");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:07:43.827

我假设您想要一个由 QueueCategory 排序的源：

```
IEnumerable<QueueInformation> list = new BindingList<QueueInformation>();
var orderedList = from l in list orderby l.Category select l; 
```

希望这可以帮助

# navigation - 使用 castle.windsor 注册视图以进行 Prism 导航

> ID：13367827
> 
> 赞同：4
> 
> 时间：2012-11-13T20:00:03.743
> 
> 标签：navigation, prism

我在带有 Prism 4.1 的 WPF 应用程序中使用 castle.windsor 3.1。我想使用 Prism 导航框架。这要求将视图注册到“作为对象”的容器中。我正在努力寻找它的语法。Prism 示例倾向于显示统一语法。任何帮助表示赞赏。

# android - 在安卓设备上运行裸内核

> ID：13367836
> 
> 赞同：-1
> 
> 时间：2012-11-13T20:00:32.553
> 
> 标签：android, kernel

有没有可能我们可以在一些安卓设备上运行一个裸内核来连接到设备？或者是否有任何具有此功能的可用ROM？

问候

沙赫扎德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:32:19.337

我会说，不，这是不可能的，假设“裸内核”没有“某些 android 设备”的必要驱动程序。我想某些版本的内核（假设您的意思是 AOSP 内核）可能适用于特定设备，但并非一般适用于所有设备。

# ruby-on-rails - Heroku 上的 401 未授权错误与延迟作业

> ID：13367838
> 
> 赞同：7
> 
> 时间：2012-11-13T20:00:39.617
> 
> 标签：ruby-on-rails, heroku, delayed-job

我们在 Heroku 上构建并部署了一个应用程序，该应用程序上的某些进程已经开始超时，我迫切需要将它们移至后台进程。

我已经使用delayed_job 完成了这项工作，并仔细按照Heroku 文档中有关如何设置的步骤进行操作。在本地，这工作正常。

然而，在生产环境中，创建延迟作业会引发 401。此错误似乎发生在我们的应用程序之外，即不在我们编写的代码中。我几乎完全被这个错误难住了，因为它似乎处理了很多 Heroku 内部。当这些类型的错误发生时，我将粘贴我们收到的异常通知电子邮件的部分内容。

```
A Heroku::API::Errors::Unauthorized occurred in surveys#export:

Expected(200) <=> Actual(401 Unauthorized)
request => {:chunk_size=>1048576, :connect_timeout=>60, :headers=>{"Accept"=>"application/json", "Accept-Encoding"=>"gzip", "Authorization"=>"Basic Og==", "User-Agent"=>"heroku-rb/0.3.5", "X-Ruby-Version"=>"1.9.3", "X-Ruby-Platform"=>"x86_64-linux", "Host"=>"api.heroku.com:443"}, :instrumentor_name=>"excon", :mock=>false, :nonblock=>false, :read_timeout=>60, :retry_limit=>4, :ssl_ca_file=>"/app/vendor/bundle/ruby/1.9.1/gems/excon-0.16.4/data/cacert.pem", :ssl_verify_peer=>true, :write_timeout=>60, :host=>"api.heroku.com", :path=>"/apps/msu/ps", :port=>"443", :query=>nil, :scheme=>"https", :expects=>200, :method=>:get}
response => #<Excon::Response:0x0000000957d7e0 @body="{\"error\":\"Access denied\"}", @headers={"Cache-Control"=>"no-cache", "Content-Type"=>"application/json; charset=utf-8", "Date"=>"Tue, 13 Nov 2012 17:00:05 GMT", "Server"=>"nginx/1.2.3", "Status"=>"401 Unauthorized", "Strict-Transport-Security"=>"max-age=500", "X-Runtime"=>"11", "Content-Length"=>"25", "Connection"=>"keep-alive"}, @status=401>
vendor/bundle/ruby/1.9.1/gems/excon-0.16.4/lib/excon/connection.rb:290:in `request_kernel' 
```

## 要求：

*   网址：[https ://example.com/surveys/5/export](https://example.com/surveys/5/export)
*   IP 地址：已编辑
*   参数：{"action"=>"export", "controller"=>"forge/surveys", "id"=>"5"}
*   Rails 根目录：/app
*   时间戳：2012-11-13 12:00:06 -0500

## 回溯：

```
vendor/bundle/ruby/1.9.1/gems/excon-0.16.4/lib/excon/connection.rb:290:in `request_kernel'
vendor/bundle/ruby/1.9.1/gems/excon-0.16.4/lib/excon/connection.rb:101:in `request'
vendor/bundle/ruby/1.9.1/gems/heroku-api-0.3.5/lib/heroku/api.rb:62:in `request'
vendor/bundle/ruby/1.9.1/gems/heroku-api-0.3.5/lib/heroku/api/processes.rb:9:in `get_ps'
vendor/bundle/ruby/1.9.1/gems/workless-1.1.0/lib/workless/scalers/heroku_cedar.rb:18:in `workers'
vendor/bundle/ruby/1.9.1/gems/workless-1.1.0/lib/workless/scalers/heroku_cedar.rb:10:in `up'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:407:in `_run__4556705234962331285__create__3481342325198152291__callbacks'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `__run_callback'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:385:in `_run_create_callbacks'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/callbacks.rb:268:in `create'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/persistence.rb:344:in `create_or_update'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/callbacks.rb:264:in `block in create_or_update' 
```

我已经删除了其余的回溯。回溯中没有任何内容引用我们应用程序中的任何内容。

任何帮助，将不胜感激。

## 更新

这是调查导出的代码 - 非常基本！

```
def export
  @survey.delay.export(current_user.email)
  flash[:notice] = "Your survey exports have been queued for processing and will be emailed to #{current_user.email} when complete."
  redirect_to forge_surveys_path
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T20:24:25.533

好的，我当然是通过浏览回溯中调用的各种库的源代码来解决这个问题的。

最相关的行：

```
vendor/bundle/ruby/1.9.1/gems/heroku-api-0.3.5/lib/heroku/api/processes.rb:9:in `get_ps' 
```

这使用 heroku-api gem 来获取一些工作进程。浏览 heroku-api gem 的源代码，我看到当您通过 API 发出请求时，它会像这样初始化连接：

```
@api_key = options.delete(:api_key) || ENV['HEROKU_API_KEY']
if !@api_key && options.has_key?(:username) && options.has_key?(:password)
  @connection = Excon.new("#{options[:scheme]}://#{options[:host]}", options.merge(:headers => HEADERS))
  @api_key = self.post_login(options[:username], options[:password]).body["api_key"]
end 
```

我的环境没有`ENV['HEROKU_API_KEY']`设置。我确实有这个`HEROKU_PASSWORD`集合，其中包含相同的数据，但这不是这个 gem 想要的。因此，我得到了 401 错误。

我将提交 Heroku 文档的更新，并要求他们将此作为步骤之一，因为它现在不在那里。

为了解决这个问题，我只是做了：

```
heroku config:add HEROKU_API_KEY=KEY 
```

其中 KEY 与 HEROKU_PASSWORD 的值相同。（您可以使用 来查看所有配置变量`heroku config`）。

# c# - 在亚马逊商城中更新商家订单 ID

> ID：13367842
> 
> 赞同：3
> 
> 时间：2012-11-13T20:00:53.190
> 
> 标签：c#, asp.net, amazon, amazon-mws

我需要使用 C# 通过亚马逊 MWS API 更新亚马逊商城中的 MerchantOrderID。

所以，首先我创建了 XML 文件，例如：

```
<?xml version="1.0"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
  <Header>
    <DocumentVersion>1.01</DocumentVersion>
    <MerchantIdentifier>M_STORE_3918753</MerchantIdentifier>
  </Header>
  <MessageType>OrderAcknowledgement</MessageType>
  <Message>
    <MessageID>1</MessageID>
    <OrderAcknowledgement>
      <AmazonOrderID>104-9209939-0469021</AmazonOrderID>
      <MerchantOrderID>100828163</MerchantOrderID>
      <StatusCode>Success</StatusCode>
      <Item>
        <AmazonOrderItemCode>11111111111111</AmazonOrderItemCode>
        <MerchantOrderItemID>111111</MerchantOrderItemID>
        <AmazonOrderItemCode>22222222222222</AmazonOrderItemCode>
        <MerchantOrderItemID>222222222</MerchantOrderItemID>
      </Item>
    </OrderAcknowledgement>
  </Message>
</AmazonEnvelope> 
```

然后我尝试调用亚马逊 MWS SubmitFeed：

```
SubmitFeedRequest request = new SubmitFeedRequest();
        request.Merchant = merchantId;
        request.MarketplaceIdList = new IdList();
        request.MarketplaceIdList.Id = new List<string>(new string[] { marketplaceId });

        request.FeedContent = File.Open(path, FileMode.Open, FileAccess.Read);

        request.ContentMD5 = MarketplaceWebServiceClient.CalculateContentMD5(request.FeedContent);
        request.FeedContent.Position = 0;

        request.FeedType = "_POST_ORDER_ACKNOWLEDGEMENT_DATA_";

        MarketplaceWebService.MarketplaceWebService serviceFeed = new MarketplaceWebServiceClient(
                accessKeyId,
                secretAccessKey,
                applicationName,
                applicationVersion,
                configFeed);

        SubmitFeedResponse response = serviceFeed.SubmitFeed(request); 
```

它成功提交，但是当我在亚马逊 (sellercentral.amazon.com) 中打开我的订单时，它显示“未保存”：您的商家订单 ID：# 未 **保存**

谁能帮助我，有什么问题或我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-05T04:47:41.367

对于那些想要一次在多个订单中更新商家订单 ID 的人，这里是示例（也适用于亚马逊 mws 暂存器）：

```
<?xml version="1.0"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
  <Header>
    <DocumentVersion>1.01</DocumentVersion>
    <MerchantIdentifier>ALVH0CYWPBFNA</MerchantIdentifier>
  </Header>
  <MessageType>OrderAcknowledgement</MessageType>
    <Message>
        <MessageID>1</MessageID>
        <OrderAcknowledgement>
        <AmazonOrderID>000-0000000-0000000</AmazonOrderID>
        <MerchantOrderID>YOUR_MERCHANT_ORDER_ID</MerchantOrderID>
        <StatusCode>Success</StatusCode>
        </OrderAcknowledgement>
    </Message>
    <Message>
        <MessageID>2</MessageID>
        <OrderAcknowledgement>
        <AmazonOrderID>000-0000000-0000000</AmazonOrderID>
        <MerchantOrderID>YOUR_MERCHANT_ORDER_ID</MerchantOrderID>
        <StatusCode>Success</StatusCode>
        </OrderAcknowledgement>
    </Message>
</AmazonEnvelope> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:31:14.910

这实际上是正确的代码。不知何故，亚马逊没有标记某些特殊订单或稍后标记它们。

# c# - Outlook 存储示例未在 .MSG 中找到正文

> ID：13367843
> 
> 赞同：0
> 
> 时间：2012-11-13T20:00:59.570
> 
> 标签：c#, file-format, msg

我正在使用[CodeProject](http://www.codeproject.com/Articles/32899/Reading-an-Outlook-MSG-File-in-C)上的优秀示例来阅读 .MSG 文件，但是很多文件都没有正文。我已经进入了代码，我相信这是因为 Outlook 消息的属性键 __substg1.0_1000 在消息属性中不存在（Outlook Storage 的 GetMapiPropertyFromStreamOrStorage() 方法）。

我是否需要寻找备用属性键来从这些电子邮件中读取消息正文，如果需要，它是什么？还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:12:42.923

我不在电脑附近，好吧，我猜我的手机有点像电脑，但你确定它们是电子邮件吗？日历和联系人项目通常不具有该属性。

PidTagBody、PidTagHtmlBody 和 PidTagRtfBody(?) 都是可以包含正文信息的属性。但是，如果有 HTML 或 rtf 正文，您几乎总是会填充 PidTagBody 属性。

您可以检查 PidTagMessageClass 属性以确定它是否是电子邮件、便笺、联系人等。电子邮件将具有值“IPM.Note”。您必须自己查找这些名称的属性 ID，至少在我可以靠近计算机之前。

# php - 在 WordPress 中为 previous_post_links 和 next_posts_links 添加锚点

> ID：13367844
> 
> 赞同：1
> 
> 时间：2012-11-13T20:01:01.440
> 
> 标签：php, javascript, html, wordpress, anchor

与这个斗争...

在我的 WordPress 主题中，我在顶部有一个画廊，在它下面有博客文章。每次我单击上一个或下一个帖子链接时，它都会转到我不想要的顶部，因此我创建了一个名为#blog 的锚点，并将其放置在我的 html 中，就在画廊下方。如何将锚点添加到 previous_post_links 和 next_posts_links 以使其工作？有没有 JavaScript 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-02T17:45:49.647

我知道这是一个老问题，但这是我如何处理在上一个和下一个帖子链接中添加锚点的方法。您可以将其添加到开始和结束标记之间的 functions.php 中。

```
add_filter('get_pagenum_link', 'whatever_next_previous_anchor');

function whatever_next_previous_anchor($url) {
    return $url . '#blog';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:11:10.997

我认为应该这样做，`get_previous_post()`而是使用：

```
 $prev_post = get_previous_post();
     if (!empty( $prev_post )): ?>
      <a href="<?php echo get_permalink( $prev_post->ID ); ?>#blog">
        <?php echo $prev_post->post_title; ?></a>
     <?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:04:59.187

下一个和上一个链接是否有标识它们的 ID 或类？即使他们不这样做，您仍然可以使用 Javascript 或 Jquery 将 #blog 锚附加到每个链接值。看看这个链接[`Adding a parameter to the URL with JavaScript`](https://stackoverflow.com/questions/486896/adding-a-parameter-to-the-url-with-javascript)。

# facebook - Facebook Graph API：尝试获取公共信息时出现“不支持的获取请求”

> ID：13367852
> 
> 赞同：4
> 
> 时间：2012-11-13T20:01:42.087
> 
> 标签：facebook, facebook-graph-api

到目前为止，我认为可以在向[https://graph.facebook.com/user_id](https://graph.facebook.com/user_id)发出 get 请求时检索每个用户的公共信息。

但我刚刚注意到一个用户，我得到这个作为回应

```
{
   "error": {
      "message": "Unsupported get request.",
      "type": "GraphMethodException",
      "code": 100
   }
} 
```

也无法通过[http://graph.facebook.com/user_id/picture?width=100&height=75](http://graph.facebook.com/user_id/picture?width=100&height=75)获取自定义个人资料图片。

但是即使我没有登录 Facebook，也可以查看用户/页面。所以我无法通过 Graph API（没有访问令牌）访问公共用户信息。

我认为用户可能已经（取消）激活了隐私设置中的某些内容，从而禁用了使用 Graph API 检索公共信息。您对此了解更多吗？

# powershell - 如何从包含 Powershell 中完全限定文件名的变量中获取目录名称？

> ID：13367853
> 
> 赞同：1
> 
> 时间：2012-11-13T20:01:49.083
> 
> 标签：powershell

在 powershell 中，此变量是配置文件的路径： `$Profile`

在我的系统上它等于：

```
 C:\Users\Warren\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1 
```

我只想得到路径部分：

```
 C:\Users\Warren\Documents\WindowsPowerShell\ 
```

在 C# 中你会调用`Path.GetDirectoryName`，所以我想我可以调用`[system.io.Path]::GetDirectoryName($fileName)`，但我想知道在 PowerShell 中是否有我应该知道的内置路径操作系统？

这是人们做的吗？

```
 [system.io.Path]::GetDirectoryName($Profile) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:05:58.507

使用`Split-Path`cmdlet：

```
Split-Path $PROFILE -Parent 
```

# php - 交换两个变量的 XOR 技巧如何真正适用于字符串？

> ID：13367859
> 
> 赞同：4
> 
> 时间：2012-11-13T18:22:01.430
> 
> 标签：php, operators

我刚刚遇到了这段代码，用于在 PHP 中交换两个变量的值：

```
<?php
$a = ‘bar’;
$b = ‘foo’;

$a = $a ^ $b;
$b = $a ^ $b;
$a = $a ^ $b;

echo $a . $b; 
```

我理解二进制的概念；这总是适用于字符串吗？如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T18:28:21.933

PHP 通过将位运算符分别应用于每个字符来将位运算符应用于字符串。

[PHP：按位运算符](http://php.net/manual/en/language.operators.bitwise.php)：

> 注意数据类型转换。如果左侧和右侧参数都是字符串，则按位运算符将对字符的 ASCII 值进行操作。

如果两个字符串具有相同的字符数，或者更准确地说是相同的字节数，这将起作用。如果上面的引用*真的很*精确，那么它可能只适用于纯 ASCII 字符串。

# c# - 具有强类型模型的多个复选框输入

> ID：13367862
> 
> 赞同：0
> 
> 时间：2012-11-13T20:02:39.400
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我有一个用户对象，它包含三位数据、用户、他们的订阅级别以及他们是或可能是成员的所有组的列表。我需要生成一个视图，让我以一种智能的方式编辑这些数据，并且我希望它与我的强类型模型相关联。

我想为每个可能的组设置一个复选框，并允许我的应用程序的用户选中或取消选中复选框以更改成员资格。我遇到的问题是我的行为

```
[HttpPost]
public ActionResult Edit(UserModel usr)
{

} 
```

永远不会从视图中的复选框接收值，但其他属性已正确填充。

我的第一个视图是这样的：

```
...
@Html.EditorFor(m => m.UserName)
@Html.EditorFor(m => m.Subscription)
@Html.EditorFor(m => m.Membership) // just displays the string and bool values
... 
```

我的第二次刺[也失败了]

```
...
@Html.EditorFor(m => m.UserName)
@Html.EditorFor(m => m.Subscription)

@foreach(var itm in Model.Membership) 
{
    @Html.EditorFor(_ => itm)
}
... 
```

我也尝试过，但未能在没有运气的情况下手工制作`<input>`标签。`@Html.`

这是 UserModel 的样子：

```
public class UserModel
{
    public string UserName { get; set; }
    public int Subscription { get; set; }
    public Dictionary<String, bool> Membership { get; set; } // this is the problem
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:02:39.400

可能有更好的方法来解决这个问题，但我最终`Dictionary<String,Bool>`从`List<SelectListItem>`

生成正确post数据的视图代码如下：

```
...
<ul>
@for (int i = 0; i < Model.Membership.Count; i++ )
{
    <li>
        @Html.HiddenFor(_ => Model.Membership[i].Text)
        @Html.HiddenFor(_ => Model.Membership[i].Value)
        @Html.CheckBoxFor(_ => Model.Membership[i].Selected) @Model.Membership[i].Text
    </li>
}
</ul>
... 
```

# cloud-foundry - CloudFoundary：在使用 mysql 的网络应用程序初始化期间出现异常

> ID：13367863
> 
> 赞同：1
> 
> 时间：2012-11-13T20:02:39.223
> 
> 标签：cloud-foundry

我创建了一个使用 mysql 的网络应用程序。我使用弹簧来保持持久性。每件事都在我的本地 tomcat 服务器上运行。我将它上传到 cloudfoundary，我按照指示创建了一个 mysql 服务，并将它用作我的网络应用程序的服务。我尝试运行该应用程序，但出现以下异常：

```
HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
    org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:573)
    org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:812)
    org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:868)
    org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:876)
    com.tutorialspoint.StudentJDBCTemplate.create(StudentJDBCTemplate.java:19)
    com.tutorialspoint.Hello.doGet(Hello.java:58)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

root cause 

com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
    com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:344)
    com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2332)
    com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
    com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
    com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
    com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
    com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    java.sql.DriverManager.getConnection(DriverManager.java:582)
    java.sql.DriverManager.getConnection(DriverManager.java:154)
    org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:173)
    org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:164)
    org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149)
    org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:119)
    org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
    org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
    org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:573)
    org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:812)
    org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:868)
    org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:876)
    com.tutorialspoint.StudentJDBCTemplate.create(StudentJDBCTemplate.java:19)
    com.tutorialspoint.Hello.doGet(Hello.java:58)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

root cause 

java.net.ConnectException: Connection refused
    java.net.PlainSocketImpl.socketConnect(Native Method)
    java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    java.net.Socket.connect(Socket.java:529)
    java.net.Socket.connect(Socket.java:478)
    java.net.Socket.<init>(Socket.java:375)
    java.net.Socket.<init>(Socket.java:218)
    com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:257)
    com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:294)
    com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2332)
    com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
    com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
    com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
    com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
    com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    java.sql.DriverManager.getConnection(DriverManager.java:582)
    java.sql.DriverManager.getConnection(DriverManager.java:154)
    org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:173)
    org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:164)
    org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149)
    org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:119)
    org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
    org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
    org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:573)
    org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:812)
    org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:868)
    org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:876)
    com.tutorialspoint.StudentJDBCTemplate.create(StudentJDBCTemplate.java:19)
    com.tutorialspoint.Hello.doGet(Hello.java:58)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

note The full stack trace of the root cause is available in the Apache Tomcat/6.0.35 logs.

--------------------------------------------------------------------------------

Apache Tomcat/6.0.35 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:24:06.213

如果问题仍然存在：有 2 种方法可以配置与 CF 服务的连接。

1）利用“自动重新配置”。对于任何Java应用程序，如果是使用Spring框架，这里的文档具体描述了细节：[http ://docs.cloudfoundry.com/frameworks/java/spring/spring.html](http://docs.cloudfoundry.com/frameworks/java/spring/spring.html)

2) 对于 Java 应用程序，除 Spring 应用程序外，连接到 CF 提供的服务的详细信息（如主机名或密码）需要明确注意。这些可以通过名为“VCAP_SERVICES”的环境变量检索。只需这个代码片段就可以实现：

```
System.getenv("VCAP_SERVICES") 
```

之后将属性设置为连接配置。

# javascript - 如何使用 AngularJS 修复 IE9 引发 SCRIPT1028 错误？

> ID：13367866
> 
> 赞同：1
> 
> 时间：2012-11-13T20:02:41.423
> 
> 标签：javascript, console, internet-explorer-9, angularjs

我在我的单页应用程序中使用[AngularJS 。](http://angularjs.org/)我在某处定义了这样的按钮

```
<button class="btn btn-success" onclick="doSeekTo({{todo.position}});doPlay();"> 
```

单击此按钮时，将调用带有双花括号中给定参数的 javascript 函数，与 AngularJS 一样。

这一切在 IE9 中运行良好，但是当查看错误控制台时，它在我的花括号位置显示“预期的标识符、字符串或数字”。

**如何摆脱这个错误？**这让我感到不舒服。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:22:38.537

在 Angular 中，您不应该使用内置`onclick`事件，而是使用 Angular 的`ng-click`事件。这样你就可以写

```
ng-click="doSeekTo(todo.position);doPlay()" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:07:47.753

IE9 在您的 angularjs 代码修改它之前解析 HTML。也许像这样的一些间接性会有所帮助......

```
<button class="btn btn-success" paramvalue="{{todo.position}}" onclick="doSeekTo(this.paramvalue);doPlay();"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:35:43.403

另一种选择是将 {{}} 括在单引号中，以便 IE 将其解释为字符串：

```
<button class="btn btn-success"> onclick="doSeekTo('{{todo.position}}');doPlay();"> 
```

# html - 用作背景图像时如何修改 SVG 图像的填充颜色？

> ID：13367868
> 
> 赞同：401
> 
> 时间：2012-11-13T20:02:43.730
> 
> 标签：html, css, svg

将 SVG 输出直接嵌入到页面代码中，我可以简单地使用 CSS 修改填充颜色，如下所示：

```
polygon.mystar {
    fill: blue;
}​

circle.mycircle {
    fill: green;
} 
```

这很好用，但是我正在寻找一种方法来修改作为背景图像的 SVG 的“填充”属性。

```
html {      
    background-image: url(../img/bg.svg);
} 
```

我现在如何更改颜色？甚至可能吗？

作为参考，这里是我的外部 SVG 文件的内容：

```
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="320px" height="100px" viewBox="0 0 320 100" enable-background="new 0 0 320 100" xml:space="preserve">
<polygon class="mystar" fill="#3CB54A" points="134.973,14.204 143.295,31.066 161.903,33.77 148.438,46.896 151.617,65.43 134.973,56.679 
    118.329,65.43 121.507,46.896 108.042,33.77 126.65,31.066 "/>
<circle class="mycircle" fill="#ED1F24" cx="202.028" cy="58.342" r="12.26"/>
</svg> 
```

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2017-10-24T07:49:48.250

您可以使用 CSS 掩码，使用“掩码”属性，您可以创建一个应用于元素的掩码。

```
.icon {
    background-color: red;
    -webkit-mask-image: url(icon.svg);
    mask-image: url(icon.svg);
} 
```

有关更多信息，请参阅这篇精彩的文章：[https ://codepen.io/noahblon/post/coloring-svgs-in-css-background-images](https://codepen.io/noahblon/post/coloring-svgs-in-css-background-images)

* * *

## 回答 #2

> 赞同：182
> 
> 时间：2015-01-07T19:25:28.513

我需要类似的东西，并想坚持使用 CSS。这里有 LESS 和 SCSS mixin 以及可以帮助你的纯 CSS。不幸的是，它的浏览器支持有点松懈。有关浏览器支持的详细信息，请参见下文。

少混合：

```
.element-color(@color) {
  background-image: url('data:image/svg+xml;utf8,<svg ...><g stroke="@{color}" ... /></g></svg>');
} 
```

更少的用法：

```
.element-color(#fff); 
```

* * *

SCSS 混合：

```
@mixin element-color($color) {
  background-image: url('data:image/svg+xml;utf8,<svg ...><g stroke="#{$color}" ... /></g></svg>');
} 
```

SCSS 用法：

```
@include element-color(#fff); 
```

* * *

CSS：

```
// color: red
background-image: url('data:image/svg+xml;utf8,<svg ...><g stroke="red" ... /></g></svg>'); 
```

* * *

[这是](http://css-tricks.com/probably-dont-base64-svg/)有关将完整的 SVG 代码嵌入到 CSS 文件中的更多信息。它还提到了浏览器兼容性，这对于这是一个可行的选择来说有点太小了。

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2012-11-13T20:06:13.737

一种方法是从某种服务器端机制为您的 svg 提供服务。只需创建一个根据 GET 参数输出 svg 的资源服务器端，然后在某个 url 上提供它。

然后你只需在你的css中使用那个url。

因为作为背景 img，它不是 DOM 的一部分，您无法对其进行操作。另一种可能性是定期使用它，以正常方式将其嵌入页面中，但绝对定位，使其全宽和页面高度，然后使用 z-index css 属性将其放在所有其他 DOM 元素后面在一个页面上。

* * *

## 回答 #4

> 赞同：67
> 
> 时间：2015-08-03T23:28:05.993

还有一种方法是使用掩码。然后更改被屏蔽元素的背景颜色。这与更改 svg 的填充属性具有相同的效果。

HTML：

```
<glyph class="star"/>
<glyph class="heart" />
<glyph class="heart" style="background-color: green"/>
<glyph class="heart" style="background-color: blue"/> 
```

CSS：

```
glyph {
    display: inline-block;
    width:  24px;
    height: 24px;
}

glyph.star {
  -webkit-mask: url(star.svg) no-repeat 100% 100%;
  mask: url(star.svg) no-repeat 100% 100%;
  -webkit-mask-size: cover;
  mask-size: cover;
  background-color: yellow;
}

glyph.heart {
  -webkit-mask: url(heart.svg) no-repeat 100% 100%;
  mask: url(heart.svg) no-repeat 100% 100%;
  -webkit-mask-size: cover;
  mask-size: cover;
  background-color: red;
} 
```

你会在这里找到完整的教程：http: [//codepen.io/noahblon/blog/coloring-svgs-in-css-background-images](http://codepen.io/noahblon/blog/coloring-svgs-in-css-background-images)（不是我自己的）。它提出了多种方法（不限于掩码）。

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2020-02-11T11:09:48.797

使用棕褐色滤镜以及色调旋转、亮度和饱和度来创建我们想要的任何颜色。

```
.colorize-pink {
  filter: brightness(0.5) sepia(1) hue-rotate(-70deg) saturate(5);
} 
```

[https://css-tricks.com/solved-with-css-colorizing-svg-backgrounds/](https://css-tricks.com/solved-with-css-colorizing-svg-backgrounds/)

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2015-06-21T10:59:17.663

使用 Sass 是可能的！您唯一需要做的就是对您的 svg 代码进行 url 编码。这可以通过 Sass 中的辅助函数来实现。我为此做了一个codepen。看这个：

[http://codepen.io/philippkuehn/pen/zGEjxB](http://codepen.io/philippkuehn/pen/zGEjxB)

```
// choose a color

$icon-color: #F84830;

// functions to urlencode the svg string

@function str-replace($string, $search, $replace: '') {
  $index: str-index($string, $search);
  @if $index {
    @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
  }
  @return $string;
}

@function url-encode($string) {
  $map: (
    "%": "%25",
    "<": "%3C",
    ">": "%3E",
    " ": "%20",
    "!": "%21",
    "*": "%2A",
    "'": "%27",
    '"': "%22",
    "(": "%28",
    ")": "%29",
    ";": "%3B",
    ":": "%3A",
    "@": "%40",
    "&": "%26",
    "=": "%3D",
    "+": "%2B",
    "$": "%24",
    ",": "%2C",
    "/": "%2F",
    "?": "%3F",
    "#": "%23",
    "[": "%5B",
    "]": "%5D"
  );
  $new: $string;
  @each $search, $replace in $map {
    $new: str-replace($new, $search, $replace);
  }
  @return $new;
}

@function inline-svg($string) {
  @return url('data:image/svg+xml;utf8,#{url-encode($string)}');
}

// icon styles
// note the fill="' + $icon-color + '"

.icon {
  display: inline-block;
  width: 50px;
  height: 50px;
  background: inline-svg('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 30 30" enable-background="new 0 0 30 30" xml:space="preserve">
<path fill="' + $icon-color + '" d="M18.7,10.1c-0.6,0.7-1,1.6-0.9,2.6c0,0.7-0.6,0.8-0.9,0.3c-1.1-2.1-0.4-5.1,0.7-7.2c0.2-0.4,0-0.8-0.5-0.7
  c-5.8,0.8-9,6.4-6.4,12c0.1,0.3-0.2,0.6-0.5,0.5c-0.6-0.3-1.1-0.7-1.6-1.3c-0.2-0.3-0.4-0.5-0.6-0.8c-0.2-0.4-0.7-0.3-0.8,0.3
  c-0.5,2.5,0.3,5.3,2.1,7.1c4.4,4.5,13.9,1.7,13.4-5.1c-0.2-2.9-3.2-4.2-3.3-7.1C19.6,10,19.1,9.6,18.7,10.1z"/>
</svg>');
} 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2017-04-11T08:20:26.480

```
 .icon { 
  width: 48px;
  height: 48px;
  display: inline-block;
  background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/18515/heart.svg) no-repeat 50% 50%; 
  background-size: cover;
}

.icon-orange { 
  -webkit-filter: hue-rotate(40deg) saturate(0.5) brightness(390%) saturate(4); 
  filter: hue-rotate(40deg) saturate(0.5) brightness(390%) saturate(4); 
}

.icon-yellow {
  -webkit-filter: hue-rotate(70deg) saturate(100);
  filter: hue-rotate(70deg) saturate(100);
} 
```

[codeben 文章和演示](http://codepen.io/noahblon/post/coloring-svgs-in-css-background-images)

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2014-08-14T09:53:18.243

现在您可以像这样在客户端实现这一点：

```
var green = '3CB54A';
var red = 'ED1F24';
var svg = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"  width="320px" height="100px" viewBox="0 0 320 100" enable-background="new 0 0 320 100" xml:space="preserve"> <polygon class="mystar" fill="#'+green+'" points="134.973,14.204 143.295,31.066 161.903,33.77 148.438,46.896 151.617,65.43 134.973,56.679 118.329,65.43 121.507,46.896 108.042,33.77 126.65,31.066 "/><circle class="mycircle" fill="#'+red+'" cx="202.028" cy="58.342" r="12.26"/></svg>';      
var encoded = window.btoa(svg);
document.body.style.background = "url(data:image/svg+xml;base64,"+encoded+")"; 
```

[在这里拉小提琴！](http://jsfiddle.net/k0cx2b04/2/)

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2013-11-24T16:07:08.813

将您的 svg 下载为文本。

使用 javascript 修改您的 svg 文本以更改绘画/描边/填充颜色[s]。

然后将修改后的 svg 字符串嵌入到您的 css 中，如此[处](https://stackoverflow.com/a/10768631/62255)所述。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2015-10-30T12:13:57.220

您可以将 SVG 存储在变量中。然后根据您的需要操作 SVG 字符串（即设置宽度、高度、颜色等）。然后使用结果设置背景，例如

```
$circle-icon-svg: '<svg xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" /></svg>';

$icon-color: #f00;
$icon-color-hover: #00f;

@function str-replace($string, $search, $replace: '') {
    $index: str-index($string, $search);

    @if $index {
        @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
    }

    @return $string;
}

@function svg-fill ($svg, $color) {
  @return str-replace($svg, '<svg', '<svg fill="#{$color}"');
}

@function svg-size ($svg, $width, $height) {
  $svg: str-replace($svg, '<svg', '<svg width="#{$width}"');
  $svg: str-replace($svg, '<svg', '<svg height="#{$height}"');

  @return $svg;
}

.icon {
  $icon-svg: svg-size($circle-icon-svg, 20, 20);

  width: 20px; height: 20px; background: url('data:image/svg+xml;utf8,#{svg-fill($icon-svg, $icon-color)}');

  &:hover {
    background: url('data:image/svg+xml;utf8,#{svg-fill($icon-svg, $icon-color-hover)}');
  }
} 
```

我也做了一个演示，[http://sassmeister.com/gist/4cf0265c5d0143a9e734](http://sassmeister.com/gist/4cf0265c5d0143a9e734)。

这段代码对 SVG 做了一些假设，例如该`<svg />`元素没有现有的填充颜色，并且没有设置宽度或高度属性。由于输入在 SCSS 文档中是硬编码的，因此很容易实施这些约束。

不用担心代码重复。[gzip](/questions/tagged/gzip "显示标记为“gzip”的问题")压缩使差异可以忽略不计。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2021-08-15T01:05:03.357

如果您尝试`url()`像这样在 CSS 上直接使用 SVG；

```
a:before {
  content: url('data:image/svg+xml; utf8, <svg xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 451 451"><path d="M345.441,2... 
```

`#`您应该对to进行编码`%23`，否则它将不起作用。

```
<svg fill="%23FFF" ... 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-07-16T21:37:32.777

您可以为此创建自己的 SCSS 函数。将以下内容添加到您的 config.rb 文件中。

```
require 'sass'
require 'cgi'

module Sass::Script::Functions

  def inline_svg_image(path, fill)
    real_path = File.join(Compass.configuration.images_path, path.value)
    svg = data(real_path)
    svg.gsub! '{color}', fill.value
    encoded_svg = CGI::escape(svg).gsub('+', '%20')
    data_url = "url('data:image/svg+xml;charset=utf-8," + encoded_svg + "')"
    Sass::Script::String.new(data_url)
  end

private

  def data(real_path)
    if File.readable?(real_path)
      File.open(real_path, "rb") {|io| io.read}
    else
      raise Compass::Error, "File not found or cannot be read: #{real_path}"
    end
  end

end 
```

然后你可以在你的 CSS 中使用它：

```
.icon {
  background-image: inline-svg-image('icons/icon.svg', '#555');
} 
```

您将需要编辑 SVG 文件并将标记中的任何填充属性替换为 fill="{color}"

图标路径始终与同一 config.rb 文件中的 images_dir 参数相关。

与其他一些解决方案类似，但这非常干净，可以让您的 SCSS 文件保持整洁！

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-05-11T13:59:28.533

在某些（非常具体的）情况下，这可以通过使用[filter](https://developer.mozilla.org/en/docs/Web/CSS/filter)来实现。例如，您可以通过使用 .将色调旋转 45 度将蓝色 SVG 图像更改为紫色`filter: hue-rotate(45deg);`。浏览器支持很少，但它仍然是一项有趣的技术。

[演示](https://jsfiddle.net/michaelvandeweerd/g7tnbxvz/1/)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-08-07T15:21:55.747

对于单色背景，您可以使用带有蒙版的 svg，其中应显示背景颜色

```
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" preserveAspectRatio="xMidYMid meet" focusable="false" style="pointer-events: none; display: block; width: 100%; height: 100%;" >
    <defs>
        <mask id="Mask">
            <rect width="100%" height="100%" fill="#fff" />
            <polyline stroke-width="2.5" stroke="black" stroke-linecap="square" fill="none" transform="translate(10.373882, 8.762969) rotate(-315.000000) translate(-10.373882, -8.762969) " points="7.99893906 13.9878427 12.7488243 13.9878427 12.7488243 3.53809523"></polyline>
        </mask>
    </defs>
    <rect x="0" y="0" width="20" height="20" fill="white" mask="url(#Mask)" />
</svg> 
```

而不是使用这个CSS

```
background-repeat: no-repeat;
background-position: center center;
background-size: contain;
background-image: url(your/path/to.svg);
background-color: var(--color); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-04-09T00:29:05.970

在这里展示晚了，但是，如果您能够直接编辑 SVG 代码，我能够为 SVG 多边形添加填充颜色，例如，下面的 svg 呈现红色，而不是默认的黑色。我还没有在 Chrome 之外测试过：

```
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
 width="500px" height="500px" viewBox="0 0 500 500" enable-background="new 0 0 500 500" xml:space="preserve">
    <polygon 

        fill="red"

        fill-rule="evenodd" clip-rule="evenodd" points="452.5,233.85 452.5,264.55 110.15,264.2 250.05,390.3 229.3,413.35 
47.5,250.7 229.3,86.7 250.05,109.75 112.5,233.5 "/>
</svg> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-10-04T14:07:57.480

我为此找到的唯一方法是跨浏览器（又名防弹），是用 PHP 渲染 SVG 并传递查询字符串来设置颜色。

SVG，这里称为“arrow.php”

```
<?php
$fill = filter_input(INPUT_GET, 'fill');
$fill = strtolower($fill);
$fill = preg_replace("/[^a-z0-9]/", '', $fill);
if(empty($fill)) $fill = "000000";
header('Content-type: image/svg+xml');
echo '<?xml version="1.0" encoding="utf-8"?>';
?>
<svg xmlns="http://www.w3.org/2000/svg" width="7.4" height="12" viewBox="0 0 7.4 12">
    <g>
        <path d="M8.6,7.4,10,6l6,6-6,6L8.6,16.6,13.2,12Z" transform="translate(-8.6 -6)" fill="#<?php echo htmlspecialchars($fill); ?>" fill-rule="evenodd"/>
    </g>
</svg> 
```

然后你像这样调用图像

```
.cssclass{ background-image: url(arrow.php?fill=112233); } 
```

仅适用于 PHP。请记住，每次更改颜色值时，浏览器都会加载新图像。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-21T07:33:02.723

**scss 创建函数**

```
@function url-svg($icon) {
  @return url("data:image/svg+xml;utf8,#{str-replace($icon, "#", "%23")}");
} 
```

**scss 使用**

```
url-svg('<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.125 0H1.875C0.84082 0 0 0.84082 0 1.875V10.3125C0 11.3467 0.84082 12.1875 1.875 12.1875H4.6875V14.6484C4.6875 14.9355 5.01563 15.1025 5.24707 14.9326L8.90625 12.1875H13.125C14.1592 12.1875 15 11.3467 15 10.3125V1.875C15 0.84082 14.1592 0 13.125 0Z" fill="#8A8A8F"/></svg>') 
```

**生成的**CSS****

 **```
url('data:image/svg+xml;utf8,<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.125 0H1.875C0.84082 0 0 0.84082 0 1.875V10.3125C0 11.3467 0.84082 12.1875 1.875 12.1875H4.6875V14.6484C4.6875 14.9355 5.01563 15.1025 5.24707 14.9326L8.90625 12.1875H13.125C14.1592 12.1875 15 11.3467 15 10.3125V1.875C15 0.84082 14.1592 0 13.125 0Z" fill="%238A8A8F"/></svg>') 
```

> **从bootstrap**使用**str-replace**函数。

 *** * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-06-07T09:08:12.933

您可以使用亮度滤镜，任何大于 1 的值都会使元素更亮，任何小于 1 的值都会使其更暗。所以，我们可以让那些浅色的 SVG 变暗，反之亦然，例如，这会使 svg 变暗：

```
filter: brightness(0); 
```

为了改变颜色而不仅仅是亮度级别，我们可以使用棕褐色滤镜和色调旋转，亮度，例如：

```
.colorize-blue {
  filter: brightness(0.5) sepia(1) hue-rotate(140deg) saturate(6);
} 
```

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2016-11-03T05:52:15.547

这是我最喜欢的方法，但您的浏览器支持必须非常先进。使用 mask 属性，您可以创建一个应用于元素的掩码。遮罩在任何地方都是不透明或实心的，下面的图像会透出来。在透明的地方，底层图像被遮盖或隐藏。CSS mask-image 的语法类似于 background-image。[看代码笔](http://codepen.io/noahblon/pen/wzsyC)`mask`

* * *

## 回答 #20

> 赞同：-5
> 
> 时间：2016-02-17T11:52:53.337

很多 IF，但如果您的预 base64 编码 SVG 开始：

```
<svg fill="#000000 
```

然后base64编码的字符串将开始：

```
PHN2ZyBmaWxsPSIjMDAwMDAw 
```

如果预编码的字符串开始：

```
<svg fill="#bfa76e 
```

然后这编码为：

```
PHN2ZyBmaWxsPSIjYmZhNzZl 
```

两个编码字符串的开头相同：

```
PHN2ZyBmaWxsPSIj 
```

base64 编码的怪癖是每 3 个输入字符变成 4 个输出字符。SVG 像这样开始，然后 6 个字符的十六进制填充颜色正好在编码块“边界”上开始。因此，您可以轻松地进行跨浏览器 JS 替换：

```
output = input.replace(/MDAwMDAw/, "YmZhNzZl"); 
```

但是上面的 tnt-rox 答案是前进的道路。****

# android - OCR 简单示例 android 使用 tesseract 编译错误

> ID：13367871
> 
> 赞同：3
> 
> 时间：2012-11-13T20:03:04.090
> 
> 标签：android, ocr

我正在制作一个名为 的库`tesstwo`，它可以工作，但是当我尝试为 Simple Android OCR 进行编译时出现了一个问题。它说：

```
import com.googlecode.tesseract.android.TessBaseAPI;
cannot resolve library 
```

有谁知道问题是什么以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:34:18.340

嘿，我找到了解决方案

您只需要构建您的 Ndk 以及如何做到这一点？这很简单

只需在终端（ubuntu）中保存 tess-two 文件夹的路径即可

```
Ubuntu:cd /home/workspace/tess-two-master/tess-two //This is my path u will have different
 tess-two$: /(path where u have installed ur ndk)/ndk-build

Windows:cd /cygdrive/e/terril/workspace/tess-two-master/tess-two ; /cygdrive/e/terril/Libraries/android-ndk-r8b-windows/android-ndk-r8b/ndk-build 
```

它会工作

# c# - 抽象出 Autofac 的工厂方法支持

> ID：13367872
> 
> 赞同：0
> 
> 时间：2012-11-13T20:03:06.467
> 
> 标签：c#, inversion-of-control, autofac

抽象出 Autofac 的工厂方法支持的正确方法是什么？

我不断收到此异常：

> 此解析操作已结束。使用 lambda 注册组件时，无法存储 lambda 的 IComponentContext 'c' 参数。相反，要么从“c”再次解析 IComponentContext，要么解析基于 Func<> 的工厂以从中创建后续组件。

这是我总结的尝试。

```
public void Register<T>(Func<IFactoryContext, T> factoryMethod)
{
   _containerBuilder.Register<Func<Type, T>>(c => {
      var ctx = c.Resolve<IComponentContext>();
      return request => factoryMethod(new AutofacFactoryContext(ctx));
   });
} 
```

我什至试过

```
public void Register<T>(Func<IFactoryContext, T> factoryMethod)
{
   _containerBuilder.Register<Func<Type, T>>(c => {
      var ctx = c.Resolve<IComponentContext>();
      return request => factoryMethod(new AutofacFactoryContext((IComponentContext)ctx.Resolve(request)));
   });
} 
```

我想要一个返回的方法`T`。

`AutofacFactoryContext`是 的实现`IFactoryContext`，它只是 Autofac 的`IComponentContext`.

最后，这是我期待的结果：

```
 bootstrapper.Register<IFoo>(c => new Foobar()); 
```

在使用容器时：

```
 var foobar = container.Resolve<IFoo>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:13:18.900

我想以下方法会起作用：

```
public void Register<T>(Func<IFactoryContext, T> factoryMethod)
{
   _containerBuilder.Register<Func<Type, T>>(c =>
      request => {
          var ctx = c.Resolve<IComponentContext>();
          factoryMethod(new AutofacFactoryContext(ctx));
   });
} 
```

但是，请注意，这不会使用`request`，就像您的第一个示例一样。由于我不确定您要在这里实现什么目标，因此我无法提出更好的选择。

# sql - 如何在 SQL 的另一列中检索与最大值对应的值？

> ID：13367874
> 
> 赞同：0
> 
> 时间：2012-11-13T20:03:20.953
> 
> 标签：sql

我有下表，代表物品的估价。

```
ITEM             REFERENCEDATE     VALUATION
------------------------------------------------
A                25/01/2012        25.35
A                26/01/2012        51.35
B                25/01/2012        25.00 
```

编辑： (ITEM, REFERENCEDATE) 是唯一索引。

目标是获得一组项目的最新估值。这意味着我正在尝试创建一个 SQL 请求，该请求将返回类似

```
ITEM             REFERENCEDATE     VALUATION
------------------------------------------------
A                26/01/2012        51.35
B                25/01/2012        25.00 
```

流动关于 GROUP BY 的教程，我最终尝试了

```
SELECT A.ITEM, A.VALUATION, MAX(A.REFERENCEDATE)
FROM VALUATIONS A
GROUP BY A.ITEM 
```

充满希望 SQL 服务器会理解我需要 A.VALUATION 用于实现当前结果行上表示的项目的 A.REFERENCEDATE 的最大值的行。

但相反，我收到了这个令人不快的错误消息：

```
Column 'VALUATIONS.VALUATION' is invalid in the select list because it is not contained 
in either an aggregate function or the GROUP BY clause. 
```

如何指示应该使用达到 REFERENCEDATE 最大值的 VALUATION ？

注意：我需要一个至少适用于 Oracle 和 SQL Server 的解决方案

**编辑：**感谢大家的帮助。我被困在一个洞里，试图只用一个 SELECT ... GROUP BY 请求就可以逃脱。现在我看到有两种方法可以表达相同的想法：

1.  使用其他独立请求的结果进行 JOIN，该请求将返回所有 item/max(date) 对
2.  在 where 子句中使用子请求会导致每个项目具有不同的值。

任何人都可以提供一个理由（或指向一个理由的指针）来更喜欢另一个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:09:27.683

```
Select V.Item, V.ReferenceDate, V.Valuation
From Valuations As V
Where V.ReferenceDate = (
                        Select Max(V1.ReferenceDate)
                        From Valuations As V1
                        Where V1.Item = V.Item
                        ) 
```

[SQL 小提琴版本](http://www.sqlfiddle.com/#!3/583c0/1)

为了响应您的编辑，确定哪种方法性能更好的唯一方法是评估每个查询的执行计划。有许多因素可以决定最快的方法，当然 DBMS 本身就是这些因素之一。无论采用何种方法，一个好的查询引擎都应该能够推导出相同或相似的执行计划。也就是说，使用派生表（即方法＃1）可能对查询引擎更明确（即使对查询的读者来说不太明确），因此可能会执行得更好。通常情况下，派生表的性能优于相关子查询（我的解决方案和您的方法 #2）。但是，在我有证据支持这种改变之前，我不会改变这种方法。再次，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T20:53:27.383

如果您几乎使用 MySQL 以外的任何数据库，那么答案就是使用排名函数。特别是，`row_number`您正在寻找什么：

```
select ITEM, REFERENCEDATE, VALUATION
from (select t.*
             row_number() over (partition by item order by referencedate desc) as seqnum
      from t
     ) t
where seqnum = 1 and
      item in (<your list of items>) 
```

行号为每个项目的记录分配一个序列号。它从 1 开始表示最大的参考日期，然后从 2 开始表示下一个最大的参考日期，依此类推（基于 order by 子句）。你想要第一个，其中 seqnum = 1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T20:15:15.210

```
select a.item, a.valuation, a.referencedate
from valuations a
  join (select a2.item, max(referencedate) as max_date
        from valuations a2
        group by a2.item
  ) b ON a.item = b.item and a.referencedate = b.max_date 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T20:08:51.367

试试这个：

```
SELECT A.ITEM, MAX(A.VALUATION), A.REFERENCEDATE
FROM VALUATIONS A
JOIN 
(
    SELECT A.ITEM, MAX(A.REFERENCEDATE) AS REFERENCEDATE
    FROM VALUATIONS A
    GROUP BY A.ITEM
) B ON A.ITEM = B.ITEM AND A.REFERENCEDATE = B.REFERENCEDATE
GROUP BY A.ITEM, A.REFERENCEDATE 
```

它将从保存 max(REFERENCEDATE) 的列中选择 MAX 值。如果您只希望一列具有最大值，那么它只需从它可以选择的一列中进行选择。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-13T20:12:51.537

这是您可能需要的代码：

```
Select  *
    From    ItemValues      As  A
    Inner   Join
        ItemValues      As  MaxValuedItem
    On  MaxValuedItem.Id    =   (
        Select  Top 1
            B.Id
            From    ItemValues  As  B
            Where   B.Item_Id   =   A.Item_Id
            Order   By      B.Valuation Desc
    ) 
```

您需要将 a`"join"`与表**本身**一起使用，该表引用具有**同一项目****最大值**的记录。

# r - PCA Biplot：一种隐藏向量以清晰查看所有数据点的方法

> ID：13367880
> 
> 赞同：3
> 
> 时间：2012-11-13T20:03:46.527
> 
> 标签：r

我正在尝试用 R 做 PCA。

我的数据有 10,000 列和 90 行我使用 prcomp 函数进行 PCA。尝试使用 prcomp 结果准备双标图时，我遇到了 10,000 个绘制向量覆盖我的数据点的问题。双标图是否有任何选项可以隐藏向量的表示？

或者

我可以`plot`用来获取 PCA 结果。但我不确定如何根据编号为 1 到 90 的数据点标记这些点。

```
Sample<-read.table(file.choose(),header=F,sep="\t")

Sample.scaled<-data.frame(apply(Sample_2XY,2,scale))

Sample_scaled.2<-data.frame(t(na.omit(t(Sample_2XY.scaled))))

pca.Sample<-prcomp(Sample_2XY.scaled.2,retx=TRUE)

pdf("Sample_plot.pdf")

plot(pca.Sample$x)

dev.off() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T22:20:51.003

如果执行`help(prcomp)`or `?prcomp`，帮助文件会告诉我们`prcomp()`函数返回的对象中包含的所有内容。我们只需要选择我们想要绘制的东西，并使用一些比`biplot()`.

对于帮助文件没有说明问题的情况，一个更通用的技巧是`str()`对 prcomp 对象（在您的情况下为 pca.Sample）执行 a 以查看其所有部分并找到我们想要的（`str()`紧凑地显示 R 的内部结构目的。 ）

以下是 R 的一些示例数据的示例：

```
# do a pca of arrests in different states
p<-prcomp(USArrests, scale = TRUE) 
```

`str(p)`给了我一些丑陋且太长的东西，但我可以看到 p$x 将状态作为行名，并将它们在主成分上的位置作为列。有了这个，我们可以用任何我们想要的方式来绘制它，比如用`plot()`and `text()`（用于标签）：

```
# plot and add labels
plot(p$x[,1],p$x[,2])
text(p$x[,1],p$x[,2],labels=rownames(p$x)) 
```

如果我们正在制作包含许多观察值的散点图，则标签可能不可读。因此，我们可能只想标记更多的极端值，我们可以用 来识别`quantile()`：

```
#make a new dataframe with the info from p we want to plot
df <- data.frame(PC1=p$x[,1],PC2=p$x[,2],labels=rownames(p$x))

#make sure labels are not factors, so we can easily reassign them
df$labels <- as.character(df$labels)

# use quantile() to identify which ones are within 25-75 percentile on both
# PC and blank their labels out
df[ df$PC1 > quantile(df$PC1)["25%"] & 
    df$PC1 < quantile(df$PC1)["75%"] &
    df$PC2 > quantile(df$PC2)["25%"] &
    df$PC2 < quantile(df$PC2)["75%"],]$labels <- ""

# plot
plot(df$PC1,df$PC2)
text(df$PC1,df$PC2,labels=df$labels) 
```

# c# - 使用 .NET 4 Entity Framework 删除引用的正确方法是什么？

> ID：13367882
> 
> 赞同：0
> 
> 时间：2012-11-13T20:04:10.900
> 
> 标签：c#, .net, entity-framework, entity-framework-4

我有一个`TPM_PROJECTVERSION`名为的实例`projectVersion`，它有一个名为的属性`TPM_USER5`，它的类型是`TPM_USER`。A`TPM_PROJECTVERSION`可以有零个或一个`TPM_USER5`引用（对不起，我没有想出这些名字。）

当用户单击*删除*按钮时，我想删除此引用，从而将数据库中的列设置为空。我尝试了以下方法：

```
projectVersion.TPM_USER5 = null; 
```

但是，当我调用 时`context.SaveChanges()`，该列没有更新，也没有任何反应。在调试器下，我可以看到`projectVersion.TPM_USER5`确实为空，我也看到这`projectVersion.TPM_USER5Reference.IsLoaded`是真的。我也试过：

```
context.DeleteObject(projectVersion.TPM_USER5); 
```

如果我这样做，当我打电话时`context.SaveChanges()`，我会得到异常：

> {“ORA-02292：违反完整性约束 (TPMDBO.TPM_PROJECTCHANGES_TPM_US_FK1) - 找到子记录”}

我很乐意发布有关实体映射的更多信息，但不确定到底是什么相关的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:21:20.820

如果我理解正确，那么您只删除导航属性（TPM_USER5）。尝试将原始属性（TPM_USER5ID？ - 可能是您的数据库列名）设置为空。

每个导航属性都必须具有相关的原始属性（不是 POCO 实体），并且您可以使用两者将用户关联到 TPM_USER5（原始属性 - 集 id，导航属性 - 集引用）。

# java - 通过java在网站上进行搜索

> ID：13367885
> 
> 赞同：0
> 
> 时间：2012-11-13T20:04:20.060
> 
> 标签：java, html-parsing

我想知道如何通过 java 在网站上进行搜索。我想先在网站上搜索一个词。然后网站将返回我一些链接。我想点击这些链接。他们会将我重定向到另一个页面，最后我将从该页面获取数据。我检查了 jsoup 以解析 html 页面，但我不知道如何在网站上进行搜索并使用 java 单击链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:48:02.170

看看这个例子。下载最新的 jar 的[HtmlUnit](http://sourceforge.net/projects/htmlunit/files/latest/download?source=files)。创建新项目导入这些 jar 并添加以下类。希望你能达到你所要求的目标。

```
package com.examples.htmlunit;

import java.io.IOException;
import java.net.URL;
import java.util.List;

import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.Page;
import com.gargoylesoftware.htmlunit.RefreshHandler;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlAnchor;
import com.gargoylesoftware.htmlunit.html.HtmlForm;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.html.HtmlTable;
import com.gargoylesoftware.htmlunit.html.HtmlTableRow;

public class YahooMail {

public static void main(String[] args) throws Exception {

    // Create and initialize WebClient object
    WebClient webClient = new WebClient(BrowserVersion.FIREFOX_2);
    webClient.setThrowExceptionOnScriptError(false);
    webClient.setRefreshHandler(new RefreshHandler() {
public void handleRefresh(Page page, URL url, int arg) throws IOException {
            System.out.println("handleRefresh");
        }

    });

    // visit Yahoo Mail login page and get the Form object
    HtmlPage page = (HtmlPage)  webClient.getPage("https://login.yahoo.com/config/login_verify2?.intl=us&amp;.src=ym");
    HtmlForm form = page.getFormByName("login_form");

    // Enter login and passwd
    form.getInputByName("login").setValueAttribute("@@@@@@@");
    form.getInputByName("passwd").setValueAttribute("@@@@@@@");

    // Click "Sign In" button/link
    page = (HtmlPage) form.getInputByValue("Sign In").click();

    // Click "Inbox" link
    HtmlAnchor anchor = (HtmlAnchor)page.getHtmlElementById("WelcomeInboxFolderLink");
    page = (HtmlPage) anchor.click();

    // Get the table object containing the mails
    HtmlTable dataTable = (HtmlTable) page.getHtmlElementById("datatable");

    // Go through each row and count the row with class=msgnew
    int newMessageCount = 0;
    List rows = (List) dataTable.getHtmlElementsByTagName("tr");
    for (HtmlTableRow row: rows) {
        if (row.getAttribute("class").equals("msgnew")) {
            newMessageCount++;
        }
    }       

    // Print the newMessageCount to screen
    System.out.println("newMessageCount = " + newMessageCount);

    //System.out.println(page.asXml());                 

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:07:59.710

您需要[发出 HTTP 请求](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java)，就像浏览器一样。例如，使用[Google Chrome 中的网络面板](https://developers.google.com/chrome-developer-tools/docs/network)查看当您手动进行搜索时 Chrome 发出的 HTTP 请求，忽略无关紧要的请求并编写代码来模拟那些执行的请求。

为了找到正确的搜索结果来请求（“点击”），您还需要使用类似 jsoup 的东西。

您可以改用 Selenium，但这将是可笑的重量级，除非该站点使用一些复杂的 Javascript 或插件来进行搜索，这是不太可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:21:24.607

首先，您应该熟悉 HTTP 请求协议。然后，将您的网站编程为一个套接字服务器并在连接到您时发送有意义的数据是一件简单的事情。我只使用 socket、os 和 sys 库在 Python 中创建了一个 Web 服务器。

基本的 HTTP 协议是客户端将向服务器发送

GET /path/file.extension HTTP/1.0 <- 基本上 GET 是请求的类型，/path/file.extension 基本上是被请求的文件。HTTP/1.0 是协议 Host: yourwebsite.url <- 我不认为这是必需的 User-Agent: HTTPTool/1.0 <- 基本上就像他们用来发送 HTTP 请求的方法，比如 Chrome 或 Firefox [空白的]

服务器会响应类似于 HTTP/1.0 200 OK <- 再次是协议，然后是消息（未找到 404 等）日期：星期一，2012 年 11 月 19 日 14:15:45 GMT <- 这不是' t 必要，但您也可以将其包含在内 Content-Type: text/html <- 您发送的内容类型，html 是 text/html 还有一些用于图像 zips 等。只需谷歌它（这很简单） Content-Length： 12313131 <- 数据的长度（以字符为单位）。this is NEEDED [blank]
<html>
<head>
<h2>Hi</h2>
</head>
<body>
欢迎来到我的便便
</body>
</html>
然后服务器发送数据后关闭插座。在 Java 中，字符串长度为：
String blah = "

有关 Java 中的套接字的更多信息，请阅读：[http](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)
://docs.oracle.com/javase/tutorial/networking/sockets/index.html 之后，只需将要查找的单词存储在数组中，然后处理发送给客户端的数据。您还希望能够理解 POST。之后，您所做的就是获取他们想要查看的文件，然后将其提供给他们。当他们搜索某些东西时，在数据库中查找它会返回链接或返回未找到的项目。

# android - Admob 广告未完全显示（确实出现少量）

> ID：13367889
> 
> 赞同：1
> 
> 时间：2012-11-13T20:04:38.780
> 
> 标签：android, admob

我对 admob 有一个奇怪的问题，有时只显示一小部分广告。有时它完全没问题，但其他时候只显示顶部（比如前 5%），因此那里有一个添加。我将它们放入 OpenGL 1x 中，如下所示：

```
GLSurfaceView mGLSurfaceView;
LinearLayout ll;
FrameLayout fl;
AdView adView;

mGLSurfaceView = new GLSurfaceView(this);
mGLSurfaceView.setRenderer(this);
adView = new AdView(this, AdSize.BANNER, "xxxxxxxxxx");
adView.loadAd(new AdRequest()); 
ll=new LinearLayout(this); 
ll.addView(adView); // put in LinearLayout, as the ad can't be moved in layout but the layout can be moved when child of another layout
fl = new FrameLayout(this);
fl.addView(mGLSurfaceView); 
fl.addView(ll); // LinearLayout with ad put in FrameLayout. FrameLayout allows us to put other layouts within it where you want.
ll.setPadding(0, 5 /* amount of pixels from top*/ , 0, 0);
ll.setHorizontalGravity(0x11 /*center*/);
setContentView(fl); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:59:53.010

如果您的 adview 没有与布局及时加载，您应该尝试为您的广告提供以下特征（我之前没有编写过 java 视图，所以我会用 XML 编写它们）

*   `android:layout_width="320dp"`

*   `android:layout_height="50dp"`

[即使在请求广告时如何让 AdView “占用”空间？（安卓）](https://stackoverflow.com/questions/5715798/how-to-make-adview-occupy-space-even-while-requesting-an-ad-android)

如果您的建议被另一个视图隐藏，那么您应该致电

```
adview.bringToFront(); 
```

将您的 adview 带到页面的前面

# jquery - XML文件中的2个字段相同

> ID：13367890
> 
> 赞同：0
> 
> 时间：2012-11-13T20:04:43.623
> 
> 标签：jquery, xml

我的 XML 提要中有 3 个名为“Url”的标签，我正在尝试使用 jQuery 提取数据。前两个是图像文件，另一个是网络链接。

一个嵌套在这一层

```
Offer > Images > Image > Url 
```

另一个是在这个级别：

```
Offer > Images > ZoomImage > Url 
```

最后是在这个级别：

```
Offer > Url 
```

如果我使用下面的代码，我只会得到第一个 URL

```
 $(document).ready(function(){
            $.ajax({
                type: "GET",
                url: "datafile.xml",
                dataType: "xml",
                success: function(xml) {
                    $(xml).find('Offer').each(function(){
                        var title = $(this).find('Title').text();
                        var url = $(this).find('Url').text();
                        var description =  $(this).find('Description').text();  
$('<div class="title"</div>').html('<a href="'+url+'">'+title+'</a>').appendTo('#page-wrap');
                    }); 
```

我实际上希望单独返回所有 3 个 URL 以在我的代码中使用。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:07:16.480

```
var url = $(this).children('Url').text();
var urlImage = $(this).find('Images ZoomImage Url').text();
var urlZoomImage = $(this).find('Images Image Url').text(); 
```

只需更具体地使用`.find()`和`.children()`

# file - 需要根据名称查找和删除多个快捷方式的批处理文件

> ID：13367891
> 
> 赞同：-2
> 
> 时间：2012-11-13T20:04:44.957
> 
> 标签：file, batch-file, find, delete-file

我试过使用`findstr`，但它不能正常工作。我需要脚本来搜索`C:\Documents and Settings`快捷方式 ( `.lnk`)。

**快捷方式名称**

```
Accounts Payable
Approval Levels
Clinical Carestation
Downtime Registration
Emergency Department Management
Fixed Assets
General Ledger
Job Stream
Lab Inquiry
Lab Results Processor
Laboratory
Materials Management
Medical Records
Medication Administration
Operating Room Management
Order Management
Paragon Inquiry
Paragon Processor
Patient Management
Patient Supply
Patient View
Payroll
Pharmacy
QEM Extract
Radiology Management
Receivables Administrator
Reference Masters
Registration
Resource Scheduling
Security
Snomed Coding
State Reporting
Statistical Reports
Therapeutic Results Reporting
Utilization Review 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:22:57.093

我想回答你的问题，但后来我意识到有些事情我不知道该怎么做......所以我问了我自己的问题：[是否可以在批处理文件中逐行读取管道？](https://stackoverflow.com/questions/13370113/is-it-possible-in-a-batch-file-to-read-from-a-pipe-line-by-line/13370360#13370360)我学到了一些新东西！

您可以在此命令下找到所有`.lnk`文件：`"C:\Documents and Settings"`

```
for /R "C:\Documents and Settings" %a in (*.lnk) do @echo %a 
```

然后您创建一个 .txt 文件，其中包含您必须删除的快捷方式的部分名称：

```
.*Accounts Payable[^\\]*
.*Approval Levels[^\\]*
.*Clinical Carestation[^\\]*
... 
```

（此正则表达式从匹配项中排除所有目录名称）并且您使用以下命令过滤上一个命令的输出：

```
findstr /r /x /g:filter.txt 
```

这为您提供了您必须删除的所有文件的列表。然后您读取`findstr`并删除过滤后的文件的输出：

```
for /F "delims=" %a in ('more') do @echo del "%a" 
```

这是生成的命令：

```
for /R "C:\Documents and Settings" %a in (*.lnk) do @echo %a | findstr /r /x /g:filter.txt | for /F "delims=" %a in ('more') do @echo del "%a" 
```

只需删除最后一个回声即可实际删除文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:41:28.133

下面的批处理文件删除了位于“C:\Documents and Settings”文件夹中所有文件夹中的所有快捷方式及其变体：

```
@echo off
for /R "C:\Documents and Settings" %%a in (*.lnk) do del %%a 
```

**编辑：** *基于添加的新信息的新解决方案*

好的。让我们假设有一个文本文件，其中包含要删除的快捷方式的基本名称。例如，这是**delete.txt**文件的一部分：

```
Accounts Payable
Approval Levels
Clinical Carestation
. . . . . .
Security
Snomed Coding
. . . . . . 
```

下面的批处理文件删除了先前列表中基本名称的所有变体：

```
@echo off
for /F "delims=" %%a in (delete.txt) do (
   for /R "C:\Documents and Settings" %%b in ("*%%a*.lnk") do echo del "%%b"
) 
```

但是，以前的方法有两个问题：

*   每次批处理程序运行时都必须手动创建删除列表，因为无法提前知道用户将为他们的新快捷方式选择哪些名称。如果必须手动修改所有快捷方式以选择要删除的名称（像以前一样），批处理程序就没有用了。

*   无法将不得删除的快捷方式与必须删除的变体分开。例如，“Security”基本名称允许删除所有这些文件：“Security.lnk”、“Security.lnk 的副本”、“Security.lnk 的副本 (2)”、“Security (2).lnk”等等等，但它也会删除“Windows Firewall with Advanced Security.lnk”。

现在假设有一个文本文件，其中包含要*保留*的快捷方式的全名。例如，这是**preserve.txt**文件的一部分：

```
Windows Firewall with Advanced Security 
```

这个文件只创建一次，只有在创建新的永久快捷方式时才必须修改，因此它比之前的删除列表更容易维护。

下面的批处理文件删除所有现有的快捷方式，保留列表中包含的快捷方式*除外。*

```
@echo off
setlocal
for /F "delims=" %%a in (preserve.txt) do set preserve[%%a]=defined
for /R "C:\Documents and Settings" %%a in (*.lnk) do (
   if not defined preserve[%%~Na] echo del "%%a"
) 
```

安东尼奥

**编辑：** *对 Xaero 的评论*

打扰一下。这只是对您未来问题的简单建议......

你必须意识到更好的问题会带来更好的答案。也许您的问题中有一点您很清楚，但您必须意识到我们对该主题的背景与您不同，因此您应该尝试以批判的眼光阅读自己的解释并提供缺失的信息。例如，当我问你：“你说的名为“副本”的快捷方式在哪里？” 你应该意识到我问这个是因为这些名称没有出现在列表中，而不是因为我想知道这些文件在磁盘中的位置（这正是批处理文件的目的！）。您应该这样回答这个问题：“以前的列表只有基本名称，变体是由它们组合而成的；例如：“应付帐款.lnk 的副本”或“批准级别 (2)。

安东尼奥

**编辑：** *对 fthiella 的评论*

对不起，以下段落无意冒犯。

该站点上的人们希望得到他们问题的可靠和准确的答案。如果您出于了解问题的目的回答问题，那么您很可能提供了错误或不准确的信息。

我建议您在尝试为其他人提供解决方案之前掌握一个主题。如果您向没有经验的人提供错误的答案，他们很可能学习和使用了不适当的技术。事实上，这是在批处理文件社区中传播多种不良习惯的原因之一（例如使用`echo.`命令显示空行，或者`for /F "tokens=* delims= " %%a in ('dir /b *.txt')`代替`for %%a in (*.txt)`，等等）。我国流行一句话：“独眼领瞎子”……

安东尼奥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:06:09.797

由于您要删除的快捷方式没有模式，我建议只创建一个批处理文件来单独删除它们，将通配符放在开头和结尾，以删除任何一个`Copy of`或多个`(2)` `(3)`。

```
del /s /q *shortcut*.lnk 
```

# haskell - 三角形格式的帕斯卡数

> ID：13367892
> 
> 赞同：0
> 
> 时间：2012-11-13T20:04:48.530
> 
> 标签：haskell

在这个社区成员的帮助下，尤其是 Daniel，我可以创建帕斯卡三角形编号列表。但是每当我想将三角形​​显示为三角形时，它都会出现错误，例如：输入“导入”时出现解析错误。我预计 some1 会向前解释这一点。代码如下：

```
 import Text.Printf

    pascal :: [[Integer]]
    pascal = iterate (\prev -> 1 : zipWith (+) prev (tail prev) ++ [1]) [1]

    prettyPascal :: Int -> IO ()
    prettyPascal n = mapM_ (\r -> printf "%*s\n" (div (longest + length r) 2) r) rows
    where rows = map (unwords . map show) $ take (n + 1) pascal
      longest = length $ last rows 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:20:44.457

总结答案：

```
module PrettyPascal where  -- good practice, means you can combine it with other code
import Text.Printf

pascal :: [[Integer]]
pascal = iterate (\prev -> 1 : zipWith (+) prev (tail prev) ++ [1]) [1] 
```

`where`必须比前一行进一步缩进，并且`longest`必须与`rows`:

```
prettyPascal :: Int -> IO ()
prettyPascal n = mapM_ (\r -> printf "%*s\n" (div (longest + length r) 2) r) rows
 where rows = map (unwords . map show) $ take (n + 1) pascal
       longest = length $ last rows 
```

你可以这样做 `main = prettyPascal 10`，但你可能更喜欢：

```
main = 
    putStrLn "How many rows of Pascal's triangle would you like to see?"
    >> readLn >>= prettyPascal 
```

（如果您使用的是 ghci 或 Hugs，则不需要`main`，只需`prettyPrint 10`在提示符处键入即可。）

以下讨论的其他要点：

*   Haskell 区分大小写，所以它必须是`prettyPascal`，而不是`PrettyPascal`。
*   当您使用类型类（如在其他代码中）时，您需要`Eq a =>`而不是`Eq a ->`
*   使用复制和粘贴来避免输入错误
*   将您的函数保存在一个名为`PrettyPascal.hs`.
*   然后通过键入在 ghci 中加载您的函数`:l PrettyPascal`。
*   有时，如果您不确定是您的编译器还是您的代码，请复制并粘贴到`codepad.org`第二个意见。（你也可以下载并安装快速 Hugs 编译器，它执行 Haskell 98 和多参数类型类，但不是很多 ghc 扩展。）

# c++ - this-> 引用所有内容

> ID：13367895
> 
> 赞同：14
> 
> 时间：2012-11-13T20:05:09.043
> 
> 标签：c++

我最近花了很多时间在 javascript 上，现在又回到了 C++。当我从一个方法访问一个类成员时，我倾向于在它前面加上`this->`.

```
class Foo {

  int _bar;

public:  
  /* ... */

  void setBar(int bar) {
    this->_bar = bar;
    // as opposed to
    _bar = bar;
  }
} 
```

在阅读时，当我试图弄清楚它来自哪里时，它为我节省了一个大脑循环。
有什么理由我不应该这样做吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T20:08:11.953

将 this-> 用于类变量是完全可以接受的。

但是，不要以下划线开头的标识符，或在任何`__`地方包含任何带有双下划线的标识符。如果您违反这两个经验法则中的任何一个，则某些类别的保留符号很容易被击中。（特别是，_IdentifierStartingWithACapital 由编译器标准保留）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-13T20:08:28.793

原则上，通过访问成员`this->`是一种有助于使事情更清晰的编码风格，但这似乎是一个品味问题。

但是，您似乎也使用带有`_`（下划线）的前缀成员。我会说这太多了，你应该选择两种风格中的任何一种。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-13T21:27:29.197

> 有什么理由我不应该这样做吗？

是的，你不应该这样做是有原因的。

`this->`仅当名称被隐藏时才严格*要求*引用成员变量，例如：

```
class Foo
{
public:
    void bang(int val);
    int val;
};

void Foo::bang(int val)
{
    val = val;
}

int main()
{
    Foo foo;
    foo.val = 42;
    foo.bang(84);
    cout << foo.val;

} 
```

该程序的输出是`42`, not `84`，因为在`bang`成员变量中已被隐藏，并`val = val`导致无操作。在这种情况下，`this->`需要：

```
void Foo::bang(int val)
{
    this->val = val;
} 
```

在其他情况下，使用`this->`没有效果，因此不需要。

这本身并不是不使用`this->`. 然而，这样一个程序的维护是不使用的一个理由`this->`。

您正在使用`this->`作为文档的一种方式来指定后面的变量是成员变量。然而，对于大多数程序员来说，这并不是 usign`this->`实际记录的内容。使用`this->`文件是：

> 这里隐藏了一个名字，所以我正在使用一种特殊的技术来解决这个问题。

由于这不是您想要传达的内容，因此您的文档已损坏。

与其`this->`用来记录名称是成员变量，不如始终使用合理的命名方案，其中成员变量和方法参数永远不会相同。

**编辑** 考虑相同想法的另一个插图。

假设在我的代码库中，你发现了这个：

```
int main()
{
    int(*fn)(int) = pingpong;
    (fn)(42);
} 
```

相当不寻常的构造，但作为一个熟练的 C++ 程序员，你会看到这里发生了什么。 `fn`是一个指向函数的指针，并且被分配了 的值`pingpong`，不管它是什么。`pingpong`然后用单`int`值调用指向的函数`42`。所以，想知道为什么你需要这样一个小发明，你去寻找`pingpong`并找到这个：

```
static int(*pingpong)(int) = bangbang; 
```

好的，那是什么`bangbang`？

```
int bangbang(int val)
{
    cout << val;
    return val+1;
} 
```

“现在，等一下。这到底是怎么回事？为什么我们需要创建一个指向函数的指针，然后通过它调用？为什么不直接调用函数？这不一样吗？”

```
int main()
{
    bangbang(42);
} 
```

是的，它是一样的。观察到的效果是一样的。

想知道这是否真的只有它，你会看到：

```
/*  IMPLEMENTATION NOTE
 *
 *  I use pointers-to-function to call free functions
 *  to document the difference between free functions
 *  and member functions.
 */ 
```

所以我们使用指向函数的唯一原因是为了表明被调用的函数是一个自由函数而不是一个成员函数。

对你来说，这似乎只是一个“风格问题”吗？因为这对我来说似乎很疯狂。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-13T20:10:55.257

[在这里](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr035.htm)你会发现：

> 除非隐藏类成员名称，否则使用类成员名称等同于使用带有 this 指针和类成员访问运算符 (->) 的类成员名称。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-13T21:53:40.670

我认为你这样做是倒退的。您希望代码向您保证所发生的事情正是预期的。

为什么要添加额外的代码来指出没有发生什么特别的事情？在成员函数中访问类成员一直在发生。这就是预期的结果。*当不是*正常的事情发生时，添加额外的信息会更好。

在这样的代码中

```
class Foo
{
 public:
    void setBar(int NewBar) 
    { Bar = NewBar; } 
```

你问自己 - “`Bar`从哪里来？”。

由于这是类中的设置器，如果不是类成员变量，它会设置什么？！如果不是，*那么*就有理由添加很多关于这里实际发生的事情的信息！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-13T20:12:52.647

由于您已经在使用约定来表示标识符是数据成员（尽管我不建议这样做），因此添加`this->`几乎在所有情况下都是多余的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-13T20:25:38.520

这显然是一个有点主观的问题。`this->`似乎比 C++ 惯用的 Python 惯用得多。在 C++ 中只有少数情况`this->`需要前导，处理父模板类中的名称。一般来说，如果您的代码组织良好，那么读者会很明显它是成员变量或局部变量（应该避免使用全局变量），并且减少要读取的数量可能会降低复杂性。此外，您可以使用可选样式（我喜欢尾随`_`）来指示成员变量。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-13T20:07:21.773

它实际上并没有伤害任何东西，但是有 OO 经验的程序员会看到它并觉得很奇怪。看到“尤达条件句”同样令人惊讶，即`if (0 == x)`.

# jquery-ui - 无法在 plupload 中传递附加参数

> ID：13367897
> 
> 赞同：2
> 
> 时间：2012-11-13T20:05:19.467
> 
> 标签：jquery-ui, parameter-passing, plupload

我正在使用 plupload，JQuery UI 实现。我正在尝试将其他参数传递给服务器，但我无法使其工作。应该很简单，在函数执行时参数已经设置好了，所以这应该不是问题。我试过这个：

```
function GetPlUploader(m)
{
$("#divOpplaster").plupload(
{
    // General settings
    runtimes: 'flash,html5,silverlight',
    url: 'upload.php',
    max_file_size: '10mb',
    chunk_size: '1mb',
    unique_names: true,
    multipart: true,
    multipart_params: [
    {
        'ordre': ordreibruk,
        'mode': m}
    ],

    // Specify what files to browse for
    filters: [
    {
        title: "Bildefiler",
        extensions: "jpg,gif,png,bmp"}
    ],

    // Flash settings
    flash_swf_url: 'plupload/js/plupload.flash.swf',

    // Silverlight settings
    silverlight_xap_url: 'plupload/js/plupload.silverlight.xap',

    init: {
        FileUploaded: function(up, file, info)
        {
            // Called when a file has finished uploading
            console.log('[FileUploaded] File:', file, "Info:", info);
        }
    }
});

console.log("Ordre: " + ordreibruk + ". Mode: " + m)

$("#divOpplaster").dialog(
{
    autoOpen: false,
    width: 650,
    show: "fade",
    hide: "fade"
})

$("#divOpplaster").dialog("open")

// Client side form validation
$('form').submit(function(e)
{
    var uploader = $('#uploader').plupload('getUploader');

    // Files in queue upload them first
    if (uploader.files.length > 0)
    {
        // When all files are uploaded submit form
        uploader.bind('StateChanged', function()
        {
            if (uploader.files.length === (uploader.total.uploaded + uploader.total.failed))
            {
                $('form')[0].submit();
            }
        });

        uploader.start();
    }
    else
    alert('Du må velge minst én fil for opplasting.');

    return false;
});
} 
```

我也尝试在 $('form').submit 部分添加它：

```
uploader.bind('BeforeUpload', function(up)
    {
    up.settings.multipart_params =
    {
        'ordre': ordreibruk,
        'mode': m
    };

}); 
```

但无济于事。

我确定我忽略了一些非常简单的事情，但是什么？

亲切的问候，安德斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:55:36.560

I must confess I use to put my parameters as query string parameters in the url :

*   during init : `url: '/upload.aspx?id='+Id,`
*   or later : `upldr.settings.url = upldr.settings.url + '&token=' + myToken;`

It works fine. Hope this will help

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-01T03:09:10.537

有同样的问题。偶然发现了这个片段，它可以很容易地翻译成咖啡脚本，也适用于我的项目。允许您在初始化后传递多部分参数（例如，在点击上传之前字段可以更改的情况）

```
var myUploader = $('#uploader').plupload('getUploader');
myUploader.bind('BeforeUpload', function(up, file) {
    up.settings.multipart_params = {path : $("#path").val()};
}); 
```

在您完成 $("#divOpplaster").plupload(...) 的正常初始化和设置后调用它（当然，将您的 ID 设置为您的上传者字段）

# c# - Microsoft Office 2013 窗口模板

> ID：13367901
> 
> 赞同：1
> 
> 时间：2012-11-13T20:05:26.020
> 
> 标签：c#, wpf, winforms, templates, office-2013

我想制作一个类似于使用过的模板或 Microsoft Office 2013 Preview 的模板：

![在此处输入图像描述](../Images/18ebc9274737f0bac0a8a27e3c36b90f.png)

有人可以给我一些提示吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:59:06.607

Office 2013 Preview 的界面与 Metro 非常相似。我认为您应该看到这篇文章：[使用 WPF 构建 Metro UI](http://nikosbaxevanis.com/2010/12/01/building-a-metro-ui-with-wpf/)并寻找任何使控件看起来像 Metro 应用程序的 wpf 模板。看看这个[Nuget 包](http://nuget.org/packages/MetroWPF/0.2.6.0)。希望这些信息可以帮助您开始...

# php - 使用 json_encode 为 javascript var 重新格式化 json

> ID：13367903
> 
> 赞同：0
> 
> 时间：2012-11-13T20:05:31.023
> 
> 标签：php, javascript, json

快速问题我真的需要一些帮助，我重新格式化了一些 json 以将其转换为 javascript var，我让它与 json_encode 一起工作，但我需要它输出 ' 符号而不是 " 符号，有没有办法做到这一点

我需要它是这样的（使用'符号）

```
{
title:'Greeting',
mp3:'http://www.godsgypsychristianchurch.net/music/Atlanta%20GA/Dey%20duma%20amensa/01%20Greeting.mp3',
buy:'http://www.godsgypsychristianchurch.net/music/Atlanta%20GA/Dey%20duma%20amensa/01%20Greeting.mp3',
price:'Download',
duration:'',
cover:'http://godsgypsychristianchurch.net/music_artwork/DEFAULT_COVER.png'}, 
```

我的代码：

```
foreach ($json['rows'] as $row) {
    if ($_GET['churchname'] == $row[doc]['album']) {
        $songCount = 0;
        foreach ($row['doc']['tracks'] as $song) {
            ++$songCount;
            $arr = array(
                "title" => "{$song['name']}",
                "mp3" => "{$songUrl}",
                "buy" => "{$songUrl}",
                "price" => "Download",
                "duration" => "",
                "cover" => "{$row['doc']['artwork']}",
                );
            echo json_encode($arr);
        }
    }
}
exit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:13:57.900

1）你不能让它使用`' '`，因为有效 JSON 的规范要求`" "`，所以任何希望将你的字符串从 JSON 解析为 JS/PHP/etc 中的对象的程序都会出错

2）为什么？JS 不关心您使用哪种方式，一种方式或另一种方式，如果您在服务器端做某事，请将其保留为多维（潜在关联）数组。

3）如果是为了包含`" "`在您的实际字符串中，则使用 转义它们`\`，如下所示：

```
$myString = "This is my \"double-quoted\" string";

$myString === 'This is my "double-quoted" string';
$myString === "This is my " . '"double-quoted"' . "string"; 
```

如果您将字符串连接在一起，并且其中一个字符串本身已经包含双引号，那么您的语言将自动确保它们被转义。

我很乐意提供进一步帮助，但我需要知道“为什么？” 部分。

# ruby-on-rails - 在 rails 的任何模型中获取 current_user

> ID：13367904
> 
> 赞同：0
> 
> 时间：2012-11-13T20:05:32.663
> 
> 标签：ruby-on-rails, model

我正在尝试将 current_user 值放入模型中。我知道这可能不合适，因为模型应该远离这种类型的交互，但我遇到了问题。我需要在模型的方法中包含一个 current_user 并且不知道该怎么做。

我需要在我的阶段控制器的更新中实现这一点，并将 current_user 传递给阶段模型，并让 current_user 值可用。任何帮助表示赞赏。

```
def update
  if @stage.update_attributes(params[:stage])
   redirect_to [@project, @stage], :notice => 'Stage was successfully updated.'
  else
   render :action => "edit"
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:02:32.833

您还可以将当前用户存储到 Thread.current 的哈希中。

请参阅[http://rails-bestpractices.com/posts/47-fetch-current-user-in-models](http://rails-bestpractices.com/posts/47-fetch-current-user-in-models)

```
class User < ActiveRecord::Base
  def self.current
    Thread.current[:user]
  end
  def self.current=(user)
    Thread.current[:user] = user
  end
end 
```

# zend-framework2 - ZfcUser 注册并发症

> ID：13367905
> 
> 赞同：0
> 
> 时间：2012-11-13T20:05:37.110
> 
> 标签：zend-framework2, zfcuser

我的问题是 ZfcUser 模块在 OpenShift 主机上无法正常工作。在我的电脑上本地一切正常，我可以注册和登录，但上传它是不可能的。甚至没有出现错误。它所说的一切都是“身份验证失败。请重试。”

我的配置似乎没问题，我尝试了很多不同的组合，但看起来 scipts 可以访问数据库（当我更改为随机内容时，它会显示异常等）。

我发现当我提交注册表时它通过但它没有将用户添加到数据库中它是空的。另一件事是，即使“login_after_reigster”选项为“false”，它仍然会在“通过”注册后尝试登录。

一切都与本地（它工作的地方）相同（期望数据库配置）但不在远程主机上工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T13:03:41.750

尝试导出本地数据库并在服务器上导入！我也有这个问题，这似乎解决了它。

或者，如果可以的话，在控制台中运行

`php /path/to/public/folder/index.php orm:schema-tool:create --force`

然后它将起作用！

# architecture - 我需要帮助将我的设计整合到 Azure 中。

> ID：13367913
> 
> 赞同：0
> 
> 时间：2012-11-13T20:06:00.810
> 
> 标签：architecture, azure, azureservicebus

![在此处输入图像描述](../Images/99b511906638d3e6b8a25ff22d1fce1b.png)

我猜我想在所有服务器端处理（清理、增强、社交配置文件和电子邮件通知）之前使用某个版本的 Azure 服务总线。

Azure 服务总线上的文档对我来说非常神秘，我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:24:52.107

将所有这些处理从您的 Web 角色中移出绝对是一个好主意。服务总线队列肯定会起作用。另一种选择是改用[Azure 存储队列](https://www.windowsazure.com/en-us/develop/net/how-to-guides/queue-service/)。您可能会发现它们更容易理解，因为它们是通过 HTTP 的队列概念的相对简单的实现，并且 .NET 客户端库非常好。我相信它们也往往更便宜。

也有很多方法可以分解后台处理。你可以：

1.  通过在 WebRole.Run() 方法中启动工作线程来完成工作，将您的 Web 角色用作工作人员。
2.  让一个工人连续完成所有阶段。
3.  有一个单独执行所有阶段的工作人员，每个阶段之间有另一个队列。
4.  每个阶段有多个工人，甚至多个工人。

根据工作的资源密集程度和需要完成的速度，一种方法可能比其他方法更好。更密集的处理往往会使您在该列表中走得更远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:06:20.853

这取决于该项目/产品的复杂程度以及您有多少事务......但正如您所提到的，您可以使用服务总线队列来：

1.  接收消息并将它们临时存储在 FIFO 队列中
2.  将它们传递给特定的功能工作者角色：“scrub contacts”工作者角色
3.  将消息传回队列/存储

这样做的好处是您可以拥有一个执行 4 项特定任务的工作人员角色：清理消息、增强数据、提取社交资料、电子邮件通知。您可以根据消息选择功能。

您可以让一条消息进入队列，队列将其传递给工作角色，告诉它“清理消息”，传递回队列，队列将其传递给工作角色“增强数据”等。

或者您可以有一个服务总线队列并执行“清理消息、增强数据、提取社交资料、电子邮件通知”......等等

这样做的美妙之处在于服务总线队列管理 FIFO 传统消息传递功能。此外，您拥有一个松散耦合的工作角色系统，可以根据需要进行显着扩展以增加消息处理。

# php - 动态菜单 = PHP 数据库驱动

> ID：13367914
> 
> 赞同：1
> 
> 时间：2012-11-13T20:06:06.137
> 
> 标签：php, menu, database-driven

这是 PHP5 5.3.10 的自定义和数据库驱动的无序列表脚本 如您所见，此方法来自程序背景。

它大约 1 岁了，今天，我想再写一次，这个脚本的数据仅来自 1 个 SQL 表；由 dao 类和多个公共函数触发。

这段代码按预期工作，但对我来说有点难看，你怎么看，如果你想再写一次，你会从哪里开始？

基本上脚本会产生这个 html ：

```
<div class="menuInside" id="menu">
    <div>
        <ul class="">
            <li class="first"><a onclick="this.blur()" id="bienvenue" href="/bienvenue.html"><img width="109" height="19" alt="Bienvenue" src="/images/menu/bienvenue.png"></a></li>
            <li class="text"><a href="/bienvenue.html">Nous sommes heureux de vous accueillir sur notre site Internet.</a></li>
        </ul>
    </div>
    <div>
        <ul class="insidemiddle ulactive">
            <li class="second"><a onclick="this.blur()" id="marques" href="/lingerie-feminine.html"><img width="102" height="23" alt="Marques" src="/images/menu/marques.png"></a></li>
            <li class="elements"><a href="/barbara.html">Barbara</a></li>
            <li class="elements"><a href="/calida.html">Calida</a></li>
            <li class="elements"><a href="/canat.html">Canat</a></li>
            <li class="elements"><a href="/chantelle.html">Chantelle</a><img width="9" height="9" class="last" alt="" src="/images/menu/menu_item.png"></li>
            <li class="elements"><a href="/charmline-lidea.html">Charmline &amp; Lidea</a></li>
            <li class="elements"><a href="/eminence.html">Eminence</a><img width="9" height="9" class="last" alt="" src="/images/menu/menu_item.png"></li>
            <li class="elements"><a href="/empreinte.html">Empreinte</a></li>
            <li class="elementsOne"><a href="/lisanza.html">Lisanza</a></li>
            <li class="elements"><a href="/lise-charmel.html">Lise Charmel</a><img width="9" height="9" class="last" alt="" src="/images/menu/menu_item.png"></li>
            <li class="elements"><a href="/lou.html">Lou</a></li>
            <li class="elementsThree"><a href="/marjolaine.html">Marjolaine</a></li>
            <li class="elements"><a href="/pain-de-sucre.html">Pain de Sucre</a><img width="9" height="9" class="last" alt="" src="/images/menu/menu_item.png"></li>
            <li class="elements"><a href="/rcrescentini.html">R. Crescentini</a></li>
            <li class="elements"><a class="active" href="/save-the-queen.html">Save The Queen</a><img width="9" height="9" class="last" alt="" src="/images/menu/menu_item.png"></li>
            <li class="elements"><a href="/secret-eva.html">Secret d'Eva</a></li>
            <li class="elements"><a href="/trasparenze.html">Trasparenze</a></li>
            <li class="elements"><a href="/triumph.html">Triumph</a><img width="9" height="9" class="last" alt="" src="/images/menu/menu_item.png"></li>
            <li class="elements"><a href="/twin-set.html">Twin Set</a></li>
        </ul>
    </div>
    <div>
        <ul class="insidemiddle">
            <li class="first"><a onclick="this.blur()" id="lingerie" href="/lingerie-feminine.html"><img width="88" height="21" alt="Lingerie" src="/images/menu/lingerie.png"></a></li>
            <li class="elementsOne"><a href="/lingerie-feminine.html">Féminin</a></li>
            <li class="elements"><a href="/lingerie-masculine.html">Masculin</a><img width="9" height="9" class="last" alt="" src="/images/menu/menu_item.png"></li>
            <li class="elementsTwo"><a href="/lingerie-de-nuit.html">Linge de Nuit</a></li>
            <li class="elements"><a href="/articles-balneaires.html">Articles Balnéaires</a><img width="9" height="9" class="last" alt="" src="/images/menu/menu_item.png"></li>
            <li class="elementsNine"><a href="/collants-bas-mi_bas-chaussettes.html">Collants, Bas, Mi-bas, Chaussettes...</a><img width="9" height="9" class="last" alt="" src="/images/menu/menu_item.png"></li>
            <li class="elementsTen"><a href="/laine-et-soie.html">Laine et Soie</a><img width="9" height="9" class="last" alt="" src="/images/menu/menu_item.png"></li>
        </ul>
    </div>
    <div>
        <ul class="">
            <li class="first"><a onclick="this.blur()" id="contact" href="/contact.html"><img width="106" height="19" alt="Contact" src="/images/menu/contact.png"></a></li>
            <li class="text"><a href="/contact.html">Si vous souhaitez nous faire part de vos impressions ou pour tout autre commentaire...<br>
                <br>
                Nos horaires d'ouvertures</a></li>
        </ul>
    </div>
</div> 
```

你想指出我正确的方向吗？

这是脚本：

```
<?php
$id=isset($_GET['id'])?$_GET['id']:1;
($id!=1)?$classNav='menuInside':$classNav='menu';
?>

<div id="menu" class="<?=$classNav?>"><?php $cliao=new cliao();
    $ActiveNav_result=$cliao->SubNav(array(" display_block"=>'=1'," id_marque"=>'='.$id),"id_menu",1);
    $ActiveNav_item=$cliao->fetchResult($ActiveNav_result);
    $Nav_result=$cliao->Nav(array(" display_block"=>'=1'),"id_menu");
    while($MainNav_items=$cliao->fetchResult($Nav_result)){$SubNav_result=$cliao->SubNav(array(" display_block"=>"=1"," id_menu"=>'='.$MainNav_items->id_menu),"id_menu",1);
        if($classNav!="menu"){($MainNav_items->Nav_type==1)?$class='insidemiddle':$class='';
            ($ActiveNav_item->id_Nav==$MainNav_items->id_menu)?$class.=' ulactive':$class.='';
            echo '<div><ul class="'. $class .'">'."\n";
        }else{
            ($MainNav_items->Nav_type==1)?$class='ulactive middle':$class='ulactive';
                echo '<div><ul class="'.$class.'">'."\n";
        }
    while($MainSubNav_items=$cliao->fetchResult($SubNav_result)){
        ($MainNav_items->class_block==2)?$firstclass='class="first"': $firstclass='class="second"';
        echo ($MainNav_items->display_block==1)?'<li '.$firstclass.'><a href="'.$MainNav_items->href_link.'" id="'.$MainNav_items->name.'" onclick="this.blur()"><img src="/images/menu/'.$MainNav_items->name.'.png" alt="'.ucfirst($MainNav_items->name).'" width="'.$MainNav_items->image_width.'" height="'.$MainNav_items->image_height.'" /></a></li>'."\n":'';
        }
        $SubNav_result=$cliao->SubNav(array(" display_block"=>"=1"," id_menu"=>'='.$MainNav_items->id_Nav),"id_menu");
    while($MainSubNav_items=$cliao->fetchResult($SubNav_result)){($MainSubNav_items->Nav_last=="yes")?$last='<img src="/images/menu/menu_item.png" alt="" width="9" height="9" class="last" />':$last='';
        ($MainSubNav_items->id_marque==$id)?$activeclass='class="active"':$activeclass='';
?>
        <li class="<?=$MainSubNav_items->Nav_class?>"><a href="<?=$MainSubNav_items->href_link?>" <?=$activeclass?>><?=$MainSubNav_items->text?></a><?=$last?></li><?="\n"?><?php }echo '</ul></div>'."\n";
    }
?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:13:12.783

我总是确保尽可能将我的数据库内容绑定到生成的 HTML 中。例如，而不是：

```
if($classNav!="menu"){($MainNav_items->Nav_type==1)?$class='insidemiddle':$class='';
        ($ActiveNav_item->id_Nav==$MainNav_items->id_menu)?$class.=' ulactive':$class.='';
        echo '<div><ul class="'. $class .'">'."\n";
    }else{
        ($MainNav_items->Nav_type==1)?$class='ulactive middle':$class='ulactive';
            echo '<div><ul class="'.$class.'">'."\n";
    } 
```

我会将所需的最终结果存储`$ClassNav`在数据库中并像这样编写：

```
echo '<ul class='$ClassNav'>\n'; 
```

我也会跳过那些乱七八糟的`class='first'`废话，并尽可能使用[CSS 的第一个子伪元素](http://www.w3schools.com/cssref/sel_firstchild.asp)。

我看你用`while`的很多。我不怪你，这就是 90% 的 PHP 指南（以及 PHP.net 上的示例代码）的工作方式。但是，这并不理想，因为：

1.  它依赖于难以理解且笨拙的[Internal Row Pointer](http://php.net/manual/en/function.reset.php)，可以说是最不直观的数组导航方法，以及
2.  结果你不得不写很多可笑的臃肿之类的`$MainSubNav_items=$cliao->fetchResult($SubNav_result)`。

让您的生活更轻松。首先将数据转换为数组，然后使用 或 访问`foreach ($data as $record) { $out .= $record['fieldname']; }`它`for ($i = 0; $i < sizeOf($record); $i++) { $out .= $record[$i]['fieldname']; }`。

在那个比较`foreach`中更简洁，而`for`让您更多地访问流控制。

最后，考虑将其重写为递归函数：通过列表呈现，当遇到子菜单时，调用自身生成下一级。更容易，更健壮。:)

例如，这是我在（内部）面向对象工具包中使用的菜单生成代码：

```
public function Render($Menu = false){ 
    $Menu = (is_array($Menu) ? $Menu : $this->MainMenu); // If no menu array is passed, pull the main menu object from the class constructor
    $Out = "<ul class='SuuiMenu'>"; //building an $Out string instead of echoing is preferable as the resulting function can be used in more contexts

    foreach ($Menu as $Entry){
        if ($Entry['Link'] !== '#'){ //I use a link value of # for submenu headers
            $Entry['Link'] = base_url().$Entry['Link'];
        }
        $Out .= "
            <li>
                <a href='{$Entry['Link']}'>{$Entry['Title']}</a>";
            if (isset($Entry['Children'])){ //if this menu entry has 'Children' in its array, this method calls itself with that child's array as an argument and adds the whole thing to $Out
                $Out .= $this->Render($Entry['Children'], false);
            }   
        $Out .="</li>
        ";
    }

    $Out .= "</ul>";

    return $Out; //to be echoed, modified further in PHP-DOM, cached, etc :)
} 
```

# php - php F3框架中使用ORM Axon的select语句

> ID：13367917
> 
> 赞同：1
> 
> 时间：2012-11-13T20:06:13.370
> 
> 标签：php, mysql, fat-free-framework

我是 PHP 的 Fat-Free-Framework F3 的新手
我正在尝试建立一个博客
我有一个简单的查询

```
'SELECT * FROM blogs  ORDER BY created DESC LIMIT 5' 
```

我想使用 F3 框架中内置的 Axon ORM 构建此查询

在我看来，我想试试这个：

```
 $blogs = new Axon('blogs');
     $blogs->load(array('limit'=>5, 'order by'=>'created', 'order'=>'DESC')); 
```

这是正确的方法吗？
有谁知道任何好的 Axon 文档？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T16:53:33.423

这会做到的。您现在可以将 $posts 作为 Axon 对象进行循环。

```
$blogs = new Axon('blogs');
$posts = $blogs->find('','created DESC',5); 
```

虽然 Fatfree 看起来简单易行，但与现有产品相比却显得苍白无力。

# perforce - 如何将 Perforce 恢复到以前的稳定状态？

> ID：13367920
> 
> 赞同：1
> 
> 时间：2012-11-13T20:06:25.807
> 
> 标签：perforce

我有一个使用 Perforce 的项目。我正在查看的场景如下：

多个用户将他们的更改提交到 Perforce 存储库，我想在同步之前拍摄快照。如果新版本有一些问题，我希望能够恢复。

基本上我想创建当前文件的快照，我可以使用“p4 have”查看，然后在同步到 head 修订后恢复为“p4 have”文件！我怎样才能做到这一点 ！

我尝试使用'p4 tag -l rel1 //depot/'，但是这个命令会为头部修订创建一个标签。我正在寻找一种方法来执行诸如“p4 label have”之类的命令！可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:00:25.663

您需要指定您希望标签仅包含当前工作区中的文件：

`p4 tag -l rel1 //depot/...#have`

或者更好的是使用这个快捷方式：

`p4 label myws`（定义标签） `p4 labelsync`（标记您当前在工作区中拥有的内容）

然后你可以恢复：

`p4 sync @myws`

# html - 如何在 JSP 中的两个变量之间插入空格？

> ID：13367921
> 
> 赞同：4
> 
> 时间：2012-11-13T20:06:26.023
> 
> 标签：html, forms, jsp, el

我在 JSP 页面上的表单中有一行 html，如下所示：

```
<c:forEach var="entry" items="${set}">
    <input type="checkbox" name="thing" value="${entry.key} ${entry.value}">
</c:forEach> 
```

但是，`${entry.key} ${entry.value}`提交表单时，键和值之间的空间会丢失。我尝试在`\`之前使用 a `，在这种情况下，提交时 the`\`和 the`仍然存在。``

 ``似乎 Java EL 不保留隔离空间，对吗？如果是这样，是否有有效的解决方法？

编辑：这对我来说太傻了，非常感谢 Cthulhu。但是我仍然不明白添加`\`. 为什么会导致空间显示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T20:07:17.723

您可以使用以下方法插入空格： `&nbsp;`

**[字符实体引用](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)**

**编辑**：似乎是 EL 解析器处理空间的方式中的一个错误，因此您应该使用类似 html 实体或[**此处**](https://stackoverflow.com/a/2134454/759019)`&nbsp;`概述的其他方式。[](https://stackoverflow.com/a/2134454/759019)

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-22T12:07:22.040

```
${entry.key}${' '}${entry.value} 
```

是我解决这个问题的方法。似乎比

```
<c:out value="${bean.foo} ${bean.bar} ${bean.waa}" /> 
```

从另一个线程。**``

# android - android如何在为listview自定义ArrayAdapter之后管理项目

> ID：13367924
> 
> 赞同：0
> 
> 时间：2012-11-13T20:06:53.913
> 
> 标签：android, android-listview, android-arrayadapter

我希望我`ListView`的每个项目都持有`View`，因此我编写了自己的`ArrayAdapter`. 也就是说， my`ListView`是`View`now 而不是`TextView`.

但是现在，我该如何管理 中的项目`ListView`？例如，如果我想改变视图的背景颜色，如果我把它`setBackgroundColor(Color.BLACK)`放在`View`.

这是我的自定义 ArrayAdapter 代码：

```
public class DataViewAdapter extends ArrayAdapter<DataView>{
Context context;
int layoutResourceId;
ArrayList<DataView> views;

public DataViewAdapter(Context context, int layoutResourceId,
        ArrayList<DataView> views) {
    super(context, layoutResourceId, views);
    this.context = context;
    this.layoutResourceId = layoutResourceId;
    this.views = views;
}

@Override
public View getView(int position, View convertView, ViewGroup parent){
    View row = convertView;
    ViewHolder holder = null;
    if(row == null){
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);
        holder = new ViewHolder();
        holder.view = (View)row.findViewById(R.id.dataView);
        row.setTag(holder);
    } else {
        holder = (ViewHolder)row.getTag();
    }
    DataView dataView = views.get(position);
    holder.view = dataView;
    return row;
}

static class ViewHolder{
    public View view;
}

} 
```

另外，如果我需要将不同的数据值传递给每个`View`？在接受新数据值时，需要触发`onDraw(Canvas canvas)`my 内部的方法。`DataView`

编辑：代码`DataView`

```
public class DataView extends View{
    private LinkedList<Integer> data;
    public DataView(Context context){
        super(context);
        data = new LinkedList<Integer>();
    }
    public void onDraw(Canvas canvas){
    // I need to plot according to data
    }
    public void pushData(int value){
        data.add(value);
        this.invalidate();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:15:30.860

通常你`getView()`在适配器的方法中创建/设置你的视图（也许你应该扩展`BaseAdapter`类而不是`ArrayAdapter`。但是看哪！项目视图背景的处理是一个非常特殊的章节。有关更多信息，请参阅以下问题/答案：

*   [滚动时背景ListView变黑](https://stackoverflow.com/questions/2833057/background-listview-becomes-black-when-scrolling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:13:32.000

您需要了解 ListView 的工作原理。它不仅有视图数组 - 这些视图在用户向上/向下滚动以保留内存时被重用。您需要做的是将您的逻辑放入[Adapter#getView 方法](http://developer.android.com/reference/android/widget/ArrayAdapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)并在那里重置您的背景、字体等。

当然，您需要扩展适配器以添加您的代码。使用 Holder 模式来保存对视图元素的引用也是非常可取的，这样您就不必一次又一次地搜索这些元素。这是有关如何执行此操作[的示例](http://www.jmanzano.es/blog/?p=166)

编辑：所以根据您的代码片段 - 您没有正确使用 Holder 模式。假设您的列表项视图是 LinearLayout，然后在您的 Holder 构造函数中执行类似的操作

```
this.title = (TextView)view.findViewById(R.id.title); 
```

然后`Adapter#getView`你可以做类似的事情

```
View getView(int position, View view, ViewGroup parent) {
    ViewHolder holder = null;
    if(row == null){
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        view = inflater.inflate(layoutResourceId, parent, false);
        holder = new ViewHolder(view);
        view.setTag(holder);
    } else {
        holder = (ViewHolder)view.getTag();
    }
    // MyData is one piece of data in the backing array
    MyData data = (MyData)getItem(position); 
    if (data.important) {
        view.setBackground(Color.red);
        holder.title.setText(data.title);
    }
    return view;
} 
```

# asp.net - 如何在自定义对象上检索对象的属性名称/值对？

> ID：13367929
> 
> 赞同：1
> 
> 时间：2012-11-13T20:07:15.483
> 
> 标签：asp.net, c#-3.0

我有一个自定义对象，每个属性都有不同的数据类型。我希望能够做类似的事情：

```
 public void evalCI(configurationItem CI)
     {
    foreach (PropertyInformation n in CI)
       {
        Response.Write(n.Name.ToString() + ": " + n.Value.ToString() + "</br>");
       }
     } 
```

我的自定义对象是：

```
public class configurationItem : IEnumerable

{
    private string serial;
    private string model;
    private DateTime? wstart;
    private DateTime? wend;
    private Int32 daysLeft;
    private string platform;
    private string productVersion;
    private string manufacturer;
    private bool verificationFlag;        

    IEnumerator IEnumerable.GetEnumerator()
    {
        return (IEnumerator)GetEnumerator();
    }

    public string Serial
    {
        set { serial = value; }
        get { return serial; }
    }
    public string Model
    {
        set { model = value; }
        get { return model; }
    }
    public DateTime? Wstart
    {
        set { wstart = value; }
        get { return wstart; }
    }
    public DateTime? Wend
    {
        set { wend = value; }
        get { return wend; }
    }
    public Int32 DaysLeft
    {
        set { daysLeft = value; }
        get { return daysLeft; }
    }
    public string Platform
    {
        set { platform = value; }
        get { return platform; }
    }
    public string ProductVersion
    {
        set { productVersion = value; }
        get { return productVersion; }
    }
    public string Manufacturer
    {
        set { manufacturer = value; }
        get { return manufacturer; }
    }
    public bool VerificationFlag
    {
        set { verificationFlag = value; }
        get { return verificationFlag; }
    } 
```

我的预期输出是：

-序列号：1234567

-型号：野马

-W开始：2005 年 12 月 12 日

-温：2006 年 12 月 11 日

-剩余天数：0

-平台：汽车

-产品版本：GT

-制造商：福特

-验证标志：真

起初我收到一个错误，必须实现 GetEnumerator() 才能使用 foreach 循环。我一直遇到的问题是索引属性的所有示例都是具有可索引列表的单个属性，而不是对象中每个属性的索引。通过添加以下内容，我能够获得智能感知来为 PropertyInfo 提供方法：

```
 IEnumerator IEnumerable.GetEnumerator()
    {
        return (IEnumerator)GetEnumerator();
    } 
```

但是，第二个 GetEnumerator() 抛出：编译器错误消息：CS0103：当前上下文中不存在名称“GetEnumerator”。

我在这里想念什么？如何修改我的对象以提供我期望从 evalCI() 获得的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:43:41.310

您不需要实现 IEnumerable。您需要做的是使用反射。

这是来自记忆，但我相信它看起来像这样：

```
 foreach (PropertyInfo n in typeof(configurationItem).GetProperties())
   {
     Response.Write(string.Format("{0}:  {1}<br/>", n.Name, n.GetValue(CI, null)));
   } 
```

这 - 编写的代码 - 也只会为您提供公共属性和非索引属性（但看起来您没有任何索引属性）。

# javascript - Firefox 中的 setTimeOut 问题

> ID：13367931
> 
> 赞同：3
> 
> 时间：2012-11-13T20:07:20.950
> 
> 标签：javascript, firefox

为什么以下内容在 Firefox (v16) 中不起作用？

```
var t = setTimeout(foo(), 1000); 
```

我在控制台中得到的错误是：“无用的 setTimeout 调用（参数周围缺少引号？）”。用引号括起来似乎没什么用，除了让它呈现为一个字符串（不足为奇）。

但是，当我将它包装在这样的匿名函数中时，它确实可以正常工作：

```
var t =
    setTimeout(function(){
       foo();
     }, 1000); 
```

但为什么有必要？为什么它在 Webkit 或 Opera 中不爆炸？碰运气？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T20:07:58.463

这是因为您在第一个示例中调用`foo`。

它与这样做基本相同：

```
var tempResultOfFoo = foo();
var t = setTimeout(tempResultOfFoo, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:11:11.300

当您将方法传递给 时`setTimeout()`，它将在全局范围内执行。 `this`将指向`window`执行时。[在这里](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)阅读更多。

如果`foo`不是全局的，则不会被找到，ergo `ReferenceError`。

```
var __nativeST__ = window.setTimeout, __nativeSI__ = window.setInterval;
// just backed up the defaults. Now basically creating timeout and setInterval
//functions that take scope as a parameter,
//so you can use them in whichever invocation context you want.

window.setTimeout = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */) {
  var oThis = this, aArgs = Array.prototype.slice.call(arguments, 2);
  return __nativeST__(vCallback instanceof Function ? function () {
    vCallback.apply(oThis, aArgs);
  } : vCallback, nDelay);
};

window.setInterval = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */) {
  var oThis = this, aArgs = Array.prototype.slice.call(arguments, 2);
  return __nativeSI__(vCallback instanceof Function ? function () {
    vCallback.apply(oThis, aArgs);
  } : vCallback, nDelay);
}; 
```

# html - 在 Django 应用程序上提供 Filepicker.io/S3 图像时出错

> ID：13367933
> 
> 赞同：0
> 
> 时间：2012-11-13T20:07:25.247
> 
> 标签：html, django, amazon-s3, filepicker.io

我有一个 Django 应用程序，可以在主页上显示用户上传的图像。我使用 filepicker.io 来处理上传，然后将它们存储在我的 Amazon S3 存储桶中。

问题是，当我尝试在线提供它们时，它们没有正确显示，b/c 文件选择器在上传后在文件名中添加了一个唯一键。

即上传的文件名为：milkshake.jpg。

使用文件选择器上传到 S3 后，文件名为：97oj3Y12TIWylfhwlqtT_milkshake.jpg

示例文件托管在此处：[https ://s3.amazonaws.com/mrt-static/97oj3Y12TIWylfhwlqtT_milkshake.jpg](https://s3.amazonaws.com/mrt-static/97oj3Y12TIWylfhwlqtT_milkshake.jpg)

单击站点上的图像时，它加载的 URL 是：[https ://s3.amazonaws.com/mrt-static/media/milkshake.jpg](https://s3.amazonaws.com/mrt-static/media/milkshake.jpg)

如何在我的网站上提供此服务？下面的代码

```
#models.py
class Movie(models.Model):
poster          = django_filepicker.models.FPFileField(upload_to='movie_poster')
#also, not uploading to the folder in the bucket (called movie_poster), just uploading into the bucket

#home.html
<img src = "{{ MEDIA_URL }}{{ movie.poster }}">

#settings.py
MEDIA_URL = 'https://s3.amazonaws.com/mrt-static/' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:02:31.453

在模板代码中执行此操作的正确方法是：

```
<img src = "{{ movie.poster.url }}"> 
```

# unicode - Web 字体“Entypo”的 Safari Unicode 问题

> ID：13367935
> 
> 赞同：3
> 
> 时间：2012-11-13T20:07:39.953
> 
> 标签：unicode, safari, webfonts

我正在使用 Daniel Bruce 为一个项目制作的名为 Entypo 的象形文字 Web 字体，该字体在 Safari 5 for Windows 中无法正常工作。然而，该字体在 Chrome、Firefox、Internet Explorer 和 Opera 上运行良好。

这是[字符图](http://www.entypo.com/characters/)。在 Safari 中打开链接，您会看到缺少的象形文字。似乎具有 5 个或更多字符的 unicode 代码正在抛弃 Safari。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T14:35:55.260

看看这里：[https ://github.com/danielbruce/entypo/issues/14#issuecomment-19171286](https://github.com/danielbruce/entypo/issues/14#issuecomment-19171286)

我认为这应该“解决”你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:27:35.797

看一下这个。

[http://www.open-logix.com/webtech/use-custom-webfontspictograms-in-5-steps/](http://www.open-logix.com/webtech/use-custom-webfontspictograms-in-5-steps/)

我对很多浏览器甚至不同类型的元素进行了一些测试。尝试使用 span、div 和许多其他的测试它，看看是否有最兼容的元素标签。

在 Safari 之外的不同浏览器上也存在问题，所以不要气馁。

# azure - 如何让 Lucene.net 3.0.3.0 与 Azure 一起工作？

> ID：13367941
> 
> 赞同：3
> 
> 时间：2012-11-13T20:07:54.833
> 
> 标签：azure, lucene, full-text-search, lucene.net

好吧，我已经尝试了 2 天：我想对 Azure 工作者角色进行全文搜索。我认为 Lucene.NET 对此有好处。我用过这个例子：[Use AzureDirectory with Lucene.NET 3.0.3.0](https://stackoverflow.com/questions/11971565/use-azuredirectory-with-lucene-net-3-0-3-0)。

我正在使用下面的代码：

```
CloudStorageAccount cloudAccount = CloudStorageAccount.FromConfigurationSetting("CloudStorageSetting");
var cacheDirectory = new RAMDirectory();
AzureDirectory azureDirectory = new AzureDirectory(cloudAccount, "MyCloudIndex", cacheDirectory);
Analyzer analyzer = new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30);
IndexWriter indexWriter = new IndexWriter(azureDirectory, analyzer, IndexWriter.MaxFieldLength.UNLIMITED); 
```

在 Azure SDK 1.8 上使用 Lucene.Net 3.0.3.0 和 Lucene.Net.Store.Azure 1.0.5.1。我也尝试过较旧的 Lucene.NET (2.9.xxx)，但也没有用。我更新了 Windows.Azure.Storage：仍然无法正常工作。

问题是：Visual Studio 给了我一个错误，`azureDirectory`即插入`IndexWriter`的需要是类型`Directory`而不是`AzureDirectory`. 但是，当我将其类型更改`Directory`为时，它说这`AzureDirectory`不是`Directory`.

为什么互联网上的所有示例都是错误的，并且当我从字面上复制粘贴它们时都不起作用？

更新：问题已解决，我写了一篇关于它的博客文章：http: [//leoncullens.nl/post/2012/11/18/Full-Text-Search-on-Azure-with-LuceneNET.aspx](http://leoncullens.nl/post/2012/11/18/Full-Text-Search-on-Azure-with-LuceneNET.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:29:39.173

我已经“分叉”了这个[项目](https://azuredirectory.codeplex.com/)，将 Lucene 引用更新为 3.0.3，并将 Azure 存储客户端更新为 2.0（v1.8 SDK 附带的版本），并将代码放在这里：

[https://github.com/richorama/AzureDirectory](https://github.com/richorama/AzureDirectory)

复制“TestApp”中的示例代码以了解如何使用此版本的 Lucene.NET 应该相对简单。

*免责声明，我不是 Lucene 专家，我没有正确测试过 - 使用风险自负！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:55:26.740

它不工作......这是我为什么不工作以及你可以做什么的答案： [如何在 Azure webrole 上实现 Lucene .Net 搜索](https://stackoverflow.com/questions/13222479/how-to-implement-lucene-net-search-on-azure-webrole/13223048#13223048)

这是另一个可能有帮助的答案，但我不同意这种方法： [https ://azuredirectory.codeplex.com/discussions/402913](https://azuredirectory.codeplex.com/discussions/402913)

编辑：我应该澄清一下，当我说“工作”时，我的意思是在生产环境中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:32:49.340

几个月前，此设置适用于 LUCENE 2.9 版和较旧的 Azure SDK。工作和不工作之间的主要区别是不使用 RAMDirectory，因为它最终用完了 RAM。在不使用 RAMDirectory 之后，我成功地索引了 25 GB 的数据。

```
_azureDirectory  = new AzureDirectory
    ( storageAccount 
    , catalogName
    //, new RAMDirectory());

_version = Lucene.Net.Util.Version.LUCENE_29;

_analyzer = new StandardAnalyzer(_version);

IndexWriter
writer = new IndexWriter(
                  _azureDirectory, 
                  _analyzer,
                  newIndex, // new index or update
                  IndexWriter.MaxFieldLength.UNLIMITED);

writer.SetUseCompoundFile(false);
writer.SetRAMBufferSizeMB(800);
writer.SetMergeFactor(10); 
```

# html - 内部页面链接与通过 HTML 的不同页面

> ID：13367946
> 
> 赞同：0
> 
> 时间：2012-11-13T20:08:11.673
> 
> 标签：html, linux, hyperlink, seo

> **可能重复：**
> [Google 在抓取我们的网站时是否会忽略哈希片段 (#) 之后的内容？](https://stackoverflow.com/questions/6001433/does-google-ignores-whatever-is-after-the-hash-fragment-while-crawling-our-w)

我有一个关于链接到同一页面的不同部分与链接到新页面的问题。例如：

```
domain.com/about.php
domain.com/history.php
domain.com/team.php 
```

对比

```
domain.com/about.php
domain.com/about.php#history
domain.com/about.php#team 
```

我想知道谷歌是否识别第二组链接并分别索引这些页面？或者，如果只是 about.php 页面被编入索引？理想情况下，我将删除 nginx 配置中的 .php 扩展名。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:47:39.067

所有搜索引擎都会复制您页面的所有文本。如果您在 PHP、JSP 或 HTML 上对服务器端进行编程，那么这些文本都会被搜索引擎获取。如果您要放置一个锚链接并且它向下滚动到您想要的部分，它仍然有效。在这种情况下，它被记录为一页`about.php`。

但是，如果您开始使用 javascript，并且您拥有的文本是 javascript 的一部分，而不是服务器端脚本；然后，搜索引擎可能无法读取它，因为它只读取准备加载的文本。例如：

```
document.write("This text will not be read by Search Engines"); 
```

因此，如果您要对页面进行编程，建议首先使用服务器端脚本显示文本。如果你想隐藏文本，你可以在服务器加载文本后使用页面效果，它仍然会被搜索引擎读取。

# sql - SQL Server 中的窗口函数

> ID：13367951
> 
> 赞同：2
> 
> 时间：2012-11-13T20:08:29.953
> 
> 标签：sql, sql-server, tsql

这个会很快。我无法从函数中得到我想要的东西`row_number()`。我得到什么： ![在此处输入图像描述](../Images/01549190ab3dab5fe844975e8b59beb5.png)

我`row_number()`只需要在`patid`具有不同`dailyDosage`. 所以屏幕帽上的第 4-9 行应该都是 1。第 13 行应该是 1（因为它是一个新的 patid），第 14 行应该是 2（因为每日剂量的变化。我得到：

```
select distinct 
     ROW_NUMBER() over(partition by rx.patid,quantity/daysSup*cast(REPLACE(LEFT(strength,PATINDEX('%[^0-9]%',strength)),'m','') as int) 
     order by rx.patid,quantity/daysSup*cast(REPLACE(LEFT(strength,PATINDEX('%[^0-9]%',strength)),'m','') as int))
     ,rx.patid
    ,rx.drugName
    ,rx.strength
    ,rx.quantity
    ,rx.daysSup
    ,rx.fillDate
    ,quantity/daysSup*cast(REPLACE(LEFT(strength,PATINDEX('%[^0-9]%',strength)),'m','') as int) as dailyDosage
    from rx 
    inner join (select distinct m.patid, m.sex, m.injurylevel from members as m) as m on m.PATID=rx.patid
    where ISNUMERIC(REPLACE(LEFT(strength,PATINDEX('%[^0-9]%',strength)),'m',''))=1 
    and REPLACE(LEFT(strength,PATINDEX('%[^0-9]%',strength)),'m','') not like '%.%' 
    and drugname in ('baclofen')
    and daysSup !=0 and quantity !=0
    and daysSup > 1
    order by rx.patid 
```

SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T20:16:24.280

我认为您正在尝试对每日剂量进行排名。尝试使用`dense_rank`而不是`row_nubmer`.

Row_number 枚举行。等级将相同的值保持在一起。Dense_rank 进行枚举，分配第一个组 1，下一个组 2，依此类推。排名在编号中留下空白。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T20:14:15.587

你应该改变你的`ROW_NUMBER`并使用`RANK`.

# terminology - 多语言编程的反面是什么？

> ID：13367953
> 
> 赞同：0
> 
> 时间：2012-11-13T20:08:39.010
> 
> 标签：terminology

多语言编程是指使用多种不同语言构建系统（例如 Web 应用程序）。一个常见的组合是 Java+JSP+JavaScript。

与多语言编程完全相反的词是什么？也就是说，一个系统是纯粹用一种语言编码的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:11:51.180

单语编程？=) 确实是一件非常罕见的事情。

# drupal - drupal 7面包屑中没有链接

> ID：13367957
> 
> 赞同：1
> 
> 时间：2012-11-13T20:09:09.580
> 
> 标签：drupal, drupal-7, drupal-modules, breadcrumbs

我在面包屑中丢失了链接，猜猜是什么，我不知道怎么做。我不使用任何形式的分类法。

例如，当我在上下文模块中时，这是我得到的：

“ “ “ 语境

我安装了 Menu Crumb 模块来帮助我找到问题，但除了添加的部分之外没有机会

你能帮我吗？

公关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:13:24.613

您是否尝试过刷新缓存？

另外，虽然我不熟悉上下文模块，但如果它与面包屑有关，它可能与原生的 drupal 面包屑过程相冲突

# javascript - 使用鼠标拖动控制背景位置

> ID：13367959
> 
> 赞同：0
> 
> 时间：2012-11-13T20:09:16.340
> 
> 标签：javascript, dom-events

我想使用“鼠标拖动”在框内拖动背景的位置。

CSS：

```
.filmmakers #map {    
   width : 920px;    
   height : 500px;    
   margin-top : 50px;    
   margin-left : 38px;    
   border : 1px solid rgb(0, 0, 0);    
   cursor : move;    
   overflow : hidden;    
   background-image : url('WorldMap.png');    
   background-repeat : no-repeat;    
} 
```

的HTML：

```
<div id = "map" src = "WorldMap.png" onmousedown = "MouseMove(this)"> </div> 
```

Javascript：

```
function MouseMove (e) {    
   var x = e.clientX;    
   var y = e.clientY;    
    e.style.backgroundPositionX = x + 'px';    
    e.style.backgroundPositionY = y + 'px';    
    e.style.cursor = "move";    
} 
```

什么都没有发生，没有错误，没有警告，什么都没有……我已经尝试了很多事情：一个 div 内的绝对定位图像（你可以猜到为什么这不起作用），一个带有背景图像的 div 内的可拖动 div，一个带有拖放功能的表格，最后我尝试了这个：

```
function MouseMove () {    
    e.style.backgroundPositionX = 10 + 'px';    
    e.style.backgroundPositionY = 10 + 'px';    
    e.style.cursor = "move";    
} 
```

这有效，但它与鼠标的位置无关，`pageX`也`pageY`不起作用。

现场演示：http: [//jsfiddle.net/VRvUB/224/](http://jsfiddle.net/VRvUB/224/)

PS：无论你的想法是什么，请不要用JQuery写

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T23:40:02.830

从您的问题中，我了解到您需要帮助来实现实际的“拖动”行为。我猜不会。无论如何，这是我努力的结果：http: [//jsfiddle.net/joplomacedo/VRvUB/236/](http://jsfiddle.net/joplomacedo/VRvUB/236/)

拖动仅在鼠标按钮时发生，并且......好吧，它的行为就像我认为你可能想要的那样。如果你还没有，就看看小提琴 =)

这是给那些想在这里看到它的人的代码：

```
var AttachDragTo = (function () {
    var _AttachDragTo = function (el) {
        this.el = el;
        this.mouse_is_down = false;

        this.init();
    };

    _AttachDragTo.prototype = {
        onMousemove: function (e) {
            if ( !this.mouse_is_down ) return;
            var tg = e.target,
                x = e.clientX,
                y = e.clientY;

            tg.style.backgroundPositionX = x - this.origin_x + this.origin_bg_pos_x + 'px';
            tg.style.backgroundPositionY = y - this.origin_y + this.origin_bg_pos_y + 'px';
        },

        onMousedown: function(e) {
            this.mouse_is_down = true;
            this.origin_x = e.clientX;
            this.origin_y = e.clientY;
        },

        onMouseup: function(e) {
            var tg = e.target,
                styles = getComputedStyle(tg);

            this.mouse_is_down = false;
            this.origin_bg_pos_x = parseInt(styles.getPropertyValue('background-position-x'), 10);
            this.origin_bg_pos_y = parseInt(styles.getPropertyValue('background-position-y'), 10);
        },

        init: function () {
            var styles = getComputedStyle(this.el);
            this.origin_bg_pos_x = parseInt(styles.getPropertyValue('background-position-x'), 10);
            this.origin_bg_pos_y = parseInt(styles.getPropertyValue('background-position-y'), 10);

            //attach events
            this.el.addEventListener('mousedown', this.onMousedown.bind(this), false);
            this.el.addEventListener('mouseup', this.onMouseup.bind(this), false);
            this.el.addEventListener('mousemove', this.onMousemove.bind(this), false);
        }
    };

    return function ( el ) {
        new _AttachDragTo(el);
    };
})();

/*** IMPLEMENTATION ***/
//1\. Get your element.
var map = document.getElementById('map');
//2\. Attach the drag.
AttachDragTo(map);
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:47:59.760

这不起作用，因为**您将元素“map”传递给您的`MouseMove`函数，并将其用作 event object 和 element**。您可以通过使用 JavaScript 分配事件处理程序而不是 HTML 属性来轻松解决此问题：

```
<div id="map"></div> 
```

在你的 JavaScript 中：

```
document.getElementById('map').onmousemove = function (e) {
    // the first parameter (e) is automatically assigned an event object
    var x = e.clientX;
    var y = e.clientY;

    // The context of this is the "map" element
    this.style.backgroundPositionX = x + 'px';
    this.style.backgroundPositionY = y + 'px';
} 
```

[http://jsfiddle.net/VRvUB/229/](http://jsfiddle.net/VRvUB/229/)

**这种方法的缺点**是[并非所有浏览器都支持](http://snook.ca/archives/html_and_css/background-position-x-y)`backgroundPositionX`和`backgroundPositionY`样式属性。

您提到*“在 div 中绝对定位的图像”*，这可能是更兼容的解决方案。要使此设置正常工作，您需要将`position`外部元素的 设置为`relative`，这使得`absolute`子元素使用其边界为零。

```
<div id="map">
    <img src="" alt="">
</div> 
```

CSS：

```
#map {
    position:relative;
    overflow:hidden;
}

#map img {
    position:absolute;
    left:0;
    top:0;
} 
```

在这里它适用于您的代码：http: [//jsfiddle.net/VRvUB/232/](http://jsfiddle.net/VRvUB/232/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-25T03:20:04.397

这适用于 100% **Vanilla Javascript**

```
document.getElementById('image').onmousemove = function (e) {
    var x = e.clientX;
    var y = e.clientY;
    this.style.backgroundPositionX = -x + 'px';
    this.style.backgroundPositionY = -y + 'px';
    this.style.backgroundImage = 'url(https://i.ibb.co/vhL5kH2/image-14.png)';
}
document.getElementById('image').onmouseleave = function (e) {
    this.style.backgroundPositionX = 0 + 'px';
    this.style.backgroundPositionY = 0 + 'px';
    this.style.backgroundImage = 'url(https://i.ibb.co/Ph9MCB2/template.png)';
}
```

```
.container {
   max-width: 670px;
   height: 377px;
}
#image {
   max-width: 670px;
   height: 377px;
   cursor: crosshair;
   overflow: hidden;
   background-image: url('https://i.ibb.co/Ph9MCB2/template.png');
   background-repeat: no-repeat;
}
```

```
<div class="container">
     <div id="image">
     </div>
</div>
```

# excel - 尝试具有一系列可能结果的 Excel IF 语句

> ID：13367961
> 
> 赞同：2
> 
> 时间：2012-11-13T20:09:23.150
> 
> 标签：excel, if-statement, excel-formula

好的，所以我正在尝试创建一个 excel 健身追踪器，它可以根据输入的测量值计算体脂百分比。那部分很好，工作正常，我已经设置好了，如果从属单元格中没有数据，它会显示 N/A。然后我有一个单元格，我将公式放入如下：

```
=IF(C28<=5%,"Body Builder", IF(C28<13%,"Athletic", IF(C28<17%,"Fit", IF(C28<25%,"Average", IF(C28>=26%,"Obese","No Data Yet"))))) 
```

本质上，我希望它设置为如果 N/A 显示在单元格 C28 中，它会显示“还没有数据”。就目前而言，如果那里什么都没有，它会显示“肥胖”。

公式的其余部分非常有效。我只是不知道为什么它会以非数值形式抛出 Obese：/

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:46:48.353

为了清楚起见，我可以建议使用 vlookup 吗？

```
=iferror(vlookup(C28, BodyFatTable, 2, True), "No Data Yet") 
```

这是带有两列的表格（调整数字以表示每个级别的最低体脂百分比（它们需要按顺序排列）），然后将此表格命名为 BodyFatTable 以便在您的公式中有一个很好的命名范围

```
 0    Body Builder
.05    Athletic
.13    Fit
.17    Average
.25    Obese 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:13:05.827

只需在您的语句中添加另一个 IF 以检查 N/A：

```
=IF(ISNA(C28),"No Data Yet", IF(C28<=5%,"Body Builder", IF(C28<13%,"Athletic", IF(C28<17%,"Fit", IF(C28<25%,"Average", IF(C28>=26%,"Obese","No Data Yet")))))) 
```

# sql - 从 MS Access 访问 .mdb 文件中的后端表

> ID：13367965
> 
> 赞同：1
> 
> 时间：2012-11-13T20:09:37.770
> 
> 标签：sql, ms-access, permissions

我的组织使用用户友好的捐赠者数据库软件，该软件将其数据存储在安装文件夹中的 .mdb 表中。该程序本身使用一种我不熟悉的专有查询方法。我对 SQL 有点熟悉，想访问软件外部的表来使用 SQL 进行查询。该软件允许我们使用 SQL 代码，但我们必须为该功能支付更多的钱。所以我希望自己打开数据库文件并进行自己的查询。

当我复制 .mdb 文件并打开它们时，系统不会提示我输入密码。我可以看到表名，但是当我打开单个表时，MS Access 给我错误“无法读取定义；没有读取表或查询的定义权限”。当我在 MDB Viewer Plus 中打开它时，我收到错误“错误设置表名称：无法读取记录；没有读取权限”我在 MS Access 中打开它并检查列出的用户。只有一个用户“管理员”并且没有为其设置密码。我尝试将“管理员”的权限更改为读取/修改/管理，但它给了我错误“要更改此对象的权限，您必须拥有它的管理员权限。”

我的问题是，如何获得数据库的管理员权限？显然，捐赠者软件有办法打开数据库，那么我该如何绕过它并自己打开它们呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:21:42.627

在数据目录或可能在应用程序的安装目录中应该有一个关联的 MDW 文件。这是数据库的工作组文件，在打开数据库时需要使用。

奇怪的是，如果他们麻烦地建立了一个工作组，尽管他们把它锁定了，所以你不能做你想做的事。

[这](http://www.techonthenet.com/access/security/use_mdw.php)是如何使用工作组文件打开数据库的非常好的一步一步。你也可以在代码中做同样的事情。

# delphi - WIA 扫描时跳过设备选择对话框

> ID：13367971
> 
> 赞同：3
> 
> 时间：2012-11-13T20:10:05.773
> 
> 标签：delphi, windows-7, com, delphi-xe2, wia

我正在使用带有 Delphi XE2 的 WIA 2.0。现在，我正在尝试让扫描仪进行扫描。起初我使用`CommonDialog.ShowAcquireImage`它工作正常，除了一件事。我希望能够传入 an `IDevice`、 an`IDeviceInfo`或 the`DeviceId`以跳过设备选择对话框。我试过枚举 的`Commands`属性`IDevice`，但我得到的只是同步和构建设备树。这两个命令似乎都不是我想要的。

我试图避免这个对话框

![选择对话框](../Images/e2ffee47f9f9962f0ad442ce58133d64.png)

但仍显示此对话框

![属性对话框](../Images/45e72af3dd09e9359e8f48e519487627.png).

我已经能够通过两种方式接近。第一种是仅使用以下`ShowTransfer`方法`ICommonDialog`

```
procedure TForm1.btnAutoScanClick(Sender: TObject);
var
  lDevice : IDevice;
  lImage : IImageFile;
  lCommonDialog : ICommonDialog;
begin
  lDevice := fDeviceManager.DeviceInfos[1].Connect;
  lCommonDialog := CoCommonDialog.Create;
  lCommonDialog.ShowDeviceProperties(lDevice,false);
  lImage := IUnknown(lCommonDialog.ShowTransfer(lDevice.Items[1],'{B96B3CAE-0728-11D3-9D7B-0000F81EF32E}',false)) as IImageFile;
  lImage.SaveFile('c:\testauto.jpg');
end; 
```

这会导致两个对话框都被跳过并显示一个进度条。这不会按原样工作，因为我仍然需要显示属性对话框。

我接近的第二种方法是打电话`ShowAcquireImage`给`ICommonDialog`

```
procedure TForm1.btnScanClick(Sender: TObject);
const
  pngFormat = '{B96B3CAF-0728-11D3-9D7B-0000F81EF32E}';
  jpegFormat = '{B96B3CAE-0728-11D3-9D7B-0000F81EF32E}';
var
  lImage : IImageFile;
  lDialog : ICommonDialog;
begin
  lDialog := CoCommonDialog.Create;
  lImage := lDialog.ShowAcquireImage(WIA_TLB.UnspecifiedDeviceType,WIA_TLB.GrayscaleIntent,WIA_TLB.MinimizeSize,
    jpegFormat,false,false,false);
  lImage.SaveFile('c:\testmanual.jpg');
end; 
```

**如果**只有一个 WIA 设备连接到计算机，这完全符合我的要求。第二次我把我的照相手机插回电脑，我开始得到选择设备对话框。

我的问题是如何在扫描时跳过设备选择对话框，无论有多少设备连接到机器但仍显示属性对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:27:00.377

您是否尝试过使用 WIA_TLB.ScannerDeviceType (=1) 而不是 UnspecifiedDeviceType (=0)？

```
lDialog.ShowAcquireImage(WIA_TLB.ScannerDeviceType,WIA_TLB.GrayscaleIntent,WIA_TLB.MinimizeSize,
           jpegFormat,false,false,false); 
```

找到@： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms630829 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630829(v=vs.85).aspx)

# jquery-datatables - 数据表列标题未在可折叠面板中自动展开

> ID：13367972
> 
> 赞同：0
> 
> 时间：2012-11-13T20:10:08.050
> 
> 标签：jquery-datatables

我在选项卡中有一个数据表。我的应用程序有一个左窗格和一个中心窗格。中间窗格显示数据表，左侧窗格用于浏览。我的左窗格是可折叠的，但是每当我折叠左窗格时，数据表中的列宽不会根据新宽度自动调整大小，但是当我单击任何列标题时，它会根据新宽度展开/折叠。我不知道如何解决这个问题。

我尝试使用下面的代码，表格可以正确展开，但除非我单击列标题，否则列不会展开/折叠。

```
 function collapse () {
   $("#"+elementId).css('width', '100%');
  $("#"+elementId).datatable().fnAdjustColumnSizing();
} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:24:07.340

我发现我们可以使用 $.fn.dataTable.fnTables(true) 来获取所有表实例，然后调整每个表的列大小。

像下面的东西，

```
function onCollapse(e) {
    var table = $.fn.dataTable.fnTables(true);
    if ( table.length > 0 ) {

            for(var i=0;i<table.length;i++){
                $(table[i]).dataTable().fnAdjustColumnSizing();
            }

    }
} 
```

谢谢巴拉尼
_

# php - 仅返回最后一次迭代的多维 foreach 数组

> ID：13367975
> 
> 赞同：0
> 
> 时间：2012-11-13T20:10:23.173
> 
> 标签：php

我正在尝试格式化数据，以便我的 json 代码可以正确读取它。最终结果需要如下所示：

```
[2][4][36] = 'Ohio' 
```

其中“2”是区域 id，“4”是部门 id，“36”是州 id。显然，根据选择的区域和分区，有许多不同的结果，但所有结果都需要按上述返回。

我从下面的代码中得到的结果只返回最后一次迭代。我想知道我做错了什么：

```
$divisionCodeResults = array();
    foreach($regionCodes as $key => $value){        
       $divisionCodeResults[$key] = $divisionTable->getDivisionResultsByRegionCode($key);                
            foreach($divisionCodeResults as $divValue){
                $array_1 = array();
                foreach($divValue as $divKey => $div2Value){                    
                    $array_1[$divKey] = $divKey;   
                    $array_2 = array();
                    foreach($array_1 as $array_1_value){                        
                        $array_2[$key][$divKey] = Doctrine_Core::getTable('state')->getStatesIdAndNamesThatMatchDivisionKey($array_1_value);
                    }
                }
           }
    } 
```

上面的 var_dump() 输出如下：

```
array (size=1)
  6 => 
    array (size=1)
      11 => 
        array (size=2)
          52 => string 'Puerto Rico' (length=11)
          54 => string 'Virgin Islands' (length=14) 
```

格式正确，但如前所述，它仅返回长多维数组中的最后一次迭代。

希望能解释一下我做错了什么……在此先感谢。

编辑：

```
array (size=5)
  2 => 
    array (size=2)
      4 => string 'East North Central' (length=18)
      5 => string 'West North Central' (length=18)
  3 => 
    array (size=2)
      2 => string 'New England' (length=11)
      3 => string 'Mid-Atlantic' (length=12)
  4 => 
    array (size=3)
      6 => string 'South Atlantic' (length=14)
      7 => string 'East South Central' (length=18)
      8 => string 'West South Central' (length=18)
  5 => 
    array (size=2)
      9 => string 'Mountain' (length=8)
      10 => string 'Pacific' (length=7)
  6 => 
    array (size=1)
      11 => string 'Carribean' (length=9) 
```

以上是以下结果： var_dump($divisionCodeResults);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:30:10.707

将 $array_1 和 $array_2 移到循环之外，例如：

```
$array_1 = array();
$array_2 = array();
$divisionCodeResults = array();
foreach($regionCodes as $key => $value){        
    $divisionCodeResults[$key] = $divisionTable->getDivisionResultsByRegionCode($key);                
        foreach($divisionCodeResults as $divValue){
//                $array_1 = array();
            foreach($divValue as $divKey => $div2Value){                    
                $array_1[$divKey] = $divKey;   
//                    $array_2 = array();
                foreach($array_1 as $array_1_value){                        
                    $array_2[$key][$divKey] = Doctrine_Core::getTable('state')->getStatesIdAndNamesThatMatchDivisionKey($array_1_value);
                }
            }
        }
} 
```

# c++ - 无法在 C、C++ 和 Obj-C 中编译并带有特定错误消息的代码

> ID：13367976
> 
> 赞同：0
> 
> 时间：2012-11-13T20:10:24.167
> 
> 标签：c++, objective-c, c, macros

我正在用另一个替换一个 C 风格的宏。

```
#define OldMacro(…) {…}

#define NewMacro(…) {…} 
```

我想重写旧版本的宏，使其无法编译并显示特定的错误消息，例如：“OldMacro() 已弃用；请改用 NewMacro()。” 这可能吗？

另外，我希望它可以在 C、C++ 和 Objective-C 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:13:08.003

您可以使用此宏定义：

```
#define OLD_MACRO()  (error_use_of_OLD_MACRO_is_deprecated = 0) 
```

# go - Go 中的惯用类型转换

> ID：13367979
> 
> 赞同：9
> 
> 时间：2012-11-13T20:10:31.480
> 
> 标签：go

我在玩 Go，想知道在 Go 中执行惯用类型转换的最佳方法是什么。基本上我的问题在于`uint8`,`uint64`和`float64`. 根据我对其他语言的经验，a`uint8`与 a的乘法`uint64`将产生一个`uint64`值，但在 go 中并非如此。

这是我构建的一个示例，我问这是否是编写此代码的惯用方式，或者我是否缺少重要的语言结构。

```
package main

import ("math";"fmt")

const(Width=64)

func main() {

    var index uint32
    var bits uint8

    index = 100
    bits = 3

    var c uint64
    // This is the line of interest vvvv
    c = uint64(math.Ceil(float64(index * uint32(bits))/float64(Width)))
    fmt.Println("Test: %v\n", c)
} 
```

从我的角度来看，由于所有显式类型转换，上限值的计算似乎不必要的复杂。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T20:41:08.897

非常量值没有隐式类型转换。

你可以写

```
var x float64
x = 1 
```

但是你不能写

```
var x float64
var y int

y = 1
x = y 
```

请参阅[规范](http://golang.org/ref/spec#Numeric_types)以供参考。

不允许自动/隐式类型转换是有充分理由的，因为它们可能会变得非常混乱，并且必须学习许多规则来规避可能出现的各种警告。以[C 中的整数转换规则](https://www.securecoding.cert.org/confluence/display/c/INT02-C.+Understand+integer+conversion+rules)为例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:07:41.287

例如，

```
package main

import "fmt"

func CeilUint(a, b uint64) uint64 {
    return (a + (b - 1)) / b
}

func main() {
    const Width = 64
    var index uint32 = 100
    var bits uint8 = 3
    var c uint64 = CeilUint(uint64(index)*uint64(bits), Width)
    fmt.Println("Test:", c)
} 
```

输出：

```
Test: 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-05T07:23:19.730

添加到@nemo 很棒的答案。C 中数字类型之间自动转换的便利性被它引起的混乱所抵消。请参阅[https://Golang.org/doc/faq#conversions](https://Golang.org/doc/faq#conversions)。这就是为什么你甚至不能从 int 隐式转换为 int32 的原因。请参阅[https://stackoverflow.com/a/13852456/12817546](https://stackoverflow.com/a/13852456/12817546)。

```
package main

import (
    . "fmt"
    . "strconv"
)

func main() {
    i := 71
    c := []interface{}{byte(i), []byte(string(i)), float64(i), i, rune(i), Itoa(i), i != 0}
    checkType(c)
}

func checkType(s []interface{}) {
    for k, _ := range s {
        Printf("%T %v\n", s[k], s[k])
    }
} 
```

`byte(i)`创建一个值为 71 的 uint8、`[]byte(string(i))`一个具有 [71] 的 []uint8、`float64(i)`float64 71、`i`int 71、`rune(i)`int32 71、`Itoa(i)`字符串 71 和`i != 0`一个值为 true 的 bool。

由于 Go 不会为您自动转换数字类型（请参阅[https://stackoverflow.com/a/13851553/12817546](https://stackoverflow.com/a/13851553/12817546)），您必须手动在类型之间进行转换。请参阅[https://stackoverflow.com/a/41419962/12817546](https://stackoverflow.com/a/41419962/12817546)。注意，Itoa(i) 设置一个“整数到 ASCII”。[请参阅https://stackoverflow.com/a/10105983/12817546](https://stackoverflow.com/a/10105983/12817546)中的评论。

# algorithm - 删除导致 2 次旋转的最小 AVL 树是多少？

> ID：13367981
> 
> 赞同：6
> 
> 时间：2012-11-13T20:10:39.657
> 
> 标签：algorithm, avl-tree

众所周知，从 AVL 树中删除可能会导致几个节点最终不平衡。我的问题是，需要 2 次旋转的最小 AVL 树是多少（我假设左右旋转为 1 次旋转）？我目前有一个具有 12 个节点的 AVL 树，其中删除会导致 2 次旋转。我的 AVL 树按以下顺序插入：

8、5、9、3、6、11、2、4、7、10、12、1。

如果删除 10，则 9 变得不平衡并发生旋转。这样做时，8 变得不平衡，并发生另一次旋转。是否有一个较小的树，删除后需要进行 2 次旋转？

阅读 jpalecek 的评论后，我真正的问题是：给定一些常数 k，在 1 次删除后具有 k 轮转的最小 AVL 树是多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T01:08:14.953

A tree of four nodes requires a single rotation in the worst case. The worst case number of deletions increases with each term in the list: 4, 12, 33, 88, 232, 609, 1596, 4180, 10945, 28656, ...

This is [Sloane's A027941](http://oeis.org/A027941) and is a Fibonacci-type sequence that can be generated with `N(i)=1+N(i-1)+N(i-2)` for `i>=2, N(1)=2, N(0)=1`.

To see why this is so, first note that rotating an imbalanced AVL tree reduces its height by one because its shorter leg is lengthened at the expense of its longer leg.

When a node is removed from an AVL tree, the AVL algorithm checks all of the removed node's ancestors for potential rebalancing. Therefore, to answer your question we need to identify trees with the minimum number of nodes for a given height.

In such a tree every node is either a leaf or has a balance factor of +1 or -1: if a node had a balance factor of zero this would mean that a node could be removed without triggering a rebalancing. And we know rebalancing makes a tree shorter.

Below, I show a set of worst-case trees. You can see that following the first two trees in the sequence, each tree is constructed by joining the previous two trees. You can also see that every node in each tree is either a leaf or has a non-zero balance factor. Therefore, each tree has the maximum height for its number of nodes.

For each tree, a removal in the left subtree will, in the worst case, cause rotations which ultimately reduce the height of that subtree by one. This balances the tree as a whole. On the other hand, removing a node from the right subtree may ultimately imbalance the tree resulting in a rotation of the root. Therefore, the right subtrees are of prime interest.

You can verify that Tree (c) and Tree (d) have one rotation upon removal, in the worst case.

Tree (c) appears as a right subtree in Tree (e) and Tree (d) as a right subtree in Tree (f). When a rotation is triggered in Tree (c) or (d) this shortens the trees resulting in a root rotation in Trees (d) and (f). Clearly, the sequence continues.

If you count the number of nodes in the trees this matches my original statement and completes the proof.

(In the trees below removing the highlighted node will result in a new maximum number of rotations.)

![Worst-case AVL trees](../Images/4d294357b3ed8d887156b1b5951bb4ce.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:49:25.107

我不擅长打样，我敢肯定下面充满了漏洞，但也许它会激发一些积极的东西。

要在删除节点后对最小化的 AVL 树进行 k 次旋转，必须满足以下条件：

*   目标节点必须存在于 4 节点子树中。
*   目标节点必须要么在短分支上，要么必须是子树的根并被短分支的叶子替换。
*   目标子树的根的祖先中的每个节点都必须稍微不平衡（平衡因子为 +/-1）。即——当遇到平衡因子为 0 时，旋转链将停止。

最小化树的高度和节点数通过以下等式计算。

*   令 H(k) = 受 k 次旋转影响的树的最小高度。

    ```
    H(k) = 2k + 1, k > 0 
    ```

*   令 N(h) = 高度为 h 的（最小节点）AVL 树中的节点数。

    ```
    N(0) = 0
    N(1) = 1
    N(h) = N(h-1) + N(h-2) + 1, h > 1 
    ```

*   令 F(k) = 树中受 k 次旋转影响的最小节点数。

    ```
    F(k) = N(H(k)) 
    ```

（例如：）

```
k = 1, H(k) = 4, N(4) = 7
k = 2, H(k) = 6, N(6) = 20 
```

### 证明（如是）

最小高度

删除只能导致具有 4 个或更多节点的树旋转。

*   1 个节点的树的平衡因子必须为 0。
*   2 个节点的树必须具有 +/-1 的平衡因子，删除会导致 1 个节点的平衡树。
*   3 个节点的树的平衡因子必须为 0。删除节点会导致平衡因子为 +/-1，并且不会发生旋转。
*   因此，从少于 4 个节点的树中删除不会导致轮换。

删除时发生 1 次旋转的最小子树是 4 个节点，其高度为 3。删除短边的节点将导致旋转。同样，移除根节点，使用短边的节点作为替换将导致旋转。树的配置方式无关紧要：

```
 B        B     Removal of A or replacement of B with A               
 / \      / \    results in rotation. No rotation occurs
A   C    A   D   on removal of C or D, or on replacement 
     \      /    of B with C.
      D    C     

    C      C     Removal of D or replacement of C with D
   / \    / \    results in rotation. No rotation occurs
  B   D  A   D   on removal of A or B, or on replacement
 /        \      of C with B. 
A          B 
```

从 4 节点树中删除会导致高度为 2 的平衡树。

```
 .
 / \
.   . 
```

为了实现第二次旋转，目标树必须有一个高度为 4 的兄弟，以便根的平衡因子为 +/-1（因此高度为 5）。受影响的树在父节点的右边或左边无关紧要，兄弟树的布局也不重要（即H4的H3子节点可以在左边或右边，可以是任何一个上面的 4 个方向，而 H2 孩子可以是 2 个可能的方向中的任何一个 - 这需要证明）。

```
 _._              _._
  /   \            /   \
(H4)   .          .   (H4)
      / \        / \
     .   .      .   .
          \          \
           .          . 
```

很明显，第三次轮换要求受影响树的祖父母同样不平衡 +/-1，第四次要求曾祖父母不平衡 +/-1，依此类推。

根据定义，子树的高度是每个分支的最大高度加上根的高度。一个兄弟姐妹必须比另一个高 1 以实现根中的 +/-1 不平衡。

```
H(1) = 3 (as observed above)
H(k) = 1 + max(H(k - 1), H(k - 1) + 1)) = 1 + H(k - 1) + 1 = H(k - 1) + 2
... Inductive proof leading to H(k) = 2k + 1 eludes me. 
```

最小节点

*   根据定义，子树中的节点数是左分支中的节点数加上右分支中的节点数加上根的 1。
*   也是定义，高度为 0 的树必须有 0 个节点，高度为 1 的树必须没有分支，因此必须有 1 个节点。
*   如上所示，一个分支必须比另一个短。
*   令 N(h) = 创建高度为 h 的树所需的最小节点数：

    ```
    N(0) = 0
    N(1) = 1
    // the number of nodes in the two subtrees plus the root
    N(h) = N(h-1) + N(h-2) + 1 
    ```

### 推论

*   最小节点数不一定是大树中的最大值。以机智：

从下面的树中删除 A 并观察旋转后高度没有变化。因此，父节点中的平衡因子不会改变，也不会发生额外的旋转。

```
 B          B           D
 / \          \         / \
A   D    =>    D   =>  B   E  
   / \        / \       \    
  C   E      C   E       C 
```

然而，在 k = 2 的情况下，这里是否最小化 H(4) 并不重要——第二次旋转仍然会发生。

```
 _._              _._
  /   \            /   \
(H4)   .          .   (H4)
      / \        / \
     .   .      .   .
          \          \
           .          . 
```

### 问题

*   目标子树的位置是什么？显然，对于 k = 1，它是根，对于 k = 2，如果根的平衡因子为 -1，它是左侧，否则是右侧。是否有确定 k >= 3 位置的公式？
*   一棵树可以包含多少个节点来影响 k 次旋转*？*是否有可能在祖先中有一个不旋转的中间节点，尽管它的父节点是？

# jquery - 如何获取图像的高度并将该高度应用于 div？

> ID：13367982
> 
> 赞同：0
> 
> 时间：2012-11-13T20:10:39.750
> 
> 标签：jquery, css

我正在构建一个移动 Web 应用程序，并且在其上使用 jquerytools 滑块。

我希望滑块在所有移动设备上显示（以适当的比例），因此图像的宽度为 100%，高度在 css 中为自动。但是，由于所有元素都是浮动的，并且 jquerytools 滑块需要将位置设置为绝对位置，因此包含的 div (#header) 不会拉伸以适应内容。

我正在尝试使用 jquery 来获取 img 的高度并将该高度应用于标题....但是我没有运气。

CSS：

```
 #header{
    width:100%;
    position:relative;
    z-index: 20;
    /* box-shadow: 0 0 10px white; */
    overflow: auto;
    }

.scrollable {
position:relative;
overflow:hidden;
width: 100%;
height: 100%;
/* box-shadow: 0 0 20px purple; */
/*  height:198px; */
z-index: 20;
overflow: auto;
}

.scrollable .items {
/* this cannot be too large */
width:1000%;
position:absolute;
clear:both;
/* box-shadow: 0 0 30px green; */

}

.items div {
float:left;
width:10%;
height:100%;

}

/* single scrollable item */
.scrollable img {
    /* float:left; */
    width:100%;
   height: auto;
 /*    height:198px; */
}

/* active item */
.scrollable .active {
    border:2px solid #000;
    position:relative;
    cursor:default;
} 
```

HTML

```
<div id=header><!-- root element for scrollable -->
<div class="scrollable" id="scrollable">

  <!-- root element for the items -->
  <div class="items">

    <div>
      <img src="img/img2.jpg" />
    </div>

    <div>
       <img src="img/img1.jpg" />
    </div>

    <div>
     <img src="img/img3.jpg" />
    </div>

    <div>
     <img src="img/img4.jpg" />
    </div>

    <div>
     <img src="img/img6.jpg" />
    </div>

</div><!-- items -->

</div><!-- scrollable -->

</div><!-- header --> 
```

更新的查询

```
 <script>
        $(document).ready(function() {
        $("img.scrollable").each(function() {
            $('#header').css("height",$(this).innerHeight());
        });
        });
        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:15:41.500

签出这个 jquery 函数：[http ://api.jquery.com/height/](http://api.jquery.com/height/)

# c# - 生成 MSBuild 文件的免费软件

> ID：13367985
> 
> 赞同：0
> 
> 时间：2012-11-13T20:11:00.387
> 
> 标签：c#, .net, .net-3.5, build, msbuild

有谁知道任何好的免费软件来生成 MSBuild 文件？我正在使用 VS 2010 并且有一个网站（不是 Web 应用程序），所以没有 .csproj 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:12:44.537

我听说过有关 MSBuild Explorer 的好消息。这可能是你要看的东西！

*   [MSBuildExplorer](http://www.msbuildexplorer.com/)

# winrt-xaml - WinRT：如何为特定的 GridIViewtem 设置悬停效果？

> ID：13367986
> 
> 赞同：3
> 
> 时间：2012-11-13T20:11:02.463
> 
> 标签：winrt-xaml

我有一个绑定到 GridView 的项目列表。该列表包含多种类型的数据。我使用 ItemTemplateSelector 将 DataTemplate 应用于不同的数据类型，因此它们每个都有独特的外观和感觉。

我不知道如何在没有 DataTriggers 的情况下删除 SubClass1 的 DataTemplate 中 GridViewItem 的悬停效果。

```
public class Base
{
   public string Name {get;set;}
}
public class SubClass1 : Base
{
}
public class SubClass2 : Base
{
}
public PageViewModel : ViewModelBase
{
   public List<Base> ListOfBases {get;set;}
}

        <GridView
        x:Name="baseGridView"
        ItemsSource="{Binding ListOfBases}"
        ItemTemplateSelector="{StaticResource itemsTemplateSelector}"
        SelectionMode="Multiple"
        IsSwipeEnabled="false"
        IsItemClickEnabled="True"
        >

        <DataTemplate x:Key="SubClass1Template">
            <Grid Margin="0" Width="346" VerticalAlignment="Stretch" >
                <TextBlock Grid.Column="0" Text="{Binding Name}" />
            </Grid>
       </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T00:08:54.987

您将需要编辑 GridViewItem 的 VisualState 样式。为此，请右键单击 VisualStudio 或 Blend 中的 GridView。在设计视图或文档大纲中执行此操作。选择Edit Additional Template -> Edit Generated Item Container (ItemContainerStyle) -> Edit a Copy

如果要完全删除它，请删除 PointerOver 状态内的元素

```
<VisualState x:Name="PointerOver"/> 
```

您也可以使用它对其进行任何更改。也许您不喜欢默认的悬停颜色，但就像另一种颜色一样，您可以在此处进行这些更改。

**更新**基于评论

要仅具有某个类的悬停样式，请将用于悬停样式的控件（例如：边框）的 Visibility 设置为直接绑定到该类。然后 ValueConverter 将根据类的类型返回 Visible 或 Collapsed

# asp.net - ASP.NET 中 CSS 中图像文件夹的路径

> ID：13367991
> 
> 赞同：0
> 
> 时间：2012-11-13T20:11:19.077
> 
> 标签：asp.net, css

我是 .NET 的新手，正在尝试将一些 HTML 传输到 ASPX 页面中。我正在构建一个主题并在主题文件夹的根目录中有一个 CSS 文件。图片文件夹位于主题的根目录，而我想要的图片位于该文件夹中。在我的 web.config 中，我指定了要使用的主题。该页面正在提取一些主题，但不是图像。在原始 HTML 中，图像的路径是：

```
url(../images/image.png) 
```

我发现[这篇文章](http://www.dreamincode.net/forums/topic/278262-backgrnd-image-through-css-not-showing-in-aspnet/)说路径应该是：

```
url(images/image.png) 
```

但这也行不通。有人可以帮忙吗？谢谢。

文件夹结构是这样的：

```
theme
--style.css
--images/
----image.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:22:29.787

从您的 CSS 文件中，路径应该是（我已经对此进行了测试并且可以正常工作）：

```
url('images/image.png'); 
```

您的 HTML/ASPX/母版页头部分：

```
<head>
    <title>Untitled Page</title>
    <link rel="Stylesheet" href="style.css" type="text/css">
</head> 
```

示例 CSS 文件：

```
body
{
    background-image: url('images/image.jpg');
} 
```

# php - 我可以使用函数作为函数的名称吗？

> ID：13367992
> 
> 赞同：1
> 
> 时间：2012-11-13T20:11:24.897
> 
> 标签：php

我正在修改我的 PHP 框架并试图找出一种更简单的方法来处理不同的请求类型。

目前我在控制器方法中有这个块

```
$methodHandler = self::getMethodHandler(__FUNCTION__);
$this->$methodHandler(); 
```

getMethodHandler 在哪里

```
protected static function getMethodHandler($function) {
    return $function."_".ucwords(strtolower(Request::getMethod()));
} 
```

理想情况下，我想将这两行简化为一行，但 PHP 没有它

```
$this->self::getMethodHandler(__FUNCTION__)(); 
```

无论如何我可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:14:14.547

这应该有效：

```
$this->{self::getMethodHandler(__FUNCTION__)}(); 
```

这将评估`self::getMethodHandler(__FUNCTION__)`并调用结果作为`$this`.

# export - 将 sas 数据输出到 xpt 文件，变量名被截断为长度 8

> ID：13367993
> 
> 赞同：1
> 
> 时间：2012-11-13T20:11:28.117
> 
> 标签：export, sas

我正在使用以下代码将 SAS 数据集导出到 xpt 文件，但变量名被截断为长度 8。我可以做些什么来保留全名？

```
libname target xport 'C:\temp\test.xpt';
proc copy in=work out=target;
 select data;
run; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:37:33.820

XPort 文件的变量名最大长度为 8 - 它们旨在与早期版本的 SAS 以及其他软件高度兼容，在这两种情况下，最大长度为 8 是安全的。

有关XPORT 功能限制的更多详细信息， 请参阅[http://support.sas.com/documentation/cdl/en/movefile/59598/HTML/default/viewer.htm#a001027644.htm 。](http://support.sas.com/documentation/cdl/en/movefile/59598/HTML/default/viewer.htm#a001027644.htm)

你想用你的数据做什么？在保留变量名称的同时，可能有一种更安全/更简单的方法可以将其从 SAS 获取到您想要的内容。

# mysql - SQL 语法错误。突然断了？

> ID：13367994
> 
> 赞同：0
> 
> 时间：2012-11-13T20:11:30.933
> 
> 标签：mysql

尝试创建此表时，尽管它在几分钟前工作，但它不想正常工作？为简洁起见，假设`$username`等于`"Test"`。

我收到的错误是：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '( id(10) INT AUTO_INCREMENT, PRIMARY KEY(id), message varchar(250), ' 附近使用正确的语法

这是我目前正在使用的代码：

```
$sql = "CREATE TABLE {$username}
(
id(10) INT AUTO_INCREMENT,
PRIMARY KEY(id),
message varchar(250),
sender varchar(100)
)"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:17:05.140

您有 SQL 语法错误。

而不是`id(10) INT AUTO_INCREMENT` 它应该是`id INT(10) AUTO_INCREMENT`

# c++ - Visual Studio 2010 包含目录路径

> ID：13367999
> 
> 赞同：4
> 
> 时间：2012-11-13T20:11:43.693
> 
> 标签：c++, visual-studio-2010, include, include-path

我有一个带有以下路径的视觉工作室解决方案 myvs.sln `c:\dir1\dir2\dir3\myvs\myvs\myvs.sln`：. 我在`c:\dir1\dir2\dir3\boostxxx\`.

我在 project->properties->c/c++->general:中有`../..;../../boostxxx`。在 boost 库中，包含文件具有以下语法：`#include <boost/smart_ptr/shared_ptr>`.

我的代码文件`myfile.h`位于`c:\dir1\dir2\dir3\yy1\myfile.h`. 在 myfile.h 中，我将 boost 库包括为：`#include <boost/shared_ptr.hpp>`. 我收到一条错误消息：`c:\dir1\dir2\dir3\yyy1/myfile.h fatal error C1083 cannot open include file boost/shared_ptr.hpp`.

问题是我应该怎么做才能纠正这个问题？

我还注意到编译器抛出的错误输出在 dir3 之前有“\”，然后更改为“/”。

很可能我不明白相对路径是如何工作的。另请注意，我只想引用相对路径而不是绝对路径。有人可以帮忙吗？我在使用 c++ Visual Studio 2010 的 Windows 平台上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:20:21.343

*搜索路径中的*相对路径指~~`#include`带有指令的文件的目录~~编译器的当前目录，一些简单的测试现在显示。

"..\.." 上升了两个级别~~你的头文件~~编译器的当前目录而不是您的项目目录。

要解决此问题，请在 Visual Studio 项目目录中显式启动包含路径，如下（字面意思）：

> $(ProjectDir)..\..;$(ProjectDir)..\..\BoostXXX

关于正斜杠与反斜杠，请在 C++ 代码的指令中使用正斜杠`#include`，因为这是最可移植的。

使用正斜杠或反斜杠（但我更喜欢反斜杠，以便有一个单一的约定），您指的是 Windows 文件系统，例如在包含路径的设置中。