# StackOverflow 问答 12819000-12819999

# c# - 安装 VS2012 后，一个进程中的调试/中断不会停止其他进程

> ID：12819002
> 
> 赞同：1
> 
> 时间：2012-10-10T12:09:04.023
> 
> 标签：c#, .net, visual-studio, debugging, visual-studio-2012

最近我安装了VS2012

我有一个作为套接字服务器的应用程序并运行另一个客户端应用程序来访问它。

在我调试时安装 vs2012 之前一切都停止了，但现在其他线程继续运行。

我检查了调试选项并勾选了“一个进程中断时中断所有进程”

我也尝试过使用 VS2010 但同样的问题

# java - 番石榴：Throwables.propagate 和 InterruptedException

> ID：12819003
> 
> 赞同：14
> 
> 时间：2012-10-10T12:09:07.510
> 
> 标签：java, exception-handling, guava, interrupted-exception

`InterruptedException`在 Guava 中使用 Throwables.propagate(e) 时处理 s 的最佳做法是什么？

我喜欢使用`throw Throwables.propagate(e)`，尤其是在不引发检查异常以及异常处理是调用者责任的方法中。但它并没有达到我对 InterruptedException 的期望。

我不想失去线程被中断的事实，所以我最终写了如下内容：

```
public void run() {
    Callable c = ...;
    try {
        c.call();
    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
        throw Throwables.propagate(e);
    } catch (Exception e) {
        throw Throwables.propagate(e);
    }
} 
```

有没有办法在番石榴中做到这一点？是否有（向后兼容？！）使用 Throwables.propagate() 之类的方法将线程设置为中断，如果它正在包装和传播 InterruptedException？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T16:58:12.633

方便的是，我们不久前在内部讨论了这个问题。我将复制并粘贴：

我的强硬观点`Throwables.propagate(e)`是，基本上`throw new RuntimeException(e)`人们不应该这样做，就像他们通常不应该写一样`throw new RuntimeException(e)`。（如果他们要写它，他们还不如直接写它，以便清楚发生了什么。）

我对——通常是人们如何让自己陷入这种混乱——的强硬观点`catch (Exception e)`是，他们通常也不应该那样做。（显然，在某些情况下`catch (Exception e)`显然是正确的做法（基本上是任何顶级的操作范围的 catch 块），但这些都是......显而易见的。）

我的强硬观点`InterruptedException`是，完全有`InterruptedException`实现`Exception`方式就是以这种方式破坏的：它需要特殊处理，而其他异常则不需要。

`InterruptedException`我对转换为 a的强硬意见`RuntimeException`是“不要”。（这就像我上面所说的许多其他东西一样，是有争议的。）

所以一方面，我不确定我们能做些什么来挽救`propagate()`。另一方面，也许让方法不那么糟糕是件好事。

再一次，考虑这个调用者，它捕获`ExecutionException e`：

`throw Throwables.propagate(e.getCause());`

中断消费者线程是错误的，就像`e.getCause()`直接抛出是错误的一样，因为中断是针对计算线程的，而不是针对消费者线程的。

我倾向于`propagate()`独自离开。（您可能猜到了，我个人倾向于弃用它，但这是一个更大的讨论。）

# javascript - 使用硬编码字符串作为参数以及使用具有该值的变量时，方法返回不同的值

> ID：12819004
> 
> 赞同：2
> 
> 时间：2012-10-10T12:09:08.830
> 
> 标签：javascript, tinymce

这：

```
str = "test                 test"
ed.selection.setContent(str);//1 
```

行为与此不同：

```
ed.selection.setContent("test                 test");//2 
```

我正在使用文本编辑器，并且 setContent 在文本框中设置值。1 将文本框中的值设置为

```
"test test" 
```

和 2 将其设置为

```
"test                 test". 
```

我只能在程序中使用变量，而不是硬编码的值。我该怎么办？为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:13:22.033

不，不会有任何区别。如果行为确实异常，则对全局变量的赋值会`str`与您的其余代码混淆。通过添加`var`关键字使它们本地化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:21:08.830

你在用tinyMCE吗？（请重新标记您的问题）
[他们的文档具体](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.Editor.setContent)：

> 这将在使用不同的清理规则选项设置内容之前清理内容

尝试`{format : 'raw'}`在字符串之后添加：，如下所示：

```
ed.selection.setContent("test                 test", {format : 'raw'}); 
```

在这两个帐户上，看看它是否有帮助。

编辑（最终，我希望）：在将其插入函数之前
使用。 你可以[在这里](http://fiddle.tinymce.com/)测试它，这应该工作。`str = str.replace(/\s/g, '&nbsp;');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:58:03.250

这里的问题是一次插入多个空格（不是每个键盘）将使浏览器将它们显示为一个空格。

如果用户输入空格，则会输入一些空格作为受保护的空格来欺骗浏览器行为。在使用 setContent 方法插入内容时，您需要将每个第二个空格替换为受保护的空格，以获得相同的外观。

# c# - C# WPF：添加鼠标进入和鼠标离开事件处理程序后，列表框项目未突出显示

> ID：12819012
> 
> 赞同：1
> 
> 时间：2012-10-10T12:09:26.707
> 
> 标签：c#, .net, wpf, events, xaml

我正在使用 WPF 在 C# .NET 3.5 中开发应用程序。我在对话框中有一个列表框。当鼠标移到列表框中的某个项目上时，该项目会以蓝色背景突出显示。

当鼠标悬停在列表框中的某个项目上时，我想执行某些操作。所以我为列表框项添加了鼠标进入和鼠标离开事件处理程序，如下所示：

XAML 代码：

```
<ListBox  Name="listBox1" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="16,367,0,0" Width="181" Height="186" >
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <EventSetter Event="MouseEnter" Handler="listBox1_ListBoxItem_MouseEnter"/>
            <EventSetter Event="MouseLeave" Handler="listBox1_ListBoxItem_MouseLeave"/>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

C#代码：

```
private void listBox1_ListBoxItem_MouseEnter(object sender, MouseEventArgs e)
{
    ListBoxItem Item = sender as ListBoxItem;

    // Perform operations using Item.

    e.Handled = false;
}

private void listBox1_ListBoxItem_MouseLeave(object sender, MouseEventArgs e)
{
    ListBoxItem Item = sender as ListBoxItem;

    // Perform operations using Item.

    e.Handled = false;
} 
```

添加事件处理程序后，当鼠标移到项目上时，列表框项目不再突出显示。如何使突出显示与事件处理程序一起工作？

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:04:47.067

您正在覆盖 ListBoxItem 的默认样式，您应该使用 BasedOn 属性对其进行扩展

```
<ListBox  Name="listBox1" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="16,367,0,0" Width="181" Height="186" > 
    <ListBox.ItemContainerStyle> 
        <Style TargetType="ListBoxItem" BasedOn="{StaticResource {x:Type ListBoxItem}}"> 
            <EventSetter Event="MouseEnter" Handler="listBox1_ListBoxItem_MouseEnter"/> 
            <EventSetter Event="MouseLeave" Handler="listBox1_ListBoxItem_MouseLeave"/> 
        </Style> 
    </ListBox.ItemContainerStyle> 
</ListBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:21:54.627

丢失默认样式。您可以重新添加颜色。但我喜欢 Dtex 的答案。

```
 <ListBox.ItemContainerStyle>
            <Style TargetType="ListBoxItem">
                <EventSetter Event="MouseEnter" Handler="listBox1_ListBoxItem_MouseEnter"/>
                <EventSetter Event="MouseLeave" Handler="listBox1_ListBoxItem_MouseLeave"/>
                <Style.Resources>
                    <!-- Background of selected item when focussed -->
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                        Color="Green"/>
                    <!-- Background of selected item when not focussed -->
                    <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"
                        Color="LightGreen" />
                </Style.Resources>
            </Style>
        </ListBox.ItemContainerStyle> 
```

# solr - solr 4.0 中的 mergeFactor 用法

> ID：12819014
> 
> 赞同：6
> 
> 时间：2012-10-10T12:09:35.987
> 
> 标签：solr, lucene

我认为mergeFactor可以被认为是段内的最大数量，但是当它设置为10时，我在索引后得到16个段，并且当段内的数量超过15和20时发生合并。我对mergeFactor的平均值感到非常困惑。

这是我的配置

```
<ramBufferSizeMB>32</ramBufferSizeMB>
<maxBufferedDocs>100000</maxBufferedDocs>
<mergeFactor>10</mergeFactor> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T12:18:37.413

来自[Solr Wiki - SolrPerformanceFactors - Merge Factor 文档](http://wiki.apache.org/solr/SolrPerformanceFactors#mergeFactor)

> mergeFactor*大致*确定了段的数量。mergeFactor 值告诉 Lucene 在将它们合并为单个段之前要构建多少个相同大小的段。它可以被认为是数字系统的基础。

它不是一个确切的数字，而是如何在磁盘上管理索引的指南。以下是有关此值的不同设置对您的索引性能有何影响的一些其他很好的指导：

> **合并因子权衡**
> 
> 高价值合并因子（例如，25）：
> 
> *   优点：通常会提高索引速度
> *   缺点：合并频率较低，导致集合包含更多索引文件，这可能会降低搜索速度
> 
> 低值合并因子（例如，2）：
> 
> *   优点：索引文件数量较少，可加快搜索速度。
> *   缺点：更多的段合并会减慢索引速度。

您还可以参考[Lucidworks 站点上的 mergeFactor 文档，](http://lucidworks.lucidimagination.com/display/solr/Configuring+solrconfig.xml#Configuringsolrconfig.xml-%7B%7BmergeFactor%7D%7D)了解有关 mergeFcator 如何工作以及如何影响索引性能的更多详细信息。但我认为这里的关键是这一段：

> 如果创建新段会导致最低级段的数量超过 mergeFactor 值，则所有这些段将合并在一起形成一个大段。因此，如果合并因子为 10，则每次合并都会创建一个单独的段，该段大约是其十个组成部分中的每一个的十倍。当这些较大的段有 mergeFactor 设置时，它们又会合并成一个更大的单个段。这个过程可以无限期地继续下去。

# c# - 播放解码的 RTP 数据包的音频

> ID：12819016
> 
> 赞同：0
> 
> 时间：2012-10-10T12:09:38.813
> 
> 标签：c#, audio, byte, wav, rtp

我捕获了 RTP 数据包并使用以下代码对其进行解码：

```
public byte[] Decode(byte[] data)
{
    MemoryStream src=new MemoryStream(data);
    System.IO.BinaryReader brsrc=new BinaryReader(src);
    MemoryStream dst=new MemoryStream();
    System.IO.BinaryWriter bwdst=new BinaryWriter(dst);
    int step=(int)(data.Length/10);
    for(int i=0;i<step;i++)
    {
        byte[] d=new byte[160];
        va_g729a_decoder(brsrc.ReadBytes(10),d,0);
        bwdst.Write(d);
    }
    byte[] ret=dst.GetBuffer();
    brsrc.Close();
    bwdst.Close();
    src.Close();
    dst.Close();
    return ret;         
} 
```

使用 g729 dll。

现在我有一个充满解码的 RTP 数据包的字节数组，我如何播放它或将其转换为 WAV 文件或类似的东西？

Thnaks，奥菲克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:20:12.003

您可以使用**ffmpeg**将 rtp 数据转换为 mp3 格式的语音。这里[参考](https://stackoverflow.com/questions/13468240/how-to-convert-g729-encoded-byte-array-to-wav-in-c)。

# asp.net - 尝试将数据表中的项目读入网页

> ID：12819017
> 
> 赞同：0
> 
> 时间：2012-10-10T12:09:44.243
> 
> 标签：asp.net

我正在尝试将 DataTable 中的项目读入网页，但在 C# 代码中出现 2 个错误：`p1.InnerHTML = dt.rows(0).Item(0);`

错误：

p1 在当前内容中不存在。System.Data.Datatable 不包含“行”的定义，也没有接受第一个参数的扩展方法“行”..

C＃

```
protected void Page_Load(object sender, EventArgs e)
{
    DataTable dt = new DataTable();
    string strConnection = ConfigurationManager.ConnectionStrings["ChinatowndbConnString"].ConnectionString;
    SqlConnection conn = new SqlConnection(strConnection);
    string sql = "SELECT pagetext FROM Content where pagetag = 1";
    SqlCommand cmd = new SqlCommand(sql);
    cmd.CommandType = CommandType.Text;
    cmd.Connection = conn;
    SqlDataAdapter sd = new SqlDataAdapter(cmd);
    sd.Fill(dt);

    p1.InnerHTML = dt.rows(0).Item(0);
    p2.InnerHTML = dt.rows(1).Item(0);
    p3.InnerHTML = dt.rows(2).Item(0);
} 
```

HTML：

```
<p id="p1" class="none"></p>
<p id="p2" class="none"></p>
<p id="p3" class="none"></p> 
```

任何想法如何让我的代码工作，

谢谢茶

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:15:04.047

1.  `p``runat=server`是一个 html 元素，如果你想在服务器端访问它，你必须添加它
2.  C# 区分大小写，并且调用属性`Rows`而不是`rows`

    ```
    <p id="p1" runat="server" class="none"></p>
    <p id="p2" runat="server" class="none"></p>
    <p id="p3" runat="server" class="none"></p> 
    ```

此外，在 C# 中，通过方括号而不是圆括号访问数组索引器。但我建议改用[`DataRow.Field`](http://msdn.microsoft.com/en-us/library/system.data.datarow.field%28v=vs.90%29.aspx)扩展方法：

```
p1.InnerHtml = dt.Rows[0].Field<String>(0); // first field of first row, assuming that it's a string 
```

最后说明：你也拼错了`InnerHtml`。如果光标在某处 `InnerHTML`并且您按，Visual Studio 可以自动为您更正它`Ctrl+Space`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:18:20.203

您需要为它们中的每一个添加 runat="server" 才能在服务器端访问。

```
<p id="p1" class="none" runat="server"></p>
<p id="p2" class="none" runat="server"></p>
<p id="p3" class="none" runat="server"></p> 
```

并在分配使用时

```
dt.Rows[0][0].ToString();
dt.Rows[1][0].ToString();
dt.Rows[2][0].ToString(); 
```

# c# - 为 asp.net Web 应用程序创建日志

> ID：12819020
> 
> 赞同：1
> 
> 时间：2012-10-10T12:09:53.867
> 
> 标签：c#, asp.net, c#-4.0

我想为 asp.net Web 应用程序创建一个日志文件。你能帮我创建它吗？我想监视有关我的应用程序的每一个操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:19:44.280

我认为你应该使用 log4net。它可以帮助你，所以 log4Net 工作，表现良好并且稳定

看看这个样本：

[Log4Net 实现](http://weblogs.asp.net/dotnetstories/archive/2012/04/16/using-log4net-in-an-asp-net-application.aspx)

[Log4Net 样本 1](http://www.codeproject.com/Articles/37107/Log4Net-with-ASP-NET-3-5-File-Appender)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:24:21.813

[像log4net](http://logging.apache.org/log4net/)和[NLog](http://nlog-project.org/)这样的 3rd 方框架真的会帮助你。这里有一些教程：[log4net 教程](http://www.codeproject.com/Articles/140911/log4net-Tutorial)和[NLog 教程](http://www.codeproject.com/Articles/10631/Introduction-to-NLog)。不过，依赖日志可能不是最好的主意——这实际上取决于您正在创建的应用程序。审计表可能更合适。

# sed - 简约的 'sed' 应作为“常规” sed 执行。需要帮助解析

> ID：12819023
> 
> 赞同：0
> 
> 时间：2012-10-10T12:10:14.563
> 
> 标签：sed

我正在使用解析 JSON 的脚本。我知道，我知道，你永远不应该这样做。但是脚本大量使用了它。这就是它遇到麻烦的原因。我在 BusyBox 上使用它，并且只有一个简约版本的 sed。

这就是它遇到麻烦的地方。这是 JSON 输出：

```
{"expires": "Thu, 11 Oct 2012 11:30:29 +0000", "upload_id": "hhgJHflih753jDhhod", "offset": 293876} 
```

这是用于获取“offset”值的 sed 命令，该值适用于 busybox：

```
sed -n -e 's/.*"offset":\s*\([^}]*\).*/\1/p' 
```

这是获取upload_id 的命令，它在BusyBox 上不起作用：

```
sed -n -e 's/.*"upload_id":\s*"*\([^"]*\)"*.*/\1/p' 
```

如果有人可以帮助我使用简约的 sed 在 BusyBox 上获取“upload_id”，我将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:22:11.893

一种使用方式`awk`：

```
awk -F "[:,]" '{ for (i=1; i<=NF; i++) if ($i ~ /upload_id/) { gsub(/[" {}]/,"",$(i+1)); print $(i+1) } }' file.txt 
```

结果：

```
hhgJHflih753jDhhod 
```

请注意，这适用于`offset`and`upload_id`字段，但不适用于`expires`字段。HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:15:17.570

使用[`cut`](https://www.gnu.org/software/coreutils/manual/html_node/cut-invocation.html)：

```
$ # get upload_id
$ echo '{"expires": "Thu, 11 Oct 2012 11:30:29 +0000", "upload_id": "hhgJHflih753jDhhod", "offset": 293876}' |\
cut -d'"' -f8
hhgJHflih753jDhhod
$ # get offset
$ echo '{"expires": "Thu, 11 Oct 2012 11:30:29 +0000", "upload_id": "hhgJHflih753jDhhod", "offset": 293876}' |\
cut -d':' -f6 | cut -d' ' -f2 | cut -d'}' -f1
293876 
```

这是极简主义。

**编辑：**

使用[`gawk`](https://www.gnu.org/software/gawk/)：

```
$ echo '{"expires": "Thu, 11 Oct 2012 11:30:29 +0000", "upload_id": "hhgJHflih753jDhhod", "offset": 293876}' |\
gawk -F'"' '{print $8}'       
hhgJHflih753jDhhod 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:37:14.653

grep：

```
grep -Po '(?<=upload_id": ")[^"]*' 
```

赛德：

```
sed -r 's/.*upload_id": "([^"]*).*/\1/' 
```

# filemaker - 如何在 filemaker pro 中动态填充选项卡中的记录

> ID：12819027
> 
> 赞同：0
> 
> 时间：2012-10-10T12:10:18.057
> 
> 标签：filemaker

我正在使用 FileMaker Pro Advance 。我想设计产品目录，其中包括标签栏或按钮中的产品类型，当用户选择任何类型的产品时，它将填充产品的子类别。

目前我正在从 product_type 表中获取产品类型。当我使用单选按钮或下拉菜单时，它会填充，但我想在加载布局时填充的选项卡或按钮中显示它。可能吗 ？？？

```
Have anyone Solution for the same. Thanks in Advance....

Anirudh Pandey
ani.pandey.007@gmail.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:21:41.840

我可能在这里遗漏了一些东西，但是您是否尝试过 FileMaker 选项卡集？

# c# - 使用错误数据上下文的用户控件

> ID：12819044
> 
> 赞同：1
> 
> 时间：2012-10-10T12:11:13.187
> 
> 标签：c#, wpf, binding, dependency-properties, datacontext

我有一个以这种方式在父控件中使用的 UserControl：

```
<Views:TranslationTextInput  Translation="{Binding SelectedEntity.Name}"/> 
```

父控件 DataContext 是一个包含 SelectedEntity 属性的 ViewModel。

在我的子 UserControl 中，我将一个新的 ViewModel 定义为 DataContext：

```
 <UserControl.DataContext>
      <vm:TranslationTextInputViewModel x:Name="vm"></vm:TranslationTextInputViewModel>
    </UserControl.DataContext> 
```

在我后面的代码中：

```
 public static readonly  DependencyProperty TranslationProperty = DependencyProperty.Register("Translation", typeof(Translation),typeof(UserControl));

    // .NET Property wrapper
    public Translation Translation
    {
        get { return (Translation)GetValue(TranslationProperty); }
        set { SetValue(TranslationProperty, value); }
    }

 public TranslationTextInput(){
     InitializeComponent();
     DataContext = new TranslationTextInputViewModel();
     SetBinding(TranslationProperty,   new Binding { Path = new PropertyPath     ("Translation"), Mode = BindingMode.OneWayToSource }); 
```

执行时出现绑定错误：

```
System.Windows.Data Error: 40 : BindingExpression path error: 'SelectedEntity' property not found on 'object' ''TranslationTextInputViewModel' (HashCode=49954236)'. BindingExpression:Path=SelectedEntity.Name; DataItem='TranslationTextInputViewModel' (HashCode=49954236); target element is 'TranslationTextInput' (Name='InputControl'); target property is 'Translation' (type 'Translation') 
```

似乎 SelectedEntity 是在子 UserControl 的 Viewmodel 上查找的，但应该使用父 ViewModel 的属性。我该如何解决这个问题？

编辑：

```
 public TranslationTextInputViewModel()
    {
        //EnglishTranslation = tranlsations["en"];
    }

    public string EnglishTranslation
    {
        get
        {
            if (!Translation.TranslationDict.ContainsKey(new CultureInfo("en").LCID))
                Translation.Translations.Add(new TranslationItem() { Text = "", Lcid = new CultureInfo("en").LCID });
            return Translation.TranslationDict[new CultureInfo("en").LCID].Text;
        }
        set
        {
            Translation.TranslationDict[new CultureInfo("en").LCID].Text = value;
        }

    }

    public string SelectedTranslation
    {
        get
        {
            if (!Translation.TranslationDict.ContainsKey(_selectedLanguage))
                Translation.Translations.Add(new TranslationItem() { Text = "", Lcid = _selectedLanguage });
            return Translation.TranslationDict[_selectedLanguage].Text;

        }

        set
        {
            Translation.TranslationDict[_selectedLanguage].Text = value;
        }
    }

    private Translation _translation;

    public Translation Translation
    {
        get
        {
            if (_translation == null)
                _translation = new Translation();
            return _translation; }
        set { _translation = value; }
    }

    private int _selectedLanguage;
    public int SelectedLanguage
    {
        get
        {
            return _selectedLanguage;
        }
    }

    public List<CultureInfo> AvailableLanguages
    {
        get
        {

            return (from x in PqsLocalization.AvailableLanguages where x.Name != "en" select x).ToList();
        }
    }

    public RelayCommand<int> LanguageChanged { get; private set; }

    private void LanguageChangedExecute(int lang)
    {
        _selectedLanguage = lang;
        RaisePropertyChanged("SelectedLanguage");
        RaisePropertyChanged("SelectedTranslation");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:05:14.257

你真的不应该`DataContext`从. 通过这样做，您可以防止任何其他内容被传递给，这违背了 WPF 拥有独立 UI 和数据层的最大优势之一。`UserControl``UserControl``DataContext``UserControl`

创建 UserControl 时，您将 设置`DataContext`为 new `TranslationTextInputViewModel`，并且`TranslationTextInputViewModel`没有名为 的属性`SelectedEntity`，因此您的绑定失败。

我的建议？不要`DataContext`在`UserControl`.

如果您希望将特定 ViewModel 用于特定 UserControl，请将其添加到您的`ParentViewModel`并将其作为 传递`DataContext`，例如：

```
<Window.Resources>
    <DataTemplate DataType="{x:Type vm:TranslationTextInputViewModel}">
        <Views:TranslationTextInput />
    </DataTemplate>
</Window.Resources> 
```

或这个：

```
<Views:TranslationTextInput 
    DataContext="{Binding SelectedTranslationTextInputViewModel}" /> 
```

或者，如果您`ViewModel`包含特定于`UserControl`自身的功能并且不应该是您的应用程序层的一部分，则将该代码放在代码隐藏中`UserControl`并完全摆脱`ViewModel`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:18:41.833

试试这个：

```
<Views:TranslationTextInput  Translation="{Binding SelectedEntity.Name}" DataContext="{Binding DataContext, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:22:28.470

一旦你设置了`DataContext`你的绑定将使用它，所以我希望这种行为——`SelectedEntity.Name`在`TranslationTextInputViewModel`.

有几种方法可以让这个工作。就个人而言，我喜欢在视图模型本身（具有视图模型属性的视图模型）中对这些关系进行建模，但在这种情况下，我可能会尝试这样做，尽管感觉很不愉快：

```
<Views:TranslationTextInput 
    Translation="{Binding DataContext.SelectedEntity.Name,
                  RelativeSource={RelativeSource FindAncestor,
                                  AncestorType=ParentControlType}}" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T12:20:05.577

这是因为您在构造函数中将**TranslationTextInput.DataContext**设置为**TranslationTextInputViewModel**。

# vba - 如何将现有工作表复制到我的活动工作簿中？

> ID：12819045
> 
> 赞同：0
> 
> 时间：2012-10-10T12:11:14.203
> 
> 标签：vba, excel

我有 2 张纸，其中一张有 2 个按钮`Browsefile`和`Openfile`一个 textbox `TextBox1`。我使用`Browsefile`按钮选择要打开的文件并使用`Openfile`按钮打开工作簿。

问题是，它会在新工作簿中打开，而不是将其添加到我的活动工作簿中。我怎么能解决这个问题？

```
Public fileStr As String
Sub GetOpenFile()

fileStr = Application.GetOpenFilename()
Worksheets("Sheet1").TextBox1.Value = fileStr

End Sub
Sub Paste_Click()
Dim wbk1 As Workbook, wbk2 As Workbook

Set wbk1 = ActiveWorkbook
Set wbk2 = Workbooks.Add(fileStr)

wbk2.Sheets(1).Cells.Copy wbk1.Worksheets("Sheet2").Cells(1, 1)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:44:20.380

试试这个:) 它将允许您选择文件并在打开的工作簿末尾复制第一张工作表。

```
Sub Paste_Click()
Dim wbk1 As Workbook, wbk2 As Workbook

fileStr = Application.GetOpenFilename()

Set wbk1 = ActiveWorkbook
Set wbk2 = Workbooks.Add(fileStr)

wbk2.Sheets("Sheet1").Copy After:=Workbooks("WorkbookNameYouCopyCodeInto").Sheets(3)
wbk2.Close
End Sub 
```

# data-structures - 为什么我们需要一个单独的数据结构，比如用于数据库和文件系统的 B-Tree？

> ID：12819049
> 
> 赞同：21
> 
> 时间：2012-10-10T12:11:28.820
> 
> 标签：data-structures, tree, binary-tree, binary-search-tree, b-tree

我正在阅读 B 树，看起来它们在 O(lg n) 时间内实现了动态集合操作。红黑树（Java中的TreeMap）也在渐近相同的时间范围内实现了相同的操作。所以我想知道是什么让 B 树对数据库和文件系统更有用

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-10T21:10:20.380

B-Trees 存在的主要原因是为了更好地利用读取和写入大块数据的设备的行为。当数据必须存储在磁盘上时，两个属性对于使 B-Tree 优于二叉树非常重要：

*   访问磁盘真的很慢（与内存或缓存相比，随机访问磁盘上的数据要慢几个数量级）；和
*   每次读取都会导致从驱动器加载整个扇区 - 假设扇区大小为 4K，这意味着 1000 个整数或数十个您要存储的较大对象。

因此，我们可以利用第二个事实的优点，同时尽量减少缺点——即磁盘访问次数。

因此，我们可以创建一个更大的索引来告诉我们是否应该继续到第一个 1/100，到第二个或到第 99 个（想象图书馆中的书籍按第一个字母排序，然后按第二个字母排序，依此类推）。只要所有这些数据都适合单个扇区，它就会被加载，所以我们不妨完全使用它。

这导致大致 log [b] N 查找，其中 N 是记录数。[这个数字虽然与 log 2] N渐近相同，但实际上在 N 和 b 足够大的情况下要小几倍——而且由于我们正在讨论将数据存储到磁盘以供数据库等使用，因此数据量通常为大到足以证明这一点。

其余的设计决策主要是为了使这一工作有效地完成，因为修改 N 叉树比二叉树更棘手。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-10T12:27:25.007

RB树是二叉搜索树。B 树可以有两个以上的子节点。事实上，子节点的数量是可变的。

因此，您可以改变子节点的数量，使节点的大小始终是文件系统块大小的倍数。这减少了阅读时的浪费：无论如何，你不能阅读少于一个块，你总是必须阅读整个块，所以你最好用有用的数据填充它。增加子节点的数量也会*降低*树的深度，从而减少“跳”的平均数量（即磁盘读取），这再次提高了性能。

请记住：B 树通常用于存储比内存大几个数量级的数据结构*，*而 RB 树通常用于存储比内存*小*几个数量级的数据结构。事实上，B 树是专门设计为磁盘上的数据结构，而不是内存中的数据结构。

这是[维基百科文章](http://Wikipedia.Org/wiki/B-tree)（重点是我的）的关键句子：

> B树*针对*读写*大数据块的系统进行了优化*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T12:53:46.777

我们需要不同的算法，因为内存中的访问速度比磁盘上的快得多。红/黑树会进行多次内存访问，因此它与内存的快速访问速度配合得很好。b-tree 进行更少、更大的访问，因为正在访问的磁盘很慢。

# java - testNG 测试类可以从另一个类扩展吗？

> ID：12819051
> 
> 赞同：2
> 
> 时间：2012-10-10T12:11:34.063
> 
> 标签：java, testng

使用 java 和 testNG，我在两个不同的类 test1.class 和 test2.class 中有两个测试，以及一个包含大部分方法的 base.class：

```
public class BaseTest {

@Test
public void step1() {

}

@Test(dependsOnMethods="step1")
public void step2() {

}

@Test(dependsOnMethods="step3")
public void step4() {

}
}

public class Test1() extends BaseTest {
@Test(dependsOnMethods="step2")
public void step3() {

}
} 
```

然后我在 test1.class 上运行了一个 testng-test，但这不起作用，它说“step4 取决于方法 public void step3()，它没有用 @Test 注释或不包括在内”

我想这是错误的方法，但我想不出更好的方法。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:15:52.533

这似乎有点违反直觉。如果不了解测试中发生了什么，也许`step3()`实际上应该是在子类中实现的抽象方法，而不是带注释的测试。

这种方式`step3()`总是会运行，因为它是从基类调用并在子类中实现的。

# mysql - 查询中没有不同的值

> ID：12819060
> 
> 赞同：0
> 
> 时间：2012-10-10T12:11:53.490
> 
> 标签：mysql, distinct-values

我有这个查询

```
select distinct Name,ID from tbl_abc where Name like '%william jam%' 
```

我的预期结果是

```
Anderson William James   1
William James            2 
```

结果是

```
Anderson William James   1
William James            2
William James            3 
```

表中存在的数据是

```
Anderson William James   1
William James            2
William James            3 
```

我怎么能做到这一点。我从过去 2 小时开始尝试这个，但没有得到不同的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:13:55.127

```
select Name,ID
 from tbl_abc where Name like '%william jam%'
group by Name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:14:11.087

你可以实现使用`GROUP BY`，如果你想要最新记录的ID使用`MAX`和首次使用`MIN`相同的名称

对于最大值

```
select Name, MAX(ID) from tbl_abc where Name like '%william jam%' GROUP BY Name 
```

对于分钟

```
select Name, MIN(ID) from tbl_abc where Name like '%william jam%' GROUP BY Name 
```

# c# - Telerik Ajax UpdatePanel radgrid 等待页面加载

> ID：12819063
> 
> 赞同：2
> 
> 时间：2012-10-10T12:11:54.857
> 
> 标签：c#, asp.net, .net, ajax, telerik

我正在使用一个

```
<asp:UpdatePanel ID="AjaxUpdatePanel" runat="server"> 
```

在页面上加载 radgrid

```
<telerik:RadGrid ID="StatisticsGrid" runat="server"> 
```

加载大约需要 10 秒，这是因为它正在从数据库加载大量数据，但不是加载页面并显示“正在加载”文本或图像，而是在 radgrid 准备好后加载页面，页面加载时间为 10 秒。你知道我怎样才能避免这种情况并显示一个优雅的加载文本/图像吗？重新绑定网格时它也应该工作。

提前致谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:36:12.530

由于您使用的是 Telerik，我推荐`RadAjaxLoadingPanel`：

```
<telerik:RadAjaxLoadingPanel ID="RadAjaxLoadingPanel1" runat="server" Skin="WebBlue">
</telerik:RadAjaxLoadingPanel>

<telerik:RadAjaxPanel ID="RadAjaxPanel1" runat="server" LoadingPanelID="RadAjaxLoadingPanel1">
    <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
        <AjaxSettings>
            <telerik:AjaxSetting AjaxControlID="StatisticsGrid">
                <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="StatisticsGrid"/>
                </UpdatedControls>
            </telerik:AjaxSetting>
        </AjaxSettings>
    </telerik:RadAjaxManager>

    <telerik:RadGrid ID="StatisticsGrid" runat="server">
         ...
    </telerik:RadGrid>
</telerik:RadAjaxPanel> 
```

因此，将您的替换`asp:UpdatePanel`为`telerik:RadAjaxPanel`. （我总是喜欢使用所有 Telerik 控件，因为他们的示例和支持团队鼓励这种做法。）

# shopify - 无需购买即可创建客户帐户

> ID：12819067
> 
> 赞同：0
> 
> 时间：2012-10-10T12:12:02.363
> 
> 标签：shopify

我要求shopify网站使用“会员模式”，访问者在注册/登录之前无法访问该网站。不幸的是，由于shopify的工作流程，客户只能在他们注册时才能注册买了东西。

该 API 允许创建客户帐户，并且想知道是否可以使用它来创建客户帐户而无需访问者实际购买任何东西，并触发“邀请”电子邮件，以便将其创建为可用帐户。这可能吗？

或者有一个可行的解决方案吗？我完全理解并同意 shopify 的工作流程，但这将是一个不错的选择。

问候， 罗伯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:29:47.290

客户 API 处理客户记录的创建和管理，而不是客户帐户。

目前无法以编程方式创建客户帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:52:03.800

我面临同样的问题。如果它可能有帮助，以下是使用 PHP API 适配器添加客户记录的方法：

```
<?php
require 'shopify.php';
$shopify = shopify_api_client($shops_myshopify_domain, NULL, $api_key, $password, true);

try
{

    $newCustomer = array
    (
        "customer" => array
        (
            "first_name"    => $_POST['first_name'],
            "last_name"     => $_POST['last_name'],
            "email"         => $_POST['email']
        )
    );

    try
    {
        $addCustomer = $shopify('POST', '/admin/customers.json', $newCustomer, $response_headers);          
    }
    catch (ShopifyApiException $e)
    {
        print_r($e);
    }

}
catch (ShopifyApiException $e)
{
    print_r($e->getInfo());
}
catch (ShopifyCurlException $e)
{
    echo $e->getMessage();
}

?> 
```

这仍然让您在激活方面感到头疼。AFAIK Shopify 在其 API 中不提供任何东西来自动发送激活电子邮件。

也许像[http://mechanize.rubyforge.org](http://mechanize.rubyforge.org)这样的东西可以处理重复的发送激活的东西，不确定。

# javascript - 将日期格式更改为中文

> ID：12819073
> 
> 赞同：0
> 
> 时间：2012-10-10T12:12:21.617
> 
> 标签：javascript, date

我有一个 JSP 页面，其中日期根据用户的语言从 Java 方法填充到测试框中。我们目前允许用户以中文和英文访问该站点

用户使用中文的日期如下所示 - 2012 年 10 月 10 日。

但是，当用户从日期选择器 js（我无法更改）中选择不同的日期时，日期将变为正常格式 10-OCT-2012。

用户选择后是否可以再次使用Javascript将日期格式更改为中文？

# google-geocoding-api - Google Geocoding API，需要道路/街道名称

> ID：12819074
> 
> 赞同：0
> 
> 时间：2012-10-10T12:12:23.257
> 
> 标签：google-geocoding-api

我正在使用 Google Geocoding API 仅基于邮政编码搜索返回结果。我得到的结果没问题，但从来没有返回道路/街道组件。这通常是有道理的，因为邮政编码的范围可能跨越多条街道。那么我怎样才能获得这些范围内的街道列表或类似的东西来实现在线邮政编码搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:50:24.293

如果我对您的理解正确，以下帖子可能会为您指明正确的方向：[返回街道地址 google api](https://stackoverflow.com/questions/10310882/google-reverse-geocode-doesnt-always-return-a-street-address)并[通过 lat/long 获取街道地址](https://stackoverflow.com/questions/158557/get-street-address-at-lat-long-pair)。

我假设您的目标是在地图上显示这些。如果没有，请注意[Google 的 TOS](https://developers.google.com/maps/documentation/geocoding/)，这样您就不会像其他人那样（有时在不知不觉中）走上浪费的道路。具体来说：“注意：**地理编码 API 只能与谷歌地图一起使用**；禁止地理编码结果而不显示在地图上。”

这个关于[地址验证](https://stackoverflow.com/questions/134956/how-do-you-perform-address-validation)的链接也有一些很好的信息可以帮助你（它提供了一些关于谷歌的细节并提供了一些替代方案。

祝你好运

# jquery - 将图像从 Jquery .animate 图像转换为动画 GIF？

> ID：12819075
> 
> 赞同：2
> 
> 时间：2012-10-10T12:12:23.410
> 
> 标签：jquery, html, canvas, animated-gif

首先我不得不说这是一个奇怪的：

客户有图片： [http ://tinyurl.com/9r4cqcr](http://tinyurl.com/9r4cqcr)

我创建了一个 .animate 画布：[http ://tinyurl.com/9yqcrkm](http://tinyurl.com/9yqcrkm)

如何将 .animate 画布制作成普通的动画 .GIF。

我知道逻辑很奇怪而且倒退，但看起来很有趣，看看这是否可能，为每个人的拍摄欢呼。我要

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:19:23.863

这应该有助于：

[http://antimatter15.com/wp/2010/07/javascript-to-animated-gif/](http://antimatter15.com/wp/2010/07/javascript-to-animated-gif/)

它在 JS 中几乎是成熟的 GIF 编码器！由于内置`toDataURL()`仅导出单个帧（调用函数时的帧）

# java - 断开与 wifi 直连组的连接

> ID：12819076
> 
> 赞同：5
> 
> 时间：2012-10-10T12:12:26.123
> 
> 标签：java, android, android-4.2-jelly-bean, wifi-direct

我想在建立连接后断开与 wifi 直接组的连接。我只想安静地搬出去，而不会打扰其他已经与 Group owner 有联系的客户。

我使用**manager.Connect()**方法建立连接。但没有看到任何断开连接的方法。我看到的唯一其他选项是**manager.removeGroup()**，但我想这将删除整个组并中断现有的网络连接。

我怎样才能正确地做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:50:14.510

removeGroup() 函数的第一个参数是一个通道。所以我认为如果这是由客户端发起的，只有客户端和群主之间的通道会断开。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-11-19T10:40:17.160

```
 manager.cancelConnect(channel, null); 
```

# java - spring，jdbcTemplate，postgresql - 最后插入 id

> ID：12819077
> 
> 赞同：3
> 
> 时间：2012-10-10T12:12:28.693
> 
> 标签：java, spring, postgresql, jdbctemplate

我有：

```
public void addJobs(Jobs jobs) {
        this.getJdbcTemplate().update(sqlAddJobs, new Object[] {jobs.getJobName()});
    } 
```

在 Postgresql DBI 中有一个表：

```
row_id | jobs 
```

row_id 是自动递增的，我怎样才能得到最后一个插入 id？

我的 sql：

```
INSERT INTO jobs (jobs) VALUES (?) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T12:15:55.517

一种简单的选择是使查询如下：

```
"INSERT INTO jobs(jobs) VALUES(?) RETURNING row_id" 
```

并执行`int id = getJdbcTemplate().queryForInt(sql)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-24T11:42:42.627

我说下面的代码：

```
this.getJdbcTemplate().queryForObject(sql, new Object[] {jobs.getJobName()},Integer.class); 
```

在我的例子中，带有 JdbcTemplate 的 SPRING BOOT 2.2.4.RELEASE 我使用了上面的代码。

# iphone - removeFromSuperview 使应用程序崩溃后释放 UIView

> ID：12819078
> 
> 赞同：-1
> 
> 时间：2012-10-10T12:12:33.390
> 
> 标签：iphone, objective-c, ios, ipad, memory-management

我有一个`UIView`对象，我将其添加为子视图，使用`[self.view addSubview:mySubView];`. 之后我打电话 `[mySubView removeFromSuperview];`，然后我尝试做，`[mySubView release];`但应用程序在这里崩溃。

还`RemoveFromSuperview`叫吗`release`？`mySubView`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:14:23.237

是`removeFromSuperview`的，释放视图。

你检查过文档吗？大约需要 5 秒：

> **讨论**
> 如果接收者的superview不是`nil`，superview释放接收者。如果您打算重用视图，请务必`retain`在调用此方法之前使用它，并`release`在以后适当时再次使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T12:14:14.467

是的，超级视图保留其所有子视图，因此当您删除视图时，其超级视图将释放它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T12:23:55.170

请发布您的代码，否则很难回答

**崩溃代码**

```
UIView *subview = [[UIView alloc] init]; //manual allocation
[self.view addSubView:subview]; //view retained automatically
[subview release]; //released the manual allocated memory

for(UIView *subview in [scrollView subviews]) {    

    [subview removeFromSuperview]; //released the view retained automatically. Now retain count reach 0/
   [subview release]; // crash.....
} 
```

**没有崩溃的代码**

```
UIView *subview = [[UIView alloc] init]; //manual allocation
[self.view addSubView:subview]; //view retained automatically   

[subview removeFromSuperview]; //released the view retained automatically. Now retain count reach 1

[subview release]; // No crash .retain count reach 0 
```

你只是不释放你自己没有明确分配或保留的东西。

# oracle10g - 参考其他表行更新 Oracle 中的行

> ID：12819079
> 
> 赞同：0
> 
> 时间：2012-10-10T12:12:35.183
> 
> 标签：oracle10g

嗨，伙计们，我正在尝试更新一些这样的行：

```
declare
   cursor c1 is select core_cust_id, ADDRESS_LINE1, ADDRESS_LINE2, ADDRESS_LINE3,CITY_CODE,
   STATE_CODE from crmuser.address where corp_id is not null and 
ADDRESSCATEGORY='Mailing';
   begin
   for i in c1 loop
   update  crmuser.tradefinance set ADDR_1=i.ADDRESS_LINE1,
   ADDR_2=i.ADDRESS_LINE2, ADDR_3=i.ADDRESS_LINE3, CITY_CODE=i.CITY_CODE,
   STATE_CODE=i.STATE_CODE       
   where i.core_cust_id=(select core_cust_id from crmuser.tradefinance where corp_id is not null);
   end loop; 
   end; 
```

我收到错误：

```
ORA-01427: single-row subquery returns more than one row
ORA-06512: at line 7 
```

当我执行

```
select core_cust_id, ADDRESS_LINE1, ADDRESS_LINE2, ADDRESS_LINE3,CITY_CODE,
   STATE_CODE from crmuser.address where corp_id is not null and 
ADDRESSCATEGORY='Mailing'; 
```

我得到了 485 条记录，我想用它们来匹配 Core_cust_id。当我执行时：

```
select core_cust_id from crmuser.tradefinance where corp_id is not null; 
```

我再次获得 485 core_cust Id 以匹配循环中的其他 Core_cust_ids...为什么我的查询返回多个记录？我应该纠正什么？我正在使用 Oracle 10g

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:25:24.390

尝试这个

```
declare
   cursor c1 is select core_cust_id, ADDRESS_LINE1, ADDRESS_LINE2, ADDRESS_LINE3,CITY_CODE,
   STATE_CODE from crmuser.address where corp_id is not null and 
ADDRESSCATEGORY='Mailing';
   begin
   for i in c1 loop
   update  crmuser.tradefinance set ADDR_1=i.ADDRESS_LINE1,
   ADDR_2=i.ADDRESS_LINE2, ADDR_3=i.ADDRESS_LINE3, CITY_CODE=i.CITY_CODE,
   STATE_CODE=i.STATE_CODE       
   where i.core_cust_id=crmuser.tradefinance.core_cust_id 
   and crmuser.corp_id is not null;
   end loop; 
   end; 
```

# c - 使用 void* 声明时，如何强制 C 编译器使用参数 long 定义函数

> ID：12819087
> 
> 赞同：1
> 
> 时间：2012-10-10T12:12:56.900
> 
> 标签：c, function, gcc, compilation, void

在分析另一家公司提供的一些库代码时，我们遇到了奇怪的结构（可能是错误）。在头文件中，一个函数被声明为：

```
int funct(type1 var1, type2 var2, void* usr_arg); 
```

（抱歉笼统的命名。NDA）但是在源文件中同名的函数被定义为：

```
int funct(type1 var1, type2 var2, long usr_arg)
{
    // code goes here;
} 
```

最奇怪的是，在使用提供的 makefile 进行编译时，一切正常。然而，当我们尝试配置 eclipse 项目时，它拒绝编译，并指向我们上面提到的两个函数头。

在我们的例子中使用的编译器是 ubuntu 下的 gcc，但是这个库应该也可以在 windows 下工作。我们怎样才能让 gcc 接受这个怪物呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:19:47.880

这并不奇怪，Makefile 可能会将一些标志传递给 gcc 以忽略它，或者只是发出警告，而 eclipse 项目没有，或者可能是 eclipse 项目编译器标志更严格。无论如何，我建议您更改函数声明以匹配其定义（或相反，具体取决于函数实际期望的内容），错误就会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:19:50.613

如果定义，例如

```
 int funct(type1 var1, type2 var2, long usr_arg)
 {
  // etc
 } 
```

没有出现在包含标头声明的文件中

```
 int funct(type1 var1, type2 var2, void* usr_arg); 
```

GCC 编译器通常找不到任何错误。

我建议使用最近的 GCC（即 GCC 4.6 或 4.7）的[链接时间优化](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)能力，即在编译和链接时都传递`-flto`标志（带有一些优化标志）。

^(我不建议使用`-flto`with `gcc-4.5`; 你真的想要至少 GCC 4.6)

实现这一目标的一种可能方法是运行`make CC='gcc -Wall -flto -O2'`；这可能会发现该错误。

^(请注意，这`-flto`会减慢构建时间，因为在编译每个源文件以及将每个增强的目标文件链接到可执行文件或库时都会进行一些优化)

如果您的代码库足够重要，您可以考虑为此目的开发 GCC 的[MELT](http://gcc-melt.org/)扩展（MELT 是扩展 GCC 的高级域特定语言）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:31:38.460

我建议修复源（假设：它只是发生这种情况的有限数量的位置）。假设该函数确实是用指针调用的（如在声明中），您可以更改定义，如

```
int funct(int var1, int var2, void* usr_arg1) {
    long usr_arg = (long) usr_arg1;
    // code goes here;
} 
```

# android - TextView在android中旋转后返回

> ID：12819088
> 
> 赞同：0
> 
> 时间：2012-10-10T12:12:58.537
> 
> 标签：android, eclipse, animation

这是我用于旋转 TextView 的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1000"
    android:fillAfter="true"
    android:fromDegrees="0"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="180" /> 
```

当我按下“旋转”按钮时，TextView 将正常旋转，旋转后它会出现垂直翻转，因为旋转角度为 180。

问题是当我再次按下按钮将其再旋转 180 度时，它会恢复到旋转前的原始状态。

我希望它从最后一个状态旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:17:42.507

看看这个 SO 答案。我认为您需要的属性是：

```
fillAfter=true
fillEnabled=true 
```

[如何在 Android 中为视图设置动画并使其保持在新的位置/大小？](https://stackoverflow.com/questions/3345084/how-can-i-animate-a-view-in-android-and-have-it-stay-in-the-new-position-size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:32:28.633

你应该创建更多的 xml 文件。但最好的选择是在语法上这样做，我相信它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:43:52.910

感谢您的回复，现在我可以说：

```
int x = 0, y = 180; // global variables 
```

然后：

```
 RotateAnimation a = new RotateAnimation(x, y,
                Animation.RELATIVE_TO_SELF, 0.5f,
                Animation.RELATIVE_TO_SELF, 0.5f);
        a.setFillEnabled(true);
        a.setFillAfter(true);
        a.setDuration(1000);
        a.setAnimationListener(onRotation);
        txtView.startAnimation(a); 
```

然后：

```
AnimationListener onRotation = new AnimationListener() {

    public void onAnimationStart(Animation animation) {
        // TODO Auto-generated method stub

    }

    public void onAnimationRepeat(Animation animation) {
        // TODO Auto-generated method stub

    }

    public void onAnimationEnd(Animation animation) {
        x += 180;
        y += 180;

    }
}; 
```

# aem - cq5.4中的分组分割

> ID：12819089
> 
> 赞同：1
> 
> 时间：2012-10-10T12:13:04.863
> 
> 标签：aem

在 CQ5.4 中，有一种方法可以在分段属性中添加组，这样特定的预告片只能由选定的组查看。应用分段后，只能对该组内的某些人查看预告片。页面的安全性是为组完成的，但组分割将如何完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:58:55.780

如果您请求所有子页面/节点（假设您不使用管理会话），那么您只会获得您可以访问的页面。

现在你可以为预告片做同样的事情。在预告片上设置组策略。现在，如果您请求所有可用的预告节点，您只会获得适用于您的节点。

# php - JSON Google 地图地理编码不起作用

> ID：12819092
> 
> 赞同：1
> 
> 时间：2012-10-10T12:13:20.603
> 
> 标签：php, json, google-maps

从现在开始，我正在寻找修复程序两天。所以我希望有人能够帮助我：

我通过 google api 获得地址，我知道 google 的结果页面很好。但是应该保存到数据库中，这是行不通的。以下代码中似乎有错误。如果有人找到它，我会很高兴... ;)

非常感谢！

```
function reverse_geocode($latitude, $longitude) {
$url = "http://maps.googleapis.com/maps/api/geocode/json?latlng=".$latitude.",".$longitude."&sensor=false";
$result = wp_remote_get($url);
$json = json_decode($result['body']);
foreach ($json->results as $result)
{
    foreach($result->address_components as $addressPart) {
        if((in_array('locality', $addressPart->types)) && (in_array('political', $addressPart->types)))
            $city = $addressPart->long_name;
        else if((in_array('administrative_area_level_1', $addressPart->types)) && (in_array('political', $addressPart->types)))
            $state = $addressPart->long_name;
        else if((in_array('country', $addressPart->types)) && (in_array('political', $addressPart->types)))
            $country = $addressPart->long_name;
    }
}

if(($city != '') && ($state != '') && ($country != ''))
    $address = $city.', '.$state.', '.$country;
else if(($city != '') && ($state != ''))
    $address = $city.', '.$state;
else if(($state != '') && ($country != ''))
    $address = $state.', '.$country;
else if($country != '')
    $address = $country;

return $address;
} 
```

然后它（通常）被写入数据库：

```
 function geolocation_save_postdata($post_id) {
  // Check authorization, permissions, autosave, etc
  if (!wp_verify_nonce($_POST['geolocation_nonce'], plugin_basename(__FILE__)))
    return $post_id;

  if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE)
    return $post_id;

  if('page' == $_POST['post_type'] ) {
    if(!current_user_can('edit_page', $post_id))
        return $post_id;
  } else {
    if(!current_user_can('edit_post', $post_id)) 
        return $post_id;
  }

  $latitude = clean_coordinate($_POST['geolocation-latitude']);
  $longitude = clean_coordinate($_POST['geolocation-longitude']);
  $address = reverse_geocode($latitude, $longitude);
  $public = $_POST['geolocation-public'];
  $on = $_POST['geolocation-on'];

  if((clean_coordinate($latitude) != '') && (clean_coordinate($longitude)) != '') {
    update_post_meta($post_id, 'geo_latitude', $latitude);
    update_post_meta($post_id, 'geo_longitude', $longitude);

    if(esc_html($address) != '') {
            update_post_meta($post_id, 'geo_address', $address);
        } else {
            update_post_meta($post_id, 'geo_address', 'unbekannter Adresse | Koordinaten: '.$latitude.' Breite, '.$longitude.' Länge');
        }
    if($on) {
        update_post_meta($post_id, 'geo_enabled', 1);

        if($public)
            update_post_meta($post_id, 'geo_public', 1);
        else
            update_post_meta($post_id, 'geo_public', 0);
    }
    else {
        update_post_meta($post_id, 'geo_enabled', 0);
        update_post_meta($post_id, 'geo_public', 1);
    }
  }

  return $post_id;
} 
```

# c# - 将参数从主报表传递到 RDLC 中的子报表

> ID：12819095
> 
> 赞同：4
> 
> 时间：2012-10-10T12:13:24.827
> 
> 标签：c#, asp.net, rdlc

我有一个在 ReportViewer 中显示 RDLC 报告的网页。对于主报告中的每条记录，都有一个子报告。

我需要将主报表中每条记录的 3 个字段的数据作为参数传递给子报表存储过程。

主要报告有效，但它只是说

> 错误：无法显示子报表

我在两个报告中都定义了所有参数，并且我正在处理 localReport_SubreportProcessing 事件

C# 代码

```
 protected void Page_Load(object sender, EventArgs e)
{       
    this.ReportViewer1.LocalReport.DataSources.Add(new ReportDataSource("Refs_MainDs", SqlDs_RefsReportsMain));
    this.ReportViewer1.LocalReport.SubreportProcessing += new SubreportProcessingEventHandler(localReport_SubreportProcessing);
}
void localReport_SubreportProcessing(object sender, SubreportProcessingEventArgs e)
{
    e.DataSources.Add(new ReportDataSource("Refs_SubDs", SqlDs_RefsReportsSub));
} 
```

ASP 代码

```
<rsweb:ReportViewer ID="ReportViewer1" runat="server" Height="800px" Width="100%" Font-Names="Verdana" Font-Size="8pt" BorderColor="#666666" 
    BorderStyle="Solid" BorderWidth="1px" AsyncRendering="False" ShowPrintButton="False" >
<LocalReport ReportPath="Reports\EOD_Refs_MainReport.rdlc" >
    <DataSources>
        <rsweb:ReportDataSource DataSourceId="SqlDs_RefsReportsMain" Name="Refs_DataSource" />
        <rsweb:ReportDataSource DataSourceId="SqlDs_RefsReportsSub" Name="Refs_DataSource" />
    </DataSources>
</LocalReport> 
```

和

```
<asp:SqlDataSource ID="SqlDs_RefsReportsMain" runat="server" ConnectionString="<%$ ConnectionStrings:AlphaConnectionString %>" 
    SelectCommand="rpt_RefsReport_Main" SelectCommandType="StoredProcedure">
<SelectParameters>
    <asp:QueryStringParameter Name="RefsID" QueryStringField="RefsID" Type="String" />
</SelectParameters> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:33:01.490

或许对你有帮助：[基于主报表的子报表查询](http://forums.asp.net/p/1432888/3224866.aspx#3224866)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:47:00.430

我需要更改每个报告的数据集，它们仍然使用相同的数据源，然后在代码中您需要为每个数据集设置参数

```
<rsweb:ReportViewer ID="ReportViewer1" runat="server" AsyncRendering="False" ShowPrintButton="False" >
<LocalReport ReportPath="Reports\Report_MainReport.rdlc" >
    <DataSources>
        <rsweb:ReportDataSource DataSourceId="SqlDs_ReportsMain" Name="EOD_Summary_DataSource" />
        <rsweb:ReportDataSource DataSourceId="SqlDs_ReportsMid" Name="EOD_Summary_DataSource" />
        <rsweb:ReportDataSource DataSourceId="SqlDs_ReportsSusp" Name="EOD_Summary_DataSource" />
        <rsweb:ReportDataSource DataSourceId="SqlDs_ReportsRef" Name="EOD_Summary_DataSource" />
    </DataSources>
</LocalReport> 
```

```
<asp:SqlDataSource ID="SqlDs_ReportsMain" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="rpt_HighLevel" SelectCommandType="StoredProcedure">
<SelectParameters>
    <asp:QueryStringParameter Name="Key" QueryStringField="Key" Type="String" />
</SelectParameters> 
```

对于每个报表数据源，依此类推

在 C# 中

```
protected void Page_Load(object sender, EventArgs e)
{       
    this.ReportViewer1.LocalReport.DataSources.Add(new ReportDataSource("MainLevelDs", SqlDs_ReportsMain));
    this.ReportViewer1.LocalReport.SubreportProcessing += new SubreportProcessingEventHandler(localReport_SubreportProcessing);
}
void localReport_SubreportProcessing(object sender, SubreportProcessingEventArgs e)
{
    e.DataSources.Add(new ReportDataSource("MidLevelDs", SqlDs_ReportsMid));
} 
```

不知道这是否是正确的方法，但它对我有用！

高温高压

# php - 错误 1148 MySQL 此 MySQL 版本不允许使用的命令

> ID：12819098
> 
> 赞同：11
> 
> 时间：2012-10-10T12:13:35.373
> 
> 标签：php, mysql, load-data-infile

我正在使用 MySQL`LOAD DATA LOCAL INFILE`命令，但出现此错误：

```
PDOException: SQLSTATE[42000]: Syntax error or access violation: 1148 The used 
command is not allowed with this MySQL version: LOAD DATA LOCAL INFILE 
'/tmp/phpI0ox54' INTO TABLE `dev_tmp` FIELDS TERMINATED BY ',' ENCLOSED 
BY '"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES; Array ( ) in 
dc_real_estate_form_submit() (line 147 of /PATH/TO/PHP/SCRIPT). 
```

我们可以更改什么设置以允许 LOAD DATA LOCAL infile？

这是我们正在使用的 Drupal 7 代码：

```
$sql = "LOAD DATA LOCAL INFILE '".$file."'
    INTO TABLE `dev_tmp`
    FIELDS
        TERMINATED BY ','
        ENCLOSED BY '\"'
    LINES
    TERMINATED BY '\\r\\n'
    IGNORE 1 LINES";

db_query($sql); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-10T22:01:19.307

在 MySQL 中加载本地文件存在安全隐患，并且默认情况下处于关闭状态，如果可以的话，您希望将其关闭。如果不允许，您会收到此错误：

```
ERROR 1148 (42000): The used command is not allowed with this MySQL version 
```

**解决方案：**

1.  `--local-infile=1`在 mysql 命令行上使用参数：

    当您在终端上启动 MySQL 时，请包含`--local-infile=1`参数，如下所示：

    ```
    mysql --local-infile=1 -uroot -p

    mysql>LOAD DATA LOCAL INFILE '/tmp/foo.txt' INTO TABLE foo 
    COLUMNS TERMINATED BY '\t'; 
    ```

    然后允许该命令：

    ```
    Query OK, 3 rows affected (0.00 sec)
    Records: 3  Deleted: 0  Skipped: 0  Warnings: 0 
    ```

2.  或者将参数发送到 mysql 守护进程：

    ```
    mysqld --local-infile=1 
    ```

3.  或者在my.cnf文件中设置（这是有安全风险的）：

    找到你的 mysql`my.cnf`文件并以 root 身份编辑它。

    `local-infile`在 mysqld 和 mysql 指示符下添加以下行：

    ```
    [mysqld]
    local-infile 

    [mysql]
    local-infile 
    ```

    保存文件，重启mysql。再试一遍。

更多信息可以在这里找到：http: [//dev.mysql.com/doc/refman/5.1/en/load-data-local.html](http://dev.mysql.com/doc/refman/5.1/en/load-data-local.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-02T22:22:42.183

除了`local-infile`与 MySQL 服务器一起使用（您也可以将其放在 /etc/my.cnf 文件中），您还需要启用 PDO 以允许它：

```
<?php
$pdo = new PDO($dsn, $user, $password, 
    array(PDO::MYSQL_ATTR_LOCAL_INFILE => true)
); 
```

`local-infile`否则，无论MySQL 服务器上的值如何，它都不会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T09:11:45.020

MySQL 手册中解释了我们使用 LOCAL 关键字的主要原因：

> 另一方面，您不需要 FILE 权限来加载本地文件。

因此，如果您实际上确实对服务器具有文件访问权限，那么请尝试在 SQL 查询中跳过使用单词“LOCAL”，而是将文件复制到服务器和目录 mysql/data/[tablename]。

更多关于这里本地/非本地的信息：[PHPMyAdmin Bug](http://sourceforge.net/p/phpmyadmin/bugs/348/)

您不必再担心更改 /etc/mysql/my.cnf

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-02T08:37:15.100

旧版 mysql_connect 也有一个参数“ `client_flag`”，可用于设置 mysql 参数。

> client_flags 参数可以是以下常量的组合：128（启用 LOAD DATA LOCAL 处理）、MYSQL_CLIENT_SSL、MYSQL_CLIENT_COMPRESS、MYSQL_CLIENT_IGNORE_SPACE 或 MYSQL_CLIENT_INTERACTIVE。阅读有关 MySQL 客户端常量的部分以获取更多信息。在 SQL 安全模式下，此参数被忽略。 [http://php.net/function.mysql-connect](http://php.net/function.mysql-connect)

例子：

```
$db = mysql_connect($host, $user, $pass, FALSE, 128); 
```

但是，您也可能会遇到以下错误：

```
ERROR 29 (HY000): File '/var/www/.../mysql_import.csv' not found (Errcode: 13) 
```

在这种情况下，您可能需要检查 App Armor 设置以允许 MySQL 访问文件系统上的导入文件。

特别是我补充说：

```
 /import/ r,
  /import/* rw, 
```

授予 MySQL 对 /import 的读/写访问权限

**例如：示例 App Armor 配置文件**

```
cat /etc/apparmor.d/usr.sbin.mysqld 

# vim:syntax=apparmor
# Last Modified: Tue Jun 19 17:37:30 2007
#include <tunables/global>

/usr/sbin/mysqld {
  #include <abstractions/base>
  #include <abstractions/nameservice>
  #include <abstractions/user-tmp>
  #include <abstractions/mysql>
  #include <abstractions/winbind>

  capability dac_override,
  capability sys_resource,
  capability setgid,
  capability setuid,

  network tcp,

  /etc/hosts.allow r,
  /etc/hosts.deny r,

  /etc/mysql/*.pem r,
  /etc/mysql/conf.d/ r,
  /etc/mysql/conf.d/* r,
  /etc/mysql/*.cnf r,
  /usr/lib/mysql/plugin/ r,
  /usr/lib/mysql/plugin/*.so* mr,
  /usr/sbin/mysqld mr,
  /usr/share/mysql/** r,
  /var/log/mysql.log rw,
  /var/log/mysql.err rw,
  /var/lib/mysql/ r,
  /var/lib/mysql/** rwk,
  /var/log/mysql/ r,
  /var/log/mysql/* rw,
  /var/run/mysqld/mysqld.pid w,
  /var/run/mysqld/mysqld.sock w,
  /run/mysqld/mysqld.pid w,
  /run/mysqld/mysqld.sock w,

  # Custom import folders start
  # These folders will also be read/writeable by mysql.
  /import/ r,
  /import/* rw,
  # Custom import folders end

  /sys/devices/system/cpu/ r,

  # Site-specific additions and overrides. See local/README for details.
  #include <local/usr.sbin.mysqld>
} 
```

之后，MySQL 可以从`/import`目录中读取文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-05T05:54:30.240

只需按照以下过程即可解决问题：

1.  使用命令行登录 mysql。

    mysql -u 根目录 -p

2.  检查本地infile状态：

    显示像'local_infile'这样的变量；

3.  如果输出关闭，请运行以下命令：

    设置全局 local_infile = 1;

4.  再次检查状态：

    显示像'local_infile'这样的变量；

5.  输出将是： [立即查看](https://i.stack.imgur.com/s2Gks.png)

6.  最后重启mysql：

    服务mysql重启

# unicode - 在 Python 3 运行时更改标准输入/标准输出的编码

> ID：12819099
> 
> 赞同：5
> 
> 时间：2012-10-10T12:13:38.413
> 
> 标签：unicode, character-encoding, python-3.x

在 Python 3 中，`stdin`是`stdout`具有编码的 TextIOWrapper，因此会输出普通字符串（不是字节）。

我可以更改与环境变量[PYTHONIOENCODING](http://docs.python.org/py3k/using/cmdline.html#envvar-PYTHONIOENCODING)一起使用的编码。还有一种方法可以在我的脚本本身中更改它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:29:33.320

实际上`TextIOWrapper` *确实*返回字节。它接受一个 Unicode 字符串并以特定编码返回一个字节字符串。要更改`sys.stdout`为在脚本中使用特定编码，下面是一个示例：

```
Python 3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> print('\u5000')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\dev\python32\lib\encodings\cp437.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_map)[0]
UnicodeEncodeError: 'charmap' codec can't encode character '\u5000' in position 0: character maps to <undefined>>>> import io
>>> import io
>>> import sys
>>> sys.stdout = io.TextIOWrapper(sys.stdout.buffer,encoding='utf8')
>>> print('\u5000')
σÇÇ 
```

（我的终端不是 UTF-8）

`sys.stdout.buffer`访问原始字节流。`stdout`您还可以使用以下内容以特定编码写入：

```
sys.stdout.buffer.write('\u5000'.encode('utf8')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-17T23:21:22.490

由于 Python 3.7`TextIOWrapper`有一个[`reconfigure()`](https://docs.python.org/3/library/io.html#io.TextIOWrapper.reconfigure)可以更改流设置的方法，包括编码：

```
sys.stdout.reconfigure(encoding='utf-8') 
```

`sys.stdin`一个警告：如果您还没有开始阅读，您只能更改编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:21:54.470

我很确定这是不可能的。它在文档中明确指出“**如果在运行解释器之前设置**，它将覆盖用于 stdin/stdout/stderr 的编码”

我在尝试更改时也遇到了错误`sys.__stdin__.encoding`：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: readonly attribute 
```

编辑：在 python 2.x 中，可以从脚本中更改 stdin/out/err 的编码。在 python 3.x 中，您似乎必须使用`locale`（或在运行脚本之前从命令行设置环境变量）。

编辑：这对你来说可能很有趣[http://comments.gmane.org/gmane.comp.python.ideas/15313](http://comments.gmane.org/gmane.comp.python.ideas/15313)

# iphone - Youtube 视频无法在 iOS6 应用程序上播放，但在从 App Store 下载时可以播放

> ID：12819104
> 
> 赞同：1
> 
> 时间：2012-10-10T12:13:59.457
> 
> 标签：iphone, objective-c, ios, youtube, ios6

我有一个 Youtube 视频，它在 iOS 5 中运行良好，但现在在 iOS 6 中无法加载。奇怪的是，如果我从 App Store 下载应用程序到 iOS6 设备上，视频可以正常播放。问题是，如果我从 XCode 在设备上构建它，那么视频将无法加载。相同的代码，没有任何改变。区别仅在于我从 XCode 构建。

知道我可以做些什么来解决这个问题吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:32:19.510

来自[iOS6 发行说明](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

> [从 iOS 6 开始， http://www.youtube.com/watch?v=](http://www.youtube.com/watch?v=oHg5SJYRHA0) oHg5SJYRHA0 形式的嵌入式 YouTube URL 将不再有效。这些 URL 用于查看 YouTube 网站上的视频，而不是用于嵌入网页。相反，应该使用的格式在 [https://developers.google.com/youtube/player_parameters](https://developers.google.com/youtube/player_parameters)中描述。

我不得不更新我的一些项目，以便当它们在 iOS5 下运行时使用旧 URL，但在 iOS6 中它们使用新 URL，基本上是[http://www.youtube.com/v/oHg5SJYRHA0](http://www.youtube.com/v/oHg5SJYRHA0)（使用示例多于）。

对于我在商店中出售的应用程序，我看到了与您相同的行为，它们以某种方式继续工作。

编辑：这是我在我的一个应用程序中使用的两个字符串。
iOS 5

```
<iframe width=\"%f\" height=\"%f\"src=\"http://www.youtube.com/embed/%@?showinfo=0&fs=1\" frameborder=\"0\" allowfullscreen\
        ></iframe> 
```

和iOS6

```
<embed id=\"yt\" src=\"http://www.youtube.com/v/%@\" allowfullscreen type=\"application/x-shockwave-flash\" \
        width=\"%0.0f\" height=\"%0.0f\"></embed> 
```

我已经尝试在两者中使用相同的`iframe`和`shockwave`代码，只是更改了网址，但它似乎是两者的组合，适用于我的测试。

# php - 如何使用 RecursiveIteratorIterator 生成多级 HTML 菜单？

> ID：12819105
> 
> 赞同：2
> 
> 时间：2012-10-10T12:13:59.480
> 
> 标签：php, html, recursion, iterator, spl

我很难让我的头脑`RecrusiveIteratorIterator`和亲戚遍历多维页面数组以在 PHP 中构建多级菜单。

通常我只是创建一个循环遍历关卡的函数，并调用自身循环遍历任何子级。但我想利用 PHP 中的迭代器接口来改进我的代码。

我的数组如下所示：

```
$pages = array(
    new Page(1, 'Home'),
    new Page(2, 'Pages', array(
        new Page(3, 'About'),
        new Page(4, 'Contact')
    )),
    new Page(5, 'Categories', array(
        new Page(6, 'Clothing'),
        new Page(7, 'DVDs')
    ))
); 
```

我的`Page`构造函数中的参数只是页面 ID 和页面名称。

如何使用 PHP 的迭代器来构建一个像这样的菜单？

```
<ul>
  <li>Home</li>
  <li>Pages
    <ul>
      <li>About</li>
      <li>Contact</li>
    </ul>
  </li>
  <li>Categories
    <ul>
      <li>Clothing</li>
      <li>DVDs</li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:24:35.847

这通常是一个三步程序：

1.  你实现了一个[`RecursiveIterator`](http://php.net/RecursiveIterator)为你的树结构提供递归迭代的混凝土。看起来这[`RecursiveArrayIterator`](http://php.net/RecursiveArrayIterator)很适合您的需求。
2.  [`RecursiveIteratorIterator`](http://php.net/RecursiveIteratorIterator)您使用能够将recusion 转换为输出的 a 对其进行迭代（与 比较[`RecursiveTreeIterator`](http://php.net/manual/en/class.recursivetreeiterator.php)）。
3.  您可以通过遍历`foreach`更具体的`RecursiveIteratorIterator`.

代码示例：

```
 // consume implementation of step 1
   $it = new PagesRecursiveIterator($pages);

   // consume implementation of step 2
   $list = new RecursiveUlLiIterator($it);

   // perform iteration given in step 3
   foreach($list as $page) {
       echo $page->getName();
   } 
```

# html - 尝试对齐 div 中的图像

> ID：12819122
> 
> 赞同：1
> 
> 时间：2012-10-10T12:15:03.173
> 
> 标签：html, css, image, alignment

好的，所以现在我的盒子都整理好了，我想尝试将图像和图片旁边的一些文本对齐。我希望文本位于顶部，电子邮件徽标位于底部，如下图所示

![元素对齐](../Images/3f9d1b19b8f74d488578b83cf5db116a.png)

```
#nav1 {
    width: 1000px;
    height: 100px;
    background-color: #F90;
}

#pic {
    width: 200px;
    height: 67px;
    margin-top: 15px;
    float: right;
    margin-right: 15px;
}

<div id="container">
    <div id="nav1">
        <div id="pic">
            <img src="email.png" />
            <img src="photo.jpg" align="right" />
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:42:05.510

我创建了一个带有虚拟图像的[JSFiddle](http://jsfiddle.net/GxHYy/2)，它以图像显示的方式显示信息。或接近您想要/需要的。

## HTML

```
<div class="user">
    <img class="avatar" src="http://lorempixel.com/64/64/people"/>    
    <div class="name">Mahatma Gandhi</div>
    <div class="people">6</div>
    <div class="emails">1</div>
</div>​ 
```

## CSS

```
.user
{
    background-color: #ebebee;
    display: inline-block;
    padding: 5px;
    text-align: right;
}
.avatar {
    float: right;
    margin-left: 6px;
}
.name
{
    height: 48px;
    font-size: 1.25em;
    text-align: right;
    white-space: nowrap;
    margin-right: 70px;
}
.people, .emails
{
    height: 16px;
    display: inline-block;
    margin-right: 10px;
    padding-left: 20px;
    background-position: left top;
    background-repeat: no-repeat;
}
.people { background-image: url(http://lorempixel.com/16/16/1); }
.emails { background-image: url(http://lorempixel.com/16/16/2); }
​
​ 
```

# asp.net-mvc - 将 ASP.Net MVC 4 与内容管理系统一起使用

> ID：12819131
> 
> 赞同：0
> 
> 时间：2012-10-10T12:15:37.697
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个在 ColdFusion 上运行的 CMS，为此我通常有一个前端也在 ColdFusion 上运行。出于学习的原因，我现在想用 ASP.Net MVC 4 Framework 来实现前端。对于 MVC 应用程序，您通常有一个简单的控制器/动作路由，这对我的 CMS 没有任何意义，因为它的结构完全不同。

我的 CMS 有一个导航模块作为基础，它处理网站的整个结构和路由。在每个导航条目上，我可以分配一个页面，该页面可以包含多个元素（例如简单的 HTML 代码、新闻模块或图库模块）。

**站点结构示例：**

*   主页**->**页面**->**元素 (html)
*   关于**->**页面**->**元素（html，...）
    *   我们的公司**->**页面**->**元素（html、新闻、图库）
    *   我们的产品**->**页面**->**元素（html，...）
*   联系**->**页面**->**元素（html、联系表格）

因此，如果用户在浏览器中打开“www.example.com/about/our-company.html”，则应用程序会找到负责的导航条目“our-company”，它是条目“about”的子项。现在它应该呈现分配给该导航条目页面的元素“html”、“news”和“gallery”。

现在我的问题是，您将如何使用 ASP.Net MVC 框架实现这一点？甚至可能吗？MVC 在这里有意义吗？

我想为每个页面元素创建一个模型、控制器和视图。我是否需要类似基本控制器的东西，它可以在不同的（元素）控制器中呈现多个动作？

**更新**

站点结构不是静态的，而是动态的，由 CMS 管理。

另一个例子：www.example.com/de/about/more/andmore/something.html

在此示例中，我将在导航表中搜索键“某物”并获取相关页面。现在我想为这个页面渲染所有元素（我只是称它们为元素）。每个元素都应该有它自己的控制器和多个动作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:23:16.410

## Asp.net MVC 默认路由似乎没问题

默认路由定义也适用于您的情况。至少我没有看到任何特别的问题：

```
{controller}/{action}/{id} 
```

你有控制器的地方：

*   家庭控制器
*   AboutController - 以您为例，此控制器将具有`OurCompany`操作 (/about/ourcompany)
*   联系人控制器
*   等等

## 还是不完全清楚

但我想您应该提供您希望在您的应用程序中使用的 URL，我们可能会提供帮助。我不确定您的导航中的*元素意味着什么？*这如何转化为 URL？

# macos - 在 Nsdate 中不考虑系统日期，将日期添加 30 天

> ID：12819133
> 
> 赞同：0
> 
> 时间：2012-10-10T12:15:45.983
> 
> 标签：macos, ios5, xcode4.2, nsdate

我想将 30 天添加到文件夹创建日期并在 30 天后阻止该应用程序。如果他们更改系统日期，我的应用程序也应该在计数后关闭。

```
NSDateComponents *components;
NSString *path = @"/Users/Syed/Library/Swasstik/KITSMAW0051_SWASSTIK_DB.sqlite";
BOOL isFile = [[NSFileManager defaultManager] fileExistsAtPath:path isDirectory:NO];
if (isFile) {
NSLog(@"File exists");
NSDictionary* fileAttribs = [[NSFileManager defaultManager] attributesOfItemAtPath:path error:nil];
NSDate *result = [fileAttribs fileCreationDate]; //or fileModificationDate
NSLog(@"%@",result);
  NSDate* date = [NSDate date];
NSLog(@"%@", [date description]);

NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
components = [gregorianCalendar components:NSDayCalendarUnit
                                                    fromDate:result
                                                      toDate:date
                                                     options:0];

[gregorianCalendar release];
NSLog(@"%ld", [components day]); 
```

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:08:52.337

您可以尝试在系统上查找最近修改的文件（例如，用户的 Preferences 文件夹中的一个，因为这些文件被频繁修改）并与该修改日期进行比较。即使用户返回他的系统时间，之前修改过的文件也会保留其较新的修改日期。

如果用户将他的系统时间永久保留在过去（如 1990 年），那当然不会起作用，但它会阻止尝试只返回时间来使用您的应用程序。我认为有人会永久保持他的系统时间错误的可能性很小，因为这真的很不方便。

# c++ - 调用 vsnprintf 时的核心转储

> ID：12819136
> 
> 赞同：1
> 
> 时间：2012-10-10T12:15:50.100
> 
> 标签：c++, printf

我在 ubuntu 12.04 上，使用 uname -a: Linux lu057801 3.2.0-31-generic #50-Ubuntu SMP Fri Sep 7 16:16:45 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

g++ --version: Linux lu057801 3.2.0-31-generic #50-Ubuntu SMP Fri Sep 7 16:16:45 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

我在调用 vsnprintf 时得到一个核心转储。以下是产生问题的完整代码：

```
// compile: g++ -g -o test vsnprintf_test.c

#include <stdarg.h>
#include <stdio.h>
#include <string>

void vout(char *string, char *fmt, ...);
char fmt1 [] = "%s  %s  %s\n";

size_t snprintf_1(char* buffer, const size_t bufSize, const char* format, ...);
size_t vsnprintf_1(char* buffer, const size_t bufSize, const char* format, va_list args);

int main(void)
{
  char * format = "%s";
  char buffer[] = "/var/tmp\0"; //char * buffer = "/var/tmp\0";
  int bufSize=sizeof(buffer); //int bufSize=11;
  snprintf_1(buffer, bufSize, format);
}

size_t snprintf_1(char* buffer, const size_t bufSize, const char* format, ...)
{
    va_list args;
    va_start(args, format);
    size_t rc = vsnprintf_1(buffer, bufSize, format, args);
    va_end(args);
    return rc;
}

size_t vsnprintf_1(char* buffer, const size_t bufSize, const char* format, va_list args)
{
    int rc = 0;
    rc = vsnprintf(buffer, bufSize, format, args);
} 
```

编译为： g++ -g -o test vsnprintf_test.c 并运行会给我以下回溯：

```
(gdb) run
Starting program: /home/mafunk/software/MattsSnippets/test 

Program received signal SIGSEGV, Segmentation fault.
_IO_vsnprintf (string=0x400738 "/var/tmp", maxlen=<optimized out>, format=0x400730 "%s", args=0x7fffffffe0b0) at vsnprintf.c:118
118     vsnprintf.c: No such file or directory.
(gdb) bt
#0  _IO_vsnprintf (string=0x40072f "/var/tmp", maxlen=<optimized out>, format=0x40072c "%s", args=0x7fffffffe0b0) at vsnprintf.c:118
#1  0x0000000000400639 in vsnprintf_1 (buffer=0x40072f "/var/tmp", bufSize=11, format=0x40072c "%s", args=0x7fffffffe0b0)
at vsnprintf_test.c:36
#2  0x00000000004005f2 in snprintf_1 (buffer=0x40072f "/var/tmp", bufSize=11, format=0x40072c "%s") at vsnprintf_test.c:27
#3  0x0000000000400541 in main () at vsnprintf_test.c:19 
```

我想我不确定为什么会这样。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:27:38.930

您正在修改字符串文字，这是未定义的行为。改变这个，它可能会起作用（尽管你的缓冲区对我来说仍然太小）。

```
char buffer[] = "/var/tmp\0"; 
```

在此代码`buffer`中是一个数组，而不是指向字符串文字的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T12:34:49.133

段错误是由于您尝试写入的目标是*字符串文字*引起的。

此外，调用`snprintf_1(buffer, bufSize, format);`传递了一个`"%s"`格式字符串，但没有其他参数。格式字符串需要一个附加`char *`参数，代码将在调用堆栈上为您未提供的字符串指针读取随机内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:19:28.197

你的缓冲区太小

```
char * buffer = "/"/var/tmp/.SHM_SAP_IPMM_0008_no-sid\0";  **//37 char** 

int bufSize=**35**; 
```

# c# - 如何使用 ContentTemplateSelector 动态更改 ListViewItem（加载后）

> ID：12819143
> 
> 赞同：1
> 
> 时间：2012-10-10T12:16:15.667
> 
> 标签：c#, xaml, windows-8, microsoft-metro, visual-studio-2012

我有一个 ListView，当控件首次加载内容时，使用 ItemTemplateSelector 正确格式化 ListViewItem 。数据使用 INotifyPropertyChanged 正确编码。

我的问题是：在 ListView 已经加载数据后，如何使单个 ListViewItem 更新它的 DataTemplate？我不确定是否需要使用 setter、任务或简单绑定。有人已经这样做了吗？

我的列表视图代码：

```
 <ListView x:Name="lv_src_gStream" 
                  ItemsSource="{Binding Source={StaticResource CVS_src_gStream}}" 
                  PointerPressed="selectPost" 
                  SelectionMode="None" 
                  HorizontalContentAlignment="Stretch" 
                  ItemTemplateSelector="{StaticResource postTemplateSelector}">
        </ListView> 
```

这在数据首次加载时效果很好，但是当变量发生变化时，如何让 ItemTemplateSelector 选择不同的模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:00:34.007

我认为您不能在加载后动态更改单个 ListViewItem 模板。但是您可以使用 ItemContainerStyle 在特定事件上自定义模板，例如 Unfocused、Selected、Pressed... 这是一个示例[如何在 Metro/WinRT 应用程序的 ListView 项目单击时设置不同的背景颜色？](https://stackoverflow.com/questions/10291873/how-do-i-set-a-different-background-colour-on-item-click-of-listview-for-metro-w)

# perl - 高级 perl 语法 - Mojo::DOM

> ID：12819150
> 
> 赞同：3
> 
> 时间：2012-10-10T12:16:43.937
> 
> 标签：perl, dom, syntax, html-parsing, mojolicious

我正在尝试按照[本教程](http://blogs.perl.org/users/joel_berger/2012/05/using-mojodom.html)了解使用 DOM 进行 html 解析的一些高级（对我而言）perl 语法：

```
say "div days:";
say $_->text for $dom->find('div.days')->each;

say "\nspan hours:";
say $_->text for $dom->find('span.hours')->each; 
```

这个语法是什么意思？这是一个什么样的循环？经典建筑看起来像这样：`for(i=0;i<10;i++){ code }`不是：`{code} for (some_condition)`

在这种情况下，“每个”关键字的含义是什么？[`each`它是否与Perl 内置函数](http://perldoc.perl.org/functions/each.html)有共同之处，或者它是特定于 Mojo::DOM 的？我认为如果`each`在 Mojo::Dom 下，应该在 Mojo::DOM 主页上提及。但我没有在他们网站`each`的[方法部分](http://search.cpan.org/~sri/Mojolicious-3.44/lib/Mojo/DOM.pm)找到任何提及，所以它必须是 Perl 的内置函数。但是，这个内置`each`函数的语法完全不同——这怎么可能？

教程页面的另一个示例

```
say "Open Times:";
say for $dom->find('div.openTime')
            ->map(sub{$_->children->each})
            ->map(sub{$_->text})
            ->each; 
```

[`map`](http://perldoc.perl.org/functions/map.html)和[`sub`](http://perldoc.perl.org/functions/sub.html)方法相同的问题。

*   这些“Perlish”代码可以以更“C 风格”的方式重写，以便我理解吗？
*   最重要的是：如何列出 Mojo::DOM 中包含的所有方法的参数和返回值？它必须以某种方式完成，因为我读到即使对于 Perl 也有带有智能感知（自动完成）的 IDE，所以这个 IDE 必须知道方法返回值类型等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T12:54:49.283

```
say "Open Times:";
say for $dom->find('div.openTime')
            ->map(sub{$_->children->each})
            ->map(sub{$_->text})
            ->each; 
```

所有这些关键字（`find`, `map`, `each`）实际上**都不是关键字**，而是来自 Mojo::DOM 的方法。您可以通过操作员识别它们`->`。

在这种情况下，几种[方法被链接在一起](http://en.wikipedia.org/wiki/Method_chaining)。只有当它们中的每一个都再次返回其对象（在本例中为`$dom`）时，这才有可能。这种链接经常用在 JavaScript 中，尤其是在像[jQuery](http://jquery.com/)这样的现代框架中。它使代码易于阅读并节省操作。

基本上，您在一个链中应用多个事务。

1.  [`find`](http://search.cpan.org/~sri/Mojolicious-3.44/lib/Mojo/DOM.pm#find)所有元素 'div.openTime'
2.  [`map`](http://search.cpan.org/~sri/Mojolicious-3.44/lib/Mojo/Collection.pm#map)（用给定的子（这是一个实际的 Perl）对它们中的每一个做一些事情`sub`）：
    1.  获取所有[`children`](http://search.cpan.org/~sri/Mojolicious-3.44/lib/Mojo/DOM.pm#children)当前元素作为一个集合
    2.  和[`each`](http://search.cpan.org/~sri/Mojolicious-3.44/lib/Mojo/Collection.pm#each)它们的列表（如，返回一个数组）
3.  `map`他们有一个给定的子：
    1.  从元素中提取[`text`](http://search.cpan.org/~sri/Mojolicious-3.44/lib/Mojo/DOM.pm#text)内容
4.  `each`和他们的名单

所有这些都包含在一个后缀中`foreach`（正如@Quentin 所说）。[`say`](http://perldoc.perl.org/functions/say.html)是您可以加载的功能`use features qw(say)`。它结合了`print`一个换行符。

也许现在更清楚这里发生了什么：

```
my $collection1 = $dom->find('div.oopenTime');

my $collection2 = $collection1->map(
  sub {
    my $collection = $_->children;
    return $collection->each;
  }
);

my collection3 = $collection2->map(
  sub {
    return $_->text;
  }
);

foreach my $text ($collection3) {
  say $text;
} 
```

* * *

提供自动完成功能的 IDE 通常会扫描相关代码以了解对象具有的方法。看看[如何在 Perl 中列出给定对象或包的可用方法？](https://stackoverflow.com/questions/910430/how-do-i-list-available-methods-on-a-given-object-or-package-in-perl)或阅读模块的代码。更好**的是：阅读文档**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T12:21:05.507

> 这个语法是什么意思，这里发生了什么？

它是[循环的后缀](https://stackoverflow.com/questions/6281398/where-is-perls-postfix-for-syntax-documented)。

```
for (@foo) {
    say $_
} 
```

可以写成

```
say $_ for @foo; 
```

> 在这种情况下，“每个”关键字的含义是什么

它是[对象上的一个方法](http://search.cpan.org/~sri/Mojolicious-3.44/lib/Mojo/Collection.pm#each)。它返回 Mojo::Collection 中的事物列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T15:27:39.830

似乎其他答案已经解释了我在教程帖子中写的内容。也就是说，我想补充一点，我已经掌握了 Mojo::DOM（实际上是 Mojo::Collection 类）中另一个有用的方法，称为[`pluck`](http://mojolicio.us/perldoc/Mojo/Collection#pluck). 这种方法降低了视觉复杂度

```
->map(sub{$_->text}) 
```

至

```
->pluck('text') 
```

~~此外，我注意到至少我的一些`each`调用是无关的，并且在列表上下文中使用的 Mojo::Collection 将自动“按我的意思做” `each`。~~ 编辑：我检查了这个，实际上当用作字符串时，元素用换行符连接。因为这不是我想要的，所以我已经回了`each`电话。

这里所说的就是我现在如何编写相同的教程脚本：

```
#!/usr/bin/env perl

use strict;
use warnings;

use 5.10.0;
use Mojo::DOM;

my $dom = Mojo::DOM->new(<<'HTML');
<div class="box notranslate" id="venueHours">
<h5 class="translate">Hours</h5>
<div class="status closed">Currently closed</div>
<div class="hours">
  <div class="timespan">
    <div class="openTime">
      <div class="days">Mon,Tue,Wed,Thu,Sat</div>
      <span class="hours"> 10:00 AM–6:00 PM</span>
    </div>
  </div>
  <div class="timespan">
    <div class="openTime">
      <div class="days">Fri</div>
      <span class="hours"> 10:00 AM–9:00 PM</span></div>
    </div>
    <div class="timespan">
      <div class="openTime">
        <div class="days">Sun</div>
        <span class="hours"> 10:00 AM–5:00 PM</span>
      </div>
    </div>
  </div>
</div>
HTML

say "div days:";
say for $dom->find('div.days')->pluck('text')->each;

say "\nspan hours:";
say for $dom->find('span.hours')->pluck('text')->each;

say "\nOpen Times:";
say for $dom->find('div.openTime')
            ->map(sub{$_->children->each})
            ->pluck('text')
            ->each; 
```

请注意，我不使用该方法是`->pluck('children')`因为该`children`方法返回 Mojo::Collection 对象，这意味着返回 from`pluck`将是集合的集合。为了展平结构，我需要调用调用`each`结果，`children`因此我无法删除该特定`->map`调用。

但是，现在我想知道我是否不能一起避免这个麻烦？[Mojo::DOM 对CSS3 选择器](http://mojolicio.us/perldoc/Mojo/DOM/CSS)（[w3schools 参考](http://www.w3schools.com/cssref/css_selectors.asp)）有很好的支持，我可能会尝试的一件事是不`div.openTime`直接选择父级（），而是在选择器中选择它的子级。

```
say "\nOpen Times:";
say for $dom->find('div.openTime > *')->pluck('text')->each; 
```

所以这里有一个很好的教训：允许选择器给你几乎你想要的集合，这样你就不必在以后转换它。

* * *

要回答您的最后问题：

翻译这个

```
say for $dom->find('div.openTime')
            ->map(sub{$_->children->each})
            ->map(sub{$_->text})
            ->each; 
```

对于更多 C-esque Perl（虽然我不会把它发挥到`for(i=0;i<10;i++){ ... }`极致）它可能看起来像

```
my @open_times = $dom->find('div.openTime')->each;

my @all_children;
foreach my $elem ( @open_times ) {
  my @children = $elem->children->each;
  push @all_children, @children;
}

my @texts;
foreach my $child ( @all_children ) {
  push @texts, $child->text;
}

foreach my $text ( @texts ) {
  print $text . "\n";
} 
```

我相信您会明白为什么我更喜欢 Mojo（对象链接）方式。

至于你的第二个问题：Mojolicious 有很棒的（如果有时过于冗长）文档。[从这里](http://mojolicio.us/perldoc)开始了解整个系统。具体阅读有关[Mojo::DOM](http://mojolicio.us/perldoc/Mojo/DOM)和[Mojo::Collection](http://mojolicio.us/perldoc/Mojo/Collection)应该足以处理 DOM 解析。我认为您的部分问题是您没有注意到 DOM 和 Collection 对象的相互依赖关系，因此您错误地认为所有方法调用都在 DOM 对象上。当您仔细阅读时，您会看到一些 DOM 方法（返回的可能不止一个结果）返回 Collection 对象，并且`find`就是这样一种方法。

# c# - sql批量复制内存问题

> ID：12819151
> 
> 赞同：4
> 
> 时间：2012-10-10T12:16:58.387
> 
> 标签：c#, sql, sql-server

我们在 C# 中使用 SqlBulk Copy 类。在 sql 中插入批量数据。我们有一个包含 1000 万条记录的表。

我们在一个循环中插入一批 10,000 个数据

我们正面临物理内存问题。内存增加而不是减少。

下面是我们的代码。使用 sql 大容量复制时我们如何释放内存，或者还有其他方法可以进行大容量插入。

```
using (System.Data.SqlClient.SqlBulkCopy bulkCopy = new System.Data.SqlClient.SqlBulkCopy(SQlConn,SqlBulkCopyOptions.TableLock,null))
{
    //bulkCopy = new System.Data.SqlClient.SqlBulkCopy(SQlConn);
    bulkCopy.DestinationTableName = DestinationTable;
    bulkCopy.BulkCopyTimeout = 0;
    bulkCopy.BatchSize = dt1.Rows.Count;
    Logger.Log("DATATABLE FINAL :" + dt1.Rows.Count.ToString(), Logger.LogType.Info);
    if (SQlConn.State == ConnectionState.Closed || SQlConn.State == ConnectionState.Broken)
        SQlConn.Open();
    bulkCopy.WriteToServer(dt1); //DataTable
    SQlConn.Close();
    SQlConn.Dispose();
    bulkCopy.Close();
    if (bulkCopy != null)
    {
        ((IDisposable)bulkCopy).Dispose();
    }                        
} 
```

这里更新完整的代码。

```
try
        {

            using (SqlConnection SQlConn = new SqlConnection(Common.SQLConnectionString))
            {

                DataTable dt1 = FillEmptyDateFields(dtDestination);

                //SqlTableCreator ObjTbl = new SqlTableCreator(SQlConn);

                //ObjTbl.DestinationTableName = DestinationTable;
                using (System.Data.SqlClient.SqlBulkCopy bulkCopy = new System.Data.SqlClient.SqlBulkCopy(SQlConn,SqlBulkCopyOptions.TableLock,null))
                {

                    //bulkCopy = new System.Data.SqlClient.SqlBulkCopy(SQlConn);
                    bulkCopy.DestinationTableName = DestinationTable;
                    bulkCopy.BulkCopyTimeout = 0;
                    bulkCopy.BatchSize = dt1.Rows.Count;
                    Logger.Log("DATATABLE FINAL :" + dt1.Rows.Count.ToString(), Logger.LogType.Info);
                    if (SQlConn.State == ConnectionState.Closed || SQlConn.State == ConnectionState.Broken)
                        SQlConn.Open();
                    bulkCopy.WriteToServer(dt1);
                    SQlConn.Close();
                    SQlConn.Dispose();
                    bulkCopy.Close();
                    if (bulkCopy != null)
                    {
                        ((IDisposable)bulkCopy).Dispose();
                    }                        
                }

            }

            dtDestination.Dispose();
            System.GC.Collect();
            dtDestination = null;
        }
        catch (Exception ex)
        {
            Logger.Log(ex, Logger.LogType.Error);
            throw ex;

        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T12:24:28.140

这里的关键问题是：什么是`dt1`，它来自哪里，以及你是如何发布它的？`DataTable`实际上清理起来非常棘手，坦率地说，我通常不会`DataTable`在这里推荐一个来源。但是，如果您*必须*使用`DataTable`，请确保并使用完全独立的`DataSet`/`DataTable`每次迭代，并释放旧的，以便它可以回收。

然而，更有效的是使用`WriteToServer(IDataReader)`- 这允许您以流方式处理行。如果您在两个 SQL 系统之间进行复制，您甚至可以只`ExecuteReader()`在单独的命令/连接上使用，但这`IDataReader`非常简单，您可以`IDataReader`为大多数源编写一个基本的（或找到这样做的库，例如用于处理分隔文件的[CsvReader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)例如 csv/tsv）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:27:45.853

我想问题出在这一行：

```
bulkCopy.BatchSize = dt1.Rows.Count; 
```

BatchSize 属性确定在单个内部事务中插入多少行。这里的行大小可能是无限的。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.batchsize.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.batchsize.aspx)

尝试将其设置为一个小而固定的数字应该可以解决问题：

```
bulkCopy.BatchSize = 1000; 
```

在这里决定最佳批量大小由您决定。

# java - 如何在shell中获取java输出

> ID：12819154
> 
> 赞同：1
> 
> 时间：2012-10-10T12:17:02.530
> 
> 标签：java, bash, shell

我有一个 shell 脚本**run.sh**正在执行一个 jar 文件。

```
#!/bin/bash
"$JAVA_HOME"/bin/java -jar test.jar $1 $2 $3 
```

在java中完成所有过程后，我需要执行一个命令。所以我的 java 方法通过传递一些参数来调用 shell 脚本。

```
public static void Test(String Arg1, int Arg2, int Arg3, String Arg4) throws IOException, InterruptedException {

            File currentLocation = new File(Test.class.getProtectionDomain().getCodeSource().getLocation().getPath());

            String executeShellScript = currentLocation.getParentFile().toString() + "/out.sh";

           //SOME LOGIC

            ProcessBuilder pb = new ProcessBuilder("/bin/sh",executeShellScript,arg1, arg2, arg3, arg4);
            pb.redirectErrorStream(true);

            Process p = pb.start();
            BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
            String line = null;
            while ((line = br.readLine()) != null) {
                System.out.println(line);
            }

        } 
```

在我的 out.sh 中，我接受参数并执行命令。

```
#!/bin/bash

IMAGE=$1
ROW=$2
COLUMN=$3
DESTINATION=$4
echo $IMAGE 
```

我想知道是否可以通过获取所有参数来执行和处理来自同一脚本（run.sh）的 jar 的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:29:34.020

您可以将 jar 的输出重定向到一个文件中（>out.txt 在 run.sh 中的 $3 之后）并在 run.sh 中处理该文件。或者您可以通过管道 (|) 输出。

# titanium - “没有设置日历” - iOS6 Titanium

> ID：12819157
> 
> 赞同：1
> 
> 时间：2012-10-10T12:17:19.193
> 
> 标签：titanium, ios6

我尝试了一些钛模块来添加一个 iPhone 日历的条目，在我的模拟器上似乎都可以正常工作，但是当我在手机上测试应用程序时出现以下错误，

> “没有设置日历”

因为这发生在 3 个不同的模块上，我认为问题出在手机（或钛金属）上，有一些关于删除日历和重新添加、重新启动手机的帖子，但我仍然遇到同样的错误，有趣的是日历本身可以完美运行.

该日历有许多我认为是默认日历和共享日历，但我看不出这有什么不同，并且在设置中选择了一个作为默认日历

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T08:19:06.617

您是否需要 calendarEvent 权限（iOS 版本 6 需要）？

看到[这个这个问题](https://stackoverflow.com/questions/12537984/app-calendar-functionality-no-longer-working-in-ios-6)

# ffmpeg - 使用 FFMPEG 从 MXF 转码到 mp4 时出错

> ID：12819166
> 
> 赞同：0
> 
> 时间：2012-10-10T12:17:40.470
> 
> 标签：ffmpeg, command-line-interface

我在命令行中使用 FFmpeg 0.6.3 在 Windows Server 2008 中将文件从一种格式转码为另一种格式。但是当我尝试将 mxf 文件转换为 mp4 格式时。我收到以下错误消息

```
ffmpeg error while opening encoder for output stream #0.1 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

用于转码的ffmpeg命令 *ffmpeg -y -i "inputfile.mxf" -t 30 -s 640x360 output.mp4 -t 30 -s 1280x720 output2.mp4*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:42:54.837

我使用下面的命令来转换一些 mxf 文件。希望这些对您有所帮助。

```
1]. ffmpeg -i input.mxf -vcodec libx264 output.mp4 
```

上面的一个代码经过测试，它给出了 h264 编解码器的 output.mp4。

您也可以尝试一些其他命令

```
==> ffmpeg input.mxf -vcodec libx264 -sameq output.mp4
or
==> ffmpeg -i input.mxf -acodec libfaac -ab 128k -ar -sameq -s 704x400 -r 20 -vcodec libx264 -b 256000 -cmp +chroma -partitions +parti4x4+partp8x8+partb8x8 -me_method umh -subq 5 -trellis 1 -refs 2 -bf 1 -coder 1 -me_range 16 -g 300 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -bt 256000 -maxrate 4M -bufsize 4M -rc_eq 'blurCplx^(1-qComp)' -qcomp 0.6 -qmin 10 -qmax 51 -qdiff 4 -level 21 output.mp4 
```

希望对你有帮助 ：）

PS :- 我已按照此页面将 ffmpeg 安装到我的 ubuntu 10.4。如果出现 libx264 等错误，请安装其他软件包

[https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuideLucid](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuideLucid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T16:25:45.833

这是一个非常简单的答案：Windows server 2008 没有 mpeg-4 多路复用器，因此使用服务器的默认配置，您无法在计算机上获取任何 mp4 信息。

- 在您的计算机中，您会注意到，如果您将鼠标光标放在视频文件上，您将能够看到基本的文件信息，例如持续时间...

- 在您的服务器上，您可能会发现，如果您对 mp4 媒体文件执行相同操作，您将无法看到此信息...（持续时间和尺寸）

该问题的答案是从开始菜单转到 Windows Server 2008 r2 中管理工具下的服务器管理器。

从那里您需要选择左侧的功能。之后，您需要添加功能并选择 DESKTOP EXPERIENCE 并安装。

这是您需要做的主要事情，您的机器才能读取 mp4 信息。之后，您需要为您的 mp4 媒体文件设置 mime 类型。安装编解码器。

# c# - 如何在不遇到大对象或垃圾收集第 2 代问题的情况下读取多个大文本块

> ID：12819169
> 
> 赞同：0
> 
> 时间：2012-10-10T12:17:45.497
> 
> 标签：c#, garbage-collection

我目前正在创建一个将遍历多个 URL 的应用程序，它会下拉源代码，然后使用元素 ID 等参考点提取特定数据。

源代码被加载到 String 对象中，然后通过查找 IndexOf 参考点并执行 SubString 进行处理。

问题是 String 对象是垃圾收集中的第 2 代，这意味着它在被收集之前会在内存中停留一段时间。这意味着在访问越来越多的 URL 后，应用程序的内存使用量会继续增长。

我运行了该应用程序并处理了 25 个 URL，内存使用量跃升至 300Mb，一段时间后 - 我假设在垃圾收集启动后 - 内存使用量回落到 1Mb。

所以既然我只需要很短的时间来提取数据，有没有更优化的方法呢？

请注意，我无法分块读取源代码，因为分离可能会在参考点的中途发生。

IE

```
...<a href="http://www.some-website.com/" id="link-I-need">Hyperlink</a>... 
```

可以这样分开

```
...<a href="http://www.some-website.com/" id="link-] (End of first chunk) - (Start of second chunk) [I-need">Hyperlink</a>... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:23:28.920

如果您以这样一种方式编写代码，即没有字符串在范围内超过它必须的长度，CLR 将在它认为合适的时间收集它。因此，当您的程序需要内存时，CLR 将使该内存可用。

CLR 的工作方式和清理时间与用户代码无关，除非您正在执行对时间敏感的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:33:34.947

您是否考虑过其他方法，例如 HTML 解析器？HTML 解析器可能比您尝试的更有效。以下文章可能会有所帮助：[在 C# 中解析 HTML 的最佳方法是什么？](https://stackoverflow.com/questions/56107/what-is-the-best-way-to-parse-html-in-c?rq=1)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T12:21:46.640

如果您还没有，请使用 StringBuilder 对象并附加到构建器而不是连接字符串。

在每次处理迭代结束时，您可以清除 StringBuilder 并释放内存。

# javascript - javascript: 可以获取原图的宽高吗？

> ID：12819170
> 
> 赞同：0
> 
> 时间：2012-10-10T12:17:49.350
> 
> 标签：javascript, image, image-uploading

我有一个用户上传的图像，它显示为一个小图标，但是我需要确定原始图片的高度和宽度。我怎样才能得到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:23:25.580

为此使用对象属性宽度和高度。看下面的例子：

```
var imgObj = new Image()
    imgObj.src = "http://www.muenzenpara.de/muenzenmotive/griechenland_euro.jpg";
    alert(imgObj.width);
    alert(imgObj.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:21:00.983

`.naturalWidth/.naturalHeight`，尽管它在旧版 IE 中不起作用。

[http://jsfiddle.net/kBRtX/](http://jsfiddle.net/kBRtX/)

# git - 删除特定的提交知道提交 ID

> ID：12819172
> 
> 赞同：2
> 
> 时间：2012-10-10T12:17:54.533
> 
> 标签：git, version-control, versioning, commit

假设我有一个包含以下提交的仓库（git 版本 1.7.1）

`A -> B -> C -> D ->E` 我的头是开着的`E`。现在我想删除 C，同时保持一切都一样 `A -> B -> D -> E`。

你能帮我怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T14:52:31.480

您可以使用`git rebase -i B`. 但是请注意，这`D`和`E`将被重写（获得不同的提交 SHA），因此结果将是`A -> B -> D' -> E'`. 的内容`E'`应该等同于（减去您现在丢弃`E`的更改），但 ID 会有所不同。`C`这就是为什么你到处都发现关于重新提交已经推送并可能被其他人用作新工作基础的警告的原因。您正在重写历史，这将在其他存储库中引起混乱，除非他们期待它。但是，如果这是一个私有存储库，或者您还没有推送，那么您应该可以重新安排提交。

# php - PHP -> 如何检查 XML 是否为空

> ID：12819174
> 
> 赞同：9
> 
> 时间：2012-10-10T12:18:04.047
> 
> 标签：php, xml

我从某个 ID 后的请求中获取简单的 xml 内容。但有时 ID 不再可用并且 XML 为空。

如果 xml 为空，如何使用 PHP 检查？

如果有人有想法，如果他能帮助我，我将不胜感激。

提前致谢。

马可

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T12:29:39.787

如果您可以使用**SimpleXML**扩展：

```
$xmlObject = new SimpleXMLElement($xmlText);
if ($xmlObject->count() == 0) {
    //it's empty
}
else {
    //XML object has children
} 
```

此外，SimpleXML 是一个非常方便的 XML 阅读器/编辑器。

详情：[http ://ua2.php.net/manual/en/book.simplexml.php](http://ua2.php.net/manual/en/book.simplexml.php)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T12:26:46.620

我想这取决于你的意思是空的，如果整个文档是空的，你可以检查文档的字符串版本是否为空：

```
if (empty($xmlString)) 
{
    // is empty 
} 
```

但是如果您期望一个根节点，您可能需要检查是否有任何子节点：

```
$xml = simplexml_load_file("test.xml");

if (empty($xml->getName()) && count($xml->children()) == 0) { 
    // is empty
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-21T07:36:48.597

只需在您的 id 之前使用 (string) 即可。例如：- 你的代码是这样的 $id = $xml->mail->id;

然后让它就像这样 $id = (string)$xml->mail->id;

它会起作用的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-14T08:27:41.580

只是将我的两分钱添加到一个旧问题中，但评分最高的答案似乎建议使用 simplexml_load_file("test.xml"); 然后测试您期望的节点是否为空。因为如果文件为空，这会引发警告级别错误，所以我不同意，而是使用文件大小测试来包装调用。

```
$xmlInfo = new SplFileInfo('test.xml');
if((int) $xmlInfo->getSize() > 0)
{
   $xml = simplexml_load_file($xmlInfo->getPath());  
} 
```

当然 OP 已经问过了`How can I check with PHP if a xml is empty`，它没有指定他是指节点还是文件，但为了完整性，它是存在的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-29T06:47:20.670

尝试这个：

```
$xml_str = '<?xml version="1.0" standalone="yes"?><Name/>';
$xml = new SimpleXMLElement($xml_str);

if(empty($xml->Name[0])){
    // ITS EMPTY !! DO SOMETHING
    echo "ITS EMPTY ASJK";
} 
```

# android - 如何从 HttpPost 对象中读取数据？

> ID：12819177
> 
> 赞同：0
> 
> 时间：2012-10-10T12:18:14.003
> 
> 标签：android, web-services

我正在使用 POST 方法向 Web 服务发送请求以及作为参数的字符串。

例如：-

```
HttpPost httpPost = new HttpPost(http://www.google.com/gmail/getpictures.php);//sample URL (not working) 
```

我还发送了一个字符串以及 Web 服务 URL

```
tmp = new StringEntity(data,"UTF-8");//data is any string
tmp.setContentEncoding(new BasicHeader("Content-type", "application/json"));
httpPost.setEntity(tmp); 
```

我使用发送请求

```
response = httpClient.execute(httpPost); 
```

我想打印 httpPost 对象内部的内容，以了解我是否将正确的数据发送到服务器。 **HttpPost.toString()**对我不起作用。任何人都知道如何将 httpPost 对象检索为字符串，以便我可以在**LOGCAT**上打印它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:23:24.640

您需要从响应中获取内容。

```
InputStream inputstream = response.getEntity().getContent();
BufferedReader rd = new BufferedReader(new InputStreamReader(inputstream)); 
```

现在从 rd 读取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:24:59.947

试试这个代码

```
DefaultHttpClient hc = new DefaultHttpClient();
                                            ResponseHandler<String> res = new BasicResponseHandler();
String response = hc.execute(postMethod,res);
System.out.println(responce); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:18:56.593

试试这个

```
String response = httpclient.execute(httppost, responseHandler); 
```

# asp.net - MVC4 中的 SimpleMembershipProvider 在初始化时在方法上抛出 NotSupportedException

> ID：12819183
> 
> 赞同：2
> 
> 时间：2012-10-10T12:18:39.423
> 
> 标签：asp.net, asp.net-mvc-4, simplemembership

我正在使用 ASP.net MVC4 模板的内置 SimpleMembership，并希望创建一个管理面板来重置用户群的密码和类似操作。

我使用 SecurityGuard.MVC4 nuget 作为起点，并且在大多数操作中都收到 NotSupportedException。SecurityGuard 使用控制器的 Membership 属性调用 SimpleMembershipProvider 上的 GetAllUsers()、GetUser() 和 ResetPassword() 等方法，它们都会抛出 NotSupportedException。从文档看来，这是设计使然：

[SimpleMembershipProvider.GetAllUsers](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider.getallusers%28v=vs.111%29.aspx)

> 注意：如果 SimpleMembershipProvider 类已使用调用 WebSecurity.InitializeDatabaseConnection() 方法进行了初始化，则此方法不受支持并且会抛出 NotSupportedException 异常。但是，如果尚未调用 WebSecurity.InitializeDatabaseConnection() 方法，并且您已将站点配置为使用标准 ASP.NET 成员资格提供程序，则此方法将传递给标准成员资格提供程序。

我错过了什么？似乎我需要在将 WebSecurity 用于 WebSecurity.CreateUser() 等标准内容和直接使用提供程序之间进行选择？

我可以解决这个问题，但我主要对为什么我不能同时获得两者感到困惑？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:14:12.080

`SimpleMembership`被故意设计成……嗯，简单。 `WebSecurity`使用`SimpleMembership`，并使用派生自的`ExtendedMembershipProvider`类。`SimpleMembership`

本质上，SimpleMembership 没有实现 WebSecurity 中不存在的任何功能，GetAllUsers 就是其中之一。是的，这是设计使然。

你有几个选择。所有这些都是解决方法。

1.  您可以简单地进行自己的查询以获取所有用户。
2.  您可以创建自己的从 SimpleMembership 派生的 Membership 提供程序并实现这些功能
3.  您可以返回到 SqlMembershipProvider（或 Universal Providers）（但避开 WebSecurity）

# iphone - iOS中opengl顶点数据的对齐有多重要

> ID：12819188
> 
> 赞同：8
> 
> 时间：2012-10-10T12:18:46.543
> 
> 标签：iphone, ios, ipad, 3d, opengl-es-2.0

OpenGL ES 编程指南讨论了您应该避免未对齐的顶点数据，并给出了将数据对齐到 4 字节块的示例。

[OpenGL ES 编程指南](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html#//apple_ref/doc/uid/TP40008793-CH107-SW1)

![未对齐与对齐的顶点数据](../Images/ea3107ad937af04492cff77fab65193a.png)

然而，在我在网上找到的大多数演示材料和教程中，我没有看到有人这样做。以下示例来自 71 Squared 上的演示项目：

```
static const SSTexturedVertexData3D EnemyFighterVertexData[] = {
    {/*v:*/{1.987003, -0.692074, -1.720503}, /*n:*/{0.946379, -0.165685, -0.277261}, /*t:*/{0.972816, 0.024320}}, 
```

你会怎么做呢？在 v 和 n 中添加一个虚拟 0.0，在 t 中添加 2 个？

我的猜测是，如果您只为每个应用程序加载一次顶点数据，那并不重要，但如果您在每个渲染帧上绑定和重新绑定到不同的数组，那就很重要了。我的计划是将我所有的数组组合成一个，但我很好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T08:01:23.020

一般一个顶点是由`floats`哪些要对齐的，所以你不需要太在意。事实上，很多书籍使用普通`struct`的 s 来保存顶点数据，由于填充问题，这些顶点数据不能保证是连续的，但如果你只有浮点数，那很好，因为你不太可能有填充。当然，有些人（包括我自己）更喜欢使用`vector`C++ 中的 STL，但如果你在 iOS 上，虽然你可以使用 C++，但你可能正在使用 Objective-C，因此非结构方式的连续性将涉及普通的 C 数组，它们是一起工作不是那么有趣。

如果您创建自定义结构来保存顶点数据以及可绘制对象的其他数据，并且使用`short`s 或其他类型，您可能会发现填充成为问题。但是如果你只坚持`float`s 你会没事的，而且你会相处得很好，因为大多数关于 OpenGL 的教育资源都是这样做的。

# c++ - OpenCV中Mat的二维向量

> ID：12819191
> 
> 赞同：1
> 
> 时间：2012-10-10T12:19:01.727
> 
> 标签：c++, opencv, vector

我正在用 C++ 开发一个系统，用于比较视频中动态帧数（窗口大小）的动态感兴趣区域数（ROI）。出于这个原因，我使用 Mat 的二维向量，声明和启动如下：

```
vector< vector<Mat> > ROIvector(numberofROI,vector<Mat>(windowsize)); 
```

向量中填充了来自如下视频的 Mat：

```
 for(int i=0;i<windowsize;i++)
        {
            video>>frame;
            if(frame.empty())
            {
                break;
            }
            for(int j=0;j<numberofROI;j++)
            {
                Mat temp;
                frame(ROIRectVector[j]).copyTo(temp);
                ROIvector[j].push_back(temp);
            }
        } 
```

但是每当我尝试访问单个 Mat 时，例如 ROIvector[0][3]，openCV 都会抛出这种类型的异常。

```
OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat, file C:/slave/WinInstallerMegaPack/src/opencv/modules/core/src/array.cpp, line 2482 
```

以相同方式访问 Mat 的一维向量时我没有遇到问题，二维向量有问题吗？

# java - JavaFX 2.2 Stage 始终在最前面

> ID：12819194
> 
> 赞同：16
> 
> 时间：2012-10-10T12:19:04.983
> 
> 标签：java, javafx, jframe, always-on-top

我有一个普通的 JFrame（应用程序的一部分）和第二个 JavaFX 窗口（我不能将 JFrame 用于 JavaFX 阶段）。问题是 JavaFX 窗口应该始终位于所有其他窗口的顶部。

我不知道我应该如何解决这个问题！有任何想法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-05-31T03:43:36.983

我知道这是一个旧线程，但事情一直在变化。来到JDK 8u20是一种新方法`primaryStage.setAlwaysOnTop(true);`

这将是使舞台始终处于顶部的最简单方法。要提前访问 8u20，请访问[网站](https://jdk8.java.net/download.html)。

```
public class KeyholeDemo extends Application {
    @Override public void start(Stage primaryStage) {
        primaryStage.initStyle(StageStyle.TRANSPARENT);
        primaryStage.setAlwaysOnTop(true);

        // code omitted...
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

取自这篇不错的文章的示例[代码](http://java.dzone.com/articles/javafx-8u20-days-future-past)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-01T18:44:16.323

我现在也有类似的问题。

我使用这行代码来获得始终处于最佳状态的效果：

```
stage.initModality(Modality.APPLICATION_MODAL); 
```

这对我来说可以。

这是[文档。](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-13T12:00:27.617

像这样（我正在使用警报）

```
 Stage stage = (Stage) alert.getDialogPane().getScene().getWindow();
 stage.setAlwaysOnTop(true); 
```

如果您希望它始终阻止其他窗口，只需设置：

```
alert.initModality(Modality.APPLICATION_MODAL); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T12:38:36.887

AFAIK，没有 API 可以让 JavaFX 阶段始终处于首位。[但是您可以使用JFXPanel](http://docs.oracle.com/javafx/2/api/javafx/embed/swing/JFXPanel.html)将 JavaFX 场景放入 JFrame 中。

# javascript - CRM 2011 设置表单字段值但显示保持空白

> ID：12819197
> 
> 赞同：2
> 
> 时间：2012-10-10T12:19:12.100
> 
> 标签：javascript, dynamics-crm-2011

有时（实际上大多数时候）当我尝试设置查找字段值时，该值已设置且可读，但该字段本身在表单上看起来是空白的。为什么会这样？传递的所有参数`setSimpleLookupValue`看起来都正确。

关于为什么会发生这种情况的任何想法？

这是完成大部分工作的函数：

```
function sgc_hr_getManager() {
  var testContactId = Xrm.Page.getAttribute("sgc_hr_case_initialcontact").getValue();
  if (testContactId != null) {
    // do nothing - the field already has a value
  } else {
    var employeeVal = Xrm.Page.getAttribute("customerid").getValue();
    if( employeeVal != null && employeeVal[0] && employeeVal[0].id != null ) {
      var employeeId = Xrm.Page.getAttribute("customerid").getValue()[0].id;
      employeeId = employeeId.replace('{','').replace('}','');
      SDK.REST.retrieveRecord( employeeId, 'Contact', null, null, function( employee )     {
        var managerId = employee.sgc_hr_ManagerId.Id;
        if( managerId != null ) {
          SDK.REST.retrieveRecord( managerId, 'Contact', null, null, function( manager ) {
              // the following function call correctly sets the value
              // but the control display is usually left blank
              setSimpleLookupValue( 'sgc_hr_case_initialcontact', 'Contact', manager.ContactId, manager.FullName );
          }, function(a) {
              alert('An error occured! Unable to retrieve postholder record ' + managerId );
          });
        }
      }, function(a) {
          alert('An error occured! Unable to retrieve postholder record ' + employeeId );
      })
    } else {
        alert('Cannot get employee details');
    }
  }
} 
```

setSimpleLookupValue 函数是标准函数，如下所示：

```
function setSimpleLookupValue(LookupId, Type, Id, Name) {
   var lookupReference = [];
   lookupReference[0] = {};
   lookupReference[0].id = Id;
   lookupReference[0].entityType = Type;
   lookupReference[0].name = Name;
   Xrm.Page.getAttribute(LookupId).setValue(lookupReference);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:35:55.957

在设置值之前尝试添加下一行

```
Xrm.Page.getAttribute("sgc_hr_case_initialcontact").setSubmitMode("always"); 
```

# sql - left join for on col 到 multi col

> ID：12819206
> 
> 赞同：1
> 
> 时间：2012-10-10T12:19:51.053
> 
> 标签：sql

我有两张桌子，第一个 d001 有两个 col：

```
ACC_ID, ACC_NAME
      |         |
      |         |  
      |         | 
```

第二个 d002 有四个 col

```
DATE ACC_ID_1, ACC_ID_2, ACC_ID_3, ACC_ID_4 
    |        |         |         |         |      
    |        |         |         |         |
    |        |         |         |         | 
```

我如何使视图包含

```
DATE, ACC_NAME1, ACC_NAME_2, ACC_NAME_3, ACC_NAME_4
    |          |           |           |           |      
    |          |           |           |           |
    |          |           |           |           | 
```

我尝试左加入，但结果仅适用于一列！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:21:06.753

您总共需要离开加入4次！

```
select t.date,
       a.acc_name acc_name1,
       b.acc_name acc_name2,
       c.acc_name acc_name3,
       d.acc_name acc_name4
from d002 t
left join d001 a on a.acc_id = t.acc_id_1
left join d001 b on b.acc_id = t.acc_id_2
left join d001 c on c.acc_id = t.acc_id_3
left join d001 d on d.acc_id = t.acc_id_4 
```

话虽如此，您应该在下一个方便的机会重新访问表结构时将数据规范化为 4 行。

# python - 在python本地下载文件

> ID：12819207
> 
> 赞同：1
> 
> 时间：2012-10-10T12:19:51.203
> 
> 标签：python, csv, export, openerp

我有一个`OpenERP`生成`CSV`文件的python方法。我的问题是如何将 CSV 的默认路径设置为本地路径，而不是服务器上的路径。

我的一部分代码有这个`with open('export_data.csv', 'wb') as csvfile:`。它将文件保存在服务器上。我希望将文件保存在客户端位置。

您对如何实现这一目标有任何想法吗？

openerp 内置导出数据功能不是一个选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T13:16:03.740

## 使用 fields.binary

在 OpenERP 中将二进制文件返回到客户端的一种常见方法是使用`fields.binary`列。您可以将其放入仅在会话期间存在的`TransientModel`对象（以前`osv_memory`用于创建交互式向导）中。二进制字段值可以设置为先前操作的结果，或者可以通过让`fields.function`列模拟它来动态计算。

您可以在官方插件中找到几个这样的示例，例如生成 CVS/PO/TGZ 文件的[翻译导出向导。](https://github.com/odoo/odoo/blob/8.0/openerp/addons/base/module/wizard/base_export_language.py#L33)一个陷阱是二进制值必须是 base64 编码，出于历史 RPC 传输的原因。

## 使用静态下载 URL

从 OpenERP 6.1 开始，还可以提供从服务器文件系统直接下载文件的功能。就像将文件的 URL 放在一个`fields.char`值中一样简单，作为根植于您的模块的相对 URL，例如`/module/path/to/file`. 然后在表单视图中将此字段添加为链接，使用`widget="url"`. 使用它的一种情况是邮件客户端插件的[配置向导](https://github.com/odoo/odoo/blob/7.0/addons/plugin_outlook/plugin_outlook.py#L27)。

这适用于作为模块一部分的静态文件，但不适用于系统由于用户操作而生成的文件，因为它们可能不应该存储在模块的文件系统中，即使是暂时的。在正确安全的安装中，OpenERP 服务器进程甚至可能无权写入模块源所在的文件系统。

* * *

还有其他选择，例如编写自己的 Web 控制器，但上述解决方案在大多数情况下应该足够好用。

# python - 在不使用内置函数的情况下将 python 字典转换为 xml 字符串

> ID：12819209
> 
> 赞同：1
> 
> 时间：2012-10-10T12:20:02.363
> 
> 标签：python, string, dictionary

我有一个包含值（字符串、列表、字典）的字典，我想将该字典转换为 xml 格式字符串。

包含的值可能是子字典和列表（不是固定格式）。所以我想从 dict 中获取所有值并形成 xml 字符串，而不使用任何内置函数，如（导入 xml、ElementTree 等）。

例如：

输入 ：

```
{'Employee':{ 'Id' : 'TA23434', 'Name':'Kesavan' , 'Email':'k7@gmail.com' , 'Roles':[ {'Name':'Admin' ,'RoleId':'xa1234' },{'Name':'Engineer' , 'RoleId':'xa5678' }], 'Test':{'a':'A','b':'b'} }} 
```

输出应该是：

```
<Employee>
       <Id>TA23434</Id>
       <Name>Kesaven</Name>
       <Email>, ..... </Email>
       <Roles>
             <Roles-1>
                         <Name>Admin</Name>
                         <RoleId>xa1234</RoleId>
             </Roles-1>
             <Roles-2>
                         <Name>Admin</Name>
                         <RoleId>xa1234</RoleId>
             </Roles-2>
       <Roles>
       <Test>
             <a>A</a>
         <b>B</b>
       </Test>  
</Employee> 
```

任何人都可以就此提出建议，哪种方式很容易做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:54:43.207

你可以使用这样的东西：

```
def to_tag(k, v):
    """Create a new tag for the given key k and value v"""
    return '<{key}>{value}<{key}/>'.format(key=k, value=get_content(k, v))

def get_content(k, v):
    """Create the content of a tag by deciding what to do depending on the content of the value"""
    if isinstance(v, str):
        # it's a string, so just return the value
        return v
    elif isinstance(v, dict):
        # it's a dict, so create a new tag for each element
        # and join them with newlines
        return '\n%s\n' % '\n'.join(to_tag(*e) for e in v.items())
    elif isinstance(v, list):
        # it's a list, so create a new key for each element
        # by using the enumerate method and create new tags
        return '\n%s\n' % '\n'.join(to_tag('{key}-{value}'.format(key=k, value=i+1), e) for i, e in enumerate(v))

d = {'Employee':{ 'Id' : 'TA23434', 'Name':'Kesavan' , 'Email':'k7@gmail.com' , 'Roles':[ {'Name':'Admin' ,'RoleId':'xa1234' },{'Name':'Engineer' , 'RoleId':'xa5678' }], 'Test':{'a':'A','b':'b'} }}

for k,v in d.items():
    print to_tag(k, v) 
```

我添加了一些评论，但应该清楚发生了什么，这应该足以让你开始。

`dict`s 在 python 中没有排序，因此生成的 XML 也没有排序。

**结果：**

```
<Employee>
<Email>k7@gmail.com<Email/>
<Test>
<a>A<a/>
<b>b<b/>
<Test/>
<Id>TA23434<Id/>
<Roles>
<Roles-1>
<RoleId>xa1234<RoleId/>
<Name>Admin<Name/>
<Roles-1/>
<Roles-2>
<RoleId>xa5678<RoleId/>
<Name>Engineer<Name/>
<Roles-2/>
<Roles/>
<Name>Kesavan<Name/>
<Employee/> 
```

# jquery - jquery .change() 事件未在 iPhone 上触发

> ID：12819210
> 
> 赞同：1
> 
> 时间：2012-10-10T12:20:03.807
> 
> 标签：jquery, mobile-webkit

我在让 Iphone 中触发 jquery .change() 事件时遇到问题。代码类似于以下内容：

```
var checkboxes = $('#someelement').find('input[type=checkbox]');

checkboxes.change(function() {

//never gets here on iPhone
alert('hello');
});

checkboxes.filter(':checked').trigger('change'); 
```

复选框列表在此步骤之前动态生成，并使用 .append() 方法写入页面。

这一切都适用于桌面浏览器和 Android 手机。使用 JQuery 版本 1.6.4

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:27:31.650

尝试使用`delegate`，它可以让您将事件附加到当前和未来的元素。

```
$("#someelement").delegate('input[type="checkbox"]', "change", function(){
  alert('hello');
}); 
```

此外，从 jQuery 1.5 开始，所有[属性选择器都需要被引用](http://api.jquery.com/category/selectors/attribute-selectors/)（例如，第二个选择器中的“复选框”）。

# python - 如何为所有功能导入模块？

> ID：12819212
> 
> 赞同：1
> 
> 时间：2012-10-10T12:20:08.393
> 
> 标签：python, import, module

我有一个名为“main.py”的主文件和两个子文件夹。一个称为“externals”，包含“easygui.py”，另一个称为“modules”，包含一个名为“gui.py”的文件。

该程序通过 main.py 启动

我在 main.py 中使用`import externals.easygui`. 与我导入 modules.gui 的方式相同

但是当我调用welcome-function时，它不知道easygui，我必须在函数中导入它。由于我想调用更多的easygui 函数，我不想在每个def 中都导入easygui。

如何解决？

提前致谢！

史蒂芬

示例（为了便于阅读，无需 try/except 和注释内容）：

主要.py：

```
#!/usr/bin/env python

import externals.easygui
import modules.gui

main():
    gui.welcome() 
```

gui.py：

```
def welcome():
    msgbox("Welcome!", ok_button="Ok") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:22:27.343

假设`welcome`在 中`easygui.py`，您想要：

```
def main():
   externals.easygui.welcome() 
```

由于这些东西输入起来很乏味，通常习惯于以缩写名称导入子包：

```
import externals.easygui as eg
def main():
    eg.welcome() 
```

或者，如果您可以通过添加将整个东西变成一个包`__init__.py`，然后您可以控制从那里导入的命名空间......

* * *

就横向导入而言，这是我设置的测试目录结构：

```
steffen
  |- __init__.py
  |- main.py
  |- easygui
     |- __init__.py
     |- gui.py
  |- external
     |- __init__.py
     |- welcome.py 
```

现在，（为简单起见）每个都`__init__.py`简单地导入该目录中包含的文件/模块。所以，在 steffen：

```
#steffen.__init__.py
import main
import easygui
import external 
```

并且在外部

```
#steffen/external/__init__.py
import welcome 
```

等等。

对于实际代码：

**主要.py：**

```
import easygui
def main():
    easygui.gui.welcome() 
```

**easygui/gui.py：**

```
import steffen.external as se
def welcome():
    se.welcome.hello() 
```

**外部/welcome.py**

```
def hello():
    print "Hello" 
```

现在我可以使用所有这些了。在 steffen 的父目录中（只是为了确保 steffen 包在 PYTHONPATH 上），我可以：

```
import steffen
steffen.main.main() 
```

呸！现在，拥有`steffen.main.main()`. 如果您想将函数称为 just `steffen.main()`，您可以在 中进行设置`steffen.__init__.py`。只需将其更改为：

```
#steffen.__init__.py
from main import main
import easygui
import external 
```

所以，如果你通过`foo.func()`in调用一个函数`__init__.py`，你会像`steffen.foo.func()`在 import 的脚本中那样调用它`steffen`。同样，如果您将函数调用为`foo()`in `__init__.py`，您将`steffen.foo()`在导入 steffen 的脚本中调用它。希望这是有道理的。在我能想出的这个最简单的工作示例中，有很多东西需要消化。好处是，如果你能完成所有这些工作并理解它，那么你几乎知道关于编写 python 包的所有知识（我们还没有讨论过这里也可以使用的相对导入，或者关于`setup.py`实际编写一个安装你的包，但是一旦你理解了这些东西，这些就很容易理解了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:27:14.593

每个源文件都需要有自己的导入，因为它们不知道其他模块的导入。您必须在文件顶部包含一个`import externals.easygui`in 。`modules.gui.py`

例如。gui.py

```
from externals.easygui import msgbox

def welcome():
    msgbox("Welcome!", ok_button="Ok") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-09T04:43:51.947

# 我们这里有什么...

导入 gui.py 模块并将其命名为 gui，这样您只需使用 gui 标签即可访问 gui 中的功能。

在 gui.py 模块中只导入函数 msgbox，这样你就没有导入其他东西（如你所愿）。

现在，当程序运行时，它会显示调用 gui.welcome 函数的消息。

# 主文件

```
import modules.gui as gui

def main():
    gui.welcome()

if __name__ == "__main__":
    main() 
```

# 子文件夹模块中的 gui.py

```
from externals.easygui import msgbox

def welcome():
    msgbox("Welcome!", ok_button = "Ok") 
```

# jquery-ui - 集成 jquery ui 手风琴可折叠

> ID：12819214
> 
> 赞同：1
> 
> 时间：2012-10-10T12:20:17.463
> 
> 标签：jquery-ui, accordion

我有一个带有设置的 jquery-ui**手风琴**小部件`collapsible:true`。我希望页面上的其他元素根据手风琴小部件的高度动态上下滑动。手风琴也在标签小部件内。我希望标签扩展以适应手风琴的高度。

我在这里做了一个 jsfiddle 来显示我的界面：[jsfiddle.net](http://jsfiddle.net/eierfiddle/aGvyw/0/)

打开手风琴时，有什么方法可以让红色的文字向下滑动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:38:43.547

只要给

```
#accordion{
display:inline;
} 
```

# c# - Silverlight/XNA 交叉应用的缺点是什么？

> ID：12819215
> 
> 赞同：1
> 
> 时间：2012-10-10T12:20:17.927
> 
> 标签：c#, windows-phone-7, xaml, xna

如果您想在 windows phone 上制作游戏，XNA 是您的最佳选择，但是当涉及到仅包含链接和静态文本的页面时，silverlight 比 xna 有一些相当大的优势。

我说的是主菜单，关于屏幕和高分以及游戏结果。使用 XAML 创建一个菜单或文本框来保存一些文本非常容易。

你在 XNA 中唯一要做的就是游戏本身。我使用静态变量（分数）将分数传输到其他屏幕，这部分效果很好。

那么使用这种项目有什么缺点吗？还是根本不重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:29:59.617

不是真的只是没有很好的支持

试试这个指南：[http ://www.c-sharpcorner.com/uploadfile/iersoy/using-silverlight-in-xna-part-iii-silverlight-menus/](http://www.c-sharpcorner.com/uploadfile/iersoy/using-silverlight-in-xna-part-iii-silverlight-menus/)

我前段时间让它工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:32:39.007

根据记忆，Charles Petzold 的书[Programming Windows Phone 7](http://www.charlespetzold.com/phone/)以易于使用的教​​程格式探讨了此类项目。这是一本免费的电子书，其中包含该网站上提供的代码示例。

# for-loop - NSIS中的异常for循环

> ID：12819219
> 
> 赞同：0
> 
> 时间：2012-10-10T12:20:29.937
> 
> 标签：for-loop, nsis

我有这样的 NSIS 代码：

```
 ;Installer Sections

    var /GLOBAL f1m

    Function GetXML
     StrCpy $path "/A/B/C/"
     StrCpy $path "$path$R1"
     ${UpdateXml} "http://127.0.0.1/denwer/update.xml" $path $f1m
    FunctionEnd

    Function DownloadFiles
     metadl::download /RETRYTIME=2 /MAXTRIES=2 /MD5 $f1m http://127.0.0.1/some.exe some.exe
     Pop $R0 ;Get the return value
     StrCmp $R0 "success" +3
     MessageBox MB_OK "Download failed: $R0"
    FunctionEnd

    Section "Dummy Section" SecDummy
    ...
    ReadRegStr $curver HKCU "Software\SomeSoft" "ver"
    ...
    ${For} $R1 1 10
     Call GetXML
     Call DownloadFiles
    ${Next}
    ...
SectionEnd 
```

当 for 循环中的程序运行“DowloadFiles”函数时，它不是在 for 循环的开头。它只是回到 ReadRegStr 命令并且总是获得相同的 $f1m 变量值并卡在一个循环中。

这个动作的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:56:04.967

在你的`DonwloadFiles`功能中，我看到了一个可疑的

```
StrCmp $R0 "success" +3 
```

如果字符串相等，那应该跳转到第二条下一条语句（`+1`是下一条语句，`+2`让下一条语句短路，`+3`并将分流接下来的两条语句）。

但是在 之后只有**一个**语句`StrCmp`：the `MessageBox`. 当字符串相等时，流程可能会跳转到意外语句...`+2`用于跳过消息框，或使用标签以避免意外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T20:08:50.443

不支持/未定义跳过函数结束。您应该考虑使用标签或[LogicLib.nsh](http://nsis.sourceforge.net/Include/LogicLib.nsh) ...

# jquery - 数据表的可搜索列上的排序图标（向上向下箭头）未显示

> ID：12819220
> 
> 赞同：0
> 
> 时间：2012-10-10T12:20:31.967
> 
> 标签：jquery, html, datatable

我有一个 jquery 数据表，其中一些列是可搜索的

```
var oTable = $('#genericTable').dataTable( {
        "bProcessing": true,
        "sAjaxSource": '<%=jsonPath%>' + key + ".json",
        "sPaginationType"   : "full_numbers",
        "bJQueryUI"         : true,
        "bRetrieve"         : true,
        "bPaginate"         : true,
        "bSort"             : true,
        "aaSorting"  : [[ 2, "desc" ]],
        "iDisplayLength"    : 50,
        "bAutoWidth"        : false,
        "aoColumns": [
                      { "sTitle": "Name", sWidth: '200px' },
                      { "sTitle": "Description", sWidth: '360px' },
                      { "sTitle": "Date", sWidth: '70px', "sType": 'date-uk' },
                      { "sTitle": "Action", sWidth: '60px', "bSortable": false }
                    ],

    }).columnFilter({ sPlaceHolder: "head:after",
        aoColumns: [ { type: "text" },
                     { type: "text" },
                     null,
                     null
                   ]
    }); 

    } );
}); 
```

可搜索的列（文本框显示在标题中以进行搜索）在文本框右侧没有向上箭头图标，而其他列标题具有此排序图标

我可以知道在列标题中的文本框旁边显示排序图标的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:02:33.590

我有同样的问题。我修复它的方法是删除 sScrollY 属性。如果您打开 bPaginate，您应该得到适当大小的表格。编辑：我说错了。您需要打开滚动，然后关闭分页。他们有点相互排斥。

# c# - 使用 ASP.NET 的 Active Directory 访问

> ID：12819221
> 
> 赞同：2
> 
> 时间：2012-10-10T12:20:31.753
> 
> 标签：c#, asp.net, active-directory

在我的 asp.net 项目中，我需要访问 Active Directory 以获取员工的电子邮件 ID。访问它的步骤是什么？我有 C# 类来检索这些数据，但我不知道如何处理...我使用“nslookup
set type=all _ldap._tcp.dc._msdcs.DOMAIN_NAME”命令找到了我的 ADC 服务器名称。请通过提供一些信息或链接来帮助我

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:24:47.033

您可以使用 System.DirectoryServices.AccountManagement-Namespace 访问所需的信息。有一个类 UserPrincipal，它有一个静态 FindById-Method。您将需要一个 PrincipalContext 来查询您的 AD。要连接到“当前”-AD，您可以使用 Domain-Class

# ruby-on-rails - 为 Mongoid 序列化 IceCube 对象

> ID：12819230
> 
> 赞同：0
> 
> 时间：2012-10-10T12:21:06.047
> 
> 标签：ruby-on-rails, mongoid, ice-cube

我找到了这篇文章：[Override a Mongoid model's setter and getters](https://stackoverflow.com/questions/7306472/override-models-setters-and-getters-in-mongoid)来帮助我，但行为仍然不是我想要的。

我的模型是这样的：

```
class Event
  include Mongoid::Document
  include IceCube

  validates_presence_of :title
  field :title, type: String
  field :description, type: String
  field :schedule, type: Hash

  attr_protected :schedule_hash

  def schedule=(new_schedule)
    super(new_schedule.to_hash)
  end

  def schedule
    Schedule.from_hash(super())
  end
end 
```

这或多或少像我预期的那样工作，因为它序列化和反序列化 IceCube 对象，*但*我注意到虽然我可以这样做：

```
s = Schedule.new(Time.now)
s.add_recurrence_rule Rule.daily
e = Event.new
e.schedule = s 
```

它似乎像我期望的那样序列化和反序列化，我可以称之为

```
e.schedule.occurs_at?(Date.today + 1.day) 
```

并得到预期的响应。但是，如果我尝试：

```
e.schedule.add_recurrence_rule Rule.daily 
```

`s`而不是在将属性设置为 on 之前在局部变量上调用它`event`，我可以查看哈希并查看规则未保留。

在 Ruby 或 Mongoid 中做这种事情的正确方法上我是否缺少一些东西？

我尝试使用 write_attribute 和 read_attribute，但这同样无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:11:05.603

虽然不是最漂亮的，但这个策略会奏效：

```
 class Event
  include Mongoid::Document

  validates_presence_of :title
  field :title, type: String
  field :description, type: String
  field :schedule

  before_save do
    write_attribute(:schedule, @schedule.to_yaml)
  end

  def schedule=(s)
    @schedule = s
  end

  def schedule
    @schedule ||= begin
      yaml = read_attribute(:schedule)
      yaml ? IceCube::Schedule.from_yaml(yaml) : IceCube::Schedule.new
    end
  end
end 

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T15:54:02.860

Roman 的解决方案需要一个额外的步骤来序列化重复规则。添加规则后，您需要将实例变量 @schedule 写入属性哈希。

在我的代码中，它使用了这样的东西：

```
before_save :serialize_schedule

def schedule=(s)
  super(s.to_yaml) if s.is_a?(IceCube::Schedule)
end

def schedule
  yaml = super()
  if yaml.nil?
    @schedule ||= IceCube::Schedule.new(Time.at(0))
  else
    @schedule ||= Schedule.from_yaml(yaml)
  end
end

def serialize_schedule
  self.schedule = schedule
end 
```

当我从表单中发送参数哈希时：

```
def repeats_weekly_days=(day_array)
  schedule.add_recurrence_rule IceCube::Rule.weekly.day(day_array.map(&:to_sym))
  serialize_schedule
end 
```

以下测试通过：

```
describe "#assign_attributes" do
  let(:params) {{start_time: "08:00", end_time: "12:00", repeats_weekly_days: ["monday", "thursday"]}}
  it "expect schedule to repeat on Mondays and Thursdays" do
    jc.assign_attributes(params)
    expect(jc.read_attribute(:schedule)).to include('WeeklyRule')
    expect(jc.schedule.recurrence_rules[0].to_s).to eq('Weekly on Mondays and Thursdays')
  end
end 
```

这不是一个特别优雅的解决方案，但它确实有效。

# r - 如何向 gWidgets GUI 添加旋转轮动画

> ID：12819232
> 
> 赞同：1
> 
> 时间：2012-10-10T12:21:05.513
> 
> 标签：r, gwidgets

我刚刚开始在 R 中制作 GUI，作为第一步，我正在使用 gWidgets，然后再涉足一些较低级别的框架......

我想添加一个旋转的轮子动画来显示一个进程正在运行。虽然 gWidgets 似乎不支持这一点，但 RGtk2 支持。

所以我的基本问题是，当 gWidgets 不“本机”支持小部件时，如何将 RGtk2 小部件添加到 gWidgets GUI。另外，添加后如何操作小部件...

提前致谢

托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:35:02.460

以下是在 gWidgets 或 gWidgets2（在 github 上）中的实现方式：

```
library(gWidgets) ## or gWidgets2
options(guiToolkit="RGtk2")
library(RGtk2)    ## needed

w <- gwindow()
g <- ggroup(cont=w)
g1 <- ggroup(cont=g) ## holds spinner

b1 <- gbutton("stop spinner", cont=g, handler=function(h,...) {
  spin$stop()
})
b2 <- gbutton("remove spinner", cont=g, handler=function(...) {
  delete(g, g1)
})

spin <- gtkSpinner()
spin$start()

## pack into g1 box container:
## in gWidgets2 can do this: add(g1, spin)
## for gWidgets it can be hacked:
g1@widget@widget$packStart(spin) 
```

在 gWidgets2 中有一个`gprogressbar`小部件可以做类似的事情，但不是这个。

# php - jQuery 将 PHP 值发布到 PHP 文件并继续

> ID：12819235
> 
> 赞同：0
> 
> 时间：2012-10-10T12:21:07.870
> 
> 标签：php, jquery, post

我正在使用上传脚本，允许使用“数据”值将附加信息发布到“upload.php”文件。说明如下：

数据字符串，函数，对象''

如果作为字符串给出，则用于将 GET 中的附加参数发送到 php 脚本。如果作为函数给出，则必须返回一个 url 格式的字符串。此函数在开始上传事件时执行，因此在按下上传按钮时创建数据。如果作为对象给出，则必须具有此格式 {getvar:value, anothergetvar:value....}。这类似于 jQuery Ajax 数据。

我有以下代码：

```
<script type="text/javascript">
$('#uploader_div').ajaxupload({
url:'upload.php',
language: 'de_DE',
data: "<?php echo $_GET['id']?>"
});
</script> 
```

在我的源代码中，该值被正确解析并吐出“55”，这是正确的，因为我在客户 ID 55 的个人资料页面上。现在我想在我使用的“upload.php”中获取数据值：

$data = $_GET['data'] print_r($data)

它不返回任何东西。

我该怎么做才能使值正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:48:32.983

我想 $.ajaxupload 的工作方式类似于 $.ajax，这意味着您以错误的方式发送数据。应该这样做：

```
data: {
    id: 13
} 
```

您可以在 PHP 脚本中获取这样的数据：

```
$id = $_GET['id']; 
```

或者使用 POST，如果您使用 POST。

# flash - 在 css 中设置 Flash 对象的样式

> ID：12819240
> 
> 赞同：0
> 
> 时间：2012-10-10T12:21:35.127
> 
> 标签：flash, object, css

我在页面中有这个对象：

```
<object  id="iembedflash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="100%" height="500"> '+
'<param name="movie" value="<?php echo base_static_url(); ?>vendor/flash/camcanvas.swf" />'+
'<param name="quality" value="high" />'+
'<param name="allowScriptAccess" value="always" />'+
'<embed  allowScriptAccess="always"  id="embedflash" src="<?php echo base_static_url(); ?>vendor/flash/camcanvas.swf" quality="high" width="100%" height="500" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" mayscript="true"  />'+
'</object> 
```

我想通过`css`. 更具体地说，我想把它放在 a 下`div`，然后`div`用一些`border-radius box shadow`.

我怎样才能把它放在 main 下`div`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:29:50.030

我猜这个代码是使用 Javascript 插入的......

您的格式不正确，它会给出错误。我认为你错误地复制了代码......这应该做你需要的任何方式：

```
'<div class="object-container"><object  id="iembedflash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="100%" height="500"> '+
'<param name="movie" value="<?php echo base_static_url(); ?>vendor/flash/camcanvas.swf" />'+
'<param name="quality" value="high" />'+
'<param name="allowScriptAccess" value="always" />'+
'<embed  allowScriptAccess="always"  id="embedflash" src="<?php echo base_static_url(); ?>vendor/flash/camcanvas.swf" quality="high" width="100%" height="500" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" mayscript="true"  />'+
'</object></div>' 
```

# javascript - 在 sinon.js 中存根和/或模拟一个类？

> ID：12819242
> 
> 赞同：17
> 
> 时间：2012-10-10T12:21:44.733
> 
> 标签：javascript, node.js, sinon

我为我的应用程序创建了一个数据库包装器，如下所示。为了测试它，我显然想替换实际的数据库库。我可以创建一个新类来模拟该`query`方法并在那里捕获所有输入，但使用`sinon.js`似乎更合适，但我将如何使用它？
是我应该使用`mock`的`stub`功能吗？`sinon.js`

```
wrapper = (function() {

  function wrapper() {}

  wrapper.db = require("database");

  wrapper.prototype.insertUser = function(doc) {
    return this.db.query("INSERT INTO USERS...");
  };

  return wrapper;

})(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-10-28T04:53:37.947

首先，我会稍微修改您的类定义（大写类名并修复数据库分配）：

```
var Wrapper = (function() {

  function Wrapper() {
    this.db = require("database");
  }

  Wrapper.prototype.insertUser = function(doc) {
    return this.db.query("INSERT INTO USERS...");
  };

  return Wrapper;

})(); 
```

存根整个班级：

```
var WrapperStub = sinon.spy(function() {
  return sinon.createStubInstance(Wrapper);
}); 
```

`sinon.createStubInstance`将创建一个 Wrapper 实例，其中每个方法都是一个存根。`sinon.spy`将允许我们监视类实例化。

所以你可以像这样锻炼它：

```
// verify instantiation
var wrapper = new WrapperStub();
expect(WrapperStub).to.have.been.calledWithNew;

// verify method stub
wrapper.insertUser.returns('data');
expect(wrapper.insertUser()).to.equal('data');
expect(wrapper.insertUser).to.have.been.calledOnce; 
```

（断言使用[chai](http://chaijs.com/)和[sinon-chai](https://github.com/domenic/sinon-chai)）

我说只是“练习一下”，因为这个代码片段不是实际的单元测试。实例化和方法调用将由您的测试对象进行。

现在，如果你想模拟一个由 require() 注入的依赖项——比如`db = require('database')`在你的例子中——你可以尝试一个测试工具，比如[Jest](https://facebook.github.io/jest/docs/automatic-mocking.html)（但不使用 sinon）或[我](https://www.npmjs.com/package/sinonquire)创建的受**Jest**启发但使用它的sinonquire sinon 加上你最喜欢的测试工具（我的是**mocha**）。在内部，**sinonquire**使用与上述相同的技术来组合`sinon.spy`和`sinon.createStubInstance`存根一个类。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T12:30:42.490

你可以同时使用这两者。

**模拟**有一个预期的有序行为，如果没有正确遵循，会给你一个错误。

**Stub**类似于 mock，但没有顺序，因此您可以按照自己的方式调用方法。根据我的经验，您几乎不需要模拟。

它们都将用你的方法替换一个空方法，或者如果你通过了一个闭包。它会是这样的：

```
stub = sinon.stub(wrapper , 'insertUser ', function () { return true; }); 
```

然后添加期望行为来检查它是否确实发生了。

我喜欢使用[Jasmine](http://pivotal.github.com/jasmine/)和[Jasmine-Sinon](https://github.com/froots/jasmine-sinon)来检查测试。

# java - 用于 EC2 实例中的会话管理的 Memcached 会话管理器

> ID：12819247
> 
> 赞同：1
> 
> 时间：2012-10-10T12:21:53.577
> 
> 标签：java, amazon-ec2, amazon-web-services, memcached, amazon-elasticache

我是 AWS 新手。谁能告诉我如何将 memcached 会话管理器与安装了 tomcat 以处理会话数据的 EC2 实例一起使用？在这种情况下如何使用 elasticache？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T04:03:06.983

[您可以使用以下库http://code.google.com/p/memcached-session-manager/](http://code.google.com/p/memcached-session-manager/)在 EC2 实例上配置自己的 Tomcat

Elásticache 是一个内存缓存，您可以配置 tomcat 来存储和检索会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T06:31:05.017

假设您已经有一个 memcached 应用程序，以下是“开始使用 Amazon ElastiCache”的基本步骤：

[http://docs.amazonwebservices.com/AmazonElastiCache/latest/GettingStartedGuide/Welcome.html](http://docs.amazonwebservices.com/AmazonElastiCache/latest/GettingStartedGuide/Welcome.html)

在这种情况下，Amazon 推荐的方法是使用 Elastic Beanstalk 和 Tomcat 7 来部署您的应用程序，然后根据需要使用 ElastiCache 来扩展会话管理。

# php - 我将如何编写这个 curl 请求

> ID：12819258
> 
> 赞同：2
> 
> 时间：2012-10-10T12:22:42.980
> 
> 标签：php, json, curl

您好，我正在使用 API。在 API 文档中清楚地写道，aAll 数据以 JSON 格式发送和接收，采用 UTF-8 编码。然后他们给了一行

```
$ curl -­-­user name:password https://api.abc.de/erer 
```

我只是想问一下我将如何发送上面提到的 curl 请求？用户名和密码将作为`GET`或?`POST``headers`

我正在使用以下代码，但接收到空数组。文档说它必须收到一些错误或成功代码。

```
$ch = curl_init();
            $post_data = array('username'=>$_POST['username'],'password'=>$_POST['password']);
            $post_data = http_build_query($post_data);
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
            curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
            curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
            curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
            curl_setopt($ch, CURLOPT_USERPWD, 'username:password');

            $result = curl_exec($ch);
            curl_close($ch);

            $result = json_decode($result);
            $result = (array) $result;
            echo "<pre>";
            print_r($result);
            echo "</pre>";
            die(); 
```

我已经打印出响应`curl_get_info`是

```
Array
(
[url] => https://api.abc.de/erer
[content_type] => 
[http_code] => 0
[header_size] => 0
[request_size] => 0
[filetime] => -1
[ssl_verify_result] => 0
[redirect_count] => 0
[total_time] => 0
[namelookup_time] => 0.618462
[connect_time] => 0
[pretransfer_time] => 0
[size_upload] => 0
[size_download] => 0
[speed_download] => 0
[speed_upload] => 0
[download_content_length] => 0
[upload_content_length] => 0
[starttransfer_time] => 0
[redirect_time] => 0
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:09:19.917

鉴于提供的信息，假设您正在发出 POST 请求，这样的事情应该可以工作：

```
$post_data = http_build_query( $post_array );
$url = 'https://api.abc.de/erer';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERPWD, 'name:password');
$data = curl_exec( );
curl_close($ch); 
```

$post_data 应该包含要发送的键 => 值的关联数组。我相信你的用户：密码是在标题中发送的，但 PHP.net 没有说。

[http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:10:10.517

看看给定的例子..

```
$token = "username:password";
$url = "https://api.abc.de/erer";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HTTPGET, true);
curl_setopt($ch, CURLOPT_USERPWD, $token);
/*curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);*/                    
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

if( curl_exec($ch) === false ){
    echo curl_error($ch);
}else{
    $data = curl_exec($ch);
}
curl_close($ch);

echo "<pre>";
print_r($data);
echo "</pre>"; 
```

# android - 适用于 Android 的 Mobile Express Checkout Library 是否可以在平板电脑上使用？

> ID：12819259
> 
> 赞同：1
> 
> 时间：2012-10-10T12:22:44.127
> 
> 标签：android, paypal, express-checkout

我尝试将 MECL 用于 Android。Pizza 应用在 Android 手机上运行成功，但在 Xoom 和 Kindle Fire 上运行失败。这是错误信息：

```
10-10 19:08:33.538: W/System.err(8731): java.lang.NullPointerException
10-10 19:08:33.538: W/System.err(8731):     at libcore.net.UriCodec.encode(UriCodec.java:132)
10-10 19:08:33.538: W/System.err(8731):     at java.net.URLEncoder.encode(URLEncoder.java:57)
10-10 19:08:33.538: W/System.err(8731):     at com.paypal.android.a.c.g(Unknown Source)
10-10 19:08:33.538: W/System.err(8731):     at com.paypal.android.a.c.e(Unknown Source)
10-10 19:08:33.538: W/System.err(8731):     at com.paypal.android.a.c.b(Unknown Source)
10-10 19:08:33.538: W/System.err(8731):     at com.paypal.android.a.d.run(Unknown Source)
10-10 19:08:34.984: E/Error(8731): Authentication failed, button not enabled.
10-10 19:08:34.991: W/System.err(8731): java.lang.NullPointerException
10-10 19:08:34.991: W/System.err(8731):     at com.paypal.android.a.c.a(Unknown Source)
10-10 19:08:34.991: W/System.err(8731):     at com.paypal.android.a.c.e(Unknown Source)
10-10 19:08:34.991: W/System.err(8731):     at com.paypal.android.a.c.b(Unknown Source)
10-10 19:08:34.991: W/System.err(8731):     at com.paypal.android.a.d.run(Unknown Source) 
```

*   **有人在 Android 平板电脑上使用 Pizza 应用取得成功吗？**
*   如何修复这个错误？

提前致谢！

# perl - Perl 使用 HTTP::Request 上传文件

> ID：12819260
> 
> 赞同：4
> 
> 时间：2012-10-10T12:22:46.117
> 
> 标签：perl, post

我正在使用现有框架来自动化一些 api。该框架使用 HTTP::Request 模块。我需要编写一个脚本来上传文件。我可以使用 HTTP::Request::Common 模块做到这一点，但**不能**使用 Http::Request 模块。但我只需要使用 Http::Request 来完成这项工作。下面的代码片段：

**使用 HTTP::Request::Common\This Works**

```
 $request = POST $uri,
    Content_Type => 'multipart/form-data',
    Content => [
    file => [$file]
    ]
    ;
    my $results=$ua->request($request ) ; 
```

使用 HTTP::Request\This 不起作用，我收到错误丢失文件

```
 my $req = HTTP::Request->new("POST", $uri );
    $req->header(Content_Type => "form-data");
    $req->content('file=>$file');
    my $res = $ua->request($req); 
```

有人可以告诉我我在上面的代码中做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T13:37:42.437

不幸的是，该`POST`方法中发生的不仅仅是包装`HTTP::Request`对象的构造函数（参见[此处](https://metacpan.org/source/GAAS/HTTP-Message-6.04/lib/HTTP/Request/Common.pm#L25)）。至少包括以下内容（通过快速扫描代码）：

*   将 Content-Type 标头修改为`multipart/form-data`随机`boundary`以指示文件数据在请求中的开始位置
*   将 Content-Disposition 标头设置为适当的值
*   读取文件并将文件内容存储在请求正文中

我强烈建议不要尝试手动执行上述所有操作，但很难知道您的确切限制以及为什么不能使用`HTTP::Request::Common`.

# symfony - 带有“url”函数的 Twig_Error_Runtime 异常

> ID：12819264
> 
> 赞同：5
> 
> 时间：2012-10-10T12:23:00.207
> 
> 标签：symfony, twig, symfony-2.1

将树枝更新到> 1.7之后

代码`<a href="{{ url('article', { 'articleId':article.id }) }}">`原因：

`Twig_Error_Runtime: An exception has been thrown during the compilation of a template ("Catchable Fatal Error: Argument 2 passed to Twig_Environment::addFunction() must implement interface Twig_FunctionInterface, instance of Twig_Filter_Function given`

1.7 - 一切正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:16:31.027

您必须使用`path(...)`而不是`url(...)`.
论据是一样的。

我想从 1.7 到 > 1.7 这个功能已经过时了，被新的取代了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T07:44:04.320

问题不在于`url`或`path`功能。看起来您正在使用`Twig_Filter_Function`而不是`Twig_Function_Function`定义自定义函数。检查您的自定义树枝扩展。

# javascript - 使用 node-inspector 和 forever.js 调试 node.js

> ID：12819268
> 
> 赞同：12
> 
> 时间：2012-10-10T12:23:11.607
> 
> 标签：javascript, node.js, forever, node-inspector

使用 forever.js 时，我无法调试 node.js 服务器。不可能吗？

```
Exampel: forever start --debug server.js 
```

1) 启动 server.js 正常，但我无法使用节点检查器进行调试。

2）forever.js as：`forever start server.js` 不重新启动服务器——这是forever的核心服务吗？

我正在使用 Mac。

感谢和问候

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-14T17:59:17.847

> 启动 server.js 正常，但我无法使用节点检查器进行调试。

Forever 不支持开箱即用的调试模式。您可以通过永远要求启动自定义命令来解决它：

```
$ forever -c 'node --debug' server.js 
```

> 不重新启动服务器——这是永远的核心服务吗？

我假设您想在更改源文件后重新启动服务器。我对forever不太熟悉，但是我会说您忘记`-w`在命令行中添加选项？

```
 -w, --watch      Watch for file changes 
```

要调试进程并使其自动重新启动，请运行

```
$ forever -w -c 'node --debug' server.js 
```

另请参阅此节点检查器问题：[#196](https://github.com/node-inspector/node-inspector/issues/196)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-13T11:28:21.260

使用 Chrome 在 Windows 上完成说明

在第一次终端运行

```
forever -w -c "node --debug" server.js 
```

在第二次终端运行

```
node-inspector 
```

导航到本地主机：8080

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-12-25T13:12:36.127

## 在 chrome 中使用 v8 进行调试

在终端写：

```
node inspect server.js 
```

导航到`chrome://inspect` 远程目标检查

# php - 如何将值从 ScriptA 传递到 ScriptB 中的类？

> ID：12819276
> 
> 赞同：0
> 
> 时间：2012-10-10T12:23:37.463
> 
> 标签：php

如何通过包含类文件将值传递给我的类并将其用作`$var`PHP5 中的该类内部？

到目前为止的代码：

```
 // ScriptA

    $cacheF=test;

    include("ScriptB_MyClass.php");

    $one = new MyClass(array('$cacheF'));
    ------------

    // ScripB_MyClass.php

    class MyClass {

        var $cacheF;

        function __construct() {
           $this->cacheF = $cacheF;
           return $this->cacheF = $cacheF; 
        }

        $the_cache_path="/home/$cacheF/myfile.txt";

        // execute other functions

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:33:36.800

之前，我建议你仔细阅读[http://php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php)。

然而，从这里开始……

```
// Something.php
<?php

require "MyClass.php";

$cacheFolder = "test";

$one = new MyClass($cacheFolder);
$one->doSomething();

// MyClass.php
<?php

class MyClass {

    protected $_cacheFolder;
    protected $_cachePath;

    public function __construct($_folder) {
        $this->_cacheFolder = $_folder;
        $this->_cachePath = '/home/' . $this->_cacheFolder . '/myfile.txt';
    }

    public function doSomething() {
        print $this->_cacheFolder . PHP_EOL . $this->_cachePath;
    }
} 
```

# coffeescript - 如何使用咖啡脚本从对象返回 n 值

> ID：12819277
> 
> 赞同：0
> 
> 时间：2012-10-10T12:23:40.563
> 
> 标签：coffeescript

昨天@SuperSkunk 为我解决了这个小问题：[如何从对象返回设置](https://stackoverflow.com/questions/12797014/how-to-return-settings-from-an-object)

我有这个设置来从存储的设置中检索值：

```
myProject =

 settings:
  value1: one
  value2: two
  value3: three

 getSetting: (key) ->
  @settings[key] 
```

所以当我打电话时`getSetting('value1')`我得到`one`。

如何更改代码以传递 n-Arguments 以获取 n-Values？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:35:48.607

您可以使用 splat 和列表推导：

```
getSetting: (keys...) ->
   (@settings[key] for key in keys) 
```

现在，如果您调用`getSettings 'value1', 'value2'`结果是数组`['one', 'two']`。

“按原样返回”可能只是在接收值时解构

所以在你做的调用方上面举个例子

```
[value1, value2] = getSettings "value1", "value2" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T12:31:26.033

要使用以下内容，请包含 underscore.js (http://underscorejs.org) 或咖啡脚本变体 (http://coffeescript.org/documentation/docs/underscore.html)

```
`getSettings: (keys) ->
  _.map(_.flatten([keys]), (key) -> @settings(key))` 
```

`以上应该与传入的数组或上面的单个值一起使用..`

# html - 随页面大小展开或折叠的图像

> ID：12819278
> 
> 赞同：0
> 
> 时间：2012-10-10T12:23:42.733
> 
> 标签：html, css

我在页面上有一个静态的左侧导航，但该页面的内容可能会发生变化，这往往会留下相当多的空白。我想在导航下方放置一个图像，该图像会随着 oage 变大而显示，但如果页面小到足以显示导航下方没有任何内容，则不会。

该页面在表格中格式化（我知道但我没有做到），因此左侧导航会随内容扩展。

# css - 全角页脚不会粘在底部

> ID：12819287
> 
> 赞同：2
> 
> 时间：2012-10-10T12:24:21.083
> 
> 标签：css, magento, sticky-footer

我没有设法将我的全宽页脚粘贴到我的网页底部。当页脚上方的主要内容低于一定高度时，页脚下方有一个空白区域。我尝试使用各种解决方案，例如以下 css 代码：

```
 html,body { margin:0; padding:0;min-height:100%;position:relative;}
 .wrapper { min-height:100%;   position:relative;_height:100% /* _height = for ie */  }
 .page { padding-bottom:400px; height:100%; }
 .footer { padding:0;margin:0 position:absolute; left:0; bottom:0; width:100%; height:400px; } 
```

页脚仍然会粘在主要内容的底部，而不是页面的底部。我认为我的 css 没有任何问题。

例如：[http ://hertog-hengelsport.nl.testbyte.nl/checkout/cart/](http://hertog-hengelsport.nl.testbyte.nl/checkout/cart/)

我希望有人能指出我的解决方案！

非常感谢！

网址：[http](http://hertog-hengelsport.nl.testbyte.nl) ://hertog-hengelsport.nl.testbyte.nl 平台：Magento 1.7.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:27:44.060

使用“位置：固定；” 而不是绝对的页脚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:43:57.053

.wrapper is position relative, that makes any child of it relative to the div and not to the page.

# java - 如何获取windows字体的目录？

> ID：12819304
> 
> 赞同：0
> 
> 时间：2012-10-10T12:25:09.503
> 
> 标签：java, windows, directory

我想创建一个检索 windows\system\fonts 目录的函数。它不能是硬编码的。

我听说有类似的东西：

```
%WINDIR%/fonts 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T12:26:52.840

你可以使用`sun.font.FontManager`：

```
System.out.println( FontManager.getFontPath( true ) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T12:27:34.770

您可以使用[System.getEnv(...)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#getenv%28java.lang.String%29)命令

就像是

```
String path = System.getEnv("WINDIR");
File fontDirectory = new File(path, "Fonts"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-05T10:30:02.550

在 java 1.7 中，FontManager 已停止使用。因此，如果您使用的是 Java 1.7，则可以使用以下内容：-

`String systemRoot = System.getenv().get("SystemRoot");`

# java - 错误 404：在下面的示例中，相对路径没有在 resteasy webservices 中找到我的@path 参数

> ID：12819308
> 
> 赞同：1
> 
> 时间：2012-10-10T12:25:27.183
> 
> 标签：java, web-services, resteasy

我有下面的项目类别

```
 @XmlRootElement(name = "item")  public class Item {

private String description;
private long price;//setter getter method } 
```

Ans ItemList 类

```
@XmlRootElement(name = "listing") @XmlAccessorType(XmlAccessType.FIELD) @NoJackson
public class ItemList {
private List<Item> items;// getter mothod } 
```

项目的服务类别

```
@Path("user")   public class ItemService extends Application {
@GET
@Path("itemList")
@Produces("application/xml")
 public ItemList  getCollItems(@Context HttpServletRequest request)  {  
        ArrayList list = new ArrayList();  
        Item item1 = new Item("computer",2500);  
        Item item2 = new Item("chair",100);  
        Item item3 = new Item("table",200);  

        list.add(item1);  
        list.add(item2);  
        list.add(item3);  

        return new ItemList(list);

} 
```

}

Web.xml

```
<context-param>
<param-name>javax.ws.rs.core.Application</param-name>
  <param-value>com.service.ItemService</param-value>
</context-param>
<listener>
    <listener-class>
org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap
    </listener-class>
</listener>
<servlet>
    <servlet-name>resteasy-servlet</servlet-name>
    <servlet-class>
        org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
    </servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>resteasy-servlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

**听着，我写了 url :-** localhost:port/appNAME/ **rest/user/itemList**它不能正常工作，但它会给出错误**HTTP Status 404 - /rest/user/itemList**

请告诉我我真正缺少什么......？

# sql - 将数据库表从 SQL Server 复制到 Oracle

> ID：12819313
> 
> 赞同：0
> 
> 时间：2012-10-10T12:25:40.540
> 
> 标签：sql, oracle, sql-server-2008

> **可能重复：**
> [反复将数据从 SQL Server 移动到 Oracle](https://stackoverflow.com/questions/571051/moving-data-from-sql-server-to-oracle-repeatedly)

是否可以将表从 SQL Server 复制到 Oracle 中的新表？

我很确定这是不可能的，但我想要专家确认以及它是否存在。

```
CREATE TABLE `backup_db.backup_table` 
  SELECT * FROM `live_db.live_table`; 
```

**编辑**

为了更清楚，我需要每天将这张表从 SQL Server 复制到 Oracle。

我知道它不优雅，但我别无选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:50:34.457

不是直接的，但您可能需要考虑设置 SQL Server 代理作业以将表转储到一个平面文件中，然后 Oracle 可以在文件系统上访问该文件。然后 Oracle 可以将其作为外部表进行访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:27:17.163

你可以：

1.  使用 MS SSIS 并使用 SSIS 包及其计划执行（MS SQL Server 代理）将数据从 SQL Server 传输到 Oracle。

2.  为 MS SQL Server 使用 Oracle 透明网关，不要从 MS SQL Server 物理提取数据，而是每次在 Oracle 中需要时从 MS SQL 中选择它。或者，Oracle 每天插入一次以将数据从 MS SQL 传输到 Oracle，仍然使用透明网关和链接的 MS SQL Server：

    TRUNCATE TABLE OracleTable
    INSERT INTO OracleTable SELECT * FROM SQLServerTable@SQLServer
    COMMIT

# bash - 在bash中对变量的值求和

> ID：12819319
> 
> 赞同：0
> 
> 时间：2012-10-10T12:26:13.447
> 
> 标签：bash

我正在尝试获取当前会话中所有进程打开的所有常规文件。我有这个代码

```
while read pid
do

        FILES_ACTUAL=$(lsof -p $pid | grep REG | wc -l)   

done < <(ps -o pid,tt -u $USER | grep $CURRENT_TERMINAL | awk '{print $1}')

echo $FILES_ACTUAL 
```

但我不知道如何在此期间加起来变量 $FILES_ACTUAL.. 我尝试使用 awk 命令，但我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:34:09.307

您可以通过将语句括在 (()) 中来执行 bash 算术：

```
NEW_FILES=$(lsof -p $pid | grep REG | wc -l)
((FILES_ACTUAL+=NEW_FILES)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-06T18:26:22.493

还有一个名为的命令`expr`，它对整数进行简单的算术运算，可以像这样使用：

```
expr $VAR1 + $VAR2 
```

# openjpa - 从 openJPA 查询创建 155000 个实体

> ID：12819322
> 
> 赞同：0
> 
> 时间：2012-10-10T12:26:17.327
> 
> 标签：openjpa, large-data-volumes

我有一个查询，在最坏的情况下会创建超过 15 万个实体。可能有 300,000k 个实体的上限。我尝试了几种方法将这组数据返回给用户...我只使用 sql Developer 运行查询，它运行时间约为 0.348 秒。所以这不是任何形式的瓶颈。

我像这样创建一个嵌套查询......

```
List<Object[]> ObjList = (List<Object[]>) emf.createNativeQuery(assembleNestedQuery(query2)).getResultList(); 
```

本机查询是这样组装的......

```
String query2 = assembleQuery(organizationIDs, 2);

else if (type == 4){ 
    queryBuilder.append("SELECT t0.RESOURCE_ID, t0.FIRST_NAME,  t0.MIDDLE_NAME, t0.LAST_NAME FROM EPCD13.Provider t0");
    if(typeArgs.length > 0){ 
        queryBuilder.append("  WHERE t0.RESOURCE_ID IN (");             
        for(int i = 0 ; i <= typeArgs.length - 1; i++){
        if(i != typeArgs.length -1)
            queryBuilder.append(typeArgs[i] +", ");
        else
            queryBuilder.append(typeArgs[i] +" ");
        if((i % 1000 == 0) && (i != 0)){
            queryBuilder.append(") OR IN (");
        }
    }
    queryBuilder.append(")");               
            }
    }

private String assembleNestedQuery(String typeArgs2){
        StringBuilder queryBuilder = new StringBuilder();
        queryBuilder.append("SELECT t0.RESOURCE_ID, t0.FIRST_NAME,  t0.MIDDLE_NAME, t0.LAST_NAME FROM EPCD13.Provider t0");
        queryBuilder.append("  WHERE t0.RESOURCE_ID IN (");
        queryBuilder.append(typeArgs2);
        queryBuilder.append(")");
        return queryBuilder.toString();
    } 
```

上面的代码基本上组装了这个查询......

```
SELECT t0.RESOURCE_ID, t0.FIRST_NAME,  t0.MIDDLE_NAME, t0.LAST_NAME FROM EPCD13.Provider t0  WHERE t0.RESOURCE_ID IN (SELECT DISTINCT d.RESOURCE_ID FROM EPCD13.RESOURCES d WHERE d.ORGANIZATION_ID in (...)) 
```

所以嵌套查询基本上是动态创建的……我运行的查询返回了大约 155K 条记录。现在我基本上运行下面的代码将结果转换为 Provider 对象......

```
List<Provider> provList = new ArrayList<Provider>(); 
for(Object[] obj: ObjList)
{
    provList.add(this.GetProviderFromObj(obj));
} 
```

这就是发生异常的地方。JPA 处理的数据集是否太大？我可以通过一些简单的 Java JDBC 连接和一些非常简单的基本 Java 对象来做到这一点。但是，这组数据是否太大而无法使用？

谢谢。

**更新：我得到的例外**

```
java.lang.OutOfMemoryError: caused by: java.lang.OutOfMemoryError 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:15:02.110

听起来您是在尝试使用对 JVM 来说太大的数据集。您可以将较少数量的对象拉入内存，也可以增加最大堆。

我还建议查看[大型结果集](http://openjpa.apache.org/builds/latest/docs/docbook/manual.html#ref_guide_dbsetup_lrs)。

# c# - 是否有任何基于 excel 文件模板的 excel 生成器？

> ID：12819323
> 
> 赞同：0
> 
> 时间：2012-10-10T12:26:18.540
> 
> 标签：c#, .net, excel

我记得我见过一个生成 excel 文件的项目，但它是基于模板的。我的意思是它使用了一个已经有一个结构作为模板的excel文件。

你知道这样的 .net 库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:34:00.440

您可以轻松读取现有的 excel 文件，对其进行修改并将修改后的版本写入同一文件或使用[NPOI](http://npoi.codeplex.com/)或[EPPlus](http://epplus.codeplex.com/)等库的新文件。我们已经成功地使用了这两种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:24:41.260

查看[PowerTools for Open XML](http://powertools.codeplex.com/ "用于 Open XML 的 PowerTools")，[在 excel 中创建数据透视表，](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2012/01/24/creating-pivot-tables-part-2.aspx "Excel中的数据透视表") 或者您可以创建 excel 文件并使用 Open xml 生产力工具反映它，然后使用生成的代码使用 Open XML SDK [The Open XML SDK Productivity Tool创建文件](http://www.youtube.com/watch?v=KSSMLR19JWA "Open XML SDK 生产力工具")

# java - smartgwt - 两个相邻面板（vlayouts）不可调整大小

> ID：12819325
> 
> 赞同：0
> 
> 时间：2012-10-10T12:26:29.463
> 
> 标签：java, eclipse, web, resize, smartgwt

我有一个 gwt 项目，其中包含两个 Vlayouts（dialogVLeftPanel，dialogVRightPanel）。该 Vlayouts 包含一个树形网格，如下面的代码所示：

```
/////////// drzewo użytkowników
        userViewTree = new Tree();  
        userViewTree.setModelType(TreeModelType.PARENT);  
        userViewTree.setIdField("UserViewId");  
        userViewTree.setParentIdField("ReportsTo");  
        userViewTree.setNameProperty("Użytkownicy");  
        userViewTree.setRootValue(1);  
        userViewTree.setData(userViewData);  

        TreeGrid userViewTreeGrid = new TreeGrid();  
        userViewTreeGrid.setHeight(600);
        userViewTreeGrid.setWidth(185); 
        userViewTreeGrid.setShowOpenIcons(false);  
        userViewTreeGrid.setShowDropIcons(false);  
        userViewTreeGrid.setClosedIconSuffix("");  
        userViewTreeGrid.setFields(new TreeGridField("Użytkownicy"));  
        userViewTreeGrid.setData(userViewTree);
        userViewTreeGrid.getData().openAll();  
        dialogVLeftPanel.addMember(userViewTreeGrid);

        ///////////////////////////////////////////////////
        //////////////drzewo uprawnień/////////////////////
        ///////////////////////////////////////////////////
        Tree userTree = new Tree();  
        userTree.setModelType(TreeModelType.PARENT);  
        userTree.setRootValue(1);  
        userTree.setNameProperty("Uprawnienia");  
        userTree.setIdField("userId");  
        userTree.setParentIdField("ReportsTo");  
        userTree.setOpenProperty("isOpen");  
        userTree.setData(userData);  

        final TreeGrid userTreeGrid = new TreeGrid();  
        userTreeGrid.setHeight(600);  
        userTreeGrid.setWidth(630);
        userTreeGrid.setShowOpenIcons(false);  
        userTreeGrid.setShowDropIcons(false);  
        userTreeGrid.setClosedIconSuffix("");  
        userTreeGrid.setData(userTree);  
        userTreeGrid.setSelectionAppearance(SelectionAppearance.CHECKBOX);  
        userTreeGrid.setFields(new TreeGridField("Uprawnienia"));  
        userTreeGrid.setShowSelectedStyle(false);  
        userTreeGrid.setShowPartialSelection(true);  
        userTreeGrid.setCascadeSelection(true);          
        dialogVRightPanel.addMember(userTreeGrid); 
```

我想在 Vlayouts 之间放置一个可抵抗的栏，因为我想在我想做的时候改变两个宽度。当我输入该代码时：

userTreeGrid.setShowResizeBar(true);
调整大小栏是可见的，但它在 Vlayout 的底部，只能缩短面板。如果我想让面板更宽 - 它不起作用。我该如何解决我的问题？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:10:38.580

您已经设置了两个`VLayout`，因此您需要`setShowResizeBar(true)`在您的左侧`VLayout`而不是您的左侧应用，`TreeGrid`因为您真正想要的是能够调整容器的大小。

# java - axis2：必须指定内容长度

> ID：12819328
> 
> 赞同：0
> 
> 时间：2012-10-10T12:26:41.573
> 
> 标签：java, axis2, webservice-client

我正在使用axis2 编写一个SOAP 服务客户端。我用 wsdl2java 生成了客户端代码，然后我尝试

```
Request req = new Request();
req.setParameter("XXX");

ServiceStub stub = new ServiceStub();                                     
stub.remoteService(req); 
```

在运行时，我得到一个`AxisFault`：`Content length must be specified`

知道出了什么问题或如何指定内容长度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:07:38.487

好的，我终于明白了。据此，[这](http://www.mail-archive.com/axis-user@ws.apache.org/msg23935.html)是一个众所周知的轴问题。

使用axis2，我将以下内容添加到我的服务存根中

```
_operationClient.getOptions().setProperty(HTTPConstants.CHUNKED, false); 
```

效果很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:39:53.440

如果您默认禁用分块，我相信 Axis2 将在 HTTP 标头中包含内容长度值

根据[XML RPC 规范](http://xmlrpc.scripting.com/spec.html)：

> ## 标头要求
> 
> 未指定标头第一行中 URI 的格式。例如，如果服务器只处理 XML-RPC 调用，它可以是空的，一个单斜杠。但是，如果服务器正在处理混合传入的 HTTP 请求，我们允许 URI 帮助将请求路由到处理 XML-RPC 请求的代码。（在示例中，URI 是 /RPC2，告诉服务器将请求路由到“RPC2”响应者。）
> 
> 必须指定用户代理和主机。
> 
> 内容类型是文本/xml。
> 
> **必须指定 Content-Length 并且必须是正确**的。

# python - 由于 pysvn 的动态导入，Eclipse PyDev 发现不存在的错误

> ID：12819329
> 
> 赞同：3
> 
> 时间：2012-10-10T12:26:45.230
> 
> 标签：python, eclipse, pydev, pysvn

我`pysvn`用作 Eclipse PyDev 项目的一部分。以下代码导致 PyDev 抱怨：

```
import pysvn
pysvn.ClientError
#     ~~~~~~~~~~~ <= Undefined variable from import: ClientError 
```

但它运行得很好，这很有效：

```
>>> import pysvn
>>> pysvn.ClientError
<class 'pysvn._pysvn_2_7.ClientError'> 
```

我很确定原因是以下代码[`pysvn.py`](http://pysvn.tigris.org/source/browse/pysvn/trunk/pysvn/Extension/Source/pysvn/__init__.py.template?revision=1331&view=markup)：

```
# ...

elif maj_min == (2,7):
    import _pysvn_2_7
    _pysvn = _pysvn_2_7

# ...

for key, value in _pysvn.__dict__.items():
    if not key.startswith( '__' ):
        globals()[ key ] = value 
```

不知何故，这使 PyDev 关闭。（难怪，我在想。他们*必须*这样做吗？）

我意识到我可以在每次出现“未定义的变量”时执行`ctrl`+`1`并选择，但我希望有一个更通用的解决方案。`@UndefinedVariable`

我的问题：我该如何解决这个问题

**1）**最永久的方式（对于每个人，不仅仅是我）

和

**2）**最实用的方法（对我来说）

万一这很重要，我在 Eclipse 3.7.2 上使用 PyDev 2.4.0.2012020116。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:13:13.033

您可能应该将其添加到强制内置程序中，如此[处](http://pydev.org/manual_101_interpreter.html)所述。

如果这不起作用，您可以通过编辑器>代码分析>未定义在 PyDev 的设置中禁用此错误

# android - 查找特定时间的当前位置

> ID：12819336
> 
> 赞同：0
> 
> 时间：2012-10-10T12:27:07.370
> 
> 标签：android

我想通过 GPS 在谷歌地图上找到我当前的位置，但问题是它应该搜索当前位置直到特定的时间量，例如 30 秒，30 秒后 GPS 应该停止搜索或 GPS 应该自动停止。

然后我想将当前位置点保存为经度和经度。我的代码是这样的：-

```
//on create

  ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            if (netInfo != null && netInfo.isConnected()) {

                lmngr = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
                llstnr = new MyLocationListener();

                 Criteria criteria = new Criteria();
                    provider = lmngr.getBestProvider(criteria, false);
                    Location location = lmngr.getLastKnownLocation(provider);

                    if (location != null) {

                        lmngr.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,llstnr);

                      } else {

                          Toast.makeText(getApplicationContext(), "No location found", Toast.LENGTH_LONG).show();
                      }
                //Toast.makeText(getApplicationContext(), "Connection", Toast.LENGTH_LONG).show();  

            }

            else{

                 AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
                 alertDialogBuilder.setTitle("Check Connection");
                 alertDialogBuilder
                .setMessage("No internet Connection Do U Want To Exit ?")
                .setCancelable(false)
                .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {

                        Nissan_Map_Final.this.finish();
                    }
                  })
                .setNegativeButton("No",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        // if this button is clicked, just close
                        // the dialog box and do nothing
                        dialog.cancel();
                    }
                });

                 AlertDialog alertDialog = alertDialogBuilder.create();

                alertDialog.show();

          //     Toast.makeText(getApplicationContext(), "No Connection", Toast.LENGTH_LONG).show();
            } 
```

我的位置监听器类：-

公共类 MyLocationListener 实现 LocationListener {

```
 @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub

        GeoPoint p = new GeoPoint((int) (location.getLatitude() * 1E6),(int) (location.getLongitude() * 1E6));
        int cur_lati = (int)location.getLatitude();
        int cur_longi = (int)location.getLongitude();   
        float   accuracy = location.getAccuracy();
        String add = " ";

        p = new GeoPoint((int) (cur_lati * 1E6),(int) (cur_longi * 1E6));
        mc = mapView.getController();
        mc.animateTo(p);
        mc.setZoom(18);

        Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());
        try {

            List<Address> addresses = geoCoder.getFromLocation(
                    p.getLatitudeE6() / 1E6,
                    p.getLongitudeE6() / 1E6, 1);

            if (addresses.size() > 0)
            {

                for (int i=0; i<addresses.get(0).getMaxAddressLineIndex();i++)
                    add += addresses.get(0).getAddressLine(i) ;

            }

        }
        catch (IOException e) {
            e.printStackTrace();
        }

        cur_loc.setText("Your Accuracy: " + accuracy + "\n" + "Address is:" + location.getLatitude() + "" + location.getLongitude());
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub
        lmngr.removeUpdates(llstnr);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:00:23.740

检查这个：

```
package cz.okhelp.timer;

import java.util.Timer;
import java.util.TimerTask;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class TimerActivity extends Activity {
TextView hTextView;
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        hTextView = (TextView)findViewById(R.id.idTextView);
        MyTimerTask myTask = new MyTimerTask();
        Timer myTimer = new Timer();
//        public void schedule (TimerTask task, long delay, long period) 
//        Schedule a task for repeated fixed-delay execution after a specific delay.
//
//        Parameters
//        task  the task to schedule. 
//        delay  amount of time in milliseconds before first execution. 
//        period  amount of time in milliseconds between subsequent executions. 

        myTimer.schedule(myTask, 3000, 1500);        

    }
class MyTimerTask extends TimerTask {
      public void run() {
          // ERROR
         hTextView.setText("Impossible");
         // how update TextView in link below  
                 // http://android.okhelp.cz/timer-task-timertask-run-cancel-android-example/
        System.out.println("");
      }
    }

} 
```

现在自定义您的活动以在特定时间重新加载............

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:32:53.420

您需要使用 Threads 来查找更新到您想要的时间的位置。并且还需要使用变量来跟踪是否找到位置。

# c# - 如何关闭 StreamWriter 对象

> ID：12819337
> 
> 赞同：-1
> 
> 时间：2012-10-10T12:27:07.417
> 
> 标签：c#, sql, c#-4.0, csv, streamwriter

我的申请中有一个问题。我需要从两个 SQL 查询结果创建两个 CSV 文件。我创造了那个。我`StreamWriter`用来将数据写入 CSV 文件。

我的问题是第一个查询结果也写入了第二个文件。我使用`StreamWriter.Close()`并且仍然在输出中看到相同的行为。

```
using (StreamWriter sw = new StreamWriter(strFilePath, false))
{
    foreach (DataRow dr in dt.Rows)
    {
        for (int i = 0; i < iColCount; i++)
        {
        }
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:36:28.230

确保关闭`StreamWriter`（或实际上任何`IDisposable`资源）的最佳方法是`using`在可能的情况下使用该语句。方法如下：

```
using (var writer = new StreamWriter(@"c:\output\file1.csv")) {
    foreach (IDataReader row in myQueryResults) {
        writer.WriteLine("{0},{1},{2}", row.GetString(0), row.GetString(1), row.GetString(2));
    }
} 
```

一旦`using`语句的范围结束，通常或通过异常，它`writer`会自动关闭。

# android - 在片段事务中预加载 XML 动画

> ID：12819339
> 
> 赞同：0
> 
> 时间：2012-10-10T12:27:12.620
> 
> 标签：android, animation, android-fragments

在我的应用程序中，我正在执行以下操作（使用支持库）：

```
FragmentManager fragmentManager = getSupportFragmentManager();
FragmentTransaction transaction = fragmentManager.beginTransaction();
transaction.setCustomAnimations(R.anim.fade_in, R.anim.fade_out);
transaction.replace(R.id.fragment_container, fragment);
transaction.commit(); 
```

动画的`R.anim.fade_in`持续`R.anim.fade_out`时间少于 200 毫秒。

我第一次更改片段时，动画根本不显示。我认为这是由于 XML 膨胀：膨胀 XML 所需的时间大于动画的持续时间。从第二次开始，动画正确显示。

有没有办法预加载 XML 动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:47:42.780

你可以看看[AnimationUtils](http://developer.android.com/reference/android/view/animation/AnimationUtils.html)更准确地说

```
loadAnimation(Context context, int id) 
```

它应该是你需要的。此外，android 已经有用于淡入淡出的动画 android.R.anim.fade_in 和 android.R.anim.fade_out，你应该尝试使用它们，也许它们被证明更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:43:54.510

我自己找到了。`onCreateAnimation()`您必须覆盖`Fragment`. 我是这样做的：

```
@Override
public Animation onCreateAnimation(int transit, boolean enter, int nextAnim) {
    if (enter)
        return mEnterAnimation;
    else
        return mExitAnimation;
}

private static final Animation mEnterAnimation = AnimationUtils
    .loadAnimation(MyApplication.getInstance().getBaseContext(),
    R.anim.frag_fade_in);

private static final Animation mExitAnimation = AnimationUtils
    .loadAnimation(MyApplication.getInstance().getBaseContext(),
    R.anim.frag_fade_out); 
```

请注意，`mEnterAnimation`and`mExitAnimation`字段被声明为静态的。要通过加载动画，`AnimationUtils.loadAnimation()`您需要一个`Context`. `Context`是通过单例获得的`MyApplication`。要创建这样一个单例，只需写入您的`AndroidManifest.xml`：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <application
        android:name=".MyApplication"
        android:label="@string/app_name" >

        <!-- Insert your activities here -->

    </application>

</manifest> 
```

然后将类创建`com.example.app.MyApplication`为单例：

```
public class MyApplication extends Application {
    public static MyApplication getInstance() {
        return mInstance;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        mInstance = this;
    }

    private static MyApplication mInstance;
} 
```

# eclipse - 从 Eclipse 构建脚本以在 cmd 中运行命令

> ID：12819348
> 
> 赞同：1
> 
> 时间：2012-10-10T12:27:39.490
> 
> 标签：eclipse, cmd

我正在使用一组命令以扩展模式构建我的项目以将其部署在 weblogic 中，因此每次我需要转到 cmd 并将目录更改为我的项目目录并运行命令 'client dev fullexpanded' 。

我想制作一个脚本来运行我在eclipse中通过cmd运行的这些命令，所以每次我不必打开cmd并编写这些命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:06:35.880

将脚本添加为外部工具（程序类型），您就可以从工具栏中触发它。 ![酷棒按钮](../Images/482c5e37f27b2f4ce4f5727c596a33a5.png)

# git - 自定义 SSH 端口上的 Gitlab

> ID：12819353
> 
> 赞同：2
> 
> 时间：2012-10-10T12:27:54.413
> 
> 标签：git, ssh, gitlab

我尝试安装 Gitlab，但无法输入自定义 SSH 端口。

已经将 gitlab.yml 中的端口设置为我的自定义端口，并创建了文件

```
/home/gitlab/gitlab/.ssh/config 
```

用我的属性：

```
Host localhost
Port 100001 
```

[如此处](http://www.andmarios.com/en/2012/06/gitlab-on-an-ubuntu-10-04-server-with-apache/)所述。

但它在测试时仍然显示以下消息：

```
bundle exec rake gitlab:app:status RAILS_ENV=production
Starting diagnostic
config/database.yml............exists
config/gitlab.yml............exists
/home/git/repositories/............exists
/home/git/repositories/ is writable?............YES
ssh: connect to host localhost port 22: Connection refused
fatal: The remote end hung up unexpectedly
Can clone gitolite-admin?............YES
UMASK for .gitolite.rc is 0007? ............YES
/home/git/.gitolite/hooks/common/post-receive exists? ............YES

Finished 
```

我无法在 Gitlab 中添加我的公共 ssh 密钥，它显示“GitLab 无法访问您的 Gitolite 系统。”

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:16:38.793

你至少有两个问题。

配置文件的正确路径是/home/gitlab/.ssh/config

您不能使用端口 100001，因为它不存在。端口范围从 1 到 65535，我建议您使用超过 9000 的端口。

# java - 如何打印出一个元素和列表中的所有元素

> ID：12819356
> 
> 赞同：0
> 
> 时间：2012-10-10T12:27:59.147
> 
> 标签：java, bluej

当我尝试运行（使用）最后一种方法时，它开始运行并且永不停止。此外，当我尝试打印出 aJob 时，该元素无法正确打印出。它带有奇怪的字母。我发布了整个课程，因为我猜除了 runJod 和 runAll 方法之外，我在其他地方犯了错误。谁能告诉我我需要做什么来解决这个问题？

导入 java.util.ArrayList；

/** */

公共类作业队列

{ 私有 ArrayListmyJobInQueue; //要完成的工作列表

```
private ArrayList<Job>myFinishedJobs;// a list of compleated job

private int myJobDuration; //duration if one job

private int myTimeLeft;//total time left 
/**
 * Constructor for objects of class JobQueue
 */
 public JobQueue()
{
  myJobInQueue = new ArrayList<Job>();
  myFinishedJobs = new ArrayList<Job>();
  myJobDuration =0; 
  myTimeLeft=0;  
}

/**
 * Return the list of jobs that have not been completed (including the current job).
 */
 public ArrayList<Job> getPendingJobs()
 {
  return myJobInQueue;  
 }

/**
 * Return the list of jobs that have been completed.
 */
 public ArrayList<Job> getCometedJobs()
 {
  return myFinishedJobs;
 } 

/**
 * Return the job at the front of the pending queue, or null if the queue is empty.
 */
 public Job getCurrentJob()
 {
   if(myJobInQueue!=null)
   { 
    Job FirstJobInTheQueue = myJobInQueue.get(0);   
    return FirstJobInTheQueue;
   }
   else
   {
    return null;
   }

 } 

/**
 * Return the amount of time left on the clock (as an integer)
 */
 public int getTimeLeft()//Ok
 {
   return myTimeLeft; 
 }

/**
 * Return the total duration of all the pending jobs(as an integer).
 */

 public int getTotalDuration()
 {
   int myTimeLeft= 0;
   for(int i = 0; i<myJobInQueue.size();i++)
   {
       int num = myJobInQueue.getDuration(i); //I think this line is wrong. 
       myTimeLeft = myTimeLeft + num ;
   }
   return myTimeLeft;
 }

/**
 * Add a Job to the end of the Queue
 */ 
 public void addJob(Job job)
 {   
    if(job!=null)
    {
      myJobInQueue.add(job);
    }
 }

/**
  * Add the specified number of seconds to the clock.
  */
 public void addTime(int seconds)
 {
    if(seconds>0)
    {
      myTimeLeft = myTimeLeft  + seconds;
    }
 }

 /**
  * Run the first job on the queue if there is enough time on the clock and the job queue list is not empty.
  * And move the job to the finished jobs list.
  */

 public void runAJob(){
   if(!myJobInQueue.isEmpty())
   {
        myJobDuration = myJobInQueue.get(0).getDuration();
        if (myJobDuration < myTimeLeft)
        {
            myTimeLeft = myTimeLeft - myJobDuration;
            myFinishedJobs.add(myJobInQueue.get(0));
            System.out.println("A job is running: " + myJobInQueue.get(0).getName());
            myJobInQueue.remove(0);
        }
        else 
        {
            System.out.println("Not enogth running time left, please add time on the clock.");             
        }
   }
   else 
   {
     System.out.println("No pending job on the list.");
   }
}

/**
  * Run all the jobs on the queue in order until it runs out of time.
 */   

public void runAll()
{
  for(int i = 0; myTimeLeft > 0 && myTimeLeft > myJobDuration;i++);
  {
    runJob();

  }
   System.out.println("Job can not be run, not enough time left." );   
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:56:52.867

第 1 点：`myJobInQueue.get(0)` 没有打印正确的值。

如果你`Job`有`toString()`比尔在他的回答中提到的方法，这将打印正确的值。另一种方法是调用 Job 类的 getter 方法，如果有的话

```
myJobInQueue.get(0).getJobName(); 
```

Point2：调试它并查看它的值`myTimeLeft`是否真的在任何时候都低于零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:44:32.703

根据您的评论，该行`System.out.println("Ajob is running"+ myJobInQueue.get(0));`正在打印`Job`返回的对象引用`myJobInQueue.get(0)`。为了使该行打印出有意义的信息，只需确保`Job`有一个`toString`返回`String`描述对象的方法。

我认为您的第二个问题是由低于 0 但不低于 0 的`myTimeLeft`变量引起的。当它在此窗口中时，`myJobDuration`我看不到您在哪里递减。`myTimeLeft`

旁注：所有工作的持续时间都相同吗？如果没有，那么您可能应该使用下一个持续时间`Job`而不是全局`myJobDuration`变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:57:47.167

这个问题对我来说不是太清楚，但是这种场景似乎适合使用**Java 并**发包，尤其是**Executor**相关部分[Java concurrency: Executor Interfaces](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html) 。

我会使用一个带有单线程工作程序的执行器（我突然想到你希望你的作业一个接一个地完成，否则使用更多的线程），以及一个带有要完成的作业数量的 CountDownLatch。在向 ExecutorService 提交作业 Runnables（一旦完成就会减少闩锁）后，我会发出闩锁.await（超时）。

**再想一想**，你不需要闩锁的魔力，我认为这些方面的东西就足够了：

```
public void runMyJobs(List<Runnable> myJobs, long timeout, TimeUnit unit) throws InterruptedException {

  ExecutorService e = Executors.newFixedThreadPool(1);
  for(Runnable job: myJobs) {
    e.execute(job);    
  }

  e.awaitTermination(timeout, unit);
  List<Runnable> notCompletedJobs = e.shutdownNow();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T01:31:56.620

在大家的帮助下回复我，我已经改变了上面的 runAJob 方法，它似乎工作正常。

但也许我没有清楚地理解 toString 方法......我正在尝试学习从一个类调用方法到另一个类？

我该怎么办...

如果 Job 类具有运行单个作业本身的方法，并且我想将“Job”类中的“run”方法调用为“runAjob”方法。因此，当 Job 类中的“run”方法被执行时，它会连接到“runAjob”方法，因此它也会被执行。

我的意思是如果我们在 myJobInQueue 中有 2 个待处理的工作。

0-{“洗”10分钟}

1-{“做饭”10分钟}

2-{“洗车”10分钟}

当我使用“运行”方法时，myJobInQueue 变成了，

0-{“做饭”10分钟}

1-{“洗车”10分钟}

和

当我使用“runAjob”方法时，myJobInQueue 变为，

0-{“洗车”10分钟}

我希望我已经把这个问题说得够清楚了。

# javascript - 使用 submit() 从链接提交的表单无法被 onsubmit 处理程序捕获

> ID：12819357
> 
> 赞同：6
> 
> 时间：2012-10-10T12:28:03.510
> 
> 标签：javascript, forms, event-handling

很惊讶，我在从 JS 提交表单时遇到了这个奇怪的问题。

### [问题：](http://jsfiddle.net/Starx/pcN6S/)

考虑一个使用`submit`按钮和按钮两种方式提交的简单表单`anchor link`

```
<form method="POST" action="page.html" name="foobar" id="test">
  <input type="text" />
  <input type="submit" />
</form>

<a href="#" onclick="document.getElementById('test').submit();">click me</a> 
```

捕获提交事件的函数

```
document.getElementById('test').onsubmit = function() {
   // Same result with 
   //     * document.foobar.onsubmit
   //     * document.forms['foobar'].onsubmit

   alert('foobar');
   return false;
} 
```

现在，当通过单击`submit`按钮提交表单时，我会收到警报，但**在单击链接时却没有**。为什么这样做？

*[小提琴显示问题](http://jsfiddle.net/Starx/pcN6S/)*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T13:42:05.437

为了提供一个合理确定的答案，[HTML 表单提交算法](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#concept-form-submit)第 5 项指出，如果表单没有通过调用 submit 方法提交，它只会调度提交事件（这意味着如果通过按钮或其他隐式提交，它只会调度提交事件方法，例如在焦点位于输入类型文本元素上时按 Enter）。

如果没有发送提交事件，则不会调用提交处理程序。

这与[DOM 2 HTML 规范](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-76767676)不同，后者说提交方法应该做提交按钮所做的事情。

所以如果你想使用脚本提交表单，你应该手动调用提交监听器。如果侦听器是使用*addEventListener*添加的，那么您需要记住并调用它，因为您无法通过检查表单来发现它（如下所示）。

如果侦听器被设置为内联，或者添加到 DOM *onsubmit*属性，您可以执行以下操作：

```
<form onsubmit="return validate(this);" ...>
  ...
</form>
<button onclick="doSubmit()">submit form</button>

<script>
function doSubmit() {
  var form = document.forms[0];

  if (form.onsubmit) {
    var result = form.onsubmit.call(form);
  }

  if (result !== false) {
    form.submit();
  }
}
</script> 
```

如果您需要传递参数或做其他事情，生活会更加艰难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:34:44.033

这就是[`form.submit`](https://developer.mozilla.org/en-US/docs/DOM/form.submit)行为方式；

> 从基于 Gecko 的应用程序调用此方法时，**不会触发**表单的 onsubmit 事件处理程序（例如，onsubmit="return false;"） 。一般情况下，不保证会被 HTML 用户代理调用

`onsubmit`调用一个函数并简单地调用`onclick`它。

# android - 如何在 Android 中获取设备信息

> ID：12819361
> 
> 赞同：31
> 
> 时间：2012-10-10T12:28:11.790
> 
> 标签：android

> **可能重复：**
> [如何检测操作系统或设备类型等系统信息](https://stackoverflow.com/questions/3213205/how-to-detect-system-information-like-os-or-device-type)

我是android应用程序开发的新手。

我开发了一个小应用程序，并将该应用程序 .apk 文件安装在我的设备中，它运行良好。

但我的要求是当我第一次在我的设备中安装 .apk 文件时，我必须检索总设备信息并将该信息存储在我的数据库中。

请帮助我前进

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-10T12:34:56.607

您可能想看看这些页面： http: [//developer.android.com/reference/android/os/Build.html](http://developer.android.com/reference/android/os/Build.html)和[http://developer.android.com/reference/java/lang/System.html](http://developer.android.com/reference/java/lang/System.html)（*getProperty()*方法可能会完成这项工作）。

例如 ：

```
System.getProperty("os.version"); // OS version
android.os.Build.VERSION.SDK      // API Level
android.os.Build.DEVICE           // Device
android.os.Build.MODEL            // Model 
android.os.Build.PRODUCT          // Product 
```

ETC...

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-10T12:34:05.867

您可以使用[Build Class](http://developer.android.com/reference/android/os/Build.html)来获取设备信息。

例如：

```
String myDeviceModel = android.os.Build.MODEL; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-10T12:53:47.987

试试这个：

```
// Code For IMEI AND IMSI NUMBER

String serviceName = Context.TELEPHONY_SERVICE;
TelephonyManager m_telephonyManager = (TelephonyManager) getSystemService(serviceName);
String IMEI,IMSI;
IMEI = m_telephonyManager.getDeviceId();
IMSI = m_telephonyManager.getSubscriberId(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T12:44:19.497

如果您想要设备 ID 信息，请使用 TelephonyManager。这是该链接：

[http://facinatingandroid.blogspot.in/2011/09/android-device-information.html](http://facinatingandroid.blogspot.in/2011/09/android-device-information.html)

并检查：

[http://sree.cc/google/android/reading-phone-device-details-in-android](http://sree.cc/google/android/reading-phone-device-details-in-android)

# php - 本地主机上的 php 错误：访问被禁止！错误 403

> ID：12819362
> 
> 赞同：3
> 
> 时间：2012-10-10T12:28:15.860
> 
> 标签：php, xampp

我正在使用 XAMPP 在 windows7 上遵循[这个php 教程。](http://www.hardcoder.com/scripting/php/guestbook/index.php)
这是一个留言簿教程，将用户条目保存到 mysql 并显示来自 db 的条目。当我将数据输入表单并提交时，浏览器显示此错误消息

**禁止访问！** *您无权访问请求的对象。它要么是读保护的，要么是服务器不可读的。如果您认为这是服务器错误，请联系网站管理员。* **错误 403** localhost *Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7*

**更新**

**留言板.php**

> 连接到数据库代码

```
<?php
$dbHost = "localhost";
$dbUser = "root";
$dbPass = "";
$dbDatabase = "myDB";

// Connect to DB

$li = new mysqli('localhost', 'root', '', 'myDB') or 
      die("Could not connect". mysqli_connect_error());
//mysql_select_db($dbDatabase, $li) or 
      die ("could not select DB". mysql_error());
?> 
```

> 变量初始化

```
<?php
// initiate some vars

$gb_str = "";   
// $gb_str is the string we'll append entries to
$pgeTitle = "View and Sign Guestbook"; 
```

> 发布请求处理

```
// If form is submitted, then insert into DB
if (!empty($_POST["submit"])) {
    $name = $_POST["frmName"];
    $email = $_POST["frmEmail"];
    $comment = $_POST["frmComment"];
    $date = Date("Y-m-d h:i:s");

    $gb_query =     "insert into guestbook
            values(0, '$name', '$email', '$comment', '$date')";
    // Performs the $sql query on the server to insert the values
    if ($li->query($gb_query) === TRUE) {
        echo 'users entry saved successfully';
    }
    else {
        echo 'Error: '. $li->error;
    }
    /*
    $sql = mysql_query($gb_query);
    $res = mysql_affected_rows($sql);

    // See if insert was successful or not
    if($res > 0) {
        $ret_str="Your guestbook entry was successfully added.";
    } else {
        $ret_str = "Your guestbook entry was NOT successfully added.";
    }

    // Append success/failure message
    $gb_str .= "<span class=\"ret\">$ret_str</span><BR>";
    */
}
?> 
```

> 留言簿列表

```
<?php

$get_query = "select gbName, gbEmail, gbComment, 
              DATE_FORMAT(gbDateAdded, '%m-%d-%y %H:%i') gbDateAdded
              from guestbook";

$result = $li->query($get_query);
$gb_str .= "<hr size=\"1\">";

if ($result->num_rows > 0) {
    // output data of each row from $result
    while($row = $result->fetch_assoc()) {
    $name = $row["gbName"];
    $email = $row["gbEmail"];
    $comment = $row["gbComment"];
    $date = $row["gbDateAdded"];

    if(!empty($name)) {
        // If name exists and email exists, link name to email
        if(!empty($email)) {
            $name="by <a href=\"mailto:$email\">$name</a>";
        }
    // If name does exist and email exists, link email to email     
    } else if (!empty($email)) {
        $name = "by <a href=\"mailto:$email\">$email</a>";
    } else {
        $name = "";
    }

    // Append to string we'll print later on
    $gb_str .= "<br>$comment<p class=\"small\">
                posted on $date $name<hr size=\"1\">";
}}

?> 
```

> HTML 页面

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
<HTML>
<HEAD>
<TITLE>Guestbook</TITLE>
<SCRIPT language="javascript">
<!--

/* This function is pulled from a generic validation file from
some other site (probably developer.netscape.com) and strips out
characters you don't want */

function stripCharsInBag (s, bag) {
    var i;
    var returnString = "";

    // Search through string's characters one by one.
    // If character is not in bag, append to returnString.

    for (i = 0; i < s.length; i++)
    {   
        // Check that current character isn't whitespace.
        var c = s.charAt(i);
        if (bag.indexOf(c) == -1) returnString += c;
    }
    return returnString;
}

// This function just makes sure the comment field is not empty

function valForm(frm) {
    badChars = "<[]>{}";
    if(frm.frmComment.value == "") {
        alert("Please fill in your comments for the guestbook.");
        return false;
    } else {
        frm.frmComment.value = stripCharsInBag(frm.frmComment.value, badChars);
        // These values may be empty, but strip chars in case they're not
        frm.frmName.value = stripCharsInBag(frm.frmName.value, badChars);
        frm.frmEmail.value = stripCharsInBag(frm.frmEmail.value, badChars);
        return true;
    }
}

-->
</SCRIPT>
</HEAD>

<BODY bgcolor="#FFFFFF">
<?php echo $gb_str; ?>

<form name="gb" action="<? echo $PHP_SELF;?>" method="post">
<table cellpadding="3" cellspacing="0" border="0">
  <tr>
    <td class="tdhead" valign="top" align="right">Name</td>
    <td valign="top">
      <input type="text" name="frmName" value="" size="30" 
             maxlength="50">
      </td>
  </tr>
  <tr>
    <td class="tdhead" valign="top" align="right">Email</td>
    <td valign="top">
      <input type="text" name="frmEmail" value="" size="30" 
             maxlength="100">
    </td>
  </tr>
  <tr>
    <td class="tdhead" valign="top" align="right">Comment</td>
    <td valign="top">
        <textarea name="frmComment" rows="5" cols="30"></textarea>
    </td>
  </tr>
  <tr>
    <td> </td>
    <td><input type="submit" name="submit" value="submit" 
               onClick="return valForm(document.gb)">
        <input type="reset" name="reset" value="reset">
    </td>
  </tr>
</table>
</form>

</BODY>
</HTML>

<?php
// Close MySQL Connection
$li->close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:30:44.763

第二个问题的答案，您没有将查询结果分配给变量并且`mysql_affected_rows`也是空的。

```
$gb_query =     "insert into guestbook
        values(0, '$name', '$email', '$comment', '$date')";

$sql = mysql_query($gb_query);
$res = mysql_affected_rows($sql); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:30:50.383

听起来错误是由 Xampp 配置阻止目录引起的。如果您在开发机器上并且不关心安全性，请在 xampp 下的 apache/conf 目录中查找名为 httpd.conf 的文件。

您会在其中找到与此类似的指令

```
<Directory />
    Options FollowSymLinks
    AllowOverride none
    Order deny,allow
    Allow from none
    Deny from all
</Directory> 
```

换成这个

```
<Directory />
    Options FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
    Deny from none
</Directory> 
```

这使得网络服务器可以访问根驱动器上的每个文件，这在开发机器上很好（尽管有些人肯定会争论这一点），但在生产中根本不是一个好主意。

# string - 停止 R 解析 ~ 到用户的主目录

> ID：12819364
> 
> 赞同：4
> 
> 时间：2012-10-10T12:28:22.693
> 
> 标签：string, r, parsing, eval, tilde

我尝试在 R 中运行以下脚本（最小化示例）：

```
library(neuralnet)

arrhythmia <- read.csv(file=".../arrhythmia-edited.csv", head=TRUE, sep=",")

# create the first parameter for neuralnet formular 
# format like 'classification ~ attribute1 + attribute2 + ...
# i have so many features, that why i use a for
input <- ""
for (i in 1:259)
  input <- paste(input, paste(paste('arrhythmia[,',i),'] +'))
input <- paste(input, 'arrhythmia[,260]')

# create string for function call
nnet.func <- paste('neuralnet(arrhythmia[,261] ~', input)
nnet.func <- paste(nnet.func, ', data=arrhythmia)')

# call function neuralnet
# should be like: neuralnet(arrhythmia[,261] ~ arrhythmia[,1] + arrhythmia[,2] + ... + arrhytmia[,260], data=arrhythmia)
net.arrhythmia <- eval(parse(nnet.func)) 
```

问题是 R 将其解析如下（使用 Linux）：

```
'neuralnet(arrhythmia[,261] /home/user  arrhythmia[, 1 ] + .... 
```

如何防止 R 将 ~ 解析为 /home/[user-directory]？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T12:31:17.860

尝试使用`,text=`参数。现在你正在使用`,file=`参数 to ，`parse`因为它是第一位的：

```
> args('parse')
function (file = "", n = NULL, text = NULL, prompt = "?", srcfile = NULL, 
    encoding = "unknown") 

> parse("test ~ test")
Error in file(filename, "r") : cannot open the connection

> parse(text="test ~ test")
expression(test ~ test) 
```

# html - 将选定的选项卡设置为向下以隐藏边框

> ID：12819366
> 
> 赞同：0
> 
> 时间：2012-10-10T12:28:24.877
> 
> 标签：html, css

我正在开发一个标签条。我希望所选选项卡必须在容器 div 上重叠 1px，以便它看起来像容器的一部分......
这是[jsfiddle](http://jsfiddle.net/bTUsh/)。
我不想使用脚本来制作它。我想先选择CSS样式。如果你说用纯CSS做不到，那只能用脚本。它应该如下所示： ![在此处输入图像描述](../Images/e6fea42e34d09f0d0906eb8a658cc0bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:40:17.570

看[演示](http://jsbin.com/emucof/1)

将此样式添加到您的小提琴中

```
.vUiTsContainers {
z-index: 1;
top: -3px;
position: relative;
}

.irmNText {
z-index: 10;
position: relative;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:42:06.293

您好，现在在您的 css 中定义一些 css，如下所示

```
 .vUiTsTabs > ul{
overflow:hidden;  // remove this line
} 
```

**或添加此 CSS**

```
.vUiTsTabs > ul:after{
content:'';
    overflow:hidden;
    display:block;
    clear:both;
}
.vUiTsTab.vUiTsTabSel{
position:relative;
}
.vUiTsTab.vUiTsTabSel:after{
content:'';
    position:absolute;
    left:0;
    right:0;
    bottom:-3px;
    height:3px;
    background:#F3F3F3;
} 
```

***[现场演示](http://jsfiddle.net/rohitazad/bTUsh/9/)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:55:32.410

我还创建了一个[现场演示](http://jsfiddle.net/jampez77/bTUsh/13/)，但由于我使用的计算机速度非常慢而被击败

# facebook - 脸书mutual_friend_count错了吗？

> ID：12819369
> 
> 赞同：0
> 
> 时间：2012-10-10T12:28:38.687
> 
> 标签：facebook, facebook-graph-api, count, mutual-friendship

我想知道有没有人遇到过这个问题...

Facebook 的共同好友数量减少了 1。一个太多了。但并不适合所有朋友。我已经通过我的应用程序对此进行了测试，其中获取的mutual_friend_count 与获取的数组中的共同朋友的数量不对应。

此外，我一直在手动检查。通过访问 FB 个人资料并从字面上算出我们共同的朋友。这也表明我们的共同朋友比 Facebook 在朋友个人资料的“共同朋友”部分中显示的数量少一个。

这不适用于我在 Facebook 上的所有联系人。一些个人资料显示与实际共同朋友数量相对应的共同朋友数量。

但是，如果您正在构建一个有点依赖于mutual_friend_count 的应用程序/网站/facebook 应用程序等，这确实会带来问题。

谁能证实这一点？这是一个错误吗？还是某些用户可以避免显示在共同好友部分，但仍被计算在内的某种设置...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-14T08:17:28.763

我一直在做一些工作，`mutual_friends`我想我会为我在这个问题上学到的东西付出我的 2 美分，这可能会或可能不会对应于你的问题。

通过 Facebook Graph API 的mutual_friends 文档在[这里](https://developers.facebook.com/docs/graph-api/reference/v2.2/user.context/mutual_friends)

*从文档：*

> 请求中的用户和会话用户都必须授予 user_friends 对应用程序的权限。

这是我犯的一个常见错误。即使您在用户之间有共同的朋友，如果朋友没有授予应用程序的权限，那么您无法获取他们的图片/姓名或任何关于他们的信息，他们只是出现在`total_count`参数中。

> 如果您想代表两个不是朋友的应用用户调用此端点，那么您必须在发出请求时提供 appsecret_proof 参数以及用户访问令牌。这意味着您必须从您的服务器调用此端点。

这也是非常重要的。如果这两个用户不是朋友，那么即使他们有共同的朋友，这个端点也会**默默地让你不提供任何东西。**为了实际获取此场景的数据，您需要从服务器而不是客户端调用端点。这意味着不是您的 javascript webapp，不是您的 android 应用程序，也不是您的 iOS 应用程序。

还有一些额外的边缘情况，例如用户没有为您的应用程序提供mutual_friends 权限等问题，但至少对我而言，这些是我遇到的主要问题。我从未遇到过任何错误，所以我无法确认您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:38:44.767

我可以确认共同朋友的数量有时会减少 1。我数了数，有些是对的，有些则比应有的少 1。这可能是隐私选项卡中的设置，很抱歉我帮不上什么忙。

# loops - 批量循环 CACLS 函数

> ID：12819375
> 
> 赞同：0
> 
> 时间：2012-10-10T12:29:09.497
> 
> 标签：loops, batch-file, cacls

我想从我的员工那里锁定一系列文件，这样他们就不能删除它们，因此我编译了一个脚本，将 CACLS 函数放入一个循环中。但是这没有生效。

有人可以解释为什么吗？

```
FOR /F %%i IN (c:\file.txt) DO CACLS %%i /p :n /y 
```

我已经能够将它缩小到最后的 /y 我如何继续自动化是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:05:11.920

有几件事是错误的。

首先，您没有指定要应用权限的用户/组

例子

```
CACLS %%i /p Everyone:n /y 
```

其次，没有`/y`开关`cacls`。如果你想自动`y`对确认说你可以使用这个

```
echo y| CACLS %%i /p Everyone:n /y 
```

因此，您的完整批处理文件看起来与此类似

```
FOR /F %%i IN (c:\file.txt) DO echo y| CACLS %%i /p Everyone:n 
```

希望这可以帮助

# php - php会话不起作用

> ID：12819377
> 
> 赞同：2
> 
> 时间：2012-10-10T12:29:18.930
> 
> 标签：php, session, login

它应该如何工作：Index.php 是受保护的页面。它包括 check.php，它检查您是否有一个会话 = 好。如果没有，你没有登录 -> 注销，删除会话。但它不起作用，它总是注销，就像我没有登录一样......

**索引.php**

```
include ‘check.php’;
echo "logged in"; 
```

**检查.php**

```
session_start();
if($_SESSION[‘login’] != ‘good’) {
unset($_SESSION[‘login’]);
unset($_SESSION[‘name’]);
header(‘Location: login.php?logoff’);
exit();
} 
```

**登录.php**

```
if(isset($_POST[‘login’])) {
$gb = array();
$gb[‘user1’] = ‘pass1’;
$gb[‘user2’] = ‘pass2’;
if(isset($gb[$_POST[‘username’]]) && $gb[$_POST[‘username’]] == $_POST[‘password’])
{ 
$_SESSION[‘login’] = ‘good’;
$_SESSION[‘name’] = $_POST[‘name’];

header("Location: index.php");
} else {

header("Location: login.php?wrongpass");

}

} else { ?>
Login Form
<?php } ?> 
```

我希望有一个人可以帮助我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:32:10.900

您应该验证您在 login.php 中启动了会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:30:48.793

您需要在所有页面的顶部有 session_start()，您还没有显示登录页面的会话开始。

（感谢 Danny 证明我不会打字）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T12:32:07.030

放入`session_start();`所有页面

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T12:32:49.557

检查`register_globals`您的 php.ini中是否已启用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T12:36:45.987

首先检查要使用会话变量的页面会话是否启动，如果会话不是 stat，则启动它。

这是 php 文件中的第一行。

会话检查的代码是：

```
if(!session_id())
{
    session_start();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T12:41:47.077

```
if($count==1){
    session_start();    
    $_SESSION['Username'] = $UserName;
    $_SESSION['Password'] = $password;
    UpdateOnlineChecker($Session);
    header( "Location: http://". strip_tags( $_SERVER ['HTTP_HOST'] ) ."/newHolo/" );
    exit;
}
else {
    echo "Wrong Username or Password";
} 
```

看我的代码。它检查语句是否为真（对我来说，如果有一行带有我执行的查询语句）。然后我开始一个会话，基本上我会定义全局会话变量，向我的数据库发出一个查询以更新会话，然后参考。

你错过了 session_start(); 在您的 if true 块中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-10T13:35:36.443

使用一个用于操作文档，例如 index.php 有代码：

```
session_start();
if(isset($_POST['login']) && isset($_POST['password'])){
   // login
   header('Location: (here is some page)');
}
if(!isset($_SESSION['user']){
  // @todo some action
} else {
  require_once('login.php');
}

if(isset($_GET['logout'])){
   unset($_SESSION['user']);
   header('Location: (here is some page)');
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-10T19:32:42.197

我认为问题是标题：

```
('location:------.php); 
```

您的托管服务器不运行此。你可以使用这个：

```
echo "<script>window.location.href='-----.php'</script>"; 
```

# assembly - 组装摩托罗拉68k，如果测试位为零，如何分支？

> ID：12819386
> 
> 赞同：1
> 
> 时间：2012-10-10T12:29:52.657
> 
> 标签：assembly, branch, 68000

我正在使用easy68k在汇编中编写程序，如果测试位等于0 [SR中的Z = 0]，我正在寻找一种方法来建立一个分支。

我搜索了很多，但没有得到答案，

例如，我有这一行：

```
 BTST #0,D2 ;Testing the LSB bit in data register 0 
```

现在我想要一种方法，或者如果存在，检查 SR 中的 Z 的指令，这样我就可以知道测试的位是否为零。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:05:33.853

测试条件代码并基于它们进行分支的指令通常称为[`Bcc`](http://68k.hax.com/Bcc). 这些条件分支指令的各个名称是基于如果前一条指令是[`CMP`](http://68k.hax.com/CMP).

但是，他们自己所做的只是测试条件代码并获取分支。所以，你可以这样做：

```
BTST #0,D2 ;Testing the LSB bit in data register 0
BEQ LabelForZSet
;Code for Z clear 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:33:59.260

Z-Flag 上的分支：

```
btst #0,d2
beq bitIsCleared
; or
bne bitIsSet 
```

Z-Flag 注册：

```
btst #0,d2
sne  d0
; d0 (byte only) will now be 0xFF if bit was set, 0x00 otherwise)
; if a word is required add ext.w d0
; if a long is required add also ext.l d0 
```

# vb.net - Word Doc VB 的打印预览

> ID：12819387
> 
> 赞同：0
> 
> 时间：2012-10-10T12:29:54.207
> 
> 标签：vb.net, print-preview

我在某种程度上继承了我正在调整的表单应用程序。长话短说，我只想要一个 word 文档的只读视图。我不想要启动 Word 的开销，所以我想可能只是打印样式预览。我有点需要远离 3rd 方应用程序，所以我受到限制。无论如何.. 我正在尝试处理 pdf、txt、图像文件和 word 文档。问题是我似乎无法加载打印预览。我可以打印它.. 但在我添加的 PrintPreviewController 中看不到它。有人有例子吗？我试图小心使用开销，因为我已经运行了 5 个以上的存储过程来检索此原型的信息。

任何人？我的例子很讨厌..但如果你想看看我很乐意提供..\

现在我尝试使用 Webview 并在 MS Word 应用程序本身中启动它。我看到需要调整注册表的文件.. 呃..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:15:03.997

我想你也可以使用Word。检查您的任务管理器进程列表 - 打印 word 文档无论如何都会启动一个不可见的 Word 实例。

# c - 未定义的函数引用 - 学习 C

> ID：12819391
> 
> 赞同：1
> 
> 时间：2012-10-10T12:30:13.233
> 
> 标签：c

我通过将我在 Python 中完成的一些事情翻译成 C 来学习 C。在来这里之前，我尝试尽可能多地上网，但似乎很难找到我正在寻找的答案。

以下是我（迄今为止）对数字素性的米勒-拉宾检验的翻译。

```
#include <stdio.h>
#include <math.h>

_Bool prime(long long n);

int main() {
    int i = 6;
    for (i; i < 9; i++) {
        if (prime(i)) {
            printf("%i\n", prime(i));
        }
    }
}

_Bool prime(long long n) {
    int s = 0;
    int r = 0;
    int a_index = 0;
    // printf("the value of a_index when initialised is: %d\n", a_index);
    // printf("the value of s when initialised is: %d\n", s);
    int *a_list;
    _Bool is_prime = 1;
    _Bool composite_part_a = 1;
    _Bool composite_part_b = 1;
    long long d = n - 1;
    while (d % 2 == 0) {
        s++;
        d = d / 2;
    }

    if (4759123141 <= n && n < 2152302898747) {
        // malloc
        a_list[0] = 2;
        a_list[1] = 3;
        a_list[2] = 5;
        a_list[3] = 7;
        a_list[4] = 11;
    }
    else if (9080191 <= n && n < 4759123141) {
        // malloc
        a_list[0] = 2;
        a_list[1] = 7;
        a_list[2] = 61;
    }
    else if (1373653 <= n && n < 9080191) {
        // malloc
        a_list[0] = 31;
        a_list[1] = 73;
    }           
    else if (4 <= n && n < 1373653) {
        a_list = (int *) malloc(sizeof(int) * 2);
        a_list[0] = 2;
        a_list[1] = 3;
        printf("the value of a_list[0] upon its first assignment is: %d\n", a_list[0]);
        // printf("the first element of a_list is: %d\n", a_list[0]);
        // printf("the second element of a_list is: %d\n", a_list[1]);
    }
    else if (n == 3 | n == 2) {
        return 1;
    }
    else if (n % 2 == 0 | n == 1) {
        return 0;
    }

    printf("the value of a_list[0] over here is: %d\n", a_list[0]);
    // printf("%d\n", a_list[1]);  
    for (a_index; a_index < sizeof(a_list) / sizeof(int); a_index++) {
        printf("test");
        if ((long long)pow(a_index[a_list], d) % n != 1) {
            composite_part_a = 1;
        }
        else {
            composite_part_a = 0;
        }

        // printf("the value of r is: %d\n", r);
        // printf("the value of s is: %d\n", s);
        for (r; r < s; r++) {
            printf("%lld\n", (int)pow(a_list[a_index], exp2(r) * d) % n);
            if ((long long)pow(a_index[a_list], exp2(r) * d) % n != -1) {
                composite_part_b = 1;
            }
            else {
                composite_part_b = 0;
                break;
            }
            }

        if (composite_part_a && composite_part_b) {
            return 0;
        }
        }

    return is_prime;
    } 
```

学习 C 的麻烦在于，除了我听说过的有关 K&R 的内容之外，对于纯粹的初学者来说，没有太多好的文学作品，但那是在邮件中，我现在无法得到它。该程序返回以下错误：

```
3.c: In function ‘prime’:
3.c:52:26: warning: incompatible implicit declaration of built-in function ‘malloc’ [enabled by default]
/tmp/ccGQnk9T.o: In function `prime':
3.c:(.text+0x272): undefined reference to `pow'
3.c:(.text+0x2b9): undefined reference to `exp2'
3.c:(.text+0x2db): undefined reference to `pow'
3.c:(.text+0x30b): undefined reference to `exp2'
3.c:(.text+0x32d): undefined reference to `pow'
collect2: ld returned 1 exit status 
```

首先，我没有包括介绍 pow 和其他内容吗？我知道问两个问题是不合适的，我的主要问题是关于 pow 和 exp2，但是如果您对 malloc 有任何建议，请随时将其包括在内。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T12:33:56.860

您还需要*链接*数学库，默认情况下不包含它。

类似于以下命令：

```
$ gcc 3.c -lm 
```

注意这个`-lm`参数......它告诉链接器添加一个库（`-l`部件）和库的名称（`m`部件）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T12:33:23.167

数学函数是`libm`. 编译时链接它们`-lm`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:36:47.123

3.c:52:26：警告：内置函数“malloc”的隐式声明不兼容 [默认启用]

由于缺少包含，malloc() 是在 stdlib.h 中定义的，因此需要包含它。

3.c:(.text+0x272): 未定义对“pow”的引用（以及其他）

是由于缺少指向 libm 的链接引起的。math.h 中的大多数（如果不是全部）方法不在总是链接的标准 libc 中，而是在 libm 中。

编译器之间的链接方式不同，但对于 gcc（和许多其他 unix 编译器）：

gcc 3.c -o 3 -lm

其中“-lm”告诉 gcc 链接 libm。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T12:35:59.583

您需要包括`<stdlib.h>`malloc 和 free。

为了使数学工作正常，您必须链接它， 库标志`gcc 3.c -lm` 在哪里`-l`，m 告诉它使用数学库

此外，您需要将素数的定义移至上述主要内容，需要按顺序声明。

由于您刚刚从这里开始，因此还有一些对编译器有用的标志

`-g`这将在使用 valgrind 或 gdb 时提供更好的调试。

`-o`让您定义编译的文件名，例如：`gcc 3.c -o 3`将创建`./3`而不是`./a.out`

# android - .setText 函数导致错误

> ID：12819394
> 
> 赞同：0
> 
> 时间：2012-10-10T12:30:32.063
> 
> 标签：android, android-layout

文本视图上的 .setText 函数导致我的应用程序崩溃。从我读到的问题可能是它不在 UI 线程上，但我不知道如何解决它

```
public class SingleMenuItemActivity  extends Activity {

TextView lblName;
TextView lblyest;
TextView lbltoday;
TextView lblHigh;
TextView lblLow;
TextView lblChange;
TextView lblPcchange;
Button set;

String name, yesterday, today, high, low, change, pcchange;

@Override
protected void onCreate (Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate( savedInstanceState );
    setContentView( R.layout.single_list_item);

    set=(Button) findViewById(R.id.btnSet);
    lblName =   (TextView) findViewById( R.id.name );
    lblyest = (TextView) findViewById( R.id.yesterday );
    lbltoday = (TextView) findViewById( R.id.today );
    lblHigh = (TextView) findViewById( R.id.high );
    lblLow = (TextView) findViewById( R.id.low );
    lblChange = (TextView) findViewById( R.id.change );
    lblPcchange = (TextView) findViewById( R.id.pcchange );

    Intent in = getIntent();

    name = in.getStringExtra( "name" );
    ;
    yesterday = in.getStringExtra( "yesterday" );
    today = in.getStringExtra( "today" );
    high = in.getStringExtra( "high" );
    low = in.getStringExtra( "low" );
    change = in.getStringExtra( "change" );
    pcchange = in.getStringExtra( "pcchange" );

            lblName.setText(name);
            lblyest.setText(yesterday);
            lbltoday.setText(today);
            lblHigh.setText(high);
            lblLow.setText(low);
            lblChange.setText(change);
            lblPcchange.setText(pcchange); 

}

} 
```

无法弄清楚到底是什么问题

这是**日志猫：**

```
10-10 15:37:14.544: I/ActivityManager(58): Starting activity: Intent { cmp=com.kmarima.knight/.SingleMenuItemActivity (has extras) }
10-10 15:37:18.217: D/SntpClient(58): request time failed: java.net.SocketException: Address family not supported by protocol
10-10 15:37:24.613: W/ActivityManager(58): Launch timeout has expired, giving up wake lock!
10-10 15:37:24.685: W/ActivityManager(58): Activity idle timeout for HistoryRecord{45018590 com.kmarima.knight/.SingleMenuItemActivity}
10-10 15:37:29.874: D/dalvikvm(264): GC_EXPLICIT freed 2061 objects / 147656 bytes in 165ms
10-10 15:37:34.914: D/dalvikvm(296): GC_EXPLICIT freed 811 objects / 56944 bytes in 162ms 
```

这是活动开始的地方

```
 Intent in = new Intent(KnightActivity.this, SingleMenuItemActivity.class);
              in.putExtra("name", "The Name");
                 in.putExtra("yesterday", "Value For Yesterday");
                 in.putExtra("today", "Todays Value");
                 in.putExtra("high", "High Value");
                 in.putExtra("low", "Low Value");
                 in.putExtra("change", "Change Value");
                 in.putExtra("pcchange", "PC Change Value");

             startActivity(in); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:45:14.433

您遇到此问题是因为您没有从意图中获取值，必须是一个或多个值将为空，或者您在从意图中获取值时使用不同的键，请检查两个活动的键，它们是否相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:34:46.603

在 setText 中，您必须设置一些空值。它在哪一行给出错误？请检查变量不为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:15:20.743

用这个

```
Bundle extras = getIntent().getExtras();
            if (extras == null) {
              return;
            }
 String name=extras.getString("name"); 
```

代替

```
Intent in = getIntent();

name = in.getStringExtra( "name" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T12:50:39.290

```
You are getting this error because.....

"This exception is thrown when a program attempts to create an URL from an
incorrect specification." 
```

# django - 如何使我的 css 文件在 django 中工作

> ID：12819395
> 
> 赞同：3
> 
> 时间：2012-10-10T12:30:34.427
> 
> 标签：django

我是 django 新手，但在 python 方面有一些相关技能。我刚开始在 django 中构建一个项目，到目前为止，我已经能够在我的项目中创建一个应用程序。另外，我已经能够将我网站的 index.html 文件链接到 django 并且在命令提示符下运行服务器后可以成功查看它。但这是我的问题；

1.  如何使 css、img 和 js 文件与我的 index.html 一起使用？

感谢你们到目前为止的回复，但 index.html 页面仍然加载到 localhost 地址上，但它不应用 img、css 和 js 脚本。它只加载html。虽然我尝试使用回复我帖子的第二个人所说的方法，但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:56:04.717

只是一个关于开发服务器非常基本的 css/img 使用的小演示：`python manage.py runserver`. 您不应该将其用于生产。对于用户输入/输出，您应该查看[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)。

**文件结构**

```
project
  |- static
  |   |- css
  |   |   |- stuff.css
  |- media
  |   |- images
  |   |   |- love.jpg
  |- templates
  |- urls.py
  |- __init__.py
  |- manage.py
  |- settings.py 
```

**base.html**

```
<html>
<head>
   <link href="{{ STATIC_URL }}css/stuff.css" />
</head>
<body>
   <h1>I like django!</h1>
   <img src="{{ MEDIA_URL }}images/love.jpg" />
</body>
</html> 
```

**设置.py**

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.core.context_processors.request',
    'django.contrib.messages.context_processors.messages',
)

STATIC_URL = '/static/'
MEDIA_URL = '/media/' 
```

**网址.py**

```
# example windows
(r'^media/(?P<path>.*)$', 'django.views.static.serve',
        {'document_root': 'C:/python25/lib/site-packages/project/media/', 'show_indexes': True}),
# example *ix
(r'^static/(?P<path>.*)$', 'django.views.static.serve',
        {'document_root': '/usr/lib/python25/site-packages/project/static/', 'show_indexes': True}), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:32:00.727

感谢所有回答我问题的人，我的静态文件现在处于活动状态。我必须在我的项目视图中添加 RequestContext 以使 html 文件中的 {{STATIC_URL}} 处于活动状态。

def index(request): return render_to_response('Calculator/index.html', context_instance=RequestContext(request))

# c++ - const_iterator 和 const_iterator::value_type 的 constness

> ID：12819405
> 
> 赞同：18
> 
> 时间：2012-10-10T12:31:09.137
> 
> 标签：c++, iterator, const-iterator, iterator-traits

为什么在 STL 中

```
std::iterator_traits<const T*>::value_type 
```

是同一类型

```
std::iterator_traits<T*>::value_type 
```

为什么会这样设计？第一个不应该是**const T**而第二个不应该是**T**吗？您应该如何采用迭代器的底层 const 正确类型？我知道您可以编写自己的模板类和专业化并从中获取

```
 std::iterator_traits<const T*>::pointer 
```

但不应该有一个成员 typedef 持有它吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T12:37:14.953

常量与值类型无关，因为值意味着副本。然而，这`std::iterator_traits<const T*>::reference`是一个`const T&`。

例如，您可以编写以下函数：

```
template <class Iterator>
typename std::iterator_traits<Iterator>::value_type getValue(Iterator i)
{
  return *i;
} 
```

无论 Iterator 是 a`const T *`还是 a ，它都可以正常工作`T *`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-10T14:01:22.700

它允许我这样做：

```
std::iterator_traits<I>::value_type val = *iter;
val += 5;
doSomething(val); 
```

但如果`value_type`是 const，那就更难了，因为我需要使用`remove_const`.

如果我不想获得可修改的值，那么是否`value_type`为 const 并不重要：

```
const std::iterator_traits<I>::value_type cval = *iter;
std::iterator_traits<I>::reference        ref  = *iter; 
```

这两种方法都适用于 const 迭代器和非常量迭代器，无论是否`value_type`为 const 都适用，但第一个示例仅适用于`value_type`非常量的 const 迭代器。

> 您应该如何采用迭代器的底层 const 正确类型？

迭代器不一定有它自己的底层类型，迭代器通常指的是某个范围或某个集合，而该集合就是具有底层类型的集合。例如`std::list<int>::const_iterator`'s `value_type`is `std::list<int>::value_type`， which is `int`not `const int`。

无论如何，您不一定想知道底层类型是什么，您更有可能想知道结果`*iter`是什么，这就是`iterator_traits<I>::reference`告诉您的。

# c++ - OpenGL 伪实例渲染显示黑屏

> ID：12819406
> 
> 赞同：1
> 
> 时间：2012-10-10T12:31:11.130
> 
> 标签：c++, opengl

我有一些代码循环遍历一组对象并呈现这些对象的实例。需要渲染的对象列表存储为`std::map<MeshResource*, std::vector<MeshRendererer*>>`，其中类对象`MeshResource`包含具有实际数据的顶点和索引，类对象`MeshRenderer`定义了要渲染网格的空间点。

我的渲染代码如下：

```
glDisable(GL_BLEND);
    glEnable(GL_CULL_FACE);
    glDepthMask(GL_TRUE);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glEnable(GL_DEPTH_TEST);

    for (std::map<MeshResource*, std::vector<MeshRenderer*> >::iterator it = renderables.begin(); it != renderables.end(); it++)
    {
        it->first->setupBeforeRendering();
        cout << "<";
        for (unsigned long i =0; i < it->second.size(); i++)
        {
            //Pass in an identity matrix to the vertex shader- used here only for debugging purposes; the real code correctly inputs any matrix.
            uniformizeModelMatrix(Matrix4::IDENTITY);
            /**
             * StartHere fix rendering problem.
             * Ruled out:
             *  Vertex buffers correctly.
             *  Index buffers correctly.
             *  Matrices correct?
             */
            it->first->render();
        }
        it->first->cleanupAfterRendering();
    }

    geometryPassShader->disable();
    glDepthMask(GL_FALSE);
    glDisable(GL_CULL_FACE);
    glDisable(GL_DEPTH_TEST); 
```

处理设置制服的函数`MeshResource`如下：

```
void MeshResource::setupBeforeRendering()
{
    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);
    glEnableVertexAttribArray(2);
    glEnableVertexAttribArray(3);
    glEnableVertexAttribArray(4);

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, iboID);
    glBindBuffer(GL_ARRAY_BUFFER, vboID);

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), 0); // Vertex position
    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid*) 12); // Vertex normal
    glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid*) 24); // UV layer 0
    glVertexAttribPointer(3, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid*) 32); // Vertex color
    glVertexAttribPointer(4, 1, GL_UNSIGNED_SHORT, GL_FALSE, sizeof(Vertex), (const GLvoid*) 44); //Material index
} 
```

呈现对象的代码是这样的：

```
void MeshResource::render()
{
    glDrawElements(GL_TRIANGLES, geometry->numIndices, GL_UNSIGNED_SHORT, 0);
} 
```

清理的代码是这样的：

```
void MeshResource::cleanupAfterRendering()
{
    glDisableVertexAttribArray(0);
    glDisableVertexAttribArray(1);
    glDisableVertexAttribArray(2);
    glDisableVertexAttribArray(3);
    glDisableVertexAttribArray(4);
} 
```

这样做的最终结果是我得到一个黑屏，尽管在渲染代码之后我的渲染管道结束（基本上只是在屏幕上绘制轴和线）工作正常，所以我相当确定这不是问题制服的传递。但是，如果我稍微更改代码，以便渲染代码在渲染之前立即调用设置，如下所示：

```
void MeshResource::render()
{
    setupBeforeRendering();
    glDrawElements(GL_TRIANGLES, geometry->numIndices, GL_UNSIGNED_SHORT, 0);
} 
```

该程序按需要工作。不过，我不想这样做，因为我的目标是为每个对象类型设置一次顶点、材质等数据，然后渲染每个实例，只更新转换信息。

`uniformizeModelMatrix`作品如下：

```
void RenderManager::uniformizeModelMatrix(Matrix4 matrix)
{
    glBindBuffer(GL_UNIFORM_BUFFER, globalMatrixUBOID);
    glBufferSubData(GL_UNIFORM_BUFFER, 0, sizeof(Matrix4), matrix.ptr());
    glBindBuffer(GL_UNIFORM_BUFFER, 0);
} 
```

# deployment - WIX - 修补安装后无法修补安装

> ID：12819407
> 
> 赞同：3
> 
> 时间：2012-10-10T12:31:13.413
> 
> 标签：deployment, wix, wix3.5, setup-deployment

这里需要一点帮助...

**错误**：*Windows Installer 服务无法安装升级补丁，因为可能缺少要升级的程序，或者升级补丁可能更新了不同版本的程序。验证要升级的程序是否存在于您的计算机上，并且您有正确的升级补丁。*

我做了以下...

1.  创建了一个 MSI 版本 1.0（GUID 自动创建），ProductId="*"
2.  针对 1.0.wixpdb、1.1 版（已设置更新代码）、ProductId="{GUID1}" 创建了一个补丁 (MSP)，pyro 给出了有关更改产品代码的警告。
3.  针对 1.1.wixpdb 版本 1.2 创建了另一个补丁 (MSP)（保留相同的更新代码）。ProductId="{GUID1}"，无法安装。

场景...安装 MSI v1.0 -> 安装 MSP 1.1 = 工作正常。

安装 MSI v1.0 -> 安装 MSP 1.1 -> 安装 MSP 1.2 = 失败，windows 找不到应用程序。

安装 MSI v1.1 -> 安装 MSP 1.2 = 工作正常。

对我来说，这意味着当第一个补丁 (1.1) 出现问题时，可能没有更新，或者在创建补丁 1.2 时我需要考虑 1.0 和 1.1。我尝试了各种选择，从使用到...

有任何想法吗？

更新/补丁代码...

产品.wxs

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="*"
        Name="WiX Patch Example Product"
        Language="1033"
        Version="1.0.0"
        Manufacturer="Dynamo Corporation"
        UpgradeCode="48C49ACE-90CF-4161-9C6E-9162115A54DD">

        <Package Description="Installs a file that will be patched."
            Comments="This Product does not install any executables"
            InstallerVersion="200"
            Compressed="yes" />

        <Media Id="1" Cabinet="product.cab" EmbedCab="yes" />
        <FeatureRef Id="SampleProductFeature"/>

    </Product>

    <Fragment>
        <Feature Id="SampleProductFeature" Title="Sample Product Feature" Level="1">
            <ComponentRef Id="File_1.txt" />
            <ComponentRef Id="File_2.txt" />
            <ComponentRef Id="File_3.txt" />

        </Feature>
    </Fragment>

    <Fragment>
        <DirectoryRef Id="SampleProductFolder">
            <Component Id="File_1.txt" Guid="{d738b2a9-0dbc-4381-9efd-5801723b1569}" DiskId="1">
                <File Id="File_1.txt" Name="File 1.txt" Source=".\$(var.Version)\File 1.txt" />             
            </Component>
            <Component Id="File_2.txt" Guid="{b9b267a3-5648-4e32-9ab1-f3032980f6c2}" DiskId="1">
                <File Id="File_2.txt" Name="File 2.txt" Source=".\$(var.Version)\File 2.txt" />             
            </Component>
            <Component Id="File_3.txt" Guid="{1df728ae-333d-47c5-9558-c0923f958a8d}" DiskId="1">                
                <File Id="File_3.txt" Name="File 3.txt" Source=".\$(var.Version)\File 3.txt" />
            </Component>            

        </DirectoryRef>
    </Fragment>

    <Fragment>
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder" Name="PFiles">
                <Directory Id="SampleProductFolder" Name="Patch Sample Directory">
                </Directory>
            </Directory>
        </Directory>
    </Fragment>
</Wix> 
```

产品 1.1.wxs

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="48C49ACE-90CF-4161-9C6E-9162115A54DD"
        Name="WiX Patch Example Product"
        Language="1033"
        Version="1.1.0"
        Manufacturer="Dynamo Corporation"
        UpgradeCode="48C49ACE-90CF-4161-9C6E-9162115A54DD">

        <Package Description="Installs a file that will be patched."
            Comments="This Product does not install any executables"
            InstallerVersion="200"
            Compressed="yes" />

        <Media Id="1" Cabinet="product.cab" EmbedCab="yes" />
        <FeatureRef Id="SampleProductFeature"/>

    </Product>

    <Fragment>
        <Feature Id="SampleProductFeature" Title="Sample Product Feature" Level="1">
            <ComponentRef Id="File_1.txt" />
            <ComponentRef Id="File_2.txt" />
            <ComponentRef Id="File_3.txt" />

            <ComponentRef Id="File_4.txt" />
        </Feature>
    </Fragment>

    <Fragment>
        <DirectoryRef Id="SampleProductFolder">
            <Component Id="File_1.txt" Guid="{d738b2a9-0dbc-4381-9efd-5801723b1569}" DiskId="1">
                <File Id="File_1.txt" Name="File 1.txt" Source=".\$(var.Version)\File 1.txt" />             
            </Component>
            <Component Id="File_2.txt" Guid="{b9b267a3-5648-4e32-9ab1-f3032980f6c2}" DiskId="1">
                <File Id="File_2.txt" Name="File 2.txt" Source=".\$(var.Version)\File 2.txt" />             
            </Component>
            <Component Id="File_3.txt" Guid="{1df728ae-333d-47c5-9558-c0923f958a8d}" DiskId="1">                
                <File Id="File_3.txt" Name="File 3.txt" Source=".\$(var.Version)\File 3.txt" />
            </Component>

            <Component Id="File_4.txt" Guid="{f728f62d-91f4-4c78-b2fe-65a9f0f6043c}" DiskId="1">                
                <File Id="File_4.txt" Name="File 4.txt" Source=".\$(var.Version)\File 4.txt" />
            </Component>        
        </DirectoryRef>
    </Fragment>

    <Fragment>
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder" Name="PFiles">
                <Directory Id="SampleProductFolder" Name="Patch Sample Directory">
                </Directory>
            </Directory>
        </Directory>
    </Fragment>
</Wix> 
```

产品 1.2.wxs

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">

    <Product Id="48C49ACE-90CF-4161-9C6E-9162115A54DD"  
        Name="WiX Patch Example Product"
        Language="1033"
        Version="1.2.0"
        Manufacturer="Dynamo Corporation"
        UpgradeCode="48C49ACE-90CF-4161-9C6E-9162115A54DD">

        <Package Description="Installs a file that will be patched."
            Comments="This Product does not install any executables"
            InstallerVersion="200"
            Compressed="yes" />

        <Media Id="1" Cabinet="product.cab" EmbedCab="yes" />
        <FeatureRef Id="SampleProductFeature"/>

    </Product>

    <Fragment>
        <Feature Id="SampleProductFeature" Title="Sample Product Feature" Level="1">
            <ComponentRef Id="File_1.txt" />
            <ComponentRef Id="File_2.txt" />
            <ComponentRef Id="File_3.txt" />

            <ComponentRef Id="File_4.txt" />
        </Feature>
    </Fragment>

    <Fragment>
        <DirectoryRef Id="SampleProductFolder">
            <Component Id="File_1.txt" Guid="{d738b2a9-0dbc-4381-9efd-5801723b1569}" DiskId="1">
                <File Id="File_1.txt" Name="File 1.txt" Source=".\$(var.Version)\File 1.txt" />             
            </Component>
            <Component Id="File_2.txt" Guid="{b9b267a3-5648-4e32-9ab1-f3032980f6c2}" DiskId="1">
                <File Id="File_2.txt" Name="File 2.txt" Source=".\$(var.Version)\File 2.txt" />             
            </Component>
            <Component Id="File_3.txt" Guid="{1df728ae-333d-47c5-9558-c0923f958a8d}" DiskId="1">                
                <File Id="File_3.txt" Name="File 3.txt" Source=".\$(var.Version)\File 3.txt" />
            </Component>

            <Component Id="File_4.txt" Guid="{f728f62d-91f4-4c78-b2fe-65a9f0f6043c}" DiskId="1">                
                <File Id="File_4.txt" Name="File 4.txt" Source=".\$(var.Version)\File 4.txt" />
            </Component>        
        </DirectoryRef>
    </Fragment>

    <Fragment>
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder" Name="PFiles">
                <Directory Id="SampleProductFolder" Name="Patch Sample Directory">
                </Directory>
            </Directory>
        </Directory>
    </Fragment>
</Wix> 
```

补丁 1.1

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Patch 
        AllowRemoval="yes"
        Manufacturer="Dynamo Corp" 
        MoreInfoURL="http://www.dynamocorp.com/"
        DisplayName="Sample Patch" 
        Description="Small Update Patch" 
        Classification="Update"
        OptimizedInstallMode="yes">

        <Media Id="8000" Cabinet="RTM.cab" CompressionLevel="none">
            <PatchBaseline Id="RTM">

            </PatchBaseline>
        </Media>

        <PatchFamilyRef Id="SamplePatchFamily"/>    
    </Patch>

    <Fragment>    
        <PatchFamily Id='SamplePatchFamily' Version='1.1.0' Supersede='no'>

        </PatchFamily>
    </Fragment>
</Wix> 
```

补丁 1.2

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Patch 
        AllowRemoval="yes"
        Manufacturer="Dynamo Corp" 
        MoreInfoURL="http://www.dynamocorp.com/"
        DisplayName="Sample Patch" 
        Description="Small Update Patch" 
        Classification="Update"
        OptimizedInstallMode="yes">

        <Media Id="8000" Cabinet="RTM.cab" CompressionLevel="none">
            <PatchBaseline Id="RTM">

            </PatchBaseline>
        </Media>

        <PatchFamilyRef Id="SamplePatchFamily"/>    
    </Patch>

    <Fragment>    
        <PatchFamily Id='SamplePatchFamily' Version='1.2.0' Supersede='no'>

        </PatchFamily>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-28T11:14:31.137

使您的 ProductId 静态将有助于修补方案，每个下一个补丁都将起作用。

但请记住，在您的 1.3 版补丁（甚至 1.0 版 msi）之后运行 .msi 例如 1.5 版将失败，并显示：“安装了另一个版本的产品...”消息。因此，当您坚持使用相同的产品 ID 时，只需提供补丁（从 .msi 创建的 .msp），当您希望提供新的 .msi 时，请确保更改产品 ID。

我肯定回答得太晚了，但我只是在这个问题上浪费了整个工作日，并决定把它放在上面，这样其他人就不必这样做了。

我猜MSI+MSP更新的两条规则是：

1.  切勿从具有不同产品 ID 的 MSI 制作补丁，它们将无法找到产品并且无法运行

2.  永远不要提供具有相同产品 ID 的不同 MSI，它们将因“安装了另一个版本”而失败并且不会运行

如果一个不同的 MSI 只是用相同的产品 ID 覆盖了前一个，那会简单得多，但它的方式必须有充分的理由......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T20:05:27.053

You need a static product id across the board. You can use Orca to go in and find the product id from your 1.0 msi. Use that guid in your 1.1 and 1.2 product.wxs ProductId.

# c# - 将小 int 转换为 int 时出错

> ID：12819408
> 
> 赞同：14
> 
> 时间：2012-10-10T12:31:17.437
> 
> 标签：c#, sql-server, casting

这个错误看起来是由在服务器上安装框架 4.5 引起的，即使项目仍然针对 4.0。

4.5 替换了 CLR，看起来它在将 tinyint 类型的对象拆箱为 int 方面发生了变化。这在 4.0 中有效，但在安装 4.5 后无效。

============================================

请在回答之前阅读整个问题，当前的大多数答案都不能回答我所问的问题。

我们今天在从 sql 中的 tinyint 到使用 int 的转换中遇到了错误

```
Daterow datarow = GetOneDatarow(connection,
                         "SELECT tinyintcolumn FROM table1 WHERE id = 4");
int i = (int)datarow["tinyintcolumn"]; 
```

这是已经在产品中使用了几年的旧代码，没有任何更改，并且一直运行到昨天。（而且它不是确切的代码，只是足以显示上下文）

=== 更新

确切的错误消息是：“指定的演员表无效！” 最后一行

```
int i = (int)datarow["tinyintcolumn"]; 
```

是我们的代码中的确切行，仅更改了变量名和列名。

并且数据库列是 tinyint，默认值为 0，没有索引或其他约束。

=== 结束更新

=== 更新 2

Henk Holterman 在他的回复中告诉我，即使对于专门为 4.0 编译的项目，FW 4.5 也替换了 4.0 的 CLR，这可能会像这样远程改变现有的 4.0 行为。

我会再开放一段时间，但他的回答是迄今为止最有希望的：D === End

几周前我们从框架 3.5 更改为 4.0，但直到昨天下午重新编译后才发生这种情况，昨天早上相同的代码（即使在重新编译之后）像发条一样工作。

有谁知道为什么这以前有效而现在无效？

Microsoft 是否进行了任何内部更改以删除隐式转换，或者它以前是否通过纯魔法起作用？

我们通过将数据库列更改为 int 来解决它，但我仍然对可能导致它现在失败的原因感到好奇。

=== 更新 3

只是为了完成这个。

我发现了框架之间的变化。在更新中，微软改变了装箱和拆箱的方式。这导致了从 byte 到 int 的隐式转换，当字节被装箱时，旧固件确实失败了，就像它在数据表中一样。

未装箱的字节将在 4.5 中隐式转换为 int，但装箱的字节是不能隐式转换的通用对象。

不，这在 3.5 SP1 中已更改，因此我们的 FW 4.0 也应该失败，除非对 SP1 的更新不在 4.0 更新中。这还没有回答:)

这是 MS 的罚单；) [https://connect.microsoft.com/VisualStudio/feedback/details/766887/casting-tinyint-from-sql-datarow-to-int-no-longer-possible](https://connect.microsoft.com/VisualStudio/feedback/details/766887/casting-tinyint-from-sql-datarow-to-int-no-longer-possible)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-10T12:37:16.310

它不应该起作用。这使得框架中的某些东西很可能是固定的。

C#中的问题：

```
byte b = 3;       // TinyInt is a Byte
object o = b;     // DataRow[i] is an object
int i = (int)o;   // invalid cast 
```

修复：

```
int i = (byte)datarow["tinyintcolumn"]; 
```

* * *

从下面的评论线索中：

> 我们已经安装了它，但是这个项目没有编译到 4.5，只编译到 4.0，......可能是这样吗？

> 是的，框架 4.5 替换了 4.0 的部分内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T12:35:38.387

默认情况下，TinyInt 类型将返回一个字节类型，该类型本身可以转换为 int，但 db 的 TinyInt 类型不是，所以试试这个：

```
(int)(byte)datarow["tinyintcolumn"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T12:36:46.197

因为`tinyint`是一种`Byte`类型。这是一个列表：[列表](http://msdn.microsoft.com/en-us/library/ms131092.aspx)

您需要转换`byte array`为`int`. 这里的解决方案：[解决方案](https://stackoverflow.com/a/1922136/1252575)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-26T09:45:00.220

为了使答案可与其他连接库一起使用，我分享了这个。我正在使用 MariaDb 和 MySql 连接器/网络，因此选择的答案对我没有直接作用。所以首先你必须找出返回的 sql tinyint 字段的 C# 数据类型。

这是示例：

我正在使用 MySqlHelper.ExecuteDataset() 并执行查询以获取 tinyint(4) 列：

```
SELECT tinyintcolumn FROM datatable WHERE ... 
```

我收到“指定的演员表无效！” 即使我在 SQL 查询中使用了强制转换函数，也会出现异常：

```
SELECT CAST(tinyintcolumn AS int) ... 
```

我首先尝试了这里和其他地方的所有建议，但最终奏效的是找出 c# 中的字段类型是什么：

```
DataTable datatable MySqlHelper.ExecuteDataset(connString, sql).Tables[0];
DataRow datarow = datatable .Rows[0];
Type datatype = datarow.ItemArray[0].GetType(); 
```

结果：**System.SByte**！所以对我来说，使用其中之一很好：

```
SByte sbTinyint = datarow.Field<SByte>(0);
SByte sbTinyint2 = (SByte)datarow.ItemArray[0];
int iTinyint = (int)datarow.Field<SByte>(0);
int iTinyint2 = (int)(SByte)datarow.ItemArray[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T12:43:09.460

I believe the size of SQL's tinyint is 1 byte (8 bits) so try casting it to a 'byte' instead of casting it to an 'int' (which is 32 bits). But I have not tried this since I don't use tinyint in my database.

```
byte i = (byte)datarow["tinyintcolumn"]; 
```

Also, if your column in the database tinyintcolumn is nullable, you also need to take that into account when you cast the value.

# razor - 在 cshtml 模板中保留 ascii

> ID：12819411
> 
> 赞同：2
> 
> 时间：2012-10-10T12:31:19.590
> 
> 标签：razor, webmatrix, asp.net-webpages

我想显示这样的特殊字符：█</p>

如果我把它放在一个 .cshtml 文件中，它会通过编码/解码搞砸。我怎样才能保持我的性格？

我已经尝试了以下方法：

```
@Html.Raw("█")
@("█")
@Html.Raw(Server.HtmlEncode("█")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:12:25.700

刚刚解决了我的问题：文件本身没有用 UTF8+BOM 编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:40:29.570

您可以使用它的 HTML 实体：

（十进制）`&#9608;`

（十六进制）`&#x2588;`

# video - 如何在 robohelp 中创建的 chm 文件中播放视频（swf）？

> ID：12819412
> 
> 赞同：0
> 
> 时间：2012-10-10T12:31:19.357
> 
> 标签：video, html-helper, chm, robohelp

我使用 robohelp 9 制作 chm 帮助文件。我将“超链接”放到计算机上的视频中，当尝试“查看”这些 html 时，它会显示视频链接并播放它们。这工作正常。但是当我生成 .chm 并从那里尝试播放时，它会显示用于下载文件的对话框。我想要的是也在生成的 .chm 文件中播放该视频。

怎么做？

还必须指出，当我生成“Web 帮助”文件时，它正在工作（它播放视频）。

配置什么来播放 .chm 文件中的视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:34:53.417

使用**插入**>>**多媒体**将 SWF 文件嵌入到帮助主题中。

如果仍然无法正常工作，请确保 SWF 文件已列在项目管理器中。如果未列出，请手动将 SWF 文件作为 Baggage 文件包含在您的 RoboHelp 项目中，方法是右键单击要包含它的文件夹，然后选择**新建**>> **Baggage 文件**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-31T17:23:23.870

在您的 html 代码中放置一个框架，并在其中放置一个视频。视频现在将与播放器一起显示。

我不喜欢使用 swf 路径，因为并非所有计算机都可以使用它，而且我听说它正在逐步淘汰。

# android - TokenException：无法添加窗口？

> ID：12819416
> 
> 赞同：0
> 
> 时间：2012-10-10T12:31:27.560
> 
> 标签：android, progressdialog

```
private void runDialog(final int seconds){
        new Thread(new Runnable(){
          public void run(){
            try {
                    Thread.sleep(seconds * 1000);
                    progressDialog.dismiss();
            runOnUiThread(new Runnable()
            {
              public void run()
              {
                        // Your Alert Code
                        AlertDialog connection = new AlertDialog.Builder(
                                NewsScreenActivity.this)
                                .setTitle("No Network Found")
                                .setMessage(
                                        "service unavailable, please try again later")
                                .setPositiveButton("Ok",
                                        new DialogInterface.OnClickListener() {

                                            public void onClick(DialogInterface dialog,
                                                    int whichButton) {

                                              finish();
                                        //        progressDialog.dismiss();
                                            }
                                        }).create();

                        connection.show();
              }
            });

          }catch (InterruptedException e) {
              Log.i("=================== Connection TimeO5555555555", "======");
             // Toast.makeText(getBaseContext(), "service unavailable, please try again later", Toast.LENGTH_SHORT).show();
            e.printStackTrace();
          }
          }
        }).start();
  } 
```

错误

```
 10-10 17:55:13.299: E/AndroidRuntime(11643): FATAL EXCEPTION: main
    10-10 17:55:13.299: E/AndroidRuntime(11643): android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@40531320 is not valid; is your activity running?
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at android.view.ViewRoot.setView(ViewRoot.java:528)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at android.view.Window$LocalWindowManager.addView(Window.java:424)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at android.app.Dialog.show(Dialog.java:241)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at com.MariTimeGlobalNews.NewsScreenActivity$7$1.run(NewsScreenActivity.java:587)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at android.os.Handler.handleCallback(Handler.java:587)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at android.os.Handler.dispatchMessage(Handler.java:92)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at android.os.Looper.loop(Looper.java:123)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at android.app.ActivityThread.main(ActivityThread.java:3729)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at java.lang.reflect.Method.invokeNative(Native Method)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at java.lang.reflect.Method.invoke(Method.java:507)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
    10-10 17:55:13.299: E/AndroidRuntime(11643):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:37:57.700

您正在保留对已被销毁（通常是因为您正在使用 onCreateDialog 或您将 Activity 传递给没有'当 Activity 被销毁时不会被销毁）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:47:15.090

线程中的上下文问题。所以请使用处理程序。 [http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

# facebook - Facebook“喜欢”按钮显示主页数量而不是特定文章

> ID：12819419
> 
> 赞同：2
> 
> 时间：2012-10-10T12:31:32.897
> 
> 标签：facebook

我有一个带有新闻部分的网站，并且想在每个帖子中放置单独的“喜欢”按钮。问题是某些按钮显示的是根数，而不是特定页面/帖子的计数。

最奇怪的是它在其中一个页面中有效，但在其他页面中无效。

例如，计数不正确的页面会返回到根页面： http: [//lounge.obviousmag.org/apaixonadamente_curiosa/2012/10/arte-na-ponta-dos-dedos.html](http://lounge.obviousmag.org/apaixonadamente_curiosa/2012/10/arte-na-ponta-dos-dedos.html)

另一个页面，具有正确的计数和 URL： http: [//lounge.obviousmag.org/embriaguez_artistica/2012/10/reflexao-fotografia-e-influencias.html](http://lounge.obviousmag.org/embriaguez_artistica/2012/10/reflexao-fotografia-e-influencias.html)

页面中的代码是相同的，所以我不知道我做错了什么。

有什么猜测吗？

# stl - 检查 std::map 的所有值是否相等的最简单方法

> ID：12819423
> 
> 赞同：2
> 
> 时间：2012-10-10T12:31:46.280
> 
> 标签：stl, stdmap

检查某些 std::map 的值对于所有键是否相等，而不（至少，可见）遍历所有键的最简单方法是什么？可以一次操作完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:56:24.503

获取第一个元素的值，然后使用[`std::all_of`](http://en.cppreference.com/w/cpp/algorithm/all_any_none_of)自定义谓词检查其余元素。就像是：

```
if (!mp.empty()) {
    int val = mp.begin()->second;
    result = std::all_of(std::next(mp.begin()), mp.end(), 
                         [val](typename <insert map type>::const_reference t){ return t->second == val; });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:33:30.243

使用[`std::unique`](http://en.cppreference.com/w/cpp/algorithm/unique)然后验证 map 的开始迭代器和返回的结束迭代器之间的距离[`std::unique`](http://en.cppreference.com/w/cpp/algorithm/unique)为 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:23:15.393

此功能可能适合您的需求

```
template <typename Map>
bool IsUnique(const Map& i_map)
  {
  return std::count_if(i_map.cbegin(), i_map.cend(), 
      [&i_map] (typename Map::const_reference v)
      { 
      return v.second == i_map.cbegin()->second; 
      }) == i_map.size();
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T13:10:15.623

如果您可以接受一个冗余比较，您甚至可以不使用 if 语句使用 std::all_of 检查空映射：

```
template<typename Key, typename Value>
bool all_equal(std::map<Key, Value> const& map)
{
    // the lambda will only get called when the map is not empty
    // so we can safely access begin()->second
    auto const cmpWithFirst = [&](std::pair<Key,Value> const& i)
    {
        return map.begin()->second == i->second;
    };

    return std::all_of(map.begin(), map.end(), cmpWithFirst);
} 
```

如果有的话，这会将所有元素与第一个元素进行比较，包括第一个元素与第一个元素的比较。

# c - 如何将 fork() 移植到 Vxwork

> ID：12819428
> 
> 赞同：0
> 
> 时间：2012-10-10T12:32:06.953
> 
> 标签：c, linux, porting, embedded-linux, vxworks

我正在将程序从 GNU/Linux 移植到 VxWorks，我遇到了一个问题，`fork()`我找不到替代方案；VxWork 的 API 提供了两个有用的调用`taskSpawn( )`和`rtpSpawn( )`spwan RTP/Task，但这些 API 不会重复调用过程（fork 会）。有人知道将 fork() 移植到 Vxworks 吗？

[VxWorks API 参考](http://www.vxdev.com/docs/vx55man/vxworks/ref/rtnIndex.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:18:15.870

我对 VxWorks 内存模型一无所知，但可能无法移植 fork。这样做的原因是，当一个进程被分叉时，原进程的内存被复制到新进程中。重要的是，这两个进程必须使用相同的内部虚拟地址，否则指针之类的东西将会中断。

显然，两个进程必须具有不同的物理地址，这意味着为了分叉，一个需要具有内存管理单元 (MMU) 的平台，并且内核必须支持允许程序共享相同虚拟地址的内存模型。这就是为什么没有用于创建新线程的 fork 等效项的原因。

除此之外，复制大型流程可能非常昂贵。所以 Linux 使用所谓的写时复制。这意味着 fork 所做的只是将所有内存页面标记为只读。当尝试写入时，会产生中断，然后才会复制内存页面。

实时操作系统 RTOS 不太可能支持写入时复制，因为这意味着内存写入时间不受限制并且违反了操作系统的实时保证。

因此，完全不支持分叉要容易得多，只需实现 API 以生成全新的进程而无需重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:58:56.143

如果我正确地记得我的 vxWork - 你不能。fork() 需要虚拟内存管理，我相信 VxWorks 5.5 没有提供，至少没有实现 fork 所需的完整语义。（如果我没记错的话，它是在 vxwork 6 中添加的）。

# java - 如何在 Java 中使用 Rally Rest API 获取测试集 ID？

> ID：12819433
> 
> 赞同：2
> 
> 时间：2012-10-10T12:32:36.983
> 
> 标签：java, rally

我正在使用以下代码来获取测试集 ID。但它没有给出任何结果

```
QueryRequest testsetRequest = new QueryRequest("Test Set");
testsetRequest.setFetch(new Fetch("FormattedID","Name"));
testsetRequest.setQueryFilter(new QueryFilter("TestSet.Name", "=", "TestSetName"));
QueryResponse testSetQueryResponse = restApi.query(testsetRequest);
System.out.println(String.format("\nTestSet:%d",testSetQueryResponse.getTotalResultCount()));
StringTestSetref=testSetQueryResponse.getResults().get(0).getAsJsonObject().get("_ref").toString();
System.out.println(TestSetref); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:23:28.190

您可能在查询中遇到错误。像这样的代码应该可以工作。如果查询出现问题，else 子句还将帮助您诊断遇到的错误。

```
QueryRequest testsetRequest = new QueryRequest("TestSet"); //no spaces
testsetRequest.setFetch(new Fetch("FormattedID","Name"));     

//No need to specify type again 
testsetRequest.setQueryFilter(new QueryFilter("Name", "=", "TestSetName")); 
QueryResponse testSetQueryResponse = restApi.query(testsetRequest);

if(testSetQueryResponse.wasSuccessful()) {
    for (JsonElement result : testSetQueryResponse.getResults()) {
        //handle results
    }
} else {
    //See what error occurred
    for (String err : testSetQueryResponse.getErrors()) {
        System.err.println("\t" + err);
    }
} 
```

# json - Linq to Json 使用 Like 子句

> ID：12819437
> 
> 赞同：1
> 
> 时间：2012-10-10T12:32:52.410
> 
> 标签：json, linq

我有一个 MVC 3 Web 应用程序并返回一个 JSON 对象，我想使用 Linq 来限制返回给客户端 jquery 的结果。

Json 响应采用以下结构：

```
{
  "Data": {
"Items": [
  {
    "Result": {
      "Id": "e2ba4912-c387-4f54-b55e-06742a6858db",
      "Name": "SomeOtherSetting",
      "Value": "500",
      "Archived": false
     },
    "Result": {
      "Id": "17c27584-cea8-42c2-b6c4-0b30625ac3ce",
      "Name": "Setting2",
      "Value": "600",
      "Archived": false
    },
    "Result": {
      "Id": "17c27584-cea8-42c2-b6c4-0b30625ac3ce",
      "Name": "Setting3",
      "Value": "700",
      "Archived": false
    }
   }]
}
} 
```

……

例如，我需要返回或获取名称为“设置”的 json 项目。在示例中，这将仅返回 2 个 Json 节点。

我的 Linq 非常有限，我所拥有的是：设置是存储 Json 响应的位置。

```
NewtonSoft.Json.Linq.JObject data = NewtonSoft.Json.Linq.JObject.Parse(Settings);

var result = from p in data["Data"]["Items"].Children()
    where (p["Result"]["Name"].Contains("Expenses.Help.Tip"))
     select new { Name = (string)p["Result"]["Name"], Value = (string)p["Result"]["Value"] }; 
```

当我运行它时，我的结果一无所获。谁能帮助并告诉我我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:20:52.290

好吧，我不是 Json 专家，但我认为您的 Json 结构存在一些问题。

我尝试了一个[在线解析器](http://json.parser.online.fr/)，解析只得到了第三个结果......（尝试在左侧窗口中复制您的代码，并查看 JS eval.

代替

```
"Items": [
  {
    "Result": {

     },
    "Result": {

    },
    "Result": {

    }
   }] 
```

您应该将 Items 数组（每个`'Result'`）的每个元素放入`{}`.

```
"Items": [
  {
    {"Result": {

      }
    },
    {"Result": {

      }
    },
    {"Result": {

      }
   }] 
```

我通过将您的 Json 文件更改为

```
 {
  "Data": {
"Items": [
   {
    "Result": {
      "Id": "e2ba4912-c387-4f54-b55e-06742a6858db",
      "Name": "SomeOtherSetting",
      "Value": "500",
      "Archived": false
      }
    },
    {
     "Result": {
      "Id": "17c27584-cea8-42c2-b6c4-0b30625ac3ce",
      "Name": "Setting2",
      "Value": "600",
      "Archived": false
      }
    },
    {
     "Result": {
      "Id": "17c27584-cea8-42c2-b6c4-0b30625ac3ce",
      "Name": "Setting3",
      "Value": "700",
      "Archived": false
    }
   }]
  }
} 
```

使用

```
var data = JObject.Parse(test)["Data"]["Items"].Children()
        .Where(m => m["Result"]["Name"].Value<string>().Contains("Setting"))
        .Select(m => new
                         {
                             Name = m["Result"]["Name"].Value<string>(),
                             Value = m["Result"]["Value"].Value<int>()
                         })
        .ToList(); 
```

# winforms - 图片框图像中的内存泄漏

> ID：12819443
> 
> 赞同：2
> 
> 时间：2012-10-10T12:33:05.093
> 
> 标签：winforms, visual-studio-2010, visual-c++, memory-leaks, picturebox

我制作了一个程序，在该程序中我再次使用此代码更改图片框的图像

```
while(1)
{
    this->pictureBox1->Refresh();
    System::Drawing::Bitmap ^bmp;
    bmp=drawImageMeter(data.Max);
    this->pictureBox1->Image =pictureBox1->Image->FromHbitmap(bmp->GetHbitmap());
    delete bmp;
} 
```

`drawImageMeter(data.Max);`是制作位图并返回它的函数。

我的问题是它在这条线上显示内存泄漏

```
this->pictureBox1->Image =pictureBox1->Image->FromHbitmap(bmp->GetHbitmap()); 
```

英特尔 Vtune 在同一行显示此泄漏：

```
P810        Memory leak form2.h  Form1.exe  808 New

P34     Kernel resource leak    form2.h  Form1.exe      Not fixed 
```

编辑代码...

```
delete pictureBox1->Image;
pictureBox1->Image=nullptr;
this->pictureBox1->Refresh();                   
bmp=drawImageMeter(data.Max);
System::IntPtr hbitmap = bmp->GetHbitmap();
this->pictureBox1->Image =pictureBox1->Image->FromHbitmap(hbitmap);//Memory LEAK & Kernel Resource Leak
delete bmp;
DeleteObject((HGDIOBJ)hbitmap ); 
```

之后我没有得到 GDI 资源泄漏但仍然在这条线上得到内存泄漏..

```
this->pictureBox1->Image =pictureBox1->Image->FromHbitmap(hbitmap);//Memory LEAK 
```

**drawImageMeter() 定义**

```
System::Drawing::Bitmap^ drawImageMeter(float intensity_value)
{
    IplImage  *Background=cvLoadImage("Dialer.bmp", 1); //Memory Leak
        int width,height;
        width=Background->width;
        height=Background->height;
        if(counter==1)
        {
            counter++;
        needle_center.x=width/2;
        needle_center.y=height/2; 
        needle_top.x=needle_center.x;
        needle_top.y=needle_center.y-140;
        }
        double const PI = 3.14159265358979323;
           int x1 = needle_top.x; 
           int y1 = needle_top.y;

           int x0=needle_center.x;
           int y0=needle_center.y;
           float angle;
            CurrIntensity = intensity_value;
            angle = CurrIntensity-PreIntensity;
            angle= 0.0703125f * angle;
           // degrees, not radians
           float radians = angle * (PI / 180.0f);   // convert degrees to radians
           if (current_max==1)
            {
                current_max++;
                int N1x1 = needle_top.x; 
                int N1y1 = needle_top.y;
                needle1_top.x = ((N1x1-x0) * cos(radians)) - ((N1y1-y0) * sin(radians)) + x0; 
                needle1_top.y = ((N1x1-x0) * sin(radians)) + ((N1y1-y0) * cos(radians)) + y0;
            }
           needle_top.x = ((x1-x0) * cos(radians)) - ((y1-y0) * sin(radians)) + x0; 
           needle_top.y = ((x1-x0) * sin(radians)) + ((y1-y0) * cos(radians)) + y0;

           cvLine(Background, needle_center, needle1_top, CV_RGB(0, 0, 255), 1, 4, 0);

           cvLine(Background, needle_center, needle_top, CV_RGB(255, 0, 0), 1, 4, 0);
         System::Drawing::Bitmap ^bmp = gcnew System::Drawing::Bitmap(Background->width,Background->height,Background->widthStep,System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr)Background->imageData);
         PreIntensity = CurrIntensity;
         return bmp;
    } 
```

在这个函数中，我在写 //Memory Leak. 如果我将在此处发布此图像，我将无法在此函数中发布此 IplImage *Background，因此我将无法在 PitureBox 中看到图像并且正在关闭此应用程序。

谁能帮我解决这个问题。

谢谢。

# android - 资源无法解析或不是字段？

> ID：12819445
> 
> 赞同：0
> 
> 时间：2012-10-10T12:33:13.423
> 
> 标签：android

我从教程中复制粘贴了所有内容，其中 3 个保存了，但发生了奇怪的事情。

它说我的`Chronometer`和按钮无法解析或不是一个字段。

秒表.java

```
package com.example.stopwatch2;

import android.os.Bundle;
import android.os.SystemClock;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Chronometer;

public class StopWatch extends Activity {
    Chronometer mChronometer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_stop_watch);Button button;

        mChronometer = (Chronometer) findViewById(R.id.chronometer);

        // Watch for button clicks.
        button = (Button) findViewById(R.id.start);
        button.setOnClickListener(mStartListener);

        button = (Button) findViewById(R.id.stop);
        button.setOnClickListener(mStopListener);

        button = (Button) findViewById(R.id.reset);
        button.setOnClickListener(mResetListener);

    }

    View.OnClickListener mStartListener = new OnClickListener() {
        public void onClick(View v) {
            mChronometer.start();
        }
    };

    View.OnClickListener mStopListener = new OnClickListener() {
        public void onClick(View v) {
            mChronometer.stop();
        }
    };

    View.OnClickListener mResetListener = new OnClickListener() {
        public void onClick(View v) {
            mChronometer.setBase(SystemClock.elapsedRealtime());
        }
    };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_stop_watch, menu);
        return true;
    }
} 
```

activity_stop_watch.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="vertical" android:padding="4dip"
    xmlns:tools="http://schemas.android.com/tools"
    android:gravity="center_horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <Chronometer android:id="@+id/chronometer"
        android:format="@string/chronometer_initial_format"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:paddingBottom="30dip"
        android:paddingTop="30dip"
        />

    <Button android:id="@+id/start"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Start">
        <requestFocus />
    </Button>

    <Button android:id="@+id/stop"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Stop">
    </Button>

    <Button android:id="@+id/reset"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Reset">
    </Button>

</LinearLayout> 
```

字符串.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
    <string name="hello">Hello World, StopWatch!</string>
    <string name="app_name">StopWatch</string>
    <string name="chronometer_initial_format">Initial format:<xliff:g id="initial-format">%</xliff:g></string>

</resources> 
```

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:07:00.493

尝试清理您的项目。右键单击您的项目并说“干净”。然后尝试再次运行您的应用程序。

另外，另一个提示。不要对所有按钮使用相同的变量名。使用不同的名称，如下所示：

```
// Watch for button clicks.
        buttonStart = (Button) findViewById(R.id.start);
        button.setOnClickListener(mStartListener);

        buttonStop = (Button) findViewById(R.id.stop);
        button.setOnClickListener(mStopListener);

        buttonReset = (Button) findViewById(R.id.reset);
        button.setOnClickListener(mResetListener); 
```

从长远来看，您的代码将更易于管理和调试。

# php - 如何使用php将xml转换为另一个xml

> ID：12819446
> 
> 赞同：1
> 
> 时间：2012-10-10T12:33:16.513
> 
> 标签：php, xml

我想将一个 xml 转换为另一个 xml。例如，如果 xml 标记为字符串，

```
<book>
<title>test</test>
<isbn>1234567890</isbn>
<author>test</author>
<publisher>xyz publishing</publisher>
</book> 
```

我想将上面的xml转换为，

```
<b00>
<t001>test</t001>
<a001>1234567890</a001>
<a002>test</a002>
<p001>xyz publishing </p001>
</b00> 
```

如何使用php转换xml

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:09:43.650

您可以使用 XSLT 进行转换。

### PHP 代码

```
$doc = new DOMDocument();
$doc->load('/path/to/your/stylesheet.xsl');
$xsl = new XSLTProcessor();
$xsl->importStyleSheet($doc);
$doc->load('/path/to/your/file.xml');
echo $xsl->transformToXML($doc); 
```

### XSLT 文件

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" />
    <xsl:template match="/">
        <b00><xsl:apply-templates/></b00>
    </xsl:template>
    <xsl:template match="title">
        <t001><xsl:value-of select="."/></t001>
    </xsl:template>
    <xsl:template match="isbn">
        <a001><xsl:value-of select="."/></a001>
    </xsl:template>
    <xsl:template match="author">
        <a002><xsl:value-of select="."/></a002>
    </xsl:template>
    <xsl:template match="publisher">
        <p001><xsl:value-of select="."/></p001>
    </xsl:template>    
</xsl:stylesheet> 
```

# php - 如何通过 curl 将文件数据发送到 $_FILES 中的另一台服务器

> ID：12819454
> 
> 赞同：0
> 
> 时间：2012-10-10T12:33:43.707
> 
> 标签：php, file, file-upload, curl

我有两台服务器，一台是应用程序服务器，另一台是 API 服务器，API 服务器从`$_FILES`.

所以我的问题是如何将文件数据发送到 API 服务器以便它可以获取数据`$_FILES`？

我需要 CURL 来做到这一点，没有表单发布。

谢谢，

西澳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T06:52:03.943

这是一个通过 POST 发送带有 php/cURL 的文件的简单脚本：

```
<?php
$target_url = 'http://127.0.0.1/accept.php';
    //This needs to be the full path to the file you want to send.
$file_name_with_full_path = realpath('./sample.jpeg');
    /*  the at sign '@' is required before the
     * file name.
     */
$post = array('extra_info' => '123456','file_contents'=>'@'.$file_name_with_full_path);

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$target_url);
    curl_setopt($ch, CURLOPT_POST,1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
    $result=curl_exec ($ch);
    curl_close ($ch);
    echo $result; 
```

这是接受文件的相应脚本。

```
 <?php
$uploaddir = realpath('./') . '/';
$uploadfile = $uploaddir . basename($_FILES['file_contents']['name']);
    if (move_uploaded_file($_FILES['file_contents']['tmp_name'], $uploadfile)) {
        echo "File is valid, and was successfully uploaded.\n";
    } else {
        echo "Possible file upload attack!\n";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T05:41:23.200

来自[php.net](http://uk.php.net/manual/en/function.curl-setopt.php)

```
<?php

/* http://localhost/upload.php:
print_r($_POST);
print_r($_FILES);
*/

$ch = curl_init();

$data = array('name' => 'Foo', 'file' => '@/home/user/test.png');

curl_setopt($ch, CURLOPT_URL, 'http://localhost/upload.php');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

curl_exec($ch);
?> 
```

# php - 如何将客户和项目链接到另一个？

> ID：12819459
> 
> 赞同：0
> 
> 时间：2012-10-10T12:33:59.260
> 
> 标签：php

我对 PHP/MySQl 有点陌生，所以我想要一些关于这些东西如何工作的指南，很难用谷歌搜索这个......

所以，我正在尝试学习 php/mysql，我即将与客户一起写一个小页面，每个客户都可以有几个项目。

所以，我的数据库设置如下（猜想这需要大量修改）： - 客户（id，名称，描述） - 项目（id，名称，描述） - 用户（id，名称）

```
<?php

if(isset($_GET['id'])) {

$query = "SELECT * FROM customers WHERE id = '". $_GET['id']."'";
   $results = mysql_query($query);

   while($row = mysql_fetch_array( $results ))
   {

   echo "<h3>" . $row['name'] . "</h3>";
   echo "<br />";

$query = "SELECT * FROM projects ORDER by name ASC";
   $results = mysql_query($query);

   echo "<table>
            <tbody>";

    while($row = mysql_fetch_array( $results ))
   {
   echo "<tr>
  <td><a href='main.php?id=" . $row['id'] . "'>" . $row['name'] . "</a></td>
  <td>" . $row['description'] . "</td>
        </tr>";
   }
   echo "</tbody>
   </table>";

}

} else {

$query = "SELECT * FROM customers ORDER by name ASC";
   $results = mysql_query($query);

   echo "<table>
         <thead>
          <tr>
            <th width='20%'>Customer</th>
            <th width='80%'>Description</th>   
          </tr>
        </thead>
        <tbody>";

while($row = mysql_fetch_array( $results ))
   {
   echo "<tr>
  <td><a href='main.php?id=" . $row['id'] . "'>" . $row['name'] . "</a></td>
  <td>" . $row['description'] . "</td>
        </tr>";
   }
   echo "</tbody>
   </table>";
}
?> 
```

如您所见，它缺少一些重要的东西，例如，如果我选择客户 A 或 BI 接收相同的项目，我不知道如何分离项目并将它们“绑定”到某个客户。我的意图是将用户“绑定”到项目和客户。

任何指向正确方向的提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:37:14.687

您需要另一个具有键 (customers.id,projects.id) 的表，这样您就可以将每个客户链接到他们自己的项目，并且您需要根据客户的 id 从该表中选择数据。可能您还需要一个客户/用户表，将用户 ID 链接到客户 ID。

为清楚起见进行编辑：新表应类似于：

```
CREATE TABLE customer_projects (
    customer_id INT NOT NULL,
    project_id INT NOT NULL,
    PRIMARY KEY (customer_id, project_id)); 
```

然后，您将每个客户分配到此表中的项目。要获取详细信息（客户名称、项目名称），您需要与其他表进行“连接”，例如：

```
SELECT customers.*, projects.* FROM customer_projects 
LEFT JOIN customers ON customers.id = customer_projects.customer_id 
LEFT JOIN projects ON projects.id = customer_projects.project_id 
WHERE customer_projects.customer_id = '1' // 1 is an example of a customer id. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:37:20.937

您可以`INNER JOIN`在选择查询中有一个，如下所示：

```
"SELECT * FROM customers c INNER JOIN projects p ON p.name = c.name WHERE c.id = '". $_GET['id']."'"; 
```

在这里，我认为您在表中确实**有**一个名称列，与.`customer``project`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:38:38.957

您需要添加一些表格。首先是一个表示从客户到项目的关系的表。这就像

客户编号 | 项目 ID
1 | 1
2 | 3
....

客户和用户也需要相同的内容。

现在您可以参考此表来获取您需要的信息并执行必要的连接来获取您的数据。

# java - eclipse“部署程序集”配置在哪个文件中？

> ID：12819465
> 
> 赞同：10
> 
> 时间：2012-10-10T12:34:07.993
> 
> 标签：java, eclipse

我似乎无法在 .project 文件中找到此配置。我正在寻找一种以编程方式更改此设置的方法，因为“我不知道为什么”每次清理项目时，我的 Eclipse 都会丢失此配置。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-10T13:23:04.043

部署程序集设置存储在文件中：

```
.settings/org.eclipse.wst.common.component 
```

但是，在基本的 J2EE Eclipse 安装中，不应通过清理项目来修改此文件。也许您安装了其他一些插件，在构建期间更新了部署设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-26T09:56:15.163

我遇到了同样的问题，原因是文件**.settings/org.eclipse.wst.common.component**包含 Git 添加的条目。删除它们并重新启动日食对我有用。

# eclipse - 消息：用于部署 Web 服务的 Web 项目 URL 未在 Eclipse 中设置？

> ID：12819467
> 
> 赞同：1
> 
> 时间：2012-10-10T12:34:22.307
> 
> 标签：eclipse, web-services, wsdl, axis2

我正在尝试使用 eclipse 开发一个小型 Web 服务并将其部署到 glassfish。

因此，我创建了一个新的动态 Web 项目和一个新的自顶向下 Web 服务（使用向导）。

当我尝试发布 Web 服务时，出现此错误：

```
"IWAB0054E Web project URL for deployment of Web service is not set in AxisDeployCommand" 
```

我在 errorLog 中看不到任何错误，也不知道在哪里配置此“Web 项目 URL”。你有什么线索吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:51:19.370

我的 wsdl 中的 http 绑定（我使用的是 HTTP 协议而不是 SOAP）似乎有问题。我不知道具体为什么。

使用 SOAP 创建一个新的 WSDL 文件确实有效。

# jquery - Jquery UI 可调整大小的图像强制其他图像也在 div 中移动

> ID：12819469
> 
> 赞同：0
> 
> 时间：2012-10-10T12:34:29.650
> 
> 标签：jquery, jquery-ui, jquery-ui-resizable

[http://jsfiddle.net/maximus392/gcQmM/7/](http://jsfiddle.net/maximus392/gcQmM/7/)

我的问题是可调整大小的图像使另一个图像也在 div 中移动。当我调整图像大小时，我想防止 div 画布上其他内容的移动。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:36:11.427

使您的图像绝对定位：

```
img.item { 
    position:absolute;
} 
```

[演示](http://jsfiddle.net/gcQmM/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T13:50:11.947

> [http://jsfiddle.net/gcQmM/34/](http://jsfiddle.net/gcQmM/34/)
> 
> ```
> this fiddle is much better i think, and more simple 
> ```

# android - 在我的应用程序中将箭头图标背景颜色更改为蓝色

> ID：12819476
> 
> 赞同：0
> 
> 时间：2012-10-10T12:34:52.713
> 
> 标签：android, android-layout, android-widget, expandablelistview, imageicon

我必须开发一个 ExpandableListView。在这里，我希望将箭头图标背景颜色设置为蓝色。默认箭头`background color`为灰色。但我需要在我的应用程序中将箭头`background color`设为蓝色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:49:24.433

我认为您无法编辑提供给 Group Indicator 的 Default Drawable。剩下的唯一选择是自己创建一个 Drawable 并将其作为背景添加到 Group Indicator 中，如此[处所述。](https://stackoverflow.com/a/10310768/603744)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-27T14:39:32.747

这是设置组指标的有效方法

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:state_empty="true" >
    <layer-list>
        <item
            android:left="0dp"
            android:right="3dp"
            android:top="20dp"
            android:bottom="20dp"
            android:drawable="@drawable/ic_arrow_down">
        </item>
    </layer-list>
</item>

<item
    android:state_expanded="false" >
    <layer-list>
        <item
            android:left="0dp"
            android:right="3dp"
            android:top="20dp"
            android:bottom="20dp"
            android:drawable="@drawable/ic_arrow_up">
        </item>
    </layer-list>
</item> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-05T15:37:44.420

关于颜色的问题没有得到解答。解决方案是更改矢量图像 xml 中的颜色。

打开您的矢量图像并简单地更改填充颜色。或更改位图。机器人：填充颜色

# objective-c - 如何将 NSSplitView 分隔线厚度更改为 1px？

> ID：12819478
> 
> 赞同：3
> 
> 时间：2012-10-10T12:34:54.543
> 
> 标签：objective-c, macos, cocoa, nssplitview

我想为`NSSplitView`Mail.app、Xcode.app 和许多其他 Mac 应用程序制作一个非常薄、只有 1px 宽的分隔线。

有什么好方法可以做到这一点？

我已经尝试在 Interface Builder 中设置分隔线样式以及将子类化为`NSSplitView`override `-dividerThickness`，但我得到的最接近的是 2px，这破坏了分隔线功能（我无法再移动分隔线）。

**编辑：**我知道诸如`RBSplitView`and之类的替代方法`BWSplitView`，但如果可能的话，我想使用`NSSplitView`。基本上，Apple 是如何做到的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T12:59:39.123

您不需要继承 NSSplitView 或进行任何编码。您只需在 Xcode/Interface Builder 中（在 Attributes Inspector 中）将 Style 设置为“Thin Divider”。

可能让您感到困惑的是，您可能在拆分视图中有子视图（很可能是表格视图）。这些子视图也有一个边框，当它们填充整个拆分视图时，它看起来好像拆分视图分隔线是 2-3 像素宽。

因此，您需要做的是将所有（填充）子视图的焦点环设置为“无”，然后禁用它们的边框或将它们稍微移出拆分视图的框架 1 px，这样边框就不可见了。

# javascript - 具有非面板视图的选项卡面板

> ID：12819479
> 
> 赞同：0
> 
> 时间：2012-10-10T12:34:55.510
> 
> 标签：javascript, cordova, sencha-touch, sencha-touch-2

我有一个情况，它有点复杂，所以请多多包涵。

我正在使用 Phonegap 和 Sencha Touch 2 为 iPhone 编写一个应用程序。登录页面在列表中有各种选项，允许用户定向到其他视图（这是通过将视图添加到 Ext.Viewport 并更改活动项目来完成的） .

我想使用 Sencha Tab 面板通过应用程序提供三个视图。

这是我的问题：如何将应用程序定向到选项卡面板上不是选项卡的视图，同时仍然保持这些视图上的用户可以使用选项卡面板？

希望这是有道理的......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:37:33.933

您必须使用带有按钮的默认工具栏来访问您的默认视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:28:26.977

假设以下设置：

*   主视图
    *   选项卡视图容器
        *   查看标签 1
        *   查看标签 2
        *   查看标签 3
    *   另一种观点

你可以像这样切换到“另一个视图”：

```
var otherView = Ext.getCmp('another-view');
var mainView = Ext.getCmp('mainview');
mainView.setActiveItem(otherView); 
```

# c# - C# asp.net SQL 如何通过下拉列表向数据库添加新值？

> ID：12819481
> 
> 赞同：0
> 
> 时间：2012-10-10T12:34:55.183
> 
> 标签：c#, asp.net, sql

下面的代码是我的代码示例如何通过文本框连接和添加我现在想要的是如何使用下拉列表添加... 代码示例如何通过下拉列表添加有人好吗？？？

```
public partial class SQL_Test : System.Web.UI.Page
    {
        SqlConnection myConnection;
        DataSet dataSet;
        string sql;
        SqlDataAdapter dataAdapter;
        protected void Page_Load(object sender, EventArgs e)
        {
            myConnection = new SqlConnection("trusted_connection=yes;" + "database=DataBaseConnection;" + "connection timeout=30;");
            dataSet = new DataSet();
            sql = "SELECT Firstname,Surname FROM BasicInfo";
            dataAdapter = new SqlDataAdapter(sql, myConnection);
            //fill dataset
            dataAdapter.Fill(dataSet, "datafill");

            //bind database to gridviwe
            GridView1.DataSource = dataSet;
            GridView1.DataBind();
        }
        protected void Button1_Click(object sender, EventArgs e)
        {
            myConnection.Open();
            SqlCommand AddCommand = new SqlCommand("INSERT INTO BasicInfo (Firstname,Surname) values(@a,@b)", myConnection);

            if (TextBox1.Text != null && TextBox2.Text != null)
            {
                //TextBox set Parameters
                AddCommand.Parameters.AddWithValue("@a", TextBox1.Text);
                AddCommand.Parameters.AddWithValue("@b", TextBox2.Text);

                //Execute Query
                AddCommand.ExecuteNonQuery();

                //emptied textbox's
                TextBox1.Text = "";
                TextBox1.Text = "";

                //Redirect
                Response.Redirect("SQL-Test.aspx");
            }

            //close connection
            myConnection.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:45:17.840

要从下拉列表中获取所选值，您可以访问 Text 属性。

```
AddCommand.Parameters.AddWithValue("@a", TextBox1.Text);
AddCommand.Parameters.AddWithValue("@d", DropDownList1.Text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:47:58.453

您是否尝试将下拉列表的选定值传递给 sql 命令？如果是这样，您可以使用 AddCommand.Parameters.AddWithValue("@a", Dropdownlist.SelectedValue); 或 AddCommand.Parameters.AddWithValue("@a", Dropdownlist.SelectedText);

# c# - C# 和 Web 服务中的部分类

> ID：12819484
> 
> 赞同：1
> 
> 时间：2012-10-10T12:34:58.873
> 
> 标签：c#, partial-classes

我正在进行的项目有许多部分类（意味着已使用关键字“部分”），但如果它们实际上偏向于任何东西，我不知道（我希望编译器会寻找其他部分（s ) 如果没有发现会引发错误，但事实是它不会引发错误，这导致了我的问题)。

因为我无法告诉当一个部分类被创建时它是否有其他“部分”或者不让我思考部分*是否*必须在同一个程序集中？是否可以通过 WCF 或 Web 服务在程序集之外创建部分类 - 我不知道它在运行时如何工作（我猜编译器会很满意，因为它似乎不太关心）但我找不到任何明确说明是或否的内容。[类似的问题](https://stackoverflow.com/questions/2263712/c-sharp-partial-classes)解释说它不应该以这种方式使用，但实际上不是它可以或不能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T12:36:35.187

> 部分必须在同一个程序集中吗？

是的，他们必须是。这是零件规范的一部分——所有零件都必须在一个组件中。

> 是否可以通过 WCF 或 Web 服务在程序集外部创建部分类

不——那是不可能的。

来自 C# 4.0 语言规范的 §10.2：

> 部分类型的所有部分必须一起编译，以便可以在编译时将这些部分合并为单个类型声明。

# php - 跟踪来自另一个网站的链接

> ID：12819485
> 
> 赞同：0
> 
> 时间：2012-10-10T12:35:00.570
> 
> 标签：php, tracking

我正在寻找一些关于如何跟踪不同网站上的链接点击的资源。例如，我想知道在 google.com 上针对特定图像/文本链接进行了多少点击？我想为 php 框架实现它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:36:29.933

为什么要重新发明轮子？

[Google Analytics Campaign Tracking](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCampaigns)正是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:40:12.270

检查 $_SERVER['HTTP_REFERER']，将其插入到包含 url | 的数据库中。计数 下次有人从同一地址访问该链接时，您将看到该 url 存在于数据库中，您将增加计数行。

祝你好运。

# python - Spyder IDE：为什么断言不起作用？

> ID：12819486
> 
> 赞同：1
> 
> 时间：2012-10-10T12:35:01.180
> 
> 标签：python, spyder

我在 Mac OS (10.7.6) 上使用 Spyder 2.2.0dev，正如它在启动时所说，它使用 Python 2.7.3（默认，2012 年 7 月 24 日，20:20:13）。当我输入

```
assert False 
```

这应该会引发 AssertionError，就像在我的正常 Python 安装中一样。但是，在 Spyder（ipyton 和内部控制台）中，它不会引发任何错误。这必须在某个地方打开吗？或者这是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:49:42.347

`-O`使用选项调用 python 时会跳过断言。我对 spyder 不熟悉，但我敢冒险，某些选项会导致你的 python 运行“优化”

因为断言并不总是运行，所以它们不适合程序流。如果您希望您的程序因为某个条件失败而在某个点停止，请在*套件**内引发一个有意义的异常。`if`*

```
if False:
    raise ValueError("expected True, received", False) 
```

# c++ - USP10.DLL 中的内存泄漏

> ID：12819488
> 
> 赞同：1
> 
> 时间：2012-10-10T12:35:15.230
> 
> 标签：c++, .net, memory-leaks, memory-leak-detector

我在我的一个应用程序（通过 PINVOKE 使用 C++ dll 的 .NET 应用程序）上运行了调试诊断工具 v1.2，它显示以下警告：

**usp10.dll 负责 9.25 MB 的未完成分配。以下是前 2 个内存消耗函数：usp10!MapFullFile+14：9.19 MBytes 的未完成分配。usp10!AllocateCMAPtables+e6：18.50 KB 的未完成分配。**

我不知道这个 USP10.DLL 是从哪里来的。谷歌告诉我这是[一些渲染 unicode-encoded text 的服务](http://en.wikipedia.org/wiki/Uniscribe)。任何想法为什么我看到这个警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:00:27.737

Usp10.dll 是 Uniscribe 脚本处理器。它处理文本的正确格式，任何将文本输出到屏幕的程序都会依赖它。CMap 是一种字体数据结构。您看到它所做的是缓存字体数据，每次需要数据时从字体文件中检索它太昂贵并且会使文本渲染太慢。

在 DLL 被卸载之前，这样的缓存不会被破坏。所以你*真正*看到的是你的工具中的一个缺陷。它在正常的进程清理发生之前**过早**地报告内存泄漏。您应该向供应商提交缺陷报告。

# python - 仅从 python 鼻子运行 doctests

> ID：12819489
> 
> 赞同：4
> 
> 时间：2012-10-10T12:35:17.670
> 
> 标签：python, nose, nosetests

有没有办法使用 Python Nose (nosetests) 只运行 doctests？. 我不想运行任何单元测试，而只想运行 doctest。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:03:41.523

您可以忽略所有常规测试文件来实现该效果。这可以使用`-I`or`--ignore-files`选项和正则表达式（如`.*\.py`.

另一种方法可能是将文档测试保存在单独的目录中并在其上启动鼻子。

* * *

在较新版本的鼻子中，这似乎不再起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-24T16:24:25.220

这应该适用于较新版本的`nose`，但我尚未在嵌套模块上对其进行测试。

```
echo 'import '"$PACKAGE"', inspect; print("\n".join(x[0] for x in inspect.getmembers('"$PACKAGE"', inspect.ismodule)))' | python | xargs -L 1 --replace echo "$PACKAGE.{}" | nose $(cat) --with-doctest 
```

如果您知道一种更简单的方法来提取模块列表以进行 doctest（也许使用鼻子？），那么这就是第一部分真正要做的事情。

# sqlite - 无法从 sqlite 数据库中搜索加密值

> ID：12819491
> 
> 赞同：-1
> 
> 时间：2012-10-10T12:35:34.423
> 
> 标签：sqlite

我正在尝试找到一个带有加密字符串的记录，例如

```
description = "oYAFfrNS2OszASY7Vo182A==" 
```

它存储在 sqlite 数据库中，如

```
oYAFfrNS2OszASY7Vo182A== 
```

在描述字段中。

我的安卓代码是：

```
Cursor c = db.query(table, columns, 
                whereclause, 
                null, 
                null, 
                null, 
                null);          
  try {
    if (c.getCount() == 0) {
      c.close(); 
      return "";
    }
    c.moveToFirst();   

    int namecol = c.getColumnIndex(columns[0]);       
    li = (c.getString(namecol));            
    c.close();    
  } catch (Exception e) {
    System.out.println("Exception:   " + e.toString());
  } 
```

where 表名、where 子句和列肯定都是正确的，但我无法使用我提到的加密字符串获得结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:45:25.403

我通过进一步调试发现了问题，实际上我的加密字符串中有一个新行字符没有传入。

# javascript - 如何在javascript中创建一个包含一组数组并动态为其赋值的数组？

> ID：12819498
> 
> 赞同：1
> 
> 时间：2012-10-10T12:35:59.083
> 
> 标签：javascript, json, multidimensional-array

我想使用 javascript 和 html 创建一个网页，它从用户那里获取许多学生的详细信息并将其动态存储到一个数组中。所以我想我需要的是一个可以动态赋予值的数组数组。我创建了一个页面来获取学生的详细信息，例如“名字”。“姓氏”、“录取编号”和“班级”。我创建了一个表单并获得了这样的值。

```
form = document.std_form;
f_name=form.firstname.value ; 
l_name=form.lastname.value ;
a_no=form.ad_number.value ;
c_no=form.class_no.value ; 
```

f_name 保存名字等等.. 现在我想创建一个数组 student_list，它包含数组 std1、std2、std3 等，每个数组都包含不同学生的详细信息。请告诉我如何创建这样的数组以及如何显示每个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:47:46.410

您可以有一个`student_list`包含所有学生的数组名称和一个`student`包含单个学生的数组。

```
var student_list = new Array(); // this will have to be initialized only once

var student = new Array();  // create instances for students with every student being entered through form

// code to populate student array

student_list.push(student); // push students one by one in main list. Should be executed with each student being saved. 
```

请根据您的需要修改代码。

你可以看看[这个](https://stackoverflow.com/questions/3010840/loop-through-array-in-javascript)，看看如何迭代它。

希望能帮助到你 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:52:56.850

这是一个例子。

[编辑]

```
var studentList = new Array();
var curStudent = new Object();

    var i, num;

    num = getNumberOfRecordsToAdd();    // how ever it is that you know how many the user wants to add

    for (i=0; i<n; i++)
    {
        curStudent.f_name = getFname(i);    // however it is you retrieve these from where ever they are at the moment
        curStudent.l_name = getLname(i);
        curStudent.a_no = getAno(i);
        curStudent.c_no = getCno(i);
        studentList.push(curStudent);
    } 
```

此代码将为您提供一系列项目。每个项目是一个*具有*4 个字段的对象。

IE：

```
//Student1:

    studentList[0]      // student 1 (student0)
    studentList[0].f_name   // student1's f_name
    studentList[0].l_name   // student1's l_name

//Student2:

    studentList[1]      //  student2
    studentList[1].a_no //  student2's a_no
    studentList[1].c_no //  student2's c_no 
```

# jquery - scrollVert 不适用于 fit: true jqCycle

> ID：12819500
> 
> 赞同：0
> 
> 时间：2012-10-10T12:36:05.073
> 
> 标签：jquery, transition, cycle

我正在为我的网站使用 jQuery Cycle。我想使用过渡 scrollVert 并让我的幻灯片响应。它适用于“淡入淡出”之类的过渡。但是对于垂直滚动或其他转换，什么都不会显示。它与 fit:1 选项有关。如果我删除它并删除使我的幻灯片响应的所有其他选项，则过渡工作正常。但是我需要制作一个响应式幻灯片，那么有解决方案吗？

```
$('#slider').cycle({ 
    fx:    'scrollVert',
    slideResize: true,
    containerResize: false,
    width: '100%',
    fit: 1
}); 
```

[http://inspired.xeption.nl](http://inspired.xeption.nl)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:07:29.593

一个可能的解决方案

[http://jsfiddle.net/dVf8V/4/](http://jsfiddle.net/dVf8V/4/)

```
<script src="http://jquery.malsup.com/cycle2/jquery.cycle2.js"></script>
<script src="http://jquery.malsup.com/cycle2/jquery.cycle2.scrollVert.js"></script> 
```

它正在使用循环的第 2 版

# android - 如何在 Android 中填写我的 ListView

> ID：12819501
> 
> 赞同：1
> 
> 时间：2012-10-10T12:36:09.930
> 
> 标签：android, sqlite, listview, android-intent, android-arrayadapter

我是 Android 编程新手，我想建立一个数字学校计划。为此，我使用了一些活动。我想创建一个计划并将它们列出在 ListView 中，用户可以在此控件上的 ListView 中单击并查看所有作业等。

这是我的想法：

![在此处输入图像描述](../Images/9997240ca2d550ec6334b0d1999da350.png)

我为 CreateMain 构建了一个 Activity：

```
 public void createPlan(View view)
    {
        String PlanName;

        Intent intent = new Intent(this,ListenActivity.class);

        EditText planName = (EditText)findViewById(R.id.editText1);

        PlanName = planName.getText().toString();

        intent.putExtra(ListViewMessage, PlanName); 

        startActivity(intent);

    } 
```

还有一个 Activity 用于在 ListView 中显示创建数据

```
import android.os.Bundle;
import android.view.Menu;
import java.util.List;
import android.app.ListActivity;
import android.widget.ArrayAdapter;

public class ListenActivity extends ListActivity {

    private CommentsDataSource datasource;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_open);

        datasource = new CommentsDataSource(this);
        datasource.open();

        List<Comment> values = datasource.getAllComments();

        // Use the SimpleCursorAdapter to show the
        // elements in a ListView
        ArrayAdapter<Comment> adapter = new ArrayAdapter<Comment>(this,
            android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);

        Comment comment = null;

          String[] comments = new String[] { "t1", "t2", "t3" };

          comment = datasource.createComment(comments[1]); 

          adapter.add(comment);

        adapter.notifyDataSetChanged();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_list, menu);
        return true;
    }
} 
```

但我不知道如何在我的 ListView 中将活动中的数据用于此活动。我想使用 SQLite 数据库，但它不起作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:44:58.340

通过活动传递数据的方法很少。由于您将信息存储在`Bundle`我将按照相同的逻辑进行回答。

如果您没有注意到，您在方法中将您的信息存储在**Intent 的 Extra Bundle**中`createPlan`。在那之后，你开始了`Intent`。

根据官方文档：“ *...extras——这是一个包含任何附加信息的Bundle。这可以用来为组件提供扩展信息。例如，如果我们有一个发送电子邮件的动作，我们还可以在此处包含额外的数据，以提供主题、身体等……* ”

因此，要获取您可能会`getIntent().getExtras()`在您的内部使用的信息`ListenActivity`来取回您的信息`Bundle`，然后您将用于存储计划名称的密钥传递给`getIntent().getExtras().getString(your_key)`.

例如：

```
public class ListenActivity extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
   //...your stuff

   String planName = getIntent().getExtras().getString(ListViewMessage);

   //...your stuff
} 
```

}

我不推荐使用 SQLite 来存储少量数据。[如果你真的想使用它，这里](http://www.vogella.com/articles/AndroidSQLite/article.html#databasetutorial)有很好的例子。

# blackberry - 黑莓导航点击调用问题

> ID：12819515
> 
> 赞同：1
> 
> 时间：2012-10-10T12:36:50.010
> 
> 标签：blackberry, navigation, click, invoke

Eclipse 不断告诉我调用问题。这是我收到的消息，如下所示。请帮我解决这个问题。我应该放什么代码来摆脱调用问题。谢谢。

```
Warning!: method 'parsepack.xmlparsing.navigationClick(int,int)' not invoked.
Warning!: method 'parsepack.xmlparsing.insert(String,int)' not invoked. 
```

这是方法`navigationClick()`

```
protected boolean navigationClick(int status, int time)
{
    try
    {
        //navigate here to another screen   
        ui.pushScreen(new ResultScreen()); 
    }
    catch(Exception e)
    {
       System.out.println("Exception:-  : navigationClick() "+e.toString());
    }
    return true;
} 
```

这是方法`insert()`

```
public void insert(String toInsert, int index) 
{
    listElements.addElement(toInsert);
} 
```

这是类**xmlparsing.java**

```
package parsepack;

import java.io.IOException;
import java.io.InputStream;
import java.util.Vector;

import javax.microedition.io.Connector;
import javax.microedition.io.StreamConnection;

import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.DrawStyle;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.ListField;
import net.rim.device.api.ui.component.ListFieldCallback;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.xml.parsers.DocumentBuilder;
import net.rim.device.api.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class xmlparsing extends UiApplication implements ListFieldCallback, FieldChangeListener
{

    public static void main(String[] args)
    {
        xmlparsing app = new xmlparsing();
        app.enterEventDispatcher();
    }

    public long mycolor ;
    Connection _connectionthread;
    private static ListField _list;
    private static Vector listElements = new Vector();
    public MainScreen screen = new MainScreen();
    VerticalFieldManager mainManager;
    VerticalFieldManager subManager;
    UiApplication ui = UiApplication.getUiApplication();

    public  xmlparsing()
    {
        super();
        pushScreen(screen);

        final Bitmap backgroundBitmap = Bitmap.getBitmapResource("blackbackground.png");

        mainManager = new VerticalFieldManager(Manager.NO_VERTICAL_SCROLL | Manager.NO_VERTICAL_SCROLLBAR )
        {

            public void paint(Graphics graphics)
            {
                graphics.drawBitmap(0, 0, Display.getWidth(),Display.getHeight(),backgroundBitmap, 0, 0);

                super.paint(graphics);
            }

        };

        subManager = new VerticalFieldManager(Manager.VERTICAL_SCROLL | Manager.VERTICAL_SCROLLBAR )
        {
            protected void sublayout( int maxWidth, int maxHeight )
            {
                int displayWidth = Display.getWidth();
                int displayHeight = Display.getHeight();

                super.sublayout( displayWidth, displayHeight);
                setExtent( displayWidth, displayHeight);
            }
        };

        screen.add(mainManager);

        _list = new ListField()

        {

            public void paint(Graphics graphics)

            {
                graphics.setColor((int) mycolor);
                super.paint(graphics);

            }

        };
        mycolor = 0x00FFFFFF;
        _list.invalidate();
        _list.setEmptyString("* Feeds Not Available *", DrawStyle.HCENTER);
        _list.setRowHeight(50);
        _list.setCallback(this);
        mainManager.add(subManager);
        listElements.removeAllElements();
        _connectionthread = new Connection();
        _connectionthread.start();
    }

    protected boolean navigationClick(int status, int time)
    {
        try
        {
            //navigate here to another screen
            ui.pushScreen(new ResultScreen());                
        }
        catch(Exception e)
        {
            System.out.println("Exception:-  : navigationClick() "+e.toString());                
        }

        return true;
    }

    private class Connection extends Thread
    {
        public Connection()
        {
            super();
        }

        public void run() {
            Document doc;
            StreamConnection conn = null;
            InputStream is = null;
            try {

                conn = (StreamConnection) Connector.open("http://imforchange.org/international-movement-for-change/testing/data.xml"+";deviceside=true");

                DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
                docBuilderFactory.setIgnoringElementContentWhitespace(true);
                docBuilderFactory.setCoalescing(true);
                DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
                docBuilder.isValidating();
                is = conn.openInputStream();
                doc = docBuilder.parse(is);
                doc.getDocumentElement().normalize();
                NodeList list = doc.getElementsByTagName("eventName");
                for (int i = 0; i < list.getLength(); i++)
                {
                    Node textNode = list.item(i).getFirstChild();
                    listElements.addElement(textNode.getNodeValue());
                }

            } catch (Exception e) {
                System.out.println(e.toString());
            } finally {
                if (is != null) {
                    try { 
                        is.close();
                    } catch (IOException ignored) {
                    }
                }
                if (conn != null) {
                    try { 
                        conn.close(); 
                    }
                    catch (IOException ignored) {
                    }
                }    
            } 
            UiApplication.getUiApplication().invokeLater(new Runnable() {
                public void run() {
                    _list.setSize(listElements.size());
                    subManager.add(_list);
                    screen.invalidate();
                }
            });
        }

    }

    public void drawListRow(ListField list, Graphics g, int index, int y, int w)
    {
        String tes = (String)listElements.elementAt(index);
        int yPos = 0+y;
        g.drawLine(0, yPos, w, yPos);
        g.drawText(tes, 5, 15+y, 0, w);
    }

    public Object get(ListField list, int index)
    {
        return listElements.elementAt(index);
    }
    public int indexOfList(ListField list, String prefix, int string)
    {
        return listElements.indexOf(prefix, string);
    }
    public int getPreferredWidth(ListField list)
    {
        return Display.getWidth();
    }
    public void insert(String toInsert, int index) {
        listElements.addElement(toInsert);
    }

    public void fieldChanged(Field field, int context) {

    }
} 
```

**ResultScreen.java**

```
package parsepack;

import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.container.MainScreen;

public class ResultScreen extends MainScreen {

    public ResultScreen() {
        LabelField resultLabel = new LabelField("Result: ");  
        add(resultLabel);
    }  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:06:00.113

首先，您看到的那些消息是**警告**，而不是**错误**。警告并不总是一个问题，但有时确实如此。在这种情况下，我认为至少第一条消息是有问题的，因此您需要修复它。

1）一是`navigationClick()`方法。编译器告诉您，您有一个`navigationClick()`永远不会从您的任何代码或 BlackBerry OS 基础架构调用的方法的实现。这可能不是你想要的。通常，`navigationClick()`它是您在编写`extends`的 BlackBerry`Field`类之一的类中覆盖的方法。例如，`ButtonField`子类。 `navigationClick()`在这种情况下，将在单击按钮时调用。

但是，您将`navigationClick()`方法放在`UIApplication`主子类中。那不是你想要的。您需要该方法到`override`字段`navigationClick()`类中的方法。我不确定当用户单击时您希望哪个字段调用此方法。但是，例如，您可能会执行以下操作：

```
_list = new ListField()
{
    public void paint(Graphics graphics)
    {
        graphics.setColor((int) mycolor);
        super.paint(graphics);
    }
    protected boolean navigationClick(int status, int time)
    {
        try
        {
            //navigate here to another screen
            ui.pushScreen(new ResultScreen());
        }
        catch(Exception e)
        {
            System.out.println("Exception:-  : navigationClick() "+e.toString());
        }
        return true;
    }
}; 
```

当你的列表被点击时，这会`navigationClick()`被调用，它会摆脱警告。

2）关于警告`insert()`，那只是因为你没有在任何地方使用它。看起来您已经添加了该方法以允许`xmlparsing`类外部的代码能够将项目插入列表中。也许这就是您想要的，但是您还没有编写其他代码来使用该方法。我看到你至少有几个选择：

1.  删除或注释掉该`insert()`方法，直到您需要它为止。这将摆脱警告。
2.  添加更多使用此方法的**代码。**
3.  忽略警告，只需确保您了解警告告诉您您有一些（还）不需要的代码，因为它未使用
4.  如果您知道警告不是问题，并且您不希望过多的警告隐藏实际问题，则可以通过[在 Eclipse 首选项中](https://stackoverflow.com/a/3624776/119114)[执行此](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftask-suppress_warnings.htm)操作或此操作来抑制 Java 程序中的警告。我*通常*不推荐这个。通常，最好修复警告，而不是隐藏它。

# css - CSS标签不应用父div类css样式

> ID：12819516
> 
> 赞同：0
> 
> 时间：2012-10-10T12:36:55.907
> 
> 标签：css, image

谁能向我解释为什么我的左右箭头图像没有进行任何在他们的课堂上完成的 CSS 修改？

HTML

```
<div class="carousel-controls">
    <div class="carousel-prev"><a href="#" >
          <img src="http://localhost:4316/images/Left.png" alt="Previous"/></a></div>
    <div class="carousel-next"><a href="#">
          <img src="http://localhost:4316/images/Right.png" alt="Next" /></a></div>
  </div> 
```

CSS

```
#waterwheel-carousel-default .carousel-controls .carousel-prev {
position:absolute;
bottom:190px;
left:180px;
height:30px;
width:30px;
border:0px solid black;
}

#waterwheel-carousel-default .carousel-controls .carousel-next {
position:absolute;
bottom:190px;
right:150px;
height:30px;
width:30px;
border:0px solid black;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:38:56.967

您需要将特定样式应用于`img`元素本身。

例如，如果您的问题是图像上出现边框，您需要执行以下操作：

```
#waterwheel-carousel-default .carousel-controls img {
   border:0;
} 
```

请注意，我没有包含`.carousel-prev`或`.carousel-next`在选择器中，因此此规则将适用于两者

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:39:02.893

你应该`image`这样定位

```
#waterwheel-carousel-default .carousel-controls .carousel-prev img 
```

**[演示](http://jsfiddle.net/Mj33p/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:40:21.127

因为您设计了 div，而不是 img 标签。你应该添加

```
#waterwheel-carousel-default .carousel-controls .carousel-prev img {
...
}

#waterwheel-carousel-default .carousel-controls .carousel-next img {
...
} 
```

# powershell - 开始作业循环如何调用第二个脚本

> ID：12819519
> 
> 赞同：0
> 
> 时间：2012-10-10T12:37:10.133
> 
> 标签：powershell

谁能告诉我有什么问题 - 我从第一个调用第二个脚本，以便我可以在后台或并行运行比较，由于 IDM 软件中的错误，我需要执行两次循环。

我需要从我的主脚本（第一个脚本）中调用 5 个脚本，以便所有五个脚本并行运行。

第一个脚本 -

====================================================错误信息

无法添加属性，因为它会导致值为 C 的变量 sbtFile 变为无效。+ CategoryInfo : MetadataError: (:) [Start-Job], ValidationMetadataException + FullyQualifiedErrorId : ValidateSetFailure,Microsoft.PowerShell.Commands.StartJobCommand

该命令找不到作业，因为找不到 CompareCtrlMasterCtrlModelESS 名称。验证 Name 参数的值，然后再次尝试该命令。+ CategoryInfo : ObjectNotFound: (CompareCtrlMasterCtrlModelESS:String) [Wait-Job], PSArgumentException + FullyQualifiedErrorId : JobWithSpecifiedNameNotFound,Microsoft.PowerShell.Commands.WaitJobCommand

该命令找不到作业，因为找不到 CompareCtrlMasterCtrlModelESS 名称。验证 Name 参数的值，然后再次尝试该命令。+ CategoryInfo : ObjectNotFound: (CompareCtrlMasterCtrlModelESS:String) [Receive-Job], PSArgumentException + FullyQualifiedErrorId : JobWithSpecifiedNameNotFound,Microsoft.PowerShell.Commands.ReceiveJobCommand

问候纳文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:06:28.623

您`Start-Job -Name "CompareCtrlMasterCtrlModelESS"`在循环中运行，因此您尝试创建多个具有相同名称的作业。尝试`Start-Job -Name "CompareCtrlMasterCtrlModelESS$i"`（带有序数后缀）。

# symfony - 在 Symfony2 上获取 POST 请求

> ID：12819526
> 
> 赞同：8
> 
> 时间：2012-10-10T12:37:22.147
> 
> 标签：symfony

我一直在寻找这个，任何答案都对我有用：

我正在使用它来获取`POST`请求：

```
$request = Request::createFromGlobals();
$order = $request->query->get('Ds_Order'); 
```

但是 Order 永远不会有值，即使名称是正确的。如果我`GET`请求该值存在。

这是 $request 的 var_dump

```
object(Symfony\Component\HttpFoundation\Request)#841 (18) {
    ["attributes"]=>
        object(Symfony\Component\HttpFoundation\ParameterBag)#838 (1) {
    ["parameters":protected]=>
        array(0) {
        }
    }
    ["request"]=>
        object(Symfony\Component\HttpFoundation\ParameterBag)#840 (1) {
        ["parameters":protected]=>
            array(15) {
                ["Ds_Date"]=>
                    string(10) "10/10/2012"
                ["Ds_Hour"]=>
                    string(5) "14:31"
                ["Ds_Currency"]=>
                    string(3) "978"
                ["Ds_Order"]=>
                    string(4) "0026"
            }
     }
} 
```

有谁知道如何访问发送给我的属性？

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-10T12:39:54.560

要检索您必须使用的 POST 请求参数

```
$order = $request->request->get('Ds_Order'); 
```

Symfony 中的读取[请求和响应](http://symfony.com/doc/2.0/book/http_fundamentals.html#requests-and-responses-in-symfony)

```
// retrieve GET variables 
$request->query->get('foo');
// retrieve POST variables
$request->request->get('bar', 'default value if bar does not exist'); 
```

# iphone - insertTimeRanges:ofTracks:atTime:error:

> ID：12819529
> 
> 赞同：1
> 
> 时间：2012-10-10T12:37:33.783
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我正在尝试将多个音频文件与多个剪辑合并。我已成功添加多个视频，但我无法添加多个音频文件。我尝试了以下方式并收到错误“__NSArrayM insertObject:atIndex:]: object cannot be nil”。我也通过添加 AVURLAsset 进行了尝试，但出现错误“[AVURLAsset 资产]​​：无法识别的选择器已发送到实例”。应用程序在此代码的最后一行崩溃。请找出解决方案或举例
`- (BOOL)insertTimeRanges:(NSArray *)timeRanges ofTracks:(NSArray *)tracks atTime:(CMTime)startTime error:(NSError **)error`

```
NSMutableArray *audioUrlArray= [[NSMutableArray alloc]init];
NSMutableArray *audioTimeRangesArray = [[NSMutableArray alloc]init];
CMTime audioTime = kCMTimeZero;
for (int i = 0; i < self.selectedSongsArray.count; i++)
{
    MPMediaItem * songItem = [self.selectedSongsArray objectAtIndex:i];
    NSURL *songURL = [songItem valueForProperty: MPMediaItemPropertyAssetURL];
    AVURLAsset *audioUrl = [AVURLAsset URLAssetWithURL:songURL options:nil];        
    AVAssetTrack *track = [[audioUrl tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];        
    AVAsset *audioAsset = [AVAsset assetWithURL:songURL];
    [audioUrlArray addObject:track];
    CMTimeRange timeRange = CMTimeRangeMake(audioTime, audioAsset.duration);
    [audioTimeRangesArray addObject:[NSValue valueWithCMTimeRange:timeRange]];
}
AVMutableCompositionTrack *audioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

[audioTrack insertTimeRanges:audioTimeRangesArray ofTracks:audioUrlArray atTime:kCMTimeZero error:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:22:58.877

我有同样的问题，添加一个可变数组来保存 AVURLAsset。一旦 for 循环结束，ARC 将收集 AVURLAsset 并且您存储的位将被销毁。

# javascript - 如何更改extjs容器的css类

> ID：12819530
> 
> 赞同：3
> 
> 时间：2012-10-10T12:37:33.813
> 
> 标签：javascript, jquery, extjs

我有这个 extjs 容器

```
 var cont = Ext.create('Ext.container.Container',{
        cls: 'myClass1',
        id: myId,
        flex: 1
    }); 
```

如何在运行时使用 javascript/extjs 代码将 cls 属性更改为“MyClass2”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:52:58.477

如果`SENSE.ui.createContainer`做一个`Ext.container.Container`基类，那么你可以使用`removeCls`方法，如下：

```
cont.removeCls ('MyClass1'); 
```

更多信息：[Ext.container.Container.removeCls](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.Container-method-removeCls)

# android - android中View Pager中的自定义字体

> ID：12819531
> 
> 赞同：0
> 
> 时间：2012-10-10T12:37:44.937
> 
> 标签：android, android-viewpager

我正在开发我正在使用视图寻呼机的演示应用程序。现在我想知道我们可以更改视图分页器中显示的标题的文本样式。

请对此提出您的建议。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:39:46.433

工作演示

```
TextView txt = (TextView) v.findViewById(R.id.custom_font); 
```

然后改变你的字体

像这样的东西：

```
switch (position) {
     case 0:
            v = (LinearLayout) LayoutInflater.from(cxt).inflate(R.layout.lcmeter, null);
            TextView txt = (TextView) v.findViewById(R.id.custom_font); 
            Typeface font = Typeface.createFromAsset(getAssets(), "Chantelli_Antiqua.ttf");  
            txt.setTypeface(font); 
            break;
     } 
```

# cordova - 如果 Phonegap 中没有 SDCARD，则手机的根目录

> ID：12819533
> 
> 赞同：0
> 
> 时间：2012-10-10T12:37:55.450
> 
> 标签：cordova

我正在使用 Phonegap 1.9.0 的文件 API。我知道，

window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFileSystemSuccess,onFileSystemError) 将以 SDCARD 作为根。但是，如果设备没有 SDCARD，root 会是什么？如何处理这种情况？

谢谢你，约翰西·比诺伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:53:24.397

如果手机中没有 SDCARD，则返回的持久文件系统路径将是：

```
/data/data/{package name} 
```

其中 {packate name} 是 AndroidManifest.xml 文件中清单标记中的包属性。

# joomla - Joomla 登录验证待修复

> ID：12819535
> 
> 赞同：1
> 
> 时间：2012-10-10T12:38:05.017
> 
> 标签：joomla, joomla1.5, registration

我正在使用 Joomla 1.5

当我提交没有条目的表单并在`index.php`页面上显示错误时会出现问题。我需要在登录页面上显示相同的验证错误，有什么建议可以解决这种问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:46:55.543

您必须“自己”为登录表单和注册表单编写验证码。将您的验证码放在登录表单的此路径中：

```
JOOMLAROOT/components/com_user/views/login/tmpl/default_login.php 
```

对于注册表单，此路径：

```
JOOMLAROOT/components/com_user/views/register/tmpl/default.php 
```

# razor - ServiceStack 在 razor 页面中包含另一个 razor 页面

> ID：12819536
> 
> 赞同：4
> 
> 时间：2012-10-10T12:38:05.430
> 
> 标签：razor, servicestack

我想在剃须刀页面中包含一个类型化的模型子页面。我知道 SS 与 MVC 剃须刀不同。做到这一点的方式可能有些不同。

到目前为止，这就是我想出的（看起来很难看，我知道......）：

```
 //this is somewhere in your default.cshtml
    @{
        //grab your service from Ioc
        using(var service = Get<RockstarsService>()) {
            //execute the service to get a response
            var resp = service.Get(new Rockstars());
            //call the partial razor page Rockstar.cshtml
            <p>@Html.Partial("Rockstars",resp)</p>
            //or @Html.Partial("Rockstars") will do, seems like the resp is cached anyway 
            //or @Include("Rockstars",resp) will work, too.
        }
    } 
```

此解决方案适用**于**类型化模型子页面，**条件**是子页面不包含任何 html 帮助程序。

但是，如果子页面有 html 帮助器，例如

```
@Html.Label("sometag") //PROBLEM HERE <--------------------- 
```

或者

```
@Html.TextBox("name","text") //PROBLEM HERE <--------------------- 
```

然后它会抛出服务器错误：

```
Server Error in '/' Application.
Could not execute partial: Rockstars, model: RazorRockstars.WebHost.RockstarsResponse
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.InvalidOperationException: Could not execute partial: Rockstars, model: RazorRockstars.WebHost.RockstarsResponse

Source Error: An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: [InvalidOperationException: Could not execute partial: Rockstars, model: RazorRockstars.WebHost.RockstarsResponse]
   ServiceStack.Razor.Templating.TemplateService.RenderPartial(T model, String name) +333
   ServiceStack.Razor.RazorFormat.RenderPartial(String pageName, Object model, Boolean renderHtml, IHttpRequest httpReq) +433
   ServiceStack.Html.HtmlHelper.Partial(String viewName, Object model) +117
   CompiledRazorTemplates.Dynamic.fdbaecbccda.Execute() +454
   ServiceStack.Razor.Templating.TemplateService.ExecuteTemplate(T model, String name, String defaultTemplatePath, IHttpRequest httpReq, IHttpResponse httpRes) +457
   ServiceStack.Razor.RazorFormat.ExecuteTemplate(T model, String name, String templatePath, IHttpRequest httpReq, IHttpResponse httpRes) +117
   ServiceStack.Razor.RazorFormat.ProcessRazorPage(IHttpRequest httpReq, ViewPageRef razorPage, Object dto, IHttpResponse httpRes) +142
   ServiceStack.Razor.RazorHandler.ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, String operationName) +535
   ServiceStack.WebHost.Endpoints.Support.EndpointHandlerBase.ProcessRequest(HttpContext context) +264
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +341
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69 
```

（Bloody VS Razor 断点不起作用，因为它是一个纯粹的 SS，而不是 MVC 项目。这让我很难查明问题......但这是另一个故事）

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-05T10:43:42.833

我真的认为您正在寻找渲染操作而不是您正在做的事情。

[ServiceStack Razor - Html.RenderAction 等效](https://stackoverflow.com/questions/15028447/servicestack-razor-html-renderaction-equivalent)

[https://github.com/ServiceStack/ServiceStack/blob/master/tests/RazorRockstars.Console.Files/Pages/PartialExamples.cshtml](https://github.com/ServiceStack/ServiceStack/blob/master/tests/RazorRockstars.Console.Files/Pages/PartialExamples.cshtml)

# asp.net - 当我单击asp.net的自定义控件时如何阻止我的页面向上滚动

> ID：12819538
> 
> 赞同：0
> 
> 时间：2012-10-10T12:38:09.493
> 
> 标签：asp.net

我有像treecontrol这样的asp.net自定义控件，当我向下滚动页面并单击该控件中的任何项目时，它会导致页面向上滚动，就像第一次加载一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:50:35.937

我不知道这是否曾经得到回答或解决，但在偶然发现类似问题后，我找到了以下解决方案：

在我的 Site.Master.cs 中使用以下代码行，Page_load()

Page.MaintainScrollPositionOnPostBack = True

为我工作！希望这可以帮助。

来源：[http ://www.velocityreviews.com/forums/t121257-scroll-in-asp-net-postback.html](http://www.velocityreviews.com/forums/t121257-scroll-in-asp-net-postback.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:40:49.803

可能一些控件刷新，如果可以使用 AutoPostBack="false"

# objective-c - 显示“屏幕快照”作为反馈给用户

> ID：12819544
> 
> 赞同：4
> 
> 时间：2012-10-10T12:38:21.503
> 
> 标签：objective-c, ios

我对 Objective-C 很陌生，刚刚从头开始制作了我的第一个应用程序。这是一个拼写应用程序，如果用户输入错误的字母，我想在屏幕上显示与屏幕截图相同的白色闪光。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T13:07:05.597

```
// Create a empty view with the color white.

UIView *flashView = [[UIView alloc] initWithFrame:window.bounds];
flashView.backgroundColor = [UIColor whiteColor];
flashView.alpha = 1.0;

// Add the flash view to the window

[window addSubview:flashView];

// Fade it out and remove after animation.

[UIView animateWithDuration:0.05 animations:^{     flashView.alpha = 0.0;    }      completion:^(BOOL finished) {    [flashView removeFromSuperview];     }     ]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:45:07.253

在所有内容上添加全屏白色`UIView`并为其 alpha 设置动画。

```
// Create a fullscreen, empty, white view and add it to the window.
UIWindow *window = [[UIApplication sharedApplication] keyWindow];
UIView *flashView = [[UIView alloc] initWithFrame:window.bounds];
flashView.backgroundColor = [UIColor whiteColor];
flashView.alpha = 1.0f;
[window addSubview:flashView];

// Fade it out and remove after animation.
[UIView animateWithDuration:0.05f animations:^{
    flashView.alpha = 0.0f;
} completion:^(BOOL finished) {
    [flashView removeFromSuperview];
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:44:21.067

一种简单的方法是`UIView`在当前视图（或`UIWindow`）上设置 alpha 为 0 的白色。然后，应用可能是这样的闪光效果：

```
-(void)flashEffect {

   // Show it suddenly
   [self.flashSubview setAlpha:1.0];

   // Fade it out
   [UIView animateWithDuration:0.5 
                    animations:^{
                       [self.flashSubview setAlpha:0.0];
                    }
                    completion:^(BOOL finished){}];
} 
```

# eclipse-plugin - Eclipse 插件作为新软件

> ID：12819550
> 
> 赞同：0
> 
> 时间：2012-10-10T12:38:40.773
> 
> 标签：eclipse-plugin

我为 eclipse 写了一个插件，用户现在可以安装我插件的方式是手动将它添加到 eclipse\ Plugin 我想提供将它作为新软件安装的选项，该怎么做？\

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:59:49.317

您想建立一个更新站点。有一个用于创建包含更新站点的项目的新资源向导。使用此向导并配置站点以添加包含您的插件的功能（也有一个新的插件项目向导）。为简化起见，您只需部署更新站点项目的内容并为您的用户提供该位置的 url。

# jquery - Iphone / IOS App Store接受Phonegap - XML Feed

> ID：12819554
> 
> 赞同：0
> 
> 时间：2012-10-10T12:38:50.897
> 
> 标签：jquery, ios, html, cordova

我们目前正在构建一个 HTML5 Phonegap 应用程序，我们希望在完成后将其作为免费应用程序发布到应用商店。

我们目前的计划是使用 XML 提要从 .NET 后端向应用程序提供数据——这些数据将通过 HTML 5 应用程序中的 ajax/jQuery 进行解析，尽管我刚刚阅读了有关 Apple 的接受标准并发现他们拒绝使用私有 API 的应用程序？

这是否意味着我当前的 xml/jquery 计划将被拒绝？如果是这样，任何人都可以推荐一种可以接受的动态数据传输方式吗？

在构建应用程序时，还有其他关键的拒绝因素需要考虑吗？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:57:30.873

私有 API 只是内置于 iOS FRAMEWORKS 中的一堆私有函数，这些函数未在文档中列出并且您无法使用。

创建一种解析您的提要的方法与使用其中一个函数不同，您不会因为提交而烦恼。

希望有帮助。

西里尔

# javascript - Fancybox 从 jQuery UI 对话框显示：按 Esc 按钮关闭两个对话框

> ID：12819555
> 
> 赞同：-1
> 
> 时间：2012-10-10T12:38:50.817
> 
> 标签：javascript, jquery, fancybox, jquery-dialog, fancybox-2

我有以下问题：

打开一个 jQuery UI 对话框，然后从该对话框打开一个花式框弹出窗口。
我按下 Esc 按钮并期望只关闭fancybox 弹出窗口，但这也会关闭jQuery 对话框。
如何防止这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:50:27.943

尝试这个

```
$( ".selector" ).dialog({ closeOnEscape: false }); 
```

# .net - 水晶报表字体问题

> ID：12819559
> 
> 赞同：0
> 
> 时间：2012-10-10T12:39:08.320
> 
> 标签：.net, crystal-reports

我正在使用带有 VS2005 的水晶报表 10.2。当我在浏览器中查看报告时，它似乎没问题，但是在打印报告后它显示的字体较小。除了在水晶设计中使字体大小变大外，任何解决方案。我正在使用 window.print 打印报告而不导出为 pdf 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:00:19.317

浏览器查看不同于打印视图。如果您打印任何普通页面，那么它的字体外观也与查看页面不同。在水晶报表中，当您选择文本、文本框、公式字段然后右键单击有属性选项，您可以在其中设置字体大小、颜色、类型。

您可以通过右键单击水晶报表设计网格位置并选择打印选项来设置水晶报表页面设置，您可以在其中设置报表打印设置。

还有一件事。您为水晶报表应用 css 或主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:35:18.800

这似乎是一个错误，并且该错误也会影响 VS 2005 的 CR 捆绑版本。

谷歌搜索后，我发现很少有答案很接近，但没有什么特别适合 VS 2005 的解决方案。下面这个对我没有帮助，希望对你有帮助

[http://search.sap.com/notes?id=0001207181&boj=/sap/bc/bsp/spn/scn_bosap/notes.do?access=69765F6D6F64653D3939382669765F7361706E6F7465735F6E756D6265723D30303031332](http://search.sap.com/notes?id=0001207181&boj=/sap/bc/bsp/spn/scn_bosap/notes.do?access=69765F6D6F64653D3939382669765F7361706E6F7465735F6E756D6265723D30303031323037313831)

其余如下：

[http://mdn.morovia.com/kb/Font-size-decreases-exporting-PDF-Crystal-Reports-10053.html](http://mdn.morovia.com/kb/Font-size-decreases-exporting-PDF-Crystal-Reports-10053.html) http://amiraryani.wordpress.com/2010/03/25/font-size-problem -in-exporting-crystal-report-to-pdf-using-asp-net/

如果有人遇到解决方案，请。跟我分享。

# jquery - PUT jQuery 的问题

> ID：12819560
> 
> 赞同：3
> 
> 时间：2012-10-10T12:39:14.343
> 
> 标签：jquery, ajax

我对 Ajax 中的 PUT 有疑问。

如果我使用 fiddler 并对 URL 执行 PUT：[http://domain.com:58226/api/Person/1](http://domain.com:58226/api/Person/1)，请求正文： {"firstName":"Stan","lastName":"Dard"}，有用。

但是当我使用 ajax 做同样的事情时，它不起作用：

```
 $.ajax({
 data: '{"firstName":"Stan","lastName":"Dard"}',       //{action:'x',params:  ['a','b','c']}
 url: 'http://domain.com:58226/api/Person/'+id,
 type: 'PUT',
success: function(result) {

alert("Uppdaterad!");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:44:01.477

我认为数据需要是一个字符串。对象被转换为您在此处看到的查询字符串。

您可以使用该`JSON.stringify(obj)`方法将您的对象转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:46:44.977

根据[jquery docs](http://api.jquery.com/jQuery.ajax/)，并非所有浏览器都支持它。

![sds](../Images/43f9c5ceeab5242616ad151fe3485d42.png)

> *但它适用于提琴手。*

Fiddler 不是浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:50:10.637

看看这个 StackOverflow 帖子：

[如何使用 jQuery 和 AJAX 获取/发布/删除/放置信息](https://stackoverflow.com/questions/10197944/how-to-get-post-delete-put-information-with-jquery-and-ajax)

“出于安全原因，您不能使用 jQuery 进行跨域 AJAX 请求。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:51:08.083

答案是 JSON.stringify 对象并更改 contentType: text/json。

# javascript - 无法获取属性“解析”的值：对象为空或未定义

> ID：12819569
> 
> 赞同：0
> 
> 时间：2012-10-10T12:40:03.753
> 
> 标签：javascript, dynamics-crm, odata, datajs

我正在尝试建立连接并使用 oData 格式下载任何内容。指向我正在使用的服务的 URL 返回一个漂亮的 oData-ishly 外观文档。现在，我想将这些内容读入我的 JavaScript 方法并使用它一段时间。但是，由于无法找到该属性的错误，我`parse`不能。那让我伤心。

根据[此页面](http://datajs.codeplex.com/wikipage?title=Frequently%20Asked%20Questions&referringTitle=Frequently%20Asked%20Questions&ANCHOR#json-null-error)（以及我发现的许多其他页面），主题中的错误是由不可用的 JSON 解析器引起的。这个问题对于 IE7 及以下版本显然是个大问题。但我在 IE9 和 IE10 上都遇到了同样的问题。默认情况下，JSON 支持应该集成到它们中。

1.  可以在 IE10 中关闭 JSON 支持吗？如果可以怎么办？！
2.  我如何测试我的浏览器现在是否可以处理 JSON 数据？
3.  还可以做些什么来让我的机器获取数据？
4.  该服务位于 CRM Dynamics 2011 服务器上是否重要？

我正在执行的代码如下。它是从该位置的 DataJS 项目站点获取的。当然，我已经测试过该`OData`对象存在并且可以访问。

```
OData.read(
  "https://myurl/2011/OrganizationData.svc/crmk_CustomEntitySet",
  function(dataSet) { alert("Yippi!"); },
  function(errorMessage) { alert("Buuuu..."); }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:19:45.887

根据datajs的[常见问题页面](http://datajs.codeplex.com/wikipage?title=Frequently%20Asked%20Questions#parse-null-error)：

> IE6 和 IE7（以及在兼容模式下运行的更高版本）不支持原生 JSON，因此您需要向 json2.js 添加额外的脚本引用。
> 
> 下面是一个简单的脚本标签，可以包含在文档头中来解决这个问题。另一种解决方案是将文件包含在您自己的 Web 服务器中并在本地引用它。
> 
> `<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js"></script>`

如果您使用的是 IE7 或 IE8，我使用的另一种解决方案是将其添加到页面加载事件的第一行（假设您使用的是 .NET）：

```
// switch to IE8 compatibility mode so that we have the JSON object in javascript
Response.AddHeader("X-UA-Compatible", "IE=8") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T11:19:22.457

您需要为 IE9 提供一个 doctype 才能使用 JSON 对象，如下所示：

```
<!DOCTYPE html>
<html>
     <head>...</head>
     <body>... 
```

# java - 我的 java 程序没有读取我的文件

> ID：12819570
> 
> 赞同：1
> 
> 时间：2012-10-10T12:40:04.513
> 
> 标签：java, map

我有一些这样的Java代码：

```
Map<Map<String,String>,String> map = new HashMap<>();
int i = 0;
try (BufferedReader br = new BufferedReader(new FileReader("properties.txt")))
{

        String sCurrentLine;
        while ((sCurrentLine = br.readLine()) != null) {
                i++;
                String[] parts = sCurrentLine.split(",");
                System.out.println(parts[2]);
                Map<String,String> tempMap = new HashMap<>();
                tempMap.put("issuing_bank",parts[1]);
                tempMap.put("card_switch",parts[2]);
                tempMap.put("card_Type",parts[3]);
                map.put(tempMap,parts[0]);
        }

} catch (IOException e) {
        e.printStackTrace();
} 
```

`map`我只包含`12`从我的文本文件中存储的第一个元素，这看起来很奇怪。出于调试目的，我使用了变量`i`并将其打印出来，即打印 的值`22`，这是我的文本文件中的确切计数。

我的文本文件如下所示：

```
447747,ICCI,Visa,Credit
421323,ICCI,Visa,Debit
421630,ICCI,Visa,Debit
455451,ICCI,Visa,Debit
469375,ICCI,Visa,Debit
523951,ICCI,MasterCard,Credit
5399,ICCI,MasterCard,Debit
517652,HDFC,MasterCard,Credit
558818,HDFC,MasterCard,Credit 
512622,SBI,MasterCard,Credit
526468,SBI,MasterCard,Credit
400975,Citi,Visa,Credit
402856,Citi,Visa,Credit
461726,Citi,Visa,Credit
552004,Citi,MasterCard,Debit
468805,Axis,Visa,Debit
418157,ICCI,Visa,Debit
524133,Citi,MasterCard,Credit
528945,HDFC,MasterCard,Credit
437748,SBI,MasterCard,Credit
524111,HDFC,MasterCard,Credit
431757,SBI,Visa,Credit 
```

我很困惑，为什么只有`12`元素被读入我的`map`. 我在这里错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T12:43:04.673

解决方案很简单：您在这一行中有错误的参数顺序：

```
map.put(tempMap,parts[0]); 
```

它应该说

```
map.put(parts[0],tempMap); 
```

您必须相应地更改变量声明的类型参数。你在哪里

```
Map<Map<String,String>,String> map = new HashMap<>(); 
```

你必须把

```
Map<String,Map<String,String>> map = new HashMap<>(); 
```

总而言之，在这些更改之后，我相信您将拥有您真正想要的结构：从`parts[0]`地图到其余记录字段的地图。

我应该补充一点，您的解决方案（除了您的 nick :) 让您成为主要使用 Groovy 等动态语言编写代码的开发人员；这种风格不适合 Java 的语言特性。在 Java 中，你最好定义一个专门的 bean 类：

```
public class CardHolder {
  public final String cardNumber, issuingBank, cardSwitch, cardType;

  public CardHolder(String[] record) {
    int i = 0;
    cardNumber = record[i++];
    issuingBank = record[i++];
    cardSwitch = record[i++];
    cardType = record[i++];
  }
} 
```

首先，这种方法更好，因为您的阅读循环变得更简单，更重要：

```
while ((sCurrentLine = br.readLine()) != null) {
  final CardHolder ch = new CardHolder(sCurrentLine.split(","));
  map.put(ch.cardNumber, ch);
} 
```

此外，这将使您可以更好地控制记录的其他方面；例如一个很好的习惯`toString`和类似的。另请注意，这几乎没有导致更多代码：它只是通过关注点分离原则进行了重组。

（最后的一个小观察：在 Java 中，字符串变量的 s 前缀是不习惯的，因为它在静态类型语言中是多余的；请放心，您永远不会遇到 Java 中的错误，因为在 String 所在的位置发生 Integer预期的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:44:59.520

您应该更改创建地图的方式..代替以下声明：-

```
Map<Map<String,String>,String> map = new HashMap<>(); 
```

而不是这个，你应该有一个： -

```
Map<String, Map<String,String>> map = new HashMap<>(); 
```

您应该始终**将不可变类型**作为 Map 中的键。

在**此更改之后**，您应该更改：-

```
map.put(tempMap,parts[0]); 
```

到： -

```
map.put(parts[0], tempMap); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:44:04.947

我认为你有论据

```
map.put(tempMap,parts[0]); 
```

逆转。您正在将 tempMap 映射到数字，您可能希望将数字映射到 tempMap：

```
map.put(parts[0], tempMap); 
```

使用

```
Map<String, Map<String,String>> map = new HashMap<>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T12:44:32.910

您应该使用 Map 作为值，因为**HashMap 相等性基于它具有的键值对。**.

```
map.put(parts[0],tempMap); 
```

下面的一个简单程序将说明这一事实

```
 Map<String, String> tempMap1 = new HashMap<String, String>();
    tempMap1.put("issuing_bank", "ICICI");
    tempMap1.put("card_switch", "Visa");
    tempMap1.put("card_Type", "Debit");

    Map<String, String> tempMap2 = new HashMap<String, String>();

    tempMap2.put("issuing_bank", "ICICI");
    tempMap2.put("card_switch", "Visa");
    tempMap2.put("card_Type", "Debit");

    System.out.println(tempMap1.equals(tempMap2));//Prints true 
```

输出：

```
true 
```

所以你的声明应该如下所示。请记住，您应该始终使用不可变对象作为 HashMap 中的键。

```
Map<String,Map<String,String>> map = new HashMap<String,Map<String,String>>(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-10T12:42:16.590

那是因为您使用地图（tempMap）作为键。这是错误的。

# mysql - 在 Mysql 中将数字转换为单词

> ID：12819571
> 
> 赞同：2
> 
> 时间：2012-10-10T12:40:11.130
> 
> 标签：mysql, sql, mysql-error-1064

我正在从数据库中获取一个值，我希望将此值转换为**Mysql**中的一个单词。有人可以帮帮我吗？

例如：**123** --> 这个值是从数据库中获取的，它以数字形式保存，我想从数据库中检索这个值**123**。

这样做的语法是什么？

查询是这样的：

```
select 'value' from value_table where date is '10-10-2012'; 
```

答案是--> 123

我希望这个值显示为 123。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:49:24.353

我认为这可以帮助你......这只是一种方法：

```
DELIMITER $$
CREATE FUNCTION `number_to_string`(n INT) RETURNS varchar(100)
BEGIN
    -- This function returns the string representation of a number.
    -- It's just an example... I'll restrict it to hundreds, but
    -- it can be extended easily.
    -- The idea is: 
    --      For each digit you need a position,
    --      For each position, you assign a string
    declare ans varchar(100);
    declare dig1, dig2, dig3 int; -- (one variable per digit)

    set ans = '';

    set dig3 = floor(n / 100);
    set dig2 = floor(n / 10) - dig3*10;
    set dig1 = n - (dig3*100 + dig2*10);

    if dig3 > 0 then
        case
            when dig3=1 then set ans=concat(ans, 'one hundred');
            when dig3=2 then set ans=concat(ans, 'two hundred');
            when dig3=3 then set ans=concat(ans, 'three hundred');
            when dig3=4 then set ans=concat(ans, 'four hundred');
            when dig3=5 then set ans=concat(ans, 'five hundred');
            when dig3=6 then set ans=concat(ans, 'six hundred');
            when dig3=7 then set ans=concat(ans, 'seven hundred');
            when dig3=8 then set ans=concat(ans, 'eight hundred');
            when dig3=9 then set ans=concat(ans, 'nine hundred');
            else set ans = ans;
        end case;
    end if;

    if dig2 = 1 then
        case
            when (dig2*10 + dig1) = 10 then set ans=concat(ans,' ten');
            when (dig2*10 + dig1) = 11 then set ans=concat(ans,' eleven');
            when (dig2*10 + dig1) = 12 then set ans=concat(ans,' twelve');
            when (dig2*10 + dig1) = 13 then set ans=concat(ans,' thirteen');
            when (dig2*10 + dig1) = 14 then set ans=concat(ans,' fourteen');
            when (dig2*10 + dig1) = 15 then set ans=concat(ans,' fifteen');
            when (dig2*10 + dig1) = 16 then set ans=concat(ans,' sixteen');
            when (dig2*10 + dig1) = 17 then set ans=concat(ans,' seventeen');
            when (dig2*10 + dig1) = 18 then set ans=concat(ans,' eighteen');
            when (dig2*10 + dig1) = 19 then set ans=concat(ans,' nineteen');
            else set ans=ans;
        end case;
    else
        if dig2 > 0 then
            case
                when dig2=2 then set ans=concat(ans, ' twenty');
                when dig2=3 then set ans=concat(ans, ' thirty');
                when dig2=4 then set ans=concat(ans, ' fourty');
                when dig2=5 then set ans=concat(ans, ' fifty');
                when dig2=6 then set ans=concat(ans, ' sixty');
                when dig2=7 then set ans=concat(ans, ' seventy');
                when dig2=8 then set ans=concat(ans, ' eighty');
                when dig2=9 then set ans=concat(ans, ' ninety');
                else set ans=ans;
            end case;
        end if;
        if dig1 > 0 then
            case
                when dig1=1 then set ans=concat(ans, ' one');
                when dig1=2 then set ans=concat(ans, ' two');
                when dig1=3 then set ans=concat(ans, ' three');
                when dig1=4 then set ans=concat(ans, ' four');
                when dig1=5 then set ans=concat(ans, ' five');
                when dig1=6 then set ans=concat(ans, ' six');
                when dig1=7 then set ans=concat(ans, ' seven');
                when dig1=8 then set ans=concat(ans, ' eight');
                when dig1=9 then set ans=concat(ans, ' nine');
                else set ans=ans;
            end case;
        end if;
    end if;

    return trim(ans);
END$$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:43:36.743

```
SELECT TO_CHAR (TO_DATE (234, 'j'), 'jsp') FROM DUAL;
//Output: two hundred thirty-four 
```

taken from this website: [http://viralpatel.net/blogs/convert-number-into-words-oracle-sql-query/](http://viralpatel.net/blogs/convert-number-into-words-oracle-sql-query/)

# sql-server-2008-r2 - SQL Server 2008 R2：NEWID() - 从字符串转换为唯一标识符时转换失败

> ID：12819573
> 
> 赞同：0
> 
> 时间：2012-10-10T12:40:16.167
> 
> 标签：sql-server-2008-r2

我有一个大问题，从今天开始。在我可以将指南插入此表之前。

当我打电话

```
 INSERT INTO table(ID) 
 VALUES (NEWID()); 
```

我收到一个转换错误，这是不可能的。

`ID`是`uniqueidentifier`。

我只在一张表中收到此错误。看不到表设置之间的任何差异。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:52:54.753

尝试这个：

```
 INSERT INTO table(ID) 
 select NEWID() 
```

# objective-c - Apple UITabBarItem 类的默认“触摸”事件是什么？

> ID：12819575
> 
> 赞同：1
> 
> 时间：2012-10-10T12:40:19.570
> 
> 标签：objective-c, ios, cocoa-touch, uitabbarcontroller, uitabbaritem

我正在通过在默认 tabBar 顶部添加子视图并以编程方式触发所选事件来进行自定义 TabBar。它运作良好，但问题是我的 tabBar 与 Apple 的行为不完全相同：在 Apple 默认选项上，如果您触摸而不释放（向下触摸）它将选择选项卡，但当您触摸时不会立即选择（可能0.2 秒后）。

*   如果我`Touch Down`在自定义 TabBar 上放置一个事件，它会立即触发该选项卡。
*   如果我放置一个`Touch Up Inside`事件，它只会在发布时触发......

那么，Apple 在他的 TabBarItem 类（或者可能是父类）中使用的触摸事件是什么？

（我以为是`Touch Down`，但如果是，为什么事件会有这种“延迟”？）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:57:50.037

它可能正在使用 UILongPressGestureRecognizer。例如：

```
UILongPressGestureRecognizer *longPressGR = [[UILongPressGestureRecognizer alloc]
    initWithTarget:self action:@selector(longPressDetected:)];
longPressGR.delegate = self;
longPressGR.minimumPressDuration = 1.0;
[yourView addGestureRecognizer:longPressGR]; 
```

# php - 如何将形式外的变量转换为php

> ID：12819577
> 
> 赞同：1
> 
> 时间：2012-10-10T12:40:20.477
> 
> 标签：php, javascript

> **可能重复：**
> [如何将 JavaScript 变量传递给 PHP？](https://stackoverflow.com/questions/1917576/how-to-pass-javascript-variables-to-php)

如何获取不在标签内的`<form>`变量

```
var vvv = document.getElementById('vvv'); 
```

进入php

```
$variable=vvv.value; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T12:43:45.027

I suspect you talk about javascript to php variable. To understand how this works you will probably need to use AJAX. This is a good start: [JQuery AJAX](http://api.jquery.com/category/ajax/)

Once you get a hold of that you can send your javascript-variable to a PHP-webservice and have fun with it.

# c# - .NET 中是否可以在有句柄之前访问表单？

> ID：12819583
> 
> 赞同：3
> 
> 时间：2012-10-10T12:40:39.227
> 
> 标签：c#, winforms

我在`Control`.

```
if (ParentForm != null)
{
  traceBlock.Log("ParentForm is null");

  if (!ParentForm.IsHandleCreated)
  {
    ParentForm.HandleCreated += (sender, e) =>
        {
          var text = PhysDocContext.Document.GetHeader(PhysDocContext);
          ParentForm.Text = text;
        };
  }
} 
```

此代码使用`ParentForm == null`. 很明显，记录器正在记录不准确的信息。真正让我感到奇怪的是检查`IsHandleCreated`. 在我看来，这段代码永远不会触发。所以事件不会挂钩，并且标题永远不会被设置。

更奇怪的是，ParentForm 被设置`Panel`为父窗体拥有的控件。它也由作为父级的 Form 设置。让我相信这是一个更不可能的情况。

`Form`在没有句柄的 .NET 中可以访问a 是否正常（甚至可能） ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:41:52.407

Yes, it's possible. The handle is the window handle of the form and it may not be created until the form actually has a window (visible or invisible).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:43:32.017

> Is it normal (possible even) for a Form to be accessible in .NET that has no handle?

Yes, because a Form (or a Control for that matter) is merely a wrapper class around a few Win32 API calls. The code you use to create a form is used to create the .NET object.

Most likely only when the form is shown, the calls to Win32 are made, finally giving the control a handle.

# html - 没有设置宽度的元素内的 CSS 空白

> ID：12819587
> 
> 赞同：1
> 
> 时间：2012-10-10T12:40:49.290
> 
> 标签：html, css, word-wrap

我在另一个跨度内有一个跨度，其中孩子没有设定宽度，因此文本在 1 或 2 个单词后进入新行。

这是代码和 jsfiddle，这将有助于更好地理解我的意思。

```
<span class="container">Lorem ipsum dolor
    <span class="child">Lorem ipsum dolor Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut risus enim, tincidunt ac tristique quis, vulputate sed nulla. Nam imperdiet imperdiet mollis. Vestibulum sed elit lorem, et luctus massa. Vivamus eleifend ante vel odio lacinia.
    </span>
</span> 
```

CSS：

```
.container {
    width:auto;
    background-color:red;
    position:relative;
}

.child {
    position:absolute;
    top:35px;
    left:10px;
    max-width:500px;
    background-color:yellow;
    /*white-space:nowrap; This does not work because the text does not wrap after 500px */ 
} 
```

[http://jsfiddle.net/RRx6r/](http://jsfiddle.net/RRx6r/)

我理想地想要实现的是子跨度扩展到最大 500 像素，具体取决于其中的文本数量。

white-space:nowrap 不起作用，因为该行永远不会中断。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:46:17.270

添加

```
display:block; 
```

到`.container`，或两者`.container`和`.child`（取决于您的其他 css 规则的问题）。请注意，您还需要在容器上设置最大宽度，否则它将增长到任何可用空间。

[看到这个小提琴](http://jsfiddle.net/VubBJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:47:04.887

如果你绝对定位一个元素（`position:absolute;`），那么你必须设置一个特定的宽度。否则元素（当然还有像 一样的内联元素`SPAN`）将缩小到所需的最小宽度。

一种选择是将父元素设置为`display: block;`，这会导致它扩展到可用的最大宽度。这样内部元素就有机会扩展到 500px 宽度。

[http://jsfiddle.net/RRx6r/2/](http://jsfiddle.net/RRx6r/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:18:36.027

简而言之：将父跨度更改为 DIV

这发生在您身上，因为父 Span 正在设置子 Span 显示的最大宽度。

如果您希望子跨度更长，您可以：

把span改成一个div，和span一样，但是默认取其父容器的全宽，相当于放入`display:block`你的CSS，DIV和SPAN是只有那个属性的空元素、显示：块或显示：内联。

# sql-server - 如果日期较新，则更新行

> ID：12819588
> 
> 赞同：0
> 
> 时间：2012-10-10T12:40:49.817
> 
> 标签：sql-server

我有一个包含 11000 行的表（两列是 URN 和日期），我想向其中添加行。但是，如果在添加新行时 URN 已经存在，它应该覆盖以前的记录，以便更新日期。例如，

```
select urn, GETDATE() AS Date
into table1
from table2 
```

如果 urn 10253 在 table1 中有日期 23/05/2005 但 urn 在 table2 那么它应该被替换为 urn 10253 日期 10/10/2012

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:20:05.267

以下是使用合并的语法，适用于 sqlserver 2008：

```
merge into table1 t1 
using table2 t2 on t1.urn = t2.urn
when not matched then
insert (urn,date)values(t2.urn,t2.date)
when matched then
update
set t1.date = t2.date; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:46:00.373

--先更新所有匹配的记录

```
Update t1 SET date=t2.date 
from table1 t1 inner join table2 t2 
on t1.urn=t2.urn 
```

--插入所有新记录

```
INSERT INTO table1
select * from table2 t1 where NOT EXISTS(select * from table1 t1 where t1.urn=t2.urn) 
```

# select - ASP 选择列表

> ID：12819589
> 
> 赞同：1
> 
> 时间：2012-10-10T12:40:54.220
> 
> 标签：select, asp-classic

ASP 不是我的强项，所以我想知道是否有人知道我可以如何执行以下操作：

我希望选择选定的下拉列表中的选项时，它会更改隐藏字段中的数据。

这是测试选择字段：

```
<select name="h_id">
    <option value="">-- Send enquiry to --</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select> 
```

因此，例如，如果您选择选项 #2，我希望它更改以下隐藏字段的值：

```
 <input type="hidden" name="testing" value="testing1"> 
```

有谁知道我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:17:28.943

这将在客户端使用 javascript 完成。一个非常基本的例子是这样的：

```
<form>
 <select name="h_id" onChange="setValue(this.value, this.form.testing)">
  <option value="">-- Send enquiry to --</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
 </select>
 <input type="hidden" name="testing" value="testing1">
</form>

​&lt;script>
function setValue(val, target){
    target.value = val;
}
</script>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:47:16.147

你也可以使用 javascript 和 DOM。只需粘贴此代码并查看分配了哪些值

```
<select name="h_id" onchange="fnc(this.value)">
<option value="" >-- Send enquiry to --</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
</select>
<input type="hidden" name="testing" value="testing1">
</form>

<script type="text/javascript">
function fnc(val)
{
document.getElementsByName("testing").value=val;
alert(document.getElementsByName("testing").value);//this line is just 4 test
}
</script> 
```

# java - Java中使用数组结构的假动态数组

> ID：12819593
> 
> 赞同：0
> 
> 时间：2012-10-10T12:41:26.747
> 
> 标签：java, arrays, resize, nullpointerexception

这是我正在尝试做的事情以及我遇到的问题：我想“伪造”通往动态数组的方式。这意味着，使用普通的数组结构，只要它满了，我就会创建一个比旧数组大 25% 的新数组，然后将旧数组的元素复制到新数组中。

```
// Whenever my original nodes array is full
Node aNew[];
aNew = new Node[newDesiredSize];
//I create every new element in the new array for this to be a deep copy
for (int i=0; i<numVert; i++){
     aNew[i] = new Node(nodes[i].getId());
}
nodes = aNew; 
```

但这似乎不起作用，因为当我尝试填充和访问新创建的数组时，出现`NullPointerException`错误。

我一直在与这种伪造动态数组的方法作斗争，但我显然遗漏了一些东西。

`ArrayList`不允许使用或任何其他形式的真正动态结构。

/ ***** **** /

编辑：根据建议，我改变了

```
aNew[i] = new Node(nodes[i].getId()); 
```

至

```
aNew[i] = nodes[i]; 
```

但这似乎并不能解决问题。

我还检查了所有 i 的空位置，结果证明我有。该程序似乎正在“失去”整个新成长的部分。

/ *** /

解决了！这是在增长时添加新元素的问题。现在一切都好。谢谢你的帮助。将发布更多信息以供将来参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:46:27.250

看起来 NPE 是由 getId 调用引起的。

但是为什么要创建一个新节点呢？只是：

```
aNew[i] = nodes[i]; 
```

您的新数组应该包含与旧数组相同的对象，而不是它们的克隆。

另外，一旦一切正常，作为优化，请考虑`System.arrayCopy`消除对循环的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:50:23.390

使用来源:-)`java.util.ArrayList`这样做。参见例如`grow()`方法

# javascript - Javascript cookie 的用途是什么？

> ID：12819594
> 
> 赞同：1
> 
> 时间：2012-10-10T12:41:28.413
> 
> 标签：javascript, cookies

大多数 cookie 往往是（或*应该是*，正如许多人所建议的那样）`HttpOnly`，这意味着它们不能使用 Javascript 修改或检索。

然而，有一些 Javascript 方法可用于在客户端操作 cookie。如果 Javascript cookie 确实对安全性不利，那么拥有它们有什么用？

换句话说，Javascript cookie 是否有任何**合法且安全**的用例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:44:25.640

某些 cookie 对于保留 UI 状态（窗口大小、主题等）可能很有价值。这些没有太大的安全问题。

# javascript - 在 javascript 弹出窗口中使用包含的文件

> ID：12819597
> 
> 赞同：1
> 
> 时间：2012-10-10T12:41:38.023
> 
> 标签：javascript, include, popup

我在我的网站上构建了一个 javascript 弹出窗口，但由于某种原因，这个弹出窗口没有使用包含的 javascript 文件。我怎样才能强制使用这些？

我已将这些文件包含在我的`<head>`：

```
<script type="text/javascript" src="includes/js/form/jquery.validationEngine-nl.js" charset="utf-8"></script>
<script type="text/javascript" src="includes/js/form/jquery.validationEngine.js" charset="utf-8"></script> 
```

这是我的 HTML：

```
<input type="submit" class="modal" value="Shout !" /> 
```

这是创建弹出窗口的 JS：

```
<script language="javascript">
    $(document).ready(function() {

    //Change these values to style your modal popup
    var align = 'center';       
    var top = 100;  
    var width = 500;    
    var padding = 10;
    var backgroundColor = '#FFFFFF';    
    var source = 'includes/php/popup.php';  
    var borderColor = '#333333'; 
    var borderWeight = 4;   
    var borderRadius = 5;   
    var fadeOutTime = 300;  
    var disableColor = '#666666'; 
    var disableOpacity = 40; 
    var loadingImage = 'lib/release-0.0.1/loading.gif'; 

    //This method initialises the modal popup
    $(".modal").click(function() {
        modalPopup(align, top, width, padding, disableColor, disableOpacity, backgroundColor, borderColor, borderWeight, borderRadius, fadeOutTime, source, loadingImage);
    });

    //This method hides the popup when the escape key is pressed
    $(document).keyup(function(e) {
        if (e.keyCode == 27) {
        closePopup(fadeOutTime);
        }
    });     
});
</script> 
```

即使我在`includes/php/popup.php`-file 中包含上述 JS 文件，它们也不能使用......我在这里监督什么？

该`modalPopup`功能可以[在这里](http://chopapp.com/#qyuvnw7l)找到。

# c++ - FREENECT_DEPTH_REGISTERED 对 libfreenect 无效

> ID：12819599
> 
> 赞同：5
> 
> 时间：2012-10-10T12:41:41.287
> 
> 标签：c++, kinect, openkinect

我正在使用 libfreenect 驱动程序上的 Kinect（原始 Xbox 版本）（顺便说一下，我在 Ubuntu 12.04 上）。我已经从 git 克隆了最新版本并手动安装，按照这里的说明：http: [//openkinect.org/wiki/Getting_Started#Ubuntu_Manual_Install](http://openkinect.org/wiki/Getting_Started#Ubuntu_Manual_Install)

我想访问注册的深度值。据我了解，Kinect 是出厂校准的，并且有一个查找表将深度像素与正确的 RGB 像素匹配。

我可以很好地打开 Kinect 并检索原始的 11 位深度数据。对于 1 到 7.5 米的距离，这给了我从大约 730 到 1045 的非线性值。

运行`device->setDepthFormat(FREENECT_DEPTH_MM);`使 Kinect 输出距离以毫米为单位，因此 setDepthFormat 似乎有效。

运行`device->setDepthFormat(FREENECT_DEPTH_REGISTERED);`似乎没有任何效果，因为只输出原始深度值。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-07T13:01:46.770

两者都`FREENECT_DEPTH_MM`应该`FREENECT_DEPTH_REGISTERED`以毫米为单位返回深度。不同之处在于后者对齐以匹配 RGB 视频图像。

中的`freenect_depth_format`枚举`libfreenect.h`提供了以下选项：

```
FREENECT_DEPTH_11BIT = 0, /**< 11 bit depth information in one uint16_t/pixel */
FREENECT_DEPTH_10BIT = 1, /**< 10 bit depth information in one uint16_t/pixel */
FREENECT_DEPTH_11BIT_PACKED = 2, /**< 11 bit packed depth information */
FREENECT_DEPTH_10BIT_PACKED = 3, /**< 10 bit packed depth information */
FREENECT_DEPTH_REGISTERED = 4, /**< processed depth data in mm, aligned to 640x480 RGB */
FREENECT_DEPTH_MM = 5, /**< depth to each pixel in mm, but left unaligned to RGB image */
FREENECT_DEPTH_DUMMY = 2147483647, /**< Dummy value to force enum to be 32 bits wide */ 
```

来源：[libfrenec git 问题页面](https://github.com/OpenKinect/libfreenect/issues/276)

配准转换会生成深度图像，就好像 RGB 和 IR 相机在物理上位于同一位置，并且没有偏移 2.5 厘米。如果您对细节感到好奇，请查看源代码。

来源：[libfreenect 源代码](https://github.com/OpenKinect/libfreenect/blob/master/src/registration.c)

# algorithm - 在二维数组中找到菱形的最快方法是什么？

> ID：12819606
> 
> 赞同：3
> 
> 时间：2012-10-10T12:42:12.160
> 
> 标签：algorithm

这是我的问题的可视化：

![在此处输入图像描述](../Images/b83e34627797d24016306294a95ac924.png)

我需要找到存储在正方形中的最有价值的菱形。**我想了几天，但直到现在，除了使用'for循环'**并检查每一个可能的菱形之外，我没有找到任何其他东西。你们怎么看？这是我能做到的唯一方法吗？:P 谢谢 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:59:33.747

这是我的想法：

**第一次迭代**，你遍历矩阵，但对角线。你从最左上角的地方开始，在那里你可以适应你的菱形（或菱形的边），然后你看一下菱形大小所覆盖的元素。

*   你首先检查元素 (0,1) 和 (1,0) *(a)*
*   接下来检查 (0,2) 和 (1,1) *(b)*
*   (1,1), (2,0) *(b)*
*   (0,3), (1,2) *(c)*
*   (1,2), (2,1) *(c)*
*   ...

我希望你能拿到考试令。你对这些元素所做的就是对它们进行总结：*e(0,1) + e(1,0) = 11*，*e(0,2) + e(1,1) = 3*等等。您必须注意，当您处理同一行上的元素（上面标有相同字母的元素）时，您不必重新计算总和：一个元素出去，一个进来，因此您只访问两个元素即可获得新的总和。

**第二次迭代**，你对角线遍历矩阵，但从不同的一侧。您从右上角开始，处理之前计算的总和。因此，您将检查的第一对将位于*(0,3), (1,4)*。您做的事情与之前完全相同：再次计算总和。

现在，在第二次迭代结束时，每个处理的字段实际上都包含在该字段中具有上角的**稀疏菱形的总和。**3x3 rhomb 的示例如下图所示：

![稀疏 3x3 菱形](../Images/a180d486c6d3c7d93f6015aa42bbb88c.png)

**第 3 步**从图像中可以看出，大小为*n的**稀疏菱形*“缺少”另一个稀疏菱形——大小为*(n-1)*的稀疏菱形。迭代 1 和 2 正是为图像中所有大小为*n*的稀疏菱形求和的过程。因此，作为第三步，我们再次运行第一次和第二次迭代，但不是使用我们正在搜索的大小 ( *n* )，而是使用大小*(n-1)*。*请注意*，大小为 1 的“搜索”等于输入矩阵（例如，如果 n=2，则对于第 3 步，您无需计算任何内容）。

 ***最后，对顶部位置 (0,2) 的 3x3 菱形感兴趣的总和是前两次迭代的 (0,2) 和第三步的 (1,2) 总和. 您可以将这两者相加：对于前两次传递的结果矩阵中的每个元素在位置 (x,y) 处，您从第三步结果矩阵中添加位置 (x,y+1) 处的元素。现在你只需要找到最大值，你就有了菱形的最大值和位置的答案。

您在 4 遍中完成所有这些（您可以在计算第二遍时跟踪最大值） - 所以这将给出正方形大小大小的复杂`O(4*n^2) = O(n^2)`性`n`。

希望很清楚，如果我的回答搞砸了，请要求澄清。

* * *

**2x2 菱形的示例**

**第一次通过**

```
 -1 11  3  7  5     * / * * * 
 -1  9 14 12  3     / * * * *
 -1 12 18  4  6     * * * * * 
 -1 11  3  6  2    * * * * * 
 -1 -1 -1 -1 -1     * * * * * 
```

**第二遍**

```
 -1 25 15 10 -1    * * * \ *
 -1 27 18 18 -1    * * * * \
 -1 15 24  6 -1    * * * * *
 -1 -1 -1 -1 -1    * * * * *
 -1 -1 -1 -1 -1    * * * * * 
```

**第三步**

由于*n=1*，第三遍不需要计算任何东西，第三遍的输出是输入矩阵

```
 1  2  2  2  2
 9  1  5  3  1
 8  9  9  2  3
 3  9  2  3  1
 2  1  3  1  1 
```

现在，我们只需要将第二次迭代的输出与第三步的输出相加（上移一位）。我们得到：

```
 -1 26 20 13 -1    
 -1 36 27 20 -1    
 -1 24 26  9 -1    
 -1 -1 -1 -1 -1    
 -1 -1 -1 -1 -1 
```

**回答** 在 (1,1) 处有上角的菱形是最有价值的菱形，总和为 31。

*注意：* `-1`是菱形边不适合的地方——*未定义*的总和。您可以在程序中以任何您想要的方式标记它（特别是如果您的矩阵中实际上可以有负值）。在第二遍中，您可以将具有*未定义*元素的任何总和设置为*未定义*。

*注意2：*无论菱形大小如何，当您在矩阵中滑动菱形边时，总有一个数字进来，而另一个数字从总和中出来（除非您输入新行）。

*注3：*第2遍和第2遍中菱形的第一个位置在数组中用`/`或标记`\`

* * *

**示例 3x3 菱形**

让我在同一个矩阵上做一个 3x3 菱形，以表明在一般情况下复杂度是`O(n^2)`（`n`正方形大小的大小在哪里），而不仅仅是 2x2 菱形。

让我们称输入矩阵`z[][]`，第一次传递`f[][]`后和第二次传递后的矩阵，`s[][]`

**第一次通过**

1.  `f[0][2] = z[0][2] + z[1][1] + z[2][0] == 11` *（一种）*
2.  `f[0][3] = z[0][3] + z[1][2] + z[2][1] == 16` *(二)*
3.  `f[1][2] = f[0][3] - z[0][3] + z[3][0] == 17` *(二)*
4.  `f[0][4] = z[0][4] + z[1][3] + z[2][2] == 14` *（C）*
5.  `f[1][3] = f[0][4] - z[0][4] + z[3][1] == 21` *（C）*
6.  `f[2][2] = f[1][3] - z[1][3] + z[4][0] == 20` *（C）*
7.  `f[1][4] = z[1][4] + z[2][3] + z[3][2] == 5` *(d)*
8.  `f[2][3] = f[1][4] - z[1][4] + z[4][1] == 5` *(d)*
9.  `f[2][4] = z[2][4] + z[3][3] + z[4][2] == 9` *(e)*

您最多访问每个元素一次。用不同字母标记的是同一行上的总和。`m`在该行的第一个 sum 中，您必须对rhomb 一侧的元素求和，我们称它为`m x m`rhomb。在该行的所有其他总和中，您*始终*必须准确访问 3 个元素：前一个总和、输出的元素（带有`-`符号的元素）和输入的元素（`+`符号）。

```
 -1 -1 11 16 14 
 -1 -1 17 21  5 
 -1 -1 20  5  9 
 -1 -1 -1 -1 -1 
 -1 -1 -1 -1 -1 
```

**第二遍**

然后你在第二遍中做类似的事情（我不打算把它们写出来），你只是少了一点元素。

```
 -1 -1 41 -1 -1 
 -1 -1 -1 -1 -1 
 -1 -1 -1 -1 -1 
 -1 -1 -1 -1 -1 
 -1 -1 -1 -1 -1 
```

**第三步**

此步骤与*2x2 示例的**第 1 次*和*第 2 次迭代*完全相同。因此，2x2 稀疏菱形的总和是：

 *```
 -1 25 15 10 -1    
 -1 27 18 18 -1    
 -1 15 24  6 -1    
 -1 -1 -1 -1 -1    
 -1 -1 -1 -1 -1 
```

当我们将它与*第二次迭代*的输出相加时，我们得到：

```
 -1 -1 59 -1 -1 
 -1 -1 -1 -1 -1 
 -1 -1 -1 -1 -1 
 -1 -1 -1 -1 -1 
 -1 -1 -1 -1 -1 
```

**答案**只有一个 3x3 菱形适合矩阵，所以矩阵中只剩下一个元素，这正是唯一适合的菱形的总和：59。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:23:45.670

如果问题是关于在菱形“内核”中找到最大和，那么是的，有更快的算法。

penelope 提出的算法是一个很好的起点——然而，当菱形尺寸变大时，所需的输入和输出部分和的数量会增加。这可以通过二维第一遍来避免，它在 2 个方向上对角积分值。

```
[ a b c d]  --> integrate a, a+f, a+f+k, a+f+k+p right down    
[ e f g h]      then integrate the elements in positions c,f,i etc. 
[ i j k l]
[ m n o p] 
```

与查找对齐平方和相比，这种方法的缺点是必须计算一组单独的对角线，因为 (x+y) 是奇数，而 (x+y) 是偶数；那么结果来自采样 8 个积分和而不是 4 个。

我相信通过从左到右和从上到下集成最容易理解该方法（求和区域）

```
[1 2 0 3]       [1 3 3 6]        here every cell contains the summed area
[0 0 1 1]       [1 3 4 8]        of M[I][J] := sigma i=0..I,j=0..J m[i][j]
[1 0 3 1]  -->  [2 4 8 13]
[0 1 1 1]       [2 5 10 16] 
```

要获得区域（8..16,100..983），只需访问角元素：

```
Sigma i=8..16,j=100..983 m[i][j] :== M[7][99]+M[16][983]-M[7][983]-M[16][99] 
```

当要积分的形状旋转45度时，我们要计算两组积分。如果这是一个棋盘，则分别用于白色和黑色方块。然后每个菱形将由来自一个矩阵 M_odd 的 N*N 大小的求和区域和来自另一个求和区域矩阵 M_even 的 (N-1)*(N-1) 大小的求和区域组成（反之亦然）。这可以扩展到具有相同复杂性的任何菱形大小。（并且当 N=1 或 N=2 时，可以优化从矩阵 m 中添加元素，并使用矩阵 M 来表示 N>2 的平方）。

评论：也许这与佩内洛普的建议相同，但是，我无法弄清楚，因为缺乏从 5 元素菱形到任意大小的概括。****

# java - How to access elements in a JPanel that I don't have stored as a variable? Java/Swing

> ID：12819607
> 
> 赞同：1
> 
> 时间：2012-10-10T12:42:13.690
> 
> 标签：java, swing, class, field, jcomponent

I'm building a classic form GUI with a variable amount and order of JTextFields, JCheckBoxes and JComboBoxes, with separate JPanels containing several groups of them.

For now I just build them in a builder method that adds a JLabel + the appropriate input Element to a JPanel and returns the JPanel to the main initialize method.

Therefore, I can only access the elements by

```
Component[] panels = frame.getContentPane().getComponents();  
JPanel panel = (JPanel) panels[f];  
Component[] components = panel.getComponents();  

[...] determining the element class  
JTextField field = (JTextField) components[u + 1] 
```

Reading works fine with this method, but setting values is harder because I'm currently not accessing the elements directly. Am I doing something wrong or do I have to rebuild the panel from the start?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:48:52.023

你没有做坏事，你在正确的轨道上。实际上，这就是通常的做法。

您的 GUI 属于某个类 - 您需要确定该 GUI 的哪些元素是“交互式的” - 即稍后在执行期间对它们执行一些操作。这些可以是控制元素，例如文本字段、按钮等……还有一些元素不是交互式的，并且在创建后不使用。这些是标签、面板等......它们的目的只是在 GUI 上绘制。

因此，当您决定哪些元素是“重要”元素时，您只需将这些元素从局部变量提升到类字段。如果您使用任何体面的 IDE（例如 NetBeans 或 Eclipse），甚至可以在 Refactoring 选项卡下为您提供该选项。尽管如此，结果应该是这样的：

```
public class GUI{
    public void create GUI{
        //code before...
        JTextField field = new JTextField();
        //code after...
    }
} 
```

将改为：

```
public class GUI{
    private JTextField textField;

    public void create GUI{
        //code before...
        textField = new JTextField();
        //code after...
    }
} 
```

或者，如果这些字段数量不定，则可以在数组或集合中声明它们：

```
public class GUI{
    private JTextField[] textFields;

    public void create GUI{
        //code before...
        for(int i = 0; i < dbResultCount; i++){
            textFields[i] = new JTextField();
        }
        //code after...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:48:26.430

您使用的方法听起来不是一个好主意。维护这个应用程序真的很难。

如果您需要访问某些组件，那么我建议您将它们声明为实例变量。

# c# - How to find the inner text from xmlnodelist node = doc.getelementbytagname

> ID：12819609
> 
> 赞同：0
> 
> 时间：2012-10-10T12:42:19.020
> 
> 标签：c#

```
XmlNodeList node = DOC.GetElementsByTagName("CheckMarkObject");

        foreach (XmlNode nodes in node)
        {
            string name = null;
             name = node.innertext;
        }

        checkmark.Label = node[0].InnerText;   
        checkmark.Name = node[0].InnerText;
        //checkmark.IsChecked = form[0].InnerText;
        CreateControlsUsingObjects(checkmark); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:03:39.647

变量名应该是其他方式

```
 XmlNodeList nodes = DOC.GetElementsByTagName("CheckMarkObject");

    foreach (XmlNode node in nodes)
    {
        string name = node.InnerText;
    } 
```

## 更新

```
 //using System.Data;
   public DataTable getNodesData(XmlNodeList nodes)
    {
        DataTable dt = new DataTable();

        if (nodes.Count <= 0)
            return dt;

        foreach (XmlNode childnode in nodes[0].ChildNodes)
            dt.Columns.Add(childnode.Name);

        foreach (XmlNode node in nodes)
        {
            DataRow dr = dt.NewRow();
            foreach (XmlNode childnode in node.ChildNodes)
                dr[childnode.Name] = childnode.InnerText;

            dt.Rows.Add(dr);
        }

        return dt;
    }

    XmlNodeList nodes = DOC.GetElementsByTagName("CheckMarkObject");
    DataTable dt = getNodesData(nodes); 

    //Bind your dt to GridView, DataList, Repeater etc 
```

或者

```
foreach(DataRow row in dt.Rows)
{
    print(row["Name"]);
    print(row["IsChecked"]);
    print(row["Label"]);
} 
```

# node.js - Node.js 和 Redis；等待循环完成

> ID：12819610
> 
> 赞同：6
> 
> 时间：2012-10-10T12:42:21.333
> 
> 标签：node.js, asynchronous, redis

我想问这个问题，因为我不确定我的 Node.js 逻辑是否正确

我有一组需要使用 redis 的 get 方法查询的 id。在检查了某个值之后（假设我正在检查我使用给定“键”获得的对象是否具有空名称），我将它们添加到列表中。这是我的示例代码；

```
var finalList = [];
var list = [];
redisClient.smembers("student_list", function(err,result){
            list = result; //id's of students
            console.log(result);

            var possibleStudents = [];

            for(var i = 0; i < list.length; i++){

                redisClient.get(list[i], function(err, result){
                    if(err)
                        console.log("Error: "+err);
                    else{
                        tempObject = JSON.parse(result);
                        if(tempObject.name != null){
                            finalList.push(tempObject);
                        }
                    }
                });     
            }

    });
   console.log("Goes here after checking every single object"); 
```

但正如预期的那样，由于 Node 的异步特性，它在不检查列表中的每个 id 的情况下执行“Goes here...”。我需要在检查每个 id 后应用其余程序（在 redis db 中映射并检查名称）。但我不知道该怎么做。也许如果我可以将回调附加到 for 循环并确保我的其余函数在循环完成后开始运行（我知道这是不可能的，但只是给出一个想法）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T13:10:33.740

我会按照您在问题中建议的路线，并将自定义回调附加到您的获取函数：

```
function getStudentsData(callback) {
    var setList = [];
    var dataList = [];

    redisClient.smembers("student_setList", function(err,result) {
        setList = result; //id's of students

        for(var i = 0; i < setList.length; i++) {
            redisClient.get(setList[i], function(err, result) {
                if(err) {
                    console.log("Error: "+err);
                } else {
                    tempObject = JSON.parse(result);
                    if(tempObject.name != null) {
                        dataList.push(tempObject);
                    }
                }
            });     
        }

        if(dataList.length == setList.length) {
            if(typeof callback == "function") {
                callback(dataList);
            }
            console.log("getStudentsData: done");
        } else {
            console.log("getStudentsData: length mistmach");
        }

    });
}

getStudentsData(function(dataList) {
    console.log("Goes here after checking every single object");
    console.log(dataList.length);
    //More code here
}); 
```

这可能是最有效的方法；或者，您可以依靠旧学校`while`循环，直到数据准备好：

```
var finalList = [];
var list = [0];

redisClient.smembers("student_list", function(err,result) {
    list = result; //id's of students
    var possibleStudents = [];

    for(var i = 0; i < list.length; i++) {
        redisClient.get(list[i], function(err, result) {
            if(err) {
                console.log("Error: "+err);
            } else {
                tempObject = JSON.parse(result);
                if(tempObject.name != null) {
                    finalList.push(tempObject);
                }
            }
        });     
    }
});

process.nextTick(function() {
    if(finalList.length == list.length) {
        //Done
        console.log("Goes here after checking every single object");
        console.log(dataList.length);
        //More code here
    } else {
        //Not done, keep looping
        process.nextTick(arguments.callee);
    }
}); 
```

我们使用`process.nextTick`而不是实际`while`来确保其他请求在此期间不被阻止；由于 Javascript 的单线程特性，这是首选方式。为了完整起见，我将其加入，但前一种方法更有效，更适合 node.js，所以除非涉及重大重写，否则请继续使用。

这两种情况都依赖异步回调毫无价值，这意味着它之外的任何代码仍然可以在其他代码完成之前运行。例如，使用我们的第一个片段：

```
function getStudentsData(callback) {
    //[...]
}

getStudentsData(function(dataList) {
    //[...]
});

console.log("hello world"); 
```

最后一个 console.log 几乎可以保证在我们传递给 getStudentsData 的回调被触发之前运行。解决方法？为它设计，这就是 node.js 的工作方式。*在我们上面的例子中，这很简单，我们只需*在传递给 getStudentsData 的回调中调用 console.log ，而不是在它之外。其他场景需要与传统过程编码稍有不同的解决方案，但是一旦您了解它，您会发现事件驱动和非阻塞实际上是一个非常强大的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T17:44:24.027

尝试[完成](https://github.com/chaoran/node-finish)模块。我创建了这个模块来处理这个问题。它比 Async 更易于使用，并且性能也更好。这是一个例子：

```
var finish = require("finish");
finish(function(async) { 
  // Any asynchronous calls within this function will be captured
  // Just wrap each asynchronous call with function 'async'
  ['file1', 'file2', 'file3'].forEach(function(file) {
    async(function(done) { 
      // Your async function should use 'done' as callback, or call 'done' in its callback
      fs.readFile(file, done); 
    });
  });
}, function(err, results) {
  // fired after all asynchronous calls finish or as soon as an error occurs
  console.log(results[0]);console.log(results[1]);console.log(results[2]);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:48:12.783

尝试node.js 的[异步模块。](https://github.com/caolan/async#forEach)该模块具有异步 forEach。

# c++ - Win32 应用程序设置

> ID：12819613
> 
> 赞同：3
> 
> 时间：2012-10-10T12:42:38.083
> 
> 标签：c++, winapi, registry, settings

如何存储可以稍后加载到我的应用程序中的设置？

例如，我有一个编辑控件，用户可以更改其字体、字体颜色和背景颜色。当用户更改这些时，我想保存它们，以便当用户再次打开应用程序时，字体和颜色将与它们离开时相同。

我曾考虑过写入 Windows 注册表，但我不仅对如何在那里保存字体感到困惑，（或者即使你可以做这样的事情），而且我还有一个可以运行的便携式版本闪存驱动器。有没有办法将这些设置保存到与可执行文件位于同一目录中的文件中？如果是这样，我将如何保存和加载这些？

如果没有办法使用设置文件完成此操作，我如何使用 Windows 注册表来完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:03:52.017

IMO 最好的方法是将其存储在 ini 文件中，例如，一个文件：app.ini

```
[AppSettings]
fntBackground=255 255 0
fntFace=Tahome

[LoadDialog]
... 
```

自己写很容易，你也可以在codeproject上找到现成的类，我快速搜索了一下，发现了这个：

[http://www.codeproject.com/Articles/5401/CIni](http://www.codeproject.com/Articles/5401/CIni)

看起来很有希望

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:05:44.420

如果您的应用程序被允许写入该文件夹，那么您可以像许多 Windows 应用程序一样使用 .ini 文件。`GetPrivateProfile/WritePrivateProfile`您可以使用API读取和写入文件，例如[`GetPrivateProfileInt`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724345%28v=vs.85%29.aspx)

如果您正在使用某些框架，它可能还提供更友好的 API 版本（例如 MFC 提供的[`CWinApp::GetProfileInt`](http://msdn.microsoft.com/en-us/library/z024c0d3%28v=vs.80%29.aspx)和其他）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T13:27:29.267

正如 Zdeslav Vojkovic 所说，在 Windows 中读取配置信息的最简单方法是使用[GetPrivateProfileString /WritePrivateProfileString 函数。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724353%28v=vs.85%29.aspx)

但随后您会看到：*注意 此功能仅用于与基于 Windows 的 16 位应用程序兼容。应用程序应该在注册表中存储初始化信息。*这在今天已经过时并且经常被禁止。建议（但通常只是简单的方式）要求您为此使用[XML 文件](http://msdn.microsoft.com/en-us/magazine/cc163383.aspx)。然后你可以使用任何你喜欢的方法——DOM、SAX、[XMLLite](http://msdn.microsoft.com/en-us/library/windows/desktop/ms752838%28v=vs.85%29.aspx)。

# java - 问题：将大数据传递给第二个活动

> ID：12819617
> 
> 赞同：44
> 
> 时间：2012-10-10T12:43:05.717
> 
> 标签：java, android, android-activity, android-4.0-ice-cream-sandwich

我有一个奇怪的问题。我在网上四处寻找，但没有找到答案。我仍然是android编程的初学者。让我们开始吧：

我想做的就是用一些数据调用第二个活动。它适用于小数据，但如果数据变大，第二个活动将不会显示并且第一个活动完成。这是我的调用方法的代码：

```
Intent intent = new Intent(ActivitySearch.this,ActivityResults.class);
Bundle bundle = new Bundle();
bundle.putParcelableArrayList("data", searchList);
intent.putExtras(bundle);
startActivity(intent); 
```

接收数据的部分并不重要。即使我不尝试读取包，也不会调用该活动。我已经用以下几行测试了这个：

```
@Override
public void onCreate(Bundle savedInstanceState) {
Log.d("DEBUG","ActivityResult::onCreate()");
super.onCreate(savedInstanceState); 
```

`OnCreate()`永远不会被调用。

也许你的一个人有一个想法......谢谢你的帮助！

编辑：至少我忘记了：这只发生在 ICS 下。该应用程序就像姜饼和果冻的魅力一样。

编辑2：Logcat

```
10-10 14:49:46.951: D/OpenGLRenderer(21696): Flushing caches (mode 0)
10-10 14:49:47.011: V/ActivityThread(22429): com.example.amazonsearch white listed for hwui
10-10 14:49:50.821: W/IInputConnectionWrapper(21696): showStatusIcon on inactive InputConnection 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-11T20:43:03.210

您可能会收到[TransactionTooLargeException](http://developer.android.com/reference/android/os/TransactionTooLargeException.html)

正如 google [android guide](http://developer.android.com/guide/faq/framework.html#3)所建议的，您可以使用静态字段或单例在活动之间共享数据。

他们推荐它“用于在短时间内共享复杂的非持久性用户定义对象”

从您的代码看来，这正是您所需要的。

因此，您在 ActivitySearch.class 中的代码可能如下所示：

```
ActivityResults.data = searchList;
Intent intent = new Intent(ActivitySearch.this,ActivityResults.class);
startActivity(intent); 
```

然后，您可以在 ActivityResults 活动启动后从任何位置访问 ActivityResults.data。

对于需要在用户会话之间共享的数据，不建议使用静态字段，因为当应用程序在后台运行时（如果框架需要释放资源），应用程序进程可能会被 android 框架杀死并重新启动。在这种情况下，所有静态字段都将重新初始化。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-05T11:27:39.317

我更喜欢传递大数据的方式是使用**enums**。这种方法的一些优点：

*   无需创建单例，您始终拥有枚举的单个实例；
*   数据被正确封装；
*   引用在活动收到后立即删除

这是一个例子：

```
package com.jyvee.arguments;

import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;

public class SomeActivity extends Activity {

    // Names for the arguments we pass to the
    // activity when we create it
    private final static String ARG_STRING = "ARG_STRING";
    private final static String ARG_INT = "ARG_INT";

    private String stringField;
    private int intField;
    private List<Object> arrayField;

    private enum DataHolder {
        INSTANCE;

        private List<Object> mObjectList;

        public static boolean hasData() {
            return INSTANCE.mObjectList != null;
        }

        public static void setData(final List<Object> objectList) {
            INSTANCE.mObjectList = objectList;
        }

        public static List<Object> getData() {
            final List<Object> retList = INSTANCE.mObjectList;
            INSTANCE.mObjectList = null;
            return retList;
        }
    }

    @Override
    protected void onCreate(final Bundle savedState) {
        super.onCreate(savedState);

        // Get the activity intent if there is a one
        final Intent intent = getIntent();

        // And retrieve arguments if there are any
        if (intent.hasExtra(ARG_STRING)) {
            stringField = intent.getExtras().getString(ARG_STRING);
        }
        if (intent.hasExtra(ARG_INT)) {
            intField = intent.getExtras().getInt(ARG_INT);
        }
        // And we retrieve large data from enum
        if (DataHolder.hasData()) {
            arrayField = DataHolder.getData();
        }

        // Now stringField, intField fields are available
        // within the class and can be accessed directly
    }

    /**
     * /** A static method for starting activity with supplied arguments
     * 
     * @param contextA
     *            context that starts this activity
     * @param stringArg
     *            A string argument to pass to the new activity
     * @param intArg
     *            An int argument to pass to the new activity
     * @param objectList
     *            An object list argument to pass to the new activity
     */
    public static void startActivity(final Context context, final String stringArg, 
            final int intArg, final List<Object> objectList) {

        // Initialize a new intent
        final Intent intent = new Intent(context, SomeActivity.class);

        // To speed things up :)
        intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);

        // And add arguments to the Intent
        intent.putExtra(ARG_STRING, stringArg);
        intent.putExtra(ARG_INT, intArg);

        // Now we put the large data into our enum instead of using Intent extras
        DataHolder.setData(objectList);

        context.startActivity(intent);
    }
} 
```

更多信息[**在这里**](http://jyvee.com/passing-large-data-to-an-activity/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T12:49:57.460

如果您将大量信息从一个`Activity`传递到另一个，则可能会使应用程序变慢。

或者，使用全局类来存储变量，您可以使用它轻松获取或设置任何值。这可以在全局文件中声明。

请参阅此链接： [http ://androidresearch.wordpress.com/2012/03/22/defining-global-variables-in-android/](http://androidresearch.wordpress.com/2012/03/22/defining-global-variables-in-android/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-10T12:50:29.557

据我记得，直到 API-8（Froyo），在通过意图传递可打包对象时存在一些限制（如 1MB）。但是，您可以简单地将可打包数据写入文件，然后通过 bundle 将文件路径发送到您的下一个活动。稍后，编写您的第二个活动以从文件中读取数据并随后将其删除。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-12T20:41:18.790

我`TransactionTooLargeException`最近遇到了这个问题，并正在寻找一种可能的解决方案来避免它。最后，我找不到任何可行的方法。在大多数答案中，您会发现人们推荐了不同的方法来避免此异常，但没有合适的示例。

这是我为解决此问题所做的工作，这在某些地方可能不是理想的解决方案，并且也有一些限制。

***第 1 步 -***编写一个将捆绑包转换为字符串并将其存储在 Shared Preference 中的类。

```
public class ActivityBridge {

    private static final String KEY_ACTIVITY_BRIDGE = "ACTIVITY_BRIDGE";
    private final Context context;
    private SharedPreferences sharedPreferences;

    public ActivityBridge(Context context) {
        this.context = context;

        sharedPreferences = context.getSharedPreferences(KEY_ACTIVITY_BRIDGE, Context.MODE_PRIVATE);
    }

    @SuppressLint("ApplySharedPref")
    public void putData(Bundle bundle, Intent intent) {
        sharedPreferences.edit()
                .putString(
                        intent.toString(),
                        Base64.encodeToString(bundleToBytes(bundle), 0)
                )
                .commit();
    }

    @SuppressLint("ApplySharedPref")
    public Bundle getData(Intent intent) {
        Bundle bundle;
        final String bundleString = sharedPreferences.getString(intent.toString(), "");

        if (TextUtils.isEmpty(bundleString)) {
            return null;
        } else {
            bundle = bytesToBundle(Base64.decode(bundleString, 0));
        }

        sharedPreferences.edit()
                .clear()
                .commit();

        return bundle;
    }

    public byte[] bundleToBytes(Bundle bundle) {
        Parcel parcel = Parcel.obtain();
        parcel.writeBundle(bundle);
        byte[] bytes = parcel.marshall();
        parcel.recycle();
        return bytes;
    }

    public Bundle bytesToBundle(byte[] bytes) {
        Parcel parcel = Parcel.obtain();
        parcel.unmarshall(bytes, 0, bytes.length);
        parcel.setDataPosition(0);
        Bundle bundle = parcel.readBundle(context.getClassLoader());
        parcel.recycle();
        return bundle;
    }
} 
```

***第 2 步 -***用法

在创建意图时

```
 Intent intent = new Intent(ActivityA.this, ActivityB.class);

         Bundle bundle = new Bundle();
         bundle.putString("<KEY>", "<VALUE>");
         new ActivityBridge(ActivityA.this).putData(bundle, intent);

         startActivity(intent); 
```

在提取捆绑包时

```
 Bundle bundle = new ActivityBridge(this).getData(getIntent()); 
```

注意：*此方案读取后会清除存储的Bundle，如果重新创建Activity，则不会返回Bundle。这是一种解决方法，任何建议或问题都将受到高度赞赏。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T12:53:32.950

我不知道为什么它不适用于大数据，但是如果您找不到任何方法来修复它，我建议您使用自定义全局应用程序，[例如这里](https://stackoverflow.com/questions/10607392/custom-global-application-class-breaks-with-android-app-application-cannot-be-c)。（还要检查正确的答案以使其正常工作）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-03T19:28:06.193

我选择将有效负载写入文件，然后在子活动中将其读回，因为：

*   可以在被操作系统杀死的应用程序中幸存下来
    *   （如进入新activity后，app长时间进入后台）
    *   （例如，开发人员选项 > 不保留活动已打开）
*   不需要全局/静态变量

( ) 下面的这个类`DataReference`允许在文件中保存和加载`Serializable`“ `Payload`”。`DataReference`本身就是这样`Serializable`，它可以被写入一个`Bundle`或`Intent`传递给一个新的`Activity`......

只需确保在 期间也保存它，并在...`saveInstanceState`期间重新加载它`onCreate`

```
/**
 * provides a means to pass around a large resource via a bundle. instead of storing the [Payload] in
 * the bundle, only a [sessionId], and [directoryName] is stored in a bundle, that can be used to
 * retrieve the actual [Payload] at a later time.
 */
class DataReference<Payload : Serializable>(
        private val directoryName: String,
        private val sessionId: String = randomAlphaNumericString()
) : Serializable {

    private fun directory(context: Context) = context.applicationContext.getDir(directoryName, Context.MODE_PRIVATE)
    private fun sessionIdFile(context: Context) = File(directory(context), "sessionId")
    private fun payloadFile(context: Context) = File(directory(context), "payload")

    /**
     * if the [sessionId] is valid, reads the [Payload] from persistent memory, and returns it to
     * the caller, or null, if no existing [Payload] exists; otherwise, if [sessionId] is invalid,
     * the [Payload] is deleted from persistent memory (if any exists), and null is returned to the
     * caller.
     */
    fun load(context: Context, payloadKClass: KClass<Payload>): Payload? {
        return if (sessionId == sessionIdFile(context).readObject(String::class)) {
            payloadFile(context).readObject(payloadKClass)
        } else {
            sessionIdFile(context).deleteFileIfExists()
            payloadFile(context).deleteFileIfExists()
            null
        }
    }

    /**
     * overwrites any existing [Payload] with the new [payload], which is only accessible from
     * [load] when the [sessionId] passed into [load] matches the [sessionId] passed into this call
     * to [save].
     */
    fun save(context: Context, payload: Payload) {

        // delete files if they exist
        sessionIdFile(context).deleteFileIfExists()
        payloadFile(context).deleteFileIfExists()

        // write the payload & session id to the file
        ObjectOutputStream(sessionIdFile(context).outputStream()).use { oos ->
            oos.writeObject(sessionId)
            oos.flush()
        }
        ObjectOutputStream(payloadFile(context).outputStream()).use { oos ->
            oos.writeObject(payload)
            oos.flush()
        }
    }

    private fun File.deleteFileIfExists(): Boolean {
        isFile && delete()
        return !exists()
    }

    private fun <T:Any> File.readObject(tKClass: KClass<T>): T? = if (isFile) {
        ObjectInputStream(inputStream()).use { ois ->
            tKClass.safeCast(ois.readObject())
        }
    } else {
        null
    }
} 
```

# extjs - Extjs combo box not diplaying selected value

> ID：12819620
> 
> 赞同：1
> 
> 时间：2012-10-10T12:43:17.897
> 
> 标签：extjs

I have this combobox configuration:

```
{
                width: 70,
                xtype: 'combo',
                fieldLabel: _mobile,
                displayField: 'num_mobile',
                valueField: 'id',
                id: 'ListMobileCmd',
                store: mobilesStore,
                triggerAction: 'all',
                emptyText: 'Mobiles',
                mode: 'local'
            } 
```

ans my store is:

```
var mobilesStore = new GeoExt.data.FeatureStore({
        layer: MobileLayer,
        proxy: new GeoExt.data.ProtocolProxy({
                protocol: new OpenLayers.Protocol.HTTP({
                    url: SERVER+"/mobiles_personnes",
                    format: new OpenLayers.Format.GeoJSON()
                })
        }),
        autoLoad: false,
        sortInfo: { field: 'num_mobile',  direction: 'ASC'},
        fields: [{name: 'id', mapping: 'id'},
                  {name: 'num_mobile'},
                  {name: 'tm_id'},
                  {name: 'is_owner'},
                  {name: 'datetime_deb'},
                  {name: 'nom'},
                  {name: 's_id'},
                  {name: 'p_id'},
                  {name: 'cin'},
                  {name: 'login'},
                  {name: 'type'},
                  {name: 'adresse'},
                  {name: 'prenom'},
                  {name: 'num'},
                  {name: 'pwd'},
                  {name: 'datetime_fin'},
                  {name: 'num_mobile'},
                  {name: 'email'}]
    }); 
```

I got all my items in my combobox but it always displays the first item, as selected, when I select any item from the list! Any ideas?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T07:38:03.840

我之前遇到过相同类型的卡住:) 只需将您的值更改为“num_mobile”，它就会正常工作。

```
 valueField: 'num_mobile', 
```

# php - for 循环，最后一个值

> ID：12819623
> 
> 赞同：0
> 
> 时间：2012-10-10T12:43:20.237
> 
> 标签：php, loops, html-lists

> **可能重复：**
> [CSS3 选择器最后一个不属于 X 类的元素](https://stackoverflow.com/questions/8168720/css3-selector-last-element-that-is-not-of-class-x)

我有这个循环：

```
for($t=0; $t<$numRowszzx; $t++)
{
    if(!isset($_GET["prodcat"]))
    {
        header("Location: products.php?prodcat=".$rowzx[0]["category_id"]);
    }
    $categoryName = $rowzx[$t]["category_name"];

    if($rowzx[$t]["category_id"]==$_GET["prodcat"])
    {
        ?>
        <li style="height:30px; line-height:30px; color:#2a598a; font-weight:bold; font-size:14px;"><img src="<?=$site_url?>/images/parrows.png" width="13" height="7" /><span style="padding-left:12px;"><a href="<?=$site_url?>/products.php?prodcat=<?=$rowzx[$t]["category_id"];?>" style=" color:#f15a22; font-weight:bold; font-size:14px;"><?=$categoryName?></a></span></li>
        <?php
    } else {
        ?>
        <li style="<?php if($i > $numRowszzx-1){ ?>margin-bottom:500px;<?php } ?> height:30px;line-height:30px; color:#2a598a; font-weight:bold; font-size:14px;"><img src="<?=$site_url?>/images/parrows.png" width="13" height="7" /><span style="padding-left:12px;"><a href="<?=$site_url?>/products.php?prodcat=<?=$rowzx[$t]["category_id"];?>" style=" color:#2a598a; font-weight:bold; font-size:14px;"><?=$categoryName?></a></span></li>
        <?php
    }
} 
```

现在我需要得到最后一个**li ...在这段代码中，如果****li**是最后一个，我需要做，给它`margin-bottom:500px;`

```
else {
    ?>
    <li style="<?php if($i > $numRowszzx-1){ ?>margin-bottom:500px;<?php } ?> height:30px;line-height:30px; color:#2a598a; font-weight:bold; font-size:14px;"><img src="<?=$site_url?>/images/parrows.png" width="13" height="7" /><span style="padding-left:12px;"><a href="<?=$site_url?>/products.php?prodcat=<?=$rowzx[$t]["category_id"];?>" style=" color:#2a598a; font-weight:bold; font-size:14px;"><?=$categoryName?></a></span></li>
    <?php
} 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:44:40.723

```
if($t+1 == $numRowszzx)
{
//this is the last iteration
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:48:34.567

您可以在 else 中添加*条件*为 $t == ($numRowszzx-1)的*if 语句*

 *就像是 ：

```
else
{
     if($t == ($numRowszzx-1)) // So we reached the upper bound of your for loop
     {
         // Your <li> here
     }
} 
```

正如 Jimmy 所提到的，您可以将其重写为 else if 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:10:51.383

如果你想要最后一个 li `margin-bottom:500px`。为此使用 css，不要使用内联样式。

您可以通过添加`:last-child`到您的节点轻松地对其进行样式设置。

```
li:last-child {
    margin-bottom:500px;
} 
```*

# java - 如何使用这两个 ArrayAdapter 构造函数

> ID：12819625
> 
> 赞同：1
> 
> 时间：2012-10-10T12:43:30.087
> 
> 标签：java, android

当我阅读 API 文档时，我在 ArrayAdapter 类中发现了 2 个奇怪的构造函数：

```
public ArrayAdapter (Context context, int textViewResourceId)

public ArrayAdapter (Context context, int resource, int textViewResourceId) 
```

没有 List 或 Array 可以插入到这 2 个公共构造函数中（其余的都有），那么拥有这 2 个构造函数的目的是什么？如何使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:10:39.710

如果在创建对象时没有要显示的 Array，这两个构造函数用于初始化 ArrayAdapter。创建/接收阵列后，您可以使用

> `public void addAll (Collection<? extends T> collection)`

设置要显示的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:51:08.427

在这种情况下，您可以在 ArrayAdapter 的子类中使用方法 getItemViewType(int position) 和 getViewTypeCount() ，并且 List 或 Array of items 应该是填充的类字段。

# html - Do I need all these wraps?

> ID：12819626
> 
> 赞同：2
> 
> 时间：2012-10-10T12:43:31.380
> 
> 标签：html, css

I was thinking it might be possible just to have one wrap, rather than a seperate one on the header and footer as well.

Can this be done, can I have a single wrap container that puts the content in the middle at a fixed width on all elements?

Here is the jsfiddle: [http://jsfiddle.net/HMsKa/](http://jsfiddle.net/HMsKa/)

**Here is the HTML:**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en-US">
<head>
        <title>Title</title>
        <link href="/static/css/main.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div id="container-wrap">
            <div id="header-wrap" class="full_width">
                <div id="header-container" class="dc1">
                    <div id="header" class="thin_width rel">
                        <a href="/"><img src="/static/img/header.jpg" id="logo" alt="coming soon" title="coming soon"></a>
                        <ul>
                            <li><a href="/posts/list/">Link1</a></li>
                            <li><a href="/posts/create/">Link 2</a></li>
                            <li><a href="/about">Link 3</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="container" class="thin_width">
                <div class="full_width" style="height:auto;">
                    <div id="col-main">                
        <h1>Sed ut perspiciatis unde</h1>
            <div id="fullwidth">
                <form id="searchForm" action="/search">
                        <input type="text" name="kw" class="field r2 lft dc1 tc5 b1 ts3" id="field_regular" placeholder="Keyword">
                        <input type="text" name="loc" class="field r2 lft dc1 tc5 b1 ts3" id="field_regular" placeholder="Location">
                        <input type="submit" class="button r2 b1 ts3" id="button_search" value="Search">
                </form>
            </div>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
     </div>
               </div>                    
            </div>

            <div id="footer-wrap" class="thin_width">
                <div id="footer-container" class="full_width abs dc1">
                    <div id="footer" class="thin_width rel">
                    &#169; 2012 Company, Inc.
                    <ul>
                        <li><a href="/contact">Contact</a></li>
                        <li><a href="/faq">FAQ</a></li>
                        <li><a href="/terms">Terms</a></li>
                        <li><a href="/privacy">Privacy</a></li>
                    </ul>
                   </div>
                </div>
            </div>
        </div>
    </body>
</html>​ 
```

**Here is the CSS:**

```
/* GENERAL */
html { height:100%; }
body { height:100%; font-family: Arial, Helvetica, sans-serif; font-weight:normal; font-style:normal; font-size:100%; }
p { font size: 13px; margin: 10px 0; padding: 0; }
h1 { font-size: 22px; }  
h2 { font-size: 17px; }  
h3 { font-size: 14px; } 
blockquote { font-style: italic; }

/*POSITIONING */
.lft { float: left; }
.rgt { float: right; }
.rel { position: relative; }
.abs { position: absolute; }

/* TEXT COLOURS */
.tc6 { color: #4C4C4C; }
.tc5 { color: #333333; }
.tc4 { color: #999999; }
.tc3 { color: #808080; }
.tc2 { color: #F5F5F5; }
.tc1 { color: #FFFFFF; }

/* TEXT STYLING */
.bold { font-weight: bold; }
.italic { font-style:italic; }

/* TEXT SIZES */
.ts5 { font-size: 21px; }
.ts4 { font-size: 18px; }
.ts3 { font-size: 15px; }
.ts2 { font-size: 13px; }
.ts1 { font-size: 11px; }

/* DIV COLOURS */
.dc6 { background-color: #4C4C4C; }
.dc5 { background-color: #333333; }
.dc4 { background-color: #999999; }
.dc3 { background-color: #808080; }
.dc2 { background-color: #F5F5F5; }
.dc1 { background-color: #FFFFFF; }

/* WIDTHS */
.full_width { width: 100%; }
.thin_width { width: 940px; }

/* BORDERS */
.b1 { border: 1px solid; }

/* RADIUS */
.r6 { border-radius: 6px; -moz-border-radius: 6px; -webkit-border-radius: 6px; }
.r2 { border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; }

/* FIELD */
.field { line-height:27px; font-family:arial, sans-serif; border-color: #d9d9d9; border-top:solid 1px #c0c0c0; padding-left:5px; margin-right: 15px; width:250px; }

/* BUTTON */
.button  { cursor:pointer; font-family: arial, sans-serif; min-width: 70px; padding-left: 20px; padding-right: 20px; padding-top: 10px; padding-bottom: 10px; color: white; }
.button:hover { border: 1px solid #2F5BB7; }
.button:active { -moz-box-shadow: 0 0 2px #888; -webkit-box-shadow: 0 0 2px #888; box-shadow: 0 0 2px #888; }

/* BUTTONS */
#button_search { height: 34px; background: url(http://www.divology.com/wp-content/themes/divology/tutorials/google-search/ico-search.png) no-repeat #4d90fe center; border: 1px solid #3079ED; text-indent:-999px; color: transparent; line-height:0; font-size:0; }
#button_primary { border-color: #3079ED; background-color: #55A4F2; }
#button_secondary { border-color: gray; }
#field_regular { height:27px; }

/* FIELDS */
#field_large { height:300px; }

/* HEADER */
#header-wrap { top: 0; left: 0; }
#header-container { line-height: 60px; height: 60px; border-bottom: 1px solid #E5E5E5; }
#header { margin: 0 auto; position: relative; }
#header h1 { color: #beffbf; text-align: left; width: 290px; margin: 0; position: absolute; left: 0; top: 20px; }
#header h1 em { color: #90b874; font-size: small; display: block; }
#header ul { top:0; margin: 0; padding: 0; list-style: none; position: absolute; right: 0; }
#header ul li { float: left; margin-right: 5px; }
#header ul li a{ color: #90b874; font-weight: bold; font-size: 1.4em; margin-right: 5px; text-decoration: none; }
#header ul li a:hover { color: #beffbf;  }

/* CONTAINER */
#container { margin: 0 auto; font-size: 1.4em; overflow: auto; padding: 31px 0 80px 0px; }
#container-wrap { min-height:100%; position:relative; min-width: 940px; }
#logo { height:20px; }

/* FOOTER */
#footer-wrap { bottom: 0; left: 0; }
#footer-container { line-height: 60px; height: 60px; bottom: 0; border-top: 1px solid #E5E5E5; }
#footer { margin: 0 auto; position: relative; }
#footer ul { margin: 0; padding: 0; list-style: none; position: absolute; top: 0; right: 0; }
#footer ul li { float: left; margin-right: 5px; }
#footer ul li a { color: #90b874; font-size: 12px; padding-left: 10px; padding-right: 10px; text-decoration: none; }
#footer ul li a:hover { color: #beffbf;  }

#faq EM { display:none; }
#faq LI STRONG { font-weight:normal; color:#246; text-decoration:underline; cursor:pointer; }

.hidden { display:none; }

#content{
    background: orange;
    height: auto;
}

#col-main { overflow:hidden;  } 
```

Any input would be much appreciated! Thank you.

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:06:21.660

我会把它放在一个答案中，这样你就可以投票和接受;-)

知道了。

只有一点内容：http: [//jsfiddle.net/HMsKa/10](http://jsfiddle.net/HMsKa/10)

内容越多，页面越高：http: [//jsfiddle.net/HMsKa/12](http://jsfiddle.net/HMsKa/12)

我还没有彻底测试过，所以你仍然应该这样做。您可能希望对最小高度部分使用“最小高度快速破解”（dustindiaz.com/min-height-fast-hack）。

# cloud-foundry - Cloudfoundry + SpringData + MongoDB...can't deploy

> ID：12819629
> 
> 赞同：0
> 
> 时间：2012-10-10T12:43:39.160
> 
> 标签：cloud-foundry, vmc, spring-data-mongodb

I have a simple project based on Spring Data and MongoDB. When I deploy this project to the cloud with the following Spring context:

```
<?xml version="1.0" encoding="UTF-8"?> 
```

http://www.springframework.org/schema/aop/spring-aop-3.1.xsd http://www.springframework.org/schema/beans [http://www.springframework.org/schema/beans/spring-beans-3.1.xsd](http://www.springframework.org/schema/beans/spring-beans-3.1.xsd) http://www.springframework.org/schema/context [http://www.springframework.org/schema/context/spring-context-3.1.xsd](http://www.springframework.org/schema/context/spring-context-3.1.xsd) http://www.springframework.org/schema/jee [http://www.springframework.org/schema/jee/spring-jee-3.0.xsd](http://www.springframework.org/schema/jee/spring-jee-3.0.xsd) http://www.springframework.org/schema/tx [http://www.springframework.org/schema/tx/spring-tx-3.0.xsd](http://www.springframework.org/schema/tx/spring-tx-3.0.xsd) http://schema.cloudfoundry.org/spring [http://schema.cloudfoundry.org/spring/cloudfoundry-spring-0.8.xsd](http://schema.cloudfoundry.org/spring/cloudfoundry-spring-0.8.xsd) http://www.springframework.org/schema/data/jpa [http://www.springframework.org/schema/data/jpa/spring-jpa.xsd](http://www.springframework.org/schema/data/jpa/spring-jpa.xsd) http://www.springframework.org/schema/util [http://www.springframework.org/schema/util/spring-util-2.0.xsd](http://www.springframework.org/schema/util/spring-util-2.0.xsd) http://www.springframework.org/schema/data/mongo [http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd](http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd)">

```
<context:property-placeholder location="classpath:services.properties" />

<context:annotation-config />

<bean id="gadgetizerApplication" class="it.ids.gadgetizer.GadgetizerApplication">
</bean>

<bean id="gadgetizerService" class="it.ids.gadgetizer.service.impl.GadgetServiceImpl">
    <property name="mongoTemplate" ref="mongoTemplate" />
    <property name="mailSender" ref="mailSender"/>
    <property name="velocityEngine" ref="velocityEngine"/>      
</bean>

<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
    <constructor-arg ref="mongoDbFactory" />
</bean>

<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="mail.xxx.xxx" />   
    <property name="username" value="xxx"/>
    <property name="password" value="xxx"/>
    <property name="port" value="2525"/>
</bean>

<bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
  <property name="velocityProperties">
     <value>
      resource.loader=class
      class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
     </value>
  </property> 
```

```
<beans profile="development">
    <mongo:db-factory id="mongoDbFactory" dbname="${mongo.dbname}" host="${mongo.host}" port="${mongo.port}" />
</beans>

<beans profile="cloud">
    <cloud:mongo-db-factory id="mongoDbFactory" service-name="${mongo.cloud.service_name}" />
</beans> 
```

It fails with:

```
 Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.data.mongodb.core.MongoTemplate]: Constructor threw exception; nested exception is java.lan
.IllegalArgumentException: [Assertion failed] - this argument is required; it must not be null
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:110)
        at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:280)
        ... 68 more
Caused by: java.lang.IllegalArgumentException: [Assertion failed] - this argument is required; it must not be null
        at org.springframework.util.Assert.notNull(Assert.java:112)
        at org.springframework.util.Assert.notNull(Assert.java:123)
        at org.springframework.data.mongodb.core.MongoTemplate.(MongoTemplate.java:196)
        at org.springframework.data.mongodb.core.MongoTemplate.(MongoTemplate.java:185)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
        ... 70 more
Stopping Tomcat because the context stopped.It was working one month ago. What's changed in API?

Thanks

            回答 #1

赞同：2

时间：2012-11-02T19:46:52.743

您的问题似乎是运行时 jar。请尝试使用最新的 cloudfoundry-runtime。

```

# bash - 为什么循环内的变量在循环外不变

> ID：12819632
> 
> 赞同：1
> 
> 时间：2012-10-10T12:43:45.727
> 
> 标签：bash

我使用`command | awk '{ print $1; }' | while read val ; do`循环命令输出。最近我想计算总和，我发现了一些奇怪的行为`bash`：

**test.txt 的内容**

```
100
200
300 
```

**test.sh 的内容**

```
sum='0'
cat test.txt | awk '{ print $1; }' | while read val ; do
        sum=`expr $sum + $val`
        echo "sum is now: $sum"
done

echo "FINAL SUM: $sum" 
```

**执行 test.sh 的输出**

```
sum is now: 100
sum is now: 300
sum is now: 600
FINAL SUM: 0 
```

最终总和应该是 600。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:50:46.983

原因是使用`cat`，它产生了另一个子shell。这意味着变量在第二个子shell中递增，然后在循环结束时`sum`超出范围（并返回到它的先前值）。`0`

尝试更新您的循环以*不*使用`cat`：

```
sum='0'
while read val ; do
        sum=`expr $sum + $val`
        echo "sum is now: $sum"
done < test.txt

echo "FINAL SUM: $sum" 
```

If you don't actually *need* the loop (i.e. - if you're not handling any other column/content-processing), you could use `awk` directly and store it's value into the `sum` variable:

```
sum=`awk '{ sum += $1; } END { print sum }' test.txt`; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:53:49.040

There's no need for the bash pipe. You can do it all with `awk`:

```
awk '{sum+= $1; printf "The sum is now: %s\n", sum } END { print "FINAL SUM:", sum }' file.txt 
```

Results:

```
The sum is now: 100
The sum is now: 300
The sum is now: 600
FINAL SUM: 600 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T13:00:49.440

To expand on what newfurniturey states, but in a way where you can use it with an arbritary input command, not just `cat`:

```
sum='0' 
while read val ; do
     sum=`expr $sum + $val`
     echo "sum is now: $sum" 
done < <(cat test.txt | awk '{ print $1 }')
echo "FINAL SUM: $sum" 
```

Replace `cat test.txt` with whatever command which outputs the input you require.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:35:01.443

This strange behaviour is actually caused by the bash pipes

To quote the [Bash reference manual](http://www.gnu.org/software/bash/manual/bashref.html#Pipelines)

> Each command in a pipeline is executed in its own subshell

Think of `sum` as a local variable in your while loop, that's why `sum` appears not to be set when you go out of the while-loop.

The solutions proposed by the others will work fine.

# javascript - Attaching Event Handlers after Infinite Scroll Update

> ID：12819634
> 
> 赞同：3
> 
> 时间：2012-10-10T12:43:48.520
> 
> 标签：javascript, jquery, infinite-scroll

I am using the infinite scroll plugin [http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/](http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/) to load page content.

I have a jQuery event listener such as:

```
$('.like-action').on('click',
    function(event){
      likeComment($(this)); 
      event.preventDefault();
}); 
```

That get's loaded on `$(document).ready`. However, when new content is loaded with the `infinitescroll` the event listeners are not applied/available to the new content. So, I created a function that is called on the callback of the `infinitescroll` (when all content has loaded).The function:

```
function afterUpdate(){
$('.like-action').on('click',function(event){
      likeComment($(this)); 
      event.preventDefault();
});} 
```

What ends up happening however, is for the old content (that is already loaded) when a link is clicked that has the `.like-action class`, the `likeComment` function is called however many times new content has been loaded + the original `$(document).ready`.

Ex: content is loaded on page load. link executes `likeComment` 1 on click. After scrolling down and having new content loaded (and callback) if you click the same link as before, `likeComment` is executed twice. etc,etc.

What am I doing wrong here?

Is my event listener written incorrectly?

Is there a way to write a listener that automatically works for all elements in the `DOM` even if they were not there on page load?

Or, is there a way to only register the .on on elements that were just loaded by infinite scroll (so there isn't a duplication)?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T12:47:27.890

改变你的使用`on()`来传递一个选择器，它将使用事件委托，导致点击处理程序也适用于所有未来的元素：

```
$('#someContainer').on('click', '.like-action', function (event){
    likeComment($(this)); 
    event.preventDefault();
}); 
```

这将防止您的点击处理程序需要再次添加，从而解决您将它们多次添加到旧元素的问题。

这假设您当前和未来的所有`.like-action`元素都将包含在`#someContainer`.

编辑：响应您的评论，您不能像这样委派插件初始化。你可以做的是：当你初始化一个元素时，也给它添加一个类：

```
$('.profilecard').hovercard().addClass('initialized'); 
```

然后在您的回调中，当您需要初始化新的时，跳过任何已经具有该类的内容：

```
function afterUpdate(){ 
    $('.profilecard:not(".initialized")').hovercard();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-26T03:37:22.457

如果有人有兴趣在没有 jQuery 的情况下执行此操作，这里有一篇很棒的帖子 - [https://elliotekj.com/2016/11/05/jquery-to-pure-js-event-listeners-on-dynamically-created-elements /](https://elliotekj.com/2016/11/05/jquery-to-pure-js-event-listeners-on-dynamically-created-elements/)

基本示例：

```
document.querySelector(staticParent).addEventListener(eventName, function (event) {
  if (event.target.classList.contains(dynamicChildSelector)) {
    // Do something
  }
}) 
```

工作示例：

```
document.querySelector('.feed').addEventListener('click', function (event) {
  if (event.target.classList.contains('feed-item')) {
    // Do something
  }
}) 
```

# php - How to authenticate facebook sdk without login dialog page?

> ID：12819636
> 
> 赞同：5
> 
> 时间：2012-10-10T12:43:56.777
> 
> 标签：php, facebook, cron, facebook-authentication

I am using Facebook SDK to post some test wall post on my own Facebook page. What i want is to post on my facebook page every 8 hours using PHP CRON script and for that i have to bypass the Facebook login dialog page, So does anyone know the way to authenticate from command line or on air?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:00:24.457

[身份验证为页面](https://developers.facebook.com/docs/authentication/pages/)将为您提供访问令牌，您可以将其保存在数据库中，然后使用 PHP 执行各种任务。

这对于使用 cron 做各种事情很有帮助，例如安排帖子、维护多个页面、一次发布到多个页面、上传照片和使用[Graph API](https://developers.facebook.com/docs/reference/api/)的许多其他活动。查看他们的文档以获取有关如何执行此操作的更多信息。

注意：您只需对您的应用程序进行一次身份验证并保存您的页面访问令牌密钥，一旦您这样做，您就不必再次登录，您只需使用您的访问令牌在您的页面上执行各种任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:03:09.467

Facebook 为用户提供访问令牌以使用 Facebook 应用程序。第一次，用户必须通过facebook登录，登录网站后，它会要求访问该应用程序的权限。一旦用户接受，facebook 将通过 url 返回一个代码。您必须获取代码并使用它来获取访问令牌

通过使用以下代码

```
$url = "https://graph.facebook.com/oauth/access_token?client_id=". $yourappId ."&redirect_uri=". urlencode($this->redirect_url) ."&client_secret=". $youappsecret."&code=". $code;
$auth_token = $this->getContents($url);

$str = explode('=',$auth_token);
$token = explode('&expires', $str[1]); 
```

这里 $token 将拥有用户的访问令牌，您可以将该令牌存储在您的本地数据库中，并使用该令牌将消息发布到 Facebook 墙。它很简单..仅此而已。

在 Fb Wall 上发布消息

```
$fb_id      = "User_fb_id"
$access_token   = "User_Access_Token_Take by Above code"
$msg        = "Message_to_post"
$img_path       = "Image_Path"      
$facebook = new Facebook(array(
'appId' => $this->appId, 
'secret' => $this->secret,
'cookie' => true));
if($msg != NULL) {
$attachment = array(
'message' => $msg,
'name' => 'NHM',                                                  
'picture' => $img_path);
} 
try {$result = $facebook->api('/'. $fb_id . '/feed/',
                                   'post',
                                    $attachment);

                if(isset($result['id'])) 
                return true;
            else 
                return false;
             } catch(FacebookApiException $e) {
            return $e->getMessage();
         } 
```

在这里，您必须使用 Facebook 用户 ID。要获取用户 ID，请使用以下代码

```
$url = "https://graph.facebook.com/me?access_token=". $access_token;
$userInfo = $this->getContents($url);
$userInfo = json_decode($userInfo, true);

public function getContents($url) {
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$content = curl_exec ($ch);
curl_close ($ch);
return $content;
} 
```

尝试这个 。让我知道如果有任何问题

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T13:02:33.857

不，没有办法绕过 Facebook 登录对话框页面，但对于您的情况，您可以检索扩展访问密钥并将其用于发布到您的墙上。您可以通过 PHP SDK 使用以下代码来检索访问令牌

```
$extendedToken = $facebook->setExtendedAccessToken();
$facebook->api('<PAGE_ID>?fields=access_token'); 
```

然后只需使用

> $facebook->setAccessToken();

发布到您的页面。请记住在生成扩展访问令牌之前获得许可。

# linq - StreamInsight complex query with filter on HoppingWindow

> ID：12819642
> 
> 赞同：1
> 
> 时间：2012-10-10T12:44:11.610
> 
> 标签：linq, streaminsight

I'm trying out StreamInsight and I came across a problem with a query I need.

I'm trying to throw a warning if there are several changes in my measured values (of up to 20% change) in the last 30 minutes.

This is the query I came up with for now but it isn't working and it's not even correct I think.

Apparently I can't filter on a window...?

```
var deviationQuery = from s in wcfStream
                     group s by s.SensorId into grouped
                     from window in grouped.HoppingWindow(TimeSpan.FromMinutes(30),TimeSpan.FromMinutes(1))
                     where window.StdDev(e => e.Value) > measurableValue * 1.2
                     select new OutputEvent
                     {
                         Error = "Deviation"
                     }; 
```

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:40:30.397

我为我的问题找到了一个有效的查询。起初我认为它不起作用，但我误解了结果。这可能不是最短最好的查询，所以如果您有更好的答案，请告诉我！

```
var deviationQuery = from s in wcfStream
                     where s.Value > measurableValue * (1 + deviationThreshold) || s.Value < measurableValue * (1 - deviationThreshold)
                     group s by s.SensorId into grouped
                     from window in grouped.HoppingWindow(TimeSpan.FromSeconds(180), TimeSpan.FromSeconds(120))
                     select window.Count();
var deviation = from c in deviationQuery
                where c > maxIncorrectValues
                select new OutputEvent
                    {
                        M = new Measurement() { SensorId = "354354", Value = 53, Time = DateTime.Now },
                        Deflection = c,
                        Error = "Deviation"
                    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:57:22.607

如果我理解正确，这就是你想要做的：

1.  按 对流进行分组`SensorId`。
2.  将每组分成 30 分钟的窗口。
3.  为具有太多错误值的窗口编写错误消息。

这应该可以做到，希望如此。

```
var deviationQuery = from s in wcfStream
                     group s by s.SensorId into grouped
                     from window in grouped.HoppingWindow(TimeSpan.FromMinutes(30),TimeSpan.FromMinutes(1))
                     where window.Count(event => event.Value > maxValue) > maxIncorrectValues                        
                     select new OutputEvent
                     {
                         Error = "Deviation"
                     }; 
```

# jquery - 自动完成不会在列表中的单击元素上触发 select()

> ID：12819643
> 
> 赞同：2
> 
> 时间：2012-10-10T12:44:14.403
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog, jquery-ui-autocomplete

我正在使用 jquery 1.4.4 和 jquery-ui 1.8.24。我有一个对话框，在该对话框内有一个链接。单击该链接后，我向用户显示带有自动完成功能的输入。当用户从自动完成列表中选择一个项目并按回车键时，一切正常。不幸的是，当用户手动单击自动完成列表中的项目时，根本不会调用事件“选择”并且对话框会立即自行关闭。

另外，我使用了很多 live() 和 die() 来防止将多个事件绑定到我的 DOM 元素。

```
$j("#" + id + "_selector:not(.ui-autocomplete-input)").die().live("focus", function (event) {

        $j(this).autocomplete({
            autoFocus:true,
            html:true,
            create:function() {
               // this always invokes
               console.log('autocomplete created');
            },
            source:function (request, response) {
                var term = request.term;
                if (term in cache) {
                    response(cache[term]);
                    return;
                }

                request.kind = settings.kind
                request.no_email_display = settings.no_email_display

                lastXhr = $j.getJSON(Routes.search_account_path().url, request, function (data, status, xhr) {
                    cache[ term ] = data;
                    if (xhr === lastXhr) {
                        response(data);
                    }
                });
                return false;
            },
            select: function(event, ui) {
                    // this one works only after selecting by keyboard and hitting entery key
                    var origEvent = event;
                    while (origEvent.originalEvent !== undefined)
                        origEvent = origEvent.originalEvent;
                    console.log(origEvent);                        
                },

        });
    }); 
```

我怀疑是对话框以某种方式从我的自动完成中接管了点击事件。

如果有人能帮助我至少调试这个错误（工具？如何设置萤火虫、断点等？），我会很高兴，因为我意识到这个错误可能几乎不可能重现。

# django - 两个函数具有相同的 render_to_response 模板

> ID：12819644
> 
> 赞同：0
> 
> 时间：2012-10-10T12:44:17.077
> 
> 标签：django

为什么我的表单没有显示在 example.html 中？

两个函数不能有相同的`render_to_response`模板名（example.html）？

楷模：

```
class A(models.Model):
    name = models.CharField(max_length=255)
    quantity = models.IntegerField(default=1) 
```

意见

```
def show(request):
    a = A.objects.all()
    if request.method == 'POST':
        form = XForm(request.POST)
        if form.is_valid():
            f = form.cleaned_data['f']

            return HttpResponseRedirect('/')
    else:
        form = XForm()
    return render_to_response('example.html', {'a': a, 'form': form})

def show_f(request, a_id):
    #how to access to data from form?
    f = form.cleaned_data['f']
    A.objects.filter(id = a_id).update(quantity = f)

    return render_to_response('example.html') 
```

示例.html：

```
{% for x in a %}
{{ x.name }}

        <form action="/show_f/{{x.id}}/" method="post"/>
        {{form}}
        <input type="submit" value="Run"/>
        </form>
{% endfor %} 
```

编辑：

我想为数据库中的每个对象显示一个表单字段，并在输入数量并提交表单后运行 show_f 方法（更新数量）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:56:54.370

你期望这如何工作？如果`show`呈现模板，`a`将出现但`form`不会出现，因此您将获得一组空表单。如果`show_f`渲染模板，`form`将存在但`a`不会，因此 for 循环将没有可迭代的内容，结果将为空。

你到底想做什么？让两个视图渲染同一个模板没有问题，但它们都必须实际提供模板需要渲染的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:54:38.683

如此处所述：[https ://docs.djangoproject.com/en/dev/topics/forms/#displaying-a-form-using-a-template](https://docs.djangoproject.com/en/dev/topics/forms/#displaying-a-form-using-a-template)

应该使用例如：{{ form.as_ul }} 呈现表单

# python - 透明图像在 PDF (Python) 中变黑

> ID：12819645
> 
> 赞同：0
> 
> 时间：2012-10-10T12:44:17.990
> 
> 标签：python, pdf, transparency, reportlab

> **可能重复：**
> [使用reportlab 2.3 实现PNG 的透明度](https://stackoverflow.com/questions/1308710/transparency-in-pngs-with-reportlab-2-3)

我正在尝试通过 reportlab 模块以 PDF 格式编写图像。这很完美，但是每当我尝试插入透明图像时，它会在 PDF 页面中变黑。任何人都知道如何解决这个问题？

```
from reportlab.pdfgen.canvas import Canvas
from reportlab.lib.pagesizes import letter
from reportlab.lib.colors import *
from reportlab.lib.units import cm, mm, inch, pica
from reportlab.platypus import SimpleDocTemplate, Table, TableStyle

pdf = Canvas(AnalysisReport.pdf', pagesize = letter)
pdf.setFont("Helvetica-Bold", 45)
pdf.setFillColor('#000000')
pdf.drawCentredString(inch *4.25, inch *10.00, "Qualitative Analysis Report")
pdf.drawInlineImage("\Glycaan8_78974.png", 500, 500)
pdf.showPage()
pdf.save() 
```

# javascript - 什么时候 $.cache 被认为太大了？

> ID：12819651
> 
> 赞同：5
> 
> 时间：2012-10-10T12:44:24.560
> 
> 标签：javascript, jquery, memory-leaks, browser-cache

我最近在[本教程](http://javascript.info/tutorial/memory-leaks)中读到，某些`jQuery`泄漏可以通过`$.cache`变量进行跟踪，你应该经常检查它的大小，如果它太大，你做错了什么。

那么，多大才算太大？有没有办法检查变量以查看它消耗了多少内存？

我正在开发一个仅通过加载主页来缓存 210 个对象的网站。是不是太多了？我希望能在这里对这个问题进行彻底的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:50:57.053

`$.cache`的面值大小并不能说明内存泄漏。它可能非常小并且仍然存在内存泄漏，或者它可能非常大并且没有任何内存泄漏。

如果您知道页面上一次有 10 个与 jQuery 绑定的事件侦听器，并且还有`$.cache`更多条目，那么您知道您正在泄漏。

一个巨大的内存节省是使用事件委托而不是将事件侦听器附加到每个单独的元素。

说：

```
<ul>
    <li></li>
    <li></li>
    <li></li>
</ul> 
```

`$("li").on( "click", fn )`将附加 3 个单独的事件处理程序（更多，如果你当然有更多的 li），而`$("ul").on( "click", "li", fn)`无论你有多少个 li 元素但结果相同，都只会附加一个。

* * *

泄漏示例：

```
$("button").click( function() {
    $("#target")[0].innerHTML = "";
    $("<div>").appendTo( $("#target")).click( $.noop );
    $("#log").text( Object.keys( $.cache ).length );
});​ 
```

[http://jsfiddle.net/SGZW4/1/](http://jsfiddle.net/SGZW4/1/)

原因是使用了 .innerHTML，它不是 jQuery 的一部分，因此无法进行清理。

修复方法是使用 jQuery 方法：

```
$("button").click( function() {
    $("#target").html("");
    $("<div>").appendTo( $("#target")).click( $.noop );
    $("#log").text( Object.keys( $.cache ).length );
});​ 
```

[http://jsfiddle.net/SGZW4/2/](http://jsfiddle.net/SGZW4/2/)

# ruby - 比较 Ruby 中的三个字符串

> ID：12819658
> 
> 赞同：0
> 
> 时间：2012-10-10T12:44:40.053
> 
> 标签：ruby

我想比较三个字符串并根据哪些字符串相同采取不同的操作。

在我看来，有5种不同的结果：

*   它们都是一样的（A=B=C）
*   他们都是不同的
*   其中两个相同（A=B、B=C 或 C=A）

我正在努力编写一段高效的 Ruby 代码来给我 5 种不同的结果。比较字符串似乎是一项相当昂贵的操作，我不想重复比较相同的字符串。

此代码将在循环内运行，因此进行一些优化似乎是个好主意。这不是我的 Comp Sci 作业，这是一个现实世界的问题 :-)

[编辑] Sergio 代码的进一步优化可以提供更好的结果。我们可以将第三次字符串比较推迟到如下`if...then`语句：

```
def compare a, b, c
  ab = a == b
  ac = a == c

  if ab && ac
    1
  elsif ab
    2
  elsif ac
    3
  elsif b == c
    4
  else
    5
  end
end 
```

[编辑] 今天给出的解决方案的基准，包括我的 Sergios 代码版本：

```
 user     system      total        real
sawa1:         0.620000   0.000000   0.620000 (  0.625677)
izomorphius:   0.030000   0.000000   0.030000 (  0.025314)
sergio1:       0.020000   0.000000   0.020000 (  0.018039)
sergio2:       0.030000   0.000000   0.030000 (  0.030210)
dominic:       0.010000   0.000000   0.010000 (  0.015450) 
```

我比较了 1024 个字符串，每个字符串 10,000 次，并将结果缩减为 1-5 范围内的数字，以表示对 5 种可能结果中的每一种采取不同操作的原始要求。

[编辑] 基准代码在这里[https://gist.github.com/3871698](https://gist.github.com/3871698)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:06:06.340

```
h = {a: "foo", b: "boo", c: "foo"}

h.group_by(&:last).values.map{|a| a.map(&:first)}
# => [[:a, :c], [:b]] 
```

或者，

```
h.group_by(&:last)
# => {"foo"=>[[:a, "foo"], [:c, "foo"]], "boo"=>[[:b, "boo"]]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T12:49:30.737

```
ba=false
ca=false
bc=false
if b == a
  ba = true
  if b == c
    bc = true
    ca = true
  end
elsif c == a
  ca = true
elsif c == b
  bc = true
end 
```

现在您已经执行了尽可能少的字符串比较操作。在您拥有 ab、bc 和 ca 变量后使用它们。就是这样。在性能方面你不能做得更好（但代码风格当然会受到影响）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T12:59:50.887

这是我的尝试。它最多执行 3 个字符串比较（并且至少 :)）。

```
def compare a, b, c
  ab = a == b
  ac = a == c
  bc = b == c

  if ab && ac
    "a == b == c"
  elsif ab
    'a == b'
  elsif ac
    'a == c'
  elsif bc
    'b == c'
  else
    'a != b != c'
  end
end

compare '1', '2', '3' # => "a != b != c"
compare '1', '2', '2' # => "b == c"
compare '2', '2', '3' # => "a == b"
compare '1', '2', '1' # => "a == c"
compare '1', '1', '1' # => "a == b == c" 
```

## 更新

这是另一种“聪明”的方法，现在涉及位掩码。它会为您返回可能结果的代码。

```
def compare a, b, c
  res = 0
  res |= (a == b ? 1 : 0)
  res |= ((a == c ? 1 : 0) << 1)
  res |= ((b == c ? 1 : 0) << 2) if res == 0
  res
end

compare '1', '2', '3' # => 0
compare '2', '2', '3' # => 1
compare '1', '2', '1' # => 2
compare '1', '1', '1' # => 3
compare '1', '2', '2' # => 4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-17T12:52:46.413

```
[string, string, string].uniq.count == 1 
```

# jquery - 带有 JavascriptMVC tomcat 7 错误的 JSP 页面

> ID：12819664
> 
> 赞同：0
> 
> 时间：2012-10-10T12:45:04.200
> 
> 标签：jquery, jsp, jquery-plugins, tomcat7, javascriptmvc

我正在开发一个 webapp..我在服务器端使用 SpringMVC，在客户端使用 JavascriptMVC......现在问题出在 javascriptmvc 我使用 html 页面但现在我想将 javascriptmvc 与我的 jsp 页面合并......当我在本地打开页面它工作正常但是当我将它部署在tomcat上时它给出了Http：500错误

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 
An error occurred at line: 37 in the jsp file: /resources/javascriptmvc/todo/tod/index.jsp 
Invalid character constant
34:         <script type='text/ejs' id='todosEJS'>
35:             <% for(var i =0; i < this.length ; i++){ %>
36:                 <li <%= this[i]%>>
37:                 <%= $.View('todoEJS',this[i] ) %>
38:                 </li>
39:             <% } %>
40:         </script> 
```

如果我将扩展名更改为 html，所有这些都可以正常工作，我不知道 jsp 有什么问题。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:42:58.920

不用担心，在 javascriptmvc 论坛的一个人的帮助下找到了解决方案。问题是 jsp 页面没有在脚本中选择 ejs 标记。这就是我所做的

我在views文件夹中创建了一个新文件'todoEJS.ejs'，并在其中放置了这段代码

```
<% for(var i =0; i < this.length ; i++){ %>
     <li <%= this[i]%>>
         <%= $.View('todoEJS',this[i] ) %>
     </li>
 <% } %> 
```

然后在jsp文件中我将脚本代码更改为这个

```
<script type='text/ejs' id='todosEJS' src='${pageContext.request.contextPath}/resources/javascriptmvc/todo/todo/views/todoEJS.ejs'>
</script> 
```

它工作得很好。

# php - Magento 属性组 - 使用 foreach 在表中显示数据的伪代码？

> ID：12819668
> 
> 赞同：0
> 
> 时间：2012-10-10T12:45:17.887
> 
> 标签：php, html, magento

我想要的东西有点难以解释。因此，为任何混淆道歉。我正在检索我为我的产品创建的一组属性（总共 16 个）。而这 16 个属性可以根据类型分为 4 列（A、B、C、D）。所以我想创建一个以 A、B、C、D 为标题的表格。然后我想显示相关列的标签和数据。下面将给你一个想法，我想要什么。

```
<table>
<tr>
<td>heading-A</td>
<td>heading-B</td>
<td>heading-C</td>
<td>heading-D</td>
</tr>
<tr>
<td>label-A</td>
<td>Data-A</td>
<td>label-B</td>
<td>Data-B</td>
<td>label-C</td>
<td>Data-C</td>
<td>Label-D</td>
<td>Data-D</td>
</tr>
<tr>...and so on
</table 
```

*不必担心将标签-A 和数据-A 放在标题-A 下。我可以使用 CSS 来实现。

我知道我可以通过在每个相关表中直接调用属性名称（即 $_product->getAttribute）来做到这一点。但问题是有几个属性集，每个属性集都有不同的属性（即每个集有 16 个属性组不同）。

因此，我没有创建一个巨大的表并单独调用值，而是尝试使用伪代码来实现这一点，这将是一种更简单和智能的方式。

到目前为止，我已经尝试过这样的：

```
$attributes = $_product->getAttributes();
<table>
<tr>
<td>Sight</td>
<td>Nose</td>
<td>Palate</td>
<td>Finish</td>
</tr>
<?php foreach($attributes as $attribute):?>
                    <?php if($attribute->getIsVisibleOnFront() && $attribute->getIsUserDefined()):?>
                        <tr>
                            <?php if(stripos($attribute->getAttributeCode(), "_sight")!=0):?><td><th class="data"><?php echo $attribute->getFrontend()->getLabel(); ?></th></td>
                            <td class="data"><?php echo $attribute->getFrontend()->getValue($_product); continue;?></td><?php endif; ?>

                            <?php if(stripos($attribute->getAttributeCode(), "_nose")!=0): ?><td><th class="data"><?php echo $attribute->getFrontend()->getLabel(); ?></th></td>
                            <td class="data"><?php echo $attribute->getFrontend()->getValue($_product); continue;?></td><?php endif; ?>

                            <?php if(stripos($attribute->getAttributeCode(), "_palate")!=0): ?><td><th class="data"><?php echo $attribute->getFrontend()->getLabel(); ?></th></td>
                            <td class="data"><?php echo $attribute->getFrontend()->getValue($_product); continue;?></td><?php endif;?>

                            <?php if(stripos($attribute->getAttributeCode(), "_finish")!=0): ?><td><th class="data"><?php echo $attribute->getFrontend()->getLabel(); ?></th></td>
                            <td class="data"><?php echo $attribute->getFrontend()->getValue($_product); continue;?></td><?php endif;?>
                        </tr>
                    <?php endif; ?>
                <?php endforeach; ?>
</table> 
```

但这在一个列中给了我所有的输出。我不确定如何按照我想要的方式将它们分成 4 列。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:29:31.470

continue 将停止循环并继续下一次迭代。

您有 4 列标题和 8 列数据。

<th> 用于标题单元格[http://www.w3schools.com/tags/tag_th.asp](http://www.w3schools.com/tags/tag_th.asp)

所以我希望以下内容更适合您的解决方案。

```
$attributes = $_product->getAttributes();
<table>
<tr>
<td colspan="2">Sight</td>
<td colspan="2">Nose</td>
<td colspan="2">Palate</td>
<td colspan="2">Finish</td>
</tr>

<?php foreach($attributes as $attribute):
  if($attribute->getIsVisibleOnFront() && $attribute->getIsUserDefined()):?>
      <tr>
          <?php if(stripos($attribute->getAttributeCode(), "_sight")!=0) { ?>
              <td class="label"><?php echo $attribute->getFrontend()->getLabel();          ?></td>
              <td class="data"><?php  echo $attribute->getFrontend()->getValue($_product); ?></td>
          <?php } else { ?>
              <td class="label"></td>
              <td class="data"></td>
          <?php } ?>

          <?php if(stripos($attribute->getAttributeCode(), "_nose")!=0) { ?>
              <td class="label"><?php echo $attribute->getFrontend()->getLabel();          ?></td>
              <td class="data"><?php  echo $attribute->getFrontend()->getValue($_product); ?></td>
          <?php } else { ?>
              <td class="label"></td>
              <td class="data"></td>
          <?php } ?>

          <?php if(stripos($attribute->getAttributeCode(), "_palate")!=0) { ?>
              <td class="label"><?php echo $attribute->getFrontend()->getLabel();          ?></td>
              <td class="data"><?php  echo $attribute->getFrontend()->getValue($_product); ?></td>
          <?php } else { ?>
              <td class="label"></td>
              <td class="data"></td>
          <?php } ?>

          <?php if(stripos($attribute->getAttributeCode(), "_finish")!=0) { ?>
              <td class="label"><?php echo $attribute->getFrontend()->getLabel();         ?></td>
              <td class="data"><?php  echo $attribute->getFrontend()->getValue($_product);?></td>
          <?php } else { ?>
              <td class="label"></td>
              <td class="data"></td>
          <?php } ?>
      </tr>
  <?php endif; ?>
<?php endforeach; ?>
</table> 
```

# c# - 从 FrameworkElement 获取 FrameworkElementFactory

> ID：12819670
> 
> 赞同：2
> 
> 时间：2012-10-10T12:45:19.203
> 
> 标签：c#, wpf, datatemplate, frameworkelement, frameworkelementfactory

我有一个`FrameworkElement`，比如`StackPanel`有孩子，我需要创建一个`DataTempltate`，其`VisualTree`属性是 my `FrameworkElement`。要完成这项工作，我需要将我`FrameworkElement`的等效转换为`FrameworkElementFactory`.

我能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:19:44.697

您可能可以使用[XamlWriter](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlwriter.aspx)和[XamlReader](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader.aspx)类来获取控件中使用的 XAML 的副本，并使用它来构建另一个控件

```
string panelXaml = XamlWriter.Save(myStackPanel);

StringReader stringReader = new StringReader(panelXaml);
XmlReader xmlReader = XmlReader.Create(stringReader);
StackPanel newStackPanel = (StackPanel)XamlReader.Load(xmlReader); 
```

我认为这只会复制`StackPanel`，所以你可能也必须以同样的方式复制它的孩子。

同样根据[MSDN 上的备注部分，对于 FrameworkElementFactory](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelementfactory.aspx)

> 此类是一种以编程方式创建模板的弃用方式，模板是`FrameworkTemplate`诸如`ControlTemplate`or 的子类`DataTemplate`；使用此类创建模板时，并非所有模板功能都可用。以编程方式创建模板的推荐方法是使用类的`Load`方法从字符串或内存流加载 XAML `XamlReader`。

# tridion - 无法从 Tridion 找到已发布的 html 页面

> ID：12819671
> 
> 赞同：1
> 
> 时间：2012-10-10T12:45:21.080
> 
> 标签：tridion, tridion-2011

我将 Tomcat 配置为应用程序服务器，使用 Eclipse 和 oData Web 服务的 Tridion 部署程序。我在tomcat中部署了两个应用程序，TridionUpload和cd_webservice。现在我可以成功发布了。但我无法找到已发布的 html 页面。如何查看已发布的页面？请帮忙。

TridionUpload 应用程序中 cd_storage_config.xml 中的配置：

```
<Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultFile" defaultFilesystem="false">
    <Root Path="D:\Tridion\Temp" />
<!--<Root Path="c:\temp"/>-->
</Storage>
<Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultDataFile" defaultFilesystem="true" defaultStorage="true">
    <Root Path="D:\Tridion\Temp\Data" />
<!--<Root Path="c:\temp\data"/>-->
</Storage>

<Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="tomcatFS" defaultFilesystem="false">
    <Root Path="D:\Program Files (x86)\apache-tomcat-6.0.35\webapps" />
</Storage> 
```

cd_deployer_config.xml 中的配置：

```
<Queue>
    <Location Path="D:\Tridion\ContentDelivery_Incoming\TridionUpload" WindowSize="20" Workers="10" Cleanup="true" Interval="2s"/>
<!--<Location Path="c:\tridion\work\http" WindowSize="10" Workers="10" Cleanup="true" Interval="30s"/> -->
</Queue>
<!-- Configure the HTTPSReceiver to store incoming package in specified location, and configure if deployer should run in process -->
<HTTPSReceiver MaxSize="10000000" Location="D:/Tridion/ContentDelivery_Incoming/TridionUpload" InProcessDeploy="true"/> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T12:56:16.860

您能否检查 typeMapping 节点，例如 -

```
<ItemTypes defaultStorageId="defaultdb" cached="false">
<Item typeMapping="Page" cached="false" storageId="defaultFile">
<Publication Id="XYZ" defaultStorageId="brokerFile" cached="false"></Publication>
</Item> 
```

如果您没有指定`<Item typeMapping="Page`“，默认情况下页面将进入数据库，这里是“defaultdb”。

# windows - 如何在 Tortoise SVN (Windows) 中编辑或清除 MRU 存储库列表

> ID：12819674
> 
> 赞同：1
> 
> 时间：2012-10-10T12:45:27.843
> 
> 标签：windows, tortoisesvn

当我打开 Tortoise 存储库时，它会显示我创建的所有最近使用 (MRU) 存储库的列表（测试时）。我想删除那些。

如何编辑该列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:08:58.410

这是我的工作路径：

`RBM -> TortoiseSVN -> Settings -> Saved Data -> URL history -> Clear`.

或者您可以从以下位置获取缓存的存储库：

`RBM -> TortoiseSVN -> Settings -> Log Caching -> Cached Repositories`

# jquery - 在核心 Asp.Net 中使用拖放上传文件

> ID：12819675
> 
> 赞同：1
> 
> 时间：2012-10-10T12:45:41.457
> 
> 标签：jquery, asp.net

我想在核心 Asp.Net 中而不是在 MVC 中使用拖放来上传文件。文件的大小可能比普通文件大，例如 100-200 MB。请在 Asp.Net 中给我一些解决方案。

我也在寻找一些第三方工具。请向我推荐使用拖放上传文件的优秀第三方工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:54:55.413

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)支持拖放。

# java - Java中与互斥锁相关的问题

> ID：12819676
> 
> 赞同：0
> 
> 时间：2012-10-10T12:45:42.930
> 
> 标签：java, multithreading

我试图理解多线程编程的概念。我知道死锁和互斥锁的概念，但我找不到以下问题的答案。使用互斥锁时如何出现死锁问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T12:56:07.053

这是一个如何在 Java中引发[死锁的具体示例。](http://en.wikipedia.org/wiki/Deadlock)我们产生两个线程。第一个在 上获取互斥锁`a`，然后等待一秒钟，然后尝试在 上获取锁`b`。第二个获取锁`b`，然后等待，然后尝试获取`a`。结果是程序进入死锁并永远运行。

```
public class Deadlock {
    public static void main(String[] args) {
        final Object a = new Object();
        final Object b = new Object();
        new Thread() {
            @Override
            public void run() {
                synchronized (a) {
                    /* wait for a second to make it likely the other thread can acquire b */
                    try { Thread.sleep(1000); } catch (Exception e) {  }
                    synchronized (b) {
                        System.out.println("Acquired a, then b.");
                    }
                }
            }
        }.start();
        new Thread() {
            @Override
            public void run() {
                synchronized (b) {
                    /* wait for a second to make it likely the other thread can acquire a */
                    try { Thread.sleep(1000); } catch (Exception e) {  }
                    synchronized (a) {
                        System.out.println("Acquired b, then a.");
                    }
                }
            }
        }.start();
    }
} 
```

请注意，不*保证*此代码会进入死锁。线程调度程序完全有权在启动第二个线程之前运行第一个线程完成，**反之亦然**。由于此示例中的大量等待时间，几乎可以肯定系统将进入死锁，但如果不是睡眠一秒钟，而是两个线程在每次获取锁之前都在做一些可变时间长度的计算，则以下任何事情可能随机发生：

*   僵局
*   `"Acquired a, then b."`， 其次是`"Acquired b, then a."`
*   `"Acquired b, then a."`， 其次是`"Acquired a, then b."`

你如何防止这种情况发生？

*   尽可能避免完全使用线程。
*   不是在线程之间共享资源，而是让每个线程对自己的数据进行操作，并相互发送不可变的消息。
*   如果您绝对必须使用共享资源，请尽量减少使用的互斥锁的数量。如果一切都在同一个对象上同步，那么只有一个互斥锁，就不会发生死锁。
*   如果您绝对必须拥有大量互斥锁，并且线程获取它们的组合，请执行以下操作：编写一个定义锁的总排序的函数。然后，当您需要执行涉及多个互斥体的操作时，创建所涉及的互斥体列表，对它们进行排序，然后在操作开始时按排序顺序输入它们。

看看[java.util.concurrent](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html)包。它包含许多好东西，可以照顾许多真正的毛茸茸的部分。

此外，我不能夸大线程在意想不到的地方切换的程度。一个常见的错误是逐行查看每个线程，并想象这些行可以交织的不同方式。但这还不够：一个线程可能会在某个库深处的某个嵌套函数调用的中间被切换出去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:49:54.167

死锁是当一个线程正在锁定资源 A 并等待被第二个线程锁定的资源 B 的情况。同时，第二个线程正在等待被第一个线程锁定的资源 A，该线程正在等待被第二个线程锁定的资源 B，即.... :)

解决方案是通过线程模型的“智能”设计或使用队列解耦线程或使用不可变对象来避免这种情况，从而不需要同步等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:17:00.647

当必须获得多个锁时使用[Lock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)对象以避免锁排序死锁。在这种情况下，Lock 对象中的 tryLock() 方法将立即返回值 false。结果是只有一个线程会同时持有两个锁。在同步代码的情况下，线程将在等待下一个锁时阻塞持有一个对象的锁。请参见下面的示例代码：

```
while (true) {
    if (a.lock.tryLock()) {
        try {
            if (b.lock.tryLock()) {
                try {
                    // manipulate protected state
                } finally {
                    b.lock.unlock();
                }
            }
        } finally {
            a.lock.unlock();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T12:58:18.423

互斥锁是同步块的关键。同步块/互斥变量使用不当会导致死锁。

# android - 编辑活动的上下文操作栏

> ID：12819677
> 
> 赞同：1
> 
> 时间：2012-10-10T12:45:49.563
> 
> 标签：android, contextual-action-bar

我对上下文操作栏的概念有疑问。Android 设计指南建议在用户选择 Activity 中的某些内容以向他提供一些操作时使用 CAB。

正如在“People”（/“Contacts”？）应用程序中实现的那样，编辑数据也很有意义。例如，我希望用户单击将他带到详细信息活动的列表项。在详细信息活动中，您可以按下将您带到编辑活动的编辑操作项。在此编辑活动中，我想显示 CAB 以允许通过按 DONE 按钮或 BACK 按钮进行保存或通过菜单项取消。

CAB 是否打算以这种方式使用？它是在这样的人应用程序中实现的，所以我认为是的。

我当前的实现启动了活动创建的操作模式。这有点不酷，因为当按下 DONE 时，我启动了一个 AsyncTask 以将数据保存在服务器上，这需要时间，但 CAB 立即消失，然后显示默认操作栏。有没有更好的方法来使用 CAB，这样它就不会在活动之前被销毁？

PS：使用 ActionBarSherlock

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:48:56.393

> CAB 是否打算以这种方式使用？它是在这样的人应用程序中实现的，所以我认为是的。

这不一定是行动模式。在[Roman Nurik 的“DONE + DISCARD”示例](https://plus.google.com/113735310430199015092/posts/R49wVvcDoEW)中，它是一个自定义操作栏。

# ios - 可以刷新整个核心数据对象吗？

> ID：12819681
> 
> 赞同：0
> 
> 时间：2012-10-10T12:46:04.467
> 
> 标签：ios, xcode, core-data

我有一个相对较小的核心数据应用程序。它包含使用存储在 NSUserDefaults 中的一些用户首选项生成的对象。当用户改变他们的偏好时，是否可以使用更新的偏好重新计算所有当前的核心数据元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:24:36.743

是的，只需检查您的委托的用户偏好是否已更改，然后更新您的 NSManagedObject 元素。

您可以使用这样的东西来查询您保存的对象

```
// Query your already saved objects and change their values
- (void)changeObjects {
    NSArray *array = [CoreDataUtils fetchEntity:@"MyObject" withPredicate:nil inContext:moc];

    for (NSManagedObject *obj in array) {

        [obj setValue:@"newValue" forKey:@"columName"];
    }

    [moc save:nil];
} 
```

```
+ (NSArray *)fetchEntity:(NSString *)entityName  withPredicate:(NSPredicate *)predicate inContext:(NSManagedObjectContext *)moc
{
    NSFetchRequest* request = [[NSFetchRequest alloc] init];    
    NSEntityDescription* entity = [NSEntityDescription entityForName:entityName inManagedObjectContext:moc];
    [request setEntity:entity];
    [request setPredicate:predicate];

    NSError* error;

    return  [moc executeFetchRequest:request error:&error];
} 
```

# dynamic - 使用 sgvizler 进行动态 sparql 查询

> ID：12819683
> 
> 赞同：1
> 
> 时间：2012-10-10T12:46:12.773
> 
> 标签：dynamic, sparql, sgvizler

我正在尝试在 sgvizler 中创建一个动态 sparql 查询。

当前查询是这样的：

```
<div id="query1"
                data-sgvizler-query="
                    SELECT * 
                    WHERE {
                    [] <http://localhost:2020/resource/vocab/rankings_university> ?Name ;
                    <http://localhost:2020/resource/vocab/rankings_id> ?Id ;
                    <http://localhost:2020/resource/vocab/rankings_overall_score> ?overall_score ;
                    FILTER regex(?Name, '(here comes a variable')
                    }
                    LIMIT 10"
                data-sgvizler-chart="sText"
                data-sgvizler-loglevel="2"
            ></div> 
```

使用 jquery 我执行以下操作：

```
$(function() {
$("#searchsubmit").click( function()
{
value1 = $("#uni1").val(); 
alert(value1);
sgvizler.go();
}
);
}); 
```

我得到的只是一个没有错误的空页面，而以下内容确实有效：

```
$(document).ready(sgvizler.go()); 
```

知道如何解决这个问题吗？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:01:52.683

这就是我的工作方式：首先，您需要使用主干版本来支持它。 [SGvizler 中继版](http://sgvizler.googlecode.com/svn/trunk/sgvizler.js)

其次，您需要创建一个 (jquery) 函数来创建 sparql 查询：

```
function myQuery (containerID, name) {
            var Q = new sgvizler.query(containerID),
            query = "SELECT * " + 
                    "WHERE { " +
                    "<ontology url> ?p ?Name ; " +
                    "FILTER regex(?Name, '" +  name + "')" +
                    "} " +
                    "LIMIT 10" ;
                    Q.draw({ query: query });
        } 
```

然后点击以下功能：

```
$(function() {
            $("#yourbutton").click( function()
                {
                    value1 = $("#inputfield").val(); 
                    myQuery('query1', value1);
                }
            );
        }); 
```

的HTML：

```
<div id="query1"
                data-sgvizler-chart="sText"
                data-sgvizler-loglevel="2"
            ></div> 
```

通过这种方式，您可以在 sgvizler 中创建动态 sparql 查询，我向 sgvizler 的制造商学习了thanx。

这很好用。我唯一的问题是执行多个查询时的跨域错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:48:34.490

这个问题也可以在 [http://code.google.com/p/sgvizler/issues/detail?id=38](http://code.google.com/p/sgvizler/issues/detail?id=38)中找到并回答。

这是一个新的小提琴，它从用户那里获取输入构建查询并使用 sgvizler 在 html 容器中呈现结果：http: [//jsfiddle.net/sgvizler/L5ztf/](http://jsfiddle.net/sgvizler/L5ztf/)。另请参阅小提琴代码中的注释。

# jquery - jQuery show() 在 Google Chrome 中不起作用

> ID：12819684
> 
> 赞同：2
> 
> 时间：2012-10-10T12:46:14.647
> 
> 标签：jquery, show, show-hide

我的 jQuery 代码没有按预期工作。

这是HTML：

```
<a href="">Some link</a>
<br/>
<a class="delete_file_initial" href="">Delete file</a>
<span class="delete_file_question hide">are you sure to delete?</span>
<a class="delete_file_question confirm hide" href="http://example.com/delete">yes</a>
<a class="delete_file_question cancel hide" href="">no</a>
<br/>
<a class="move_file_initial" href="">Move file</a>
<span class="move_file_question hide">are you sure to move?</span>
<a class="move_file_question confirm hide" href="http://example.com/move">yes</a>
<a class="move_file_question cancel hide" href="">no</a> 
```

和 Javascript：

```
$(function() {
    // delete file
    $("a.delete_file_initial").click(function(event) {
        event.preventDefault()
        $(this).hide()
        $(".delete_file_question").show()
    });
    $("a.delete_file_question").click(function(event) {
        if ($(this).hasClass("cancel")) {
            event.preventDefault()
            $(".delete_file_question").hide()
            $(".delete_file_initial").show()
        }
    });

    // move file
    $("a.move_file_initial").click(function(event) {
        event.preventDefault()
        $(this).hide()
        $(".move_file_question").show()
    });
    $("a.move_file_question").click(function(event) { 
        if ($(this).hasClass("cancel")) {
            event.preventDefault()
            $(".move_file_question").hide()
            $(".move_file_initial").show()
        }
    });

}); 
```

有两个类似的代码块：删除和移动。除了要加载的实际 URL 不同之外，它们应该做同样的事情。预期行为如下。用户单击“删除”/“移动”链接，然后显示确认链接，他确认或取消操作。

问题是当我点击链接“delete_file_initial”时，它隐藏了，但链接“delete_file_question”没有显示，留下一个空白行。“移动”块按预期工作。如果我评论“移动”块，“删除”块开始按预期工作。更奇怪的是，这个 bug 出现在 Google Chrome 22.0.1229.79 中，但在 Firefox 15.0.1 中一切正常。

如何修复这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:01:59.490

问题不在 javascript 中，而奇怪的是在 HTML 代码中。我之前删除了第一个`<br/>`标签`<a class="delete_file_initial" href="">Delete file</a>`，它开始正常工作。`<a>`整个代码块是由标签分隔的一系列`<br/>`标签。我用一个简单的`<ul><li>`结构替换它们，问题已经解决，保持原有的布局和功能。

如果有人了解此问题的原因，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:20:05.213

这里的问题在于选择器，当您使用 jQuery('.classname').show() 时，请确保没有多个项目具有相同的类名。如果你不能帮助它，使用 .each() 函数。例如，这是您应该使用的代码。我希望下面的工作

Javascript：

```
$(function() {
    // delete file
    $("a.delete_file_initial").click(function(event) {
        event.preventDefault();
        $(this).hide();
        $(".delete_file_question").each(function(){$(this).show();});
    });
    $("a.delete_file_question").click(function(event) {
        if ($(this).hasClass("cancel")) {
            event.preventDefault()
            $(".delete_file_question").each(function(){$(this).hide();});
            $(".delete_file_initial").show();
        }
    });

    // move file
    $("a.move_file_initial").click(function(event) {
        event.preventDefault();
        $(this).hide();
        $(".move_file_question").each(function(){$(this).show();});
    });
    $("a.move_file_question").click(function(event) { 
        if ($(this).hasClass("cancel")) {
            event.preventDefault();
            $(".move_file_question").each(function(){$(this).hide();});
            $(".move_file_initial").show();
        }
    });

}); 
```

让我知道它是否有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T13:28:11.153

`setTimeout(function(){$(".delete_file_question").each(function(){$(this).show();});},0);`

# ssl - 在 Safari 浏览器上，收到错误消息：“此表单不安全。您确定要提交吗？”，即使页面受 HTTPS 保护

> ID：12819687
> 
> 赞同：3
> 
> 时间：2012-10-10T12:46:21.050
> 
> 标签：ssl, safari

任何想法为什么？表单在所有主要浏览器（Chrome、Firefox、IE）中处理良好，但在 Safari 上，我们看到一个弹出窗口显示表单不安全。该页面绝对是 https:// 并且在我查看它时正确设置了 SSL。会不会是另一个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T13:17:25.260

将链接更改为 https:// 而不是 http:// 所以基本上广告一个“s”让浏览器知道链接是安全的。它实际上并不保护页面，但它会停止错误消息。当您将某人从 https 页面发送到 http 页面时，就会出现问题，因此触发错误消息的是转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:01:37.703

表单是否有可能包含在本身*不*指向 https url 的 IFRAME 中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:53:53.940

检查您的系统日期或时间是否准确，实际上与特定网页的 SSL 证书相关的此类问题就是由于这个原因而发生的。

# c# - 为什么我的 WCF 客户端/服务会出现 ActionNotSupportedException？

> ID：12819688
> 
> 赞同：14
> 
> 时间：2012-10-10T12:46:25.717
> 
> 标签：c#, wcf, xmlserializer, svcutil.exe, wscf

我正在学习 WCF，特别是我正在学习如何首先编写合同，ala [wscf.blue](http://wscfblue.codeplex.com/)

我可以按最后一种方式创建 WCF 客户端/服务合同（Microsoft） 我可以按第一种方式创建 WCF 客户端/服务合同（WSCF）

但是，如果我创建一个合同优先服务，然后尝试以 Microsoft 方式（服务参考）而不是 WSCF.blue 方式（共享合同并生成客户端）添加它，它不起作用。

它抛出一个`ActionNotSupportedException`带有消息的`The message with Action 'urn:test-com:simple:testMethodIn' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver. Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).`

我不知道这意味着什么。

这是我的测试合同：

简单模型.xsd

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns="urn:test-com:simple" xmlns:mstns="urn:test-com:simple" xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:test-com:simple" elementFormDefault="qualified" attributeFormDefault="unqualified" id="SimpleModel">
    <xs:complexType name="PayloadType">
        <xs:sequence>
            <xs:element name="AString" type="xs:string" nillable="1" minOccurs="0"/>
            <xs:element name="AnInt" type="xs:int"/>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

简单消息.xsd

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns="urn:test-com:simple" xmlns:mstns="urn:test-com:simple" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:smod="http://tempuri.org/SimpleModel.xsd" targetNamespace="urn:test-com:simple" elementFormDefault="qualified" attributeFormDefault="unqualified" id="SimpleMessages">
    <xs:include schemaLocation="SimpleModel.xsd"/>
    <xs:element name="TestMethod">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="APayload" type="PayloadType" minOccurs="0"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:element name="TestMethodResponse">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Output" type="PayloadType"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

简单的.wsdl

```
<!--WSDL generated by thinktecture WSCF; version 1.0.13.0-->
<!--Tuesday, 09-10-2012 - 02:41 PM-->
<definitions xmlns:tns="urn:test-com:simple" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" name="Simple" targetNamespace="urn:test-com:simple">
    <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"/>
    <types>
        <xsd:schema>
            <xsd:import schemaLocation="SimpleMessages.xsd" namespace="urn:test-com:simple"/>
        </xsd:schema>
    </types>
    <message name="testMethodIn">
        <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"/>
        <part name="parameters" element="tns:TestMethod"/>
    </message>
    <message name="testMethodOut">
        <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"/>
        <part name="parameters" element="tns:TestMethodResponse"/>
    </message>
    <portType name="SimpleInterface">
        <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"/>
        <operation name="TestMethod">
            <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"/>
            <input message="tns:testMethodIn"/>
            <output message="tns:testMethodOut"/>
        </operation>
    </portType>
    <binding name="BasicHttpBinding_SimpleInterface" type="tns:SimpleInterface">
        <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
        <operation name="TestMethod">
            <soap:operation soapAction="urn:test-com:simple:testMethodIn" style="document"/>
            <input>
                <soap:body use="literal"/>
            </input>
            <output>
                <soap:body use="literal"/>
            </output>
        </operation>
    </binding>
    <service name="ISimple">
        <port name="NewPort" binding="tns:BasicHttpBinding_SimpleInterface">
            <soap:address location="http://localhost:50862/Simple.svc"/>
        </port>
    </service>
</definitions> 
```

这是 web.config 中的 system.serviceModel 部分

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="SimpleServiceBehaviour">
                <serviceMetadata externalMetadataLocation="http://localhost:50862/TestContract/Simple.wsdl" httpGetEnabled="true"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <diagnostics>
        <messageLogging logMalformedMessages="true" logMessagesAtTransportLevel="true"/>
    </diagnostics>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_SimpleInterface" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
                    <message clientCredentialType="UserName" algorithmSuite="Default"/>
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <services>
        <service behaviorConfiguration="SimpleServiceBehaviour" name="SimpleContract.Simple">
            <endpoint address="http://localhost:50862/Simple.svc" behaviorConfiguration="" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_SimpleInterface" contract="ISimple"/>
        </service>
    </services>
</system.serviceModel> 
```

如果我添加对 Every 的服务引用`http://localhost:50862/Simple.svc`似乎会生成 OK。

我通过导入 web.config 使用服务配置编辑器在客户端 app.config 中创建它：

```
<system.serviceModel>
    <client>
        <endpoint address="http://localhost:50862/Simple.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_SimpleInterface" contract="SI.SimpleInterface" name="NewPort"/>
    </client>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_SimpleInterface" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
                    <message clientCredentialType="UserName" algorithmSuite="Default"/>
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
</system.serviceModel> 
```

如果我运行我的测试代码：

```
static void Main(string[] args)
{
    SimpleInterfaceClient client = new SimpleInterfaceClient();

    var ret = client.TestMethod(new PayloadType() { AnInt = 7, AString = "bob" });

    Console.WriteLine(ret.ToString());
    Console.ReadLine();
} 
```

在 TestMethod 代理内部，以下行：

```
return base.Channel.TestMethod(request); 
```

抛出以下异常

```
System.ServiceModel.ActionNotSupportedException occurred
  Message="The message with Action 'urn:test-com:simple:testMethodIn' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None)."
  Source="System.ServiceModel"
  StackTrace:
       at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter) 
```

有人可以帮忙吗？

谢谢，

J。

**第一次编辑**

好的，我现在发现我的 doc-lit-wrapped wsdl 和代码生成器出了点问题。wscf.blue 不喜欢将可空类型标记为可空的消息。它脱离了包装模式，并且方法实现没有被解包。

但是，如果我不将它们标记为可空，则客户端代码将退出包装模式，因为它们是可空类型，未标记为可空。

将可空类型标记为不可空：

服务器端：

```
[System.ServiceModel.OperationContractAttribute(Action="urn:test-com:simple/ISimple/TestMethod", ReplyAction="urn:test-com:simple/ISimple/TestMethodResponse")]
[System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]
[return: System.ServiceModel.MessageParameterAttribute(Name="Output")]
PayloadType TestMethod(PayloadType APayload); 
```

客户端：

```
// CODEGEN: Generating message contract since element name APayload from namespace urn:test-com:simple is not marked nillable
[System.ServiceModel.OperationContractAttribute(Action="urn:test-com:simple:testMethodIn", ReplyAction="*")]
DesktopClientTest_ServiceReference.SI.TestMethodResponse TestMethod(DesktopClientTest_ServiceReference.SI.TestMethodRequest request); 
```

将可空类型标记为可空：

服务器端：

```
// CODEGEN: Parameter 'Output' requires additional schema information that cannot be captured using the parameter mode. The specific attribute is 'System.Xml.Serialization.XmlElementAttribute'.
[System.ServiceModel.OperationContractAttribute(Action="urn:test-com:simple/ISimple/TestMethod", ReplyAction="urn:test-com:simple/ISimple/TestMethodResponse")]
[System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]
[return: System.ServiceModel.MessageParameterAttribute(Name="Output")]
TestMethodResponse TestMethod(TestMethodRequest request); 
```

客户端：

```
[System.ServiceModel.OperationContractAttribute(Action="urn:test-com:simple:testMethodIn", ReplyAction="*")]
[return: System.ServiceModel.MessageParameterAttribute(Name="Output")]
DesktopClientTest_ServiceReference.SI.PayloadType TestMethod(DesktopClientTest_ServiceReference.SI.PayloadType APayload); 
```

但是我不知道这是否是原因，更不用说如何解决它了。也就是说，我**确实**知道对于 doc-lit-wrapped wsdl 应该将可空类型标记为可空类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-06T08:25:36.730

我认为问题在于合同。在客户端生成中，您可以看到contract="SI.SimpleInterface"，但在服务定义中contract="ISimple"。

# android - 带分隔符的 ListView

> ID：12819691
> 
> 赞同：0
> 
> 时间：2012-10-10T12:46:29.663
> 
> 标签：android, listview, separator

> **可能重复：**
> [Android：如何在联系人应用程序中使用字母索引器和快速滚动填充 ListView。？](https://stackoverflow.com/questions/8414650/android-how-to-populate-a-listview-with-alphabet-indexer-and-fastscroll-as-in)

我需要用分隔符做一个 listView 。这很容易，但我还需要分隔符具有这种行为：

![列表视图分隔符](../Images/ec70b82da6d18595fb0903059f1ce738.png)

在下一个分隔符到达之前，分隔符不会消失。

我该怎么做？

# ruby - 使用 find_by_sql 复制包含和连接行为（建立关联的单个查询）

> ID：12819693
> 
> 赞同：2
> 
> 时间：2012-10-10T12:46:38.063
> 
> 标签：ruby, ruby-on-rails-3, postgresql, activerecord

我们有一个相当简单的查询，它与 AR 查询结构完美配合：

```
user = User.includes({:network => :product}).joins({:network => :product}).where(:id => user_id).first 
```

这将在数​​据库上执行单个查询，填充急切加载的集合（即：我可以`user.product.network.name`在不调用数据库的其他查询的情况下调用）。

我们想向`User`对象中添加一些“伪”列，这些列在用户表中不存在，但我们希望作为初始查询的一部分进行填充。SQL 如下所示：

```
SELECT 
    "users".*,
    "networks".*,
    "products".*, 
    (select count("spaces".id) from spaces "spaces" where "spaces".owner_id = "users".id) as spaces_count
FROM
    users "users" 
JOIN
    networks "networks" 
    on "networks".id = "users".network_id 
JOIN products "products" 
    on "products".id="networks".product_id 
WHERE "users".id=? 
```

用（未优化的）内部查询添加的“spaces_count”列是现阶段唯一的“pseduo”列，但视图是要添加更多。

在`User`类（一个 ActiveRecord 模型）中有：

```
attr_accessible :spaces_count 
```

为了执行 SQL 查询，我们使用以下内容：

```
user = find_by_sql(sql)
ActiveRecord::Associations::Preloader.new([user], {:network => :product}).run 
```

其中 sql 是上面包含的查询。

结果是一个`User`模型，按预期填充，包括`spaces_count`“伪”列，但是作为调用`run`关联预加载器的一部分，它再次访问数据库两次：

```
1.9.3p125 :465 > ActiveRecord::Associations::Preloader.new([user], {:network => :product}).run
  Network Load (0.5ms)  SELECT "networks".* FROM "networks" WHERE "networks"."id" IN (1)
  Product Load (0.3ms)  SELECT "products".* FROM "products" WHERE "products"."id" IN (1)
=> [{:network=>:product}] 
```

有没有一种方法可以`ActiveRecord::Associations::Preloader`用来急切地获取关联，而无需额外多次访问数据库，按照它的方式`includes`吗`joins`？

我们正在使用 Rails 3.2、Ruby 1.9.3-p125 和 PG 9.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:18:15.693

我不知道是否有办法完全按照您的要求做，我知道您不必这样做 - 只需使用更多那些 AR“查询构造”。

首先，您可以指定自定义选择：

```
users = User.includes({:network => :project}).select('users.*, (select count("spaces".id) from spaces "spaces" where "spaces".owner_id = "users".id) as spaces_count').joins({:network => :product}).where(:id => user_id).first 
```

您可以按任何顺序添加这些内容 - 我的个人惯例是“包含”首先出现，然后按照查询中出现的顺序排列其他所有内容，但这只是我。这仍然会获得您需要的急切加载，并且您可以通过在返回的对象上调用它们的名称来获取“伪列”的值：

```
users.first.spaces_count 
```

注意 PostgreSQL 适配器似乎将这些值作为字符串返回，无论它们在数据库中的实际类型是什么，因此您可能需要在之后转换它们：

```
users.first.spaces_count.to_i 
```

最后一点，虽然我确实希望这个解决方案对您有用，但我也对您建议的方法的答案感兴趣 - 通过 AR::Associations::Preloader 自定义急切加载听起来既酷又有用。

# jquery - 在 jquery datepicker 中显示组合月份和年份的单个下拉列表

> ID：12819704
> 
> 赞同：2
> 
> 时间：2012-10-10T12:47:24.717
> 
> 标签：jquery, jquery-plugins, datepicker, jquery-ui-datepicker

有没有办法在日期选择器中显示单个下拉列表，同时显示月份和年份（例如“2012 年 11 月”），而不是单独的下拉列表（使用 changeMonth: true, changeYear: true）。

# wcf - wcf WebApi 配置等价于代码

> ID：12819705
> 
> 赞同：0
> 
> 时间：2012-10-10T12:47:24.607
> 
> 标签：wcf, wcf-web-api

我在应用程序启动时运行的代码中有一个 WebApi 服务的配置：

```
var configuration = new WebApiConfiguration
{
    Security = (uri, binding) => {
        binding.Mode = HttpBindingSecurityMode.TransportCredentialOnly; 
        binding.Transport.ClientCredentialType = HttpClientCredentialType.Windows;
    },
    CreateInstance = ((type, requestMessage, o) => container.Resolve(type)),
    ErrorHandlers = (handlers, endpoint, description) => handlers.Add(new GlobalErrorHandler())
}; 
```

现在，我想将其从代码中移出并在 web.config 中进行。等价物是什么？到目前为止，我在 web.config 运行时有这个，我不确定它是否正确，而且我不知道 CreateInstance 和 ErrorHandlers 在配置中会转换成什么：

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="basicHttp">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows"></transport>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client />
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true">
    </serviceHostingEnvironment>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:42:24.943

这是正确的。

但是您使用的是 WCF Web API，实际上是 CTP 版本的 ASP.NET Web API，所以我建议您迁移到它。这并不难，因为它们很相似。

迁移的另一个原因是，当我使用 WCF Web API 时，使用 config 配置 HTTPS 和安全性对我不起作用。以编程方式配置工作。所以我认为这是某种错误。

# json - 解析从 Gson 获得的 json 时出错

> ID：12819709
> 
> 赞同：0
> 
> 时间：2012-10-10T12:47:43.923
> 
> 标签：json, hashmap, gson

我已经使用 GSON 将 Hashmap 转换为 json，json 字符串如下所示：

```
 {"records":[{"three":"chingi0","two":"Marge0","five":"Bart0","four":"Maggie0","one":"Homer0"},{"three":"chingi1","two":"Marge1","five":"Bart1","four":"Maggie1","one":"Homer1"}]} 
```

但是在使用 json 解析这个字符串时，它给了我以下错误：

**org.json.JSON.typeMismatch**

以下是我的代码片段

```
JSONArray jArray=new JSONArray(str);//str is the json string
 JSONObject json_data;
            for(int i=0;i<jArray.length();i++){
                json_data = jArray.getJSONObject(i);
               //here i am accessing the data from json string

            } 
```

我该如何解决这个问题？

这是我的堆栈跟踪：

> org.json.JSONException: 值 {"records":[{"three":"chingi0","two":"Marge0","four":"Maggie0","five":"Bart0","one": "Homer0"},{"three":"chingi1","two":"Marge1","four":"Maggie1","five":"Bart1","one":"Homer1"}]} 类型org.json.JSONObject 无法转换为 JSONArray

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:08:50.063

好吧，错误说明了一切，您实际上得到的是一个包含数组的对象，所以您应该做的是：

```
JSONObject obj=new JSONObject(str); 
```

然后您将拥有该对象中包含的数组。

# c# - WCF 服务在本地主机上工作，但在服务器上给出端点错误

> ID：12819712
> 
> 赞同：0
> 
> 时间：2012-10-10T12:47:46.567
> 
> 标签：c#, wcf

我有 2 个服务和一个测试控制台应用程序来测试它们。

TestConsole2（测试控制台）有一个对服务 RequestsStub 的服务引用。RequestsStub 有一个对 RequestServices 的服务引用。

RequestsStub 只是调用 RequestServices 中的方法。

所以视觉上......

TestConsole2 -> RequestsStub -> RequestServices

因此，我在服务器上托管了 RequestServices，并在本地安装了 RequestsStub 和 TestConsole2。这一切都很好。一旦我在服务器上更改 RequestsStub，我就会收到错误消息......

> 在[http://urlremoved.on.ca/Requests/RequestService.svc](http://urlremoved.on.ca/Requests/RequestService.svc)上没有可以尝试发送消息的端点。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）

有什么想法或知识可以为我指明正确的方向吗？

更新：RequestServices 的配置文件...

```
 <configuration>
  <configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
      <section name="RequestServices.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <connectionStrings>
    <add name="RequestServices.Properties.Settings.RequestServicesConnectionString"
      connectionString="Data Source=DEVSQL;Initial Catalog=RequestServices;Persist Security Info=True;User ID=webdev;Password=removed"
      providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_ICommunicationService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="524288"
          maxReceivedMessageSize="65536" useDefaultWebProxy="true" />
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://urlremoved.on.ca/Communication/CommunicationService.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICommunicationService"
        contract="serviceCommunication.ICommunicationService" name="BasicHttpBinding_ICommunicationService" />
    </client>
    <behaviors>
      <endpointBehaviors>
        <behavior name="RequestServices.RequestServiceBehavior">
          <enableWebScript/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
   <httpProtocol>
     <customHeaders>
       <add name="Access-Control-Allow-Origin" value="*" />
     </customHeaders>
   </httpProtocol>
  </system.webServer>

 <applicationSettings>
  <RequestServices.Properties.Settings>
   <setting name="LogSource" serializeAs="String">
    <value>Request Services Service</value>
   </setting>
   <setting name="LogType" serializeAs="String">
    <value>Application</value>
   </setting>
  </RequestServices.Properties.Settings>
 </applicationSettings>

</configuration> 
```

RequestsStub 的配置...

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IRequestService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://urlremoved.on.ca/Requests/RequestService.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IRequestService"
        contract="RequestsServiceReference.IRequestService" name="BasicHttpBinding_IRequestService" />
    </client>
    <behaviors>
      <endpointBehaviors>
        <behavior name="RequestsStub.RequestServicesStubBehavior">
          <enableWebScript/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
   <httpProtocol>
     <customHeaders>
       <add name="Access-Control-Allow-Origin" value="*" />
     </customHeaders>
   </httpProtocol>
  </system.webServer>

</configuration> 
```

# html - wkhtmltopdf : 如何提高生成的文档的 PDF 质量？

> ID：12819716
> 
> 赞同：10
> 
> 时间：2012-10-10T12:48:02.317
> 
> 标签：html, pdf, wkhtmltopdf

我正在使用 wkhtmltopdf 生成 pdf。文档中呈现的文本/图像质量未达到预期质量。图像看起来模糊，文字看起来很清晰。有什么办法可以提高质量吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T15:51:01.560

尝试阅读此线程[http://code.google.com/p/wkhtmltopdf/issues/detail?id=379](http://code.google.com/p/wkhtmltopdf/issues/detail?id=379)

尤其是评论 #15 中关于禁用智能调整大小的部分适用。

添加命令行选项`--disable-smart-shrinking`。

# business-intelligence - 复制元数据导致系统配置错误 SAP BI 7.0

> ID：12819718
> 
> 赞同：0
> 
> 时间：2012-10-10T12:48:19.217
> 
> 标签：business-intelligence, sap-erp, sap-bw

我正在使用全新的 IDES 系统来测试从 ECC6.0 (EHP4 FOR SAP ERP 6.0 / NW7.01) 创建一个通用提取器，但我的 BW 和 R/3 系统**在同一个实例中**。我已经配置了这个选项：

1.  全局设置“BW 用户 ALE” - BWREMOTE

2.  配置文件：S_BI-WX_RFC 和 S_BI-WHM_RFC

3.  我已经激活了我的数据源

4.  连接测试正常

5.  RSA3 测试没问题。

但是当我在 RSA1 中使用“**复制元数据**”，打算激活我的数据源时，但当进度约为 80% 时出现此错误：

> 系统配置不正确
> 
> 消息号 RSAR051

我在互联网和笔记上搜索过，但徒劳无功。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T01:04:54.457

我在激活数据源时出错，因此我*删除了大部分数据源*。通过重新激活***SAP-R/3***和***NODESNOTCONNECTED***数据源，虽然在激活过程中出现了一些错误/警告，但我再次*复制元数据*，没有发生错误，最终解决了我的问题。

# sql - 没有要引用的主键的外键

> ID：12819719
> 
> 赞同：4
> 
> 时间：2012-10-10T12:48:20.653
> 
> 标签：sql, oracle, oracle10g, oracle11g

我有以下两张表。

```
CREATE TABLE parent
( c1 INTEGER );

CREATE TABLE child
(
 c1 INTEGER,
 c2 INTEGER,
 c3 INTEGER,
 CONSTRAINT fk_c3 FOREIGN KEY(c3) REFERENCES parent(c1)
); 
```

您一定已经注意到该列`c1`不是 Parent 表中的主键。有没有办法在不`c1`作为主键的情况下在子表中引用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T12:49:35.253

> 有没有办法在不将'c1'作为主键的情况下在子表中引用它？

是的。外键只需要引用一个*唯一约束*——它不必是主键。您可以在该列上创建一个独特的约束。

# tfs - 在 Visual Studio 2012 中复制 Web 部署项目的行为

> ID：12819721
> 
> 赞同：2
> 
> 时间：2012-10-10T12:48:23.767
> 
> 标签：tfs, visual-studio-2012, web-deployment-project

有了 VS 2012，Web 部署项目就出来了。这很好，但我找不到正确的方法来替换他们用于使用新发布工具提供的功能。

我需要能够编译一个网站或网络应用程序项目，然后将所有内容和主要输出文件创建到磁盘上的一个位置，在那里它们可以由第三方安装程序打包（现在是 InstallShield - 很快就会被替换*）也是解决方案的一部分*。

这也必须作为 Team Build 的一部分工作，并支持相对路径。

我认为最适合 Web 应用程序的选项是“文件系统”发布，但除了在 VS IDE 中发出“发布”命令之外，我不知道如何调用它。以前我可以只在解决方案配置中选择 wdproj，它会通过编译将项目输出到目标位置。

似乎没有适合网站项目的路径。

有人可以解释或链接到应该如何设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:29:38.890

我也在找wdp替换，今天找到了这个博客，还没试过

[Visual Studio 2012 Web 部署项目已死——发布配置文件万岁](http://www.diaryofaninja.com/blog/2012/08/26/visual-studio-2012-web-deployment-projects-are-dead-ndash-long-live-publishing-profiles)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:59:33.990

我也找不到这个问题的答案，所以我最终部署到一个文件夹并将该文件夹添加到 installshield 限量版项目中。无论如何都不是理想的解决方案。

# php - 要做什么，将 JSON CODE 添加到 php 代码？你能编辑我下面给出的代码吗？我对编码很陌生..提前谢谢

> ID：12819727
> 
> 赞同：0
> 
> 时间：2012-10-10T12:48:36.870
> 
> 标签：php, mysql, json

> **可能重复：**
> [JSON 编码 MySQL 结果](https://stackoverflow.com/questions/383631/json-encode-mysql-results)

在我的代码中，数据直接来自 SQL 到我的页面。但我希望数据应该通过 JSON 访问，在 MYSQL 和 PHP 文件之间。所以我必须在下面的代码中改变什么？？？

PHP代码：

* * *

```
 <?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'root', '');
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("test", $con);

$sql="SELECT * FROM artist_details WHERE name = '".$q."'";

$result = mysql_query($sql) ;

$num=mysql_numrows($result);
if($num!=0)
{
echo "<table border='5'>
<tr>
<th>n</th>
<th>a</th>
<th>s</th>
<th>p</th>
</tr>";

while($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td>" . $row['n'] . "</td>";
echo "<td>" . $row['a'] . "</td>";
echo "<td>" . $row['s'] . "</td>";
echo "<td>" . $row['p'] . "</td>";
echo "</tr>";
}

echo "</table>";
}
else
die('record not found');

mysql_close($con);
?> 
```

HTML 代码：

* * *

```
 <html>
<head>
<script type="text/javascript">
function showUser(str)
{

if (str=="")
{
document.getElementById("txtHint").inn…
return;
} 
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("txtHint").inn…
}
}
xmlhttp.open("GET","http://localhost/n…
xmlhttp.send();
}
</script>
</head>
<body bgcolor="ffcccc">
<b>
<form align='center'>
Select a person:
<select name="users" onchange="showUser(this.value)">
<option value="i">i</option>
<option value="d">d</option>
<option value="r">r</option>
<option value="a">a</option>
<option value="a">a</option>
<option value="a">a</option>
</select>
</form>
<div id="txtHint" align='center'><font color="3333ff">Person info will be listed here.<font></div>
</body>
</html> 
```

.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:07:13.020

最好使用 jQuery Ajax。它为您完成所有基础和检查。你开始进行ajax调用。转到 jQuery 并阅读文档：[http ://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

例子：

```
//PHP Code data.php
$result = array();
while($row = mysql_fetch_array($result))
{
   $result[] = $row;
}

return json_encode($result);

//Jquery Code
<script>
$.get("data.php", function(result){
    var rows = JSON.parse(result);

    //do the loop and inject into html table
    }); 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:00:26.020

在 PHP 方面，您需要使用 json_encode 函数将数组转换为 json 字符串。

```
$data = array();
while($row = mysql_fetch_array($result))
{
    $data[] = $row;
}

echo json_encode($data); 
```

然后，您可以更改 javascript 中的代码以从响应中获取 json 对象。

```
var jsonResponse = JSON.parse(req.responseText); 
```

但是，您可以使用一些好的 JS 库（如 jQuery）进行 Ajax 操作，以便与不同的浏览器兼容。此外，最好使用 mysqli 或 PDO 而不是像其他人所说的 mysql 扩展。

# c# - 保持数据库连接打开？

> ID：12819728
> 
> 赞同：2
> 
> 时间：2012-10-10T12:48:45.243
> 
> 标签：c#, sql-server, sqlite, unit-testing, unity-container

我的 Web 应用程序具有以下类：

```
public class DatabaseProvider {
    private readonly IDbConnection _cn;

    public DatabaseProvider(IDbConnection cn) {
        _cn = cn;
    }

    public void ExecuteNonQuery(string query) {
        // Execute the query
        var cmd = _cn.CreateCommand();
        cmd.CommandText = query;
        cmd.ExecuteNonQuery();
    }
} 
```

使用以下代码（使用 Microsoft Unity）声明 IDbConnection 依赖项的位置：

```
container.RegisterType<IDbConnection>(new InjectionFactory(c => {
    var cn = new SqlConnection("...");
    cn.Open();
    return cn;
})); 
```

这允许我像这样交换到 SQLite 的连接：

```
container.RegisterType<IDbConnection>(new InjectionFactory(c => {
    var cn = new SQLiteConnection("Data Source=:memory:;Version=3;");
    cn.Open();
    return cn;
})); 
```

我在测试时使用 SQLite，连接必须保持打开状态，否则数据会丢失。因此，我不能在需要时打开和关闭连接。

我总是在需要时打开与数据库的连接，并且想知道这是否适用于大型应用程序？

我将不胜感激有关如何改进这一点的任何建议。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T12:51:28.583

作为 ADO.NET 中的一般规则，必须尽快关闭连接。

连接从连接池中重复使用，是稀缺资源。

推荐的方法是使用 () {} 构造。

[SQL Server 连接池 (ADO.NET)](http://msdn.microsoft.com/en-us/library/8xx3tyca%28VS.100%29.aspx)

我们强烈建议您在使用完毕后**始终关闭连接**，以便将**连接返回到池中**。您可以使用 Connection 对象的 Close 或 Dispose 方法，或者通过**在 C#**中的 using 语句或 Visual Basic 中的 Using 语句中打开所有连接来执行此操作。未明确关闭的连接可能不会添加或返回到池中。有关详细信息，请参阅 using 语句（C# 参考）或如何：处理 Visual Basic 的系统资源 (Visual Basic)。

因此，我建议您创建一个接口**IDbProvider**，然后进行 2 个实现：**SqlServerProvider**和**SQLiteProvider**，并在其中处理打开和关闭连接。然后使用 Unity 绑定一个或另一个提供者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:00:59.090

统一实例化连接时不要打开它。但是在您的代码中第一次使用时像往常一样打开它，并在不再需要它时关闭它。

这会改变你的 DatabaseProvider

```
public class DatabaseProvider {
    private readonly IDbConnection _cn;

    public DatabaseProvider(IDbConnection cn) {
        _cn = cn;
    }

    public void ExecuteNonQuery(string query) {
        // Execute the query
        try{
           _cn.Open();
           var cmd = _cn.CreateCommand();
           cmd.CommandText = query;
           cmd.ExecuteNonQuery();
        }
        catch(ExpectedExceptions){
           //take care of business
        }
        finally{
            _cn.Close();
        }

    }
} 
```

请注意 Unity 用于创建实例的范围和跨越的生命周期。上面的解决方案不是线程安全的，在不同的线程上拥有相同的实例可以带来很好的调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-17T03:03:58.527

你也可以检查这个。

并以我的方式始终检查连接状态，并在打开时关闭它。

```
public class DatabaseProvider {
    private readonly IDbConnection _cn;

    public DatabaseProvider(IDbConnection cn) {
        _cn = cn;
    }

    public void ExecuteNonQuery(string query) {

        using(SqliteCommand cmd = new SqliteCommand{ Connection = _cn})
        {

            if(_cn.State == ConnectionState.Open)
               _cn.Close();

            try
            {
               _cn.Open();
            }
            catch
            {
               // Message Connection Error
            }

            try
            {
               cmd.CommandText = query;
               cmd.ExecuteNonQuery();
            }
            catch
            {
                // Message Query Error
            }
            finally
            {
                _cn.Close();  // Connection close
            }

        }

    }
} 
```

# c# - 如何在绑定源的帮助下将值填充到组合框中

> ID：12819729
> 
> 赞同：1
> 
> 时间：2012-10-10T12:48:46.190
> 
> 标签：c#, winforms

我创建了一个 Windows 窗体，我想在其中获取组合框中的值。为此，我创建了一个绑定源并将其与实体的属性绑定。现在，当我运行应用程序时，我得到了绑定组合框的属性中的值。但是，该值仍然没有显示在组合框中。我在这里错过了什么吗？我想我必须设置它的“显示成员”。我知道这是一件很小的事情，但它真的让我很烦。我将不胜感激提供的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:55:17.290

得到了答案。需要在属性下设置组合框的数据源成员，然后选择正确的显示成员

# javascript - jquery html(html_content) 函数似乎在 IE-7 中不起作用

> ID：12819730
> 
> 赞同：0
> 
> 时间：2012-10-10T12:48:46.523
> 
> 标签：javascript, ruby-on-rails, jquery

我有 ajaxsubmit 方法，它以下列方式定义

```
var new_options = {
            dataType: 'json', 
            beforeSubmit: function() {
              alert('inside before submit');
              $(".available_script_arguments").each(function(index) {
                argument_id = $(this).val()
                $("td#argument_"+argument_id).addClass("resource_automation_loader");
               });                 
            },
            success: function(data) {
              alert('inside success');
              $(".available_script_arguments").each(function(index) {                    
                argument_id = $(this).val()
                $("td#argument_"+argument_id).removeClass("resource_automation_loader");
                $("td#argument_"+argument_id).html(data[argument_id]).html(); 
                $("td#argument_"+argument_id).html("<span></span>");
                updateTargetArgumentId();
                triggerAdapterResourceAutomation();
              });
            },
            error: function(jqXHR, textStatus, errorThrown){
              alert('inside error');
             $(".resource_automation_loader").each(function(){
                // This will hide the loader
                $(this).removeClass("resource_automation_loader");
                // This will display text N.A indicating the resource automation has failed
                $(this).html("<input type='text' value='' placeholder='N.A'></input>");
             });
            }
          };
          $("form#update_resource_automation_parameters").ajaxSubmit(new_options); 
```

此功能在 Firefox 中可以正常工作，但在 IE7 中无法正常工作。

我找到了原因，它与成功回调中使用的 jquery html 函数一起出现。

如成功回调数据以 html 形式出现（div 和 select 的组合）

在成功回调中检查数据后（如下所示）

```
<div >
<select arg_val="null">
<option value="">Select</option>
<option value="0">Corporate Strategic</option>
<option value="1">Business Unit Strategic</option>
<option value="2">Maintenance</option>
<option value="3">Defect</option>
</select>
</div> 
```

所以这个数据基本上输出到视图中的选择列表，但这在 IE7 中不起作用。

让我知道是否有人对此有任何想法。

谢谢，院长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:55:19.420

尝试使用`append`而不是`html`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:00:29.147

在 rahul 的回答之后，您不断地通过 jquery 选择同一个对象。当您在 JQuery 中执行操作时，它将返回受影响的对象，从而允许您链接您的操作。

例如：

```
$("td#argument_"+argument_id).removeClass("resource_automation_loader");
$("td#argument_"+argument_id).html(data[argument_id]).html(); 
$("td#argument_"+argument_id).html("<span></span>"); 
```

可以变成：

```
$("td#argument_"+argument_id).removeClass("resource_automation_loader")
                             .append(data[argument_id])
                             .append("<span></span>"); 
```

它只选择一次对象。

# jquery - 滑动 DIV 的快速 JQuery 问题

> ID：12819733
> 
> 赞同：2
> 
> 时间：2012-10-10T12:48:59.233
> 
> 标签：jquery, sliding

我需要我的滑动 DIV 在页面加载时自动关闭，此时它显示为展开状态，并且我想减慢动画速度……目前它的速度非常快，即使我将其设置为低。代码如下：

查询：

```
$(document).ready(function(){

        $(".slidingDiv").hide('slow');
        $(".show_hide").show('slow');

    $('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();
    });

 $(".slidingDiv").hide('slow');
}); 
```

HTML：

```
 <a href="#form" class="show_hide">Show/hide</a>
<a name="form" id="form"></a>
<div class="slidingDiv">

CONTENT BLAH BLAH

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:56:04.683

尝试这个：

```
setTimeout(function() {
    $(".slidingDiv").hide('slow');
}, 2000); 
```

**演示：http:** [//jsfiddle.net/BWqjp/](http://jsfiddle.net/BWqjp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:51:48.510

首先使div按样式隐藏，或者至少从div`.hide`调用中删除slow参数。

关于速度，您可以传递任意数字作为参数`.slideToggle()`来确定幻灯片效果的持续时间（以毫秒为单位）。

```
$(document).ready(function() {

    $(".slidingDiv").hide();
    $(".show_hide").show('slow');

    $('.show_hide').click(function() {
        $(".slidingDiv").slideToggle(2000);
    });

});​ 
```

请参阅此[演示](http://jsfiddle.net/S8qZh/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:56:27.510

您是否尝试过使用淡入淡出和淡入淡出？

```
$(document).ready(function(){
    $(".show_hide").hide();
    $(".slidingDiv").fadeOut('slow', function() {
         $(".show_hide").fadeIn('slow');            
    });
    $('.show_hide').click(function(){
        $(".slidingDiv").slideToggle();
    });
});​ 
```

这是小提琴：http: [//jsfiddle.net/zEnZx/](http://jsfiddle.net/zEnZx/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T12:54:16.020

```
`$().ready(function(){
    $(".slidingDiv").hide()
    $('.show_hide').click(function(){
      $(".slidingDiv").slideToggle();
    })
});` 
```

# javascript - 为什么刷新页面后此 jquery 代码不起作用？

> ID：12819734
> 
> 赞同：2
> 
> 时间：2012-10-10T12:48:58.613
> 
> 标签：javascript, jquery, ajax, loading

我使用 AJAX 文件来加载我的网页。但是重新加载页面后，如果有任何 JQuery 代码可用，它就不能正常工作。请让我知道如何更改 AJAX 代码或如何重新加载 JQuery 代码。

```
var xmlHttp;
function createRequest(){
  if(window.ActiveXObject){
    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
  } else if(window.XMLHttpRequest){ 
    xmlHttp = new XMLHttpRequest();
  }
}

function ajax(url){
  createRequest();
  xmlHttp.open("GET", url, true);
  xmlHttp.onreadystatechange = updatepage;
  xmlHttp.send(null);
}

function updatepage(){
    document.getElementById('load_ajax').innerHTML = "<div id='load_ajax' align='center'><img src='../images/loding.gif'><font dir ='ltr'>...لطفا کمی صبر کنید<font></div>";
    if(xmlHttp.readyState == 4){
        document.getElementById('load_ajax').innerHTML = xmlHttp.responseText;
    } 
```

例如，我想使用 Jquery Validation 代码来加载此页面，但是重新加载后，它不起作用....没有它，它会像我想要的那样重新加载。

```
$.validator.addMethod("NumbersOnly", function(value, element) {
       return this.optional(element) || /^[0-9\-\+]+$/i.test(value);
   }, "فقط عدد وارد کنید");
    $("#form1").validate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:07:00.947

首先，如果您使用的是 jquery，则不需要该`ajax()`方法，只需使用更容易的[jquery ajax 。](http://api.jquery.com/jQuery.ajax/)

其次，据我了解，您想使用 ajax 从另一个页面加载页面，当您这样做时，您可能只加载页面的一部分，因此您在 ajax 加载的页面标题中拥有的任何脚本/css 引用无关紧要。

你需要的是在加载页面中引用 jquery，所以如果你有 page1 加载 page2，你应该在 page1 中引用 jquery 而不是在 page2 中。

# multithreading - Jruby 1.7.0.preview1 中的内存泄漏

> ID：12819735
> 
> 赞同：0
> 
> 时间：2012-10-10T12:49:03.390
> 
> 标签：multithreading, mongodb, memory-leaks, jruby

我有一个启动 200 个线程的 jruby 应用程序（Jruby 1.7.0.preview1）。每个线程解析一个 xml 文档并将复杂的数据保存在几个 mongodb 集合中。我正在使用 Java Mongo 驱动程序（2.7.3 版）将数据存储在 mongodb 中。我的应用程序的 JVM 选项如下：

```
-J-Djruby.thread.pooling=true -J-Xmn512m -J-Xms4096m -J-Xmx4096m -J-XX:+UseConcMarkSweepGC -J-XX:CMSInitiatingOccupancyFraction=45 -J-XX:ParallelGCThreads=1 -J-XX:+DisableExplicitGC -J-XX:+PrintGCDetails -J-XX:+PrintGCTimeStamps -J-Xloggc:/LOGPATH/gc.log -J-Dsun.rmi.dgc.client.gcInterval=60000 -J-Dsun.rmi.dgc.server.gcInterval=60000 
```

因此，每次线程工作并在特定集合中保存数据时，我的堆大小都会非常快地达到 4GB 的限制。我使用 jmap 命令进行了测试，发现创建了许多 java.util.LinkedHashMap 对象（大约 1.300.000）。我不知道我是否可以减少这种对象类型的数量。

Jruby 中的 LinkedHashMaps 和 Memory Leaks 是否存在已知问题？

谁能帮我解决这个问题？

谢谢克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:05:55.860

过去一周，我使用 Eclipse 的[内存分析器工具](http://www.eclipse.org/mat/)成功追踪了我的 jruby on rails 应用程序中的 3 个内存泄漏。我强烈推荐它。在任何情况下都不是 jruby 本身的内存泄漏，而是其中 2 个在 Mongoid 中，一次在我自己的应用程序中。然而，我注意到 jruby 比 MRI 对内存泄漏更敏感。

还可以查看这篇关于使用 MAT 诊断 jruby 泄漏的[博客文章。](http://blog.headius.com/2010/07/finding-leaks-in-ruby-apps-with-eclipse.html)

# solr - Solr 中的空间问题

> ID：12819737
> 
> 赞同：1
> 
> 时间：2012-10-10T12:49:08.743
> 
> 标签：solr

考虑磁盘空间（物理内存）是否约为 1GB，数据库中的数据索引约为 1GB。

将来如果数据库中的数据增长，那么索引数据也会在 solr 中增长。如何处理 solr 中的内存泄漏。

我们可以通过使用solr 中的**“shard”**参数对来自不同位置的分布式索引数据进行分组。

这里我的问题是如何在运行时**将索引数据共享到另一个位置？**/ 如何在运行时将索引数据拆分到不同的位置？有没有可能在 solr 中实现这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:17:42.427

[您可以使用SolrReplication](http://wiki.apache.org/solr/SolrReplication)将数据复制到另一个位置

即使索引大于 Solr 实例可用的内存，使用它也没有问题。我不认为索引整个时间都在内存中，这是不可能的。我正在使用的索引约为 10G，而 Solr 可用的内存要少得多。

至于添加新的分片/拆分数据，在运行时，我真的不知道这是否可能（打赌是“不可能”）。[DistributedSearch](http://wiki.apache.org/solr/DistributedSearch) wiki 页面提到需要重新索引以将数据移动到特定分片。

# code-analysis - Visual Studio 2010 代码分析 CA1305（指定 IFormatProvider）规则不适用于 TryParse 方法

> ID：12819743
> 
> 赞同：7
> 
> 时间：2012-10-10T12:49:22.597
> 
> 标签：code-analysis, tryparse, iformatprovider

我想知道为什么代码分析规则[CA1305 - 指定 IFormatProvider](http://msdn.microsoft.com/en-us/library/ms182190.aspx)不适用于 TryParse 方法？

例如，使用“Microsoft 所有规则”规则集，代码分析会针对以下代码发出 CA1305 警告：

```
static void Main(string[] args)
{
    string text = args[0];

    double value = double.Parse(text);
} 
```

但不针对以下代码给出 CA1305 警告：

```
static void Main(string[] args)
{
    string text = args[0];

    double value;
    if (!double.TryParse(text, out value))
        value = 0;
} 
```

我发现这很不幸，因为如果输入字符串不可靠，TryParse 方法是进行解析的正确方法。

有谁知道 TryParse 方法的 CA1305 规则是在某些较新版本的代码分析工具中还是由某个第 3 方实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-17T11:33:22.130

这已在 FxCop 以及最近的工具（如 SonarLint）中得到修复。

# delphi - LIBRTMP Delphi RTMP_Read 错误？

> ID：12819760
> 
> 赞同：1
> 
> 时间：2012-10-10T12:50:06.173
> 
> 标签：delphi, delphi-xe2, rtmp

我认为我使用的单位是错误的，因为我做了阅读程序：

```
procedure ReadStream (rtmp: RTMP; Stream: TStream);
var
   Buffer: array [0 .. 16384-1] of Byte ;/ / 16kB buffer
   BytesRead: Integer;
begin
   while True do
   begin
     BytesRead: = RTMP_ReadData (rtmp, @ Buffer [0], SizeOf (Buffer));
     if BytesRead = 0 then
       exit;
     Stream.WriteBuffer (Buffer [0], BytesRead);
   end;
end; 
```

过程调用：

```
var
  MY_RTMP: RTMP;
  URL_str: string;
  MY_RTMPPacket: RTMPPacket;
  URL_char: PAnsiChar;
  F: TFileStream;
begin
  F: = TFileStream.Create (ExtractFilePath (GetModuleName (0)) + 'Video.flv', fmCreate or fmOpenWrite);
  URL_str: = 'rtmp :/ / localhost: 1935/Video/test.stream';
  MY_RTMP: = RTMP_Alloc;
  RTMP_Init (MY_RTMP);
  RTMP_SetupURL (MY_RTMP, pcchar (URL_str));
  RTMP_EnableWrite (MY_RTMP);
  RTMP_Connect (MY_RTMP, MY_RTMPPacket);
  RTMP_ConnectStream (MY_RTMP, 0);
  ReadStream (MY_RTMP, F);
end; 
```

程序可以编译，但是当您开始收到错误消息时： **在库 DLL librtmp 中找不到过程入口点 RTMP_ReadData？** 但是这个功能在模块里有描述，帮我找个出入

如果信任 Dependency Walker，则该库无法运行 RTMP_ReadData。有一个函数RTMP_Read，根据源码：

[链接](https://github.com/FFmpeg/FFmpeg/blob/master/libavformat/librtmp.c)

C上的函数如下：

```
static int rtmp_read (URLContext * s, uint8_t * buf, int size)
{
     LibRTMPContext * ctx = s-> priv_data;
     RTMP * r = & ctx-> rtmp;

     return RTMP_Read (r, buf, size);
} 
```

在我使用的模块中，缺少描述

我使用现有条目的模块：

```
RTMP_READ = record
       buf: pcchar;
       bufpos: pcchar;
       buflen: cuint;
       timestamp: uint32_t;
       dataType: uint8_t;
       flags: uint8_t;
       status: int8_t;
       initialFrameType: uint8_t;
       nResumeTS: uint32_t;
       metaHeader: pcchar;
       initialFrame: pcchar;
       nMetaHeaderSize: uint32_t;
       nInitialFrameSize: uint32_t;
       nIgnoredFrameCounter: uint32_t;
       nIgnoredFlvFrameCounter: uint32_t;
     end; 
```

她被调用的imee名称，但在我看来，它包含很多让我困惑的选项，与加载的功能无关。我该怎么处理这张唱片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:51:27.137

根据我所有的研究，该函数实际上名为`RTMP_Read`.

[例如，您可以使用Dependency Walker](http://www.dependencywalker.com/)检查您的 DLL 导出的函数。当然，库的最终来源应该是它提供的 C++ 头文件。

* * *

我的建议是开始学习如何使用 C 或 C++ 使用 LIBRTMP。目前您不知道错误是由于接口翻译错误，还是由于调用不正确。如果您继续使用 Delphi，那么您将永远难以找出错误的原因。

但是，切换到 C 或 C++，您已经拥有链接到库所需的头文件。您可以编译 RTMPDUMP 附带的演示程序并观察它们是如何工作的。您可以将它们用作您的文档，因为 LIBRTMP 本身似乎没有（我找不到）。

然后，一旦你了解了这个库是如何工作的，就开始将它移植到 Delphi 中。首先创建使用该库的最简单的 C++ 程序。将其移植到德尔福。拥有一个正在运行的 C++ 版本的程序进行比较将帮助您隔离故障。

最终，您将获得界面的功能 Delphi 翻译。更重要的是，您将真正了解如何调用该库。如果你继续你目前的道路，你将取得非常缓慢的进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T11:56:12.143

函数 RTMP_ReadData(var r:RTMP; buf:pcchar; size:cint):cint;cdecl;external 'librtmp' name **'RTMP_Read'** ; <--改写。

# ruby-on-rails - rails 3.2.8 ruby 1.9.x tinymce-rails ActiveSupport::HashWithIndifferentAccess (NameError)

> ID：12819761
> 
> 赞同：1
> 
> 时间：2012-10-10T12:50:08.083
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem, tinymce

我正在尝试在我的 rails 3.2.8 应用程序中使用带有 active-admin 的 tiny-mce WYSIWYG 编辑器。包括后：

```
gem 'tinymce-rails' 
```

（https://github.com/sophlenz/tinymce-rails）

在我的 Gemfile 中，尝试启动“webbrick”或“thin”服务器甚至是 rails 控制台时出现以下错误：

```
 /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/tinymce-rails-3.5.7/lib/tinymce/rails/configuration.rb:88:in `<module:Rails>': uninitialized constant ActiveSupport::HashWithIndifferentAccess (NameError)
from /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/tinymce-rails-3.5.7/lib/tinymce/rails/configuration.rb:1:in `<top (required)>'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/tinymce-rails-3.5.7/lib/tinymce/rails.rb:5:in `require'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/tinymce-rails-3.5.7/lib/tinymce/rails.rb:5:in `<module:Rails>'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/tinymce-rails-3.5.7/lib/tinymce/rails.rb:2:in `<module:TinyMCE>'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/tinymce-rails-3.5.7/lib/tinymce/rails.rb:1:in `<top (required)>'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/tinymce-rails-3.5.7/lib/tinymce-rails.rb:1:in `require'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/tinymce-rails-3.5.7/lib/tinymce-rails.rb:1:in `<top (required)>'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
from /home/pablo/Programming/railsy/tiny_mce_trial/config/application.rb:8:in `<top (required)>'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.8/lib/rails/commands.rb:53:in `require'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.8/lib/rails/commands.rb:53:in `block in <top (required)>'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
from /home/pablo/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我设法在一个新的 Rails 应用程序上重现了这个错误，所以我不认为这是一个依赖问题。ruby 1.9.3 和 ruby​​ 1.9.2 都会发生这种情况。

我试图添加：

```
require 'tinymce-rails' 
```

在 application.rb、envirment.rb 和初始化文件中，但它并没有解决问题。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:19:17.493

已经明白了。

看起来最新的 3.5.7 版本中存在错误。昨天才出来的。

安装以前的版本：

```
gem install tinymce-rails -v 3.5.6

gem 'tinymce-rails', '3.5.6' 
```

修复。

# objective-c - 来自 xcode 的 .ipa 文件，已加密

> ID：12819763
> 
> 赞同：0
> 
> 时间：2012-10-10T12:50:09.707
> 
> 标签：objective-c, ios, xcode4.2, anti-piracy

我想测试一段反盗版代码。

问题是，Crackulous 只检测从应用商店下载的应用，因为它们具有加密功能。

有什么方法可以在设备上测试它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:52:03.457

您可能想看看[TestFlight](https://testflightapp.com/)。这用于部署应用程序以测试具有常规证书的设备。

# android - 自定义适配器为空

> ID：12819768
> 
> 赞同：0
> 
> 时间：2012-10-10T12:50:22.000
> 
> 标签：android

当我了解我的自定义适配器时，我遇到了问题。我总是得到空适配器。似乎我为它们设置了错误的上下文，但我尝试在 onActivityCreated 中初始化我的适配器，因为它在工作示例中具有几乎相同的功能，但只有不同的上下文可用，我得到“没有封闭类型的实例...... ”。那么我应该在哪里以及如何初始化我的适配器。

那是我的 VideoList 代码：

```
private static final String TAG = VideoListLoader.class.getName();
    VideoListFragment list;
    VideoListAdapter mAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    FragmentManager fm = getSupportFragmentManager();

    // Create the list fragment and add it as our sole content.
    if (fm.findFragmentById(android.R.id.content) == null) {
        list = new VideoListFragment();
        fm.beginTransaction().add(android.R.id.content, list).commit();
    }
    }

    public static class VideoEntry {

    private final JSONObject mItem;
    private String mTitle, mThumbURL, mVideoID;

    public VideoEntry(JSONObject item) {
        mItem = item;
    }

    public String getVideoID() {
        return mThumbURL;
    }

    public String getTitle() {
        return mTitle;
    }

    public String getThumbURL() {
        return mVideoID;
    }

    void wrapID(Context context) throws JSONException {
        if (mVideoID == null) {
        mVideoID = mItem.getJSONObject("video").getString("id");
        }
    }

    void wrapTitle(Context context) throws JSONException {
        if (mTitle == null) {
        mTitle = mItem.getJSONObject("video").getString("title");
        }
    }

    void wrapThumbURL(Context context) throws JSONException {
        if (mThumbURL == null) {
        mThumbURL = mItem.getJSONObject("video").getJSONObject("thumbnail").getString("sqDefault");
        }
    }

    }

    public static class VideoListFragment extends SherlockListFragment implements LoaderCallbacks<RESTLoader.RESTResponse> {

    private static final int LOADER_YOUTUBE_SEARCH = 0x1;
    VideoListAdapter mAdapter;
    private static final String ARGS_URI = "net.neilgoodman.android.restloadertutorial.ARGS_URI";
    private static final String ARGS_PARAMS = "net.neilgoodman.android.restloadertutorial.ARGS_PARAMS";

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        // Let's set our list adapter to a simple ArrayAdapter.
        mAdapter = VideoListLoader.new VideoListAdapter(getSherlockActivity());
        setListAdapter(mAdapter);

        setListShown(false);

        // This is our REST action.
        Uri youtubeSearchUri = Uri.parse("https://gdata.youtube.com/feeds/api/playlists/EC6gx4Cwl9DGAdmjrf1RaZIJe2_3fGbhbu");

        // Here we are going to place our REST call parameters. Note that
        // we could have just used Uri.Builder and appendQueryParameter()
        // here, but I wanted to illustrate how to use the Bundle params.
        Bundle params = new Bundle();
        params.putString("max-result", "20");
        params.putString("alt", "jsonc");
        params.putString("v", "2");

        // These are the loader arguments. They are stored in a Bundle
        // because
        // LoaderManager will maintain the state of our Loaders for us and
        // reload the Loader if necessary. This is the whole reason why
        // we have even bothered to implement RESTLoader.
        Bundle args = new Bundle();
        args.putParcelable(ARGS_URI, youtubeSearchUri);
        args.putParcelable(ARGS_PARAMS, params);

        // Initialize the Loader.
        getLoaderManager().initLoader(LOADER_YOUTUBE_SEARCH, args, this);

    }

    @Override
    public Loader<RESTLoader.RESTResponse> onCreateLoader(int id, Bundle args) {
        if (args != null && args.containsKey(ARGS_URI) && args.containsKey(ARGS_PARAMS)) {
        Uri action = args.getParcelable(ARGS_URI);
        Bundle params = args.getParcelable(ARGS_PARAMS);

        return new RESTLoader(getSherlockActivity(), RESTLoader.HTTPVerb.GET, action, params);
        }

        return null;
    }

    @Override
    public void onLoadFinished(Loader<RESTLoader.RESTResponse> loader, RESTLoader.RESTResponse data) {
        int code = data.getCode();
        String json = data.getData();

        Log.e("JSON: ", json);

        // Check to see if we got an HTTP 200 code and have some data.
        if (code == 200 && !json.equals("")) {

        List<VideoEntry> playlists = getPlaylistsFromJson(getSherlockActivity(), json);
        Log.e("Full Playlists: ", playlists.get(3).getTitle().toString());
        mAdapter.setData(playlists);
        Log.e("Lo: ", "Lolo");

        if (isResumed()) {
            setListShown(true);
        } else {
            setListShownNoAnimation(true);
        }

        } else {
        Toast.makeText(getSherlockActivity(), "Failed to load data. Check your internet settings.", Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    public void onLoaderReset(Loader<RESTLoader.RESTResponse> loader) {
        mAdapter.setData(null);
    }

    private static List<VideoEntry> getPlaylistsFromJson(FragmentActivity fragmentActivity, String json) {

        List<VideoEntry> playlistsList = new ArrayList<VideoEntry>();
        final Context context = fragmentActivity.getApplicationContext();

        try {
        JSONObject playlistsWrapper = (JSONObject) new JSONTokener(json).nextValue();
        JSONArray playlists = playlistsWrapper.getJSONObject("data").getJSONArray("items");
        for (int i = 0; i < playlists.length(); i++) {
            JSONObject playlist = playlists.getJSONObject(i);
            VideoEntry entry = new VideoEntry(playlist);
            entry.wrapID(context);
            entry.wrapTitle(context);
            entry.wrapThumbURL(context);
            playlistsList.add(entry);
            Log.e("PlaylistsList: ", playlistsList.get(i).getTitle().toString());
        }
        } catch (JSONException e) {
        Log.e(TAG, "Failed to parse JSON.", e);
        }

        return playlistsList;
    }
    }
  } 
```

我的适配器（数据发送到 setData() 时出现异常，之前一切正常）：

```
public class VideoListAdapter extends ArrayAdapter<VideoEntry> {

    public ViewHolder holder;
    ImageLoader imageLoader = ImageLoader.getInstance();
    private final LayoutInflater mInflater;

    public VideoListAdapter(Context context) {
        super(context, android.R.layout.simple_list_item_2);

        mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        File cacheDir = StorageUtils.getOwnCacheDirectory(context, "StrongRunner/Cache");

        DisplayImageOptions options = new DisplayImageOptions.Builder().showStubImage(R.drawable.btn_start).showImageForEmptyUri(R.drawable.ic_launcher)
            .resetViewBeforeLoading().cacheInMemory().cacheOnDisc().build();

        ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context).threadPoolSize(5).threadPriority(Thread.MIN_PRIORITY + 2)
            .denyCacheImageMultipleSizesInMemory().offOutOfMemoryHandling().discCache(new UnlimitedDiscCache(cacheDir)).defaultDisplayImageOptions(options).build();

        ImageLoader.getInstance().init(config);
    }

    public void setData(List<VideoEntry> data) {
        Log.e("Log", data.get(3).getTitle().toString());
        clear();
        if (data != null) {
        Log.e("Data: ", data.get(5).getTitle().toString());
        for (VideoEntry videoEntry : data) {
            add(videoEntry);
        }
        }
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
        convertView = mInflater.inflate(R.layout.video_custom_view, parent, false);

        holder = new ViewHolder();
        holder.title = (TextView) convertView.findViewById(R.id.tv_VideoTitle);
        holder.ivThumb = (ImageView) convertView.findViewById(R.id.im_vThumb);
        convertView.setTag(holder);
        } else {
        holder = (ViewHolder) convertView.getTag();
        }

        VideoEntry video = getItem(position);
        Log.e("LogView: ", video.getVideoID().toString());
        holder.id = video.getVideoID().toString();
        holder.title.setText(video.getTitle().toString());
        imageLoader.displayImage(video.getThumbURL().toString(), holder.ivThumb);

        return convertView;
    }

    public class ViewHolder {
        public String id;
        public ImageView ivThumb;
        public TextView title;

    }
    } 
```

日志：

```
10-10 15:00:29.143: E/JSON:(18761): {"apiVersion":"2.1","data":{"id":"PL6gx4Cwl9DGAdmjrf1RaZIJe2_3fGbhbu","author":"thenewboston","title":"Biology Lecture Playlist","description":"Official Playlist for thenewboston Biology Lecture videos!","thumbnail":{"sqDefault":"http://i.ytimg.com/vi/3w1fY67dnFI/default.jpg","hqDefault":"http://i.ytimg.com/vi/3w1fY67dnFI/hqdefault.jpg"},"content":{"5":"http://www.youtube.com/p/PL6gx4Cwl9DGAdmjrf1RaZIJe2_3fGbhbu"},"totalItems":60,"startIndex":1,"itemsPerPage":25,"items":[{"id":"ECjsdPXfMXpAvLTnVs3EOXH-eAiWdD3arb","position":1,"author":"thenewboston","video":{"id":"3w1fY67dnFI","uploaded":"2012-09-05T01:45:45.000Z","updated":"2012-10-09T15:17:17.000Z","uploader":"thenewboston","category":"Education","title":"Biology Lecture - 1 - Introduction to Biology","description":"Visit my website at http://thenewboston.com for all of my videos! \n\nMy Google+ - https://plus.google.com/108291790892450338168/posts\nMy Facebook - http://www.facebook.com/pages/TheNewBoston/464114846956315\nMy Twitter - http://twitter.com/#!/bucky_roberts\nMy Other YouTube Channel - http://www.youtube.com/thenewbostontv\nDonate - https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=5K9RJVCAKWZKS","thumbnail":{"sqDefault":"http://i.ytimg.com/vi/3w1fY67dnFI/default.jpg","hqDefault":"http://i.ytimg.com/vi/3w1fY67dnFI/hqdefault.jpg"},"player":{"default":"https://www.youtube.com/watch?v=3w1fY67dnFI&feature=youtube_gdata_player","mobile":"https://m.youtube.com/details?v=3w1fY67dnFI"},"content":{"5":"https://www.youtube.com/v/3w1fY67dnFI?version=3&f=playlists&app=youtube_gdata","1":"rtsp://v5.cache8.c.youtube.com/CiULENy73wIaHAlSnN2uY18N3xMYDSANFEgGUglwbGF5bGlzdHMM/0/0/0/video.3gp","6":"rtsp://v7.cache6.c.youtube.com/CiULENy73wIaHAlSnN2uY18N3xMYESARFEgGUglwbGF5bGlzdHMM/0/0/0/video.3gp"},"duration":261,"aspectRatio":"widescreen","rating":4.849624,"likeCount":"128","ratingCount":133,"viewCount":16663,"favoriteCount":0,"commentCount":88,"accessControl":{"comment":"allowed","commentVote":"allowed","videoRespond":"moderated","rate":"allowed","embed":"allowed","list":"allowed","autoPlay":"allowed","syndicate":"allowed"}}},{"id":"ECjsdPXfMXpAvvWbBWfRAyDxBDOzpN-q9O","position":2,"author":"thenewboston","video":{"id":"zcHBT6QFIqk","uploaded":"2012-09-05T01:45:56.000Z","updated":"2012-10-08T02:49:52.000Z","uploader":"thenewboston","category":"Education","title":"Biology Lecture - 2 - What is Life?","description":"Visit my website at http://thenewboston.com for all of my videos! \n\nMy Google+ - https://plus.google.com/108291790892450338168/posts\nMy Facebook - http://www.facebook.com/pages/TheNewBoston/464114846956315\nMy Twitter - http://twitter.com/#!/bucky_roberts\nMy Other YouTube Channel - http://www.youtube.com/thenewbostontv\nDonate - https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=5K9RJVCAKWZKS","thumbnail":{"sqDefault":"http://i.ytimg.com/vi/zcHBT6QFIqk/default.jpg","hqDefault":"http://i.ytimg.com/vi/zcHBT6QFIqk/hqdefault.jpg"},"player":{"default":"https://www.youtube.com/watch?v=zcHBT6QFIqk&feature=youtube_gdata_player","mobile":"https://m.youtube.com/details?v=zcHBT6QFIqk"},"content":{"5":"https://www.youtube.com/v/zcHBT6QFIqk?version=3&f=playlists&app=youtube_gdata","1":"rtsp://v7.cache1.c.youtube.com/CiULENy73wIaHAmpIgWkT8HBzRMYDSANFEgGUglwbGF5bGlzdHMM/0/0/0/video.3gp","6":"rtsp://v1.cache8.c.youtube.com/CiULENy73wIaHAmpIgWkT8HBzRMYESARFEgGUglwbGF5bGlzdHMM/0/0/0/video.3gp"},"duration":343,"aspectRatio":"widescreen","rating":4.7362638,"likeCount":"85","ratingCount":91,"viewCount":3279,"favoriteCount":0,"commentCount":43,"accessControl":{"comment":"allowed","commentVote":"allowed","videoRespond":"moderated","rate":"allowed","embed":"allowed","list":"allowed","autoPlay":"allowed","syndicate":"allowed"}}},{"id":"ECjsdPXfMXpAv6yB_jzc9KzhvXyS-xnL4b","position":3,"author":"thenewboston","video":{"id":"1tWuDkrvJ6k","uploaded":"2012-09-05T01:45:36.000Z","updated":"2012-10-10T08:49:32.000Z","uploader":"thenewboston","category":"Education","title":"Biology Lecture - 3 - Properties of Life","description":
10-10 15:00:29.268: E/PlaylistsList:(18761): Biology Lecture - 1 - Introduction to Biology
10-10 15:00:29.268: E/PlaylistsList:(18761): Biology Lecture - 2 - What is Life?
10-10 15:00:29.268: E/PlaylistsList:(18761): Biology Lecture - 3 - Properties of Life
10-10 15:00:29.273: E/PlaylistsList:(18761): Biology Lecture - 4 - Acids and Bases
10-10 15:00:29.273: E/PlaylistsList:(18761): Biology Lecture - 5 - Why are Acids and Bases Important?
10-10 15:00:29.273: E/PlaylistsList:(18761): Biology Lecture - 6 - pH Scale
10-10 15:00:29.273: E/PlaylistsList:(18761): Biology Lecture - 7 - Carbohydrates
10-10 15:00:29.278: E/PlaylistsList:(18761): Biology Lecture - 8 - Classifying Carbohydrates
10-10 15:00:29.278: E/PlaylistsList:(18761): Biology Lecture - 9 - Sugars
10-10 15:00:29.278: E/PlaylistsList:(18761): Biology Lecture - 10 - Why does your body need Carbohydrates?
10-10 15:00:29.278: E/PlaylistsList:(18761): Biology Lecture - 11 - Proteins
10-10 15:00:29.278: E/PlaylistsList:(18761): Biology Lecture - 12 - Nucleic Acids
10-10 15:00:29.278: E/PlaylistsList:(18761): Biology Lecture - 13 - DNA
10-10 15:00:29.278: E/PlaylistsList:(18761): Biology Lecture - 14 - Lipids
10-10 15:00:29.278: E/PlaylistsList:(18761): Biology Lecture - 15 - The Cell
10-10 15:00:29.283: E/PlaylistsList:(18761): Biology Lecture - 16 - Plasma Membrane
10-10 15:00:29.283: E/PlaylistsList:(18761): Biology Lecture - 17 - Transporting Materials Through the Cell Membrane
10-10 15:00:29.283: E/PlaylistsList:(18761): Biology Lecture - 18 - Diffusion
10-10 15:00:29.288: E/PlaylistsList:(18761): Biology Lecture - 19 - Osmosis
10-10 15:00:29.288: E/PlaylistsList:(18761): Biology Lecture - 20 - Nucleus
10-10 15:00:29.288: E/PlaylistsList:(18761): Biology Lecture - 21 - Ribosomes
10-10 15:00:29.288: E/PlaylistsList:(18761): Biology Lecture - 22 - Endoplasmic Reticulum
10-10 15:00:29.288: E/PlaylistsList:(18761): Biology Lecture - 23 - Golgi Apparatus
10-10 15:00:29.288: E/PlaylistsList:(18761): Biology Lecture - 24 - Lysosome
10-10 15:00:29.288: E/PlaylistsList:(18761): Biology Lecture - 25 - Peroxisome
10-10 15:00:29.288: E/Full Playlists:(18761): Biology Lecture - 4 - Acids and Bases
10-10 15:00:29.293: D/AndroidRuntime(18761): Shutting down VM
10-10 15:00:29.293: W/dalvikvm(18761): threadid=1: thread exiting with uncaught exception (group=0x4001d7d0)
10-10 15:00:29.303: E/AndroidRuntime(18761): FATAL EXCEPTION: main
10-10 15:00:29.303: E/AndroidRuntime(18761): java.lang.NullPointerException
10-10 15:00:29.303: E/AndroidRuntime(18761):    at apps.beneficial.strongrunner.VideoListLoader$VideoListFragment.onLoadFinished(VideoListLoader.java:157)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at apps.beneficial.strongrunner.VideoListLoader$VideoListFragment.onLoadFinished(VideoListLoader.java:1)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at android.support.v4.app.LoaderManagerImpl$LoaderInfo.callOnLoadFinished(LoaderManager.java:425)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at android.support.v4.app.LoaderManagerImpl$LoaderInfo.onLoadComplete(LoaderManager.java:393)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at android.support.v4.content.Loader.deliverResult(Loader.java:103)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at apps.beneficial.strongrunner.RESTLoader.deliverResult(RESTLoader.java:200)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at apps.beneficial.strongrunner.RESTLoader.deliverResult(RESTLoader.java:1)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at android.support.v4.content.AsyncTaskLoader.dispatchOnLoadComplete(AsyncTaskLoader.java:221)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at android.support.v4.content.AsyncTaskLoader$LoadTask.onPostExecute(AsyncTaskLoader.java:61)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at android.support.v4.content.ModernAsyncTask.finish(ModernAsyncTask.java:461)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at android.support.v4.content.ModernAsyncTask.access$500(ModernAsyncTask.java:47)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at android.support.v4.content.ModernAsyncTask$InternalHandler.handleMessage(ModernAsyncTask.java:474)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at android.os.Looper.loop(Looper.java:123)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at android.app.ActivityThread.main(ActivityThread.java:4627)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at java.lang.reflect.Method.invokeNative(Native Method)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at java.lang.reflect.Method.invoke(Method.java:521)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
10-10 15:00:29.303: E/AndroidRuntime(18761):    at dalvik.system.NativeStart.main(Native Method)
10-10 15:00:29.368: D/dalvikvm(18761): GC_FOR_MALLOC freed 7808 objects / 672848 bytes in 60ms 
```

**我的解决方案：我忘记向 VideoListAdapter 添加静态参数，这就是我的适配器没有调用的原因。**

# azure - Windows Azure IaaS 虚拟机能否保持内存状态？

> ID：12819769
> 
> 赞同：3
> 
> 时间：2012-10-10T12:50:22.510
> 
> 标签：azure, virtual-machine, azure-virtual-machine, iaas

我不太了解 Azure IaaS 虚拟机（不是 VM 角色）可以保持状态的程度。显然，本地磁盘上的文件被保留。

内存状态是否也保留？我可以像在 VMWare 中那样“暂停”一个 VM，然后在所有程序运行的情况下恢复它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:31:27.800

没有暂停选项。您可以启动/关闭机器，并捕获（图像）它们。

捕获只复制磁盘，而不是内存。Windows 服务器应事先进行系统准备。必须关闭机器才能进行捕捉。

![在此处输入图像描述](../Images/a3c0b79f3b1d8bc5ef73f42114edb421.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-02T12:15:17.383

最接近的方法是对 VM 进行快照，但是只对磁盘进行快照，而不是对内存中的任何内容进行快照。

此[快照概述](https://azure.microsoft.com/en-gb/documentation/articles/storage-powershell-guide-full/#_how-to-manage-azure-blob-snapshots "将 Azure PowerShell 与 Azure 存储结合使用")提供了更多信息；请记住，快照是在 blob (vhd) 级别而不是 VM 级别拍摄的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-23T11:40:37.997

由于 Azure VM 只有两种状态，即启动和停止，但您当然可以在创建 VM 时使用扩展机制来调整它。我们可以按照以下步骤进行休眠。

**1** . 创建一个独立的应用程序，它将执行以下操作。 *一个*。阅读您的系统“最近的文件”。 *乙*。扫描所有正在运行的进程。 *丙*。现在根据进程名称和最近目录中最近打开的文件获取它们的绝对路径并存储到一些临时文件中。

湾。确保每次执行时文件创建都应覆盖旧文件。e. 如果文件存在，则在启动过程中，此应用程序也应打开所有列出的文件并启动过程。

**2** . 现在，将上面创建的可执行文件存储到某个公开访问的存储帐户中。

**3** . 编写一个 power shell 脚本，您可以在其中访问上述存储帐户，它会将第 1 步创建的可执行应用程序下载到该 VM 中，这将继续扫描和读取所有最近打开的应用程序并将其存储到一个临时文件中，并且在启动期间它也应该打开.

**4** . 为了将该可执行文件下载到相应的虚拟机中，您可以在创建虚拟机时使用“扩展”机制，您将在其中附加电源外壳脚本。

**5** . 因此，从下一次开始，在解除分配 VM 后，每当您再次启动旧 VM 时，它都会读取列出所有文件名和进程名的临时文件并打开它。

这样，您就可以实现您的休眠过程。

希望您对这个休眠步骤很清楚，否则请更新我，以便我可以指导您更好的方法。

# ruby-on-rails-3 - 使用 rails_admin 对字段进行排序

> ID：12819771
> 
> 赞同：4
> 
> 时间：2012-10-10T12:50:25.570
> 
> 标签：ruby-on-rails-3, sorting, rails-admin

有没有办法在 rails admin 中对字段进行排序。不碍事，作为查看排序但在模型中排序？

为了更好地理解：

你有一个项目清单

*   亚瑟·登特 [排序 ID：1]
*   福特 Prefect [分类编号：2]
*   特里西娅·玛丽·麦克米兰 [排序 ID：3]

现在您在 rails_admin 视图中重新排列它们：

*   特里西娅·玛丽·麦克米兰 [排序 ID: 1]
*   亚瑟·登特 [排序 ID：2]
*   福特 Prefect [排序 ID: 3]

并且排序 ID 会自动切换。

我希望你明白我的意思，这有点难以描述

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T06:39:48.410

默认情况下，行按 id 倒序排序，您可以使用以下两种方法更改默认行为：sort_by 和 sort_reverse

```
RailsAdmin.config do |config|
  config.model Player do
    list do
      sort_by :name
      field :name do
        sort_reverse false
      end
    end
  end
end 
```

您可以在此处找到更多信息：[https ://github.com/sferik/rails_admin/wiki/List](https://github.com/sferik/rails_admin/wiki/List)

# java - 将多个 Maven 目标合并到一个目标中

> ID：12819773
> 
> 赞同：20
> 
> 时间：2012-10-10T12:50:28.717
> 
> 标签：java, maven

到目前为止，我正在使用该命令`mvn clean compile hibernate3:hbm2java`来启动我的程序。有没有办法将这三个目标结合在一个单一的目标中，例如`mvn run`或`mvn myapp:run`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-11T09:04:37.810

与我的其他答案完全不同的另一个解决方案是使用[`exec-maven-plugin`](http://mojo.codehaus.org/exec-maven-plugin/index.html)with the goal [`exec:exec`](http://mojo.codehaus.org/exec-maven-plugin/exec-mojo.html)。

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <configuration>
                <executable>mvn</executable>
                <arguments>
                    <argument>clean</argument>
                    <argument>compile</argument>
                    <argument>hibernate3:hbm2java</argument>
                </arguments>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

然后你就像这样运行它：

```
mvn exec:exec 
```

通过这种方式，您不会更改任何其他插件，也不会绑定到任何阶段。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T13:06:28.170

根据[Hibernate3 Maven 插件](http://mojo.codehaus.org/maven-hibernate3/hibernate3-maven-plugin/hbm2java-mojo.html)站点，`hbm2java`目标默认绑定到`generate-sources`阶段。

通常你不必清理项目，你可以运行增量构建。

无论如何，如果您在其中添加`maven-clean-plugin`和`hibernate3-maven-plugin`，您`pom.xml`将在一个命令中拥有所有内容。

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-clean-plugin</artifactId>
            <version>2.5</version>
            <executions>
                <execution>
                    <id>auto-clean</id>
                    <phase>initialize</phase>
                    <goals>
                        <goal>clean</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>hibernate3-maven-plugin</artifactId>
            <version>2.2</version>
            <executions>
                <execution>
                    <id>hbm2java</id>
                    <goals>
                        <goal>hbm2java</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

如果您希望在`hibernate3-maven-plugin`之后运行，`compile`只需将目标设置为，`compile`因为它将始终在默认阶段之后运行。

因此，要使用一个命令运行所有目标，只需运行：

```
mvn compile 
```

如果您出于任何原因不想清洁，则只需键入：

```
mvn compile -Dclean.skip 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-05T01:39:29.197

您还可以为 Maven 构建定义一个**默认目标**。然后您的命令行调用将如下所示

```
mvn 
```

**定义默认目标**

将以下行添加到您的 pom.xml：

```
<build>
    <defaultGoal>clean compile hibernate3:hbm2java</defaultGoal>
</build> 
```

# webview - WebView 控制 Metro 风格 App

> ID：12819774
> 
> 赞同：0
> 
> 时间：2012-10-10T12:50:29.087
> 
> 标签：webview, microsoft-metro

如何在 Metro 风格应用程序的 webview 控件的源属性中发送带有 URL 的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:56:51.097

您只需将它们添加到 URL。

```
 source="http://myurl/?param1=hello&param2=world" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:35:34.250

或者也可以注入一个javascript文件与网页进行通信：

```
Uri uri = new Uri("ms-appx:///js/script.js");
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(uri);
string text = await FileIO.ReadTextAsync(file); //reading content as string
var script = "(function(){" + text + "})()"; 
```

# tridion - 如何创建链接到 SDL Tridion CME 中特定选项卡的上下文菜单项？

> ID：12819777
> 
> 赞同：6
> 
> 时间：2012-10-10T12:50:30.357
> 
> 标签：tridion, tridion-2011

我想使用直接链接到视图中选项卡的 GUI 扩展将项目添加到上下文菜单。

一个很好的例子是旧版本的 SDL Tridion。上下文菜单中有一个指向组件“信息”选项卡的链接，它直接在“信息”选项卡上打开组件视图。

是否可以重新创建它，如果可以，是否有任何关于如何链接到特定选项卡的示例？

我尝试将以下 JavaScript 添加到我的 tab.js：

```
var tabname = $url.getHashParam("tab")
if (tabname != '') {
    if ($j('#' + tabname)) {
        $j('#' + tabname).focus();
    }
} 
```

此代码正确触发，除了选项卡永远不会被选中。有没有一种方法可以实际选择选项卡？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T13:16:55.403

我会说你需要写两部分：

1.  命令打开弹出窗口需要向弹出窗口传递一个参数，指示要聚焦的选项卡
2.  在弹出窗口中，您需要一些 JavaScript 来识别/解析参数，然后聚焦正确的选项卡

我认为已经有很多将参数从命令传递到其弹出窗口的示例，因此将重点关注＃2。

# 在弹出窗口中选择一个选项卡

当您在 Tridion GUI 中看到选项卡时，它们通常是`Tridion.Controls.TabControl`. 如果您有在弹出窗口中运行的 JavaScript，则可以使用以下代码段获取所有选项卡控件：

```
var tab = $controls.getControl($("#MasterTabControl"), 
                               "Tridion.Controls.TabControl"); 
```

然后我们只需要在它上面选择正确的选项卡：

```
tab.selectItem('InfoTab'); 
```

我们想要关注的选项卡在哪里`InfoTab`，因此您传递到弹出窗口的参数在哪里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T14:42:12.997

感谢@Frank 的帮助和@Albert 的精彩[帖子](http://albertromkes.com/2012/01/30/tridion-gui-extensions-how-to-load-a-javascript-without-showing-a-gui-element/)，我现在在我的编辑器中添加了以下JavaScript 文件：

```
$evt.addEventHandler($display, "start", onDisplayStarted);

function onDisplayStarted() {

    $evt.removeEventHandler($display, "start", onDisplayStarted);
    var tabname = $url.getHashParam("tab");
    if (tabname != '') {
        var tabControl = $controls.getControl($("#MasterTabControl"), "Tridion.Controls.TabControl");
        tabControl.selectItem(tabname);        
    }
} 
```

结果是您现在可以将任何选项卡名称添加到 URL 或项目，它将在该选项卡上打开

例如`http://cmsserver/WebUI/item.aspx?tcm=16#id=tcm:1-46&tab=InfoTab

最后一步是将我的上下文菜单连接到这个 URL

# xcode4.5 - 将 StoryBoard 与 ZBARReaderView 一起使用时看不到 IBOUTLET

> ID：12819779
> 
> 赞同：0
> 
> 时间：2012-10-10T12:50:36.110
> 
> 标签：xcode4.5, zbar-sdk

我正在尝试使用故事板而不是 NIB 文件在 ZBar SDK 中编写嵌入式阅读器示例。我这样声明我的 IBOutlets：

```
@interface MYQViewController : UIViewController < ZBarReaderViewDelegate >
{
    ZBarReaderView *readerView;
    UITextView *resultText;
}
@property (strong, nonatomic) IBOutlet ZBarReaderView *readerView;
@property (strong, nonatomic) IBOutlet UITextView *resultText;
@end 
```

但是，当我在主服务器上创建`ZBarReaderView`视图控制器`UIView`并尝试单击并拖动以连接`readerView`作为引用插座时，我就是不知道如何连接它。我从主要获得的`ViewController`只是一个选项来选择`view`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:08:50.937

将 UIViewController 添加到您的 Storyboard。

将 UIView 添加到 UIViewController，现在您将拥有 UINavigationController > UIView > UIView。给子 UIView 您期望阅读器区域的大小。

创建一个 UINavigationController 类型的类并将以下代码添加到界面中。

```
@property (nonatomic, strong) ZBarReaderView* readerView;
@property (nonatomic, strong) IBOutlet UIView* skeletonView; 
```

将以下代码添加到实现中。

```
@synthesize skeletonView;
@synthesize readerView;

- (void)viewDidLoad {

    self.readerView = [ZBarReaderView new];
    self.readerView.readerDelegate = self;
    self.readerView.zoom = 1;

    self.readerView.frame = CGRectMake(0, 0, self.skeletonView.frame.size.width, self.skeletonView.frame.size.height);
    [self.skeletonView addSubview:readerView];
    [self.skeletonView sendSubviewToBack:readerView];
    [self.readerView start];

} 
```

将 UINavigationController 类设置为您创建的类。

将子 UIView 连接到 UIView IBOutlet。

你已经读完了，这样做你不需要破解任何东西，你可以使用按钮和消息自定义子视图。

# html - 如何在 span 元素中垂直对齐文本，或使 span 与文本大小相同？

> ID：12819781
> 
> 赞同：0
> 
> 时间：2012-10-10T12:50:38.193
> 
> 标签：html, css

这似乎是一个非常基本的问题，但我无法在任何地方找到答案。在下图中，“Schedule”一词位于跨度内的跨度中。蓝色框不是 CSS 的一部分，它是 Firebug 突出显示的矩形，显示了外部跨度的尺寸。

![在此处输入图像描述](../Images/9e4c407653c4e189e96fdceed829cb22.png)

这是HTML：

```
<span class="caption">
  <span class="green">Schedule</span>
</span> 
```

我还做了一个[jsFiddle 来说明这个问题](http://jsfiddle.net/9yu6Y/)。

两个跨度都没有填充或边距，只有一些尺寸和颜色信息。字体大小为 48px，但跨度高度计算为 65px，并且文本在此跨度中垂直居中，导致文本顶部与位于单独 HTML 元素中的时钟图标不对齐。

问题是：为什么跨度比它包含的文本高，我怎样才能（1）使它们具有相同的大小，或者（2）在跨度顶部对齐文本。我想强调一下，我**不是这样**设置跨度高度的；Firefox 正在这样做，并且不涉及填充或边距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:27:27.530

控制元素的大部分尺寸`inline`不会产生任何影响，并且通常不受支持（这将直接违背内联的意图）。您必须将 修改`display`为`inline-block`或`block`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:54:32.253

您正在寻找`line-height`房产。这决定了文本的高度 + 底部顶部。另外，请考虑将图像用作背景图像，例如：`url('<img_url>') no-repeat left center`？这也使图像居中并且您分开布局（因为此图像纯粹是为了风格）

所以：跨度需要 48px 的行高才能获得正确的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:35:24.407

制作一个 div 作为您的日程安排词的容器。

```
.container
{
display: table;
height: 200px;
width: 100px;
}

.scheduleThingaMaJig
{
display: table-cell;
vertical-align:middle;
} 
```

计划的东西应该垂直居中，水平居中只是 text-align: center on .container。你应该使用

而不是我认为。此外，如果您的目标只是与 img 对齐，您可以在 img 上添加一个维度并强制对齐，而无需按计划进行额外的顶部/​​底部空白。

# security - 如何确保我的移动应用后端不被其他应用调用？

> ID：12819784
> 
> 赞同：1
> 
> 时间：2012-10-10T12:50:44.947
> 
> 标签：security, google-app-engine, rest

我开始关注移动开发，确切地说是 Android 开发。

移动应用程序将主要是 UI，所有业务都将发生在由 Google App Engine 托管的 Web 应用程序上（我认为通信将处于静止状态）。

如何确保我的 rest api 不被任何其他软件/应用程序调用？因为任何人都可以嗅探网络，获取我的 api 调用，然后伪造他们的。如果我的 api 设计良好且完美无瑕，那应该不是问题，但肯定不会是这样。

*   登录名/密码不是解决方案，因为它可以被嗅探

*   SSL 通信也是因为用户可以为自己的应用程序使用相同的证书

我认为没有完美的方法，只有部分解决方案（比如用任何丑陋的技术隐藏证书，这样即使反编译也无济于事）。

编辑 ：

我发现了这个：[如何确保 API 请求来自我们的移动 (ios/android) 应用程序？](https://stackoverflow.com/questions/9823391/how-to-make-sure-api-requests-come-from-our-mobile-ios-android-app)

但我想知道在 Http 或 App Engine 或其他任何东西中是否已经存在这样做的方法。我真的不喜欢自己编写安全代码。

雷米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:21:20.550

似乎在大多数情况下，将 REST API 下放到用户而不是应用程序就足够了。这通常被视为一种好处，因为它允许多个应用程序轻松使用 API。

您链接到的问题仍然不完全安全，答案并没有真正告诉您如何确保它是您自己的应用程序参与注册过程。

创建防黑客的东西几乎是不可能的。通常这只是让黑客更难破解的问题，所以不值得尝试。

您可能希望在客户端上实现自定义哈希函数，从服务器->客户端发送一些数据，使用自定义函数对其进行哈希处理，然后将其发送回您的服务器。下一步是混淆此代码并添加调试器检测以使其变得困难。

真正关心安全性（即 Netflix DRM）的人会利用在各种设备上运行硬件支持的“安全操作系统”。我不确定 Apple 是否支持这一点。它可以在各种 Android 平台上使用，但最后我检查了它没有适用于它的 Android java API（你必须通过本机代码访问它）。

[http://www.globalplatform.org/mediaguidetee.asp](http://www.globalplatform.org/mediaguidetee.asp)

[http://www.globalplatform.org/specificationsdevice.asp](http://www.globalplatform.org/specificationsdevice.asp)

# java - java gc 300-400 MB/min alloc/dealloc 速率可以吗？

> ID：12819791
> 
> 赞同：1
> 
> 时间：2012-10-10T12:51:05.083
> 
> 标签：java, garbage-collection, heap-memory, visualvm

有一个 java 服务器端应用程序。线程数高达1000。该应用程序强烈使用NIO进行通信，JINI等。

您是否认为每分钟分配/取消分配 400 兆字节对于 java 应用程序来说是好的（可接受的）？

提出这个问题的原因 - 随着时间的推移，可用内存量变得越来越少：存在一些内存泄漏（每天几兆），使用的内存量也取决于要做的工作量（应用程序缓存了一些东西）。因此，可能存在 <= 100 兆可用内存的情况。GC 当然会变得疯狂，因为它的活动变得非常需要。（建议重启运行时间为生产中的一个月）

![来自 VisualVM 的堆分配统计信息](../Images/fdce926980adc8b3625b35cd7557b97a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:54:50.707

400 MB/秒的垃圾是非常糟糕的。

400 MB/分钟的垃圾对于您的应用程序来说可能是可以的。

我会尝试将 Eden 大小`-XX:NewSize=`增加到 1g、2g 或 4g，看看这是否会提高性能。

如果这比您拥有的 CPU 数量多，我会尝试估计您拥有的活动线程数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:19:26.930

> 线程数最多为 1000。

这可能太多了，IMO。根据您的平台和`-Xss`.

> 您是否认为每分钟分配/取消分配 400 兆字节对于 java 应用程序来说是好的（可接受的）？

那应该不是问题。事实上，从性能图来看，GC 看起来只是 CPU 时间的一小部分……而*这*只是可用时间的一小部分。

> 问这个问题的原因 - 随着时间的推移，可用内存量变得越来越少：存在一些内存泄漏（每天几兆），

好吧，您应该考虑追踪并修复这些泄漏。

> ... 使用的内存量也取决于要做的工作量（应用程序缓存一些东西）。

答案可能是增加堆大小。而且（令人惊讶的是）增加堆大小可以减少垃圾收集所花费的时间百分比。（虽然并发收集器和非常大的堆可能存在问题......）

> 因此，可能存在 <= 100 兆可用内存的情况。GC 当然会变得疯狂，因为它的活动变得非常需要。

是的。这很可能是您的存储泄漏的结果，而不是高分配率。随着 JVM 越来越接近 Heap 耗尽，GC 将花费越来越多的总时间来运行。这是不可避免的。（GC 大部分时间都在处理不是垃圾的对象。随着可回收空间的比例下降，回收该空间的成本会上升。）

有一个以`-XX:+UseGCOverheadLimit`JVM 开关的形式解决此问题的方法。这使用*了“在抛出 OutOfMemory 错误之前限制虚拟机在 GC 中花费的时间比例的策略”。*. 基本上，它导致不可避免的 OOME在您的服务器陷入性能不断下降的死亡螺旋*之前被抛出......*

> （建议重启运行时间为生产中的一个月）

...或修复内存泄漏！！！

# c# - LINQ 查询很慢

> ID：12819792
> 
> 赞同：8
> 
> 时间：2012-10-10T12:51:08.017
> 
> 标签：c#, .net, performance, linq

在应用程序分析期间，我发现检查模式匹配的功能非常慢。它是使用 LINQ 编写的。用循环简单地替换这个 LINQ 表达式会产生很大的不同。它是什么？LINQ 真的是一件坏事并且工作如此缓慢还是我误解了什么？

```
private static bool PatternMatch1(byte[] buffer, int position, string pattern)
{
    int i = 0;

    foreach (char c in pattern)
    {
        if (buffer[position + i++] != c)
        {
            return false;
        }
    }

    return true;
} 
```

带有 LINQ 的版本 2（由 Resharper 建议）

```
private static bool PatternMatch2(byte[] buffer, int position, string pattern)
{
    int i = 0;
    return pattern.All(c => buffer[position + i++] == c);
} 
```

带有 LINQ 的版本 3

```
private static bool PatternMatch3(byte[] buffer, int position, string pattern)
{
    return !pattern.Where((t, i) => buffer[position + i] != t).Any();
} 
```

版本 4 使用 lambda

```
private static bool PatternMatch4(byte[] buffer, int position, string pattern, Func<char, byte, bool> predicate)
{
    int i = 0;

    foreach (char c in pattern)
    {
        if (predicate(c, buffer[position + i++]))
        {
            return false;
        }
    }

    return true;
} 
```

这是大缓冲区的用法

```
const int SIZE = 1024 * 1024 * 50;

byte[] buffer = new byte[SIZE];

for (int i = 0; i < SIZE - 3; ++i)
{
    if (PatternMatch1(buffer, i, "xxx"))
    {
        Console.WriteLine(i);
    }
} 
```

调用`PatternMatch2`or`PatternMatch3`非常慢。大约需要 8 秒`PatternMatch3`， 大约需要 4 秒`PatternMatch2`，而调用`PatternMatch1`大约需要 0.6。据我了解，它是相同的代码，我看不出有什么区别。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T13:14:09.477

Mark Byers 和 Marco Mp 对额外通话开销的看法是正确的。但是，这里还有另一个原因：由于闭包导致的许多对象分配。

编译器在每次迭代时创建一个新对象，存储 的当前值`buffer`，`position`并且`i`谓词可以使用该对象。这是`PatternMatch2`显示此内容的 dotTrace 快照。`<>c_DisplayClass1`是编译器生成的类。

（请注意，数字很大，因为我正在使用跟踪分析，这会增加开销。但是，每次调用的开销相同，因此总体百分比是正确的）。

![在此处输入图像描述](../Images/82a61e8d7aa056f357e88ff84561e56e.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T12:54:41.097

不同之处在于 LINQ 版本有额外的函数调用。在 LINQ 内部，您的 lambda 函数在循环中被调用。

[虽然JIT 编译器](http://en.wikipedia.org/wiki/Just-in-time_compilation)*可能*会优化额外的调用，但不能保证它会增加一点开销。在大多数情况下，额外的开销无关紧要，但是由于您的函数非常简单并且被调用的次数非常多，因此即使是很小的开销也会很快加起来。以我的经验，LINQ 代码通常比等效循环慢一点。这就是您经常为更高级的语法付出的性能代价。`for`

在这种情况下，我建议坚持使用显式循环。

在优化这部分代码时，您可能还需要考虑更有效的搜索算法。您的算法是最坏情况 O(n*m) 但[存在更好的算法](http://en.wikipedia.org/wiki/String_searching_algorithm)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-10T13:06:53.930

好吧，让我们以 Where 运算符为例。

它的实现几乎（*）像：

```
public IEnumerable<T> Where(this IEnumerable<T> input, Func<T, bool> fn)
{
    foreach(T i in input) 
        if (fn(i))
            yield return i;
} 
```

这意味着，对于 IEnumerable 上的每个循环，都会创建一个迭代器对象 - 请注意，您有 SIZE - n 个这些分配，因为您执行了许多 LINQ 查询。

然后对于您拥有的模式中的每个字符：

1.  对枚举器的函数调用
2.  对谓词的函数调用

第二个是对委托的调用，其成本大约是典型虚拟调用的两倍（在第一个版本中，除了数组去索引之外，您没有额外的调用。

如果您真的想要粗暴的性能，您可能希望获得尽可能“旧式”的代码。在这种情况下，我什至会用一个普通的 for 替换方法 1 中的 foreach （至少如果它不能用于优化，它会使其更具可读性，因为您无论如何都在跟踪索引）。

在这种情况下，它也更具可读性，它表明 Resharper 的建议有时是值得商榷的。

(*) 我说几乎是因为它使用代理方法来检查输入可枚举是否为空，并在枚举集合之前抛出异常——这是一个小细节，不会使我之前写的内容无效，在这里突出显示为了完整性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T12:56:27.423

LINQ 应用于集合时的主要目标是其简单性。如果你想要性能，你应该完全避免使用 LINQ。同样要枚举一个数组，您只需增加一个索引变量，而 LINQ 需要设置一个完整的枚举器对象。

# bash - 如何仅用 Bash 选择性地替换字符串中的空格

> ID：12819795
> 
> 赞同：1
> 
> 时间：2012-10-10T12:51:26.777
> 
> 标签：bash

我有这个字符串：

```
str='1 2 3 var="foo bar" 4 5 6' 
```

它也可能是这样的：

```
str="1 2 3 var='foo bar' 4 5 6" 
```

`+`我如何只用内引号（双引号或单引号）替换空格？

结果应该是这样的：

```
1 2 3 var="foo+bar" 4 5 6 
```

或者

```
1 2 3 var='foo+bar' 4 5 6 
```

如果 var 是单引号的。

`var`可以是任何东西，它不是强匹配。它也可能完全丢失，如下所示：

```
str='1 2 3 "foo bar" 4 5 6' 
```

我不想使用 awk、sed 或 perl 来执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:03:13.650

逐个字符循环字符串。保留一个标志，告诉您是否在引号内。根据标志，如果需要，替换空格：

```
#! /bin/bash
str='1 2 3 var="foo bar" 4 5 6'

result=''
inside=0
for (( i=0 ; i<${#str} ; i++ )) ; do
    char=${str:i:1}
    if [[ $char == [\"\'] ]] ; then
        let inside=!inside
    fi
    (( inside )) && char=${char/ /+}
    result+=$char
done
echo $result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:57:26.573

```
$ echo $str | awk -F= '{sub(/ /,"+",$2);}1' OFS="="
1 2 3 var='foo+bar' 4 5 6 
```

使用 awk，仅在第二个字段中用 + 替换空格（第二个字段恰好是用 = 分隔的表达式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:36:19.360

这与 choroba 的答案相同，只是使用不同的技术来迭代字符串：

```
#!/bin/bash

str='1 2 3 var="foo bar" 4 5 6'
result=''
declare -i inside=0
while IFS= read -n1 char; do
    [[ $char = [\"\'] ]] && inside=!inside
    (( inside )) && char=${char/ /+}
    result+=$char
done <<< "$str"
echo "$result" 
```

# image - 将来自 tumblr 的照片帖子嵌入到外部网站

> ID：12819797
> 
> 赞同：4
> 
> 时间：2012-10-10T12:51:27.933
> 
> 标签：image, api, photo, tumblr

我正在尝试使用 tumblr 照片帖子将“无限滚动”画廊放到外部网站上。

一切正常，但我有一个大问题。

我的 foreach 函数在前 20 个结果后停止工作。无限滚动需要分页才能工作，我需要：

1.  检索所有帖子，而不仅仅是前 20 个
2.  一种从第 21 个帖子开始计数，然后在第 31 个帖子之后创建分页的方法

这是我与砌体一起使用的 php

```
<div id="container">
    <?php
        // tag filtrante
        $tag = 'conceptual';

        $api_key = 'the key';

        // preleva e decodifica il file (prende solo i post di di tipo "photo")
        $tumblr = json_decode(file_get_contents('http://api.tumblr.com/v2/blog/nofrillsintown.tumblr.com/posts/photo?api_key=' . $api_key . '&tag=' . $tag));

        // scorre tutti i post
        foreach ($tumblr->response->posts as $post) {

                // scorre tutte le immagini contenute in un post
                foreach ($post->photos as $photo) {
                        echo '<div class="item"><a href="'.$photo->original_size->url.'" rel="lightbox"><img src="'.$photo->alt_sizes[2]->url.'" /></a></div>';
                };
        };
    ?>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-25T15:54:29.807

使用`offset`参数获取20号之后的帖子：[https ://www.tumblr.com/docs/en/api/v2#posts](https://www.tumblr.com/docs/en/api/v2#posts)

```
$limit = 10;
$page = 1;
$url = 'http://api.tumblr.com/v2/blog/nofrillsintown.tumblr.com/posts/photo?api_key=' . $api_key. '&tag=' . $tag;
$url .= '&limit=' . $limit. '&offset=' . ($limit * ($page - 1)); 
```

由于 Tumblr 一次只能让您获得 20 个帖子，因此您必须多次拨打此电话。您可能应该缓存结果，而不是在每次页面加载时都进行调用。

# iphone - 创建应用更新虚拟测试环境

> ID：12819798
> 
> 赞同：0
> 
> 时间：2012-10-10T12:51:28.677
> 
> 标签：iphone, ipad, testing, app-store, updates

我想知道，是否可以创建一个**应用程序更新“虚拟测试”环境**。

**请注意，我的任何应用程序版本尚未提交到 App-store**。

我确信当用户通过 iTunes 下载应用程序更新时，它会将更新安装在新的应用程序目录中。然后它将用户的数据文件从旧安装移动到新的应用程序目录，然后再删除旧安装。Documents & Library 目录中的文件保证在更新过程中得到保留。

因此，我想为我的应用程序做一个测试用例，以验证上述有关应用程序更新的事情是否可以正常工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:57:06.410

不，更新不会在新目录中安装版本，只会替换应用程序。文档、库等不会移动。

您可以测试更新的方式是，安装旧版本（appstore 或 adhoc），然后安装新版本（ad-hoc 或在设备上的 xcode 中运行）。

由于应用程序具有相同的 bundleID，旧的将替换为新的。

# wix - Wix 补丁：自动生成 GUI 不起作用。有什么替代方法吗？

> ID：12819799
> 
> 赞同：0
> 
> 时间：2012-10-10T12:51:28.837
> 
> 标签：wix, patch

我正在使用基于[pcp 方法](http://wix.sourceforge.net/manual-wix2/patch_building.htm)的 Wix 补丁。就我而言，我可能需要生成多个补丁，包含多个产品。

如果我们生成具有相同 GUID 的补丁，则只会安装第一个，因此我们每次都必须更改 GUID。

现在 * 方法在补丁中不起作用：

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <PatchCreation
      Id="*"
      CleanWorkingFolder="yes"
      OutputPath="PID_x64_100_103_Patch_.pcp"
      WholeFilesOnly="yes"
       AllowMajorVersionMismatches="no"
       AllowProductCodeMismatches="no"        
  > 
```

我现在正在寻找一些替代方法来自动生成 GUID。是否有任何命令行工具（当然是免费软件）..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:43:06.837

由于补丁旨在仅将差异从一个版本升级到另一个版本，即 1.2 到 1.3，补丁 ID 设置为“*”是完全无效的。除非您有一个脚本来生成 pcp 文件，将最新版本与之前的版本（或另一个之前的版本）进行比较，否则您不应该自动生成 Id，您应该预先生成并手动创建 PCP 文件。

如果您需要生成 Guid，请使用在线[guid 生成器](http://www.guidgen.com/)，或者如果您安装了 Visual Studio，您可以使用使用[GuidGen.exe的 TOOLS>Create Guid](http://msdn.microsoft.com/en-us/library/kw069h38.aspx)

# javascript - GmailApp 获取电子邮件

> ID：12819802
> 
> 赞同：0
> 
> 时间：2012-10-10T12:51:35.960
> 
> 标签：javascript, scripting, google-apps-script

我正在尝试获取有关我的 Gmail 帐户的一些报告，一切看起来都很好，除非我尝试使用正则表达式。

目标是从报告中获取信息，并将其粘贴到电子表格中，但是进行一些测试时，我发现有时它不会从 gmail 中检索任何内容（如果我将电子邮件正文粘贴到电子表格上，我会看到两三个和一个空白，二十封电子邮件，又是空白），所以我得到 NULL 作为正则表达式的结果。

谁能解释我做错了什么？这是我使用 Google App 脚本引擎的第一周。

提前致谢。

这是代码。

```
function recopilarInformes() {
  var threads = GmailApp.search('label:informes');

  var messages;
  var ContentEmail;
  var reportDate,CFree,FFree;

  for (var i = 0; i < 20 /*threads.length*/; i++) {
    messages = threads[i].getMessages()
    reportDate = messages[0].getSubject().replace("Informe ","");
    ContentEmail = messages[0].getBody();

    CFree = /(\d+.\d+)\s.*GB/g(ContentEmail);
    FFree = /F<.td><td\s\w+\W+\w+.\w+.>\s(\d+.\d+)/(ContentEmail);

    Logger.log(reportDate);
    Logger.log(/(\d+.\d+)\s.*GB/g(ContentEmail));

  } 
```

编辑

我得出的结论是，尽管我不知道如何准确地使用 google app 脚本中的 gmail 对象，但正则表达式并不是实现我的目标的最佳方式。

这是当前代码

```
 function recopilarInformes() {
  var threads = GmailApp.search('label:informes');
      Logger.log(threads);
      Logger.log(threads[0].getMessages());
      Logger.log(threads[0].getMessages().length);
      var messages;// = threads[0].getMessages();
      var ContentEmail;// = messages[0].getBody();
      var reportDate,CFree,FFree;

      for (var i = 0; i < threads.length; i++) {
        messages = threads[i].getMessages()
        reportDate = messages[0].getSubject().replace("Informe ","");//creo si hubiera más mensajes en la conversación (thread) habría más entradas en este array, que ahora mismso solo contiene una cosa
        ContentEmail = messages[0].getBody();

        Logger.log(reportDate);
       // Logger.log(/(\d+.\d+)\s.*GB/g(ContentEmail));
        actualData = ContentEmail.split("------------ Espacio en las unidades -----------")[1];
        actualData = actualData.replace(/([^ 0-9,])/g,"").trim().replace(/\s+/g," ").split(" ");
        insertValue([reportDate,actualData[0],actualData[1]]);
      }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:36:07.507

使用 for in 循环。

```
function recopilarInformes() {
  var threads = GmailApp.search('label:informes');
  var message, reportDate;

  for (var i in threads) {
    message = threads[i].getMessages();
    reportDate = message[0].getSubject();

    Logger.log(reportDate);
  }
} 
```

# ruby - Ruby 在某处是否有跨平台 EOL 的常量？

> ID：12819803
> 
> 赞同：21
> 
> 时间：2012-10-10T12:51:40.480
> 
> 标签：ruby

我需要格式化一个以换行符结尾的字符串。我只想添加一个“\n”，但我希望它也可以在 Windows 上运行。许多语言都有一个常量，可以根据平台提供适当的 CR/LF/CRLF 序列，但我似乎在 Ruby 中找不到任何东西。它存在吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-10T13:15:23.287

Ruby 有四个（！）

```
p $/
p $-0
require 'English'
p $RS
p $INPUT_RECORD_SEPARATOR 
```

使用 IO#puts (= File#puts) 将负责正确的 EOL，无需手动设置。

# php - 如何使用 htmlspecialchars 但只允许特定的 HTML 代码通过而不进行转换？

> ID：12819804
> 
> 赞同：17
> 
> 时间：2012-10-10T12:51:44.473
> 
> 标签：php, htmlspecialchars

这是我拥有的代码行，效果很好：

```
$content = htmlspecialchars($_POST['content'], ENT_QUOTES); 
```

但我想做的是只允许某些类型的 HTML 代码通过而不被转换。这是我希望通过的 HTML 代码列表：

```
<pre> </pre>
<b> </b>
<em> </em>
<u> </u>
<ul> </ul>
<li> </li>
<ol> </ol> 
```

在我进行的过程中，我还希望能够在以后添加更多的 HTML，因为我想到了它。有人可以帮我修改上面的代码，以便上面指定的 HTML 代码列表可以通过而不被转换吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T12:57:39.543

我想你可以在事后做到这一点：

```
// $str is the result of htmlspecialchars()
preg_replace('#&lt;(/?(?:pre|b|em|u|ul|li|ol))&gt;#', '<\1>', $str); 
```

它允许在一组受控的允许标签中的编码版本`<xx>`和`</xx>`位置。`xx`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T12:59:34.143

或者您可以使用旧样式：

```
$content = htmlspecialchars($_POST['content'], ENT_QUOTES);

$turned = array( '&lt;pre&gt;', '&lt;/pre&gt;', '&lt;b&gt;', '&lt;/b&gt;', '&lt;em&gt;', '&lt;/em&gt;', '&lt;u&gt;', '&lt;/u&gt;', '&lt;ul&gt;', '&lt;/ul&gt;', '&lt;li&gt;', '&lt;/li&gt;', '&lt;ol&gt;', '&lt;/ol&gt;' );
$turn_back = array( '<pre>', '</pre>', '<b>', '</b>', '<em>', '</em>', '<u>', '</u>', '<ul>', '</ul>', '<li>', '</li>', '<ol>', '</ol>' );

$content = str_replace( $turned, $turn_back, $content ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-13T17:24:49.497

我改进了杰克攻击这个问题的方式。我添加了对`<br>, <br/>`和锚标签的支持。代码将替换 fist`href=&quot;...&quot;`以仅允许使用此属性。

```
$str = preg_replace(
    array('#href=&quot;(.*)&quot;#', '#&lt;(/?(?:pre|a|b|br|em|u|ul|li|ol)(\shref=".*")?/?)&gt;#' ), 
    array( 'href="\1"', '<\1>' ), 
    $str
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-17T15:18:15.117

我制作了这个函数来清理除指定的 HTML 标记之外的所有 HTML 特殊字符。

它首先使用 htmlspecialchars() 使字符串安全，然后恢复我想要不受影响的标签。

该功能支持属性过滤作为选项，但是如果您关心可能的 XSS 攻击，请小心禁用它。

我知道正则表达式效率不高，但对于中等长度的字符串应该没问题。您可以检查我在这里使用的正则表达式 [https://regex101.com/r/U6GQse/8](https://regex101.com/r/U6GQse/8)

```
public function sanitizeHtml($string, $safeHtmlTags = array('b','i','u','br'), $filterAttributes = true)
{
    $string = htmlspecialchars($string);

    if ($filterAttributes) {
        $replace = "<$1$2$4>";
    } else {
        $replace = "<$1$2$3$4>";
    }
    $string = preg_replace("/&lt;\s*(\/?\s*)(".implode("|", $safeHtmlTags).")(\s?|\s+[\s\S]*?)(\/)?\s*&gt;/", $replace, $string);

    return $string;
}

// Example usage to answer the OP question
$str = "MY HTML CONTENT"
echo sanitizeHtml($str, array('pre','b','em','u','ul','li','ol')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-11T10:17:57.503

我喜欢 Elwin 的解决方案，但您可能想要：

1.  防止 Javascript：URL 位于`href`- 或更可能：仅允许`http(s)`.
2.  如果内容中有多个`<a href>`'，则使正则表达式 glob 不贪婪。

这是更新的版本：

```
$str = preg_replace(
    array('#href=&quot;(https?://.*?)&quot;#', '#&lt;(/?(?:pre|a|b|br|em|u|ul|li|ol)(\shref=".*?")?/?)&gt;#' ), 
    array( 'href="\1"', '<\1>' ), 
    $str
); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-10-10T13:02:03.950

你可以使用 strip_tags

```
$exceptionString = '<pre>,</pre>,<b>,</b>,<em>,</em>,<u>,</u>,<ul>,</ul>,<li>,</li>,<ol>,</ol>';

$content = strip_tags($_POST['content'],$exceptionString ); 
```

# jquery - 成功的 jQuery Ajax 非常慢

> ID：12819806
> 
> 赞同：0
> 
> 时间：2012-10-10T12:51:48.197
> 
> 标签：jquery, asp.net, ajax

我有一个包含 1000 个测试项目的列表，每个项目包含 8 个属性。我的加载时间有问题。

当我加载页面时，我运行 GetListOfTestItems()。在 getTestItems() 中返回之前所需的时间不到 0.56 秒。整个页面的加载时间为 10.78 秒。在不同的浏览器中测试，结果相同 ajax 成功后它会立即加载，所以我认为额外的 10 秒来自，当服务器将结果发送回 ajax 时。如何提高加载时间？

```
 [WebMethod]
    public static List<TestItem> getTestItems()
    {
        List<TestItem> list = service.getTestItems();

        return list;
    }

function GetListOfTestItems() {
    $.ajax({
        type: "POST",
        url: 'UserProfile.aspx/getTestItems',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        error: OnAjaxError,
        success: addAnsweredQuestions

    });

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:56:49.400

第一次调用 addAnsweredQuestions 需要多长时间？可能是 ajax 调用是一条红鲱鱼，而页面上的其他东西正在减慢速度。

# arrays - 将变量从一个 WordPress 挂钩传递到另一个

> ID：12819810
> 
> 赞同：0
> 
> 时间：2012-10-10T12:52:14.750
> 
> 标签：arrays, wordpress, action, hook

我有两个 WordPress 钩子的功能：`admin_menu`和`save_post`

首先，我声明了一个关联数组，它在两个函数中都被称为全局。

在`admin_menu`函数中，我在数组末尾添加了一个额外的键和值，我希望更新后的数组可用于`save_post`函数。

```
$my_array = array(  

"key1" => "value1", 
"key2" => "value2"

);

my_admin_function() {

global $my_array;
$my_array["key3"] => "value3";

}

my_save_function() {

global $my_array;

}

add_action('admin_menu', 'my_admin_function');

add_action('save_post', 'my_save_function'); 
```

在上面的例子中，`$my_array`in`my_save_function`仍然只有 2 个键/值对。

我不知道如何让我的第三把钥匙进入`my_save_function`，所以它会被保存！

（注意：在我的完整代码中，我`my_admin_function`用来添加一个元框，它在表单字段数组中循环，然后将另一个字段添加到数组中。然后我尝试将所有字段保存在“my_save_function”中。 )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:03:33.010

好吧，你不能这样做，因为`save_post`行动发生**在** `admin_menu`行动之前。

您应该使用另一个钩子，例如`init`.

# mvvm - 实现 MVMC 和依赖注入

> ID：12819812
> 
> 赞同：8
> 
> 时间：2012-10-10T12:52:21.593
> 
> 标签：mvvm, dependency-injection

我刚刚阅读[了这篇](http://skimp-blog.blogspot.com/2012/02/mvvm-is-dead-long-live-mvvmc.html)关于 MVMC 模式的文章。现在我有一个问题。Controller应该注入ViewModel，还是ViewModel应该注入Controller？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-18T19:59:55.620

MVMC 只是一个 MVC，其中 View 被 ViewModel 对替换。

*   View 仅与 ViewModel 交互，利用基于 XAML 的技术中强大的数据绑定机制。
*   ViewModel 可以通知控制器，但绝不应该注入控制器。

我根据 MSDN 上众所周知的 Josh Smith 示例整理了一个简单的示例……我在其中介绍了一个控制器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T04:50:30.820

这取决于你在做什么。我猜测大多数时候控制器都不需要注入其中，但如果需要，则更有可能在 ViewModel 中需要它。让我解释。

你用控制器做什么？您必须在做某事。如果该“某事”仅与“数据的样子”相关，那么它属于视图。如果它与“正在向用户显示的内容”相关，那么它属于 ViewModel。

我将一个控制器注入到我的一个 ViewModel 中。我的 ViewModel 表示数据，然后在视图中绘制图形。我有一个命令将数据项从当前图表移动到新图表。由于这改变了“图形窗口中显示的内容”，我在 ViewModel 中实现了该命令。ViewModel 从它自己的项目集合中移除数据项，然后使用控制器请求为该新数据创建一个新视图（它已经具有此功能）。

查看文章，我没有看到控制器和视图之间的箭头 ![从您链接的文章中](../Images/e82b016b706a662d90e52c394e863e4c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T14:12:23.997

ViewModel 是 View 和 Controller 之间的契约，理想情况下也不需要知道（依赖）。

所以我绝对不会将控制器注入到 ViewModel 中。

我也不确定我是否会做相反的事情：控制器通常负责创建新的 ViewModel 实例。如果你想要一个更松耦合的实现，你可以将一个抽象工厂注入到 Controller 中，以避免直接创建 ViewModel 类的新实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-16T11:55:00.320

我认为 Controller**应该**作为抽象 IController 注入。ViewModel 需要 IController 才能导航到不同的 View/ViewModel。

例如，在 ViewModel 中：

```
IController _controller;

public MyViewModel(IController controller){
  _controller = controller;
}

void NavigateHome();
{
  _controller.NavigateHome();
} 
```

由于以下原因，抽象 IController 比注入 Controller 本身要好：

1.  可测试性。您可以注入一个模拟 IController 并测试 ViewModel
2.  脱钩。ViewModel 不必知道 Controller。

我开发了一个轻量级框架，用于在 WPF 中执行 MVMC。它与 Asp.NET Core 中的 MVC 有很多相似之处。

如果您正在寻找 WPF 解决方案，请查看它。

带有文档的博客文章：http: [//michaelscodingspot.com/2017/02/15/wpf-page-navigation-like-mvc-part-2-mvvmc-framework/](http://michaelscodingspot.com/2017/02/15/wpf-page-navigation-like-mvc-part-2-mvvmc-framework/)

GitHub： [https ://github.com/michaelscodingspot/WPF_MVVMC](https://github.com/michaelscodingspot/WPF_MVVMC)

# maven - 我可以在 heroku 上有一个 playframework 2.0 webapp 和一个基于 maven 的工作进程吗？

> ID：12819813
> 
> 赞同：0
> 
> 时间：2012-10-10T12:52:22.263
> 
> 标签：maven, heroku, playframework, playframework-2.0

我在 heroku 上有一个现有的 webapp，需要将消息发送到队列。我想要一个工人来挑选消息并处理它们。在阅读了[https://devcenter.heroku.com/articles/run-non-web-java-processes-on-heroku](https://devcenter.heroku.com/articles/run-non-web-java-processes-on-heroku)上的示例后，我认为通过 Procfile 运行另一个播放进程会很浪费，所以我制作了以下项目结构只使用 Maven 代替工人：

```
[git root]
   +--[play 2.0 app]
   |  + (project files)
   |  +-Procfile (web)  
   |
   +--[maven based worker]
      + (project files)
      +-Procfile (worker) 
```

现在，如果我尝试将所有这些都推送到 heroku，它会惨遭失败。Heroku 认为这是一个 play 1.2.4 项目，然后就崩溃了。当我尝试指定一个 play 2.0 buildpack 时，它显示“未检测到支持 Cedar 的应用程序”。所以很明显heroku不喜欢我的目录结构。

我希望我的 play 应用程序和我的 maven worker 共享同一个 git 存储库，如果可能的话，成为 heroku 同一个部署的一部分。有没有解决这个问题的通用模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:42:56.433

您不能在 Heroku 上的单个应用程序中混合多个构建包。相反，您可以将这一切作为 Play 2 应用程序来完成。这是一个可以帮助您入门的示例项目：
[https ://github.com/jamesward/play2-scheduled-job-demo](https://github.com/jamesward/play2-scheduled-job-demo)

# ms-access - 我无法通过 dlookup vba ms 访问将值从表传递到文本框

> ID：12819820
> 
> 赞同：1
> 
> 时间：2012-10-10T12:52:51.920
> 
> 标签：ms-access, vba

我不知道为什么我不能将`AccountType`(from `TblAccount`) 的值传递给`Me.txtWAccounType`(textbox from `WithdrawView`)。

请帮助我，这是我的代码

```
If IsNull(DLookup("[AccountId]", "TblAccount", "AccountId = '" & txtWAccountId & "'")) Then
 MsgBox "Account Number Doesn't Exist"

 Else
 Me.txtWAccounType.Value = DLookup("[AccountType]", "TblAccount", "AccountId = ' " & Forms![WithdrawView]![txtWAccountId] & "' ")
 MsgBox "Account Number Do Exist"

 End If 
```

我的目标是检索 的那个`AfterUpdate`，`AccountId. messagebox`但是弹出一个“帐号是否存在”，所以这意味着有一个值，但为什么它没有出现在 中 `Me.txtWAccounType`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:55:58.937

问题是因为没有符合条件的记录。如您所知，“123”和“123”之间存在差异，即根据您的代码在数字前有一个“空格”字符。只需替换 DLookUp如下..

```
DLookup("[AccountType]", "TblAccount", "AccountId = '" & Forms![WithdrawView]![txtWAccountId] & "'") 
```

# guava - java.lang.NoSuchMethodError: com.google.common.collect.Maps.safeGet(Ljava/util/Map;Ljava/lang/Object;)Ljava/lang/Object;

> ID：12819826
> 
> 赞同：1
> 
> 时间：2012-10-10T12:53:17.957
> 
> 标签：guava, nosuchmethoderror

我正在使用 guava-13.0.jar。它包含在类路径中。

我正在使用 netbeans Java 自由形式项目。

虽然我清理了项目，但我得到了以下异常。

```
Uncaught exception in thread main
java.lang.NoSuchMethodError: com.google.common.collect.Maps.safeGet(Ljava/util/Map;Ljava/lang/Object;)Ljava/lang/Object;
        at com.google.common.collect.StandardTable.get(StandardTable.java:117)
        at com.google.common.collect.HashBasedTable.get(HashBasedTable.java:135) 
```

有人能指出我该如何解决这个错误吗？

# google-app-engine - Google App Engine 日志下载时间过长

> ID：12819827
> 
> 赞同：1
> 
> 时间：2012-10-10T12:53:30.457
> 
> 标签：google-app-engine

我编写了一个在 Google App 上运行的应用程序，它以非常高的速率生成日志。现在我需要下载并处理它们。它在管理控制台中显示日志大约为 300MB。理想情况下，我只想处理日志的一小部分。谁能给我一些关于如何：

1.  仅下载特定时间范围内的日志条目（即日志记录的时间戳落在此范围内）。

或者

1.  如果我有大约 300Mb 的日志，那么下载它的最快方法是什么？我已经运行 appcfg.sh 命令将近一个小时，它仍在运行（现在大约有 250000 条日志记录）。有没有办法将日志分解成小块并并行下载？

非常感谢，安。

# mysql - speed up insert of sproc

> ID：12819828
> 
> 赞同：0
> 
> 时间：2012-10-10T12:53:32.680
> 
> 标签：mysql

This question is related to:

[SO question](https://stackoverflow.com/questions/12801680/insert-timestamp-values-in-3-minute-steps)

It uses this code:

```
CREATE PROCEDURE myProc(IN t1 timestamp, IN t2 timestamp)
BEGIN

  WHILE t1 <= t2 DO
INSERT INTO test (ts) Values (t1)  ;
    SET t1 = DATE_ADD(t1, INTERVAL 3 MINUTE);
  END WHILE;
END; 
```

invoke like this:

```
CALL myProc(now(), ADDDATE(NOW(), INTERVAL 15 MINUTE)); 
```

which is extremely slow. Is there any way to speed this up (e.g. do things differently)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:02:23.500

I think wrapping this in a transaction would improve things.... something like:

```
CREATE PROCEDURE myProc(IN t1 timestamp, IN t2 timestamp)
BEGIN

DECLARE EXIT HANDLER FOR SQLEXCEPTION 
BEGIN
      ROLLBACK;
END;

START TRANSACTION;

   WHILE t1 <= t2 DO
      INSERT INTO test (ts) Values (t1)  ;
      SET t1 = DATE_ADD(t1, INTERVAL 3 MINUTE);
   END WHILE;

COMMIT;

END 
```

I just threw that together and haven't tested it but I think that might help.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:26:15.647

I think you can speed-up your procedure by using temporary table. Here's the plan:

*   create tmp table
*   fill tmp table with data you want to insert
*   do **one** INSERT query that requires disk writing/index rebuilding

Somethin like this:

```
CREATE PROCEDURE myProc(IN t1 timestamp, IN t2 timestamp)
BEGIN
  CREATE TEMPORARY TABLE tmp (ts timestamp);
  WHILE t1 <= t2 DO
    INSERT INTO tmp SET ts = t1;
    SET t1 = DATE_ADD(t1, INTERVAL 3 MINUTE);
  END WHILE;
  INSERT INTO test (ts) SELECT ts FROM tmp;
  DROP TABLE tmp;
END; 
```

# android - jQuery.mobile 弹出窗口在显示后立即隐藏

> ID：12819847
> 
> 赞同：9
> 
> 时间：2012-10-10T12:54:17.347
> 
> 标签：android, jquery-mobile, backbone.js, cordova

我有一个带有 jquery mobile 和骨干网的小型 phonegap 应用程序。我试图通过手动调用 .popup() 方法向用户显示弹出窗口。

在 iOS 上一切正常，但在 android 上我遇到了奇怪的问题：弹出窗口显示了一会儿然后消失了。

这里是实际代码：

```
var PostView = Backbone.View.extend({
  events: {
    'touchend .add-comment-button': 'addComment'
  },
  addComment: function() {

    this.$(".comment-popup").popup('open', { history: false });

    return false; // Stop bubbling.
  }
}); 
```

我正在使用 history: false 因为这个弹出窗口实际上是子页面的一部分。代码看起来很简单，我只是不明白为什么它会消失，为什么这只发生在安卓设备上。

谢谢，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T17:24:58.620

我花了几个小时试图解决这个问题。

最后，我最终做了以下两件事，似乎解决了这个问题。

1 - 使用未压缩的 jqm 文件。即jquery.mobile.1.2.0.js

2 - 我使用“tap”选项以编程方式触发弹出窗口 - 一旦更改为“click”选项，它就起作用了。

```
$('.option').live('click', function() {
    $('#popup-div').popup('open');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-06T09:59:08.243

我花了几个小时试图解决这个问题。

最后，我最终做了以下两件事，似乎解决了这个问题。

此代码段可能会对您有所帮助->

```
$('#testBtn').on('tap',function(e){
   console.log("button clicked");
   e.preventDefault();
   $('#testPOPUP').popup("open");
}); 
```

请注意我用过`e.perventDefault().`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T01:20:29.353

我不想将我的 .tap() 事件更改为 click 事件，而且我没有可以使用 preventDefault() 的情况，所以我只是在 popup('open') 行中添加了一个超时。我在 jqm 中的 hoverdelay 设置为 150，所以为了安全起见，我将此超时设置为 600。工作正常，不会让用户感到呆滞。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-08T00:21:33.477

“修复”它的一种方法是`data-history="false"`在弹出 div 上进行设置

另请参阅此问题

[带有 history=false 自动关闭的 JQuery Mobile 弹出窗口](https://stackoverflow.com/questions/15830213/jquery-mobile-popup-with-history-false-autocloses)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T16:17:17.437

尝试在 android 2.3 设备（在本机浏览器和 firefox 中）上使用 popup('open') 时，我遇到了完全相同的问题，它在其他设备上的浏览器上运行良好。我还使用主干事件管理来打开我的弹出窗口（使用点击事件并且没有弹出的附加选项）。

我为“纠正”问题所做的事情是，我删除了该事件的主干事件管理，并在渲染函数中添加了一个侦听器。在您的情况下，这看起来像这样：

```
 events: {
       // 'touchend .add-comment-button': 'addComment'
    },
    render: function() {
            $(this.el).html(this.template(this.model));
            $(this.el).find('.add-comment-button').tap(function(el){
                this.addComment(el);
                return false;
            }.bind(this));
    } 
```

我不知道问题出在哪里（肯定是骨干网和 jquery mobile 之间存在一些不兼容）以及为什么我们只在 android 上看到它，但目前使用这种解决方法，我的应用程序似乎在任何设备上都可以正常工作。

编辑：哎呀，事实证明，在我的情况下，问题是我错过了“return false;” 在处理事件的函数中。现在我添加了它，它可以与主干事件管理正常工作。可悲的是，这并不能解释为什么你有这个问题以及为什么我只在 android 上看到它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T17:14:59.027

如果它可以帮助任何人，我在使用 Bing Maps 时遇到了同样的问题`Microsoft.Maps.Events.addHandler(pin, 'click', callback)`。

不是特别好，但我存储了一个 ID`pushpin._id`并执行了以下操作：

```
$("#page").on('vclick', function (event) {
    if (event.target.parentElement.className === "MapPushpinBase") {
        $("#stopPopup").popup('open');
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-02T10:35:00.653

一种蛮力选项是[检查弹出窗口是否被隐藏](https://stackoverflow.com/questions/22926840/how-do-i-check-via-jquery-if-a-jquery-mobile-popup-is-open)并重新打开。

在一个循环中，因为弹出窗口隐藏的确切时间似乎是不同的。

```
var hidden = $('#' + id + '-popup') .hasClass ('ui-popup-hidden')
if (hidden) $('#' + id) .popup ('open') 
```

一个工作示例：http: [//jsfiddle.net/ArtemGr/hgbdv9s7/](http://jsfiddle.net/ArtemGr/hgbdv9s7/)

另一种选择可能是绑定到`popupafterclose`：

```
var reopener = function() {$('#' + id) .popup ('open')}
$('#' + id) .on ('popupafterclose', reopener)
$('#' + id) .popup ('open') 
```

喜欢这里：http: [//jsfiddle.net/ArtemGr/gmpczrdm/](http://jsfiddle.net/ArtemGr/gmpczrdm/)

但由于某种原因，`popupafterclose`绑定在 iPhone 4 上的一半时间都无法触发。

# c# - 从 Prism 中的基础设施程序集绑定到静态文本

> ID：12819851
> 
> 赞同：0
> 
> 时间：2012-10-10T12:54:25.983
> 
> 标签：c#, prism

我想将视图的标题绑定到我们基础设施的标题类中的静态文本。添加一个符号前缀（例如“ **Ref** ”）并注册它的命名空间并在视图中使用它我想要的是实现与此类似的东西：

**第1部分：**

```
xmlns:Ref="clr-namespace:Xz.Infrastructure;assembly=Xz.Infrastructure" 
```

**第2部分：**

```
<TextBlock Text="{Binding Titles.Title1}" /> 
```

希望有一种更类似于：

```
<TextBlock Text="{Binding Ref:Titles.Title1}" /> 
```

请纠正我。

**第 3 部分：**

```
namespace Xz.Infrastructure
{
    public class Titles
    {
        public static string Title1 = "Title1";
        public static string RgnContent = "RgnContent";
    }
} 
```

*   我们的**基础设施**没有被定义为一个模块，它只是一个程序集。
*   该项目正在使用 Unity。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:58:41.497

您可以尝试使用此代码

```
{Binding Source={x:Static MyNamespace:MyStaticClass.MyStaticStringField}} 
```

所以

```
<TextBlock Text="{Binding Source={x:Static Xz.Infrastructure:Titles.Title1}}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:58:50.873

由于这是一个静态字符串，您可以简单地使用：

```
<TextBlock Text="{x:Static Ref:Titles.Title1}"/> 
```

如果你真的想要这个绑定和支持的更改通知等，看看[这个](https://stackoverflow.com/a/936331/1416220)

# c# - 如何根据值启用/禁用 VB.Net 中的按钮？

> ID：12819855
> 
> 赞同：-2
> 
> 时间：2012-10-10T12:54:41.550
> 
> 标签：c#, .net, vb.net, visual-studio

我需要禁用我的按钮 while `dzien=0`，并启用 while `dzien >0`。

当我启动应用程序时，day 是 0 还是 102938129038 都没有关系，按钮仍然处于禁用状态。我的代码有什么问题？

```
Imports System.IO.IsolatedStorage
Partial Public Class Page1
Inherits PhoneApplicationPage
Private dzien As Integer
Public Sub New()
    InitializeComponent()
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button1.Click
    IsolatedStorageSettings.ApplicationSettings("dzien") = dzien
    Try
        dzien = CInt(IsolatedStorageSettings.ApplicationSettings("dzien"))
    Catch ex As KeyNotFoundException
        dzien = 0
    End Try
    If dzien = 0 Then
        dzien = dzien + 1
    End If
    NavigationService.Navigate(New Uri("/2.xaml", UriKind.Relative))
End Sub
Private Sub Class_1_loaded(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) Handles Me.Loaded
    If dzien = 0 Then
        Button2.IsEnabled = False
    Else
        Button2.IsEnabled = True
    End If

End Sub
Private Sub Button2_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button2.Click

    dzien = dzien + 1

    NavigationService.Navigate(New Uri("/2.xaml", UriKind.Relative))
End Sub
End Class 
```

我不确定是否

```
If dzien = 0 Then
    dzien = dzien + 1
End If 
```

运作良好，并且

```
dzien = dzien + 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:59:22.207

```
Private Sub Class_1_loaded(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) Handles Me.Loaded
If dzien = 0 Then
   Button2.Enabled = False
Else 
   Button2.Enabled = True
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:43:00.947

我不确定，但如果`.ENABLED`和`.ISENABLED`不一样，我认为这就是问题所在......

# google-app-engine - GoLang / Google App Engine - 目录结构

> ID：12819859
> 
> 赞同：5
> 
> 时间：2012-10-10T12:54:53.247
> 
> 标签：google-app-engine, directory, go, structure

我开始使用 GoLang 和 GAE 开发应用程序，但我很难找出如何布局文件。到目前为止，这就是我整理 GoLang 文件的方式（在使用 GAE 之前）

```
-golang
--bin
--pkg
--src
---breinbaas.nl
----lib
-----package1
-----package2 
```

如果我想为 GAE 开发一个应用程序，我想把它放到

```
-golang
--src
---breinbaas
----deploy
-----mygae_app 
```

但是我怎样才能使用 lib 目录中的文件呢？

有没有办法使用 golang/src/breinbaas/lib 目录下的 go 文件？我不断收到未找到包的错误，解决此问题的唯一方法是将 lib 目录复制到 golang/src/breinbaas/deploy/mygae-app 但这意味着将源文件复制到多个位置，这是非常糟糕的为了一致性。

提前谢谢！抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:48:45.257

Go App Engine SDK 当前不支持从您的 GOPATH 上传包，因此目前复制是您唯一的选择。

随意在[Google App Engine 问题跟踪器](http://code.google.com/p/googleappengine/issues/entry?template=Go%20defect)上创建一个关于此的问题。

# php - Magento Multishipping 结帐不会通过运输方式

> ID：12819863
> 
> 赞同：0
> 
> 时间：2012-10-10T12:55:06.120
> 
> 标签：php, magento, checkout

我在 Magento 1.6.1 中的多次运输结账时遇到问题。当客户继续结帐并进入 Shipping.phtml 页面时，他们在该页面选择了运输选项和费用，他们可以继续结帐的计费阶段而无需选择运输方式。我想将此作为结帐时的必填字段。然而，另一个问题是，即使客户选择了运输方式，它也不会在结账结束时添加到总计中。有没有人知道为什么会发生这种情况以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:18:49.183

运输方式是必填字段，其成本将添加到默认 Magento 安装中的总计和结帐结束时。我猜你的模板中有一个或多个自定义编辑，或者安装了一些扩展，这会产生这种行为。切换回默认模板并暂时禁用非核心扩展以查看它是否按预期工作。然后一一重新启用停用的扩展程序。

# nuget - NuGet 打包和引用 dll

> ID：12819868
> 
> 赞同：7
> 
> 时间：2012-10-10T12:55:21.917
> 
> 标签：nuget, nuget-package

**背景：** 我有两个名为“A”和“B”的程序集。“A”引用“B”。“A”还引用了一些我认为应该打包在 nupkg 中的附加 dll（Microsoft.Enterprise Library.Data 和 Microsoft Enterprise Library.Common）。

我相信我的 nupkg 包应该包含来自“A”、“B”和两个“Microsoft Enterprise”程序集的程序集输出，这样当有人安装我的包时，它会给他们直接引用程序集“A”和其他三个程序集将可用（但不直接引用，以便他们的应用程序可以运行。打包非引用 dll 的正确方法是什么？

**尝试 #1：将所有必需的 dll 打包在 \net35 文件夹中** 根据[有关“references”](http://docs.nuget.org/docs/reference/nuspec-reference#Specifying_Dependencies_in_version_2.0_and_above)元素的 NuGet 文档，“如果省略此元素，则应用通常的行为，即引用 lib 文件夹中的每个程序集。”

因此，我假设通过使用此元素，它将仅包含指定为引用的程序集。如果我还使用“文件”元素，情况似乎并非如此`<file src=*.dll" target="lib\net35" />`。如果我有一个这样的元素，它将所有 dll 复制到包中，它会导致实现此包的程序集引用 \net35 目录中的所有程序集。这不是我想做的。我希望只有“引用”中指定的程序集才会被实际引用，而所有其他程序集都将保留在展开的 \packages 文件夹中，并且应用程序可以工作，因为所有 dll 都位于同一目录中。可能我说的不对......

**尝试 #2 添加为项目** 的内容我们将它们检查到源代码控制中。这可以按我的意愿工作、编译和运行，但是，我真的不希望这些存储在项目的 \lib 文件夹中。

我正在寻找一个解决方案，其中项目获得对“A”的引用，并且仍然可以与位于同一位置但不直接引用的其他所需程序集一起运行。看起来尝试 #1 是正确的路径，但可能存在错误？

仅供参考，我直接将其[作为 NuGet 的问题](http://nuget.codeplex.com/workitem/2704)输入，以查看团队也有答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T19:46:05.317

这是 Nuget 2.1 中引入的一个错误，后来在 2012 年 12 月发布的 Nuget 版本 2.2 中得到了修复。

在原始发布中使用尝试 #1 现在可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T07:17:12.417

我认为您的“尝试1”不会在实践中起作用。如果您只引用“A”。当你构建你的包时，只有“A”会被复制（默认）到输出目录。然后，当您分发应用程序时，只会存在“A”，从而导致错误。

您应该引用所有 DLL 以使您的应用程序运行（或提出另一种解决方案，该解决方案将自动将引用的 DLL 复制到输出目录，但我不确定不直接指定引用有多大价值）。由于您只有几个 DLL，因此最好省略引用部分，以便从 lib 文件夹中自动引用所有 DLL。

# iphone - 搜索时从 UITableView 中删除索引

> ID：12819870
> 
> 赞同：0
> 
> 时间：2012-10-10T12:55:28.117
> 
> 标签：iphone, ios, uitableview, uisearchbar

我有一个 UITable 以便在一些数据（时区）中进行搜索。我的问题是，当覆盖视图出现时，索引仍然显示。

如图下面的“？” 显示字符并且可以启用索引。搜索时是否可以禁用它并激活覆盖？如何？

![在此处输入图像描述](../Images/4c705f7bf5bf21cfa2ba147b34a5b664.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:34:53.463

从顶部降低 UITableView 的高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:53:55.983

你使用 UISearchDisplayController 吗？

```
 - (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    return (([[self.fetchedResultsController sectionIndexTitles] count] > 5) ? [self.fetchedResultsController sectionIndexTitles]:nil);
} 
```

当我有超过 5 个结果时我会显示它

这也是 UITableViewDataSource 的一种方法。您需要在您实现 ex 的标头中实现并指定：

```
UITableViewController<NSFetchedResultsControllerDelegate, UISearchBarDelegate, UISearchDisplayDelegate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:55:06.977

作为`sectionIndexTitlesForTableView`回报`nil`，当您的搜索栏处于活动状态时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:04:23.270

您是否在显示搜索表视图时刷新基础表视图？如果你是，试着阻止它。我有一个类似的问题，我可以通过这种方式解决。

# php - $GLOBALS["argv"] 和 $argv 为空，$_SERVER["argv"] 就好了

> ID：12819877
> 
> 赞同：4
> 
> 时间：2012-10-10T12:55:55.273
> 
> 标签：php

我正在与在 Hostgator 共享主机上运行的 PHP CLI 的一个（可能）简单问题作斗争。一个简单的代码：

```
<?php
var_dump($argv);
var_dump($GLOBALS["argv"]);
var_dump($_SERVER["argv"]);
var_dump(ini_get("register_argv_argv"));
?> 
```

当在我的本地机器以及其他几个 php 实例上运行时：

```
php test.php arg1 
```

如预测的那样正确输出：

```
array (
  0 => 'test.php',
  1 => 'arg1'
)
array (
  0 => 'test.php',
  1 => 'arg1'
)
array (
  0 => 'test.php',
  1 => 'arg1'
)
1 
```

但是从 Hostgator 共享主机上的 cron 运行它输出：

```
array (
)
NULL
array (
  0 => 'test.php',
  1 => 'arg1'
)
1 
```

我正在使用的代码是遗留代码，并且严重依赖 $GLOBALS["argv"] 来解析命令行参数。我无法修改整个代码库以改为依赖 $_SERVER["argv"] 。

为什么我的所有 PHP 实例都用命令行参数填充所有数组，而 Hostgator 上的托管 php 根本不填充 $GLOBALS["argv"] 可能是什么原因？

我做了一个解决方法来解决这个问题，但是当我不知道为什么会发生某些事情时我讨厌:)

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T23:56:03.093

我有同样的问题没有`$_SERVER['argv'];`

尝试`php-cli`代替`php`：

```
$job = "* * * * * php-cli /home/user/file.php surf"; 
```

它对我有用！

# java - 安卓 youtube 播放器

> ID：12819884
> 
> 赞同：0
> 
> 时间：2012-10-10T12:56:06.383
> 
> 标签：java, android, youtube, youtube-api

我想在我的应用程序中有一个 youtube 播放器，我可以在其中调整 youtube 的网址，例如[http://www.youtube.com/watch?v=](http://www.youtube.com/watch?v=) "yt_id" yt_id 是一个字符串。

我已经尝试过 webview，但我得到了两秒钟的加载屏幕，然后是黑屏

我试过videoview，但你需要一个来自youtube的RTSP代码，但我找不到一个可以将youtube标准网址更改为RTSP的好代码。

由于各种原因，不能自行访问 youtube 应用程序。

并且 api 3.0 还没有推出。

任何人都可以帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:01:36.830

我也有同样的问题，但现在 youtube 对我来说很好用。

检查以下链接。

[YouTube 视频未在 WebView 中播放 - Android](https://stackoverflow.com/questions/12708890/youtube-video-not-playing-in-webview-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T10:49:39.190

您可以按照此代码获取 youtube 视频的 RTSP 链接

```
 public static String getUrlVideoRTSP(String urlYoutube)
    {
        try
        {
            String gdy = "http://gdata.youtube.com/feeds/api/videos/";
            DocumentBuilder documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            String id = extractYoutubeId(urlYoutube);
            URL url = new URL(gdy + id );
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            Document doc = documentBuilder.parse(connection.getInputStream());
            org.w3c.dom.Element el =  doc.getDocumentElement();
            NodeList list = el.getElementsByTagName("media:content");///media:content
            String cursor = urlYoutube;
            for (int i = 0; i < list.getLength(); i++)
            {
                Node node = list.item(i);
                if (node != null)
                {
                    NamedNodeMap nodeMap = node.getAttributes();
                    HashMap<String, String> maps = new HashMap<String, String>();
                    for (int j = 0; j < nodeMap.getLength(); j++)
                    {
                        Attr att = (Attr) nodeMap.item(j);
                        maps.put(att.getName(), att.getValue());
                    }
                    if (maps.containsKey("yt:format"))
                    {
                        String f = maps.get("yt:format");
                        if (maps.containsKey("url"))
                        {
                            cursor = maps.get("url");
                        }
                        if (f.equals("1"))
                            return cursor;
                    }
                }
            }
            return cursor;
        }
        catch (Exception ex)
        {
            Log.e("Get Url Video RTSP Exception======>>", ex.toString());
        }
        return urlYoutube;

    }
protected static String extractYoutubeId(String url) throws MalformedURLException
    {
        String id = null;
        try
        {
            String query = new URL(url).getQuery();
            if (query != null)
            {
                String[] param = query.split("&");
                for (String row : param)
                {
                    String[] param1 = row.split("=");
                    if (param1[0].equals("v"))
                    {
                        id = param1[1];
                    }
                }
            }
            else
            {
                if (url.contains("embed"))
                {
                    id = url.substring(url.lastIndexOf("/") + 1);
                }
            }
        }
        catch (Exception ex)
        {
            Log.e("Exception", ex.toString());
        }
        return id;
    } 
```

* * *

```
videoUrl = getUrlVideoRTSP(youtube_url); 
```

获得 RTSP 链接后，您可以在视频视图中播放该链接。希望它对您有用，因为它在我的应用程序中有效。谢谢。

# xcode - 命名空间“std”中没有名为“shared_ptr”的类型

> ID：12819886
> 
> 赞同：4
> 
> 时间：2012-10-10T12:56:12.627
> 
> 标签：xcode, bdd, shared-ptr, cedar-bdd

希望这对其他人有帮助

尝试使用 Cedar BDD 编译 iOS 项目一直失败，在命名空间“std”错误消息中没有名为“shared_ptr”的类型。这显然是一个 C++ 错误，但无法理解为什么 Xcode 使用的 C++ 库没有定义；直到我发现目标的构建设置提供了两个库可供选择时才定义 shared_ptr 类型

*   libstdc++（编译器默认）
*   libc++

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T12:56:12.627

选择 libc++ 解决了这个问题，看截图![Xcode 4.4 构建设置窗口](../Images/9ed891d630cc6683b591e9e633b7f52c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T23:43:43.620

Apple 发布了一个**非常**旧的 libstdc++ 版本，它不支持 C++11，所以如果你使用 libstdc++，你就不能使用 C++11 的特性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-14T03:08:57.747

在xcode中你必须使用`#include <memory>`，你不能使用`#include <memory.h>`。请检查这个。

# ajax - 使用 AJAX 的 MVC4 移动网站（Razor 视图引擎）中的 URL 问题

> ID：12819890
> 
> 赞同：0
> 
> 时间：2012-10-10T12:56:21.753
> 
> 标签：ajax, c#-4.0, asp.net-mvc-4

我正在 MVC4 中开发一个移动网站（使用 Razor 视图引擎）。我面临的问题是，当我使用 RedirectToAction() 方法导航到不同的视图时，会提供新视图，但浏览器中的 URL 保持不变。

我对其进行了搜索，发现如果我在我的页面上禁用 AJAX（通过设置属性 [data-ajax=false]）然后它开始正常工作（即显示正确的 URL）。但是 Ajax 停止工作。

但我的问题是我无法为移动网站禁用 AJAX，我需要为每个页面显示正确的 URL。

编辑：

```
[HttpPost]
public ActionResult Search(string btnSelection)
{
  //Some code here... 
  //Then redirect to another View using following command:
  return RedirectToAction("SelectTask", "Task");
} 
```

但要在 MVC4 移动设备中实现正确的 URL 显示，我必须在 View 中设置以下属性：

```
@using (Html.BeginForm("Search", "Task", FormMethod.Post, new { data_ajax = false })) 
```

但这会阻止 AJAX。任何想法如何使用 AJAX 解决这个问题？

如果可以的话，请尽快提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:00:52.867

Ajax 不是用来导航的。如果您有要保存的数据或使用链接（例如`@Html.ActionLink("Home", "Index", "Home")`）重定向到其他视图，则必须提交表单。

# cucumber - 为 Cucumber 打包一个 gemfile

> ID：12819893
> 
> 赞同：2
> 
> 时间：2012-10-10T12:56:28.737
> 
> 标签：cucumber, bundler

我有这个文件：

来源：rubygems

gem 'sinatra', '1.3.1' group : development do gem 'rspec', '2.7.0' gem 'cucumber', '1.1.3' gem 'capybara', '1.1.2' end

我正在尝试从 cmd.exe 运行命令： bundle 以从该文件安装 gem。屏幕上显示消息：“找不到 Gemfile”。

该命令必须从项目的根目录运行，但我不知道为什么它不起作用。这是我的项目“C:\Test\Cash Withdrawal”，我在这里有 Gemfile，但不起作用。请告诉我必须将 Gemfile 放在哪里以及必须从哪个目录运行 gemfile。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:18:49.463

Bundle 命令需要一个文件名“Gemfile”。因此，如果您的项目目录是“C:\Test\Cash Withdrawal”，请确保遵循

*   您在“C:\Test\Cash Withdrawal”目录中有一个文件名“Gemfile”。
*   执行“捆绑安装”时，您的当前目录是“C:\Test\Cash Withdrawal”。

# javascript - jqPlot X轴渲染

> ID：12819909
> 
> 赞同：1
> 
> 时间：2012-10-10T12:57:19.640
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jqplot

我已经将 jquery datepicker 小部件与 jqplot 结合在一起，并使用 datepicker 的值在发生变化时重新创建绘图。

但是，在较大的日期范围内，x 轴上的标签会一起运行，看起来非常难看。

这是定期的： ![在此处输入图像描述](../Images/20ba6d614a9988f9cea7e957426032ae.png)

这是一个很大的范围： ![在此处输入图像描述](../Images/5969ecba4b8ba1e958115a86e0aed5f6.png)

我的问题是——是否可以更改轴的渲染，所以如果不是每个日期都显示的范围很大？可能是 2 或 3，但总是包括开始日期和结束日期。

这是我的代码-如果您能提供帮助，请告诉我！

```
 $(document).ready(function(){

                            var ajaxDataRenderer = function(url, plot, options) {
                                var ret = null;
                                $.ajax({
                                    async: false,
                                    url: url,
                                    type: "GET",
                                    dataType:"json",
                                    data: {metricName: ""},
                                    success: function(data) {
                                        ret = data;
                                    },
                                    error:function (xhr, ajaxOptions, thrownError){
                                        alert(xhr.responseText);
                                    }    
                                });
                                return ret;
                            };

                            //var jsonurl = "reports/reportData.json";
                            var jsonurl = "tenant/metrics/get.json";

                            var currentTime = new Date()
                            var month = currentTime.getMonth() + 1;
                            var day = currentTime.getDate();
                            var year = currentTime.getFullYear();
                            var today = month + "-" + day + "-" + year;

                            var currentDatePlus = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
                            var dayPlus = currentDatePlus.getDate()
                            var monthPlus = currentDatePlus.getMonth() + 1
                            var yearPlus = currentDatePlus.getFullYear()
                            var tomorrow = monthPlus + "/" + dayPlus + "/" + yearPlus;

                            function getLastWeek(){
                                var today = new Date();
                                var lastWeek = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7);
                                return lastWeek ;
                            }

                            var lastWeek = getLastWeek();
                            var lastWeekMonth = lastWeek.getMonth() + 1;
                            var lastWeekDay = lastWeek.getDate();
                            var lastWeekYear = lastWeek.getFullYear();

                            var lastWeekDisplay = lastWeekMonth + "/" + lastWeekDay + "/" + lastWeekYear;

                            var datepickerBegin = $("#datepicker_start").val();
                            var datepickerEnd = $("#datepicker_to").val();

                            $('#applyBtn').click( function() {
                                // Check to make sure the datepicker isn't empty
                            if ($("#datepicker_start").val() !== "" && $("#datepicker_to").val() !== "") {

                                var datepickerBegin = $("#datepicker_start").val();
                                var datepickerEnd = $("#datepicker_to").val();

                                        //Recreate the plot
                                        var plot2 = $.jqplot('chart2', jsonurl,{
                                        title: "",
                                        dataRenderer: ajaxDataRenderer,
                                        dataRendererOptions: {unusedOptionalUrl: jsonurl},
                                        axes: {
                                            xaxis: {
                                                //'numberTicks' : 7,
                                                min: datepickerBegin,
                                                max: datepickerEnd,
                                                renderer:$.jqplot.DateAxisRenderer,
                                                rendererOptions:{tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                                                tickInterval: '1 day',
                                                tickOptions:{formatString:'%#m/%#d/%Y'

                                                }
                                                //rendererOptions: {sdaTickInterval: [1, 'month']}

                                            },
                                            yaxis: {
                                                label: "MB",
                                                tickOptions:{formatString:'%d '},
                                                // Comment the next line out to allow negative values (and therefore rounded ones)
                                                min: 0
                                            }

                                        },
                                        highlighter: {
                                            show: true,
                                            sizeAdjust: 7.5
                                        }
                                    });
                                //redraw the plot now.
                                //plot2.reInitialize({});
                                plot2.replot({});

                                }
                            })

                            // The default plot

                            var plot2 = $.jqplot('chart2', jsonurl,{
                                title: "",
                                dataRenderer: ajaxDataRenderer,
                                dataRendererOptions: {unusedOptionalUrl: jsonurl},
                                axes: {
                                    xaxis: {
                                        //'numberTicks' : 7,
                                        min: lastWeekDisplay,
                                        max: tomorrow,
                                        renderer:$.jqplot.DateAxisRenderer,
                                        rendererOptions:{tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                                        tickInterval: '1 day',
                                        tickOptions:{formatString:'%#m/%#d/%Y'
                                        }
                                        //rendererOptions: {sdaTickInterval: [1, 'month']}

                                    },
                                    yaxis: {
                                        label: "MB",
                                        tickOptions:{formatString:'%d '},
                                        // Comment the next line out to allow negative values (and therefore rounded ones)
                                        min: 0
                                    }

                                },
                                highlighter: {
                                    show: true,
                                    sizeAdjust: 7.5
                                }
                            });

                        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:59:41.323

好的 - 我对这个问题有了更好的把握。

我已经使用“numberTicks”属性限制了刻度数，因此如果日期范围超过特定值，它就有一个特定的数字。

剩下的唯一问题是，对于 numberTicks，交叉点并不总是正确的（这意味着在 x 轴 10/05/12 上，当 numberTicks 受到限制时，值并不总是放置在那里。

# javascript - 双 getElementsByTagName

> ID：12819912
> 
> 赞同：0
> 
> 时间：2012-10-10T12:57:26.570
> 
> 标签：javascript, html

我遇到了无法缩小 getElementsByTagName 范围的问题。

这就是我正在做的

```
<!DOCTYPE html>
<html>
<head>
<script>
function getElements()
{
    var t = document.getElementById("t");
    var x = t.getElementsByTagName("table");
    //var f = x.getElementsByTagName("td");
    alert(x.length);
}
</script>
</head>
<body>
<div id="t">
    <table class="x">
        <td class="f">
        </td>
    </table>
</div>
<input type="button" onclick="getElements()" value="How many input elements?">
</body>
</html> 
```

以上工作，带回1。

虽然当我改变这个。

```
var f = x.getElementsByTagName("td");
alert(f.length); 
```

它破坏了脚本。

当我无法使用 2 个 TagNames 时，如何缩小范围？

**更新：我的错，我在发布后意识到它必须在 var 之后有 [0]。**

```
var t = document.getElementById("t");
var x = t.getElementsByTagName("table");
var f = x[0].getElementsByTagName("td");
var u = f[0].getElementsByTagName("div");
alert(f.length);
alert(u[0].className); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:01:29.217

那是因为`getElementsByTagName`总是返回一个数组，即使只有一个元素。

如果你这样做`var f = x[0].getElementsByTagName("td");`，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:00:31.160

那么节点列表对象上没有`getElementsByTagName`函数。也就是说，您的第一次调用`getElementById()`返回一个 DOM 元素，因此`getElementsByTagName()`从该结果调用有效。但是，第二个调用返回一个节点列表（一个 HTMLCollection），它没有这样的方法。

如果要`<td>`在所有表中累积所有元素的列表，则必须明确编码。遍历第一次调用的结果（`<table>`元素列表），并累积对`getElementsByTagName("td")`每个列表的每个元素的调用结果。（节点列表的元素是 DOM 元素，因此可以使用）。

# .net - 如何在 DevExpress WPF TreeListControl 中获得焦点或选定值？

> ID：12819913
> 
> 赞同：1
> 
> 时间：2012-10-10T12:57:27.223
> 
> 标签：.net, wpf, devexpress, treelist

我正在使用 DevExpress TreeListControl：

```
void TreeListView_FocusedRowChanged(object sender, FocusedRowChangedEventArgs e) {
    string val;
    PropertyInfo[] properties =  e.NewRow.GetType().GetProperties();
    foreach (PropertyInfo item in properties) {
        string x =  item.Name;
        if (x == "Id") {
            var barProperty = item.GetType().GetProperty("Id");
            if (barProperty != null) {
                object[] obj = new Object[0];
                val = item.GetValue(sender, obj) as string;
            }
        }
    }
} 
```

如何获取选定的行值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:40:39.247

根本不需要使用反射。您可以使用[TreeListView.FocusedNode](http://help.devexpress.com/#WPF/DevExpressXpfGridTreeListView_FocusedNodetopic)属性和[TreeListView.GetNodeValue](http://help.devexpress.com/#WPF/DevExpressXpfGridTreeListView_GetNodeValuetopic)方法：

```
object id = treeListView.GetNodeValue(treeListView.FocusedNode,"Id"); 
```

# c# - 使用 Microsoft 解决方案基础定义目标

> ID：12819916
> 
> 赞同：18
> 
> 时间：2012-10-10T12:57:42.570
> 
> 标签：c#, ms-solver-foundation, numerical-integration

**计划目的：整合。**我正在为高维（高达 100）实现自适应正交（又名数值积分）算法。这个想法是通过使用与该点的误差估计成比例的采样密度来评估点，将体积随机分成更小的部分。早期我“老化”了一个均匀的样本，然后根据估计误差的高斯分布随机选择点。以类似于模拟退火的方式，我“降低温度”并随着时间的推移降低我的高斯标准偏差，因此低误差点最初有一个公平的机会被选择，但后来被选择为稳步下降可能性。这使程序能够偶然发现由于误差函数的缺陷而可能遗漏的尖峰。（我的算法在精神上类似于**马尔可夫链蒙特卡洛积分**。）

**功能特点。**要集成的功能是估计因自然灾害导致的多栋建筑物的保险单损失。保单功能不流畅：有免赔额、最高赔付、分层（如损失100万美元零赔付、1-200万美元100%赔付、200万美元以上零赔付）等奇数保单条款。这引入了在许多平面上没有导数的非线性行为和函数。在策略函数之上是破坏函数，它因建筑物类型和飓风强度而异，绝对不是钟形的。

**问题上下文：错误函数**。困难在于选择一个好的误差函数。对于每个点，我都记录了似乎对此有用的度量：函数的大小，由于先前的度量（一阶导数的代理）而改变了多少，该点占据的区域的体积（更大的体积可以更好地隐藏错误），以及与区域形状相关的几何因素。我的误差函数将是这些度量的线性组合，其中每个度量被分配不同的权重。（如果我得到不好的结果，我会考虑非线性函数。）为了帮助我完成这项工作，我决定对每个权重的各种可能值进行优化，因此微软解决方案基金会。

**优化什么：错误等级**。我的度量是标准化的，从零到一。随着集成的进行，这些错误值会逐渐修改，以反映函数值、更改等的最近平均值。因此，我不是试图创建一个产生实际错误值的函数，而是产生一个排序相同的数字真正的误差，即如果所有采样点都按这个估计的误差值排序，它们应该收到一个类似于如果按真正的误差排序时它们将收到的排名。

并非所有点都是平等的。我非常关心具有 #1 真实错误的点区域是否排名 #1000（反之亦然），但很少关心 #500 点是否排名 #1000。我衡量成功的标准是在算法执行的中途将多个区域的以下总和最小化：

ABS(Log2(trueErrorRank) - Log2(estimatedErrorRank))

对于 Log2，我使用了一个函数，它返回小于或等于该数字的 2 的最大幂。从这个定义，得出有用的结果。交换#1 和#2 需要一分，但交换#2 和#3 不需要任何费用。这具有将点分层为两个范围的幂的效果。在一个范围内交换的点不会添加到函数中。

**我如何评价**。我已经构建了一个名为**Rank**的类来执行此操作：

1.  按真实错误对所有区域进行一次排名。

2.  对于每组单独的参数化权重，它计算该区域的试验（估计）误差。

3.  按该试验错误对区域进行排序。

4.  计算每个区域的试验等级。

5.  将两个等级的对数的绝对差相加，并将其称为参数化的值，因此要最小化的值。

**C# 代码**。完成所有这些后，我只需要一种方法来设置 Microsoft Solver Foundation 来为我找到最佳参数。语法让我难住了。这是我到目前为止的 C# 代码。在其中，您将看到*对我已确定的三个问题的评论*。也许你可以发现更多！**任何想法如何使这项工作？**

```
public void Optimize()
{
    // Get the parameters from the GUI and figures out the low and high values for each weight.
    ParseParameters();

    // Computes the true rank for each region according to true error.
    var myRanker = new Rank(ErrorData, false);

    // Obtain Microsoft Solver Foundation's core solver object.
    var solver = SolverContext.GetContext();
    var model = solver.CreateModel();

    // Create a delegate that can extract the current value of each solver parameter
    // and stuff it in to a double array so we can later use it to call LinearTrial.
    Func<Model, double[]> marshalWeights = (Model m) =>
    {
        var i = 0;
        var weights = new double[myRanker.ParameterCount];
        foreach (var d in m.Decisions)
        {
            weights[i] = d.ToDouble();
            i++;
        }
        return weights;
    };

    // Make a solver decision for each GUI defined parameter.
    // Parameters is a Dictionary whose Key is the parameter name, and whose 
    // value is a Tuple of two doubles, the low and high values for the range.
    // All are Real numbers constrained to fall between a defined low and high value.
    foreach (var pair in Parameters)
    {
        // PROBLEM 1! Should I be using Decisions or Parameters here?
        var decision = new Decision(Domain.RealRange(ToRational(pair.Value.Item1), ToRational(pair.Value.Item2)), pair.Key);
        model.AddDecision(decision);
    }

    // PROBLEM 2! This calls myRanker.LinearTrial immediately, 
    // before the Decisions have values. Also, it does not return a Term.
    // I want to pass it in a lambda to be evaluated by the solver for each attempted set
    // of decision values.
    model.AddGoal("Goal", GoalKind.Minimize,

        myRanker.LinearTrial(marshalWeights(model), false)
    );
    // PROBLEM 3! Should I use a directive, like SimplexDirective? What type of solver is best?
    var solution = solver.Solve();
    var report = solution.GetReport();
    foreach (var d in model.Decisions)
    {
        Debug.WriteLine("Decision " + d.Name + ": " + d.ToDouble());
    }
    Debug.WriteLine(report);

    // Enable/disable buttons.
    UpdateButtons();
} 
```

更新：我决定寻找另一个库作为后备，并找到了 DotNumerics ( [http://dotnumerics.com/](http://dotnumerics.com/) )。他们的 Nelder-Mead Simplex 求解器很容易调用：

```
 Simplex simplex = new Simplex()
    {
        MaxFunEvaluations = 20000,
        Tolerance = 0.001
    };
    int numVariables = Parameters.Count();
    OptBoundVariable[] variables = new OptBoundVariable[numVariables];

    //Constrained Minimization on the intervals specified by the user, initial Guess = 1;
    foreach (var x in Parameters.Select((parameter, index) => new { parameter, index }))
    {
        variables[x.index] = new OptBoundVariable(x.parameter.Key, 1, x.parameter.Value.Item1, x.parameter.Value.Item2);
    }

    double[] minimum = simplex.ComputeMin(ObjectiveFunction, variables);

    Debug.WriteLine("Simplex Method. Constrained Minimization.");
    for (int i = 0; i < minimum.Length; i++)
        Debug.WriteLine(Parameters[i].Key + " = " + minimum[i].ToString()); 
```

我所需要的只是将 ObjectiveFunction 实现为采用双数组的方法：

```
private double ObjectiveFunction(double[] weights)
{
    return Ranker.LinearTrial(weights, false);
} 
```

我没有针对真实数据尝试过，但我在 Excel 中创建了一个模拟来设置测试数据并对其进行评分。他们的算法得到的结果并不完美，但给出了一个很好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T01:08:25.077

这是我的 TL;DR 总结：他不知道如何最小化 的返回值`LinearTrial`，它需要一个双精度数组。这个数组中的每个值都有自己的最小值/最大值，他正在使用`Decisions`.

如果这是正确的，您似乎可以执行以下操作：

```
double[] minimums = Parameters.Select(p => p.Value.Item1).ToArray();
double[] maximums = Parameters.Select(p => p.Value.Item2).ToArray();
// Some initial values, here it's a quick and dirty average
double[] initials = Parameters.Select(p => (p.Item1 + p.Item2)/2.0).ToArray();

var solution = NelderMeadSolver.Solve(
    x => myRanker.LinearTrial(x, false), initials, minimums, maximums);

// Make sure you check solution.Result to ensure that it found a solution.
// For this, I'll assume it did.

// Value 0 is the minimized value of LinearTrial
int i = 1;
foreach (var param in Parameters)
{
    Console.WriteLine("{0}: {1}", param.Key, solution.GetValue(i));
    i++;
} 
```

[NelderMeadSolver](http://msdn.microsoft.com/en-us/library/microsoft.solverfoundation.solvers.neldermeadsolver%28v=vs.93%29.aspx)是 MSF 3.0 中的新功能。根据`Solve`MSF 程序集中的文档，静态方法“查找指定函数的最小值”（尽管 MSDN 文档为空白并显示错误的函数签名）。

*免责声明：* 我不是 MSF 专家，但以上内容对我和我的测试目标函数（权重求和）都有效。

# c# - 获取字符串中模式的匹配项

> ID：12819919
> 
> 赞同：1
> 
> 时间：2012-10-10T12:57:53.137
> 
> 标签：c#, regex, string

我有以下正则表达式：

```
^[[][A-Za-z_1-9]+[\]]$ 
```

我希望能够在字符串中获取此正则表达式的所有匹配项。匹配应该是形式`[Whatever]`。在大括号内，还可以有一个`_`或数字字符。所以我写了以下代码：

```
private const String REGEX = @"^[[][A-Za-z_1-9]+[\]]$"; 

static void Main(string[] args)
{
    String expression = "([ColumnName] * 500) / ([AnotherColumn] - 50)";

    MatchCollection matches = Regex.Matches(expression, REGEX);

    foreach (Match match in matches)
    {
        Console.WriteLine(match.Value);
    }

    Console.ReadLine();
} 
```

但不幸的`matches`是，总是计数为零。显然，正则表达式正在检查整个字符串是否匹配，而不是从字符串中获取匹配项。我不确定正则表达式是否错误或我使用的方式`Regex.Matches()`不正确。

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T13:00:31.753

您将正则表达式锚定到字符串的开头和结尾，因此它当然不会匹配任何内容。

删除锚（`^`开始和`$`结束）工作正常：

```
[[][A-Za-z_1-9]+[\]] 
```

正如您所期望的那样，它会返回：

```
[ColumnName]
[AnotherColumn] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T13:00:46.680

您需要从模式中删除字符串锚点 (`^`和`$`) 的开头/结尾，因为您要查找的匹配项实际上并不位于字符串的开头和结尾。您也可以只使用`\[`and`\]`而不是`[[]`and `[\]]`：

```
private const String REGEX = @"\[[A-Za-z_1-9]+\]"; 
```

应该做的伎俩。

# blackberry - 黑莓领域中的 Filp 动画

> ID：12819920
> 
> 赞同：3
> 
> 时间：2012-10-10T12:57:57.673
> 
> 标签：blackberry

我想创建一个自定义字段来显示新闻。我有 20 个新闻标题，但只有一个可见。该字段将有一个计时器，该计时器将每 3 秒更改一次新标题。创建一个计时器任务很好。但真正的问题是，动画在标题发生变化的同时。我想创建一个翻转动画。球场上的翻转动画怎么做？

我使用了屏幕转换。但这会为整个屏幕制作动画。但我的要求是翻转屏幕小部件。

希望开发 5.x 及更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:34:42.357

不幸的是，字段没有转换，因此您可以使用第三方代码或自己编写。您可以在这里找到更多见解：

1.  [https://www.nloko.ca/blog/2010/11/blackberry-animated/](https://www.nloko.ca/blog/2010/11/blackberry-animated/)
2.  [Blackberry - 字段布​​局动画](https://stackoverflow.com/questions/1497073/blackberry-fields-layout-animation)
3.  [黑莓 - 如何为自定义字段设置动画？](https://stackoverflow.com/questions/1761185/blackberry-how-to-animate-custom-field)

# file - 打开的文件被缓存在钛中。应用程序运行时无法查看替换的文件内容

> ID：12819935
> 
> 赞同：0
> 
> 时间：2012-10-10T12:58:55.507
> 
> 标签：file, caching, filesystems, titanium

我在编辑文件时遇到了一个小问题。

我正在使用下面的代码在 ios 上保存具有特定名称的文件（图像）。但问题是，当我替换存储在文件（例如 temp.jpg）中的图像时，当我打开文件时，应用程序仍会拾取上一个图像。但是，**可以在资源管理器中看到新图像**。如果我重新启动应用程序，则在打开图像时会出现新图像。

```
var folder = Ti.Filesystem.getFile(Ti.Filesystem.externalStorageDirectory, 'DocImages');

 // DocImages is a folder for files
 // ImageVar contains the blob for the new image from camera or gallery
 // docImgModel is the model class containing the name and image path of the image

 if(imageVar !== null && imageVar !== undefined){
         if (docImgModel.imagePath !== null && docImgModel.imagePath !== undefined){
              tempFile = Ti.Filesystem.getFile(docImgModel.imagePath);
              if (tempFile.exists()) {
                      tempFile.deleteFile(); // deleting already existing file
              }}

              // in case of changing the image stored in a file(the case in which i have a  
              // problem) the imgFile(below) is same as docImgModel.imagePath (above)

              imgFile = Ti.Filesystem.getFile(Ti.Filesystem.externalStorageDirectory + 'DocImages/', filenameWithExtension); // creating a new file

              // writing image to file
              imgFile.write(imageVar);
              Ti.API.info('new image saved');

              } 
```

}

我想知道钛是否保存了已打开文件的**缓存**，因此无法显示新图像。如果没有，还有什么我做错了或者我可以做些什么来让它工作。

我只想显示新保存的图像。有没有办法做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:28:53.603

我没有从设备打开文件，但在尝试更新屏幕上的数据时遇到了类似的问题。如果您说当您打开应用程序并加载正确的图像时出现，那么您用于加载图像的代码看起来正确且有效。我假设这是您在上面发布的代码。即使那似乎是更完整文件的代码片段。

您没有发布任何 UI 代码，这可能是您真正的问题所在。你有一个对象，我猜是某种视图，在加载新图像之前已经使用旧图像渲染。因此调试时，您可能会在上面的代码中看到新图像的数据已加载，但 UI 元素尚未正确分配或更新。

作为测试，我建议您将一些测试代码放入您的应用程序中，以允许您销毁您的 UI 元素并重新创建它们，在这种情况下您可能会看到图片正确显示。

根据这篇文章：http: [//developer.appcelerator.com/question/31181/simple-image-refresh](http://developer.appcelerator.com/question/31181/simple-image-refresh)

只需将您加载的图像分配给图像的 url 即可更新它。您的示例代码未显示您尝试更新的图像对象以及如何通过加载图像的代码进行通信。

```
// this sets the background color of the master UIView (when there are no windows/tab groups on it)
Titanium.UI.setBackgroundColor('#000');

// create tab group
var tabGroup = Titanium.UI.createTabGroup();

var image1 = 'image1.png';
var image2 = 'image2.png';

//
// create base UI tab and root window
//
var win1 = Titanium.UI.createWindow({  
    title:'Tab 1',
    backgroundColor:'#fff'
});
var tab1 = Titanium.UI.createTab({  
    icon:'KS_nav_views.png',
    title:'Tab 1',
    window:win1
});

var img = Titanium.UI.createImageView({
    width:100,
    height:100,
    top:50,
    left:110,
    url:image1
});

win1.add(img);

var btn = Titanium.UI.createButton({
    title:'load',
    width:100,
    height:35,
    top:50,
    left:0
});

function switchImage(){
    if(img.url == image1){
        img.url = image2;
    } else {
        img.url = image1;
    }
}

btn.addEventListener('click',function(){
    switchImage();
});

setInterval(switchImage,3000);

win1.add(btn);

//
//  add tabs
//
tabGroup.addTab(tab1);  

// open tab group
tabGroup.open(); 
```

# iphone - iPhone 以编程方式在 Twitter 上关注用户

> ID：12819936
> 
> 赞同：0
> 
> 时间：2012-10-10T12:58:59.467
> 
> 标签：iphone, ipad, twitter, sharekit, twitter-follow

我想通过单击按钮来关注 Twitter 用户。我使用了使用 oauth 的 share kit follow me 方法。但我总是收到这个错误。

> {"error":"无法使用 OAuth 进行身份验证。","re​​quest":"/1/friendships/create/priyankav89.json"}

然后我尝试自己实现它

```
NSURL *url = [NSURL URLWithString:@"https://api.twitter.com/1/friendships/create.json"];
NSMutableDictionary *dict=[[NSMutableDictionary alloc]init];
[dict setObject:@"871252998" forKey:@"user_id"];
[dict setObject:@"true" forKey:@"follow"];
[dict setObject:@"KXL0jFLJY6RI4lszOz8r5w" forKey:@"consumer"];
NSString *jsonRepresentation=[dict JSONString];
NSLog(@"jsonRepresentation = %@",jsonRepresentation);
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:3];
NSData *postData=[NSData dataWithBytes:jsonRepresentation.UTF8String length:[jsonRepresentation length]];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [postData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData];
NSURLResponse *response;
NSError *error=nil;
NSData *responseData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSLog(@"respon = %s",responseData.bytes); 
```

我仍然遇到同样的错误。

我搜索了很多。还是没用。我不想在 UIWebView 或 safari 中加载 url。我想支持来自 ios4 的应用程序。所以无法使用ios5内置的推特应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:24:03.537

我发现了问题。在 share kit follow me 方法中，他们在关注之前没有调用授权方法。所以我们想在登录前调用授权并保存访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:14:44.463

假设您知道如何使用集成到 iOS 的 twitter 发推文，您可以简单地发推文“关注”

# c# - System.Runtime.InteropServices.COMException：存在文件共享冲突。无法按要求访问该文件

> ID：12819939
> 
> 赞同：0
> 
> 时间：2012-10-10T12:59:13.493
> 
> 标签：c#, asp.net, com-interop, office-interop

当我尝试打开 Visio 文档并将其另存为 pdf 时出现此错误：

```
protected void ViewVisio(string url)
{
    string pdfFile = Server.MapPath("/Files/test.pdf");

    Microsoft.Office.Interop.Visio.Application visApp =
        new Microsoft.Office.Interop.Visio.Application();
    Microsoft.Office.Interop.Visio.Document visDoc = 
        visApp.Documents.Open(url.ToString());            // error occurs here

    visDoc.ExportAsFixedFormat(
        Microsoft.Office.Interop.Visio.VisFixedFormatTypes.visFixedFormatPDF,
        pdfFile,
        Microsoft.Office.Interop.Visio.VisDocExIntent.visDocExIntentScreen,
        Microsoft.Office.Interop.Visio.VisPrintOutRange.visPrintAll, 1, -1,
        false, true, true, true, false, System.Reflection.Missing.Value);

    Response.Clear();
    Response.ClearContent();
    Response.ClearHeaders();
    Response.ContentType = "application/pdf";
    Response.TransmitFile(pdfFile);
    Response.Flush();
    Response.End();
} 
```

这是我得到的错误：

> **System.Runtime.InteropServices.COMException：存在文件共享冲突。无法按请求访问该文件。**

堆栈跟踪：

> 堆栈跟踪：
> 
> [COMException（0x86db097e）：
> 
> 存在文件共享冲突。无法按要求访问该文件。]
> 
> Microsoft.Office.Interop.Visio.DocumentsClass.Open（字符串文件名）+0
> 
> ...

有谁知道这个问题是什么？我找不到它的任何细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:03:21.383

它只是意味着另一个应用程序打开了您的文件，因此对其进行了锁定。运行程序时是否在 Visio 中打开了文档？

您可以通过运行用于文件所有权的 SysInternals Handle 工具来验证哪个进程保留了文件：[http ://technet.microsoft.com/en-us/sysinternals/bb896655](http://technet.microsoft.com/en-us/sysinternals/bb896655)

# ios - iOS GLKit，在 GLKView 中绘制文本

> ID：12819940
> 
> 赞同：1
> 
> 时间：2012-10-10T12:59:13.817
> 
> 标签：ios, text, opengl-es, glkit, bitmap-fonts

我正在使用 GLKit 在 iPhone 上创建游戏。设置 GLKit 上下文并在其上绘制精灵并不难，但是当我尝试向其添加文本时，似乎不可能做到。我已经四处寻找答案，但我试图找到的所有解决方案都不能在 GLKView 中混合。

*在 GLKView 中呈现文本的最佳做法是什么？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:55:51.733

从最简单的意义上说，“最好的”是制作一个 UILabel，设置您想要的所有文本和背景参数，然后从标签的图层创建 UIImage 以创建或更新纹理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T08:39:16.240

最简单的答案有时是最好的。虽然文档中有一些不鼓励在 GLES 和 Quartz 之间进行合成的词，但它可以很好地使用标准 UIKit 视图（例如 UITextView）覆盖 GLKView。当然，您会想要确认对您最不支持的硬件/软件配置的性能影响，但在较新的配置中，动画模型的总渲染时间保持在 1 毫秒以下，同时滚动覆盖的 UITextView 具有清晰的背景，设置为不透明。

# crystal-reports - 水晶报表子报表增长问题

> ID：12819946
> 
> 赞同：0
> 
> 时间：2012-10-10T12:59:37.227
> 
> 标签：crystal-reports

我正在使用带有 VS2005 .net 的水晶 10.2。我在部分中使用了子报告，并且在报告中给出了正确的结果。当它在浏览器中显示时，它显示文本在列中垂直增长，我希望它水平增长，即使有这么多空间它也不会水平增长。请帮助我如何进行水平格式化。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:19:30.050

您必须扩展字段的宽度以适应页面的最大宽度，然后为多行设置文本换行选项。

# php - 在 Smarty 函数和块之间传递持久变量/类

> ID：12819948
> 
> 赞同：0
> 
> 时间：2012-10-10T12:59:41.807
> 
> 标签：php, smarty

我在 smarty 中定义自定义块和函数。假设我在模板中的代码是这样的：

```
{myblock}
    {myfunction}
{/myblock} 
```

假设`{myblock}`调用了一个 PHP 函数（一个静态的`MyClass::create()`），它创建了`MyClass`.

如何从调用的 PHP 代码访问该实例`{myfunction}`？

我尝试将实例分配给模板变量，但是当我在`myfunction`. 如果我使用 MyClass 的静态属性也是一样的。有什么建议么？

（希望一切都清楚......）

编辑：`myblock`和调用的两个方法`myfunction`都是静态的，我使用了一个`private static $instances`变量来尝试保存由 id 引用的实例，myblock 将实例放置在其中，但现在从 myfunctions 访问相同的静态变量没有运气，它变为空.

# javascript - 在 javascript 中设置的标签值不显示服务器端

> ID：12819949
> 
> 赞同：0
> 
> 时间：2012-10-10T12:59:43.850
> 
> 标签：javascript, asp.net

我`asp:label`在 JavaScript 中设置值，但在服务器端单击按钮时它是空白的。

可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:03:26.377

使用 jQuery：

```
$("#<%= label1.ClientID%>").text("SetYourTextHere"); 
```

使用 javascript：

```
document.getElementById("<%= label1.ClientID%>").innerHTML = "SetYourTextHere"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:04:56.260

我假设（您应该展示您尝试过的内容）您已经使用了该`value`属性。

改为使用`innerHTML`。A[`SPAN`](http://www.w3schools.com/tags/tag_span.asp)没有`value`属性。

```
var lbl = document.getElementById("Label1");
lbl.innerHTML = "Hello World"; 
```

# amazon-web-services - 通过 HTTP 确认 SNS 订阅

> ID：12819950
> 
> 赞同：8
> 
> 时间：2012-10-10T12:59:46.613
> 
> 标签：amazon-web-services, amazon, amazon-sns

我创建了一个 Amazon SNS 主题并添加了 2 个订阅。

1.  我的电子邮件 ID 在确认后可以正常工作。
2.  亚马逊 ec2 实例的 HTTP URL。

现在的问题是我无法理解如何确认 HTTP URL 的订阅。我在 apache access.log 上看不到 post 请求。我是否必须在其他地方寻找消息。

我已经在服务器上通过乘客部署了一个 Rails 项目。我应该通过 Rails 代码检查发布请求吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T09:07:21.537

同样的问题，实际上它是 RAW POST，你可以阅读它：

```
$post = file_get_contents('php://input'); 
```

把它放在你的目标网址中，如果你想把它发送到你的电子邮件中以查看它。

之后您可以确认：[http ://docs.amazonwebservices.com/sns/latest/api/API_ConfirmSubscription.html](http://docs.amazonwebservices.com/sns/latest/api/API_ConfirmSubscription.html)

来源：[https ://forums.aws.amazon.com/message.jspa?messageID=364666#364666](https://forums.aws.amazon.com/message.jspa?messageID=364666#364666)

编辑：实际上这是在 JSON 中，并且有一个变量“SubscribeURL”，在导航器中复制粘贴并验证订阅！

编辑2：对不起php，它似乎在rails中：

```
request.raw_post 
```

[request.raw_post 试图从中提取数据](https://stackoverflow.com/questions/3366979/request-raw-post-trying-to-pull-data-from-it)

# jquery - 如何在不属于儿童的容器内获取文本

> ID：12819953
> 
> 赞同：4
> 
> 时间：2012-10-10T12:59:55.987
> 
> 标签：jquery

让我们有这样的html代码：

```
<div id="d1"><span>1.</span>Hallo <span>Kitty, </span><div>How are you?</div></div> 
```

这只是一个例子，里面可能有不同的子元素。

如何在`d1`不属于子元素的容器内获取文本？

对于上面的例子，它应该只是`"Hallo "`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T13:05:00.650

这对你有用

```
$('#d1')
  .contents()
  .filter(function() {
    return this.nodeType == Node.TEXT_NODE;
}).text() 
```

或者您也可以按照下面的建议使用它来支持旧浏览器

```
var text = $("#d1").contents().filter( function() {
    return this.nodeType === 3;
}).text(); 
```

[演示](http://jsfiddle.net/fdncN/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T13:06:05.767

[http://jsfiddle.net/SGZW4/](http://jsfiddle.net/SGZW4/)

```
var text = $("#d1").contents().filter( function() {
    return this.nodeType === 3;
}).text(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T13:09:43.620

改进 halex 的技巧，您可以利用`.children()`仅查找 DOM 节点并忽略文本节点的事实：

```
var text = $('#d1').clone().children().remove().end().text(); // string "Hallo " 
```

...但我更喜欢这种`.nodeType`技术，因为它更清楚你在做什么。

# php - 如何将文件上传器字段添加到 Joomla 管理组件？

> ID：12819970
> 
> 赞同：0
> 
> 时间：2012-10-10T13:00:39.903
> 
> 标签：php, xml, joomla, joomla2.5

我根据 Joomla 指南制作了 Joomla 管理组件 - [http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component)

在 administrator\components\com_invoicemanager\models\forms 我已经定义`<field name="invoice" type="file"/>`

现在我需要捕获上传的文件并将其保存在磁盘上。

怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:05:56.683

```
Now how can i save it? 
```

这有点模糊。您将需要提供更多详细信息，并可能提供您已经尝试过的内容。

您可能还对[SWFUpload 组件感兴趣](http://extensions.joomla.org/extensions/core-enhancements/file-management/21091)

它变得非常简单，可以轻松集成到其他组件中。

# exception - 软件中断与软件异常

> ID：12819975
> 
> 赞同：-1
> 
> 时间：2012-10-10T13:00:57.390
> 
> 标签：exception, interrupt

> **可能重复：**
> [中断和异常](https://stackoverflow.com/questions/125394/interrupts-and-exceptions)

谁能解释软件中断和软件异常之间的区别？

**中断**：表示时间片到期，调用指令触发

**例外**：意味着访问破坏，

我是对的还是有人可以深入解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:38:13.100

当处理器执行 INT 指令时会发生软件中断。写在程序中，通常用来调用系统服务。

处理器中断是由处理器引脚上的电信号引起的。通常由设备用来告诉司机他们需要注意。时钟滴答中断非常常见，它将处理器从停止状态唤醒并允许调度程序选择其他工作来执行。

当处理器遇到阻止其执行代码的条件时，处理器本身会触发诸如访问冲突之类的处理器故障。通常当它尝试从未映射的内存中读取或写入或遇到无效指令时。

# java - JSF - 在验证之前从视图中更新模型值

> ID：12819977
> 
> 赞同：1
> 
> 时间：2012-10-10T13:00:58.960
> 
> 标签：java, jsf, lifecycle

我有一个包含多个组件的表单，其中一些有自己的验证和/或是强制性的。然后我还有几个`selectOneMenu`组件在它们的列表中具有相同的三个`selectItem`元素。我已经定义了三个`commandButton`，以便为所有列表选择相同的值（`commandButton`每个可能值一个）。

**JSF 部分**

```
<table>
    <tr>
        <td>
            <h:outputText value="ID:" />
        </td>
        <td>
            <h:inputText value="#{MyClass.id}" id="inTxt_id" required="true">
                <f:validator validatorId="CheckIDPattern" />
            </h:inpuText>
            <h:message for="inTxt_id" errorClass="error" />
        </td>
    </tr>
</table>
<table>
    <tr>
        <td>
            <h:commandButton value="Select all opt1" action="#{MyClass.selectOpt1}" />
            <h:commandButton value="Select all opt2" action="#{MyClass.selectOpt2}" />
            <h:commandButton value="Select all opt3" action="#{MyClass.selectOpt3}" />
        </td>
    </tr>
    <tr>
        <td>
            <h:outputText value="List 1:" />
        </td>
        <td>
            <h:selectOneMenu value="#{MyClass.list1Val}">
                <f:selectItems value="#{MyClass.listOfOptions}" />
            </h:selectOneMenu>
        </td>
    <tr>
        <td>
            <h:outputText value="List 2:" />
        </td>
        <td>
            <h:selectOneMenu value="#{MyClass.list2Val}">
                <f:selectItems value="#{MyClass.listOfOptions}" />
            </h:selectOneMenu>
        </td>
    </tr>
    <tr>
         //Many other selectOneMenu components...
    </tr>
</table>
<h:commandButton action="#{MyClass.saveLists}" value="Submit" /> 
```

**MyClass.java**

```
public String selectOpt1(){
    this.list1Val = 1;
    this.list2Val = 1;
    //...
    return "";
}

//The same idea for selectOpt2 and selectOpt3. 
```

在这种情况下，如果我的用户按下我的“全选”按钮之一而不填写 ID `inputText`，它会收到错误消息，但我不想要它，因为我想他们还没有完成填写表格。我只想在用户按下“保存列表”按钮时执行验证。

我尝试添加`immediate="true"`到我的“全选”按钮，它可以工作，但它不会从模型更新视图，然后用户看不到值已经改变......所以它真的不起作用。

**我想达到什么目标？**我只想在最后一个按钮（提交）时执行验证。因此，我的用户可以使用这些“全选”按钮，而无需预先填写强制性组件。

我希望你能理解我的上下文。随时要求任何澄清。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:20:34.557

如果您使用的是`@ViewScoped`bean，则可以进行以下更改：

首先将您的`selectOpt1`方法更改为键入`void`：

```
public void selectOpt1() 
{
    this.list1Val = 1;
    this.list2Val = 1;
    //...
} 
```

在选择项目时给`id`要更新的组件。在这种情况下，我假设列表 1：

```
<h:selectOneMenu id="list1" value="#{MyClass.list1Val}">
    //...
</h:selectOneMenu> 
```

在您的按钮中，添加一个`f:ajax`仅部分提交该组件进行处理的标签：

```
<h:commandButton value="Select all opt1" action="#{MyClass.selectOpt1}">
    <f:ajax execute="@this" render="list1" />
</h:commandButton> 
```

如果您计划更新多个组件，您可以添加它们的 id，以空格分隔：

```
<f:ajax execute="@this" render="list1 list2" /> 
```

我希望它有所帮助。

**编辑**

好吧，抱歉，我没有注意到您使用的是 JSF 1.x。在这种情况下，它不起作用。

不过，您可以使用[RichFaces](http://www.jboss.org/richfaces)之类的库来添加 ajax 功能。请查看以下主题：

*   [jsf 1.2 中的 ajax 行为](https://stackoverflow.com/questions/12715731/ajax-behaviour-in-jsf-1-2)

*   [如何使用 Ajax 调用 jsf 操作方法（在 JSF 1.2 中）？](https://stackoverflow.com/questions/3545539/how-do-i-call-a-jsf-action-method-in-jsf-1-2-using-ajax)

**富脸**

正如您提到的，您正在使用 RichFaces，您可以将`f:ajax`标签切换为`a4j:support`：

```
<h:commandButton value="Select all opt1" action="#{MyClass.selectOpt1}">
    <a4j:support event="onclick" reRender=":list1" ajaxSingle="true" />
</h:commandButton> 
```

或者像这样使用`a4j:commandButton`：

```
<a4j:commandButton value="Select all opt1" reRender=":list1" ajaxSingle="true" /> 
```

有关此行为的更多信息，请查看[此](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/ArchitectureOverview.html#d0e1166).

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:11:26.413

只需让`required`属性取决于按下的按钮。

```
<h:form id="form">
    <c:set var="saveButtonPressed" value="#{not empty param['form:save']}" />
    ...
    <h:inputText ... required="#{saveButtonPressed}" />
    ...
    <h:commandButton id="save" ... />
</h:form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:51:24.510

在考虑了**Bento**的建议后，我意识到让它按我想要的方式工作的唯一方法是使用 AJAX `a4j`。

我必须在我的代码中引入的更改是：

1.  将`h:commandButton`“全选”按钮替换为`a4j:commandButton`.
2.  为我的组件定义`id`标签`h:selectOneMenu`，这样我就可以通过之前定义的方式*重新渲染*`a4j:commandButton`组件。

**JSF**原页面修改如下：

```
(...)
<table>
    <tr>
        <td>
            <a4j:commandButton value="Select all opt1" action="#{MyClass.selectOpt1}"
                reRender="list1,list2,(...)" ajaxSingle="true" />
            <a4j:commandButton value="Select all opt2" action="#{MyClass.selectOpt2}"
                reRender="list1,list2,(...)" ajaxSingle="true" />
            <a4j:commandButton value="Select all opt3" action="#{MyClass.selectOpt3}"
                reRender="list1,list2,(...)" ajaxSingle="true" />
        </td>
    </tr>
    <tr>
        <td>
            <h:outputText value="List 1:" />
        </td>
        <td>
            <h:selectOneMenu value="#{MyClass.list1Val}" id="list1">
                <f:selectItems value="#{MyClass.listOfOptions}" />
            </h:selectOneMenu>
        </td>
    </tr>
    <tr>
        <td>
            <h:outputText value="List 2:" />
        </td>
        <td>
            <h:selectOneMenu value="#{MyClass.list2Val}" id="list2">
                <f:selectItems value="#{MyClass.listOfOptions}" />
            </h:selectOneMenu>
        </td>
    </tr>
(...) 
```

非常感谢**Bento**的建议！

# java - 是否可以在 tomcat7 中将“http://localhost:8080/myapplication”更改为“http://myApp/”？

> ID：12819983
> 
> 赞同：0
> 
> 时间：2012-10-10T13:01:55.617
> 
> 标签：java, jsp, tomcat7

我已经在本地系统的 Tomcat 7 中部署了该应用程序。当我运行应用程序时，url 路径就像'http://localhost:8080/myapplication'

是否可以将“http://localhost:8080/myapplication”更改为“http://myApp/”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:03:02.877

不，一般不会。

URL 模式看起来像`scheme://domain:port/path?query_string#fragment_id`，因此您的模式将使用域/主机名“myApp”。

您当然可以设置一个名为“myApp”的主机名，然后使用根上下文调用您的应用程序（类似于许多网站的工作方式 - 例如，谷歌只是用“http://www.google.com”调用），但是我不确定这是否是你想要的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:10:16.197

我不确定您为什么要这样做，但可以这样做。但是，它并不完全依赖于 Tomcat。您需要：

1.  将 myApp 别名为 localhost（在 unix/linux 中，您将添加`127.0.0.1 myApp`到 /etc/hosts）

2.  将Tomcat监听的端口从8080端口改为80端口

3.  将您的应用程序部署为 ROOT.war 或将其显式挂载为 /

这将使您的应用程序响应为`http://localhost/`或`http://myApp/`。发生这种情况是因为当您使用默认端口 (80) 时，无需显式指定它，并且根上下文安装为 /。此外，由于您已将 myApp 别名为 localhost，因此您现在可以互换使用它们。

请记住，这仅适用于您的本地计算机，并且不会让您网络上的其他人访问它。为此，您将不得不使用 DNS 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:04:51.197

是的; 你可以通过创建一个[虚拟主机](https://www.google.com/search?q=virtual+host)来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:05:14.437

当然可以，但这*真的*是你想要的吗？之后的部分`http://`是*主机名*，之后的部分是*上下文*......我认为您可能混淆了这两个概念？

如果您坚持，那么只需添加/编辑该行

```
127.0.0.1   localhost myApp 
```

在您的`/etc/hosts`or`\Windows\System32\drivers\etc\hosts`文件中并将 tomcat 配置修改为 1）在 ROOT 上下文中响应您的 webapp 和 2）在端口 80 而不是 8080 上侦听。

干杯，

# grammar - 用于 LL 解析的语法重构

> ID：12819987
> 
> 赞同：1
> 
> 时间：2012-10-10T13:02:14.067
> 
> 标签：grammar, ll

在一个简单的例子中，我很困惑如何通过删除左递归将这个语法变成 LL 语法。欢迎任何提示。

```
G = {
      A -> A a | A B | a
      B -> b
    } 
```

[通过应用此算法](http://en.wikipedia.org/wiki/Left_recursion#Removing_left_recursion)，我得到以下信息：

```
G = {
      A -> a X
      X -> e | A | B X
      B -> b
    } 
```

这似乎可以为解析器生成 C 伪代码：

```
void A() {
    switch (token) {
        case 'a' : next(); X(); break;
    }
}

void X() {
    switch (token) {
        case 'e' : finish(); break;
        case 'a' : A(); break;
        case 'b' : B(); X(); break;
    }
}

void B() {
    next();
} 
```

并为单词生成解析树`aabab`：：

```
A ---+
|    |
a    X
     |
     A ---+
     |    |
     a    X ---+
          |    |
          B    X
          |    |
          b    A ---+
               |    |
               a    X ---+
                    |    |
                    B    X
                    |    |
                    b    e 
```

好吧，我只是不确定它是否正确......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:11:15.543

首先，您的语法似乎接受`a`由单个 s 分隔的s 序列`b`，因此没有 2`b`组合在一起。( `aaa...abaaaaa...abaaa...a`) 这应该相当于：

```
Q -> P | P b P
P -> a | a P 
```

# asp.net - 使用 Web Deploy 部署 .NET 4.5 Web 应用程序

> ID：12819988
> 
> 赞同：11
> 
> 时间：2012-10-10T13:02:20.240
> 
> 标签：asp.net, .net, iis-7.5, msdeploy, webdeploy

我有一个工作的 ASP.NET MVC 3 应用程序。该项目使用 VS 2010 构建，面向 .NET 4.0。现在我将它重新定位到 .NET 4.5 并成功重新编译。尝试将其部署到我们的测试服务器（Windows 2008 R2 SP1）现在失败：

> 错误代码：ERROR_APPPOOL_VERSION_MISMATCH 更多信息：您尝试使用的应用程序池的“managedRuntimeVersion”属性设置为“v4.0”。此应用程序需要“v4.5”。了解更多信息：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_APPPOOL_VERSION_MISMATCH) ?LinkId=221672#ERROR_APPPOOL_VERSION_MISMATCH 。

服务器安装了 .NET 4.5，但没有应用程序池 4.5（因为它是就地升级，据我了解 4.0 池应该没问题）。客户端机器有 VS 2012 和 Web Deploy 3（之前是 Web Deploy 2）。我还在服务器上安装了 Web Deploy 3。

试图重新注册 ASP.NET `aspnet_regiis`- 没有运气。

为什么我会收到错误，我该如何解决？这太令人沮丧了……

ps 发现了关于 RC 的[类似问题](https://stackoverflow.com/questions/11057814/deploying-a-net-4-5-website-to-an-iis-7-5-server)，但没有帮助

**更新：**

看起来[这是](https://stackoverflow.com/questions/7365006/how-to-web-deploy-a-web-application-targeting-entity-framework-4-2-june-2011-ctp)微软自 CTP 以来尚未修复的错误。`IgnoreDeployManagedRuntimeVersion`财产成功了。真可惜！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-20T20:53:19.153

您可以尝试将此属性添加到项目中：

```
<IgnoreDeployManagedRuntimeVersion>True</IgnoreDeployManagedRuntimeVersion> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T10:13:17.293

Windows Server 2012 默认包含 .NET 4.5，并且（当添加 Web 服务器角色时）IIS 具有以下应用程序池：使用 .NET Framework 4.0 的*DefaultAppPool*、*.NET v4.5*、*.NET v4.5 Classic*（因为 4.5 是就地升级4.0)。但是，如果我们在安装了 .NET 4.0 的 Windows Server 2008 上安装 .NET 4.5 可再发行组件，则不会重命名池：*ASP.NET v4.0*、*ASP.NET v4.0 Classic*。这就是 Web Deploy 失败的关键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-23T19:51:56.883

@kzu：不尝试，这会起作用。

安装 Orchard CMS 时遇到同样的问题。继续定位 v2.0。但是找到简单的解决方案：在 IIS 中，在应用程序池（包含所有应用程序池的列表）上，您可以找到右上角的第二个设置列表：“设置应用程序池默认值..”将默认值从 2.0 更改为 4.0 等，瞧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-01T09:51:00.847

为 IIS注册ASP.NET 以管理员身份运行 CMD
b. CD 到 \windows\microsoft.net\framework\v4.x
c. Aspnet regiis -i

# .net - 从 behaviorExtension 以与版本无关的方式引用 DLL

> ID：12819993
> 
> 赞同：0
> 
> 时间：2012-10-10T13:02:33.797
> 
> 标签：.net, iis

> **可能重复：**
> [如何在没有程序集版本号的情况下指定 wcf behaviorExtension 类类型？](https://stackoverflow.com/questions/2518425/how-do-i-specify-wcf-behaviorextension-class-type-without-the-assembly-version-n)

在我托管在 IIS7 上的 Web 应用程序中，我有一个项目 X 引用项目 Y（VS2010 中的项目参考）。我正在尝试在 X 的 web.config 中添加来自 Y 类型的 behaviorExtensions，而不指定版本号。

我在 System.ServiceModel.Extensions 下添加了一个 behaviorExtension。

```
<behaviorExtensions>
<add name="serviceKeyBehavior" type="MyNS.ServiceSupport.ServiceKeyBehaviorExtensionElement, Analyst.API"/>
<add name="userNameClientCredentials" type="MyNS.ServiceSupport.UserNameClientCredentialsElement, Analyst.API" />
</behaviorExtensions> 
```

如果不指定例如，我无法使其工作

```
Version=3.2.1.0, Culture=neutral, PublicKeyToken=null 
```

在类型属性的末尾。

通常只需忽略上面的版本信息就可以了。

如果我改变 `type="MyNS.ServiceSupport.ServiceKeyBehaviorExtensionElement, Analyst.API"`

到

`type="MyNS.ServiceSupport.ServiceKeyBehaviorExtensionElement, Analyst.API, Version=3.2.1.0, Culture=neutral, PublicKeyToken=null"`

（3.2.1.0 == 当前 DLL 版本），它可以工作。

否则它声称它找不到类型：

> 为 system.serviceModel/behaviors 创建配置节处理程序时出错：无法将扩展元素“serviceKeyBehavior”添加到此元素。验证扩展是否已在 system.serviceModel/extensions/behaviorExtensions 的扩展集合中注册。参数名称：元素（C:\inetpub\wwwroot\xyz\web.config 第 155 行）查看事件日志（ID：1265）以获取更多信息。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:13:56.120

我发现了 2008 年的这篇博文：

[http://keyvan.io/configuration-error-for-custom-behavior-extensions-in-wcf](http://keyvan.io/configuration-error-for-custom-behavior-extensions-in-wcf)

这似乎是 WCF 中的一个错误。我尝试使用 .Net framework 4.0 重新编译它，然后它工作正常。

StackOverflow 上还有一个线程描述了这个我以前没有找到的：

[如何在没有程序集版本号的情况下指定 wcf behaviorExtension 类类型？](https://stackoverflow.com/questions/2518425/how-do-i-specify-wcf-behaviorextension-class-type-without-the-assembly-version-n)

# c++ - 有没有人在 Visual Studio 2010 中使用 C++ 中的 JSON

> ID：12819995
> 
> 赞同：5
> 
> 时间：2012-10-10T13:02:38.257
> 
> 标签：c++, json, visual-studio-2010, visual-c++

我以前只在 Visual Studio 开发环境中使用过 C++。现在我被要求使用 JSON 接收和发送数据。

我已经搜索了互联网，但找不到任何 C++ 在 Visual Studio 中使用的 JSON 示例。如果有人在 Visual Studio 2010 中使用 C++ 中的 JSON，请传递链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:34:22.630

如果你要安装 boost::spirit，你可以使用这个 lib [JSON Spirit](http://www.codeproject.com/Articles/20027/JSON-Spirit-A-C-JSON-Parser-Generator-Implemented)。与 VS 一起工作就像一个魅力。

**UPDATE**包含json精神目录并使用

```
#include <json_spirit/json_spirit.h>
#include <json_spirit/json_spirit_reader_template.h>
#include <json_spirit/json_spirit_writer_template.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:08:47.327

[JsonCpp](http://jsoncpp.sourceforge.net/)是一个 C++ JSON 解析器，根据他们的[README](http://jsoncpp.sourceforge.net/README.txt)构建在 VS 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:26:06.657

[Apache Thrift](http://thrift.apache.org/)支持 JSON。这是一个不错的选择，因为除了 JSON 之外，您还可以获得传输机制（TCP 套接字等），并且可以选择在多线程环境中。

[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.data.json)您可以找到有关适用于 Windows 的 JSON 的信息。

Thrift 是多平台的，所以它应该可以很好地与 VS 配合使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T08:39:49.387

你可以试试[rapidjson](http://code.google.com/p/rapidjson/)。

它体积小、速度快、原生支持 VC2008/2010，具有最小的依赖性（例如，没有 BOOST，甚至没有 STL）。

它可以使用 SAX 或 DOM 样式 API 解析和生成 JSON。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-18T12:37:26.087

[Json11](https://github.com/dropbox/json11) - 是一个用于 C++11 的小型 JSON 库，提供 JSON 解析和序列化。

该库提供的核心对象是 json11::Json。Json 对象表示任何 JSON 值：null、bool、数字（int 或 double）、字符串（std::string）、数组（std::vector）或对象（std::map）。

Json 对象的行为类似于值。它们可以被分配、复制、移动、比较相等或顺序，等等。还有辅助方法 Json::dump，将 Json 序列化为字符串，以及 Json::parse（静态）将 std::string 解析为 Json 对象。

例子：

```
 const string simple_test =
            R"({"k1":"v1", "k2":42, "k3":["a",123,true,false,null]})";
        string err;
        auto json = Json::parse(simple_test, err);
        std::cout << "k1: " << json["k1"].string_value() << "\n"; 
```

* * *

[PicoJSON](https://github.com/kazuho/picojson) - 是一个用于 C++ 的小型 JSON 解析器/序列化器，具有以下属性：

*   仅头文件
*   没有外部依赖（仅使用标准 C++ 库）
*   STL 友好（数组使用 std::vector 表示，对象是 std::map）
*   提供拉取接口和流（基于事件）接口

例子：

```
 std::string json1 = R"({ "k1":"v1", "k2" : 42, "k3" : ["a",123,true,false,null] })";
        picojson::value v;
        std::string err1 = picojson::parse(v, json1);
        const picojson::object& o = v.get<picojson::object>();
        for (picojson::object::const_iterator i = o.begin(); i != o.end(); ++i) {
            std::cout << i->first << "  " << i->second << std::endl;
        } 
```

两者都可以在带有标准库的 Visual Studio 中轻松使用（没有任何额外的依赖项）。

# javascript - 分组单选按钮检查已更改

> ID：12819999
> 
> 赞同：0
> 
> 时间：2012-10-10T13:02:53.920
> 
> 标签：javascript, asp.net, html

我目前正在开展一个项目，在该项目中，我们根据我们在 SQL 表中的内容呈现动态页面。我们对控件进行条件验证，您可以在其中说

> 如果 x 等于 y 则启用控件 abc

我在一个组中有多个单选按钮，最后一个控件是“其他（请指定）”，当它为 true 时，将启用一个文本框来指定，所以我需要捕获它何时设置为 true 或 false。目前我正在做这样的事情

```
<input type="radio" name="test" value="Yes" />
<input type="radio" onchange="onChange()" name="test" value="No" />
<script type="text/javascript">
    function onChange() {
        alert('Changed')
    }
</script> 
```

如果我检查`NO`，我会收到警报。如果我然后检查`YES`它会更改`NO`单选按钮检查状态但不显示警报 - 任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:02:34.150

我唯一可以建议的是对整个组进行 onchange ，然后检查当它们更改时选择了哪个。不是很优雅，但看起来这正是 change 事件的工作方式（即它只响应用户更改，而不响应它的系统更改）。