# StackOverflow 问答 15675000-15675999

# java - 假设的 - 支持非字符串文本中的非 ASCII 字符

> ID：15675000
> 
> 赞同：1
> 
> 时间：2013-03-28T05:42:34.110
> 
> 标签：java, compiler-construction, programming-languages, ascii, portability

例如，在 Java 版本 9 中，有人想要添加对 ≤ 和 ≥ 字符作为操作数的支持，这将分别与 <= 和 >= 操作数完全相同。这可能吗，因为 ≤ 和 ≥ 是非 ASCII 字符/不是标准字符集的一部分，而不会破坏可移植性？是否可行？是否有任何主要的编程语言支持这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:14:06.800

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:41:19.213

Java 已经支持非 ascii 字符。例如，下面的程序编译得很好：

```
public class Test {

    public static final float π = 3.1415927f; 

    public static void main(String[] args) {
        System.out.println(π);
    }

} 
```

（当然，您需要使用包含 π 的源文件字符编码）

但是，由于 ≤ 和 ≥ 可能不会在标识符中使用，因此将它们作为运算符引入不会破坏向后兼容性。

许多语言支持定义您自己的运算符。毕竟，运算符与函数调用的唯一区别是中缀表示法，即运算符名称出现在其操作数之间而不是之前。有关此类语言的（不完整）列表，请参阅有关[运算符重载](http://en.wikipedia.org/wiki/Operator_overloading)的维基百科文章。

# ios - 带有文本的 xcode 隐形按钮

> ID：15675003
> 
> 赞同：0
> 
> 时间：2013-03-28T05:42:43.867
> 
> 标签：ios, objective-c, xcode, uibutton

我知道我可以这样做：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(x, y, width, height);
    [button setTitle:text forState:UIControlStateNormal];
    [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    button.backgroundColor = [UIColor clearColor]; 
```

但这会在按钮周围留下一个边框。

我也可以这样做：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(x, y, width, height);
    [button setTitle:text forState:UIControlStateNormal];
    [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后在按钮后面放一个 UILabel 。

**有没有办法在不需要两个对象的情况下完成这个 ^ ？**

更新：澄清我的问题：我想要有文本，只有文本，按下时执行方法调用。出于难以解释的原因，我需要通过按钮来执行此操作。那么，如何使按钮的文本成为按钮的唯一可见部分。无边界。没有背景。只是文字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T05:57:53.993

```
 UIButton *btnLikeUserCount = [[[UIButton alloc] init] autorelease];
    [btnLikeUserCount.titleLabel setFont:[UIFont boldSystemFontOfSize:12]];
    btnLikeUserCount.frame = CGRectMake(posx,posy,width,height);
    [btnLikeUserCount setTitle:text forState:UIControlStateNormal];
    [btnLikeUserCount setTitleColor:[UIColor colorWithRed:50/255.0 green:79/255.0 blue:133/255.0 alpha:1.0] forState:UIControlStateNormal];
    [btnLikeUserCount addTarget:self action:@selector(btnLikeUserCountClick:) forControlEvents:UIControlEventTouchUpInside]; 
```

无需带标签对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T06:03:27.040

我无法准确获得您想要的东西，但您`[self.view addSubview:button]`的代码中可能会遗漏您的信息。**所以你不能显示带有文本的按钮**。

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(x, y, width, height);
    [button setTitle:text forState:UIControlStateNormal];
    [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:button]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:03:55.087

您的第二个代码工作正常。在下图中，hello 是一个按钮。 ![在此处输入图像描述](../Images/62c44ed50cbc36fce6079a2788360f6e.png)

我的代码是：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(110, 100, 100, 50);
[button setTitle:@"Hello" forState:UIControlStateNormal];
[button addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:button]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T06:41:30.433

这样你就可以做到这一点

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
 button.frame = CGRectMake(100, 400, 100, 50);
 [button setTitle:@"Button text" forState:UIControlStateNormal];
 [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
 [button.layer setBorderColor: [UIColor clearColor]];
 [button.layer setBorderWidth: 0.0];
 [self.view addSubview:button]; 
```

# java - 将 wsdl 文件制作为 java 时缺少“soap:fault”元素异常

> ID：15675004
> 
> 赞同：-3
> 
> 时间：2013-03-28T05:42:46.703
> 
> 标签：java, web-services, soap, axis

她我有 //path/a/wsdl 文件，我正在尝试生成 webservices 客户端程序，但是当我们添加文件时，它显示以下错误

**示例 wsdl：** wsdl:definitions targetNamespace="http://xyz.com/" xmlns:tns="http://xyz.com/" xmlns:cmn="http://xyz.com/Common/" xmlns: wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/ wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">

```
 <s:element name="GetPublisherRevenueCSV">
            <s:complexType>
                <s:sequence>
                    <s:element minOccurs="1" maxOccurs="1" name="name" type="s:string" />
                    <s:element minOccurs="1" maxOccurs="1" name="pwd" type="s:string" />
                    <s:element minOccurs="1" maxOccurs="1" name="operatorId" type="s:int" />
                    <s:element minOccurs="1" maxOccurs="1" name="criteria" type="tns:PublisherRevenueCriteria" />
                </s:sequence>
            </s:complexType>
        </s:element>

        <s:element name="GetPublisherRevenueCSVResponse">
            <s:complexType>
                <s:sequence>
                    <s:element minOccurs="0" name="CSVFile" type="tns:CSVFile" />
                </s:sequence>
            </s:complexType>
        </s:element>

        <s:complexType name="CSVFile">
            <s:sequence>
                <s:element minOccurs="0" maxOccurs="1" name="File" type="s:hexBinary"
                    xmime:expectedContentTypes="text/plain" />
            </s:sequence>
        </s:complexType>

        <s:complexType name="PublisherRevenueCriteria">
            <s:sequence>
                <s:element minOccurs="0" maxOccurs="1" name="publisherId" type="s:int" />
                <s:element minOccurs="0" maxOccurs="1" name="adSpaceId" type="s:int" />
                <s:element minOccurs="1" maxOccurs="1" name="startDate" type="s:date" />
                <s:element minOccurs="1" maxOccurs="1" name="endDate" type="s:date" />                  
            </s:sequence>
        </s:complexType>

    </s:schema>
</wsdl:types>

<wsdl:message name="GetPublisherRevenueCSVSoapIn">
    <wsdl:part name="parameters" element="tns:GetPublisherRevenueCSV" />
</wsdl:message>

<wsdl:message name="GetPublisherRevenueCSVSoapOut">
    <wsdl:part name="parameters" element="tns:GetPublisherRevenueCSVResponse" />
</wsdl:message> 
```

```
 <wsdl:operation name="GetPublisherRevenueCSV">
        <wsdl:input message="tns:GetPublisherRevenueCSVSoapIn" />
        <wsdl:output message="tns:GetPublisherRevenueCSVSoapOut" />
        <wsdl:fault name="CMS_API_Exception" message="cmn:CMS_API_Exception" />
    </wsdl:operation>

</wsdl:portType>

<wsdl:binding name="PublisherRevenueWSSoap" type="tns:PublisherRevenueWSSoap">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />

    <wsdl:operation name="GetPublisherRevenueCSV">
        <soap:operation soapAction="http://xyz.com/GetPublisherRevenueCSV"
            style="document" />
        <wsdl:input>
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal" />
        </wsdl:output>
        <wsdl:fault name="CMS_API_Exception">
            <soap:fault name="CMS_API_Exception" use="literal" />
        </wsdl:fault>
    </wsdl:operation> 
```

**错误：** IWAB0399E 从 WSDL 生成 Java 时出错：java.io.IOException：错误：在绑定 GetPublisherRevenueCSV java.io.IOException 中，操作“CMS_API_Exception”中缺少元素 inFault “CMS_API_Exception”：错误：操作“CMS_API_Exception”中缺少元素 inFault “CMS_API_Exception” , 在 org.apache.axis.wsdl.symbolTable.SymbolTable.populateBindings(SymbolTable.java:2549) 在 org.apache.axis.wsdl.symbolTable.SymbolTable.populateBindings(SymbolTable.java:2549) 绑定 GetPublisherRevenueCSV .axis.wsdl.symbolTable.SymbolTable.populate(SymbolTable.java:744) 在 org.apache.axis.wsdl.symbolTable.SymbolTable.add(SymbolTable.java:543) 在 org.apache.axis.wsdl.symbolTable.SymbolTable .populate(SymbolTable.java:518) 在 org.apache.axis。wsdl.symbolTable.SymbolTable.populate(SymbolTable.java:495) 在 org.apache.axis.wsdl.gen.Parser$WSDLRunnable.run(Parser.java:361) 在 java.lang.Thread.run(Thread.java: 722)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T07:32:52.253

我有一个类似的问题，，，从

它应该工作。

```
 <wsdl:fault name="CMS_API_Exception">
        <soap:fault name="CMS_API_Exception" use="literal" /> 
```

至

```
 <soap:fault name="CMS_API_Exception">
        <soap:fault name="CMS_API_Exception" use="literal" />
    </soap:fault> 
```

# jquery - 无法从 ajax 数据中读取 html

> ID：15675005
> 
> 赞同：2
> 
> 时间：2013-03-28T05:42:54.127
> 
> 标签：jquery

我有一个 ajax 调用，如下所示

```
 $("#createnewlist").live('click', function (event) {

    $("#ajax-loading-01").show();
    var createlink = $(this);
    var accountid = createlink.parent().find("input:hidden[name='accountid']").val();
    var listname = createlink.parent().find("input[name='listname']").val();

    //create an ajaxmanager named cacheQueue
    var ajaxManager = $.manageAjax.create('cacheQueue', {
        queue: true,
        cacheResponse: false
    });

    ajaxManager.add(({
        type: 'GET', url: '/ajaxhandler',
        data: { createwishlist: "true", accountid: accountid, listname: listname }

      , success: function (data) {
          alert(data)
          $(".grid03").html($(data).find(".grid03").html());
      }

    }));

}); 
```

成功我在**警报（数据）**行中获得了全部数据

```
 <!-- ActionHandler IS included -->
<p class="favtext">for at folde den ud...</p>
<div class="query-input lynlistesearcher">
  <label>Søg i dine Lynlister</label>
  <input type="text" name="textbox" id="txtesearch" />
</div>
<div class="grid03">
  <ul>  
    <li>
      <div class="head-text">
        <strong data-id="149658491" class="149658491"></strong>
        <a rel="149658491" class="deletelistclass" rev="74123311" href="#">
          <translate key="delete-list">Slet liste</translate>
        </a>
      </div>
    </li>
  </ul>
</div> 
```

但是当我尝试从这些数据中获取 html

```
$(data).find(".grid03").html() 
```

它给出了空值。任何人都可以提供任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:15:54.417

尝试使用[filter()](http://api.jquery.com/filter/)，所以改变：

```
$(".grid03").html($(data).find(".grid03").html()); 
```

到

```
$(".grid03").html($(data).filter("div.grid03").html()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:30:35.543

试试这个

```
$(".grid03").html($(data).eq(2).find(".grid03").html()); 
```

# wordpress - 如何在 wordpress 211 主题中显示“留下回复”表单

> ID：15675007
> 
> 赞同：0
> 
> 时间：2013-03-28T05:43:04.843
> 
> 标签：wordpress

我正在为我的 wordpress 应用程序使用 211 主题。但是在点击任何帖子后，它会显示帖子详细信息，但不会显示“留下回复”表格。它的说法是“评论已关闭”。我在 single.php 文件中使用了 comments_template( '', true )，但仍然没有显示“留下回复”。请任何人帮助我！

谢谢莎玛考萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T15:25:00.593

我希望你没有使用任何插件来禁用评论。？在设置中通过插件限制评论后会出现此类问题。如果您已安装或可以安装，只需删除，只需检查仪表板设置区域中的设置。如果没有，请访问 wrodpress.org，您会在那里找到完整的数据库。

PS确保你已经升级到word press 3.6

# php - RewriteRule 没有正确重定向

> ID：15675009
> 
> 赞同：1
> 
> 时间：2013-03-28T05:43:21.183
> 
> 标签：php, redirect

我正在使用它来格式化我的网站 URL 的重定向。我在正确重定向时遇到问题。

情况1：

```
RewriteEngine on

RewriteRule ^([a-zA-z0-9_-]*)$  user/profile.php?id=$1 [L,NC]
RewriteRule ^([a-zA-z0-9_-]*)/([a-zA-z0-9_-]*)$  user/profile.php?id=$1&page=$2 [L,NC] 
```

访问个人资料页面时代码正常，实际网址为（user/profile.php）

```
http://thisismysite.com/1234567 
```

但是我无法访问主索引，它仍然重定向到（user/profile.php）

[http://thisismysite.com](http://thisismysite.com)

案例二：

```
RewriteEngine on

RewriteRule ^([a-zA-z0-9_-]*)$/  user/profile.php?id=$1 [L,NC]
RewriteRule ^([a-zA-z0-9_-]*)/([a-zA-z0-9_-]*)$  user/profile.php?id=$1&page=$2 [L,NC] 
```

在这种情况下，我可以访问主索引和配置文件，但我需要在末尾添加“/”

```
http://thisismysite.com/1234567/ 
```

但我不希望反斜杠出现在最后？

我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:47:32.203

对于案例 1 替换`*`为，`+`因此您的规则如下所示：

`RewriteRule ^([a-zA-z0-9_-]+)$ user/profile.php?id=$1 [L,NC]`

这应该注意能够看到索引，但当您拥有个人资料网址时仍会重定向到用户个人资料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:47:59.330

`/`最后添加

```
RewriteRule ^([a-zA-z0-9_-]*)/$  user/profile.php?id=$1 [L,NC] 
```

# facebook - 使用猴子谈话自动化工具发送电子邮件

> ID：15675014
> 
> 赞同：0
> 
> 时间：2013-03-28T05:44:04.273
> 
> 标签：facebook, monkeytalk

是否可以通过猴子谈话自动化工具发送 html 电子邮件报告。如果可能，请提供任何代码或网址。

谢谢，罗摩克里希纳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T16:07:24.160

将 CI（持续集成工具）与 monkeytalk 一起使用。

像 jenkins+monkeytalk 一样，配置起来有点困难。但这是可以完成的。使用 jenkins 自动化从存储库中检出代码的过程，并编写一个 shell 脚本来构建项目并使用 monkeytalk 运行测试用例。完成测试后，jenkins 会将报告通过电子邮件发送给给定的收件人。

[詹金斯： http](http://jenkins-ci.org/) ://jenkins-ci.org/

更多细节...

首先，您需要下载和部署 Jenkins。下载[链接](http://mirrors.jenkins-ci.org/war/latest/jenkins.war)

在终端部署

```
$ java -jar jenkins.war 
```

打开浏览器`http://localhost:8080`会将您带到 Jenkins 仪表板。

左侧菜单中有 Jenkins 设置的链接：从该页面您可以设置 Jenkins 的电子邮件帐户和密码。然后提供收件人电子邮件地址。因此，如果构建失败，Jenkins 会将所有控制台错误通过电子邮件发送给 recipents。（如果难以安装，请尝试阅读 Jenkins 文档）

然后创建一个提供名称和详细信息的新作业。添加您的存储库 URL 并键入添加用户凭据。并在页面末尾配置其余部分，您可以将构建命令作为 shell 脚本或 ant 文件提供，或者有很多选项。然后保存作业并编辑配置如果它没有从 repo 签出您的代码并正确构建，则开始构建从错误控制台复制错误并在 google 中搜索。

这是将 Xcode 项目构建到模拟器的示例代码

```
 echo "Build Start"

/usr/bin/xcodebuild -target FuncTest CODE_SIGN_IDENTITY="iPhone Distribution: Leapset Inc." PROVISIONING_PROFILE="xxxxxxxx-1216-4E86-97D5-xxxxxxxxxxxx" OTHER_LDFLAGS="-lxml2 -all_load -lstdc++" DSTROOT="build" VALID_ARCHS="armv7 armv7s i386" -arch i386 -sdk iphonesimulator6.0 -configuration Release clean build install;

echo "Build End" 
```

如果您需要使用应用程序打开 iPhone 模拟器

```
# open app in simulator
echo "Start run app in simulator"

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app/Contents/MacOS/iPhone\ Simulator -SimulateApplication release-1.081/Leapset/build/Release-iphonesimulator/LeapsetFuncTest.app/FuncTest & disown;

echo "DONE run app in simulator" 
```

运行测试

```
echo "start run Test jobs"

######### Job 1 #########
echo
echo "TEST: SignInOut.mts"
echo "DISCRIPTION: sign in and out with user credintials"

#java -jar $$ROOTPATH/monkeytalk/LeapsetTest/libs/monkeytalk-runner-1.0.43.jar -agent IOS $ROOTPATH/monkeytalk/LeapsetTest/signinUser.mt
java -jar monkeytalk/LeapsetTest/libs/monkeytalk-runner-1.0.43.jar -agent IOS monkeytalk/LeapsetTest/SignInOut.mts 
```

猴子谈话会生成报告。您唯一需要找到的是将这些 html 报告附加到 Jenkins 的方法有很多可供 Jenkins 使用的插件。

上述马桶工作正常，但您需要提供正确的工作路径。就像上面的构建命令注意：这个命令应该在项目根目录（Xcode项目文件所在的位置）内的终端中运行

祝你好运 ：）

xocdebuild 命令帮助

```
xcodebuild 
[-project <projectname>] 
[[-target <targetname>]...|-alltargets] 
[-configuration <configurationname>] 
[-arch <architecture>]... [-sdk [<sdkname>|<sdkpath>]] 
[-showBuildSettings] [<buildsetting>=<value>]... [<buildaction>]...

xcodebuild 
[-project <projectname>] -scheme <schemeName> 
[-configuration <configurationname>] 
[-arch <architecture>]... [-sdk [<sdkname>|<sdkpath>]] 
[-showBuildSettings] [<buildsetting>=<value>]... [<buildaction>]...

xcodebuild 
-workspace <workspacename> -scheme <schemeName> 
[-configuration <configurationname>] 
[-arch <architecture>]... [-sdk [<sdkname>|<sdkpath>]] 
[-showBuildSettings] [<buildsetting>=<value>]... [<buildaction>]...

xcodebuild -version [-sdk [<sdkfullpath>|<sdkname>] [<infoitem>] ]

xcodebuild -list [[-project <projectname>]|[-workspace <workspacename>]]

xcodebuild -showsdks 
```

# xml - < 代替 '<' 显示 - WSO2 代理服务

> ID：15675023
> 
> 赞同：0
> 
> 时间：2013-03-28T05:44:50.553
> 
> 标签：xml, web-services, soap, wso2, wso2esb

我有一个 Web 服务，它返回 XML 字符串，该字符串又被调用中介捕获并将其发送到 JMS 队列。但是当我看到队列中的内容时，'<' 符号在 activemq 队列监视器中显示为 '<'。

解决此问题的任何想法，我想将其显示为 '<' 本身。下面的示例消息。

```
<?xml version='1.0' encoding='UTF-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://dummy.com.com/"><soapenv:Body>
      <ns2:validatePrescriptionResponse xmlns:ns2="http://dummy.com.com/"><return>&lt;Prescription xmlns="http://hl7.org/fhir">
  &lt;status value="active"/>
  &lt;patient>
    &lt;type value="Patient"/>
    &lt;url value="will smith"/>
  &lt;/patient>
  &lt;prescriber>
    &lt;type value="Provider"/>
    &lt;url value="Dr. stefan wright"/>
  &lt;/prescriber>
  &lt;prescribed value="2013+05:30"/>
  &lt;prescribed/>
  &lt;dispense>
    &lt;repeats value="10"/>
    &lt;quantity>
      &lt;value value="125"/>
      &lt;units value="ml"/>
    &lt;/quantity>
    &lt;dispenser>
      &lt;type value="Clinic"/>
      &lt;url value="Clinic"/>
    &lt;/dispenser&gt;
  &lt;/dispense>
  &lt;medicine>
    &lt;identification>
      &lt;text value="Penicillin VK oral suspension"/>
    &lt;/identification>
  &lt;/medicine>
  &lt;administrationRequest>
    &lt;description value="Penicillin VK oral suspension12510"/>
    &lt;totalPeriodicDose>
      &lt;numerator>
        &lt;value value="1250"/>
        &lt;units value="mg"/>
        &lt;code value="mg"/>
      &lt;/numerator>
      &lt;denominator>
        &lt;value value="1"/>
        &lt;units value="day"/>
        &lt;code value="d"/>
      &lt;/denominator>
    &lt;/totalPeriodicDose>
    &lt;duration>
      &lt;value value="10"/>
      &lt;units value="days"/>
      &lt;code value="d"/>
    &lt;/duration>
    &lt;dosageInstruction>
      &lt;doseQuantity>
        &lt;value value="125"/>
        &lt;units value="mg"/>
        &lt;code value="mg"/>
      &lt;/doseQuantity>
      &lt;schedule>
        &lt;repeat>
          &lt;frequency value="10"/>
          &lt;duration value="10"/>
        &lt;/repeat>
      &lt;/schedule>
    &lt;/dosageInstruction>
  &lt;/administrationRequest>
  &lt;reason>
    &lt;text value="Headache"/>
  &lt;/reason>
&lt;/Prescription></return></ns2:validatePrescriptionResponse>
   </soapenv:Body></soapenv:Envelope> 
```

请帮忙

-大师@gnanagurus

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:37:00.570

您能否确保正确设置了 contentType，它应该是“application/xml”

```
 <parameter name="transport.jms.ContentType">
            <rules>
                <jmsProperty>contentType</jmsProperty>
                <default>application/xml</default>
            </rules>
        </parameter> 
```

请参阅下面的示例配置。

```
<definitions xmlns="http://ws.apache.org/ns/synapse">
    <proxy name="StockQuoteProxy" transports="jms">
        <target>
            <endpoint>
        <address uri="http://localhost:9000/services/SimpleStockQuoteService"/>
            </endpoint>
            <outSequence>
                <property action="set" name="OUT_ONLY" value="true"/>
        <send/>
            </outSequence>
        </target>
        <publishWSDL uri="http://localhost:9000/services/SimpleStockQuoteService?wsdl"/>
        <parameter name="transport.jms.ContentType">
            <rules>
                <jmsProperty>contentType</jmsProperty>
                <default>application/xml</default>
            </rules>
        </parameter>
    </proxy>
</definitions> 
```

完整的 Artical 可以从 [1] 访问。

[1]。[http://wso2.org/library/articles/2011/11/wso2-esb-example-two-wayrequestresponse-semantic-jms](http://wso2.org/library/articles/2011/11/wso2-esb-example-two-wayrequestresponse-semantic-jms)

谢谢你，达沙那。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:12:31.053

您是否尝试过通过 SOAPUI 调用外部服务并查看它是否正确返回响应。在 log 级别 full 的 callout mediator 之后进一步添加一个 log mediator，并查看构造的消息是否是 XML 转义的，如图所示。这将有助于隔离问题。如果可能，也粘贴您的配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:10:37.463

如果您在从 ESB 发送的 JMS 队列中发现了上述格式错误的 XML 消息，我认为它不会发生。因为无法处理格式错误的 xml 消息。我认为问题出在您的队列浏览器中？它将 xml 标签 < 转换为`"&lt; "`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T11:01:34.183

这是我的 ESB 代理配置： 这是我的代理配置：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="ESBTESTProxy" transports="https,http,jms" statistics="enable" trace="enable" startOnLoad="true">
   <target>
      <inSequence>
         <property name="ContentType" value="text/plain"/>
         <class name="com.guru.test.HEALTH_Mediator"/>
         <callout serviceURL="http://localhost:8080/PrescriptionValidation/validate" action="urn:validatePrescription">
            <source xmlns:s12="http://www.w3.org/2003/05/soap-envelope" xmlns:s11="http://schemas.xmlsoap.org/soap/envelope/" xpath="s11:Body/child::*[fn:position()=1] | s12:Body/child::*[fn:position()=1]"/>
            <target xmlns:s12="http://www.w3.org/2003/05/soap-envelope" xmlns:s11="http://schemas.xmlsoap.org/soap/envelope/" xpath="s11:Body/child::*[fn:position()=1] | s12:Body/child::*[fn:position()=1]"/>
         </callout>
         <property name="RESPONSE" value="true"/>
         <header name="To" action="remove"/>
         <send>
            <endpoint>
               <address uri="jms:/OutputQueue?transport.jms.ConnectionFactoryJNDIName=QueueConnectionFactory&java.naming.factory.initial=org.apache.activemq.jndi.ActiveMQInitialContextFactory&java.naming.provider.url=tcp://localhost:61616"/>
            </endpoint>
         </send>
      </inSequence>
      <outSequence>
         <drop/>
      </outSequence>
   </target>
   <publishWSDL uri="http://localhost:8080/PrescriptionValidation/validate?wsdl"/>
   <parameter name="transport.jms.ContentType">
      <rules>         
         <jmsProperty>contentType</jmsProperty>         
         <default>application/xml</default>      
      </rules>
   </parameter>
   <description></description>
</proxy> 
```

让我知道你的想法。

-大师@gnanagurus

# c# - 使用 winform 的 C# auto billno

> ID：15675030
> 
> 赞同：0
> 
> 时间：2013-03-28T05:45:22.700
> 
> 标签：c#, winforms

```
 public void AutoBillNo()
    {
        int billno = 0;
        billno++;
        txtBillNo.Text = Convert.ToString(Convert.ToInt64(txtBillNo.Text) + 1);
    }

    private void Bill_Load(object sender, EventArgs e)
    {            
       AutoBillNo();
    } 
```

它工作正常，但重新运行 winform 文本框后显示
1 。它不会在文本框中显示增加值。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:57:48.893

你永远不会使用 billno。您总是从文本框中获取值。

我会做以下事情：

```
private static int billno = 1;
public void AutoBillNo()
{
     txtBillNo.Text = billno.ToString();
     ++billno;
} 
```

但是请注意，如果您重新启动程序，则 billno 再次为 1...如果您需要保留 billno，则必须将其存储在某个地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:54:17.767

这是因为这段代码中的变量 billno 没有赋值给文本框。

当您重新运行相同的 txtBillNo.Text 再次初始化为零。

```
int billno = 0;
billno++;
txtBillNo.Text = Convert.ToString(Convert.ToInt64(txtBillNo.Text) + 1);` 
```

这应该是

```
 static int billno = 0;
 billno++;
 txtBillNo.Text = Convert.ToString(bilno); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T05:49:33.587

使您的 billno 成为全局变量（将
int billno = 0; 移出方法）。现在您在每次运行时创建它。

# javascript - Javascript：更新表单值时如何使用变量名？

> ID：15675042
> 
> 赞同：1
> 
> 时间：2013-03-28T05:46:10.830
> 
> 标签：javascript

这是函数的一部分：

```
function updateResponse(question, answer) {
    questionId = 'q'+question;
    document.forms[0].questionId.value = answer; 
```

使用以下内容调用函数：

```
<td onClick='javascript:updateResponse(1, 1);'> 
```

我希望它更新的表单元素看起来像：

```
<input type='hidden' name='q1' value='' /> 
```

使用 Firefox Web 控制台，我得到：

```
TypeError: document.forms[0].questionId is undefined 
```

谢谢！

更新：经过多次谷歌搜索后发现它并且它有效。不过，似乎还有一种更优雅的方式可以实现这一目标？

```
eval(\"document.forms[0].\"+questionId+\".value = answer;\"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:49:18.757

如果您确定表单中有一个名为 questionId 的输入：

`document.forms[0][questionId].value`

你应该使用 var 来避免全局变量：

`var questionId = 'q' + question;`

# python - 多处理和 GUI 更新 - Qprocess 还是多处理？

> ID：15675043
> 
> 赞同：6
> 
> 时间：2013-03-28T05:46:27.553
> 
> 标签：python, multithreading, qt, user-interface, multiprocessing

在阅读了有关 QProcesses 和 python 多处理模块的文献后，我仍然无法在后台运行大型进程的过程中创建一个工作且响应迅速的 GUI。到目前为止，我已经提出了我的应用程序的这个简化版本，它仍然显示出与许多人描述的类似的问题。

```
from PyQt4 import QtCore, QtGui
import multiprocessing as mp
import numpy as np
import sys
class Spectra:
    def __init__(self, spectra_name, X, Y):
        self.spectra_name = spectra_name
        self.X = X
        self.Y = Y
        self.iteration = 0

    def complex_processing_on_spectra(self, pipe_conn):
        self.iteration += 1
        pipe_conn.send(self.iteration)

class Spectra_Tab(QtGui.QTabWidget):
    def __init__(self, parent, spectra):
        self.parent = parent
        self.spectra = spectra
        QtGui.QTabWidget.__init__(self, parent)

        self.treeWidget = QtGui.QTreeWidget(self)
        self.properties = QtGui.QTreeWidgetItem(self.treeWidget, ["Properties"])
        self.step = QtGui.QTreeWidgetItem(self.properties, ["Iteration #"])

        self.consumer, self.producer = mp.Pipe()
        # Make process associated with tab
        self.process = mp.Process(target=self.spectra.complex_processing_on_spectra, args=(self.producer,))

    def update_GUI(self, iteration):
        self.step.setText(1, str(iteration))

    def start_computation(self):
        self.process.start()
        while(True):
            message = self.consumer.recv()
            if message == 'done':
                break
            self.update_GUI(message)
        self.process.join()
        return

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent = None):
        QtGui.QMainWindow.__init__(self)

        self.setTabShape(QtGui.QTabWidget.Rounded)
        self.centralwidget = QtGui.QWidget(self)
        self.top_level_layout = QtGui.QGridLayout(self.centralwidget)

        self.tabWidget = QtGui.QTabWidget(self.centralwidget)
        self.top_level_layout.addWidget(self.tabWidget, 1, 0, 25, 25)

        process_button = QtGui.QPushButton("Process")
        self.top_level_layout.addWidget(process_button, 0, 1)
        QtCore.QObject.connect(process_button, QtCore.SIGNAL("clicked()"), self.process)

        self.setCentralWidget(self.centralwidget)
        self.centralwidget.setLayout(self.top_level_layout)

        # Open several files in loop from button - simplifed to one here
        X = np.arange(0.1200,.2)
        Y = np.arange(0.1200,.2)
        self.spectra = Spectra('name', X, Y)
        self.spectra_tab = Spectra_Tab(self.tabWidget, self.spectra)
        self.tabWidget.addTab(self.spectra_tab, 'name')

    def process(self):
        self.spectra_tab.start_computation()
        return

if __name__ == "__main__":
    app = QtGui.QApplication([])
    win = MainWindow()
    win.show()
    sys.exit(app.exec_()) 
```

如果您有依赖项，这应该完全能够执行。目前，我的程序有一个 QThreaded 版本，它适用于信号和插槽；然而，我认为拥有使用所有计算机处理器的能力很重要，因为大多数用户都有大约 8 个内核可供他们使用。因此，我想使用`multiprocessing`or `QProcess`es 将此信号/插槽线程方法扩展到多处理版本。
有人对是否使用`QProcess`or有建议`multiprocessing`吗？虽然它们对我来说都很复杂，但 QProcess 似乎使用 pyQt 的论坛较少，所以我选择了多处理。使用 QProcess 会更简单吗，因为我已经有信号/插槽与线程一起使用？

***编辑：***我应该按照建议添加这样的课程吗？

```
class My_Process(QtCore.QProcess):
    def __init__(self, spectra):
        QtCore.QProcess.__init__(self)
        self.spectra = spectra

    def worker(self):
        QtConcurrent.run(self.spectra, self.spectra.complex_processing_on_spectra)

    def run(self):
        QtCore.QObject.connect(self, QtCore.SIGNAL(QTimer.timeout()), self.worker) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-11-20T09:39:22.377

即使这个问题很老并且已经得到回答，我还是想补充一些说明：

*   AFAIK`QtConcurrent`在 PyQt 中不可用。
*   Qt 中的 C++ 线程不同于 PyQt 或 python 线程。后者在运行时需要获取 python `GIL`（全局解释器锁），这实际上意味着 python/pyqt 线程之间没有真正的并发。

Python 线程可以保持 gui 响应，但您不会看到 cpu 绑定任务的任何性能改进。我建议在处理与子进程通信的主进程上`multiprocessing`与 a 一起使用。`QThread`您可以在主（gui）和通信线程之间使用信号和槽。

![在此处输入图像描述](../Images/c159a57e6c2a5125e71a3c55807f0f9e.png)

编辑：我只是遇到了同样的问题，并按照以下方式做了一些事情：

```
from multiprocessing import Process, Queue
from PyQt4 import QtCore
from MyJob import job_function

# Runner lives on the runner thread

class Runner(QtCore.QObject):
    """
    Runs a job in a separate process and forwards messages from the job to the
    main thread through a pyqtSignal.

    """

    msg_from_job = QtCore.pyqtSignal(object)

    def __init__(self, start_signal):
        """
        :param start_signal: the pyqtSignal that starts the job

        """
        super(Runner, self).__init__()
        self.job_input = None
        start_signal.connect(self._run)

    def _run(self):
        queue = Queue()
        p = Process(target=job_function, args=(queue, self.job_input))
        p.start()
        while True:
            msg = queue.get()
            self.msg_from_job.emit(msg)
            if msg == 'done':
                break

# Things below live on the main thread

def run_job(input):
    """ Call this to start a new job """
    runner.job_input = input
    runner_thread.start()

def handle_msg(msg):
    print(msg)
    if msg == 'done':
        runner_thread.quit()
        runner_thread.wait()

# Setup the OQ listener thread and move the OQ runner object to it
runner_thread = QtCore.QThread()
runner = Runner(start_signal=runner_thread.started)
runner.msg_from_job.connect(handle_msg)
runner.moveToThread(runner_thread) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T08:15:42.210

`QProcess`用于读取和写入管道（shell/cmd）。使用其中之一。

1.  创建一个具有工作函数的类并将其作为线程运行`QtConcurrent.run(object, method, args)`
2.  `QTimer.timeout()`与您的工作人员功能连接。

# php - AJAX 关闭图像在 Chrome 中运行时无法在 Firefox 上运行

> ID：15675045
> 
> 赞同：0
> 
> 时间：2013-03-28T05:46:33.250
> 
> 标签：php, javascript

关闭图像 close2.jpg,close1.jpg 在 Firefox 中不起作用，而在 Google Chrome 和 IE 中运行。URL 是 www.srfads.com --> 主页--> 在印度查找广告--> 点击更改

* * *

## 我的 js 文件是

```
enter code here
function show(id,x,y)
{
    var element = document.getElementById(id);
    //var exit_element = document.getElementById(exit_id);
    var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth;
    if(width == 0)
    {
        width = 1280;
    }
    var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight;
    if(height == 0)
    {
        height = 786;
    }
    element.style.position = "absolute";
    element.style.display = "block";

    element.style.left = (document.documentElement.scrollLeft + (width - element.clientWidth)/2 + x) + 'px';
    element.style.top = (document.documentElement.scrollTop + (height - element.clientHeight)/2 + y) + 'px';

    var xmlhttpobject = new XMLHttpRequest();
    xmlhttpobject.open("GET","sct.php",true);
    xmlhttpobject.send();
    xmlhttpobject.onreadystatechange = function ()
    {
        if(xmlhttpobject.readyState == 4 && xmlhttpobject.status == 200)
        {
            document.getElementById('shct').innerHTML = xmlhttpobject.responseText;
        }
    }
} 
```

## 我的 php 页面是

改变

```
 <div id="showcity" style="display:none;border:8px solid rgb(120,120,120); border-radius:8px;">
                            <table style="background:white;">
                            <tr>
                                <td style="text-align: left;padding: 10px; width:300px; height:20px;border-bottom:1px solid;">Select a City</td>
                                <td style="text-align: right;padding: 10px; width:300px; height:20px;border-bottom:1px solid;">
                                <div id="clsdiv1" style="display: block;"><img src="img\close2.jpg" id="close1" onmouseover="show1()" /></div>
                                <div id="clsdiv2" style="display: none;"><img src="img\close1.jpg" id="close2" onmouseout="show2()" onclick="popupexit('showcity')" /></div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" style="height:200px;">
                                <div id="shct"></div>
                                </td>
                            </tr>
                            </table>
                        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:57:44.683

将移动这条线：

> xmlhttpobject.send();

在此代码下方：

```
xmlhttpobject.onreadystatechange = function ()
{
    if(xmlhttpobject.readyState == 4 && xmlhttpobject.status == 200)
    {
        document.getElementById('shct').innerHTML = xmlhttpobject.responseText;
    }
} 
```

帮助？

# c++ - 我的函数不会停止返回 -1

> ID：15675048
> 
> 赞同：0
> 
> 时间：2013-03-28T05:46:42.357
> 
> 标签：c++, arrays, math

所以我的函数以降序积分多项式。

例如，3X^3-2x+1 = [3 0 2 1]

当然有限制，但这只是为了练习。

除非我输入一个 0 数组，否则我的积分会一直以 -1 或不正确的形式返回。

这给我带来了另一个问题，当输入前几个数字时，如果我输入一个非数字，它就会卡在我的 goto 循环中。我知道我不应该使用这些，请告诉我如何不使用它。

这是我的代码：

```
#include <iostream>
#include "eval.h"
int main ()
{
        using namespace std;              // yes i know using std:: is better... but I got lazy

        cout<<"This program takes the coefficients of a polinomial in decreasing \n "
                "degree. For example, x^2-1 = [1 0 -1] \n";
                                          // explains to the user what the function does, and         how to use it

        int columns;
            cout<<"Enter The highest degree plus one \n ";  // in other words, how many elements     the array will have
            cin>> columns;
            cout<<"Enter Your Coefficients\n ";

        float myMatrix[columns];                            //This was a code for practice, so I     decided to use for loops to get user input

                for (int i = 1; i<columns+1; ++i)
                {
                    cin>>myMatrix[i];
                }
                                                            //Im well aware i could have used other things
        float skeletonMatrix[columns+1];

                for (int ii = 1; ii< columns+8;++ii)        //for loop that injects user array into a skeleton matrix which is one element bigger beacuse of +C
                {
                    skeletonMatrix[ii] = (myMatrix[ii]/(columns+1-ii));
                }

            cout<<"The Integral is"<<endl;
                for (int iii = 1; iii<columns+1; ++iii)
                {
                        if (skeletonMatrix[iii] == 0 )
                        {
                            continue;
                        }
                    cout<<skeletonMatrix[iii]<<"x^"<<columns+1-iii<<" + ";
                }
            cout<<"C"<<endl;                                // Obviously I have not added the +C element because I will do that at another point, for a different purpose

            cout<<"Do you wish to Evaluate the Integral??? \n ";
            cout<<"Y of yes, N for no";
        char chYorN;
tryagain:
            cin>>chYorN;
        double dScalara;
        double dScalarb;
        double integral;
                switch(chYorN)
                {

                    case 'y':
                        {
                            cout<<"Enter where you want the integral \n to be evaluated"<<endl;
                            cout<<"e.g. from a to b would be a, then b"<<endl;
                            cin>>dScalara;
                            cin>>dScalarb;
                            integral = (eval(columns , dScalarb , myMatrix) - eval(columns , dScalara , myMatrix));
                            cout<<"The integral is"<< integral <<endl;
                        break;
                        }

                    case 'n':
                        {
                            cout<<"Thank you for using my program"<<endl;
                        break;
                        }

                    default:                                // At the matrix input, input a non number, and the program will go to this for some reason
                        {
                            cout<<"Try again Brah";
                        goto tryagain;                      // <-----im afraid it has to do with this, please show me how to replace this
                        }
                }

    return 0;
} 
```

我的 Eval.h 如下：

```
#ifndef EVAL_H
#define EVAL_H
#include <math.h>

double eval(int columns, double dScalar, float myMatrix[])
{
    double dSum;
            for (int i=0; i<columns ; ++i)
            {
                myMatrix[columns-i]= myMatrix[columns-i]*(pow(dScalar,(double)i)); //evaluates a     function at dScalar
            }

            for (int ii=1; ii<columns+1;++ii)                                      // sums up the different parts
            {
                dSum+=myMatrix[ii];
            }

    return dSum;
}
#endif 
```

如果有另一种显示我的数组的方式，请告诉我。我希望我可以连续显示它，而不是一列。

也是一个二维数组。我希望它显示如下：

1 0 2 2 0

0 1 2 3 0

0 0 0 0 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:00:35.500

错误的一个可能原因可能是您的 goto 语句将控件放在变量声明之前。而不是这个：

```
tryagain:
    cin>>chYorN;
    double dScalara;
    double dScalarb;
    double integral;
            switch(chYorN)
            { 
```

试试这个：

```
double dScalara;
double dScalarb;
double integral;
tryagain:
    cin>>chYorN;
    switch(chYorN)
     { 
```

另外，请注意数组索引从零开始。如果有`int a[3]`，它将被存储为`a[0], a[1], a[2]`而不是`a[1], a[2], a[3]`。（在我打字的时候，@Ed Heal 给出了一个关于这个的答案。所以，我不会详细说明）。

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:51:19.517

你访问的各种数组都不正确。

例如这段代码：

```
 float myMatrix[columns];
    for (int i = 1; i<columns+1; ++i)
            {
                cin>>myMatrix[i];
            } 
```

应该

```
 float myMatrix[columns];

            for (int i = 0; i<columns; ++i)
            {
                cin>>myMatrix[i];
            } 
```

由于数组的索引从 0 开始，因此最终索引为`columns-1`.

您在其他各种阵列中也有类似的问题。

此错误将导致未定义的错误。

# php - 自动从下拉列表中获取第一项到输入

> ID：15675049
> 
> 赞同：1
> 
> 时间：2013-03-28T05:46:51.727
> 
> 标签：php, jquery, html, mysql, input

是否可以自动从下拉列表中获取第一项到页面加载时的输入？例如，下拉列表有 2 个选项：`happy`& `sad`。当页面加载时，我想`happy`在页面加载时输入。到目前为止，我得到了一个空输入，用户需要在下拉列表中选择选项。

jQuery代码：

```
<script type="text/javascript">
    $(document).ready(function() { 
        $("#username_select").change(function() { 
            $("#username_custom").val($(this).val());
        });
    });
</script> 
```

用户名_自定义 ID：

```
<input id="username_custom" name="custom" value="
<?php 
if(isset($_POST['getusername'])) {

$getusername = $_POST['getusername']; 
echo "".$getusername."";

}
if(empty($_POST['username'])) {

    echo "".$row['username']."";

}
?>
"> 
```

用户名_选择 ID：

```
<select id="username_select" name="getusername">
<?php
    $username = $_SESSION['username'];

    $result = mysql_query("SELECT username FROM account WHERE websiteusername='".$username."'");

while($row = mysql_fetch_array($result)) {

    echo "<option value='".$row['username']."'>".$row['username']."</option>";

}
?>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:48:25.180

在输入中显示选择的选定值

```
$("#YourInputId").val($("#username_custom").val()); 
```

设置选择的第一个选项文本

```
$("#YourInputId").val($("#username_custom option:eq(0)").text()); 
```

在选择更改时更改文本框值

```
$(document).ready(function() { 
    $("#username_select").change(function() { 
        $("#username_custom").val($(this).val());
        $("#YourInputId").val($("#username_custom").val());
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:54:03.163

在这一行

```
echo "<option value='".$row['username']."'>".$row['username']."</option>"; 
```

您可以将 SELECTED 添加到要选择的选项中。您可以在 while 循环中使用变量来找出您所在的项目并选择该项目；

例如。

```
$ctr = 0;

while($row = mysql_fetch_array($result)) {

   echo "<option value='".$row['username']."'" . ( $ctr == 1 ? "selected" : "" ) . ">".$row['username']."</option>";
   $ctr++
} 
```

希望这可以帮助。干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T05:59:10.533

在这种情况下，您还可以调用下拉的更改事件。

```
$("#username_select").change(); 
```

# android - Android UiAutomator 测试

> ID：15675055
> 
> 赞同：0
> 
> 时间：2013-03-28T05:47:09.483
> 
> 标签：android, exception, android-uiautomator

我创建了一个简单的活动，其中有 2 个用于提交和取消的按钮。我只想通过使用 UI Automator 测试来测试这个项目。所以我创建了一个android测试项目并创建了一个类。我让这个测试类扩展`UiAutomatorTestCase`。我还添加了 uiautomator.jar、android.jar 以及 junit3 库。但是当我运行测试用例时，它给了我一个关于

> TestSuiteConstruction 失败和 java.lang.RuntimeException。

但是我添加了构造函数，但由于它不带任何参数，所以我无法添加任何参数。这是我的测试用例代码。请尽快解决此错误。你能告诉我任何我没有在我的项目中添加的东西吗？

```
package com.example.automatorapp.test;

import android.test.suitebuilder.TestSuiteBuilder;
import android.util.Log;

import com.android.uiautomator.core.UiObjectNotFoundException;
import com.android.uiautomator.testrunner.UiAutomatorTestCase;
import com.example.automatorapp.MainActivity;

public class testDemo1 extends UiAutomatorTestCase
{
    public testDemo1()
    {

    }

    public void testdemo() throws UiObjectNotFoundException
    {   
        getUiDevice().pressHome();
        Log.e("how r u","hello");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:31:24.987

尝试更改类的名称，使其不**以**“test”开头并删除构造函数。按照惯例，类的名称以大写字母开头，您的则以小写的“t”开头。同样，按照惯例，JUnit3 测试类将“测试”一词放在末尾。[http://junit.sourceforge.net/junit3.8.1/javadoc/junit/framework/TestCase.html](http://junit.sourceforge.net/junit3.8.1/javadoc/junit/framework/TestCase.html)因此，在您的示例中，testdemo1 的类名将是 Demo1Test 行（记住文件名需要与类名匹配）。

然而，令我惊讶的是，您的代码的稍微修改版本在我的机器上运行。这是运行正常的代码。

```
package com.example.automatorapp.test;

import android.util.Log;
import com.android.uiautomator.core.UiObjectNotFoundException;
import com.android.uiautomator.testrunner.UiAutomatorTestCase;

public class testDemo1 extends UiAutomatorTestCase
{
    public testDemo1()
    {
    }
    public void testdemo() throws UiObjectNotFoundException
    {
        getUiDevice().pressHome();
        Log.e("how r u","hello");
    }
} 
```

我也收到了 Android 日志中的日志消息。

`E/how r u (24667): hello`

因此，您的项目设置或构建环境可能存在一些问题。据我所知，这个项目（用于测试）应该独立于您要测试的应用程序的代码或项目。但是，您有一个要测试的应用程序的导入。

`import com.example.automatorapp.MainActivity;`

您现在已经发布了很多与 UI Automator 相关的问题，也许您可​​以总结一下您目前的进展。例如，您是否曾经成功运行过 UI Automator 测试？

PS：我希望看到一些反馈来回答你之前的问题。没有您的反馈，很难知道您的前进方向以及答案是否与您相关或对您有用。

# neo4j - 如何为 auto_index 配置 to_lower_case 属性

> ID：15675057
> 
> 赞同：1
> 
> 时间：2013-03-28T05:47:31.360
> 
> 标签：neo4j

我想将 auto_index 设为默认值“to_lower_case”，以便对 auto_index 的搜索对大小写不敏感。我应该怎么做？

尝试在手册，论坛等中查找，但没有成功。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:30:14.113

我认为您可以将索引配置为全文索引，这将帮助您进行不区分大小写的搜索。

配置：

[http://docs.neo4j.org/chunked/stable/rest-api-configurable-auto-indexes.html](http://docs.neo4j.org/chunked/stable/rest-api-configurable-auto-indexes.html)

[http://docs.neo4j.org/chunked/milestone/indexing-create-advanced.html](http://docs.neo4j.org/chunked/milestone/indexing-create-advanced.html)

# ms-access-2007 - 将行从一个表插入到另一个表中，并在 MS Access 数据库中增加 PK 列值

> ID：15675059
> 
> 赞同：0
> 
> 时间：2013-03-28T05:47:35.037
> 
> 标签：ms-access-2007, rownum

我们有两个表，table1(id int,name nvarchar(50)) 和 table2(id int,name nvarchar(50))。对于这两个表，id 都是主键。我想将行从 table2 移动到 table1，PK 值递增，即我希望 table1 的 id=max(id)+1 用于所有行复制。我发现这个查询像这样用于 sql server

```
declare @root int 
select @root=max(id) from Bgd_common.dbo.table1 
insert into Bgd_common.dbo.table1(id,Name) select @root + ROW_NUMBER() OVER(ORDER BY ID),name from Bgd_common.dbo.table2 
```

但是 ROW_NUMBER() 不适用于 Acces 数据库。我不想使用内置的自动增量属性，因为我想删除一行然后在中间插入行等，内置的自动增量属性会对操作造成一些限制。我如何在 MS 访问中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:15:31.260

这是可以解决您的问题的链接 [http://www.vb123.com/toolshed/07_access/countercolumn.htm](http://www.vb123.com/toolshed/07_access/countercolumn.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:44:50.477

table1 ID 是自动编号吗？如果是，您可以简单地将 table2 复制`[name]`到 table1 并且值将增加。如果它不是自动编号，最好将其设为一个。MS Access 与自动编号 ID 配合得非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T05:30:36.967

我使用 Dcount 代替 Row Number() 并且它有效！这是最终查询

```
insert into Bgd_common.dbo.table1(id,Name) select (select max(id) from Bgd_common.dbo.table1) + Dcount("id","test2","id <= " & [id]) ,name from Bgd_common.dbo.table2 
```

# javascript - 如何从 dataurl 在服务器上创建图像文件

> ID：15675063
> 
> 赞同：3
> 
> 时间：2013-03-28T05:47:58.437
> 
> 标签：javascript, image, data-url

我有一个 dataurl 格式的图像，例如：

```
data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgMDAwMEAwME…iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/2Q== 
```

我需要将 JavaScript 中的这个字符串转换为另一个可以直接复制到空白 jpg 文件的字符串，以便用户查看。
知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-05-02T09:53:56.370

您只需从 DataURI 中删除“data:image/jpeg;base64”。

```
$dataUri = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgM...";
// remove "data:image/jpeg;base64," from image Data URI.
$data = str_replace("data:image/jpeg;base64,", "", $dataUri);

// save to file
file_put_contents("/tmp/image.jpeg", base64_decode($data)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:00:08.210

要显示它，您可以使用 src 属性：

```
<img src="data:image/png;base64,R0lGODlhUAAPAKIAAA+g4JADs=" width="80" height="80" /> 
```

要生成文件，您需要使用 canvas 元素：

例子：

```
<html>
    <head></head>
    <body>
        <canvas id="c"></canvas>
        <script type="text/javascript" src="canvas2image.js"></script>
        <script type="text/javascript" src="baseg4.js"></script>
        <script type="text/javascript">

            var canvas = document.getElementById("c");
            var ctx = canvas.getContext("2d");

            var image = new Image();
            image.src = "data:image/png;base64,iVBORw0KG............5CYII%3D";
            image.onload = function()
            {
               ctx.drawImage(image, 0, 0);
                var foo = Canvas2Image.saveAsPNG(canvas);  
            };
            var img = canvas.toDataURL("image/png");
        </script>
    </body>
</html> 
```

并保存图像和东西......您可以在此链接中找到将画布转换为文件的方法：

// [http://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)

编辑：新链接，我猜... [https://github.com/hongru/canvas2image](https://github.com/hongru/canvas2image)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T06:26:39.950

如果您希望用户能够下载文件并将其保存在计算机上的某个位置，请尝试以下操作：

```
document.location.href = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQAB…"; 
```

如果这是您要执行的操作，请参阅[下载数据 url 文件。](https://stackoverflow.com/questions/3916191/download-data-url-file)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-06T06:19:18.160

您必须`data:image/jpeg;base64,`从中删除`dataURI`并解码`dataURI`：

```
public void saveImage(String imageURI) {
    BufferedImage image = null;
    String blobString=imageString.replace("data:image/jpeg;base64,", "");
    byte[] byteArray = Base64.getDecoder().decode(blobString);
    ByteArrayInputStream bis = new ByteArrayInputStream(byteArray);
    try {
        image = ImageIO.read(bis);
        File file = new File("/home/rakesh/Vinay/a.jpeg");
        ImageIO.write(image, "jpeg", file);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# .net - 使用 Linq 搜索列表内容

> ID：15675077
> 
> 赞同：1
> 
> 时间：2013-03-28T05:48:34.817
> 
> 标签：.net, linq, c#-4.0, linq-to-objects

我有对象列表，其中包含以下模式的值

```
2$FirstLevel+HRMS

2#40#56$SecondLevelOperation+Add

2#60$SecondLevel+dffddfdf 
```

使用 Linq 我想选择其中包含“2”值且不包含“操作”字样的记录。这意味着它应该只选择第一个和第三个值而不是第二个值。如何存档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:51:09.777

由于您表示您有一个*List of objects*，我不认为它是一个`List<string>`（或另一个可枚举的字符串）。如果是，请省略`OfType<string>`, 因为它是多余的。除此之外，以下代码应该可以帮助您入门。

```
var results = list.OfType<string>().Where(item => item.Contains("2") && !item.Contains("Operation")); 
```

如果列表中的任何项目可能为空，您可能需要添加适当的空检查（或处理）以适应这些条目。

# python - 从类中的另一个函数调用一个函数

> ID：15675079
> 
> 赞同：1
> 
> 时间：2013-03-28T05:48:52.803
> 
> 标签：python, python-2.7, wxpython

我的课是，

```
 class MainFrame(wx.Frame):
     def __init__(self,parent,ID,title):
         wx.Frame.__init__(self, parent, ID, title, style=wx.DEFAULT_FRAME_STYLE ^   wx.RESIZE_BORDER ^ wx.MAXIMIZE_BOX,size=(600,500))
         wx.Frame.CenterOnScreen(self) 
         ..........
         ..........
         panel1 = wx.Panel(panel, wx.ID_ANY,size=(550,200),pos=(25,150))
         log = wx.TextCtrl(panel1, wx.ID_ANY, size=(550,200),style = wx.TE_MULTILINE|wx.TE_READONLY|wx.HSCROLL)

     def PanelStatus(message):
         ............... 
```

我想从函数'PanelStatus'中的函数' **init** '调用方法Panel1，然后在另一个类中调用这个函数。怎么做？我对编程语言很陌生。帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:59:33.047

首先，你需要给你的`PanelStatus`函数一个新的第一个参数`self`。那是因为它是一个方法，并且方法会自动获取它们被调用的实例作为第一个参数传递（名称`self`是一个约定）。

然后，您可以从`__init__`with调用它`self.PanelStatus("some message")`。如果程序其他部分的其他代码引用了一个`MainFrame`实例，它们可以调用`myMainFrame.PanelStatus("some other message")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:38:05.510

我做了这样的事情，它对我有用。

```
class MainFrame(wx.Frame):
    def __init__(self,parent,ID,title):
        wx.Frame.__init__(self, parent, ID, title, style=wx.DEFAULT_FRAME_STYLE ^ wx.RESIZE_BORDER ^ wx.MAXIMIZE_BOX,size=(600,500))
        .......
        .......
        panel1 = wx.Panel(panel, wx.ID_ANY,size=(550,200),pos=(25,150))
        self.log = wx.TextCtrl(panel1, wx.ID_ANY, size=(550,200),style = wx.TE_MULTILINE|wx.TE_READONLY|wx.HSCROLL)

    def PanelStatus(self,message):
        self.log.AppendText(message) 
```

并在另一个函数中使用***了 self.PanelStatus("my text") 。***

# c# - 即使我在 C# 中使用 close() 关闭应用程序进程工作背景？

> ID：15675087
> 
> 赞同：0
> 
> 时间：2013-03-28T05:49:37.087
> 
> 标签：c#, windows, backgroundworker

我正在使用 c# 在 Windows 应用程序中编程。

我想使用 this.close() 关闭应用程序；

我的应用程序窗口已关闭。但我尝试删除该应用程序文件，它显示“该文件被另一个进程使用”？

注意：我也在该应用程序中使用 backgroundrunner。如果它对上述问题有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:32:54.993

在退出 main 方法之前尝试调用此函数。

workerThread 是后台工作者

```
public void Abort()
{
    if (workerThread != null)
    {
        workerThread.Abort();
        workerThread = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:09:05.913

当您使用 时`this.Close()`，您正在关闭窗口窗体而不是应用程序。

即使您明确关闭表单，您在应用程序中发出的后台运行程序仍将在后台运行。这就是你收到消息的原因。

如果忙于进程，您可能还需要检查后台工作人员的类型，并在关闭应用程序之前优雅地处理它以终止/完成请求。前台线程会`Application.Exit`继续终止，后台不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T05:52:26.750

尝试使用[Application.Exit](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.exit.aspx)关闭您的应用程序。

> 通知所有消息泵它们必须终止，然后在处理完消息后关闭所有应用程序窗口。

# c++ - 如何检测C中的浮点下溢

> ID：15675091
> 
> 赞同：4
> 
> 时间：2013-03-28T05:50:05.750
> 
> 标签：c++, c, floating-point, underflow

我需要有关如何以标准方式检测浮点下溢的帮助和示例代码，而不使用第三方库和有符号和无符号的异常。我用谷歌搜索，发现各种作者都在谈论“逐渐下溢算不算下溢”？谁能解释一下什么是逐渐下溢？我需要检查这两种情况

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:30:10.377

查看“逐渐下溢”的热门搜索结果并没有给出明确直接的答案，因此：

IEEE-754 二进制浮点数在它们的大部分范围内都有一个规则模式：有一个符号、一个指数和一个具有一定位数的有效位（24 位代表 32 位`float`，53 位代表 64 位`double`）。但是，图案必须在末端打断。在高端，对于最大指数来说太大的结果将变为无穷大。在低端，我们有一个选择。

一种选择是，如果结果低于最低指数，则将结果四舍五入为零。但是，IEEE-754 使用了一种不同的方案，称为逐渐下溢。最低指数保留用于与常规指数不同的格式。

对于普通指数，24 位有效数为“1”。后跟在有效位字段中编码的 23 位。当数为次正规数时，指数与最低正则指数具有相同的值，但 24 位有效数为“0”。其次是 23 位。这是逐渐下溢，因为随着数字变小，在我们达到零之前，它们的精度越来越低（有效数字中的更多前导位为零）。

渐进下溢有一些很好的数学性质，特别是`a-b == 0`当且仅当`a == b`. `a-b == 0`对于突然的下溢，即使`a`和`b`不同，也有可能是因为`a-b`太小而无法以浮点格式表示。随着逐渐溢出，所有可能的值`a-b`, 对于小的`a`和`b`, 都是可表示的，因为它们只是具有最低指数的有效数字的差异。

确定是否发生浮点下溢的另一个问题是允许实现（根据 IEEE-754 标准）基于舍入前后的测试报告下溢。在计算结果时，浮点实现实际上必须执行以下步骤：

*   计算精确结果的符号、指数和有效位。
*   将结果四舍五入以适合浮点格式。如果有效数字向上取整，这可能会增加指数。

该标准允许实现通过以下任一方式报告下溢：

*   计算精确结果的符号、指数和有效位。
*   指数是否小于正常范围？如果是，报告下溢。
*   将结果四舍五入以适合浮点格式。如果有效数字向上取整，这可能会增加指数。

或者：

*   计算精确结果的符号、指数和有效位。
*   将结果四舍五入以适合浮点格式。如果有效数字向上取整，这可能会增加指数。
*   指数是否小于正常范围？如果是，报告下溢。

因此，对于相同的计算，两种不同的浮点实现可能会返回关于下溢的不同报告。

（还有一些关于处理下溢的附加规则。上面会导致发出下溢异常信号。但是，如果未启用来自此异常的陷阱并且结果是精确的 [舍入没有改变任何东西]，那么“下溢”将被忽略, 并且不引发下溢标志。如果结果不准确，则引发下溢并发出不准确的异常信号。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:56:20.503

检查“下溢”位的浮点状态字，或捕获下溢浮点异常信号。看：

[http://www.gnu.org/software/libc/manual/html_node/FP-Exceptions.html](http://www.gnu.org/software/libc/manual/html_node/FP-Exceptions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:00:43.570

```
template <typename T>
class Real
{
  public:
    Real(T x) : x_(x) { }
    Real& operator/=(T rhs)
    {
        if (x_)
        {
            x_ /= rhs;
            if (!x_)
                do whatever you want for underflow...
        }
    }
    friend Real operator/(Real lhs, Real rhs)
        { return lhs /= rhs; }
    // similar for -= etc.
  private:
    T x_;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T08:58:16.390

首先，您需要在构建中启用浮点异常的生成。其次，您必须在代码中捕获它们。

我做了这样的事情（使用Visual Studio）

```
 void translateFPException( unsigned int u, EXCEPTION_POINTERS* pExp )
    {
    unsigned int fpuStatus = _clearfp(); // clear the exception 
    switch (u)
    {
    case STATUS_FLOAT_DENORMAL_OPERAND: 
        throw fe_denormal_operand(fpuStatus);
    case STATUS_FLOAT_DIVIDE_BY_ZERO: 
        throw fe_divide_by_zero(fpuStatus);
    case STATUS_FLOAT_INEXACT_RESULT: 
        throw fe_inexact_result(fpuStatus); 
    case STATUS_FLOAT_INVALID_OPERATION: 
        throw fe_invalid_operation(fpuStatus);  
    case STATUS_FLOAT_OVERFLOW: 
        throw fe_overflow(fpuStatus);   
    case STATUS_FLOAT_UNDERFLOW: 
        throw fe_underflow(fpuStatus);  
    case STATUS_FLOAT_STACK_CHECK: 
        throw fe_stack_check(fpuStatus);    
    default:
        throw float_exception(fpuStatus);
    };
    }

void initializeFloatingPointExceptionHandling()
{
    unsigned int fpControlWord = 0x00;

    _clearfp(); // always call _clearfp before enabling/unmasking a FPU exception
    // enabling an exception is done by clearing the respective bit in the control word
    errno_t success = _controlfp_s( &fpControlWord, 
                                    0xffffffff^( _EM_INVALID 
                                               | _EM_ZERODIVIDE 
                                               | _EM_OVERFLOW
                                               | _EM_DENORMAL
                                               | _EM_UNDERFLOW
                                               | _EM_INEXACT), _MCW_EM );
    if (success != 0)
    {
        stringstream errStream;
        errStream << success << " " << __FILE__ << ":" << __LINE__ << std::endl;
        throw exception(errStream.str().c_str());
    }

    _se_translator_function old =_set_se_translator(translateFPException);
}
void enableAllFPUExceptions()
{
    unsigned int oldMask = 0x00000000;

    _clearfp();
    // enabling is done by clearing the respective bit in the mask
    _controlfp_s(&oldMask, 0x00, _MCW_EM);
}

void disableAllFPUExceptions()
{
    unsigned int oldMask = 0x00000000;

    _clearfp();
    // disabling is done by setting the respective bit in the mask
    _controlfp_s(&oldMask, 0xffffffff, _MCW_EM);
} 
```

然后您必须编写自己的异常（也只是摘录，但您应该了解概念）

```
 class float_exception : public exception
{
public:
    float_exception(unsigned int fpuStatus);

    unsigned int getStatus();
protected:
    unsigned int fpuStatus;
};

class fe_denormal_operand : public float_exception
{
public:
    fe_denormal_operand(unsigned int fpuStatus);
}; 
```

# javascript - 可以用简单的javascript实现多文件上传状态栏吗？

> ID：15675093
> 
> 赞同：0
> 
> 时间：2013-03-28T05:50:09.900
> 
> 标签：javascript, jquery, file-upload

我在我的网站上有一个文件上传。

```
<form enctype="multipart/form-data" action="post.php" method="POST">
<input id="uploadInput" name="uploadedfile[]" type="file" multiple>
<input type="submit" value="PREVIEW POST">
</form> 
```

代码将预览此图像

![在此处输入图像描述](../Images/e37f2865f861135e8bdccd868f2a08d0.png)

用户选择要上传的文件后，它将显示此图像

![在此处输入图像描述](../Images/7b25a7a34c5bca4f7d36aaa65dab4b12.png)

使用 javascript，我希望在用户选择后和上传时在其旁边显示一个简单的文本。

![在此处输入图像描述](../Images/2e052e9fcce03c7f7e4e3b24b4ba1f02.png)

并在所有文件上传完成后显示上传完成

![在此处输入图像描述](../Images/24f873fd881ee5bf616c1bfbc7091b94.png)

以上可以只用javascript或jquery完成吗？

如果是，如何？

（我只是希望它简单，只显示文本。我不想要进度条。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:04:20.227

简短的回答是的，这可以使用 JavaScript 来完成。

更长的答案，在银行端和前端都有一些事情需要处理。[我建议您可以使用Jquery-file-upload](https://github.com/blueimp/jQuery-File-Upload)来完成这项工作，而不是从头开始。显然你还没有提到到目前为止你尝试了什么。因此，您可以查看[wiki 文档](https://github.com/blueimp/jQuery-File-Upload/wiki)，了解如何使其工作。

**更新** 我之前没有提到这一点，但是如果没有 Ajax（iFrame 解决方案/XHR 文件上传）并且仅使用 JavaScript，您将无法做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:42:37.550

这是一个相当简单的案例，但是要使此功能正确地跨浏览器，需要做一些工作。那里有图书馆可以为您处理大部分内容。[Fine Uploader](http://fineuploader.com)就是这样一个库。您可以使用 Fine Uploader 的“基本”模式，该模式允许您创建自己的 UI，并且仍然可以从库提供的所有跨浏览器上传代码中受益。

全面披露：我是 Fine Uploader 的主要维护者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:04:03.263

我想你想用 ajax 上传文件，请按照这个文档。[http://www.sitepoint.com/html5-ajax-file-upload/](http://www.sitepoint.com/html5-ajax-file-upload/)

# java - 缺少 Java 库 Mac osx AIR 开发人员工具

> ID：15675095
> 
> 赞同：2
> 
> 时间：2013-03-28T05:50:16.203
> 
> 标签：java, build, air, adt, ipa

我希望有人可以帮助或遇到过使用 Adob​​e AIR 开发和打包 iOS 应用程序的类似问题。我目前正在尝试将我的 as3 源代码构建到 ipa 中以安装到我的测试设备上，但不幸的是我从 java 返回了一个再次发生的错误：

```
ios-debug-package: /** adt_jar -package -target ipa-test-interpreter-simulator **/
     [java] ld: library not found for -lgcc_s.1
     [java] Compilation failed while executing : ld64

BUILD FAILED
build.xml:372: Java returned: 12 
```

我似乎找不到关于这个缺失的 java 库的任何信息。通过使用 mxmlc 编译 as3 代码，我可以通过 ADL 在同一台 Mac 上运行该应用程序，没有任何问题。据我所知，xcode、AIR sdk、我的证书和规定都设置正确，但我在这里开始没有想法了。

关于系统的几个细节：

MaxBook 13" 2006 年末运行 Mac OS X 10.7.5

AIR sdk 版本 3.5 和 flex 4.6

使用 ANT 1.9 来构建

xCode 4.6.1

在此链接中找到的操作系统的 Java 最新更新：support.apple.com/kb/dl1421

提前致谢！

# android - ActionsContentView 库 - 菜单项（展开/折叠）

> ID：15675096
> 
> 赞同：0
> 
> 时间：2013-03-28T05:50:17.977
> 
> 标签：android, android-layout, android-intent, android-widget

ActionsContentView 库是否包含任何用于展开和折叠父菜单项的方法？例如，一个菜单项可以有许多子项。在点击父项时，将显示子项。

示例：点击国家，然后新加坡、台湾和澳大利亚将出现。

国家 新加坡 台湾 澳大利亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T02:42:52.987

解决方案是在菜单项上膨胀所需的视图

// 我没有测试这个只是展示概念

```
View view = LayoutInflater.from(context_here).inflate(R.layout.the_layouttoinflate, null); 
```

# css - 以不同方式设置表格的第一列

> ID：15675097
> 
> 赞同：90
> 
> 时间：2013-03-28T05:50:25.900
> 
> 标签：css, css-selectors, padding

如果我有`table`两列，我如何指定 a`padding`或任何其他 css 以便它仅应用于`<td>`s 的第一列。另外，我如何类似地***设置第 n列的样式？***

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-03-28T05:57:13.153

您可以使用第[n 个子选择器](http://css-tricks.com/how-nth-child-works/)。

以您可以使用的第 n 个元素为目标：

```
td:nth-child(n) {  
  /* your stuff here */
} 
```

（`n`从 1 开始）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-28T06:02:31.193

如果你必须支持 IE7，一个更兼容的解决方案是：

```
/* only the cells with no cell before (aka the first one) */
td {
    padding-left: 20px;
}
/* only the cells with at least one cell before (aka all except the first one) */
td + td {
    padding-left: 0;
} 
```

也适用于`li`; 一般的同级选择器`~`可能更适合混合元素，例如标题 h1 后跟段落和子标题，然后是其他段落。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-05-26T11:15:47.320

: **nth-child()**和**:nth-of-type()**伪类允许您使用公式选择元素。

语法是**:nth-child(an+b)**，您可以将 a 和 b 替换为您选择的数字。

例如， :nth-child(3n+1) 选择第 1、4、7 个等孩子。

```
td:nth-child(3n+1) {  
  /* your stuff here */
} 
```

**:nth-of-type()**的工作原理相同，只是它只考虑给定类型的元素（在示例中）。

有关 nth-child 的更多信息 [https://developer.mozilla.org/es/docs/Web/CSS/:nth-child](https://developer.mozilla.org/es/docs/Web/CSS/:nth-child)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-28T05:52:46.540

这应该会有所帮助。它的 CSS3 :first-child 你应该说`tr`你想要样式的表格的第一个。[http://reference.sitepoint.com/css/pseudoclass-firstchild](http://reference.sitepoint.com/css/pseudoclass-firstchild)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-31T09:50:16.843

要选择表的第一列，您可以使用此语法

```
tr td:nth-child(1n + 2){
  padding-left: 10px;
} 
```

# junit4 - 使用 PowerMocking 抑制 JUnit4 中的不需要的行为

> ID：15675104
> 
> 赞同：0
> 
> 时间：2013-03-28T05:51:04.090
> 
> 标签：junit4

如何在下面的行中禁止 userComment

```
UserComment userComment = (UserComment)hibernateTemplate.getSessionFactory().getCurrentSession().createCriteria(UserComment.class).add(Example.create(userCommentOld)).uniqueResult(); 
```

我模拟了上面一行中的每个方法，但是当我调试 gettting null in

```
 add(Example.create(userCommentOld)) 
```

所以现在我想压制用户评论

有没有其他方法可以抑制..？

# automatic-ref-counting - 如何在 gnustep linux 中检查 Objective-C 2.0 ARC

> ID：15675108
> 
> 赞同：1
> 
> 时间：2013-03-28T05:51:28.470
> 
> 标签：automatic-ref-counting, objective-c-2.0

我想在 linux gnustep 环境中检查[ARC 回写](http://books.google.ru/books?id=iTQSWMJTkw4C&pg=PA70&lpg=PA70&dq=int%20writeBack%20objc&source=bl&ots=SP1BfzdVPA&sig=VJruCW4Nbwx808zA-qMj8R00yII&hl=ru&sa=X&ei=PNdTUcDmGcWm4ASEzoGoCA&ved=0CDcQ6AEwAQ#v=onepage&q=int%20writeBack%20objc&f=false)（我通过[这篇文章](http://etoileos.com/downloads/installtrunk/)准备好了）。

我有**main.m**文件：

```
#import <Foundation/Foundation.h>

__weak id obWeak;

int writeBack(id *);

int main(int argc, char * argv[]) {
    @autoreleasepool {
        id object;
    writeBack(&object);
    NSLog(@"object(%@) weak(%@)", object, obWeak);
    object=nil;
    NSLog(@"object(%@) weak(%@)", object, obWeak);
    }
    NSLog(@"weak %@", obWeak);
    return 0;
}

int writeBack(id * aValue){
    *aValue=[NSObject new];
    obWeak = *aValue;
    return 0;
} 
```

**GNUmake 文件**：

```
include $(GNUSTEP_MAKEFILES)/common.make

CC=clang

TOOL_NAME = CmdTest

${TOOL_NAME}_OBJCFLAGS = -fobjc-arc
${TOOL_NAME}_BUNDLE_LIBS += -lobjc -lgnustep-base
${TOOL_NAME}_OBJC_FILES = main.m

include $(GNUSTEP_MAKEFILES)/tool.make 
```

和 Linux**控制台输出**：

```
2013-03-28 13:50:33.840 CmdTest[7751] object(<NSObject: 0x2068c38>) weak(<NSObject: 0x2068c38>)
2013-03-28 13:50:33.842 CmdTest[7751] object((null)) weak(<NSObject: 0x2068c38>)
Segmentation fault (core dumped) 
```

如您所见，当我尝试从 @autoreleasepool 块外部调用 NSLog(@"weak %@", obWeak) 时，出现了**分段错误（核心转储） 。**

我试图在 Mac pc 上的 XCode 上编译此代码，但没有收到任何错误。你能帮我理解它有什么问题吗？

# jquery - 仅在需要时显示分页

> ID：15675109
> 
> 赞同：1
> 
> 时间：2013-03-28T05:51:31.713
> 
> 标签：jquery, ajax, pagination, datatables

我正在使用在表格[末尾](http://www.datatables.net/)添加分页的数据表。但我只想在需要时显示分页控件，而不是在只有几行时显示。我找不到任何地方来控制它。

```
$('#tblSubscriptions').dataTable({
    "bProcessing": true,
    "bServerSide": true,
    "sServerMethod": "GET",
    "aaSorting": [[0, 'asc']],
    "sAjaxSource": "<?php echo base_url() . 'data/grid/' . $website['WebsiteId']; ?>",        
    "aoColumns": [
        null,
        null,
        null,
        { "bSortable": false },
        { "bSortable": false },
        { "bSortable": false },
        { "bSortable": false }],
    "bFilter" : false,
    "bInfo" : false,
    "sPaginationType": "two_button"
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:59:31.630

您也可以在参数中添加它来实现您想要的。

```
"fnDrawCallback": function(oSettings) {
    if ($('#tblSubscriptions tr').length < 11) {
        $('.dataTables_paginate').hide();
    }
} 
```

# asp.net-mvc - Kendo UI Grid 不显示 JSON 数据

> ID：15675115
> 
> 赞同：0
> 
> 时间：2013-03-28T05:51:51.537
> 
> 标签：asp.net-mvc, json, kendo-ui, kendo-grid

我现在面临这个问题很长一段时间了，我无法绑定我的控制器操作传递给剑道 UI Grid 的 JSON 数据，之前几乎没有 JavaScript 问题，但现在它们消失了，但我的网格仍然没有显示任何结果：

在`Model`：

```
public object GetResult(string id)
    {
        var sqlCom = new SqlCommand("SELECT [No],[Desc],[Date],[Height],[Final] FROM [cr_form] WHERE [uId]=@id;", sqlConn);
        sqlCom.Parameters.AddWithValue("@id", id);

        StringBuilder sb = new StringBuilder();
        StringWriter sw = new StringWriter(sb);
        JsonWriter jsonWriter = new JsonTextWriter(sw);
        var rcrds = GETSQLRESULTS(sqlCom);

        try
        {
            int i = 0;
            if (rcrds != null || rcrds.HasRows)
            {
                //jsonWriter.WriteStartObject();
                while (rcrds.Read())
                {
                    jsonWriter.WriteStartObject(); //Changed
                    for (int j = 0; j < rcrds.FieldCount; j++)
                    {
                        jsonWriter.WritePropertyName(rcrds.GetName(j)); // column name
                        jsonWriter.WriteValue(rcrds.GetValue(j)); // value in column
                    }
                    i++;
                    jsonWriter.WriteEndObject(); //Changed
                }
                //jsonWriter.WriteEndObject();

            }

        }

        catch (Exception ex) { }
        return jsonWriter;
    } 
```

在`Controller`：

```
 public ActionResult GetRecords()
    {
        var usrObj = new User();
        var jsnRslt = usrObj.GetResult(Session["Id"].ToString());
    //Till here jsnRslt contains this string: “{"No":null,"Desc":"asfasfasfasfasfasfasfasfasfasfasfasf","Date":"2013-03-27T00:00:00","Height":0,"Final":null,"No":null,"Desc":"etwetwetwetwet","Date":"2013-03-27T00:00:00","Height":0,"Final":0,"No":null,"Desc":"asfasfasfskfjklajsfkjasklfjklasjfklajsfkljaklsfjklasjfkljasfkljlasf","Date":"2013-03-27T00:00:00","Height":0,"Final":0,"No":null,"Desc":"askjfkajsfklaskjfkajsfklaskjfkajsfklaskjfkajsfklaskjfkajsfklaskjfkajsfklaskjfkajsfklaskjfkajsfklaskjfkajsfklaskjfkajsfklaskjfkajsfklaskjfkajsfkl","Date":"2013-03-27T00:00:00","Height":0,"Final":0,"No":null,"Desc":"safasfasfasfasfasf","Date":"2013-03-27T00:00:00","Height":0,"Final":0,"No":null,"Desc":"asfasf","Date":"2013-03-27T00:00:00","Height":0,"Final":0,"No":null,"Desc":"asfasfasf","Date":"2013-03-27T00:00:00","Height":2,"Final":0}”

    //After Changes in the Model I am getting it in the required Array format:
    //{"No":null,"Desc":"asfasfasfasfasfasfasfasfasfasfasfasf","Date":"2013-03-27T00:00:00","Height":0,"Final":null}
    //{"No":null,"Desc":"etwetwetwetwet","Date":"2013-03-27T00:00:00","Height":0,"Final":0}
    //{"No":null,"Des...

        return Json(jsnRslt, JsonRequestBehavior.AllowGet);            
    } 
```

在`View`：

```
<div>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#grid").kendoGrid({
                dataSource: {
                    type: "json",
                    serverPaging: true,
                    pageSize: 5,
                    groupable: true,
                    selectable: "row",
                    transport: { read: { url: "Records", dataType: "json"} }
                },
                height: 400,
                scrollable: true,
                sortable: true,
                filterable: true,
                pageable: true,
                columns: [
                        { field: "No", title: " No" },
                        { field: "Desc", title: "Description" },
                        { field: "Date", title: "Date" },
                        { field: "Height", title: "Height" },
                        { field: "Final", title: "Final" }
                    ],
                dataBound: function () {
                    this.expandRow(this.tbody.find("tr.k-master-row").first());
                }
            });
        });
    </script>
</div> 
```

但毕竟这一切我能看到的是一个空的网格。JavaScript 控制台中没有错误。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:04:30.780

从服务器返回的 JSON 应该是数组。您目前似乎正在返回具有多个相同字段的单个对象。

下面是一个 JSON 应该是什么样子的示例：

```
[{"No":null,"Desc":"asfasfasfasfasfasfasfasfasfasfasfasf","Date":"2013-03-27T00:00:00","Height":0,"Final":null},
{"No":null,"Desc":"etwetwetwetwet","Date":"2013-03-27T00:00:00","Height":0,"Final":0},
{"No":null,"Desc":"asfasfasfskfjklajsfkjasklfjklasjfklajsfkljaklsfjklasjfkljasfkljlasf","Date":"2013-03-27T00:00:00","Height":0,"Final":0}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:57:58.920

我认为以下代码对您有用，如果您有任何问题，请告诉我：

```
 $('#gridName').kendoGrid({
        dataSource: {
            type: "odata",
            transport: {
                read: {
                    contentType: "application/json; charset=utf-8",
                    type: "POST",
                    url: 'YourURL'
                }
            },
            pageSize: 10,
            type: "json"
        },
        scrollable: true,
        sortable: true,
        resizable: true 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T22:21:51.743

在你里面 dataSource 设置数据。

```
 data: @Html.Raw(Json.Encode(Model.RemoteObject)), 
```

RemoteObject 是包含所有数据的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-03T04:36:50.963

首先，我检查您的传输读取 URL。如果它触发`GetRecords`命令，您是否跟踪控制器？

```
transport: 
{ 
  read: {
    //if you don't use area then remove it
    url: "@Url.Action("GetRecords", new { area = "YourAreaName", controller = "YourControllerName" })",
    dataType: "json"
  }
} 
```

如果仍然无法解决您的问题，请修改您的控制器，

```
public ActionResult GetRecords([DataSourceRequest] DataSourceRequest request)
{
    var usrObj = new User();
    var jsnRslt = usrObj.GetResult(Session["Id"].ToString());
    return Json(jsnRslt.ToDataSourceResult(request), JsonRequestBehavior.AllowGet);            
} 
```

[这是了解 Kendo 的 ToDataSourceResult 的链接](https://doylestowncoder.wordpress.com/2014/04/14/kendoui-understanding-todatasourceresult/)

# visual-studio-2012 - Visual Studio 2012 Express 文本剪切的不正确行为

> ID：15675122
> 
> 赞同：1
> 
> 时间：2013-03-28T05:52:19.077
> 
> 标签：visual-studio-2012

让我解释一下我的意思。

例子：

1）我正在剪切一些文本`line 1`（或一些行数）

2）我正在删除空白`line 1`，文本剪切后仍然存在

3）我正在尝试将剪切的文本粘贴到其他地方，但我得到的只是一个`empty string!`WTF（为什么会发生这种情况）？

如果我在**第 2 步之前执行第 3 步**，我会得到正常的文本粘贴。但大多数时候我需要在第三步之前做第二步。

我的一些同事在 Visual Studio Proffessional 上也遇到了这个错误。

可能你也见过这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:59:12.420

你如何删除空行？如果您使用 CTRL-X 或 CTRL-Del，这两个命令实际上都会在行上执行 Cut 命令。

# ruby - 数据库清理器在 minitest rails 中不起作用

> ID：15675125
> 
> 赞同：8
> 
> 时间：2013-03-28T05:52:29.253
> 
> 标签：ruby, ruby-on-rails-3.2, database-cleaner

如果我单独运行它们，我的 Minitest 控制器测试工作正常，`rake minitest:controllers`但是当我运行时，`rake minitest:all`我得到验证失败错误。这是因为电子邮件已经在模型测试中使用。我使用 DatabaseCleaner 清理数据库但无法清理数据库。

我的数据库清理器代码：

```
require "database_cleaner"
DatabaseCleaner.strategy = :transaction

class MiniTest::Rails::ActionController::TestCase
    include Devise::TestHelpers

    def setup
      DatabaseCleaner.start
    end

    def teardown
      DatabaseCleaner.clean
    end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-02-16T10:36:34.147

**简短的回答：**

```
gem install "minitest-around" 
```

**长答案：**

minitest 中的 before/after 或 setup/teardown 不是 rspec 中的钩子，因此在 minitest 中**不能**有多个 before/after 或 setup/teardown，因为它们所做的只是重新定义方法。

要解决这个问题，您可以使用`minitest-around`增加对多个`before`/`after`或`setup`/`teardown`的支持`around`，只需将 gem 添加到您的测试组：

```
# put in your Gemfile
gem 'minitest-around', group: :test 
```

要设置 database_cleaner，您可以随意使用它，以下是设置示例：

```
# tests/support/database_cleaner.rb
DatabaseCleaner.strategy = :transaction
DatabaseCleaner.clean_with(:truncation)

class Minitest::Rails::ActionController::TestCase
  def setup
    DatabaseCleaner.start
  end

  def teardown
    DatabaseCleaner.clean
  end
end 
```

在您的测试文件中：

```
# tests/your/test/file_test.rb
require 'support/database_cleaner'

# assertions here ... 
```

就是这样，有关详细信息，请参阅[Github](https://github.com/splattael/minitest-around)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-02T19:56:34.547

如果出于某种原因您不想添加“minitest-around”gem（具有多个设置和拆卸方法），您可以在`test_helper.rb`...

```
require "database_cleaner"
DatabaseCleaner.strategy = :transaction

module AroundEachTest
  def before_setup
    super
    DatabaseCleaner.start
  end

  def after_teardown
    super
    DatabaseCleaner.clean
  end
end

class Minitest::Test
  include AroundEachTest
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-28T08:56:28.497

我发现我的错误，可能是它帮助别人..

我应该在定义设置的每个模型测试的设置中编写 DatabaseCleaner.start，因为我在每个测试文件中覆盖设置方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-04T00:56:12.413

这就是我喜欢 Minitest 的原因；没有花哨的 DSL 来阻止思考如何正确使用 Ruby。

我的设置如下：

在`test_helper.rb`

```
class MyTest < Minitest::Test
  def setup
    DatabaseCleaner.start
  end

  def teardown
    DatabaseCleaner.clean
  end
end 
```

然后我只是在任何需要数据库清理的测试中将其子类化。请注意，该调用`super`首先在任何特定于子类的设置之前清理数据库。`super`任何子类方法都需要包含相同的调用`teardown`，但这通常可以完全省略。

```
class FooTest < MyTest
  def setup
    super
    @foo = Foo.new(bar: 'whatever')
  end

  def test_save
    @foo.save
    assert_equal 1, Foo.count
  end
end 
```

如果我需要`MyTest`进一步子类化（例如，用于集成测试），我会在调用中包含它自己的`setup`&方法，以便它直接向上继承树。`teardown``super`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-17T13:23:52.853

你可以用这个干掉那个重复

```
DatabaseCleaner.strategy = :truncation
class MiniTest::Spec
  before :each do
    DatabaseCleaner.clean
  end
end 
```

此示例继承了规范运行程序，但您可以选择您选择的测试环境。

# javascript - 使用 topojson 和 d3js 在澳大利亚地图上显示城市

> ID：15675128
> 
> 赞同：0
> 
> 时间：2013-03-28T05:52:54.130
> 
> 标签：javascript, d3.js, geojson

我正在尝试制作与此示例完全相同的地图（[http://bost.ocks.org/mike/map/](http://bost.ocks.org/mike/map/)），但重点是澳大利亚和新西兰。我已按照说明进行操作，但这些地点的点未在我的地图上呈现。

这就是我生成数据的方式：

```
ogr2ogr -f GeoJSON -where "adm0_a3 IN ('AUS', 'NZL')" subunits.json ne_10m_admin_0_map_subunits.shp

ogr2ogr -f GeoJSON -where "(iso_a2 = 'AU' OR iso_a2 = 'NZ') AND SCALERANK < 8" places.json ne_10m_populated_places.shp

topojson --id-property su_a3 -p name=NAME -p name -o aus.json subunits.json places.json 
```

这是我到目前为止的代码：http: [//bashsolutions.com.au/australia.html](http://bashsolutions.com.au/australia.html)

地图显示了，但城市的点没有显示。我究竟做错了什么？

编辑：所以这不是很清楚，只是有很大的长错误，所以这里是实际的代码：

```
<script>

var width = 960,
    height = 1160;

//var subunits = topojson.object(aus, aus.objects.subunitsAUS);

var projection = d3.geo.mercator()
  //.center([0,0])
  .center([180,-40])
  .scale(400)
  //.translate([width / 2, height / 2])
  .precision(.1);

var path = d3.geo.path()
  .projection(projection)
  .pointRadius(2);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

d3.json("aus.json", function(error, aus) {
  svg.selectAll(".subunit")
    .data(topojson.object(aus, aus.objects.subunits).geometries)
    .enter().append("path")
    .attr("class", function(d) { return "subunit " + d.id; })
    .attr("d", path);

  svg.append("path")
    .datum(topojson.mesh(aus, aus.objects.subunits, function(a,b) { return a !== b; }))
    .attr("d", path)
    .attr("class", "subunit-boundary");

  svg.append("path")
    .datum(topojson.mesh(aus, aus.objects.subunits, function(a,b) { return a == b; }))
    .attr("d", path)
    .attr("class", "subunit-boundary External");

/* This is the failing bit */
  svg.append("path")
      .datum(topojson.object(aus, aus.objects.places))
      .attr("class", "place")
      .attr("d", path);
/* End of failing bit */

/*
  svg.selectAll(".place-label")
      .data(topojson.object(aus, aus.objects.places).geometries)
    .enter().append("text")
      .attr("class", "place-label")
      .attr("transform", function(d) { return "translate(" + projection(d.coordinates) + ")"; })
      .attr("x", function(d) { return d.coordinates[0] > -1 ? 6 : -6; })
      .attr("dy", ".35em")
      .style("text-anchor", function(d) { return d.coordinates[0] > -1 ? "start" : "end"; })
      .text(function(d) { return d.properties.name; });
*/

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:12:41.590

当您绘制轮廓时，您需要删除 TKL (Tokelau) 数据点。

```
 svg.append("path")
      .datum(topojson.mesh(aus, aus.objects.subunits, function(a, b) {
           return a === b && a.id !=="TKL" }))
      .attr("d", path)
      .attr("class", "subunit-boundary External"); 
```

我仍在研究为什么会产生错误，但是将这个条件添加到网格函数过滤器似乎可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:27:52.037

我发现这个问题解决了这个问题，但它仍然没有解释为什么它首先失败了。

这是修复： [http ://bashsolutions.com.au/australia2.html](http://bashsolutions.com.au/australia2.html)

这段代码替换了上面的失败位：

```
svg.selectAll(".place")
  .data(topojson.object(aus, aus.objects.places).geometries)
.enter().append("circle")
  .attr("d", path)
  .attr("transform", function(d) { return "translate(" + projection(d.coordinates) + ")"; })
  .attr("r", 2)
  .attr("class", "place"); 
```

所以这可以通过做一些类似于标签位（上面注释掉）但画一个圆圈而不是文本来解决它。

但我仍然不确定上述位有什么问题，因为它与 Mike Bostock 的示例相同（除了数据）。

# c# - 在选择下拉列表第二次文本框值不显示空白

> ID：15675130
> 
> 赞同：1
> 
> 时间：2013-03-28T05:53:21.973
> 
> 标签：c#, asp.net

我写了以下代码。

我的第一个 orderid 有进程 1 和进程 2 的记录，但我的 2nd orderid 只记录了进程 1。

当我在选择 orderid 1 后选择 orderid 2 时，它会保留进程 2 文本框中的 orderid 1 的值。我希望那个文本框是空白的

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    DbConnect objdbc = new DbConnect();
    SqlConnection con = objdbc.openConnection();
    SqlCommand cmd = new SqlCommand("SELECT [orderid],[processid],[orgid],[processdesc] ,[perwet] FROM [anghan].[dbo].[ProcessOrder] where orderid='" + DropDownList1.SelectedItem.Value + "' and processid=1 ", con);

    cmd.CommandType = CommandType.Text;
    // cmd.Parameters.AddWithValue("@Id", value);
    cmd.Connection = con;
    //con.Open();
    SqlDataReader dr = cmd.ExecuteReader();
    while (dr.Read())
    {
        TextBox2.Text = dr["perwet"].ToString();
        //  DropDownList1.Items(DropDownList1.SelectedIndex).Text = dr["service"].ToString();
    }
    dr.Close();
    //process 2

    SqlCommand cmd2 = new SqlCommand("SELECT [orderid],[processid],[orgid],[processdesc] ,[perwet] FROM [anghan].[dbo].[ProcessOrder] where orderid='" + DropDownList1.SelectedItem.Value + "' and processid=2 ", con);

    cmd2.CommandType = CommandType.Text;
    // cmd.Parameters.AddWithValue("@Id", value);
    cmd2.Connection = con;
    //con.Open();
    SqlDataReader dr2 = cmd2.ExecuteReader();
    while (dr2.Read())
    {

        TextBox3.Text = dr2["perwet"].ToString();
        //  DropDownList1.Items(DropDownList1.SelectedIndex).Text = dr["service"].ToString();
    }
    dr2.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:57:21.357

```
just put like this>>

 if(dr!=null)
    {
        while (dr.Read())
            {
                if((dr["perwet"]!=null)||(dr["perwet"].ToString()!=""))
                TextBox2.Text = dr["perwet"].ToString();
                else
                TextBox2.Text="";

                //  DropDownList1.Items(DropDownList1.SelectedIndex).Text = dr["service"].ToString();
            }
    } 
```

它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:59:04.927

为什么不在代码的开头将 TextBox2 和 TextBox3 设置为空。这样你就可以看到你已经填充了什么。只有那些文本框的值会改变你的代码将重新分配的位置，否则它将保留旧值。

# iphone - 更新从销售中删除的应用程序

> ID：15675131
> 
> 赞同：3
> 
> 时间：2013-03-28T05:53:25.753
> 
> 标签：iphone, ipad, ios6, iphone-5

我对我的应用程序感到困惑，通过从权利和定价部分取消选择所有国家/地区，我自己将其从销售中删除。我必须这样做的原因是因为我想通过新的更新将它启动到 App Store。

我的问题是在这种情况下，Apple 是否会批准该应用程序的更新版本。

如果否，那么是否有任何替代解决方案，请指导我的朋友。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T05:56:49.070

1.  当您从销售中删除应用程序时，Apple 只需从 App Store 中隐藏您的应用程序。
2.  您的应用不会从 App Store 中删除。
3.  您可以继续发布应用程序的更新。
4.  等待苹果批准。
5.  并在 App Store 上发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:28:26.090

通过取消选择所有国家/地区来删除应用程序只会将应用程序从商店中隐藏起来，它仍然可以出售，因此在更新此应用程序时，Apple 会将其视为普通的应用程序更新，如果所有事情都正确，则会批准它。

希望这可以帮助。

# tridion - 如何禁用或隐藏结构组？

> ID：15675132
> 
> 赞同：1
> 
> 时间：2013-03-28T05:53:30.993
> 
> 标签：tridion

我想禁用或隐藏我正在使用 API 创建的结构组。我怎样才能做到这一点？我在 API 中看不到任何相关的方法或属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:11:29.230

您最好的选择是对其设置安全性（删除所有权限），以便没有人（管理员除外）可以看到它。您唯一的其他选择是将“可发布”属性设置为 false，但它仍然可见。

[但是，您可能会在https://tridion.stackexchange.com/](https://tridion.stackexchange.com/)获得更多答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:40:55.537

我认为这可以使用 Tridion CME GUI Extensions 中的数据扩展器来完成。这就是我要开始调查的地方......

# python - 尝试 xmlrpc 的新帖子时来自 wordpress 的警告

> ID：15675139
> 
> 赞同：1
> 
> 时间：2013-03-28T05:54:05.437
> 
> 标签：python, wordpress, xml-rpc

当尝试通过 python-wordpress-xmlrpc 发布到 wordpress 时出现错误

```
ExpatError at /syncFeed/1/
junk after document element: line 2, column 0
Request Method: GET
Request URL:    http://localhost:8000/syncFeed/1/
Django Version: 1.4.3
Exception Type: ExpatError
Exception Value:    
junk after document element: line 2, column 0 
```

如果调查错误消息，我会收到 wordpress 的回复

```
self    
<xmlrpclib.ExpatParser instance at 0x10ca61200>
data    
"<br />\n<b>Warning</b>:  strpos() [<a href='function.strpos'>function.strpos</a>]: Empty                delimiter in <b>/home/itpod59/public_html/wp-includes/class-wp-xmlrpc-server.php</b> 
on line    <b>4338</b><br />\n<br />\n<b>Warning</b>:  Cannot modify header information - headers already         
sent by (output started at /home/itpod59/public_html/wp-includes/class-wp-xmlrpc-    server.php:4338) in 
<b>/home/itpod59/public_html/wp-includes/class-IXR.php</b> on line <b>475</b><br />\n<br />\n<b>Warning</b>:  
Cannot modify header information - headers already sent by (output started at /home/itpod59/public_html/wp-includes/class-wp-xmlrpc-server.php:4338) in 
<b>/home/itpod59/public_html/wp-includes/class-IXR.php</b> on line <b>476</b><br />\n<br />\n<b>Warning</b>:  
Cannot modify header information - headers already sent by (output started at /home/itpod59/public_html/wp-includes/class-wp-xmlrpc-server.php:4338) in 
<b>/home/itpod59/public_html/wp-includes/class-IXR.php</b> on line     <b>478</b><br />\n<br />\n<b>Warning</b>:  Cannot modify header " 
```

我不知道如何修复它。此代码和示例在我的 mac 中运行良好，但在尝试使用 wrpdress 进行生产时出错。我尝试禁用所有插件，没有帮助

# android - 如何从网站下载文件到 SD 卡

> ID：15675143
> 
> 赞同：1
> 
> 时间：2013-03-28T05:54:19.027
> 
> 标签：android, android-download-manager

每个人都必须在 Google Play 上看到，每当我们点击网站上的安装按钮时，特定的应用程序就会下载并安装在用户拥有的 android 设备上。我怎么可能在我的 android 应用程序和网站上做到这一点，即如果用户使用他的 gmail Id 登录我的网站并购买产品（这是一些数据文件）并且这些文件被下载到 android 设备的 sdcard。有没有人研究过类似的技术，以及它是如何成为可能的。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:14:48.900

一种方法是您现在可以通过获取安装请求获取该应用程序的 URL/URI 并将其下载到设备中来实现 GCM（Google 可以消息）以将请求从服务器发送到设备。下载完成后，您可以使用此代码安装此 apk 文件

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File
            (Environment.getExternalStorageDirectory()  + "/yourapk.apk")), "application/vnd.android.package-archive");
startActivity(intent); 
```

这样您就可以在您的网站中实现此功能。

**注意：对于这个设备，有一个应用程序可以从 GCM 获取消息并基于此实现，就像 Google 有 Google Play 商店一样。用户必须为此安装您的应用程序。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:23:42.413

您将几个问题结合在一起。

1.  使用 Gmail 帐户登录网站
2.  将应用程序下载到 SD 卡上
3.  安装应用程序。

当您单击它时，Android 将尝试使用 .apk 安装任何二进制扩展。因此，即使从您的电子邮件附件中，您也可以将 apk 文件下载到 sd 卡并将其安装到设备上。

您可以通过您的网站销售单个商品。标准解决方案是通过 Google Play 在应用程序购买中设置或实施类似的方法。或者，从您的应用程序中，您可以完成此登录并购买和下载您喜欢的任何地方。

**编辑 1**

您可以简单地使用多个活动来促进额外的项目购买。

1.  登录活动（将有助于登录过程）
2.  ListView（向用户显示一个不错的可用项目列表）
3.  当用户选择一个项目时，使用一些支付系统来完成交易
4.  当您收到付款成功通知时，将项目下载到用户 sd 卡。看到这个帮助[链接](https://stackoverflow.com/questions/5472226/how-to-save-file-from-website-to-sdcard)。

或者，您可以使用 webview 和 HTML 来完成上述场景。

# c# - 在构造函数中接收容器的 Unity 容器注册对象

> ID：15675145
> 
> 赞同：3
> 
> 时间：2013-03-28T05:54:35.510
> 
> 标签：c#, unity-container, containers, ioc-container

我有一个在统一 2.0 和 DI 中实现的容器。
我有一个在容器中注册的单例工厂类。
如果它的构造函数参数之一是 IContainer ，我如何注册它？
这样做的技术是什么？在构造函数中注册消费容器的单例对象。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:57:23.367

您可以简单地将容器注册到自身中：

```
container.RegisterInstance<IUnityContainer>(container); 
```

但是请注意，您应该***只***将容器注入到属于您的[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)的类中；基础设施的一部分。

# coldfusion - 调度器，是不是太重了？

> ID：15675146
> 
> 赞同：1
> 
> 时间：2013-03-28T05:54:38.153
> 
> 标签：coldfusion

我有一个太重的计划任务，所以我的问题是，一个太重的计划任务可能会使冷融合服务器掉线？我的意思是有时我的计划任务超过了循环限制时间，无论如何我正在寻找其他方法来制作同样的东西，但不会太重。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:06:36.677

好吧，计划任务实际上只是对正常 CF 页面请求的自动调用。这意味着，如果您在浏览器窗口中手动调出计划任务 URL，它是否也会超时？

请记住，服务器正在调用和运行计划任务，这意味着您可以拥有与实际用户不同的会话、CGI、请求和表单范围值。但是，您可以使用[CFSETTING 标记](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d68.html)的 requestTimeout 属性来延长页面在超时之前完成任务的时间。requestTimeout 属性采用一个表示秒数的值，在该秒数之后，如果没有来自服务器的请求，CF 认为该页面没有响应。

但是，这在很大程度上取决于您的计划任务实际在做什么。您可以通过多种方式将代码分解为组成部分，以便更快地处理。也许弄清楚循环正在做什么（并且它真的需要做它正在做的所有事情）是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:07:27.230

有几件事需要考虑。

首先，您的任务需要一段时间才能运行，并且当前超时。这里有一些事情需要调查：

1.  不是调查，但您可以根据@coldfusiondevshop 的建议`requesttimeout`为该请求设置。`<cfsetting>`
2.  您可以审核您的代码，看看它是否可以进行不同的编码以不花费很长时间来运行。由于通常作为任务完成的工作的性质，这可能是不可能的。
3.  根据您的 ColdFusion 版本（请始终使用 CF 版本标记您的问题，以及仅使用“ColdFusion”），您可以利用增强的调度 CF10 将任务分成更小的块并将它们链接在一起，从而使部分总和不太可能超时。这也不总是可能的，但这是一个考虑因素。

要考虑的另一件事是是否值得为您的任务运行一个单独的 CF 实例。除了您的任务超时之外，它还可能会减慢其他所有人的处理速度，而它正在运行。你检查过吗？对于单个任务，这可能是矫枉过正，但请记住，任务不需要*由*与站点其余部分相同的 CF 实例运行，并且确实有一个令人信服的案例不这样做如果有很多任务会占用 CF 实例的资源。

总而言之：通过 增加你的超时时间`<cfsetting>`，然后审核你的代码，看看你是否可以提高它的性能。我说的其他事情只是“加分”建议。

# file-upload - 如何使用 JInput 获取文件 tmp_name

> ID：15675149
> 
> 赞同：1
> 
> 时间：2013-03-28T05:54:58.687
> 
> 标签：file-upload, joomla, save, joomla2.5, jinput

我有点坚持这一点。我有这段代码设法获取我的文件的文件名：

```
class AControllerA extends JControllerForm
{
    function save()
    {
        //Upload file
        jimport('joomla.filesystem.file');
        $jinput = JFactory::getApplication()->input;
        $store_form = $jinput->get('jform', null, 'array');
            $file = $store_form['img_url'];
        echo $file;
     }
} 
```

*文件字段名称为jform[img_url]；

但是我似乎无法获得文件的“tmp_name”。有人知道我错过了什么吗？我对 jinput 的工作方式有点困惑...... jrequest 很容易工作。谢谢！

模型/表格/a.xml

```
<form enctype="multipart/form-data">
        <fieldset>
        <field
                        name="img_url"
                        type="file"
                        label=""
                        description=""
                        size="40"
                        class="inputbox"
                        default=""
                />
       </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T07:56:09.870

像这样怎么样：

```
$files = $input->files->get('jform', null);
$filename = $files['img_url']['tmp_name'];
echo $filename; 
```

查看[使用 JInput 检索文件数据的文档](http://docs.joomla.org/Retrieving_request_data_using_JInput#Retrieving_File_Data)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T07:58:04.360

假设您正在使用 JForm 和文件输入类型，那么您可以使用以下命令访问该文件：

```
$files = $jinput->files->get('jform');
$file = $files['img_url']['tmp_name'] 
```

还要确保您的表单具有`enctype="multipart/form-data"`设置，否则它将无法正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-04T06:23:38.190

在你的模型中，你应该有这样的东西

```
 public function getForm($data = array(), $loadData = false)
    {
        /**
         * Get the Form
         */
        $form = $this->loadForm('com_mycomponent.mycomponent', 'mycomponent',
                                        array('control' => false, 'load_data' => $loadData));
        if (empty($form)) {
            return false;
        }
        return $form;
    } 
```

注意 $loaddata 和 'control' 设置为 false，当 'control' 为 false 时，您可以根据 xml 中指定的名称获取文件参数，即输出形式如下：

```
<input name="name in xml file" type="file" /> 
```

如果'控制' => 'jform'

```
<input name="jform[name in xml file]" type="file" /> 
```

$loaddata= false 意味着您不需要从数据库中获取任何数据到表单。

在你的 view.html.php 你应该有这样的东西

```
public function display($tpl = null)
    {
        $this->formData = $this->get('Form');
        $this->addToolbar();
        parent::display($tpl);
    } 
```

假设我将在“mycomponent”控制器的“上传”方法中收到请求的文件，那么它应该有这样的东西：

```
class MycomponentControllerMycomponent extends JControllerAdmin
{
public function upload()
    {
        //Retrieve file details from uploaded file, sent from upload form
        $file = JFactory::getApplication()->input->files->get('name in xml 
        **$tmp_name** = $file['tmp_name'];

    }
} 
```

$tmp_name 是您需要的名称

# html - css中的最大最小宽度

> ID：15675150
> 
> 赞同：0
> 
> 时间：2013-03-28T05:55:07.057
> 
> 标签：html, css

我有以下输入框。

![在此处输入图像描述](../Images/adb61ef8a028262694589ea0aaaea255.png)

我减小了它们的宽度以将它们对齐，并且在全尺寸窗口中看起来不错，现在当我缩小屏幕时会出现问题。

做窄屏的时候看起来真的很糟糕。

**看看-**

![在此处输入图像描述](../Images/d48faeb15e964d753f5f38fdd089c89f.png)

我尝试了这些输入框来获得一个新的设置行`max-width`。

**在代码中**-

我正在使用输入作为-

对于价格 Ex。增值税-

```
 <input type="text" style="width:85%;max-width:85%;" id="Order" maxlength = "10" name="PriceExVat"   onkeypress="validate(event)"/> 
```

但是在做窄屏时并没有换行。

我想要这些输入块的这种所需的响应式布局-

![在此处输入图像描述](../Images/3017a2a41dbd8b36ce60993b76d08b00.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T06:00:30.393

进行媒体查询并使它们成为块元素 -

```
@media all and (max-width: 500px) and (min-width: 0px) {
 input[type="text"] {
  display:block;
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:10:46.570

你快到了。您必须`min-width`用于防止元素在特定宽度后收缩。

在您的代码中替换`max-width`为`min-width`，然后重试。此外，您可能需要指定`max-width: nPixels px;`以防止文本框在全屏时占据 85% 的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:27:44.193

I think you have added `display: inline;` try `display: inline-block;` this may solve the problem.

# iphone - 显示网页视图

> ID：15675152
> 
> 赞同：0
> 
> 时间：2013-03-28T05:55:14.780
> 
> 标签：iphone, uiwebview

我是 iPhone 开发的新手，我想用`UIWebView`. `URL`当我单击根视图控制器中的按钮时，我只想在新视图上显示一个。但是当我这样做时，我得到了一个例外

> NSInvalidArgumentException'，原因：'应用程序试图在目标上呈现一个 nil 模态视图控制器。

这是我的代码。

WebViewController.m（这是我保存的视图`UIWebView`）

```
NSURL *url = [[NSURL alloc] initWithString:@"www.google.com"];
NSURLRequest *requestobj = [NSURLRequest requestWithURL:url];

[webview.delegate self];
[self.view addSubview:webview];
[webview loadRequest:requestobj]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:02:31.767

**问题**

好吧，错误表明您正在尝试推送 nil 值。

**检查事项**

*   确保`WebViewcontroller`正确初始化[它不能为零]
*   确保笔尖名称是 WebViewController
*   文件所有者具有类名 WebViewController

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:18:22.140

希望您已通过以下方式定义了 webview。UIWebview 是 UIView 的子类。

```
IBOutlet UIWebView *webView;

NSString *urlAddress = @”http://www.google.com”;

//Create a URL object.
NSURL *url = [NSURL URLWithString:urlAddress];

//URL Requst Object
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

//Load the request in the UIWebView.
[webView loadRequest:requestObj]; 
```

# android - 如何通过其中的文本设置微调器选择

> ID：15675153
> 
> 赞同：9
> 
> 时间：2013-03-28T05:55:16.373
> 
> 标签：android, android-spinner

我准备了一个表格，我必须在其中使用同一页面来添加详细信息和编辑详细信息。添加详细信息时，所有字段都将为空白，并且微调器选择将设置为“无选择”。现在我想设置我将从上一个活动中传递的项目的微调器选择。如何做到这一点？由于微调器没有任何方法，例如*setSelection(String string);* 或者有没有其他方法，我可以实现这个机制......

有没有人可以帮帮我...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-03T06:59:45.987

这就是我所做的，它似乎工作正常

```
Spinner my_spinner=(Spinner)findViewById(R.id.spn_items);
ArrayAdapter<String> array_spinner=(ArrayAdapter<String>)my_spinner.getAdapter();
    my_spinner.setSelection(array_spinner.getPosition("list item")); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-28T07:28:20.683

我现在不知道这可能使用的频率，但我们可以通过其中的文本设置微调器的选择。Spinner 有方法*setSelection(int position);* .

现在在参数中我们需要传递文本的位置，我们可以从我们用来绑定到适配器的array_list中获取它，`getIndexOf(Object object)`对象应该`ArrayList`是声明的类型例如，如果`ArrayList`是字符串类型，则对象要传递给的`getIndexOf(Object object)`应该是字符串类型。

最后，您将选择设置如下：

```
spinner.setSelection ( spinner_array_list.indexOf(string) ); 
```

# ruby-on-rails - Active_Admin 删除不起作用 - 未捕获类型错误：无法读取未定义的属性“mozilla”

> ID：15675160
> 
> 赞同：6
> 
> 时间：2013-03-28T05:55:49.873
> 
> 标签：ruby-on-rails, activeadmin

我最近更新到最新版本的活动管理员，现在我的删除按钮不起作用。我正在使用未经修改生成的标准页面。我在浏览器调试控制台上收到此错误：

未捕获的类型错误：无法读取未定义的 active_admin.js:9612（匿名函数）active_admin.js:9612（匿名函数）active_admin.js:10118 的属性“mozilla”

这是我的 application.js 文件。

```
// This is a manifest file that'll be compiled into including all the files listed below.
// Add new JavaScript/Coffee code in separate files in this directory and they'll     automatically
// be included in the compiled file accessible from http://example.com/assets/application.js
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
//= require jquery
//= require underscore 
```

我在我的网站上使用 jquery，所以我确信它被包含在内。

我已经多次运行 rails generate active_admin:assets 。我已经尝试解决这个问题大约 10 个小时了，我很难过。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-18T06:59:22.240

加载 JQuery js 库后将以下内容添加到您的 HTML 代码中：（在使用 JQuery 版本 1.9 和 + 时发生）

```
 <script src="http://code.jquery.com/jquery-migrate-1.2.1.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-06T00:30:33.753

Maybe a little late to the game here but this usually happens when you use JQuery around 1.9 and greater. JQuery 1.9 and greater (I think it's around that time) took out the browser sniffing so that's where that error comes from.

# qt - QT的glBegin没有声明？

> ID：15675161
> 
> 赞同：2
> 
> 时间：2013-03-28T05:55:52.527
> 
> 标签：qt, opengl

我正在按照教程在qt中编写一小段opengl代码。这是链接 [http://www.youtube.com/watch?v=1nzHSkY4K18](http://www.youtube.com/watch?v=1nzHSkY4K18)

但是在 6:13，当我对代码进行混合时，它显示了几个错误

 **```
..\testopgl\glwidget.cpp: In member function 'virtual void GLWidget::paintGL()':
..\testopgl\glwidget.cpp:17:20: error: 'glColor3f' was not declared in this scope
..\testopgl\glwidget.cpp:19:25: error: 'glBegin' was not declared in this scope
..\testopgl\glwidget.cpp:20:31: error: 'glVertex3f' was not declared in this scope
..\testopgl\glwidget.cpp:23:11: error: 'glEnd' was not declared in this scope
..\testopgl\glwidget.cpp: At global scope: 
```* 

*我真正不明白的是，当我只放 glClear(GL_COLOR_BUFFER_BIT) 时它就可以构建，但即使我只放 glColor3f() 也会发生错误。GLWidget 不支持 glColor*() 或 glBegin() 命令吗？*

 *这是我的代码。

testopgl.pro

```
#-------------------------------------------------
#
# Project created by QtCreator 2013-03-28T09:48:44
#
#-------------------------------------------------

QT       += core gui opengl

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = testopgl
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp \
    glwidget.cpp

HEADERS  += mainwindow.h \
    glwidget.h

FORMS    += mainwindow.ui 
```

glwidget.h

```
#ifndef GLWIDGET_H
#define GLWIDGET_H

#include <QGLWidget>

class GLWidget : public QGLWidget
{
    Q_OBJECT
public:
    explicit GLWidget(QWidget *parent = 0);

    void initializeGL();
    void paintGL();
    void resizeGL(int w,int h);
};

#endif // GLWIDGET_H 
```

glwidget.cpp

```
#include "glwidget.h"

GLWidget::GLWidget(QWidget *parent) :
    QGLWidget(parent)
{
}

void GLWidget::initializeGL(){
    glClearColor(1,1,0,1);
}

void GLWidget::paintGL(){
    glClear(GL_COLOR_BUFFER_BIT);

    glColor3f(1,0,0);

    glBegin(GL_TRIANGLES);
        glVertex3f(-0.5,-0.5,0);
        glVertex3f(0.5,-0.5,0);
        glVertex3f(0.0,0.5,0);
    glEnd();

}

void GLWidget::resizeGL(int w,int h){

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:38:27.670

您提到的功能根本不存在于任何现代版本的 GL 中，因此您所遵循的教程听起来已经过时了。

因此，通过您的 QT 构建公开的 GL 版本可能没有这些功能。可能可以重新配置/重建 QT 以使用旧版本的 GL，但我建议您了解并使用现代可编程接口。**

# asp.net-mvc - 错误：- 转换为值类型“Int32”失败，因为具体化值为 null

> ID：15675163
> 
> 赞同：2
> 
> 时间：2013-03-28T05:56:11.857
> 
> 标签：asp.net-mvc

我有以下查询：

```
int? Giver = Convert.ToInt32(db.vwAssignments.Sum(a => a.Amount)); 
```

但如果没有符合搜索条件的记录，则会引发以下错误

> 转换为值类型“Int32”失败，因为具体化值为空。结果类型的泛型参数或查询必须使用可为空的类型。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:21:11.703

防御性编程的基础知识：

*   首先将您的`Sum()`操作结果分配给一个可为空的变量

    ```
    object resultOfSum = db.vwAssignments.Sum(a => a.Amount); 
    ```

*   **检查NULL！**并且仅当它不为空时，**才**将其转换为`INT`

    ```
    if(resultOfSum != null)
    {
       int Giver = Convert.ToInt32(resultOfSum);   
    } 
    ```

另外：如果您的`Amount`字段是一`Int`开始的，很可能这**已经**给您 NULL 或有效`Int`- 我认为调用 to`Convert.ToInt32()`是不必要的：

```
int? Giver = db.vwAssignments.Sum(a => a.Amount);

if(Giver.HasValue)
{
   ......
} 
```

# php - PHP：全为 1 和 0 的 225 的最小倍数

> ID：15675166
> 
> 赞同：2
> 
> 时间：2013-03-28T05:56:38.687
> 
> 标签：php

```
echo "The smallest multiple of 225 that is only 1's and 0's is: ";

$multiple = (integer) 225;
$factor = (integer) 1;

while (!isDecimalBinary($multiple))
{
   $multiple += 225;
   $factor += 1;
}  

 echo $multiple.':'.$factor;

function isDecimalBinary($number)
    {
       $stringNumber = (string) $number;
       $arrayNumber = str_split($stringNumber); 
       foreach ($arrayNumber as $item)
       {
          if ($item != '0' || $item != '1')
          {
             return FALSE;
          }
       }
       return TRUE;
    } 
```

我累了。晚了。我不知道错误在哪里。此外，如果有任何数学技巧可以找到十进制数是否都是二进制数字，我很高兴找到一种耗时更少的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:23:27.097

您的代码的具体问题的答案：

explode() 不会做你认为它做的事。explode() 需要一个分隔符参数，并使用该参数作为分隔符将字符串拆分为数组。如果将代码中的explode() 替换为str_split()，它只是将字符串转换为字符数组，则该函数可以正常工作。

[http://www.php.net/manual/en/function.str-split.php](http://www.php.net/manual/en/function.str-split.php)

[http://www.php.net/manual/en/function.explode.php](http://www.php.net/manual/en/function.explode.php)

* * *

现在，这实际上并不能解决您的问题，因为您要等待很长时间才能让 PHP 快速完成并暴力破解这样的正确答案。你知道如何在 PHP 中运行调试器，对吧？调试你的循环，看看它是多么的低效。例如，当您达到 2250 时，您无需任何计算即可知道答案不可能小于 10,000，但您继续检查所有不可能以 1 开头的中间值。

很快就清楚这不是正确的方法。如果你反过来看问题，检查仅由 1 和 0 组成的数字，看看它们是否是 255 的倍数？

更新的解决方案（[http://phpfiddle.org/main/code/dmw-zif](http://phpfiddle.org/main/code/dmw-zif)）

```
$i = 1;
$val = $i;
while ($val % 255)
{
  $bin = decbin($i++);
  $val = (integer) $bin;
}  

echo "The smallest multiple of 255 that is only 1's and 0's is: $val, which is equal to 255 *".($val/255); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:00:09.397

您在代码中使用 225 而不是 255。

此外，您可能想要使用`str_split($stringNumber, 1)`而不是`explode($stringNumber)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:00:16.527

你忘了这里爆炸参数

```
$arrayNumber = explode($explode_parameter,$stringNumber); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T06:06:42.057

您的函数调用不`explode()`正确，没有分隔符就不能调用它。您可以`str_split()`改用，但它可以更简单：

```
function isDecimalBinary($number)
{
        return strspn($number, '01') == strlen($number);
} 
```

顺便说一句，这段代码需要 64 位整数，否则它们会变成双精度并失去精度。

或者，您可以使用`gmp`.

```
$multiple = gmp_init(225);
$factor = 1;

$result = $multiple;

while (!isDecimalBinary(gmp_strval($result))) {
    ++$factor;
    $result = gmp_add($result, $multiple);
}

echo gmp_strval($result).':'.$factor; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T06:13:40.397

```
function isDecimalBinary($number)
{
    return $number == base_convert(base_convert($number,2,10),10,2);
} 
```

将其转换为以 10 为底（如果不是以 2 为底，则精度损失）然后返回 2。如果它们不同，则不全是 1 和 0。

# ruby - 如何在 xpath 中使用包含文本语法。我正在使用红宝石黄瓜

> ID：15675169
> 
> 赞同：1
> 
> 时间：2013-03-28T05:56:52.243
> 
> 标签：ruby, cucumber

我有xpath：

```
//div[@id='123']/li/a[4] 
```

它的 html 中的文本为“2”，所以我希望它具体如下：

```
//div[@id='123']/li/a[contains text='2'] ??? 
```

基本上我不想依赖 a[ **4** ].. 不是数字，而是特定于文本，以便即使在网页更新或修改后也可以找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:35:24.743

在谓词部分`[]`，您可以使用`text()`检索文本节点并`contains(,)`测试它是否包含特定文本。

```
//div[@id='123']//li/a[contains(text(), '2')] 
```

这是[一个例子](http://www.xpathtester.com/obj/e952d94f-2c11-46b4-93b6-0565bde8676c)

# php - 在 php 中下载时不支持或损坏 pdf/doc 文件

> ID：15675171
> 
> 赞同：0
> 
> 时间：2013-03-28T05:57:20.650
> 
> 标签：php, download

我正在使用 php 下载 PDF/DOC 文件

这是我的 html 代码：

```
<a title="Download" target="_new" href="includes/pdf_server.php?file=test.pdf">Test PDF</a> 
```

这是我在 pdf_server.php 文件中的 php 代码

```
<?php
$file = $_GET["file"];
if (file_exists("../PDF/".$file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header("Content-Type: application/force-download");
    header('Content-Disposition: attachment; filename=' . urlencode(basename($file)));
    // header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . filesize("../PDF/".$file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

**PDF**是我的**test.pdf**文件所在的文件夹。当我单击链接下载文件时。浏览器显示要下载的文件及其大小（1.4 mb），但是当下载完成并打开文件时，它显示文件损坏或文件不受支持的错误。然后我检查它的属性，它显示 0 个字节。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T06:10:04.183

试试这个-

```
<?php
$file_name = $_GET["file"];
if (file_exists("../PDF/".$file_name)) {
    header('Pragma: public');   // required
    header('Expires: 0');       // no cache
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Last-Modified: '.gmdate ('D, d M Y H:i:s', filemtime ("../PDF/".$file_name)).' GMT');
    header('Cache-Control: private',false);
    header('Content-Type: '.'application/pdf');
    header('Content-Disposition: attachment; filename="'.basename("../PDF/".$file_name).'"');
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: '.filesize($file_name));    // provide file size
    header('Connection: close');
    readfile("../PDF/".$file_name);     // push it out
    exit();
}
?> 
```

# java - 添加乔达时间

> ID：15675173
> 
> 赞同：19
> 
> 时间：2013-03-28T05:57:21.803
> 
> 标签：java, android, jodatime, noclassdeffounderror, libs

我正在构建一个使用时间的应用程序。我决定使用 Joda 时间。我正在尝试将 joda time 添加到我的应用程序中。我没有将`.jar`文件添加到库的经验。我遵循了[这些步骤](https://stackoverflow.com/questions/12105164/java-joda-time-download-and-install-step-by-step)（见底部），或者我是这么认为的。我的项目没有显示任何错误，但是当我运行一个简单的测试时：`DateTime test = new DateTime();`我强制关闭并出现以下错误：

```
 Could not find class 'org.joda.time.DateTime', referenced from method xxxx
 java.lang.NoClassDefFoundError: org.joda.time.DateTime 
```

**这些是我遵循的步骤：**

1.  在 Eclipse 中创建你的 android 项目。
2.  下载[乔达时间](http://sourceforge.net/projects/joda-time/files/joda-time/)
3.  在 Eclipse 中，在包资源管理器中查找您的项目，然后右键单击它，然后调用它`New -> Folder -> libs`。 **注意：我没有这样做，因为我已经有一个名为`libs`**
4.  复制（或）拖放`joda-time-2.1.jar`到新创建的`libs`文件夹中。
5.  再次右键单击您的项目（在包资源管理器中），然后`Properties -> Java Build Path -> Libraries -> Add Jars -> joda-time-2.1.jar`.

现在您可以使用以下代码进行测试：

```
DateTime test = new DateTime(); 
```

导入后：

```
import org.joda.time.DateTime; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T06:06:36.130

由于它是一个 Android 项目，因此仅引用 Joda jar 文件是行不通的。您需要将该 jar 文件与您的 apk 捆绑在一起，可以这样完成：-

1.  属性 -> Java 构建路径 -> 订单和导出

2.  检查`joda-time-*-*.jar`并单击**确定**。你完成了。

* * *

**说明：**单独引用 jar 只会解决 Eclipse（或任何其他 IDE）中的编译问题，但是当创建*apk*时，“joda-time”jar 文件不会与您的“apk”一起导出/捆绑。这就是它抛出**NoClassDefFoundError**的原因。

*但是，当您在Order & Export*中检查 joda-time jar 时，它会确保该 jar 在创建时也捆绑在您的“apk”内部/一起。

# php - 线索提示 jquery 插件：如何在工具提示弹出窗口中显示加载图像

> ID：15675180
> 
> 赞同：0
> 
> 时间：2013-03-28T05:57:59.787
> 
> 标签：php, jquery

我正在使用线索提示 jquery 插件，我想在工具提示弹出窗口中显示加载图像。

就像脸书一样。它在弹出窗口中显示“正在加载...”文本，然后显示数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:27:46.563

这是一个可以帮助您的演示

> **我的根文件夹包含以下文件**

*   索引.html
*   演示.html
*   jquery.cluetip.css
*   jquery.cluetip.js
*   jquery.min.js
*   考拉.jpg

我的 index.html 有以下代码

```
 <html >
    <head>

      <link rel="stylesheet" href="jquery.cluetip.css" type="text/css" />
        <script src="jquery.min.js"></script> 
      <script src="jquery.cluetip.js"></script>

      <script type="text/javascript">
           $(document).ready(function() {
             $('a.sticky').cluetip();
             $('#sticky').cluetip({
               arrows: true,
               sticky: true,
               tracking: true,
               mouseOutClose: true,
               closePosition: 'title',    
               cursor: 'pointer'
             });
           });
      </script>
     </head>

      <body >

       <strong>Demo for tooptip</strong> <br>
      <a id="sticky" href="#" rel="demo.html" title="Demo">ToopTip with arrows</a>

      </body>
      </html> 
```

这是 demo.html 的代码

```
 <html >
     <head>
     </head>
   <body class="page">

  <img src="Koala.jpg" width="65" height="65" alt="Koala" />
  <p>The koala is an arboreal herbivorous marsupial native to Australia, and the only extant representative of the family Phascolarctidae.</p>

    </body>
  </html> 
```

现在打开 index.html 页面并让**线索提示**工作

# scala - Scala CPS 框架中的不一致行为

> ID：15675182
> 
> 赞同：2
> 
> 时间：2013-03-28T05:58:17.157
> 
> 标签：scala, continuations, continuation-passing, delimited-continuations

我正在尝试构建一个协程框架，以通过并行遍历每个数据相关函数来启用批量数据获取。这是我到目前为止所拥有的：http: [//pastie.org/7147798](http://pastie.org/7147798)

1.  **这不起作用**

    ```
    def get(id: Long) = reset {
      // Is it not already cached?
      if (!cached.isDefinedAt(id)) {
        // Store the ID we want to fetch.
        queued += id
        // Come back later...
        shift { fetch[Object]() } : Seq[Any] @cps[ExecState[Object]]
      }
      // We should have the ID fetched now.
      Result(cached(id))
    } 
    ```

    **我收到以下错误**

    ```
    ashoat@ashoatmbp [~/project]# scala -P:continuations:enable Loader.scala
    /Users/ashoat/project/Loader.scala:134: error: type mismatch;
     found   : Unit
     required: Any @util.continuations.package.cps[Main.$anon.Loader.ExecState[Main.$anon.Loader.Object]]
          if (!cached.isDefinedAt(id)) {
          ^
    one error found 
    ```

    **这有效**

    ```
    def get(id: Long) = reset {
      // Is it not already cached?
      if (!cached.isDefinedAt(id)) {
        // Store the ID we want to fetch.
        queued += id
        // Come back later...
        shift { fetch[Object]() } : Seq[Any] @cps[ExecState[Object]]
        // We should have the ID fetched now.
        Result(cached(id))
      } else {
        // We should have the ID fetched now.
        Result(cached(id))
      }
    } 
    ```

2.  **这不起作用**

    ```
    val getFive = reset {
      if (true) {
        Result(5)
      } else {
        val seq: Seq[Any] = shift { fetch[Int](Object.get(15181990251L)) }
        val Seq(obj: Object) = seq
        Result(obj.fields("test").toInt)
      }
    } 
    ```

    **我收到以下错误**

    ```
    ashoat@ashoatmbp [~/project]# scala -P:continuations:enable Loader.scala
    /Users/ashoat/project/Loader.scala:170: error: cannot cps-transform expression new this.Loader.Result[Int](5): type arguments [this.Loader.Result[Int],this.Loader.Result[Int],Nothing] do not conform to method shiftUnit's type parameter bounds [A,B,C >: B]
        Result(5)// : Result[Int] @cps[Result[Int]]
              ^
    one error found 
    ```

    **这有效**

    ```
    val getFive = reset {
      if (true) {
        Result(5) : Result[Int] @cps[Result[Int]]
      } else {
        val seq: Seq[Any] = shift { fetch[Int](Object.get(15181990251L)) }
        val Seq(obj: Object) = seq
        Result(obj.fields("test").toInt)
      }
    } 
    ```

    **但我收到以下警告**

    ```
    ashoat@ashoatmbp [~/project]# scala -P:continuations:enable Loader.scala
    /Users/ashoat/project/Loader.scala:170: warning: expression (new this.Loader.Result[Int](5): this.Loader.Result[Int]) is cps-transformed unexpectedly
        Result(5) : Result[Int] @cps[Result[Int]]
                  ^
    one warning found
    8 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:28:23.520

尽管我自己仍然不太了解*延续*，但据我所知，您示例中的关键问题是您的代码并不总是`shift`向`reset`.

编译器希望找到一些`shift`嵌套在`reset`. 然后它会将 CPS 转换`shift`为 a以及在转换为调用[`ControlContext][A, B, C]`](http://www.scala-lang.org/api/current/index.html#scala.util.continuations.ControlContext)之后发生的代码。`shift``ControlContext.map`

因为您有一个语句，所以在采用*else*`if`分支的情况下，没有嵌套：*`shift`*

 *```
reset {
  if (false) {
    shift { ... }
  } 
  Result(cached(id)) // no shift
} 
```

与

```
reset {
  if (false) {
    shift { ... }
  } else {
    Result(cached(id)) // no shift
  }
} 
```

这不能转换为有效的 CPS 代码。

看来您可以在 if 分支内进行重置，或者向 else 分支提供一个简单的 shift 语句：

```
if (!cached.isDefinedAt(id)) reset {
   shift { ... }
   Result(cached(id))
} else {
   Result(cached(id))
}

// or

reset {
  if (!cached.isDefinedAt(id)) {
    shift { ... }
    Result(cached(id))
  } else {
    shift[Result[Object], ExecState[Object], ExecState[Object]] { k => 
      Result(cached(id))
    }
  }
} 
```

**编辑：**似乎 cps 插件如何推断类型存在一些不一致之处。例如：

```
var b = false
def test[A](a: A) = reset {
  if (b) {
    a
  } else {
    shift{ (k: Unit => A) => k() }
    a
  }
} 
```

使用选项运行编译`-Xprint:selectivecps`表明编译器推断类型，`Reset[A, Nothing]`然后运行代码将在运行时产生错误。如果*if*反转为：

```
var b = false
def test[A](a: A) = reset {
  if (b) {
    shift{ (k: Unit => A) => k() }
    a
  } else {
    a
  }
} 
```

然后编译器正确推断`reset[A, A]`. 如果我提供`reset`喜欢的类型参数，`test[A](a: A) = reset[A, A] {`那么它在这两种情况下都有效。

也许将类型参数指定为`reset`and`shift`而不是 using `Result(5)`，使用该`shiftUnit[A, B, C]`方法将有助于减少不一致。*

# xml - 如何在经纬度半径范围内的 xml 文件中查找位置

> ID：15675183
> 
> 赞同：1
> 
> 时间：2013-03-28T05:58:20.207
> 
> 标签：xml, google-maps

我已经在这里搜索过，但我找不到任何接近我正在寻找的东西。我有一个工作地图，可以根据一些标准对标记进行排序。我想介绍一个新的标准，我将能够在经度和纬度的半径距离内进行搜索。

现在我的问题是，因为我已经有办法生成一个 xml 文件（通过 mysql/php），有没有一种方法可以计算与我的 php/mysql 生成的 xml 文件中存在的经度和纬度信息的距离，而无需重新编码这个xml 文件。我见过的所有方法都计算存储在数据库中的 lat 和 lng 信息的距离。

换句话说，我如何将 lat 和 lng 信息传递给距离计算公式，因为我在 xml 文件上有一个现有的 lat 和 lng 信息。顺便说一句，我的 php/mysql 生成的 xml 文件可以在这里查看[http://daressalaam.co.tz/execute.php](http://daressalaam.co.tz/execute.php)

阿桑特！（谢谢！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:23:05.597

首先，如果可以，请更改您的 PHP 代码以生成 JSON 而不是 XML。JSON 与从 PHP 生成 XML 一样容易 - 只需创建一个包含所需内容的 PHP 数组并在其上调用[json_encode](http://php.net/manual/en/function.json-encode.php)。该页面上有很多示例。并且 JSON在 JavaScript 中比在 XML 中*更*容易使用。

例如，如果我们从您的 XML 文件中摘录并改为 JSON 格式，它将如下所示：

```
{
    "markers": [
        {
            "section": "Female",
            "name": "Colorado Hooper",
            "address": "1415 Market St ",
            "gender": "Female",
            "graduation": 1996,
            "degree": "MS Computer Information Systems",
            "lat": 39.748177,
            "lng": -105.000504,
            "zipcode": "80202",
            "type": ""
        },
        {
            "section": "Female",
            "name": "Willow Weiss",
            "address": "259 E Broad St ",
            "gender": "Female",
            "graduation": 2001,
            "degree": "MS Computer Science",
            "lat": 33.957802,
            "lng": -83.374657,
            "zipcode": "30601",
            "type": ""
        }
    ]
} 
```

使用 JSON 的好处在于，您可以直接在 JavaScript 中访问数据，而不必为要使用的每个元素和属性调用一堆解析函数。它节省了大量工作并使 JavaScript 代码更清晰、更易于理解。

您还可以使用正确的数据类型：请注意，`lat`and`lng`值是数字而不是字符串，对于`graduation`（如果您希望年份是数字）也是如此。但要小心：邮政编码不是数字；它们应始终作为字符串处理。（如果这是一个问题，你总是可以继续对所有内容使用字符串，并在 JavaScript 代码中需要时转换为数字。）

这听起来像是您可以做的事情，还是出于某种原因您需要使用 XML？

现在跳到距离计算...您没有说要计算什么距离，但是如果您有任何两个纬度/经度坐标，则可以使用[Maps API 几何库](https://developers.google.com/maps/documentation/javascript/reference#spherical)`google.maps.geometry.spherical.computeDistanceBetween()`中的函数轻松获取它们之间的距离. 例如，假设您将上面的 JSON 对象存储在名为 的变量中，并且您想要获取文件中前两个条目之间的距离。它可能是这样的：`json`

```
var computeDistanceBetween = google.maps.geometry.spherical.computeDistanceBetween;

var markerA = json.markers[0];
var markerB = json.markers[1];
var latLngA = new google.maps.LatLng( markerA.lat, markerA.lng );
var latLngB = new google.maps.LatLng( markerB.lat, markerB.lng );
var distance = computeDistanceBetween( latLngA, latLngB ); 
```

即使您使用 XML，距离计算也是类似的，但您必须进行 XML 解析才能获得所需的数据属性。

# javascript - 单选按钮中的 Javascript onclick 在 Chrome 中不起作用

> ID：15675185
> 
> 赞同：2
> 
> 时间：2013-03-28T05:58:32.733
> 
> 标签：javascript, html, google-chrome

我看过这个：[Radio Button change event not working in chrome or safari](https://stackoverflow.com/questions/5090560/radio-button-change-event-not-working-in-chrome-or-safari)，它没有给我我正在寻找的解决方案。我有一个带有单选按钮和 onClick="jarod();" 的简单表单 jarod() 是上面调用的函数。见代码：

```
<script type="text/javascript">
function jarod()
 {
  alert('yes');
 }
</script> 
```

HTML 表单是：

```
<form id="form_601799" class="appnitro"  method="post" action="/formbuilder/view.php">
                <div class="form_description">
        <h2>Input Information to Prepare Answer</h2>
        <p></p>
    </div>                      
        <ul >
                <li id="li_1" >
    <label class="description" for="element_1">Number of paragraphs: </label>
    <div>
        <input id="element_1" name="element_1" class="element text small" type="text" maxlength="255" value=""/> 
    </div> 
    </li>       <li id="li_2" >
    <label class="description" for="element_2">Paragraph 1: </label>
    <span>

        <input id="element_2_1" name="element_2" class="element radio" type="radio" value="1" />

    <label class="choice" for="element_2_1" >Admit</label>
        <input onClick="jarod();" id="element_2_2" name="element_2" class="element radio" type="radio" value="2" />
    <label class="choice" for="element_2_2">Qualified Admission</label>
        <input id="element_2_3" name="element_2" class="element radio" type="radio" value="3" />
    <label class="choice" for="element_2_3">Deny</label>
        <input id="element_2_4" name="element_2" class="element radio" type="radio" value="4" />
    <label class="choice" for="element_2_4">Qualified Denial</label>
        <input id="element_2_5" name="element_2" class="element radio" type="radio" value="5" />
    <label class="choice" for="element_2_5">Legal Conclusion</label>
    </span> 
    </li>
                <li class="buttons">
            <input type="hidden" name="form_id" value="601799" />

            <input id="saveForm" class="button_text" type="submit" name="submit" value="Submit" />
    </li>
        </ul>
    </form> 
```

如您所见，有 onclick="jarod();" 试图调用 javascript 函数。当 onclick="jarod();" 位于输入标签部分，但如果我将其移动到标签部分，例如：

```
 <label class="choice" for="element_2_1" onClick="jarod();">Admit</lable> 
```

这个“标签”在 Chrome 中工作得很好。如果选择了合格录取或合格拒绝，我将使用它来显示一个文本区域。

谢谢你的帮助。

PS - 我也试过把 onclick="jarod();" 在文本字段中，它在 Chrome 中运行良好。单选按钮和 Chrome 有什么关系？

编辑：这令人沮丧。我使用 phpform.org 创建表单以节省时间。它在顶部使用此 DOCTYPE：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"> 
```

当我使用这个时：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
```

它工作得很好。有人评论说它是 XHTML / XML 的一种形式，果然如此。至少我能够花最后几个小时睡觉而不是坐在电脑前试图找出解决方案！

坏事是现在，我的 CSS 看起来不正确。我想我宁愿遇到格式问题而不是编程问题。

贾罗德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:16:35.447

您的文档是否以任何基于 XML 的 HTML 形式编写？因为如果是这样，那么 onClick 将被忽略，因为名称区分大小写。如果你把你的整个文档都放好，那么有人可以在原始文档的上下文中测试所有内容，并且肯定有人可以给你一个明确的答案（我很快就要睡觉了）。

现在，我的答案是尝试在单选按钮的属性中将 onClick 更改为 onclick。

此外，您需要将 onclick 放在每个单选按钮内，而不仅仅是其中一个。其他单选按钮是单独的 HTML 元素，因此其中一个的 onclick 事件不适用于其他任何一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:16:33.853

由于您没有在此处提供您的 DOCTYPE 问题，因此可能是 onclick 或 onClick

你应该检查一下。 [onclick 还是 onClick？](https://stackoverflow.com/questions/4380719/onclick-or-onclick)

也试试

```
onclick="javascript:jarod();" 
```

从 onclick for radio 开始，它在 OSX 的 chrome 上工作，这是一个小提琴

[http://jsfiddle.net/9efbR/](http://jsfiddle.net/9efbR/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-18T08:17:21.117

我在无线电输入方面遇到了类似的问题（无法开始`onclick=""`工作），并且解决方案已更改`onclick`为`onchange`.

# javascript - 如何以百分比而不是 gif 或任何动画图像显示网站加载

> ID：15675190
> 
> 赞同：1
> 
> 时间：2013-03-28T05:59:03.237
> 
> 标签：javascript, jquery, html, css

我在我的网站中使用 CSS 和 jQuery Preloader 来显示预加载图像，直到我的完整网站没有被下载。 [http://www.entheosweb.com/tutorials/css/preloader/default.asp](http://www.entheosweb.com/tutorials/css/preloader/default.asp)（我正在使用这个例子）。

现在我使用 Gif 图像，直到我的完整网站没有被下载。任何人都可以帮助我显示加载百分比而不是 gif 图像。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:16:30.687

尝试一个**HTML5 和 jquery 预加载**器......它是一个很好的 jquery 插件，可以满足您的要求......

[http://gianlucaguarini.com/canvas-experiments/jQuery-html5Loader/](http://gianlucaguarini.com/canvas-experiments/jQuery-html5Loader/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:06:34.900

一种可能的方法是异步加载网站的某些部分。例如，如果您需要加载一些文本和图像，您需要做的第一件事是指定该资源应占多少百分比：

```
text - 15%
image - 85% 
```

然后在加载文本后，您可以将进度条的宽度设置为 15%，并触发图像加载。加载图像后，您可以将进度条的宽度设置为 100% 并显示全部内容。

图片加载事件[在这里](https://stackoverflow.com/questions/5424055/check-if-images-are-loaded)。

[此处](http://api.jquery.com/jQuery.ajax/)异步加载文本内容（使用 ajax）。

# json - POJO与JSON结构不匹配时的Jackson反序列化

> ID：15675196
> 
> 赞同：0
> 
> 时间：2013-03-28T05:59:29.767
> 
> 标签：json, jersey, jackson

我有一些 json ：

```
{
  key: "CORE-19",
  fields: { summary: "iblah" }
} 
```

我想把它打包成一个看起来更像的 POJO：

```
@JsonIgnoreProperties(ignoreUnknown=true)
public class JiraIssue
{
    private String mKey;
    private String mSummary;

    public String getKey(){ return(mKey);}
    public void setKey(String inKey){mKey = inKey;}
    public String getSummary(){return(mSummary);}
    public void setSummary(String summary){  mSummary = summary; }
} 
```

所以基本上我不想创建一个“字段”对象，因为它对我的需求来说有点多余。但是，我真的看不出杰克逊有任何方法可以告诉它“摘要”属性实际上来自“字段”属性。这可能吗？

这个类的序列化不是问题，它只会用于反序列化。我无法控制 JSON 格式，因为它来自外部源（以上只是一个片段）。此外，我实际上将杰克逊与泽西岛一起使用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:24:24.910

这种结构性变化实际上存在一个悬而未决的[问题。](http://jira.codehaus.org/browse/JACKSON-781)目前还没有办法在不修改类的情况下仅使用注释轻松做到这一点。您可以做的是将“字段”属性作为“假”属性处理，方法是添加以下方法：

```
public void setFields(Map<String, String> fields) {
    setSummary(fields.get("summary"));
} 
```

这样你就可以自己“解开”财产了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:18:24.673

尝试：

```
@JsonProperty("fields.summary")
private String mSummary; 
```

# android - 如何解决slidingmenu+listview+viewpager touchEvent？

> ID：15675201
> 
> 赞同：1
> 
> 时间：2013-03-28T05:59:35.923
> 
> 标签：android, android-viewpager, slidingmenu

我在我的应用程序中使用slidingmenu，并且一个片段在pulltoRefreshList的标题中使用viewpager，但我发现我只能拉列表刷新，但我不能滑动viewpager。

# java - jboss 使用选项 -b 0.0.0.0 运行脚本

> ID：15675208
> 
> 赞同：0
> 
> 时间：2013-03-28T06:00:20.697
> 
> 标签：java, jboss

在 jboss 启动时，我们提供`-b 0.0.0.0`如下选项

```
run.sh -c web -b 0.0.0.0 
```

任何机构都可以解释为什么我们需要提供这个吗？

如果没有这个 (-b) 选项，我的应用程序部署将失败。

我用谷歌搜索了这个找不到正确的解释。

编辑在运行脚本而不是 0.0.0.0 中，我发送了 {MyPcIp}。

**部署错误**

```
2013-03-28 05:21:32,263 INFO  [org.jboss.web.WebService] (main) Using RMI server codebase: http://{MyPcIp}:8083/
2013-03-28 05:21:32,266 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] (main) Error installing to Start: name=jboss:service=WebService state=Create mode=Manual requiredState=Installed
java.lang.Exception: Port 8083 already in use.
        at org.jboss.web.WebServer.start(WebServer.java:233)
        at org.jboss.web.WebService.startService(WebService.java:322)
        at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:376)
2013-03-28 05:21:32,277 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] (main) Error installing to Real: name=vfsfile:/home/bnw/jboss-eap-5.0/jboss-as/server/web/conf/jboss-service.xml state=PreReal mode=Manual requiredState=Real
org.jboss.deployers.spi.DeploymentException: Error deploying: jboss:service=WebService
        at org.jboss.deployers.spi.DeploymentException.rethrowAsDeploymentException(DeploymentException.java:49)
        at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:118) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:02:42.383

该参数告诉服务器侦听所有接口，而不仅仅是默认接口（可能`127.0.0.1`）。但这不是这里的问题。

您配置的端口似乎已在使用中，因此它允许您侦听`0.0.0.0`而不是默认接口。但是，这不是解决问题的正确方法，因为到端口 8083 的连接可能会被不同的服务器接受，具体取决于所使用的特定接口。您应该弄清楚为什么您的应用程序尝试在 8083 上侦听两次，或者为什么有一个服务器已经绑定到该端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:02:02.133

-b 0.0.0.0 指定您希望 JBoss 绑定到网络接口 0.0.0.0（也称为“所有可用接口”），而不是使用任何默认配置

除非您使用它，否则 JBoss 无法启动的事实表明默认指向某个不存在/已被其他东西绑定的网络接口

或者您的应用程序希望 JBoss 绑定到所有网络接口——但由于它不再是这种情况，因此它失败了

# python - 比较两个变量的 if-then 语句

> ID：15675209
> 
> 赞同：-2
> 
> 时间：2013-03-28T06:00:27.100
> 
> 标签：python, if-statement

我只是在练习几行代码，这不是针对任何特定程序的，但困扰我的是我希望输入光标出现在打印旁边，但同时我需要在您不能这样做的同一行，我将其定义`e`为无效，因为那时`e`不能等于`4`. 这是我的代码：

```
a = int(input("Give me a Number: "))
b = int(input("Give me another number: "))
c = b + a
def none():
    pass
e = none()
print("the sum of"), a, ("and"), b, ("is"), c

d = int(input("Please Insert your age here: "))
if d < 18:
    print("Sorry you must be 18 years or older to enter this site")
else:
    print("Welcome to www.example.com")
print("What is 2+2: "), e == int(input("")),
if e == 4:
    print("good Job!")
else:
    print("sorry no") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:03:29.333

你的意思是这样的：

```
print("What is 2+2: "); e=int(input("")) 
```

您当前的代码实际上是在尝试创建( ) 的`tuple`结果和表达式的结果——如果没有给你 a通常是一个布尔值，因为它还没有被定义。`print``None``e==int(input(""))``e``NameError`

* * *

请注意，通常在这些情况下，您可能会这样做：

```
e = int(input("What is 2+2: ")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:05:45.720

请注意，`e == int(input(""))`（这意味着*`e`等于表达式*）和`e = int(input(""))`（这意味着*将表达式值分配给`e`*.

您需要将值分配给`e`

# java - GWT GIN 在一张图片中绑定多个 ClientBundle 和 ImageResource 以快速加载应用程序

> ID：15675215
> 
> 赞同：1
> 
> 时间：2013-03-28T06:00:49.497
> 
> 标签：java, gwt, browser-cache, gwt-gin, clientbundle

我在我的应用程序中使用 GWT。对于缓存图片，我使用带有 ImageResource 的 ClientBundle。我有很多这样的 ClientBundle：

```
public interface MenuBundle extends ClientBundle { 

  @Source(background.png) 
  ImageResource background();

  @Source(image_bg.png) 
  ImageResource image_bg();

...

} 
```

以及数百个具有相同方法的 ClientBundle，如下所示：

```
 public interface House1 extends House, ClientBundle { 

      @Source(house1/pic1.png) 
      ImageResource pic1();

      @Source(house1/pic2.png) 
      ImageResource pic2();

      @Source(house1/pic3.png) 
      ImageResource pic3();

    ...

    }

    public interface House2 extends House, ClientBundle{ 

      @Source(house2/pic1.png) 
      ImageResource pic1();

      @Source(house2/pic2.png) 
      ImageResource pic2();

      @Source(house2/pic3.png) 
      ImageResource pic3();

    ...

    }

   public interface House { 

      ImageResource pic1();

      ImageResource pic2();    

      ImageResource pic3();

    ...

    } 
```

结果，我在服务器上有数百张图片，例如“* .cache.png”。为了快速加载，我需要更少的图片。为此，我找到了决定：

```
public class ClientBundleModule extends AbstractGinModule {

 @Override
 protected void configure() {
  bind(MenuBundle.class).to(ClientBundlePack1.class);
  bind(NatureFuture.class).to(ClientBundlePack1.class);
  ...
  bind(House1.class).to(ClientBundlePack2.class);
  bind(House2.class).to(ClientBundlePack2.class);
  bind(House3.class).to(ClientBundlePack2.class);
  ...
 }
}

public interface ClientBundlePack1 extends MenuBundle, NatureFuture, ... {
}

public interface ClientBundlePack2 extends House1, House2, House3, ... {
} 
```

还有Ginjector，......但问题是：

ClientBundlePack1中的MenuBundle、NatureFuture等类编译成一张大图（好），但是House1、House2、House3等House没有编译成一张大图（不好）。

房屋将每个班级房屋编译在一张图片中。我在扩展实现的 java 方式中看到了问题，只使用一种像 pic1 一样的方法，而不是使用所有方法 pic1。

但我需要在一张照片中加入所有房屋。GIN 有设置、注释可以做到这一点。或者有没有其他方法可以加入所有的房子？但是我不能重写 Houses 的代码，它会破坏我的应用程序的架构。我需要在预加载后立即所有房屋，而不是“延迟加载”。

谢谢。

# css - Google Web 字体在 Konqueror 上看起来不正确 - 粗体∧斜体

> ID：15675220
> 
> 赞同：0
> 
> 时间：2013-03-28T06:01:35.810
> 
> 标签：css, fonts, font-face

我最近应用了来自 Google Web Fonts 的 Arimo 字体。在几乎所有现代浏览器上，它看起来都[很正常](http://wstaw.org/m/2013/03/28/plasma-desktopIvC633.png)，但在 Konqueror (KDE 4.10.1) 中，所有字体都是[粗体和斜体](http://wstaw.org/m/2013/03/28/plasma-desktopKPS633.png)。

是否有任何黑客或解决方案来防止这种行为？

我`<link>`的字体是：

```
 <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Arimo:400,700,400italic,700italic&amp;subset=latin,latin-ext"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:08:06.833

只需在外部定义`font-style: normal !important;`并`font-weight: normal !important;`在您看到它们的 css 中`bold`和`italic`在`Konqueror`. 所以它在所有浏览器中的行为都是一样的。

# scala - 如何在给定类名的情况下创建 Akka Actor

> ID：15675227
> 
> 赞同：4
> 
> 时间：2013-03-28T06:02:04.237
> 
> 标签：scala, akka

我想使用类名创建一个 Akka 演员，如图所示。我尝试了许多 system.actorOf(new Props(theProcessor.getClass), name = "Test") 的变体，但我就是无法让它工作。从类加载器创建 Actor 的任何想法

```
package com.test

import akka.actor.{Props, Actor, ActorRef, ActorSystem}

object Main {
  def main(args: Array[String]) {
   ActorFromString("Test")
  }
}

object ActorFromString {
  implicit val system = ActorSystem("Test")
  def apply(name: String): ActorRef = {
    val className = "com.test." + name + "Processor"
    val theProcessor: Actor = Class.forName(className).newInstance().asInstanceOf[Actor]
    system.actorOf(new Props(theProcessor.getClass), name = "Test")
  }
}

class TestProcessor extends Actor {
  def receive = {
    case data => println("processing data")
  }
}

Exception in thread "main" akka.actor.ActorInitializationException:
You cannot create an instance of [com.test.TestProcessor] explicitly using the constructor (new).
You have to use one of the factory methods to create a new actor. Either use:
'val actor = context.actorOf(Props[MyActor])'        (to create a supervised child actor from    within an actor), or
'val actor = system.actorOf(Props(new MyActor(..)))' (to create a top level actor from the   ActorSystem)
at akka.actor.ActorInitializationException$.apply(Actor.scala:166)
at akka.actor.Actor$class.$init$(Actor.scala:377)
at com.test.TestProcessor.<init>(ActorFromString.scala:20)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at  sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at java.lang.Class.newInstance0(Class.java:374)
at java.lang.Class.newInstance(Class.java:327)
at com.test.ActorFromString$.apply(ActorFromString.scala:15)
at com.test.Main$.main(ActorFromString.scala:7)
at com.test.Main.main(ActorFromString.scala)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

Process finished with exit code 143 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T09:29:04.593

您可以使用 Java API（仅用于 Props 实例化）：

```
val myActor = system.actorOf( 
  new Props( Class.forName( "myActorClassName" ).asInstanceOf[Class[Actor]] ) 
) 
```

重要的部分是`new`关键字。如果你省略它，你将使用 Scala API，它不允许按类实例化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T13:24:18.290

听起来您想使用与 ActorSystem 使用的 ClassLoader 相同的 ClassLoader，因此可以使用自定义 Akka 扩展轻松解决此问题（警告，未实际编译，但您会了解它的要点）

```
import akka.actor.{ Extension, ExtensionId, ExtensionIdProvider, ExtendedActorSystem, DynamicAccess }
// This will be instantiated once per ActorSystem instance
class Reflection(access: DynamicAccess) extends Extension {
  // Loads the Class with the provided Fully Qualified Class Name using the given DynamicAccess
  // Throws exception if it fails to load
  def actorClassFor(fqcn: String) = access.getClassFor[Actor](fqcn).get
}
// This is how we access the Reflection extension, you can view it as an ActorSystemLocal
object Reflect extends ExtensionId[Reflection] with ExtensionIdProvider {
  override def lookup = Reflect
  override def createExtension(system: ExtendedActorSystem) = new Reflection(system.dynamicAccess)
}
// Load the extension if not already loaded, return the instance for this ActorSystem and call the actorClassFor
system.actorOf(Props(Reflect(system).actorClassFor("com.test." + name + "Processor")) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-28T06:06:49.247

（如堆栈跟踪所示）您必须使用

*   `system.actorOf(Props[TestProcessor])` （没有`new`关键字，你传递一个类型）
*   或`system.actorOf(Props(new TestProcessor()))` （`new`关键字，您传递一个实例）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-30T19:09:19.720

如果您可以从字符串中获取道具，那么您可以从字符串中获取演员。以下是如何从字符串中获取道具：

```
Props.apply(Class.forName( "myActorClassName" ).asInstanceOf[Class[Actor]]) 
```

我提出这个是因为没有其他答案使用`Props.apply`- Akka 的一个相对较新的增强。很容易传入构造函数参数，例如当前的 actorRef，例如：

```
def selfActorRef = context.self
val gateKeeperRef = context.actorOf(
  Props.apply(Class.forName(findGateKeeperName).asInstanceOf[Class[Actor]],
  selfActorRef)
) 
```

# java - java中的同步包装器

> ID：15675229
> 
> 赞同：-1
> 
> 时间：2013-03-28T06:02:23.243
> 
> 标签：java, wrapper

我想绕过一个开放的 jpa 拦截器调用并将数据存储在数据库中（目前它只保存在一个数据库中，我需要同步保存在另一个数据库中）。为此，我需要同步包装器。请帮助我了解这些是什么

公共静态集合 synchronizedCollection(Collection c);

公共静态 Set synchronizedSet(Set s);

公共静态列表同步列表（列表列表）；

公共静态地图同步地图（地图m）；

public static SortedSet synchronizedSortedSet(SortedSet s);

public static SortedMap synchronizedSortedMap(SortedMap m);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:38:30.017

所有这些方法都将使用实现该 Respectable 集合接口和 Java Monitor Pattern 的 Class 在内部包装作为参数传入的任何集合。

Java Monitor Pattern 使用对象级别的监视器（锁）来同步通过集合接口公开的所有方法。

这样即使作为参数传入的 Collection 也不是线程安全的。它将被包裹在一个线程安全的对象中，从而使收集线程安全。

# bluetooth - 我正在使用蓝牙聊天的示例应用程序。我只想搜索那些安装了“蓝牙聊天”的设备

> ID：15675236
> 
> 赞同：-1
> 
> 时间：2013-03-28T06:02:52.283
> 
> 标签：bluetooth

我正在使用蓝牙聊天的示例应用程序。我有一个问题，我只想搜索那些安装了“蓝牙聊天”的设备。请帮助我是android的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:45:53.447

这是不可能的。您所能做的就是尝试将它们全部连接起来，如果连接被拒绝，您将知道该设备没有运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T14:33:45.113

这是不可能的。因为在通过蓝牙连接之前，您没有在另一台设备中检查应用程序的包名称。如果您只想连接选项卡或移动设备，那么这很容易实现。

# vb.net - 在水晶报表中连接字符串和数字字段

> ID：15675239
> 
> 赞同：2
> 
> 时间：2013-03-28T06:03:06.010
> 
> 标签：vb.net, crystal-reports

我想在水晶报表中连接城市和密码字段。我努力了：

```
{datafield1.city}&"-"&{datafield2.pin} 
```

它显示前：Mangalore-568,757.00

但我想要 mangalore-568757

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:31:10.083

```
{datafield1.city}&"-"&totext({datafield2.pin},"#") 
```

# java - 在java中生成随机数列表

> ID：15675242
> 
> 赞同：5
> 
> 时间：2013-03-28T06:03:24.880
> 
> 标签：java, random

我生成一个随机数 0 或 1

`int randomColor = (Math.random() < 0.5) ? 0 : 1;`

我需要创建 52 个随机数，其中 26 个是 0，26 个是 1

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-28T06:05:47.017

你可以这样做：创建一个`List`52 个数字。用 26 个 0 和 26 个 1 填充它，然后用`Collections.shuffle()`随机顺序将它们洗牌。

```
List<Integer> numbers = new ArrayList<>();

for (int i = 0; i < 26; i++) {
    numbers.add(0);
    numbers.add(1);
}

Collections.shuffle(numbers); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T06:11:42.333

整个[`Collections.shuffle(list)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)过程只需 3 行代码：

```
List<Integer> list = new ArrayList<Integer>();
for (int i = 0; i < 52; i++) list.add(i % 2);
Collections.shuffle(list); 
```

瞧！

# c# - 报告定义无效

> ID：15675248
> 
> 赞同：6
> 
> 时间：2013-03-28T06:03:48.303
> 
> 标签：c#, report, rdlc

我已经`.rdlc`从 SSRS 2005 转换为 SSRS 2008。现在，当我要构建该项目时，我遇到了错误。

> 报告定义无效。详细信息：报表定义具有无法升级的无效目标命名空间“ [http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition ”。](http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition)

请给我解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T23:53:07.800

因为我遇到了同样的问题，所以偶然发现了这个问题。在我的例子中，我引用了旧版本的 ReportViewer.WinForms。当我切换版本时，一切正常。可能与您的情况不同，但只是想我会插话以防其他人找到此页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-05T11:02:22.590

我遇到了几乎类似的问题，但是在另一个版本的 Visual Studio（2012）中，我发现问题出在 Microsoft.ReportViewer.WebForms.dll 或 winforms 的版本中。您可能仍在引用与您当前版本的 Visual Studio 相关的旧版本，因此请检查 dll 版本，如果是，请将其删除并添加最新版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T08:38:57.957

我有完全相同的问题。对我来说，解决方案是从项目中排除报告并再次添加它。之后它编译成功。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-08T17:18:48.347

我遇到了同样的问题，我的解决方案是编辑文件：

```
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0
    \ReportingServices\Microsoft.ReportingServices.targets 
```

并更改之前所说的第 2 行：

```
<UsingTask TaskName="Microsoft.Reporting.RdlCompile" 
AssemblyName="Microsoft.ReportViewer.Common, Version=9.0.0.0, 
Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/> 
```

对此：

```
<UsingTask TaskName="Microsoft.Reporting.RdlCompile" 
AssemblyName="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, 
Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/> 
```

完成后，我的程序再次开始编译。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-10T13:32:48.747

我不完全确定为什么@user2702793 的回答被否决了，因为这个建议挽救了我的职业生涯：

考虑

1.  创建空白 SSRS 2008 报告并将 SSRS 2005 报告中的所有内容复制到新报告中
2.  如果要保持报告名称不变，请复制 SSRS 2005 报告的名称
3.  删除该报告（SSRS 2005，您刚刚将内容复制到新报告中）
4.  重命名您的新 SSRS 2008（其中包含已删除的 SSRS 2005 报告的内容）并粘贴报告名称。

除了我想保留我的 SSRS 旧版本而不是升级它之外，我遇到了上面提到的非常相似的情况。这基本上让我复制了旧版本，从意外升级的报告中复制内容并将其粘贴到复制的报告中，复制升级报告的名称，删除它并重命名我复制的报告以保留相同的名称刚刚被删除的报告。

编辑：当然，就我而言，我还希望对旧报告进行更改，这些更改都在升级后的报告中，因此我进行了长时间的工作以防止丢失我当前的更改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-23T13:51:42.313

对我有用的解决方案是运行 .NET 清理工具，我先尝试了 .NET 框架修复工具，但它不起作用。[我在这里](http://blogs.msdn.com/b/astebner/archive/2008/03/07/8108332.aspx)阅读了建议

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-25T21:56:32.420

在 webform 的 ReportViewer 属性中，在字段中展开 LocalReport/Path 放置正确的报告路径

*   这对我有用...

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-12-12T16:10:59.147

可能是转换问题。重新创建一个新的 2008 年报告。我建议使用VS2010。使用 VS2012 编辑报告时，我遇到了同样的问题。

# java - 防止在 android 的 textwatcher 中运行两次

> ID：15675250
> 
> 赞同：3
> 
> 时间：2013-03-28T06:03:59.523
> 
> 标签：java, android, textwatcher

我正在使用 android 的 TextWatcher 执行此操作：当用户输入时，保存输入的内容，保存后，更改 Edittext 中的字符。例如，我有一个像“hi im happy”这样的常量文本，并且我在 edittext 中输入的每一件事用户都看到这个文本正在写入（这个字符串在用户输入时显示 Tandemly）！但用户键入的主要文本存储在变量中。我在 afterTextChanged 中使用此代码：

```
if(s.toString().charAt(s.length()-1) != 'a'){
    //save inside freaktext variable(append)
    freaktext=freaktext+s.toString().charAt(s.length()-1);

        //change edittext value(what user see's)
    txtfreak.setText(s.toString().substring(0, s.length()-1) + "a"); 
    txtfreak.setSelection(txtfreak.getText().length());
}else{
    freaktext=freaktext+"a";
} 
```

我说这段代码，如果键入的字符不是“a”，请将其保存在名为“freaktext”的变量中，然后更改edittext值并将“a”字符放在edittext中字符串的末尾。但如果用户键入“a”，只需将其保存在freaktext中。

但是我的问题是：当用户键入一个无“a”字符时，一切正常，我的代码保存键入的字符然后修改edittext值，但是当edittext值更改时，整个代码再次运行，因为上次我更改它并放置一个“ a”，我的代码的第二部分（else）运行并再次将“a”保存到已保存字符串的末尾。事实上，当我输入“q”时，我在保存的字符串中看到了“qa”！！我希望用户直接在键盘上输入“a”，保存“a”，而在其他情况下则不需要。事实上，我的 else 部分仅在用户直接按下键盘上的“a”键时运行。我该怎么做？请帮助我，这段代码浪费了我 1 天的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:10:12.947

在您的功能之外，某处：

```
boolean weChangedIt = false; 
```

内部`afterTextChanged`：

```
if (weChangedIt) {
     weChangedIt = false;
} else {
    if(s.toString().charAt(s.length()-1) != 'a'){
        weChangedIt = true;
        freaktext=freaktext+s.toString().charAt(s.length()-1);
        txtfreak.setText(s.toString().substring(0, s.length()-1) + "a"); 
        txtfreak.setSelection(txtfreak.getText().length());
    }else{
        freaktext=freaktext+"a";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:15:10.760

```
txtfreak.removeTextChangedListener(whateveryourlistenername);
if(s.toString().charAt(s.length()-1) != 'a'){
freaktext=freaktext+s.toString().charAt(s.length()-1);
txtfreak.setText(s.toString().substring(0, s.length()-1) + "a"); 
txtfreak.setSelection(txtfreak.getText().length());

}else{
freaktext=freaktext+"a";
}
txtfreak.addTextChangedListener(whateveryourlistenername); 
```

# ruby-on-rails - 将 example.com 重定向到在 localhost:3000 上运行的 Rails 服务器，而 Apache 站点完好无损？

> ID：15675252
> 
> 赞同：2
> 
> 时间：2013-03-28T06:04:14.290
> 
> 标签：ruby-on-rails, linux, apache, hosts

我正在开发一个在 localhost:3000 上运行的 Rails 应用程序。我希望 example.com 指向 localhost:3000。我编辑了 /etc/hosts 文件，但它没有使用端口号，因此请求转到 apache。我希望 apache 站点按原样工作，但将 example.com 重定向到 rails 服务器。

请提出实现这一目标的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:36:01.830

您可以在浏览您的网站时仅指定 example.com:3000 吗？如果没有，我建议使用[Phusion Passenger](https://www.phusionpassenger.com/)以便 Apache 可以在运行您的应用程序的同时继续响应端口 80。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:33:41.493

使用 mod_proxy？

```
ProxyPass /your_rails_app http://your.server.address:3000
ProxyPassReverse /your_rails_app http://your.server.address:3000 
```

[http://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

# jquery - 我什么时候需要 jQuery 中的关键字 noConflict？

> ID：15675258
> 
> 赞同：0
> 
> 时间：2013-03-28T06:04:43.560
> 
> 标签：jquery

我见过一些使用`jQuery.noConflict`. 但似乎并不总是必要的。

```
// define $
var $ = function() {
    alert("Hello World");
};

// use $ where it's not jQuery
$();

// 1
// jQuery.noConflict();
jQuery(document).ready(function($) {
    $('body').append("<p>foo</p>");
});

// 2
// jQuery.noConflict();
(function($) {
    $(function() {
        $('body').append("<p>foo</p>");
    });
})(jQuery);

// 3
// $.noConflict() here to tell jQuery to ignore $, but we're using *jQuery* when ready
jQuery(document).ready(function() {
    jQuery('body').append("<p>foo</p>");
});

// use $ where it's not jQuery
$(); 
```

唯一需要的`jQuery.noConflict`是当我们定义jQuery的别名时

```
var j = jQuery.noConflict();
j(document).ready(function() {
    j('body').append("<p>foo</p>");
}); 
```

那么在什么情况下（除了创建别名）`jQuery.noConflict()`不能省略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:05:48.577

当你有单一版本的 jQuery 并且没有使用可能相互冲突的框架时，你可以省略[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)，

> 其他一些流行的 JavaScript 框架包括：MooTools、Backbone、Sammy、Cappuccino、Knockout、JavaScript MVC、Google Web Toolkit、Google Closure、Ember、Batman 和 Ext JS。
> 
> 其他一些框架也使用 $ 字符作为快捷方式（就像 jQuery 一样），然后您突然有两个不同的框架使用相同的快捷方式，这可能会导致您的脚本停止工作。
> 
> jQuery 团队已经考虑到这一点，并实现了 noConflict() 方法。[参考](http://www.w3schools.com/jquery/jquery_noconflict.asp)

在 JQuery 文档中。

> 许多 JavaScript 库使用 $ 作为函数或变量名，就像 jQuery 一样。在 jQuery 的例子中，$ 只是 jQuery 的别名，所以所有功能都可以在不使用 $ 的情况下使用。如果您需要与 jQuery 一起使用另一个 JavaScript 库，请通过调用 $.noConflict() 将 $ 的控制权返回给另一个库。$ 的旧引用在 jQuery 初始化期间被保存；noConflict() 只是恢复它们。[参考](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:13:27.467

许多 JavaScript 库使用 $ 作为函数或变量名，就像 jQuery 一样。在 jQuery 的例子中，$ 只是 jQuery 的别名，所以所有功能都可以在不使用 $ 的情况下使用。

如果您需要与 jQuery 一起使用另一个 JavaScript 库，请通过调用 $.noConflict() 将 $ 的控制权返回给另一个库。$ 的旧引用在 jQuery 初始化期间被保存；noConflict() 只是恢复它们。

# php - 如何使用按钮提交和计时器显示/隐藏表单和 div

> ID：15675260
> 
> 赞同：0
> 
> 时间：2013-03-28T06:04:56.970
> 
> 标签：php, jquery, html, hide, show

再次一如既往，感谢您的宝贵时间。这真让我抓狂。

注意：我绝不希望页面刷新。

我有一个表单，然后是加载栏图像，然后是链接按钮。主页开始时只有一个表单和一个提交按钮

我想要做的是当表单提交整个`div`（1）&它的内部和它的内容消失，然后同时一个新的`div`（2）在它的位置，出现一个`loading.gif`图像和`submitted entry`，然后在5秒后这个div消失，取而代之的是另一个`div`（3），`button`里面有一个链接和文本

`div1`：显示表单直到单击按钮， `div2`：然后加载图像 5 秒 `div3`：链接和文本保持可见

我的代码原样（没有任何东西隐藏它，并且在不应该出现的情况下显示 div）

```
 <html>
 <head>

 <script type="text/javascript">
 function countdown() {
 var i = document.getElementById('counter');
 if (parseInt(i.innerHTML)<=0) {
    location.href = '#';
    clearInterval(t);
    exit;
 }
  i.innerHTML = parseInt(i.innerHTML)-1;
 }
 var t = setInterval(function(){ countdown(); },1000);
 </script>
 </head>

 <body>
 <!--1\. Show until submit then hide -->
 <div id="div1">
 <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">
 Answer: <input type="Text" Name="info" required>
 <input type="Submit" value="Send">
 </form>
 </div>

  <!--2\. Show for 5 seconds on submit then hide  -->   
 <div id="div2">
 <?php
 if (count($_POST) > 0 && isset($_POST["info"])){
 // add First and Second Numbers
 $sum = $_POST["info"];
 // their Answer is diplayed 
 echo "&nbsp; Your answer $sum". "<br />";
 echo '<img src="http://i.imgur.com/nh9eh0c.gif" border=0>'. "<br />";
 echo '&nbsp; Submiting answer in <span id="counter"> 5</span>' . "<br />";
 // after 5 secounds this hides and is replace with a button link and the text "thank you"
 } ?>
 </div>

 <!--3\. Show after 5 seconds above then nothing  -->  
 <div id="div3">
 <?php  
 echo 'Back home'. "<br />";
 echo '<a href="https://www.google.co.nz/"><img src="http://www.skeletonsthemovie.com/images/home-button-large.png" border=0></a>';
 ?>
 </div>
 </body>
 </html> 
```

希望这不会让人感到困惑，正确地用词很难..任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:20:00.707

你需要这样的东西

```
 <script>
         $(document).ready(function(){

         $('#submit').click(function(event){

            event.preventDefault();
            $('#div1').css('display','none');
            $('#div2').css('display','block');
            setTimeout(function(){$('#div2').css('display','none');$('#div3').toggle()},5000);
            $.ajax({

                //submit form using ajax
            })
         }) 

         })
         </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:11:34.530

您可以在此使用 Jquery。只需`setTimeout("$('#div).dialog('close')", 5000);`在您想在 5 秒后关闭 div 时放置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:35:18.857

在jquery中你可以这样尝试

```
$(document).ready(function(){
    $("#div2").hide();
    $("#div3").hide();

    $("#submit-button").click(function(event){
        event.preventDefault();
        if(event.target == this){
            if($("#info").val() == ''){
                alert("Please enter information.");
                return false;
            }

            $("#div1").hide().;
            $("#div2").show().;
            $("#answer").html($("#info").val());

            $("#div2").delay(5000).fadeOut();
            $("#div3").delay(5000).fadeIn();

            $("#back").click(function(){
                 $("#div3").delay(5000).fadeOut();
                 $("#div2").hide();
                 $("#div1").show();
            });
        }
    });

}); 
```

# python - 以 ASCII 显示树

> ID：15675261
> 
> 赞同：7
> 
> 时间：2013-03-28T06:05:11.067
> 
> 标签：python, tree

作为一个时间传递活动，我决定在 python中实现一个[树（类似）结构。](http://en.wikipedia.org/wiki/Tree_%28data_structure%29)
我实现了一个`Node`类（仅用于此处），如下所示：

```
class Node:
    def __init__(self, name, parent, *data):
        self.name = name
        self.parent = parent
        self.data = data
        self.children = []
        self.is_root = False

    def __repr__(self):
        return 'Node '+repr(self.name)

    def dic(self):
        retval = {self:[]}
        for i in self.children:
            retval[self].append(i.dic())
        return retval

    def display(self): # Here
        pass

    def has_children(self):
        return bool(self.children)

    def get_parent(self):
        return self.parent

    def add_child(self, name, *data):
        child = Node(name, self,*data)
        self.children.append(child)
        return child 
```

如您所见，该`display`功能未实现。
这是一个示例树。

```
A = Node('A',Node)
A.is_root = True
B = A.add_child('B')
D = B.add_child('D')
C = A.add_child('C')
E = C.add_child('E')
F = C.add_child('F')
G = C.add_child('G') 
```

这是`display`.

```
>>> A.display()
    A
  +-^-+
  B   C
  | +-+-+
  D E F G
>>> C.display()
   C
 +-+-+
 E F G 
```

简而言之，
**如何从 Node 类“构建”一个 ASCII 树（如上）？**

在更长的形式中，
印刷的“逻辑”是：

1.  当只有一个孩子时，`|`放在孩子之上。(四)
2.  否则，每个孩子都有一个`+`上面，（B，C，E，F）
3.  甚至没有的时候。的孩子，`^`放在父母之下。（一种）
4.  否则，（有奇数个孩子）`+`放在父母之下。（C）

我一直在考虑从下面开始。我意识到必须给每个孩子打电话，但一直无法实现任何（那种或其他的）任何接近它的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-04T05:32:47.460

这是一个解决方案，涵盖了您正在寻找的大部分内容。

像任何树算法一样，向下递归树的子节点，并在每个节点处组合结果。诀窍是：`display()`返回一个矩形的文本，例如：

```
aaaaaa
aaaaaa
aaaaaa 
```

大多数矩形将是空白。只返回文本的矩形可以很容易地组合结果。我们将使用以下两个辅助函数，一个用于测量块的宽度，另一个用于将块水平组合成更大的块：

```
def block_width(block):
    try:
        return block.index('\n')
    except ValueError:
        return len(block)

def stack_str_blocks(blocks):
    """Takes a list of multiline strings, and stacks them horizontally.

    For example, given 'aaa\naaa' and 'bbbb\nbbbb', it returns
    'aaa bbbb\naaa bbbb'.  As in:

    'aaa  +  'bbbb   =  'aaa bbbb
     aaa'     bbbb'      aaa bbbb'

    Each block must be rectangular (all lines are the same length), but blocks
    can be different sizes.
    """
    builder = []
    block_lens = [block_width(bl) for bl in blocks]
    split_blocks = [bl.split('\n') for bl in blocks]

    for line_list in itertools.izip_longest(*split_blocks, fillvalue=None):
        for i, line in enumerate(line_list):
            if line is None:
                builder.append(' ' * block_lens[i])
            else:
                builder.append(line)
            if i != len(line_list) - 1:
                builder.append(' ')  # Padding
        builder.append('\n')

    return ''.join(builder[:-1]) 
```

看看这是怎么回事？子节点返回一个显示自己及其后代的矩形，每个节点会将这些矩形组合成一个包含自身的更大矩形。其余代码只呈现破折号和加号：

```
class Node:
    def display(self): # Here
        if not self.children:
            return self.name

        child_strs = [child.display() for child in self.children]
        child_widths = [block_width(s) for s in child_strs]

        # How wide is this block?
        display_width = max(len(self.name),
                    sum(child_widths) + len(child_widths) - 1)

        # Determines midpoints of child blocks
        child_midpoints = []
        child_end = 0
        for width in child_widths:
            child_midpoints.append(child_end + (width // 2))
            child_end += width + 1

        # Builds up the brace, using the child midpoints
        brace_builder = []
        for i in xrange(display_width):
            if i < child_midpoints[0] or i > child_midpoints[-1]:
                brace_builder.append(' ')
            elif i in child_midpoints:
                brace_builder.append('+')
            else:
                brace_builder.append('-')
        brace = ''.join(brace_builder)

        name_str = '{:^{}}'.format(self.name, display_width)
        below = stack_str_blocks(child_strs)

        return name_str + '\n' + brace + '\n' + below

    # SNIP (your other methods) 
```

我们要去参加比赛了！

```
 a                             
+-+-+---------------------------+                          
b e f                           g                          
+     +-+-------------------------+                        
c     h i                         k                        
+       + +-+-+-+-------------+-------------+-+------+     
d       j l m p r             s             O P      Q     
            + +   +-+-+-+---------+             +-----+    
            n q   t u w x         y             R     S    
            +       +     +-------+-------+       +---+---+
            o       v     z       A       M       T   U   Z
                            +-+-+-+-+-+-+ +           +   +
                            B D E H I K L N           V   a
                            +   +   +               +-+-+ +
                            C   F   J               W X Y b
                                +                          
                                G 
```

（像“在父级下方放置 ^”这样的要求留给读者练习）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T11:33:01.667

我想建议看一下 ETE 模块[http://ete.cgenomics.org](http://ete.cgenomics.org)，它实现了您在此处描述的功能等等。

同时，我想[在控制台窗口中以侧向树格式提供此条目 Pretty Print 输出，](https://stackoverflow.com/questions/12255793/pretty-print-output-in-a-sideways-tree-format-in-console-window/17260252#17260252)以前曾问过类似的问题。正如您在此类讨论中看到的那样，ETE 的 _asciiArt 函数提供了我认为您正在寻找的东西。

我希望这有帮助，

# java - 如何重置 ObjectInputStream 对象图形缓存以避免内存膨胀

> ID：15675262
> 
> 赞同：1
> 
> 时间：2013-03-28T06:05:14.643
> 
> 标签：java, serialization

使用 ObjectInputStream 加载大文件时，所有读取的对象都由流缓冲以进行对象图解析。
这会导致巨大的内存开销，这在我的情况下是不需要的（所有读取的对象都是相互依赖的）。
是否有等效于重置此缓冲区的 ObjectOutputStream 的 reset() 方法？

代码示例：

```
try (FileInputStream fileInputStream = new FileInputStream(filename);
         BufferedInputStream bufferedInputStream = new BufferedInputStream(fileInputStream);
         ObjectInputStream objectInputStream = new ObjectInputStream(bufferedInputStream)) {
  while (object = objectInputStream.readObject()) {
    System.Out.println(object.toString());
  }
} 
```

*   该类实际上有一个重置方法，但它做了完全不同的事情。
*   请参阅[导致内存膨胀的 Java API](https://stackoverflow.com/questions/1281549/memory-leak-traps-in-the-java-standard-api)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:22:54.633

由发送方决定何时破坏已发送对象图的完整性，方法是调用`ObjectOutputStream.reset()`. 不是接收者。

请注意，您的代码无法编译，如果编译则无效：

```
while (object = objectInputStream.readObject()) {
} 
```

这应该是

```
try {
    while (true) {
        object = objectInputStream.readObject();
        // ...
    }
}
catch (EOFException exc) {
    // end of stream
} 
```

国外有一种误解，即在流结束时`readObject()`返回。`null`它没有。它抛出`EOFException`。它可以`null`在您编写`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:08:15.690

嗯，您似乎需要使用某种延迟加载技术，您只加载对象图的必要组件，而不是所有内容。

# mongodb - Mongodb 2.4 2dsphere 查询非常慢

> ID：15675265
> 
> 赞同：1
> 
> 时间：2013-03-28T06:05:23.140
> 
> 标签：mongodb

我已将使用 mongodb“2d”索引的旧集合转换为具有 geojson 规范“2dsphere”索引的集合。问题是查询大约需要 11 秒才能对大约 2 个 lac 对象的集合执行。以前查询大约需要 100 毫秒。我的文件如下。

`{ "_id": ObjectId("4f9c2aa2d142b9882f02a3b3"), "geonameId": NumberInt(1106542), "name": "Chitungwiza", "feature code": "PPL", "country code": "ZW", "state": "Harare Province", "population": NumberInt(340360), "elevation": "", "timezone": "Africa\/Harare", "geolocation": { "type": "Point", "coordinates": { "0": 31.07555, "1": -18.01274 } } }`

我的解释查询输出如下。

```
db.city_info.find({"geolocation":{'$near':{ '$geometry': { 'type':"Point",coordinates:[73,23] } }}}).explain()

{
"cursor" : "S2NearCursor",
"isMultiKey" : true,
"n" : 172980,
"nscannedObjects" : 172980,
"nscanned" : 1121804,
"nscannedObjectsAllPlans" : 172980,
"nscannedAllPlans" : 1121804,
"scanAndOrder" : false,
"indexOnly" : false,
"nYields" : 13,
"nChunkSkips" : 0,
"millis" : 13841,
"indexBounds" : {

},
"nscanned" : 1121804,
"matchTested" : NumberLong(191431),
"geoMatchTested" : NumberLong(191431),
"numShells" : NumberLong(373),
"keyGeoSkip" : NumberLong(930373),
"returnSkip" : NumberLong(933610),
"btreeDups" : NumberLong(0),
"inAnnulusTested" : NumberLong(191431),
"server" : "..."
} 
```

请让我知道如何纠正问题并减少查询时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T17:01:24.123

$near 命令不需要您建议的“2dsphere”数据库的 $maxDistance 参数。添加 $maxDistance 只是指定了一个范围，将查询结果的数量减少到一个可管理的数量。您的体验从“2d”更改为“2dsphere”样式索引的原因是，如果没有指定，“2d”索引的默认限制为 100。如您所见，2dsphere 索引的默认查询计划没有施加这样的限制，因此查询正在扫描整个索引（“nscannedObjects”：172980）。如果您在“2d”索引上运行相同的查询，您会看到“n”和“nscannedObjects”只有 100，这解释了成本差异。

如果您的所有项目都在 $maxDistance 范围内（例如，尝试使用 $maxDistance 20M 米），您将看到查询性能下降到没有它时的水平。在任何一种情况下，使用 limit() 来告诉查询计划只扫描索引中必要的结果以防止失控非常重要，尤其是对于较大的数据集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:37:16.423

我已经解决了这个问题。$near 命令需要这里指定的 $maxDistance 参数：http: [//docs.mongodb.org/manual/applications/2dsphere/](http://docs.mongodb.org/manual/applications/2dsphere/)。一旦我提供了 $maxDistance，查询时间就减少到不到 100 毫秒。

# c++ - 与 C++ 中的 Null 进行比较

> ID：15675275
> 
> 赞同：5
> 
> 时间：2013-03-28T06:05:56.093
> 
> 标签：c++, null, operators

好的，请仔细检查下面的代码，它只是函数的一部分

```
void RepeatWord(){
    system("cls");
    string word = NULL;
    string newword = NULL;
    int repeats = 0;
    while(true){
        if(word == NULL){
            cout<<"Currently no word is stored..";
            cout<<"\n\nPlease enter a word: ";
            cin>>word;
        }
.... 
```

好吧，我一直在使用其他编程语言，我总是在与一个`NULL`值进行比较，但是在 C++ 中……这似乎是一种不同的情况。错误说..

> 错误：'word == 0' 中的 'operator==' 不匹配

好吧，我想知道我只是在与 a 进行比较`NULL`，我真的不知道为什么这是错误的。将值与 a`NULL`与 C++ 进行比较是否不同？请教我。谢谢

注意：我比 java 更了解 ruby

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T06:07:29.700

您正在尝试将对象与 进行比较`NULL`，但您无法将对象与 进行比较`NULL`。您需要比较一个指针。这样做时，您检查指针是否指向不是有效对象的东西。

在您的情况下，您想检查是否`std::string`为空。您可以使用`std::string`,提供的成员函数`std::string::empty()`。

考虑到您的问题，我强调需要一本好的学习书：

[The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T06:56:58.930

如果您来自 Java 世界，您确实会发现 C++ 中的对象处理方式不同。在 C++ 中，除非明确说明，否则直接操作数据。在 Java 中，对象完全由 VM 管理，因此，让程序仅通过引用访问它们是有意义的。因此，无论何时编写 Java 程序，都必须告诉 VM 使用 分配对象`new`，然后再分配`null`给类实例的变量。遵循相同的原则，如果您将一个对象变量分配给另一个对象变量，则两者都将*引用*同一个对象，并且在其中任何一个上调用方法都会在同一个底层实例上调用该方法。

在 C++ 中，有两种不同的机制可以获得相同的结果：

*   使用指针，其类型的语法`T`是

    ```
    T *t; 
    ```

    因此这`std::string *word;`将定义一个名为的变量，该变量`word`包含一个指向`std::string`.

*   使用参考：

    ```
    T &t; 
    ```

在 C++ 中，这两个实际上都是类型，即。`std::string`, `std::string *`,`std::string &`是三种不同的类型。第一个实际上表示结构化值本身，而另外两个表示对 type 值的间接引用`std::string`。

[此 SO条目](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)解释了这些类型间接之间的区别。

在您的代码中，您将不得不用`NULL`空字符串文字替换所有出现的 ，或者在尝试使用对象之前`""`使用指针并使用语句分配实例- 就像在 line 中一样。`new``cin >> word;`

# c# - 如何在asp.net中使用javascript从代码后面添加查询字符串参数？

> ID：15675278
> 
> 赞同：5
> 
> 时间：2013-03-28T06:06:05.780
> 
> 标签：c#, javascript, asp.net, query-string

我正在使用后面代码中的 javascript 打开一个页面 onClick 事件。但*我想传递查询字符串参数并在另一个页面上访问它。*

```
string id=1;
    teammember.Attributes.Add("onclick", "window.location.href='TeamMemberDetails.aspx?Id=" + Id + "'"); 
```

上面的代码工作正常！

**现在我想使用 Javascript 附加 QueryString 并在 CodeBehind 的另一个页面上访问它。**

我试过 ：

```
teammember.Attributes.Add("onclick", "window.location.href='TeamMemberDetails.aspx?Id=" + Id + "'" + "&isabout=true"); 
```

但它不起作用！

如何使用 HTML Anchor 进行条件重定向：

```
 <a style="border: 0px none; float: left;" href="TeamMember.aspx">

            <img alt="<--" src="Images/ArrowLeft.png" style="display: inline-block; cursor: pointer;
                border: 0 none;" />
        </a> 
```

在上面我想根据查询字符串参数设置条件重定向？

例如：如果 isabout=true 然后重定向到 TeamMember.aspx 否则 Other.aspx 帮助赞赏！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T06:09:39.307

`'`您在查询字符串中有一个单引号。您必须将引号的位置更改为`'`href 字符串的末尾。

改变这个。

```
teammember.Attributes.Add("onclick", "window.location.href='TeamMemberDetails.aspx?Id=" + Id + "'" + "&isabout=true"); 
```

对此。

```
teammember.Attributes.Add("onclick", "window.location.href='TeamMemberDetails.aspx?Id=" + Id + "&isabout=true'"); 
```

# zend-framework2 - 如何使用 Zend\Form 将类应用于标签并在呈现的表单中添加行尾？

> ID：15675279
> 
> 赞同：0
> 
> 时间：2013-03-28T06:06:11.783
> 
> 标签：zend-framework2, zend-form2

我已经按照 Zend Framework 2 的教程进行操作，并且在呈现的表单上看到绑定标签的约定是将输入元素包装在标签标签中，而不是使用“for”属性。虽然教程没有涵盖它，但我（正确地）推断出属性数组允许在输入元素本身上设置一个类，但我*真正*想做的是将一个类应用到选项下定义的标签上。

这是本教程中使用的示例（来自`AlbumForm.php`）：

```
$this->add(array(
    'name'       => 'title',
    'attributes' => array(
        'class' => 'required', // <- I added this
        'type' => 'text',
    ),
    'options' => array(
        'label' => 'Title',
    ),
)); 
```

这将呈现为：

```
<label><span>Title</span><input name="title" class="required" type="text" value=""></label> 
```

或者，我可以将类应用于 span 标签，但我更喜欢使用标签上的类，然后对 span 和 input 元素使用 css 子选择器

我已经重新阅读了教程以及相应部分的评论，甚至深入研究了 Zend\Form API 文档本身，但我看不到如何在以这种方式声明表单元素时将类属性应用于标签.

* * *

表单渲染的另一个小问题是它似乎是内联渲染的，表单元素之间没有换行符。`add.phtml`我已经通过在视图脚本（和）中添加换行符来解决这个问题，`edit.phtml`如下所示：

```
echo $this->formRow($form->get('title')) . "\n"; 
```

但是，这似乎与视图中每个回显的表单语句有关，并且使用它`formCollection()`也会使整个表单输出内联。出于易读性的目的，我希望在查看源代码时至少在适当的地方有换行符（我也希望有适当的缩进，但这似乎是一个艰巨的要求，因为即使 IDE 也经常出错）

那么，对于我遗漏的这些问题中的任何一个，是否有一个内置选项，或者，是否有一种方法来定义工厂或助手？如果我需要编写一个助手，我希望它适用于所有模块。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T07:46:43.000

要将类添加到标签，请使用配置中的“label_attributes”键：

```
$this->add(array(
    'name'       => 'title',
    'attributes' => array(
        'type' => 'text',
    ),
    'options' => array(
        'label' => 'Title',
        'label_attributes' => array(
            'class' => 'required',
        ),
    ),
)); 
```

要添加新行，您可以编写自己的`FormRow`视图助手或在视图脚本中分别渲染标签和元素，如下所示：

```
$form = $this->form;
$form->prepare();
echo $this->form()->openTag($form) . "\n";

echo $this->formLabel($form->get('title')) . "\n";
echo $this->formInput($form->get('title')) . "\n";
echo $this->formElementErrors($form->get('title'));

// other elements
echo $this->form()->closeTag($form) . "\n"; 
```

# jquery - document.ready 不适用于 ajax 加载的内容

> ID：15675289
> 
> 赞同：2
> 
> 时间：2013-03-28T06:06:42.667
> 
> 标签：jquery, ajax

我正在使用 ajax 加载 WordPress 网站上的帖子。

在每篇文章中，我都有一个带有共享按钮的隐藏 div，使用 jquery toggleClass 函数将其隐藏。

这真的很简单。

```
$(document).ready(function(){ 
    $(".sharing-mp").click(function() {       
      $(".sharing-mp").toggleClass('sharing-mp-hidden').toggleClass('sharing-mp-visible');
    });    
}); 
```

问题是，它不适用于使用 ajax 加载的帖子，我猜是因为它们被附加到 DOM 并且 .ready 函数找不到它们？还有其他方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T06:07:40.973

您需要使用 on() 为动态加载的元素绑定点击事件。您可以将事件委托给动态添加的元素的父元素或以其他方式记录。

```
$(document).ready(function(){ 
     $(document).on("click", ".sharing-mp", function() {     
         $(".sharing-mp").toggleClass('sharing-mp-hidden').toggleClass('sharing-mp-visible');    
     });    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:12:23.603

您可能也只需要其中一个类。

shared-mp-hidden 和sharing-mp-visible 听起来就像它们只是彼此的对立面。所以一个会`display: none;`和另一个`display:block;`。而不是 2 个类，您可以将默认设置`sharing-mp`为`display:block;`

此外，还有一些用于显示和隐藏的 jquery 函数可以做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:21:01.660

是的，您必须将事件委托与`.on()`处理程序一起使用到其父级，这在页面加载时可用。这可能是它`$(document)`本身，因为它是所有其他元素的父级，或者您可以尝试将事件委托给其最近的可用父级，该父级可在`doc ready`诸如帖子持有者 div 或内容容器等处使用。

尽管如此，这将起作用：

```
$(document).ready(function(){ 
    $(document).on('click', '.sharing-mp', function() {       
      $(this).toggleClass('sharing-mp-hidden sharing-mp-visible');
    });    
}); 
```

# javascript - 将 json 对象打印为字符串格式

> ID：15675292
> 
> 赞同：0
> 
> 时间：2013-03-28T06:07:11.967
> 
> 标签：javascript, json, ruby-on-rails-3

我正在尝试将 json 对象打印为字符串格式。

（实际上我从 ruby​​ 代码中得到了这些数据值 `var data = '<%=[@pro {|c| {x:c.x, y:c.y}}].to_json%>'`）

在打印数据变量时，我得到的值包含`&quot`而不是`'`

```
var data=[[{&quot;x&quot;:1,&quot;y&quot;:0}]] 
```

我想以格式获取值`var data="[[{ 'x': '1', 'y': '0' }]]";`

使用以下格式`&quot;`的代码删除时。`var dataset=JSON.parse(data.replace(/&quot;/g,'"'));`

var 数据集 =[[{"x":1,"y":0}]]

我想打印像`[[{ 'x': '1', 'y': '0' }]]`.How 它是可能的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T07:36:29.083

如果您只使用 2 个变量，那么您可以简单地这样做：

```
var data = [[{'x': '<%= @pro.x %>', 'y': '<%= @pro.y %>'}]]; 
```

并且不需要使用`to_json`方法。

如果您想对许多值进行字符串化，那么这段代码就像一个魅力：

```
<% array = [[{'x' => 1, 'y' => 1}], [{'x' => 2, 'y' => 2}], [{'x' => 3, 'y' => 3}]] %>
<%= array.to_json %> 
```

他输出：

```
[[{"x":1,"y":1}],[{"x":2,"y":2}],[{"x":3,"y":3}]] 
```

如果您需要在控制器中按请求发送 json，请使用：

```
def send_json_array
    array = [[{'x' => 1, 'y' => 1}], [{'x' => 2, 'y' => 2}], [{'x' => 3, 'y' => 3}]]
    response.headers['Content-type'] = "text/plain; charset=utf-8"
    render :text => array.to_json
end 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-28T06:11:11.863

JSON.stringify 将对象转换为其 json 格式。

```
var dataset =[[{"x":1,"y":0}]]
var JsonData = JSON.stringify(dataset); 
```

# wso2 - cassandra.port 在 BAM2.2.0 中的位置

> ID：15675295
> 
> 赞同：3
> 
> 时间：2013-03-28T06:07:37.197
> 
> 标签：wso2, wso2esb, wso2bam

我想使用 WSO2 BAM 监控我的应用服务器应用程序。最初我没有更改 BAM 偏移地址，保持默认（即偏移 0）并将应用程序服务器偏移更改为 2。似乎有些问题要显示。如果我将 BAM 服务器的偏移量更改为 2。如何更改 cassandra.port 地址。我的意思是文件在 BAM 2.2.0 服务器中的位置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:28:26.487

Cassandra port can be changed from wso2bam-2.2.0/repository/conf/etc/cassandra-component.xml.

But if you change BAM offset to 2, it automatically increases Cassandra port as well, unless you have enabled

```
<!--Nodes>localhost:9160</Nodes--> 
```

entry in cassandra-component.xml.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:49:13.993

如果 Lakmali 的答案无法正常工作，请应用端口偏移量，

1.  所有 Hive 脚本，如果在其中使用端口号。（确保在每个 Hive 表的 CREATE 命令之前使用 DROP TABLE 命令，如果您在同一 BAM 包中更新脚本而不提取新包。）
2.  wso2bam-2.2.0/repository/conf/datasources/master-datasources.xml 文件中的 Cassandra 端口号。

# php - Wordpress 按帖子类型订购帖子

> ID：15675296
> 
> 赞同：4
> 
> 时间：2013-03-28T06:07:39.070
> 
> 标签：php, wordpress, custom-post-type

我正在尝试创建一个从 2 种帖子类型中获取帖子的系统，并且我想按帖子类型显示帖子顺序。我试图首先显示来自一种帖子类型的帖子，然后显示另一种帖子类型，但我使用的查询将它们混合在一起。任何人都可以为此提出一个好的解决方案。这是我的代码。

```
 $paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1;
 $args = array(

     'post_type' => array('review','directory'),
     'orderby' => 'name',
     'order' => 'ASC',
     'posts_per_page'  => '4',
     'paged'          => $paged ,
     'tax_query' => array( array(
        'taxonomy' => 'Reviews',
        'field' => 'id',
        'terms' => $cat_id
    ), ),
     );

 query_posts($args);
        if (have_posts()) :
       while (have_posts()) : the_post();
      $product_terms = wp_get_post_terms(get_the_ID(), 'Reviews', array("fields" => "all", "order" => "DESC"));
      $postype=get_post_type( get_the_ID() );
      if($postype=='review')
      {
     ?>   

        <div class="review-post">
          <a href="http://<?php the_permalink(); ?>" target="_blank"><h3><?php the_title(); ?></h3></a>
          <div class="review-cat-new">
            <?php echo get_the_term_list( $post->ID, 'Reviews', 'Category: ', ', ', '' ); ?>
          </div>

          <?php
          if(get_field('see_it'))
              $seeit_text= get_field('see_it');
         if(get_field('skip_it'))
              $skipit_text= get_field('skip_it');
         ?>
          <div class="see-skip">
            <p class="see-it"><span>See it:</span>
                <?php echo $seeit_text; ?>
            </p>
            <p class="skip-it"><span>Skip it:</span>
                <?php echo $skipit_text;  ?>
            </p>
          </div>
          <?php echo custom_field_excerpt(); ?>
        </div>
          <?php }
          else
          {
              ?>
                <div class="review-post">
          <a href="h<?php the_permalink(); ?>" target="_blank"><h3><?php the_title(); ?></h3></a>
          <div class="review-cat-new">
            <?php echo get_the_term_list( get_the_ID(), 'Reviews', 'Category: ', ', ', '' ); ?>
          </div>

          <?php echo the_field('enter_content_direc'); ?>
          <?php
          if(get_field('enter_textdirec'))
              $text= get_field('enter_textdirec');
         if(get_field('enter_linkdirec'))
              $textlink= get_field('enter_linkdirec');
         ?>
          <div class="see-skip">
            <p class="see-it direc"><span><a  target="_blank" style="color:#5D6D71; text-transform: lowercase;" href="<?php echo $textlink;?>"><?php echo $textlink;?>  </a></span>

            </p>
          </div>
        </div>
          <?php }
          endwhile;
                  echo '<div class="paging">';
                 wp_pagenavi();
                 echo '</div>';
                endif; 
```

那么有没有办法让我可以先显示帖子表单评论然后显示目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-02-07T13:12:50.887

从 Wordpress 4.0 开始，您只需将选项类型 (post_type) 传递给 WP_Query 对象中的 orderby 参数。

**orderby (string | array) - 按参数对检索到的帖子进行排序。要按帖子类型订购，只需通过：**

*   'type' - 按帖子类型排序（自 4.0 版起可用）。（“post_type”也被接受。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T07:14:38.517

最后我得到了解决方案，它可以使用过滤器来完成。

解决方案看起来像这样。

```
add_filter( 'posts_request' , 'modify_request' );
function modify_request( $query) {
    global $wpdb;
    if(strstr($query,"post_type IN ('review', 'directory')")){
        $where = str_replace("ORDER BY {$wpdb->posts}.post_date","ORDER BY {$wpdb->posts}.post_type",$query);
    }
    return $where;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-15T11:05:16.083

[如文档https://developer.wordpress.org/reference/classes/wp_query/#order-orderby-parameters](https://developer.wordpress.org/reference/classes/wp_query/#order-orderby-parameters)中所见，您可以通过将数组传递给 'orderby' 来使用常规 wp 查询：

```
$wp_query = new WP_Query(
  array(
      's' => $search,
      'orderby'=> array('type'=>'DESC', 'title'=>'ASC'),
      'paged'=>$paged
  )
);
if ( $wp_query->have_posts() ) {
    while ( $wp_query->have_posts() ) {
        $wp_query->the_post();
        // do your loop stufff here
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-04T12:06:20.320

具有自定义帖子类型顺序的每个帖子类型的订单：

```
add_filter('pre_get_posts', function ($query) {

    if ($query->is_search && !is_admin()) :
        $query->set('post_type', [ 'cpt-1', 'cpt-2', 'post', 'cpt-3']);
    endif;

    return $query;
});

add_filter('posts_orderby', function ( $order ) {

    if ( ! is_admin() ) :

        if ( is_search() && is_main_query() ) :

            global $wpdb;
            $order = "FIELD( post_type, 'cpt-1', 'cpt-2', 'post' ), {$wpdb->posts}.post_modified DESC";      
        endif;

    // Disable this filter for future queries!
    remove_filter( current_filter(), __FUNCTION__);
    endif;

    return $order;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T06:25:32.573

我想到的第一个解决方案是仅获取第一类的帖子。重置查询 ( `wp_reset_query()`) 并再次为第二类获取它们。你当然需要加倍你的代码，但我没有看到任何其他解决方案 - 它是 WordPress - 你非常有限。

第二种解决方案是像这样直接查询数据库：

```
$result = mysql_query('SELECT * 
FROM  `wp_posts` 
WHERE post_type =  "page"
OR post_type =  "post"
ORDER BY post_type ASC , post_date DESC ');

$posts = array();

if($result) {
    while ($row = mysql_fetch_assoc($result)) {
        $posts[] = $row;
    }
}

mysql_free_result($result);

echo('<pre>');
var_dump($posts);
echo('</pre>');
die(); 
```

请注意，我已使用`post`和`page`类型，因为它们是默认的，并且存在于我的 WP 安装中。但是你可以使用不同的。您可以随心所欲地使用此查询。

# c# - 构建错误“无法解析对程序集的依赖”

> ID：15675298
> 
> 赞同：0
> 
> 时间：2013-03-28T06:07:43.873
> 
> 标签：c#, visual-studio-2010, compilation

我是 C# 的业余爱好者，我学习了基础知识并开始编程，我尝试从 sf.net 的 svn 下载开源项目，但在编译大多数项目时，我遇到了这样的错误：

```
build error, 'Cannot resolve dependency to assembly ' 
```

并在继续出错时给出一个 publicKeyToken 并且没有行给我。怎么了？我只是用 Visual Studio .net 2010 打开项目并尝试调试。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:14:34.620

似乎您有一些可能不存在或可能有错误详细信息的程序集参考。您需要更正 web.config 中的详细信息，或者需要将程序集引用安装到您的 c 驱动器

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-13T13:15:13.230

> 无法解析对程序集“System.Core，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”的依赖，因为它尚未预加载。使用 ReflectionOnly API 时，必须通过 ReflectionOnlyAssemblyResolve 事件预先加载或按需加载依赖程序集。

要解决它，您可以在 VisualStudio 中关闭：Debug->Exceptions->System.IO

# php - 获取 PHP 中的美国官方时区？

> ID：15675301
> 
> 赞同：-2
> 
> 时间：2013-03-28T06:07:55.120
> 
> 标签：php, timezone

我的数据库中存储了帐户，并且每个帐户状态都存档，从那里我想根据帐户状态将每个帐户链接到时区。

因此，如果帐户所在的州是加利福尼亚州，则时区将为“America/Los_Angeles”

更多，我想分解此页面提供的时区[http://php.net/manual/en/timezones.america.php](http://php.net/manual/en/timezones.america.php)由大西洋东部中部太平洋阿拉斯加夏威夷 - 阿留申

现在我可以根据 7 个时区对我的数据进行排序，并且我可以将我的所有帐户链接到一个时区，这样我就可以确定他们的时区。

所以我的问题1）我怎样才能弄清楚什么状态与什么时区相关联。（例如：加利福尼亚 = "America/Los_Angeles"）

2) 哪个时区与哪个时区类别相关联。（例如：加利福尼亚 = 太平洋）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:26:16.397

你还没有考虑清楚。

美国的许多州都有多个时区。例如，南达科他州既有山区时区，也有中部时区。

![南达科他州时区地图](../Images/a989a2c434a8b8d5c0b2c648cf3b5ae2.png)

如果您希望将位置解析为时区，则需要更精细的位置。理想情况下，一个纬度和经度。如果您没有，您可以估算邮政编码的质心纬度/经度，然后将其用于将其解析为时区的许多各种服务或数据库中的任何一种。但要非常小心，并非所有邮政编码都代表物理位置，而且邮政编码经常变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:35:04.340

最好去源头： [http ://www.php.net/manual/en/timezones.america.php](http://www.php.net/manual/en/timezones.america.php)

对于所有时区： [http ://www.php.net/manual/en/timezones.php](http://www.php.net/manual/en/timezones.php)

如果您阅读第一个链接上的页面，如果您需要缩写，有人会很好地制作一个数组：

```
$aTimeZones = array(
  'America/Puerto_Rico'=>'AST',
  'America/New_York'=>'EDT',
  'America/Chicago'=>'CDT',
  'America/Boise'=>'MDT',
  'America/Phoenix'=>'MST',
  'America/Los_Angeles'=>'PDT',
  'America/Juneau'=>'AKDT',
  'Pacific/Honolulu'=>'HST',
  'Pacific/Guam'=>'ChST',
  'Pacific/Samoa'=>'SST',
  'Pacific/Wake'=>'WAKT',
); 
```

# c# - 插入查询语法

> ID：15675306
> 
> 赞同：0
> 
> 时间：2013-03-28T06:08:11.637
> 
> 标签：c#, sql, sql-server, sql-update, sql-insert

我不断收到错误消息，提示 where 附近的语法不正确。有人可以告诉我我做错了什么吗？

```
string strSession = objGetSession.GetEmailFromSession();
con.Open();
string strInsertFnLn = "Insert into AUserAddress (FirstName, LastName) values (@FirstName, @LastName) where AUser_ID = (Select ID from AUser where Email ='" + strSession + "')";

using (SqlCommand Cmd = new SqlCommand(strInsertFnLn, con))
{
    Cmd.Parameters.AddWithValue("@FirstName", txtEditFirstName.Text);
    Cmd.Parameters.AddWithValue("@LastName", txtEditLastName.Text);
    //Cmd.Parameters.AddWithValue("@Email", txtEditEmail.Text);
    Cmd.ExecuteNonQuery();
    con.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:10:19.470

我猜你的意思是`UPDATE`

```
UPDATE  a
SET     a.FirstName = @FirstName,
        a.LastName = @LastName
FROM    AUserAddress a
        INNER JOIN AUser b
            ON a.AUser_ID = b.ID
WHERE   b.Email = @Email 
```

所以完整的声明看起来像这样，

```
string strSession = objGetSession.GetEmailFromSession();            
string connString = "connection string here";
string strInsertFnLn = @"
                            UPDATE  a
                            SET     a.FirstName = @FirstName,
                                    a.LastName = @LastName
                            FROM    AUserAddress a
                                    INNER JOIN AUser b
                                        ON a.AUser_ID = b.ID
                            WHERE   b.Email = @Email
                        ";
using (SqlConnection con = new SqlConnection(connString))
{
    using (SqlCommand Cmd = new SqlCommand(strInsertFnLn, con))
    {
        Cmd.Parameters.AddWithValue("@FirstName", txtEditFirstName.Text);
        Cmd.Parameters.AddWithValue("@LastName", txtEditLastName.Text);
        Cmd.Parameters.AddWithValue("@Email", strSession);
        try
        {
            con.Open();
            Cmd.ExecuteNonQuery();
        }
        catch (SqlException ex)
        {
            // do something with the exception
            // don't hide it
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:11:03.473

问题出在这条线上

```
string strInsertFnLn = "Insert into AUserAddress (FirstName, LastName) 
   values (@FirstName, @LastName) where 
   AUser_ID = (Select ID from AUser where Email ='" + strSession + "')"; 
```

`where`这个查询中的条件有什么用
应该是这样的

```
string strInsertFnLn = "Insert into AUserAddress (FirstName, LastName) 
                            values (@FirstName, @LastName)"; 
```

## 编辑 1

或者，如果您想更新记录，则应如下所示

```
 string strInsertFnLn = "update AUserAddress set FirstName=@FirstName, 
                       LastName=@LastName where 
   AUser_ID = (Select ID from AUser where Email ='" + strSession + "')"; 
```

# php - 替换第一个字符和第二个字符之间的空格也反转删除最后一个字符和最后一个字符之间的空格？

> ID：15675308
> 
> 赞同：-6
> 
> 时间：2013-03-28T06:08:23.560
> 
> 标签：php, regex, string

如何替换或删除字符串的第一个和第二个字母之间的空格，并使用 php 删除最后一个和最后一个字符之间的空格？

例子 ：

```
$string = "$ 1000,00 1000 10000 1000 $"; 
```

我想显示字符串

```
$string ="$1000,00 1000 10000 1000$"; 
```

请帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:10:24.720

只需将空格替换为无空格即可。

```
$string = str_replace(" ","",$string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:11:06.607

使用`str_replace` [http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

```
$string = str_replace(" ", "", $string); // $1000$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:16:17.690

```
preg_replace ('/^(.) (.*) (.)$/', '$1$2$3', $string); 
```

# c# - 不同时刻的节目时间

> ID：15675309
> 
> 赞同：0
> 
> 时间：2013-03-28T06:08:43.490
> 
> 标签：c#, windows, algorithm, time

我刚刚完成了一个项目，但是我的老师有一个问题。为什么我的程序（具有相同的算法、相同的数据、相同的环境）在不同的时刻以不同的完成时间运行。？谁能帮我？

示例：现在我的程序运行了 1.03 秒。但随后它运行了 1.05 秒（有时更快 1.01）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:14:08.017

发生这种情况是因为您的程序不是系统中执行的唯一实体，并且它不会始终立即获得所有资源。

出于这个原因，测量短执行时间几乎没有什么价值，因为它们的变化非常明显。相反，如果您对更准确的时间测量感兴趣，您应该多次执行您的代码并计算所有运行的平均时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:13:40.443

因为 Windows 不是实时操作系统。执行程序时可能会发生许多其他活动，并且 cpu 可以与其他正在运行的进程共享其周期。如果您的程序需要从物理设备作为磁盘（数据库）和网络读取，时间可能会发生更大的变化：这是因为物理资源可能正忙于服务其他请求。内存也可以改变事情，如果有的话`page faults`，所以你的应用程序需要从虚拟内存中读取页面，结果你会看到性能下降。由于您使用的是C#，时间可以从第一次执行到同一进程中的其他时间发生明显变化，因为代码是`JITtted`，即第一次看到从中间代码编译到程序集，然后在程序集中使用形式，这要快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T06:13:46.460

这很容易。您使用不精确的计数器捕获系统时差，因为它使用系统资源。有更多的程序与您的程序并行运行，有些程序优先于您的代码，导致线程临时（约 20 毫秒，取决于操作系统设置）暂停。即使在 DOS 中，也有与您的代码准并行运行的代码，因为只有一个线程可能，您的代码在时间仍在滴答作响的情况下停止（它由该代码控制）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T06:18:59.890

这里只是一个想法，但可能是因为内存使用情况的变化，后台应用程序的 cpu 使用情况在不同时间发生变化。我的意思是时差只会在以下时间产生差异；

*   其他应用程序的内存使用情况
*   cpu发热等物理条件。（时间变化真的很小）
*   和系统时钟。如果您生成随机数或执行任何在后台使用系统时钟的操作，则可能会产生这种变化。

希望这可以帮助。干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T06:23:03.440

假设是错误的。环境不一样。您的程序的可用资源取决于很多事情。例如，其他进程（例如后台进程）的 CPU 和内存利用率。由于其他进程而导致的硬盘和/或网络利用率。即使没有其他进程在运行您的程序，也会改变缓存的内部状态。

在“现实世界”的性能场景中，“热身”后出现 +/- 20% 的波动并不少见。即：连续测量10次作为“热身”并丢弃结果。多测量 10 次并收集结果。--> +/- 20% 很常见。如果您不热身，您甚至可能会看到由于“冷”缓存而导致的几个数量级的差异。

结论：您的程序非常小，使用的资源非常少，并且没有从持久缓存机制中受益。

# hdfs - 为什么HDFS是一次写入多次读取？

> ID：15675312
> 
> 赞同：9
> 
> 时间：2013-03-28T06:09:01.530
> 
> 标签：hdfs

我是Hadoop的新手。

在阅读 Apache HDFS 时，我了解到 HDFS 是一次写入文件系统。其他一些发行版 (Cloudera) 提供附加功能。了解这个设计决策背后的理性是件好事。在我看来，这种设计对 Hadoop 造成了很多限制，使其适用于有限的问题集（类似于日志分析的问题）。

专家评论将帮助我更好地理解 HDFS。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-05-18T12:54:37.827

HDFS 拥有其设计的三个主要原因，

*   HDFS 是通过盲目复制 Google 的 GFS 的设计而设计的，该 GFS 旨在仅支持批量计算

*   HDFS 最初并非用于批处理计算

*   设计一个真正的分布式文件系统可以支持高性能的批处理操作以及实时的文件修改是困难的，并且超出了 HDFS 原始实现者的预算和经验水平。

Hadoop 不能被构建为完全读/写的文件系统并没有内在的原因。MapR FS 就是证明。但是实现这样的事情远远超出了原始 Hadoop 项目的范围和能力，并且 HDFS 原始设计中的架构决策基本上排除了改变这个限制。一个关键因素是 NameNode 的存在，因为 HDFS 要求所有元数据操作（例如文件创建、删除或文件长度扩展）都通过 NameNode 往返。MapR FS 通过完全消除 NameNode 并在整个集群中分布元数据来避免这种情况。

随着时间的推移，没有真正的可变文件系统变得越来越烦人，因为 Spark 和 Flink 等 Hadoop 相关系统的工作负载越来越转向可操作、近实时或实时操作。对这个问题的回应包括

*   MapR FS。如前所述... MapR 实现了 HDFS 的全功能高性能重新实现，包括 POSIX 功能以及 noSQL 表和流 API。该系统多年来一直在一些最大的大数据系统中运行。

*   苦度。Cloudera 基本上放弃了在 HDFS 之上实施可行的变异，并宣布 Kudu 没有普遍可用性的时间表。Kudu 实现了类似表的结构，而不是完全通用的可变文件。

*   Apache Nifi 和商业版 HDF。Hortonworks 也在很大程度上放弃了 HDFS，并宣布将应用程序分叉成批处理（由 HDFS 支持）和流（由 HDF 支持）孤岛。

*   伊西隆。EMC 将 HDFS 有线协议作为其 Isilon 产品线的一部分实施。这允许 Hadoop 集群拥有两个存储孤岛，一个用于基于 HDFS 的大规模、高性能、经济高效的批处理，另一个用于通过 Isilon 访问中型可变文件。

*   其他。有许多基本上已经失效的努力来弥补 HDFS 的一次写入性质。其中包括 KFS（Kosmix 文件系统）等。这些都没有显着采用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-07T05:13:49.853

HDFS 对其文件和应用程序遵循一次写入、多次读取的方法。它假定 HDFS 中的文件一旦写入就不会被修改，尽管它可以被访问 'n' 次（尽管未来版本的 Hadoop 也可能支持此功能）！目前，HDFS 中任何时候都严格有一个 writer。这种假设可以实现高吞吐量数据访问，还可以简化数据一致性问题。网络爬虫或 MapReduce 应用程序最适合 HDFS。

由于 HDFS 的工作原理是“一次写入，多次读取”，因此流式数据访问的特性在 HDFS 中极为重要。因为 HDFS 更多地是为批处理而不是用户交互使用而设计的。重点是数据访问的高吞吐量，而不是数据访问的低延迟。HDFS 的重点不是存储数据，而是如何以尽可能快的速度检索数据，尤其是在分析日志时。在 HDFS 中，读取完整数据比从数据中获取单个记录所花费的时间更重要。HDFS 忽略了一些 POSIX 要求以实现流数据访问。

[http://www.edureka.co/blog/introduction-to-apache-hadoop-hdfs/](http://www.edureka.co/blog/introduction-to-apache-hadoop-hdfs/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-19T16:53:15.007

这种技术的一个优点是您不必为同步而烦恼。由于您只写一次，因此可以保证您的读者在阅读时不会对数据进行操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-22T06:10:57.513

Though this design decision does impose restrictions, HDFS was built keeping in mind efficient streaming data access. Quoting from **Hadoop - The Definitive Guide**:

> HDFS is built around the idea that the most efficient data processing pattern is a write-once, read-many-times pattern. A dataset is typically generated or copied from source, and then various analyses are performed on that dataset over time. Each analysis will involve a large proportion, if not all, of the dataset, so the time to read the whole dataset is more important than the latency in reading the first record.

# java - 如何在java编程中将最近的值存储在变量中？

> ID：15675315
> 
> 赞同：5
> 
> 时间：2013-03-28T06:09:27.967
> 
> 标签：java

在我的java程序中，我需要将最近的值存储在一个变量中，我的代码如下所示

```
public class Exmp2 
{

        int noOfInstances;
    public Exmp2() 
    {
        noOfInstances++;
    }
    public static void main(String[] args){
        Exmp2 e1=new Exmp2();
        System.out.println("No. of instances for sv1 : " + e1.noOfInstances);

        Exmp2 e2=new Exmp2();
        System.out.println("No. of instances for sv1 : "  + e2.noOfInstances);
        System.out.println("No. of instances for st2 : "  + e2.noOfInstances);

        Exmp2 e3=new Exmp2();
        System.out.println("No. of instances for sv1 : "  + e3.noOfInstances);
        System.out.println("No. of instances for sv2 : "  + e3.noOfInstances);
        System.out.println("No. of instances for sv3 : "  + e3.noOfInstances);
    }
} 
```

我的输出应该是 1 2 2 3 3 3 但我得到 1 1 1 1 1 1 你能给出解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T06:10:15.397

将您的`noOfInstances`变量声明为`static`.

```
static int noOfInstances; 
```

由于它不是`static`，因此为该实例创建了每个`new Exmp2()`a `noOfInstances`，默认值为`0`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T06:11:31.740

你必须声明`noOfInstances`为静态的

```
 static int noOfInstances; 
```

否则每个由创建的新实例`new`都将有自己的值`noOfInstances`，再次从 0 开始

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T06:15:09.080

noOfInstances 应该声明为静态的。例如：

```
static int noOfInstances; 
```

这可能是一个有趣的阅读。它应该有一个与您的情况相似的示例：

[静态关键字](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

简而言之，静态实际上是在给定类的实例之间共享一个变量。如果您有一个不是静态的变量，那么每个实例都会对该变量有自己的私有值。而静态声明的变量在类的所有实例中将具有相同的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T06:15:31.400

变量应该被声明`static`。

**为什么？**因为目前您的变量`noOfInstances`不是*静态*的，并且对于您创建的类的每个实例，也会创建 noOfInstances 变量，并且值始终为 1。因此，在声明它为静态时，它在此类的所有实例之间共享，并且将具有正确的价值。

**静态变量是在加载类时创建的，并在所有实例之间共享。**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-28T06:24:24.247

使`noOfInstances` **静态**如下所示，

```
static int noOfInstances; // static are shared among all objects created. 
```

无需调用`e1.noOfInstances`，您可以调用**Exmp2.noOfInstances**

实例（非静态）变量复制到对象中，而静态变量不复制到对象中。静态是在类级别。每个物体都可以看到它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-02T14:22:46.580

您应该将变量声明`int noOfInstances;`为`static`，在您的代码中，实例采用默认值 0。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-04T09:13:13.217

您必须将变量声明为**静态**：`static`变量始终存储最近的值，其静态变量将存储在`static pool`

```
static int noOfInstances; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-28T06:16:45.120

每当您在实例化一个新对象时将其赋值为 0，Make `new Exmp2();`as以便其范围转移到类级别。`noOfInstances``noOfInstances``static`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-03T09:01:37.570

请参阅以下示例，了解如何将静态变量用于实例计数

```
package com.stackoverflow.test;

public class Exmp2 {

    static int noOfInstances;

    public Exmp2() {
        noOfInstances++;
    }

    public static void main(String[] args) {
        System.out.println("No. of instances at this point "
                + Exmp2.noOfInstances);
        Exmp2 e1 = new Exmp2();
        System.out.println("No. of instances at this point "
                + Exmp2.noOfInstances);
        Exmp2 e2 = new Exmp2();
        System.out.println("No. of instances at this point "
                + Exmp2.noOfInstances);
        Exmp2 e3 = new Exmp2();
        System.out.println("No. of instances at this point "
                + Exmp2.noOfInstances);
    }
} 
```

# spring - Spring IOC 和 Spring AOP 的区别

> ID：15675331
> 
> 赞同：8
> 
> 时间：2013-03-28T06:10:48.533
> 
> 标签：spring

**Spring IOC**和**Spring AOP**有什么区别及其重要性？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T06:34:46.203

你在网上搜索过 IoC 和 AOP 吗？两者都有*很多*参考。

简而言之，IoC 允许外力决定代码将使用什么实现，而不是由代码决定实现。“外力”可能是配置文件、单元测试、其他不同的代码等。

AOP 允许在受这些关注点影响的代码之外实现横切关注点。

Spring 的“目的”包括 IoC 和 AOP，但其范围远远超出了这些。

更多详情请查看。

[控制容器的反转和依赖注入模式](http://martinfowler.com/articles/injection.html)和 [面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming) 还要检查这个

[什么是简单英语的AOP、依赖注入和控制反转](https://stackoverflow.com/questions/2572158/what-is-aop-dependency-injection-and-inversion-of-control-in-simple-english)

[IoC、AOP 等](https://stackoverflow.com/questions/946110/ioc-aop-and-more)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T11:49:15.463

**Spring IOC**：在简单的答案中，通常您使用`new`运算符创建对象并将自己设置为 getter 和 setter。所以，是的，我们`new`在 Java 中使用运算符来创建对象。这样做没有任何坏处。但是，当您的项目规模增长并且有很多开发人员在工作，并且您希望实现基于 POJO 的编程时，您可以使用 DI。那么也许你的问题出现了——为什么我不能自己编码呢？当然，您可以使用反射、注释和 XML 的强大功能。但是，其他人已经对此进行了编码，那么为什么不重用第三方呢？有很多选项供您选择；春天可能是最好的。它管理从对象创建到销毁的对象生命周期。您使用 Spring DI 容器创建和设置的对象，但您不自己创建它们。

**Spring AOP**：与横切关注点有关。这意味着在大型系统中，通用功能分散在不同的模块中。所以AOP提供了一种最简单的方法来以'aspect'的形式取出一个通用的实现。在这种情况下，您也可以使用代理概念编写自己的实现，但您可以重用基于代理的代码，即使用 Spring 实现 APO 联盟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-29T17:22:30.247

Spring IOC 的目标是减少组件之间的显式依赖关系，而 Spring AOP 的目的是可能通过强制执行某些常见行为来将组件连接在一起（阅读：NOT Interface）

由于 Spring AOP 的目的是跨组件强制执行某些行为。因此，Spring IOC 可以方便地实现此目的

# android - Android中的钛表视图

> ID：15675332
> 
> 赞同：1
> 
> 时间：2013-03-28T06:10:56.300
> 
> 标签：android, cross-platform, titanium

嗨，我正面临 TableView 的问题。我有一个 TableView 并向 TableView 添加了 5 行。每行有 2 张图像。

```
 var tableRow = Ti.UI.createTableViewRow({
    className : 'row',
    objName : 'row',
    height : 'auto',
    top : '10dip',
    bottom : '10dip',
    left : '20dip',
    right : '30dip',
    height : '80dip'
});
var backgroundView = Ti.UI.createView({
    backgroundImage : '/images/list-bg.png',
    width : '90%',
    height : '75dip'
});
var full= Ti.UI.createImageView({
    image : '/images/boxfull.png',
    right : 10,
    top : 35,
    width : 20,
    height : 20,
    visible : false,
    objName: 'checkImage'
});
backgroundView.add(checkImage);
var empty= Ti.UI.createImageView({
    image : '/images/boxempty.png',
    visible : false,
    right : 10,
    top : 35,
    width : 20,
    height : 20,
    objName: 'uncheckImage'
});
backgroundView.add(uncheckImage);
var requestName = Ti.UI.createLabel({
    text : '' + json.requestName,
    left : '60dip',
    top : '5dip',
    right : '10dip',
    textAlign : 'left',
    ellipsize : true,
    wordWrap : false,
    font : {
        fontSize : '12dip',
        fontWeight : 'bold'
    },
    color : '#285a8c',
    height : '30dip',

});
backgroundView.add(requestName );
tableRow.add(backgroundView);
section1.add(tableRow);
tableView.setData(data); 
```

当用户单击按钮时，应向用户显示其中一个图像。

```
var sectionArray = tableView.getData();
var sectionsLength = tableView.getData().length;
for (var i = 0; i < sectionsLength ; i++) {
    Ti.API.info("get sections-->" + i);
    var rows = [];
    rows = sectionArray[i].getRows();
    for (var j = 0; j < rows.length - 1; j++) {
        if (rows[j].requestId != undefined) {
            Ti.API.error(JSON.stringify(rows[j].children[0]));
            rows[j].children[0].children[1].visible = true;
        }
    }
} 
```

然后，如果用户单击该行，则需要显示其他图像并且上一个图像应该是不可见的。

```
 if (e.row.children[0].children[1].visible == true) {// if emptyimage visible is true then change visibility to false
            e.row.children[0].children[1].visible = false;
            // change visibility of checked image to true
            e.row.children[0].children[0].visible = true;

        } else {
            //change checked image visibility to false
            e.row.children[0].children[0].visible = false;
            // change unchecked image visibility to true
            e.row.children[0].children[1].visible = true;
        } 
```

一切正常，我可以加载表格。但是当用户单击按钮时，表格中的每一行都不会显示 boxempty.png 图像。当我旋转屏幕方向或滚动表格视图时，只有我能看到 boxempty.png 图像。当用户点击表格行时，同样的问题会重复显示 boxfull.png。我在Android中面临的这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:21:57.913

只需尝试将图像视图的尺寸更改为宽度和高度各 25 像素。创建多个选择器选择器时，我遇到了同样的问题。我在那里使用了上述尺寸。我不知道问题的确切原因。我在整个应用程序中都使用了像素。

```
var empty= Ti.UI.createImageView({
    image : '/images/boxempty.png',
    visible : false,
    right : 10,
    top : 35,
    width : 25,
    height : 25,
    objName: 'uncheckImage'
}); 
```

# xquery - 在 xquery 中获取文档

> ID：15675337
> 
> 赞同：0
> 
> 时间：2013-03-28T06:11:17.867
> 
> 标签：xquery

我需要在日期 [从日期到日期] 之间从 xquery 中的 DB 获取文档。从日期 - 当前日期前 30 天 到日期 - 当前日期

在每个文档中，我都有一个名为“loadDate”的属性。我必须在不为此属性创建索引的情况下获取。那可能吗？

请帮忙。

谢谢，-N

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:55:37.803

假设您的 'loadDate' 属性的类型为 xs:date，并为您的文档构成一个虚构的结构，听起来您的查询很简单：

```
/myns:doc
  [@loadDate gt (current-date() - xs:dayTimeDuration('P30D'))] 
```

如果没有索引，这样的查询可能会更慢，但为什么不可能呢？在声明式查询语言中，一般原则是索引的存在不应该改变任何查询的含义，只改变可以评估它的速度。

# powershell - 如何在 powershell 构建过程中对 javascript 和 css 文件进行版本控制？

> ID：15675345
> 
> 赞同：2
> 
> 时间：2013-03-28T06:11:56.660
> 
> 标签：powershell, versioning

我正在使用[servicestack/bundler](https://github.com/ServiceStack/Bundler)从 powershell 构建脚本中组合和缩小我的 js 和 css 文件。

作为此构建过程的一部分，我想在我的文件中找到生成的 javascript 和 css 文件`_Layout`，并自动附加一个查询字符串版本。

例如

```
<link type="text/css" rel="stylesheet" href="/Content/app.min.css?v=1")" />
<script type="text/javascript" src="/Content/app.min.js?v=1")"></script> 
```

变成

```
<link type="text/css" rel="stylesheet" href="/Content/app.min.css?v=2")" />
<script type="text/javascript" src="/Content/app.min.js?v=2")"></script> 
```

在 powershell 中执行此操作的最有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:05:33.110

我已经想通了，并将解决方案上传到[github](https://github.com/ChaseFlorell/Powershell-Snippets/blob/master/version-javascript-css.ps1)。我选择在文件名中使用 MD5 哈希，[而不是在文件末尾附加查询字符串参数](http://www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/)。原因是某些代理没有缓存带有查询字符串的文件。

如果文件没有更改，此解决方案也不会对文件进行版本控制。

这是带有可读性注释的解决方案。

```
#region Variables
    $directoryPath = Split-Path ((Get-Variable MyInvocation).Value).MyCommand.Path   # directory the script is running from (document root)
    $jsFilePath = "assets\scripts\"                                                  # scripts path will end with trailing slash "\"
    $cssFilePath = "assets\css\"                                                     # css path will end with a trailing slash "\"
    $jsFileNameRegex = [regex] '(nameOfYourProject\.).*(\.min\.js)'                  # myApp.asdf1234.min.js
    $cssFileNameRegex = [regex] '(nameOfYourProject\.).*(\.min\.css)'                # myApp.asdf1234.min.js
    $filesContainingVersionedResourceRefs = @("$directoryPath\index.html")           # array of files to search for script/css references
#endregion

#region Functions

# Function which versions javascript and css files using the content hash.
# NOTE: this assumes that you have two "default" versions of your combined files
#    nameOfYourProject.css/js
#    nameOfYourProject.min.css/js
function versionResource($fileToVersionRegex, $filePath){

    # Gets the default file name from the regex
    $defaultFileName = $fileToVersionRegex.ToString() -replace "(\()|(\))|(\\)|(\*)", ""
    $defaultFileName = $defaultFileName -replace "\.\.\.", "."

    # Gets the content of the default file and creates a hash
    $fileContent = Get-Content $filePath\$defaultFileName
    $md5 = new-object -TypeName System.Security.Cryptography.MD5CryptoServiceProvider
    $utf8 = new-object -TypeName System.Text.UTF8Encoding
    $hash = [System.BitConverter]::ToString($md5.ComputeHash($utf8.GetBytes($fileContent)))
    $versionHash = $hash.Replace('-', '')

    # Creates a new file name based on the content hash
    $newFileName = $defaultFileName -replace "\.min", ".$versionHash.min"

    # Tries to get the old versioned file name
    $fileToVersion = Get-ChildItem $filePath | Where-Object {$_.Name -match $fileToVersionRegex}
    if($fileToVersion -ne $null) {
        $oldFileName = $fileToVersion.Name
    }

    # $newFileName is still just a string at this point.
    # If the new version name doesn't match the old version name,
    # then we know that we need to update everything to the new version.
    if($oldFileName -ne $newFileName) {

        # OPTIONAL
        # remove the obsolete version of the file to be versioned
        # You may choose to NOT remove the versioned file, however
        # since it "should" be in your version control, you can roll back if necessary
        if($fileToVersion -ne $null) {
            Remove-Item $filePath$oldFileName -Force -ErrorAction SilentlyContinue
        }

        # rename the default file with the new file name
        Rename-Item -literalPath $filePath$defaultFileName -NewName $newFileName

        # loop through all of the specified source files and replace with the appropriate versioned file
        foreach($private:file in $filesContainingVersionedResourceRefs){
            $fileContent = Get-Content $private:file
            Clear-Content $file

            if($oldFileName -ne $null){
                # replace the old version string if it exists
                $newFileContent = $fileContent -replace "$oldFileName","$newFileName"
            } else {
                # replace the default version string if it exists
                $newFileContent = $fileContent -replace "$defaultFileName","$newFileName"                
            }

            Add-Content $private:file $newFileContent

        }
    }

    # OPTIONAL: remove original files
    # this just keeps your directory clean and free of unneeded versions of the css/js
    $private:nonMinifiedVersion = $defaultFileName -replace ".min", ""
    Remove-Item -LiteralPath $filePath$defaultFileName -ErrorAction SilentlyContinue
    Remove-Item -LiteralPath $filePath$private:nonMinifiedVersion -ErrorAction SilentlyContinue

}

# version the Javascript
versionResource $jsFileNameRegex $jsFilePath

# version the css
versionResource $cssFileNameRegex $cssFilePath 
```

# iphone - imageDownloadingQueue 不工作

> ID：15675346
> 
> 赞同：1
> 
> 时间：2013-03-28T06:12:02.193
> 
> 标签：iphone, uitableview

我正在使用 NSOperationQueue 在后台缓存图像。下面是代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *cellIdentifier = @"CellIdentifier";
UITableViewCell *cell;
cell = [self.mUpcomEventsTable dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
}

cell.selectionStyle = UITableViewCellSelectionStyleNone;
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

UIImageView *imgView;
UILabel *lblEventName;
UILabel *lblDate;
UILabel *lblTime;
if(self.mEventNameArr != NULL)
{
NSString *imageUrlString = [NSString stringWithFormat:@"%@", [self.mEventImageArr objectAtIndex:indexPath.row]];
UIImage *cachedImage = [self.imageCache objectForKey:imageUrlString];
    NSLog(@"cache:%@", self.imageCache);

    imgView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 80, 90)];

    lblEventName = [[UILabel alloc]initWithFrame:CGRectMake(90, 10, 200, 30)];
    lblEventName.text = [self.mEventNameArr objectAtIndex: indexPath.row];
    lblEventName.font = [UIFont fontWithName:@"Helvetica-Bold" size:18];
    lblDate = [[UILabel alloc]initWithFrame:CGRectMake(90, 50, 100, 30)];
    lblDate.text = [self.mEventDateArr objectAtIndex:indexPath.row];
    lblTime = [[UILabel alloc]initWithFrame:CGRectMake(190, 50, 100, 30)];
    lblTime.text = [self.mEventTimeArr objectAtIndex:indexPath.row];

    strEventName = lblEventName.text;
    strEventDate = lblDate.text;
    strEventTime = lblTime.text;

if (cachedImage)
{
    imgView.image = cachedImage;
}
else
{
    // you'll want to initialize the image with some blank image as a placeholder

    imgView.image = [UIImage imageNamed:@"Placeholder.png"];

    // now download in the image in the background
    NSLog(@"queue:%@",self.imageDownloadingQueue);
    [self.imageDownloadingQueue addOperationWithBlock:^{

        NSURL *imageUrl   = [NSURL URLWithString:imageUrlString];
        NSData *imageData = [NSData dataWithContentsOfURL:imageUrl];
        UIImage *image    = nil;
        if (imageData)
            image = [UIImage imageWithData:imageData];

        if (image)
        {

            [self.imageCache setObject:image forKey:imageUrlString];

            [[NSOperationQueue mainQueue] addOperationWithBlock:^{

                UITableViewCell *updateCell = [tableView cellForRowAtIndexPath:indexPath];
                if (updateCell)
                    imgView.image = cachedImage;
            }];
        }
    }];
}
}
else cell.textLabel.text = @"No event";
[cell addSubview:imgView];
[cell addSubview:lblEventName];
[cell addSubview:lblDate];
[cell addSubview:lblTime];
return cell;
} 
```

它不会进入这一行 [self.imageDownloadingQueue addOperationWithBlock:^{ 它会从这里出去。为什么这样，请帮助上面。从这里获取想法[链接](https://stackoverflow.com/questions/12703297/uitableview-with-images-scrolls-very-slowly?rq=1)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:17:38.257

使用有很多缺点`NSOperationQueue`。其中之一是每次滚动时您的图像都会闪烁`UITableView`。

我建议你使用这个[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)。我用过它，效果很好。要调用此 API：

```
ASyncImage *img_EventImag = alloc with frame;
NSURL *url = yourPhotoPath;
[img_EventImage loadImageFromURL:photoPath];
[self.view addSubView:img_EventImage]; // In your case you'll add in your TableViewCell. 
```

这与使用 UIImageView 相同。很简单，它可以为您完成大部分工作。AsyncImageView 包括 UIImageView 上的一个简单类别，用于在 iOS 上异步加载和显示图像，以便它们不会锁定 UI，以及用于更高级功能的 UIImageView 子类。AsyncImageView 与 URL 一起使用，因此它可以与本地或远程文件一起使用。

加载/下载的图像缓存在内存中，并在出现内存警告时自动清理。AsyncImageView 独立于 UIImage 缓存运行，但默认情况下，位于应用程序包根目录中的任何图像都将存储在 UIImage 缓存中，以避免缓存图像的任何重复。

该库还可用于独立于 UIImageView 加载和缓存图像，因为它提供对底层加载和缓存类的直接访问。

# php - IPV4 与 IPV6 PHP 函数

> ID：15675347
> 
> 赞同：3
> 
> 时间：2013-03-28T06:12:09.187
> 
> 标签：php, ipv6, ipv4

我一直在阅读有关如何确定 IP 是 IPv4 还是 IPv6 的内容，对我来说，要寻找的东西是是否有冒号似乎很明显。但是，您有 IPv4 映射的 IPv6 地址和 IPv4 兼容的 IPv6 地址。在我看来，这些类型的地址既有冒号又有句点，所以与其寻找`::ffff`字符串开头是否有 no 的解决方案，不如这样做：

```
function isIPv6($ip) {
  if(strpos($ip, ":") !== false && strpos($ip, ".") === false) {
     return true;
  }
  return false;
} 
```

编辑：我是否遗漏了什么或者这个功能在所有情况下都能正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T06:20:53.533

[PHP => 5.2 有一个使用filter_var](http://php.net/manual/en/function.filter-var.php)的“内置”方法来做到这一点

您的函数可能如下所示：

```
function isIPv6($ip) {

   if(filter_var($ip, FILTER_VALIDATE_IP)) {

       if(filter_var($ip, FILTER_FLAG_IPV6)) {
          //It is IPv6 indeed.
        } else {
          //It is IPv4
       }

   } else {
      // NOT VALID IP
   }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T06:23:33.390

来自[IBM](http://publib.boulder.ibm.com/infocenter/ts3500tl/v1r0/index.jsp?topic=%2Fcom.ibm.storage.ts3500.doc%2Fopg_3584_IPv4_IPv6_addresses.html)：

> ```
> An IPv6 address can have two formats:
> 
>     Normal - Pure IPv6 format
>     2001 : db8: 3333 : 4444 : 5555 : 6666 : 7777 : 8888
>     Dual - IPv6 plus IPv4 formats
>     2001 : db8: 3333 : 4444 : 5555 : 6666 : 1 . 2 . 3 . 4 
> ```

您仅验证 IPv6 的纯格式。我还建议使用[FILTER_FLAG_IPV4 或 FILTER_FLAG_IPV6](http://php.net/manual/en/function.filter-var.php)

```
function isIPv6($ip) {
  if(strpos($ip, ":") !== false && strpos($ip, ".") === false) {
     return true; //Pure format
  }
  elseif(strpos($ip, ":") !== false && strpos($ip, ".") !== false){
    return true; //dual format
  }
  else{
  return false;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T06:38:33.063

假设 IP 地址是有效的并且知道您可以拥有 IPv6 映射的 IPv4 地址，例如`::ffff:127.0.0.1`，只检查是否存在`:`就足够了。

```
function isIPv6($address) 
{
    return strpos($address, ':') !== false;
} 
```

如果它可能无效，则应首先对其进行验证：

```
function isIPv6($address) 
{
    return filter_var($address, FILTER_VALIDATE_IP) && 
        strpos($address, ':') !== false;
} 
```

顺便说一句，这也是 PHP 处理 IPv6 的方式，正如您从[源代码](https://github.com/php/php-src/blob/master/ext/filter/logical_filters.c#L685)中看到的那样。

# iphone - 将文件写入 NSDocument 目录在 iPhone 中显示 UIProgressView？

> ID：15675348
> 
> 赞同：0
> 
> 时间：2013-03-28T06:12:16.717
> 
> 标签：iphone, byte, store, uiprogressview, nsdocumentdirectory

我有一个来自服务器的[pdf文件。](http://www.sdffsfsffss.com/sites/default/files/pdf_convert/2013/03/21/1363857406-344.pdf)

然后我需要将文件加载到 NSDocument 目录路径并且它工作正常，但我想显示 UIProgressView 以存储每个字节。这个怎么做，请帮帮我

提前致谢

我试图这样存储：

```
 NSError *error;
            NSArray *ipaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *idocumentsDir = [ipaths objectAtIndex:0];
            NSString *idataPath = [idocumentsDir stringByAppendingPathComponent:@"File"];
            NSLog(@"idataPath:%@",idataPath);

            //Create folder here
            if (![[NSFileManager defaultManager] fileExistsAtPath:idataPath])
            {
                [[NSFileManager defaultManager] createDirectoryAtPath:idataPath withIntermediateDirectories:NO attributes:nil error:&error];
            }
  // Image Download here
            NSString *fileName = [idataPath stringByAppendingFormat:@"/image.jpg"];
            NSLog(@"imagePathDOWNLOAD:%@",fileName);

            NSData *pdfData1 = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[URLArray objectAtIndex:a]]];
            [pdfData1 writeToFile:fileName atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:32:13.380

您可以使用 NSURLConnection 类来实现进度条：

```
.h:
NSMutableData *responseData;
NSString *originalFileSize;
NSString *downloadedFileSize;

.m:
- (void)load {
    NSURL *myURL = [NSURL URLWithString:@""];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:myURL
                                                cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                         timeoutInterval:60];

[[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
responseData = [[NSMutableData alloc] init];
originalFileSize = [response expectedContentLength];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
[responseData appendData:data];

downloadedFileSize = [responseData length];
progressBar.progress = ([originalFileSize floatValue] / [downloadedFileSize floatValue]);
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
[responseData release];
[connection release];

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
NSLog(@"Succeeded! Received %d bytes of data",[responseData lengtn]);

} 
```

如有任何疑问，请告诉我。

# c++ - C++ 类相互依赖导致循环依赖错误

> ID：15675351
> 
> 赞同：0
> 
> 时间：2013-03-28T06:12:56.697
> 
> 标签：c++, scope, redundancy, cyclic-dependency

我的搜索使我相信我遇到的问题称为循环冗余。我不明白发布的任何解决方案。我（相当）是 C++ 新手，来自强大的 Java 背景。

基本上有两个相互依赖的类。A 类包含 B 类对象的向量，B 类包含需要 A 类对象作为输入的方法。

这是重现问题的代码。

根据codelite g++，错误在school.h中并且是“人没有在这个范围内声明”。它还说“模板参数 1 无效”和“模板参数 2 无效”。然后是其他几个，关于所有被调用的向量函数的非类类型“int”。

主文件

```
#include <iostream>
#include <string>
#include "person.h"
#include "school.h"

int main() {
    person p;   
    school s;
    std::cout << p.name << std::endl;
    s.personVect.push_back(p);
    std::cout << s.personVect.size() << std::endl;
    std::cout << s.personVect.at(0).name << std::endl;
    p.test();
    return 0;
} 
```

学校.h

```
#ifndef SCHOOL_H
#define SCHOOL_H
#include <vector>
#include "person.h"

class school
{
public:
    school();
    ~school();

    std::vector<person> personVect;

};

#endif // SCHOOL_H 
```

学校.cpp

```
#include "school.h"    
school::school(){}    
school::~school(){} 
```

人.h

```
#ifndef PERSON_H
#define PERSON_H
#include <string>
#include <vector>
#include "school.h"

class person {
public:

    std::string name;
    std::string phone;

    school doSomethingWithSchool();

    void test();

    person();
    ~person();

};

#endif // PERSON_H 
```

个人.cpp

```
#include "person.h"
#include <iostream>
using namespace std;

person::person()
{
    name = "marcus";
    phone = "0400000000";
}

person::~person()
{
}

void person::test() {
    cout << this->name;
}
school person::doSomethingWithSchool() {
    school s; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:21:23.557

这个问题可以通过更好地设计你的类关系来解决。

A`Person`不是由 a 组成的`School`，因此它不需要有 School 成员。

A`School`有一组`Person`对象。

如果您希望一个人与学校做某事，请将其作为参数传递。这样，您可以使用*指针*和*前向声明*来解决问题。

```
// Person.h
class School; // Forward declare school type.

// Person.cpp
Person::DoSomethingWithSchool(School* school); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:07:44.483

您的问题在于 school.h 有一个 #include "person.h" 语句，而 person.h 有一个 #include "school.h" 语句。

# 解决方案

在`school`课堂上`vector<person>`，使用. 而不是`vector<person*>`. 不要在此处包含 person.h，而是添加语句`class person;`。假设您的`school`班级最终会以某种方式修改`person`对象，请将 放在`#include person.h`您的 school.cpp 文件中，在语句之后`#include school.h`。

# 错误解释

这是编译时发生的事情的逐步细分：

1.  在 main.cpp 中，您首先包含 person.h。预处理器找到 person.h。由于您以前从未包含过它，因此尚未定义 PERSON_H 并且 ifndef PERSON_H 当前为真。所以我们转到文件的下一行。

2.  在这个文件中发生的**第一**件有趣的事情是 PERSON_H 被定义（`#fdefine PERSON_H`）。下次你`#include`这个文件时，预处理器将跳过整个文件，直接到#endif。

3.  发生的**第二**件有趣的事情是 school.h 被包含在内。所以预处理器找到了 school.h（我们还没有处理 School 类！），直到现在还没有被处理过。

4.  school.h 中第一个有趣的东西（在#define SCHOOL_H 之后）是**#include person.h**，所以预处理器**返回**到 person.h（我们还没有处理 Person 类！）。但是这一次，PERSON_H 已经定义了，所以#ifndef PERSON_H 为假，预处理器跳到那个文件中的#endif（正如我在（2）中提到的）。所以 Person 类仍然没有被声明。

5.  我们回到school.h，什么也没做。此时，我们即将声明/定义学校类。**从未声明过**person 类，因为我们的预处理器从 person.h 跳转到 school.h 再到 person.h 再回到 school.h，只处理`#include`指令。

6.  编译器开始遍历`school`类定义。下一个有趣的事情是线`std::vector<person> personVect;`。您已尝试实例化一个`vector<person>`. 但是`person`这里是未知的（即没有在这个范围内声明），因为（5）。这解释了您的两个模板参数错误： A`vector<person>`实际上是隐含的 a `vector <person, allocator<person> >`。第一个模板参数是`person`，第二个是`allocator<person>`。因为`person`是未知的，所以这两个论点都是无效的。

# 解决方案说明

school.h 包含 person.h，而 person.h 包含 school.h 的事实是导致您提到的循环依赖的原因。为了避免这种情况，我们需要另一种方式来声明我们将在文件中使用特定的类。常见的方法是使用**前向声明**——`class person;`我在解决方案中提到的声明，在`school`. 这是一个普通的声明，它让编译器知道`person`（在`school`类中使用）指的是一个类。

然而，为了构造`vector<person>`，编译器还需要知道类在内存中占用了多少空间`person`（即它的大小），而我们没有在声明中提供（并且永远无法手动提供）`class person;`。事实上，编译器只有在处理完头文件中的完整定义后才知道类的大小。但是，如果我们尝试这样做，我们又回到了原点（循环依赖，等等）。我们所知道的是指向 的**指针**的大小`person`，因为这是特定于机器的（例如，在 32 位机器上，指向**任何东西**的指针的大小都是 32 位）。因此，我们可以实例化 a，因为无论实际是`vector<person*>`什么，它始终是一个 32 位对象的向量。`person`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:16:58.577

而不是`#include "person.h"`
在头文件（“school.h”）中包含人员，如果需要，只需编写`class person;`并使用指向`person`
And 在 C++ 模块（“school.cpp”）中包含“person.h”的指针。

这在功能上也会有一些好处。（减少编译时间）

有用的链接：

[http://www.codeproject.com/Articles/547275/Whyplusisplusitplusbuildingplussopluslong-3f](http://www.codeproject.com/Articles/547275/Whyplusisplusitplusbuildingplussopluslong-3f) [https://stackoverflow.com/a/553869/328260](https://stackoverflow.com/a/553869/328260)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T06:52:22.457

尝试这个，

人.h

```
 #ifndef PERSON_H
        #define PERSON_H
        #include <string>
        #include <vector>

        class school;
        class person {
        public:

            std::string name;
            std::string phone;

            school doSomethingWithSchool();

            void test();

            person();
            ~person();

        };

        #endif // PERSON_H 
```

学校.h

```
 #ifndef SCHOOL_H
      #define SCHOOL_H
      #include <vector>

      class person;
      class school
      {
      public:
          school();
          ~school();

          std::vector<person*> personVect;
      };

      #endif // SCHOOL_H 
```

个人.cpp

```
 #include "person.h"
    #include "school.h"
    #include <iostream>
    using namespace std;

    person::person()
    {
        name = "marcus";
        phone = "0400000000";
    }

    person::~person()
    {
    }

    void person::test() {
        cout << this->name;
    }
    school person::doSomethingWithSchool() {
        school s; 
        return s;
    } 
```

并在 main.cpp

```
 int main()
    {
        person *p = new person;   
        school s;
        std::cout << p->name << std::endl;
        s.personVect.push_back(p);
        std::cout << s.personVect.size() << std::endl;
        std::cout << s.personVect.at(0)->name << std::endl;
        p->test();
        delete p;
        return 0;
    } 
```

# javascript - 正则表达式将 XML 转换为 JSON

> ID：15675352
> 
> 赞同：2
> 
> 时间：2013-03-28T06:12:59.217
> 
> 标签：javascript, xml, regex, json, parse-platform

这是上一个问题的延续： [我需要在 Parse.com 的 Cloud Code 上将 XML 转换为 JavaScript 中的 Json](https://stackoverflow.com/questions/15653460/i-need-to-convert-xml-to-json-in-javascript-on-parse-coms-cloud-code)

**请不要对此投反对票，因为您不相信 RegEx 是正确的选择。这是我必须处理的。** 如果您对此有其他想法，请告诉我。但它必须在 Parse.com 的 Cloud Code 上运行。

原始 XML：

```
<?xml version="1.0" encoding="UTF-8" ?><api><products total-matched="1618" records-returned="1" page-number="1"><product><ad-id>1234</ad-id><supplier-name>Window World</supplier-name><supplier-category>3703703</supplier-category><buy-url>http://website.com</buy-url><currency>USD</currency><description>Window</description><image-url>http://website.com/windowa/80x80.jpg</image-url><in-stock>yes</in-stock><manufacturer-name>Window World</manufacturer-name><name>Half Pain Glass</name><price>31.95</price><retail-price>87.60</retail-price><sale-price>29.95</sale-price><sku>5938</sku><upc></upc></product><product><ad-id>1234</ad-id><supplier-name>Window World</supplier-name><supplier-category>3703703</supplier-category><buy-url>http://website.com</buy-url><currency>USD</currency><description>Window</description><image-url>http://website.com/windowa/80x80.jpg</image-url><in-stock>yes</in-stock><manufacturer-name>Window World</manufacturer-name><name>Half Pain Glass</name><price>31.95</price><retail-price>87.60</retail-price><sale-price>29.95</sale-price><sku>5938</sku><upc></upc></product><product><ad-id>1234</ad-id><supplier-name>Window World</supplier-name><supplier-category>3703703</supplier-category><buy-url>http://website.com</buy-url><currency>USD</currency><description>Window</description><image-url>http://website.com/windowa/80x80.jpg</image-url><in-stock>yes</in-stock><manufacturer-name>Window World</manufacturer-name><name>Half Pain Glass</name><price>31.95</price><retail-price>87.60</retail-price><sale-price>29.95</sale-price><sku>5938</sku><upc></upc></product><product><ad-id>1234</ad-id><supplier-name>Window World</supplier-name><supplier-category>3703703</supplier-category><buy-url>http://website.com</buy-url><currency>USD</currency><description>Window</description><image-url>http://website.com/windowa/80x80.jpg</image-url><in-stock>yes</in-stock><manufacturer-name>Window World</manufacturer-name><name>Half Pain Glass</name><price>31.95</price><retail-price>87.60</retail-price><sale-price>29.95</sale-price><sku>5938</sku><upc></upc></product></products></api> 
```

正则表达式代码：

```
var regex = /(<\w+[^<]*?)\s+([\w-]+)="([^"]+)">/;
            while(xml.match(regex)) xml = xml.replace(regex, '<$2>$3</$2>$1>'); // For attributes

            xml = xml.replace(/\s/g, ' ').  // Finds all the white space converts to single space
                    replace(/< *\?[^>]*?\? *>/g, ''). //Finds the XML header and removes it
                    replace(/< *!--[^>]*?-- *>/g, ''). //Finds and removes all comments
                    replace(/< *(\/?) *(\w[\w-]+\b):(\w[\w-]+\b)/g, '<$1$2_$3').
                    replace(/< *(\w[\w-]+\b)([^>]*?)\/ *>/g, '< $1$2>').
                    replace(/(\w[\w-]+\b):(\w[\w-]+\b) *= *"([^>]*?)"/g, '$1_$2="$3"').
                    replace(/< *(\w[\w-]+\b)((?: *\w[\w-]+ *= *" *[^"]*?")+ *)>( *[^< ]*?\b.*?)< *\/ *\1 *>/g, '< $1$2 value="$3">').
                    //replace(/ *(\w[\w-]+\b) *= *"([^>]*?)" */g, '< $1>$2').
                    replace(/< *(\w[\w-]+\b) *</g, '<$1>< ').
                    replace(/> *>/g, '>').
                    //replace(/< *\/ *(\w[\w-]+\b) *> *< *\1 *>/g, '').  // breaks the output?
                    replace(/"/g, '\\"').
                    replace(/< *(\w[\w-]+\b) *>([^<>]*?)< *\/ *\1 *>/g, '"$1":"$2",').
                    replace(/< *(\w[\w-]+\b) *>([^<>]*?)< *\/ *\1 *>/g, '"$1":{$2},').
                    replace(/< *(\w[\w-]+\b) *>(?=.*?< \/\1\},\{)/g, '"$1":[{').
                    split(/\},\{/).
                    reverse().
                    join('},{').
                    replace(/< *\/ *(\w[\w-]+\b) *>(?=.*?"\1":\[\{)/g, '}],').
                    split(/\},\{/).
                    reverse().
                    join('},{').
                    replace(/< \/(\w[\w-]+\b)\},\{\1>/g, '},{').
                    replace(/< *(\w[\w-]+\b)[^>]*?>/g, '"$1":{').
                    replace(/< *\/ *\w[\w-]+ *>/g,'},').
                    replace(/\} *,(?= *(\}|\]))/g, '}').
                    replace(/] *,(?= *(\}|\]))/g, ']').
                    replace(/" *,(?= *(\}|\]))/g, '"').
                    replace(/ *, *$/g, ''); 
```

输出：

```
"api": {
    "page-number": "1",
    "records-returned": "1",
    "total-matched": "1618",
    "products": {
        "product": {
            "ad-id": "1234",
            "supplier-name": "Window World",
            "supplier-category": "3703703",
            "buy-url": "http://website.com",
            "currency": "USD",
            "description": "Window",
            "image-url": "http://website.com/windowa/80x80.jpg",
            "in-stock": "yes",
            "manufacturer-name": "Window World",
            "name": "Half Pain Glass",
            "price": "31.95",
            "retail-price": "87.60",
            "sale-price": "29.95",
            "sku": "5938",
            "upc": ""
        },
        "product": {
            "ad-id": "1234",
            "supplier-name": "Window World",
            "supplier-category": "3703703",
            "buy-url": "http://website.com",
            "currency": "USD",
            "description": "Window",
            "image-url": "http://website.com/windowa/80x80.jpg",
            "in-stock": "yes",
            "manufacturer-name": "Window World",
            "name": "Half Pain Glass",
            "price": "31.95",
            "retail-price": "87.60",
            "sale-price": "29.95",
            "sku": "5938",
            "upc": ""
        },
        "product": {
            "ad-id": "1234",
            "supplier-name": "Window World",
            "supplier-category": "3703703",
            "buy-url": "http://website.com",
            "currency": "USD",
            "description": "Window",
            "image-url": "http://website.com/windowa/80x80.jpg",
            "in-stock": "yes",
            "manufacturer-name": "Window World",
            "name": "Half Pain Glass",
            "price": "31.95",
            "retail-price": "87.60",
            "sale-price": "29.95",
            "sku": "5938",
            "upc": ""
        },
        "product": {
            "ad-id": "1234",
            "supplier-name": "Window World",
            "supplier-category": "3703703",
            "buy-url": "http://website.com",
            "currency": "USD",
            "description": "Window",
            "image-url": "http://website.com/windowa/80x80.jpg",
            "in-stock": "yes",
            "manufacturer-name": "Window World",
            "name": "Half Pain Glass",
            "price": "31.95",
            "retail-price": "87.60",
            "sale-price": "29.95",
            "sku": "5938",
            "upc": ""
        }
    }
} 
```

我遇到的最后一个问题（我知道）是这不会使重复项成为 JSON 数组。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-30T02:23:39.887

使用正则表达式是一种有趣的方法，它似乎比使用节点列表要快一些。但是，当速度不是决定因素时（如在 OP 的应用程序中），这不是将 xml 转换为 js 的最佳方法。正则表达式代码压缩了大约 1kb。对于相同数量的字节，您可以构建一个相当健壮且可重用的转换器......甚至可以处理不同浏览器中的 xml 名称空间。

我编写了以下代码（压缩），它很好地处理了 OP 的 XML 数据。

```
 var xml2js=function(m,p){var f=1,o=2,d=3,n=4,j=7,c=8,h=9,l,b,a,k={},g=[];if(!p){p={}}if(typeof p=="string"){p={find:p}}p.xmlns=p.xmlns||"*";if(p.parse!="function"){p.parse=e}function e(i){return i.split(":").pop().replace(/^ows_/,"").replace(/[^a-z,A-Z,0-9]/g,"")}switch(m.nodeType){case h:a=(!p.find)?m.childNodes:(m.getElementsByTagNameNS)?m.getElementsByTagNameNS(p.xmlns,p.find.split(":").pop()):m.getElementsByTagName(p.find);for(l=0;l<a.length;l++){k=xml2js(a[l]);if(k){g.push(k)}}k=(g.length&&g.length==1)?g[0]:g;break;case f:if(m.attributes.length==0&&m.childNodes.length==1&&m.childNodes.item(0).nodeValue){k=m.childNodes.item(0).nodeValue}for(l=0;l<m.attributes.length;l++){b=p.parse(m.attributes.item(l).nodeName);k[b]=m.attributes.item(l).nodeValue}for(l=0;l<m.childNodes.length;l++){if(m.childNodes.item(l).nodeType!=d){b=p.parse(m.childNodes.item(l).nodeName);if(typeof k[b]=="undefined"){k[b]=xml2js(m.childNodes.item(l))}else{if(typeof k[b].push=="undefined"){k[b]=[k[b]]}k[b].push(xml2js(m.childNodes.item(l)))}}}break;case n:k="<![CDATA["+m.nodeValue+"]]>";break;case d:k=m.nodeValue;break;case c:k="";break;default:k=null}return k}; 
```

然后加载并转换xml：

```
 function test( ) {
        var nodeName = 'products'; // optional - any node name
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'CloudCode.xml', false);
        xhr.send();
        var js = xml2js( xhr.responseXML, nodeName );
        console.log(JSON.stringify( js, null, '\t'));
    } 
```

输出：

```
 {
    "pagenumber": "1",
    "recordsreturned": "1",
    "totalmatched": "1618",
     "product": [
      {
        "adid": "1234",
        "suppliername": "Window World",
        "suppliercategory": "3703703",
         "buyurl": "http://website.com",

         etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:57:16.933

好的，请注意，这是一个快速修复，但它似乎工作。这只会添加一个数组结构，因此您不会有多次相同的键（但不会破坏该键）。
改变：

```
replace(/< *(\w[\w-]+\b) *>(?=.*?< \/\1\},\{)/g, '"$1":[{').
split(/\},\{/).
reverse().
join('},{').
replace(/< *\/ *(\w[\w-]+\b) *>(?=.*?"\1":\[\{)/g, '}],').
split(/\},\{/).
reverse().
join('},{'). 
```

这是一种实现数组的尝试。
并放：

```
replace(/< *(\w[\w-]+\b) *>(?=("\w[\w-]+\b)":\{.*?\},\2)(.*?)< *\/ *\1 *>/, '"$1":[$3],') 
```

请注意，我几乎使用了他的匹配方式。这似乎至少对你有用。

# c++ - shared_ptr 错误表达式必须有算术、枚举、指针

> ID：15675355
> 
> 赞同：1
> 
> 时间：2013-03-28T06:13:09.163
> 
> 标签：c++, pointers, shared-ptr

我正在尝试检查 shared_ptr 是否没有调用 shared_ptr.reset()

我有一个

```
std::shared_ptr<Shape> m_shape; 
```

我正在尝试做

```
 if(m_shape.reset()==false)
 {
    dothis();
 } 
```

我想检查并查看 m_shape 是否处于活动状态并正在使用......并且 reset 表示何时停止使用 shared_ptr

但我在 m_shape 上不断收到错误，说表达式必须有算术、枚举、指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:14:44.027

`reset()`是一个重置 shared_ptr 并返回的函数`void`。它肯定不会告诉您`shared_ptr`当前是否正在管理一个对象。事实上，调用它可以保证它不再管理对象。

相反，`shared_ptr`有一个转换`bool`告诉你它当前是否正在管理一个对象。所以你可以说

```
if (m_shape) {
    // m_shape has an object
} 
```

# jsf - 通过 jsf 从外部位置显示图像

> ID：15675364
> 
> 赞同：0
> 
> 时间：2013-03-28T06:14:00.560
> 
> 标签：jsf, tomcat

我阅读了许多关于同一问题的帖子，“tomcat 服务器”端的解决方案是在元素内添加元素，我做了这样的事情：

```
<Host>
    <Context docBase="path_to_image" path="/images" />
..... 
```

我现在的问题是，如果我尝试通过这样的 html 图像标签显示图像：

```
<img src="/images/dist/image_name.ext"/> 
```

渲染的图像没有任何问题，但是我在使用 jsf 标签时遇到了问题，例如：

```
<h:graphicImage value="/images/dist/image_name.ext" /> 
```

这个标签的输出是：[http://localhost:8080/context_name/faces/images/dist/image_name.ext]

所以我想如果我可以从 jsf 组件指向 [http://localhost:8080/images/dist/image_name.ext] 它将解决问题，但我该怎么做呢？

任何想法 ？

我看到这篇文章[http://balusc.blogspot.com/2007/04/imageservlet.html](http://balusc.blogspot.com/2007/04/imageservlet.html)

但如果我能像我之前提到的那样通过 server.xml 解决这个问题，那就更好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:37:42.957

确实会隐式地将`<h:graphicImage>`webapp 上下文路径添加到图像的 URL。只是不要使用它并坚持使用纯 HTML`<img>`元素。无论您想到什么需要它成为`<h:graphicImage>`组件的原因，都需要重新考虑或以不同的方式解决，以便您可以继续使用纯 HTML `<img>`。元素。

# wordpress - Redirect oldDomain.com/folder/page/ to newDomain.com/page/

> ID：15675367
> 
> 赞同：1
> 
> 时间：2013-03-28T06:14:16.593
> 
> 标签：wordpress, .htaccess

I have WordPress installed in a folder and have gone through [this process](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory#Using_a_pre-existing_subdirectory_install) in the WordPress codex to remove the sub-folder from the url. Works beautifully, oldDomain.com/folder/page/ is now oldDomain.com/page/.

My client wants to change the domain name for the site. Everything is redirecting except this case if people have the old url bookmarked - oldDomain.com/folder/page/ to newDomain.com/page/.

I tried this and nothing seems to happen:

```
RewriteCond %{HTTP_HOST} ^oldDomain\.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www\.oldDomain\.com$ [NC]
RewriteRule ^folder/(.*)$ http://www.newDomain.com/$1 [R=301,L] 
```

Similarly nothing happens when trying this:

```
RewriteRule ^folder/(.*)$ /$1 [R=301,L] 
```

This works for the url but seems to break something with the stylesheets etc as all formatting disappears

```
RedirectMatch 301 ^/folder/(.*)$ /$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:36:01.520

```
Redirect 301 ^folder/(.*)$ http://www.newDomain.com/$1 
```

尝试这个。希望能帮助到你。

# java - 从 JAVA 应用服务器捕获 https 流量

> ID：15675369
> 
> 赞同：0
> 
> 时间：2013-03-28T06:14:25.737
> 
> 标签：java, ssl, https

我正在编写一个通过 HTTPS 连接到另一个第三方服务器的 java 应用程序服务器。我想捕获这两个服务器之间的流量（通过 HTTPS）。我们无法访问第三方服务器的私钥。他们为我们提供了 pfx 文件，我们的服务器在连接到该第三方服务器时正在使用该文件。我可以使用任何工具吗？我看过一些关于此的帖子，但不确定哪种方式有效。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:18:24.773

SSL 的全部意义在于你不能这样做......检查[Diffie Hellman](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchangehttp://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)为什么即使你有密钥，你也无法解密流量。

# asp.net-mvc - WCF 显示“您已创建服务”。页面而不是 WSDL

> ID：15675377
> 
> 赞同：0
> 
> 时间：2013-03-28T06:15:04.543
> 
> 标签：asp.net-mvc, wcf, iis, web-config, wsdl

我有一个在 ASP.NET MVC 4 应用程序中运行的 WCF 服务。该站点在 Server 2012 上的 IIS8 上运行。直到最近，WSDL 页面加载没有任何问题。本周，WSDL 不再加载。“欢迎”页面的链接是正确的，但是当我单击它或尝试生成客户端时，会返回相同的欢迎页面。

我已经尝试过使用 ServiceRoute 并使用 .svc 文件。

ServiceRoute 如下所示：

```
/DataService 
```

它的 WSDL 链接是：

```
/DataService?wsdl 
```

.svc 文件如下所示：

```
/directory/otherdir/DataService.svc 
```

WSDL 链接是

```
/directory/otherdir/DataService.svc?wsdl 
```

我以前从来不需要在 web.comfic 部分进行任何配置，使用 SerivceRoute。

如何让 WCF 正确显示 WSDL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T14:37:05.870

我之前遇到过这种情况，可能有多种原因，由于操作错误，服务无法运行，或者您可能使用的是 WebServiceHostFactory 而不是 ServiceHostFactory

```
RouteTable.Routes.Add(new ServiceRoute("DataService", new ServiceHostFactory(), typeof(MyServiceType))); 
```

# wpf - 在 WPF 中自定义上下文菜单

> ID：15675382
> 
> 赞同：13
> 
> 时间：2013-03-28T06:15:29.170
> 
> 标签：wpf, xaml, contextmenu

我在这里有一个项目，我需要在我的 WPF 应用程序中自定义上下文菜单，其中一个按钮将放置在所有菜单项的底部。

但是，如果我要通过 XAML 添加按钮，它将在上下文菜单中显示为集合中的另一个项目，并且鼠标悬停突出显示将作用于它。

我希望将上下文菜单调整为类似网格的样式，从而可以自定义其下方的样式。

知道如何实现这一点（最好在 XAML 中）吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-18T23:34:39.070

在 XAML 中它实际上非常简单。只需在您想要为其设置上下文菜单的元素下定义它。

```
 <Border>
            <Border.ContextMenu>
                <ContextMenu>
                    <ContextMenu.Template>
                        <ControlTemplate>
                            <Grid>
                                <!--Put anything you want in here.-->
                            </Grid>
                        </ControlTemplate>
                    </ContextMenu.Template>
                </ContextMenu>
            </Border.ContextMenu>
        </Border> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T07:35:32.533

对于项目中带有按钮的菜单项样式，您可以使用以下代码：

注意 - 将项目添加到`Header`将使其保持不变`MenuItem`，但如果添加到`MenuItem`唯一它将被视为新的`MenuItem`。

```
<ContextMenu>
    <ContextMenu.Items>
       <MenuItem>
          <MenuItem.Header>
             <StackPanel>
                <TextBlock Text="Item 1"/>
                <Button Content="Button 1" Margin="5"/>
             </StackPanel>
          </MenuItem.Header>
        </MenuItem>
        <MenuItem>
          <MenuItem.Header>
             <StackPanel>
                <TextBlock Text="Item 2"/>
                <Button Content="Button 2" Margin="5"/>
              </StackPanel>
           </MenuItem.Header>
          </MenuItem>
     </ContextMenu.Items>
 </ContextMenu> 
```

这将是结果`ContextMenu`：

![在此处输入图像描述](../Images/36aad8d3a5d65fbe94161cf8a9012d0e.png)

从那里您可以设置`MenuItem`或`Button`等样式。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-20T20:10:38.673

您可以从示例样式/模板（从[此处](https://msdn.microsoft.com/en-us/library/ms744758(v=vs.100).aspx)）开始，`ContextMenu`并根据您的需要进行调整。

```
<Style TargetType="{x:Type ContextMenu}">
  <Setter Property="SnapsToDevicePixels" Value="True" />
  <Setter Property="OverridesDefaultStyle" Value="True" />
  <Setter Property="Grid.IsSharedSizeScope" Value="true" />
  <Setter Property="HasDropShadow" Value="True" />
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type ContextMenu}">
        <Border x:Name="Border"
                Background="{StaticResource MenuPopupBrush}"
                BorderThickness="1">
          <Border.BorderBrush>
            <SolidColorBrush Color="{StaticResource BorderMediumColor}" />
          </Border.BorderBrush>
          <StackPanel IsItemsHost="True"
                      KeyboardNavigation.DirectionalNavigation="Cycle" />
        </Border>
        <ControlTemplate.Triggers>
          <Trigger Property="HasDropShadow" Value="true">
            <Setter TargetName="Border" Property="Padding" Value="0,3,0,3" />
            <Setter TargetName="Border" Property="CornerRadius" Value="4" />
          </Trigger>
        </ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

# c# - 扩展方法中的值不变（C#）

> ID：15675390
> 
> 赞同：0
> 
> 时间：2013-03-28T06:16:02.183
> 
> 标签：c#, vector, extension-methods

我正在为 CAD 系统编写插件。不幸的是，这个系统有一个糟糕的 API。所以，我为 Vector3d 类编写了扩展。这是（C#代码）：

```
/// <summary>
///     Normalizes the vector by dividing it’s all coordinates with the vector's norm.
/// </summary>
/// <param name="v">
///     This vector.
/// </param>
/// <returns>
///     Returns vector's norm.
/// </returns>
public static double Normalize(this Vector3d v)
{
    var norm = v.Norm();
    var invNorm = 1.0 / norm;

    v.X *= invNorm;
    v.Y *= invNorm;
    v.Z *= invNorm;

    return norm;
} 
```

但是我有一个问题：当这个方法执行时，向量的坐标会改变。但是，当方法执行后，向量的坐标具有原始值。

我对其他扩展方法没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:14:14.343

在 Vector3d 是一个结构的假设下工作：

参数（无论是否是扩展方法的“this”参数）按值传递。您使用的参数实际上是原始vector3 的副本。

建议改成：

```
public static double NormalizeVector3d(ref Vector3d v); 
```

或者：

```
public static Vector3d GetNormalizedVector3d(Vector3d v, out double norm); 
```

无论哪种方式，都无法使用扩展方法进行调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:15:14.443

正如 leppie 提到的，`Vector3d`可能是一个[struct](http://msdn.microsoft.com/en-us/library/ah19swz4.aspx)，而不是一个类。

这意味着它是一个[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)，并且将它作为参数传递给您的扩展方法有效地创建了对象的副本。您的扩展方法会更改副本，然后在退出方法时将其丢弃。

我找不到此 .NET API 的良好 API 参考，但这可能也是您认为该 API“不好”的原因。修改 Vector3d 的方法将返回原始向量的副本，而不是对对象本身进行操作。或者，他们可以使用参考参数，您也可以这样做：

```
public static double Normalize(ref Vector3d v) 
```

假设它是一个结构（如果没有更多信息，我想不出另一种解释），但是 API 的创建者应该使结构不可变。可变结构是解决此类问题的秘诀。

就个人而言，我可能会这样写你的方法：

```
public static Vector3d Normalize(this Vector3d v, out double norm)
{
    norm = v.Norm();
    var invNorm = 1.0 / norm;

    // Using a constructor with x, y, z parameters would be preferable,
    // if it exists.
    v.X *= invNorm;
    v.Y *= invNorm;
    v.Z *= invNorm;

    return v;
} 
```

与`ref`选项不同，它可以编写为扩展方法。

# mvvm - 如何在 MVVM 中应用视图端过滤？

> ID：15675392
> 
> 赞同：1
> 
> 时间：2013-03-28T06:16:19.220
> 
> 标签：mvvm, view, telerik, viewmodel

我在我的项目中使用 Telerik RadGridView（它本质上是一个标准的 GridView）。这个组件有它自己的过滤功能，我想利用它。

我计划根据几个组合框选择的值进行过滤。因此，如果我对 MVVM 有正确的认识，我需要将组合绑定到一些 ViewModel 的属性。但是这里有一个问题，如何将这些选定的值传递回 View 的组件？如何使其在选定值更改时刷新过滤？

upd：我使用 SimpleMVVM 框架。

主窗口的 XAML：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
......
    DataContext="{Binding Source={StaticResource Locator}, Path=MainPageViewModel}">

<StackPanel Height="auto">
    <telerik:RadMenu VerticalAlignment="Top">
    ......            
    </telerik:RadMenu>
    <my:Expander VerticalAlignment="Top" HorizontalAlignment="Stretch" Height="auto" Width="auto"/>
    <my:CustomerView Margin="0,0,0,0" VerticalAlignment="Top" HorizontalAlignment="Stretch" Height="auto" Width="auto"/>
</StackPanel> 
```

扩展器的 XAML：

```
<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
...... >

<Grid Margin="10,10,0,10" Width="684" Height="97" VerticalAlignment="Top" HorizontalAlignment="Left" >

    <telerik:RadExpander x:Name="radExpander" IsExpanded="True" HorizontalAlignment="Stretch" VerticalAlignment="Top" telerik:AnimationManager.IsAnimationEnabled="True" Margin="0,0,0,0" Grid.RowSpan="2">
            <telerik:RadComboBox HorizontalAlignment="Left" Margin="244,-2,0,0" VerticalAlignment="Top" Width="154" Height="26" 
                                 ItemsSource="{Binding Path=AllLevels}" DisplayMemberPath="name" SelectedItem="{Binding SelectedEventLevel}"/>
 .......

        </Grid>
    </telerik:RadExpander>
</Grid> 
```

CustomerView 的 XAML：

```
 <telerik1:RadGridView Name="EventList" .... ItemsSource="{Binding SportEventsList}" AutoGenerateColumns="False">
        <telerik1:RadGridView.Columns>
 .....
        </telerik1:RadGridView.Columns>
    </telerik1:RadGridView> 
```

Viewmodel 的代码片段：

```
 private ObservableCollection<sportevent> _sportEventsList;
  public ObservableCollection<sportevent> SportEventsList
  {
      get { return _sportEventsList; }
      set
      {
          _sportEventsList = value;
          NotifyPropertyChanged(vm => vm.SportEventsList);
      }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:35:24.953

将以下属性添加到您的 VM：

```
 private ObservableCollection<yourType> allLevels;
    public ObservableCollection<yourType> AllLevels
    {
        get
        {
            return allLevels;
        }
        set
        {
            allLevels = value;
            RaisePropertyChanged("AllLevels");
        }
    }

    private yourType selectedEventLevel;
    public yourTypeSelectedEventLevel
    {
        get
        {
            return selectedEventLevel;
        }
        set
        {
            selectedEventLevel = value;
            RaisePropertyChanged("SelectedEventLevel");
        }
    } 
```

我假设`MainPageViewModel`继承`SimpleViewModelBase`

# html - 尝试将页面标题垂直拆分为三个区域，但右侧错误地出现在中间下方

> ID：15675393
> 
> 赞同：1
> 
> 时间：2013-03-28T06:16:24.820
> 
> 标签：html, css

我正在尝试将标题拆分为三种方式（左侧的徽标，中间的徽标和右侧的其他内容）。标题的宽度为 100%。

我遇到的问题是右侧部分仅显示较低（在中间 div 的信息下）。在这种情况下，不知道如何简单地将正确的部分显示在右侧。我可能无法很好地解释这一点，如果我能进一步澄清这一点，请告诉我。

```
<div id="header">
    <div id="logo">
        logo
    </div>
    <div id="header-middle">

    </div>
    <div id="header-right">

    </div>
</div> 
```

与CSS：

```
#header {
    padding-top: 10px;
    padding-bottom: 10px;
    padding-left: 25px;
    background-color: #fafafa;
    height: 55px;
    border-bottom: 1px solid #d3d3d3;
    overflow: auto;
}

#logo {
    font-size: 24pt;
    color: #08a3d9;
    width: 100px;
    float: left;
}

#header-middle {
    width: 300px;
    margin-left: auto;
    margin-right: auto;
}

#header-right {
    float: right;
    width: 300px;
    margin-right: 20px;
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T06:27:23.023

你的 CSS 很好。只需将#header-middle 移到 HTML 的最后。那么什么是float:right会向右走，float:left会向左走，中间的内容会向上填充，占据无人认领的中间空间。你拥有它的方式发生了什么，未浮动元素正在推动浮动元素。

```
<div id="header">
    <div id="logo">
        logo
    </div>
    <div id="header-right">

    </div>
    <div id="header-middle">

    </div>
</div> 
```

如果更改 HTML 顺序不是一个选项，那么只需为所有内容分配宽度，并浮动所有剩余的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T07:10:16.673

这是另一种解决方案供您考虑：

在下面的代码中，我删除了所有浮动并使用了相对大小，以使您的设计能够更好地处理窄...

![在此处输入图像描述](../Images/9305968f0cada15157e8cbf138391569.png)

...和宽...

![在此处输入图像描述](../Images/b93f83e544a25de2f574fd8a84322ac8.png)

...屏幕宽度响应更快。

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>

    <style>
        #header {
            padding: 25px 10px;
            height: 55px;
            border-bottom: 1px solid #d3d3d3;
            overflow: no-content;
            min-width: 400px;
        }

        div#header div {
            display: inline-block;
            padding: 1% 0;
            margin: 0 2%;
            text-align: center;
            border: 4px dashed; /* Useful for positioning */
            font-size: 2em;
        }

        #logo {
            color: #08a3d9;
            width: 20%;
            border-color: red; 
        }

        #header-middle {
            width: 40%;
            border-color: green; 
        }

        #header-right {
            width: 20%;
            border-color: blue; 
        }
    </style>
</head>
<body>

    <div id="header">
        <div id="logo">
            logo
        </div>
        <div id="header-middle">
            middle
        </div>
        <div id="header-right">
            end
        </div>
    </div>
</body>
</html> 
```

我还建议使用[HTML5 Boilerplate](http://html5boilerplate.com/)或[Columnal 之](http://www.columnal.com/)类的东西，它们提供了一个不错的响应式网格系统，以便您的网站在桌面和移动设备上都能完美运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T06:34:11.747

我为你制作了另一个 jsFiddle。

**更新** [http://jsfiddle.net/zGfh7/](http://jsfiddle.net/zGfh7/)

我的答案比魔术师的要复杂得多，但它也有效。

我添加`float: left`到中间标题。

此外，我将所有标题的宽度更改为 33%，并删除了所有左侧边距和填充等，以使内容更干净。您可以根据自己的喜好保留或更改 33% 的宽度，但确保所有宽度加起来为 100% 以确保标题被很好地填充。

我还添加了背景颜色，因此您可以看到它们很好地对齐。

# google-apps-script - UrlFetchApp 的错误请求

> ID：15675394
> 
> 赞同：0
> 
> 时间：2013-03-28T06:16:25.767
> 
> 标签：google-apps-script

寻找连接到此服务并返回 xml 的帮助。

以下是说明（来自[此处](http://www.belltimers.com/pdf/webrelayusermanual.pdf)）：

> 可以通过向端口 80（或设置中指定的端口）发送 XML 页面 state.xml 的请求来监控输入和继电器的状态。可以通过在端口 80（或设置中指定的端口）上向同一页面发送 GET 请求来控制继电器。这可以通过在 Web 浏览器的 URL 行中输入命令来证明。
> 
> 请求当前状态：http://"ip address"/state.xml
> 
> ...
> 
> 如果在 WebRelay-DualTM 单元中启用了控制密码，并且通过浏览器请求 state.xml 页面，浏览器将提示用户输入密码。如果 XML 请求是从另一个应用程序而不是浏览器发送的，则 html 请求将需要包含使用 base 64 编码方案编码的密码。没有密码的 html 请求标头如下所示：
> 
> ```
> GET /state.xml?relay1State=1&noReply=1 HTTP/1.1 (Ends with two \r\n) 
> ```
> 
> 带有密码的 html 请求标头如下所示：
> 
> ```
> GET /state.xml?relay1State=1&noReply=1 HTTP/1.1(\r\n here)
> Authorization: Basic bm9uZTp3ZWJyZWxheQ== (Ends with two \r\n) 
> ```
> 
> `bm9uZTp3ZWJyZWxheQ==`用户名和密码的 base 64 编码版本在哪里none:webrelay

代码：

```
function webRelay(){
  //working url http://75.65.130.27/state.xml

  var url = 'http://75.65.130.27/';

  var params = encodeURIComponent('state.xml');
  Logger.log(params);

  var headers = {
    "Authorization" : "Basic" + Utilities.base64Encode('none:webrelay')
  };

  var options =
   {
     "method" : "get",
     "headers" : headers
   };

  var state = UrlFetchApp.fetch(url+params, options);

  Logger.log('1: '+state);
  Logger.log(parse(state));
}

function parse(txt) {
  var doc = Xml.parse(txt, true);
} 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:29:54.403

您可以轻松解决几个编码错误：

1.  在“授权”标题中，“基本”之后需要一个空格。
    `Authorization : "Basic " + Utilities.base64Encode(username+':'+password)`

2.  `urlFetchApp.fetch()`返回一个 HTTP Response 对象，因此您需要提取内容进行解析。
    `var result = UrlFetchApp.fetch(url, options);`
    `var state = result.getContentText();`

3.  你没有从你的`parse()`函数中返回任何东西。

4.  您应该检查`result.getResponseCode()`after `.fetch()`，并在继续解析之前处理错误。

也就是说，我不断收到`Bad request: http://75.65.130.27/state.xml`错误，所以有些地方仍然不正确。这是一个 HTTP 400 响应，谷歌的服务器不会向脚本调试器返回任何内容以对其进行深入研究。您应该检查用户名和密码，但如果他们错了，我希望得到 401-Unauthorized 响应。我尝试包括 a `payload`of `relay1State=2`，并得到了相同的`Bad request`结果。如果您可以捕获到达您的服务器的 HTTP 请求，那么您可能会发现什么是格式错误的。这也可能是防火墙的结果。

排序后，[本教程](https://developers.google.com/apps-script/articles/XML_tutorial)应该有助于 XML 解析。

这是我对您的代码的编辑：

```
function webRelay(){
  var url = 'http://75.65.130.27/state.xml';
  var username = "none";
  var password = "webrelay";

  var headers =
  {
    Authorization : "Basic " + Utilities.base64Encode(username+':'+password)
  }

  var options =
  {
    "method" : "get",
    "headers": headers
  };

  // Getting "bad request" here - check the username & password
  var result = UrlFetchApp.fetch(url, options);
  var state=result.getContentText(); 

  // You should check state.getResponseCode()

  Logger.log('1: '+state);
  Logger.log(parse(state));
}

function parse(txt) {
  var doc = Xml.parse(txt, true);
  return doc;                            // Return results
} 
```

# iphone - 如何为地图视图设置框架 - 在 iOS6 的谷歌 GMSMap 中

> ID：15675402
> 
> 赞同：4
> 
> 时间：2013-03-28T06:17:06.270
> 
> 标签：iphone, ios, google-maps-sdk-ios

我正在尝试在 iOS6 的 Google Map View 中加载地点。如何设置地图的框架？目前是全屏

```
 -(void)loadView {

   GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:10.00989
                                                        longitude:76.316142
                                                             zoom:15];
   mapView_ = [GMSMapView mapWithFrame:CGRectZero camera:camera];
   self.view = mapView_;

   } 
```

我尝试在当前视图中创建一个新的（小）视图并在其中添加地图，但当时页面没有被加载。它显示一个全黑屏

```
 -(void)loadView {

  GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:10.00989
                                                        longitude:76.316142
                                                             zoom:15];
   mapView_ = [GMSMapView mapWithFrame:CGRectZero camera:camera];

   [self.view Addsubview:newView];
   self.newView = mapView_;

  // I also tried like this - [self.newView Addsubview:mapView_;

   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T20:32:25.820

你可以试试......什么对我有用:)

```
//header file
...
@property (nonatomic, weak) IBOutlet GMSMapView *mapView;
@property (weak, nonatomic) IBOutlet UIView *subview; //viewForMap
... 
```

执行文件

```
GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:10.8683
                                                            longitude:76.2086 zoom:6
                                                              bearing:0
                                                         viewingAngle:0
                                                                ];
    self.mapView = [GMSMapView mapWithFrame:_subview.bounds camera:camera];
  [_subview addSubview:_mapView]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:32:04.867

创建具有所需框架尺寸的 CGRect 并使用方法设置 MapView 框架，`mapWithFrame:`然后将 mapview 添加为主子视图。以下是解释所有内容的代码。 `CGRect fr= CGRectMake(0, 44, 768, 960); mapView_ = [GMSMapView mapWithFrame:fr camera:camera]; mapView_.myLocationEnabled = YES; [self.view addSubview:mapView_];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:44:50.450

很难说你的问题是添加地图视图还是上游的东西。

您是否在 -viewDidLoad 中设置了断点以确保调用它？

检查 newView 的边界以确保它是您所期望的。newView 可见吗？它是 self.view 的子视图吗？

当您试图确保您的视图位于您期望的位置时，您可以使用的一个技巧是将背景颜色设置为明显的颜色，例如红色，然后您可以在屏幕上清楚地看到它是否符合您的期望。如果您这样做并且没有看到红色框，那么您的问题不在于地图，而是您尚未向我们展示的代码的上游某处。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-13T11:31:49.463

**你需要这样做**

```
 -(void)loadView {

    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:10.00989
                                                        longitude:76.316142
                                                             zoom:15];

    mapView_ = [GMSMapView mapWithFrame:self.newView.bounds camera:camera];

    [self.view addSubview:newView];

    [self.newView addSubview:mapView_];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T06:51:38.460

I don't think `loadView` is called when you are using a xib. I haven't tried using the Google Maps SDK for iOS with a xib, as I create all of my views programmatically.

Maybe you could add your map view in `viewDidLoad`? So for example:

```
- (void)viewDidLoad 
{
    [super viewDidLoad];

    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:10.00989
                                                    longitude:76.316142
                                                         zoom:15];
    mapView_ = [GMSMapView 
        mapWithFrame: CGRectMake(
            0, 0, 
            self.newView.frame.size.width, self.newView.frame.size.height)               
        camera: camera];

   [self.newView addSubview: mapView_];
} 
```

# javascript - 如何在 iPhone safari 中使用 javascript 打开上下文菜单而不长按？

> ID：15675403
> 
> 赞同：0
> 
> 时间：2013-03-28T06:17:19.187
> 
> 标签：javascript, iphone, contextmenu

有没有办法做某事？:-)

```
<a href="http://www.google.com/">Long press me!</a>
<script type="text/javascript">
    // do something to open context menu of anchor element
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:30:04.330

[要在UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/stringByEvaluatingJavaScriptFromString%3a)上运行 javascript，您有

`- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script`

```
Parameters
script
The script to run.
Return Value
The result of running script or nil if it fails. 
```

> 讨论 每个顶级入口点的 JavaScript 执行时间限制为 10 秒。如果您的脚本执行超过 10 秒，则 Web 视图将停止执行该脚本。这很可能发生在代码中的随机位置，因此可能会导致意想不到的后果。施加此限制是因为 JavaScript 执行可能会导致主线程阻塞，因此当脚本运行时，用户无法与网页交互。
> 
> JavaScript 分配也限制为 10 MB。如果超过 JavaScript 的总内存分配限制，Web 视图会引发异常。

# plsql - 具有 into 关键字的动态 SQL Select 语句

> ID：15675404
> 
> 赞同：3
> 
> 时间：2013-03-28T06:17:34.647
> 
> 标签：plsql, oracle11g

我有一个存储过程，它可以动态创建表并插入到该表中，这里一切正常。下面代码的问题

```
execute immediate
'SELECT NAME 
INTO variable1
FROM table1 
WHERE ID = 2'; 
```

错误是：缺少关键字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:32:54.350

```
execute immediate
  'SELECT NAME FROM table1 WHERE ID = 2'
  into variable1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T06:39:54.743

您不希望`INTO`成为动态 SQL 语句的一部分。它必须是其中的一部分`EXECUTE IMMEDIATE`

```
EXECUTE IMMEDIATE 
  'SELECT name FROM table1 WHERE id = 2'
  INTO variable1; 
```

您几乎肯定希望在动态 SQL 语句中使用绑定变量来减少不断硬解析语句的开销。数字 2 几乎肯定来自其他地方，不应该是硬编码的。

```
EXECUTE IMMEDIATE 
  'SELECT name FROM table1 WHERE id = :val'
  INTO variable1
 USING some_variable_with_a_value_of_2; 
```

# c# - 无法将我的列表绑定到 datagridView

> ID：15675407
> 
> 赞同：0
> 
> 时间：2013-03-28T06:17:41.277
> 
> 标签：c#, winforms, list, datagridview

我正在开发一个项目，在该项目中我将自定义列表绑定到数据网格。我认为我当前的应用程序可能存在一些问题，所以我决定在 4.0 中制作一个新的示例应用程序，但同样的问题。

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form` 
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void populate()
        {
            List<BillInfoCustom> oSalesList = new List<BillInfoCustom>();

            BillInfoCustom oSalesType = new BillInfoCustom() { BillId = 1, BillDate = DateTime.Now.ToLongDateString(), CashPayment = 10, CreditCardPaymet = 20, CustomerName = "asda", TotalPrice = 20.0 };

            BillInfoCustom oSalesType2 = new BillInfoCustom() { BillId = 1, BillDate = DateTime.Now.ToLongDateString(), CashPayment = 10, CreditCardPaymet = 20, CustomerName = "asda", TotalPrice = 20.0 };

            BillInfoCustom oSalesType3 = new BillInfoCustom() { BillId = 1, BillDate = DateTime.Now.ToLongDateString(), CashPayment = 10, CreditCardPaymet = 20, CustomerName = "asda", TotalPrice = 20.0 };

            oSalesList.Add(oSalesType);
            oSalesList.Add(oSalesType2);
            oSalesList.Add(oSalesType3);

            dataGridView1.DataSource = oSalesList;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            populate();
        }
    }

    public class BillInfoCustom
    {
        public int BillId;
        public double TotalPrice;
        public double CashPayment;
        public double CreditCardPaymet;
        public string CustomerName;
        public string BillDate;
    }
} 
```

这是我按下按钮后的输出：

![输出](../Images/95fe61be3454d1140a3fa356729948e6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:22:22.253

数据绑定适用于属性，而不是字段。您添加`{ get; set; }`到每个成员。尝试更改为：

```
public class BillInfoCustom
{
    public int BillId { get; set; }

    public double TotalPrice{ get; set; }

    public double CashPayment { get; set; }

    public double CreditCardPaymet { get; set; }

    public string CustomerName { get; set; }

    public string BillDate { get; set; }
} 
```

# android - 如果未连接到 wifi，我的 Android 应用程序将崩溃

> ID：15675412
> 
> 赞同：0
> 
> 时间：2013-03-28T06:18:06.823
> 
> 标签：android

```
package com.example.intracollegeapp;// package name

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.ObjectInput;
import java.io.ObjectInputStream;
import java.io.ObjectOutput;
import java.io.ObjectOutputStream;
import java.net.URL;
import java.net.URLConnection;
import java.security.MessageDigest;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import LibPack.UserInfoLib;
import android.R.string;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;
import android.support.v4.app.NavUtils;

public class LoginForm extends Activity {
    Button login;
    TextView username;
    TextView password;
    UserInfoLib ui;
    long msgLength;
    long bitLength;
    char msg[];
    long requiredBits;
    long requiredBytes;
    int toPad[];
    private static final String NAMESPACE = "link to server package on which     webservices are stored";
    private static final String URL = "link to wsdl file stored on server";
    private static final String SOAP_ACTION = "IntraCollegeWS";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login_form);
        login=(Button)findViewById(R.id.butLogin);
        username=(TextView)findViewById(R.id.editText1);
        password=(TextView)findViewById(R.id.editText2);
        login.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                ui= new UserInfoLib();
                ui.userId=username.getText().toString();
                ui.password=getSHA1(password.getText().toString());

                ui=(UserInfoLib)callService(objectToString(ui), "UserLogin", "userInfo");
                //ui=(UserInfoLib)stringToObject(temp);

                if(ui.firstName.equals("")){
                    Toast.makeText(v.getContext(), "Please Verify User Name Or Password", Toast.LENGTH_LONG).show();
                    finish();

                }else{
                    Toast.makeText(v.getContext(), "Login Successfull", Toast.LENGTH_LONG).show();
                    System.out.println("NAME :"+ui.firstName);
                    Intent i = new Intent(v.getContext(), MainForm.class);
                    i.putExtra("uid", ui);
                    startActivity(i);
                    finish();
                }
            }
        });

    }

    public long leftRotateBy(long l, int times) {
        return ((l << times) & 0xFFFFFFFFl) | ((l & 0xFFFFFFFFl) >> (32 - times));
    }

    public int getByteAt(int at) {
        if (at < msgLength) {
            return (msg[at]);
        } else {
            at = at - (int) msgLength;
            return toPad[at];
        }
    }

    public void padBits(String pass) {
        System.out.println("\n\n\n\n");

        msg = pass.toCharArray();
        msgLength = msg.length;
        bitLength = msgLength * 8;

        System.out.println("Msg Bit Length: " + bitLength);
        System.out.println("MSg Byte Length: " + msgLength);
        System.out.println("Required Minimum Bits: " + (bitLength + 65));

        long remainder = (bitLength + 65) % 512;
        System.out.println("Mod (Bits): " + remainder);

        if (remainder == 0) {
            requiredBits = 65;
            System.out.println("No Padding Needed.");
        } else {
            requiredBits = (512 - remainder) + 65;
            System.out.println(requiredBits + " Bits Padding Needed.");
        }

        requiredBytes = requiredBits / 8;
        toPad = new int[(int) requiredBytes];
        System.out.println("Required Bits: " + requiredBits);
        System.out.println("Required Bytes: " + requiredBytes);

        // manually append 1 to start of pad bits...
        toPad[0] = 0x80;
        for (int i = 1; i < requiredBytes - 8; i++) {
            toPad[i] = 0;
        }

        long temp = bitLength;
        for (int i = (int) (requiredBytes - 1); i >= (int) (requiredBytes - 8); i--) {
            int t = (int) (temp & 0xff);
            temp = temp >> 8;
        toPad[i] = t;
        }

        System.out.println("TO PAD: ");
        for (int i = 0; i < requiredBytes; i++) {
            System.out.print(Integer.toHexString(toPad[i]) + " ");
        }
        System.out.println();
    }

    public String getSHA1(String pass) {
        int kconst[] = new int[]{
                0x5A827999,
                0x6ED9EBA1,
                0x8F1BBCDC,
                0xCA62C1D6};

        long h0 = 0x67452301;
        long h1 = 0xEFCDAB89;
        long h2 = 0x98BADCFE;
        long h3 = 0x10325476;
        long h4 = 0xC3D2E1F0;
        long a, b, c, d, e;
        padBits(pass);

        long totalLength = msgLength + requiredBytes;
        System.out.println("TOTAL LENGTH: " + totalLength);
        System.out.println("BLOCKS: " + (totalLength / 8));

        long w[] = new long[80];
        for (int i = 0; i < (int) totalLength; i += 64) {
            for (int j = i, kk = 0; j < (i + 64); j += 4, kk++) {
                w[kk] = 0xffffffffl & ((getByteAt(j) << 24) | (getByteAt(j + 1) << 16) | (getByteAt(j + 2) << 8) | (getByteAt(j + 3)));
                //System.out.println("W[" + kk + "]: " + Long.toHexString(w[kk]));
            }

            for (int kk = 16; kk < 80; kk++) {
                w[kk] = (w[kk - 3] ^ w[kk - 8] ^ w[kk - 14] ^ w[kk - 16]);
                w[kk] = leftRotateBy(w[kk], 1);
                //System.out.println("W[" + kk + "]: " + Long.toHexString(w[kk]));
            }
            a = h0;
            b = h1;
            c = h2;
            d = h3;
            e = h4;

            long temp = 0;
            for (int t = 0; t < 20; t++) {
                temp = leftRotateBy(a, 5) + ((b & c) | ((~b) & d)) + e + w[t] + kconst[0];
                temp &= 0xFFFFFFFFl;
                e = d;
                d = c;
                c = leftRotateBy(b, 30);
                b = a;
                a = temp;
            }

            for (int t = 20; t < 40; t++) {
                temp = leftRotateBy(a, 5) + (b ^ c ^ d) + e + w[t] + kconst[1];
                temp &= 0xFFFFFFFFl;
                e = d;
                d = c;
                c = leftRotateBy(b, 30);
                b = a;
                a = temp;
            }

            for (int t = 40; t < 60; t++) {
                temp = leftRotateBy(a, 5) + ((b & c) | (b & d) | (c & d)) + e + w[t] + kconst[2];
                temp &= 0xFFFFFFFFl;
                e = d;
                d = c;
                c = leftRotateBy(b, 30);
                b = a;
                a = temp;
            }

            for (int t = 60; t < 80; t++) {
                temp = leftRotateBy(a, 5) + (b ^ c ^ d) + e + w[t] + kconst[3];
                temp &= 0xFFFFFFFFl;
                e = d;
                d = c;
                c = leftRotateBy(b, 30);
                b = a;
                a = temp;
            }

            h0 = (h0 + a) & 0xFFFFFFFFl;
            h1 = (h1 + b) & 0xFFFFFFFFl;
            h2 = (h2 + c) & 0xFFFFFFFFl;
            h3 = (h3 + d) & 0xFFFFFFFFl;
            h4 = (h4 + e) & 0xFFFFFFFFl;
        }
        return Long.toHexString(h0) + Long.toHexString(h1) + Long.toHexString(h2) + Long.toHexString(h3) + Long.toHexString(h4);

    }

    Object callService(String INPUT_DATA, String METHOD_NAME, String PARAMETER_NAME){

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 

        PropertyInfo pi = new PropertyInfo();
        pi.setName(PARAMETER_NAME);
        pi.setValue(INPUT_DATA);
        pi.setType(String.class);

        request.addProperty(pi);

        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);

            SoapObject resultsRequestSOAP = (SoapObject)envelope.bodyIn;

            String resp = resultsRequestSOAP.getPrimitivePropertyAsString("return");

            return stringToObject(resp);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    Object stringToObject(String inp){
        byte b[] = Base64.decode(inp);
        Object ret = null;
        try {
            ByteArrayInputStream bis = new ByteArrayInputStream(b);
            ObjectInput in = new ObjectInputStream(bis);
            ret = (Object) in.readObject(); 
            bis.close();
            in.close();
        } catch(Exception e) {
            System.out.println("NOT DE-SERIALIZABLE: " + e);
        }
        return ret;
    }

    String objectToString(Object obj){
        byte[] b = null;
        try {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            ObjectOutput out = new ObjectOutputStream(bos);   
            out.writeObject(obj);
            b = bos.toByteArray();
        } catch(Exception e) {
            System.out.println("NOT SERIALIZABLE: " + e);
        }         
        return Base64.encode(b);
    }

} 
```

/* 我开发了一个 android 应用程序，它连接到服务器以进行登录。对于连接，我使用了 ksoap2 库。校内网络服务存储在服务器上。该应用程序在使用 wifi 连接到服务器时工作正常。如果它没有连接到 wifi，它会显示消息“应用程序崩溃”，然后应用程序停止工作。如果未使用 wifi 连接到服务器，我只想显示一条简单的消息“应用程序未连接到服务器”。*/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:33:08.727

检查此代码，这将对您有所帮助：

在要检查网络可用性的类中初始化。

```
OtherUtils otherUtils = new OtherUtils();
if (!otherUtils.isNetworkAvailable(getApplicationContext())) {
            Toast.makeText(getApplicationContext(), "No Network Available", Toast.LENGTH_LONG).show();
            return;
        } 
```

添加以下类：

```
 public class OtherUtils{
    Context context;
    public boolean isNetworkAvailable(Context context) {
                this.context = context;

               ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
               if (connectivity == null) {
                //  boitealerte(this.getString(R.string.alertNoNetwork),"getSystemService rend null");
               } else {
                  NetworkInfo[] info = connectivity.getAllNetworkInfo();
                  if (info != null) {
                     for (int i = 0; i < info.length; i++) {
                        if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                           return true;
                        }
                     }
                  }
               }
               return false;
            }
    } 
```

这肯定会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:22:57.527

尝试这个........

```
public boolean isNet()
{
 boolean status=false;
 String line;
 try
 {
     URL url = new URL("http://www.google.com");
     BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()));
     while(( line = reader.readLine()) != null) 
     {
     }
     status=true;
}
catch (IOException ex)
{
    System.out.println("ex in isNet : "+ex.toString());
    if(ex.toString().equals("java.net.UnknownHostException: www.google.com"))
        status=false;
}
catch(Exception e)
{

}
return status;
}

if(status==true)
        {
        //Do your operation
        }
        else
            show("No Internet Connection."); 
```

当状态为真时，您的登录过程。否则显示消息“应用程序未连接到服务器”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:24:09.287

要检查互联网连接，试试这个

```
private boolean haveNetworkConnection() {
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;
} 
```

# excel - 将文件名中具有不同日期的附件添加到 Outlook 邮件

> ID：15675414
> 
> 赞同：1
> 
> 时间：2013-03-28T06:18:11.657
> 
> 标签：excel, vba, outlook

我有一个名为“用于规划的家庭音频（2013 年 3 月 28 日）的 Excel 文件。

日期每天都会改变，但文字是一样的。

如何将这些文件附加到 Outlook？

```
Sub Test()

    Dim OutApp As Object
    Dim OutMail As Object
    Set OutApp = CreateObject("Outlook.Application")
    Set OutMail = OutApp.CreateItem(0)
    With OutMail
        .To = ""
        .CC = ""
        .BCC = ""
        .Subject = "This is the Subject line"
        .Body = "Hello World!"

        .Attachments.Add ("C:\Users\Desktop\Today\Home Audio for Planning   (28-3-2013).xlsx")

        .Display
    End With
    On Error GoTo 0

    Set OutMail = Nothing
    Set OutApp = Nothing

    With Application
        .ScreenUpdating = True
        .EnableEvents = True
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T06:53:00.187

试试下面的代码： strLocation 将动态生成。您可以将此变量传递给您的附件。生成的文件名类似于**Planning_28-03-2013.xlsx 的家庭音频**

```
Sub Test()
    Dim strLocation As String

    Dim OutApp As Object
    Dim OutMail As Object
    Set OutApp = CreateObject("Outlook.Application")
    Set OutMail = OutApp.CreateItem(0)
    With OutMail
        .To = ""
        .CC = ""
        .BCC = ""
        .Subject = "This is the Subject line"
        .Body = "Hello World!"

        strLocation = "C:\Users\Desktop\Today\Home Audio for Planning" & Format(Now(), "_DD-MM-YYYY") & ".xlsx"
        .Attachments.Add (strLocation)
        .Display
    End With
    On Error GoTo 0

    Set OutMail = Nothing
    Set OutApp = Nothing

    With Application
        .ScreenUpdating = True
        .EnableEvents = True
    End With

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T11:56:57.600

简单的，

```
 .Attachments.Add ("C:\Users\Desktop\Today\Home Audio for Planning (" & FORMAT(DATE,DD-MM-YYYY)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:22:20.137

您是否尝试更改附件名称动态。例如；

```
.Attachments.Add ("C:\Users\Desktop\Today\Home Audio for Planning   (" + timeVariable  + ").xlsx") 
```

并且您可以在之前设置时间变量以匹配所需格式的日期。

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-15T14:01:37.010

Private Sub Application_ItemSend(ByVal Item As Object, Cancel As Boolean)

```
Dim strSubject As String
Dim StrSub As Integer
Dim AttachCnt As Integer

AttachCnt = Item.Attachments.Count
strSubject = Item.Subject
StrSub = Len(strSubject)
strBody = Item.Body
strBod = InStr(1, UCase(strBody), "ATTACH")
cnsolidateMsg = ""

If strBod <> 0 And AttachCnt = 0 Then
        cnsolidateMsg = cnsolidateMsg & "Attachment is Null." & vbNewLine
End If

If StrSub = 0 Then
    cnsolidateMsg = cnsolidateMsg & "Subject is Empty." & vbNewLine
End If
If UCase(Trim(strSubject)) = "FW:" Then
    cnsolidateMsg = cnsolidateMsg & "Forward mail subject is empty." & vbNewLine
End If
If UCase(Trim(strSubject)) = "RE:" Then
    cnsolidateMsg = cnsolidateMsg & "Reply mail subject is empty." & vbNewLine
End If

If cnsolidateMsg <> Empty Then
    If MsgBox(cnsolidateMsg & vbNewLine & "Are you sure you want to send the Mail?", vbYesNo + vbQuestion + vbMsgBoxSetForeground, "Check for send mail") = vbNo Then
        Cancel = True
    End If
End If 
```

结束子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-12T08:54:57.477

```
With OutMail
    .To = ""
    .BodyFormat = olFormatHTML  '---Default
    .Attachments.Add ("C:\Users\Desktop\Test.txt")
    .Display
End With 
```

如果不是`.BodyFormat = olFormatHTML`文件将附加在邮件正文中

# java - base64编码js问题

> ID：15675416
> 
> 赞同：0
> 
> 时间：2013-03-28T06:18:19.153
> 
> 标签：java, javascript, base64, aes

我正在使用 AES 来加密和解密我的密码。我要实现的是，我需要以 cookie 的形式将加密密码存储在客户端，然后当客户端再次登录到我的网站时，我需要从客户端获取加密密码并解密它会根据客户端提供的未加密密码进行检查。我面临的问题是，在加密时，我使用 java 中的 BASE64.encodeString() 将加密密码的字节数组转换为字符串，以便将其传递给客户端。但是，当我从客户端（即从 cookie 中）获得相同的字符串并尝试对其进行解密时，它给了我填充错误，即 javax.crypto.illegalBlockSizeException ：使用填充密码解密时，输入长度必须是 16 的倍数。

为什么会这样？

加密代码：

```
 Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
            cipher.init(Cipher.ENCRYPT_MODE, skeySpec, ivspec);
            byte[] plainBytes = Data.getBytes(UNICODE_FORMAT);
            byte[] encrypted = cipher.doFinal(plainBytes);
            String encryption = Base64.encodeBase64String(encrypted);
            return encryption; 
```

解密代码：

```
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, skeySpec, ivspec);
        byte[] decryptval = Base64.decodeBase64(encryptedData);
        byte[] decrypted = cipher.doFinal(decryptval);
        return new String(decrypted); 
```

错误是因为我将加密字符串传递给 js 以存储在 cookie 中。？？JS 会摆弄 base64 编码的字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:50:41.107

我**强烈**建议不要使用密码来存储/传输密码。

哈希函数是一个更安全的想法。Cipher 和 Hash 之间的区别在于 Cipher 是可逆的，而 Hash 是一种方式（Plaintext -> Hashtext）。以 a) 明文或 b) 加密的形式将用户密码存储在服务器上是安全方面的一大禁忌。

另一方面，哈希不能反转；（至少理论上）

使用`MessageDigest`该类可以轻松完成简单的哈希

获取哈希可以非常简单：

```
Message Digest md = MessageDigest.getInstance("MD5");
md.digest(input.getBytes()); 
```

然后，客户端可以散列明文密码以发送到服务器。然后，服务器可以比较哈希值以进行身份​​验证并将会话令牌返回给用户，用户可以在会话的其余部分使用该令牌，而无需在各处传输密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:21:36.880

尝试在加密时使用以下方法将字节转换为字符串 -

```
public static String bytesToString(byte[] bytes) {
    HexBinaryAdapter adapter = new HexBinaryAdapter();
    String s = adapter.marshal(bytes);
    return s;
} 
```

所以，而不是 -

```
String encryption = Base64.encodeBase64String(encrypted); 
```

采用

```
String encryption = bytesToString(encrypted); 
```

同样，在解密期间使用此方法 -

```
public static byte[] hexToBytes(String hexString) {
    HexBinaryAdapter adapter = new HexBinaryAdapter();
    byte[] bytes = adapter.unmarshal(hexString);
    return bytes;
} 
```

那是 -

```
byte[] decryptval = hexToBytes(encryptedData); 
```

# c++ - 二维 RMQ 范围树

> ID：15675417
> 
> 赞同：1
> 
> 时间：2013-03-28T06:18:21.890
> 
> 标签：c++, rmq, range-tree

嗨，我正在尝试为 rmq-ing 实现 2D 范围树，这是我的代码，我认为它不够高效，有什么我可以做的优化。

> ls 包含在每个节点上排序的 y 列表
> 
> rt 包含一个段树
> 
> p.fi.fi 包含 x 坐标
> 
> p.fi.se 包含 y 坐标
> 
> p.se 包含点的 id
> 
> loc 包含每个 id 的 x 节点和 y 节点

```
 vector<pii> ls[400005];
    vector<int> rt[400005];
    pair<pii,int> p[100005];

    vector<pii> loc[100005];

    inline void merge(int id,vector<pii> &res,vector<pii> &a,vector<pii> &b)
    {
        int la = 0;
        int lb = 0;
        int sa = SIZE(a);
        int sb = SIZE(b);
        while(la < sa || lb < sb)
        {
            if (la >= sa) {res.pb(b[lb]);loc[b[lb].se].pb(mp(id,SIZE(res)-1));lb++;}
            else if (lb >= sb) {res.pb(a[la]);loc[a[la].se].pb(mp(id,SIZE(res)-1));la++;}
            else
            {
                if (a[la] < b[lb]) {res.pb(a[la]);loc[a[la].se].pb(mp(id,SIZE(res)-1));la++;}
                else {res.pb(b[lb]);loc[b[lb].se].pb(mp(id,SIZE(res)-1));lb++;}
            }
        }
    }

    inline void build_x(int n,int l,int r)
    {
        if (l == r)
        {
            ls[n].clear();
            ls[n].pb(mp(p[l].fi.se,p[l].se));
            rt[n].assign(SIZE(ls[n])<<2,0);
            loc[p[l].se].pb(mp(n,0));
            return;
        }
        int m = (l+r)>>1;
        build_x((n<<1),l,m);
        build_x((n<<1)+1,m+1,r);
        ls[n].clear();
        merge(n,ls[n],ls[(n<<1)],ls[(n<<1)+1]);
        rt[n].assign(SIZE(ls[n])<<2,0);
    }

    inline int query_y(int nx,int n,int l,int r,int ly,int ry)
    {
        if (ly > ls[nx][r].fi || ry < ls[nx][l].fi) return 0;
        if (ly <= ls[nx][l].fi && ls[nx][r].fi <= ry)
        {
            return rt[nx][n];
        }
        int res = 0;
        int m = (l+r)>>1;
        if (ly <= ls[nx][m].fi) MAX(res,query_y(nx,(n<<1),l,m,ly,min(ls[nx][m].fi,ry)));
        if (ls[nx][m+1].fi <= ry) MAX(res,query_y(nx,(n<<1)+1,m+1,r,max(ls[nx][m+1].fi,ly),ry));
        return res;
    }

    inline int query_x(int n,int l,int r,int lx,int rx,int ly,int ry)
    {
        if (lx > p[r].fi.fi || rx < p[l].fi.fi) return 0;
        if (lx <= p[l].fi.fi && p[r].fi.fi <= rx)
        {
            return query_y(n,1,0,SIZE(ls[n])-1,ly,ry);
        }
        int res = 0;
        int m = (l+r)>>1;
        if (lx <= p[m].fi.fi) MAX(res,query_x((n<<1),l,m,lx,min(p[m].fi.fi,rx),ly,ry));
        if (p[m+1].fi.fi <= rx) MAX(res,query_x((n<<1)+1,m+1,r,max(p[m+1].fi.fi,lx),rx,ly,ry));
        return res;
    }

    int nx;

    inline void update_y(int n,int l,int r,int fy,int v)
    {
        if (l == r)
        {
            MAX(rt[nx][n],v);
            return;
        }
        int m = (l+r)>>1;
        if (fy <= m) update_y((n<<1),l,m,fy,v);
        else update_y((n<<1)+1,m+1,r,fy,v);
        rt[nx][n] = max(rt[nx][(n<<1)],rt[nx][(n<<1)+1]);
    } 
```

如果代码是一团糟，我很抱歉，因为这是我第一次实现范围树

我当前的实现运行了大约 4 秒，但我需要它运行不到 3 秒，这是我的完整 [实现](http://ideone.com/YYpHqv)

谢谢 ：）

# .net - Intellisense 没有列出来自程序集参考的 Gherkin 语句

> ID：15675423
> 
> 赞同：0
> 
> 时间：2013-03-28T06:18:46.307
> 
> 标签：.net, assemblies, specflow, gherkin

Intellisense 没有列出来自程序集参考的 Gherkin 语句

例如：在项目 A “Specific.feature”中

项目 B - 作为项目参考“Commons.feature”包含在 A 中当我单击“<element>”时

在“Specific.feature”文件中，如果我执行智能感知，那么我看不到 [我点击“<element>”]

-提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:41:16.643

我也很难看到这个问题，但请确保您拥有最新版本的[SpecFlow](http://visualstudiogallery.msdn.microsoft.com/9915524d-7fb0-43c3-bb3c-a8a14fbd40ee)（两天左右），并且您的带有[步骤定义的程序集是 app.config 中的引用](https://github.com/techtalk/SpecFlow/wiki/Use-Bindings-from-External-Assemblies)

# jquery - 使用jquery在alertbox onclick事件中显示数组值（动态）

> ID：15675424
> 
> 赞同：0
> 
> 时间：2013-03-28T06:18:47.497
> 
> 标签：jquery

我在下拉列表中填充了一个数组。

单击我想在警报框中显示**colorList[i].Color的项目。**

演示：http: [//jsfiddle.net/Xz9Hz/](http://jsfiddle.net/Xz9Hz/)

**HTML：**

```
<div>   
<div id="DynaLoad">
</div>  
</div> 
```

**查询：**

```
$(document).ready(function() {
var colorList = [
    { Color: "#FFFFFF", Name: "White"},
    { Color: "#202020", Name: "Grey"},
    { Color: "#DE2341", Name: "Red"},
];

    $('#DynaLoad').append("<select id='cList'></select>");
    for (i = 0; i < colorList.length; i++) {
    $("#cList").append("<option class='clr'>" +
    colorList[i].Name + "</option>");

    // Want to alert colorList[i].Color onClick of the particular selection

}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:22:28.077

在创建选择列表后添加：

```
 $('#cList').change(function() {
      alert($(this).val());
    }); 
```

[http://jsfiddle.net/Xz9Hz/1/](http://jsfiddle.net/Xz9Hz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:24:26.837

[您可以使用on()](http://api.jquery.com/on/)在 cList 上绑定更改事件，因为 select 是通过脚本动态添加的，并且可以安全地使用 on。

**[现场演示](http://jsfiddle.net/Xz9Hz/2/)**

```
$('#DynaLoad').on("change", "#cList", function () {
    alert($(this).val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:31:11.323

您可以将更改事件与 jquery 中的 live 绑定。

```
 $(function(){
            $("#DynaLoad").live("change",function(){
               alert($(this).val()); 
            });
        }) 
```

# c# - CS1061：“ASP.station_pages_stationfield_aspx”不包含“resizeIframe”的定义

> ID：15675425
> 
> 赞同：1
> 
> 时间：2013-03-28T06:18:48.733
> 
> 标签：c#, javascript, asp.net

我正在调用简单的 JavaScript 方法，但不知道为什么会出现此错误

```
 <iframe height="100px;"  onload="resizeIframe(this)" runat="server" id="frameDayLeft"
                    scrolling="no" style="border: none; width: 250px" frameborder="0"></iframe> 
```

这是详细错误：

```
Compiler Error Message: CS1061: 'ASP.station_pages_stationfield_aspx' does not contain a definition for 'resizeIframe' and no extension method 'resizeIframe' accepting a first argument of type 'ASP.station_pages_stationfield_aspx' could be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:21:53.460

其由于`runat="server"`。

它没有在客户端 [Javascript 函数] 找到函数，但它试图在服务器端 [在 .cs 页面上] 找到它。

这就是为什么会出现错误。

在代码隐藏中试试这个东西>>

```
frameDayLeft.Attributes.Add("onload", " resizeIframe(this)"); 
```

这样做>>

```
<script runat="server">
    void contentFrame_onLoadServer(object sender, EventArgs e)
    {
        if (!IsPostBack)
            contentFrame.Attributes.Add("onLoad", "contentFrame_onLoadClient();");
    }
</script>
<script type="text/javascript">
    function contentFrame_onLoadClient() {
        resizeFrame(document.getElementById('<%=contentFrame.ClientID %>'));
    }
    function resizeFrame(element) {
        alert(element); // do your logic here
    }
</script>
<iframe 
    runat="server" 
    id='contentFrame' 
    name='contentFrame' 
    width="500" 
    onload="contentFrame_onLoadServer"
    /> 
```

# parsing - 什么是“主要表达”？

> ID：15675427
> 
> 赞同：4
> 
> 时间：2013-03-28T06:18:50.337
> 
> 标签：parsing, powershell

在 PowerShell 语言规范中，语法有一个术语称为“主表达式”。

```
主要表达式：
    价值
    会员访问
    元素访问
    调用表达式
    后增量表达式
    减量后表达式

```

从语义上讲，主要的表达方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:49:07.150

据我了解，这有两个部分：

1.  形式文法分解诸如表达式之类的东西，因此运算符优先级是隐含的。

    例如。如果语法有

    ```
    expression:
      value
      expression * expression
      expression + expression
      … 
    ```

    需要有一个单独的机制来定义`*`具有比`+`. 当使用工具直接将语法转换为分词器/解析器时，这一点变得很重要。¹

2.  有很多不同的特定规则（考虑 PowerShell 中的运算符数量），使用更少的规则会更难理解，因为每个规则都会很长。

* * *

¹我怀疑 PowerShell 不是这种情况，因为它对上下文非常敏感（快速与命令模式，然后考虑调用非内置可执行文件）。但是这种跨语言的语法往往有很多共同点，所以风格也可以继承（不要重新发明轮子）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:32:25.350

我对它的理解是，表达式是命令/参数和/或运算符/操作数的排列，它们一起将执行并影响一个动作或产生一个结果（即使它是 $null），而不是可以分配给一个变量或向下发送管道。术语“主表达式”用于将整个表达式与可能包含在其中的任何子表达式 $() 区分开来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-19T15:12:48.740

我非常有限的经验表明，主要是指不能以多种方式解析的表达式（或子表达式），无论优先级或关联性如何。它们有足够多的句法锚，它们实际上是不可协商的——例如，ID '(' ID ')' 只能匹配它。括号使其得到保证，并且没有运算符允许对优先级做出任何决定。

在匹配表达式树时，通常在“primary_expr”规则下拥有一组这些子表达式。任何子表达式都可以以任何你喜欢的方式匹配，因为它们都完全由语法决定。之后的所有内容都必须在语法中仔细排序，以保证正确的优先级和关联性。

[这里](http://www.craftinginterpreters.com/parsing-expressions.html)有一些对这种解释的支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:16:24.740

认为 $( 很多语句 ) 就像一个复杂的表达式，在 powershell 中大多数东西都可以是像 $a = if ($y) { 1 } else { 2} 这样的表达式，所以主要表达式可能是经典表达式的最低公分母一个返回值的单一事物，无论是显式值，调用某物..从变量 $xy 或递增操作 $z++ 的结果中获取变量或属性，但即使是简单的数学“表达式”也不会匹配这个 4 +2 + (3 / 4 ) ，这将是一个更复杂的表达式。

所以我在想它背后的 WHY，一开始提到它可能是为了帮助确定命令/表达模式，但经过调查并不是这样。然后我想也许它可以在命令模式下作为参数显式传递，但不是这样，因为如果你将 $x++ 作为参数传递给 cmdlet，你会得到一个字符串。

我认为它可能只是表达式的最低公分母，一个构建块，所以下一个问题是语法包含哪些其他表达式，这个在哪里使用？

# javascript - 如何使用 Jquery 获取输入文本值

> ID：15675429
> 
> 赞同：1
> 
> 时间：2013-03-28T06:18:56.387
> 
> 标签：javascript, jquery, jsp

我有以下代码，在 mydata.jsp 中 q 的值为空。将 inputId 的值传递给 mydata.jsp 的正确方法是什么？

```
<input type="text" size="25" name="inputId" id="inputId" /> 
```

和 Jquery 脚本作为

```
 <script type="text/javascript">
$(function() {
    $("#inputId").autocomplete({

        source: "mydata.jsp?q="+$( "#inputId" ).val(),
        select:function(event,ui) {
            $("#hid").val(ui.item.email)
        }
    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:22:49.720

当您`$( "#inputId" ).val()`作为参数传递给 时`.autocomplete()`，您将在输入任何内容之前从该字段获取初始值。这可以解释为什么它是空的。

如果您使用自动完成的字符串版本，它可以自动将键入的值添加到 URL。请参阅文档以获取`source` [此处](http://api.jqueryui.com/autocomplete/#option-source)的字符串版本。

如果您希望 的 URL`source`是动态生成的 URL，那么您还可以传递一个函数作为`source`并且该函数中的代码可以生成 URL/替代项。[请参阅此处](http://api.jqueryui.com/autocomplete/#option-source)`source`的选项文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:37:55.310

```
 $('#inputId').keyup(function()
{
var str=$(this).val();
if(str!='')
{
  $.ajax({
      type:"GET",
      url:"mydata.jsp",
      data:"str="+str,
      success: function(data){
          alert(data);
     }

  });
}
}); 
```

像这样试试。希望它会给你一些解决方案。

# asp.net - 将数据从用户控件导出到 ASP.NET 中的 Excel 工作表

> ID：15675434
> 
> 赞同：0
> 
> 时间：2013-03-28T06:19:21.713
> 
> 标签：asp.net, user-controls, export-to-excel

我有一个包含数据的用户控件，基本上就像问题和答案（带有是或否选项）。现在我想通过单击按钮将整个数据从用户控件导出到 Excel 工作表。我怎样才能做到这一点？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:25:22.787

您将必须创建一个包含 的结构`table` `tr`，`td`然后您可以将其导出到 Excel。
否则，如果您只有一个`datatable`或`collection`类似的来源，那么您可以将其导出到 excel。
您必须写信`function`将您的收藏更改`user-control`为收藏，然后您可以将其导出到 Excel。

这是一个示例代码

```
<table id="mytable" runat="server">
    <tr ><td>1</td></tr>
    <tr><td>2</td></tr>
    </table>
    <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Button" />

 protected void Button1_Click(object sender, EventArgs e)
{
    Response.Clear();
    Response.AddHeader("content-disposition","attachment;filename=myexcel.xls");
    Response.ContentType = "application/ms-excel";
    System.IO.StringWriter sw = new System.IO.StringWriter();
    System.Web.UI.HtmlTextWriter hw = new HtmlTextWriter(sw);
    mytable.RenderControl(hw);
    Response.Write(sw.ToString());
    Response.End();

}
public override void VerifyRenderingInServerForm(Control control)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:34:21.743

这是我用来执行此操作的代码。

```
public class ExcelUtility
{
    public static void ToExcel(object dataSource)
    {
        GridView grid = new GridView { DataSource = dataSource };
        grid.DataBind();

        StringBuilder sb = new StringBuilder();
        foreach (TableCell cell in grid.HeaderRow.Cells)
            sb.Append(string.Format("\"{0}\",", cell.Text));
        sb.Remove(sb.Length - 1, 1);
        sb.AppendLine();

        foreach (GridViewRow row in grid.Rows)
        {
            foreach (TableCell cell in row.Cells)
                sb.Append(string.Format("\"{0}\",", cell.Text.Trim().Replace("&nbsp;", string.Empty)));
            sb.Remove(sb.Length - 1, 1);
            sb.AppendLine();
        }
        ExportToExcel(sb.ToString());
    }

    private static void ExportToExcel(string data)
    {
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.AddHeader("content-disposition", "attachment;filename=Report.csv");
        HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.GetEncoding("windows-1255");
        HttpContext.Current.Response.ContentType = "text/csv";
        HttpContext.Current.Response.Write(data);
        HttpContext.Current.Response.End();
    }
} 
```

# xpages - 思杰阻止 ext 库 xpages

> ID：15675441
> 
> 赞同：0
> 
> 时间：2013-03-28T06:20:43.157
> 
> 标签：xpages, citrix-access-gateway

我正在部署一个使用 xpages ext 库的 xpages 8.5.3 应用程序。

该应用程序在内部运行良好，但对于我们的 ipad 用户来说，他们需要通过 citrix 网关才能访问它。网关似乎不允许几个文件通过。我们得到错误。

无法加载“extlib.dijit.DynamicContent”

网络人员发现了一些细节，表明它可能是在 Java 脚本中定义路径的方式，一些使用 ()，另一些使用 []。我需要知道您在 domino 中使用哪一个来访问内置的 ext 脚本库。有人知道吗？

[http://support.citrix.com/article/CTX122319](http://support.citrix.com/article/CTX122319)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:03:45.630

我有同样的问题。我最终将应用程序发布为应用程序而不是网站。这是应用程序部署方式的变化，但它似乎有效。我知道，不是您要寻找的答案...如果您确实找到了答案，我很想听到它。

# asp.net - 在 IIS 中托管时不应用字体

> ID：15675445
> 
> 赞同：0
> 
> 时间：2013-03-28T06:20:56.023
> 
> 标签：asp.net, css, iis-7, font-face

我在我的 CSS 中应用了一些字体。当我从我的视觉工作室运行网站时，它们会被应用。但是当我在 IIS 中托管网站时，没有应用字体。

我正在使用 CSS3 属性 font-face 来加载字体文件。

我用谷歌搜索了很多，但我没有找到任何解决方案。

任何人都可以在这里帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:20:56.023

如果您遇到类似问题，请尝试在 IIS MIME 类型中添加 .woff 和 .svg 扩展名。

默认情况下，IIS 中的 MIME 类型配置为传递 EOT（IE 使用的）和 TTF 文件。但不会提供 WOFF (Firefox) 和 SVG (iPhone、iPad 和其他)。

打开 IIS ，转到您的 IIS 类型部分并在那里添加以下扩展名。.woff 应用程序/x-woff .svg 图像/svg+xml

# java - Selenium，如何在两个 div 标签之间提取文本

> ID：15675447
> 
> 赞同：1
> 
> 时间：2013-03-28T06:21:00.817
> 
> 标签：java, selenium, web, automation

我是使用 Selenium 在网站上执行 Web 自动化的新手，我在提取两个 div 标签之间的文本时遇到了麻烦。

这是我试图从中提取文本的 HTML 代码的片段。

```
 ...
<tr>
    <td width="150">
    <a href="https://rads.stackoverflow.com/amzn/click/com/B0099RGRT8" rel="nofollow noreferrer">
    <img height="90" border="0" width="90" alt="iOttie Easy Flex2 Windshield Dashboard Car Mount H&hellip by iOttie" src="http://ecx.images-amazon.com/images/I/51mf6Ry9J2L._SL500_SS90_.jpg">
    </a>
    <div class="xxsmall" style="margin-top: 5px">
        <a href="https://rads.stackoverflow.com/amzn/click/com/B0099RGRT8" rel="nofollow noreferrer">iOttie Easy Flex2 Windshield Dashboard Car Mount Holder Desk Stand for iPhone 5 4S 4 3GS Samsung Gal&amp;hellip</a>
        by iOttie
    </div>
    </td>
    <td style="padding-left: 10px;">
        <div>
            <div>
                <span style="margin-left:-5px; vertical-align: -1">

                </span>
                <b>
                <a href="http://www.amazon.com/gp/cdp/member-reviews/A2UQ07EFPSX78X/ref=cm_pdp_rev_title_1?ie=UTF8&sort_by=MostRecentReview#R12ATB4KTIWFV8">Bought for my wife, now I want one. Excellent Product.</a>
                </b>
                ,
                <span class="nowrap">November 30, 2012</span>
            </div>
            <div style="margin-top: 5px;">
                I bought this mount for my wife, the feedback from her was is that it was really nice and easy to use even while driving.
                <br>
                <br>
                So I "borrowed" it for a couple days, and now I am going to get one for myself. I am using it with an iPhone, but it would work fine with phones of all sizes, which is nice. If my phone size ever changes the mount will accommodate different sizes phones.
                <br>
                <br>
                The phone is very easy to insert and remove , even while driving.
                <br>
                The mount is easy to position but not loose enough that it doesn't hold the position you want.
                <br>
                <br>
                I was very impressed with the windshield mount, it is not just a typical suction cup mount. (Which always at some point…
                <a href="http://www.amazon.com/gp/cdp/member-reviews/A2UQ07EFPSX78X/ref=cm_pdp_rev_more?ie=UTF8&sort_by=MostRecentReview#R12ATB4KTIWFV8">Read more</a>
            </div>
        </div>
    </td>
</tr>
... 
```

其他 div 标签实际上也包含其他文本。

我想从中提取的是：我为我的妻子买了这个坐骑，她的反馈是它非常好用，即使在开车时也很容易使用。

```
 I bought this mount for my wife, the feedback from her was is that it was really nice and easy to use even while driving.

            So I "borrowed" it for a couple days, and now I am going to get one for myself. I am using it with an iPhone, but it would work fine with phones of all sizes, which is nice. If my phone size ever changes the mount will accommodate different sizes phones.

            The phone is very easy to insert and remove , even while driving.

            The mount is easy to position but not loose enough that it doesn't hold the position you want.

            I was very impressed with the windshield mount, it is not just a typical suction cup mount. (Which always at some point… 
```

这是我的代码：

```
String review;
try {
    review = WebElement.bucketElement.findElement(By.xpath("./td/div")).getText();
} catch (NoSuchElementException nsee) {
    review = "NA";
} 
```

这实际上从所有最里面的 div 标签中提取了所有文本，这不是我想要的。我可以使用特定的 div 标签来定位，`./td/div/div[3]`但我无法在 div 标签之间获取文本。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:19:16.163

您可以使用正则表达式作为解决方法：

```
String review;
try {
    review = WebElement.bucketElement.findElement(By.xpath("./td/div")).getText();
    review.replaceAll("(<.+>)", "");
} catch (NoSuchElementException nsee) {
    review = "NA";
} 
```

正则表达式删除所有标签和内部元素文本。只剩下第一级文本。这意味着如果您有：

`some strange<div>other text</div> text` 结果字符串将是：`some strange text`

如果您需要更复杂的正则表达式[，这里是有用的链接来测试它](http://www.regexplanet.com/advanced/java/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:11:24.887

使用 /td/div/div[3] 找到元素后，如果您在此 web 元素中执行 getText()，它将返回此 div/元素中的文本。

# c++ - 对象指针数组又返回一个值？

> ID：15675452
> 
> 赞同：0
> 
> 时间：2013-03-28T06:21:11.993
> 
> 标签：c++, arrays, object, pointers

所以我有这个指针数组，它最多指向同一个基类的 4 个对象。

```
private:
    Instance* paths[3]; 
```

如果有我想指向的对象，我会分配一个指向数组插槽的指针。如果没有什么可以指出的，则为 NULL。

我有这个设置功能来做到这一点：

```
void Instance::setNearbyObjects(Instance* north,Instance* east,Instance* south,Instance* west)
{
    paths[0]=north;
    paths[1]=east;
    paths[2]=south;
    paths[3]=west;
} 
```

我也有这个 get 函数，它只返回路径数组：

```
Instance* Instance::getPaths()
{
    return *paths;
} 
```

然后我尝试使用 for 循环循环遍历该数组以查找其中没有 NULL 的插槽。基于此，我向用户输出某些内容：

```
string nesw[4] = {"(N)orth","(E)ast","(S)outh","(W)est"};
for(int i=0;i<=(sizeof(current->getPaths());i++)
{
    if(current[i].getPaths()!=NULL)
    {
        cout<<nesw[i].c_str()<<", ";
    }
} 
```

这就是奇怪的事情开始发生的地方。因为该循环的输出是错误的，所以我编写了一个调试循环来查看路径数组中的内容： 考虑这种情况：我运行 setNearbyObjects() 函数将此数据分配给路径数组：

```
current->setNearbyObjects(NULL,objPointerA,objPointerB,NULL); 
```

然后运行此循环以将输出打印到控制台屏幕：

```
for(int i=0;i<=sizeof(current->getPaths());i++)
{
    cout<<current[i].getPaths()<<endl;
} 
```

我期望的输出是这样的：

```
00000000
ABABABAB
007E8F28
00000000 
```

但实际上是：

```
00000000
ABABABAB
007E8F28
00000001
ABABABAB 
```

路径数组的长度为 [3]，4 个插槽。为什么循环返回 5 个地址？为什么第四个地址不为空，当我确定它为空时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:24:06.477

您需要将其声明为：

```
Instance* paths[4]; 
```

如果你想要 4 个元素（编号 0 到 3）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:31:13.947

这里有多种假设会导致您出现问题。

首先，声明的数组仅包含三个元素，而不是四个。

其次，您在指针上使用 sizeof()`sizeof(current->getPaths())`并期望返回数组大小，而您得到的只是指针的大小（以字节为单位）。您可以编写一个方法来代替返回数组元素的数量，或者更好地使用向量来保存指针，因此当您需要大小时，只需检查向量的大小

```
std::vector<Instance*> paths; 
```

...

```
paths.push_back(north);
paths.push_back(east);
paths.push_back(south);
paths.push_back(west); 
```

更好的是使用共享指针向量`(std::shared_ptr)`以明确所有权并将清理代码保持在最低限度

# ios - 如何设置我们保存在文档目录中的图像名称

> ID：15675454
> 
> 赞同：1
> 
> 时间：2013-03-28T06:21:18.947
> 
> 标签：ios

我现在从图库中获取图像，该图像正在显示在应用程序中，但同时我想将该图像保存在文档目录中

为此我使用下面的代码

```
-(void)imagePickerController:(UIImagePickerController *)picker
      didFinishPickingImage : (UIImage *)image
                 editingInfo:(NSDictionary *)editingInfo
{
    selectImage.image = image;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString* path = [documentsDirectory stringByAppendingPathComponent: 
                      [NSString stringWithString: @"test.png"] ];
    NSData* data = UIImagePNGRepresentation(image);
    [data writeToFile:path atomically:YES];
    [picker dismissModalViewControllerAnimated:YES];
} 
```

现在我的问题是您可以看到我将名称命名为 test.png 但我想设置实际图像的名称。所以每次用户选择不同的图像和不同的名称都会被存储

那么如何在路径中设置图像的实际名称

请帮助谢谢你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:29:34.317

您可以使用以下两行来获取图像名称..可能会为您使用完整的..

```
NSURL *imagePath = [info objectForKey:@"UIImagePickerControllerReferenceURL"];

NSString *imageName = [imagePath lastPathComponent]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:30:17.597

您可以使用以下代码每次获取新名称来存储您的图像

```
NSError *error = nil; 
```

获取文档目录路径

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
```

抓取内容目录，该位置的所有文件

```
NSArray *contents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[paths objectAtIndex:0] error:&error]; 
```

现在获取资源数量，并通过将 1 添加到当前 Count 来创建新文件名

```
NSString *newFileName = [NSString stringWithFormat:@"Test_%d.png",[contents count]+1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:29:56.423

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

   NSURL *imagePath = [info objectForKey:@"UIImagePickerControllerReferenceURL"];

 NSString *originalImg = [imagePath lastPathComponent];

} 
```

# java - 如何更改图像按钮的背景资源以实现开/关切换

> ID：15675458
> 
> 赞同：0
> 
> 时间：2013-03-28T06:21:26.520
> 
> 标签：java, android, android-layout

我有两个电源按钮图像，一个是红色的，另一个是绿色的。我想创建一个按钮，最初将其背景资源设置为红色电源按钮。我希望它的资源在按下时变为绿色，再次单击后，我希望它再次变为红色。请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:26:24.887

使用[切换按钮](http://developer.android.com/reference/android/widget/ToggleButton.html)。[像这里](http://www.mkyong.com/android/android-togglebutton-example/)这样的许多例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:30:01.117

## 如何使用自定义开/关图形制作切换按钮

将 a`CheckBox`与自定义选择器一起使用。

这将提供在启用和禁用状态的选中和未选中图像之间切换的能力，而无需对 Java 代码进行任何编程干预。

**示例**- XML 布局：

```
<CheckBox
    android:id="@+id/my_custom_toggle"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:button="@drawable/my_selector"
/> 
```

**示例**- drawable/my_selector.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:state_checked="true"
    android:state_enabled="false"
    android:drawable="@drawable/ic_button_custom_toggle_disabled"
    />
<item
    android:state_checked="false"
    android:state_enabled="false"
    android:drawable="@drawable/ic_button_custom_toggle_disabled"
    />
<item
    android:state_checked="true"
    android:drawable="@drawable/ic_button_custom_toggle_linked"
    />
<item
    android:state_checked="false"
    android:drawable="@drawable/ic_button_custom_toggle_unlinked"
    /> 
```

为上述每个状态添加自定义 .png 图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T06:40:26.287

做这个：

```
<ToggleButton 
        android:id="@+id/toggle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/check"   //check.xml
        android:layout_margin="10dp"
        android:textOn=""
        android:textOff=""
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:layout_centerVertical="true"/> 
```

在可绘制文件夹中创建 check.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use grey -->
    <item android:drawable="@drawable/selected_image"
          android:state_checked="true" />
    <!-- When not selected, use white-->
    <item android:drawable="@drawable/unselected_image"
        android:state_checked="false"/>

 </selector> 
```

这工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T06:36:44.960

您需要在可绘制文件夹中放置两个红色和绿色的图像。

```
static int set = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final ImageButton toggle = (ImageButton) findViewById(R.id.imageButton1);

    toggle.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if(set==0)
            {
                toggle.setBackgroundResource(R.drawable.red);
                set=1;
            }
            else
            {
                toggle.setBackgroundResource(R.drawable.green);
                set=0;
            }

        }
    });
} 
```

# python - 在 Tkinter 窗口中更改标签的位置

> ID：15675469
> 
> 赞同：1
> 
> 时间：2013-03-28T06:22:34.067
> 
> 标签：python, tkinter

我正在编写一个简单的程序来提取图像（BackgroundFinal.png）并将其显示在窗口中。我希望能够按窗口上的按钮将图片向下移动 22 个像素。一切正常，除了按钮不做任何事情。

```
import Tkinter
import Image, ImageTk
from Tkinter import Button

a = 0       #sets inital global 'a' and 'b' values
b = 0

def movedown():             #changes global 'b' value (adding 22)
    globals()[b] = 22
    return

def window():               #creates a window 
    window = Tkinter.Tk();
    window.geometry('704x528+100+100');

    image = Image.open('BackgroundFinal.png');      #gets image (also changes image size)
    image = image.resize((704, 528));
    imageFinal = ImageTk.PhotoImage(image);

    label = Tkinter.Label(window, image = imageFinal);   #creates label for image on window 
    label.pack();
    label.place(x = a, y = b);      #sets location of label/image using variables 'a' and 'b'

    buttonup = Button(window, text = 'down', width = 5, command = movedown()); #creates button which is runs movedown()
    buttonup.pack(side='bottom', padx = 5, pady = 5);

    window.mainloop();

window() 
```

如果我没记错的话，按钮应该改变全局 'b' 值，从而改变标签的 y 位置。我真的很感激任何帮助，对不起我的糟糕的约定。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T06:41:19.400

你在这里有几个问题。

首先，您正在使用`pack`and `place`。通常，您应该只在容器小部件中使用 1 个几何管理器。我不建议使用`place`. 你需要管理的工作太多了。

其次，您在`movedown`构建按钮时调用回调。那不是你想做的——你想传递函数，而不是函数的结果：

```
buttonup = Button(window, text = 'down', width = 5, command = movedown) 
```

第三，`globals`返回当前命名空间的字典——其中不可能有整数键。要获取对 引用的对象的引用`b`，您需要`globals()["b"]`. 即使这样做了，更改`b`全局命名空间中的值也不会更改标签的位置，因为标签无法知道该更改。而且一般来说，如果你*需要*使用`globals`，你*可能*需要重新考虑你的设计。

这是一个简单的例子，说明我将如何做到这一点......

```
import Tkinter as tk

def window(root):
    buf_frame = tk.Frame(root,height=0)
    buf_frame.pack(side='top')
    label = tk.Label(root,text="Hello World")
    label.pack(side='top')
    def movedown():
        buf_frame.config(height=buf_frame['height']+22)

    button = tk.Button(root,text='Push',command=movedown)
    button.pack(side='top')

root = tk.Tk()
window(root)
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T00:13:32.797

感谢您的回复，但是，这并不是我真正想要的。我将在这里发布我发现对遇到同样问题的其他人最有效的内容。

本质上，在这种情况下，使用 Canvas 代替标签要好得多。使用画布，您可以使用 canvas.move 移动对象，这是一个简单的示例程序

```
# Python 2
from Tkinter import *

# For Python 3 use:
#from tkinter import *

root = Tk()
root.geometry('500x500+100+100')

image1 = PhotoImage(file = 'Image.gif')

canvas = Canvas(root, width = 500, height = 400, bg = 'white')
canvas.pack()
imageFinal = canvas.create_image(300, 300, image = image1)

def move():
    canvas.move(imageFinal, 0, 22)  
    canvas.update()

button = Button(text = 'move', height = 3, width = 10, command = move)
button.pack(side = 'bottom', padx = 5, pady = 5)

root.mainloop() 
```

我的代码可能并不完美（对不起！），但这是基本思想。希望我能帮助其他人解决这个问题

# android - 非法状态例外

> ID：15675477
> 
> 赞同：0
> 
> 时间：2013-03-28T06:23:00.107
> 
> 标签：android, arraylist, android-listview, android-arrayadapter

我已经实现了简单的列表视图，我得到了错误

```
03-28 11:24:58.148: E/ArrayAdapter(275): You must supply a resource ID for a TextView
03-28 11:24:58.156: D/AndroidRuntime(275): Shutting down VM
03-28 11:24:58.156: W/dalvikvm(275): threadid=1: thread exiting with uncaught exception   (group=0x4001d800)
03-28 11:24:58.249: E/AndroidRuntime(275): FATAL EXCEPTION: main
03-28 11:24:58.249: E/AndroidRuntime(275): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:347)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.AbsListView.obtainView(AbsListView.java:1315)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1198)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.ListView.onMeasure(ListView.java:1109)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.view.View.measure(View.java:8171)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.view.View.measure(View.java:8171)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.view.View.measure(View.java:8171)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.view.View.measure(View.java:8171)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.view.View.measure(View.java:8171)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.os.Looper.loop(Looper.java:123)
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-28 11:24:58.249: E/AndroidRuntime(275):  at java.lang.reflect.Method.invokeNative(Native Method)
03-28 11:24:58.249: E/AndroidRuntime(275):  at java.lang.reflect.Method.invoke(Method.java:521)
03-28 11:24:58.249: E/AndroidRuntime(275):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-28 11:24:58.249: E/AndroidRuntime(275):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-28 11:24:58.249: E/AndroidRuntime(275):  at dalvik.system.NativeStart.main(Native Method)
03-28 11:24:58.249: E/AndroidRuntime(275): Caused by: java.lang.ClassCastException: android.widget.RelativeLayout
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:340)
03-28 11:24:58.249: E/AndroidRuntime(275):  ... 29 more
03-28 11:24:58.249: E/AndroidRuntime(275): Caused by: java.lang.ClassCastException: android.widget.RelativeLayout
03-28 11:24:58.249: E/AndroidRuntime(275):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:340)
 03-28 11:24:58.249: E/AndroidRuntime(275):     ... 29 more
03-28 11:27:32.329: I/Process(275): Sending signal. PID: 275 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:28:02.860

Seems you try to pass a RelativeLayout to your ArrayAdapter, where it expects a TextView. At least this is, what the exceptions say.

# android - 不幸的是，应用程序已停止

> ID：15675479
> 
> 赞同：1
> 
> 时间：2013-03-28T06:23:10.320
> 
> 标签：android

`com.example.converter.MainActivity`在控制台中的此评论之后在设备 emulator-5554 上启动活动它在运行时向我显示错误*，不幸的是转换器已停止*。

请建议我该怎么做？

```
public class mainactivity extends Activity {

private EditText text;

 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

  // This method is called at button click because we assigned the name to the
  // "OnClick property" of the button
  public void onClick(View view) {
    switch (view.getId()) {
    case R.id.button1:
      RadioButton celsiusButton = (RadioButton) findViewById(R.id.radioButton1);
      RadioButton fahrenheitButton = (RadioButton) findViewById(R.id.radioButton2);
      if (text.getText().length() == 0) {
        Toast.makeText(this, "Please enter a valid number",
            Toast.LENGTH_LONG).show();
        return;
      }

      float inputValue = Float.parseFloat(text.getText().toString());
      if (celsiusButton.isChecked()) {
        text.setText(String
            .valueOf(convertFahrenheitToCelsius(inputValue)));
        celsiusButton.setChecked(false);
        fahrenheitButton.setChecked(true);
      } else {
        text.setText(String
            .valueOf(convertCelsiusToFahrenheit(inputValue)));
        fahrenheitButton.setChecked(false);
        celsiusButton.setChecked(true);
      }
      break;
    }
  }

  // Converts to celsius
  private float convertFahrenheitToCelsius(float fahrenheit) {
    return ((fahrenheit - 32) * 5 / 9);
  }

  // Converts to fahrenheit
  private float convertCelsiusToFahrenheit(float celsius) {
    return ((celsius * 9) / 5) + 32;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:26:40.473

您忘记初始化`text`EditText。

我认为你在这里是 NullPointerException`if (text.getText().length() == 0) {`

所以在使用前像这样初始化。

```
text = (EditText)findViewById(R.id.yourTextViewId); 
```

# android - 如何在Android中使用AT指令并实现CSD？

> ID：15675491
> 
> 赞同：3
> 
> 时间：2013-03-28T06:24:04.067
> 
> 标签：android, at-command

我有一个挑战：我需要在我的 Android 应用程序中实现 CSD。

Android 电话组织在这里解释 [http://ytd2525.wordpress.com/2012/10/08/android-operating-system-and-radio-interface-layer/](http://ytd2525.wordpress.com/2012/10/08/android-operating-system-and-radio-interface-layer/)。

由于Android API不包括直接使用硬件调制解调器的方法（发送AT命令并得到回复），我想我必须使用代表调制解调器的端口。

在这篇文章中，建议使用 Android端口***/dev/smd0***[中的AT 命令](https://stackoverflow.com/questions/7022525/at-command-in-android?rq=1)，但我的三星 Galaxy S III 没有这样的端口。

 *问题：有人知道如何与调制解调器交互（什么是硬件端口名称，如何发送 AT 命令，如何取回调制解调器的回复）？有什么建议么？

提前致谢。*

# firebreath - 从 firebreath 插件调用时出现 CDialog::DoModal() 问题

> ID：15675495
> 
> 赞同：0
> 
> 时间：2013-03-28T06:24:21.733
> 
> 标签：firebreath

我在 VC6 中开发了我的 ActiveX COM 组件。我已经在它上面创建了 firebreath 插件，以便能够从不同的浏览器调用 COM API。我在 ActiveX 组件中有一个 API，它弹出 CDialog UI，在 Google Chrome 浏览器上，dlg.DoModal() 函数失败。问题仅在于 Chrome 它只是在此调用时崩溃，在其他浏览器中它可以正常工作

在 Windows 7 上，它与 Google Chrome 一起使用的问题也在于 Windows XP。

请就这个问题给我一些反馈。

我在这里附上了一些代码片段，以了解我正在尝试做的事情

Firebreath 插件代码（插件名称为 FBTest）：

```
bool FBTest::onWindowAttached(FB::AttachedEvent *evt, FB::PluginWindow *piw)
 {
 // The window is attached; act appropriately   
try {

    /* Now that we have the plugin window, create the ActiveX container
       window as a child of the plugin, then create the ActiveX control
        as a child of the container.
    */

    FB::PluginWindowWin* pwnd = piw->get_as<FB::PluginWindowWin>();
    if(pwnd != NULL)
    {
        HWND hWnd = pwnd->getHWND();
        if(hWnd)
        {               
            // Create the ActiveX control container
            RECT rc;
            ::GetClientRect(hWnd, &rc);
            m_fbTestWin.Create(hWnd, &rc, 0, WS_VISIBLE|WS_CHILD);

            CComPtr<IUnknown> spControlTest;

                            //ETESTPROGID is prog id of activex component
            HRESULT hrTest = m_fbTestWin.CreateControlEx(ETESTPROGID, NULL, NULL, &spControlTest, GUID_NULL, NULL);

            if(SUCCEEDED(hrTest) && (spControlTest != NULL))
            {
                spControlTest.QueryInterface(&m_eTestAxCtl);
                g_eTestAxCtl = m_eTestAxCtl;
                if (m_eTestAxCtl)
                {
                    //TODO: should we throw a FB exception here?
                }
            }               
        }
    }
} catch(...) {
    //TODO: should we throw a FB exception here?
}
  return false;
}

void FBTest::TestFunc()
{   
    //hThread = (HANDLE)_beginthreadex(NULL, 0,&FBTest::Start, (void*)&m_eTestAxCtl, 0, &ThreadId);

if(m_eTestAxCtl)
{
    try {
        long nCode = -1;
        //This is call to API of Activex component which will popup the dialog
        HRESULT hr = m_eTestAxCtl->TestFunc();
        //return nCode;         
    }
    catch(...) {

    }
} 
```

}

Activex 组件代码：

```
STDMETHODIMP CTest::TestFunc()
{
//CTestDlg is ATL Dialog Object
    CTestDlg TestDlg;

//At this call Google chrome is crashing
if(!TestDlg.DoModal())
    return S_FALSE;

return S_OK;
} 
```

我正在从一个 HTML 页面调用插件的 TestFunc() API，它向我展示了 IE 和 firefox 浏览器中的 dailog，但 Chrome 崩溃了。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:35:21.073

由于您没有提供有关何时或如何调用它的信息，因此很难确定，但我猜您是在主线程上调用 DoModal 。这将导致主线程阻塞。

您绝***不能***阻塞插件中的主线程。

尝试在不同的线程上调用它。

# php - 如何更新 TWIG 模板中的数组？

> ID：15675499
> 
> 赞同：1
> 
> 时间：2013-03-28T06:24:51.780
> 
> 标签：php, jquery, html, ajax, twig

目前，我正在使用 TWIG 显示我的所有信息（文章和评论）。所以，我首先从我的数据库中检索文章和评论并将其传递到一个数组中。然后将其传递到我的树枝模板中。然后，我加载每篇文章，并在每篇文章的下方加载该文章的评论。这些评论和与之相关的按钮（又名新评论按钮）都是在我的宏中创建的。

宏只获取包含我需要显示的注释的数组。它显示文章的评论，并为每条评论创建一个回复按钮，因此用户可以回复任何评论或开始一个新线程。

我使用 AJAX 和 jQuery 将新评论存储在我的数据库中，而无需刷新页面。但是，我需要想办法在*不*刷新整个页面的情况下**显示**新评论。有人知道如何在 TWIG 中执行此操作吗？

 *我现在使用 TWIG 面临的问题是如何异步发布评论。我最初在加载页面时加载了当前评论数据库的数组。但是，如果我的数据库更新，我如何用它更新我的数组。有什么建议么？每当添加新评论时，我都在考虑抓取我的数组，这就是为什么我的问题是*“如何在 TWIG 模板中检索数组？”* ，但我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:17:01.197

您的问题不是 twig 问题，twig only 是一个模板引擎，仅用于页面的初始渲染。当您从 ajax 保存成功响应时，您应该做的是使用 jquery 创建一个新的 DOM 元素并使用相同的模式将其添加到页面中。就像是：

```
<script>
$.post(
    TheUrlThatYouPostTo,
    TheDataThatYouPassWithThePost,
    function(returnData, textStatus){
        //assuming that your return data is an array conatianing a boolean successful key
        if(returnData.successful){
            $('#YourCommentsWrapperElement').append('<div class="comment">#some other elements containing the posted values</div>');
        }
    }
);

</script> 
```

或者，如果您希望 twig 为您生成评论 HTML 并且您不想将其硬编码到您的 javascript 中，您可以让您通过 AJAX 帖子发布到的控制器操作返回评论的渲染版本。像这样的东西：

```
#Your Controller file
public function ajaxPostAction(Request $request){

    //Handle post data to create a new commentObject

    return array(
        'comment' => $commentObject
    );
} 
```

然后为该操作创建一个视图文件：

```
#your view for the controller action ajaxPost.html.twig
<div class="comment">
    <h3>{{comment.author}}</h3>
    <p>{{comment.content}}</p>
</div> 
```

然后您的 javascript 将只获取返回数据并将其附加到现有列表中：

```
<script>
$.post(
    TheUrlThatYouPostTo,
    TheDataThatYouPassWithThePost,
    function(returnData, textStatus){
        //Now your return data is the HTML for the new comment so just append it to the rest
        $('#YourCommentsWrapperElement').append(returnData);
    }
);

</script> 
```*

# java - 用Java读取文件并记住它停止的字节

> ID：15675501
> 
> 赞同：0
> 
> 时间：2013-03-28T06:25:13.570
> 
> 标签：java, file, byte

我必须阅读 .txt 文件。该文件包含由“，”分隔的 13 个参数。我逐行阅读，在“，”之后拆分，并将这 13 个参数写入数据库。但是有一个问题：

该文件每天都会变大一点（~ 2mb），因此逐行读取它很快就会花费很多时间。所以我想到了以下几点：

我想读取文件，然后记住文件完成的字节数，将这个“指针”写入数据库，然后下次在指针指向的字节之后开始读取。（这样我就不必再阅读我已经拥有的全部内容了）。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:27:36.167

您可以使用[Random Access File](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/RandomAccessFile.html)来执行此操作。它使您可以随机访问文件，因此，您可以从需要的任何地方开始读取文件（不一定从一开始）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:08:39.087

根据这篇文章：[http](http://bitsofinfo.wordpress.com/2009/04/15/how-to-read-a-specific-line-from-a-very-large-file-in-java/) ://bitsofinfo.wordpress.com/2009/04/15/how-to-read-a-specific-line-from-a-very-large-file-in-java/ ，`BufferedReader`有一个`skip()`可用于跳转到文件的方法（以类似于随机访问文件的方式）。

# android - 无法在 Android 中启动 Activity 组件信息和 Java 空指针异常

> ID：15675503
> 
> 赞同：1
> 
> 时间：2013-03-28T06:25:21.810
> 
> 标签：android, sqlite, nullpointerexception, android-activity, android-sqlite

我正在做一个小项目，我需要将电话号码及其各自的地址存储到`sqlite`Android 的数据库中。My`MainActivity`有一个布局，其中用户有两个选项： 1\. 他可以向数据库添加新值（电话号码和地址） 2\. 他可以通过输入电话号码来搜索地址。

这是我的主要活动：

```
public class MainActivity extends Activity {

    private static final String TABLE_CONTACTS = "contacts";
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "contactsManager";
    // Contacts Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_ADDRESS = "name";
    private static final String KEY_PH_NO = "phone_number";

    SQLiteDatabase db;

    TextView numberTextview,addressTextView,fetchedAddressTextView;
    Button buttonSave,buttonSearch;
    EditText numberEditText,addressEditText,searchEditText;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        numberTextview=(TextView)findViewById(R.id.textView1);
        numberEditText=(EditText)findViewById(R.id.editText1);
        addressTextView=(TextView)findViewById(R.id.textView2);
        addressEditText=(EditText)findViewById(R.id.editText2);
        buttonSave=(Button)findViewById(R.id.button1);
        searchEditText=(EditText)findViewById(R.id.editText3);
        buttonSearch=(Button)findViewById(R.id.button2);
        fetchedAddressTextView=(TextView)findViewById(R.id.textView3);

        try {
            String CREATE_CONTACTS_TABLE = "CREATE TABLE IF NOT EXISTS " + TABLE_CONTACTS + "("
                    + KEY_ID + " INTEGER PRIMARY KEY," + KEY_ADDRESS + " TEXT,"
                    + KEY_PH_NO + " TEXT" + ")";
            db.execSQL(CREATE_CONTACTS_TABLE);
            Toast.makeText(MainActivity.this, "table created ", Toast.LENGTH_LONG).show();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        buttonSave.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                String address=addressEditText.getText().toString();
                long number = Integer.parseInt(numberEditText.getText().toString());

                try {
                    ContentValues values = new ContentValues();
                    values.put(KEY_ADDRESS, address); // Contact Address
                    values.put(KEY_PH_NO, number); // Contact Phone

                    // Inserting Row
                    db.insert(TABLE_CONTACTS, null, values);
                    db.close();
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });

        buttonSearch.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                long phone_number=Integer.parseInt(searchEditText.getText().toString());

                try {
                    Cursor c=db.query(TABLE_CONTACTS, new String[]{
                            KEY_ADDRESS
                    },
                    KEY_PH_NO + "=" + phone_number,
                    null,
                    null,
                    null,
                    null);

                    if (c != null) {
                        c.moveToFirst();
                    }
                    fetchedAddressTextView.setText(c.toString());
                } catch (Exception e) {

                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

Logcat 跟踪：

```
03-28 11:45:12.562: E/AndroidRuntime(4079): FATAL EXCEPTION: main
03-28 11:45:12.562: E/AndroidRuntime(4079): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fivetofive/com.example.fivetofive.MainActivity}: java.lang.NullPointerException
03-28 11:45:12.562: E/AndroidRuntime(4079):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1228)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at android.os.Looper.loop(Looper.java:137)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at android.app.ActivityThread.main(ActivityThread.java:4895)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at java.lang.reflect.Method.invokeNative(Native Method)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at java.lang.reflect.Method.invoke(Method.java:511)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at dalvik.system.NativeStart.main(Native Method)
03-28 11:45:12.562: E/AndroidRuntime(4079): Caused by: java.lang.NullPointerException
03-28 11:45:12.562: E/AndroidRuntime(4079):     at com.example.fivetofive.MainActivity.onCreate(MainActivity.java:59)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at android.app.Activity.performCreate(Activity.java:5163)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-28 11:45:12.562: E/AndroidRuntime(4079):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
03-28 11:45:12.562: E/AndroidRuntime(4079):     ... 11 more 
```

该应用程序甚至没有启动。当我运行它时它崩溃了。这是我第一次`sqlite`在 android 中工作。所以请原谅任何愚蠢的错误并指出它们。

提前致谢。

**更新** 请注意：我现在已经解决了我的问题，方法是选择一个单独`DataBaseHandler`的扩展类`SQLiteOpenHelper`。我仍然不明白为什么我得到了我来到这里的错误。现在没有时间，所以如果我得到答案，稍后会回来。对于那些会遇到这个问题的人，我只想说制作`DataBaseHandler`课程有很大帮​​助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:34:28.743

你必须`extends SQLiteOpenHelper {`

请用下面的行初始化你的数据库对象

```
db = new SQLiteDatabase(); 
```

你有没有在清单中添加这一行

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

请阅读本教程

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:31:35.903

你应该在使用它之前打开你的数据库..只需在 try{} 上方放置 2 行，然后尝试让我知道发生了什么。

```
db = new SQLiteDatabase(); // pass context or activity its upon your SQLiteDatabase() class
db.open(); 
```

我想它可能会帮助你..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:30:29.413

请检查您从中获得价值吗？

```
String address=addressEditText.getText().toString();
long number = Integer.parseInt(numberEditText.getText().toString()); 
```

如果是，则更改此行：

```
ContentValues values = new ContentValues();
                    values.put(KEY_ADDRESS, address); // Contact Address
                    values.put(KEY_PH_NO, number); // Contact Phone 
```

对此

```
db.open();
ContentValues values = new ContentValues();
values.put(KEY_ADDRESS, ""+address); // Contact Address
values.put(KEY_PH_NO, ""+number); // Contact Phone 
```

因为在查询`KEY_PH_NO`中是`TEXT`

```
String CREATE_CONTACTS_TABLE = "CREATE TABLE IF NOT EXISTS " + TABLE_CONTACTS + "("
                    + KEY_ID + " INTEGER PRIMARY KEY," + KEY_ADDRESS + " TEXT,"
                    + KEY_PH_NO + " TEXT" + ")"; 
```

# asp.net - 返回复选框的值

> ID：15675508
> 
> 赞同：1
> 
> 时间：2013-03-28T06:25:39.473
> 
> 标签：asp.net

在 ASP.net 中是以下代码吗？

```
Dim r1 As Bollean = rd1.checked 
```

复选框返回什么类型的值？

然后当我输入以下代码时---

```
If Request.QueryString("r3") Then
     myReportDocument.Load(Server.MapPath("Gradewise.rpt"))
End If' 
```

它给出了以下错误 -

从字符串“”到类型“布尔”的转换无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:51:06.893

.checked property returns a boolean value.

And regarding error that you are getting - you are trying to put a string in a if statement while a condition which returns either true or false is expected.

So it should be

```
'If Request.QueryString("r3")="some string to compare" Then ... 
```

as Request.QueryString("r3") returns a String!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:26:23.343

您需要使用`Checked`属性`checkbox`来获取复选框的选中状态。rd1.checkbox 将返回`object`类型`CheckBox`

```
Dim r1 As Bollean = rd1.checkbox.Checked 
```

**编辑**为 OP 被编辑。您必须在 if 语句中给出导致布尔值的表达式。

```
If Request.QueryString("r3") == "somevalue" Then
     myReportDocument.Load(Server.MapPath("Gradewise.rpt"))
End If' 
```

# powershell - 无法从批处理文件打开第二个命令窗口

> ID：15675510
> 
> 赞同：0
> 
> 时间：2013-03-28T06:25:48.947
> 
> 标签：powershell, batch-file

我有以下命令在其他不依赖于彼此之后启动。但是，使用以下命令，我只能启动#1、#2。我的命令 #3 没有启动。我想知道我是否犯了任何错误。我没有看到第三行被执行。

1.  // 创建一个目录
2.  // 启动 adb logcat
3.  // 外壳 adb 猴子

“测试.bat”

```
mkdir c:\test_log_file  
START "powershell Window" powershell adb logcat >> "C:\Testdata.txt"              
START "Powershell Window 2" shell adb monkey -p  com.android.browser 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:56:35.517

根据您之前的问题（[如何从批处理文件打开电源外壳窗口到新窗口](https://stackoverflow.com/q/15650036/1248365)），我假设“外壳”是您可以使用的命令，而不是拼写错误。想到了两种可能：

1.  路径中有“shell”吗？如果没有，您需要提供此命令的完整路径。（可能不是答案，因为如果这是问题所在，您会收到一条弹出错误消息，告诉您 Windows 找不到“shell”。）

2.  尽管您在第二个 START 命令中将窗口命名为“Powershell Window 2”，但此命令实际上应该打开一个 cmd 窗口，而不是 powershell 窗口。当您实际上有一个名为“Powershell Window 2”的 cmd 窗口时，您是否正在寻找一个新的 powershell 窗口？

如果要启动 powershell 窗口，命令应该是：

```
START "Powershell Window 2" powershell -noexit shell adb monkey -p  com.android.browser 
```

# android - onLocationChanged 总是返回旧位置

> ID：15675513
> 
> 赞同：9
> 
> 时间：2013-03-28T06:25:56.543
> 
> 标签：android, locationmanager

我已经为我的**LocationManager**注册了位置更新，每 10 秒

```
mgr.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10 * 1000, 50, this); 
```

但是`onLocationChanged`回调每 10 秒返回一个位置，该位置（位置）超过 2 小时。而且那个时间戳永远不会改变。

**问题是：**

2 小时前，我在一个完全不同的位置（**家**），我在 wifi 上使用该设备。现在，我目前在另一个 wifi 上的其他位置（**办公室**），我的应用程序将我当前的位置显示为**home**。**昨天在家里**也发生了同样的事情，当时它显示**办公室**是我当前的位置。**当我关闭我的应用程序、打开FourSquare**应用程序并重新打开我的应用程序时，它开始工作（开始显示正确的位置） 。

**完整代码：**

```
public class LocationService extends Service implements LocationListener {

    public static double curLat = 0.0;
    public static double curLng = 0.0;
    private LocationManager mgr;
    private String best;
    private Location location;

    @Override
    public IBinder onBind(Intent arg0) {

        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        mgr = (LocationManager) getSystemService(LOCATION_SERVICE);
        best = LocationManager.NETWORK_PROVIDER;
        location = mgr.getLastKnownLocation(best);
        if (location != null) {

            dumpLocation(location);
            mgr.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                    10 * 1000, 50, this);
        }
        return START_NOT_STICKY;
        }
    }

    private void dumpLocation(Location l) {

        SimpleDateFormat s = new SimpleDateFormat("dd/MM/yyyy:hh:mm:ss",
                Locale.ENGLISH);
        String format = s.format(l.getTime());
        //The above time is always 28/03/2013:09:26:41 which is more than 2 hrs old
        curLat = l.getLatitude();
        curLng = l.getLongitude();
    }

    @Override
    public void onLocationChanged(Location location) {

        dumpLocation(location);
    }

    @Override
    public void onProviderDisabled(String provider) {

    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }
} 
```

以这种方式在**Activity中启动：**

```
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
Intent i = new Intent(this, LocationService.class);
pi = PendingIntent.getService(this, 0, i,
        PendingIntent.FLAG_UPDATE_CURRENT);
am.cancel(pi);
am.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
        SystemClock.elapsedRealtime(), 10000, pi); 
```

**清单中的权限：**

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

我现在可以通过打开其他一些基于位置的应用程序（例如 Maps、Navigator、Foursquare 等）来获得正确的位置，但是为什么我的应用程序无法从提供商那里获得新的/全新的修复。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T06:36:16.260

由于这条线，您的位置越来越旧

```
 location = mgr.getLastKnownLocation(best); 
```

因为如果没有启用 GPS，它会显示旧位置。所以删除这个代码它会像冠军一样工作你也可以参考这个库

[https://github.com/nagendraksrivastava/Android-Location-Tracking-Library](https://github.com/nagendraksrivastava/Android-Location-Tracking-Library)

根据您的评论，我已经编辑了答案，好的，让我逐行解释 `location = mgr.getLastKnownLocation(best);`它会给您最后知道位置的对象，然后如果条件，它将进入内部，它将调用转储位置并获取最后的位置数据，然后您调用

```
mgr.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                10 * 1000, 50, this); 
```

但假设 GPS 提供程序被禁用，那么它将不会获取新位置，因此您只会获得旧位置。所以要么你可以改变它

```
if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))
                   {
                    locationManager.requestSingleUpdate(LocationManager.GPS_PROVIDER,new NagendraSingleLocationListener(),null);
                   }
                   else
                   {
                       locationManager.requestSingleUpdate(LocationManager.NETWORK_PROVIDER,new NagendraSingleLocationListener(),null);
                   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:47:12.930

我认为因为您立即取消了待处理的意图，因此 requestLocationUpdate 在您取消之前不会开始更新。你为什么不睡觉可能会在取消之前等待 2 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-13T14:01:40.347

根据我的经验，即使 gps 没有足够的卫星工作，android 也会在您请求更新时为您提供位置。因此，即使 gps 已打开 - 如果您在内部或位置不好（例如在桥下），android 也会为您提供旧的修复。确实可以是一个很老的人。

我发现唯一能 100% 工作的是**一般不使用第一个位置**，而只记住时间。当新职位到达时，您可以**检查时间是否比上一个新**。如果您只想使用非常精确的位置，您可能还需要检查 location.getAccuracy() 是否低（越低越好）。

我使用 gps 来获取我的肥皂接口时间戳，因为 android 时钟有时会非常关闭，这是我从 gps 获取有效时间的唯一方法。

# vb.net - 如何在 vb.net 中将文件从一个文件夹复制到另一个文件夹时设置进度条？

> ID：15675515
> 
> 赞同：0
> 
> 时间：2013-03-28T06:26:03.727
> 
> 标签：vb.net, copy, progress-bar

目前我正在 vb.net 中做项目，我想在将文件从一个文件夹复制到另一个文件夹时设置进度条。并且进度条应根据复制的文件量向完成移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-22T04:50:51.680

不是那么新的问题，但这里有一个答案。以下代码将达到预期的结果，从而跟踪单个文件的进度。它使用 1 MiB 缓冲区。根据您的系统资源，您可以相应地调整缓冲区以调整传输性能。

**概念：**在读取/写入每个字节时对其进行计数，并使用文件流根据源文件的总大小报告进度。

```
'Create the file stream for the source file
Dim streamRead as New System.IO.FileStream([sourceFile], System.IO.FileMode.Open)
'Create the file stream for the destination file
Dim streamWrite as New System.IO.FileStream([targetFile], System.IO.FileMode.Create)
'Determine the size in bytes of the source file (-1 as our position starts at 0)
Dim lngLen as Long = streamRead.Length - 1
Dim byteBuffer(1048576) as Byte   'our stream buffer
Dim intBytesRead as Integer    'number of bytes read

While streamRead.Position < lngLen    'keep streaming until EOF
    'Read from the Source
    intBytesRead = (streamRead.Read(byteBuffer, 0, 1048576))
    'Write to the Target
    streamWrite.Write(byteBuffer, 0, intBytesRead)
    'Display the progress
    ProgressBar1.Value = CInt(streamRead.Position / lngLen * 100)
    Application.DoEvents()    'do it
End While

'Clean up 
streamWrite.Flush()
streamWrite.Close()
streamRead.Close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T07:10:05.607

**使用的概念**：在 中获取`count of files`，`source directory`然后每当`copying`a`file`从`source folder`增加`destination folder`a`variable`以跟踪转移了多少`files`。现在`files`使用以下公式计算转移百分比，

```
% of files transferred = How many files Transferred * 100 / Total No of files in source folder 
```

然后在获得 之后`% of files transferred`，使用它来更新进度条的值。

试试这个代码：`Tested with IDE`

```
 Dim xNewLocataion = "E:\Test1"

        Dim xFilesCount = Directory.GetFiles("E:\Test").Length
        Dim xFilesTransferred As Integer = 0

        For Each xFiles In Directory.GetFiles("E:\Test")

            File.Copy(xFiles, xNewLocataion & "\" & Path.GetFileName(xFiles), True)
            xFilesTransferred += 1

            ProgressBar1.Value = xFilesTransferred * 100 / xFilesCount
            ProgressBar1.Update()

        Next 
```

# jquery - jquery文件上传预览大拇指

> ID：15675525
> 
> 赞同：4
> 
> 时间：2013-03-28T06:26:40.900
> 
> 标签：jquery, jquery-file-upload

在[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)的示例中，文件上传器会创建您要上传为缩略图的图像的预览。

我知道如何在上传后显示缩略图，因为`done:`回调会返回有关您上传的文件的一些数据，但是在没有实际上传文件的情况下在上传之前如何完成（我认为如果不先上传，这是不可能的）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-25T17:09:52.273

我发现这方面的文档非常参差不齐。我通过查看[此演示](http://blueimp.github.io/jQuery-File-Upload/basic-plus.html)的源代码发现了这一点。

首先，您需要包含以下依赖项：

*   jQuery
*   jquery.ui.widget
*   加载图像（来自[https://github.com/blueimp/JavaScript-Load-Image](https://github.com/blueimp/JavaScript-Load-Image)）
*   加载图像元（来自[https://github.com/blueimp/JavaScript-Load-Image](https://github.com/blueimp/JavaScript-Load-Image)）
*   canvas-to-blob（来自[https://github.com/blueimp/JavaScript-Canvas-to-Blob](https://github.com/blueimp/JavaScript-Canvas-to-Blob)）
*   jquery.iframe 传输
*   jquery.fileupload
*   jquery.fileupload 进程
*   jquery.fileupload-image

然后你可以像这样（在 CoffeeScript 中）将预览图像插入到 DOM 中：

```
$(...).fileupload().on 'fileuploadprocessalways', (e, data) ->
  file = data.files[data.index]
  if file.preview?
    myContainer.append(file.preview) 
```

如果它不起作用，请仔细检查您是否包含所有依赖项的最新版本。

# c# - 无法将类型“System.EventHandler”隐式转换为“System.EventHandler”' I am trying to fade a text box within specified time. This code works on Windows Phone but it doesn't work in a Windows 8 application. I made changes to fix as many errors as 问问题 问问题 2013-03-28T06:26:58.087 5328 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am trying to fade a text box within specified time. This code works on Windows Phone but it doesn't work in a Windows 8 application. I made changes to fix as many errors as possible. but I couldn't resolve one of them: cannot implicitly convert type 'System.EventHandler' to 'System.EventHandler" arises on the expression sb.Completed += ehl. The full function is below: public static void Fade(UIElement target, double ValueFrom, double ValueTo, double Duration) { DoubleAnimation da = new DoubleAnimation(); da.From = ValueFrom; da.To = ValueTo; da.Duration = TimeSpan.FromSeconds(Duration); da.AutoReverse = false; Windows.UI.Xaml.Media.Animation.Storyboard.SetTargetProperty(da, "opacity"); Windows.UI.Xaml.Media.Animation.Storyboard.SetTarget(da, target); Windows.UI.Xaml.Media.Animation.Storyboard sb = new Windows.UI.Xaml.Media.Animation.Storyboard(); sb.Children.Add(da); EventHandler ehl = null; ehl = (s, args) => { sb.Stop(); sb.Completed+= ehl; //error occurs here target.Opacity = ValueTo; }; sb.Completed += ehl; //error occurs here sb.Begin(); } inputTextArea losing focus in IE8 I have a jsf 2.0 application in which I have an input text box and a number characters left counter at the bottom of input text box which I am updating through javascript. <h:inputtextarea class="myInputTextClass" value="#{bean.text}" style="resize: none;width:445px;" type="text" maxlength="255" cols="60" rows="3" onfocus="countChars($('.myInputTextClass'),255)" onkeyup="countChars($('.myInputTextClass'),255);" onkeydown="countChars($('.myInputTextClass'),255);">255 Script: function countChars(element, max) { calculateCount(element.val().length, max); if (element.val().length > max) { element.val(element.val().substring(0, max)); } } function calculateCount(length, max){ var count = max - length; if(count < 0){ count = 0; } document.getElementById('char_count').innerHTML = count ; } The problem is after typing in somewhere around 150 characters in the input text box, the focus shifts back to top of inputtextbox. However, the cursor remains at the end as expected. I tried using the scrollTop position and focus but didn't work. Any suggestion is highly appreciated. This issue happens only in IE8, in forefox it works fine. c#windows-8 4 1 回答 1 This answer is useful 2 Completed事件的类型是EventHandler，但您声明事件处理程序是类型EventHandler，而不是EventHandler。 这正是错误消息告诉您的内容，因此您应该将事件处理程序的类型更改为 EventHandler. 顺便说一句，事件处理程序sb.Completed+= ehl; 内的行似乎很奇怪。每次调用事件处理程序时，您基本上都会再次将处理程序附加到事件。 于 2013-03-28T07:48:20.123 回答 Related 2 c - C(gcc) 编译器中的增量和减量 1 android - GCM - 在不同计算机上编译时生成不同的注册 ID 4 c - 计算C中两个数字的GCD 1 postgresql - 基于首次录取日期 postgreSQL 的重新录取计数 8 css - 如何在引导程序中使用垂直对齐 3 java - 数据库创建 4 javascript - 点击时从 JQUERY 调用我的函数 2 iphone - 如何使用数量对包含对象作为数据的 NSMutableArray 进行排序 1 netbeans - 在 Netbeans jVi 中用引号或括号包围选择 1 android - 使用 ActionBarCompat 的带有 ProgressBar 的 NullPointerException Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15675528
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c#, windows-8

I am trying to fade a text box within specified time. This code works on Windows Phone but it doesn't work in a Windows 8 application. I made changes to fix as many errors as possible. but I couldn't resolve one of them: `cannot implicitly convert type 'System.EventHandler' to 'System.EventHandler<object>"` arises on the expression `sb.Completed += ehl`. The full function is below:

```
 public static void Fade(UIElement target, double ValueFrom, double ValueTo, double Duration)
    {
        DoubleAnimation da = new DoubleAnimation();
        da.From = ValueFrom;
        da.To = ValueTo;
        da.Duration = TimeSpan.FromSeconds(Duration);
        da.AutoReverse = false;

        Windows.UI.Xaml.Media.Animation.Storyboard.SetTargetProperty(da, "opacity");

        Windows.UI.Xaml.Media.Animation.Storyboard.SetTarget(da, target);

        Windows.UI.Xaml.Media.Animation.Storyboard sb = new Windows.UI.Xaml.Media.Animation.Storyboard();
        sb.Children.Add(da);

        EventHandler ehl = null;
        ehl = (s, args) =>
        {

            sb.Stop();
            sb.Completed+= ehl; //error occurs here
            target.Opacity = ValueTo;
        };
        sb.Completed += ehl; //error occurs here

        sb.Begin();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:48:20.123

[`Completed`事件](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.animation.timeline.completed)的类型是`EventHandler<object>`，但您声明事件处理程序是类型`EventHandler`，而不是`EventHandler<object>`。

这正是错误消息告诉您的内容，因此您应该将事件处理程序的类型更改为 `EventHandler<object>`.

顺便说一句，事件处理程序`sb.Completed+= ehl;` *内*的行似乎很奇怪。每次调用事件处理程序时，您基本上都会*再次将处理程序附加到事件。*</h:inputtextarea>

# javascript - inputTextArea 在 IE8 中失去焦点

> ID：15675530
> 
> 赞同：0
> 
> 时间：2013-03-28T06:27:16.807
> 
> 标签：javascript

我有一个 jsf 2.0 应用程序，其中我有一个输入文本框和一个数字字符左计数器在输入文本框的底部，我正在通过 javascript 进行更新。

```
<h:inputTextarea class="myInputTextClass"
value="#{bean.text}"
style="resize: none;width:445px;" type="text"
maxlength="255" cols="60" rows="3"
onfocus="countChars($('.myInputTextClass'),255)"
onkeyup="countChars($('.myInputTextClass'),255);"
onkeydown="countChars($('.myInputTextClass'),255);"
/>

<span id="char_count" style="font-style:italic;margin-left:-14px">255</span> 
```

脚本：

```
function countChars(element,  max) {

  calculateCount(element.val().length, max);
  if (element.val().length > max) { 
    element.val(element.val().substring(0, max));
   }

  }

function calculateCount(length, max){
 var count = max - length;
    if(count &lt; 0){
    count = 0;
    }
   document.getElementById('char_count').innerHTML =  count ;
} 
```

**问题是在输入文本框中输入大约 150 个字符后，焦点转移回输入文本框的顶部。但是，光标仍按预期保留在末尾。**

我尝试使用 scrollTop 位置和焦点，但没有奏效。任何建议都受到高度赞赏。

这个问题只发生在 IE8 中，在 forefox 中可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:27:36.723

这可能不是您正在寻找的答案，但多年来，这个脚本对我很有帮助：

JavaScript：

```
/* This script and many more are available free online at
The JavaScript Source!! http://javascript.internet.com
Created by: Steve | http://jsmadeeasy.com/ 
http://www.javascriptsource.com/forms/character-counter.html */
function getObject(obj) {
  var theObj;
  if(document.all) {
   if(typeof obj=="string") {
     return document.all(obj);
   } else {
     return obj.style;
   }
 }
 if(document.getElementById) {
   if(typeof obj=="string") {
     return document.getElementById(obj);
   } else {
     return obj.style;
   }
 }
 return null;
}

function toCount(entrance,exit,text,characters) {
 var entranceObj=getObject(entrance);
 var exitObj=getObject(exit);
 var length=characters - entranceObj.value.length;
 if(length <= 0) {
   length=0;
   text='<span class="disable"> '+text+' </span>';
   entranceObj.value=entranceObj.value.substr(0,characters);
 }
 exitObj.innerHTML = text.replace("{CHAR}",length);
} 
```

HTML 和 PHP：

```
(<span id="sBann">'.(255 - strlen($values['synopsis'])).' characters left</span>)<br />
<textarea name="synopsis" id="synopsis" rows="3" cols="70" maxlength="255" wrap="soft" onkeyup="toCount(\'synopsis\',\'sBann\',\'{CHAR} characters left\',255);">'.htmlentities($values['synopsis']).'</textarea> 
```

# asp.net - Load data in DropdownList by category wise

> ID：15675531
> 
> 赞同：0
> 
> 时间：2013-03-28T06:27:17.140
> 
> 标签：asp.net, drop-down-menu

in my ASP.net web application i want load in dropdownlist box by category wise like below screenshot.. How can i do it?? I gonna use two table in DB One is to Store Available Course Second Table is Number of Degree like below

![enter image description here](../Images/4a0f84dff8f0b61ca3fde6913b17f5c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:42:21.233

您可以在下拉菜单中简化使用 optGroup ...

请点击以下链接，它可能对解决您的问题有用..

[Asp.Net DropDownList 的组选项](http://mpurna.blogspot.in/2012/01/group-options-for-aspnet-dropdownlist.html)

享受编码......

# android - 使用用户移动在地图 Api V2 上绘图

> ID：15675532
> 
> 赞同：1
> 
> 时间：2013-03-28T06:27:20.160
> 
> 标签：android, google-maps-android-api-2

当用户开始向任何方向移动时，我想在运行时在地图上绘制线条（路径）。

现在我可以像这样静态地在两点之间划一条线-

```
public void onCreate(Bundle savedInstanceState) 
{
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);

 md = new GMapV2Direction();
 mMap = ((SupportMapFragment)getSupportFragmentManager()
                .findFragmentById(R.id.map)).getMap();

 LatLng coordinates = new LatLng(13.685400079263206, 100.537133384495975);      
 mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(coordinates, 16));

 mMap.addMarker(new MarkerOptions().position(fromPosition).title("Start"));
 mMap.addMarker(new MarkerOptions().position(toPosition).title("End"));

 Document doc = md.getDocument(fromPosition, toPosition, GMapV2Direction.MODE_WALKING);
 int duration = md.getDurationValue(doc);
 String distance = md.getDistanceText(doc);
 String start_address = md.getStartAddress(doc);
 String copy_right = md.getCopyRights(doc);

 ArrayList<LatLng> directionPoint = md.getDirection(doc);
 PolylineOptions rectLine = new PolylineOptions().width(3).color(Color.RED);

 for(int i = 0 ; i < directionPoint.size() ; i++) {         
    rectLine.add(directionPoint.get(i));
 }

 mMap.addPolyline(rectLine); 
```

但是我想随着用户的运动动态地画线，谷歌地图 Api V2 可以吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T11:44:13.580

您可以使用 onMyLocationChange 函数来执行此操作，但您的活动应实现 OnMyLocationChangeListener

```
 @Override
    public void onMyLocationChange(Location arg0) {

lastLatLng =    currentLatLng ; 

currentLatLng = new LatLng(arg0.getLatitude(), arg0.getLongitude());

// here draw again path between those two points

    } 
```

现在您有两个新点，即用户当前存在的一个点，以及上次位置更新的最后一个点，您必须在不删除旧路径的情况下绘制一条新路径，所以我猜这将解决您的问题。

# php - Is it possible to define a template region to not cache when using Twig?

> ID：15675537
> 
> 赞同：1
> 
> 时间：2013-03-28T06:27:43.000
> 
> 标签：php, templates, twig

I am searching for a way to define a region or block within a template that Twig will not cache.

For an example of where this would be used:

On a website that shows a list of results after a search, there is a region of filters. Each filter is saved as a session and when the document is not cached the filter values match the session.

Enabling Twig caching prevents this feature from working, but if it was possible to specify a region to not cache, I could exclude the filter area the site would function properly.

Is this possible with Twig?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:54:56.463

您使用的是哪种缓存？ESI 缓存允许您为模板的不同部分提供不同的缓存规则，因此如果您使用它，您可以定义哪些区域应该被缓存，哪些不应该：[http://symfony.com/doc/master/book/http_cache。 html#edge-side-includes](http://symfony.com/doc/master/book/http_cache.html#edge-side-includes)

如果您不熟悉 ESI 缓存，KNP 提供了一个方便的教程： http: [//knpuniversity.com/screencast/new-symfony-2.2/fragments-esi-caching](http://knpuniversity.com/screencast/new-symfony-2.2/fragments-esi-caching)

# mysql - MYSQL AUTO INCREMENT RANGE

> ID：15675538
> 
> 赞同：0
> 
> 时间：2013-03-28T06:27:43.313
> 
> 标签：mysql

Hello guys i want to use an auto-increment number with PK for one of my column which starts from 000001 and ends with 100000 mean i want to have just one Luck or 100,000 users in my website not more any one pleease? I am using mysql php admin interface (GUI).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:51:47.863

# php - Image Thumbnails & Downloading Them

> ID：15675544
> 
> 赞同：2
> 
> 时间：2013-03-28T06:28:21.877
> 
> 标签：php, html

I have the following code for creating thumbnails of the images in the database automatically when the are uploaded.

```
<?php
include('config.php');
$result = mysql_query("SELECT * FROM photos where caption='cars'");
while($row = mysql_fetch_array($result))
{
    echo '<div id="imagelist">';
    echo '<p><img src="'.$row['location'].'"></p>';
    echo '</div>';
}
?> 
```

Now whenever I click an image in the gallery I want it to open the image in a new tab and give me an option to download, I want the download code which will take in the photo id from the database and then give me the option to download that image only how to do it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:33:09.307

Try this :

```
 $file    = your file
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit; 
```

mysql_* functions are deprecated in new version of php, So use mysqli_* functions OR PDO

# c# - Comparing int and long using IComparable interface

> ID：15675549
> 
> 赞同：2
> 
> 时间：2013-03-28T06:28:29.557
> 
> 标签：c#, icomparable

I would like to have expression classes that compare two objects and pass the below test.

```
public abstract class ComparisonExpression
{
    public bool Evaluate(IComparable left, object right)
    {
        if (left == null && right == null)
            return true;

        if (left == null || right == null)
            return false;

        return GetResult(left.CompareTo(right));
    }

    protected abstract bool GetResult(int comparisonResult);
}

public class AreEqualExpression : ComparisonExpression
{
    protected override bool GetResult(int comparisonResult)
    {
        return comparisonResult == 0;
    }
}

// TEST

const int i = 123;
const long l = 123L;
const string s = "123";

Assert.IsTrue(new AreEqualExpression().Evaluate(i, l));
Assert.IsFalse(new AreEqualExpression().Evaluate(i, s));
Assert.IsFalse(new AreEqualExpression().Evaluate(l, s)); 
```

It seems like IComparable implementation expects the given type matches the current type. I am having an exception like "Object must be of type Int32.".

I thought returning false if types are not equal. It prevents the exception but it brakes the behavior that i want.

Also I thought about a type conversion but this time string and int comparison will return true, which i do not want.

Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-14T23:10:20.313

如果你定义了这个助手类

```
public static class NumericalHelper {
    public static double AsDouble(this object value, out bool success) {
        if (value is sbyte || value is byte || value is short || value is ushort || value is int || value is uint || value is long || value is decimal || value is ulong || value is float || value is double || value.GetType().IsEnum) {
            success = true;
            return Convert.ToDouble(value);
        }
        success = false;
        return 0;
    }
} 
```

您可以像这样进行比较：

```
public bool Evaluate(IComparable left, object right) {
    if (left == null && right == null)
        return true;

    if (left == null || right == null)
        return false;

    bool isNumerical;
    double leftValue = left.AsDouble(out isNumerical);
    double rightValue = isNumerical ? right.AsDouble(out isNumerical) : 0;

    if (isNumerical)
        return GetResult(Comparer<Double>.Default.Compare(leftValue, rightValue));
    else {
        if (left.GetType() == right.GetType())
            return GetResult(left.CompareTo(right));
        else
            return false;
} 
```

**但请注意**，通常将相等性与`Equals`方法或`IEquatable`接口进行比较，在您的示例中根本没有考虑。[这是有关实施平等的更多信息](http://www.aaronstannard.com/overriding-equality-in-dotnet/)。这对我来说似乎是一个问题，这不适合使用当前的类设计。

# visual-c++ - No Response for WaitForMultipleObjects() function in Windows 7

> ID：15675550
> 
> 赞同：0
> 
> 时间：2013-03-28T06:28:30.657
> 
> 标签：visual-c++, windows-7, permissions, acl

In VC++, I'm trying to call `WaitForMultipleObjects()` function on windows 7 platform for group of objects to get signaled and with no timeout. I figured out that this function call is not responding...i.e. debugger is going to this function but not returning back. Whereas, the same function is working on **Windows XP platform** and **Windows 7 platform with non elevated user**.

note: I am running the application as elevated user on windows 7 i.e. run as administrator.

So, is it as permission related issue? If yes, please explain with an example how i can assign required permissions?

# c++ - C++：for(;;) 的目的？

> ID：15675556
> 
> 赞同：0
> 
> 时间：2013-03-28T06:29:02.127
> 
> 标签：c++, for-loop, boost-asio

我只是想知道`for(;;)`以下代码中该行的原因。

```
//
// blocking_tcp_echo_server.cpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2012 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0\. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#include <cstdlib>
#include <iostream>
#include <boost/bind.hpp>
#include <boost/smart_ptr.hpp>
#include <boost/asio.hpp>
#include <boost/thread/thread.hpp>

using boost::asio::ip::tcp;

const int max_length = 1024;

typedef boost::shared_ptr<tcp::socket> socket_ptr;

void session(socket_ptr sock)
{
  try
  {
    for (;;)
    {
      char data[max_length];

      boost::system::error_code error;
      size_t length = sock->read_some(boost::asio::buffer(data), error);
      if (error == boost::asio::error::eof)
        break; // Connection closed cleanly by peer.
      else if (error)
        throw boost::system::system_error(error); // Some other error.

      boost::asio::write(*sock, boost::asio::buffer(data, length));
    }
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception in thread: " << e.what() << "\n";
  }
}

void server(boost::asio::io_service& io_service, short port)
{
  tcp::acceptor a(io_service, tcp::endpoint(tcp::v4(), port));
  for (;;)
  {
    socket_ptr sock(new tcp::socket(io_service));
    a.accept(*sock);
    boost::thread t(boost::bind(session, sock));
  }
}

int main(int argc, char* argv[])
{
  try
  {
    if (argc != 2)
    {
      std::cerr << "Usage: blocking_tcp_echo_server <port>\n";
      return 1;
    }

    boost::asio::io_service io_service;

    using namespace std; // For atoi.
    server(io_service, atoi(argv[1]));
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T06:30:08.083

这就像`for loop`所有 3 个表达式都没有任何内容。它相当于：

```
while(true) { ... } 
```

> 我只是想知道原因

在这种情况下，代码作者希望指定的代码块“永远”运行，直到他告诉它不要运行（通过使用`break`、`return`、`throw`等显式退出）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T06:30:49.540

永远循环，因此您需要拥有`break`或`return`退出循环。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-28T06:36:15.710

它的目的是`for (;;)`永远运行。它相当于`while (true)`. 它将需要以下条件之一才能打破：

*   的使用`break`，专门用于中断循环的执行
*   `return`在函数上下文中使用
*   用于`throw`抛出异常
*   指某东西的用途`goto`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-28T06:48:03.717

有问题的`for`循环，

```
for (;;)
{
  char data[max_length];
  boost::system::error_code error;
  size_t length = sock->read_some(boost::asio::buffer(data), error);
  if (error == boost::asio::error::eof)
    break; // Connection closed cleanly by peer.
  else if (error)
    throw boost::system::system_error(error); // Some other error.
  boost::asio::write(*sock, boost::asio::buffer(data, length));
} 
```

实现一个中间有正常退出的循环。

这被称为**循环半**。

使用`for(;;)`而不是`while(true)`一个可以避免使用至少一个编译器（即 Visual C++）的愚蠢警告。它也更惯用。如果`while`循环打算扮演这样的角色，那么它将有一个默认条件（就像`for`循环一样）。

重写这种循环以避免中间退出的一种方法是使循环体的第二部分有条件，如下所示：

```
for ( bool finished = false; !finished;)
{
  char data[max_length];
  boost::system::error_code error;
  size_t length = sock->read_some(boost::asio::buffer(data), error);
  if (error == boost::asio::error::eof)
    finished = true; // Connection closed cleanly by peer.
  else
  {
    if (error)
      throw boost::system::system_error(error); // Some other error.
    boost::asio::write(*sock, boost::asio::buffer(data, length));
  }
} 
```

另一种表达方式，但代码冗余度较差，是在循环之前重复循环的上半部分，将循环的一半*展开*，如下所示：

```
char data[max_length];
boost::system::error_code error;
size_t length = sock->read_some(boost::asio::buffer(data), error);
for (; error != boost::asio::error::eof; )
{
  if (error)
    throw boost::system::system_error(error); // Some other error.

  boost::asio::write(*sock, boost::asio::buffer(data, length));
  size_t length = sock->read_some(boost::asio::buffer(data), error);
} 
```

关于循环的表达，我更喜欢原来表达的代码，中间有exit。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-28T06:59:30.863

ISO/IEC 14882:2003 在第 6.5.3 节第 1 段中说明了 for 循环的结构：

```
for ( for-init-statement condition_opt ; expression_opt ) statement 
```

在第 2 段中它说：

> 可以省略条件和表达式中的一个或两个。缺少条件使隐含的 while 子句等同于 while(true)。

# c# - 秒表显示错误的时间？

> ID：15675583
> 
> 赞同：0
> 
> 时间：2013-03-28T06:30:39.810
> 
> 标签：c#

```
 public void GnomeSort<T>(IList<T> list, IComparer<T> comparer)
    {
        sortTimer = new Stopwatch();
        sortTimer.Start();
        bool stillGoing = true;
        while (stillGoing)
        {
            stillGoing = false;
            for (int i = 1; i < list.Count; )
            {
                T x = list[i - 1];
                T y = list[i];
                if (comparer.Compare(x, y) <= 0)
                    i++;
                else
                {
                    list[i - 1] = y;
                    list[i] = x;
                    i--;
                    if (i == 0)
                        i = 1;
                    stillGoing = true;
                }
            }
        }
        sortTimer.Stop();
        richTextBox1.Text += "Gnome Sorting completed, total time taken " + sortTimer.Elapsed + "\n";
    } 
```

如果我运行两次，在这里使用相同的未排序随机生成的数组：

```
 randomArray = randomizedArray
                (Convert.ToInt32(textBox1.Text), Convert.ToInt32(textBox2.Text));
            randomArrayGnome = randomArray;
            randomArrayBubble = randomArray;
            randomArrayInsertion = randomArray;

            GnomeSort(randomArray);
            BubbleSort(randomArrayBubble); 
```

但它输出的东西接近这个：

```
Gnome Sorting completed, total time taken 00:00:02.5419864
Bubble Sorting completed, total time taken 00:00:00.0003556 
```

但是如果我切换调用顺序，时间会大不相同，而不是冒泡排序可能需要 6 秒。这里发生了什么？为什么它没有正确排序它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:34:21.100

您的问题在于您对数组的初始化。如此处所示：

```
 randomArray = randomizedArray
            (Convert.ToInt32(textBox1.Text), Convert.ToInt32(textBox2.Text));
        randomArrayGnome = randomArray;
        randomArrayBubble = randomArray;
        randomArrayInsertion = randomArray; 
```

上面的代码创建了四个变量，它们都引用了同一个数组。所以发生的事情是第一个排序算法对数组进行排序，随后的排序算法将遇到一个已经排序的数组，因此执行速度非常快。

简单的解决方案是使用 Linq - ToList 来克隆数组：

```
 randomArray = randomizedArray
            (Convert.ToInt32(textBox1.Text), Convert.ToInt32(textBox2.Text));
        randomArrayGnome = randomArray.ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T06:35:25.520

`randomArray`&`randomArrayGnome`都持有对`randomizedArray`.

你打电话时

```
GnomeSort(randomArray);
BubbleSort(randomArrayBubble); 
```

参考数组已经排序，`BubbleSort`正在处理一个已经排序的数组！

您可以使用`Array.Clone()`，以便创建四个不同的参考！

# ruby - 与多字节字符集和“putc”混淆

> ID：15675585
> 
> 赞同：0
> 
> 时间：2013-03-28T06:30:49.817
> 
> 标签：ruby

我试图了解它是如何[`ARGF#putc`](http://www.rubydoc.info/stdlib/core/ARGF#putc-instance_method)工作的。我实际上是在做测试[`multibyte character sets`](http://www.webmetric.org/white_paper/Multi-byte_Character_Sets.pdf)

这是示例：

```
$stdout.putc 63 #<~~~ A
#?=> 63
$stdout.putc 191
#?=> 191
$stdout.putc 181
#?=> 181
$stdout.putc 166
#?=> 166 
```

现在我的问题是，除了**A**行- 为什么每条语句都打印`?`？

我的`Ruby`版本是：

```
D:\Rubyscript\My ruby learning days>ruby -v
ruby 2.0.0p0 (2013-02-24) [i386-mingw32] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:48:22.207

它取决于控制台的默认编码（或 Windows 上的代码页）。你可以跑`chcp`进去`cmd.exe`看看。

ASCII 字符包含从`\x00`到 的字符或控制字符`\x7F`。多字节字符集使用 ISO-8859-1 编码，其中包含 ASCII 和`\x80-\xFF`. 好吧，从您的帖子中推断，您的控制台的默认代码页与 ISO-8859-1 不兼容，因此控制台不知道如何从`\x80-\xFF`.

在将其打印到控制台之前，您需要进行一些编码转换。

```
putc 191.chr.force_encoding('ISO-8859-1').encode('UTF-8')

# UTF-8 is the default encoding used in my Linux environment
# you need to replace it with your console's default encoding 
```

# java - 从 java 类运行 Jython 代码

> ID：15675586
> 
> 赞同：0
> 
> 时间：2013-03-28T06:30:50.603
> 
> 标签：java, jython

我正在研究将运行 jython 文件以获得一些结果的可执行 jar 文件。我尝试通过这种技术调用 jython 文件。

`.bat`从 java 类运行文件，该`.bat`文件将调用`Jython`file.

```
Runtime rt = Runtime.getRuntime();
Process process = rt.exec(new String[] { "cmd.exe", "/c", "D:\\calljython.bat " + parameters + "" }); 
```

jython 文件运行后，我读取输出`InputStream`并获得结果。这种技术在从 Eclipse 运行时可以使用文件，但在创建和运行可执行 jar 时会失败。

我使用的另一件事是`PythonInterpreter`，但在这种情况下也面临问题。

**我想做的是：**

从 java 中运行 Jython 代码以及要在 Jython 文件中使用的参数并获取结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:29:33.190

尝试调试代码并确保正在调用 bat 文件或 jython 并返回结果。bat 文件应与您正在执行的 jar 文件一起放置（相同的层次结构）。

```
Runtime rt = Runtime.getRuntime();
Process process = rt.exec(new String[] { "cmd.exe", "/c", "calljython.bat " + parameters + "" }); 
```

# python - AppEngine Google Cloud Endpoint - 未找到发现

> ID：15675587
> 
> 赞同：4
> 
> 时间：2013-03-28T06:30:52.810
> 
> 标签：python, google-app-engine, google-cloud-endpoints

我对 Python 和 Google AppEngine 还很陌生，但有大约 7 年的编程经验。我也是 StackOverflow 的新手。

我一直在尝试为我的个人项目设置一个简单的 Google Cloud Endpoint API，并已完成并将完成的应用程序上传到 Google App Engine。

这是我的端点 API 设置：

```
@endpoints.api(name='puzzle', version='v1', description='Puzzle Engine API') 
```

和方法：

```
@endpoints.method(
        PuzzleMessage, PuzzleMessage,
        name='puzzle.generate',
        http_method='GET',
        path='generate'
    )

@endpoints.method(
        PuzzleMessage, PuzzleMessage,
        name='puzzle.solve',
        http_method='GET',
        path='solve'
    ) 
```

我的 app.yaml 看起来像：

```
handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.app

# Endpoints handler
- url: /_ah/api/.*
  script: services.application

libraries:
- name: webapp2
  version: "2.5.2" 
```

最后 services.py 内容如下：

```
from google.appengine.ext import endpoints
from api import puzzle_api

application = endpoints.api_server([
                               puzzle_api.PuzzleAPI
                           ], restricted=False) 
```

现在，问题是当我尝试访问 https:// *my-app-name* .appspot.com/_ah/api/discovery/v1/apis 时，我看到的只是

> 未找到

此外，当我在[https://developers.google.com/apis-explorer/?base=https://my-app-name .appspot.com/](https://developers.google.com/apis-explorer/?base=https://) *_ah* /api#p/ 访问 API Explorer 时，列表中的服务为空，在 JavaScript 控制台中，我在 https:// *my-app-name* .appspot.com/_ah/api/discovery/v1/apis 上看到 404 错误。

在本地测试服务器上点击这些 URL 会产生完全不同的错误。当我尝试在 localhost:8080/_ah/api/discovery/v1/apis 访问本地测试服务器上的 API Discovery 时，我得到了

> {“错误”：{“消息”：“BackendService.getApiConfigs 错误”}}

而不是“未找到”。在[https://developers.google.com/apis-explorer/?base=http://localhost:8080/_ah/api#p/](https://developers.google.com/apis-explorer/?base=http://localhost:8080/_ah/api#p/)中点击资源管理器现在也会在 JavaScript 控制台中显示 500 错误而不是 404。

我一直在尝试通过进行许多 Google 搜索并尝试很多事情来解决这个问题，但我似乎无法继续进行下去。我非常感谢我能从这个专业人士社区获得的任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T13:31:06.680

请参阅此处的文档：[https ://developers.google.com/appengine/docs/python/endpoints/api_server](https://developers.google.com/appengine/docs/python/endpoints/api_server)

您需要执行以下操作：

将您的 app.yaml 更改为：

```
handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /_ah/spi/.*
  script: services.application

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.2" 
```

**注意**`/_ah/spi/.*`：网址不应该是`/_ah/api/.*`。更改它，然后您可以在`/_ah/api/explorer`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T06:48:21.450

```
- url: .*
  script: main.app

# Endpoints handler
- url: /_ah/api/.*
  script: services.application 
```

尝试颠倒这些处理程序的顺序。将最通用的 URL 匹配器放在列表末尾通常是一种很好的做法，以免它们捕获到本来应该转到更具体的处理程序的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-06T07:19:15.460

改成**app.yaml**

```
# Endpoints handler
- url: /_ah/spi/.*
  script: services.application

libraries:
- name: webapp2
  version: latest 
- name: pycrypto
  version: latest
- name: endpoints
  version: 1.0 
```

# html - DOM 还是 DOT？更精确的术语是什么？

> ID：15675589
> 
> 赞同：-1
> 
> 时间：2013-03-28T06:30:56.397
> 
> 标签：html

Document Object Mobel (DOM) 是在页面加载访问后生成的对象树。我想知道为什么它被称为 DOM 而不是文档对象树（DOT）？DOT不是更合适的术语吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:31:23.887

刚刚在 w3 中找到答案。其文档对象模型的原因是，

> 在 DOM 中，文档具有非常像树的逻辑结构；更准确地说，它就像一个“森林”或“小树林”，可以包含不止一棵树。每个文档包含零个或一个文档类型节点、一个根元素节点以及零个或多个注释或处理指令；根元素充当文档元素树的根。但是，DOM 没有指定文档必须实现为树或树林，也没有指定如何实现对象之间的关系。DOM 是一个可以以任何方便的方式实现的逻辑模型。在本规范中，我们使用术语结构模型来描述文档的树状表示。我们也使用术语“树” 参考使用“tree-walking”方法可以到达的那些信息项的排列时；（这不包括属性）。DOM 结构模型的一个重要特性是结构同构：如果使用任何两个文档对象模型实现来创建同一文档的表示，它们将根据 XML 信息集 [Infoset] 创建相同的结构模型。
> 
> 注意：根据用于构建 DOM 的解析器，可能会有一些变化。例如，如果解析器丢弃它们，则 DOM 可能不会在元素内容中包含空格。
> 
> 之所以选择“文档对象模型”这个名称，是因为它是传统面向对象设计意义上的“对象模型”：文档是使用对象建模的，该模型不仅包含文档的结构，还包含文档的行为以及组成它的对象。换句话说，上图中的节点并不代表数据结构，它们代表对象，具有功能和身份。

参考：[http ://www.w3.org/TR/DOM-Level-2-Core/introduction.html](http://www.w3.org/TR/DOM-Level-2-Core/introduction.html)

# jquery - jquery图像滑块自动播放并单击

> ID：15675590
> 
> 赞同：0
> 
> 时间：2013-03-28T06:31:05.570
> 
> 标签：jquery, jquery-ui

请建议我需要在此代码中进行的任何更改，以使此滑块在 4000 毫秒后自动播放。不是它在单击时工作正常。我在遵循一些建议后做了一些更改，但它不起作用

```
<script type="text/javascript"> 
$(function() {    
var Page = (function() {    
var $navArrows = $( '#nav-arrows' ),
$nav = $( '#nav-dots > span' ),
slitslider = $( '#slider' ).slitslider( {
onBeforeChange : function( slide, pos ) {

$nav.removeClass( 'nav-dot-current' );
$nav.eq( pos ).addClass( 'nav-dot-current' );    
}
} ),    
init = function() {    
initEvents();    
},
initEvents = function() {    
// add navigation events
$navArrows.children( ':last' ).on( 'click', function() {    
slitslider.next();
return false;    
} );    
$navArrows.children( ':first' ).on( 'click', function() {    
slitslider.previous();
return false;    
} );
$nav.each( function( i ) {    
$( this ).on( 'click', function( event ) {    
    var $dot = $( this );    
    if( !slitslider.isActive() ) {    
            $nav.removeClass( 'nav-dot-current' );
            $dot.addClass( 'nav-dot-current' );    
    }    
    slitslider.jump( i + 1 );
    return false;    
} );    
} );    
};    
return { init : init };    
})();    
Page.init();    
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:44:01.680

只需查看[slitslider docs](http://tympanus.net/codrops/2012/06/05/fullscreen-slit-slider-with-jquery-and-css3/)，我认为您需要将这两行添加到代码的以下摘录中：

```
.slitslider({

    // slideshow on / off
    autoplay : true,
    // time between transitions
    interval : 4000,

    onBeforeChange : function(slide, pos) {
    $nav.removeClass('nav-dot-current');
    $nav.eq(pos).addClass('nav-dot-current');
    } 
```

# updatepanel - SignalR 更新面板仅在第一次工作

> ID：15675592
> 
> 赞同：1
> 
> 时间：2013-03-28T06:31:11.670
> 
> 标签：updatepanel, postback, signalr, linkbutton

我在更新面板中有以下代码。当屏幕加载时，SignalR 代码工作正常。但是，在第一次之后，一旦我单击一个按钮，SignalR 代码就不会再触发，直到我导致重定向回页面。

基本上我正在做的是当用户单击预览按钮时，它会触发报告过程。Ajax 模式弹出窗口显示一个进度指示器和一个取消按钮。如果用户单击取消按钮，则设置取消标记，并取消报告。通过使用SignalR技术，不阻塞ui线程，用户可以点击取消按钮。这第一次工作正常。但是，单击取消按钮后，下次单击取消按钮时它不起作用。但是，当我再次重定向到该页面时，它可以工作。

如果我将链接按钮移到更新面板之外，它每次都有效。

```
 <asp:updatepanel runat="server" id="UpdatePanelFooter" rendermode="Inline" updatemode="Conditional">                    
            <contenttemplate>
                  <table width="100%">
                    <tr>
                        <td>
                            <div id="divBottomBanner">
                                <asp:label id="LabelHelpID" runat="server" text="" visible="false"></asp:label>&nbsp;    
                                <asp:linkbutton id="LinkButtonPreview" runat="server" OnClick="LinkButtonPreview_Click">Preview</asp:linkbutton>  
                                <asp:linkbutton id="LinkButtonSaveAs" runat="server" onclick="LinkButtonSaveAs_Click">Save Prompts As</asp:linkbutton>
                                <asp:linkbutton id="LinkButtonGenerateSP" runat="server" onclick="LinkButtonGenerateSP_Click"><<<< GENERATE SP >>>></asp:linkbutton>
                                <asp:linkbutton id="LinkButtonInvisibleTargetControlIDSAVEAS" runat="server" causesvalidation="false" height="0" text="" width="0"></asp:linkbutton>
                                <asp:linkbutton id="LinkButtonInvisibleTargetControlIDPROGRESS" runat="server" causesvalidation="false" height="0" text="" width="0"></asp:linkbutton>
                            </div>
                        </td>
                    </tr>
                </table>
                    <ajaxtoolkit:modalpopupextender id="ModalPopupExtenderPROGRESS" runat="server" targetcontrolid="LinkButtonInvisibleTargetControlIDPROGRESS" behaviorid="PROGRESS" popupcontrolid="PanelPROGRESS" backgroundcssclass="ModalBackground" dropshadow="true">
                    </ajaxtoolkit:modalpopupextender>
                    <asp:panel id="PanelPROGRESS" runat="server" cssclass="ModalPopup" style="display: none;" width="75em">
                        <table id="TablePROGRESS" width="95%">
                            <tr>
                                <td style="width: 10%"></td>
                                <td style="width: 30%"></td>
                                <td style="width: 50%"></td>
                                <td style="width: 10%"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td colspan="2" align="center">Processing Please Wait
                                <br />
                                    <br />
                                    <hr />
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td colspan="2" align="center">
                                    <img src="../Images/moving_lights.gif" alt="Processing..." />
                                    <hr />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <br />
                                    <br />
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td align="center" colspan="2">
                                    <asp:linkbutton id="LinkButtonCancelPROGRESSXD" runat="server" height="100%" cssclass="Button" causesvalidation="false" tabindex="6">&nbsp;&nbsp;&nbsp;Cancel Preview Report&nbsp;&nbsp;&nbsp;</asp:linkbutton>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <br />
                                    <br />
                                </td>
                            </tr>
                        </table>
                    </asp:panel>
            </contenttemplate>
        </asp:updatepanel> 
```

然后，我在 SignalR 部分中使用的脚本中有以下代码。

```
/// <reference path="../scripts/jquery-1.8.3.js" />
/// <reference path="../scripts/jquery.signalR-1.0.0.js" />

/*!
    ASP.NET SignalR Report Processing
*/

// Crockford's supplant method 
if (!String.prototype.supplant) {
    String.prototype.supplant = function (o) {
        return this.replace(/{([^{}]*)}/g,
            function (a, b) {
                var r = o[b];
                return typeof r === 'string' || typeof r === 'number' ? r : a;
            }
        );
    };
}

// A simple background color flash effect that uses jQuery Color plugin
jQuery.fn.flash = function (color, duration) {
    var current = this.css('backgroundColor');
    this.animate({ backgroundColor: 'rgb(' + color + ')' }, duration / 2)
        .animate({ backgroundColor: current }, duration / 2);
}

$(function () {

    var RPT = $.connection.ReportProcessing;

    function stopRPT() {
        //$ReportProcessingUl.stop();
    }

    function init() {
        return RPT.server.waitForReportToBeReady().done(function () {
            //   Add Code Here
        });
    }

    //function jsFireThePreviewClick() {
    //    var ctrl = $("#ImageButtonRUNTHEREPORTXD");
    //    if (ctrl != null) {
    //        ctrl.click();
    //    }
    //}

    // Add client-side hub methods that the server will call
    $.extend(RPT.client, {
        updateReportProgress: function () {

        },

        ReportOpened: function () {
            //scrollRPT();
        },

        ReportClosed: function () {
            stopRPT();
        },

        ReportCancel: function () {
            return init();
        }
    });

    // Start the connection
    $.connection.hub.start()
        .pipe(init)
        .pipe(function () {
            return RPT.server.waitForReportToBeReady();
        })
        .done(function (state) {
            if (state === 'Open') {
                RPT.client.ReportOpened();
            } else {
                RPT.client.ReportClosed();
            }

            // Wire up the buttons
            $("#LinkButtonPreview").click(function () {
                RPT.server.openReport();
            });

            $("#close").click(function () {
                RPT.server.closeReport();
            });

            $("#LinkButtonCancelPROGRESSXD").click(function () {
                RPT.server.cancelReport();
                alert('Report Canceled By User');
            });
        });
}); 
```

如果我将 LinkBut​​tonPreview 移到更新面板之外，它每次都可以正常工作。我需要在更新面板中有这个链接按钮，但每次使用 SignalR 时都需要它工作。我知道这与更新面板及其处理回发的方式有关。但是，我无法弄清楚我需要做什么才能让它每次都能正常工作。就像我说的，它第一次确实有效，但之后就不行了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T07:04:59.190

正如您所怀疑的，该问题与更新面板有关。您正在向按钮添加单击事件处理程序`#LinkButtonPreview`，但该按钮元素仅在更新面板刷新之前存在。当更新面板更新时，会创建一个具有相同 id 但没有附加到旧按钮的事件处理程序的新按钮。

解决方案是将单击事件处理程序附加到永远不会更新/替换的元素，因此永远不会删除事件处理程序。您仍然可以让事件处理程序仅响应`#LinkButtonPreview`点击，而无需`#LinkButtonPreview`直接使用[.on()](http://api.jquery.com/on/)附加事件：

```
$(document).on("click", "#LinkButtonPreview", function(){
    RPT.server.openReport();
}); 
```

由于`document`是 的祖先元素`#LinkButtonPreview`，因此源自 的点击事件`#LinkButtonPreview`将一直冒泡到`document`. 如果您不指定`#LinkButtonPreview`的第二个参数`.on()`，则事件处理程序将由页面上的任何点击触发。

您还应该以与`#LinkButtonCancelPROGRESSXD`.

# objective-c - 无法重新加载数据（UITableView）

> ID：15675595
> 
> 赞同：0
> 
> 时间：2013-03-28T06:31:22.400
> 
> 标签：objective-c, uitableview, reloaddata

我正在 UIView 控制器中创建 UITableView

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 470, self.view.frame.size.height) style:UITableViewStylePlain];
    self.tableView.dataSource = self;
    self.tableView.delegate = self;
    [self.view addSubview:self.tableView];
    NSLog(@"tableView is '%@'",self.tableView);
} 
```

NSLog 结果：“tableView is '< UITableView: 0x7c60c00; frame = (0 0; 470 1004); clipsToBounds = YES;gestureRecognizers = ; layer = ; contentOffset: {0, 0}>'”

当 itemArray 被其他控制器修改时，将调用 refreshTableView 方法

```
**SideBarViewController *sideBarViewController = [[SideBarViewController alloc]init];
[sideBarViewController refreshTableView];**

-(void)refreshTableView {
    [self createItemArray];
    NSLog(@"reload itemArray->%@",self.itemArray);
    NSLog(@"tableView is '%@'",self.tableView);
    [self.tableView reloadData];
} 
```

不知何故，NSLog 结果变成：“ **tableView is '(null)'** ”。并且不会重新加载 tableView。

为什么？请帮忙。谢谢。

**更新：**

itemArray 的 NSLog 很好：

更改之前重新加载 itemArray->( "test.md" )

更改后重新加载 itemArray->( "test.md", "test2.md" )

**更新2：**

```
#pragma mark - Table view data source
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.itemArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [self.itemArray objectAtIndex:indexPath.row];
    return cell;
} 
```

**更新 3：**

```
.h
@interface SideBarViewController : UIViewController<IIViewDeckControllerDelegate,UITableViewDataSource,UITableViewDelegate>

.m
@interface SideBarViewController ()
@property (nonatomic,strong) UITableView *tableView;
@end

@implementation SideBarViewController
@synthesize tableView = _tableView; 
```

**更新4** ：

```
-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath*)indexPath 
```

方法工作正常，删除行后重新加载表视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:40:22.507

分享更多代码，以便我们找到确切的问题。

你能检查一下你的tableView的实际名称吗？分享您在 .h 文件中声明的表的一些代码。

检查数组，数据在重新加载或更新之前是否可用，并且表格视图方法工作正常。

检查您是否在 .h 文件中定义 tableView 委托？并在您的类中正确实现 tableView 的委托方法..

@interface MyViewController:UIViewController

还有一件事检查您是否正确实现了数据源和 delagate 方法。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath. 
```

如果您已正确完成此操作，请在加载之前检查您的数组是否包含数据。可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:09:29.553

```
 //
    //  ViewController.h
    //  tableData
    //
    //  Created by Nirav Jain on 3/28/13.
    //  Copyright (c) 2013 SI. All rights reserved.
    //

    #import <UIKit/UIKit.h>

    @interface ViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>
    {
        int rows;
    }
    @end

//  tableData
//
//  Created by Nirav Jain on 3/28/13.
//  Copyright (c) 2013 SI. All rights reserved.
//

#import "ViewController.h"

//@implementation SideBarViewController

@interface ViewController ()
@property (nonatomic,strong) UITableView *tableView;
@end

@implementation ViewController

@synthesize tableView = _tableView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 470, self.view.frame.size.height) style:UITableViewStylePlain];
    self.tableView.dataSource = self;
    self.tableView.delegate = self;
    [self.view addSubview:self.tableView];
    NSLog(@"tableView is '%@'",self.tableView);
    rows = 5;

    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonItemStyleDone target:self action:@selector(refreshTableView)];
}

-(void)refreshTableView {

    rows = 12;
    NSLog(@"tableView is '%@'",self.tableView);
    [self.tableView reloadData];
}
#pragma mark - Table view data source
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return rows;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text =  [ NSString  stringWithFormat:    @"%d", indexPath.row];
    return cell;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:37:15.593

您可以尝试使用通知

1.  在 Sidebarvc 中将 Observer 添加到 viewDidLoad 中

    [[NSNotificationCenter defaultCenter] addObserver:self 选择器:@selector(refreshTableView:) name:@"dataChanged" object:nil];

2.  创建一个方法来刷新

    -(void)refreshTableView:(NSNotification *)notif{ }

3.  在其他VC上，等待通知

    [[NSNotificationCenter defaultCenter] postNotificationName:@"dataChanged" object:nil];

4.别忘了清洗

```
add [[NSNotificationCenter defaultCenter] removeObserver:self]; to ViewDidUnload 
```

应该管用。

# installation - 如何在 .Net 中创建自定义设置项目？

> ID：15675596
> 
> 赞同：1
> 
> 时间：2013-03-28T06:31:29.697
> 
> 标签：installation, inno-setup, setup-project

我想为我的 c# 项目创建自定义设置，因为我知道我无法使用 Visual Studio 工具来做到这一点。以下是我在安装安装项目期间要执行的步骤：

*   如果未安装，请安装.Net Framework；
*   如果未安装，请安装 Sql Server Express；
*   创建 Sql Server 实例；
*   将 .mdf 和 .ldf 附加到创建的 sql server 实例；
*   安装我的软件；

有人经历过这种设置吗？请提供您在安装项目中使用的工具。如果可能的话，一些工作示例。我听说过 Setup Factory 和 Inno Setup。你怎么看他们。我坚信以前有人做过，请分享您的经验！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:04:00.777

我建议您使用 Inno Setup：

**Inno Setup** ( [http://www.jrsoftware.org/](http://www.jrsoftware.org/) ) 是一个非常强大的开源安装系统，它能够完成你提到的所有步骤，而且很容易学习。

Inno 使用简单的脚本格式（类似于 INI 文件）和 Pascal 语言来编写高级脚本。

由于 Inno 分布广泛，因此在线提供了许多资源和教程，例如：[Inno Setup Extensions Knowledge Base](http://www.vincenzo.net/isxkb/index.php?title=Main_Page)，有庞大的社区，安装包中有许多示例，以及非常好的帮助和手册。

我无法为您提供完整的脚本，但很容易找到您的许多任务（从 SO 快速拍摄）：

[Inno Setup：验证是否安装了 .NET 4.0](https://stackoverflow.com/questions/4104011/innosetup-how-to-check-the-framework-4-0)

[使用 LOCAL Server InstanceName 无人参与安装 SQL Server 2005 Express](https://stackoverflow.com/questions/2883631/unattended-install-of-sql-server-2005-express-with-local-server-instancename)

（这里有点自我宣传：）

如果您想直接从 Visual Studio (2005/2008/2010/2012) 创建 Inno 安装程序，您可以使用我的（商业）工具 Visual & Installer - [http://www.unsigned-softworks.sk/visual-installer/index .html](http://www.unsigned-softworks.sk/visual-installer/index.html)

# javascript - 创建一个可以使用 jquery node.js 模块操作的 html 文档

> ID：15675597
> 
> 赞同：0
> 
> 时间：2013-03-28T06:31:31.453
> 
> 标签：javascript, jquery, node.js

我有一个来自我想从中抓取数据的`$.ajax()`请求（使用[jquery node.js 包）的 html 字符串。](https://npmjs.org/package/jquery)从自述文件中的文档看来，它`var $ = require('jquery');`创建了一个空的 html 文档。是否可以用 html 字符串替换该 DOM，以便您可以像使用典型网站一样与 jQuery 进行交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:39:06.767

当然：

```
var $ = require('jquery');

$.get(URL, function(html) {
  var $doc = $(html);
  $doc.find('a').each(function(i, el) {
    console.log('href', $(el).attr('href'));
  });
}); 
```

# html - 用css居中对象

> ID：15675602
> 
> 赞同：2
> 
> 时间：2013-03-28T06:31:53.887
> 
> 标签：html, css, navbar

这是一个 html/css 导航栏我如何将它居中在我的页面的中心我尝试将中心标签放在 html 和 float:center; 在 ul 下，但它不会工作 生病发布我的 html 然后我的 css

HTML

```
<body>
<ul>
<li><a href="#">&nbsp;</a></li>
</ul>
</body> 
```

CSS

```
ul
{
list-style-type:none;
margin:0;
padding:0;
overflow:hidden;
}
li
{
float:left;
}
a:link,a:visited
{
display:block;
width:120px;
font-weight:bold;
color:#FFFFFF;
background-color:#98bf21;
text-align:center;
padding:4px;
text-decoration:none;
text-transform:uppercase;
}
a:hover,a:active
{
background-color:#7A991A;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:47:03.050

```
ul
{
list-style-type:none;
margin:0;
padding:0;
overflow:hidden;
}
li
{
    padding-left:200px;

}
a:link,a:visited
{

display:block;
width:120px;
font-weight:bold;
color:#FFFFFF;
background-color:#98bf21;
text-align:center;
padding:4px;
text-decoration:none;
text-transform:uppercase;
}
a:hover,a:active
{
background-color:#7A991A;
} 
```

[演示在这里](http://jsfiddle.net/8c7wm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:41:21.813

放入`<ul>`内部 a`<div>`并使用它居中`align="center"`

像这样：

```
<div align="center">
<ul>
    <li>hhhh</li>
    <li>hhhhh</li>
</ul>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T06:41:33.027

您需要添加：

```
margin: 0 auto; 
```

到 ul 和 a 元素的 css，并删除 float: left; 从里。

在这里看到这个[jsfiddle](http://jsfiddle.net/JYwRn/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T06:42:01.483

既然你给了你`a`的 a`width: 120px`那么为什么不能给你的 ul 相同的属性并使用`margin`：

```
width: 120px;
margin: 0 auto; 
```

演示：http: [//jsfiddle.net/NYE3y/](http://jsfiddle.net/NYE3y/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T06:53:58.947

将 text-align: center 添加到 ul 并将 float: left 替换为 display: inline-block

```
ul
{
list-style-type:none;
margin:0;
padding:0;
overflow:hidden;
text-align:center; <<add this
}
li
{
display:inline-block; << add this instead of float
} 
```

你的 CSS 的其他部分保持不变！

因此，如果您向您的网站添加更多 li，它们都将位于彼此相邻的中心。

```
<li><a href="#">&nbsp;</a></li>
<li><a href="#">&nbsp;</a></li> 
```

要删除空格：

```
 <li><a href="#">&nbsp;</a></li><li><a href="#">&nbsp;</a></li> 
```

不要在每行之间按回车。:)

...或者还有另一种解决方案是添加：margin-left:-4px:

```
 li
    {
display:inline-block; 
margin-left: -4px;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T07:15:49.047

为 UL 使用包装器并为包装器应用宽度

```
<div class="menu-wrap">
    <ul>
        <li>Menu A</li>
    </ul>
</div> 
```

CSS：

```
.menu-wrap {
    margin:0 auto;
    width:500px;
} 
```

你仍然可以使用 float 作为你的 li。请记住始终清除浮动。

# hibernate - 是否使用 Hibernate 的 @Entity 对象作为地图安全的键？

> ID：15675603
> 
> 赞同：1
> 
> 时间：2013-03-28T06:31:56.693
> 
> 标签：hibernate

使用带有 Hibernate 注释的对象`@Entity`作为映射中的键是否安全？安全的意思是，如果对象的数据库 ID 相同，我希望两个键相同。我在没有分离对象的事务范围内使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:44:04.303

如果您承认当 id 相同时两个对象相等（您刚刚做了），您应该覆盖`hashCode`并`equals`基于此。如果你这样做了，这些对象可以安全地用作键。当然，假设这些 id 没有改变。

编辑：限制这些 id 更改会限制您在持久化*之前*创建对象并将其作为键添加到集合中。通常建议在您的[and中](https://community.jboss.org/wiki/EqualsAndHashCode)[使用业务密钥`hashCode``equals`](https://community.jboss.org/wiki/EqualsAndHashCode)。

# netty - Netty 4 EventExecutorGroup 关闭

> ID：15675605
> 
> 赞同：1
> 
> 时间：2013-03-28T06:32:02.887
> 
> 标签：netty

我正在使用 Netty 4.0.0.Beta2

我有一个配置了多个处理程序的管道，其中最后一个在它自己的 EventExecutorGroup 中运行。有点像这样：

```
DefaultEventExecutorGroup separateGroup = new DefaultEventExecutorGroup();

ChannelPipeline pipeline = ch.pipeline();
pipeline.addLast(AGGREGATE, new SomeHandler());
pipeline.addLast(ENCODE, new OtherHandler());
pipeline.addLast(extractEventGroup, EXECUTE, new ExecuteHandler()); 
```

然后，我使用此管道配置配置一个 ServerBootstrap，作为 ChannelInitalizer 的一部分。

当服务器运行时，我会跟踪一个名为“channels”的 ChannelGroup 中的所有当前客户端

后来，当我关闭服务器时，我刷新并关闭所有通道，然后调用

```
bootstrap.shutdown(); 
```

这会关闭 NIO EventExecutorGroup，但不会关闭我为 ChannelHandler 添加到管道中的单独 DefaultEventExecutorGroup - 这意味着 JVM 不会退出，因为线程仍然处于活动状态（只是在等待，但没有释放）。

我有点惊讶这也没有关闭，所以我现在保留对 DefaultEventExecutorGroup 的引用，并在我的 bootstrap.shutdown() 调用之后手动关闭它：

```
separateEventGroup.shutdown(); 
```

我错过了什么，还是 Netty 的预期行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:48:46.340

这实际上不是错误，而是预期的行为。考虑一个运行多个协议服务器的 JVM。假设这些服务器执行磁盘 I/O，并且您想限制跨 JVM 执行阻塞磁盘 I/O 的线程数。您可以为执行磁盘 I/O 的处理程序创建一个共享`EventExecutorGroup`，并在 JVM 中的多个协议服务器上使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T07:09:21.180

我认为你是对的，这是一个错误。你能打开一个错误报告，这样我们就不会忘记修复它吗？

[https://github.com/netty/netty/issues](https://github.com/netty/netty/issues)

# sql - 读取编号不均匀的平面文件。列数

> ID：15675607
> 
> 赞同：1
> 
> 时间：2013-03-28T06:32:14.240
> 
> 标签：sql, ssis, etl

我有一个这样的 csv 文件

```
**0, xyz, 20130301121212
1, 6997, 01234
2, 012345, 5678999, Y, 11, 20130301
2, 012345, 5678988, Y, 11, 20130301
1, 6647, 01234
2, 012345, 5678999, Y, 11, 20130301
2, 012345, 5678988, Y, 11, 20130301
9, 8** 
```

0为表头，1为不同店铺，2为产品详情记录

具有 2 的行（作为第一列）是具有第 1 行（作为第一列）的商店的详细信息

有人可以告诉我如何将这些行与 2 和相应的 1 分组吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:22:26.367

我没有使用 SQL Server，我只能提供一般指导：

1）将文件加载到数据库中，列中的整行，添加行号。结果将类似于（`rid`是行号）：

```
rid rline
1   1, 6997, 01234
2   2, 012345, 5678999, Y, 11, 20130301
3   2, 012345, 5678988, Y, 11, 20130301
4   1, 6647, 01234
5   2, 012345, 5678999, Y, 11, 20130301
6   2, 012345, 5678988, Y, 11, 20130301 
```

2）使用一些SQL来获取所需形状的数据。这意味着您必须为每行 2 找到第一行 1。未测试：

```
select 
    csvdata.rline,
    csvdata.rid,
    (select rline from csvdata x where rline like '1,%' and x.rid < csvdata.rid order by x.rid desc limit 1) as TopRline
from 
    csvdata
where
    rline like '2,%' -- this will limit lines to only those with the detail 
```

希望这将产生以下包含三列的结果：

```
rid rline                                 TopRline      
2   2, 012345, 5678999, Y, 11, 20130301   1, 6997, 01234
3   2, 012345, 5678988, Y, 11, 20130301   1, 6997, 01234
5   2, 012345, 5678999, Y, 11, 20130301   1, 6647, 01234
6   2, 012345, 5678988, Y, 11, 20130301   1, 6647, 01234 
```

3) 使用某些 SQL 函数将数据拆分为列（例如，在 PostgreSQL 中，`text_to_array()`会这样做）。假设 2 的结果存储在表 temp 中，则类似于：

```
select
  (string_to_array(rline,','))[1] as column1,
  (string_to_array(rline,','))[2] as column2,
  (string_to_array(rline,','))[3] as column3,
  (string_to_array(rline,','))[4] as column4,
  (string_to_array(rline,','))[5] as column5,
  (string_to_array(rline,','))[6] as column6,
  (string_to_array(TopRline,','))[1] as column1top,
  (string_to_array(TopRline,','))[2] as column2top,
  (string_to_array(TopRline,','))[3] as column3top,
from
  temp 
```

4）将数据存储在您想要的任何表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T02:17:47.953

注意到 SSIS 对锯齿状 CSV 的困难，我会在 SSIS 运行的 CMD 中做一些前期工作，以便您可以使用标准的 CSV 功能。加载到两个单独的表，然后在共享键列上加入表。

首先将锯齿状文件中的行拆分为非锯齿状文件。在 Windows 中，类似下面的东西应该可以解决问题。

`findstr /b "1," InputFile.txt > InputFileRow_1.txt`
`findstr /b "2," InputFile.txt > InputFileRow_2.txt`

然后使用 SSIS 标准 CSV 功能将 InputFileRow_1.txt 和 InputFileRow_2.txt 加载到表 InputFileRow_1 和 InputFileRow_2 表中。

最后，像下面这样分组。

```
 SELECT *
 FROM InputFileRow_1 ifr1
 INNER JOIN InputFileRow_2 ifr2
 ON ifr1.RowType2_ID = ifr2.RowType2_ID 
```

*根据文件中行类型的分布和文件的大小，从 IO 角度来看，这种方法可能是浪费的。

# visual-studio-lightswitch - 我们如何解决 LightSwitch 中的“无法在事务之外编辑项目”？

> ID：15675610
> 
> 赞同：0
> 
> 时间：2013-03-28T06:32:20.113
> 
> 标签：visual-studio-lightswitch, lightswitch-2012

错误：我们如何解决LightSwitch**中的“无法编辑事务之外的项目” ？**

![在此处输入图像描述](../Images/6832e86f442e9f3bee0fb44db2dbc7a5.png)

**解决方案：**请您的解决方案并重新打开它。

更多详情请[点击这里](http://harshgupta71.blogspot.in/2013/03/how-can-we-resolve-cannot-edit-item.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:10:45.297

我发现在更新外部数据源尤其是 RIA 服务后会发生此错误。我发现的唯一解决方法是删除数据源并使用不同的名称重新导入。

# android - 在特定时间后启动服务android

> ID：15675611
> 
> 赞同：0
> 
> 时间：2013-03-28T06:32:20.880
> 
> 标签：android

我在我的项目中做了一项服务，我想每 2 分钟开始一次。我正在使用以下代码，但它无法正常工作。

```
public class ScheduleSync extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        AlarmManager service = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);

        Intent i = new Intent(context, StartMyServiceReceiver.class);
        PendingIntent pending = PendingIntent.getBroadcast(context, 0, i,PendingIntent.FLAG_CANCEL_CURRENT);
        Calendar cal = Calendar.getInstance();
        service.setInexactRepeating(AlarmManager.RTC_WAKEUP,cal.getTimeInMillis(), 60000*2, pending);

    }

}

public class StartMyServiceReceiver extends BroadcastReceiver
{    
    public void onReceive(Context context, Intent intent) 
    {
        Toast.makeText(context, "receive broadcast", Toast.LENGTH_LONG).show();
        Log.d("StartMyServiceReceiver", "receive broadcast");
        Intent service = new Intent(context, myservice.class);
        context.startService(service);
    }
} 
```

请帮助我解决这个问题。当我看到 taskmanager myservice 在后端运行时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:41:43.147

为什么使用`AlarmManager`？

只需使用`Thread.sleep(xxxx)`：

```
public class ScheduleSync extends BroadcastReceiver{
    private Context context;
    private void startOtherService(){
        Intent i = new Intent(context, StartMyServiceReceiver.class);
        context.startService(i);
    }
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        this.context = context;
        new Thread(new Runnable(){
            public void run(){
                try{
                    Thread.sleep(2*60*1000);
                    startOtherService();
                }catch(InterruptedException e){
                    e.printStackTrace();
                }
            }
        }).start();
    }

} 
```

# asp.net - 在 Azure 中运行相同 cron 的生产服务器和登台服务器

> ID：15675614
> 
> 赞同：7
> 
> 时间：2013-03-28T06:32:34.893
> 
> 标签：asp.net, azure, cron, scheduled-tasks

我创建了一个部署在 Azure 上的 ASP.NET 应用程序。

每当我想在 Azure 上发布它时，我都会使用一个登台服务器进行部署，在登台测试所有内容之后，我只需交换它们。

但是有一个问题，我有一些启动任务会为 cron 作业创建一些计划任务。因此，这些任务也从暂存复制到生产服务器，并且 cron 作业在生产中运行两次，第二次在暂存中运行。但我希望它们只在生产上运行，而不是在登台上运行。

如何防止这种重复的 cron 作业问题？请给我一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:15:40.497

没有简单的方法来区分登台和生产环境。如果我没记错的话，您可以使用服务器管理 REST Api 来获取有关当前部署的更多详细信息。您只需要获取 RoleEnvironment.DeploymentId 并通过提供有效的 X509 证书与 REST Api 进行通信。

[http://msdn.microsoft.com/en-us/library/windowsazure/ee460806.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee460806.aspx)

# wix - System.diagnostics 日志记录问题 + Wix 应用程序名称更改

> ID：15675616
> 
> 赞同：0
> 
> 时间：2013-03-28T06:32:53.193
> 
> 标签：wix, wix3.6, system.diagnostics, tracelistener

在我的应用程序中，我配置了 Trace 侦听器，如下所示

“HelloWorld”是我的**AssemblyName**和**命名空间**

```
<system.diagnostics>
<sources>
  <source name="DebugCategory" switchName="DebugSwitch" switchType="System.Diagnostics.SourceSwitch">
    <listeners>
      <remove name="Default"/>
      <!-- Add the listeners below -->
      <add name="LogFile"/>
    </listeners>
  </source>
</sources>
<sharedListeners>
 <add name="Console" type="System.Diagnostics.ConsoleTraceListener" initializeData="true"/>
 <add name="LogFile" type="HelloWorld.Diagnostics.FileLogTraceListener, HelloWorld" initializeData="HelloWorld.log" traceOutputOptions="DateTime" cycle="Month"/>
</sharedListeners> 
```

在使用 WIX 创建安装程序时，在我的 WIX 文件中，我会将 Target exe 文件从“HelloWorld.exe”变为**“MyWorld.exe”**，如下所示

```
 <Component Id="MyWorld.exe" Guid="*">
    <File Id="MyWorld.exe" Name="MyWorld.exe"
        DiskId="1" Source="HelloWorld.exe" />
    <Shortcut Id="HelloWorld.menu.exe" Name="Hello world application" Directory="McnMenu" Advertise="yes" WorkingDirectory="INSTAL32LLOCATION" />
  </Component> 
```

由于**EXE**名称发生了变化，因此 Tracelistener 不会创建日志文件。

目标名称应该是“Myworld.exe”，如果我将文件元素还原为

```
 <File Id="HelloWorld.exe" Name="HelloWorld.exe" /> 
```

它运作良好

谁能帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:21:31.270

在 .config 文件的这一行中：

```
<add name="LogFile" type="HelloWorld.Diagnostics.FileLogTraceListener, HelloWorld" initializeData="HelloWorld.log" traceOutputOptions="DateTime" cycle="Month"/> 
```

你有`type="HelloWorld.Diagnostics.FileLogTraceListener, HelloWorld"`. 那是对程序集中的类的引用。程序集名称（文件名）是逗号后面的部分。因此，您的 .config 文件需要将程序集（在您的情况下为可执行文件）命名为“HelloWorld”。

要修复，您可以保留文件名 HelloWorld.exe（如您所见）或更改 .config 文件，如下所示：

```
<add name="LogFile" type="HelloWorld.Diagnostics.FileLogTraceListener, MyWorld" initializeData="HelloWorld.log" traceOutputOptions="DateTime" cycle="Month"/> 
```

注意逗号后面的`MyWorld`。`type`

# java - JSF 1.2：第一次设置下拉列表选项时未更新

> ID：15675621
> 
> 赞同：2
> 
> 时间：2013-03-28T06:33:12.907
> 
> 标签：java, jsf-1.2

我已经使用 jsf 1.2 编写了一个程序。在这个程序中，用户需要选择他的**国家、州**和**城市**。当他选择一个**国家**时，他必须在下拉列表中看到其中的州列表；当他选择一个州时，他必须在下拉列表中看到其中的城市。

为此，我创建了 2 个类、1 个内部类和一个 jsf 页面。

当我选择一个 country 时，我可以看到 state 的下拉列表立即显示。

问题是当状态改变时，不会立即看到城市的下拉菜单。只有在第二次状态变化之后，才能看到城市的下降。

（注意：我无法删除`cityChangeListener()`此代码中的方法，因为我需要使用国家代码、州代码、城市代码和随机数生成 id。）

任何帮助将不胜感激。

这是我的代码（4个文件）：

文件：faces-config.xml

```
<?xml version='1.0' encoding='UTF-8'?>
<faces-config version="1.2" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd">
    <managed-bean>
        <managed-bean-name>formBackingBean</managed-bean-name>
        <managed-bean-class>FormBackingBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope></managed-bean>
</faces-config> 
```

文件：newjsf.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib prefix="f" uri="http://java.sun.com/jsf/core"%>
<%@taglib prefix="h" uri="http://java.sun.com/jsf/html"%>
<f:view>
    <h:form>
        <h:inputText
            id="input"
            value="#{formBackingBean.input}"
            immediate="true"
            disabled="true"
            />
        <br/>
        <h:selectOneMenu
            id="country"
            value="#{formBackingBean.country}"
            valueChangeListener="#{formBackingBean.countryChangeListener}"
            immediate="true"
            onchange="submit();"
            >
            <f:selectItems
                id="countries"
                value="#{formBackingBean.countries}"
                />
        </h:selectOneMenu>
        <br/>
        <h:selectOneMenu
            id="state"
            value="#{formBackingBean.state}"
            valueChangeListener="#{formBackingBean.stateChangeListener}"
            immediate="true"
            onchange="submit();"
            rendered="#{formBackingBean.states!=null}"
            >
            <f:selectItems
                id="states"
                value="#{formBackingBean.states}"
                />
        </h:selectOneMenu>
        <br/>
        <h:selectOneMenu
            id="city"
            value="#{formBackingBean.city}"
            immediate="true"
            onchange="submit();"
            rendered="#{formBackingBean.cities!=null}"
            valueChangeListener="#{formBackingBean.cityChangeListener}"
            >
            <f:selectItems
                id="cities"
                value="#{formBackingBean.cities}"
                />
        </h:selectOneMenu>
    </h:form>
</f:view> 
```

文件：FormBackingBean.java

```
import java.util.List;
import javax.faces.context.FacesContext;
import javax.faces.event.ValueChangeEvent;
import javax.faces.model.SelectItem;

public class FormBackingBean {

    private String input;
    private String country;
    private String state;
    private String city;
    private List<SelectItem>countries=GeoMapLister.WORLD.getNamesOfPlacesWithin();//MapLister.countryList;
    private List<SelectItem>states=null;
    private List<SelectItem>cities=null;
    public FormBackingBean() {
    }

    public String getCity() {
        return city;
    }

    public String getCountry() {
        return country;
    }

    public String getState() {
        return state;
    }

    public void setCity(String city) {
        this.city = city;
        FacesContext.getCurrentInstance().renderResponse();
    }

    public void setCountry(String country) {
        this.country = country;
        FacesContext.getCurrentInstance().renderResponse();
    }

    public void setState(String state) {
        this.state = state;
    }

    public List<SelectItem> getCities() {
        return cities;
    }

    public List<SelectItem> getCountries() {
        return countries;
    }

    public List<SelectItem> getStates() {
        return states;
    }

    public void setCities(List<SelectItem> cities) {
        this.cities = cities;
    }

    public void setCountries(List<SelectItem> countries) {
        this.countries = countries;
    }

    public void setStates(List<SelectItem> states) {
        this.states = states;
    }

    public String getInput() {
        return input;
    }

    public void setInput(String input) {
        this.input = input;
    }

    public void countryChangeListener(final ValueChangeEvent valueChangeEvent){
        input=valueChangeEvent.getNewValue().toString();
        states=GeoMapLister.WORLD.getPlacesWithin().get(input).getNamesOfPlacesWithin();
        state=null;
        cities=null;
        city=null;
        FacesContext.getCurrentInstance().renderResponse();
    }
    public void stateChangeListener(final ValueChangeEvent valueChangeEvent){
        input=valueChangeEvent.getNewValue().toString();
        cities=GeoMapLister.WORLD.getPlacesWithin()
                .get(country).getPlacesWithin().get(input)
                .getNamesOfPlacesWithin();
        city=null;
        FacesContext.getCurrentInstance().renderResponse();
    }
    public void cityChangeListener(final ValueChangeEvent valueChangeEvent){
        input=valueChangeEvent.getNewValue().toString();
        FacesContext.getCurrentInstance().renderResponse();
    }
} 
```

文件：GeoMapLister.java

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import javax.faces.model.SelectItem;

public class GeoMapLister {
    public static class GeographicalLocation{
        private final GeographicalLocation parent;
        private final String code;
        private final String name;
        private final List<SelectItem>namesOfPlacesWithin;
        private final HashMap<String,GeographicalLocation>placesWithin;

        public GeographicalLocation(GeographicalLocation parent,String code, String name,boolean leaf) {
            this.parent = parent;
            this.name = name;
            this.code= code;
            ArrayList<SelectItem> namesofplaceswithin = null;
            HashMap<String,GeographicalLocation> placeswithin = null;
            if(!leaf){
                namesofplaceswithin = new ArrayList<SelectItem>();
                namesofplaceswithin.add(new SelectItem(null, "- select -"));
                placeswithin = new HashMap<String,GeographicalLocation>();
                placeswithin.put(null, null);
            }
            this.namesOfPlacesWithin = namesofplaceswithin;
            this.placesWithin = placeswithin;
        }

        public String getName() {
            return name;
        }

        public GeographicalLocation getParent() {
            return parent;
        }

        public List<SelectItem> getNamesOfPlacesWithin() {
            return namesOfPlacesWithin;
        }

        public String getCode() {
            return code;
        }

        public GeographicalLocation addPlaceWithin(String code,String name,boolean leaf){
            GeographicalLocation newGeographicalLocation = new GeographicalLocation(this, code,name,leaf);
            placesWithin.put(code,newGeographicalLocation);
            namesOfPlacesWithin.add(new SelectItem(code, name));
            return newGeographicalLocation;
        }

        public HashMap<String, GeographicalLocation> getPlacesWithin() {
            return placesWithin;
        }

        List<SelectItem> getPlacesWithin(String input) {
            return placesWithin.get(input).namesOfPlacesWithin;
        }

    }

    public static final GeographicalLocation WORLD=new GeographicalLocation(null, "WORLD","WORLD",false);

    static
    {
        GeographicalLocation IN = WORLD.addPlaceWithin("IN", "India", false);
        GeographicalLocation MH = IN.addPlaceWithin("MH", "Maharashtra", false);
        MH.addPlaceWithin("MU", "Mumbai", true);
        MH.addPlaceWithin("PU", "Pune", true);
        MH.addPlaceWithin("NA", "Nashik", true);
        GeographicalLocation KA = IN.addPlaceWithin("KA", "Karnataka", false);
        KA.addPlaceWithin("BA", "Bangalore", true);
        KA.addPlaceWithin("MA", "Mangalore", true);
        GeographicalLocation BE = IN.addPlaceWithin("BE", "West Bengal", false);
        BE.addPlaceWithin("KO", "Kolkata", true);
        BE.addPlaceWithin("KH", "Kharagpur", true);

        //--------------
        GeographicalLocation UK = WORLD.addPlaceWithin("UK", "U.K.", false);
        GeographicalLocation YO = UK.addPlaceWithin("YO", "York", false);
        YO.addPlaceWithin("SS", "Sussex", true);
        YO.addPlaceWithin("MS", "Middlesex", true);

        //--------------
        GeographicalLocation US = WORLD.addPlaceWithin("US", "U.S.A.", false);
        GeographicalLocation NY = US.addPlaceWithin("NY", "New York", false);
        NY.addPlaceWithin("NC", "New York city", true);
        NY.addPlaceWithin("NU", "New York urban", true);
        GeographicalLocation CA = US.addPlaceWithin("CA", "California", false);
        CA.addPlaceWithin("WA", "Washington, district of California", true);
        CA.addPlaceWithin("SI", "Silicon Valley", true);
        CA.addPlaceWithin("VS", "Very-Silly-Con Valley", true);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:58:59.657

你试过在这里阅读[吗](http://balusc.blogspot.com/2007/10/populate-child-menus.html)？有一个适用于子菜单的示例。

# java - How to parse the below xml code?

> ID：15675623
> 
> 赞同：0
> 
> 时间：2013-03-28T06:33:29.410
> 
> 标签：java, xml

I have sale tag as child node that exists for multiple times but in that Employee tag doesn't exists for all sale tag.need to parse this xml.Got Null pointer exception when there is no employee tag.How to parse this xml even if some child tag name doesn't exists?

```
<?xml version="1.0" encoding="ISO-8859-1"?>
   <Transactions>
      <DocumentInfo TransferType="Transactions" Copyright="2010, Hectronic GmbH" CreatedBy="HecPoll">
       <CreateDate Year="2011" Month="7" Day="13"/>
       <CreateTime Hour="6" Minute="0" Second="16"/>
      </DocumentInfo>
      <DocumentData>
      <Sale RcpNum="151" Amount="228.760" Station="1" Customer="000003" Terminal="1">
        <Date Year="2011" Month="07" Day="12"/>
        <Time Hour="07" Minute="23" Second="00"/>
        <ArticleSale Quantity="6.020" SglPriceAsSold="38.000" SglPriceAsStored="38.000" SglPrice="38.000" Amount="228.760" FCCAmount="228.760" Taxrate="18" LogicalFPNumber="1" TankNumber="3" ArtNum="3" SaleNum="1"/>
        <Payment PAN="000000002117904490D" Amount="228.760" TenderCode="0" PayNum="1"/>
        <Employee Lastname="V KALYANI"/>
        <Vehicle LicensePlate="10K"/>
      </Sale>
      <Sale RcpNum="255" Amount="6650.000" Station="1" Customer="ZZZZZZ" Terminal="0">
        <Date Year="2011" Month="07" Day="12"/>
        <Time Hour="07" Minute="24" Second="00"/>
        <ArticleSale Quantity="175.000" SglPriceAsSold="38.000" SglPriceAsStored="38.000" SglPrice="38.000" Amount="6650.000" FCCAmount="6650.000" Taxrate="19" LogicalFPNumber="1" TankNumber="1" ArtNum="3" SaleNum="1"/>
        <Payment PAN="000000001885018677D" Amount="6650.000" TenderCode="0" PayNum="1"/>
      </Sale>
      <Sale RcpNum="152" Amount="3078.000" Station="1" Customer="000003" Terminal="1">
        <Date Year="2011" Month="07" Day="12"/>
        <Time Hour="07" Minute="27" Second="00"/>
        <ArticleSale Quantity="81.000" SglPriceAsSold="38.000" SglPriceAsStored="38.000" SglPrice="38.000" Amount="3078.000" FCCAmount="3078.000" Taxrate="18" LogicalFPNumber="1" TankNumber="3" ArtNum="3" SaleNum="1"/>
        <Payment PAN="000000002117928224D" Amount="3078.000" TenderCode="0" PayNum="1"/>
        <Employee Lastname="A MUNIYANDI"/>
        <Vehicle LicensePlate="10F"/>
      </Sale>
   </DocumentData>
</Transactions> 
```

Thanks,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:01:35.383

我假设您正在使用 dom 解析器。如果您正在使用`getElementsByTagName()`方法，如果没有找到这样的元素，它将返回 null。您最好检查 Employee 标签的空值。

# iphone - 如何在表格视图中设置三个图像打开/关闭/暂停按钮并在 iphone 中相应地获取价值

> ID：15675625
> 
> 赞同：0
> 
> 时间：2013-03-28T06:33:30.677
> 
> 标签：iphone, objective-c, uibutton, tableview

我需要以循环方式将三个图像**打开/关闭/暂停**按钮。我创建了一个带有按钮和标签的自定义单元格。我需要根据按钮上按下的图像获取单元格的值。

按钮循环就像：

> 开->关-->暂停-->开-->关

默认状态是暂停。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:40:37.477

```
 if ([cell.button.currentImage isEqual:[UIImage imageNamed:@"on.png"] ]){

     // set off image
   }
  else if([cell.button.currentImage isEqual:[UIImage imageNamed:@"off.png"] ]){
      // set pause image
   }
 else{
        // set ON image
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:50:32.747

这听起来适合您的控制器。

理想情况下，控制器将拥有知道在单元格中将按钮设置为什么状态的信息——否则您首先如何创建单元格（in `tableView:cellForRowAtIndexPath:`）？

当状态需要更改时（无论何时按下按钮？），您可以`reloadData`在其 tableview 上调用控制器（或更细粒度的每行或每节方法之一）来更新 UI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T07:00:16.560

您可以使用枚举类型和委托方法创建具有某些属性的多个值的 UIButton 的子类，您可以在其中根据按钮的更改状态更改单元格的标签文本。

```
typedef enum {
  TriButtonValueOn,
  TriButtonValueOff,
  TriButtonValuePause
} TriButtonValue

@class TriButton;

@protocol TriButtonDelegate <NSObject>

-(void)triButtonStateChanged:(TriButton *)button;

@end

@interface TriButton:UIButton
@property (nonatomic,retain) id<TriButtonDelegate> delegate;
@property (nonatomic) TriButtonValue currentState; 
```

同时在TriButton的.m文件中

```
-(void)setCurrentState:(TriButtonValue)value{
  switch(value){
    case TriButtonValueOn:
      self.image = ...
      break;
    case TriButtonValueOff:
      self.image = ...
      break;
      ...
   ...
  }
  [self.delegate triButtonStateChanged:self];
} 
```

在您的 viewController 的委托方法中

```
-(void)triButtonStateChanded:(TriButton *)button{
  UITableViewCell *cell = (UITableViewCell *)[button superview];
  UILabel *textLbl = (UILabel *)[cell viewWithTag:tagOfLabel];
  [textLbl setText:@"state change to ..."]; //set it according to button.currentState
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T07:06:57.300

试试这个....

```
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
    {
            static NSString *CellIdentifier = @"SearchUserCustomCell";
            SearchUserCustomCell *cell = (SearchUserCustomCell *)[tblUser dequeueReusableCellWithIdentifier:CellIdentifier];
            if(cell == nil) 
            {
                    NSArray* nib = [[NSBundle mainBundle] loadNibNamed:@"SearchUserCustomCell" owner:self options:nil];
                    cell = [nib objectAtIndex:0];
                    cell.showsReorderControl = NO;
                    cell.selectionStyle = UITableViewCellSelectionStyleNone;
                    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
                    cell.backgroundColor=[UIColor clearColor];
                    [cell.button addTarget:self action:@selector(buttonClick:) forControlEvents:UIControlEventTouchUpInside];
            }
            cell.button.tag = indexpath.row;
    } 
```

和按钮单击方法....

```
 -(IBAction) buttonClick:(id)sender {
            UIButton *button = (UIButton *) sender;

            if (button.imageView.image == [UIImage imageNamed:@"on.png"]) 
            {
                    [button setImage:[UIImage imageNamed:@"off.png"] forState:UIControlStateNormal];
            }
            else if  (button.imageView.image == [UIImage imageNamed:@"off.png"]) 
            {
                    [button setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
            }
            …..
    } 
```

# hottowel - 升级 Hot Towel NuGet 包后的问题

> ID：15675627
> 
> 赞同：2
> 
> 时间：2013-03-28T06:33:58.587
> 
> 标签：hottowel

我最近在升级我创建的基于**Hot Towel SPA Visual Studio 模板**的项目时遇到了问题。我有一个“时刻”，不小心`update-package`在 NuGet 包管理器控制台中运行了该命令，这触发了我所有 NuGet 包的更新——包括 Hot Towel NuGet 包。

这将我的项目升级到最新的 Hot Towel 版本并重新添加我之前从 Hot Towel 创建的原始启动项目中删除或重命名的所有示例视图、视图模型等。NuGet 升级也无法刷新我有意（`\scripts\_references.js`, `\App_Start\BundleConfig.cs`）或无意更改的文件（其中 VS 在我在 IDE 中打开的某些文件中标准化了制表符\空白）。

有没有其他人经历过这个？

您似乎不太可能为任何基于模板构建的项目更新 Hot Towel NuGet 包。我可以在项目生命周期的后期看到更新依赖项，如 Breeze、Bootstrap、Toastr 等......，但不是 Hot Towel。

创建项目后是否最好只解开 NuGet for Hot Towel？这将防止 Hot Towel 的意外更新将启动代码重新引入您的项目。

尽管存在这一挑战，但事实证明，热毛巾是 SPA 的一个很好的起点。我真的很喜欢和它一起工作。

谢谢，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:39:00.393

理查德 - 如果您不想重新获得整个包裹，这似乎是一个不错的计划。热毛巾是一种方便，真正的目的是作为一个起点。不过，您可能想跟上它，也许在一个新项目中，看看有时会合并哪些新版本。例如，我准备很快发布对 Hot Towel 的更新，其中包含对库的一些更新。在您的情况下，您可能希望删除 HotTowel 的 NuGet 包，但创建一个新项目。安装新的 VSIX（准备就绪）并查看依赖库中有什么不同。

我也会写博客：）

# maven - 通过 IntelliJ IDEA 应用 mvn 命令

> ID：15675629
> 
> 赞同：0
> 
> 时间：2013-03-28T06:34:03.800
> 
> 标签：maven, intellij-idea

如何通过 intelliJ IDEA 运行以下 mvn 命令？我可以从终端运行这些命令，但是如何在 IDE 中为在其中打开的项目执行相同的操作？

```
--mvn clean dbmaintain:updateDatabase
--mvn clean package 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:54:42.357

转到“编辑配置”并创建一个新的“Maven 运行/调试配置”。在那里您可以定义命令行和工作目录。

另一种方法是：打开 de maven 项目视图（在窗口右侧）展开您的模块，展开“生命周期”，选择您需要运行的阶段。然后一个简单的右击会显示一个弹出窗口，允许您“运行”阶段或创建一个预先配置了工作目录和阶段的运行配置。（你可以随时编辑）

# php - 当两者之间的差异很小时，为什么要有单独的添加和编辑视图？

> ID：15675633
> 
> 赞同：3
> 
> 时间：2013-03-28T06:34:18.397
> 
> 标签：php, model-view-controller, zend-framework2

在阅读完 Zend Framework2 教程后，我想知道这一点，但它可能通常适用于 MVC 逻辑......

在本教程中，示例将引导您创建一个添加视图 ( `module/Album/view/album/album/add.phtml`)，然后让您创建一个编辑模板 ( `module/Album/view/album/album/edit.phtml`)，其中的大部分代码都是重复的。编辑脚本基本上有一些额外的逻辑来检查提供的 id，但会为用户提供相同的表单。

现在，在我没有完全使用 MVC 约定的类似情况下，我将有一个脚本来处理添加和编辑选项；如果提供了 id，该逻辑将假定一个“编辑”操作，并尝试检索该 id 的数据库记录以填充表单字段，如果提供了无效的 id，则返回错误。

如果跨应用程序的所有数据库交互都遵循这种方法，那么 MVC 的教科书方法似乎并不能很好地封装 DRY 原则。

我仍在尝试围绕一些 MVC 概念进行思考，但是除了命名约定之外，编辑操作和添加操作不能（或不应该）使用相同的视图模板是否有某些原因？

我看到路由设置为期望模板名称，如教程中所示，但也许我可以调用视图模板来呈现通用表单`process.phtml`并将其包含在`add.phtml`and`edit.phtml`中。这是一种明智的方法吗？是否有一些理由我应该避免将其作为解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:07:04.210

到目前为止，您的`add/edit`观点之间的差异很小，因此您很想拥有相同的观点。

但是，更大的问题是，差异会持续多久。一些添加/修改功能，一些调整，然后这些差异不会那么小。

IMO，这些是 2 个独立的功能，因此从更好的可读性和维护的角度来看，应该将它们保存在单独的关注点（视图）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:53:39.277

如果差异很小，您不需要单独的视图进行编辑和添加。

1.  对记录 ID 使用隐藏字段并在编辑的情况下设置其值，在添加的情况下将其值设置为空白
2.  在编辑的情况下获取记录的详细信息，并在编辑的情况下使用获取的记录数据填充输入字段。

在 Zend 中，您可以为两个操作设置相同的视图，例如：

```
$view = new ViewModel(array('variable'=>$value));
    $view->setTemplate('module/controler/action.phtml'); // path to phtml file under view folder
    return $view; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:52:17.203

如果您不想这样做，则无需使用编辑模板。对于添加/编辑，我们可以使用相同的模板来避免代码重复。如果您想对添加和编辑使用相同的模板，您可以通过呈现指定的模板来实现。

例子：

```
$this->_helper->viewRenderer('add');
$this->view->mode           =   'edit'; 
```

这里 add.phtml 在编辑动作中渲染，mode 指定操作是编辑模式，并根据添加/编辑模式在模板中进行必要的更改。仅此而已

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T07:38:08.790

当我第一次编写相册教程时，为了帮助用户理解 MVC 以及它在 Zend Framework 中的工作原理，用它们自己的视图显示这两个单独的操作很有帮助。

在我自己的应用程序中，我有一个处理 CRUD 类型的添加和编辑的操作和视图，因为正如其他人所指出的，差异是微不足道的。有时添加可能与更新有很大不同。在那些情况下，我分开。

# jquery - 将连字符替换为 div 中给出的文本的空格

> ID：15675641
> 
> 赞同：4
> 
> 时间：2013-03-28T06:34:55.057
> 
> 标签：jquery

```
<div>This-is-text-1</div> 
```

给定代码行

```
var value = $('div').text(); 
```

我需要将连字符替换为`-`空白`。我需要的输出是“This is text 1”如何在这里使用 jQuery 替换功能？`

 `* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T06:39:22.737

尝试

```
var value = $('div').text();
$('div').text(value.replace(/\-/g, " ")); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/g7BU8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:43:06.960

使用正则表达式替换所有出现的`-`：

```
var value = $('div').text();
$('div').html(value.replace(/-/g, " "));
   //--------------------------^---^-----g is used to replace all occurrences and
   //------------------------------------" " put a space too to replace with 
```

### [小提琴](http://jsfiddle.net/4qgJy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:38:29.687

试试这个

```
$('div').text($('div').text().replace(/-/g, ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T06:39:52.787

试试这个-

```
$('div').html().replace("-"," "); 
````

# android - 来自照片库的Android图片的真实路径

> ID：15675642
> 
> 赞同：1
> 
> 时间：2013-03-28T06:35:02.230
> 
> 标签：android, titanium, titanium-modules

我想对照片库中的图片进行图像处理。

所以，我正在通过读取图像文件来开发适用于 android Bitmap 的模块。从我的 Titanium 应用程序中，我打开照片库并将 event.media.file.nativePath 发送到我的模块。

但是，它似乎找不到它，因为当我创建一个

```
File file = new File(path) 
```

我得到一个 file.exists() == false。我从媒体上得到的路径在我的手机上是这样的：file:///content://........../data/data....jpg

有没有办法从 Ti.Media.openPhotoGallery 的媒体创建 Android 位图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:39:17.453

"file:///content://......../data/data....jpg" 这个文件路径好像在黑莓上。你可以像这样获得外部存储：

```
Environment.getExternalStorageDirectory().getAbsolutePath(); 
```

然后，您可以将路径添加到您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:52:24.600

请！试试下面的示例代码。

```
Uri selectedImageUri = **put your content url**;
String[] filePathColumn = {MediaStore.Images.Media.DATA};
 cursor = getContentResolver().query(
, filePathColumn, null, null, null);
.moveToFirst();

 columnIndex = cursor.getColumnIndex(filePathColumn[0]);
 filePath = cursor.getString(columnIndex); 
```

# google-maps - 开放层初学者

> ID：15675646
> 
> 赞同：0
> 
> 时间：2013-03-28T06:35:10.877
> 
> 标签：google-maps, openlayers, epsg

我是开放层的初学者，我很难理解这段代码的含义是什么 var lonlat = new OpenLayers.LonLat(-1.788, 53.571).transform( new OpenLayers.Projection("EPSG:4326"), //从 WGS 1984 new OpenLayers.Projection("EPSG:900913") // 转换为 Spherical Mercator );

这里 LonLat 的意思是经度和纬度吗？EPSG：4326和EPSG：900913在我发现EPSG代表欧洲石油调查组的某些地方是什么意思，请不要在EPSG之后的这些值是什么意思，任何人都可以帮助理解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:11:22.357

正如代码所示，这是一个投影。直接来自维基百科：[EPSG:4326](http://spatialreference.org/ref/epsg/4326/)。

是的，[LonLat](http://dev.openlayers.org/docs/files/OpenLayers/BaseTypes/LonLat-js.html)对象代表经度/纬度对。

# javascript - js文件在iMacros中不起作用为什么

> ID：15675654
> 
> 赞同：0
> 
> 时间：2013-03-28T06:35:43.583
> 
> 标签：javascript, playback, imacros

我有一个 javascript 代码，它首先在 imacros 中工作，但现在它不起作用。循环不播放。谁能告诉我为什么会发生这种情况。下面是代码。

请解决这个问题，为什么现在这个 javascript 在 imacros 中不起作用。

```
 var i, retcode;
   \var report;
   var macrolist = new Array();

   /* Standard Demo Macros  */
   macrolist.push("Demo-Firefox/FillForm.iim");
   macrolist.push("Demo-Firefox/Frame.iim");
   macrolist.push("Demo-Firefox/Filter.iim");
   macrolist.push("Demo-Firefox/Tabs.iim");
   macrolist.push("Demo-Firefox/Javascript-Dialogs.iim");
   macrolist.push("Demo-Firefox/SlideShow.iim");
   macrolist.push("Demo-Firefox/TagPosition.iim");
   /* Macros that save something and/or create logs  */
   macrolist.push("Demo-Firefox/Download.iim");
   macrolist.push("Demo-Firefox/SaveAs.iim");
   macrolist.push("Demo-Firefox/SavePDF.iim");
   /* Macros that create reports */
   macrolist.push("Demo-Firefox/Stopwatch.iim");
   /* Macros that extract information */
   macrolist.push("Demo-Firefox/ExtractAndFill.iim");
   macrolist.push("Demo-Firefox/Extract.iim");
   macrolist.push("Demo-Firefox/ExtractURL.iim");
   macrolist.push("Demo-Firefox/ExtractRelative.iim");

   iimDisplay("Start Self Test");

   report  =  "Self-Test Report\n\n";

   for (i = 0; i < macrolist.length; i++) {
iimDisplay("Step "+(i+1)+" of "+macrolist.length + "\nMacro: "+macrolist[i]);
retcode = iimPlay(macrolist[i]);
report += macrolist[i];
if (retcode < 0) {
    report += ": "+iimGetLastError();
} else {
    report += ": OK";
    /* display the FIRST extracted item in report*/
    s = iimGetLastExtract(1);
    if ( s != "" )  report += ", Extract: "+s;
}
report += "\n";
   }
   iimDisplay("Test complete");

   alert ( report ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:44:19.253

```
var i, retcode;
   \var report;
   var macrolist = new Array(); 
```

变量报告；有 \ 并且它会破坏您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:40:50.977

尝试安装最新的 firefox 19 并使用最新版本重新安装 imacros。

# grails - 为什么只在 Grails 中定义为 POST 的控制器中生成的 allowedMethods？

> ID：15675659
> 
> 赞同：0
> 
> 时间：2013-03-28T06:36:10.983
> 
> 标签：grails, controller, http-method

在控制器中为域类生成的代码只允许 POST 方法用于“保存”、“更新”和“删除”。这仅仅是因为 GET 方法会显示 URL 中的参数还是出于其他考虑？就像 GET 的语义是用于获取，而 POST 是用于创建或更新？

我正在使用 Grails 2.1.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:25:47.297

您提到的考虑是正确的，在发布数据时您不希望将该数据放入您的 URL。这可以被缓存等。另一个考虑因素是越来越多的框架遵循 REST 原则，其中描述了每个 HTTP 方法将执行的操作。

这里有更多信息： [哪些 HTTP 方法与哪些 CRUD 方法相匹配？](https://stackoverflow.com/questions/6203231/which-http-methods-match-up-to-which-crud-methods)

# python - django-celery PeriodicTask 使用 DatabaseScheduler 获取上次运行时间

> ID：15675660
> 
> 赞同：1
> 
> 时间：2013-03-28T06:36:14.380
> 
> 标签：python, django, celery

使用 django-celery 和后端`djcelery.schedulers.DatabaseScheduler`，我需要访问最后一次运行时间`celery.task.PeriodicTask`

[2.4 版](https://django-celery.readthedocs.org/en/2.4/reference/djcelery.models.html)的旧文档说有一个类`PeriodicClassMeta`包含任务的元数据，包括`last_run`. 但是，文档`django-celery`不包含模型的任何使用信息或如何设置`PeriodicTasks`。

所以，我的问题是，你如何`PeriodicTasks`在 django-celery 中设置，使用`DatabaseScheduler`后端并访问与上次运行相关的元数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:16:33.483

假设此任务仅作为周期性任务运行，并且任务运行时间短于周期性任务的间隔。

```
from djcelery.models import PeriodicTask, TaskMeta

last_run = PeriodicTask.objects.only('last_run_at')\
                               .get(task=task_name).last_run_at
task_meta = TaskMeta.objects.filter(task_id=task_name, date_done__gte=last_run)\
                            .order_by('date_done').only('meta')[:1][0].meta 
```

# excel - 简单的excel宏

> ID：15675661
> 
> 赞同：0
> 
> 时间：2013-03-28T06:36:15.237
> 
> 标签：excel, vba, colors

我刚刚开始研究 Excel 宏。请让我知道以下代码有什么问题：

```
Sub color_red()

Dim range As range

For R = 1 To 20
    If Cells(R, 1).Value = 1 Then range(R, R).Interior.ColorIndex = 3
Next R

End Sub 
```

显示的错误信息：

> 对象变量或未设置块变量

提前感谢您的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:38:39.467

我看到你仍然有这个代码的问题。请尝试这个简单的子程序，这可能是您需要的：

```
Public Sub ColorRowIf()
    Dim r As Long
    For r = 1 To 20
        If Cells(r, 1).value = 1 Then
           Cells(r, 1).EntireRow.Interior.ColorIndex = 3
        End If
    Next r
End Sub 
```

另请注意，使用**“Cells()”**不是一个好方法，但为了简单起见，我将其包括在内（如要求的那样）。**'Cells()'**将始终指代活动的工作表单元格，但情况并非总是如此。因此，您应该使用工作表的完整引用（通过代码名称方法） - 所以在这个例子中它应该说例如： **Sheet1.Cells(r,1).Value = 1**。另外，请记住**Sheet1**不是选项卡名称，它是您在项目窗口中看到的代码名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:39:53.393

您不能使用任何 VBA 的变量名称：关键字、函数、对象名称、集合名称等。尝试将变量名称`range`从`rngTable`.

**在该帖子的不同区域以评论形式写入**附加信息后进行编辑：****

 **将您的`if`代码行更改为：

```
If Cells(R,1).Value = 1 Then Cells(R,1).EntireRow.Interior.ColorIndex =3 
```

这将为 row 中的所有工作表列着色`R`。要为某个范围着色，例如在 10 列中，您可以使用此行而不是您的`if`：

```
If Cells(R,1).Value = 1 Then Cells(R,1).Resize(1,10).Interior.ColorIndex =3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:52:35.047

@KazJaw 是正确的，您不能使用关键字作为变量名。但是`range`or`rngTable`变量在设置之前仍然使用。

您仍然可以使用`Range`变量，但为什么不使用与 if 语句中相同的寻址方式呢？

```
If Cells(r, 1).Value = 1 Then Cells(r, 1).Interior.ColorIndex = 3 
```

否则，您必须在使用之前设置范围对象：

```
Set rngTable = Cells(r, 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-10T18:49:58.550

我觉得很多人都发现了你的变量“R”除了 666 字节之外没有定义。

声明您将要使用的变量对于使代码正常工作是一件很重要的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-29T05:34:06.923

您可以使用 Cells 函数代替范围。您必须参考工作表才能使用范围。由于没有提到任何东西，它的抛出对象变量或块变量没有设置。

```
Sub color_red()
Dim r As Integer

For r = 1 To 20
If Cells(r, 1).Value = 1 Then Cells(r, r).Interior.ColorIndex = 3
Next r 
```

结束子**

# python - python中的列矩阵表示

> ID：15675667
> 
> 赞同：1
> 
> 时间：2013-03-28T06:36:42.937
> 
> 标签：python, matrix

如何在 python 中表示列矩阵和行矩阵？

```
A =[1,2,3,4] 
```

和

```
 1
 2
 3
 4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T06:45:36.707

矩阵是二维结构。在纯 Python 中，矩阵最自然的表示是列表的列表。

因此，您可以将行矩阵编写为：

```
[[1, 2, 3, 4]] 
```

并将列矩阵写为：

```
[[1],
 [2],
 [3],
 [4]] 
```

这也很好地扩展到*mxn*矩阵：

```
[[10, 20],
 [30, 40],
 [50, 60]] 
```

有关如何在纯 Python 中开发完整矩阵包的示例，请参见[*matfunc.py 。*](http://users.rcn.com/python/download/matfunc.py)它的文档在[*这里*](http://users.rcn.com/python/download/matfunc.htm)。

这是一个使用列表列表表示在普通 python 中进行矩阵乘法的有效示例：

```
>>> from pprint import pprint
>>> def mmul(A, B):
        nr_a, nc_a = len(A), len(A[0])
        nr_b, nc_b = len(B), len(B[0])
        if nc_a != nr_b:
            raise ValueError('Mismatched rows and columns')
        return [[sum(A[i][k] * B[k][j] for k in range(nc_a))
                 for j in range(nc_b)] for i in range(nr_a)]

>>> A = [[1, 2, 3, 4]]
>>> B = [[1],
         [2],
         [3],
         [4]]

>>> pprint(mmul(A, B))
[[30]]

>>> pprint(mmul(B, A), width=20)
[[1, 2, 3, 4],
 [2, 4, 6, 8],
 [3, 6, 9, 12],
 [4, 8, 12, 16]] 
```

正如另一位受访者所提到的，如果您认真对待矩阵运算，那么您应该安装直接支持许多矩阵运算的[*numpy ：*](http://www.numpy.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-26T15:03:14.623

这是我对矩阵函数的实现，它采用矩阵的行数、列数和起始值

```
def matrix(rows, cols, start=0):
    return [[c + start + r * cols for c in range(cols)] for r in range(rows)] 
```

用法：

```
>>> m = matrix(5, 1)
>>> m
[[0], [1], [2], [3], [4]]
>>> m = matrix(3, 3, 10)
>>> m
[[10, 11, 12], [13, 14, 15], [16, 17, 18]] 
```

# jquery - 在页面加载时打开 Reveal 模型不起作用

> ID：15675670
> 
> 赞同：1
> 
> 时间：2013-03-28T06:37:04.517
> 
> 标签：jquery, css, html

我正在开发 Jquery Modal，它可以在 href 点击时轻松打开并显示弹出窗口。
我的**html页面**是

```
<!DOCTYPE html>

    <head>
        <meta charset="utf-8" />
        <title>Reveal Demo</title>

        <link rel="stylesheet" href="reveal.css">   

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.min.js"></script>
        <script type="text/javascript" src="jquery.reveal.js"></script>

        <style type="text/css">
            body { font-family: "HelveticaNeue","Helvetica-Neue", "Helvetica", "Arial", sans-serif; }
            .big-link { display:block; margin-top: 100px; text-align: center; font-size: 70px; color: #06f; }
        </style>
            <script type="text/javascript">

                $(document).ready(function() {
                    $('a[data-reveal-id]').live( 'click',function(e) {
                        e.preventDefault();
                        var modalLocation = $(this).attr('data-reveal-id');
                        $('#'+modalLocation).reveal($(this).data());
                });
            });
        </script>

    </head>
    <body>

        <a href="#" data-reveal-id="myModal">
            Fade and Pop
        </a>    

        <div id="myModal" class="reveal-modal">
            <h1>Reveal Modal Goodness</h1>
            <p>This is a default modal in all its glory, but any of the styles here can easily be changed in the CSS.</p>
            <a class="close-reveal-modal">&#215;</a>
        </div>

    </body>
</html> 
```

> 我的**输出**是

![在此处输入图像描述](../Images/49ac974772dc9eb2c6eddc9c455ee4de.png)

如您所见，单击“Fade and Pop”链接会打开此弹出窗口。

但我想在页面加载时打开这个弹出窗口。我尝试了很多，但我没有得到结果。我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:40:27.867

你在`a`点击事件中调用显示，在`document.ready`应该工作中调用它..

在 document.ready 函数中尝试

```
$(document).ready(function() {  //or  $(window).load(function(){ 
    $('#myModal').reveal($(this).data());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:52:56.640

您需要确保在点击链接弹出窗口和页面加载时都发生这些事情。所以你可以做的只是`.click()`在关闭结束时添加如下，看看这是否适合你。

```
$(document).ready(function() {
   $('a[data-reveal-id]').live( 'click',function(e) {
       e.preventDefault();
       var modalLocation = $(this).attr('data-reveal-id');
       $('#'+modalLocation).reveal($(this).data());
   }).click();
});//-^^^^^^^----------------add this 
```

# python - 在 Django 中使用过滤器获取最新记录

> ID：15675672
> 
> 赞同：114
> 
> 时间：2013-03-28T06:37:21.593
> 
> 标签：python, django, django-models, django-queryset

我正在尝试获取最新的 Django 模型对象，但似乎无法成功。

这些都不起作用：

```
obj = Model.objects.filter(testfield=12).latest() 
```

```
obj = Model.objects.latest().filter(testfield=12) 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2014-02-24T03:31:40.250

查看来自 django 的文档： [https ://docs.djangoproject.com/en/dev/ref/models/querysets/#latest](https://docs.djangoproject.com/en/dev/ref/models/querysets/#latest)

您需要在 latest() 中指定一个字段。例如。

```
obj= Model.objects.filter(testfield=12).latest('testfield') 
```

或者，如果您的模型的 Meta 指定 get_latest_by，您可以`field_name`省略`earliest() or latest()`. Django 将`get_latest_by`默认使用中指定的字段。

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2013-03-28T06:48:39.157

```
obj= Model.objects.filter(testfield=12).order_by('-id')[0] 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2017-09-08T07:12:33.227

[最后一个（）](https://docs.djangoproject.com/en/1.11/ref/models/querysets/#last) [最新的（）](https://docs.djangoproject.com/en/1.11/ref/models/querysets/#latest)

最后注册（）：

```
ModelName.objects.last() 
```

使用最新（）：

```
ModelName.objects.latest('id') 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-03-28T06:55:42.180

`latest`真正设计用于处理日期字段（它可能也适用于其他全排序类型，但不确定）。并且您可以在不指定字段名称的情况下使用它的唯一方法是设置`get_latest_by`meta 属性，如此[处](https://docs.djangoproject.com/en/dev/ref/models/querysets/#latest)所述。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-06-15T19:13:44.323

`obj= Model.objects.filter(testfield=12).order_by('-id')[:1]`是正确的解决方案

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-24T08:42:28.973

您可以在此处与此进行比较。

[![图片](../Images/a9e7edeca06a382f014fe94fc70dfbd4.png)](https://i.stack.imgur.com/49QK0.png)

`latest('created')``order_by('-created').first()` 如果我错了，请纠正我

# c# - 数据库表中每一列的不同 CSS 类

> ID：15675673
> 
> 赞同：-2
> 
> 时间：2013-03-28T06:37:37.553
> 
> 标签：c#, sql, css

我想为每一列赋予不同的 dwign 类（如在 CSS 中）。例如，用户名列以蓝色绘制，放大字体为 30px，将密码绘制为红色，并将其字体更改为“times new romans,12px”。我有以下cs代码与SQL中的数据库通信：

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;

public class MyAdoHelper
{
public static SqlConnection ConnectToDB(string fileName)
{
    string path = HttpContext.Current.Server.MapPath("App_Data/");
    path += "Database.mdf";

    string connString = @"Data Source=.\SQLEXPRESS;AttachDbFileName=" +
        path + ";Integrated Security=True;User Instance=True";

    SqlConnection conn = new SqlConnection(connString);

    return conn;

}
public static void DoQuery(string fileName, string sql)
{
    SqlConnection conn = ConnectToDB(fileName);
    conn.Open();
    SqlCommand com = new SqlCommand(sql, conn);
    com.ExecuteNonQuery();
    conn.Close();
}
public static DataTable ExecuteDataTable(string fileName, string sql)
{
    SqlConnection conn = ConnectToDB(fileName);
    conn.Open();
    DataTable dt = new DataTable();
    SqlDataAdapter tableAdapter = new SqlDataAdapter(sql, conn);
    tableAdapter.Fill(dt);
    return dt;
}
public static string printDataTable(string fileName, string sql)
{
    DataTable dt = ExecuteDataTable(fileName, sql);
    string printStr = "<table border='1'>";
    foreach (DataRow row in dt.Rows)
    {
        printStr += "<tr>";
        foreach (object myItemArray in row.ItemArray)
        {
            printStr += "<td>" + myItemArray.ToString() + "</td>";
        }
        printStr += "</tr>";
    }
    printStr += "</table>";
    return printStr;
}

public static bool IsExist(string fileName, string sql)
{
    bool found;
    SqlConnection conn = ConnectToDB(fileName);
    conn.Open();
    SqlCommand com = new SqlCommand(sql, conn);
    SqlDataReader data = com.ExecuteReader();
    found = (bool)data.Read();
    conn.Close();

    return found;
}
public static int RowsAffected(string fileName, string sql)
{
    SqlConnection conn = ConnectToDB(fileName);
    conn.Open();
    SqlCommand com = new SqlCommand(sql, conn);
    int rowsA = com.ExecuteNonQuery();
    conn.Close();

    return rowsA;
}
} 
```

我想改变“printdataTable”，但我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:20:44.783

添加一个包含你的类名的字符串：

```
string classUserName ="class='username'";
string classPasswords ="class='username'"; 
```

你应该改变这部分：

```
 foreach (object myItemArray in row.ItemArray)
 {
    printStr += "<td>" + myItemArray.ToString() + "</td>";
 } 
```

类似于

```
foreach (DataColumn dataCol in row.Table.Columns)
{
   printStr += String.Format("<td {0}>" + row[dataCol].ToString() + "</td>", dataCol.ColumnName == "UsersColumnName" ? classUserName  : classPasswords);
} 
```

或类似的东西（如果你想使用 ItemArray）

```
for (int i=0;i<row.ItemArray.Length;i++)
{
   //if column 0 of the row (0 element of ItemArray) is the user name column
   printStr += String.Format("<td {0}>" + row.ItemArray[i].ToString() + "</td>", i == 0 ? classUserName  : classPasswords);
} 
```

**编辑：**

我纠正了这两个建议：

**1.**第一个错误是“foreach 语句不能对'System.Data.DataSet' 类型的变量进行操作，因为'System.Data.DataSet' 不包含'GetEnumerator' 的定义”

解决方案：需要“列”属性才能正确迭代。

**2.**第二次不知道“<”操作符

解决方案： row.ItemArray 有一个 Length 属性，而不是 Count 属性。

**编辑2：**

关于您的第二条评论，如果您需要添加另一列，您可以执行以下操作：

```
string classEmails ="class='email'";

   for (int i=0;i<row.ItemArray.Length;i++)
   {
     //if column 0 of the row (0 element of ItemArray) is the user name column
     //if column 1 of the row (1st element of ItemArray) is the password column
     //if column 2 of the row (2nd element of ItemArray) is the email column
     printStr += String.Format("<td {0}>" + row.ItemArray[i].ToString() + "</td>", i == 0 ?    classUserName  : (i == 1 ?  classPasswords : classEmails));
   } 
```

如果数据源中的列多于三元表达式中的项目，则电子邮件类（三元表达式中的最后一个元素）将应用于所有其他列。

在这种情况下，您应该使用一个开关，以允许其他列不被格式化：

```
for (int i=0;i<row.ItemArray.Length;i++)
{
switch(i){
        case 0:
        //if column 0 of the row (0 element of ItemArray) is the user name column
        printStr += String.Format("<td {0}>" + row.ItemArray[i].ToString() + "</td>", classUserName);
        break;
        case 1:
        //if column 1 of the row (1st element of ItemArray) is the password column
        printStr += String.Format("<td {0}>" + row.ItemArray[i].ToString() + "</td>", classPasswords);
        break;
        case 2:
        //if column 2 of the row (2nd element of ItemArray) is the email column
        printStr += String.Format("<td {0}>" + row.ItemArray[i].ToString() + "</td>", classEmails);
        break;
        default:
        //any column you do not want to style
        printStr += "<td>" + row.ItemArray[i].ToString() + "</td>";
        break;
    }
} 
```

# operating-system - Peterson 的解决方案能否在现代 CPU 架构上正常工作？

> ID：15675676
> 
> 赞同：9
> 
> 时间：2013-03-28T06:38:10.433
> 
> 标签：operating-system, critical-section

我正在研究Silberschatz、Galvin 和 Gagne的[操作系统概念中的操作系统。](https://rads.stackoverflow.com/amzn/click/com/0470128720)

在第 229 页，这本书对[Petersons 解决方案](http://en.wikipedia.org/wiki/Peterson%27s_algorithm)进行了说明：

> 由于现代计算机体系结构执行基本机器语言指令（例如加载和存储）的方式，不能保证 Peterson 的解决方案在此类体系结构上正确工作。

我在[Wikipedia](http://en.wikipedia.org/wiki/Peterson%27s_algorithm)上查找了这个，发现这似乎是最接近解释的：

> 大多数现代 CPU 重新排序内存访问以提高执行效率。这样的处理器总是提供一些方法来强制在内存访问流中进行排序，通常是通过内存屏障指令。在重新排序内存访问的处理器上实施 Peterson 和相关算法通常需要使用此类操作才能正确工作，以防止顺序操作以不正确的顺序发生。请注意，即使在不重新排序指令的处理器上也可能发生内存访问的重新排序

我无法理解这意味着什么，或者这甚至是答案。

那么，为什么彼得森的解决方案不能保证适用于现代架构？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T07:04:44.787

在具有一个 CPU 的系统上，Peterson 的算法可以保证工作，因为程序自身的行为是按程序顺序观察的。

在具有多个 CPU 的系统上，该算法可能无法工作，因为在一个 CPU 上发生的事件的程序顺序在另一个 CPU 上可能会有不同的感知。

这可能会导致提前进入临界区（当它仍在被另一个线程使用时）和提前退出临界区（当共享资源的工作尚未完成时）。

因此，需要确保 CPU 内部发生的事件顺序与外部相同。内存屏障可以确保这种序列化。

# ios - textfieldshouldclear：不被 UITextfield 调用

> ID：15675677
> 
> 赞同：1
> 
> 时间：2013-03-28T06:38:16.060
> 
> 标签：ios, uitextfield, popover, uitextfielddelegate

我试图`-(BOOL) textFieldShouldClear:(UITextField *)textField`在点击 UITextField 的清除按钮时调用。我已经设置了我的委托，并且 UITextField 的其他委托方法被正确调用，除了这个。清除按钮在 nib 文件中设置为“始终可见”。

**编辑**

仅供参考，当文本字段的文本发生更改时，我正在显示[FPPopover 。](https://github.com/50pixels/FPPopover)如果我点击清除按钮而不显示弹出框，则清除按钮可以正常工作。但是，如果我在显示弹出框时尝试点击它，则不会调用委托方法。

**代码片段**

```
-(BOOL) textFieldShouldClear:(UITextField *)textField
{
    return YES;
}

- (IBAction)didChangeScripText:(id)sender {

    NSString *text = isPortrait ? symbolTextField.text : landsymbolTextfield.text;

    if(scripList.count == 0)
    {
        if([Logs sharedManager].scripData.count > 0)
            [self extractScrips];
        else
            return;
    }

    //        SAFE_ARC_RELEASE(popover);
//        popover=nil;

        //the controller we want to present as a popover
        if(controller == nil)
            controller = [[scripComboViewController alloc] initWithStyle:UITableViewStylePlain];

        if(controller.scripListFiltered.count > 0)
            [controller.scripListFiltered removeAllObjects];

        controller.delegate = self;
        if(popover == nil){
            popover = [[FPPopoverController alloc] initWithViewController:controller];
            popover.tint = FPPopoverDefaultTint;
        }

    controller.scripListFiltered = [NSMutableArray arrayWithArray:[scripList filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF beginswith[c] %@",text]]];
    NSLog(@"array is: %@",controller.scripListFiltered);

    if(controller.scripListFiltered.count == 0)
    {
        [popover dismissPopoverAnimated:YES];
        return;
    }
        //decide contentsize and arrow dir based on tableview height

        if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        {
            popover.contentSize = CGSizeMake(300, 500);
        }
        else {
            popover.contentSize = CGSizeMake(200, 200);
        }

        //sender is the uitextfield
    float height = isPortrait ? portTable.frame.size.height : landTable.frame.size.height;
    if(height > 0)
        popover.arrowDirection = FPPopoverArrowDirectionDown;
    else
        popover.arrowDirection = FPPopoverArrowDirectionUp;

    if(![popover isModalInPopover])
        [popover presentPopoverFromView:sender];

    [controller reloadTable];

} 
```

出了什么问题？谁能告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:52:52.610

实际上问题是由于**FPPopover**。当它在其视图之外接收到触摸事件时，它会自行关闭，此时无法与外部控件进行交互。因此，如果点击清除按钮，它将用于关闭弹出窗口，然后我可以使用清除按钮。就这样。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-28T06:43:13.257

使用`clearButtonMode`的属性`UITextField`。不需要使用`textFieldShouldClear`方法。

```
textFiled.clearButtonMode = UITextFieldViewModeAlways; 
```

# shell - expr 中的冒号运算符有什么作用？

> ID：15675681
> 
> 赞同：1
> 
> 时间：2013-03-28T06:38:29.307
> 
> 标签：shell, syntax, pattern-matching, matching, colon

原谅我的无知...

我正在查看某人编写的 shell 脚本，他们写了这个：

```
expr "$myvariable" : '0*$' 
```

我不知道这意味着什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T07:19:51.503

expr 中的冒号 : 是匹配运算符。左边的字符串是针对右边的正则表达式进行测试的。正则表达式组 ( ) 捕获任何匹配项。正则表达式用一个字符数替换自己，然后 : 行为有点像数组索引操作 - 你从该位置开始获取左侧字符串（如 Python 中的 somestring[n:] ）

'0*$' 匹配零，任何东西，行尾。我不知道我的变量中有什么，但我猜除非它的值以零字符开头，否则不会有烟花。

在[http://docstore.mik.ua/orelly/unix3/upt/ch36​​_23.htm](http://docstore.mik.ua/orelly/unix3/upt/ch36_23.htm)（来自 O' Reilly Unix 电动工具）

另请参阅[http://pubs.opengroup.org/onlinepubs/7908799/xcu/expr.html](http://pubs.opengroup.org/onlinepubs/7908799/xcu/expr.html) 大约一半

# java - 在风暴拓扑中创建新连接时 Rabbitmq 阻塞

> ID：15675688
> 
> 赞同：1
> 
> 时间：2013-03-28T06:38:41.077
> 
> 标签：java, rabbitmq, apache-storm

我是新来的风暴我在我的 spout 中使用 rabbitmq 从某个队列接收元组，并且有一个客户端正在运行另一台将元组插入该队列的机器我运行了一个简单的 rabbitmq 示例程序，它工作正常但是当我使用它时在风暴喷口内，它被阻挡在

```
connection = factory.newConnection(); 
```

即使我的rabbitmq服务器也在运行并且在我运行示例代码时在同一台机器上运行成功。打印语句 打印到语句

```
System.out.println(" setting host to 192.168.8.218..... "); 
```

下面是我完整的 spout 类。

```
package storm.starter.spout;

import backtype.storm.spout.SpoutOutputCollector;
import backtype.storm.task.TopologyContext;
import backtype.storm.topology.OutputFieldsDeclarer;
import backtype.storm.topology.base.BaseRichSpout;
import backtype.storm.tuple.Fields;
import backtype.storm.tuple.Values;
import backtype.storm.utils.Utils;
import com.rabbitmq.client.ConnectionFactory;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.Channel;
import com.rabbitmq.client.QueueingConsumer;
import java.util.Map;
import java.util.Random;
import java.net.*;
import java.io.*;
import java.lang.Exception;
import java.io.IOException;

public class RabbitmqSpout extends BaseRichSpout {
    SpoutOutputCollector _collector;
    public final static String QUEUE_NAME = "record";
    ConnectionFactory factory;
    Connection connection;
    Channel channel;
    QueueingConsumer consumer;

    @Override
    public void open(Map conf, TopologyContext context, SpoutOutputCollector collector) 
    {
        _collector = collector;
        System.out.println(" [*] Intilization of spout..... ");

        try
        {
            factory = new ConnectionFactory();
            System.out.println(" creating connection factory..... ");
            factory.setHost("192.168.8.96");
            System.out.println(" setting host to 192.168.8.218..... ");
            connection = factory.newConnection();
            System.out.println(" creating new connection..... ");
            channel = connection.createChannel();
            System.out.println(" creating new channel..... ");
            channel.queueDeclare(QUEUE_NAME, false, false, false, null);
            System.out.println(" Declaring queue..... ");
            System.out.println(" [*] Waiting for messages. ");
        }
        catch(Exception exception)
        {
            System.out.println("Exception occurred. "+exception.getMessage());
        }

    }

    @Override
    public void nextTuple() 
    {
        System.out.println("In wait of tuples.... ");
        try
        {
            consumer = new QueueingConsumer(channel);
            System.out.println(" trying to consume..... ");
            channel.basicConsume(QUEUE_NAME, true, consumer);

            while (true) 
            {
                System.out.println(" trying to deliver..... ");
                QueueingConsumer.Delivery delivery = consumer.nextDelivery();
                String message = new String(delivery.getBody());
                System.out.println(" getting string..... ");
                System.out.println(" [x] Received '" + message + "'");
                System.out.print("emitting Rabbitmq Queue tuple");
                _collector.emit(new Values(message));
                System.out.print("emitted Rabbitmq Queue tuple");
            }   
        }

        catch(IOException io)
        {
            System.out.println("Exception occurred. ");
        }
        catch(Exception exception)
        {
            System.out.println("Exception occurred. ");
        }

    }        

    @Override
    public void ack(Object id) {
    }

    @Override
    public void fail(Object id) 
    {

    }

    @Override
    public void declareOutputFields(OutputFieldsDeclarer declarer) 
    {
        declarer.declare(new Fields("record"));
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-20T06:59:32.400

```
connection = factory.newConnection() 
```

在`RabbitMQConsumer()`RabbitMQConsumer 类的方法中完成，因为数据由 RabbitMQ 消费者从队列中取出，然后将数据提供给您的 RabbitMQ spout。请参考：[ [https://github.com/ppat/storm-rabbitmq/tree/master/src/main/java/io/latent/storm/rabbitmq][1]](https://github.com/ppat/storm-rabbitmq/tree/master/src/main/java/io/latent/storm/rabbitmq][1])

# android - 如何将文件上传到 Google Drive

> ID：15675689
> 
> 赞同：14
> 
> 时间：2013-03-28T06:38:44.960
> 
> 标签：android, google-drive-api

所以我试图从我正在创建的 android 应用程序将文本文件上传到我的谷歌驱动器。我从 Google 教程中学会了如何上传图片。此外，我将在文本文件中使用我的应用程序中的字符串。潜在地，我想把它做成一个电子表格。有什么帮助吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-28T08:14:51.247

在 Google Android 网站上 阅读[快速入门。](https://developers.google.com/drive/quickstart-android)

完成所有身份验证过程后，请转到[如何将文件上传到 Google Drive](https://developers.google.com/drive/manage-uploads)。

**编辑**

参考链接

*   [https://code.google.com/p/google-drive-sdk-samples/](https://code.google.com/p/google-drive-sdk-samples/)
*   [Android 打开和保存文件到/从 Google Drive SDK](https://stackoverflow.com/questions/12164024/android-open-and-save-files-to-from-google-drive-sdk)
*   [http://mavenrepo.google-api-java-client.googlecode.com/hg/com/google/apis/google-api-services-drive/v2-rev9-1.8.0-beta/](http://mavenrepo.google-api-java-client.googlecode.com/hg/com/google/apis/google-api-services-drive/v2-rev9-1.8.0-beta/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-20T16:18:45.390

我为此花了很多时间......在我看来，文档......不是那么好。

**这就是使用 REST API v3 应该如何完成的。多部分上传示例**

> **1\. 第一步 - 使用元数据创建 JSON**

例如：

```
data class RetrofitMetadataPart(
    val parents: List<String>, //directories
    val name: String //file name
) 
```

现在创建一个 JSON（我为此使用了 moshi）

```
val jsonAdapter = moshi.adapter<RetrofitMetadataPart>(RetrofitMetadataPart::class.java)

val metadataJSON = jsonAdapter.toJson(
    RetrofitMetadataPart(
        parents = listOf("yourFolderId"), 
        name = localFile.name
    )
) 
```

当然，您可以使用不同的参数、值以及您喜欢的方式创建此元数据。您在此处拥有的元数据参数的完整列表： [https ://developers.google.com/drive/api/v3/reference/files/create](https://developers.google.com/drive/api/v3/reference/files/create)

> **2\. 第二步 - 使用元数据创建多部分**

我们使用正确的 Header 创建请求的第一部分

```
val metadataPart = MultipartBody.Part.create(
    RequestBody.create(MediaType.parse("application/json; charset=utf-8"), metadataJSON)
) 
```

> **3\. 第三步 - 使用您的文件创建 Multipart**

使用文件创建我们请求的第二部分

```
val multimediaPart = MultipartBody.Part.create(
    RequestBody.create(MediaType.parse("image/jpeg"), localFile)
) 
```

> **4\. 第四步 - 呼叫请求**

```
googleDriveApi.uploadFileMultipart(
    metadataPart,
    multimediaPart
) 
```

这个调用

```
@Multipart
@POST("upload/drive/v3/files?uploadType=multipart")
fun uploadFileMultipart(
    @Part metadata: MultipartBody.Part,
    @Part fileMedia: MultipartBody.Part
): Completable 
```

通过发送这两个 Multipart，您会自动从文档中获得那些*--foo_bar_baz标记*

*“用一个边界字符串标识每个部分，前面有两个连字符。此外，在最终边界字符串之后添加两个连字符。”*

# sql-server - 分组集的差异

> ID：15675692
> 
> 赞同：1
> 
> 时间：2013-03-28T06:38:52.137
> 
> 标签：sql-server, sql-server-2008, group-by

```
CREATE TABLE #Product (ProductId INT, ProductName Varchar(500), Price MONEY)
INSERT INTO #Product (ProductId ,ProductName,Price)
VALUES(1, 'Test1', 12000),
   (2, 'Test2', 18000),
   (3, 'Test3', 25000),
   (4, 'Test4', 15000),
   (1, 'Test4', 15000)

SELECT ProductId ,ProductName, SUM(Price) AS Price
FROM #Product Group By
GROUPING SETS((ProductId), (ProductName), ())

SELECT ProductId ,ProductName, SUM(Price) AS Price
FROM #Product Group By
GROUPING SETS((ProductId, ProductName), ()) 
```

这两者有什么区别？以及在哪里使用第一个和第二个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:39:24.123

检查下面的链接，这是对分组集的描述性解释。

[分组集说明](http://blogs.msdn.com/b/craigfr/archive/2007/10/11/grouping-sets-in-sql-server-2008.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T20:58:40.467

两个查询之间的区别在于创建的分组数量。可以将`GROUPING SETS`语法视为指定的每个分组集的 UNION ALL。

例如，让我们看一下您编写的第一个查询：

```
SELECT ProductId ,ProductName, SUM(Price) AS Price
FROM #Product Group By
GROUPING SETS((ProductId), (ProductName), ()) 
```

在这里，您指定了三个分组：

1.  产品编号
2.  产品名称
3.  累计

此查询等效于编写以下代码：

```
SELECT ProductID, NULL AS ProductName, SUM(Price) AS Price
FROM #Product
GROUP BY ProductID
UNION ALL
SELECT NULL, ProductName, SUM(Price)
FROM #Product
GROUP BY ProductName
UNION ALL
SELECT NULL, NULL, SUM(Price)
FROM #Product 
```

同样，查看您的第二个查询：

```
SELECT ProductId ,ProductName, SUM(Price) AS Price
FROM #Product Group By
GROUPING SETS((ProductId, ProductName), ()) 
```

此查询执行两个分组：

1.  产品 ID 和产品名称
2.  累计

这相当于写了两个分组：

```
SELECT ProductId ,ProductName, SUM(Price) AS Price
FROM #Product
GROUP BY ProductID, ProductName
UNION ALL
SELECT NULL, NULL, SUM(Price) AS Price
FROM #Product 
```

至于为什么你会使用一个而不是另一个：你想要哪些分组？您想要按产品 ID 计算的总计、按产品名称计算的总计和总计吗？然后使用第一个。如果产品可以具有与您的示例中的不同产品 ID 相同的名称，这可能很有用。

您想要按产品 ID 和产品名称进行总计以及总计吗？然后使用第二个。

# c++ - C++中的函数返回字符串

> ID：15675698
> 
> 赞同：-1
> 
> 时间：2013-03-28T06:39:13.813
> 
> 标签：c++, string, class, function, return

下面的程序是获取用户输入的账号，使用类，这是一个预定义的格式——前两位是字母，接下来的三位是分行代码，剩下的十位是一些随机数。如果输入的输入不是格式，它应该提示用户再次输入。我尝试按如下方式实现它。如果我在第一次尝试时给出正确的输入，它可以正常工作，但是当我检查 else 部分代码时，将 'acno' 的值返回到 'tac' 时会出现问题。有人可以纠正代码中的错误吗......谢谢......

```
#include<iostream>
#include<string>
using namespace std;

class saving
{
    string acc_no,tac;
    string br_code;
    public:
    void input();
} sav;

string chkno(string acno)
{
    string cc,bc,no,ano;
    int i,len,a=1,b=1,c=1;
    for(len=0; acno[len]!='\0'; len++);
    if(len!=15)
    {
        cout<<"Account No. is Invalid.Please enter again.";
        cout<<"\nAccount No : "; cin>>ano;
        chkno(ano);
    }
    else
    {
        cc=acno.substr(0,2);  bc=acno.substr(2,3);  no=acno.substr(5,10);
        for(i=0; i<2; i++)
        {
            if(!isalpha(cc[i]))
            {
                a=0; break;
            }
        }
        for(i=0; i<3; i++)
        {
            if(!isdigit(bc[i]))
            {
                b=0;  break;
            }
        }
        for(i=0; i<10; i++)
        {
            if(!isdigit(no[i]))
            {
                c=0;   break;
            }
        }
        if(a==1&&b==1&&c==1)
        {
           cout<<"\nValid - Account no : "<<acno;
            return acno;
        }  
        else
        {
            cout<<"Incorrect format.Please enter again";
            cout<<"\nAccount No : "; cin>>ano;
            chkno(ano);
        }
    }
}

void saving::input() 
{
    cout<<"Account No : ";
    cin>>acc_no;
    tac=chkno(acc_no);
    acc_no=tac;
    cout<<"\nAcc.No :"<<acc_no;
    br_code=acc_no.substr(2,3);
    cout<<"\nBranch Code is :"<<br_code;
}sav;

int main()
{
 sav.input(); return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:43:24.770

这是错误的

```
for(len=0; acno[len]!='\0'; len++); 
```

C++ 字符串与 C 字符串不同，它们没有 '\0' 终止符。如果您想知道 C++ 字符串有多长，请执行此操作

```
len = acno.size(); 
```

此外，当您遇到错误时，您会再次调用 chkno，这有点奇怪，但实际上并没有错。但是你做错的是永远不会从第二次调用 chkno 中返回值。你应该做的是这个

```
cout<<"Incorrect format.Please enter again";
cout<<"\nAccount No : "; cin>>ano;
return chkno(ano); 
```

看看我是如何添加退货的。

对于这个练习的最高分，我认为你应该重新设计你的代码。`chkno`应该是一个只检查帐号的函数（毕竟这就是它的名字）。所以你应该让它返回一个布尔值，真或假，这取决于帐号是否正确。然后你应该把输入/重新输入你的数字循环放在main中。像这样

```
bool chkno(string acno)
{
    ...
}

int main()
{
    cout<<"Account No : ";
    cin>>acc_no;
    while (!chkno(acc_no))
    {
        cout<<"Incorrect format.Please enter again";
        cout<<"\nAccount No : ";
        cin>>acc_no;
    }
    ...
} 
```

这是编写此类任务的正常方式。这是更好的设计，因为它更清晰地分离了两个任务，提示用户输入一个数字并检查该数字是否正确。

# asp.net - 类似于 stackoverflow 动态数据的警报框

> ID：15675704
> 
> 赞同：1
> 
> 时间：2013-03-28T06:39:24.063
> 
> 标签：asp.net, alert, stack-overflow

想要添加一个像 stackoverflow 这样的警告框。我看到了一些很好的例子，但不是我想要的。我想要在不同场合出现的不同消息。

前任。当用户登录时，我想要来自 C# 代码的这个消息。当用户下订单时。或者有什么问题。

这个[**答案**](https://stackoverflow.com/a/659243/1707848)很好，但是页面加载时出现了消息。另一个[**例子**](http://roshanbh.com.np/2008/07/top-floating-message-box-using-jquery.html)也证明了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:29:35.440

如果您不想在页面加载时执行此操作，但希望它由后面的代码 (C#) 驱动，则需要使用 AJAX。

使用 JQuery，这很容易通过执行以下操作来完成（这是我在 ASP.NET MVC 中的通用“在此控制器上执行此操作”）：

```
 <script type="text/javascript">
 function execute(controller, action) {
        $.ajax({
            type: 'get',
            url: ('/' + controller + '/' + action),
            dataType: 'text'
        }).done(function (data, textStatus, jqXHR) {
            $('#response').html(data).slideDown();
        }).fail(function (jqXHR, textStatus, errorThrown) {
            $('#response').html(jqXHR.responseText).slideDown();
        });
    }
 </script> 
```

您可以扩展它以将您需要的任何数据传递给您需要的任何 URL，例如：

```
 <script type="text/javascript">
 function execute(controller, action, username, password) {
        $.ajax({
            type: 'get',
            url: ('/' + controller + '/' + action),
            dataType: 'text',
            data: ('username='+username+'&password='+password)
        }).done(function (data, textStatus, jqXHR) {
            $('#response').html(data).slideDown();
        }).fail(function (jqXHR, textStatus, errorThrown) {
            $('#response').html(jqXHR.responseText).slideDown();
        });
    }
 </script> 
```

在服务器端，您只需返回您想要响应内容的字符串，例如“成功！您已登录！” 然后元素 id'ed "response" 将其内部 HTML 与该响应交换出来，然后将被滑开：

```
 <div id="response" style="display:none"></div> 
```

请注意，如果您不只是在抛出的异常上返回字符串，那么 .fail() 事件将推出您将抛出的整个错误页面。如果来自服务器的 HTTP 状态码不是 200（OK），.fail() 将触发。

如果您使用的是 ASP.NET MVC，您的 C# 代码可能如下所示：

```
 namespace MySite.Controllers
 {
     public class SomeController : Controller
     {
          public string Login(string username, string password){
               // Process login
               return "You've been logged in!";
          }
     }
 } 
```

如果您使用网络表单：

```
 //On Page_Load() call a function if it's an AJAX Login
 // such as 
 if(Request["ajax"] == "login"){
       AjaxLogin(Request["username"], Request["password"]);
 }

 private void AjaxLogin(string username, string password){
      // Process login
      Response.Write("Ajax login complete!");
      Response.End(); // Don't send anything else and stop processing request.
 } 
```

然后调用它只需将变量传递给您的函数：

```
 <a onclick="execute('MyController', 'Login', 'UserName', 'MyPass')">Login!</a> 
```

显然，这假设您在登录请求进入之前拥有处理登录请求所需的数据，这会有点自我挫败，因此您可以使用 JQuery 扩展特定功能来获取表单元素内容，例如：

```
 <input type="text" name="username" id="username" />
 <input type="text" name="password" id="password" /> 
```

然后在你的函数中添加：

```
 <script type="text/javascript">
 function login(controller, action) {

      var username = document.getElementById('username').value;
      var password = document.getElementById('password').value;

        $.ajax({
            type: 'get',
            url: ('/' + controller + '/' + action),
            dataType: 'text',
            data: ('username='+username+'&password='+password)
        }).done(function (data, textStatus, jqXHR) {
            $('#response').html(data).slideDown();
        }).fail(function (jqXHR, textStatus, errorThrown) {
            $('#response').html(jqXHR.responseText).slideDown();
        });
    }
 </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T04:34:34.757

您需要创建一个`generic-http-handler`or `web service`or`page-method`并调用它`jQuery`并在警报上显示消息。

创建一个像这样的处理程序

```
 public class VideoViewValidation : IHttpHandler
  {
      public void ProcessRequest(HttpContext context)
      {
           string videoID = string.Empty;
           string id = context.Request["Id"];
           context.Response.Writ("your message");
      }
} 
```

并在按钮客户端单击时通过 jQuery 调用它

```
$.ajax({
        url: 'VideoViewValidation.ashx',
         type: 'POST',
          data: { 'Id': '10000', 'Type': 'Employee' },
          contentType: 'application/json;charset=utf-8',
          success: function (data) {
                    alert('Server Method is called successfully.' + data.d);
                },
          error: function (errorText) {
                alert('Server Method is not called due to ' + errorText);
          }
       }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:55:07.740

尝试这个

```
public void message(string msg)
{
    ScriptManager.RegisterClientScriptBlock(this, GetType(), "Done", "alert('" + msg + "');", true);
} 
```

使用这种方法

写`message("You are logged in sucessfully.");`

# node.js - 如何配置用户环境以使用最新的节点运行时

> ID：15675707
> 
> 赞同：0
> 
> 时间：2013-03-28T06:39:36.433
> 
> 标签：node.js

**我们使用nvm use 0.10.0**初始化 node.js 如何配置用户环境以使用最新的节点运行时，以便在我在 Ubuntu 中启动新终端时初始化 bash shell

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-22T20:04:25.473

发布此答案以供将来参考和帮助。

首先在 bash 中运行以下命令。

```
nvm alias default <the default version you want to set> 
```

然后把它放在你的 .bashrc

```
export NVM_DIR="path/to/.nvm/folder" #<-edit with real value
if [ -s "$NVM_DIR/nvm.sh" ]; then
    source "$NVM_DIR/nvm.sh"
fi
NODE_DEFAULT_VERSION=$(<"$NVM_DIR/alias/default")
export PATH="$NVM_DIR/versions/node/$NODE_DEFAULT_VERSION/bin":$PATH 
```

和，`source .bashrc`

这种设置的优点是，无论您将安装什么节点并将其设置为默认值，它都可用于所有 bash 会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:45:39.097

你可以把它放在你的`~/.bashrc`：

```
nvm use 0.10.0 
```

# http - Netty http流水线方法验证

> ID：15675708
> 
> 赞同：1
> 
> 时间：2013-03-28T06:39:36.810
> 
> 标签：http, netty, http-protocols

我已经实现了一个用于处理[http pipelining](http://en.wikipedia.org/wiki/HTTP_pipelining)的通道处理程序。我的代码在 github：[https ://github.com/huntc/netty-http-pipelining](https://github.com/huntc/netty-http-pipelining)

我的问题是围绕我所采取的方法，以及它在 Netty 架构的背景下是否合理。

当我的 HttpPipeliningHandler 接收到上游 HttpRequest 时，它会形成一个 OrderedUpstreamMessageEvent 类型的新消息事件。此事件也是我的包的一部分，并保留了与制定回复消息时所需的请求相关的信息。

当进一步上游的通道处理程序接收到 OrderedUpstreamMessageEvent 时，它会通过生成 OrderedDownstreamMessageEvent 来形成回复，例如：

```
ctx.sendDownstream(new OrderedDownstreamMessageEvent(oue, somemessage)); 
```

在哪里

```
ctx = ChannelHandlerContext instance
oue = OrderedUpstreamMessageEvent instance
somemessage = some message instance to be sent as an http response 
```

您还可以做更多有趣的事情，例如发送分块回复。

这种方法看起来合理吗？它当然有效！在上游处理程序中转换消息事件是否正常/可接受？显然，如果消息事件再次转换，那么流水线功能将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:05:46.353

我快速浏览了一下......一些评论。

1）您对 PriorityQueue 的访问必须同步，因为下游事件可能被任何线程触发。

2) nextRequiredSequence 需要做同样的事情或使用 AtomicInteger 应该更好

3）你想使用 Channel.close()

其余看起来不错

# excel - 打开excel文件提示消息框“工作簿内容恢复”

> ID：15675710
> 
> 赞同：16
> 
> 时间：2013-03-28T06:39:41.537
> 
> 标签：excel, openxml

当我尝试打开 excel 文件时，会出现一个消息框提示**“我们发现文件名中的某些内容存在问题。您希望我们尽可能多地恢复吗？如果您信任此工作簿的来源，单击是。** ”。实际完成的是我设计了一个 excel 模板并将文件复制到另一个文件并创建了临时文件我正在使用 OPEN XML 将数据插入到临时文件中，并且数据是从数据库中获取的。

我已经尝试了网络中提供的解决方案，但这些修复并没有解决我的问题。我的 excel 是 2010

![在此处输入图像描述](../Images/5b53f6b7fd532179e65a8582a25f35e6.png)

![在此处输入图像描述](../Images/4e3081702238890f3ee5cedacb017c52.png)

非常感谢提供的任何解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-07T22:03:30.850

我有这个问题。这是由我在单元格中存储数字和字符串的方式引起的。

数字可以简单地使用 存储`cell.CellValue = new CellValue("5")`，但对于非数字文本，您需要将字符串插入 SharedStringTable 元素并获取该字符串的索引。然后将单元格的数据类型改为SharedString，并将单元格的值设置为SharedStringTable中字符串的索引。

```
// Here is the text I want to add.
string text = "Non-numeric text.";

// Find the SharedStringTable element and append my text to it.
var sharedStringTable = document.WorkbookPart.GetPartsOfType<SharedStringTablePart>().First().SharedStringTable;
var item = sharedStringTable.AppendChild(new SharedStringItem(new Text(text)));

// Set the data type of the cell to SharedString.
cell.DataType = new EnumValue<CellValues>(CellValues.SharedString);

// Set the value of the cell to the index of the SharedStringItem.
cell.CellValue = new CellValue(item.ElementsBefore().Count().ToString()); 
```

这在此处的文档中进行了解释：http: [//msdn.microsoft.com/en-us/library/office/cc861607.aspx](http://msdn.microsoft.com/en-us/library/office/cc861607.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-22T13:17:25.440

可能导致此类错误的其他几种情况：

*   您的工作表名称超过 31 个字符
*   您的工作表名称中有无效字符
*   您的单元格的值超过 32k

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-21T10:22:45.670

问题是由于使用

> 包.保存（）；

和

> package.GetAsByteArray();

同时

当我们打电话时

> package.GetAsByteArray();

它将执行以下操作

> this.Workbook.Save(); this._package.Close(); this._package.Save(this._stream);

因此，去除

> 包.保存（）；

将解决此问题**“我们发现文件名中的某些内容存在问题。您希望我们尽可能多地恢复吗？如果您信任此工作簿的来源，请单击是。”**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-06T07:14:11.943

问题是由于直接使用 cell.CellValue = new CellValue("Text") 在单元格中存储了一个字符串。可以存储这样的数字，但不能存储字符串。对于字符串，在使用 Cell.DataType = CellValues.String; 分配文本之前将数据类型定义为字符串；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-07T15:02:25.517

另一个可能的原因可能是**超出了单元格样式的最大数量**。

您可以定义：

*   .xls 工作簿中多达 4000 种样式
*   .xlsx 工作簿中多达 64000 种样式

在这种情况下，您应该为多个单元格重复使用相同的单元格样式，而不是为每个单元格创建新的单元格样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-14T16:49:14.237

我添加了正确的 cellReference 并为我解决了这个问题：

```
string alpha = "ABCDEFGHIJKLMNOPQRSTUVQXYZ";
for (int colInx = 0; colInx < reader.FieldCount; colInx++)
{
    AppendTextCell(alpha[colInx] + "1", reader.GetName(colInx), headerRow);
}

private static void AppendTextCell(string cellReference, string cellStringValue, Row excelRow)
{
    //  Add a new Excel Cell to our Row 
    Cell cell = new Cell() { CellReference = cellReference, DataType = new EnumValue<CellValues>(CellValues.String) };
    CellValue cellValue = new CellValue();
    cellValue.Text = cellStringValue.ToString();
    cell.Append(cellValue);
    excelRow.Append(cell);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-13T18:29:04.417

同样的警告，但我的问题是我使用客户端输入（波形名称）作为文件的工作表名称，并且当名称中显示日期时，用作日期部分分隔符的字符“/”导致问题。

我认为微软需要提供更好的错误日志来节省人们调查此类小问题的时间。希望我的回答能节省别人的时间。

# android - 我必须显示多个图像都可以在 android 上点击

> ID：15675711
> 
> 赞同：-1
> 
> 时间：2013-03-28T06:39:45.363
> 
> 标签：android, android-listview, android-gridview

我正在一个看起来像这样的库上制作一个 android 应用程序![在此处输入图像描述](../Images/8cfbf0d7edfe8962698212bf97115926.png)

我需要动态放置所有这些书，并且在单击一本书后都应该可以单独点击，它将通过默认的 pdf 阅读器打开。

我的问题是使用列表视图是否有可能，如果没有，那么什么是合适的方法。请给我看一些我找不到的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:42:50.410

[http://code.google.com/p/shelves/](http://code.google.com/p/shelves/)。Romain GUy 的一个项目。值得一看的项目。

[http://code.google.com/p/shelves/source/browse/trunk/Shelves/src](http://code.google.com/p/shelves/source/browse/trunk/Shelves/src)。 [http://shelves.googlecode.com/svn/trunk/Shelves/](http://shelves.googlecode.com/svn/trunk/Shelves/)。它是只读的。打开后备箱并复制代码并使用相同的代码。

使用网格视图。 [http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

通用图像加载器。

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

它基于惰性列表（工作原理相同）。但它还有很多其他配置。我更喜欢使用 Universal Image Loader，因为它为您提供了更多配置选项。如果下载失败，您可以显示错误图像。可以显示带圆角的图像。可以缓存在磁盘或内存上。可以压缩图像。

在您的自定义适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "your folder");

  // Get singletone instance of ImageLoader
  imageLoader = ImageLoader.getInstance();
  // Create configuration for ImageLoader (all options are optional)
  ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
  // You can pass your own memory cache implementation
 .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
 .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
 .enableLogging()
 .build();
 // Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
  options = new DisplayImageOptions.Builder()
  .showStubImage(R.drawable.stub_id)//display stub image
  .cacheInMemory()
  .cacheOnDisc()
  .displayer(new RoundedBitmapDisplayer(20))
  .build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
  imageLoader.displayImage(imageurl, image,options);//provide imageurl, imageview and options. 
```

您可以配置其他选项以满足您的需求。

与延迟加载/通用图像加载器一起，您可以查看持有者以实现平滑滚动和性能。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

编辑：

[https://github.com/androidnerds/shelves](https://github.com/androidnerds/shelves)。以 zip 格式下载的链接。

# java - Java VisualVM 无 法连接到 Jboss

> ID：15675712
> 
> 赞同：2
> 
> 时间：2013-03-28T06:39:50.067
> 
> 标签：java, jboss, jvisualvm

`Java VisualVM`当 jboss 服务器使用 option 运行时，无法连接 Jboss 服务器`-b 0.0.0.0`。

jboss 运行脚本 -`run.sh -c web -b 0.0.0.0`

当我尝试像这样运行jboss时 -`run.sh -c web -b {MyIp}`

然后 Java VisualVM 就可以连接 jboss 服务器了。

任何人都可以帮助我在 jboss 使用第一个选项运行时如何连接`( -b 0.0.0.0)`

我`run.conf`在 jboss 的文件中使用这个配置

```
JAVA_OPTS="$JAVA_OPTS -XX:PermSize=256m -Dcom.sun.management.jmxremote.local.only=false -Dcom.sun.management.jmxremote=true -Dcom.sun.management.jmxremote.port=8077 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:41:23.983

将此添加到`JAVA_OPTS`

```
JAVA_OPTS="$JAVA_OPTS -XX:PermSize=256m -Dcom.sun.management.jmxremote.local.only=false -Dcom.sun.management.jmxremote=true -Dcom.sun.management.jmxremote.port=8077 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false
-Djava.rmi.server.hostname=0.0.0.0" 
```

而不是`0.0.0.0`使用您的系统`IP`。

# ios - 数据未添加到 Plist

> ID：15675714
> 
> 赞同：0
> 
> 时间：2013-03-28T06:39:52.780
> 
> 标签：ios, xcode, nsarray, plist, nsdictionary

嗨，我在 xcode 中创建了一个 plist（`newfile->resourses->property list` 像这样），我尝试将一个添加`NSDictionary`到该 plist 但它没有添加，请帮助我这是我的代码

```
 -(IBAction)Add:(id)sender {
     _pdfbookmark = [NSMutableArray arrayWithArray:[[NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"pdfBookmarksdata" ofType:@"plist"]] objectForKey:_bookID]];

     NSMutableDictionary *bookmark = [NSMutableDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"pdfBookmarksdata" ofType:@"plist"]];

     if(self.bookmarkIndicator.tintColor == [UIColor blueColor]){
        //Already Bookmarked
        [_pdfbookmark removeObjectAtIndex:currentBookmarkIndex];
        self.bookmarkIndicator.tintColor = [UIColor whiteColor];
     }else{
        //Create Bookmark
        [_pdfbookmark addObject:
        @{@"deviceid": @"0",
        @"page" : [NSNumber numberWithInt:[self getGlobalPageCount]],
        @"fontsize" : [NSNumber numberWithInt:currentTextSize]}];
        self.bookmarkIndicator.tintColor = [UIColor blueColor];
   }
    [bookmark setObject:_pdfbookmark forKey:_bookID];
    [bookmark writeToFile:[[NSBundle mainBundle] pathForResource:@"pdfBookmarksdata" ofType:@"plist"] atomically:YES];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:41:52.633

不允许将文件写入主包。如果您检查`writeToFile:`方法的返回，您将看到它返回`NO`。

# html - windows批处理文件脚本 - 保持html格式

> ID：15675718
> 
> 赞同：3
> 
> 时间：2013-03-28T06:40:01.740
> 
> 标签：html, scripting, batch-file, cmd

我目前正在尝试编写一个简单的批处理脚本，它将运行一系列 Windows 命令并将它们很好地输出到单个 html 文件中。

例如，即时运行的命令是`netsh firewall show config`，看起来像这样：

```
Domain profile configuration (current):
-------------------------------------------------------------------
Operational mode                  = Enable
Exception mode                    = Enable
Multicast/broadcast response mode = Enable
Notification mode                 = Enable
Service configuration for Domain profile:
Mode     Customized  Name 
```

注意到使用的很好的间距使它很容易看到吗？

我试图将它保存在我创建的 HTML 文件中。到目前为止，我有一个简单的批处理脚本，如下所示：

```
@echo off

echo ^<font face="courier new" size="2"^>^ >>index.html
netsh firewall show config >> netsh
type netsh >>index.html 
```

当它假脱机到 index.html 文件时，结果输出如下所示：

```
Domain profile configuration (current): -----------------------------------------------       
 -------------------- Operational mode = Enable Exception mode = Enable
 Multicast/broadcast     response mode = Enable Notification mode = Enable Service
 configuration for Domain profile: Mode Customized Name ------------------------------
------------------------------------ Enable No File and Printer Sharing Allowed\
programs configuration for Domain profile: Mode Traffic 
```

那么有谁知道我如何以一种很好的方式输出命令，以便保留格式？它实际上只是一堆空格和中断。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:47:34.337

使用[`<pre>`](http://reference.sitepoint.com/html/pre)标签保留文本布局：

```
@echo off
echo ^<pre^> >>index.html
netsh firewall show config >> index.html
echo ^</pre^> >>index.html 
```

# c# - 将 c++ 代码转换为 c#

> ID：15675721
> 
> 赞同：-2
> 
> 时间：2013-03-28T06:40:18.850
> 
> 标签：c#, c++, interop, com-interop

这是来自 C++ 的代码片段

```
struct 
    {
        short       m_nVersion;
        short       m_nMOT_Addr;
        q_address   m_oDistribution_Q;
        short       m_nOffset;
        char        m_cOperator;
        short       m_cLength;
        long        m_lOperand;
        char        m_cReq_Ack;
        char        m_cReq_SeqGap;
        char        m_cReq_AutoDereg;
    } oSbsReg;

    const short nMsgSize = 20;  //20 byte long structure when packed

    char sMessageBuffer[nMsgSize]; // I created stringbuilder in c#

    memset(&oSbsReg,0,sizeof(oSbsReg));
    memset(sMessageBuffer,0,sizeof(sMessageBuffer));

    oSbsReg.m_nVersion = 20;                        //Version
    oSbsReg.m_nMOT_Addr = (short) lMot;             //MOT in which to register with
    oSbsReg.m_oDistribution_Q.au.queue = m_oQueue.au.queue; //Current queue number
    oSbsReg.m_oDistribution_Q.au.group = m_oQueue.au.group; //Current group 
    //changed to 0 to resolve Oswego issue when moved to DMQ 5.0
    oSbsReg.m_nOffset = 0;                          //Start byte for telegram match
    oSbsReg.m_cOperator = PSEL_OPER_EQ;             //Exact match
    oSbsReg.m_cLength = 4;                          //Number of bytes in match
    oSbsReg.m_lOperand = lTelegramId;               //Telegram Id to match against
    oSbsReg.m_cReq_Ack = 1;                         //TRUE: Request an acknowledge of registration
    oSbsReg.m_cReq_SeqGap = 1;                      //TRUE: Request an acknowledge of a sequence gap
    oSbsReg.m_cReq_AutoDereg = 1;                   //TRUE: Request an auto deregistration on a connection loss

    //default compile option is 8 byte packing, didn't want to change it
    //manually pack bytes in structure to satisfy the SBS server's expectations
    memcpy(sMessageBuffer, &oSbsReg, 11);
    memcpy(sMessageBuffer+11, &(oSbsReg.m_cLength), 2);
    memcpy(sMessageBuffer+13, &(oSbsReg.m_lOperand), 7); //twenty bytes max! 
```

我需要在c#中转换上面的代码，

我在 c# 中创建了上面的结构并进行了初始化，但现在我想将它放入 stringbuilder 变量中，与放入 char 数组中的结构相同。但正如您所见，它们使用 memset 和 mem cpy 函数。

我如何在 c# 中实现相同的目标？

如何将上述结构放入 stringbuilder 变量 c# 中，如何从结构中提取字节并将其放入 string builder 变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:48:33.317

我不建议使用`char`s 在 C# 中存储字节（`char`在 C# 中实际上是两个字节，因为它是 unicode）。
这种数据在.NET中有一个数据类型，叫做`byte`，它更类似于C++的`char`，因为它也包含一个字节。

如果替换`T`为结构类型的名称，则可以像这样将对象转换为字节数组（顺便说一句，您可以从中创建一个非常有用的通用方法）：

```
int size = Marshal.SizeOf(typeof(T));
byte[] rawData = new byte[size];

IntPtr ptr = Marshal.AllocHGlobal(size);
Marshal.StructureToPtr(obj, ptr, true);
Marshal.Copy(ptr, rawData, 0, size);
Marshal.FreeHGlobal(ptr); 
```

# c++ - 动态调整 CStatic 控件的大小以适合文本

> ID：15675728
> 
> 赞同：3
> 
> 时间：2013-03-28T06:40:30.583
> 
> 标签：c++, mfc, resize, controls

截至目前，我正在使用以下代码来调整`CStatic`控件的大小：

```
WINDOWPLACEMENT wndpl;
m_myStaticControl.GetWindowPlacement(&wndpl);

// Increase the static box's width
wndpl.rcNormalPosition.right += 10;

m_myStaticControl.SetWindowPlacement(&wndpl);
m_myStaticControl.SetWindowText("Some text"); 
```

我通过反复试验获得了常数（在上述情况下为 10）。因为这似乎是一个非常不雅且难以维护的解决方案，所以我想改变它。经过一番研究，我想我有一个基本的想法；这是：

1.  使用 获取所需文本的像素宽度和高度[`GetTextExtentPoint32`](http://msdn.microsoft.com/en-us/library/dd144938%28VS.85%29.aspx)。
2.  `CStatic`如上面的代码示例所示，获取控件的当前窗口位置。
3.  如果当前宽度<获得的像素宽度，则添加获得的像素宽度。对身高做同样的事情。
4.  按照上面的代码示例设置窗口位置。
5.  按照上面的代码示例设置窗口文本。

这会是一个好的、有效的方法吗？另外，是否`GetTextExtentPoint32`使用像素或对话框单位？

# android - 如何在 Android 中以编程方式读取 SMS 消息

> ID：15675729
> 
> 赞同：5
> 
> 时间：2013-03-28T06:40:33.700
> 
> 标签：android, sms

我想以编程方式在 android 中读取新传入 SMS 的消息正文。我尝试了一些东西，但没有返回任何内容：

我的代码有什么错误吗？

```
btnSendSms=(Button)findViewById(R.id.button1_SendSms);
            btnSendSms.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub

                    String strCellNo1 , strCellNo2 , strCellNo3 , strCellNo4 , strCellNo5; 
                    SharedPreferences sendsmsSharedPref = Custom_Title_Bar_Activity.this.getSharedPreferences("MyPref",0);

                    strCellNo1 = sendsmsSharedPref.getString("num1", "n/a");
                    strCellNo2 = sendsmsSharedPref.getString("num2", "n/a");
                    strCellNo3 = sendsmsSharedPref.getString("num3", "n/a");
                    strCellNo4 = sendsmsSharedPref.getString("num4", "n/a");
                    strCellNo5 = sendsmsSharedPref.getString("num5", "n/a");

                    Log.e("Cell No One","->"+strCellNo1);
                    Log.e("Cell No Two","->"+strCellNo2);
                    Log.e("Cell No Three","->"+strCellNo3);
                    Log.e("Cell No Four","->"+strCellNo4);
                    Log.e("Cell No Five","->"+strCellNo5);

                    strPhones=strCellNo1;

                    if(strCellNo2.toString().length() >1 )
                    {
                        strPhones=strPhones+";"+strCellNo2;

                        if(strCellNo3.toString().length() >1 )
                        {
                            strPhones=strPhones+";"+strCellNo3;

                            if(strCellNo4.toString().length() >1 )
                            {
                                strPhones=strPhones+";"+strCellNo4;

                                if(strCellNo5.toString().length() >1 )
                                {
                                    strPhones=strPhones+";"+strCellNo5;

                                }

                            }

                        }

                    }

                    String message="Android";
                    txtSms=(TextView)findViewById(R.id.txt_Sms);
                    txtSms.setText(message);
                    String strMessage=txtSms.getText().toString();

                    /*strPhones=strCellNo1+";"+strCellNo2+";"+strCellNo3+";"+strCellNo4+";"+strCellNo5;*/
                    Log.e("String Phone->",""+strPhones);
                    edtxt_PhNO=(TextView)findViewById(R.id.txt_PhNO);
                    edtxt_PhNO.setText(strPhones);
                    String strPHNO=edtxt_PhNO.getText().toString();

                    StringTokenizer stokenizer=new StringTokenizer(strPHNO,";");
                    Log.e("",""+stokenizer);

                    while(stokenizer.hasMoreElements())
                    {
                        Log.e("Inside While Loop ","");
                        String tempMobileNumber=(String)stokenizer.nextElement();
                        Log.e("",""+tempMobileNumber);
                        if(tempMobileNumber.length() >0 && strMessage.trim().length() >0 )
                        {
                            sendSMS(tempMobileNumber, strMessage);
                            Log.e("sendSMS Method","");
                        }
                        else
                        {
                            Toast.makeText(getBaseContext(),"Please enter both phone number and message.",Toast.LENGTH_SHORT).show();
                        }
                    }
                }
            });

    private void sendSMS(String phoneNumber, String message)
        {
            String SENT = "SMS_SENT";
            String DELIVERED = "SMS_DELIVERED";

            PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
                new Intent(SENT), 0);

            PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);

          //---when the SMS has been sent---
            registerReceiver(new BroadcastReceiver(){
                @Override
                public void onReceive(Context arg0, Intent arg1) {
                    switch (getResultCode())
                    {
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS sent", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                            Toast.makeText(getBaseContext(), "Generic failure", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_NO_SERVICE:
                            Toast.makeText(getBaseContext(), "No service", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_NULL_PDU:
                            Toast.makeText(getBaseContext(), "Null PDU", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_RADIO_OFF:
                            Toast.makeText(getBaseContext(), "Radio off", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                    }
                }
            },new IntentFilter(SENT));

            //---when the SMS has been delivered---
            registerReceiver(new BroadcastReceiver(){
                @Override
                public void onReceive(Context arg0, Intent arg1) {
                    switch (getResultCode())
                    {
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS delivered", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case Activity.RESULT_CANCELED:
                            Toast.makeText(getBaseContext(), "SMS not delivered", 
                                    Toast.LENGTH_SHORT).show();
                            break;                        
                    }
                }
            }, new IntentFilter(DELIVERED));        

           /* SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);       */

            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);  
        }

    and this is SmsReceiver class extends Broadcast Receiver

    public class SmsReceiver extends BroadcastReceiver
    {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub

             //---get the SMS message passed in---

            Bundle bundle = intent.getExtras();
            if (bundle != null) 
            {
                Object[] pdus = (Object[]) bundle.get("pdus");
                final SmsMessage[] messages = new SmsMessage[pdus.length];

                for (int i = 0; i < pdus.length; i++) 
                {
                    messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                }

                StringBuffer content = new StringBuffer();
                if (messages.length > 0) 
                {
                    for (int i = 0; i < messages.length; i++) 
                    {
                        content.append(messages[i].getMessageBody());
                    }
                }

                String mySmsText = content.toString();
            }
        }
    } 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T06:54:52.407

创建接收者喜欢

```
public void onReceiver(Context context, Intent intent){
    Object[] pdus=(Object[])intent.getExtras().get("pdus");
    SmsMessage shortMessage=SmsMessage.createFromPdu((byte[]) pdus[0]);

    Log.d("SMSReceiver","SMS message sender: "+
       shortMessage.getOriginatingAddress());
    Log.d("SMSReceiver","SMS message text: "+
       shortMessage.getDisplayMessageBody());
  } 
```

完整的例子在这里

[http://droidcoders.blogspot.in/2011/09/sms-receive.html](http://droidcoders.blogspot.in/2011/09/sms-receive.html)

# ruby-on-rails - 主数据库故障转移到备份 MongoDB 实例

> ID：15675732
> 
> 赞同：0
> 
> 时间：2013-03-28T06:40:47.267
> 
> 标签：ruby-on-rails, mongodb, database

我的 Rails 应用程序主要在常规 mySQL 数据库上运行，但是，如果该数据库出现故障，我希望 Rails 应用程序故障转移到 MongoDB 数据库，该数据库基本上只是主数据库的“缓存”版本。

我的一些想法是两个模型（AR 和 MongoDB - 使用 Mongoid），然后在控制器中捕获异常并在主节点失败时使用 MongoDB 模型，但我觉得如果有两个模型来处理所有事情，那就太混乱了。另一个想法是（我还没有测试过）拯救模型中的数据库连接异常并将模型用作 MongoDB 模型，但考虑一下，如果模型最初继承自 ActiveRecord::Base 可能会出现问题。

解决这个问题的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:21:55.543

我认为在 MySQL 和 MongoDB 之间进行故障转移没有什么好的方法，老实说我不太喜欢这个想法。

为什么不让你的 MySQL 后端使用一些从属设备进行故障保存？

# python - Python：导入问题

> ID：15675734
> 
> 赞同：2
> 
> 时间：2013-03-28T06:40:54.680
> 
> 标签：python

所以，我正在尝试使用 PyDev 在 Eclipse 中运行我的代码。我已经成功导入：

```
import socket
import sys
from datetime import datetime
from threading import Thread
import time
import random
import glob
import os
import sys
import math
from pygooglechart import SimpleLineChart 
```

但以下导入失败（未解析的导入）：

```
import settings 
```

作为参考，设置使用如下：

```
 # Make a chart
    chart = SimpleLineChart(settings.width, settings.height, y_range=(0, max(rateSizeArray)))
    chart.add_data(rateSizeArray)
    chart.download('send-rates.png') 
```

我看到的示例与我在这里看到的完全一样，并且没有导入错误。我完全不知道如何解决这个问题。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:42:19.690

`settings`听起来像是您自己的代码-您`__init__.py`尝试从中导入的目录中有一个吗？（Python 通常会拒绝从缺少`__init__.py`文件的目录导入，除非它与最初调用 python 解释器的目录相同。）

# c++ - 在文本文件中搜索特定行 C++

> ID：15675736
> 
> 赞同：0
> 
> 时间：2013-03-28T06:41:01.660
> 
> 标签：c++, file, search, text

所以我有一个 txt 文件，我想创建一个函数来搜索它并找到特定的行。txt 文件是婴儿名字的列表和名字的使用频率。它看起来像这样：

```
jack,M,1456
julie,F,879
conner,M,540
ben,M,20843 
```

基本上我想要一个函数，如果用户输入该名称，它将显示该名称的行。所以用户会被提示输入一个名字，我会使用他们的输入来搜索文件，直到找到这个名字。如果 julie 是用户输入的，结果会是屏幕打印出 julie,F,879。

另外，在那张纸条上，如果我有多个 txt 文件怎么办？例如：

```
file1.txt
jack,M,1456
julie,F,879
conner,M,540
ben,M,20843

file2.txt
jacob,M,15687
alex,F,5648
shannon,F,964
conner,M,760 
```

我将如何搜索多个 txt 文件以找到该行？如果用户输入了 alex，我将如何获得搜索两个单独的 txt 文件的功能？

最后（我知道，这是在拖延......）如果用户输入 conner，我将如何让程序显示两个 txt 文件中的行？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T08:22:00.280

只是给你一个开始的提示。您可以使用 stl [ifstream](http://www.cplusplus.com/reference/fstream/ifstream/)类，您还可以在其中提取格式化数据。stl 为您提供了很多方法来实现您想要的。

# java - 使用 Java 检查系统的 Internet 连接

> ID：15675739
> 
> 赞同：1
> 
> 时间：2013-03-28T06:41:17.373
> 
> 标签：java, proxy, httpurlconnection

我写了一个方法，可以帮助我们找到系统是否使用代理连接互联网，如下所示，

```
try {

    System.out.println("Checking internet connection availability.....");
    URL u = new URL("http://www.google.com/");
    HttpURLConnection uc = (HttpURLConnection) u.openConnection();
    uc.setReadTimeout(1);//I have tried this without timeout and with it too. But it didnt work
    System.out.println(uc.getResponseCode());
} catch (Exception ex) {
    System.out.println("Unable to connect to internet without proxy.....");
    System.out.println("Checking for any proxy settings from the PC");
    System.setProperty("java.net.useSystemProxies", "true");
    try {
        System.setProperty("java.net.useSystemProxies", "true");
        URL u = new URL("http://www.google.com/");
        HttpURLConnection uc = (HttpURLConnection) u.openConnection();
        System.out.println(uc.getResponseCode());
        System.out.println("Internet connection available");
    } catch (Exception e) {
        System.out.println("Internet connection not available :(");
    }
} 
```

最初，我试图在没有代理的情况下打开 URL 连接（假设系统没有代理来连接互联网）。我已将超时设置为 1 毫秒。试图从站点获取响应代码。如果发生任何错误意味着（如超时），那么在 catch 块中，我正在尝试使用系统的代理连接到互联网，方法是`useSystemProxies`将`true`. 但即使在那之后，我也无法得到该网站的回复。

我正在使用具有代理设置的系统。

我在 catch 块中也尝试过以下操作

```
Proxy next = ProxySelector.getDefault().select(new URI("http://www.google.com/")).iterator().next();
if (next.address() != null) {
    System.out.println("Detecting Proxy configurations.....");
    String proxy = next.address().toString();
    String proxyHost = proxy.substring(0, proxy.indexOf(":"));
    String proxyPort = proxy.substring(proxy.indexOf(":") + 1);
    System.out.println("Proxy Configuration : " + proxyHost + " @ " + proxyPort);
} 
```

上面的代码块也不起作用。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:46:34.543

[InetAddress.isReachable](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html#isReachable%28int%29)

> 测试该地址是否可达。实现会尽最大努力尝试访问主机，但防火墙和服务器配置可能会阻止请求，从而导致无法访问状态，而某些特定端口可能可以访问。如果可以获得特权，典型的实现将使用 ICMP ECHO REQUEST，否则它将尝试在目标主机的端口 7 (Echo) 上建立 TCP 连接。超时值（以毫秒为单位）表示尝试应该花费的最长时间。如果在得到应答之前操作超时，则认为主机不可达。负值将导致抛出 IllegalArgumentException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:46:41.490

在 catch 块中的第一个代码片段中，尝试设置以下代码。

```
System.setProperty("http.proxyHost", "Proxy host");
System.setProperty("http.proxyPort", "Proxy Port"); 
```

似乎您的代理已注册为系统代理并且对 JVM 不可见。

# html - IE10 HTML 渲染，适用于 IP，但不适用于配置的域

> ID：15675740
> 
> 赞同：1
> 
> 时间：2013-03-28T06:41:17.763
> 
> 标签：html, css, internet-explorer-10

我正在使用 Windows 8 上的 IIS 配置的本地系统上的一个简单网站上工作。我的系统也在 ADS 中。我的 html 中有以下导航栏。

```
<div class="bar">
    <ul class="navul">
        <li class="navli sp"><a class="toplinks" href="#">Home</a></li
        ><li class="navli"><a class="toplinks" href="#">Register</a></li
        ><li class="navli"><a class="toplinks" href="#">Privacy</a></li
        ><li class="navli"><a class="toplinks" href="#">Disclaimer</a></li
        ><li class="navli"><a class="toplinks" href="#">Terms</a></li
        ><li class="navli"><a class="toplinks" href="#">About</a></li>
    </ul>
</div> 
```

对应的CSS是

```
.bar
{
height:50px;
background:url('../img/nav.jpg');
-webkit-border-radius: 4px;
-ms-border-radius: 4px;
-moz-border-radius: 4px;
-o-border-radius: 4px;
border-radius: 4px;
}
.navul
{
list-style:none;
margin:0;
padding:0;
}
.navli
{
display:inline-block;
font-size: 24px;
font-family: Georgia Verdana;
text-align: center;
border-right: 1px solid;
border-color: #EEE;
color:white;
height:50px;
}
.sp
{
-webkit-border-radius: 4px 0 0 4px;
-moz-border-radius: 4px 0 0 4px;
-ms-border-radius: 4px 0 0 4px;
-o-border-radius: 4px 0 0 4px;
border-radius: 4px 0 0 4px;
}
.navli:hover
{
background:#040;
}
.toplinks
{
display:inline-block;
text-decoration: none;
padding: 10px 20px 10px 20px;
margin:0;
color:#E1E1E1;
}
.toplinks:visited
{
color:#E1E1E1;
}
.toplinks:hover
{
color:white;
} 
```

我遇到的问题是，当我使用我的IP或localhost甚至直接打开html文件时，IE10按预期显示，但是当我使用域打开时，它显示错误。

以下格式使用IP显示

![IE 10](../Images/0b8031e9f223910bdc998bfec54355b9.png)

当我使用域访问时，我获得以下内容。

![IE 10 无效](../Images/abc4a7791a54417603b9c121965c2f17.png)

请提出任何解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:53:12.647

在 IE 中，按一次 alt 键以在顶部显示菜单栏（就像过去一样）。单击工具 > 兼容性视图设置。

您可能选中了“在兼容性视图中显示 Intranet 站点”框。这将解释在本地查看站点时的不同行为。

# android - 如何使用 Google Calendar API 查明用户是否启用了 SMS 提醒？

> ID：15675744
> 
> 赞同：3
> 
> 时间：2013-03-28T06:41:25.027
> 
> 标签：android, google-calendar-api, google-api-java-client

[我的应用程序通过Google Calendar API v3](https://developers.google.com/google-apps/calendar/)将事件及其各自的提醒保存到用户的 Google 帐户。我不想为那些未启用此功能并在其 Google 帐户上验证其电话号码的用户提供“短信提醒”选项。

**到目前为止，我已经尝试过了：** 我为未启用 SMS 提醒的 Google 帐户插入了一个带有 SMS 提醒的事件。结果：短信提醒确实已注册/保存（因为 API 响应返回的事件对象确实有短信提醒），但在用户配置移动设置之前，此短信提醒在日历中不可见。换句话说，可以添加 SMS 事件，但在配置用户帐户之前它们会被忽略，而我的应用程序无法知道这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:19:15.940

嗯，你添加了 android 和一堆 google 标签，所以我会咬（上钩）！

最终用户是否要求“短信提醒”？或者您是否向“仅”拥有 Android 设备的最终用户提供“短信提醒”？为什么现在提供“真实”（非旧技术-SMS）提醒的 Google Now（Android 4.1 或 4.1.2+）可用时提供“短信”提醒？

我的应用程序将事件推送到一个日历，由所有“感兴趣”的人员共享，在共享日历设置中为每个事件设置提醒（我认为），以及那些有权访问共享日历的...获取 Google Now 提醒（1 小时， 2 小时、12 小时、24 小时）在每个事件上。

使用 Google Now 而不是旧的 (SMS) 技术。Google Now 更加用户友好。我的应用程序在事件描述中发送谷歌地图 URL 以及客户联系信息等...，如果您在活动中在 Where 中设置有效位置，那么 Google Now 将通知 Android 最终用户“什么时候离开到达准时”（我的兄弟告诉我这件事，并希望我的应用程序在活动地点添加位置数据），他们/我们喜欢在我们的 Android 设备上使用 Google Now 提醒。

我们是一个 google/android-happy 家庭。:)

# javascript - javascript代码在HEAD标签中不起作用

> ID：15675745
> 
> 赞同：6
> 
> 时间：2013-03-28T06:41:28.607
> 
> 标签：javascript, html, head

我的网页有以下代码：

```
<html>
<head>
    <title>This is test Page</title>

     <script language="javascript" type="text/javascript">

         document.getElementById("msg1").innerHTML = document.URL.toString();
        </script>

</head>
<body>

    <div class="sss">
        <p id="msg1"></p>
    </div>

</body>
</html> 
```

正如您现在在脚本执行时 div 不存在，但我只想将我的 JavaScript 代码放在`<head>`标签中，我不会把它放在 HTML 代码的中间。

但是这个代码只有在我把标签放在`<script>`标签之后才有效`<div>`。我使用 VS2010 和 firefox 19.0.1

反正有没有把代码放在`<head>`标签中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T06:48:08.503

您的脚本依赖于准备好的 DOM，因此您只需要在 DOM 准备好后执行该函数调用。

```
<script language="javascript" type="text/javascript">

window.onload = function() {
    document.getElementById("msg1").innerHTML = document.URL.toString();
}

</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-04T08:38:46.800

您的脚本使用 DOM 元素，因此必须在加载 DOM 后运行。你可以通过使用这个函数来做到这一点：

```
$(document).ready(function(){
    //code here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T06:44:19.620

HTML 页面中的各种标签按照它们在页面上出现的顺序加载和处理。您的`<script>`标签在`<head>`. 这是在解析之前`<body>`和里面的元素。`<body>`因此，脚本会尝试引用在执行时未定义的元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T06:47:52.643

Michael Geary 是对的，为了执行您的代码，我将使用 jQuery 库（JS 开发中的事实标准）并利用 DOM 就绪事件。这将确保处理程序中的代码将在 DOM 完全加载后执行。

```
<script>
  $(function(){
    $('#msg1').html(document.URL.toString());
  });
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-23T15:35:35.910

我建议这样使用`addEventListener`：

```
<script language="javascript" type="text/javascript"> 
document.addEventListener("DOMContentLoaded",() => { 
       document.getElementById("msg1").innerHTML = document.URL.toString();
    });
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T06:47:02.560

您的脚本使用 dom 元素并且必须在 dom 加载后运行。

将您的代码包装在一个函数中并在加载 dom 后调用它

```
function myfunc(){  
//code here
}
window.onload = myfunc(); 
```

# web-services - 如何通过电子邮件分享通行证

> ID：15675746
> 
> 赞同：-1
> 
> 时间：2013-03-28T06:41:29.767
> 
> 标签：web-services, ios6, passbook

我创建了一个通行证，可以通过 MAMP 中的应用程序或 Web 服务器添加它。如何通过电子邮件分享，我该如何分享？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:43:30.360

像这样的东西应该可以解决问题。请注意，需要 MIME 类型`application/vnd.apple.pkpass`才能使设备将其识别为 Passbook 通行证。

```
$pass = "pass.pkpass";
$path = "/path/to/pass/";
$from_name = "smallgirl";
$from_mail = "smallgirl@smallgirl.co.kr";
$reply_to = "smallgirl@smallgirl.co.kr";
$subject = "Your Passbook Pass.";
$message = "Hello,\r\nHere's your pass.";

email_pass($pass, $path, "recipient@mail.org", 
           $from_mail, $from_name, $reply_to, $subject, $message);

function email_pass($pass, $path, $mail_to, $from_mail, $from_name, $reply_to, $subject, $message) {
    $content = chunk_split(base64_encode(file_get_contents($path.$pass)));
    $uid = md5(uniqid(time()));
    $name = basename($pass);
    $header = "From: ".$from_name." <".$from_mail.">\r\n";
    $header .= "Reply-To: ".$reply_to."\r\n";
    $header .= "MIME-Version: 1.0\r\n";
    $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
    $header .= "This is a multi-part message in MIME format.\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-type:text/plain; charset=utf-8\r\n";
    $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
    $header .= $message."\r\n\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-Type: application/vnd.apple.pkpass; name=\"".$pass."\"\r\n"; // use different content types here
    $header .= "Content-Transfer-Encoding: base64\r\n";
    $header .= "Content-Disposition: attachment; filename=\"".$pass."\"\r\n\r\n";
    $header .= $content."\r\n\r\n";
    $header .= "--".$uid."--";
    if (mail($mail_to, $subject, "", $header)) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:17:30.537

通过使用Mail.app，现在我可以将通行证发送给其他人以添加到存折！

# c# - 将多个对象序列化为一个二进制文件

> ID：15675750
> 
> 赞同：4
> 
> 时间：2013-03-28T06:41:34.997
> 
> 标签：c#, serialization, binary-serialization

我有一个 MDI 应用程序，其中有一个停靠在左侧的树视图控件和五个包含树节点信息的类，即此类节点的编辑器。

*   我应该如何序列化应用程序，以便将所有对象序列化为单个二进制文件？

*   如何将我的资源存储在其中，以便可以将单个文件发送到所有机器？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T06:58:03.090

如果您希望将多个对象序列化到一个文件中，只需将它们全部组合到一个对象中即可。

例如，您有很多对象需要像这样序列化：

```
Teacher t = new Teacher();

Student[] students = new Student[] { ... };

Tool blackboard = new Tool();

... 
```

所有这些对象都应该是可序列化的。

您可以创建一个容器来包含这些对象，并将其序列化。

```
[Serializable]
class School
{
    Teacher t;

    Student[] students;

    Tool blackboard;
} 
```

现在，您只需要将学校对象序列化为一个二进制文件。

# gcc - gtk 窗口移动然后崩溃

> ID：15675751
> 
> 赞同：1
> 
> 时间：2013-03-28T06:41:42.553
> 
> 标签：gcc, gtk, mingw

我想将我自己的 gtk 程序从旧的 MinGW 转移到最新的。在过去的 2 周里，我遇到了很多问题，但找不到方法。请参考我发布的其他 2 个问题：

[mingw 是否影响编译 gtk 程序](https://stackoverflow.com/questions/15519088/does-mingw-influence-compilation-a-gtk-program)并[在 mingw 中编译 gtk 但失败](https://stackoverflow.com/questions/15588225/compile-gtk-in-mingw-but-failed)。

最后，我自己编译`gtk+2.24.10`在`MinGW`. 以下是环境的详细信息：

```
 GTK version                            gcc version
old mingw   2.10.11 -- from third party            3.4.5
new mingw   2.24.10 -- compiled by myself          4.7.2 or 4.6.2 -- I tried both 
```

对于旧环境下的程序，一切运行良好。

对于新环境下的程序，上面提到的“mingw是否影响编译一个gtk程序”的问题消失了。但是有一个新问题我找不到它来自哪里的任何线索：

启动我的程序时，如果我移动 GUI 窗口，它就会崩溃。我使用 gdb 进行调试，但如果它崩溃了，系统就会冻结。唯一的方法是使用“ctrl + alt + del”来激活任务管理器并停止程序。然后在GDB中，`where`还是`bt full`没有显示任何有用的信息。如果我不移动 GUI 窗口，窗口中的所有功能都运行良好。还有一件事，我的程序使用`openssl`的`pdflib`是来自第三方的。该程序链接到库，但在 GUI 窗口刚启动时不使用它们。

*   我自己的代码中是否有任何错误？我不这么认为，因为它在旧的 MinGW 环境中运行良好。一些警告`g_thread_create, g_thread_init is deprecated`在 gtk+2.24.10 包中，但没有出现在 gtk+2.10.11 包中。

*   是不是我自己在MinGW编译的gtk系统，包括gtk、glib、cario、atk等有什么问题？我说不出来。但是`gtk_demo`包含在 gtk 包中运行良好，我可以将程序的窗口移动到任何地方。

*   它与gcc版本有关吗？我说不出来。我google了一下，发现有人抱怨他的gcc 4.7.x编译的gtk程序不稳定，经常受到突然崩溃的影响。gcc 4.6.2 绝对是有人建议的。但就我而言，即使由 gcc 4.6.2 编译，它仍然崩溃。

*   由于 ABI 问题，它是否与来自第三方的 openssl 和 pdflib 有关？我说不出来。

M代码在Linux环境下编译——gtk+2.24.6。它运行良好。

* * *

**更新 1**：

我找到了一些线索。问题来自`thread`. 但是我仍然不知道为什么它在旧的 MinGW 中有效，但在新的 MinGW 中却失败了。下面是一个简单的例子。

正如我所说，如果我在旧的 MinGW 中编译它，它就可以工作——数据，实际上是一个计数器，在小部件中更新。我可以移动窗口。

如果我在新的 MinGW 中编译它，它就可以工作——数据，实际上是一个计数器，在小部件中更新。但是如果我移动窗口，它就会崩溃。如果我评论了与线程相关的内容，那么我可以移动窗口，但数据不会在窗口中更新。

```
#include <gtk/gtk.h>

static int counter = 0;
static PangoLayout* layout;
static GdkGC* gc1;
static GdkGC* gc2;
//**/static GMutex* mu;

static gboolean on_expose_event(GtkWidget* widget, GdkEventExpose* event)
{
    gchar the_string[20];

    //**/g_mutex_lock(mu);
    gdk_draw_rectangle(GDK_DRAWABLE(widget->window), gc1, TRUE, 0, 0, widget->allocation.width, widget->allocation.height);
    snprintf(the_string, 20, "%d", counter);
    pango_layout_set_text(layout, the_string, -1);
    gdk_draw_layout(GDK_DRAWABLE(widget->window), gc2, 180, 120, layout);
    //**/g_mutex_unlock(mu);

    g_print (".");
    return FALSE;
}

gpointer func(gpointer data)
{
    //**/g_usleep(10000);
    GdkWindow* window = GDK_WINDOW(data);
    while(TRUE)
    {
  gdk_threads_enter();
        gdk_window_invalidate_rect(window, NULL, FALSE);
gdk_threads_leave();
        //**/gdk_window_process_updates(window, FALSE);
        if(counter % 100 == 0) g_print("X");
        g_usleep(10);
        ++counter;
    }
    return FALSE;
}

int main(int argc, char** argv)
{
    GtkWidget* window;
    GtkWidget* drawer;
    GdkColormap* colormap;
    GdkColor color;

    g_thread_init(NULL);
    gdk_threads_init();
    gtk_init(&argc, &argv);

    //:Create widgets and 
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    drawer = gtk_drawing_area_new();
    gtk_widget_set_size_request(drawer, 400, 300);
    gtk_container_add(GTK_CONTAINER(window), drawer);
    //.

    gtk_widget_show_all(window);

    //:Initializing Graphic Contexts
    colormap = gtk_widget_get_colormap(GTK_WIDGET(drawer));
    layout = gtk_widget_create_pango_layout(GTK_WIDGET(drawer), NULL);
    gc1 = gdk_gc_new(GDK_DRAWABLE(GTK_WIDGET(drawer)->window));
    gc2 = gdk_gc_new(GDK_DRAWABLE(GTK_WIDGET(drawer)->window));
    gdk_color_parse("#000", &color);
    gdk_colormap_alloc_color(colormap, &color, FALSE, TRUE);
    gdk_gc_set_background(gc1, &color);
    gdk_color_parse("#fff", &color);
    gdk_colormap_alloc_color(colormap, &color, FALSE, TRUE);
    gdk_gc_set_foreground(gc2, &color);
    //.

    g_signal_connect(G_OBJECT(window), "destroy", G_CALLBACK(gtk_main_quit), NULL);
    g_signal_connect(G_OBJECT(drawer), "expose_event", G_CALLBACK(on_expose_event), NULL);

    //**/mu = g_mutex_new();
    //Run the problematic thread!
    g_thread_create(func, GTK_WIDGET(drawer)->window, FALSE, NULL);

    gdk_threads_enter();
    gtk_main();
    gdk_threads_leave();

    //**/g_mutex_free(mu);
    return 0;
} 
```

编译：

```
gcc -g -o example update_widget.c `pkg-config --libs --cflags gtk+-2.0 gthread-2.0` 
```

* * *

**更新 2**：

我检查`config.log`了编译`glib`并找到以下单词：

```
configure:26678: WARNING: I can't find the MACRO to enable thread safety on your
                platform (normally it's _REENTRANT). I'll not use any flag on
                compilation now, but then your programs might not work.
                Please provide information on how it is done on your system. 
```

它会影响线程功能吗？

我的编译配置`glib`是：

```
export CFLAGS="-march=i686"
./configure --prefix=$HOME/gtk+$GTK_VERSION --with-threads=win32 --with-pcre=internal
make
make install 
```

# javascript - 创建具有可变属性高度的半圆形饼图

> ID：15675753
> 
> 赞同：1
> 
> 时间：2013-03-28T06:41:44.470
> 
> 标签：javascript, html, css, dom, d3.js

我是 JS 新手，正在查看[http://d3js.org/](http://d3js.org/)上的图表，但我无法理解如何操作它们。基本上我想使用动画甜甜圈图，但我只想显示一个半圆以及每个属性的不同高度（饼图中的部分）。我已经查看了其他一些教程，但我似乎无法理解它，任何帮助将不胜感激。

这是我正在使用的代码：

```
var resume_dataset =
    [
    {job:"", start:2007, end: 2009, color: "#eb9ca1"},
    {job:"", start:2008, end: 2010, color: "#f9a482"},
    {job:"", start:2010, end: 2011, color: "#d0ebe9"},
    {job:"", start:2013, end: 2014, color: "#cccc99"},
    {job:"", start:2012, end: 2013.25, color: "#ffcc99"},
    {job:"", start:2011, end: 2014, color:"#9999cc"}
    ];

    function year_to_angle(year) {
        return ((year - 2007)*Math.PI)/7-(Math.PI/2.0);
    }

    var width = 960,
        height = 500,
        radius = Math.min(width, height) / 2;

    var color = d3.scale.category20();

    var degree = Math.PI/180;

    var arc = d3.svg.arc()
        .innerRadius(radius - 180)
        .outerRadius(function(datum, i) { if(i != undefined){datum._i = i}; return radius - 30 + datum._i *10} );

    var job_arc = d3.svg.arc()
        .innerRadius(radius - 180)
        .outerRadius(function(d){return radius - 30 + 20*(d.start-2007)})
        .startAngle(function(d){return year_to_angle(d.start)})
        .endAngle(function(d){return year_to_angle(d.end)})
        //.onMouseOver(function(d){$(d.job).attr("class", "highlight")})

    var svg = d3.select("svg")
        .attr("width", width)
        .attr("height", height)
      .append("g")
        .attr("transform", "translate(" + width / 2 + "," + (height - 70)  + ")");

    var path = svg.selectAll("path")
        .data(resume_dataset)
        .enter().append("path")
        .attr("fill", function(d){return d.color})
        .attr("d", job_arc).attr("opacity", 0.7)

    </script> 
```

想通了！感谢大家的贡献！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T10:24:31.370

关于半圆，您可以在饼图变量中设置 .startAngle 和 .endAngle。

```
var degree = Math.PI/180; // just to convert the radian-numbers
var pie = d3.layout.pie().sort(null).startAngle(-90*degree).endAngle(90*degree); 
```

# extjs - 在 extjs 中从控制器更改存储 api

> ID：15675755
> 
> 赞同：3
> 
> 时间：2013-03-28T06:41:53.190
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

以下是我的`MyStore.js`：

```
Ext.define('MyApp.store.MyStore', {
    extend: 'Ext.data.Store',
    model: 'MyApp.model.Note',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        api: {
            /* I want to change the following two filepaths */
            read: 'data/notesMar2013.json',
            update: 'data/notesMar2013.json' 
        },
        reader: {
            type: 'json',
            root: 'data',
            successProperty: 'success'
        }
    }
}); 
```

我正在尝试通过控制器更改 MyStore 的`read`和`update`值，`api`如下所示：

```
var notesStore = Ext.getStore('MyStore');
notesStore.on('load',function(notesStore){
        var proxy = notesStore.getProxy();
        Ext.apply(proxy.api,{
            /* Changing the file paths here */
            read: 'data/notesApr2013.json',
            update: 'data/notesApr2013.json' 
        })
        notesStore.load();                              
},this,{single:false});
//
console.log(notesStore); 
```

通过使用上述功能，我试图更新 MyStore 但它没有发生。当我在 chrome 控制台中签入时，值已成功更改，但即使我使用了也不会更新或覆盖商店`notesStore.load()`。可能是什么问题呢？

我参考了以下链接

*   [链接1](https://stackoverflow.com/q/7670001/1577396)
*   [链接2](https://stackoverflow.com/q/8025687/1577396)

**答**：代码运行良好。让我解释一下我的问题：我在容器上显示商店中的内容，最初，容器中填充了一些内容并且高度是固定的。如果我什至将任何内容添加到容器中，那么它将变得隐藏，因为容器具有固定高度。到目前为止，内容被**附加**到默认内容，而不是删除默认内容然后添加。那是真正的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:20:33.557

这应该没有任何问题，因此您在任何其他点都有错误。请查看此**[JSFiddle](http://jsfiddle.net/R8Tzp/)**中的控制台。这是我使用的测试代码

```
Ext.define('MyApp.model.Note',{extend:'Ext.data.Model'});
Ext.define('MyApp.store.MyStore', {
    extend: 'Ext.data.Store',
    model: 'MyApp.model.Note',
    proxy: {
        type: 'ajax',
        getUrl: function(request) {
            console.log('fetched request url');
            console.log(this.api[request.action]);
            return request.url || this.api[request.action] || this.url;
        },
        api: {
            /* I want to change the following two filepaths */
            read: 'data/notesMar2013.json',
            update: 'data/notesMar2013.json' 
        },
        reader: {
            type: 'json',
            root: 'data',
            successProperty: 'success'
        }
    }
});
var store = Ext.create('MyApp.store.MyStore');
console.log('The origin API');
console.log(store.getProxy().api);
store.load();
var proxy = store.getProxy();
var newApi =  {read: 'data/2013.json', update: 'data/2013.json' };
Ext.apply(proxy.api,newApi);
console.log('The changed API');
console.log(store.getProxy().api);
store.load(); 
```

# c# - 如何使用 c# 在 mysql 5.1 版本中插入 unicode 值？

> ID：15675757
> 
> 赞同：2
> 
> 时间：2013-03-28T06:42:03.737
> 
> 标签：c#, asp.net, mysql, c#-4.0, phpmyadmin

在我的 asp.net 应用程序中，我有一些 unicode 格式的数据（印地语-印度语言）。现在我想将此 unicode 文本插入 mysql(5.1) 数据库。当我运行以下 C# 代码时，文本存储在我的数据库中就像**??????** 而不是我的 unicode 文本。但是当我通过**phpmyadmin**执行查询时，它被正确存储。

我已经将 db、table 和特定字段排序规则设置为**utf8_general_ci**。并将 db 字符集设置为**utf8**。

```
string mysql_query2 = "SET NAMES 'utf8'";
da.UpdateCommand = new MySqlCommand(mysql_query2, mysqlCon);
da.UpdateCommand.ExecuteNonQuery();

string para_text="हिन्दी भारत";
string para_outerxml="की राष्ट्रभाषा";
string status="जयपुर। हास्य-व्यंग्य";

string sql = "Insert into sand_box (para_text,para_outerxml,status) values('" + para_text + "','" + para_outerxml + "','" + status+")";
da.InsertCommand = new MySqlCommand(sql, mysqlCon);
da.InsertCommand.ExecuteNonQuery(); 
```

另外，请参考我下面的图片。（表结构）

![在此处输入图像描述](../Images/c7190bc6c49cdd9216b763777bd41f85.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:09:24.003

您需要将其投射`base-64`并插入如下

```
var langText = Convert.ToBase64String(Encoding.UTF8.GetBytes("yourtext")); 
```

在取回时将其转换为普通字符串，如下所示

```
var Normal=Encoding.UTF8.GetString(Convert.FromBase64String("your base64text")); 
```

## 编辑 1

所以你的插入应该像

```
string mysql_query2 = "SET NAMES 'utf8'";
da.UpdateCommand = new MySqlCommand(mysql_query2, mysqlCon);
da.UpdateCommand.ExecuteNonQuery();

string para_text="हिन्दी भारत";
string para_outerxml="की राष्ट्रभाषा";
string status="जयपुर। हास्य-व्यंग्य";

string sql = "Insert into sand_box (para_text,para_outerxml,status) 
     values('" + Convert.ToBase64String(Encoding.UTF8.GetBytes(para_text)) + "','" 
             + Convert.ToBase64String(Encoding.UTF8.GetBytes(para_outerxml)) + "','" + 
              Convert.ToBase64String(Encoding.UTF8.GetBytes(status))+")";
da.InsertCommand = new MySqlCommand(sql, mysqlCon);
da.InsertCommand.ExecuteNonQuery(); 
```

## 编辑 2

这是一个类似的问题
[，如何从 asp.net C# 将阿拉伯语插入 mysql](https://stackoverflow.com/questions/13441787/how-to-insert-arabic-into-mysql-from-asp-net-c-sharp/13441874#13441874)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:50:29.373

MySQL 5.1 支持两种字符集来存储 Unicode 数据：

```
ucs2, the UCS-2 encoding of the Unicode character set using 16 bits per character.

utf8, a UTF-8 encoding of the Unicode character set using one to three bytes per character. 
```

# django - django模板中的日期时间比较

> ID：15675764
> 
> 赞同：8
> 
> 时间：2013-03-28T06:42:48.177
> 
> 标签：django

我在比较 Django 模板中的两个日期时遇到问题。

我的模型中有一个日期字段：

```
 date_created = models.DateTimeField(auto_now=True) 
```

我想按今天的日期比较 date_created。所以这就是我在我的 django 模板中所做的：

```
{% if x.for_meeting.date_created < today%} # (x is the instance of MeetingRecord class where for_meeting field is Foreign key to Meeting table Where date_created) 
```

现在我正在计算今天的观点，例如：

```
today =  datetime.now().strftime("%B %d, %Y,%I:%M %P") 
```

不幸的是，我无法比较日期。

请告诉我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T06:47:53.293

```
today =  datetime.now()

{% if x.for_meeting.date_created.date < today.date and x.for_meeting.date_created.time < today.time  %} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-01-27T18:05:47.883

您不必创建 today 变量（在视图中），只需使用已经可用的 {% now %} 模板标签。

而且，在比较 Django 模板中的 DateTimeField 对象时，请确保在相同的时区中比较它们。为了清晰和与时区更改兼容，您可能希望明确说明：

```
{% load tz %}

{% if date_created|utc < now|utc %} 
```

如果 dead_deadline 为 None 或 => 而不是当前日期时间，则计算结果为 False。

默认情况下（对我而言），date_created 采用数据库时间 (UTC)，现在采用 settings.py 中设置的本地时间。

还要确保您比较的值具有有意义的值。

PS。如果您尝试使用本地时间过滤器将日期时间对象转换为“自 Unix 纪元以来的秒数（1970 年 1 月 1 日 00:00:00 UTC）”，即日期：“U”，则输出将为无。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-07-15T09:17:15.110

```
{% if date_created|date:"YmdHis" < now|date:"YmdHis" %}

{% endif %} 
```

# c# - 元组结构身份

> ID：15675765
> 
> 赞同：0
> 
> 时间：2013-03-28T06:42:49.553
> 
> 标签：c#, unit-testing, tuples, identity

同样使用带有专门用于比较列表的方法的断言库，我无法在单元测试中匹配这两个结果：

```
var list1 = new List<Tuple<string, IEnumerable<string>>>
{
  Tuple.Create<string,IEnumerable<string>>("string", new[] { "value" })
};

var list2 = new List<Tuple<string, IEnumerable<string>>>
{
  Tuple.Create<string,IEnumerable<string>>("string", new[] { "value" })
};

var result = list1.All(a => list2.Any(a.Equals)); // result false 
```

获得肯定匹配的唯一方法是*分解*元组并`Item2`使用支持列表比较的方法进行匹配。

有没有办法不做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:45:47.017

您可以使用[`SequenceEqual`](http://msdn.microsoft.com/en-us/library/bb348567.aspx)扩展方法：

```
var result = list1.All(a => list2.Any(x => x.Item1 == a.Item1 && x.Item2.SequenceEqual(a.Item2))); 
```

返回`true`您的样本输入。

`Tuple<string, IEnumerable<string>>`您必须明确执行此操作并且在比较两个实例时默认情况下它不起作用的原因是第二`Tuple`项。根据 MSDN，两个组件相互检查以确定`Tuple`s 是否相等。因为第二个是使用`Array`标准引用相等比较器。并且因为您`Tuple`的 s 没有指向`Array`内存中的相同内容，所以它返回 false。

如果您的对象仅指向同一个数组，则Stardard`.Any(a.Equals)`将起作用：`Tuple`

```
var array = new[] { "value" };

var list1 = new List<Tuple<string, IEnumerable<string>>>
{
    Tuple.Create<string,IEnumerable<string>>("string", array)
};

var list2 = new List<Tuple<string, IEnumerable<string>>>
{
    Tuple.Create<string,IEnumerable<string>>("string", array)
};

var result = list1.All(a => list2.Any(a.Equals)); 
```

退货`true`也一样。

# android - 当我尝试显示对话框时，它给了我 FORCE CLOSE 错误

> ID：15675767
> 
> 赞同：2
> 
> 时间：2013-03-28T06:42:51.630
> 
> 标签：android, android-intent, android-dialog

这是显示我的对话框活动的代码。每当我尝试打开此意图时，我的应用程序都会强制关闭。所以请告诉我代码中的错误。这里是 logcat。

> 03-28 12:11:36.851: E/AndroidRuntime(681): 致命异常: main 03-28 12:11:36.851: E/AndroidRuntime(681): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. neelrazin.noteit/com.neelrazin.noteit.Password}: java.lang.NullPointerException 03-28 12:11:36.851: E/AndroidRuntime(681): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647) 03 -28 12:11:36.851: E/AndroidRuntime(681): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663) 03-28 12:11:36.851: E/AndroidRuntime(681): 在 android.app .ActivityThread.access$1500(ActivityThread.java:117) 03-28 12:11:36.851: E/AndroidRuntime(681): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:931) 03-28 12: 11:36.851: E/AndroidRuntime(681): 在 android.os.Handler.dispatchMessage(Handler.java:99) 03-28 12:11:36.851: E/AndroidRuntime(681): 在 android.os.Looper.loop(Looper.java:123) 03-28 12:11:36.851: E/AndroidRuntime(681): 在android.app.ActivityThread.main(ActivityThread.java:3683) 03-28 12:11:36.851: E/AndroidRuntime(681): at java.lang.reflect.Method.invokeNative(Native Method) 03-28 12:11 :36.851: E/AndroidRuntime(681): at java.lang.reflect.Method.invoke(Method.java:507) 03-28 12:11:36.851: E/AndroidRuntime(681): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 03-28 12:11:36.851: E/AndroidRuntime(681): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 03 -28 12:11:36.851: E/AndroidRuntime(681): at dalvik.system.NativeStart.main(Native Method) 03-28 12:11:36.851: E/AndroidRuntime(681): Caused by: java.lang. NullPointerException 03-28 12:11:36。851: E/AndroidRuntime(681): 在 com.neelrazin.noteit.Password.onCreate(Password.java:57) 03-28 12:11:36.851: E/AndroidRuntime(681): 在 android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1047) 03-28 12:11:36.851: E/AndroidRuntime(681): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)

```
public class Password extends Activity {

    final Context context = this;
     public Long mRowId;
     private NotesDbAdapter mDbHelper;
     String password;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.password);

        mRowId = (savedInstanceState == null) ? null :
            (Long) savedInstanceState.getSerializable(NotesDbAdapter.KEY_ROWID);
        if (mRowId == null) {
            Bundle extras = getIntent().getExtras();
            mRowId = extras != null ? extras.getLong(NotesDbAdapter.KEY_ROWID)
                                    : null;
        }

         mDbHelper = new NotesDbAdapter(this);
            mDbHelper.open();
          Cursor notesC = mDbHelper. fetchNote( mRowId);
            startManagingCursor(notesC);
            final String pass = notesC.getString( notesC.getColumnIndex("passw") );

         // custom dialog
            final Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.password);
            dialog.setTitle("Enter Password");

            final EditText enterpass = (EditText) dialog.findViewById(R.id.edtext);

            Button ok=(Button)findViewById(R.id.dialogButtonOK);
            ok.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    password= enterpass.getText().toString();
                    if(password.equals(pass.toString())){

                        Intent i= new Intent(getBaseContext(),NoteEditor.class);
                          i.putExtra(NotesDbAdapter.KEY_ROWID,mRowId);
                            startActivity(i);
                    }

                }
            });

            Button dialogButton = (Button)          dialog.findViewById(R.id.dialogButtonCANCEL);
            dialogButton.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    dialog.dismiss();
                }
            });
            dialog.show();  
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T06:49:44.747

在这里 ：

```
Button ok=(Button)findViewById(R.id.dialogButtonOK);//<< 
```

`setContentView`在访问视图之前，您忘记调用Activity。将Activity中的Activity布局设置`onCreate`为：

```
@Override
  protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); //<<<
   ..... 
```

或者如果`dialogButtonOK`按钮在 Dialog 内部，则使用 Dialog 实例将`ok`按钮初始化为：

```
Button ok=(Button)dialog.findViewById(R.id.dialogButtonOK); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T06:51:31.863

似乎错误，`Buttonok`因为初始化以错误的方式完成，

这边走！：

> 按钮确定=(按钮)dialog.findViewById(R.id.dialogBu​​ttonOK);

反而：

> 按钮确定=（按钮）findViewById（R.id.dialogBu​​ttonOK）；

# iphone - 在 ios 中点击节标题时，在节中折叠展开行

> ID：15675771
> 
> 赞同：2
> 
> 时间：2013-03-28T06:43:06.810
> 
> 标签：iphone, ios, uitableview

我的应用程序中有一个分段表视图，但我想在点击此部分时折叠/展开部分中的行。

我想知道如何实施的步骤。

数据是从 JSON 文件作为字典导入的，我有故事板界面构建器。

当点击此部分时，我想显示/隐藏特定部分的行。

我等着你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:47:53.323

您可以为此使用这些代码行。

添加行

```
 NSIndexPath *tmpIndexpath=[NSIndexPath indexPathForRow:0 inSection:Sender.tag];
        [tbl_Qus insertRowsAtIndexPaths:[NSArray arrayWithObjects:tmpIndexpath, nil] withRowAnimation:UITableViewRowAnimationFade]; 
```

删除行

```
 NSIndexPath *tmpIndexpath=[NSIndexPath indexPathForRow:0 inSection:Sender.tag];
        [tbl_Qus deleteRowsAtIndexPaths:[NSArray arrayWithObjects:tmpIndexpath, nil] withRowAnimation:UITableViewRowAnimationFade]; 
```

您也可以从此[链接](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)下载教程。

# c - c中的remove（）函数给出错误？

> ID：15675774
> 
> 赞同：3
> 
> 时间：2013-03-28T06:43:18.510
> 
> 标签：c

以下函数采用一个名称并从名为 All.bin 的二进制文件中删除该名称。据我所知，它工作正常，但删除功能总是给出错误

```
 void del(char *name)
    {
        struct database d; //strucutre variable containing name and meaning
        FILE *p, *q;
        p = fopen("All.bin","r"); //original file
        q = fopen("temp.bin","w"); // temp file
        while(fread(&d,sizeof(d),1,p))
            if(strcmp(d.name,name) != 0)
                fwrite(&d,sizeof(d),1,q);
        fclose(p);
        fclose(q);
        if(remove("All.bin")!=0) //PROBLEM
            printf("Error");
        if(rename("temp.bin","All.bin")!=0)
            printf("Error@");
        getch();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:51:27.313

检查 All.bin 的文件权限，并尝试 unlink() 功能。

如果 All.bin 是由同一个进程生成的（比如说你调用的函数可能会工作一次，但在那之后就不行了），那么你需要检查在你的情况下关闭文件流的句柄 fclose()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:32:45.967

这对我来说很好。创建 All.bin 文件后更改文件权限

# linux - 如何在 shell 行中捕获选项卡按钮？

> ID：15675777
> 
> 赞同：0
> 
> 时间：2013-03-28T06:43:35.040
> 
> 标签：linux, bash, shell, scripting

我想创建一个带有默认参数的脚本，方式是一些命令如何在linux中按tab按钮显示默认参数

在第一种情况下，我想用命令陷阱捕获选项卡按钮，但这不是正确的方法，因为选项卡按钮应在执行脚本之前被外壳捕获，而在执行脚本之后则不会

问题是，如何在执行程序之前捕获 shell 中的选项卡按钮并显示默认参数而不是获取脚本或程序？

有允许将默认参数传递给 shell 行的恶魔、绑定键或配置文件吗？

**笔记：**

我经常在 gnome-terminal 中使用 bash ，我认为参数的自动完成必须看到终端类型，我不确定

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:39:47.193

您必须使用 Bash 完成功能。作为一个超级简单的示例，假设您的脚本被调用`my_script`并接受参数`foo`，`bar`您可以在文件中编写如下内容：

```
_complete_script_options() {
    COMPREPLY=( $(compgen -W "foo bar" -- ${COMP_WORDS[COMP_CWORD]}) 
}
complete -F _complete_script_options my_script 
```

然后使用`source file_with_completion`.

有关更多信息，您可能希望查看[http://www.debian-administration.org/article/An_introduction_to_bash_completion_part_1](http://www.debian-administration.org/article/An_introduction_to_bash_completion_part_1)和 Bash 手册页。

# jenkins - 如何更改 jenkins `/tmp` 目录位置？

> ID：15675783
> 
> 赞同：29
> 
> 时间：2013-03-28T06:43:55.077
> 
> 标签：jenkins

如何更改詹金斯在其奴隶中存储临时数据的位置。目前，它关闭了与我的奴隶的连接，因为它抱怨以下内容

```
Disk space is too low. Only 0.119GB left on /tmp. 
```

我想将 tmpdir 位置移动到类似`/var/tmp/`而不是`/tmp`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-02-19T02:29:43.293

只需将“-Djava.io.tmpdir=/path/to/tmp”添加到 java 命令行选项（您不需要任何额外的服务包装器）。

根据您的安装，可能存在可以进入的现有启动脚本和/或配置文件。在我的 fedora 系统上，我可以将选项添加到 /etc/sysconfig/jenkins 文件：

```
## Type:        string
## Default:     "-Djava.awt.headless=true"
## ServiceRestart: jenkins
#
# Options to pass to java when running Jenkins.
#
JENKINS_JAVA_OPTIONS="-Djava.awt.headless=true -Djava.io.tmpdir=/var/tmp" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-28T14:27:15.727

在 debian/ubuntu 机器上，将以下内容添加到文件中`/etc/default/jenkins`：

```
# use a different tmpdir for jenkins
JAVA_ARGS="$JAVA_ARGS -Djava.io.tmpdir=/var/tmp/" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-30T06:24:53.013

如果使用“SSH Slaves Plugin”，您可以[在“Advanced settings”中设置JVM Options](https://github.com/jenkinsci/ssh-slaves-plugin/blob/master/doc/CONFIGURE.md#advanced-settings)并添加：

```
-Djava.io.tmpdir=/my/temp 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T08:31:42.057

您可以使用[Java Service Wrapper](https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+as+a+Unix+daemon)。并配置你的包装器（看例子）

```
wrapper.java.additional.2=-Djava.io.tmpdir=../tmp 
```

或者您可以创建符号链接`/var/tmp`文件夹并安装家庭 jenkins 守护程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-24T12:15:19.027

在现代 Jenkins 上，您可以在 Jenkins 配置中使用 UI 选项，该选项称为“覆盖临时目录位置”

[![在此处输入图像描述](../Images/e2769ae5514787fc139cd0277563ba3e.png)](https://i.stack.imgur.com/UAW60.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-16T06:48:59.930

在 Windows 代理上，假设您已将其设置为包含对 Java Web 启动调用的 Windows 服务，您应该在代理的目标文件夹中看到一个 jenkins-slave.xml 文件。

您可以编辑此文件并添加标签`-Djava.io.tmpdir=D:\Whatever\folder\`以`<arguments>`配置临时文件夹。例如

```
 <arguments>-Xrs -Djava.io.tmpdir=D:\Temp\ -jar "%BASE%\slave.jar" -jnlpUrl http://jenkins-master-whatever/slave-agent.jnlp -secret 999999999999999999999999999999999999999999999999999999999999</arguments> 
```

您需要重新启动服务才能看到您所做的修改。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-29T12:49:27.660

在 FreeBSD 上运行，您可以通过将此行添加到您的`/etc/rc.conf`:

```
jenkins_java_opts="-Djava.io.tmpdir=/var/tmp" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-22T16:36:47.643

当 jenkins 被打包时，例如作为 Windows 服务引导，将配置添加到 %JENKINS_HOME%\jenkins.xml`<arguments>`元素或从属设备 %JENKINS_HOME%\jenkins-slave.xml

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-04-21T13:56:07.150

与其他答案相同的信息，但来自 CloudBees 的官方支持文章 regading JNA error on Jenkins Master（尽管这同样适用于 Jenkins 节点）：

[https://support.cloudbees.com/hc/en-us/articles/215281717-Jenkins-fails-to-start-with-JNA-error](https://support.cloudbees.com/hc/en-us/articles/215281717-Jenkins-fails-to-start-with-JNA-error)

要更改 Jenkins 使用的临时目录，您需要：

*   根据您的操作系统附加`-Djava.io.tmpdir=$JENKINS_HOME/tmp`到`JENKINS_JAVA_OPTIONS`变量`/etc/sysconfig/jenkins`或文件中`/etc/default/jenkins`
*   `/var/lib/jenkins/tmp`使用运行 Jenkins 进程的 Unix 用户创建

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-16T21:02:02.820

在从属设备上，您可以将其添加到 Jenkins -Djava.io.tmpdir=/var/tmp/ 中的 slaves 高级参数中

# javascript - 使用 javascript 或 jQuery 在 IE 中跳过下载对话框

> ID：15675787
> 
> 赞同：0
> 
> 时间：2013-03-28T06:44:09.743
> 
> 标签：javascript, jquery, download

我需要点击一个按钮打开一个文档。

为此，我使用 window.open() 方法。当文档类型为 JPEG、DOC、TIFF 等时，所有这些都可以正常工作。

当文档类型为 MSG 文件（Outlook 邮件）或任何无法在 IE 中打开的文档时，浏览器会要求下载带有打开、保存、取消选项的文件。

我需要跳过此对话框并直接开始下载并在其本机应用程序中打开文档（当用户单击下载框中的打开按钮时会发生这种情况，因此我需要通过 javascript 或 jQuery 来完成）。

我尝试使用 IFrame 及其 Source 属性，这也给出了相同的结果。

有什么建议么..？

# html - 有趣的字符出现在引号的位置

> ID：15675788
> 
> 赞同：0
> 
> 时间：2013-03-28T06:44:09.913
> 
> 标签：html, mysql, encoding, double-quotes

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:06:29.043

调用这个：

```
header("Content-Type: text/html; charset=UTF-8"); 
```

还必须删除您现在拥有的所有当前被误导的黑客（ `htmlspecialchars()`、`htmlentities`，`addslashes`尤其是）。`accept-charset="ISO-8859-1"`

推荐阅读，以便您了解为什么上述内容适用于您的情况：

*   [每个程序员绝对，肯定需要了解编码和字符集以使用文本](http://kunststube.net/encoding/)
*   [在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)

在理解了这一点之后，您应该会在数英里之外看到 UTF-8 被误解为 Windows-1252 和 Windows-1252 被误解为 UTF-8 的迹象。

要查看标头调用是否正常工作：

*   [如何在 Chrome 中查看 HTTP 标头？](http://www.quora.com/Google-Chrome/How-can-you-see-HTTP-headers-in-Chrome)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:56:31.507

在这里我找到了有助于解决问题的[utf8 教程。](http://www.w3schools.com/tags/att_form_accept_charset.asp)

示例如下

```
<form action="demo_form.asp" accept-charset="ISO-8859-1"> 
```

# android - Getting error: fragment already added?

> ID：15675790
> 
> 赞同：1
> 
> 时间：2013-03-28T06:44:13.387
> 
> 标签：android, eclipse, fragment

Why is this returning the "fragment already added" error and crashing the app?

```
android.support.v4.app.FragmentManager fm = getSupportFragmentManager();

    android.support.v4.app.FragmentTransaction ft = fm.beginTransaction();

    ft.setCustomAnimations(R.anim.slide_in_left, R.anim.slide_out_right);
    ft.replace(R.id.fragment_container, tempmainfrag);
    ft.commit();
    for(int i = 0; i < fm.getBackStackEntryCount(); i++)
    {
        fm.popBackStack();
    } 
```

I'm guessing it is because of the for loop as it works without it, but I am needing to clear the back stack, how can I properly do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:35:33.690

我在使用 mapfragments 时遇到了同样的错误，这就是最终为我解决的问题：

```
@Override
public void onDestroyView() {
    super.onDestroyView();

    SupportMapFragment f = (SupportMapFragment) getFragmentManager().findFragmentById(R.id.current_fragment);
    if (f != null)
        getFragmentManager().beginTransaction().remove(f).commit();
} 
```

希望能帮助到你。

# c# - 从使用 C# 动态创建的文本框中检索值

> ID：15675803
> 
> 赞同：3
> 
> 时间：2013-03-28T06:45:17.593
> 
> 标签：c#, javascript, asp.net, c#-4.0, textbox

我`textbox`在流中编码时动态创建了一些，我为每个提供了唯一的 id，并且我使用 C# 将一些值硬编码到所有文本框。

现在单击按钮时，我试图从我使用以下代码的文本框中检索值，但它抛出异常为`OBJECT REFERENCE NOT SET TO INSTANCE OF AN OBJECT`.

请看下面的代码，我已经尝试了这两种方法，但仍然没有得到。
请帮帮我。
谢谢

```
protected void btnPltGrap_onclick(object sender, EventArgs e)
{
    //spny is my stack panel and txtX0 is my of the text box id
    //Below is the 1st Try        
     TextBox tb = new TextBox(); 
     tb= (TextBox)Master.FindControl("spnY").FindControl("txtX0");
     string strx = tb.Text;
      //Below is the 2nd Try 
     string strx = (spnY.FindControl("txtX0") as TextBox).Text;
 } 
```

谢谢

```
Am trying to use view state as per you told that i shlould recreate the controls ones again but am getting exception as Invalid Arguments. please go have a look.

protected void btnSet_onClick(object sender, EventArgs e)
 {
    Table tblMainY = new Table();
    TableRow tblRow = new TableRow();
    tblMainY.Controls.Add(tblRow);
    TableCell tblCel = new TableCell();
    TextBox txtdyn = new TextBox();
    txtdyn.Text = "1";
    txtdyn.ID = "txtY01"; 
    txtdyn.Width = 50;
    tblCel.Controls.Add(txtdyn);
    tblRow.Controls.Add(tblCel);    
    splY.Controls.Add(tblMainY);
    ViewState["temptbl"] = tblMainY
}
protected void btnPltGrap_onclick(object sender, EventArgs e)
{
    splY.Controls.Add(ViewState["Temptbl"]);
}
Please help me out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:52:03.847

我过去也遇到过同样的问题。

我所做的是给动态添加的控件一个 ID，并确保它在回发时也保留该 ID。

一旦回发控件具有与以前相同的 ID，Microsoft 就会变魔术并使用回发前值重新填充控件。

读出此代码一次

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
            this.NumberOfControls = 0; //very first time when page is loaded, value will be 0
        else
            this.createControls(); //if it is postback it will recreate the controls according to number of control has been created
    }

    //this is the base of this, it will hold the number of controls has been created, called properties
    protected int NumberOfControls 
    {
        get { return (int)ViewState["NumControls"]; }
        set { ViewState["NumControls"] = value; }
    }

    //it will create the controls 
    protected void createControls()
    {
        int count = this.NumberOfControls;
        for (int i = 0; i < count; i++) //loop for the total number of control.
        {
            TextBox tx = new TextBox(); //creating new control
            tx.ID = "ControlID_" + i.ToString(); //in your solution you are giving static id, don't do that, assign id number dynamically, it will help you further, if you want to manipulate the controls for some other use
            //Add the Controls to the container of your choice
            form1.Controls.Add(tx);
        }
    }

    //add new control
    protected void addSomeControl()
    {
        TextBox tx = new TextBox();
        tx.ID = "ControlID_" + NumberOfControls.ToString();
        form1.Controls.Add(tx);
        this.NumberOfControls++; //increment the number of control
    }

    protected void AddBtn_Click(object sender, EventArgs e)
    {
        addSomeControl(); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:50:15.203

您必须重新创建控件`init`才能获得它的价值。
这是一些链接
[从asp.net中动态创建的文本框中获取文本](https://stackoverflow.com/questions/11992311/get-text-from-dynamically-created-textbox-in-asp-net)

## 编辑 1

```
TextBox tb=(TextBox)ViewState["Temptbl"];
splY.Controls.Add(tb); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:05:20.483

下面链接中的一些示例代码作为我的博客

它解释了如何使用`panel`control 动态地放置和获取带有值和验证的文本框。

让我们去这个网址。你可以得到好的解决方案

[使用验证获取并创建动态文本框和下拉列表](http://dotnet--solutions.blogspot.in/2012/12/create-dynamic-textbox-and-dropdownlist.html)

用于获取文本框值的简单行

```
TextBox objTextBox = (TextBox)PlaceHolder.FindControl("CorrecttextBoxName");
string value=objTextBox .Text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T08:00:58.177

**Default.aspx** 在 aspx 文件中取占位符标记

<asp:PlaceHolder ID="PlaceHolder1" runat="server">

**Default.aspx.cs** // 添加/创建动态文本框

```
 TextBox txt = new TextBox();
            txt.ID = "New_txt";
            txt.TextMode = TextBoxMode.MultiLine;
            txt.Text = dt.Rows[0]["message"].ToString();
            txt.Width = 802;
            txt.Height = 450;
            txt.ReadOnly = true;
            PlaceHolder1.Controls.Add(txt); 
```

**从文本框中检索值**

字符串str = txt.Text；

# c# - Response.End() 和 CompleteRequest()

> ID：15675806
> 
> 赞同：18
> 
> 时间：2013-03-28T06:45:40.073
> 
> 标签：c#, request, response

和 各自的优点和缺点是`Response.End()`什么`CompleteRequest()`？我应该和不应该在哪里使用它们？我看了这个[问题](https://stackoverflow.com/questions/1087777/is-response-end-considered-harmful)，但没有得到正确的答案。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-28T07:24:10.153

`HttpResponse.End`将输出缓冲区刷新到客户端并终止当前的请求处理线程（这很糟糕），而`HttpApplication.CompleteRequest`告诉 ASP.NET 立即跳过 ASP.NET 管道中的所有未来阶段并直接跳转到 EndRequest 步骤（这也会引发`HttpApplication.EndRequest`事件）。然后请求线程继续进行正常的生命周期结束清理。

所以，`Response.End`它就像一个弹射座椅：它很快就结束了事情，但意味着你失去了控制并且可能不必要地苛刻。就像`CompleteRequest`在最近的机场紧急降落一样。

# java - Java 输出分数作为十进制程序

> ID：15675809
> 
> 赞同：0
> 
> 时间：2013-03-28T06:45:51.480
> 
> 标签：java, decimal

我应该创建一个程序，该程序从用户那里获取分子和分母值，然后输出该分数的十进制值。但是，当我输入值时，我的输出是 0.000000。这是我的代码：

```
import java.util.Scanner;
import java.util.Random;
public class fraction
{
   public static void main ( String [] args )
    {
       int num;
       int den;
       double result;

       num = getNum();
       den = getDen();
       result = getResult(num, den);

    printResult(num, den, result);

    }

    public static int getNum()
     {
    Scanner input = new Scanner (System.in);

    int num;

    System.out.print("Please enter the numerator: ");
    num = input.nextInt();

    return num;

     }

    public static int getDen()
        {
       Scanner input = new Scanner (System.in);

       int den;

       System.out.print("Please enter the denominator: ");
       den = input.nextInt();

       return den;

        }

public static double getResult(int num, int den)
{
    double result;
    result = num / den;
    return result;
}

public static void printResult(int num, int den, double result)
{
System.out.printf("The fraction %d / %d in decimal form is %f\n", num, den, result);
}} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T06:49:57.587

那是因为当你使用s`1 / 2`时等于 0，而不是 0.5 。`int`尝试将 int 转换为`double`s with`(double) num / den`或 with `1.0 * num / den`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:49:03.210

这应该做 -

```
result = (double) num / den; 
```

否则， int / int 的结果将是 int 没有小数部分。

# c# - 谷歌服务帐户可以用于特定用户文档检索吗？

> ID：15675811
> 
> 赞同：0
> 
> 时间：2013-03-28T06:46:29.717
> 
> 标签：c#, google-drive-api, google-api-dotnet-client

**要求：**

我想以编程方式访问特定用户的 Google 驱动器文档（作为某人@gmail.com 是他的电子邮件 ID）。

**目前状况：**

我正在使用谷歌驱动 SDK 来实现这一点。Google 提供的[示例](https://developers.google.com/drive/quickstart-cs)启动了一个带有 URL 的浏览器进程，该 URL 要求我使用该用户帐户登录，然后提供授权代码以实际执行我的任务。

**问题：**

我想自动化整个过程。我不希望在此过程中进行任何手动交互。

**调查结果：** 在寻找解决方案时，我[使用常规 Google 帐户作为应用程序拥有的帐户](https://developers.google.com/drive/service-accounts#use_regular_google_accounts_as_application-owned_accounts)，这看起来对我的解决方案很友好。

**问题：**

1.  请建议我一种可以自动进行 Google 身份验证的方法。
2.  有没有像谷歌企业解决方案这样的管理员帐户可以查看该组织中的任何帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:55:48.907

您可以执行 Google Apps 域范围的授权，以允许 Google Apps 域管理员代表域中的一个用户访问数据。这仅适用于 Google Apps 域，不适用于 gmail.com 帐户（没有域管理员角色）。[您可以在https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)上了解有关此功能的更多信息

# c# - 为什么 Visual Studio 无法识别 RuntimeBinderException？

> ID：15675813
> 
> 赞同：1
> 
> 时间：2013-03-28T06:46:38.333
> 
> 标签：c#, exception-handling, compiler-errors

```
using System.Dynamic;

...

public partial class Form1 : Form
    {
        ...
        private void button1_Click(object sender, EventArgs e)
        {
            dynamic CBT = new CustomBindingTest();
            CBT.DynamicMethodExample();
        }
    }

    public class CustomBindingTest : DynamicObject
    {
        public override bool TryInvokeMember(InvokeMemberBinder binder, object[] args, out object result)
        {
            MessageBox.Show(binder.Name);
            try { return base.TryInvokeMember(binder, args, out result); }
            catch (RuntimeBinderException e) { result = null;  return false; }
        }
    } 
```

我收到以下错误：`The type or namespace name 'RuntimeBinderException' could not be found (are you missing a using directive or an assembly reference?)`

这是 VS Express (2012) 的限制，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:55:08.797

确保包含以下命名空间和程序集引用：

命名空间：Microsoft.CSharp.RuntimeBinder

“使用 Microsoft.CSharp.RuntimeBinder”语句应该可以解决这个问题。

程序集：Microsoft.CSharp（在 Microsoft.CSharp.dll 中）

1.  右键单击项目中的 References 文件夹。
2.  选择添加参考。
3.  选择 .NET 选项卡（如果不是 .NET Framework 程序集，则选择“浏览”按钮）。
4.  双击错误消息中包含命名空间的程序集。
5.  按确定按钮。

# java - @Value 占位符无法解析某些 spring bean 中的值

> ID：15675816
> 
> 赞同：0
> 
> 时间：2013-03-28T06:46:58.757
> 
> 标签：java, web-services, spring, dependency-injection, spring-annotations

我有一种情况，我试图弄清楚为什么会这样。场景是我有一个 A 类，它实现了 Web 服务公开的操作。对于操作的每个请求，都会创建一个新的 A 实例。整个事情是由 Spring 在内部管理的，我不确定 Web 服务实例化的 A 类到底是如何的。

现在我有一个类变量，我想在运行时通过

@Value("${someValue}") 字符串 someVariable

someValue 被定义为系统属性。但是创建的每个 bean 都将 someVariable 设置为 NULL。

我在同一个包中用@Configuration 注释的另一个类中尝试了同样的事情，它可以很好地解析变量。

所以，我想通过@Value注入的能力是否取决于创建bean的方式，如@Component、@Configuration-@Bean、XML定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:11:57.847

并不真地。实际上，您可以在组件扫描 bean 和 xml 定义 bean 中使用 @Value 注入值。但请注意这一点，这取决于您放入哪个 xml 文件`Placeholder`，它仅在每个容器中有效。比如你把它放在applicationContext中，那么在xxx-servlet.xml中创建的bean就不能用@Value注入值。

# image - 使用 OpenXML 在 PPTX 中插入图像不起作用

> ID：15675817
> 
> 赞同：1
> 
> 时间：2013-03-28T06:46:59.607
> 
> 标签：image, powerpoint, openxml

我正在尝试使用 OpenXML 生成包含图像的 PowerPoint 文件。不幸的是，它不起作用。图像未显示。我检查了使用 OpenXML 生产力工具生成的文件，并分别解压缩了文件内容。该文件本身包含 /ppt/media/image.png 中的图像，它应该显示在第二张幻灯片中。

这是我的代码：

```
private void InsertSlide(string chartString, int position, string title, string text = "")
{
    if (m_presentation == null || title == null || m_presentation.PresentationPart == null)
        return;

    var slide = new Slide(new CommonSlideData(new ShapeTree()));
    var nonVisualProperties =
       slide.CommonSlideData.ShapeTree.AppendChild(new NonVisualGroupShapeProperties());
       nonVisualProperties.NonVisualDrawingProperties = new NonVisualDrawingProperties { Id = 1, Name = "" };
       nonVisualProperties.NonVisualGroupShapeDrawingProperties = new NonVisualGroupShapeDrawingProperties();
       nonVisualProperties.ApplicationNonVisualDrawingProperties = new ApplicationNonVisualDrawingProperties();
       slide.CommonSlideData.ShapeTree.AppendChild(new GroupShapeProperties());

    var slidePart = m_presentation.PresentationPart.AddNewPart<SlidePart>();
    var imagePart = slidePart.AddImagePart(ImagePartType.Png, "irgendeinscheiss");   

    //var imageStream = new MemoryStream(Convert.FromBase64String(chartString));
    using (var imageStream = new FileStream(@"C:\Users\DA\Desktop\Charts\1_Chart2_01.png", FileMode.Open))
    {
         imageStream.Position = 0;
         imagePart.FeedData(imageStream);
    }

    slide.Save(slidePart);

    var slideIdList = m_presentation.PresentationPart.Presentation.SlideIdList;
    uint maxSlideId = 1;
    SlideId prevSlideId = null;
    foreach (SlideId slideId in slideIdList.ChildElements)
    {
        if (slideId.Id > maxSlideId)
            maxSlideId = slideId.Id;
        position--;

        if (position == 0)
            prevSlideId = slideId;
    }

    maxSlideId++;
    SlidePart lastSlidePart;

    if (prevSlideId != null)
          lastSlidePart = (SlidePart)m_presentation.PresentationPart.GetPartById(prevSlideId.RelationshipId);
    else
          lastSlidePart = (SlidePart)m_presentation.PresentationPart.GetPartById(((SlideId)(slideIdList.ChildElements[0])).RelationshipId);

    if (lastSlidePart.SlideLayoutPart != null)
         slidePart.AddPart(lastSlidePart.SlideLayoutPart);

    var newSlideId = slideIdList.InsertAfter(new SlideId(), prevSlideId);
    newSlideId.Id = maxSlideId;
    newSlideId.RelationshipId = m_presentation.PresentationPart.GetIdOfPart(slidePart);
    m_presentation.PresentationPart.Presentation.Save();
} 
```

我错过了什么吗？也许是关系？在查找了 232243 千个不同的示例之后，我仍然停留在这一点上。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T12:55:48.843

我认为您需要将图像添加到 slide.CommonSlideData

```
 public Slide InsertSlide(PresentationPart presentationPart, string layoutName) 
   { 
       UInt32 slideId = 256U; 

       // Get the Slide Id collection of the presentation document 
       var slideIdList = presentationPart.Presentation.SlideIdList; 

       if (slideIdList == null) 
       { 
           throw new NullReferenceException("The number of slide is empty, please select a ppt with a slide at least again"); 
       } 

       slideId += Convert.ToUInt32(slideIdList.Count()); 

       // Creates an Slide instance and adds its children. 
       Slide slide = new Slide(new CommonSlideData(new ShapeTree())); 

       SlidePart slidePart = presentationPart.AddNewPart<SlidePart>(); 
       slide.Save(slidePart); 

       // Get SlideMasterPart and SlideLayoutPart from the existing Presentation Part 
       SlideMasterPart slideMasterPart = presentationPart.SlideMasterParts.First(); 
       SlideLayoutPart slideLayoutPart = slideMasterPart.SlideLayoutParts.SingleOrDefault 
           (sl => sl.SlideLayout.CommonSlideData.Name.Value.Equals(layoutName, StringComparison.OrdinalIgnoreCase)); 
       if (slideLayoutPart == null) 
       { 
           throw new Exception("The slide layout " + layoutName + " is not found"); 
       } 

       slidePart.AddPart<SlideLayoutPart>(slideLayoutPart); 

       slidePart.Slide.CommonSlideData = (CommonSlideData)slideMasterPart.SlideLayoutParts.SingleOrDefault( 
           sl => sl.SlideLayout.CommonSlideData.Name.Value.Equals(layoutName)).SlideLayout.CommonSlideData.Clone(); 

       // Create SlideId instance and Set property 
       SlideId newSlideId = presentationPart.Presentation.SlideIdList.AppendChild<SlideId>(new SlideId()); 
       newSlideId.Id = slideId; 
       newSlideId.RelationshipId = presentationPart.GetIdOfPart(slidePart); 

       return GetSlideByRelationShipId(presentationPart, newSlideId.RelationshipId); 
   } 

   /// <summary> 
   /// Get Slide By RelationShip ID 
   /// </summary> 
   /// <param name="presentationPart">Presentation Part</param> 
   /// <param name="relationshipId">Relationship ID</param> 
   /// <returns>Slide Object</returns> 
   private static Slide GetSlideByRelationShipId(PresentationPart presentationPart, StringValue relationshipId) 
   { 
       // Get Slide object by Relationship ID 
       SlidePart slidePart = presentationPart.GetPartById(relationshipId) as SlidePart; 
       if (slidePart != null) 
       { 
           return slidePart.Slide; 
       } 
       else 
       { 
           return null; 
       } 
   } 

Public void InsertImageInLastSlide(Slide slide, string imagePath, string imageExt) 
 { 
     // Creates an Picture instance and adds its children. 
     P.Picture picture = new P.Picture(); 
     string embedId = string.Empty; 
     embedId = "rId" + (slide.Elements().Count() + 915).ToString(); 
     P.NonVisualPictureProperties nonVisualPictureProperties = new P.NonVisualPictureProperties( 
         new P.NonVisualDrawingProperties() { Id = (UInt32Value)4U, Name = "Picture 5" }, 
         new P.NonVisualPictureDrawingProperties(new A.PictureLocks() { NoChangeAspect = true }), 
         new ApplicationNonVisualDrawingProperties()); 

     P.BlipFill blipFill = new P.BlipFill(); 
     Blip blip = new Blip() { Embed = embedId }; 

     // Creates an BlipExtensionList instance and adds its children 
     BlipExtensionList blipExtensionList = new BlipExtensionList(); 
     BlipExtension blipExtension = new BlipExtension() { Uri = "{28A0092B-C50C-407E-A947-70E740481C1C}" }; 

     UseLocalDpi useLocalDpi = new UseLocalDpi() { Val = false }; 
     useLocalDpi.AddNamespaceDeclaration("a14", 
         "http://schemas.microsoft.com/office/drawing/2010/main"); 

     blipExtension.Append(useLocalDpi); 
     blipExtensionList.Append(blipExtension); 
     blip.Append(blipExtensionList); 

     Stretch stretch = new Stretch(); 
     FillRectangle fillRectangle = new FillRectangle(); 
     stretch.Append(fillRectangle); 

     blipFill.Append(blip); 
     blipFill.Append(stretch); 

     // Creates an ShapeProperties instance and adds its children. 
     P.ShapeProperties shapeProperties = new P.ShapeProperties(); 

     A.Transform2D transform2D = new A.Transform2D(); 
     A.Offset offset = new A.Offset() { X = 457200L, Y = 1524000L }; 
     A.Extents extents = new A.Extents() { Cx = 8229600L, Cy = 5029200L }; 

     transform2D.Append(offset); 
     transform2D.Append(extents); 

     A.PresetGeometry presetGeometry = new A.PresetGeometry() { Preset = A.ShapeTypeValues.Rectangle }; 
     A.AdjustValueList adjustValueList = new A.AdjustValueList(); 

     presetGeometry.Append(adjustValueList); 

     shapeProperties.Append(transform2D); 
     shapeProperties.Append(presetGeometry); 

     picture.Append(nonVisualPictureProperties); 
     picture.Append(blipFill); 
     picture.Append(shapeProperties); 

     slide.CommonSlideData.ShapeTree.AppendChild(picture); 

     // Generates content of imagePart. 
     ImagePart imagePart = slide.SlidePart.AddNewPart<ImagePart>(imageExt, embedId); 
     FileStream fileStream = new FileStream(imagePath, FileMode.Open); 
     imagePart.FeedData(fileStream); 
     fileStream.Close(); 
 } 
```

[源代码](http://code.msdn.microsoft.com/office/how-to-add-to-powerpoint-786464c3)

# php - 无法将经纬度/经度从 Simplexml 发送到 mysql 数据库

> ID：15675820
> 
> 赞同：1
> 
> 时间：2013-03-28T06:47:05.217
> 
> 标签：php, mysql, simplexml

值 startlat,startlon,endlat,endlon 在我的查询字符串中显示为来自 simplexml 对象的字段名称。

我打印出查询字符串，查看第 3、4、5 和 6 个值

```
insert into *database.table* (mwayname, sectionname, startlat, startlon,   endlat,endlon,avgspd,avgocc,totvol,seclength,sectime)VALUES ('AKL-SH1-NB-RNM' , '1-NB  PAPAKURA OFF to PAPAKURA ON' , '->latitude', '->longitude' , '->latitude' , '->longitude' ,'98.7012505914656' , '3.0' , '12.0' , '0.309545' , '0.18817086803564703') 
```

它将 simplexml-> 作为文本发送到查询中，但其他值（包括数字）不受影响？当然不是因为查询构造函数在循环中吗？

```
$xml = new SimpleXMLElement($response);

foreach($xml->return as $return)
{ 
echo '**********************',$return->name.'*****<br>';
echo '**********************',$return->reference.'*****<br>';

foreach($return->segments as $segments)
{
echo $return->name.'<br>';
echo $return->reference.'<br>';

echo $segments->carriagewaySegmentId.' ID <br>';
echo 'section name ',$segments->sectionName.'<br>';

echo 'start lat ',$segments->startLocation->latitude.'<br>';
echo 'start lng ',$segments->startLocation->longitude.' <br>';

echo 'end lat ',$segments->endLocation->latitude.'<br>';
echo 'end long ',$segments->endLocation->longitude.'<br>';

echo 'avg speed = ',$segments->averageSpeed. ' kmh avg<br>';
echo $segments->averageOccupancy. ' % of rd occupied<br>';
echo $segments->totalVolume. ' traffic volume<br>';
echo $segments->sectionLength. ' km<br>';
echo $segments->sectionTime. ' minutes<br>';
echo'<br>';
//send to mysql
$query = "insert into trafficstats.master (mwayname, sectionname, startlat, startlon,     endlat,endlon,avgspd,avgocc,totvol,seclength,sectime)VALUES ('$return->reference' ,   '$segments->sectionName' , '$segments->startLocation->latitude', '$segments->startLocation->longitude' ,  '$segments->endLocation->latitude' , '$segments->endLocation->longitude' ,'$segments- >averageSpeed' , '$segments-

>averageOccupancy' , '$segments->totalVolume' , '$segments->sectionLength' ,  '$segments->sectionTime')";
echo $query;
mysql_query($query);
}
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:54:22.900

试试这个查询

```
$query = "insert into trafficstats.master (mwayname, sectionname, startlat, startlon,     endlat,endlon,avgspd,avgocc,totvol,seclength,sectime)
VALUES ('".$return->reference."' ,   '".$segments->sectionName."' , 
'".$segments->startLocation->latitude."', '".$segments->startLocation->longitude."' ,  
'".$segments->endLocation->latitude."' , '".$segments->endLocation->longitude."' ,
'".$segments- >averageSpeed."' , '".$segments->averageOccupancy."' , 
'".$segments->totalVolume."' , '".$segments->sectionLength."' ,  
'".$segments->sectionTime."')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:13:45.900

为了解释这里的问题，当 PHP 遇到双引号字符串时`"something $foo->bar->baz something"`，它假设您只想替换`$foo->bar`，而不是整个`$foo->bar->baz`.

解决方案是（正如其他人指出的那样）将多个部分的字符串连接在一起（`'something ' . $foo->bar->baz . ' something'`）或将要替换的变量括在大括号中，以便 PHP 知道它都是一个变量（`"something {$foo->bar->baz} something"`）。

有关此语法的更多信息，请参阅[PHP 手册的相关部分。](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)

# jquery - 如何清除gmaps中的信息窗口

> ID：15675822
> 
> 赞同：0
> 
> 时间：2013-03-28T06:47:12.853
> 
> 标签：jquery, google-maps, jquery-mobile, google-maps-api-3

我的项目是单个 JQM，因为信息窗口在项目中只出现一次。当我移动到另一个页面并返回到地图页面时，信息窗口处于死状态。如何恢复它。

```
 firstmap = new google.maps.Map(document.getElementById("map"), myOptions);

            var latlng = new google.maps.LatLng(Lat, Long);
            geocoder.geocode({'latLng': latlng}, function(results, status) {
              if (status == google.maps.GeocoderStatus.OK) {
                if (results[1]) {

                    firstmap.setZoom(10);
                  marker = new google.maps.Marker({
                      icon:image,
                      position: latlng,
                      map: firstmap
                  });

                  infowindow.setContent(results[1].formatted_address);
                  infowindow.open(map, marker);
                google.maps.event.addListener(marker, 'click', clearWindow);

                }
              } else {
                alert("Geocoding failed to this location " + status);
              }
            });
    }

function clearWindow() {

    if (infowindow) {
         google.maps.event.clearInstanceListeners(infowindow); 
         infowindow = null;
    }
    infowindow = new google.maps.InfoWindow();
    } 
```

我需要清除信息窗口内的数据。给我一些想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:52:34.707

然后只需用空白替换其中的内容：

```
infowindow.setContent(''); 
```

# c# - 在 C# 中修改现有的注册表项值

> ID：15675825
> 
> 赞同：3
> 
> 时间：2013-03-28T06:47:31.400
> 
> 标签：c#, windows-7, visual-studio-2012, registry

我想`SOFTWARE\Wow6432Node\Program\SubProgram`在 Windows 7 中使用 C# 代码修改注册表路径中的数据。我能够读取该值，但**无法写入 Registry**。这是代码：

```
RegistryKey SUBKEY;
RegistryKey TAWKAY = RegistryKey.OpenRemoteBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, "");
string subkey = "SOFTWARE\\Wow6432Node\\Program\\SubProgram ";
if (TAWKAY.OpenSubKey(subkey) != null)   // Get values from Registry
{

    TAWKAY = RegistryKey.OpenRemoteBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, "");
    SUBKEY = TAWKAY.OpenSubKey(subkey); // subkey opens
    SUBKEY = TAWKAY.OpenSubKey(subkey,true); // subkey not open shows error Requested registry access is not allowed 
    SUBKEY.SetValue("Some name", "1234567890");
    Console.WriteLine(SUBKEY.GetValue("Some name").ToString());
}
else
{
    Console.WriteLine("Cannot open registry");
}

Console.Read(); 
```

如果我设置`OpenSubKey(subkey, true)`，它会显示一条错误消息`Requested registry access is not allowed`

**写入注册表是否需要任何权限**？请帮我解决问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T10:21:15.323

Wow6432Node 不是注册表中的真实路径。它是 64 位操作系统中 32 位密钥的别名。

您必须使用 RegistryView.Registry32 来指定您想要使用 32 位。

```
RegistryKey reg32key = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry32);
RegistryKey reg_32bit_AppKey = reg32key.OpenSubKey(@"SOFTWARE\Program\SubProgram");
if (reg_32bit_AppKey != null)
{
    // Here you can work with "SOFTWARE\\Wow6432Node\\Program\\SubProgram "
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:56:06.600

在 HKLM 中修改/删除/添加密钥需要管理员权限。

在这种情况下，您想要这样做，您需要将您的应用程序清单`requestedExecutionLevel`值更改为`requireAdministrator`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T09:11:22.393

最好使用“Reg”命令对注册表进行任何操作。

即使您想访问远程机器的注册表，您也不需要该机器的凭据，拥有机器名称就足够了。

有关“REG”命令的更多信息，请参阅以下链接

[http://technet.microsoft.com/en-us/library/cc732643(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc732643(v=ws.10).aspx)

# android - Sql lite获取所有数据发送到android中的webservice JSON格式？

> ID：15675828
> 
> 赞同：0
> 
> 时间：2013-03-28T06:47:42.260
> 
> 标签：android

我正在创建本地数据库，我想将所有数据发送到 Web 服务。

例如产品名称一栏。有很多产品名称。我想发送它。

&**产品名称 = briyani,egg,rice**

我从下面的数据库中获得了所有详细信息，我提到了代码：

```
public String fetchMyRowid(String column_name)
{
    String query = "select  "+column_name+" From " + TABLErestaurant;

    mCursor =db.rawQuery(query, null);
    StringBuffer buf = new StringBuffer();
    if (mCursor.moveToNext()) {

        buf.append(mCursor.getString(0));
        String str = buf.toString();
        System.out.println("**************"+str);

    }

   return buf.toString();
 }
    }

   return buf.toString();
 } 
```

在班上 ：

```
HashMap<String, String> paramsvalue = new HashMap<String, String>(); paramsvalue.put("product_name", dataBase.fetchMyRowid(DatabaseHelper.columnproductname)); 
```

但我有一些问题。我只有一个产品名称。我需要所有产品名称。任何人都可以为此提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:01:02.227

欢迎来到stackoverflow，

请检查下面的链接，我首先选择了所有表的重新编码，然后我创建了另一种方法来逐行获取所有列的值。之后，我将所有数据标记为`JSON`. 这是你必须以类似方式做的想法......

[https://stackoverflow.com/a/10600440/1168654](https://stackoverflow.com/a/10600440/1168654)

# ios - UITextView 文本大小在使用 NSAttributedString 时自动调整大小

> ID：15675829
> 
> 赞同：0
> 
> 时间：2013-03-28T06:47:49.143
> 
> 标签：ios, objective-c, uitextview, nsattributedstring

在`UITextView`文中，

在突出显示文本之前，它显示的文本大小为 16。（在第一张图片中）

在使用`NSAttributedString`突出显示之后。突出显示的文本仅显示相同大小（16）的剩余字符串显示小于原始大小（第二个 .

这个问题只能在`iPod`和`iPhone`欺骗。`iPad`显示正确的格式。

![在此处输入图像描述](../Images/665eb4ff466a3cedc0d34cd68909a218.png)

代码突出显示`UITextView`文本

```
 NSDictionary *attrsDictionary = [NSDictionary dictionaryWithObject:[UIFont fontWithName:@"Arial" size:currentTextSize] forKey:NSFontAttributeName];

    NSMutableAttributedString *attrString = [[NSMutableAttributedString alloc] initWithString:txtview4disp.text];

 int startind=[[dict objectForKey:@"BeginIndexPos"]integerValue];
        int endind=[[dict objectForKey:@"EndIndexPos"]integerValue];
        NSRange rang;
        if (startind>=STARTINDEX&&startind<=ENDINDEX) {
            if (endind>ENDINDEX) {
                int endind2=endind-ENDINDEX;
                rang=NSMakeRange(startind-STARTINDEX, (endind-startind)-endind2);   
            }
            else
                rang=NSMakeRange(startind-STARTINDEX, endind-startind);

        [attrString addAttributes:attrsDictionary range:rang];

        [attrString addAttribute:NSBackgroundColorAttributeName value:[UIColor yellowColor] range:rang];

   txtview4disp.attributedText=attrString; 
```

![在此处输入图像描述](../Images/7cc82d4499a2234426c0406c73a18fe6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:01:26.063

看起来您跳过了`UITextView`. 尝试替换此行：

```
NSMutableAttributedString *attrString =
[[NSMutableAttributedString alloc] initWithString:txtview4disp.text]; 
```

有以下内容：

```
NSMutableAttributedString *attrString =
[[NSMutableAttributedString alloc] initWithAttributedString:txtview4disp.attributedText]; 
```

# .net - 为什么由 blittable 类型参数化的泛型结构不是非托管类型？

> ID：15675833
> 
> 赞同：4
> 
> 时间：2013-03-28T06:47:56.667
> 
> 标签：.net, f#, pinvoke, unmanaged

我有一个函数 foo，它采用非托管类型，然后创建一个泛型结构，它要求类型参数是非托管的：

```
[<Struct>]
type Vector4<'T when 'T:unmanaged> =
    val x : 'T
    val y : 'T
    val z : 'T
    val w : 'T
    new (x, y, z, w) = { x = x; y = y; z = z; w = w }

let foo<'T when 'T:unmanaged> (o:'T) =
    printfn "%A" o
    printfn "%d" sizeof<'T>

let bar() =
    let o = Vector4<float32>(1.0f, 2.0f, 3.0f, 4.0f)
    foo o  // here has error 
```

但我得到了编译错误：

```
Error 4 A generic construct requires that the type 'Vector4<float32>' is an unmanaged type 
```

我检查了 MSDN，它是：

> 提供的类型必须是非托管类型。非托管类型是某些原始类型（sbyte、byte、char、nativeint、unativeint、float32、float、int16、uint16、int32、uint32、int64、uint64 或 decimal）、枚举类型、nativeptr<_> 或非其字段都是非托管类型的泛型结构。

为什么需要 blittable 类型参数的泛型结构不是非托管类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:33:17.773

Interop 不支持泛型类型：[[1]](http://msdn.microsoft.com/en-us/library/ms229590.aspx)、[[2]](https://stackoverflow.com/q/1579559/55209)

> COM 模型不支持泛型类型的概念。因此，泛型类型不能直接用于 COM 互操作。

不幸的是，在这种情况下，类型别名没有帮助：

```
[<Struct>]
[<StructLayout(LayoutKind.Sequential)>]
type Vector4<'T when 'T:unmanaged> =
    val x : 'T
    val y : 'T
    val z : 'T
    val w : 'T
    new (x, y, z, w) = { x = x; y = y; z = z; w = w }

type Vector4float = Vector4<float32>

let inline foo<'T when 'T:unmanaged> (o:'T) =
    printfn "%A" o
    printfn "%d" sizeof<'T>

let bar() =
    let o = new Vector4float(1.0f, 2.0f, 3.0f, 4.0f)
    foo o //  A generic construct requires that the type 'Vector4float' is an unmanaged type 
```

# ios - 如何在启用旋转和缩放的情况下适应 iOS webview 屏幕

> ID：15675835
> 
> 赞同：2
> 
> 时间：2013-03-28T06:48:01.063
> 
> 标签：ios, webview, screen-orientation

我的应用只是在第 4 代 iPad 上加载 webview。

它具有 768 x 1024 纵向和 1024 x 768 横向视图尺寸。

但是我正在加载的内容是 760 x 1014。

该应用程序支持旋转和缩放。

如果视图已加载，我希望它适合全屏纵向以及带有滚动条的横向。

所以我像这样在标题上添加了一个元标记

```
<meta name="viewport" id="view" content="width=760, user-scalable=yes"> 
```

也在我的sdk上

```
- (void)viewDidLoad{
mainWebView = [[UIWebView alloc] initWithFrame:self.view.bounds];
mainWebView.delegate = self;

[mainWebView setAutoresizingMask:(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth)];
mainWebView.scalesPageToFit = YES;
mainWebView.contentMode = UIViewContentModeScaleAspectFit;

for(id subview in mainWebView.subviews) {
    if([[subview class] isSubclassOfClass:[UIScrollView class]]) {
        ((UIScrollView *)subview).bounces = NO;
        ((UIScrollView *)subview).alwaysBounceVertical = NO;
        ((UIScrollView *)subview).alwaysBounceHorizontal = NO;
        ((UIScrollView *)subview).bouncesZoom = NO;
        ((UIScrollView *)subview).maximumZoomScale = 2.0;
        ((UIScrollView *)subview).minimumZoomScale = 1.0;
    }
}
[self.view addSubview:self.mainWebView];
NSURL *url = [NSURL URLWithString:@"http://my app"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[mainWebView loadRequest:request];
} 
```

连同这些

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
if (interfaceOrientation == UIDeviceOrientationLandscapeLeft || interfaceOrientation == UIDeviceOrientationLandscapeRight) {
    NSLog(@"Rotated Landscape");
    [mainWebView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.getElementById(\"view\").setAttribute('content', 'width=1014');"]];
}
return YES;}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
NSLog(@"didRotateFromInterfaceOrientation");
if(fromInterfaceOrientation == UIDeviceOrientationLandscapeLeft || fromInterfaceOrientation == UIDeviceOrientationLandscapeRight) {
    [mainWebView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.getElementById(\"view\").setAttribute('content', 'width=1014');"]];
    [mainWebView setAutoresizingMask:(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth)];
    mainWebView.scalesPageToFit = YES;
} else if (fromInterfaceOrientation == UIDeviceOrientationPortrait || fromInterfaceOrientation == UIDeviceOrientationPortraitUpsideDown) {
    [mainWebView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.getElementById(\"view\").setAttribute('content', 'width=760');"]];
    [mainWebView setAutoresizingMask:(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth)];
    mainWebView.scalesPageToFit = YES;
}} 
```

PS shouldAutorotateToInterfaceOrientation 甚至没有被调用。

请告诉我我的代码有什么问题。任何建议都会有所帮助

# javascript - Mouseenter 和 MouseLeave 同时触发

> ID：15675837
> 
> 赞同：1
> 
> 时间：2013-03-28T06:48:06.240
> 
> 标签：javascript, jquery

我知道`mouseenter`and的用法`mouseleave`。以下是我的代码示例：

```
$('div').mouseenter(function(e){
   ...
}).mouseleave( function(e){
   ...
   //let say it will take 5 second. 
}); 
```

但我的问题是，如果我快速移动鼠标，是否有可能同时触发两个处理程序？我的意思`mouseleave`是没有完成，同时`mouseenter`被触发是因为鼠标刚刚移入。

**更新**

在我的示例中，我的意思是如果鼠标在`mouseleave`触发后 3 秒内移动，它也会触发`mouseenter`吗？如果是，是否意味着同一个 DOM 元素同时触发`mouseenter`和离开？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:49:38.383

不可能同时触发两个事件。由于 javasript 不是多线程的。如果你想在执行之间有一些延迟，你可以使用[setTimeout](http://www.w3schools.com/jsref/met_win_settimeout.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:50:36.307

不......不可能同时调用这两个函数......而且你不能足够快

# sharepoint-2013 - 在 Sharepoint 2013 中将文档从“我的”站点移动到公共图书馆

> ID：15675841
> 
> 赞同：1
> 
> 时间：2013-03-28T06:48:22.157
> 
> 标签：sharepoint-2013

我实际上正在测试 Sharepoint 2013，主要用于文档管理和与同事共享。在处理文件（例如单词）时，我希望将其保密，直到它准备好供公众使用。因此，我会开始在我的私人网站（又名 /my）中工作，并在它准备好后立即将其移至公共文档库。我怎样才能做到这一点？我在库中找不到任何“移动”命令。（通过资源管理器移动它在不同站点之间不起作用）。

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T16:18:41.017

您应该能够拖放 Windows Explorer（不是 Internet Explorer），否则您可能需要将域移动到 IE 受信任区域或 Intranet 安全区域。

您不能直接在 Internet Explorer 中执行此操作，因为这些库位于 Microsoft 保持非常独立的不同站点中。

做你想做的事可能会更好地通过使用签出/签入来完成。在目标库中创建文档，但在您准备好供其他人查看之前不要将其签入。如果您在库中设置“需要签出”，这会自动发生。然后，即使您通过 Windows 资源管理器上传文档，在您（或通过替代的管理员）第一次签入之前，没有人能够看到它。

这还有一个好处是您可以通过查看文档来进行进一步的修改。在重新签入之前，没有人可以看到您的修改。

这还具有保留完整版本历史记录的优点，否则您会通过在站点之间移动文档而丢失这些历史记录。

# networking - 如果 iptables 中的 DROP 没有向主机返回错误，为什么 ping 会收到错误消息“sendmsg: Operation not allowed”？

> ID：15675845
> 
> 赞同：4
> 
> 时间：2013-03-28T06:48:34.643
> 
> 标签：networking, tcp, iptables

我希望我的操作系统默默地丢弃网络包，而不需要知道应用程序。我制定了以下规则：

```
# iptables -N NEW_CHAIN 
# iptables -A OUTPUT -d 10.211.55.6 -j NEW_CHAIN
# iptables -A NEW_CHAIN -j DROP 
```

然后我发出 ping 并得到以下错误：

```
# ping 10.211.55.6
PING 10.211.55.6 (10.211.55.6) 56(84) bytes of data.
ping: sendmsg: Operation not permitted 
```

如果我删除 iptables 规则，ping 工作正常。

我的问题是：既然 iptables 的手册页说 DROP 不会向主机返回任何错误，为什么那里会出现“不允许操作”错误？

# ios - 如何从自定义类中检索 NSArray

> ID：15675847
> 
> 赞同：-3
> 
> 时间：2013-03-28T06:48:41.280
> 
> 标签：ios, objective-c, nsarray

我有一个自定义类，它有一个整数作为变量。

```
// addons.h

-(NSMutableArray *) goodDirections:(int)iNumber;

// addons.m

-(NSMutableArray *) goodDirections:(int)iNumber;
{
    NSString *gOne = @"one"+iNumber;
    NSString *gTwo = @"two"+iNumber;
    NSString *gThree = @"three"+iNumber;
    NSString *gFour = @"four"+iNumber;
    NSMutableArray *goodValues = [NSMutableArray arrayWithObjects:gOne,gTwo,gThree,gFour,nil];
    return goodValues;
}

// ViewController.m

addons *directions =[[addons alloc]init];
NSMutableArray *helloTest = [[NSMutableArray alloc]init];
helloTest = [directions goodDirections:3];
NSString *obj1 = [helloTest objectAtIndex:1];
NSLog(@"%@",obj1); 
```

并且自定义类有一个变量号，当输入时返回一个包含 4 个字符串值的数组，如何从我的实现文件 viewController.m 中的数组中检索值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:51:50.767

请！试试下面的代码片段

```
NSMutableArray *arr = [theObject simpleMethod:4];
obj = [arr objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:01:33.723

确保在所需文件中导入自定义类。然后

```
NSMutableArray *arr = [theObject simpleMethod:4]; 
```

要检索 arr 中的任何对象，您可以使用 objectAtIndex 函数（例如）：

```
NSString *item = [arr objectAtIndex:1]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T06:55:11.780

您可以在索引处使用数组对象。

```
 NSMutableArray *arrayTemp = [self simpleMthod:2];
   objTemp = [arrayTemp objectAtIndex:0]; 
```

或者您可以使用

```
 for (int i=0; i<[arrayTemp count]; i++)
    {
       objTemp = [arrayTemp objectAtIndex:i];
    } 
```

# jquery - Fabric.js - 更改导入 svg 的颜色/填充/描边

> ID：15675856
> 
> 赞同：8
> 
> 时间：2013-03-28T06:49:37.510
> 
> 标签：jquery, fabricjs

有没有办法使用 loadSVGFromURL 更改放置在画布上的织物中 svg 的颜色？svg 只是一个箭头，如果我不能设置填充或描边，我可以用过滤器来做到这一点吗？

```
$("input:radio[id='arrow']").click(function() {
fabric.loadSVGFromURL('../scripts/svg/arrow.svg', function(objects) {
          var group = new fabric.PathGroup(objects, {
          left: 165,
          top: 100,
          width: 295,
          height: 40,
          fill: colourSet
        });
        canvas.add(group);
        canvas.renderAll();
          }); 
           }); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-29T10:06:33.703

```
var colorSet = '#00FFFF';

$("input:radio[id='arrow']").click(function() {
  fabric.loadSVGFromURL('../scripts/svg/arrow.svg', function(objects, options) {
    var shape = fabric.util.groupSVGElements(objects, options);
    shape.set({
      left: 165,
      top: 100,
      width: 295,
      height: 40
    });
    if (shape.isSameColor && shape.isSameColor() || !shape.paths) {
      shape.setFill(colorSet);
    }
    else if (shape.paths) {
      for (var i = 0; i < shape.paths.length; i++) {
        shape.paths[i].setFill(colorSet);
      }
    }
    canvas.add(shape);
    canvas.renderAll();
  }); 
}); 
```

fabric.PathGroup 对象上的函数 setFill 仅在所有路径具有相同颜色时才有效： [https ://github.com/kangax/fabric.js/blob/master/src/path_group.class.js#L99](https://github.com/kangax/fabric.js/blob/master/src/path_group.class.js#L99)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:33:07.860

你可以使用 OBJECT.setFill('FILL_COLOR'); 例如

```
rect.setFill('red'); 
```

# jquery - jquery 可以检查该类是否被应用？

> ID：15675858
> 
> 赞同：0
> 
> 时间：2013-03-28T06:49:43.793
> 
> 标签：jquery, class, validation

我下载了一个易于使用的 jquery.validation 插件，但我想知道是否可以通过检查类是否应用来自己添加脚本......

这个插件是如何工作的......

例如。如果我的 html 代码是...

```
<input type="text" name="email" id="email" class="required email" /> 
```

我只是把 class="required email" 和我链接的 jquery 验证将检查电子邮件是否有效，如果它无效，则在文本框的一侧显示一条错误消息，但如果我想添加让我们说改变 bg 颜色的文本框/发出警报。

这可能吗？

我不确定在页面运行时是否总是应用该类，因为我不想触摸我下载的插件......（这有点太复杂了，我不知道插件中发生了什么 -在脚本中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:23:06.977

**jquery 可以检查该类是否被应用？**

是的，您可以检查使用`hasClass()`方法。

例如。

```
if($('#mydiv').hasClass('foo'))
{
     alert('mydiv has foo clas');
}
else
{
     alert('no foo class found !!');
} 
```

有关更多详细信息，请通过[**此**](http://api.jquery.com/hasClass/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:02:26.987

您还可`CSS Class`以为错误输入添加自定义。

```
$(".selector").validate({
   errorClass: "invalid"
}) 
```

为您想要的任何样式定义您的 CSS 类。

```
input.invalid {
    background-color: red;
} 
```

# 更新：

上面的例子有效。它在这里[jsfiddle](http://jsfiddle.net/bittu4u4ever/d9uHs/1/)。你也可以只添加 CSS 作为

```
input.error {
    background-color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:54:22.280

尝试在您的验证中使用它-

```
$('#email.required.email') 
```

# c# - 使用 ZipStorer 手动创建 zip 问题

> ID：15675863
> 
> 赞同：0
> 
> 时间：2013-03-28T06:50:07.180
> 
> 标签：c#, zip, zipfile, zipstorer

此代码工作正常

```
ZipStorer storer = ZipStorer.Create(@"H:\temp\sysInfo.zip", "");
if (systemInfoStream != null)
   storer.AddStream(ZipStorer.Compression.Deflate, "SystemInfo.txt", 
                    systemInfoStream, DateTime.Now, null); 
```

但是当我尝试手动使用 ZipStorer 的内部流时不能正常工作：

```
MemoryStream result = new MemoryStream();
ZipStorer storer =ZipStorer.Create(new MemoryStream(), "");
if (systemInfoStream != null) {
    storer.AddStream(ZipStorer.Compression.Deflate, "SystemInfo.txt", 
                     systemInfoStream, DateTime.Now, null);
    storer.ZipFileStream.Position = 0;
    storer.ZipFileStream.CopyTo(result);
}
File.WriteAllBytes(@"H:\temp\sysInfo.zip", result.ToArray()); 
```

第二个样本的结果是损坏的 zip 文件，用 WinRar 修复后可以读取。第一个样本工作得很好。我看到的唯一显着区别是，在第二个示例中，我没有明确地将文件添加到存储中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:12:38.530

看起来您应该在将数据保存到文件之前调用类似 storer.Close() 的方法来编写中央目录。

# asp.net - How to conditional Redirect using HTML tag depending on QueryString Value in asp.net?

> ID：15675871
> 
> 赞同：0
> 
> 时间：2013-03-28T06:50:46.827
> 
> 标签：asp.net, redirect, anchor, conditional

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:21:27.533

在后面的代码中放置`runat="server"`属性并找到锚标记。

```
 <a id="lnktoRedirect" runat="server">Redirect</a> 
```

后面的代码：

```
 if (isabout)
 {
       lnktoRedirect.HRef = "Memberlist.aspx";
 }
 else
 {
       lnktoRedirect.HRef = "other.aspx";
 } 
```

# sql - PL/SQL time diffrence

> ID：15675875
> 
> 赞同：0
> 
> 时间：2013-03-28T06:51:17.663
> 
> 标签：sql, oracle, plsql

I don't have any experience in PL/SQL but I think I need it.

I have the following problem:

I have a table which contains:

```
Object  Station Time
744          2  23:40:00
744          3  23:45:00
744          4  23:48:00
744          8  23:59:00
744          9  00:02:00
744          13 00:15:00 
```

Now I need a new field with date:

```
Object  Station Time    Date
744          2  23:40:00    26.03.2013
744          3  23:45:00    26.03.2013
744          4  23:48:00    26.03.2013
744          8  23:59:00    26.03.2013
744          9  00:02:00    27.03.2013
744         13  00:15:00    27.03.2013 
```

You can see that’s the date has been changed if the time has reached 00:00:00

In SQL I don’t have any idea how I could do this - so now I think I need a PL/SQL script to create the Date.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:34:58.967

由于您既没有说明创建表的数据类型，也没有说明表可以包含哪些可能的值，也没有说明为什么要产生所需的结果，因此不可能提出正确的解决方案。但你可能会从类似的东西开始

```
create table tq84_t (
  station  number,
  time     varchar2(8)
);

insert into tq84_t values ( 2, '23:40:00');
insert into tq84_t values ( 3, '23:45:00');
insert into tq84_t values ( 4, '23:48:00');
insert into tq84_t values ( 8, '23:59:00');
insert into tq84_t values ( 9, '00:02:00');
insert into tq84_t values (13, '00:15:00');

select 
  station,
  time,
  to_char(trunc(sysdate) -1 +
         sum(next_day) over (order by station), 'dd.mm.yyyy') date_
from (
  select
     case when nvl(lag(time) over (order by station), chr(0)) < time 
          then 0 
          else 1 end next_day,
    time,
    station
  from
    tq84_t
)
order by 
  station; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-28T07:20:38.070

```
INSERT INTO #your_table
SELECT 744 as OBJECT, 13 as Station , '00:15:00' as your time , CONVERT(varchar ,  GETDATE(), 103) 
```

^^ 这仅在您插入当前日期值时才有效；

或者您可以简单地使用 DATETIME 字段

```
CREATE TABLE #yortable 
(OBJECT INT, Station int ,  Arrival_date datetime ) 
```

例如，您有汽车站，它应该在 '2013/03/28 23:30:00' 到达，并且它已经晚了。您只需为其增加价值

```
update #yortable 
set Arrival_date  = DATEADD(mi, 31, Arrival_date  ) 
WHERE Station=1 and object=744 
```

mi- 分 hh - 小时 ss - 秒

结果

> '2013/03/29 00:01:00'

# java - check if Special characters is Chinese or English

> ID：15675876
> 
> 赞同：0
> 
> 时间：2013-03-28T06:51:25.980
> 
> 标签：java, android

Now my app needs to check the input. I can recognize whether the input is Chinese, English or a number, but there are also special characters in Chinese and English. How to check this?

there is different between Special characters in Chinese mode and English mode,like this：</p>

```
chineseMode: ， 。
EnglishMode：, . 
```

Thanks for your answers.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:13:11.220

不确定它是否对您有帮助。您可以尝试使用正则表达式，也可以在此处添加其他特殊字符。

```
boolean result = yourString.contains("[-+.^:,]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:25:02.943

使用此方法检查特殊字符：

```
 Pattern p = Pattern.compile("[&%$#@!()*^]"); //<---- you can add more characters to check here 
    Matcher m = p.matcher(myEditText2);
    if (m.find()) {
        editText.setError("you can not enter special Character");
        return false;
    } 
```

导入这些包：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern; 
```

# android - Android 2.2.3 unable to call SAML URL with JQUERY AJAX

> ID：15675877
> 
> 赞同：0
> 
> 时间：2013-03-28T06:51:26.033
> 
> 标签：android, jquery, ajax, mobile, saml-2.0

I've been stuck here for quite some time now. I am developing a mobile application with phonegap. I have tested the app with android 4.0.4 and it is working perfectly fine. However, when I tested on 2.2.3, the AJAX ended with and error state of:

ready state = 0

HTTP Status = 0

I have tried to increase the timeout to be really long but it still ends with that result. I am not sure what is the problem but I have developed another app using the same ajax call and it is working fine on android 2.2.3 but what makes this time different is that it calls to a SAML URL (Identity Provider).

the codes is like bellow:

```
$.ajax({
                url: "...."+Math.random(),
                type: "POST",
                data: {
                    j_username: uname,
                    j_password: pword
                },
                cache: false,
                timeout: (100*1000),
                success: function(data, textStatus, jqXHR){
                    var contentType = jqXHR.getResponseHeader('Content-Type');
                    if (contentType == 'application/atomsvc+xml'){
                    }else{
                        alert(".....");
                        // clearTimeout(timer);
                        $.mobile.hidePageLoadingMsg();
                        enableAllButtons();
                    }
                },
                error: function(jqXHR, textStatus, errorThrown){
                    // clearTimeout(timer);
                    alert("Error Thrown : " + errorThrown);
                    alert("status : " + jqXHR.status + " " + jqXHR.statusText);
                    alert("ready state : " + jqXHR.readyState);
                    alert(".......");
                    $.mobile.hidePageLoadingMsg();
                    enableAllButtons();
                }
            }); 
```

Really hope someone can help me with this.

Thank you very much for your input in advance.

Regards,

Amanda

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:13:55.813

代码似乎很好，除了一件事

您`Math.random()`在 URL 中使用..您还使用`cache:false` Try to remove the `Math.random()`from URL 而 jQuery Cache 使用相同的东西。

此外，当你得到`readyState = 0`它时，这将是一个跨域问题。`dateType:'JSONP'`在 AJAX 选项中使用 JSONP ( )

# android - 如何在java中制作json

> ID：15675879
> 
> 赞同：0
> 
> 时间：2013-03-28T06:51:32.033
> 
> 标签：android, json

我在将 jsonObject(s) 放入 jsonArray 时遇到问题。

这是 JSON 格式：

```
 {
       "op": "add",
       "array": 
           [
            {
             "field": "fld",
             "value": "20"
            },
            {
             "field": "fldu",
             "value": "z"
            }
           ]
    } 
```

我正在尝试使用此代码：

```
JSONObject jsonObj = new JSONObject();
JSONArray jsonArray = new JSONArray();
jsonObj .put("operation", "add");
jsonObj .put("array",jsonArray.put( jsonObj.put("field", "fld_name"))); 
```

但它给出了一个错误。我究竟做错了什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:00:04.517

```
JSONObject json = new JSONObject();
json.put("operation","add");

JSONArray array = new JSONArray();
JSONObject fields1 = new JSONObject();
fields1.put("field","fld");
fields1.put("value","20");
JSONObject fields2 = new JSONObject();
fields2.put("field","fldu");
fields2.put("value","z");

array.put(fields1);
array.put(fields2);

json.put("array",array); 
```

# c# - 为所有列值过滤 Datatable 的特定行

> ID：15675883
> 
> 赞同：1
> 
> 时间：2013-03-28T06:51:45.607
> 
> 标签：c#, asp.net

我的应用程序中有一个数据表，它只有一行，如下所示。

```
pcode d1 d2 d3 d4 d5 d6

10001 0  1   1  0  1  1 
```

现在我想过滤数据表以只获取除 pcode 列之外的值为**1**的列（即我只想要列 d2、d3、d5、d6）。上面的数据表来自数据库。有什么方法可以过滤数据表，或者如果我可以用数据库表来做，我该怎么做？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:55:58.150

好像：

```
List<string> result = dt.Columns.Cast<DataColumn>()
            .Where(c => c.ColumnName != "pcode")
            .Where(c => dt.Rows[0][c].ToString() == "1")
            .Select(c => c.ColumnName)
            .ToList(); 
```

# java - 变量值更改时如何更新 JTextField？

> ID：15675884
> 
> 赞同：2
> 
> 时间：2013-03-28T06:51:46.533
> 
> 标签：java, multithreading, swing

我有两个`Java(.java) files`。一个有一个`JButton`和`JTextField`另一个有一个`Thread`。首先`Java file`，我添加了一个`ActionListener`，`JButton`这样，当按下按钮时，一个线程（创建的第二个 .java 文件的对象并启动线程）运行，它不断地修改一个整数变量。如何在（第一个 .java 文件）中显示该整数变量（第二个 .java 文件）的值`JTextField`？

检测.java

```
package sample;
public class Detection implements Runnable
{
    public String viewers;
    public int count;
    public void run() 
    {                         
        try 
        {
            while (true) 
            {
                // i have written code for displaying video.
                // and it say how many no. of people in the video 
                // the no of people is stored in a variable "count"

                viewers=""+count; //storing count as string so as to display in the JTextField
            }           
        }                
        catch (Exception e)
        {
            System.out.println("Exception: "+e);
        }
    }
} 
```

UsrInterfac.java

//使用 WindowBuilder Eclipse Juno 构建

```
package sample;
import java.awt.EventQueue;    
import javax.swing.JFrame;   
import javax.swing.JButton;    
import javax.swing.JTextField;    
import java.awt.event.ActionListener;    
import java.awt.event.ActionEvent;    

public class UsrInterfac 
{    
    private JFrame frame;
    private JTextField textField;
    Detection dd = new Detection();
    Thread th = new Thread(dd);

    /**
     * Launch the application.
     */
    public static void main(String[] args) 
    {
        EventQueue.invokeLater(new Runnable() 
        {
            public void run() 
            {
                try 
                {
                    UsrInterfac window = new UsrInterfac();
                    window.frame.setVisible(true);
                } 
                catch (Exception e) 
                {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public UsrInterfac() 
    {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() 
    {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);

        JButton btnStartThread = new JButton("Start Thread");
        btnStartThread.addActionListener(new ActionListener() 
        {
            public void actionPerformed(ActionEvent arg0) 
            {               
                th.start();                 
            }
        });
        btnStartThread.setBounds(59, 133, 117, 23);
        frame.getContentPane().add(btnStartThread);

        textField = new JTextField();
        textField.setBounds(270, 134, 104, 20);
        frame.getContentPane().add(textField);
        textField.setColumns(10);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:54:40.880

从基础开始，在使用 Swing 时，最好使用[LayoutManagers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，与使用`Absolute Positioning`. 每当需要`View`从另一个线程中更改某些内容时，始终建议使用`EventQueue.invokeLater(...)/EventQueue.invokeAndWait(...)`.

这个小示例程序可能可以帮助您了解如何完成您想要的事情:-)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ThreadCounter
{
    private CustomThread cThread;
    private JTextField tField;
    private JButton button;
    private int counter;

    public ThreadCounter()
    {
        counter = 0;
    }

    private void displayGUI()
    {
        JFrame frame = new JFrame("Thread Counter Example");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        tField = new JTextField(10);
        tField.setText("0");
        button = new JButton("Start");
        button.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent ae)
            {
                if (counter == 0)
                {
                    cThread = new CustomThread(tField);
                    cThread.setFlagValue(true);
                    cThread.start();
                    counter = 1;
                    button.setText("Stop");
                }
                else
                {
                    try
                    {
                        cThread.setFlagValue(false);
                        cThread.join();
                    }
                    catch(InterruptedException ie)
                    {
                        ie.printStackTrace();
                    }
                    counter = 0;
                    button.setText("Start");
                }
            }
        });

        contentPane.add(tField);
        contentPane.add(button);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new ThreadCounter().displayGUI();
            }
        });
    }
}

class CustomThread extends Thread
{
    private int changingVariable;
    private JTextField tField;
    private boolean flag = true;

    public CustomThread(JTextField tf)
    {
        changingVariable = 0;
        tField = tf;
    }   

    public void setFlagValue(boolean flag)
    {
        this.flag = flag;
    }

    @Override
    public void run()
    {
        while (flag)
        {
            EventQueue.invokeLater(new Runnable()
            {
                @Override
                public void run()
                {
                    tField.setText(
                        Integer.toString(
                            ++changingVariable));
                }
            });

            try
            {
                Thread.sleep(1000);
            }
            catch(InterruptedException ie)
            {
                ie.printStackTrace();
            }
        }
        System.out.println("I am OUT of WHILE");
    }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:54:46.923

理想情况下，您应该发布您的代码。无论如何，当您调用线程代码时，要么传递第一个类（对象）的实例，要么传递 JTextField 的实例，以便线程可以在文本字段中设置新值。

# windows - 谁读/写我的应用程序的内存

> ID：15675892
> 
> 赞同：0
> 
> 时间：2013-03-28T06:52:17.773
> 
> 标签：windows

每个应用程序都有自己的内存空间。在 Windows 中，所有进程都可以使用“OpenProcess”和“ReadProcessMemory/WriteProcessMemory(NtReadVirtualMemory/NtWriteVirtualMemory)”来读取或写入应用程序的内存。

在系统内核中，我们可以挂钩 SSDT 函数“NtReadVirtualMemory/NtWriteVirtualMemory”来检查谁读写了应用程序的内存。

我有一个问题：有没有办法检查谁在这个应用程序的进程中读写应用程序的内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T07:43:20.907

不，不是没有挂钩其他进程/内核（通过挂钩 SSDT，正如您在问题中提到的那样）。您可以检查哪个进程拥有您的应用程序的句柄，但这并不一定意味着它们实际上已经读/写了任何内容。

要查看哪个进程对您的进程有句柄，

1.  [`NtQuerySystemInformation`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724509%28v=vs.85%29.aspx)使用[`SystemHandleInformation`](http://undocumented.ntinternals.net/UserMode/Undocumented%20Functions/System%20Information/SYSTEM_INFORMATION_CLASS.html#SystemHandleInformation)（未记录的）参数调用`SystemInformationClass`，以枚举系统上打开的所有句柄。
2.  [`DuplicateHandle`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724251%28v=vs.85%29.aspx)通过调用访问复制所有句柄`PROCESS_QUERY_INFORMATION`（如果我没记错的话，这将过滤掉所有非进程句柄）
3.  对于每个重复的句柄，调用[`GetProcessId`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683215%28v=vs.85%29.aspx)以获取进程 ID。
4.  如果 process-id 与您的应用程序的 process-id 匹配，那么我们可以通过查找从返回的原始结构的`ProcessId`字段来获取原始句柄的所有者。`SYSTEM_HANDLE_INFORMATION``NtQuerySystemInformation`

# c# - 处置后的反应性 Rx 2.0 EventLoopScheduler ObjectDisposedException

> ID：15675900
> 
> 赞同：4
> 
> 时间：2013-03-28T06:52:40.337
> 
> 标签：c#, .net, system.reactive

我正在使用 Rx 2.0 的 EventLoopScheduler 来排队/序列化工作。当我需要处置调度程序时，如果还有剩余工作，我将收到未处理的 ObjectDisposedException。这是预期的行为吗？

人为/示例代码：

```
 EventLoopScheduler scheduler = new EventLoopScheduler();
    List<IDisposable> handles = new List<IDisposable>();

    for (int i = 0; i < 100; ++i)
    {
        var handle = Observable.Interval(TimeSpan.FromMilliseconds(1))
                               .ObserveOn(scheduler)
                               .Subscribe(Observer.Create<long>((x) => Thread.Sleep(1000)));

        handles.Add(handle);
    }

    Thread.Sleep(TimeSpan.FromSeconds(1));

    foreach (var handle in handles)
        handle.Dispose();

    scheduler.Dispose();
    Console.ReadLine(); 
```

堆栈跟踪：

```
 System.ObjectDisposedException
   at System.Reactive.Concurrency.EventLoopScheduler.Schedule[TState](TState state, TimeSpan dueTime, Func`3 action)
   at System.Reactive.Concurrency.LocalScheduler.Schedule[TState](TState state, Func`3 action)
   at System.Reactive.Concurrency.Scheduler.<>c__DisplayClass50`1.<InvokeRec1>b__4e(TState state2)
   at System.Reactive.ScheduledObserver`1.Run(Object state, Action`1 recurse)
   at System.Reactive.Concurrency.Scheduler.<>c__DisplayClass50`1.<InvokeRec1>b__4d(TState state1)
   at System.Reactive.Concurrency.Scheduler.InvokeRec1[TState](IScheduler scheduler, Pair`2 pair)
   at System.Reactive.Concurrency.ScheduledItem`2.InvokeCore()
   at System.Reactive.Concurrency.ScheduledItem`1.Invoke()
   at System.Reactive.Concurrency.EventLoopScheduler.Run()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

类似于这个未回答的问题：[RX2.0: ObjectDisposedException after disposing EventLoopScheduler](https://stackoverflow.com/questions/13109054/rx2-0-objectdisposedexception-after-diposing-eventloopscheduler)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:32:13.077

这并不是说还有剩余的工作（即调度程序的队列中仍然有东西），而是您仍然有未完成的订阅正在尝试**将**东西添加到该队列中。

处置所有订阅，然后处置调度程序，它应该可以正常工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:23:56.823

是的，我以前也见过 - 我不认为有办法“清除事件线程”本身，但你可以这样做：

```
EventLoopScheduler scheduler = new EventLoopScheduler();
var wrappedScheduler = scheduler.Catch<Exception>((ex) => 
{
    Console.WriteLine("Got an exception:" + ex.ToString());
    return true;
});

for (int i = 0; i < 100; ++i)
{
    var handle = Observable.Interval(TimeSpan.FromMilliseconds(1))
                           .ObserveOn(wrappedScheduler)
                           .Subscribe(Observer.Create<long>((x) => Thread.Sleep(1000)));

    handles.Add(handle);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-01T04:47:18.847

实际上，有一种简单的方法可以`EventLoopScheduler`在处理之前刷新队列。首先，确保向队列中添加操作的所有订阅都已释放，以便无法添加任何其他内容。

然后，只需安排调度程序本身的处置：

```
scheduler.Schedule(() =>
{
    // cleanup code: dispose of other stuff here
    scheduler.Dispose();
}); 
```

确保在所有其他挂起的操作都运行并关闭线程之后运行最后一个计划的操作。

# ruby-on-rails - rails 3.2 使用的默认 gem

> ID：15675906
> 
> 赞同：1
> 
> 时间：2013-03-28T06:53:11.083
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我是 Rails 的新手。我只是在进行 Bundle 安装，并注意到 Rails 需要很多 gem 才能启动。

我只想知道是否有 Rails 每次安装的默认 Gems 列表。

我知道这听起来有点奇怪，但我想知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:57:38.133

我理解你的困惑，所以让我解释一下。默认情况下，您的 Gemfile 只需要几个 gem，其中包括 rails。但是你看到几十个 gem 安装在一个新鲜的`bundle install`. 问题是宝石通常依赖于其他宝石，而它们又可以依赖于其他宝石。例如，访问 ruby​​gems.org 并查找`rails`gem。在那里你会看到这个 gem 的依赖关系。通过转到每个依赖的 gem，您将看到它们各自的依赖项。

Bundler 在创建完整的 gem 列表时会构建一个数据结构，这个数据结构称为依赖图。一旦有了这个数据结构，它就会创建一个 Gemfile.lock - 一个特殊的快照依赖文件，其中包含应用程序所需的*所有gem。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:56:45.067

Ruby gem 是增强 Ruby 编程语言的特性和功能的插件。以下是预安装的 Ruby gem 的列表：

```
actionmailer (1.2.1) - Service layer for easy email delivery and testing
actionpack (1.12.1) - Web-flow and rendering framework putting the VC in MVC
actionwebservice (1.1.2) - Web service support for Action Pack
activerecord (1.14.2) - Implements the ActiveRecord pattern for ORM
activesupport (1.3.1) - Support and utility classes used by the Rails framework
fcgi (0.8.6.1) - The fcgi gem facilitates FastCGI, which we use in concert with mod_fastcgi to accelerate your Ruby on Rails applications
gruff (0.1.2) - A library for making graphs
mysql (2.7)/pg - The MySQL/PG Ruby gem allows you to connect to and use MySQL/PG databases. We fully support MySQL/PG and the Ruby bindings to it.
rails (1.1.2) - The Ruby on Rails package
rake (0.7.1) - Ruby based make-like utility, required by many Ruby applications and gems.
rmagick (1.10.1) - RMagick allows you to use the ImageMagick and GraphicsMagick libraries, similar to GD support in PHP or Perl. 
```

还

```
gem 'carrierwave'

gem 'devise' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T07:16:12.297

运行 bundle install 后，将生成一个 Gemfile.lock 文件。

Gemfile.lock 包含应用程序中正在使用的所有 gem 的列表，包括所有依赖项。

# dataset - 带有空数据集的 jqplot 饼图

> ID：15675909
> 
> 赞同：1
> 
> 时间：2013-03-28T06:53:16.287
> 
> 标签：dataset, jqplot, pie-chart

我想要一个空的饼图，以防没有提供数据来绘制饼图。

如果我为数据集传递一个空数组，那么它不会在画布中呈现任何内容。

任何人都可以更新我如何管理这个，当没有任何数据时，它应该画一个空白圆圈，以便用户可以感觉到图表在那里但没有任何数据要显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:46:42.603

我面临同样的问题。我使用了 2 个函数来不同地绘制没有数据和数据的情况。在无数据中，我使用 1 作为输入来显示完整的圆圈，但使用颜色和标签表示不存在数据。

# cucumber - 如何在黄瓜中执行 .feature 文件

> ID：15675912
> 
> 赞同：1
> 
> 时间：2013-03-28T06:53:22.990
> 
> 标签：cucumber

我是黄瓜的初学者。我在互联网的帮助下安装了黄瓜。我写了一个 .feature 文件。但我不知道该文件放在哪里以及如何执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:28:21.513

因为它希望你在 BDD 中取得成功，所以 Cucumber 将引导你完成整个过程。在项目目录中，输入`cucumber`cmd 提示符或终端，它会返回：

```
You don't have a 'features' directory.  Please create one to get started. 
```

创建一个`features`目录，然后将`.feature`文件放入其中。同样， run ，它返回映射到您的文件`cucumber`的待处理步骤定义。`feature`举个例子：

```
You can implement step definitions for undefined steps with these snippets:

Given /^I want to use cucumber$/ do
  pending # express the regexp above with the code you wish you had
end 
```

现在——正如@siekfried 所指出的——创建一个名为`features/step_definitions`您的步骤定义文件的目录，该目录应以`_steps`（例如`example_steps.rb`）结尾。然后，使用适当的代码编辑您的步骤定义文件以执行该步骤。

# python - 如何使从 subprocess.Popen 启动的 python 脚本在发生错误时保持打开状态并在正常返回时关闭？

> ID：15675914
> 
> 赞同：1
> 
> 时间：2013-03-28T06:53:58.560
> 
> 标签：python, cmd, subprocess, popen

目前，我在 Windows 上运行它：

```
args = ['start', windowname, 'python', '-i', myscript]
subprocess.Popen(args, shell=True) 
```

如您所见，我在 python 的交互模式下启动了一个运行 myscript 的子进程。就我而言，这意味着一旦脚本退出，无论它是否出错或成功完成，窗口/外壳都会保持打开状态。但是，我希望当 myscript 出错时，窗口将保持打开状态，而当 myscript 成功运行时，窗口将关闭。

我这样做的原因是因为我想看到错误和导致错误的输出——我宁愿不使用某种形式的日志记录，因为我更容易直观地看到窗口和输出。

我认为我无法检查返回码，因为我正在与之交互的进程是 start/cmd，而不是 python。如果我错了，请纠正我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:47:43.323

我认为最简单的方法是将整个内容包装在一个小批处理脚本中，该脚本检查 python 的返回代码（可能由您通过调用`sys.exit()`适当的返回代码来设置）。

[这个 stackoverflow 问题](https://stackoverflow.com/questions/334879/how-do-i-get-the-application-exit-code-from-a-windows-command-line/)涵盖了如何获取返回码（显然它在 %errorlevel% 中），您可以通过`pause`在批处理脚本中执行来保持 cmd 窗口打开。

# python - 午夜后用于 Sqlite 时间减法的 Python 脚本

> ID：15675917
> 
> 赞同：0
> 
> 时间：2013-03-28T06:54:07.653
> 
> 标签：python, sqlite, gtfs

我有一个城市的通用交通提要规范数据数据库，将午夜后的交通服务定义为小时 > 24。因此，在 stop_times 表中，我们定义了很多次，例如 25:00:00、26:00:00等。由于我需要对这个数据库的一部分执行时间减法，我想我会编写一个用户定义的 python 脚本来处理这个问题，并使用 python create_function sqlite 命令将它与我的数据库相关联。

出于某种原因，当我在这个数据集上运行我想到的查询时，我得到

```
sqlite3.OperationalError: user-defined function raised exception 
```

这是我为处理午夜之后的时间而编写的时间减法函数。我敢肯定这是一团糟。如果您对如何更有效地处理此问题有任何提示，我也很想听听。提前致谢。

```
def time_delta(t1, t2):
old_arrival = t1.encode('utf-8').split(':')
old_departure = t2.encode('utf-8').split(':')

new_arrival_string = "2013-03-16 %s:%s:%s" % (int(old_arrival[0])-12, old_arrival[1], old_arrival[2])
new_arrival_format = "%Y-%m-%d %H:%M:%S"
arr = datetime.datetime.strptime(new_arrival_string, new_arrival_format)

new_departure_string = "2013-03-16 %s:%s:%s" % (int(old_departure[0])-12, old_departure[1], old_departure[2])
new_departure_format = "%Y-%m-%d %H:%M:%S"
dep = datetime.datetime.strptime(new_departure_string, new_departure_format)

difference = arr-dep
seconds = difference.seconds

if difference.days < 0:
    difference = dep-arr
    seconds = (-1) * difference.seconds

return seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:37:32.527

你能改变数据库模式吗？如果是这样，避免此问题的一种方法可能是将到达和离开时间存储为自午夜以来的整数秒数而不是字符串（嗯，“中午减 12 小时”，正如规范所定义的那样），并更改您使用的任何工具用于加载数据库以从`stop_times.txt`.

这不仅为您提供了一个不受任何 24 小时限制的良好、规范的停止时间表示，它使计算时间间隔和为特定时间段内的停止时间构建数据库查询变得简单。

# javascript - 随机值生成 javascript

> ID：15675918
> 
> 赞同：3
> 
> 时间：2013-03-28T06:54:08.280
> 
> 标签：javascript, html

我有一些代码用于将数组中的随机值存储到这样的变量中：

```
Quest=["value1","value2","value3","value4"];
var random=Math.floor( Math.random() * Quest.length );
var question = Quest[random]; 
```

我多次调用第二行和第三行代码，因此多次生成相同的值。有没有人知道一些有效的代码来确保相同的值不会按顺序重复生成多次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:01:54.440

*   用数字 0 到 (Quest.length-1) 填充一个数组。

*   使用[此](http://dzone.com/snippets/array-shuffle-javascript)JavaScript 代码来打乱该数组。

**重复**：

*   第一次（t=0），输出数组[t]。

*   第二次（t=1），输出数组[t]。

*   当 t%Quest.length（或 array.length）==0 时。

*   再次洗牌。

    并**重复**。

    ```
     function shuffle(o) 
        { 
         for (var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
            return o;
        };
        Quest = ["value1", "value2", "value3", "value4"];
        var myarray = new Array();
        var i = 0;
        for (i = 0; i < Quest.length; i++) {
            myarray[i] = i;
        }
        shuffle(myarray);
        for (i = 0; i < myarray.length; i++) {
            document.write(myarray[i]);
        }
        for (i = 0; i < 50; i++) {
            if (i % (Quest.length) == 0) {
                shuffle(myarray);
            }
            document.write("<p>" + Quest[myarray[i % (Quest.length)]] + "</p>");
        } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T07:04:26.637

您可以使用`splice`以下方法进行操作：

```
var Quest = ["value1", "value2", "value3", "value4"];
var random1 = Quest.splice(Math.floor(Math.random() * Quest.length), 1)[0];
...
var random2 = Quest.splice(Math.floor(Math.random() * Quest.length), 1)[0];
... 
var random3 = Quest.splice(Math.floor(Math.random() * Quest.length), 1)[0]; 
```

由于该值已从`Quest`数组中删除，因此可以保证问题永远不会重复

演示：http: [//jsfiddle.net/dfsq/QUztw/3/](http://jsfiddle.net/dfsq/QUztw/3/)

*注意：如果您不想修改初始数组，您可以使用它的副本`Quest.slice()`。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T07:39:18.577

使用 Fisher-Yates 对数组进行洗牌：

```
var Quest=["value1","value2","value3","value4"];

function kfy(array)
{
  for (var i = array.length - 1; i > 0; --i) {
    var p = Math.floor(Math.random() * (i + 1)),
    tmp = array[p];
    array[p] = array[i];
    array[i] = tmp;
  }
}

console.log(Quest);
kfy(Quest);
console.log(Quest); 
```

然后，只需从数组的开头迭代到结尾。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T07:06:52.387

另一种可能性是对数组进行随机排序：

```
function randomOrder() {
 return (Math.round(Math.random())-0.5);
}

var Quest = ["value1", "value2", "value3", "value4"];
Quest.sort(randomOrder); 
```

那时您可以遍历阵列并且它不应该重复。

# java - 数据库查询回滚到保存点失败

> ID：15675920
> 
> 赞同：0
> 
> 时间：2013-03-28T06:54:13.180
> 
> 标签：java, mysql, jsp, jdbc, prepared-statement

```
<body>
<%String ide=request.getParameter("q");
int num=0;
if(ide!=null)
 num=Integer.parseInt(ide);
String vegg=request.getParameter("vegetables");
int newe=0; 
Connection cnt1=null;
try{
String connectionURL = "jdbc:mysql://localhost:3306/emandi";
Class.forName("com.mysql.jdbc.Driver");  
 cnt1 = DriverManager.getConnection(connectionURL, "root", "root");
 cnt1.setAutoCommit(false);
 cnt1.commit();
Statement stmt1 = cnt1.createStatement();
Savepoint mySavepoint = cnt1.setSavepoint("sp1");
ResultSet resultSet = stmt1.executeQuery("select Quantity from data where vegetables='"+vegg+"' ");

if(resultSet.next())
{
    newe=resultSet.getInt(1);
}

int newvalue=newe-num;
//PreparedStatement statem1=cnt1.prepareStatement("update data set Quantity="+newvalue+" where vegetabels='"+vegg+"' ");
//statem1.execute();
stmt1.executeUpdate("update data set Quantity="+newvalue+" where vegetables='"+vegg+"' ");
out.println(newvalue);
}
catch(Exception e){
out.println(e);
    }%>
<script>
 function disp_confirm()
{
var r=confirm("confirm booking?")
if (r==true)
{
    <%cnt1.commit();%>
 alert("booked")
  }
  else()
 {
<%cnt1.rollback(sp1);%>
  alert("You pressed Cancel!")
 }
 }
</script>
<input type="button" onclick="disp_confirm()" value="book">

</body>
</html> 
```

我写了一个 JSP 页面来确认蔬菜的预订。所有功能都正常工作。如果用户单击取消按钮，则回滚到保存点除外。即使用户单击取消按钮，回滚选项也不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:26:50.300

根本不建议您正在做的事情。而且您不能像您正在做的那样从 Javascript 事件中调用 Java 代码。

1.  您在 JSP 中混合了 UI 代码和逻辑代码。尝试使用 MVC 模式并将 UI 和业务逻辑分开。
2.  在保存到数据库之前要求 Javascript 确认。不保存并要求确认然后回滚。

# asp.net - 从返回的视图中提取 Div

> ID：15675940
> 
> 赞同：3
> 
> 时间：2013-03-28T06:55:24.140
> 
> 标签：asp.net, asp.net-mvc-3

我正在将视图从控制器返回到 jquery，返回视图但我想从返回的视图中提取 div。我当前的代码是这样的

```
 public ActionResult DeleteItem(int pid)
                {
                 //my logic goes here
                    retutn View("SomeView",model);
                    }

                 Jquery

enter code here
          script type="text/javascript">
              $(document).ready(function () {

        $('.Remove').click(function () {
             var value = $(this).attr('id');
            $.ajax({
                cache:true,
                type: "POST",
                url: "@(Url.Action("DeleteItem", "ControllerName"))",
                data: "pid=" + value,
                success: function (data) {
                    $("body").html(data);

                },
                error:function (xhr, ajaxOptions, thrownError){
                    alert('Failed to subscribe.');

                }, 
                complete: function() {   } 
           });       
            return false;
                 });
                      });

        </script> 
```

我当前的逻辑返回视图并将总视图即 html+body 分配给页面的正文部分，它显示了 html 部分两次。有没有办法从返回的视图中检索 div 并重新加载它。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:57:02.293

您的控制器操作应返回 a`PartialViewResult`否则它将在响应中返回您的布局页面。如果您想同时满足这两种情况，您可以检查请求是否为 AJAX 请求：

```
public ActionResult DeleteItem(int id) {
    // delete your item

    if (Request.IsAjaxRequest()) {
        // return just the partial view
        return PartialView("yourview");
    }

    // otherwise handle normally
    return RedirectToAction("list");
} 
```

要了解退货和退货的区别，请参阅[“return View()”和“return PartialView()”有什么](https://stackoverflow.com/questions/2662285/whats-the-difference-between-return-view-and-return-partialview)`View`区别。`PartialView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:13:30.420

```
 script type="text/javascript">
          $(document).ready(function () {

    $('.Remove').click(function () {
         var value = $(this).attr('id');
        $.ajax({
            cache:true,
            type: "POST",
            url: "@(Url.Action("DeleteItem", "ControllerName"))",
            data: "pid=" + value,
            success: function (data) {
                     var t=$(data).find('.divtoreplacewith');
                               $('.divtoreplace').replaceWith(d);
         //Wasted my 2 days for above two lines.But satisfied with solution,
          //Both div are same but '.divtoreplacewith' is having new data,And I have replaced div with that div that's all
            },
            error:function (xhr, ajaxOptions, thrownError){
                alert('Failed to subscribe.');

            }, 
            complete: function() {   } 
       });       
        return false;
             });
                  }); 
```

# c# - 读取具有日期格式列的 Xls 文件

> ID：15675942
> 
> 赞同：0
> 
> 时间：2013-03-28T06:55:27.187
> 
> 标签：c#, datatable, oledb

我确实有一个 xls 文件，其中包含 DateTime 格式的 Call_Date 列。

我正在尝试读取此文件并将其放入具有连接字符串属性 HDR = No 的数据表中，即。我不想读取它的数据表的标题行。

我在数据表中得到的第一行是 xls 中列的名称，除了 call_date 在第一行有空字符串。

我可以理解 OLEDB 可能会尝试将其读取为日期时间格式，如果无法将其解析为日期时间，则将其作为 type =“ **System.DBNull ”的空字符串。**

但是我需要像其他人一样在数据表的第一行中有这个 call_date 列名。

我无法更改 xls 中的格式。我可以在用 c# 或其他东西阅读时这样做吗？

到目前为止我的代码

```
 mCon.ConnectionString = ("Provider=Microsoft.ACE.OLEDB.12.0;data source=" + openFileDialog1.FileName + ";Extended Properties=\"Excel 12.0;HDR=NO\";");
        strSelectQuery = "SELECT TOP 20 * FROM [Sheet1$]";
        if (mCon.State == ConnectionState.Closed)
        {
            mCon.Open();
        }
        DataAdapter = new System.Data.OleDb.OleDbDataAdapter(strSelectQuery, mCon);
        DataAdapter.Fill(mDTable);
        mCon.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:28:52.877

在花了几个小时在互联网上搜索这个主题后，我自己解决了这个问题。

我刚刚修改了我的连接字符串，以允许 OLEDB 通过在扩展属性中添加 IMEX =1 来读取一列中具有多个数据类型条目的 excel 文件。

我的连接字符串现在看起来像

```
mCon.ConnectionString = ("Provider=Microsoft.ACE.OLEDB.12.0;data source=" + openFileDialog1.FileName + ";Extended Properties=\"Excel 12.0;HDR=NO;IMEX = 1\";"); 
```

# android - 如何使用 Android 设备播放原始文件夹中的视频？

> ID：15675944
> 
> 赞同：23
> 
> 时间：2013-03-28T06:55:34.757
> 
> 标签：android, android-layout, android-videoview

请帮忙，如何在离线模式下从原始文件夹播放 android 设备中的视频？

成功示例1：我可以使用以下代码从 SD 卡播放视频。

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
 String type = "video/mp4";
 Uri uri = Uri.parse("file:///sdcard/test.mp4");
 intent.setDataAndType(uri, type);
 startActivity(intent); 
```

失败的例子2：问题：我可以把 test.mp4 放到 res/raw 文件夹吗？

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
 String type = "video/mp4";
 Uri uri = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.taipei);
 intent.setDataAndType(uri, type);
 startActivity(intent); 
```

有没有人可以帮助我？请。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-28T07:02:38.903

将视频复制到项目的 res/raw 文件夹中。在 res 文件夹下创建 raw 文件夹。它必须采用受支持的格式（3gp、wmv、mp4）并在其文件名中使用小写、数字、下划线和圆点命名，同样：video_file.mp4。

```
VideoView view = (VideoView)findViewById(R.id.videoView);
String path = "android.resource://" + getPackageName() + "/" + R.raw.video_file;
view.setVideoURI(Uri.parse(path));
view.start(); 
```

在您的 xml 文件中创建 videoView。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-23T11:59:58.683

```
// To get files from any resource folder (eg: raw, drawable, etc.)
// Use the resource id
int rawId = getResources().getIdentifier(file_name_without_extension,  "raw", getPackageName());

// URI formation
String path = "android.resource://" + getPackageName() + "/" + rawId;

// Set the URI to play video file
videoView.setVideoURI(Uri.parse(path)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-28T07:01:21.363

检查此解决方案[如何从资产文件夹或原始文件夹在 android 中播放视频？](https://stackoverflow.com/questions/3028717/how-to-play-videos-in-android-from-assets-folder-or-raw-folder)

```
VideoView videoHolder = new VideoView(this);
//if you want the controls to appear
videoHolder.setMediaController(new MediaController(this));
Uri video = Uri.parse("android.resource://" + getPackageName() + "/" 
+ R.raw.your_raw_file); //do not add any extension
//if your file is named sherif.mp4 and placed in /raw
//use R.raw.sherif 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-12T08:53:24.573

在我的代码中“applicationdemo”是我的视频文件的名称。

```
 String video_url = "android.resource://" + context.getPackageName() + "/" + R.raw.applicationdemo;
    final VideoView videoView = findViewById(R.id.dialog_video);
    Uri videoUri = Uri.parse(video_url);
    MediaController mediaController= new MediaController(context);
    mediaController.setAnchorView(videoView);
    videoView.setMediaController(mediaController);
    videoView.setVideoURI(videoUri);
    videoView.requestFocus();
    videoView.start(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-25T14:36:39.050

我想，每个人都给出了答案，但没有解释场景。这里的主要问题是，如果我没记错的话，Android 假定来自您的 SD 卡的视频是动态的，在这种情况下，可能不支持或不支持该格式，因此它启用/要求您选择或打开对于其他第三方媒体软件。

虽然您在 RAW 文件夹下播放的任何内容都需要一个处理程序，例如 videoview 或内置媒体播放器，这会得出结论，您放入 RAW 文件夹中的任何内容都应该由 Android 操作系统支持/读取。

但是，这里的线程启动器希望使用第三方媒体播放器播放他的 RAW 文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-10T11:33:13.900

I struggled with this for dynamic video names. The solution that worked for me was:

```
//Somewhere set the video name variable
String video+name="myvideo";
//setup up and play video

VideoView videoView=(VideoView)findViewById(R.id.video);
videoView.setVisibility(View.VISIBLE);
String uriPath = "android.resource://"+getPackageName()+"/raw/"+ video_name;
Uri UrlPath=Uri.parse(uriPath);
MediaController mediaController = new MediaController(this);
mediaController.setAnchorView(videoView);
videoView.setMediaController(mediaController);
videoView.setVideoURI(UrlPath);

videoView.setOnPreparedListener(new OnPreparedListener() {
        public void onPrepared(MediaPlayer mediaPlayer) {
            if (position == 0) {
                try{
                    videoView.requestFocus(); 
                    videoView.start();
                }catch (Exception e){
                    System.out.printf("Error playing video %s\n", e);
                }
            }else{
                videoView.pause();
            }

        }
}); 
```

And in XML

```
<VideoView android:layout_width="300dp"
    android:id="@+id/video"
    android:layout_height="300dp"
    android:orientation="horizontal"
    android:layout_gravity="center" 
    android:keepScreenOn="true"
    /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-04T07:13:20.040

```
 player = ExoPlayerFactory.newSimpleInstance(requireActivity(), new DefaultTrackSelector(), new DefaultLoadControl());
   Uri uri = RawResourceDataSource.buildRawResourceUri(getOfflineVideo(offlinePosition));

   MediaSource mediaSource = new ExtractorMediaSource(uri, new DefaultDataSourceFactory(requireActivity(),
                "MyExoplayer"), new DefaultExtractorsFactory(), null, null);

   //setup  player with mediaSource 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-19T05:09:51.957

该解决方案将完全帮助您实现您想要的。

```
VideoView myVideo;
private MediaController media_control;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myVideo = (VideoView) findViewById(R.id.playVideo);

    Uri uri = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.bootanimation_nexus);

    media_control = new MediaController(this);

    myVideo.setMediaController(media_control);

    myVideo.setVideoURI(uri);

    myVideo.start();

} 
```

# php - 为什么 imagemagick 和 gd 获取图片的像素不同？

> ID：15675947
> 
> 赞同：1
> 
> 时间：2013-03-28T06:55:39.797
> 
> 标签：php, imagemagick, gd, gif

我有图片吗？图片格式是gif。

```
<?php
    $animation = new Imagick('1.gif');
    echo $animation->getImageWidth();
    echo "\n";
    echo $animation->getImageHeight();
?> 
```

返回`70 124`；

```
<?php
    $a = getimagesize('1.gif');
    echo ($a[3]);
?> 
```

返回`width="160" height="217"`；我尝试了其他 gif 图片，结果是一样的。

# matlab - Matlab如何简化？

> ID：15675952
> 
> 赞同：0
> 
> 时间：2013-03-28T06:56:07.427
> 
> 标签：matlab, simplify

我想简化以下操作，但它会产生一个错误，提示：输入参数过多。谁能告诉我我做错了什么？？？

```
>> 
syms a b c d e  f g h i j k l x y xy

A=[1 a b a^2 a*b b^2; 1 c d c*2 c*d d^2; 1 e f e^2 e*f f^2; 1 g h g^2 g*h h^2; 1 i j         i^2 i*j j^2; 1 k l k^2 k*l l^2]

B=[1; 0; 0; 0; 0; 0]

A =

[ 1, a, b, a^2, a*b, b^2]
[ 1, c, d, 2*c, c*d, d^2]
[ 1, e, f, e^2, e*f, f^2]
[ 1, g, h, g^2, g*h, h^2]
[ 1, i, j, i^2, i*j, j^2]
[ 1, k, l, k^2, k*l, l^2]

B =

 1
 0
 0
 0
 0
 0

>> simplify(inv(A)*B, 'steps', 100)enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:01:22.540

我已将您粘贴的代码放入我的 matlab (R2013a) 副本中，并且完成后没有任何错误。结果并没有简化很多。

如果您的计算机在计算上阻塞（它很长），您可以尝试将这些东西分开一点，看看它是否有帮助。

```
vec=inv(A)*B
for n=1:6
    results(n)=simplify(vec(n), 'steps', 100);
end
results 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:38:13.233

您的调用属于[此 MATLAB 函数](http://www.mathworks.com/help/symbolic/simplify.html?searchHighlight=simplify)：

但它在符号数学工具箱中，这意味着它只能简化数学公式而不是复杂的矩阵计算。

```
Simplify Favoring Real Numbers

To force simplify favor real values over complex values, set the value of Criterion to preferReal:

syms x
f = (exp(x + exp(-x*i)/2 - exp(x*i)/2)*i)/2 - (exp(- x - exp(-x*i)/2 + exp(x*i)/2)*i)/2;
simplify(f, 'Criterion','preferReal', 'Steps', 100)
ans =
cos(sin(x))*sinh(x)*i + sin(sin(x))*cosh(x)
If x is a real value, then this form of expression explicitly shows the real and imaginary parts.

Although the result returned by simplify with the default setting for Criterion is shorter, here the complex value is a parameter of the sine function:

simplify(f, 'Steps', 100)
ans =
sin(x*i + sin(x)) 
```

相反，我认为您可以尝试使用[此功能](http://www.mathworks.com/help/symbolic/mupad_ref/simplify1.html?searchHighlight=simplify)： Simplify(f, Steps = numberOfSteps)

但首先，您需要一个“f”，它可以像递归或迭代函数一样使用。

例如`Simplify(sin(x)^2 + cos(x)^2, All)`

希望这可以帮助！

# asp.net-mvc - ASP.NET MVC - IDisposable 模型

> ID：15675954
> 
> 赞同：2
> 
> 时间：2013-03-28T06:56:19.173
> 
> 标签：asp.net-mvc

我为我认为应该是 ASP.NET MVC 的核心功能的东西创建了自己的逻辑。我在这里发布它是希望有人会告诉我如何在没有自定义代码的情况下实现这一点，或者如果 MVC 团队的某个人看到它，然后意识到它的重要性并在未来的 MVC 版本中实现它。

因此，模型并不总是 EF 对象，它们可以是其他东西，并且可能包含其他资源。特别是如果您使用 ViewModels 概念，他们拥有模型信息 + 应该为视图服务的任何其他内容。

无论如何，我发现自己拥有 IDisposable 的模型，我需要一种方法来处理它们。

经过大量试验后，我最终得到了以下属性，它配置了一个 IDisposable 模型。它装饰了我的基本 Controller 类，因此适用于任何已执行的操作：

```
internal class ModelDisposerAttribute : ActionFilterAttribute
{
    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
            var model = filterContext.Controller.ViewData.Model as IDisposable;
            if (model != null)
                    model.Dispose();

            base.OnResultExecuted(filterContext);
    }
} 
```

很高兴听到你的想法！:)

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:11:05.283

> 框架在返回 ActionResult 后肯定会访问模型。ActionResults 调用它们的 Execute() 方法来生成内容。
> 
> 如果您需要处理控制器中的任何内容，您可以覆盖 Controller.Dispose()。您可以从该方法中处理您的模型

[在 asp.net mvc 中，拥有 IDisposable 模型是否安全？](https://stackoverflow.com/questions/2143867/in-asp-net-mvc-is-it-safe-to-have-an-idisposable-model)

# ruby-on-rails - 密码确认在 Rails 3 中不起作用

> ID：15675955
> 
> 赞同：1
> 
> 时间：2013-03-28T06:56:21.543
> 
> 标签：ruby-on-rails, validation, activerecord

我必须为商店提供注册设施。在那里用户必须输入姓名、密码、确认密码。但是当我尝试输入不同的密码进行确认时，它没有显示任何错误并且用户已成功注册。这是 UserMODEl 中的代码

```
 class User < ActiveRecord::Base
       attr_accessible :name, :password_digest, :password, :password_confirmation
       validates :name, :presence => true, :uniqueness => true
       validates :password, :presence =>true,  :confirmation =>true
       validates_confirmation_of :password
       has_secure_password 
     end 
```

我在views/users/_form.html.erb中的代码如下..

```
 <div class="depot_form">
       <%= form_for(@user) do |f| %>
 <% if @user.errors.any? %>
  <div id="error_explanation">
  <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being    saved:</h2>

  <ul>
  <% @user.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
  </div>
 <% end %>

     <fieldset>
      <legend>Enter User Details</legend>
        <div >
     <%= f.label :name %>:
       <%= f.text_field :name, :size => 40 %>
      </div>
       <div>
       <%= f.label :password, 'Password' %>:
       <%= f.password_field :password, :size => 40 %>
       </div>
       <div>
       <%= f.label :password_confirmation, 'Confirm Password' %>:
       <%= f.password_field :password_confirmation, :size => 40 %>
       </div>
      <div>
         <%= f.submit %>
          </div>
       </fieldset>

     <% end %>

     </div> 
```

我经历了各种解决方案和修改，但徒劳无功......请提供任何帮助..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T07:01:37.927

也添加此验证：

```
 validates :password_confirmation, :presence =>true 
```

确认属性仍然需要存在检查。

阅读 - [http://guides.rubyonrails.org/active_record_validations_callbacks.html#confirmation](http://guides.rubyonrails.org/active_record_validations_callbacks.html#confirmation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:17:05.153

您应该为此用例使用设计 gem。

并设计使用此属性

```
 devise :database_authenticatable, :registerable, :confirmable, :recoverable,
 :rememberable, :trackable, :validatable 
```

要阅读有关设计的更多信息，请单击[此处](https://github.com/plataformatec/devise)

# c# - 如何在javascript警报弹出窗口中显示字符串数组值

> ID：15675956
> 
> 赞同：0
> 
> 时间：2013-03-28T06:56:27.753
> 
> 标签：c#, javascript

我需要在 javascript 警报弹出窗口中一一显示所有字符串值。但我的代码不工作。我的代码看起来像：

```
<script type="text/javascript">
    function test(x)
    {        
        for(var i = 0; i<x.length; i++)
        {
        alert(x[i]);    
        }        

    }

    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
   <asp:Button ID="btn" runat="server" Text="Submit" onclick="btn_Click" /> 
    </div>

C# code:

 protected void btn_Click(object sender, EventArgs e)
    {
       string [] str=new string[5];
       str[0] = "string1";
       str[1] = "string2";
       str[2] = "string3";
       str[3] = "string4";
       str[4] = "string5";
       btn.Attributes.Add("onclick", "javascript:test(str);");

    } 
```

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:07:56.690

尝试

```
btn.Attributes.Add("onclick", "test('"+String.join(",",str)+"'.split(','));"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:11:27.510

在行 btn.Attributes.Add("onclick", "javascript:test(str);"); str 是一个字符串，而不是一个变量。

这应该是

```
btn.Attributes.Add("onclick", "javascript:test("+str+");"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:02:47.777

您可以简单地调用`join`数组上的方法来合并数组中的元素：

```
function test(x)
{        
    alert(x.join(","));  
} 
```

上面`,`是分隔符。

编辑：

看来您有一个要编码为 javascript 的 .NET 数组。您可以使用`Json`帮助程序，如下所示：

```
btn.Attributes.Add("onclick", "test(" + System.Web.Helpers.Json.Encode(str) + ");return false;"); 
```

# c# - 在设置中更改时自动更改编辑框中的值

> ID：15675959
> 
> 赞同：0
> 
> 时间：2013-03-28T06:56:41.007
> 
> 标签：c#, settings, application-settings

如果这些值在设置中更改，如何更改编辑框中的值？

示例：我有两种形式，一种是主要的（第一种），它有编辑框和按钮。编辑框从设置中获取值，按钮用于显示第二种形式。第二种形式也是编辑框，它也从第一种形式的编辑框等设置中获取相同的值，并具有用于在设置中保存编辑框值的按钮。

所以现在我们有两个具有相同控件的表单，第一个表单用于读取设置，第二个用于写入设置。现在的问题是：**当相同的值被更改并保存在第二种形式中时，如何从第一种形式自动刷新（重新加载、更新）编辑框值。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:26:58.013

这似乎很简单。

以第一种形式编写一个静态函数，可以以第二种形式访问。

```
public class Form1 {
  public static void updateValue(string value) {
   editBox1.Text = value;
  }
} 
```

并在 Form2 中访问相同的功能

```
public void updateForm1() {
  Form1.updateValue(editBox2.Text);
} 
```

当单击表单 2 中的按钮时，应调用 updateForm1() 函数。

# sql - 缓慢变化的维度总是在更新

> ID：15675960
> 
> 赞同：9
> 
> 时间：2013-03-28T06:56:41.130
> 
> 标签：sql, ssis, collation, scd

我有一个要加载的维度，其中有`description`一个数据类型为`VARCHAR(50)`. 它的排序规则是 SQL_Latin1_General_CP1256_CS_AS，它包含诸如“مركز العقبة”之类的阿拉伯数据。它的来源具有相同的类型、大小和排序规则，但每次我加载维度时，该字段都会更新！为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-12T00:30:39.690

您应该确保数据库和表的排序规则相同。具体来说，您应该按照您的评论将它们都设置为 Arabic_CI_AI_KS_WS 。

# html - 只读文本框@Html

> ID：15675962
> 
> 赞同：1
> 
> 时间：2013-03-28T06:56:48.583
> 
> 标签：html, asp.net-mvc-4

在这里，我尝试添加 ReadOnly 文本框，但它不起作用。

```
 @Html.TextBoxFor(m =>m.ProjectManagement,htmlAttributes: new {style="width:100%",@readonly="readonly" }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:58:40.467

```
@Html.TextBoxFor(m =>m.ProjectManagement, new {style="width:100%",@readonly="readonly" }) 
```

试试这个

这是 TextBOxFor 的官方文档：http: [//msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.textboxfor (v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.textboxfor(v=vs.108).aspx)

我无法为您提供 jsfiddle，但这是可行的，我已经在计算机上的本地项目中对其进行了测试。

```
public static MvcHtmlString TextBoxFor<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, TProperty>> expression,
    Object htmlAttributes
) 
```

> 参数 htmlHelper 类型：System.Web.Mvc.HtmlHelper 此方法扩展的 HTML 帮助程序实例。
> expression 类型：System.Linq.Expressions.Expression> 一个表达式，用于标识包含要呈现的属性的对象。
> htmlAttributes 类型：System.Object 包含要为元素设置的 HTML 属性的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:00:23.393

然后试试这个：

```
 <%= Html.TextBoxFor(m => m.ProjectManagement, new {style="width:100%",@readonly = "readonly" }) %> 
```

# c# - 在 c# 中调用 ironpython 得到 UnBoundNameException

> ID：15675973
> 
> 赞同：0
> 
> 时间：2013-03-28T06:57:37.717
> 
> 标签：c#, ironpython

问题是;

```
 var instance = mScriptScope.GetVariable("Group1"); //here I can get the instance named "Group1" ,type is IronPython.Runtime.Types.OldInstance
    mScriptScope.Engine.Execute(context);//but here I excute Group1.Collection1.Tag1 =10 throw an UnBoundNameException :  global name 'Group1' is not defined 
```

mScriptScope 是从 .py 文件创建的：

```
# -*- coding: utf-8 -*- 

import RTDBBase 
from RTDBBase import *
Group1 = PRTDBTagGroup("Group1") 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:21:17.390

好的，如果要执行 Group1.Collection1.Tag1 =10，我应该这样做：

```
 ScriptSource source = mScriptScope.Engine.CreateScriptSourceFromString("Group1.Collection1.Tag1 =10", SourceCodeKind.Statements);
  source.Execute(mScriptScope); 
```

# android - Android中的列表视图错误

> ID：15675975
> 
> 赞同：-4
> 
> 时间：2013-03-28T06:57:47.003
> 
> 标签：android

这是我的代码，我在这一行遇到错误：

```
String[] opt = getResources().getStringArray(R.array.MainActivity); 
```

所以，请检查我的代码并告诉我如何解决该行中的错误

```
public class MainActivity extends ListActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    try {
        String[] opt = getResources().getStringArray(R.array.MainActivity);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ListView lv = getListView();
        ListAdapter la = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, opt);
        lv.setAdapter(la);
        lv.setTextFilterEnabled(true);
        lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                switch (position) {
                case 0:
                    Intent firstIntent = new Intent(MainActivity.this,
                            After1.class);
                    startActivity(firstIntent);
                    break;
                case 1:
                    Intent secondIntent = new Intent(MainActivity.this,
                            After2.class);
                    startActivity(secondIntent);
                    break;

  default:
                    break;
                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:09:40.707

你需要的例子，你可以按照这个：

```
 import android.app.ListActivity;
      import android.os.Bundle;
      import android.view.View;
     import android.widget.AdapterView;
   import android.widget.ArrayAdapter;
     import android.widget.ListView;
      import android.widget.TextView;
      import android.widget.Toast;
      import android.widget.AdapterView.OnItemClickListener;
  public class ListFruitActivity extends ListActivity {

static final String[] FRUITS = new String[] { "Apple", "Avocado", "Banana",
        "Blueberry", "Coconut", "Durian", "Guava", "Kiwifruit",
        "Jackfruit", "Mango", "Olive", "Pear", "Sugar-apple" };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // no more this
    // setContentView(R.layout.list_fruit);

    setListAdapter(new ArrayAdapter<String>(this, R.layout.list_fruit,FRUITS));

    ListView listView = getListView();
    listView.setTextFilterEnabled(true);

    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // When clicked, show a toast with the TextView text
            Toast.makeText(getApplicationContext(),
            ((TextView) view).getText(), Toast.LENGTH_SHORT).show(); //here instead of showing toast message you can start new activity using intent 

        }
    });

}

} 
```

开始新的活动

```
 Intent intent = new Intent(this,NewActivity.class);
         startActivity(intent); 
```

这里有一些教程可以帮助你

[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

[http://www.androidhive.info/2011/10/android-listview-tutorial/](http://www.androidhive.info/2011/10/android-listview-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:10:31.507

只有当您在 string.xml 中添加字符串数组时，才会定义 R.array。所以首先他们使用 R.array.array_name 引用它

**字符串.xml**

```
<?xml version="1.0" encoding="utf-8"?><resources>    <string-array        name="string_array_name">        <item            >text_string</item>    </string-array></resources> 
```

**在活动中**

getStringArray(R.array.string_array_name);

# asp.net - Web 用户控件通过 XML 填充项目

> ID：15675977
> 
> 赞同：4
> 
> 时间：2013-03-28T06:57:54.133
> 
> 标签：asp.net, web-user-controls

我有一个 Web 用户控件名称作为图表控件，我在图表控件中有一个下拉列表我想像这样填充图表控件的下拉列表：

```
<UC:ChartControl ID="abc" runat="server">
        <ChartDropDownItems>
            <asp:ListItem Text="Graph_Amount_Items_Sold" Value="0"></asp:ListItem>
            <asp:ListItem Text="Graph_Ranking" Value="1"></asp:ListItem>
            <asp:ListItem Text="Graph_Share_Amount_Items_Sold" Value="2"></asp:ListItem>
            <asp:ListItem Text="Graph_Share_Unit_items_Sold" Value="3" Selected="True"></asp:ListItem>
            <asp:ListItem Text="Graph_Unit_items_Sold" Value="4"></asp:ListItem>
        </ChartDropDownItems>
    </UC:ChartControl> 
```

在 .cs 代码中

```
 [DefaultProperty("ChartDropDownItems"),
    ParseChildren(true, "ChartDropDownItems"), PersistChildren(false),
    ToolboxData("<{0}:ChartControl runat=\"server\"> </{0}:ChartControl>")]

    public partial class ChartControl : System.Web.UI.UserControl
    {
     private List<ListItem> lst;
            [Browsable(true)]
            [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
            [PersistenceMode(PersistenceMode.InnerProperty)]

            public List<ListItem> ChartDropDownItems
            {
                set
                {
                    lst = value;
                    Bind_ddChartChange();
                }
            }
     private void Bind_ddChartChange()
            {

                if (lst != null)
                {
                    ddChartChange.DataSource = lst;
                    ddChartChange.DataTextField = "Text";
                    ddChartChange.DataValueField = "Value";
                    ddChartChange.DataBind();
                    ListItem li = lst.Find(x => x.Selected == true);
                    ddChartChange.SelectedValue = li.Value;

                }
            }
} 
```

当我编译和运行它对我来说很好，但在设计时它说

```
"Error Creating Control"
"Type'System.Web.UI.Control' does not have a public property named 'ChartDropDownItems'" 
```

即使在设计时我也想工作。任何机构都可以相应地建议我吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T20:02:42.773

好的，经过数小时的 google-fu，我得出结论，要么无法在设计器中看到内部子标签，要么没有人费心给出如何做到这一点的好答案。

根据[wonkim00 的回答](https://stackoverflow.com/a/6885535/1043380)，这是来自这个[MSDN 网站](http://msdn.microsoft.com/en-us/library/36574bf6.aspx#Y700)的引述：

> 注意：**Visual Studio 设计器不支持模板化的 ASP.NET 用户控件。**但是，您可以在 Visual Studio 中编译和运行此示例。为此，当您创建 ASP.NET 页面来测试此代码时，请将页面中所有设计器生成的代码替换为示例清单中的代码和标记。

但是，正如您所知，这是针对模板的通知，但在我尝试使用许多其他数据类型（列表、集合、数组列表）之后，它似乎是相同的。

可能有一个我们都缺少的属性使它在设计器中可见，但它似乎非常隐藏（请任何人，随时证明我错了）。

我只是觉得代码编译和工作很奇怪，但你不能让设计师闭嘴因为缺少属性。

我使用的链接：

*   [具有 PersistenceMode.InnerProperty 的 ASP NET 自定义控件，包括服务器控件](http://am-blog.no-ip.org/BlogEngine/post/2010/04/13/ASP-NET-Custom-Control-with-PersistenceModeInnerProperty-using-Server-Controls.aspx)
*   [Aleris 对具有自定义子元素的 ASP.NET 中的自定义元素的回答](https://stackoverflow.com/a/673659/1043380)
*   [MSDN 如何：创建模板化 ASP.NET 用户控件（请参阅评论）](http://msdn.microsoft.com/en-us/library/36574bf6%28VS.80%29.aspx)
*   [如何让设计模式适用于模板化用户控件？](https://stackoverflow.com/questions/1108699/how-do-i-get-design-mode-to-work-for-templated-user-controls)
*   [如何修复 Visual Studio 错误“System.Web.UI.UserControl”不包含定义](http://www.gotknowhow.com/articles/how-to-fix-visual-studio-error-system-web-ui-usercontrol-does-not-contain-a-definition-for)

也许这些会有所帮助，也许不会。很抱歉这个坏消息，但这是我能找到的最好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:29:42.527

确保你的类被调用`ChartControl`并且它`UserControl`不是从`Control`这个派生的可能是这个错误的原因，希望这会有所帮助。

# c++ - 深层复制不起作用

> ID：15675978
> 
> 赞同：0
> 
> 时间：2013-03-28T06:58:02.907
> 
> 标签：c++, destructor, deep-copy

在以下示例中，我正在做 deepcopy，一切正常，但是当 obj2 超出范围时，析构函数正在调用并且它在析构函数内崩溃，所以请帮助我的代码有什么问题：

```
#include "stdafx.h"
#include <windows.h>
#include <stdlib.h>
#include <iostream>
#include <conio.h>
using namespace std;

class ClassA
{
     private:
        char *str;
        int id;

     public :
        ClassA(int x, char *s)
        {
            int len = strlen(s)+1;
            str = new char[len];
            id = x;
            strcpy(str, s);
        }
       ~ClassA()
        {
            delete [] str;
        }
        ClassA(ClassA &obj)
        {
            id = obj.id;
            int len = strlen(obj.str);
            str = new char[len] + 1;
            strcpy(str, obj.str + 1);
        }
        void disply()
        {
            cout << id << " " << str << endl;
        }  
 };

 int main()
 {
   ClassA Obj1(5, "hello");
   {
    ClassA Obj2 = Obj1;
    Obj2.disply();
   }
   Obj1.disply();
    return 0;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:01:34.113

您需要遵循[*三规则*](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)并提供赋值运算符。但是这条线看起来很可疑：

```
str = new char[len] + 1;
strcpy(str, obj.str + 1); 
```

你大概是说

```
str = new char[len + 1];
strcpy(str, obj.str); 
```

完成课程修复后，您可以`std::string`使用`char*`.

```
class ClassA
{
 private:
    std::string str;
    int id;
 public:
  // no copy constructor or assignment operator or destructor required
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:59:56.943

您需要一个赋值运算符。您需要像这样编写复制构造函数

```
ClassA(const ClassA &obj) 
```

常量非常重要。

另外你有几个错误

```
 int len = strlen(obj.str);
        str = new char[len] + 1;
        strcpy(str, obj.str + 1); 
```

应该

```
 int len = strlen(obj.str);
        str = new char[len + 1];
        strcpy(str, obj.str); 
```

# java - java swings中需要帮助，创建一个简单的表单

> ID：15675984
> 
> 赞同：-4
> 
> 时间：2013-03-28T06:58:10.473
> 
> 标签：java, swing

我是 java swings 的新手。其实我有以下情况：

```
Case1 : “the collection was guaranteed.i'm sure it is” 
Case2 :  the collection was guaranteed.i'm sure it is
Case2 :  the collection was guaranteed...i'm sure it is 
```

这些案例我想用一个摆动窗口来反映。它将接受这些案例。

条件 ：

在`case1`, 由于文本被 "" 包围，它不应该做任何事情。

第二种情况，由于数据没有被“”包围，所以“.” 应以黄色突出显示（如果“.”为单个）。

在第三种情况下，正弦“。” 在另一个“.”之前或之后 它应该保持原样。

有人建议我可以使用秋千来完成，请给我一个关于如何进行的想法。在这里，我想要一个表单，我们可以在其中粘贴此文本和一个名为“清洁”的按钮，一旦它被点击，黄色突出显示应该出现在句点上。还请向我推荐一些关于摇摆的好参考。

我尝试过的如下。这还没有完全完成，因为我不知道如何启动它以及如何进行

```
import java.awt.Color;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.event.DocumentListener;
import javax.swing.text.BadLocationException;
import javax.swing.text.DefaultHighlighter;
import javax.swing.text.Highlighter;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**

 * @author u0138039
 */
public class NewJPanel extends javax.swing.JPanel {

    /**
     * Creates new form NewJPanel
     */
    public NewJPanel() {
        initComponents();
        createGUI();

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jFrame1 = new javax.swing.JFrame();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jButton1 = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTextArea2 = new javax.swing.JTextArea();

        javax.swing.GroupLayout jFrame1Layout = new javax.swing.GroupLayout(jFrame1.getContentPane());
        jFrame1.getContentPane().setLayout(jFrame1Layout);
        jFrame1Layout.setHorizontalGroup(
            jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        jFrame1Layout.setVerticalGroup(
            jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );

        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);
        jScrollPane1.setViewportView(jTextArea1);

        jButton1.setText("Clean");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jTextArea2.setColumns(20);
        jTextArea2.setRows(5);
        jScrollPane2.setViewportView(jTextArea2);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1)
            .addGroup(layout.createSequentialGroup()
                .addGap(472, 472, 472)
                .addComponent(jButton1)
                .addContainerGap(579, Short.MAX_VALUE))
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane2))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 367, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 398, Short.MAX_VALUE)
                .addContainerGap())
        );
    }// </editor-fold>                        

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        hilit = new DefaultHighlighter();
        jTextArea2=jTextArea1.getText();
 Scanner scan=new Scanner(jTextArea1.getText());
    System.out.println("enter some text \n");
    String line= scan.nextLine();
   if(line.contains("\""))
   {
       System.out.println("Notining to do");
       System.exit(0);
   }
    int dot1=  line.indexOf(".");
    int dot2=line.lastIndexOf(".");
    if(dot1==dot2)
    {
       jTextArea2.setText(line);
            try {
                hilit.addHighlight(dot1,dot1+1, painter);
            } catch (BadLocationException ex) {
                Logger.getLogger(NewJPanel.class.getName()).log(Level.SEVERE, null, ex);
            }
       jFrame1.setVisible(true);
    }
    if(dot1==dot1+dot2 || dot1==dot2-dot1)
    {
        JOptionPane.showMessageDialog(jFrame1,"2 dots");
    }
    }                                        

    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JFrame jFrame1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JTextArea jTextArea2;
    // End of variables declaration                   
    private Highlighter hilit=null;
    private  final Highlighter.HighlightPainter painter = new DefaultHighlighter.DefaultHighlightPainter(Color.yellow);

    private void createGUI() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:58:11.517

我做了一个简短的例子。

*   根据您的需要使用适当的 LayoutManager
*   我检查了你的大多数情况，可能不是全部
*   我用 a`Highlighter`来突出显示 '.'

![在此处输入图像描述](../Images/b3ac7366e17f96106540d615f3a90a54.png)

```
 import java.awt.Color;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.util.Scanner;
    import java.util.logging.Level;
    import java.util.logging.Logger;
    import javax.swing.*;
    import javax.swing.SwingUtilities;
    import javax.swing.text.BadLocationException;
    import javax.swing.text.DefaultHighlighter;
    import javax.swing.text.Highlighter;

    /**
     *
     * @author rohan
     */
    public class TestPeriodHighlight {
        private JFrame frame;
        private JPanel panel;
        private JTextArea jTextArea;
        private JButton butt;
        private Highlighter hilit=null;
        private  final Highlighter.HighlightPainter painter = new DefaultHighlighter.DefaultHighlightPainter(Color.yellow);
    TestPeriodHighlight () throws BadLocationException
    {
    createGUI();
    process();
    }
    public void process() throws BadLocationException
    {
     hilit = new DefaultHighlighter();
     jTextArea.setHighlighter(hilit);
    Scanner scan=new Scanner(System.in);
        System.out.println("enter some text \n");
        String line= scan.nextLine();
       if(line.contains("\""))
       {
           System.out.println("Notining to do");
           System.exit(0);
       }
        int dot1=  line.indexOf(".");
        int dot2=line.lastIndexOf(".");
        if(dot1==dot2)
        {
           jTextArea.setText(line);
           hilit.addHighlight(dot1,dot1+1, painter);
           frame.setVisible(true);
        }

    }
    public void createGUI()
    {
    butt=new JButton("clear");
    frame=new JFrame();
    frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);
    panel=new JPanel();
    jTextArea=new JTextArea(20,20);
    panel.add(jTextArea);
    panel.add(butt);
     butt.addActionListener(new ActionListener() {

                public void actionPerformed(ActionEvent ae) 

                {
                jTextArea.setText("");
                }

              });
    frame.add(panel);
    frame.pack();
    frame.setVisible(false);

    }

    public static void main(String[] args)
    {
    SwingUtilities.invokeLater(new Runnable() {

                public void run() {
                  try
                  {
                        new TestPeriodHighlight();
                    } catch (BadLocationException ex) {
                        Logger.getLogger(TestPeriodHighlight.class.getName()).log(Level.SEVERE, null, ex);
                 }

                }
                }
                );

        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T08:29:57.923

没有太多的挥杆经验，最简单的方法是使用HTML。

使用 JTextPane（或 JEditorPane）。

```
textPane.setContentType("text/html"); 
```

如果通过代码设置，请确保字符串以`"<html>"`:

```
textPane.setText("<html>“the collection was guaranteed.i'm sure it is”"); 
```

现在您可以使用 HTML 进行标记、着色等：

```
"~~~<span style='background-color:#ffff00'>.</span>~~~" 
```

文档更改侦听器或键侦听器可能每次都重新添加标记。

```
Document doc = textPane.getDocument();
String plainText = doc.getText(0, doc.getLength()); 
```

对于逻辑正则表达式可以使用，即所谓的前瞻。单独一章。

# sql - 从两个连接表中选择数据

> ID：15675986
> 
> 赞同：1
> 
> 时间：2013-03-28T06:58:17.987
> 
> 标签：sql, select

我有 2 张桌子： `Users`和`Cars`. 这些表连接在第三个表中：`Users_Cars_Join`.

是否有任何快速（直接）方法可以从两个表（`Cars`，`Users`）中选择数据，而不使用`'inner join'`语句来加入`Users`，`Users_Cars_Join`而不是再使用一次来`Users_Cars_join`加入`Cars`？

我想知道它应该如何正确和专业地完成。

汽车：

*   ID
*   姓名

用户：

*   ID
*   姓名

用户_汽车_加入：

*   ID
*   用户身份
*   车牌号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:12:37.330

没有办法绕过链接表，但如果你一直害怕编写连接，你可以创建一个视图来做到这一点

```
CREATE VIEW UsersCars AS 
SELECT  c.ID AS CarID
        , c.Name AS CarName
        , u.ID AS UserID
        , u.Name AS UserName
FROM    Cars c
        INNER JOIN Users_Cars_Join ucj ON ucj.CarID = c.ID
        INNER JOIN Users u ON u.ID = ucj.UserID 
```

使用视图就像

```
SELECT * FROM UsersCars 
```

请参阅此[SQL Fiddle](http://www.sqlfiddle.com/#!3/cbdea/1)以获取演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:05:38.737

您可以使用旧的 stye 加入这样的表：

```
SELECT c.id, c.name, u.id, u.name, ...
  FROM cars c, users u, user_cars_join uc
 WHERE u.id = uc.userid
   AND c.id = uc.carid 
```

注意事项：

1.  该`user_cars_join`表的存在是因为它表示用户与其汽车之间的多对多关系。如果从结构中删除此表，则`users`和`cars`表不再相关。

2.  您需要了解一对一、一对多和多对多关系的现象。

    *   一对一关系是一组中的一个实体仅与另一组中的一个实体相关。在您的情况下，一个用户只拥有一辆车，这是不切实际的。一个人可以拥有多辆汽车。

    *   一对多关系是一组中的一个实体与另一组中的多个实体相关，并且另一组中的一个实体仅与第一组中的一个实体相关。在您的情况下，一个用户拥有多辆汽车，但一辆车由一个用户拥有。你可以有这种关系，尤其是当汽车有注册号时。架构看起来像这样：

        ```
        User (userid, name)
        car_sales (carid, userid, registration_number)
        Car (carid, name, brand, model) 
        ```

        请注意，`userid`表中的`car_sales`表示哪个用户拥有这辆车。此外，`carid`in`car_sales`表指的是唯一`carid`的 in`car`表。

        另请注意，在此模型中，一个用户可以拥有多辆汽车。一种型号的汽车可以将多个实例（其中的项目）出售给多个用户。

        这是表示这些关系的最广泛使用和可接受的模型。

    *   如您的示例中所实现的，多对多关系是指一组中的多个实体与另一组中的多个实体相关，反之亦然。必须有一个单独的关系表来表示实体之间的关系，在您的情况下就是该`user_car_join`表。

# css - jQuery 在 Windows Phone 8 手机间隙应用程序中不能很好地渲染角落

> ID：15675988
> 
> 赞同：17
> 
> 时间：2013-03-28T06:58:26.940
> 
> 标签：css, html, cordova, jquery-mobile, windows-phone-8

我有一个用于 Windows Phone 8 的 Phonegap 应用程序，它在内部使用网页。我在该 div 内`<div>`带有选项的元素内制作了一个按钮。`data-role="footer"`按钮也是一个带有选项的`<a>`元素。`data-role="button"`

按钮的渲染并不总是很好，出现了一些边角问题，边角不是圆角，但它是一个 90 度的白色圆角，而不是蓝色的漂亮圆角。

Windows Phone 8 是否存在不支持某些 HTML5 功能和/或 jQuery 功能的已知问题？

**编辑1：**

来源（基本部分）：

测试按钮.java：

```
public class TestButton extends Widget {
       private static TestButtonUiBinder uiBinder = GWT.create(TestButtonUiBinder.class);

       interface TestButtonUiBinder extends UiBinder<AnchorElement, TestButton> {}

       AnchorElement mAnchor;

       public TestButton() {

            mAnchor = uiBinder.createAndBindUi(this);

            setElement(mAnchor);

            mAnchor.setAttribute("data-role", "button");
       }
} 
```

..和TestViewImpl.java：

```
 @UiField
    TestButton mBackButton;

    @Override
    public TestButton getBackButton() {
        return mBackButton;
    } 
```

..和TestViewImpl.ui.xml：

```
 <b:TestButton ui:field="mBackButton" dataIcon="arrow-l"
                title="{mI18n.back}" toolbarRight="true" /> 
```

**编辑2：**

[IE9 中 <a> 上的边框半径错误](https://stackoverflow.com/questions/4652793/border-radius-bug-on-a-in-ie9)指出，当某些 css3 标签组合不能很好地协同工作时，由于 css3 的不成熟性质可能会出现类似问题。

现在，我的按钮在 Firefox 上呈现如下：

```
<a style="font-weight: bold;" data-role="button" data-icon="check" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="b" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-icon-left ui-btn-hover-b ui-btn-up-b"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Back</span><span class="ui-icon ui-icon-check ui-icon-shadow">&nbsp;</span></span></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T09:50:11.147

除非有人提出任何解决方法，否则我目前的调查显示结果是这是 jQuery 本身的一个错误，解决方法应该在 jQuery 之外找到或修复 jQuery 本身。

***来源：**请查看 jQuery 演示页面，例如[http://jquerymobile.com/demos/1.1.1/docs/buttons/buttons-themes.html](http://jquerymobile.com/demos/1.1.1/docs/buttons/buttons-themes.html)`Swatch "a"`并使用 wp8 设备从演示页面观察例如。你会观察到奇怪的角落。我测试了 Lumia 920。*

***解决方案：**等待 1.4 并希望最好，或者手动组合 1.2 和 1.3 并选择两者中最好的部分。*

**编辑后的解决方案：**是的，1.4.0 在那里，问题似乎已经解决了 :) 他们改变了整个外观，所以问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T07:26:22.733

根据[此资源](http://mobilehtml5.org/)，Windows Phone 7.5 及更高版本完全支持 CSS 3 基本样式（不透明度、背景、文本效果、圆角），这意味着您遇到的渲染问题不是由于不兼容造成的。

您可能想尝试使用`-ms` [前缀](http://peter.sh/experiments/vendor-prefixed-css-property-overview/)来确保完整的 IE 9+ CSS3 功能，例如：

```
div {
    -ms-border-radius: 2px;
        border-radius: 2px;
} 
```

*（浏览器制造商采用 CSS 前缀来实现他们的 CSS3 草案功能版本。随着标准的成熟，这些前缀在许多情况下已经过时。在其他情况下，它们仍然是必需的；[阅读此处](http://www.impressivewebs.com/dropping-ms-vendor-prefixes-ie10/)了解它们在 IE10 中的继续使用。）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-24T13:33:08.980

尝试在 WP8 的 WebBrowser 组件中呈现圆形按钮时遇到了类似的问题，`border-radius:`但结果却是方形的。

解决方案：添加：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

到该`<head>`部分的顶部

# sql - 从表中找到不同的 R_ID

> ID：15675989
> 
> 赞同：0
> 
> 时间：2013-03-28T06:58:39.387
> 
> 标签：sql, sql-server, tsql, select

```
Create table Client_Registration
(
    Client_ID int,
    Rad_ID int 
);

INSERT INTO Client_Registration (Client_ID,Rad_ID)
VALUES ('1','1');
INSERT INTO Client_Registration (Client_ID,Rad_ID)
VALUES ('2','1');
INSERT INTO Client_Registration (Client_ID,Rad_ID)
VALUES ('3','2');
INSERT INTO Client_Registration (Client_ID,Rad_ID)
VALUES ('4','2');
INSERT INTO Client_Registration (Client_ID,Rad_ID)
VALUES ('1','1');

select client_id,distinct Rad_ID from Client_registration
ORDER BY client_id, Rad_ID; 
```

我必须从表中找到不同的 R_ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:27:00.923

如何`client_ID`使用`MAX()`or聚合列`MIN()`？

```
SELECT MAX(client_id) client_id, Rad_ID
FROM   Client_registration
GROUP  BY Rad_ID
ORDER  BY client_id, Rad_ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/c0e42/19)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:01:00.387

它应该是

```
SELECT DISTINCT client_id, Rad_ID
FROM Client_registration
ORDER BY client_id, Rad_ID 
```

请注意，没有分号。SQL Server 不需要分号。

# c# - 将表格复制到另一个应用程序

> ID：15675996
> 
> 赞同：-3
> 
> 时间：2013-03-28T06:59:24.970
> 
> 标签：c#

我创建了一个名为“A”的简单应用程序；在 A.Form1 我创建了一个按钮。当我单击 button1 时，它会发出一条消息“Hello”；（我在那里涉及 MessageBox.Show）

我创建了另一个应用程序，说它的名称为“B”，我刚刚将 A.Form1 设计器和代码和位置复制到 B.Form1 设计器和代码。问题是当我运行 B 时， B 中的 button1 不起作用。

将 A 应用程序中的表单复制到应用程序 B 的正确方法以及整个控件如何工作。

谢谢你巴勃罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:01:45.600

创建时，`Form1`您订阅了`button1.Click`. （当你 dbl 单击 btn 以添加语句时）

但是在没有订阅的情况`Form2`下`button1.Click`。`Form_Load`您可以在事件上添加缺少的 Click事件订阅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:02:08.163

它应该可以工作，但是如果按钮不起作用，请检查映射并查看缺少的内容...

使用导航并查看处理点击的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:04:17.293

您可以在表格B中引用表格A中的代码

表格 A 中的代码

```
public static void displayMessage() {
   MessageBox.Show("Hello World!");
} 
```

表格 B 中的代码

```
private void showMessage() {
    FormA.displayMessage();
} 
```