# StackOverflow 问答 13154000-13154999

# javascript - 如何触发一个函数 onchange 一个 div？

> ID：13154004
> 
> 赞同：0
> 
> 时间：2012-10-31T08:37:29.107
> 
> 标签：javascript, ajax

这是一个事实证明很难在网上找到答案的问题。

假设用户运行 ajax 函数 onclick 来填充 div 的内容。

但是，如果 ajax 输出是 php，并且对于那个 onclick，我希望页面上的其他 div 以依赖于 div1 内容的方式进行更改怎么办？

这意味着我需要等待 div1 实际更改，以便我可以使用 php 计算的 ajax 输出来相应地调整 div2。

经过一些测试，我发现我无法在第一个 ajax 函数的末尾添加对第二个 ajax 函数的调用，因为它似乎在第一个 ajax 调用的 div 内容实际更改之前运行。

那么如何触发 ajax 调用 onchange 的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:39:40.143

当调用完成时，所有 ajax 调用都需要一个回调来运行，把你的逻辑放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:40:02.000

你可以使用 Jquery

```
$('#div1').change(function(){
    doAjax( $(this).html() );
}); 
```

或者在ajax的回调中

```
$.ajax({
    url: 'http://yoururl.com',
    type: 'post',
    data: { key: value },
    success: function( data ){
        doAjax( data );
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:44:41.857

如果您知道 jquery，那么您应该尝试以下方法：

```
 $.ajax({
                traditional: true,
                type: "post",
                url: '<your_url>',
                beforeSend: function () {
                      //your logic to perform operation before ajax request
                },
                data: {
                    //data to send
                },
                success: function(response) {
                   //your logic to perform operation after ajax request
                   //here make another ajax request
                }
            }); 
```

# ios6 - 点击动画 UICollectionViewCell

> ID：13154008
> 
> 赞同：12
> 
> 时间：2012-10-31T08:38:03.093
> 
> 标签：ios6, core-animation, uicollectionview, uicollectionviewcell

我想`UICollectionViewCell`在用户点击单元格时开始一些动画。我的想法是选择相应的单元格`didSelectItemAtIndexPath`并触发动画。但是，这不起作用：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    // animate the cell user tapped on
    ProductCollectionViewCell* cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ProductReuseID" forIndexPath:indexPath];

    [UIView animateWithDuration:5.0
                          delay:0
                        options:(UIViewAnimationOptionAllowUserInteraction)
                     animations:^{
                         NSLog(@"animation start");
                         [cell.layer setBackgroundColor:[UIColor colorWithRed: 180.0/255.0 green: 238.0/255.0 blue:180.0/255.0 alpha: 1.0].CGColor];
                     }
                     completion:^(BOOL finished){
                         NSLog(@"animation end");
                         [cell.layer setBackgroundColor:[UIColor whiteColor].CGColor];
                     }
    ];
} 
```

实际上，动画同时开始和结束（虽然`animateWithDuration`设置为 5）。下一次尝试是跳过动画并简单地设置例如不同的边框样式：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    // animate the cell user tapped on
    ProductCollectionViewCell* cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ProductReuseID" forIndexPath:indexPath];

    [cell.layer setBorderWidth:5.0f];
} 
```

但是，这并没有改变任何东西（可能是因为我必须手动重绘单元格？）。

**当用户点击 UICollectionViewCell 时，您有什么想法吗？**

亲切的问候，克里斯蒂安

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-27T03:44:12.287

您似乎获得了错误的单元格。发送`dequeueReusableCellWithReuseIdentifier:forIndexPath:`消息不会*在*第二个参数中的indexPath处获取视图中正在使用的cell，而是将一个之前使用过但可复用的cell出列；如果没有可重复使用的单元格，则创建一个新单元格。请参阅下面的参考文献 1。

更换：

```
ProductCollectionViewCell* cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ProductReuseID" forIndexPath:indexPath]; 
```

和：

```
ProductCollectionViewCell* cell = [collectionView cellForItemAtIndexPath:indexPath]; 
```

在上面的代码中，应该为您提供合适的单元格来使用。

这是您的第一个示例，已重写。

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath(NSIndexPath *)indexPath
{
    // animate the cell user tapped on
    UICollectionViewCell  *cell = [collectionView cellForItemAtIndexPath:indexPath];    
    [UIView animateWithDuration:5.0
            delay:0
            options:(UIViewAnimationOptionAllowUserInteraction)
                animations:^{
                    NSLog(@"animation start");
                    [cell setBackgroundColor:[UIColor colorWithRed: 180.0/255.0 green: 238.0/255.0 blue:180.0/255.0 alpha: 1.0]];
                }
                completion:^(BOOL finished){
                    NSLog(@"animation end");
                    [cell setBackgroundColor:[UIColor whiteColor]];
                }
    ];
} 
```

参考：

*   [http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html#//apple_ref/occ/cl/UICollectionView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html#//apple_ref/occ/cl/UICollectionView)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-18T10:21:12.660

您可以按照代码在选择/点击具有自定义动画持续时间的 UICollectionViewCell 时自定义动画。所以，你不需要改变它的背景颜色。

使用以下选项 - UIViewAnimationOption

*   UIViewAnimationOptionCurveEaseIn
*   UIViewAnimationOptionCurveEaseOut
*   UIViewAnimationOptionAllowUserInteraction

    # UICollectionViewDelegate - didSelectItemAtIndexPath 方法

    ```
    UICollectionViewCell *uviCollectionCell =  [collectionView cellForItemAtIndexPath:indexPath];

    [UIView animateWithDuration:0.4 delay:0 options:(UIViewAnimationOptionCurveEaseIn) animations:^{
            NSLog(@"animation start");
            CALayer *layer = uviCollectionCell.layer;
            CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
            rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, 15.0f * M_PI / 180.0f, 1.0f, 0.0f, 0.0f);
            layer.transform = rotationAndPerspectiveTransform;
    } completion:^(BOOL finished) {
            [UIView animateWithDuration:0.3 delay:0 options:(UIViewAnimationOptionCurveEaseOut) animations:^{
                NSLog(@"animation end");
                CALayer *layer = uviCollectionCell.layer;
                CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
                rotationAndPerspectiveTransform.m24 = 0;
                rotationAndPerspectiveTransform =CATransform3DRotate(rotationAndPerspectiveTransform, 0.0f * M_PI / 180.0f, 1.0f, 0.0f, 0.0f);
                layer.transform = rotationAndPerspectiveTransform;
            } completion:nil];
        }
    ]; 
    ```

# c# - 如何在使用 SqlBulkCopy 时比较 excel 单元格值的值？

> ID：13154009
> 
> 赞同：0
> 
> 时间：2012-10-31T08:38:10.523
> 
> 标签：c#, asp.net, sql-server, excel

我正在将 Excelsheet 导入到 sql server 数据库中，我需要在导入工作表之前检查某些内容，例如我有一个名为 passport 的列，它的值必须仅以字母开头，并且必须将其余字符作为数字（仅）。

```
 DataTable dt7 = new DataTable();
            dt7.Load(dr);
            DataRow[] ExcelRows = new DataRow[dt7.Rows.Count];
            // Bulk Copy to SQL Server

            using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
            {
                bulkCopy.DestinationTableName = "ExcelTable";
                dt7.Rows.CopyTo(ExcelRows, 0);

                for (int i = 0; i < ExcelRows.Length; i++)
                {
                    if (ExcelRows[i]["data"] == DBNull.Value)
                    {
                        // Include any actions to perform if there is no date
                        //ExcelRows[i]["data"] = Convert.ToString(0);
                    }
                    else
                    {
                        DateTime oldDate = Convert.ToDateTime(ExcelRows[i]["data"]).Date;
                        DateTime newDate = Convert.ToDateTime(oldDate).Date;
                        ExcelRows[i]["data"] = newDate.ToString("yyyy/MM/dd");
                    }

                }
                bulkCopy.WriteToServer(ExcelRows); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:55:22.807

不，你不能。您可以做的是在批量操作之前执行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:41:49.903

您想在上传 excel 表时执行 excel 单元格值的验证。两种方式：

1.  将 Excel 数据放入数据表中，并通过它进行验证并记录差异。完成验证后，向用户显示错误，或者如果没有更多错误，请执行 sqlbulkcopy。所有这些都是在 c# 级别完成的。

2.  在 sql 方面，将 Excel 数据放入数据表中，直接在数据库中的临时表中执行 sqlbulkcopy。然后调用一个存储过程，它将验证批量上传的数据并发送错误。如果有错误提醒用户，则进行批量复制或调用存储过程将数据从临时表中提取到真实表中。

你选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:53:17.517

简单的答案是`'NO'`。执行 SqlBulk 操作时无法验证。您可以做的是`Datatable`在执行 SqlBulk 操作之前验证。

```
private bool Validate(Datatable dt)
{
     //Perform your validation
     // return true/false 
}

        DataTable dt7 = new DataTable();
        dt7.Load(dr);
        DataRow[] ExcelRows = new DataRow[dt7.Rows.Count];
        // Bulk Copy to SQL Server

        // Perform your validation here. If not validated then skip with some message.
        if(!Validate(dt7))
        {
             //Show Message
             return;
        }            

        using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
        {
            bulkCopy.DestinationTableName = "ExcelTable";
            dt7.Rows.CopyTo(ExcelRows, 0);

            for (int i = 0; i < ExcelRows.Length; i++)
            {
                if (ExcelRows[i]["data"] == DBNull.Value)
                {
                    // Include any actions to perform if there is no date
                    //ExcelRows[i]["data"] = Convert.ToString(0);
                }
                else
                {
                    DateTime oldDate = Convert.ToDateTime(ExcelRows[i]["data"]).Date;
                    DateTime newDate = Convert.ToDateTime(oldDate).Date;
                    ExcelRows[i]["data"] = newDate.ToString("yyyy/MM/dd");
                }

            }
            bulkCopy.WriteToServer(ExcelRows); 
```

# google-app-engine - GAE 1 Mb 实体限制

> ID：13154012
> 
> 赞同：2
> 
> 时间：2012-10-31T08:38:20.933
> 
> 标签：google-app-engine

我有一个小数据集，大约有 2000 行，而实体只有 4 个字符串字段和一个长 id。当我填充数据库在本地运行时没有问题，但是当我在 appengine 上运行它时，在达到 1 Mb 限制之前，我只将 867 条记录输入数据库。

我错过了什么？

他 GAE 文档指出：

“ App Engine Datastore 使用分布式架构来自动管理对超大型数据集的扩展”

是否有关于如何绕过这个严重限制的讨论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:32:33.920

我似乎您将所有数据放入一个实体中，而不是每“行”使用 1 个实体。您使用什么数据访问 API？听起来像低级 API，这很好。确定您没有将所有实体都放在一个大型父实体中吗？或者你使用的是非常大的字符串？使用 apppot 控制台中的数据存储查看器查看您当前的数据（在错误发生之前写入数据存储的部分）。您应该很容易发现那里的异常情况。

# json - 用 sencha 解析 Json

> ID：13154015
> 
> 赞同：0
> 
> 时间：2012-10-31T08:38:33.313
> 
> 标签：json, extjs

我有这种格式的json

```
[
  {
    "docid": "1",
    "doc_title": "Dato' Dr.",
    "doc_name": "xyz",
    "doc_code": "001",
    "doc_category": "3",
    "doc_subcategory": "",  
    "id": "0"
  },
  {
    "docid": "1",
    "doc_title": "Dr.",
    "doc_name": "ABC",
    "doc_code": "002",
    "doc_category": "4",
    "doc_subcategory": "",  
    "id": "0"
  }
] 
```

有多条记录，我刚刚包含了两条记录

这是我在 sencha 中的模型和解析代码

```
Ext.define('User', {
                           extend: 'Ext.data.Model',
                           config: {
                           fields: [
                                    {name: 'docid', type: 'string'},
                                    {name: 'doc_title',  type: 'string'},
                                    {name: 'doc_name',       type: 'string'},
                                    {name: 'doc_code',  type: 'string'},
                                    {name: 'doc_category', type: 'string'},
                                    {name: 'doc_subcategory',       type: 'string'},   
                                    {name: 'id',       type: 'string'},
                                   ]
                           }
                           }); 
```

解析json

```
var store = Ext.create('Ext.data.Store',
                                 {
                                     autoLoad: true,
                                     model: "User",

                                     listeners:
                                     {
                                        beforeload: function (store,operation,eOpts)
                                        {
                                        }
                                     },                                          

                                     proxy: {
                                        type: 'ajax',
                                        url : 'http://someurl/doctor/search',

                                        reader: {
                                        type: 'json',
                                        rootProperty: 'users',

                                       }
                                      }                               

                                  }); 
```

问题是，无论 JSON 中有多少条记录，我都只能从 Json 获得最后一条记录。

如果我删除该`id`字段（注意 Json 数据中的 id 字段）它工作正常，我可以解析所有记录。

为什么这样做？我怎样才能得到所有用 sencha 解析的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:17:28.327

我很确定问题来自您`rootProperty`在代理中指定的脂肪，但它们在您的 JSON 中没有。从这两个选择中：

删除根属性

**或者**

将 JSON 文件的结构更改为以下内容：

```
{
  "users": [
    {
      "docid": "1",
      "doc_title": "Dato' Dr.",
      "doc_name": "xyz",
      "doc_code": "001",
      "doc_category": "3",
      "doc_subcategory": "",
      "id": "0"
    },
    {
      "docid": "1",
      "doc_title": "Dr.",
      "doc_name": "ABC",
      "doc_code": "002",
      "doc_category": "4",
      "doc_subcategory": "",
      "id": "0"
    }
  ]
} 
```

希望这可以帮助

# jquery - JQM - 来自多个页面的按钮点击

> ID：13154017
> 
> 赞同：0
> 
> 时间：2012-10-31T08:38:34.793
> 
> 标签：jquery, jquery-mobile

我有一个 jQuery Mobile 应用程序，它通过 ajax 加载页面，例如 page1.html、page2.html 等

在 page1.html 我有一个按钮：

```
<a href="page2.html" data-role="button" class="submit">Submit</a> 
```

在 page2.html 我也有一个按钮

```
 <a href="page3.html" data-role="button" class="submit">Submit</a> 
```

我在正文中的每个页面上都引用了一个脚本文件（script.js），其中包含以下代码：

```
$(document).on('pagechange', function(){
    console.log('new page');
    $('.submit').on('click', function(){
      console.log($('this'));
    });
} 
```

每个页面的“新页面”都被写入控制台，但点击仅在单个页面上注册（如果我刷新页面，它仅在该页面上有效）

关于如何在每个页面上触发点击的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:43:24.470

使用 的选择器参数`.on()`，在这种情况下，您只需要绑定**一次**事件，因此请在`document.ready()`处理程序中进行，如下所示：

```
$(document).ready(function() {
    $(document).on('click', '.submit', function(){
      console.log($('this'));
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:44:22.300

在 jquery mobile 中，您应该将事件`pageinit`用作传统的`onload`. 下面的代码应该可以解决问题。

```
$(document).on('pageinit', function(){
    console.log('new page');
    $('.submit').on('click', function(){
      console.log($('this'));
    });
} 
```

# fork-join - Java 7 分叉和加入

> ID：13154019
> 
> 赞同：0
> 
> 时间：2012-10-31T08:38:38.407
> 
> 标签：fork-join

我有一个主线程，我想从中生成 2 个线程来解析两个不同的 xml。我想知道在这种情况下是否应该使用 Java 7 fork-join 或者我们在 jdk 1.4 中使用的传统方式是否足以应对这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T09:50:08.240

Fork/Join 框架很棒，因为你有一个潜在的任务树，而这棵树的大小是未知的。合并排序是一个很好的例子。但是，只有两个文件要解析，您将无法利用 FJF 的主要功能：

*   工作窃取 - 工作线程的任务队列的动态平衡
*   轻松安排现有任务产生的新任务

当然，您可以使用 FJF 来实现它来玩一些不错的新类，这样就可以了。但是你不太可能从中获得任何性能或可维护性的好处，所以我的建议是在这里遵循传统的方法。

# sql - 使用 SQL 将年龄间隔作为行统计信息

> ID：13154023
> 
> 赞同：3
> 
> 时间：2012-10-31T08:38:45.853
> 
> 标签：sql

我正在尝试创建这个汇总统计表，计算每个类别中的个人数量

```
Agegroup   |    All    |    Female   |    Male
------------------------------------------------
All        |  560594   |    34324    |   234244
< 20       |   4324    |     545     |    3456
20 - 30    |  76766    |     3424    |   32428
30 - 40    |  36766    |     764     |   82427
40 - 50    |  46766    |     4324    |   72422
50 - 60    |  66766    |     3424    |   52424
> 60       |  76766    |    43424    |   12423 
```

从这张表

```
PersonID  |   Age   |  Sex   
----------------------------
  A      |    43    |   F
  B      |    22    |   F
  C      |    65    |   M
  D      |    33    |   F
  E      |    28    |   M 
```

这甚至可以“一次性”使用 SQL 吗？我对此进行了实验，但它并没有真正融合在一起..

```
SELECT SUM(CASE WHEN Age < 20 THEN 1 ELSE 0 END) AS [Under 20],
    SUM(CASE WHEN Age BETWEEN 20 AND 30 THEN 1 ELSE 0 END) AS [20-30],
    SUM(CASE WHEN Age BETWEEN 30 AND 40 THEN 1 ELSE 0 END) AS [30-40]
FROM Persons 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:22:46.990

我相信以下是实现这一目标的最简单方法，即使该年龄范围内没有人，也可以恢复行列。此外，由于`Sex`只有 2 个可能的值，您可以使用`NULLIF`而不是 case 表达式。

```
SELECT  [Agegroup] = Name,
        [All] = COUNT(Person.PersonID),
        [Female] = COUNT(NULLIF(Person.Sex, 'M')),
        [Male] = COUNT(NULLIF(Person.Sex, 'F'))
FROM    (VALUES 
            (0, 1000, 'All'),
            (0, 20, '< 20'),
            (20, 30, '20 - 30'),
            (30, 40, '30 - 40'),
            (40, 50, '40 - 40'),
            (50, 60, '50 - 40'),
            (60, 1000, '> 60')
        ) AgeRange (MinValue, MaxValue, Name)
        LEFT JOIN Person
            ON Person.Age >= AgeRange.MinValue
            AND Person.Age < AgeRange.Maxvalue
GROUP BY AgeRange.Name, AgeRange.MinValue, AgeRange.Maxvalue
ORDER BY AgeRange.MinValue, AgeRange.MaxValue DESC 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/6af11/3)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T08:57:34.017

也许是这样的：

```
DECLARE @T TABLE(PersonID VARCHAR(5), Age INT,Sex VARCHAR(5))

INSERT INTO @T
VALUES
    ('A',43,'F'),
    ('B',22 ,'F'),
    ('C ',65,'M'),
    ('D',33,'F'),
    ('E',28,'M') 
```

SQL

```
SELECT
    'All' AS Agegroup,
    COUNT(*) AS [All],
    SUM(CASE WHEN tbl.Sex='F' THEN 1 ELSE 0 END) AS Female,
    SUM(CASE WHEN tbl.Sex='M' THEN 1 ELSE 0 END) AS Male
FROM
    @T AS tbl
UNION ALL   
SELECT
    tbl.Agegroup,
    COUNT(*) AS [All],
    SUM(CASE WHEN tbl.Sex='F' THEN 1 ELSE 0 END) AS Female,
    SUM(CASE WHEN tbl.Sex='M' THEN 1 ELSE 0 END) AS Male
FROM
(
    SELECT
        (
            CASE 
            WHEN Age BETWEEN 0 and 20
            THEN '< 20'
            WHEN Age BETWEEN 20 and 30
            THEN '20 - 30'
            WHEN Age BETWEEN 30 and 40
            THEN '30 - 40'
            WHEN Age BETWEEN 40 and 50
            THEN '40 - 50'
            WHEN Age BETWEEN 50 and 60
            THEN '50 - 60'
            WHEN Age> 60
            THEN '> 60'
            END
        ) AS Agegroup,
        t.Age,
        t.Sex
    FROM
        @T AS t
) AS tbl
GROUP BY
    tbl.Agegroup 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T09:00:08.337

您最好的模式是创建一个年龄范围表（或如下例中的虚拟表）并加入它，然后旋转结果以将结果转换为柱状形式。

```
select range as AgeGroup, m as Male, F as Female, m+f as [all]
from
(  
    select PersonID, range, sex  
    from
    (
        select 'all' as range, 0 as minval, 200 as maxval
        union select '<20',0,19
        union select '20-29',20,29
        -- etc....
    ) ranges
        left join
    yourtable t
        on t.age between minval and maxval
) src
pivot
    (count(personid) for sex in ([m],[f])) p 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T09:19:51.080

试试这个：

```
;with Age_range as(
select '<20' as age union all
select '20 - 30' as age union all
select '30 - 40' as age union all
select '40 - 50' as age union all
select '50 - 60' as age union all
select '>60' as age  
),
cte as(
select [Sex],
sum(case when [Age]<20 then 1 else 0 end) as '<20' ,
sum(case when [Age]between 20 and 29 then 1 else 0 end) as '20 - 30',
sum(case when [Age]between 30 and 39 then 1 else 0 end) as '30 - 40',
sum(case when [Age]between 40 and 49 then 1 else 0 end) as '40 - 50',
sum(case when [Age]between 50 and 59 then 1 else 0 end) as '50 - 60',
sum(case when [Age]>=60 then 1 else 0 end) as '>60' 
 from Persons
 group by [Sex]),
 cte1 as(select Sex,'<20'  as cnt from cte where [<20]>0 union all
 select Sex,'20 - 30'  as cnt from cte where [20 - 30]>0 union all
 select Sex,'30 - 40'  as cnt from cte where [30 - 40]>0 union all
 select Sex,'40 - 50'  as cnt from cte where [40 - 50]>0 union all
 select Sex,'50 - 60'  as cnt from cte where [50 - 60]>0 union all
 select Sex,'>60'  as cnt from cte where [>60]>0)
 select A.age,
        COUNT(case when sex in ('M','F') then 1 end) as [All],
        COUNT(case when sex='F' then 1 end) as Female,
        COUNT(case when sex='M' then 1 end) as Male
  from Age_range A left join cte1 C
  on A.age=C.cnt
  group by A.age 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/89f29/4)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T08:43:25.903

```
select  'All' as [Age Group]
.       count(*) as [All],
,       sum(case Sex when 'F' then 1 end) as Female
,       sum(case Sex when 'M' then 1 end) as Male
from    Persons
union all
select  '< 20' as [Age Group]
.       count(*) as [All],
,       sum(case Sex when 'F' then 1 end) as Female
,       sum(case Sex when 'M' then 1 end) as Male
from    Persons
where   Age < 20
union all
select  '20 - 30' as [Age Group]
.       count(*) as [All],
,       sum(case Sex when 'F' then 1 end) as Female
,       sum(case Sex when 'M' then 1 end) as Male
from    Persons
where   20 <= Age and Age < 30
union all
... 
```

# php - 使用时间戳比较mysql日期

> ID：13154029
> 
> 赞同：0
> 
> 时间：2012-10-31T08:38:52.233
> 
> 标签：php, mysql

我正在使用这样的代码来捕获与时间相关的记录。

这是一个sql片段...

```
$SQL_p .= " and UNIX_TIMESTAMP(".$data['task_filter'].") >= " . 
          strtotime(date('Y-m-d h:i:s',strtotime(str_replace('/','-',$data['datepicker'].' 00:00:00'))));
$SQL_p .= " and UNIX_TIMESTAMP(".$data['task_filter'].") <= " . 
          strtotime(date('Y-m-d h:i:s',strtotime(str_replace('/','-',$data['datepicker2'].' 23:59:59')))); 
```

使用格式输入日期并使用保存日期的 var进行`dd/mm/YYYY`转换`str_replace('/','-',$data['datepicker2'])``$data['datepicker2']`

在命令行使用 php5 进行测试，当我输入 ....

```
echo date('Y-m-d h:i:s',strtotime(str_replace('/','-','25/11/2011 00:00:00'))); 
```

我得到`2011-11-25 12:00:00`但我期望的是`2011-11-25 00:00:00`

还

```
echo date('Y-m-d h:i:s',strtotime(str_replace('/','-','25/11/2011 23:59:59'))); 
```

返回`2011-11-25 11:59:59`不是预期的`2011-11-25 23:59:59`。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:44:20.753

尝试：

```
echo date('Y-m-d H:i:s',strtotime(str_replace('/','-','25/11/2011 00:00:00'))); 
```

“h”表示 12 小时格式，“H”表示 24 小时格式

# php - Symfony2：CSRF 令牌无效。请尝试重新提交表格

> ID：13154035
> 
> 赞同：2
> 
> 时间：2012-10-31T08:39:14.620
> 
> 标签：php, symfony, csrf

我有一个表格，我必须在其中填写一些信息。即使我在里面放了一些东西，我也会收到错误消息：

```
The CSRF token is invalid. Please try to resubmit the form 
```

与此问题相关：[symfony2 CSRF invalid](https://stackoverflow.com/questions/10442922/symfony2-csrf-invalid) I am using correct the $form->bindRequest()

```
if ($this->getRequest()->getMethod() == 'POST') {
   $form->bindRequest($this->getRequest());
   if ($form->isValid()) 
   {
       ...
   } 
```

这是我的模板（树枝）代码：

```
<div class="item item-last">
<h1>Create Affiliation</h1>

{% if valid == false %}
    <div class="error">
        {{ form_errors(form) }}
        {{ form_errors(form.affiliation) }}
        {{ error }}
    </div>
{% endif %}
{% if app.session.flash('user-notice') != '' %}
<div class="flash-notice">
    {% autoescape false %}
    {{ app.session.flash('user-notice') }}
    {% endautoescape %}
</div>
{% endif %}

</div>
<div class="item item-last">
<form action="{{ path('SciForumVersion2Bundle_user_submission_affiliation_create', {'hash_key' : submission.hashkey, 'author_id' : author.id }) }}?ajax=no" method="POST" class="authorForm" {{ form_enctype(form) }}>
    <div style="float:left;">
        <table width="100%" cellspacing="0" cellpadding="0">
            <tr>
                <td>
                    {{ form_label(form.affiliation) }}
                </td>
                <td>
                    {{ form_widget(form.affiliation, { 'attr': {'size': 40} }) }}
                </td>
            </tr>
            <tr>
                <td>
                    &nbsp;
                </td>
                <td>
                    <div class="button button-left button-cancel">
                        <img src="{{ asset('bundles/sciforumversion2/images/design/new/button-red.png') }}"/>
                        <a href="{{ path('SciForumVersion2Bundle_user_submission_author_edit', { 'hash_key' : submission.hashkey, 'author_id' : 0 }) }}" class="submission_link">cancel</a>
                    </div>
                    <div style="float: left;">&nbsp;</div>
                    <div class="button button-left button-cancel">
                        <img src="{{ asset('bundles/sciforumversion2/images/design/new/button.png') }}"/>
                        <input type="submit" name="login" value="submit" />
                    </div>
                    <div style="clear: both;"></div>
                </td>
            </tr>
        </table>
    </div>
{{ form_rest(form) }}

</form>
</div> 
```

这是js代码：

```
function init_submission_functions()
{

init_fck();

$(".submission_link").unbind("click").bind("click", function() {

    var href = $(this).attr("href");
    if( href == null || href == '' ) return false;

    $.ajax({
        type: "POST",
        async: true,
        url: href,
        cache: false,
        dataType: "json",
        success: function(data) {

            $("#content .contentwrap .itemwrap").html( data.content );
            init_submission_functions();
        }
    });

    return false;
});

$(".authorForm").unbind("submit").bind("submit", function() {

    var href = $(this).attr("action");
    if( href == null || href == '' ) return false;

    var affiliation = "blabla";

    $.ajax({
        type: "POST",
        async: true,
        url: href,
        affiliation: affiliation,
        cache: false,
        dataType: "json",
        success: function(data) {

            $("#content .contentwrap .itemwrap").html( data.content );
            init_submission_functions();
        }
    });

    return false;
});
} 
```

但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T09:57:55.150

[`serialize`使用jQuery 方法](http://api.jquery.com/serialize/)发送序列化表单：

```
$form.submit(function (e) {
    e.preventDefault();

    $this = $(this);
    $.post($this.attr('action'), $this.serialize(), function (response) {
        // handle the response here
    });
}); 
```

这样，Symfony 将把提交请求当作一个普通请求来处理——你不需要做任何特别的事情来处理一个 Ajax 表单提交。你需要做的就是返回一个[`JsonResponse`](http://api.symfony.com/2.1/Symfony/Component/HttpFoundation/JsonResponse.html)——当然，如果你需要它。

这是处理表单的示例——根据您的需要调整它：

```
if ('POST' === $request->getMethod()) {
    $form->bind($request);

    if ($form->isValid()) {
        // do something here — like persisting or updating an entity

        return new JsonResponse([
            'success' => true,
        ]);
    }

    return new JsonResponse([
        'success' => false,
        'form' => $this->render($pathToTheTemplateHere, [
            'form' => $form,
        ],
    ]);
} 
```

另一种方法是使用不同的模板：`form.json.twig`并且`form.html.twig`——阅读文档以获取详细信息。

# iphone - 更改 MFMailComposeViewController 的背景图片

> ID：13154040
> 
> 赞同：0
> 
> 时间：2012-10-31T08:39:25.640
> 
> 标签：iphone, ios, ios4, mfmailcomposeviewcontroller, ios5

我想为我的电子邮件作曲家添加背景图片。我正在使用`MFMailComposeViewController`. 我尝试获取 的子视图`MFMailComposeViewController`，它只返回两个子视图，即 a`UINavigationBar`和 a `NavigationTransitionView`。`NavigationTransitionView`进一步包含邮件编写器的所有视图。我试图自定义该视图，但仍然无法做到。我尝试获取它的子视图，但它返回 nil。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:01:59.077

> 你好。
> 
> 因为苹果不直接支持您更改邮件作曲家布局的要求。
> 
> 为了完全填写您的请求，您可以使用 xib 中所需的设计和布局制作与 mfmail 编写器相同的自定义邮件编写器，您可以使用它。但是在这里您需要开发用于从该视图发送邮件的 Web 服务。

# android - 构建时用于 android 项目的自动 Javadoc

> ID：13154041
> 
> 赞同：1
> 
> 时间：2012-10-31T08:39:27.630
> 
> 标签：android, javadoc

我想在每次构建时为库项目启用自动 Javadoc 生成。我有 3 个问题需要解决：

1.  如何在 IDE 的构建过程中集成这样的自动化脚本？（Eclipse 和 IDEA）。

2.  如何从文档处理中排除自动生成的类`R`和`Build`类，因为它们总是在源的命名空间下生成。

3.  将 Javadoc 打包并放置在构建 jar 文件旁边。

这个问题有点宽泛，但我敢肯定，一个好的综合答案可以在一个地方为许多人省去麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T20:43:35.063

两种方式：

*   使用 Maven：Maven 很棒，并且也支持 android 构建。但是仍然使用默认的 android 结构，一切都不像默认的 Ant 构建那样轻松。我希望将来谷歌会引入 Maven 结构。
*   好老`Apache Ant`：默认的 ant 构建文件位于`sdk_path/tools/ant/build.xml`，这是导入到项目的`build xml`. 因此，可以为一些额外的工作添加自定义目标。放置它们的最佳位置是`custom_rules.xml`项目根目录的文件中，然后导入项目的`build.xml`.

`custom_rules.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="MyProject" default="help">

    <!-- IDE produces default jar as: out/production/classes.jar ,
    so we define a custom target to rename the jar, generate and package docs jar along
    with it  -->
    <target name="package_library" depends="init_pack_lib, check_lib_jar,   rename_lib_jar,generate_javadoc"/>

    <!-- init all properties to use-->
    <target name="init_pack_lib">
        <property name="real.out.dir" value="${basedir}/out/production"/>
        <property name="lib.gen.jar.file" value="${real.out.dir}/classes.jar"/>
        <property name="docs.dir" value="${real.out.dir}/Docs"/>

        <!-- we need to peek into manifest xml file-->
        <xmlproperty file="${manifest.abs.file}" collapseattributes="true"/>
        <property name="app.package" value="${manifest.package}"/>
        <property name="app.dist.name" value="${ant.project.name}_${manifest.android:versionName}"/>
        <property name="doc.package.names" value="${app.package}.*"/>
    </target>

    <!-- is classes.jar generated ?-->
    <target name="check_lib_jar">
        <available file="${lib.gen.jar.file}" property="lib.jar.found"/>
    </target>

    <!-- if so, give it a better name-->
    <target name="rename_lib_jar" if="${lib.jar.found}">
        <move file="${lib.gen.jar.file}"
              tofile="${real.out.dir}/${app.dist.name}.jar"/>
    </target>

    <!-- generate and package JavaDoc for project-->
    <target name="generate_javadoc" depends="check_doc_dir, create_doc_dir, clean_docs_dir">
        <javadoc packagenames="${doc.package.names}"
                 sourcepath="${source.absolute.dir}"
                 destdir="${docs.dir}"
                 verbose="false"
                />
        <jar compress="${jar.compress}" basedir="${docs.dir}" jarfile="${real.out.dir}/${app.dist.name}_JavaDoc.jar"/>
    </target>

    <!-- what about JavaDocs destination directory ? -->
    <target name="check_doc_dir">
        <condition property="docs.dir.not.exists">
            <not>
                <available type="dir" file="${docs.dir}" property="docs.dir.exists"/>
            </not>
        </condition>
    </target>

    <!-- make docs directory if it isn't there already-->
    <target name="create_doc_dir" if="docs.dir.not.exists">
        <mkdir dir="${docs.dir}"/>
    </target>

    <!-- wipe previous JavaDocs files-->
    <target name="clean_docs_dir" if="docs.dir.exists">
        <delete includeemptydirs="true">
            <fileset dir="${docs.dir}" includes="**/*"/>
        </delete>
    </target>
</project> 
```

要创建包，只需`ant package_library`从项目根目录运行。您可以将它们包含在构建目标中，以便它们在每个构建中运行。

# interface - TS 接口不会对实现者强制执行函数签名

> ID：13154045
> 
> 赞同：10
> 
> 时间：2012-10-31T08:39:54.777
> 
> 标签：interface, signature, typescript

```
interface test{
    foo(boo:string);
}
class coo implements test{
    foo(){

    }
} 
```

在[playGround](http://www.typescriptlang.org/Playground/) 中，尽管函数签名不像接口所说的那样，但这不会生成和错误，接口的预期行为是强制签名..

为什么会出现这种行为？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T09:13:49.517

这很有趣。TypeScript 团队非常聪明，他们决定故意这样做。

这个想法是，如果你的函数可以在不传递参数的情况下正确运行，它可以安全地忽略参数并满足接口。这意味着您可以替换您的实现，而无需更新所有调用代码。

该接口确保在您使用接口的所有情况下都传递参数 - 因此您可以对调用者进行类型检查，并且您的具体类不需要任何参数实际上并不重要。

[接口函数参数未强制执行](http://typescript.codeplex.com/workitem/350)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-08T16:20:37.987

我不满意接口如何不强制执行方法签名。我相信芬顿的解释是错误的。真正的原因是 Typescript 使用的是“ **duck typing** ”。使用更少的参数不会出错，但是如果使用更多的参数，你会得到错误。长答案可以在这里找到[为什么 TypeScript 中的类允许使用鸭子类型](https://stackoverflow.com/questions/48829743/why-duck-typing-is-allowed-for-classes-in-typescript)

最后，Interface 无法适应由其他类扩展的抽象类的角色。我不建议将接口与类一起使用，而是更好地在实际类上使用“实现”一词，如果没有额外的接口类，它的作用相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-10T00:14:59.813

Typescript 使用[结构类型](https://en.wikipedia.org/wiki/Structural_type_system)。实现的函数的参数可以比接口中的函数声明少，但不能多。

# android - SurfaceView 不显示动画

> ID：13154049
> 
> 赞同：0
> 
> 时间：2012-10-31T08:40:06.997
> 
> 标签：android, surfaceview

我想在我的 MainActivity 中绘制动画图片我的 MainActivity 代码如下：

```
public class LaozhangActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    Ch0_1 view=new Ch0_1(this);
    super.onCreate(savedInstanceState);
    setContentView(view);

}
} 
```

我已经定义了一个扩展类`SurfaceView`以显示动画图片；代码是这样的：

```
public class Ch0_1 extends SurfaceView implements Callback, Runnable
{

SurfaceHolder surfaceHolder;

private boolean isThreadRunning = true;

Canvas canvas;
float r = 10;

public Ch0_1(Context context)
{

 super(context);

    surfaceHolder = this.getHolder();

    surfaceHolder.addCallback(this);
    canvas=new Canvas();
}

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height)
{

}

public void surfaceCreated(SurfaceHolder holder)
{

    new Thread(this).start();
}

public void surfaceDestroyed(SurfaceHolder holder)
{

}

private void Method(int x,int y)
{

    Paint pen=new Paint();
    pen.setColor(Color.GREEN);

    canvas=surfaceHolder.lockCanvas();
    canvas.drawLine(0, 0, x, y, pen);
    surfaceHolder.unlockCanvasAndPost(canvas);

}

 public void run()
 {
    while (isThreadRunning)
    {
     int x=0,y=0;
     Method(x,y);
        try
        {
            Thread.sleep(100);
        } catch (Exception e)
        {
            e.printStackTrace();
        }
        x+=10;
        y+=10;
        if(x>400)break;
    }
}
} 
```

运行时MainActivity是黑色的，没有显示图片。
问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:58:46.757

使用您的代码，每次迭代时 x 和 y 都重置为 0 ...您必须将 x 和 y 的初始化移到 while 循环之外：

```
 public void run() {
        int x = 0, y = 0;
        while (isThreadRunning) {
            Method(x, y);
            try {
                Thread.sleep(100);
            } catch (Exception e) {
                e.printStackTrace();
            }
            x += 10;
            y += 10;
            if (x > 400)
                break;
        }
    } 
```

# django - Apache 服务器中的模板继承

> ID：13154056
> 
> 赞同：0
> 
> 时间：2012-10-31T08:40:22.923
> 
> 标签：django, html, apache, templates

如何像在 Django 框架中一样继承 Apache 服务器中的模板？

我想通过扩展base.html来继承所有html文件中的一些通用标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:23:06.970

我认为您正在寻找[Server Side Includes](http://en.wikipedia.org/wiki/Server_Side_Includes)。Apache 文档中的这个[参考](http://httpd.apache.org/docs/2.2/howto/ssi.html)解释了如何设置它。

* * *

如果您想使用模板进行继承，然后生成一个可以在 Apache 上运行而无需任何其他要求的静态站点（模板中的所有页面）；使用静态站点生成器。

这个[要点](https://gist.github.com/2254924)有一个很大的列表。

静态站点生成器具有模板和一些命令行脚本。您使用模板开发您的网站。完成后，输入命令，然后生成站点的所有 .html 文件。然后，您可以将它们放在任何服务器上，而无需任何额外要求。

# c++ - 变量向量与指针向量

> ID：13154057
> 
> 赞同：4
> 
> 时间：2012-10-31T08:40:23.977
> 
> 标签：c++, visual-studio-2010

我只是对使用变量向量与使用动态内存的指针向量的区别感到好奇，我发现了一些让我感到困惑的东西。我有一个看起来像这样的简单 main.cpp，

```
#include <iostream>
#include <vector>

using namespace std;

class A
{
public:
    A() { x = 2;}
    virtual ~A() { cout << "I'm a dead A\n";}

public:
    int x;
};

class B : public A
{
public:
    B() {x = 4;}
    ~B() { cout << "I'm a dead B\n";}
};

class C : public A
{
public:
    C() { x = 6;}
    ~C() { cout << "I'm a dead C\n";}
};

int main()
{
    cout << "Starting variable list\n";
    std::vector<A> list;

    list.push_back( B() );
    list.push_back( A() );
    list.push_back( B() );
    list.push_back( C() );
    list.push_back( A() );

    for(std::vector<A>::iterator it = list.begin(); it != list.end(); it++)
    {
        cout << it->x << endl;
    }

    cout << "\n\nStarting pointer list\n";

    std::vector<A *> ptrList;

    ptrList.push_back( new B());
    ptrList.push_back( new A());
    ptrList.push_back( new B());
    ptrList.push_back( new C());
    ptrList.push_back( new A());

    for(std::vector<A *>::iterator it = ptrList.begin(); it != ptrList.end(); it++)
    {
        cout << (*it)->x << endl;
    }

    for(std::vector<A *>::iterator it = ptrList.begin(); it != ptrList.end(); it++)
    {
        delete *it;
    }

    system("PAUSE");
    return 0;
} 
```

我得到一个看起来像这样的打印输出：

```
Starting variable list
I'm a dead B
I'm a dead A
I'm a dead A
I'm a dead A
I'm a dead A
I'm a dead A
I'm a dead B
I'm a dead A
I'm a dead A
I'm a dead A
I'm a dead A
I'm a dead C
I'm a dead A
I'm a dead A
I'm a dead A
I'm a dead A
I'm a dead A
I'm a dead A
4
2
4
6
2

Starting pointer list
4
2
4
6
2
I'm a dead B
I'm a dead A
I'm a dead A
I'm a dead B
I'm a dead A
I'm a dead C
I'm a dead A
I'm a dead A
Press any key to continue . . . 
```

什么以及为什么所有这些破坏都发生在正常变量列表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:14:40.533

在专注于构建/破坏/复制（以及最终优化）的动态之前，您似乎没有意识到一个考虑因素：**值不是多态的**。

如果`B`源自`A`，

```
B b;
A a(b); 
```

不会`a`复制`b`. 它只会复制到`a`的`b`子`A`组件中。

与值不同，**指针和引用是多态的**：

```
B b;
B* pb = &b;
A* pa = pb;
B* pb2 = const_cast<B*>(pa); 
```

实际上会导致 pa 指向 b 的 A 子组件，但`pb`and`pb2`指向同一个`b`.

也就是说， a`vector<A>`包含 A `values`，因此，

```
vecotr<A> v;
v.push_back(B()); 
```

将导致：

*   创建一个空的`v`；
*   创建一个临时 B();
*   使 v 足够大以包含 A
*   在 v.end() 处创建一个从临时 B 的 A 子组件复制的 A。
*   销毁临时B

并且 - 在函数结束时，

*   破坏 v （从而破坏其中的 A）

现在内存是干净的。

如果使用指针：

```
vector<A*> v;
v.push_back(new B()); 
```

将导致：

*   创建一个空`v`
*   在堆上创建一个 B
*   放大 v 以包含 A*
*   将 B 的地址转换为其 A 的子组件地址（对于单一继承，它们很可能是相同的）
*   在 v.end() 处创建从 B 的转换地址复制的 A*（注意您正在转换指针，而不是对象）。
*   摧毁 v
*   销毁其中的 A*。
*   堆上的 B 还在（内存泄漏，因为没有其他方法可以访问它来删除它）

为避免泄漏，您应该：

*   在堆栈上创建 B，并获取其地址或...
*   使用 a`std::unique_ptr<A>`而不是`A*`在向量中（这样，在向量销毁时，unique_ptr 被销毁，并且其析构函数销毁指向的 A 子对象，即具有虚拟析构函数将导致 B 的销毁。

下面的代码可以对上述问题进行更有效的演示：

```
// Compile as g++ -pedantic -Wall -std=c++11

#include <vector>
#include <list>
#include <iostream>

class A
{
public:
    A() { std::cout << "- creating A at " << this << std::endl; }
    A(const A& a) { std::cout << "- creating A at " << this << " from " << &a << std::endl; }
    A& operator=(const A& a) { std::cout << "- assigning A at " << this << " from " << &a << std::endl; return *this; }
    virtual ~A() { std::cout << "- destroying A at " << this << std::endl; }
    virtual void hello() const { std::cout << "- A's hello from " << this << std::endl; }
};

class B: public A
{
public:
    B() { std::cout << "- creating B at " << this << std::endl; }
    B(const B& a) { std::cout << "- creating B at " << this << " from " << &a << std::endl; }
    B& operator=(const B& a) { std::cout << "- assigning B at " << this << " from " << &a << std::endl; return *this; }
    virtual ~B() { std::cout << "- destroying B at " << this << std::endl; }
    virtual void hello() const { std::cout << "- B's hello from " << this << std::endl; }
};

class C: public A
{
public:
    C() { std::cout << "- creating C at " << this << std::endl; }
    C(const C& a) { std::cout << "- creating C at " << this << " from " << &a << std::endl; }
    C& operator=(const C& a) { std::cout << "- assigning C at " << this << " from " << &a << std::endl; return *this; }
    virtual ~C() { std::cout << "- destroying C at " << this << std::endl; }
    virtual void hello() const { std::cout << "- C's hello from " << this << std::endl; }
};

int main()
{
    std::cout << "creating some objects" << std::endl;
    A a1, a2;
    B b1, b2;
    C c1, c2;

    {
        std::cout << "operating with values" << std::endl;
        std::vector<A> valvect;
        valvect.push_back(a1);
        valvect.push_back(a1);
        valvect.push_back(b1);
        valvect.push_back(b1);
        valvect.push_back(c1);
        valvect.push_back(c1);
        valvect.push_back(a2);
        valvect.push_back(a2);
        valvect.push_back(b2);
        valvect.push_back(b2);
        valvect.push_back(c2);
        valvect.push_back(c2);
        for(const auto& x: valvect) x.hello();
        std::cout << "at '}' destroy the value vector" << std::endl;
    }

    {
        std::cout << "operating with pointers" << std::endl;
        std::vector<A*> ptrvect;
        ptrvect.push_back(&a1);
        ptrvect.push_back(&a1);
        ptrvect.push_back(&b1);
        ptrvect.push_back(&b1);
        ptrvect.push_back(&c1);
        ptrvect.push_back(&c1);
        ptrvect.push_back(&a2);
        ptrvect.push_back(&a2);
        ptrvect.push_back(&b2);
        ptrvect.push_back(&b2);
        ptrvect.push_back(&c2);
        ptrvect.push_back(&c2);
        for(const auto& x: ptrvect)
            x->hello();
        std::cout << "at '}' destroy the pointer's vector" << std::endl;
    }

    {
        std::cout << "operating with list of values" << std::endl;
        std::list<A> vallst;
        vallst.push_back(a1);
        vallst.push_back(a1);
        vallst.push_back(b1);
        vallst.push_back(b1);
        vallst.push_back(c1);
        vallst.push_back(c1);
        vallst.push_back(a2);
        vallst.push_back(a2);
        vallst.push_back(b2);
        vallst.push_back(b2);
        vallst.push_back(c2);
        vallst.push_back(c2);
        for(const auto& x: vallst)
            x.hello();
        std::cout << "at '}' destroy the value list" << std::endl;
    }

    {
        std::cout << "operating with list of pointers" << std::endl;
        std::list<A*> ptrlst;
        ptrlst.push_back(&a1);
        ptrlst.push_back(&a1);
        ptrlst.push_back(&b1);
        ptrlst.push_back(&b1);
        ptrlst.push_back(&c1);
        ptrlst.push_back(&c1);
        ptrlst.push_back(&a2);
        ptrlst.push_back(&a2);
        ptrlst.push_back(&b2);
        ptrlst.push_back(&b2);
        ptrlst.push_back(&c2);
        ptrlst.push_back(&c2);
        for(const auto& x: ptrlst)
            x->hello();
        std::cout << "at '}' destroy the pointer's list" << std::endl;
    }

    std::cout << "now finally at '};' destroy the objects created at the beginning" << std::endl;
    return 0;
} 
```

它会像这样输出

```
creating some objects
- creating A at 0x22febc
- creating A at 0x22feb8
- creating A at 0x22feb4
- creating B at 0x22feb4
- creating A at 0x22feb0
- creating B at 0x22feb0
- creating A at 0x22feac
- creating C at 0x22feac
- creating A at 0x22fea8
- creating C at 0x22fea8
operating with values
- creating A at 0x3e3eb8 from 0x22febc
- creating A at 0x3e2434 from 0x22febc
- creating A at 0x3e2430 from 0x3e3eb8
- destroying A at 0x3e3eb8
- creating A at 0x3e2448 from 0x22feb4
- creating A at 0x3e2440 from 0x3e2430
- creating A at 0x3e2444 from 0x3e2434
- destroying A at 0x3e2430
- destroying A at 0x3e2434
- creating A at 0x3e244c from 0x22feb4
- creating A at 0x3e2468 from 0x22feac
- creating A at 0x3e2458 from 0x3e2440
- creating A at 0x3e245c from 0x3e2444
- creating A at 0x3e2460 from 0x3e2448
- creating A at 0x3e2464 from 0x3e244c
- destroying A at 0x3e2440
- destroying A at 0x3e2444
- destroying A at 0x3e2448
- destroying A at 0x3e244c
- creating A at 0x3e246c from 0x22feac
- creating A at 0x3e2470 from 0x22feb8
- creating A at 0x3e2474 from 0x22feb8
- creating A at 0x3e24a0 from 0x22feb0
- creating A at 0x3e2480 from 0x3e2458
- creating A at 0x3e2484 from 0x3e245c
- creating A at 0x3e2488 from 0x3e2460
- creating A at 0x3e248c from 0x3e2464
- creating A at 0x3e2490 from 0x3e2468
- creating A at 0x3e2494 from 0x3e246c
- creating A at 0x3e2498 from 0x3e2470
- creating A at 0x3e249c from 0x3e2474
- destroying A at 0x3e2458
- destroying A at 0x3e245c
- destroying A at 0x3e2460
- destroying A at 0x3e2464
- destroying A at 0x3e2468
- destroying A at 0x3e246c
- destroying A at 0x3e2470
- destroying A at 0x3e2474
- creating A at 0x3e24a4 from 0x22feb0
- creating A at 0x3e24a8 from 0x22fea8
- creating A at 0x3e24ac from 0x22fea8
- A's hello from 0x3e2480
- A's hello from 0x3e2484
- A's hello from 0x3e2488
- A's hello from 0x3e248c
- A's hello from 0x3e2490
- A's hello from 0x3e2494
- A's hello from 0x3e2498
- A's hello from 0x3e249c
- A's hello from 0x3e24a0
- A's hello from 0x3e24a4
- A's hello from 0x3e24a8
- A's hello from 0x3e24ac
at '}' destroy the value vector
- destroying A at 0x3e2480
- destroying A at 0x3e2484
- destroying A at 0x3e2488
- destroying A at 0x3e248c
- destroying A at 0x3e2490
- destroying A at 0x3e2494
- destroying A at 0x3e2498
- destroying A at 0x3e249c
- destroying A at 0x3e24a0
- destroying A at 0x3e24a4
- destroying A at 0x3e24a8
- destroying A at 0x3e24ac
operating with pointers
- A's hello from 0x22febc
- A's hello from 0x22febc
- B's hello from 0x22feb4
- B's hello from 0x22feb4
- C's hello from 0x22feac
- C's hello from 0x22feac
- A's hello from 0x22feb8
- A's hello from 0x22feb8
- B's hello from 0x22feb0
- B's hello from 0x22feb0
- C's hello from 0x22fea8
- C's hello from 0x22fea8
at '}' destroy the pointer's vector
operating with list of values
- creating A at 0x3e2448 from 0x22febc
- creating A at 0x3e24d0 from 0x22febc
- creating A at 0x3e24e8 from 0x22feb4
- creating A at 0x3e2500 from 0x22feb4
- creating A at 0x3e2518 from 0x22feac
- creating A at 0x3e2530 from 0x22feac
- creating A at 0x3e2548 from 0x22feb8
- creating A at 0x3e2560 from 0x22feb8
- creating A at 0x3e2578 from 0x22feb0
- creating A at 0x3e2590 from 0x22feb0
- creating A at 0x3e25a8 from 0x22fea8
- creating A at 0x3e25c0 from 0x22fea8
- A's hello from 0x3e2448
- A's hello from 0x3e24d0
- A's hello from 0x3e24e8
- A's hello from 0x3e2500
- A's hello from 0x3e2518
- A's hello from 0x3e2530
- A's hello from 0x3e2548
- A's hello from 0x3e2560
- A's hello from 0x3e2578
- A's hello from 0x3e2590
- A's hello from 0x3e25a8
- A's hello from 0x3e25c0
at '}' destroy the value list
- destroying A at 0x3e2448
- destroying A at 0x3e24d0
- destroying A at 0x3e24e8
- destroying A at 0x3e2500
- destroying A at 0x3e2518
- destroying A at 0x3e2530
- destroying A at 0x3e2548
- destroying A at 0x3e2560
- destroying A at 0x3e2578
- destroying A at 0x3e2590
- destroying A at 0x3e25a8
- destroying A at 0x3e25c0
operating with list of pointers
- A's hello from 0x22febc
- A's hello from 0x22febc
- B's hello from 0x22feb4
- B's hello from 0x22feb4
- C's hello from 0x22feac
- C's hello from 0x22feac
- A's hello from 0x22feb8
- A's hello from 0x22feb8
- B's hello from 0x22feb0
- B's hello from 0x22feb0
- C's hello from 0x22fea8
- C's hello from 0x22fea8
at '}' destroy the pointer's list
now finally at '};' destroy the objects created at the beginning
- destroying C at 0x22fea8
- destroying A at 0x22fea8
- destroying C at 0x22feac
- destroying A at 0x22feac
- destroying B at 0x22feb0
- destroying A at 0x22feb0
- destroying B at 0x22feb4
- destroying A at 0x22feb4
- destroying A at 0x22feb8
- destroying A at 0x22febc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:43:41.630

所有这些破坏都发生在正常变量列表中，因为

```
 list.push_back( B() ); 
```

将在向量内分配一个新对象并使用赋值运算符复制一个 in 参数（请参阅[std::vector 是否使用其值类型的赋值运算符来 push_back 元素？](https://stackoverflow.com/q/3272708/1122645)）。您用作参数的那个是临时的，因此在创建后将被销毁。

此外，破坏`C`or类型的对象`B`将输出两行。在这种情况`B`下

```
I'm a dead B
I'm a dead A 
```

当您传递指针时，它会复制指针的值，指向的对象不会被修改。

我个人认为，如果复制构造函数和赋值运算符是轻量级且已声明的，则使用值向量的开销可以忽略不计`inline`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:57:28.217

一些东西：

1.  您正在使用 A 对象的向量，所有这些对象，而不是指针，因此，您不能删除向量项。允许这个 y 声明一个 A 指针向量的好方法，`std::vector<A *>`并用`v.push_back(new B());`or推回它们`v.push_back(new C());`
2.  如果向此指针向量添加子类，如 B 或 C，则必须确保删除所有“信息”。如果你没有在 中声明一个虚拟析构函数`A`，你只会删除子类信息，而不是基类之一。对于所有继承情况请记住这一点。

此外，请记住 UmNyobe 和 Luchian 的所有建议。

# android-emulator - android模拟器中禁用了互联网连接

> ID：13154059
> 
> 赞同：1
> 
> 时间：2012-10-31T08:40:26.960
> 
> 标签：android-emulator

我不知道 android 模拟器出了什么问题，我需要在 android 模拟器上使用互联网并在主屏幕上显示通过互联网连接显示的交叉标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:42:35.913

请为您的 Android Manifest xml 文件添加权限。

请参阅：

[如何向android应用程序添加清单权限？](https://stackoverflow.com/questions/2169294/how-to-add-manifest-permission-to-android-application)

# reporting-services - 获取报表服务中书签的页码

> ID：13154060
> 
> 赞同：2
> 
> 时间：2012-10-31T08:40:27.460
> 
> 标签：reporting-services

我想在 Sql Server Reporting Services 中构建目录。我将为报告中的每个书签创建文本框，但我没有看到任何获取页码的选项。我错过了什么还是不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-16T20:47:53.133

据我所知，如果没有一些严肃的自定义代码可以在索引书签位置并根据使用的渲染器（pdf、html、excel 等）显示适当的数字时对报告进行预分页，这是不可能的。

例如，在我正在处理的一份报告中，它打印为 53 页（使用本机打印，PDF 为 52 :/ ）。但是，在 HTML 渲染器中查看时为 30 页，而在使用 Excel 时为 61 页。

书签的页码会根据您查看它们的方法而有很大差异，并且代码必须自己解决所有这些问题。

# c# - 根据c#中每个单词的开头搜索字符串

> ID：13154061
> 
> 赞同：2
> 
> 时间：2012-10-31T08:40:33.280
> 
> 标签：c#, search

我想以任何列的任何单词开头来搜索关键字。

例如，displayedCustomers 对象包含 Name，即 Sameer Singh。

所以当我的搜索变量

```
searchOption="eer" //it should not search, 
searchOption="ingh" //it should not search,
searchOption="Sa" //it should search,
searchOption="Si" //it should search,
searchOption="ameer" //it should not search 
```

我以前将此代码用于整个单词。但不知道拆分字符串的空间并与起始元素进行比较。请帮助以有效的方式做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:44:12.533

```
// Split the word by space
var split = str.Split(" ");
// Check if firstname or lastname starts with searchString
var found = split[0].StartsWith(searchString) || split[1].StartsWith(searchString); 
```

如果您不知道此人是否也有中间名，并且您也希望对此进行测试：

```
var searchString = "Sam";
var split = customerName.Split(" ");
var found = false;
foreach(var str in split)
{
    found == found || str.StartsWith(searchString);
    if(found)
      break;
} 
```

将其包装在一个方法中：

```
public bool NameStartsWith(string name,string searchStr)
{
    var split = name.Split(" ");
    foreach(var str in split)
    {
        if(str.StartsWith(searchString))
          return true;
    }
    return false;
} 
```

像这样使用它：

```
var matches = NameStartsWith("Sameer Singh","Sa"); // true
var matches = NameStartsWith("Sameer Singh","Si"); // true
var matches = NameStartsWith("Sameer Singh","S"); // true
var matches = NameStartsWith("Bobby Singer Bobberson","Sing"); // true
var matches = NameStartsWith("Sameer Singh","meer"); // false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T08:42:27.597

您可以使用[`String.StartsWith`](http://msdn.microsoft.com/en-us/library/system.string.startswith.aspx)

```
string name = "Sameer Singh";
string searchOption = "eer";
bool nameStartsWith = name.StartsWith(searchOption);

Console.Write("{0} {1} {2}"
                , name
                , nameStartsWith ? "starts with" : "starts not with"
                , searchOption); 
```

演示：http: [//ideone.com/mEh5Q1](http://ideone.com/mEh5Q1)

您可以对记录中的每个单词或每一列执行此操作。

例如（假设`DataRow`）：

```
bool rowContains = row.ItemArray.Any(o => string.Format("{0}", o).StartsWith(searchOption)); 
```

假设`String[]`：

```
bool arrContains = array.Any(str => str.StartsWith(searchOption)); 
```

假设`String`：

```
bool nameContains = name.Split().Any(w => w.StartsWith(searchOption)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T08:46:49.647

你应该[`String.StartsWith`](http://msdn.microsoft.com/en-us/library/system.string.startswith.aspx)一起使用[`String.Split`](http://msdn.microsoft.com/en-us/library/ms131450.aspx)：

```
public bool IsMatching(string Name, string SearchOption)
{
    foreach (string s in Name.Split(' '))
    {
       if s.StartsWith(SearchOption)
          return true;
    }

    return false;
}

// use it like:
if IsMatching("Sameer Singh", "Sa")
{
    // ... 
```

# vba - Excel VBA。需要一个宏来随机化排列（3p3）3次而不重复任何排列

> ID：13154063
> 
> 赞同：1
> 
> 时间：2012-10-31T08:40:40.880
> 
> 标签：vba, excel

我有 9 个单元格（我认为分为 3 组），每组包含字母 A、B 和 C。3 组之间的顺序是平衡的，因此没有字母在同一位置两次，例如：

ABCCABBAC

我有 3 个包含字母 d、e 和 f 的其他单元格。我想使用以下规则将 d、e 和 f 分配给 A、B 和 C：

1.  d、e 和 f 在每个组中分别代表一次。
2.  d、e 和 f 分别与 A、B 和 C 组合一次

例如 ：

Ad Be Cf Ce Af Bd Bf Ae Cd

基本上我想编写一个 VBA 宏，它给我随机分配 def 到 ABC 遵循这些规则。我希望宏通过将包含 def 的单元格放在包含 AB C 的单元格下来向我展示这一点。

抱歉，我什至还没有尝试编写代码来执行此操作，如果这有点令人困惑/格式不正确，我也很抱歉。我是 VBA 和 stackexchange 的新手，在解释这个问题时遇到了一些麻烦。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:26:11.943

如果一行的开头有四个空格，则该行以固定大小的字体输出。这用于代码，但也允许您创建您所寻找的图像。我最好的猜测是你有这样的东西：

```
 |  A  |  B  |  C  |  D  |  E  |  F  |  G  |  H  |  I  |  J  |
 --+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
 1 |  A  |  B  |  C  |     |     |     |  d  |  e  |  f  |     |
 2 |     |     |     |     |     |     |     |     |     |     |
 3 |     |     |     |     |     |     |     |     |     |     | 
```

从这个起始位置，下面的代码创建：

```
 |  A  |  B  |  C  |  D  |  E  |  F  |  G  |  H  |  I  |  J  |
 --+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
 1 |  A  |  B  |  C  |     |     |     |  d  |  e  |  f  |     |
 2 |     |     |     |     |     |     |     |     |     |     |
 3 |  Ad |  Ae |  Af |  Bd |  Be |  Bf |  Cd |  Ce |  Cf |     | 
```

我的输出值与您的输出值不同，但不在您的规则列表中。

你说你有第一组值的三个版本，每个可能的序列中都有一个。你没有解释第二个和第三个版本的目的，所以我没有包括它们。

如果这不是您想要的，您必须对您的要求提供更完整的解释。

```
Option Explicit
Sub Permutate()

  Dim ColDestCrnt As Long

  Dim ColSrc1First As Long
  Dim ColSrc1Crnt As Long
  Dim ColSrc1Last As Long

  Dim ColSrc2First As Long
  Dim ColSrc2Crnt As Long
  Dim ColSrc2Last As Long

  Dim RowSrc1 As Long
  Dim RowSrc2 As Long
  Dim RowDest As Long

  ' Specify the position of the first set of source values
  RowSrc1 = 1
  ColSrc1First = 1      ' Column A
  ColSrc1Last = 3       ' Column C

  ' Specify the position of the second set of source values
  RowSrc2 = 1
  ColSrc2First = 6      ' Column F
  ColSrc2Last = 8       ' Column H

  ' Specify the start the destination
  RowDest = 3
  ColDestCrnt = 1

  With Worksheets("Sheet1")

    ' Loop through first set of values and within that loop through
    ' the second set.
    For ColSrc1Crnt = ColSrc1First To ColSrc1Last
      For ColSrc2Crnt = ColSrc2First To ColSrc2Last
        ' Combine one value from the first set with one value in the second set.
        .Cells(RowDest, ColDestCrnt).Value = _
             .Cells(RowSrc1, ColSrc1Crnt).Value & _
             .Cells(RowSrc2, ColSrc2Crnt).Value
        ColDestCrnt = ColDestCrnt + 1
      Next
    Next
  End With

End Sub 
```

# wso2 - WSO2 身份服务器 4.0 版 - SAML SSO 凭据路由到自定义 API 进行验证

> ID：13154064
> 
> 赞同：4
> 
> 时间：2012-10-31T08:40:41.130
> 
> 标签：wso2, wso2carbon, wso2is

关于 WSO2 Identity Server 4.0 版有以下问题：

想知道是否可以将 SAML 单点登录凭据路由到第三方 API 进行验证，即用户将在 WSO2 SAML 单点登录屏幕上输入凭据，然后将凭据发送到我的自定义 API 进行验证并验证后将返回给消费者，在 WSO2 碳服务器中配置。

如何从 Eclipse 启动 WSO2 身份服务器。我用的是靛蓝味。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:34:18.640

关于从 Eclipse 启动身份服务器的第二个问题，您可以将 WSO2 Developer Studio 插件与 Eclipse 一起使用，并将身份服务器作为 Cabon 服务器实例启动。有关更多信息[，请参阅开发人员工作室文档](http://dist.wso2.org/products/developer-studio/2.1.0/docs/)

# javascript - 用他的等价物替换缩写的Javascript

> ID：13154066
> 
> 赞同：0
> 
> 时间：2012-10-31T08:40:48.337
> 
> 标签：javascript, text, replace, onkeypress

我在使用 javascript 时遇到了一些麻烦。

事实上，我的数据库中有许多缩写和等价的记录，

例如，替换 tel => 电话等...

所以我有这个功能

```
$('#tags').keyup(function(e){
    var code = e.which ? e.which : e.keyCode;
     console.log(code);
    if (code == 'tel'){
        var input = this.value;
        input = input.substr(0, input.length -1);
        console.log(input);
        input += 'tel';
        this.value = input;        
    }

}); 
```

实际上这不起作用，问题是我在javascript的控制台中没有错误。

任何帮助将不胜感激。

亲切的问候。

SP。

​</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T08:54:40.707

这应该有效：

```
$('#tags').keyup(function(e){
    var code = e.which ? e.which : e.keyCode;
    var input = this.value;
    if (input.indexOf('tel') != -1) {
       this.value = this.value.replace(/\btel\b/gi,'telephone');

    }

}); 
```

这是一个[小提琴](http://jsfiddle.net/3z3sP/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T08:50:27.163

使用`keyup()`事件处理程序时，仅返回按下键的键码。例如 x 导致 e = 88。

用于`$("#tags").val()`获取输入元素的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T08:57:39.417

`keyCode`or属性不返回字符串，`which`甚至不返回单个字符。它返回代表客户端敲击的键的*键代码。*如果要获取对应的 char: `String.fromCharCode(e.which || e.keyCode);`。
例如，如果用户按下`a`键，键码将为`97`，`String.fromCharCode(97)`返回`a`。

如果您想知道天气或元素的当前值是否包含缩写：`tel`，您需要做的是：

```
$('#tags').keyup(function(e)
{
    this.value = this.value.replace(/\btel\b/gi,'telephone');
}); 
```

这是未经测试的，*很可能*需要更多的工作，但是AFAIK，你想替换所有出现的`tel`by `telephone`。我使用的表达式`/\btel\b/`替换所有 substrings `tel`，前提是它们前后有一个单词边界（以避免替换单词的一部分）。
并不是说字符串的结尾和破折号也都被视为单词边界。如果我想打字`television`，我最终会打字`telephoneevision`。为避免这种情况，您需要稍微复杂一点的表达式。[这是一个](https://stackoverflow.com/questions/832257/javascript-multiple-replace/9514142#9514142)如何避免 JS 将破折号视为边界的示例，只需对其进行处理以考虑字符串结尾

*更新*

也许这个表达式并不像我想象的那么简单，所以我建议你使用以下表达式：

```
this.value = this.value.replace(/(?:(\-?\b))tel(?:(\b\-?.))/gi,function(all,b1,b2)
{
    if (b1 === '-' || b2.charAt(0) === '-')
    {//dash, don't replace
        return all;
    }//replace
    return b1 + 'telephone' + b2;
}); 
```

输入：*我需要一个电话，很快*==>*我需要一个电话，很快*
*我需要一个电话*==>*我需要一个电话*（如果用户还在打字，不要替换，他可能正在输入望远镜，提交时替换或模糊）
*我想预订今晚的旅馆*==>*我想预订今晚的旅馆*
*访问特拉维夫*==>*访问特拉维夫*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T08:53:36.470

当以这种方式使用 keypress 时，`code`变量将包含按下字符的**字符代码**。不是像预期的'tel'那样的字符串。您可以使用`onkeyup`/ `onchange`event 并检查输入元素的 val() 并使用`replace()`将缩写更改为预期的字符串。

```
$('#tags').keyup(function(e){

    var elem = $(this);
        var input = elem.val();

        // input = input.substr(0, input.length -1);  // This might not be necessary
        console.log(input);

        // do the replacement
        input = input.replace('tel','telephone');

        elem.val(input);        
    }

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T08:44:21.207

使用[replace](http://www.w3schools.com/jsref/jsref_replace.asp)方法替换字符串中的单词。

例如：

```
var str = "This is AIR";
var newstr = str.replace("AIR", "All India Radio");
console.log(newstr); 
```

# c - 如何在 C 中切换 int / _Bool

> ID：13154073
> 
> 赞同：18
> 
> 时间：2012-10-31T08:41:16.800
> 
> 标签：c, boolean, int, toggle

假设我们有一个并且想要以布尔方式在和`int`之间切换。我想到了以下几种可能：`0``1`

```
int value = 0; // May as well be 1

value = value == 0 ? 1 : 0;
value = (value + 1) % 2;
value = !value; // I was curious if that would do... 
```

1.  第三个似乎有效。为什么？是谁决定`!0`的`1`？
2.  这些有什么问题吗？
3.  还有其他可能性吗？例如按位运算符？
4.  哪个提供最佳性能？
5.  所有这些都与`_Bool`（或`bool`来自stdbool.h）相同吗？如果不是，有什么区别？

编辑：很多很好的答案，有很多有价值的信息，谢谢！不幸的是，我只能接受一个。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-31T08:43:49.803

`value = !value;`直接表达你想要做的事情，并且它完全按照定义做你想做的事情。

使用该表达式。

从 C99 6.5.3.3/5“一元算术运算符”开始：

> 逻辑否定运算符的结果！如果其操作数的值比较不等于 0，则为 0，如果其操作数的值比较等于 0，则为 1。结果的类型为 int。表达式 !E 等价于 (0==E)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-31T08:45:15.120

> 第三个似乎有效。为什么？谁决定！0 是 1？

C 标准保证`!0`是`1`.

> 还有其他可能性吗？例如按位运算符？

是的，您可以使用异或运算符：

`value ^= 1;`

顺便说一句，我更喜欢这种方式， `value = !value;`因为关系和相等运算符会导致分支，而按位运算符通常不会。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-10-01T21:38:42.713

```
value = 1 - value; // toggle from 0 to 1 ... or 1 to 0
                   // when you know initial value is either 0 or 1 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-31T08:48:08.733

1.  语言就是这样设计的。
2.  使用第三个，其他的都是正确的，但不必要的复杂，因此隐藏了意图。
3.  `value = (value ^ 1) & 1;`
4.  优化后都一样。
5.  `_Bool`会有相同的结果。_Bool 唯一不同的是值被强制为 1 或 0。这意味着`bool x = 55;`它将具有值`x == 1`

编辑：由于我的脑残，更正了 3 中的公式。我让评论让人们可以看到我的花絮。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-31T08:47:10.763

`value = !value`似乎是最合理的一种，但您也可以使用`value = 1 - value`or `value ^= 1`。`value`但如果is not`0`或，最后两个都会中断`1`。第一个仍然可以工作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-31T09:14:40.627

根据架构的不同，替代方案可能存在明显的性能问题：

*   !a 在某些架构中可能需要比较和分支，这可能会很昂贵，具体取决于“a”的模式
    *   在某些架构上，有条件移动（无分支），但
        可能仍需要 3 条指令才能完成（有依赖关系）
*   1-a 在许多架构中很可能需要两条指令
    *   反例：ARM 有反向减法**RSB** %r0, %r0, #1
*   1^a 可以用一条指令在许多架构中实现
*   a=(a+1) % 2 最有可能优化为 a=(a+1)&1，这需要 2 条指令

但无论如何，优化的第一条规则是不要优化非工作代码。要将 !a 替换为 a^1，必须 100% 确定它始终会产生预期值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-31T08:50:29.337

您的表达式`value = value == 0 ? 1 : 0;`将与`value = !value;`. 您可以使用两者中的任何一个。

`!0`总是`1`而且`!(any non zero value)`也是`0`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-03T00:07:45.573

使用按位 NOT 运算符

变种=〜变种；

# java - Java thread.stop() 如何工作？

> ID：13154074
> 
> 赞同：8
> 
> 时间：2012-10-31T08:41:18.820
> 
> 标签：java, multithreading

我实际上正在寻找一种更简单的方法来杀死线程，无论线程在哪里运行。但是互联网上的大多数解决方案都指向我使用布尔标志来控制线程的执行，如果我想停止线程然后将布尔变量设置为 false。

但是，如果可运行的任务是一个 LONG 线性任务，这意味着该任务不重复怎么办？在这种情况下，创建一个“while”循环来覆盖整个任务块并不容易。

使用 Thread.stop 真的很诱人，但警告“已弃用”似乎使用起来很危险。我已通读这篇文章 [为什么不推荐使用 Thread.stop、Thread.suspend、Thread.resume 和 Runtime.runFinalizersOnExit？](http://docs.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html)

但我无法理解

> 如果以前受这些监视器保护的任何对象处于不一致状态，则其他线程现在可能会查看这些处于不一致状态的对象。据说这些物体已损坏。

“不一致的状态”是什么意思？如果有人可以对此进行解释，我将不胜感激。

我想将我的问题扩展到更低级别的视图，比如说`i = i + 1;`在 JVM（可能是汇编语言）中，也许这个 Java 语句会被分成几个更小的指令，例如`move i ; add i ; get i into memory 0x0101`（这是一个例子！我完全不知道）不懂汇编语言！）

现在，如果我们调用thread.stop，它实际上会停在哪里？线程会在完成 Java 语句后停止，还是可能处于“汇编语言”的中间？如果答案是第二个，难道是我们说的理由

> 据说这些物体已损坏。

?

好的，我的问题有点困惑，希望有人能理解和解释。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T08:53:41.867

“损坏的对象”是一个高级概念，它不会发生在 JVM 级别。程序员通过用锁保护关键部分来设计他的类时考虑到线程安全。每个关键部分要么完全运行，要么根本不运行，这是他的类的一个不变量。当你`stop`一个线程时，一个临界区可能在中间被打断了，所以打断了不变量。在那一刻，物体被*损坏了*。

停止一个线程会隐藏更多的危险，比如没有执行清理，没有释放获取的资源等。如果一个线程不放弃它正在做的事情，就没有办法在不损害整个应用程序的情况下让它停止。

在实践中，每当需要运行可能需要强制中止的外来代码时，这必须在**单独的进程**中完成，因为杀死一个进程至少会执行操作系统级别的清理，并且可以更好地控制损坏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T09:05:07.613

“不一致的状态”是指您的应用程序关心的数据状态，即您的应用程序逻辑通过使用锁/监视器等使您的应用程序线程安全而精心生成的状态。

想象一下你有这个简单的方法：

```
public synchronized void doSomething() 
{
      count++;
      average = count/total;
} 
```

此方法与其他方法是同步的，因为多个线程正在使用此对象。也许有一个

```
public synchronized AverageAndCount getMeasurement() 
{
   return new AverageAndCount(average, count);
} 
```

这确保了线程不能读取不完整的测量值，即如果当前测量值正在内部计算，例如 doSomething()，getMeasurement() 将阻塞/等待，直到完成。

现在，想象 doSomething 在一个线程中运行，然后您调用`.stop()`该线程。

所以线程可能会在它执行后立即停止 `count++;`，持有的监视器被解锁并且方法终止并且`average = count/total;`不被执行，

这意味着数据现在不一致。之后调用 getMeasurement() 的任何人现在都会得到不一致的数据。

还要注意，此时无论是在 java 语句级别还是在较低级别发生这种情况都不是很相关，数据可能处于您在任何情况下都无法推理的不一致状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T08:56:41.740

我不是专家，但这是我的想法。如果你使用`Thread.stop()`你会导致`ThreadDeath`异常，这将导致所有监视器被释放。由于您引发了异常，因此您将不自然的行为应用于事物的状态。

依赖这些监视器的其他线程可能会进入不一致的情况，因为他们没有预料到。而且我认为您甚至无法预期显示器发布订单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T08:58:02.357

我认为担心的是线程可能处于同步块的中间，对对象的成员执行多步更新。如果线程突然停止，那么会发生一些更新，但不会发生其他更新，现在对象的状态可能会使其无法使用。

我怀疑 ThreadDeath 处理是否会释放一个由它`Lock`支持的`AbstractQueuedSynchronizer`可能会使应用程序陷入某种死锁的路径。

在您的长代码序列中的任何逻辑点，您都可以简单地添加：

```
if (Thread.interrupted())  {
    throw new InterruptedException();
} 
```

`Thread.interupt()`...如果确定在`Thread`执行长时间运行的任务时调​​用了它，则此时将退出执行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-18T08:07:35.557

停止线程的方法不清楚。实际上，只要 run() 方法完成或发生任何异常，线程就会停止。通过使用布尔标志变量。默认情况下，不推荐使用 stop() 方法。默认为“false”

# c# - 是否可以在 DataTable 或 DataRows 上使用 IDataReader？

> ID：13154076
> 
> 赞同：1
> 
> 时间：2012-10-31T08:41:41.390
> 
> 标签：c#, asp.net, datarow, idatareader

我有一个使用 IDataReader 填充对象的函数：

```
private void FillDataItem(IDataReader datareader)
{
    this.CompanyCode = datareader.GetString(datareader.GetOrdinal("COMPANY"));
    this.Name = datareader.GetString(datareader.GetOrdinal("NAME"));
    //...and so on
} 
```

这在使用 SqlDataReader 根据 SQL 查询的结果填充对象的字段时非常有用。几乎我所有的课程都有这种需要 IDataReader 的“FillDataItem”。使将数据库对象带入代码变得非常容易。

但是，现在我想做同样的事情，但使用来自 DataTable 的 DataRow 作为数据源。情况是出现了一个自定义构建的 DataTable，它的格式（相同的列）与来自 SQL 查询的格式完全相同，但它不是来自任何类似的外部数据源。我想循环遍历 DataTable 的行，并以与上述 FillDataItem() 方法相同的方式对每一行填充一个对象。

当然，我可以创建一个以 DataRow 作为参数的重载新方法：

```
private void FillDataItem(DataRow datarow)
{
    this.CompanyCode = datarow["COMPANY"].ToString();
    this.Name = datarow["NAME"].ToString();
    //...and so on
} 
```

但这与 IDataReader 版本非常相似，我真的很想知道如何通过一种方法实现我的目标，这样就不需要复制类似的代码。考虑到我有很多字段，FillDataItem 方法大概有 200 行。将其复制/粘贴到 DataRow 版本中似乎很浪费且难以维护。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:46:39.053

数据表上有一个 CreateDataReader 方法。您可以使用它将数据读取器传递给您现有的代码。

[http://msdn.microsoft.com/en-us/library/system.data.datatable.createdatareader.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.createdatareader.aspx)

# c# - 如何将类型作为参数传递给通用返回对象

> ID：13154078
> 
> 赞同：0
> 
> 时间：2012-10-31T08:41:46.770
> 
> 标签：c#, generics

我有一个方法 Handle 需要返回一个泛型类型 GetCmdResult。现在，类型是一个正在发送的参数。但如果我写“return new GetCmdResult”或“new PSDto()”，它会引发编译时错误。我们如何将类型传递给泛型？

```
public class GetCmdResult<T> : CR
{
    public PSDto<T> PS{ get; set; }
}

public CR Handle(Type type)
{
    return new GetCmdResult<type>
               {
                   PS= new PSDto<type>()
               };
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T08:43:52.080

可以在此方法上使用泛型参数。

```
public CR Handle<T>(    
{
     return new GetCmdResult<T>
                   {
                       PS= new PSDto<T>()
                   };
} 
```

# java - 从点分隔的字符串列表创建 JTree

> ID：13154079
> 
> 赞同：1
> 
> 时间：2012-10-31T08:41:47.547
> 
> 标签：java, swing, jtree, treenode, treemodel

我正在创建一个编辑器应用程序，但我的菜单有问题。在对象菜单中，我想使用`JTree`. 这些对象类型由插件动态注册并遵循以下样式：

```
trigger.button
trigger.lever
out.door.fallgate
trigger.plate
out.door.door
... 
```

此名称列表未排序，我想为这样的`TreeNode`结构构建`JTree`：

*   扳机
    *   按钮
    *   杠杆
    *   盘子
*   出去
    *   门
        *   落门
        *   门

此外，如果用户选择叶节点，我需要从`TreePath`. 有人可以建议如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:51:21.223

在伪代码中，这就是你需要做的......

```
public TreeNode buildTree(){
    String[] names = new String[]; // fill this with the names of your plugins

    TreeNode tree;

    // for each plugin name...
    for (int i=0;i<names.length;i++){
        String currentName = names[i];
        String[] splitName = currentName.split(".");

        // loop over the split name and see if the nodes exist in the tree. If not, create them
        TreeNode parent = tree;
        for (int n=0;n<splitName.length;n++){
            if (parent.hasChild(splitName[n])){
                // the parent node exists, so it doesn't need to be created. Store the node as 'parent' to use in the next loop run
                parent = parent.getChild(splitName[n]);
            }
            else {
                // the node doesn't exist, so create it. Then set it as 'parent' for use by the next loop run
                TreeNode child = new TreeNode(splitName[n]);
                parent.addChild(child);
                parent = child;
            }
        }

return tree;
} 
```

这只是伪代码——您需要完成正确实现 TreeNode 方法的工作，等等。自己尝试一下——如果您还有其他问题，请提出问题并向我们展示您已尝试自己完成，那么我们将更愿意帮助您解决小问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:49:27.540

*   请参阅[Oracle JTree 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)

*   部分[动态改变树](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#dynamic)，检查代码示例

*   [类似的想法](http://www.java2s.com/Tutorial/Java/0240__Swing/AddingaNodetoaJTreeComponent.htm)

# objective-c - 可达性类将主机状态返回为 NotReachable

> ID：13154082
> 
> 赞同：0
> 
> 时间：2012-10-31T08:42:07.363
> 
> 标签：objective-c

我正在尝试使用以下代码检查我的服务器的可达性状态：

```
struct sockaddr_in address;
address.sin_len = sizeof(address);
address.sin_family = AF_INET;
address.sin_port = htons(80);
address.sin_addr.s_addr = inet_addr("172.21.38.120");  

Reachability *hostReachable = [Reachability reachabilityWithAddress:&address];
[hostReachable startNotifier]; 
```

然后检查主机状态，但它总是给出状态为 NotReachable。我尝试使用以下命令检查服务器是否可以从终端访问：

```
telnet Hostname port 
```

终端显示状态为已连接。有什么我做错了吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:43:21.397

自从升级到 XCode 4.6 这对我来说也是一个问题。我可以让它在没有端口的情况下工作 - 例如 10.1.1.1 工作， 10.1.1.1:8000 没有。以前两者都有效。此外，XCode 和 Simulator 可以缓存结果/值，所以如果它不起作用，请尝试“清理”或重置您的模拟器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:50:32.663

尝试将reachabilityWithAddress 更改为reachabilityWithHostname。

参考：[https ://github.com/tonymillion/Reachability/issues/9](https://github.com/tonymillion/Reachability/issues/9) [http://lists.apple.com/archives/macnetworkprog/2009/May/msg00056.html](http://lists.apple.com/archives/macnetworkprog/2009/May/msg00056.html)

# android - 更改 ImageView 图像，变量错误？

> ID：13154085
> 
> 赞同：0
> 
> 时间：2012-10-31T08:42:22.293
> 
> 标签：android, sdk

我正在尝试更改图像视图中的图像，但是当我在 oncreate 中设置变量时，它给了我一条黄线，因此我无法更改图像。

在这个应用程序中，我正在检查 Internet 连接。基本上，如果互联网连接可用，我想显示某个图像；如果不是，我想为此展示一张图片。

这是我的代码：

```
 @Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ImageView imagev = (ImageView) findViewById(R.id.imageView1);

    Button btnStatus = (Button) findViewById(R.id.btn_check);

    // creating connection detector class instance
    cd = new ConnectionDetector(getApplicationContext());

    /**
     * Check Internet status button click event
     * */
    btnStatus.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            // get Internet status
            isInternetPresent = cd.isConnectingToInternet();

            // check for Internet status
            if (isInternetPresent) {
                // Internet Connection is Present
                // make HTTP requests
                showAlertDialog(AndroidDetectInternetConnectionActivity.this, "Internet Connection",
                        "You have internet connection", true);
                imagev.setImageDrawable(getResources().getDrawable(R.drawable.withinternet));

            } else {
                // Internet connection is not present
                // Ask user to connect to Internet
                showAlertDialog(AndroidDetectInternetConnectionActivity.this, "No Internet Connection",
                        "You don't have internet connection.", false);
                imagev.setImageDrawable(getResources().getDrawable(R.drawable.nointernet));
            }
        }

    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:45:28.413

您需要将 ImageView 声明为 final 才能在内部类中使用它：

```
final ImageView imagev = (ImageView) findViewById(R.id.imageView1); 
```

顺便说一句 Eclipse 应该显示错误消息

> 无法在以不同方法定义的内部类中引用非最终变量 imagev

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:51:36.597

将图像视图声明为类变量，即 imageV 应在 onCreate（作为类变量）之前声明，而不是在其内部。它会解决你的问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:11:09.647

公共类 {activity_name} 扩展 Activity { static ImageView imagev;

@Override public void onCreate(Bundle savedInstanceState) {

```
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

//ImageView imagev = (ImageView) findViewById(R.id.imageView1);
 //This activity name. Mainactivity if it is so.
  {activity_name}.imagev = (ImageView) findViewById(R.id.imageView1);

Button btnStatus = (Button) findViewById(R.id.btn_check);

// creating connection detector class instance
cd = new ConnectionDetector(getApplicationContext());

/**
 * Check Internet status button click event
 * */
btnStatus.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        // get Internet status
        isInternetPresent = cd.isConnectingToInternet();

        // check for Internet status
        if (isInternetPresent) {
            // Internet Connection is Present
            // make HTTP requests
            showAlertDialog(AndroidDetectInternetConnectionActivity.this, "Internet Connection",
                    "You have internet connection", true);
            {activity_name}.imagev.setImageDrawable(getResources().getDrawable(R.drawable.withinternet));

        } else {
            // Internet connection is not present
            // Ask user to connect to Internet
            showAlertDialog(AndroidDetectInternetConnectionActivity.this, "No Internet Connection",
                    "You don't have internet connection.", false);
            {activity_name}.imagev.setImageDrawable(getResources().getDrawable(R.drawable.nointernet));
        }
    }

}); 
```

}

# linux - 如何在 CentOS 5.8 中重新编译星号？

> ID：13154089
> 
> 赞同：1
> 
> 时间：2012-10-31T08:42:37.930
> 
> 标签：linux, centos, asterisk, pbx

我已经安装了 asteriskNow 2.0 ISO，因此在系统安装后，我已经在 CentOS 中内置了星号。我不需要下载源包和编译源文件。但是现在，我遇到了需要再次重新编译星号的情况。

我查看了安装教程，需要到星号源目录执行以下命令：

```
# make clean
# ./configure
# make menuselect
# make install
# make samples 
```

我的问题：星号源目录是指有星号安装文件的目录吗？但就我而言，我从来没有下载和编译星号源。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:01:33.633

我问自己：它需要从那里下载源代码并执行以下命令：

```
wget http://downloads.asterisk.org/pub/telephony/asterisk/asterisk-1.8.17.0.tar.gz
tar xzf asterisk-1.8.17.0.tar.gz
cd asterisk-1.8.17.0
./configure
make
make install 
```

# windows - 使用 dir 的输出复制新文件

> ID：13154090
> 
> 赞同：1
> 
> 时间：2012-10-31T08:42:44.557
> 
> 标签：windows, batch-file

我想复制具有扩展名`.rdl`但名称不包含`- Backup.rdl`.

我可以使用获取列表，`dir *.rdl /b | findstr /vi " - Backup.rdl"`但如何使用此列表复制新文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:01:25.837

```
ROBOCOPY C:\Source C:\Dest *.rdl /XF "* - Backup.rdl" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:12:20.170

例如，使用此命令将它们复制到副本目录中。注意`^`前面的`|`

```
for /f %i in ('dir *.rdl /b ^| findstr /vi " - Backup.rdl"') do copy %i copies 
```

如果你想要它在你需要的批处理文件中`%%i`

```
for /f %%i in ('dir *.rdl /b ^| findstr /vi " - Backup.rdl"') do copy %%i copies 
```

# asp.net-mvc-3 - 我应该添加什么来获得 Visual Studio 2010 中的测试方法

> ID：13154093
> 
> 赞同：0
> 
> 时间：2012-10-31T08:42:50.907
> 
> 标签：asp.net-mvc-3

[TestMethod] 没有进入智能感知，它显示为红色。
这是我的控制器

```
 [TestMethod]  
 public ActionResult Index()  
 {           
    return View();    
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:35:31.100

您必须包含命名空间 Microsoft.VisualStudio.TestTools.UnitTesting：

```
using Microsoft.VisualStudio.TestTools.UnitTesting 
```

并添加对程序集 Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll 的引用

[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testmethodattribute(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testmethodattribute%28v=vs.100%29.aspx)

# asp.net - ASP.NET 发生异常时如何记录请求 url？

> ID：13154097
> 
> 赞同：3
> 
> 时间：2012-10-31T08:43:09.547
> 
> 标签：asp.net, logging

`[2012/10/31 16:08:23] FATAL: An unhandled error occurred. - Exception : A potentially dangerous Request.Path value was detected from the client (%).`我在我的日志文件中看到了数千个“ ”。

我认为有人正在使用攻击工具尝试恶意请求。我无法在本地环境中重现它。

我在 Global.asax, Application_Error 事件中执行此操作。

```
protected void Application_Error(object sender, EventArgs e)
{
    var ex = Server.GetLastError();
    if (null != ex)
    {
        Edi.Web.Logging.Logger.Fatal("An unhandled error occurred. ", ex);
    }
} 
```

但是我怎样才能记录特定的请求 url，它也是危险的“Request.Path”？

（在 Application_BeginRequest 中记录每个 request.path 不是一个好主意，我只想记录导致此异常的那个）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:51:07.777

希望，这就是你想要的：

```
protected void Application_Error(object sender, EventArgs e)
{        
    var ex = Server.GetLastError();
    if (null != ex)
    {
        Edi.Web.Logging.Logger.Fatal("An unhandled error occurred. " + "---Page:"
            + HttpContext.Current.Request.Url.ToString(), ex);
    }
} 
```

# javascript - 如果调用 Strophe.Connection.sendIQ，Strophe.Connection.addHandler 无效

> ID：13154102
> 
> 赞同：5
> 
> 时间：2012-10-31T08:43:37.900
> 
> 标签：javascript, jquery, xmpp, strophe

我对 Strophe.Connection.addHandler 和 Strophe.Connection.sendIQ 有疑问。下面的代码可以工作：

```
Strophe.Connection.addHandler(context.onMessage, null, 'message')

onMessage = function (msgXML){
    var to = msgXML.getAttribute('to');
    var from = msgXML.getAttribute('from');
    var fromBareJid = Strophe.getBareJidFromJid(from);
    var type = msgXML.getAttribute('type');
    var elems = msgXML.getElementsByTagName('body');
    var body = elems[0]
    var text = Strophe.getText(body);
    return true;
} 
```

但是如果我在调用addHandler之后调用setContactData，onMessage方法永远不会被回调，但是onRoster方法可以在sendIQ之后调用。

```
setContactData = function(){
    var iq = $iq({
        type: 'get'
    }).c('query', {
        xmlns: 'jabber:iq:roster'
    });
    Strophe.Connection.sendIQ(iq, context.onRoster);
}

onRoster = function(iq){
    $(iq).find('item').each(function(){
        var jid = $(this).attr('jid');     
        // transform jid into an id
        var jid_id = CommonUtil.getNameFromJid(jid);
        userList = userList + "','" + jid_id;
    }); 
```

为什么不能回调onMessage？根本原因是什么？我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:19:17.780

试试这个：

```
addHandler(context.onMessage, null, 'message', 'chat')//or 'normal' 
```

**来自 Wrox Professional XMPP Programming with JavaScript and jQuery Book：**
addHandler() 函数采用一个或多个参数。第一个参数是接收到匹配节时调用的函数。其余参数是匹配标准。
这些参数的完整列表显示在 Strophe 源代码的这个缩写函数定义中：

```
addHandler: function (handler, ns, name, type, id, from) {
// implementation omitted
} 
```

如果任何条件为空或未定义，则任何节都将匹配。否则，仅当节的特定部分中的字符串相等性满足条件时，节才会匹配。
最后四个条件——名称、类型、id 和 from——指定节的元素名称和类型、id 和 from 属性的过滤器。这四个条件仅在顶级元素上检查，而不是在任何元素的后代上检查。第一个标准 ns 稍有不同，它会检查顶级元素及其直接子元素。你很快就会明白为什么。名称标准几乎总是为空，以匹配任何节，或消息、存在或 iq 之一。addHandler() 示例设置了一个处理程序，它将为接收到的任何节调用。
类型、id 和 from 标准与 和 节的主要属性相匹配。
您可以使用 type 来区分常规聊天消息和群聊消息，或者将 IQ 结果节与 IQ 错误节分开。id 标准通常用于处理对特定请求的回复，例如与特定 IQ-get 请求关联的 IQ-结果。

# queue - sun gridengine 错误“作业 119232.1 的牧羊人退出，退出状态 = 26”

> ID：13154105
> 
> 赞同：3
> 
> 时间：2012-10-31T08:43:47.183
> 
> 标签：queue, sungridengine

我们使用gridengine（完全开放的grid scheduler 2011.11.p1）作为批处理系统。刚才我添加了一个名为 execd 的主机`host094`，但是当在那里提交作业时，发出错误，作业状态为`Eqw`，登录`$SGE_ROOT/default/spool/host094/messages`说：

```
shepherd of job 119232.1 exited with exit status = 26
can't open usage file active_jobs/119232.1/usage for job 119232.1: No such file or directory 
```

什么意思？

# java - 排序 Arraylist of Arraylist of Bean

> ID：13154108
> 
> 赞同：1
> 
> 时间：2012-10-31T08:43:54.120
> 
> 标签：java, sorting, collections

我有一个`ArrayList`Bean `ArrayList`，我需要`ArrayList`根据`date`Bean 中的变量对其进行排序。

```
ArrayList<ArrayList<DriverLogDatePair>> driverLogList 
```

并且`DriverLogDatePair`bean 有一个变量`DateTime date`，它也有一个`compareTo`方法。

```
public int compareTo(DriverLogDatePair o) {
    return date.compareTo(o.date);
} 
```

但我无法排序`driverLogList`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:51:27.370

您必须完成此代码：

```
ArrayList<ArrayList<DriverLogDatePair>> driverLogList = new ArrayList<>();
Collections.sort( driverLogList, new Comparator<ArrayList<DriverLogDatePair>>(){
   @Override public int compare(
      ArrayList<DriverLogDatePair> left,
      ArrayList<DriverLogDatePair> right )
   {
      return 0;
   }}); 
```

因为第一个数组包含一个包含 Comparable 的数组。您提供的比较器适用于 DriverLogDatePair 而不是 ArrayList< DriverLogDatePair >

（......在这篇文章的评论之后......）

根据您的要求，我建议完成比较器：

```
int size = left.size();
int diff = size - right.size();
if( diff != 0 ) return diff;
for( int i = 0; i < size; ++i ) {
   diff = left.get( i ).compareTo( right.get(i) );
   if( diff != 0 ) return diff;
} 
```

但我不知道这种比较的真正含义。这是一个语义问题，这真的是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:49:51.300

问题是，如果您对它进行排序`driverLogList`，它会尝试比较包含的`ArrayList`对象。我会为该列表编写一个包装器：

```
public class DriverLogDatePairList extends ArrayList<DriverLogDatePair> implements Comparable<DriverLogDatePairList> {

    public int compareTo(DriverLogDatePairList o) {
        //your comparison criteria
    }
} 
```

然后你可以这样使用它并对其进行排序：

```
ArrayList<DriverLogDatePairList> driverLogList; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:50:27.740

通常，您可以`List`使用排序 s

```
Collections.sort( list , comparator ) 
```

因此，假设您要对内部列表进行排序，在实现了合适的比较器之后，遍历外部列表并使用该构造对元素进行排序：

```
Comparator comparator = 
    new Comparator<DateTime>()
    {
        @Override
        public int compare( DateTime o1, DateTime o2 )
        {
            return o1.compareTo( o2 );
        }
    } 
```

干杯，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T08:50:48.510

你的比较方法对我来说似乎是错误的..

它应该是这样的：（这里我假设日期为 DriverLogDatePair 对象）

```
public int compareTo(DriverLogDatePair o) {
    if(date.date < o.date) return -1;
    else if (date.date < o.date) return 0;
    else return 1;
} 
```

# java-ee-6 - Shiro 间歇性 Subject.getPrincipal

> ID：13154114
> 
> 赞同：3
> 
> 时间：2012-10-31T08:44:12.720
> 
> 标签：java-ee-6, shiro

我已经创建了一个 JavaEE6 项目，目前我正在使用 Shiro 进行身份验证和授权。使用本文作为参考（[通过 CDI 拦截器使用 Shiro 进行授权，然后使用 Arquillian 轻松测试](http://spring-java-ee.blogspot.com/2011/04/using-shiro-for-authorization-via-cdi.html)），我已将 Shiro 与 CDI 集成。一切正常，除了有时 Subject.getPrincipal 为空。

此外，调查表明，有时我至少有 2 个 Subject.getSession().getId()。

我如何遇到问题：

1.  登录 -> 使用 sessionA 确定
2.  单击受保护的链接（pageA）-> ok
3.  试图在数据库中插入一条记录失败
4.  单击相同的安全链接（pageA）-> 失败，查看它产生不同会话 id sessionB 的跟踪
5.  刷新再刷新，直到页面（pageA）正常。在登录 sessionA 期间获得了相同的会话 ID。

有什么问题？

我的 shiro.ini 文件

```
[main]
saltedJdbcRealm=com.sido.commons.web.security.shiro.JdbcRealmImpl

# any object property is automatically configurable in Shiro.ini file
saltedJdbcRealm.jndiDataSourceName=Portal 

# the realm should handle also authorization
saltedJdbcRealm.permissionsLookupEnabled=true

# If not filled, subclasses of JdbcRealm assume "select password from users where username = ?"
# first result column is password, second result column is salt 
saltedJdbcRealm.authenticationQuery = SELECT password, salt FROM users WHERE username = ?

# If not filled, subclasses of JdbcRealm assume "select role_name from user_roles where username = ?"
saltedJdbcRealm.userRolesQuery = SELECT name FROM roles a INNER JOIN user_roles b ON a.id=b.role_id INNER JOIN users c ON c.id=b.user_id WHERE c.username = ?

# If not filled, subclasses of JdbcRealm assume "select permission from roles_permissions where role_name = ?"
saltedJdbcRealm.permissionsQuery = SELECT action FROM permissions WHERE role = ?

# password hashing specification, put something big for hasIterations
sha256Matcher = org.apache.shiro.authc.credential.HashedCredentialsMatcher
sha256Matcher.hashAlgorithmName=SHA-256
sha256Matcher.hashIterations=1
saltedJdbcRealm.credentialsMatcher = $sha256Matcher

sessionManager = org.apache.shiro.web.session.mgt.DefaultWebSessionManager
securityManager.sessionManager = $sessionManager
sessionDAO = org.apache.shiro.session.mgt.eis.EnterpriseCacheSessionDAO
securityManager.sessionManager.sessionDAO = $sessionDAO 

cacheManager=org.apache.shiro.cache.ehcache.EhCacheManager 
cacheManager.cacheManagerConfigFile=classpath:shiro-ehcache.xml
securityManager.cacheManager=$cacheManager 

shiro.loginUrl = /login.xhtml

[urls]
/login.xhtml = authc
/logout = logout 
```

web.xml

```
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
</context-param>

<context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>south-street</param-value>
</context-param>

<!-- Welcome page -->
<welcome-file-list>
    <welcome-file>home.xhtml</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<!-- Map these files with JSF -->
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

SecurityProducer，一个 Singleton bean，我在其中实例化安全管理器。它应该对整个应用程序都可用且唯一吗？

```
@Singleton
public class SecurityProducer {
    @Inject
    private Logger log;
    private SecurityManager securityManager;

    @PostConstruct
    public void init() {
        final String iniFile = "classpath:shiro.ini";
        log.debug("Initializing Shiro INI SecurityManager using " + iniFile);
        securityManager = new IniSecurityManagerFactory(iniFile).getInstance();
        SecurityUtils.setSecurityManager(securityManager);
    }
    ..
} 
```

在初始化（Singleton bean）时绑定 SecurityManager 或 Subject 并不能解决问题。

```
final String iniFile = "classpath:shiro.ini";
securityManager = new IniSecurityManagerFactory(iniFile).getInstance();
SecurityUtils.setSecurityManager(securityManager);
ThreadContext.bind(SecurityUtils.getSubject()); or ThreadContext.bind(securityManager); 
```

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:11:52.447

我想我已经通过在此处配置 web.xml 基础解决了间歇性会话问题：http: [//shiro.apache.org/web.html](http://shiro.apache.org/web.html)。

目前它的外观如下：http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">

```
<!-- Welcome page -->
<welcome-file-list>
    <welcome-file>home.xhtml</welcome-file>
</welcome-file-list>
<listener>
    <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
</listener>
<filter>
    <filter-name>ShiroFilter</filter-name>
    <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>ShiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
    <dispatcher>ERROR</dispatcher>
</filter-mapping>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<!-- Map these files with JSF -->
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

但这真的是解决方案吗？有任何想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:07:40.533

如果要手动构建主题，则应将其绑定到调用线程 `ThreadContext.bind(subject)`。如果您不这样做，下一次调用`SecurityUtils.getSubject()`将返回新的主题，而不是您之前创建的主题。

例如，在我的应用程序中，我收到了请求中的会话 ID 并从中创建了一个主题。

```
Subject subject = new Subject.Builder().sessionId(sessionId).buildSubject();
ThreadContext.bind(subject); 
```

# javascript - jQuery miniColors 颜色选择器未正确定位

> ID：13154120
> 
> 赞同：0
> 
> 时间：2012-10-31T08:44:37.117
> 
> 标签：javascript, jquery, html, color-picker

我正在使用 jQuery [miniColors 颜色](http://www.abeautifulsite.net/blog/2011/02/jQuery-minicolors-a-color-selector-for-input-controls/)选择器，但在示例代码中，选择器出现在字段和按钮旁边，在我的情况下，它出现在文档的最底部，就好像它无法读取位置数据按钮调用它。

有人对这个插件有类似的问题吗？

这是我的代码的样子（在 jQuery 将其初始化为颜色选择器之前）

```
<p style='position:absolute;top:0px;left:0px;margin-left:10px;'>
    <input type='text' class='color-picker miniColors' name='data_0' id='data_0' size='6' value='".$data[0]."' />
</p> 
```

. 在我运行这段代码之后。

```
$('#data_0').miniColors({
   change: function(hex, rgb) {     $('#slide_bg').css("background-color",hex); }   
}); 
```

. 它看起来像这样。

```
<p style="position:absolute;top:0px;left:0px;margin-left:10px;">
<input type="text" class="color-picker miniColors" name="data_0" id="data_0" size="6" value="#ffffff" maxlength="7" autocomplete="off">

<span class="miniColors-triggerWrap">
<a class="miniColors-trigger" style="background-color: #ffffff" href="#"></a>
</span>

</p> 
```

. 实际的颜色选择器被插入到我的最后一个（所以就在 and 之前，看起来像这样：

```
<div class="miniColors-selector color-picker miniColors" style="left: 116px; ">
    <div class="miniColors-hues">
        <div class="miniColors-huePicker" style="top: 0px; "></div>
    </div>
    <div class="miniColors-colors" style="background-color: rgb(255, 0, 0); ">
        <div class="miniColors-colorPicker" style="top: -5px; left: -5px; ">
            <div class="miniColors-colorPicker-inner"></div>
        </div>
    </div>
</div> 
```

. 并出现在我页面的页脚下方=(

如您所见，它有一个 left:116px 的值，但没有垂直定位的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:41:14.807

请考虑尝试[MiniColors 2.0](http://www.abeautifulsite.net/blog/2011/02/jquery-minicolors-a-color-selector-for-input-controls/)，它改变了下拉处理定位的方式。这个版本是对原始版本的完全重写。我们还添加了一些您可能会觉得有用的新功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:10:13.330

尝试将字段放在段落中并使用 css 定义段落的位置，它将起作用。

例如 -

```
<p style="position: absolute; left: 100; top: 100; margin-left: 10px;">
 <input type="input" name="color-picker" class="color-picker" size="7" />               
</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-26T11:23:59.053

**解决方案：**

这就是我解决它的方法。解决方案有点生涩。我使用`show callback`并添加了基于视图的删除类

```
// add jquery function removeClassPrefix
$.fn.removeClassPrefix = function(prefix) {
  this.each(function(i, it) {
    var classes = it.className.split(' ').map(function(item) {
      return item.indexOf(prefix) === 0 ? '' : item;
    });
    it.className = classes.join(' ');
  });

  return this;
};
// add more selector expressions to jquery
$.extend($.expr[':'], {
  'off-top': function(el) {
    return $(el).offset().top < $(window).scrollTop();
  },
  'off-right': function(el) {
    return $(el).offset().left + $(el).outerWidth() - $(window).scrollLeft() > $(window).width();
  },
  'off-bottom': function(el) {
    return $(el).offset().top + $(el).outerHeight() - $(window).scrollTop() > $(window).height();
  },
  'off-left': function(el) {
    return $(el).offset().left < $(window).scrollLeft();
  }
});

// use show event 
$('#div_id').miniColors({
  theme: 'bootstrap',
  show: function() {
    var $input = $(this);
    var $minicolors = $input.parent();
    var $panel = $minicolors.find('.minicolors-panel');
    var classPrefix = 'minicolors-position-';
    $minicolors.removeClassPrefix(classPrefix);
    if ($panel.is(':off-top')) {
      $minicolors.addClass(classPrefix + 'bottom');
    }
    if ($panel.is(':off-bottom')) {
      $minicolors.addClass(classPrefix + 'top');
    }
    if ($panel.is(':off-left')) {
      $minicolors.addClass(classPrefix + 'right');
    }
    if ($panel.is(':off-right')) {
      $minicolors.addClass(classPrefix + 'left');
    }
  }
}); 
```

# asp.net - 会话已经在 ASP .NET Session Per Request 模式中关闭

> ID：13154121
> 
> 赞同：0
> 
> 时间：2012-10-31T08:44:38.690
> 
> 标签：asp.net, nhibernate, ado.net

我在 ASP .NET Web Forms 应用程序中使用 Session Per Request 方法。

这是请求结束时运行的代码，这就是我关闭会话的方式：

```
 protected void Application_EndRequest(object sender, EventArgs e)
    {
        ISession session = ManagedWebSessionContext.Unbind(HttpContext.Current, SessionFactoryProvider.SessionFactory);

        if (session != null)
        {
            if (session.Transaction != null && session.Transaction.IsActive)
            {
                session.Transaction.Rollback();
            }
            if (session.IsOpen)
            {
                session.Close();    
            }
        }
    } 
```

很明显的东西。但是，我在调用**session.Close**时经常遇到异常。异常类型为**SessionException**，消息为：

> {“会话已关闭”}

堆栈跟踪是：

```
 at NHibernate.Impl.SessionImpl.Close() in d:\CSharp\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 343 
```

我使用的 NHibernate 版本是：**3.0.0.4000**

我已经搜索过可以关闭会话的代码，但没有找到。此外，我还使用与会话对象无关的简单请求对其进行了测试，并且仍然相同。有什么想法可能是什么问题？

**编辑：在分而治之的会议之后，我瞄准了一段负责该异常的代码**：

```
 var session = SessionFactoryProvider.GetCurrentSession();
                    using (ITransaction tx = session.BeginTransaction())
                    {
                        session.Update(instrument);
                        tx.Commit();
                    } 
```

如果我将其注释掉，则会话在 EndRequest 处理程序中顺利关闭，并且没有**Session is already closed**引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:50:19.660

我们正在使用`IHttpModule`，这样：

```
public class ModuleSessionNHibernate : IHttpModule
{
        public void Init(HttpApplication context)
        {
            context.BeginRequest += new EventHandler(BeginTransaction);
            context.EndRequest += new EventHandler(CommitAndCloseSession);
        }

        private void CommitAndCloseSession(object sender, EventArgs e)
        {
            // commit or rollback depending on errors
            // then close session
        }

        ...
} 
```

在 web.config 中

```
<httpModules>
    <add name="NHibernateSessionModule" type="XXX.ModuleSessionNHibernate, XXX"/>
</httpModules> 
```

**编辑：**关于提交和关闭会话（但我们使用了很多助手和服务......）

```
 private void CommitAndCloseSession(object sender, EventArgs e)
    {
        try
        {
            if (no exception in context)
            {
                // commit transaction
            }
            else
            {
                // rollback transaction
            }
        }
        finally
        {
            try
            {
                // close session
            }
            catch (Exception ex)
            {
                // send email                       
            }

                // rollback
                // close

                throw;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:37:19.727

通过迁移到 NHibernate 3.3.1 解决了问题。

然而，另一个问题浮出水面：

[找不到属性 - 从 NHibernate 3 切换到 3.3.1 后出现异常](https://stackoverflow.com/questions/13192103/could-not-find-the-property-exception-after-switching-from-nhibernate-3-to-3-3)

# android - 使用普通操作按钮作为软件键盘键

> ID：13154129
> 
> 赞同：2
> 
> 时间：2012-10-31T08:45:34.030
> 
> 标签：android

我想制作一个由普通操作按钮而不是按键组成的定制软件键盘。

通常，我们可以更改软键盘的外观，但布局已经在*Keyboard*类中预定义，带有 < Row > 和 < Key >。但是我想使用 < Button > 这样我就可以制作怪异风格的键盘，而不受正常布局的限制，比如让它看起来像波浪或笑脸。此外，由于它是 < Button >，因此可以将意图或特殊操作附加到它。

*在键盘*类下它仍然可行，还是我必须创建一个全新的类？将不胜感激任何建议和指导。

# javascript - 根据孩子的 ID 添加类以列出项目

> ID：13154130
> 
> 赞同：0
> 
> 时间：2012-10-31T08:45:36.987
> 
> 标签：javascript, jquery

我想知道如何使用 jQuery 来实现这样的目标：

```
<ul>
    <li><a href="#id-220" class="id-220 id-320 id-321 id-322">Nunc tincidunt</a></li>
    <li><a href="#id-320" class="id-320 id-321 id-322">Proin dolor</a></li>
    <li><a href="#id-321" class="id-321 id-322">Aenean lacinia</a></li>
    <li><a href="#id-322" class="id-322">Aenean lacinia</a></li>
</ul> 
```

如果我只有这个：

```
<ul>
    <li><a href="#id-220">Nunc tincidunt</a></li>
    <li><a href="#id-320">Proin dolor</a></li>
    <li><a href="#id-321">Aenean lacinia</a></li>
    <li><a href="#id-322">Aenean lacinia</a></li>
</ul> 
```

所以，基本上我希望每个列表项都在寻找其兄弟的 ID 并按顺序将它们添加为类。第一个列表项有 3 个兄弟姐妹，因此它必须有 4 个类（他自己的和兄弟姐妹的 3 个）等等......我希望我解释得很好...... TNX！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:14:33.843

试试这个

```
$('li').each(function(){
                cls = $(this).find('a').attr('href');
                cls1 = cls.replace("#", '');
                curli = this;
                $(curli).addClass(cls1);
                $(this).nextAll('li').each(function() {
                    cls = $(this).find('a').attr('href');
                    cls1 = cls.replace("#", '');
                    $(curli).addClass(cls1);
                });

            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:58:46.853

试试这个

```
<ul id="mainUL">
        <li><a href="#id-220">Nunc tincidunt</a></li>
        <li><a href="#id-320">Proin dolor</a></li>
        <li><a href="#id-321">Aenean lacinia</a></li>
        <li><a href="#id-322">Aenean lacinia</a></li>
</ul>

<script type="text/javascript">
        var As = $("#mainUL").find("a");
        for (var i = 0; i < As.length; i++) {
            var curAi = $(As[i]);
            var clas = curAi.attr("href").replace("#", "");
            for (var j = i; j < As.length; j++) {
                var curAj = $(As[j]);
                clas += " " + curAj.attr("href").replace("#", "");
            }
            curAi.addClass(clas);
        }

</script> 
```

我知道也可以有更有效和更好的解决方案。但是这个对我来说运行良好，没有任何错误，值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:52:30.657

```
$('li').each(function(){
    var $activeLI = $(this);
    $activeLI.addClass($activeLI.find('a').attr('href').substring(1));

    $activeLI.nextAll('li').each(function() {
        $activeLI.addClass($(this).find('a').attr('href').substring(1))
    });
});​ 
```

[演示](http://jsfiddle.net/ypQ2e/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T08:57:32.410

你可以这样做：

```
 lastli = $('ul > li:last');
    lastli.children('a').addClass( lastli.children('a').attr('href').replace('#','') );
    while (lastli.prev().length) {
       prevli = lastli.prev();
       prevli.children('a').addClass( lastli.children('a').attr('class') );
       prevli.children('a').addClass( prevli.children('a').attr('href').replace('#','') );
       lastli = prevli;
     } 
```

查看工作[**演示**](https://tinker.io/26b85/1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T09:01:13.227

另一种变体：

```
function setClasses() {
    var className = "";
    $.each($("li > a").get().reverse(), function(index, item) {
        className += $(item).attr("href").replace(/^#/, "") + " ";
        $(item).addClass(className);        
    });
}

setClasses(); 
```

[在这里](http://jsfiddle.net/dbASG/3/)试试。

# ruby-on-rails-3.2 - 让 FactoryGirl 中的工厂更加干燥

> ID：13154134
> 
> 赞同：2
> 
> 时间：2012-10-31T08:45:58.833
> 
> 标签：ruby-on-rails-3.2, factory-bot

在使用 FactoryGirl 为数据库视图创建工厂时，我有一个反复出现的模式。工厂外观的示例：

```
factory :site_brand do
  brand
  brand_translation
  country

  initialize_with do
    SiteBrand.where(brand_id: attributes[:brand].id, country_id: attributes[:country].id).first
  end
end 
```

这里唯一独特的是“品牌”。我还有其他关于“类别”、“项目”等的案例。我试图弄清楚我是否可以让这个更干燥，而不需要猴子修补 FactoryGirl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:06:35.803

您是否尝试过使用[特征](http://robots.thoughtbot.com/post/23673635798/remove-duplication-with-factorygirls-traits)？

# oracle - Oracle 过程：并发和 CLOB 变量

> ID：13154137
> 
> 赞同：2
> 
> 时间：2012-10-31T08:46:02.737
> 
> 标签：oracle, stored-procedures, concurrency

我在存储过程中有以下片段。该过程是从插入触发器调用的。

```
v_ProdName VARCHAR2(250);
v_ID VARCHAR2(50);
v_Clob CLOB;
-- ....
SELECT      
   MY_TABLE.ID, 
   MY_TABLE.PRODNAME, 
   MY_TABLE.MY_CLOB   
  INTO
   v_ID,
   v_ProdName,
   v_Clob
  FROM   
-- ... 
```

之后，这 3 个变量用于调用函数，并且该函数（第 3 方）插入一条新记录。

这行得通。但是，上面的 CLOB 插入存在问题。如果多行彼此快速插入（例如：从 csv 导入，使用 sql 开发人员“插入”方法“或 WebMethod；我假设插入发生在同一事务中），则 CLOB 具有所有行的第一个插入行的值。所有其他（例如 id、ProdName）具有正确的值。

因此，似乎 Clob 以某种方式被缓存。真的吗？我该如何解决这种行为？

编辑：

例子：

```
DECLARE

-- ... variables
    v_id varchar2(15);

BEGIN

-- assign values to vars, one of them is an ID on which CLOB is selected
    -- in the procedure
    v_id := '754-56-4';

my_procedure(v_id, args);

    -- if this commit in un-commented, it works as expected.
    -- eg. the 2 inserted rows have different values for the clob field
-- COMMIT;

-- assign other values to vars especially different id
    -- -> result should have a different value in CLOB field        
    v_id := '5356-97-6';

my_procedure(v_id, args);

END; 
```

请注意，基于 v_id 选择的所有其他字段都具有正确的值，无论是否进行了 COMMIT！所以这是 CLOB 的问题，而不是程序的问题！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:25:19.077

此问题是由 3rd 方功能中的错误引起的。

# objective-c - UIAlertView 显示多次

> ID：13154140
> 
> 赞同：0
> 
> 时间：2012-10-31T08:46:17.727
> 
> 标签：objective-c, uialertview

`UIAlertView`当用户运行应用程序时，我有一个简单的显示。它有这样的结构：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Welcome!", "")
                                                message:NSLocalizedString(@"This is a welcome message.", "")                             
                                               delegate:nil
                                      cancelButtonTitle:@"OK" 
                                      otherButtonTitles: nil];
[alert show];
[alert release]; 
```

问题是，例如，我如何自定义它以显示每 5 次运行？

提前致谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:27:49.990

AppDelegate 类中会有一个方法，例如

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

现在在此方法中创建一个 NSUSerdefaults 并生成一个整数并增加该整数并将其保存在 NSUserdefaults

现在每次应用程序启动时都会调用该方法并且整数将递增

现在在该方法中设置 if 条件，如下所示

```
if(your integer which has nsuserdefaults >=5)
{
   your alertview
    again here make your nsinteger  to Zero which is stored in nsuserdefaults 
     your integer which has nsuserdefaults =0
} 
```

这是您第二个问题的答案，每次应用程序运行 5 次后。将弹出警报让我知道它是否有效..!!!! 快乐编码！！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:55:23.733

您可以使用`NSUserDefaults`存储键的应用程序执行计数`AppRunCount`（您可以引入自己的键名）：

```
int runCount = [[NSUserDefaults standardUserDefaults] integerForKey:@"AppRunCount"] + 1

[[NSUserDefaults standardUserDefaults] setInteger:runCount forKey:@"AppRunCount"];

if (runCount <= 5) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Welcome!", "")
                                            message:NSLocalizedString(@"This is a welcome message.", "")                             
                                           delegate:nil
                                  cancelButtonTitle:@"OK" 
                                  otherButtonTitles: nil];
    [alert show];
    [alert release];
} 
```

您只需将上面的代码添加到`viewDidLoad`

# windows-phone-7 - 在 Visual Studio 2012 中针对 WP7 异步驱动的项目

> ID：13154143
> 
> 赞同：3
> 
> 时间：2012-10-31T08:46:25.497
> 
> 标签：windows-phone-7, visual-studio-2012, async-await, async-ctp

是否可以在 Windows Phone 8.0 SDK (Visual Studio 2012) 中使用异步内容并且仍然针对 Windows Phone 7.1？

我安装了 Windows Phone 8.0 SDK 并打开了我的 WP7.1 项目，并引用了 AsyncCTP nuget 包。出现以下编译错误：

> 找不到“异步”修饰符所需的所有类型。您的目标是错误的框架版本，还是缺少对程序集的引用？

我不想放弃对 WP7.1 的支持，所以升级到 WP8 不是一个选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:32:45.100

可以使用最新版本的异步 CTP。[你可以在Microsoft.Bcl.Async](http://nuget.org/packages/Microsoft.Bcl.Async)的 NuGet 上找到它。

有关 BCL 团队博客的更多信息：http: [//blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)

注意：这个 NuGet 包的安装似乎有点随机。我不得不尝试两次才能让它发挥作用。

# php - Kohana 3.3 路由到子目录

> ID：13154146
> 
> 赞同：1
> 
> 时间：2012-10-31T08:46:42.157
> 
> 标签：php, kohana, kohana-3

我是 Kohana 的新手，并且坚持路由到子目录，它一直给我一个在服务器上找不到的 url。

在`bootstrap.php`我定义了这条路线：

```
Route::set('store', 'store(/<action>)')
    ->defaults(array(
        'directory'  => 'store',
        'controller' => 'main',
        'action'     => 'index',
    )); 
```

存储控制器存储在`application/classes/Controller/Store/Main.php`

为了测试它，控制器只向页面返回一些文本：

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_Store_Main extends Controller
{
    public function action_index()
    {
        $this->response->body('Store Main Page');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:06:47.333

我也一样。

1.  你用的是什么 Kohana 版本？此示例仅适用于 3.3。
2.  您的路线必须在`default`路线之前定义。

# css - 如何通过 CSS 设置 Safari 打印边距以打印无边框

> ID：13154147
> 
> 赞同：18
> 
> 时间：2012-10-31T08:46:43.310
> 
> 标签：css, printing, webkit

我想在 Safari 中将网页打印为 PDF 且没有任何边距。页面大小在打印对话框中设置为“A4 无边距”。

无论我做什么，OSX 上的 Safari 都会在我的 HTML 周围添加额外的边距。检查“打印背景”以了解我的意思。

显然@page-rule 对 Safari 没有影响，但还有其他方法吗？

[http://jsfiddle.net/willemvb/psFHC/](http://jsfiddle.net/willemvb/psFHC/)

```
@page {
  size: 21cm 29.7cm;   /*A4*/
  margin: 0; /*webkit says no*/
}

html{
    margin: 0;
    padding: 0;
    width: 100%;
}

body {
    margin: 0;
    padding: 0;
    font-family: sans-serif;
    width: 100%; 
    background: #eee;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T16:29:09.250

有 3 件事需要考虑：

1.  页面规则的边距，不幸的是

    ```
    @page {
    margin: 0cm !important;
    } 
    ```

    对 Safari 6 没有影响，它在 Chrome 23 中起作用。据我所知，只要 Safari 不支持这一点，就没有解决方案（它似乎固定在 10 毫米左右）。

2.  [在这里](http://support.gliffy.com/entries/246980-print-on-the-mac-osx-with-no-margins)看到的页面设置，您可能必须在“打印...”菜单面板中定义自定义“纸张尺寸”，没有任何边距（顺便说一句，您已经这样做了）。

3.  显然是要照顾其他的内部内容html，body...没有任何余量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-01T11:03:51.563

选择的答案不太正确。要正确回答问题，您需要先了解问题。

**无边距打印和打印机：**

很少有打印机可以“实际上”打印无边界打印件，即使他们说可以打印。大多数只是将打印放大一点，使其超出实际页面，并且通常会给您一个滑块来调整该数量。原因是大多数打印机没有传感器来确定纸张的实际位置，它假定纸张在那里，对于大多数打印来说，它是否偏离 0.5 毫米甚至 1 毫米都没有关系。

对于无边框来说，这很重要，因为打印出来的时候周围有一个白色（纸）边框。

出于这个原因，95% 的打印机模仿这种“无边界”打印，实际上是让墨水在稀薄的空气中运行一点点，这样纸张就一直被覆盖到边缘。在稀薄的空气中打印是不好的，长期会造成污迹，应该避免，因此必须将边缘打印量调整到最低限度。

好的大幅面打印机有一个传感器来检测纸张宽度，但它用于稍微调整纸张，因为每卷 50 到 150 米的长度甚至会导致 0.1 毫米的错位成为问题并导致卡纸。

为了完全解决这个问题，使用了“出血”，您实际上将所有内容设计为稍大的纸张，然后将其切割成一定尺寸。

*好的……现在你知道了。*

**继续 CSS 无边框打印的问题：**

要完全理解这个问题，必须熟悉“盒子”。

[![盒子模型](../Images/520da7617460c497c1e2af2c22eeb238.png)](https://i.stack.imgur.com/BG64X.png)

Box 对 CSS 中几乎每个元素的行为进行建模。您要打印的页面通常包含在某种标签中，可以是带有和 id 的 div 或像这样的类：

```
<div class="page">lots of content</div> 
```

我们将讨论黑线，称为*边框*，它是“margin”和“padding”的两个兄弟姐妹。

大多数人不知道的是，那里的每台打印机实际上都报告了它所支持的每种纸张尺寸的页边距。

这是一个这样做的 HP 2800dtn（只需将鼠标悬停在纸张尺寸上一段时间，它就会出现）。

[![惠普 2800dtn](../Images/7a14dcb4f33f81a68754f254e78af87c.png)](https://i.stack.imgur.com/cUjIe.png)

**“修复”：**

Safari 正在做正确的事情。我在那里说过...这不是错误。

它显然拒绝生产无边界打印的原因是它实际上是不可能的（在现实世界中）。你可以做到，但是以 100% 缩放打印它的人会被打印机修剪掉内容，正如我所描述的，它不能打印到边缘。

所以大多数人必须“适应纸张”边距（默认的 OS X 行为，缩小到大约 98% 缩放）然后在打印机上启用无边框模式，这反过来又将缩小的 98% 缩放版本放大到 103%。如果你做数学，你会得到一个奇怪的数字，可能是原始版本的 101.5%（我不能肯定地说，如果它不被二除，我就不太擅长数学 :) 这不完全是字体和矢量图形的问题，但它在像素世界中造成严重破坏。像素世界喜欢，就像我一样，默认数字 2，其余的只是“平滑”它。

*所以你无法修复它，因为它没有损坏。Safari 将 div 的边框及其所有内部元素置于打印机报告的纸张“可打印区域”内。好的！*

**解决方案：**

*在您使用 command+p并*选择纸张尺寸之前，您无法知道打印机边距。

但是你可以在 CSS 中做些什么来获得每个人都喜欢的“所见即所得”的感觉呢？

1.  使用您定义的 div.page 上的边距。请注意，边距是根据包含该 div 的元素计算的。所以你需要`page`把`actualpage`

为每个媒体类型定义 CSS，以便屏幕显示虚构的打印边距（接近真实的东西）并且打印得到的版本是没有边距的版本。

```
/* @media all { */ /* I like using these */
  div.actualpage {
   ...
   height: 210mm; /* DIN A4 standard paper size */
   width: 297mm;
   ...
  }
  div.page {
   ...
   /* margin: 0;  you don't really have to explicitly set it to 0 unless it's already set to something else */
   ...
  }
/* } */

@media screen {
 div.page {
  ...
  margin: 5mm 5mm 5mm 10mm; /* printers usually have a bigger bottom margin*/
  ...
  }
}

@media print {
 div.page {
  ...
  margin: 0mm; /* Browser will apply the correct margins when it prints */
  ...
  }
} 
```

如果您不能将页面包装到另一个 div 中，您可以使用填充来破解它（即：不太优雅的解决方案）。

```
/* @media all { */ /* I like using these */
  div.page {
   ...
   height: 210mm; /* DIN A4 standard paper size */
   width: 297mm;
   /* padding: 0;  you don't really have to explicitly set it to 0 unless it's already set to something else */
   ...
  }
/* } */

@media screen {
 div.page {
  ...
  padding: 5mm 5mm 5mm 10mm; /* printers usually have a bigger bottom margin*/
  ...
  }
}

@media print {
 div.page {
  ...
  padding: 0mm; /* Browser will apply the correct margins when it prints */
  ...
  }
} 
```

# soundcloud - 上传和存储音频文件

> ID：13154148
> 
> 赞同：0
> 
> 时间：2012-10-31T08:46:46.893
> 
> 标签：soundcloud, uploading, transcoding, audioformat

我们正在设计我们的音频应用程序，我们需要支持将音频文件从桌面应用程序上传到云服务器，并在桌面应用程序中播放这些音频文件。

在上传之前我们应该如何处理文件？应该将它们变成base 64，从而将它们的大小增加〜30％？

还是我们应该将其作为原始二进制文件上传？

那么不同的音频格式呢，我们应该在客户端/服务器中将其转码为 mp3 或类似的东西吗？

有人知道在这种情况下 SoundCloud 方法是什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:05:33.983

SoundCloud 存储原始文件，并将原始文件转码以用于流式传输。如果所有者使该选项可用，则可以下载原件。

如果您使用 HTTP 与服务器通信，则需要使用 Base64 进行编码。如果您选择了正确的框架，这对您来说应该很容易并且可能是透明的。

# fonts - 显式设置用于 Tesseract-OCR 识别的字体

> ID：13154150
> 
> 赞同：14
> 
> 时间：2012-10-31T08:46:55.367
> 
> 标签：fonts, ocr, tesseract

我的文档在整个文档中仅使用一种字体。不同的文档可能有不同的字体，但我知道哪个文档使用哪种字体。

是否有一个选项可以明确告诉 Tesseract-OCR 在识别给定图像期间使用哪种字体？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T00:12:12.580

不，我不认为 Tesseract 支持这样的选项。您可以做的是针对一种特定字体进行训练，然后在识别文档期间指定该训练数据。

# php - 一个数据库中有多个 Symfony-DoctrineGuardPlugins？

> ID：13154153
> 
> 赞同：0
> 
> 时间：2012-10-31T08:47:00.997
> 
> 标签：php, symfony1, symfony-1.4, sfdoctrineguard

我写了一个 Symfony 1.4 (Doctrine) 网站，由 2 个前端和 2 个后端组成。因此，所有内容都整齐地打包在 2 个 SF-Projects 中——无论如何，所有应用程序都使用相同的 (MySQL-) 数据库。在涉及登录不同用户之前，这根本不是问题。

后端 1 只能从内网访问，所以这里只管理几个用户（管理员）。后端 2 可以从外网访问，也应该管理前端用户。

基本上我想将这两个项目分成两组不同的用户表——但在一个数据库中。

我使用 sfDoctrineGuardPlugin 来保护第一个应用程序，但我不确定如何在不干扰第一个应用程序的情况下保护第二个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:18:27.793

为什么不在`app_type`用户表中添加一个字段（内网、外网），并使用该字段修改您的注册和登录流程，以便您轻松在 1 个表上拥有 2 个用户列表？

# xslt-2.0 - 使用 evaluate() 方法时引发 XPath 语法错误

> ID：13154156
> 
> 赞同：1
> 
> 时间：2012-10-31T08:47:19.910
> 
> 标签：xslt-2.0, xslt-3.0

我仍然收到以下错误

```
Error at xsl:param on line 6 of file:/E:/saxon/parastyleText.xsl:
  XPST0003: XPath syntax error at char 0 on line 6 in {...le/@w:val[matches(., c
oncat...}:
    Invalid character '^' in expression
Failed to compile stylesheet. 1 error detected. 
```

修改后的 XSL：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
     xmlns:ve="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml">

    <xsl:param name="styleName" select="'articletitle'"/>
    <xsl:param name="tagName" select="'//w:p[w:pPr/w:pStyle/@w:val[matches(., concat('^(',$styleName,')$'),'i')]]'"/>

    <xsl:output method="text"/>

    <xsl:template match="/">
        <xsl:value-of select="saxon:evaluate($tagName)" xmlns:saxon="http://saxon.sf.net/"/><xsl:text>&#10;</xsl:text>
    </xsl:template>

    </xsl:stylesheet> 
```

请不要回复，引号会将“tagName”作为字符串并删除这些引号。该值实际上将作为字符串从 java 传递，出于测试目的，我已将此 xpath 作为字符串传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:36:25.387

根据在线文档[http://www.saxonica.com/documentation9.1/extensions/functions.html](http://www.saxonica.com/documentation9.1/extensions/functions.html) Saxon 9.1 支持Saxon 命名空间中[的`evaluate`函数`http://saxon.sf.net/`](http://www.saxonica.com/documentation9.1/extensions/functions/evaluate.html)。所以用 Saxon 9.1 试试`<xsl:value-of select="saxon:evaluate($tagName)" xmlns:saxon="http://saxon.sf.net/"/>`。当然，`xsl:stylesheet`如果您愿意，您可以将命名空间声明上移到元素上，我只是将它放在`xsl:value-of`这篇文章中，作为一个简短但完整的代码示例。

另请注意，使用您的变量命名`tagName`时，您很可能只有一个元素名称，在这种情况下，使用`<xsl:value-of select="*[local-name() eq $tagName]"/>`.

# javascript - 如何防止 phonegap 应用程序导航离开其本地文件？

> ID：13154157
> 
> 赞同：1
> 
> 时间：2012-10-31T08:47:19.613
> 
> 标签：javascript, iphone, ios, cordova, social-networking

我有一个带有 iFrame 的 PhoneGap 应用程序，它正在从我控制的站点加载内容。（与应用程序相同的域）

问题在于，当使用 Facebook 和 Twitter 等 Javascript 小部件时，可能会离开本地顶级框架。如果它只是 iFrame，我不会太介意，但它正在吞噬整个应用程序，我的偏好实际上是将用户重定向到外部浏览器以显示该站点。

如何防止这种情况发生？

我试图通过修改 webView: shouldStartLoadWithRequest: 方法来应对，但这在其他平台上不起作用，而且我无法轻松区分 iFrames（SNS 小部件）中加载的外部资源和替换顶层框架的相同脚本.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:53:35.520

我认为 ChildBrowser 插件可以为您工作。它不会将调用重定向到 webbrowser，但我相信它会满足您的需求。它支持[iOS](https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/ChildBrowser)和[Android](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)。

> 子浏览器允许您在 PhoneGap/Cordova 应用程序中显示外部网页。
> 
> 一个简单的用例是：
> 
> *   用户无需离开您的应用即可点击链接/按钮查看网页内容。
>     
>     
> *   在 ChildBrowser 中显示网页/图像/视频/pdf。

# ios - iOS 文档目录大小限制

> ID：13154160
> 
> 赞同：1
> 
> 时间：2012-10-31T08:47:27.057
> 
> 标签：ios, xcode

我正在创建下载到文档目录的 FTP 下载应用程序，我有一些简单的问题。文档目录是否有大小限制，下载文件是否会永久保留在那里，直到应用程序被删除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T08:51:03.537

我对此了解不多，我在 Discussions.apple.com 上看到过这样的评论**：**有 **2 GB 的限制。**

[https://discussions.apple.com/message/7599983?messageID=7599983#7599983?messageID=7599983](https://discussions.apple.com/message/7599983?messageID=7599983#7599983?messageID=7599983)

**文档目录中的文件永久保留在那里，直到应用程序被删除。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T06:08:18.183

**============编辑=========**

**事实是：2Gb是app大小限制，app的目录可以超过2Gb；我从 apple [doc](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide_CN.pdf)找到它，搜索关键字“2G”**

* * *

不知道苹果有没有改，我用的是一个叫PPTV的app，可以存储服务器的视频，2Gb以上；发生什么了？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T09:37:43.657

如果您想在没有用户操作的情况下缓存任何内容，则应该使用缓存目录，否则如果您不按照说明操作，您的应用将被拒绝：

[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/PerformanceTuning/PerformanceTuning.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/PerformanceTuning/PerformanceTuning.html)

# android - 单击消息收件箱时是否可以进行身份 验证

> ID：13154163
> 
> 赞同：2
> 
> 时间：2012-10-31T08:47:31.360
> 
> 标签：android, sms, android-activity, inbox

我想创建一个应用程序，如果用户尝试打开短信收件箱，则必须要求他输入保存的密码，基本上是为内置收件箱应用程序设置密码，

谷歌市场上有很多应用程序，我们可以为某些特定的私人联系人设置密码，但据我所知，不能为整个收件箱设置密码，但如果可用，那么它是如何完成的？

是否有可能：如果选择或打算打开收件箱，则开始进行身份验证的活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:49:29.350

基本上“不”，如果不使用黑客、错误或生根，您将无法控制其他应用程序的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:00:08.243

**这是不可能的。**

因为想想如果手机管理员没有为他的手机设置任何身份验证。比如密码询问或绘制图案或任何其他。那么你会在那个时候为安全做什么？您的收件箱将不安全。

为此，您必须考虑您真正想要的其他可以安全的逻辑.ok

# logging - Visual Studio 安装项目的日志创建

> ID：13154167
> 
> 赞同：1
> 
> 时间：2012-10-31T08:47:39.473
> 
> 标签：logging, installation, visual-studio-setup-proje

我正在尝试使用 VS 安装项目为我的应用程序创建安装程序。现在我希望在发生任何故障时，我应该能够在日志文件的帮助下跟踪问题所在。

所以我的问题是，我如何获得各种事件的挂钩（例如路径选择、同意的免责声明等），以便我可以记录它们。目前我唯一可以插入代码的地方是自定义操作，但在此之前事情可能会出错。

任何有关如何处理此问题的建议都将受到高度赞赏。

谢谢， 奥伊希克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T09:43:50.800

我们可以通过设置注册表项选项来生成 MSI 运行的日志。请按照此[链接](http://support.microsoft.com/kb/223300#fixit4me)解决问题。按照链接中提到的步骤后，您可以在**%temp%**文件夹中找到扩展名为***.log的日志**

您必须编辑以下注册表项：HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\Installer

设置键“ **Logging** ”值：“ **voicewarmupx** ”

该值只不过是要记录的选项的组合，如下所述，

v - 详细输出 o - 磁盘空间不足消息 i - 状态消息 c - 初始 UI 参数 e - 所有错误消息 w - 非致命警告 a - 操作启动 r - 操作特定记录 m - Out-内存不足或致命退出信息 u - 用户请求 p - 终端属性 + - 附加到现有文件！- 将每一行刷新到日志 x - 额外的调试信息。“x”标志仅在 Windows Server 2003 和更高版本的操作系统、MSI 可再发行版本 3.0 和更高版本的 MSI 可再发行版本上可用。

# c# - 如何在 SignalR 回调方法中显示窗口？

> ID：13154171
> 
> 赞同：0
> 
> 时间：2012-10-31T08:48:10.170
> 
> 标签：c#, winforms, multithreading, signalr

我正在开发一个使用 SignalR 进行通信的简单聊天应用程序。每当收到来自另一个用户的私人消息时，我想显示一个 MessageForm。问题是，回调方法在不同的线程上运行，似乎将新表单循环与主表单合并存在问题，因此应用程序挂起这是我的回调方法：

```
private void MessageReceived(object sender, Client.MessageEventArgs args)
    {
        var form = new MessageForm();
        form.MessageReceived(sender,args);
        form.Show();
    } 
```

所以问题是我如何创建表单以便它使用主表单循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:08:05.807

好的，我找到了答案 :) 我有点困惑，因为我使用 from.Invoke 方法来运行 show 方法，显然它不起作用，因为表单是在回调线程中创建的，然后我使用了 Invoke 中的 main方法和中提琴，它就像一个魅力:) 这是代码：

```
private void MessageReceived(object sender, Client.MessageEventArgs args)
    {

        var form = new MessageForm();
        form.MessageReceived(sender,args);
        Invoke(new Action(form.Show));
    } 
```

# c# - Bitmap.LockBits 给出错误的值？

> ID：13154172
> 
> 赞同：2
> 
> 时间：2012-10-31T08:48:21.147
> 
> 标签：c#, windows, gdi

我在将一些代码从 Bitmap.GetPixel 更改为使用 LockBits 返回的直接像素缓冲区时遇到问题。与 GetPixel 相比，LockBits 返回的数据似乎确实给了我不同的颜色值。

这是不幸的，因为这种变化确实会产生不同的颜色，这会破坏自动化单元测试。我有一个 29*30 像素的 png 文件，我将 Format32bppArgb 加载到位图中。这真的是LockBits和GetPixel返回的数据不同吗？我怎样才能解决这个问题？

这是一些使用加载的位图重现它的代码

```
public unsafe static Bitmap Convert(Bitmap originalBitmap)
{
    Bitmap converted = new Bitmap(originalBitmap);
    Rectangle rect = new Rectangle(0, 0, converted.Width, converted.Height);
    var locked = converted.LockBits(rect, ImageLockMode.ReadWrite, originalBitmap.PixelFormat);
    byte* pData = (byte*)locked.Scan0;

    // bytes per pixel
    var bpp = ((int)converted.PixelFormat >> 11) & 31;

    byte* r;
    byte* g;
    byte* b;
    byte* a;

    for (int y = 0; y < locked.Height; y++)
    {
        var row = pData + (y * locked.Stride);

        for (int x = 0; x < locked.Width; x++)
        {
            a = row + x * bpp + 3;
            r = row + x * bpp + 2;
            g = row + x * bpp + 1;
            b = row + x * bpp + 0;
            var col = Color.FromArgb(*a, *r, *g, *b);
            var origCol = originalBitmap.GetPixel(x, y);
            if (origCol != col)
            {
                Debug.Print("Orig: {0} Pixel {1}", origCol, col);
            }

        }
    }
    converted.UnlockBits(locked);

    return converted;
}

Orig: Color [A=128, R=128, G=128, B=255] Pixel Color [A=128, R=127, G=127, B=255]
Orig: Color [A=0, R=128, G=128, B=255]   Pixel Color [A=0, R=0, G=0, B=0]

Orig: Color [A=45, R=128, G=128, B=255]  Pixel Color [A=45, R=130, G=130, B=254]
                                                       ok     -2      -2     +1 
```

大多数时候，但似乎正在进行一些舍入和转换。我可以强制 LockBits 返回 GetPixel 返回的数据吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:00:36.303

据我所知，PNG 可以包含颜色配置文件和伽马校正信息以及任何其他可能影响像素最终颜色与其原始表示的内容。

即使我们忽略有关 PNG 的特定知识，通常`GetPixel`也会返回与预期不同的值。

`Bitmap.GetPixel`是这样实现的：

```
public Color GetPixel(int x, int y)
{

    int color = 0;

    if (x < 0 || x >= Width)
    {
        throw new ArgumentOutOfRangeException("x", SR.GetString(SR.ValidRangeX));
    }

    if (y < 0 || y >= Height)
    {
        throw new ArgumentOutOfRangeException("y", SR.GetString(SR.ValidRangeY));
    }

    int status = SafeNativeMethods.Gdip.GdipBitmapGetPixel(new HandleRef(this, nativeImage), x, y, out color);

    if (status != SafeNativeMethods.Gdip.Ok)
        throw SafeNativeMethods.Gdip.StatusException(status);

    return Color.FromArgb(color);
} 
```

的定义`SafeNativeMethods.Gdip.GdipBitmapGetPixel`是：

```
[DllImport(ExternDll.Gdiplus, SetLastError=true, ExactSpelling=true, CharSet=System.Runtime.InteropServices.CharSet.Unicode)] // 3 = Unicode 
[ResourceExposure(ResourceScope.None)]
internal static extern int GdipBitmapGetPixel(HandleRef bitmap, int x, int y, out int argb); 
```

[我们从这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms533971(v=vs.85).aspx)学到的是[`Gdiplus::Bitmap::GetPixel`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms536297(v=vs.85).aspx). 该功能的文档说：

> # 评论
> 
> 根据位图的格式，`Bitmap::GetPixel`可能不会返回与设置相同的值`Bitmap::SetPixel`。例如，如果调用`Bitmap::SetPixel`像素格式为 的 Bitmap 对象`32bppPARGB`，则像素的 RGB 分量会被预乘。`Bitmap::GetPixel`由于舍入，后续调用可能会返回不同的值。此外，如果您调用`Bitmap::SetPixel`颜色深度为每像素 16 位的 Bitmap 对象，则在从 32 位转换到 16 位的过程中信息可能会丢失，并且后续调用`Bitmap::GetPixel`可能会返回不同的值。

# ajax - 如何在wordpress中返回ajax quired值？

> ID：13154175
> 
> 赞同：0
> 
> 时间：2012-10-31T08:48:36.930
> 
> 标签：ajax, wordpress

我创建了一个 ajax 回调，但它返回一个错误值。我正在使用的代码如下。我在检查时从复选框发送值。并希望从张贴文件返回值`listing_submit_demo.php`

```
jQuery(function() { 
    jQuery('.list_category').bind('click',function() {
        if(jQuery(this).is(':checked')) {
            jQuery('#some_textarea').html(jQuery(this).val());
            var id = jQuery(this).attr('id');
            jQuery.ajax({
                type:"POST",
                data: {idvalue: id},
                url: "<?php echo FRONTENDURL; ?>listing_submit_demo.php",
                success:function(data){
                    alert(data);
                }
            });
        }
    });                         
}); 
```

在`listing_submit_demo.php`我获取复选框 id 值并从数据库中检索值然后返回列出的值但它返回带有调试错误的值。那么如何从中获得适当的价值呢？`listing_submit_demo.php`代码如下：

```
<?php
//error_reporting(0);
$idvalue = $_POST['idvalue'];
global $cfield_tbl_name;
global $wpdb;
$query = "SELECT * FROM  $cfield_tbl_name";
$val = $wpdb->get_results($query);
foreach($val as $x){
    $cate = explode(',',$x->field_cate);   
     if(in_array($idvalue, $cate)){
          $y .= $x->f_var_nm . ",";
    }
}
echo $y;
//?> 
```

任何帮助将提前表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:22:09.083

我有一个建议，您可以使用操作“wp_ajax_$youraction”和“wp_ajax_nopriv_$youraction”

[http://codex.wordpress.org/Plugin_API/Action_Reference/wp_ajax_%28action%29](http://codex.wordpress.org/Plugin_API/Action_Reference/wp_ajax_%28action%29)

该示例在链接内，wordpress ajax 应该可以与这些挂钩正常工作。

# ruby-on-rails - Rails 测试将不需要的参数添加到 assert_redirected_to

> ID：13154177
> 
> 赞同：0
> 
> 时间：2012-10-31T08:48:58.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing

我在我的功能测试中有一个测试，它在删除正确后断言重定向：

```
assert_redirected_to terrain_tip_url(terrain_id: entities(:deroos)) 
```

这应该会导致测试 url 是否是：[http](http://test.host/terrains/:terrain_id/tips) ://test.host/terrains/:terrain_id/tips并且在应用程序中是生成的确切 url。但是，在测试用例中，这会导致 url 为：[http://test.host/terrains/:terrain_id/tips/:id](http://test.host/terrains/:terrain_id/tips/:id)，这会导致测试用例失败：

```
Expected response to be a redirect to <http://test.host/terrains/446801721/tips/495319887> but was a redirect to <http://test.host/terrains/446801721/tips> 
```

为什么 terrain_tip_url 包含我从未设置的 id 参数？我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:55:40.650

跑步`rake routes`应该会给你一些见识。我相信你想要的是`terrain_tips_url`（索引），而不是`terrain_tip_url`（显示）。

[http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

# php - 将 JPEG 名称的数据库结果打印输出转换为在新选项卡中打开的 HTML 链接？

> ID：13154180
> 
> 赞同：0
> 
> 时间：2012-10-31T08:49:07.187
> 
> 标签：php, html, sql, loops

我正在创建一个 PHP 页面，该页面打印出我拥有的肉类包装的整个数据库。我正在按形状（矩形、椭圆形、方形、插入）的顺序打印数据库的结果。我可以很高兴地让数据库打印出结果，但我想要对其中一列做的是更改打印到 HTML 链接中的结果。

此列是“Imagename”，它打印存储在服务器上的 JPEG 的名称。我想要它，这样当“Imagename”的结果在侧面打印 JPEG 时，它不是文本，而是指向显示图片供用户查看的新选项卡的链接。

这是我当前的 PHP，它循环通过数据库在表中打印：

```
<?php

$con = mysql_connect("localhost", "horizon1", "");
mysql_select_db("horizon1_delyn", $con);

if ( ! $con)
{
  die("Could not connect: " . mysql_error());
}

$rectangular = mysql_query("SELECT toolcode, description, traysize, imagename FROM range WHERE trayshape ='rectangular' ORDER BY traysize");
$oval        = mysql_query("SELECT toolcode, description, traysize, imagename FROM range WHERE trayshape ='oval' ORDER BY traysize");
$square      = mysql_query("SELECT toolcode, description, traysize, imagename FROM range WHERE trayshape ='square' ORDER BY traysize");
$insert      = mysql_query("SELECT toolcode, description, traysize, imagename FROM range WHERE trayshape ='insert' ORDER BY traysize");

$fields_num = mysql_num_fields($rectangular);

echo "<table width='97%' border='0' cellspacing='0' cellpadding='0'><tr>";

//*RECTANGULAR*//

for ($i = 0; $i < $fields_num; $i++)
{
  $field = mysql_fetch_field($rectangular);
  echo "<td bgcolor='#E8CF24' style='font-family: arial;font-size: 12px;'>{$field->name}</td>";
}

echo "</tr>\n";

while ($row = mysql_fetch_row($rectangular))
{
  echo "<tr>";

  foreach ($row as $cell)
    echo "<td style='font-family: arial;font-size:12px'>$cell</td>";
  echo "</tr>\n";
}
mysql_free_result($rectangular);

//* OVAL *// 

for ($i = 0; $i < $fields_num; $i++)
{
  $field = mysql_fetch_field($oval);
  echo "<td bgcolor='#E8CF24' style='font-family: arial;font-size: 12px'>{$field->name}</td>";
}

echo "</tr>\n";

while ($row = mysql_fetch_row($oval))
{
  echo "<tr>";

  foreach ($row as $cell)
    echo "<td style='font-family: arial;font-size:12px'>$cell</td>";

  echo "</tr>\n";
}
mysql_free_result($oval);

//* SQUARE *// 

for ($i = 0; $i < $fields_num; $i++)
{
  $field = mysql_fetch_field($square);
  echo "<td bgcolor='#E8CF24' style='font-family: arial;font-size: 12px'>{$field->name}</td>";
}

echo "</tr>\n";

while ($row = mysql_fetch_row($square))
{
  echo "<tr>";

  foreach ($row as $cell)
    echo "<td style='font-family: arial;font-size:12px'>$cell</td>";

  echo "</tr>\n";
}
mysql_free_result($square);

//* INSERT *// 

for ($i = 0; $i < $fields_num; $i++)
{
  $field = mysql_fetch_field($insert);
  echo "<td bgcolor='#E8CF24' style='font-family: arial;font-size: 12px'>{$field->name}</td>";
}

echo "</tr>\n";

while ($row = mysql_fetch_row($insert))
{
  echo "<tr>";

  foreach ($row as $cell)
    echo "<td style='font-family: arial;font-size:12px'>$cell</td>";

  echo "</tr>\n";
}
mysql_free_result($insert);

?> 
```

有谁知道我如何在某种意义上隔离“Imagename”列以使图像可点击？谢谢你的帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:08:07.363

首先，他们会因为你不逃跑而将你撕成碎片，但我会让其他人为此责备你。

在您一口气输出表格中的所有内容的那一刻，您需要将其拆分，因此而不是

```
echo "<td style='font-family: arial; font-size: 12px;'>{$cell}</td>"; 
```

你会想要类似的东西

```
echo '<td style="font-family: arial;font-size:12px">' . $cell['toolcode'] . '<a href=' . $cell['imagename'] . ' target="_blank">' . $cell['imagename'] . '</a></td>'; 
```

您需要单独回显这些值，然后`<a>`在超链接周围加上一个标签，并带有一个 href

# haskell - 避免类型类中相互递归默认方法的错误

> ID：13154182
> 
> 赞同：2
> 
> 时间：2012-10-31T08:49:14.560
> 
> 标签：haskell, types, typeclass

> **可能重复：**
> [如果类实例是循环，GHC 可以警告吗？](https://stackoverflow.com/questions/12270239/can-ghc-warn-if-class-instance-is-a-loop)

考虑一个类型类，它有两个可以相互实现的方法：

```
class Num a => Foo a where

  foo :: a

  bar :: a -> a
  bar x = baz x + 1

  baz :: a -> a
  baz x = bar x - 1 
```

根据类型，实现`bar`or可能更容易`baz`，或者出于效率原因，您可能希望同时实现它们。

现在我去别的地方做这个类的一个实例

```
instance Foo Integer where
  foo = 1 
```

糟糕，我忘*了*实现`bar`or `baz`！没关系，类型系统会为我选择，不是吗？

```
C:\path\to\file> ghci Foo.hs
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
[1 of 1] Compiling Main             ( Foo.hs, interpreted )
Ok, modules loaded: Main. 
```

嗯，显然不是。现在，如果我尝试使用我的课程

```
*Main> bar 1
<interactive>: out of memory 
```

哦哦。提示数小时的痛苦调试。

有没有办法让 GHC 知道每个实例*至少*需要指定一个`bar`or `baz`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:02:37.837

不幸的是没有。大多数使用默认值定义类型类的库都会指定“最小完整定义”，但他们现在没有以可检查的方式将其指定给 GHC。有一些关于为此实施 pragma 的模糊讨论，但据我所知，没有什么严重的。

请注意，仅检查相互递归是不够的；相互递归的默认方法可能是完全有效的，`some`例如`many`在[`Alternative`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Applicative.html#g:2).

# php - 从帖子创建干净的网址

> ID：13154185
> 
> 赞同：1
> 
> 时间：2012-10-31T08:49:23.000
> 
> 标签：php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:53:08.437

Somewhere in your code the string is html encoded which turns ’ to #039; then at following step

```
$clean = preg_replace("/[^a-zA-Z0-9\/_|+ -]/", '', $clean); 
```

characters # and ; are stripped and you end up with 039

# c# - 有没有更好的方法在 .NET 4.5 中将变量名称作为字符串获取？

> ID：13154191
> 
> 赞同：8
> 
> 时间：2012-10-31T08:49:40.287
> 
> 标签：c#, .net, reflection, .net-4.5

> **可能重复：**
> [获取变量或参数的名称](https://stackoverflow.com/questions/9801624/get-name-of-a-variable-or-parameter)

我希望能够将变量的名称作为字符串获取。

这可以通过[使用无参数 lambda 表达式](http://ivanz.com/2009/12/04/how-to-avoid-passing-property-names-as-strings-using-c-3-0-expression-trees/)有效地实现。但是，这会产生性能开销，而且它不是内置功能。

.NET 4.5 [`CallerMemberNameAttribute`](http://awkwardcoder.blogspot.com.au/2012/07/callermembername-not-that-great-for.html)提供了将调用者的名称作为方法参数提供。这为我们提供了一种内置且更好（在某些情况下）的方法来针对特定情况执行此操作。

**.NET 4.5 针对特定上下文在这方面提供了改进。现在还有更好的 ^ 方法将任何变量的名称作为字符串获取吗？**

根据要求，这是我想要实现的一般用法示例：

```
//Assume 'myVariable' is a local variable, member variable, static member variable, constant, parameter or even a property.
string myVariableName = ...; //This should get the string name of myVariable 
```

^更好，我的意思是更快，不需要反射，内置于 .NET 或更优雅，但最好是这些的组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:23:59.610

不，没有更好/更快的方法。我认为，您链接的表达式树方式是获取变量名称的唯一方法。

, `CallerMemberNameAttribute`,是 .NET 4.5 在该领域中引入的唯一新功能`CallerFilePathAttribute`。`CallerLineNumberAttribute`

# java - 我应该如何与 Spring 后端进行通信 - GWT 前端 + 移动设备

> ID：13154194
> 
> 赞同：0
> 
> 时间：2012-10-31T08:49:55.610
> 
> 标签：java, web-services, spring, gwt

我正在开发一个服务器-客户端应用程序。这是一项应该被成千上万的用户使用的服务，因此它应该可以很好地扩展。服务器端是在 Spring + JPA(Hibernate) 中完成的，它提供了大约 80 个 API 方法。将有多个客户端——GWT webapp、移动设备客户端（iOS、Android、Windows）+一个简单的桌面客户端（Eclipse RCP/待定）。

我正在考虑连接到服务器端的各种方法。我的想法是（也许还有其他更好的方法）：

1.  **使用 SOAP Webservices 向所有客户端公开服务器 API**
    *   SOAP WS 被认为很慢，我不知道它可以处理所有的通信
    *   Android 不正式支持 SOAP WS（但有一些 3rd 方库）
2.  **使用 RESTfull WS 处理通信**
    *   性能优于 SOAP
    *   所有移动设备上的官方支持
    *   可能难以从非 Web 桌面客户端访问 RESTfull WS
3.  **将 REST WS 用于移动设备，将 GWT 请求工厂用于 webapp**
    *   Request Factory 是与 GWT 客户端通信的推荐方式（至少它是在 2009 Google I/O 上）。我想它应该比 Web 服务执行得更好？

哪种解决方案（上面列出或没有列出）性能最好并且对开发人员来说最有效率？

如果您从事过类似的项目，我很想知道您的意见:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T21:36:30.937

我会投票支持在后端使用 RESTful 服务，并从您选择的前端与之交互。

这为您在服务多个客户方面提供了最大的灵活性。例如，您可以终止前端技术而无需删除任何服务器端代码，或者您可以引入新的前端而无需更改任何后端。

如果您避免尝试同时支持移动端的 REST WS 和 webapp 的 GWT 支持的服务器端类（例如 GWT-RPC），您将获得以下优势：

*   单后端开发测试：不要小看这个！
*   易于监控网络流量以调试任一端*实际*发送的内容。GWT 网络流量并不那么容易调试，我将在任何一天通过 GWT-RPC 使用 JSON。

不必担心一种技术或另一种技术无法使用您的服务：REST WS 变得如此流行，以至于有多种方法可以从任何前端使用这些服务。例如，GWT 应用程序可以使用 GWT 覆盖将 JSON 响应映射到 GWT/Java 对象，桌面客户端可以使用[Apache HTTP Client](http://hc.apache.org/httpcomponents-client-ga/quickstart.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:27:44.077

如果你的 web 服务是 RESTful 的，我会推荐你[​​ RestyGWT](https://resty-gwt.github.io/)。

我很久以前用过它，效果很好。

# red5 - 使用 red5 的 Http 流式传输

> ID：13154197
> 
> 赞同：4
> 
> 时间：2012-10-31T08:50:03.093
> 
> 标签：red5, http-streaming

我想从 red5 服务器执行 http 流，以便用它为 Iphone 广播。你们能建议一种方法吗？有没有办法在 Iphone 中从 red5 播放 rtmp 流。任何帮助都是可观的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:38:23.250

我参与了你链接的讨论。但我认为项目组还没有提交 HTTP Streaming 组件。也没有关于它的文档。

因此，如果有可能这样做，您可能需要 red5 开发人员中的某个人来雇用。

塞巴斯蒂安

# php - 解析错误语法错误意外文件结尾关闭

> ID：13154200
> 
> 赞同：-2
> 
> 时间：2012-10-31T08:50:15.967
> 
> 标签：php

谁能发现这段代码有什么问题？我`Parse error: syntax error, unexpected end of file in C:\Program Files\EasyPHP-12.1\www\index.php on line 229` 想知道你能不能帮我解决这个问题，我很困惑......

```
<?php include("./ayarlar.php");
if(isset($_GET['uygulama']) && $_GET['uygulama']=="cikis"){
$_SESSION['uyeKontrol']="";
$_SESSION['uyeTanimlama']="";
$_SESSION['uyeAdi']="";
header( 'Location: ./' );
}
?>
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<script id="jquery.core" src="uygulamalar/jquery.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="uygulamalar/menu.js"></script>
<link href="tasarim/icon.png" rel="shortcut icon">
<title><?=$sitebaslik?></title>

<style type="text/css">
ul.listemiz{width:985px;list-style:none;float:left;  padding:10px 0px 0px 23px;}
ul.listemiz li{width: 220px; height:211px; float: left; background:url(tasarim/list.png);padding:6px 18px 0px 0px;}
</style>

<style type="text/css">
ul.gorsel{width:1100px;list-style:none;float:left;  margin:0px 0px 0px 0px;padding:0px 0px 0px 0px;}
ul.gorsel li{width: 230px; height:143px; float: left; background:url(tasarim/tm.png);padding:6px 12px 0px 0px;}
</style>

        <link rel="stylesheet" href="Standard/css/global.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script src="http://gsgd.co.uk/sandbox/jquery/easing/jquery.easing.1.3.js"></script>
    <script src="Standard/js/slides.min.jquery.js"></script>
    <script>
        $(function(){
            $('#slides').slides({
                preload: true,
                preloadImage: 'Standard/img/loading.gif',
                play: 5000,
                pause: 2500,
                hoverPause: true
            });
        });
    </script>

    </head>
<body style="background-attachment: scroll; background-color:#E6E6E6">
<div class="temel">
<?php include("./site01.php");?>
<div id="sayfaicerigi"><div align="center"><br />
<table border="0" width="980" height="310" cellspacing="0" cellpadding="0">
    <tr>
    <td width="302" valign="top" align="left">

<?php if(isset($_SESSION['uyeKontrol']) && $_SESSION['uyeKontrol']!=""){?>

        <table border="0" width="295" cellspacing="0" cellpadding="0" height="103" background="img/<?=$menu102?>.png">
            <tr>
                <td valign="top" align="center"></td>
            </tr>
            <tr>
                <td valign="center" align="center" height="40">
                <a href="hesabim">
                <img border="0" src="img/<?=$menu108?>.png" width="120" height="32"></a>
                <a href="index.php?uygulama=cikis"> <img border="0" src="img/<?=$menu109?>.png" width="120" height="32"></a></td>
            </tr>
            <tr>
                <td valign="top" align="center" height="33">
                <font face="Tahoma" color="#FFFFFF" style="font-size: 11pt">Hoş geldin: <?=$_SESSION['uyeAdi']?>
                </font>
                </td>
            </tr>
        </table>
<p><a href="emlak-ekle"><img border="0" src="img/EMLK.png" width="295" height="103"></a></p>
<?}else{?>
        <table border="0" width="295" cellspacing="0" cellpadding="0" height="103" background="img/<?=$menu102?>.png">
            <tr>
                <td valign="top" align="center"></td>
            </tr>
            <tr>
                <td valign="center" align="center" height="40">
                <a href="kurumsal-giris">
                <img border="0" src="img/<?=$menu104?>.png" width="120" height="32"></a>
                <a href="bireysel-giris"> <img border="0" src="img/<?=$menu103?>.png" width="120" height="32"></a></td>
            </tr>
            <tr>
                <td valign="top" align="center" height="33">
                <a href="uye">
                <img border="0" src="img/uyecik.png" width="244" height="23"></a></td>
            </tr>
        </table>
<p><a href="emlak-ekle"><img border="0" src="img/EMLK.png" width="295" height="103"></a></p>
<?php }?>   

        </td><td width="13"></td>
        <td width="665" valign="top" align="left">
        <div style="position: absolute; width: 100px; height: 100px; z-index: 501" id="katman2">
        <img src="Standard/img/new-ribbon.png" width="112" height="112" alt="New Ribbon" id="ribbon">
            <div id="slides">
                <div class="slides_container">
<?php
$mansetler = mysql_query("SELECT * FROM emlak order by id desc LIMIT 0,7");
while($manset = mysql_fetch_array($mansetler))
{
$mansetlerCO = mysql_query("SELECT * FROM resimler where emlak='".$manset['id']."'");
if($mansetCO = mysql_fetch_array($mansetlerCO))
{
}
?>
<a href="<?=$manset['id']?>_<?=duzgundur(StrToLower($manset['emlak']))?>.html" title="" >
<div style="position: absolute; width: 595px; height: 60px; top:220px; z-index: 102; background:#C0C0C0; color:#fff; overflow:hidden; z-index:200; opacity:.8; filter:alpha(opacity=80)" id="katman3" ><br>&nbsp;&nbsp;<b><font color="#000000" face="Tahoma" style="font-size: 12pt"><?=substr($manset['emlak'],0,60)?>.. - Fiyat: <?=$manset['fiyat']?> TL</font></b></div>
<img src="<?=$mansetCO['resim']?>" width="600" height="270" alt=""></a>
<?php }?>
                </div>
                <a href="#" class="prev"><img src="Standard/img/arrow-prev.png" width="24" height="43" alt="Arrow Prev"></a>
                <a href="#" class="next"><img src="Standard/img/arrow-next.png" width="24" height="43" alt="Arrow Next"></a>
            </div>
            <img src="Standard/img/example-frame.png" width="739" height="341" alt="Example Frame" id="frame">
</div>
        </td>

    </tr>
</table></div>

<table border="0" width="980" height="33" style="border-bottom:1px solid #dcdbdb;">
<tr>
<td valign="center" align="left" width="35">
<img border="0" src="tasarim/icon.png" width="24" height="24"></td>
<td valign="center" align="left" width="293">
<?=$menu3?></td>
<td valign="center" align="left" width="638">
<p align="right"><a href="kiralik-konutlar"><?=$menu100?></a>&nbsp;&nbsp; </td>
</tr>
</table>

    <table border="0" width="980" height="131" cellspacing="0" cellpadding="0">
        <tr>
            <td valign="top" align="left" width="980">
            <ul class="gorsel">
<?php
$rastgeleler = mysql_query("SELECT * FROM emlak WHERE durum=2 and onay=1 order by id desc LIMIT 8");
while($rastgele = mysql_fetch_array($rastgeleler))
{
?><li>
            <table border="0" width="238" height="113" cellspacing="0" cellpadding="0">
                <tr>
                    <td width="14">&nbsp;</td>
                    <td width="115">
                    <a href="<?=$rastgele['id']?>_<?=duzgundur(StrToLower($rastgele['emlak']))?>.html">
<?php
$resimsecici = mysql_query("SELECT * FROM resimler where emlak='".$rastgele['id']."'");
if($resimci = mysql_fetch_array($resimsecici))
{
?><img border="0" src="goruntule?img=<?=$resimci['resim']?>&w=110&h=91"><?}?></a></td>
                    <td width="109"><font face="Tahoma" size="2"><?=$menu88?> :<?php if($rastgele['durum']==1){?><?=$menu19?><?}else{?><?=$menu20?><?php }?><br>
                    <?=$menu18?>: <?=$rastgele['fiyat']?> TL<br>
                    <?=$rastgele['ilce']?>/<?=substr($rastgele['il'],0,3)?>.<br>
&nbsp;  <br>
                    <a href="<?=$rastgele['id']?>_<?=duzgundur(StrToLower($rastgele['emlak']))?>.html">
    <img border="0" src="tasarim/<?=$menu97?>.png" width="84" height="18"></a></font></td>
                </tr>
            </table>
            </li>   <?}?>       
            </ul></td>

        </tr>
    </table>

<table border="0" width="980" height="33" style="border-bottom:1px solid #dcdbdb;">
<tr>
<td valign="center" align="left" width="35">
<img border="0" src="tasarim/icon.png" width="24" height="24"></td>
<td valign="center" align="left" width="272">
<?=$menu2?></td>
<td valign="center" align="left" width="659">
<p align="right"><a href="satilik-konutlar"><?=$menu100?></a>&nbsp;&nbsp; </td>
</tr>
</table>

<table border="0" width="980" height="131" cellspacing="0" cellpadding="0">
        <tr>
            <td valign="top" align="left" width="980">
            <ul class="gorsel">
<?php
$rastgeleler = mysql_query("SELECT * FROM emlak WHERE durum=1 and onay=1 order by id desc LIMIT 4");
while($rastgele = mysql_fetch_array($rastgeleler))
{
?><li>
            <table border="0" width="238" height="113" cellspacing="0" cellpadding="0">
                <tr>
                    <td width="14">&nbsp;</td>
                    <td width="115">
                    <a href="<?=$rastgele['id']?>_<?=duzgundur(StrToLower($rastgele['emlak']))?>.html">
                    <?php
$resimsecicim = mysql_query("SELECT * FROM resimler where emlak='".$rastgele['id']."'");
if($resimcim = mysql_fetch_array($resimsecicim))
{
?><img border="0" src="goruntule?img=<?=$resimcim['resim']?>&w=110&h=91"><?}?></a></td>
                    <td width="109"><font face="Tahoma" size="2"><?=$menu88?> :<?php if($rastgele['durum']==1){?><?=$menu19?><?}else{?><?=$menu20?><?php }?><br>
                    <?=$menu18?>: <?=$rastgele['fiyat']?> TL<br>
                    <?=$rastgele['ilce']?>/<?=substr($rastgele['il'],0,3)?><br>
&nbsp;  <br>
                    <a href="<?=$rastgele['id']?>_<?=duzgundur(StrToLower($rastgele['emlak']))?>.html">
    <img border="0" src="tasarim/<?=$menu97?>.png" width="84" height="18"></a></font></td>
                </tr>
            </table>
            </li>   <?php }?>       
            </ul></td>

        </tr>
    </table>

</div>
<br>
<?php include("./site02.php");?><br><br>
</div>
</body>
</html>
<?php
$_SESSION['gidenemlak']="";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:00:04.633

我认为问题出在这块：`}?>`它位于代码中间的某个地方。

您不应该将括号直接靠近打开/关闭 php 标签，而是用空格分隔：`} ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:00:11.553

该错误是由于打开/关闭 php 标记和括号之间缺少空格引起的。你应该避免这个：

```
{?> AND <?}else{?> 
```

相反，您应该像这样：

```
{ ?> AND <?php else{ ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:00:21.047

您的脚本中缺少一些结尾的大括号

# sql - 调整长时间运行的查询

> ID：13154203
> 
> 赞同：0
> 
> 时间：2012-10-31T08:50:22.123
> 
> 标签：sql, oracle, informatica

```
SELECT a AS a,
   b AS b,
   c AS c,
   d AS d,
   e AS e,
   f AS f,
   g AS g,
   h AS h
FROM ( 
   SELECT P.*,
      ROW_NUMBER() OVER (PARTITION BY p.a, RANK_NM 
      ORDER BY P.ID DESC) RW_NUM 
   FROM ( 
      SELECT T.a,
         T.b,
         T.c,
         T.d,
         T.e,
         T.f,
         T.g,
         T.h,
         T.ID
         DENSE_RANK() over (PARTITION BY T.a 
         ORDER BY T.b, T.c, T.d
         , T.e, T.f, T.g, T.h
         DESC) RANK_NM 
      FROM TEST_TABLE T ) p) Y 
WHERE RW_NUM = 1 
```

我从生产团队那里得到了这个调优查询，我无权访问生产和其他东西，我必须向生产人员提供查询才能执行，他们期待奇迹。问题是 TEST_TABLE 包含 9800 万条记录，此查询用于 informatica 并创建巨大的缓存。有什么方法可以用更好的方式编写查询，只需查看查询。我知道调整需要很多东西和信息，但这就是我所得到的。:) 数据库是 oracle 10 g。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:26:53.833

除非您隐藏了其他字段，否则此查询实际上在做的是

```
SELECT DISTINCT a, b, c, d, e, f, g, h FROM TEST_TABLE 
```

正如内维尔指出的那样，如果有更多的字段，则内部分析函数是多余的。你可以这样重写它：

```
SELECT
  a, b, c, d, e, f, g, h, extra1, extra2
FROM
(
  SELECT
    a, b, c, d, e, f, g, h, extra1, extra2,
    ROW_NUMBER() OVER(PARTITION BY a, b, c, d, e, f, g, h ORDER BY ID DESC) RW_NUM
  FROM TEST_TABLE
)
WHERE RW_NUM = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:12:27.487

正如 Podiluska 所说，在无法查看查询计划或添加索引的情况下优化查询有点费脑筋。

但是，似乎确实有一些多余的“order by”操作正在进行：非常内部的查询具有：

```
ORDER BY T.b, T.c, T.d
         , T.e, T.f, T.g, T.h
         DESC) 
```

和外面的查询有：

```
ORDER BY P.ID DESC 
```

查询优化器可能会忽略内部 order by，但如果您可以删除该 order by 语句，您可能会得到一些改进，尤其是在没有匹配的索引时。

# iphone - 未找到实例方法（返回类型默认为 id）

> ID：13154206
> 
> 赞同：5
> 
> 时间：2012-10-31T08:50:27.740
> 
> 标签：iphone, objective-c, ios, xcode

我收到了 Xcode 的警告。这是代码

```
 DeviceList *dList = (DeviceList* )[[User thisUser] devices];
 [dList getListId]; 
```

警告指出找不到实例方法 -getListId。但是该方法存在于我的源代码中

```
- (NSString*) getListId
{
    T
    if ( ... != nil)
    {
        return ...;
    }
    else
    {
        return @"";
    }
} 
```

当我调用该方法时，我无法弄清楚问题是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T08:52:14.707

您是否在 .h 文件中添加了此方法的声明，如果是，是否已将 .h 导入到您尝试调用此方法的文件中？

这个错误基本上是编译器说它找不到方法声明，所以它不知道返回类型是什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T08:53:09.290

在你的 DeviceList.h 中，确保你有

```
@interface DeviceList : Parent
- (NSString*) getListId;
..
..
@end 
```

当您的方法未在头文件中声明并且您尝试在 (self) 类之外调用它时，会出现警告。

# html - ie7上的响应式菜单中断

> ID：13154211
> 
> 赞同：1
> 
> 时间：2012-10-31T08:50:38.230
> 
> 标签：html, css, internet-explorer, responsive-design

我有一个使用响应式设计构建的菜单，该菜单在 IE7 以外的浏览器上运行良好

知道为什么这个菜单会在 IE7 上中断吗？

链接： [https ://dl.dropbox.com/u/107452929/newtest/CWSMainTitle.htm](https://dl.dropbox.com/u/107452929/newtest/CWSMainTitle.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:18:37.083

添加**行高：0px；**到您的导航。这解决了问题

只是一个建议，您可以在这里找到一个简单的跨浏览器兼容导航栏 - [http://www.w3schools.com/css/css_navbar.asp](http://www.w3schools.com/css/css_navbar.asp)

这与您正在尝试的操作完全相同，并且不会遇到任何问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:37:30.097

您必须记住，媒体查询与 Internet Explorer 8 或更低版本不兼容。

有关媒体查询浏览器兼容性的信息，请参阅此链接：http: [//caniuse.com/css-mediaqueries](http://caniuse.com/css-mediaqueries)

另外，如果我是正确的，Internet Explorer 7 没有在任何平板电脑/移动设备上使用，那么您为什么要担心 Internet Explorer 7 中的响应式网站设计？

谢谢，希望这会有所帮助！

# formatting - 在 Access2007 中以无穷无尽的形式格式化行

> ID：13154220
> 
> 赞同：0
> 
> 时间：2012-10-31T08:51:08.817
> 
> 标签：formatting, ms-access-2007, continuous-forms

我的数据库应用程序中有一个连续的表格。在这种形式中，显示了具有 3 列的表的数据：product、numberofItemsOfToday、numberOfItemsOfYesterday。

现在，如果相应行中的 numberofItemsOfToday != numberOfItemsOfYesterday ，我希望将行着色为红色（ForeColor）。

我尝试了类似的东西

```
Private Sub Form_Current()
    addConditionalFormatingText txtnumberofItemsOfToday, numberOfItemsOfYesterday, txtProduct, txtnumberofItemsOfToday, txtnumberOfItemsOfYesterday
End Sub

Private Sub addConditionalFormatingText(field1 As Object, field2 As Object, t1 As TextBox, t2 As TextBox, t3 As TextBox)
    Dim color As Long
    color = IIf(CBool(Nz(field1.Value, "") <> Nz(field2.Value, "")), RGB(255, 0, 0), RGB(0, 0, 0))
    t1.ForeColor = color
    t2.ForeColor = color
    t3.ForeColor = color
End Sub 
```

但当然问题是，如果某一行中的值不同，则所有行都被涂成红色。如何只以连续形式设置特殊行的颜色？

# c++ - 编译器或 boost 库的错误？

> ID：13154222
> 
> 赞同：9
> 
> 时间：2012-10-31T08:51:14.420
> 
> 标签：c++, visual-c++, boost, boost-asio

这个程序（它已经从一个更大的程序中缩小了）在windows 7下以vs2008 Release（Win32）模式编译后总是崩溃。我对汇编代码不熟悉，不知道这是编译器或boost :: ends_with的错误或 boost::asio::buffers_iterator。它可以在 Ubuntu 中用 g++ 编译和执行，没有任何问题。

人们说这不太可能是编译器的错误，但是当以调试模式（或禁用优化）编译时，问题确实消失了。

我已经被这个问题困扰了好几个小时。任何帮助表示赞赏。提前致谢。

```
#include <iostream>
#include <string>
#include <boost/asio.hpp>
#include <boost/algorithm/string.hpp>

typedef boost::asio::buffers_iterator<boost::asio::const_buffers_1> iterator_t;
typedef boost::iterator_range<iterator_t> range_t;
static const std::string LINE_END_MARK = "\r\n";

int main(int argc, char* argv[])
{
    boost::asio::streambuf _buf;
    std::ostream os(&_buf);
    os<<"END\r\n";

    iterator_t cursor = boost::asio::buffers_begin(_buf.data());
    iterator_t end = boost::asio::buffers_end(_buf.data());

    std::ostream_iterator<char> it(std::cout," ");
    std::copy(LINE_END_MARK.begin(), LINE_END_MARK.end(), it);

    range_t r(cursor, end);
    if(!boost::ends_with(r, LINE_END_MARK))
        return 0;
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:12:20.560

编辑：我误读了代码，对不起。

您的光标和结束迭代器指向无效内存。您修改了在复制到输出迭代器期间重新分配的底层流缓冲区。asio streambuf 允许您出于性能原因访问原始内存，但需要注意的是您必须担心这样的事情。

调试和释放将改变分配和释放的行为方式，涉及分配块的底层大小以及内存如何被隔离、保护、初始化、对齐等。

在复制操作之后构造迭代器以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:21:08.793

它不起作用，因为 'range_t r(cursor, end)' 是“缓冲区”范围而不是字符范围。因此，您将缓冲区指针列表与 LINE_END_MARK 中的每个字符进行比较。

如果在 win32 下的发布模式下崩溃，因为在 Windows 中，您最终会取消引用导致崩溃的空指针。

boost asio 有多个缓冲区的概念，但目前并没有真正使用。如果您查看实现是否仅真正使用 'const_buffers_1' 或 'mutable_buffers_1' 这基本上是 1 个缓冲区的列表。

我假设您想比较缓冲区的内容，而不是缓冲区范围的列表。

所以你想做这样的事情：

```
typedef boost::iterator_range<const char*> range_t;
range_t r(boost::asio::buffer_cast<const char*>(_buf.data()), boost::asio::buffer_cast<const char*>(_buf.data()) + boost::asio::buffer_size(_buf.data()));
if(!boost::ends_with(r, LINE_END_MARK))
    return 0;
return 1; 
```

# python - Python 类成员扫描 - 为什么在获取成员时需要 __bases__ 递归扫描？

> ID：13154226
> 
> 赞同：2
> 
> 时间：2012-10-31T08:51:34.030
> 
> 标签：python, introspection, base-class

我找到了以下功能，但我不知道为什么`__bases__`需要额外的扫描：

```
def getMembersWithBases(classType):
    members = set(dir(classType))
    # recursive bases scan
    for baseClassType in classType.__bases__:
        members.update(getMembersWithBases(baseClassType))
    return members 
```

下面的函数更快并且给出相同的结果——那么为什么还`__bases__`需要额外的扫描呢？

```
def getMembers(classType):
    members = set(dir(classType))
    return members 
```

一些带有新式和旧式类的测试代码：

```
class Father(object):
    def testFather():
        pass

class Mother(object):
    def testMother():
        pass

class Child(Father, Mother):
    def testChild():
        pass

print type(Child)
print getMembers(Child) == getMembersWithBases(Child)                                             

class Father:
    def testFather():
        pass

class Mother:
    def testMother():
        pass

class Child(Father, Mother):
    def testChild():
        pass

print type(Child)
print getMembers(Child) == getMembersWithBases(Child) 
```

结果：

```
<type 'type'>
True
<type 'classobj'>
True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:02:31.267

实际上，对于类，[`dir()`函数](http://docs.python.org/2/library/functions.html#dir)已经包含了以下列出的所有类`__bases__`：

> 如果对象是类型或类对象，则列表包含其属性的名称，并递归地包含其基类的属性。

但是，类可以通过指定方法来*覆盖*`__dir__`该行为（通过元类，类方法是不够的）：

> 如果对象有一个名为 的方法`__dir__()`，该方法将被调用并且必须返回属性列表。

当一个`__dir__()`方法存在时，`__bases__`不递归：

```
>>> class Foo(object):
...     def spam(self): pass
... 
>>> class Bar(object):
...     def ham(self): pass
... 
>>> class CustomDirMetaclass(type):
...     def __dir__(cls):
...         return ['eggs']
... 
>>> class Baz(Foo, Bar):
...     __metaclass__ = CustomDirMetaclass
...     def eggs(self): pass
... 
>>> dir(Baz)
['eggs']
>>> getMembers(Baz)
set(['eggs'])
>>> getMembersWithBases(Baz)
set(['__module__', '__getattribute__', 'eggs', '__reduce__', '__subclasshook__', '__dict__', '__sizeof__', '__weakref__', '__init__', 'ham', '__setattr__', '__reduce_ex__', '__new__', 'spam', '__format__', '__class__', '__doc__', '__delattr__', '__repr__', '__hash__', '__str__']) 
```

`__bases__`因此，类方法中的显式递归`getMembersWithBases()`可能是绕过任何自定义`__dir__()`实现的尝试。

否则，递归`__bases__`完全是多余的。

在我个人看来，*即使*类层次结构中存在方法*，*递归`__bases__`也是多余的。在这种情况下，方法覆盖是错误的，因为*该*方法应该递归列出的类以正确模仿函数的行为。 **`__dir__()``__dir__()`*`__bases__``dir()`***

 ***老实说，我怀疑您找到的函数的作者没有意识到 的递归性质`dir()`，并且添加了`__bases__`递归，而不是作为绕过自定义`__dir__()`方法的手段。***

# playframework-2.0 - 阿卡管演奏承诺

> ID：13154228
> 
> 赞同：0
> 
> 时间：2012-10-31T08:51:39.070
> 
> 标签：playframework-2.0, akka

[http://doc.akka.io/docs/akka/2.0.2/java/untyped-actors.html#Ask_Send-And-Receive-Future](http://doc.akka.io/docs/akka/2.0.2/java/untyped-actors.html#Ask_Send-And-Receive-Future)

我想使用这种模式。

我在我的 Actor 中进行了一个 WS 调用，它返回一个 F.Promise。现在我想把这个承诺传递给另一个演员。Patterns.pipe 适用于 Akka 未来。如何使用 F.Promise 实现这种模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:41:58.463

在 Akka 2.0.2 中，Promise IS-A 未来，所以只需：promise pipeTo actor

[http://doc.akka.io/api/akka/2.0.3/#akka.dispatch.Promise](http://doc.akka.io/api/akka/2.0.3/#akka.dispatch.Promise)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:36:42.457

如果您正在遍历 3 层 actor 系统，则可以使用“sender”命令。它会将数据发回给正在使用未来的演员，通过这个你可以将它传递给你想要的另一个演员。

# android - 根据条件动态扩展 xml 文件

> ID：13154233
> 
> 赞同：0
> 
> 时间：2012-10-31T08:52:14.000
> 
> 标签：android, layout-inflater

我有一个`EditText`，用户输入数字让我们说 5。现在我想将一个 xml 文件膨胀 5 次。

我的问题是xml文件（我膨胀）有一个按钮继续当用户按下它然后我再次膨胀它。

例如，我有问题和答案的 arralist，它们都是由用户选择的，我将数据存储在 arraylist 中。现在我想向用户一一展示每个选定的问题和答案。所以我决定创建一个 xml 文件，当用户点击下一个问题时，它会显示问题并一一回答。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:58:00.400

> 我想将一个 xml 文件膨胀 5 次。

我必须说这是一个糟糕的设计，相反，您可以使用`ListView(Vertically)`和扩展布局行或`ViewPager(Horizontally)`用于扩展您的自定义布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:06:47.787

设置`View`可见和不可见是一个非常糟糕的设计。根据您的问题，我假设您希望您的用户在测验应用程序中输入他们想要回答的问题数量。

在这里，5 个问题不需要 5`TextView`秒。你只需要5个问题，`ArrayList`1个`TextView`问题，4个`RadioButton`选项。然后，每当用户回答问题时，都会从您那里获得一个新问题，`ArrayList`并将其内容设置为`questionTextView`and `answerRadioButton`。

希望这可以帮助。

# asp.net-mvc-4 - 未找到入口点异常

> ID：13154241
> 
> 赞同：30
> 
> 时间：2012-10-31T08:52:57.577
> 
> 标签：asp.net-mvc-4, .net-4.5

我已经安装`vs2012 (11.0.50727.1)`，
我打开了一个新的**`MVC4 with .NET 4.5`**解决方案，
我创建了一个简单的`HomeController`并且我想在本地启动它，我收到了这个非常奇怪的错误：
如何解决它？这是什么错误，为什么会发生？？？

提前感谢您的任何帮助。

```
 Server Error in '/' Application.
Entry point was not found.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.EntryPointNotFoundException: Entry point was not found.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[EntryPointNotFoundException: Entry point was not found.]
   System.Web.Mvc.IDependencyResolver.GetService(Type serviceType) +0
   System.Web.Mvc.DependencyResolverExtensions.GetService(IDependencyResolver resolver) +56
   System.Web.Mvc.SingleServiceResolver`1.GetValueFromResolver() +44
   System.Lazy`1.CreateValue() +180
   System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw() +22
   System.Lazy`1.get_Value() +10749357
   System.Web.Mvc.SingleServiceResolver`1.get_Current() +15
   System.Web.Mvc.MvcRouteHandler.GetSessionStateBehavior(RequestContext requestContext) +121
   System.Web.Mvc.MvcRouteHandler.GetHttpHandler(RequestContext requestContext) +33
   System.Web.Mvc.MvcRouteHandler.System.Web.Routing.IRouteHandler.GetHttpHandler(RequestContext requestContext) +10
   System.Web.Routing.UrlRoutingModule.PostResolveRequestCache(HttpContextBase context) +9709656
   System.Web.Routing.UrlRoutingModule.OnApplicationPostResolveRequestCache(Object sender, EventArgs e) +82
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +136
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.17929 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-01T16:38:38.047

我已将项目从`MVC3+.NET4`to转换为，并且在调用控制器的操作时`MVC4+.NET4.5`收到异常。`Entry point was not found`

我的解决方案是在 web.config 中插入程序集绑定重定向以指向`MVC 4`程序集：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

我不知道问题的确切原因，也许是一些仍然引用 MVC3 的第三方库。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-19T11:04:24.890

当您将项目从 MVC3 切换到 MVC4 并忘记在 web.config 中更改为时，会出现相同的`System.Web.WebPages.Razor, Version=1.0.0.0`错误`System.Web.WebPages.Razor, Version=2.0.0.0`。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-11-12T14:56:09.070

旧帖子，但如果您在 mvc 问题之前遇到它（System.Mvc.dll 更新，例如 x.0.0.1），您可以检查 bindingRedirect 标记（4.0.0.0 -> 4.0.0.1）

```
<dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.1" />
  </dependentAssembly> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-09-24T07:12:45.797

如果您在 WebAPI 控制器中发现此错误 - 您需要修复**System.Web.Http的绑定版本**

```
<dependentAssembly>
    <assemblyIdentity name="System.Web.Http" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-5.2.3.0" newVersion="5.2.3.0" />
</dependentAssembly> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-23T13:02:36.457

您还应该检查解决方案中的所有项目是否引用了最新版本的 dll，并且不同子项目使用的版本是否不一致。

尽管运行了 nuget 卸载、安装和更新，但我发现测试项目引用了旧版本的 system.net.http

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-17T13:02:04.317

如果您使用 .net 4.5 并从 .net 4.0 库向 ModelBinders.Binders 集合添加活页夹，您也会收到此类错误。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-14T20:56:49.847

您的 Global.asax.cs 中有类似的内容吗？

```
private static void InitializeDependencyInjectionContainer(HttpConfiguration config)
{
    container = new UnityContainer();

    container.RegisterType<Site.Web.Data.IDatabaseFactory, Site.Web.Data.DatabaseFactory>();
    container.RegisterType<Site.Web.Data.Interfaces.IUnitOfWork, Site.Web.Data.UnitOfWork>();
    container.RegisterType<Site.Web.Data.Interfaces.IUserRepository, Site.Web.Data.Repositories.UserRepository>();
    container.RegisterType<Site.Web.Data.Interfaces.ISiteRepository, Site.Web.Data.Repositories.SiteRepository>(); 
```

从您发布的堆栈跟踪中，您的`System.Web.Mvc.IDependencyResolver.GetService(Type serviceType) +0`一个（或多个）依赖项无法解决。

您可以尝试将其中的一个或多个注释掉，并尝试缩小哪一个无法解决。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-16T10:06:57.393

旧帖子，但只是为任何寻找的人添加

这似乎是一个包罗万象的错误。当我的 web.config 使用外部部分并且该部分从 Visual Studio 项目中排除时，我得到了它，即使用这个

```
<sessionState configSource="SystemWeb.config" /> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-10T18:29:19.923

试试这个..在visual studio中转到包管理员控制台并输入：

```
update-package 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-22T14:17:59.000

我遇到了这个问题并通过
1.uninstall-Package Microsoft.AspNet.Mvc 解决了它（我需要先卸载其他东西才能成功卸载 AspNet.MVC） 2.Install
-Package Microsoft.AspNet.Mvc -Version 4.0.20710
3 . 重建和部署

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-28T19:24:40.560

在我的情况下不是 MVC 特定的，但刚刚开始收到此错误：

> “/”应用程序中的服务器错误。
> 
> 未找到入口点。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.EntryPointNotFoundException：找不到入口点。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [EntryPointNotFoundException：找不到入口点。]
> 
> ...
> 
> System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +8008
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.6.1055.0

造成这种情况的原因是我已从 Visual Studio 发布到 webserver 文件夹并选择预编译应用程序（使用 .NET 4.5 项目），同时允许预编译站点可更新设置 btw。

可能我的问题是该站点在 IIS 上以 .NET 4.0 运行，而在发布操作期间放置在 bin 文件夹中的预编译版本是 4.5。当我从网站上删除“bin”文件夹时，它再次运行良好。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2016-12-19T08:58:11.033

只需用“nuget”更新“System.Web.Mvc”

# windows-8 - Windows 应用商店应用程序侧加载产品密钥

> ID：13154245
> 
> 赞同：2
> 
> 时间：2012-10-31T08:53:09.143
> 
> 标签：windows-8, microsoft-metro

我想在不属于域的系统中部署我的 Windows 应用商店应用程序。根据[MSDN 文档](http://technet.microsoft.com/en-us/library/hh852635.aspx)，我们需要激活侧面加载产品密钥。

这个产品密钥到底是什么？从哪里可以获得产品密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:44:59.283

您需要通过批量许可获得密钥。

检查以下文章

[将 Metro 风格的应用程序部署到企业](http://blogs.msdn.com/b/windowsstore/archive/2012/04/25/deploying-metro-style-apps-to-businesses.aspx)。

还要检查这个文件

[批量许可指南 Windows 8 和 Windows RT](http://download.microsoft.com/download/9/4/3/9439A928-A0D1-44C2-A099-26A59AE0543B/Windows_8_Licensing_Guide.pdf)

[微软通过批量许可将 Windows 8 Pro 定价为 188 美元](http://www.windows8update.com/2012/10/07/microsoft-are-pricing-windows-8-pro-at-188-through-volume-licensing/)

# javascript - 将字符串解析为来自 JSON 的 Javascript 中的 DateTime

> ID：13154246
> 
> 赞同：0
> 
> 时间：2012-10-31T08:53:09.070
> 
> 标签：javascript, asp.net, json, datetime

我想用来自asp.net Web服务的字符串fromat在JSON中发送一个日期时间，我希望javascript像日期时间一样解析它，而不是像字符串一样。

所以我问是否有一种特殊的格式，我必须使用它来将日期时间转换为字符串并在 javascript 中将其解析为日期时间？

事实上，我不想触摸 javascript。我希望 javascript 读取字符串并将其视为 DateTime。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:55:50.430

确保您的日期字符串符合[rfc2822](https://www.rfc-editor.org/rfc/rfc2822#page-14)并使用 javascript [Date.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)方法。

或者，以整数毫秒的形式发送您的日期，并在 javascript 端使用[Date 构造函数。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:10:51.923

这是我用来从 .net JSON 序列化 DateTime 对象创建日期的一段代码。

```
function formatJSONDate(jsonDate) {
    var d = new Date((jsonDate.slice(6, -2)*1));

    var day = d.getDate() * 1;
    var month = (d.getMonth() * 1) +1;

    var s = (day < 10 ? "0" : "") + day + "-" + (month < 10 ? "0" : "") + month + "-" + d.getFullYear();

    return s;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:57:36.547

我在一些使用 ASP.NET 的项目中使用了[DateJS](http://www.datejs.com/)。格式可能取决于您的语言环境。我会查看 data.js 示例，以使其以适合您的规范和语言环境的方式工作。

# javascript - Tiny MCE 更改格式下拉显示文本

> ID：13154247
> 
> 赞同：2
> 
> 时间：2012-10-31T08:53:11.703
> 
> 标签：javascript, tinymce, rte

Tiny MCE 有一个格式选择方法：theme_advanced_blockformats 下拉菜单，您可以在其中选择格式。它显示如下值：段落、标题 1、标题 2 等。我想更改此下拉列表中显示的名称。例如，我想将“标题 1”显示为“子标题”。对于与编辑器一起工作的客户来说，这更有意义。有没有办法在 tinyMCE.init 中做到这一点？不在配置文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:19:23.000

是的，这是可能的。要设置 theme_advanced_blockformats 使用

```
tinyMCE.init({
        ...
        theme_advanced_blockformats : "p,div,h1,h2,h3,h4,h5,h6,blockquote,dt,dd,code,samp"
}); 
```

要更改标题，您必须修改下的 lang 文件`tiny_mce/themes/advanced/langs/en.js`

**更新：**

您可以在 tinymce.init 中使用 oninit 和 setup tinymce 配置参数更改标题：

```
tinymce.EditorManager.i18n['en.advanced.h1'] = 'My desired title'; 
```

所以，你可以试试：

```
tinyMCE.init({
   ...
   setup : function(ed) {
     ed.onBeforeRenderUI.add(function(ed, cm) {
         tinymce.EditorManager.i18n['en.advanced.h1'] = 'My desired title';
     });
   }
}); 
```

# android - 打开屏幕并将屏幕锁定设置为无时清空 EditText

> ID：13154253
> 
> 赞同：1
> 
> 时间：2012-10-31T08:53:50.377
> 
> 标签：android

我遇到的问题是，当系统屏幕锁定设置为无时，关闭屏幕然后打开屏幕后，横向/全屏模式下的 EditText 变空。键盘保持活动状态，但似乎没有焦点，屏幕上也没有显示任何文本更新。如果我点击完成按钮或旋转到纵向，则删除全屏编辑器，我可以在正常的 EditText 视图中看到先前输入的文本。

我在模拟器和设备上都在 JB 上重现了这个。EditText 有一个 android:id，我在各种 EditText 和 AutoCompleteTextView 配置中发现了这个问题，但只有当系统屏幕锁定设置设置为无时。当它设置为幻灯片或图案时一切正常，所以我怀疑缺少屏幕锁定是这个问题的根源。

我在日历中发现了同样的问题，但在消息传递中没有。在横向/全屏模式下编辑 SMS 消息然后关闭/打开屏幕时，消息起初看起来是空的，但一秒钟后又返回。我查看了下面的源代码，但我没有看到 onResume() 中似乎解决了这个问题的任何特别之处。

[https://github.com/android/platform_packages_apps_mms/blob/master/src/com/android/mms/ui/ComposeMessageActivity.java](https://github.com/android/platform_packages_apps_mms/blob/master/src/com/android/mms/ui/ComposeMessageActivity.java)

有谁知道如何正确解决此问题，以便当屏幕锁定为无时，您可以在横向/全屏模式下编辑文本，关闭屏幕然后重新打开，文本会在您离开时显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T22:11:26.203

作为一个（希望是）临时修复，我在其中包含了以下行`onResume()`，它似乎可以解决问题。最初我试图只在 IME 时运行它`isFullscreenMode()`，但这会返回 false in `onResume()`（在返回 true in 之后`onPause()`）。我猜这是问题根源的一部分。当系统屏幕锁定为无且屏幕打开时，IME 并不知道它实际上处于全屏模式。

```
View view = getCurrentFocus();

if (view != null) {
    ((InputMethodManager) getSystemService(INPUT_METHOD_SERVICE))
            .restartInput(view);
} 
```

# android - 如何在 Android 应用程序中集成 SPP 配置文件？

> ID：13154254
> 
> 赞同：1
> 
> 时间：2012-10-31T08:53:50.003
> 
> 标签：android, bluetooth, spp

我正在尝试开发一个与正在使用 spp 配置文件的嵌入式设备进行通信的应用程序。我编写的当前应用程序使移动设备可被发现，但是当我在嵌入式设备上选择配对选项时，它告诉配对失败。

那么如何让我的应用程序开始与该设备的连接，即如何将 spp 配置文件集成到我的应用程序中？请帮忙解决这个问题...

# c# - 哪个 xaml 控件用于使用 itextsharp 显示 pdf 文件？

> ID：13154255
> 
> 赞同：2
> 
> 时间：2012-10-31T08:53:57.203
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml, windows-store-apps

我需要按原样显示 pdf，包括所有内容文本和图像。我正在尝试使用 itextsharp 渲染它。但不知道使用哪个控件来显示内容。

如果你有的话，也给我提供任何示例代码。

我在网上尝试了现有的示例代码，但只返回文本。如果您能推荐任何其他免费的 api，我们将不胜感激。我正在为 Windows 商店开发应用程序，所以我需要它与 WIN RT 兼容。

我正在使用 c# 和 xaml 语言。

提前致谢！！！！

# service - SSRS - 在页面顶部分组

> ID：13154256
> 
> 赞同：1
> 
> 时间：2012-10-31T08:53:57.777
> 
> 标签：service, reporting

在 Reporting Services 中，当我们按一列分组时，我们会得到详细信息左侧的组。是否可以像在水晶报表中那样使该组位于顶部？

第 1 页：发票 A - 名称 A（在页面顶部） 详细信息 1 详细信息 2

第 2 页：发票 B - 名称 B（在页面顶部） 详细信息 1 详细信息 2

我只能得到发票 A - 名称 A - 详细信息 1 发票 A - 名称 A - 详细信息 2 发票 B - 名称 B - 详细信息 1 发票 B - 名称 B - 详细信息 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:22:34.127

我已经得到了这个工作，但它是一个痛苦。

*   首先，确保您的表格在每组之后都设置为分页符。
*   单击表中包含您要移动到字段顶部的信息（名称、发票等）的框并获取其名称。
*   无论您想要该数据在何处（即在页眉中），添加一个值为 =First(ReportItems![name].Value) 的文本框。

不幸的是，这将使您的组标题仍然出现在表格中。这不一定是坏事。

如果你想完全取消它：

*   将整个页面粘贴在 List 控件中，并在此元素之后设置分页符。
*   将列表设置为按发票/名称/其他分组
*   对标题执行与第一个选项相同的操作
*   将表格放在列表中，关闭所有分组。我现在不记得你是否必须手动告诉它使用 List 的数据集；首先尝试默认设置，看看它是否有效。

# jquery - 如何在数据来自数据库的文本框中实现自动完成？

> ID：13154260
> 
> 赞同：0
> 
> 时间：2012-10-31T08:54:06.997
> 
> 标签：jquery, asp.net-mvc, json

首先，请不要因为我是一个盲目地完成整个 mvc 项目的菜鸟而开枪，尽管不是一个人开始它。

所以无论如何，我对如何在数据来自数据库表的文本框中实现 jquery ui 自动完成感到完全困惑。

我尝试使用我在互联网上可以找到的东西来做这件事，这是我在我的 jquery 函数中提出的：

```
 $(function (){
        $("#autoCompleteText").autocomplete({
            source: function(request, response) {
                $.ajax({
                    type: "POST",
                    traditional: true,
                    dataType: "json",
                    url: "/Service/jsonAutoComplete",
                    success: function(result) {
                        response($.map(result.d, function (item){
                            return {
                                value: item.ProductName
                            }
                        }))
                    },
                    minLegth: 2
                });
            }
            });
        }); 
```

对于我的控制器中的方法，它的外观如下：

```
public JsonResult jsonAutoComplete(int companyId)
    {
        JsonResult result = new JsonResult();
        Products products = new Products();
        products = db.Products.FirstOrDefault(x => x.CompanyId == companyId);
        int productId = products.Id;
        SelectList select = this._selectFactory.CreateSelectListFromProductsByCompanyId(products.Id, companyId);
        result.Data = new { select = select, productId = productId };
        return result;
    } 
```

我很确定我在这里做错了什么，因为每当我尝试在我的数据库中键入其中一个产品的前 2 个字母时都没有任何反应。

另外， $.map 到底是什么意思？我在网上看到的大多数例子都有这个，所以我认为它是必需的，但我真的不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:00:57.820

您没有发送产品名称。尝试这样的事情：

```
$("#autoCompleteText").autocomplete({
    source: function(request, response) {
        $.ajax({
            // other settings
            data : {
                name: request.term
            }
            // other settings
        });
    }
}); 
```

现在我不太了解您正在使用的服务器端技术，但可能您必须这样做：

```
public JsonResult jsonAutoComplete(string name) {
    // TODO: search for products STARTING with name
    // and return it as a JSON list
} 
```

**// 编辑**

`$.map`是一个 jQuery 函数，它将一个数组转换为另一个数组（基于“转换器”函数）。您在大多数示例中都会看到这一点，因为`autocomplete`插件需要特定格式的数据，而服务器的响应可能会有所不同。例如：

```
var A = [1,2,3,4,5];
var result = $.map( A, function(el) { return 10+el; } );
// result -> [11,12,13,14,15] 
```

# c# - 自定义 NLog 附加程序

> ID：13154263
> 
> 赞同：9
> 
> 时间：2012-10-31T08:54:20.540
> 
> 标签：c#, log4net, nlog, appender

我试图编写用于登录 NLog 的自定义附加程序。我看到了一些 log4net 的例子，应该在哪里编写继承自抽象类 AppenderSkeleton 的附加程序。任何人都可以命名 NLog 中的模拟类吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T09:03:51.613

log4net 的附加程序的 NLog 模拟将成为目标。要创建自己的目标，您必须继承自`NLog.Targets.TargetWithLayout`. 你也应该用属性标记你的目标类`TargetAttribute`：

```
[Target("Foo")]
public class FooTarget : TargetWithLayout
{
    protected override void Write(LogEventInfo logEvent)
    {            
        Console.WriteLine(logEvent.Message);
    }
} 
```

下一步是将您的类定义到 NLog 扩展的程序集添加：

```
<nlog>
  <extensions>
    <add assembly="MyBarAssembly"/>
  </extensions>
  <targets>
     ... 
```

最后一步 - 注册您的目标（NLog 将在扩展中搜索类型 market by `TargetAttribute`）

```
<target name="foo" type="Foo"/> 
```

# jsp - 在jsp中使用会话存储变量

> ID：13154265
> 
> 赞同：0
> 
> 时间：2012-10-31T08:54:30.970
> 
> 标签：jsp, session

我有一个问题，我试图从一个页面存储一个 ID 号，然后抛出另一个页面，但是我尝试了很多方法，所有这些都以 null 结尾，如果有人可以提供帮助，值本身没有存储谢天谢地，这是代码：第一页

```
idData = rs.getString("ID"); 
first= rs.getString("fName"); 

session.setAttribute("theName",  first);// work probably without a problem
session.setAttribute("Id", idData);// doesn't work or doesn't store anything 
```

第二页：是一个检查过程，我没有使用它们

第三页：

```
String Ic = (String)session.getAttribute("Id");
out.print(Ic); 
```

我想使用这个变量来使用这个 ID 在数据库中存储一个项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:22:56.430

您的浏览器不支持 session-cookies，启用 session-cookies 以使用会话。

# r - 如何将行名引入 R 中的函数

> ID：13154266
> 
> 赞同：0
> 
> 时间：2012-10-31T08:54:36.793
> 
> 标签：r, user-defined-functions

嗨，我有一个实用功能，可以将行插入到下面的数据框中。如果我手动写出公式，我会写一些类似的东西

`newframe=rbind(oldframe[1:rownum,],row_to_insert=row_to_insert,oldframe[(rownum+1:nrow(oldframe),]`来命名`row_to_insert`。有人可以告诉我如何在函数中执行此操作吗？

谢谢

```
insertrows=function (x, y, rownum) 
{
    newframe = rbind(y[1:rownum, ], x, y[(rownum + 1):nrow(y), 
        ])
    return(data.frame(newframe))
} 
```

下面添加的一些基础数据的 MWE

```
financials=data.frame(sales=c(100,150,200,250),some.direct.costs=c(25,30,35,40),other.direct.costs=c(15,25,25,35),indirect.costs=c(40,45,45,50))

oldframe=t(financials)
colnames(oldframe)=make.names(seq(2000,2003,1))

total.direct.costs=oldframe['some.direct.costs',]+oldframe['other.direct.costs',]
newframe=total.direct.costs

n=rownum=3
oldframe=insertrows(total.direct.costs=newframe,oldframe,n) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:12:55.717

要回答您的具体问题，如果您更改，您的功能将起作用：

```
return(data.frame(newframe)) 
```

到

```
return(newframe) 
```

然而，一个更相关的问题是你**为什么**要这样做？一种更简单（更好）的方法是仅组合您的数据框：

```
 dd = rbind(x, y) 
```

然后对一些变量进行排序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:58:38.453

试试这个修改后的功能：

```
insertrows <- function (x, oldframe, rownum) 
{
  newframe <- rbind(oldframe, x)
  rownames(newframe) <- c(rownames(oldframe),  deparse(substitute(x)))
  return(newframe[c(seq(n), nrow(oldframe) + 1, seq(n + 1, nrow(oldframe))), ])
} 
```

现在，作为参数传递的对象的名称`x`将用作新行的行名（`deparse(substitute(x))`）。保留旧的行名。此外，行的排序现在更加有效。

运行函数：

```
insertrows(total.direct.costs, oldframe, 3) 
```

输出：

```
 [,1] [,2] [,3] [,4]
sales               100  150  200  250
some.direct.costs    25   30   35   40
other.direct.costs   15   25   25   35
total.direct.costs   40   55   60   75
indirect.costs       40   45   45   50 
```

# java - Android Webview 无法在 ICS 4.0 + 上正确呈现

> ID：13154268
> 
> 赞同：3
> 
> 时间：2012-10-31T08:54:54.050
> 
> 标签：java, android, android-webview, android-4.0-ice-cream-sandwich

我正在使用的 Android 应用程序有问题。

我将本地存储的 HTML 加载到 WebView 中并设置：

```
webSettings.setLoadWithOverviewMode(true);

webSettings.setUseWideViewPort(true);

webSettings.setJavaScriptEnabled(true); 
```

它工作得很好，但不是在 ICS 4.0+ 上。

有什么想法该怎么做？

以下是一些记录错误的屏幕截图：

![正确的布局](../Images/294b6ddecba5cecd999a943469d990b5.png) ![破碎的布局](../Images/a2515d593365315cbd34b2452606ab59.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:09:03.047

试试这个：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

switch (metrics.densityDpi) {
case DisplayMetrics.DENSITY_HIGH:
    webView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);
    break;

case DisplayMetrics.DENSITY_MEDIUM:
    webView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.MEDIUM);
    break;

case DisplayMetrics.DENSITY_LOW:
    webView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.CLOSE);
    break;

default:
    webView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.MEDIUM);
    break;
} 
```

[见原帖](https://stackoverflow.com/a/6898641/1581147)

或者你试过这个吗？

```
WebView webview1 = (WebView) findViewById(R.id.webview1);
webview1.setInitialScale(90);
webview1.loadUrl("http://stackoverflow.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T02:31:22.573

对我来说，这看起来更像是 CSS 代码中的样式问题。尝试使用宽度大小。

您可能需要加载不同的 css 以便在移动设备上查看它。

# c# - 在 c# windows 应用程序中为图像设置动画的最简单方法

> ID：13154269
> 
> 赞同：1
> 
> 时间：2012-10-31T08:54:54.177
> 
> 标签：c#, image, animation, slideshow, windows-applications

我有一个 Windows 应用程序，可以在发布到 Web 服务器之前预览图像列表，而无需使用 WPF 当用户按下下一个或上一个时，我需要在图片之间设置动画（滑动或淡入淡出或翻转）

谢谢哈姆扎

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:07:06.853

`ImageAnimator`您可以使用类为图像设置动画

**例子：**

```
using System;
using System.Drawing;

using System.Windows.Forms;

public class animateImage : Form 
{

    //Create a Bitmpap Object.
    Bitmap animatedImage = new Bitmap("SampleAnimation.gif");
    bool currentlyAnimating = false;

    //This method begins the animation.
    public void AnimateImage() 
    {
        if (!currentlyAnimating) 
        {

            //Begin the animation only once.
            ImageAnimator.Animate(animatedImage, new EventHandler(this.OnFrameChanged));
            currentlyAnimating = true;
        }
    }

    private void OnFrameChanged(object o, EventArgs e) 
    {

        //Force a call to the Paint event handler.
        this.Invalidate();
    }

    protected override void OnPaint(PaintEventArgs e) 
    {

        //Begin the animation.
        AnimateImage();

        //Get the next frame ready for rendering.
        ImageAnimator.UpdateFrames();

        //Draw the next frame in the animation.
        e.Graphics.DrawImage(this.animatedImage, new Point(0, 0));
    } 
```

# javascript - 如果比较整数和浮点数的条件不起作用

> ID：13154270
> 
> 赞同：4
> 
> 时间：2012-10-31T08:55:01.600
> 
> 标签：javascript, integer

我在 javascript 中使用一个 If 条件，

```
var iid = "c_poqty_"+itemid;
var calculatedQuantity = document.getElementById(iid).value;

if(! isNaN(actualQuantity)) {
    if(actualQuantity >= calculatedQuantity) {
        return true;
    } else {
        alert("You must enter the order qty same or greater than the calculated PO Qty");
        document.getElementById(iid).focus();
        return false;
    }
} else {
    alert("Please Enter valid number");
    document.getElementById(iid).focus();
    return false;
} 
```

在这里，`calculatedQuantity`总是浮点数，虽然`actualQuantity`可以是整数，但我有一个测试用例：

```
calculatedQuantity = 1.0
actualQuantity = 1 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:56:47.350

实际上，我怀疑它们都是*strings*。当然`calculatedQty`是，因为您从`value`输入字段中检索到它，并且该`value`属性的值始终是一个字符串。使用`parseInt`和/或`parseFloat`你正在比较数字而不是字符串。

考虑：

```
console.log("1.0" > "1"); // "true"
console.log(1.0 > 1);     // "false" 
```

# java - IBM RAD 7.5 安装失败，无法创建 jvm

> ID：13154271
> 
> 赞同：0
> 
> 时间：2012-10-31T08:55:03.430
> 
> 标签：java, ibm-rad

我正在尝试安装 IBM RAD，安装时出现此错误 - 无法创建 jvm 为什么 JVM 会终止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:05:14.933

似乎环境变量（**_JAVA_OPTIONS**）设置不正确。

你也没有指定你使用的是哪个版本的java？您必须在 Rational Application Developer v7.0 或更高版本的上下文中使用 Java 5.0+。

请参阅此[链接](http://www-01.ibm.com/support/docview.wss?uid=swg21327744)，这[也](http://www-01.ibm.com/support/docview.wss?uid=swg21410196)

# jquery - 选择框的 Onchange 事件

> ID：13154274
> 
> 赞同：1
> 
> 时间：2012-10-31T08:55:11.600
> 
> 标签：jquery, html

我正在使用`onchange event of select box`带有 jquery 的。我`display property = none`在其他 div 中给出的更改。问题是当我从数据库中获取数据并将其设置在选择框中时，因此`onchange`属性不适用于给定值。为什么？我的代码

```
<select id="patientType" name="Patient_Type">
<option value="">--SELECT--</option>
<option value="OPD">OPD</option>
<option value="IPD">IPD</option>
</select>
<div id="roomInfo" clasas="inactive"></div> 
```

脚本

```
$('#patientType').change(function() {
 if ($('#patientType').val() == 'IPD') {
  if ($('#roomInfo').hasClass('inactive')) {
   $('#roomInfo').removeClass('inactive');// CSS Property Display None in this class
   $('#roomInfo').addClass('active');
  }
 } else {
  if ($('#roomInfo').hasClass('active')) {
     $('#roomInfo').removeClass('active');
     $('#roomInfo').addClass('inactive');
    }
 }
}); 
```

现在我从数据库中获取数据并将其设置为 select patientType $('#patientType').val(data fetch From the database); 不能应用 onchange 事件应用并且不显示我的 roomInfo div 所以有可能或没有。或获得该方法的另一种方法。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T09:06:30.437

由于您手动更改了值。您需要触发选择框的 .change() 事件。请参考以下链接。

[http://api.jquery.com/change/](http://api.jquery.com/change/)

要不然

如果您通过 ajax 加载数据，请使用如下

```
$('#patientType').on("change",function() {
   //Your code here
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T10:07:40.697

在 jQuery 中设置更改事件：

```
$("#ddl").change(function(){
    alert($(this).val());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T07:17:51.867

获取选择框的值并设置如下：

```
$("#patientType option[value='`OPD']").attr("selected","selected"); 
```

# c++ - 如何将 unsigned int 作为控制台参数？

> ID：13154275
> 
> 赞同：0
> 
> 时间：2012-10-31T08:55:16.517
> 
> 标签：c++

我试图通过控制台参数将一个无符号整数值传递给我的程序。

我还尝试过什么：
首先：检查 argc 是否为 2，否则出错

如果有第二个值，我尝试将此值转换为：

```
strtoul(argv[1], NULL, 0) 
```

所以当我通过“100”时，我得到“1”
我做错了什么？

br
萨吉

€：向我的函数传递了一个错误的参数，找到了错误，谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:01:04.760

如果没有看到实际代码，这有点难以判断，但您可以将其用作基线：

```
#include <stdio.h>
#include <stdlib.h>

int main (int argc, char *argv[]) {
    char *pCh;
    unsigned long unlong = 42;

    // Check enough arguments.

    if (argc != 2) {
        puts ("Not enough arguments");
        return 1;
    }

    // Convert to ulong WITH CHECKING!

    unlong = strtoul (argv[1], &pCh, 10);

    // Ensure argument was okay.

    if ((pCh == argv[1]) || (*pCh != '\0')) {
        puts ("Invalid number");
        return 1;
    }

    // Output converted argument and exit.

    printf ("Argument was %ld\n", unlong);
    return 0;
} 
```

成绩单如下：

```
pax> ./testprog 314159
Argument was 314159 
```

如果这还不足以提供帮助，我建议您发布最短的完整程序来显示问题，然后我们可以非常详细地告诉您它有什么问题:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:03:29.670

你的方法应该有效。或者，您可以使用字符串流：

```
std::string str(argv[1]);

unsigned long ul;

std::stringstream(str)>>ul; 
```

# jquery - 在 jQuery Mobile 中，为什么这个弹出窗口没有关闭？

> ID：13154278
> 
> 赞同：1
> 
> 时间：2012-10-31T08:55:23.360
> 
> 标签：jquery, jquery-mobile

我根据[http://jquerymobile.com/test/docs/pages/popup/index.html](http://jquerymobile.com/test/docs/pages/popup/index.html)调用 close ，但什么也没发生（显然我希望它在这种情况下根本不会显示）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html> 
<head> 
    <title>popup</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset= ISO-8859-5">
    <script>
    $(document).ready(function () {
        $("#popupBasic").popup();
        $("#popupBasic").popup("open");
        $("#popupBasic").popup("close");
    });
    </script>
</head> 
<body> 

<div data-role="page">
    <div data-role="popup" id="popupBasic">
        <p>This is a completely basic popup, no options set.</p>
    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:14:23.273

将您的脚本放入正文中，它可以工作，我还添加了一个标题

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
    <title>popup</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset= ISO-8859-5">
</head>
<body>

  <div data-role="page" id="myPage">
    <div data-role="content">
      <h1>Popup</h1>
      <div data-role="popup" id="popupBasic">
        <p>This is a completely basic popup, no options set.</p>
      </div>
    </div>

    <script>
      $(document).bind('pageinit', function() {
        setTimeout(function(){
          $("#popupBasic").popup();
          $("#popupBasic").popup("open");
          $("#popupBasic").popup("close");
        }, 100);
      });
    </script>
  </div>

</body>
</html> 
```

编辑：使用`$(document).bind('pageinit')`而不是[这里](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)`$(document).ready()`描述的，现在添加了 100 毫秒的短暂延迟。现在可以在 Firefox Nightly 和 Chrome 中使用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T14:28:14.567

我曾经也有过一样的问题。我的代码中有一个带有警报的导航事件，并且警报指示在 chrome 中弹出后调用导航事件，并且由于 jQM 没有将弹出页面写入历史记录，因此您将返回 chrome 的第一个欢迎页面。

我还没有解决这个问题，所以我使用了这个插件：

Dmitry Semenov 的 Magnific Popup v0.9.4

在我的 jQM“pageshow”事件中直接通过 API 打开弹出窗口。这是页面： http: [//kancelaria.danekilian2.pl/](http://kancelaria.danekilian2.pl/)

# c# - 如何在 GridView 行悬停上显示工具提示

> ID：13154280
> 
> 赞同：7
> 
> 时间：2012-10-31T08:55:33.363
> 
> 标签：c#, asp.net, gridview, hover, tooltip

当鼠标放在 GridView Row (onmouseover) 上时，我需要显示工具提示我需要动态设置工具提示内容`GridView_RowData`

我怎样才能做到这一点？？

我可以这样做`e.Row.Attributes.Add(...`吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T09:20:17.640

试试这样...

```
protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        //use this way
        e.Row.ToolTip = "My FooBar tooltip";
         //or use this way
        e.Row.Attributes.Add("title", "My FooBar tooltip");
    }
 } 
```

这将显示整行的工具提示。如果您需要在特定控件上显示，然后找到该控件并设置为`Tooltip`您自己标题的属性...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-26T09:34:20.133

可以这样完成。这是工作副本。

您需要做的是，您必须在事件中找到控件（要为其显示`tooltip on hover of mouse`）`Gridview` `OnRowDataBound`并将`tooltip`文本分配给控件。

```
protected void GridDepartment_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Label LabelCoachName = e.Row.FindControl("LabelCoachName") as Label;
        LabelCoachName.ToolTip = LabelCoachName.Text;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-03T06:29:56.527

试试这个

```
 If e.Row.RowType = DataControlRowType.DataRow Then
        'your dynamic data fill to e.row.tooltip
        e.Row.ToolTip = e.Row.Cells(1).Text & "-" & e.Row.Cells(3).Text
    End If 
```

# html - 如何防止保存的凭据自动填充用户创建表单？

> ID：13154284
> 
> 赞同：1
> 
> 时间：2012-10-31T08:55:44.253
> 
> 标签：html, browser, django-admin

它发生在 Django Admin 中，但我认为这是浏览器的行为（尽管它至少发生在 Chrome 和 Firefox 中）：

当用户在浏览器中保存他的凭据时，它会自动填充登录表单。还行吧。但它也会自动填充用户创建表单，填写用户名和密码字段。正如在 Django Admin 中发生的那样，我想我可以更改模板字段名称，但是我必须更改用户创建工作流程，这不是我想要的。

它也发生在更改密码表单中，填写旧密码字段。这种情况是一个安全漏洞，因为如果第一个用户离开打开他的会话，用户可以更改其他用户的密码。

除了更改字段名称之外，是否有任何选项可以向浏览器说我不想填写表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:58:55.463

您必须编辑每个表单元素，但这是您的操作方法

```
<input name="q" type="text" autocomplete="off"/> 
```

# android - 在 Google Play 商店中发布应用

> ID：13154290
> 
> 赞同：0
> 
> 时间：2012-10-31T08:56:19.447
> 
> 标签：android, google-play

我尝试在 Google Play 中更新客户应用程序，这是我第一次这样做。

我创建了一个证书，它似乎很好。该应用程序与 appcelerator 钛一起打包。

当我在商店上传应用程序时，我收到以下消息：

更新的 APK-Package (gdp.app) 的名称必须与我要替换的包 (de.gdp) 相同

我上传的文件名是：GdP.apk

我必须改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:03:32.503

“我不会替换 (de.gdp)”

好吧，你不能重命名你的包。如果您更改软件包名称，商店会将其识别为不同的应用程序。所以你不能用不同的包名更新它。将你的包重命名为 gdp.app 将解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:01:41.090

您更改了包名称。您必须使用与原始 .apk 相同的包名称。将你的包名改回 de.gdp 。

更多信息：http: [//developer.android.com/guide/topics/manifest/manifest-element.html](http://developer.android.com/guide/topics/manifest/manifest-element.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:02:16.990

如果软件包名称和签名证书与现有版本不匹配，Market 将认为它是一个新应用程序，并按原样发布，并且不会将其作为更新提供给现有用户。因此，您必须保持与先前构建相同的包名称。

看到这个链接： http: [//lokeshatandroid.blogspot.in/2012/07/upload-apk-into-android-market.html](http://lokeshatandroid.blogspot.in/2012/07/upload-apk-into-android-market.html)

# c++ - CPP、WinAPI - WM_CREATE 从 lParam 获取 CREATESTRUCT* 的正确方法

> ID：13154292
> 
> 赞同：1
> 
> 时间：2012-10-31T08:56:30.167
> 
> 标签：c++, winapi, pointers, casting, struct

Win32 API 的某个教程使用这一行将`lParam`参数从`WM_CREATE`主窗口过程中的消息转换为`CREATESTRUCT*`：

```
reinterpret_cast<CREATESTRUCT*>(lParam)  // Method 1 
```

我在其他地方读过`reinterpret_cast`很危险的文章，会导致未定义的行为、闪电等等。

* * *

我使用了编译器不会抱怨的更传统的演员表：

```
(CREATESTRUCT*) lParam // Method 2 
```

本教程的作者这样做有什么原因吗？

而且，我确定有比我更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:00:37.520

在这种特殊情况下，这两种结构是等价的。没有未定义的行为——C++ 标准保证将指针重新解释转换为足够宽的整数并返回会产生相同的指针。

您可以放心地假设 Windows`lParam`从原始指针创建值，就好像通过`reinterpret_cast`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:50:32.640

**“(CREATESTRUCT*) lParam”**形式称为 c 样式转换。当使用它时，编译器将尝试所有可能的方法将表达式（lParam - 这里）转换为类型（CREATESTRUCT* - 这里）。

让我解释所有可能的铸造方式，

1.  从“const/volatile T”转换为 T - 在 C++ 中，程序员使用**const_cast选择这种方式**
2.  从“T”转换为“R”，其中 T 和 R 相关。**例如，像 int/char、Car/Vehicle 等 - 在 C++ 中，程序员使用static_cast**选择这种转换方式。
3.  从“T”转换为“R”，其中 T 和 R 相关，以及运行时检查。例如 T = Vehicle 和 R = Car，从 T 类型对象到 R 类型对象的转换是静态有效的，但实际上（在运行时）编译器（通过隐藏代码）必须检查被类型转换的对象是否确实是 Car 或Car的衍生产品。**- 在 C++ 中，程序员使用dynamic_cast**选择这种转换方式。
4.  从“U”转换为“V”，其中 U 和 V 不相关。**- 在 C++ 中，程序员使用reinterpret_cast**选择这种转换方式。

如果程序员在 C++ 中使用 c 样式转换，他是在告诉编译器尝试所有可能的方法来将表达式转换/感知为/作为特定类型。

c-style cast 危险的唯一原因是程序员的真正意图没有正确地传达给编译器和阅读代码的其他程序员。有时程序员可能只意味着 static_cast 而不是 reinterpret_cast 但使用 c 风格的强制转换会在运行时导致错误，这可能在编译时被捕获。因为如果程序员在不相关的类型上使用 static_cast 会发生编译器错误。

并且用户定义的强制转换运算符对某些行为的影响更大（尤其是 static_cast），但不会改变基本原理。

# maps - 在传单地图中添加额外的缩放级别

> ID：13154295
> 
> 赞同：6
> 
> 时间：2012-10-31T08:56:35.423
> 
> 标签：maps, zooming, leaflet

我使用[传单](http://leafletjs.com/)创建带有我自己的瓷砖的照片地图，它按预期工作。

我试图弄清楚如何防止缩放遵循这种[四叉树](http://en.wikipedia.org/wiki/Quadtree)类型模式：

*   缩放级别 0 - 整个地图宽度 = 256px；
*   缩放级别 1 - 整个地图宽度 = 512px；
*   缩放级别 2 - 整个地图宽度 = 1024 像素；
*   等等...

我希望能够放大 25% 或 100px 的增量。

100px 增量的示例：

*   缩放级别 0 - 整个地图宽度 = 200px；
*   缩放级别 1 - 整个地图宽度 = 300px；
*   缩放级别 2 - 整个地图宽度 = 400 像素；
*   等等...

* * *

*问题：* **这样做的逻辑是什么？如果有可能？**

* * *

我想要这样做的原因是为了让我的照片贴图（它不像法线贴图那样包裹）可以更快地[响应](http://en.wikipedia.org/wiki/Responsive_web_design)并很好地适应用户的屏幕尺寸。

我演示了我的问题，可以在[这里看到](https://dl.dropbox.com/u/14037764/Development/stackoverflow/leaflet/zoomLevels/zoomLevels.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T18:11:52.257

简短的回答是，您只能显示具有预渲染图块的缩放级别。Leaflet 不会为您创建中间缩放级别。

长答案是，为了使用它，您需要定义自己的 CRS 比例方法并将其传递给您的地图，例如：

```
L.CRS.CustomZoom = L.extend({}, L.CRS.Simple, {
    scale: function (zoom) {
        // This method should return the tile grid size
        // (which is always square) for a specific zoom
        // We want 0 = 200px = 2 tiles @ 100x100px,
        // 1 = 300px = 3 tiles @ 100x100px, etc.
        // Ie.: (200 + zoom*100)/100 => 2 + zoom

        return 2 + zoom;
    }
});

var map = L.map('map', { crs: L.CRS.CustomZoom }).setView([0, 0], 0); 
```

在这个例子中，我已经扩展`L.CRS.Simple`了 ，但您当然可以从您想要的 API 中扩展任何 CRS，甚至可以从头开始创建您自己的 CRS。

使用导致地图像素大小不是瓦片大小倍数的缩放因子，意味着您的右/下边缘瓦片将仅部分填充地图数据。这可以通过使此类图块的非地图部分 100% 透明（或与背景颜色相同）来解决。

但是，在我看来，将切片大小设置为匹配最小公分母（在本例中为 100 像素）是一个更好的主意。`tileSize`请记住通过使用切片图层中的选项来反映这一点。当然，您需要将图像重新渲染为 100x100 像素的图块，而不是当前使用的 256x256 图块。

需要注意的是，当前版本的 LeafletJS (0.5) 有一个错误，该错误会阻止自定义 scale() 方法工作，因为 TileLayer 类被硬编码为使用 2 次方缩放缩放。但是，您需要做的更改很小，希望这将在以后的 Leaflet 版本中得到解决。只需更改`TileLayer._getWrapTileNum()`：

```
_getWrapTileNum: function () {
    // TODO refactor, limit is not valid for non-standard projections
    return Math.pow(2, this._getZoomForUrl());
}, 
```

至：

```
_getWrapTileNum: function () {
    return this._map.options.crs.scale(this._getZoomForUrl());
}, 
```

# c# - 将 BigInteger 转换为十进制（Base 10）字符串的最快方法？

> ID：13154304
> 
> 赞同：3
> 
> 时间：2012-10-31T08:57:00.767
> 
> 标签：c#, tostring, biginteger

# 到目前为止的答案

所以这里是代码分解。

```
//Time: ~7s (linear loop algorithm)
//100,000! (456,574 decimal digits)
BigInteger bigIntVar = computeFactorial(100000);

//The first three here are just for comparison and are not actually Base 10.
bigIntVar.ToBase64String() //Time: 00.001s | Base 64 | Tetrasexagesimal
bigIntVar.ToString("x")    //Time: 00.016s | Base 16 | Hexadecimal
bigIntVar.ToBinaryString() //Time: 00.026s | Base 02 | Binary
bigIntVar.ToQuickString()  //Time: 11.200s | Base 10 | String Version
bigIntVar.ToQuickString()  //Time: 12.500s | Base 10 | StringBuilder Version
bigIntVar.ToString()       //Time: 13.300s | Base 10 | Original 
```

* * *

# 原始问题

我在这方面花了很多时间，所以我需要你的帮助。

这是用于计算巨大阶乘的个人项目（例如 100,000！）

这是我的代码：

```
using (var stream = new StreamWriter(fileName + ".txt", false))
{
    stream.WriteLine(header);

    var timer = new Stopwatch();    
    timer.Restart();
    //This is the huge BigInteger holding the answer to 100,000!
    stream.WriteLine(saveFactorial.Output.ToString());         
    //Let me be clear: ToString() is directly causing the the 13sec time delay.
    //Not the stream.
    timer.Stop();                   
}

time = (timer.ElapsedMilliseconds / 1000.0).ToString() + "s"; 

MessageBox.Show(time); 
```

100,000！在我的机器上计算大约需要 7 秒（线性循环算法）。

然而，使用此标准 IO 代码需要 13 秒才能保存。

所以换句话说，保存工作比适度计算它需要更长的时间。

所以我想也许我可以使用：

```
BigInteger.ToByteArray(); 
```

尽管它运行得非常快，~~但我不知道如何将其保存为可读文本。~~

您可以使用上述方法将二进制字符串写入具有此自制扩展名的文本文件：

# ToBinaryString

```
//Usage: string bigIntBinary = bigIntVar.ToBinaryString();
public static string ToBinaryString(this BigInteger source)
{
    //If you lookup the ToByteArray() method...
    //It actually stores the bytes in reverse order.
    var bigIntBytes = source.ToByteArray().Reverse();

    StringBuilder bigIntBinary = new StringBuilder();

    foreach (var bigIntByte in bigIntBytes)
    {
       bigIntBinary.Append(Convert.ToString(bigIntByte, 2).PadLeft(8, '0'));
    }

    return bigIntBinary.ToString();
} 
```

# ToBase64String

```
 ////Usage: string bigIntBase64 = bigIntVar.ToBase64String();
    public static string ToBase64String(this BigInteger source)
    {
        var bigIntBytes = source.ToByteArray().Reverse().ToArray();

        return Convert.ToBase64String(bigIntBytes);
    } 
```

我还尝试了数学方法（mod 10 等...）来获取每个数字，但这需要比 ToString() 多 TON 的时间。

我在这里做错了什么？

* * *

这段代码是我根据下面的答案提出的。这比 ToString() 快，但只快了几秒钟。

# ToQuickString

```
//Usage: string bigIntString = bigIntVar.ToQuickString()
public static String ToQuickString(this BigInteger source)
{
    powersOfTen = new List<BigInteger>();

    powersOfTen.Add(1);

    for (BigInteger i = 10; i < source; i *= i)
    {
        powersOfTen.Add(i);
    }

    return BuildString(source, powersOfTen.Count - 1).ToString().TrimStart('0');
}

private static List<BigInteger> powersOfTen;

private static string BuildString(BigInteger n, int m)
{
    if (m == 0)
        return n.ToString();

    BigInteger remainder;
    BigInteger quotient = BigInteger.DivRem(n, powersOfTen[m], out remainder);

    return BuildString(quotient, m - 1) + BuildString(remainder, m - 1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:26:38.143

首先，我会计算所有`10^(2^m)`小于`n`. 然后我会使用`DivRem`其中最大的一个来将问题分成两个子问题。以递归方式重复该操作，直到您减少到单个数字。

```
var powersOfTen=new List<BigInteger>();
powersOfTen.Add(1);
for(BigInteger i=10;i<n;i=i*i)
  powersOfTen.Add(i);

string ToString(BigInteger n, int m)
{
  if(m==0)
    return n.ToString();
  quotient = DivRem(n,powersOfTen[m], remainder)
  return ToString(quotient, m-1)+ToString(remainder, m-1)
} 
```

您还可以通过直接写入字符数组来完全优化字符串连接。

* * *

或者，您可以考虑在所有计算过程中使用基数 1000'000'000。这样，您最终根本不需要基本转换。对于阶乘计算，这可能要快得多。

```
List<int> multiply(List<int> f1, int f2)
{
  int carry=0;
  for(int i=0;i<f1.Count;i++)
  {
    var product=(Int64)f1[i]*(Int64)f2;
    carry=product/1000000000;
    result.Add(product%1000000000);
  }
  if(carry!=0)
    result.Add(carry);
} 
```

现在转换为以 10 为底的字符串既简单又便宜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:26:32.440

以二进制或十六进制格式保存 BigInteger 数据。它对计算机和足够敬业的人来说是可读的。;>

花费额外的精力使输出“人类可读”是浪费时间。没有人能够理解 450,000 个数字，无论它们是以 10 为底、以 16 为底、以 2 为底还是其他任何数字。

## 更新

更仔细地研究 Base 10 转换，可以在多核系统上使用多线程将 ToString 的基线性能降低几乎一半。主要障碍是整个十进制化过程中最大的时间消耗是对原始 450k 数字的第一次除法运算。

> ```
> Stats on my quad core P7: 
> Generating a 500k digit random number using power and multiply: 5 seconds
> Dividing that big number by anything just once: 11 seconds
> ToString(): 22 seconds
> ToQuickString: 18 seconds
> ToStringMT: 12.9 seconds 
> ```

.

```
public static class BigIntExtensions
{
    private static List<BigInteger> powersOfTen;

    // Must be called before ToStringMt()
    public static void InitPowersOfTen(BigInteger n)
    {
        powersOfTen = new List<BigInteger>();

        powersOfTen.Add(1);

        for (BigInteger i = 10; i < n; i *= i)
            powersOfTen.Add(i);
    }

    public static string ToStringMT(this BigInteger n)
    {
        // compute the index into the powersOfTen table for the given parameter. This is very fast.
        var m = (int)Math.Ceiling(Math.Log(BigInteger.Log10(n), 2));

        BigInteger r1;
        // the largest amount of execution time happens right here:
        BigInteger q1 = BigInteger.DivRem(n, BigIntExtensions.powersOfTen[m], out r1);

        // split the remaining work across 4 threads - 3 new threads plus the current thread
        var t1 = Task.Factory.StartNew<string>(() =>
        {
            BigInteger r1r2;
            BigInteger r1q2 = BigInteger.DivRem(r1, BigIntExtensions.powersOfTen[m - 1], out r1r2);
            var t2 = Task.Factory.StartNew<string>(() => BuildString(r1r2, m - 2));
            return BuildString(r1q2, m - 2) + t2.Result;
        });
        BigInteger q1r2;
        BigInteger q1q2 = BigInteger.DivRem(q1, BigIntExtensions.powersOfTen[m - 1], out q1r2);
        var t3 = Task.Factory.StartNew<string>(() => BuildString(q1r2, m - 2));
        var sb = new StringBuilder();
        sb.Append(BuildString(q1q2, m - 2));
        sb.Append(t3.Result);
        sb.Append(t1.Result);
        return sb.ToString();
    }

    // same as ToQuickString, but bails out before m == 0 to reduce call overhead.
    // BigInteger.ToString() is faster than DivRem for smallish numbers.
    private static string BuildString(BigInteger n, int m)
    {
        if (m <= 8)
            return n.ToString();

        BigInteger remainder;
        BigInteger quotient = BigInteger.DivRem(n, powersOfTen[m], out remainder);
        return BuildString(quotient, m - 1) + BuildString(remainder, m - 1);
    }
} 
```

对于 ToQuickString() 和 ToStringMT()，需要在使用这些函数之前初始化 10 次方数组。初始化此数组不应包含在函数执行时间测量中，因为该数组可以在后续调用中重复使用，因此它的初始化成本在程序的生命周期内摊销，而不是单个函数调用。

对于生产系统，我会设置更自动的初始化，例如在类静态构造函数中初始化合理数量的条目，然后检查 ToQuickString() 或 ToStringMT() 以查看表中是否有足够的条目来处理给定大整数。如果没有，请向表中添加足够的条目来处理当前的 BigInteger，然后继续操作。

This ToStringMT function constructs the worker tasks manually to spread the remaining work out across 4 threads on the available execution cores in a multi core CPU. You could instead just make the original ToQuickString() function spin off half of its work into another thread on each recursion, but this quickly creates too many tasks and gets bogged down in task scheduling overhead. The recursion drills all the way down to individual decimal digits. I modified the BuildString() function to bail out earlier (m <= 8 instead of m == 0) because BigInteger.ToString() is faster than DivRem for smallish numbers.

90% of ToStringMt()'s execution time is taken up by the first DivRem call. It converges very quickly after that, but the first one is really painful.

# android - Android.how 计算字符串的宽度？

> ID：13154315
> 
> 赞同：0
> 
> 时间：2012-10-31T08:57:56.437
> 
> 标签：android

我的代码是

```
 Paint paint= new Paint();
 paint.setTextSize(size); 
 int iRet = 0; 
 if (str != null && str.length() > 0) {
     int len = str.length(); 
     float[] widths = new float[len]; 
     paint.getTextWidths(str, widths); 
     for (int j = 0; j < len; j++) {
     iRet += (int) Math.ceil(widths[j]); 
    } 
}
 return iRet; 
```

我想获取字符串的宽度，但返回结果与 TextView 有错误。

不知道正确的方法。

谢谢。

我在虚拟机中显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:10:00.003

要计算文本宽度，您应该使用：

[`public float measureText (String text)`](http://developer.android.com/reference/android/graphics/Paint.html#measureText%28java.lang.String%29)

类 Paint 中的方法，它将返回绘制中文本的测量宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T06:29:05.563

您可以尝试使用画布，有一次我发现 Textview 无法以正确的大小显示我的文本，所以我使用 Canvas 将文本绘制出来，我得到了我想要的宽度，这可能是 dp,sp 的一些错误原因或像素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:09:47.897

您可以使用：

```
int width = paint.measureText("this text"); 
```

measureText(String text) 将返回文本的宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T09:26:40.987

你可以通过调用paint类的measureText()来测量它，这里是代码——

```
Paint p=new paint();

int value = p.measureText("give input string to measure"); 
```

# c++ - 在我的 C++ 程序中使用 OpenStreetMap

> ID：13154324
> 
> 赞同：2
> 
> 时间：2012-10-31T08:58:35.200
> 
> 标签：c++, windows, gps, openstreetmap

我有一个 gpx 文件。我需要一个开源库，我可以给它 gpx 文件，它会在地图上显示路线。有谁知道这样的事情？

我在 windows xp 上用 c++ 编写。

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:04:18.507

有很多框架可以将 OSM API 映射到不同的语言。

请查看 OSM 的这个 wiki 页面：[http ://wiki.openstreetmap.org/wiki/Develop/Frameworks](http://wiki.openstreetmap.org/wiki/Develop/Frameworks)

我认为您可以在[Widgets](http://wiki.openstreetmap.org/wiki/Develop/Frameworks#Widgets)下找到您搜索的内容，例如“COSMCtrl 1.1.3”

# jquery - 将图像 src 绑定为 Knockout 中的表达式

> ID：13154329
> 
> 赞同：2
> 
> 时间：2012-10-31T08:58:56.197
> 
> 标签：jquery, .net, asp.net-mvc, knockout.js

如果你觉得这个问题很愚蠢，请多多包涵。我是淘汰赛的初学者并试图学习它。

我想将图像源绑定到表达式。该表达式负责生成路径，并且该路径必须作为源应用到 img。

```
<ul id='AllPatient' data-role='listview' data-inset='true' data-bind="foreach:Patients">
            @*<li><span data-bind="text: ko.toJSON($data)"></span></li>*@
            <li>
                <table class="Tabular">
                    <tr>
                        <td class="DataCell">
                            <a href="javascript:" id="pLocation" sortorder="none"><span data-bind="text:$data.UnitName">
                            </span></a>
                        </td>
                        <td class="DataCellImage">
                            <a href="javascript:" id="addPatient" sortorder="none" data-bind="click:$root.addPatient">
                                <img data-bind="attr:{src: $root.ImageSource}" src="~/Content/Images/MPL/PersonAdd.png" /></a>
                        </td>
                    </tr>
                </table>
            </li>
        </ul> 
```

我正在使用以下数据绑定 ViewModel：

```
function PatientsModel(data)
{
    var self = this;

    self.Patients = ko.observableArray([]);

    self.Patients(data.Patients);
    self.ImageSource = function (model)
    {
        if (model.myPatient == true)
        {
            return PyxisLinkJS.RootURL + '/Content/Images/MPL/MyPatientGray.png';
        }
        else if (model.localPatient == true)
        {
            return PyxisLinkJS.RootURL + '/Content/Images/MPL/PersonAdd.png';
        }
        else
        {
            return PyxisLinkJS.RootURL + '/Content/Images/MPL/MyPatientGray.png';
        }
    }
} 
```

这就是发生的事情：它试图将 ImageSource 的函数体设置为 Image 的 src。我想触发ImageSource方法并将返回值设置为Image的Src。

问候， 苏梅特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T09:01:01.370

它返回函数而不是字符串，将其称为函数

```
<img data-bind="attr:{src: $root.ImageSource() }" src="~/Content/Images/MPL/PersonAdd.png" /> 
```

此外，您可以将这两者结合起来：

```
self.Patients = ko.observableArray([]);
self.Patients(data.Patients);

// Into this
self.Patients = ko.observableArray( data.Patients ); 
```

# android - Android / Libgdx：检测多任务按钮

> ID：13154331
> 
> 赞同：4
> 
> 时间：2012-10-31T08:59:07.743
> 
> 标签：android, libgdx

我正在使用Libgdx为Android开发游戏，我注意到当我按下多任务按钮时，当我浏览以前的应用程序列表时，游戏仍在后台运行（我可以看到游戏一直在后台运行）。显然，我想暂停比赛。

我正在使用 Screen 类，并且仅在有效更改应用程序时才调用 pause() 方法。我还没有设法将按下按钮事件检测为解决方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:33:01.137

在这种情况下是否`pause()`会被调用，取决于设备/操作系统。

您要监听的关键键是[KEYCODE_APP_SWITCH](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_APP_SWITCH)。如果这没有通过`InputAdapter`（我不知道相关的`Keys`值，如果它甚至存在），那么您需要查看 gdx 并查看为什么它没有通过。

# perl - 使用 perl 脚本执行命令

> ID：13154336
> 
> 赞同：0
> 
> 时间：2012-10-31T08:59:37.590
> 
> 标签：perl, unix, command-line

我在unix中有简单的命令，比如

```
cat myfile.txt >&mytemp.txt& 
```

上述命令将简单地创建文件 myfile.txt 的副本。当我在命令行上执行命令时，它会返回如下进程 ID：

```
> cat myfile.txt > & mytemp.txt &
[1] 769
> 
```

我在 perl 脚本中形成相同的命令并使用系统调用它，如下所示：

```
my $cmd="cat myfile.txt>&mytemp.txt&";
my $info = system("$cmd"); 
```

但 sytem 命令失败并显示以下错误消息：

```
sh: mytemp.txt: bad number 
```

我什至尝试转义`>`and `&`。但是错误消息没有变化。我可以知道这是什么原因吗？我在哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:03:33.123

我很确定您不能`&`在此使用尾随。如果您希望程序在命令运行时继续，然后`fork`让子进程运行调用，然后退出。可能`exec`可以做到这一点，虽然我之前没有尝试过使用输出重定向来做到这一点......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:21:35.863

就像消息说的那样，这不是一个有效的`sh`命令。也许是`csh`命令？

```
system('csh', '-c', $cmd); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T09:44:03.777

尝试这个：

```
perl -e "`cat myfile.txt>&mytemp.txt&`;" 
```

它正在执行命令并返回命令输出。所以可以这样做：

```
#!/usr/bin/perl
my $content = `cat /etc/passwd`;
print $content; 
```

如果将代码放入 perl 脚本中：

**猫测试.pl**

```
#!/usr/bin/perl

use strict;
use warnings;

my $res = `cat myfile.txt>&mytemp.txt&`; 
```

# html - 选框 html 在 chrome 中启动错误

> ID：13154338
> 
> 赞同：0
> 
> 时间：2012-10-31T08:59:49.423
> 
> 标签：html, marquee

```
 <marquee behavior="scroll" scrollamount="2" direction="right" width="70%" style="background-color: transparent; height: 18px;" onmouseover="this.stop();" onmouseout="this.start();">
            1 2 3 4 5 6 7 //inside html
        </marquee> 
```

我得到的错误出现在 chrome 中 - 内部 html 的行为与 chrome 和 IE 不同。它从显示的 html 开始并逐渐消失，而在 chrom 和 IE 中，它开始为空并慢慢出现（它们消失了）。

我想要 chrome 和 IE 中的行为。

我无法在 jsfiddle 中复制此错误，但无论如何都是这样。

[http://jsfiddle.net/opmaster/Sm4CH/1/](http://jsfiddle.net/opmaster/Sm4CH/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:32:07.647

尝试将您的文档类型设置为：

```
<!DOCTYPE html> 
```

# asp.net - .NET 4.5 在 .NET 4.0 服务器上

> ID：13154344
> 
> 赞同：1
> 
> 时间：2012-10-31T09:00:00.673
> 
> 标签：asp.net, .net

我想租一台安装了 IIS 7.5 和 .NET 4.0 的服务器。是否有可能以某种方式使用 .NET 4.5 功能（例如异步），也许通过在 bin 文件夹中包含相应的 DLL 或其他方式？

非常感谢您的时间和帮助，

理查德·休斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:02:35.400

我建议不要这样做，如果您租用服务器，那么我会假设您可以完全访问它？在这种情况下，只需在服务器上安装 .net 4.5。

尽管对名称进行了 .5 更改，但这并不是简单地更改 dll 并获得不同的功能集风格的发布。

所以简单来说，没有。您需要安装 .net 4.5 才能获得这些功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:03:37.677

您不能在 .net 4.0 上使用 .net 4.5 功能。

对您来说幸运的是，`async-await`主要是 C# 5.0 功能，而不是 .net 4.5 功能。您可以使用[Async Targeting Pack](http://www.microsoft.com/en-us/download/details.aspx?id=29576)在 .net 4.0 上使用此 C# 5.0 功能（与 .net 4.5 相比有一些小的更改）。检查我的相关问题：[在 .net 4 上使用 async-await](https://stackoverflow.com/questions/9110472/using-async-await-on-net-4)

# iphone - Cocos2d 不使用 iphone 5 的整个屏幕

> ID：13154347
> 
> 赞同：4
> 
> 时间：2012-10-31T09:00:04.250
> 
> 标签：iphone, cocos2d-iphone, screen

我的应用程序 ios 有问题。是cocos2d 6.0的通用应用。它适用于 ipad、iphone 3GS、4、4S。Iphone 5 上我可以启动应用程序但 cocos2d 不使用整个屏幕。像 iPhone 4。你有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T09:01:13.493

您是否在项目中添加了 Default-568h@2x.png 启动图像？这将使您的应用程序使用完整的 iPhone 5 屏幕。

如果您不包含该启动图像，那么您的应用程序将在盒装模式下运行（即，以屏幕为中心，上下有黑色条纹以填充整个区域）。

*注意：这是由于设备的屏幕分辨率不同：* iPhone 4：960x640 像素。
iPhone 5：1136x640 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T11:33:51.850

这是由于 iphone5 和 iphone 3G、4、4s 之间的屏幕尺寸差异造成的。

iPhone 4：960 x 640 像素

iPhone 5 1136 x 640 像素

您应该为启动图像使用 Default-568h@2x.png 图像名称。在启动 iphone 5 时将加载此图像，该图像将覆盖整个屏幕，而对于游戏中的其他图像（如果 iPhone5 有不同的图像），请在 AppDelegate.m 中使用以下代码

```
[CCFileUtils setiPhoneFourInchDisplaySuffix:@"your suffix"]; 
```

并根据您的后缀将图像放置在项目中。

# c++ - Google 测试 boost::variant

> ID：13154352
> 
> 赞同：1
> 
> 时间：2012-10-31T09:00:18.207
> 
> 标签：c++, boost, googletest, c++98

我有一个 boost::variant 包含命令。我正在编写一个`PathValidator`访问者，它对`Create`命令采取一种方式，对所有其他命令采取一种方式。这是我正在测试的方式。随着我添加更多测试，我将需要编写更多 HelperVisitors。关于如何使这更具可读性和更少冗长的任何提示？我正在使用 C++98。或者，也许你认为这没问题。

```
struct TestOneNodeInTreeHelper
{
    explicit TestOneNodeInTreeHelper(TestPathValidator& test): _test(test)
    {
    }

    void operator()(Create&) const
    {
        SyntaxTree::Create create;
        _test.addNodeToSyntaxTree(create.nodes,"1");
        PathValidator pathValidator(_test._accessorMock);
        pathValidator(create);
        EXPECT_EQ((int)_test._accessorMock->path.size(), 0);
    }

    template<class T> void operator()(const T&) const 
    {
        SyntaxTree::Create create;
        _test.addNodeToSyntaxTree(create.nodes,"1");
        PathValidator pathValidator(_test._accessorMock);
        pathValidator(create);
        EXPECT_EQ((int)_test._accessorMock->path.size(), 0);
        EXPECT_EQ(_test._accessorMock->path[0], "path1");
    }
    TestPathValidator& _test;
};

TEST_F (TestPathValidator, oneNodeInTree)
{
    TestOneNodeInTreeHelper helper(*this);
    boost::mpl::for_each<Command::types>(helper);
} 
```

# jakarta-ee - 默认页面的 docroot 中的 glassfish index.html 版本控制

> ID：13154354
> 
> 赞同：0
> 
> 时间：2012-10-31T09:00:18.190
> 
> 标签：jakarta-ee, glassfish-3

我正在使用 Glassfish 3.1.2，并且我想要 Glassfish 服务器的默认页面版本（docroot 中的 index.html），这样如果我更改了其中的一些代码，那么之前缓存的页面就会被刷新。

# android - Android 多个内容提供商，（DLC）

> ID：13154356
> 
> 赞同：3
> 
> 时间：2012-10-31T09:00:31.313
> 
> 标签：android, android-manifest, android-contentprovider

我希望将其他内容作为额外的数据库添加到我的应用程序中。我应该将它们放在 apk 和内容提供商中，以便它们可以直接从 google play 更新，或者就像新的 db 文件直接下载到应用程序中一样。

我的 content-provider/apk 方法的问题是，它们都必须在 android manifest 中声明，而且我可能有多个数据库甚至数百个，所以我的 manifest 中需要 100 个 content-provider 声明，即使用户可能只有一对，甚至没有。

除非有办法可以动态生成清单？或者在清单之外加载内容提供者？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:27:00.667

我认为最干净的方法是为所有 db 文件使用**一个唯一的** [ContentProvider 。](https://developer.android.com/reference/android/content/ContentProvider.html)

您应该围绕数据库选择构建[URI 。](http://developer.android.com/reference/java/net/URI.html)

例如 ：`content://com.your.package/a_db_file/something/things/5`

然后在实现你的 ContentProvider 的时候，解析 Uri 得到`a_db_file`段，打开对应的 db 文件，然后根据剩下的段做需要的工作。

也许你需要一个像`getCorrectDb(String a_db_file)`. 在此方法中，您应该正确调用与所需 db 文件正确匹配的[sqlLiteOpenHelper 。](https://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

另请查看[UriMatcher](https://developer.android.com/reference/android/content/UriMatcher.html)，它可能对您有用。:)

最后你应该有类似的东西：

```
@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {

    // TODO : Parse uri to get a_db_file string.

    SQLiteDatabase database = getCorrectDb(a_db_file);

    // TODO : get cursor from db according to other segments of uri.

    return cursor.

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T17:27:55.080

我会使用一个内容提供者来保持简单，并使用“附加数据库”sql 命令。

# android - 结合画布和布局（Android）

> ID：13154360
> 
> 赞同：6
> 
> 时间：2012-10-31T09:00:37.550
> 
> 标签：android, xml, layout, surfaceview, android-canvas

我关于Android UI的问题。当我们使用 XML 布局时，我们编写（例如）

`setContentView(R.layout.main);`

当我们使用 2d 图形时，我们会写

`Draw2D d = new Draw2D(this);
setContentView(d);`

那么如果我想同时使用两者呢？我需要使用 layout-xml 并且屏幕的一部分是冷杉绘画（Canvas）。我阅读了有关surfaceView 的信息，但是使用Canvas 简单呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T10:00:01.400

您实际上可以从 XML 文件中扩展您的布局，然后检索任何视图以在其上绘制。SurfaceView 绘图特别方便。

您可以在下面找到一个示例：

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <SurfaceView
        android:id="@+id/surface"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout> 
```

测试活动.java：

```
public class TestActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    SurfaceView surface = (SurfaceView) findViewById(R.id.surface);
    surface.getHolder().addCallback(new Callback() {

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            // Do some drawing when surface is ready
            Canvas canvas = holder.lockCanvas();
            canvas.drawColor(Color.RED);
            holder.unlockCanvasAndPost(canvas);
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {
        }

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        }
    });
}
} 
```

# php - 方面搜索：为具有完整属性和苗条属性的用户设计的 MySQL 数据库

> ID：13154365
> 
> 赞同：0
> 
> 时间：2012-10-31T09:00:59.373
> 
> 标签：php, mysql, search, faceted-search

我正在尝试确定一种数据库设计，该设计将允许`SELECT`根据交叉属性快速启用用户。我有两种属性：

1.  满 - 每个人都有这些。例如位置/性别/年龄等。
2.  苗条 - 例如标签/兴趣。大多数用户在 5 万个可能的选项中都有大约 7 个选项。这些不是均匀分布的，例如很多用户有兴趣`Music`，但只有少数用户有兴趣`Funk Rock`。

数据集是 10 的数百万人，所以我试图避免加入。

保存数据：

对于每个完整属性，我可以`SELECT`相应地为每个用户保留一列。对于我正在考虑创建另一个表的苗条属性，在这种情况下，每个用户都有不止一行，每行代表一个属性。

选择苗条的属性是我面临问题的地方。假设我没有加入 SELECT 中的表以避免性能低下，我正在考虑将 SELECT 分为两个不同的用例：

1.  搜索一个流行的 slim-attribute，比如说兴趣`Music`，它会首先从 slim 属性表中找到匹配它的 C*SearchAmount 用户，然后根据完整的属性表对其进行过滤，如果过滤太多，则使用更大的 C 再次执行此操作。
2.  寻找一种罕见的苗条属性，反其道而行之。

在实现这个之前，我想听听其他/更好的方法来解决这个问题。

# android - Android 分层导航

> ID：13154369
> 
> 赞同：2
> 
> 时间：2012-10-31T09:01:05.567
> 
> 标签：android

我正在尝试获取有关如何开发向下钻取结构的示例或起始参考。我能给出的最好的例子是，Android 如何浏览它自己的文件夹结构。这是一个截图来说明我的观点：

![在此处输入图像描述](../Images/f4c56d5b174cf6159ae3d2ab10bc4ca3.png)

我想指出一些事情：

*   我将知道结构将运行多深的知识
*   最低 API 级别 10

有人可以指出我正确的方向。非常感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:24:13.507

对于那些你想知道我是如何管理这个的人，我基本上调用了相同的活动，只是使用了父 ID（它将位于包中）。这样我就可以`ListView`用提供的父 ID 填充，然后让我`BaseAdapter`整理出要显示的 UI。

我不知道这是否是最好的方法，但它对我有用。

亲切的问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:11:14.497

IMO，技术上对结构深度没有限制。但为了设计、用户与应用程序的良好交互以及代码维护，我建议 3 到 5 级深度就足够了。如果您必须走得更远，也许您应该重新设计应用程序。

您还可以使用面包屑来提高结构的可见性。 [http://developer.android.com/reference/android/app/FragmentBreadCrumbs.html](http://developer.android.com/reference/android/app/FragmentBreadCrumbs.html)

# iphone - iOS：将音频文件添加到音频库

> ID：13154373
> 
> 赞同：0
> 
> 时间：2012-10-31T09:01:13.847
> 
> 标签：iphone, objective-c, ipad, ios5, audio

> **可能重复：**
> [以编程方式将内容添加到音乐库](https://stackoverflow.com/questions/13147044/programmatically-add-content-to-music-library)

是否可以将在我的应用程序中录制的音频文件存储到 iOS 音频库中？我检查了文档，但我发现的只是访问库而不是添加新音频文件的方法。

**编辑**：我指的是音乐库，例如在使用时打开的音乐库`MPMediaPickerController`

问候，

# java - 如何使用控制台运行 jnlp 应用程序？

> ID：13154374
> 
> 赞同：6
> 
> 时间：2012-10-31T09:01:17.283
> 
> 标签：java, console, jnlp

我有一个在某些系统上终止的 jnlp 应用程序。我认为直接终止我的应用程序是一个例外。我想用控制台窗口启动它。

javaws xyz.jnlp 是否可以用 java 命令替代？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-15T10:13:15.580

您可以尝试设置`deployment.console.startup.mode`为`SHOW`查看 java 控制台。通过部署文件（更多信息：[部署配置文件和属性](https://docs.oracle.com/javase/7/docs/technotes/guides/jweb/jcp/properties.html)）或命令行参数：

```
javaws -J-Ddeployment.console.startup.mode=SHOW <JNLP url> 
```

请注意，在这两种情况下，它只有在 JNLP 作者没有通过 锁定属性时才有效`deployment.console.startup.mode.locked`。

如果没有帮助，请尝试使用 Web Start 运行一些 Hello World 应用程序并使用 jConsole 连接到它。然后你可以在某处找到整个 javaws 命令的路径。

# c# - 用于分发的 Monotouch 条件编译

> ID：13154381
> 
> 赞同：3
> 
> 时间：2012-10-31T09:01:46.470
> 
> 标签：c#, xamarin.ios, preprocessor-directive

我知道您可以包含指令以根据您是处于调试模式还是发布模式来编译和运行不同的代码。当您构建项目以进行分发时，您可以做同样的事情吗？

我问是因为我刚刚提交并批准了一个应用程序更新，它指向我们测试服务器上的 Web 服务，而不是实时！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:27:53.663

是的，你当然可以。

在 Project Options->Compiler->Define Symbols 下的 MonoDevelop 中，选择合适的构建配置（AppStore），您可以新建一个变量，例如`PRODUCTION`.

然后你可以使用：

```
#if PRODUCTION
#endif 
```

贯穿您的代码。

# c# - 为什么 SQL Profiler 中没有 BEGIN TRANSACTION 语句

> ID：13154383
> 
> 赞同：1
> 
> 时间：2012-10-31T09:01:54.907
> 
> 标签：c#, sql-server, transactions, entity-framework-4.1, dbcontext

我有两个 POCO 对象，Customer 和 CustomerAddress，如下所示。

```
public partial class Customer
    {
        public Customer()
        {
            this.CustomerAddresses = new HashSet<CustomerAddress>();
            this.Orders = new HashSet<Order>();
        }

        public int ID { get; set; }
        public string LastName { get; set; }
        public string FirstName { get; set; }
        public string MiddleName { get; set; }
        public System.DateTime DateOfBirth { get; set; }
        public byte Gender { get; set; }

        public virtual ICollection<CustomerAddress> CustomerAddresses { get; set; }
        public virtual ICollection<Order> Orders { get; set; }
    }

public partial class CustomerAddress
    {
        public int ID { get; set; }
        public int CustomerID { get; set; }
        public byte AddressType { get; set; }
        public string Street { get; set; }
        public string City { get; set; }
        public string State { get; set; }
        public string Country { get; set; }

        public virtual Customer Customer { get; set; }
    } 
```

我正在创建一个新的 Customer 对象，如下所示。

```
Customer cust = new Customer();
            cust.ID = 9;
            cust.LastName = "Ross";
            cust.FirstName = "Taylor";
            cust.DateOfBirth = DateTime.Now;
            cust.Gender = 0;

            CustomerAddress custAdd = new CustomerAddress();
            custAdd.ID = 9;
            custAdd.Customer = cust;
            custAdd.AddressType = 0;
            custAdd.Street = "1 Main Street";
            custAdd.City = "Princeton";
            custAdd.State = "CA";
            custAdd.Country = "USA";

            DbConnection MyContext = new DbConnection(); ;
            MyContext.Customers.Add(cust);
            MyContext.CustomerAddresses.Add(custAdd);
            MyContext.SaveChanges(); 
```

我启动 SQL Profiler。保存此数据后，将针对数据库运行两个插入脚本，一个用于 Customer，另一个用于 CustomerAddress。但我的困惑是我在 SQL Profiler 中看不到任何 BEGIN TRANSACTION 和 COMMIT 语句。如果出于某种原因，为 CustomerAddress 插入脚本失败，我希望整个事务都失败，并且我不确定在没有 BEGIN TRANSACTION 的情况下是否会得到它。我在这里做错了什么吗？

# c# - 增加“MaxStringContentLength”以连接到 Web 服务

> ID：13154396
> 
> 赞同：1
> 
> 时间：2012-10-31T09:02:39.103
> 
> 标签：c#, vb.net, web-services

我正在使用以下代码连接到网络服务：

```
 Dim wsRemote As New System.ServiceModel.EndpointAddress("http://www.exampleurl.com/example.asmx")
            Dim wsBinding As System.ServiceModel.Channels.Binding = Nothing
            Dim wsListenerBindingClass As Type = Nothing
            wsListenerBindingClass = GetType(System.ServiceModel.BasicHttpBinding)
            wsBinding = DirectCast(Activator.CreateInstance(wsListenerBindingClass), System.ServiceModel.Channels.Binding)
            Dim m_wsTest As wsExample.WebServiceSoapClient = New wsExample.WebServiceSoapClient(wsBinding, wsRemote) 
```

m_wsTest 类实例提供了几种方法来检索基于 xml 字符串的信息。如果总字符串大小超过 8192（默认），那么我（显然）会收到以下错误消息：

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数 Test.ExampleWebservice:GetInfoResponse 时出错。InnerException 消息是“反序列化 Test.ExampleWebservice.wsTest.GetInfoResponseBody 类型的对象时出错。读取 XML 数据时已超出最大字符串内容长度配额 (8192)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxStringContentLength 属性来增加此配额。第 1 行，位置 12760.'。有关更多详细信息，请参阅 InnerException。

我了解此错误消息的含义以及我必须做什么（增加配额），但根本找不到您在哪里以及如何执行此操作。所以，我需要你帮忙。

注意：我不想在安装中包含“.exe.config”文件。我想要没有它的连接，只是通过代码。

注意：我了解 C# 和 VB.NET，因此代码示例可能在其中任何一个中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:16:31.660

您需要使用所需长度初始化 ReaderQuotas 并将其分配给绑定。

```
 var readerqts = new XmlDictionaryReaderQuotas();
        readerqts.MaxStringContentLength = 20000;           
        wsListenerBindingClass.ReaderQuotas = readerqts; 
```

或者，如果您使用[HTTPWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.contentlength.aspx)来通过 WebService，您可以使用，

```
 HTTPWebRequest.ContentLength = 10000; 
```

# objective-c - UIScrollView 删除子视图动画

> ID：13154399
> 
> 赞同：0
> 
> 时间：2012-10-31T09:03:04.433
> 
> 标签：objective-c, ios, cocoa-touch, uiscrollview

我所拥有的：基本上我收集了在水平滚动视图中呈现的 UIView。UIScrollView 启用了分页，并且每个项目都不是全屏的，因此我可以[基于此查看上一个和下一个视图的一部分。](http://blog.proculo.de/archives/180-Paging-enabled-UIScrollView-With-Previews.html) 每个视图本身都有删除按钮。

我需要什么：我需要找到一个好主意，在删除一个子视图后为重新加载 UIScrollView 内容设置动画。正如我所想，将有 4 种不同类型的删除：1\. 删除最后一个视图 2\. 删除第一个视图 3\. 删除中间视图 - 最难的一个 4\. 删除唯一的视图 - 最简单的一个，只是视图消失的动画

我需要一些建议/解决方案。谢谢， 迈克尔

编辑：

好的，我还没有完全实现它。

这里是重载方法：

```
- (void)loadScrollView{
for(UIView* view in [_scrollView subviews])
{
    [view removeFromSuperview];
}

CGRect frame = self.scrollView.frame;
frame.origin.x = 0;
frame.origin.y = 0;
int i = 0;

_scrollView.clipsToBounds = NO;
_scrollView.pagingEnabled = YES;
_scrollView.showsHorizontalScrollIndicator = NO;

for(MPContact* contact in self.items)
{
    frame.origin.x = self.scrollView.frame.size.width*i;
    MyView *view = [[[NSBundle mainBundle] loadNibNamed:@"MyView" owner:self options:nil] objectAtIndex:0];
    [view setFrame:frame];

    i++;
    [view.nameAndSurnameLabel setText:@"view text"];
    [view setDelegate:self];
    [self.scrollView addSubview:view];[self.viewsArray addObject:view];
}[self.scrollView setContentSize:CGSizeMake(frame.size.width*[self.items count], frame.size.height)];} 
```

每个 MyView 都有带委托的删除按钮，委托从 viewsArray 中删除视图并暂时运行此方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:58:17.890

我建议你使用类`+ (void)animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion`的方法`UIView`。只需获取您`UIView`要删除的内容，`UIScrollView`然后将其设置`view.alpha = 0`为`animations`块即可。在`completion`块中删除这个`UIView`，`UIScrollView`使用`removeFromSuperView`方法。设置`alpha`为 0 将使淡入淡出动画。

**编辑：** 迭代您想要移动的所有视图并更改它的 x 坐标。

```
for(UIView *view in scrollview.subviews)
{
    [UIView animateWithDuration:0.1 animations:^{
       [view setFrame:CGRectMake(view.x-(/*HERE YOU NEED TO PUT WIDTH OF TOUR DELETING VIEW*/),view.y,view.width,view.heigh)];
   }
    completion:^(BOOL finished){
    //remove view from superview and change your uiscrollview's content offset.
   }];

} 
```

# visual-studio-2010 - 更改 Web 部件名称

> ID：13154400
> 
> 赞同：0
> 
> 时间：2012-10-31T09:03:18.230
> 
> 标签：visual-studio-2010, sharepoint, web-parts, config

我已经开发了一个 webpart 并将其部署到 SP2010 中。我想对 webpart 进行一些更改并将其展示给我的客户，但我需要保留原始 webpart，以防他们不喜欢新的更改。所以我想在服务器上有 2 个版本的 webpart，但只使用一个 Visual Studio 项目。

在 Visual Studio 中，我进行了以下更改： 1\. 解决方案名称（MyWebPart 到 MyWebPartNew） 2\. 程序集名称（来自项目的属性窗口） 3\. MyWebPart.webpart 文件到 MyWebPartNew.webpart + 4\. Element.xml

“新”webpart 已成功部署在服务器上，但它覆盖了我的旧 webpart :(。我查看了调试输出文件夹，发现 dll 和 pdb 文件已更改为新名称，但未更改为 wsp 文件。

我错过了什么吗？如何在不覆盖同一项目中的旧 Web 部件的情况下添加新 Web 部件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:00:47.527

最简单的方法可能是在旧 Web 部件旁边添加一个新 Web 部件。在这种情况下，如果他们更喜欢新的，您可以简单地删除旧的。

但是在您的情况下，我认为您的问题是您没有更改 wsp 名称（在 Visual Studio 中双击“包”）并且您没有更改解决方案 ID（单击包后属性窗口中的 guid）。部署（从 Visual Studio）时发生的情况是，首先撤回旧解决方案，然后添加新解决方案，导致旧 Web 部件出现故障。

但正如我所写，我建议您改为创建一个新的、相同的 Web 部件，其中包含您的更改，并将其部署在旧 Web 部件旁边。

# algorithm - 总和相等的两个数组中的最大跨度

> ID：13154401
> 
> 赞同：13
> 
> 时间：2012-10-31T09:03:18.803
> 
> 标签：algorithm

这是编程难题。我们有两个数组 A 和 B。它们都只包含 0 和 1。

我们必须有两个索引`i, j`，这样

```
 a[i] + a[i+1] + .... a[j] = b[i] + b[i+1] + ... b[j]. 
```

我们还必须最大化 i 和 j 之间的差异。寻找 O(n) 解决方案。

我找到`O(n^2)`了解决方案，但没有得到`O(n)`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T09:23:58.130

最佳解决方案是*O(n)*

首先 let `c[i] = a[i] - b[i]`，然后问题变成 find *i*、*j*、 which`sum(c[i], c[i+1], ..., c[j]) = 0`和 max `j - i`。

其次让`d[0] = 0`, `d[i + 1] = d[i] + c[i], i >= 0`, 然后问题变成 find *i* , *j* , which`d[j + 1] == d[i]`和 max `j - i`。

的值`d`在范围内`[-n, n]`，所以我们可以使用下面的代码来找到答案

```
answer = 0, answer_i = 0, answer_j = 0
sumHash[2n + 1] set to -1
for (x <- 0 to n) {
  if (sumHash[d[x]] == -1) {
    sumHash[d[x]] = x
  } else {
    y = sumHash[d[x]]
    // find one answer (y, x), compare to current best
    if (x - y > answer) {
      answer = x - y
      answer_i = y
      answer_j = y
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T09:18:19.853

这是一个`O(n)`解决方案。

我使用的事实是`sum[i..j] = sum[j] - sum[i - 1]`.

我保留每个找到的总和的最左边的位置。

```
 int convertToPositiveIndex(int index) {
        return index + N;
    } 

    int mostLeft[2 * N + 1];
    memset(mostLeft, -1, sizeof(mostLeft));

    int bestLen = 0, bestStart = -1, bestEnd = -1;

    int sumA = 0, sumB = 0;
    for (int i = 0; i < N; i++) {
        sumA += A[i];
        sumB += B[i];

        int diff = sumA - sumB;
        int diffIndex = convertToPositiveIndex(diff);

        if (mostLeft[diffIndex] != -1) {
            //we have found the sequence mostLeft[diffIndex] + 1 ... i
            //now just compare it with the best one found so far 
            int currentLen = i - mostLeft[diffIndex];
            if (currentLen > bestLen) {
                bestLen = currentLen;
                bestStart = mostLeft[diffIndex] + 1;
                bestEnd = i;
            }
        }

        if (mostLeft[diffIndex] == -1) {
            mostLeft[diffIndex] = i;
        }
    }

cout << bestStart << " " << bestEnd << " " << bestLen << endl; 
```

PS`mostLeft`数组是`2 * N + 1`，因为有底片。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T09:21:45.347

基本上，我的解决方案是这样的。

从一开始就采取一个变量来处理差异。

```
int current = 0;
for index from 0 to length
    if a[i] == 0 && b[i] == 1
        current--;
    else if a[i] == 1 && b[i] == 0
        current++;
    else
        // nothing; 
```

找到变量具有相同值的位置，表示其间有相等的 1 和 0。

* * *

伪代码：

这是我的主要解决方案：

```
int length = min (a.length, b.length);
int start[] = {-1 ... -1}; // from -length to length
start[0] = -1;
int count[] = {0 ... 0};   // from -length to length
int current = 0;
for (int i = 0; i < length; i++) {
    if (a[i] == 0 && b[i] == 1)
        current--;
    else if (a[i] == 1 && b[i] == 0)
        current++;
    else
        ; // nothing

    if (start[current] == -1) // index can go negative here, take care
        start[current] = current;
    else
        count[current] = i - start[current];
}
return max_in(count[]); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-31T09:22:10.110

这是一个相当简单的 O(N) 解决方案：

让`sa = [s1, s2, s3.. sn]`在哪里`si = sum(a[0:i])`和类似的`sb`

然后`sum(a[i:j]) = sa[j]-sa[i]` 和`sum(b[i:j]) = sb[j] - sb[i]`

请注意，因为总和每次只增加 1，我们知道`0 <= sb[N], sa[N] <=N`

`difference_array = [d1, d2, .. dn]`在哪里`di = sb[i] - sa[i] <= N`

注意 if `di = dj`， then`sb[i] - sa[i] = sb[j] - sa[j]`这意味着它们具有相同的总和（`sum(b[i:j]) and sum(a[i:j])`从上面重新排列）。

现在对于每个差异，我们需要它的**最大位置出现和最小位置出现**

现在对于每个差值di，max - min 之间的差值是等和的ij 部分。找到最大的最大最小值，你就完成了。

应该工作的示例代码：

```
a = []
b = []
sa = [0]
sb = [0]
for i in a:
    sa.append(sa[-1] + i)
for i in b:
    sb.append(sb[-1] + i)

diff = [sai-sbi for sai, sbi in zip(sa, sb)]
min_diff_pos = {}
max_diff_pos = {}
for pos, d in enumerate(diff):
    if d in min_diff_pos:
        max_diff_pos[d] = pos
    else:
        min_diff_pos[d] = pos

ans = min(max_diff_pos[d] - min_diff_pos[d] for d in diff) 
```

# jquery - Jquery split() 在 FF 和 Chrome 中返回带有索引但在 IE 中只有一个索引的数组

> ID：13154402
> 
> 赞同：0
> 
> 时间：2012-10-31T09:03:21.410
> 
> 标签：jquery, arrays, split

> **可能重复：**
> [jQuery text() 调用在 Firefox 中保留换行符，但在 IE 中没有](https://stackoverflow.com/questions/656605/jquery-text-call-preserves-newlines-in-firefox-but-not-in-ie)

我在 IE 中遇到了这段代码的一些问题：

```
var frameFromValues = $('#getData').contents().find("body table tbody tr#c_"+ currencyFrom).text().split('\n');
console.log(frameFromValues); 
```

Chrome 中的控制台显示：

```
["", "          KRA", "          Fenix", "          1", "          1", "      "] 
```

IE 9 中的控制台显示：

```
KRAFenix11 
```

正因为如此，当我尝试通过它的索引获取一个值时，如下所示：

```
cFrom = frameFromValues[5]; 
```

它在 IE 中显示“未定义”，但在 Chrome 中运行良好。

如何让它在 IE 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:16:45.640

Try removing the `trim();` function

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:30:41.227

Instead of trim use:

```
cFrom = frameFromValues[5].replace(/^\s+|\s+$/g, ''); 
```

# mongodb - 带有附加条件的慢 Mongodb $near 搜索

> ID：13154419
> 
> 赞同：2
> 
> 时间：2012-10-31T09:04:30.880
> 
> 标签：mongodb, geo

我有一个集合，数据如下所示：

```
{
    "_id" : ObjectId("4e627655677c27cf24000000"),
    "gps" : {
        "lng" : 116.343079,
        "lat" : 40.034283
    },
    "lat" : 1351672296
} 
```

我建立了一个复合索引：

```
{
    "v" : 1,
    "key" : {
        "gps" : "2d",
        "lat" : 1
    },
    "ns" : "test.user",
    "name" : "gps__lat_1"
} 
```

像下面这样的纯 $near 查询可以非常快（< 20ms）：

```
>db.user.find({"gps":{"$near":{"lng":116.343079,"lat":40.034283}}}).explain()
{
    "cursor" : "GeoSearchCursor",
    "nscanned" : 100,
    "nscannedObjects" : 100,
    "n" : 100,
    "millis" : 23,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {

    }
} 
```

但是带有“lat”条件的查询非常慢（ 900ms+ ）：

```
>db.user.find({"gps":{"$near":{"lng":116.343079,"lat":40.034283}},"lat":{"$gt":1351413167}}).explain()
{
    "cursor" : "GeoSearchCursor",
    "nscanned" : 3,
    "nscannedObjects" : 3,
    "n" : 3,
    "millis" : 665,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {

    }
} 
```

有人可以解释一下吗？太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:35:18.367

我将我的 Mongodb 更新到 2.2.0，问题消失了。

```
127.0.0.1/test> db.user.find({gps:{$near:[116,40]},lat:{$gt:1351722342}}).explain()
{
    "cursor" : "BasicCursor",
    "isMultiKey" : false,
    "n" : 0,
    "nscannedObjects" : 0,
    "nscanned" : 0,
    "nscannedObjectsAllPlans" : 0,
    "nscannedAllPlans" : 0,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 0,
    "indexBounds" : {

    },
    "server" : "zhangshenjiamatoMacBook-Air.local:27017"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T02:10:01.910

从上面的解释来看，geoIndex 似乎根本没有被使用——而且，上面的查询似乎没有返回任何结果！

如果您的查询使用 2d 索引，则说明应包含：

> “光标”：“地理搜索光标”

您能否检查升级到 2.2.0 是否真的解决了您的问题？:)

桑达尔

# c# - C# 如何使用 LINQ 填充水晶报表

> ID：13154424
> 
> 赞同：4
> 
> 时间：2012-10-31T09:05:02.517
> 
> 标签：c#, linq, crystal-reports

我正在尝试使用 LINQ 填充水晶报告。

这是我的代码：

```
var results = (from supp in dbdata.Suppliers select supp).ToList();
cr1.Load(@"CrystalReport1.rpt");
cr1.SetDataSource(results);
crystalReportViewer1.ReportSource = cr1; 
```

当我运行应用程序时，它会产生一个错误：

> DataSet 不支持 System.Nullable<>。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:11:26.790

试试这个 ：

```
 CrystalReport1 cr = new CrystalReport1();

    var results = (from supp in dbdata.tSamples
                  where supp.ID == IDNUMBER
                  select new { supp.Name, supp.Model, supp.Producer }).ToList();

    cr.SetDataSource(results);
    crystalReportsViewer1.ReportSource = cr; 
```

# java - 长时间不活动后无法创建新的加载器

> ID：13154425
> 
> 赞同：0
> 
> 时间：2012-10-31T09:05:04.587
> 
> 标签：java, android, android-fragments, android-loadermanager, android-loader

我有一个 Android 应用程序，其`Fragment`依赖加载程序来获取数据。下面是我的骨架代码`Fragment`。一切都是一样的，只是我在`onLoadFinished`方法中有一些自定义代码。

```
public class Events extends Fragment implements LoaderCallbacks<ArrayList<Event>> {    
    private Integer intWeek;

    public static Events newInstance(Integer intWeek) {    
        Events pageFragment = new Events();
        pageFragment.intWeek = intWeek;
        pageFragment.setArguments(new Bundle());
        return pageFragment;    
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.events, null);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getLoaderManager().initLoader(this.intWeek, savedInstanceState, this);
    }

    public Loader<ArrayList<Event>> onCreateLoader(int intLoader, Bundle bndBundle) {
        return new Scraper(getActivity().getApplicationContext());
    }

    public void onLoadFinished(Loader<ArrayList<Event>> ldrEvents, final ArrayList<Event> lstEvents) {    
        //Do something with the returned data
    }

    public void onLoaderReset(Loader<ArrayList<Event>> ldrEvents) {
        return;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }    
} 
```

这`Fragment`在一个`FragmentActivity`which uses `ViewPager`which uses which get its `Fragment´s using a`FragmentPagerAdapter`中使用。

这很好用，我可以`Fragment`像上面显示的那样在 s 之间进行分页。每次`Fragment`向 中添加新的时`ViewPager`，该`onCreate`方法都会触发并创建一个新的`Loader`.

当我按下手机上的“主页”按钮时，应用程序会暂停并进入后台。我总是可以恢复应用程序，它工作得很好——在后台运行 5/10/20 分钟后。

...但是如果我将应用程序留在后台很长时间，一个小时或更长时间，应用程序会在启动时崩溃，并且堆栈跟踪指向`onCreate`方法中的以下行：

```
 getLoaderManager().initLoader(this.intWeek, savedInstanceState, this); 
```

现在我很迷茫为什么会这样。似乎Android框架在后台长时间不活动后破坏了后台的某些东西，并且该`initLoader`方法无法创建`Loader`. [关于该`initLoader`方法](http://developer.android.com/reference/android/app/LoaderManager.html#initLoader%28int,%20android.os.Bundle,%20android.app.LoaderManager.LoaderCallbacks%3CD%3E%29)的文档具体说：

> 确保加载程序已初始化并处于活动状态。如果加载器尚不存在，则创建一个并（如果活动/片段当前已启动）启动加载器。否则，最后创建的加载器将被重新使用。

谁能指出我在这里做错了什么？这似乎是一个很难调试的问题，因为我无法随意复制它。这是非常随机的。谢谢

* * *

来自 logcat 的堆栈跟踪：

```
Transmitting stack trace: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mridang.stadi/com.mridang.stadi.Main}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2079)    
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)    
    at android.app.ActivityThread.access$600(ActivityThread.java:132)    
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)    
    at android.os.Handler.dispatchMessage(Handler.java:99)    
    at android.os.Looper.loop(Looper.java:137)    
    at android.app.ActivityThread.main(ActivityThread.java:4575)    
    at java.lang.reflect.Method.invokeNative(Native Method)    
    at java.lang.reflect.Method.invoke(Method.java:511)    
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)    
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)    
    at dalvik.system.NativeStart.main(Native Method)    
Caused by: java.lang.NullPointerException    
    at com.mridang.stadi.events.Events.onCreate(Events.java:73)    
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:834)    
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)    
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1062)    
    at android.support.v4.app.FragmentManagerImpl.dispatchCreate(FragmentManager.java:1805)    
    at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:200)    
    at com.mridang.stadi.Main.onCreate(Main.java:23)    
    at android.app.Activity.performCreate(Activity.java:4465)    
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)    
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)    
    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:30:22.690

我在装载机上遇到了类似的问题。我发现 Fragment/Loader 生命周期很复杂。我很想找到一份详细解释它的文件。

无论如何，我为解决这个问题所做的就是将`initLoader()`调用移至该`onActivityCreated()`方法。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:43:04.860

尝试使用这样的东西：

```
boolean canFire = ((loader != null) && !loader.isReset());
            // restart or initialise loader
            if (canFire) {
                getLoaderManager().restartLoader(loaderId, args, this);
            } else {
                getLoaderManager().initLoader(loaderId, args, this);
            } 
```

# java - 为什么在使用 Zats 测试 .zul 页面时控制器没有被注入？

> ID：13154433
> 
> 赞同：2
> 
> 时间：2012-10-31T09:05:16.213
> 
> 标签：java, spring, junit, zk

我正在尝试实施第一个 Zats 测试，但由于缺少 Spring 依赖注入而陷入困境。

使用下面代码片段的测试变为绿色，但*doAfterCompose*从未被调用。似乎控制器注入zul页面不起作用。将*apply="${teamsPopupCtrl}"*更改为完整的限定名称，控制器被使用，但*teamService*为 null 并且当从*doAfterCompose*调用*teamService.findAll()*时出现 NullPointerException 。因此，似乎没有任何东西被注入。

 *ApplicationContext 本身正在加载，没有任何错误，并使用*@Autowired private TeamService teamService；*在我的测试类中进行验证按预期工作。执行 firstTest 时，teamService 不为空。

我也尝试使用

```
<?variable-resolver class="org.zkoss.zkplus.spring.DelegatingVariableResolver"?> 
```

在 zul 页面中，但这只会导致

```
IOException: Server returned HTTP response code: 500 for URL: http://127.0.0.1:56851/teamsPopup.zul 
```

我无法进一步说明。

**祖尔页面：**

```
<?page id="teamsPopup" title="layout" contentType="text/html;charset=UTF-8"?>
<zk>
    <window apply="${teamsPopupCtrl}" width="400px" title="Fachteams" border="normal" closable="true">
        <listbox id="teamsList" multiple="true" checkmark="true" width="380px" mold="paging" pageSize="10">
            <listhead><listheader label="Fachteams" /></listhead>           
        </listbox>
        <hbox height="10px" />
        <toolbar mold="panel" align="center">
            <button id="btnOk" forward="onOK" label="OK" mold="trendy" height="25px" width="120px" image="./images/ok.png" />
            <button forward="onClose" label="Abbruch" mold="trendy" height="25px" width="120px" image="./images/cancel.png" />
        </toolbar>
    </window>
</zk> 
```

**测试类：**

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:applicationContext/test-applicationContext.xml"})
public class TeamsPopupTest {

    @BeforeClass
    public static void beforeClass() throws Exception {
        Zats.init("./src/main/webapp/WEB-INF/pages/schemaOverview");
    }

    @AfterClass
    public static void afterClass() throws Exception {
        Zats.end();
    }

    @After
    public void after() throws Exception {
        Zats.cleanup();
    }

    @Test
    public void firstTest() throws Exception {
        final DesktopAgent desktop = Zats.newClient().connect("/teamsPopup.zul");
    }
} 
```

**控制器类：**

```
@Component
@Scope(value = "prototype")
public class TeamsPopupCtrl extends AbstractPopupCtrl {

    private static final long serialVersionUID = -1945118180857183121L;

    // ZK Autowire
    Listbox teamsList;

    @Autowired
    @Qualifier("teamsPopupModel")
    private PopupModel popupModel;

    @Autowired
    private TeamService teamService;

    // ZK Autowire
    private Listbox teamsBox;

    @Override
    public void doAfterCompose(final Window comp) throws Exception {
        super.doAfterCompose(comp);
        this.teamsList.setItemRenderer(new TeamListBoxRenderer());
        this.teamsList.setModel(getFilteredTeamList());
    }

    public SchemaModel getSchemaModel() {
        return (SchemaModel) getPerspectiveController().getCurrentPerspective().getModel();
    }

    @SuppressWarnings({"unchecked", "rawtypes"})
    public void onOK(final Event event) {
        final ListModelList<?> model = (ListModelList<?>) this.teamsList.getModel();
        final List<Team> selectedTeams = new ArrayList(model.getSelection());
        this.teamService.addTeamsToNodeInSchema(getSchemaModel().getCurrentNode(), selectedTeams);
        this.teamsBox.setModel(new ListModelList<NodeTeamAssociation>(getSchemaModel().getCurrentNode().getNodeTeamList()));
        doClosePopup();
        if (!model.getSelection().isEmpty()) {
            modify();
        }
    }

    @Override
    public void doOpenPopup(final org.zkoss.zul.Window window) {
        super.doOpenPopup(window);
        Executions.createComponents("/WEB-INF/pages/schemaOverview/teamsPopup.zul", getModel().getPopupWindow(), null);
    }

    private ListModelList<Team> getFilteredTeamList() {
        final Collection<Team> allTeams = new ArrayList<Team>(this.teamService.findAll());
        for (final NodeTeamAssociation selectedTeam : getSchemaModel().getCurrentNode().getNodeTeamList()) {
            allTeams.remove(selectedTeam.getTeam());
        }
        return new ListModelList<Team>(allTeams);
    }

    protected class TeamListBoxRenderer implements ListitemRenderer<Team>, Serializable {

        private static final long serialVersionUID = 8268285374821502239L;

        @Override
        public void render(final Listitem item, final Team teamdata, final int index) throws Exception {
            final Listcell lc = new org.zkoss.zul.Listcell();
            lc.setLabel(teamdata.getName());
            lc.setValue(teamdata);
            lc.setParent(item);
            TeamsPopupCtrl.this.teamsList.setMultiple(true);
            TeamsPopupCtrl.this.teamsList.setCheckmark(true);
        }
    }

    @Override
    protected PopupModel getModel() {
        return this.popupModel;
    }
} 
```

有谁知道如何使用依赖注入来进行测试，或者我的测试设置中缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:21:54.220

我认为可能与您的 ZATS 环境设置有关。

知道 ZATS 实际上是使用 Jetty 来运行您的应用程序，因为它需要来自正在运行的应用程序的“真实”组件来运行这些测试。因此，必须像运行应用程序一样设置 ZATS。

在您的测试设置代码中，我看到您只调用

```
Zats.init("./src/main/webapp/WEB-INF/pages/schemaOverview"); 
```

如果这是你做的唯一设置，那么 ZATS 将使用它自己的**web.xml**和**zk.xml**来运行你的应用程序。我认为这就是为什么弹簧根本不起作用的原因，因为它从未被加载过。

您可以查看此文档以从您想要的位置设置 ZATS 加载**web.xml**和**zk.xml**。

[ZATS : 自定义测试环境](http://books.zkoss.org/wiki/ZATS%20Essentials/Mimic%20Library/Advanced%20Usage/Customize%20Test%20Environment)*

# ios - Adobe Native Extension iOS h.264 文件编码器

> ID：13154434
> 
> 赞同：2
> 
> 时间：2012-10-31T09:05:31.343
> 
> 标签：ios, video, air, h.264, encoder

我正在尝试为 iOS 制作一个 adobe 本机扩展 h.264 文件编码器。我有编码器部分工作。它在 xcode 测试项目中运行良好。问题是当我尝试从 ane 文件运行它时它不起作用。

我的代码将从 bitmapData 转换为 CGImage 的帧添加：

```
 //convert first argument in a bitmapData
    FREObject objectBitmapData = argv[0];
    FREBitmapData  bitmapData;

    FREAcquireBitmapData( objectBitmapData, &bitmapData );

    CGImageRef theImage = getCGImageRefFromBitmapData(bitmapData);

    [videoRecorder addFrame:theImage]; 
```

在这种情况下，CGImageRef 有数据，但是当我尝试打开视频时，它只显示黑屏。

当我从 xcode 项目中对其进行测试时，它还会保存一个黑屏视频，但是如果我从 UIImage 文件创建 CGImage，然后修改此 CGImage 并将其传递给 addFrame，它就可以正常工作。

我的猜测是 CGImageRef theImage 没有正确创建。

我用来创建 CGImageRef 的代码是这样的：[https ://stackoverflow.com/a/8528969/800836](https://stackoverflow.com/a/8528969/800836)

为什么使用 CGImageCreate 创建 CGImage 时不能正常工作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:18:23.287

如果有人遇到同样的问题，我的解决方案是创建一个每行 0 字节的 CGImageRef：

```
CGBitmapInfo bitmapInfo     = kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Little;
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(NULL, 1024, 768, 8, /*bytes per row*/0,    colorSpace, bitmapInfo);
// create image from context
CGImageRef tmpImage = CGBitmapContextCreateImage(context);
CGContextRelease(context);
CGColorSpaceRelease(colorSpace); 
```

然后将像素数据复制到这个tmpImage中，然后根据这个图像新建一个：

```
CGImageRef getCGImageRefFromRawData(FREBitmapData bitmapData) {
    CGImageRef abgrImageRef = tmpImage;
    CFDataRef abgrData = CGDataProviderCopyData(CGImageGetDataProvider(abgrImageRef));
    UInt8 *pixelData = (UInt8 *) CFDataGetBytePtr(abgrData);
    int length = CFDataGetLength(abgrData);

    uint32_t* input = bitmapData.bits32;
    int index2 = 0;
    for (int index = 0; index < length; index+= 4) {
            pixelData[index] = (input[index2]>>0) & 0xFF;
            pixelData[index+1] = (input[index2]>>8) & 0xFF;
            pixelData[index+2] = (input[index2]>>16) & 0xFF;
            pixelData[index+3] = (input[index2]>>24) & 0xFF;
            index2++;
    }

    // grab the bgra image info
    size_t width = CGImageGetWidth(abgrImageRef);
    size_t height = CGImageGetHeight(abgrImageRef);
    size_t bitsPerComponent = CGImageGetBitsPerComponent(abgrImageRef);
    size_t bitsPerPixel = CGImageGetBitsPerPixel(abgrImageRef);
    size_t bytesPerRow = CGImageGetBytesPerRow(abgrImageRef);
    CGColorSpaceRef colorspace = CGImageGetColorSpace(abgrImageRef);
    CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(abgrImageRef);

    // create the argb image
    CFDataRef argbData = CFDataCreate(NULL, pixelData, length);
    CGDataProviderRef provider = CGDataProviderCreateWithCFData(argbData);
    CGImageRef argbImageRef = CGImageCreate(width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorspace, bitmapInfo, provider, NULL, true, kCGRenderingIntentDefault);

    // release what we can
    CFRelease(abgrData);
    CFRelease(argbData);
    CGDataProviderRelease(provider);
return argbImageRef;
} 
```

# java - 从反向地理编码地址中提取“位置”详细信息。

> ID：13154437
> 
> 赞同：1
> 
> 时间：2012-10-31T09:05:35.243
> 
> 标签：java, android, android-location

我正在与 Location Manager 一起在我的应用程序中实现相同的功能，我想在一个人的物理位置周围显示咖啡店。根据手机显示的内容，我可以检索经纬度反向地理编码并在数组列表中获取位置。现在我对结果集中的“Locality”字段感兴趣。有什么建议我怎么得到？下面是我的代码。

```
 if(gps.canGetLocation()){

                     latitude = gps.getLatitude();
                     longitude = gps.getLongitude();
                     Geocoder myLocation = new Geocoder(getApplicationContext(), Locale.getDefault());   
                     try {
                        List<Address> myList = myLocation.getFromLocation(latitude, longitude, 1);

                        Toast.makeText(getApplicationContext(), ""+myList, Toast.LENGTH_LONG).show();
                         Iterator<Address> it = myList.iterator();

                            while (it.hasNext()) {

                                TextView tv = (TextView)findViewById(R.id.tv);
                                tv.setText("Data is"+it.next());

                            }

                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:28:12.243

我找到了！它是这样的：

```
 if (myList != null && myList.size() > 0) {
    Address address = myList.get(0);
    String result = address.getLocality();
    Toast.makeText(getApplicationContext(), ""+result, Toast.LENGTH_LONG).show();
                        } 
```

# javascript - 对象（这个）做什么？

> ID：13154442
> 
> 赞同：5
> 
> 时间：2012-10-31T09:06:19.817
> 
> 标签：javascript, object, constructor, shim

我注意到在几个 MDN 数组方法 shims 中，例如第 7 行的[这个](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)，它们使用以下语法：

```
var t = Object(this); 
```

`this`数组在哪里。它不仅没有在我的验证器中暗示，而且我也不知道它的作用。

任何人都可以发光吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:18:36.400

据我所知，它的唯一用途是在您将字符串文字传递给`Array.prototype.indexOf`. 如果你删除它并传入一个字符串，你会得到一个错误：

> TypeError：无法使用“in”运算符在字符串中搜索“0”

但是，通过将字符串文字转换为 的实例`String`，您最终会得到一个对象，该对象对字符串的每个字符都有一个数字属性，并且由于它是一个普通对象，您可以`in`在其上使用运算符，该方法将返回索引字符串中的字符：

```
Array.prototype.indexOf.call("hello", "e"); // Returns 1 
```

这是[一个带有强制转换的示例 to`Object`](http://jsfiddle.net/Q8WhH/1/)，这是[一个没有它的示例](http://jsfiddle.net/Q8WhH/2/)。

* * *

在更一般的情况下，将任何东西传递给`Object`构造函数都会尝试将该东西转换为对象。因此，您可以将字符串文字传递给它并获取`String`back 的实例，或者将数字文字传递给它并获取`Number`.

# javascript - 将toDataUrl base64字符串转成页面图片

> ID：13154443
> 
> 赞同：1
> 
> 时间：2012-10-31T09:06:20.147
> 
> 标签：javascript, jquery, canvas, html5-canvas

我创建了一个自定义产品配置器，并且正在使用 html2canvas 生成一个画布元素的 base64 编码字符串。

如果您访问： http: [//faithpointdallas.com/ecom/page/customStole](http://faithpointdallas.com/ecom/page/customStole)，您可以看到当您单击底部的“添加到购物车”时，它使用 html2canvas 脚本来提醒生成的 base64 编码字符串。

我的问题是：我怎样才能把那个 base64 编码的字符串变成一个常规的图像标签。像`<img src="myconvertedbase64string.PNG" />`

这是生成字符串的代码：

```
$('#addToCart').click(function(event) {
event.preventDefault();
var target = $('.customstole');
html2canvas(target, {
onrendered: function(canvas) {
    var data = canvas.toDataURL();
    alert(data);
    // data is the Base64-encoded image
} 
```

}); });

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:20:37.873

这可能会有所帮助 - 它使用 jQuery 将 base64 编码的 URL 发布到服务器，然后使用一些 PHP 将其保存到文件中：

[http://www.rgraph.net/docs/integration-with-server-side-scripting.html#image](http://www.rgraph.net/docs/integration-with-server-side-scripting.html#image)

另外，你知道你可以直接使用 toDataUrl() 返回的 data: url 作为标签 src 吗？

# android - 如何从来电中获取电话号码？

> ID：13154445
> 
> 赞同：20
> 
> 时间：2012-10-31T09:06:28.237
> 
> 标签：android, broadcastreceiver, telephony

Android有来电时如何获取电话号码？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-31T09:13:10.833

在`Broadcast receiver`Manifest`ServiceReceiver`中指定其动作。

```
<receiver android:name=".ServiceReceiver" >
    <intent-filter>
        <action android:name="android.intent.action.PHONE_STATE" />
    </intent-filter>
</receiver> 
```

添加一个`PhoneStateListener`到您的 TelephonyManager，PhoneStateListener 已覆盖`onCallStateChanged()`传入号码参数。就是这样。

**服务接收器.Java**

```
public class ServiceReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, Intent intent) {
        TelephonyManager telephony = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
        telephony.listen(new PhoneStateListener(){
            @Override
            public void onCallStateChanged(int state, String incomingNumber) {
                super.onCallStateChanged(state, incomingNumber);
                System.out.println("incomingNumber : "+incomingNumber);
            }
        },PhoneStateListener.LISTEN_CALL_STATE);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-23T05:18:56.803

以下解决方案帮助我检索传入和传出的电话号码。

**清单中要包含的内容**：

1) 许可：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS"/> 
```

2）广播接收器：

```
<receiver android:name=".AnswerCallBroadcastReceiver">
        <intent-filter> 
            <action android:name="android.intent.action.PHONE_STATE" />
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        </intent-filter>
</receiver> 
```

* * *

**BroadcastReceiver 类中要包含的内容**：

```
 public class AnswerCallBroadcastReceiver extends BroadcastReceiver {

        @Override
        public void onReceive(Context arg0, Intent arg1) {

            if(arg1.getAction().equals("android.intent.action.PHONE_STATE")){

                String state = arg1.getStringExtra(TelephonyManager.EXTRA_STATE);

                if(state.equals(TelephonyManager.EXTRA_STATE_OFFHOOK)){
                    Log.d(TAG, "Inside Extra state off hook");
                    String number = arg1.getStringExtra(TelephonyManager.EXTRA_PHONE_NUMBER);
                    Log.e(TAG, "outgoing number : " + number);              
                }       

                else if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)){   
                    Log.e(TAG, "Inside EXTRA_STATE_RINGING");
                    String number = arg1.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);
                    Log.e(TAG, "incoming number : " + number);
                }
                else if(state.equals(TelephonyManager.EXTRA_STATE_IDLE)){
                    Log.d(TAG, "Inside EXTRA_STATE_IDLE");
                }   
            }   
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T09:16:40.147

这肯定会对你有所帮助。

这是一个实现，如果它是作为来电号码的来电，以及当呼叫完成时，它允许您检索电话号码 - 请注意 Handler() 代码。

```
private class PhoneCallListener extends PhoneStateListener {

private boolean isPhoneCalling = false;

@Override
public void onCallStateChanged(int state, String incomingNumber) {

    if (TelephonyManager.CALL_STATE_RINGING == state) {
        // phone ringing
        Log.i(LOG_TAG, "RINGING, number: " + incomingNumber);
    }

    if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
        // active
        Log.i(LOG_TAG, "OFFHOOK");

        isPhoneCalling = true;
    }

    if (TelephonyManager.CALL_STATE_IDLE == state) {
        // run when class initial and phone call ended, need detect flag
        // from CALL_STATE_OFFHOOK
        Log.i(LOG_TAG, "IDLE number");

        if (isPhoneCalling) {

            Handler handler = new Handler();

            //Put in delay because call log is not updated immediately when state changed
            // The dialler takes a little bit of time to write to it 500ms seems to be enough
            handler.postDelayed(new Runnable() {

                @Override
                public void run() {
                    // get start of cursor
                      Log.i("CallLogDetailsActivity", "Getting Log activity...");
                        String[] projection = new String[]{Calls.NUMBER};
                        Cursor cur = getContentResolver().query(Calls.CONTENT_URI, projection, null, null, Calls.DATE +" desc");
                        cur.moveToFirst();
                        String lastCallnumber = cur.getString(0);
                }
            },500);

            isPhoneCalling = false;
        }

    }
} 
```

然后在 onCreate 或 onStartCommand 代码中添加并初始化监听器：

```
 PhoneCallListener phoneListener = new PhoneCallListener();
TelephonyManager telephonyManager = (TelephonyManager) this
        .getSystemService(Context.TELEPHONY_SERVICE);
telephonyManager.listen(phoneListener,
        PhoneStateListener.LISTEN_CALL_STATE); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T09:15:11.093

你可以在[这里找到解决方案](https://stackoverflow.com/questions/1853220/retrieve-incoming-calls-phone-number-in-android)

```
Bundle bundle = intent.getExtras();
String phoneNr= bundle.getString("incoming_number"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-21T08:45:06.890

上面的答案是正确的，但是，不要忘记权限
`<uses-permission android:name="android.permission.READ_PHONE_STATE" />`

`Android 9`注意，要读取来电号码的起始表格，您必须请求此权限
`<uses-permission android:name="android.permission.READ_CALL_LOG" />`

# templates - knockoutjs - 自定义模板与父内容绑定

> ID：13154448
> 
> 赞同：2
> 
> 时间：2012-10-31T09:06:32.513
> 
> 标签：templates, knockout.js

我在使用带有自定义模板绑定的 knockoutjs 时遇到问题。

假设我有一个这样的 HTML 正文：

```
<div id="1">
    <div data-bind="template:{name: '2', data: data}"></div>
</div>

<div id="2">
    <h3 data-bind="text: caption"></h3>
</div> 
```

JS 代码如下所示：

```
var ViewModel2 = function () {
    this.caption = ko.observable("Caption");
}

var ViewModel1 = function () {
    this.data = new ViewModel2();
}

ko.applyBindings(new ViewModel1(), document.getElementById("1")); 
```

如果我们测试这段代码，一切都会正常工作；
请参阅 JSFiddle 示例：http: [//jsfiddle.net/4eTWW/33/](http://jsfiddle.net/4eTWW/33/)

现在假设我们要进行自定义模板绑定。我们将使用“templatex”绑定而不是“template”。

在 HTML 中，我们只需要更改一行：

```
<div data-bind="templatex:{name: '2', data: data}"></div> 
```

接下来，让我们为 JS 添加自定义模板绑定：

```
/*Custom binding*/
ko.bindingHandlers.templatex = {
   init: function (element) {
       ko.bindingHandlers.template.init.apply(this, arguments);
   },

   update: ko.bindingHandlers.template.update
} 
```

见：http: [//jsfiddle.net/4eTWW/35/](http://jsfiddle.net/4eTWW/35/)

但在这种情况下，我们有一个错误，说它在模型中找不到“标题”。

现在让我们将模板 {} 添加到 html 绑定：

```
<div data-bind="template: {}, templatex:{name: '2', data: data}"></div> 
```

见：http: [//jsfiddle.net/4eTWW/36/](http://jsfiddle.net/4eTWW/36/)

现在一切正常。

似乎在绑定父 div 时，它无法确定子 div 是模板。

那么如何在我的自定义模板活页夹中将其标记为模板呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:23:39.887

您有错误的更新处理程序，更改为：

```
ko.bindingHandlers.templatex= {
    init: function(element) {
        // do things
        return ko.bindingHandlers.template.init.apply(this, arguments);
    },

    update: function(element) {
        return ko.bindingHandlers.template.update.apply(this, arguments);
    }
} 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/4eTWW/39/](http://jsfiddle.net/vyshniakov/4eTWW/39/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:21:35.927

我认为您不能使用自定义绑定来创建新的模板引擎。您需要使用 注册您的自定义引擎`ko.setTemplateEngine()`。

从 knockoutjs 来源：

```
If you want to make a custom template engine,

[1] Inherit from the ko.templateEngine class (like ko.nativeTemplateEngine does)
[2] Override 'renderTemplateSource', supplying a function with this signature:

       function (templateSource, bindingContext, options) {
           // - templateSource.text() is the text of the template you should render
           // - bindingContext.$data is the data you should pass into the template
           //   - you might also want to make bindingContext.$parent, bindingContext.$parents,
           //     and bindingContext.$root available in the template too
           // - options gives you access to any other properties set on "data-bind: { template: options }"
           //
           // Return value: an array of DOM nodes
       }

[3] Override 'createJavaScriptEvaluatorBlock', supplying a function with this signature:

       function (script) {
           // Return value: Whatever syntax means "Evaluate the JavaScript statement 'script' and output the result"
           //               For example, the jquery.tmpl template engine converts 'someScript' to '${ someScript }'
       }

    This is only necessary if you want to allow data-bind attributes to reference arbitrary template variables.
    If you don't want to allow that, you can set the property 'allowTemplateRewriting' to false (like ko.nativeTemplateEngine does)
    and then you don't need to override 'createJavaScriptEvaluatorBlock'. 
```

示例： http: [//jsfiddle.net/6pStz/ （参见](http://jsfiddle.net/6pStz/)[本页](http://knockoutjs.com/documentation/template-binding.html)注释 7 ）

# java - 通用编程与通用对象类型

> ID：13154450
> 
> 赞同：0
> 
> 时间：2012-10-31T09:06:36.947
> 
> 标签：java, generics, object

我想知道在使用 Java 泛型编程实现类和将类型保持为通用 Object 类之间是否有任何显着的优点/缺点？也许下面的代码澄清了我在寻找什么？

第一个代码显示了使用通用 Object 类类型来实现列表：

```
public class myList {
private static int DEFAULT_CAPACITY = 16;
private int size, capacity;
private Object[] dataArray;

myList(){
    this(DEFAULT_CAPACITY); 
}
myList(int defaultSize){
    capacity = defaultSize;
    size = 0;
    dataArray =new Object[defaultSize];
}
public int getSize(){return size;}
public void insert(int loc, Object o){
    if (size+1 <= capacity){
        for (int i=size; i> loc-1; i--)
            dataArray[i] = dataArray[i-1];
        dataArray[loc-1] = o;
        size++;
    }
}
public Object getItem(int loc){
    return dataArray[loc-1];
}
} 
```

以下代码显示了使用 Java 泛型编程的相同功能：

```
public class MyList<E> {
private int size = 0;
private static final int DEFAULT_CAPACITY = 10;
private Object dataArray[];

public MyList() {
   dataArray = new Object[DEFAULT_CAPACITY];
}

public void insert(int loc, E e) {
if (size+1 <= capacity){
   for (int i=size; i> loc-1; i--)
    dataArray[i] = dataArray[i-1];
   dataArray[loc-1] = e;
   size++;
}
}
public E get(int loc) {
   return (E) elements[loc-1];
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:10:33.640

该`Generic`方法的优点是：
假设您创建了一个`Integer`.
使用这种方法，如果您尝试将其他内容放入列表中，您将在*编译时*`Generic`收到错误消息。 使用这种方法，直到*运行时*才会看到此错误，这是真正难以发现的错误的秘诀。 *`Object`*

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:13:13.370

首先，您的 generic`MyList<E>`的 dataArray 应该是通用的。

```
class MyList<E> {
     private E dataArray[];
     public MyList(Class<E> c,int size) {
         dataArray  = (E[]) Array.newInstance(c,size);
    }
 } 
```

优势 - 您的列表本质上将是类型安全的，这意味着在一般对象类型中，您可以添加任何类型，当您进行排序等操作时可能会导致问题......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:19:04.190

让我为你打破这个......

**-** `Generics`可以实现到类、接口、方法、字段，但它**最重要的用途**是使`Collection` **类型安全**。

**-**这就是`Collections`在 Java 中进行类型安全的方式，因此**错误的类型不会进入 Collection**，因为集合**仅**在`Compilation`时间检查而**不是**在`Runtime`..期间检查，**即**Cat 对象不应进入类型的 Collection狗。

**-**有一个过程称为，编译器在**编译**`Erasure`期间从泛型类中删除类型参数和类型参数，使其在**运行时**成为原始类型，以保持与编写的代码的向后兼容性没有泛型。

 ******例如：**

`Box<String>` **变成** `Box`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T09:48:12.367

重要的关键词是“按合同设计”。泛型允许您在编译之前验证“此列表中的元素具有这种类型”的合同——您所需要的只是抽象语法树。类型验证是 imo 强类型语言的主要优势。

它还使代码完成和重构更容易。******

# android - 如何使用自定义键编写 MifareClassic

> ID：13154452
> 
> 赞同：2
> 
> 时间：2012-10-31T09:06:49.750
> 
> 标签：android, nfc, mifare

我需要找到一种解决方案来使用自定义密钥编写 Mifare Classic 1 K 标签。我无法编写它，我尝试了所有选项，但不幸的是我一直收到错误“IOException：Transceive Failed”。

下面是我的代码片段：

```
byte custom_key[]={
  (byte)0xff,(byte)0xff,(byte)0xff,(byte)0xff,(byte)0xff,(byte)0xff
};

// 16 bytes of Data. Otherwise it was throwing IllegalArgumentException .
byte[] data="Hello world of N".getBytes();
getMfc().connect();

if(getMfc().authenticateSectorWithKeyA(4, custom_key)) {
  getMfc().writeBlock(3, data); // Here I receive IOException all the time.
} else {
  getMfc().close();
} 
```

请在这方面帮助我。我需要用自己的密钥编写 Mifare Classic 1 K Tag。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T10:00:25.133

您对扇区 4 进行身份验证，然后尝试写入块 3。块 3 在扇区 0 中，因此这将始终失败。请尝试对扇区 0 进行身份验证。

**顺便说一句：**请不要将随机数据写入扇区尾部（例如块 3）。它可能会锁定该行业而无法恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T08:17:08.520

如果我理解正确，问题是如何编辑扇区 4
中的块 3。身份验证后，您尝试写入块 3。但是：
块编号不是在每个块中从 0 开始。扇区 0 具有块 0-3，扇区 1 具有块 4-7，依此类推。扇区 4 的块偏移量为 4*4=16。所以你要写入的块是块 19。

有一个函数可以为您计算这个偏移量。ectorToBlock(4) 产生 16。
对于写入扇区 4 中的块 3，我将使用以下命令：
getMfc().writeBlock(getMfc().sectorToBlock(4)+3, data)

接受的答案仅提供了使提问者无法理解扇区 0 以外的块索引的替代方案。

# vb.net - VB.NET 用户控件缓冲图形

> ID：13154453
> 
> 赞同：0
> 
> 时间：2012-10-31T09:06:58.050
> 
> 标签：vb.net, graphics, doublebuffered, double-buffering

我想创建一个具有缓冲图形的基本用户控件。但是有些不对劲，它停在 Using gr As Graphics = Graphics.FromImage(m_Buffer) 这一行

我什至设法使 VS2010 崩溃。这就是为什么我怀疑我引入了一些错误。我从示例代码中复制了大部分部分，我猜至少 OnPaint 从未被调用，因为它不是我可以在设计器中选择的事件之一。

非常感谢你的帮助！

```
Public Class UserControl1

Private m_Buffer As Bitmap

Protected Overrides Sub OnPaint(ByVal e As System.Windows.Forms.PaintEventArgs)

    e.Graphics.DrawImage(m_Buffer, Point.Empty)
    'MyBase.OnPaint(e)'what is this for?

End Sub
Public Sub PaintSomething()

    Using gr As Graphics = Graphics.FromImage(m_Buffer)
        gr.FillEllipse(New SolidBrush(Color.Blue), 0, 0, 100, 100)
    End Using

    Me.Invalidate()

End Sub
Public Sub New()

    InitializeComponent()

    Me.SetStyle(ControlStyles.UserPaint Or ControlStyles.AllPaintingInWmPaint Or ControlStyles.DoubleBuffer, True)
    Me.UpdateStyles()

End Sub

Private Sub UserControl1_Resize(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Resize

    m_Buffer = New Bitmap(Me.ClientSize.Width, Me.ClientSize.Height, System.Drawing.Imaging.PixelFormat.Format32bppPArgb)

End Sub 
```

结束类

# c#-4.0 - 如何计算谷歌地图圆半径js到C#

> ID：13154459
> 
> 赞同：4
> 
> 时间：2012-10-31T09:07:32.697
> 
> 标签：c#-4.0, google-maps-api-3

我知道如何使用 javascript 通过以下代码计算半径

```
var center = new google.maps.LatLng(3.2987599, 102.6872022);
var latLng = new google.maps.LatLng(3.0987599, 101.6872022);
var distanceInMetres = google.maps.geometry.spherical.computeDistanceBetween(center, latLng); 
```

但是如何将 google.maps.geometry.spherical.computeDistanceBetween 转换为 C# 函数呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:23:13.633

2点之间的距离：（lat1，lon1）到（lat2，lon2）

```
distance = acos(
     cos(lat1 * (PI()/180)) *
     cos(lon1 * (PI()/180)) *
     cos(lat2 * (PI()/180)) *
     cos(lon2 * (PI()/180))
     +
     cos(lat1 * (PI()/180)) *
     sin(lon1 * (PI()/180)) *
     cos(lat2 * (PI()/180)) *
     sin(lon2 * (PI()/180))
     +
     sin(lat1 * (PI()/180)) *
     sin(lat2 * (PI()/180))
    ) * 3959 
```

* * *

3959 是以英里为单位的地球半径。将此值替换为以 KM 为单位的半径（或任何其他单位），以获得相同单位的结果。

[**您可以通过与此工作示例**](http://en.wikipedia.org/wiki/Great-circle_distance#Worked_example)进行比较来验证您的实现：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:49:43.520

我已经编写了 C# 解决方案来计算要转换的距离

var distanceInMetres = google.maps.geometry.spherical.computeDistanceBetween(center, latLng);

进入 C#。下面是我使用的代码。6371是地球的半径。

```
 //Calculate distance earth between 2 coordinate point
    double e = lat * (Math.PI / 180);
    double f = lng * (Math.PI / 180);
    double g = lat2 * (Math.PI / 180);
    double h = lng2 * (Math.PI / 180);
    double i =
        (Math.Cos(e) * Math.Cos(g) * Math.Cos(f) * Math.Cos(h)
        + Math.Cos(e) * Math.Sin(f) * Math.Cos(g) * Math.Sin(h)
        + Math.Sin(e) * Math.Sin(g));
    double j = Math.Acos(i);
    double k = (6371 * j);  //Distance in KM 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:16:06.833

2个纬度/经度点之间的距离可以用haversine公式计算，这里描述了[http://en.wikipedia.org/wiki/Haversine_formula](http://en.wikipedia.org/wiki/Haversine_formula)

在stackoverflow上还有另一个问题或多或少相同的问题：[计算两个经纬度点之间的距离？（Haversine 公式）](https://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points)

# generic-programming - 如何在 Kotlin 中检查泛型类型

> ID：13154463
> 
> 赞同：96
> 
> 时间：2012-10-31T09:07:47.227
> 
> 标签：generic-programming, kotlin

我正在尝试在 Kotlin 中测试泛型类型。

```
if (value is Map<String, Any>) { ... } 
```

但是编译器抱怨

> 无法检查擦除类型的实例：jet.Map

普通类型的检查效果很好。

```
if (value is String) { ... } 
```

使用 Kotlin 0.4.68。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-10-31T20:08:50.147

问题是类型参数被删除了，所以你不能检查完整的类型 Map，因为在运行时没有关于这些 String 和 Any 的信息。

要解决此问题，请使用通配符：

```
if (value is Map<*, *>) {...} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2019-11-01T10:14:29.247

我认为这是更合适的方式

```
inline fun <reified T> tryCast(instance: Any?, block: T.() -> Unit) {
    if (instance is T) {
        block(instance)
    }
} 
```

用法

```
// myVar is nullable
tryCast<MyType>(myVar) {
    // todo with this e.g.
    this.canDoSomething()
} 
```

**另一种更短的方法**

```
inline fun <reified T> Any?.tryCast(block: T.() -> Unit) {
    if (this is T) {
        block()
    }
} 
```

用法

```
// myVar is nullable
myVar.tryCast<MyType> {
    // todo with this e.g.
    this.canDoSomething()
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2019-01-16T14:16:38.103

JVM 删除了泛型类型信息。但是 Kotlin 已经具体化了泛型。如果你有一个泛型类型 T，你可以将内联函数的类型参数 T 标记为 reified，以便它能够在运行时检查它。

所以你可以这样做：

```
inline fun <reified T> checkType(obj: Object, contract: T) {
  if (obj is T) {
    // object implements the contract type T
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-24T13:49:52.820

我会给出一个解决方案，但我认为它很干净，有点

```
try{
  (value as Map<String,Any>?)?.let { castedValue ->
     doYourStuffHere() //using castedValue
  }
}catch(e: Exception){
  valueIsNotOfType() //Map<String,Any>
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-12-18T17:58:50.190

我已经尝试过上面的解决方案，`tryCast<Array<String?>>`而且我想，在我列出涉及许多铸件的具体任务中，这并不是一个好主意，因为它大大降低了性能。

这是我最后做的解决方案 - 手动检查条目和调用方法，如下所示：

```
 fun foo() {
    val map: Map<String?, Any?> = mapOf()
    map.forEach { entry ->
        when (entry.value) {
            is String -> {
                doSomeWork(entry.key, entry.value as String)
            }
            is Array<*> -> {
                doSomeWork(entry.key, (entry.value as? Array<*>)?.map {
                    if (it is String) {
                        it
                    } else null
                }?.toList())
            }
        }
    }
}

private fun doSomeWork(key: String?, value: String) {

}
private fun doSomeWork(key: String?, values: List<String?>?) {

} 
```

# iis-7 - 我的godaddy托管果园网站被抛出ig页面无法显示，因为发生了内部服务器错误

> ID：13154465
> 
> 赞同：3
> 
> 时间：2012-10-31T09:08:04.467
> 
> 标签：iis-7, orchardcms, web-hosting

我的 Godaddy 托管果园网站正在抛出：“页面无法显示，因为发生了内部服务器错误”

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-04T22:11:27.423

我收到了相同的错误消息，但我没有运行 Orchard。我已将 ASP.NET 4.5 站点从托管的 Rackspace 服务器移动到 GoDaddy。我发现问题与web.config中的一个标签有关；与此类似：

```
<system.webServer>
    <staticContent>
        <mimeMap fileExtension=".woff" mimeType="application/x-woff" />
    </staticContent>
</system.webServer> 
```

删除标签后，我不再收到错误消息。由于此应用程序是由其他人构建的，因此不确定我是否需要弄清楚如何重新插入标签。

希望这可以帮助其他通过谷歌搜索偶然发现这个问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:38:54.310

简短的回答，检查您正在加载 Orchard 的 .NET 版本。如果您使用 v1.6，那么您需要 .NET 4.0。

当我将 .Net 2.0 网站更新到 Orchard 时，这发生在我身上。客户使用的托管公司是共享托管，我所有的测试环境都可以正常运行该站点。直到我让客户询问托管公司他们使用的是什么版本，一分钱才掉了下来。如果您使用 SqlCE，还要检查您对 App_Data 文件夹的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:58:35.617

这可能是 App_Data 文件夹的权限设置造成的。您可能需要授予对该文件夹的写入权限。

# java - 将文件读入 CharBuffer，然后 StringBuilder 或 StringBuffer 似乎遗漏了文件的某些部分。为什么？

> ID：13154468
> 
> 赞同：2
> 
> 时间：2012-10-31T09:08:08.023
> 
> 标签：java

下面的代码似乎只写了StringBuilder中文件的一小部分——为什么？

```
 Reader rdr = new BufferedReader(new InputStreamReader(new FileInputStream(...)));
    StringBuilder buf = new StringBuilder();
    CharBuffer cbuff = CharBuffer.allocate(1024);
    while(rdr.read(cbuff) != -1){
        buf.append(cbuff);
        cbuff.clear();
    }
    rdr.close(); 
```

更多信息：该文件比 CharBuffer 大，我也可以从调试器中看到 charbuffer 确实按预期填充。唯一进入 StringBuilder 的部分似乎来自文件中间的某个地方。我正在使用openJDK7。我想知道为什么它会表现出这样的行为以及如何解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T09:49:12.770

正如 Peter Lawrey 所说，您需要`cbuff.flip()`在读写之间调用。似乎 append 将从缓冲区的位置读取，**如果**我们不调用`cbuff.flip()`. 仍然写入中间某处的一部分的原因是，最终缓冲区不会被完全填满，因此一些“旧”字节仍将位于缓冲区中的位置和缓冲区的末尾之间。

谜团已揭开 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:17:22.360

自 1.0 以来，所有这些类都已成为 JDK 的一部分。我怀疑其中任何一个都需要修复。

对于通常的习惯用法，您的代码还有很长的路要走。这是为了作为一种学习练习，一个出了差错？还是您真的想将其放入应用程序中？

以下是我希望看到使用这些类的方式：

```
public static final String NEWLINE = System.getProperty("line.separator");

public String readContents(File f) throws IOException {
    StringBuilder builder = new StringBuilder(1024);
    BufferedReader br = null;
    try {
        br = new BufferedReader(new FileReader(f));
        String line;
        while ((line = br.readLine()) != null) {
            builder.append(line).append(NEWLINE);
        }
    } finally { 
        closeQuietly(br);
    }
    return builder.toString();
} 
```

# android - Android：媒体播放器发布和空问题？

> ID：13154469
> 
> 赞同：2
> 
> 时间：2012-10-31T09:08:31.363
> 
> 标签：android

我有一个声音片段，只需单击一个按钮（2 秒）即可播放。完成后，我调用了一项新活动并发布了媒体播放器。

但是我的应用程序崩溃了。

我的代码

```
final ImageButton TtriangleButton=(ImageButton)findViewById(R.id.triangleTriangle);
    TtriangleButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            /* Code for playing the "Very Good" sound */    
            final MediaPlayer mediaPlayer = MediaPlayer.create(shapeTriangleActivity.this, R.raw.applause);
            mediaPlayer.start();

            mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer mp) {

                    Intent myintent1 = new Intent(shapeTriangleActivity.this,LearningTimeMenu.class);
                    myintent1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(myintent1);
                    mediaPlayer.release();

                }});
        }}); 
```

我遇到的另一个问题是，在发布时，我也尝试添加 NULL mediaPlayer = null; - 但我得到一个编译错误，例如“无法分配最终的局部变量 mediaPlayer，因为它是在封闭类型中定义的”。

我坚持这一点。需要帮忙。

更新了错误日志

10-31 14:54:45.800: E/AndroidRuntime(859): android.content.res.Resources$NotFoundException: 资源 ID #0x7f040006

我的文件也是 .wav 文件。我注意到 .mp3 文件没有这个问题，即使它们的文件大小相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:18:50.830

在开始这样的新活动之前释放媒体播放器::

```
mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer mp) {
                mediaPlayer.release();
                Intent myintent1 = new Intent(shapeTriangleActivity.this,LearningTimeMenu.class);
                myintent1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(myintent1);

            }}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T09:34:21.720

试试这个方法......

**-**你应该`release`它，然后在播放`null` **完成后分配。**

**-**当您想播放另一种声音时，再次`initialize`使用**媒体播放器。**

```
 mPlayer.start();
 mPlayer.setOnCompletionListener(new OnCompletionListener() {

 @Override
public void onCompletion(MediaPlayer mp) {

             mPlayer.release();  // 
             mPlayer = null;

        }
}); 
```

**-**如果您只播放 2 秒的声音片段，请使用它`SoundPool`来执行此操作，因为`SoundPool`适合**这些声音片段......**

**以下是一些限制** `SoundPool`**：**

**-**声音文件不应**超过**1 MB。

**-**最好的结果是通过`.wav`声音文件获得的，它甚至可以`.mp3, .mp4, .m4a`

**-**请选择`bitrate`128kb/sec 和 22050KHz `sampling rate`，完整播放声音片段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:53:43.073

首先 `stop` 是媒体播放器，然后`release`是它。

# c# - 从自动回发的下拉列表中动态加载特定的用户控件

> ID：13154470
> 
> 赞同：2
> 
> 时间：2012-10-31T09:08:33.647
> 
> 标签：c#, asp.net, user-controls, autopostback

我有一个带有下拉控件的 asp.net 网页，如下所示：

```
<asp:DropDownList ID="TypeDrp" runat="server" 
        OnSelectedIndexChanged="LoadCorrectForm" AutoPostBack="True">
    <asp:ListItem>X</asp:ListItem>
    <asp:ListItem>Y</asp:ListItem>
    <asp:ListItem>Z</asp:ListItem>
    </asp:DropDownList>

    <br />

    <asp:PlaceHolder ID="PlaceHolder1" runat="server">

    </asp:PlaceHolder> 
```

我想在回发后动态加载 placeholder1 中的控件。它们位于名为“myControls”的文件夹中，如下所示：

```
XTypeForm.ascx
YTypeForm.ascx
ZTypeForm.ascx 
```

我应该如何正确调用和使用它们？有人告诉我这样使用：

```
protected void LoadCorrectForm(object sender, EventArgs e)
{
    string SelectedValue = TypeDrp.SelectedItem.ToString();
    Control userControl = GetSpecificUserControl(SelectedValue);
    PlaceHolder1.Controls.Clear();   // Remove old user control
    PlaceHolder1.Controls.Add(userControl);
} 
```

但它有错误，我不知道如何为我自己的代码更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:51:51.177

我不确定它会起作用，但你可以这样尝试

```
string SelectedValue = "foldername/"+TypeDrp.SelectedValue.ToString();
var lobjucModelTabs = (SelectedValue)LoadControl("~/yourfolder/"+SelectedValue);
PlaceHolder1.Controls.Clear();
PlaceHolder1.Controls.Add(lobjucModelTabs ); 
```

如果它不起作用，
那么您将不得不使用 switch 语句。

```
 string filename = TypeDrp.SelectedValue;
        UserControl userControl;
        switch (filename)
        {
            case "XTypeForm.ascx":
                UserControl ctrl = (XTypeForm)LoadControl("NewFolder1/XTypeForm.ascx");
                PlaceHolder1.Controls.Clear();
                PlaceHolder1.Controls.Add(ctrl);
                break;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:18:13.530

放在

```
<asp:DropDownList ID="TypeDrp" runat="server" 
    OnSelectedIndexChanged="LoadCorrectForm" AutoPostBack="True">
<asp:ListItem Value="XTypeForm.ascx">X</asp:ListItem>
<asp:ListItem Value="YTypeForm.ascx">Y</asp:ListItem>
<asp:ListItem Value="ZTypeForm.ascx" >Z</asp:ListItem>
</asp:DropDownList> 
```

然后使用

> 字符串 SelectedValue = TypeDrp.SelectedValue.ToString();

它会起作用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:15:28.410

To load an ascx user control, use some code like this:

```
if(!Page.IsPostBack) 
{ 
   WebUserControl1 uc = 
   (WebUserControl1) Page.LoadControl("WebUserControl1.ascx"); 
   PlaceHolder1.Controls.Add(uc); 
} 
```

# java - 修补新版本的 maven artifact jar

> ID：13154471
> 
> 赞同：0
> 
> 时间：2012-10-31T09:08:50.517
> 
> 标签：java, groovy, jar, copy

我有一只耳朵，里面装着一些罐子，

```
e.g. 
Sample.ear\WEB-INF\lib\org.apache.sling.installer.core-3.3.5-R1242752.jar
Sample.ear\WEB-INF\lib\org.apache.sling.installer.factory.configuration-1.0.2.jar
Sample.ear\WEB-INF\lib\cq-jcrclustersupport-0.1.6.jar
Sample.ear\WEB-INF\lib\com.day.jcr.vault-2.3.24.jar 
```

现在假设我得到一个包含以下 jar 的新 Hotfix.zip，

```
Hotfix.zip\lib\org.apache.sling.installer.core-3.4.6-R12345.jar
Hotfiz.zip\lib\org.apache.sling.installer.factory.configuration-2.1.4.jar
Hotfiz.zip\lib\cq-jcrclustersupport-5.6.7.jar 
```

**任务**- 用新罐子修补耳朵。

到目前为止，我已经尝试了以下方法，

1.  将 Ear 解压缩到 X 位置
2.  将修补程序解压缩到位置 Y。
3.  将 Hotfix 的内容复制到 Ear。
4.  把耳朵拉回来。

**问题**- 我被困在第 3 点。我想要一些方法来找出旧版本的 jar 是否已经存在，然后删除它并复制新的。

**解决方案**- 我使用 Groovy 是因为它为我提供了 AntBuilder() 的解压缩和复制任务。但是在 Java 方面的任何帮助也会有所帮助。

**思考**- 我正在努力思考正则表达式，但无法找到解决方案。

**注意**- 请不要进入罐子的细节，而只是名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:39:26.397

这是一种快速而肮脏的方法......

让我们从一个类开始定义一个库：

```
class LibVersion implements Comparable {
  String filename
  String library
  String version

  // Just compare the String versions.
  // This is naïve, and should probably be improved
  int compareTo( Object other ) {
    version <=> other.version
  }

  String toString() {
    "$library: $version"
  }

  static fromFilename( String s ) {
    def matcher = ( s =~ $/.+/(.+?)-([0-9\.]+(?:-.+?){0,1})\.jar/$ )[0]
    new LibVersion( filename: s, library: matcher[ 1 ], version: matcher[ 2 ] )
  }
} 
```

然后，给定一些测试数据：

```
def originals = [
  'Sample.ear/WEB-INF/lib/org.apache.sling.installer.core-3.3.5-R1242752.jar',
  'Sample.ear/WEB-INF/lib/org.apache.sling.installer.factory.configuration-1.0.2.jar',
  'Sample.ear/WEB-INF/lib/cq-jcrclustersupport-0.1.6.jar',
  'Sample.ear/WEB-INF/lib/com.day.jcr.vault-2.3.24.jar',
]

def replacements = [
  'Hotfix.zip/lib/org.apache.sling.installer.core-3.2.6-R12345.jar',
  'Hotfiz.zip/lib/org.apache.sling.installer.factory.configuration-2.1.4.jar',
  'Hotfiz.zip/lib/cq-jcrclustersupport-5.6.7.jar',
] 
```

我们可以生成原始库的映射，并对替换执行相同的操作：

```
Map<String,LibVersion> originalVersions = originals.collectEntries {
  LibVersion.fromFilename( it ).with { v ->
    [ (v.library):v ]
  }
}

Map<String,LibVersion> replacementVersions = replacements.collectEntries {
  LibVersion.fromFilename( it ).with { v ->
    [ (v.library):v ]
  }
} 
```

然后，我们可以循环遍历替换文件并打印出文件是新文件（在原始地图中找不到）或替换版本大于原始文件

```
replacementVersions.each { k, v ->
  def orig = originalVersions[ k ]
  if( !orig || orig < v ) {
    println "Should replace $orig with $v"
  }
} 
```

这打印：

```
Should replace org.apache.sling.installer.factory.configuration: 1.0.2 with org.apache.sling.installer.factory.configuration: 2.1.4
Should replace cq-jcrclustersupport: 0.1.6 with cq-jcrclustersupport: 5.6.7 
```

# php - 使用php获取表单字段的ID

> ID：13154472
> 
> 赞同：0
> 
> 时间：2012-10-31T09:08:53.957
> 
> 标签：php, forms

我有一个表格，里面有一个 optgroup。除了从不同的选项中获取值之外，我还需要从一些字段中获取一个 ID 并将其传递到执行所有提交的脚本中。

我需要能够将值为 1 和 13 的 ID 传递到脚本中

我真的很难做到这一点，所以我希望有人可以帮助我。

谢谢

```
<optgroup>
  <option value="202" id="13">test value 1</option>
  <option value="202" id="1">test value 2</option>
</optgroup> 
```

附加信息：

该表单用于将值传递到预订系统的可用性检查器。

value="202" 是父度假村，id="13" 和 id="1" 是子度假村

我没有以字符串的形式将这两个值都传递到系统中。主要撤退 id 需要作为 202 传递，然后我需要传递子度假村 id 以选择该特定子组中的属性

在一个理想的世界中，两个子度假村将被赋予他们自己的唯一 ID，但由于系统的限制，这是不可能的，所以我需要为每个子度假村获取一个 ID 并通过这个

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:39:26.357

在您的表单页面中，您需要以下内容：

```
<select name="selectTest" id="selectTest">
<optgroup>
  <option value="201">Description 1</option>
  <option value="202">Description 2</option>
</optgroup>
</select> 
```

在您的操作页面中，您可以将值设为：

```
echo $_REQUEST[selectTest]; 
```

我不清楚提交表格后您将如何处理 ids..??

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:42:52.347

试试这个：

```
<select name="form">
<optgroup>
  <option value="201" id="13" name="13">Description 1</option>
  <option value="202" id="1" name="1">Description 2</option>
</optgroup>
</select>

<?php 
if (isset($_POST))
     var_dump($_POST);
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T09:12:14.010

你的 optgroup 在`<select>`我猜？

```
<optgroup>
  <option value="202-13" id="13">test value 1</option>
  <option value="202-1" id="1">test value 2</option>
</optgroup> 
```

?

# xslt - 如何使用 xsl 操作包含 xml 的变量

> ID：13154474
> 
> 赞同：0
> 
> 时间：2012-10-31T09:09:03.387
> 
> 标签：xslt, xslt-1.0

我对包含 xml 的 xsl 变量有要求。

```
<xsl:variable name="file" select="document('abc.xml')"/> 
```

abc.xml 只不过是一些示例 xml`<a>1<b>2</b>3</a>`

现在我必须修改/添加变量 $file 的元素并将结果分配给另一个变量..

我的输入将是

```
<Service name="CBI" detailedLog="false">
    <PolicyRules type="default">
        <EndPoints>
            <EndPoint source="Src" target="ET" serviceoperation="AV01">
                <Url>http://firstbackend.com</Url>
            </EndPoint>
            <EndPoint source="Src" target="ET" serviceoperation="PV01">
                <Url>http://secondbackend</Url>
            </EndPoint>
        </EndPoints>
    </PolicyRules>
</Service> 
```

我必须与 $file 一起获取标签..我需要以下输出..

```
<a>1<b>2</b>
<Url>http://firstbackend.com</Url>
<Url>http://secondbackend</Url>
3</a> 
```

谁能帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:13:03.717

将主输入文档存储到全局变量中，例如

```
<xsl:variable name="main-doc" select="/"/> 
```

然后为要转换的元素编写一个模板，例如

```
<xsl:template match="a">
  <xsl:copy>
    <xsl:copy-of select="b | b/preceding-sibling::node()"/>
    <xsl:copy-of select="$main-doc//Url"/>
    <xsl:copy-of select="b/following-sibling::node()"/>
  </xsl:copy>
</xsl:template> 
```

然后应用模板并存储在变量中（如果需要），例如

```
<xsl:variable name="rtf1">
  <xsl:apply-templates select="$file/node()"/>
</xsl:variable> 
```

然后使用该变量输出结果，例如

```
 <xsl:template match="/">
    <xsl:copy-of select="$rtf1"/>
  </xsl:template> 
```

# symfony - 树枝扩展的树枝文件路径

> ID：13154477
> 
> 赞同：1
> 
> 时间：2012-10-31T09:09:11.297
> 
> 标签：symfony, twig, extends

有两个树枝文件**src/MyVendor/MyBundle/Resources/views/MyApp/layout.html.twig**和**src/MyVendor/MyBundle/Resources/views/MyApp/myView.html.twig**。

**src/MyVendor/MyBundle/Resources/views/MyApp/myView.html.twig**的内容

 **```
{% extends "layout.html.twig" %}
{% block content %}
   view content is here.
{% endblock %} 
```

但我收到一个错误

```
Unable to find template "layout.html.twig" in
"MyVendorMyBundle:MyApp:myView.html.twig" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T09:11:59.910

你应该这样做：

```
{% extends "MyVendorMyBundle:MyApp:layout.html.twig" %} 
```

[您可以在文档](http://symfony.com/doc/2.1/book/templating.html#including-other-templates)中找到更多详细信息**

# sql - 如何使 2 个查询使用 2 个 CPU

> ID：13154480
> 
> 赞同：2
> 
> 时间：2012-10-31T09:09:17.873
> 
> 标签：sql, parallel-processing, sql-server-2008, sqlperformance

我有以下形状的查询：

```
A
UNION ALL
B
UNION ALL
C
UNION ALL
D 
```

并希望通过并行调用 A、B、C 和 D 来并行化它，然后在 .Net 中合并它们。**这 4 个查询都在同一个**表池中读取数据。

我尝试的第一步是在 SSMS 的一个选项卡中执行 A，在第二个选项卡中执行 B。A 和 B 各持续约 1 分钟，所以我有时间启动 A，然后转到选项卡 B 并启动它。

但是当我查看 CPU 使用率时，它停滞在 13%（我在 8 核 CPU @ Windows 上），这对应于一个内核的 100%。

我的问题：-“锁定”机制是否允许对给定表集的两个查询并行运行？- 如果并行性是可能的，我会通过尝试在两个 SSMS 选项卡中并行运行 A 和 B 来注意到它，还是我的测试有缺陷？- 最终如何提高 UNION ALL 系列的性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:42:40.477

你根本不强制并行。引擎根据查询成本决定

了解[如何在 sql server 2008 上运行并行查询？](https://stackoverflow.com/questions/2027012/how-to-run-a-parallel-query-on-sql-server-2008/2027053#2027053)

在这种情况下，您可以打开 4 个与数据库的连接并运行 4 个查询并附加结果。您将使用 .net 并行处理来加入结果集。

但是，在数据库中使用 UNION 几乎总是更高效、更简单。

从同一个表池中读取不会促进或阻止并行性：发出不会阻塞其他读取器的共享锁。并且数据将被缓存，因此使用的 IO 更少。

如果每个 UNION 子句花费的时间太长，那么您还有其他问题，例如索引不佳、旧/无统计信息、RAM 太少、查询结构错误、tempdb 问题……以及许多其他可能性

**tl;博士**

修复查询。不要在他们周围工作。

# azure - 如果我在 Windows Azure 存储中达到了可伸缩性目标会发生什么？

> ID：13154481
> 
> 赞同：3
> 
> 时间：2012-10-31T09:09:20.633
> 
> 标签：azure, azure-storage

[这篇文章](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability-targets.aspx)说每个存储帐户每秒限制为 5000 个 Blob 存储请求。

> 事务 – 每秒最多 5,000 个实体/消息/blob

如果我达到这个限制会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:36:24.437

请求失败并出现错误：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx)（搜索页面中的“节流”）。

> 节流 – 这些请求由于事务速率超过“Windows Azure 存储抽象及其可扩展性目标”一文中描述的每个分区目标吞吐量而受到限制。这些受限制的请求被计为可计费事务。发生这种情况时，客户端应使用指数退避并重试请求，这是存储客户端库默认提供的。如果它是服务的重复事件，则服务应考虑对其数据结构进行额外分区，如即将发布的关于 Blob、表和队列的帖子中所述。

您可能从 REST API 获得的错误代码在这里：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd179382.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179382.aspx) - 我无法立即看到哪一个将应用于节流上下文.

# javascript - 如何使用linkedIn Javascript api获取连接的兴趣？

> ID：13154482
> 
> 赞同：2
> 
> 时间：2012-10-31T09:09:24.857
> 
> 标签：javascript, linkedin

我正在尝试获取 PeopleSearch 调用后返回的人的兴趣。据我了解，要阅读用户的兴趣，我需要 r_fullprofile 权限。这是否意味着我永远无法检索用户连接的兴趣，因为我的应用程序仅由我的用户而不是他的连接进行身份验证？

我要做的是将用户与他们网络中具有相似兴趣的人进行匹配。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:51:12.550

是的，您可以检索这些，但您需要使用`r_network`范围，这将使您能够访问连接列表和人员搜索，如[授予权限文档](https://developer.linkedin.com/documents/authentication#granting)中所定义。

之后，您应该在搜索调用中使用[intestests 字段选择器](https://developer.linkedin.com/documents/profile-fields)，以便在您的搜索中接收该字段，[如开发人员文档中所述](https://developer.linkedin.com/documents/field-selectors)

您通过 API 收到的数据与用户可以在 Linkedin 网站上看到的数据相同。因此，您最好的选择是将搜索限制在 1 级、2 级和 3 级连接。

# javascript - 为单选按钮提供动态标签

> ID：13154488
> 
> 赞同：0
> 
> 时间：2012-10-31T09:09:48.957
> 
> 标签：javascript, html

我正在尝试创建一个动态表单，因此单击一个按钮我调用了一个 Javascript 函数。这是功能：

```
function addradiobutton(type){
    var element = document.createElement("input");
    //Assign different attributes to the element.
    element.setAttribute("type", type);
    element.setAttribute("value", type);
    element.setAttribute("name", type);   

    var foo = document.getElementById("fooBar");
    //Append the element in page (in span).
    foo.appendChild(element);
    counter=counter+1;
 } 
```

这段代码添加了一个单选按钮，它的标签是这样的

```
<input type="radio" name="radio" value="radio"> 
```

但我想让这段代码像这样。

```
 <input type="radio" name="radio" value="radio">WATER</input> 
```

我不介意关闭输入标签，但我想在代码末尾获得值“水”。
仅以水为例，它的价值也是动态的。
我应该怎么办 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T09:19:01.580

尝试这个

```
<script type="text/javascript">
        var counter = 0;
        function addradiobutton(type, text) {
            var label = document.createElement("label");

            var element = document.createElement("input");
            //Assign different attributes to the element.
            element.setAttribute("type", type);
            element.setAttribute("value", type);
            element.setAttribute("name", type);

            label.appendChild(element);
            label.innerHTML += text;

            var foo = document.getElementById("fooBar");
            //Append the element in page (in span).
            foo.appendChild(label);
            counter = counter + 1;
        }
        addradiobutton("radio", "Water");
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:14:53.953

```
<input type="radio" name="radio" value="radio">WATER</input> 
```

… 是无效的 HTML。表达你想要表达的内容的方式是：

```
<label><input type="radio" name="radio" value="radio">WATER</label> 
```

您只需要创建一个标签元素，然后创建`appendChild`输入元素和文本节点。

```
var label, input;
label = document.createElement('label');
input = document.createElement('input');
// Set type, name, value, etc on input
label.appendChild(input);
label.appendChild('Water');
foo.appendChild(label); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:14:20.513

我将使用的一种解决方案是创建它而不是那样创建它：（使用[jQuery](http://jquery.com/)以简化语法）

```
<div id="buttons">

</div>

<scrpit>
    var temp;
    temp = '<label><input type="radio" name="radio" value="radio" />WATER</label>';
    temp + '<label><input type="radio" name="radio" value="radio" />WATER1</label>';
    $('#buttons').html(temp);
</script> 
```

未经测试，但逻辑应该有效，我会尝试更新错误。

如果你想要 x 数量，你可以把它放在一个带有 for 循环的函数中，循环到 x 并迭代它们。例子：

```
<script>
    function addButtons(number){
        for(var i=0;i<number;i++){
            // do the string appending here
        }
    }
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-31T09:19:18.627

这应该有效。

```
element.setAttribute("innerHTML","WATER"); 
```

# c# - 改进我的扫雷算法 c#

> ID：13154495
> 
> 赞同：2
> 
> 时间：2012-10-31T09:10:12.093
> 
> 标签：c#, loops, solver, minesweeper

我正在制作一款扫雷游戏，目前完全可以玩，你可以完成游戏。但是，我的求解算法很烂。它非常混乱，我正在寻找一种更清洁的方式，也许有循环，但我想不出任何东西。

这是我目前正在使用的：

我有四个全局列表：

```
 List<String> flaggedButtons = new List<String>();
    List<String> minedNodes = new List<String>();
    List<String> playingField = new List<String>();
    List<String> adjacence = new List<String>(); 
```

这是利用列表来解决游戏的方法：

整个方法： http: [//pastebin.com/7J2Fc8yw](http://pastebin.com/7J2Fc8yw)

最重要的部分：

```
 char btnLetter = Convert.ToChar(buttonName.Substring(0, buttonName.Length - 1));
            char aboveLetter = btnLetter; aboveLetter--;
            char belowLetter = aboveLetter; belowLetter++; belowLetter++;
            int upDown = Convert.ToInt32(buttonName.Substring(1));
            int leftSide = Convert.ToInt32(buttonName.Substring(1)) - 1;
            int rightSide = Convert.ToInt32(buttonName.Substring(1)) + 1;

            //Clear the list by making a new list before adding the new values as to not overlap.
            adjacence = new List<String>();

            //Put all adjacent sides in to a list
            adjacence.Add(Convert.ToString(btnLetter.ToString() + leftSide));
            adjacence.Add(Convert.ToString(btnLetter.ToString() + rightSide));
            adjacence.Add(Convert.ToString(aboveLetter.ToString() + leftSide));
            adjacence.Add(Convert.ToString(aboveLetter.ToString() + rightSide));
            adjacence.Add(Convert.ToString(belowLetter.ToString() + leftSide));
            adjacence.Add(Convert.ToString(belowLetter.ToString() + rightSide));
            adjacence.Add(Convert.ToString(aboveLetter.ToString() + upDown));
            adjacence.Add(Convert.ToString(belowLetter.ToString() + upDown)); 
```

基本上这是我需要帮助的部分。它有效，但它很混乱。我知道我应该使用循环等等，但我想不出一种方法来循环它以使其更干净。本质上，它所做的是在您按下的瓷砖周围找到所有 8 个相邻的瓷砖。有任何想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:23:20.437

使用洪水填充。这是MS在他们的算法中使用的算法。可能更改为存储单元格值而不使用字符串的数组。

```
enum CellType 
{
   Bomb,
   Flag,
   Hidden,  
   Empty
}

CellType[,] cells = new CellType[10,10]; 
```

基本上，当有人点击一个单元格时，检查它是否隐藏，检查它周围的单元格是否隐藏。它周围隐藏的每个单元格都可以添加到队列或堆栈中，然后返回轨道。 [http://en.wikipedia.org/wiki/Flood_fill](http://en.wikipedia.org/wiki/Flood_fill)

更新：这是 C# 中的完整示例。这些是递归的，而不是使用一些集合来回溯 [https://gamedev.stackexchange.com/questions/31909/best-algorithm-for-recursive-adjacent-tiles](https://gamedev.stackexchange.com/questions/31909/best-algorithm-for-recursive-adjacent-tiles)

# image - RDLC PDF 报告中的透明 PNG 图像失真

> ID：13154497
> 
> 赞同：2
> 
> 时间：2012-10-31T09:10:23.947
> 
> 标签：image, pdf, report, rdlc, transparent

我有一个 RDLC 报告，标题中有一个透明的 PNG 图像。当我创建报告的 PDF 时，图像变得扭曲。
有没有办法在 PDF 报告中获得正确的图像而不是扭曲的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:22:22.273

使用 JPEG 或 JIF 而不是使用 PNG 图像进行报告。

# android - Android有界服务被杀死

> ID：13154499
> 
> 赞同：0
> 
> 时间：2012-10-31T09:10:26.430
> 
> 标签：android, android-service

我有一个有界服务 S（单独的进程），它在启动完成时启动。我有一个应用程序 A 在应用程序启动时绑定到服务。
现在我的问题是，当我在设置中强制停止应用程序时，处于不同进程中的服务 S 也会被破坏。
理想情况下，应该只杀死应用程序进程，但服务应该继续运行。为什么服务 S 即使在不同的进程中也会被杀死。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:57:03.597

`Activity`当被调用`bindService()`的被销毁时，绑定服务总是停止。为了防止这种情况发生，您必须执行以下操作：

1.  `START_STICKY`通过从服务中的方法返回来使您的服务坚持下去`onStartCommand()`。
2.  您必须`startService()`在`bindService()`从您的`Activity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:28:51.430

尝试启动服务`START_STICKY`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T04:48:18.977

有界服务是客户端服务器通信的类型。它附加或绑定到与其绑定的活动的位置。所以服务将被杀死。

# php - AmazonSES 不在某些服务器中发送邮件

> ID：13154513
> 
> 赞同：1
> 
> 时间：2012-10-31T09:11:32.080
> 
> 标签：php, web-services, codeigniter, amazon-s3

在我的网站中，我使用 AmazonSES 发送邮件。但它在 abc.com 中工作正常，在 xyz.com 中不起作用，在 xyz.com 中发送邮件后返回 true。我在两个服务器中使用了相同的代码和凭据。在 xyz.com 成功发送 php 邮件。我用过代码设计器。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:03:23.087

作为一个快速建议，通过向 SES 发出 HTTP 请求来检查 SES 时间（例如 wget -S "https://email.us-east-1.amazonaws.com"），并与您的服务器时间进行比较。更新服务器的时间（如果还没有，请使用 NTP）并查看问题是否自行解决。

# css - 我已经为 div 设置了背景颜色，但是当我减小窗口大小时它会消失

> ID：13154515
> 
> 赞同：5
> 
> 时间：2012-10-31T09:11:38.177
> 
> 标签：css, background, width

该网页是***[网站链接](http://lospardillos.com/)***。如果**减小窗口大小**，**透明**灰色`background`消失。我尝试了很多方法来解决这个问题，但没有成功。有任何想法吗？我使用的 CSS 是：

```
 #content {
    margin-bottom: 20px;
    padding-left: 20px;
    background: rgb(0, 0, 0);
    background: rgba(0, 0, 0, 0.6);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
    overflow:auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:47:32.420

有一条 CSS 规则仅在宽度小于 980px 时应用，即添加`float:left`. 这导致背景消失。

```
@media screen and (max-width: 980px) .grid, .grid-right {
    float:none;
} 
```

当窗口大于 980px 时，`#content`计算样式为

```
float:left;
display:block;
width: <not auto but some real px value>; 
```

由以下规则组成

```
.grid {
    float: left;
    margin-bottom: 2.127659574468%;
    padding-top: 0;
}
.col-860 {
    display: inline;
    margin-right: 2.127659574468%;
} 
```

具有`float:left`覆盖`display:inline`并因此`#content`成为块级元素（请参阅[应用浮动时的 css 显示属性](https://stackoverflow.com/questions/9774282/css-display-property-when-a-float-is-applied)）并且将应用背景颜色。

但是，当窗口小于 980px 时，`#content`计算样式为

```
float:none;
display:inline;
width:auto; 
```

因此`#content`是`display:inline`并且背景不会出现 - 请参阅[如果我有 display: inline，为什么我的背景颜色不显示？](https://stackoverflow.com/questions/7439820/why-is-my-background-color-not-showing-if-i-have-display-inline)

删除该`@media screen and (max-width: 980px) .grid, .grid-right`规则将解决问题，但我认为这作为*响应*式站点的一部分存在，可将内容缩放并适合多种分辨率和窗口大小。我建议检查在较低分辨率下需要什么行为。无论哪种方式，在窗口小于 980 像素的情况下给出或将解决`#content`问题`display:block`。`float:left`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:17:15.530

Hi now define to `float:left;` in your `#content id`

as like this

```
 #content{
    float:left;
    } 
```

## --------------

**or** define

```
#content{
display:block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:23:00.407

它适用于

```
.grid{
  position: absolute;
  left: 0;
  /* ... */
} 
```

也。（删除浮动：左）

# delphi - 使用 Vcl 样式时更改 TActionMainMenuBar 的字体

> ID：13154517
> 
> 赞同：4
> 
> 时间：2012-10-31T09:11:43.500
> 
> 标签：delphi, fonts, vcl-styles, delphi-xe3, taction

通常可以像这样更改 TActionMainMenuBar 或 TMainMenu 的字体：

```
Screen.MenuFont.Name := 'Calibri'; 
```

使用 Vcl 样式时，如果为组件注册了 StyleHook，则不再可能。我进入位图样式设计器（以前称为 Vcl 样式设计器）并更改了**MenuItemTextNormal**的字体。

问题是更改字体没有任何作用，我只能成功更改文本的颜色。

显然我在这里遗漏了一些东西，为什么我可以更改颜色而不是字体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T02:02:24.960

正如您所说，在样式设计器中更改***MenuItemTextNormal***元素（或任何其他元素）的字体没有效果，这是因为 Vcl 样式引擎只是忽略了字体大小和名称，而只是使用 vcl 样式文件中定义的字体颜色.

作为解决方法，您必须定义和注册一个新的[TActionBarStyleEx](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ActnMenus.TActionBarStyleEx)后代并覆盖 TCustomMenuItem 和 TCustomMenuButton 类的 DrawText 方法，使用 Screen.MenuFont 的值来绘制菜单。

我刚刚在[Vcl Styles Utils](http://code.google.com/p/vcl-styles-utils/)[`Vcl.PlatformVclStylesActnCtrls`](http://code.google.com/p/vcl-styles-utils/source/browse/trunk/Common/Vcl.PlatformVclStylesActnCtrls.pas)项目中添加了一个新单元 ( )，它实现了一个新的 Action Bar Style，它允许自定义组件的字体和大小。[`TActionMainMenuBar`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ActnMenus.TActionMainMenuBar)

要使用它，只需将 Vcl.PlatformVclStylesActnCtrls 单元添加到您的项目中，更改`Screen.MenuFont`字体的值，例如

```
 Screen.MenuFont.Name := 'Impact';
 Screen.MenuFont.Size := 12; 
```

然后像这样设置 TActionManager 的样式

```
 ActionManager1.Style:=PlatformVclStylesStyle; 
```

结果将是

![在此处输入图像描述](../Images/11f1fcd595ad811ca845cbc1a71e9f50.png)

# java - 快速查找表中一行的算法

> ID：13154520
> 
> 赞同：1
> 
> 时间：2012-10-31T09:12:03.390
> 
> 标签：java, algorithm, design-patterns

我有一个包含以下字段的文档：

*   字段1
*   字段2
*   字段3
*   字段4

我有以下表结构：

```
field1  |  field2  |  field3  |  field4  || result
--------------------------------------------------
foo                   bar                   MC
foo        test1                            MR
           test2                 test3      OM
foo        test1      bar                   CM 
```

当一个文档进来，field1 是 foo，field2（空值），field3 是 bar，应该选择结果 MC。当一个文档进来，field1是foo，field2是test1，field3是bar，应该选择结果CM。

当然，您可以检查每一列并让匹配的行保持打开状态，直到您循环每一行。但是，这个表结构可能会变得非常大，我正在寻找一种解决上述问题的算法，以一种高性能和好的方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:02:03.393

正如@MarkoTopolnik 所写，RDBMS 做你想做的事。但是，如果您仍想实现自己的算法，一种选择是创建一棵树：级别 1 是`field1`，级别 2 是`field2`，等等。每个分支是表的一行。如果你只有两个字段，这看起来像这样：

```
root----field1.valueA----field2.valueC---result1
    \                \
     \                \--field2.valueD---result2
      \
       \field1.valueB----field2.valueC---result3
                     \
                      \--field2.valueD---result4 
```

您可以在每个级别使用哈希表来实现此树。首先，您有一个哈希表，其中`field1`值作为键，哈希表作为值。这些哈希表具有`field2`键和`result`值。由于您允许`null`作为一个值，因此您必须使用`HashMap`and not `Hashtable`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:18:14.027

对于像这样的任何字符串搜索，最快的选择是基数树。创建 4 根基数树，每个字段的叶子是值参与的记录的排序列表。例如，对于字段 1，如果您在 Foo 上搜索，它应该返回一个类似于 { 1, 2, 4 } 表示 Foo 在字段 1 的记录 1、2 和 4 中。结果是您将有 4 组数字，它们的交集就是答案。

获得交点可以在线性时间内完成，因为它们是按排序顺序维护的。这是一个在 C 中执行此操作的简单排序集交集算法：

```
#define int32 unsigned int

// A, B - operands, sorted arrays
// s_a, s_b - sizes of A and B
// C - result buffer
// return size of the result C
size_t intersect_sorted_list(int32 *A, int32 *B, size_t s_a, size_t s_b, int32 *C) {
    size_t i_a = 0, i_b = 0;
    size_t counter = 0;

    while(i_a < s_a && i_b < s_b) {
        if(A[i_a] < B[i_b]) {
            i_a++;
        } else if(B[i_b] < A[i_a]) {
            i_b++;
        } else {
            C[counter++] = A[i_a];
            i_a++; i_b++;
        }
    }
    return counter;
} 
```

# jboss7.x - Jboss 不部署战争，JBAS011006

> ID：13154521
> 
> 赞同：2
> 
> 时间：2012-10-31T09:12:08.490
> 
> 标签：jboss7.x

我需要你的帮助！

我正在尝试将我的 WAR 部署到 Jboss Application Server 7.1，但我无法实现。我通过 Web 控制台部署它，它在部署过程中冻结，没有任何错误。那是我的 server.log (http://rghost.ru/41253318)

谢谢！

```
12:08:26,706 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://127.0.0.1:9990
12:08:26,708 ERROR [org.jboss.as] (Controller Boot Thread) JBAS015875: JBoss AS 7.1.1.Final "Brontes" started (with errors) in 1904ms - Started 161 of 240 services (1 services failed or missing dependencies, 76 services are passive or on-demand)
12:08:33,960 INFO  [org.jboss.as.repository] (HttpManagementService-threads - 1) JBAS014901: Content removed from location C:\JBoss\standalone\data\content\bc\e2b74994970823aa57cc8a48392df844788444\content
12:08:41,112 INFO  [org.jboss.as.repository] (HttpManagementService-threads - 1) JBAS014900: Content added at location C:\JBoss\standalone\data\content\bc\e2b74994970823aa57cc8a48392df844788444\content
12:09:00,088 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) JBAS015876: Starting deployment of "USCINS_1.1.5.war"
12:09:02,978 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry hk2-core.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/ha-api-3.1.8.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,980 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry config.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/ha-api-3.1.8.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,981 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry auto-depends.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/ha-api-3.1.8.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,983 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry asm-all-repackaged.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/ha-api-3.1.8.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,984 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry bean-validator.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/ha-api-3.1.8.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,986 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jaxb-api.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxb-impl-2.2.5.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,988 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry activation.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxb-impl-2.2.5.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,989 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jsr173_1.0_api.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxb-impl-2.2.5.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,991 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jaxb1-impl.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxb-impl-2.2.5.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,992 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jaxb-api.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxb-xjc-2.2.5.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,994 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jaxb-impl.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxb-xjc-2.2.5.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,995 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jsr173_1.0_api.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxb-xjc-2.2.5.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,997 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry activation.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxb-xjc-2.2.5.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,998 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jaxws-api.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:02,999 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jsr181-api.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,001 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry javax.annotation.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,002 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry saaj-api.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,004 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry saaj-impl.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,005 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry stax2-api.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,006 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry woodstox-core-asl.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,008 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jaxb-api.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,009 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jaxb-impl.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,011 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry stax-ex.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,012 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry streambuffer.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,013 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry stax-utils.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,015 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry policy.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,016 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry gmbal-api-only.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,017 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry management-api.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-rt-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,019 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jaxws-rt.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-tools-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,020 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry jaxb-xjc.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/jaxws-tools-2.2.6.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,026 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-6) Class Path entry relaxngDatatype.jar in "/c:/JBoss/bin/content/USCINS_1.1.5.war/WEB-INF/lib/xsdlib-20060615.jar"  does not point to a valid jar for a Class-Path reference.
12:09:03,618 WARN  [org.jboss.as.ee] (MSC service thread 1-1) JBAS011006: Not installing optional component com.sun.xml.ws.transport.http.servlet.WSAsyncListener$1 due to exception: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011054: Could not find default constructor for class com.sun.xml.ws.transport.http.servlet.WSAsyncListener$1
    at org.jboss.as.ee.component.ComponentDescription$DefaultComponentConfigurator.configure(ComponentDescription.java:606)
    at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:81)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_32]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_32]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_32] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T23:50:20.690

您不需要将 jaxws 和 jaxb 与您的应用程序捆绑在一起，因为它们已经是 JDK/App 服务器的一部分。

从你的战争中删除 jaxws*, jaxb* 它应该可以工作，或者至少会给你一些其他错误。

如果它仍然不起作用，你可以发布输出

```
jar tf <name-of-you-war> 
```

这将向我们展示你们战争的结构。

# java - ArrayAdapter 不保留它的值

> ID：13154523
> 
> 赞同：0
> 
> 时间：2012-10-31T09:12:18.163
> 
> 标签：java, android, collections, android-arrayadapter

我有一个问题，我知道问题出在哪里，但我不明白为什么它有时有效而有时无效。这就是我想做的。

我有一个显示 Google MapView 的 Android 应用程序，在此 MapView 之上有一个自动完成文本视图。我从 Google 获得值（以 json 格式），我可以在这个自动完成文本视图中显示它们。这一直有效。现在，当我按下从 Google 获得的选项之一时，我想放大到那个位置。这在大多数情况下都有效。

因此，当我按地址 Elfde 时，我会从 Google 收到 5 个选项/预测。之后我显示这些选项。其中一个选择是比利时的 Elfde-Liniestraat。Google MapView 会缩放到该位置。如果我键入不来梅，然后选择不来梅，德国它会缩放到该位置。但是当我输入 Peer 并选择 Peer, Belgium 时，我的 ArrayAdapter 中出现 indexOutOfBounds 异常。

现在代码：

当我的自动完成 TextView 中的文本更改时，我使用以下代码：

```
public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            if (count % 3 == 1){                    
                // Get the places and pass the argument in the TextView to the task.
                GetPlaces task = new GetPlaces();
                task.execute(_txtFindLocation.getText().toString());
            }
        } 
```

当我单击一个项目时，我使用此代码：

```
_txtFindLocation.setOnItemClickListener(new OnItemClickListener(){
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // Hide the keyboard.
            InputMethodManager inputMethodManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            inputMethodManager.hideSoftInputFromWindow(_txtFindLocation.getWindowToken(), 0);

            Log.v("Take a look on variables", "item: " + String.valueOf(arg2) + ", AdapterView: " + arg0.getCount() + ", _strArrayAdapter: " + _strArrayAdapter.getCount());

            // Move to specified location.
            moveToLocation(arg0.getItemAtPosition(arg2).toString());

                    // Clear the adapter, to decrease the size.
            _strArrayAdapter.clear();
        }
    }); 
```

这是 indexOutOfBoundsException 发生的地方。对于比利时 Elfde-Liniestraat 的输入和选择：arg2 = 0，arg0.getCount() = 5，_strArrayAdapter（与 arg0 作为源链接）=5 对于德国不来梅的输入和选择：arg2 = 3， arg0.getCount() = 5, _strArrayAdapter = 5 对于比利时 Peer 的输入和选择（抛出错误的地方）：arg2 = 0, arg0.getCount() = 0, _strArrayAdapter = 0

因此，这里肯定是引发错误的地方。_strArrayAdapter 在此函数中填充：

```
private class GetPlaces extends AsyncTask<String, Void, ArrayList<String>>{

    @Override
    protected ArrayList<String> doInBackground(String... params) {
        ArrayList<String> myPredictions = new ArrayList<String>();
        Log.d("Search places", "params: " + params[0].toString());
        try{
            URL myURL = new URL("https://maps.googleapis.com/maps/api/place/autocomplete/json?input="
                    + URLEncoder.encode(params[0], "UTF-8")
                    + "&types=geocode&language=en&sensor=true&key=API_KEY");
            URLConnection myURLConnection = myURL.openConnection();         
            BufferedReader myBufferReader = new BufferedReader(new InputStreamReader(myURLConnection.getInputStream()));

            String strLine;
            StringBuffer strBuffer = new StringBuffer();
            // Take Google's legible JSON and turn it into on big String.
            while((strLine = myBufferReader.readLine()) != null){
                strBuffer.append(strLine);
            }

            // Turn String into a JSON Object.
            JSONObject jsonPredictionsObject = new JSONObject(strBuffer.toString());
            // Get a JSON Array that is inside the JSON Object.
            JSONArray jsonPredictionsArray = new JSONArray(jsonPredictionsObject.getString("predictions"));

            for (int i = 0; i < jsonPredictionsArray.length(); i++){
                jsonPredictionsObject = (JSONObject) jsonPredictionsArray.get(i);
                myPredictions.add(jsonPredictionsObject.getString("description"));
            }
        }
        catch (IOException e){
            Log.e("Search places", "GetPlaces: doInBackGround", e);
        }
        catch (JSONException e){
            Log.e("Search places", "GetPlaces: doInBackGround", e);
        }

        return myPredictions;
    }

    protected void onPostExecute(ArrayList<String> result){
        Log.d("YourApp", "onPostExecute: " + result.size());

        // Update the adapter.
        _strArrayAdapter = new ArrayAdapter<String>(getBaseContext(), R.layout.activity_list_item);
        _strArrayAdapter.setNotifyOnChange(true);

        // Attach the adapter to the TextView.
        _txtFindLocation.setAdapter(_strArrayAdapter);

        for (String text : result){
            Log.d("Search places", "onPostExecute: result = " + text);

            _strArrayAdapter.add(text);
        }

            _strArrayAdapter.clear();

        Log.d("Search places", "onPostExecute: autoCompleteAdapter " + _strArrayAdapter.getCount());
    } 
```

对于所有三个测试用例，最后一个 Log.d("Search places", "onPostExecute: autoCompleteAdapter " + _strArrayAdapter.getCount()); 给5个值！

所以 _strArrayAdapter 在所有情况下都会被填充，但是当我在某些情况下选择一个项目时，_strArrayAdapter 的值设置为 0，所以它没有被填充。

为什么会这样？

恕我直言，Martijn Haex

**编辑**感谢回复，我重新审视了我的代码（上面），现在它就像一个魅力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:22:59.640

问题似乎出在您`onTextChanged`函数中的以下代码段中。顺便说一句，你为什么要在什么时候清除数组`lengthOfModifiedText % 3 == 1`？：

```
if (count % 3 == 1){
                _strArrayAdapter.clear(); 
```

当您输入 时`"Peer"`，您的数组将被清除（没有元素）。每当您输入长度的文本时`L, where L % 3 == 1`，您`strArrayAdapter`将根据您的代码被清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:44:56.320

当它们的字符数为 x*3+1 (1, 4, 7, 10, ...) 时，您似乎正在清除结果：

```
 if (count % 3 == 1){
            _strArrayAdapter.clear(); 
```

似乎您只想在拥有 3 个或更多字符时才搜索一个地方，对吧？那应该是

```
 if (count > 3){
            _strArrayAdapter.clear(); 
```

同样在 postExecute 中，我发现您在添加适配器的每个项目上都调用 notifyDataSetChanged() 。你可以稍微优化一下。事实上，你可以完全删除它：

```
protected void onPostExecute(ArrayList<String> result){
    Log.d("YourApp", "onPostExecute: " + result.size());

    // Update the adapter.
    _strArrayAdapter = new ArrayAdapter<String>(getBaseContext(), R.layout.activity_list_item);

    for (String text : result){
        Log.d("Search places", "onPostExecute: result = " + text);

        temp.add(text);
        _strArrayAdapter.add(text);
    }

    // Attach the adapter to the TextView.
    _txtFindLocation.setAdapter(_strArrayAdapter);

    Log.d("Search places", "onPostExecute: autoCompleteAdapter " + _strArrayAdapter.getCount());
} 
```

此外，如果您遇到异常，请将堆栈跟踪放在帖子中，并在代码中对行号进行一些参考，以便更容易跟踪问题。

# java - 数据结构等价于大型数据集的映射（在 java 中）

> ID：13154528
> 
> 赞同：7
> 
> 时间：2012-10-31T09:12:52.700
> 
> 标签：java, directed-graph

是否有一个已经实现的数据结构，我可以使用它来分配一个对象（在我的例子中是一个边缘），一个整数？我正在从文件中读取图形，10 百万个顶点，60 百万条边，我使用地图（cost.put(e,cost)）为每个边分配一个成本。

我以这种方式创建成本图：

```
costs = new HashMap<Edge,Integer>(); 
```

它给出的例外是：

```
java.lang.OutOfMemoryError: Java heap space
    at java.util.HashMap.resize(Unknown Source)
    at java.util.HashMap.addEntry(Unknown Source)
    at java.util.HashMap.put(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T09:17:28.410

`HashMap`是基本的正确数据结构`Map`。您遇到的问题是没有指示 JVM 保留足够的空间来将文件内容保存在内存中。`-Xmx`使用标志启动 JVM 。例如`-Xmx1G`参数将允许它使用 1 GB 的内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T09:24:57.093

你有 6e7 边。一个普通的对象需要 24 个字节（64 位 HotSpot），所以那里有 1.44e9 个字节（1.5 GB）。现在您介绍可以想象的最有效的地图，仅添加 6e7 引用和 6e7`Integer`对象。这是 refs 的另外 2.4e8 字节和`Integer`s 的 1.44e9 字节：另外 1.5 GB，现在总计 3 GB - 这是您的问题的**理论下限**（模缓存，见下文）。

基于此，我建议您`Edge`使用另一个`int`字段扩展您的课程。这将大大减少您的内存占用。

但是，如果这不是一个选项，并且：

*   你所有的整数很少超过两位数，
*   你小心不要使用`new Integer`，但是`Integer.valueOf`，自动装箱等，
*   你使用 Java 7，

您将自动受益于内置的小整数缓存。如果整数采用更大范围的值，但仍然有很多重复，则强烈建议使用自定义缓存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T09:20:48.983

除了更改 jvms 内存设置之外，您还可以`HashMap`使用初始容量和负载平衡来调整内存管理。

Javadoc 摘录：

> HashMap 的实例有两个影响其性能的参数：初始容量和负载因子。容量是哈希表中的桶数，初始容量只是哈希表创建时的容量。负载因子是哈希表在其容量自动增加之前允许达到的程度的度量。当哈希表中的条目数超过负载因子和当前容量的乘积时，对哈希表进行重新哈希（即重建内部数据结构），使哈希表具有大约两倍的桶数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-31T09:21:23.257

而不是创建一个`HashMap`

```
costs = new HashMap<Edge,Integer>(); 
```

您可以将成本存储在`Edge`对象中。

```
class Edge
{
    Vertex a;
    Vertex b;
    int cost;
} 
```

这样，您可以在系统中节省一些内存。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-31T09:22:59.737

回到最初的问题：你有边，有成本。由于您的图是稀疏的，为什么不使用稀疏矩阵？也许对象到整数的映射不是您真正需要和想要的。您可以查看 apache.commons.math，我认为它们具有稀疏矩阵。此外，您需要考虑如何访问算法中的成本，以选择适当的稀疏格式（基于列的运行长度编码/基于行的 rle 或其他）。或者你不在乎，并使用任何东西，但是你应该在你的算法开始时转换东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-31T09:17:00.157

您确实意识到这需要**大量**RAM，对吗？尝试[增加堆大小](https://stackoverflow.com/questions/1565388/increase-heap-size-in-java)，你会没事的......

并回答您最初的问题：是的，这就是[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)的用途...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-31T09:18:59.300

您必须为每个项目指定项目需要多少堆空间

我认为您可以按照以下步骤操作：

```
Right mouse click - Run As - Run Configuration - Arguments - Vm Arguments, then add this -Xmx2048m 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-31T09:46:10.433

也许您正在寻找的是[TObjectIntHashMap](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TObjectIntHashMap.html) 这与它类似，`HashMap<Edge, Integer>`只是它将 存储`int`为可能为您节省一些内存的原语。当集合更大时，这个集合也可以稍微快一点（因为它更适合缓存）

```
TObjectIntHashMap<Edge> costs = new TObjectIntHashMap<Edge>();

costs.put(e, cost); // cost is stored as a primitive not its wrapper object. 
```

# jpql - 在 JPA 查询中使用 @Transient 访问字段

> ID：13154535
> 
> 赞同：3
> 
> 时间：2012-10-31T09:13:21.403
> 
> 标签：jpql

我有一个具有瞬态属性的实体：

```
@Entity
@Table(name = "asset")
public class Asset {
    @Transient
    private String locationIdentifier = "N/A";

    @SuppressWarnings("unused")
    @PostLoad
    private void onPostLoad() {
        if (location != null) {
            locationIdentifier = location.getIdentifier();
        }
    }

   [other stuffs]

   } 
```

我试图`locationIdentifier`在 JPA 中以这种方式访问​​：

```
String sqlString = "SELECT asset FROM Asset WHERE asset.locationIdentifier = :inputstr";
Query query = entityManager.createQuery(sqlString); 
```

但我得到一个错误：`Cannot resolve the property locationIdentifier`

我想问一下我如何`locationIdentifier`使用JPQL访问？

对不起我的英语不好。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T19:10:39.460

JPQL 查询转换为 SQL 查询，SQL 查询对数据库中的数据进行操作。将属性标记为瞬态意味着属性不会持久化到数据库中，因此无法从数据库中查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:05:01.260

@Transient 表示 JPA 完全忽略该属性。它不能在查询中引用。

只需删除`@Transient`它应该可以工作。

此外，您需要向查询提供参数值：

```
String sqlString = "SELECT asset FROM Asset WHERE asset.locationIdentifier = :inputstr";
Query query = entityManager.createQuery(sqlString);
query.setParameter("inputstr", someValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:10:26.963

您可以在 db 表中添加列 locationIdentifier 并将其取消标记为 Transient，或者您不能在查询中使用此列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T15:37:42.093

您不能在查询中使用临时成员。那没有意义！JPQL 用于从数据库中获取某些内容，如果没有“locationIdentifier”，则无法将其添加到 where 子句中。如果没有这样的数据库字段，您对 SQL 有什么期望？

# jquery - jQuery：获取最近文本输入的 ID

> ID：13154538
> 
> 赞同：0
> 
> 时间：2012-10-31T09:13:28.737
> 
> 标签：jquery, alert, attr

我有一个文本输入字段，旁边有一个按钮。当我单击此按钮时，我希望 alert() 向我显示输入字段的 ID。这是我的代码

```
<tr>
   <td>Item <?php echo $i; ?>:</td>
   <td>
       <input type="text" name="course_include_1" class="regular-text" /> <input type="button" class="button" id="DeleteItem" value="Delete Item" />
    </td>
</tr> 
```

这是我的 jQuery 代码：

```
 $("#DeleteItem").live("click", function() {
        //$(this).parents("tr").remove();
        alert($(this).prev().attr("id"));
    }); 
```

为什么这不起作用？

**编辑：**我应该补充一点，还有一个“添加”按钮，它创建一个新的输入字段以及旁边的删除按钮。代码如下所示：

```
$("#AddItem").live("click", function() {
            Count++;
            $('<tr><td>Item ' + Count + ':</td><td><input id="asdadad" name="course_include_' + Count + '" type="text" class="regular-text" /> <input type="button" class="button" id="DeleteItem" value="Delete Item" /></td></tr>').appendTo(TableRow);
        }); 
```

目标是单击新创建的字段旁边的删除按钮，并在 alert() 框中显示其 ID。那是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:17:25.247

因为输入没有设置 id 属性，例如

```
<input id='myInput' type="text" name="course_include_1" class="regular-text" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:17:54.883

问：为什么这不起作用？A：输入没有id属性

**编辑**

现在您有许多元素`id="DeleteItem"`可能会导致“意外”浏览器行为（例如，搞乱绑定）。改用一个类，在追加新项目时在行中更改它：

```
class="button" id="DeleteItem" 
```

对此：

```
class="button DeleteItem" 
```

...并在事件绑定中更改此：

```
$("#DeleteItem").live("click", function() { 
```

对此：

```
$(".DeleteItem").live("click", function() { 
```

甚至为此（建议使用`.on()`代替`.live()`，请参阅[此处的第一个文本段落](http://api.jquery.com/bind/)）：

```
$(document).on('click','.DeleteItem', function() { 
```

这可能会解决问题

**编辑 2**

附言。我还会`id`为每个输入元素创建一个唯一的，例如。`... id="asdadad"'+Count+' ...`或者如果它们应该对于添加的每个项目都相同，则将其移至班级

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:15:46.187

试试这个：

```
$("#DeleteItem").live("click", function() {
    alert($(this).parent().find(".regular-text").attr("id"));
}); 
```

**更新**

问题是因为您要附加一个具有重复`id`属性的元素。改为`#DeleteItem`使用类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T09:44:18.893

它没有回答您的问题，但是如果您这样做，它将一起删除该行...

```
<input type='button' value='delete' onclick="$(this).parents('tr').remove();" /> 
```

父母（与父母）将进行“查找”，但向上直到找到`<tr>`持有该行...然后删除将“删除”它。

PS：如果您有多个拖曳和多个删除按钮，他们需要唯一的 id 或 jq 有时会感到困惑。

# node.js - Node.JS 服务器逐字符而不是逐行接收数据

> ID：13154542
> 
> 赞同：0
> 
> 时间：2012-10-31T09:13:42.637
> 
> 标签：node.js, telnet

我有一个简单的 Node.JS 服务器：

```
//Module dependencies
var net = require('net')

//Create server
var server = net.createServer(function (conn) {

  // handle connection
  conn.setEncoding('utf8');

  conn.write(
      'Hi, please enter something: '
  );

  conn.on('data', function (data) {
    console.log(data);
  });

});

//Listen
server.listen(3000, function () {
  console.log('\033[96m   server listens at *:3000\033[39m');
}); 
```

它应该在服务器的控制台窗口中回显客户端的输入。但是当我使用 telnet 客户端连接到服务器时，它是通过逐个字符输出来实现的，而我宁愿它在按 Enter 时逐行输出。

我知道我无法收集`conn.on`方法中的所有输入，但可以在较低级别上完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:20:17.847

这是因为 telnet 在每个字符之后都会刷新 TCP 缓冲区，除非您使用[linemode](https://www.rfc-editor.org/rfc/rfc1184)。

# c++ - 创建 C++ 枚举和依赖数据结构时如何避免重复自己？

> ID：13154543
> 
> 赞同：10
> 
> 时间：2012-10-31T09:13:43.513
> 
> 标签：c++, macros, enums, metaprogramming, dry

> **可能重复：**
> [枚举到字符串：如果无效/未找到，则返回枚举整数值](https://stackoverflow.com/questions/10175260/enum-to-string-return-the-enum-integer-value-if-invalid-not-found)

简而言之，我拥有的（工作）定义代码是这样的：

```
enum Gadget
{
    First,
    Second,
}; 

const char* gadget_debug_names[] = {
    "First",
    "Second",
    // note: strings are same as enum tokens here, but bonus points if
    //       they can optionally be given different values
}; 
```

但是，信息位于多个必须手动维护的单独位置很容易出错。（在某些情况下，在代码库中，我正在使用这两个或更多的地方，甚至当前不在同一个文件中。）因此，只需将这些东西命名一次就真的很好了。

现在我们可以通过代码生成和声明性数据文件来做到这一点，但如果有更好的方法可以做到这一点，我不希望在现有构建过程中添加另一个步骤。拥有看起来像的东西会很完美

```
DEFINE_GADGET(First)
DEFINE_GADGET(Second) 
```

（如果需要，可以选择使用启动/停止宏）但是，由于宏只是纯文本替换，我想不出任何方法让预处理器在写出枚举定义时“记住”标记。

我认为这也可能通过元编程实现，但我不知道如何做到这一点。我在那里看到的所有示例都涉及递归构建数据结构。我可以看到如何以这种方式构建字符串数组，但我不确定如何传入令牌名称或如何构建枚举。（当然，仅仅使用元编程来构建字符串数组是非常荒谬的。）

有什么方法可以让我在这里保持 DRY，而不使用代码生成？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T09:21:29.387

有一个旧的预处理器技巧：

### 小工具数据

```
DEFINE_GADGET(First)
DEFINE_GADGET(Second) 
```

### 小工具。*** *

```
#define QUOTE_VAL(X)  #X

enum Gadget
{
#define DEFINE_GADGET(X)   X,
#include "Gadget.data"
#undef DEFINE_GADGET(X)
}; 

const char* gadget_debug_names[] = {
#define DEFINE_GADGET(X)   QUOTE_VAL(X),
#include "Gadget.data"
#undef DEFINE_GADGET(X)
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:58:08.863

您可能想做或不想做的事情，首先定义要定义的内容，在本例中为枚举和字符数组：

```
#define DEFENUM(v) v,
#define DEFENUM_last(v) v
#define DEFINE_ENUM(n, LIST) enum n { LIST(DEFENUM) }

#define DEFARR(v) #v,
#define DEFARR_last(v) #v
#define DEFINE_ARRAY(n, LIST) const char *n[] = { LIST(DEFARR) } 
```

然后用这种格式列出你的清单：

```
#define LETTERS(GEN) \
        GEN(aaa) \
        GEN(bbb) \
        GEN(ccc) \
        GEN(ddd) \
        GEN##_last(eee) 
```

或者这个：

```
#define LETTERS(GEN) \
        GEN(aaa) GEN(bbb) GEN(ccc) GEN(ddd) GEN##_last(eee) 
```

最后创建您想要创建的内容：

```
DEFINE_ENUM(LettersEnum, LETTERS);
DEFINE_ARRAY(letters_array, LETTERS); 
```

这将转换为：

```
enum LettersEnum { aaa, bbb, ccc, ddd, eee };
const char *letters_array[] = { "aaa", "bbb", "ccc", "ddd", "eee" }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:26:40.793

我使用的简短示例：

```
#include <iostream>
#include <cassert>
#include "boost/preprocessor.hpp"
#include "boost/algorithm/string/predicate.hpp"
#define ENUMIFY_FOREACH( r, data, elem ) \
    BOOST_PP_STRINGIZE( elem ) BOOST_PP_COMMA()

#define ENUMIFY( name, values ) \
struct name \
{ \
    static const unsigned int Size = BOOST_PP_SEQ_SIZE( values ); \
    typedef enum{ \
    BOOST_PP_SEQ_ENUM( values ) \
    } Values; \
    static const char* (&Mappings())[ Size ] \
    { \
    static const char* mappings[] = \
        { \
        BOOST_PP_SEQ_FOR_EACH( ENUMIFY_FOREACH, _, values ) \
        }; \
        return mappings; \
    }; \
    static const char* String( Values a_Val ) \
    { \
    return Mappings()[ static_cast< unsigned int >( a_Val ) ]; \
    } \
    static Values Value( const char* a_Key ) \
    { \
    for( unsigned int i = 0; i < Size; ++i ) \
    if( boost::iequals( a_Key, Mappings()[i] ) ) return static_cast< Values >( i ); \
    assert( 0 && "Didn't find the value of string " ); \
    return static_cast< Values >( 0 ); \
    } \
    \
};

ENUMIFY( SomeEnum, (Long)(Short)(Etc) );
int main()
{
    std::cout << SomeEnum::String( SomeEnum::Long ) << std::endl; // Outputs Long
} 
```

# iphone - Cocos2d，如何使用计时器更改精灵图像并再次重复过程？

> ID：13154549
> 
> 赞同：1
> 
> 时间：2012-10-31T09:14:10.937
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

我有一个改变纹理的精灵（基本上不同的颜色）。我想在 30 秒内更改纹理，而不是立即更改。我怎样才能做到这一点？另外，我怎样才能重复这个过程？所以它应该在蓝色停留 30 秒，然后变为红色。然后再次重复该过程

```
 sprite = [CCSprite spriteWithFile:@"blue.png"];
   [sprite setTexture:[[CCTextureCache sharedTextureCache] addImage:@"red.png"] ]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:22:12.373

试试这个：

```
id delayTime1 = [CCDelayTime actionWithDuration:2.0f];
id calFun1   = [CCCallBlock actionWithBlock:^{
    //HERE SET BLUE TEXTURE..

   sprite.color = ccc3(0,255,0);

}];
id delayTime2 = [CCDelayTime actionWithDuration:2.0f];
id calFun2   = [CCCallBlock actionWithBlock:^{
    //HERE SET RED TEXTURE..
   sprite.color = ccc3(255,0,0);

}];

id sequece = [CCSequence actions:delayTime1, calFun1, delayTime2, calFun2, nil];
id repeate = [CCRepeatForever actionWithAction:sequece];

[sprite runAction:repeate]; 
```

# javascript - javascript设置cookie过期时间

> ID：13154552
> 
> 赞同：88
> 
> 时间：2012-10-31T09:14:23.173
> 
> 标签：javascript, cookies

我正在通过 Javascript 设置一个 cookie，它工作正常，但它没有占用我给出的过期时间。无论我给出什么，它都会继续获取会话值，下面是我从[这里获取的代码](https://stackoverflow.com/questions/3794989/how-to-set-a-cookie-to-expire-in-1-hour-in-javascript)

```
var now = new Date();
var time = now.getTime();
var expireTime = time + 1000*60;
now.setTime(expireTime);
var tempExp = 'Wed, 31 Oct 2012 08:50:17 GMT';
document.cookie = aaa+'='+sStr+';expires='+now.toGMTString()+';path=/'; 
```

我尝试提供硬编码值，但它仍然显示为 chrome 开发工具中的会话过期

```
var tempExp = 'Wed, 31 Oct 2012 08:50:17 GMT';
document.cookie = aaa+'='+sStr+';expires='+tempExp+';path=/'; 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-31T11:22:23.543

我已将时间设置为 1000*36000。

```
function display() { 
  var now = new Date();
  var time = now.getTime();
  var expireTime = time + 1000*36000;
  now.setTime(expireTime);
  document.cookie = 'cookie=ok;expires='+now.toUTCString()+';path=/';
  //console.log(document.cookie);  // 'Wed, 31 Oct 2012 08:50:17 UTC'
} 
```

![到期](../Images/babb7a4b2a375b99901e4bd08a06e526.png)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2017-04-19T13:07:56.893

下面是创建和删除 cookie 的代码片段。cookie 设置为 1 天。

```
// 1 Day = 24 Hrs = 24*60*60 = 86400. 
```

1.  通过使用最大年龄：

    *   **创建 cookie**：

    ```
    document.cookie = "cookieName=cookieValue; max-age=86400; path=/;"; 
    ```

    *   **删除 cookie**：

    ```
    document.cookie = "cookieName=; max-age=- (any digit); path=/;"; 
    ```

2.  通过使用过期：

    *   **为一天创建 cookie 的语法**：

    ```
    var expires = (new Date(Date.now()+ 86400*1000)).toUTCString();
    document.cookie = "cookieName=cookieValue; expires=" + expires + 86400) + ";path=/;" 
    ```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-10-31T18:17:31.523

这是我编写的另一个应用程序的功能。随意重用：

```
function writeCookie (key, value, days) {
    var date = new Date();

    // Default at 365 days.
    days = days || 365;

    // Get unix milliseconds at current time plus number of days
    date.setTime(+ date + (days * 86400000)); //24 * 60 * 60 * 1000

    window.document.cookie = key + "=" + value + "; expires=" + date.toGMTString() + "; path=/";

    return value;
}; 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-06-08T10:04:29.510

```
document.cookie = "cookie_name=cookie_value; max-age=31536000; path=/"; 
```

将设置一年的值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-31T09:23:21.307

像这样使用（[来源](http://www.w3schools.com/js/js_cookies.asp)）：

```
function setCookie(c_name,value,exdays)
{

var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie = c_name+"="+c_value+"; path=/";
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-16T14:59:43.637

我想第二波林的回答，并添加一件事，以防你仍然被卡住。这段代码确实可以设置特定的 cookie 过期时间。您可能遇到的一个问题是，如果您使用 Chrome 并通过“ [http://localhost](http://localhost) ...”或“file://”访问您的页面，Chrome 将不会存储 cookie。解决这个问题的简单方法是使用一个简单的 http 服务器（如果您还没有使用节点的 http-server）并以“ [http://127.0.0.1](http://127.0.0.1) ”显式导航到您的页面，在这种情况下，Chrome 将存储本地的 cookie发展。这让我有点挂断了，如果你不这样做，当你在控制台或开发工具中调查它时，你的过期密钥将只是具有“会话”的值。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-04-21T09:33:18.773

我使用一个函数来存储具有自定义过期时间（以天为单位）的 cookie：

```
// use it like: writeCookie("mycookie", "1", 30)
// this will set a cookie for 30 days since now
function writeCookie(name,value,days) {
  if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
  }
  else var expires = "";
  document.cookie = name+"="+value+expires+"; path=/";
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-24T07:54:45.847

您的浏览器可能配置为仅接受会话 cookie；如果是这种情况，浏览器会将任何到期时间转换为会话，您可以更改浏览器的此设置或尝试其他没有此类配置的浏览器

# magento - magento 消息块消息

> ID：13154558
> 
> 赞同：0
> 
> 时间：2012-10-31T09:14:38.417
> 
> 标签：magento

我想了解为什么这两个模板代码片段会给出不同的结果：

# 1：

```
<?php Mage::getSingleton('localsample/session')->addError('Test'); ?>
<div id="messages_localsample_sample"><?php echo Mage::app()->getLayout()->getMessagesBlock()->getGroupedHtml() ?></div> 
```

显示消息“测试”

和

# 2：

```
<?php Mage::getSingleton('localsample/session')->addError('Test'); ?>
<div id="messages_localsample_sample"><?php echo $this->getMessagesBlock()->getGroupedHtml() ?></div> 
```

什么都不显示，只在页面源中生成：

```
<div id="messages_localsample_sample"></div> 
```

（没有编码特定的 getMessageBlock 或 getGroupedHtml）

两个片段之间的唯一区别是：“Mage::app()->getLayout()”被“$this”替换。在原始的 Magento 模板上，我发现......“$this”版本......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:04:31.367

嗯......我认为这是因为我们之前有一个“Mage::getModel('core/layout')”而不是一个“Mage::getSingleton('core/layout')”......
按设计工作...... . ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:15:41.480

第二个示例不起作用，因为您的示例模块没有对 Mage::app()->getLayout() 的引用。所以你需要调用Mage::app()->getLayout()->getMessagesBlock()->getGroupedHtml()。

# git - 变基后我是否丢失了更改？

> ID：13154562
> 
> 赞同：100
> 
> 时间：2012-10-31T09:14:49.833
> 
> 标签：git, version-control

我最近重新调整了我正在研究的一个分支。这棵树的历史是这样的：

```
1 = 2 = 3 = 4
     \
      5 = 6 = 7
           \
            8 
```

我想将我的更改（图中的第 8 号）重新设置在主分支上（现在在图中最多提交 4）。所以我做了以下事情：

```
git checkout my_branch
git rebase master 
```

<很多 git mergetool/git rebase --skip 解决冲突>

只有现在当我运行时：

```
git checkout my_branch
git diff master 
```

我得到零差异。我没有丢失我的分支（我仍然可以从我保存的补丁中重新创建我的更改）但我找不到我所做的合并/变基。我做错什么了？我的更改与主服务器合并后，rebase 是否仍然存在于某个地方，还是我必须再做一次？

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-10-31T09:58:50.657

如果您没有看到任何差异，我怀疑您丢失了更改。您可能会使用[`git reflog`](http://git-scm.com/docs/git-reflog)来识别在变基之前存在的分支，并使用`git reset --hard <my-branch-tip-before-rebase>`来取回原始分支。是的，您将不得不再次运行该过程。:-(

不过，我不太确定您最终是如何使它们看起来相同的。我本来希望通过您给出的命令看到以下内容：

```
1 = 2 = 3 = 4              (master)
     \       \
      \       5' = 6' = 8' (my_branch)
       \
        5 = 6 = 7 
```

在这种情况下，您可能应该使用`rebase --onto`：

```
git rebase --onto master <commit id for 6> my_branch 
```

那会给你留下一个看起来像这样的图表：

```
1 = 2 = 3 = 4              (master)
     \       \
      \       8'           (my_branch)
       \
        5 = 6 = 7 
```

至于丢失您的更改，确实需要一些练习来处理合并冲突，尤其是当您有几个看起来几乎相同的大块时。我总是求助于查看提交引入的实际差异，并尝试梳理出该更改并以适当的方式将其与分支上已有的内容合并。我可以很容易地看到您的更改是如何丢失在那里的。

要记住的一件事。如果您没有预料到会出现一堆合并冲突——因为您觉得来源的分歧不够大，那么看到的就是做错事的警告标志。`git rebase --abort`最好通过执行、调查分支并再次检查您是否预计会发生冲突来备份。确保记下冲突发生的位置（在 rebase 将您踢到命令行之前通常有一个“正在应用...”）。这通常是一个很好的起点。

有时，冲突是不可避免的，而且处理起来很乏味。但我怀疑通过练习，你会更少遇到这个问题。

有关在分支之间移植更改的更多信息，请查看[git rebase](http://git-scm.com/docs/git-rebase)手册页。搜索“rebase --onto”。第一次点击应该让您进入讨论将更改移植到另一个分支的部分。

# jquery - 在 Jquery-ui 地图上添加多个标记

> ID：13154565
> 
> 赞同：3
> 
> 时间：2012-10-31T09:14:56.463
> 
> 标签：jquery, maps, markers, jquery-ui-map

我正在尝试将多个标记及其关联的信息窗口添加到 jquery-ui-map，但我无法获得任何结果。

我试过这个：

```
$('#map').gmap('addMarker', {'position': '<?php echo $city->city_latitude; ?>,<?php echo $city->city_longitude; ?>', 'bounds': true}); 
```

但它不起作用。

我的地图在此代码之前初始化并且可以工作：

```
$(function() {
    $('#map').gmap({'zoom':8, 'center': '45.558295,5.776062'});
}); 
```

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:55:57.993

好像您正试图在浏览器中执行 php，但这是行不通的。尝试先添加带有硬编码值的标记，然后您可以考虑如何将这些值传递给浏览器。例子：

```
(function() {
  var $map = $('#map');
  $map.gmap({zoom:8, center: '45.558295,5.776062'});
  $map.gmap('addMarker', {position: '45.558295,5.776062', bounds: true});
})(); 
```

如果这对您有用，那么您可以开始考虑如何将这些纬度和经度坐标从服务器传递到浏览器。例如，您可以使用数据属性或 ajax 调用。以下是使用数据属性的方法：

PHP/HTML：

```
<?php $city_lat_lng = "{$city->city_latitude},{$city->city_longitude}"; ?>

<div id="city-data" data-lat-lng="<?php echo $city_lat_lng; ?>" style="display:none;"></div>
...rest of your html code below 
```

JS：

```
(function() {
  var $map = $('#map');
  var cityLatLng = $('#city-data').data('lat-lng');
  $map.gmap({zoom:8, center: '45.558295,5.776062'});
  $map.gmap('addMarker', {position: cityLatLng, bounds: true});
})(); 
```

# javascript - XY scaling on graphael horizontal barcharts

> ID：13154568
> 
> 赞同：1
> 
> 时间：2012-10-31T09:15:02.493
> 
> 标签：javascript, graphael

I want my x axis to have a max (say 100)and scale the actual x values accordingly, so that the chart always has the same proportions, rather than the proportions being relative to the min and max value supplied in graphael horizontal barchart

# php - MySQL Query to a Zend DB Select

> ID：13154569
> 
> 赞同：1
> 
> 时间：2012-10-31T09:15:04.887
> 
> 标签：php, mysql, zend-framework, zend-db-select

I have a MySQL standard query that I need to convert into a `Zend_Db_Select` but I can't get it to work.

I get this error:

```
Select query cannot join with another table 
```

Here's the query:

```
// THE COUNTER
$subselect = $this->table->select()->from(
        array('x' => 'blog_comments'),
        array('x.post_id', new Zend_Db_Expr('count(*) as comments')))
    ->group('post_id');
// THE TOTAL SELECT
$select->from(array('p' => 'blog_posts'), array('p.*'))
       ->setIntegrityCheck(false)
       ->joinLeft(array(
           'x' => $subselect,
           'x.post_id = p.id', 
           array()
           )
       ); 
```

If someone can convert this, it would be great because I need that in `select()` mode because I use `Zend_Pagination`.

For those who want the full PHP function: [Pastebin](http://pastebin.com/ULGAp3cg) and the stack traces: [Pastebin](http://pastebin.com/jpyqSx35).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:36:57.700

表达式是`Count(*)`语句，而不是整个子查询。

```
$subselect = $this->table->select()->from(
    array('x' => 'blog_comments'),
    array('x.post_id', new Zend_Db_Expr('count(*) as comments'))
)->group('post_id');

$select->from(array('p' => 'blog_posts'), array('p.*'))
    ->joinLeft(array(
        'x' => $subselect,
        'x.post_id = p.id', 
        array()
    )); 
```

我不确定你是否真的需要一个子查询。无论如何，从一个简单的加入开始并以此为基础。

```
//getGateway = whatever method used to access the database adapter.
//SetIntegrityCheck(false) locks the tables from writes allowing tables to be joined
$select = $this->getGateway()->select()->setIntegrityCheck(false);
$select->from('blog_posts');//default $cols = *
$select->join('blog_comments', 'blog_comments.post_id' = 'blog_posts.post_id');//does it really matter what kind of join you use? They all work the same so use whichever you like.
$select->group('blog_comments.post_id'); 
```

一旦你得到使用默认值的查询，你可以对其进行细化，直到它按你想要的方式工作。

如果您正在执行查询以使用分页器，那么`count()`表达式是无用的，因为分页器将对每个查询应用限制和偏移量。

您也可以考虑反向执行此查询。您最好加入另一个方向，或者只在评论表上执行查询。如果没有看到你的结构的其余部分，这很难说。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:19:28.043

您可能需要：`setIntegrityCheck(false)`- 查看： http: [//framework.zend.com/manual/1.12/en/zend.db.select.html](http://framework.zend.com/manual/1.12/en/zend.db.select.html)了解更多信息

```
$select = $this->select()
->from(params) 
->setIntegrityCheck(false) 
->joinLeft(params)
->where(params); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:03:01.193

正如 Michael 已经提到的，您需要`setIntegrityCheck(false)`使用`Zend_Db_Select`.

`Error 1064`有点模棱两可，包含各种查询语法问题。所以我建议你把子查询用括号括起来：

```
$select->setIntegrityCheck(false)
    ->from(array('p' => 'blog_posts'), array('p.*'))
    ->joinLeft(array(
        'x' => new Zend_Db_Expr("({$subselect})"), 
        'x.post_id = p.id', 
        array()
    )); 
```

如果*这*不起作用，那么您的子选择一定有问题。试试`echo $subselect;`哪个会调用`__toString()` [魔术方法](http://php.net/manual/en/language.oop5.magic.php)并向您显示您的查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:54:34.477

我终于以另一种方式做到了。

我`CMW_Model_Comments`在视图中使用我的帖子 ID 来获取评论数。

```
// IN MY VIEW
echo $this->commentor->getCommentCount($post->id);

// IN MY CONTROLLER
$cmt = new CMW_Model_Comments();
$this->view->commentor = $cmt; 
```

它完美地工作！

# objective-c - NSFileManager directory contents retrieval methods parameter includingPropertiesForKeys: useless?

> ID：13154585
> 
> 赞同：2
> 
> 时间：2012-10-31T09:15:48.053
> 
> 标签：objective-c

I'm just playing around with NSFileManager and getting a large list of files (~200,000) from a directory.

In both available methods:

```
- (NSArray *)contentsOfDirectoryAtURL:(NSURL *)url includingPropertiesForKeys:(NSArray *)keys options:(NSDirectoryEnumerationOptions)mask error:(NSError **)error 
```

and:

```
- (NSDirectoryEnumerator *)enumeratorAtURL:(NSURL *)url includingPropertiesForKeys:(NSArray *)keys options:(NSDirectoryEnumerationOptions)mask errorHandler:(BOOL (^)(NSURL *url, NSError *error))handler 
```

There is a part to specify keys (includingPropertiesForKeys:) for stuff that should be pre-cached. However what I have noticed is that there is absolutely no difference whether I provide **nil** for that parameter or whether I provide the keys that I need i.e.: **@[NSURLContentModificationDateKey, NSURLFileSizeKey]**

No difference in execution speed and no difference in memory consumption(for both methods)

Does someone have some experience with this? Whats the purpose of that parameter then?

# java - Parsing non-standard XML

> ID：13154586
> 
> 赞同：-4
> 
> 时间：2012-10-31T09:15:54.307
> 
> 标签：java, xml, xml-parsing

The following text is not valid XML, as it is using non-standard tag names and values...

```
<?xml version="1.0" encoding="utf-8"?>
<Command>
    <Priority value='1'/>
    <DeviceId value='1111'/>
    <TimeOut value='30000'/>
    <Command value='GetState'/>
    <Value value='12465767890'/>
    <Number value='1'/>
    <State value='None'/>
</Command> 
```

How can I parse this non-standard XML in my Java application?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:22:13.700

那么，您所说的“不合规”或“不标准”是什么意思……？

*如果您的意思是它不合规，因为它使用单引号......*

首先，我很确定使用单引号已经符合 XML 标准？但是，如果您想使用任何标准的 XML 解析库，您可以首先使输入更加兼容，例如将所有`'`字符替换为`"`字符。

否则，可能会尝试`extend`使用标准 XML 解析库的某些组件，覆盖解析代码以搜索属性值对的单引号。

这些都不是很漂亮，但他们会完成这项工作。

*如果您的意思是它不合规，因为属性值对实际上被称为属性名称的“值”......*

没关系 - 你可以调用任何你想要的属性，只要它使用有效的字符。当然，它确实应该有一个有意义的名称，以便 XML 更易于理解，但称其为“值”也没有错。

标签名称也是如此——XML 没有标准的标签名称。XML 旨在允许您使用任何您想要的标记名称和属性名称，因为它不使用任何无效字符。在你的情况下，它都是英文字符，所以它是有效的。

*如果您在谈论没有结束标签...*

使用 ` 形式的单标签是有效的 XML，前提是您不需要将任何内容存储在标签中。如果您希望将内容存储在其中，则只需要打开和关闭标签。对于您的标签，它们只是具有属性值对的单个标签，这是完全有效的。

* * *

最终，如果可能的话，最好的方法是从生成输入的任何地方纠正输入——如果它不编写符合 XML 的输出，它就不是一个很好的 XML 生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:44:50.987

在 JDOM 中是：

```
 Element rootElement = new Element("EivCmd");
        Document doc = new Document(rootElement);
        Element Priority = new Element("Priority");
        rootElement.addContent(Priority);
        Priority.setAttribute(new Attribute("value", "1")); 
```

# javascript - Call Gridster multiple times

> ID：13154587
> 
> 赞同：0
> 
> 时间：2012-10-31T09:15:58.893
> 
> 标签：javascript, jquery, drag-and-drop, draggable, gridster

I love the drag and drop concept of Gridster, but I have a dynamic set of tiles that changes depending on live updates from Meteor. For example, lets say I have a Tiles array in a User model. When the Tiles array is updated by Meteor, it is hard to ascertain what was added to the Tiles array. Is there a way to call Gridster again on the same container but with new tiles?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:07:05.110

我不确定它到底是你想要完成的。`add_widget`但是您可以使用和添加和删除项目`remove_widget`。你可以看到使用`serialize_changed`.

# javascript - 滚动路径显示 jquery

> ID：13154592
> 
> 赞同：0
> 
> 时间：2012-10-31T09:16:15.117
> 
> 标签：javascript, jquery, html, css, tabs

我需要与此[演示](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxtabs/scrolling.htm?classic)类似的功能，但我只需要滚动选项卡标题的功能。

我在 div 中有元素列表，我需要滚动这些项目，如演示选项卡标题。

我尝试将绝对位置设置为内部元素。不过，我没有得到这个功能。

如何实现标签页眉滚动功能？

由于服务器端代码交互，我无法透露我的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:58:24.700

这是您所期望的演示

[http://jsbin.com/opufow/4/edit](http://jsbin.com/opufow/4/edit)

您需要先隐藏项目，然后使用动画滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:18:50.807

您可以使用 iscroll.js 水平或垂直滚动​​元素。这将为您提供平滑的滚动感觉。

检查演示链接

[http://iscroll-js.googlecode.com/hg-history/bd496ab69c553b6e3d294c5f68200513215f5e75/examples/horizo​​ntal-scroll/index.html](http://iscroll-js.googlecode.com/hg-history/bd496ab69c553b6e3d294c5f68200513215f5e75/examples/horizontal-scroll/index.html)

您可以从以下位置下载 Iscroll.js。

[http://cubiq.org/iscroll](http://cubiq.org/iscroll)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:45:40.857

试试这个： http: [//jsbin.com/welcome/42790](http://jsbin.com/welcome/42790) 我认为这就是你正在寻找的效果。这是源代码：

**HTML**

```
<!DOCTYPE html>
<html>
  <head>
    <title></title>
  </head>
  <body>
    <div class="scroll">
      <div id="parent" class="parent">
        <div class="block">1</div>
        <div class="block">2</div>
        <div class="block">3</div>
        <div class="block">4</div>
        <div class="block">5</div>
        <div class="block">6</div>
        <div class="block">7</div>
      </div>
    </div>
    <button id="leftButton">&lt;</button>
    <button id="rightButton">&gt;</button>
  </body>
</html> 
```

**CSS**

```
.parent {
  width: 364px;
  height: 52px;
  background: #EDC9FF;
  margin-left: 0px;
}
.block {
  width: 50px;
  height: 50px;
  background: #C9E2FF;
  border: 1px solid #8FC3FF;
  float: left;
}
.scroll {
  overflow: hidden;
  width: 200px;
} 
```

**JavaScript**

```
var timeout = 0;

window.onload = function () {
  var leftBtn = document.getElementById('leftButton'),
      rightBtn = document.getElementById('rightButton');

  leftBtn.addEventListener('mousedown', function () {
    multipleScroll(-2);
  }, false);

  leftBtn.addEventListener('mouseup', function () {
    clearTimeout(timeout);
  }, false);

  rightBtn.addEventListener('mousedown', function () {
    multipleScroll(2);
  }, false);

  rightBtn.addEventListener('mouseup', function () {
    clearTimeout(timeout);
  }, false);

};

function scroll(offset) {
  var parent = document.getElementById('parent'),
      current = parseInt(parent.style.marginLeft, 10) || 0;
  current += offset;
  parent.style.marginLeft = current + 'px';
}

function multipleScroll(offset) {
  timeout = setTimeout(function () {
    multipleScroll(offset);
    scroll(offset);
  }, 20);
} 
```

# php - 使用 PHP 提取具有特定类的 div 标签

> ID：13154595
> 
> 赞同：-2
> 
> 时间：2012-10-31T09:16:23.183
> 
> 标签：php, zend-framework, dom

有谁知道如何在 PHP 中只提取具有特定类的 div 标签？

```
<div class="abc">
</div>
<div class="def">
</div>
<div class="xyz">
</div> 
```

我只需要带有 class="abc" 的 div。我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:14:04.950

你想要的是：[XPath](http://php.net/manual/en/class.domxpath.php)

```
<?php
$html = new DOMDocument();
@$html->loadHtmlFile('thepage.html');
$xpath = new DOMXPath( $html );
$nodelist = $xpath->query( "//*[contains(@class, 'abc')]" );
foreach ($nodelist as $n){
  echo $n->nodeValue."\n";
}
?> 
```

**[更新]**

添加了新的 xpath 查询。试试看。

# windows-8 - In C# XAML Windows 8 Application Is It Possible Not to Use XAML

> ID：13154596
> 
> 赞同：0
> 
> 时间：2012-10-31T09:16:27.677
> 
> 标签：windows-8, microsoft-metro, winrt-xaml

I have come across with something on one of my colleague's code who is recently coding for a Win 8 Metro Style App(**C# XAML**) as me. The point that made me curious is that he did not use any XAML code(other than the declaration statements in .xaml file) while he wrote the application and it seems the app works. So can anyone tell me that **why/where** should I use XAML or **why/where** should I not?

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:10:02.073

这是一个偏好问题。有些人喜欢做最少的 XAML 并用 C#（代码隐藏）创建所有东西，有些人喜欢相反。我个人更喜欢在 XAML 中做尽可能多的工作。它是声明性的，您可以在其中表达相当复杂的结构，同时它仍然非常具有表达性和可读性。我认为您可以比等效的 C# 构造更容易理解 XAML 构造。

# c# - C# WebBrowser Control - script errors, workaround?

> ID：13154600
> 
> 赞同：3
> 
> 时间：2012-10-31T09:16:45.717
> 
> 标签：c#, javascript, browser, controls

I'm completely aware that a question of similar context has been asked many times (in many places including here), and potentially solved - I have definitely made a decent amount of research regarding the matter and have also realized the reason behind the script errors is most likely due to the WebBrowser control using the IE7 platform rather than the latest (IE9 in my case - I believe it's not really optional what control it uses)

Someone did post a work around, however it involves editing the registry via. code (something I cannot do as this application is being made out of my own good will for the company I work for), it doesn't mean however that i'm allowed to do things permitted to Administrators alone, especially tampering with something as delicate as the registry.

So in the end up, I want to ask you guys is there anyway at all you could provide me with a solution that 1\. is inclusive and doesn't require any extra work, and 2\. isn't just suppressing the errors, but instead adding that functionality back in by making it work (as some things that use scripts are quite key).

Is there a way of getting the control to use a different browser package, one I could possibly include in the installation setup?

Regards,

Hugh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T03:33:42.703

首先，如果你放：

```
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

```

在页面的 <header> 部分中，它将使用机器上安装的 IE 版本而不是默认的 IE 7 呈现

对于您的主要问题，为了避免 JavaScript 错误：

```
    WebBrowser wb = new WebBrowser();
    wb.ScriptErrorsSuppressed = true;

    //可选的：
    wb.ScrollBarsEnabled = false;

```

我用它来制作网页截图

# xml - 在 VB 脚本和经典 ASP 中删除 XML 中的节点

> ID：13154602
> 
> 赞同：1
> 
> 时间：2012-10-31T09:16:51.597
> 
> 标签：xml, asp-classic, vbscript

我需要删除 XML 中的一个节点，我的 XML 如下所示

```
<message_version>Test</message_version>
<responder_id>My test XML file</responder_id>
</m_control>
<m_content>
<b_control>
    <quote_response_status>error</quote_response_status>
    <quote_error_note>
        <reason>
            <note>
                <text>An error occurred.
                </text>
            </note>
        </reason>
    </quote_error_note>
</b_control> 
```

在上面的 xml 中，我需要删除节点“文本”和“注释”，并保留文本“发生错误”。原封不动。我怎样才能做到这一点。

基本上，在删除节点“文本”和“注释”后，我需要如下 XML

```
<message_version>Test</message_version>
<responder_id>My test XML file</responder_id>
</m_control>
<m_content>
<b_control>
    <quote_response_status>error</quote_response_status>
    <quote_error_note>
        <reason>
            An error occurred.
        </reason>
    </quote_error_note>
</b_control> 
```

我尝试了以下但没有成功：

```
sXMLPath = "//message/m_content/b_control/quote_error_note/reason"
Set sRemoveText = m_objResponseXML.selectSingleNode(sXMLPath & "/note/text")
Set sRemoveNote = m_objResponseXML.selectSingleNode(sXMLPath & "/note")

If Not sRemoveText is Nothing Then
    m_objResponseXML.selectSingleNode(sXMLPath & "/note").removeChild(sRemoveText)
    sErrorMsg = GetNodeText(sXMLPath & "/note/text", m_objResponseXML)
End if
If Not sRemoveText is Nothing Then
    m_objResponseXML.selectSingleNode(sXMLPath).removeChild(sRemoveNote)
End If

If sErrorMsg <> "" Then
    m_objResponseXML.selectSingleNode(sXMLPath).text = sErrorMsg
End If 
```

任何形式的帮助都深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:02:22.377

用代码举例说明 Rafael 的建议，并在阅读文档时为您提供一些搜索/关键字：

```
Option Explicit

Dim oXML : Set oXML = CreateObject("MSXML2.DomDocument")
If oXML.load(".\005.xml") Then
   WScript.Echo oXML.xml
   Dim ndReason : Set ndReason = oXML.selectSingleNode("/b_control/quote_error_note/reason")
   If ndReason Is Nothing Then
      WScript.Echo "not reasonable"
   Else
      Dim sReason : sReason = ndReason.selectSingleNode("note/text").text
      ndReason.removeChild ndReason.firstChild
      WScript.Echo oXML.xml
      ndReason.appendChild oXML.createTextNode(sReason)
      WScript.Echo oXML.xml
   End If
Else
   WScript.Echo oXML.parseError.reason
End If 
```

输出：

```
cscript 005.vbs
<b_control>
        <quote_response_status>error</quote_response_status>
        <quote_error_note>
                <reason>
                        <note>
                                <text>An error occurred.
                </text>
                        </note>
                </reason>
        </quote_error_note>
</b_control>

<b_control>
        <quote_response_status>error</quote_response_status>
        <quote_error_note>
                <reason>
                </reason>
        </quote_error_note>
</b_control>

<b_control>
        <quote_response_status>error</quote_response_status>
        <quote_error_note>
                <reason>An error occurred.</reason>
        </quote_error_note>
</b_control> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:20:29.083

以您想要的方式删除数据，违背了 XML/HTML 层次结构哲学，其中每个标记都包含在另一个标记中。

简单的解决方案是复制字符串删除标签并填充原因标签的文本属性来实现这一点。

否则会**变坏**

要操作 XML，您可以使用[MSXML 对象参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms763742%28v=vs.85%29.aspx)

## 编辑

基于所示示例

```
sXMLPath = "//message/m_content/b_control/quote_error_note/reason" 
```

你的 XPath 字符串不正确，它是正确的

```
sXMLPath = "//b_control/quote_error_note/reason" 
```

# php - 如何解决 favicon.ico 在 apache 上未找到错误

> ID：13154603
> 
> 赞同：8
> 
> 时间：2012-10-31T09:16:52.887
> 
> 标签：php, apache

在 apache 上运行 index.php 文件时出现以下错误

```
File does not exist: /home/../../../../favicon.ico 
```

这是什么意思？我应该改变什么来解决它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-31T09:27:10.687

Favicon.ico 是一个图标文件，显示在浏览器栏中的 URL 旁边。（请参阅 URL 旁边的 StackExchange 图标）。

没有办法阻止浏览器请求它。您可以创建一个 favicon，也可以创建一个名为 favicon.ico 的零字节文件并将其放置在 Web 根目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-04T17:08:48.503

如果您不是从根目录工作，我发现这会有所帮助。这为我消除了错误。它被放置在头部。

```
<link rel="icon" href="favicon.png" sizes="16x16" type="image/png"> 
```

# sql - Delete from database all selected rows except first two

> ID：13154604
> 
> 赞同：3
> 
> 时间：2012-10-31T09:16:55.693
> 
> 标签：sql, database, sqlite

I need to delete all dates from database except first two selected dates:

```
SELECT DateColumn 
FROM Table 
GROUP BY date(DateColumn) 
ORDER BY DateColumn DESC 
```

I want in one query to delete all dates except first two.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:20:08.207

```
delete from table where DateColumn not in(
SELECT DateColumn 
FROM Table 
GROUP BY date(DateColumn) 
ORDER BY DateColumn DESC LIMIT 2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T09:20:14.717

```
DELETE FROM Table
      WHERE DateColumn NOT IN (SELECT DateColumn 
                                 FROM Table 
                             GROUP BY date(DateColumn) 
                             ORDER BY DateColumn DESC
                                LIMIT 2); 
```

# c# - C#中的SQL连接字符串

> ID：13154605
> 
> 赞同：3
> 
> 时间：2012-10-31T09:16:57.777
> 
> 标签：c#, sql, database, connection-string

我在文章中阅读了不同的连接字符串编写方式

> [http://www.connectionstrings.com/sql-server-2012](http://www.connectionstrings.com/sql-server-2012)

你能解释一下在哪里使用`Server`和在哪里使用`Data Source`吗？同样在哪里使用`Database`和在哪里使用`Initial Catalog`。请详细说明。我是 SQL Server 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:25:46.753

这些连接字符串关键字可以互换使用。当 ADO.Net 解析连接字符串时，它将创建一个`SqlConnectionStringBuilder`类（在 Sql Server 的情况下）并将带有连接字符串的关键字映射到`SqlConnectionStringBuilder`属性。

例如，“数据源”、“服务器”、“地址”、“地址”和“网络地址”都映射到`DataSource`属性——您可以使用其中任何一个来指定数据源。同样，“初始目录”和“数据库”映射到`InitialCatalog`属性。

查看 MSDN 上的[SqlConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/dce36088%28v=vs.100%29.aspx)类及其属性，您可以在其中找到有关其关键字映射的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:26:20.043

您可以使用不同的关键字组成有效的 ADO.NET 连接字符串。有很多别名，例如：“数据源”和“服务器”表示同一个东西。“数据库”和“初始目录”也是如此。

您可以在此处找到有效关键字及其别名的列表：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)

# c# - Why does Windows XP in best performance mode shows wrong icon for a split second?

> ID：13154607
> 
> 赞同：0
> 
> 时间：2012-10-31T09:16:58.287
> 
> 标签：c#, winforms, .net-3.5, windows-xp, icons

In the last version of our software we changed the icon used everywhere in the application. This because the corporate identity changed and the old green icon needed to change to the new red icon.

What I did to change it:

*   Use the new icon in the Application settings of the startup project.
*   Use the new icon on all the forms (only changed 1 form because all others inherit from this one).

Everything works perfect accept for Windows XP in Best Performance mode (right click Computer, Properties, Advanced, Presentation settings).

When starting the application it shows the Login screen in the taskbar with the old icon which changes in the new icon within a split second. Of course; the slower the machine, the longer the old icon is visible.

Seems to me it has something to do with caching of the old icon.

Does anyone know why this is happening or how to fix it?

# jquery - 密码字段上的 jQuery 验证不起作用

> ID：13154611
> 
> 赞同：0
> 
> 时间：2012-10-31T09:17:16.523
> 
> 标签：jquery

我试图在用户将密码字段留空时返回一条错误消息，但它似乎不起作用。我该怎么做呢？我正在使用 jQuery 验证以及最新的 jQuery 插件 - 遵循此处的示例：http: [//docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)。

到目前为止，这是我的代码：http: [//jsfiddle.net/k6cvb/](http://jsfiddle.net/k6cvb/)。

**HTML**

```
<div id="logo_box"></div>
<form action="#" id="login_form" method="post">
  <div id="login_box">
    <div style="width: 100%;">Department<br />
      <select style="width: 250px; padding-left: 5px;" class="required">
        <option selected="selected">CO</option>
      </select>
    </div>
    <br />
    <div style="width: 100%; padding-bottom: 20px; ">Password<br />
      <input id="field" type="password" style="width: 243px;  padding-left: 5px;" class="required"/>
    </div>
    <div style="float: left; padding-top: 6px;"> <a id="forgotpass_link">Forgot your password?</a></div>
    <div style="float:right">
      <input id="login_btn" type="submit" value="Log in"/>
    </div>
  </div>
  </form>
  <div align="center" id="footer">
  </div>​ 
```

**CSS**

```
body {
    margin: 0;
    font-family: Helvetica, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    color: #a0a0a0;
    border-top: 3px solid #EAEAEA;

}
#logo_box {
    margin: auto;
    width: 110px;
    margin-top: 50px;
    padding-bottom: 20px;
}
#login_box {
    width: 250px;
    height: 155px;
    margin: auto;
    padding: 20px;
    font-size: 14px;
    margin-top: 1px;
    background-color: #F0F0F0;
    color: #333;
    border: 1px solid #E1D0E8;
}
select, #field {
    border: 1px solid #DDD;
    height: 30px;
    font-size: 14px;
}
#login_btn {
    border: 1px solid #DDD;
    height: 30px;
    font-size: 14px;
    width: 80px;
    font-weight: bold;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;    
    background: #F6F6F6;
    color: #ABABAB;
}

#login_btn:hover {
    border: 1px solid #C06;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;    
    background: #C06 ;
    color: #fff;
    cursor: pointer;
}

#login_btn:active {
    border: 1px solid #C06;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;    
    background: #fff;
    color: #C06;
    cursor: pointer;
}

#forgotpass_link {
    color: #306;
}

#forgotpass_link:hover {
    color: #C06;
    cursor: pointer;
}

#footer {
    padding-top: 15px;
    font-size: 12px;
}​ 
```

**JS**

```
 $(document).ready(function(){
    $("#login_form").validate();
  });​ 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:23:05.567

试试这个 ：

```
 $(document).ready(function(){
  $("submit buton id").live({
      click : function(e){
          e.preventDefault();

  if($("#login_form").validate()){
       //write code to submit the form
  }else{
       //do whatever you want if the form is not valid
   }
  }
  }); 
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:34:31.840

您的输入标签没有名称属性...请检查..添加它并且它有效

```
input id="field" type="password" style="width: 243px;  padding-left: 5px;" class="required" name="password"/>  // added name filed.. password in this case 
```

**请注意：**
name 属性用于引用 JavaScript 中的元素，或在提交表单后引用表单数据。

**只有具有 name 属性的表单元素才会在提交表单时传递它们的值。**

试试这个小提琴...

[http://jsfiddle.net/k6cvb/16/](http://jsfiddle.net/k6cvb/16/)

CSS

```
label.error { float: none; color: red; padding-left: .5em; vertical-align: top; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:40:16.737

而不是 class="required" 尝试在输入字段中仅使用“required”

```
<input id="field" type="password" style="width: 243px;  padding-left: 5px;" required/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T09:41:23.370

对于 Jquery 插件验证，您必须添加`field name`和`class="required"` make 字段 required 和`minlength="6"`make input string length minumum 6 必要的。

```
 <input id="field" type="password" style="width: 243px;  padding-left: 5px;" class="required" class="required password"  name="password" minlength="6"/> 
```

谢谢。

# android - 安卓设备中的主机模式

> ID：13154618
> 
> 赞同：2
> 
> 时间：2012-10-31T09:17:32.653
> 
> 标签：android

几天前，我买了一个罗马尼亚安卓平板电脑 EvoTab3，安卓版本为 4.0.3，内核版本为 3.0.8+。我想将鼠标、闪存等一些设备连接到将作为主机站的平板电脑，使用 OTG 迷你电缆连接到母亲 a。我做了以下步骤：1）USB调试打开2）下载一个显示信息的应用程序USB主机控制器：“未找到S3C USB主机驱动程序”“存在根集线器，USB主机模式处于活动状态！” 3) 我按照文章[Android USB host and hidden devices](https://stackoverflow.com/questions/11183792/android-usb-host-and-hidden-devices)中的步骤进行操作。

我没有得到任何结果，未检测到连接的设备。如果您有一些想法，请帮助我解决这个问题。

# iphone - 更新内部应用程序——iOS 企业开发者计划

> ID：13154619
> 
> 赞同：13
> 
> 时间：2012-10-31T09:17:33.900
> 
> 标签：iphone, ios, iphone-developer-program, ad-hoc-distribution, in-house-distribution

我正在寻找有关**iOS 企业开发人员计划的信息。**根据我的阅读，内部分发允许公司在不知道设备 UDID 的情况下在内部分发 iOS 应用程序（与 ad-hoc 分发不同）。使用这些配置文件构建的应用程序在*技术上*可以安装在任何 iOS 设备上（设备数量不受限制），但许可协议规定我们不能将企业应用程序分发给公司以外的任何人。

根据我的阅读，我们可以通过企业内部所需的任何媒体分发应用程序。在我们的例子中，我们想把`.ipa`它和它`.plist`放在我们的 Intranet 上（通过身份验证保护）。我们的用户可以使用任何 iOS 设备浏览到该站点，输入他们的凭据，单击链接并安装应用程序。那太棒了。

但是更新如何工作？我找不到有关此主题的信息。如果我创建应用程序的新版本，所有设备都会自动更新而无需我的干预？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T09:29:59.260

Updates have two different scenarios - 1) Server driven updates where you don't need to modify your code. In this case your App should be intelligent enough to poll server for any updates, download them, and reconfigured itself. I am doing this for our native Apps. And 2) You have updated the code. In this case you will need to re-install the App on each device to update it.

In your case I think you are looking for solution to scenario-2\. You can implement something similar to what Apple does when you submit updated version to Appstore. They display updated apps in Updates section and you re-install the App. You can have some section in your app that check if there is an updates and calls itunes service with your HTML link which will directly give pop-up to users asking for installing updated app. Second option you can use Push notification after you have updated .ipa and .plist file with updated version information.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T19:23:09.053

其他选项包括使用 MDM（移动设备管理）或 MAM（移动应用程序管理）解决方案。

MDM 解决方案允许“注册”的用户推送新的更新，但是，用户必须请求更新并被提示手动安装它们。用户也无法接收推送通知消息，除非他们安装额外的客户端应用程序。

MAM 解决方案可以为整个应用生命周期（包括更新）提供支持。提供此功能的一个供应商解决方案是 Apperian EASE，它允许组织中的用户安装和运行内部应用程序。如需更多信息，请[访问 http://www.apperian.com](http://www.apperian.com)。

EASE 可以通过推送通知通知所有已安装应用程序的用户有新版本（更新）（这通过自定义本机应用程序目录发生）。

开发人员可以使用 EASE SDK 向服务器发出查询，以查看是否有新的更新可用和/或需要，如果是，则自动安装更新。EASE SDK 文档位于[https://apperian.jira.com/wiki/display/pub/EASE+SDK+Guide](https://apperian.jira.com/wiki/display/pub/EASE+SDK+Guide)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:35:18.383

更新您的应用后，将其上传到与以前相同的位置。因此，所有用户只需要重新安装。然后它将与应用程序中的新更改正常工作。

# drupal - 如何在drupal 7的搜索结果中自定义$snippet

> ID：13154620
> 
> 赞同：1
> 
> 时间：2012-10-31T09:17:38.163
> 
> 标签：drupal

我只想在 search-result.tpl.php 中显示节点标题和节点正文。我已经在管理内容类型的显示中配置了显示，并隐藏了除正文之外的所有字段。但是，当我去搜索一个页面时，搜索结果显示语言+正文。

例如：$snippet 的内容是“正文的英文内容”。其中“英文”是一种语言，“内容主体”是节点主体。我不知道为什么它在搜索结果页面中显示语言。

我的网站是英语和越南语两种语言。当我用英语搜索时，搜索结果显示“Tiếng việt Content of body”。当我用越南语搜索时，搜索结果显示“正文的英文内容”。

如何在搜索结果中删除节点正文之前的语言“English”或“Tiếng Việt”？

你可以在这个测试网站上看到。

[http://nepivn.wiwisol.com/en/search/node/content](http://nepivn.wiwisol.com/en/search/node/content) http://nepivn.wiwisol.com/vi/search/node/mi%C3%AAu%20t%E1%BA%A3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-25T14:06:05.540

Not sure if you fixed this... since this issue is almost 2 years old but I found the "Hide translation links" setting on this page: admin/config/regional/i18n/node. Since I wanted to hide the translation links everywhere and not just the Search results, I'm not sure if this will help you.

# compass-sass - 如何使用 compass sass 生成空的 CSS 项目？

> ID：13154627
> 
> 赞同：0
> 
> 时间：2012-10-31T09:18:22.780
> 
> 标签：compass-sass

指南针默认不获取 css 项目，但我想始终保留这些项目，因为有时我可以使用萤火虫代码这些空项目。任何方式来保留它们，如何设置？
![在此处输入图像描述](../Images/d6a461eb64c12ea2ba034abc0aa49452.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:34:26.257

有一个快速的解决方案：在每个不可删除的属性中添加注释以保留。

```
.help_center {
  /*! keep */
  .nav {
    /*! keep */
  }
} 
```

[文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#comments)说：

> 当评论的第一个字母是 ! 时，即使在压缩输出模式下，评论也会被插值并始终呈现为 css 输出。这对于向生成的 CSS 添加版权声明很有用。

# graph - ubuntu 12.04 上的 cacti 不显示图像，rrdtool 什么也没说

> ID：13154632
> 
> 赞同：2
> 
> 时间：2012-10-31T09:18:45.507
> 
> 标签：graph, ubuntu-12.04, rrdtool, cacti

我尝试通过 apt-get 和来源安装仙人掌，我得到相同的结果 - 查看图表时 - 没有图像......

做了几件事：

rra 和日志文件夹的 chowning，修复了 crontab 问题（crontab -u {apache user} 而不是 crontab 中的默认设置用户），配置了 snmp（auth、v3、publicdomain）。

当我从控制台启动 poller.php - 没关系，从 crontab - 也可以，更新 ls -l rra 文件夹上的时间戳，如果我从控制台启动来自调试信息的图形语句（“rrdtool create”语句）我得到 png图像，有时使用 nan，但我在我的主文件夹中获取图像（rrdtool create > test.png）。但从浏览器 - 我什么也没得到......

(cacti) 日志不包含任何错误...

我不知道下一步该怎么做... ps。重建 rra 缓存并不能解决问题。

* * *

安装软：

```
apache2 
nginx
mysql
php5
rrdtool
snmp
net-snmp (from sources)
spine
php-snmp
php-gd
and more.. if need some specific information - I will provide it 
```

# php - 如何从 javascript 获取回显值到 PHP 变量？

> ID：13154634
> 
> 赞同：0
> 
> 时间：2012-10-31T09:18:50.073
> 
> 标签：php, javascript, ajax, variables, echo

在以下网站[http://www.e-domov.cz/oblozkove-zarubne](http://www.e-domov.cz/oblozkove-zarubne)当您查看表“TYP”（英文类型）并将单选按钮更改为第二个时，javascript动态生成文本，您可以看到在右侧面板上。

这是由这部分代码发生的：

**right3.php**

```
Typ: <span id="zarubneStena"><?= $_SESSION['zarubneStena']; ?></span><br> 
```

**脚本.js**

```
function nastavZarubneTyp2(value)
 {
$('#zarubneStena').html(value);
$.get("/C/AJAX/typZarubne2.php", { zarubne: value});
} 
```

**typZarubne2.php**

```
<?php
     session_start();

      $_SESSION['zarubneStena']=$_GET['zarubne']; 
?> 
```

**oblozkove-zarubne.php**

```
<td><input type="radio" name="typ<?php $uid=uniqid();echo $uid;?>" checked="checked" onClick="nastavZarubneTyp2('Na stěnu')"></td><td>Klasická obložková zárubeň</td>

<td><input type="radio" name="typ<?php echo $uid;?>" onClick="nastavZarubneTyp2('Do stavebního pouzdra');"></td><td>Obložková zárubeň pro posuvné dveře do stavebního pouzdra</td> 
```

我对这张唱片不太了解：

```
 Typ: <span id="zarubneStena"><?= $_SESSION['zarubneStena']; ?></span><br> 
```

所以我想要一些建议如何动态地获取由 javascript/AJAX 实时生成的 $_SESSION['zarubneStena'] 的值。我知道，很难理解我想要什么，但我希望有人能提供帮助。太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:22:54.250

你可以有如下的东西：

```
<?php session_start(); ?>

<div id="hiddenDiv" style="display:none">
    <?php echo $_SESSION['zarubneStena']; ?>
</div>

<script>
    var text; 
    text = $('#hiddenDiv').text();
</script> 
```

混合两种技术有点作弊，但它有效;-)

我也不推荐这种习惯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:27:45.273

`<?= $_SESSION['zarubneStena']; ?>`由服务器端的 php 生成。会话存储了一个键名“zarubneStena”——但这不是你想要的。

html页面中的代码正在发送数据：

```
<td><input type="radio" name="typ5090ee43d6d70" checked="checked" onClick="nastavZarubneTyp2('Na stěnu')"></td><td>Klasická obložková zárubeň</td>
<td><input type="radio" name="typ5090ee43d6d70" onClick="nastavZarubneTyp2('Do stavebního pouzdra');"></td><td>Obložková zárubeň pro posuvné dveře do stavebního pouzdra</td> 
```

注意`onClick="nastavZarubneTyp2('Na stěnu')"`- 这是更新文本的内容。

它在 oblozkove-zarubne.php 中，并且是键 'zarubne' 的 GET 值 - SESSION['zarubneStena'] 是从中设置的。

希望有帮助。也许它只是混淆。

# jquery - 绕过带有嵌套子级的 HTML 同级

> ID：13154645
> 
> 赞同：0
> 
> 时间：2012-10-31T09:19:17.817
> 
> 标签：jquery

我想遍历嵌套在`<table>`标签下几层的表行。

我认为我能做的事情是

```
var row = jQuery("#views-form-transport-files-page > table > tbody > tr");
jQuery.each(row, function(index, value){
    console.log(value);
}); 
```

在我的浏览器控制台中，这根本不输出任何内容。但是，我尝试输出几个元素，比如更接近父元素的元素。大多数时候，如果我想通过输出大多数元素，`console.log(".my-element-with-children");`结果会得到空方括号，手上有一个对象。

所以我真的很困惑如何定位那些`tr`s并循环它们如果我不能使用这种`element > element > element`方法？

```
 <div class="view view-transport-files view-id-transport_files view-display-id-page transport-files-view view-dom-id-03505a184244d1fde35eac370a04bbf4">

      <div class="view-filters">
      <form action="/transport-files" method="get" id="views-exposed-form-transport-files-page" accept-charset="UTF-8"><div><div class="views-exposed-form">
  <div class="views-exposed-widgets clearfix">
          <div id="edit-field-transp-file-number-value-wrapper" class="views-exposed-widget views-widget-filter-field_transp_file_number_value">
                  <label for="edit-field-transp-file-number-value">
            Transport file number filter          </label>
                        <div class="views-widget">
          <div class="form-item form-type-textfield form-item-field-transp-file-number-value">
 <input type="text" id="edit-field-transp-file-number-value" name="field_transp_file_number_value" value="" size="30" maxlength="128" class="form-text" />
</div>
        </div>
      </div>
                    <div class="views-exposed-widget views-submit-button">
      <input type="submit" id="edit-submit-transport-files" name="" value="Apply" class="form-submit" />    </div>
      </div>
</div>
</div></form>    </div>

      <div class="view-content">
      <div class="views-form"><form action="/transport-files" method="post" id="views-form-transport-files-page" accept-charset="UTF-8"><div><input type="hidden" name="form_build_id" value="form-5qC8G26t49Mw4209HaFKb6GSX4Cnzt3sIsrcUvOobB8" />
<input type="hidden" name="form_token" value="rN22iXS4r0LeXV3rEEaAcVbWi8hOtvG_GyVP6PYICLQ" />
<input type="hidden" name="form_id" value="views_form_transport_files_page" />
<table class="views-table cols-29" >
        <thead>
      <tr>
                  <th class="views-field views-field-field-transp-file-number" >
            <a href="/transport-files?field_transp_file_number_value=&amp;order=field_transp_file_number&amp;sort=asc" title="sort by Transport file number" class="active">Transport file number</a>          </th>
                  <th class="views-field views-field-field-tf-customer" >
            Client          </th>
                  <th class="views-field views-field-field-tf-trailer-nr" >
            Trailer number          </th>

              </tr>
    </thead>
    <tbody>
          <tr class="odd transport-files-row views-row-first">
                  <td class="views-field views-field-field-transp-file-number" >
            <a href="/node/192/edit">43100021</a>          </td>
                  <td class="views-field views-field-field-tf-customer" >
                      </td>
                  <td class="views-field views-field-field-tf-trailer-nr" >
            Trailer 3          </td>
                  <td class="views-field views-field-field-transp-file-load-date" >
            <span class="date-display-single">2012-10-24</span>          </td>
                  <td class="views-field views-field-field-tf-loading-place" >
                      </td>
                  <td class="views-field views-field-field-tf-driver-loading" >
                      </td>
                  <td class="views-field views-field-field-tf-deliv-ferry-comp" >
                      </td>
                  <td class="views-field views-field-field-deliv-ferry-price" >
                      </td>
                  <td class="views-field views-field-field-transp-file-deliv-date" >
            2012-10-24 00:00:00          </td>
                  <td class="views-field views-field-field-tf-delivery-place" >
                      </td>
                  <td class="views-field views-field-field-tf-driver-deliverty" >
                      </td>
                  <td class="views-field views-field-field-tf-invoice-nr" >
            3366554488          </td>
                  <td class="views-field views-field-field-tf-price-amount  views-field-editablefield" >
            <div id="editablefields-field-tf-price-amount" class="editablefield-item"><div class="field-type-number-float field-name-field-tf-price-amount field-widget-number form-wrapper" id="edit-field-tf-price-amount-0-field-tf-price-amount"><div                               id="field-tf-price-amount-0-field-tf-price-amount-add-more-wrapper"><div class="form-item form-type-textfield form-item-field-tf-price-amount-0-field-tf-price-amount-und-0-value">
  <input type="text" id="edit-field-tf-price-amount-0-field-tf-price-amount-und-0-value" name="field_tf_price_amount[0][field_tf_price_amount][und][0][value]" value="5000" size="12" maxlength="10" class="form-text" />
</div>
</div></div><div class="form-actions form-wrapper" id="edit-field-tf-price-amount-0-actions"><input type="submit" id="edit-field-tf-price-amount-0-actions-submit" name="submit-field_tf_price_amount-0" value="Save" class="form-submit" /></div></div>          </td>
                  <td class="views-field views-field-field-transp-file-currency  views-field-editablefield" >
            <div id="editablefields-field-transp-file-currency" class="editablefield-item"><div class="field-type-list-text field-name-field-transp-file-currency field-widget-options-select form-wrapper" id="edit-field-transp-file-currency-0-field-transp-file-currency"><div class="form-item form-type-select form-item-field-transp-file-currency-0-field-transp-file-currency-und">
  <label for="edit-field-transp-file-currency-0-field-transp-file-currency-und"> <span class="form-required" title="This field is required.">*</span></label>
 <select id="edit-field-transp-file-currency-0-field-transp-file-currency-und" name="field_transp_file_currency[0][field_transp_file_currency][und]" class="form-select required"><option value="€ "> €&lt;/option><option value="£ " selected="selected"> £</option></select>
</div>
</div><div class="form-actions form-wrapper" id="edit-field-transp-file-currency-0-actions"><input type="submit" id="edit-field-transp-file-currency-0-actions-submit" name="submit-field_transp_file_currency-0" value="Save" class="form-submit" /></div></div>          </td>
                  <td class="views-field views-field-clone-node" >
            <a href="/node/192/clone?destination=transport-files">clone</a>          </td>
                  <td class="views-field views-field-field-tf-baf-eb  views-field-editablefield" >
            <div id="editablefields-field-tf-baf-eb" class="editablefield-item"><div class="field-type-number-float field-name-field-tf-baf-eb field-widget-number form-wrapper" id="edit-field-tf-baf-eb-0-field-tf-baf-eb"><div id="field-tf-baf-eb-0-field-tf-baf-eb-add-more-wrapper"><div class="form-item form-type-textfield form-item-field-tf-baf-eb-0-field-tf-baf-eb-und-0-value">
  <input type="text" id="edit-field-tf-baf-eb-0-field-tf-baf-eb-und-0-value" name="field_tf_baf_eb[0][field_tf_baf_eb][und][0][value]" value="" size="12" maxlength="10" class="form-text" />
</div>
           <td class="views-field views-field-field-tf-shunts-enz" >

                  <td class="views-field views-field-field-tf-with" >
                      </td>
                  <td class="views-field views-field-field-tf-ex" >
                      </td>
                  <td >
            <a href="/transport-file/mail/192">Mail sturen</a>          </td>
              </tr>
      </tbody>
</table> 
```

这个想法是针对那些嵌套的输入元素并应用`.onfocus();`，`.onfocus();`所以我可以计算这些值并将这些值放在同一行的另一个输入元素中。所以基本上我的客户希望将它`table`与类似功能的 excel 表一起使用。

最初这个表每行有更多的 td，但我粘贴了这个较短的 html，因为很多 td 在结构上是相似的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:23:15.287

[jQuery.each()](http://api.jquery.com/jQuery.each/)用于循环普通对象或数组，但对于循环 jquery 对象，您最好使用[.each()](http://api.jquery.com/each/)方法，如下所示：

```
var row = jQuery("#views-form-transport-files-page > table > tbody > tr");
row.each(function(i) {
   console.log( $(this)[0].tagName );
}); 
```

# .net - 使用隐式构造函数将 StructLayout 属性添加到 F# 类型

> ID：13154650
> 
> 赞同：4
> 
> 时间：2012-10-31T09:19:45.850
> 
> 标签：.net, f#, structlayout

我有：

```
type Package =
    abstract member Date : int
    abstract member Save : unit -> unit

[<type:StructLayout(LayoutKind.Sequential, Pack=1, CharSet=CharSet.Ansi)>]
type Instant(date : int, value : int) =
    let mutable _date = date
    let mutable _value = value
    member X.Value : int = _value
    interface Package with    
        member X.Date : int = _date
        member X.Save() = ... 
```

但出现错误：**只有没有隐式构造函数的结构和类才能被赋予“StructLayout”属性**

所以我意识到它必须是相似的：

```
type Instant =
    struct
        val Date : byte array
        ... 
```

但是这样我就失去了我的界面。例如，在 C# 中，`type:StructLayout`可以为这种类型的类添加（我认为）。我必须如何重构我的代码以避免此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:40:16.440

正如错误消息所说，`StructLayout`应该使用[显式构造函数](http://msdn.microsoft.com/en-us/library/dd233233.aspx)：

```
type Package =
    abstract member Date : int
    abstract member Save : unit -> unit

[<type:StructLayout(LayoutKind.Sequential, Pack=1, CharSet=CharSet.Ansi)>]
type Instant =
    val mutable Date: int
    val mutable Value: int
    new(date, value) = {Date = date; Value = value}

    interface Package with
        member x.Date = x.Date
        member x.Save() = x.Value |> ignore 
```

如果您还有任何问题`FieldOffset`，请查看[此处](http://apollo13cn.blogspot.dk/2012/02/f-warning-9.html)的代码示例。

# c# - 引用来自另一个 C#/.NET 项目的内容

> ID：13154652
> 
> 赞同：0
> 
> 时间：2012-10-31T09:19:51.843
> 
> 标签：c#, .net, visual-studio-2010

我有一个带有子文件夹 MySubFolder 的项目 MyProject，其中包含一些内容 MyContent.txt。MyContent.txt 文件的属性设置为“CopyAlways”和“Content”。

在另一个项目 OtherProject 中，我引用了 MyProject 并尝试读取相对于 OtherProject 二进制输出文件夹的 MyContent.txt。这失败了。我在编译时得到了 MyProject dll，但没有得到它的内容。

如果没有将 MyContent.txt 文件添加（作为链接）到 OtherProject 中，我如何（最好）使 MyProject 的内容文件在引用 MyProject 时出现在 OtherProject 二进制输出文件夹中。

# visual-c++ - VC++ 中与项目无关的目录设置

> ID：13154661
> 
> 赞同：1
> 
> 时间：2012-10-31T09:20:21.700
> 
> 标签：visual-c++

我在 Git 上有一个 Visual C++ 2012 Express 项目，它使用外部 libcurl（不包含在存储库中）。

我通过将我机器上的相应路径 (D:\libcurl\XXX) 添加到`Include Directories`VC **++ Directories** of **Project Properties**`Library Directories`中来添加库。所以这些设置保存在文件中。****`.vcxproj`****

 ****如果某个 libcurl 路径与我不同的人想要构建该项目，他将不得不：

*   **在Project Properties**中更改**VC++ 目录**设置。 （然后项目文件将被修改，这不是我想要的。）

***   移动他的 libcurl 文件以匹配我的 (D:\libcurl)。
    （库路径强制为D:\libcurl，不太灵活）** 

 **我的问题是：有没有办法避免这种情况？

*（在旧版本的 Visual C++ 中，我可以在对话框的全局**VC++ 目录**中设置路径`Tools->Options`。但该功能在最近的版本中已弃用。）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:43:10.563

我相信你可以通过使用环境变量来实现这一点。
例如，您可以添加一个名为：LIBCURL 的环境变量，然后可以将 LIBCURL 设置为您想要的任何路径：D:\libcurl 或 X:\lib2.3b ...

不管你的库路径是什么，你总是可以使用相同的 VC++ 目录：$(LIBCURL)\XXX******

# android - How to delete a playlist from MediaStore.Audio.Playlists in Android

> ID：13154662
> 
> 赞同：1
> 
> 时间：2012-10-31T09:20:28.177
> 
> 标签：android, playlist, mediastore

If possible, how can I delete a playlist from `MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI`, programatically?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T10:18:32.353

我使用以下代码删除特定的播放列表。当然，它只需要播放列表 ID

```
private void deletePlaylist(String selectedplaylist) 
{
// // Log.i(TAG, "deletePlaylist");
String playlistid = getPlayListId(selectedplaylist);
ContentResolver resolver = this.getContentResolver();
String where = MediaStore.Audio.Playlists._ID + "=?";
String[] whereVal = {playlistid}; 
resolver.delete(MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI, where, whereVal);
Toast toast = Toast.makeText(this,selectedplaylist + " Deleted", Toast.LENGTH_SHORT);
    toast.show();   
return ;        
} 
```

我创建了一个小应用程序，您可以在其中看到这一点。 [https://play.google.com/store/apps/details?id=rapc.flyingdutchman.com&feature=nav_result#?t=W251bGwsMSwyLDNd](https://play.google.com/store/apps/details?id=rapc.flyingdutchman.com&feature=nav_result#?t=W251bGwsMSwyLDNd)

如您所见，它首先获取 playlistid。我现在只有播放列表名称。在我的代码下方获取ID。

```
 public String getPlayListId(String playlist )

    {

    //  read this record and get playlistid

    Uri newuri =MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI;

    final String playlistid = MediaStore.Audio.Playlists._ID;

    final String playlistname = MediaStore.Audio.Playlists.NAME;

    String where = MediaStore.Audio.Playlists.NAME + "=?";

    String[] whereVal = {playlist}; 

    String[] projection = {playlistid, playlistname};

    ContentResolver resolver = getContentResolver();

    Cursor record = resolver.query(newuri , projection, where, whereVal, null);

    int recordcount = record.getCount();

    String foundplaylistid = "";

    if (recordcount > 0)

    {
    record.moveToFirst();

    int idColumn = record.getColumnIndex(playlistid);

    foundplaylistid = record.getString(idColumn);

    record.close();
    }

    return foundplaylistid;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T11:25:32.350

要重命名我有以下内容：

```
private final Uri uri = MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI;

public void renamePlaylist(Context context, String newplaylist, long playlist_id) {
    ContentResolver resolver = context.getContentResolver();
    ContentValues values = new ContentValues();
    String where = MediaStore.Audio.Playlists._ID + " =? ";
    String[] whereVal = { Long.toString(playlist_id) };
    values.put(MediaStore.Audio.Playlists.NAME, newplaylist);
    resolver.update(uri, values, where, whereVal);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-12T09:09:08.530

```
/**
 * Delete Playlist Track
 *
 * @param context
 * @param playlistId
 * @param audioId
 */
public static void deletePlaylistTrack(Context context, long playlistId, long audioId) {
    ContentResolver resolver = context.getContentResolver();
    Uri uri = MediaStore.Audio.Playlists.Members.getContentUri("external", playlistId);
    String filter = MediaStore.Audio.Playlists.Members.AUDIO_ID + " = " + audioId;
    resolver.delete(uri, filter, null);
}

/**
 * Delete playlist
 *
 * @param context
 * @param selectedplaylist
 */
public static void deletePlaylist(Context context, String selectedplaylist) {
    String playlistid = getPlayListId(context, selectedplaylist);
    ContentResolver resolver = context.getContentResolver();
    String where = MediaStore.Audio.Playlists._ID + "=?";
    String[] whereVal = {playlistid};
    resolver.delete(MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI, where, whereVal);
} 
```

# javascript - 如何使用ajax从phonegap中的服务器获取数据？

> ID：13154678
> 
> 赞同：0
> 
> 时间：2012-10-31T09:21:36.867
> 
> 标签：javascript, ajax, cordova

请原谅我问这个基本问题，但如果有人知道，请告诉我。

我正在为智能手机开发一个 Web 应用程序，并希望通过 PhoneGap 为 iOS、Android 等制作一个原生应用程序。

在我的脚本中，我使用 Ajax 来从服务器中的 php 文件发送和获取数据。

```
$.ajax({

   url: "example.php",

   cache: false,

   data: data,

   success: function(result, dataType){

    }

}); 
```

如果我将上面的 url: "example.php" 更改为 url: [http://www.example.com/example.php](http://www.example.com/example.php)，本机应用程序会在服务器中从 example.php 发送和获取数据吗？

如果有人知道它可以帮助回答我的问题，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:26:11.030

是的，但您必须将网址列入白名单。[白名单文件](http://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html)

并且要小心 iOS 6，它会缓存 ajax 响应，看看这个主题 [iOS 6 缓存问题](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)

# java - 如何关闭在我的 java 应用程序中运行的所有线程？

> ID：13154680
> 
> 赞同：0
> 
> 时间：2012-10-31T09:21:44.037
> 
> 标签：java, multithreading, threadpool, runnable

我想关闭我之前启动的所有线程。

**Thread.currentThread()**给了我当前线程，但是其他线程呢？我怎样才能得到它们？

我认为**Thread.activeCount()**返回线程线程组中活动线程的计数，但我不使用**ThreadGroup**，我只是使用**Thread thread = new Thread(new MyRunnable())**启动线程。

那么我该如何实现呢？提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:25:24.070

您可以使用 ExecutorService 代替，它将线程池与任务队列结合起来。

```
ExecutorService service = Executors.newCachedThreadPool();
// or
ExecutorService service = Executors.newFixedThreadPool(THREADS);

// submit as many tasks as you want.
// tasks must honour interrupts to be stopped externally.
Future future = service.submit(new MyRunnable());

// to cancel an individual task
future.cancel(true);

// when finished shutdown
service.shutdown(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:29:11.710

您可以简单地将所有线程的引用保存在某处（如列表），然后稍后使用这些引用。

```
List<Thread> appThreads = new ArrayList<Thread>(); 
```

每次启动线程时：

```
Thread thread = new Thread(new MyRunnable());
appThreads.add(thread); 
```

然后，当您想要发出终止信号时（不是通过`stop`我希望 :D），您可以轻松访问您创建的线程。

`ExecutorService`当您不再需要它时，您也可以使用并调用 shutdown：

```
ExecutorService exec = Executors.newFixedThreadPool(10);
...
exec.submit(new MyRunnable());
...
exec.shutdown(); 
```

这更好，因为您不应该真正为要执行的每个任务创建一个新线程，除非它是长时间运行的 I/O 或类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:30:23.263

[如果您希望继续直接使用 Thread 对象而不是使用java.util.concurrent 中](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)的现成线程服务，您应该保留对所有已启动线程的引用（例如，将它们放在列表中）以及何时希望关闭它们，或中断它们停止，循环列表。

# r - 如何解决具有内部阈值的 ODE？

> ID：13154681
> 
> 赞同：6
> 
> 时间：2012-10-31T09:21:52.350
> 
> 标签：r, ode, threshold

我有以下包含一些颂歌的函数：

```
myfunction <- function(t, state, parameters) {
    with(as.list(c(state, parameters)),{
        if (X>20) {           # this is an internal threshold!
          Y <- 35000
          dY <- 0
        }else{
          dY <- b * (Y-Z) 
        }
        dX <- a*X^6 + Y*Z
        dZ <- -X*Y + c*Y - Z
        # return the rate of change
        list(c(dX, dY, dZ),Y,dY)
    })
} 
```

以下是一些结果：

```
library(deSolve)
parameters <- c(a = -8/3, b = -10, c = 28)
state <- c(X = 1, Y = 1, Z = 1)
times <- seq(0, 10, by = 0.1)
out <- ode(y = state, times = times, func = myfunction, parms = parameters)
out
     time         X            Y            Z            Y          dY
 1    0.0  1.000000     1.000000     1.000000     1.000000     0.00000
 2    0.1  1.104670     2.132728     4.470145     2.132728    23.37417
 3    0.2  1.783117     6.598806    14.086158     6.598806    74.87351
 4    0.3  2.620428    20.325966    42.957134    20.325966   226.31169
 5    0.4  3.775597    60.969424   126.920014    60.969424   659.50590
 6    0.5  5.358823   176.094907   358.726482   176.094907  1826.31575
 7    0.6  7.460841   482.506706   953.270570   482.506706  4707.63864
 8    0.7 10.122371  1230.831764  2330.599161  1230.831764 10997.67398
 9    0.8 13.279052  2859.284114  5113.458479  2859.284114 22541.74365
10    0.9 16.711405  5912.675147  9823.406760  5912.675147 39107.31613
11    1.0 24.452867 10590.600567 16288.435139 35000.000000     0.00000
12    1.1 25.988924 10590.600567 23476.343542 35000.000000     0.00000
13    1.2 26.572411 10590.600567 26821.703961 35000.000000     0.00000
14    1.3 26.844240 10590.600567 28510.668725 35000.000000     0.00000
15    1.4 26.980647 10590.600567 29391.032472 35000.000000     0.00000
... 
```

Y 州不同，有人可以解释一下为什么吗？

我相信我没有正确设置我的阈值。有办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T19:49:52.623

考虑求解 ODE 的最简单方法，即 Euler 方法：

```
 state = state+myfunction(t,state,parameters)*h
 f(t+h)=f(t) + f'(t) *h 
```

`h`是一个小时间步长，`myfunction`是 的`f'(t)`导数，`f(t)`并且仅评估导数，它无法访问实际的`state`nor `Y`。两者都是`ode`使用一种原则上类似于欧拉的方法在内部设置的：给定它的数值`f(t),f'(t),h`只是更新 state `f(t+h)`。

所以阈值调整`dY`但无法访问`state["Y"]`。该过程仅操作一个局部变量，该变量被评估为`35000`in `dX <- a*X^6 + Y*Z`，`dZ <- -X*Y + c*Y - Z`但实际在函数内部返回`state["Y"]`后被覆盖。`myfuction``ode`

恐怕我想不出一个简单的方法来绕过这个设计。我只会使用 `out[5]`.

# java - SWT 访问 gui 组件

> ID：13154682
> 
> 赞同：3
> 
> 时间：2012-10-31T09:21:53.020
> 
> 标签：java, swt

我需要访问定义它们的类之外的 gui 组件。我的 gui 类包含以下用于在其上放置对象的代码：

```
/**
 * Create contents of the window.
 */
protected void createContents() {
    shlCertificatesmanager = new Shell(Display.getDefault());
    shlCertificatesmanager.setSize(450, 300);
    shlCertificatesmanager.setText("CertificatesManager");
    shlCertificatesmanager.setLayout(new RowLayout(SWT.HORIZONTAL));
    MenuItemListener menuListener = new MenuItemListener(shlCertificatesmanager);

    Menu menu = new Menu(shlCertificatesmanager, SWT.BAR);
    shlCertificatesmanager.setMenuBar(menu);

    MenuItem mntmNewSubmenu = new MenuItem(menu, SWT.CASCADE);
    mntmNewSubmenu.setText("File");     

    Menu menu_1 = new Menu(mntmNewSubmenu);
    mntmNewSubmenu.setMenu(menu_1);

    MenuItem mntmOpenCertificate = new MenuItem(menu_1, SWT.NONE);
    mntmOpenCertificate.setText("Open Certificate");
    mntmOpenCertificate.addSelectionListener(menuListener);

    MenuItem mntmExit = new MenuItem(menu_1, SWT.NONE);
    mntmExit.addSelectionListener(menuListener);
    mntmExit.setText("Exit");

    MenuItem mntmHelp = new MenuItem(menu, SWT.CASCADE);        
    mntmHelp.setText("Help");

    Menu menu_2 = new Menu(mntmHelp);
    mntmHelp.setMenu(menu_2);

    MenuItem mntmAbout = new MenuItem(menu_2, SWT.NONE);
    mntmAbout.setText("About");
    mntmAbout.addSelectionListener(menuListener);

    Label lblAliasName = new Label(shlCertificatesmanager, SWT.NONE);
    lblAliasName.setText("Alias name: ");

    Label label = new Label(shlCertificatesmanager, SWT.NONE);
    label.setText("___________");

} 
```

现在我需要从外部类访问其中一些组件，在这种情况下，我需要从 MenuItemListener 类访问两个标签（lblAliasName，标签）。

有办法访问它们吗？（也许像 Android 的 findViewById 方法或类似方法？）

或者我需要例如让它们以某种方式从其他类访问？（创建一个将被 MenuItemListener 类和 GuiWindow 类使用的 gui 组件的类）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:33:41.767

我想到了两个选择：

1.  如果您的类只有一个实例，则将组件声明为`static`字段并通过 getter 方法将其移交。
2.  如果有多个实例，则将组件声明为字段（这次不是`static`）并创建 getter 方法。另一个类当然必须知道你的类的实例才能访问这些方法。

记住：

如果您尝试从不是 gui 线程的线程更改组件，您将得到一个`SWTException`with value `ERROR_THREAD_INVALID_ACCESS`。

您可以使用以下方法解决此问题：

```
Display.getDefault().asyncExec(new Runnable() {
    public void run() {
        // change/modify components here
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:16:03.157

不，没有标准的方法可以做到这一点，您需要像往常一样在 Java 中访问它们。

# java - R.Java 不创建

> ID：13154683
> 
> 赞同：1
> 
> 时间：2012-10-31T09:22:04.570
> 
> 标签：java, android, r.java-file

R.Java 不创建，因为我在代码中有错误，我不小心删除了 R.java。

这是代码：

```
public SwipeyTabs(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        final TypedArray a = context.obtainStyledAttributes(attrs,
                R.styleable.SwipeyTabs, defStyle, 0);

        mBottomBarColor = a.getColor(R.styleable.SwipeyTabs_bottomBarColor,
                mBottomBarColor);
        mBottomBarHeight = a.getDimensionPixelSize(
                R.styleable.SwipeyTabs_bottomBarHeight, 2);
        mTabIndicatorHeight = a.getDimensionPixelSize(
                R.styleable.SwipeyTabs_tabIndicatorHeight, 3);

        a.recycle();

        init();

    } 
```

在xml中

```
 <com.example.uniradio.SwipeyTabs
    android:id="@+id/swipeytabs"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ff3b3b3b"
    swipeytabs:bottomBarColor="#ff96aa39"
    swipeytabs:bottomBarHeight="2dip"
    swipeytabs:tabIndicatorHeight="3dip" /> 
```

现在，我该如何创建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:24:11.003

由于xml中的错误，没有生成R文件，请执行以下操作查找错误，

```
eclipse menu->windows-> show view -> problems 
```

并做纠正选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:49:43.573

试试这些技巧......

**1**首先`Clean`是项目，来自您的 Eclipse IDE

**2**请注意所有文件中**没有错误**`.java`，尤其是`.xml`文件中的错误。

**3**请**删除所有**错误`Error logs`；我知道这很奇怪，但这就是 Eclipse 的工作方式。

**4** `R.java`文件是自动生成的，并包含根据其 XML 资源类型分组的公共静态最终常量。

**5**确定上述第 1 点、第 2 点和第 3 点后，尝试**删除**R.java 文件，清理项目，然后关闭 Eclipse。并再次打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:59:27.620

你基本上可以通过两种方式做到这一点：

您可以按照此处的建议从 Eclipse 运行它，方法是转到 Project -> Build Project，或者只是运行“干净”

![构建安卓项目](../Images/b90c0b52813230f6cdd9c768c51d95f3.png)

或者您可以尝试通过命令行为您的应用创建一个 APK，然后生成 .R 文件以及 APK。

如果有任何错误，命令行将报告它。

要通过命令行执行此操作，您可以运行以下命令：

```
ant release 
```

从您的项目目录中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-19T14:50:11.637

我和你一样有问题。以免尝试：打开 Android SDK Manager -> 在 Tools 文件夹中重新安装包 Android SDK Platform-Tools 和 Android SDK Build-Tools。

# php - Facebook 需要 JSON php 扩展？>

> ID：13154684
> 
> 赞同：2
> 
> 时间：2012-10-31T09:22:06.673
> 
> 标签：php, facebook

我正在尝试使用 FB 登录。我在其他网站上使用了相同的代码，它工作正常。但只有一个域会返回致命错误。

> 致命错误：在 /var/www/vhosts/domain.com/httpdocs/base_facebook.php:22 堆栈跟踪 /var/www/vhosts/domain.com/httpdocs 中出现消息“Facebook 需要 JSON PHP 扩展”时未捕获的“异常” /facebook.php:18 require_once()#1 ....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:24:34.113

Facebook 需要在您的服务器上安装[JSON PHP 扩展。](http://www.php.net/manual/en/json.requirements.php)

您需要与服务器管理员交谈并要求他们为您安装扩展程序。

# css - 如何在以下上下文中显示在同一行标签和div上

> ID：13154685
> 
> 赞同：1
> 
> 时间：2012-10-31T09:22:06.047
> 
> 标签：css, twitter-bootstrap

如何在 bootstrap 的上下文中显示在同一行标签和 div 上。我确实尝试了以下代码，但它不起作用：

```
.control-group​ {
    display: inline-block;
}​ 
```

演示：http: [//jsfiddle.net/hU6Kz/1028/](http://jsfiddle.net/hU6Kz/1028/)

PS：我只想改变css规则而不是dom

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:34:59.493

他们还有另一种选择。使用此代码

```
.control-label {
float:left;
} 
```

**演示：[小提琴](http://jsfiddle.net/hU6Kz/1031/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:24:55.553

`.control-group`是父 div，你有孩子`div.controls`，需要设置`inline-block`为单行显示。

试试这个 CSS，

```
.controls {
    display: inline-block;
}​ 
```

[http://jsfiddle.net/muthkum/hU6Kz/1030/](http://jsfiddle.net/muthkum/hU6Kz/1030/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:24:55.307

嗨，现在添加`display inline-block`你的`.controls`div

像这样

```
.control-group , .controls{
    display: inline-block;
} 
```

***[现场演示](http://jsfiddle.net/rohitazad/hU6Kz/1029/)***

# matlab - 如何使用matlab添加额外的列来计算单元阵列中每个字符的出现次数

> ID：13154689
> 
> 赞同：1
> 
> 时间：2012-10-31T09:22:14.697
> 
> 标签：matlab

我需要编写一个代码，它为 cellarray GO 的第四列的每个单元格中的字符出现次数添加额外的列：

```
GO:
      'GO:0008150'    [1]    [1]    'a'
      'GO:0016740'    [2]    [2]    'b'
      'GO:0006412'    [2]    [2]    'b'
      'GO:0016787'    [2]    [3]    'c'
      'GO:0006810'    [2]    [4]    'd'
      'GO:0016787'    [3]    [3]    'c'
      'GO:0004672'    [3]    [3]    'c'
      'GO:0016779'    [3]    [3]    'c'
      'GO:0005215'    [3]    [3]    'c'
      'GO:0006810'    [3]    [4]    'd'
      'GO:0004386'    [3]    [4]    'd'
      'GO:0003774'    [3]    [4]    'd'
      'GO:0016298'    [3]    [4]    'd'
      'GO:0016192'    [3]    [5]    'e'
      'GO:0006412'    [3]    [2]    'b'
      'GO:0005215'    [3]    [3]    'c'
      'GO:0006810'    [4]    [4]    'd'
      'GO:0004386'    [4]    [4]    'd'
      'GO:0003774'    [4]    [4]    'd'
      'GO:0016298'    [4]    [4]    'd'
      'GO:0030533'    [4]    [4]    'd'
      'GO:0030533'    [4]    [4]    'd'
      'GO:0016192'    [4]    [5]    'e' 
```

结果 GO cellarray 应如下所示（从 0 值开始）：

```
GO:     
  'GO:0008150'    [1]    [1]    'a'   '0'
  'GO:0016740'    [2]    [2]    'b'   '0'
  'GO:0006412'    [2]    [2]    'b'   '1'
  'GO:0016787'    [2]    [3]    'c'   '0'
  'GO:0006810'    [2]    [4]    'd'   '0'
  'GO:0016787'    [3]    [3]    'c'   '1'
  'GO:0004672'    [3]    [3]    'c'   '2'
  'GO:0016779'    [3]    [3]    'c'   '3'
  'GO:0005215'    [3]    [3]    'c'   '4'
  'GO:0006810'    [3]    [4]    'd'   '1'
  'GO:0004386'    [3]    [4]    'd'   '2'
  'GO:0003774'    [3]    [4]    'd'   '3'
  'GO:0016298'    [3]    [4]    'd'   '4'
  'GO:0016192'    [3]    [5]    'e'   '0'
  'GO:0006412'    [3]    [2]    'b'   '2'
  'GO:0005215'    [3]    [3]    'c'   '5'
  'GO:0006810'    [4]    [4]    'd'   '5'
  'GO:0004386'    [4]    [4]    'd'   '6' 
```

我尝试了以下代码，但无论如何它都不起作用：

```
x3=[];  % for saving the resulted numbers 
z=0:length(GO);  % will take the numbers from this matrix
z=z';
 for j=1:length(num2alph)
     for k=1:length(GO)
 for i=1:length(GO)
         if isequal(GO{i,4},num2alph{j})
                   x3{i}=z(k);
    else
     end
     end
     end
 end
   x3=x3';
   GO1=[GO x3]; 
```

其中 cellarray num2alph （它将与 GO 数组的第四列进行比较以构建编号列）是：

```
 'a'          
  'b'        
  'c'    
  'd'   
  'e'    
  'f'    
  'g'   
  'h'   
  'i'    
  'j'    
  'k' 
```

我还需要将最后两列相互映射到同一个单元格中，例如：

```
 'a'   '0'  ===>  a0
         'b'   '2'  ===>  b2 
```

任何建议

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:42:02.160

这应该可以解决问题：

```
un = unique(GO(:,4));

results = zeros(size(GO(:,4)));
for ii = 1:numel(un)

    inds = strcmp(GO(:,4), un(ii));
    count = max(0, cumsum(inds)-1);

    results(inds) = count(inds);
end

GO = [GO  num2cell(results)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:09:47.417

[`cellhist`](http://www.mathworks.com/matlabcentral/fileexchange/23933-cellhist)，一个用户定义的函数，在这里真的可以成为你的朋友。它似乎可以完全解决您的需求。

# android - android 和 ios 上全屏图片的最佳跨平台图像尺寸

> ID：13154692
> 
> 赞同：0
> 
> 时间：2012-10-31T09:22:21.017
> 
> 标签：android, ios, image, tablet

我正在开发一个可在 android 和 ios 上使用的移动应用程序。

该应用程序应该全屏显示一些高质量的下载图片。

原始照片具有非常不同的尺寸，例如

5184 x 3456、2048 x 1365、1920 x 1143

ETC ...

我试图找出最好的“标准”图片尺寸 (WxH)，我应该使用它在设备上提供这些照片，以便保持质量（设备的最佳外观和感觉），但传输大小仍然可以接受。

例如，我认为 5184 x 3456 的图片即使对于高分辨率平板电脑或 ipad 来说也太过分了。

所以我的问题真的是什么是最好的“标准”/跨平台图像尺寸，适合大多数平板电脑，同时保留图片的原始高分辨率感觉。

我也在考虑几个场景：

1 - 为所有不同尺寸的图片建立服务器端数据库，并根据请求设备，提供尺寸与屏幕设备尺寸最匹配的图片。

或者

2- 使用设备在运行时需要动态缩小的一种标准 MAX 图片尺寸。在这种情况下，我应该使用什么标准的最大图片尺寸来覆盖大多数平板电脑和智能手机。

希望我足够清楚。

感谢您的见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:26:04.227

使用场景 1。您不想在设备上提供这些海量图片并调整它们的大小。你只是在浪费带宽、内存和 CPU 来节省一点服务器端的复杂性。

# html - Gmail 和 Quora 的 HTML 中的 class 或 id 字段是如何生成的，为什么？

> ID：13154693
> 
> 赞同：2
> 
> 时间：2012-10-31T09:22:24.067
> 
> 标签：html, css, gmail

在 Gmail 中：

```
<tr class="zA yO" id=":1t4"> 
```

在知乎：

```
<span id="ld_zpQ1Cb_27965"> 
```

他们这样做的意图和工具是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:51:49.163

我不认为他们正在使用生成混淆代码的工具。我认为他们可能正在使用一些高级编程语言来生成 html 代码。如果您查看由 asp.net 生成的源代码，您还会遇到生成的 id。

# android - 无法在手机 2.2.2 上启动 android 应用程序（更高版本的应用程序启动正常）

> ID：13154694
> 
> 赞同：2
> 
> 时间：2012-10-31T09:22:25.957
> 
> 标签：android

当我尝试通过 HTC 手机（版本 4.0.4）运行我的应用程序时，我的应用程序没有任何问题，但是当我使用 REGZA（版本 2.2.2）时，它无法启动。

```
10-31 08:54:27.430: I/ActivityManager(158): Process *package name* (pid 29204) has died.
10-31 08:54:27.440: W/InputManagerService(158): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@3075bec0
10-31 08:54:27.460: I/UsageStats(158): Unexpected resume of com.android.settings while already resumed in *package name*
10-31 08:54:27.460: I/BootReceiver(158): Copying /data/tombstones/tombstone_04 to DropBox (SYSTEM_TOMBSTONE) 
```

我不知道这个问题出在哪里，如果有人有任何想法，请为我​​分享你的想法。谢谢。

# asp.net - 许可/保护 asp .net Web 应用程序

> ID：13154695
> 
> 赞同：0
> 
> 时间：2012-10-31T09:22:33.510
> 
> 标签：asp.net

基本上，我有一个安装在客户端服务器上的 asp.net 应用程序，可以与现有的桌面应用程序一起工作。我能做些什么来阻止客户复制文件并在其他地方安装并运行它，这样他们就不能停止付款但继续使用系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:54:18.873

我知道您可以使用的唯一 100% 方法是调用您控制的某些 Web 服务，以在每次应用程序启动或您想要的任何其他事件时进行验证。尽管如此，客户仍可以对其进行反编译并对其进行修补以删除检查，尽管这不太可能。

但是，如果我必须有这种锁，我不会担心验证这一点。如果您认为您的客户正在这样做，那么他们就不是开始合作的好客户。

# security - Jdeveloper Weblogic 服务器中的可信 CA 证书问题

> ID：13154696
> 
> 赞同：0
> 
> 时间：2012-10-31T09:22:34.123
> 
> 标签：security, jsp, ssl-certificate, jdeveloper, weblogic11g

每次我在 Jdeveloper 中运行我的 Java 项目时，由于 hwcih 我的 JSP 页面出现较晚而出现警告。我该如何避免这种情况

```
 <Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090171> <Loading the    identity       certificate and private key stored under the alias DemoIdentity from the jks keystore file C:\Oracle\MIDDLE~1\WLSERV~1.3\server\lib\DemoIdentity.jks.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090169> <Loading trusted certificates from the jks keystore file C:\Oracle\MIDDLE~1\WLSERV~1.3\server\lib\DemoTrust.jks.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090169> <Loading trusted certificates from the jks keystore file C:\PROGRA~1\Java\JDK16~1.0_3\jre\lib\security\cacerts.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=Entrust Root Certification Authority - G2,OU=(c) 2009 Entrust\, Inc. - for authorized use only,OU=See www.entrust.net/legal-terms,O=Entrust\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=thawte Primary Root CA - G3,OU=(c) 2008 thawte\, Inc. - For authorized use only,OU=Certification Services Division,O=thawte\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=T-TeleSec GlobalRoot Class 3,OU=T-Systems Trust Center,O=T-Systems Enterprise Services GmbH,C=DE". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=T-TeleSec GlobalRoot Class 2,OU=T-Systems Trust Center,O=T-Systems Enterprise Services GmbH,C=DE". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=GlobalSign,O=GlobalSign,OU=GlobalSign Root CA - R3". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "OU=Security Communication RootCA2,O=SECOM Trust Systems CO.\,LTD.,C=JP". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=VeriSign Universal Root Certification Authority,OU=(c) 2008 VeriSign\, Inc. - For authorized use only,OU=VeriSign Trust Network,O=VeriSign\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=KEYNECTIS ROOT CA,OU=ROOT,O=KEYNECTIS,C=FR". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=GeoTrust Primary Certification Authority - G3,OU=(c) 2008 GeoTrust Inc. - For authorized use only,O=GeoTrust Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=Entrust Root Certification Authority - G2,OU=(c) 2009 Entrust\, Inc. - for authorized use only,OU=See www.entrust.net/legal-terms,O=Entrust\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=thawte Primary Root CA - G3,OU=(c) 2008 thawte\, Inc. - For authorized use only,OU=Certification Services Division,O=thawte\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=T-TeleSec GlobalRoot Class 3,OU=T-Systems Trust Center,O=T-Systems Enterprise Services GmbH,C=DE". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=T-TeleSec GlobalRoot Class 2,OU=T-Systems Trust Center,O=T-Systems Enterprise Services GmbH,C=DE". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=GlobalSign,O=GlobalSign,OU=GlobalSign Root CA - R3". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "OU=Security Communication RootCA2,O=SECOM Trust Systems CO.\,LTD.,C=JP". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=VeriSign Universal Root Certification Authority,OU=(c) 2008 VeriSign\, Inc. - For authorized use only,OU=VeriSign Trust Network,O=VeriSign\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=KEYNECTIS ROOT CA,OU=ROOT,O=KEYNECTIS,C=FR". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<Oct 31, 2012 2:44:02 PM IST> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=GeoTrust Primary Certification Authority - G3,OU=(c) 2008 GeoTrust Inc. - For authorized use only,O=GeoTrust Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:08:51.137

将 Weblogic 更新到 10.3.3 或更高版本

# asp.net-mvc-4 - Ninject Authorization vs Action Filter 绑定顺序

> ID：13154697
> 
> 赞同：2
> 
> 时间：2012-10-31T09:22:34.683
> 
> 标签：asp.net-mvc-4, ninject, action-filter, authorize-attribute, custom-action-filter

我有 2 个过滤器正在尝试使用 Ninject 的`BindFilter<>`语法应用，并且它们的依赖注入成功地应用了它们。问题在于这样一个事实，即一个人会确定当前用户是谁并绑定该用户`InRequestScope`，并且在检查维护授权时必须在第二个用户之前运行 - 否则它不知道您指的是哪个用户。

中的过滤器绑定`NinjectWebCommon.cs`如下所示：

```
kernel.BindFilter<CurrentUserFilter>(FilterScope.Global, 0).InRequestScope();
kernel.BindFilter<SetupRightsAttribute>(FilterScope.Controller, 1).WhenControllerType<MaintenanceController>().InRequestScope(); 
```

所以在维护控制器中，我希望第一个运行，然后是第二个；在其他所有内容中，只有第一个 - 这很有效，第二个仅在浏览我的维护控制器中的某些内容时使用。

2 个过滤器是这样声明的（不相关的细节除外）

```
public class CurrentUserFilter : IActionFilter
{
    public void OnActionExecuting(ActionExecutingContext filterContext)
    // implementation - breakpoint 1
}

public class SetupRightsAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    // implementation - breakpoint 2
} 
```

我希望断点 1 被击中，然后是断点 2，但由于某种原因，它*总是*首先出现断点 2 - 因为此时它不知道用户，所以它告诉我我没有授权。

我尝试了许多不同的 FilterScope 排列和顺序设置，甚至以不同的顺序绑定它们，但没有任何效果......我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:26:51.100

授权过滤器在操作过滤器之前执行，因为授权在 MVC 执行管道中比处理操作更早。

# java - 春天有没有可能有嵌套形式（form：form）

> ID：13154698
> 
> 赞同：5
> 
> 时间：2012-10-31T09:22:36.160
> 
> 标签：java, jakarta-ee, spring-mvc

是否可以嵌套表单：spring mvc中的表单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:24:40.363

不，您可以只有一个表单操作/支持对象，但支持对象可以嵌套。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T09:25:52.697

HTML 中不可能有嵌套的表单。

Spring 生成 HTML，因此它也不能拥有它们。

# c# - Crystal Reports 在不同页面中显示记录

> ID：13154703
> 
> 赞同：0
> 
> 时间：2012-10-31T09:22:50.883
> 
> 标签：c#, crystal-reports

我创建了一个 Cristal 报告，其中包含有关作业的详细信息，该详细信息包含在页眉中，包括作业编号、作业名称...

当工作没有变化时，我想在不同的页面中显示报告

这个想法是所有具有相同jobno的作业都应该显示在一个页面中，如果jobno在一页中间发生变化，那么关于该作业的详细信息应该显示在另一个页面上，而不是在同一页面上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:34:10.513

您需要在jobno上添加一个组；将组设置为“在每页上重复组标题”。将所需字段添加到组标题。抑制组页脚；在组页脚中设置“强制新页面之后”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-30T10:34:07.617

我检查了组专家选项中的*保持在一起*选项...问题已解决

# struts2 - struts2 url重写动作错误

> ID：13154706
> 
> 赞同：1
> 
> 时间：2012-10-31T09:22:54.647
> 
> 标签：struts2, struts2-namespace

我在使用重写 url mod 时遇到问题

我的问题是使用它时，我转到 admincp 的登录表单

输入用户名和密码后出现 HTTP 500 状态，但没有堆栈跟踪进入 tomcat 日志？？？

我的代码

Struts.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

    <package name="admincp" namespace="/admincp" extends="struts-default">
        <interceptors>
            <interceptor name="login" class="org.dejavu.software.interceptor.LoginInterceptor" />
            <interceptor-stack name="stack-with-login">
                <interceptor-ref name="login"/>
                <interceptor-ref name="defaultStack"/>
            </interceptor-stack>
        </interceptors>
        <default-interceptor-ref name="stack-with-login"/>

        <global-results>
            <result name="login">login.jsp</result>
        </global-results>

        <action name="logincp" class="org.dejavu.software.view.AdminLoginAction">
            <interceptor-ref name="defaultStack" />
            <result name="success">dashboard.jsp</result>
            <result name="input">login.jsp</result>
            <result name="error">login.jsp</result>
        </action>

    </package>  

</struts> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
    <display-name>dejavuSoft</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>

    <filter>
        <filter-name>UrlRewriteFilter</filter-name>
        <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
        <init-param>
            <param-name>logLevel</param-name>
            <param-value>WARN</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>UrlRewriteFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

      <filter>
        <filter-name>struts2</filter-name>
        <filter-class>
            org.apache.struts2.dispatcher.FilterDispatcher
        </filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>REQUEST</dispatcher>
    </filter-mapping>

</web-app> 
```

登录.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ taglib uri="/struts-tags" prefix="s"%>
<!DOCTYPE html>
<html>
    <head>
        <title>Deja vu! | Login - Admin Control Panel</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="css/login.css" />
    </head>
    <body>
        <img src="img/loginLogo.png" id="logo"/>
        <s:actionerror/>
        <s:form action="logincp">
            <s:textfield name="username" value="username..." id="txtusername" onfocus="if(this.value==this.defaultValue) this.value='';" onblur="if(this.value=='') this.value=this.defaultValue;"/>        
            <s:password name="password" value="password..." id="txtpassword" onfocus="if(this.value==this.defaultValue) this.value='';" onblur="if(this.value=='') this.value=this.defaultValue;"/><br/>
            <s:submit value="Enter Admin Panel" id="btLogin"/>
        </s:form>
        <img src="img/dejavu.png" id="icon"/>    
        <div id="forget">
            Forget Password | Forget Username
        </div>

    </body>
    <footer>
        Footer
    </footer>
</html> 
```

登录操作

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package org.dejavu.software.view;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;
import java.util.Map;
import org.apache.struts2.interceptor.SessionAware;
import org.dejavu.software.dao.UserDAO;
import org.dejavu.software.model.GroupMember;
import org.dejavu.software.model.User;

/**
 *
 * @author Administrator
 */
public class AdminLoginAction extends ActionSupport {

    private static final long serialVersionUID = -1457633455929689099L;
    private User user;
    private String username, password;
    private String role;
    private UserDAO userDAO;
    private GroupMember group;    

    public AdminLoginAction() {
        userDAO = new UserDAO();

    }

    @Override
    public String execute() {
        String result = null;        
        if (getUsername().length() != 0 && getPassword().length() != 0) {
            setUser(userDAO.checkUsernamePassword(getUsername(), getPassword()));            
            if (getUser() != null) {
                for (GroupMember g : getUser().getGroups()) {
                    boolean admincp = g.getAdminpermission().contains("1");
                    if (admincp == true) {
                        Map session = ActionContext.getContext().getSession();  
                        session.put("userLogged", getUsername());
                        session.put("passwordLogged", getPassword());
                        result = "success";
                    } else {
                        result = "error";
                    }
                }

            }
        }        
        return result;
    }

    @Override
    public void validate() {
        if (getUsername().length() == 0) {
            addFieldError("username", "Username is required");
        }
        if (getPassword().length() == 0) {
            addFieldError("password", getText("Password is required"));
        }

    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getRole() {
        return role;
    }

    public void setRole(String role) {
        this.role = role;
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public GroupMember getGroup() {
        return group;
    }

    public void setGroup(GroupMember group) {
        this.group = group;
    }

} 
```

网络错误：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

java.lang.NullPointerException
    org.apache.struts2.impl.StrutsActionProxy.getErrorMessage(StrutsActionProxy.java:69)
    com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:185)
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:63)
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:501)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:432)
    org.tuckey.web.filters.urlrewrite.NormalRewrittenUrl.doRewrite(NormalRewrittenUrl.java:213)
    org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:171)
    org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)
    org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)
    org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:394)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.22 logs. 
```

# android - Android Listview 没有收到带有自定义 ViewGroup 的 onItemClick

> ID：13154707
> 
> 赞同：0
> 
> 时间：2012-10-31T09:22:58.370
> 
> 标签：android, listview, android-listview

嘿，我做了一个自定义视图组扩展了相对布局并覆盖了 onTouchEvent()，并且总是在 onTouchEvent() 中返回 true。我将此自定义视图组作为我的列表视图的项目布局。我还为列表视图添加了 onItemClick 侦听器。但我无法为我的列表视图接收 onItemClick 事件！有人可以帮助我吗？

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:00:45.503

只是在适配器类 getView (...) 中定义 onitemclick 我认为它会为你工作

public View getView(final int position, View convertView, ViewGroup parent) {

```
 View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);
  vi.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T09:08:58.843

问题是您总是`true`从 ViewGroup 的`onTouchEvent(MotionEvent)`方法返回。这意味着您的相对布局负责处理此触摸事件。阅读 android 文档以获取更多信息[http://developer.android.com/training/gestures/viewgroup.html](http://developer.android.com/training/gestures/viewgroup.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:45:53.880

就您的问题而言，我想仅使用 onitemClick 事件就足够了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T09:36:01.940

如果在 中返回 true `onTouchEvent()`，则事件会被处理，因此不会冒泡到 ListView。尝试返回 false。

# javascript - html 格式的电子邮件内容

> ID：13154713
> 
> 赞同：1
> 
> 时间：2012-10-31T09:23:05.387
> 
> 标签：javascript, html, email

> **可能重复：**
> [带有 HTML 正文的 MailTo](https://stackoverflow.com/questions/5620324/mailto-with-html-body)

我想从 javascript 发送电子邮件。我发现这篇文章对我[使用 Javascript 发送电子邮件有](https://stackoverflow.com/questions/271171/sending-emails-with-javascript)很大帮助。

但我需要在电子邮件内容中添加图像、粗体文本和颜色更改。

有什么帮助吗？

**我尝试了什么：**

```
var content = "I want to send email from javascript. <span style='color:red'>I found this post which helped me alot</span><img src='logo.png'/> Sending emails with Javascript"

var link = "mailto:me@example.com"
         + "?cc=myCCaddress@example.com"
         + "&subject=" + escape("This is my subject")
         + "&body=" + escape(content);

window.location.href = link; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:54:02.697

我不认为这是可能的。据我所知，你可以通过 \n 换行

```
"mailto:me@me.com?body=xx " + escape("\n") + " xx" 
```

为什么不让用户在电子邮件客户端中编写内容？

# java - 在java中将3个字节转换为int

> ID：13154715
> 
> 赞同：11
> 
> 时间：2012-10-31T09:23:08.030
> 
> 标签：java, bit-manipulation

1.  我想在 Java 中将字节转换为 int。我想假设字节是无符号字节。假设如果

    ```
    byte a = (byte)0xFF;

    int r = (some operation on byte a); 
    ```

    r 应该是 255 而不是十进制的 -1。

2.  然后我想从 3 个字节创建 int 值。假设如果

    ```
    byte b1 = (byte)0x0F;

    byte b2 = (byte)0xFF;

    byte b3 = (byte)0xFF;

    int r = (some operation in bytes b1, b2 and b3); 
    ```

    那么 r 应该是`0x000FFFFF`。在 int 值中，字节 b1 将放置在较高的第 3 位，而字节 b3 将放置在较低的第 1 位。此外，我的 b1 范围从 0x00 到 0x0F ，其他字节将从`0x00`到`0xFF`，假设字节的无符号性质。如果字节 b1 大于 0x0F，我将只提取最低 4 位。简而言之，我想从 3 个字节中提取 int，但只使用 3 个字节的 20 位。（来自 b2 和 b3 的总共 16 位，以及来自 b1 的 4 个最低位）。int r 必须为正，因为我们从 3 个字节创建并假设字节的无符号性质。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T09:31:24.697

您必须小心此处的符号扩展 - 不幸的是，字节是用 Java 签名的（据我所知，这只会引起悲伤）。

所以你必须做一些掩蔽。

```
int r = (b3 & 0xFF) | ((b2 & 0xFF) << 8) | ((b1 & 0x0F) << 16); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T09:34:27.400

我会假设你想要无符号字节值

```
int r = ((b1 & 0xF) << 16) | ((b2 & 0xFF) << 8) | (b3 & 0xFF); 
```

每个字节都需要被屏蔽并移动到正确的位。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T09:27:36.490

这对于移位运算符和二进制 AND 来说非常简单。您只想使用 b1 的低 4 位，这正是这样`b1 & 0x0F`做的。剩下的就是将位移动到不同的位置

```
int r = ( (b1 & 0x0F) << 16) + ((b2 & 0xFF) << 8) + (b3 & 0xFF) 
```

**正如@harold 指出的那样编辑，前一种解决方案（在较低字节上没有 0xFF 掩码）会由于符号扩展而导致异常**......****

 ****EDIT2**天哪，在处理这些问题时，我总是被运算符优先级打脸……

推荐阅读：

*   [Java中的签名扩展](http://www.onemanclapping.org/2008/10/sign-extension-in-java.html)
*   [在 Java 中向上转换或移位时抑制符号扩展](https://stackoverflow.com/questions/5147738/supressing-sign-extension-when-upcasting-or-shifting-in-java)
*   [Java中的运算符优先级](http://bmanolov.free.fr/javaoperators.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T09:26:41.497

这是一个“仅班次”版本：

```
int r = ((b1 << 28) >>> 12) | (b2 << 8) | b3; 
```

左移 28 位会切断前 4 位，然后右移 12 位会将其返回到净左移 16 位。

我测试了这段代码，它可以工作:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-21T11:40:33.457

我比较了一些答案，因为我很好奇哪个答案最快。

似乎 Bohemian 的方法是最快的，但我无法解释为什么它在第一次运行时慢了 11%。

PS.：我没有检查答案的正确性。

这里的代码：

```
public class Test
{

  public static void main(String[] args)
  {
    final int RUNS = 10;
    final int TRIPLE = 3;
    final int N = 100000000;

    byte[] bytes = new byte[TRIPLE * 32768]; // 96 kB

    Random r = new Random();
    r.nextBytes(bytes);

    List<ByteConvertTester> testers = Arrays.asList(new Harold(), new Bohemian(), new Ppeterka());

    for (int i = 0; i < RUNS; i++)
    {
      System.out.println("RUN#" + i);
      System.out.println("----------------------");
      Integer compare = null;
      for (ByteConvertTester tester : testers)
      {
        System.out.println(tester.getClass().getSimpleName());
        long time = testAndMeasure(tester, bytes, N);
        System.out.print("time (in ms): " + time);
        if (compare != null) {
          System.out.println(" SpeedUp%: " + (double) ((int) (10000 * (1.0d - (double) time / compare))) / 100);
        } else {
          compare = (int) time;
          System.out.println();
        }
      }
      System.out.println("----------------------");
    }
  }

  private static long testAndMeasure(ByteConvertTester bct, byte[] bytes, int loops)
  {
    Calendar start = Calendar.getInstance();
    int r;
    for (int i = 0; i < loops; i += 3)
      r = bct.test(bytes[i % bytes.length], bytes[(i + 1) % bytes.length], bytes[(i + 2) % bytes.length]);

    Calendar end = Calendar.getInstance();
    long time = (end.getTimeInMillis() - start.getTimeInMillis());
    return time;
  }
}

interface ByteConvertTester
{
  public int test(byte msb, byte mid, byte lsb);
}

class Harold implements ByteConvertTester
{
  @Override
  public int test(byte msb, byte mid, byte lsb)
  {
    return (lsb & 0xFF) | ((mid & 0xFF) << 8) | ((msb & 0x0F) << 16);
  }
}

class Bohemian implements ByteConvertTester
{
  @Override
  public int test(byte msb, byte mid, byte lsb)
  {
    return ((msb << 28) >>> 12) | (mid << 8) | lsb;
  }
}

class Ppeterka implements ByteConvertTester
{

  @Override
  public int test(byte msb, byte mid, byte lsb)
  {
    return ((msb & 0x0F) << 16) + ((mid & 0xFF) << 8) + (lsb & 0xFF);
  }
} 
```

**输出**

```
RUN#0
----------------------
Harold
time (in ms): 489
Bohemian
time (in ms): 547 SpeedUp%: -11.86
Ppeterka
time (in ms): 479 SpeedUp%: 2.04
----------------------
RUN#1
----------------------
Harold
time (in ms): 531
Bohemian
time (in ms): 521 SpeedUp%: 1.88
Ppeterka
time (in ms): 537 SpeedUp%: -1.12
----------------------
RUN#2
----------------------
Harold
time (in ms): 531
Bohemian
time (in ms): 539 SpeedUp%: -1.5
Ppeterka
time (in ms): 532 SpeedUp%: -0.18
----------------------
RUN#3
----------------------
Harold
time (in ms): 529
Bohemian
time (in ms): 519 SpeedUp%: 1.89
Ppeterka
time (in ms): 531 SpeedUp%: -0.37
----------------------
RUN#4
----------------------
Harold
time (in ms): 527
Bohemian
time (in ms): 519 SpeedUp%: 1.51
Ppeterka
time (in ms): 530 SpeedUp%: -0.56
----------------------
RUN#5
----------------------
Harold
time (in ms): 528
Bohemian
time (in ms): 519 SpeedUp%: 1.7
Ppeterka
time (in ms): 532 SpeedUp%: -0.75
----------------------
RUN#6
----------------------
Harold
time (in ms): 529
Bohemian
time (in ms): 520 SpeedUp%: 1.7
Ppeterka
time (in ms): 532 SpeedUp%: -0.56
----------------------
RUN#7
----------------------
Harold
time (in ms): 529
Bohemian
time (in ms): 520 SpeedUp%: 1.7
Ppeterka
time (in ms): 533 SpeedUp%: -0.75
----------------------
RUN#8
----------------------
Harold
time (in ms): 530
Bohemian
time (in ms): 521 SpeedUp%: 1.69
Ppeterka
time (in ms): 532 SpeedUp%: -0.37
----------------------
RUN#9
----------------------
Harold
time (in ms): 529
Bohemian
time (in ms): 527 SpeedUp%: 0.37
Ppeterka
time (in ms): 530 SpeedUp%: -0.18
---------------------- 
```**

# html - 菜单栏分隔符上的悬停效果

> ID：13154716
> 
> 赞同：1
> 
> 时间：2012-10-31T09:23:09.390
> 
> 标签：html, css

我有一个菜单栏

*   家
*   关于我们
*   联系我们

我用 . 之类的符号装饰了菜单`# Home # About Us # Contact #`。

所以，我想要实现的是当我将鼠标悬停在一个项目上时，项目的颜色会改变，旁边的符号也会改变。例如：

**# 首页 #**关于我们 # 联系我们 #

# 首页**# 关于我们 #**联系我们 #

# 首页 # 关于我们**# 联系我们 #**

无论如何要实现这一目标？不喜欢使用 javascript 解决方案，谢谢。

** 根据要求使用 HTML 标记更新，只是放置符号的虚拟解决方案。

我想你们中的大多数人都误解了我的问题，我想要的不是如何悬停列表项，我想悬停项目周围的**符号。**

```
//html
<nav>
  <ul>
    <li># Home </li>
    <li># About Us </li>
    <li># Contact Us #</li>
  </ul>
</nav>

//css
nav ul li {
  display: inline-block;
}
nav ul li:hover {
  font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:52:23.323

可能这就是你想要的[http://jsfiddle.net/cLnUW/](http://jsfiddle.net/cLnUW/) 。这样写：

**HTML**

```
<ul>     
     <li><span>#</span> Home </li>     
     <li><span>#</span> About Us </li>     
     <li><span>#</span> Contact Us</li>
     <li><span>#</span></li>        
</ul> 
```

**CSS**

```
li {   display: inline-block; }
li:hover {   font-weight: bold; }
li:hover span, li:hover + li span{color:red;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:58:49.793

一个 seo 友好的例子：

```
<html>
    <head>
        <style>
            nav li{
                display: inline-block;
                text-decoration: none;
                color: #000;
                cursor: pointer;
            }
            nav li:hover {
                font-weight: bold;
                color: #FF0000;
            }
            nav li:before, nav li:hover:after, nav li:last-child:after {
                content:" # ";
            }
            nav li:hover + li:before {
                content:"";
            }
        </style>
    </head>
    <body>
        <nav>
          <ul>
            <li>Home</li>
            <li>About Us</li>
            <li>Contact Us</li>
          </ul>
        </nav>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:26:39.073

您可以使用`:hover`伪选择器和一个 before 伪选择器。例如。

```
.about:hover{
    color:#ff0000;
}
.about:hover:before{
    content:"->";
} 
```

before 伪选择器将一些内容添加到元素中，在本例中为箭头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T09:29:19.563

尝试使用 css`:hover`

```
​ul li:hover{
  color: black;
  font: 14px;
  font-weight: bold;
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T09:30:15.920

```
<div id="navBar">
    <ul>
        <li><span class="symb">#</span> about</li>
        <li><span class="symb">#</span> home</li>
    </ul>
</div>

#navBar ul li:hover{
    color: red;
}
span.symb{
    padding-bottom:5px;
} 
```

像这样使用无序列表并使用悬停伪选择器更改它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T09:32:23.810

**HTML**

```
<div id="menu">
<ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">Contact</a></li>
    <li><a href="#">About</a></li>
</ul>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS**

```
#menu ul li a:hover
{
    color:Green;
}
#menu ul li a:hover:before
{
content:"$";
}

#menu ul li a:before
{
content:"#";
} 
```

**[样本](http://jsfiddle.net/YTzba/1/)** ​</p>

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-31T09:27:46.860

演示解决方案：http: [//jsfiddle.net/PBrkX/](http://jsfiddle.net/PBrkX/)

下面的代码使用示例 html 来显示悬停的工作原理：

```
 <span id='home_sym'> # Home </span>
    <span id='about_sym'> # About Us </span> 
   <span id='contact_sym'> # Contact Us </span>

  css :

  #home_sym:hover{
       background-color: required color;
       font-weight: bold;
       /* add anyother css required when hover */
   }

   #about_sym:hover{
       background-color: required color;
       font-weight: bold;
       /* add anyother css required when hover */
   }

    #contact_sym:hover{
       background-color: required color;
       font-weight: bold;
       /* add anyother css required when hover */
   } 
```

# hadoop - Hadoop Map Reduce 链接中的数据共享

> ID：13154720
> 
> 赞同：3
> 
> 时间：2012-10-31T09:23:17.567
> 
> 标签：hadoop, mapreduce

是否可以在连续的 reducer 和 mapper 之间共享一个值？

或者是否可以将第一个 reducer 的输出存储到内存中，第二个 mapper 可以从内存中访问它？

问题是，我写了一个像 Map1 -> Reducer1 --> Map2 --> Reducer2 这样的链式映射减速器。

Map1 和 Map2 正在读取相同的输入文件。

Reduce1 正在推导一个值，假设“X”作为其输出。

我需要'X' 和 Map2 的输入文件。

我们如何在不读取 Reduce1 的输出文件的情况下做到这一点？

是否可以将“X”存储在内存中以供 Mapper 2 访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:52:38.983

每个作业彼此独立，因此如果不将输出存储在中间位置，就不可能跨作业共享数据。

仅供参考，在 MapReduce 模型中，地图任务不会相互交谈。减少任务也是如此。[在 Hadoop 上运行的Apache Giraph](http://incubator.apache.org/giraph/)使用同一作业中映射器之间的通信来进行迭代算法，这需要在映射器之间一次又一次地运行相同的作业而无需通信。

不确定正在实现的算法以及为什么使用 MR，但每个 MR 算法也可以在[BSP](http://en.wikipedia.org/wiki/Bulk_synchronous_parallel)中实现。这是[一篇](http://arxiv.org/abs/1203.2081)比较 BSP 和 MR 的论文。与 MR 相比，一些算法在 BSP 中表现良好。[Apache Hama](http://hama.apache.org/)是 BSP 模型的实现，就像 Apache Hadoop 是 MR 的实现一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:04:48.767

如果 Reducer1 生成的不同行数很少（假设您有 10000 个 (id,price) 元组），则首选使用两阶段处理。您可以将第一个 map/reduce 的结果加载到每个 Map2 映射器的内存中并过滤输入数据。因此，不需要的数据不会通过网络传输，所有数据都将在本地处理。使用 combineres 的数据量可以更少。

如果有大量不同的行，您需要两次读取数据。

# c# - 您如何在不访问服务的情况下将 WCF WSDL 和 XSD 共享给客户端（目前）？

> ID：13154726
> 
> 赞同：5
> 
> 时间：2012-10-31T09:23:43.927
> 
> 标签：c#, wcf, xsd, wsdl

我尝试生成 WSDL，然后使用客户端手动生成在 WSDL 中找到的每个 XSD。该服务目前仅在我的本地主机上，尚未发布。

客户端收到以下错误：

> 该文件已被理解，但无法处理。WSDL 文档包含无法解析的链接。下载“http://localhost:xxxx/MyService.svc?xsd=xsd0”时出错。无法连接到远程服务器 由于目标机器主动拒绝，无法建立连接 127.0.0.1:xxxx

应该如何生成和共享服务 WSDL 和 XSD，以便它们可以开始对客户端进行编码（无需访问服务 atm？

**编辑** 问题与 WSDL/XSD 中的这些相关

WSDL

```
<xsd:schema targetNamespace="http://tempuri.org/Imports">
    <xsd:import schemaLocation="http://localhost:xxxx/MyService.svc?xsd=xsd0" 
           namespace="http://tempuri.org/"/>
    <xsd:import schemaLocation="http://localhost:xxxx/MyService.svc?xsd=xsd1"  
           namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
    <xsd:import schemaLocation="http://localhost:xxxx/MyService.svc?xsd=xsd2" 
           namespace="**MYNAMESPACE**"/>
</xsd:schema> 
```

XSD

```
<xs:import schemaLocation="http://localhost:xxxx/MyService.svc?xsd=xsd1" 
  namespace="http://schemas.microsoft.com/2003/10/Serialization/"/> 
```

**编辑2：** 感谢`@The Indian Programmmer`我能够生成一个代理类来使用这个命令进行编程：

`"C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\svcutil.exe" -noconfig -namespace:*,SERVICE.INTERFACE.NAMESPACE -serializer:datacontractserializer https://My-PC/SvrLocation/MyService.svc?wsdl` （托管在本地 IIS 中）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T09:30:15.140

首先通过运行您的服务浏览到您的 wsdl。

然后分别浏览到 WSDL 中的所有 xsd 并将它们保存为 xsd 文件。

使用新的 xsd 相对路径更新您的 wsdl。只需将 xsd 的整个链接替换为其名称即可。

`Replace http://localhost:xxxx/MyService.svc?xsd=xsd0 with respective FileName`

```
<xsd:schema targetNamespace="namespace">
<xsd:import schemaLocation="Messages.xsd" namespace="namespace"/>
<xsd:import schemaLocation="DomainTypes.xsd" namespace="namespace"/>
<xsd:import schemaLocation="StreamBody.xsd" namespace="namespace"/>
</xsd:schema> 
```

***更新：如何生成代理文件***

```
svcutil  -noconfig -namespace:*,ServiceNameSpace -serializer:datacontractserializer  "Service.wsdl" "DomainTypes.xsd" "Messages.xsd" "StreamBody.xsd" 
```

所有文件都应该在同一个文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:32:53.167

您可以从本地主机下载 wsdl 文件。为此，您可以转到“ [http://localhost:xxx/MyService.svc?wsdl](http://localhost:xxx/MyService.svc?wsdl) ”
。基于此 wsdl，您可以使用 wsdl 工具生成服务代理。
有关如何生成代理的更多信息，请参阅[此问题](https://stackoverflow.com/questions/4304281/create-web-service-proxy-in-visual-studio-from-a-wsdl-file)

# java - 在我的 android 应用程序中使用 mapview 时如何发送视口坐标？

> ID：13154727
> 
> 赞同：3
> 
> 时间：2012-10-31T09:23:49.750
> 
> 标签：java, android, android-mapview

我`mapview`在我的 android 应用程序中使用的类`com.google.android.maps` 我不会在用户导航时使用后台进程加载标记我想将视口坐标发送到我的服务器我可以像这里一样在 javascript 中做到这一点

```
 google.maps.event.addListener(map, 'idle', showMarkers);
  function showMarkers() {
var bounds = map.getBounds();

// Call you server with ajax passing it the bounds

// In the ajax callback delete the current markers and add new markers 
```

}

但是我怎么能在java中做到这一点？请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T09:29:41.913

我发布了这个答案，我希望节省一些时间

```
import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.view.MotionEvent;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class SimpleMapView extends MapView {

    private int currentZoomLevel = -1;
    private GeoPoint currentCenter;
    private List<ZoomChangeListener> zoomEvents = new ArrayList<ZoomChangeListener>();
    private List<PanChangeListener> panEvents = new ArrayList<PanChangeListener>();

    public SimpleMapView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public SimpleMapView(Context context, String apiKey) {
        super(context, apiKey);
    }

    public SimpleMapView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    /**
     * 
     * @return
     */
    public int[][] getBounds() {

        GeoPoint center = getMapCenter();
        int latitudeSpan = getLatitudeSpan();
        int longtitudeSpan = getLongitudeSpan();
        int[][] bounds = new int[2][2];

        bounds[0][0] = center.getLatitudeE6() - (latitudeSpan / 2);
        bounds[0][1] = center.getLongitudeE6() - (longtitudeSpan / 2);

        bounds[1][0] = center.getLatitudeE6() + (latitudeSpan / 2);
        bounds[1][1] = center.getLongitudeE6() + (longtitudeSpan / 2);
        return bounds;
    }

    public boolean onTouchEvent(MotionEvent ev) {
        if (ev.getAction() == MotionEvent.ACTION_UP) {
            GeoPoint centerGeoPoint = this.getMapCenter();
            if (currentCenter == null || 
                    (currentCenter.getLatitudeE6() != centerGeoPoint.getLatitudeE6()) ||
                    (currentCenter.getLongitudeE6() != centerGeoPoint.getLongitudeE6()) ) {
                firePanEvent(currentCenter, this.getMapCenter());
            }
            currentCenter = this.getMapCenter();
        }
        return super.onTouchEvent(ev);
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);
        if(getZoomLevel() != currentZoomLevel){
            fireZoomLevel(currentZoomLevel, getZoomLevel());
            currentZoomLevel = getZoomLevel();
        }
    }

    @Override
    public void setSatellite(boolean on){
        super.setSatellite(on);
    }

    @Override
    public MapController getController(){
        return super.getController();
    }

    private void fireZoomLevel(int old, int current){
        for(ZoomChangeListener event : zoomEvents){
            event.onZoom(old, current);
        }
    }

    private void firePanEvent(GeoPoint old, GeoPoint current){
        for(PanChangeListener event : panEvents){
            event.onPan(old, current);
        }
    }

    public void addZoomChangeListener(ZoomChangeListener listener){
        this.zoomEvents.add(listener);
    }

    public void addPanChangeListener(PanChangeListener listener){
        this.panEvents.add(listener);
    }
} 
```

并在您的地图活动中制作

```
 SimpleMapView mapView = (SimpleMapView) findViewById(R.id.mapView); 
```

然后你有

```
 mapView.addPanChangeListener(new PanChangeListener() {

    @Override
    public void onPan(GeoPoint old, GeoPoint current) {
                  //TODO
              //do your work here 

                }
}); 
```

并在此处添加 PanChangeListener 类的代码

```
package yourPkageName;

import com.google.android.maps.GeoPoint;

public interface PanChangeListener {
    public void onPan(GeoPoint old, GeoPoint current);
} 
```

并在此处添加 ZoomChangeListener 类的代码

```
package yourPkageName;

public interface ZoomChangeListener {
    public void onZoom(int old, int current);
} 
```

并在您的 xml 文件中添加

```
<?xml version="1.0" encoding="utf-8"?>

<YourPakageName.SimpleMapView   xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:apiKey="0mAbU5bZyFY2I46PFJ1ysXGcYlAmFM6fYBWSB7Q"
    android:clickable="true" /> 
```

# iphone - 我可以动态更改 UIView 的内容吗？

> ID：13154729
> 
> 赞同：0
> 
> 时间：2012-10-31T09:24:00.047
> 
> 标签：iphone, objective-c, ios, cocoa

我想在不使用 removeFromSuperView 和 addSubview 的情况下动态更改 UIView 的内容。代码是我想要做的图像。

```
int screenWidth = [[UIScreen mainScreen] bounds].size.width;
int screenHeight = [[UIScreen mainScreen]bounds].size.height;
UIView *currentView = [[UIView alloc]initWithFrame:CGRectMake(0,0,screenWidth,screenHeight)];
UIView *nextView = [[UIView alloc]initWithFrame:CGRectMake(0,0,screenWidth,screenHeight)];

[self.view addSubview:currentView];

currentView = nextView;

//when this code run,appearing currentView swap nextView.
[self.view reload]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:34:47.463

确实。如果您希望它看起来不错，请使用您想要的属性创建“结束”视图并使用静态[转换](https://developer.apple.com/library/ios/documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW113)方法：`+transitionFromView:toView:duration:options:completion:`.

这将根据需要删除和添加视图，因此您不必调用这些方法。否则，您可以使用*janusfidel*`-setHidden:`建议的方法，以隐藏您不想看到的视图。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:56:27.907

```
//in viewdidload
{
........
........
[self.view addSubview:currentView];
[self.view addSubview:nextView];
nextView .hidden = YES;
}

-(void)changeView
{
if(!currentView .hidden)
{
currentView .hidden =YES;
nextView .hidden = NO;
}
else
{
currentView .hidden =NO;
nextView .hidden = YES;
}
} 
```*

# php - 作者页面上的 Wordpress WP_Query

> ID：13154734
> 
> 赞同：2
> 
> 时间：2012-10-31T09:24:20.543
> 
> 标签：php, wordpress, loops, custom-post-type

我想构建一个显示两个不同循环的 author.php：

#1 循环应显示作者使用自定义帖子类型“新闻”制作的所有帖子。

#2 循环应显示作者通过普通帖子发布的所有帖子。

这是我的代码：

```
<?php $curauth = (isset($_GET['author_name'])) ? get_user_by('slug', $author_name) :     get_userdata(intval($author)); ?> 
```

这一行将识别当前的作者......这是我的循环：

# 1

```
<?php
$args = array( 'post_type' => 'news','author=$curauth->ID','posts_per_page' => -1 ); ?>

<?php $loop = new WP_Query( $args ); ?>

<?php while ( $loop->have_posts() ) : $loop->the_post(); ?>

<h4><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4>
<?php   endwhile; ?> 
```

# 2

```
 <?php
$query = new WP_Query(array( 'post_type' => 'post','author=$curauth-  >ID','posts_per_page' => -1 ));
while ( $query->have_posts() ) : $query->the_post(); ?>
<h4><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4>
<?php   endwhile; ?> 
```

我猜这个问题是 >>' `author=$curauth- >ID`'<< 在字符串中不起作用。它输出所有帖子，并且不会在不同作者之间分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:52:47.753

也许你可以尝试使用通常的 WP 循环

```
 <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?> 
```

并添加：

```
wp_reset_query(); 
```

在第一个列表之后。

在这种情况下，我认为您不需要 custum WP_QUery，如果您保留它的样本，这可能会消除一些错误或错误。

希望这会有所帮助

# magento - Magento 在 Topmenu.php 中获取类别属性值

> ID：13154736
> 
> 赞同：5
> 
> 时间：2012-10-31T09:24:21.623
> 
> 标签：magento, menu, attributes, categories

我创建了一个自定义类别属性。现在我需要在 Topmenu.php 的 _getHtml() 函数中访问它的值。

谁能告诉我该怎么做？:)

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T15:42:54.510

安德鲁的回答是我通常这样做的方式。但是，重要的是要注意，如果您要添加自定义属性，并且如果您希望商店在启用和不启用类别平面表的情况下工作，则需要确保将以下内容添加到代码中：

在您的模块上`config.xml`：

```
...
<frontend>
    <category>
        <collection>
            <attributes>
                <my_attribute /><!-- your attribute code here -->
            </attributes>
        </collection>
    </category>
</frontend>
... 
```

这将确保在创建默认类别集合时加载您的属性`Mage_Catalog_Model_Resource_Category_Tree::_getDefaultCollection()`。现在，当商店设置为*不*使用类别平面表时，这很有效。如果您想使用平面表格，您还需要在`Mage_Catalog_Model_Resource_Category_Flat::_loadNodes`. 在下面找到创建选择的代码，并在那里添加您的属性代码：

```
$select = $_conn->select()
    ->from(
        array('main_table' => $this->getMainStoreTable($storeId)),
        array('entity_id',
            new Zend_Db_Expr('main_table.' . $_conn->quoteIdentifier('name')),
            new Zend_Db_Expr('main_table.' . $_conn->quoteIdentifier('path')),
            'is_active',
            'is_anchor',
            'my_attribute')) /* add your attribute code here */ 
```

只有在那之后，您的属性才会显示在观察者上。不用说，使用覆盖，永远不要更改核心代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-31T15:17:27.233

除非您进行一些更改，否则您将无法在 TopMenu 块中获取此类数据。

导航是使用通用树结构构建的，该树结构没有类别是什么的概念，但是这是在其他地方使用类别构建的。

如果您查看 Topmenu.php 内部，您将看到 Navigation 的构建位置：

```
Mage::dispatchEvent('page_block_html_topmenu_gethtml_before', array(
    'menu' => $this->_menu
)); 
```

这将触发一个事件，该事件附加了一个观察者，它将为我们构建导航项，它恰好是：

```
Model: Mage_Catalog_Model_Observer
Method: _addCategoriesToMenu() 
```

然后，您可以将新属性添加到节点数据中，然后可以在 Topmenu.php 中使用

例子：

```
$categoryData = array(
    'name' => $category->getName(),
    'id' => $nodeId,
    'url' => Mage::helper('catalog/category')->getCategoryUrl($category),
    'is_active' => $this->_isActiveMenuCategory($category),
    'my_attribute' => $category->getData('my_attribute') // Add our data in...
); 
```

然后您应该可以在 Topmenu::_getHtml() 中使用它

```
echo $child->getData('my_attribute'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-02T04:31:19.690

只是为了完成 Gabriel Queiroz Silva 的回答：

您可以使用观察者，而不是编辑或覆盖 Mage_Catalog_Model_Resource_Category_Flat::_loadNodes 方法：

```
Mage::dispatchEvent('catalog_category_flat_loadnodes_before', array('select' => $select)); 
```

# php - javascript中的快速URL加密，php中的解密

> ID：13154737
> 
> 赞同：1
> 
> 时间：2012-10-31T09:24:29.170
> 
> 标签：php, javascript, encryption

我有一个带有几个参数的 url 用于 http 请求。它看起来像这样：

```
http://www.url.com/site.php?parameter1=x&parameter2=y 
```

我想在javascript中做这样的事情：

```
http://www.url.com/data=wafseghsgse or http://www.url.com/site/?data=wafseghsgse 
```

在 php 中，我会让“旧”网址重新使用它。

我正在寻找最快的方法，而不是最安全的方法。为了保存加密密钥，我会使用数据库或会话（安全？）。

寻找你的好主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:33:42.610

如果您只想要一种不关心安全性的快速混淆方法，您可以使用[ROT13 ，您在](http://en.wikipedia.org/wiki/ROT13)[Where is my one-line implementation of rot13 in JavaScript going wrong? 中](https://stackoverflow.com/questions/617647/where-is-my-one-line-implementation-of-rot13-in-javascript-going-wrong)有 javascript ROT13 实现？然后在 PHP 中你有[str_rot13()](http://php.net/manual/en/function.str-rot13.php)来解密 javascript 版本。

# php - Yii CHtml textField 值中的特殊字符

> ID：13154740
> 
> 赞同：0
> 
> 时间：2012-10-31T09:24:37.063
> 
> 标签：php, yii

代码：

```
CHtml::textField('username', $username, array('class'=>'text')); 
```

如果我的输入字段有**Å**类型的特殊字符，则该值将消失。如果我把 as`htmlentities($username)`放在值字段中，它会解决。但它将字符打印为`&Aring;`

我认为这是因为这些值是通过 CHtml::encode() 函数打印出来的。

我应该如何打印正确的值？请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:05:08.550

确保你有在 html 头

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

如果您使用多字节字符串，这可能会有所帮助：

```
mb_internal_encoding("UTF-8"); 
mb_regex_encoding('UTF-8'); 
```

将上述两行放在代码的开头。我总是将这些包含在我的 index.php 的前 2 行中

# java - 处理ejb错误的正确方法

> ID：13154744
> 
> 赞同：1
> 
> 时间：2012-10-31T09:24:52.557
> 
> 标签：java, jakarta-ee, ejb

我正在研究 EJB 客户端 + 服务器，我想知道如何处理客户端上的服务器数据错误。我应该检查客户端的返回值还是捕获异常？使用返回值逻辑的示例：

```
//server bean method
public int create(MyObj obj) {
    int PKID = someDataService.create(obj);
    return PKID;
}

//client
if(!(MyBean.create(obj) > 0)) {
    showMessage("Can't create MyObj");
} 
```

有例外的例子：

```
//server bean method
public void create(MyObj obj) {
    int PKID = someDataService.create(obj);
    if(!(id > 0)) {
        //only EJBExceptions will be delivered to client
        throw new EJBException(new MyDataException());
    }
}

//client
try {
    MyBean.create(obj);
}
catch(EJBException e) {
    if(e.getCause().getClass.equals(MyDataException.class)) {
        showMessage("Can't create MyObj");
    }
    else {
        showMessage("Some boring error occurred");
    }
} 
```

我知道，返回值检查而不是异常看起来像用 C 编码，但是所有这些 EJB 事情让我感到困惑。哪个是更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:43:15.550

从您的方法中抛出异常

```
public void create(MyObj obj) throws MyDataException 
```

并使用注释您的自定义异常`ApplicationException`

```
@javax.ejb.ApplicationException
public class MyDataException extends Exception
{ 
```

# python - 将嵌套列表中的单词拆分为字母

> ID：13154748
> 
> 赞同：5
> 
> 时间：2012-10-31T09:25:06.007
> 
> 标签：python

我想知道如何将嵌套列表中的单词拆分成单独的字母，这样

```
[['ANTT'], ['XSOB']] 
```

变成

```
[['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T09:26:26.660

使用列表推导：

```
[list(l[0]) for l in mylist] 
```

您的输入列表仅包含嵌套列表，每个列表有 1 个元素，因此我们需要`l[0]`在每个元素上使用。`list()`在字符串上创建单个字符的列表：

```
>>> mylist = [['ANTT'], ['XSOB']]
>>> [list(l[0]) for l in mylist]
[['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']] 
```

如果您曾经修复您的代码以生成一个直接向上的字符串列表（因此没有单元素嵌套列表），您只需要删除`[0]`：

```
>>> mylist = ['ANTT', 'XSOB']
>>> [list(l) for l in mylist]
[['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:40:15.323

你可以给你一个功能性的方法（我仍然更喜欢 Martijn Pieters 的回答中的列表理解）：

```
>>> from operator import itemgetter
>>> delisted = map(itemgetter(0),[['ANTT'],['XSOB']])  # -> ['ANTT', 'XSOB']
>>> splited = map(list,delisted)  # -> [['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']] 
```

或者，作为单行者：

```
>>> map(list,map(itemgetter(0),[['ANTT'],['XSOB']]))
[['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:30:30.647

```
>>> map(lambda s: map(list, s)[0], [['ANTT'],['XSOB']])
[['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-10T09:17:58.373

到目前为止给出的所有答案都包括一个 - 有点可疑 -`0`字面意思。乍一看，这似乎是一种人为的添加剂，因为原始任务不包含任何整数文字。

但是输入当然具有一些**特殊属性**，而不仅仅是一个列表。它是一个列表列表，其中只有*一个*字符串文字。换句话说，一个单独装箱的对象（字符串）的包。如果我们重新表述原始问题和[接受的答案](https://stackoverflow.com/a/13154766/2932052)`[x]`，我们可以使和之间的关系`[0]`更加明显：

```
package = [['ANTT'], ['XSOB']]
result = [list(box[0]) for box in package]   # 0 indicates first (and only) element in the box 
```

# cassandra - 当我启动 Cassandra 服务器时，两个进程开始运行。这是正常的吗？

> ID：13154760
> 
> 赞同：3
> 
> 时间：2012-10-31T09:26:06.257
> 
> 标签：cassandra

当我启动 Cassandra 服务器时，两个进程开始运行。这是 Cassandra 的正常行为吗？以下是具有两个不同进程 ID 的结果集：

```
5362 jsvc.exec -user cassandra -home /usr/lib/jvm/java-6-openjdk-amd64/jre/bin/../ -pidfile /var/run/cassandra.pid -errfile &1 -outfile /var/log/cassandra/output.log -cp /usr/share/cassandra/lib/antlr-3.2.jar:/usr/share/cassandra/lib/avro-1.4.0-fixes.jar:/usr/share/cassandra/lib/avro-1.4.0-sources-fixes.jar:/usr/share/cassandra/lib/commons-cli-1.1.jar:/usr/share/cassandra/lib/commons-codec-1.2.jar:/usr/share/cassandra/lib/commons-lang-2.4.jar:/usr/share/cassandra/lib/compress-lzf-0.8.4.jar:/usr/share/cassandra/lib/concurrentlinkedhashmap-lru-1.3.jar:/usr/share/cassandra/lib/guava-r08.jar:/usr/share/cassandra/lib/high-scale-lib-1.1.2.jar:/usr/share/cassandra/lib/jackson-core-asl-1.9.2.jar:/usr/share/cassandra/lib/jackson-mapper-asl-1.9.2.jar:/usr/share/cassandra/lib/jamm-0.2.5.jar:/usr/share/cassandra/lib/jline-0.9.94.jar:/usr/share/cassandra/lib/json-simple-1.1.jar:/usr/share/cassandra/lib/libthrift-0.7.0.jar:/usr/share/cassandra/lib/log4j-1.2.16.jar:/usr/share/cassandra/lib/metrics-core-2.0.3.jar:/usr/share/cassandra/lib/servlet-api-2.5-20081211.jar:/usr/share/cassandra/lib/slf4j-api-1.6.1.jar:/usr/share/cassandra/lib/slf4j-log4j12-1.6.1.jar:/usr/share/cassandra/lib/snakeyaml-1.6.jar:/usr/share/cassandra/lib/snappy-java-1.0.4.1.jar:/usr/share/cassandra/lib/snaptree-0.1.jar:/usr/share/cassandra/apache-cassandra-1.1.5.jar:/usr/share/cassandra/apache-cassandra-thrift-1.1.5.jar:/usr/share/cassandra/apache-cassandra.jar:/usr/share/cassandra/stress.jar:/usr/share/java/jna.jar:/etc/cassandra:/usr/share/java/commons-daemon.jar -Dlog4j.configuration=log4j-server.properties -XX:HeapDumpPath=/var/lib/cassandra/java_1351664352.hprof -XX:ErrorFile=/var/lib/cassandra/hs_err_1351664352.log -ea -javaagent:/usr/share/cassandra/lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms1024M -Xmx1024M -Xmn256M -XX:+HeapDumpOnOutOfMemoryError -Xss160k -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=1 -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -Djava.net.preferIPv4Stack=true -Dcom.sun.management.jmxremote.port=7199 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false org.apache.cassandra.thrift.CassandraDaemon
5363 jsvc.exec -user cassandra -home /usr/lib/jvm/java-6-openjdk-amd64/jre/bin/../ -pidfile /var/run/cassandra.pid -errfile &1 -outfile /var/log/cassandra/output.log -cp /usr/share/cassandra/lib/antlr-3.2.jar:/usr/share/cassandra/lib/avro-1.4.0-fixes.jar:/usr/share/cassandra/lib/avro-1.4.0-sources-fixes.jar:/usr/share/cassandra/lib/commons-cli-1.1.jar:/usr/share/cassandra/lib/commons-codec-1.2.jar:/usr/share/cassandra/lib/commons-lang-2.4.jar:/usr/share/cassandra/lib/compress-lzf-0.8.4.jar:/usr/share/cassandra/lib/concurrentlinkedhashmap-lru-1.3.jar:/usr/share/cassandra/lib/guava-r08.jar:/usr/share/cassandra/lib/high-scale-lib-1.1.2.jar:/usr/share/cassandra/lib/jackson-core-asl-1.9.2.jar:/usr/share/cassandra/lib/jackson-mapper-asl-1.9.2.jar:/usr/share/cassandra/lib/jamm-0.2.5.jar:/usr/share/cassandra/lib/jline-0.9.94.jar:/usr/share/cassandra/lib/json-simple-1.1.jar:/usr/share/cassandra/lib/libthrift-0.7.0.jar:/usr/share/cassandra/lib/log4j-1.2.16.jar:/usr/share/cassandra/lib/metrics-core-2.0.3.jar:/usr/share/cassandra/lib/servlet-api-2.5-20081211.jar:/usr/share/cassandra/lib/slf4j-api-1.6.1.jar:/usr/share/cassandra/lib/slf4j-log4j12-1.6.1.jar:/usr/share/cassandra/lib/snakeyaml-1.6.jar:/usr/share/cassandra/lib/snappy-java-1.0.4.1.jar:/usr/share/cassandra/lib/snaptree-0.1.jar:/usr/share/cassandra/apache-cassandra-1.1.5.jar:/usr/share/cassandra/apache-cassandra-thrift-1.1.5.jar:/usr/share/cassandra/apache-cassandra.jar:/usr/share/cassandra/stress.jar:/usr/share/java/jna.jar:/etc/cassandra:/usr/share/java/commons-daemon.jar -Dlog4j.configuration=log4j-server.properties -XX:HeapDumpPath=/var/lib/cassandra/java_1351664352.hprof -XX:ErrorFile=/var/lib/cassandra/hs_err_1351664352.log -ea -javaagent:/usr/share/cassandra/lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms1024M -Xmx1024M -Xmn256M -XX:+HeapDumpOnOutOfMemoryError -Xss160k -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=1 -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -Djava.net.preferIPv4Stack=true -Dcom.sun.management.jmxremote.port=7199 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false org.apache.cassandra.thrift.CassandraDaemon 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:11:14.290

是的，这很正常。我们使用 jsvc 干净地守护进程。

# php - 从服务器做ajax调用和jquery

> ID：13154763
> 
> 赞同：0
> 
> 时间：2012-10-31T09:26:17.850
> 
> 标签：php, javascript, jquery

我有一个脚本对 yahoo API 进行 ajax 调用，然后“抓取”给定的 URL 并发回数据。其次，数据被发送到一个名为“嵌入”的服务（这是另一个调用），嵌入服务然后做它的事情并感应回显示为纯 HTML 的数据。请看脚本，很简单：[JsFiddle](http://jsfiddle.net/m4QCt/149/)

```
$(document).ready(function() {

    baseUrl = "http://www.nu.nl";
    $.ajax({
        url: baseUrl,
        type: "get",
        dataType: "",
        success: function(data) {

            $foop = $('<form>' + data.responseText + '</form>');
            console.log(data.responseText);

            $.each($foop.find('h3 a[href]'), function(idx, item) {
                lnk = $(item).attr("href");
                 text = ('http://www.nu.nl');

$('<fb:like href="' + text + lnk + '"></fb:like><a href="' + text + lnk + '"></a>').appendTo('#content');
});

 $('div#content').embedly({key: 'XXXXXXXXXXXXXXXXXX',
 words: 10
 }); 

        },
        error: function(status) {
            //console.log("request error:"+url);
        }
    });

    }); 
```

我面临的问题是，有时调用需要很长时间，尤其是在晚上和周末，雅虎 API 和嵌入确实需要很长时间才能返回数据。我想通过使用 PHP 进行调用服务器端来解决这个问题。因此，如果访问者访问我的网站，他会改为从我的服务器接收数据。当然，数据必须以某种方式“刷新”，例如每分钟左右。我已经对此进行了谷歌搜索，但似乎找不到任何描述使用 PHP 进行 ajax 调用的内容等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:30:59.843

基本上，ajax 调用只是 HTTP-GET 调用。只需使用 curl（推荐）或`file_get_contents()`使用 php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:43:10.460

您要做的是创建一个服务器端代理，创建一个文件并将其命名为 YahooAPIProxy.php` 在此文件中调用 yahoo API 之类的

```
<?php
header('Content-Type: text/html; charset=ISO-8859-15');
function get_url_contents($url){
        $crl = curl_init();
        $timeout = 5;
        curl_setopt ($crl, CURLOPT_URL,$url);
        curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
        $ret = curl_exec($crl);
        curl_close($crl);
        return $ret;
}

    $url = “http://www.nu.nl”;
    $str = file_get_contents($url);

    echo $str;
?> 
```

从客户端调用此代理，例如

```
$(document).ready(function() {

    $.ajax({
        url: '/YahooAPIProxy.php',
        type: "get",           
        dataType: "application/x-www-form-urlencoded; charset=UTF-8",
        success: function(data) {
            $foop = $('<form>' + data.responseText + '</form>');
            console.log(data.responseText);

            $.each($foop.find('h3 a[href]'), function(idx, item) {
                lnk = $(item).attr("href");
                 text = ('http://www.nu.nl');

$('<fb:like href="' + text + lnk + '"></fb:like><a href="' + text + lnk + '"></a>').appendTo('#content');
}); 
```

同样，您可以对 Embedly API 重复该过程

# mysql - 用于 Hibernate + JPA2 项目的 MySQL 或 PostgreSQL

> ID：13154767
> 
> 赞同：1
> 
> 时间：2012-10-31T09:26:28.157
> 
> 标签：mysql, postgresql, jpa-2.0

我想确认哪个更好，我看到民意调查显示 PostgreSQL 在 JPA/Hibernate 的速度方面领先于 MySQL。

在我最终决定使用哪个之前，需要一些基于速度、可靠性、兼容性等的反馈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:57:16.863

任何一个都可以比另一个更快。

这取决于工作负载和您的数据库设计。MySQL 有一些 PostgreSQL 没有的性能特性，但似乎 PostgreSQL 在具有并发读写场景的情况下可以更好地扩展。但同样：这在很大程度上取决于您如何使用系统。我相信您可以轻松地设置一个测试，证明其中一个比另一个快。

PostgreSQL 中的查询优化器比 MySQL 中的更高级，并且可以更好地处理复杂的语句（尤其是在涉及子选择时）

至于可靠性，我认为 PostgreSQL 更可靠（特别是与使用 MyISAM 的 MySQL 相比 - InnoDB 在这里要好得多）。PostgreSQL 开发人员的主要目标是首先确保数据是安全的。但我没有任何确凿的事实来支持这种说法！这只是我通过阅读几个 DBMS 相关论坛得到的感觉。MySQL的损坏问题*似乎*比 Postgres 更常见

就（现代）SQL 特性而言，MySQL 远远落后于 PostgreSQL（想想检查约束、递归查询、窗口函数、事务 DDL 等）。PostgreSQL 缺少的一件事是相当于 MySQL 的`INSERT ... ON DUPLICATE ...`功能（又名“合并”或“更新插入”）。

如果重要的话，MySQL 的（表）分区更容易设置和管理。

兼容什么？使用 ANSI SQL 标准？然后 PostgreSQL 比 MySQL 好得多。

# java - 为什么可以将 int[] 转换为 Object，但不能转换为 Object[]？

> ID：13154769
> 
> 赞同：3
> 
> 时间：2012-10-31T09:26:36.660
> 
> 标签：java, arrays, casting, primitive

所以这有效：

```
int i;
Object a  = (Object) i;
int[] t;
Object b = (Object) t;
String[] s;
Object[] t = (Object[]) s; 
```

但这不会：

```
int[] t;
Object[] z = (Object[]) t; 
```

总而言之，我得到了第一部分（拳击），但我发现第二部分不起作用是非常不直观的。是否有特定的原因（除了从 Object 继承的 String 和不从 Object 继承的 int ）？

编辑：

为了完善我的问题，这也有效：

```
int a = 2;
int b = 3;
int c = 4;
int d = 2;
Object[] o = new Object[] {a,b,c,d}; 
```

但是以下内容不会：

```
int[] t = (int[]) o; 
```

令人惊讶的是，您在使用 String 时遇到了同样的问题：

```
String sa = "a";
String sb = "b";
String sc = "c";
String sd = "d";
Object[] so = new Object[] {sa,sb,sc,sd};
String[] st = (String[]) so; 
```

在最后一行产生一个类转换异常。这仍然有效：

```
Object[] sy = (Object[])new String[]{sa,sb,sc,sd};
String[] sz = (String[]) sy; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:28:38.050

A `int[]` is an array of *primitives* but also an Object itself. It is not an array of Objects

There is no auto-boxing support for arrays. You need to pick the right type of array to start with and not be converting it at runtime.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:28:45.890

Any array, including `int[]` is actually an `Object`. This is why you can cast to Object. However, `int` is a primitive, so it doesn't extend `Object`, so you cannot cast to `Object[]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:36:29.350

> 对象是类实例或数组。

JLS[第 4.3.1 节](http://java.sun.com/docs/books/jls/third_edition/html/typesValues.html#4.3.1)中对此进行了说明。

现在，`int[]`是一个数组，它是一个对象。

```
String[] s; 
```

和

```
int[] 
```

有以下不同：

前者可以指向一个`String`对象数组，但后者可以指向一个原始数组`int`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T09:31:21.703

正如您所说：String 继承自 Object 而 int 不继承自 Object，这就是原因。int、boolean、double... 是原始类型，它们不从 Object 扩展。您应该使用 Integer 而不是 int。

```
Integer[] t;
Object[] z = (Object[]) t; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T12:25:29.627

我刚刚找到了我一直在寻找的答案。您不能强制转换为的原因`int[]`不是`Object[]`因为 int 是原始的并且不扩展`Object`，而是因为`int[]`它本身不扩展`Object[]`。在代码中：

```
int[] t = new int[0];
Object ot = t;
System.out.println(ot instanceof Object[]);
// --> prints 'false'
String[] s = new String[0];
Object os = s;
System.out.println(os instanceof Object[]);
// --> prints 'true' 
```

编辑：装箱是必要的，因为 Eclipse 知道这一点`int[]`并且`Object[]`不兼容。

编辑二：顺便说一句，这`if(obj instanceof Object[])`允许检查盒装数组是否是原始类型的数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-26T12:21:05.193

根据 Java Spec 4.10.3 [Subtyping between Array Types](http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.10.3)：

> *   如果 S 和 T 都是引用类型，则 S[] > [1] T[] 当且 S > [1] T。
>     
>     
> *   对象 > [1 个]对象[]
>     
>     
> *   如果 P 是原始类型，则 Object > [1] P[]

S > [1] T 表示 T 是 S 的直接子类型

这基本上意味着 int[] 和 Integer[] 在 Java 中类型层次结构的不同分支中，不能相互转换。

# iphone - 想要在 ios 上的 sqlite3 中保存图像的建议

> ID：13154777
> 
> 赞同：1
> 
> 时间：2012-10-31T09:26:57.397
> 
> 标签：iphone, image, ios5, sqlite, blob

我正在为 iOS 开发一个使用 SQLite3 数据库的应用程序，现在我想在其中保存一些图像，我在网上搜索过人们说像这样在 SQLite3 中保存图像不是一个好主意

[Blob 数据类型？](https://stackoverflow.com/questions/4363755/blob-data-type)

我完全不知道该怎么做，所以我在你面前描绘了我的整个情况，请告诉我该怎么做

我想在我的 SQLite 数据库中存储 79 个图像，其中大多数大小为 2kb，很少有 20 到 25 kb，所有图像在磁盘上占用 384kb，因此建议将所有图像存储在我的数据库中还是只使用链接我的图像数据库和文件系统

请尽快给我建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:40:57.733

我同意将大型 blob 存储在数据库中可能会导致网站和其他拥有大量用户的应用程序出现性能问题。数据库资源浪费在文件系统或其他服务器可以处理的长时间操作上。

但是，使用 iPhone 应用程序，您无需担心数据库资源被浪费在 blob 上。您的应用程序将只有 1 个用户访问数据库，因此如果图像来自文件系统或 SQLite，它将同样响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:41:13.020

好吧，我不建议将图像存储在数据库中。主要原因是这会导致您的数据库崩溃（我不会总是这么说，但是在某些情况下，我确实看到了由于存储图像而导致数据库崩溃）。

缓存图像的最佳方法是将图像保存到文档目录中。这是安全和强大的。快乐编码。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:49:11.403

在我看来，将 imagePath 保存在 SQLite 中，并将图像保存在您的文档目录中。我也一样。可能对你有帮助。

```
-(void)saveDataToDatabase:(NSString *)fileNameToSave
{

NSString *docsDir;
NSArray *dirPaths;
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];
sqlite3_stmt    *statement;
NSString *databasePath = [[NSString alloc]
                          initWithString: [docsDir stringByAppendingPathComponent:
                                           @"scanner.db"]];

NSLog(@"%@",databasePath);

const char *dbpath = [databasePath UTF8String];

if (sqlite3_open(dbpath, &databaseHandle) == SQLITE_OK)
{
    NSString *insertSQL = [NSString stringWithFormat: @"Insert into IMAGEINFO (NAME,IMAGEPATH) values ('%@','%@')",@"imageFirst",fileNameToSave];
    const char *insert_stmt = [insertSQL UTF8String];
    sqlite3_prepare_v2(databaseHandle, insert_stmt, -1, &statement, NULL);
    if (sqlite3_step(statement) == SQLITE_DONE)
    {
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"database"];
    }
    else
    {
    }
}

}

-(void)saveImage:(NSString *)fileName:(UIImage *)imageToSave
{
NSError *error;
NSString *fileNaToSave = [NSString stringWithFormat:@"Documents/%@.png",fileName];
NSString  *pngPath = [NSHomeDirectory() stringByAppendingPathComponent:fileNaToSave];

// Write image to PNG
[UIImagePNGRepresentation(imageToSave) writeToFile:pngPath atomically:YES];
// Let's check to see if files were successfully written...
// You can try this when debugging on-device

// Create file manager
NSFileManager *fileMgr = [NSFileManager defaultManager];

// Point to Document directory
NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];

// Write out the contents of home directory to console
NSLog(@"Documents directory: %@", [fileMgr contentsOfDirectoryAtPath:documentsDirectory error:&error]);

} 
```

# html - 为什么 yslow 将我的图像、脚本和 css 识别为 cookie？

> ID：13154782
> 
> 赞同：1
> 
> 时间：2012-10-31T09:27:08.380
> 
> 标签：html, performance, cookies, yslow

![慢](../Images/eab164eae67a6cd159c52bc0622191a9.png)

我正在使用 yslow 版本 3.1.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:12:28.727

每次向主机域发出的请求都会发送一个 cookie，该请求与使用响应标头设置时指定的`domain`和属性相匹配。`path``set-cookie:`

当您的浏览器`GET`为其请求标头发出 a时，如果域和路径匹配，`print.css`则仍将包含标头。`cookie:`

为了防止这种情况，请参阅[在 cookie 上设置路径防止它在 http 静态请求中发送？](https://stackoverflow.com/questions/4787710/setting-the-path-on-cookie-prevent-it-being-sent-in-http-static-requests).

# php - 在 CodeIgniter PHP 中上传之前调整图像大小

> ID：13154787
> 
> 赞同：1
> 
> 时间：2012-10-31T09:27:20.517
> 
> 标签：php, codeigniter, image-resizing

我的函数中有以下代码块：

```
$target_path = "uploads/";

        $target_path = $target_path . basename( $_FILES['image']['name']);

        if(move_uploaded_file($_FILES['image']['tmp_name'], $target_path))
       {
             echo  "The file ".  basename( $_FILES['image']['name'])." has been uploaded";           
       }      
       else   
       {
            echo "There was an error uploading the file, please try again!";
       } 
```

现在我想在上传之前调整图像大小。我正在使用 CodeIgniter 框架。我有这个代码：

```
$config['upload_path'] = "uploads/";

 $path=$config['upload_path'];

        $config['overwrite'] = FALSE;
        $config['remove_spaces'] = TRUE;
        $config['allowed_types'] = 'gif|jpg|jpeg|png|JPEG|JPG|PNG';
        $config['max_size'] = '1024';
        $config['maintain_ratio'] = TRUE;
        $config['max_width'] = '1000';
        $config['max_height'] = '1000';
        $this->load->library('upload',$config); 
```

但这不能正常工作。我正在寻找一个好的解决方案，其中图像按我指定的高度和宽度上传。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:10:46.480

这是我用来让我们的员工上传产品图片的功能，它上传完整尺寸的图片和两张较小的图片（我这里只包含了一张 tn_ 版本的代码）。它采用它所做的值，因为它在我的控制器中并且可以从多个地方调用。$control 是您正在使用的 fileUpload 控件的名称，$path 是保存路径，$imageName 是来自控件，size 只允许我指定要制作的版本，在我的情况下，它接收所有，med 和 tn作为选项。您可以根据需要制作尽可能多的或尽可能少的。正如 VDP 提到的，如果您不更改任何设置，则限制在 2mb 以下，但这对我来说很好，所以如果超过了，我只会返回一个错误。

顺便说一句，我根本不使用 CI 图像上传库。它只是通过正常的文件上传和 ajax 发送到控制器。它在主视图上使用 iframe 来显示错误或成功。

我的控制器上传功能：

```
function doUpload($control, $path, $imageName, $sizes)
{
    if( ! isset($_FILES[$control]) || ! is_uploaded_file($_FILES[$control]['tmp_name']))
    {
        print('No file was chosen');
        return FALSE;
    } 
    if($_FILES[$control]['size']>2048000)
    {
        print('File is too large ('.round(($_FILES[$control]["size"]/1000)).'kb), please choose a file under 2,048kb');
        return FALSE;
    }
    if($_FILES[$control]['error'] !== UPLOAD_ERR_OK)
    {
        print('Upload failed. Error code: '.$_FILES[$control]['error']);
        Return FALSE;
    }
    switch(strtolower($_FILES[$control]['type']))
    {
    case 'image/jpeg':
            $image = imagecreatefromjpeg($_FILES[$control]['tmp_name']);
            move_uploaded_file($_FILES[$control]["tmp_name"],$path.$imageName);
            break;
    case 'image/png':
            $image = imagecreatefrompng($_FILES[$control]['tmp_name']);
            move_uploaded_file($_FILES[$control]["tmp_name"],$path.$imageName);
            break;
    case 'image/gif':
            $image = imagecreatefromgif($_FILES[$control]['tmp_name']);
            move_uploaded_file($_FILES[$control]["tmp_name"],$path.$imageName);
            break;
    default:
           print('This file type is not allowed');
           return false;
    }
    @unlink($_FILES[$control]['tmp_name']);
    $old_width      = imagesx($image);
    $old_height     = imagesy($image);

    //Create tn version
    if($sizes=='tn' || $sizes=='all')
    {
    $max_width = 100;
    $max_height = 100;
    $scale          = min($max_width/$old_width, $max_height/$old_height);
    if ($old_width > 100 || $old_height > 100)
    {
    $new_width      = ceil($scale*$old_width);
    $new_height     = ceil($scale*$old_height);
    } else {
        $new_width = $old_width;
        $new_height = $old_height;
    }
    $new = imagecreatetruecolor($new_width, $new_height);
    imagecopyresampled($new, $image,0, 0, 0, 0,$new_width, $new_height, $old_width, $old_height);
    switch(strtolower($_FILES[$control]['type']))
    {
    case 'image/jpeg':
            imagejpeg($new, $path.'tn_'.$imageName, 90);
            break;
    case 'image/png':
            imagealphablending($new, false);
            imagecopyresampled($new, $image,0, 0, 0, 0,$new_width, $new_height, $old_width, $old_height);
            imagesavealpha($new, true); 
            imagepng($new, $path.'tn_'.$imageName, 0);
            break;
    case 'image/gif':
            imagegif($new, $path.'tn_'.$imageName);
            break;
    default:
    }
    }

    imagedestroy($image);
    imagedestroy($new);
    print '<div style="font-family:arial;"><b>'.$imageName.'</b> Uploaded successfully. Size: '.round($_FILES[$control]['size']/1000).'kb</div>';
} 
```

查看 HTML：

```
echo '<input type="file" name="manuLogoUpload" id="manuLogoUpload" onchange="return ajaxFileUpload2(this);"/>'; 
```

查看ajax调用：

```
 function ajaxFileUpload2(upload_field)
        {
            var re_text = /\.jpg|\.gif|\.jpeg|\.png/i;
            var filename = upload_field.value;
            var imagename = filename.replace("C:\\fakepath\\","");
            if (filename.search(re_text) == -1) 
            {
                alert("File must be an image");
                upload_field.form.reset();
                return false;
            }
            upload_field.form.action = "addManufacturerLogo";
            upload_field.form.target = "upload_iframe";
            upload_field.form.submit();
            upload_field.form.action = "";
            upload_field.form.target = "";
            document.getElementById("logoFileName").value = imagename;
            document.getElementById("logoFileName1").value = imagename;
            document.getElementById("manuLogoText").style.display="block";
            document.getElementById("logoLink").style.display="none";
            $.prettyPhoto.close();
            return true;        
        } 
```

常规控制器功能：

```
function addManufacturerLogo()
{
    $control = 'manuLogoUpload';
    $image = $_FILES[$control]['name'];
    if($imageName = $this->doUpload($control,LOGO_PATH,$image,'all'))
    {

    } else {

    }
} 
```

config/constants.php << 用于 LOGO_PATH。更改这些（和名称）以适合您的目的。原因是如果我改变了我想保存图像的位置，我会在常量中更改它，而不是在整个应用程序中的 10 个位置进行更改。

```
define('LOGO_PATH',APPPATH.'assets/images/manulogos/');
define('PROD_IMAGE_PATH',APPPATH.'../assets/images/prod_images/'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T09:34:34.823

最好是使用客户端工具在本地调整图像大小，然后上传。您也可以在服务器端调整大小（使用 php gd），但 php 将文件复制到内存中，默认情况下，它只能将图像大小调整到 +/- 2MB。您可以使用 php 限制上传大小和调整大小，也可以使用 Flash、Silverlight 或 JavaApplets。

这是关于使用 Flash 调整客户端大小的[另一个问题](https://stackoverflow.com/questions/431120/flash-upload-image-resize-client-side)

**更新：**

使用 CI 的 Image Manipulation 库调整服务器端大小的示例

```
$config['image_library'] = 'gd2';
$config['source_image'] = $_FILES['image']['tmp_name'];
$config['new_image'] = $target_path
$config['maintain_ratio'] = TRUE;
$config['width']    = 250;
$config['height']   = 400;

$this->load->library('image_lib', $config); 

if (!$this->image_lib->resize()) {
    echo $this->image_lib->display_errors();
} 
```

[有关调整大小库的](http://codeigniter.com/user_guide/libraries/image_lib.html)更多信息

# database - 在数据库中上传图像？

> ID：13154796
> 
> 赞同：0
> 
> 时间：2012-10-31T09:27:56.770
> 
> 标签：database, image, upload

我想制作一个在数据库中添加新闻的脚本，但每个新闻站点都需要一个图像。但我不知道我必须如何处理图像，我是否必须将它们也添加到数据库中，或者他们是另一种方式吗？最好的方法是什么？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:29:07.613

You should store path to the image and use it in code that actually loads the file by the path, specified in the DB.

Also: [http://www.kirupa.com/forum/showthread.php?323567-How-to-save-image-in-folder-and-path-to-database](http://www.kirupa.com/forum/showthread.php?323567-How-to-save-image-in-folder-and-path-to-database) - look over here. It is the second link in google, by the way.. you better started by looking this up over there.

[Storing Images in DB - Yea or Nay?](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay) - searching stack... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:30:19.220

There're 2 ways 1- Store Image in Database. 2- Store Image's file path in Database

# magento - 如何在所有页面中显示类别？

> ID：13154801
> 
> 赞同：1
> 
> 时间：2012-10-31T09:28:13.230
> 
> 标签：magento

我是 Magento 初学者

在我的索引页面中添加类别

我还有其他 2 页

我希望我的所有 3 个页面都显示索引页面中的类别，并且类别也显示在同一侧

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:12:50.347

根据我的理解，我以这个解决方案结束在路径中写入这部分：magento_folder/app/design/frontend/mytheme(your_package_folder)/neo(your_theme_folder)/layout/local.xml
如果找不到，请创建它。

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">
<default>
  <block type="core/text_list" name="top.menu" as="topMenu" translate="label">
                    <label>Navigation Bar</label>
                    <block type="page/html_topmenu" name="catalog.topnav" template="page/html/topmenu.phtml"/>
                </block>
</default>
</layout> 
```

希望这可以帮到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:01:38.743

Guyz Atlast 我解决了这个问题

```
<?php $_helper = Mage::helper('catalog/category') ?>
<?php $_categories = $_helper->getStoreCategories() ?> 
```

我将其添加到`left.phtml`并解决问题

谢谢你的帮助

# javascript - 扩展 jQuery，包括另一个对象中的 jQuery 构造函数

> ID：13154803
> 
> 赞同：0
> 
> 时间：2012-10-31T09:28:16.000
> 
> 标签：javascript, jquery, oop, jquery-plugins, sinemacula

## 解释

首先，我可能混淆了 jQuery`constructor`和`init`函数，如果是这样，请忽略我下面的术语。

我有一个名为 的对象`SineMacula`，目前它只是充当方法库的命名空间。

但是，我将要为对象编写一些方法`SineMacula`，我想将其用作 jQuery 扩展。

这里出现了复杂性，而不是使用 jQuery 别名`$`，我想使用该`SineMacula`对象来运行 jQuery 构造。如此有效地，我的代码将如下所示：

```
SineMacula('#test').dropdown(); 
```

代替：

```
$('#test').dropdown(); 
```

**但是，**如果不是因为我的下一点，我认为这不会太难：

**我不想给整个 jQuery 起别名，我只是想让 jQuery 构造函数在我调用时运行`SineMacula('something')`，然后将任何方法应用于`SineMacula('something')`**

## 我的问题

问这个问题的最好方法是通过说明。以下可能吗？

```
SineMacula('#test').someFunction(function(){
    // Do something here
    // The jQuery object must be passed in so that
    // $(this) refers to SineMacula('#test')
}); 
```

但是，我不想**这样**做（完全别名 jQuery）：

```
SineMacula('#test').animate(); // A regular jQuery function 
```

我知道这可能是不可能的，但觉得值得一问:-)

## 更新 1

为了清楚起见，这是我目前用于该`SineMacula`对象的一些代码：

```
/**
 * Sine Macula Javascript  API
 * The Sine Macula API contains all base functions for use throughout
 * all websites
 * @name class.sinemacula.js
 * @author Ben Carey
 * @version 1.0
 * @date 25/10/2012
 * @copyright (c) 2012 Sine Macula MMVIII Limited (sinemacula.co.uk)
 */

function SineMacula(){

    // Only proceed if jQuery has been loaded
    if(typeof jQuery=='undefined'){
        // jQuery has not been loaded
        console.log('jQuery has not been loaded');
    }else{

        /**
         * Sine Macula Load
         * Load the Sine Macula Libraries and Plugins
         * into the current document
         *
         * The options:
         * - package: the package of libraries to load
         * - packageURL: a remote source to load the package details from
         * - libraries: any additional libraries to load
         *
         * @param object options The options for the Sine Macula load
         */
        this.load = function(options){
            // Load Sine Macula Libraries here
        }
    }
};

/**
 * Overlay
 * Place an overlay on the page
 *
 * The options:
 * - wrapper: the wrapper to prepend to
 * - fade: indicate whether or not to fade the overlay
 * - fadeSpeed: the fade speed for the overlay fade
 * - opacity: the opacity to apply to the overlay
 * - color: the color to apply to the overlay
 * - callback: the callback to be called once the function has completed
 *
 * @param boolean showHide A boolean to indicate whether to show/hide the overlay
 * @param object options The options for the overlay
 */
SineMacula.prototype.overlay = function (showHide,options){
    // Process the overlay here
};

// All libraries are extended onto the SineMacula object 
```

该`SineMacula`对象在每个页面的顶部启动，如下所示：

```
<script src="//libraries.example.net/jsapi" language="javascript" type="text/javascript"></script>
<script language="javascript" type="text/javascript">

    var sm = new SineMacula();
    sm.load();

</script> 
```

* * *

## 更新 2 - 忽略以上

是的，我发现很难解释我想要实现的目标。下面我会尽我所能分步完成，忽略上面的内容。

**第1步**

我有一个名为 的类`SineMacula`，它包含许多可以做各种事情的方法。把它想象成一个像 jQuery 一样的库。

这是这样定义的：

```
function SineMacula(){

    // Only proceed if jQuery has been loaded
    if(typeof jQuery=='undefined'){
        // jQuery has not been loaded
        console.log('jQuery has not been loaded');
    }else{
        this.load = function(options){
            // Load Sine Macula Libraries here
        }
    }
}; 
```

**第2步**

该类`SineMacula`在每个页面的顶部使用以下代码启动：

```
<script src="//libraries.example.net/jsapi" language="javascript" type="text/javascript"></script>
<script language="javascript" type="text/javascript">

    var sm = new SineMacula();

</script> 
```

**第 3 步**

然后，该对象通过调用例如加载该`SineMacula`对象所需的任何库和扩展。这会将任何扩展动态加载到网页中。`SineMacula``sm.load({package:'all'})`

**第4步**

扩展定义如下：

```
SineMacula.prototype.doSomething = function(){
    // Do something here
} 
```

**第 5 步 - 这是事情变得更复杂的地方**

到目前为止，该`SineMacula`对象一直充当诸如`doSomething()`etc之类的方法的命名空间。

我现在想定义的方法不仅仅是作为一个函数。

在我本来可以调用的地方`SineMacula.doSomething()`，我现在希望**能够**调用`SineMacula('#test').doSomething()`where与 jQuery 中`SineMacula('#test')`的行为相同`$('#test')`。

所以我可以像这样访问我的功能：

```
SineMacula.doSomething('maybe parameters here');
SineMacula('selector').doSomethingElse('maybe parameters here'); 
```

与您可以调用的方式相同：

```
$.ajax('parameters');
$('selector').animate('parameters'); 
```

因此**，如果**将参数传递给`SineMacula`对象，则使用 jQuery*选择器*函数对其进行处理，并作为主题传递给被调用的方法。

例如：

```
// Call doSomethingElse on the #test element
SineMacula('#test').doSomethingElse();

// Within the doSomethingElse function $(this) relates to $('#test') 
```

**总结...**

`SineMacula('selector')`就像提供了`$('selector')`一样`'selector'`，这被传递给子方法。但`SineMacula`不是 jQuery 的扩展。我不想`SineMacula`成为一个别名`$`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:33:50.087

如果我理解这个问题并且您是否可以更改`SineMacula`构造函数

```
function SineMacula(){
     // add following 3 lines
     if(arguments.length>0) {
        return jQuery.call(null,arguments);
     }
    // Only proceed if jQuery has been loaded
    if(typeof jQuery=='undefined'){
        // jQuery has not been loaded
        console.log('jQuery has not been loaded');
    }else{

        this.load = function(options){
            // Load Sine Macula Libraries here
            console.log("ok load");
        }
    }
}; 
```

# objective-c - How do apple's objects show properties in their description, and can I do the same?

> ID：13154804
> 
> 赞同：3
> 
> 时间：2012-10-31T09:28:16.953
> 
> 标签：objective-c

I have an object with two properties - `type` and `name` - which I want to show in its `description`. The out-of-the-box description looks like this:

```
<SGBMessage: 0x7663bb0> 
```

If I override `description`, like so:

```
return [NSString stringWithFormat:@"<%@: %x type:%@ name%@>", 
           [self class], (int)self, self.type, self.name]; 
```

Then I can get a nice description like this:

```
<SGBMessage: 0x7663bb0 type:loadScreen name:mainScreen> 
```

So far, so good. But Apple's objects have dynamic descriptions; if I look at a view's description I get this:

```
<UIView: 0x767bcb0; frame = (0 0; 0 0); layer = <CALayer: 0x767bd50>> 
```

But if I set hidden to true, I get this:

```
<UIView: 0x767bcb0; frame = (0 0; 0 0); hidden = YES;
 layer = <CALayer: 0x767bd50>> 
```

Now, I don't believe for a second that they've got a massive set of if statements in the `description` methods of all of their objects; it seems much more likely that there's some method in some category somewhere on NSObject that can be overridden to specify which properties show up in the description. Does anyone know what's really going on, and if so, is it something I can take advantage of?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:29:17.063

我的倾向于遵循这种模式：

```
- (NSString *) description {
    NSMutableDictionary *descriptionDict = [[NSMutableDictionary alloc]init];
    if (account)       [descriptionDict setObject:account       forKey:@"account"];
    if (date)          [descriptionDict setObject:date          forKey:@"date"];
    if (contentString) [descriptionDict setObject:contentString forKey:@"contentString"];
    return [descriptionDict description];
} 
```

您可以使用类似的方法来构建一个`NSMutableArray`，然后遍历数组，将其中的内容添加到字符串中。

对于更复杂的应用程序，如果您有继承自其他类的自定义类，您还可以制作一个单独的方法返回`descriptionDict`，然后在子类中调用`NSMutableDictionary *descriptionDict = [super descriptionDict]`并继续向其添加/删除元素。

> **注意：**我在每一行都使用`if`语句的原因是，如果一个对象恰好是`nil`，则会引发异常。当您尝试使用`po`您的对象时，这将导致“没有可用的客观 c 描述”打印出来。

但是要回答您的问题，没有秘密方法可以使某些属性出现在描述中。您只需要自己构建一个字符串，无论您决定采用何种合适的方式。

# sql - 给定输出所需的查询

> ID：13154807
> 
> 赞同：-4
> 
> 时间：2012-10-31T09:28:26.567
> 
> 标签：sql, oracle

假设我有以下格式的数据

```
FIELD1   F2       F3 
LIN0_TMP    A0  1
LIN0_TMP    B0  2
LIN0_TMP    C0  3
LIN_TMP     A   1
LIN_TMP     B   2
LIN_TMP     C   3
LIN_TMP     D   4
LIN2_TMP    A2  1
LIN2_TMP    B2  2
LIN2_TMP    C2  3
LIN2_TMP    D2  4 
```

我想使用 oracle sql 查询以以下格式输出。

```
FIELD1   F2       F3   FLOW
    LIN0_TMP    A0  1 FLOW1
    LIN0_TMP    B0  2 FLOW1
    LIN0_TMP    C0  3 FLOW1
    LIN_TMP     A   1 FLOW2
    LIN_TMP     B   2 FLOW2
    LIN_TMP     C   3 FLOW2
    LIN_TMP     D   4 FLOW2
    LIN2_TMP    A2  1 FLOW3 
    LIN2_TMP    B2  2 FLOW3
    LIN2_TMP    C2  3 FLOW3
    LIN2_TMP    D2  4 FLOW3 
```

对于每个 LIN_TMP 值，field1 的记录数不是固定的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:01:33.987

此解决方案使用解析和来生成 F3 = 1 次数的运行总和。

```
select field1
      , f2
      , f3
      , 'FLOW'||trim(to_char(rnk))
from 
     (select field1
      , f2
      , f3
      , sum(case when f3 = 1 then 1 else 0 end)
     over (order by field1, f3 range between unbounded preceding and current row) rnk
    from your_table ) 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!4/a39e2/2)。

正如我在评论中提到的，您对 FIELD1 的排序顺序很奇怪，因此您需要为 window 子句提供自己的 ORDER BY 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:04:31.943

这是另一种选择，它从 FIELD1 中找到不同的值，根据不同 FIELD1 值的 ROWNUM 为“流”分配一个数字，然后将所有内容重新连接在一起：

```
SELECT t.FIELD1, t.F2, t.F3, 'FLOW' || FLOW_NUM AS FLOW
  FROM YOUR_TABLE t
  INNER JOIN (SELECT FIELD1, ROWNUM AS FLOW_NUM
                FROM (SELECT DISTINCT FIELD1
                        FROM YOUR_TABLE 
                        ORDER BY FIELD1 DESC)) t2
    ON (t2.FIELD1 = t.FIELD1)
  ORDER BY FLOW, F2, F3 
```

根据需要进行调整。

分享和享受。

# asp.net - MVC JQuery Dialog submit more than 1 time

> ID：13154814
> 
> 赞同：0
> 
> 时间：2012-10-31T09:28:52.910
> 
> 标签：asp.net, asp.net-mvc, jquery-ui, jquery-ui-dialog

I am using JQuery's UI dialog to open a form. My attempt is to submit and close the dialog. I am having trouble.

The parent window opens the dialog (which contains a partial view) from click and form is submitted, for the first time, data is saved in DB. But if I click to open the dialog again and submit, there are 2 data rows saved in DB with the same value.

My code is below:

```
$('#newFileDialog').dialog('destroy');$('#newFileDialog').remove(); 
```

Is there something wrong with this code?

Your help is appreciated.

**UPDATE:**

Partial view:

```
@using(Html.BeginForm("New", "File", new {}, FormMethod.Post, new { Id = "newFileForm" }  ))
{    
   @Html.ValidationSummary()    
   @Html.RenderHTML(
        new TabContainerViewModel(
                new TabViewModel { Name = "File", ViewName = "Common", Model = Model, Visible = true},
                new TabViewModel { Name = "Permission", ViewName = string.Empty, Visible = true}
            ) { Id = "createFileTabs", Visible = true })    
   @Html.SubmitButton("Send")
}
@{ Html.JQueryAjaxForm("newFileForm", "containerComponentContent", string.Empty, "$('#newFileDialog').dialog('destroy');$('#newFileDialog').remove();showMessagebox('New File added');"); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:48:32.090

`$form.reset()`关闭模式后，您必须在再次使用之前重置表单（即）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:48:58.387

我找到了解决方案。原因是因为现场活动。所以，提交后，我调用 die 事件，如下：

`$('#form').die('click')`

它有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:44:39.933

请提供您的部分视图代码。

我认为您的表单提交了 2 次。使用 firebug 检查您生成的请求。

# java - How To Define a JPA Repository Query with a Join

> ID：13154818
> 
> 赞同：56
> 
> 时间：2012-10-31T09:29:03.217
> 
> 标签：java, jpa, orm, repository, jpql

I would like to make a Join query using Jpa repository with annotation @Query.

I have two tables:

```
 table user 
 with iduser,user_name 
```

and:

```
 table area 
 with idarea, area_name and iduser 
```

The native query is:

```
 SELECT
 u.user_name 
 FROM
  user as u 
  INNER JOIN area as a ON a.iduser = u.iduser
  WHERE
  a.idarea = 4 
```

Now I have a Table Hibernate entity User and Area

So I tried with UserRespository

```
@Query(SELECT  u.userName FROM  User u 
  INNER JOIN Area a ON a.idUser = u.idUser
  WHERE
  a.idArea = :idArea)
List<User> findByIdarea(@Param("idArea") Long idArea); 
```

The Log says:

> unexpected token:

Any Idea, please?

My table Entity

```
#User Table
@Entity
@Table(name="user")
public class User implements Serializable {

    private static final long serialVersionUID = 1L;

    private Long idUser;
    private String userName;

    @Id @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="iduser")
    public Long getIdUser() {
        return idUser;
    }

    public void setIdUser(Long idUser) {
        this.idUser = idUser;
    }

    @Column(name="user_name")
    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }
}

#AREA table

@Entity
@Table(name="area")
public class Area  implements Serializable {

    private static final long serialVersionUID = 1L;

    private Long idArea;
    private String areaName;
    private Long idUser;

    @Id @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="idarea")
    public Long getIdArea() {
        return idArea;
    }

    public void setIdArea(Long idArea) {
        this.idArea = idArea;
    }

    @Column(name="area_name")
    public String getAreaName() {
        return areaName;
    }

    public void setAreaName(String areaName) {
        this.areaName = areaName;
    }

    @Column(name="iduser")
    public Long getIdUser() {
        return idUser;
    }

    public void setIdUser(Long idUser) {
        this.idUser = idUser;
    }       
} 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-31T09:40:15.287

您遇到此问题有两个原因。

*   JPQL 查询无效。
*   您尚未在实体之间创建基础 JPQL 查询可以利用的关联。

在 JPQL 中执行连接时，您必须确保尝试连接的实体之间存在基础关联。在您的示例中，您缺少 User 和 Area 实体之间的关联。为了创建这种关联，我们必须在 User 类中添加一个 Area 字段并建立适当的 JPA 映射。我在下面附上了用户的来源。（请注意，我将映射移至字段）

**用户.java**

```
@Entity
@Table(name="user")
public class User {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="iduser")
    private Long idUser;

    @Column(name="user_name")
    private String userName;

    @OneToOne()
    @JoinColumn(name="idarea")
    private Area area;

    public Long getIdUser() {
        return idUser;
    }

    public void setIdUser(Long idUser) {
        this.idUser = idUser;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public Area getArea() {
        return area;
    }

    public void setArea(Area area) {
        this.area = area;
    }
} 
```

一旦建立了这种关系，您就可以在 @Query 声明中引用区域对象。@Query 注释中指定的查询必须遵循正确的语法，这意味着您应该省略 on 子句。请参阅以下内容：

```
@Query("select u.userName from User u inner join u.area ar where ar.idArea = :idArea") 
```

在查看您的问题时，我还使 User 和 Area 实体之间的关系是双向的。这里是Area实体建立双向关系的来源。

**区域.java**

```
@Entity
@Table(name = "area")
public class Area {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="idarea")
    private Long idArea;

    @Column(name="area_name")
    private String areaName;

    @OneToOne(fetch=FetchType.LAZY, mappedBy="area")
    private User user;

    public Long getIdArea() {
        return idArea;
    }

    public void setIdArea(Long idArea) {
        this.idArea = idArea;
    }

    public String getAreaName() {
        return areaName;
    }

    public void setAreaName(String areaName) {
        this.areaName = areaName;
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }
} 
```

# c# - Need to parse string to DateTime

> ID：13154827
> 
> 赞同：1
> 
> 时间：2012-10-31T09:29:31.000
> 
> 标签：c#

> **Possible Duplicate:**
> [ParseExact a string to DateTime fails](https://stackoverflow.com/questions/13428149/parseexact-a-string-to-datetime-fails)

I need to parse

> Oct 19 13:55

into a `DateTime` object.
Which culture would work for it ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:32:05.807

您可以使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)。

由于您的原始字符串没有`year`信息，因此它将考虑 DateTime 对象的当前年份。

```
string temp = "Oct 19 13:55";
DateTime dt = DateTime.ParseExact(temp, "MMM dd HH:mm", CultureInfo.InvariantCulture); 
```

在`dt`你会得到：

> dt = {19/10/2012 下午 1:55:00}

编辑：由于原始数据不包含具有单个数字日期和小时的日期，因此可以尝试以下格式的日期，例如：

```
Nov 8 1:44

DateTime dt = DateTime.ParseExact(temp, "MMM d H:mm", CultureInfo.InvariantCulture); 
```

*（这两种格式都适用）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:33:12.853

```
DateTime dt = new DateTime();
string str="Oct 19  13:55";
CultureInfo culture = CultureInfo.CreateSpecificCulture("en-US");
bool ok = DateTime.TryParseExact((str == null ? "" : str.ToString().Trim()), "MMM dd  HH:mm", culture, DateTimeStyles.None, out dt);
console.write(dt); 
```

# android - Sprite movement speed is not constant in all device - Andengine

> ID：13154829
> 
> 赞同：3
> 
> 时间：2012-10-31T09:29:34.097
> 
> 标签：android, andengine

I'm creating an android game and using AndEngine. Background Sprite movement speed is not same in different devices,its varying. I'm using the below code to move bgSprite. How to maintain constant speed of the game for different devices.?

```
 bgSprite1.setPosition(bgSprite1.getX() - 10, bgSprite1.getY()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:46:41.240

创建一个扩展 Sprite 的类，例如我为我做了这个（应该是一个 var，我用来知道何时销毁 sprite（在这种情况下，当它离开屏幕时））：

```
public class BackgroundMovingLine extends Sprite {

public boolean shouldDie;
private int speed;

BackgroundMovingLine(final int pX,final int pY, final ITextureRegion pTextureRegion, final VertexBufferObjectManager pVertexBufferObjectManager)
{
    super(pX,pY,pTextureRegion,pVertexBufferObjectManager);
    shouldDie=false;

    speed=(new Random()).nextInt(150)+250;
}
@Override
protected void onManagedUpdate(final float pSecondsElapsed) { 

    float h=this.getY();

    h=(h+(speed*pSecondsElapsed));

    if(h>800)
    {
        shouldDie=true;
    }

    this.setY(h);

}
} 
```

速度它是移动精灵的速度。我是随机的，但你可以将它设置为你想要的。

# c# - Windows 8 应用程序 - EntranceThemeTransition 使用 C#？

> ID：13154833
> 
> 赞同：1
> 
> 时间：2012-10-31T09:29:39.547
> 
> 标签：c#, xaml, windows-8

在[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.media.animation.entrancethemetransition.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.media.animation.entrancethemetransition.aspx) 我终于学会了如何使用XAML 中我的 StackPanel 代码中的这些代码行

```
 <StackPanel.Transitions>
          <TransitionCollection>
              <EntranceThemeTransition/>
          </TransitionCollection>
      </StackPanel.Transitions> 
```

它有效，但我们可以在 C# 代码中做到这一点吗？我想在单击按钮时启用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:33:48.660

你可以这样做

```
myStackPanel.ChildrenTransitions = new 
             TransitionCollection {new EntranceThemeTransition()}; 
```

# c# - One application pool keeps hanging IIS 7

> ID：13154836
> 
> 赞同：0
> 
> 时间：2012-10-31T09:29:49.417
> 
> 标签：c#, sql-server-2008, iis, iis-7, iis-7.5

For some reason my application pool keeps crashing once in a couple of days. The biggest problem is that there are no logs about errors or warnings in my administrative events about this pool. (there are several warnings in other pools, but it is only this pool that keeps crashing). Changes I make can only be tested if they worked if I wait a couple of days.

I tried to bring my code back to the stage where the problems did not occur, but this does not seem to help.

Most crashes happen when the site is not very busy, although not that inactive that IIS shuts it down for inactivity.

Windows server 2008 R2 (SP 1), IIS Build 7.5.76, Umbraco, Sql server 2008

IIS logs: only showing some recycling of the pool (once every 3 hours) Rapid fail detection: disabled

Where should I start with solving this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:35:29.487

WER (Windows Error Reporting) should have made crash dumps for you unless disabled. The default location for the crash reports is c:\ProgramData\Microsoft\Windows\WER\ReportQueue\ , but as far as I can remember, the Windows event log entry for the crash contains the full path for the dump file (Application event log). Pop it into your VS and check what went wrong.

You can also try installing DebugDiag, but personally I highly do NOT recommend it on a production server as it screws up the WER configuration for its own purposes in an unreversible way affecting other applications too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:34:42.133

标准方法是开始制作跟踪日志文件。在应用程序的每个关键点写入详细的日志消息 - 请求开始时、请求结束时、中间某处、执行 DB 操作时等。日志文件在一天结束时可能会占用千兆字节，但您可以暂时负担得起。然后，当它再次崩溃时，检查日志文件以查看它在崩溃之前所做的最后一件事是什么。如果没有足够的详细信息，请添加更多日志记录并重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:39:48.237

我首先在不同的应用程序池上运行风险应用程序，以尽量减少影响。
有一个 iss 属性可以在 x 分钟内发生 5 个错误后阻止应用程序池重新启动。
您可以尝试增加此设置，它应该让您了解这种情况发生的频率以及一旦出错是否会出错。
如果它是 wcf 服务，您可以启用跟踪日志（记录很多，甚至可能是您的错误）。

至于要看的地方，我建议检查堆栈溢出和多线程代码。
这两种情况都可能导致事件日志不包含任何信息的情况。

# c++ - C++ sort array by private variable

> ID：13154838
> 
> 赞同：0
> 
> 时间：2012-10-31T09:30:04.760
> 
> 标签：c++

I have this class

```
Class VehicleTwoD
{
private:
doubleArea;
} 
```

so I want to sort by doubleArea;

at my main.cpp

I got

```
int main()
{
VehicleTwoD *vehicletwod[100];
sort(vehicletwod[0], vehicletwod[vehicleCounter]);

for (int i=0;i<vehicleCounter;vehicleCounter++)
    {
cout << "Vehicle " << i << end;
cout << vehicletwod[i]->toDisplay() << endl;
    }
}

Below is my operator overload at Vehicle.h

bool VehicleTwoD::operator<(const VehicleTwoD& rhs) const
{
return area > rhs.area;
} 
```

When I try run the program, I get error on runtime - Segmentation core dump fault.

Assuming my Vehicle Counter is not wrong and my Vehicletwod got at least 2 object when I try run toDisplay, whats actually went wrong..

**Update:**

I just did this thanks to the valuable feedback I receive from the experts here.

at main.cpp

```
int main()
{
VehicleTwoD *vehicletwod[100];

for(int i=0;i<100;i++)
{
vehicletwod[i] = new VehicleTWoD();
}

//some computation then I go to sort..

sort(&vehicletwod[0],&vehicletwod[vehicleCounter]);

for(int i=0;i<vehicleCounter;i++)
{
cout << vehicletwod->toDisplay() << endl;
}

} 
```

The output remain the same, nothing sorted.. I not sure why..

this is the boolean operator I did at the VehicleTwoD.h

VehicleTwoD.h

```
public:
bool operator<(const VehicleTwoD&) const; 
```

VehicleTwoD.cpp

```
bool VehicleTwoD::operator<(const VehicleTwoD& rhs) const
{
return area > rhs.area;
} 
```

Nothing is sorted.. I would hope at least it sort in either descending or ascending..

I was wonder if theres a way I can allocate my VehicleTwoD array into a vector call sortVector, because after sort in ascending, I wanna sort in descending also.

so a reverse function in vector will be good to solve it.

**Any suggestion ? Thanks all the helpful and kind experts here!!**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:32:19.067

```
VehicleTwoD *vehicletwod[100]; 
```

这只会创建一个指向无效内存位置的引用数组。

您需要一个循环或其他方式来分配 100 个有效引用。例子：

```
for(int i=0;i < 100;i++)
{
  vehicletwod[i] = new VehicleTwoD() ;
} 
```

你必须记住释放那些记忆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:01:57.267

添加到其他人所说的这里是一个可编译的示例（为反向排序更新/为静态类比较功能更新）：

您可能需要考虑明确排序方向，而不是重载 < 运算符，例如通过指定静态比较器，如下所示。我更喜欢这个选项，因为它允许您记录您的意图。

在 Vehicle.h 中：

```
#include <random>
class VehicleTwoD
{

    private:
        double area;
    public:
        VehicleTwoD() 
        {
            area = ((double)rand()/(double)RAND_MAX);
        }

        double toDisplay()
        {
            return area;
        }

        bool VehicleTwoD::operator<(const VehicleTwoD& rhs) const
        {
            return area > rhs.area;
        }
        static bool VehicleTwoD::greater(const VehicleTwoD &lhs, const VehicleTwoD &rhs) 
        {
            return lhs.area > rhs.area;
        }

        static bool VehicleTwoD::lesser(const VehicleTwoD &lhs, const VehicleTwoD &rhs) 
        {
            return lhs.area < rhs.area;
        }

}; 
```

在 main.cpp 中：

```
#include "Vehicle.h"    
#include <vector>
#include <time.h>
#include <algorithm>
#include <iostream>

int main()
{

    srand((unsigned)time(NULL));
    std::vector<VehicleTwoD> vehicles(100);
    std::vector<VehicleTwoD>::iterator it;

    sort(vehicles.begin(), vehicles.end());
    for(it = vehicles.begin();  it != vehicles.end(); it++)
    {
        std::cout << "Vehicle area -> " << it->toDisplay() << std::endl;
    }
    std::cout << "Press any key..." << std::endl;
    std::cin.get();

    // reverse sort - note that rbegin() rend() may be second-class citizens
    // depending on your compiler's implementation and that their use may therefore
    // be limited
    sort(vehicles.rbegin(), vehicles.rend());
    for(it = vehicles.begin();  it != vehicles.end(); it++)
    {
        std::cout << "Vehicle area -> " << it->toDisplay() << std::endl;
    }
    std::cout << "Press any key..." << std::endl;
    std::cin.get();

    // or (document your intention)
    sort(vehicles.begin(), vehicles.end(), VehicleTwoD::greater);
    for(it = vehicles.begin();  it != vehicles.end(); it++)
    {
        std::cout << "Vehicle area -> " << it->toDisplay() << std::endl;
    }
    std::cout << "Press any key..." << std::endl;
    std::cin.get();

    sort(vehicles.begin(), vehicles.end(), VehicleTwoD::lesser);
    for(it = vehicles.begin();  it != vehicles.end(); it++)
    {
        std::cout << "Vehicle area -> " << it->toDisplay() << std::endl;
    }
    std::cout << "Press any key..." << std::endl;
    vehicles.clear();
    std::cin.get();
    return 0;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T09:33:10.263

好吧，`vehicletwod[i]->toDisplay()`是 UB 因为`vehicletwod[i]`（无论`i`是什么）从未初始化。

`VehicleTwoD *vehicletwod[100];`**只需创建一个包含 100 个悬空指针**的数组。

我建议你改用 a `std::vector<std::unique_ptr<VehicleTwoD>>`（因为它看起来你的类是多态的并且你想要多态行为）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T09:34:05.230

您的程序中有很多错误。

```
VehicleTwoD *vehicletwod[100]; 
```

**创建一个包含 100 个未初始化指针**的数组`VehicleTwoD`

```
sort(vehicletwod[0], vehicletwod[vehicleCounter]); 
```

对由两个指针定义的范围进行排序，`vehicletwod[0]`并且`vehicletwod[vehicleCounter]`. 由于数组没有初始化，这些指针是垃圾，所以排序会破坏内存。

您可能需要以下内容

```
std::vector<VehicleTwoD> vehicletwod; // vector of instances
// initialize the vector
// ...
sort(vehicletwod.begin(), vehicletwod.end()); 
```

# javascript - Knockout js分解值的总和

> ID：13154847
> 
> 赞同：1
> 
> 时间：2012-10-31T09:30:29.600
> 
> 标签：javascript, knockout.js

我正在尝试使用淘汰赛 js 来考虑最优雅的方法。

假设我需要总结 3 个值，但结果总和也可以编辑......你会如何使用淘汰赛 js 做到这一点？

我正在考虑设置在用户编辑总和值时停用构成总和的值并在总和字段为空白时重新激活它们。

请参阅此 jsfiddle 作为起点：http: [//jsfiddle.net/faHHB/](http://jsfiddle.net/faHHB/)

[敲除文档](http://knockoutjs.com/documentation/computedObservables.html)中有一个类似的使用计算的 observable 分解字符串的示例：

```
function MyViewModel() {
    this.firstName = ko.observable('Planet');
    this.lastName = ko.observable('Earth');

    this.fullName = ko.computed({
        read: function () {
            return this.firstName() + " " + this.lastName();
        },
        write: function (value) {
            var lastSpacePos = value.lastIndexOf(" ");
            if (lastSpacePos > 0) { // Ignore values with no space character
                this.firstName(value.substring(0, lastSpacePos)); // Update "firstName"
                this.lastName(value.substring(lastSpacePos + 1)); // Update "lastName"
            }
        },
        owner: this
    });
}

ko.applyBindings(new MyViewModel()); 
```

**编辑** 为了更清楚起见，我不确定如何最好地表示这种情况：

想象一下，这 3 个字段代表您的房屋价值、汽车价值、退休储蓄价值，总和代表您资产的总价值。

所有字段都应该是可编辑的，如果用户输入 3 个值，则应该计算总值。总值也可以直接编辑（如果用户有其他未列出的储蓄）。我不确定代表这一点的最佳方式......

当用户编辑总数时，我能想到的选项是：

1.  将总数除以 3 并填充其他值
2.  将输入值置灰，只允许用户在总值为空时再次更改。
3.  有一个标记为计算的复选框，它在勾选时对值求和，并在未勾选时让用户进行编辑。

我试图询问表示这种情况的最佳方法是什么，以及如何使用淘汰赛来实现它。如果我不清楚，请道歉。

我现在已经选择了方法 3：jsfiddle.net/faHHB/10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:41:23.793

您应该使用读/写计算，但最重要的是定义如何解析总和的规则。例如，当 sum 更改时，您只能更新 val1：

```
var ViewModel = function() {
    var self = this;
    self.val1 = ko.observable(30);
    self.val2 = ko.observable(20);
    self.val3 = ko.observable(10);

    self.sum = ko.computed({
        read: function() {
            return parseInt(self.val1()) + parseInt(self.val2()) + parseInt(self.val3());
        },
        write: function(value) {
            self.val1(parseInt(value) - parseInt(self.val2()) - parseInt(self.val3()));
        }
    });
}; 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/faHHB/1/](http://jsfiddle.net/vyshniakov/faHHB/1/)

当用户更改总和时，您希望实现什么行为？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:43:40.093

您可能想要一个视图模型：-

将总和作为单独的 observable 保存

有一个标志来确定是否应该自动计算总和

当标志为真时计算editedTotal的值，否则只返回当前值。

```
var testVm = function() {
  var self = this;
  self.items = ko.observableArray();
  self.editedTotal = ko.observable(null);
  self.autoCalculate = ko.observable(true);
  self.calculatedTotal = ko.computed(function() {
     if ( self.autoCalculate() ){
         // Perform sum if still calculating
         var total = 0;

         for ( var i = 0; i < self.items().length ) {
           total += self.items()[i].Amount();  
         }

         self.editedTotal(total);
     }

     return self.editedTotal();
  });  
} 
```

When you detect a direct edit on `self.editedTotal`, set `self.autoCalculate` to false. At that point, your VM will not attempt to recalculate, and will just return the tracked value.

# c#-4.0 - DataGrid.Columns.Count 始终为 0

> ID：13154853
> 
> 赞同：2
> 
> 时间：2012-10-31T09:30:46.150
> 
> 标签：c#-4.0, wpfdatagrid

我有一个 DataGrid，其中数据来自 DataSet 并且 DataGrid 已设置

```
 AutoGenerateColumns="true" 
```

现在我想通过 DataGrid.Columns.Insert(6, Column); 的代码在索引 6 处添加一列

问题是 DataGrid 似乎没有列。我得到了索引应该在范围内的错误。

当我试图计算它显示的列时，它总是显示 0。但我看到了所有数据。

是否有技巧或为什么列数等于 0。

这是一些代码：
XAML 数据网格：

```
<DataGrid AutoGenerateColumns="True"   AutoGeneratingColumn="DataGrid_AutoGeneratingColumnHandler" HorizontalAlignment="Stretch" Name="dgJournal" VerticalAlignment="Stretch" UseLayoutRounding="True" Margin="8,65,8,30" HorizontalGridLinesBrush="Blue" RowHeaderWidth="25" VerticalGridLinesBrush="Blue" MouseDoubleClick="DataGrid_CellDoubleClick" DataGridCell.Selected="DataGrid_GotFocus" /> 
```

将添加的列：

```
private DataGridTemplateColumn CreateCheckBoxColumn()
    {
        MdlSettings modSett = new MdlSettings();
        DataGridTemplateColumn tempCol = new DataGridTemplateColumn();
        tempCol.Header = "S";

        FrameworkElementFactory factory = new FrameworkElementFactory(typeof(CheckBox),"ownselect");

        DataTemplate voidTemplate = new DataTemplate();
        voidTemplate.VisualTree = factory;
        tempCol.CellTemplate = voidTemplate;
        Style chkBoxStyle = new Style();
        chkBoxStyle.Setters.Add(new EventSetter(CheckBox.CheckedEvent, new RoutedEventHandler(this.check_CheckBox)));
        chkBoxStyle.Setters.Add(new EventSetter(CheckBox.UncheckedEvent, new RoutedEventHandler(this.check_CheckBox)));
        chkBoxStyle.Setters.Add(new Setter(CheckBox.IsCheckedProperty, true));
        chkBoxStyle.Setters.Add(new Setter(CheckBox.IsThreeStateProperty, false));
        tempCol.CellStyle = chkBoxStyle;

        return tempCol;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-27T22:08:27.883

您可以在加载数据网格后计算列数，因此您只需添加

```
myDataGrid.Loaded+=(s,o)=>
{
   MessageBox.Show(myDataGrid.Columns.Count.ToString());
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:33:24.803

列在绑定后进入网格视图，您将在此之前添加。您最好在数据表中添加该列并将其与 gridview 绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:48:29.187

尝试这个 ：

```
 dataGridView1.DataSource = YourDataset;
        dataGridView1.DataMember = "The name of the table inside your dataset"; 
```

然后尝试其余的。它应该工作...

# javascript - 如何将纯黑白图像转换为多边形集合？

> ID：13154857
> 
> 赞同：4
> 
> 时间：2012-10-31T09:31:13.637
> 
> 标签：javascript, image, image-processing

我有一堆纯黑白图像，上面有各种文字和形状。我的目标是将每个图像转换为围绕黑色区域的一组多边形（定义为一组顶点）（就像魔术棒工具可以在照片编辑软件中选择区域一样）。

我更喜欢在 JavaScript 中实现它，但我最感兴趣的是从概念上如何去做。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:40:16.243

魔术棒在简单位图编辑器中的工作方式是：

令颜色 C 为所选原始点的颜色。让最后一个颜色 LC 是任何颜色。

1.  获取选定点 (x,y)
2.  如果 (x,y) = C 的颜色和未访问的像素
    1.  将坐标存储在数组中
    2.  重复算法 (x+1,y), (x-1,y), (x,y+1), (x,y-1)
3.  将像素存储在访问像素数组中
4.  如果 (x,y) 的颜色 != LC
    1.  将像素标记为数组中的边框像素
    2.  设置 LC = (x,y) 的颜色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:26:55.203

当只需要扫描周边时，可以产生“右手在墙上”算法。

第一步：沿着图像向右遍历，找到第一个相反颜色的像素。
步骤 2：按顺时针顺序搜索当前像素的所有相邻像素。
第 3 步：移动到第一个可用像素。存储像素索引
步骤4：重复步骤2-3，直到当前像素是步骤​​1中的起始像素

第 5 步：从存储的像素中检测模式，例如
运行 LLLLLLLLLL、[左] 上、右或下，

形式的模式

```
RRRRRRR U RRRRRRR U RRRRRRRR U RRRRRRR U ...
<-N--->   <--N-->   <--N+1->   <--N--> 
```

可以用一条线来建模，尽管用“inverse bresenham”来检测一条线段的最佳起点和终点并不容易。

无论如何都可以使用蛮力方法从当前像素到 N 个先前像素绘制一条线，并测试 bresenhams 算法是否产生完全相同的像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:26:23.237

首先，让我解释一下什么是“边缘”。

边缘是两个连续像素之间的虚拟线。

```
+---+---+
| A | B |  // The middle line is the edge between pixel A and pixel B
+---+---+ 
```

边有起点和终点，因此向上、向下、“向左”或“向右”。

为了处理跨越图像边界的多边形，我们将在图像周围添加一个 1 像素的白色边框。

这是算法：

```
For each row of our image {  
  For each pixel of the row except the last one {  
    If current pixel is white and next pixel is black {
      Create a new upward edge between the two pixels and add it to
      the global edge list.
    }
    Else if current pixel is black and next pixel is white {
      Create a new downward edge between the two pixels and add it to
      the global edge list.
    }
  }  
}
For each column of our image {  
  For each pixel of the column except the last one {  
    If current pixel is white and next pixel is black {
      Create a new "left going" edge between the two pixels and add it to
      the global edge list.
    }
    Else if current pixel is black and next pixel is white {
      Create a new "right going" edge between the two pixels and add it to
      the global edge list.
    }
  }  
}  

For each edge of the global edge list {
  Find the edge starting from the point where your current edge ends
  (for now on, we gonna call it next_edge).
  Connect the two edges to form a linked list
  (edge->next = next_edge; next_edge->previous = edge;)
}

While there is edges in the global edge list {
  Create a new polygon and add it to the polygon list
  Take the first edge of the list (for now on, we gonna call it first_edge)
  For each edge in the linked list starting at first_edge {
     Remove edge from global edge list
     Add edge to polygon's edge list
  }
} 
```

完成，你有一个多边形列表。

**编辑**

当然，在使用它之前你必须对其进行一些优化，但这真的很容易：具有相同方向的连续边可以替换为单个更长的边。

# ios - ld：找不到框架（自制框架）

> ID：13154860
> 
> 赞同：8
> 
> 时间：2012-10-31T09:31:43.060
> 
> 标签：ios, xcode, frameworks

我正在尝试在 Ipad 上部署一个项目，其中包含一个名为“HelloUnity.framework”的自制框架。

当我尝试部署我的项目时，出现以下错误：

```
ld: framework not found HelloUnity clang: error: linker command failed
with exit code 1 (use -v to see invocation) 
```

更详细 ：

```
Ld /Users/LabInnovation/Library/Developer/Xcode/DerivedData/Unity-iPhone-akzhbmwtkcooizfaebdhmbyuhrbk/Build/Products/test.app/test normal armv7
    cd /Users/LabInnovation/IpadWii/IpadWii
    setenv IPHONEOS_DEPLOYMENT_TARGET 2.2.1
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -L/Users/LabInnovation/Library/Developer/Xcode/DerivedData/Unity-iPhone-akzhbmwtkcooizfaebdhmbyuhrbk/Build/Products -L/Users/LabInnovation/IpadWii/IpadWii -L/Users/LabInnovation/IpadWii/IpadWii/Libraries -F/Users/LabInnovation/Library/Developer/Xcode/DerivedData/Unity-iPhone-akzhbmwtkcooizfaebdhmbyuhrbk/Build/Products -F/Users/LabInnovation/IpadWii/IpadWii/../../Desktop -F/Users/LabInnovation/IpadWii/IpadWii -filelist /Users/LabInnovation/Library/Developer/Xcode/DerivedData/Unity-iPhone-akzhbmwtkcooizfaebdhmbyuhrbk/Build/Intermediates/Unity-iPhone.build/Debug-iphoneos/Unity-iPhone.build/Objects-normal/armv7/test.LinkFileList -dead_strip -all_load -weak_framework CoreMotion -weak-lSystem -fobjc-link-runtime -miphoneos-version-min=2.2.1 -framework Foundation -framework UIKit -framework OpenGLES -framework QuartzCore -framework OpenAL -liconv.2 -liPhone-lib -framework AudioToolbox -framework CFNetwork -framework MediaPlayer -framework CoreLocation -framework SystemConfiguration -weak_framework iAd -framework CoreMedia -framework CoreVideo -framework HelloUnity -weak_framework AVFoundation -framework CoreGraphics -weak_framework CoreMotion -weak_framework GameKit -o /Users/LabInnovation/Library/Developer/Xcode/DerivedData/Unity-iPhone-akzhbmwtkcooizfaebdhmbyuhrbk/Build/Products/test.app/test 
```

而且我不知道为什么，因为我的框架存在并且框架的文件夹不是空的。怎么了？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:23:55.413

由于 iOS 不支持共享库，因此您需要确保您的框架正在编译为静态库。

我不确定这部分，但您可能必须链接静态库而不是框架（即，即使您的框架是静态的，“-framework HelloUnity”也可能不好。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:55:03.080

I am sure that the framework has not been properly constructed. I suspect that VALID_ARCHS has not been removed from the project file when constructing the framework. also do check that build active architectures is set to NO

# java - Android子视图在父活动的onActivityResult中为空

> ID：13154873
> 
> 赞同：0
> 
> 时间：2012-10-31T09:32:33.773
> 
> 标签：java, android, android-intent

在我的 Android 应用程序中有一个视图，“管理播放器”，其中有一个“添加播放器”视图。在“添加播放器”视图中，我正在访问相机，因此我对 onActivityResult 进行了覆盖。当它点击这个时，在“管理玩家”活动中，“添加玩家”视图现在为空。这是代码示例：

```
public class ManagePlayersActivity {

    private AddPlayerView addPlayerView = null;
    private ManagePlayersView view;
    private Context context;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    context = this;

    view = ManagePlayersViewFactory.create(this);
    setContentView(view.asView());

        public void onEvent(ClickEvent event) {
            final Dialog d = new Dialog(context);
            ManagePlayersActivity.this.addPlayerView = AddPlayerViewFactory.create(context);

            ManagePlayersActivity.this.addPlayerView.setButtonPhotoPickerOnClickListener(new EventListener<ClickEvent>() {
                public void onEvent(ClickEvent event) {

                    ManagePlayersActivity.this.addPlayerView.setPlayerPhoto("Setting Photo");

                    PackageManager pm = context.getPackageManager();

                    if (pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {

                        Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                            startActivityForResult(cameraIntent, CAMERA_REQUEST);
                    }                   
                }

            });

            d.show();
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAMERA_REQUEST) {
        if (resultCode == RESULT_OK) {
            ManagePlayersActivity.this.addPlayerView.setPlayerPhoto("Photo set");
        } 
    }
}
} 
```

因此，在这样做之后，onActivity 结果中的 addPlayerView 为空。老实说，我对 Android 和 Java 还很陌生，我是一个没有 MVC 经验的 ac# Web 开发人员，所以这可能是对它的基本工作原理的误解。但是，任何帮助将不胜感激！

谢谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:31:58.187

在事件处理程序上方写下这一行（即在 onEvent() 之外）：

ManagePlayersActivity.this.addPlayerView = AddPlayerViewFactory.create(context);

# java - 导入完整包时如何防止加载不需要的类？使用awt swing时GC必须执行的重要地方有哪些？

> ID：13154879
> 
> 赞同：0
> 
> 时间：2012-10-31T09:32:57.347
> 
> 标签：java, performance, swing, garbage-collection, awt

我正在通过记事本（Windows 7）执行程序导入整个程序包使代码变得简单，但是当我使用详细命令时，程序看起来很重。在编译和运行我的 java 类时，已经加载了很多不需要的代码类文件，java 中是否有任何功能可以防止不需要的类文件加载？

我知道有 IDE，但现在我对记事本感觉很舒服。所以有人建议是否有任何功能可以避免在完全导入包时将不需要的类加载到我编译的程序中？

以及什么时候应该执行GC（特定区域是否添加组件/设置动作事件）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:38:09.833

Java 不是为记事本精心优化的语言。导入语句就是一个很好的例子：如果没有 IDE 来为您管理它们，您将遇到日常的麻烦事。您最终会屈服并承认在记事本中编写 Java**并不舒适**。

回答您的直接问题：

1.  导入语句与类加载无关。它们仅用于解析您在代码中使用的简单类名的完全限定名。类在第一次使用时严格按需初始化，并且类的加载方式是特定于实现的，但通常它也是惰性的。

2.  Java 中的垃圾收集是全自动的，您**永远不**应该自己执行它。实际上，没有这样做的机制：`System.gc`只是对运行时的**提示。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:52:23.307

考虑以下简单的代码片段：

```
public class HelloWorld {

    public static void main(String[] args) {
        List<Object> l = new Vector<Object>();
        System.out.println("Hello World:" + l.size());
    }
} 
```

要使用`List`and `Vector`，您必须

```
import java.util.*; 
```

或者

```
import java.util.List;
import java.util.Vector; 
```

或者，您甚至可以将包名添加到代码中的类名中，而根本不使用任何导入。

在任何一种情况下，输出`java -verbose`都是完全相同的。此外，在这两种情况下，它都列出了为这个简单代码加载的 347 个类。原因是它不仅必须加载`HelloWorld.class`,`java.util.List.class`和`java.util.Vector.class`，还必须加载 Java 运行时所需的任何依赖类以执行您的应用程序（并且，在此示例中，这包括`java.lang.System.class`来自 的几个类`java.io`，它们被拉入通过`System.out`参考）。

因此，导入完整的包不会对性能造成影响。在类文件级别上，所有类都通过其完全限定名称引用，其中包括包名称。这与类的导入方式无关。

# opengl - GLTools 是标准的 OpenGL 库吗？

> ID：13154882
> 
> 赞同：1
> 
> 时间：2012-10-31T09:33:10.373
> 
> 标签：opengl, graphics, 3d

我已经阅读了一段时间（openGL精湛的第5版），其中的内容我真的很满意，但不知何故，我在这本书广泛使用GLTools库时感到困惑，这对我来说似乎很难理解，我的问题是：

1.  GLtools 库是标准的 opengl 库吗？或者它是专门为 SuperBible 书而写的。
2.  & 如果我仍然坚持使用这个库，关于 GLTools 库的参考有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:25:13.930

> GLtools 库是标准的 opengl 库吗？

OpenGL 不是库；***虽然 GL 中L***的原意确实是 library，但我个人将其反译为 Layer。

从技术的角度来看，OpenGL“仅仅是”一个规范，即描述系统的（冗长的）文档，以及实现必须符合的内容。然后是实际的实现（通常是 GPU 驱动程序的一部分）。

除了 OpenGL 规范中所写的内容之外，OpenGL 实现中没有任何其他内容。

*GLtools*绝对不是 OpenGL 的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T17:45:38.013

它是专门为 OpenGL 超级圣经编写的（我也有一本，目前正在阅读）。我建议尽快离开 GLtools。GLtools 只是一个方便的帮助库。您应该开始学习使用 GLM 并编写自己的缓冲区对象。这将使您为进一步的 OpenGL 3.x-4.x 项目做好更好的准备。它还可以让您更好地处理着色器。

# php - 带文件附件的表单电子邮件发送不发送电子邮件也不报告错误

> ID：13154884
> 
> 赞同：0
> 
> 时间：2012-10-31T09:33:14.593
> 
> 标签：php

我正在尝试使用用户输入的文件上传发送表单，并且由于某种原因似乎没有发送邮件。问题是我没有得到错误来理解我哪里出错了。

在一切之前，我不想使用任何库来做这件事，我想保持简单。

这是代码：

```
<?php  

if(isset($_POST['Submit'])){
    $strTo = "my.email@address.com";  
    $strSubject = "Purchase request from " . $_POST["formName"] . $_POST["formSurname"];  
    $strMessage = nl2br($_POST["formName"] . $_POST["formEmail"] . $_POST["formInstitute"] . $_POST["formCourse"] . $_POST["formNotes"]);  

    //*** Uniqid Session ***//  
    $strSid = md5(uniqid(time()));  

    $strHeader = "";  
    $strHeader .= "From: ".$_POST["formEmail"]."<".$_POST["formEmail"].">\nReply-To: ".$_POST["formEmail"]."";  

    $strHeader .= "MIME-Version: 1.0\n";  
    $strHeader .= "Content-Type: multipart/mixed; boundary=\"".$strSid."\"\n\n";  
    $strHeader .= "This is a multi-part message in MIME format.\n";  

    $strHeader .= "--".$strSid."\n";  
    $strHeader .= "Content-type: text/html; charset=utf-8\n";  
    $strHeader .= "Content-Transfer-Encoding: 7bit\n\n";  
    $strHeader .= $strMessage."\n\n";  

    //*** Attachment ***//  
    if($_FILES["fileAttach"]["name"] != "")  
    {  
        $strFilesName = $_FILES["fileAttach"]["name"];  
        $strContent = chunk_split(base64_encode(file_get_contents($_FILES["fileAttach"]["tmp_name"])));  
        $strHeader .= "--".$strSid."\n";  
        $strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"\n";  
        $strHeader .= "Content-Transfer-Encoding: base64\n";  
        $strHeader .= "Content-Disposition: attachment; filename=\"".$strFilesName."\"\n\n";  
        $strHeader .= $strContent."\n\n";  
    }  

    $flgSend = mail($strTo,$strSubject,null,$strHeader);  // @ = No Show Error //  

    if($flgSend)  
    {  
        echo "Mail send completed.";  
    }  
    else  
    {  
        echo "Cannot send mail.";  
    }  
}
?> 
```

这是表格：

```
 <form action="#!/studentform.2ndphase" method="post" name="form1" enctype="multipart/form-data">  
        <table width="500">  
        <tr>  
            <td>שם פרטי: </td>  
            <td><input name="formName" type="text" id="name"></td>  
        </tr>  
        <tr>  
            <td>שם משפחה: </td>  
            <td><input name="formSurname" type="text" id="surname"></td>  
        </tr>  
        <tr>  
            <td>דואר אלקטרוני: </td>  
            <td><input name="formEmail" type="text"></td>  
        </tr>  
        <tr>  
            <td>מוסד אקדמי: </td>  
            <td><input name="formInstitute" type="text"></td>  
        </tr>  
            <td>מסלול: </td>  
            <td><input name="formCourse" type="text"></td>  
        </tr> 
        <tr>  
            <td>הערות</td>  
            <td><textarea name="formNotes" cols="30" rows="4" id="formNotes"></textarea></td>  
        </tr>  

        <tr>  
        <td>Attachment</td>  
        <td><input name="fileAttach" type="file"></td>  
        </tr>  
        <tr>  
        <td>&nbsp;</td>  
        <td><input type="submit" name="Submit" value="שלח"></td>  
        </tr>  
        </table>  
    </form> 
```

该操作指向不同的页面，因为我使用的是基于 php 的框架，这就是为什么链接设置为`#!studentform.2ndphase`

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:05:12.253

创建一个新的 php 文件，将其添加到其中

```
<?php
phpinfo();
?> 
```

上传并在您的浏览器中打开它，向下滚动页面并检查“sendmail_path”是否为空或找到禁用的功能可能是您的主机禁用了邮件功能。

或者你可以运行一个小函数来检查，

```
<?php
$to      = 'you@yourdomain.com';
$subject = 'Mail test';
$message = 'This is a test email';
$headers = 'From: you@yourdomain.com' . "\r\n" .
   'Reply-To: you@yourdomain.com' . "\r\n" .
   'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

将“you@yourdomain.com”更改为您的电子邮件地址

**{更新}**

您可以使用另一个电子邮件系统来发送它。或使用[SMTP](http://www.9lessons.info/2009/10/send-mail-using-smtp-and-php.html)脚本

我喜欢：[htmlMimeMail5](http://www.lapedrera.com.uy/alojamiento/htmlMimeMail5/example/explanation.html)

```
<?php
require_once("htmlMimeMail5.php");
$mail = new htmlMimeMail5();
$mail->setFrom("YourName <you@example.com>");
$mail->setSubject('Test email');
$mail->setHTML('<body background="background.gif"><b>Sample HTML</b></body>');
$mail->send(array('sentto@example.com'));
?> 
```

# android - 如何在android中将当前日期的单个图像作为文本和相机捕获的图像

> ID：13154888
> 
> 赞同：0
> 
> 时间：2012-10-31T09:33:39.297
> 
> 标签：android, image, camera

我正在从事 Android 应用程序开发。我的目的是使用设备相机捕获图像，并将当前日期和时间作为文本添加到捕获的图像上。并将整个事物作为单个图像上传到服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:39:21.783

[在这里](https://stackoverflow.com/questions/5991319/capture-image-from-camera-and-display-in-activity)阅读

编辑：

```
Bitmap photo = (Bitmap) data.getExtras().get("data"); 
//create bitmap with a canvas
Bitmap newPhoto = Bitmap.createBitmap(photo.getWidth(),photo.getHeight());
Canvas canvas = new Canvas(newPhoto);
canvas.drawBitmap(photo,0,0,null);
//draw the text
Paint paint = new Paint();
//paint.setColor(Color.BLACK);
canvas.drawText("write bla bla bla",x,y,paint);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
newPhoto.compress(Bitmap.CompressFormat.PNG, 100, stream);
//get bytes from stream and send to your server 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:56:57.407

扩展一个 View，例如 ImageView：

```
public class MyImageView extends ImageView{} 
```

覆盖 onDraw()

```
@Override
public void onDraw(Canvas canvas){

    // draw the image you got from the camera
    canvas.drawBitmap(cameraImage, 0, 0, paint);

    // draw the date
    canvas.drawText("Date string", x, y, paint);

} 
```

当您要发送图像时：

```
myImageView.buildDrawingCache();
Bitmap bmp = myImageView.getDrawingCache(); 
```

对于发送到服务器，这是另一个问题，这里有很多关于 SO 的示例。祝你好运。

# java - java/clojure 是否有条件重启库实现？

> ID：13154893
> 
> 赞同：0
> 
> 时间：2012-10-31T09:33:49.397
> 
> 标签：java, clojure

我找到了 ruby​​ 的实现，它内置在 CL 和 dylan 上。有没有类似的东西可以在 jvm 上运行？

[http://axisofeval.blogspot.com.au/2011/04/whats-condition-system-and-why-do-you.html](http://axisofeval.blogspot.com.au/2011/04/whats-condition-system-and-why-do-you.html)

[http://github.com/archit/restarts](http://github.com/archit/restarts)

[http://opendylan.org/documentation/intro-dylan/conditions.html#handlers](http://opendylan.org/documentation/intro-dylan/conditions.html#handlers)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:37:03.650

也许[膨胀](https://github.com/hugoduncan/swell)是你正在寻找的。从[Clojars](https://clojars.org/swell)获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T09:33:21.190

我自己实现了一个以了解有关技术的更多信息

[http://z.caudate.me/ribol/](http://z.caudate.me/ribol/)

# python - 将两个 txt 文件合并到一个字典中并进行更正

> ID：13154896
> 
> 赞同：0
> 
> 时间：2012-10-31T09:33:53.230
> 
> 标签：python, file, dictionary

我有两个“txt”文件，其中包含多个姓名和地址或电话号码。我需要做的是读取文件，删除第一个和最后一个字母之前或之后的可能空格，并将它们组合在一个使用“电话”、“地址”和“姓名”键的字典中，如果这些值是存在于文本文件中。例如：

文件`phonefile`：

```
Marco: 347 8987989
  giorgio  : 06 89786765
 Mauro B.: 3489878675
Ciro : 07897878
L. De La: 09877887 
```

文件`addrfile`：

```
Giorgio : via Verdi, 23
 M. Bianchi:Piazza Milano, 1
   L. De La : via A. Einstein, 12
 Ciro: via Pio 
```

必须变成：

```
{'giorgio': {'phone': '06 89786765'},
'Marco': {'phone': '347 8987989'},
'Giorgio': {'address': 'via Verdi, 23'},
'L. De La': {'address': 'via A. Einstein, 12', 'phone': '09877887'},
'Ciro': {'address': 'via Pio', 'phone': '07897878'},
'Mauro B.': {'phone': '3489878675'},
'M. Bianchi': {'address': 'Piazza Milano, 1'}} 
```

这是我到目前为止所尝试的：

```
def f_phone_addr(phonefile, addrfile):
from collections import defaultdict
e = open(phonefile)
e.readlines()
f = open(addrfile)
f.readlines()
out = defaultdict(dict)
for name, phonenumber in phonefile:
    out[name]['phone'] = phonenumber
for name, address in addrfile:
    out[name]['address'] = address           
return out 
```

我需要一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:36:34.267

您基本上只需要添加线路清理和处理：

我会做这样的事情：

```
from collections import defaultdict

def clean_line(line):
    name, _, value = line.partition(':')
    return name.strip(), value.strip()

def process_file(dic_, file, key):
    for line in file:
        name, value = clean_line(line)
        dic_[name][key] = value

def f_phone_addr(phonefile, addrfile):

    out = defaultdict(dict)
    with open(phonefile) as pf, open(addrfile) as af:
        process_file(out, pf, 'phone')
        process_file(out, af, 'address')
    return out 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:37:38.527

```
phones = dict((k.strip(), v.strip()) for k, v in
              [l.split(":") for l in
               [l.strip() for l in
                open('phonefile').read().split('\n') if l]])
addrs = dict((k.strip(), v.strip()) for k, v in
             [l.split(":") for l in
              [l.strip() for l in
               open('addrfile').read().split('\n') if l]])

dict((k, {'phone': phones.get(k), 'address': addrs.get(k)}) for k in
      set(phones.keys() + addrs.keys())) 
```

**结果**

```
{'Ciro': {'address': 'via Pio', 'phone': '07897878'},
 'Giorgio': {'address': 'via Verdi, 23', 'phone': None},
 'L. De La': {'address': 'via A. Einstein, 12', 'phone': '09877887'},
 'M. Bianchi': {'address': 'Piazza Milano, 1', 'phone': None},
 'Marco': {'address': None, 'phone': '347 8987989'},
 'Mauro B.': {'address': None, 'phone': '3489878675'},
 'giorgio': {'address': None, 'phone': '06 89786765'}} 
```

# c# - 如何在 Monotouch 中绑定扩展方法？

> ID：13154899
> 
> 赞同：2
> 
> 时间：2012-10-31T09:34:01.553
> 
> 标签：c#, ios, xamarin.ios

我很难为 IOS 静态库定义正确的绑定。包含文件包含一些扩展方法，定义为：

```
#import <Foundation/Foundation.h>
@interface UIView(LayerEffects)

// set round corner
- (void) setCornerRadius : (CGFloat) radius;
// set inner border
- (void) setBorder : (UIColor *) color width : (CGFloat) width;
// set the shadow
// Example: [view setShadow:[UIColor blackColor] opacity:0.5 offset:CGSizeMake(1.0, 1.0) blueRadius:3.0];
- (void) setShadow : (UIColor *)color opacity:(CGFloat)opacity offset:(CGSize) offset blurRadius:(CGFloat)blurRadius;

@end 
```

Monotouch 文档（[Binding Class Extensions](http://docs.xamarin.com/ios/Guides/Advanced_Topics/Binding_Objective-C_Libraries#Binding_Class_Extensions)）不是很清楚如何实际处理这个问题。

这也应该定义为扩展 C# 方法吗？还是我们必须在“LayerEffects”类中定义它？

**更新**以下映射不起作用：

```
[BaseType (typeof (UIView))]
interface LayerEffects{

    [Bind ("setCornerRadius:")]
    void SetCornerRadius ([Target] UIView uiView, float width);

    [Bind ("setBorder:width")]
    void SetBorder ([Target] UIView uiView, UIColor color, float width);

    [Bind ("setShadow:opacity:offset:blurRadius")]
    void SetShadow ([Target] UIView uiView, UIColor color, float opacity, SizeF offset, float blurRadius);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:21:52.853

我认为您必须定义一个新类来进行绑定：

```
[BaseType(typeof(UIView))]
public interface UIViewLayerEffects
{

} 
```

但这对您的情况并没有真正的帮助。

您想在任何`UIView`权利上使用它吗？

将下面的代码翻译成 C# 可能更容易。这些方法看起来并不难实现。例如，我认为`setCornerRadius`就是这样：

```
myView.Layer.CornerRadius = 3f; 
```

# c# - 添加 PageFunction.Return 处理程序时的 WPF System.ExecutionEngineException

> ID：13154900
> 
> 赞同：0
> 
> 时间：2012-10-31T09:34:02.707
> 
> 标签：c#, wpf

我在 wpf 应用程序中有简单的窗口

```
<Window ... >
     <Frame  Name="contentFrame" Margin="0 60 0 0" Source="ContentPage.xaml" NavigationUIVisibility="Hidden"/>
</Window> 
```

和名为 SettingsPage 的简单页面函数（公共部分类 SettingsPage : PageFunction in code-behind）。在某些时候，我在窗口代码隐藏中执行代码

```
 SettingsPage settingsPage = new SettingsPage();
    settingsPage.Return += settingsPage_Return;
    contentFrame.NavigationService.Navigate(settingsPage); 
```

在哪里

```
public void settingsPage_Return(object sender, ReturnEventArgs<bool> e)
    {
        String test="test";
    } 
```

在页面功能中我执行代码

```
OnReturn(false); 
```

并获得 System.ExecutionEngineException。我需要捕获 SettingsPage 关闭事件，并且在 SettingsPage 中创建委托并手动引发它时创建了它，但我不明白为什么标准 WPF 功能不起作用。任何人都知道为什么 WPF 在这种情况下会引发错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:48:08.060

这可能是因为您的页面已被垃圾收集。System.ExecutionEngineException 的原因通常是这样。[相关的 MSDN 定义](http://msdn.microsoft.com/en-us/library/system.executionengineexception.aspx)说：

> 在某些情况下，以 .NET Framework 为目标的应用程序可能会在垃圾回收期间引发 ExecutionEngineException 异常，而此时应用程序或运行它的系统处于高负载状态。作为一种解决方法，您可以通过修改应用程序的配置文件来禁用并发垃圾回收。有关更多信息，请参阅如何：禁用并发垃圾收集。

[禁用并发垃圾收集](http://msdn.microsoft.com/en-us/library/at1stbec%28v=vs.100%29.aspx)可能是一种确定是否真的如此的方法。

# android - 如何通过您的应用程序运行 traceroute 命令？

> ID：13154902
> 
> 赞同：3
> 
> 时间：2012-10-31T09:34:05.870
> 
> 标签：android, shell, android-ndk, command, traceroute

我想通过我的应用程序运行 traceroute 命令。
我该怎么做呢？

```
Runtime.getRuntime().exec("traceroute google.com") 
```

不工作。

java.io.IOException：运行 exec() 时出错。命令：[traceroute，-4，google.com] 工作目录：null 环境：null 11-02 12:51:38.399: E/trace(1604): at java.lang.ProcessManager.exec(ProcessManager.java:224)

是否有另一种方法，例如使用 NDK 或其他方式。
请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:03:04.907

您不能在 Android 中使用 use traceroute 命令。

如果要在安装了busybox的root设备中使用它，请使用busybox安装路径来运行命令。如果你想在有根设备中使用这个库，它会很有用。 [http://code.google.com/p/roottools/](http://code.google.com/p/roottools/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T22:27:12.517

您可以做的另一件事是使用简单的 ping 命令创建您自己的跟踪路由。Traceroute 本质上是发送带有修改过的 TTL 字段的 ping。当 ip 数据包达到其降低的 TTL 限制（在目标服务器之前）时，服务器会发送响应。这些响应是跟踪路由如何能够找到数据包如何到达目的地的方式。

# mysql - Mysql使用count(distinct)和join时如何优化

> ID：13154904
> 
> 赞同：1
> 
> 时间：2012-10-31T09:34:12.697
> 
> 标签：mysql, join, distinct

我有两个表，它们的结构如下：

```
CREATE TABLE  `metaservice`.`user` (
  `id` bigint(18) NOT NULL AUTO_INCREMENT,
  `userId` bigint(18) NOT NULL,
  `name` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `userId` (`userId`) USING BTREE,
  KEY `nameIndex` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;

CREATE TABLE  `metaservice`.`tweet` (
  `id` bigint(18) NOT NULL AUTO_INCREMENT,
  `tweetId` bigint(18) NOT NULL,
  `reqId` int(8) NOT NULL DEFAULT '0',
  `postedTime` datetime NOT NULL,
  `body` text NOT NULL,
  `userId` bigint(18) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FK69A46713BA64537` (`userId`),
  KEY `reqId` (`reqId`),
  CONSTRAINT `FK69A46713BA64537` FOREIGN KEY (`userId`) REFERENCES `user` (`userId`)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8; 
```

我在下面得到了这个 sql 查询：

```
select
        count(distinct user.name) as c 
    from
        tweet as tweet 
    inner join
        user as user 
            on tweet.userId=user.userId  
            and tweet.reqId in (
                327774,
            215173,
            104302,
            239188,
            317122,
            972632,
            424187,
            644254,
            946792,
            543258) 
```

tweet表有6w条记录，user表有6w+条记录时太慢了这个查询在10.45秒内返回结果：60594

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:39:31.497

我建议您按如下方式使用 EXPLAIN：

```
EXPLAIN select
        count(distinct user.name) as c 
    from
        tweet as tweet 
    inner join
        user as user 
            on tweet.userId=user.userId  
            and tweet.reqId in (
                327774,
            215173,
            104302,
            239188,
            317122,
            972632,
            424187,
            644254,
            946792,
            543258) 
```

然后分析 EXPLAIN 给你的响应。可以通过以下来源找到有关 MySQL 解释的更多信息：

[MySQL解释语法](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

[使用解释优化查询](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)

[使用 MySQL 解释](http://forums.spry.com/howtos/1345-using-mysqls-explain-command.html)

[MySQL 解释参考](http://weevilgenius.net/2010/09/mysql-explain-reference/)

查看结果后，您需要决定应该索引哪些列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:44:42.700

我建议你索引你的键。索引不仅仅用于主键或唯一键。如果您要搜索的表中有任何列，您几乎应该始终为它们编制索引。

另请阅读该[链接](http://net.tutsplus.com/tutorials/other/top-20-mysql-best-practices/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:41:00.627

尝试这个：

```
select count(*) as c from (
select
       user.name 
    from
        tweet as tweet 
    inner join
        user as user 
            on tweet.userId=user.userId  
            and tweet.reqId in (
                327774,
            215173,
            104302,
            239188,
            317122,
            972632,
            424187,
            644254,
            946792,
            543258)
group by user.name) a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:20:20.000

试试这个——

```
SELECT
  COUNT(DISTINCT user.name) AS c
FROM
  tweet AS tweet
INNER JOIN user AS user
  ON tweet.userId = user.userId
INNER JOIN (
    SELECT 327774 AS reqId UNION
    SELECT 215173 UNION
    SELECT 104302 UNION
    SELECT 239188 UNION
    SELECT 317122 UNION
    SELECT 972632 UNION
    SELECT 424187 UNION
    SELECT 644254 UNION
    SELECT 946792 UNION
    SELECT 543258
  ) t
  ON tweet.reqId  = t.reqId; 
```

# performance - 如何在我的代码中监控 Azure 存储操作的性能？

> ID：13154908
> 
> 赞同：0
> 
> 时间：2012-10-31T09:34:24.257
> 
> 标签：performance, azure, monitoring, azure-storage, performancecounter

我有一个在服务请求时使用 Azure 存储的 Web 角色。现在我看到请求的处理速度非常慢——比平时慢了几十倍。我查看了角色保存的性能计数器——它们对我来说很常见。我已经检查了从我的网络到角色的连接 - 看起来没问题。

我怀疑问题可能是从我的服务内部调用的 Azure 存储操作在一段时间内相当缓慢，这会减慢服务请求的速度。

如何持续收集有助于我估计这些请求的性能的数据？有没有我可以启用的性能计数器或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:52:42.100

打开[存储日志](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx)，您可以看到响应时间。这可以在存储帐户配置下的新门户上轻松启用。您可以绘制响应时间图，看看它们是否与您的缓慢相关。

# c# - Visual Studio 选项上的 Line Winform 控件

> ID：13154911
> 
> 赞同：1
> 
> 时间：2012-10-31T09:34:27.410
> 
> 标签：c#, winforms, visual-studio-2010

目标是模仿 Visual Studio 上的选项页面。选项页面是 Tools->Options->TextEditor->C++->General（比如说）。

但我无法控制部分标题的“线”。检查屏幕截图中箭头突出显示的那个。

![Visual Studio 选项页面](../Images/76189308135161cfc8775e15af4f0e42.png)

我尝试过 LineShape、Panel 等，但没有一个看起来像这样。

那是什么控制？或者如果我们没有这样的预定义控件，我该如何模仿它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:55:09.510

您可以使用 LineShape 或 GroupBox

请参阅下面的图片以获取示例（以及使其看起来像您需要的图片的说明）

![在此处输入图像描述](../Images/8f3117da90ee09e1ff25750146d03fa2.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T09:38:00.217

它将显示代码行的行号。因此，您可以轻松跟踪您的代码是否在某行出现错误

# javascript - Chrome 扩展：console.log 检测器

> ID：13154914
> 
> 赞同：1
> 
> 时间：2012-10-31T09:34:31.953
> 
> 标签：javascript, google-chrome, google-chrome-extension

有人知道 chrome 扩展，这有助于检测`console.log`页面上的 javascripts 吗？
如果`console.log`不检查就调用，页面崩溃，脚本不工作。但我经常把`console.log`它调试，有时我会忘记删除它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:36:10.430

一个简单的解决方法是始终包含一段类似于此的 javascript：

```
if (typeof(console) == "undefined") {
  console = {log: function() {}};
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:38:23.783

覆盖 console.log ，并使用您自己的函数进行调试。

```
function debug(d){ // debug function. console.log or alert
   if(off == 0){
    if(typeof(console) != 'undefined'){
        if(typeof(console.log) == 'function'){
            console.log(d);
        }
    }else{
        alert(d);
    }
  }
}; 
```

当您需要关闭验证时，设置 var Off = 0 。

# groovy - 如何从groovy中的地图获取值？

> ID：13154920
> 
> 赞同：1
> 
> 时间：2012-10-31T09:34:54.200
> 
> 标签：groovy

嗨，我的控制器中有收藏品，例如

```
def devices=[ [id:PPL000000011906, firstName:Adam, lastName:Baines], [id:PPL000000010836, firstName:Adam, lastName:Baines], [id:PPL000000015137, firstName:Adan, lastName:Saenz], [id:PPL000000015136, firstName:Adan, lastName:Saenz]] 
```

我将从我的视图中获取 id。如何根据 ID 从我的地图中获取名字和姓氏值。

谢谢，湿婆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:04:08.223

基本上，您可以使用`find`给定的`id`. 这是一个例子

```
def devices = [ [id:'PPL000000011906', firstName:'Adam', lastName:'Baines'],
                [id:'PPL000000010836', firstName:'Adam', lastName:'Baines'],
                [id:'PPL000000015137', firstName:'Adan', lastName:'Saenz'],
                [id:'PPL000000015136', firstName:'Adan', lastName:'Saenz'] ]

Closure<String> nameForId = { String id ->
  devices.find { it.id == id }?.with { map ->
    "$map.firstName $map.lastName"
  }
}

assert nameForId( 'PPL000000015136' ) == 'Adan Saenz' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-09T20:35:52.490

我会这样做以获得一个字段：

```
devices.find { it.id == 'PPL000000011906' }?.firstName 
```

如果你想要闭包和参数，我会这样做：

```
def findPerson = { person -> devices.find { it.id == person }  }
def myPerson = findPerson('PPL000000011906')
println "FirstName: ${myPerson?.firstName} LastName: ${myPerson?.lastName}" 
```

如果你想发疯，你可以这样做：

```
ArrayList.metaClass.findThingInMap = { field, value -> delegate.find { it[field] == value } } 
```

这样做是允许您在任何包含哈希映射的数组列表中找到字段的值，这就是您所拥有的。

```
def myPerson = devices.findThingInMap('id', 'PPL000000011906')
println "FirstName: ${myPerson?.firstName} LastName: ${myPerson?.lastName}" 
```

除非您需要灵活性，否则我不会真正这样做，但这显示了 groovy 的真正力量和令人敬畏。

# objective-c - xcode 4.3.2 中架构 i386 的未定义符号

> ID：13154926
> 
> 赞同：0
> 
> 时间：2012-10-31T09:35:11.007
> 
> 标签：objective-c, xcode

！[检查附加的屏幕截图错误](http://i.stack.imgur.com/3ZDkl.png)[1].png][http://i.stack.imgur.com/3ZDkl.png] 嗨，我是 iOS 开发的初学者。我们正在尝试使用目标在 xcode 中开发应用程序c.我们成功导入了库和代码。我们正在尝试配置应用程序以同步和获取 MBO 数据。当我们构建我们的项目时，我们遇到了一个错误。我已经用这篇文章上传了这个错误。请检查附件和帮助我们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:41:36.873

您似乎没有将 MBOLogger 框架添加到您的项目或将其链接到目标。

转到您的目标信息并检查构建阶段。在那里，在 Linked Frameworks 下，您应该找到您的 MBOLogger，或者如果它不存在，请添加它。

![在此处输入图像描述](../Images/b7e843d4f60c733fb1988ac0a69eee17.png)

# jquery - jQuery - 为当前的 toggleClass 状态创建 cookie？

> ID：13154930
> 
> 赞同：0
> 
> 时间：2012-10-31T09:35:20.937
> 
> 标签：jquery, cookies, toggle

如果此切换，我想为当前状态创建一个 cookie...

我的代码：

```
$(document).bind('keydown', 'esc', function() {
   $("nav").toggleClass('blue');
   return false;
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:38:35.250

设置饼干：

```
$.cookie("cookie_name", "state"); 
```

读取cookie：

```
var value = $.cookie("cookie_name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:48:59.900

[试试这个（连同一个像http://github.com/carhartl/jquery-cookie](http://github.com/carhartl/jquery-cookie)这样的 jQuery cookie 插件）

```
// get previous state and initiate the class
if($.cookie("state") == 1) {
    $('nav').addClass("blue");
} else {
    $('nav').removeClass("blue");
}

$(document).bind('keydown', 'esc', function() {
    $("nav").toggleClass('blue');
    if($("nav").hasClass("blue")) {
        $.cookie("state", 1);
    } else {
        $.cookie("state", 0);
    }
    return false;
}); 
```

# java - 关于 Servlet 的问题

> ID：13154938
> 
> 赞同：0
> 
> 时间：2012-10-31T09:36:00.070
> 
> 标签：java, servlets

**第一个问题：**在以下情况下使用哪个范围对象：

1.  您希望维护客户需要在多个页面中输入的用户配置文件。
2.  您希望验证用户在同一个 Web 应用程序中起诉另一个 servlet 时输入的用户 ID 和密码。

**第二个问题：** RequestDispatcher 对象有两个方法，`include()`和`forward()`. 有什么区别？

**第三个问题：** Servlet 使用一个`javax.servlet.http.HttpServletResponse`对象。你如何使用它来返回文本数据和二进制数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:41:17.030

(a) 会话范围

`RequestDispather.forward()` 一旦您将请求从说 Servlet A 转发到任何其他 Servlet/JSP 控件，就会从 Servlet A 转移到转发的 patrty 并且它永远不会针对该请求返回给 A。

`RequestDispather.Include()` 如果 Servlet A（上例）包含其他 Servlet/JSP（比如 B 或 B.jsp）的响应，则包括您正在做的事情，所以暂时控制转到 B 或 B.jsp（它们将生成响应）控制来了回到 A & 生成的响应被添加到 A 的响应中。

检查[HttpServletResponse API](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServletResponse.html)以进行响应写入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T16:14:05.373

1.  回答：

    Forward() 方法用于将请求从 Servlet 转发到 Servlet/JSP/HTML 或 JSP 到 Servlet/JSP/HTML

    include() 方法用于将 Servlet 或 JSP 的响应包含在另一个 Servlet 或 JSP 中

    1.  回答：

    您可以创建一个单独的 Servlet 类来验证另一个 Servlet 类的用户 ID 和密码，这可以通过 Servlet 链接概念来完成。在验证 Server 类中，调用请求调度器将响应转发给 Main Servlet 类。

例如。

`RequestDispatcher rd=req.getRequestDispatcher("url/servlet name"); rd.forward(req,res)`

# python - ZODB / repoze.catalog - 将对象和目录保存在同一个数据库中？

> ID：13154943
> 
> 赞同：1
> 
> 时间：2012-10-31T09:36:21.473
> 
> 标签：python, zodb

我以为我明白这一点，但我开始怀疑！

如果您考虑[repoze.catalog 文档示例](http://docs.repoze.org/catalog/usage.html#indexing)：

```
from repoze.catalog.catalog import FileStorageCatalogFactory
from repoze.catalog.catalog import ConnectionManager

from repoze.catalog.indexes.field import CatalogFieldIndex
from repoze.catalog.indexes.text import CatalogTextIndex

factory = FileStorageCatalogFactory('catalog.db', 'mycatalog')

_initialized = False

def initialize_catalog():
    global _initialized
    if not _initialized:
        # create a catalog
        manager = ConnectionManager()
        catalog = factory(manager)
        # set up indexes
        catalog['flavors'] = CatalogFieldIndex('flavor')
        catalog['texts'] = CatalogTextIndex('text')
        # commit the indexes
        manager.commit()
        manager.close()
        _initialized = True

class Content(object):
    def __init__(self, flavor, text):
        self.flavor = flavor
        self.text = text

if __name__ == '__main__':
    initialize_catalog()
    manager = ConnectionManager()
    catalog = factory(manager)
    content = {
         1:Content('peach', 'i am so very very peachy'),
         2:Content('pistachio', 'i am nutty'),
         }
    for docid, doc in content.items():
        catalog.index_doc(docid, doc)
    manager.commit() 
```

这向您展示了如何为 Content 类的两个实例生成目录条目，但实际保存对象的正确机制是什么？

我一开始有一个完全独立的 ZODB 数据库，我在其中存储了在 docid 上键入的对象，该 docid 用于在 repoze.catalog 下对它们进行编目，但是当涉及事务时，这不太令人满意，因为在添加对象时我必须发出提交用于存储对象的目录和 ZODB 数据库。

我曾假设我能够访问 repoze.catalog 结构中的 ZODB 目录并使用它来存储实际对象，但我很难找到如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:54:41.877

像这样的目录`repoze.catalog`旨在索引内容，而不是存储它。它的目的是通过索引内容的某些方面，使找回您的内容（存储在其他地方）变得容易和高效。

给出的示例是完全独立的，并将其数据存储在单独的 ZODB 文件中。这是为了支持目录用于*本身*未存储*在*ZODB 中的数据的用例。

但是，您可以自由地将目录存储在存储内容的同一个 ZODB 中。您的内容对象应该遵循[持久对象的基本规则](http://www.zodb.org/documentation/guide/prog-zodb.html#writing-a-persistent-class)，但您可以自由地构建存储结构。

要为自己创建`repoze.catalog`目录，而不使用提供的`FileStorageCatalogFactory`，只需实例化`repoze.catalog.catalog.Catalog`：

```
from repoze.catalog.catalog import Catalog

if 'mycatalog' not in zodbroot:
    zodbroot['mycatalog'] = Catalog() 
```

# facebook - 关于facebook apprequest消息

> ID：13154945
> 
> 赞同：1
> 
> 时间：2012-10-31T09:36:25.357
> 
> 标签：facebook, request, message

```
FB.ui( {
    method: 'apprequests',
    message: "hi, come and play with me.",
    filters: ['app_non_users'],
    frictionlessRequests : true,
    to: toids.join(',')
},
function(response) { 
```

当我单击并打开请求窗口时，我可以看到消息是正确的。但是收到我请求的人却显示**“xx给你发了一个请求”。** 有什么问题吗？或者它会显示在其他任何东西上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:41:36.843

添加一个参数`new_style_message:true`，它有时会起作用。我的意思是通知就像`hi, come and play with me`. 那么您的 apprequest 功能将如下所示：

```
FB.ui( {
    method: 'apprequests',
    message: "hi, come and play with me.",
    filters: ['app_non_users'],
    frictionlessRequests : true,
    to: toids.join(','),
    new_style_message:true
},
function(response) { 
```

虽然我会说不要依赖它，因为它是一个未记录的参数。顺便说一句，我也使用它

# php - 如何对序列化数组的每一项进行分组和计数？

> ID：13154948
> 
> 赞同：0
> 
> 时间：2012-10-31T09:36:42.747
> 
> 标签：php, mysql, serialization, group-by

我在我的数据库中的一个字段中的一个序列化数组中存储一个项目列表（我正在使用 PHP/MySQL）。每个用户在自己的表中都有这个序列化数组。我需要计算有多少用户拥有序列化数组的一项。

**例如：**

序列化数组可能包含（0,1,2,3,4,5,6,7,8）

**用户a；** a:2:{i:0;s:1:"6";i:1;s:1:"7";}

**用户 b；** a:1:{i:0;s:1:"6";}

**用户 c;** a:3:{i:0;s:1:"6";i:1;s:1:"7";i:2;s:1:"2";}

**我需要这个结果；**

计数（“0”）= 0

计数（“1”）= 0

计数（“2”）= 1

计数（“3”）= 0

计数（“4”）= 0

计数（“5”）= 0

计数（“6”）= 3

计数（“7”）= 2

计数（“8”）= 0

希望这是有道理的。任何想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:45:15.627

您可以使用两个循环。

```
$arrCount = array();
foreach($arrUsers $user_key=>$count_data){
foreach($count_data => $val){
   if(isset($arrCount[$val]))
   {
       $arrCount[$val]++;
   }else{
       $arrCount[$val] = 1;
   }
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:37:58.773

您可以创建一个简单的函数，遍历每个用户数组。请注意，我在计数之前对数组进行了反序列化。此代码将给出理想的结果。

```
<?php

function countElement($userArray, $value) {
    $cnt = 0;
    if(!empty($userArray)) {
        foreach($userArray as $user) {
            $unserializeArr = unserialize($user);
            $tmp = array_count_values($unserializeArr);
            if(isset($tmp[$value])) $cnt += $tmp[$value];
        }
    }
    return $cnt;
}

$userArr = array();
$userArr[] = 'a:2:{i:0;s:1:"6";i:1;s:1:"7";}';
$userArr[] = 'a:1:{i:0;s:1:"6";}';
$userArr[] = 'a:3:{i:0;s:1:"6";i:1;s:1:"7";i:2;s:1:"2";}';

for($i = 0; $i <= 8; $i++) {
    echo 'Count('.$i.') = '.countElement($userArr, $i).'<br>';
}

?> 
```

# python - 防止关闭通过子进程打开的 DOS shell 窗口

> ID：13154950
> 
> 赞同：1
> 
> 时间：2012-10-31T09:36:52.940
> 
> 标签：python, python-2.7, subprocess

我正在尝试创建一个程序（它将在 Windows 上使用）来压缩具有 7-Zip 和其他内容的文件列表。

我使用`subprocess`正确的参数运行 7-Zip 可执行文件。 `subprocess`打开带有`7z.exe`输出的 DOS shell；这很好，因为有一个文件压缩百分比指标，有时这个过程可能很长。我的问题是用户将能够（自愿或意外）通过以下方式中断压缩任务

1.  单击 DOS 窗口的关闭按钮，或
2.  按`Ctrl`- `C`。

是否可以禁用从打开的 DOS shell 的任何类型的输入`subprocess`？或者，如何在运行时将 DOS shell 的输出传递给我的程序？我尝试使用`process.stdout.read(1024)`and `process.communicate()`，但是在子进程结束时都读取了输出；不是在它运行时。

我使用`subprocess.Popen()`了代替，`subprocess.call()`以便我可以同时运行所有 7-Zip 任务，但如果有助于解决我的问题，我可以更改它。

```
for f in self.fileList:
    destination = self.newPath + "\\" + basename(f) + ".7z"
    arglist = [self.sevZipPath, "a", "-mx9", destination, f]
    sp = subprocess.Popen(
        args = arglist,
        cwd = self.newPath,
        shell = False
        ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:58:50.093

您可以在其中设置一个标志`startupinfo`来隐藏窗口，并设置`stdout=subprocess.PIPE`为捕获进程的输出。

```
startupinfo = subprocess.STARTUPINFO()
startupinfo.dwFlags = subprocess.STARTF_USESHOWWINDOW
startupinfo.wShowWindow = subprocess.SW_HIDE
sp = subprocess.Popen(..., stdout=subprocess.PIPE, startupinfo=startupinfo) 
```

请记住，这`STARTUPINFO`仅适用于 Windows。

# grails - Grails 基于从文件加载的另一个属性切换配置属性

> ID：13154951
> 
> 赞同：0
> 
> 时间：2012-10-31T09:36:53.137
> 
> 标签：grails, spring-security, configuration-files

我不确定这是否可能，或者我是否必须找到另一种解决方法，但是......

我有一个使用 Spring-Security-Core 作为其身份验证系统的 Grails 应用程序。最终可能会在几个位置部署它，并且不同的位置可能会使用不同的身份验证提供程序（例如，有些将使用 DAO，有些将使用 LDAP 等）

我希望能够根据 .properties 文件“auth.type=LDAP”或“auth.type=DAO”中的一行来设置应用程序。一旦应用程序知道它将是两者中的哪一个，它就需要使用 Config.groovy 设置进一步的属性来满足这一点。

我正在考虑需要 config.groovy 从 .properties 文件加载属性，然后在 Config.groovy 中在 switch 语句中使用这些属性来确定要设置哪些其他属性。但是我尝试了这个，但我相信在配置文件中，来自 .properties 文件的属性是在配置文件中的所有属性之后加载的。这是一个正确的假设吗？

无论如何，如果有人知道实现这种效果的简单方法，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:48:20.537

您是正确的，从`grails.config.locations`文件（groovy 或属性）读取的属性仅在读取主文件后才应用`Config.groovy`。您可以使用自定义环境，并拥有类似的东西

```
environments {
  ldapAuth {
    foo.bar = 'something'
  }
  daoAuth {
    foo.bar = 'something else'
  }
} 
```

但是您必须在构建 WAR 时指定环境，您不能构建一个 WAR，然后在运行时将其配置为不同的环境。

如果您有某种方法可以为运行 WAR 的 tomcat（或其他）指定系统属性，那么您可以执行类似的操作

```
def authType = System.getProperty('myapp.auth.type', 'dao')
// store authType as a real config option as well as a local variable
auth.type = authType

switch(authType) {
  case 'dao':
    foo {
      bar = 'something'
    }
    break

  case 'ldap':
    foo {
      bar = 'something else'
    }
    break

  default:
    println "Unrecognised auth type ${authType}"
} 
```

或者自己手动读取`.properties`文件（而不是依赖`grails.config.locations`）

```
def authProps = new Properties()
new File('/etc/myapp/auth.properties').withInputStream(authProps.&load)
def authType = authProps.getProperty('auth.type', 'dao')
auth.type = authType

// switch(authType) as before 
```

一个皱纹 - 在`log4j`闭包中，您可能会发现您无法访问该`authProps`变量（我不知道，我没有尝试过）。但是，在该闭包中，您*可以*访问完整的配置`config`，因此，只要您有`auth.type = authType`我在上面使用的行，您就可以`config.auth.type`改为说。

# c++ - 以编程方式将 QTimeEdit 设置为只读

> ID：13154953
> 
> 赞同：1
> 
> 时间：2012-10-31T09:36:58.617
> 
> 标签：c++, qt

QTimeEdit 有一个只读属性，我可以从 Designer 中设置它（它位于 QAbstractSpinBox 属性类别中）。

但是 QTimeEdit 中没有 setReadOnly 成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:39:28.870

您可以调用 setReadOnly。它是 QTimeEdit 继承自 QAbstractSpinBox 的成员。

在查找特定类的文档时，不要忘记单击链接“所有成员列表，包括继承的成员”，它将显示您可以为给定对象调用的所有方法。

# windows-8 - Windows 应用商店应用程序 – 单击事件时应用程序栏图标更改

> ID：13154954
> 
> 赞同：0
> 
> 时间：2012-10-31T09:37:00.927
> 
> 标签：windows-8, microsoft-metro

我有一个带有应用栏图标的 Windows 应用商店应用。我正在使用全局 App Bar 来浏览部分页面。App Bar 是使用自定义图像定义的，它看起来像

```
<AppBar>
        <StackPanel Orientation="Horizontal" x:Name="topAppBar">
            <Button x:Name="homeAppB"  Click="homeAppB_Click" >
                <Button.Content>
                    <StackPanel Orientation="Vertical">
                        <Image Source="Assets/home_default.png" Width="40"/>
                        <TextBlock Text="Home"/>
                    </StackPanel>
                </Button.Content>
            </Button>
     </StackPanel>
    </AppBar> 
```

单击图标后，我需要将图像更改为 home_onClick.png；这是为了指示选择哪个 App Bar 登陆当前页面。

目前，这是使用代码背后的代码实现的，例如

```
homeB.Content = Utilities.AppBarIconChange(new Uri("ms-appx:/Assets/home_onClick.png"), "Home");
------------------------------------------------------

public static StackPanel AppBarIconChange(Uri imageUrl, string labelMsg)
    {
        StackPanel panel = new StackPanel();
        Image img = new Image();
        img.Source = new BitmapImage(imageUrl);
        TextBlock txt = new TextBlock();
        txt.Text = labelMsg;
        panel.Children.Add(img);
        panel.Children.Add(txt);

        return panel;
    } 
```

有什么方法可以在 XAML 本身中实现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:14:23.247

我不认为你可以完全在 XAML 中完成，homeAppB_Click 事件处理程序中的一些代码总是需要的。

一种更优雅的方法是将图像的源属性绑定到 ViewModel 上的属性，该属性包含 URL，并且在 homeAppB_Click 事件处理程序中只是更改此属性。

# powershell - 嵌套变量的问题

> ID：13154955
> 
> 赞同：1
> 
> 时间：2012-10-31T09:37:06.137
> 
> 标签：powershell

该脚本是不言自明的，但我不知道如何让它工作。我想弄清楚如何将变量传递`$ComputerPath`给函数并在该脚本集中`$ComputerPath`

```
Function CheckPath {
    While (!$args[0]) {
        Write-Host "`nVariable Undefined"
        $Args[0] = Read-Host "Enter Valid Path"
    } 
    while (!(test-path $Args[0])) {
        Write-Host "Unable To Location Files, Please Check Again."
        $args[0] = Read-Host "Enter Valid Path"
    }
}

$ComputersPath = "missingfile.txt"

$ComputersPath
CheckPath $ComputersPath
$ComputersPath 
```

我的结果

```
PS Z:\Powershell Scripting\Test Lab> .\TestFunction.ps1
missingfile.txt
Unable To Location Files, Please Check Again.
Enter Valid Path: log.txt
missingfile.txt
PS Z:\Powershell Scripting\Test Lab> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:38:58.113

尝试将变量传递给这样的函数：

```
CheckPath $ComputersPath 
```

`$`在单引号中，powershell 将其视为文字“美元符号”，而不是变量限定符

并更改这些行：

```
$args[0] = Read-Host "Enter Valid Path"
CheckPath 
```

在

```
CheckPath (Read-Host "Enter Valid Path") 
```

编辑：

尝试这个：

```
Function CheckPath {    
    IF (!$args[0]) {    
        Write-Host
        Write-Host "Variable Undefined"
        $args[0] = Read-Host "Enter Valid Path"
    }
    else
    {
      "Found"
      $global:ComputersPath  = $args[0]
    }

IF (!(Test-Path ($Args[0]))) {
    Write-Host
    Write-Host "Unable To Location Files, Please Check Again."
    CheckPath (Read-Host "Enter Valid Path")
} 
```

}

编辑：

为了设置你在函数中使用的任何变量，我给你一个例子：

```
function test 
{   
    $myvar = $MyInvocation.line.split(' ')[1].replace('$','')    
    "`$$myvar value now is $($args[0])"

    Invoke-Expression  "`$global:$myvar = 'yahoo'"    

    "{0} value now is {1}" -f "`$$myvar", (invoke-expression "`$$myvar")
} 
```

之后你可以试试这个：

```
PS C:\ps> $a="google" #or whatever variable you want...
PS C:\ps> test $a
$a value now is google
$a value now is yahoo
PS C:\ps> $a
yahoo 
```

`CheckPath function`现在您可以使用此函数中的代码并根据您的目标逻辑放入您的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:07:05.437

首先，不需要将 $args[0] 转换为字符串。其次，您在单引号内传递 $ComputersPath。单引号可防止变量扩展，并且值按原样传递。

试试这个：

```
Function CheckPath {

    IF (!$args[0]) {
        Write-Host
        Write-Host "Variable Undefined"
        $args[0] = Read-Host "Enter Valid Path"
    } 

    IF (!(Test-Path $Args[0])) 
    {
        Write-Host "`nUnable To Location Files, Please Check Again."
        $args[0] = Read-Host "Enter Valid Path"
        CheckPath
    }

    $args[0]
}

CheckPath $ComputersPath 
```

如果提供的路径不存在，这是一种更强大的方法来无限期地提示用户：

```
do{
    [string]$path = Read-Host "Enter a valid path"
} while ( -not (test-path $path) )

$path 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:16:44.367

我会在函数中定义参数，并将其声明为强制。

```
Function CheckPath {
    param (
        [parameter(Mandatory=$true)]
        [string]$Path 
    )#End Param

    while (!(test-path $Path)) {
        Write-Host "Unable To Location Files, Please Check Again."
        $Path = Read-Host "Enter Valid Path"
    } #End While
    write-output $path
} #End Function 
```

这仍然会强制用户输入路径文件，但会使代码看起来更干净。当我对此进行测试时，我得到了您要求的结果。我确实喜欢 Shay Levi 提示用户的方法。使用他的示例，它看起来像这样：

```
Function CheckPath {
    param (
        [parameter(Mandatory=$true)]
        [string]$Path 
    )#End Param

    do{
        [string]$path = Read-Host "Enter a valid path"
    } while ( -not (test-path $path) )
    write-output $path
} 
```

# asp.net-mvc-4 - 在网站中下载 Azure Blob

> ID：13154956
> 
> 赞同：0
> 
> 时间：2012-10-31T09:37:09.303
> 
> 标签：asp.net-mvc-4, download, httpresponse

总而言之，我正在尝试找到一种从 Asp.net MVC 4 网站下载大型 blob 文件（约 200MB）的方法，这是我的代码片段。请查看它。谢谢。

```
string sBlobName ="xxxxx";
Response.ContentType="application/octet-stream";
Response.AddHeader("Content-Disposition", "attachment;filename=" + sBlobName);

long lFileSize =200*1024*1024;
int iOffset = 0;
int iBufferSize = 4 * 1024 * 1024;//MB

while (iOffset < lFileSize)
{
    //Chunk read blob into a byte array
    var bData = StorageHelper.ChunkReadPackage(sContainerName, sPackFullPath, iOffset, iBufferSize);
    Response.BinaryWrite(bData);
    iOffset += bData.Length;
}
Response.Flush();
Response.End();

return new EmptyResult(); 
```

似乎在从 blob 读取的所有块都通过 Response.BinaryWrite() 发送到客户端之后，我的 Firefox 可以向我弹出下载对话框窗口。

**我的问题**

为什么需要 Response.BinaryWrite() 整个内容？有没有办法让这个过程更有效？我的意思是，在将第一块 blob 发送到客户端之后，是否有办法在客户端下载流。而是等待所有内容被发送到客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:52:06.867

`Response.BufferOutput = false;` 有用。

# asp.net-mvc-3 - 嵌套 EditorTempates 时出错

> ID：13154961
> 
> 赞同：2
> 
> 时间：2012-10-31T09:37:26.560
> 
> 标签：asp.net-mvc-3, razor, mvc-editor-templates

我正在使用 MVC 3、Razor 视图和 EditorFor 模板。

我有三个简单的嵌套模型：-

```
public class BillingMatrixViewModel
{
    public ICollection<BillingRateRowViewModel> BillingRateRows { get; set; }

    public BillingMatrixViewModel()
    {
        BillingRateRows = new Collection<BillingRateRowViewModel>();
    }
}

public class BillingRateRowViewModel
{
    public ICollection<BillingRate> BillingRates { get; set; }

    public BillingRateRowViewModel()
    {
        BillingRates = new Collection<BillingRate>();
    }
}

public class BillingRate
{   
  public int Id { get; set; }
  public int Rate { get; set; } 
} 
```

BillingMatrixViewModel 有一个视图：-

```
@using System.Collections
@using WIP_Data_Migration.Models.ViewModels
@model WIP_Data_Migration.Models.ViewModels.BillingMatrixViewModel

<table class="matrix" id="matrix">      
    <tbody>
        <tr>
           @Html.EditorFor(model => Model.BillingRateRows, "BillingRateRow")    
        </tr>
    </tbody>
</table> 
```

BillingRateRow 有一个名为 BillingRateRow 的编辑器模板：-

```
@using System.Collections
@model IEnumerable<WIP_Data_Migration.Models.ViewModels.BillingRateRowViewModel> 

@foreach (var item in Model)
{
    <tr>
        <td>
    @item.BillingRates.First().LabourClass.Name
    </td>
    @Html.EditorFor(m => item.BillingRates)
</tr>
} 
```

BillingRate 有一个编辑器模板：-

```
@model WIP_Data_Migration.Models.BillingRate

<td>
  @Html.TextBoxFor(model => model.Rate,
                new {style = "width: 20px"})
</td> 
```

为每个输入生成的标记是：-

```
<input name="BillingMatrix.BillingRateRows.item.BillingRates[0].Rate"    id="BillingMatrix_BillingRateRows_item_BillingRates_0__Rate" style="width: 20px;" type="text" value="0"/> 
```

请注意，BillingRate 索引的名称和 ID 属性处理得很好，但 BillingRateRows 没有索引，而是“.item”。从我的研究来看，这是因为由于 foreach 循环，上下文已经被拉出，所以循环不应该是必要的。

我想实现：-

```
<input name="BillingMatrix.BillingRateRows[0].BillingRates[0].Rate" id="BillingMatrix_BillingRateRows_0_BillingRates_0__Rate" style="width: 20px;" type="text" value="0"/> 
```

如果我将 BillingRateRow 视图更改为：-

```
@model WIP_Data_Migration.Models.ViewModels.BillingRateRowViewModel

<tr>
    @Html.EditorFor(m => Model.BillingRates)
</tr> 
```

它将抛出 InvalidOperationException，'传入字典的模型项是 System.Collections.ObjectModel.Collection [BillingRateRowViewModel] 类型，但此字典需要 BillingRateRowViewModel 类型。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:08:16.217

我在这里猜测，但这可能是因为您将模板名称传递给助手。尝试两个选项之一。重命名模板以匹配类型（即 BillingRateRows.cshtml）或在模型上使用 UIHintAttribute：

```
public class BillingMatrixViewModel
{
    [UIHint("BillingRateRow")]
    public ICollection<BillingRateRowViewModel> BillingRateRows { get; set; }
} 
```

# c# - 看不到中继器

> ID：13154963
> 
> 赞同：0
> 
> 时间：2012-10-31T09:37:36.160
> 
> 标签：c#, asp.net, repeater

我正在中继器中加载下拉菜单，但我看不到中继器。为什么我看不到它？

aspx：

```
<asp:Repeater ID="Repeater1" runat="server" onitemdatabound="Repeater1_ItemDataBound">    
    <ItemTemplate> 
       <table>
           <tr>
             <td>
               <asp:DropDownList ID="DropDownList1" runat="server">                     
                  <asp:ListItem>Select</asp:ListItem> <asp:ListItem>Left</asp:ListItem> 
                  <asp:ListItem>Right</asp:ListItem> 
                  <asp:ListItem>SubString</asp:ListItem>
               </asp:DropDownList> 
              <asp:DropDownList ID="DropDownList6" runat="server"> </asp:DropDownList> 
```

代码隐藏：

```
 protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{

        DataTable dt = new DataTable();
        dt = Common.LoadExample();
        DropDownList ddl = (DropDownList)e.Item.FindControl("DropDownList6") ;
        ddl.DataSource = dt;
        ddl.DataTextField = "Name";
        ddl.DataValueField = "Name";
        ddl.DataBind();

} 
```

// 用于加载的数据表

```
 public static DataTable LoadExample()
    {
        DBAccess objDBAccess = new DBAccess();
        DataTable dt = new DataTable();
        try
        {
            objDBAccess.AddParameter("@Name", SqlDbType.VarChar);
            dt = objDBAccess.ExecuteDataTable("usp_test");
            return dt;
        }
        catch 
        {

            return null;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:47:21.140

我认为原因是您没有检查[`ItemType`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeateritem.itemtype.aspx)，因此您遇到异常，因为标题不包含`DropDownList`但仅包含项目：

```
protected void Repeater1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {
    // This event is raised for the header, the footer, separators, and items.
    // Execute the following logic for Items and Alternating Items.
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {
        // ...
    }
} 
```

当然，中继器不可见还有其他原因。

*   `Repeater`或者它的容器控件之一是`Visible="false"`
*   它`DataSource`是空的或空的
*   你根本没有数据绑定
*   ....（没有代码很难进一步帮助）

**编辑**请不要发表评论，而是用重要信息编辑您的问题。

> 断点不在中继器项目数据绑定内 – 新手 25 分钟前

然后你没有`DataBind`它或者它`DataSource`是空的或空的。您应该向我们展示您分配数据源并调用数据绑定的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:55:26.830

这只是一个示例，让您了解事情应该如何：

在 ASPX 页面上：

```
<asp:Repeater runat="server" ID="rptrTest">
    <ItemTemplate>
        ID: <%#DataBinder.Eval(Container.DataItem, "ID")%>
        <br />
        Name: <%#DataBinder.Eval(Container.DataItem, "Name")%>
        <br />
        Select: <asp:DropDownList runat="server" ID="ddlSelect" />
        <br /><br />
    </ItemTemplate>
</asp:Repeater> 
```

在 Page_Init 上，如果您没有`"AutoEventWireUp = true"`ASPX 端，您可能希望为转发器绑定 ItemDataBound 事件：

```
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
    rptrTest.ItemDataBound +=
        new RepeaterItemEventHandler(rptrTest_ItemDataBound);
} 
```

在 Page_Load 上：

```
protected void Page_Load(object sender, EventArgs e)
{
    // This is an example, but you should get this data from database
    List<File> myObjects = new List<File>(new[]
    {
        new File { ID = 1, Name = "Foo", AListOfStrings = stringList },
        new File { ID = 2, Name = "Bar", AListOfStrings = stringList },
        new File { ID = 3, Name = "Baz", AListOfStrings = stringList },
        new File { ID = 4, Name = "Quux", AListOfStrings = stringList }
    });

    rptrTest.DataSource = myObjects;
    rptrTest.DataBind();
} 
```

在中继器的 ItemDatabound 事件上：

```
void rptrTest_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) 
    {
        // Find the DropDownList in the repeater's ItemTemplate
        // so we can manipulate it.
        DropDownList ddlSelect =
            e.Item.FindControl("ddlSelect") as DropDownList;
        if (ddlSelect == null) return;

        DataTable dt = new DataTable();
        dt = Common.LoadExample();

        ddlSelect .DataSource = dt;
        ddlSelect .DataTextField = "Name";
        ddlSelect .DataValueField = "Name";
        ddlSelect .DataBind();
    }
} 
```

# date - 如何在 Fullcalendar 中仅加载具有 2 个日期的特定月份（12 月）启用 2012 年 12 月 15 日 14 日。？

> ID：13154967
> 
> 赞同：3
> 
> 时间：2012-10-31T09:37:51.810
> 
> 标签：date, fullcalendar

我只想在 Fullcalendar 中加载**12**月，其中 2 个日期启用 2012 年 12 月 15 日 14 日。

```
var date = new Date(2012, 11);
var d = date.getDate();
var m = date.getMonth(11);
var y = date.getFullYear(); 
```

怎么可能？请帮助我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:23:02.193

我得到了答案，如何在全日历上呈现特定月份？

```
jQuery('#calendar').fullCalendar('gotoDate', new Date(2012, 11)); 
```

这将仅在全日历上呈现**12**月。

# c# - C# 打印机设置无效

> ID：13154969
> 
> 赞同：0
> 
> 时间：2012-10-31T09:38:01.910
> 
> 标签：c#, printing

在以下代码段中，我获取默认打印机设置，并使用从已从 InstalledPrinters 属性填充的组合框中选择的打印机名称覆盖 PrinterName。

然后我将副本数设置为一个小的整数值。

```
public void Print(){
        CurrentPageIndex = 0;
        PrintDocument printDoc = new PrintDocument();
        printDoc.DocumentName = "Report";
        printDoc.PrinterSettings = new PrinterSettings();
        printDoc.PrinterSettings.PrinterName = this.PrinterName;
        printDoc.PrinterSettings.Copies = this.Copies;

        if (!printDoc.PrinterSettings.IsValid)
        {
            throw new ArgumentException("PrinterSettings");
        }

        ImageDimensions = new FrameDimension(RenderedImage.FrameDimensionsList[0]);
        FrameCount = RenderedImage.GetFrameCount(ImageDimensions);

        printDoc.PrintPage += new PrintPageEventHandler(PrintPageHandler);

        printDoc.Print();
    }

    private void PrintPageHandler(object sender, PrintPageEventArgs e)
    {
        RenderedImage.SelectActiveFrame(ImageDimensions, CurrentPageIndex);
        e.Graphics.DrawImage(RenderedImage, new Point(0, 0));
        CurrentPageIndex++;
        e.HasMorePages = (CurrentPageIndex < 0);
    } 
```

当我检查行中的打印机设置时`if(!printDoc.PrinterSettings.IsValid)`，我总是认为设置无效。

我认为采用默认设置并更改打印机名称和份数应该会给我有效的 PrinterSettings。

# php - 单击“显示更多”后如何获取文件内容

> ID：13154975
> 
> 赞同：-5
> 
> 时间：2012-10-31T09:38:19.373
> 
> 标签：php, curl

我想在 Facebook 的收藏夹页面上扫描用户喜欢的内容

[http://www.facebook.com/username/favorites](http://www.facebook.com/username/favorites)

我正在使用 cURL 通过 PHP 获取文件内容，但我对获取页面中的所有数据感到厌烦，因为您需要为此单击 jquery 按钮。

**点击“显示其他页面**”按钮后有没有办法获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:05:34.650

正如 ynh 所说，使用 Web 开发工具。我这样做了，发现该链接发送了一个在页面源中可见的 AJAX 调用。尝试登录并阅读源代码......它应该看起来像这样......

```
<a rel="async" ajaxify="THE_CALL_GOES_HERE" href="#">Show Other Pages</a> 
```

（出于明显的原因，我删除了我的数据）

如果你能效仿这一点，你应该能够得到你需要的信息。

# git - Git 部署：如何回滚到我的应用程序的先前稳定版本？

> ID：13154979
> 
> 赞同：5
> 
> 时间：2012-10-31T09:38:35.000
> 
> 标签：git, workflow, rollback, git-checkout

我正在认真考虑使用 git 作为我的部署方法。目前我一个人工作，所以在我的情况下冲突不是问题。假设我按照步骤复制了一个连接我的本地主机、我的 bitbucket 帐户和我的实时服务器存储库的工作流。我一直想知道如何确保如果出现任何问题，我可以安全地回到稳定版本。

我唯一能想到的就是为每个未来的版本创建一个分支，然后签出它。如果它不正常或我有问题，我会结帐给主人。如果没问题，几天后我将分支与 master 合并，然后我将创建一个新分支。

这是合乎逻辑的吗？我搜索了很多关于这个主题的文章，但我真的无法理解其中的大部分，因为它们是针对中大型团队的，所以工作流程是不同的。我也向一些网站提出了同样的问题，但从未得到答案，很可能是因为它是一个愚蠢的问题，我真的不知道。但我在这里。在我的情况下，版本控制将如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:06:45.440

首先，我假设您在部署任何特定分支时都没有问题。

在具有一定专业性（和预算）的环境中，将有一个暂存环境，新代码将在其投入生产之前部署（在您的情况下，是实时服务器存储库）。一般来说，生产版本应该总是稳定的（提示：如果不是，你应该在它最终投入生产*之前*发现它，良好的测试实践在这里也会有所帮助）

现在，假设您最终不得不“热修复”master 以进行生产，而定期[恢复](http://gitready.com/intermediate/2009/03/16/rolling-back-changes-with-revert.html)恰好是不够的，一种方法是：

1.  将 --hard 重置为所需的提交
2.  重置（软）到主负责人（现在您的工作副本仍将来自所需的提交）
3.  暂存当前工作副本（即`git add .`）并提交它。

PS：请注意，我不经常这样做，我希望你也不要这样做，尤其是在 master

另一个警告说明：这不负责数据库备份，您将需要其他应急计划

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T09:58:32.283

请阅读这篇文章： [一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)

在我们公司，我们使用这种方法，它非常有帮助。基本上这是你已经说过的，但这也考虑到你有“master”分支来发布构建和“develop”分支，你可以将所有功能分支合并到其中，当你准备好发布新版本时，你只需将开发分支合并到 master 并创建新标签。正如我所说，阅读这篇文章，因为它帮助我创建了稳定的分支模型。

# php - 在 PHP 中根据日/周排序最受欢迎

> ID：13154980
> 
> 赞同：2
> 
> 时间：2012-10-31T09:38:42.887
> 
> 标签：php, mysql, sorting

我正在开发一个有点类似于 hulu 的网站，我正在尝试找出显示当天最受欢迎的内容以及根据点击率显示本周最受欢迎的内容的最佳方式......我唯一的方法可以想到这样做是在mysql中记录每一次点击以及时间戳，但这似乎不是最好的方法..有没有人知道更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:48:41.583

谷歌分析不会做这项工作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:06:55.250

如果您仍然使用 MySQL，则可以每小时运行一次此查询并进行一些修改：

```
INSERT INTO most_popular (day, week, content_id, created) 
    SELECT DAYOFYEAR(visited), WEEKOFYEAR(visited), content_id, NOW() 
    FROM visit_log WHERE visited > NOW() - INTERVAL 1 DAY 
```

然后用 most_popular 表做你想要的。主要思想是后台处理。

# streaming - GStreamer rtp 流到 vlc

> ID：13154983
> 
> 赞同：40
> 
> 时间：2012-10-31T09:38:46.990
> 
> 标签：streaming, gstreamer, vlc

我在弄清楚如何使用 gstreamer 创建一个简单的 rtp 流并将其显示在 vlc 上时遇到了一些麻烦。

我已经安装了 GStreamer 0.10.30 和 VLC 1.1.3。我唯一的要求是使用 MPEG4 或 H.264 编解码器。

现在，我可以通过这个简单的管道流式传输 GStreamer **videotestsrc ：**

```
gst-launch videotestsrc ! ffenc_mpeg4 ! rtpmp4vpay ! udpsink host=127.0.0.1 port=5000 
```

它输出客户端接收流所需的“上限”：

```
/GstPipeline:pipeline0/GstUDPSink:udpsink0.GstPad:sink: caps = application/x-rtp, media=(string)video, clock-rate=(int)90000, encoding-name=(string)MP4V-ES, profile-level-id=(string)1, config=(string)000001b001000001b58913000001000000012000c48d8800f50a041e1463000001b24c61766335322e3132332e30, payload=(int)96, ssrc=(uint)365697461, clock-base=(uint)390754204, seqnum-base=(uint)10399 
```

我还可以使用以下管道显示流：

```
gst-launch udpsrc uri=udp://127.0.0.1:5000 caps="application/x-rtp, media=(string)video, clock-rate=(int)90000, encoding-name=(string)MP4V-ES, profile-level-id=(string)1, config=(string)000001b001000001b58913000001000000012000c48d88007d0a041e1463000001b24c61766335322e3132332e30, payload=(int)96, ssrc=(uint)298758266, clock-base=(uint)3097828288, seqnum-base=(uint)63478" ! rtpmp4vdepay ! ffdec_mpeg4 ! autovideosink 
```

但是当我尝试使用 vlc 接收流时：

```
vlc -vvv rtp://127.0.0.1:5000 
```

我什么都得不到...

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-05T15:16:54.787

我已经解决了这个问题，它只需要一个像这样的 sdp 文件：

```
v=0
m=video 5000 RTP/AVP 96
c=IN IP4 127.0.0.1
a=rtpmap:96 MP4V-ES/90000 
```

以及 rtpmp4vpay 元素的选项“send-config=true”：

```
gst-launch videotestsrc ! ffenc_mpeg4 ! rtpmp4vpay send-config=true ! udpsink host=127.0.0.1 port=5000 
```

然后，它可以玩

```
vlc <filename>.sdp 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-08-18T07:08:45.477

如何为 H264 和新的 gstreamer (windows)

```
gst-launch-1.0 videotestsrc ! openh264enc ! rtph264pay config-interval=10 pt=96 ! udpsink host=127.0.0.1 port=5000 
```

sdp 文件：

```
v=0
m=video 5000 RTP/AVP 96
c=IN IP4 127.0.0.1
a=rtpmap:96 H264/90000 
```

对于其他编解码器，请参阅[https://en.wikipedia.org/wiki/RTP_audio_video_profile](https://en.wikipedia.org/wiki/RTP_audio_video_profile)和 RFC 链接中的相应 SDP 示例

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-14T16:06:26.843

对于你们中的一些人来说，只检查答案，而不是答案下方的评论

对于 GStreamer 1.18.xxx。ffenc_mpeg4 被重命名为 avenc_mpeg4（这让我很困惑）所以试试命令：

`gst-launch-1.0 videotestsrc ! avenc_mpeg4 ! rtpmp4vpay config-interval=1 ! udpsink host=127.0.0.1 port=5000`

关于 VLC 与戴夫的回答相同

# oracle - Oracle单表选择

> ID：13154985
> 
> 赞同：0
> 
> 时间：2012-10-31T09:38:56.880
> 
> 标签：oracle, select

我有下表。

```
id  NAME    folder_NAME
1   tom     popular
2   tom     folder2
3   peter   popular
4   peter   folder1
5   john    folder1
6   john    folder2
7   john    folder3
8   Mark    folder1
9   Mark    folder2
10  Alex    folder1 
```

如何选择没有文件夹名称“流行”的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:43:07.310

尝试这个：

```
select distinct NAME 
  from table
 where name not in (select name from table where folder_name = 'popular') 
```

但这不是最好的查询，可以编写。我更喜欢这里的 NOT EXISTS 子句。

# google-app-engine - 谷歌应用引擎 APNS

> ID：13154987
> 
> 赞同：6
> 
> 时间：2012-10-31T09:38:58.447
> 
> 标签：google-app-engine, apple-push-notifications

我正在使用 Java 中的 Google App Engine 和 JDO 为 iOS 应用程序开发服务器端，我刚刚意识到 GAE 不支持 Apple 推送通知服务，我非常沮丧。

我见过很多解决方案，例如 Urban Airship、xtify 等；但是如果我达到拥有大量用户的目的，那就太贵了。

此外，我一直在研究 Javapns 和类似的东西，但 GAE 也不支持 BouncyCastle。

我想知道在我的 GAE 服务器中是否有免费或低成本的支持 APNS 解决方案，因为我不能每月支付 200 美元。如果我的问题没有解决方案，是否可以构建另一台服务器仅用于使用 javapns 进行 Apple 推送通知，并且我的 GAE 与之交谈？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-23T02:17:05.260

我使用第 3 方库[notnoop/java-apns](https://github.com/notnoop/java-apns)。它很容易使用。您可能遇到的唯一问题是**GAE 上的线程限制，**如下面的 java 异常：

```
java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "modifyThreadGroup") 
```

该问题在 Maven 中心的[1.0.0.Beta3版本中得到解决。](http://mvnrepository.com/artifact/com.notnoop.apns/apns/1.0.0.Beta3)此拉取请求[#162](https://github.com/notnoop/java-apns/pull/162)中解释了详细解决方案。

因此，准备并向 APNs 发送推送通知的示例代码片段如下所示，解决线程限制的关键是以下`withErrorDetectionThreadFactory`方法

```
// Prepare ApnsService
ClassPathResource certificate = new ClassPathResource("aps_production.p12");

ApnsService service = null;
try {
    service = APNS.newService()
      .withErrorDetectionThreadFactory(ThreadManager.currentRequestThreadFactory()) // use GAE currentRequestThreadFactory
      .withCert(certificate.getInputStream(), certificatePassword)
      .withProductionDestination()
      .build();
} catch (InvalidSSLConfig | IOException e) {
    logger.warn("Fail to initialize APNs service");
}

// Send notification
String apnsPayload = APNS.newPayload()
    .alertBody("test alert")
    .badge(1)
    .sound("default")
    .customField("type", "general")
    .build();

service.push(<your device id>, apnsPayload); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:19:54.760

AppEngine 现在支持 Sockets，因此您现在应该可以使用稍作修改的 javapns 版本。我已经成功让 PyAPNs 在 AppEngine (python) 上工作，它使用 1.7.7 中的新 Socket 功能。

如果您有兴趣查看我的执行 APNS 的 python AppEngine 项目，请告诉我，我将编辑我的答案并附上指向它的链接。每次我在这里发布链接时，版主都会出于某种原因删除我的答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:19:52.533

由于您需要它进行聊天，因此尝试考虑从客户端本身内部发布推送通知（同时您的服务器提供您朋友的推送令牌）。它可以很好地适合您的聊天建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T19:53:57.657

确实是一个非常好的消息.... 官方支持现在在 beta 中不再可用

[http://googlecloudplatform.blogspot.in/2013/07/google-app-engine-takes-pain-out-of-sending-ios-push-notifications.html](http://googlecloudplatform.blogspot.in/2013/07/google-app-engine-takes-pain-out-of-sending-ios-push-notifications.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-27T10:25:04.907

你可以签出`java-apns-gae`。

它是一个[开源 Java APNS 库](https://github.com/ZsoltSafrany/java-apns-gae)，专为在 Google App Engine 上工作（和使用）而设计。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T11:40:42.503

There is a thread discussing this [here](http://code.google.com/p/googleappengine/issues/detail?id=1164), and you can sign up for the sockets beta [here](https://docs.google.com/a/google.com/spreadsheet/viewform?formkey=dF9QR3pnQ2pNa0dqalViSTZoenVkcHc6MQ#gid=0).

I've no idea if that will let you do what you want to do, but the people on the latter thread seem to think it will.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-07T06:30:37.303

Google 正式支持 iOS 推送通知。你可以看看这个示例代码：[ios-push-notification-sample-backend-java](https://github.com/GoogleCloudPlatform/solutions-ios-push-notification-sample-backend-java)和谷歌的帖子：[谷歌应用引擎让发送 ios 推送通知很痛苦](http://googlecloudplatform.blogspot.com/2013/07/google-app-engine-takes-pain-out-of-sending-ios-push-notifications.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-28T19:19:52.333

Appengine 现在在 1.7.7 中支持套接字，因此您可以使用 APNS。java 运行时可以使用 java-apns 库，只需稍作修改。 [这是一篇关于所需修改的博文](http://googleappenginetutorial.blogspot.com/2013/04/java-apns-on-appengine.html)。

# android - 在 Android 中格式化 SD 卡

> ID：13154991
> 
> 赞同：0
> 
> 时间：2012-10-31T09:39:05.107
> 
> 标签：android

我想格式化 SD 卡，我正在使用以下代码。但是SD卡不能挂载。

```
public boolean formatSD() {
        boolean bool = false;
        IMountService mountService = null;
        try{
            IBinder ibi = ServiceManager.getService("mount");
            if(ibi!=null) {
                mountService = IMountService.Stub.asInterface(ibi);
                String extern_sd = Environment.getFlashStroageDirectory().getAbsolutePath();
                mountService.unmountVolume(extern_sd, true);

                Thread.sleep(4000);
                int result_format = mountService.formatVolume(extern_sd);       
                System.out.println("result_format: "+result_format);          
                if(result_format==0){
                    Thread.sleep(4000);

                    int result_mount = mountService.mountVolume(extern_sd);
                    System.out.println("result_mount:  "+ result_mount);
                }
                bool = true;
            }
        }catch(Exception e){
            System.out.println("Exception format: "+e.getMessage());
        }
        return bool;
    } 
```

有人可以告诉我我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:45:23.963

尝试这个

```
 public void wipeMemoryCard() {
    File deleteMatchingFile = new File(Environment
            .getExternalStorageDirectory().toString());
    try {
        File[] filenames = deleteMatchingFile.listFiles();
        if (filenames != null && filenames.length > 0) {
            for (File tempFile : filenames) {
                if (tempFile.isDirectory()) {
                    wipeDirectory(tempFile.toString());
                    tempFile.delete();
                } else {
                    tempFile.delete();
                }
            }
        } else {
            deleteMatchingFile.delete();
        }
    } catch (Exception e) {
        Utils.log(e.getMessage());
    }
}

private static void wipeDirectory(String name) {
    File directoryFile = new File(name);
    File[] filenames = directoryFile.listFiles();
    if (filenames != null && filenames.length > 0) {
        for (File tempFile : filenames) {
            if (tempFile.isDirectory()) {
                wipeDirectory(tempFile.toString());
                tempFile.delete();
            } else {
                tempFile.delete();
            }
        }
    } else {
        directoryFile.delete();
    }
} 
```

# algorithm - 选择具有最大点数但具有给定成本的玩家的算法

> ID：13154995
> 
> 赞同：7
> 
> 时间：2012-10-31T09:39:16.530
> 
> 标签：algorithm, data-structures

我需要一个执行以下操作的算法：

在 NBA 幻想联盟中，给出：

1.  每个玩家的平均总分
2.  每个玩家的价格
3.  工资帽

选择最佳的 9 人阵容。

举一个简单的例子，假设联盟中只有四名球员，你有 10,000 美元的工资帽，并且你想要最佳（即最高分）三人阵容。以下是平均积分和价格：

勒布朗詹姆斯：30分/场；5000 美元的
科比·布莱恩特：25 分/场；3,500 美元
德隆威廉姆斯：20 分/场；2,500 美元
Shelvin Mack：15 分/场；2,000 美元

最佳阵容将是科比、威廉姆斯和麦克，这将花费 8,000 美元并得到 60 分。

还有一个限制：程序必须为每个位置选择一定数量的球员（例如，两名控球后卫、两名得分后卫、两名小前锋、两名大前锋和一名中锋）。这就是使程序设计变得困难的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T12:45:13.513

首先，很容易看出问题的泛化是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)，并且可以立即从[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)中约简：

给定一个背包问题：`weight=W, costs_of_items=C, weight_of_items=X`，将问题简化为这个问题，不限制玩家的数量（一般化最多是`k`玩家，`k`由你选择）。

因此，我们可以得出结论，该问题没有已知的多项式时间解。

但是，我们可以开发一个基于[背包伪多项式解的解](http://en.wikipedia.org/wiki/Knapsack_problem#Dynamic_programming)。
为简单起见，假设我们仅对小前锋的数量进行了限制（可以应用答案的原则来添加更多限制）。

然后，可以使用以下递归方法解决问题：

```
if i is not a forward, same as the original knapsack, while maintaining the #forwards
    f(i,points,forwards) = max {
                f(i-1,points-C[i],forwards)
                f(i-1,points,forwards)
                           }
if i is a forward:
    f(i,points,forwards) = max {
                //We used one of the forwards if we add this forward to the team
                f(i-1,points-C[i],forwards-1) 
                f(i-1,points,forwards)
                           } 
```

基数将全为零，其中一个维度为零：（`f(0,_,_)=f(_,0,_)=0`与常规背包相同）和`f(_,_,-1)=-infnity`（无效解决方案）

答案将是`f(2,W,n)`（前锋数量为 2，如果不同，也应该更改）。`W`是工资帽，`n`是球员人数。

DP 解将自下而上填充表示递归的矩阵以获得伪多项式时间解（仅当限制条件不变时才为伪多项式）。

通过重复这个过程，并**为每个标准添加一个维度**，这个问题将通过 DP 解决方案得到最佳解决。

您将获得的复杂性是`O(B^p * W * n)`- 其中：
`B`是“分支因素” - 在您的情况下，每个位置的玩家人数+1（对于零）`B=3`。
`W`= 工资帽
`n`= 可供选择的球员人数

* * *

如果您发现最佳解决方案过于耗时，我建议您使用**启发式解决方案**，例如[爬山](http://en.wikipedia.org/wiki/Hill_climbing)或[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)，它们会尝试尽可能优化结果，但不能保证找到全局最大值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:06:08.177

使用动态规划可以轻松解决这个问题。参考[这个](http://en.wikipedia.org/wiki/Knapsack_problem)

让`f[i][j]`我们用`j`美元与第一批`i`玩家一起获得的最高分，所以

f[i][j] = 最大{

1.  f[i - 1][j] //我们不选择第 i 个玩家
2.  f[i - 1][j - cost[i]] + point[i] //我们选择他

}

最后`f[TOTALPLAYER][MONEYCAP]`是答案。

主要思想是确定是否为每个玩家选择他。

该数组`f[][]`仅用于加速搜索过程。

顺便说一句，[乔利特](https://stackoverflow.com/users/93884/chowlett)是对的。

# php - Dreamweaver 插入行然后转到详细信息页面

> ID：13154998
> 
> 赞同：0
> 
> 时间：2012-10-31T09:39:22.920
> 
> 标签：php, insert

我正在使用 Dreamweaver，因为我还在学习 PHP。

我有一个插入表单，我希望它能够将我引导到刚刚插入的记录的详细信息页面。我过去做过这个，但是忘记了我是怎么做的，我传递了一个带有记录 ID 的 url 参数，并在详细信息页面上获取了它。

这是我的插入代码，任何帮助都会很棒。

```
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form")) {
  $insertSQL = sprintf("INSERT INTO tl_courses (course_name, course_type, course_category, price_option, price, start_date, duration, location_option, country, region, town, postcode, results, awarding, content, requirements, additional, qualification) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)",
                       GetSQLValueString($_POST['course_name'], "text"),
                       GetSQLValueString($_POST['course_type'], "text"),
                       GetSQLValueString($_POST['course_category'], "text"),
                       GetSQLValueString($_POST['price_option'], "text"),
                       GetSQLValueString($_POST['price'], "text"),
                       GetSQLValueString($_POST['start_date'], "date"),
                       GetSQLValueString($_POST['duration'], "text"),
                       GetSQLValueString($_POST['location_option'], "text"),
                       GetSQLValueString($_POST['country'], "text"),
                       GetSQLValueString($_POST['region'], "text"),
                       GetSQLValueString($_POST['town'], "text"),
                       GetSQLValueString($_POST['postcode'], "text"),
                       GetSQLValueString($_POST['results'], "text"),
                       GetSQLValueString($_POST['awarding'], "text"),
                       GetSQLValueString($_POST['content'], "text"),
                       GetSQLValueString($_POST['requirements'], "text"),
                       GetSQLValueString($_POST['additional'], "text"),
                       GetSQLValueString($_POST['qualification'], "text"));

  mysql_select_db($database_dbconnect, $dbconnect);
  $Result1 = mysql_query($insertSQL, $dbconnect) or die(mysql_error());

  $insertGoTo = "dates_adder.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
    $insertGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $insertGoTo));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:52:54.663

您将需要使用

[mysql_insert_id();](http://php.net/manual/en/function.mysql-insert-id.php)

在您的代码中，您可以添加以下内容：

```
<?php 
// other code
$Result1 = mysql_query($insertSQL, $dbconnect) or die(mysql_error());

$id = mysql_insert_id();

$insertGoTo = "dates_adder.php?id=".$id;
header('Location: '.$insertGoTo);
?> 
```

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:49:51.503

你知道你刚刚插入的记录的ID吗？如果没有，您需要编写一个 SELECT 查询来获取 ID，然后使用：

要获取 ID，请使用 mysql_insert_id() 或编写如下查询：

```
$sql = 'SELECT * FROM tl_courses WHERE course_name = "'.$_POST['course_name'].'"';
$res = mysql_query($sql);
$num = mysql_num_rows($res);

if($num == 1){
    // We've got a record.

    $row = mysql_fetch_array($res, MYSQL_ASSOC);

    $id  = $row['YOUR_ID_FIELD'];

}

header('Location: view.php?id='.$id);
exit; 
```

# jquery - jQuery 可排序交换元素改为插入

> ID：13154999
> 
> 赞同：1
> 
> 时间：2012-10-31T09:39:24.790
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我是 jQuery 的初学者，但我找不到解决方案：我正在使用带有表格的[Sortable 。](http://jqueryui.com/sortable/)但是默认的重新排序方法对我不利：我不想插入拖动的项目 - 我想交换拖动的项目和“当前”项目（鼠标指针所在的位置）。

```
 $(".timetable").sortable({
     items: "td.ora",
     sort: function(event,ui) {
            // what should I write here?
     }); 
```

我认为应该覆盖`sort`事件，但我不知道如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:45:11.007

这个问题有一个 Sortable 的解决方案（请参阅问题底部的解决方法）：

[jQuery sortable 获得 2 个被交换的元素](https://stackoverflow.com/questions/2263687/jquery-sortable-obtain-2-elements-being-swapped)

但我认为更优雅的解决方案是 Swappable 插件：

[http://www.eslinstructor.net/demo/swappable/swappable_home.html](http://www.eslinstructor.net/demo/swappable/swappable_home.html)