# StackOverflow 问答 16015000-16015999

# hibernate - 检查数据库连接是否处于休眠状态

> ID：16015001
> 
> 赞同：0
> 
> 时间：2013-04-15T12:19:53.020
> 
> 标签：hibernate

在关键数据库操作之前的 mysql 中，我正在检查与数据库的连接是否实时运行，主要是运行一个简单的查询

```
 select now() 
```

在休眠中是否有合适的替代方案，而不是从任何表中选择，而是在早期情况下选择任何通用的东西，比如当前时间，以检查与数据库的连接是否处于活动状态。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:36:40.530

这通常不是在 Hibernate 而是在连接池配置级别完成的。

例如 c3p0 有`idle_test_period`,`preferredTestQuery`和`testConnectionOnCheckout`; dbcp 有[`validationQuery`](http://commons.apache.org/proper/commons-dbcp/configuration.html)等等。

至于 SQL，我不相信存在通用的东西。但是已经为此目的有一个[类似的SO问题。](https://stackoverflow.com/questions/10684244/dbcp-validationquery-for-different-databases)

# sql - 如何从查询中删除#temp 表

> ID：16015006
> 
> 赞同：1
> 
> 时间：2013-04-15T12:20:06.040
> 
> 标签：sql

我有三个查询将数据放入各自的#temp 表中。稍后，在一次查询中，这些#temp 表再次用于获取数据。

IE

```
select {some columns} into #temp1 from {some tables} where {conditions1}
select {some other columns} into #temp2 from {some tables} where {conditions2}
select {some other columns} into #temp3 from {some tables} where {conditions3}

select {some columns from all #temp tables} from #temp1, #temp2, #temp3 where {conditions} 
```

我想摆脱这些#temp 表，并希望在没有那些#temp 表的情况下运行最后一个查询。

任何想法！！！

如何编写三个不同的函数并将所有三个查询放在这些函数中并从第三个查询调用函数！

谢谢

斋

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:12:43.517

如果您使用的是 MSSql，请使用 CTE

```
;with cte1 as (
    select {some columns} from {some tables} where {conditions1}
), 
cte2 as (
    select {some other columns} from {some tables} where {conditions2}
),
cte3 as (
    select {some other columns} from {some tables} where {conditions3}
)
select {some columns from all ctes} from cte1, cte2, cte3 where {conditions} 
```

这应该运行得更快，因为不需要将数据插入临时表。

避免使用临时表的另一个好处是，使用临时表有时会对性能产生非常糟糕的影响，因为整个 sql server 只有一个 tempdb，并且大量使用 tempdb，可能会阻塞其他查询。只是谷歌临时表和性能影响，你会发现很多关于这个主题的文章

# glimpse - 异常设置 Http 响应头 'Glimpse-RequestID'

> ID：16015011
> 
> 赞同：0
> 
> 时间：2013-04-15T12:20:12.757
> 
> 标签：glimpse

我试图让 Glimpse 在服务器上运行。此处设置 IIS 的方式是将站点映射到看似外部域，但实际上是本地 IIS 项目。Windows“hosts”文件将“site.foo.com”域映射到127.0.0.1，然后将“site.foo.com”作为绑定添加到IIS 中的站点。我提到这一点是因为它几乎肯定很重要，因为我不知道这是否意味着它显示为本地或远程请求，即使来自本地计算机上的浏览器也是如此

为了让 Glimpse 图标甚至出现在本地机器上的请求中，我更新了 web.config，忽略了一些运行时策略（因为日志抱怨这些）：

```
 <glimpse defaultRuntimePolicy="On" endpointBaseUri="~/Glimpse.axd">
    <!-- If you are having issues with Glimpse, please include this. It will help us figure out whats going on. -->
      <logging level="Trace" />
  <runtimePolicies>
    <ignoredTypes>
        <add type="Glimpse.AspNet.Policy.LocalPolicy, Glimpse.AspNet"/>
    <add type="Glimpse.Core.Policy.StatusCodePolicy, Glimpse.Core"/>
    <add type="Glimpse.Core.Policy.ContentTypePolicy, Glimpse.Core"/>
     <add type="Glimpse.Core.Policy.ControlCookiePolicy, Glimpse.Core"/>
    </ignoredTypes>
  </runtimePolicies>
  </glimpse> 
```

现在出现了图标，但是当我单击它时没有任何反应，并且日志中出现以下内容

```
2013-04-15 13:10:00.7978 | ERROR | Exception setting Http response header 'Glimpse-RequestID' with value '6991f828-b716-40b1-9362-56dfd64b6440'. | System.Web.HttpException--Server cannot append header after HTTP headers have been sent.--   at System.Web.HttpResponse.AppendHeader(String name, String value)
   at Glimpse.AspNet.AspNetFrameworkProvider.SetHttpResponseHeader(String name, String value) 
```

有什么想法我接下来需要看的吗？

谢谢

# javascript - ajax中的cufon刷新

> ID：16015015
> 
> 赞同：0
> 
> 时间：2013-04-15T12:20:22.200
> 
> 标签：javascript

单击加载更多按钮后，我试图刷新 cufon。加载更多按钮使用 ajax 来获取更多内容，因此 cufon 无法初始化。我使用 document.onmouseover 来刷新 cufon，但要做到这一点，用户需要将鼠标悬停在新加载的内容上。我想告诉的是如何在没有鼠标悬停的情况下做这个 cufon.refresh 的事情？像 document.ready ， document.load ？

```
<script type='text/javascript'>

document.onmouseover = function()
{
Cufon.refresh();
}
            ipb.forums.fetchMore = {
                                            'f': parseInt("{$this->request['showforum']}")  ,
                    'st': parseInt("{$this->request['st']}"),
                    'sort_by': "{$this->request['sort_by']}",
                    'sort_key': "{$this->request['sort_key']}",
                    'topicfilter': "{$this->request['topicfilter']}",
                    'prune_day': "{$this->request['prune_day']}",
                    'max_topics': "{$this->settings['display_max_topics']}"
                };

</script> 
```

# javascript - bbb qunit 测试

> ID：16015018
> 
> 赞同：2
> 
> 时间：2013-04-15T12:20:36.140
> 
> 标签：javascript, testing, qunit, backbone-boilerplate

我为我的项目使用主干样板并且在测试它时遇到了问题。对于测试，我使用 QUnit。例如，测试集合：

测试/index.html

```
<html>
<head>

...qunit.js, qunit.css, other libraries...

<script data-main="../../app/config" src="../../vendor/js/libs/require.js"></script>
<!-- Declare your test files to be run here -->
<script>
  QUnit.config.autostart = false;
  // Ensure you point to where your tests are, base directory is app/, which
  // is why ../test is necessary
  require({
    paths: {
      tests: "../test/qunit/tests"
    }
  }, [

    // Load the example tests, replace this and add your own tests
    // "tests/example",

    "tests/sites/collections"

  ], QUnit.start);
</script>
</head>
</html> 
```

测试/站点/collections.js

```
define(['modules/sites'], function (Sites) {
  module("module sites collection", {
    setup: function () {
      this.collection = new Sites.Collection();
    }
  });

  test("URL of sites collection.", function () {
    expect(1);
    equal(this.collection.url, 'http://bbb-example.x:8001/sites');
  });
}); 
```

我在测试部分中的 grunt.js 文件如下所示：

```
qunit: {
  all: ["test/qunit/*.html"]
}, 
```

当我打开浏览器窗口一切正常时，我看到了我的测试：

```
Tests completed in 385 milliseconds.
1 assertions of 1 passed, 0 failed. 
```

但是当我尝试在控制台中运行它时，我看到了奇怪的错误：

```
~/projects/JS-bbb-example$ bbb test
Running "qunit:all" (qunit) task
Testing index.html
<WARN> PhantomJS timed out, possibly due to a missing QUnit start() call. Use --force to continue. </WARN>

Aborted due to warnings.
>> 0 assertions passed (0ms)

Done, but with warnings. 
```

也许您知道这个问题并知道如何解决？感谢帮助。

# scala - 在编程的上下文中，“代数”是什么意思？

> ID：16015020
> 
> 赞同：351
> 
> 时间：2013-04-15T12:20:42.760
> 
> 标签：scala, haskell, functional-programming, category-theory, recursion-schemes

我在函数式编程和 PLT 圈子中多次听到“代数”这个词，尤其是在讨论对象、共单子、透镜等时。谷歌搜索这个术语会给出对这些结构进行数学描述的页面，这对我来说非常难以理解。任何人都可以解释一下余代数在编程环境中的含义，它们的意义是什么，以及它们与对象和共子的关系？

* * *

## 回答 #1

> 赞同：487
> 
> 时间：2013-04-15T18:17:28.103

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-04-15T18:18:50.453

F-algebras and F-coalgebras are mathematical structures which are instrumental in reasoning about *inductive types* (or *recursive types*).

# F-algebras

We'll start first with F-algebras. I will try to be as simple as possible.

I guess you know what is a recursive type. For example, this is a type for a list of integers:

```
data IntList = Nil | Cons (Int, IntList) 
```

It is obvious that it is recursive - indeed, its definition refers to itself. Its definition consists of two data constructors, which have the following types:

```
Nil  :: () -> IntList
Cons :: (Int, IntList) -> IntList 
```

Note that I have written type of `Nil` as `() -> IntList`, not simply `IntList`. These are in fact equivalent types from the theoretical point of view, because `()` type has only one inhabitant.

If we write signatures of these functions in a more set-theoretical way, we will get

```
Nil  :: 1 -> IntList
Cons :: Int × IntList -> IntList 
```

where `1` is a unit set (set with one element) and `A × B` operation is a cross product of two sets `A` and `B` (that is, set of pairs `(a, b)` where `a` goes through all elements of `A` and `b` goes through all elements of `B`).

Disjoint union of two sets `A` and `B` is a set `A | B` which is a union of sets `{(a, 1) : a in A}` and `{(b, 2) : b in B}`. Essentially it is a set of all elements from both `A` and `B`, but with each of this elements 'marked' as belonging to either `A` or `B`, so when we pick any element from `A | B` we will immediately know whether this element came from `A` or from `B`.

We can 'join' `Nil` and `Cons` functions, so they will form a single function working on a set `1 | (Int × IntList)`:

```
Nil|Cons :: 1 | (Int × IntList) -> IntList 
```

Indeed, if `Nil|Cons` function is applied to `()` value (which, obviously, belongs to `1 | (Int × IntList)` set), then it behaves as if it was `Nil`; if `Nil|Cons` is applied to any value of type `(Int, IntList)` (such values are also in the set `1 | (Int × IntList)`, it behaves as `Cons`.

Now consider another datatype:

```
data IntTree = Leaf Int | Branch (IntTree, IntTree) 
```

It has the following constructors:

```
Leaf   :: Int -> IntTree
Branch :: (IntTree, IntTree) -> IntTree 
```

which also can be joined into one function:

```
Leaf|Branch :: Int | (IntTree × IntTree) -> IntTree 
```

It can be seen that both of this `joined` functions have similar type: they both look like

```
f :: F T -> T 
```

where `F` is a kind of transformation which takes our type and gives more complex type, which consists of `x` and `|` operations, usages of `T` and possibly other types. For example, for `IntList` and `IntTree` `F` looks as follows:

```
F1 T = 1 | (Int × T)
F2 T = Int | (T × T) 
```

We can immediately notice that any algebraic type can be written in this way. Indeed, that is why they are called 'algebraic': they consist of a number of 'sums' (unions) and 'products' (cross products) of other types.

Now we can define F-algebra. *F-algebra* is just a pair `(T, f)`, where `T` is some type and `f` is a function of type `f :: F T -> T`. In our examples F-algebras are `(IntList, Nil|Cons)` and `(IntTree, Leaf|Branch)`. Note, however, that despite that type of `f` function is the same for each F, `T` and `f` themselves can be arbitrary. For example, `(String, g :: 1 | (Int x String) -> String)` or `(Double, h :: Int | (Double, Double) -> Double)` for some `g` and `h` are also F-algebras for corresponding F.

Afterwards we can introduce *F-algebra homomorphisms* and then *initial F-algebras*, which have very useful properties. In fact, `(IntList, Nil|Cons)` is an initial F1-algebra, and `(IntTree, Leaf|Branch)` is an initial F2-algebra. I will not present exact definitions of these terms and properties since they are more complex and abstract than needed.

Nonetheless, the fact that, say, `(IntList, Nil|Cons)` is F-algebra allows us to define `fold`-like function on this type. As you know, fold is a kind of operation which transforms some recursive datatype in one finite value. For example, we can fold a list of integer into a single value which is a sum of all elements in the list:

```
foldr (+) 0 [1, 2, 3, 4] -> 1 + 2 + 3 + 4 = 10 
```

It is possible to generalize such operation on any recursive datatype.

The following is a signature of `foldr` function:

```
foldr :: ((a -> b -> b), b) -> [a] -> b 
```

Note that I have used braces to separate first two arguments from the last one. This is not real `foldr` function, but it is isomorphic to it (that is, you can easily get one from the other and vice versa). Partially applied `foldr` will have the following signature:

```
foldr ((+), 0) :: [Int] -> Int 
```

We can see that this is a function which takes a list of integers and returns a single integer. Let's define such function in terms of our `IntList` type.

```
sumFold :: IntList -> Int
sumFold Nil         = 0
sumFold (Cons x xs) = x + sumFold xs 
```

We see that this function consists of two parts: first part defines this function's behavior on `Nil` part of `IntList`, and second part defines function's behavior on `Cons` part.

Now suppose that we are programming not in Haskell but in some language which allows usage of algebraic types directly in type signatures (well, technically Haskell allows usage of algebraic types via tuples and `Either a b` datatype, but this will lead to unnecessary verbosity). Consider a function:

```
reductor :: () | (Int × Int) -> Int
reductor ()     = 0
reductor (x, s) = x + s 
```

It can be seen that `reductor` is a function of type `F1 Int -> Int`, just as in definition of F-algebra! Indeed, the pair `(Int, reductor)` is an F1-algebra.

Because `IntList` is an initial F1-algebra, for each type `T` and for each function `r :: F1 T -> T` there exist a function, called *catamorphism* for `r`, which converts `IntList` to `T`, and such function is unique. Indeed, in our example a catamorphism for `reductor` is `sumFold`. Note how `reductor` and `sumFold` are similar: they have almost the same structure! In `reductor` definition `s` parameter usage (type of which corresponds to `T`) corresponds to usage of the result of computation of `sumFold xs` in `sumFold` definition.

Just to make it more clear and help you see the pattern, here is another example, and we again begin from the resulting folding function. Consider `append` function which appends its first argument to second one:

```
(append [4, 5, 6]) [1, 2, 3] = (foldr (:) [4, 5, 6]) [1, 2, 3] -> [1, 2, 3, 4, 5, 6] 
```

This how it looks on our `IntList`:

```
appendFold :: IntList -> IntList -> IntList
appendFold ys ()          = ys
appendFold ys (Cons x xs) = x : appendFold ys xs 
```

Again, let's try to write out the reductor:

```
appendReductor :: IntList -> () | (Int × IntList) -> IntList
appendReductor ys ()      = ys
appendReductor ys (x, rs) = x : rs 
```

`appendFold` is a catamorphism for `appendReductor` which transforms `IntList` into `IntList`.

So, essentially, F-algebras allow us to define 'folds' on recursive datastructures, that is, operations which reduce our structures to some value.

# F-coalgebras

F-coalgebras are so-called 'dual' term for F-algebras. They allow us to define `unfolds` for recursive datatypes, that is, a way to construct recursive structures from some value.

Suppose you have the following type:

```
data IntStream = Cons (Int, IntStream) 
```

This is an infinite stream of integers. Its only constructor has the following type:

```
Cons :: (Int, IntStream) -> IntStream 
```

Or, in terms of sets

```
Cons :: Int × IntStream -> IntStream 
```

Haskell allows you to pattern match on data constructors, so you can define the following functions working on `IntStream`s:

```
head :: IntStream -> Int
head (Cons (x, xs)) = x

tail :: IntStream -> IntStream
tail (Cons (x, xs)) = xs 
```

You can naturally 'join' these functions into single function of type `IntStream -> Int × IntStream`:

```
head&tail :: IntStream -> Int × IntStream
head&tail (Cons (x, xs)) = (x, xs) 
```

Notice how the result of the function coincides with algebraic representation of our `IntStream` type. Similar thing can also be done for other recursive data types. Maybe you already have noticed the pattern. I'm referring to a family of functions of type

```
g :: T -> F T 
```

where `T` is some type. From now on we will define

```
F1 T = Int × T 
```

Now, *F-coalgebra* is a pair `(T, g)`, where `T` is a type and `g` is a function of type `g :: T -> F T`. For example, `(IntStream, head&tail)` is an F1-coalgebra. Again, just as in F-algebras, `g` and `T` can be arbitrary, for example,`(String, h :: String -> Int x String)` is also an F1-coalgebra for some h.

Among all F-coalgebras there are so-called *terminal F-coalgebras*, which are dual to initial F-algebras. For example, `IntStream` is a terminal F-coalgebra. This means that for every type `T` and for every function `p :: T -> F1 T` there exist a function, called *anamorphism*, which converts `T` to `IntStream`, and such function is unique.

Consider the following function, which generates a stream of successive integers starting from the given one:

```
nats :: Int -> IntStream
nats n = Cons (n, nats (n+1)) 
```

Now let's inspect a function `natsBuilder :: Int -> F1 Int`, that is, `natsBuilder :: Int -> Int × Int`:

```
natsBuilder :: Int -> Int × Int
natsBuilder n = (n, n+1) 
```

Again, we can see some similarity between `nats` and `natsBuilder`. It is very similar to the connection we have observed with reductors and folds earlier. `nats` is an anamorphism for `natsBuilder`.

Another example, a function which takes a value and a function and returns a stream of successive applications of the function to the value:

```
iterate :: (Int -> Int) -> Int -> IntStream
iterate f n = Cons (n, iterate f (f n)) 
```

Its builder function is the following one:

```
iterateBuilder :: (Int -> Int) -> Int -> Int × Int
iterateBuilder f n = (n, f n) 
```

Then `iterate` is an anamorphism for `iterateBuilder`.

# Conclusion

So, in short, F-algebras allow to define folds, that is, operations which reduce recursive structure down into a single value, and F-coalgebras allow to do the opposite: construct a [potentially] infinite structure from a single value.

In fact in Haskell F-algebras and F-coalgebras coincide. This is a very nice property which is a consequence of presence of 'bottom' value in each type. So in Haskell both folds and unfolds can be created for every recursive type. However, theoretical model behind this is more complex than the one I have presented above, so I deliberately have avoided it.

Hope this helps.

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-04-15T12:53:28.063

阅读教程论文*[A tutorial on (co)algebras and (co)induction](http://www.cs.ru.nl/~bart/PAPERS/JR.pdf)*应该让您对计算机科学中的 co-algebra 有所了解。

下面引用它来说服你，

> 一般而言，某种编程语言中的程序操作数据。在过去几十年计算机科学的发展过程中，很明显需要对这些数据进行抽象描述，例如，以确保一个程序不依赖于它所操作的数据的特定表示。此外，这种抽象性有助于正确性证明。
> 这种愿望导致在计算机科学中使用代数方法，在一个称为代数规范或抽象数据类型理论的分支中。研究的对象是数据类型本身，使用代数中熟悉的技术概念。计算机科学家使用的数据类型通常是从​​给定的（构造函数）操作集合中生成的，正因为如此，代数的“初始性”发挥了如此重要的作用。
> 标准代数技术已被证明可用于捕获计算机科学中使用的数据结构的各个基本方面。但事实证明，用代数方式描述计算中出现的一些固有的动态结构是很困难的。这种结构通常涉及状态的概念，它可以通过各种方式进行转换。这种基于状态的动态系统的正式方法通常使用自动机或转换系统，作为经典的早期参考。
> 在过去的十年中，这种基于状态的系统不应被描述为代数，而应被描述为所谓的余代数，这一观点逐渐加深。这些是代数的形式对偶，在本教程中将更加精确。代数的“初始性”的双重性质，即最终性，对于这种协代数来说是至关重要的。这种最终的协代数所需要的逻辑推理原则不是归纳而是协归纳。

* * *

**前奏，关于范畴论。** 范畴论应该是函子的重命名论。因为类别是定义函子必须定义的。（此外，为了定义自然变换，必须定义函子。）

**什么是函子？** 这是从一组到另一组的转换，保留了它们的结构。（有关更多详细信息，网上有很多很好的描述）。

**什么是 F 代数？** 这是函子的代数。这只是对函子的普遍适用性的研究。

**它如何与计算机科学联系起来？** 程序可以被视为一组结构化的信息。程序的执行对应于对这组结构化信息的修改。执行应该保留程序结构听起来不错。然后可以将执行视为函子在这组信息上的应用。（定义程序的那个）。

**为什么是 F-协代数？** 程序本质上是双重的，因为它们是由信息描述的，并且它们会根据信息采取行动。那么主要是编写程序并使其更改的信息可以通过两种方式查看。

*   可以定义为程序正在处理的信息的数据。
*   状态，可以定义为程序共享的信息。

那么在这个阶段，我想说的是，

*   F-代数是研究作用于数据宇宙（定义在这里）的函子变换。
*   F-协代数是研究作用于状态宇宙的泛函变换（如这里定义的那样）。

在程序的生命周期中，数据和状态共存，它们相互补充。他们是双重的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-02T18:49:55.587

I'll start with stuff that is obviously programming-related and then add on some mathematics stuff, to keep it as concrete and down-to-earth as I can.

* * *

## Let's quote some computer-scientists on coinduction…</h2>

[http://www.cs.umd.edu/~micinski/posts/2012-09-04-on-understanding-coinduction.html](http://www.cs.umd.edu/~micinski/posts/2012-09-04-on-understanding-coinduction.html)

> ### Induction is about finite data, co-induction is about infinite data.
> 
> The typical example of infinite data is the type of a lazy list (a stream). For example, lets say that we have the following object in memory:

```
 let (pi : int list) = (* some function which computes the digits of
 π. *) 
```

> The computer can’t hold all of π, because it only has a finite amount of memory! But what it can do is hold a finite program, which will produce any arbitrarily long expansion of π that you desire. As long as you only use finite pieces of the list, you can compute with that infinite list as much as you need.
> 
> However, consider the following program:

```
let print_third_element (k : int list) =   match k with
     | _ :: _ :: thd :: tl -> print thd

 print_third_element pi 
```

> This program should print the third digit of pi. But in some languages, any argument to a function is evaluated before being passed into a function (strict, not lazy, evaluation). If we use this reduction order, then our above program will run forever computing the digits of pi before it can be passed to our printer function (which never happens). Since the machine does not have infinite memory, the program will eventually run out of memory and crash. This might not be the best evaluation order.

[http://adam.chlipala.net/cpdt/html/Coinductive.html](http://adam.chlipala.net/cpdt/html/Coinductive.html)

> In lazy functional programming languages like Haskell, infinite data structures are everywhere. Infinite lists and more exotic datatypes provide convenient abstractions for communication between parts of a program. Achieving similar convenience without infinite lazy structures would, in many cases, require acrobatic inversions of control flow.

[http://www.alexandrasilva.org/#/talks.html](http://www.alexandrasilva.org/#/talks.html) ![examples of coalgebras by Alexandra Silva](https://i.stack.imgur.com/qAvd9.png)

* * *

## Relating the ambient mathematical context to usual programming tasks

### What is "an algebra"?

Algebraic structures generally look like:

1.  Stuff
2.  What the stuff can do

This should sound like objects with 1\. properties and 2\. methods. Or even better, it should sound like type signatures.

Standard mathematical examples include monoid ⊃ group ⊃ vector-space ⊃ "an algebra". Monoids are like automata: sequences of verbs (eg, `f.g.h.h.nothing.f.g.f`). A `git` log that always adds history and never deletes it would be a monoid but not a group. If you add inverses (eg negative numbers, fractions, roots, deleting accumulated history, un-shattering a broken mirror) you get a group.

Groups contain things that can be added or subtracted together. For example `Duration`s can be added together. (But `Date`s cannot.) Durations live in a vector-space (not just a group) because they can also be scaled by outside numbers. (A type signature of `scaling :: (Number,Duration) → Duration`.)

Algebras ⊂ vector-spaces can do yet another thing: there’s some `m :: (T,T) → T`. Call this "multiplication" or don't, because once you leave `Integers` it’s less obvious what "multiplication" (or ["exponentiation"](https://www.quora.com/Why-is-exponentiation-so-much-more-applicable-to-the-real-world-than-tetration "Which might seem like a «free cheat» to define multiplication, if you already had addition.")) should be.

(This is why people look to (category-theoretic) universal properties: to tell them what multiplication should *do* or *be like*:

![universal property of product](https://upload.wikimedia.org/wikipedia/commons/thumb/8/89/CategoricalProduct-03.svg/400px-CategoricalProduct-03.svg.png) )

* * *

### Algebras → Coalgebras

Comultiplication is easier to define in a way that feels non-arbitrary, than is multiplication, because to go from `T → (T,T)` you can just repeat the same element. ("diagonal map" – like diagonal matrices/operators in spectral theory)

Counit is usually the trace (sum of diagonal entries), although again what's important is what your counit *does*; `trace` is just a good answer for matrices.

The reason to look at a [dual space](https://terrytao.wordpress.com/2010/06/25/the-uncertainty-principle/), in general, is because it's easier to think in that space. For example it's sometimes easier to think about a normal vector than about the plane it's normal to, but you can control planes (including hyperplanes) with vectors (and now I'm speaking of the familiar geometric vector, like in a ray-tracer).

* * *

### Taming (un)structured data

Mathematicians might be modelling something fun like [TQFT's](//www.math.toronto.edu/drorbn/papers/Cobordism/Cobordism.pdf), whereas programmers have to wrestle with

*   dates/times (`+ :: (Date,Duration) → Date`),
*   places (`Paris` ≠ `(+48.8567,+2.3508)`! It's a shape, not a point.),
*   unstructured JSON which is supposed to be consistent in some sense,
*   wrong-but-close XML,
*   incredibly complex GIS data which should satisfy loads of sensible relations,
*   regular expressions which *meant* something to you, but mean considerably less to perl.
*   CRM that should hold all the executive's phone numbers and villa locations, his (now ex-) wife and kids' names, birthday and all the previous gifts, each of which should satisfy "obvious" relations (obvious to the customer) which are incredibly hard to code up,
*   .....

Computer scientists, when talking about coalgebras, usually have set-ish operations in mind, like Cartesian product. I believe this is what people mean when they say like "Algebras are coalgebras in Haskell". But to the extent that programmers have to model complex data-types like `Place`, `Date/Time`, and `Customer`—and make those models look as much like the real world (or at least the end-user's view of the real world) as possible—I believe duals, could be useful beyond only set-world.

# javascript - WebRTC：如何在提供和回答后添加流？

> ID：16015022
> 
> 赞同：27
> 
> 时间：2013-04-15T12:20:57.947
> 
> 标签：javascript, webrtc

我正在开发 webRTC 视频通话。我成功实现了数据通道。现在我想将视频流添加到同一个对等连接。

我已经读过应该在回答和提议之前添加流。有没有办法在回答或提供后添加流？

如果我在提供或回答之前添加了流，我如何停止流并在需要时重新开始？

维护这么多流会有什么问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-09T11:24:11.030

要在创建完整信令后添加流，对等连接应与流**重新协商。**

```
pc1.addstream(stream) 
```

然后再次创建报价并将其发送给其他 Peer。

远程对等方将添加流并发送应答 SDP。

要停止流：

```
stream.stop();
pc1.removeStream(stream); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-06T18:57:18.690

根据我的经验，Konga Raju 的建议没有奏效。我无法发送“更新的报价”并让视频流真正发生。

我发现这一系列事件适用于我的情况，我希望将视频从对等点 1 流式传输到对等点 2。

1.  为对等方建立某种方式来交换消息。（可悲的是，人们如何实现这一点的差异使得不同的 WebRTC 代码示例如此不可通约。）
2.  在每一侧，为重要的信号事件设置处理程序。（有些人报告说您需要在特殊时间创建这些处理程序，但我没有发现这种情况。）有 3 个基本事件：
    *   从另一端发送的冰候选人 ==>`addIceCandidate`与它通话
    *   报价消息 ==> `SetRemoteDescription`& 回答 & 发送
    *   回复消息===>`SetRemoteDescription`
3.  在每一端，使用我们关心的事件处理程序创建 peerconnection 对象：onicecandidate、onremovestream、onaddstream 等。
    *   ice 候选者从 peerconnection 对象中弹出 ===> 将其发送到另一端
4.  当两个对等点都存在并且所有处理程序都到位时，对等点 1 会收到某种触发消息以开始视频捕获（`getUserMedia`调用）
5.  一旦`getUserMedia`成功，我们就有了一个流。调用`addStream`对等连接对象。
6.  然后对等方 1 提出要约
7.  由于我们之前设置的处理程序，peer 2 发送了一个答案
8.  与此同时（并且相当不透明），对等连接对象开始产生候选冰。它们在两个对等点之间来回发送并处理（上面的步骤 2 和 3）
9.  由于 2 个条件，流式传输本身不透明地开始：
    *   提供/回答交换
    *   接收、交换和处理的ICE候选人

在第 9 步之后我还没有找到添加视频的方法。当我想更改某些内容时，我会回到第 3 步。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-08-13T05:57:18.907

MediaStream 应该首先添加到 peerconnection 中，然后才能交换 offer、answer、candidates。如果调用了 onAddStream() ，则表示您正在接收远程视频。

# java - 为什么 user.home 返回“\”而不是“/”？

> ID：16015026
> 
> 赞同：0
> 
> 时间：2013-04-15T12:21:10.813
> 
> 标签：java, windows

也许你们中的一些人会告诉我错误在哪里，因为我在上面坐了几个小时并没有看到任何东西。

程序应检查是否`if`可以在 txt 文件中找到并将其返回到底部。

关于 user.home 的第二个问题当我使用它时，当我设置程序的路径开始查找我的文件时，`"C: \ Users \ Daniel / test / Test.java"`程序无法工作，但我不能让它像必须由:(`"C :/ Users / Daniel / test / Test.java"``.txt``user.home`

```
public class Main {

      public static void main(String ... args) throws Exception  {
      String usrHome = System.getProperty("user.home");
      Finder finder = new Finder(usrHome + "/Testy/Test.java");
      int nif = finder.getIfCount();
      System.out.println("Number found 'if'": " + nif);
      }
} 
```

和查找器类：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class Finder {
String file;
Finder(String file){
        file = this.file;
}

int getIfCount() throws FileNotFoundException{  
    int count = 0;  String tmp; String lf = "if";

    Scanner sc = new Scanner (new File("C:/Users/Daniel/Testy/Test.java"));
        while(sc.hasNext()){
            tmp = sc.next();
            System.out.println(tmp); //to check if it works correctly
            if(tmp == lf){
                count++;
            }
        }

        sc.close();

    return count;
}

} 
```

结果应如下所示：

找到的数字“如果”：3

因为有三个这样的元素，虽然结果总是0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:27:23.543

> 结果始终为 0

因为你使用`==`with ，所以在比较两个时`String`尝试使用`equals()``string`

```
 if (tmp.equals(lf)) {
          count++;
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:31:23.577

进行文件名连接的更好方法是：

```
File home = new File(System.getProperty("user.home"));
File file = new File(home, "Testy/Test.java");
/* Or even ...
File file = new File(new File(home, "Testy"), "Test.java");
*/
Finder finder = new Finder(file); 
```

这避免了需要了解平台路径名表示。

错误计数问题是由基本的 Java 101 错误引起的。您正在使用 '==' 来比较字符串。它（通常）不起作用。使用`String.equals(...)`.

# c++ - 与以值作为参数的普通函数相比，函子的独特之处是什么

> ID：16015027
> 
> 赞同：1
> 
> 时间：2013-04-15T12:21:12.690
> 
> 标签：c++, c++11, functor

我是这个概念的新手，但是当我搜索差异时，仿函数的好处是它们能够在内部存储值并从构造中初始化这些值，但是普通函数也以相同的方式工作，除了它们将所有参数作为一个整体在函数调用中。很可能我在某些方面是错误的，但函子与正常函数相关的技巧和好处在哪里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:29:02.990

核心区别在于函子定义的是类型而不是函数。即使是无状态函子（没有任何附加数据）也可以利用这一点。例如考虑使用`std::less`内部排序算法：

```
template <typename Iterator, typename Comparator>
sort(Iterator begin, Iterator end, Comparator c) {
...
   if (c(*begin,*end)) { ...
...
} 
```

称为`sort(v.begin(), v.end(), std::less<int>());`. 调用该函数时，`std::less<int>`会创建一个实例并将其传递给模板。因为它是无状态的，所以传递函数的成本几乎为零。在函数内部，调用`c(a,b)`被确定为对 的调用`c.operator()(a,b)`，并且编译器知道类型。它可以有效地内联调用（在这种情况下很简单）并用单个比较指令替换它。

另一方面，等效的 C 函数`qsort`采用函数指针（不能按值传递函数）。在内部`qsort`，编译器不知道调用的函数是什么，也不能内联，所以每次比较都必须执行一次函数调用。

函子既可以添加额外的信息，以后可以在调用的地方使用（这对于普通函数来说是不可能的），也可以传递额外的信息，比如提供需要调用的信息（可以获得相同的行为，但是对性能有影响）或其他附加信息（类型可以有嵌套类型/类型定义，用于特征检查的信息......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:27:14.627

普通函数，独立的或成员的，只有它们的参数将在调用函数时传递。所以没有办法将额外的数据传递给函数。

这与函子不同。仿函数是对象的实例，因此确实可以存储传递给其构造函数的数据（在传递仿函数时使用）。

对于 C++11，事情有点混乱，因为 lambdas 还可以通过使用捕获来“存储”（技术上不正确的词）值。或者通过使用[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)which 允许您在实际调用可调用对象时将值绑定为参数。

# c# - 打开 Excel 文件时出现异常

> ID：16015029
> 
> 赞同：5
> 
> 时间：2013-04-15T12:21:17.020
> 
> 标签：c#, office-interop, excel-interop

我有一个 Excel 文件，它在手动打开时出错：

`excel found unreadable content in *****.xlsx. Do you want to recover the content of this workbook? If you trust this workbook click yes.`

如果我点击是，我可以用通常的方式打开它，但如果我使用：

```
Excel.Application oExcelApp;
Excel.Workbook excelWorkbook = oExcelApp.Workbooks.Open(workbookPath, 0, false, 5, "", "", false, Excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false); 
```

我收到一个 COMException：

`Exception from HRESULT: 0x800A03EC`

如何处理这个异常。如何使其打开或显示每次手动打开时都会显示的错误。

我正在使用 MS Office 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-13T15:22:04.993

尝试将第 4 个参数类型更改为 XlFileFormat（枚举）并选择合适的值（[枚举描述](http://msdn.microsoft.com/en-us/library/office/ff198017(v=office.15).aspx)）。也许 5 （枚举中的***xlWK1***值）是错误的......

例如

```
Excel.Application oExcelApp;
Excel.Workbook excelWorkbook = oExcelApp.Workbooks.Open(workbookPath, 0, false, Excel.XlFileFormat.xlWorkbookDefault, "", "", false, Excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false); 
```

# php - crontab 没有正确运行 php 脚本

> ID：16015030
> 
> 赞同：2
> 
> 时间：2013-04-15T12:21:18.230
> 
> 标签：php, ubuntu, cron, crontab

我正在尝试运行基于 SendGrid 和 cron 的自动邮件服务。我已经尝试了所有可能的组合来使 PHP 解释器运行我的脚本，虽然 cron 日志说该作业每分钟执行一次，但我定义的日志文件仍然是空的，并且没有收到任何电子邮件，但是当我通过浏览器访问页面时，一切正常。

mydev.com 是我在我的机器上使用的虚拟主机，我没有对 php 配置进行任何更改（最大执行时间等）。

另外，我在网上做了研究，我安装了 php5-cli，以及所有需要的依赖项。

下面是我在终端中输入 sudo crontab -e 后添加到 cron 文件中的行：

```
* * * * * php /var/www/mydev/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null
* * * * * /usr/bin/php /var/www/mydev/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null
* * * * * /usr/bin/php http://mydev.com/dev/mailServiceTest.php   >> /var/www/mydev/CRON_LOG.txt 2> /dev/null

* * * * * /usr/bin/lynx http://mydev.com/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null 
```

这是 cron 日志的输出：

```
Apr 15 15:13:01 oleg-Lenovo-G580 CRON[8948]: (root) CMD (/usr/bin/php http://mydev.com/dev/mailServiceTest.php   >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:13:01 oleg-Lenovo-G580 CRON[8947]: (root) CMD (php /var/www/mydev/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:13:01 oleg-Lenovo-G580 CRON[8949]: (root) CMD (/usr/bin/php /var/www/mydev/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:13:01 oleg-Lenovo-G580 CRON[8953]: (root) CMD (/usr/bin/lynx http://mydev.com/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:14:01 oleg-Lenovo-G580 CRON[8964]: (root) CMD (/usr/bin/lynx http://mydev.com/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:14:01 oleg-Lenovo-G580 CRON[8966]: (root) CMD (php /var/www/mydev/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:14:01 oleg-Lenovo-G580 CRON[8965]: (root) CMD (/usr/bin/php http://mydev.com/dev/mailServiceTest.php   >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:14:01 oleg-Lenovo-G580 CRON[8970]: (root) CMD (/usr/bin/php /var/www/mydev/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:15:01 oleg-Lenovo-G580 CRON[8992]: (root) CMD (/usr/bin/php /var/www/mydev/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:15:01 oleg-Lenovo-G580 CRON[8994]: (root) CMD (php /var/www/mydev/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:15:01 oleg-Lenovo-G580 CRON[8993]: (root) CMD (/usr/bin/php http://mydev.com/dev/mailServiceTest.php   >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:15:01 oleg-Lenovo-G580 CRON[8998]: (root) CMD (/usr/bin/lynx http://mydev.com/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:16:01 oleg-Lenovo-G580 CRON[9009]: (root) CMD (/usr/bin/php /var/www/mydev/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:16:01 oleg-Lenovo-G580 CRON[9011]: (root) CMD (php /var/www/mydev/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:16:01 oleg-Lenovo-G580 CRON[9012]: (root) CMD (/usr/bin/lynx http://mydev.com/dev/mailServiceTest.php >> /var/www/mydev/CRON_LOG.txt 2> /dev/null)
Apr 15 15:16:01 oleg-Lenovo-G580 CRON[9010]: (root) CMD (/usr/bin/php http://mydev.com/dev/mailServiceTest.php   >> /var/www/mydev/CRON_LOG.txt 2> /dev/null) 
```

任何帮助深表感谢！。

O。

编辑：

下面是应该执行的代码：

```
<?php
require_once($_SERVER['DOCUMENT_ROOT'] . '/classes/mailingService.php');

$myMail = new mailingService();
$myMail->execute();
$myMail->outputDuration();

?> 
```

现在，即使我添加 'echo 1;' 在文件的开头或结尾处，没有什么变化，并且输出文件 CRON_LOG.txt 保持为空

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:33:28.003

$_SERVER['DOCUMENT_ROOT'] - 它是网络服务器的变量。CRON 在执行脚本时不使用 apache。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:36:58.217

> *   *   *   *   *   php /var/www/mydev/dev/mailServiceTest.php

'php' 在 cron 守护进程的路径中吗？

> *   *   *   *   *   /usr/bin/php /var/www/mydev/dev/mailServiceTest.php

更好（您是否确认这是 php 的正确路径？

大多数情况下，这是有道理的——但如果您需要以每分钟一次的频率运行*任何*命令，那么通过 cron 运行它远非理想的解决方案。

> 我的脚本使用 DOCUMENT_ROOT SERVER 超级全局

但这对于 CLI SAPI 来说毫无意义/为空

> *   *   *   *   *   /usr/bin/php[http://mydev.com/dev/mailServiceTest.php](http://mydev.com/dev/mailServiceTest.php)

这*不会像*你期望的那样。

> *   *   *   *   *   /usr/bin/lynx[http://mydev.com/dev/mailServiceTest.php](http://mydev.com/dev/mailServiceTest.php)

可能有效，但 lynx 旨在作为用户驱动的浏览器，甚至可能不会在这种情况下启动 - wget 或 curl 会更好。

从 cron 日志来看，crond 正在做它应该做的事情。

您丢弃 STDERR 意味着您看不到很多错误消息。而且你也没有写任何对 STDOUT 有用的东西。目标日志文件的时间戳是否正在更新？

您是安装 crontab 文件还是只是编辑它？

如果您需要 DOCUMENT_ROOT，那么您需要通过 HTTP 访问脚本 - 检查您的系统是否可以解析它自己的名称并使用 wget 或 curl（即`wget http://mydev.com/dev/mailServiceTest.php`从 ssh 会话尝试）。

# android - 在 Android 应用程序的 API 级别 4 中使用 HttpClient 和 httpget 进行身份验证

> ID：16015031
> 
> 赞同：0
> 
> 时间：2013-04-15T12:21:26.513
> 
> 标签：android, authentication, request, httpclient, http-get

我想在具有 api 级别 4、HttpClient 和 httpGet 的 android 应用程序上发出一个带有身份验证的请求。

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response;
    String responseString = null;

    try {
        HttpGet httpGet = new HttpGet(uri);
        httpGet.addHeader("referer","http://url.com");
        response = httpclient.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            response.getEntity().writeTo(out);
            out.close();
            responseString = out.toString();
        } else {
            response.getEntity().getContent().close();
        }
    } catch (Exception e) {
        return null;
    }

    return responseString; 
```

我测试了各种解决方案，它不起作用！也许我做错了！在 IOS 上它不是很安全，但它适用于：`login:pass@url.com`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:29:14.540

```
http://www.vogella.com/blog/2012/02/22/android-strictmode-networkonmainthreadexception/ 
```

选择异步任务，或者你可以选择这种方式也给上面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:22:53.093

这行得通！

```
 DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpResponse response;
    String responseString = null;

    String username = "username";
    String password = "password";
    String host = "url.com";
    String ur = uri[0];

    try {
        httpclient.getCredentialsProvider().setCredentials(new AuthScope(host, AuthScope.ANY_PORT), new UsernamePasswordCredentials(username, password));
        HttpGet httpGet = new HttpGet(uri[0]);
        httpGet.addHeader("referer","http://curl.com");
        response = httpclient.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            response.getEntity().writeTo(out);
            out.close();
            Logger.e(out.toString());
            responseString = out.toString();
        } else {
            response.getEntity().getContent().close();
        }
    } catch (Exception e) {
        return null;
    }

    return responseString; 
```

# android - 安装错误：INSTALL_PARSE_FAILED_MANIFEST_MALFORMED

> ID：16015033
> 
> 赞同：6
> 
> 时间：2013-04-15T12:21:33.390
> 
> 标签：android, android-manifest, logcat

我在安装应用程序时遇到了奇怪的问题。

我已经创建`Google Map V2 example`并且工作正常。`JAVA`在所有成功之后，我已将- `XML`-文件集成`Manifest`到我的旧项目中。

当我编译我的项目时没有错误但是当我尝试启动它时显示我

`Installation error: INSTALL_PARSE_FAILED_MANIFEST_MALFORMED`错误。

我正在关注[此链接](https://developers.google.com/maps/documentation/android/start?hl=fr#specifying_permissions)以获取 Google Map V2 示例。

Logcate 很奇怪。我找不到问题。

我已经尝试了很多与事情相关的 `Installation error: INSTALL_PARSE_FAILED_MANIFEST_MALFORMED`错误，并且也遵循了该规则，但是出了点问题。

**Rnd 工作：**

[如何在我的 android 应用程序中修复 INSTALL_PARSE_FAILED_MANIFEST_MALFORMED](https://stackoverflow.com/questions/12396351/how-to-fix-install-parse-failed-manifest-malformed-in-my-android-application)

[安装错误：包含 INSTALL_PARSE_FAILED_MANIFEST_MALFORMED 代码](https://stackoverflow.com/questions/11174275/installation-error-install-parse-failed-manifest-malformed-code-included)

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/RoghZWPRK_s](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/RoghZWPRK_s)

如果我删除新的示例文件并运行旧项目，那么它运行正常。

请大家帮帮我。

**清单文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="my.pkg"
    android:versionCode="1"
    android:versionName="1.0" >

    <supports-screens
        android:largeScreens="false"
        android:normalScreens="true"
        android:smallScreens="true" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_LOGS" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_CORSE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="my.pkg.permission.MAPS_RECEIVE" />

    <permission
        android:name="my.pkg.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/app_icon"
        android:label="@string/app_name"
        android:logo="@drawable/app_icon"
        android:theme="@style/mytheme" >
        <activity
            android:name="Splash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="my.pkg.Google_Map" >
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyAULMOV1ylxC7wvEIP1hP7EeuKr1dKLaVQ" />
    </application>

</manifest> 
```

**更新 ：**

**登录**

```
04-15 17:33:37.685: E/power(1482): *** set_screen_state 1
04-15 17:33:37.692: E/SensorManager(1482): registerListener :: handle = 0  name= BMA222 delay= 60000 Listener= android.view.WindowOrientationListener$SensorEventListenerImpl@406996b8
04-15 17:33:37.692: E/SensorManager(1482): reg :: handle = 0
04-15 17:33:37.786: E/ClockWidget(17093): getOrientation portrait
04-15 17:33:37.786: E/ClockWidget(17093): drawDayText
04-15 17:33:37.786: E/ClockWidget(17093): width= 50
04-15 17:33:37.786: E/ClockWidget(17093): widthText= 58.0
04-15 17:33:37.786: E/ClockWidget(17093): RIGHT
04-15 17:33:37.810: E/Launcher(1587): setWindowOpaque()
04-15 17:33:38.692: E/StatusBarPolicy(1544): ecio: 38
04-15 17:33:38.692: E/StatusBarPolicy(1544): iconLevel: 4
04-15 17:33:40.653: E/power(1482): *** set_screen_state 0
04-15 17:33:40.653: E/SensorManager(1482): unregisterListener:: all sensors,  listener = android.view.WindowOrientationListener$SensorEventListenerImpl@406996b8
04-15 17:33:40.653: W/PowerManagerService(1482): CurLockF mPS:0 mUS=0
04-15 17:33:40.653: W/PowerManagerService(1482): type=FULL_WAKE_LOCK                 'keyguard' AW  (mS=7)  activeT=272
04-15 17:33:40.653: W/PowerManagerService(1482): mPokeLocks.size=0:
04-15 17:33:40.755: E/AndroidRuntime(27309): feature code ==> cannot open file
04-15 17:33:41.021: E/power(1482): *** set_screen_state 1
04-15 17:33:41.052: E/SensorManager(1482): registerListener :: handle = 0  name= BMA222 delay= 60000 Listener= android.view.WindowOrientationListener$SensorEventListenerImpl@406996b8
04-15 17:33:41.052: E/SensorManager(1482): reg :: handle = 0
04-15 17:33:41.146: E/Launcher(1587): setWindowOpaque()
04-15 17:33:41.169: E/ClockWidget(17093): getOrientation portrait
04-15 17:33:41.169: E/ClockWidget(17093): drawDayText
04-15 17:33:41.169: E/ClockWidget(17093): width= 50
04-15 17:33:41.169: E/ClockWidget(17093): widthText= 58.0
04-15 17:33:41.169: E/ClockWidget(17093): RIGHT
04-15 17:33:42.997: W/ActivityManager(1482): No content provider found for: 
04-15 17:33:43.817: E/StatusBarPolicy(1544): ecio: 38
04-15 17:33:43.817: E/StatusBarPolicy(1544): iconLevel: 4
04-15 17:33:46.286: E/power(1482): *** set_screen_state 0
04-15 17:33:46.286: W/PowerManagerService(1482): CurLockF mPS:0 mUS=0
04-15 17:33:46.286: W/PowerManagerService(1482): mPokeLocks.size=0:
04-15 17:33:46.294: E/SensorManager(1482): unregisterListener:: all sensors,  listener = android.view.WindowOrientationListener$SensorEventListenerImpl@406996b8
04-15 17:33:46.364: E/StatusBarPolicy(1544): ecio: 37
04-15 17:33:46.364: E/StatusBarPolicy(1544): iconLevel: 4
04-15 17:33:47.075: W/ActivityManager(1482): No content provider found for: 
04-15 17:33:51.497: E/StatusBarPolicy(1544): ecio: 36
04-15 17:33:51.497: E/StatusBarPolicy(1544): iconLevel: 4
04-15 17:33:54.060: E/StatusBarPolicy(1544): ecio: 35
04-15 17:33:54.060: E/StatusBarPolicy(1544): iconLevel: 4
04-15 17:33:56.630: E/StatusBarPolicy(1544): ecio: 33
04-15 17:33:56.630: E/StatusBarPolicy(1544): iconLevel: 4
04-15 17:34:00.005: E/ClockWidget(17093): getOrientation portrait
04-15 17:34:00.005: E/ClockWidget(17093): drawDayText
04-15 17:34:00.005: E/ClockWidget(17093): width= 50
04-15 17:34:00.005: E/ClockWidget(17093): widthText= 58.0
04-15 17:34:00.005: E/ClockWidget(17093): RIGHT
04-15 17:34:01.732: E/StatusBarPolicy(1544): ecio: 32
04-15 17:34:01.732: E/StatusBarPolicy(1544): iconLevel: 4 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-16T06:39:09.373

很难找到解决方案，因为`Logcat`说了别的。最后，我找到了上述查询的解决方案。

问题出在我的包名中：我将包名的第一个字符设置为**大写字母**，例如`Chintan.Khetiya.Package`.

一般来说，这在我的旧项目中对我有用，但是当我尝试在现有项目中实现谷歌地图代码时，**清单文件**不允许在包名称中使用**大写字母。**

所以，最后我用小写字符替换了它`chinta.khetiya.package`，并用新的包名更新了我的新谷歌地图密钥。

现在它正在工作。

所以在设置包名时要小心。[在这里查看更多](https://stackoverflow.com/questions/8075162/what-should-be-the-package-name-of-android-app/8075247#8075247)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-17T07:22:06.987

您的包名称应以小写字母开头。假设你有：

```
Com.Example.packagename 
```

将其更改为类似

```
com.example.packagename 
```

这将解决你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:54:54.123

该错误是由于您在清单文件中使用了注释。您不能在 Manifest 中使用这样的注释：

```
// new update 
```

您必须使用 XML 方式，如下所示：

```
<!-- new update --> 
```

//// 编辑：

实际上，您在声明权限之前使用了自定义权限。尝试扭转这部分：

```
<uses-permission android:name="my.pkg.permission.MAPS_RECEIVE" />

    <permission
        android:name="my.pkg.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" /> 
```

至

```
<permission
        android:name="my.pkg.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

<uses-permission android:name="my.pkg.permission.MAPS_RECEIVE" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-02T16:59:47.093

您应该添加 android:name=".Splash" 而不是 android:name="Splash"

修改代码如下:::HAPPY CODING :)

```
<activity
            android:name=".Splash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

# vb.net - 如何在 Visual Basic 中自定义“MsgBox”控件

> ID：16015035
> 
> 赞同：0
> 
> 时间：2013-04-15T12:21:40.207
> 
> 标签：vb.net, msgbox

有没有办法在 Visual Basic中自定义[MsgBox控件？](http://msdn.microsoft.com/en-us/library/139z2azd%28v=vs.90%29.aspx)

我经常使用它来提醒用户。但是它永远不会在屏幕上弹出；它只出现在底部任务栏上。它也总是有一个类似于“App_data_xxx”的标题。我可以以任何方式改善这一点吗？

我的搜索并没有提供太多帮助。

例如：

```
' Queries user number and password against the database and returns user
Dim matchingusers = From u In db.Users
                    Where username = u.Email And password = u.Password
                    Select u

' Checks if a valid user was returned
If matchingusers.Count = 0 Then
    MsgBox("Invalid user entered, try again")
Else
    SelectedDeveloper = 0
    ' Set the logged in user for use in the project
    GlobalVariables.LoggedInUser = matchingusers.First 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:22:07.437

您可以使用该`MessageBox`函数及其许多变量。这是它可以做什么的示例：

```
 MessageBox.Show("The Displayed text in the messagebox", _
         "the text displayed in the title bar", MessageBoxButtons.YesNoCancel, _
             MessageBoxIcon.Error, MessageBoxDefaultButton.Button2) 
```

或者你仍然可以`MsgBox`使用它的变量，尽管它给你的选择更少。这是一个例子：

```
MsgBox("message text", MsgBoxStyle.Information, "title bar text") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:22:10.187

您正在使用对`MessageBox`类的引用而不指定`Method`要调用的类。您不能创建一个实例，`MessageBox`因此不能将字符串作为参数传递来尝试创建一个。

用于`MessageBox.Show(string messageText)`显示`MessageBox`所需消息。

至于您的问题，您应该创建自己的`MessageBox`课程。使用此解决方案，您可以获得所需的所有选项，并且可以完全自定义它。调用会有所不同：

```
//C#
var myCustomMessageBox = new CustomMessageBox();
myCustomMessageBox.ShowDialog();

//Vb
Dim myCustomMessageBox As New CustomMessageBox()
myCustomMessageBox.ShowDialog() 
```

[ShowDialog()](http://msdn.microsoft.com/en-ca/library/c7ykbedk.aspx)将用于创建消息框的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T07:41:56.650

在 Visual Basic 2008 中，我需要一个消息框，它只能在短时间内保持打开状态，并且它的打开时间是可变的。我还有一个问题，当使用扩展屏幕时，msgbox 出现在扩展屏幕（这是一种不同的形式）而不是主计算机屏幕上。为了克服这些问题，我使用主屏幕上的表单上的面板创建了一个自定义消息框。

调用消息面板 DoMessage("The message", Seconds, Buttons to show 1 = Ok only 2 = Yes(ok) and No, 3 = Yes, No and Cancel. 如果秒为 0 或未指定，则显示时间面板设置为长时间（10000 秒） 如果未指定要显示的按钮，则仅设置为确定按钮。如果同时指定了秒和按钮，则如果未单击任何按钮，则面板将在超时后隐藏。

如果单击 Ok 或 Yes，则响应为 1，如果单击 No，则返回 2，如果单击 Cancel，则返回 3 它被放入 DoMsgResp 中，因此您可以看到其中处理响应的内容。

通过调用 MakeMsgPanel() 打开表单时创建消息面板

```
Dim MessagePanel As New Panel    'The panel 
Dim MessageLabel As New Label    'The message 
Dim MsgYes As New Button          'Yes or OK button
Dim MsgNo As New Button          'no button
Dim MsgCcl As New Button         'Cancel button
Dim Sleepsecs As Integer          'How long panel shows for 
Dim DoMsgResp As Integer         'response 1, 2 or 3 depending which button clicked
Private Sub MakeMsgPanel()
    Me.Controls.Add(MessagePanel)
    Me.MessagePanel.Controls.Add(MessageLabel)
    Me.MessagePanel.Controls.Add(MsgYes)
    Me.MessagePanel.Controls.Add(MsgNo)
    Me.MessagePanel.Controls.Add(MsgCcl)
    MessagePanel.Location = New System.Drawing.Point(Me.Width / 2 - 200, Me.Height / 2 - 100)
    MessagePanel.BackColor = Color.PaleGreen
    MessageLabel.BackColor = Color.PeachPuff
    MessagePanel.BorderStyle = BorderStyle.FixedSingle
    MessageLabel.Font = New Font("Arial", 12, FontStyle.Regular, GraphicsUnit.Point)
    MessageLabel.AutoSize = True
    MessagePanel.AutoSize = True
    MessagePanel.AutoSizeMode = Windows.Forms.AutoSizeMode.GrowOnly
    MessagePanel.Hide()
    MsgYes.Location = New System.Drawing.Point(205, 5)
    MsgNo.Location = New System.Drawing.Point(115, 5)
    MsgCcl.Location = New System.Drawing.Point(25, 5)
    MsgYes.Text = "Yes"
    MsgNo.Text = "No"
    MsgCcl.Text = "Cancel"
    AddHandler MsgYes.Click, AddressOf MsgYes_Click
    AddHandler MsgNo.Click, AddressOf MsgNo_Click
    AddHandler MsgCcl.Click, AddressOf MsgCcl_Click
End Sub

Private Sub MsgYes_Click()
    DoMsgResp = 1
    Sleepsecs = 0
End Sub

Private Sub MsgNo_Click()
    DoMsgResp = 2
    Sleepsecs = 0
End Sub
Private Sub MsgCcl_Click()
    DoMsgResp = 3
    Sleepsecs = 0
End Sub

  Private Sub DoMessage(ByVal Msg As String, Optional ByVal Secs As Integer = 0, _
           Optional ByVal Btns As Integer = 0)
    'Information messages that can be timed
    Dim TheHeight As Integer
    Dim TheWidth As Integer
    Dim Labelx As Integer
    Dim Labely As Integer
    DoMsgResp = 0
    MessageLabel.Text = Msg
    If MessageLabel.Height < 90 Then
        TheHeight = 100
        Labely = (100 - MessageLabel.Height) / 2
    Else
        TheHeight = MessageLabel.Height + 10
        Labely = 5
    End If
    If MessageLabel.Width < 140 Then
        TheWidth = 150
        Labelx = (150 - MessageLabel.Width) / 2
    Else
        TheWidth = MessageLabel.Width + 10
        Labelx = 5
    End If
    MessagePanel.Size = New System.Drawing.Size(TheWidth, TheHeight)
    MessageLabel.Location = New System.Drawing.Point(Labelx, Labely)
    MessageLabel.Show()
    MessagePanel.Show()
    MessagePanel.BringToFront()
    MsgYes.BringToFront()
    MsgNo.BringToFront()
    MsgCcl.BringToFront()
    MessagePanel.Focus()
    If Btns = 0 Or Btns > 3 Then Btns = 1 'Make ok button if none specified or number too high
    If Btns = 1 Then
        MsgYes.Text = "Ok"
        MsgNo.Hide()
        MsgCcl.Hide()
    Else    'is 2 or 3 
        MsgYes.Text = "Yes"
        MsgNo.Show()
        If Btns = 2 Then MsgCcl.Hide() Else MsgCcl.Show()
    End If
    If Secs = 0 Then Secs = 10000 'make a long time
    If Secs > 0 Then
        Sleepsecs = Secs * 2
        Do Until Sleepsecs < 1
            Threading.Thread.Sleep(500)
            Application.DoEvents()
            Application.RaiseIdle(New System.EventArgs)
            Sleepsecs = Sleepsecs - 1
        Loop
    End If
    MessagePanel.Hide()
End Sub

 Private Sub ButtonTest_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ButtonTest.Click
            DoMessage("This is To see what happens with my message" & vbCrLf & _
              "see if it works good", 0, 3)
    If DoMsgResp = 1 Then
        MsgBox("Ok was hit")
    End If
    If DoMsgResp = 2 Then
        MsgBox("No was hit")
    End If
    If DoMsgResp = 3 Then
        MsgBox("Cancel was hit")
    End If
End Sub 
```

# python - 检查列表中的数字

> ID：16015042
> 
> 赞同：-1
> 
> 时间：2013-04-15T12:21:52.530
> 
> 标签：python, python-3.x

我对为什么在 for 语句中不能有 if 语句感到困惑，

将尝试清除此问题，抱歉不清楚。

```
lists = [1,2,3,4,5,6]
userList = []
for i in range(5):
    userList.append(input("Please enter a number :"))
for L in userList:
     if L in lists:
        print("It is in it")
    else:
        print("It is NOT in it") 
```

如果 userList 中的数字在列表中，我希望它打印“它在其中”。

因此，用户在 1 到 6 之间输入的任何数字都会打印“它在里面”。

也很抱歉说python 2，我的错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:28:40.523

`input()`返回一个字符串，而不是代码中预期的 int。

用这个

```
userList.append(int(input("Please enter a number :"))) 
```

`int()`会将字符串转换为int 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:34:31.507

一个可以在 Python2.X 和 python3.x 中工作的版本……有点复杂。

```
lists = [1,2,3,4,5,6]
userList = []
for i in range(5):
    userList.append(input("Please enter a number :"))

print lists
print userList

for L in map(lambda x:int(x),userList):
    if L in map(lambda x:int(x),lists):
        print(L," is in it")
    else:
        print(L," is NOT in it") 
```

输出 ：

```
Please enter a number :1
Please enter a number :3
Please enter a number :5
Please enter a number :7
Please enter a number :8
[1, 2, 3, 4, 5, 6]
[1, 3, 5, 7, 8]
1  is in it
3  is in it
5  is in it
7  is NOT in it
8  is NOT in it 
```

它会打印出您想要的内容。

# perl - Perl 中的数组数组

> ID：16015044
> 
> 赞同：4
> 
> 时间：2013-04-15T12:21:57.593
> 
> 标签：perl, multidimensional-array

我是 Perl 的新手，但我需要它从一些糟糕的 HTML 文件中获取一些文本。在到目前为止的代码中，我已经提取了我需要的所有值（我验证它可以与数据转储器一起使用）：

对于每个数据记录，即二维表的行，它们被称为：

```
$org, $gene_name, $number, $motif_num, $pos, $strand, $seq 
```

我有很多数据条目，每一个都是一行，上面的值作为列。

以后要对它们做其他事情，我想制作一个二维数组结构，这样我就可以遍历每个条目（行）并挑选出我需要的值等等。

我认为这样做的最佳方法是使用循环，并且对于每个数据条目，在使用正则表达式匹配提取值之后，将值/列组合到单个数据记录的数组中：

```
my @seidl_array_row = ($org, $gene_name, $number, $motif_num, $pos, $strand, $seq); 
```

然后将此数组推送到完成的二维数组数组上：

```
push @seidl_array, [ @seidl_array_row ]; 
```

（@seidl_array`my`在循环之前定义。）

所以实际上我得到了一个二维数据表，其中数组@seidl_array 的每个元素都是一个包含值$org、$gene_name、$number、$motif_num、$pos、$strand 和$seq 的数组。

我是 Perl 的新手，所以我不知道这是否是以编程方式执行此操作的正确方法，因为我在稍后处理这些数据时遇到了问题。我想知道问题是否在于我最初是如何构造数组的。我书中的示例使用简单的数据集静态执行，这是一个更大的基因组数据 gtf 文件，因此静态执行并不可行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T12:36:05.693

据我所知，您的方法没有任何问题。正如 choroba 所建议的那样，使用对数组的引用而不是复制数组的好处是不会不必要地复制数据（但请记住：只有在循环**内**声明 @seidl_array_row 时才有效，否则您只需进行多次引用到同一个数组）。

您可以通过完全跳过行数组来获得同样的优势，如下所示：

```
push @seidl_array, [ $org, $gene_name, $number, $motif_num, $pos, $strand, $seq ]; 
```

为了更方便地访问数据，我经常使用哈希数组，如下所示：

```
push @seidl_array, {
    org    => $org,
    name   => $gene_name,
    number => $number,
    motif  => $motif_num,
    pos    => $pos,
    strand => $strand,
    seq    => $seq,
}; 
```

这样做的好处是您不必记住数组中各个值的位置，而是可以通过名称访问它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T12:28:34.290

您的解决方案对我来说似乎是正确的。使用`[ @seidl_array_row ]`创建列表的副本，如果您`my`在循环内正确声明了行，则可以直接存储其引用以避免不必要的复制：

```
push @seidl_array, \@seidl_array_row; 
```

# javascript - oncomplete 无法执行我的 javascript 函数

> ID：16015045
> 
> 赞同：0
> 
> 时间：2013-04-15T12:22:02.847
> 
> 标签：javascript, tags

```
 <a4j:commandButton id="save" value="save"

             action="#{objectHome.persist()}"
            rendered="#{!objectHome.managed}" 
            disabled="#{!objectHome.wired}"

          oncomplete= "myfunction(#{objectHome.instance.idd})">
              </a4j:commandButton>

            <script language="javascript" type="text/javascript">
function myfunction(x)
{ 

window.location.replace("http://localhost:8080/projet/doc.seam?ObjectIdd="+x+" "); 
}

/////and in my file.page.xml 

<navigation from-action="#{objectHome.persist()}">
      <rule if-outcome="persisted">
         <end-conversation/>
         <redirect view-id="/filepdf.xhtml"/>
      </rule>
   </navigation> 
```

问题是当我单击保存按钮时，重定向`filepdf.xml`成功但`oncomplete`无法调用`myfunction`（这是同一页面中的重定向）。

# filepicker.io - Filepicker.io 小部件 - 其他 Mimetime

> ID：16015046
> 
> 赞同：0
> 
> 时间：2013-04-15T12:22:18.203
> 
> 标签：filepicker.io

如何输入“.ZIP”和“.RAR”作为 filepicker.io 小部件允许的 mimetypes？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:08:08.667

例如，您应该使用 data-fp-extensions 属性

```
<input type="filepicker" data-fp-extensions="zip,rar"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T07:56:11.947

列出允许的 mimetype。将“应用程序/zip”添加到列表中，您就可以开始了

```
var allowedMimeTypeList =['image/*', 'text/plain', 'application/pdf','application/msword','application/vnd.ms-powerpoint','application/vnd.openxmlformats-officedocument.presentationml.presentation','application/zip'];

filepicker.pick({
          mimetypes: allowedMimeTypeList,
          //container : 'window'
          },
}); 
```

# c++ - 对ostream类和操作符的误解<<

> ID：16015051
> 
> 赞同：10
> 
> 时间：2013-04-15T12:22:40.800
> 
> 标签：c++, iostream

在查看了`ostream::operator <<`c++ 参考之后，

我注意到以下声明：

```
ostream& operator<< (bool val);
ostream& operator<< (short val);
ostream& operator<< (unsigned short val);
ostream& operator<< (int val);
ostream& operator<< (unsigned int val);
ostream& operator<< (long val);
ostream& operator<< (unsigned long val);
ostream& operator<< (float val);
ostream& operator<< (double val);
ostream& operator<< (long double val);
ostream& operator<< (void* val);
ostream& operator<< (streambuf* sb );
ostream& operator<< (ostream& (*pf)(ostream&));
ostream& operator<< (ios& (*pf)(ios&));
ostream& operator<< (ios_base& (*pf)(ios_base&)); 
```

但后来我发现还有以下声明：

```
ostream& operator<< (ostream& os, char c);
ostream& operator<< (ostream& os, signed char c);
ostream& operator<< (ostream& os, unsigned char c);
ostream& operator<< (ostream& os, const char* s);
ostream& operator<< (ostream& os, const signed char* s);
ostream& operator<< (ostream& os, const unsigned char* s); 
```

为什么字符/字符串输出运算符不是成员函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T12:29:11.580

第一组操作符是流类的成员。

大多数运算符重载，如第二组中的那些，都不是。

* * *

至于*为什么*，很可能只是历史偶然。内置类型的运算符*可以*添加到流类中，显然它们是（早在 C++ 标准化之前）。该标准仅记录了此处的现有做法。

用户定义类型的运算符显然不能添加到流类中，因此它们被实现为自由函数。

回想起来，让所有运算符都成为自由函数会更加一致，但这可能会破坏一些旧程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:57:28.060

其他人已经描述了差异，这是我对他们分裂的原因的看法。

将变体作为参数的非成员版本`char`根据目标流的基本字符类型的类型进行专门化，并根据语言环境进行处理，因为标准定义了特定的行为（`o << '1'`与 具有不同的行为`oo << 33`，如果`o`is 则必须正确处理`basic_ostream<wchar_t>`，等等）。

例如， `char`writen to`basic_ostream<wchar_t>`被扩大，而如果写入`basic_ostream<char>`它则不是（27.6.2.5.4）。所以实际上有多个重载`operator<<`，例如：

```
basic_ostream<_Elem, _Traits>& operator<<(basic_ostream<_Elem, _Traits>& _Ostr, char _Ch)
basic_ostream<char, _Traits>& <<(basic_ostream<char, _Traits>& _Ostr, char _Ch) 
```

如果它们被定义为成员函数，您将无法像那样专门化它们，因为您必须部分专门化整个类，而不仅仅是单个成员，因为标准不允许成员函数的部分专门化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:30:52.043

`operator<<`正如您所发现的，实际上有两个过载者家族。

一个族是重载成员（隐式`ostream::operator<<`获取引用作为指针），另一个族是重载自由函数，它显式获取引用作为参数。`ostream``this``operator<<``ostream`

当您想为自己的类添加流式传输功能时，您可以添加一个免费功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-23T09:27:56.563

operator<< 采用 char 不是成员函数的原因是 ostream 中已经定义了将字符写入流的函数。

```
basic_ostream& put(Ch c);
basic_ostream& write(const Ch* p, streamsize n); 
```

因此，这些运算符成为内部使用这两个函数的非成员函数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-15T12:29:12.523

第一个系列是成员函数，`return *this`因此运算符链接有效。

第二个系列是独立函数（正如您所说，您可以为任何类添加它，以便您可以将它们流式传输到 a `std::ostream`），它没有`this`返回，`return os`而是使运算符链接工作。

请注意，两者在呼叫站点的工作方式相同。

# jquery - 调整 jQuery Mobile 控件组的宽度

> ID：16015053
> 
> 赞同：1
> 
> 时间：2013-04-15T12:22:49.290
> 
> 标签：jquery, css, jquery-mobile, jquery-mobile-grid

我在试图弄清楚如何在 jQuery Mobile 1.3.0 中调整控制组的大小时遇到​​问题

我不知道正确的方法，现在我正在调整 .ui-btn 类的大小，如下所示：

```
#test_1 .ui-btn {
    width: 200%;
} 
```

但它并没有像我预期的那样调整按钮的大小，如果我把它们放大，右边的按钮会与左边的按钮重叠，或者当我把它们缩小时它们不会重新定位。

这是我的 HTML，它是一个包含 5 个块的控制组，其中 4 个是列，一个是中间的 Solo 组：

```
<fieldset class="ui-grid-a" data-role="controlgroup" data-mini="true" id="test_1">
        <div class="ui-block-a">
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
        </div>
        <div class="ui-block-b">
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
        </div>
        <div class="ui-grid-solo">
            <label>AaaaaaaaaaaAaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
        </div>
        <div class="ui-block-a">
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
        </div>
        <div class="ui-block-b">
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
            <label>Aaaaaaaaaaa
                <input type="radio" name="accion" value="1">
            </label>
        </div>
    </fieldset> 
```

我设置的jsFiddle中的所有代码：http: [//jsfiddle.net/4zMqn/1/](http://jsfiddle.net/4zMqn/1/)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:48:09.000

# 解决方案

要解决您的问题，请使用此 css：

```
#test_1  { 
    width: 70% !important; 
} 
```

因为 fieldset 已经定义了宽度，我们需要用我们的值覆盖它，并且可以使用**!important**来完成。

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/SuqRY/](http://jsfiddle.net/Gajotres/SuqRY/)

# 更多信息

如果您想自己学习如何进行这种更改，您应该查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**，它将教您如何自己进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:28:15.390

一种方法是覆盖按钮大小的默认 css-style 并添加到您自己的 CSS 类

```
.ui-mini .ui-btn-inner {
   // resize code
 } 
```

# javascript - 如何在私有方法中以javascript模块化模式访问它？

> ID：16015054
> 
> 赞同：0
> 
> 时间：2013-04-15T12:22:56.167
> 
> 标签：javascript

如何在使用 javascript 模块模式的私有方法时访问 this（对象 this）？

我不明白这是如何工作的，我仍在努力学习它。

```
var o = o || {};
o.Assets = (function() {
    "use strict";

    function privateFunc() {
        // how do I get this.assetQ?
    }

    function Assets(assetQ) {
        this.init(assetQ);
    };
    Assets.prototype.assetQ = [];
    Assets.prototype.cache = [];
    Assets.prototype.callback = false;
    /*
Initialize the assets
*/
    Assets.prototype.init = function(assetQ) {
        if (assetQ) {
            this.assetQ = assetQ;
        }
    };
    return Assets;
})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:25:42.583

当您`privateFunc`从 的方法调用时`Assets`，使用`privateFunc.call( this )`then use `this.assetQ`inside `privateFunc`。

```
function privateFunc() {
    console.log(this.assetQ);
} 
```

...

```
Assets.prototype.init = function(assetQ) {
    if (assetQ) {
        this.assetQ = assetQ;
    }
    privateFunc.call( this );
}; 
```

如果你的私有函数接受参数，你可以`.call`在上下文参数之后正常传递它们：

```
privateFunc.call( this, 1, 2, 3 );

function privateFunc( a, b, c ) {
  //a is 1, b is 2 etc..
} 
```

# c# - SQL在C#中的表中允许空值

> ID：16015056
> 
> 赞同：1
> 
> 时间：2013-04-15T12:23:04.007
> 
> 标签：c#, sql, sql-server-2008

使用 SQL Server 2008、WinForms C# .NET 4.5、Visual Studio 2012。

我有一个查询，该查询当前使用来自`GridView`.

下面是调用存储过程的代码：

```
public void UpdateMain(string part, int? pareto)
{
  try
  {
    using (SqlConnection AutoConn = new SqlConnection(conn32))
    {
      AutoConn.Open();
      using (SqlCommand InfoCommand = new SqlCommand())
      {
        using (SqlDataAdapter infoAdapter = new SqlDataAdapter(InfoCommand))
        {
          InfoCommand.Connection = AutoConn;
          InfoCommand.CommandType = CommandType.StoredProcedure;
          InfoCommand.CommandText = "dbo.updateMain";
          InfoCommand.Parameters.AddWithValue("@part", part);
          InfoCommand.Parameters.AddWithValue("@pareto", pareto);
          InfoCommand.CommandTimeout = 180;

          InfoCommand.ExecuteNonQuery();
        }
      }
    }
  }
  catch (Exception e)
  {
    //MessageBox.Show("Error in connection :: " + e);
  }
} 
```

这是SQL：

```
ALTER PROCEDURE [dbo].[updateMain]
    @part varchar(255),
    @Pareto int
as
    UPDATE dbo.ParetoMain 
    SET NewPareto = @Pareto 
    WHERE Part = @part 
```

如您所见，没有什么花哨的。我遇到的问题是`Newpareto`不一定要有值，所以我需要它来允许空值。我确保该表允许空值。在我的 C# 代码中，我确保使用可为空的 int，但是当我运行代码时出现错误：

> 异常：抛出：“过程或函数'updateMain'需要参数'@Pareto'，但未提供。” （System.Data.SqlClient.SqlException）
> 引发了 System.Data.SqlClient.SqlException：“过程或函数 'updateMain' 需要参数 '@Pareto'，但未提供。”

那么如何停止此错误并将空值放入表中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T12:30:16.093

问题是该参数是预期的，但如果可为空的值为`null`. 您需要通过以下任一方式解决此问题：

1.  手动设置它，`DBNull.Value`如下所示：`InfoCommand.Parameters.AddWithValue("@Pareto", (object)pareto ?? DbNull.Value);`
2.  或者通过使参数可选，如下所示：`@Pareto int = null`

如果您想让参数成为可选参数，您的存储过程可能如下所示：

```
ALTER PROCEDURE [dbo].[updateMain]
@part varchar(255),
@Pareto int = null
as
UPDATE dbo.ParetoMain SET NewPareto =@Pareto WHERE Part = @part 
```

**编辑**我从接受的答案中获取它，由于类型不匹配问题
，您需要转换为该答案。`object`为了完整起见，我正在修复我的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T12:28:03.767

利用

```
InfoCommand.Parameters.AddWithValue("@Pareto", (Object)pareto ?? DBNull.Value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:29:58.483

尝试这个：

```
if (pareto != null)
{
  InfoCommand.Parameters.AddWithValue("@pareto", pareto);
}
else
{
  InfoCommand.Parameters.AddWithValue("@pareto", DBNull);
} 
```

# mootools - 无法执行 onLoad 事件

> ID：16015058
> 
> 赞同：0
> 
> 时间：2013-04-15T12:23:10.613
> 
> 标签：mootools

我在函数中使用 OnLoad 事件时遇到问题：

```
 (function () {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';
            ds.async = true;
            ds.src = 'http://' + ds_shortname + '.myscript.com/emb.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
            ds.onLoad = function(){
                alert('ok');
                var ds_div = $('ds-div');
                if (IsConnected()) 
                {
                    alert('connect');
                }else{
                    alert('not connect');
                }
            }
        })(); 
```

事实上，我的`ds.onLoad`不执行，我不知道为什么。我认为这是因为我的函数自己执行，但我不知道如何解决这个问题。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:40:58.133

为此，请使用 More 中的[Utilities/Asset](http://mootools.net/docs/more/Utilities/Assets)类，例如：

```
new Asset.javascript('//connect.facebook.net/en_US/all.js', { 
    onLoad:function(){
        $('message').set('text', 'Facebook loaded!'); 
    },
    async: true
}); 
```

工作样本：http: [//jsfiddle.net/FU5rk/](http://jsfiddle.net/FU5rk/)

与您的问题直接相关：在应用 onLoad 事件之前将元素注入 DOM。我很确定如果文件在缓存中，或者下载速度非常快，它只是在您设置事件处理程序之前加载。

# javascript - Javascript，逐点绘制动画路径

> ID：16015062
> 
> 赞同：1
> 
> 时间：2013-04-15T12:23:33.253
> 
> 标签：javascript, animation, raphael

我见过有人画这样的动画路径，但是如果我有一个未知数量的点存储在一个数组中，我怎么能逐步使用这个回调呢？

```
 window.onload = function() {
        var c= Raphael("canvas", 200, 200);
        var p = c.path("M140 100");
        var r = c.path("M190 60");

   p.animate({path:"M140 100 L190 60"}, 2000, function() {
            r.animate({path:"M190 60 L 210 90"}, 2000);
        });
    }; 
```

# python - 表单动作在 django 中不起作用

> ID：16015064
> 
> 赞同：3
> 
> 时间：2013-04-15T12:23:35.950
> 
> 标签：python, django, forms, post, submit

我有 django 1.4，我正在关注一个使用旧版本 django 的教程。它是一个简单的教程，它创建一个以 Page 作为模型的 wiki 应用程序。

问题是与表单中的 POST 方法对应的视图函数没有被调用。

这是 urls.py 中的内容：

```
url(r'^wikicamp/(?P<page_name>[^/]+)/edit/$', 'wiki.views.edit_page'),
url(r'^wikicamp/(?P<page_name>[^/]+)/save/$', 'wiki.views.save_page'),
url(r'^wikicamp/(?P<page_name>[^/]+)/$', 'wiki.views.view_page'), 
```

这是模板edit.html的内容：

```
<from method = "get" action="/wikicamp/{{page_name}}/save/">
{% csrf_token %}
    <textarea name = "content" rows="20" cols="60">
    {{content}}
    </textarea>
    <br/>
    <input type="submit" value="Save Page"/>
</form>
<a href="/wikicamp/{{page_name}}/save/">this is link to save</a> 
```

这是views.py中的内容：

```
def edit_page(request, page_name):
try:
    page = Page.objects.get(pk=page_name)
    content = page.content
except Page.DoesNotExist:
    content = ""
return render_to_response("edit.html", {"page_name":page_name, "content":content}, context_instance=RequestContext(request))

def save_page(request, page_name):
    return HttpResponse("You're looking at the page %s." % page_name) 
```

我最初遇到了与 csrf 相关的错误，然后我尝试了[https://docs.djangoproject.com/en/dev/ref/contrib/casrf/](https://docs.djangoproject.com/en/dev/ref/contrib/casrf/)中提供的所有修复程序，并遵循了许多与 POST 和 django 相关的 stackoverflow 问题。现在，当我单击“保存页面”按钮时，什么也没有发生，什么都没有！甚至没有从表单发送任何请求（使用 firebug 跟踪 HTTP 请求和响应）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T12:27:28.890

您的 HTML 中有错字：`from`而不是`form`.

您可能会意识到这一点，但该代码不会真正保存任何内容。我不确定您关注的是哪个博客，但您最好遵循文档中的官方 Django 教程，然后阅读表单文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:26:47.790

您可能需要在表格中更改`method`为`"POST"`。

```
<from method = "get" action="/wikicamp/{{page_name}}/save/"> 
```

到

```
<form method = "post" action="/wikicamp/{{page_name}}/save/"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:30:01.680

有一些拼写错误，例如`from`代替`form`。此外，表格格式不正确。

改变：

```
<a href="/wikicamp/{{page_name}}/save/">this is link to save</a> 
```

到

```
<input type="submit" value="Save Page" /> 
```

第三，将 更改`method= "get"`为`method="POST"`。

整个表格应该是这样的

```
<form method = "POST" action="/wikicamp/{{page_name}}/save/">
{% csrf_token %}
    <textarea name = "content" rows="20" cols="60">
    {{content}}
    </textarea>
    <br/>
    <input type="submit" value="Save Page"/>
</form> 
```

还有@DanielRoseman 所说的。但是，嘿，它可能会走得更远。

# arrays - 访问结构数组中的值

> ID：16015065
> 
> 赞同：0
> 
> 时间：2013-04-15T12:23:36.587
> 
> 标签：arrays, string, struct, structure

我正在尝试使用结构“sommet”的数组，定义如下。

```
typedef struct sommet {
double x;
double y;
char nom[100];
struct arete2* voisin;};

sommet* somtab = (sommet *) calloc(nbnoeud, sizeof(sommet));
if(somtab = NULL){
    puts("Calloc error");
    exit(1);
} 
```

在我的代码中，我有三个单独的数组，xtab、ytab 和 nomtab，它们分别包含等效索引的 somtab 元素的 x、y 和 nom 值（即 somtab[0].x = xtab[0]、somtab[1 ].x = xtab[1] 等）当设置每个 somtab 元素时，我的程序崩溃了，我从来没有进入“check3”

```
puts("check1");

for(a=0; a<nbnoeud; a++){
    printf("Read item %d; \t \t \t %s - (%lf, %lf). \n", a, nomtab[a], xtab[a], ytab[a]);
}

puts("check2");

for(a=0; a<nbnoeud; a++){
    somtab[a].x = xtab[a];
    somtab[a].y = ytab[a];
    strcpy(somtab[a].nom, nomtab[a]);
}

puts("check3"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:49:54.047

使用指向指针的指针。

```
sommet** somtab = malloc(nbnoeud*sizeof(sommet)); 
```

利用

```
 somtab[a]->x = xtab[a];
    somtab[a]->y = ytab[a];
    strcpy(somtab[a]->nom, nomtab[a]); 
```

# git - git 子命令 VS git --option

> ID：16015072
> 
> 赞同：7
> 
> 时间：2013-04-15T12:23:48.990
> 
> 标签：git

git stash list >> 将列出所有的存储

git tag --list >> 将列出所有标签

但为什么它是第一个命令中的“list”和第二个命令中的“--list”？这让我很困惑（假设你做了“git tag list”，然后你实际上创建了一个名为“list”的标签）。这是否仅适用于“stash”命令（因为所有 stash 命令似乎都没有--）？这背后的逻辑是什么？

编辑：

在查尔斯·贝利（Charles Bailey）回复之后，我发现最好给问题更笼统的意义，这样它就变得更有用了。那么，git 是否有任何约定来区分“子命令”（如`git stash list`）和“选项”（如`git tag --list`）？

感谢贡献

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:22:52.270

我会说这样做的原因是因为`git tag`需要一个*参数*——而不是一个子命令——它应该可以被称为任何你想要的东西。如果您愿意，您绝对应该能够调用标签“*列表*”。因此`git tag`必须将其“子命令”（或*选项*）隐藏在标志而不是子命令后面。

to 的参数`git stash`定义更严格，因此它能够使用真正的子命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:28:26.197

我想说这只是英文单词`tag`可以用作动词，所以说出来`git tag v1`并期望它实际标记当前的 checkout感觉很自然`v1`。

问题是，您可以添加别名来制作您想要的任何语法。当您厌倦了`git checkout`完整输入时，请创建别名。尝试搜索`handy git aliases`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:48:44.840

差异的原因是它`stash`有多个子命令（创建、列出、应用、删除、弹出等），所以第一个词（通常）是`stash`子命令而不是选项。`stash`就像`bundle`，在这方面`remote`。`submodule`

`tag`只是一个“普通”命令，它只列出（默认）或创建标签（轻量级或完整）。由于“列表”是默认操作并且您通常不需要提供，因此它是一个选项，因此`--`.

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-15T13:21:14.237

因为 git 是`the stupid content tracker`，如果您不相信我，请阅读`NAME`. `man git`它的命令和命令参数背后没有逻辑，它们经常不一致，但没人关心:(

# c# - 有没有办法从 WinForms 应用程序打开 Windows 日期和时间设置对话框？

> ID：16015073
> 
> 赞同：3
> 
> 时间：2013-04-15T12:23:49.250
> 
> 标签：c#, windows, winforms, winapi, datetime

我正在开发一个嵌入式软件，我们希望尽可能避免暴露 Windows 功能和界面。但是，用户需要能够更改系统日期和时间，可能还需要更改时区或夏令时模式。

我想我会为此创建我们自己的简单表单，并尝试深入研究 Win32 API 调用，但意识到这不是一个简单的方法。

所以我发现这里基本上最简单的方法是从软件中调用众所周知的 Windows 对话框并让用户在那里更改内容。到目前为止，我找不到任何关于它的信息。是否有任何可执行文件（例如 gpedit.msc），或者是否有任何 API 调用来显示该窗口？如果没有，或者如果我没有考虑到任何对立，任何人都可以为这项任务提出更好的方法吗？

编辑：感谢您的 timedate.cpl 提示，我会尽快尝试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:30:31.260

在我的 Windows 桌面版本上，您可以通过执行来显示该对话框`timedate.cpl`。我不知道这是否适用于您的嵌入式 Windows。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-08T15:16:38.083

就在这里。使用此代码，单击按钮后它将起作用：

```
System.Diagnostics.Process.Start("timedate.cpl"); 
```

它应该工作。如果您想打开其他窗口控件，您只需更改`"timedata.cpl"`您选择的命令即可。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:34:55.220

尝试这个：

```
Process.Start(System.Environment.SystemDirectory + @"\TimeDate.cpl"); 
```

但我不知道它是否适用于您的嵌入式 Windows...

# c# - 无法将类型“double”隐式转换为“RadTextBox”

> ID：16015074
> 
> 赞同：1
> 
> 时间：2013-04-15T12:23:53.727
> 
> 标签：c#, asp.net

我有一个小问题，我这里有一个 RadTextBox，它应该在数据库中接收浮点值，日期类型也是浮点数，所以现在如果我想绑定 RadTextBox，总是会出现这个奇怪的错误

> *错误 4 无法将类型“double”隐式转换为“Telerik.Web.UI.RadTextBox”*

我需要解析还是其他？

我的代码

```
private void bindData()
{
    this.cbActive.Checked = this.paramBR.GetActive();
    this.rtbCode.Text = this.paramBR.Code;
    this.rtbDescription.Text = this.paramBR.Description;
    this.rtbHourlyRate = this.paramBR.HourlyRate;
}

BillingRate br = ctx.BillingRate.Where(yx => yx.BillingRateId == this.paramBR.BillingRateId).FirstOrDefault();
if (br == null)
{
    br = new BillingRate();
    newEntity = true;
}
br.Code = this.rtbCode.Text;
br.Description = this.rtbDescription.Text;
br.SetActive(this.cbActive.Checked);
br.HourlyRate = this.rtbHourlyRate.Text;
br.CreatedDate = DateTime.Now;
br.CreatedBy = this.User.UserId; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:25:23.687

使用`RadTextBox.Text`属性来分配文本。将`double`值`string`分配给文本框时也将其转换为：

```
// you missed that here
this.rtbHourlyRate.Text = this.paramBR.HourlyRate.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:26:12.207

您应该[`.Text`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.text.aspx)在最后一行中使用属性并使用[`.ToString()`](http://msdn.microsoft.com/en-us/library/3hfd35ad.aspx)方法转换`double`为`string`.

```
this.rtbHourlyRate.Text = this.paramBR.HourlyRate.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:25:50.723

你的最后一行应该是：

```
this.rtbHourlyRate.Text = this.paramBR.HourlyRate.ToString(); 
```

不是

```
this.rtbHourlyRate = this.paramBR.HourlyRate; 
```

您没有分配给 RadTextBox 的 text 属性，而是分配给 RadTextBox 本身。您还应该在作业中将双精度转换为字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:26:08.540

更改此行：

```
this.rtbHourlyRate = this.paramBR.HourlyRate; 
```

至：

```
this.rtbHourlyRate.Text= this.paramBR.HourlyRate; 
```

# java - Primefaces - FileUploader 不调用 ManagedBean

> ID：16015076
> 
> 赞同：1
> 
> 时间：2013-04-15T12:23:57.993
> 
> 标签：java, jsf, file-upload, primefaces

我想实现[primefaces File uploader](http://www.primefaces.org/showcase/ui/fileUploadDnd.jsf)。

我的实现：

```
<h:form enctype="multipart/form-data">
                                    <p:fileUpload id="fileUpload"
                                        fileUploadListener="#{fileUploadController.handleFileUpload}"
                                        mode="advanced" update="messages" sizeLimit="100000"
                                        allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />

                                    <p:growl id="messages" showDetail="true" /> 
```

我在我的 web.xml 文件中配置了我的过滤器：

```
<!-- ############################################# -->
    <!-- # File upload                                      # -->
    <!-- ############################################# -->
    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>
            org.primefaces.webapp.filter.FileUploadFilter
        </filter-class>
        <init-param>
            <param-name>thresholdSize</param-name>
            <param-value>6400</param-value>
        </init-param>
        <init-param>
            <param-name>uploadDirectory</param-name>
            <param-value>/resources/uploads</param-value>
        </init-param>
    </filter>

  <filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
  </filter-mapping> 
```

在我的 pom.xml 中：

*   公共文件上传
*   commons-io

我的文件上传控制器看起来像这样：

```
@Component
@Scope("session")
public class FileUploadController {

    private int size = 1024;

    /**
     * log4j
     */
    private static Logger log = LogManager.getLogger(FileUploadController.class);

    public void handleFileUpload(FileUploadEvent event) {  
        log.info("Method handleFileUpload invoked");
        FacesMessage msg = new FacesMessage("Succesful", event.getFile().getFileName() + " is uploaded.");  
        FacesContext.getCurrentInstance().addMessage(null, msg);  
        try {
            File targetFolder = new File("/resources/uploads/images");
            InputStream inputStream = event.getFile().getInputstream();
            OutputStream out = new FileOutputStream(new File(targetFolder,
                    event.getFile().getFileName()));
            int read = 0;
            byte[] bytes = new byte[size];
            log.info("read file stream");
            while ((read = inputStream.read(bytes)) != -1) {
                out.write(bytes, 0, read);
            }
            inputStream.close();
            out.flush();
            out.close();
        } catch (IOException e) {
            log.error(e);
            e.printStackTrace();
        }

    } 
```

我的问题是，我没有从控制器获得日志消息来上传我的文件？

真的很感谢你的回答！！！

顺便说一句，我的 PF 版本是 3.5

**更新**

我的模板看起来像这样：

```
</h:head>
<h:body>
    <div class="well" style="margin-top: 50px">
        <div class="container">

            <h:form>
                <p:growl id="growl" sticky="true" showDetail="true" />

                <p:wizard widgetVar="wiz"
                    flowListener="#{productWizardHandler.onFlowProcess}">

                    <!-- Basic Product Tab -->
                    <p:tab id="basicProduct" title="BasicProduct">

                        <p:panel header="Fill in your basic Product Information">

                            <h:messages errorClass="error" />
                            <h:panelGrid columns="2" columnClasses="label, value"
                                styleClass="grid">
                                <h:outputText value="Product Name: *" />
                                <p:inputText required="true" label="Product Name"
                                    value="#{productService.instance.productName}" />

                                <h:outputText value="Categorie: *" />
                                <p:inputText label="Categorie" value="#" />

                                <h:outputText value="Description: *" />
                                <p:inputTextarea required="true"
                                    value="#{productService.instance.description}" />

<!-- Select your product  -->
<!--                                <h:outputLabel value="Select the product you want to create:" for="dd" />
                                <p:autoComplete id="dd" dropdown="true"
                                    value="#{autoCompleteBean.txt6}"
                                    completeMethod="#{autoCompleteBean.complete}" />
 -->
                            </h:panelGrid>

                        </p:panel>
                    </p:tab>

                    <!-- Image Tab -->
                    <p:tab id="image" title="Image">
                        <p:panel header="Upload your Product Image Details">

                            <h:messages errorClass="error" />

                            <h:panelGrid columns="2" columnClasses="label, value"
                                styleClass="grid">
                                <h:form enctype="multipart/form-data">

                                    <p:fileUpload id="fileUpload"
                                        fileUploadListener="#{fileUploadController.handleFileUpload}"
                                        mode="advanced" update="messages" sizeLimit="100000"
                                        allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />

                                    <p:growl id="messages" showDetail="true" />

                                </h:form>
                            </h:panelGrid>
                        </p:panel>
                    </p:tab>

                    <!-- Special Tab -->

                    <p:tab id="speziel" title="Spezial Tab">

                        <!-- ################################################################################ -->
                        <p:panel>
                            <ui:include src="product_templates/test.xhtml" />
                            <ui:include src="product_templates/clothes.xhtml" />
                            <ui:include src="product_templates/arbnb.xhtml" />

                        </p:panel>
                    </p:tab>

                    <!-- Summary -->
                    <p:tab id="summary" title="Summary">
                        <p:panel header="Product Summary">

                            <h:panelGrid id="productSummary" columns="6">
                                <h:outputText value="Product Name: " />
                                <h:outputText styleClass="outputLabel"
                                    value="#{productWizardHandler.product.productName}" />

                                <h:outputText value="Categorie: " />
                                <h:outputText styleClass="outputLabel" value="#" />

                                <h:outputText value="Description: " />
                                <h:outputText styleClass="outputLabel"
                                    value="#{productWizardHandler.product.description}" />>  

                      INSERT outputs für speziell products
                                                </h:panelGrid>

                            <p:commandButton value="Submit" update="growl"
                                actionListener="#{productWizardHandler.save}" />

                        </p:panel>
                    </p:tab>

                </p:wizard>

            </h:form>
        </div>
    </div>
</h:body> 
```

![在此处输入图像描述](https://i.stack.imgur.com/gyuzS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:42:01.847

我认为您没有为 primefaces 文件上传过滤器指定过滤器映射

```
 <filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
  </filter-mapping> 
```

# html - 使用“垂直对齐”在 div 中居中文本不起作用

> ID：16015077
> 
> 赞同：0
> 
> 时间：2013-04-15T12:23:58.397
> 
> 标签：html, css

标题几乎总结了它。我有以下代码：

```
<div class="container">
   <p>Hello world</p>
</div> 
```

和 CSS：

```
.container{
    width: 100%;
    height: 50px;    
    background-color: lightblue;
    vertical-align: middle; /* Why you no work!?!? */
} 
```

But the text is not vertically aligning in the div. I'm clearly missing something here or don't understand a certain concept. Anybody tell me what's happening?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:26:39.500

如果您有单行文本，请将其添加到您的 CSS 中。

.container > p{ line-height:50px; }

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:33:32.480

要使用`vertical-align: middle`，您需要使用`display: inline-block`。

您的代码将更改为：

```
.container{
    display: inline-block; /* This is the line you need to introduce */
    width: 100%;
    height: 50px;    
    background-color: lightblue;
    vertical-align: middle;
} 
```

你可以看一下[演示](http://jsfiddle.net/aniketpant/XpsQ7/)。

## 更新

使用`display: table`for`.container`和`display: table-cell`for`.container p`使其工作。

[更新的演示](http://jsfiddle.net/aniketpant/XpsQ7/1/)

```
.container{
    display: table;
    width: 100%;
    height: 200px;
    background-color: lightblue;
    vertical-align: middle;
}
.container p {
    display: table-cell;
    vertical-align: middle;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:32:35.753

将 display 属性添加到您的容器中，如下所示：

```
.container{
    width: 100%;
    height: 50px;    
    background-color: lightblue;
    display:inline-block; 
    vertical-align: middle; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T12:30:13.900

CSS 中的垂直对齐不像水平对齐那么简单。

根据您的情况和内容，您需要应用一种技术或另一种技术。

您可以查看此链接以了解不同的技术：

[http://www.vanseodesign.com/css/vertical-centering/](http://www.vanseodesign.com/css/vertical-centering/)

简而言之，vertical-align: center; 在你的情况下不起作用

# javascript - Jquery mobile Pageshow - 删除以前的数据

> ID：16015078
> 
> 赞同：1
> 
> 时间：2013-04-15T12:24:01.947
> 
> 标签：javascript, jquery, html, jquery-mobile

我有一个 jquery 移动网络应用程序，我想在 pageshow 上用一些信息填充一个 div 列表。

```
$('#data').live('pageshow', function (event, ui) { 
    $("#facInfoList").html("some data...."); 
} 
```

在我填写这个列表之前，我想删除页面的洞内容，因为如果是第二次调用，列表中还有第一次调用的数据。（设置为默认值，就像这是页面的第一次调用）

我尝试使用 $("#facInfoList").html(""); 但这不适用于每个浏览器。

我想在第一步恢复页面，然后填写列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:26:20.383

`$("#facInfoList").empty()`改为尝试（ [doc](http://api.jquery.com/empty/)），这应该可以解决问题。

请注意，`.live()`自 jQuery 1.7 起已弃用，`.on()`如果您使用的是最新的 jQuery 之一，则应使用它（请参阅[`.live()`doc](http://api.jquery.com/live/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:30:33.323

只是你让列表为空

```
 $('#data').live('pageshow', function (event, ui) { 
   $("#facInfoList").empty(); 
 } 
```

# android - Nexus 7 摄像头（或所有前置摄像头？）是镜像的（倒置）

> ID：16015079
> 
> 赞同：2
> 
> 时间：2013-04-15T12:24:02.217
> 
> 标签：android, camera, android-camera

为了获得相机参考，我这样做：

```
 @Override
    public void surfaceCreated(SurfaceHolder holder) {
        Log.d(TAG, "Surface created!");
        mCamera = Camera.open();
        if (mCamera == null) {
            // try to open front facing camera
            try {
                mCamera = Camera.open(0);
            } catch (RuntimeException e) {
                Toast.makeText(getApplicationContext(),
                        "No camera available!", Toast.LENGTH_LONG).show();
            }
        }
        try {
            mCamera.setPreviewDisplay(mCameraHolder);
            setCameraDisplayOrientation(CameraActivity.this, 0, mCamera);
        } catch (Exception e) {
            e.printStackTrace();
            if (mCamera != null)
                mCamera.release();
            mCamera = null;
        }
    } 
```

setCameraDisplayOrientation 在哪里（我在某个地方的stackoverflow上找到）：

```
public static void setCameraDisplayOrientation(Activity activity,
        int cameraId, android.hardware.Camera camera) {
    android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
    android.hardware.Camera.getCameraInfo(cameraId, info);
    int rotation = activity.getWindowManager().getDefaultDisplay()
            .getRotation();
    int degrees = 0;
    switch (rotation) {
    case Surface.ROTATION_0:
        degrees = 0;
        break;
    case Surface.ROTATION_90:
        degrees = 90;
        break;
    case Surface.ROTATION_180:
        degrees = 180;
        break;
    case Surface.ROTATION_270:
        degrees = 270;
        break;
    }

    int result;
    if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
        result = (info.orientation + degrees) % 360;
        result = (360 - result) % 360; // compensate the mirror
    } else { // back-facing
        result = (info.orientation - degrees + 360) % 360;
    }
    camera.setDisplayOrientation(result);
} 
```

当我用我的 Nexus 4 拍照时，它的方向是正确的。当我使用只有前置摄像头的 Nexus 7 进行尝试时，它被镜像（倒置）（即使实际上没有这段代码，所以我猜它什么也没做。）。

有没有可靠的方法来获取相机方向并使其工作？我在 Google 和 Stackoverflow 上进行了搜索，但到目前为止没有找到任何有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-23T15:12:05.017

这是我发现适用于 nexus 7 和我测试过的大多数其他设备的解决方案，如 HTC One M8、Lenovo Yoga、Lg G4 Nexus 4、Note 4 和 Oneplus One。

camera.setDisplayOrientation(90);

但是，此解决方案不适用于翻转预览的 Nexus 6，因此如果有人有比此更好的解决方案，请分享。

# android - 如何检查按钮是否从其他活动中单击

> ID：16015081
> 
> 赞同：-5
> 
> 时间：2013-04-15T12:24:16.977
> 
> 标签：android, android-activity

我有两个`Activity`A 和 B。`Activity B`我`Button OK`想检查`Button Ok`是否点击了`Activity A`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:29:17.137

当您单击时`Button Ok`，`Activity B`您需要保存`bollean btnOkClicked = true`.
并且从`Activity A`刚刚读取这个值。你可以保存它 - 你想要什么（`public static`或[共享偏好](http://developer.android.com/intl/ru/reference/android/content/SharedPreferences.html)）
希望它有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:26:52.773

在内部设置布尔变量`Button ok`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:32:36.663

您的应用程序存在设计问题（这可能是人们投票反对的原因）

如果`Button Ok`在里面`Activity B`，并且`Button Ok`被点击，这意味着它`Activity A`当前没有激活（暂停或销毁）。

您可能想要做的是使用 => [https://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent](https://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent) , int)为结果启动活动 B

并在活动 A 中使用 => [https://developer.android.com/reference/android/app/Activity.html#onActivityResult(int](https://developer.android.com/reference/android/app/Activity.html#onActivityResult(int) , int, android.content.Intent)覆盖活动结果

以下教程很好地解释了活动结果： [http ://www.mybringback.com/tutorial-series/12186/android-startactivityforresult-example/](http://www.mybringback.com/tutorial-series/12186/android-startactivityforresult-example/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:28:38.853

您可以创建一个`Interface`类并创建一个`Boolean Method`具有特定`Name` 初始化接口类对象的类并在单击中`Activity B`分配并在其中实现`Boolean Method``Button Ok``interface``Activity A`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-15T12:44:40.427

使用布尔标志创建一个静态类。然后在按下按钮 OK 时设置活动 B 的标志，然后检查活动 A 的标志。

/*这是商店类*../

```
public class Store {

/*
 * Singleton

 */
    private boolean flag
private static Store instance;

public static synchronized Store getInstance() {
    if (instance == null) {
        instance = new Store();
    } 
    return instance;
}
    public String getFlag() {
    return flag;
}
public void setFlag(boolean flag) {
    this.flag= flag;
} 
```

// 这是你的 Activity B 中的实现

//onButton Click 设置这个标志

Store.getInstance().setFlag(true);

……

//这是Activity A中的实现

if(Store.getInstance().getFlag()){

** 按钮被点击

}else ** 按钮没有被点击..

# asp.net - 保存数学公式

> ID：16015084
> 
> 赞同：2
> 
> 时间：2013-04-15T12:24:25.443
> 
> 标签：asp.net, sql-server, c#-4.0

想要将数学公式保存到 SQL Server 表中，并在从 C# 传递值以对保存在表中的公式进行计算后，请指导您需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:41:59.107

您可以使用存储过程计算结果并将值传递给存储过程或使用数据库从表中获取值并计算结果并将结果存储在数据库中或显示给用户。

# angularjs - 如何在 ng-grid 中使用分组设置聚合

> ID：16015088
> 
> 赞同：7
> 
> 时间：2013-04-15T12:24:50.950
> 
> 标签：angularjs, angular-ui, ng-grid

我想查看网格中每个组的总数（或通常是任何聚合函数）。

这是在问题中请求并关闭的：[https](https://github.com/angular-ui/ng-grid/issues/95) ://github.com/angular-ui/ng-grid/issues/95 （但不幸的是没有任何示例）。

我可以通过配置选项重新定义默认模板[https://github.com/angular-ui/ng-grid/blob/master/src/templates/aggregateTemplate.html 。](https://github.com/angular-ui/ng-grid/blob/master/src/templates/aggregateTemplate.html)`aggregateTemplate`但我不知道如何正确扩展它。

此模板正在 ng-grid 范围内评估，我不知道如何触发我的自定义聚合函数。我想创建与 '''totalChildren''' 类似的功能（来自[https://github.com/angular-ui/ng-grid/blob/master/src/classes/aggregate.js](https://github.com/angular-ui/ng-grid/blob/master/src/classes/aggregate.js)）

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T15:25:50.390

我找到了答案：[https ://github.com/angular-ui/ng-grid/issues/290](https://github.com/angular-ui/ng-grid/issues/290)

这里是我的聚合函数的一个例子：

```
function WorkLoadCtrl($scope, Issue, $routeParams, HttpCache) {
  $scope.issues = Issue.jql_search({jql: $routeParams.jql});

  $scope.aggFC = function (row) {
    var res = 0;

    var calculateChildren = function(cur) {
      var res = 0;
      var remaining;
      angular.forEach(cur.children, function(a) {
        remaining = a.getProperty('fields.timetracking.remainingEstimateSeconds');
        if (remaining) { res += remaining; }
      });
      return res;
    };

    var calculateAggChildren = function(cur) {
      var res = 0;
      res += calculateChildren(cur);
      angular.forEach(cur.aggChildren, function(a) {
        res += calculateAggChildren(a);
      });
      return res;
    };

    return (calculateAggChildren(row) / 3600).toFixed(2);
  }

  $scope.mySelections = [];
  $scope.gridOptions = {
    data: 'issues.issues',
    columnDefs: [
      {field:'key', displayName:'key'},
      {field:'fields.assignee.name', displayName:'Assignee'},
      {field:'fields.status.name', displayName:'Status'},
      {field:'fields.summary', displayName:'Summary'},
      {field:'fields.timetracking.remainingEstimate', displayName:'Remaining'},
    ],
    showFooter: true,
    showGroupPanel: true,
    enablePinning: true,
    enableColumnResize: true,
    enableColumnReordering: true,
    showColumnMenu: true,
    showFilter: true,
    //jqueryUIDraggable: true, bug: when used grouping stop work, but column reordering start to work:(
    selectedItems: $scope.mySelections,
    multiSelect: false,
    aggregateTemplate: '<div ng-click="row.toggleExpand()" ng-style="rowStyle(row)" class="ngAggregate"> <span class="ngAggregateText">{{row.label CUSTOM_FILTERS}} (count: {{row.totalChildren()}} {{AggItemsLabel}} Remaining: {{aggFC(row)}})</span> <div class="{{row.aggClass()}}"></div> </div>'
  };
} 
```

# node.js - 无法从 node.js connect-mongo 中的会话存储中获取会话

> ID：16015091
> 
> 赞同：0
> 
> 时间：2013-04-15T12:24:53.447
> 
> 标签：node.js, mongodb, session

我正在使用 connect-mongo 来存储我的会话数据，blew 是启动我的快速服务器和 mongodb 会话的代码。

```
var MongoStore = require('connect-mongo')(express);

var sessionStore = new MongoStore({url: config.sessionStore}, function() {
                          console.log('connect mongodb session success...');
})

app.configure(function(){
    ............
    //  // cookieParser should be above session
    app.use(express.cookieParser());
     // express/mongo session storage  //  
    app.use(express.session({ 
                      cookie: { maxAge: 24 * 60 * 60 * 1000 },
                      store: sessionStore,
                      secret: config.sessionSecret,
                  key: 'express.sid',
                          clear_interval: 3600
                                          }));
    ............
}) 
```

我查看了 chrome 浏览器，当然可以看到我的会话密钥 - 'express.sid' 和相应的值。

当用户登录我的服务器时，我想从我的 mongodb 会话存储中获取他们的会话数据。但是，会话存储查询会话数据时没有错误，只是显示输出**null**。

```
var connect = require('express/node_modules/connect')
, parseSignedCookie = connect.utils.parseSignedCookie
, cookie = require('express/node_modules/cookie');

function fileUpload(req, res) {

    var sid = req.cookies['express.sid'];
    var sessionID = parseSignedCookie(sid, config.sessionSecret);   
    console.log('fileUpload  ',req.ip, sid,sessionID);
    // output the session value as expected 

    // but session store can't query the session data, no error but just no values
    sessionStore.get(sid, function(err, session){
          // access to session
           if(err) console.log("session store err".red,error);
           else console.log("sessionStore auth  ".green+session);
    }); 

    res.send(200);
}; 
```

我的节点出了什么问题，或者我错过了什么？

# mysql - MySQL 哪个先完成 - 过滤 WHERE 条件或计算字段？

> ID：16015095
> 
> 赞同：2
> 
> 时间：2013-04-15T12:25:04.123
> 
> 标签：mysql

执行 MySQL 查询时，是否所有数据都在计算任何字段之前被 WHERE 条件过滤？

我有一个应用程序，我需要按距离排序，但需要计算查询中与 lat/lng 的距离（[发现这应该涵盖其中的那一部分](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)（第 8 页）），但它提到查询相当慢。我想知道 MySQL 是否会计算出每个数据库条目的距离然后过滤这些结果，或者是否会先过滤结果？

**编辑：**

我没有说得很清楚 - 我只需要在这个阶段订购结果。按距离过滤也很好，但这始终是其他标准的次要 - 即类型总是需要是酒店，然后才重要它与坐标的距离有多近

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:29:25.277

WHERE 直接作用于行，这也是您不能在 WHERE 子句中指定列别名的原因。这将导致未知列错误。

您可以使用 HAVING 或子查询。在这两种情况下，都将计算所有行的结果，然后进行过滤。

**更新：**

您必须按距离过滤，对吗？所以你不能先过滤行，然后计算距离。但是你可以做的是使用空间扩展。然后你会有空间索引，这可以让你的查询非常快，我猜（从来没有与这样的事情有任何关系）。

[在此处](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html)阅读更多相关信息。

**更新 2：**

其实我完全不明白你的问题是什么。你想按你必须先计算的东西来订购。那么问题是什么？会很快吗？我不知道。我只能说，因为 MySQL 不支持计算列上的索引，所以不能使用索引。可能还会使用一个临时表来对您获得的任何数据进行排序，这取决于它有多少数据。我建议**尝试一下**。

做就是了

```
SELECT coordA, coordB
FROM whereever
ORDER BY coordA - coordB 
```

就是这样。当你有问题时，再问一次。

稍后过滤

```
SELECT * FROM (
SELECT coordA, coordB, coordA - coordB AS distance
FROM whereever
ORDER BY distance
) sq
WHERE distance > $foo 
```

当使用索引和/或前面提到的扩展名太慢时。

# c++ - 如何在谷歌地图上使用 QtWebview

> ID：16015102
> 
> 赞同：0
> 
> 时间：2013-04-15T12:25:35.620
> 
> 标签：c++, qt, qwebview

基本上我想将它用于googlemaps，但目前我什至无法让它编译一个简单的网页。

我正在使用最新版本的`Qt`创建者，但文档似乎已过时

我已将小部件拖到我的表单上并将其 url 设置为 google.com（仅用于测试目的）

当我点击编译时，我得到了大量未解决的外部符号错误，我不知道要包含什么来使用它我只是假设拖放小部件并且我很高兴，但事实并非如此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:13:49.247

编辑：对于 Qt 4.x，这就是你所做的：

进入您的 .pro 文件并包含 QtWebKit 的正确模块。

[http://qt-project.org/wiki/QtWebKit](http://qt-project.org/wiki/QtWebKit)

> QT += webkit

如果您需要更多信息，可以在 Qt Creator 的欢迎页面中找到以下示例：

[http://qt-project.org/doc/qt-4.8/webkit-fancybrowser.html](http://qt-project.org/doc/qt-4.8/webkit-fancybrowser.html)

祝你好运; 希望有帮助。顺便说一句，我刚刚用谷歌地图测试了它，它在 Win 7 上用 Qt 4.8.4 渲染得很好。

编辑：对于 Qt 5.x+，这就是你所做的：

> QT += webkitwidgets

就像它在此处任何示例的 .pro 文件中显示的那样：

[http://qt-project.org/doc/qt-5.0/qtwebkitexamples/webkitwidgets-browser-browser-pro.html](http://qt-project.org/doc/qt-5.0/qtwebkitexamples/webkitwidgets-browser-browser-pro.html)

[http://qt-project.org/doc/qt-5.0/qtwebkitexamples/qtwebkitexamples-index.html](http://qt-project.org/doc/qt-5.0/qtwebkitexamples/qtwebkitexamples-index.html)

您可能还想考虑`network`在 pro 文件中添加模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:19:16.383

好的，所以 iv`QT +=webkit`到处都看到了解决方案，如果您刚刚使用 qt 设计器将放置的 webview 拖到小部件中，则记录不起作用。

我终于发现可行的解决方案是

```
QT+=webkitwidgets 
```

现在所有工作都认为我在解决问题后回答了我自己的问题，以帮助可能遇到同样问题的其他人

# r - R中的BCG矩阵

> ID：16015103
> 
> 赞同：0
> 
> 时间：2013-04-15T12:25:39.170
> 
> 标签：r, graphics

我需要在 R 中做一个增长份额矩阵（BCG 矩阵）。我不知道是否可以在 R 中做这个图形。我会得到一个图形，因为这里[输入链接描述](http://en.wikipedia.org/wiki/File%3aFolio_Plot_BCG_Matrix_Example.png)

感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T13:37:20.700

这是使用 R 中的一些基本绘图函数的示例：

### 例子：

```
set.seed(1)
n = 10
x <- runif(n, min=0, max=2)
y <- runif(n, min=8, max=24)
z <- runif(n, min=0, max=100)

#z to cex function
a <- 1
b <- 0.02
z.cex <- a + b*z

example.cex <- seq(1,3,0.5)
example.z <- (example.cex - a)/b
example.z 

plot(x, y, pch=21, bg="orange", col="red", cex=z.cex, lwd=2, bty="n", xaxt="n", yaxt="n", xlab="", ylab="")
grid()
axis(1, at=seq(0,2,0.5), pos=16, col="green4", lwd=3)
axis(2, at=seq(8,24,4), pos=1, col="green4", lwd=3)
legend("topright", legend=c(example.z), pch=21, pt.bg="orange", col="red", pt.cex=example.cex, title="sales vol.", bg="white") 
```

![在此处输入图像描述](https://i.stack.imgur.com/GbwjC.png)

# sql - 使用数据框和数据库查询

> ID：16015106
> 
> 赞同：2
> 
> 时间：2013-04-15T12:25:45.407
> 
> 标签：sql, r, dataframe

我想知道是否可以像这样在数据框和数据库之间进行查询：

```
test <-  sqlQuery(ch,"
                  SELECT *
                  FROM table_from_database as A, dataframe as B
                  WHERE  a.id=b.id ") 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-15T15:31:18.227

使用 RODBC 包连接到 MS SQL Server 数据库。

首先，您需要进行一些设置。打开“数据源 (ODBC)”应用程序。（在`Control Panel\System and Security\Administrative Tools`中，或在“开始”菜单下搜索。）添加用户 DSN（或系统 DSN，如果您具有管理员权限并希望所有用户都可以连接）。

第 1 步：给它起一个名字，`MyDataBase`然后选择它所在的服务器。名称不应超过 32 个字符，否则您会收到警告。
第 2 步：连接详细信息与您在 SQL Server 中使用的相同。
第 3 步：将默认数据库更改为您要连接的数据库。
完成并测试您的连接。

现在您可以使用 R。它就像

```
library(RODBC)
channel <- odbcConnect("MyDataBase") #or whatever name you gave
query <- "SELECT * FROM MyTable WHERE x > 10"
results <- sqlQuery(query, channel)
odbcClose(channel) 
```

* * *

如果您喜欢或讨厌向导，您可以通过编写注册表项来设置 ODBC 连接。为大代码块道歉。

```
#' Reads the Windows registry
#'
#' Wrapper for readRegistry that replace environment variables.
#' @param ... Passed to readRegistry
#' @return A list of registry keys.  See \code{readRegistry}.
#' @examples
#' \dontrun{
#' key <- "Software\\ODBC\\ODBCINST.INI\\SQL Server"
#' hive <- "HLM"
#' read_registry(key, hive)
#' readRegistry(key, hive)
#' }
read_registry <- function(...)
{
  ans <- readRegistry(...)
  lapply(
    ans,
    function(x)
    {
      rx <- "%([[:alnum:]]+)%"
      if(is.character(x) && grepl(rx, x))
      {
        env_var <- stringr::str_match(x, rx)[, 2]
        x <- gsub(rx, Sys.getenv(env_var), x)
      }   
      x
    }
  )
}

#' Add an ODBC data source to the Windows registry.
#' 
#' Adds an ODBC data source to the Windows registry.  
#' 
#' @param data_source_name String specifying the name of the data source to add.
#' @param database The name of the database to use as the default.
#' @param database_server The name of the server holding the database.
#' @param type Type of connection to add.  Either ``sql'' or ``sql_native''.
#' @param permission Whether the connection is for the user or the system.
#' @return Nothing.  Called for the side-effect of registering ODBC data sources.
#' @details A key with the specified data source name is created in 
#' ``Software\\ODBC\\ODBC.INI'', either in ``HKEY_CURRENT_USER'' or 
#' ``HKEY_LOCAL_MACHINE'', depending upon the value of \code{permission}.  
#' Four values are added to this key.  ``Database'' is given the value of the  
#' \code{database} arg.  ``Server'' is given the value of the 
#' \code{database_server} arg. ``Trusted_Connection'' is given the value ``Yes''.
#' ``Driver'' is given the value from the appropriate subkey of 
#' ``HKEY_LOCAL_MACHINE\\SOFTWARE\\ODBC\\ODBCINST.INI'', depending upon the type.
#' Another key with the specified data source name is created in
#' ``Software\\ODBC\\ODBC.INI\\ODBC Data Sources''.
register_odbc_data_source <- function(data_source_name, database, database_server, type = c("sql", "sql_native"), permission = c("user", "system"))
{
  #assert_os_is_windows()

  #data_source_name <- use_first(data_source_name)

  permission <- match.arg(permission)
  type <- match.arg(type)  

  #Does key exist?
  odbc_key <- readRegistry(
    file.path("Software", "ODBC", "ODBC.INI", fsep = "\\"), 
    switch(permission, user = "HCU", system = "HLM")
  )
  if(data_source_name %in% names(odbc_key))
  {
    message("The data source ", sQuote(data_source_name), " already exists.")
    return(invisible())
  }

  hive <- switch(
    permission,
    user   = "HKEY_CURRENT_USER",
    system = "HKEY_LOCAL_MACHINE"
  )
  key <- shQuote(
    file.path(hive, "Software", "ODBC", "ODBC.INI", data_source_name, fsep = "\\")
  )
  odbc_data_sources_key <- shQuote(
    file.path(hive, "Software", "ODBC", "ODBC.INI", "ODBC Data Sources", fsep = "\\")
  )

  type_name <- switch(
    type,
    sql = "SQL Server",
    sql_native = "SQL Server Native Client 11.0"
  )
  driver <- read_registry(
    file.path("SOFTWARE", "ODBC", "ODBCINST.INI", type_name, fsep = "\\"), 
    "HLM"
  )$Driver

  system0(key)
  system0(key, "/v Database /t REG_SZ /d", database)
  system0(key, "/v Driver /t REG_SZ /d", shQuote(driver))
  system0(key, "/v Server /t REG_SZ /d", database_server)
  system0(key, "/v Trusted_Connection /t REG_SZ /d Yes")
  system0(odbc_data_sources_key, "/v", data_source_name, "/t REG_SZ /d", shQuote(type_name))
}

#' Wrapper to system for registry calls
#' 
#' Wraps the \code{system} function that calls the OS shell.
#' @param ... Passed to \code{paste} to create the command.
#' @return The command that was passed to system is invisibly returned.
#' @note Not meant to be called directly.
system0 <- function(...)
{
  cmd <- paste("reg add", ...)
  res <- system(cmd, intern = TRUE)
  if(res != "The operation completed successfully.\r")
  {
    stop(res)
  } else
  {
    message(res)
  }
  invisible(cmd)
} 
```

# php - php文件上传缺少换行符

> ID：16015114
> 
> 赞同：0
> 
> 时间：2013-04-15T12:26:13.993
> 
> 标签：php, upload, line-breaks

我有一个 excel 文件，其中包含我想用 php 上传的几列数据（Mac 10.8.2，office2011）。

在解码问题绕了很多弯路之后，我最终用 word 打开了 excel 文件，转换为文本，复制到 TextEdit 并保存为 utf-8。

上传`file($myFile);`工作正常，但`$medienarray = file($myFile); print_r($medienarray);`显示所有换行符都已删除。

但是，如果我手动删除 TextEdit 文件中的换行符并再次键入它们，它们会在新上传后被识别。

我尝试用`"\r"`正`"\n"`则表达式替换：

```
preg_replace('/\r/','/\n/',$medienarray[0],-1,&$anzahl); 
```

它显示了 20 个没有效果的替换。

数据行太多，无法手动替换所有换行符。

上传不是从 excel 文件创建的任何其他文本文件，没有任何换行问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:33:46.927

尝试将 \r 替换为 \r\n 而不仅仅是 \n。

见这里[http://en.wikipedia.org/wiki/Newline#In_programming_languages](http://en.wikipedia.org/wiki/Newline#In_programming_languages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:35:58.680

PHP 需要换行符“\r\n”，而不仅仅是“\r”或“\n”。看[这里](http://en.wikipedia.org/wiki/Newline#In_programming_languages)

# c# - LINQ to Entity 过滤其他表的多行

> ID：16015118
> 
> 赞同：-1
> 
> 时间：2013-04-15T12:26:22.770
> 
> 标签：c#, entity-framework

我有带有列的 Criteria 表`CriteriaID,CriteriaValueID,UserId,companyid`。其他表的`UserMaster`字段为`UserID,UserName,Email`。现在在 Criteria 表中，一个用户针对多个条件有多行。这里的行数是动态的。我正在使用 LINQ to Entity。我需要使用criteriavalueid 和criteriaid 使用and 表达式搜索用户。

```
E.g.
companyid UserID UserName 
1          1       ABC
1          2       BCD
2          3       CDE
CriteriaID CriteriaValueID UserId companyid
1           1               1       1
2           4               1       1
3           9               1       1
1           2               2       1
2           4               2       1 
```

当我搜索时，可以说我想要用户，`CriteriaID =2`然后`CriteriaValueID = 4`LINQ to entity 应该返回用户 ID 1,2。实际上它可以是多个，例如 1\. CriteriaID =2 和 CriteriaValueID = 4 2\. CriteriaID =3 和 CriteriaValueID = 5。这里我有我们需要用户的标准列表

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:30:19.907

你有没有试过什么？

```
from c in Criteria
where c.CriteriaID = 2 && c.CriteriaValueID = 4
select c.User 
```

这假设您在实体框架中创建的数据库和导航属性上定义了外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:54:36.257

这是假设你有你的`Criteria`对象和`CompanyUser`对象，可能命名为别的东西。

在示例中，我是`Criteria`手动添加的，但我假设您将拥有一些添加所需的东西，`Criteria`然后类似`Users`. 似乎`CriteriaID`and`CriteriaValueID`是多余的，如果您只比较`UserID`and `CompanyID`，除了`CriteriaID`用作唯一标识符或主键。

```
// Create a list of Criteria
List<Criteria> ListOfCriteria = new List<Criteria>();
// Add Criteria where Criteria ID = 2 and CriteriaValueID = 4 and Criteria ID = 2 
// Adding Criteria objects instead of retrieval for example, you want to retrieve the Criteria object from your existing list
ListOfCriteria.Add(new Criteria() { CriteriaID = 2, CriteriaValueID = 4, CompanyID = 1, UserID = 1 });
ListOfCriteria.Add(new Criteria() { CriteriaID = 1, CriteriaValueID = 1, CompanyID = 1, UserID = 1 });
// Create a list of your users
List<CompanyUser> ListOfUsers = new List<CompanyUser>();
// The below is to add users as shown in your example, ideally, you will be pulling your User object from database
ListOfUsers.Add(new CompanyUser() { CompanyID = 1, UserID = 1, UserName = "ABC" });
ListOfUsers.Add(new CompanyUser() { CompanyID = 1, UserID = 2, UserName = "BCD" });
ListOfUsers.Add(new CompanyUser() { CompanyID = 2, UserID = 3, UserName = "CDE" });
// Retrieve a single user that matches all your requirements
CompanyUser RetrievedUser = ListOfUsers.Where(a => ListOfCriteria.All(b => b.UserID == a.UserID && b.CompanyID == a.CompanyID)).FirstOrDefault();

if(RetrievedUser == null)
    MessageBox.Show("No user found");
else
    MessageBox.Show(RetrievedUser.UserName); 
```

# mysql - mysql方法用虚拟电子邮件地址替换文本字段中的有效电子邮件地址

> ID：16015122
> 
> 赞同：1
> 
> 时间：2013-04-15T12:26:35.723
> 
> 标签：mysql

我正在寻找最有效的方法来在 mysql 数据库的文本字段中查找电子邮件地址，并将所有实例替换为所有记录的虚拟电子邮件地址。

我在 stackoverflow 上找到了一个出色的 MS sql 版本，看起来它可以完成这项工作： update myTable set Company = stuff(Company, patindex(Company,'%[ ,&]Co[^A-Za-z-]%' +3,1,'.')

以上将在公司字段中找到所有“Co”文本并替换为“Co.”。

但这并不容易转化为 mysql，我很难找到 mysql 的等价物。请帮忙！

此字段是包含有效用户电子邮件地址的文本字段。我想清除有效的电子邮件地址并替换为虚拟电子邮件地址，例如 email@email.com。

# android - Android中的authSubToken异常

> ID：16015125
> 
> 赞同：0
> 
> 时间：2013-04-15T12:26:40.467
> 
> 标签：android, oauth, gmail

我正在使用以下代码从我的 android 应用程序中获取 Authsubtoken；以下是代码：

```
 GoogleAuthUtil.getToken(myCtx,  "mymail@gmail.com","oauth2:https://www.googleapis.com/auth/userinfo.profile") 
```

使用此代码，我得到以下异常：

```
com.google.android.gms.auth.UserRecoverableAuthException: NeedPermission 
```

如何克服这个异常？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:31:17.150

使用此异常

```
...
} catch (UserRecoverableAuthIOException e) {
   startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
}
... 
```

在这里查看更多

[https://stackoverflow.com/a/14386248/760489](https://stackoverflow.com/a/14386248/760489)

[https://stackoverflow.com/a/15142977/760489](https://stackoverflow.com/a/15142977/760489)

# tfs - 如何检查构建是否最终失败

> ID：16015126
> 
> 赞同：2
> 
> 时间：2013-04-15T12:26:42.943
> 
> 标签：tfs, msbuild, tfsbuild

我有一个 BuildDefinition 文件，在最后一部分中，由于部署的复杂性，我使用控制台应用程序部署应用程序（图像中的 B）。

但是当构建失败时，不应部署应用程序。

所以我想使用 BuildDetail.Status（在 A 中使用），但构建尚未完成，它显示 InProgress。

问题是，当构建失败时，如何阻止部署开始？（可能在 If (B) 中。

![构建定义的一部分](https://i.stack.imgur.com/8zajV.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:59:33.777

好的，想通了，应该使用`BuildDetail.CompilationStatus`

# c - 打印分段错误原因

> ID：16015127
> 
> 赞同：12
> 
> 时间：2013-04-15T12:26:45.147
> 
> 标签：c, linux, unix, segmentation-fault

假设我有一个导致分段错误的代码。

```
char * ptr = NULL;
*ptr = "hello"; /* this will cause a segmentation fault */ 
```

如何在**运行时**打印，发生分段错误的内存地址以及分段错误的原因（访问禁止的内存区域或其他内容）。

*我阅读了有关核心转储文件的信息，但我不确定它是否是正确的解决方案。*

我怎样才能做到这一点？

**PS**，我知道我可以通过使用 gdb 或其他调试器来实现这一点，但目的是通过使用代码来做到这一点，而且只有代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:59:57.890

如果您想知道原因，您可以注册一个信号处理程序，例如：

```
void handler(int signum, siginfo_t *info, void *context)
{
  struct sigaction action = {
    .sa_handler = SIG_DFL,
    .sa_sigaction = NULL,
    .sa_mask = 0,
    .sa_flags = 0,
    .sa_restorer = NULL
  };

  fprintf(stderr, "Fault address: %p\n", info->si_addr);
  switch (info->si_code) {
  case SEGV_MAPERR:
    fprintf(stderr, "Address not mapped.\n");
    break;

  case SEGV_ACCERR:
    fprintf(stderr, "Access to this address is not allowed.\n");
    break;

  default:
    fprintf(stderr, "Unknown reason.\n");
    break;
  }

  /* unregister and let the default action occur */
  sigaction(SIGSEGV, &action, NULL);
} 
```

然后在您需要注册的地方：

```
 struct sigaction action = {
    .sa_handler = NULL,
    .sa_sigaction = handler,
    .sa_mask = 0,
    .sa_flags = SA_SIGINFO,
    .sa_restorer = NULL
  };

  if (sigaction(SIGSEGV, &action, NULL) < 0) {
    perror("sigaction");
  } 
```

基本上，您注册一个在 SIGSEGV 交付时触发的信号，并获得一些附加信息，以引用手册页：

> ```
>  The following values can be placed in si_code for a SIGSEGV signal:
> 
>        SEGV_MAPERR    address not mapped to object
> 
>        SEGV_ACCERR    invalid permissions for mapped object 
> ```

这些映射到出现段错误的两个基本原因——您访问的页面根本没有映射，或者您不被允许执行您尝试对该页面执行的任何操作。

在信号处理程序触发后，它会自行注销并替换默认操作。这会导致无法再次执行的操作，因此可以被正常路由捕获。这是页面错误的正常行为（出现 seg 错误的前兆），因此请求分页之类的事情可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:53:12.087

正如这里已经回答的那样：[当我的 gcc C++ 应用程序崩溃时如何生成堆栈跟踪](https://stackoverflow.com/questions/77005/how-to-generate-a-stacktrace-when-my-gcc-c-app-crashes)

你可以（至少在 GCC 和 Linux/BSD 的情况下）很容易做到这一点：

示例代码：

```
#include <stdio.h>
#include <execinfo.h>
#include <signal.h>
#include <stdlib.h>

void handler(int sig) {
  void *array[10];
  size_t size;

  // get void*'s for all entries on the stack
  size = backtrace(array, 10);

  // print out all the frames to stderr
  fprintf(stderr, "Error: signal %d:\n", sig);
  backtrace_symbols_fd(array, size, 2);
  exit(1);
}

int main(int argc, char **argv) {
  signal(SIGSEGV, handler);   // install our handler

  char * ptr = NULL;
  *ptr = "hello"; /* this will cause a segmentation fault */
} 
```

示例输出：

```
# gcc -g -rdynamic -o test test.c
# ./test
Error: signal 11:
0   test                                0x000000010e99dcfa handler + 42
1   libsystem_c.dylib                   0x00007fff95c1194a _sigtramp + 26
2   ???                                 0x0000000000000000 0x0 + 0
3   libdyld.dylib                       0x00007fff8fa177e1 start + 0
4   ???                                 0x0000000000000001 0x0 + 1 
```

# c++ - C++ 查找 USB 设备挂载点

> ID：16015128
> 
> 赞同：1
> 
> 时间：2013-04-15T12:26:46.223
> 
> 标签：c++, linux, usb, libusb

我需要查找连接到运行 Linux 的计算机板的 USB 设备。为此，我使用了“libusb”库，效果很好，我可以检索制造商、序列号、产品 ID 等...

问题是我需要知道文件系统中的挂载点，以便我可以将此信息传递给另一个函数。

任何想法？

提前致谢。

卡尔斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:30:15.417

这个问题 - [https://superuser.com/questions/361885/how-do-i-figure-out-which-dev-is-a-usb-flash-drive](https://superuser.com/questions/361885/how-do-i-figure-out-which-dev-is-a-usb-flash-drive) 涉及了很多关于磁盘和有关它们的信息。

但是，我想向您指出页面下方的答案：[https](https://superuser.com/a/361893) ://superuser.com/a/361893 ，因为它解释了如何查找磁盘所在的位置。

# c# - c#中的backgroundworker问题

> ID：16015132
> 
> 赞同：-1
> 
> 时间：2013-04-15T12:26:57.337
> 
> 标签：c#, backgroundworker

目前我有一个图片框，上面有两个项目，一个处理 gif 文件和一个标签。现在，当调用 backgroundworker 时，我已经为所有三个项目（图片框、处理 gif、标签）调用了 BringToFront()

下面是我的后台工作人员代码片段

```
private void buttonUpload_Click(object sender, EventArgs e)
{
   LoadFile(pdfFullPath);
   bgwLoadFile.RunWorkerAsync(dummyPDFPath);
   pictureBox1.BringToFront();
   picLoading.BringToFront();
   label.BringToFront();
}

private void bgwLoadFile_DoWork(object sender, DoWorkEventArgs e)
{       
    this.Invoke((MethodInvoker)delegate() {
        acrPDFViewer.LoadFile(e.Argument.ToString());
    });
}

private void bgwLoadFile_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (e.Cancelled == true)
    {
    }
    else if (e.Error != null)
    {
    }
    else
    {
        pictureBox1.SendToBack();
        picLoading.SendToBack();
        label.SendToBack();
    }
} 
```

在执行时，它没有向我显示这三个项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:33:26.023

这对我有用：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        UpdateControls(false);

        bgwLoadFile.DoWork += new DoWorkEventHandler(bgwLoadFile_DoWork);
        bgwLoadFile.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bgwLoadFile_RunWorkerCompleted);
    }

    private void buttonUpload_Click(object sender, EventArgs e)
    {
        UpdateControls(true);
        bgwLoadFile.RunWorkerAsync();
    }

    void bgwLoadFile_DoWork(object sender, DoWorkEventArgs e)
    {
        //simulate work
        System.Threading.Thread.Sleep(2000);
    }

    void bgwLoadFile_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if(!e.Cancelled && e.Error == null)
            UpdateControls(false);
    }

    private void UpdateControls(bool isVisable)
    {
        if (isVisable)
        {
            pictureBox1.BringToFront();
            picLoading.BringToFront();
            label1.BringToFront();
        }
        else
        {
            pictureBox1.SendToBack();
            picLoading.SendToBack();
            label1.SendToBack();
        }
    }
} 
```

如果您只想让这三个控件仅在 backgroundworker 处于活动状态时显示，您可以将`UpdateControls()`-method 更改为：

```
private void UpdateControls(bool isVisable)
{
    pictureBox1.Visible = isVisable;
    picLoading.Visible = isVisable;
    label1.Visible = isVisable;
} 
```

# php - 使用 cURL POST 方法的问题

> ID：16015137
> 
> 赞同：0
> 
> 时间：2013-04-15T12:27:15.780
> 
> 标签：php, javascript, ajax, xhtml, web-scraping

我正在尝试抓取网站以提取 XHTML 数据以保存为 PHP 中的变量。

该网站使用 AJAX，这意味着我正在寻找的数据是在 XMLHttpRequest 之后使用搜索字符串返回的，例如`http://website.com/ajax.php?mid=2&pid=4`

我尝试设置从 Chrome 和 Firefox 获得的请求标头（略有不同），并包括它们尝试使用`curl_setop()`和`stream_context_create()`选项`file_get_contents()`，但数据仍未返回。当我在 Chrome 中检查脚本的请求标头时，它会显示该方法，`GET`即使它已设置为`POST`. 它对 cURL 和流上下文都执行此操作。

该网站不需要登录，但我注意到它发送会话 cookie 作为请求的一部分，我也将其包含在 HTTP 请求中，但无济于事。

需要注意的另一点是，`Content-Length`从请求标头中删除值会立即返回一个空白页面，而将其保留在超时前会保持加载大约一分钟，但这可能无关紧要。

我的问题是有没有其他人使用 HTTP 标头处理 PHP 和 AJAX 请求的经验，为什么我在将其`GET`指定为时会看到一个请求`POST`？

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:44:17.147

这是在 CURL 中进行 POST 的一种方法：

```
<?php
session_start();
if( empty( $_SESSION ) ) {
  header('Location: /directar/index.php/site/login/return/Test');
}
echo "Info de sesion:";
var_dump( $_SESSION );

$c = curl_init('http://ws048-nueva/directar/index.php/AccessTest/CheckAcess');
$parametros_post = 'action=verChau';
curl_setopt($c, CURLOPT_POST, true); 
curl_setopt($c, CURLOPT_POSTFIELDS, $parametros_post); 
curl_setopt($c, CURLOPT_VERBOSE, TRUE);
curl_setopt($c, CURLOPT_COOKIE, 'PHPSESSID=' . $_COOKIE['PHPSESSID']);
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
session_write_close();
$page = curl_exec ($c);
echo "<br>";
echo "<br>";
echo  $page;
curl_close ($c);

if( $page === 'true' ) {
  echo "<br>si";
}
else {
  echo "<br>no";
}

?> 
```

这是我在 Yii 中使用 CheckAccess 方法完成的，如果当前登录的用户有权执行我作为 POST 参数发送的操作并且它正在工作，则返回 true 或 false。（我正在传递会话信息 cookie）。

# php - 替换 MySQL 中的 NULL 值

> ID：16015143
> 
> 赞同：1
> 
> 时间：2013-04-15T12:27:41.933
> 
> 标签：php, mysql

使用这个时如何查找和替换空行.....

```
$Qemaster="select * from emaster where `branch`='$bid' and `department`='$did' and `status`!='L'";
$Remaster=mysql_query($Qemaster);
while($Rowemaster=mysql_fetch_array($Remaster)){
    $empcode=$Rowemaster[id];
    $name=$Rowemaster[name];
    $Tleave=0;

echo "<tr>";
echo "<td rowspan='2'>".$name."</td>";
echo "<td>Leave</td>";

$Qlp="select * from lpsummary where ((`month` IN(04,05,06,07,08,09,10,11,12) and `year`='$year') or (`month` IN (01,02,03) and `year`='$Nyear')) and `empcode`='$empcode'";
$Rlp=mysql_query($Qlp);
$RRlp=mysql_num_rows($Rlp);
while($Rowlp=mysql_fetch_array($Rlp)){  

$leave=$Rowlp['leave'];
$Tleave=$Tleave+$leave;
if($leave==NULL){
    $Eleave='-';
}
else{
    $Eleave=$leave;
}
echo "<td>".$Eleave."</td>";
}
echo "<td><font color='red'>".$Tleave."</font></td>";
echo "<td><font color='green'>".substr(($Tleave/$RRlp),0,4)."</font></td>";
echo "<tr><td>Percentage</td>";
} 
```

如果有一个空行...我想将其替换为 - 而不是 echo "".$Eleave."";

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:29:36.320

`IF-ELSE`实际上，您可以通过查询直接执行此操作，因此您的 php 代码中不会有任何条件。通过使用`COALESCE()`，例如

此外，养成指定列名的习惯，而不是使用`*`.

```
SELECT colnames,..., COALESCE(`leave`, '-') `Leave`
FROM   lpsummary
WHERE  ..... 
```

**更新 1**

```
SELECT  COALESCE(l.leave, '-') AS `LEAVE`
FROM    lpsummary l
WHERE   (
            (month IN(04,05,06,07,08,09,10,11,12) and year='$year') or 
            (month IN (01,02,03) and year='$Nyear')
        ) and empcode='$empcode' 
```

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# less - 重用 CSS LESS 代码

> ID：16015145
> 
> 赞同：3
> 
> 时间：2013-04-15T12:27:55.807
> 
> 标签：less

例如，您有以下内容：

```
#nav {
position: relative;
background: transparent;
width: 100%;
color: #FFF;

.block {
    padding-top: 2em;
}

ul {
    border: none;
    margin: 0;

    li {
        border: none;
        .inline-block;
        font-size: 1em;
        padding: 0 0.4em;
        text-shadow: 1px 1px 1px #171717;

        a:link, a:visited {
            padding: 0;
            color: #777;
        }

        a:hover {
            color: @hover;
        }

        &.highlight a {
            color: @highlight;
        }

        &:hover {
            background: none;
            border: none;
        }
    }
} 
```

}

如果您想在样式表中使用相同的代码 3 次，有没有办法将其保存为变量或类似的 LESS？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T12:32:45.330

当然，您可以使用之前定义的类和 id 规则集作为其他定义的属性，如下所示：

```
.classname {
    #nav;
    /* further styling here */
} 
```

有关更多信息，请参阅此链接： http: [//lesscss.org/#-mixins](http://lesscss.org/#-mixins)

# sql - SQL 全选并更改一列的格式

> ID：16015151
> 
> 赞同：8
> 
> 时间：2013-04-15T12:28:02.980
> 
> 标签：sql, select, casting

我在想。如果我有一个包含 20 个（或更多）列名的表，并且我想选择所有这些列，但是这 20 列中的一列是日期列，并且您想更改该列的格式，您会怎么做那？这显然不起作用（创建了重复的列）

```
Select *, CONVERT(varchar(100),courseStartDate,111) from EthicsManagement 
```

这是为了避免编写选择语句单独选择所有 20 列并使用语句转换其中之一

```
 Select xxxx,xxx,xxx,xxx,xx,xx,xxx,xxx,xx,xx,xxx,xxx,xx, CONVERT(varchar(100),courseStartDate,111) from xxx 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T12:31:11.563

只要您将列命名为不同的名称，它就应该允许您这样做：

```
Select *, CONVERT(varchar(100),courseStartDate,111) as myConvertedDateColumn
from EthicsManagement 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:31:17.993

```
Select t.*, CONVERT(varchar(100),courseStartDate,111) as converted from EthicsManagement t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-25T06:33:44.127

我看到两个选项：

1.  使用 SCRIPT AS TABLE 菜单选项让它自动输入所有列名，然后删除您不想要的列名（并在那里添加您的 CONVERT() 函数） -[请参阅此 StackOverflow 答案](https://stackoverflow.com/a/11465635/2479593)；

2.  创建一个 TEMP 表，在其中 DROP COLUMN 重复列 -[请参阅此 StackOverflow 答案](https://stackoverflow.com/a/1712243/2479593)。

# javascript - 空 javascript 事件的最佳实践（例如 onclick="javascript:;"）

> ID：16015156
> 
> 赞同：7
> 
> 时间：2013-04-15T12:28:10.953
> 
> 标签：javascript, html

如果你想要一个事件或一个空 javascript 调用的链接，有几种方法，我能想到：

```
<a href="#">Method 1</a>                    <- Ugh... changes URL in browser
<a href="javascript:;">Method 1</a>         <- My currently preferred method
<a href="javascript:void(0);">Method 1</a>  <- Another approach? 
```

就跨浏览器兼容性和简短性而言，最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T12:32:15.960

如果他们不使用链接，请不要使用......好吧，链接到任何东西。

相反，使用`span`有点像这样：

```
<span class="spanlink" onclick=something>This is some text</span> 
```

在你的 CSS 中：

```
.spanlink {
    text-decoration: underline;
    color: blue;
    cursor: pointer; /* Ragnagord's suggestion in comments */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T12:31:02.080

一个jQuery解决方案..

```
$('a.preventDefault').click(function(){
 return false
});

<a href="#" class="preventDefault">Method 1</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T12:29:53.983

怎么样`button`？如果他们没有在任何地方领先，我从不使用锚点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:32:06.793

使用[不显眼的 Javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。

此外，如果一个链接在没有 Javascript 的情况下无法执行任何操作，那么没有 Javascript 的用户甚至应该看不到该链接。通过 Javascript 添加链接。

# python - PyTables 列到普通 python 列表

> ID：16015157
> 
> 赞同：3
> 
> 时间：2013-04-15T12:28:10.970
> 
> 标签：python, pytables

我在玩 PyTables，偶然发现了一些我认为很明显的东西。我正在关注教程，但我想我误解了。

我有一个 PyTables Column 对象，我想将它的内容传输到列表或 numpy 数组。

所以我希望会有类似的东西：

`mylist = h5file.root.mygroup.mytable.cols.mycolumn.to_array()`

我想我可以迭代，并将每个值分别放在列表中，但我想知道我是否可以以某种方式直接提取它。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:28:57.360

尝试这个：

```
mylist = h5file.root.mygroup.mytable.cols.mycolumn[:] 
```

# java - 如何在 Web 应用程序中更新或修改属性文件

> ID：16015161
> 
> 赞同：1
> 
> 时间：2013-04-15T12:28:26.330
> 
> 标签：java, jsf

我可以使用 InputStream 加载属性文件，但修改后无法更新。

```
FileOutputStream output = 
            new FileOutputStream("/src/main/resources/test.properties");
props.store(output, "Last Time the file have been modified at:"); 
```

如何更新？任何建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:12:41.127

很难确定您在这里的实际意思，但*在我看来，*您希望您的 web 应用程序更新它使用`getResource`或读取的属性文件`getResourceAsStream`。这可能很难甚至是不可能的，这绝对是一个坏主意。

最好的办法是将属性存储在 webapp 数据库的表中。但是，如果您没有数据库，那么您可以将属性文件存储在文件系统中的某个位置……前提是允许这样做。

唯一保证存在并可写入 webapp 的文件系统是它的临时文件空间： [https](https://stackoverflow.com/a/2663250/139985) ://stackoverflow.com/a/2663250/139985 。但是当然，如​​果您选择和配置 Web 容器和/或主机操作系统，您可以找到其他（容器/操作系统特定的）位置来存储不太临时的状态。问题是您的解决方案可能是不可移植的。

# python - 正则表达式在 python 中不起作用

> ID：16015163
> 
> 赞同：2
> 
> 时间：2013-04-15T12:28:35.407
> 
> 标签：python, regex

我正在为电话号码编写正则表达式。我制作了一个非常基本的正则表达式来匹配电话号码。

```
^[-+[:blank:][:digit:]]*$. 
```

但是那个不在python中工作。如果我在其他工具上尝试相同的正则表达式，例如用于正则表达式搜索的文本编辑，那么它就可以工作了。我对正则表达式很陌生，所以如果我能得到一些帮助会很棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:31:15.290

试试这个（说你允许的电话没有长度是 10 到 15 位）：

`/^[0-9\-\+\s]{10,15}$/`

.

这将允许：

1) 数字 (0-9)

2）空间

3) 破折号“-”

4) 加号“+”

这不是严格执行。要获得精确的严格格式，您可能需要根据需要进行更改。

# batch-file - 替换 INI 文件中的值 - Rojo 的脚本

> ID：16015164
> 
> 赞同：1
> 
> 时间：2013-04-15T12:28:35.733
> 
> 标签：batch-file

我发现 Rojo 的非常酷的批处理脚本位于此处：[从 Windows 批处理文件中读取 ini](https://stackoverflow.com/questions/2866117/read-ini-from-windows-batch-file)，它运行良好，但有 1 个我无法弄清楚的怪癖。每当它在批处理文件中遇到 & 时，它都会尝试执行紧随其后的内容。

这是一个示例 ini 文件：

```
Password=3]#{$[1[Hx&_r

URL=http://www.osha.gov/pls/oshaweb/owasrch.search_form?p_doc_type=STANDARDS&p_toc_level=0 
```

执行时

```
C:\Scripts\Batch>INI /i Database /v MP2 "C:\ProgramData\Infor\MP2 6.1 SQL Server Edition\Mp2_2.ini"
MP2
'_r' is not recognized as an internal or external command,operable program or batch file.
'p_toc_level' is not recognized as an internal or external command,operable program or batch file. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:48:56.940

给你马特。我还没有像它应该的那样彻底测试这个，所以如果你有任何问题，请告诉我。在我花一点时间打磨它并觉得它已经过彻底测试之后，我可能还会在从 Windows 批处理文件页面[读取 ini上更新我的答案。](https://stackoverflow.com/questions/2866117)

```
@if (@a==@b) @end /* -- batch / JScript hybrid line to begin JScript comment

:: --------------------
:: ini.bat
:: ini.bat /? for usage
:: --------------------

@echo off
setlocal enabledelayedexpansion

goto begin

:: color code by jeb -- https://stackoverflow.com/a/5344911/1683264
:c
set "param=^%~2" !
set "param=!param:"=\"!"
findstr /p /A:%1 "." "!param!\..\X" nul
<nul set /p ".=%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%"
exit /b
:: but it doesn't handle slashes.  :(
:s
<NUL set /p "=/"&exit /b

:usage
for /F "tokens=1,2 delims=#" %%a in ('"prompt #$H#$E# & echo on & for %%b in (1) do rem"') do set "DEL=%%a"
<nul > X set /p ".=."

echo Usage:
call :c 07 "   query:"
call :c 0F " %~nx0 "&call :s&call :c 0F "i item ["&call :s&call :c 0F "s section] inifile"&echo;
call :c 07 "   create or modify:"
call :c 0F " %~nx0 "&call :s&call :c 0F "i item "&call :s&call :c 0F "v value ["&call :s&call :c 0F "s section] inifile"&echo;
call :c 07 "   delete:"
call :c 0F " %~nx0 "&call :s&call :c 0F "d item ["&call :s&call :c 0F "s section] inifile"&echo;
echo;
echo Take the following ini file for example:
echo;
echo    [Config]
echo    password=1234
echo    usertries=0
echo    allowterminate=0
echo;
echo To read the "password" value:
call :c 0F "   %~nx0 "&call :s&call :c 0F "s Config "&call :s&call :c 0F "i password inifile"&echo;
echo;
echo To modify the "usertries" value to 5:
call :c 0F "   %~nx0 "&call :s&call :c 0F "s Config "&call :s&call :c 0F "i usertries "&call :s&call :c 0F "v 5 inifile"&echo;
echo;
echo To add a "timestamp" key with a value of the current date and time:
call :c 0F "   %~nx0 "&call :s&call :c 0F "s Config "&call :s&call :c 0F "i timestamp "&call :s&call :c 0F "v ""%DEL%%%%%date%%%% %%%%time%%%%""%DEL% inifile"&echo;
echo;
echo To delete the "allowterminate" key:
call :c 0F "   %~nx0 "&call :s&call :c 0F "s Config "&call :s&call :c 0F "d allowterminate inifile"&echo;
echo;
call :c 07 "In the above examples, "&call :s
call :c 0F "s Config "
echo is optional, but will allow the selection of
echo a specific item where the ini file contains similar items in multiple sections.
del X
goto :EOF

:begin
if "%~1"=="" goto usage
for %%I in (item value section found) do set %%I=
for %%I in (%*) do (
    if defined next (
        if !next!==/i set "item=%%~I"
        if !next!==/v (
            set modify=true
            set "value=%%~I"
        )
        if !next!==/d (
            set "item=%%~I"
            set modify=true
            set delete=true
        )
        if !next!==/s set "section=%%~I"
        set next=
    ) else (
        for %%x in (/i /v /s /d) do if "%%~I"=="%%x" set "next=%%~I"
        if not defined next (
            set "arg=%%~I"
            if "!arg:~0,1!"=="/" (
                1>&2 echo Error: Unrecognized option "%%~I"
                1>&2 echo;
                1>&2 call :usage
                exit /b 1
            ) else set "inifile=%%~I"
        )
    )
)
for %%I in (item inifile) do if not defined %%I goto usage
if not exist "%inifile%" (
    1>&2 echo Error: %inifile% not found.
    exit /b 1
)

cscript /nologo /e:jscript "%~f0" "%inifile%" "!section!" "!item!" "!value!" "%modify%" "%delete%"

exit /b %ERRORLEVEL%

:: Begin JScript portion */
var inifile = WSH.Arguments(0),
section = WSH.Arguments(1),
item = WSH.Arguments(2),
value = WSH.Arguments(3),
modify = WSH.Arguments(4),
del = WSH.Arguments(5),
fso = new ActiveXObject("Scripting.FileSystemObject"),
stream = fso.OpenTextFile(inifile, 1),

// (stream.ReadAll() will not preserve blank lines.)
data = [];
while (!stream.atEndOfStream) { data.push(stream.ReadLine()); }
stream.Close();

// trims whitespace from beginning and end, returns lower case
String.prototype.unify = function() { return this.replace(/^\s+|\s+$/,'').toLowerCase(); };

// splices a new element into an array just after the last non-empty element.  If first arg is a number, start at that position and look backwards.
Array.prototype.cram = function() {
    for (var args=[], i=0; i<arguments.length; i++) { args.push(arguments[i]); }
    var i = (typeof args[0] == "number" && Math.floor(args[0]) == args[0]) ? args.shift() : this.length;
    while (i>0 && !this[--i].length) {};
    for (var j=0; j<args.length; j++) this.splice(++i, 0, args[j]);
}

function saveAndQuit() {
    while (data && !data[data.length - 1].length) data.pop();
    var stream = fso.OpenTextFile(inifile, 2, true);
    stream.Write(data.join('\r\n') + '\r\n');
    stream.Close();
    WSH.Quit(0);
}

function fatal(err) {
    WSH.StdErr.WriteLine(err);
    WSH.Quit(1);
}

if (section && !/^\[.+\]$/.test(section)) section = '[' + section + ']';

if (modify) {
    if (section) {
        for (var i=0; i<data.length; i++) {
            if (data[i].unify() == section.unify()) {
                for (var j=i + 1; j<data.length; j++) {
                    if (/^\s*\[.+\]\s*$/.test(data[j])) break;
                    var keyval = data[j].split('=') || [];
                    if (keyval.length < 2) continue;
                    var key = keyval.shift(), val = keyval.join('=');
                    if (key.unify() == item.unify()) {
                        if (del) data.splice(j, 1);
                        else {
                            data[j] = item + '=' + value;
                            WSH.Echo(value);
                        }
                        saveAndQuit();
                    }
                }
                if (del) fatal(item + ' not found in ' + section + ' in ' + inifile);
                data.cram(j ,item + '=' + value);
                WSH.Echo(value);
                saveAndQuit();
            }
        }
        if (del) fatal(section + ' not found in ' + inifile);
        data.cram('\r\n' + section, item + '=' + value);
        WSH.Echo(value);
        saveAndQuit();
    }
    else { // if (!section)
        for (var i=0; i<data.length; i++) {
            var keyval = data[i].split('=') || [];
            if (keyval.length < 2) continue;
            var key = keyval.shift(), val = keyval.join('=');
            if (key.unify() == item.unify()) {
                if (del) data.splice(i, 1);
                else {
                    data[i] = item + '=' + value;
                    WSH.Echo(value);
                }
                saveAndQuit();
            }
        }
        if (del) fatal(item + ' not found in ' + inifile);
        data.cram(item + '=' + value);
        WSH.Echo(value);
        saveAndQuit();
    }
}
else if (section) { // and if (!modify)
    for (var i=0; i<data.length; i++) {
        if (data[i].unify() == section.unify()) {
            for (var j=i + 1; j<data.length; j++) {
                if (/^\s*\[.+\]\s*$/.test(data[j])) fatal(item + ' not found in ' + section + ' in ' + inifile);
                var keyval = data[j].split('=') || [];
                if (keyval.length < 2) continue;
                var key = keyval.shift(), val = keyval.join('=');
                if (key.unify() == item.unify()) {
                    WSH.Echo(val);
                    WSH.Quit(0);
                }
            }
        }
    }
    fatal(section + ' not found in ' + inifile);
}
else { // if (item) and nothing else
    for (var i=0; i<data.length; i++) {
        var keyval = data[i].split('=') || [];
        if (keyval.length < 2) continue;
        var key = keyval.shift(), val = keyval.join('=');
        if (key.unify() == item.unify()) {
            WSH.Echo(val);
            WSH.Quit(0);
        }
    }
    fatal(item + ' not found in ' + inifile);
} 
```

### 更新

脚本*应*保留并返回适当的`%ERRORLEVEL%`. 成功返回值`0`; 错误，`1`。

[此外，我使用一些jeb 的代码](https://stackoverflow.com/a/5344911/1683264)使使用文档更漂亮。

# opencv - 'calibrateCamera' 未在此范围内声明

> ID：16015167
> 
> 赞同：0
> 
> 时间：2013-04-15T12:28:42.223
> 
> 标签：opencv, camera

我尝试使用 calibrateCamera() 函数获取相机矩阵：

> 双 x = calibrateCamera(objectPoints,imagePoints,imageSize,cameraMatrix,distCoeffs,rvecs,tvecs,0);

我得到了

> 'calibrateCamera' 未在此范围内声明

我没有忘记写

> 使用命名空间简历；

会是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:08:34.777

好，我知道了：

我错过了标题：

> #include "opencv2/calib3d/calib3d.hpp"

不管怎么说，还是要谢谢你

# excel - 删除excel图表中的外部链接

> ID：16015171
> 
> 赞同：0
> 
> 时间：2013-04-15T12:28:53.857
> 
> 标签：excel, vba, diagram

我已将整个表格从一个 Excel 文档复制到另一个。该表中的图表也被复制。

但是，图表中的数据是指另一个 excel 文档而不是当前工作表。

这意味着链接确实看起来像

```
'C:\LokaleBilder\[P3-20x]Tabelle1'!$B$3:$B$403 
```

代替

```
'20x-(Kreuz)'!$B$3:$B$403 
```

请注意，工作表名称也已更改。

如果这可以通过一些 vba 代码修复，我想知道如何。

编辑：

注意这些不是超链接，它的链接是做文档的。

我试图通过删除文档字符串来处理它。但是失败了：

```
Dim currSheet As String
currSheet = ActiveSheet.Name

ActiveSheet.ChartObjects("Diagramm 1").Activate

Dim xSer As Series
Dim xvalueStr As String
Dim valueStr As String
Dim m As Integer
For m = 1 To ActiveChart.SeriesCollection.Count
    xvalueStr = ActiveChart.SeriesCollection(m).XValues 
```

和

> 数据类型不匹配

在最后一行

Edit2：我可以发现 xvalues 是 datatype `Range`。但是，我不知道如何修改此 Range 数据类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:20:52.197

I've had a quick go at trying to reproduce what (I think) you're doing.

I think you selected the whole sheet, copied and then pasted the lot into cell A1 of your second workbook. In my test it copied the data and the chart but the chart remained linked to the data in the source workbook.

If you do want to copy the entire worksheet to another workbook and keep any charts linked to the copied data and not the source, I think using the *move or copy* feature will let you acheive this.

Right click your worksheet's tab and select move or copy. In the dialogue that appears, select your second workbook in the dropdown box, the position you want the sheet to be in using the listbox and then check the "Create a Copy" box.

![move or copy](https://i.stack.imgur.com/ymwNL.png)

If that does solve your issue, and its a process you need to repeat regularly, you could use the macro recorder to automate it. You might need to modify the macro slightly but it should show you *how* to programatically acheive your copy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:20:32.260

我用价值解决了问题`.Formula`

```
Option Explicit

Sub MainRemoveDocumentLinks()

ActiveSheet.ChartObjects("Diagramm 1").Activate

Dim xSer As Series
Dim valueStr As String
Dim m As Integer
For m = 1 To ActiveChart.SeriesCollection.Count
    valueStr = ActiveChart.SeriesCollection(m).Formula
    ActiveChart.SeriesCollection(m).Formula = replaceSeriesLink(valueStr)
    Debug.Print ActiveChart.SeriesCollection(m).Formula
Next

End Sub

Function replaceSeriesLink(inputStr As String) As String

Dim currSheet As String
currSheet = ActiveSheet.Name

Dim pos As Integer
Dim pos_old As Integer

pos = 1
pos_old = 0

Dim pos_start As Integer
Dim pos_end As Integer

pos_start = 0
pos_end = 0

Do While pos > 0
    pos = InStr(pos + 1, inputStr, "'")
    If pos_old = pos Then
        Exit Do
    End If
    If pos_start = 0 Then
        pos_start = pos
    Else
        pos_end = pos
        Dim DatalinkToReplace As String
        DatalinkToReplace = Mid(inputStr, pos_start + 1, pos_end - pos_start - 1)
        inputStr = Replace(inputStr, DatalinkToReplace, currSheet)
        Debug.Print inputStr
        pos_start = 0
    End If

    pos_old = pos
Loop

replaceSeriesLink = inputStr

End Function 
```

# tomcat - Tomcat 7 无法开始给出异常：java.security.NoSuchAlgorithmException: SHA1PRNG SecureRandom 不可用

> ID：16015173
> 
> 赞同：1
> 
> 时间：2013-04-15T12:28:59.460
> 
> 标签：tomcat, java

您好，当我尝试启动新安装的 tomcat 7 时，它无法启动并在 tomcat7-stderr.log 上记录错误，但出现以下异常：

```
SEVERE: Exception initializing random number generator using algorithm [SHA1PRNG] 
java.security.NoSuchAlgorithmException: SHA1PRNG SecureRandom not available
    at sun.security.jca.GetInstance.getInstance(GetInstance.java:159)
    at java.security.SecureRandom.getInstance(SecureRandom.java:276)
    at org.apache.catalina.util.SessionIdGenerator.createSecureRandom(SessionIdGenerator.java:219)
    at org.apache.catalina.util.SessionIdGenerator.getRandomBytes(SessionIdGenerator.java:183)
    at org.apache.catalina.util.SessionIdGenerator.generateSessionId(SessionIdGenerator.java:153)
    at org.apache.catalina.session.ManagerBase.startInternal(ManagerBase.java:574)
    at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:466)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5199)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1044)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:967)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1305)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:379)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:324)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1041)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431)

Apr 15, 2013 2:21:47 PM org.apache.catalina.util.SessionIdGenerator createSecureRandom
SEVERE: Exception initializing random number generator using algorithm [SHA1PRNG] 
java.security.NoSuchAlgorithmException: SHA1PRNG SecureRandom not available
    at sun.security.jca.GetInstance.getInstance(GetInstance.java:159)
    at java.security.SecureRandom.getInstance(SecureRandom.java:276)
    at org.apache.catalina.util.SessionIdGenerator.createSecureRandom(SessionIdGenerator.java:233)
    at org.apache.catalina.util.SessionIdGenerator.getRandomBytes(SessionIdGenerator.java:183)
    at org.apache.catalina.util.SessionIdGenerator.generateSessionId(SessionIdGenerator.java:153)
    at org.apache.catalina.session.ManagerBase.startInternal(ManagerBase.java:574)
    at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:466)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5199)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1044)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:967)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1305)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:379)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:324)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1041)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431)

java.lang.InternalError: internal error: SHA-1 not available.
    at sun.security.provider.SecureRandom.init(SecureRandom.java:105)
    at sun.security.provider.SecureRandom.<init>(SecureRandom.java:84)
    at java.security.SecureRandom.getDefaultPRNG(SecureRandom.java:191)
    at java.security.SecureRandom.<init>(SecureRandom.java:155)
    at org.apache.catalina.util.SessionIdGenerator.createSecureRandom(SessionIdGenerator.java:242)
    at org.apache.catalina.util.SessionIdGenerator.getRandomBytes(SessionIdGenerator.java:183)
    at org.apache.catalina.util.SessionIdGenerator.generateSessionId(SessionIdGenerator.java:153)
    at org.apache.catalina.session.ManagerBase.startInternal(ManagerBase.java:574)
    at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:466)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5199)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1044)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:967)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1305)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:379)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:324)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1041)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431) 
```

我试图寻找这个异常，但我无法理解它是什么，我试图重新安装 tomcat 但它仍然给我同样的错误。那么我应该怎么做才能启动我的tomcat？

**更新**我在 Windows 7 32 位机器上使用 jdk 1.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:39:37.257

如果您使用的是 OpenJDK 1.6，请尝试更改为 Oracle 的 JDK。这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T14:26:41.103

java.security.NoSuchAlgorithmException：SHA1PRNG SecureRandom 不可用

可以通过在 java 的 security 文件夹下添加正确的策略和安全文件来解决此问题

# jquery - 禁用链接时限制 jQuery 确认对话框

> ID：16015187
> 
> 赞同：2
> 
> 时间：2013-04-15T12:29:17.940
> 
> 标签：jquery, html, anchor

我有一个链接：

```
<a id="my_link" data-method="post" data-confirm="Are you sure you want to do this?" class="btn btn-success disabled" href="#">My Link</a> 
```

以及以下 jQuery（在 CoffeeScript 中）：

```
$('#my_link').click (e) ->
  if $(this).hasClass('disabled')
    e.preventDefault()
  else
    # Do other stuff 
```

不幸的是，如果它有 类`disabled`，确认对话框仍然出现。我以为`e.preventDefault()`会做的伎俩，但可惜它没有。

我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:36:51.770

正如@martincarlin87 建议的那样。解决方案是`return false`在防止违约之后。我希望这不是必需的，但对我的问题的回复评论似乎回答了它。

> `preventDefault`阻止事件的默认操作，它不会阻止处理程序的执行。- 不明确的

**更新**

提出其中一条评论。@mcpDESIGNS 表示`e.stopPropagation()`阻止即将到来的事件处理程序。通过这样`return false`做`e.preventDefault()`和`e.stopPropagation()`。

# servicestack - 使用 IReturnVoid 接口时未序列化的验证异常

> ID：16015192
> 
> 赞同：2
> 
> 时间：2013-04-15T12:29:50.327
> 
> 标签：servicestack

尝试 ServiceStack 验证功能时遇到问题。如果我的请求 DTO 继承了 IReturnVoid 接口，则异常类型为 WebException，但如果我将 IReturnVoid 更改为 IReturn，则我可以捕获 WebServiceException 并且我的验证错误被序列化。是这个错误还是它背后的任何逻辑？如果是这样，我将不得不更改我所有的 put 和 delete 请求以返回 int 而不是 void。谢谢你。

# vb.net - 将数据从 datagridview 复制到多个文本框

> ID：16015202
> 
> 赞同：2
> 
> 时间：2013-04-15T12:30:09.163
> 
> 标签：vb.net, datagridview

在 datagridview 方面需要帮助...

我的项目使用 Visual Studio 3.5，后端使用 MS access2000 db。

我的要求是，单击文本框后，应出现一个数据网格，双击所需的单元格后，其值将复制到文本框中，并且数据网格视图消失。问题是我必须使用相同的方法填充多个文本框，但应该保存来自同一个 datagridview 的不同数据。我怎样才能做到这一点？？？请帮忙...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:46:50.937

DataGridViews 有很多你可以使用的事件。在我的头顶，我相信一个是单独的东西

```
Private sub OnCellContentClick(some args, DataGridView.OnCellContentClick e)
  someTextBox.text = DataDrigView.item(e.colIndex,e.rowIndex)
end sub 
```

这段代码***无法***编译，自从我使用 VB.net 以来已经有一段时间了，但它是这样的。

# android - SherlockListFragment 'onCreateOptionMenu' 在 android 2.3.3 上崩溃

> ID：16015208
> 
> 赞同：1
> 
> 时间：2013-04-15T12:30:26.557
> 
> 标签：android, actionbarsherlock, android-listfragment, android-menu

我有一个`SherlockListFragment`在不同情况下在我的应用程序中使用的泛型。这个片段有一个选项菜单项（ a `SearchView`），这里是`SearchView`创建的代码：

```
 @Override
public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.all_places, menu);

    final MenuItem searchMenuItem = menu.findItem(R.id.action_search);
    searchMenuItem.setOnActionExpandListener(this);

    final SearchView searchView = (SearchView) searchMenuItem
            .getActionView();
    searchView.requestFocusFromTouch();
    searchView.setQueryHint(getString(R.string.search_query_hint));
    searchView.setOnQueryTextListener(this);

} 
```

问题是 ViewPager 中使用了其中一个片段实例，当滑动到它时，应用程序崩溃（仅在 HTC Desire 与 android 2.3.3 上），但适用于 ICS 和 JB 设备。顺便说一句，当手动附加片段（没有`ViewPager`）时，不会发生崩溃。

这是崩溃的堆栈跟踪：

```
java.lang.NullPointerException
    at android.view.View.dispatchRestoreInstanceState(View.java:6132)
    at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:1213)
    at android.view.View.restoreHierarchyState(View.java:6116)
    at com.actionbarsherlock.internal.view.menu.MenuBuilder.restoreActionViewStates(MenuBuilder.java:361)
    at com.actionbarsherlock.internal.ActionBarSherlockCompat.preparePanel(ActionBarSherlockCompat.java:503)
    at com.actionbarsherlock.internal.ActionBarSherlockCompat.dispatchInvalidateOptionsMenu(ActionBarSherlockCompat.java:272)
    at com.actionbarsherlock.app.SherlockFragmentActivity.invalidateOptionsMenu(SherlockFragmentActivity.java:150)
    at com.actionbarsherlock.app.SherlockFragmentActivity.supportInvalidateOptionsMenu(SherlockFragmentActivity.java:156)
    at android.support.v4.app.Fragment.setMenuVisibility(Fragment.java:781)
    at android.support.v4.app.FragmentStatePagerAdapter.setPrimaryItem(FragmentStatePagerAdapter.java:151)
    at android.support.v4.view.ViewPager.populate(ViewPager.java:1009)
    at android.support.v4.view.ViewPager.populate(ViewPager.java:880)
    at android.support.v4.view.ViewPager$3.run(ViewPager.java:238)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:144)
    at android.app.ActivityThread.main(ActivityThread.java:4937)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
    at dalvik.system.NativeStart.main(Native Method) 
```

我真的被这个问题困住了......任何帮助都会很棒。

**编辑**

切换到 ActionBarSherlock 开发分支 - 没有崩溃......谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:08:28.547

尝试：

```
private editTextSearch;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.your_menu, menu);       
    menu.getItem(0).setActionView(R.layout.search); //Number of menu item
    editTextSearch = (EditText) menu.getItem(0).getActionView().findViewById(R.id.edit_search); //Your editetxt search

    return super.onCreateOptionsMenu(menu);
} 
```

# iphone - .ipa 文件使用 xcode 4.6.1

> ID：16015214
> 
> 赞同：0
> 
> 时间：2013-04-15T12:30:51.790
> 
> 标签：iphone, ios6

我是 iOS 新手，正在为 App Store 开发我的第一个应用程序。

我现在必须使用管理器中的存档选项生成我的 .ipa 文件。我在运行选项卡上选择 iOS 设备并使用了存档选项，但它显示以下错误：

> “身份‘iPhone Distribution’与您的钥匙链中的任何有效、未过期的证书/私钥对不匹配”

我没有将我的设备连接到 Xcode。我想创建 .ipa 文件以将其发送给我的一位朋友，以便使用他的 iPhone 进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:39:14.220

快速修复：在您的 Xcode 项目中，查找名为“Products”的文件夹，并在那里找到您的 .app 文件。您需要创建一个名为“Payload”的文件夹，并将 .app 文件放入该文件夹中。完成此操作后，您可以压缩文件夹，并将名称更改为 yourapp.ipa 文件。这将是一个有效的 .ipa 文件，使用您用于编译该文件的配置凭据进行签名。

请记住，设置它的正确方法是设置存档模式，在其中您使用“发布”设置和有效的临时分发配置文件对应用程序进行签名。但现在，您可以使用初始快速修复，以便向您的朋友发送该应用程序。

# sql-server-2008-r2 - 如何使用 SSMS 连接到远程 SQL Server 2008 R2 实例？

> ID：16015216
> 
> 赞同：0
> 
> 时间：2013-04-15T12:30:52.497
> 
> 标签：sql-server-2008-r2

我想使用 SQL Server Management Studio Express 连接到安装在远程 Windows Web Server 2008 上的远程 SQL Server 2008 R2 实例。有人可以为我提供所有必要的步骤吗？我在这里阅读了一些答案，但似乎没有任何效果。我对在哪里（本地或远程）启用 SQL 浏览器、将 TCP/IP 设置为 ON、指定端口 1499 等感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:31:21.333

1.  启用**SQLBrowser**
2.  打开**1433**默认端口（在您的情况下，它可能不同，但**1433 是默认**端口）
3.  为您的实例启用**SQL Server 身份验证**
4.  **重新启动**您的 SQL Server 实例
5.  确保您的域（sql server 实例）可**公开/远程访问**
6.  从 SSMS 输入您的 SQL Server 实例**url/IP**地址
7.  输入您的凭据

这应该是全部。

# fabricjs - 在调用 set('text', 'some value') 时使文本单向增长

> ID：16015217
> 
> 赞同：0
> 
> 时间：2013-04-15T12:30:55.247
> 
> 标签：fabricjs

目前，每当我使用 set('text', 'some random text') 函数动态设置**fabric.Text**对象的文本时，宽度似乎双向增长，即从左侧和右侧。有没有办法让它只从左侧或右侧生长。我通过显式计算**top_left_x、top_left_y、top_right_x、top_right_y**并使用一些算术逻辑来实现这一点。

但是有什么内部的 fabricJS 属性（或类似的东西）可以实现这一点。

例如：在*Kitchensink*演示中，如果您添加一个新的 Text 对象并修改右下方文本区域中的文本，您将看到文本从右侧开始增长，而左侧保持固定。这正是我希望实现的。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:52:19.543

发生这种情况是因为默认原点是对象的中心。所以你需要将“originX”设置为“left”。正如您在[Kinchensink 源文件](http://fabricjs.com/js/kitchensink.js)中看到的那样：

```
 document.getElementById('add-text').onclick = function() {
  var textSample = new fabric.Text(text.slice(0, getRandomInt(0, text.length)), {
    left: getRandomInt(350, 400),
    top: getRandomInt(350, 400),
    fontFamily: 'helvetica',
    angle: getRandomInt(-10, 10),
    fill: '#' + getRandomColor(),
    scaleX: 0.5,
    scaleY: 0.5,
    fontWeight: '',
    originX: 'left',
    hasRotatingPoint: true
  });
  canvas.add(textSample);
  updateComplexity();
}; 

```

# github - 我在 Github 上为我的博客使用 Jekyll 和 Markdown。如何在我的页面中插入代码标签？

> ID：16015222
> 
> 赞同：7
> 
> 时间：2013-04-15T12:31:06.387
> 
> 标签：github, markdown, jekyll

我在 Github 上为我的博客使用 Jekyll 和 Markdown。如何在我的页面中插入代码标签？

例如，我在想我可以使用`<pre>`标签在我的页面中插入一些代码快照以显示给读者，但 jekyll 不喜欢它们。

有人可以告诉我一个好的格式标签，我可以用它在我的页面中插入代码

如果我尝试这段代码：

```
<pre>
  <code class="ruby">
git clone --mirror git@git.com:project project

cd project

git remote add github git@github.com:username/project.git

In cron Job

cd /pathto/project && git fetch -q && git push -q --mirror github
    </code>
</pre> 
```

我收到这个错误

![在此处输入图像描述](https://i.stack.imgur.com/dcTWW.png)

我的 _config.xml

```
# This is the default format. 
# For more see: https://github.com/mojombo/jekyll/wiki/Permalinks
permalink: /:categories/:year/:month/:day/:title 

exclude: [".rvmrc", ".rbenv-version", "README.md", "Rakefile", "changelog.md"]
auto: true
pygments: true

# Themes are encouraged to use these universal variables 
# so be sure to set them if your theme uses them.
#
title : xxxx
tagline :xxxx
author :
  name : xxx
  email : jxxx
  github : xxx
  twitter : xx

# The production_url is only used when full-domain names are needed
# such as sitemap.txt 
# Most places will/should use BASE_PATH to make the urls
#
# If you have set a CNAME (pages.github.com) set your custom domain here.
# Else if you are pushing to username.github.com, replace with your username.
# Finally if you are pushing to a GitHub project page, include the project name at the end.
#
production_url : http://johnathanmarksmith.com

# All Jekyll-Bootstrap specific configurations are namespaced into this hash
#
JB :
  version : 0.3.0

  # All links will be namespaced by BASE_PATH if defined.
  # Links in your website should always be prefixed with {{BASE_PATH}}
  # however this value will be dynamically changed depending on your deployment situation.
  #
  # CNAME (http://yourcustomdomain.com)
  #   DO NOT SET BASE_PATH 
  #   (urls will be prefixed with "/" and work relatively)
  #
  # GitHub Pages (http://username.github.com)
  #   DO NOT SET BASE_PATH 
  #   (urls will be prefixed with "/" and work relatively)
  #
  # GitHub Project Pages (http://username.github.com/project-name)
  #
  #   A GitHub Project site exists in the `gh-pages` branch of one of your repositories.
  #  REQUIRED! Set BASE_PATH to: http://username.github.com/project-name
  #
  # CAUTION:
  #   - When in Localhost, your site will run from root "/" regardless of BASE_PATH
  #   - Only the following values are falsy: ["", null, false]
  #   - When setting BASE_PATH it must be a valid url.
  #     This means always setting the protocol (http|https) or prefixing with "/"
  BASE_PATH : false

  # By default, the asset_path is automatically defined relative to BASE_PATH plus the enabled theme.
  # ex: [BASE_PATH]/assets/themes/[THEME-NAME]
  #
  # Override this by defining an absolute path to assets here.
  # ex: 
  #   http://s3.amazonaws.com/yoursite/themes/watermelon
  #   /assets
  #
  ASSET_PATH : false

  # These paths are to the main pages Jekyll-Bootstrap ships with.
  # Some JB helpers refer to these paths; change them here if needed.
  #
  archive_path: /archive.html
  categories_path : /categories.html
  tags_path : /tags.html
  atom_path : /atom.xml
  rss_path : /rss.xml

  # Settings for comments helper
  # Set 'provider' to the comment provider you want to use.
  # Set 'provider' to false to turn commenting off globally.
  #
  comments :
    provider : disqus
    disqus :
      short_name : jekyllbootstrap
    livefyre :
      site_id : 123
    intensedebate :
      account : 123abc
    facebook :
      appid : 123
      num_posts: 5
      width: 580
      colorscheme: light

  # Settings for analytics helper
  # Set 'provider' to the analytics provider you want to use.
  # Set 'provider' to false to turn analytics off globally.
  #        
  analytics :
    provider : google 
    google : 
        tracking_id : 'UA-123-12'
    getclicky :
      site_id : 
    mixpanel :
        token : '_MIXPANEL_TOKEN_'

  # Settings for sharing helper. 
  # Sharing is for things like tweet, plusone, like, reddit buttons etc.
  # Set 'provider' to the sharing provider you want to use.
  # Set 'provider' to false to turn sharing off globally.
  #
  sharing :
    provider : false

  # Settings for all other include helpers can be defined by creating 
  # a hash with key named for the given helper. ex:
  #
  #   pages_list :
  #     provider : "custom"   
  #
  # Setting any helper's provider to 'custom' will bypass the helper code
  # and include your custom code. Your custom file must be defined at:
  #   ./_includes/custom/[HELPER]
  # where [HELPER] is the name of the helper you are overriding. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T00:57:21.837

如果您所指的“页面”是 Markdown 文件，即扩展名是 .md 或 .markdown，那么您需要使用标准的 Markdown 语法：

对于`inline code`使用反引号，像这样：`inline code`

`block code`每行缩进 4 个空格：

```
block
of
code 
```

Jekyll 使用像 RedCarpet、Maruku 或 RDiscount 这样的 Markdown 解析器，并且没有定义你应该如何格式化你的内容，这是由你正在编写的内容的类型设置的，在本例中是 Markdown。所以要看的地方是 Markdown 语法文档`code`：

[http://daringfireball.net/projects/markdown/syntax#code](http://daringfireball.net/projects/markdown/syntax#code)

您还可以使用`{% highlight %}`Liquid 语法标签查看语法高亮：

[https://github.com/mojombo/jekyll/wiki/Liquid-Extensions#code-highlighting](https://github.com/mojombo/jekyll/wiki/Liquid-Extensions#code-highlighting)

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T15:56:43.747

这位先生怎么样

```
~~~ ruby
# This is a test.
def foo
  puts 'foo'
end
~~~ 
```

[`ref`](http://raw.github.com/svnpenn/svnpenn.github.io/source/_posts/2012-01-31-code-test.md)

# python - 使用索引访问实例变量

> ID：16015230
> 
> 赞同：2
> 
> 时间：2013-04-15T12:31:22.097
> 
> 标签：python, python-2.6

我有一个类可以跟踪搜索操作期间遇到的错误

```
class SearchError(object): 
    def __init__(self,severity=0,message=''): 
        self.severity = severity
        self.message = message 
```

我的想法是使实例变量可索引。

所以如果我有

```
a=SearchError(1,"Fatal Error") 
```

我明白了

```
>>> a[0]
1
>>> a[1]
'Fatal Error'
>>> a.severity
1
>>> a.message
'Fatal Error' 
```

为此，我`__getitem__`向类添加了一个方法。类现在变成

```
class SearchError(object): 
    def __init__(self,severity=0,message=''): 
        self.severity = severity
        self.message = message

    def __getitem__(self,val): 
        if isinstance(val,slice): 
            return [self.__getitem__(i) for i in xrange(val.start,val.stop,val.step)]
        elif val==0: 
            return self.severity
        elif val==1: 
            return self.message
        else: 
            raise IndexError 
```

这可以满足我的要求，但在以下情况下会失败

```
>>> a[:2]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 23, in __getitem__
TypeError: an integer is required 
```

甚至

```
>>> a[-1]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 29, in __getitem__
IndexError 
```

我知道我的实施`__getitem__`是有限的。我需要知道的是——

1.  这是使实例变量可索引的方法（不使用列表作为变量容器）吗？
2.  就索引而言，如何使对象表现得“正常”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:37:03.387

这一切：

```
>>> from collections import namedtuple
>>> _SearchError = namedtuple("SearchError", "severity message")
>>> def SearchError(severity=0, message=''):
        return _SearchError(severity, message) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:38:26.003

这里的问题是`slice`对象默认将`None`值作为属性。所以，`a[:2]`传入`slice(None,2,None)`。当您将其拆分并尝试将其传递给 时`xrange`，您将得到`TypeError`：

```
>>> xrange(None,2,None)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: an integer is required 
```

尝试`a[0:2:1]`，您的代码将起作用。最终，您可以执行以下操作：

```
val.start = 0 if val.start is None else val.start
val.stop = 2 if val.stop is None else val.stop
val.stop = 2-val.stop if val.stop < 0 else val.stop
val.step = 1 if val.step is None else val.step 
```

将您的切片分解为可用的索引（在一般情况下，最好使用`len(self)`而不是`2`，但我不知道您的对象是否已定义`__len__`.

或者，甚至更好：

```
start,stop,step = val.indices(len(self)) 
```

* * *

同样，在你这样做的情况下`a[-1]`，你没有传入一个切片、0 或 1，所以你点击了`else`你提出的子句`IndexError`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:41:40.367

`xrange`要求其所有参数都是整数，但`slice`对象具有`None`未指定的属性。

实现您所追求的最佳方法是使用[`namedtuple`](http://docs.python.org/2/library/collections.html#collections.namedtuple)：

```
from collections import namedtuple
class SearchError(namedtuple('SearchError', 'severity message')):
    def __new__(cls, severity=0, message=''):
        return super(SearchError, cls).__new__(cls, severity, message) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T16:50:45.670

我弄乱了代码并找到了以下解决方案。

它使用列表但仅存储变量的名称 - 而不是实际值。此外，它还提供了`add`添加具有给定名称和值的新变量的方法。新变量也将是可索引的。（我的班级不需要 add 函数，但是很高兴有）

感谢@mgilson 在这个方向上推动我

```
class SearchError(object): 
    def __init__(self,severity=0,message=''): 
        self.severity = severity
        self.message = message
        self._length = 2
        self._vars_list = ['severity','message',]

    def __getitem__(self,val): 
        if isinstance(val,slice): 
            steps = val.indices(self._length)
            return [self.__getitem__(i) for i in xrange(*steps)]
        elif val < 0: 
            i = self._length + val
            if i < 0: 
                raise IndexError,"Index Out of range for SearchError object"
            else: 
                return self.__getitem__(i)    
        else: 
            try: 
                return getattr(self,self._vars_list[val])
            except IndexError: 
                raise IndexError,"Index Out of range for SearchError object"

    def add(self,var_name,value): 
        self._vars_list.append(var_name)
        self._length += 1
        setattr(self,var_name,value) 
```

结果

```
>>> a=SearchError(1,"Fatal Error")
>>> a[-1]
'Fatal Error'
>>> a[-2]
1
>>> a[-3]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 14, in __getitem__
IndexError: Index Out of range for SearchError object
>>> a[2]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 21, in __getitem__
IndexError: Index Out of range for SearchError object
>>> a[1]
'Fatal Error'
>>> a[0]
1
>>> a[:]
[1, 'Fatal Error']
>>> a.add('new_severity',8)
>>> a[:]
[1, 'Fatal Error', 8]
>>> a[3]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 21, in __getitem__
IndexError: Index Out of range for SearchError object
>>> a[2]
8
>>> a.new_severity
8
>>> a[:3]
[1, 'Fatal Error', 8]
>>> a[:4]
[1, 'Fatal Error', 8]
>>> a[:2]
[1, 'Fatal Error'] 
```

据我所知，您需要列表（存储实际变量或它们的名称）。如果有人有更好的选择，请发帖

# javascript - 为从平铺 Javascript 加载的地图创建视口

> ID：16015234
> 
> 赞同：1
> 
> 时间：2013-04-15T12:31:38.217
> 
> 标签：javascript, jquery, canvas, viewport

我为我的 JavaScript 游戏创建了一个以 JSON 格式平铺的加载器。游戏基于 2048 x 1280 地图，我的画布尺寸为 704 x 608。

所以我的困境是当玩家接近画布边缘时我将如何创建视口/相机，以便地图移动？

在我的情况下，这有点困难，因为我没有像大多数教程那样使用标准的二维数组，所以这让我非常困惑。

加载我的地​​图的代码是这样的：

```
function Level (){

var data;
this.tileset = null;
var returned;
var t = this;

this.load = function(name){
   $.ajax({
        type:"POST",
        url: "maps/" + name + ".json",
        dataType: 'JSON',
       async: false,
       success: function(success){
          returned = loadTileset(success);
       }
    });

    return returned;
};

function loadTileset(json){
    data = json;
    Level.tileset = $("<img />", { src: json.tilesets[0].image })[0]
    Level.tileset.onload = done = true;

    if(done){
        return data;
    }
    else
        return 0;
}

this.draw_layer = function(layer){
    if (layer.type !== "tilelayer" || !layer.opacity) { return; }
//        if (layer.properties && layer.properties.collision) {
//            return;
//        }
    var size = data.tilewidth;
    layer.data.forEach(function(tile_idx, i) {
        if (!tile_idx) { return; }
        var img_x, img_y, s_x, s_y,
            tile = data.tilesets[0];
        tile_idx--;
        img_x = (tile_idx % (tile.imagewidth / size)) * size;
        img_y = ~~(tile_idx / (tile.imagewidth / size)) * size;
        s_x = (i % layer.width) * size;
        s_y = ~~(i / layer.width) * size;
        ctx.drawImage(Level.tileset, img_x, img_y, size, size,
            s_x, s_y, size, size);
    });
};

this.collisionLayer = function(layer){
        var row = [];
        t.solids = [];
        layer.data.forEach(function(idx, i) {
            var s_x,s_y,
                size = 32;
            s_x = (i % layer.width) * size;
            s_y = ~~(i / layer.width) * size;

            if (i % layer.width === 0 && i) {
                t.solids.push(row);
                row = [];

            }
            row.push([idx,s_x,s_y]);

        });
        t.solids.push(row);
};

return t.solids;
} 
```

这个 Level 类是从我的主 javascript 文件中调用的，如下所示：

```
layer = scene.load("level_"+level);
                layer = $.isArray(layer) ? layer : layer.layers;

                layer.forEach(function(layer){
                    if(layer.name == "v.bottom" && layer.type == "tilelayer"){
                        b_layer = layer;
                    }
                    else if(layer.type == "tilelayer" && !layer.properties){
                        t_layer.push(layer);
                    }
                    else if (layer.type == "objectgroup"){
                            $.each(layer.objects, function(i, value){
                                coll_layer.push([value.x,value.y,value.width,value.height,"dialogue"]);
                            });
                    }
                }); 
```

然后在我的主javascript函数中从我的更新函数调用scene.draw_layer()。

我的地图包含不同的图层，您可以在上面的代码中看到 if 语句确定图层是底层、顶层还是对象层并将其存储在特定数组中。这只是为了让玩家在层之间显示。

因此，为了澄清，对于我的游戏，我将如何根据我的地图加载器创建视口/相机？

我还要移动地图还是播放器？

我应该让玩家居中吗？如果玩家居中，那么当地图边缘可见时会发生什么？

这是游戏的实时版本，因此您可以了解它的工作原理等：

[现场演示](http://upbeatevents.co.uk/dis)

使用 guest 作为用户名和密码

非常感谢

**更新** 我相信我取得了一个小进步，但后果很严重。我已经尝试在此处的一个问题上从[JSFIDDLE](http://jsfiddle.net/kmHZt/10/)实现视口，它旨在与 2D 数组一起使用，但认为 id 试一试。

结果可以在这里找到：

[更新链接](http://upbeatevents.co.uk/dis)

如果有人可以看看我哪里出错了，将不胜感激。谢谢

# ios - abpersonviewcontroller 中的完成按钮不保存 ios

> ID：16015236
> 
> 赞同：-1
> 
> 时间：2013-04-15T12:31:45.843
> 
> 标签：ios, abpersonviewcontroller

当我在人员视图控制器的编辑模式下点击完成时，它不会保存到地址簿。它转到上一个屏幕并显示新数据。但是在联系人应用程序中没有任何改变。

```
 -(BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{

    ABPersonViewController *
    vcPerson = [[ABPersonViewController alloc] init];
    CFErrorRef error = NULL;
    if([self.peopleProperty objectForKey:@"phone_number"]!=nil)
    {
        NSString* phoneNumber = [self.peopleProperty objectForKey:@"phone_number"];

         ABMultiValueRef multiVal = ABRecordCopyValue(person, kABPersonPhoneProperty);
        ABMutableMultiValueRef multiPhone = ABMultiValueCreateMutableCopy(multiVal);
        ABMultiValueAddValueAndLabel(multiPhone,(__bridge CFTypeRef)(phoneNumber), kABPersonPhoneIPhoneLabel, NULL);
        ABRecordSetValue(person, kABPersonPhoneProperty, multiPhone, &error);
        CFRelease(multiPhone);
        CFRelease(multiVal);
    }

    vcPerson.allowsActions = NO;
    vcPerson.allowsEditing = YES;
    vcPerson.displayedPerson = person;
    vcPerson.personViewDelegate = self;
    [vcPerson setEditing:YES animated:NO];
    vcPerson.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"Back",nil) style:UIBarButtonItemStylePlain target:self action:@selector(ReturnFromPersonView:)];
    [self.navigationController setNavigationBarHidden:NO];

    [self.navigationController pushViewController:vcPerson animated:YES];

    [self dismissViewControllerAnimated:YES completion:^{

    }];
    return NO;} 
```

**更新** 我想显然你不能在视图控制器加载之前更改显示的人的值。一旦稍后尝试保存，它就不会将其识别为联系人的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:09:57.040

我认为显然你不能在视图控制器加载之前更改显示的人的值。一旦稍后尝试保存，它就不会将其识别为联系人的更改

# java - 使用 JDT 以编程方式格式化源代码

> ID：16015240
> 
> 赞同：7
> 
> 时间：2013-04-15T12:32:00.527
> 
> 标签：java, eclipse, eclipse-jdt

我正在使用 JDT 生成一些类。之后我想格式化整个 ICompilationUnit，就像我在没有选择的情况下在打开的编辑器中按下 Ctrl+Shift+F（Source > Format）一样。

高度赞赏 JDT 中任何用于以编程方式格式化源代码的 API 指针。

补充：我试过这样，但代码没有改变。我在发什么？

```
private void formatUnitSourceCode(ICompilationUnit targetUnit, IProgressMonitor monitor) throws JavaModelException {
    CodeFormatter formatter = ToolFactory.createCodeFormatter(null);
    TextEdit formatEdit = formatter.format(CodeFormatter.K_COMPILATION_UNIT, targetUnit.getSource(), 0, targetUnit.getSource().length(), 0, null);
    targetUnit.applyTextEdit(formatEdit, monitor);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T09:26:09.993

这可能是一个错误，但使用 Elcipse 4.2.2 中的 JDK，必须创建 ICompilationUnit 的工作副本才能将 TextEdit 应用于文件。

```
 targetUnit.becomeWorkingCopy(new SubProgressMonitor(monitor, 1));
    ... do work on the source file ...
    formatUnitSourceCode(targetUnit, new SubProgressMonitor(monitor, 1));
    targetUnit.commitWorkingCopy(true, new SubProgressMonitor(monitor, 1)); 
```

格式化本身是这样完成的：

```
public static void formatUnitSourceCode(ICompilationUnit unit, IProgressMonitor monitor) throws JavaModelException {
    CodeFormatter formatter = ToolFactory.createCodeFormatter(null);
    ISourceRange range = unit.getSourceRange();
    TextEdit formatEdit = formatter.format(CodeFormatter.K_COMPILATION_UNIT, unit.getSource(), range.getOffset(), range.getLength(), 0, null);
    if (formatEdit != null && formatEdit.hasChildren()) {
        unit.applyTextEdit(formatEdit, monitor);
    } else {
        monitor.done();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:43:42.057

使用[JDT 生成一些类](http://www.programcreek.com/2011/05/eclipse-jdt-tutorial-java-model/)时，可以在源代码中添加“\t”。或者像你所做的那样，使用代码格式化程序。我已经测试了以下代码：

```
public static void main(String[] args)
{
    String code = "public class TestFormatter{public static void main(String[] args){System.out.println(\"Hello World\");}}";
    CodeFormatter codeFormatter = ToolFactory.createCodeFormatter(null);

    TextEdit textEdit = codeFormatter.format(CodeFormatter.K_UNKNOWN, code, 0,code.length(),0,null);
    IDocument doc = new Document(code);
    try {
        textEdit.apply(doc);
        System.out.println(doc.get());
    } catch (MalformedTreeException e) {
        e.printStackTrace();
    } catch (BadLocationException e) {
        e.printStackTrace();
    }   
} 
```

该`apply()`方法在这里解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T12:47:44.493

我使用下面的方法来格式化一个 Java Source 文件

```
 public static void formatSource(ICompilationUnit cu, IProgressMonitor progressMonitor) throws JavaModelException{
    String source = cu.getSource();
    IJavaProject javaProject = cu.getJavaProject();

    Map options = javaProject.getOptions(true);

            // Instantiate the default code formatter with the given options
            final CodeFormatter codeFormatter = ToolFactory.createCodeFormatter(options);

            final TextEdit edit = codeFormatter.format(
                CodeFormatter.K_COMPILATION_UNIT, // format a compilation unit
                source, // source to format
                0, // starting position
                source.length(), // length
                0, // initial indentation
                System.getProperty("line.separator") // line separator
            );          

            cu.becomeWorkingCopy(progressMonitor);
            try {
                cu.applyTextEdit(edit, progressMonitor);
                //cu.reconcile();
                cu.commitWorkingCopy(true, progressMonitor);
                //cu.save(progressMonitor, false);

                JavaUI.openInEditor(cu);

            } catch (MalformedTreeException e) {
                e.printStackTrace();
            } catch (PartInitException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }   

} 
```

# vb.net - Windows CE Async .Net webservice 调用导致空回调对象

> ID：16015246
> 
> 赞同：0
> 
> 时间：2013-04-15T12:32:12.787
> 
> 标签：vb.net, web-services, oop, windows-ce

我被困住了... :)

Windows CE (.Net Compact Framework 3.5) 代码：

```
Imports System.Net
Imports System.Data

Imports windowscetest.aliweb

Public Class main

    Const url = "http://myip/asw/services.asmx"

    Const ip = "x.x.x.x"
    Const uid = "USERID"
    Const pwd = "PASSWORD"
    Const bib = "LIBRARY"

    Dim screen As New ScreenEngine
    Dim service As New services

    Dim r As New Result

    Private Sub main_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles MyBase.Load

        screen = New ScreenEngine
        screen.SetFullScreen(True)

        If IsAlive() Then

            With service
                .Url = url
                .connectionValue = New connection

                With .connectionValue
                    .Server = ip
                    .User = uid
                    .Password = pwd
                    .Library = bib
                End With

                .PreAuthenticate = True
                .Credentials = System.Net.CredentialCache.DefaultCredentials

                .BeginExecute("select * from z2ooprxt where renum like '1396%'", Operation.SelectMultipleRows, New AsyncCallback(AddressOf Ended), r)

            End With

        Else

        End If

    End Sub

    Private Sub main_Closing(ByVal sender As Object, ByVal e As System.ComponentModel.CancelEventArgs) Handles MyBase.Closing
        screen.SetFullScreen(False)
    End Sub

    Private Sub Ended(ByVal e As System.IAsyncResult)

    End Sub

    Private Function IsAlive() As Boolean

        Dim rq As HttpWebRequest
        Dim rs As HttpWebResponse

        Try

            rq = WebRequest.Create(url)
            rs = rq.GetResponse

            If Not rs.StatusCode = HttpStatusCode.OK Then
                Return False
            End If

            rs.Close()

        Catch ex As Exception
            Return False
        End Try

        Return True

    End Function

End Class 
```

Web 服务使用 OOP 对象来回答，`Result`其中包含不同的东西，包括数据表。

看来`e`from`Ended`是空的...如果我**同步**调用 web 服务一切正常。我相信它与 stateobject 有关，但我似乎找不到任何例子......

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:38:09.997

由于它是一个异步方法，因此您需要调用 EndExecute 来获取结果，如下所示：

```
Private Sub Ended(ByVal e As System.IAsyncResult)

    service.EndExecute(e)  ' This will give you the result

End Sub 
```

# java - hashmap 在 while 循环之外是不同的

> ID：16015249
> 
> 赞同：0
> 
> 时间：2013-04-15T12:32:29.007
> 
> 标签：java, hash, while-loop, hashmap, alias

我不确定为什么哈希图在这个while循环内和while循环之外打印出不同的东西。我在while循环之外声明了地图，所以我认为它的内部和外部应该是相同的。在代码中，我在 while 循环内部和外部都有相同的打印语句，但它们打印的内容不同。地图的键是 personCounter，它是递增的并且应该是唯一的。非常感谢您的帮助。

```
 public Map<Integer, double[]> setRating(CSVReader r, int taskNum, int taskWeightNumHeader) 
        throws NumberFormatException, IOException {
    String[] line;
    int personCounter = 0;

    Map<Integer, double[]> indivTaskRating = new HashMap<Integer, double[]>();
    while ((line = r.readNext()) != null) {
                    double[] perTaskWeight = new double[5];
        personCounter++;
        int multiplier = taskNum * 5;   
        perTaskWeight[2] = Double.parseDouble(line[taskWeightNumHeader + multiplier]);
        perTaskWeight[1] = Double.parseDouble(line[taskWeightNumHeader + multiplier + 1]);
        perTaskWeight[0] = Double.parseDouble(line[taskWeightNumHeader + multiplier + 2]);
        perTaskWeight[3] = Double.parseDouble(line[taskWeightNumHeader + multiplier + 3]);
        perTaskWeight[4] = Double.parseDouble(line[taskWeightNumHeader + multiplier + 4]);
        indivTaskRating.put(personCounter, perTaskWeight);
        for (int j = 0; j < 5; j ++) {
            System.out.println("personID: " +1+ ", rating: " +indivTaskRating.get(1)[j]);
        }       
    }
    for (int j = 0; j < 5; j ++) {
        System.out.println("personID: " + 1+ ", rating: " +indivTaskRating.get(1)[j]);
    }
    return indivTaskRating;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:35:10.800

***您在地图中放置的每个***条目中都使用相同的双精度数组。最后，它将为每个条目填充相同的值！

您需要在 while 循环的每次迭代中重新分配数组以解决问题。

```
while ((line = r.readNext()) != null) {
    double[] perTaskWeight = new double[5];

    // ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:35:36.927

你不断地重复使用同一个数组，所以你实际上在每个循环（while）中覆盖了它的内容。

您需要`double[] perTaskWeight = new double[5];`在 while 循环中创建一个新实例 ( )。

# scala - 具有不同参数类型的重载构造函数

> ID：16015251
> 
> 赞同：1
> 
> 时间：2013-04-15T12:32:34.030
> 
> 标签：scala, constructor-overloading

我知道我们可以在 Scala 中重载类构造函数，如下所示 -

```
class Foo(x: Int, z: String) { 
  def this(z: String) = this(0, z);   
} 
```

但是我怎样才能重载一个具有两种完全不同类型的参数的类，如下所示（想象我可以通过**名称**或数字**id**来识别用户）

```
class User(userId: Int) {
  ...
}

class User(userName: String) {
  ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:06:26.943

> （假设我可以通过名称或数字 id 来识别用户）

你几乎肯定不想通过在你的类中使用可选字段来做到这一点。相反，您应该将用户以各种方式识别的事实编码到程序的类型和结构中。

一种方法是使用 Scala 的内置`Either`类型对用户标识符进行编码：

```
class User private(identifier : Either[String, Int]) {
  def this(id : Int) = this(Right(id))
  def this(name : String) = this(Left(name))
} 
```

但是，您可能还希望使用户标识符的性质更加明确，并将其编码为您自己的[代数数据类型](http://en.wikipedia.org/wiki/Algebraic_data_type)：

```
trait UserIdentifier
object UserIdentifier {
  case class ById(id : Int) extends UserIdentifier
  case class ByName(name : String) extends UserIdentifier
}

class User(id : UserIdentifier) {
  def this(id : Int) = this(UserIdentifier.ById(id))
  def this(name : String) = this(UserIdentifier.ByName(name))
} 
```

通过这种方式，您可以防止出现问题，例如有人试图在用户上查找由 id 标识的名称。第二种方法还允许您`UserIdentifier`在将来扩展 a 的想法，以防用户可以被其他构造识别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:17:15.167

或者，您可以这样做

```
object User {
  def apply(userId: Int) = new UserI(userId)
  def apply(name: String) = new UserS(name)

  class UserI(userId: Int)
  class UserS(userName: String)
} 
```

并以这种方式使用它：

```
 val u1 = User(1)
  val u2 = User("a") 
```

如果你有很多共同的逻辑，你可以把它放到一个共同的抽象类中

```
object User {
  def apply(userId: Int) = new UserI(userId)
  def apply(name: String) = new UserS(name)

  class UserI(userId: Int) extends AUser
  class UserS(userName: String) extends AUser

  abstract class AUser{
    // common logic for both classes
  }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:26:20.200

你可以这样做：

```
class User private() {
  def this( userName: String ) = { this(); ??? }
  def this( userId: Int ) = { this(); ??? }
} 
```

关键字使`private`无参数构造函数私有。这意味着您的其他辅助构造函数不需要向主构造函数传递任何内容（有效地使两个辅助构造函数独立），但调用者仍然无法在不传递任何参数的情况下实例化该类。请注意，当您的类具有要从 construtors 参数初始化的 val 时，使用此模式可能会很棘手。

# c - c 中未初始化的指针指向的目的地是如何确定的？

> ID：16015254
> 
> 赞同：5
> 
> 时间：2013-04-15T12:32:38.347
> 
> 标签：c, pointers

我知道如果在 C 中声明了一个指针（而不是初始化），它将指向一个可以包含任何内容的“随机”内存地址。

它实际上指向的位置是如何确定的？大概它不是真正随机的，因为这将是低效且不合逻辑的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T12:47:09.673

如果这个指针是在所有函数之外定义的（或 is `static`），它将在获得控制权`NULL`之前被初始化。`main()`

如果这个指针是通过在堆中创建的`malloc(sizeof(sometype*))`，它将包含恰好在其位置的任何内容。它可以是来自先前分配和释放的内存缓冲区的数据。或者它可以是一些旧的控制信息，`malloc()`用于`free()`管理空闲和分配块的列表。或者，如果操作系统（如果有）没有清除程序的内存，或者如果它的内存分配系统调用返回未初始化的内存，那么它可能是垃圾，因此这些可能包含来自以前运行的程序的代码/数据，或者只是你的 RAM 芯片在系统已开机。

如果这个指针是一个函数的本地指针（并且不是`static`），它将包含任何已经在堆栈中的位置。或者，如果一个 CPU 寄存器被分配给这个指针而不是一个内存单元，它将包含前面的指令在这个寄存器中留下的任何值。

所以，它不会是完全随机的，但你很少在这里完全控制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T12:35:05.950

未初始化是未定义的。一般来说，当指针被分配时，内存空间并没有被清除，所以现在包含的内存都是指针。它是随机的，但在操作中不会更改内存位置的意义上，它也是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T12:37:04.263

[http://en.wikipedia.org/wiki/Uninitialized_variable](http://en.wikipedia.org/wiki/Uninitialized_variable)

> 诸如 C 之类的语言将堆栈空间用于变量，为子程序分配的变量集合称为堆栈帧。虽然计算机会为堆栈帧留出适当数量的空间，但它通常只是通过调整堆栈指针的值来做到这一点，并且不会将内存本身设置为任何新状态（通常是出于效率考虑）。因此，当时该内存的任何内容都将显示为占据这些地址的变量的初始值。

虽然我想这是特定于实现的。

此外，您可能应该始终初始化您的指针，请参阅[如何检查无效指针？](https://stackoverflow.com/questions/482315/how-do-you-check-for-an-invalid-pointer)以及第一个答案中给出的链接：-

[http://www.lysator.liu.se/c/c-faq/c-1.html](http://www.lysator.liu.se/c/c-faq/c-1.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T12:37:43.937

就 C 标准而言，未初始化的指针并不指向*任何地方*。取消引用它是非法的。因此，原则上不可能观察其目标，因此目标根本*不存在*于所有意图和目的。

如果你想要一个陈词滥调的类比，要求一个未初始化的指针的值就像要求最小的正实数的值，或者 π 的最后一位的值。

（推论是只有 Chuck Norris 可以取消引用未初始化的指针。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T12:35:28.657

它是实现特定/未定义的行为。指针可能被自动初始化为 NULL ......或者它只是当时内存中的任何值。

指针是内存中的一个地址，它指向内存中的另一个地址。它没有被初始化的事实并不意味着指针本身没有地址，它只意味着它所指向的东西的地址是未知的。因此，编译器默认将其初始化为 NULL，或者地址是当时指针变量空间中内存中的任何内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T13:55:01.697

在很大程度上，它就像您进入课堂时未擦除的白板。如果你在棋盘的一部分上画了一个盒子，但没有擦掉盒子里的东西，那么盒子里有什么？

它是以前留下的任何东西。

同样，如果为指针分配空间但不擦除空间，那么空间中有什么？

数据可能来自程序的早期部分或在程序的任何正常部分（例如`main`函数）开始运行之前运行的特殊代码。（特殊代码可能会加载和链接某些库、设置堆栈以及准备 C 程序所需的环境。）在嵌入式系统上，而不是典型的多用户系统上，数据可能会从以前的进程中遗留下来。很可能，之前使用空间的目的不是指针，因此当解释为指针时，其中的值没有意义。它作为指针的值可能指向某个地方，但没有任何意义。

**但是，您不能依赖于此。**当您使用具有自动存储持续时间的未初始化对象时，C 标准没有定义行为。在许多 C 实现中，未初始化的指针将仅包含剩余数据。但是，在某些 C 实现中，系统可能会检测到您正在使用未初始化的对象并导致您的程序崩溃。（其他行为也是可能的。）

# c# - 为什么 c# JavaScriptSerializer.Serialize 返回空方括号

> ID：16015257
> 
> 赞同：6
> 
> 时间：2013-04-15T12:32:50.930
> 
> 标签：c#, json, javascriptserializer

为什么下面的代码应该返回 "{"id":1999, "title":"hithere"} 时返回 "[ ]"

```
 JavaScriptSerializer serializer = new JavaScriptSerializer();
    StringBuilder sbJsonResults = new StringBuilder();
    var result = serializer.Serialize(new dg(1999, "hithere"));

    context.Response.Clear();
    context.Response.ContentType = "application/json; charset=utf-8";
    context.Response.Cache.SetExpires(DateTime.MinValue);
    context.Response.Write(result); 
```

PS dg 类如下所示：

```
 public class dg : ScheduleObserver, ILibrary, IEnumerable {
        public int id;
        public string title;
        private List<d> dList;
        ...many getters and setters and some logic functions...
    }

    public abstract class ScheduleObserver{
        public abstract void update();
    }

    public interface ILibrary {
        List<PD> getPDs();
        void setPDs(List<PD> newPDs);
        int getCurrentIndex();
        void addPD(PD pD);
        PD getPD(int index);
    } 
```

非常感谢。

谢谢 - 回答成功 - IEnumerable 是我痛苦的根源。为了解决这个问题，dg 不再扩展 IEnumerable 并且所有 foreach (dg...) 循环都已转换回 for(int i = 0...) 循环。

非常非常感谢！JAMES 知道为什么它是空的，Parv 知道为什么有方括号。将两者都标记为答案，但只能标记一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:33:42.763

从[源头上看](http://www.dotnetframework.org/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/ndp/fx/src/xsp/System/Extensions/Script/Serialization/JavaScriptSerializer@cs/1305376/JavaScriptSerializer@cs)，问题似乎是几件事的结合。

正如@Parv 已经指出你得到的原因`[]`是因为你的类实现`IEnumerable`了所以序列化器尝试*迭代*对象，然后独立地序列化每个项目。您当前的设计无法正常工作，因为它的设计目的不是为了序列化实现`IEnumerable`.

另一个问题，就像我在评论中提到的那样，是你的类似乎没有任何公共属性，你现在拥有的是公共*变量*。为了使序列化程序工作，您需要属性设置器/获取器，即

```
public class dg
{
    public int id { get; set; }
    public string title { get; set; }
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T12:54:43.753

问题可能是因为`dg`该类继承了`IEnumerable`，所以`JavaScriptSerializer`将其视为 an `Array`，因此是方括号。

尝试做

```
var result = serializer.Serialize(
    new dg(1999, "hithere").Select(d => new{ id = d.id, title = d.title })); 
```

# javascript - D3 折线图，无法编辑带有序数刻度的刻度数？

> ID：16015259
> 
> 赞同：14
> 
> 时间：2013-04-15T12:32:56.990
> 
> 标签：javascript, d3.js, linechart, ordinal

我之前问过一个关于 d3 的问题，他们建议我使用序数比例，这可以解决我的问题。确实它解决了我的问题，但知道我遇到了另一个问题......

它画得很完美，但我的 X 轴上满是文字。例如，我想要：1900 1904 1908 1912 ...但我得到了：190119021903190419051906。如您所见，这并不清楚。（这只是一个例子，如果只有日期，我可以使用另一个比例）。我所到之处，他们都在谈论axis.ticks(number)。但这不起作用。什么也没发生，我仍然得到相同的结果。我破解了一个结果以在 x 轴上获得更少的结果：

```
 var str = [];
  var i = 0;
  while(i < data.length) {
      str.push(data[i].age);
      i=i+8;
  }
  x.domain(str); 
```

但如果我这样做，它会创建一条随机线并且不再完美地绘制它。不知道怎么解决..这是一个简单的折线图，没什么难的，唯一的困难（对我来说）是序数比例......

希望有人可以帮助我。

这就是我的 x 和 x 轴的定义方式：

```
var x = d3.scale.ordinal()
    .rangeRoundBands([0, width-150],1);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom") 
```

没有while循环（讨厌的hack），我只有以下行定义x.domain：

```
x.domain(data.map(function(d) { return d.age; })); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T13:02:25.400

查看[axes 的文档](https://github.com/mbostock/d3/wiki/SVG-Axes)，尤其是`ticks()`函数。您可以使用它（或`tickValues()`）来控制要显示多少（以及什么）值。

如果您使用日期，您可能希望使用[时间尺度](https://github.com/mbostock/d3/wiki/Time-Scales)而不是序数。特别是，它将允许您以更有意义的方式控制刻度，例如指定您希望每五年进行一次刻度。

# c# - Orderby 不调用提供的比较器的 Compare()

> ID：16015260
> 
> 赞同：4
> 
> 时间：2013-04-15T12:32:57.767
> 
> 标签：c#, .net, linq

谁能解释为什么当我使用 Enumerable.OrderBy 时.net 框架不调用我的比较器的比较方法。而当我使用 List.Sort() 时它会被调用。

// 下面的代码取自 StackOverFlow.com 上的另一篇文章

```
class Employee
{
    public string Name { get; set; }
    public int Salary { get; set; }
}

class Employee_SortBySalaryByAscendingOrder : IComparer<Employee>
{
    #region IComparer<Employee> Members

    public int Compare(Employee x, Employee y)
    {
        if (x.Salary > y.Salary) return 1;
        else if (x.Salary < y.Salary) return -1;
        else return 0;
    }

    #endregion
}

    private void TestSort(object sender, EventArgs e)
    {

        List<Employee> empList = new List<Employee>() 
                                {       
                                    new Employee { Name = "a", Salary = 14000 },
                                    new Employee { Name = "b", Salary = 13000 } 
                                };
        Employee_SortBySalaryByAscendingOrder eAsc = 
                    new Employee_SortBySalaryByAscendingOrder();
        // Sort Employees by salary by ascending order.   

        // Does not work
        IOrderedEnumerable<Employee> orderedEmployees = empList.OrderBy(x => x, eAsc);

        // Works
        empList.Sort(eAsc);
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T12:40:18.450

它不起作用，因为您实际上并没有评估`orderedEmployees`序列。您需要使用`ToList`or强制评估`ToArray`。

Linq 使用[延迟执行](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)，因此在以下位置定义您的排序查询：

```
IOrderedEnumerable<Employee> orderedEmployees = empList.OrderBy(x => x, eAsc); 
```

不做任何工作来实际排序输入序列。只有当您尝试使用查询结果时，才会完成排序。

# android - opengl android的触摸响应

> ID：16015261
> 
> 赞同：1
> 
> 时间：2013-04-15T12:33:19.307
> 
> 标签：android, opengl-es

我想在我的使用 openGL 的 android 程序中添加一个触摸事件。由于我是 android 编码和 openGL 的新手，我不知道应该使用哪种方法。

1.  该方法显示在android开发者页面中，使用着色器。

2.  是我用谷歌搜索的一种方法，就像在 cw 或 ccw 中添加点并附加点。

我通过第二种方法在 3D 空间中绘制点，我想使用触摸事件来旋转这些点。通过动画我可以做到，（rotatef）但我不知道如何以及在哪里添加触摸事件。

问题解决了...

# java - Vaadin 小部件编译

> ID：16015262
> 
> 赞同：0
> 
> 时间：2013-04-15T12:33:20.227
> 
> 标签：java, gwt, vaadin

我有 Vaadin 6.8.6 应用程序并使用 ant 构建它。现在我也想使用 ant 重新编译我的应用程序，但编译器看不到我在我的应用程序中实现的小部件。所以我有这样的蚂蚁构建脚本。在我的项目中，我有包

```
com.example.vaadinresearch
   ..ServerComponent...class
--com.example.vaadinresearch.widgetset
   ..MyApp.class
   ..MyApp.gwt.xml
---com.example.vaadinresearch.widgetset.client
   VClientComponent.class

  <project name="com.example.vaadinresearch" basedir="." default="all">
        <target name="all" depends="clean, init,compile, widgetset-init, generate-widgetset, compile-widgetset, compile, war-package">
        </target>
        <target name="clean">
            <delete dir="build" />
            <delete dir="WebContent/VAADIN" />
            <delete dir="WebContent/WEB-INF/classes/" />
            <mkdir dir="WebContent/WEB-INF/classes/" />
        </target>
        <target name="init" depends="clean">
            <echo message="Creating two packages:" />
            <echo message="1\. WAR package that can be deployed to application server or servlet container." />
            <echo message="2\. JAR package which requires JRE only, includes embedded web server." />
            <property name="server.main.class" value="com.vaadin.demo.DesktopServer" />
            <property name="webserver.jar" value="WebServer/winstone-0.9.9.jar" />
            <property file="build.properties" />
            <mkdir dir="build" />
        </target>
        <target name="widgetset-init" depends="init">
            <!-- Folders -->
            <property name="src.dir" value="src" />
            <property name="lib.dir" value="WebContent/WEB-INF/lib" />
            <property name="build.web.dir" value="build" />
            <property name="widgetset" value="com.example.vaadinresearch.widgetset.VaadinresearchWidgetset" />
            <property name="client-side-destination" value="WebContent/VAADIN/widgetsets" />
        </target>
        <!-- Generates a combined widget set from all widget    -->
        <!-- sets in the class path, including project sources. -->
        <!-- Updates the configuration if it already exists.    -->
        <target name="generate-widgetset" depends="widgetset-init" if="generate.widgetset">
            <echo>Updating ${widgetset}...</echo>
            <echo>Remember to define the widgetset in web.xml as follows.</echo>
            <echo>
                    &lt;init-param&gt;
                        &lt;param-name&gt;widgetset&lt;/param-name&gt;
                        &lt;param-value&gt;${widgetset}&lt;/param-value&gt;
                    &lt;/init-param&gt;
                </echo>
            <java classname="com.vaadin.terminal.gwt.widgetsetutils.WidgetSetBuilder" failonerror="yes" fork="yes" maxmemory="512m">
                <arg value="${widgetset}" />
                <jvmarg value="-Xss1024k" />
                <jvmarg value="-Djava.awt.headless=true" />
                <classpath>
                    <pathelement path="${src.dir}" />
                    <pathelement location="${lib.dir}/gwt-user.jar" />
                    <pathelement location="${lib.dir}/gwt-dev.jar" />
                    <pathelement location="${lib.dir}/vaadin-6.8.6.jar" />
                    <fileset dir="${lib.dir}">
                        <include name="*.jar" />
                    </fileset>
                </classpath>
            </java>
        </target>

        <!-- Compiles the widget set using the GWT compiler. -->
        <target name="compile-widgetset" depends="widgetset-init, generate-widgetset">
            <echo>Compiling ${widgetset} into ${client-side-destination} directory...</echo>
            <java classname="com.google.gwt.dev.Compiler" failonerror="yes" fork="yes" maxmemory="1000m">
                <arg value="-draftCompile" />
                <arg value="-localWorkers" />
                <arg value="2" />
                <arg value="-style" />
                <arg value="PRETTY" />
                <arg value="-war" />
                <arg value="${client-side-destination}" />
                <arg value="${widgetset}" />
                <jvmarg value="-Xss1024k" />
                <jvmarg value="-Djava.awt.headless=true" />
                <classpath>
                    <pathelement location="${lib.dir}/gwt-user.jar" />
                    <pathelement location="${lib.dir}/vaadin-6.8.6.jar" />
                    <pathelement location="${lib.dir}/gwt-dev.jar" />
                    <fileset dir="${lib.dir}">
                        <include name="*.jar" />
                    </fileset>
                    <pathelement path="${src.dir}"/>
                    <pathelement path="${build.web.dir}/WEB-INF/classes" />
                </classpath>
            </java>
        </target>
        <target name="compile" depends="compile-widgetset">
            <echo message="Compiling Vaadin application sources." />
            <path id="com.example.vaadinresearch">
                <fileset dir="WebContent">
                    <include name="WEB-INF/lib/*.jar" />
                </fileset>
            </path>
            <javac srcdir="src" destdir="WebContent/WEB-INF/classes" classpathref="com.example.vaadinresearch">
            </javac>
        </target>
        <!-- Creates Vaadin WAR package (requires Application Server / Servlet Container) -->
        <target name="war-package" depends="compile">
            <echo message="Creating WAR package." />
            <war warfile="build/${ant.project.name}.war" webxml="WebContent/WEB-INF/web.xml">
                <fileset dir="WebContent">
                    <include name="**/*" />
                    <exclude name="WEB-INF/web.xml" />
                </fileset>
            </war>
        </target>
    </project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:04:50.803

在 web.xml 文件中，您必须添加

```
 <init-param>
        <param-name>widgetset</param-name>
        <param-value>you.widgetset.package</param-value>
    </init-param> 
```

在 VaadinApplication servlet 中。您可能还必须有一个 widgetset.gwt.xml 文件，其中包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 1.7.0//EN" "http://google-web-toolkit.googlecode.com/svn/tags/1.7.0/distro-source/core/src/gwt-module.dtd">
<module>
    <inherits name="com.vaadin.DefaultWidgetSet" />
    <inherits name="you.widgetset.package" />
</module> 
```

# c++ - 如何在 QTableWidgetItem 中添加新行

> ID：16015269
> 
> 赞同：2
> 
> 时间：2013-04-15T12:33:38.660
> 
> 标签：c++, qt, qt4

我无法在 QTableWidgetItem 中添加新行。这是代码：

```
QTableWidget* item = new QTableWidgetItem;
item->setText("Line1 \n Line2"); 
```

使用此代码，项目文本不会显示在两行中，即似乎忽略了 \n 字符。

我有一个解决方法来做到这一点，使用 QPlainTextEdit 和函数 setCellWidget，在这种情况下，一切都按预期工作，但更难看，我不想制作额外的小部件只是为了在多行中显示文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:23:52.840

我认为您的代码可以分隔行。但是您应该更改每行的大小以显示多行。

![在此处输入图像描述](https://i.stack.imgur.com/gaIqY.png)

调整行高后：

![在此处输入图像描述](https://i.stack.imgur.com/tnaVp.png)

你看就好了。

# android - 在反向横向和纵向模式下检测方向

> ID：16015271
> 
> 赞同：1
> 
> 时间：2013-04-15T12:33:41.543
> 
> 标签：android, camera, android-camera

我想检测反向横向和纵向。配置不支持 `ORIENTATION_REVERSE_LANDSCAPE`或`ORIENTATION_REVERSE_PORTRAIT`。

我也尝试过`Activityinfo.ORIENTATION_REVERSE_PORTRAIT`，但它也不起作用。帮助我。

```
if(newConfig.orientation==Configuration.ORIENTATION_LANDSCAPE){

    Log.e("On Config Change","LANDSCAPE");
}else{

    Log.e("On Config Change","PORTRAIT");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-06T17:21:08.730

`SensorManager`我发现如果你的设备有一个磁力计，你可以通过计算设备的旋转姿态（方位角、俯仰角和滚动）来区分横向和反向`getRotationMatrix()`横向`getOrientation()`。如果滚动为正，则您处于反向横向（横向右侧），如果滚动为负，您处于横向（左侧横向）。

同样，您可以使用音高来区分纵向和反向纵向。如果音高为正，则您处于反向纵向，如果音高为负，则您处于纵向。

如果您的设备没有磁力计，您可以使用加速度计的 x 轴和 y 轴值来区分横向和反向横向。x 轴值为负表示反向横向（横向右），正值表示横向。类似地，负的 y 轴值表示反向纵向，正的 y 轴值表示纵向。

# ruby - 可延迟与回调接口

> ID：16015272
> 
> 赞同：4
> 
> 时间：2013-04-15T12:33:43.730
> 
> 标签：ruby, asynchronous, eventmachine

使用可延迟而不是回调有什么好处。小例子。

```
# This is Deferrable interface
request = NetworkIO.get
request.callback do |resp|
  puts "Job is done"
end
request.errback do |err|
  puts "Oh. My name is Forest, Forest Gump"
end

# And this is callback interface
NetworkIO.get do |resp|
  if Exception === resp
    puts "Oh. My name is Forest, Forest Gump"
  else
    puts "Job is done!"
  end
end

# Or node js style
NetworkIO.get do |err, resp|
  if err
    puts "Oh. My name is Forest, Forest Gump"
  else
    puts "Job is done!"
  end
end 
```

Deferrable 有两个嵌套级别，而回调有三个嵌套级别。

正如我所看到的，例如，使用可延迟对象，您可以传递 errback，并且只定义回调。在某些情况下这是有意义的，因此代码变得更易读，代码行更少，嵌套更少。

但。我发现了一个烦人的案例。例如，你有这个假的异步 API。

```
class SomeIO
  def find(msg)
    response = DeferrableResponse.new
    req = socket.send(msg)
    req.callback do |data|
      response.succeed(data)
    end
    req.errback do |err|
      response.fail(err)
    end
    response
  end

  def count(msg)
    response = DeferrableResponse.new
    req = find(msg)
    req.callback do |data|
      response.succeed(data.size)
    end
    req.errback do |err|
      response.fail(err)
    end
    response
  end
end 
```

在回调模式下应该如何看

```
class SomeIO
  def find(msg, &blk)
    socket.send(msg) do |resp|
      blk.call(resp)
    end
  end

  def count(msg, &blk)
    find(msg) do |resp|
      if Exception === resp
        blk.call(resp)
      else
        cnt = resp.size
        blk.call(cnt)
      end
    end
  end
end 
```

即使现在它看起来也更干净了（我的口味）。但欣赏是主观的。想象一下，您将在异步 API 上支持同步 API。使用可延迟接口，您应该将所有具有可延迟响应的方法包装到 Fiber 中（这是一项非常庞大的工作并且需要非常繁重的支持），而在回调中您必须仅在真正的异步操作上调用 Fibers：

```
class SyncSomeIO < SomeIO
  def find(msg, &blk)
    fib = Fiber.current
    socket.send(msg) do |resp|
      fib.resume(resp)
    end
    res = Fiber.yield
    raise res if res === Exception
    res
  end
end 
```

所以你刚刚用 Fiber 包装了你的套接字，你的异步代码变得同步了。说真的，您还应该重新定义所有块方法：

```
class SomeIO
  ...

  def count(msg, &blk)
    find(msg) do |resp|
      if Exception === resp
        block_given? ? blk.call(resp) : resp
      else
        cnt = resp.size
        block_given? ? blk.call(cnt) : cnt
      end
    end
  end
end 
```

这是很小的变化，但只需几行代码，您的 API 就可以在同步和异步模式下工作。

很抱歉这么大的介绍，感谢您的阅读（你们两个人）。

问题是。Deferrable 实际上是 Ruby 中事件 API 的标准。所以也许我误解了一些东西，我使用 Deferable 错误的方式？也许回调接口有异味并且有一些不好的问题？

*PS：我写这一切是因为我正在 EventMachine 上开发 MongoDB 驱动程序，现在正在向客户端添加同步接口。最终意识到我应该修补所有公共 API 以添加同步支持，因为 Deferrables 并考虑在回调上重写它。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T07:34:43.520

如果您控制`Deferrable`的界面，您可以执行以下操作：

```
class DeferrableResponse
  def sync
    fiber = Fiber.current

    callback { |val| fiber.resume(val) }
    errback { |err| fiber.resume(err) }

    result = Fiber.yield
    raise result if result.is_a? Exception
    result
  end
end 
```

这将让您像这样使用同步 API：

```
response = NeworkIO.get.sync 
```

# c# - 使用 WebClient 发送 HTTP POST 请求

> ID：16015274
> 
> 赞同：1
> 
> 时间：2013-04-15T12:34:02.327
> 
> 标签：c#

我已经尝试将下一个标头发送到 Twitter API：

```
POST /oauth2/token HTTP/1.1
Host: api.twitter.com
User-Agent: My Twitter App v1.0.23
Authorization: Basic eHZ6MWV2R ... o4OERSZHlPZw==
Content-Type: application/x-www-form-urlencoded;charset=UTF-8
Content-Length: 29
Accept-Encoding: gzip

grant_type=client_credentials 
```

我搜索了一下，发现有一个方法叫 WebClient.UploadData（这个方法，隐式设置 HTTP POST 作为请求方法）但是我真的不知道如何使用它。

我知道如何使用 Set 方法更改当前标题。但是 HTTP 正文消息呢？如何在标题中添加一些正文？（grant_type）

PS：我阅读了文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:36:46.730

除非您正在处理多部分数据，否则这并不多。只需使用发布数据构建一个字符串（如果数据需要，则进行 URL 编码），获取字节，设置内容长度，然后将数据写入请求流。

```
string postData = String.Format("field1=value1&field2=value2");
byte[] postBytes = System.Text.ASCIIEncoding.UTF8.GetBytes(postData);

HttpWebRequest req = HttpWebRequest.Create("http://myurl.com");
//  ... other request setup stuff
req.ContentLength = postBytes.Length;
using (var stream = req.GetRequestStream())
{
    stream.Write(postBytes, 0, postBytes.Length);
} 
```

# ruby-on-rails - 在 Rails 中使用 lambda 从控制器的操作中返回控制

> ID：16015275
> 
> 赞同：0
> 
> 时间：2013-04-15T12:34:02.357
> 
> 标签：ruby-on-rails, controller, return, dry, proc

我该如何解决这个错误？我想干燥我的控制器，并且在每种方法中我都对 params[] 执行完整性检查，只要确保所有参数都存在。

问题在于 lambda 的回报。正如它所定义的

```
def validate_input(parameters)
    return proc {
        if parameters.find_index { |i| i.nil? }
          error_message = {'Error' => 'Please fix some params'}.to_json
          render :json => error_message and return
        end
    }
  end 
```

然后，在我的控制器操作中，我执行以下操作：

```
def action
  ...
  validate_input([my_sane_id, my_other_param]).call
  ...
end 
```

并得到错误：意外返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T14:05:58.893

```
def validate_input(*parameters)
  if parameters.any?(&:nil?)
     render :json => { :error => 'Please fix some params' }
     false
  else
     true
  end
end

def action
  ...
  return unless validate_input(my_sane_id, my_other_param)
  ...
end 
```

1.  您可以使用 splat 运算符 ("*") 将未知数量的参数放入数组

2.  您可以使用 ("any?") 方法代替索引（即位置）

3.  如果您只对数组中的每个项目进行函数调用，则可以使用符号来处理（“&：”）

4.  如果渲染 json，则不需要调用 to_json

5.  更好地使用符号作为哈希键（“：错误”）

6.  您返回真/假以指示一切是否正常，如果为假，则从操作中返回

# web-services - 为什么 services.xml 无效？

> ID：16015276
> 
> 赞同：0
> 
> 时间：2013-04-15T12:34:08.083
> 
> 标签：web-services, tomcat, configuration, axis2

```
 <service name="CaseCreate" >
<Description>
    Please Type your service description here
</Description>
<messageReceivers>
    <messageReceiver mep="http://www.w3.org/2004/08/wsdl/in-only" class="org.apache.axis2.rpc.receivers.RPCInOnlyMessageReceiver" />
    <messageReceiver  mep="http://www.w3.org/2004/08/wsdl/in-out"  class="org.apache.axis2.rpc.receivers.RPCMessageReceiver"/>
</messageReceivers>
<parameter name="ServiceClass" locked="false">casecreate.CaseCreate</parameter>

<parameter name="InflowSecurity">
   <action>
     <items>UsernameToken</items>
     <passwordCallbackClass>com.myproject.authentication.PWCBHandler</passwordCallbackClass>
    </action>
</parameter>

<module ref="rampart" />

</service> 
```

以上是我尝试使用的 services.xml，但 eclipse 告诉我这不是一个有效的 sevices.xml 文件。当我使用 name="InflowSevcurity" 删除参数时，Eclipse 不会抱怨。有谁知道为什么？

# arrays - “自我”-变量以便在 R 中轻松引用？

> ID：16015277
> 
> 赞同：1
> 
> 时间：2013-04-15T12:34:09.593
> 
> 标签：arrays, r, reference, self

我只想显示具有长变量名的数组的一部分。到目前为止，我使用过：

```
# Data
k0100_m020_r05_h10000__aea000_aee0$cumsumData = c(-1:10)

# show only parts
k0100_m020_r05_h10000__aea000_aee0$cumsumData[k0100_m020_r05_h10000__aea000_aee0$cumsumData>0] 
```

我想知道是否有更短的形式，因为我必须在方括号内重复变量名。**对当前使用的变量有更短的引用吗？**例如：

```
k0100_m020_r05_h10000__aea000_aee0$cumsumData[_self>0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:42:53.217

试试`subset`。

```
subset(k0100_m020_r05_h10000__aea000_aee0, cumsumData > 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:52:26.787

如果您要查看多个列，则一种`apply`方法可能有用：

```
k0100_m020_r05_h10000__aea000_aee0 <- as.data.frame(matrix(rnorm(25),ncol=5))

apply( k0100_m020_r05_h10000__aea000_aee0 , 2 , function(x) x [ x>0 ] )
#$V1
#[1] 1.5840356 0.2497689

#$V2
#[1] 0.4179352 1.6187143 0.8245239

#$V3
#[1] 0.09328116 0.20761514 0.29894603 2.14484045

#$V4
#[1] 0.4882152 0.4643691 0.5591095

#$V5
#[1] 1.0749748 0.5405291 0.4899797 1.0828021 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:42:38.583

我不确定这是否是您想要的，但也许`with()`可以提供帮助：

```
mask <- with(k0100_m020_r05_h10000__aea000_aee0, _self > 0) # gives you a boolean vector
k0100_m020_r05_h10000__aea000_aee0[mask]                    # gives you the result 
```

# php - 意外的 T_FUNCTION？

> ID：16015286
> 
> 赞同：4
> 
> 时间：2013-04-15T12:34:39.127
> 
> 标签：php

我有关于在 php 版本 5.2.7 中解决的问题，我在第 56 行收到错误 Parse error: syntax error, unexpected T_FUNCTION in /home/ ... /mainMenu.php。代码是

```
class MainMenu {
    ...
    private static function toRec($arr) {
        ...

        usort($newArr, function($a, $b) {//this was line 56
            return $a['nav_order'] - $b['nav_order'];
        });
        ...
    }
    ...

} 
```

php 5.2 的替代方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T12:48:42.917

正如您所发现的，内联函数语法仅在 PHP 5.3 及更高版本中有效。它在 PHP 5.2 中不可用。

另一种方法是将函数的名称指定为字符串，然后使用该名称单独声明函数。这在[usort() 手册页](http://php.net/manual/en/function.usort.php)中有很好的记录，所以我不会在这里详细介绍。

您也可以使用`create_function()`. 这可能是让您的 PHP 5.2 代码在视觉上看起来像 5.3 的最接近的方法，但出于多种原因，我强烈建议您不要这样做。

最后，我强烈建议从 5.2 升级。我知道在某些情况下这很困难，但事实是 PHP 5.2 已在两年多前宣布终止生命。那时它没有任何安全更新，并且存在一些大漏洞。如果您仍然停留在 5.2，那么您将越来越落后于曲线；甚至 5.3 也将在不久的将来报废，因为 5.5 即将推出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:39:54.113

[匿名函数](http://php.net/manual/en/functions.anonymous.php)仅在 PHP 5.3 之后才可用，因此您可以声明函数并只使用一次（我会这样），或者使用[`create_function()`](http://php.net/manual/en/function.create-function.php)：

```
usort($newArr, create_function( '$a, $b', 'return $a[\'nav_order\'] - $b[\'nav_order\'];')); 
```

但这会在你每次执行一段代码时创建函数，所以尽量不要在循环中使用它。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:37:07.967

美国 usort 的正确语法是

```
usort($a, "FUNCTION_NAME");

function FUNCTION_NAME(){
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:41:53.093

您正在使用的是 lambda/ 匿名函数，它在 PHP 5.3 及更高版本中受支持，以使其适用于 PHP 5.2，如下所示

```
class MainMenu {
    ...
    private static function toRec($arr) {
        ...

        usort($newArr, array('MainMenu','someFunction'));
        ...
    }
    ...
   private static function someFunction ($a, $b)
   {
     ....
   }

} 
```

# matlab - 在 MATLAB 中围绕一个点裁剪圆形感兴趣区域

> ID：16015287
> 
> 赞同：3
> 
> 时间：2013-04-15T12:34:43.560
> 
> 标签：matlab, image-processing

![在此处输入图像描述](https://i.stack.imgur.com/lpqHX.jpg)

我有一张图像，我想围绕一个点裁剪感兴趣的圆形区域。我在 MATLAB 中做了以下操作：

```
 vessel=imread('vessel.jpg');
  imshow( vessel)
  t = 0:pi/20:2*pi;
  xc=230; % point around which I want to extract/crop image
  yc=79;
  r=20;   %Radium of circular region of interest
  xcc = r*cos(t)+xc;
   ycc =  r*sin(t)+yc;
   roimaskcc = poly2mask(double(xcc),double(ycc), size(vessel,1),size(vessel,2));
   pr_gccc = find(roimaskcc);
   roimean_cc= mean(vessel(pr_gccc));
  figure, imshow(roimaskcc) 
```

roimaskcc 是正确的，但是当我执行以下操作时，它会给出 nX1 矩阵，而不是掩码下的感兴趣区域：

```
 vessel_undermask=vessel(roimaskcc==1); 
```

任何人都可以请。帮助提取兴趣点（xc，yc）周围的圆形兴趣区域。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:18:19.853

你正在做的是从`vessel`面具外面提取所有东西。由于没有圆形矩阵这种东西，Matlab 的解决方案是输出掩码内所有值的*向量*。

虽然这在技术上是正确的，但该向量可能很难使用。另一种解决方案是让数据矩阵保持正方形，并将掩码外的所有内容设置为`NaN`：

```
% make a copy      
vessel_undermask = vessel;

% NaN everything outside the mask (in R, G and B layers)  
vessel_undermask(repmat(~roimaskcc,[1,1,3])) = NaN;

imshow(vessel_undermask) 
```

这应该为您提供一个更易于使用的矩阵。

注意

```
vessel_undermask(~isnan(vessel_undermask)) ==  vessel(roimaskcc) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:17:43.383

是的，我知道了。我做了这样的事情：

```
 vesseltry=vessel;
          vesseltry(~roimaskcc)=0; 
```

现在，vesseltry 是我的新图像，带有圆形感兴趣区域...

# dynamic - 用于大型数组 C++ 的具有 MPI 的动态工作人员池

> ID：16015291
> 
> 赞同：1
> 
> 时间：2013-04-15T12:35:02.420
> 
> 标签：dynamic, scheduled-tasks, mpi

我的问题是如何使用 MPI 创建一个动态的工人池。

有一个大的（NNN = 10^6-7 个元素）一维数组/向量。我应该对每个单元格进行一些计算。这个问题是极其尴尬的并行。

这个想法是（它工作正常）：每个 MPI 进程（当并行运行时）读取公共 .dat 文件，将值放入本地（每个等级）大小为 NNN 的大向量中，并在大数组的适当部分执行计算，长度这个“部分”是NNN/nprocs，其中“nprocs”是MPI的进程数。

问题：这个数组（NNN/nprocs）的一些“部分”完成得非常快，因此一些 CPU 未被使用（它们等待其他 CPU 完成运行）。

问题1：如何制定动态时间表。完成任务的 CPU 可以选择新任务并继续工作。

问题2：是否有 MPI 内置程序，可以自动安排“工人”和任务？

这是我的代码（静态时间表）

```
{  
  MPI_Init(&argc, &argv); 
  MPI_Comm_size(MPI_COMM_WORLD, &nprocs);
  MPI_Comm_rank(MPI_COMM_WORLD, &rank);

  MPI_Offset offset;
  MPI_File file;
  MPI_Status status;

   int Pstart = (NNN / nprocs) * rank + ((NNN % nprocs) < rank ? (NNN % nprocs) : rank);
   int Pend   = Pstart + (NNN / nprocs) + ((NNN % nprocs) > rank);
   offset = sizeof(double)*Pstart;

  MPI_File_open(MPI_COMM_WORLD, "shared.dat", MPI_MODE_CREATE|MPI_MODE_WRONLY, MPI_INFO_NULL, &file);

    double * local_array;
    local_array = new double [NNN/nprocs];

    for (int i=0;i<NNN/nprocs;i++)
       {
          /* next line calculates integral on each cell element of part NNN/nprocs of large array NNN */
          adapt_integrate(1, Integrand, par, 2, a, b, MaxEval, tol, tol, &val, &err);

          // putting result of integration to local array NNN/nprocs
          local_array[i] = val;
       }
 //  here, all local arrays are written to one shared file "shared.dat"    

 MPI_File_seek(file, offset, MPI_SEEK_SET);
 MPI_File_write(file, local_array, NNN/nprocs, MPI_DOUBLE, &status);
 MPI_File_close(&file);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:23:45.677

[这个问题](https://stackoverflow.com/questions/11180624/mpi-task-scheduling?rq=1)是关于一个类似的问题，但只是回顾一下：有一个指定的主进程，向其他人发布大量工作。所有工作人员需要做的就是阻塞接收一个工作项，执行他们的计算，然后阻塞将结果发送给主节点并重复。master 可以通过为每个 worker 发布非阻塞接收并轮询其中任何一个是否完成来管理工作项，或者通过发布阻塞接收`MPI_ANY_SOURCE`作为源来管理工作项。

# c# - 锯齿状阵列与一个大阵列？

> ID：16015298
> 
> 赞同：8
> 
> 时间：2013-04-15T12:35:28.537
> 
> 标签：c#, chess

不太确定如何问这个问题，但我有 2 种方法（到目前为止）查找数组

选项 1 是：

```
bool[][][] myJaggegArray;

myJaggegArray = new bool[120][][];
for (int i = 0; i < 120; ++i)
{
  if ((i & 0x88) == 0)
  {
    //only 64 will be set
    myJaggegArray[i] = new bool[120][];
    for (int j = 0; j < 120; ++j)
    {
      if ((j & 0x88) == 0)
      {
        //only 64 will be set
        myJaggegArray[i][j] = new bool[60];
      }
    }
  }
} 
```

选项 2 是：

```
bool[] myArray;
//                [998520]
myArray = new bool[(120 | (120 << 7) | (60 << 14))]; 
```

两种方式都很好，但是是否有另一种（更好的）方式进行快速查找，如果速度/性能很重要，您会采用哪种方式？

这将用于[棋盘实现（0x88）](http://en.wikipedia.org/wiki/Board_representation_%28chess%29#0x88_method)，主要是

`[from][to][dataX]`对于选项 1

`[(from | (to << 7) | (dataX << 14))]`对于选项 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:47:34.350

我建议使用一个大数组，因为有一个大内存块的优点，但我也鼓励为该数组编写一个特殊的访问器。

```
class MyCustomDataStore
{ 
  bool[] array;
  int sizex, sizey, sizez;

  MyCustomDataStore(int x, int y, int z) {
    array=new bool[x*y*z];
    this.sizex = x;
    this.sizey = y;
    this.sizez = z;
  }

  bool get(int px, int py, int pz) {
    // change the order in whatever way you iterate
    return  array [ px*sizex*sizey + py*sizey + pz ];
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:16:54.550

我只是用 z-size <= 64 的 long 数组更新 dariusz 的解决方案

edit2：更新为 '<<' 版本，尺寸固定为 128x128x64

```
class MyCustomDataStore
{
     long[] array;

     MyCustomDataStore() 
     {
          array = new long[128 | 128 << 7];
     }

     bool get(int px, int py, int pz) 
     {
          return (array[px | (py << 7)] & (1 << pz)) == 0;
     }

     void set(int px, int py, int pz, bool val) 
     {
          long mask = (1 << pz);
          int index = px | (py << 7);
          if (val)
          {
               array[index] |= mask;
          }
          else
          {
               array[index] &= ~mask;
          }
     }
} 
```

编辑：性能测试：使用 100 次 128x128x64 填充和读取

```
long: 9885ms, 132096B
bool: 9740ms, 1065088B 
```

# css - CSS垂直对齐：中间；属性不工作

> ID：16015300
> 
> 赞同：0
> 
> 时间：2013-04-15T12:35:33.830
> 
> 标签：css

我对css有一些问题。我正在尝试垂直对齐：跨度标记中的中间文本。

它适用于两行文本，但不适用于单行文本。

可以请一些帮助..

我使用了以下代码...

```
<div>
        <table>
            <tr>
                <td class="chld_Middle_Main_Right_Products_Landing_kits">
                    <ul>
                        <li>
                            <img /><input type='checkbox' value='28' /><br />
                            <a href='#'>
                                <span class='button2'>Antigua and Barbuda</span>
                            </a></li>
                        <li>
                            <img /><input type='checkbox' value='15' /><br />
                            <a href='#'>
                                <span class='button2'>Bosnia and Herzegovina</span>
                            </a></li>
                        <li>
                            <img /><input type='checkbox' value='1' /><br />
                            <a href='#'>
                                <span class='button2'>Pakistan</span>
                            </a></li>
                    </ul>
                </td>
            </tr>
        </table>

    </div> 
```

我用过以下css

```
.chld_Middle_Main_Right_Products_Landing_kits {}
    .chld_Middle_Main_Right_Products_Landing_kits > ul {list-style-type: none; margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px;}
    .chld_Middle_Main_Right_Products_Landing_kits > ul > li {display:inline-block; vertical-align:top; padding: 15px 15px 15px 10px; text-align: center;}
    .chld_Middle_Main_Right_Products_Landing_kits > ul > li > a {}
    .chld_Middle_Main_Right_Products_Landing_kits > ul > li > img {width: 112px; height: 112px; border: 1px solid #cccccc;}
    .chld_Middle_Main_Right_Products_Landing_kits > ul > li > input {vertical-align:top;cursor:pointer;margin:0px 0px 0px -20px;}
    .chld_Middle_Main_Right_Products_Landing_kits > ul > li > a > span {width: 102px;height:35px; display: inline-block; margin-top:-4px;margin-left:0px; font-family:verdana, sans-serif; text-shadow: 1px 0.5px 0 rgba(0,0,0,0.3);color:#666;}

    .button2{width:120px;font-size:10px;font-family:verdana, sans-serif; padding: 5px 5px 5px 5px; text-shadow: 1px 0.5px 0 rgba(0,0,0,0.3);font-weight:bold; text-align: center; color:#666; background-color: #dedbdb;border:1px solid #CCC; text-decoration:underline;cursor:pointer;}
    .button2:hover{background-color: #00adee;cursor:pointer; color:#fff;text-decoration:underline;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:39:44.847

添加`span`到此属性`display: table-cell; vertical-align: middle;`

这是工作示例[http://jsfiddle.net/7DgjP/](http://jsfiddle.net/7DgjP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:38:30.670

在 a 标签中使用中间对齐

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:42:01.497

试试margin-top:100%；保证金底部：100%；

# primefaces - 使用 primefaces 扩展 (inputNumber)

> ID：16015302
> 
> 赞同：6
> 
> 时间：2013-04-15T12:35:41.623
> 
> 标签：primefaces, primefaces-extensions

我是`primefaces`word 新手，我需要使用`primefaces`扩展名 ( `inputNumber`)

在 XHTML 文件中，我添加了 taglib ：

```
xmlns:pe="http://primefaces.org/ui/extensions" 
```

添加罐子时：

```
primefaces-extensions-0.6.3; 
```

我有一个错误：`La ressource demandée n'est pas disponible.`

删除它时，应用程序工作但`inputNember`不显示，我收到此错误：

```
Warning: This page calls for XML namespace http://primefaces.org/ui/extensions declared with prefix pe but no taglibrary exists for that namespace. 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-16T09:55:37.540

要使用 primefaces 扩展，我应该将 taglib 添加到 XHTML 文件中：

```
xmlns:pe="http://primefaces.org/ui/extensions" 
```

和lib文件夹两个罐子：

```
primefaces-extensions-0.6.3.jar
common-lang3.jar. 
```

就这些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T14:02:42.650

如果您对依赖项使用 maven，则必需的条目是

```
<dependency>
    <groupId>org.primefaces.extensions</groupId>
    <artifactId>primefaces-extensions</artifactId>
    <version>0.6.3</version>
</dependency> 
```

这将为 primefaces 扩展添加所需的依赖项。

如果您没有使用 maven，那么您应该遵循“其他用户”的[入门指南](https://github.com/primefaces-extensions/primefaces-extensions.github.com/wiki/Getting-Started#other-users) 并添加所有必要的 jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-23T07:46:38.130

对我来说，缺少一个 Maven 依赖项！

```
<dependency>
   <groupId>org.apache.commons</groupId>
   <artifactId>commons-lang3</artifactId>
   <version>3.0</version>
</dependency> 
```

注意：目前“commons”以 S 结尾

2016.12.24，扩展的版本现在可以是6.0.0

```
<dependency>
    <groupId>org.primefaces.extensions</groupId>
    <artifactId>primefaces-extensions</artifactId>
    <version>6.0.0</version>
</dependency> 
```

感谢 Rong Nguyen 和 Ghizlane La

最后一句话

我遇到了一些问题（Chrome 中的错误消息表明缺少某些资源），因为 Primefaces 和 PrimefacesExtension end Commons-lang3 使用的版本不兼容！

但我发现以下组合对我来说是正确的。

```
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-lang3</artifactId>
    <version>3.5</version>
</dependency>

<dependency>
    <groupId>org.primefaces</groupId>
    <artifactId>primefaces</artifactId>
    <version>6.0</version>
</dependency>

<dependency>
    <groupId>org.primefaces.extensions</groupId>
    <artifactId>primefaces-extensions</artifactId>
    <version>6.0.0</version>
</dependency> 
```

我希望这对其他人有用:-)

# html - WebRTC：对等连接限制？

> ID：16015304
> 
> 赞同：22
> 
> 时间：2013-04-15T12:35:47.067
> 
> 标签：html, webrtc

我可以在单个客户端上创建多少个对等连接？有没有限制？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2019-11-22T18:53:44.857

我假设您已经通过实验达到了 256，因为目前没有文档/规范建议它。我不知道自 2013 年以来情况发生了怎样的变化，但目前，我自己的实验上限为每页 500 个同时连接。据我所知，Firefox 没有这样的限制。

**根据 Chromium 源代码，真正的限制是 500**（[源代码](https://chromium.googlesource.com/chromium/src/third_party/+/master/blink/renderer/modules/peerconnection/rtc_peer_connection.cc#144)）。据我所知，即使可以追溯到 WebKit 时代，在实施（[来源）之前没有任何限制。](https://chromium.googlesource.com/chromium/src/third_party/+/5a7f431061f415177cf391511d1331c5bd9b7773%5E%21/WebKit/Source/modules/peerconnection/RTCPeerConnection.cpp)

我认为跟踪它可能很棘手的一个原因是 Chrome（以及 FF 就此而言）在死连接的垃圾收集方面一直很糟糕。如果您检查`chrome://webrtc-internals`（FF 等效项：） `about:webrtc`，通常会累积僵尸连接，这些连接计入 500 限制。这些将一直存在，直到您手动销毁它们或关闭/刷新页面。解决此问题的一种方法是通过您自己的心跳实现或使用信号服务器通知对等方断开连接，以便其他对等方可以破坏它们的连接（尽管这需要到信号服务器的持久连接）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-12T06:22:01.790

**最大对等连接限制为 256（在 chrome 上）。**

不确定其他主要浏览器，根据您的带宽，它们受到限制以提供一定的稳定性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T06:45:57.977

不确定是否有任何硬限制（运行时内存除外），但肯定有软限制。

如果您正在考虑全网状拓扑（其中每个客户端都连接到每个其他客户端的应用程序），那么您必须考虑此拓扑的主要缺陷。对于视频会议中的大量参与者，维持整个会话所需的会话带宽对于每个新参与者都会增加。

因此，低带宽的用户将无法处理有大量参与者的视频会议会话。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-11T05:50:51.233

这是一个有趣的话题。我刚刚在看这个关于 WebRTC 中的 Multi Peer 的 youtube 视频。主持人说这取决于同伴的数量，但他所做的最多的是不到 6 个同伴。这也取决于您的带宽大小。您可以做的最好的事情是开发一个 WebRTC 并尝试与您的朋友联系并判断，因为这也取决于您所在的国家/地区。就像我住在博茨瓦纳并且网络不快所以我不希望有 6 个同行虽然我仍然很难与这边的一个人进行清晰的沟通。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-23T14:19:39.820

根据[这个来源](https://webrtc.ventures/2017/11/a-guide-to-webrtc-media-servers-open-source-options/)：

> 在实践中，即使在最佳网络条件下，网状视频通话也不能很好地超过五个参与者。

# iphone - 字符串未拆分导致无法识别的选择器错误

> ID：16015306
> 
> 赞同：0
> 
> 时间：2013-04-15T12:35:58.897
> 
> 标签：iphone, nsstring

试图将字符串拆分为数组，但它给出错误“[__NSArrayI componentsSeparatedByString:]: unrecognized selector sent to instance 0x11741b20'”。字符串包含值，该值来自数组的第一个索引，然后需要将字符串拆分并存储在数组中。

这是数组值。

```
mcommarr:(
":comment",
":comment",
":comment"

NSString *strr = [[NSString alloc]init];
strr = [self.mCommArr objectAtIndex:indexVal];
NSArray *arr2 = [str componentsSeparatedByString:@","]; 
```

这是我使用它的完整方法。

```
-(void)loadData:(int)indexVal;
{    
indexVal=serialIndexVal;
serialIndexVal++;

NSLog(@"arrLike:%d", [self.mArrLike count]);
NSLog(@"arrPid:%d", [self.mArrPid count]);

status = [NSString stringWithFormat:@"get"];
[self.mButtonsStatusDict setObject:status forKey:@"status"];

[self.mButtonsPidDict setObject:[self.mArrPid objectAtIndex:indexVal] forKey:@"pid"];

[self.activityIndicator startAnimating];

@try
{
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

dispatch_async(queue, ^{

    NSString *status = [NSString stringWithFormat:@"get"];
    [self.mButtonsStatusDict setObject:status forKey:@"status"];
    [self.mButtonsPidDict setObject:[self.mArrPid objectAtIndex:indexVal] forKey:@"pid"];

    self.mButtonsCommentsDict = [MyEventApi showComments:self.mButtonsPidDict];

    self.mButtonsDict = [MyEventApi likeDislike:self.mButtonsUidDict post:self.mButtonsPidDict postStatus:self.mButtonsStatusDict];

    dispatch_sync(dispatch_get_main_queue(), ^{

        [self.activityIndicator stopAnimating];
         NSLog(@"buttons data dict:%@", self.mButtonsDict);

        if([self.mButtonsDict count] == 0)
        {
            NSLog(@"server problem no response");
            [self.mArrLike addObject: @"0"];
            [self.mArrDislike addObject: @"0"];
        }else{
        [self.mArrLike addObject: [self.mButtonsDict valueForKey:@"like"]];
        [self.mArrDislike addObject: [self.mButtonsDict valueForKey:@"dislike"]];
        }

        if([self.mButtonsCommentsDict count] == 0)
        {
            NSLog(@"server problem no response");
             [self.mCommArrTot addObject: @"0"];
        }
        else{
            self.dictComm = [self.mButtonsCommentsDict valueForKey:@"comments"];
            [self.mCommArr addObject:[self.dictComm valueForKey:@"comment"]];
            NSLog(@"count:%d",[self.mCommArr count]);
          //  NSString *strTot = [NSString stringWithFormat:@"%d",tot];
           // [self.mCommArrTot addObject:strTot];
            NSLog(@"dictcomm:%@", self.dictComm );
            NSLog(@"mcommarr:%@", [self.mCommArr objectAtIndex:indexVal]);
            strr = [[NSString alloc]init];
            strr = [self.mCommArr objectAtIndex:indexVal];
            //NSString *strr = [[NSString stringWithFormat:@"%@", [self.mCommArr objectAtIndex:indexVal]];
           // NSArray *arr1 = [self string:strr];

           // NSArray *splitArray=[self.mCommArr[0] componentsSeparatedByString:@","];

             //[strr componentsSeparatedByString:@","];
           // NSLog(@"arrSep:%@", arr1);
            //int count = [arr1 count];
            //NSLog(@"arrcount:%d", count);
           // NSString *strTot = [NSString stringWithFormat:@"%d",count];
            // [self.mCommArrTot addObject:strTot];
            //NSLog(@"mcommarrtot:%@", [self.mCommArrTot objectAtIndex:indexVal]);
        }
       // NSLog(@"arrLike:%@", [self.mArrLike objectAtIndex:indexVal]);
        // NSLog(@"arrDisLike:%@", [self.mArrLike objectAtIndex:indexVal]);

        [self.mPublicFriendTable reloadData];

    });
});
}
@catch (NSException *exception) {
    NSLog(@"main: Caught %@: %@", [exception name], [exception reason]); 
}
@finally {

}
} 
```

它在尝试分裂时被杀死。为什么这样，我没有得到。如果有人遇到过这种情况，请指导她出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:44:27.070

您可以将字符串拆分为 NSArray，如下所示...

```
NSString *yourString = @"comment,comment,comment";
NSArray *strArray = [yourString componentsSeparatedByString:@","];
NSLog(@"\n\n Array is ==>> %@",strArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:02:47.487

```
NSString *strr = [[NSString stringWithFormat:@"%@", [self.mCommArr objectAtIndex:indexVal]];
NSArray *arr2 = [strr componentsSeparatedByString:@","]; 
```

我认为您现在正在传递`str`，它可以是一个数组（正如您的错误指出的那样）。让我知道结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:49:06.983

> "[__NSArrayI componentsSeparatedByString:]:

您的错误表明您尝试将上述方法发送到`NSArray`，但没有。

由于您想在索引 0 处拆分数组。您可能应该这样做：

```
NSArray *splitArray=[yourArray[0] componentsSeparatedByString:@","]; 
```

这里 yourArray 是您从 Server 获得的数组。

# tomcat - Liferay：如何添加新的 JSONWebService 方法

> ID：16015307
> 
> 赞同：0
> 
> 时间：2013-04-15T12:36:04.103
> 
> 标签：tomcat, liferay, liferay-6, portal

我需要通过 json 请求获取 DDL 记录。Liferay 核心没有这样的服务。只有getRecordSet。

我编写 DDLRecordSetService Hook 来添加新方法`getRecords(recordSetId)`。我的代码：

```
public class ExtDDLRecordSetLocalServiceImpl extends DDLRecordSetServiceWrapper {

   public ExtDDLRecordSetLocalServiceImpl(DDLRecordSetService ddlRecordSetService) {
       super(ddlRecordSetService);
   }

   public com.liferay.portlet.dynamicdatalists.model.DDLRecordSet getRecordSet(long recordSetId) throws com.liferay.portal.kernel.exception.PortalException, com.liferay.portal.kernel.exception.SystemException{

       System.out.println("------override getRecordSet ");
      DDLRecordSet set = super.getRecordSet(recordSetId+10);
        return set;
   }

   @JSONWebService
   public List<DDLRecord> getRecords(long recordSetId) throws SystemException, PortalException {
        System.out.println("------override getRecords");
        return   getRecordSet(recordSetId).getRecords();
   }

} 
```

我可以覆盖 getRecordSet()，但我无法通过 URL 访问 getRecordSet() 方法。

我得到：

```
{"exception":"No JSON web service action associated with path /ddlrecordset/get-records and method GET for /"} 
```

如何添加新的 DDLRecordSetService，它可以通过 JSONWebService 返回记录集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:58:41.137

DDL 的内置 JSON 服务比获取记录集更丰富。尝试将浏览器指向门户网站的 Web 服务 api 页面。登录后，

/api/jsonws

DDLRecord 有 7 个方法，DDLRecordSet 有 8 个方法。

在我看来，标准 API 将满足您的需求。

如果事实证明不是这样，那么……

JSON Web 服务方法是在运行服务构建器时创建的。这会将您的方法反向工程为 JSON、SOAP 等的正确对象。

由于您从不运行服务构建器，因此逆向工程永远不会发生。我怀疑在 Liferay 核心资源上运行 SB 是不是你的想法（无论如何，这都是不可取的，imo。）

我的建议是使用 Service Builder 创建您自己的服务，从而为您想要公开的服务对象创建您自己的 API。也看到[这个问题](https://stackoverflow.com/questions/15397624/can-the-resourcelocalservice-be-called-remotely-via-the-json-ws-api/15413174)

# mysql - 在 sql 中使用 for 语句从 2 个表中选择

> ID：16015309
> 
> 赞同：0
> 
> 时间：2013-04-15T12:36:06.007
> 
> 标签：mysql, sql, select

我有 2 个表，想从中选择数据

```
table 1 :
id
name

table 2
id
name
table1.id 
```

我想要一个查询来做出这个结果：

```
table1.id
table1.name
count(table2.id) 
```

这很简单，可以通过这种方式解决：

```
SELECT 
c.id as corridor_id,
c.name as corridor_name,
(SELECT COUNT( r.id ) FROM rooms AS r WHERE r.corridorid = c.id ) as room_count
FROM corridors AS c 
```

现在如果我添加另一个这样的表：

```
table3
id
name
table2.id 
```

并想要这样的查询：

```
table1.id
table1.name
count(table2.id)
count(table3.id) 
```

idk 我怎么能做这样的查询，但如果有办法我会很高兴找到它，很多 tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:40:48.937

您需要将它们全部连接在一起，然后按照以下方式对它们进行分组：

```
SELECT 
   t1.Id,
   t1.Name,
   Count(t2.Id) AS T2Count,
   Count(t3.Id) AS T3Count 
FROM table1 t1
JOIN table2 t2
ON t1.Id = t2.table1_id
JOIN table3 t3
ON t2.id = t3.table2_id
GROUP BY t1.Id, t1.Name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:40:39.193

您在这里不需要嵌套`SELECT`语句。您可以通过分组来避免重复计算您想要的`DISTINCT`关键字：

```
SELECT 
    c.id as corridor_id,
    c.name as corridor_name,
    COUNT(DISTINCT r1.id),
    COUNT(DISTINCT r2.id)
FROM 
    corridors c
    JOIN rooms r ON r.corridorid = c.id
    JOIN rooms2 r2 ON r2.corridorid = c.id
GROUP BY c.id 
```

如果您想正确处理缺失值（0 个计数），您也可以这样做：

```
SELECT 
    c.id as corridor_id,
    c.name as corridor_name,
    IFNULL(COUNT(DISTINCT r1.id), 0),
    IFNULL(COUNT(DISTINCT r2.id), 0)
FROM 
    corridors c
    LEFT JOIN rooms r ON r.corridorid = c.id
    LEFT JOIN rooms2 r2 ON r2.corridorid = c.id
GROUP BY c.id 
```

# android - listfragment 中的不同视图得到错误

> ID：16015314
> 
> 赞同：0
> 
> 时间：2013-04-15T12:36:28.180
> 
> 标签：android

我用 listfragment 和自定义适配器构建了一个列表！我想要第 25 行填充不同的视图！我的代码在第一次显示视图时工作，当向上滚动列表并排出屏幕时，得到 FC ！而如果我评论这一行==> if(row == null){ 代码运行良好，没有问题，但是列表中有很多项目并且列表很慢，因为列表没有优化

```
 public class MyListAdapter extends ArrayAdapter{

          Context myContext;
          private ArrayList mList;
          public MyListAdapter(Context context, int textViewResourceId,ArrayList list) {
           super(context, textViewResourceId, list);
           myContext = context;
           list=this.mList;
          }

          @Override
          public View getView( final int position, View convertView, ViewGroup parent) {
            View row=convertView;
        if(row == null){

            if(position!=20)
            {
                LayoutInflater inflater = (LayoutInflater)myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                row = inflater.inflate(R.layout.row, parent, false);
                ViewHolder holder = new ViewHolder();
                // holders
                holder.txt_name = (TextView)row.findViewById(R.id.txt_name);
                holder.txt_sms = (TextView)row.findViewById(R.id.txt_sms);
                holder.txt_vote = (TextView)row.findViewById(R.id.txt_vote);
                holder.btn_favorite=(ImageView)row.findViewById(R.id.btn_favorite);
                holder.btn_send=(Button)row.findViewById(R.id.btn_send);
                row.setTag(holder);
            }
            else{
                LayoutInflater inflater = (LayoutInflater)myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                row = inflater.inflate(R.layout.row2, parent, false);
            }

        }

        if(position!=20)
        {
        ViewHolder holder = (ViewHolder)row.getTag();
        holder.txt_sms.setText(mysms.get(position).gettext());
        holder.txt_name.setText(mysms.get(position).getname());
        holder.txt_vote.setText(mysms.get(position).getVotenum()+"");
        holder.btn_favorite.setImageResource(R.drawable.icon);
        holder.btn_send.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

            }
        });
        }

            return row;
          }

    }

    static class ViewHolder {
        TextView txt_sms;
        TextView txt_name;
        TextView txt_vote;
        ImageView btn_favorite;
        Button btn_send;

    } 
```

# c++ - 有错误输出包括最后几行代码

> ID：16015320
> 
> 赞同：1
> 
> 时间：2013-04-15T12:36:51.913
> 
> 标签：c++, error-handling, gnu, output, m4

是否有可能，如果是这样，您将如何使错误输出包含最后几行代码？我知道 GNU g++ 对 and 的支持`__LINE__`，`__FUNC__`但那些只将行号作为 int 和函数名作为字符串给出 - 我想转储失败的函数的代码或至少程序执行的最后几个命令。

我在想也许可以编写一个 m4 脚本来解析代码库并注入它们所放入函数的字符串结构（当然不包括它们自己）。

还有其他/更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T12:10:43.057

根本不要更改您的代码。使用`__LINE__`和`__FUNC__`后处理错误输出。也就是说，在可以访问您的代码库并可以生成所需文本的`my-prog > $(tty) 2>&1 | post-process`地方运行您的程序。`post-process`您可能希望通过添加标记来稍微修改代码，以便后处理更容易找到函数名称和行号。

# video-streaming - 将视频流式传输到 gstreamer rtsp 服务器

> ID：16015326
> 
> 赞同：2
> 
> 时间：2013-04-15T12:37:07.110
> 
> 标签：video-streaming, gstreamer, rtsp

我正在尝试构建一个基于 gstreamer 的 rtsp 视频服务器。就我而言，我需要客户端连接到服务器并开始将视频流式传输到服务器。

我已经阅读了一些关于这个主题的教程，尤其是这个：[http ://www.ip-sense.com/linuxsense/how-to-develop-a-rtsp-server-in-linux-using-gstreamer/](http://www.ip-sense.com/linuxsense/how-to-develop-a-rtsp-server-in-linux-using-gstreamer/)

在本教程中，视频从服务器流式传输到客户端，我需要对其进行更改，以便视频将从客户端流式传输到服务器。

编辑：在演示中，这个管道被启动：

```
gst_rtsp_media_factory_set_launch (factory, "( "
          "videotestsrc ! video/x-raw-yuv,width=320,height=240,framerate=10/1 ! "
          "x264enc ! queue ! rtph264pay name=pay0 pt=96 ! audiotestsrc ! audio/x-raw-int,rate=8000 ! alawenc ! rtppcmapay name=pay1 pt=97 "")"); 
```

管道从视频和音频测试源开始，并将它们编码为有效负载 0 和 1。我需要做相反的事情 - 获取 rtsp 有效负载并对其进行解码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-11-03T04:47:50.450

尽管这个问题是很久以前提出的，但我将为可能正在寻找它的其他人回答。使用 GStreamer 来实现这一点。

1.  Gstreamer 现在有一个 RTSP 媒体服务器[Here](https://github.com/GStreamer/gst-rtsp-server)
2.  Gstreamer 还有一个[GstRtspClientSink 元素](https://github.com/GStreamer/gst-rtsp-server/blob/master/gst/rtsp-sink/gstrtspclientsink.c)，它允许您将流发送到兼容的 RTSP 媒体服务器。一个基本的命令行示例是“gst-launch-1.0 videotestsrc！queue！x264enc！rtspclientsink location=rtsp://127.0.0.1:8554/test”假设媒体服务器在本地主机上运行，​​端口 8554 并期待一个发布点“测试”
3.  [此处](https://github.com/GStreamer/gst-rtsp-server/blob/master/examples/test-record.c)提供了一个基于 GStreamer RTSP 服务器的应用程序示例，该应用程序接受来自客户端的流

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:07:00.000

要解码客户端从服务器接收到的 RTSP 流，请使用`rtspsrc`

```
 gst-launch rtspsrc location=${LOCATION} \
           ! rtph264depay ! ffdec_h264 ! ffmpegcolorspace ! xvimagesink 
```

但是您的问题似乎是针对将有效负载推送到服务器，而不是从服务器中提取它（至少是在您编辑它之前......现在我有点不清楚）。

该`gstrtspserver`框架似乎针对 RTSP 的常见用例：客户端从服务器中提取数据。如果你想恢复它，你最好的开始可能是将 gstrtspserver 库破解到一个`gstrtsppushclient`框架中（只需交换连接逻辑就可以了）。您还必须重新实现接收（服务器）端。

但是它不再是真正的 RTSP（从某种意义上说，你不会在那里找到任何其他可以处理你的应用程序）。

您可能应该重新考虑您的架构。一个好的开始阅读可能是[RFC2326](https://www.rfc-editor.org/rfc/rfc2326)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T18:00:22.943

如果您真正想要的只是一个从“客户端”接收流式输入的“服务器”，那么只需颠倒服务器和客户端应用程序的角色即可。编写一个始终存在的客户端您可能需要某种重新启动循环，以便如果传入流的结尾结束您的管道，您只需重新启动它。此外，您的客户需要对数据做任何您想做的事情；存储它，展示它，重播它（？？？）。

现在可以修改客户端（以前是服务器）代码以将数据发送到服务器（以前是客户端），然后终止或等待另一个流传输。

有点笨拙，但它应该工作。

# java - 从 PHP 脚本加载的图像不会显示在 ImageView 中

> ID：16015329
> 
> 赞同：-1
> 
> 时间：2013-04-15T12:37:09.700
> 
> 标签：java, php, android, bitmap, imageview

我想用保存在本地主机上的图像填充 ImageView。我可以在浏览器中很好地显示它，但它不会显示在我的 ImageView 中。

显示图像的 PHP 脚本：

```
<?php
include('connect_db.php');

    $id = $_GET['id'];

    $path = 'Profile_Images/'.$id.'.jpg';

        echo '<img src='.$path.' border=0>';

?> 
```

这是我从 URL 下载图像的 android 代码：

```
URL url;
try {
    url = new URL("http://192.168.1.13/get_profile_image.php?id=145");
    new DownloadImage(this).execute(url);
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
}

@Override
public void imageDownloaded(final Bitmap downloadedImage) {

runOnUiThread(new Runnable() {
     public void run() {

        ImageView imageView = (ImageView)findViewById(R.id.imageView);
        imageView.setImageBitmap(downloadedImage);
    }
});
} 
```

当我将 URL 放到其他图像上时，它工作正常**，但我的从未加载**，有什么想法吗？

此外，以下代码有效，但我觉得它的做法不好..

```
 URL url;
    try {
        url = new URL("http://192.168.1.13/Profile_Images/145.jpg");
        new DownloadImage(this).execute(url);
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

其中 145 将是一个变量。

**编辑**

任何拒绝投票的理由将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:55:47.780

实际上，这很简单。`http://192.168.1.13/get_profile_image.php?id=145`当您向字符串发送请求时( `<img src=Profile_Images/'.$id.'.jpg border=0>`) 会被发回。因为 DownloadImage 类不解析 HTML（它需要原始图像数据），所以它不知道实际图像在哪里。两种解决方案：

1.  您的“不良做法”方法
2.  改用这个 PHP 脚本来回显原始图像数据：

PHP：

```
$id = $_GET['id'];
$path = 'Profile_Images/'.$id.'.jpg';

$type = 'image/jpeg';
header('Content-Type:'.$type);
header('Content-Length: ' . filesize($path));
readfile($path); 
```

**编辑：**忘了记某人：上面的代码取自这里（带有改编的变量名）：[https ://stackoverflow.com/a/1851856/1087848](https://stackoverflow.com/a/1851856/1087848)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:56:09.013

您的 PHP 代码将打印出以下内容：

```
<img src=Profile_Images/145.jpg border=0> 
```

这不仅是格式错误的 HTML，而且还是*文本*输出。您的另一个 URL`http://192.168.1.13/Profile_Images/145.jpg`指向一个*图像*文件，您从中接收到的数据是图像，而不是 HTML 字符串。

您应该考虑让 PHP 返回带有图像 ID 的 URL 的 JSON 响应，然后`DownloadImage`在该 URL 上运行。与原始回显相比，它的优点是您可以轻松扩展解决方案以返回其他类型的文件，甚至返回文件数组。

# javascript - 暂停除已激活的玩家之外的所有其他玩家。jQuery音频插件 元素

> ID：16015334
> 
> 赞同：4
> 
> 时间：2013-04-15T12:37:38.330
> 
> 标签：javascript, jquery, html

我有这个插件，它对 html5`<audio>`元素应用不同的样式，并为不支持 .mp3 文件格式的浏览器提供 Flash 回退。我遇到的问题是，一旦你开始播放一首歌曲，然后在任何一首歌曲上点击播放，它们都会同时播放，这是不好的用户体验。

我试图弄清楚如何编辑插件以使其一次只播放一首歌曲，所以说如果用户听了一首歌曲然后单击另一首歌曲播放，第一首歌曲应该暂停，依此类推。我不完全确定，但我认为需要按照这些思路进行编辑：

```
 playPause: function() {
      if (this.playing) this.pause();
      else this.play();
    }, 
```

但是，插件中有很多地方似乎处理播放和暂停歌曲，所以我不确定这是否完全正确。我对 jQuery 还是很陌生，无法完全弄清楚这个大型音频库是如何工作的，我一直在阅读代码注释，但仍然无法弄清楚这一点。

插件的完整代码在这里：http: [//freshbeer.lv/mg/js/audio.min.js](http://freshbeer.lv/mg/js/audio.min.js)

官方插件网站： http: [//kolber.github.io/audiojs/](http://kolber.github.io/audiojs/)

你可以访问我的演示页面查看这个问题，只需点击几个播放器上的播放，您就会看到他们都在同时播放：http: [//freshbeer.lv/mg/index.html](http://freshbeer.lv/mg/index.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T11:13:29.573

使用 addEventListener 和 play 事件。这会暂停所有播放器，除了按下播放按钮的播放器。

```
 audiojs.events.ready(function () {
            var as = audiojs.createAll();

            $('audio').each(function () {
                var myAudio = this;
                this.addEventListener('play', function () {
                    $('audio').each(function () {
                        if (!(this === myAudio)) {
                            this.pause();
                        }
                    });
                });
            });
        }); 
```

# css - CSS @font-face 不适用于 Mac 字体

> ID：16015338
> 
> 赞同：1
> 
> 时间：2013-04-15T12:37:50.527
> 
> 标签：css, font-face, truetype

我似乎无法找到我正在寻找的答案。我有一个完全静态的页面，主要由图像组成。用于创建图像的字体是任何 Mac OS X 安装上的“Handwriting-Dakota.ttf”。我有一个包含文本的动态元素，我想将其赋予该字体。我的 ttf 字体与我的 css 文件位于同一目录中。

```
@font-face{
 font-family: dakota;
 src: url('dakota.ttf') format('truetype');
} 
```

在包含 css 文件的 html 文件中。`<p style="font-family: dakota;">sometext</p>`

我可以看到在 chrome 的检查器中应用的规则，但它不会改变外观。我想做的事情是不可能的还是我做错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:45:14.513

使用这种格式

```
@font-face {
    font-family: 'myfont';
    src: url('fonts/myfont.eot');
    src: url('fonts/myfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/myfont.woff') format('woff'),
         url('fonts/myfont.ttf') format('truetype'),
         url('fonts/myfont.svg#rsuregular') format('svg');
} 
```

要进一步了解有关 font-face 语法的更多知识，请阅读[Bulletproof @font-face Syntax](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)。

获取字体的所有版本。谷歌“字体转换器”，首页会有很多字体转换器服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:48:53.303

确保 url 是相对于 css 文件而不是 webroot 的。

```
@font-face{
    font-family: 'dakota';
    src: url('../fonts/dakota.ttf') format('truetype');
} 
```

您可能应该添加其他类型以确保其他浏览器可以毫无问题地使用该字体。

```
@font-face {
    font-family: 'dakota';
    src: url('../fonts/dakota.eot');
    src: url('../fonts/dakota.eot?#iefix') format('embedded-opentype'),
         url('../fonts/dakota.woff') format('woff'),
         url('../fonts/dakota.ttf') format('truetype'),
         url('../fonts/dakota.svg#rsuregular') format('svg');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:25:35.270

@Cobolt，你可以试试 FontSquirrel。[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)。

您只需要 .otf 或 .ttf 文件。然后，FontSquirrel 将为您制作 .svg、.eot、.woff 并创建一个 css 文件。

# windows-phone-8 - 使用 Web-Server 登录应用程序

> ID：16015342
> 
> 赞同：0
> 
> 时间：2013-04-15T12:37:55.087
> 
> 标签：windows-phone-8

我正在开发 windows phone-8 应用程序在此我需要注册电子邮件和密码，并且在我必须使用注册的用户名和密码登录之后。我正在使用 HttpWebRequest 类但不知道如何可能请与我有任何关于此的信息或链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:27:17.827

您甚至不需要运行身份验证服务的单独 Web 服务器。相反，您可以使用[Windows Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/)。这有几个原因，主要是您可以轻松管理传出数据（注册用户）和检查现有数据（验证用户）。

如果需要抽象的数据访问层，可以使用[Azure 移动服务客户端。](https://nuget.org/packages/WindowsAzure.MobileServices/0.2.0)

# javascript - 在对象文字中将模型传递给主干视图

> ID：16015343
> 
> 赞同：0
> 
> 时间：2013-04-15T12:37:56.167
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我不确定这是否可行，但我想将参数传递给对象文字中的函数。

这是我的对象：

```
var object_literal = {
    "thing" : new APP.SomeView({ model : model_to_pass, secondPart : static_model})
}; 
```

然后我想循环一个集合，获取一个参考

```
someCollection.each(function(things) {
    //will equal "thing"
    var x = things.get("reference");

    //Then do something like this (which obviously won't work)
    layout.someRegion.show(object_literal[x](model_to_pass))
} 
```

如您所见，“事物”是一个函数（在本例中是主干视图）。我想传递'东西'一个参数（'model_to_pass'）。如何才能做到这一点？

如果它更容易，我会使用主干、下划线和 jquery，如果它们提供更好的解决方案的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:12:17.067

我认为这对解决方案来说有点过度设计，使用条件将是最好的方法。

```
someCollection.each(function(things) {
    //will equal "thing"
    var x = things.get("reference");

    if (x === "thing") {
        new APP.SomeView({ model : model_to_pass, secondPart : static_model}
    }
} 
```

谢谢你们每一个人的帮助！

# eclipse-plugin - eclipse JDT设置项目

> ID：16015347
> 
> 赞同：2
> 
> 时间：2013-04-15T12:38:09.813
> 
> 标签：eclipse-plugin, eclipse-rcp, eclipse-pde, eclipse-jdt

我是 Eclipse JDT 的初学者。我正在阅读一些教程，并找到了一个创建 java 文件的好例子。在下面的示例中，他们将在哪个项目中创建包和 java 文件。我看不到任何指向任何项目名称的代码。如果我错了，请让我理解。我只是运行下面的例子。我看不到任何输出..

```
 AST ast = AST.newAST(AST.JLS3);
        CompilationUnit unit = ast.newCompilationUnit();
        PackageDeclaration packageDeclaration = ast.newPackageDeclaration();
        packageDeclaration.setName(ast.newSimpleName("example"));
        unit.setPackage(packageDeclaration);
        ImportDeclaration importDeclaration = ast.newImportDeclaration();
        QualifiedName name = 
            ast.newQualifiedName(
                ast.newSimpleName("java"),
                ast.newSimpleName("util"));
        importDeclaration.setName(name);
        importDeclaration.setOnDemand(true);
        unit.imports().add(importDeclaration);
        TypeDeclaration type = ast.newTypeDeclaration();
        type.setInterface(false);
        type.modifiers().add(ast.newModifier(Modifier.ModifierKeyword.PUBLIC_KEYWORD));
        type.setName(ast.newSimpleName("HelloWorld"));
        MethodDeclaration methodDeclaration = ast.newMethodDeclaration();
        methodDeclaration.setConstructor(false);
        List modifiers = methodDeclaration.modifiers();
        modifiers.add(ast.newModifier(Modifier.ModifierKeyword.PUBLIC_KEYWORD));
        modifiers.add(ast.newModifier(Modifier.ModifierKeyword.STATIC_KEYWORD));
        methodDeclaration.setName(ast.newSimpleName("main"));
        methodDeclaration.setReturnType2(ast.newPrimitiveType(PrimitiveType.VOID));
        SingleVariableDeclaration variableDeclaration = ast.newSingleVariableDeclaration();
        variableDeclaration.setType(ast.newArrayType(ast.newSimpleType(ast.newSimpleName("String"))));
        variableDeclaration.setName(ast.newSimpleName("args"));
        methodDeclaration.parameters().add(variableDeclaration);
        org.eclipse.jdt.core.dom.Block block = ast.newBlock();
        MethodInvocation methodInvocation = ast.newMethodInvocation();
        name = 
            ast.newQualifiedName(
                ast.newSimpleName("System"),
                ast.newSimpleName("out"));
        methodInvocation.setExpression(name);
        methodInvocation.setName(ast.newSimpleName("println")); 
        InfixExpression infixExpression = ast.newInfixExpression();
        infixExpression.setOperator(InfixExpression.Operator.PLUS);
        StringLiteral literal = ast.newStringLiteral();
        literal.setLiteralValue("Hello");
        infixExpression.setLeftOperand(literal);
        literal = ast.newStringLiteral();
        literal.setLiteralValue(" world");
        infixExpression.setRightOperand(literal);
        methodInvocation.arguments().add(infixExpression);
        ExpressionStatement expressionStatement = ast.newExpressionStatement(methodInvocation);
        block.statements().add(expressionStatement);
        methodDeclaration.setBody(block);
        type.bodyDeclarations().add(methodDeclaration);
        unit.types().add(type); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:48:15.980

你可以看看[这个](http://www.programcreek.com/2011/05/eclipse-jdt-tutorial-java-model/)。它使用 Java 模型，这意味着您需要创建一个插件才能使其工作。

```
// create a project with name "TESTJDT"
IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
IProject project = root.getProject("TESTJDT");
project.create(null);
project.open(null);

//set the Java nature
IProjectDescription description = project.getDescription();
description.setNatureIds(new String[] { JavaCore.NATURE_ID });

//create the project
project.setDescription(description, null);
IJavaProject javaProject = JavaCore.create(project);

//set the build path
IClasspathEntry[] buildPath = {
        JavaCore.newSourceEntry(project.getFullPath().append("src")),
                JavaRuntime.getDefaultJREContainerEntry() };

javaProject.setRawClasspath(buildPath, project.getFullPath().append(
                "bin"), null);

//create folder by using resources package
IFolder folder = project.getFolder("src");
folder.create(true, true, null);

//Add folder to Java element
IPackageFragmentRoot srcFolder = javaProject
                .getPackageFragmentRoot(folder);

//create package fragment
IPackageFragment fragment = srcFolder.createPackageFragment(
        "com.programcreek", true, null);

//init code string and create compilation unit
String str = "package com.programcreek;" + "\n"
    + "public class Test  {" + "\n" + " private String name;"
    + "\n" + "}";

        ICompilationUnit cu = fragment.createCompilationUnit("Test.java", str,
                false, null);

//create a field
IType type = cu.getType("Test");

type.createField("private String age;", null, true, null); 
```

# c# - 创建 c# windows 应用程序的演示版

> ID：16015353
> 
> 赞同：-5
> 
> 时间：2013-04-15T12:38:26.427
> 
> 标签：c#

我编写了一个软件，它是 c# 中的 windows 应用程序。我希望创建我的软件的演示版本。如何使用计时器让安装的软件运行一段确定的时间？还有可能即使用户机器被格式化，在我的预设时间用完后应用程序也不会安装？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:43:54.050

> 如何使用计时器让安装的软件运行一段确定的时间？

您创建自己的散列函数来生成许可证密钥，这里密钥的组成部分之一是最后一天。因此，您将该密钥保存到文件中，并在每次启动时检查其中存在的值与 PC 上日期的实际值。

优点：易于实施和投入生产

缺点：容易破解。足以欺骗操作系统的 DateTime 设置。

*另一种选择*：您可以使用一些许可软件：

在此处查看可能的选项：[.NET 的许可系统](https://stackoverflow.com/questions/5132943/licensing-system-for-net)

*另一个*：一些你检查数据的网络服务（避免客户端数据作弊）

*另一个又*是：不是按时间限制演示版本，而是按功能（有限的功能可用，您可以在磁盘上保存数据有限的时间，您可以运行应用程序有限的时间......等等）

> 还有可能即使用户机器被格式化，在我的预设时间用完后应用程序也不会安装？

不，这是不可能的，因为格式化意味着数据完全擦除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:42:59.327

如果您不打算将应用程序连接到服务器端注册机制（我不建议这样做），那么您可以在注册表中放置一个值，用于确定试用的开始时间。从加载应用程序的当前日期和时间中减去该值，您将能够确定它应该何时停止。**但是，这对于格式或黑客攻击是不安全的。**

我推荐的解决方案是在第一次加载期间对试用软件进行服务器端注册。这将允许您确保即使他们重新格式化驱动器，他们也无法通过注册。尽管这仍然不是万无一失的，因为他们可以使用许多别名进行注册，但这至少麻烦得多。**这个想法剩下的一个问题**是，如果他们没有连接到互联网会发生什么？您要阻止他们使用该应用程序吗？如果他们没有互联网连接，您可以将这个想法与第一个想法结合起来并利用注册表。

无论哪种方式，防止人们入侵您的注册过程充其量都是困难的。微软自成立以来一直在努力解决这个问题。

# unit-testing - 在已经覆盖内部时对类的公共接口进行单元测试？

> ID：16015355
> 
> 赞同：0
> 
> 时间：2013-04-15T12:38:27.160
> 
> 标签：unit-testing

我已经用 UnitTests 介绍了我的类的内部实现。现在测试我的公共接口是否仍然有用（这是一个比对内部方法的调用链多一点的函数）？

感觉就像我会添加额外的测试来测试相同的东西。

或者测试公共接口更像是一个集成测试（即使我已经对我的数据访问进行了存根处理，所以它都在内存中处理）以测试所有 UnitTested 方法是否可以很好地协同工作？

例子：

```
internal bool internalCheck() {
    // complex logic that is being unit tested
}

internal void internalDoSomething() {
    // do stuff. is being unit tested
}

public void DoIt() {
    if (internalCheck()) {
        internalDoSomething();
    }
} 
```

现在，如果我要添加 test 的测试`DoIt`，我基本上会重新测试所有逻辑流，`internalCheck`并断言当它返回 true 时，`internalDoSomething`正在调用。

嗯，我想我已经弄清楚了：我需要模拟类本身并检查是否进行了正确的调用，几乎忽略了实际的输入/输出。为了测试公共方法，而不是重新测试`internalCheck`，我使用了一个模拟框架来`internalCheck`返回我想要测试的流程，然后验证是否调用了正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:52:32.747

这取决于您如何定义您的单位。通常是类，所以这仍然是一个单元测试。

即使您已经测试了内部方法，测试公共接口仍然很重要，以确保内部方法可以协同工作。

# sql - 这个脚本sql有什么问题？

> ID：16015357
> 
> 赞同：1
> 
> 时间：2013-04-15T12:38:33.950
> 
> 标签：sql, sql-server-2005

我有列 ID,USERSID 表的用户表：

```
 t_A(ID,usersID,ADATE,priceA,priceB)
  t_B(ID,usersID,BDATE,priceA,priceB)
  t_C(ID,usersID,CDATE,priceA,priceB) 
```

我正在使用此查询从 X DATE 和 USERSID 的 3 个表中获取价格总和

```
 declare @id int 
    set @id = 3 -- for example 

    SELECT SUM(priceA) as TA, SUM(priceB) as TB
    FROM  t_A,t_B,t_C
    WHERE  t_A.USERSID =  @id
    AND     t_B.USERSID =  @id
    AND     t_C.USERSID =  @id
    AND    ADATE >= DATEADD(DAY, 0, DATEDIFF(DAY, 0, getdate())) 
   AND     BDATE >= DATEADD(DAY, 0, DATEDIFF(DAY, 0, getdate())) 
   AND    CDATE >= DATEADD(DAY, 0, DATEDIFF(DAY, 0, getdate())) 
```

此脚本仅在用户 ID 在三个表中有一行时才有效，否则脚本不返回任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:55:02.103

因为如果只有一张表没有 USERID = 3，那么结果总是空的。解决方法：将选项与[UNION ALL](http://msdn.microsoft.com/en-us/library/ms180026.aspx)运算符一起使用

```
DECLARE @id int 
SET @id = 3
SELECT SUM(x.priceA) as TA, SUM(x.priceB) AS TB
FROM (
      SELECT priceA, priceB
      FROM t_A 
      WHERE t_A.USERSID =  @id
        AND ADATE >= DATEDIFF(d,0,dateadd(d,0,getdate()))
      UNION ALL
      SELECT priceA, priceB
      FROM t_B 
      WHERE t_B.USERSID =  @id
        AND BDATE >= DATEDIFF(d,0,dateadd(d,0,getdate()))
      UNION ALL   
      SELECT priceA, priceB
      FROM t_C 
      WHERE t_C.USERSID =  @id
        AND CDATE >= DATEDIFF(d,0,dateadd(d,0,getdate()))
      ) x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:47:59.707

您无法将日期列与 datediff 进行比较。以下是您可以做的一些事情：

```
AND ADATE >= GETDATE() 
```

或者：

```
AND DATEDIFF(d, ADATE, GETDATE()) > 1 
```

您可以在 MSDN 上查看语法和[一些示例。](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:54:35.623

我认为这就是你所需要的。这样，只要其中一个表满足条件，它就会返回结果：

```
SELECT SUM(priceA) as TA, SUM(priceB) as TB, SUM(priceC) as TC
    FROM  t_A
    FULL JOIN t_B
    FULL JOIN t_C
    WHERE  t_A.USERSID =  @id
    AND     t_B.USERSID =  @id
    AND     t_C.USERSID =  @id
    AND    ADATE >= DATEDIFF(d,0,dateadd(d,0,getdate()))
   AND     BDATE >= DATEDIFF(d,0,dateadd(d,0,getdate()))
   AND    CDATE >= DATEDIFF(d,0,dateadd(d,0,getdate())) 
```

# java - System.out.println 错误

> ID：16015360
> 
> 赞同：-5
> 
> 时间：2013-04-15T12:38:44.017
> 
> 标签：java

嘿，我是 java 初学者，在第 11 行出现错误。我不确定为什么会出现此错误 这是代码

```
package practice;
import java.util.Scanner;

public class VariablesDemo {

int empid;
char gender;
float allowance;
double basicSalary;
Scanner src = new Scanner(System.in);
System.out.println("Enter the Employee id");
public void setEmployeeId(int empid)
{
    System.out.println("Enter the Employee id");
    this.empid= src.nextInt();
}
public void setEmployeeGender(char gender)
{
    System.out.println("Enter the Employee gender");
    String gender_type=src.next(); 
    this.gender= gender_type.charAt(0);
}
public void setEmployeeAllowance(float allowance)
{
    System.out.println("Enter the Employee allowance");
    this.allowance= src.nextFloat();
}
public void setEmployeeBasicSalary(double basicSalary)
{
    System.out.println("Enter the Employee basic Salary");
    this.basicSalary= src.nextDouble();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:29:44.000

```
 System.out.println("Enter the Employee id"); 
```

那条线应该在一个方法中。只允许变量初始化、块或声明。

阅读本文，对您有很大帮助！

[http://www.loirak.com/prog/java.php](http://www.loirak.com/prog/java.php)

[http://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:54:06.953

作为初学者，您应该首先尝试掌握语言的基础知识，例如如何定义类、属性或方法。使用参考书或好的教程开始。

祝你好运！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T12:40:17.520

```
System.out.println("Enter the Employee id"); 
```

应该在任何方法中。

如果您仍想在方法之外编写 SOP，请参考此[问题](https://stackoverflow.com/a/15902074/1115584)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T12:42:34.740

只`System.out.println()`应该在任何方法中，因为它是一个方法调用....

`Scanner src=new Scanner(System.in)`; 可以在任何地方的课堂方法之外..!!

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T12:41:20.483

```
System.out.println("Enter the Employee id"); 
```

此行是打印的可执行行 这应该只写在方法中

方法外只允许初始化和声明

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-15T12:41:44.817

执行语句必须在方法内部。

```
System.out.println("Enter the Employee id"); 
```

上面的行应该在方法中。不直接上课。

方法外只允许变量初始化、声明、静态块、初始化块。我建议在尝试 Java 编码之前先阅读基本的 Java 教程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-15T12:43:58.497

`System.out.println("Enter the Employee id");`

是对方法的调用`println()`，因此它不能在变量声明中......

# android - SIP 数据未通过 Android TCP 套接字刷新

> ID：16015361
> 
> 赞同：1
> 
> 时间：2013-04-15T12:38:48.287
> 
> 标签：android, sockets, tcp, sip

我的套接字通信有问题 - > SIP 服务器和 android 设备。我无法通过 TCP 发送大于 800 字节的 SIP 数据包。如果数据包小于 800 字节，一切正常。在尝试发送 SIP 数据包之前建立了成功的 TCP 握手，但仍然没有。我这样发送数据；

```
Socket socket = new Socket(ip,port);
OutputStream out =new OutputStream(socket.getOutputStream()); 
out.flush();  
out.write(msg); 
```

发送功能没有问题。奇怪的是，对于大于 800 字节的 SIP 数据包，一些数据包在从设备发送后几分钟就被传递到服务器。如果我们尝试发送数据包大小大于 800 字节的其他数据而不是 SIP，则一切正常，服务器会接收到它。问题仅在于 SIP 数据包 > 800 字节。并非所有 android 设备都会出现此问题。例如：Galaxy s plus – 问题。Nexus 4 – 问题。Nexus s – 没问题。等等。如果我将 SIP 数据包分成两部分，问题就解决了，但是我想找出为什么 SIP 数据没有被刷新而其他数据被立即发送。应该没有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:12:32.920

您没有提供有关版本的信息，但我敢打赌您在 Android 的 4.0.* 中遇到了问题。

我还敢打赌，只有当您通过 TCP 使用端口 5060 时才会出现问题。

这是那些 Android 版本中的一个已知问题，当前的解决方法是更新到 Android 4.1（您不能要求用户这样做！）或避免这些设置。任何其他端口或 UDP 都可以使用。

您可以在此处找到一份[错误报告](https://code.google.com/p/android/issues/detail?id=34727)。

# javascript - 如何在 Google Analytics 中设置 AJAX 呼叫跟踪？

> ID：16015364
> 
> 赞同：8
> 
> 时间：2013-04-15T12:38:54.077
> 
> 标签：javascript, ajax, google-analytics

我创建了我的谷歌分析帐户。并将提供的代码复制并粘贴到我的 index.php 文件中。在我看来，它可以正常工作，因为我可以看到 firebug 对 www.google-analytics.com 的调用。

现在我想跟踪通过 ajax 从索引文件中调用 'functions.php' 的次数。

我尝试使用`_gaq.push(['_trackPageview', 'functions.php']);`，但它给了我`Uncaught ReferenceError: _gaq is not defined`. 所以我添加`var _gaq = _gaq || [];`到我的代码中。错误消失了，但在 ajax 完成后我看不到对 www.google-analytics.com 的任何调用。

有人可以帮我设置它以便分析跟踪 ajax 调用吗？

我的代码看起来像

```
<script type='text/javascript'>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-1234556-1', 'domain.com');
            ga('send', 'pageview');

         var _gaq = _gaq || [];

        function submit_data(){

                var text_area=$('#textarea').val();
                var url ="functions.php";
                jQuery.ajax({
                    type: "get",
                    dataType: "text",
                    url: url,
                    data: {
                        what : "generate",
                        text_area: text_area,
                        t: Math.random()
                    },
                        success: function(data, textStatus){
                        $('#textarea').val(data);
//                      _gaq.push(['_setAccount', 'UA-12345-1']);
                        _gaq.push(['_trackPageview', 'functions.php']);
                        }
                });
        }

        </script> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-31T04:11:09.997

我认为在检查 Google Analytics 时，您选择了“Universal Analytics”，它使用了一个新的代码计数器。在浏览器 DOM 中查看，没有对象“_gaq” - 因此是一个错误。您尝试使用空数组（_gaq）修复它。
旧代码：

> 变量 _gaq = _gaq | | [];
> _gaq.push(['_setAccount', 'UA-XXXXXX-1']);

不要使用旧代码！（而且你不能使用多个代码计数器'UA-XXXXXX-1' - 这是错误的）
新代码：

> ga ('create', 'UA-XXXXXXX-1', 'mysite.com');
> ga ('发送', '浏览量');

新的计数器谷歌有一个新的语法。
**关于事件使用的文档：** [https](https://developers.google.com/analytics/devguides/collection/analyticsjs/events)
://developers.google.com/analytics/devguides/collection/analyticsjs/events使用示例：
我在页面上有一个计算器，我想通过按下按钮来跟踪事件在上面。
**类别**- “使用计算器”；
**事件**- “计算成本”。
旧代码：

> _gaq.push(['_trackEvent', '使用计算器', '计算成本');

新代码：

> ga('send', 'event', '使用计算器', '计算费用');

**类别和事件 - 是必需的！**
PS：对不起。我的英语很差，我用谷歌翻译:)

更新：

```
<script type='text/javascript'>

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
//Use once per page
        ga('create', 'UA-1234556-1', 'domain.com');
        ga('send', 'pageview');
        //
        function submit_data(){

                var text_area=$('#textarea').val();
                var url ="functions.php";
                jQuery.ajax({
                    type: "get",
                    dataType: "text",
                    url: url,
                    data: {
                        what : "generate",
                        text_area: text_area,
                        t: Math.random()
                    },
                        success: function(data, textStatus){
                        $('#textarea').val(data);
                        ga('send', 'event', 'MyCategory', 'functions.php');
                        }
                });
        }

</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-04T15:44:38.190

如果您使用的是 Universal Analytics ( `analytics.js`)，请切换：

```
_gaq.push(['_trackPageview', 'functions.php']); 
```

对此：

```
ga('send', 'pageview', 'functions.php'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T14:34:03.253

看起来您正在将 Universal Analytics（`analytics.js`和`ga()`调用）与 Async Analytics（`ga.js`和`_gaq.push()`）混合，但我没有看到任何要初始化的代码`ga.js`。

尝试改变

```
var _gaq = _gaq || []; 
```

至

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12345-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T19:44:51.867

是的，只需在您的 Google Analytics 脚本之后添加它来定义`_gaq`数组：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-65432-1']);
_gaq.push(['_trackPageview']); 
```

# java - 如何使用 Play framework 2.0/2.1 制作管理面板

> ID：16015365
> 
> 赞同：3
> 
> 时间：2013-04-15T12:39:01.780
> 
> 标签：java, javascript, scala, playframework-2.0

我正在使用 SCALA 和 Play Framework 2.1。我有疑问，是否可以使用 Play 和 SCALA 制作管理面板？

管理面板可能有 CRUD。会有一些产品。我需要通过后端管理所有产品。我使用过 Play 1.2 和 Play 2.1。但没有机会在 ADMIN 面板上工作。

是否有任何可用于后端的模块。有人可以建议我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:39:44.470

不，Play一般没有典型的使用目标，因此Play 2中没有BE模块或CRUD，您需要根据自己的需要自己创建面板。

提示：幸运的是，有可用的身份验证和授权模块，因此您无需从头开始创建它，请查看[Play Authenticate](https://github.com/joscha/play-authenticate) for Java 示例。

构建自定义后端的简单方法是使用[Twitter Bootstrap](http://twitter.github.io/bootstrap/)和[Play 的表单](http://www.playframework.com/documentation/2.1.1/JavaForms)，尽管这种方法不如 Play 1.x 中已知的 CRUD 快——它以最低的成本为您提供了充分的灵活性。

# c# - 如何在 windows phone 7 中的 image_tab 上获取图像路径

> ID：16015367
> 
> 赞同：0
> 
> 时间：2013-04-15T12:39:05.023
> 
> 标签：c#, windows-phone-7

我已经尝试过了，但我没有得到答案。我有 3 个图像框。在这 2 个图像框中有图像，而 1 个图像框是空的。现在我想更改 image_tab 事件上的图像，有人可以帮我找到这个吗？

```
Uri myfile = new Uri("Images/star.png", UriKind.Relative);
StreamResourceInfo resourceInfo = Application.GetResourceStream(myfile);
BitmapImage myimage = new BitmapImage(myfile);
myimage.SetSource(resourceInfo.Stream);
image1.Source = myimage; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:00:55.117

我不确定`image_tab`你的情况到底是什么（也许`Image_Tap`？），但你可以通过使用来简化你的图像源分配：

```
Uri uri = new Uri("PATH", UriKind.Relative);
BitmapImage imageSource = new BitmapImage(uri);
image.Source = imageSource; 
```

请记住，该`ImageSource`对象不会直接公开路径，因此您可能希望有一个内部引用位置来处理您使用的文件的路径。

# parsing - 解析一个短语

> ID：16015369
> 
> 赞同：0
> 
> 时间：2013-04-15T12:39:20.883
> 
> 标签：parsing, nlp, artificial-intelligence

我正在尝试制作一种算法来解析（我不知道这是否是正确的词）一个问题并得到正确的答案。

例子

如果有人问“太阳是什么？”，正确答案是“是星星”

这可以从以下短语列表中获得：

“是明星”“火辣辣”“我不知道”等

现在，我想知道我在哪里可以得到这方面的信息，

我认为这里的主要问题是如何让程序理解“太阳”是一颗星星，以及如何获得关于它的最准确的答案，因为“又热又亮”也是一个有效的答案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:58:58.340

这是人工智能领域的机器学习问题。如果你想写出好的算法，你不能只解析一些短语。它并不像看起来那么简单。

您想编写自己的应用程序，例如[http://www.cleverbot.com](http://www.cleverbot.com)

我认为您需要阅读并了解有关机器学习的更多信息。

# vim - vim 确实删除了所有以 # 字符开头的行的缩进

> ID：16015370
> 
> 赞同：2
> 
> 时间：2013-04-15T12:39:25.727
> 
> 标签：vim, comments, auto-indent

我已经读过这个：

[Vim 自动删除 Python 注释的缩进](https://stackoverflow.com/questions/2360249/vim-automatically-removes-indentation-on-python-comments)

我已经尝试了那里提到的所有内容但没有成功：

*   我`smartindent`下班了
*   我用`filetype indent on`
*   我尝试了这个技巧`:inoremap # X^H#`

以上都没有帮助：每当我用 a 开始缩进行时`#`，缩进被删除，光标移动到第 0 列。

这是输出`:set`：[https ://gist.github.com/mikehaertl/5387743](https://gist.github.com/mikehaertl/5387743)

这`vimrc.local`是我在 Ubuntu 12.10 上使用的：[https ://gist.github.com/mikehaertl/1612035](https://gist.github.com/mikehaertl/1612035)

所以我不知道我还能尝试什么。每当我键入缩进时，我不希望我的光标移动到第 0 列`#`。有什么建议么？

**更新**

所以我发现这是由`cindent`. 这对我来说仍然很模糊：为什么 vim 会这样做，如果我仍然想使用，我该如何防止这种情况发生`cindent`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:02:13.250

如果您正在使用`cindent`，它可能包含`0#`默认提供的部分。您只需要删除它，例如，当文件类型更改为您想要禁用此缩进的类型时，使用自动命令触发。

是PHP吗？如果是这样，将此行添加到您的 .vimrc 可能会有所帮助：

```
autocmd FileType php set cinkeys-=0# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:53:04.500

该`'formatoptions'`选项控制该行为。的输出是`:set fo`什么？

`croql`是一个很好的价值，请参阅`:h fo-table`。

# css - 为什么 IE10 需要存在 ap:hover {} 规则才能在伪元素上进行转换？

> ID：16015371
> 
> 赞同：10
> 
> 时间：2013-04-15T12:39:26.920
> 
> 标签：css, css-transitions, internet-explorer-10, pseudo-element, css-content

HTML：

```
<p>Hover</p> 
```

CSS：

```
p::after {
    content: " here";
    transition: all 1s;
}

p:hover::after {
    font-size: 200%;
    color: red;
} 
```

**现场演示： http:** [//jsfiddle.net/SPHzj/13/](http://jsfiddle.net/SPHzj/13/)（适用于 Firefox 和 Chrome）

如您所见，我`::after`在段落的伪元素上设置了 CSS 过渡。然后，当段落悬停时，两种新样式适用于过渡的伪元素。

这适用于 Firefox 和 Chrome，但不适用于 IE10。我的理由是 IE 不理解`p:hover::after`选择器，因为如果您将悬停设置在祖先元素上，它可以在 IE 中工作，例如`div:hover p::after`- 现场演示：http: [//jsfiddle.net/SPHzj/14/](http://jsfiddle.net/SPHzj/14/)。

然而，事实并非如此，因为 IE 确实能够理解该选择器。诀窍是也定义一个`p:hover {}`规则。（由[@maxw3st](https://twitter.com/maxw3st/status/323262053823434752)发现。）

```
p:hover {} 
```

此规则可以为空。仅此规则的存在将使 IE10 中的转换工作。

**现场演示： http:** [//jsfiddle.net/SPHzj/15/](http://jsfiddle.net/SPHzj/15/)（也适用于 IE10）

这里发生了什么？为什么 IE 要求存在该规则才能使过渡对伪元素起作用？这应该被认为是一个错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:04:30.253

### 似乎是一种回归

这似乎是 Internet Explorer 10 中的一个合法回归。正如[MSDN 上](http://msdn.microsoft.com/en-us/library/ie/cc848866%28v=vs.85%29.aspx)所指出的，由于 Internet Explorer 7 用户已经能够定位*任何*元素的悬停状态，而不仅仅是`a`.

奇怪的是，我尝试了`:active`伪类，这似乎按预期工作。进一步确定这是一个回归，您可以看到，通过将其更改为一个`a`元素，转换按预期发生（从历史上看，`a`并且`:hover`齐头并进）。

### 可选的解决方法

目前我只能想到几个解决方案（在等待解决此问题时）：

1.  使用空`p:hover {}`修复。
2.  修改您的标记以`::after`针对`p`.
3.  修改选择器以使用组合器。

第一项是您在问题中指定的内容，鉴于其简单性，非常有吸引力。事实上，您可以使用`:hover{}`并获得相同的结果（[可能是最好的解决方案](http://sampsonblog.com/525/ie10-gotcha-animating-pseudo-elements-on-hover)）。

第二项也是*可行的*，但不太理想，因为它需要修改标记，这并不总是可行的，坦率地说，有点傻。

最后一个选项有点有趣。如果您将选择器修改为基于兄弟关系，它会神奇地再次开始工作。例如，假设我们在 body 中有多个元素：

```
<h1>Hello, World</h1>
<p>This is my first paragraph. it does not animate.</p>
<p>This animates, with a pseudo-element.</p> 
```

我们现在可以使用组合器来定位第二段：

```
p+p:hover::after {} 
```

但是，此选择器将匹配段落后面的任何段落，这是不可取的。在这一点上，我们可以考虑`:nth-child`，或者`:nth-of-type`进一步指定我们想要的段落，甚至使用通用的兄弟组合：

```
h1~p:nth-of-type(2):hover::after {} /* Targets second <p> nearest <h1> */ 
```

但更理想的是，我们会以一个类为目标：

```
h1~.hoverme:hover::after {} /* Targets <p class="hoverme"> */ 
```

### 两个字符的解决方案？

更进一步，也许你不想被明确地锁定，提供一个通用的兄弟标签。您还可以使用通用选择器：

```
*~.hoverme:hover::after {} /* Targets <p class="hoverme"> among siblings */ 
```

这要求`p`标签具有兄弟姐妹，这通常是预期的。一个文档很少只包含一个段落标签。

我知道这些并不理想，但它们是目前达到目的的一种手段。让我们希望在 Internet Explorer 的未来版本中看到这个问题得到解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:12:28.617

奇怪的是，效果将作用于 <a> 链接而不是段落标记。

它肯定看起来是一个 IE10 错误或回归。幸运的是，您找到了一个不错的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:11:42.933

当我尝试添加规则以将光标更改为指针时，也会出现同样的现象。然而，

```
cursor: pointer;
```

必须包含在伪的父级中，它不能用于仅针对 IE10 中伪的内容字符串。

[http://jsfiddle.net/maxw3st/SPHzj/22/](http://jsfiddle.net/maxw3st/SPHzj/22/)使用 div 作为容器， http: [//jsfiddle.net/maxw3st/7sBVC/](http://jsfiddle.net/maxw3st/7sBVC/)使用 p:hover 解决方法。@simevidas 建议添加 div，并且对于过渡效果很好，只是不适用于指针。当指针应用于伪元素的父级时，指针似乎只出现在 IE10 中。

# android - 在android中突出显示文本视图

> ID：16015373
> 
> 赞同：3
> 
> 时间：2013-04-15T12:39:29.277
> 
> 标签：android, textview

我想在 android 中突出显示 textview 与此图像相同 ![在此处输入图像描述](https://i.stack.imgur.com/jWV2c.gif)

我该怎么做？谢谢

就像这个链接 [http://youtube.com/watch?v=0qE3egNettY](http://youtube.com/watch?v=0qE3egNettY)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T12:48:56.483

这就是你想要的：

```
package org.pskink.shape;

import android.app.Activity;
import android.graphics.Canvas;
import android.graphics.Rect;
import android.graphics.Region;
import android.graphics.Picture;
import android.graphics.drawable.Drawable;
import android.graphics.drawable.PictureDrawable;
import android.os.Bundle;
import android.text.Spannable;
import android.text.SpannableStringBuilder;
import android.text.TextPaint;
import android.text.style.DynamicDrawableSpan;
import android.text.style.ForegroundColorSpan;
import android.util.Log;
import android.widget.TextView;

public class DrawableSpanTest extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.drawable_span_test);
        TextView tv = (TextView) findViewById(R.id.text);
        Spannable text = new SpannableStringBuilder("This is liric of the song");
        setSpans(tv, text);
        tv.setText(text);
    }

    private void setSpans(TextView tv, Spannable text) {
        int blueColor = 0xff0000ff;
        int redColor = 0xffff0000;
        ForegroundColorSpan blue = new ForegroundColorSpan(blueColor);
        ForegroundColorSpan red = new ForegroundColorSpan(redColor);
        HalfColorSpan o = new HalfColorSpan("o", tv, blueColor, redColor);
        text.setSpan(blue, 0, 14, 0);
        text.setSpan(o, 14, 15, 0);
        text.setSpan(red, 15, text.length(), 0);
    }

    class HalfColorSpan extends DynamicDrawableSpan {
        private final static String TAG = "DrawableSpanTest.HalfColorSpan";
        Picture mPicture;
        public HalfColorSpan(String text, TextView tv, int c0, int c1) {
            super(ALIGN_BASELINE);
            mPicture = new Picture();
            TextPaint p = tv.getPaint();
            Rect bounds = new Rect();
            p.getTextBounds(text, 0, text.length(), bounds);
            float width = p.measureText(text);
            float height = bounds.height();
            float y = height;
            Canvas c = mPicture.beginRecording((int) width, (int) height);
            c.save(Canvas.CLIP_SAVE_FLAG);
//          c.drawColor(0x22000000);
            p = new TextPaint(p);
            p.setColor(c0);
            c.clipRect(0, 0, width / 2, height, Region.Op.REPLACE);
            c.drawText(text, 0, y, p);
            p.setColor(c1);
            c.clipRect(width / 2, 0, width, height, Region.Op.REPLACE);
            c.drawText(text, 0, y, p);
            c.restore();
            mPicture.endRecording();
        }
        @Override
        public Drawable getDrawable() {
            PictureDrawable d = new PictureDrawable(mPicture);
            d.setBounds(0, 0, mPicture.getWidth(), mPicture.getHeight());
            return d;
        }
    }
} 
```

和布局/drawable_span_test.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/text"
    android:textSize="50dip"
    android:gravity="center"
    android:background="#eee"
/> 
```

结果是： ![在此处输入图像描述](https://i.stack.imgur.com/oPUH8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:45:30.507

试试这个，不完全是你想要的，但应该做的工作：

```
String text = "<font color=#cc0030>This is layrics o</font> <font color=#ffff00>f the song</font>";
textview.setText(Html.fromHtml(text)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:59:18.520

你也可以使用android [Spannable](http://developer.android.com/reference/android/text/Spannable.html)

例如[这个](https://stackoverflow.com/a/3514435/1278748)

# asp.net - 在 RadAjaxPanel 的第一个 AjaxRequest 之后未找到 RadAjaxPanel

> ID：16015377
> 
> 赞同：0
> 
> 时间：2013-04-15T12:39:35.237
> 
> 标签：asp.net, telerik

我面临有关 RadAjaxPanel 的问题。我的 UserControl 上有一个 RadAjaxPanel。我在用户控件的按钮单击事件上打开 RadWindow。当 Radwindow 打开时，窗口上有一个关闭按钮，单击该按钮 Radwindow 关闭，AjaxRequest 通过 RadAjaxPanel 发送回 userControl。第一次窗口成功关闭，AjaxRequest 将响应发送回 UserControl。但是在第一个 AjaxRequest 之后，当我再次打开 RadWindow 并单击关闭按钮并通过找到 RadAjaxPanel 将响应发送回用户控件，而不是响应 RadAjaxPanel 给我 null。这是我的代码，当窗口关闭时调用此方法，即 RadAjaxPanel 的 AjaxRequest。

```
 function UpdateImageUrl(arg) {
            $find("<%= RadAjaxPanel1.ClientID %>").ajaxRequest(arg);
        } 
```

第一次效果很好，但后来（ $find("<%= RadAjaxPanel1.ClientID %>") 给了我 Null 结果

为了演示我的问题，我附上了一个视频来演示我的问题。

这是视频的链接。 [http://screencast.com/t/8Yc0YHH9Qd](http://screencast.com/t/8Yc0YHH9Qd)

问候。卡姆兰

# java - Android Java 时间选择器对话框

> ID：16015381
> 
> 赞同：2
> 
> 时间：2013-04-15T12:39:53.533
> 
> 标签：java, android, dialog, timepicker

嘿，我正在尝试制作一个 TimepickerDialog。但是，当我按下“设置时间”按钮时，应用程序立即崩溃。这是代码。

主要活动：

```
package com.wifitimer;
import java.text.DateFormat;
import java.util.Calendar;
import android.app.Activity;
import android.app.TimePickerDialog;
import android.os.Bundle;
import android.widget.TimePicker;

public class MainActivity extends Activity {
DateFormat formatDateTime=DateFormat.getDateTimeInstance();
Calendar dateTime=Calendar.getInstance();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void chooseTime(){
    new TimePickerDialog(this, t, dateTime.get(Calendar.HOUR_OF_DAY), dateTime.get(Calendar.MINUTE), true).show();
}

TimePickerDialog.OnTimeSetListener t = new TimePickerDialog.OnTimeSetListener() {
    @Override
    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        dateTime.set(Calendar.HOUR_OF_DAY, hourOfDay);
        dateTime.set(Calendar.MINUTE,minute);
    }
};
} 
```

我是否缺少一些权限或任何东西？

这是所要求的logcat：

```
04-15 13:42:24.564: D/libEGL(31887): loaded /system/lib/egl/libEGL_mali.so
04-15 13:42:24.589: D/libEGL(31887): loaded /system/lib/egl/libGLESv1_CM_mali.so
04-15 13:42:24.594: D/libEGL(31887): loaded /system/lib/egl/libGLESv2_mali.so
04-15 13:42:24.599: D/(31887): Device driver API match
04-15 13:42:24.599: D/(31887): Device driver API version: 10
04-15 13:42:24.599: D/(31887): User space API version: 10 
04-15 13:42:24.599: D/(31887): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
04-15 13:42:24.654: D/OpenGLRenderer(31887): Enabling debug mode 0
04-15 13:42:28.524: D/AndroidRuntime(31887): Shutting down VM
04-15 13:42:28.524: W/dalvikvm(31887): threadid=1: thread exiting with uncaught exception (group=0x416922a0)
04-15 13:42:28.544: E/AndroidRuntime(31887): FATAL EXCEPTION: main
04-15 13:42:28.544: E/AndroidRuntime(31887): java.lang.IllegalStateException: Could not find a method chooseTime(View) in the activity class com.wifitimer.MainActivity for onClick handler on view class android.widget.Button with id 'timeBtn'
04-15 13:42:28.544: E/AndroidRuntime(31887):    at android.view.View$1.onClick(View.java:3678)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at android.view.View.performClick(View.java:4211)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at android.view.View$PerformClick.run(View.java:17267)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at android.os.Handler.handleCallback(Handler.java:615)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at android.os.Looper.loop(Looper.java:137)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at android.app.ActivityThread.main(ActivityThread.java:4898)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at java.lang.reflect.Method.invokeNative(Native Method)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at java.lang.reflect.Method.invoke(Method.java:511)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at dalvik.system.NativeStart.main(Native Method)
04-15 13:42:28.544: E/AndroidRuntime(31887): Caused by: java.lang.NoSuchMethodException: chooseTime [class android.view.View]
04-15 13:42:28.544: E/AndroidRuntime(31887):    at java.lang.Class.getConstructorOrMethod(Class.java:460)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at java.lang.Class.getMethod(Class.java:915)
04-15 13:42:28.544: E/AndroidRuntime(31887):    at android.view.View$1.onClick(View.java:3671)
04-15 13:42:28.544: E/AndroidRuntime(31887):    ... 11 more 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:46:25.817

我认为您正在从您的 xml 布局文件 onClick 属性中调用 chooseTime() 您需要将方法签名更改为此

```
public void chooseTime(View view){

    new TimePickerDialog(this, t, dateTime.get(Calendar.HOUR_OF_DAY), dateTime.get(Calendar.MINUTE), true).show();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:53:56.247

改变方法如

```
public void chooseTime(View view){
    new TimePickerDialog(this, t, dateTime.get(Calendar.HOUR_OF_DAY), dateTime.get(Calendar.MINUTE), true).show();
} 
```

在你`xml Control`喜欢

```
 <ImageButton
        android:id="@+id/imagestart"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="chooseTime"
        android:src="@drawable/ic_launcher" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:01:20.420

对于显示`TimepickerDialog`，无需添加任何类型的权限。

mainActivity.java

```
public class MainActivity extends Activity {
     Button b1;
     static final int TIME_OPENDIALOG_ID = 0;
     private int mHour,mMinute;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        b1=(Button)findViewById(R.id.b1);
        b1.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                showDialog(TIME_OPENDIALOG_ID);
                updateDisplay();
            }

        });
    }
    private TimePickerDialog.OnTimeSetListener mopenSetListener = new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            mHour = hourOfDay;
            mMinute = minute;
            updateDisplay();
        }
    };
    private Object pad(int mMinute2) {
        if (mMinute2 >= 10)
            return String.valueOf(mMinute2);
        else
            return "0" + String.valueOf(mMinute2);
    }
    private void updateDisplay() {
        b1.setText(new StringBuilder().append(pad(mHour)).append(":")
                .append(pad(mMinute)));

    }
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case TIME_OPENDIALOG_ID:
            return new TimePickerDialog(this, mopenSetListener, mHour, mMinute,
                    false);

        }
        return null;
    }
} 
```

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/b1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="64dp"
        android:text="Time" />

</RelativeLayout> 
```

# security - 如何让本地开发 STS 运行

> ID：16015387
> 
> 赞同：0
> 
> 时间：2013-04-15T12:40:06.130
> 
> 标签：security, wif

我需要帮助本地开发 STS 运行。我刚从 MSDN 教程开始，在尝试使用 WIF 构建 WCF 服务时遇到了困难。到目前为止，我做了以下工作：

1.  在我的 Visual Studio 2012 中安装了“身份和访问工具”
2.  在新解决方案中创建了新的 WCF 服务项目
3.  右键单击项目名称并选择“身份和访问...”
4.  在第一个选项卡上选择了“使用本地开发 STS”选项，并在“本地开发 STS”选项卡上将令牌类型更改为“SAML 2.0”
5.  点击“确定”

我最终得到以下通知，告诉我证书问题：

![身份和访问对话框](https://i.stack.imgur.com/MnlY7.png)

*   我确认该文件确实存在。
*   我验证了对它的访问权限 - 系统、管理员和我的用户对它具有完全访问权限（只有最后一个选项未选中）
*   我尝试手动安装证书，但它受密码保护，我无法在任何地方找到它
*   我试图玩弄“身份和访问...”向导
*   我试图用谷歌搜索答案
*   我试图检查我是否安装了类似的证书，我的本地机器存储中有树个人证书，但我不知道如何检查他们的主题或其他任何东西

到目前为止，我还没有成功。任何人都可以建议如何解决这种情况，所以我可以确定我安装了正确的证书，我将永远感激不尽。

二池

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:57:48.633

您正在使用 .NET 4.5 教程 - [WIF 代码示例索引](http://msdn.microsoft.com/en-us/library/hh545413.aspx)吗？

检查主题：

开始/运行/mmc

文件/添加 - 删除管理单元

证书 - 添加。

我的用户帐户 - 完成 - 确定

根据需要展开树 - 双击证书 - 详细信息。

# android - 在不改变实际设计的情况下绘制 9Patch 图像

> ID：16015389
> 
> 赞同：0
> 
> 时间：2013-04-15T12:40:13.530
> 
> 标签：android, nine-patch

我有 *.png 图像。使用这个图像，我正在创建 9 个补丁图像。在 *.png 图像中，有 45 度线。当我拉伸此图像时，9 个补丁图像显示水平线。我想要 9 个补丁图像中的 45 度线。你能建议创建正确的 9 补丁图像的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:43:46.490

9 补丁不允许您绘制连续的 45 度线。您可以为拉伸区域定义一个区域或范围，但随着区域的拉伸，它将改变该区域的 45 度线的角度。

您可能会得到连续的水平或垂直线条，因为只有一个像素或非常窄的区域能够拉伸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:43:41.920

9-patch 并不是真正适合对角线的工具。也许您应该考虑改用[平铺背景](http://androidforbeginners.blogspot.com/2010/06/how-to-tile-background-image-in-android.html)？

# java - 如何从 Java 程序调用位于网络上的 powershell 脚本？

> ID：16015390
> 
> 赞同：0
> 
> 时间：2013-04-15T12:40:15.280
> 
> 标签：java, powershell, networking

我正在尝试使用以下程序使用`ProcessBuilder`. 该程序包含本地路径，但**我想调用位于网络上的相同脚本**。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.StringTokenizer;

public class TestPowershell {

    public static void main(String[] args) throws IOException
    {
        Runtime runtime = Runtime.getRuntime();
        //Process proc = runtime.exec("cmd.exe /c powershell.exe  C:\\get-sevice-gsvc.ps1"); // old code

        ProcessBuilder pb = new ProcessBuilder("powershell", "-file", "C:\\get-sevice-gsvc.ps1", "127.0.0.1");
        pb.redirectErrorStream(true);
        Process proc = pb.start();

        InputStream is = proc.getInputStream();
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader reader = new BufferedReader(isr);
        String line;
         try{

       while ((line = reader.readLine()) != null)
       {
            System.out.println(line);

       }
        reader.close();
        proc.getOutputStream().close();
        }
        catch(Exception e){
            System.out.println(e.getMessage());
        }

    }

} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:39:28.513

据我了解，您需要脚本在它所在的盒子上运行。在这种情况下，它并不是那么简单（否则，您只需使用您已经指出的网络路径）。如果您使用*ProcessBuilder*，那么脚本将在执行 Java 代码的机器上运行，而不管脚本位于何处。为了远程运行脚本，您可以使用*PowerShell*，因为它能够连接到另一台机器并在那里运行命令。在这种情况下，您将编写一个简单的*PowerShell*脚本来远程调用原始脚本，然后使用*ProcessBuilder在您的计算机上启动这个新脚本*而不是原来的。然而，有一些障碍需要克服。他们中的大多数处理用户权限。花时间研究*远程命令执行的**PowerShell*文档，或在 StackOverflow 或其他地方搜索此主题。

# ruby-on-rails-3 - 在 Rails 3 中使用纬度和经度搜索一个地方的地标

> ID：16015403
> 
> 赞同：0
> 
> 时间：2013-04-15T12:41:00.953
> 
> 标签：ruby-on-rails-3, geocoding

我制作了一个 Rails 应用程序来从计算机的 IP 地址中查找计算机的纬度和经度。我可以使用地理编码器从经纬度搜索酒店、电影院等地标吗？如果是。如何？

# image - 如何从matlab中的图像中提取邻接矩阵？

> ID：16015406
> 
> 赞同：0
> 
> 时间：2013-04-15T12:41:19.953
> 
> 标签：image, matlab, extract

我想知道如何从matlab中的图像中提取邻接矩阵。

让我们以这张图片[http://imageshack.us/photo/my-images/593/69363210.png](http://imageshack.us/photo/my-images/593/69363210.png)为例。

我想在matlab中编写的代码应该将此图像作为输入并构造一个具有6个顶点（两条垂直线和一条水平线）的图形。它还应该为我提供图形的邻接矩阵。只有图像可以给出输入。

该逻辑也应该适用于由水平和垂直线组成的任何图像（不需要像“L”或“T”这样的字母，而是一些只有水平和垂直连接的随机生成的图像）​​。是否可以概括？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:57:18.353

图像和邻接矩阵不可互换。您需要更详细地说明您的问题以获得帮助。

[你也可以看这里](https://stackoverflow.com/questions/3277541/construct-adjacency-matrix-in-matlab)

编辑：鉴于下面的评论，要将图像转换为图形，您需要先找到端点和分叉，然后找到它们的连通性。

我建议首先使用[bwmorph](http://www.mathworks.nl/help/images/ref/bwmorph.html)对图像进行骨架化，然后在骨架中找到分叉点和端点（[看看这里](http://www.mathworks.nl/matlabcentral/newsreader/view_thread/308698)）。一旦你有了它，你将不得不通过跟踪分叉点和端点之间的骨架来找到连通性（邻接矩阵）。

# c# - 用 C# 制作的数字签名在 C++ 中不验证

> ID：16015408
> 
> 赞同：3
> 
> 时间：2013-04-15T12:41:23.533
> 
> 标签：c#, c++, rsa, digital-signature, cryptoapi

我有一个 C# 应用程序，它使用 RSA 对数据进行数字签名。代码如下：

```
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
rsa.ImportCspBlob(privateKeyBlob);

SHA1 sha1 = new SHA1CryptoServiceProvider();
sha1.ComputeHash(myData);

byte[] signature = rsa.SignHash(sha1.Hash, CryptoConfig.MapNameToOID("SHA1")); 
```

我无法验证 C++ 中的签名。代码如下：

```
HCRYPTPROV cryptProvider;
CryptAcquireContext(&cryptProvider, 0, 0, PROV_RSA_FULL, CRYPT_VERIFYCONTEXT);
// PROV_RSA_SIG does not work

HCRYPTKEY publicKey;
CryptImportKey(cryptProvider, publicKeyBlob, publicKeyBlobLength, 0, 0, &publicKey);

HCRYPTHASH hash;
CryptCreateHash(cryptProvider, CALG_SHA1, 0, 0, &hash);
CryptHashData(hash, myData, myDataLength, 0);

BOOL isSigOk = CryptVerifySignature(hash, signature, signatureLength, publicKey, NULL, CRYPT_NOHASHOID); 
```

验证返回0，`GetLastError()`返回2148073478“无效签名”。哈希是相同的。我试过有和没有`CRYPT_NOHASHOID`标志。

我尝试用 C++ 对数据进行签名（只是为了比较结果）。我删除了`CRYPT_VERIFYCONTEXT`旗帜。但是导入私钥 BLOB 失败并显示 1008“尝试引用不存在的令牌”。生成新密钥失败并出现相同的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:53:59.507

经过逐字节检查后，我得到了它的工作。C# 应用程序中有两个问题。

1）我曾经`new RSACryptoServiceProvider(RsaKeySize)`生成一个密钥对。问题是这会生成一个用于密钥交换的密钥对，而不是用于签名。C# 不介意，但它在 C++ 程序中造成了麻烦。生成密钥对的正确方法是：

```
CspParameters parameters = new CspParameters();
parameters.KeyNumber = (int)KeyNumber.Signature;

RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(RsaKeySize, parameters); 
```

2)`RSACryptoServiceProvider`反转其输出（签名、加密数据）。它在[文档](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx#remarksToggle)中提到。所以你需要`Array.Reverse()`在保存之前计算签名。

# c# - 实体的一对一关系

> ID：16015409
> 
> 赞同：0
> 
> 时间：2013-04-15T12:41:23.763
> 
> 标签：c#, entity-framework, entity-framework-5

所以我有3节课。例如：

```
class Project {
    int id
}

class User {
    int id
}

class UserProjectLink {
    int projectId
    int userId
} 
```

我有这种方法是为了避免`NULL`数据库中的值。然而，实体框架`projectId`在我的`User`表上设置了，从而产生了`NULL`值。（请注意，上面的类不是实际的类）。

我该如何解决这个问题？一个用户只有 1 个项目，一个项目只有 1 个用户。该项目可能还没有用户，在这种情况下，`UserProjectLink`表中没有一行会告诉我那里还没有用户。

任何想法都可能有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:46:45.737

您所描述的是一个项目是相对于用户的*弱实体*的设置。这意味着为了一个项目的存在，它**必须有**一个用户作为它的所有者，并且它不能被任何其他用户引用（即它只有一个所有者）。

所以，你不需要`UserProjectLink`桌子。

```
class User {
    int id
}

class UserProject { // or just "Project"
    int projectId
    int userId
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:49:44.487

```
class User {
    [Key, ForeginKey("Project")]
    int id
    public Virtual Project Project{get; set;}
}
class Project {
    int id
    public virtual User User {get; set;}
} 
```

# ios - 我的 iPhone 项目中有 15 个 UIButton，单击按钮后会弹出一个图像，并且不同按钮的所有图像都不同？

> ID：16015410
> 
> 赞同：0
> 
> 时间：2013-04-15T12:41:27.457
> 
> 标签：ios, uiimageview, uibutton, uitouch

我的 iPhone 项目中有 15 个 UIButton，单击按钮后会弹出一个图像，并且不同按钮的所有图像都不同，我如何通过触摸来实现这一点？

我应该如何为特定按钮调用正确的图像？

我不想拿 15 个 UIButtons 和 15 个 UIImageView 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:35:18.580

您可以使用 IBOutletCollections，这需要您在 Xib 中连接 15 个 UIButton。以下代码假定您有一组 N 按钮。对于给定的手势，它将遍历集合中的按钮并确定触摸的位置是否在按钮框架内。

编辑： IBOutletCollections 在 iOS 4 及更高版本中可用。

假设您具有以下属性：

```
@property (strong, nonatomic) IBOutletCollection(UIButton)    NSArray  *collection_buttons;
@property (weak, nonatomic) IBOutlet UIImageView *imageView; 
```

以及以下合成：

```
@synthesize collection_buttons = _collection_buttons, imageView = _imageView; 
```

然后您可以在手势回调中使用以下代码。

```
-(IBAction) tapGestureOnButton:(UITapGestureRecognizer *) gesture {
    CGPoint point = [gesture locationInView:self.view_buttonContainer];

    for( int index = 0; index < self.collection_buttons.count; index++ ) {
        if( CGRectContainsPoint(((UIButton *)[_collection_buttons objectAtIndex:index]).frame, point)) {
            //Button at index has been pressed
            [imageView setImage:[button backgroundImageForState:UIControlStateNormal]];               

            break;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:53:33.687

拥有包含所有 15 个按钮信息的视图的背景图像，这些信息被分为 15 个位置以检测触摸。获取触摸位置（坐标）并根据预定义的特定位置，相应地更新弹出 UIImageView 中的图像。

这可能有助于在视图中获取触摸的位置。

[UIView 触摸位置坐标](https://stackoverflow.com/questions/3370997/uiview-touch-location-coordinates)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:43:25.493

您可以将所有 15 个按钮都连接到一个 " `IBAction`" 方法。

调用该方法时，发送的参数（例如“ `(id) sender`”）是发送消息的对象。

如果您为每个按钮分配不同的标签，您将知道哪个按钮调用了操作方法，然后您可以为每个不同的按钮显示不同的图像。

您在这里只需要一个“ `IBAction`”方法和一个`IBOutlet`用于单个图像视图的“ ”。不过，您仍然需要某种逻辑来将 15 个不同的图像加载到单个图像视图中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:48:25.847

这是您可以执行的操作：单击任何按钮后都会调用它：

```
-(IBAction)buttonClicked:(UIButton *)sender {

   if(sender.tag == 0){
    NSLog(@"Button one");
} else if(sender.tag == 1){
    NSLog(@"Button two"); ... // like wise do it for 15 buttons
}

} 
```

您所要做的就是在创建按钮时为其分配标签。我认为您必须运行 for 循环 15 次才能创建这些按钮，所以：

```
for(i=0;i<15;i++){
 //create button..
 button.tag = i;
} 
```

# php - Zend\ServiceManager\ServiceManager::get 无法获取或创建 Zend\Db\Adapter\Adapter 的实例

> ID：16015411
> 
> 赞同：0
> 
> 时间：2013-04-15T12:41:31.583
> 
> 标签：php, zend-framework2

**更新**：

在尝试提到这个问题已经得到回答时，我收到了这个错误

```
Fatal error: Class Album\Module contains 1 abstract method and must therefore be declared abstract or implement the remaining methods (Zend\ModuleManager\Feature\ServiceProviderInterface::getServiceConfig) in D:\projects\zf2-tutorial\module\Album\Module.php on line 54 
```

我已经按照[ZF2 文档](http://zf2.readthedocs.org/en/release-2.0.0/user-guide/database-and-models.html)显示列表时遇到了这个错误。我用谷歌搜索了很多，但找不到修复它的方法:(

在我的 config/application.config.php 首先我有这个

```
'config_glob_paths' => array(
      'config/autoload/{,*.}{global,local}.php',
    ) 
```

错误是

```
D:\projects\zf2-tutorial\vendor\zendframework\zendframework\library\Zend\ServiceManager\ServiceManager.php:744 
```

信息：

```
An exception was raised while creating "Album\Model\AlbumTable"; no instance returned 
```

搜索后我得到了这个，所以我将上面的代码更改为

```
 'config_glob_paths' => array(
        '../../../config/autoload/{,*.}{global,local}.php',
    ) 
```

现在它显示这个错误

```
D:\projects\zf2-tutorial\vendor\zendframework\zendframework\library\Zend\ServiceManager\ServiceManager.php:456 
```

信息：

```
Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for Zend\Db\Adapter\Adapter 
```

我也将我的 local.php.dist 更改为 local.php 但仍然没有运气:(

这是我的专辑/Module.php

```
<?php
namespace Album;

use Album\Model\Album;
use Album\Model\AlbumTable;
use Zend\Db\ResultSet\ResultSet;
use Zend\Db\TableGateway\TableGateway;
//use Zend\ModuleManager\Feature\ServiceProviderInterface;

class Module {
public function getAutoloaderConfig(){
    return array(
        'Zend\Loader\ClassMapAutoloader' => array(
            __DIR__ . '/autoload_classmap.php',
        ),
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
            ),
        ),
    );
}

public function getConfig(){
    return include __DIR__ . '/config/module.config.php';
}

public function getServiceConfig(){
    return array(
        'factories' => array(
            'Album\Model\AlbumTable' =>  function($sm) {
                $tableGateway = $sm->get('AlbumTableGateway');
                $table = new AlbumTable($tableGateway);
                return $table;
            },
            'AlbumTableGateway' => function ($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $resultSetPrototype = new ResultSet();
                $resultSetPrototype->setArrayObjectPrototype(new Album());
                return new TableGateway('album', $dbAdapter, null, $resultSetPrototype);
            },
        ),
    );
  }
 } 
```

我的专辑/模型/AlbumTable.php

```
<?php
 namespace Album\Model;

use Zend\Db\TableGateway\TableGateway;

class AlbumTable{
  protected $_albumObj;

   public function __construct(TableGateway $_albumObj){
      $this->_albumObj = $_albumObj;
   }

   public function fetchAll(){
      $res = $this->_albumObj->select();
      return $res;
   }

public function getAlbum($id){
    $row = $this->_albumObj->select(array('id'=>(int)$id));
    $row = $row->current();
    if($row){
        return $row;
    }
}

public function deleteAlbum($id){
    return $this->_albumObj->delete(array('id'=>(int)$id));
}

public function saveAlbum(Album $album){
    $data = array(
        'name' => $album->name,
        'author'  => $album->author,
    );

    $id = (int)$album->id;
    if ($id == 0) {
        $this->_albumObj->insert($data);
    } else {
        if ($this->getAlbum($id)) {
            $this->_albumObj->update($data, array('id' => $id));
        } else {
            throw new \Exception('Form id does not exist');
        }
    }
  }
 } 
```

?>

我的 AlbumController.php

```
<?php
 namespace Album\Controller;

 use Zend\Mvc\Controller\AbstractActionController;
 use Zend\View\Model\ViewModel;

class AlbumController extends AbstractActionController {
   protected $albumTable;

  public function indexAction(){
    //$re = $this->getAlbumTable()->fetchAll();
    //print_r($re);
    return new ViewModel(array('albums' => $this->getAlbumTable()->fetchAll()));
}

public function addAction(){}
public function editAction(){}
public function deleteAction(){}
public function getAlbumTable(){
    if (!$this->albumTable) {
        $sm = $this->getServiceLocator();
        $this->albumTable = $sm->get('Album\Model\AlbumTable');
        //var_dump($this->albumTable);
    }
    return $this->albumTable;
 }
} 
```

我的gobal.php

```
<?php
 return array(
  'db' => array(
    'driver'         => 'Pdo',
    'dsn'            => 'mysql:dbname=zf2tutorial;host=localhost',
    'driver_options' => array(
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
    ),
),
'service_manager' => array(
    'factories' => array(
        'Zend\Db\Adapter\Adapter'
                => 'Zend\Db\Adapter\AdapterServiceFactory',
     ),
   ),
 ); 
```

我被卡住了无法继续:(任何帮助将不胜感激！

**更新**：

在我的问题顶部尝试这样提到时，我收到了这个错误

```
Fatal error: Class Album\Module contains 1 abstract method and must therefore be declared abstract or implement the remaining methods (Zend\ModuleManager\Feature\ServiceProviderInterface::getServiceConfig) in D:\projects\zf2-tutorial\module\Album\Module.php on line 54 
```

# macos - Mac OS X：使用来自应用程序的钩子执行脚本

> ID：16015415
> 
> 赞同：0
> 
> 时间：2013-04-15T12:41:46.237
> 
> 标签：macos, cocoa, scripting, hook

我正在构建一个监控某事™ 的可可应用程序，并且我计划为用户提供一些挂钩。因此，我想让用户能够将具有指定名称（比如说 after_event）的脚本（Bash、Ruby、Python 等）放入应用程序支持目录，并且该脚本在我的代码中的某个事件之后执行。理想情况下，我可以将一些变量传递给脚本，以便脚本知道发生了什么。

对此有什么想法吗？

所以问题一是：我如何获得应用程序支持“SDK方式”的路径？问题二是：如何使用 THAT_APPEND="foo" 之类的变量执行脚本？

谢谢，菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:33:23.957

因为共享是关心这里是执行脚本的方法：

```
-(void) runScript:(NSString*)scriptName withVariables:(NSDictionary *)variables
{
NSString *appSupportPath = [NSFileManager defaultManager] applicationSupportDirectory];

        NSArray *arguments;
        NSString* newpath = [NSString stringWithFormat:@"%@/%@",appSupportPath, scriptName];
        if ([[NSFileManager defaultManager]fileExistsAtPath:newpath]){
            NSTask *task = [[NSTask alloc] init];
            [task setLaunchPath: newpath];

            NSLog(@"Executing hook: %@",newpath);
            arguments = [NSArray arrayWithObjects:newpath, nil];
            [task setArguments: arguments];

            [task setEnvironment:variables];

            NSPipe *pipe;
            pipe = [NSPipe pipe];
            [task setStandardOutput: pipe];

            NSFileHandle *file;
            file = [pipe fileHandleForReading];

            [task launch];

            NSData *data;
            data = [file readDataToEndOfFile];

            NSString *string;
            string = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];
            NSLog (@"script returned:\n%@", string);
        }

}

} 
```

**更新：**我将代码更新为更通用。现在 NSTask 将告诉内核直接执行脚本，这样您的用户就不能在线使用 Bash 脚本，还可以使用她喜欢的 python、perl、php。她唯一需要使用的是该文件中的[Shebang](https://en.wikipedia.org/wiki/Shebang_%28Unix%29)。

NSFileManager 类别可以在[这里](http://www.cocoawithlove.com/2010/05/finding-or-creating-application-support.html)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:00:48.520

查找[NSTask 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)。有一个您可以操纵的环境成员。在表单中添加命令行参数也`-name = value`应该是微不足道的。

# oracle - 是否可以在包外（不在正文或标头中）独立创建函数，然后在包内调用并执行它？

> ID：16015420
> 
> 赞同：0
> 
> 时间：2013-04-15T12:42:01.497
> 
> 标签：oracle, oracle10g, oracle-sqldeveloper

我只想知道这是否可行以及如何执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:44:24.697

当然：

```
 create or replace function get_it return pls_integer is
  begin
    return 1;
  end;

  create or replace package pck1 as
    function pck_get_it return pls_integer;
  end;

  create or replace package body pck1 as
    function pck_get_it return pls_integer as
    begin
      return get_it;
    end;
  end; 
```

# mysql - 从 frm、ibd、trg 文件恢复 MySql 数据库

> ID：16015426
> 
> 赞同：0
> 
> 时间：2013-04-15T12:42:22.497
> 
> 标签：mysql, mysqldump

我有一个包含很多 frm、ibd 和 trg 文件的 zip 文件。

看起来我每张桌子都有一种：

```
users.frm
users.ibd
users.trg 
```

我想使用该文件恢复数据库。我不知道它们是什么。

有什么帮助吗？

# javascript - 打字稿：我如何得到真正的“这个”

> ID：16015430
> 
> 赞同：1
> 
> 时间：2013-04-15T12:42:35.040
> 
> 标签：javascript, typescript

我正在[学习 learn.knockoutjs.com](http://learn.knockoutjs.com)教程，我正在自定义绑定教程的第 4 步。有以下 JavaScript：

```
update: function(element, valueAccessor) {
    // Give the first x stars the "chosen" class, where x <= rating
    var observable = valueAccessor();
    $("span", element).each(function(index) {
        $(this).toggleClass("chosen", index < observable());
    });
} 
```

我已将其翻译为以下 TypeScript：

```
update: (element, valueAccessor) => {
    var observable = valueAccessor();
    $("span", element).each(index => {
        $(this).toggleClass('chosen', index < observable())
    });
} 
```

这将创建以下内容，其中创建 _this 变量以保留“更新”函数的范围，而不是内部“跨度”函数。

```
update: function (element, valueAccessor) {
    var _this = this;
    var observable = valueAccessor();
    $("span", element).each(function (index) {
        $(_this).toggleClass('chosen', index < observable());
    });
} 
```

问题出在`$(_this)`. 如何让 TypeScript 给我真正的`$(this)`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:50:23.580

好吧，打字稿`_this`对许多人来说是更直观的，事实上，这样的代码每天会在 Stackoverflow 上导致多次重复：

```
 update: function() {
     $(elem).click(function(){
          this.save();
     });
  } 
```

`this`不一样`this`，因为 js`this`与其他语言的工作方式不同——它对每个函数调用都有单独的绑定。

Typescript 将使上述工作符合许多 js 新手的预期：

```
 update: function() {
     //this is the object with update, save methods etc
     $(elem).click( () => {
          this.save();  //this is still the object with update, save methods etc
     });
  } 
```

* * *

即使使用胖箭头，通常也有一种方法可以引用您想要的内容：

```
update: function() {
    $(elem).click( (event) => {
        $(event.currentTarget).hide() //same as $(this).hide() with normal function
        this.save(); //Stays intuitive to non-javascripters
    });
} 
```

或者用你的例子：

```
update: function() {
    $("span", element).each( (index, elem) => {
        $(elem).toggleClass('chosen', index < observable())
        this.save(); //stays intuitive to non-javascripters
    });
} 
```

当然，对于习惯了 JS 行为的有经验的 Javascripter 来说`this`，它可能不是那么直观。

顺便说一句，我不是 100% 了解打字稿语法...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:42:35.040

答案很简单。不要使用 lambda。

```
update: (element, valueAccessor) => {
    var observable = valueAccessor();
    $("span", element).each(function (index) {
        $(this).toggleClass('chosen', index < observable())
    });
} 
```

请注意，不同之处在于此代码使用`... element).each(function (index)...`而不是 lambda

我不明白为什么，所以如果有人可以发布原因，那就太好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T07:35:20.250

Esailija 在这里有一个正确的想法：根本不要`$(this)`在回调中使用。使用命名参数，您的代码将更加简洁。

作为另一个帮助的例子，考虑这个简单的 jQuery 插件：

```
// Set a random opacity on each of the elements in a jQuery object
jQuery.fn.randomOpacity = function() {
    return this.each( function() {
        $(this).css({ opacity: Math.random() });
    });
}; 
```

哎哟。一段代码可能比这更令人困惑吗？`this`连续出现在两行，表示*完全不同的东西*。

相反，使用命名参数：

```
// Set a random opacity on each of the elements in a jQuery object
jQuery.fn.randomOpacity = function() {
    return this.each( function( i, element ) {
        $(element).css({ opacity: Math.random() });
    });
}; 
```

这要清楚得多。

# c++ - C++ WinAPI - 如何使按钮看起来被按下？

> ID：16015432
> 
> 赞同：0
> 
> 时间：2013-04-15T12:42:36.823
> 
> 标签：c++, winapi

我的编辑器中有几种编辑模式。我可以使用工具栏上的按钮选择特定模式。我想指出当前处于哪种模式。当我按下适当的按钮时 - 我想让单击的按钮保持按下状态。我如何在 WinAPI 中做到这一点？如果相关，我的工具栏使用位图作为图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:05:09.100

`BS_PUSHLIKE`曾经有一种方法可以通过使用带有样式集的普通复选框来获得类似于工具栏的外观和感觉。但是由于鼠标悬停效果，Windows XP 有点破坏了它，所以它不再被广泛使用。

如果你想在没有 MFC 的帮助下创建自己的工具栏，有[一篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb760446%28v=VS.85%29.aspx)介绍了工具栏窗口的创建和管理（实际上是公共控件库中的一个专用窗口类）。

# facebook - 永远的 Facebook 访问令牌？

> ID：16015437
> 
> 赞同：0
> 
> 时间：2013-04-15T12:43:07.033
> 
> 标签：facebook, token

是否可以创建一个永久有效的 Facebook 访问令牌？

实际上我的在 2 小时后结束：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:25:07.917

不，“offline_access”已被弃用/删除（[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)）。

您只能获得持续约 60 天的长寿代币。最简单的方法是使用 PHP SDK，有一个名为“setExtendedAccessToken”的函数来实现这一点。

另外，请参阅这些线程：

*   [使用 setExtendedAccessToken() 获取长期访问令牌会返回短期令牌](https://stackoverflow.com/questions/12196958/getting-long-lived-access-token-with-setextendedaccesstoken-returns-short-live)
*   [Facebook 60 天访问令牌和已弃用的 Offline_Access](https://stackoverflow.com/questions/9329564/facebook-60-day-access-token-and-deprecated-offline-access)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:41:46.603

这取决于您想用访问令牌做什么。

如果您想要访问令牌来访问用户数据。您可以使用 luschn 在他的回答中所说的“setExtendedAccessToken”方法。

但是，如果您想要访问令牌来访问某些公共信息，例如来自公共组的提要或页面。因此，您可以使用 App Access Token。你在这里得到的[https://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)

# iphone - 当 alertview 显示时不要连接 segue

> ID：16015440
> 
> 赞同：1
> 
> 时间：2013-04-15T12:43:17.517
> 
> 标签：iphone, ios, objective-c

我在情节提要中连接了一个 push segue，然后我使用了`prepareForSegue`这样的方法：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"start"] && self.name.textField.text == nil)
    {

        UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Test"
                                                          message:@"Test
                                                         delegate:self
                                                cancelButtonTitle:@"OK"
                                                otherButtonTitles:nil];
        [message show];

    }
} 
```

我想要做的是，如果“如果”为真，则会弹出一个警报框并执行转场，但我只想显示警报框，而我不想执行转场。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:50:19.113

`prepareForSegue:sender:`在即将执行 segue 时调用。那时您无法取消它。

如果您希望能够取消 segue，您应该覆盖的方法是[`shouldPerformSegueWithIdentifier:sender:`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW111).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:52:35.273

我认为您需要在这里重新评估您的逻辑并从中删除条件`prepareForSegue`

使用`UIAlertDelegate`

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"OK"]) {
      [self performSegueWithIdentifier:@"My Segue" sender:self];
      return;
    } // else do not perform segue
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:48:22.203

我认为你不能在这一点上停下来。

但您可以 `- (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender`从 iOS 6 开始使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:49:01.520

`[self performSegueWithIdentifier: @"MyRealStartSegue" sender: sender]`尝试为您的 segue 指定一个不同的名称，并且仅在未显示警报时才调用该 segue（例如“ ”）。

当然，这意味着您需要在 " " 方法*之外检查这些条件。*`prepareForSegue`按下某个按钮时可能是 IBAction？

# asp.net-mvc - 为 KendoUI ListView 创建自定义模板

> ID：16015444
> 
> 赞同：1
> 
> 时间：2013-04-15T12:43:38.243
> 
> 标签：asp.net-mvc, kendo-ui, kendo-asp.net-mvc

我想为 ListView 创建一个自定义模板（我在 ListView 中显示产品 eShop）。我写了这段代码：

```
<script type="text/x-kendo-tmpl" id="template">
    <div class="item">
    <div class="image">
        <a href='@Url.Action("GetDetails", "Products", routeValues: new {id =${ProductID}} )' target='_blank' class='pimg'>
            <img src="${ProductThumbnailImageUrl}" alt=" ${ProductTitle}"/>
        </a>
    <div class="price"> ${kendo.toString(ProductPrice, "n0")} </div>

    <div class="name">

</div>
    <div class="description_featured" style="min-height: 110px;">
        ${ProductDescription}

    </div>
    </div>
</div>

</script>

@(Html.Kendo().ListView(Model)
          .Name("listView")
          .TagName("div")
          .ClientTemplateId("template")
          .DataSource(dataSource =>
                      {
                          dataSource.Read(read => read.Action("Products_Read", "Products"));
                          dataSource.PageSize(12);
                          dataSource.ServerOperation(false);
                      })
          .Pageable()
             ) 
```

我收到一个错误`new {id = ${ProductTitle}}`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:37:26.240

这就是您使用模板的方式。这是我最近用于我的网站的模板中的一个。

```
<script type="text/x-kendo-tmpl" id="template">
       <div class="product">
            <img src='http://cdn.rbgx.net/images/skybazaar/products/medium/${ImageFileName}' alt="${Name} image" />
    <div class="productDeatails">
            <h3>#:Name#</h3>
     # if (EntityType == 2) { #
        Click to see products of this category
    # } else if(EntityType == 1) { #
     # if(parseFloat(SalePrice) > 0 && parseFloat(SalePrice) < parseFloat(Price)) { #
    Sale Price #: kendo.toString(SalePrice, "c")#
    # } else { #
     Price #: kendo.toString(Price, "c")#
    # } #
    # } #
        </div>
        </div>
    </script> 
```

在你的情况下`${ProductTitle}` 使用`#: ProductTitle #`

# php - PHP 注意：未定义的索引 如何解决这个问题

> ID：16015451
> 
> 赞同：0
> 
> 时间：2013-04-15T12:43:54.147
> 
> 标签：php

我收到 PHP 通知：我的网站中出现未定义的索引错误。

> PHP 通知：未定义索引：第 41 行 /home/kashan/public_html/ifunnygag.com/templates/wlol_v1/pages/header.php 中的标题 [15-Apr-2013 06:36:42] PHP 通知：未定义索引：url在第 42 行的 /home/kashan/public_html/ifunnygag.com/templates/wlol_v1/pages/header.php

```
var opts = {
Line 40 message : '<?php echo $file['title'];?>',
Line 41 name : '<?php echo $file['title'];?>',
Line 42 link : '<?php echo $file['url'];?>',
    description : 'Click to see pic...',
Line 44 picture : '<?php echo $file['path'];?>'

};

FB.api('/me/feed', 'post', opts, function(response)
{
    if (!response || response.error)
    {
        console.log(response);
    }
    else
    {
        console.log('Success - Post ID: ' + response.id);
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:50:13.103

如果您想将未设置的值留空，请使用 like

```
<?php echo isset($file['title'])?$file['title']:"";?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:52:03.160

检查引号是否导致问题。尝试，

```
"<?php echo $file['title'];?>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:45:49.460

首先检查你的 $file 数组应该有那些你试图回显的索引，如果它在那里，那么这样做

```
"<?php echo $file['title'];?>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:49:39.843

您可以在使用变量和数组索引之前使用 isset() 或 empty() 检查它们。IE

```
if (empty($file['url'])) {
 $file['url'] = '';
} 
```

但是您可能还想确保它不是因为其他严重问题而为空的。即在被接受之前未正确验证的发布字段。如果必填的帖子字段为空，您可能希望完全拒绝该帖子请求。

# sql-server-2008 - Crystal Reports 4.6 - 使用 Unicode 字符编码获取报表

> ID：16015453
> 
> 赞同：0
> 
> 时间：2013-04-15T12:43:54.803
> 
> 标签：sql-server-2008, encoding, vb6, crystal-reports, collation

我有一个用 vb 6 开发的稳定 vb 项目。我需要添加新的 Crystal Reports。CR 生成不带 Unicode 字符的报告。那么我该如何解决这个问题。

我尝试过的事情：

*   我试图通过动态编写查询来设置字段的排序规则，但 CR 不允许我编写动态查询。

*   我尝试使用 CR Designer 将“整理”添加到 sqlQuery。DR 不允许我添加查询“COLLATE”命令。

*   我在 CR 设计器和 VB6 的 CR 对象上都找不到关于更改编码的属性。

*   我试图更改服务器的区域设置和数据库的排序规则。没有改变。

# javascript - window.open(url) 不在同一个选项卡中打开新网页

> ID：16015459
> 
> 赞同：1
> 
> 时间：2013-04-15T12:44:16.367
> 
> 标签：javascript, jquery, html, window

`window.open("index.php");`不会在*同一*选项卡中打开新页面，而是在*新*选项卡中打开它。

我也试过`window.open("index.php",'_self')`了，它根本不打开标签。

这是我的代码：

```
$.ajax({
    url: "login.php",
    type: 'POST',
    data : "username="+name+"&password="+pwd ,
    datatype :"text",
    async: false, 
    cache: true,
    timeout: 30000,
    error: function() {
        return true;
    },
    success: function(msg) {                        

       if(msg == "Validated")
        {
            alert(msg);
            window.open("index.php");
        }
        if(msg=="Incorrect password")
        {
            alert(msg);
            location.reload();                         
        }    
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:45:38.607

而不是`window.open`你应该使用`window.location = "http://...."`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:47:26.763

该`window.open`函数打开一个**新**窗口（或选项卡）。将`window.location`url 更改为**当前**选项卡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:46:59.353

window.location 是您应该查看的功能/属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-27T17:04:04.050

据我所知，`window.location`不会这样做。正确的方法是：

```
document.location = 'url-you-want-to-open.ext'; 
```

最好的办法是包含完整路径（如果它在不同的域上）或绝对路径（如果它在同一个域上）。仅当目标文档位于同一文件夹中时才使用相对路径。

添加到此：

`window`= 与浏览器及其选项卡对话

`document`= 与浏览器/选项卡中加载的当前文档对话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T12:52:00.573

`window.open`如果操作是同步的并由用户调用，则将在新选项卡中打开。如果您`async: false`从 ajax 选项中删除（并且此方法由用户调用，例如通过单击按钮），则将打开新窗口而不是新选项卡。对于简单的导航集`window.location.href`

# java - 使用特定的 url 地址从 java 代码关闭浏览器

> ID：16015463
> 
> 赞同：-6
> 
> 时间：2013-04-15T12:44:22.670
> 
> 标签：java, browser, using

1）我想使用我的java代码中的url地址关闭特定的浏览器选项卡。因为它是一个客户端服务器应用程序。我想使用客户端应用程序中的 url 地址关闭浏览器选项卡

服务器端将有一个 jar 将与客户端请求通信并从客户端获取 url 并根据 url 地址关闭服务器计算机中运行的浏览器。

2）我也想从我的 java 代码中关闭我的 firefox 或 chrome 浏览器。我不想杀死进程但正常关闭浏览器。

**我需要这个 ubuntu 操作系统的解决方案。

希望得到您的回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:33:02.247

我正在使用以下代码根据登录用户进行过滤。在那里你必须相应地改变条件。

```
WebContext webContext = WebContextFactory.get();
Collection<ScriptSession> ss = webContext.getAllScriptSessions();
        for (ScriptSession s : ss) {
            if (s.getAttribute("uname")!=null && s.getAttribute("uname").equals(to)) {
                Util util = new Util(s);
                ScriptBuffer sc= new ScriptBuffer();
                sc.appendScript("window.close()");
                util.addScript(sc);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:48:45.367

您必须调用 javascript 从您的 javascode 中关闭客户端的浏览器。这称为反向 Ajax。您可以通过使用 DWR 框架来实现。这是一个强大的 API，可帮助您从 Javascipt 调用 Java，反之亦然。

通过使用它，您可以过滤位于特定 URL 上的客户端浏览器。

而且此解决方案不是特定于操作系统的，它适用于每个操作系统平台。

# grails - 如何更改 Grails Spring Security Cookie 路径

> ID：16015468
> 
> 赞同：2
> 
> 时间：2013-04-15T12:44:39.990
> 
> 标签：grails, cookies, spring-security, remember-me, cookie-path

我有两个使用spring security的grails应用程序：

*   核
*   模块（用户和角色表映射到核心数据库表）

我想使用“记住我”来实现单点登录功能。问题是 cookie 存储在不同的路径“/Core”和“/Module”中，我猜这是它不起作用的原因。

有谁知道如何将 cookie 路径更改为“/”？

**备注**：

*   我是否需要更改 Spring Security 或 Tomcat 服务器配置（使用 intellij）
*   如果可能，我想避免设置 CAS 服务器
*   我正在寻找插件作为替代方案

感谢任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:54:18.320

当 remember-me 过滤器创建 remember-me cookie 时，它​​会将 cookie 路径设置为从请求对象中获取的上下文路径（请参阅[此处的相关源代码](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/authentication/rememberme/AbstractRememberMeServices.java#L363-L366)）。如果您想自定义此行为，您需要覆盖您的应用程序在子类中使用的记住我服务实现的`setCookie()`和方法（或者或），并配置以使用您的自定义实现。`cancelCookie()``TokenBasedRememberMeServices``PersistentTokenBasedRememberMeServices``RememberMeAuthenticationFilter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T15:54:58.537

这是我实现它的方式。创建一个新服务，扩展**TokenBasedRememberMeServices** 覆盖**setCookie**和**cancelCookie**方法来设置 cookie 路径。添加cookiePath变量并添加方法到**setCookepath** ()

更新资源.groovy

> ```
> rememberMeServices(YourTokenBasedRememberMeServices) { 
>     userDetailsService = ref("userDetailsService")
>     key = conf.rememberMe.key
>     cookieName = conf.rememberMe.cookieName
>     alwaysRemember = conf.rememberMe.alwaysRemember
>     tokenValiditySeconds = conf.rememberMe.tokenValiditySeconds
>     cookiePath = some config variable 
> } 
> ```

# android - phonegap android原生函数没有被调用

> ID：16015471
> 
> 赞同：0
> 
> 时间：2013-04-15T12:44:50.350
> 
> 标签：android, cordova, plugins, phonegap-plugins, native-code

我在 /assets/www 中的 html 代码

```
<!DOCTYPE html>
<\html>

<\head>

<\title>FileReader Example</title>

<script type="text/javascript" charset="utf-8" src="cordova-2.6.0.js"></script>
<script type="text/javascript" charset="utf-8">

function onLoad() {
    console.log("in onLoad");
    document.addEventListener("deviceready", onDeviceReady, false);
    execute(success, fail, "Echo", action, [args,"1","2"]);
    console.log("in at end of onLoad");
}

function onDeviceReady() {
    console.log("in onDeviceReady");
}

function success(file){
    console.log("success");
}

function fail(evt) {
    console.log("in fail");
    console.log(evt.target.error.code);
}

<\/script>
<\/head>

<\body onload="onLoad()" >

<\h1>Example</h1>

<\p>Read File</p>

<\/body>

<\/html> 
```

我的java类代码

```
package com.example.testphonegap;

import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;
import org.json.JSONArray;
import org.json.JSONException;

import android.util.Log;

public class Echo extends CordovaPlugin {
@Override
public boolean execute(String action, JSONArray args, CallbackContext callbackContext)     throws JSONException {
    // if (action.equalsIgnoreCase("echo")) {
    String message = args.getString(0);
    this.echo(message, callbackContext);
    Log.v("success", "success");
    return true;
    // }
    // return false;
}

private void echo(String message, CallbackContext callbackContext) {
    if (message != null && message.length() > 0) {
        callbackContext.success(message);
    } else {
        callbackContext.error("Expected one non-empty string argument.");
    }
}
} 
```

在 /res/xml 的 config.xml 中添加的行

```
 <plugin name="Echo" value="com.example.testphonegap.Echo" /> 
```

我的日志猫

```
04-15 12:22:38.455: I/dalvikvm(778): Could not find method org.apache.cordova.CordovaWebView.setOverScrollMode, referenced from method org.apache.cordova.DroidGap.init
04-15 12:22:38.455: W/dalvikvm(778): VFY: unable to resolve virtual method 1098: Lorg/apache/cordova/CordovaWebView;.setOverScrollMode (I)V
04-15 12:22:38.455: D/dalvikvm(778): VFY: replacing opcode 0x6e at 0x0043
04-15 12:22:38.615: I/CordovaLog(778): Changing log level to DEBUG(3)
04-15 12:22:38.635: I/CordovaLog(778): Found preference for useBrowserHistory=true
04-15 12:22:38.655: D/CordovaLog(778): Found preference for useBrowserHistory=true
04-15 12:22:38.655: I/CordovaLog(778): Found preference for exit-on-suspend=false
04-15 12:22:38.665: D/CordovaLog(778): Found preference for exit-on-suspend=false
04-15 12:22:38.665: D/DroidGap(778): DroidGap.onCreate()
04-15 12:22:38.725: I/dalvikvm(778): Could not find method android.webkit.WebView.<init>, referenced from method org.apache.cordova.CordovaWebView.<init>
04-15 12:22:38.725: W/dalvikvm(778): VFY: unable to resolve direct method 344: Landroid/webkit/WebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
04-15 12:22:38.725: D/dalvikvm(778): VFY: replacing opcode 0x70 at 0x0001
04-15 12:22:38.745: D/dalvikvm(778): VFY: dead code 0x0004-0046 in Lorg/apache/cordova/CordovaWebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
04-15 12:22:39.465: D/JsMessageQueue(778): Set native->JS mode to 2
04-15 12:22:39.475: I/CordovaWebView(778): Disabled addJavascriptInterface() bridge since Android version is old.
04-15 12:22:39.485: E/dalvikvm(778): Could not find class 'android.webkit.WebResourceResponse', referenced from method org.apache.cordova.CordovaWebViewClient.getWhitelistResponse
04-15 12:22:39.525: W/dalvikvm(778): VFY: unable to resolve new-instance 129 (Landroid/webkit/WebResourceResponse;) in Lorg/apache/cordova/CordovaWebViewClient;
04-15 12:22:39.525: D/dalvikvm(778): VFY: replacing opcode 0x22 at 0x000b
04-15 12:22:39.525: D/dalvikvm(778): VFY: dead code 0x000d-0014 in Lorg/apache/cordova/CordovaWebViewClient;.getWhitelistResponse ()Landroid/webkit/WebResourceResponse;
04-15 12:22:39.585: W/dalvikvm(778): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
04-15 12:22:39.615: W/dalvikvm(778): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
04-15 12:22:39.615: W/dalvikvm(778): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
04-15 12:22:39.665: D/DroidGap(778): DroidGap.init()
04-15 12:22:39.696: D/CordovaWebView(778): >>> loadUrl(file:///android_asset/www/library_access.html)
04-15 12:22:39.725: D/PluginManager(778): init()
04-15 12:22:39.765: D/CordovaWebView(778): >>> loadUrlNow()
04-15 12:22:39.775: D/CordovaWebView(778): >>> loadUrl(file:///android_asset/www/file_reader.html)
04-15 12:22:39.775: D/PluginManager(778): init()
04-15 12:22:39.805: D/CordovaWebView(778): >>> loadUrlNow()
04-15 12:22:39.805: D/DroidGap(778): Resuming the App
04-15 12:22:39.915: D/DroidGap(778): onMessage(onPageStarted,file:///android_asset/www/library_access.html)
04-15 12:22:39.955: D/SoftKeyboardDetect(778): Ignore this event
04-15 12:22:40.084: D/Cordova(778): onPageFinished(file:///android_asset/www/library_access.html)
04-15 12:22:40.084: D/Cordova(778): Trying to fire onNativeReady
04-15 12:22:40.095: D/DroidGap(778): onMessage(onNativeReady,null)
04-15 12:22:40.095: D/DroidGap(778): onMessage(onPageFinished,file:///android_asset/www/library_access.html)
04-15 12:22:40.134: D/DroidGap(778): onMessage(onPageStarted,file:///android_asset/www/file_reader.html)
04-15 12:22:40.225: D/SoftKeyboardDetect(778): Ignore this event
04-15 12:22:41.184: D/dalvikvm(778): GC_FOR_MALLOC freed 2668 objects / 187648 bytes in 208ms
04-15 12:22:42.185: D/DroidGap(778): onMessage(spinner,stop)
04-15 12:22:44.655: D/CordovaLog(778): in onLoad
04-15 12:22:44.655: I/Web Console(778): in onLoad at file:///android_asset/www/file_reader.html:10
04-15 12:22:44.695: D/CordovaLog(778): ReferenceError: Can't find variable: execute
04-15 12:22:44.695: E/Web Console(778): ReferenceError: Can't find variable: execute at file:///android_asset/www/file_reader.html:12
04-15 12:22:47.615: D/CordovaLog(778): Falling back on PROMPT mode since _cordovaNative is missing. Expected for Android 3.2 and lower only.
04-15 12:22:47.615: I/Web Console(778): Falling back on PROMPT mode since _cordovaNative is missing. Expected for Android 3.2 and lower only. at file:///android_asset/www/cordova-2.6.0.js:906
04-15 12:22:47.935: D/CordovaNetworkManager(778): Connection Type: 3g
04-15 12:22:47.985: D/CordovaNetworkManager(778): Connection Type: 3g
04-15 12:22:47.995: D/DroidGap(778): onMessage(networkconnection,3g)
04-15 12:22:48.096: D/DroidGap(778): onMessage(spinner,stop)
04-15 12:22:48.134: D/Cordova(778): onPageFinished(file:///android_asset/www/file_reader.html)
04-15 12:22:48.134: D/Cordova(778): Trying to fire onNativeReady
04-15 12:22:48.145: D/DroidGap(778): onMessage(onNativeReady,null)
04-15 12:22:48.145: D/DroidGap(778): onMessage(onPageFinished,file:///android_asset/www/file_reader.html)
04-15 12:22:48.335: D/CordovaLog(778): in onDeviceReady
04-15 12:22:48.335: I/Web Console(778): in onDeviceReady at file:///android_asset/www/file_reader.html:18 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:12:30.140

将此行`document.addEventListener("deviceready", onDeviceReady, false);`放在 onLoad 之外，作为脚本部分的第一行。

# apache - 使用 SSL 更新 DNS

> ID：16015474
> 
> 赞同：0
> 
> 时间：2013-04-15T12:44:59.073
> 
> 标签：apache, ssl, dns

每次我访问我们当前的站点 www.example.com 或 example.com 时，我都希望它重定向到 [https://www.example.com](https://www.example.com) .. 我应该通过 DNS 执行此操作吗（如果可以的话，我应该添加一个新的吗？名称或 cname 记录）还是我需要在 apache 配置中执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:54:42.907

将此添加到您希望重定向的文件夹中的 .htaccess 文件中。

```
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://www.example.com/$1 [R,L] 
```

# silverlight - 在 Windows Phone 8 中以编程方式获取 Pivot Header 中的按钮

> ID：16015475
> 
> 赞同：0
> 
> 时间：2013-04-15T12:45:05.927
> 
> 标签：silverlight, xaml, windows-phone-8, windows-phone

摘要：我需要从一个被定义为静态资源的模板的枢轴中检索一个按钮（以附加点击处理程序）。我怎样才能做到这一点？

几个视图包含一个枢轴控件，这些枢轴的样式在 App.xaml 中定义为资源。

这是多个页面中用于 Pivot 的 XAML：

```
<phone:Pivot Title="Onaylar" Name="pivot" Style="{StaticResource MyPivotStyle}">
    <phone:PivotItem Header="first pivot item">
        <TextBlock Foreground="{StaticResource NavyTextColor}" Margin="10,0,0,0" Text="first pivot item"></TextBlock>
    </phone:PivotItem>

    <phone:PivotItem Header="second pivot item">
        <TextBlock Foreground="{StaticResource NavyTextColor}" Margin="10,0,0,0" Text="second pivot item"></TextBlock>
    </phone:PivotItem>
    <phone:PivotItem Header="third pivot item">
        <TextBlock Foreground="{StaticResource NavyTextColor}" Margin="10,0,0,0" Text="third pivot item"></TextBlock>
    </phone:PivotItem>
</phone:Pivot> 
```

这是 App.xaml 中定义的枢轴样式（为方便起见而缩短）：

```
<Style x:Key="MyPivotStyle" TargetType="phone:Pivot">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="phone:Pivot">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid CacheMode="BitmapCache" Grid.RowSpan="2">
                        <Grid.Background>
                            <ImageBrush ImageSource="/Assets/bg_header.png"/>
                        </Grid.Background>
                    </Grid>
                    <Grid Background="{TemplateBinding Background}" CacheMode="BitmapCache" Grid.Row="2" />
                    <ContentPresenter ContentTemplate="{TemplateBinding TitleTemplate}" Margin="24,17,0,-7">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Assets/company_name.png" Width="213.75" HorizontalAlignment="Left" VerticalAlignment="Top" />
                            <Button HorizontalAlignment="Right" VerticalAlignment="Top" Margin="140,-20,0,35" BorderThickness="0" x:Name="btnHome">
                                <Image Source="/Assets/btnHome.png" Width="48" Height="48" ></Image>
                            </Button>
                        </StackPanel>
                    </ContentPresenter>
                    <controlsPrimitives:PivotHeadersControl x:Name="HeadersListElement" Foreground="White"  Grid.Row="1"/>
                    <ItemsPresenter x:Name="PivotItemPresenter" Margin="{TemplateBinding Padding}" Grid.Row="2"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我想做的是：

```
var myButton = GetButtonWithName("btnHome") as Button;
myButton.Click += Handler; 
```

但是，我无法获得按钮。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:25:41.510

我认为主要问题是如何在模板中找到控件。

所以我认为这个链接可以帮助你：

[如何从 DataTemplate 获得 Control 到 ControlTemplate ？](https://stackoverflow.com/questions/8860610/how-to-get-control-from-datatemplate-to-controltemplate)

# mongodb - 查询三个集合、对它们进行排序和限制的最高效方法？

> ID：16015477
> 
> 赞同：1
> 
> 时间：2013-04-15T12:45:19.667
> 
> 标签：mongodb, database

我需要查询 3 个不同的集合。

然后我需要对收集结果进行排序（每个都基于不同的字段和顺序，但每次都是一个 DateTime 值），然后最后限制我想要的结果数量（在我的例子中是 10 个）。

目前我只是在做三个单独的查询并将每个查询限制为 10，然后根据他们拥有的日期时间手动排序。然后我自己最终限制在 10 个。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:14:28.320

由于 mongodb 不是关系数据库，您可以在一个查询中连接多个表，所以不。我什至不确定您是否可以为关系 DBMS 进行这种排序（使每个字段的顺序优先级相等）。

你正在做的已经听起来很不错了。您可能会改进对这 3 个结果的排序。如果前 10 名中没有其他元素，则提前中止迭代一个或多个集合。您可以相应地修改查询以仅返回其他两个集合的文档，其日期低于最后一个（第 10 个）第一个查询的集合。但也许你已经这样做了......

在谈论性能时，您可以考虑在用于查询的这些日期时间字段上添加索引，以使这些字段在内存中预先排序。

# xss - Mustache 是防 XSS 的吗？

> ID：16015483
> 
> 赞同：6
> 
> 时间：2013-04-15T12:45:37.900
> 
> 标签：xss, mustache

我在考虑我的应用程序的 XSS 漏洞。在服务器端，我不清理输入或输出，所以

```
<script>alert(document.cookies)</script> 
```

完全如此存储在数据库中。为了在客户端查看这个值，我使用 Mustache。如果这个脚本是由管理员执行的，当然很容易劫持他的会话。但是我注意到当您使用 {{}} 语法时，Mustache 默认会转义这些值 & \ " < >。我是否需要担心 XSS，当数据库中的值将被插入时

```
<p>{{value}}</p> 
```

甚至

```
<p data-id='{{value}}'>something</p> 
```

? 我是否应该查看我的 Mustache 模板以查找任何易受攻击的代码，或者除非我使用

```
<script>{{value}}</script> 
```

我安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T18:03:44.630

好吧，您应该始终担心 :) 但是，是的，Mustache 实现了您在这里谈论的目标，保护您的示例免受 XSS 攻击（除非您将值直接输出到`<script>`标签中）。

注意：检查您使用的 Mustache 实现是否转义了单引号。显然，规范中没有这样做（[https://github.com/mustache/spec/issues/69](https://github.com/mustache/spec/issues/69)），但幸运的是，主要的实现还是避开了它。

# haskell - 休斯的箭头过滤器练习

> ID：16015487
> 
> 赞同：5
> 
> 时间：2013-04-15T12:45:51.243
> 
> 标签：haskell

我一直在阅读 John Hughes 的 Programming with Arrows，我开始了第一个练习，他要求读者为箭头实现一个通用的过滤器函数 filterA。规范说它应该表现得像过滤 (->) 箭头和 filterM 过滤 Kliesli 箭头。我尝试按如下方式实现它，但我最终得到的结果似乎比我在网上看到的其他解决方案示例要简单一些。我担心我错过了一些东西，但我的答案似乎按照规范的建议工作。它匹配 -> 的过滤器和 Kliesli 箭头的 filterM。它也以合理的方式适用于流函数。

```
listcase [] = Left ()
listcase (x:xs) = Right (x,xs)

filterA :: forall a arr. ArrowChoice arr => arr a Bool -> arr [a] [a]
filterA f = arr listcase >>>
            arr (const []) ||| (switchA *** filterA f >>> arr (uncurry (++)))
                where switchA :: ArrowChoice arr => arr a [a]
                      switchA = (f &&& id) >>> arr (\(b,x) -> if b then [x] else []) 
```

这是一个可接受的实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:24:07.450

这对我来说似乎可以接受。作为替代方案，您可以考虑使用`uncurry ($)`和

```
switchA :: ArrowChoice arr =>> arr a ([a] -> [a])
switchA = (f &&& arr id) >>> arr test
  where
    test (False, _) = id
    test (True, x)  = (x :) 
```

# magento - 在 Magento 中集成 Authorize.net 时出现一些错误

> ID：16015500
> 
> 赞同：1
> 
> 时间：2013-04-15T12:46:31.743
> 
> 标签：magento, payment-gateway, authorize.net

我需要在 Magento 中集成 Authorize.net 集成。我输入了正确的 API 登录 ID 和交易密钥。也测试模式为“否”。

我必须融入英国国家。所以将 Merchant Country 设置为 UK。

我收到此错误`"The supplied currency code is either invalid, not supported, not allowed for this merchant or doesn't have an exchange rate."`

在`[request]`来自日志文件的数组`[x_currency_code] => GBP`中`[x_country] => GB`，，，，`[x_ship_to_country] => GB`

将接受的货币设置为英镑，同时存储货币为英镑。

仍然出现错误。

那么可能是什么问题？

# oracle - Sqoop Oracle Hive 错误

> ID：16015504
> 
> 赞同：0
> 
> 时间：2013-04-15T12:46:42.577
> 
> 标签：oracle, hadoop, hive, sqoop

我在**sqoop 找到我的表的上限值**时遇到问题。它必须是**203**，但它的结果为**null ，因此****查询（粗体）**是错误的。

```
hduser@hduser:~$ sudo -u hdfs sqoop job --create testora -- import --connect jdbc:oracle:thin:@192.168.1.6:1521/DB --username SYSTEM -password Welcome123 --table employees --columns "emp_id,emp_name,emp_salary" --check-column "emp_id" --incremental "append" --last-value "200" --hive-table=oraemployees --hive-import --split-by "emp_id" --target-dir /user/hdfs/oraemployees;

13/04/15 17:35:46 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.

13/04/15 17:35:46 INFO tool.BaseSqoopTool: Using Hive-specific delimiters for output. You can override

13/04/15 17:35:46 INFO tool.BaseSqoopTool: delimiters with --fields-terminated-by, etc.
flutura@flutura:~$ sudo -u hdfs sqoop job --exec testora10

13/04/15 17:35:51 INFO manager.SqlManager: Using default fetchSize of 1000

13/04/15 17:35:51 INFO tool.CodeGenTool: Beginning code generation

13/04/15 17:35:52 INFO manager.OracleManager: Time zone has been set to GMT

13/04/15 17:35:52 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM employees t WHERE 1=0

13/04/15 17:35:52 INFO orm.CompilationManager: HADOOP_HOME is /usr/lib/hadoop

13/04/15 17:35:52 INFO orm.CompilationManager: Found hadoop core jar at: /usr/lib/hadoop/hadoop-core.jar

13/04/15 17:35:52 INFO orm.CompilationManager: Writing jar file: /tmp/sqoop-hdfs/compile/a85f9eb2e63c0150ce13f684dfab16ff/employees.jar

13/04/15 17:35:52 INFO tool.ImportTool: Incremental import based on column emp_id

13/04/15 17:35:52 INFO tool.ImportTool: **Lower bound value: 200**

13/04/15 17:35:52 INFO tool.ImportTool: **Upper bound value: null**

13/04/15 17:35:52 INFO mapreduce.ImportJobBase: Beginning import of employees

13/04/15 17:35:53 INFO db.DataDrivenDBInputFormat: BoundingValsQuery: **SELECT MIN(emp_id), MAX(emp_id) FROM employees WHERE ( emp_id > 200 AND emp_id IS NULL  )**

13/04/15 17:35:53 INFO mapred.JobClient: Running job: job_201304151528_0010

13/04/15 17:35:54 INFO mapred.JobClient:  map 0% reduce 0%

13/04/15 17:35:59 INFO mapred.JobClient:  map 100% reduce 0%

13/04/15 17:35:59 INFO mapred.JobClient: Job complete: job_201304151528_0010

13/04/15 17:35:59 INFO mapred.JobClient: Counters: 15

13/04/15 17:35:59 INFO mapred.JobClient:   Job Counters 

13/04/15 17:35:59 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=3881

13/04/15 17:35:59 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0

13/04/15 17:35:59 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0

13/04/15 17:35:59 INFO mapred.JobClient:     Launched map tasks=1

13/04/15 17:35:59 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=0

13/04/15 17:35:59 INFO mapred.JobClient:   FileSystemCounters

13/04/15 17:35:59 INFO mapred.JobClient:     HDFS_BYTES_READ=109

13/04/15 17:35:59 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=72408

13/04/15 17:35:59 INFO mapred.JobClient:   Map-Reduce Framework

13/04/15 17:35:59 INFO mapred.JobClient:     Map input records=0

13/04/15 17:35:59 INFO mapred.JobClient:     Physical memory (bytes) snapshot=125415424

13/04/15 17:35:59 INFO mapred.JobClient:     Spilled Records=0

13/04/15 17:35:59 INFO mapred.JobClient:     CPU time spent (ms)=500

13/04/15 17:35:59 INFO mapred.JobClient:     Total committed heap usage (bytes)=200998912

13/04/15 17:35:59 INFO mapred.JobClient:     Virtual memory (bytes) snapshot=1019650048

13/04/15 17:35:59 INFO mapred.JobClient:     Map output records=0

13/04/15 17:35:59 INFO mapred.JobClient:     SPLIT_RAW_BYTES=109

13/04/15 17:35:59 INFO mapreduce.ImportJobBase: Transferred 0 bytes in 7.2782 seconds (0 bytes/sec)

13/04/15 17:35:59 INFO mapreduce.ImportJobBase: Retrieved 0 records.

13/04/15 17:36:00 INFO util.AppendUtils: Creating missing output directory - oraemployees10

13/04/15 17:36:00 INFO manager.OracleManager: Time zone has been set to GMT

13/04/15 17:36:00 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM employees t WHERE 1=0

13/04/15 17:36:00 ERROR sqoop.Sqoop: Got exception running Sqoop: java.lang.NullPointerException
java.lang.NullPointerException
    at com.cloudera.sqoop.hive.TableDefWriter.getCreateTableStmt(TableDefWriter.java:177)
    at com.cloudera.sqoop.hive.HiveImport.importTable(HiveImport.java:175)
    at com.cloudera.sqoop.tool.ImportTool.importTable(ImportTool.java:394)
    at com.cloudera.sqoop.tool.ImportTool.run(ImportTool.java:455)
    at com.cloudera.sqoop.tool.JobTool.execJob(JobTool.java:233)
    at com.cloudera.sqoop.tool.JobTool.run(JobTool.java:288)
    at com.cloudera.sqoop.Sqoop.run(Sqoop.java:146)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at com.cloudera.sqoop.Sqoop.runSqoop(Sqoop.java:182)
    at com.cloudera.sqoop.Sqoop.runTool(Sqoop.java:221)
    at com.cloudera.sqoop.Sqoop.runTool(Sqoop.java:230)
    at com.cloudera.sqoop.Sqoop.main(Sqoop.java:239) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:02:15.383

您的查询是错误的：

```
SELECT 
  MIN(emp_id), 
  MAX(emp_id) FROM employees WHERE ( emp_id > 200 AND emp_id IS NULL  ) 
```

这不能返回任何合理的值，因为您要求

```
emp_id IS NULL 
```

所以它只能返回NULL。

# javascript - Jeasyui DataGrid 分页无法正常工作

> ID：16015508
> 
> 赞同：0
> 
> 时间：2013-04-15T12:46:55.883
> 
> 标签：javascript, jquery, jquery-ui

我有一个数据网格，它以“行”和“总计”的形式从数据库中获取数据，并通过 url 分配给 easy-ui Datagrid，效果很好。但是，使用 data-option="pagination:true" 添加分页会添加分页工具栏，但默认情况下它会列出所有条目，它应该只显示 10 条记录，而它会列出所有记录。

有什么办法解决这个问题？？

动作名称权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:37:30.973

你需要这样做：

`$('#dgMyTreeGrid').treegrid({`
`pagination:true,`
`pageSize:10,`（或 20 等 10 的倍数）
`...`

# uml - 可以从多个基本用例扩展一个用例吗？

> ID：16015510
> 
> 赞同：0
> 
> 时间：2013-04-15T12:47:00.683
> 
> 标签：uml, extend, use-case

我有这个用例，假设命名为 A，它本质上是用例 B 和 C 的扩展。有没有标准的方法来说明这一点？

例如这是真的吗？

![例子](https://i.stack.imgur.com/CmlSW.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:40:14.133

在 UML 中，您可以一次扩展几个主要用例而不会出现问题。

至于您提供的链接，我会将参与者连接到 B 和 C 而不是 A，因为 B 和 C 是“主要”用例。启动 A 的参与者是执行主要用例的参与者。通过这种方式，您甚至可以为 B 和 C 设置不同的参与者，当然 A 将由一个或另一个根据主要用例来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:01:16.387

一个用例扩展了 0..* 个用例，并被扩展了 0..* 个用例，但请注意箭头是从**扩展**用例向**扩展**用例绘制的。在您的图中，有一个基本（扩展）用例，即 A。

> 用例之间的扩展关系由虚线箭头表示，用例中的空心箭头提供对基本用例的扩展 [UML/2.4.1/Superstructure§16.3.3]。

# sql-server-2008 - 为所有查询结果调用 sproc 的最佳方式

> ID：16015513
> 
> 赞同：0
> 
> 时间：2013-04-15T12:47:10.587
> 
> 标签：sql-server-2008, tsql

[SQL Server 2008 标准]

我有一个存储过程，用于将新数据插入表中，它按预期工作。但是，我现在需要使用查询结果作为参数多次调用此存储过程。

例如

```
select 
   name, age, foo, bar 
from 
   sometable 
where 
   wobble = 'true'

exec insertProc name age foo bar 
```

我知道我可以使用光标来实现这一点，但我一直在读“光标很糟糕”……但我不知道还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:55:48.883

一种解决方案是使用游标。其他是在调用过程之前将结果集准备到临时表中，然后将其提供给过程（您必须通过添加表值参数作为输入参数来更改过程）。[msdn](http://msdn.microsoft.com/en-us/library/bb510489.aspx)中的一些信息。

# drupal - 在 Drupal 7 的节点模板中分别渲染链接字段 url 和标题

> ID：16015514
> 
> 赞同：2
> 
> 时间：2013-04-15T12:47:10.757
> 
> 标签：drupal, templating, theming

如果我在节点模板中打印我的链接字段，例如： [?php print render($content['field_link']); ?] 我将按照在内容类型的显示设置中设置的方式呈现此字段。

但是如果我想单独打印这个字段的 url 和标题怎么办？我可以打印出数组中的特定值，但这不是根据[http://www.computerminds.co.uk/articles/rendering-drupal-7-fields-right-way的方式](http://www.computerminds.co.uk/articles/rendering-drupal-7-fields-right-way)

在 Drupal 7 中有没有一种简单的方法可以做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-13T15:34:03.980

```
$field = field_get_items('node', $node, 'field_link');
print render($field[0]['url']);
?>" target='_blank'>View Link</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T15:40:08.197

```
$field_title = field_view_field('node', $node, 'field_link', array(
    'label'=>'hidden',
    'type'=>'link_title_plain',
));

$field_url = field_view_field('node', $node, 'field_link', array(
    'label'=>'hidden',
    'type'=>'link_plain',
));

print render($field_url);
print render($field_title); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T16:56:33.543

As your link points out, you should use:

```
$field = field_view_field('node', $node, 'field_name'); 
```

That will return the renderable array which you can dig into and grab individual pieces.

Full example:

```
$node = node_load($nid);
$field = field_get_items('node', $node, 'field_name');
$output = render(field_view_field('node', $node, 'field_name', $field[0]));
echo $output; 
```

# excel - Excel 2010 VBA 脚本

> ID：16015517
> 
> 赞同：1
> 
> 时间：2013-04-15T12:47:19.257
> 
> 标签：excel, vba

我是一个完整的 VBA 新手，但设法拼凑了以下内容，这对于我已将代码分配给命令按钮的工作表来说很好。我的问题是我的工作表有超过 3000 行，我真的不想创建 3000 个按钮。

我目前的想法是让脚本搜索一系列单元格以查找特定条件（即 TRUE），然后将我的原始代码作为与条件匹配的每个单元格的下标运行。我尝试创建一个循环来匹配正在搜索的条件，但不知道如何将结果设置为活动单元格。

谁能给我一些关于如何实现这一目标或提出更好解决方案的指示？谢谢。

```
Sub Send_FWU_to_E_Drive()

Dim aTemp As String
Dim bTemp As String
Dim cTemp As String
Dim dTemp As String
Dim eTemp As String
Dim subdir As String

aTemp = "c:\test\"
bTemp = "E:\romdata\"
cTemp = ActiveCell.Offset(, -5) & ".fwu"
dTemp = ActiveWorkbook.path
eTemp = "\Firmware files"
subdir = "\Firmware Files\" & ActiveCell.Offset(, -5) & "\" & ActiveCell.Offset(, -5) & ".fwu"

MsgBox "The path of the active workbook is " & dTemp & subdir

If Dir(dTemp & subdir) = "" Then
MsgBox "Please check the file and ensure it is suitable for firmware updating with an SD card."
Exit Sub
End If

MsgBox "The file " & cTemp & " is being copied to " & bTemp

If Dir("e:\romdata", vbDirectory) = "" Then MkDir "E:\romdata"

If Dir(bTemp & "nul") = "" Then
MsgBox "The Destination Directory is missing, please ensure your SD Card is formatted, mapped as drive E and has a romdata directory."
Exit Sub

End If

FileCopy dTemp & subdir, bTemp & cTemp

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:43:34.723

首先修改您的函数以接受范围参数，我们将其称为单元格：

```
Sub Send_FWU_to_E_Drive(cell as Excel.Range) 
```

然后`ActiveCell`将该 Sub 中的所有引用更改为`cell`.

下面的子循环遍历活动表 B 列中的每个单元格，如果为 TRUE，则使用该行 A 列中的单元格调用您的例程。因此，您在代码中的偏移量`Send_FWU_to_E_Drive`都与 A 列中的单元格相关。此代码未经测试，但应该接近：

```
Sub Test
Dim Cell as Excel.Range
Dim LastRow as Long

With ActiveSheet
    LastRow = .Range("A" & .Rows.Count).End(xlup).Row
    For Each Cell in .Range("B2:B" & LastRow) 'Search for TRUE in column B
        If Cell.Value = TRUE Then
            Send_FWU_to_E_Drive cell.Offset(0,-1) 'Column A Cell
        End If
    Next Cell
End With
End Sub 
```

编辑：根据@Siddharth 的建议，这里有一个 Find/FindNext 版本：

```
Sub Test()
Dim cell As Excel.Range
Dim LastRow As Long
Dim SearchRange As Excel.Range
Dim FirstFindAddress As String

With ActiveSheet
    LastRow = .Range("A" & .Rows.Count).End(xlUp).Row
    Set SearchRange = .Range("B2:B" & LastRow)  'Search for TRUE in column B
    Set cell = SearchRange.Find(what:=True, after:=SearchRange.Cells(1))
    If Not cell Is Nothing Then
        FirstFindAddress = cell.Address
        Send_FWU_to_E_Drive cell.Offset(0, -1)
        Do
            Send_FWU_to_E_Drive cell.Offset(0, -1)
            Set cell = SearchRange.FindNext(after:=cell)
        Loop While Not cell Is Nothing And cell.Address <> FirstFindAddress
    End If
End With
End Sub 
```

# c# - 应用程序启动时 ValidationError 出现 XamlParseException

> ID：16015518
> 
> 赞同：3
> 
> 时间：2013-04-15T12:47:22.503
> 
> 标签：c#, wpf, xaml, data-binding, validation

我创建了一个绑定了一些文本框的 WPF 应用程序。我使用验证错误来检查值是否正常。验证查找数据库以查看输入的数据是否存在。

如果我输入一个错误值，我的验证错误会捕获错误 whitout 问题:)

尽管如此，如果我输入一个好的值，并且如果我关闭我的应用程序，然后继续我的数据库删除该值，当我重新启动我的应用程序时，最新的数据会被加载，在这里......我有一个很好的崩溃： “XamlParseException”。

这个异常是因为我删除了数据中的一个值，并且当验证查找我的数据库时，找不到数据。

我不明白为什么我在启动时会崩溃，但之后不会。

**这是我的验证示例：**

```
 private string m_strCodeIntervenant;
    public string strCodeIntervenant
    {
        get { return m_strCodeIntervenant; }
        set
        {
            m_strCodeIntervenant = value;
            if (m_strCodeIntervenant.Trim() != "")
            {
                if (m_objIntervenant.ReadIntervenantCodebyCode(m_strCodeIntervenant) != 0)
                {
                    throw new ApplicationException(m_strCodeIntervenant.Trim() + " don't exist !");
                }
                FirePropertyChangedEvent("strCodeIntervenant");
            }
            else
            {
                m_objIntervenant.strNom = "";
                m_objIntervenant.strIntervenant = "";
            }
            FirePropertyChangedEvent("objIntervenant.strNom");
        }
    } 
```

这是我的验证 XAML：

```
<TextBox Grid.Column="1" Name="TextBox_Intervenant" TabIndex="2" VerticalAlignment="Center" Height="20" >
    <TextBox.Text>
        <Binding Path="strCodeIntervenant" >
            <Binding.ValidationRules>
                <ExceptionValidationRule />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox>

---------

<Style TargetType="{x:Type TextBox}">
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <DockPanel LastChildFill="True">
                    <TextBlock Margin="50,0,0,0" DockPanel.Dock="Right"
                    Foreground="Red"
                    FontSize="10pt"
                    Text="{Binding ElementName=MyAdorner,Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                    </TextBlock>
                    <Border BorderBrush="Red" BorderThickness="1">
                        <AdornedElementPlaceholder Name="MyAdorner" />
                    </Border>
                </DockPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**这是我的 XAML.cs（为了更好的视图而进行的小清理）：**

```
public partial class MainWindow : Window
{

    private void InitialiserControles()
    {
        TextBox_Description.Text = string.Empty;
        TextBox_EvtNum.Text = string.Empty;
        TimePicker_Heure.Value = null;
        TextBox_Intervenant.Text = string.Empty;
        TextBox_TypeEvenement.Text = string.Empty;
        TextBloc_Note.Text = string.Empty;
        DateTimePicker_Date.SelectedDate = DateTime.Today;
        DateTimePicker_Relance.SelectedDate = null ;
    }

    public ObservableCollection<Evenement> Collection_Evenements = new ObservableCollection<Evenement>();
    Evenement myEvenement = new Evenement();

    private void MettreAJourTableauEvenements()
    {
        Collection_Evenements = myEvenement.GetEvenementsForCliCode(App.obj_myClient.m_strCode);
        Collection_Evenements.CollectionChanged += Collection_Evenements_CollectionChanged;
        myDataGridEvenements.ItemsSource = Collection_Evenements;
    }

    public MainWindow()
    {
            InitializeComponent();

            this.DataContext = App.obj_myEvenement;

            //Load Evenement in DataGrid
            MettreAJourTableauEvenements();

    }

    private void myDataGridEvenements_SelectedCellsChanged_1(object sender, SelectedCellsChangedEventArgs e)
    {
        // Affiche le code évt sélectionné dans le tableau, dans les champs modifiable ( en haut de l'écran )

        var item = myDataGridEvenements.SelectedItem as Evenement;         
        if ((item != null))
        {
            App.obj_myEvenement.ReadEvenementebyNumero(item.strEvtNumero);
            TextBox_Description.Text = item.strDesignation;
            TextBox_EvtNum.Text = item.strEvtNumeroString;
            TextBox_Intervenant.Text = item.strCodeIntervenant;
            TextBox_TypeEvenement.Text = item.strEvtType;
            TextBloc_Note.Text = item.strNote;
            DateTimePicker_Date.SelectedDate = Evenement.ConvertToDateTimePicker(item.dDate);
            DateTimePicker_Relance.SelectedDate = Evenement.ConvertToDateTimePicker(item.dDateRelance);
            TimePicker_Heure.Value = item.dDate;
        }
    }

    private void Collection_Evenements_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == System.Collections.Specialized.NotifyCollectionChangedAction.Remove)
        {
            (e.OldItems[0] as Evenement).SupprimeEvenement();
            InitialiserControles();
        }
    }

    private void Window_Loaded_1(object sender, RoutedEventArgs e)
    {

        myDataGridEvenements.Focus();
        myDataGridEvenements.SelectedIndex = 0;
        myDataGridEvenements.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));

        Lbl_CliCodeCliDes.Content = App.obj_myClient.m_strCode.Trim() + " - " + App.obj_myClient.m_strNom.Trim();
        Lbl_CliCPostalVille.Content = App.obj_myClient.m_strCodePostal.Trim() + " - " + App.obj_myClient.m_strVille.Trim(); 

        App.obj_Parametres.LoadDataGridParams(myDataGridEvenements);

    }

    private bool IsValid(DependencyObject obj)
    {
        // return false;
        // The dependency object is valid if it has no errors, 
        //and all of its children (that are dependency objects) are error-free.
        return !Validation.GetHasError(obj)&&
        !LogicalTreeHelper.GetChildren(obj)
        .OfType<DependencyObject>()
        .Any(child => !IsValid(child));
    }

} 
```

此崩溃发生在生产“发布”或“调试模式”中。

异常是带有 InnerException = {"TELOU don't exist!"} 的 XamlParseException，而不是在文本框（警告标签）旁边显示“TELOU 不存在”，不会抛出异常。

有人有什么想法吗？

非常感谢 ：）

此致，

尼克修斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:57:06.333

作为急救，请订阅调度程序取消处理异常（最好在 App.xaml.cs 中）

Msdn 链接 - [http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx)

这将帮助您记录崩溃信息。

尝试这种方法来模板化验证启用的文本框

> ```
>  <Application.Resources>
>   <ControlTemplate x:Key="TextBoxErrorTemplate">
>     <DockPanel LastChildFill="True">
>       <TextBlock DockPanel.Dock="Right" 
>         Foreground="Orange" 
>         FontSize="12pt">!!!!</TextBlock>
>       <Border BorderBrush="Green" BorderThickness="1">
>          <AdornedElementPlaceholder />
>       </Border>
>     </DockPanel>
>   </ControlTemplate>
> </Application.Resources> 
> ```

```
<TextBox 
Validation.ErrorTemplate="{StaticResource TextBoxErrorTemplate}"> 
[...]
<TextBox> 
```

有关详细信息，请参阅本文；[http://www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation](http://www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:31:15.767

您可能在定义`m_strCodeIntervenant`字段的类的构造函数中遇到崩溃。也许某些东西正在使用先前缓存的“好”值，并通过直接设置该字段来绕过验证。

在那里设置断点并分析发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:03:09.600

XAML 不显示异常，仅在输出窗口中显示。

您的代码抛出错误，但仅显示在输出窗口中。

当异常发生在控件的初始化时，它无法处理并破坏应用程序。

不要抛出异常自己处理错误。

# javascript - 在匹配正则表达式中的空格字符之前匹配字母 - Javascript

> ID：16015521
> 
> 赞同：2
> 
> 时间：2013-04-15T12:47:26.893
> 
> 标签：javascript

我有这个正则表达式 -:`/@[a-zA-Z ]+/g;` 显然，这将匹配`@abs`以及匹配
`@ abs`。但我不希望后者匹配，因为它在 a`space character`之前有 a `letter`。我的正则表达式应该只匹配那些以字母开头的空格。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T12:52:58.107

放在`[a-zA-Z]`@之后会强制在那里写一封信： `/@[a-zA-Z][a-zA-Z ]*/g;`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T12:53:37.487

您在 Z 之后不小心在正则表达式中添加了一个空格

/@[a-zA-Z]/

# log4j - Weblogic 写入旋转文件

> ID：16015528
> 
> 赞同：0
> 
> 时间：2013-04-15T12:47:49.857
> 
> 标签：log4j, weblogic, cluster-computing

在我们的集群项目中，我们有 2 台机器，每台机器都有 3 个基于 Weblogic Server 8.1 上的 Spring MVC 1.2.8、Log4J 1.2 和 JDK 1.4 的 Web 应用程序实例。每台机器都有一个日志位置。3 个实例写入同一个文件。

一位系统管理员意识到，在日志文件旋转后，应用程序会同时写入旋转文件和原始文件。

有什么问题？

这是我们的 Log4J.xml 配置：

```
#----------------------------------------------------------
#
# Set root logger levels and attach appenders
#
#----------------------------------------------------------

log4j.rootLogger=WARN

#----------------------------------------------------------
#
# Define and configure appenders
#
#----------------------------------------------------------

log4j.appender.MY_CONSOLE_1 = org.apache.log4j.ConsoleAppender
log4j.appender.MY_CONSOLE_1.layout = org.apache.log4j.PatternLayout
log4j.appender.MY_CONSOLE_1.layout.ConversionPattern = %-5p %c{2} %x - %m%n

log4j.appender.MY_LOG_FILE_1 = org.apache.log4j.RollingFileAppender
log4j.appender.MY_LOG_FILE_1.File = /logs/appdomain/application/application.log
log4j.appender.MY_LOG_FILE_1.MaxFileSize = 10000KB

log4j.appender.sendFile = org.apache.log4j.DailyRollingFileAppender
log4j.appender.sendFile.File = /logs/appdomain/application/WS.log
log4j.appender.sendFile.DatePattern = '.'yyyy-MM-dd
log4j.appender.sendFile.layout = org.apache.log4j.PatternLayout
log4j.appender.sendFile.layout.ConversionPattern = %m%n

# Keep one backup file
log4j.appender.MY_LOG_FILE_1.MaxBackupIndex = 10
log4j.appender.MY_LOG_FILE_1.layout = org.apache.log4j.PatternLayout
log4j.appender.MY_LOG_FILE_1.layout.ConversionPattern = %p %d %c - %m%n

#----------------------------------------------------------
#
# Attach appenders and set trace levels for each base
# package. Siblings will inherit appenders and trace level.
#
#----------------------------------------------------------

log4j.category.com = WARN, MY_CONSOLE_1
#------------------------------------------------------------
# to avoid duplicate logging
#------------------------------------------------------------
log4j.additivity.com=false
log4j.category.jsp = WARN, MY_CONSOLE_1
log4j.category.applicationException = WARN, MY_CONSOLE_1, MY_LOG_FILE_1

#----------------------------------------------------------
#
# Overide trace levels for individual sub-packages of
# interest.
#
#----------------------------------------------------------

log4j.category.com.application = WARN,  MY_LOG_FILE_1
log4j.category.WSLOG = INFO,sendFile
log4j.category.org.apache.axis = WARN,MY_LOG_FILE_1 
```

# php - 如何以相同的形式使用 html_select_date （智能功能）两次？

> ID：16015530
> 
> 赞同：0
> 
> 时间：2013-04-15T12:47:57.677
> 
> 标签：php, smarty, smarty3

我`html_select_date`在表单中使用了 smarty 函数两次。开始日期和结束日期。但是这个函数自己创建了一个名字。我找到了如何设置 ID，就像 month_id 但我不知道如何设置名称。

> {html_select_date start_year=1970 month_format="%b" field_order="dmy" field_array="date" prefix="" day_id="edd" class='sd_class' month_id="edm" year_id="edy" year_empty="Year" month_empty="月" day_empty="日" 时间=$edate }

我怎样才能`html_select_date`在同一个中使用两个？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T15:59:05.377

您也可以使用 prefix="date_widget_1_" 和 prefix="date_widget_2_"...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:33:22.173

我已经得到了这个问题的解决方案。更改 field_array 参数值。

现在它以数组名称日期返回日期。如果我将其更改为两个 sdate 的开始日期和 edate 的结束日期，它将解决问题。

> {html_select_date start_year=1970 month_format="%b" field_order="dmy" field_array="sdate" prefix="" day_id="edd" class='sd_class' month_id="edm" year_id="edy" year_empty="Year" month_empty="月" day_empty="日" 时间=$edate }

# magento - 从皮肤文件夹 Magento 调整模板图像的大小

> ID：16015532
> 
> 赞同：0
> 
> 时间：2013-04-15T12:48:03.077
> 
> 标签：magento

我想从 \skin\frontend\\default\images 位置显示调整大小的图像。现在我正在使用简单的 `<img src="<?php echo $this->getSkinUrl('images/free_shipping.png')?>" alt="Free Shipping" />` 任何人都可以告诉我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:44:42.133

默认情况下，magento 仅允许您调整目录图像的大小，但您可以创建自己的功能来调整皮肤图像的大小。见[http://magedev.com/2009/08/16/magento-image-manipulation/](http://magedev.com/2009/08/16/magento-image-manipulation/)

```
$fileName = 'skin\frontend\default\default\images\media\col_left_callout.jpg';

$image = new Varien_Image($fileName);

// this function accepts integer, hexadecimal format is more convenient for me
$image->setImageBackgroundColor(0xFFFFFF);

$image->resize(250);

// this will generate proper headers for transformed image so don't use this method if you plan to display any other content
$image->display();

// Magento will attempt to create missing directories
$image->save('media/myimages/myTransformedImage.jpg'); 
```

另见

*   [http://subesh.com.np/2009/11/image-resize-magento-cache-resized-image/](http://subesh.com.np/2009/11/image-resize-magento-cache-resized-image/)

# python - 在一条线上得到n个点

> ID：16015533
> 
> 赞同：2
> 
> 时间：2013-04-15T12:48:06.040
> 
> 标签：python, geospatial

如果我有一条由起点和终点坐标定义的线，那么在考虑地球曲率的情况下，如何在该线上获得 n 个等距点？

我正在寻找一种算法和/或实现此功能的 python 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:51:36.783

使用[geolib](https://pypi.python.org/pypi/geographiclib)， GeographicLib 的 python 实现，我能够做到这一点：

```
from geographiclib.geodesic import Geodesic

number_points = 10

gd = Geodesic.WGS84.Inverse(35, 0, 35, 90)
line = Geodesic.WGS84.Line(gd['lat1'], gd['lon1'], gd['azi1'])

for i in range(number_points + 1):
    point = line.Position(gd['s12'] / number_points * i)
    print((point['lat2'], point['lon2'])) 
```

输出：

```
(35.0, -7.40353472481637e-21)
(38.29044006500327, 7.8252809205988445)
(41.01134777655358, 16.322054184499173)
(43.056180665524245, 25.451710440063902)
(44.328942450747135, 35.08494460239694)
(44.76147256654079, 45.00000000000001)
(44.328942450747135, 54.91505539760305)
(43.05618066552424, 64.54828955993611)
(41.01134777655356, 73.67794581550085)
(38.290440065003274, 82.17471907940114)
(34.99999999999999, 90.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-10T10:21:59.260

您可以使用 pyproj 的 Geod 类中的 npts 方法。见 [https://jswhit.github.io/pyproj/pyproj.Geod-class.html](https://jswhit.github.io/pyproj/pyproj.Geod-class.html)

> 给定一个初始点和终点（由 python floats lon1,lat1 和 lon2,lat2 指定），返回一个经度/纬度对列表，描述沿初始点和终点*之间的测地线等间距的 npts 中间点。*

强调我的，因为我一开始就错过了。

首先，您创建一个 Geod 实例，指定您希望它使用的椭球体。然后就可以调用该方法了。

```
from pyproj import Geod
geod = Geod("+ellps=WGS84")
points = geod.npts(lon1=-89.6627, 
                   lat1=39.7658, 
                   lon2=147.2800, 
                   lat2=-42.8500, 
                   npts=100
                  ) 
```

`points`现在是起点和终点之间的测地线上的元组列表：

```
[(-91.27649937899028, 39.21278457275204),
 (-92.86468478264302, 38.6377120347621),
 (-94.42723159402209, 38.04136774269571),
 (-95.96421169120758, 37.42453136174509),
 (-97.47578514283185, 36.78797425216882),
... 
```

# css - HTA - Windows Gadget 弯曲边缘

> ID：16015539
> 
> 赞同：1
> 
> 时间：2013-04-15T12:48:26.893
> 
> 标签：css, windows, vbscript, hta, windows-desktop-gadgets

我刚刚为 Windows Gadget 编写了一个基本脚本，该脚本可以安静地运行，直到它识别出更改。我遇到的一个问题是我想把这个小工具装起来并有弯曲的边缘。我尝试使用删除角的 png 图像，但它不起作用，它总是显示为一个方形框。我也尝试过通过 CSS 做到这一点，但我似乎无法弄清楚。

有谁知道如何在 HTA/CSS/VBScript 中创建弯曲边缘？我不确定它需要在哪里发生，它是一个小工具。

非常感谢。

//编辑

这是整个代码：

```
<html>
<head>
 <title>Chrome Version Checker</title>
<HTA:APPLICATION
 APPLICATIONNAME="Chrome Version Checker"
 ID="ChromeCheck"
 VERSION="1.0.0.0"
 BORDER="thin"
 BORDERSTYLE="complex"
 ICON="chrome_updater_256px.ico"
 SCROLL="no"
 SINGLEINSTANCE="yes"
 CONTEXTMENU="no"
 NAVIGABLE="yes"
 SELECTION="no"/>
<script language="vbscript"> 
Dim timerID, CurrentTime
Sub Window_OnLoad
  timerID = window.setInterval("RefreshTime", 360000) 'milliseconds
  RefreshTime
End Sub
self.ResizeTo 190,194
 </script>
<style type="text/css">
body
{
    margin: 0;
width: 130px;
height: 134px;
}
span
 {   text-align:center;
font-family: arial;
font-weight: bold;
font-size: 12px;
}
 </style>
</head>
<body>
<table align="center">
<tr>
<td>
<span>Installed File</span>
<br />
<span id = "InstallFile"></span>
</td>
</tr>
<tr>
<td colspan="2">
<hr>
</td>
</tr>
<tr>
<td>
<span>Remote File</span>
<br />
<span id = "RemoteFile"></span>
</td>
</tr>
<tr>
<td colspan="2">
<br /><span id = "StatusMSG"></span>
</td>
</tr>
</table>
</body>
<html>
<SCRIPT LANGUAGE="VBScript">
Sub RefreshTime
set xmlhttp = createobject ("msxml2.xmlhttp.3.0")
xmlhttp.open "get", "http://en.wikipedia.org/wiki/Google_Chrome", false
xmlhttp.send
strOutput = split(xmlhttp.responseText,"Stable release</a>")(1)
strOutput = split(strOutput," <small>")(0)
strOutput = replace(replace(strOutput,vbcr,""),vblf,"")
strOutput = split(strOutput,"<p>")(1)
    Dim File
    set FSO = CreateObject("Scripting.FileSystemObject")     
    File = FSO.GetFileVersion("C:\Program Files\Google\Chrome\Application\chrome.exe")
    if File = strOutput Then
        InstallFile.InnerHTML = File
        RemoteFile.InnerHTML = strOutput
        StatusMSG.InnerHTML = "Up to date"
        document.body.background="tick.png"
        document.body.style.backgroundPosition = "center"
        document.body.style.backgroundRepeat = "no-repeat"
    else
        InstallFile.InnerHTML = File
        RemoteFile.InnerHTML = strOutput
        StatusMSG.InnerHTML = "Not up to date"
        document.body.background="cross.jpg"
        ' ---------------------------------------
        Set xmlDoc = CreateObject("Microsoft.XMLDOM")
        xmlDoc.load "\\s007\Global\IT\ChromeStandaloneSetup.xml"
        xmlDoc.Async = "False"
        Set nNode = xmlDoc.selectsinglenode ("//ChromeUpdater/Config/Version")
        nNode.text = strOutput
        strResult = xmldoc.save("\\s007\Global\IT\ChromeStandaloneSetup.xml")
        ' ---------------------------------------           
        Dim iURL 
        Dim objShell
        iURL = "https://dl.google.com/tag/s/appguid%3D%7B8A69D345-D564-463C-AFF1-A69D9E530F96%7D%26iid%3D%7B8DD6B5B9-54BE-D8AD-7E05-FBA19DDAA0B0%7D%26lang%3Den%26browser%3D4%26usagestats%3D0%26appname%3DGoogle%2520Chrome%26needsadmin%3Dtrue%26installdataindex%3Ddefaultbrowser/update2/installers/ChromeStandaloneSetup.exe"
        set objShell = CreateObject("Shell.Application")
        ' --------------------------
        objShell.ShellExecute "chrome.exe", iURL, "", "", 1
        '---------------------------

        Ret = Msgbox("Do you wish to update now?",VBYesNo,"Update Now")
        If Ret = 6 then             
            Set objShell = WScript.CreateObject( "WScript.Shell" )
            objShell.Run("""C:\Program Files\Chrome Updater\ChromeUpdateV2.exe""")
            Set objShell = Nothing

        else    

        End If
End If  
 End Sub
 </SCRIPT> 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:55:51.620

这是我如何使用 CSS 在 HTA 中圆角的示例。

```
<html>
<head>
    <title>Rounded Corners</title>

    <HTA:APPLICATION
    APPLICATIONNAME="Rounded Corners"
    ID="RestoreHta"
    VERSION="1.0"
    BORDER="dialog"
    BORDERSTYLE="complex"
    INNERBORDER="no"
    SCROLL="no"
    CONTEXTMENU="no"/>

<style type="text/css">

    .b1f, .b2f, .b3f, .b4f{font-size:1px; overflow:hidden;display:block;}
    .b1f {height:1px; background:#ddddbb; margin:0 5px}
    .b2f {height:1px; background:#ddddbb; margin:0 3px}
    .b3f {height:1px; background:#ddddbb; margin:0 2px}
    .b4f {height:2px; background:#ddddbb; margin:0 1px}
    .cf {background: #ddddbb}
    .cf div {margin-left: 5px;}
#DataOptions {
    background-color: #ddddbb;
    width: 100%;
    padding: 1.1em;
}

</style>

<SCRIPT Language="VBScript">

Sub Window_Onload
self.ResizeTo 300,300
End Sub

</SCRIPT>       

</head>

<body>
<b class="b1f"></b><b class="b2f"></b><b class="b3f"></b><b class="b4f"></b><div class="cf"><div>
    <div id="DataOptions">
        <table width="100%" height="100">
            <tr>
                <td bwidth="100%"><center>Rounded Corners</center></td>
            </tr>
        </table>
    </div>

    </div></div><b class="b4f"></b><b class="b3f"></b><b class="b2f"></b><b class="b1f"></b>

</body>
</html> 
```

# grails - 如何在 Grails 中正确加载外部 JSP taglib

> ID：16015540
> 
> 赞同：2
> 
> 时间：2013-04-15T12:48:27.540
> 
> 标签：grails, jsp-tags, taglib, smartclient

我正在尝试将 Isomorphic SmartClient 与 Grails 集成。SmartClient 服务器有一些用 xml 文件描述的自定义 JSP 标签库（它是基于架构 web-jsptaglibrary_1_1.dtd 的 TLD 文件）。

我在类路径中有适当的 jar，只是为了测试 Grails 应用程序 web-app 目录中的两个类似文件。第一个是 w00t.jsp：

```
<%@ taglib uri="/WEB-INF/iscTaglib.xml" prefix="isc" %>
<html>
<body>
<pre>
    <isc:loadDMIStubs ID="ko" />
</pre>
<%= "w00t" %>
</body>
</html> 
```

第二个是 dafaq.gsp

```
<%@ taglib uri="/WEB-INF/iscTaglib.xml" prefix="isc" %>
<html>
<body>
<pre>
    <isc:loadDMIStubs ID="ko" />
</pre>
<%= "dafaq" %>
</body>
</html> 
```

当我通过浏览器加载这些文件时，JSP 会按预期工作并执行标记。但是，当我尝试调用 GSP 文件时，会引发异常：

```
org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException
Unknown JSP tag isc:loadDMIStubs 
```

根据 Grails 文档，这应该可以工作，不是吗？

# sdk - 我可以同时从官方 Kinect SDK 获取校准后的图像和骨架吗？

> ID：16015545
> 
> 赞同：0
> 
> 时间：2013-04-15T12:48:43.527
> 
> 标签：sdk, colors, kinect, depth

基本上，我只想要这三样东西。

颜色、深度和骨架。但我也希望深度和颜色对齐。

我知道在官方示例中，有 GreenScreen.cpp，它是深度/颜色剪切的示例，但没有骨架。还有 SkeletonBasics，它有一个骨架，但没有图像。

我已经尝试向他们学习并一起实现它们，但是当骨架准备好时我从来没有收到回调（这个：m_hNextSkeletonEvent）。

**SkeletonBasics.cpp 使用这个：**

```
 hEvents[0] = m_hNextSkeletonEvent;

    // Check to see if we have either a message (by passing in QS_ALLEVENTS)
    // Or a Kinect event (hEvents)
    // Update() will check for Kinect events individually, in case more than one are signalled
    DWORD dwEvent = MsgWaitForMultipleObjects(eventCount, hEvents, FALSE, INFINITE, QS_ALLINPUT);

    // Check if this is an event we're waiting on and not a timeout or message
    if (WAIT_OBJECT_0 == dwEvent)
    {
        Update();
    } 
```

**GreenScreen.cpp 使用这个：**

```
 hEvents[0] = m_hNextDepthFrameEvent;
    hEvents[1] = m_hNextColorFrameEvent;

    // Check to see if we have either a message (by passing in QS_ALLINPUT)
    // Or a Kinect event (hEvents)
    // Update() will check for Kinect events individually, in case more than one are signalled
    DWORD dwEvent = MsgWaitForMultipleObjects(eventCount, hEvents, FALSE, INFINITE, QS_ALLINPUT);

    // Check if this is an event we're waiting on and not a timeout or message
    if (WAIT_OBJECT_0 == dwEvent || WAIT_OBJECT_0 + 1 == dwEvent)
    {
        Update();
    } 
```

但是，就像我说的，将它们结合起来不会产生

如果（WAIT_OBJECT_0 == WaitForSingleObject（m_hNextSkeletonEvent，0））

正在发生。（KinectBridgeWithOpenCVBasics-D2D 也有骨架、颜色和深度，但仍然是未对齐的[（就像我在搜索中找到的这个例子）](http://social.msdn.microsoft.com/Forums/getfile/64206)。

你知道为什么事件没有触发吗？或者您是否知道某个地方拥有所有这些能力的例子？我搜索了高低，我尝试了很多不同的东西来弄乱这些例子，但我似乎无法理解。

谢谢你的帮助。

编辑：在 KinectBridgeWithOpenCVBasics 结束时，我留下了一个 m_colorMat 和一个 m_depthMat。即使那时我可以将深度与颜色对齐，我认为这会很好。

# multipartform-data - 如何使用 Postman 发送多部分/表单数据请求

> ID：16015548
> 
> 赞同：743
> 
> 时间：2013-04-15T12:48:47.637
> 
> 标签：multipartform-data

我目前正在使用 Chrome Addon Postman - REST Client 轻松创建 POST / GET 请求。

现在我想调试一个上传脚本，我正在**寻找一种将请求编码为“multipart/form-data”的方法**，以便我也可以发送一个文件。

* * *

## 回答 #1

> 赞同：1613
> 
> 时间：2013-04-15T18:26:44.823

**更新：**我创建了一个[关于发送多部分/表单数据请求的视频，](https://youtu.be/c07IsbSNqfI)以更好地解释这一点。

* * *

实际上，[Postman](https://www.postman.com)可以做到这一点。

[![在此处输入图像描述](https://i.stack.imgur.com/955xK.png)](https://i.stack.imgur.com/955xK.png)

完整示例：

[![在此处输入图像描述](https://i.stack.imgur.com/cjZPw.png)](https://i.stack.imgur.com/cjZPw.png)

您不需要添加任何标题，Postman 会自动为您完成。

[![在此处输入图像描述](https://i.stack.imgur.com/DT7tH.png)](https://i.stack.imgur.com/DT7tH.png)

确保您查看来自@maxkoryukov 的评论

> 小心使用显式 Content-Type 标头。更好 - 不要设置它的值，邮递员足够聪明，可以为您填写此标题。但是，如果你想设置 Content-Type: multipart/form-data - 不要忘记[边界字段](http://stackoverflow.com/a/20321259/1115187)。

* * *

## 回答 #2

> 赞同：238
> 
> 时间：2017-01-03T03:25:49.177

通常的错误是尝试将其放入`Content-Type: {multipart/form-data}`post 请求的标头中。那会失败，最好让Postman为你做。例如：

**建议通过邮递员加载** [![身体的一部分](https://i.stack.imgur.com/kAIrb.png)](https://i.stack.imgur.com/kAIrb.png)

**如果在标题中失败** [![常见错误](https://i.stack.imgur.com/vA0se.png)](https://i.stack.imgur.com/vA0se.png)

**作品** [![应该从标题中删除内容类型](https://i.stack.imgur.com/08wZj.png)](https://i.stack.imgur.com/08wZj.png)

# visual-studio-2010 - AnkhSVN 看到最近的变化

> ID：16015550
> 
> 赞同：2
> 
> 时间：2013-04-15T12:48:53.083
> 
> 标签：visual-studio-2010, svn, ankhsvn

我刚刚安装了 AnkhSVN，效果很好，我只有一个问题。如果项目中的其他人对文件进行了更改，我是否可以在不更新项目的情况下看到这一点？如果我在解决方案资源管理器中更改该文件上的某个小红框，当 SVN 上的文件是我本地副本上的更新版本时，有没有办法获得类似的东西？万一这不起作用。无论如何，是否可以查看自上次更新以来所做的所有更改。所以我可以跟踪项目中发生的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T18:50:59.630

在“Pending Changes”窗口中有一个名为“Recent Changes”的选项卡，这有助于实现这一点。另见[http://ankhsvntips.net/post/1478971385/recent-changes-auto-refresh](http://ankhsvntips.net/post/1478971385/recent-changes-auto-refresh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T19:05:00.157

我建议使用 Google Code 项目。这样，您可以直接在项目的 Google 网站上轻松跟踪项目的任何更新或成员。

设置 Google 代码项目非常简单且非常直接。由于您已经在 Visual Studio 上安装了 AnkhSVN，唯一的办法就是将 Google Code 项目链接到您的本地项目。

您可以将此作为指南：[使用 Visual Studio 和 AnkhSVN 的 Google 代码项目](https://code.google.com/p/bilpool/wiki/ConfigureAnkhSVNForVisualStudio)

# sql - 条件 AND OR 与 Drupal db_select

> ID：16015556
> 
> 赞同：3
> 
> 时间：2013-04-15T12:49:03.967
> 
> 标签：sql, drupal-7, conditional-statements, where

嗨我怎么能在drupal中做这样的条件？

```
WHERE (date = xxx and time = xxx) OR (date = xxx and time = xxx) 
```

我想用 db_select 做这个条件。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T13:04:51.053

thx 快速回答，我刚刚找到它。

这是我的解决方案：

```
$and_1 = db_and()->condition('b.date' , $date, '=')->condition('b.time', $begin_time, '>');
$and_2 = db_and()->condition('b.date' , $tomorrow, '=')->condition('b.time', '00:00', '>=')

$query->condition(db_or()->condition($and_1)->condition($and_2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:57:50.090

像这样：

```
$query = db_select('yourtable', 't');
$query->condition(db_or()->condition(db_and()->condition('t.date', xxx, '=')->condition('t.time', xxx, '='))
                         ->condition(db_and()->condition('t.date', xxx, '=')->condition('t.time', xxx, '='))); 
```

# sql - 将数值 (19,16) 转换为数据类型数值 (19,19) 的算术溢出

> ID：16015561
> 
> 赞同：0
> 
> 时间：2013-04-15T12:49:22.983
> 
> 标签：sql, database

尝试做一些非常微不足道的事情（将类型为 numeric(19, 16) 的列转换为 numeric(19, 19)，但不断收到算术溢出错误。

```
ALTER TABLE X
  ALTER COLUMN Column1 numeric(19,19) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:01:25.440

你有不适合的数据`numeric(19,19)`——你想如何“修复”这取决于你——但你需要检查不适合的数据并决定如何处理它。

如果所有数据都适合，它将运行良好：

```
create table X (Column1 numeric(19,16))
create table Y (Column1 numeric(19,16))
insert into X(Column1) values (0.1)
insert into Y(Column1) values (1.0) 
```

这有效：

```
ALTER TABLE X
  ALTER COLUMN Column1 numeric(19,19) 
```

这会产生错误：

```
ALTER TABLE Y
  ALTER COLUMN Column1 numeric(19,19) 
```

因为您不能将具有任何整数部分的数字放入`numeric(19,19)`.

如果要查找不适合更改后的列定义的值，请先运行：

```
SELECT * FROM X where ABS(Column1) >= 1.0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:05:34.280

NUMERIC(19,19) 表示您有 19 位数字，所有 19 位都在小数点后面 - 所以您可以存储的最大数字是 0.99999999999999999999（0 后面 19 个 9。）

因此，如果在您的 NUMERIC (19,16) 列中有任何大于或等于 1 的值 - 它将无法将其转换为 (19,19)。

NUMERIC (19,16) 可以存储小数点后三位和后面的 16 - 使 999.9999999999999999 成为可能的最大数字。

例如，这将起作用：

```
DECLARE @a NUMERIC(19,16)
SET @a = 0.1234567890123456
SELECT CAST (@a AS NUMERIC(19,19)) 
```

这不会：

```
DECLARE @b NUMERIC(19,16)
SET @b = 123.1234567890123456
SELECT CAST (@b AS NUMERIC(19,19)) 
```

也不是这个：

```
SELECT CAST (1 AS NUMERIC(19,19)) 
```

编辑： Damien_The_Unbeliever 发布了一个不错的选择来检查不适合 (19,19) 的行，如果你真的想转换为 NUMERIC (19,1)，你应该使用它 - 但是，我猜你不真的想转换为 (19,19) 而是保留您的数据并仅添加 3 位精度 - 即 NUMERIC(22,19)

# yii - 将数据从 DB 插入 URL 管理器

> ID：16015563
> 
> 赞同：0
> 
> 时间：2013-04-15T12:49:25.590
> 
> 标签：yii

我希望 URL 管理器使用我的 CompanyController 处理带有公司名称的 URL。要动态地这样做，我应该从我的数据库中获取公司名称。现在我有这样的规则（但它不是动态的）：

```
 '<alias:(vector|karnasch|tecnomagnete|ruko|bds-maschinen|exact)>' => 'company/view', 
```

(vector|karnasch|tecnomagnete|ruko|bds-maschinen|exact) --> 我想从数据库中获取这一行的数据。

我可以获得这些数据（手动建立与数据库的连接），但也许它是另一个更漂亮的解决方案，借助 Yii 功能。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:23:16.760

好吧，你不需要这样做，你只需要定义正确的模式，例如：

```
'contact' => 'contact/form',
// other rules should be set before this one
'<alias:[-\w]+>' => 'company/view', 
```

[http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-named-parameters](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-named-parameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:25:20.853

您始终可以创建您的[自定义`UrlRule`类](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-custom-url-rule-classes)。如果您只想解析传入的 URL，您可以简单地`false`从该`createUrl()`方法返回。在该`parseUrl()`方法中，您查询数据库以获取您的公司名称并检查当前 URL 是否匹配。如果没有，您只需`false`再次返回。

# php - 我需要获取所有浏览器信息，如操作系统、操作系统、IP、城市等？

> ID：16015568
> 
> 赞同：1
> 
> 时间：2013-04-15T12:49:37.437
> 
> 标签：php, browser

我需要以下网址中的所有信息

[http://thetutlage.com/demo/tut_analytics/](http://thetutlage.com/demo/tut_analytics/)

谁能告诉我在 php 中的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T12:51:49.447

[您可以从$_SERVER](http://php.net/manual/en/reserved.variables.server.php)全局数组中获取大量信息。

IP地址：`$_SERVER['REMOTE_ADDR']`

浏览器/操作系统/版本：`$_SERVER['HTTP_USER_AGENT']`

要从 IP 中获取城市或其他一些地理信息，请在 Google 中搜索“地理 IP”。关于地理 IP 的快速说明：它不防水。它是一个带有 IP 地址及其位置的托管数据库。新的 IP 范围或移动的（“二手”）IP 地址可能不在（或不正确）数据库中。例如，尤其是 IPv6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:50:43.550

$_SERVER 超全局是您的解决方案-> [http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:54:06.137

您需要使用 Maxmind geoip 数据库来获取城市/国家/地区： [http ://dev.maxmind.com/geoip/downloadable](http://dev.maxmind.com/geoip/downloadable)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T13:07:27.183

从一个来源获取所有信息是不可能的。

您可以使用此库获取有关用户操作系统及其版本和其他详细信息的信息

[https://github.com/GaretJax/phpbrowscap/](https://github.com/GaretJax/phpbrowscap/)。

您可以使用以下方式获取用户设备信息：

```
$browscap = @new Browscap(sys_get_temp_dir());
$device_details = $browscap->getBrowser(); 
```

以上将输出：

```
stdClass Object
(
    [browser_name] => Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31
    [browser_name_regex] => ^mozilla/5\.0 \(.*windows nt 6\.2.*wow64.*\) applewebkit/.* \(khtml, like gecko\).*chrome/26\..*safari/.*$
    [browser_name_pattern] => Mozilla/5.0 (*Windows NT 6.2*WOW64*) AppleWebKit/* (KHTML, like Gecko)*Chrome/26.*Safari/*
    [Parent] => Chrome 26.0
    [Platform] => Win8
    [Platform_Version] => 6.2
    [Win32] => 
    [Win64] => 1
    [Comment] => Chrome 26.0
    [Browser] => Chrome
    [Version] => 26.0
    [MajorVer] => 26
    [MinorVer] => 0
    [Beta] => 1
    [Frames] => 1
    [IFrames] => 1
    [Tables] => 1
    [Cookies] => 1
    [JavaScript] => 1
    [JavaApplets] => 1
    [CssVersion] => 3
    [Alpha] => 
    [Win16] => 
    [BackgroundSounds] => 
    [VBScript] => 
    [ActiveXControls] => 
    [isMobileDevice] => 
    [isSyndicationReader] => 
    [Crawler] => 
) 
```

PHP 有一个内置函数`get_browser()`可以做同样的事情。然后你必须浏览 ini 指令。

如果你想获取用户 IP，那么你可以从 $_SERVER 变量中获取

```
$ip_address = $_SERVER["REMOTE_ADDR"]; 
```

如果你想知道用户的城市、国家等，那么你可以使用你从那里获得的 IP`$_SERVER["REMOTE_ADDR"]`来获取这些。你可以使用这些：

*   [http://www.maxmind.com/app/geolitecity](http://www.maxmind.com/app/geolitecity)
*   [http://www.geoplugin.net/xml.gp?ip=users_Ip](http://www.geoplugin.net/xml.gp?ip=users_Ip)
*   [http://smart-ip.net/geoip-api](http://smart-ip.net/geoip-api)
*   [http://dev.maxmind.com/geoip/geolite](http://dev.maxmind.com/geoip/geolite)
*   [http://briancray.com/posts/find-web-visitors-location-javascript-google-api/](http://briancray.com/posts/find-web-visitors-location-javascript-google-api/)

希望这些对你有帮助:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T13:07:57.493

您无法在一处获得所有信息。

`$_SERVER`在包括客户端浏览器中可以找到一些信息。您可以使用此信息来获取有关客户端的更多详细信息：

```
echo $_SERVER['HTTP_USER_AGENT'] . "\n\n";
$browser = get_browser(null, true);
print_r($browser); 
```

上面的示例将输出类似于：

```
Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040803 Firefox/0.9.3

Array
(
    [browser_name_regex] => ^mozilla/5\.0 (windows; .; windows nt 5\.1; .*rv:.*) gecko/.* firefox/0\.9.*$
    [browser_name_pattern] => Mozilla/5.0 (Windows; ?; Windows NT 5.1; *rv:*) Gecko/* Firefox/0.9*
    [parent] => Firefox 0.9
    [platform] => WinXP
    [browser] => Firefox
    [version] => 0.9
    [majorver] => 0
    [minorver] => 9
    [cssversion] => 2
    [frames] => 1
    [iframes] => 1
    [tables] => 1
    [cookies] => 1
    [backgroundsounds] =>
    [vbscript] =>
    [javascript] => 1
    [javaapplets] => 1
    ...
) 
```

用户位置等一些信息更难获得。

要获取用户位置，您可以尝试使用 geoip lib 或使用 ajax 并通过 javascript 嗅探数据。

这两种方法都在 SO 上进行了深入介绍，所以我将向您指出搜索结果，祝您好运；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T12:50:57.033

看看php函数。

对于 IP 地址

```
 $_SERVER['REMOTE_ADDR']; 
```

同样，您具有所有其他功能来获取这些值

```
$_SERVER 
```

多变的。

# mysql - 在navicat创建数据库时出错

> ID：16015572
> 
> 赞同：1
> 
> 时间：2013-04-15T12:49:43.600
> 
> 标签：mysql, ruby-on-rails, mysql2, navicat

我正在尝试使用 navicat 创建一个 mysql 数据库，但是当我尝试链接到它时，它给了我一个错误：

```
'connect': Unknown database 'hello' (Mysql2::Error) 
```

（[见图](http://snag.gy/WiUpO.jpg)）

或者当我在终端中搜索现有数据库时（[见图](http://snag.gy/WiUpO.jpg)），它们并没有全部显示出来。不知道我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:22:36.500

在您很可能有超过 1 个 MySQL 实例运行广告之前，我遇到了这个错误，您的每个应用程序都在链接/访问不同的应用程序。尝试

```
mysqld stop 
```

或者

```
sudo mysqld stop 
```

然后尝试重新启动两个应用程序，您现在应该可以使用 navicat 创建数据库并使用终端找到它

# wpf - WPF：展开/折叠 ListView 中的项目

> ID：16015574
> 
> 赞同：2
> 
> 时间：2013-04-15T12:49:49.387
> 
> 标签：wpf, listview, expandablelistview

我有以下列表视图：

![没有层次结构的 ListView](https://i.stack.imgur.com/1UMkI.png)

单击父行中的红色按钮时，我想显示从属行。通过第二次单击，应再次隐藏行。

我是 WPF 的新手，不知道 1.如何获得可扩展/可折叠的行和 2.如何在父行和子行之间创建关系。

我的 XAML 如下：

```
<ListView Name="lvUpgrade">
    <ListView.View>
        <GridView>
            <GridViewColumn Width="20px">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Image Source="{Binding Path=Icon}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Width="75px" DisplayMemberBinding="{Binding Path=Time, StringFormat={}{0:HH:mm:ss}}" />
            <GridViewColumn Width="300px" Header="Nachricht" DisplayMemberBinding="{Binding Path=Message}" />
        </GridView>
    </ListView.View>
</ListView> 
```

后面的代码：

```
Public Class Upgrade

    Public Sub AddMessage(ByVal message As Message)
        Me.lvUpgrade.Items.Add(message)
    End Sub

    Public Class Message

        Public Enum MessageType

            Normal
            Information
            Success
            Warning
            [Error]
        End Enum

        Public Sub New(ByVal type As MessageType, ByVal message As String)
            _Type = type
            _Message = message
        End Sub

        Private _Type As MessageType = MessageType.Normal
        Public ReadOnly Property Type As MessageType
            Get
                Return _Type
            End Get
        End Property

        Private _Message As String = String.Empty
        Public ReadOnly Property Message As String
            Get
                Return _Message
            End Get
        End Property

        Private _Time As DateTime = Now
        Public ReadOnly Property Time As DateTime
            Get
                Return _Time
            End Get
        End Property

        Public ReadOnly Property Icon As BitmapImage
            Get
                Select Case Me.Type
                    Case MessageType.Information
                        Return My.Resources.Information16.ToBitmapImage
                    Case MessageType.Success
                        Return My.Resources.OK16.ToBitmapImage
                    Case MessageType.Warning
                        Return My.Resources.Alert16.ToBitmapImage
                    Case MessageType.Error
                        Return My.Resources.Error16.ToBitmapImage
                    Case Else
                End Select

                Return Nothing
            End Get
        End Property
    End Class
End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:36:03.947

你应该使用[扩展器控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.expander.aspx)

[仔细阅读使用 ControlTemplate 自定义 WPF 扩展](http://www.codeproject.com/Articles/248112/Templating-WPF-Expander-Control)器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:56:03.240

你需要`TreeView`控制。

谷歌上第一个链接可用于“wpf 树视图教程”： http: [//www.howdoicode.net/2011/10/wpf-treeview-example-part-4.html](http://www.howdoicode.net/2011/10/wpf-treeview-example-part-4.html)

# jquery - 显示孩子并隐藏父母

> ID：16015576
> 
> 赞同：1
> 
> 时间：2013-04-15T12:49:54.273
> 
> 标签：jquery, html, css

我想 `.folder`在单击时显示一个并隐藏所有其余内容。就像文件浏览器一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:59:35.613

您可以尝试使用 jQuery[`siblings()`选择器。](http://api.jquery.com/siblings/)

```
$('.folder').on('click',function(e){
    $(this).children().toggle();
    $(this).siblings('li.folder').children().toggle();
    e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:06:50.300

```
$('ul li.folder').on('click',function(e){

    $(this).siblings('li').toggle();
    $(this).children().toggle();
    e.stopPropagation();
}); 
```

这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:07:15.937

[样本](http://jsfiddle.net/M9nhP/4/)

```
//toggle children and siblings
$('.folder').on('click',function(e){
    $(this).children().toggle();
    $(this).siblings().toggle();
    e.stopPropagation();
});
//cancel file clicks
$('.file').on('click', function(e) {
    e.stopPropagation();
    return false;
}); 
```

# java - 如何/在哪里保存 J2ME 中的敏感数据？

> ID：16015583
> 
> 赞同：0
> 
> 时间：2013-04-15T12:50:11.127
> 
> 标签：java, java-me

我目前正在制作一个需要在 J2ME 中保存敏感数据的应用程序，无论是在 RMS 中还是使用 LWUIT 的存储类。（例如用户名和密码）

这种实施的安全性如何？为了确保数据安全且不易被盗，应采取哪些步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:22:35.450

RMS 未加密——攻击者可以轻松读取任何数据。您需要加密数据——我推荐[Bouncycastle](http://www.bouncycastle.org/java.html) AES 提供程序，但 Java AES 提供程序也可以工作（尽管效率不高，并且您[需要在其上启用 256 位密钥](http://www.javamex.com/tutorials/cryptography/unrestricted_policy_files.shtml)）。[有关一些示例代码，请参阅此问题的公认答案](https://stackoverflow.com/questions/992019/java-256-bit-aes-password-based-encryption)，我不建议在不先询问 StackOverflow 或其他好的问答网站的情况下更改代码中的任何内容（很容易错误地使用加密库）；`Cipher.getInstance("AES/CBC/PKCS7Padding", new BouncyCastleProvider())`该代码使用 Java 加密提供程序，在您导入 Bouncycastle 库后使用 Bouncycastle 提供程序。需要注意的重要一点是代码`Keyspec spec`从`char[] password`- 用户需要在每个会话中至少输入一次此密码才能解密数据（您不能将密码存储在设备上，这会破坏加密数据的目的）。同样重要的是，您需要在加密和解密阶段使用相同的 IV（初始化向量）；此 IV 对于您正在加密的每条记录应该是唯一的（例如，当您加密 foo.txt 时，使用与加密 bar.txt 时不同的 IV），但它不需要保密（您可以将其存储为明文旁边的加密文件）。作为一项额外的预防措施，`char[] password`请在完成后擦拭。

# machine-learning - 如何从数据挖掘中的决策树生成规则？

> ID：16015589
> 
> 赞同：1
> 
> 时间：2013-04-15T12:50:33.357
> 
> 标签：machine-learning, classification, weka, decision-tree

我有从数据集中创建决策树的代码。我在 weka 示例中使用天气数据集。如何从java中的决策树生成规则？

数据集::

```
@relation weather

@attribute outlook {sunny, overcast, rainy}
@attribute temperature real
@attribute humidity real
@attribute windy {TRUE, FALSE}
@attribute play {yes, no}

@data
sunny,85,85,FALSE,no
sunny,80,90,TRUE,no
overcast,83,86,FALSE,yes
rainy,70,96,FALSE,yes
rainy,68,80,FALSE,yes
rainy,65,70,TRUE,no
overcast,64,65,TRUE,yes
sunny,72,95,FALSE,no
sunny,69,70,FALSE,yes
rainy,75,80,FALSE,yes
sunny,75,70,TRUE,yes
overcast,72,90,TRUE,yes
overcast,81,75,FALSE,yes
rainy,71,91,TRUE,no 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:55:26.307

您可以通过遵循每个叶子的路径并用“and”连接结点上的条件来从树中获取决策规则。也就是说，对于每一片叶子，你最终会得到一个规则，告诉你必须满足什么条件才能到达那片叶子。

尽管直接训练一组决策规则而不是训练树可能更容易，例如使用`DecisionTable`分类器。

# regex - 从字符串中提取可变长度的数字

> ID：16015590
> 
> 赞同：2
> 
> 时间：2013-04-15T12:50:35.083
> 
> 标签：regex, bash

我想从字符串中提取多个可变长度。

字符串如下所示：

```
used_memory:1775220696 
```

我想把`1775220696`零件放在一个变量中。关于这个有很多问题，但我找不到适合我需要的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T12:51:57.640

您可以使用`cut`：

```
my_val=$(echo "used_memory:1775220696"  | cut -d':' -f2) 
```

或者也`awk`：

```
my_val=$(echo "used_memory:1775220696"  | awk -F':' '{print $2}') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T12:54:10.793

使用参数扩展：

```
string=used_memory:1775220696
num=${string#*:}              # Delete everything up to the first colon. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-29T08:44:36.390

我曾经使用 egrep

```
echo used_memory:1775220696 | egrep -o [0-9]+ 
```

**输出：**

```
1775220696 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T13:02:56.727

使用正则表达式：

```
s/^[^:]*://g 
```

您将它与 sed 或 perl 一起使用并获得所需的部分。

```
> echo "used_memory:1775220696" | perl -pe 's/^[^:]*://g'
1775220696 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-15T15:15:54.513

`bash`支持正则表达式匹配，但对于像这样的简单情况，它是多余的；使用参数扩展（参见[choroba 的答案](https://stackoverflow.com/a/16015665/1126841)）。

为了完整起见，下面是一个使用正则表达式匹配的示例：

```
[[ $string =~ (.*):([[:digit:]]+) ]] && num=${BASH_REMATCH[2]} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-15T12:55:00.007

可以使用 awk 完成，如下所示：

```
var=`echo "used_memory:1775220696" | awk -F':' '{print $2;}'`
echo $var 
```

**输出：**

```
1775220696 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-06T06:17:32.330

如果您的数字可以在字符串中的任何位置，但您知道数字是连续的，则可以使用 shell 参数扩展来删除所有不是数字的内容：

```
$ str=used_memory:1775220696
$ num=${str//[!0-9]}
$ echo "$num"
1775220696 
```

这也适用于`used_memory:1775220696andmoretext`和`123numberfirst`。但是，类似的东西`abc123def456`会变成`123456`.

# c# - 如何在不编译的情况下构建新表达式来测试先前表达式的结果？

> ID：16015593
> 
> 赞同：1
> 
> 时间：2013-04-15T12:50:36.373
> 
> 标签：c#, linq, expression-trees

```
//IsCellDataValid Method returns bool
MethodInfo isCellDataValidMethod = this.GetType().GetMethod("IsCellDataValid", BindingFlags.NonPublic | BindingFlags.Instance);

var IsCellDataValidMethodCall = Expression.Call(ruleEngineInstance, isCellDataValidMethod, new ParameterExpression[] { method params});

var cellDataValidConstantExp = ConstantExpression.IsTrue(IsCellDataValidMethodCall);

//GetCellTypeCount returns Int
var isCellDataValidExpression = Expression.IfThen(cellDataValidConstant,
                                                  GetCellTypeCountMethodCall); 
```

现在我想将它的输出与`cellTypeCountExpression`用户输入的值进行比较，并且不希望编译表达式以获得结果然后构建一个`Constant Expression`

我有类似的东西

```
var resultBinaryExp = ParameterExpression.LessThan(GetCellTypeCountMethodCall, 
                               Expression.Constant(userEnteredValu), typeof(int)); 
```

# asp.net - 以编程方式打印 PDF 文档

> ID：16015594
> 
> 赞同：1
> 
> 时间：2013-04-15T12:50:38.520
> 
> 标签：asp.net, pdf

如何以编程方式打印 Pdf 文档？

我正在使用以下代码打印 PDF 文件。但是当我直接单击打印图标时，它开始打印。但我不想要它。

```
 <asp:ImageButton ID="PrintButton" runat="server" ImageUrl="~/images/print-icon.png"
                   OnClick="PrintButton_Click" ToolTip="Print Document" /> 
```

我的 Cs 代码是

```
protected void PrintButton_Click(object sender, EventArgs e)
    {
        ProcessStartInfo infoPrint = new ProcessStartInfo();
        infoPrint.FileName = Session["filename"].ToString();
        infoPrint.Verb = "PrintTo";
        infoPrint.CreateNoWindow = true;
        infoPrint.WindowStyle = ProcessWindowStyle.Normal;
        infoPrint.UseShellExecute = true;
        Process printProcess = new Process();
        printProcess = Process.Start(infoPrint);            

    } 
```

当用户单击打印图标时，我想打开一个打印对话框。如果用户单击打印对话框中的打印按钮，那么我想开始打印文档。我的 PDF 文件位于服务器上的一个文件夹中，我希望它在 asp.net 中以编程方式打印。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:19:58.627

this code will run on the server not the client. while developing the server and client are the same machine, your local workstation. Once deployed, this would execute on the server, not the user's local work station.

you can open a print dialog box using javascript

```
window.print(); 
```

However that will print the entire webapge, not the document specifically.

If you would like to print only the PDF, you need to stream the file to browser (not an entire webform). The user can then take advantage of the native print options within the adobe reader. There are many examples online about how to stream documents to the client's browser.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T09:17:56.583

看看[这个帖子](https://stackoverflow.com/questions/15925616/how-to-merge-multiple-pdf-files-generated-in-run-time)

此代码添加 javascript 行以打印 pdf

```
Public Shared Function PrintJStoPDF(thePDF As Byte(), direct As Boolean) As Byte()

    Dim BB As Byte() = Nothing

    Using ms As New MemoryStream
        Using reader As New PdfReader(thePDF)
            Dim stamper = New PdfStamper(reader, ms)

            Dim jsText As String = "var res = app.setTimeOut('this.print({bUI: true, bSilent: " & direct.ToString.ToLower & ", bShrinkToFit: false});', 200);"

            stamper.JavaScript = jsText

            stamper.FormFlattening = True
            stamper.Writer.CloseStream = False
            stamper.Close()

            ms.Position = 0

            BB = ms.ToArray
        End Using
    End Using

    Return BB

End Function 
```

# android - Android ViewPager + GridView 图像占用过多的 HEAP 内存

> ID：16015595
> 
> 赞同：2
> 
> 时间：2013-04-15T12:50:40.527
> 
> 标签：android, gridview, android-viewpager

我正在尝试为我的游戏制作一个关卡选择器，现在它可以工作了，但是在某些手机上它真的很慢而且有时不工作（FC），我意识到它使用了太多的堆内存。

我是android dev的新手，所以这是我的代码，希望你能帮助我。

**使用查看器的活动：**

```
 setContentView(R.layout.level_selector);
   ViewPagerAdapter adapter = new ViewPagerAdapter(this);
   ViewPager myPager = (ViewPager) findViewById(R.id.mypagerwontwork); //cool id huh
   myPager.setAdapter(adapter);
   myPager.setCurrentItem(0); 
```

**查看寻呼机适配器：**

```
 public Object instantiateItem(View collection, int position) {
       LayoutInflater inflater = (LayoutInflater)    activity.getSystemService(activity.LAYOUT_INFLATER_SERVICE);
     if(position == 0)
     {
         View layout = inflater.inflate(R.layout.world1, null);
         final GridView gridview = (GridView) layout.findViewById(R.id.gridLvl);
         gridview.setAdapter(new LevelAdapter(activity,"World1"));
         gridview.setOnItemClickListener(itemClickListener);
         ((ViewPager) collection).addView(layout); 
         return layout;
     } 
```

**网格视图适配器：**

```
public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(100, 100));
        if (mWorld.equals("World1"))
        {
            imageView.setImageResource(World1[position]);
        } 
```

**有用的信息：**

*   有 3 个“世界”（查看页面），每个都有不同的背景
*   每个“世界”有 15 个图像，编号从 1 到 15。
*   图像大小为：+- 12kb
*   BG 大小为：+- 140kb

我希望这很清楚。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:28:59.013

I found out that my images were too big, not the size, but the resolution.

I had to resize them to ldpi, mdpi and hdpi.

these sizes can be found at:

[Android activity image background size](https://stackoverflow.com/questions/3694830/android-activity-image-background-size)

[Button Image size in android](https://stackoverflow.com/questions/9697440/button-image-size-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:56:50.323

您应该避免在 getView 方法中创建对象（例如在您的网格视图适配器中）。相反，您可以使用 ViewHolder 模式：

[http://www.jmanzano.es/blog/?p=166](http://www.jmanzano.es/blog/?p=166)

# java - Java EWS API 的问题

> ID：16015596
> 
> 赞同：2
> 
> 时间：2013-04-15T12:50:41.467
> 
> 标签：java, exchangewebservices, ewsjavaapi

我在我的 Web 应用程序中使用 Java EWS API 将我的应用程序连接到 MS Exchange 并读取用户电子邮件请求。此外，我正在使用调度程序每 1 分钟提取一次订阅。

问题是当我启动我的应用程序时，EWS-API 工作正常。它获取所有新邮件并对其进行处理。但是几天后，每当调度程序尝试拉取订阅收件箱时，应用程序都会抛出以下错误：

> microsoft.exchange.webservices.data.ServiceResponseException：找不到指定的订阅。

也许是线程问题或内存问题，我不确定。请提出此问题的任何原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T07:51:46.563

看看这篇文章，它描述的客户端访问服务器关联问题可能是您遇到的问题。

[http://blogs.msdn.com/b/exchangedev/archive/2011/07/20/client-access-server-affinity-and-network-load-balancing-considerations-for-programmatic-access-to-exchange-在线.aspx](http://blogs.msdn.com/b/exchangedev/archive/2011/07/20/client-access-server-affinity-and-network-load-balancing-considerations-for-programmatic-access-to-exchange-online.aspx)

假设如果您使用 EWS Java 版本 1.1 库（或更高版本），那么您不应该遇到这个特定问题。

因此，我会尝试检查您的 EWS 库版本，如果您仍然遇到问题，请在您的应用中添加重试逻辑，以便在遇到此错误时重新创建订阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-04T05:11:58.760

自 2017 年以来，我一直在使用 EWS Push 订阅，所以不确定下面是否有帮助，但如果你可以分享你的代码，我可以检查一下我是否能找到一些东西。

对于推送订阅，我看到了许多不同的错误，为了避免任何问题，我正在使用连接对象池，如果遇到来自 Exchange Server 的任何随机错误，我会丢弃当前连接并创建一个新连接，主要解决此类问题。

您也可以尝试在建立连接时设置锚邮箱，这有助于解决一些问题。

另外，如果您可以分享一些示例代码，我很乐意检查。

# unix - 如何使用通配符“*”实现命令“ls”？

> ID：16015598
> 
> 赞同：1
> 
> 时间：2013-04-15T12:50:51.400
> 
> 标签：unix, system-calls

编辑＃1：我受到所有参数都用两个引号括起来的限制，因此shell不会将任何参数扩展`*`到相应的路径。

编辑#2：为了检索诸如 、 和 之类的目录`*/*`，`../*`我`dirA/*/file.out`应该如何使用迭代循环或递归调用？

我刚刚了解了这个功能`fnmatch()`。但我不知道起点。
有很多可能的情况。我对处理所有这些情况感到困惑。
例如，让我假设可执行程序是`a.out`.

```
$./a.out -l */*
$./a.out -l ../*
$./a.out -l [file_name] [directory_name] 
/* Since I also have to implement ls command with no wildcard. */ 
```

我应该怎么办？任何建议都会很棒。
先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T20:57:14.650

如果你想成为一个优秀的 unix 公民，规则是**不要进行文件名通配，除非你正在编写一个 shell。**

你想写一个`ls`类似的程序吗？不要进行任何通配符扩展。不要特别对待“*”。只需将您`argv`视为文件名列表即可。如果您的程序处理这些情况：

```
./a.out file1
./a.out file1 file2 file3 
```

然后它也会处理

```
./a.out file* 
```

正确，因为 shell 将进行扩展，您的程序不需要知道它。除此之外，它将处理这个：

```
zsh% ./a.out **/file<40-185>~file<90-100>(.mm-30OL[1,2]) 
```

在 zsh 扩展 glob 语法中表示：将 file40 扩展至 file185，除了 file90 至 file100，仅包含最近 30 分钟内修改过的文件，并且仅使用结果集中最大的 2 个文件。

`fnmatch`永远不会做那样的事情。但是这些花哨的 glob 可以与任何只接受文件名列表而不关心它来自哪里的命令一起使用。

当您无法从命令行获取文件名列表时，请考虑使用 fnmatch。`ls`不是其中一种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T20:00:02.990

您的问题是：shell 将通配符 * 替换为与模式匹配的所有文件名。

解决方案：

如果您不想使用 bash 的此功能，只需在命令行参数周围加上引号即可。

以这种方式调用您的程序将具有包含通配符的原始参数。

在此之后，您可以列出所有文件名及其路径。例如使用一些递归算法。然后您可以对这些路径字符串应用一些匹配。（访问时）

# django-admin-tools - 管理工具配置抛出 404：找不到页面

> ID：16015605
> 
> 赞同：2
> 
> 时间：2013-04-15T12:51:30.243
> 
> 标签：django-admin-tools

我尝试设置管理工具的基本配置，但由于 url 调度程序识别 admin_tools.urls 的包含而失败：

```
#urls.py
...
import admin_tools.urls
urlpatterns = patterns('',
    url(r'^admintools/', include(admin_tools.urls)),
    url(r'^admin/', include(admin.site.urls)),
)

#settings.py
import django.conf.global_settings as DEFAULT_SETTINGS
TEMPLATE_CONTEXT_PROCESSORS = DEFAULT_SETTINGS.TEMPLATE_CONTEXT_PROCESSORS + (
    "django.core.context_processors.request",
)

INSTALLED_APPS = (
    'django.contrib.auth',
    ...
    'admin_tools',
    'admin_tools.menu',
    'admin_tools.dashboard',
    'django.contrib.admin',
    'repmgr',) 
```

我确实运行了syncdb。我确信正则表达式匹配 /admintools/，因为当我包含另一个应用程序时它可以工作。

详细的错误响应是：

```
Page not found (404)
Request Method: GET
Request URL:    http://127.0.0.1:8000/admintools/
Using the URLconf defined in urlconf, Django tried these URL patterns, in this order:
^__debug__/m/(.*)$
^__debug__/sql_select/$ [name='sql_select']
^__debug__/sql_explain/$ [name='sql_explain']
^__debug__/sql_profile/$ [name='sql_profile']
^__debug__/template_source/$ [name='template_source']
^admin/doc/
^admintools/ ^menu/
^admintools/ ^dashboard/
^sthrep/
The current URL, admintools/, didn't match any of these. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:44:30.543

**错误消息是完全正确的：**

Django 告诉我们没有 URL 模式匹配`^admintools/^`。**这是真的**。这是因为 django-admin-tools 不会创建不同的管理站点，而是扩展了原始管理站点。

该`^admintools/`模式仅为其子模式创建，这些子模式提供对管理工具正常工作所需的页面的访问（例如，添加到原始管理员的新页面）。

顺便说一句，在[django-admin-tools 文档](http://django-admin-tools.readthedocs.org/en/latest/quickstart.html#testing-your-new-shiny-admin-interface)中，在设置说明的末尾，他们说：

> *恭喜！此时您应该已经安装了 django-admin-tools。现在您可以登录到您的管理站点并查看发生了什么变化。*

我猜*你的管理站点*是指标准管理站点。

所以我认为访问管理界面、菜单和仪表板的好方法是使用标准管理员。

# google-play - Google Play 开发者处理时间

> ID：16015606
> 
> 赞同：8
> 
> 时间：2013-04-15T12:51:33.937
> 
> 标签：google-play

在过去 72 小时内，我的 Google Play 开发者计划的 Google 电子钱包付款显示为“您的购买正在处理中”。我知道这可能需要长达 48 小时，但这是他们处理时间最坏情况之后的一整天。

我使用他们的帮助页面联系了 Google Play，直到本周才得到答复，同时问题有望自行解决。然而，一天后，他们没有回复（我还没有预料到），而是给我发了一份调查，询问他们的支持情况。我从未得到过支持。

有谁知道如何直接联系 Google Play？虽然它只有 25 美元，但发送给谷歌的是 25 美元，但没有收到任何回报。应用程序的 Google 电子钱包付款已全部完成（状态：您的购买已完成）。不知道为什么这是帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-08T20:02:40.823

来自 Google [Android 开发者 - 已知问题](https://support.google.com/googleplay/android-developer/known-issues/24493)页面

> ## 无法完成 Google Play Android 开发者帐号注册
> 
> 我们收到了一些开发者目前无法完成其开发者帐户注册的报告。请注意，某些交易最多可能需要 48 小时才能由 Google Checkout 系统处理。在 Google Checkout 系统完全处理您的交易之前，您将无法发布应用程序。
> 
> 请等待 48 小时。如果您在进行交易后 48 小时后仍然在您的 Google Play 开发者控制台中看到“您的注册正在处理中...”横幅，请联系 Google 电子钱包团队。

如果超过 48 小时，请[报告 Google Play 开发者注册或帐户问题](https://support.google.com/googleplay/android-developer/contact/dev_registration)

# c# - 用户控件单击事件未触发

> ID：16015607
> 
> 赞同：0
> 
> 时间：2013-04-15T12:51:36.053
> 
> 标签：c#, asp.net, user-controls

嗨，这是我的 aspx 页面，正在向用户控件加载一些值

```
protected void Page_Load(object sender, EventArgs e)
        {

        } 
```

这是我在查找单击事件中加载和发送值的用户控件

```
protected void BtnFind_Click(object sender, EventArgs e)
        {
            Usr_BPOP BPOP = (Usr_BPOP)Page.LoadControl("~/Usr_BPOP.ascx");
            BPOP.Date = txtDate.Text.Trim();
            BPOP.DocNo = txtDocNo.Text.Trim();
            BPOP.Code = txtCode.Text.Trim();
            BPOP.Name = txtName.Text.Trim();
            BPOP.Partcode = txtPartNo.Text.Trim();
            if (chkReprint.Checked)
            {
                BPOP.BtnReprintVisible = true;
                BPOP.BtnSaveVisible = false;
            }
            divControls.Controls.Clear();
            PlaceHolder1.Controls.Add(BPOP);

        } 
```

这是我的 Usr_BPOP.ascx：

```
 protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                btnReprint.Click += new EventHandler(btnReprint_Click);
            }

            btnReprint.Visible = false;
            btnSave.Visible = BtnSaveVisible;
            btnReprint.Visible = BtnReprintVisible;
            if (btnReprint.Visible == false)
            {
                btnReprint.Text = "Print";
                btnReprint.Visible = true;
            }
            table = new DataTable();
            table.Columns.Add("DocNum", typeof(string));
            table.Columns.Add("DocEntry", typeof(string));
            table.Columns.Add("LineNum", typeof(string));
            table.Columns.Add("PartNo", typeof(string));
            table.Columns.Add("ItemDesc", typeof(string));
            table.Columns.Add("QTR", typeof(string));
            table.Columns.Add("QTP", typeof(string));
            table.Columns.Add("Chk", typeof(bool));
            table.Columns.Add("BarCode", typeof(string));
            Datalayer dl = new Datalayer();
            DataTable dttable = new DataTable();
            if (!BtnSaveVisible && BtnReprintVisible)
                BtnSaveVisible = true;
            dttable = dl.GetPOItem(date, docNo, code, name, partcode, BtnReprintVisible, !BtnSaveVisible).Tables[0];
            foreach (DataRow dr in dttable.Rows)
            {
                table.Rows.Add(dr["DocNum"].ToString(), dr["DocEntry"].ToString(), dr["LineNum"].ToString(), dr["PartNo"].ToString(),
                    dr["ItemDesc"].ToString(), dr["QTR"].ToString(), dr["QTP"].ToString(), Convert.ToBoolean(dr["Chk"]), dr["Barcode"].ToString());
            }
            if (table != null && table.Rows.Count > 0)
            {
                grdlistofitems.DataSource = table;
                Session["Table"] = table;
                grdlistofitems.DataBind();
            }
            else
            {

            }

        } 
```

这是当我 cilck 此事件未触发时的重印按钮单击事件：

```
void btnReprint_Click(object sender, EventArgs e)
        {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:11:25.040

由于您没有设置控件的 ID，因此每次将控件添加到页面时都会重新生成它。生成的 ID 可能不相同，因此无法识别事件的发送者。所以你应该做的第一件事是明确分配一个 ID：

```
Usr_BPOP BPOP = (Usr_BPOP)Page.LoadControl("~/Usr_BPOP.ascx");
BPOP.ID = "SomeID"; 
```

其次，事件处理程序的分配应该在控件创建的时候完成——也就是说，在每个请求上，不管这是否是回发——否则 ASP.NET 将无法确定应该调用什么方法当事件被触发时：

```
protected void Page_Load(object sender, EventArgs e)
{
    // No check for postback here
    btnReprint.Click += new EventHandler(btnReprint_Click); 
```

**更新。**这段代码没有按预期运行还有一个原因。BPOP 控件仅在`btnFind`单击时添加到页面。当回发是由其他任何原因引起时，包括`btnReprint`响应页面生成上的 BPOP 控件根本不会添加到页面中。如果页面上没有控件——显然它的方法，包括事件处理程序，不能被触发。

这是针对这种情况的快速而肮脏的解决方案。应该应用于添加了 BPOP 控件的页面代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    bool? addBPOP = ViewState["AddBPOP"] as bool?;
    if (addBPOP.HasValue && addBPOP.Value)
    {
        AddBPOP();
    }
}

protected void BtnFind_Click(object sender, EventArgs e)
{
    AddBPOP();
    ViewState["AddBPOP"] = true;
}

protected void AddBPOP()
{
    Usr_BPOP BPOP = (Usr_BPOP)Page.LoadControl("~/Usr_BPOP.ascx");
    BPOP.ID = "BPOPID";

    BPOP.Date = txtDate.Text.Trim();
    BPOP.DocNo = txtDocNo.Text.Trim();
    BPOP.Code = txtCode.Text.Trim();
    BPOP.Name = txtName.Text.Trim();
    BPOP.Partcode = txtPartNo.Text.Trim();
    if (chkReprint.Checked)
    {
        BPOP.BtnReprintVisible = true;
        BPOP.BtnSaveVisible = false;
    }
    divControls.Controls.Clear();
    PlaceHolder1.Controls.Add(BPOP);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:55:37.537

改变：

```
void btnReprint_Click(object sender, EventArgs e)
{
} 
```

至

```
protected void btnReprint_Click(object sender, EventArgs e)
{
} 
```

# jquery - 如何在 jquery 中使用 wms（Web 地图服务）

> ID：16015608
> 
> 赞同：0
> 
> 时间：2013-04-15T12:51:41.020
> 
> 标签：jquery, wms

我可以在我的网络应用程序中使用谷歌地图，但现在我将使用 wms（网络地图服务）是否有任何示例或链接到如何在 jquery 中使用 wms，现在我正在互联网上搜索和查找有关 Wms 的表单，但我将阅读有关它的有效材料。或者 Wms 是什么以及如何在我的 Web 应用程序中使用它，即：确定两个城市之间的路

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:17:05.730

WMS 是一种用于传输和查询基于栅格的地图（即地图图像）的技术。您不能轻松地在 WMS 层上进行例如路由。根据您想要做什么，使用 WMS 可能真的是不适合这项工作的工具。本质上，如果您想做的不仅仅是显示地图，WMS 将是不够的。

为什么要使用 WMS？

# java - 如何使用我从中获取 inputStream 的临时文件

> ID：16015623
> 
> 赞同：1
> 
> 时间：2013-04-15T12:52:33.820
> 
> 标签：java, web-services, rest, jakarta-ee, jersey-2.0

我正在尝试使用 REST Web 服务将文件上传到 Web。我创建了一个流程，它接受以下形式的文件：

```
@POST
@Path("/upload")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadFile(

        @FormDataParam("file") InputStream uploadInputStream,
        @FormDataParam("file") FormDataContentDisposition fileDetails,
        @FormDataParam("location") String uploadedFileLoc   ) {
        .
        .
} 
```

在方法结束时，我需要返回客户端上传的文件，并在下一个方法中将该文件转换为字节数组。基本上我以“InputStream”格式获取文件。有什么方法可以作为文件本身获得吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-24T06:47:01.830

`@Ravi Kumar`

您可以使用

```
public Response uploadFileSimple(@FormDataParam("file") File file, @FormDataParam("file") FormDataContentDisposition formData) 
```

它直接返回一个文件对象，但球衣它会在临时文件中为你创建文件对象，所以你可以说有两个相同大小的临时文件。

```
First MIMExxxxx.tmp from where you get you input steam

Second re234xxxx  from which you get this file object 
```

`NOTE :`在调用你的资源方法之前 jersey 需要时间来创建这两个文件（根据文件大小）。

如果你想直接使用`MIMExx.tmp`文件，那么我认为没有直接的方法可以`JAVA REFLECTION`用来获取临时文件路径和使用。

使用 Java 反射：

```
@Path("/upload/{parentfolderid}")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadFileWithPart(FormDataMultiPart form)
    {

        try
        {
            FormDataBodyPart filePart = form.getField("upload");
            BodyPartEntity bodyPart = (BodyPartEntity) filePart.getEntity();

            MIMEPart mimePart = (MIMEPart) readFieldValue("mimePart", bodyPart);
            Object dataHead = readFieldValue("dataHead", mimePart);
            Object dataFile = readFieldValue("dataFile", dataHead);
            File tempFile = null;
            if (dataFile != null)
            {
                Object weakDataFile = readFieldValue("weak", dataFile);
                tempFile = (File) readFieldValue("file", weakDataFile);
            }
            else
            {
                tempFile = filePart.getValueAs(File.class);
            }

    // Here is your *tempFile*, Do what ever you want with it
}

private static Object readFieldValue(String fieldName, Object o) throws Exception
{
    Field field = o.getClass().getDeclaredField(fieldName);
    field.setAccessible(true);
    return field.get(o);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:44:31.180

文件是文件，流是流。

如果您需要流中的文件，则需要创建文件并将流写入文件。

您可以为此使用临时文件夹： [How to create a temp file in java without the random number appended to the filename?](https://stackoverflow.com/questions/9594886/how-to-create-a-temp-file-in-java-without-the-random-number-appended-to-the-file)

并在那里创建一个临时文件。

**UPD**

对于您的需要， File.createTempFile() 应该足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:59:04.240

您可以使用 Jersey REST API 进行文件上传。例如，

```
@Path("/upload")
public class FileUploadService{
      @POST

@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadFile(
    @FormDataParam("file") InputStream uploadedInputStream,
    @FormDataParam("file") FormDataContentDisposition fileDetail) {

      String location = "/" + fileDetail.getFileName();

    // save it
    writeToFile(uploadedInputStream, location);

    String output = "File uploaded to : " + location;

    return Response.status(200).entity(output).build();

      }

} 
```

要保存文件，您可以使用以下方法：

```
private void writeToFile(InputStream uploadedInputStream,
    String location) {

    try {
        OutputStream out = new FileOutputStream(new File(
                location));
        int read = 0;
        byte[] bytes = new byte[1024];

        out = new FileOutputStream(new File(location));
        while ((read = uploadedInputStream.read(bytes)) != -1) {
            out.write(bytes, 0, read);
        }
        out.flush();
        out.close();
    } catch (IOException e) {

        e.printStackTrace();
    }

} 
```

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:25:37.657

谢谢大家的建议。我需要做的主要事情是将文件转换为字节数组。由于我得到了 InputStream，我可以将其作为返回传递给下一个流，而不是等待文件本身。在下一个流程中，不要使用“文件到字节数组”转换器，而是使用“对象到字节数组”转换器。最后它起作用了。

# ios - 防止在 iOS6 上旋转 ABPersonViewController 和 ABNewPersonViewController

> ID：16015624
> 
> 赞同：1
> 
> 时间：2013-04-15T12:52:34.897
> 
> 标签：ios, objective-c, ios6, autorotate

**直接参考这个问题：**

[如何在 iPhone 的横向模式下停止 ABPersonViewController 和 ABNewPersonViewController 的旋转](https://stackoverflow.com/questions/2797515/how-to-stop-rotation-of-abpersonviewcontroller-abnewpersonviewcontroller-in-la)

当我不是推动视图控制器的人时，如何防止此屏幕在 iOS 6 中旋转？场景是我创建了一个新联系人，然后用户按下“创建新联系人”或“添加到现有联系人”按钮。生成的屏幕是 ABNewPersonViewController 但因为我无法直接访问旋转方法，所以无法阻止它旋转。

**截屏：**

![在此处输入图像描述](https://i.stack.imgur.com/jtPDi.png)

上图取自 的子类`ABUnknownPersonViewController`，在这个子类中，我实现的唯一功能是重写旋转方法，如下所示：

```
- (BOOL)shouldAutorotate
{
    return NO;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    if(toInterfaceOrientation == UIInterfaceOrientationPortrait)
        return YES;

    return NO;
} 
```

但是，问题是，当按下上图中的一个按钮以覆盖 iOS 6 上的旋转时，我无法将`ABNewPersonViewController`按下的屏幕子类化。关于如何合法访问这些按钮或覆盖旋转的任何想法在被推动以防止它这样做的屏幕上？

**更新 1：**

我试图在`ABNewPersonViewController`and上创建一个`ABUnknownPersonViewController`覆盖旋转方法的类别（我知道，这并不理想），然后全局导入，但这不起作用。除此之外，我完全不知道如何覆盖这种行为。有什么建议么？

**更新 2：**

是否可以获得对其中按钮的引用`UITableView`并覆盖它们调用的方法？或者访问私有 API 是否违反了 Apple 条款？到目前为止，试图调查这种方法并没有真正取得任何进展。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T16:10:14.467

在 iOS 6 上，旋转处理发生了变化。有两个选项可以防止旋转：

1.  您可以在 Info.plist 中将整个应用设置为仅支持纵向。
2.  您可以覆盖应用程序委托中的方法：

    ```
    - (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
    {
        return UIInterfaceOrientationMaskPortrait;
    } 
    ```

    因为每当方向改变或新的视图控制器被推送时，你的委托都会调用该方法，你甚至可以使用它来临时禁用横向显示：

    ```
    // In AppDelegate.h:
    @property (nonatomic) BOOL portraitOnly;

    // In AppDelegate.m:
    - (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
    {
        return _portraitOnly ? UIInterfaceOrientationMaskPortrait : UIInterfaceOrientationMaskAllButUpsideDown;
    }

    // to switch to portrait only:
    ((AppDelegate *)[UIApplication sharedApplication].delegate).portraitOnly = YES;

    // to switch back to allowing landscape orientations as well:
    ((AppDelegate *)[UIApplication sharedApplication].delegate).portraitOnly = NO; 
    ```

这两种方法对于 App Store 提交都是完全可以接受的，因为它们只使用已发布和记录的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:47:12.930

离开 Tammo Freese 的答案。我假设需要允许横向的视图在视图堆栈中低于您的自定义 ABUnknownPersonViewController。如果是这样，在你的 ABUnknownPersonViewController 子类中添加这个

```
- (void) viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    ((AppDelegate *)[UIApplication sharedApplication].delegate).portraitOnly = YES;
}
- (void)viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:(BOOL)animated];    
    ((AppDelegate *)[UIApplication sharedApplication].delegate).portraitOnly = NO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:32:45.150

在 iOS 6 中，视图控制器允许旋转的方向由最顶层的全屏视图控制器控制，并且视图控制器层次结构中不再调用自动旋转方法。

不要创建 ABPersonViewController 的子类，而是使用以下代码创建 UINavigationController 的子类：

```
- (BOOL)shouldAutorotate
{
    return NO;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

在为您呈现的 ABPersonViewController 创建 UINavigationController 时使用这个新的子类。如果 UINavigationController 没有以模态方式呈现（而是嵌套在 UITabBarController 或其他视图控制器中），您还需要将这些方法也放入该视图控制器中。

# postgresql - postgres中的日期减法

> ID：16015629
> 
> 赞同：4
> 
> 时间：2013-04-15T12:52:55.793
> 
> 标签：postgresql

我想`NOW()`从另一个表中减去分钟和“多少分钟”的值：

```
SELECT * FROM A, B 
WHERE 
   A.entity_type_id = B.entity_type_id  
   AND A.status = 'PENDING'  
   AND A.request_time < (NOW() - INTERVAL B.retry_interval MINUTE) 
   AND A.retry_count >= B.retry_allowed_count 
```

这里的问题是`B.retry_interval`从另一个表中获取的，而通常像这样的查询是`A.request_time < (NOW() - INTERVAL '10 MINUTE')`

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:59:25.360

将间隔乘以`interval '1 minute'`

```
SELECT *
FROM A, B 
WHERE 
   A.entity_type_id = B.entity_type_id  
   AND A.status = 'PENDING'  
   AND A.request_time < NOW() - B.retry_interval * INTERVAL '1 minute'
   AND A.retry_count >= B.retry_allowed_count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-27T06:47:01.377

我知道它已经够老了，但我在这里做什么。顺便说一句，我的 postgres 版本是 9.4.18。

尝试使用区间数据类型。将列中的数字转换为 sting 并将其连接起来。

```
 SELECT * 
   FROM A, B WHERE 
   A.entity_type_id = B.entity_type_id  
   AND A.status = 'PENDING'  
   AND A.request_time < (NOW() - concat(B.retry_interval::text,'minute')::interval
   AND A.retry_count >= B.retry_allowed_count 
```

感谢我的同事发现“间隔”数据类型

# xsd - 我的 xml 不会针对我的架构进行验证

> ID：16015636
> 
> 赞同：1
> 
> 时间：2013-04-15T12:53:15.050
> 
> 标签：xsd

我刚刚第一次尝试 XSD。

当我尝试针对我的 XSD 验证我的 XML 时，我收到错误：找不到元素“链接”的声明。

下面我给出了我的 XSD 和我的 XML 的缩减版本。我尝试将命名空间限定符添加到我的 XML 中的顶部元素以及每个元素（将 XSD 更改为限定符），但它没有帮助。我显然犯了一个基本错误。由于我是 XSD 新手，如果您能在我的 XML 和/或 XSD 中包含我需要更改的内容，我将不胜感激。

XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.stephenwaring.me.uk/android/nestedsettings"
    xmlns="http://www.stephenwaring.me.uk/android/nestedsettings"
    elementFormDefault="unqualified">
    <xs:element name="linkage">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="preference-screen" maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="parent" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:sequence>
                                        <xs:element name="child" maxOccurs="unbounded">
                                            <xs:complexType>
                                                <xs:attribute name="key" type="xs:token" use="required" />
                                                <xs:attribute name="reformat" type="xs:boolean" />
                                            </xs:complexType>
                                        </xs:element>
                                    </xs:sequence>
                                    <xs:attributeGroup ref="keyed" />
                                    <xs:attribute name="preference-screen" type="xs:token" use="required" />
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                        <xs:attributeGroup ref="keyed"/>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
            <xs:attributeGroup ref="defaults"/>
        </xs:complexType>
    </xs:element>
    <xs:attributeGroup name="defaults">
        <xs:attribute name="html" type="xs:boolean" />
        <xs:attribute name="prefix" type="xs:string" />
        <xs:attribute name="suffix" type="xs:string" />
        <xs:attribute name="separator" type="xs:string"/>
        <xs:attribute name="reformat" type="xs:boolean" />
        <xs:attribute name="shaddow" type="xs:boolean" />   
        <xs:attribute name="child-summary" type="xs:boolean" /> 
        <xs:attribute name="shadow-separator" type="xs:string"/>
    </xs:attributeGroup>
    <xs:attributeGroup name="keyed">
        <xs:attributeGroup ref="defaults" />
        <xs:attribute name="key" type="xs:token" use="required" />
    </xs:attributeGroup>
</xs:schema> 
```

减少 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<linkage
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://stevewaring.me.uk/android/nestedsettings nestedsettings.xsd"
    xmlns="http://www.stevewaring.me.uk">
    <preference-screen
        key="preferences1">
        <parent
            key="prefFruit"
            preference-screen="preferences2">
            <child key="prefFruit1"/>
            <child key="prefFruit2"/>
        </parent>
    </preference-screen>
</linkage> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:55:39.933

您的 XSD 在[http://www.stephenwaring.me.uk/android/nestedsettings](http://www.stephenwaring.me.uk/android/nestedsettings)中定义元素，而您的文档元素在[http://www.stevewaring.me.uk](http://www.stevewaring.me.uk)中。让他们以一种或另一种方式同意，它应该解决您遇到的错误。

我添加了一个固定的 XML，还有另一个与使用不合格元素有关的问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<linkage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.stephenwaring.me.uk/android/nestedsettings nestedsettings.xsd" xmlns="http://www.stephenwaring.me.uk/android/nestedsettings">
    <preference-screen xmlns="" key="preferences1">
        <parent key="prefFruit" preference-screen="preferences2">
            <child key="prefFruit1"/>
            <child key="prefFruit2"/>
        </parent>
    </preference-screen>
</linkage> 
```

# c# - 二维码触发在 Windows Phone 中安装的本机应用程序的操作

> ID：16015637
> 
> 赞同：3
> 
> 时间：2013-04-15T12:53:15.097
> 
> 标签：c#, windows-phone-7.1, qr-code

如何在 Windows Phone 应用程序上触发操作？假设我想通过扫描 QR 码导航到我的原生应用程序中的某个页面，我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:43:56.710

首先这是一个想法，我要做的是创建一个[自定义 uri 方案](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx#BKMK_LaunchingaURIusingProximity)，所以当二维码被读取时，设备将导航到您指向的页面，无论您的应用程序是否正在运行

*   在添加`WMAppManifest`之后`Tokens`

> ```
>  <Extensions>
>   <Protocol Name="yourprotocol" NavUriFragment="encodedLaunchUri=%s" TaskID="_default" />
>   </Extensions> 
> ```

*   比`App.cs`添加`RootFrame.UriMapper = new CustomUriMapper();`
*   在你的情况下`CustomUriMapper`应该是这样的

> ```
> class CustomUriMapper : UriMapperBase
> {
>     private string tempUri;
>     public override Uri MapUri(Uri uri)
>     {
>         tempUri = System.Net.HttpUtility.UrlDecode(uri.ToString());          
>         if (tempUri.Contains("yourprotocol"))
>         { 
>          return new Uri("YourPage.xaml", UriKind.Relative);
>         }
>         else
>             {
>                 return new Uri("MainPage.xaml", UriKind.Relative);
>             }           
>     }
> } 
> ```

让我知道事情的后续 （：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T12:34:05.680

例如，您可以将 uriassociationname:?parameters 转换为带有 tinyurl 的缩短网址，手机将运行该网址并启动相应的应用程序。

# javascript - 自动排列不同大小和浮动的div

> ID：16015642
> 
> 赞同：1
> 
> 时间：2013-04-15T12:53:21.987
> 
> 标签：javascript, css

嘿伙计们！

我这里有一个严重的问题。我正在开发一个具有 3 列布局的程序。每个列的宽度可以通过移动滑块来改变。到目前为止很容易。

在每一列中，我需要显示许多不同的 div 信息。由于可以调整列的大小，我希望 div 将自己浮动到最小的布局。问题是每个块的高度不同，但一张图片说千字以上：

[http://web-tweaks.de/false.png](http://web-tweaks.de/false.png)

如您所见，两个左侧 div 之间有很大的空间。这就是我希望它看起来的样子： [http ://web-tweaks.de/true.png](http://web-tweaks.de/true.png)

div 的高度是完全动态的，因此无法在代码中重新排列，因为其中许多是动态创建的。（他们可以拖动以进行重新排列......）。

这是 HTML 部分：

```
<div class="_content">
                <div class="_dt_floating_container">
                    <div class="_title">Stammdaten</div>
                    PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>
                    PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>
                </div>
                <div class="_dt_floating_container">
                    <div class="_title">Bankdaten</div>
                    PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>
                    PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>
                    PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>
                    PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>
                </div>
                <div class="_dt_floating_container">
                    <div class="_title">Stammdaten</div>
                    PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>
                    PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>PLACEHOLDER <br>
                </div>
            </div> 
```

和CSS：

```
._dt_floating_container {
    padding: 0px;
    background-color: red;
    min-width: 400px;
    display: inline-block;
    margin: 0 10px 10px 0;
    vertical-align: top;
}

._dt_floating_container > ._title {
    width: 100%;
    margin: 0px;
    background-color: green;
    min-height: 20px;
    padding: 2px; 
} 
```

JSFiddle： http: [//jsfiddle.net/zfxEG/](http://jsfiddle.net/zfxEG/) 如果您调整列大小，您将看到问题。

这甚至可以用纯 CSS 实现吗？在JS中解决这个问题没有问题，我已经有一个复杂的窗口管理器，但越简单越好:)

我已经尝试过不同的解决方案，如 inline-block、float 等。提前致谢！=)

# signal-processing - 长度为 1536 的 FFT

> ID：16015646
> 
> 赞同：1
> 
> 时间：2013-04-15T12:53:32.137
> 
> 标签：signal-processing

有谁知道我能找到一个长度为 1536 的 FFT 输入。它是 3gpp Lte 中给出的规范，我们需要一个 1536 输入大小的变换，这不是我想说的任何数字的幂。我只需要一个理论上的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:04:52.477

[FFTW](http://www.fftw.org)提供了一个任意 N FFT 的实现，快速搜索找到了Jens Jørgen Nielsen[的一个实现。](http://www.corix.dk/Mix-FFT/mix-fft.html)

如果做不到这一点，则可能需要进行学术文献搜索。在引文索引中搜索*Cooley Tukey*是一个安全的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:34:33.387

1 个 radix-3 和 9 个 radix-2 时间抽取 FFT 阶段的组合应该适用于长度为 1536 的 FFT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:28:50.520

您正在寻找 PRACH。最简单的方法是实现 L/M 比的上采样滤波器，以达到最近的大小为 2048 的 FFT。另一种方法也可以直接采用 1536 的实现 fft，但这不是最佳解决方案，因为 2048 点 fft 会很多更容易采取。

# php - 如何在HTML 的所有标签之间获取数组中的文本？

> ID：16015647
> 
> 赞同：10
> 
> 时间：2013-04-15T12:53:32.810
> 
> 标签：php, preg-match, preg-match-all

我想`<span> </span>`从 HTML 的所有标签之间获取数组中的文本，我尝试过使用此代码，但它只返回一次：

```
preg_match('/<span>(.+?)<\/span>/is', $row['tbl_highlighted_icon_content'], $matches);

echo $matches[1]; 
```

我的 HTML：

```
<span>The wish to</span> be unfairly treated is a compromise attempt that would COMBINE attack <span>and innocen</span>ce.  Who can combine the wholly incompatible, and make a unity  of what can NEVER j<span>oin? Walk </span>you the gentle way, 
```

我的代码只返回一次 span 标签，但我想以 php 数组的形式从 HTML 中的每个 span 标签中获取所有文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:56:48.830

使用`preg_match_all()`它是一样的，它将返回 $matches 数组中的所有匹配项

[http://php.net/manual/en/function.preg-match-all.php](http://php.net/manual/en/function.preg-match-all.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:00:30.430

你需要切换到[preg_match_all](http://it1.php.net/manual/en/function.preg-match-all.php)函数

**代码**

```
$row['tbl_highlighted_icon_content'] = '<span>The wish to</span> be unfairly treated is a compromise attempt that would COMBINE attack <span>and innocen</span>ce. Who can combine the wholly incompatible, and make a unity of what can NEVER j<span>oin? Walk </span>you the gentle way,';    

preg_match_all('/<span>.*?<\/span>/is', $row['tbl_highlighted_icon_content'], $matches);

var_dump($matches); 
```

如您所见，已`array`正确填充，因此您可以进行`echo`所有匹配

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:01:06.733

这是获取数组中所有跨度值的代码

```
 $str = "<span>The wish to</span> be unfairly treated is a compromise
attempt that would COMBINE attack <span>and innocen</span>ce. 
Who can combine the wholly incompatible, and make a unity 
of what can NEVER j<span>oin? Walk </span>you the gentle way,";

preg_match_all("/<span>(.+?)<\/span>/is", $str, $matches);

echo "<pre>";
print_r($matches); 
```

**你的输出将是**

```
Array
(
    [0] => Array
        (
            [0] => The wish to
            [1] => and innocen
            [2] => oin? Walk 
        )

    [1] => Array
        (
            [0] => The wish to
            [1] => and innocen
            [2] => oin? Walk 
        )

) 
```

您可以使用 o 或 1 索引

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T13:10:18.643

如果您不介意使用第三方组件，我想向您展示[Symfony 的 DomCrawler](http://symfony.com/doc/master/components/dom_crawler.html)组件。这是解析 HTML/XHTML/XML 文件和浏览节点的一种非常简单的方法。

你甚至可以使用 CSS 选择器。您的代码将类似于：

```
$crawler = new Crawler($html);
$spans = $crawler->filter("span");
echo $spans[1]->getText();; 
```

您甚至不需要完整的 HTML/XML 文档，如果您只分配`<span>...</span>`部分代码，它就可以正常工作。

# java - 如何使用十进制格式显示电话号码

> ID：16015653
> 
> 赞同：5
> 
> 时间：2013-04-15T12:53:43.673
> 
> 标签：java, decimalformat

您好我想使用**DecimalFormat**来显示：

`8392472`作为

`839 24 72`

我努力了

```
DecimalFormat dc = new DecimalFormat("000 00 00");
return dc.format(number); 
```

我也试过`"### ## ##"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:00:33.600

我认为您不能使用 a 来做到这一点，`DecimalFormat`因为您的空格不是组分隔符或小数分隔符。

简单的方法是简单地使用一个字符串：

```
int number = 8392472;
String s = String.valueOf(number);
String formatted = s.substring(0, 3) + " " 
                 + s.substring(3, 5) + " "
                 + s.substring(5, 7); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:23:58.790

我认为实现这一目标的最简单方法如下。

```
public static void main(String[] args) {
    int number = 8392472;
    StringBuilder sb = new StringBuilder(String.valueOf(number))
                                .insert(3," ")
                                .insert(6," ");
    System.out.println(sb.toString());    
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T13:04:43.990

使用谷歌的图书馆！它对我们很有效。

[https://code.google.com/p/libphonenumber/](https://code.google.com/p/libphonenumber/)

# c - 全局变量是否总是在 C 中初始化为零？

> ID：16015656
> 
> 赞同：24
> 
> 时间：2013-04-15T12:53:52.997
> 
> 标签：c, global-variables

```
#include <stdio.h>
int a[100];
int main(){
    printf("%d",a[5]);
    return 0;
} 
```

上面的代码总是打印'0'还是编译器特定的？我正在使用 gcc 编译器，输出为“0”。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-15T12:57:25.540

是的，所有成员`a`都保证被初始化为 0。

来自 C89 标准的第 3.5.7 节

> 如果一个具有静态存储持续时间的对象没有显式初始化，它会被隐式初始化，就好像每个具有算术类型的成员都被分配了 0 并且每个具有指针类型的成员都被分配了一个空指针常量。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-15T13:17:28.757

“全局变量”在*文件范围内*定义，在任何函数之外。在文件范围内定义的所有变量和使用关键字声明的所有变量都`static`具有称为*静态存储持续时间*的东西。这意味着它们将被分配在内存的单独部分中，并存在于程序的整个生命周期中。

这也意味着它们保证在任何 C 编译器上都被初始化为零。

从当前的 C 标准 C11 6.7.9/10 开始：

> "...如果一个具有静态或线程存储持续时间的对象没有被显式初始化，那么：
> 
> — 如果它具有指针类型，则将其初始化为空指针；
> 
> — 如果它具有算术类型，则将其初始化为（正或无符号）零；"

实际上，这意味着如果将全局变量初始化为给定值，它将具有该值，并且将分配在通常称为`.data`. 如果你不给它一个值，它将被分配到另一个名为`.bss`. 全局变量永远不会在堆栈上分配。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-15T12:55:03.473

是的。任何全局变量都被初始化为该类型的*默认值*。 `0`是默认值并自动转换为任何类型。如果是指针，`0`则变为`NULL`

全局变量在被清零的**数据段中获得空间。**

它*不是*特定于编译器的，而是在 C 标准中定义的。

所以它总是打印 0。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-15T12:55:46.887

`0`默认情况下，没有显式初始化器声明的文件范围对象会被初始化（`NULL`对于指针也是如此）。

在没有显式初始化程序的情况下声明的块范围内的非静态对象未初始化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T12:55:40.120

> 全局变量是否总是在 C 中初始化为零？

是的，它在 C 标准中定义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T12:55:14.337

它不是特定于编译器的。代码将始终打印`0`.

# c# - 使用模数和指数获取公钥

> ID：16015659
> 
> 赞同：0
> 
> 时间：2013-04-15T12:54:05.563
> 
> 标签：c#, openssl, public-key, modulus, exponent

嗨，所有另一个问题另一个问题..

我在一个解密加密消息的 C# 项目中。用于解密我正在使用 openssl。我可以使用私钥加密消息并使用以下代码解密公钥

```
CryptoKey key = CryptoKey.FromPrivateKey(prvkey, null);
RSA rsa = key.GetRSA();
byte[] alinan = System.Text.Encoding.UTF8.GetBytes(textBox1.Text);
byte[] sonuc = rsa.PrivateEncrypt(alinan, RSA.Padding.PKCS1);

key = CryptoKey.FromPublicKey(pubkey, null);
rsa = key.GetRSA();
byte[] cozulen = rsa.PublicDecrypt(sonuc, RSA.Padding.None); 
```

但是对于我的项目，我没有公钥，我只有模数和指数。我不知道如何使用模数和指数来获取公钥。我做了很多搜索，但我找不到任何正确的答案。有人有想法吗？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:53:50.087

至少在 c++ openssl 上，该过程是：

1 - 从字节数组（模数和指数）生成两个 BigNumber

2 - 创建一个新的（空的）RSA 对象

3 - 设置 RSA 对象的 n（模数）和 e（公共指数）属性。

您可以使用任何技术（java、java 卡等）复制此过程

# jquery - 如果没有多余的 li 项目，Jquery 不会显示更多/更少

> ID：16015662
> 
> 赞同：0
> 
> 时间：2013-04-15T12:54:07.600
> 
> 标签：jquery, html-lists, toggle, parent-child

我有多个列表：

```
 <ul id="list2">
            <li><a href="item.php?id=7">2A</a></li>
            <li><a href="item.php?id=2">2B</a></li>
            <li><a href="item.php?id=9">2C</a></li>
            <li><a href="item.php?id=4">2D</a></li>
            <li><a href="item.php?id=11">2E</a></li>
    </ul>
    <ul id="list3">
            <li><a href="item.php?id=7">3A</a></li>
            <li><a href="item.php?id=2">3B</a></li>
            <li><a href="item.php?id=9">3C</a></li>
    </ul> 
```

如果有超过 3 个列表项，我使用 jquery 来切换显示更多/更少的列表。

问题是，如果所有项目都可见并且没有任何项目可以切换，我不想更多/更少地显示文本。

查询：

```
 <script type="text/javascript">
    $('ul[id^=list]').each(function(){

    if ( $('ul[id^=list]').children().length > 3 ) {

        $(this).children('li:gt(3)').hide(); 
        $(this).after('<a href="#" class="showhideul">More/Less</a>');
    }
          });
          $('.showhideul').click(function(e){
                e.preventDefault();
                $(this).prev('ul[id^=list]').children('li:gt(3)').toggle('slow');
                $('ul[id^=list]').not($(this).prev('ul[id^=list]')).each(function(){
                      $(this).children('li:gt(3)').hide();
                });
          });
    </script> 
```

链接到我的代码：http: [//jsfiddle.net/Qvrsd/](http://jsfiddle.net/Qvrsd/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:59:01.223

看到这个：http: [//jsfiddle.net/Qvrsd/1/](http://jsfiddle.net/Qvrsd/1/)

```
$('ul[id^=list]').each(function () {

  if ($(this).children().length > 3) {     //<--  use $(this) instead of $('ul[id^=list]')

    $(this).children('li:gt(3)').hide();
    $(this).after('<a href="#" class="showhideul">More/Less</a>');
  }
});
$('.showhideul').click(function (e) {
  e.preventDefault();
  $(this).prev('ul[id^=list]').children('li:gt(3)').toggle('slow');
  $('ul[id^=list]').not($(this).prev('ul[id^=list]')).each(function () {
     $(this).children('li:gt(3)').hide();
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:00:47.587

在以下情况下使用`$(this)`，而不是`$('ul[id^=list]')`你很高兴去。

```
if ( $('ul[id^=list]').children().length > 3 ) {
    $(this).children('li:gt(3)').hide(); 
    $(this).after('<a href="#" class="showhideul">More/Less</a>');
} 
```

# iphone - UINavigationBar 透明背景色问题

> ID：16015666
> 
> 赞同：0
> 
> 时间：2013-04-15T12:54:12.637
> 
> 标签：iphone, ios, uinavigationbar, transparent

我在 UINavigationBar 上使用透明背景时遇到了一些问题，我总是得到一个黑色渐变......这是我的代码：

```
self.tableView = [[TableController_iPad alloc] initWithNibName:@"TableController_iPad" bundle:nil];

UINavigationController *navi = [[UINavigationController alloc] initWithRootViewController:self.tableView];
[navi.navigationBar setBackgroundColor:[UIColor clearColor]];
[navi.navigationBar setTintColor:[UIColor clearColor]];
[navi.navigationBar setTranslucent:YES];
[navi.navigationBar setOpaque:YES];
[navi.navigationBar setShadowImage:[UIImage imageNamed:@"trasparent.png"]];
[navi.navigationBar setBackgroundImage:[UIImage imageNamed:@"trasparent.png"] forBarMetrics:UIBarMetricsDefault];

[self addChildViewController:navi];

[viewTesti addSubview:navi.view]; 
```

# ruby-on-rails - 未定义的方法“to_i” 在使用工厂进行测试时

> ID：16015668
> 
> 赞同：0
> 
> 时间：2013-04-15T12:54:21.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, factory-bot, rspec-rails

我在使用 FactoryGirl 时遇到了这个问题。

每次我运行测试时，都会出现错误：未定义的方法 `to_i' for Array

我看不到它试图在哪里转换为整数。我最好的猜测是它试图将客户记录保存为数字，而不仅仅是保存记录的 ID。我尝试搜索文档以查看我是否错误地设置了工厂。

我`db:test:prepare`希望是这样的。

你能看到哪里出了问题吗？

**规格/工厂.rb**

```
FactoryGirl.define do

  factory :client do
    name     "Example"
    email    "email@example.com"
  end

  factory :book do
    title    "Book Title"
    client_id  {[FactoryGirl.create(:client)]}
  end

end 
```

**规范/视图/书籍/index.html.erb_spec.rb**

```
require 'spec_helper'

describe "books/index" do
  before do
    FactoryGirl.create(:book)
  end

  it "renders a list of books" do
    render
    # Run the generator again with the --webrat flag if you want to use webrat matchers
    assert_select "tr>td", :text => "Title".to_s, :count => 2
    assert_select "tr>td", :text => 1.to_s, :count => 2
  end
end 
```

**测试输出**

```
 1) books/index renders a list of books
     Failure/Error: FactoryGirl.create(:book)
     NoMethodError:
       undefined method `to_i' for #<Array:0x########>
     # ./spec/views/books/index.html.erb_spec.rb:5:in `(root)' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:12:25.593

你在定义工厂时犯了一个错误。

不要`FactoryGirl.create...`在定义内调用。

假设 book 有很多客户（虽然这很奇怪），您可以在客户中提及 book。像这样

```
FactoryGirl.define do

  factory :client do
    name     "Example"
    email    "email@example.com"
    book # Revised here. book refers to the symbol :book
  end

  factory :book do
    title    "Book Title"
  end

end 
```

就这样。你测试应该可以过去。

***PS关于模型关联的旁注：***

在您的环境中，一位客户只能拥有一本书！企业主不能通过这样的销售很快致富。正确的逻辑应该是：

一个客户可以有很多订单

一个订单可以有很多项目

一个项目只有一本书（id），但可能有很多部分。

但那是另一回事了。

# php - PHP 在不停止执行的情况下发送多封电子邮件

> ID：16015669
> 
> 赞同：0
> 
> 时间：2013-04-15T12:54:21.717
> 
> 标签：php, email, cakephp-2.0

当我尝试一次发送 400 多封电子邮件时，作为一个应用程序的邀请。我不想阻止正在邀请 400 人的用户，直到最后一封电子邮件发出为止。我不想同样使用 cron 作业，因为首先将电子邮件存储到数据库，然后设置一个 cron 作业，该作业将在后台处理电子邮件发送。

因为我想在后台运行这个过程。我也在尝试 Gearman。任何人有任何其他建议，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:02:11.393

您可以尝试将外部应用程序作为后台进程运行。

如果你的服务器运行的是 linux，你可以试试这个：

```
exec("sudo /path/to/external/application args > /dev/null 2>&1 &"); 
```

外部进程也可以是使用[PHP cli](http://php.net/manual/en/features.commandline.php)的 php 脚本。

# c# - 如何在 CodeBehind(aspx.cs) 文件中使用 JS 变量？

> ID：16015670
> 
> 赞同：-4
> 
> 时间：2013-04-15T12:54:22.203
> 
> 标签：c#, javascript

如何在我的代码隐藏（aspx.cs）文件中使用 Javascript 方法的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:56:53.780

您可以将变量的值保存在隐藏字段中，并将隐藏字段设置为 runat="server"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:58:22.027

将您的 javasctipt 变量的值设置为可在服务器端访问的表单元素

```
<input id="hdnName" type="hidden" runat="server" /> 
```

现在在js中设置值

```
var someJsVariable="Jon";
document.getElementById("hdnName").value=someJsVariable; 
```

因此，在您的服务器端代码（后面的代码）中，您可以访问`hdnName`元素并访问它的值。

# jsf - 如何在 .xhml 中的丰富：面板中插入一行 HtmlDataTable 获取事件选择

> ID：16015676
> 
> 赞同：1
> 
> 时间：2013-04-15T12:54:37.273
> 
> 标签：jsf, richfaces

我需要更改门户中太慢的例程。这是我的`.xhtml`文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jstl/core">
    <ui:composition>
    <a4j:outputPanel id="pending">
        <rich:panel

        style="border:none;background:transparent; width:100%; height:100%; padding:0px; margin:0px;"
        rendered="#{dataTableBean.noItemFound}" id="noItemFoundPanel">
        <ui:include src="/templates/message/noItemFound.xhtml" />
    </rich:panel>

    <rich:panel
        style="border:none;background:transparent; width:100%; height:100%; padding:0px; margin:0px;"
        rendered="#{detectTreeSelectedNode.hasNoSelectedNode}" id="noItemSelectedPanel">
        <ui:include src="/templates/message/noItemSelected.xhtml" />
    </rich:panel>

    <rich:panel
        style="border:none;background:transparent; width:100%; height:50%; padding:0px; margin:0px;position:absolute;overflow:auto;"
        panelTable>
    </rich:panel>

    <a4j:outputPanel ajaxRendered="true" layout="block"
        style="border:none;background:transparent; position:absolute; bottom:0px; left:0px; right:0px; height:50%; overflow:auto;"
        id="panelDetail">
            <div id="panelDetailContents" style="width:100%; height:100%;"><f:verbatim>#{htmlContentService.content}</f:verbatim></div>
        </a4j:outputPanel>
    </a4j:outputPanel>
</ui:composition>
</html> 
```

id 为的面板，在 Java 代码处`panelTable`接收一个`org.richfaces.component.html.HtmlDataTable`，这样：

```
public void updatePanelTable() {

    detectTreeSelectedNode.setHasNoSelectedNode(false);
    //mount the dynamic datatable
    HtmlDataTable dataTable = getHtmlDatatable();
    SelectedDocuments.clear();

    HTMLContentService service = SessionUtils.findBean("htmlContentService");
    service.updateContent(null);

    UIComponent panel = (UIComponent) FacesContext.getCurrentInstance().getViewRoot()
            .findComponent("principal:panelTable");

    panel.getChildren().clear();
    panel.getChildren().add(dataTable);

    panel = (UIComponent) FacesContext.getCurrentInstance().getViewRoot().findComponent("principal:panelDetail");
    panel.getChildren().clear();        
} 
```

实际上，每个单元格都有一个侦听器`HtmlDataTable`，在我看来是错误的方式，我想获得事件行选择，没有侦听器并调用处理行选择的方法，我该怎么做才能进入`.xhtml`面板的孩子并得到他的事件？

`pom.xml`供参考：

```
<dependency>
 <groupId>javax.faces</groupId>
 <artifactId>jsf-api</artifactId>
 <version>1.2_12</version>
 <scope>provided</scope>
</dependency>
<dependency>
 <groupId>javax.faces</groupId>
 <artifactId>jsf-impl</artifactId>
 <version>1.2_12</version>
 <scope>provided</scope>
</dependency>
<dependency>
 <groupId>com.sun.facelets</groupId>
 <artifactId>jsf-facelets</artifactId>
 <version>1.1.14</version>
 <scope>compile</scope>
</dependency>
<dependency>
 <groupId>org.richfaces.framework</groupId>
 <artifactId>richfaces-impl</artifactId>
 <version>3.3.1.GA</version>
</dependency>
<dependency>
 <groupId>org.richfaces.framework</groupId>
 <artifactId>richfaces-api</artifactId>
 <version>3.3.1.GA</version>
</dependency>
<dependency>
 <groupId>org.richfaces.ui</groupId>
 <artifactId>richfaces-ui</artifactId>
 <version>3.3.1.GA</version>
</dependency> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:25:48.337

首先，我会删除那些内联样式。

其次，您可以使用[标记来呈现表格](http://livedemo.exadel.com/richfaces-demo/richfaces/extendedDataTable.jsf?c=extendedDataTable&tab=usage)（单击“查看源代码”）。使用它，您应该能够轻松地将侦听器添加到行而不是单元格或您想要的任何内容。

希望能帮助到你。

# xml - XSLT：XML-XML（转换后的文件中没有 XML 标记）

> ID：16015684
> 
> 赞同：0
> 
> 时间：2013-04-15T12:54:54.287
> 
> 标签：xml, xslt-1.0

我对 XSLT 很陌生，并试图将给定的 XML 文件翻译成另一个。

原始文件具有以下结构：

```
<metadataContainerType xmlns:ns2="http://www.w3.org/1999/02/22-rdf-syntax-ns#"xmlns:ns3="http://textgrid.info/namespaces/metadata/core/2010">
<ns3:object>
    <ns3:generic>
        <ns3:provided>
            <ns3:title>Tfghfv</ns3:title>
            <ns3:identifier type="METSXMLID">T0072-00213-THUMB</ns3:identifier>
            <ns3:format>image/jpeg</ns3:format>
        </ns3:provided>
        <ns3:generated>
                <ns3:created>2012-11-07T11:30:20.085+01:00</ns3:created>
                <ns3:lastModified>2012-11-07T11:30:20.085+01:00</ns3:lastModified>
                <ns3:issued>2012-11-07T11:30:20.085+01:00</ns3:issued>
                <ns3:revision>0</ns3:revision>
                <ns3:extent>7055</ns3:extent>
                <ns3:project id="TGPR-1e31ce14-d7d9-3023-e8c9-501a7552a1f2">St. Matthias Test 07</ns3:project>

        </ns3:generated>
    </ns3:generic>
 </ns3:object>
</metadataContainerType> 
```

我想将其转换为以下形式：

```
<add><doc>
    <field name="id">455HHS-2232</field>
    <field name="title">T0072-00031-DOWNLOAD - Blatt 12v</field>
    <field name="format">application/pdf</field>
    <field name="created">2012-11-07T11:15:19.887Z</field>
    <field name="last_modified">2012-11-07T11:15:19.887Z</field>
    <field name="issued">2012-11-07T11:15:19.887Z</field>
</doc></add> 
```

但是当我转换文件时，我错过了 XML 标记，它只显示节点的内容。也许你们中的某个人可以帮助我。

我的 XSLT 快照如下所示：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:ns2="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:ns3="http://textgrid.info/namespaces/metadata/core/2010">
<xsl:output method="xml" indent="yes" encoding="UTF-8"/>
<xsl:template match="/ns3:object">
     <add><doc>

         <!-- the provided metadata fields -->
        <field name="title">
            <xsl:apply-templates select="ns3:generic/ns3:provided/ns3:title"/>
        </field>

        <field name="identifier_type">
            <xsl:value-of select="ns3:generic/ns3:provided/ns3:identifier_type"/>
        </field>

        <xsl:element name="field">
            <xsl:value-of select="ns3:generic/ns3:provided/ns3:format"/>
        </xsl:element>
    ...
    </doc></add>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:42:31.593

您的模板匹配`/ns3:object`. 这意味着匹配作为`ns3:object`根节点的子节点的元素。由于`ns3:object`源 XML 中的元素是根节点的子`metadataContainerType`节点而不是根节点，因此您的模板应该简单地匹配`ns3:object`（不带前导斜杠）。

# function - 使用 F# 的子记录

> ID：16015695
> 
> 赞同：1
> 
> 时间：2013-04-15T12:55:16.777
> 
> 标签：function, parameters, f#, record

假设以下代码：

```
type Large = { v1: int; v2: int }
type Small = { v1: int }

let fn (value: Small) = printfn "%d" value.v1
// or
let fn (value: {v1: int}) = printfn "%d" value.v1

let large = { v1 = 5; v2 = 6 }
fn large 
```

`Small`基本上是一个子记录`Large`。`fn large`引发错误。有什么“好”的方法可以让它发挥作用吗？

背景：

通常情况下，您有大量数据。您希望将该数据作为参数传递给用户提供的未知函数。您唯一知道的是该函数将需要一部分数据。但是您不知道数据的哪一部分，也不知道`Small`类型。你只知道`Large`类型。一种选择是以`large`记录的形式将所有数据发送到未知函数。但我认为，如果该函数只使用其中的一小部分，它`fn`就不应该接受数据。数据只会使`Large`函数更难阅读、理解和单元测试。在我看来，该功能应该只接受它需要的东西而不接受其他任何东西，但在前面我不知道哪个部分`Large``fn``fn``Large`键入所需的`fn`功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:17:17.040

接口可能更适合您在更新的问题中描述的内容：

```
type Small =
    abstract v1 : int
type Large =
    inherit Small
    abstract v2 : int

let fn (value: Small) = printfn "%d" value.v1

let large = 
    { new Large with
        member small.v1 = 5
        member large.v2 = 6 }

fn large 
```

有了接口，`Large`类型现在可以由一种或多种`Small`类型组成。函数只能期望`Small`它们需要的类型，调用者可以简单地将`Large`类型传递给每个函数。

根据场景，您还可以考虑使用`Large`实现一个或多个`Small`接口的记录类型。

```
type Small = abstract v1 : int
type Large = { v1: int; v2: int } with
    interface Small with member this.v1 = this.v1

let fn (value: Small) = printfn "%d" value.v1

let large = { v1 = 5; v2 = 6 }

fn large 
```

另一种选择是为所有可能的`Small`项目定义一个联合，并定义`Large`为一个列表：

```
type Item =
    | V1 of int
    | V2 of int

type Large = Item list

let (|Small|) (large:Large) = 
    large |> List.pick (function V1(v1) -> Some(v1)  | _ -> None)

let fn (Small value) = printfn "%d" value

let large = [V1(5);V2(6)]    

fn large 
```

[活动模式](http://msdn.microsoft.com/en-gb/library/dd233248.aspx)可用于`Small`从数据中提取类型。这种方案的一个例子是[FIX 协议](http://www.fixprotocol.org/)，它由小的标记数据块组成大的金融数据块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:23:24.653

如果你真的事先不知道 Large fn 的哪一部分会用到，那你就必须全力以赴。这是唯一语义正确的选择。

现在您可能会感到困惑，因为您觉得 fn 并不需要所有这些，因为fn 是*一种*函数，而您只是缺少为该类函数命名的名称。

一个你给这个类命名，你可以将 Large 减少到它需要访问的部分，或者在一个通用的部分中打破 fn ，另一个与你的类型相关联的函数类，比如

```
type Large = { v1: int; v2: int }
   with x.AdaptToPrintable() =  x.v1.ToString() 
```

和

```
fn x = printfn "%A" x 
```

PS：如果您的问题在于语义或指定值的操作方面，我想我会感到困惑。如果是后者，那么菲尔的答案似乎是最好的..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T07:27:49.540

基于以下几点：

[F# 记录的奇怪行为](https://stackoverflow.com/questions/16016087/strange-behavior-of-f-records)：

> 重要的是要意识到 F# 不使用结构类型（这意味着您不能将具有更多字段的记录用作获取具有较少字段的记录的函数的参数）。这可能是一个有用的特性，但它不适合 .NET 类型系统。这基本上意味着你不能期望太花哨的东西 - 参数必须是众所周知的命名记录类型的记录。

尼古拉斯：

> 如果你真的事先不知道 Large fn 的哪一部分会用到，那你就必须全力以赴。这是唯一语义正确的选择。

我提出了两种可能的解决方案：

**解决方案 1**

我基本上将用户功能一分为二。好处是`reducedPostprocessFn`它只接受它需要的东西。因此，此功能易于推理和单元测试。`postprocessFn`太短了，看它的作用也很简单。我发现这个解决方案类似于`Phillip Trelford`. 我想知道主动模式的优势是什么？

```
(* simulation *)

type Large = {v1: int; v2: int}

let simulation postprocessFn =
  let large = {v1 = 1; v2 = 2}
  postprocessFn large

(* user *)

let reducedPostprocessFn (v1: int) =
  printfn "%d" v1

let postprocessFn (large: Large) =
  reducedPostprocessFn large.v1

simulation postprocessFn 
```

**解决方案 2**

此解决方案使用鸭子类型，但是：

[http://msdn.microsoft.com/en-us/library/dd233203.aspx](http://msdn.microsoft.com/en-us/library/dd233203.aspx)

> 显式成员约束：……不适合通用。

[F# 和鸭式打字](https://stackoverflow.com/questions/7065939/f-and-duck-typing)

> 我只记得这不适用于记录类型。从技术上讲，它们的成员是字段，尽管您可以使用 with member ... 与成员一起修改它们。

所以我使用了一个普通的类而不是记录。现在我只使用一个函数而不是两个函数，但老实说，在 F# 中输入鸭子实在是太难看了。

```
(* simulation *)

type Large(v1, v2) =
  member o.v1 = v1
  member o.v2 = v2

let simulation postprocessFn =
  let large = Large(1, 2)
  postprocessFn large

(* user 2 *)

let inline postprocessFn small =
  let v = (^a: (member v1: int) small)
  printfn "%d" v

simulation postprocessFn 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T08:03:44.723

> 大数据只会使 fn 函数更难阅读、理解和单元测试。

我不确定我是否正确解决了问题。但如果主要问题是关于可读性和可测试性，那么也许只使用转换函数

```
let forgetful (large : Large) = ({v1=large.v1} : Small) 
```

然后写你的功能

```
let fn (value: Small) = printfn "%d" value.v1 
```

它是可读/可测试的，并通过规定得到期望函数 f

```
let f x = fn (forgetful x) 
```

不再需要测试了..

# php - Smarty 函数返回一个未解释的 smarty 标签

> ID：16015699
> 
> 赞同：0
> 
> 时间：2013-04-15T12:55:29.323
> 
> 标签：php, smarty

我为我的 CMS 创建了一个自定义函数 smarty：

```
{$page->title|inter} 
```

所以，这个标签，当它被解释时，调用我的自定义函数`smarty_modifier_inter`，检索一个 html 代码，做一些动作然后返回它。

在这个 html 中，我可以有其他 smarty 标签。但是，我只是看到，如果一个函数 smarty 返回 smarty 代码，这个 smarty 代码不会被解释......

所以，我的页面上有一个`{$page->title|inter}`未解释的标签。

你有什么想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:09:15.400

我想你的意思是 smarty_modifier_inter() 返回 smarty 代码，你希望这个 smarty 代码自己解析？Smarty 只会为每个修饰符解析一次您的模板，因此它不会解析返回的 smarty 标签（实际上我假设它会在原始模板正文中运行所有函数，因此它不会解析任何返回的 smarty 标签）。

实现您正在寻找的一种方法是在修饰符内实现递归。例如，假设您的修饰符如下所示：

```
function smarty_modifier_inter($string)
{
    $html = some_function($string);  //This may contain a smarty tag, such as {$page->title|inter}
    return $html;
} 
```

您可以将其更改为：

```
function smarty_modifier_inter($string)
{
    $html = some_function($string);  //This may contain a smarty tag, such as {$page->title|inter}
    if (preg_match("/".preg_quote("{$")."/", $html)) {     //A very quick and dirty way to see if there are any smarty variables within your template
        $html = smarty_modifier_inter($html);  //This may contain a smarty tag, such as {$page->title|inter}
    } 

    return $html;
} 
```

这将反复运行 smarty_modifier_inter 到您的字符串，直到它不再包含 smarty 变量。显然，这很容易受到无限循环的影响，因此请谨慎使用！

如果您确定将有单级递归，那么您最多可以简单地在数据上运行您的函数一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:14:36.073

Smarty 函数是一种从输入（Smarty 模板）到输出（通常是 HTML）的方法；它们不是生成将递归呈现的更多 Smarty 代码的方法。

您可以使用[pre-filter做您想做的事，它在 Smarty 自己处理](http://www.smarty.net/docs/en/plugins.prefilters.postfilters.tpl)*之前*在 Smarty 模板源上运行，但这并不像编写自定义函数那么容易。

更有希望的是，Smarty3 包含一个[`string:`资源](http://www.smarty.net/docs/en/resources.string.tpl)，它允许您呈现一个字符串，就好像它是模板的内容一样。

所以在你的自定义函数中，你可以有这样的东西：

```
function smarty_function_get_more_smarty($params, $smarty_instance)
{
    $code = get_code_from_somewhere($params['foo'], $params['bar']);
    // $code might be something like '<h1>My Awesome Site - {$title}</h1>'
    return $smarty_instance->fetch('string:' . $code);
} 
```

`string:`请注意，我没有测试过此代码或曾经使用过此功能，因此请阅读手册以了解转义选项以及和之间的区别`eval:`。

此外，虽然表面上这不是显式递归的，但如果`$code`最终再次调用同一个自定义函数，您最终将回到同一个函数，因此请确保以某种方式防止无限递归！

# perl - Perl中哈希的反向哈希

> ID：16015704
> 
> 赞同：-1
> 
> 时间：2013-04-15T12:55:42.303
> 
> 标签：perl, json, hash-of-hashes

我通过解码 JSON 数据得到了这个输出。

现在我想反转这个数据结构并使用 Perl 打印它。

任何人都可以帮助我使用下面的代码片段吗？

我将这些数据保存在一个变量中并打印出来。我的输出如下图所示

我有一个看起来像这样的哈希值：

```
$VAR1 = {
    'Packet Loss to Source' => {
        '142' => {
            '161' => '0.000',
            '162' => '0.000',
            '141' => '0.000'
        }
    },
    'Packet Loss to Destination' => {
        '142' => {
            '161' => '0.000',
            '162' => '0.000',
            '141' => '0.000'
        }
    },
    'Average Jitter to Source' => {
        '142' => {
            '161' => '13.323',
            '162' => '37.003',
            '141' => '192.309'
        }
    },
    'Availability' => {
        '142' => {
            '161' => '0.000',
            '162' => '0.000',
            '141' => '1.042'
        }
    },
    'Average Round Trip Time' => {
        '142' => {
            '161' => '772.278',
            '162' => '389.566',
            '141' => '8557.511'
        }
    },
    'Average Jitter to Destination' => {

        '142' => {
            '161' => '13.323',
            '162' => '37.003',
            '141' => '192.309'
        }
    }
}; 
```

这是我试图获取输出的代码。我阅读文本文件并获取 JSON 数据，对其进行解码并打印。我在变量中得到了上述输出`$perl_obj`。

```
#my $dirname = "/home/brix/ravikiran/doc/demo.txt";
my $dirname = "/home/brix/ravikiran/doc/JSONData.txt";

open HANDLE, $dirname;
my @raw_data = <HANDLE>;
my $json_text;
foreach my $row (@raw_data) {
    $json_text .= $row;
}
close(HANDLE);

print "$json_text;\n";
my $json = JSON::XS->new();
$json = json->pretty(1)->
    space_before(1)->
    space_after(1)->
    canonical(1)->
    allow_blessed(1)->
    convert_blessed(1);

my $perl_obj = $json->decode($json_text);
print STDOUT Dumper($perl_obj); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:35:35.887

您可能不想[反转](http://perldoc.perl.org/functions/reverse.html)任何散列（至少在 Perl 使用该关键字的意义上），因为这涉及交换键和值。您可能想要做的是更改多级哈希中键的顺序。

这是交换外部两层的方法：

```
use warnings;
use strict;

my $new_obj;
foreach my $outer_key (keys %$perl_obj)
{
    foreach my $inner_key (keys %{$perl_obj->{$outer_key}})
    {
        $new_obj->{$inner_key}->{$outer_key} = 
            $perl_obj->{$outer_key}->{$inner_key};  
    }
}

use Data::Dumper;
print Dumper $new_obj; 
```

输出：

```
$VAR1 = {
          '142' => {
                     'Packet Loss to Source' => {
                                                  '161' => '0.000',
                                                  '162' => '0.000',
                                                  '141' => '0.000'
                                                },
                     'Packet Loss to Destination' => {
                                                       '161' => '0.000',
                                                       '162' => '0.000',
                                                       '141' => '0.000'
                                                     },
          ...etc... 
```

你可以像这样完全反转它：

```
my $new_obj;
foreach my $outer_key (keys %$perl_obj)
{
    foreach my $inner_key (keys %{$perl_obj->{$outer_key}})
    {
        foreach my $innest_key (keys %{$perl_obj->{$outer_key}->{$inner_key}})
        {
            $new_obj->{$innest_key}->{$inner_key}->{$outer_key} = 
                $perl_obj->{$outer_key}->{$inner_key}->{$innest_key};   
        }
    }
}

use Data::Dumper;
print Dumper $new_obj; 
```

# php - PHP变量返回2个不同的值？

> ID：16015711
> 
> 赞同：0
> 
> 时间：2013-04-15T12:55:49.763
> 
> 标签：php, mysql

我希望 $userhp1 打印到屏幕上，并保存到分配的 sql 表中。这很好用，但它们都返回不同的结果。反正有没有让它们返回相同的值？

```
ob_start();
vitality(); //runs vitality function
$uservit = ob_get_contents(); // stores result on $uservit
ob_end_clean();
echo "-Vitality:"; 
echo "$uservit<br />";// Prints vitality
$userhp1 = $uservit * 2.8; // multiplys vitality too create HP
$userhp2 = $userhp1;

echo "-HP From vit:";
echo "$userhp2"; // prints hp

$con=mysqli_connect("localhost", "***", "***", "***");
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

mysqli_query($con,"UPDATE users SET hp=$userhp2 
WHERE id='1'");
mysqli_close($con); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:06:20.833

您的代码中有两处错误：

```
ob_start();
vitality();
$uservit = ob_get_contents(); 
```

在这里，您似乎正在使用`ob_*`函数族从函数返回值。`ob_get_contents`将返回一个字符串，您似乎对此并不满意，因为您将它用作整数：

```
$userhp1 = $uservit * 2.8; 
```

您可以只`return`从函数中获取值。输出缓冲用于其他用途。

其次，您正在声明`$userhp2 = $userhp1;`，然后您既不修改`$userhp1`也不修改`$userhp2`. 你为什么不直接使用`$userhp1`over`$userhp2`而从不设置后者呢？

*附带说明：`mysql_*`功能正在被删除并且已被弃用。请改用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)。*

# hibernate - 防止休眠引发的验证消息显示在 JSF [年龄

> ID：16015712
> 
> 赞同：0
> 
> 时间：2013-04-15T12:55:52.753
> 
> 标签：hibernate, jsf, bean-validation

我的 JPA 实体
代码示例有 Min 和 Max 注释

```
@Min(value=1)
private int id;
@Max(value=10)
private int count;
//getters and setters 
```

在 JSF 页面中，从这些注释返回一条消息，我还添加了我自己的验证（JSF 验证），在验证案例中我需要我自己的 msg
2 消息显示休眠消息引用 Min 和 Max 注释和我的 f:validateXXX 消息

我是什么想要保留注释但防止休眠消息显示在我的页面中并且不跳过验证只跳过显示休眠消息并保留我自己的消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:13:14.033

您应该能够通过将以下内容添加到 web.xml 来禁用 Bean Validation 作为 JSF 的一部分：

```
<context-param>
    <param-name>javax.faces.validator.DISABLE_DEFAULT_BEAN_VALIDATOR</param-name>
    <param-value>true</param-value>
</context-param> 
```

# python - 浏览器在 @login_required 上正确重定向，但在使用 urllib2 时不正确

> ID：16015713
> 
> 赞同：0
> 
> 时间：2013-04-15T12:55:56.740
> 
> 标签：python, django, authentication, urllib2, login-required

我正在使用 unnitest.TestCase 测试测试 Django 应用程序。

```
if test['auth']:
    full_url = '{}/{}'.format(host, test['url'])
    request = urllib2.Request(full_url)
    cj = cookielib.CookieJar()
    opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
    urllib2.install_opener(opener)

    urlh = urllib2.urlopen(full_url)
    html = urlh.read()

    doc = BeautifulSoup(html)
    csrf_input = doc.find(attrs = dict(name = 'csrfmiddlewaretoken'))
    csrf_token = csrf_input['value']

    params = urllib.urlencode(dict(username = test['username'], password=test['password'], 
           csrfmiddlewaretoken = csrf_token, user=CustomUser.objects.get(id=2), next=test['url']))
    urlh = urllib2.urlopen(full_url, params)
    output = urlh.read()
    print 'Checking {} for "{}" string at {}.'.format(test['url'], test['test_string'], host)
    print output
    if test['test_string'] in output:
        return True
    else:
        return False 
```

进入此页面的测试数据如下所示：

```
{
    'url' : '/manager/',
    'test_string' : 'Manage your jobs',
    'comment' : 'testing string in page',
    'hosts' : (hosts['test'],),
    'auth' : True,
    'username' : 'poster',
    'password' : 'poster',
    'active' : True,
}, 
```

*为了完整起见：hosts['test'] 等于 'http://:' 它通过*for host in hosts: ...调用 http_string_tester*

我要检查的页面要求用户登录（此页面 url 是“/manager/”）：

```
@login_required(login_url='/auth/login/')
def index(request):

    # Get list of jobs that were created by the user
    job_list = Job.objects.filter(poster_id=request.user.id)

    return render_to_response(
        'manager/index.html',
        {
            'page_title'    :   'Manager',   # title for html page
            'app_name'      :   SITENAME,          # Site's proper name
            'job_list'      :   job_list,          
            'request'       :   request,
        },
        context_instance = RequestContext(request),
    ) 
```

登录视图 ('/auth/login/') 如下所示：

```
def dologin(request):

    message = 'blah'
    user = []

    if request.method == 'POST':

        username = request.POST['username']
        password = request.POST['password']

        user = authenticate(
            username = username,
            password = password,
        )

        if user is not None and hasattr(user, 'verified'):
            if user.verified and user.is_active:
                message = 'authenticated'
                login(request, user)

                # This section seems to be required so that I can redirect properly in 
                # the browser but in the test it seems to be a hindrance.
                if request.POST['next'] is not None:
                    print 'NEXT is '+str(request.POST['next'])
                    return HttpResponseRedirect(request.POST['next'])
                else:
                    return HttpResponseRedirect('/')

        # .............. #

    # The rest
    if request.method == 'GET' and 'next' in request.GET:
        next = request.GET['next']
    else:
        next = None

    print 'NEXT is '+str(next)

    return render_to_response(
        'auth/login.html',
        {
            'page_title' : 'Log in to {}'.format(SITENAME),
            'app_name' : SITENAME,
            'message' : message,
            'next' : next,
        },
        context_instance = RequestContext(request),
    ) 
```

当我运行测试时，我在日志中得到以下信息（来自 .manage.py runserver）：

```
Development server is running at http://<hostname:port>/
Quit the server with CONTROL-C.
[15/Apr/2013 08:21:53] "GET /manager/ HTTP/1.1" 302 0
NEXT is /manager/
[15/Apr/2013 08:21:53] "GET /auth/login/?next=/manager/ HTTP/1.1" 200 2973
[15/Apr/2013 08:21:53] "POST /manager/ HTTP/1.1" 302 0
NEXT is /manager/
[15/Apr/2013 08:21:53] "GET /auth/login/?next=/manager/ HTTP/1.1" 200 2973 
```

因此，看来我能够到达 /manager/ 但使用 302（重定向 - 这是有道理的），然后我被重定向到 /auth/login/?next=/manager/ 将我发送到 / manager/ 但再次返回 302 到 /auth/login/?next.... 这样它就告诉我它不接受此用户已登录。我已经验证当我点击我的应用程序时整个过程都有效。这些是步骤：

使用网络浏览器，我转到 http://:/manager/ 这会将我重定向到 http://:/auth/login/?next=/manager/ 我使用 'poster:poster' 登录的地方然后将我重定向到http://:/manager/ 我可以按预期看到页面。

FWIW，我的一项测试只是进入登录页面，可以登录并从输出中提取预期信息，但这似乎在这里不起作用。

我正在寻求一些指导。使用浏览器可以正确重定向我，但这个 urllib2 调用似乎没有这样做。我希望有人能解释为什么这不能像我预期的那样工作。如果您需要任何进一步的信息，请告诉我。

更新：

响应标头分别来自每个打开的：

```
HEADERS are Date: Mon, 15 Apr 2013 13:42:33 GMT
Server: WSGIServer/0.1 Python/2.7.3
Vary: Cookie
Content-Type: text/html; charset=utf-8
Set-Cookie:  csrftoken=TYEE6upwq20wNoobztYWHlIjnIQ8qc2u; expires=Mon, 14-Apr-2014 13:42:33 GMT; Max-Age=31449600; Path=/

PARAMS are username=poster&csrfmiddlewaretoken=TYEE6upwq20wNoobztYWHlIjnIQ8qc2u&password=poster&user=poster&next=%2Fmanager%2F

RESPONSE HEADERS are Date: Mon, 15 Apr 2013 13:42:33 GMT
Server: WSGIServer/0.1 Python/2.7.3
Vary: Cookie
Content-Type: text/html; charset=utf-8
Set-Cookie:  csrftoken=TYEE6upwq20wNoobztYWHlIjnIQ8qc2u; expires=Mon, 14-Apr-2014 13:42:33 GMT; Max-Age=31449600; Path=/ 
```

# php - jscrollpane重新初始化不起作用

> ID：16015717
> 
> 赞同：0
> 
> 时间：2013-04-15T12:56:08.043
> 
> 标签：php, jquery, jscrollpane

请按照下面的代码详细了解我的未重新初始化的 jscrollpane。评论将帮助您理解代码。

```
//in the main php file styles - 

    live-demo {width: 550px;height:500px;overflow: auto; }

//under script tag

    var ms_js = jQuery.noConflict();        
    ms_js(function(){   
    ms_js('#live-demo').My_func
    ({ 
      id:'2211155996',...... // all params for this function call located in antoher js file 
    });

//in the external js file - 

    (function($) { 
    $.fn.My_func = function(options) {
    ...all data getting codes here by ajax which outputs data to #live-demo...
    ...

    //also here have jscrollpane declaration for live-demo div

    jQuery.noConflict();
    jQuery(function(){ jQuery('#live-demo'+o.show_suffixs+'').jScrollPane(); });

    })(jQuery);

//in the main php file again under script tag

    ms_js("#msfb_clickbtn").click(function(){ 
    var container = ms_js('#live-demo');
    var api = container.data('jsp');    

    ms_js('#live-demo').My_func({ 
    id:'2211155996',...//call again for data as above
    });

    api.reinitialise();

    });

//script ends

//this button click call to reaload ajax data again as above script does

    input id="msfb_clickbtn" type="button" value="test" 
```

但是在按钮单击时，我看到数据已加载到实时演示 div 中，但未显示滚动窗格

# php - 无法使用 Symfony 在 FOSRestful 中找到控制器

> ID：16015718
> 
> 赞同：2
> 
> 时间：2013-04-15T12:56:08.960
> 
> 标签：php, symfony, fosrestbundle

我正在尝试版本中的`FOSRestful`示例，`Symfony 2`但出现以下错误

> 无法从“/Library/WebServer/Documents/symfony/app/config/routing_dev.yml”导入资源“@AcmeDemoBundle/Controller/UsersController”。确保“AcmeDemoBundle”包已正确注册并加载到应用程序内核类中。

因为我是新手所以我不知道 FOSRestfulBundle 是否安装正确所以我在这里发布所有步骤

到目前为止，我已经完成了以下设置

1\. 在`AppKernel.php`

> ```
>  new JMS\SerializerBundle\JMSSerializerBundle(),
>  new FOS\RestBundle\FOSRestBundle(), 
> ```

2\. 在作曲家.json

> ```
> "jms/serializer-bundle": "dev-master",
> "friendsofsymfony/rest-bundle": "dev-master" 
> ```

3\. 在 config.yml

> ```
> fos_rest:
>     routing_loader:
>         default_format: json 
> ```

4\. 在 routing_dev.yml

> ```
> users:
>     type:     rest
>     resource: "@AcmeDemoBundle/Controller/UsersController"    
>     prefix: /users 
> ```

5\. 以下是 的内容`UsersController` ，在里面 `Acme/DemoBundle/Controller`

```
<?php

namespace Acme\DemoBundle\Controller;

use Acme\DemoBundle\Model\User;
use Acme\DemoBundle\Model\UserQuery;
use FOS\RestBundle\Controller\Annotations as Rest;
use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;

class UsersController
{
    /**
     * @Rest\View
     */
    public function allAction()
    {
        $users = UserQuery::create()->find();

        return array('users' => $users);
    }

    /**
     * @Rest\View
     */
    public function getAction($id)
    {
        $user = UserQuery::create()->findPk($id);

        if (!$user instanceof User) {
            throw new NotFoundHttpException('User not found');
        }

        return array('user' => $user);
    }
}

?> 
```

6.composer.json

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.2.*",
        "doctrine/orm": "~2.2,>=2.2.3",
        "doctrine/doctrine-bundle": "1.2.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.2.*",
        "symfony/monolog-bundle": "2.2.*",
        "sensio/distribution-bundle": "2.2.*",
        "sensio/framework-extra-bundle": "2.2.*",
        "sensio/generator-bundle": "2.2.*",
        "jms/security-extra-bundle": "1.4.*",
        "jms/di-extra-bundle": "1.3.*",
        "jms/serializer-bundle": "dev-master",
        "friendsofsymfony/rest-bundle": "dev-master"

    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "config": {
        "bin-dir": "bin"
    },
    "minimum-stability": "alpha",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web",
        "branch-alias": {
            "dev-master": "2.2-dev"
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:55:18.690

我已经通过将`.php`扩展附加到`UsersController`in来解决它`routing_dev.yml`

所以正确的输入是

```
resource: "@AcmeDemoBundle/Controller/UsersController.php" 
```

# ios - 在 iOS 6 中以编程方式调用 willAnimateRotationToInterfaceOrientation

> ID：16015720
> 
> 赞同：1
> 
> 时间：2013-04-15T12:45:25.533
> 
> 标签：ios, orientation

在我的具有其他视图控制器的视图控制器中，在 iOS 5 中，它可以正常工作，因为它调用`willAnimateRotationToInterfaceOrientation`方法。如果我旋转设备，iOS 将调用`willAnimateRotationToInterfaceOrientation`，并且应用程序正常运行，但是当应用程序首次启动时，它不会。然后我尝试调用`willAnimateRotationToInterfaceOrientation`viewWillAppear，但它没有帮助。

我如何以`willAnimateRotationToInterfaceOrientation`编程方式或其他方式调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:59:51.717

`willAnimateRotationToInterfaceOrientation:duration:`是仅应由设备调用的几种方法之一。它唯一的特殊之处在于它被调用的时候，所以如果你将它的功能提取到另一个方法中，你应该能够随意调用该功能（在这种情况下，在 中`viewWillAppear`）。

```
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [self prepareToRotate];
}

-(void)prepareToRotate {
    // existing functionality goes here
} 
```

请注意，如果您使用`toInterfaceOrientation`or`duration`您还应该将它们作为参数包含在`prepareToRotate`.

# excel - Excel 计数错误

> ID：16015722
> 
> 赞同：1
> 
> 时间：2013-04-15T12:56:18.890
> 
> 标签：excel, excel-2007

我正在尝试对具有应大于 0 且性别应为 MALE 的条件的潜在客户计数数据求和。我不想使用`countifs`，因为它不受 excelcius 支持。

我尝试了以下公式：

```
=IF('Universe data'!R2:R801>0,IF('Universe data'!H2:H801=MALE,COUNT('Universe data'!R2:R801))) 
```

它给了我一个 #N/A 错误。

这如何使用 COUNTIF 来完成？

这是数据：我想要的操作是潜在客户数不为 0 的男性的总和，答案应该是 10，我如何计算男性和女性的数量 countif 给出所有行或 0

```
gender    lead count      
--------  -----------
MALE            0
MALE            6
FEMALE          1
FEMALE          2
MALE            1
FEMALE          1
MALE            3
FEMALE          1
MALE            0
MALE            0 
```

感谢和问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:29:46.767

I got a working solution to this. But it works only because the value you do not want to count is 0.

use `=SUMIF(A:A;"MALE";B:B)`

This is how it looks in my example: ![enter image description here](https://i.stack.imgur.com/l3F4x.jpg)

**Edit:** If you want to count male with a value above 0, and add 1 for each regardless of their value. Add another column And write this if statement in the column: `=IF(B2<>0;1;0)`

Then use this formula: `=SUMIF(A:A;"MALE";C:C)` ![enter image description here](https://i.stack.imgur.com/8QHMm.jpg)

Hope this is what you wanted. If not give me some feedback and ill try to adopt it. :)

# java - android自定义列表不显示

> ID：16015723
> 
> 赞同：0
> 
> 时间：2013-04-15T12:56:19.383
> 
> 标签：java, android, list, custom-lists

我在显示自定义列表时遇到问题我检查了数组，它不是空的，但列表仍然没有显示：

适配器类：

```
public class ReportAdapter extends BaseAdapter{

private Context context;  
Report data[] = null;

public ReportAdapter(Context context, Report[] d) {
    data = d;
    this.context = context;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row=convertView;

    if(convertView == null){
        LayoutInflater inf = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
        row = inf.inflate(R.layout.list_row, null);
    }

        ImageView imageUrl = (ImageView)row.findViewById(R.id.imageUrl);
        TextView reportName = (TextView)row.findViewById(R.id.reportName);
        TextView reportState = (TextView)row.findViewById(R.id.reportState);
        TextView reportTime = (TextView)row.findViewById(R.id.reportTime);

    //Report report = data[position];

    imageUrl.setImageDrawable(data[position].Image);
    reportName.setText(data[position].Name);
    reportState.setText(data[position].State);
    reportTime.setText(data[position].Time);

    return row;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return 0;
}
} 
```

报告类：

```
 public class Report {
public String Name;
public String Time;
public Drawable Image;
public String State;
public Report(){
    super();
}

public Report(String Name, String Time,Drawable Image,String State) {
    super();
    this.Name = Name;
    this.Time = Time;
    this.Image = Image;
    this.State = State;
} 
```

}

主类：

```
 Report report_data[] = new Report[reports.length()];
 //start loop
 report_data[i] = new Report(c.getString(TAG_TITLE),c.getString(TAG_TIME),drawable,"Pidding");
 // end loop
list = (ListView)findViewById(R.id.list);
ReportAdapter adapter = new   ReportAdapter(Display_Reports.this,report_data);
list.setAdapter(adapter); 
```

我确定代码是正确的，但是我还没有发现一个小错误。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:57:54.373

在您的适配器中，在`getCount()`您中`return 0`。您应该返回列表的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:01:34.207

做这个：

```
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return data.length;
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return data[position];
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
} 
```

也请尝试使用有效的`ListView`技术，如 View Holder 模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:59:22.970

尝试一下

```
 Report report_data[] = new Report[reports.length()];
 report_data[i] = new Report(c.getString(TAG_TITLE),c.getString(TAG_TIME),drawable,"Pidding");
 list = (ListView)findViewById(R.id.list);
 ReportAdapter adapter = new   ReportAdapter(Display_Reports.this,report_data);
 list.setAdapter(adapter);
 adapter.clear();

 adapter.addAll(report_data[]);   //if API >= 11

 for(int i=0; i<report_data.length, i++) //else))
 {adapter.add(report_data[i]);}
 adapter.notifyDataSetChanged(); 
```

# javascript - 如何测试在异步测试中返回承诺的存根？

> ID：16015728
> 
> 赞同：11
> 
> 时间：2013-04-15T12:56:29.603
> 
> 标签：javascript, testing, mocha.js, promise, sinon

如何以异步方式测试它？

```
it('Should test something.', function (done) {

    var req = someRequest,
        mock = sinon.mock(response),
        stub = sinon.stub(someObject, 'method');

     // returns a promise
     stub.withArgs('foo').returns(Q.resolve(5));

     mock.expects('bar').once().withArgs(200);

     request(req, response);

     mock.verify();

}); 
```

这是测试的方法。

```
var request = function (req, response) {

    ...

    someObject.method(someParameter)
        .then(function () {
            res.send(200);
        })
        .fail(function () {
            res.send(500);
        });

}; 
```

如您所见，我使用 node.js、Q（用于承诺）、用于模拟和存根的 sinon 以及 mocha 作为测试环境。由于请求方法的异步行为，上面的测试失败了，我不知道何时在测试中调用 done()。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T13:45:40.413

一旦所有异步操作完成，您需要调用 done。你认为那会是什么时候？您通常如何等到请求完成？

```
it('Should test something.', function (done) {

   var req = someRequest,
       mock = sinon.mock(response),
       stub = sinon.stub(someObject, 'method');

    // returns a promise
    stub.withArgs('foo').returns(Q.resolve(5));

    mock.expects('bar').once().withArgs(200);

    request(req, response).then(function(){
       mock.verify();
       done();
    });

}); 
```

在附加到请求承诺的错误回调中将测试标记为失败也是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-14T10:32:46.820

Typescript 中的工作解决方案：

```
 var returnPromise = myService.method()
    returnPromise.done(() => {
        mock.verify()
    }) 
```

# asp.net-ajax - 如何使用带有 Frame 的 ScriptManager 的 RegisterPostBackControl() 方法，该方法在单击另一个 .aspx 页面中的链接按钮后显示数据？

> ID：16015730
> 
> 赞同：1
> 
> 时间：2013-04-15T12:56:40.340
> 
> 标签：asp.net-ajax

我试图在gridview 中执行linkbutton 的click evnet，而这个网格视图在UpdatePanel 控件中。我想在同一页面上单击框架中的链接按钮时显示信息/数据。但框架显示另一个 .aspx 页面。

```
protected void gvEditInvoice_RowCommand(object sender, GridViewCommandEventArgs e)
{  

    try
     {
          if (e.CommandName.ToUpper().Contains("LINKCLICK"))
          {                    

               GridViewRow gvr = ((Control)e.CommandSource).Parent.Parent as GridViewRow;
               int rowIndex = Convert.ToInt32(gvr.RowIndex);

               LinkButton lbtn = (LinkButton)gvEditInvoice.Rows[rowIndex].FindControl("lnbtnBillingEntityName");//.PostBackUrl = "~/somewhere/" + Session["path"].ToString();                    
               ScriptManager1.RegisterPostBackControl(lbtn);
           //RegisterPostBackControl() methods is used to postback full page after linkbutton clicked

               string urlPath = e.CommandArgument.ToString(); //.aspx Page URL is getting from field
           mainFrame.Attributes["src"] = @"/eis/IMS/WebUI/Prototype/" + urlPath;
           //mainFrame is my frame and showing another .aspx in this area of same .aspx page
           }
      }
      catch (Exception ex)
      {
      }
} 
```

一切都很好，但问题是我必须点击链接按钮两次，然后我才能得到结果。你能帮我解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:07:47.730

如下添加行数据绑定事件并`RegisterPostBackControl`从行命令事件中删除

```
protected void gvEditInvoice_RowDataBound(object sender, GridViewRowEventArgs e)  
{  
   LinkButton lb = e.Row.FindControl("lnbtnBillingEntityName") as LinkButton;  
   AjaxControlToolkit.ToolkitScriptManager.GetCurrent(this).RegisterAsyncPostBackControl(lb);
} 
```

# php - 如何限制 Drupal 查询中的内存分配？

> ID：16015744
> 
> 赞同：-1
> 
> 时间：2013-04-15T12:57:37.590
> 
> 标签：php, mysql, sql

我有一个 Drupal 论坛站点，其中包含大量数据。例如，一个论坛类别有 14,000 个主题和 100,000 条评论。即使在我当地的测试站点，它也非常滞后。然后当我将它上传到一个实时站点时，它给出了这个错误：

```
Fatal error: Allowed memory size of 52428800 bytes exhausted (tried to allocate 40961 bytes) in /home/fmotors/public_html/development/includes/theme.inc on line 1494 
```

所以它与增加内存限制或不一次查询所有线程有关。但我不知道该怎么做。这是标记上述错误的代码：

```
function theme_render_template($template_file, $variables) {
  extract($variables, EXTR_SKIP);               // Extract the variables to a local namespace
  ob_start();                                   // Start output buffering
  include DRUPAL_ROOT . '/' . $template_file;   // Include the template file
  return ob_get_clean();                        // End buffering and return its contents
} 
```

电话`ob_start()`在 1494 行。顺便说一下，我正在使用 Drupal 的高级论坛模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:58:47.673

在您的配置或索引文件集中

```
ini_set('memory_limit', 0); 
```

# python - grequests 以什么方式异步？

> ID：16015749
> 
> 赞同：43
> 
> 时间：2013-04-15T12:57:57.573
> 
> 标签：python, python-requests, gevent, grequests

我一直在使用 python requests 库，最近需要异步发出请求，这意味着我想发送 HTTP 请求，让我的主线程继续执行，并在调用时调用回调请求返回。

自然，我被引导到了 grequests 库（[https://github.com/kennethreitz/grequests](https://github.com/kennethreitz/grequests)），但我对这种行为感到困惑。例如：

```
import grequests

def print_res(res):
    from pprint import pprint
    pprint (vars(res))

req = grequests.get('http://www.codehenge.net/blog', hooks=dict(response=print_res))
res = grequests.map([req])

for i in range(10):
    print i 
```

上面的代码将产生以下输出：

```
<...large HTTP response output...>

0
1
2
3
4
5
6
7
8
9 
```

grequests.map() 调用显然会阻塞，直到 HTTP 响应可用。似乎我在这里误解了“异步”行为，而 grequests 库仅用于同时执行多个 HTTP 请求并将所有响应发送到单个回调。这是准确的吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-15T13:38:05.813

`.map()`旨在并行运行多个 URL 的检索，并且确实会等待这些任务完成（`gevent.joinall(jobs)`调用）。

`.send()`改为使用实例[`Pool`生成](http://www.gevent.org/api/gevent.pool.html#gevent.pool.Pool)作业：

```
req = grequests.get('http://www.codehenge.net/blog', hooks=dict(response=print_res))
job = grequests.send(req, grequests.Pool(1))

for i in range(10):
    print i 
```

如果没有池，该`.send()`调用仍将阻塞，但仅限于`gevent.spawn()`它执行的调用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-07-05T04:26:41.420

如果您不想使用`grequests`，您可以使用`requests`+`threading`标准库中的模块来实现带有回调的请求。这实际上非常简单，如果您只想发送带有回调的请求，那么 API 比`grequests`.

```
from threading import Thread

from requests import get, post, put, patch, delete, options, head

request_methods = {
    'get': get,
    'post': post,
    'put': put,
    'patch': patch,
    'delete': delete,
    'options': options,
    'head': head,
}

def async_request(method, *args, callback=None, timeout=15, **kwargs):
    """Makes request on a different thread, and optionally passes response to a
    `callback` function when request returns.
    """
    method = request_methods[method.lower()]
    if callback:
        def callback_with_args(response, *args, **kwargs):
            callback(response)
        kwargs['hooks'] = {'response': callback_with_args}
    kwargs['timeout'] = timeout
    thread = Thread(target=method, args=args, kwargs=kwargs)
    thread.start() 
```

您可以验证它是否像 JS 中的 AJAX 调用一样工作：您在另一个线程上发送请求，在主线程上做一些事情，当请求返回时您调用回调。这个回调只是打印出响应内容。

```
async_request('get', 'http://httpbin.org/anything', callback=lambda r: print(r.json()))
for i in range(10):
    print(i) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-15T06:32:18.690

创建一个请求列表，然后发送它们`.imap`：

```
event_list = [grequests.get(url_viol_card, params={"viol": i},
              session=session) for i in print_ev_list]
for r in grequests.imap(event_list, size=5):
    print(r.request.url) 
```

*   `session`是`requests.Session()`对象（可选）
*   `size=5`同时发送 5 个请求：一旦完成其中一个请求，就会发送下一个请求
*   在这个例子中，当任何请求（无序）完成时，它的 url 就会被打印出来

# php - php短信代码错误

> ID：16015751
> 
> 赞同：0
> 
> 时间：2013-04-15T12:58:13.717
> 
> 标签：php, cakephp

在确认在我们的手机号码中发布短信警报后，我尝试使用 php 编码来注册我们的产品..在使用 way2 短信移动网站..似乎发生了一些错误....

消息已发送到您的电子邮件地址 正在登录 ... 注意：未定义的偏移量：C:\wamp\www\html\class.sms.php 第 126 行的 1 正在发送 SMS ... 注意：未定义的偏移量：C 中的 1： \wamp\www\html\class.sms.php 在第 147 行遇到错误：

```
class.sms.php :

preg_match($pattern,$out,$matches);
        $id=trim($matches[1]);     // 126 line
        $this->data['id']=$id;

    }

    private function send_160by2($number,$msg)
    {
        $msg=urlencode($msg);
        $id=$this->data['id'];
        $out1=$this->curl->post("http://m.160by2.com/...Compose.asp?l=1","txt_mobileno=$number&txt_msg=$msg&cmdSend=Send+SMS&TID=&T_MsgId=&Msg=$id");
        //echo $out1;
        $pattern = '/\<table.+?\>(.+)\<\/table/s';
        preg_match($pattern, $out1, $matches);

        $out=strip_tags(@$matches[1]);
        if(count($matches)<1)
        {
        $pattern="/\<div.+?background:.+?yellow.+?\>(.+?)\<\/div\>/s";

        preg_match($pattern,$out1,$matches);

        $out=strip_tags($matches[1]);           // 147 line 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:04:03.333

该消息对我来说看起来很清楚：`$matches[1]`在 position 没有元素`1`。尝试像这样打印你的`$matches`数组，你会看到你有什么：

```
preg_match($pattern,$out,$matches);
print_r($matches); 
```

看起来您的 RegEx 没有返回任何结果`$matches`。

# jquery - jQuery 模板文档在哪里？

> ID：16015752
> 
> 赞同：10
> 
> 时间：2013-04-15T12:58:15.783
> 
> 标签：jquery, jquery-plugins, jquery-templates

我在 jQuery 站点上找不到 jQuery[模板文档](https://freejquery.com/?s=template%20documentation)或插件。谁能告诉他们在哪里可以找到？我尝试搜索，但找不到文档。似乎 jQuery 插件站点已损坏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T13:43:01.200

jquery 模板现在没有维护。因此该插件已从 jquery 插件存储库中删除。因此文档也消失了。我只能找到以下文档链接。它们并不完美，但仍然很有帮助。

1.  [https://github.com/jquery-orphans/jquery-tmpl](https://github.com/jquery-orphans/jquery-tmpl)

2.  [https://github.com/KanbanSolutions/jquery-tmpl](https://github.com/KanbanSolutions/jquery-tmpl)

KanbanSolutions 已经分叉了该项目并修复了一些错误。但是他们改变了一些语法。但是您可以参考此文档，因为看板自定义 jquery 模板和原始 jquery 模板的功能是相同的。

例如`each`看板自定义 jquery 模板的文档

```
{%each( index, value ) collection %} 
```

用于迭代数据数组，并为每个数据项渲染一次开始和结束模板标记之间的内容。

因此，`each`原始 jquery 模板的文档

```
{{each( index, value ) collection }} 
```

用于迭代数据数组，并为每个数据项渲染一次开始和结束模板标记之间的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-24T14:59:00.360

你可以在这里找到它[http://web.archive.org/web/20120920065217/http://api.jquery.com/category/plugins/templates/](http://web.archive.org/web/20120920065217/http://api.jquery.com/category/plugins/templates/)（来自 GitHub wiki - [https://github.com/BorisMoore /jquery-tmpl/wiki](https://github.com/BorisMoore/jquery-tmpl/wiki) )

# string - 获取excel图表中的值字符串

> ID：16015754
> 
> 赞同：0
> 
> 时间：2013-04-15T12:58:21.630
> 
> 标签：string, excel, vba

a中的值`SeriesCollection`可以设置为

```
ActiveChart.SeriesCollection(1).Values = "='Sheet1'!$F$3:$F$403" 
```

我想知道字符串以便修改它，但是它只能作为变体获取，不能转换为字符串

```
Dim values As Variant
Dim valuesStr As String
values = ActiveChart.SeriesCollection(m).Values
valueStr = Cstr(ActiveChart.SeriesCollection(m).Values) ' fails! 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:54:44.027

尝试这个：

`valueStr = ActiveChart.SeriesCollection(m).Formula`

这将返回一个字符串，如：

`=SERIES("series_name",,Sheet1!$A$1:$A$4,1)`

然后，您应该能够使用一些字符串函数来解析值范围的地址。

否则，按照约翰的建议，做：

```
Dim values as Variant
Dim v as Variant
values = ActiveChart.SeriesCollection(m).Values
For each v in values
    'Do something to the values here...'
Next 
```

# magento - 我无法找到页脚从哪里进入magento

> ID：16015757
> 
> 赞同：0
> 
> 时间：2013-04-15T12:58:35.917
> 
> 标签：magento

这是我的网站[http://sandlotwholesale.com/index.php/](http://sandlotwholesale.com/index.php/)

我必须改变我的页脚。我尝试在 page/template/html/footer.phtml 中进行更改，但即使我删除了页脚文件，更改也没有反映出来，但页脚仍然有效。我不知道它从哪里来。

请帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:40:57.693

始终使用模板路径提示来定位文件地址。它的 System->configuration->Developer(Left Panel Tab) 将其设置为 YES，然后就可以了。您将相应地找到文件位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:28:43.787

If you have access to the admin panel you can go to system>configuration>developer(swich to website view -dropdown top left hand box)>template path hints>yes

this should show you where the template for the footer is.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:27:34.533

通过激活“模板路径提示”，您将看到正确的 phtml 文件。

转到系统>>配置>>开发人员

将“当前配置范围”更改为实际的商店视图

激活模板路径提示

之后，所有路径都显示在您的前端，只需向下滚动到您的页脚。不要忘记撤消这些更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-20T05:43:31.673

使用模板路径提示，您可以轻松找到您的模板路径文件。登录到管理面板并在

*   系统 -> 配置
*   将“配置范围”更改为“默认商店视图”（或您想要查看模板路径的任何商店视图）
*   在左侧菜单中的高级下单击开发人员
*   单击“调试”以展开该部分
*   将“模板路径提示”更改为“是”
*   单击立即保存配置以刷新前端并查看模板文件的所有位置，以便您轻松修改正确的位置。希望它会帮助你。

# xcode - OSX 中的基础国际化

> ID：16015758
> 
> 赞同：2
> 
> 时间：2013-04-15T12:58:35.963
> 
> 标签：xcode, macos, cocoa, localization

Base Internationalization 是否适用于 OSX 10.7（带有 10.7 sdk）或仅适用于 10.8？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T01:33:00.600

仅根据[文档](http://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/index.html#//apple_ref/doc/uid/TP40001051-SW145)10.8。

来自**Xcode 4.4。发行说明**：
*项目编辑器中的 Use Base Internationalization 设置仅适用于在 OS X v.10.8 及更高版本上部署的 Mac 产品。Xcode 还必须在 OS X v.10.8 或更高版本上运行。*

# php - 从日期中提取月份数......并推进它

> ID：16015759
> 
> 赞同：0
> 
> 时间：2013-04-15T12:58:38.580
> 
> 标签：php

我查看了其他案例查询的数据库，并没有发现任何问题的核心。所以：

```
$resultmonth1 == date("n");
if ($resultmonth1 == 12){
   $resultmonth2 = 1;
}
else {
   $resultmonth2 = $resultmonth1++;
} 
```

此代码不会产生明显的错误或问题，只是它不会将任何结果传播到`$resultmonth2`.

我要完成的工作：

我需要生成一个变量来保存当前月份之后的月份的数字（没有前导零）。所以如果是四月，我需要变量来反映五月（5）。

我错过了什么吗？有没有更简单的方法来做到这一点。最好在 JS 中，但我使用的是 PHP，因为我根本不知道任何 JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:00:25.133

您永远不会将任何东西分配给`$resultmonth1`：

```
$resultmonth1 == date("n"); 
```

应该：

```
$resultmonth1 = date("n"); 
```

否则你正在做一个比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:03:43.673

你所拥有的是一个基本的`==`问题`=`，但我仍然更喜欢以这种方式处理日期

```
$date = new DateTime();
$resultmonth1 = $date->format("n");

$date->modify("next month");
$resultmonth2 = $date->format("n");

var_dump($resultmonth1,$resultmonth2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:01:00.713

在这一行中替换`==`为。`=`

```
$resultmonth1 = date("n"); 
```

# regex - 用正则表达式替换字符串并保留其部分内容

> ID：16015760
> 
> 赞同：0
> 
> 时间：2013-04-15T12:58:42.107
> 
> 标签：regex, visual-studio-2012

在我的代码中，我有这样的语句：

```
 Project.MVC.Bll.Resources.<resource-name> 
```

我想用

```
 ProjectResources.GetString("<resouce-name>") 
```

我想使用带有正则表达式的Visual Studio Find And Replace，但问题是我不知道如何“获取”资源名称。

对于我正在使用的搜索模式`Project.MVC.Bll.Resources.*`，但我不知道替换模式将是什么，以便将资源名称放在括号中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:01:07.167

您正在寻找的构造称为[捕获](http://msdn.microsoft.com/en-us/library/bs2twtah%28v=vs.71%29.aspx)（或有时捕获组）。[这里](http://weblogs.asp.net/jgalloway/archive/2003/05/24/7498.aspx)有一个如何做到这一点的例子。看起来也有一个关于这个主题的 MSDN 页面：[在 Visual Studio 中使用正则表达式](http://msdn.microsoft.com/en-us/library/vstudio/2k3te2cs.aspx)以及使用编号捕获的示例。

同样值得指出的是，早期版本的 Visual Studio 对此使用的[语法略有不同](https://stackoverflow.com/a/7848502/164966)。

在您的情况下，捕获可能看起来像

```
Project\.MVC\.Bll\.Resources\.(?<name>____) 
```

以及沿线的替换

```
ProjectResources.GetString("${name}") 
```

只需用`____`您的资源名称遵循的任何模式替换即可。也不要忘记这`.`意味着RegEx 中的*任何字符*，因此您需要将它们转义为仅匹配句点。

# sharepoint - 使用 SPTrim for Sharepoint 2010 隐藏功能区显示 id 为 s4-ribbonrow 的 div 的背景颜色

> ID：16015763
> 
> 赞同：0
> 
> 时间：2013-04-15T12:58:49.027
> 
> 标签：sharepoint

我正在尝试使用以下代码为某些用户隐藏功能区：代码：

这工作正常，但是 id 为 s4-ribbonrow 的 div 有一些仍然可见的背景颜色。如何使其对同一组用户不可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T17:05:53.417

您可以使用 SharePoint 安全修剪。
示例：
SharePoint:SPSecurityTrimmedControl runat="server" Permissions="Your Custom Permission Level">
script>
Your custom code>
/script>
/SharePoint:SPSecurityTrimmedControl>
在该特定控件的母版页中。

# sql - 如何根据其上的 Sql 结果隐藏 gridview 中的列？

> ID：16015766
> 
> 赞同：0
> 
> 时间：2013-04-15T12:58:54.687
> 
> 标签：sql, vb.net, gridview, hide

我正在使用 VB .NET，我有一个 GridView，它有 4 列*（删除、下载、命名和 PK）*。“名称”和“ID”列是我的 Sql 命令的结果，我想向用户隐藏“PK”列。但我做不到。我已经尝试了一些代码，但没有。

这是我的代码：

```
 Public Sub obterTabela()
        Dim db As DbConnect = New DbConnect()
        Dim conn = New SqlConnection(db.geraConnString)
        Dim cmd As New SqlCommand()
        Dim aux As String = System.IO.Path.GetFileName(System.Web.HttpContext.Current.Request.Url.Query)
        aux = aux.Replace("?id=", "")
        Dim conjunto As Integer = Convert.ToInt32(aux)

        conn.Open()
        'alterar
        cmd = New SqlCommand("SELECT nome AS 'Nome', pk_table AS 'PK' FROM t_kml WHERE fk_table = " & aux, conn)

        Dim dt As DataTable = New DataTable()
        Dim sdr As SqlDataReader = cmd.ExecuteReader(CommandBehavior.CloseConnection)
        dt.Load(sdr)
        'Dim indice As Integer = (Integer).Parse(dt.Columns("PK"))

        'dt.Columns.Item("PK").ColumnMapping = MappingType.Hidden

        sdr.Close()

        gdv_kml.DataSource = dt
        'gdv_kml.Columns(2).Visible = False
        gdv_kml.DataBind()
    End Sub 
```

和

```
<asp:GridView ID="gdv_kml" runat="server" HorizontalAlign="Center" CellPadding="4" 
            ForeColor="#333333" GridLines="None">
            <RowStyle BackColor="#E3EAEB" />
            <Columns>
                <asp:CommandField ShowDeleteButton="True" />
                <asp:ButtonField CommandName="Download" Text="Download" />
            </Columns>
            <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
            <EmptyDataTemplate>
                <b>Nenhum KML incluso.</b>
            </EmptyDataTemplate>
            <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
            <HeaderStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
            <EditRowStyle BackColor="#7C6F57" />
            <AlternatingRowStyle BackColor="White" />
     </asp:GridView> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:37:23.573

有没有办法可以从 SQL 查询中排除 PK？这样你只提取三列，没有PK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:02:49.247

关闭自动生成字段并列出您希望在该部分中显示的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:09:06.087

首先，将`AutoGenerateColumns`属性设置为`False`然后：

```
Private Sub GridView_RowDataBound(ByVal sender As System.Object,ByVal e As System.GridViewRowEventArgs )
{
  e.Row.Cells("PK").Visible = False
} 
```

# android - Android 与 USB 设备的通信

> ID：16015781
> 
> 赞同：2
> 
> 时间：2013-04-15T12:59:31.673
> 
> 标签：android, usb, host

我尝试将我的 USB 设备以大容量存储方式连接到我的平板电脑（Google Nexus 7）已经有一个月了。我已经阅读了所有关于[Android USB 主机](http://developer.android.com/guide/topics/connectivity/usb/host.html)的谷歌文档，但我发现没有任何东西可以读取我的 USB 设备中的文件！

我在不同的论坛上进行了搜索，发现很少有应用程序在做 USB 查看器（例如 Nexus 媒体导入器），但我还没有找到任何源代码能够读取 USB 密钥上的文件，在大容量存储中。

我现在正在尝试实现USB大容量存储协议，方法是

`bulkTransfer (UsbEndpoint endpoint, byte[] buffer, int length, int timeout)`

但我不知道如何访问设备目录...

有人已经解决了这个通信问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:04:02.540

首先，你有告诉 Nexus 7 进入主机模式的 OTG 电缆吗？其次，您可能想阅读[本文](http://www.theverge.com/2012/6/29/3127278/nexus-7-mhl-usb-otg)。Nexus 7 支持键盘和鼠标等设备的 USB 主机模式，但不支持存储设备的主机模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T13:01:12.663

运行以下方法时是否显示外部存储的根目录？

```
Context.getExternalMediaDirs() 
```

如果是这样，您应该能够使用返回的路径打开文件。

# sql - 如何像 excel 的数据透视函数一样转置 sql 结果？

> ID：16015782
> 
> 赞同：2
> 
> 时间：2013-04-15T12:59:32.737
> 
> 标签：sql, sql-server, pivot

我在 MSSQL 2012 中使用以下查询：

```
declare @startTime int=0*3600;
declare @endTime int=30*3600;
declare @link varchar(10)='RO2566a';
declare @period int=3600; 

SELECT (B.time-@startTime)/@period as periodStart, B.link, B.mode, count(*) as Volume
  FROM
       (
       Select A.*, 
             case when A.vehicle='' then 'walk' 
                  when A.line is NULL then 'car'
                    else 'pt' end mode

             FROM 
             (Select E.time, E.link, E.vehicle, E.person, T.transitLineId as line, T.transitRouteId as route, T.departureId, T.time as DepartureTime
                    FROM (Select * From evtEnteredLink  where link=@link and time between @startTime and @endTime) E
                 LEFT OUTER JOIN evtTransitDriverStarts T on (E.vehicle=T.vehicleId) 
             ) A
             where A.time between @startTime and @endTime
       )B
       group by B.link, B.mode, (B.time-@startTime)/@period 
```

结果如下：

```
periodStart mode    Volume
0       pt  19
1       pt  24
2       pt  24
3       car 4
3       pt  25
4       car 64
4       pt  27 
```

我需要的看起来像这样-foreach 周期（行）我对每种模式的聚合量（列）感兴趣：

```
PeriodStart car pt  
0               19
1               24
2               24
3           4   25
4           64  27 
```

这如何通过 MSSQL 2012 中的 Pivot 函数来完成？是否可以动态获取列（模式）而不是在查询本身中定义它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:56:38.847

**[从这里转换](https://stackoverflow.com/questions/10404348/sql-server-dynamic-pivot-query/10404455#10404455)**

```
create table temp
(
    periodstart int,
    mode varchar(3),
    volume int
)

insert into temp values (0,'pt',19);
insert into temp values (1,'pt',24);
insert into temp values (2,'pt',24);
insert into temp values (3,'car',4);
insert into temp values (3,'pt',25);
insert into temp values (4,'car',64);
insert into temp values (4,'pt',27);

DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

SET @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.mode) 
            FROM temp c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT periodstart, ' + @cols + ' from 
            (
                select periodstart
                    , volume
                    , mode
                from temp
           ) x
            pivot 
            (
                 max(volume)
                for mode in (' + @cols + ')
            ) p '

execute(@query)

drop table temp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:54:07.163

T-SQL 关键字`pivot`应该可以满足您的需要。查看[http://msdn.microsoft.com/en-us/library/ms177410](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx) (v=sql.105).aspx（此文档适用于 2008 R2，但在 SQL Server 2012 中的工作方式相同）。

我还没有测试过，但基本上，这个查询应该可以解决问题：

```
SELECT PeriodStart, [car], [pt]
FROM 
(
    SELECT ... -- Insert the entire SELECT statement from your question here.
) p
PIVOT
(
    SUM(Volume)  -- Or MAX(), COUNT(), or whichever aggregate function suits your need.
    FOR Mode IN ( [car], [pt] )
) AS pvt
ORDER BY pvt.PeriodStart; 
```

# jquery - 具有两个内容区域的横向网站

> ID：16015784
> 
> 赞同：0
> 
> 时间：2013-04-15T12:59:35.780
> 
> 标签：jquery, css, overflow, scrolltop

我正在创建一个有两个不同区域的站点。这个想法是我单击一个按钮，第二个内容区域滑入第一个内容区域的顶部。

两个区域都设置为 100% 宽度，并且绝对定位以占据整个窗口宽度。

对于第二个区域（在页面加载时隐藏），我使用了更高的 z-index 和 98% 的左侧边距，以便只显示要单击的按钮。

在 jQuery 中，单击该按钮后会切换一个类，从而左边距从 98% 移动到 0，因此现在显示隐藏区域。

除了隐藏区域的高度比第一个高得多之外，所有这些都可以正常工作。我进行了设置，以便当第一个内容区域可见时，正文具有溢出：隐藏，而当第二个内容区域溢出时：可见。

问题是，如果我在第二个区域向下滚动然后单击以滑回第一个区域，则第一个区域将溢出：隐藏但不会从顶部显示。

在切换类之前和之后，我尝试滚动顶部，但没有成功。

我确实尝试在 jsfiddle 中复制它，但由于它是 100% 的视口，因此很难显示，我很抱歉过于冗长！附上一个简单的截图。

如果有人有任何想法会很棒，谢谢！

![在此处输入图像描述](https://i.stack.imgur.com/EagKC.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:17:38.150

在此处查看此页面：[cargocollective.com/nonfeed](http://cargocollective.com/nonfeed)

看起来您需要的是滚动正确的 div 而不实际滚动整个页面。在这个设计示例中，每个垂直滚动部分都有三个 div，如下所示：

```
div.entry {
  overflow: hidden;
}
div.entry div.wrapper {
  overflow-x: hidden;
  overflow-y: auto;
}
div.entry div.wrapper div.content {
  overflow: hidden;
} 
```

对于您的情况，您可能只想将正确的 div 包装在另一个 div 中`overflow: hidden`，然后使用 jQuery 函数将 div 的高度设置为页面的高度。

下面是一些设置窗口高度的 jQuery 代码：

```
var height_change_callback = function() {
var bodyheight = jQuery(window).height();
jQuery(".wrapper").each(function() {
        jQuery(this).css("height", bodyheight-80);
    });
}
jQuery(document).ready(height_change_callback);
// for the window resize
jQuery(window).resize(height_change_callback); 
```

希望有帮助。

# php - XML 编码问题

> ID：16015785
> 
> 赞同：0
> 
> 时间：2013-04-15T12:59:39.317
> 
> 标签：php, xml

在生成 xml 时，它不支持一些特殊字符，如 ébé.. 它在开发服务器中返回错误消息为**“XML Parsing Error: not well-formed” 。**但它在生产服务器中运行良好。我不确定需要在 php 服务器设置中更改任何内容。请告诉我。

示例代码

```
<?xml version='1.0' encoding='UTF-8' ?>
<result>
  <subcategory id="969"><![CDATA[ Québécois ]]></subcategory>   
</result> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:03:24.850

这两个文件实际上都是用 utf-8 编码的吗？（在您的编辑器中查看 engoding 选项。）此 xml 确实有效。还要检查处理端的编码。

# utf - UTF 字符串的大小

> ID：16015786
> 
> 赞同：0
> 
> 时间：2013-04-15T12:59:49.210
> 
> 标签：utf

如果我有一个值为“hello”的 UTF-16 字符串，并且如果我将它写入文件，那么文件的大小是多少？是 5 字节还是 10 字节或 13 字节（带 BOM）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T17:24:59.917

该文件将是 10 字节长或 12 字节的 BOM。

写入字符串“hello”意味着 5 或 6 个字符`'h' 'e' 'l' 'l' 'o' '\0'`，具体取决于所使用的写入方法。让我们假设`'\0'`字节没有被写入。可选的 BOM 是另一个“字符”。由于您没有编写任何具有 Unicode 值 >= 的`0x10000`字符，因此每个字符将占用文件中的 2 个字节。

注意：如果字符串是使用 UTF8 编码编写的，则文件长度将为 5（或 BOM 为 8）。

# ruby-on-rails - 如何使用 OAuth 和 doorkeeper 存储会话数据？

> ID：16015788
> 
> 赞同：0
> 
> 时间：2013-04-15T12:59:51.320
> 
> 标签：ruby-on-rails, session, oauth, doorkeeper

是否有统一的方法来存储将绑定到特定 OAuth 令牌的用户设置，使用门卫 gem（或一般的 OAuth）？

我希望用户在登录时选择区域设置，只要使用相同的令牌就会保留。在我的用例中，我希望设置是特定于会话的，而不是特定于用户的——可以将多个令牌颁发给单个资源所有者，并具有不同的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T22:00:10.390

一种方法是创建一个具有一个`oauth_token`和一个`user_id`字段的 Preference 模型。当您的用户设置首选项时，将使用 oauth_token 和 user_id 以及他们的首选项中涉及的任何数据创建一个首选项，在这种情况下，您的首选项表中有三个字段：

`oauth_token:string`,`user_id:integer`和`locale:string`

当用户登录时，current_user.token 可用于匹配您的首选项中的 oauth 字段，然后您可以加载首选项。

# c# - 在 SilverLight 中使用 WCF MessageContract

> ID：16015793
> 
> 赞同：0
> 
> 时间：2013-04-15T13:00:07.153
> 
> 标签：c#, .net, wcf, silverlight, silverlight-4.0

本质上，我正在尝试将以下类型的对象从 SilverLight 发送到 WCF 服务。对象的消息契约如下：

```
[MessageContract]
    public class UploadMessage
    {
        [MessageHeader(MustUnderstand = true)]
        public Token Token;

        [MessageHeader(MustUnderstand = true)]
        public string FileExtension;

        [MessageHeader(MustUnderstand = true)]
        public Product Product;

        [MessageBodyMember(Order = 1)]
        public Stream FileByteStream; 
```

## }

```
[OperationContract(IsOneWay = true)]
        void UploadFileStream(UploadMessage upm); 
```

但是，每当我尝试从 SilverLight 客户端调用该方法时，我只能指定 FileByteStream 参数（而不是其他 3 个）。

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:16:27.517

你在使用 Visual Studio 吗？

将消息标头添加到消息合同后，您是否在 Silverlight 项目中更新了对 WCF 服务的服务引用？

当我对 WCF 服务进行一些更改但忘记更新服务引用或 Web 引用时，通常会发生此问题。

希望这可以帮助。

编辑1：

我忘了提到，当您添加服务引用时，您需要选中说明有关创建消息合同的内容的框。默认情况下，Visual Studio 不会创建消息协定，它只会在 WCF 客户端代理中创建数据协定。只有消息合同允许您访问消息标头。

# html - 伪元素：在 Windows 8 和 Ubuntu 中呈现不同之前

> ID：16015795
> 
> 赞同：0
> 
> 时间：2013-04-15T13:00:08.433
> 
> 标签：html, css

我正在使用`Entypo`网络字体来创建带有图标的按钮。简而言之，我执行以下操作将图标添加到按钮：

```
.button {
    float: left;
    position: relative;
    padding: 10px 18px;
    background-color: gray; 
}

.with-icon:before {
    content: '\1F50D';
    font-size: 32px;
    width: 40px;
    display: block;
    top: 8px;
    left: 0;
    text-align: center;     
    position: absolute;
    font-family: 'Entypo';
    font-weight: normal;
    color: white;
} 
```

简单的 HTML：

```
<a href="" class="button with-icon">Button</a> 
```

在 Ubuntu（Chrome、Firefox 和 Opera）上尝试此操作时一切正常，但当我决定在 Windows（Chrome、Firefox 和 IE）上测试所有内容时，出现了一个奇怪的错误。很容易注意到：

Ubuntu：

![Ubuntu](https://i.stack.imgur.com/wP1t7.png)

视窗：

![视窗](https://i.stack.imgur.com/ByeXT.png)

Windows 上的图标位置低于在 Ubuntu 上测试时的位置。我尝试在`:before`没有属性的情况下离开类`top`，它在 Ubuntu 上工作（图标放在中间），在 Windows 上，图标放在更低的位置。

可能发生什么？

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:18:41.950

您已经定义了两次顶级样式。也许这已经是错误？

```
top: 2px;
display: block;
top: 8px; 
```

如果没有，你能提供一个包含所有需要的 CSS的[Fiddle吗？](http://www.jsfiddle.net)

# php - 使用 jquery ajax 更新 mysql

> ID：16015799
> 
> 赞同：1
> 
> 时间：2013-04-15T13:00:31.107
> 
> 标签：php, jquery, mysql, ajax

我正在尝试使用 jquery 和 ajax 从 textarea 更新 mysql db，但无法获取文本区域的更新内容以传递到 php 页面。

我有一个页面，在页面上我单击一个按钮，该按钮打开一个图层并调用 edit_box 函数。

然后该层用数据库中的数据填充表单字段。

textarea 是一个 nicedit 框，在我单击保存之前一切正常，并且我对 textarea 所做的任何更改都没有通过。只有原创内容。

它看起来很明显，但我似乎无法理解这个问题

任何帮助表示赞赏

这是代码

html页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
  #popupbox{ 
    padding:0;
    width: 99%;
    height: auto;
    margin: 0px auto;   
    position:absolute;
    background: #FBFBF0; 
    border: solid #000000 2px; 
    z-index: 9000; 
    font-family: arial; 
    visibility: hidden; 
   }
 </style>
 <script type="text/javascript" src="http://js.nicedit.com/nicEdit-latest.js"></script>
 <script>

 function get_edit_content(box_id,page_ref,template_ref)
   {
  $.get("get_content.php", { box_id: box_id, page_ref: page_ref, template_ref:template_ref } )
  .done(function(data) {
      document.getElementById("box_id").value = box_id; 
      document.getElementById("edit_content").value=data;
      var area1 = new nicEditor({fullPanel : true}).panelInstance("edit_content",{hasPanel : true});         
      });  
   }

   function edit_box(showhide,box_id,page_ref,template_ref){
     if(showhide == "show"){    
    get_edit_content(box_id,page_ref,template_ref);
            document.getElementById('popupbox').style.visibility="visible";
     }else if(showhide == "hide"){
            document.getElementById('popupbox').style.visibility="hidden";      
     }  
   }

  $(document).ready(function()
{    
      $('#sub').click(function (e) 
    { 
      e.preventDefault(); 
      $.ajax({type:'POST', url: 'update_textarea.php', data:$('#myFrm').serialize(), success:
      function(response) 
        {
         alert(response);
        }
     });

   });
});
</script>
</head>

<body>
 <div id="popupbox">
  <form id="myFrm">
    <input type="hidden" name="page_ref" value="<? echo $page_ref; ?>" />
    <input type="hidden" name="template_ref" value="<? echo $template_ref; ?>" />
    <input type="hidden" id="box_id" name="box_id"/>
    <textarea name="edit_content" id="edit_content"  style="width: 500px; height:500px;"></textarea>
    <button id="sub" >Save</button>
    <center><a href="javascript:edit_box('hide');">close</a></center> 
  </form>

 </div>
</body>
</html> 
```

页面

```
 <?
    include("connect.php"); 
$page_ref = $_POST['page_ref'];  
$template_ref = $_POST['template_ref'];
$box_id = $_POST['box_id'];
$edit_content = addslashes($_POST['edit_content']);  
if(mysql_query("UPDATE site_content SET content='$edit_content' WHERE page_ref='$page_ref' AND template_ref='$template_ref' AND box_id='$box_id' AND box_type='text'"))
    {
        echo "page_ref=".$page_ref." template_ref=".$template_ref." box_id=".$box_id." edit_content=".$edit_content;
    }
else
    {
        echo "error";
    }

   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:35:53.023

乍一看一切正常，但试试这个：

```
$query = "UPDATE site_content SET content='$edit_content' WHERE page_ref='$page_ref' AND
template_ref='$template_ref' AND box_id='$box_id' AND box_type='text'";
echo "Query = $query <br />";
mysql_query($query); 
```

这将输出您尝试运行的查询，并可能有助于调试。请试试这个，并在此处发布回声的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:23:18.247

好的设法用这个小片段解决了这个问题。

```
$(document).ready(function() {
 $('#sub').click(function() {
   var edit_content = $('#myFrm').find('.nicEdit-main').text(); 
   var box_id = $('#myFrm').find("#box_id").val();
   var page_ref = $('#myFrm').find("#page_ref").val();
   var template_ref = $('#myFrm').find("#template_ref").val();
   $.post("update_textarea.php", {box_id:box_id, page_ref:page_ref, template_ref:template_ref, edit_content:edit_content },
  function(status){
   alert(status);       
   });
 });
}); 
```

我将保存按钮放在表单之外以停止发布表单。

# bash - awk 一个变量列表

> ID：16015802
> 
> 赞同：2
> 
> 时间：2013-04-15T13:00:40.183
> 
> 标签：bash

我是 bash 编程的新手，实际上我在刚刚回答的主题中没有找到我的主题的答案。

我有一个带有时间戳值列表的变量，例如

```
myvar="16:00:01 17:30:00 18:13:12" 
```

我要做的是用每个时间戳填充一个数组列表。现在我正在做的（并且有效）是：

```
varlist[0]=$(echo $myvar | awk '{$NF = "" ; print $1}')
varlist[1]=$(echo $myvar | awk '{$NF = "" ; print $2}')
varlist[2]=$(echo $myvar | awk '{$NF = "" ; print $3}') 
```

问题在于，将所有内容都放在如下的 for 循环中，它不会给我单个项目的时间戳，而是给我整个字符串。

```
for (i=1 ; i<=3; i++)
do
    varlist[$i]=$(echo $myvar | awk '{$NF = "" ; print $i}')
done 
```

如何循环 awk？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:05:28.543

您可以像这样直接在 bash 中创建一个数组：

```
array=($myvar) 
```

然后：

```
# print # of elements in array
echo ${#array[@]}

# print all the elements in array
echo ${array[@]}

# loop thru your array
for i in ${array[@]}; do
    echo "i=$i"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:06:48.210

```
for (i=1 ; i<=3; i++)
do
varlist[$i]=$(echo $myvar | awk -v myi=$i '{$NF = "" ; print $myi}')
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:05:36.607

`$i`问题是您正在尝试在带有单引号的 awk 脚本中使用外部变量（即：“ ”）。它（那些单引号）不允许解释变量。

你可以这样做（如果你想用 awk 来做，但还有其他方法 - 查找 bash 数组文档）。

```
for (i=1 ; i<=3; i++)
do
varlist[$i]=$(echo $myvar | awk -v CNTR=$i '{print $CNTR}')
done 
```

# r - 积分（f）中的错误：函数评估给出了错误长度的结果

> ID：16015804
> 
> 赞同：0
> 
> 时间：2013-04-15T13:00:43.010
> 
> 标签：r

我正在使用 R 进行一些多变量分析。对于这项工作，我需要集成三元 PDF。这样做时我得到了错误：

```
Error in integrate(Vectorize(function(x) { : 
  evaluation of function gave a result of wrong length 
```

如您所见，矢量化不是解决方案，因此出现了问题。

如果有人可以给我一个关于发生了什么的提示，我会非常感激。

这是我的代码：

```
library(mvtnorm)
f1<-function(x, y, z) {dmvnorm(x=as.matrix(cbind(x,y,z)), mean=mu.t, sigma)} #PDF with all three
#integrate out x
integrate(Vectorize(function(x) {f1(x=c1, y=c2, z=c3)}), 0.1,0.5, rel.tol=1.5e-20)$value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:29:23.587

无法确定是否有关于您的输入和输出的更多信息，但`length`输出的内容是`f1`什么？如果它与您的输入长度不同，我相信这会导致您遇到错误，如`integrate`的帮助页面所示：

```
f   an R function taking a numeric first argument and returning a numeric vector of the same length. Returning a non-finite element will generate an error. 
```

# c# - 过滤多行

> ID：16015806
> 
> 赞同：-1
> 
> 时间：2013-04-15T13:00:45.413
> 
> 标签：c#

当我过滤我的datagridview时，我总是遇到同样的问题。我使用这段代码：

```
view.RowFilter = "Type like '%" + txt_voertuig1.Text + "%'";
view.RowFilter = "Omschrijving like '%" + txt_fout1.Text + "%'"; 
```

当我只过滤类型时没有问题。在我过滤类型并过滤然后过滤“omschrijving”之后。在 datagridview 中，还会显示带有另一个类型编号的“omschrijvingen”吗？

有人给我解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:05:58.343

将您的代码更改为：

```
view.RowFilter = "Type like '%" + txt_voertuig1.Text + "%' AND Omschrijving like '%" + txt_fout1.Text + "%'"; 
```

在您之前的代码中，您正在分配一个新的过滤器，基本上是为“voertuigen”擦除旧的过滤器。这就是为什么这些不再被过滤的原因。

# html - jQuery Mobile 动态创建弹出窗口和内容的最佳方式

> ID：16015810
> 
> 赞同：17
> 
> 时间：2013-04-15T13:00:50.610
> 
> 标签：html, jquery-mobile, jquery, jquery-mobile-popup

我有以下代码使用 jQuery mobile 创建弹出窗口。创建弹出窗口并创建一个表单并将其与两个按钮一起附加到弹出窗口。这段代码确实有效，但我想知道是否有更好的方法来实现我的预期目标。

```
 //create a div for the popup
    var $popUp = $("<div/>").popup({
        dismissible : false,
        theme : "a",
        overlyaTheme : "a",
        transition : "pop"
    }).bind("popupafterclose", function() {
                    //remove the popup when closing
        $(this).remove();
    });
    //create a title for the popup
    $("<h2/>", {
        text : PURCHASE_TITLE
    }).appendTo($popUp);

            //create a message for the popup
    $("<p/>", {
        text : PURCHASE_TEXT
    }).appendTo($popUp);

    //create a form for the pop up
    $("<form>").append($("<input/>", {
        type : "password",
        name : "password",
        placeholder : PASSWORD_INPUT_PLACEHOLDER
    })).appendTo($popUp);

   //Create a submit button(fake)
    $("<a>", {
        text : SUBMIT_BTN_TXT
    }).buttonMarkup({
        inline : true,
        icon : "check"
    }).bind("click", function() {
        $popUp.popup("close");
        that.subscribeToAsset(callback);
    }).appendTo($popUp);

    //create a back button
    $("<a>", {
        text : BACK_BTN_TXT,
        "data-jqm-rel" : "back"
    }).buttonMarkup({
        inline : true,
        icon : "back"
    }).appendTo($popUp);

    $popUp.popup("open").trigger("create"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T13:16:12.593

您的示例很棒，这是如何创建动态 jQuery/jQuery Mobile 内容的海报示例。

只改变三件事：

*   最后，您应该将弹出窗口附加到所需的 jQuery Mobile 页面，因为它不会在 data-role="page" div 之外工作。
*   将函数**绑定更改为****on 上**的函数。On 是更快的事件绑定方法。它在这里替换绑定和委托。
*   检查您的代码是否可以在 Chrome 等 Web 工具包浏览器中运行。Chrome 有一个讨厌的错误，它会阻止在除**pageshow**之外的每个页面事件中打开程序化弹出窗口。有关此问题的更多信息：[https ://stackoverflow.com/a/15830353/1848600](https://stackoverflow.com/a/15830353/1848600)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T10:53:55.663

[https://github.com/serbanghita/jQM-dynamic-popup](https://github.com/serbanghita/jQM-dynamic-popup)可以帮助你。您仍然需要在弹出窗口的内容中标记 jQuery Mobile 代码。我在生产中使用它，但用于简单的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:12:38.440

首先是与您的联系的弹出式潜水

```
 <div  id="popupPhotoLandscape" class="photopopup" data-role="popup" data-theme="none" data-     shadow="false" data-overlay-theme="a">
            <a href="#home"  data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>

 //Content
        </div> 
```

打开弹出窗口的按钮

```
 <a  data-role="button" data-theme="c" data-inline="true" data-mini="true" id="snap_view_btn" style="float:left;margin-top: 4px;" >Snap View</a> 
```

点击按钮

```
$('#snap_view_btn').click(function() {

   $('#popupPhotoLandscape').popup();
   $('#popupPhotoLandscape').popup("open");
}); 
```

页面初始化

```
$( document ).on( "pageinit", function() {

   $( ".photopopup" ).on({
    popupbeforeposition: function() {
        var maxHeight = $( window ).height() - 60 + "px";
        $( ".photopopup" ).css( "height", '800px' );
        $( ".photopopup" ).css( "width", '600px' );
    }

 });

 }); 
```

# php - 一次将多个值插入 MySQL

> ID：16015818
> 
> 赞同：0
> 
> 时间：2013-04-15T13:01:07.000
> 
> 标签：php, mysql, database, insert-into

谁能解释一下为什么这个 PHP / MySQL 不起作用？基本上我需要从表单中一次插入大量行，因此会有多个名称字段、多个短、中、长字段等。我收到此错误：

```
Notice: Undefined variable: Short1 in C:\xampp\htdocs\process.php on line 95
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Long, VLong, Extreme, LJump, HJump, Shotputt, Discuss, Javelin, Date, Year) VAL' at line 2 
```

这是我的PHP

```
<?php

$host = "localhost";
$databasename = "pe_results";
$databaseusername = "root";
$databasepassword = "";

$conn = mysql_connect("$host", "$databaseusername", "$databasepassword"); 
mysql_select_db("$databasename", $conn); 

        if (isset($_POST['Name1'])) { 
        $Name1 = $_POST['Name1'];
        }
        if (isset($_POST['Short1'])) { 
        $Short1 = $_POST['Short1'];
        }
        if (isset($_POST['Med1'])) { 
        $Med1 = $_POST['Med1'];
        }
        if (isset($_POST['Long1'])) { 
        $Long1 = $_POST['Long1'];
        }
        if (isset($_POST['VLong1'])) { 
        $VLong1 = $_POST['VLong1'];
        }
        if (isset($_POST['Extreme1'])) { 
        $Extreme1 = $_POST['Extreme1'];
        }
        if (isset($_POST['LJump1'])) { 
        $LJump1 = $_POST['LJump1'];
        }
        if (isset($_POST['HJump1'])) { 
        $HJump1 = $_POST['HJump1'];
        }
        if (isset($_POST['Shotputt1'])) { 
        $Shotputt1 = $_POST['Shotputt1'];
        }
        if (isset($_POST['Discuss1'])) { 
        $Discuss1 = $_POST['Discuss1'];
        }
        if (isset($_POST['Javelin1'])) { 
        $Javelin1 = $_POST['Javelin1'];
        }
        if (isset($_POST['Date'])) { 
        $Date = $_POST['Date'];
        }
        if (isset($_POST['Year'])) { 
        $Year = $_POST['Year'];
        }
        // Sector 2 */
            if (isset($_POST['Name2'])) { 
        $Name2 = $_POST['Name2'];
        }
        if (isset($_POST['Short2'])) { 
        $Short2 = $_POST['Short2'];
        }
        if (isset($_POST['Med2'])) { 
        $Med2 = $_POST['Med2'];
        }
        if (isset($_POST['Long2'])) { 
        $Long2 = $_POST['Long2'];
        }
        if (isset($_POST['VLong2'])) { 
        $VLong2 = $_POST['VLong2'];
        }
        if (isset($_POST['Extreme2'])) { 
        $Extreme2 = $_POST['Extreme2'];
        }
        if (isset($_POST['LJump2'])) { 
        $LJump2 = $_POST['LJump2'];
        }
        if (isset($_POST['HJump2'])) { 
        $HJump2 = $_POST['HJump2'];
        }
        if (isset($_POST['Shotputt2'])) { 
        $Shotputt2 = $_POST['Shotputt2'];
        }
        if (isset($_POST['Discuss2'])) { 
        $Discuss2 = $_POST['Discuss2'];
        }
        if (isset($_POST['Javelin2'])) { 
        $Javelin2 = $_POST['Javelin2'];
        }
        if (isset($_POST['Date'])) { 
        $Date = $_POST['Date'];
        }
        if (isset($_POST['Year'])) { 
        $Year = $_POST['Year'];
        }

        $sql="INSERT INTO results_main
  (Name, Short, Med, Long, VLong, Extreme, LJump, HJump, Shotputt, Discuss, Javelin, Date, Year)
VALUES
  ('$Name1', '$Short1', '$Med1', '$Long1', '$VLong1', '$Extreme1', '$LJump1', '$HJump1', '$Shotputt1', '$Discuss1', '$Javelin1', '$Date', '$Year'),
  ('$Name2', '$Short2', '$Med2', '$Long2', '$VLong2', '$Extreme2', '$LJump2', '$HJump2', '$Shotputt2', '$Discuss2', '$Javelin2', '$Date', '$Year');
";

$result = mysql_query($sql) or die(mysql_error());

// close connection 
mysql_close($conn);

?> 
```

JW 的新错误消息

```
Notice: Undefined variable: Short1 in C:\xampp\htdocs\process.php on line 95
INSERT INTO results_main (`Name`, `Short`, `Med`, `Long`, `VLong`, `Extreme`, `LJump`, `HJump`, `Shotputt`, `Discuss`, `Javelin`, `Date`, `Year`) VALUES (`1`, ``, `1`, `1`, `1`, `1`, `1`, `1`, `1`, `1`, `1`, `2013-04-26`, `10`), (`2`, `2`, `2`, `2`, `2`, `2`, `2`, `2`, `2`, `2`, `2`, `2013-04-26`, `10`); Unknown column '1' in 'field list' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:02:42.640

`LONG`是保留关键字，恰好是您的列的名称。为了避免语法错误，列名应该用反引号转义。

```
INSERT INTO results_main(Name, Short, Med, `Long`, VLong, ...) VALUES (....) 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

如果您有权更改列，请将名称更改为非保留关键字，以避免将来出现问题。

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:02:46.667

检查您的帖子数组，您的 $_POST['Short1']; 有问题

也不要使用MYSQL 保留关键字，Long 是保留关键字。如果你使用你应该通过

```
`Long` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:03:52.113

我建议转储您的 $_POST 数组并查看它。根据您的代码，仅当 $_POST 数组中有值时才设置变量。

# javascript - 如何设置 SignalR 自定义 ClientIds？

> ID：16015824
> 
> 赞同：0
> 
> 时间：2013-04-15T13:01:24.890
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, signalr

我想将 SignalR ClientIds 设置为存储在 cookie 中的用户标识符，以便从集线器轻松获取它们。如何在 SignalR 0.5 及更高版本中执行此操作？[此页面](http://www.kevgriffin.com/maintaining-signalr-connectionids-across-page-instances/)上有解决方案，但 IConnectionIdFactory 在 SignalR 的新版本中已弃用，因此它不起作用。感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:35:58.260

由于现在不推荐使用 IConnectionIdFactory，因此您需要维护自己的用户到连接 ID 的映射。

有关执行此操作的推荐做法，请参阅“ [SignalR 1.0 beta 连接工厂](https://stackoverflow.com/questions/14350158/signalr-1-0-beta-connection-factory/14350859#14350859)”。

# c - 使用字符串通过引用传递

> ID：16015827
> 
> 赞同：0
> 
> 时间：2013-04-15T13:01:32.900
> 
> 标签：c, pointers, memory, pass-by-reference

所以我正在编写一个字符串片段重组程序并且遇到以下问题。如果一个字符串包含在另一个字符串中，我需要将第一个字符串设置为两个字符串中的较大者（这是我将两个字符串合并在一起时的关键）。但是，由于某种原因，我的引用传递一直搞砸了，字符串永远不会重新分配，因此合并搞砸了。

这是通过引用传递：

```
int oneRound(char*frags[], int* numFrags) {
    int currMax = 0;
    int max = 0;
    int mergeOne = 0;
    int mergeTwo = 0;
    char *fragOne;
    char *fragTwo;
    for(int i = 0; i < *numFrags; i++) {
            for (int j = i+1; j < *numFrags; j++) {
                    fragOne = frags[i];
                    fragTwo = frags[j];
                    currMax = FindMaxOverlap(&fragOne, &fragTwo);
                    if (currMax >= max) {
                            max = currMax;
                            mergeOne = i;
                            mergeTwo = j;
                    }
            }
    } 
```

这是它在下面调用的函数：

```
int FindMaxOverlap(char**firstString, char**secondString)
      if (strstr(*firstString, *secondString) != NULL || strstr(*secondString, *firstString) != NULL) {
            maxOverlap = length;
            if (strlen(*firstString) < strlen(*secondString)) {
                    char *temp = *firstString;
                    *firstString = *secondString;
                    *secondString = temp;
            }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:23:56.847

此代码正在更改（临时）变量`fragOne`和`fragTwo`：

```
fragOne = frags[i];
fragTwo = frags[j];
currMax = FindMaxOverlap(&fragOne, &fragTwo); 
```

它没有修改数组的元素`frags`，我认为这是预期的行为。传递数组元素的地址来实现重新分配：

```
currMax = FindMaxOverlap(&frags[i], &frags[j]); 
```

[此外，正如Jite](https://stackoverflow.com/users/921723/jite)在评论中指出的那样，`FindMaxOverlap()`必须返回一个`int`否则行为未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:24:59.463

您是否尝试过使用[gdb 单](http://www.gnu.org/software/gdb/)步执行您的代码？我不知道您使用的是什么编译器，但是使用 gcc，您可以使用带有 -g 开关的 gcc 编译代码：

```
$ gcc -g maxover.c -o max 
```

然后您可以使用 gdb 逐步完成它：

```
 gdb max.out 
```

爱你的调试器:)

# jenkins - 在 Jenkins 作业上运行声纳时，目录中没有与模式“java”匹配的文件

> ID：16015830
> 
> 赞同：1
> 
> 时间：2013-04-15T13:01:36.497
> 
> 标签：jenkins, sonarqube, sonar-runner

我使用 Jenkins 进行构建，并在工作完成后尝试运行 Sonar。它实际上已经起作用了，但是现在我总是收到此错误消息，并且我认为我并没有真正改变任何东西。

线程“main”中的异常：

```
org.sonar.runner.RunnerException: No files matching pattern "java" in directory. 
```

目录存在，其中肯定有 Java 代码。每次构建时，我都会检查整个 svn 源的新副本。它实际上是 jenkins 作业文件夹，在作业完成后签出的源代码所在的位置。在我开始新的构建之前它仍然存在。

我不明白为什么 Sonar 无法获得该源代码。

有没有人遇到过这样的问题？我正在使用最新版本的声纳和詹金斯我今天早上刚刚做了另一个更新。还是同样的问题。对于配置，我使用 Sonar 属性文件，这些文件也可以签出到 Jenkins 作业文件夹。他找到了这些文件并想检查该文件中配置的文件夹，但随后失败。

# android - 在android的webview中打开pdf

> ID：16015831
> 
> 赞同：0
> 
> 时间：2013-04-15T13:01:36.580
> 
> 标签：android, android-webview

我正在尝试在android的webview中打开pdf，

我尝试使用：

`webView.loadUrl("https://docs.google.com/gview?embedded=true&url="+url)`

如果 url 是`http://www.adobe.com/devnet/acrobat/pdfs/pdf_open_parameters.pdf`（这是一个示例），它的工作正常，

但如果 url`http://192.168.x.xxx:8001/ql/Demo/Demo_Rep_DDForm.pdf`没有打开。

无法弄清楚原因，上面的IP是公开的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T13:02:43.720

> 以上IP是公开的

不它不是。您提供的范围内的 IP 是 LAN 网络中使用的内部 IP 地址。您的公共 IP 有所不同，您必须找出它并使用它来使用 Google Docs 提供您的文件。

您只需输入`my public ip`Google 即可获取您的公共 IP。

此外，公共 IP 更改非常频繁（除非您为 ISP 的静态 IP 支付额外费用），因此您最好租用服务器，或者将文件保存在公共域中的某个地方以允许不间断地访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-09T07:20:00.410

如果有一天它可以帮助某人，请发布此信息，

作为替代方案，为了在 android 中查看 pdf 文件，您可以使用[pdf.js](https://github.com/mozilla/pdf.js/)，这需要您在 assets 文件夹中添加与 web 相关的文件，其中包括 index.html 中的 js 文件，并通过调用 index.html将 pdf 文件的 url 作为查询参数传递并将其加载到 webview 中。

优点：用户无需离开 webview 您可以重复使用它来显示托管在服务器中或应用程序可用的 PDF，您也可以查看需要使用 cookie 登录的 pdf。

缺点：应用程序大小会略有增加。

# sql-server - 慢查询 - 重写建议，重点关注 where 子句（或其他任何有意义的内容）

> ID：16015833
> 
> 赞同：0
> 
> 时间：2013-04-15T13:01:44.357
> 
> 标签：sql-server

数据库：sqlserver 2008。下面的查询非常慢。我想让这个野兽跑得更快，重写查询，但我很难过。我可以注释掉所有 sum case 语句和 group by 子句，只留下带有 select sum(0) 和 where 子句的查询外壳，并且性能没有太大变化。所以我很确定问题出在 where 子句上。但是，我不确定如何重写这个来尝试任何其他替代方案。

有人想在这个上测试他们的 SQL-fu 吗？任何帮助深表感谢。谢谢！

```
 INSERT INTO [_SOC_Reviews]
DECLARE
    @LocationID         Int=NULL,
    @FromDate           DateTime=NULL,
    @ToDate             DateTime=NULL,
    @DateType           Int=0,
    @OfficeID           Int=NULL,
    @QCType             Int=NULL,
    @ProgramTypeID      Int=NULL,
    @SupervisorID       varchar(100)=NULL,
    @SpecialistID       varchar(100)=NULL,
    @ReviewerID         varchar(100)=NULL,
    @PrincipalActionID  Int=NULL,
    @DepartmentID       Int=NULL,
    @Group1             Int=1,
    @Group2             Int=1,
    @ReportName         VarChar(100)='rptQC',
    @UserName           varchar(30)=NULL

select 
    @LocationID=NULL,
    @FromDate='2012-05-01 00:00:00',
    @ToDate='2012-06-01',
    @OfficeID=NULL,
    @ProgramTypeID=NULL,
    @SupervisorID=NULL,
    @SpecialistID=NULL,
    @PrincipalActionID=NULL,
    @QCType=NULL,
    @Group1=1,
    @Group2=NULL,
    @UserName=N'joeblow',
    @DepartmentID=NULL,
    @ReviewerID=NULL

IF OBJECT_ID('dbo.[_SOC_Reviews]', 'U') IS NOT NULL
  DROP TABLE dbo.[_SOC_Reviews]
CREATE TABLE [_SOC_Reviews] (
    IsReviewed                  int,
    Group1                      Varchar(100),
    Group2                      Varchar(100),
    NumFilesAssigned            int,
    NumFilesInProgress          int,
    TotalNumFiles               int,
    PendingCorrections          int,
    PendingCorrGT30             int
    )

select SUM(0),
        CASE 
            WHEN @Group1 = 1 THEN CONVERT(Varchar(100), R.LocationID)
            WHEN @Group1 = 2 THEN CONVERT(Varchar(100), R.SubLocation)
            WHEN @Group1 = 3 THEN CONVERT(Varchar(100), R.ProgramTypeID)
            WHEN @Group1 = 4 THEN CONVERT(Varchar(100), RS.SupervisorID)
            WHEN @Group1 = 5 THEN CONVERT(Varchar(100), R.TransactionTypeId)
            WHEN @Group1 = 6 THEN CONVERT(Varchar(100), RS.SpecialistID)
            WHEN @Group1 = 7 THEN CONVERT(Varchar(100), R.ChecklistTypeId)
            WHEN @Group1 = 8 THEN CONVERT(Varchar(100), RS.DepartmentID)
            WHEN @Group1 = 9 THEN CONVERT(Varchar(2), DATEPART(MONTH,R.EffectiveActionDate)) + '/' + CONVERT(VARCHAR(4),DATEPART(YEAR,R.EffectiveActionDate))
            WHEN @Group1 = 10 THEN CONVERT(Varchar(100), R.ReviewedBy)
        END,
        CASE 
            WHEN @Group2 = 1 THEN CONVERT(Varchar(100), R.SubLocation)
            WHEN @Group2 = 2 THEN CONVERT(Varchar(100), R.ProgramTypeID)
            WHEN @Group2 = 3 THEN CONVERT(Varchar(100), RS.SupervisorID)
            WHEN @Group2 = 4 THEN CONVERT(Varchar(100), RS.SpecialistID) 
            WHEN @Group2 = 5 THEN CONVERT(Varchar(100), R.TransactionTypeId)
            WHEN @Group2 = 6 THEN CONVERT(Varchar(100), R.LocationID)
            WHEN @Group2 = 7 THEN CONVERT(Varchar(100), R.ChecklistTypeId)
            WHEN @Group2 = 8 THEN CONVERT(Varchar(100), RS.DepartmentID)
            WHEN @Group2 = 9 THEN CONVERT(Varchar(2), DATEPART(MONTH,R.EffectiveActionDate)) + '/' + CONVERT(VARCHAR(4),DATEPART(YEAR,R.EffectiveActionDate))
            WHEN @Group2 = 10 THEN CONVERT(Varchar(100), R.ReviewedBy) 
            ELSE NULL
        END,
    SUM(CASE WHEN R.ReviewStatusId = 7 AND (R.ReviewStatusModified BETWEEN @FromDate AND @ToDate) THEN 1 ELSE 0 END) AS NumberOfFilesAssigned,
    SUM(CASE WHEN R.ReviewStatusId = 1 AND (R.ReviewStatusModified BETWEEN @FromDate AND @ToDate) THEN 1 ELSE 0 END) as NumberOfFilesInProgress,
    SUM(CASE WHEN (R.ReviewStatusModified BETWEEN @FromDate AND @ToDate) THEN 1 ELSE 0 END) AS TotalNumFiles,
    SUM(CASE WHEN R.ReviewStatusId IN (10,12,14,16) THEN 1 ELSE 0 END),
    SUM(CASE WHEN R.ReviewStatusId IN (10,12,14,16) AND DATEDIFF(DAY, R.InitialCompletionDate, GETDATE()) > 30  THEN 1 ELSE 0 END)

from Review R 
LEFT JOIN   dbo.fnu_ReviewSpecialists2_TEST(@SpecialistID,@SupervisorID,@DepartmentID) RS
    ON  R.Id = RS.ReviewId
    LEFT JOIN Location L
    ON R.LocationId = L.Id
    INNER JOIN  [_SOC_USER] U
    ON R.LocationID = U.LocationID
where 
    ((R.LocationID = @LocationID AND @LocationID IS NOT NULL) OR (@LocationID IS NULL))
    AND ((R.SubLocation = @OfficeID AND @OfficeID IS NOT NULL) or (@OfficeID IS NULL))
    AND ((R.ProgramTypeID = @ProgramTypeID AND @ProgramTypeID IS NOT NULL) or (@ProgramTypeID IS NULL))
    AND ((R.TransactionTypeId = @PrincipalActionID AND @PrincipalActionID IS NOT NULL) or (@PrincipalActionID IS NULL))
    AND ((R.ChecklistTypeId = @QCType AND @QCType IS NOT NULL) OR (@QCType IS NULL))
    AND ((R.ReviewedBy = @ReviewerID AND @ReviewerID IS NOT NULL) or (@ReviewerID IS NULL))
    AND ((RS.SupervisorId = @SupervisorID AND @SupervisorID IS NOT NULL) or (@SupervisorID IS NULL))
    AND ((RS.SpecialistId = @SpecialistID AND @SpecialistID IS NOT NULL) or (@SpecialistID IS NULL))
    AND ((RS.DepartmentId = @DepartmentID AND @DepartmentID IS NOT NULL) or (@DepartmentID IS NULL))
    AND (@LocationID is NOT NULL OR L.IsConsulting = 0)
    AND L.IsActive = 1

GROUP BY  
        CASE
            WHEN @Group1 = 1 THEN CONVERT(Varchar(100), R.LocationID)
            WHEN @Group1 = 2 THEN CONVERT(Varchar(100), R.SubLocation)
            WHEN @Group1 = 3 THEN CONVERT(Varchar(100), R.ProgramTypeID)
            WHEN @Group1 = 4 THEN CONVERT(Varchar(100), RS.SupervisorID)
            WHEN @Group1 = 5 THEN CONVERT(Varchar(100), R.TransactionTypeId)
            WHEN @Group1 = 6 THEN CONVERT(Varchar(100), RS.SpecialistID)
            WHEN @Group1 = 7 THEN CONVERT(Varchar(100), R.ChecklistTypeID)
            WHEN @Group1 = 8 THEN CONVERT(Varchar(100), RS.DepartmentID)
            WHEN @Group1 = 9 THEN CONVERT(Varchar(2), DATEPART(MONTH,R.EffectiveActionDate)) + '/' + CONVERT(VARCHAR(4),DATEPART(YEAR,R.EffectiveActionDate))
            WHEN @Group1 = 10 THEN CONVERT(Varchar(100), R.ReviewedBy)          
        END,
        CASE 
            WHEN @Group2 = 1 THEN CONVERT(Varchar(100), R.SubLocation)
            WHEN @Group2 = 2 THEN CONVERT(Varchar(100), R.ProgramTypeID)
            WHEN @Group2 = 3 THEN CONVERT(Varchar(100), RS.SupervisorID)
            WHEN @Group2 = 4 THEN CONVERT(Varchar(100), RS.SpecialistID) 
            WHEN @Group2 = 5 THEN CONVERT(Varchar(100), R.TransactionTypeId)
            WHEN @Group2 = 6 THEN CONVERT(Varchar(100), R.LocationID)
            WHEN @Group2 = 7 THEN CONVERT(Varchar(100), R.ChecklistTypeId)
            WHEN @Group2 = 8 THEN CONVERT(Varchar(100), RS.DepartmentID)
            WHEN @Group2 = 9 THEN CONVERT(Varchar(2), DATEPART(MONTH,R.EffectiveActionDate)) + '/' + CONVERT(VARCHAR(4),DATEPART(YEAR,R.EffectiveActionDate))
            WHEN @Group2 = 10 THEN CONVERT(Varchar(100), R.ReviewedBy)          
            ELSE NULL
        END 
```

这是解释计划：

```
 |--Stream Aggregate(GROUP BY:([Expr1015], [Expr1014]) DEFINE:([Expr1016]=SUM((0)), [Expr1017]=SUM(CASE WHEN [_DatabaseTesta].[dbo].[Review].[ReviewStatusId] as [R].[ReviewStatusId]=(7) AND [_DatabaseTesta].[dbo].[Review].[ReviewStatusModified] as [R].[Re 3           4           3           Stream Aggregate              
       |--Sort(ORDER BY:([Expr1015] ASC, [Expr1014] ASC))                                                                                                                                                                                                        3           5           4           Sort                          
            |--Compute Scalar(DEFINE:([Expr1014]=CASE WHEN [@Group1]=(1) THEN CONVERT(varchar(100),[_DatabaseTesta].[dbo].[Review].[LocationId] as [R].[LocationId],0) ELSE CASE WHEN [@Group1]=(10) THEN CONVERT(varchar(100),[_DatabaseTesta].[dbo].[Review].[ 3           6           5           Compute Scalar                
                 |--Filter(WHERE:(([_DatabaseTesta].[dbo].[ReviewSpecialist].[SupervisorId]=CONVERT_IMPLICIT(uniqueidentifier,[@SupervisorID],0) AND [@SupervisorID] IS NOT NULL OR [@SupervisorID] IS NULL) AND ([_DatabaseTesta].[dbo].[ReviewSpecialist].[Spe 3           7           6           Filter                        
                      |--Nested Loops(Left Outer Join, OUTER REFERENCES:([R].[Id]))                                                                                                                                                                              3           8           7           Nested Loops                  
                           |--Nested Loops(Inner Join, OUTER REFERENCES:([U].[locationID]))                                                                                                                                                                      3           9           8           Nested Loops                  
                           |    |--Nested Loops(Inner Join, WHERE:([_DatabaseTesta].[dbo].[Review].[LocationId] as [R].[LocationId]=[_DatabaseTesta].[dbo].[_SOC_USER].[locationID] as [U].[locationID]))                                                        3           10          9           Nested Loops                  
                           |    |    |--Sort(ORDER BY:([R].[Id] ASC))                                                                                                                                                                                            3           11          10          Sort                          
                           |    |    |    |--Compute Scalar(DEFINE:([Expr1047]=CASE WHEN [_DatabaseTesta].[dbo].[Review].[ReviewStatusId] as [R].[ReviewStatusId]=(16) OR [_DatabaseTesta].[dbo].[Review].[ReviewStatusId] as [R].[ReviewStatusId]=(14) OR [Qual 3           12          11          Compute Scalar                
                           |    |    |         |--Nested Loops(Inner Join, OUTER REFERENCES:([R].[Id], [Expr1056]) WITH UNORDERED PREFETCH)                                                                                                                      3           13          12          Nested Loops                  
                           |    |    |              |--Hash Match(Inner Join, HASH:([R].[Id])=([R].[Id]))                                                                                                                                                        3           16          13          Hash Match                    
                           |    |    |              |    |--Index Scan(OBJECT:([_DatabaseTesta].[dbo].[Review].[idxReview_Status_Loc] AS [R]),  WHERE:(([_DatabaseTesta].[dbo].[Review].[LocationId] as [R].[LocationId]=[@LocationID] AND [@LocationID] IS NOT  3           17          16          Index Scan                    
                           |    |    |              |    |--Index Scan(OBJECT:([_DatabaseTesta].[dbo].[Review].[idx_Review_TenantID_QCType] AS [R]),  WHERE:([_DatabaseTesta].[dbo].[Review].[ChecklistTypeId] as [R].[ChecklistTypeId]=[@QCType] AND [@QCType]  3           18          16          Index Scan                    
                           |    |    |              |--Clustered Index Seek(OBJECT:([_DatabaseTesta].[dbo].[Review].[PK_Review] AS [R]), SEEK:([R].[Id]=[_DatabaseTesta].[dbo].[Review].[Id] as [R].[Id]),  WHERE:([_DatabaseTesta].[dbo].[Review].[SubLocation] 3           32          13          Clustered Index Seek          
                           |    |    |--Table Scan(OBJECT:([_DatabaseTesta].[dbo].[_SOC_USER] AS [U]))                                                                                                                                                           3           41          10          Table Scan                    
                           |    |--Clustered Index Seek(OBJECT:([_DatabaseTesta].[dbo].[Location].[PK_Location] AS [L]), SEEK:([L].[Id]=[_DatabaseTesta].[dbo].[_SOC_USER].[locationID] as [U].[locationID]),  WHERE:([_DatabaseTesta].[dbo].[Location].[IsActiv 3           43          9           Clustered Index Seek          
                           |--Nested Loops(Left Semi Join, WHERE:([_DatabaseTesta].[dbo].[ReviewSpecialist].[Id]=[Expr1008]))                                                                                                                                    3           44          8           Nested Loops                  
                                |--Nested Loops(Inner Join, OUTER REFERENCES:([_DatabaseTesta].[dbo].[ReviewSpecialist].[Id]))                                                                                                                                   3           45          44          Nested Loops                  
                                |    |--Index Seek(OBJECT:([_DatabaseTesta].[dbo].[ReviewSpecialist].[idxReviewSpecialist_ReviewID]), SEEK:([_DatabaseTesta].[dbo].[ReviewSpecialist].[ReviewId]=[_DatabaseTesta].[dbo].[Review].[Id] as [R].[Id]) ORDERED FORWA 3           46          45          Index Seek                    
                                |    |--Clustered Index Seek(OBJECT:([_DatabaseTesta].[dbo].[ReviewSpecialist].[PK_ReviewSpecialist]), SEEK:([_DatabaseTesta].[dbo].[ReviewSpecialist].[Id]=[_DatabaseTesta].[dbo].[ReviewSpecialist].[Id]) LOOKUP ORDERED FORWA 3           48          45          Clustered Index Seek          
                                |--Table Spool                                                                                                                                                                                                                   3           56          44          Table Spool                   
                                     |--Stream Aggregate(GROUP BY:([_DatabaseTesta].[dbo].[ReviewSpecialist].[ReviewId]) DEFINE:([Expr1008]=MIN([_DatabaseTesta].[dbo].[ReviewSpecialist].[Id])))                                                                3           57          56          Stream Aggregate              
                                          |--Sort(ORDER BY:([_DatabaseTesta].[dbo].[ReviewSpecialist].[ReviewId] ASC))                                                                                                                                           3           58          57          Sort                          
                                               |--Clustered Index Scan(OBJECT:([_DatabaseTesta].[dbo].[ReviewSpecialist].[PK_ReviewSpecialist]), WHERE:([_DatabaseTesta].[dbo].[ReviewSpecialist].[SpecialistId]=isnull(CONVERT_IMPLICIT(uniqueidentifier,[@Spec 3           59          58          Clustered Index Scan 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:16:06.860

在查询提示末尾添加 -`option(recompile)`

# c# - Async await - it is the right Idea to avoid a blocking UI?

> ID：16015837
> 
> 赞同：1
> 
> 时间：2013-04-15T13:01:53.777
> 
> 标签：c#, asynchronous

I thaught that using await / async is the best Idea to ensure a responsive UI. But I seem to do something wrong, because my Application freezes anyway.

Wht I Try to do: A Button is launched and should await a long lasting operation.

```
public async Task CmdLoadExcel()
{
    // läd die excel datei
   string[] excelFiles = this.GetExcelFiles();
   ExcelLoader eloader = new ExcelLoader();
   await eloader.StartLoading(excelFiles);
   foreach (DataSet elem in eloader.Tables)
   {
       this.ActivateItem(new ExcelViewModel(elem) { DisplayName = elem.DataSetName });
   }
} 
```

The launched Class:

```
public async Task StartLoading(string[] files)
        {
            foreach (string file in files)
            {
                Stopwatch swatch = new Stopwatch();
                swatch.Start();
                System.Threading.Thread.Sleep(5000);
                FileInfo finfo = new FileInfo(file);
                using (ExcelPackage package = new ExcelPackage(finfo))
                {
                // very long operation
                }
            } // For Each
        } // StartLoading 
```

It simply halts at the sleep and I am unsure what I have done wrong.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:05:12.657

Marking methods with async and await doesn't really do anything by itself. You need to await a task:

This would help:

```
public async Task StartLoading(string[] files)
{
    return Task.Run(() =>
    {            
        foreach (string file in files)
        {
            Stopwatch swatch = new Stopwatch();
            swatch.Start();
            System.Threading.Thread.Sleep(5000);
            FileInfo finfo = new FileInfo(file);
            using (ExcelPackage package = new ExcelPackage(finfo))
            {
            // very long operation
            }
        } // For Each
    };
} // StartLoading 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:09:58.537

Yor `StartLoading` method appears to be lacking any `await` statements. The `async` keyword does not magically make a method able to run asyncronously. You can `await` a `Task.Delay` as an async-alterative to your `Thread.Sleep`. For your very long operation, you probably need to spawn a new thread if it is CPU bound. If it is IO bound, then it is a matter of whether you have access to an Async API that you can use.

See [Three Essential Tips For Asysnc](http://channel9.msdn.com/Series/Three-Essential-Tips-for-Async/Three-Essential-Tips-For-Async-Introduction) on MSDN Channel 9 for the start of a good introduction.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:05:25.953

The problem is that your StartLoading task itself isn't asynchronous. You can fix this using the following code:

```
public Task StartLoading(string[] files)
{
    return Task.Factory.StartNew(() =>
        {
            foreach (string file in files)
            {
                Stopwatch swatch = new Stopwatch();
                swatch.Start();
                System.Threading.Thread.Sleep(5000);
                FileInfo finfo = new FileInfo(file);
                using (ExcelPackage package = new ExcelPackage(finfo))
                {
                        // very long operation
                }
            } // For Each    
        });
} // StartLoading 
```

Then you can use the code as follows:

```
public Task CmdLoadExcel()
{
    // läd die excel datei
   string[] excelFiles = this.GetExcelFiles();
   ExcelLoader eloader = new ExcelLoader();

   var task = eloader.StartLoading(excelFiles);
   return task.ContinueWith(t =>
            {
                foreach (DataSet elem in eloader.Tables)
                {
                    this.ActivateItem(new ExcelViewModel(elem) { DisplayName = elem.DataSetName });
                }
            });
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T13:16:51.103

I suspect the issue might be that the line "await eloader.StartLoading(excelFiles);" is actually running on the same (UI) thread. You need to execute it like below. This will cause the method to be run on a ThreadPool thread.

```
await Task.Run(eloader.StartLoading(excelFiles)); 
```

# windows - 如何在 Windows 上从批处理文件运行 FTP 脚本？

> ID：16015841
> 
> 赞同：1
> 
> 时间：2013-04-15T13:02:09.747
> 
> 标签：windows, batch-file, ftp

我正在尝试创建一个 .bat 文件来删除某个 ftp 文件夹中的所有 xml 文件，而不管文件的日期如何。我尝试了许多脚本，但没有任何解决方案。

许多专家都在谈论包含以下脚本的 .txt 文件，但老实说，我不知道如何执行它，甚至不知道我是否正确创建了文件。

我只需要删除这个容器上的所有文件。

```
open ftp://xxxx.xxxx.net
myusername
mypassword
cd /bts/xxxx
mdelete *
quit 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:28:24.630

您的 FTP 脚本看起来没问题。如果文件夹中还有其他文件，您可能只想替换`mdelete *`为。`mdelete *.xml``.xml`

要实际运行脚本，`ftp.exe`请从批处理文件中运行，例如：

```
@echo off
echo Running FTP to delete XML files...
ftp -s:ftp.txt 
```

`ftp.txt`包含您的 FTP 脚本的文件名在哪里（您的问题中的那个）。

# solr - 如何在 solr 中搜索带有引号的文档？

> ID：16015848
> 
> 赞同：-1
> 
> 时间：2013-04-15T13:02:29.857
> 
> 标签：solr

如何在 solr 中使用引号进行搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:13:18.403

[转义特殊字符](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html)

Lucene 支持对属于查询语法一部分的特殊字符进行转义。当前列表特殊字符是

```
+ - && || ! ( ) { } [ ] ^ " ~ * ? : \ 
```

要转义这些字符，请在字符前使用 \。例如，要搜索 (1+1):2，请使用以下查询：

```
\(1\+1\)\:2 
```

# android - 使用 Google Checkout Polling API 验证 Android 应用内购买时出现延迟

> ID：16015856
> 
> 赞同：2
> 
> 时间：2013-04-15T13:02:43.847
> 
> 标签：android, api, in-app-purchase, google-checkout

我正在尝试使用 Google Checkout API 从我的服务器验证 Android 应用内购买。根据这个其他查询（[Android 市场上的应用程序 - HTTP 通知不来](https://stackoverflow.com/questions/3459858/app-on-android-market-http-notifications-dont-come)），我没有收到任何回调，所以我正在使用轮询 API。

它工作正常，除了在轮询收到有关购买的通知之前我有 5 或 6 分钟的延迟，即使在浏览器中登录到商家帐户的用户已经可以看到所有信息。检查 API 文档，这意味着它可能需要更长的时间，因为它指出“使用轮询 API，您可以检索不到 180 天且至少 30 分钟的所有通知”。

这种延迟是典型的（我在英国）吗？轮询 API 仍然是验证 Android 应用内购买的推荐方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:41:03.490

在我看来，尝试通过服务器上的 Google Checkout Polling API 验证 GP LVL 和/或 IAB 信息并不是最好的方法。如果您仍然有服务器，则有更好的选择。

正如[保护 Android LVL 应用程序](http://android-developers.blogspot.de/2010/09/securing-android-lvl-applications.html)一文中所述，最好的方法是在受信任的服务器上验证许可证信息。它是这样的：

1.  不要使用谷歌演示代码；[它并不健壮（不检查所有错误条件）](https://stackoverflow.com/a/14935976/1856738)，甚至可以被脚本替换，例如伪造响应（尽管，如果您实现如下的服务器端检查，那无论如何都无关紧要）。直接使用`com.android.vending.licensing`。不要在您的应用中包含您的 Google Developer Console 应用密钥，您不需要它。
2.  您的应用程序向您的服务器请求一个随机数来`ILicensingService.checkLicense()`调用。您的服务器为您的应用程序提供一个安全的随机随机数。`ILicensingService.checkLicense()`您的应用程序使用该随机数调用。
3.  Android GP LVL Servce 通过 回调您的应用程序`ILicenseResultListener.verifyLicense()`，提供签名数据和签名。（提示：签名数据包含随机数，因此这里甚至不可能进行重放攻击。）
4.  您的应用程序将签名数据与签名一起传递到您的服务器。
5.  您的服务器是唯一知道您的 Google Developer Console 应用程序密钥的实例。它根据签名数据验证签名。
6.  验证结果将有助于您做出有关访问服务器数据的身份验证决策。
7.  确保不要过于频繁地检查许可证。Google 希望您遵守许可证响应中提供的有效时间戳（他们声称它甚至反映了 15 分钟的退款期限）。显然，只有将有效性存储在*服务器*端并且服务器允许应用程序跳过步骤 2 中的测试时，这才是安全的。

有一个区别，这同样适用于 IAB。不幸的是，IAB V3 不适用于`getPurchases()`. 原因可能是[IAB 服务本身（而不仅仅是 Google 应用端参考代码）广泛使用缓存](https://stackoverflow.com/a/14830007/1856738)。不过，对于购买，您可以传递一个`developerPayload`to `com.android.vending.billing.IInAppBillingService.getBuyIntent()`，它将包含在`getPurchases()`返回的签名数据中。因此，只要您*没有*过期标准或某种*隐式*（基于时间）或*服务器管理的显式*应用内购买的过期标准，API 仍然足够安全；然后服务器会要求应用程序使用过期的项目，如果失败，这甚至不是问题，因为服务器仍然知道它并且可以要求应用程序一次又一次地使用这些项目。

我希望我能对这个话题有所了解。

# javascript - 当滚动条为 2500px 时如何运行此脚本？

> ID：16015857
> 
> 赞同：0
> 
> 时间：2013-04-15T13:02:46.583
> 
> 标签：javascript, jquery

我在这里尝试过，但我认为我做错了什么，可以帮忙吗？我在这里看到了一个类似的代码，刚刚进行了调整。谢谢你。

```
$(document).ready(function(){
    $(document).scrollTop() >= 2500) {
            var bar = $('.bar');
            var p = $('.percents');
            var interval;
            var start = 0; // start animation at 0%
            var end = parseInt(92); // stop progress bar on 78% just for demo
            var current = start;

            var countUp = function() {
                // increment by one during each function call
                current++;
                bar.css('width', current+'%');
                // update percents in html
                p.html(current + "%");
                // stop interval if we reached our goal (78%)
                if (current === end) {
                    clearInterval(interval);
                }
            };

            // change progress bar every 1000 / (78+1) milliseconds
            interval = setInterval(countUp, (2500 / (end + 1)));
    };                
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:06:49.977

您遇到的问题是什么？

如所写，代码的第二行将生成语法错误。你可能想要这样的东西：

```
if ($(document).scrollTop() >= 2500) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:30:04.187

我认为您应该在滚动事件回调中执行此操作，因为目前，您的内容在文档刚刚加载后执行一次，并且滚动为 0 ...

```
$(document).ready(function() {
    var $scroll = $('#scroll'),
        isLoading = false;
    $(document).on('scroll', function (e) {
        $scroll.text($(document).scrollTop());
        if ($(document).scrollTop() >= 2500) {
            if (!isLoading) {
                isLoading = true;
                $scroll.addClass('blue');
                var bar = $('.bar');
                var p = $('.percents');
                var interval;
                var start = 0; // start animation at 0%
                var end = parseInt(92); // stop progress bar on 78% just for demo
                var current = start;

                var countUp = function() {
                    // increment by one during each function call
                    current++;
                    bar.css('width', current+'%');
                    // update percents in html
                    p.html(current + "%");
                    // stop interval if we reached our goal (78%)
                    if (current === end) {
                        clearInterval(interval);
                        // isLoading = false; // uncomment if you want to load something again !
                    }
                };

                // change progress bar every 1000 / (78+1) milliseconds
                interval = setInterval(countUp, (2500 / (end + 1)));
            }
        } else {
            $scroll.removeClass('blue');  
        };
    });
}); 
```

[你可以在这里看到一个 JSFiddle](http://jsfiddle.net/NmGhe/1/ "你可以在这里看到一个 JSFiddle")

# php - 访问根以外的文件的方法

> ID：16015863
> 
> 赞同：3
> 
> 时间：2013-04-15T13:03:00.173
> 
> 标签：php, file, directory, directory-structure

大家好 :D 我的文件结构如下：

```
/site
  /public_html
    /1
      /2
        /3
          read.php
  /file
    file.doc 
```

出于安全原因，我将我的文档移到 public_html 文件夹之外。在 read.php 中，我通过代码访问 file.doc`"../../../../file/file.doc"` 是否有其他方法（快捷方式？）来访问该文档？我从很多地方调用了很多文件。`../`这段代码太长，很容易忘记我需要多少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:09:57.750

如果您的虚拟主机植根于您可以使用;`/site/public_html`将其缩短一点。`$_SERVER['DOCUMENT_ROOT']`这应该以相同的方式适用于文档根目录下的所有脚本。

```
$file = $_SERVER['DOCUMENT_ROOT']. '/../file/file.doc'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:08:27.750

您可以设置一个`ROOT`指向根的常量：

```
# on read.php
define('ROOT', dirname(dirname(dirname(dirname(dirname(__FILE__))))).DIRECTORY_SEPARATOR; 
```

然后只需调用：

```
# anywhere else
include ROOT.'file/file.doc'; 
```

# python - Python - ValueError：操作数无法与形状一起广播

> ID：16015864
> 
> 赞同：3
> 
> 时间：2013-04-15T13:03:03.503
> 
> 标签：python, arrays, matrix, numpy, face-recognition

我正在尝试使用 python 通过主成分分析 (PCA) 实现人脸识别。步骤之一是`T`通过减去平均人脸向量来归一化输入（测试）图像`m`：`n = T - m`。

这是我的代码：

```
#Step1: put database images into a 2D array
filenames = glob.glob('C:\\Users\\Karim\\Downloads\\att_faces\\New folder/*.pgm')
filenames.sort()
img = [Image.open(fn).convert('L').resize((90, 90)) for fn in filenames]
images = np.asarray([np.array(im).flatten() for im in img])

#Step 2: find the mean image and the mean-shifted input images
m = images.mean(axis=0)
shifted_images = images - m

#Step 7: input image
input_image = Image.open('C:\\Users\\Karim\\Downloads\\att_faces\\1.pgm').convert('L').resize((90, 90))
T = np.asarray(input_image)
n = T - mean_image 
```

但我收到一个错误`Traceback (most recent call last): File "C:/Users/Karim/Desktop/Bachelor 2/New folder/new3.py", line 46, in <module> n = T - m ValueError: operands could not be broadcast together with shapes (90,90) (8100)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:21:41.173

`mean_image`为扁平数组计算：

```
images = np.asarray([np.array(im).flatten() for im in img])
mean_image = images.mean(axis=0) 
```

并且`input_image`是 90x90。因此错误。您也应该展平输入图像，或者不展平原始图像（我不太明白为什么要这样做），或者`mean_image`仅针对此操作将大小调整为 90x90。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T13:41:42.353

正如@Lev 所说，你已经扁平化了你的数组。您实际上不需要这样做来执行平均值。假设您有一组 2 个 3x4 图像，那么您将拥有如下内容：

```
In [291]: b = np.random.rand(2,3,4)

In [292]: b.shape
Out[292]: (2, 3, 4)

In [293]: b
Out[293]: 
array([[[ 0.18827554,  0.11340471,  0.45185287,  0.47889188],
        [ 0.35961448,  0.38316556,  0.73464482,  0.37597429],
        [ 0.81647845,  0.28128797,  0.33138755,  0.55403119]],

       [[ 0.92025024,  0.55916671,  0.23892798,  0.59253267],
        [ 0.15664109,  0.12457157,  0.28139198,  0.31634361],
        [ 0.33420446,  0.27599807,  0.40336601,  0.67738928]]]) 
```

在第一个轴上执行平均值，保留数组的形状：

```
In [300]: b.mean(0)
Out[300]: 
array([[ 0.55426289,  0.33628571,  0.34539042,  0.53571227],
       [ 0.25812778,  0.25386857,  0.5080184 ,  0.34615895],
       [ 0.57534146,  0.27864302,  0.36737678,  0.61571023]])

In [301]: b - b.mean(0)
Out[301]: 
array([[[-0.36598735, -0.222881  ,  0.10646245, -0.0568204 ],
        [ 0.10148669,  0.129297  ,  0.22662642,  0.02981534],
        [ 0.24113699,  0.00264495, -0.03598923, -0.06167904]],

       [[ 0.36598735,  0.222881  , -0.10646245,  0.0568204 ],
        [-0.10148669, -0.129297  , -0.22662642, -0.02981534],
        [-0.24113699, -0.00264495,  0.03598923,  0.06167904]]]) 
```

对于许多用途，这也比将图像保存为数组列表要快，因为 numpy 操作是在一个数组上完成的，而不是通过数组列表完成的。大多数方法，如`mean`,等都`cov`接受`axis`参数，您可以列出所有维度来执行它而无需展平。

要将其应用于您的脚本，我会做这样的事情，保持原始维度：

```
images = np.asarray([Image.open(fn).convert('L').resize((90, 90)) for fn in filenames])
# so images.shape = (len(filenames), 90, 90)

m = images.mean(0)
# numpy broadcasting will automatically subract the (90, 90) mean image from each of the `images`
# m.shape = (90, 90)
# shifted_images.shape = images.shape = (len(filenames), 90, 90)
shifted_images = images - m 

#Step 7: input image
input_image = Image.open(...).convert('L').resize((90, 90))
T = np.asarray(input_image)
n = T - m 
```

作为最后的评论，如果速度是一个问题，使用 np.dstack 加入图像会更快：

```
In [354]: timeit b = np.asarray([np.empty((50,100)) for i in xrange(1000)])
1 loops, best of 3: 824 ms per loop

In [355]: timeit b = np.dstack([np.empty((50,100)) for i in xrange(1000)]).transpose(2,0,1)
10 loops, best of 3: 118 ms per loop 
```

但加载图像可能需要大部分时间，如果是这种情况，您可以忽略这一点。

# twitter-bootstrap - Twitter Bootstrap：让轮播图像全宽和全高

> ID：16015869
> 
> 赞同：19
> 
> 时间：2013-04-15T13:03:11.977
> 
> 标签：twitter-bootstrap, carousel

[这似乎是一个微不足道的问题，但是在他们的示例（ http://twitter.github.io/bootstrap/examples/carousel.html](http://twitter.github.io/bootstrap/examples/carousel.html) ）中摆弄了几个小时后，我求助于 SO 寻求帮助。

我希望轮播显示全宽（就像现在一样），但不是裁剪高度。我尝试在不同的容器中将最小高度、高度等设置为 100%，但没有结果。有两分钱吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-09-04T16:24:52.363

对于 Bootstrap 3，您只需要：

```
.carousel img {
    min-width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-08T11:06:47.260

从引导站点上的示例轮播中，如果您调整浏览器窗口的大小，您会看到图像实际上是在 x 轴上拉伸的。为了达到同样的效果，使用他们的 CSS：

```
.carousel img {
  position: absolute;
  top: 0;
  left: 0;
  min-width: 100%;
  height: 500px;
} 
```

最后两个属性 min-width 和 height 很重要。高度设置为旋转木马的所需大小。

最后，您需要使用 img 标签来放置图像，而不是背景图像。这是一个更完整的例子：

```
<div class="item">
    <img src="image.jpg" />
    <div class="container">
        <div class="carousel-caption">
            <h1>Header</h1>
            <p class="lead">This is a caption</p>
            <a class="btn btn-large btn-primary" href="#">Large Button</a>
        </div>
    </div>
</div> 
```

我希望这有帮助。干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-10T04:57:00.880

认为我有一个简单的 CSS 更改的解决方案？只需将以下内容从 (OLD) 更改为；

```
 .carousel {
  /*height: 500px; OLD*/
  /*margin-bottom: 60px; OLD*/

  /*max-width:1200px; THIS IS OPTIONAL (ANY SIZE YOU LIKE)*/
  margin:0 auto 60px;
}

.carousel .item {
    /*height: 500px; OLD*/
    /*background-color: #777; OLD*/

    width:100%;
    height:auto;
}
.carousel-inner > .item > img {
  /*position: absolute; OLD+WHY?*/
  /*top: 0; OLD+WHY?*/
  /*left: 0; OLD+WHY?*/

  min-width:100%;
  height:auto;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-06T20:09:45.083

对要在幻灯片中插入的每个图像使用以下内容：

```
<img class="img-responsive center-block" src="#"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-28T11:20:25.323

虽然这可以追溯到 3 年前，但在使用 Bootstrap 3.3.7 时，'Nate Beers' 给出的解决方案解决了我的问题

这是因为'max-width'设置了元素的最大宽度，当宽度大于最大宽度时，它会覆盖宽度属性。

此外，“最小宽度”总是覆盖“最大宽度”。

这是codepen 中**[的一个示例](http://codepen.io/skay/pen/Vpvjjz)**，调整预览窗口的大小以查看它是如何工作的。

通过将大小调整到可能的最小宽度并与其他 2 个元素 i1 和 i2 进行比较，特别检查以下元素。

```
<div class="i3">Sample</div> 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-11-16T02:44:58.633

您可以简单地将他们的 css 更改为此，但它会导致您的图像裁剪不适合的内容：

```
.carousel-inner > .item > img {
   position: absolute;
   top: 0;
   left: 0;
   min-width: 100%;
   min-height: 500px; /* <--- Change this line to min-height */
 } 
```

# sql - 在 sql 级别添加约束以复制列

> ID：16015870
> 
> 赞同：0
> 
> 时间：2013-04-15T13:03:16.833
> 
> 标签：sql, oracle, jdbc, plsql

我有一个表来存储参数名称

```
CREATE TABLE PARAM_NAMES
{

PARAM_TYPE_ID" NUMBER(*,0) NOT NULL ENABLE, 
"PARAM_NAME" VARCHAR2(64 BYTE) NOT NULL ENABLE, 

"DEFAULT_VALUE" VARCHAR2(256 BYTE), 

 CONSTRAINT "PARAMS_UK1" UNIQUE ("PARAM_TYPE_ID")
//PARAM_TYPE ID is the primary key
} 
```

我有其他表来存储参数值，

```
CREATE TABLE PARAM_VALUES" 
   {    "ID"  NUMBER(*,0) NOT NULL ENABLE, 
    "PARAM_TYPE_ID" NUMBER(*,0) NOT NULL ENABLE, 
    "PARAM_VALUE" VARCHAR2(256 BYTE), 

     CONSTRAINT "PARAM_VALUES_PK" PRIMARY KEY ("ID", "PARAM_TYPE_ID")
} 
```

对于带有参数 ID 的特定参数名称，我使用 ParamId 将参数值存储在另一个表中。

现在我正在使用 JDBC 来获取和设置表的值。现在我想做这样的事情。

从 JDBC 插入参数值时，如果参数值为 null 或为空，即如果有人从 JDBC 插入 null 值或空值，我想将默认值从 PARAM_NAMES 表复制到 PARAM_VALUES 表 PARAM_VALUE 列。我可以在 sql 级别做的任何事情或约束级别？我知道我可以在插入之前在java中做检查是否为null，如果不复制默认值但想知道sql级别的任何内容。

```
PARAM_TYPE_ID   PARAM_NAME           DEFAULT_VALUE
1                  ABC                 TEST1
2                  CDE                 TEST2
3                  FGH                 TEST3

PARAM_TYPE_ID     PARAM_VALUE
1                   TEST4       //Since not null
2                    TEST2      //since null default value is copied
3                   TEST3         //since null default value is copied 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:12:18.267

你可以这样做：

```
create table abc (
field1 varchar(10) default 'fred' 
```

但是，我会使用我的应用程序代码来执行诸如将空字符串强制为默认值之类的事情。对于字符字段，您最终可能会存储空字符串，而对于数字字段，您可能最终会抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:11:23.993

你不能用触发器做到这一点吗？这将允许您执行您的业务规则，而不管插入数据的过程如何。这还将处理更新以及在 param_names 表中找不到 param_type_id 的情况。

```
create or replace trigger trg_param_values 
before insert or update on param_values 
for each row
begin
  select default_value into :new.param_value
  from param_names
  where param_names.param_type_id = :new.param_type_id
  ;
exception
when others then
  :new.param_value := 'SOME_DEFAULT_VALUE'; 
end
; 
```

# javascript - 在 Chrome 打包应用程序和 Chrome 扩展程序之间进行通信？

> ID：16015874
> 
> 赞同：26
> 
> 时间：2013-04-15T13:03:33.347
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-app

我需要结合仅在 Chrome 打包应用程序中可用的功能（访问 syncFileSystem）和仅在 Chrome 扩展程序中可用的功能（将脚本注入第 3 方网站）。

似乎一个打包的应用程序和一个扩展都不能同时实现这两个目标，所以我现在正在考虑尝试通过单独的打包应用程序和扩展通信来实现我所追求的目标。

我看到[Chrome 的文档](https://developer.chrome.com/extensions/messaging.html)解释了两个*扩展*如何通过`chrome.runtime.onMessageExternal.addListener`和进行通信`chrome.runtime.sendMessage`，但没有关于打包应用程序和扩展通信的内容。

> 有谁知道这是否允许？是否有任何文档或工作示例？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-15T15:52:15.527

是的，这是可能的。您链接的文档中的代码示例适用于应用程序和扩展程序的任何组合。

的扩展文档[`chrome.runtime.sendMessage`](https://developer.chrome.com/extensions/runtime.html#method-sendMessage)说：

> **向扩展（或另一个扩展/应用程序**`onMessage`）内的事件侦听器发送一条消息。

 **消息传递在扩展程序和应用程序中的工作方式相同，并且它们似乎完全兼容；只需使用目标扩展程序或应用程序的 ID。如果您查看 的[应用程序版本`chrome.runtime.sendMessage`](https://developer.chrome.com/apps/runtime.html#event-onMessage)的文档，您会发现它与扩展版本相同。**

# html - HTML5 字符集 = utf-8

> ID：16015879
> 
> 赞同：1
> 
> 时间：2013-04-15T13:03:46.177
> 
> 标签：html, entities

我对 HTML5 的理解是

```
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /> 
```

在文档标题中，唯一需要转换为实体的字符是 > < & ' 和 "。

1.  这个对吗？
2.  在一些基本的测试中，在 Chrome 中，我发现我可以坚持 - 例如 - 文字 < 并摆脱它。这只是不好的做法还是实体规则有更多细微差别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:20:06.547

The chars `< > &` are special. They are required to be escaped, so the parser isn't confused and you are able to display them. That's independent of the charset.

Older charsets are not able to display things like `ä ö ü ß`, so you have to escape them. In UTF-8 you don't need to use the entities, because the encoding supports them native and they don't confuse with XML syntax.

`' "` are also special but only in attributes, where you want to ensure that a double quotation *can* be inside of a double quote notated attribute (the like with a single quote char inside of single quotes attribute).
It's like other languages where you can exchange to notation, for example `'"'` and `"'"`. Now if you are building the value from a database, you don't have to swap quotes around, you can simply escape them using entities.

# php - 对列表中的数据进行排序

> ID：16015889
> 
> 赞同：1
> 
> 时间：2013-04-15T13:04:10.430
> 
> 标签：php, mysql

我正在尝试对从 mysql 生成的表中的列数据进行排序。这就是我希望我的桌子的样子：-

```
<th><a href='view.php?sort=first_name'>First Name</th>
<th><a href='view.php?sort=last_name'>Last Name</th> 
```

这是我的查询，但出现错误

> 解析错误：语法错误，C 中的意外 'if' (T_IF)

```
 $result = mysql_query("SELECT * FROM users")
    if($_GET['sort'] == 'first_name'){
     $result .= "ORDER BY first_name";
    }
   else if ($_GET['sort'] == 'last_name'){
     $result .= "ORDER BY last_name";
    }
    or die(mysql_error()); 
```

我知道我的问题出在查询中，但我该如何纠正呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:07:49.007

你在这里错过了一个分号和一个空格：

```
$result = mysql_query("SELECT * FROM users ");
                                          ^  ^ 
```

这`Parse error`是由于缺少分号，另一个错误将在稍后出现:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:07:11.717

**ORDER BY 关键字前面需要一个空格，并且有一些不正确的终止。现在试试。**

```
 $result = "SELECT * FROM users";
    if($_GET['sort'] == 'first_name'){
     $result .= " ORDER BY first_name";
    }
   else if($_GET['sort'] == 'last_name'){
     $result .= " ORDER BY last_name";
    }
$result = mysql_query($result) or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:05:14.900

您需要在列名和`ORDER BY`子句之间留出额外的空格。

```
$result .= " ORDER BY first_name";
            ^ add extra space here 
```

还

```
$result .= " ORDER BY last_name";
            ^ add extra space here 
```

完整片段：

 ~~~~```
$query = "SELECT * FROM users";
if($_GET['sort'] == 'first_name')
{
    $query .= " ORDER BY first_name";
}
else if ($_GET['sort'] == 'last_name')
{
    $query .= " ORDER BY last_name";
}
$result = mysql_query($query) or die(mysql_error()); 
```~~  ~~或者为什么不直接这样做，

```
$sortColumn = $_GET['sort'];
$query = "SELECT * FROM users ORDER BY $sortColumn";
$result = mysql_query($query) or die(mysql_error()); 
```~~~~

# c# - Caliburn 只允许 ViewModel 的一个窗口

> ID：16015895
> 
> 赞同：0
> 
> 时间：2013-04-15T13:04:32.900
> 
> 标签：c#, wpf, caliburn

我有一个 ViewModel，它是从我的 MainViewModel 启动的。不幸的是，这个窗口只有一个实例有用。理想情况下，再次单击按钮应该只是响应窗口。

我在 ViewModel 上看到了对 Caliburn 属性“IsActive”的引用，但我的 Caliburn.Micro 项目不包含此属性。

是否有捷径可寻？

编辑：

```
public void BtnShowLog()
{
   this.windowManager.ShowWindow(new LogViewModel(this.windowManager));
} 
```

此按钮显示我的 LogViewModel。基本上：如果有 LogViewmodel 的实例，它应该中止。

# php - 按下提交按钮时显示图像

> ID：16015906
> 
> 赞同：0
> 
> 时间：2013-04-15T13:04:56.727
> 
> 标签：php, javascript, jquery

我有一个为我创建的多页表单。表单上的所有页面都有将数据保存到数据库的提交按钮、转到上一页的上一个按钮和一个下一个按钮。按下保存按钮 (id="save") 时如何显示图像？现在，当按下任一按钮时，图像就会弹出。我是一个 jQuery 菜鸟，所以非常感谢任何帮助。谢谢！

jQuery

```
<script>
jQuery(document).ready(function($) {
  $('form').submit(function (e) {
   var form = this;
   e.preventDefault();
   setTimeout(function () {
    form.submit();
  }, 5000); // in milliseconds

  $("<img src='/wp-content/uploads/2013/04/saving.gif'>").appendTo("#target");
   });
});
</script> 
```

PHP的

```
<div id="target"></div>
<input type="submit" name="status" value="Prev" />
<input type="submit" name="status" id="save" value="Save" />
<input type="submit" name="status" value="Next" />

<?php

if(!empty($_REQUEST['status']) && $_REQUEST['status'] == 'Prev'){
  //save data and redirect to previous page using header();
}

if(!empty($_REQUEST['status']) && $_REQUEST['status'] == 'Next'){
  //save data and redirect to next page using header();
}

if(!empty($_REQUEST['status']) && $_REQUEST['status'] == 'Save'){
  //save data and do whatever you want
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:19:29.880

In your code all buttons have the type submit, hence it causes the form to submit irrespective of the button you click.

make `type="submit"` only to that button for which you want to submit the form and show the image.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:51:58.747

要使图像仅显示在 Save 按钮上，只需将事件绑定到该按钮，而不是表单的`submit`事件。

## [jsFiddle](http://jsfiddle.net/aABNH/2/)

```
$('#save').click(function(e) {
    e.preventDefault();
    var form = $(this).closest('form');

    setTimeout(function () {
        form.submit();
    }, 5000); // in milliseconds

    $("<img src='/wp-content/uploads/2013/04/saving.gif'>").appendTo("#target");
}); 
```

这样，在提交 prev 和 next 按钮的表单时不会有延迟，并且图像和延迟只会在 Save 按钮中显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:39:27.547

演示：http: [//jsfiddle.net/esMn2/1/](http://jsfiddle.net/esMn2/1/)

这是一个快速模型的工作演示，不使用 jQuery，但让您了解如何完成它。

```
prev = document.getElementById('prev');
save = document.getElementById('save');
next = document.getElementById('next');
form = document.getElementById('form');

prev.addEventListener('mousedown', function(e) {
    e.preventDefault();
    alert('Did nothing');
});

save.addEventListener('mousedown', function(e) {
    e.preventDefault();
    showLoading();
});

next.addEventListener('mousedown', function(e) {
    e.preventDefault();
    alert('Did Nothing');
});

function showLoading() {
    var load = document.createElement('img');
    load.src = "http://www.henley-putnam.edu/Portals/_default/Skins/henley/images/loading.gif";

    document.getElementById('target').appendChild(load);

    setTimeout(function() {
        form.submit();
    }, 5000);
} 
```

使用 jQuery 虽然你会支持 IE<9，因为他们知道使用 attachEvent 而不是 addEventListener

# javascript - window.showModalDialog 在按钮单击时打开新窗口

> ID：16015909
> 
> 赞同：1
> 
> 时间：2013-04-15T13:05:04.330
> 
> 标签：javascript

我使用 javascript 创建了一个弹出窗口`window.showModalDialog`，该页面有一个按钮，但问题是当我单击该按钮时，它会打开一个新窗口，它与我的弹出窗口相同。

我在互联网上搜索并找到解决方案，但解决方案不起作用

```
<head>
    <base target="_self" />
</head> 
```

我正在使用打开窗口

```
window.showModalDialog(url, '', 'unadorned:yes;resizable:1;dialogHeight:550px;dialogwidth:985px;scroll:yes;status=yes,scrollbars:yes,resizable:yes,location:yes'); 
```

和页面包含一个按钮，单击按钮时它会在控制器中执行一些操作，并在执行操作后执行代码

```
 requestDetails.MessageText = "Request has been saved successfully.";

  if (requestDetails.isCloneRequest)
      return Content("<script> alert('" + requestDetails.MessageText + "');  window.close();  </script>");
  else
      return Content("<script> alert('" + requestDetails.MessageText + "'); var url = ''; var currentUrl  = location.href;  currentUrl = currentUrl.toLowerCase(); window.location.href = currentUrl+'" + url + "' ;  </script>"); 
```

打开带有上述 URL 的另一个窗口。我想以相同的方式打开该 URL `showModalDialog`。任何解决方案将不胜感激。

# ios - 如何从常规 UIFont 创建粗体 UIFont？

> ID：16015916
> 
> 赞同：36
> 
> 时间：2013-04-15T13:05:16.313
> 
> 标签：ios, ios5, uikit

如果我有一个`UIFont`对象，是否可以将其转换为粗体？我不知道字体名称，我只有一个 UIFont 对象。我想要的是一个类似的功能

```
UIFont *boldFontFromFont(UIFont *input)
{
    return [input derivedFontWithFontWeight:UIFontWeightBold];
} 
```

如何更改代码以使其正常工作。（上面的代码不起作用，我只是为了说明这一点而编造的。）

提前致谢。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2014-01-26T16:44:40.080

iOS 7 引入了一个新的[UIFontDescriptor](https://developer.apple.com/library/ios/documentation/uikit/reference/UIFontDescriptor_Class/Reference/Reference.html "UIFontDescriptor")类，这使它变得更容易：

```
UIFont *font = [UIFont fontWithName:@"Helvetica Neue" size:12];
NSLog(@"plain font: %@", font.fontName); // “HelveticaNeue”

UIFont *boldFont = [UIFont fontWithDescriptor:[[font fontDescriptor] fontDescriptorWithSymbolicTraits:UIFontDescriptorTraitBold] size:font.pointSize];
NSLog(@"bold version: %@", boldFont.fontName); // “HelveticaNeue-Bold”

UIFont *italicFont = [UIFont fontWithDescriptor:[[font fontDescriptor] fontDescriptorWithSymbolicTraits:UIFontDescriptorTraitItalic] size:font.pointSize];
NSLog(@"italic version: %@", italicFont.fontName); // “HelveticaNeue-Italic”

UIFont *boldItalicFont = [UIFont fontWithDescriptor:[[font fontDescriptor] fontDescriptorWithSymbolicTraits:UIFontDescriptorTraitBold | UIFontDescriptorTraitItalic] size:font.pointSize];
NSLog(@"bold & italic version: %@", boldItalicFont.fontName); // “HelveticaNeue-BoldItalic” 
```

对于来这里寻找 Cocoa (macOS) 等价物的人来说，`UIFontDescriptor`来自`NSFontDescriptor`，自 10.3 起可用。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-11-20T04:59:59.357

如果您正在寻找**快速实施**：

```
let normalFont = UIFont(name: "FONT_NAME", size: CGFloat(20))!
let boldFont = UIFont(descriptor: normalFont.fontDescriptor.withSymbolicTraits(.traitBold)!, size: normalFont.pointSize) 
```

希望这可以帮助！干杯!

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-15T13:23:45.440

要获得粗体字体，您需要从字体系列中传递特定的字体名称。您可以从给定字体中获取字体系列名称，然后列出该系列中的所有字体。通常，粗体字体的名称中会包含“粗体”，但格式并不严格，并且可能存在诸如“Helvetica-BoldOblique”之类的变体。您可以从以下代码开始：

```
- (UIFont *)boldFontFromFont:(UIFont *)font
{
    NSString *familyName = [font familyName];
    NSArray *fontNames = [UIFont fontNamesForFamilyName:familyName];
    for (NSString *fontName in fontNames)
    {
        if ([fontName rangeOfString:@"bold" options:NSCaseInsensitiveSearch].location != NSNotFound)
        {
            UIFont *boldFont = [UIFont fontWithName:fontName size:font.pointSize];
            return boldFont;
        }
    }
    return nil;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-04-19T00:46:23.423

这是一个非常古老的线程，但现在有人可能对如何在 Swift 5 中执行此操作感兴趣。

像这样简单：

```
var font: UIFont = UIFont.systemFont(ofSize: 18)
if let newDescriptor = font.fontDescriptor.withSymbolicTraits(.traitBold) {
    font = UIFont(descriptor: newDescriptor, size: font.pointSize)
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-02-10T06:45:47.787

由于系统字体的神秘字体系列名称，尝试使用字体或系列名称派生粗体/斜体字体自 iOS 7 以来不再正常工作。下面是一个使用 UIFontDescriptor 类派生粗体/斜体字体的简单扩展。

```
+(UIFont *) font:(UIFont *)font bold:(BOOL)bold italic:(BOOL)italic
{
    NSUInteger traits = 0;
    if (bold)
    {
        traits |= UIFontDescriptorTraitBold;
    }
    if (italic)
    {
        traits |= UIFontDescriptorTraitItalic;
    }
    return [UIFont fontWithDescriptor:[[font fontDescriptor] fontDescriptorWithSymbolicTraits:traits] size:font.pointSize];
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-15T13:25:15.867

您可以使用

```
[UIFont boldSystemFontOfSize:12]. 
```

如果您使用自定义字体，则必须直接使用名称

```
[UIFont fontWithName:@"Helvetica-Bold" size:17.0]. 
```

您可以查找可能的字体名称

```
[UIFont fontNamesForFamilyName:@"American Typewriter"]. 
```

在这篇文章中：[https](https://stackoverflow.com/a/15388946/436818) ://stackoverflow.com/a/15388946/436818 Ben M 知道如何动态获取粗体版本。但是扩展该方法以确保获得粗体版本（如果存在），因为还有其他粗体版本，例如 CondensedBold。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-23T18:17:26.473

**由于在Swift**中搜索粗体 UIFonts 时会弹出此问题，因此这里有一个新答案：

```
extension UIFont {
    /// Returns a new font in the same family with the given symbolic traits,
    /// or `nil` if none found in the system.
    func withSymbolicTraits(_ traits: UIFontDescriptor.SymbolicTraits) -> UIFont? {
        guard let descriptorWithTraits = fontDescriptor.withSymbolicTraits(traits)
            else { return nil }
        return UIFont(descriptor: descriptorWithTraits, size: 0)
    }
} 
```

例子：

```
myFont.withSymbolicTraits(.taitBold) // returns the bold version of myFont 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-01T15:02:15.577

没有人发布解决方案：

*   适用于斯威夫特
*   是一个扩展`UIFont`
*   不强制展开
*   使用与源字体相同的磅值
*   `UIFont`并且只做问题中提出的问题（根据现有创建粗体`UIFont`）

所以我正在这样做：

```
import UIKit

extension UIFont {
    func boldFont() -> UIFont? {
        guard let boldDescriptor = fontDescriptor.withSymbolicTraits(.traitBold) else {
            return nil
        }

        return UIFont(descriptor: boldDescriptor, size: pointSize)
    }
} 
```

随意复制粘贴！

# android - 如何在片段中使用 mapfragment

> ID：16015918
> 
> 赞同：2
> 
> 时间：2013-04-15T13:05:25.513
> 
> 标签：android, fragment, google-maps-android-api-2, mapfragment

主要是我有一个带有下拉菜单的 FragmentActivity，一旦你从该菜单中选择一个项目，它就会使我的私有类扩展 Fragment 以显示地图上的其他东西它自己现在的问题是，当我在控制地图的片段类：

```
GoogleMap map = ((MapFragment)getFragmentManager.findFragmentById(R.id.map)).getMap() 
```

它说你不能将片段转换为 MapFragment 所以我试图为类扩展 MapFragment 但是当我在下拉菜单中选择一个项目时，我会执行这部分代码：

```
Fragment fragment = new MyFragmentClass()();
Bundle args = new Bundle();
args.putInt(PlacesFinder.ARG_SECTION_NUMBER, position + 1);
fragment.setArguments(args);
getSupportFragmentManager().beginTransaction().replace(R.id.container, fragment).commit(); 
```

我只能使用片段，所以如果我无法在片段类中找到它并且由于下拉菜单而无法扩展 mapfragment，我该如何使用片段中的谷歌地图？

谢谢抬头:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T19:18:20.440

您应该使用 getSupportFragmentManager()。

```
map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

当您使用 FragmentActivity 时，这应该可以工作。尽管我正在使用 Fragment 并且不会这样做，但我也面临同样的问题:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:06:05.437

抱歉耽搁了，但这是主要活动：

```
public class MainActivity extends FragmentActivity implements
    ActionBar.OnNavigationListener , LocationListener{
    private String [] types;
    private ActionBar actionBar;

    public static GoogleMap map = null;
    public static boolean googlePlayOn = false;
    private static final String STATE_SELECTED_NAVIGATION_ITEM = "selected_navigation_item";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        types = getResources().getStringArray(R.array.values);
        googlePlayOn = isGooglePlay();
        actionBar = getActionBar();
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

        // Set up the dropdown list navigation in the action bar.
        actionBar.setListNavigationCallbacks(
        // Specify a SpinnerAdapter to populate the dropdown list.
                new ArrayAdapter<String>(getActionBarThemedContextCompat(),android.R.layout.simple_list_item_1,android.R.id.text1, types), this);
    }

    /**
     * This function checks in the phone operating system that 
     * the phone got google play services
     * @return
     */
    private boolean isGooglePlay()
    {
        int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
        if(status == ConnectionResult.SUCCESS)
            return true;
        else
            ((Dialog) GooglePlayServicesUtil.getErrorDialog(status, this, 10)).show();
        return false;
    }

    @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
    private Context getActionBarThemedContextCompat() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            return getActionBar().getThemedContext();
        } else {
            return this;
        }
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        // Restore the previously serialized current dropdown position.
        if (savedInstanceState.containsKey(STATE_SELECTED_NAVIGATION_ITEM)) {
            getActionBar().setSelectedNavigationItem(
                    savedInstanceState.getInt(STATE_SELECTED_NAVIGATION_ITEM));
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        // Serialize the current dropdown position.
        outState.putInt(STATE_SELECTED_NAVIGATION_ITEM, getActionBar()
                .getSelectedNavigationIndex());
    }

    @Override
    public boolean onNavigationItemSelected(int position, long id) {
        // When the given dropdown item is selected, show its contents in the
        // container view.
        if(position != PlacesFinder.currentTitle)
        {
            if(!PlacesFinder.created)
            {
                PlacesFinder.created = true;
                Bundle b = new Bundle();
                b.putInt(PlacesFinder.ARG_SECTION_NUMBER, position);
                Fragment fragment = new PlacesFinder();
                fragment.setArguments(b);
                getSupportFragmentManager().beginTransaction().replace(R.id.container, fragment).commit();
            }
            PlacesFinder.newTitleBeenChosenHandler.sendEmptyMessage(0);
        }
        return true;
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class PlacesFinder extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static boolean created = false;
        public static final String ARG_SECTION_NUMBER = "section_number";
        public static Handler newTitleBeenChosenHandler;
        public static int currentTitle = 0;
        private Context context;
        public PlacesFinder() {
            this.context = getActivity();
            loadMapFragment();
        }
        private void loadMapFragment()
        {
            if(googlePlayOn)
            {
                if(map == null)
                    map = ((SupportMapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();

            }
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            return inflater.inflate(R.layout.places_fragment, container , false);
        }

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub

    }

}

This is the main xml file :
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    tools:ignore="MergeRootFrame" /> 
```

这是地图片段文件：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:name="com.google.android.gms.maps.MapFragment"/> 
```

一旦我做了这行代码 map = ((SupportMapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();

应用程序失败，它说我有一个空指针，我不知道为什么......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:00:11.513

您可以`GoogleMap`在片段中使用 a 。仅查看在 XML 中创建片段的代码部分就会出现错误。假设这个片段是你的 XML 布局中唯一的元素，它应该是这样读取的：

```
<fragment xmlns:android="schemas.android.com/apk/res/android" 
    android:id="@+id/map" 
    android:layout_width="match_parent"      
    android:layout_height="match_parent"  
    class="com.google.android.gms.maps.MapFragment"/> 
```

你的 XML 的最后一行，你有 android:name 是错误的。您在活动中添加地图的代码应该可以工作

```
GoogleMap map = ((MapFragment)getFragmentManager.findFragmentById(R.id.map)).getMap(); 
```

我在下面使用过这段代码之前没有问题

```
mapFrag = ((SupportMapFragment) getFragmenManager().findFragmenById(R.id.map)).getMap(); 
```

唯一的区别是（1）我使用的是`SupportMapFragment`; (2) 我宣布我的`GoogleMap`外部`onCreate`。

这听起来是基于您所描述的片段无法转换为正确的类，这是片段 XML 中的错误或您没有使用正确的导入的问题。如果您正在使用，`MapFragment`那么您需要确保您正在使用`MapFragment`导入（不是`SupportMapFragment`或只是`Fragment`）。

至于你的代码的最后一部分，我不确定与下拉菜单的关系是什么。看起来您正在将参数传递给片段？如果您可以提供更多详细信息，我也会对此发表评论。

# ios - 从 NSMutableArray 中删除对象？

> ID：16015927
> 
> 赞同：5
> 
> 时间：2013-04-15T13:05:48.893
> 
> 标签：ios, objective-c, search, nsstring, nsmutablearray

`ViewDidLoad`我在方法中有一个包含以下元素的数组

```
inputArray = [NSMutableArray arrayWithObjects:@"car", @"bus", @"helicopter", @"cruiz", @"bike", @"jeep", nil]; 
```

我有另一个`UITextField`用于搜索元素。所以一旦我输入一些东西，`UITextField`我想检查该字符串是否存在于“inputArray”中。如果它与 inputArray 中的元素不匹配，则从 inputArray 中删除相应的元素。

```
 for (NSString* item in inputArray)
   {
        if ([item rangeOfString:s].location == NSNotFound) 
        {
            [inputArray removeObjectIdenticalTo:item];//--> Shows Exception
            NSLog(@"Contains :%@",containsAnother);
        }

  } 
```

但此代码显示异常，与“removeobject:”有关

**例外 ：**

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSCFConstantString rangeOfString:options:range:locale:]: nil argument'
*** First throw call stack:
` 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T13:11:14.543

在快速枚举中，您**不能**修改集合。

枚举器对象变得恒定且不可变。

如果你想对阵列进行更新

你应该喜欢这样：

```
NSMutableArray *inputArray = [NSMutableArray arrayWithObjects:@"car", @"bus", @"helicopter", @"cruiz", @"bike", @"jeep", nil];
NSString *s=@"bus";

for (int i=inputArray.count-1; i>-1; i--) {
    NSString *item = [inputArray objectAtIndex:i];
    if ([item rangeOfString:s].location == NSNotFound) {
        [inputArray removeObject:item];
    }
} 
```

编辑：

上面的工作与此类似：

```
NSArray *array=[inputArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF CONTAINS[c] %@",s]]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-15T13:14:33.770

您可以使用以下代码

```
for (int i=0;i<[inputArray count]; i++) {
        NSString *item = [inputArray objectAtIndex:i];
        if ([item rangeOfString:s].location == NSNotFound) {
            [inputArray removeObject:item];
            i--;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:07:07.927

那需要是一个`NSMutableArray`. 您不能修改`NSArray`曾经创建的内容（除非重新开始）。

改变这个：

```
inputArray = [NSArray arrayWithObjects:@"car", @"bus", @"helicopter", @"cruiz", @"bike", @"jeep", nil]; 
```

对此：

```
inputArray = [NSMutableArray arrayWithObjects:@"car", @"bus", @"helicopter", @"cruiz", @"bike", @"jeep", nil]; 
```

并将属性更改为 NSMutableArray ：

```
@property(nonatomic, strong) NSMutableArray *inputArray; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T13:12:59.993

你的`s`问题中的可能为零。所以你得到了例外。请检查一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T13:16:22.277

这是我喜欢使用的干净解决方案。您定义一个 NSArray 类别来扩展它并创建一个**map**方法。此方法根据您在块中返回的内容创建一个新的 NSArray：

```
@interface NSArray (BlockExtensions)
/*! 
 Invokes block once for each element of self, returning a new array containing the
 values returned by the block.
 */
- (NSArray *)map:(id (^)(id obj))block;

@end

@implementation NSArray (BlockExtensions)

- (NSArray *)map:(id (^)(id obj))block
{
    return [self mapWithOptions:0 usingBlock:^id(id obj, NSUInteger idx) {
        return block(obj);
    }];
} 

- (NSArray *)mapWithOptions:(NSEnumerationOptions)options usingBlock:(id (^)(id obj, NSUInteger idx))block
{
    NSMutableArray *array = [NSMutableArray arrayWithCapacity:[self count]];
    [self enumerateObjectsWithOptions:options usingBlock:^(id obj, NSUInteger idx, BOOL *stop)     {

        id newobj = block? block(obj, idx) : obj;
        if (newobj)
            [array addObject:newobj];
    }];
    return array;
}
    @end 
```

该块将为原始数组中的每个项目调用一次，将此对象作为参数传递：

```
NSArray *newArray = [inputArray map:^id(NSString *item) {
    if ([item rangeOfString:s].location == NSNotFound) {
        return item;
    }
    return nil;
}]; 
```

`newArray`将包含您过滤掉的项目！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T13:20:42.653

使用以下代码。（*此代码用于基于输入字符串/文本的过滤器数组`UITextField`*）

取两个`NSMutableArray`并将**一个数组添加到另一个数组**中`ViewDidLoad`，例如，

```
self.listOfTemArray = [[NSMutableArray alloc] init]; // array no - 1
self.ItemOfMainArray = [[NSMutableArray alloc] initWithObjects:@"YorArrayList", nil]; // array no - 2 

[self.listOfTemArray addObjectsFromArray:self.ItemOfMainArray]; // add 2array to 1 array 
```

**并编写以下 UISearchBar 的委托方法**

```
- (BOOL) textFieldDidChange:(UITextField *)textField
 {
        NSString *name = @"";
        NSString *firstLetter = @"";

    if (self.listOfTemArray.count > 0)
         [self.listOfTemArray removeAllObjects];

        if ([searchText length] > 0)
        {
                for (int i = 0; i < [self.ItemOfMainArray count] ; i = i+1)
                {
                        name = [self.ItemOfMainArray objectAtIndex:i];

                        if (name.length >= searchText.length)
                        {
                                firstLetter = [name substringWithRange:NSMakeRange(0, [searchText length])];
                                //NSLog(@"%@",firstLetter);

                                if( [firstLetter caseInsensitiveCompare:searchText] == NSOrderedSame )
                                {
                                    // strings are equal except for possibly case
                                    [self.listOfTemArray addObject: [self.ItemOfMainArray objectAtIndex:i]];
                                    NSLog(@"=========> %@",self.listOfTemArray);
                                }
                         }
                 }
         }
         else
         {
             [self.listOfTemArray addObjectsFromArray:self.ItemOfMainArray ];
         }

        [self.tblView reloadData];
} 
```

}

输出显示在您的`Console.`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-15T13:21:03.003

正如其他人所说，您不能在枚举数组时对其进行变异。做你想做的事情并保持快速枚举的便利的最简单方法是复制数组。

```
for (NSString* item in [inputArray copy]) {
   ...
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-15T14:53:57.317

向 Anoop +1 指出您可以使用`filteredArrayUsingPredicate`. 因此，如果您想根据 中的匹配项创建一个新数组`inputArray`，您还可以使用类似：

```
NSArray *matchingArray = [inputArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF contains[c] %@", s]]; 
```

或者，假设这`inputArray`是一个`NSMutableArray`，您可以简单地使用这一行过滤数组：

```
[inputArray filterUsingPredicate:[NSPredicate predicateWithFormat:@"SELF contains[c] %@", s]]; 
```

或者，如果你喜欢块：

```
[inputArray filterUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
    return ([evaluatedObject rangeOfString:s].location != NSNotFound);
}]]; 
```

# javascript - 查明 Flash 是软件渲染还是硬件以编程方式渲染

> ID：16015929
> 
> 赞同：0
> 
> 时间：2013-04-15T13:05:52.603
> 
> 标签：javascript, google-chrome-extension, youtube-api, flash

我正在构建一个适用于 Youtube 播放器 (@ youtube.com) 的 Chrome 扩展程序，当 Flash 播放器由软件而非硬件呈现时，我遇到了问题。

我知道我可以通过右键单击视频并选择“显示视频信息”来了解它是如何呈现的，问题是我需要在扩展级别知道这一点。

有没有办法知道使用 Javascript/Chrome 扩展选项/flash api/etc...？

# paypal - PayPal MEC 库是否已弃用或停止使用？

> ID：16015931
> 
> 赞同：3
> 
> 时间：2013-04-15T13:05:58.420
> 
> 标签：paypal

我已经使用 MECL 库在几个本机应用程序中成功实现了 MEC 模式，如下所述：

[https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECOnMobileDevices](https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECOnMobileDevices)

该库（iOS 和 Android 软件包）可以在这里找到： [https ://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index?qt-paypal_sdk_index=2#qt-paypal_sdk_index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index?qt-paypal_sdk_index=2#qt-paypal_sdk_index)

不幸的是，新的[http://developer.paypal.com](http://developer.paypal.com)网站似乎忘记了这个库曾经存在过。

我应该怎么办？删除库并在没有库提供的 DRT（设备参考令牌）的情况下进行快速结帐？或者仍然使用它是否安全？

我的应用程序使用 DRT id 来询问服务器支付是否已完成，因此无法获取令牌会损害执行支付的能力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T22:59:32.360

移动快速结帐流程仍然存在并且可以使用。虽然没有任何官方代码示例，但这有点令人失望。

您可以使用 Merchant SDK 获取全站点快速结账流程的工作示例，并根据需要对其进行更改。

我们试图让人们使用新的 iOS 和 Android SDK。

以下是 Mobile Express Checkout 设置指南的链接： [https ://developer.paypal.com/webapps/developer/docs/classic/express-checkout/integration-guide/ECOnMobileDevices/](https://developer.paypal.com/webapps/developer/docs/classic/express-checkout/integration-guide/ECOnMobileDevices/)

它详细介绍了差异（主要是重定向 URL），我希望能为您提供一个起点。

对不起！

# javascript - 选择选择选项时如何显示隐藏的 div？

> ID：16015933
> 
> 赞同：36
> 
> 时间：2013-04-15T13:06:00.483
> 
> 标签：javascript, html, event-handling

我想使用纯 JavaScript。我有一个下拉列表（`<select>`带有多个`<option>`s）。When a certain option is selected I want a hidden div to display.

```
<select id="test" name="form_select">
   <option value="0">No</option>
   <option value ="1" onClick"showDiv()">Yes</option>
</select>
<div id="hidden_div" style="display: none;">Hello hidden content</div> 
```

然后我用这个香草 JavaScript 代码尝试它：

```
function showDiv(){
   document.getElementById('hidden_div').style.display = "block";
} 
```

我猜我的问题是我的选项中的 onClick 触发器，但我不确定还能使用什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-15T13:07:48.713

尝试这个：

```
function showDiv(divId, element)
{
    document.getElementById(divId).style.display = element.value == 1 ? 'block' : 'none';
}
```

```
#hidden_div {
    display: none;
}
```

```
<select id="test" name="form_select" onchange="showDiv('hidden_div', this)">
   <option value="0">No</option>
   <option value="1">Yes</option>
</select>
<div id="hidden_div">This is a hidden div</div>
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-15T13:10:07.593

尝试处理 the 的 change 事件`select`并使用`this.value`以确定它是否为“是”。

[jsFiddle](http://jsfiddle.net/f4PV4/1/)

**JS**

```
document.getElementById('test').addEventListener('change', function () {
    var style = this.value == 1 ? 'block' : 'none';
    document.getElementById('hidden_div').style.display = style;
}); 
```

**HTML**

```
<select id="test" name="form_select">
   <option value="0">No</option>
   <option value ="1">Yes</option>
</select>

<div id="hidden_div" style="display: none;">Hello hidden content</div> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-08-02T09:31:06.897

我认为这是一个合适的解决方案：

```
<select id="test" name="form_select" onchange="showDiv(this)">
   <option value="0">No</option>
   <option value="1">Yes</option>
</select>
<div id="hidden_div" style="display:none;">Hello hidden content</div>

<script type="text/javascript">
function showDiv(select){
   if(select.value==1){
    document.getElementById('hidden_div').style.display = "block";
   } else{
    document.getElementById('hidden_div').style.display = "none";
   }
} 
</script>
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-15T13:17:14.050

您应该挂钩`<select>`元素的更改事件，而不是单个选项。

```
var select = document.getElementById('test'),
onChange = function(event) {
    var shown = this.options[this.selectedIndex].value == 1;

    document.getElementById('hidden_div').style.display = shown ? 'block' : 'none';
};

// attach event handler
if (window.addEventListener) {
    select.addEventListener('change', onChange, false);
} else {
    // of course, IE < 9 needs special treatment
    select.attachEvent('onchange', function() {
        onChange.apply(select, arguments);
    });
} 
```

[**演示**](http://jsbin.com/uvoqos/2/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-14T15:09:25.723

更通用，从调用元素传递值（更容易维护）。

*   在文本字段中指定开始条件（显示：无）
*   传递所需的选项值以显示/隐藏（“其他”）
*   传递目标和字段以显示/隐藏（“TitleOther”）

```
function showHideEle(selectSrc, targetEleId, triggerValue) {	
	if(selectSrc.value==triggerValue) {
		document.getElementById(targetEleId).style.display = "inline-block";
	} else {
		document.getElementById(targetEleId).style.display = "none";
	}
} 
```

```
<select id="Title"
   onchange="showHideEle(this, 'TitleOther', 'Other')">
      <option value="">-- Choose</option>
      <option value="Mr">Mr</option>
      <option value="Mrs">Mrs</option>
      <option value="Miss">Miss</option>
      <option value="Other">Other --&gt;</option>						
</select>
<input id="TitleOther" type="text" title="Title other" placeholder="Other title" 
    style="display:none;"/>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-21T11:29:16.643

检查此代码。使用选择项隐藏 div 的代码很棒。

***HTML***

```
<select name="name" id="cboOptions" onchange="showDiv('div',this)" class="form-control" >
    <option value="1">YES</option>
    <option value="2">NO</option>
</select>

<div id="div1" style="display:block;">
    <input type="text" id="customerName" class="form-control" placeholder="Type Customer Name...">
    <input type="text" style="margin-top: 3px;" id="customerAddress" class="form-control" placeholder="Type Customer Address...">
    <input type="text" style="margin-top: 3px;" id="customerMobile" class="form-control" placeholder="Type Customer Mobile...">
</div>
<div id="div2" style="display:none;">
    <input type="text" list="cars" id="customerID" class="form-control" placeholder="Type Customer Name...">
    <datalist id="cars">
        <option>Value 1</option>
        <option>Value 2</option>
        <option>Value 3</option>
        <option>Value 4</option>
    </datalist>
</div> 
```

**JS**

```
<script>
    function showDiv(prefix,chooser) 
    {
            for(var i=0;i<chooser.options.length;i++) 
            {
                var div = document.getElementById(prefix+chooser.options[i].value);
                div.style.display = 'none';
            }

            var selectedOption = (chooser.options[chooser.selectedIndex].value);

            if(selectedOption == "1")
            {
                displayDiv(prefix,"1");
            }
            if(selectedOption == "2")
            {
                displayDiv(prefix,"2");
            }
    }

    function displayDiv(prefix,suffix) 
    {
            var div = document.getElementById(prefix+suffix);
            div.style.display = 'block';
    }
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-29T06:22:27.960

```
<select id="test" name="form_select" onchange="showDiv()">
   <option value="0">No</option>
   <option value ="1">Yes</option>
</select>
<div id="hidden_div" style="display: none;">Hello hidden content</div>
<script>
    function showDiv(){
        getSelectValue = document.getElementById("test").value;
        if(getSelectValue == "1"){
            document.getElementById("hidden_div").style.display="block";
        }else{
            document.getElementById("hidden_div").style.display="none";
        }
    }
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-21T12:47:57.193

您可以使用以下常用功能。

```
<div>
     <select class="form-control" 
             name="Extension for area validity sought for" 
             onchange="CommonShowHide('txtc1opt2', this, 'States')"
     >
         <option value="All India">All India</option>
         <option value="States">States</option>
     </select>

     <input type="text" 
            id="txtc1opt2" 
            style="display:none;" 
            name="Extension for area validity sought for details" 
            class="form-control" 
            value="" 
            placeholder="">

</div> 
```

```
<script>
    function CommonShowHide(ElementId, element, value) {
         document
             .getElementById(ElementId)
             .style
             .display = element.value == value ? 'block' : 'none';
    }
</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-02T12:11:47.250

```
function showDiv(divId, element)
{
    document.getElementById(divId).style.display = element.value == 1 ? 'block' : 'none';
}
```

```
#hidden_div {
    display: none;
}
```

```
<select id="test" name="form_select" onchange="showDiv('hidden_div', this)">
   <option value="0">No</option>
   <option value="1">Yes</option>
</select>
<div id="hidden_div">This is a hidden div</div>
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-03-16T17:23:28.750

看看我的解决方案

我想让`visaCard-note`div 只有在选中时才`cardType`可见`visa`

这是html

```
<select name="cardType">
    <option value="1">visa</option>
    <option value="2">mastercard</option>
</select> 
```

这是js

```
var visa="1";//visa is selected by default 
$("select[name=cardType]").change(function () {
    document.getElementById('visaCard-note').style.visibility = this.value==visa ? 'visible' : 'hidden';
}) 
```

# c++ - 使用了 SetUnhandledExceptionFilter 但没有调用相应的方法

> ID：16015935
> 
> 赞同：0
> 
> 时间：2013-04-15T13:06:04.970
> 
> 标签：c++, winapi, exception

我曾经`SetUnhandledExceptionFilter`安装自定义异常处理程序。在下面的代码中，我希望如果发生未处理的异常，则`UnhandledException`调用并`foo!`打印方法

```
namespace mcFastNative {

Receiver* incOrdersA;
IncFeed* incOrders;

Receiver* snpOrdersA;
SnapshotFeed* snpOrders;

    // not important methods are ommited

bool McFastNativeAdapter::Disconnect() {
    incOrdersA->Disconnect();
    return true;
}

LONG WINAPI UnhandledException(LPEXCEPTION_POINTERS ExceptionInfo)  
{  
    printf("foo!");
            return EXCEPTION_CONTINUE_SEARCH;
}

void McFastNativeAdapter::Initialize(unsigned long feedA_group, unsigned long feedA_source, int feedA_port,
    unsigned long historicalIp, int historicalPort,
    unsigned long snapshotGroup, unsigned long snapshotSource, int snapshotPort)
{
    // Init WinSock
    WSAData data;
    WSAStartup( MAKEWORD( 2, 2 ), &data );

    SetUnhandledExceptionFilter(UnhandledException);

    incOrdersA = new Receiver(feedA_group, feedA_source, feedA_port);
    snpOrdersA = new Receiver(snapshotGroup, snapshotSource, snapshotPort);

    incOrders = new IncFeed("IncFeed");
    incOrdersA->SetFeed(incOrders);

    snpOrders = new SnapshotFeed("SnapshotFeed");
    snpOrdersA->SetFeed(snpOrders);
}

} 
```

但我收到了这样的输出：

`System.Runtime.InteropServices.SEHException (0x80004005): External component has thrown an exception. at mcFastNative.McFastNativeAdapter.Disconnect() at Fast.mcFastAdapterCpp.Disconnect() ...`

`foo!`没有打印到控制台，但是您可以看到发生了异常。`incOrdersA->Disconnect();`为什么未捕获`foo!`且未打印未处理的异常？

# android - 如果文件不存在，则创建它并将字符串写入其中。如果确实如此，则将字符串附加到它。工作不正常

> ID：16015942
> 
> 赞同：0
> 
> 时间：2013-04-15T13:06:21.257
> 
> 标签：android, file, append, filewriter, file-exists

好的，我读了很多书，并认为我已经解决了这个问题，但显然没有。我要做的是检查文件是否存在（在本例中为 heapFile.csv），如果不存在，则创建它，然后向其写入字符串。如果文件确实存在，那么我想将字符串附加到文件中。当我运行它时，我没有收到任何错误，尽管我确实收到警告说它无法创建文件，尽管它确实这样做了。但是，无论哪种情况，它都不会将字符串写入文件。我可能只是没有使用正确的语法或其他东西，但是在盯着这个看了几个星期之后，我看不到树木的森林并找到了问题。除了这个问题，我的程序运行良好，如果我能正常工作，我终于可以完成这个。非常感谢任何帮助。

这是java文件。我认为文件创建/写入位在哪里很清楚。

```
package com.loch.meaptracker;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

import com.google.ads.*;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.RelativeLayout;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TimePicker;

public class MainActivity extends Activity implements OnSeekBarChangeListener {

private SeekBar happyBar, energyBar, anxietyBar, painBar;
private EditText noteField;
private DatePicker dPick;
private TimePicker tPick;
@SuppressWarnings("unused")
private Button enterButton;
private int happyValue = 4, energyValue = 4, anxietyValue = 4,
        painValue = 4;
private static final String TAG = "heapApp";
private String Mood = "Blah";
private AdView adView;
final Context context = this;

@Override
protected void onCreate(Bundle savedInstanceState) {
    try {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Create the adView
        adView = new AdView (this, AdSize.BANNER, "a15138b1a7adad2");

        // Lookup your RelativeLayout assuming it's been given the attribute android:id="@+id/AdRelativeLayout
        RelativeLayout layout = (RelativeLayout)findViewById(R.id.AdRelativeLayout); 

        // Add the AdView to it
        layout.addView(adView);

        // Initiate a generic request to load it with an ad
        adView.loadAd(new AdRequest());

        // bars
        happyBar = (SeekBar) findViewById(R.id.happinessBarID);
        happyBar.setOnSeekBarChangeListener(this);
        energyBar = (SeekBar) findViewById(R.id.energyBarID);
        energyBar.setOnSeekBarChangeListener(this);
        anxietyBar = (SeekBar) findViewById(R.id.anxietyBarID);
        anxietyBar.setOnSeekBarChangeListener(this);
        painBar = (SeekBar) findViewById(R.id.painBarID);
        painBar.setOnSeekBarChangeListener(this);
        // end bars
        dPick = (DatePicker) findViewById(R.id.datePicker1);
        tPick = (TimePicker) findViewById(R.id.timePicker1);
        noteField = (EditText) findViewById(R.id.noteTextFieldID);
        enterButton = (Button) findViewById(R.id.enterButtonID);
    } catch (Exception onCreateException) {
        Log.e(TAG, "Exception received", onCreateException);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

// Bar listener methods
@Override
public void onProgressChanged(SeekBar arg0, int barValue, boolean hFromUser) {
    try {

        switch (arg0.getId()) {
        case R.id.happinessBarID:
            happyValue = barValue + 1;
            break;
        case R.id.energyBarID:
            energyValue = barValue + 1;
            break;
        case R.id.anxietyBarID:
            anxietyValue = barValue + 1;
            break;
        case R.id.painBarID:
            painValue = barValue + 1;
            break;
        }
        String debugBarValue = "Happy is " + happyValue + ", Energy is "
                + energyValue + ", Anxiety is " + anxietyValue
                + ", Pain is " + painValue + ".";
        System.out.println(debugBarValue);

    } catch (Exception BarValueException) {
        Log.e(TAG, "Exception received", BarValueException);
    }

}

@Override
public void onStartTrackingTouch(SeekBar happyBar) {
    // TODO Auto-generated method stub

}

@Override
public void onStopTrackingTouch(SeekBar happyBar) {
    // TODO Auto-generated method stub

}

// end Bar listener methods

// Enter Button listener Method

public void dialogPop(View v) {
    try {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                context);

        // set Title
        alertDialogBuilder.setTitle("title");

        // set dialog message
        alertDialogBuilder.setMessage("You entered: " + getMood())
                .setCancelable(false).setPositiveButton("Okay",
                // When Okay button clicked the write mood string to file
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                try {
                                    // This is the string that should be
                                    // written to file
                                    String data = getMood();
                                    // This is the file that should be
                                    // written to
                                    File heapFile = new File(Environment.getExternalStorageDirectory(), "heapFile.csv");

                                    // if file doesn't exists, then create
                                    // it
                                    if (!heapFile.exists()) {
                                        heapFile.createNewFile();
                                        FileWriter heapFileWritter = new FileWriter(
                                                heapFile.getName(), true);
                                        BufferedWriter heapBufferWritter = new BufferedWriter(
                                                heapFileWritter);
                                        heapBufferWritter.write(data);
                                        heapBufferWritter.close();

                                        System.out.println("Done");
                                    }

                                    // true = append file
                                    FileWriter heapFileWritter = new FileWriter(
                                            heapFile.getName(), true);
                                    BufferedWriter heapBufferWritter = new BufferedWriter(
                                            heapFileWritter);
                                    heapBufferWritter.write(data);
                                    heapBufferWritter.close();

                                    System.out.println("Done");

                                } catch (IOException e) {
                                    e.printStackTrace();
                                }
                            }

                        })
                // If they press either the cancel button or the back button
                // on their device (Same thing) then close the dialog and
                // give the user a chance to change what they've entered
                .setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                // TODO Auto-generated method stub
                                dialog.cancel();
                            }
                        });

        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();
    } catch (Exception buttonListenerException) {
        Log.e(TAG, "Exception received", buttonListenerException);
    }
    return;
}

public String getMood() {
    try {
        int month = dPick.getMonth();
        int day = dPick.getDayOfMonth();
        int year = dPick.getYear();
        int minute = tPick.getCurrentMinute();
        String moodAntePost = "AM";
        boolean hourType = tPick.is24HourView();
        int moodHour = tPick.getCurrentHour();
        if (hourType == false && moodHour > 12) {
            moodHour = (moodHour - 12);
            moodAntePost = "PM";
        } else if (hourType == false && moodHour <= 0) {
            moodHour = 12;
        } else {
        }
        String noteText = noteField.getText().toString();
        Mood = "Happiness," + happyValue + ",Energy," + energyValue
                + ",Anxiety," + anxietyValue + ",Pain," + painValue
                + ",Date," + month + "/" + day + "/" + year + ",Time,"
                + moodHour + ":" + minute + "," + moodAntePost + ",Note,"
                + noteText;
        System.out.println(Mood);
    } catch (Exception getMoodException) {
        Log.e(TAG, "Exception received", getMoodException);
    }

    return Mood;
}

} 
```

编辑了我的问题以包含清单，以便您可以看到我拥有的权限。我认为这是正确的，但我不确定...

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.loch.meaptracker"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.loch.meaptracker.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:34:50.487

用这个：

```
 String file = heapFile.getAbsolutePath();
 FileWriter heapFileWritter = new FileWriter(file, true); 
```

getName() 只会给你文件的名称。但是您需要为 FileWriter 提供绝对路径。

# javascript - 提取代码以将其放入另一个函数中

> ID：16015943
> 
> 赞同：1
> 
> 时间：2013-04-15T13:06:21.580
> 
> 标签：javascript, jquery, refactoring

我有以下工作 js/jquery 代码：

```
$(document).on('nested:fieldAdded', function(event){
  return $('.datetime_field').datetimepicker({
  altField: '#datetime_to_server',
  altFormat: 'yy-m-d',
  altFieldTimeOnly: false,
  altTimeFormat: 'hh:mm:00'
}); 
}) 
```

整个函数事件也在其他地方调用：

```
(function() {

  $(document).ready(function() {
    return $('.datetime_field').datetimepicker({
      altField: '#datetime_to_server',
      altFormat: 'yy-m-d',
      altFieldTimeOnly: false,
      altTimeFormat: 'hh:mm:00'
    });
  });

}).call(this); 
```

我想提取相同的代码并给他打电话。问题是我试过了，但我可以让它工作。我如何提取相似的代码并从这两个不同的地方调用它？

编辑：我试过这个：

```
$(document).on('nested:fieldAdded', refresh_datetime_listener())

function refresh_datetime_listener(){
return $('.datetime_field').datetimepicker({
  altField: '#datetime_to_server',
  altFormat: 'yy-m-d',
  altFieldTimeOnly: false,
  altTimeFormat: 'hh:mm:00'
}); 
} 
```

但它说 datetimepicker 不是一个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:35:55.057

正如@dystroy 所说，你试过了吗

```
function myFunc(event){
  return $('.datetime_field').datetimepicker({
  altField: '#datetime_to_server',
  altFormat: 'yy-m-d',
  altFieldTimeOnly: false,
  altTimeFormat: 'hh:mm:00'
}); 
} 
```

然后

```
$(document).on('nested:fieldAdded', myFunc); 
```

和

```
(function() {
  $(document).ready(myFunc);
}).call(this); 
```

请注意，事件绑定是传递函数引用，而不是函数调用。`myFunc`， 并不是`myFunc()`

# c++ - 在指向不同类的指针向量中找到一个类

> ID：16015944
> 
> 赞同：0
> 
> 时间：2013-04-15T13:06:21.970
> 
> 标签：c++, oop, operator-overloading

所以我有这个：

```
class Grup : public Shape
{
private:
    std::vector<Shape *> continut;
public:
    static const std::string identifier;
    Grup(){};
    ~Grup(){
    continut.clear();
    };
    void add(Shape *);
    void remove(Shape *);
    void output(std::ostream &) const;
    void readFrom(std::istream &);
    void moveBy(int, int);
    friend std::ostream &operator<<(std::ostream &, const Grup &);
} 
```

我想实现删除功能。我试过这个：

```
void Grup::remove(Shape *s)
{
vector<Shape*>::iterator it;
it = continut.begin();
while(it!=continut.end())
{
    if((*it) == s)
    {
    it = continut.erase(it);
    }
    else it++;

}
} 
```

但是 == 并没有给我一个真正的价值。我还尝试在每个形状上重载运算符 == 但结果相同。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:11:03.527

这是比较两个`Shape`对象的内存地址：

```
if((*it) == s) // '*it' is of type `Shape*` 
```

它不是比较两个`Shape`对象。需要进一步取消引用才能使用`operator==`defined for `Shape`。但是，请参阅[为类层次结构重载 operator== 的正确方法是什么？](https://stackoverflow.com/questions/1691007/whats-the-right-way-to-overload-operator-for-a-class-hierarchy)有关如何处理`operator==`类层次结构的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:14:29.737

您正在比较形状指针地址，它们是不同的。

你应该重载**运算符 ==**

这里有些例子：

[C++ 运算符重载指南](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)

[运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)

# maven - maven 错误：所需的原型不存在（org.phpmaven:php5-web-archetype:2.0-SNAPSHOT）

> ID：16015945
> 
> 赞同：1
> 
> 时间：2013-04-15T13:06:29.497
> 
> 标签：maven

我正在尝试通过绑定以下命令使用 maven 创建 php 项目：

```
sudo mvn archetype:generate -DarchetypeGroupId=org.phpmaven 
  -DarchetypeArtifactId=php5-web-archetype -DarchetypeVersion=2.0-SNAPSHOT 
  -DgroupId=org.sample -DartifactId=my-app -Dversion=0.0.1-SNAPSHOT 
```

但它给了我错误：

```
Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) 
  on project standalone-pom: The desired archetype does not exist (org.phpmaven:php5-web-archetype:2.0-SNAPSHOT) -> [Help 1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:46:58.337

显然您正在尝试遵循[这些说明](http://www.php-maven.org/branches/2.0-SNAPSHOT/php-lib-10min.html)。如果这样做，您还应该执行已列出的[准备步骤。](http://www.php-maven.org/prepare.html)

这样做您依赖于快照原型，而默认存储库中不存在这些原型，因此您必须配置 php-maven 快照存储库。

做完之后，

1.  确认您的 settings.xml 位置（在您指出您在错误文件夹中的评论中）
2.  尝试

    `mvn archetype:generate -DarchetypeGroupId=org.phpmaven.sites -DarchetypeArtifactId=php5-web-archetype -DarchetypeVersion=2.0.0-beta-1 -DgroupId=org.sample -DartifactId=my-app -Dversion=0.0.1-SNAPSHOT`

因为您可以从[repo](http://nexus.php-maven.org/content/groups/release-repo1.php-maven.org/archetype-catalog.xml)中看到该原型版本应该到位。注意不同的archetypeversion和不同的archetypegroupid！

# java - Java - 来自第一个父级的组路径列表

> ID：16015946
> 
> 赞同：0
> 
> 时间：2013-04-15T13:06:40.227
> 
> 标签：java, path, parent-child, grouping

如果我有这样的路径文本列表：

```
folder1/A
folder1/B/H
folder1/C/F
folder2/D
folder2/E
folder2/F
folder3/G
folder3/H
folder3/I 
```

按第一个目录对它们进行分组的最佳方法是什么？

像这样的输出：

```
folder1 [A, B/H, C/F]
folder2 [D, E, F]
folder3 [G, H, I] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:11:06.720

你可以使用 a`Map<String, List<String>>`来做到这一点。

1.  首先逐行读取文件（使用`BufferedReader`或等效）
2.  使用拆分字符串`"/"`并获取**主文件夹**（在您的情况下`folder1, folder2`）
3.  将**主文件夹**作为**键**添加到`map`，如果键存在，则获取值`List<String>`并添加路径（即`B/H, A`等）

编辑：完整列表

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class ParseFolders {

    public static Map<String, List<String>> parse(List<String> input) {
        Map<String, List<String>> res = new HashMap<String, List<String>>();

        for(String s : input) {
            String [] arr = s.split("/");
            String key = arr[0];
            String val = s.substring(s.indexOf("/"));
            if(res.containsKey(key)) {
                res.get(key).add(val);
            }
            else {
                List<String> folders = new ArrayList<String>();
                folders.add(val);
                res.put(key, folders);
            }
        }
        return res;
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        List<String> input = new ArrayList<String>();
        input.add("folder1/A");
        input.add("folder1/B/H");
        input.add("folder1/C/F");
        input.add("folder2/D");
        input.add("folder2/E");
        input.add("folder2/F");
        input.add("folder3/G");
        input.add("folder3/H");
        input.add("folder3/I");

        System.out.println(parse(input));
    }

} 
```

和输出

```
{folder1=[/A, /B/H, /C/F], folder3=[/G, /H, /I], folder2=[/D, /E, /F]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:14:03.707

假设您有一个字符串列表`ls`作为包含所有字符串的输入：

```
Map<String, List<String>> map = new HashMap<>();
for(String s: ls){
  String[] k = s.split("/");
  if(k.length<2)
     throw new RuntimeException("Invalid input");
  if(map.get(k[0]==null)
     map.put(k[0], new ArrayList<String>());
  map.get(k[0]).add(Arrays.asList(Arrays.copy(k,1,k.length));
} 
```

# c# - 从枚举中获取值

> ID：16015948
> 
> 赞同：-5
> 
> 时间：2013-04-15T13:06:43.023
> 
> 标签：c#, enums

我需要在`enum DaysOfTheWeek`过滤后的值中找到`List<int> daysId`并返回过滤后的枚举

我的枚举：

```
[Flags]
public enum DaysOfTheWeek
{
    Sunday = 1,
    Monday = 2,
    Tuesday = 4,
    Wednesday = 8,
    Thursday = 16,
    Friday = 32,
    Saturday = 64,
    AllDays = 127,
} 
```

-

```
var allValues = Enum.GetValues(typeof(DaysOfTheWeek)); 
```

我的整数列表：

```
List<int> daysId = new List<int> {1,3}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:08:59.220

```
var filtered = daysId.Select(d => (DaysOfTheWeek)d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:39:05.903

不确定你的问题。像这样的东西？

```
var filtered  = daysId.Select(d=>(DaysOfTheWeek)(1<<(d-1))).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:45:31.213

也许我太复杂了，但看看这个：

```
int[] daysId = new int[] { 1, 3,48,127 };

Dictionary<int, List<DaysOfTheWeek>> result = new Dictionary<int, List<DaysOfTheWeek>>();

foreach (int id in daysId)
{
    result[id] = new List<DaysOfTheWeek>();
    BitArray ba = new BitArray(new int[]{id});
    for (int i=0;i<ba.Length;i++)
    {
        if (ba[i])
        {
            result[id].Add((DaysOfTheWeek)(1 << i));
            Console.WriteLine((DaysOfTheWeek)(1 << i));
         }                    
     }
    Console.WriteLine("id-" + id + " > " + (DaysOfTheWeek)id);                
}

Console.ReadKey(); 
```

检查输出，看看它是否是你想要的。如果需要，您可以使用直接转换为星期几，`(DaysOfTheWeek)id`或者您可以单独获取每一个`DaysOfTheWeek`。上面两个我都做了。

# python - 读取所有目录中的所有文件

> ID：16015955
> 
> 赞同：15
> 
> 时间：2013-04-15T13:06:57.050
> 
> 标签：python, file, file-handling, directory-structure

我有代码可以读取单个文本文件的值，但是在读取所有目录中的所有文件并将所有内容放在一起时遇到了困难。

这是我所拥有的：

```
filename = '*'
filesuffix = '*'
location = os.path.join('Test', filename + "." + filesuffix)
Document = filename
thedictionary = {}
with open(location) as f:
 file_contents = f.read().lower().split(' ') # split line on spaces to make a list
 for position, item in enumerate(file_contents): 
     if item in thedictionary:
      thedictionary[item].append(position)
     else:
      thedictionary[item] = [position]
wordlist = (thedictionary, Document)
#print wordlist
#print thedictionary 
```

请注意，我试图将通配符 * 插入文件名以及文件后缀的通配符。我收到以下错误：

“IOError：[Errno 2] 没有这样的文件或目录：'Test/ *.* '”

我不确定这是否是正确的方法，但似乎如果我以某种方式让通配符工作 - 它应该工作。

我已经让这个例子工作了： [Python - 从子目录中找不到的目录文件中读取文件（在那里）](https://stackoverflow.com/questions/15580716/python-reading-files-from-directory-file-not-found-in-subdirectory-which-is-t)

这有点不同 - 但不知道如何更新它以读取所有文件。我在想，在这组初始代码中：

```
previous_dir = os.getcwd()
os.chdir('testfilefolder')
#add something here?
for filename in os.listdir('.'): 
```

我需要在我有一个外部 for 循环的地方添加一些东西，但不知道该放什么..

有什么想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T13:09:06.777

Python 不支持直接在`open()`调用的文件名中使用通配符。您将需要使用该[`glob`模块](http://docs.python.org/2/library/glob.html)来从单级子目录加载文件，或用于[`os.walk()`](http://docs.python.org/2/library/os.html#os.walk)遍历任意目录结构。

打开所有子目录中的所有文本文件，一层深：

```
import glob

for filename in glob.iglob(os.path.join('Test', '*', '*.txt')):
    with open(filename) as f:
        # one file open, handle it, next loop will present you with a new file. 
```

在任意嵌套的目录中打开所有文本文件：

```
import os
import fnmatch

for dirpath, dirs, files in os.walk('Test'):
    for filename in fnmatch.filter(files, '*.txt'):
        with open(os.path.join(dirpath, filename)):
            # one file open, handle it, next loop will present you with a new file. 
```

# java - MyBatis 在 select 不返回任何行时的特殊结果

> ID：16015956
> 
> 赞同：3
> 
> 时间：2013-04-15T13:06:57.700
> 
> 标签：java, sql, postgresql, mybatis

我的 MyBatis 选择是

```
 // result map that sub-selects a folder
 <resultMap id="beanWithFolderMap" type="com.example.BeanWithFolder">
    <id column .../>
    <association column="folder_id" property="folder" javaType="com.example.Folder" select="selectFolder"/>
 </resultMap>

 // folder sub-select
 <select id="selectFolder" resultType="com.example.Folder">
        SELECT

        folder_id
        name,

        FROM folders
        WHERE folder_id=#{folderId}
 </select> 
```

当没有找到匹配 folder_id 的行时，我想返回 Folder 类的特殊实例。

现在 MyBatis 在找不到行时返回 null。我想返回一个设置了 folderId 字段的 Folder 实例——因为我知道我在寻找什么，我至少可以设置这个字段。

怎么做？

* * *

就像是

```
 SELECT

        #{folderId} as folder_id,
        name,

        FROM folders
        WHERE folder_id=#{folderId} 
```

会很棒，但我收到异常“无法确定参数 $1 的数据类型”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:59:00.687

### 功能

如果这个查询经常使用，我会为它创建一个小函数。这可能是最快的：

```
CREATE OR REPLACE FUNCTION f_foo(_folder_id int)
  RETURNS TABLE (folder_id int, name text) AS
$func$
BEGIN

RETURN QUERY
SELECT f.folder_id, f.name
FROM   folders f
WHERE  f.folder_id = $1;

IF NOT FOUND THEN       -- only if nothing was found
    RETURN QUERY
    VALUES ($1, NULL);  -- columns must match!
END IF;

END
$func$ LANGUAGE plpgsql STABLE; 
```

称呼：

```
SELECT * FROM f_foo(133) 
```

这就是您在脚本中使用的内容。就像从表中选择一样。

### 纯 SQL

还有其他使用普通 SQL 的方法，最好使用`NOT EXISTS`. 我想 CTE 会有所帮助：

```
WITH x AS (
   SELECT folder_id, name
   FROM   folders
   WHERE  folder_id = $1;
   )
SELECT * FROM x
UNION  ALL
SELECT $1, NULL
WHERE  NOT EXISTS (SELECT 1 FROM x); 
```

# jquery - Jquery - 仅使用字母间距和单词间距将文本放入元素中

> ID：16015957
> 
> 赞同：0
> 
> 时间：2013-04-15T13:07:07.023
> 
> 标签：jquery, font-size, justify, letter-spacing, word-spacing

有这个插件吗？我一直在筛选 internetz 并发现 bigText、Justify、fitText、textFit 但它们似乎都适用于我不想做的字体大小。我只希望文本适合具有定义宽度的元素。

**HTML：**

```
<div id="title">
   <h1>One header that i pretty long</h1>
   <h2>Sub-header that is shorter</h2>
</div> 
```

**CSS：**

```
#title {
   width: 300px;
}

h1 {
   font-size: 3em;
}

h2 {
   font-size: 2em;
} 
```

到目前为止，我发现的插件的问题是子标题最终会更大，因为它的字母数量更少。

我找到了这个解决方案，但问题是它给了我一个稍微不平衡的间距，[证明](http://www.quora.com/Web-Development/How-to-justify-a-single-word-by-changing-letter-spacing-using-JQuery)

**JS**

```
if(config.fonts_loaded){
            $(".title .justify").each(function(i, e) {
            var $t    = $(this);
            console.log($t.height());
            var text  = $t.text();
            var tLen  = text.length -1;
            var i     = 0;
            var letter;
            var ratio;
            //  We have the data we need to rebuild text. Lose original text.
            //
            $t.empty();
            while(i <= tLen) {
              letter = $("<span></span>")
              .css({
                "position" : "absolute"
              })
              .text(text.charAt(i));
              $t.append(letter);
              ratio = i / tLen;
              //  Place each character in its rational slot, retreating margin

              //  so as to stay within bounds (last character starts at 100% of width).

              //

              letter.css({

                "left"      : (100 * ratio) + "%",

                "margin-left" : -letter.width() * ratio

              });

              ++i

            }

          });
        } 
```

结果是： ![在此处输入图像描述](https://i.stack.imgur.com/ULrYl.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:34:49.760

而是自己制作了一个脚本，并从字母开始将每个字母彼此分开，然后计算出它们占用了多少空间。

[刻字.js](https://github.com/davatron5000/Lettering.js)

这是我的最终代码，

```
function letter_space_me(element){
    var el = $(element).text();
    el = el.replace(/ /g, '&nbsp;'); // REPLACE ALL WHITESPACES WITH &NBSP;
    $(element).html(el);
    $(element).lettering();
    var characters = $(element + ' span');
    var number_of_chars = characters.length;
    var parent_width = $(element).parent().width()

    var total_width = 0;

    for (var i = 0; i < characters.length; i++) {
        total_width += $(characters[i]).width();
    };

    var spacing = (parent_width - total_width) / (number_of_chars - 1); // GET SPACING PER CHARACTERS EXCEPT FOR THE LAST CHARACTER WHICH WE DONT WANT TO GIVE AND SPACE TO.

    for (var i = 0; i < characters.length; i++) {
        if((characters.length - i) > 1){
            $(characters[i]).css({'padding-right' : spacing + 'px'});
        }
    };
} 
```

# wordpress - 处理错误时删除已发布的发布通知

> ID：16015959
> 
> 赞同：2
> 
> 时间：2013-04-15T13:07:09.273
> 
> 标签：wordpress, wordpress-theming

我为自定义帖子类型创建了一个错误处理程序。

```
add_filter( 'wp_insert_post_data' , 'filter_post_data' , '99', 2 );
function filter_post_data( $data , $postarr )
{
    //error handling
    if($data['post_type'] == 'post_annunci')
    {
        if($postarr['annuncio_prezzo'] == '' || !is_numeric($postarr['annuncio_prezzo']))
        {
            $errors .= 'Annuncio non salvato, devi inserire un prezzo con valori numerici.</br>prezzo = '.$postarr['annuncio_prezzo'];
            update_option('my_admin_errors', $errors);

            $data['post_status'] = 'draft';
        }
    }
    return $data;

}

add_action( 'admin_notices', 'admin_error_handler_annunci' );
function admin_error_handler_annunci() {

    $errors = get_option('my_admin_errors');

    if($errors) 
        echo '<div class="error"><p>' . $errors . '</p></div>';
}
// Clear any errors
add_action( 'admin_footer', 'clear_error_handler_annunci' );
function clear_error_handler_annunci() {

    update_option('my_admin_errors', false);
} 
```

这非常有效，但我收到了一个我想删除的“已发布帖子”通知。

有什么方法可以摆脱该消息吗？我看到了类似这个脚本的某种通知移除器，但仅适用于更新通知。

```
function hideUpdateNag() {
    remove_action( 'admin_notices', 'update_nag', 3 );
}
add_action('admin_menu','hideUpdateNag'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:13:27.340

是的。使用过滤器是可能的[**`post_updated_messages`**](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-admin/edit-form-advanced.php#L64)。

```
add_filter( 'post_updated_messages', 'remove_all_messages_so_16015959' );

function remove_all_messages_so_16015959( $messages )
{
    return array();
} 
```

在此示例中，返回一个空数组。结果根本没有消息。
这可以使用下面的样本值进行微调，这些样本值是`$messages`过滤器之前的内容。

```
Array
(
    [post] => Array
        (
            [0] => 
            [1] => Post updated. View post
            [2] => Custom field updated.
            [3] => Custom field deleted.
            [4] => Post updated.
            [5] => 
            [6] => Post published. View post
            [7] => Post saved.
            [8] => Post submitted. Preview post
            [9] => Post scheduled for: Jan 12, 2013 @ 19:03\. Preview post
            [10] => Post draft updated. Preview post
        )

    [page] => Array
        (
            [0] => 
            [1] => Page updated. View page
            [2] => Custom field updated.
            [3] => Custom field deleted.
            [4] => Page updated.
            [5] => 
            [6] => Page published. View page
            [7] => Page saved.
            [8] => Page submitted. Preview page
            [9] => Page scheduled for: Jan 12, 2013 @ 19:03\. Preview page
            [10] => Page draft updated. Preview page
        )

    [attachment] => Array
        (
            [1] => Media attachment updated.
            [2] => Media attachment updated.
            [3] => Media attachment updated.
            [4] => Media attachment updated.
            [5] => Media attachment updated.
            [6] => Media attachment updated.
            [7] => Media attachment updated.
            [8] => Media attachment updated.
            [9] => Media attachment updated.
            [10] => Media attachment updated.
        )

) 
```

# file - 比较两个文件，如果打印头字段

> ID：16015963
> 
> 赞同：1
> 
> 时间：2013-04-15T13:07:26.003
> 
> 标签：file, header, awk, compare

我有两个文件：

文件 1（第一行是标题）

```
gene h1 h2 h3 h4 h5 h6 h7 h8...
gene_name1 e1 e2 e3 e4 e5 e6 e7 e8...
gene_name2 ...
gene_name3 ...
... 
```

文件 2（无标题）

```
gene_name1 mean1 mean2 sd1 sd2
gene_name2 ...
gene_name3 ... 
```

如果 File1 中的任何字段 e1、e2、e3...> 来自 File2 的相应基因名称的 mean1+3(sd1)，我想输出标题字段。示例：如果 e1>mean1+3(sd1) 为 TRUE，则打印：

基因名称1 h1

如果 e2 >mean1+3(sd1) TRUE，则将 h2 添加到该行：

基因名称1 h1 h2

如果 $1 匹配两个文件，则对每一行执行此操作。如果 File1 中没有满足条件的字段，请将其留空。

期望的输出：

```
gene_name1 h1 h2
gene_name2 
gene_name3 h5 h6 h8
gene_name4 h1 h5
gene_name5 h3
gene_name6 
gene_name7 h2 h5 h7 h8
... 
```

我在想这样的事情：

`awk 'FNR==NR{a[$1]=$2+3*$4;next} $1 in a`...然后是文件 1 中每个字段的“for 循环”。但我不知道如何存储标题字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:28:16.397

这应该可以解决问题：

```
FNR==NR {
    a[$1]=$2+3*$4
    next
}
FNR==1 {
    split($0,h,/ /)
    next
}
($1 in a){

    printf "%s ",$1

    for (i=2;i<=NF;i++) {
        if ($i > a[$1]) {
            printf "%s ",h[i] 
        }
    }
    print ""
} 
```

演示：

```
$ cat file1 
gene h1 h2 h3 
gene1 1.0 2.0 3.0
gene2 0.5 0.5 0.5
gene3 100 50 10

$ cat file2
gene1 1.0 2.0 0.10 0.20
gene2 2.4 2.6 0.24 0.45
gene3 1.4 5.3 1.33 0.32

$ awk -f script.awk file2 file1
gene1 h2 h3 
gene2 
gene3 h1 h2 h3 
```

# html - 签署 iframe 表单以验证其发件人

> ID：16015964
> 
> 赞同：-1
> 
> 时间：2013-04-15T13:07:26.977
> 
> 标签：html, security, post, iframe

我有：

1.  静态页面上的表单。
2.  两个站点（**A** - 我需要在 iframe 中插入此表单的站点，**B** - 我需要验证表单并将答案发送回 iframe 的站点）。

我需要某种形式的歌唱，可以肯定的是，该表格是从站点**A**提交的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:09:08.857

如果`iframe`位于不同的域中，则无法从 the 访问父级，`iframe`反之亦然。请参阅同源策略。

# javascript - 为什么无法使用 ajax 和 popover 为每个图标获取不同的信息？

> ID：16015967
> 
> 赞同：0
> 
> 时间：2013-04-15T13:07:45.163
> 
> 标签：javascript, ajax, getjson, popover

这里是js函数，选择站后调用该函数，并创建图标（根据Stations.php随机来的数据）并显示在html页面中。图标也通过调用bindMyPopovers()函数与popover绑定，以来到图标时显示弹出窗口：

```
 function sta_callStation(sel){
  $('#noOfPassengers, #infoOfPassengers, #distType,#distParams').empty();
   $('#sta_numberOfIcons').empty();

    $.getJSON('Stations.php?id='+sel.value, function(station){

        $.each(station, function(sta_key, sta_value) {

        if(sel.value==sta_key)
        {
          $.each(sta_value.passengers, function(j,passengers) 
        {

          //$('#sta_numberOfIcons').append('<i class="icon-user" ></i>');
         var pas_icon = document.createElement("a");

          pas_icon.className ="icon-user";
          pas_icon.id='id_'+j;

          pas_icon.setAttribute('href', '#');
          pas_icon.setAttribute('rel', 'popover');
          //alert('id_'+(j));
          var empty=document.createElement("a");
          empty.appendChild(document.createTextNode(" "));
          document.getElementById('sta_numberOfIcons').appendChild(pas_icon);

          document.getElementById('sta_numberOfIcons').appendChild(empty);

      });
        }
   });
       bindMyPopovers();
  });
  }
function bindMyPopovers() {
$("a[rel=popover]").each(function(){

    $(this).popover({
        trigger: 'hover',
        placement: 'top',
        html: true,
        title:"Passenger Information",
        content: "Passenger "+$(this).attr('id')+" "+showPassenger($(this))
    })
    .click(function(e) {
        e.preventDefault()
    });
 });
} 
```

这是使用passengerId从Passengers.php获取数据的showPassenger（在他们也有id的图标中），我想在相关弹出窗口的内容中显示即将到来的数据。

```
 var v;
 function showPassenger($this){      
  $("a[rel=popover]").each(function(){
  var id=$this.attr('id');
  var id_num=id.charAt(id.length-1);      

  $.getJSON('Passengers.php?passengerId='+id_num, function(passenger){
      v=null;
      $.each(passenger, function(pas_key, pas_value) {

          v+=" "+pas_key+" "+pas_value+" ";

      });

   });});return v;} 
```

使用此代码，首先我从站组合框中选择一个站，然​​后创建图标，但是当我来到一个图标时，例如内容显示；乘客 id_1 未定义。然后第二个选择我得到一些关于乘客的信息（例如从：2，到：3）。但是对于其他乘客图标，他们的弹出内容中显示了相同的数据。为什么要绑定相同的数据所有的图标？如何更改代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:01:20.923

```
 function sta_callStation(sel){
 var numberOfPassengers=0;
 $('#noOfPassengers, #infoOfPassengers, #distType,#distParams').empty();
     $('#sta_numberOfIcons').empty();

      stationId=sel.value;
      stationId++;
      $.getJSON('Stations.php?id='+sel.value, function(station){

          $.each(station, function(sta_key, sta_value) {

          if(sel.value==sta_key)
          {
            $.each(sta_value.passengers, function(j,passengers) 
          {
            numberOfPassengers++;
            var pas_icon = document.createElement("a");

            pas_icon.className ="icon-user";
            pas_icon.id=(j+1);

            pas_icon.setAttribute('href', '#');
            pas_icon.setAttribute('rel', 'popover');

            var empty=document.createElement("a");
            empty.appendChild(document.createTextNode(" "));
            document.getElementById('sta_numberOfIcons').appendChild(pas_icon);

            document.getElementById('sta_numberOfIcons').appendChild(empty);

        });
            $("#noOfPassengers").append("Yolcu Sayısı:"+numberOfPassengers);
          }
     });
         sta_bindMyPopovers();
    });
    }

 function sta_bindMyPopovers() {
 $("a[rel=popover]").each(function(){
      sta_showPassenger($(this).attr('id'));
  });
 }

 var v='';
 function sta_showPassenger(id){     
    var id_num=id;      
    console.log("id: " + id);
    console.log("id_num: " + id_num);
    $.getJSON('Passengers.php/'+id_num, function(passenger){
        console.log("passenger: " + passenger );
        v='';
        $.each(passenger, function(pas_key, pas_value) {

            v+=" "+pas_key+" "+pas_value+" ";

        });

        $("#"+id).popover({
          trigger: 'hover',
          placement: 'top',
          html: true,
          title:"Passenger "+ id_num ,
          content: " " + v
      })
      .click(function(e) {
          e.preventDefault();
      });

  });

   console.log("v: " + v);
  return v;
} 
```

# matlab - Matlab输出太多

> ID：16015969
> 
> 赞同：0
> 
> 时间：2013-04-15T13:07:48.117
> 
> 标签：matlab, return-value

程序 myfile.m 读取一个包含 25 个名称和数字的 txt 文件，例如

例子：

约翰·道拉斯 15986

菲利普公爵 357852

等等。

该程序将它们转换为

```
15986 Doughlas John
357852 duch Filip 
```

这是没有功能的，我得到了太多的输出。

```
Error message:
Error using disp
Too many output arguments.

Error in red4 (line 26)
  array = disp(All); 
```

原代码如下：

```
function array = myfile(~) 
if nargin == 0 
dirr = '.';
end
answer = dir(dirr);  
k=1;
while k <= length(answer) 
    if answer(k).isdir 
        answer(k)=[]; 
    else
        filename{k}=answer(k).name;
        k=k+1;
    end
 end
chose=menu( 'choose file',filename);
namn = char(filename(chose));  
fid = fopen(namn, 'r');    
R = textscan(fid,'%s %s %s');  
x=-1;                                            
k=0;                                               
while x <= 24                                  
      x = k + 1;                                    
      All = [R{3}{x},'   ',R{1}{x},' ',R{2}{x}];
      disp(All)                                     
      k = k + 1;                                   
end                                                
fclose(fid); 
```

现在我从人们和网站上得到了很多很好的答案，比如[函数](http://www.mathworks.se/help/matlab/ref/function.html)，但是我不能用函数得到像上面这样的结果。

我尝试将它们结合起来并得到了一些结果：

```
y = 15986 & [a,z,b] = myfile
y = 25 & myfile = x
y = numbers name1,2,3,4 and so one & myfile = fprintf(All)
y =                       & I used results().namn, 
numbers name 1            & results().id, results().lastname
y =
numbers name 2 and so on. 
```

我想要的结果是：

```
y = myfile
y =
15986 Doughlas John
357852 duch Filip 
```

* * *

更新：像 Eitan T 说的那样改变它，但没有得到像上面这样的结果。

得到结果：

'约翰·道拉斯 15986'

'菲利普公爵 357852'

```
function C = myfile()                            
 if nargin == 0 
    dirr = '.';
end
answer = dir(dirr); 
k=1;
while k <= length(answer)   
    if answer(k).isdir 
        answer(k)=[]; 
    else
        filname{k}=answer(k).name;
        k=k+1;
    end
end
chose=menu( 'choose',filname); 
name = char(filname(chose)); 
fid = fopen(name, 'r');
C = textscan(fid, '%s', 'delimiter', '');
C = regexprep(C{1}, '(\w+) (\w+) (\w+)', '$3 $2 $1');
fclose(fid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:29:40.910

为什么要使用循环？立即阅读这些行`textscan`并使用`regexprep`来操作单词：

```
fid = fopen(filename, 'r');
C = textscan(fid, '%s', 'delimiter', '');
C = regexprep(C{1}, '(\w+) (\w+) (\w+)', '$3 $2 $1')
fclose(fid); 
```

结果是一个元胞数组`C`，每个元胞存储一行。对于您的示例，您将获得一个 2×1 元胞数组：

```
C = 
    '15986 doughlas John'
    '357852 duch Filip' 
```

我不确定你想用它做什么，但如果你提供更多细节，我可以进一步改进我的答案。

希望这可以帮助！

# php - SESSION 没有延续到下一页

> ID：16015973
> 
> 赞同：0
> 
> 时间：2013-04-15T13:07:56.490
> 
> 标签：php, session

我的会话没有延续到下一页。但是，如果我将下一页放在表单的操作中，它确实会继续存在。虽然，如果我这样做，验证不起作用。

如何在不将下一页放在表单操作中的情况下进行验证？

**编辑**

对不起，只是指出。session_start 包含在头文件中。

```
/********Application Process********/
if (isset ($_POST['app_submit'])){

$errorMsg = "";  
     if(empty($_POST['app_name_first'])) { $errorMsg .= "<br/>First name is incomplete";}
     if(empty($_POST['app_name_last'])) {$errorMsg .= "<br/>Last name is incomplete";}

     if(empty($errorMsg)) {
        $_SESSION['firstname'] = preg_replace('#[^A-Za-z0-9]#i', '', $_POST['app_name_first']); // filter everything but letters and numbers
        $_SESSION['lasttname'] = preg_replace('#[^A-Za-z0-9]#i', '', $_POST['app_name_last']); // filter everything but letters and numbers

        header('Location:apply3.php');

   }

     else {
        $firstname ="";
        $lastname ="";      
        }

}    
/********End Application Process**********/ 
```

表格标题

```
<form action="" onsubmit="" method="POST" accept-charset="utf-8" enctype="application/x-www-form-urlencoded" id="infoform1" autocomplete="autocomplete" class="errorsUnder"> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:09:00.793

试着放

```
session_start() 
```

在文件的开头？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:15:45.690

session_start() 必须存在于每个文件中。

因此，如果您包含索引中的所有文件，则只需在此处定义一次。

但是，如果您打开新的独立文件，也必须在其中添加 session_start()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:11:29.017

添加`<?php session_start(); ?>`您的标题/配置本身。

# jquery - 单击另一个手风琴时关闭手风琴

> ID：16015976
> 
> 赞同：1
> 
> 时间：2013-04-15T13:08:02.627
> 
> 标签：jquery, html, css

写了这个 JQuery 手风琴，想在另一个被选中时关闭手风琴，我该怎么做......

```
$(function () {
    $("td.collapsable").find(".hidden").hide();
    $("table").click(function (event) {
        event.stopPropagation();
        var $target = $(event.target);
        if ($target.closest("td").attr("colspan") > 1) {
            $target.slideUp();
        } else {
            $target.closest("tr").next().find(".hidden").slideToggle();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:29:09.530

这是我做的一个快速的东西，我不知道它是否可以应用于你的情况，因为你没有向我们展示代码，但有人可能会觉得它有用。可以通过多种方式实现相同的效果，我选择了这样。

[**jsFiddle 示例在这里**](http://jsfiddle.net/3WsHX/14/)

```
$('span').click(function(){
    $(this).addClass('active');
    $(this).siblings('.level1').slideDown(200);
    $(this).parent('li').siblings('li').children('span').removeClass('active');
    $(this).parent('li').siblings('li').children('.level1').slideUp(200);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:47:56.447

看到这个： **[演示](http://jsfiddle.net/6Y6vf/1/)**

```
$(function () {
    $("td.collapsable").find(".hidden").hide();
    $("table").click(function (event) {
        event.stopPropagation();
        var $target = $(event.target).closest("tr").next().find("td.collapsable").find(".hidden");
        $("td.collapsable").find(".hidden:visible").not($target).slideUp();
        $target.slideToggle();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:52:35.310

只需将 a 添加`.toggler`到`TR`可点击的元素中：

`**[LIVE DEMO](http://jsfiddle.net/6Y6vf/3/)**`

```
$(function () {
    $("td.collapsable").find(".hidden").hide();
    $(".toggler").click(function(){
         var myHiddenEl = $(this).next('tr').find('.hidden');
         var toggAnim   = myHiddenEl.css("display")=='none' ? "slideDown" : "slideUp" ;
         $('.hidden').slideUp();
         myHiddenEl[toggAnim]();
    });
}); 
```

# applet - 如何在 Java 小程序中动态清除 JRE 缓存

> ID：16015979
> 
> 赞同：1
> 
> 时间：2013-04-15T13:08:24.260
> 
> 标签：applet, java

这是代码：

```
<applet code="ATest.class" archive="ATest.class?v=200406181300">
</applet> 
```

我想清除现有缓存并在第一次加载时加载新缓存。我该如何在 Java 小程序中执行？

我在 Firefox 0.9 中对其进行了测试，它加载并运行了该类。这里的想法是，当您更改类时，您会更改 ARCHIVE 属性中的 [v] 版本。这应该迫使浏览器获取类文件的新副本，因为“存档”现在位于不同的 URI，并且由于“存档”是 .class 文件，它可能会起作用（除非用户代理忽略 ARCHIVE是类，这是完全可能的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:19:55.453

I don't think the applet can so this.

But I don't think it needs to either. If the changing the `v` parameter to a different value isn't sufficient to get the browser to request a new copy of the class, then put it into a JAR file and arrange that the JAR file's name changes each time you want to deploy a fresh version.

* * *

I should note that forcing the browser to download a fresh copy of a class if it *hasn't* changed is a bad idea. It won't achieve anything useful. On the contrary, it will waste server and network resources, and it will make the page load slower.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:54:04.893

首先，阅读您的问题：为什么要更新 Applet，“当它第一次加载时”？如果您的意思是第二次，当插件尝试从自己的缓存中加载它时，不仅仅是使用新的代码库，也许每次访问/或使用一个新的代码库。

# android - 从字符串创建警报？

> ID：16015980
> 
> 赞同：0
> 
> 时间：2013-04-15T13:08:27.290
> 
> 标签：android, alarmmanager

我有一个生成随机时间的应用程序，然后将这些时间存储在单独的 TextViews 中。我可以使用 AlarmManager 为这些时间设置警报吗？我在这个站点上看到了其他代码，它们都显示了硬编码的警报时间。像这样的东西例如：

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.HOUR_OF_DAY,17);
cal.set(Calendar.MINUTE,30);
cal.set(Calendar.SECOND,0);
cal.set(Calendar.MILLISECOND,0); 
```

显然我不能这样做，因为我的时间是随机的。所以我的应用程序会生成几次，然后在每次旁边添加一个按钮，上面写着“设置警报”。用户也可以选择自己的时间，但这也是在字符串中。

如何让 String/TextView 用作设置闹钟的时间？如果它有助于时间以 24 小时格式显示。

感谢任何帮助！

编辑：这是我现在拥有的一部分。

```
DateTimeFormatter formatter = DateTimeFormat.forPattern("HH:mm");
userEnterTime = (userTime.toString(formatter));

Intent a = new Intent(this, Alarm.class);
a.putExtra("usertime", userEnterTime);  
startActivity(a); 
```

Activity 'a' 然后将其分配给 TextView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:10:57.567

您可以简单地解析字符串并在冒号处拆分它以获得小时和分钟，然后使用`Integer.parseInt()`将它们转换为整数，并将它们传递给`Calendar.set()`方法。

```
String yourTime = "hh:mm"; //replace with time

String arr = yourTime.split(":");

int hours = Integer.parseInt(arr[0]);
int mins = Integer.parseInt(arr[1]);

Calendar cal = Calendar.getInstance();
cal.set(Calendar.HOUR_OF_DAY, hours);
cal.set(Calendar.MINUTE, mins);
cal.set(Calendar.SECOND,0);
cal.set(Calendar.MILLISECOND,0); 
```

`try-catch`你应该在你做的时候添加一个`NumberFormatException`。

# php - 在 Zend Framework 2 中使用路由

> ID：16015983
> 
> 赞同：2
> 
> 时间：2013-04-15T13:08:29.093
> 
> 标签：php, zend-framework, zend-framework2, routes

我需要像在 zf1 中那样路由 url。

特别是我需要这些 url 将自动重定向到适当的操作，而无需每次都指定新路由。

```
/site/getData
/site/getData?param=5&par2=test
/site/getOther
... 
```

因此，分段路线不起作用，我尝试了文字路线，但无法找到可行的解决方案。

任何人都可以帮助我吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:23:55.770

这应该通过类似文档中提供的相当默认的分段路由来解决。

```
'type' => 'Zend\Mvc\Router\Http\Segment',
'options' => array(
    'route' => '/:controller[/:action]',
    'constraints' => array(
        'controller' => '[a-zA-Z][a-zA-Z0-9_-]+',
        'action'     => '[a-zA-Z][a-zA-Z0-9_-]+',
    ),
    'defaults' => array(
        'controller' => 'default-controller-alias',
        'action'     => 'index',
    ),
) 
```

现在，如果您设置控制器名称，如下所示：

```
'controllers' => array(
    'invokables' => array(
        'sites' => 'Namespace\Controller\SitesController',
        'other' => 'Namespace\Controller\OtherController' 
```

然后你应该能够准确地实现你想要的。要为您的路线创建参数，您只需正确使用 ViewHelper ;)

```
$this->url('routename', 
    array(
        'controller' => 'site',
        'action'     => 'getData'
    ), 
    array (
        'query' => array(
            'param1' => 'foo',
            'param2' => 'bar',
            'paramN' => 'baz',
        )
    )
) 
```

# ios - 如何在IOS中用横向图像填充背景？

> ID：16015988
> 
> 赞同：1
> 
> 时间：2013-04-15T13:08:46.907
> 
> 标签：ios, objective-c, cocoa-touch, orientation, uiimagepickercontroller

我正在做的是使用从 UIImagePickerController 返回的图像填充视图的背景。纵向模式下图像填充良好；但是，当在横向模式下填充为背景时，图像会重复，但我不知道为什么会发生这种情况。这是我用来调整图像大小的私有方法。

```
+ (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize landscape:(BOOL)landscape {
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

当调用此方法时，newsize 参数等于视图边界大小（self.view.bounds.size）。在视图转换为横向后访问大小，但图像不正确。

这是从 UIImagePickerController 获取图像后立即调用的代码。

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
    if (image.size.width > image.size.height) {
        self.view.transform = CGAffineTransformRotate(self.view.transform, M_PI_2);
        self.composition.landscapemode = YES;
    } else {
        self.composition.landscapemode = NO;
    }
    self.composition.image = [NewCompositionViewController imageWithImage:image scaledToSize:self.view.bounds.size landscape:self.composition.landscapemode];
    self.view.backgroundColor = [UIColor colorWithPatternImage:self.composition.image];
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:07:14.393

[[UIColor colorWithPatternImage:]](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIColor_Class/Reference/Reference.html#//apple_ref/occ/clm/UIColor/colorWithPatternImage%3a)用于平铺图像，因此它的行为应如此。

我建议使用屏幕大小的框架创建 UIImageView，为其设置图像，并将其添加为子视图：

```
UIImageView *backgroundImage = [[UIImageView alloc] initWithFrame:self.view.frame];
[backgroundImage setImage:self.composition.image];

// choose best mode that works for you
[backgroundImage setContentMode:UIViewContentModeScaleAspectFill];  

[self.view insertSubview:backgroundImage atIndex:0];
//OR
[self.view addSubview:backgroundImage];
[self.view sendSubviewToBack:backgroundImage]; 
```

添加后，您可以旋转它并尝试自动调整大小的蒙版，以确保它在所有方向上都正确显示。确切的方法取决于您是否使用自动布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:31:42.167

`UIViewContentModeScaleAspectFill`在这里可能比`UIViewContentModeScaleAspectFit`图像填充背景视图更合适。`AspectFit`将保持图像的纵横比并使整个图像适合空间，这可能会使部分视图透明。`AspectFill`也保持纵横比，但将填充整个视图并剪切与视图边界不匹配的图像的任何部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-20T00:10:18.113

通过结合一些 AVFoundation 和 UIKit API，我已经能够将“方面适合”的 UIImage 应用到 UIView 背景。这是一个例子：

```
UIImage *image = [UIImage imageWithContentsOfFile:self.desiredBackgroundImageFilePathString];

UIGraphicsBeginImageContext(self.drawingImage.frame.size);
[image drawInRect:AVMakeRectWithAspectRatioInsideRect(image.size, self.drawingImage.bounds)];
image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

self.drawingImage.backgroundColor = [UIColor colorWithPatternImage:image]; 
```

这需要几个简单但重要的步骤：

1.  从文件（或其他）生成 UIImage。
2.  使用 UIGraphicsBeginImageContext() 定义图像的上下文（背景所需的 UIView）。
3.  结合使用 drawInRect 和 AVMakeRectWithAspectRatioInsideRect 来缩放图像。为 AVMakeRect...() 提供图像的 .size 和目标 UIView 的边界。
4.  将调整大小的图像应用到所需的图像上下文。
5.  使用 colorWithPatternImage 将您现在调整大小的图像应用到目标 UIView 的 .backgroundColor。

我可以使用此代码交换具有横向和纵向纵横比的图像，而不会出现对齐或剪切问题。

# c# - VS2012 ANTLR Language Support 生成的解析器无法编译

> ID：16015989
> 
> 赞同：1
> 
> 时间：2013-04-15T13:08:49.910
> 
> 标签：c#, visual-studio-2012, antlr3

我将 VS2012 与 ANTLR 语言支持和 ANTLR C# 文件版本 3.5.0.2 一起使用来为词法分析器和解析器生成 C# 代码。

我的语法包含以下内容（此处仅给出部分）

```
options {
    language=CSharp3;
    TokenLabelType=CommonToken;
    output=AST;
    ASTLabelType=CommonTree;
    backtrack=true;
}

fieldExpression : a=FIELDNAME b=(atomicExpression) -> ^(FieldNode $a $b);

atomicExpression : PHRASE 
      | specialSynonym
      | NUMBER
      | LPARENTHESIS! notExpression RPARENTHESIS!;

specialSynonym  : 
        (CONSTITUTION OF INDIA)=>a=CONSTITUTION b=OF c=INDIA { a.Type = WORD; b.Type = WORD; c.Type = WORD; } -> ^(SpecialSynonymNode ^(SynonymNode $a $b $c) ^(SynonymNode {(object)adaptor.Create(WORD, "coi")} ))
      | (COI) => a=COI { a.Type = WORD; } -> ^(SpecialSynonymNode ^(SynonymNode {(object)adaptor.Create(WORD, "constitution")} {(object)adaptor.Create(WORD, "of")} {(object)adaptor.Create(WORD, "india")}) ^(SynonymNode $a)) 
```

当我生成 C# 代码时，我得到

```
private AstParserRuleReturnScope<CommonTree, CommonToken> fieldExpression()
    {
        EnterRule_fieldExpression();
        EnterRule("fieldExpression", 9);
        TraceIn("fieldExpression", 9);
        AstParserRuleReturnScope<CommonTree, CommonToken> retval = new AstParserRuleReturnScope<CommonTree, CommonToken>();
        retval.Start = (CommonToken)input.LT(1);

        CommonTree root_0 = default(CommonTree);

        CommonToken a = default(CommonToken);
        CommonToken b = default(CommonToken);

        CommonTree a_tree = default(CommonTree);
        CommonTree b_tree = default(CommonTree);
        RewriteRuleITokenStream stream_FIELDNAME=new RewriteRuleITokenStream(adaptor,"token FIELDNAME");
        RewriteRuleSubtreeStream stream_atomicExpression=new RewriteRuleSubtreeStream(adaptor,"rule atomicExpression");
        try { DebugEnterRule(GrammarFileName, "fieldExpression");
        DebugLocation(119, 72);
        try
        {
            // XmlParser\\AntlrParser\\LuceneSearchGrammar.g3:119:17: (a= FIELDNAME b= ( atomicExpression ) -> ^( FieldNode $a $b) )
            DebugEnterAlt(1);
            // XmlParser\\AntlrParser\\LuceneSearchGrammar.g3:119:19: a= FIELDNAME b= ( atomicExpression )
            {
            DebugLocation(119, 20);
            a=(CommonToken)Match(input,FIELDNAME,Follow._FIELDNAME_in_fieldExpression2198); if (state.failed) return retval; 
            if (state.backtracking == 0) stream_FIELDNAME.Add(a);

            DebugLocation(119, 32);
            // XmlParser\\AntlrParser\\LuceneSearchGrammar.g3:119:33: ( atomicExpression )
            DebugEnterAlt(1);
            // XmlParser\\AntlrParser\\LuceneSearchGrammar.g3:119:34: atomicExpression
            {
            DebugLocation(119, 34);
            PushFollow(Follow._atomicExpression_in_fieldExpression2203);
            b=atomicExpression();
            PopFollow();
            if (state.failed) return retval;
            if (state.backtracking == 0) stream_atomicExpression.Add(b.Tree);

            } 
```

和

```
private AstParserRuleReturnScope<CommonTree, CommonToken> atomicExpression()
{
    EnterRule_atomicExpression();
    EnterRule("atomicExpression", 10);
    TraceIn("atomicExpression", 10);
    AstParserRuleReturnScope<CommonTree, CommonToken> retval = new AstParserRuleReturnScope<CommonTree, CommonToken>();
    retval.Start = (CommonToken)input.LT(1); 
```

因此，我收到以下错误

```
Error   2   Cannot implicitly convert type 'Antlr.Runtime.AstParserRuleReturnScope<Antlr.Runtime.Tree.CommonTree,Antlr.Runtime.CommonToken>' to 'Antlr.Runtime.CommonToken' 
Error   3   'Antlr.Runtime.CommonToken' does not contain a definition for 'Tree' and no extension method 'Tree' accepting a first argument of type 'Antlr.Runtime.CommonToken' could be found (are you missing a using directive or an assembly reference?) 
```

您在解决此问题方面的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:59:30.470

问题在于你的语法：

```
b=(atomicExpression) 
```

此语法表示`b`保存匹配集合的结果，仅当括号中的值是标记（或标记集）时才有效。改用这个：

```
b=atomicExpression 
```

# iphone - 在 ios 中动态创建导航栏

> ID：16015992
> 
> 赞同：0
> 
> 时间：2013-04-15T13:08:57.607
> 
> 标签：iphone, ios, objective-c

这是我在项目中设置的静态导航栏，但想以动态方式进行，这是两种类型的代码......

```
viewsArray = [[NSArray alloc] init];
    AfterloginViewController *toolsnavigation = [[AfterloginViewController alloc] init];
    toolsnavigation.tabBarItem.image = [UIImage imageNamed:@"cool.png"];
    [toolsnavigation setTitle:@"Tools"];
    UINavigationController *nav0 = [[UINavigationController alloc] initWithRootViewController:toolsnavigation];

MapViewController *myridenavigation = [[MapViewController alloc] init];
    myridenavigation.tabBarItem.image = [UIImage imageNamed:@"cool.png"];
    [myridenavigation setTitle:@"Login"];
    UINavigationController *nav1 = [[UINavigationController alloc] initWithRootViewController:myridenavigation];

viewsArray = [NSArray arrayWithObjects:nav0,nav1,nav2,nav3,nav4,nav5,nav6,nav7,nav8, nil];

    tabbarController = [[UITabBarController alloc] init];
    [tabbarController setViewControllers:viewsArray];
    self.window.rootViewController = tabbarController; 
```

现在我从 URL 获取数据并希望将其分配为动态导航项。但我现在很困惑，不知道该怎么做。

```
NSString *loginstring = [NSString stringWithFormat:@"%@nvgationarray.php",mydomainurl];
    NSMutableData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: loginstring]];
    NSDictionary *allData = [NSJSONSerialization JSONObjectWithData:dataURL options:0 error:nil];

    int i = 0;
    for(NSDictionary *stat in allData)
    {
        NSString *ssprst = [stat objectForKey:@"tab_type"];
        NSString *ssprst1 = [stat objectForKey:@"tab_name"];
        NSString *ssprst2 = [stat objectForKey:@"tab_id"];
        NSString *ssprst3 = [stat objectForKey:@"icon"];
        NSLog(@"all data ===== :::: %@ %@ %@ %@",ssprst,ssprst1,ssprst2,ssprst3);
        NSLog(@"++++++++++++++++++++++++++++++++++++++++++++++");

        AbcViewController *myridenavigation = [[AbcViewController alloc] init];
        myridenavigation.tabBarItem.image = [UIImage imageNamed:@"cool.png"];
        [myridenavigation setTitle:@"Login"];
        UINavigationController *nav1 = [[UINavigationController alloc] initWithRootViewController:myridenavigation];
        i++;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:31:25.150

if you want to retain memory `UINavigationController` . I suggest you hold it in `NSMutableArray`.

In header file

```
@property(nonatomic, strong) NSMutableArray* arrayNavigationCont; 
```

In implementation file

```
@synthesize arrayNavigationCont = _arrayNavigationCont; 
```

do not forget also to init array in somewhere relevant like `viewDidLoad`

```
self.arrayNavigationCont = [[NSMutableArray alloc] init]; 
```

In your method ...

```
for(NSDictionary *stat in allData)
{
        ...
        AbcViewController *myridenavigation = [[AbcViewController alloc] init];
        myridenavigation.tabBarItem.image = [UIImage imageNamed:@"cool.png"];
        [myridenavigation setTitle:@"Login"];
        UINavigationController *nav1 = [[UINavigationController alloc] initWithRootViewController:myridenavigation];
        [self.arrayNavigationCont addObject:nav1]
        i++;

} 
```

Later you can access you navigationConts somewhere again

```
for(int i = 0; i < [self.arrayNavigationCont count]; i++)
{
    UINavigationController *nav1 = [self.arrayNavigationCont objectAtIndex:i];
    //do sth with nav1 to your like
} 
```

# android - 我们如何为android编写参数化测试用例

> ID：16015994
> 
> 赞同：1
> 
> 时间：2013-04-15T13:08:59.470
> 
> 标签：android, parameterized, android-testing

作为对 Java JUnit 文档的参考... [http://junit.sourceforge.net/javadoc/org/junit/runners/Parameterized.html](http://junit.sourceforge.net/javadoc/org/junit/runners/Parameterized.html)

我试图在android中实现相同的功能，但没有奏效。我还继承了具有不同类的测试类，如“TestSuit”、“InstrumentationTestCase”、“AndoirdTestCase”，但无法实现参数化功能。具体来说，我想实现参数化类，它应该继承自“InstrumentationTestCase”

android 是否支持 @RunWith(Parameterized.class) ？

# windows-phone-7 - 新手，模拟器不工作

> ID：16015998
> 
> 赞同：0
> 
> 时间：2013-04-15T13:09:05.767
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-7.1, windows-phone

我完全是 Windows 手机应用程序开发的新手。

我按照本[教程](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402526%28v=vs.105%29.aspx)开发了我的第一个 Windows Phone 应用程序。当我准备好运行我的第一个应用程序时，我在 Visual Studio 2010 的顶部工具栏上选择了**调试->开始调试，但我得到了以下对话框：**

![在此处输入图像描述](https://i.stack.imgur.com/RxaUo.png)

它抱怨我的工作机器（联想 W510）没有图形处理单元。如果我想在模拟器上运行我的应用程序，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:17:27.033

单击“是”时，无论如何它都应该启动模拟器，但功能有限。（没有广泛的3D，类似的东西）

如果它*没有*成功启动模拟器，那么您将不得不找到一个具有更好图形功能的系统。但是，考虑到 W510 运行的是 nVidia Quadro FX 880M，我很确定它应该能够很好地运行模拟器。你检查过你的GPU驱动程序了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:00:22.640

我在旧机器上遇到了与 SDK 完全相同的问题。对于模拟器需要的 Silverlight 项目中的 XNA 和其他平滑效果/过渡`Windows Phone Emulator requires a DirectX 10 or above capable graphics card with a WDDM 1.1 driver`。

我遇到的问题是我的显卡（一些集成的 Intel）没有 WDDM 1.1 驱动程序。在这种情况下，如果您正在寻找开发 XNA 项目，仅有的两个解决方案是

*   升级你的显卡
*   或购买可以测试的真实设备。