# StackOverflow 问答 15273000-15273999

# c# - ajax 面板内的按钮在 Google chrome 和 yandex 以及 IE 中不起作用

> ID：15273005
> 
> 赞同：0
> 
> 时间：2013-03-07T13:54:45.697
> 
> 标签：c#, asp.net, browser, updatepanel

Ajax 更新面板内的按钮单击在 Chrome 和 IE 中不起作用，但在 Firefox 中起作用。我在此链接中添加文件。任何人都可以帮助我吗？我会很高兴的。谢谢 [我的代码地址](https://sites.google.com/site/codecodeup/code)- [错误屏幕图片](https://sites.google.com/site/codecodeup/code/cart.aspx.png?attredirects=0&d=1)

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <table id="TblMain" cellspacing="0" cellpadding="0" width="100%" border="0">
                    <tr>
                        <td align="left">
                            <div class="module_box">
                                <asp:HyperLink ID="lnkUseCoupons" CssClass="lightbox addbutton" runat="server" NavigateUrl="/store/addcoupon.aspx"><%=GetGlobalResourceObject("lang", "AddCoupon")%></asp:HyperLink>
                                <div class="clear">
                                </div>
                                <asp:Label ID="lblCouponInfo" runat="server" EnableViewState="False"></asp:Label>
                                <asp:LinkButton ID="btnDeleteCoupon" runat="server" CssClass="deletebutton" Visible="False"><%=GetGlobalResourceObject("lang", "Delete")%></asp:LinkButton>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td id="SepetlerContainer" runat="server">
                            <div class="module_box">
                                <label class="subtitle">
                                    <%=GetGlobalResourceObject("lang", "Carts")%></label>
                                <table cellpadding="1" cellspacing="0" border="0" width="100%">
                                    <tr>
                                        <td colspan="2">
                                            <div id="transferalert" visible="false" runat="server" class="alert">
                                                <%=GetGlobalResourceObject("lang", "CartMsg5")%></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="left">
                                            <table id="TblSepetler" cellspacing="0" cellpadding="0" width="100%" border="0" runat="server">
                                                <tr>
                                                    <td>
                                                        <%=GetGlobalResourceObject("lang", "SelectCart")%>
                                                        <asp:DropDownList ID="ddlSepet" runat="server" DataTextField="CartType" DataValueField="ShoppingCartDefId"
                                                            AutoPostBack="True">
                                                        </asp:DropDownList>
                                                        <asp:HyperLink ID="lnkaddnew" CssClass="addbutton lightbox" runat="server"><%=GetGlobalResourceObject("lang", "AddNew")%></asp:HyperLink>
                                                        <asp:HyperLink ID="lnkEdit" CssClass="editbutton lightbox" runat="server"><%=GetGlobalResourceObject("lang", "Edit")%></asp:HyperLink>
                                                        <asp:LinkButton ID="lnkDeleteCart" CssClass="deletebutton" runat="server"><%=GetGlobalResourceObject("lang", "Delete")%></asp:LinkButton>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                        <td align="right">
                                            <table id="TblTransfer" runat="server">
                                                <tr>
                                                    <td>
                                                        <asp:Label ID="lblTr" runat="server"><%=GetGlobalResourceObject("lang", "SelectTargetCart")%></asp:Label>
                                                        <asp:DropDownList ID="ddlTransferSepet" runat="server" DataTextField="CartType" DataValueField="ShoppingCartDefId"
                                                            AutoPostBack="True">
                                                        </asp:DropDownList>
                                                        <asp:LinkButton ID="lnkTransfer" CssClass="transferbutton" runat="server"><%=GetGlobalResourceObject("lang", "TransferToCart")%></asp:LinkButton>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td id="SepetContainer" runat="server">
                            <div class="module_box">
                                <label>
                                    <asp:Label ID="lblKampanya0" runat="server"></asp:Label></label>
                                <table id="TblSepet" cellspacing="0" cellpadding="2" width="100%" border="0">
                                    <tr>
                                        <td>
                                            <asp:DataGrid ID="DataGrid0" runat="server" Width="100%" AutoGenerateColumns="False"
                                                CellPadding="4" DataKeyField="Qty" CssClass="datalist" HeaderStyle-CssClass="title"
                                                GridLines="none" ItemStyle-CssClass="row">
                                                <Columns>
                                                    <asp:TemplateColumn Visible="False">
                                                        <ItemTemplate>
                                                            <asp:Label ID="ProductId" runat="server" Visible="False" Text='<%# Eval("ProductId") %>'> </asp:Label>
                                                            <asp:Label ID="RecordId" runat="server" Visible="False" Text='<%# Eval("RecordId") %>'> </asp:Label>
                                                        </ItemTemplate>
                                                        <HeaderStyle Width="0px"></HeaderStyle>
                                                    </asp:TemplateColumn>
                                                    <asp:TemplateColumn HeaderText="<%$ Resources:lang, ProductCode%>" Visible="False">
                                                        <ItemTemplate>
                                                            <asp:HyperLink ID="Hyperlink2" runat="server" Text='<%# Eval("ProductCode")  %>'
                                                                NavigateUrl='<%# String.Format(BaseUrl2() + "{0}" + ".aspx",Eval("Url").ToString().Remove(Eval("Url").ToString().Length - 1, 1)) %>'> </asp:HyperLink>
                                                        </ItemTemplate>
                                                    </asp:TemplateColumn>
                                                    <asp:TemplateColumn ItemStyle-Width="80px" HeaderText="<%$ Resources:lang, ProductImage%>"
                                                        HeaderStyle-HorizontalAlign="Center">
                                                        <ItemStyle HorizontalAlign="Center" />
                                                        <ItemTemplate>
                                                            <img alt="" class="thumb" src='<%# "/store/makethumb.aspx?file=" + Eval("Path") + "&intSize=50" %>' />
                                                        </ItemTemplate>
                                                    </asp:TemplateColumn>
                                                    <asp:TemplateColumn HeaderText="<%$ Resources:lang, ProductName%>">
                                                        <ItemTemplate>
                                                            <itemstyle wrap="False"></itemstyle>
                                                            <asp:HyperLink ID="Hyperlink7" runat="server" Text='<%# Eval("ProductName") %>'
                                                                NavigateUrl='<%# string.Format(BaseUrl2() + "{0}" + ".aspx",Eval("Url").ToString().Remove(Eval("Url").ToString().Length - 1, 1)) %>'> </asp:HyperLink>
                                                            <asp:Label ID="Hy7a" runat="server" Text='<%# Eval("Description").ToString().Replace(",","</br>")  %>'></asp:Label>
                                                            <asp:HyperLink ID="Hyperlink1a6" Visible='<%# visible1(Eval("ProductId"))%>'
                                                                runat="server" NavigateUrl='<%# linkgen1() %> '> </asp:HyperLink>
                                                        </ItemTemplate>
                                                    </asp:TemplateColumn>
                                                    <asp:TemplateColumn HeaderText="<%$ Resources:lang, Point%>">
                                                        <ItemTemplate>
                                                            <itemstyle wrap="False"></itemstyle>
                                                            <asp:Label ID="lblPuan" runat="server"> </asp:Label>
                                                        </ItemTemplate>
                                                    </asp:TemplateColumn>
                                                    <asp:TemplateColumn HeaderText="<%$ Resources:lang, Quantity%>">
                                                        <ItemStyle Wrap="False" Width="120" HorizontalAlign="left"></ItemStyle>
                                                        <ItemTemplate>
                                                            <asp:TextBox ID="Quantity" Enabled='<%# Interaction.IIf(Eval("ProductId").ToString().intyap() == tmpOrder.Campain.ProductId & tmpOrder.Campain.DiscountType == 2, false, true)%>'
                                                                runat="server" Text='<%# Eval("Qty") %>' MaxLength="4"
                                                                Columns="4"> </asp:TextBox>
                                                            &nbsp;<asp:Label ID="UnitId" runat="server" Visible="False" Text='<%# Eval("UnitId") %>'> </asp:Label>
                                                            <asp:Label runat="server" Text='<%# Eval("BirimAdi") %>' ID="Label18"> </asp:Label>
                                                        </ItemTemplate>
                                                        <HeaderStyle Wrap="False" HorizontalAlign="center"></HeaderStyle>
                                                    </asp:TemplateColumn>
                                                    <asp:TemplateColumn HeaderText="<%$ Resources:lang, QtyPrice%>">
                                                        <ItemStyle Wrap="False" HorizontalAlign="Right"></ItemStyle>
                                                        <ItemTemplate>
                                                            <asp:Label runat="server" Text='<%# deger001(Convert.ToDecimal(Eval("Rate").ToString()),Convert.ToDecimal(Eval("Indirim").ToString()),Convert.ToDecimal(Eval("SatisFiyati").ToString()),Convert.ToDecimal(Eval("ValueAdd").ToString()),Convert.ToDecimal(Eval("qty").ToString()),Convert.ToInt32(Eval("ProductId").ToString()))%>'
                                                                ID="Label9" name="Label9"> </asp:Label>
                                                        </ItemTemplate>
                                                        <HeaderStyle Wrap="False" HorizontalAlign="Right"></HeaderStyle>
                                                    </asp:TemplateColumn>
                                                    <asp:BoundColumn DataField="KdvRate" DataFormatString="%{0:0}" HeaderText="<%$ Resources:lang, TaxRate%>">
                                                        <ItemStyle Wrap="False" HorizontalAlign="Right"></ItemStyle>
                                                        <HeaderStyle Wrap="False" HorizontalAlign="Right"></HeaderStyle>
                                                    </asp:BoundColumn>
                                                    <asp:TemplateColumn HeaderText="<%$ Resources:lang, PiceWithoutTax%>">
                                                        <ItemStyle Wrap="False" HorizontalAlign="Right"></ItemStyle>
                                                        <ItemTemplate>
                                                            <asp:Label ID="Label12" runat="server" Text='<%# deger002(Convert.ToDecimal(Eval("Rate").ToString()),Convert.ToDecimal(Eval("Indirim").ToString()),Convert.ToDecimal(Eval("SatisFiyati").ToString()),Convert.ToDecimal(Eval("ValueAdd").ToString()),Convert.ToDecimal(Eval("qty").ToString()),Convert.ToInt32(Eval("ProductId").ToString())) %>'> </asp:Label>
                                                        </ItemTemplate>
                                                        <HeaderStyle Wrap="False" HorizontalAlign="Right"></HeaderStyle>
                                                    </asp:TemplateColumn>
                                                    <asp:TemplateColumn HeaderText="<%$ Resources:lang, Selection%>">
                                                        <ItemStyle HorizontalAlign="Justify"></ItemStyle>
                                                        <ItemTemplate>
                                                            <center>
                                                                <asp:CheckBox ID="Remove" runat="server"></asp:CheckBox>
                                                            </center>
                                                        </ItemTemplate>
                                                        <HeaderStyle Wrap="False"></HeaderStyle>
                                                    </asp:TemplateColumn>
                                                    <asp:BoundColumn DataField="Barcode" HeaderText="<%$ Resources:lang, Barcode%>" Visible="false">
                                                    </asp:BoundColumn>
                                                </Columns>
                                            </asp:DataGrid>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div id="stokalert" visible="false" runat="server" class="alert">
                                                <asp:Label ID="lblStokError" runat="Server" EnableViewState="False"></asp:Label></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="right">
                                            <asp:LinkButton ID="lnkUpdate" runat="server" CssClass="savebutton"><%= GetGlobalResourceObject("lang", "Update")%></asp:LinkButton>
                                            <asp:LinkButton ID="lnkDelete" runat="server" CssClass="deletebutton"><%= GetGlobalResourceObject("lang", "Delete")%></asp:LinkButton>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <table cellpadding="0" cellspacing="0" border="0" width="100%">
                                                <tr>
                                                    <td align="left">
                                                        <asp:DataList ID="dlCargoList" runat="server" RepeatDirection="vertical">
                                                            <HeaderTemplate>
                                                                <b>
                                                                   <%=GetGlobalResourceObject("lang", "ShippingPrice")%></b></HeaderTemplate>
                                                            <ItemTemplate>
                                                                <asp:Label ID="lblCargoName" runat="server" Text='<%# Eval("CargoName") %>'></asp:Label>:
                                                                <asp:Label ID="lblCargoText" runat="server" Text='<%# publicItems.CurrencySymbolLeft + " " + publicItems.formatCurDoviz(Convert.ToDecimal(Eval("CargoPrice").ToString()) * (publicItems.DefaultCurrencyRate /publicItems. CurrencyRate))+ " " + publicItems.CurrencySymbolRight %>'></asp:Label>
                                                            </ItemTemplate>
                                                        </asp:DataList>
                                                    </td>
                                                    <td align="right">
                                                        <table id="tblfy" cellspacing="0" cellpadding="2" border="0" runat="server">
                                                            <tr>
                                                                <td align="right">
                                                                    <asp:Label ID="lblAgirlik" runat="server" Visible="False"><%=GetGlobalResourceObject("lang", "TotalHeight")%>:</asp:Label>
                                                                </td>
                                                                <td align="right">
                                                                    <asp:Label ID="lblToplamAgirlik" runat="server" Visible="False"></asp:Label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right">
                                                                    <asp:Label ID="lblHacim" runat="server" Visible="False"><%=GetGlobalResourceObject("lang", "TotalVolume")%>:</asp:Label>
                                                                </td>
                                                                <td align="right">
                                                                    <asp:Label ID="lblToplamHacim" runat="server" Visible="False"></asp:Label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right">
                                                                    <asp:Label ID="lblIndirim" runat="server" Visible="False"><%=GetGlobalResourceObject("lang", "TotalDiscount")%>:</asp:Label>
                                                                </td>
                                                                <td align="right">
                                                                    <asp:Label ID="lblToplamIndirim" runat="server" Visible="False"></asp:Label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right">
                                                                    <asp:Label ID="Label2" runat="server"><%=GetGlobalResourceObject("lang", "TotalProductsPrice")%>:</asp:Label>
                                                                </td>
                                                                <td align="right">
                                                                    <asp:Label ID="lblToplamTutar" runat="server"></asp:Label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right">
                                                                    <asp:Label ID="Label6" runat="server"><%=GetGlobalResourceObject("lang", "TotalTax")%>:</asp:Label>
                                                                </td>
                                                                <td align="right">
                                                                    <asp:Label ID="lblToplamKdv" runat="server"></asp:Label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right">
                                                                    <asp:Label ID="lblAraToplam" runat="server"><%=GetGlobalResourceObject("lang", "SubTotal")%>:</asp:Label>
                                                                </td>
                                                                <td align="right">
                                                                    <asp:Label ID="lblToplamAraToplam" runat="server"></asp:Label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right">
                                                                    <asp:Label ID="lblCekTutari" runat="server" Visible="False"><%=GetGlobalResourceObject("lang", "CouponDiscount")%>:</asp:Label>
                                                                </td>
                                                                <td align="right">
                                                                    <asp:Label ID="lblToplamCekTutari" runat="server" Visible="False"></asp:Label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right" colspan="2">
                                                                    <asp:Label ID="lblSepetSeperator1" runat="server"></asp:Label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right">
                                                                    <asp:Label ID="Label7" runat="server"><%=GetGlobalResourceObject("lang", "TotalWithTax")%>:</asp:Label>
                                                                </td>
                                                                <td align="right">
                                                                    <asp:Label ID="lblKdvDahilToplam" runat="server"></asp:Label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right">
                                                                    <asp:Label ID="lblHavale" runat="server"><%=GetGlobalResourceObject("lang", "TotalWithTransfer")%>:</asp:Label>
                                                                </td>
                                                                <td align="right">
                                                                    <asp:Label ID="lblKdvDahilHavale" runat="server"></asp:Label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right">
                                                                    <asp:Label ID="lblKKTek" runat="server"><%=GetGlobalResourceObject("lang", "TotalWithCreditCart")%>:</asp:Label>
                                                                </td>
                                                                <td align="right">
                                                                    <asp:Label ID="lblKdvDahilKK" runat="server"></asp:Label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right" colspan="2">
                                                                    <asp:Label ID="lblSepetSeperator2" runat="server"></asp:Label>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td align="right">
                            <table id="Table6" cellspacing="0" cellpadding="0" width="100%" border="0">
                                <tr>
                                    <td id="Td7" runat="server">
                                    </td>
                                    <td id="Td8" runat="server">
                                    </td>
                                    <td id="Td9" runat="server">
                                    </td>
                                </tr>
                            </table>
                            <table cellpadding="0">
                                <tr>
                                    <td>
                                        <asp:LinkButton ID="btnMailOrder" CssClass="button" runat="server" Visible="False"><%=GetGlobalResourceObject("lang", "Buy")%></asp:LinkButton>
                                    </td>
                                    <td>

                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div id="cartalert" visible="false" runat="server" class="alert">
                                <asp:Label ID="lblcartError" runat="Server" EnableViewState="False"></asp:Label></div>
                        </td>
                    </tr>
                </table>
            </ContentTemplate>

        </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:44:34.347

为什么要在后面的代码中附加事件？尝试更改此行：

```
<asp:LinkButton ID="lnkDeleteCart" CssClass="deletebutton" runat="server"><%=GetGlobalResourceObject("lang", "Delete")%></asp:LinkButton> 
```

对此：

```
<asp:LinkButton ID="lnkDeleteCart" CssClass="deletebutton" runat="server" OnClick="lnkDelete_Click"><%=GetGlobalResourceObject("lang", "Delete")%></asp:LinkButton> 
```

并在您的代码隐藏中注释这些行：

```
EventHandler handler = new EventHandler(this.lnkDelete_Click);

            if (this.lnkDelete != null)
            {
                this.lnkDelete.Click -= handler;
            }

            if (this.lnkDelete != null)
            {
                this.lnkDelete.Click += handler;
            } 
```

我只在删除按钮上进行了更改，您可能也需要更改其他按钮...

# reporting-services - SSRS 和 pentaho 替代方案

> ID：15273006
> 
> 赞同：0
> 
> 时间：2013-03-07T13:54:51.807
> 
> 标签：reporting-services, ssrs-2008, pentaho

我正在使用 Microsoft Reporting Services 为用户提供自定义报告。我在商业智能工作室中创建它们，部署它们并拥有一个用户可以查看这些报告的网站。
现在我需要我的新工具来做几乎相同的事情。我需要创建报告，用户必须能够在 PC、Mac、手机、平板电脑等中查看它们。Microsoft Reporting Services 在 Android 和 iOS 上存在一些问题，这就是我的问题。用户不能滚动报告（如果它比报告查看器窗口长），扩展并不总是有效等等。
我需要一个工具来创建相同的报告并允许在任何地方查看它们。我在考虑pentaho，但这并不是我所需要的。也许有人有任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:05:25.477

我没用过pentaho。但是，我知道 Web 查看器控件中的任何限制都基于浏览器的支持和解释。解决这些限制的一种方法是在您的项目中引用 reportexecution2005 接口，并以 HTML40 格式调用[Render方法并在设备上下文标题中指定](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render.aspx)[HTMLFragment](http://msdn.microsoft.com/en-us/library/ms155395.aspx)，这会将报告 html 内容作为字节 [] 返回。但是，任何自定义分页/打印/缩放都必须在您的网络应用程序中重新实现:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:00:51.993

Pentaho 的分析器工具在平板电脑/移动设备上很不错，但不幸的是它只是 EE，而不是社区/开源。

如果您对企业感到满意，另一个选择是黄鳍金枪鱼？

或者，使用 Pentaho 的社区版，您可以使用 CTools，并且有一个非常好的仪表板框架，明确支持移动设备 - 可能值得一看吗？

为什么 pentaho “不正是你所需要的”？你认为它有什么问题？

# javascript - 在设计模式下将光标动态设置为 div

> ID：15273008
> 
> 赞同：0
> 
> 时间：2013-03-07T13:54:54.263
> 
> 标签：javascript, html, textbox

我在文本框中有这个文本。文档正文将 designMode 设置为 on。（| 是光标）

```
<div><h3>Hi there</h3><p>Welcome| to the page</p></div> 
```

单击按钮后，文本将写入 div 的 innerHTML。

**问题：**从文本框中的光标位置，我可以将光标设置到 DOM 中的相同位置吗？

* * *

## 你好呀

欢迎| 到页面

* * *

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:52:09.917

取决于你想这样做有多糟糕。我能想到的最接近的方法是`span`在文本框中设置光标位置，然后将光标设置到该位置`span`。

*   使用[jQuery Caret](http://www.examplet.buss.hk/jquery/caret.php)获取光标在文本框中的位置并将其保存在变量中（Caret 用于`$.browser`获取从 jQuery 1.9.1 及更高版本中删除并移入单独插件的浏览器信息。所以你需要使用最新的 1.8)
*   在按钮上单击`<span id='cur-pos'></span>`在字符串索引处插入（通过插入符号存储的值）
*   更新 html 后，获取 span 的位置并将光标移动到该位置。

# sql-server - 使用 SQL Server 和实体框架时如何在 C# 类中定义 RowVersion

> ID：15273011
> 
> 赞同：4
> 
> 时间：2013-03-07T13:55:13.440
> 
> 标签：sql-server, asp.net-mvc, entity-framework

我创建了一个 SQL 表和一个 EF Fluent 映射，如下所示：

```
CREATE TABLE [dbo].[Application] (
    [ApplicationId]   INT            IDENTITY (1, 1) NOT NULL,
    [Name] NVARCHAR (50) Not NULL,
    [DataVersion] ROWVERSION,
    CONSTRAINT [PK_dbo.Application] PRIMARY KEY CLUSTERED ([ApplicationId] ASC)
); 
```

我的 EF Fluent API 如下所示：

```
public class ApplicationConfiguration : EntityTypeConfiguration<Application>
    {
        public ApplicationConfiguration()
        {
            Property(a => a.Name)
                .IsRequired()
                .HasMaxLength(35);

            Property(p => p.RowVersion).IsRowVersion();

        }
    } 
```

我的班级看起来像这样：

```
public class Application
{
    public int ApplicationId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<TestAccount> TestAccounts { get; set; }
    xxxxxxx
} 
```

有人可以告诉我如何在课堂上定义 RowVersion 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:49:22.330

这对我有用 - 我正在使用 EF4：

```
public class Application
{
    public int ApplicationId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<TestAccount> TestAccounts { get; set; }

    public virtual byte[] RowVersion { get; set; }
} 
```

映射：

```
public class ApplicationConfiguration : EntityTypeConfiguration<Application>
{
    public ApplicationConfiguration()
    {
        Property(a => a.Name)
            .IsRequired()
            .HasMaxLength(35);

        Property(p => p.RowVersion).HasColumnName("DataVersion").IsRowVersion();
    }
} 
```

PS：我的数据库列的数据类型是**时间戳**（我使用的是 SQL Server 2005）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:43:08.007

我想这是

```
public class Application
{
    public int ApplicationId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<TestAccount> TestAccounts { get; set; }
    public virtual byte[] DataVersion { get; set; }
} 
```

# java - 尝试字符串到日期解析时出现 ParseException

> ID：15273025
> 
> 赞同：0
> 
> 时间：2013-03-07T13:55:42.020
> 
> 标签：java, android, date, timezone

我正在尝试将此日期转换为 2013-03-04T12:08:52.74+08:00

```
formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
Date date = formatter.parse(dateresult); 
```

但它以一个例外结束

```
03-07 19:17:05.493: W/System.err(2006): java.text.ParseException: Unparseable date: "2013-03-04T12:08:52.74+08:00" (at offset 19) 
```

我试过[这个](https://stackoverflow.com/q/7669817/1667903)。但是发生了同样的异常。有谁知道另一种（可能更好）的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:09:06.617

您可以使用 joda-time。它支持ISO8601标准。

[乔达时间手册](http://joda-time.sourceforge.net/userguide.html#Working_with_DateTime)

样本：

```
DateTime dt = new DateTime("2013-03-04T12:08:52.74+08:00");
System.out.println(dt.toString());
DateTimeFormatter fmt = ISODateTimeFormat.dateTime();
System.out.println(
        fmt.parseDateTime("2013-03-04T12:08:52.74+08:00")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:06:27.947

除了您错过了 baraky 指出的毫秒数之外，在使用 Java 解析日期时，您还会遇到 ISO-8601 时区问题。在[这个问题](https://stackoverflow.com/questions/2201925/converting-iso8601-compliant-string-to-java-util-date "这个问题")中得到了解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:08:45.627

此外，除了@baraky 的回答，您输入日期的时区格式不符合您的格式字符串的规范。您的格式字符串具有“Z”（文字字母 Z）。您的输入字符串似乎具有 X 格式。因此您可能希望使用：

`formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSX");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:01:03.347

利用：

```
formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SS'Z'"); 
```

包括毫秒 (.74)

# c# - 丰富我的图书馆优化

> ID：15273026
> 
> 赞同：0
> 
> 时间：2013-03-07T13:55:42.140
> 
> 标签：c#, scala, optimization, extension-methods, enrich-my-library

免责声明：我从 C# 来到 Scala，我非常欣赏 LINQ。因此，我立即对迭代器和序列感到宾至如归。我错过了产量“C#风格”，但我能够用延续来自己做饭……即使它会付出性能损失。

现在，当我在 C# 中遗漏某些方法而不是集合时，我只是将其定义为扩展方法，并且编译器在有效处理代码方面做得非常好。在 Scala 中，我使用~~Pimp~~丰富我的库方法，但我有点担心性能。

然而，与我的“产量迭代器”相反，这是一种公认​​的常见模式。Scala 编译器是否对其进行了优化，删除了临时对象的创建？

```
class RichFoo(f: Foo) {
  def baz = f.bar()
  def baz2 = f.bar() * 2
}
object RichFoo {
  implicit def foo2Rich(f: Foo) = new RichFoo(f)
}

// on the caller side
val f : Foo = ....
f.baz
f.baz2
// this translates, literally, to new RichFoo(f).baz, new RichFoo(f).baz2 
```

如果不是，为什么？对我来说，这看起来是一个很好且安全的优化。我可以向正确的方向“提示”或“强制”编译器吗？有哪些更快的替代方案？

我想将该模式用于我的迭代器/可迭代算法集合，因此我可以将它们写为过滤器/映射/等`collection.baz(lambda).bar(lambda2)`，但我担心它会被证明太“重”。（与更高效/直接但丑陋的相比`bar(lambda2, baz(lambda, collection)`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:01:59.740

正如@om-nom-nom 评论，这里的解决方案（在 2.10 中）是使用隐式值类。

```
implicit class RichFoo(val f : Foo) extends AnyVal {
  def baz = f.bar()
  def bax = f.bar()
} 
```

`RichFoo`现在在编译时存在，但在运行时它被优化为静态方法调用，因此不会造成性能损失。

请参阅[值类 (SIP)](http://docs.scala-lang.org/sips/pending/value-classes.html)

另请参阅 Mark Harrah 的[Value Classes 简介，](http://docs.scala-lang.org/overviews/core/value-classes.html)它从使用的角度给出了很好的概述。

# php - PHP 对象作为属性

> ID：15273033
> 
> 赞同：0
> 
> 时间：2013-03-07T13:55:53.090
> 
> 标签：php, object

图片我想要一个对象 $parent;

例如：

```
 $parent->firstname = "Firstname";
    $parent->lastname = "Lastname";
    $parent->children = ??? 
```

-> 这必须是对象的集合，以便稍后我可以这样做：

```
 foreach ($parent->children as $child) { 
      $child->firstname
      $child->lastname
    } 
```

这是可能的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:01:14.220

是的，有可能，例如，如果您让孩子成为[`array`](http://php.net/arrays).

这只是示例，这不是最佳解决方案：

```
class person
{
    public $firstname = 'Jane';
    public $lastname  = 'Doe';
    public $children  = array();
}

$parent = new person();
$parent->firstname = "Firstname";
$parent->lastname  = "Lastname";

//1st child
$child = new person(); 
$child->firstname = 'aa';
$parent->children[]  = $child;

//2nd child
$child = new person(); 
$child->firstname = 'bb';
$parent->children[]  = $child;        

foreach ($parent->children as $child) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:54:20.660

这有点取决于你想要什么。由于您的类型只是属性对象，我认为[Vahe Shadunts](https://stackoverflow.com/a/15273138/367456)的解决方案是最轻量级和最简单的。

如果您想在 PHP 中获得更多控制权，您需要使用 getter 和 setter。这将允许您使其工作更具体。

就[`foreach`^(*Docs*)](http://php.net/foreach)而言，您的孩子对象需要做的就是实现`Iterator`or`IteratorAggregate`接口，然后可以在内部使用它`foreach`（参见[*Object Iteration ^(Docs)*](http://www.php.net/language.oop5.iterations.php)）。

这是一个例子：

```
$jane = ConcretePerson::build('Jane', 'Lovelock');

$janesChildren = $jane->getChildren();
$janesChildren->attachPerson(ConcretePerson::build('Clara'));
$janesChildren->attachPerson(ConcretePerson::build('Alexis'));
$janesChildren->attachPerson(ConcretePerson::build('Peter'));
$janesChildren->attachPerson(ConcretePerson::build('Shanti'));

printf(
    "%s %s has the following children (%d):\n",
    $jane->getFirstname(),
    $jane->getLastname(),
    count($jane->getChildren())
);

foreach($janesChildren as $oneOfJanesChildren)
{
    echo ' - ', $oneOfJanesChildren->getFirstname(), "\n";
} 
```

输出：

```
Jane Lovelock has the following children (4):
 - Clara
 - Alexis
 - Peter
 - Shanti 
```

如果您需要更多功能（例如随着时间的推移），这些在后台工作的命名接口和对象（我在最后链接代码）与数组和属性相比具有一定的优势。

假设 Jane 和 Janet 结婚了，所以他们都拥有相同的孩子，所以都分享他们：

```
$janet = ConcretePerson::build('Janet', 'Peach');
$janet->setChildren($janesChildren); 
```

现在珍妮特有了一个新孩子：

```
$janet->getChildren()->attachPerson(ConcretePerson::build('Feli')); 
```

Jane 也是如此，因为它们共享相同的子对象。

然而 PHP 对这些类型化的集合并不强大，因此你有相当多的样板代码来完成这项工作。

[代码要点](https://gist.github.com/hakre/5108555)

# php - 在回显之前无法检索 php 变量

> ID：15273038
> 
> 赞同：-2
> 
> 时间：2013-03-07T13:56:05.213
> 
> 标签：php, variables, echo

我最近在我的代码中遇到了一个奇怪的问题。我需要检查 if 语句中的变量值，但它总是失败，值是（假），在回显值后一切正常。

示例（我不记得确切的代码）：

```
for ($i=0; $i<=$limit; $i++) {
   if ($object->data[$i]['name']) {
      echo 'name: '.$object->data[$i]['name'];
   }
} 
```

上面的脚本总是返回 false（不显示用户名）

但是下面的脚本有效（即使我评论了 echo 语句）

```
for ($i=0; $i<=$limit; $i++) {
   // echo $object->data[$i]['name'];
   if ($object->data[$i]['name']) {
      echo 'name: '.$object->data[$i]['name'];
   }
} 
```

这发生在任何人身上吗？是否有一个原因？

好的...这是原始代码：

```
<?php if ( $data->apartments[$i]['price']['price1']->value ) { ?>
<div class="prices">
   <table border="0" width="100%" cellpadding="0" style="border-collapse: collapse">
       <tr>
           <td colspan="2" style="border-bottom: 1px dashed #E36300">
               <h3>PRICE LIST</h3>
           </td>
       </tr>
       <tr><td>&nbsp;</td><td>&nbsp;</td></tr>

   <?php

   //$data->apartments[$i]['price']['price_date1']->value;
   //$data->apartments[$i]['price']['price_date2']->value;
   //$data->apartments[$i]['price']['price_date3']->value;
   //$data->apartments[$i]['price']['price_date4']->value;
   //$data->apartments[$i]['price']['price_date5']->value;
   //$data->apartments[$i]['price']['price_date6']->value;
   //$data->apartments[$i]['price']['price_date7']->value;
   //$data->apartments[$i]['price']['price_date8']->value;
   //$data->apartments[$i]['price']['price_date9']->value;

   //$data->apartments[$i]['price']['price1']->value;
   //$data->apartments[$i]['price']['price2']->value;
   //$data->apartments[$i]['price']['price3']->value;
   //$data->apartments[$i]['price']['price4']->value;
   //$data->apartments[$i]['price']['price5']->value;
   //$data->apartments[$i]['price']['price6']->value;
   //$data->apartments[$i]['price']['price7']->value;
   //$data->apartments[$i]['price']['price8']->value;
   //$data->apartments[$i]['price']['price9']->value;

   for ( $pc=0; $pc<=10; $pc++ ) {

       if ( $data->apartments[$i]['price']['price_date'.$pc]->value ) {
           echo "<tr>";
           echo "<td style='border: 1px solid #E36300' align='left' valign='top' width='50%'>".$data->apartments[$i]['price']['price_date'.$pc]->value."</td>";
           echo "<td style='border: 1px solid #E36300' align='right' valign='top' width='50%'>".$data->apartments[$i]['price']['price'.$pc]->value." ".$data->apartments[$i]['price']['price_currency']->value."</td>";
           echo "</tr>";
       } 
   }
   ?>

   </table>
</div>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:12:17.073

问题可能是您尝试回显/输出并因此检查的 var 是评估为**false**的东西。请注意，有几件事可能评估为假，即使 var 已填充/非空。即**0**，**null**等。

要检查是否设置了 var，请使用 isset()。而不仅仅是 if($var)..

但是，正如上面的评论所说，这只是一个猜测。您必须向我们/我提供确切的代码才能确定。

# git - “git push all”（多个存储库）不起作用

> ID：15273040
> 
> 赞同：1
> 
> 时间：2013-03-07T13:56:08.307
> 
> 标签：git, heroku

[这个答案](https://stackoverflow.com/a/4255934/11236)解释了如何同时推送到多个仓库。

1.  我的`.git/config`包含：

    ```
    [remote "all"]
        url = git@github.com:commerce-sciences/scale-master.git
        url = git@heroku.ron:scale-master.git 
    ```

2.  `git push all`成功部署到heroku。

3.  由于某种原因，似乎没有将更改推送到 github。

> ```
> > git push all
> Everything up-to-date
> Everything up-to-date
> 
> > git status
> # On branch master
> # Your branch is ahead of 'origin/master' by 22 commits.
> #
> nothing to commit (working directory clean) 
> ```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T14:12:09.670

您配置`all`远程存储库的方式根本没有链接到本地​​存储库中的现有存储库。因此，虽然它具有相同的 URL ，但其中的第二个存储库`all`并不相同。`origin`

当你向所有人推送时，Git 并不知道它`origin`在执行此操作时也会推送。因此，它无法更新本地存储库中的远程分支。

不幸的是，您无法更改此行为。[`git push`](http://git-scm.com/docs/git-push)不支持远程存储库组[`git fetch`](http://git-scm.com/docs/git-fetch)。至少*现在还没有*。如果是这样，Git 将有一个从远程存储库（组）`all`到本地引用的显式链接，`origin`并且可以更新本地引用。

因此，目前，您唯一的选择是在推送到`all`、使用`git fetch origin`或只是`git fetch`（对于远程跟踪分支）之后立即获取各个遥控器，或者一开始就明确地推送到它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-04T17:43:04.953

根据我对您需求的了解，您不需要“全部”遥控器。: 只需在“origin”遥控器上配置第二个push url，就不会出现这个问题。

```
[remote "origin"]
    url = git@github.com:commerce-sciences/scale-master.git
    url = git@heroku.ron:scale-master.git 
```

输出`git remote -v`：

```
origin git@github.com:commerce-sciences/scale-master.git (fetch)
origin git@github.com:commerce-sciences/scale-master.git (push)
origin git@heroku.ron:scale-master.git (push) 
```

这意味着： -`git push origin`现在推送到两个 url。- `git fetch origin`（仍然）仅从第一个 url 获取

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-04T18:08:30.850

但是如果你真的想要分离“所有”和“原点”遥控器，你仍然可以正确地做你想做的事。

关键是（再一次）在非常酷的 git 配置中。

让我们看看当你`git push all`：

*   git 推送第一个 url（好的）

*   git 推送第二个 url（好的）

*   然后它会获取第一个 url 以更新存储库的远程分支，`refs/remote/all`.

为什么 git 抱怨“提前提交”？因为它将您当前的分支（master）与上游分支（origin/master）进行比较。

事实是，我们可以改变（任何一个都足够了）：

1.  更新的分支，因此我们将所有内容都提取到 refs/remote/origin 而不是 refs/remote/all 中。在`[remote "all"]`配置块中，该行

    `fetch = +refs/heads/*:refs/remotes/all/*`

意思是“更新 refs/remotes/all”。因此，您只需将其添加/更改为：

```
`fetch = +refs/heads/*:refs/remotes/origin/*` 
```

它完成了：`git fetch origin`现在`git fetch all`将具有相同的效果（更新`origin/master`分支）

**警告：**过多地使用 fetch 配置可能会导致您不知道真正完成了什么的存储库。所以保持简单和合乎逻辑。

2.  git 比较当前分支的远程分支

如果你`git push --set-upstream all`，那么你的 master 分支将跟随 all/master 而不是 origin/master。所以它不会抱怨你有承诺。请注意，您只需要这样做一次，因为上游分支是永久保留的。

**简而言之 ：**

方法 1：更改远程“全部”的获取配置

```
[remote "all"]
   url = (url1)
   url = (url2)
   -fetch = +refs/heads/*:refs/remotes/all/*
   +fetch = +refs/heads/*:refs/remotes/origin/* 
```

方法 2：让你的分支跟随 all/master 而不是 origin/master

```
[branch "master"]
    -remote = origin
    +remote = all
    merge = refs/heads/master 
```

# ios - 创建一个大的虚拟文件

> ID：15273041
> 
> 赞同：2
> 
> 时间：2013-03-07T13:56:08.610
> 
> 标签：ios, file, nsdata

我是这个社区的新手，也是iOS开发的新手，我希望有人能帮我解决一个小问题......

目前我正在为自己编写一个小应用程序，它应该创建一个非常大的虚拟文件，其中包含虚拟数据或单词或任何使它变大的东西。

原因是，我想点击一个按钮，应用程序应该生成一个 4 GB 的文件并将其保存到磁盘，没有其他应用程序可以使用它，因为它不是免费的......如果我需要 4 GB 的可用空间，我只需要打开我的小应用程序，单击另一个按钮后，文件将被删除，我有 4 GB 的可用磁盘空间...

我知道如何将文件写入磁盘，但我不知道如何在短时间内生成大量数据，使其达到 4 或更多 gb 大？？？

有人知道如何使用 for 循环或其他东西生成如此大的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:11:22.480

如果只想占用4GB的磁盘空间，那就创建一个文件，找4GB，写一个字节。这将在几乎没有时间创建一个包含几乎没有数据的“稀疏文件”！

这是C：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>

...

int fd = open("/path/to/file", O_WRONLY, 0644);
if (fd >= 0)
{
    lseek(fd, 4 * 1024 * 1024 * 1024, SEEK_SET);
    write(fd, &fd, 1);
    close(fd);
} 
```

**EDIT**放弃`creat()`了，`open()`因此可以指定文件模式。

错误检查也应该比显示的要好......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:06:16.067

您可以创建一个`NSMutableData`对象并使用`-setLength:`它来将其扩展至 4GB。（`-setLength`将用零填充），然后将其写入文件。

但是，我不确定 iOS 将如何处理`NSMutableData`这么大的对象。

**编辑：**示例：

```
NSString *filename; // The location to save your file
NSMutableData *data = [[NSMutableData alloc] init];
[data setLength:4*1024*1024*1024];
[data writeToFile:fileName atomically:NO]; 
```

还要记住，如果设备的可用存储空间不足，iOS 将清除您应用程序在某些目录中的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:12:56.770

你可以用 C 来增量地编写它：

```
// a starting point:
const char path[] = "somewhere";
const size_t NBytesInBuffer = 1024;
/* fill buffer, if you like */
const char buffer[NBytesInBuffer] = {0};
FILE* const file = fopen(path, "w+");
assert(file);
const size_t ElementSize = sizeof(buffer[0]);

uint64_t nBytesWritten = 0;
while (UINT32_MAX > nBytesWritten) {
    nBytesWritten += ElementSize * fwrite(buffer, ElementSize, NBytesInBuffer, file);
}

fclose(file); 
```

内存消耗在这里不是问题。当然，写入整个文件需要一些时间，因为它是 I/O 绑定的。有一天你可能也想要一些真实的数据:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-15T20:28:37.297

视窗：

打开命令shell - cmd 执行以下命令以创建1mb的文件

```
fsutil file createnew ./test.tmp 1048576 
```

Linux：

使用转换和复制命令 - dd

```
dd if=/dev/zero of=test.tmp bs=1M count=1 
```

OS X 和 Solaris：

```
mkfile 1m test.tmp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T14:04:49.247

如果你粗略计算 1000，而不是 1024

```
 4 gb 
 4000 mb
 4000000 kb 
 4000000000 b 
32000000000 bits 
```

确切地说它将是 34359738368 位

如果您继续将那么多字符（abc 等）写入文本文件，通过循环，您将创建一个 4gb 的文件。

# jquery - 如果 iframe src 无法加载，则捕获错误。错误：-“拒绝在框架中显示 'http://www.google.co.in/'..”

> ID：15273042
> 
> 赞同：86
> 
> 时间：2013-03-07T13:56:11.013
> 
> 标签：jquery, iframe, knockout.js, same-origin-policy

我正在使用`Knockout.js`绑定 iframe`src`标记（这将针对用户进行配置）。

现在，如果用户配置了[http://www.google.com](http://www.google.com)（我知道它不会在 iframe 中加载，这就是我将它用于 -ve 场景的原因）并且必须在 IFrame 中显示。但它会引发错误：-

> 拒绝在框架中显示“ [http://www.google.co.in/](http://www.google.co.in/) ”，因为它将“X-Frame-Options”设置为“SAMEORIGIN”。

我有以下 Iframe 代码：-

```
<iframe class="iframe" id="iframe" data-bind="attr: {src: externalAppUrl, height: iframeheight}">
    <p>Hi, This website does not supports IFrame</p>
</iframe> 
```

我想要的是，如果 URL 无法加载。我想显示**自定义消息**。 ![出现错误时的控制台屏幕截图](../Images/ed3ae976fb1274afd7087544f3b2f549.png) [**在这里提琴**](http://jsfiddle.net/shubh0602/ALBXR/)

现在，如果我使用 onload 和 onerror 作为： -

```
<iframe id="browse" style="width:100%;height:100%" onload="alert('Done')" onerror="alert('Failed')"></iframe> 
```

它可以正常加载 w3schools.com，但不能加载 google.com。

其次：-如果我将其作为一个函数并尝试像我在小提琴中所做的那样，它就行不通。

```
<iframe id="browse" style="width:100%;height:100%" onload="load" onerror="error"></iframe> 
```

我不知道我应该如何让它运行并捕获错误。

已编辑：-如果 iframe 未加载或在 stackoverflow 中加载问题，我已经看到[想要调用函数](https://stackoverflow.com/questions/9534001/want-to-call-a-function-if-iframe-doesnt-load-or-loads/9576180#9576180)，但它显示可以在 iframe 中加载的站点的错误。

另外，我[在加载事件中查看了 Stackoverflow iframe](https://stackoverflow.com/questions/5975526/iframe-onload-event/5975562#5975562) 谢谢！！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-09-06T19:47:09.940

由于浏览器设置了[同源策略](http://en.wikipedia.org/wiki/Same-origin_policy)，您将无法从客户端执行此操作。除了基本属性（如宽度和高度）之外，您将无法从 iFrame 获得更多信息。

此外，谷歌在其响应标头中设置了 SAMEORIGIN 的“ [X-Frame-Options](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options) ”。

即使您对 google 进行了 ajax 调用，您也无法检查响应，因为浏览器强制执行同源策略。

因此，唯一的选择是从您的服务器发出请求，以查看您是否可以在 IFrame 中显示该站点。

因此，在您的服务器上......您的网络应用程序将向 www.google.com 发出请求，然后检查响应以查看它是否具有 X-Frame-Options 的标头参数。如果它确实存在，那么您知道 IFrame 会出错。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-31T20:57:51.840

我认为您可以绑定[`load`](http://api.jquery.com/load-event/)iframe 的事件，当 iframe 内容完全加载时触发该事件。

同时你可以启动一个 setTimeout，如果 iFrame 被加载清除超时或者让超时触发。

代码：

```
var iframeError;

function change() {
    var url = $("#addr").val();
    $("#browse").attr("src", url);
    iframeError = setTimeout(error, 5000);
}

function load(e) {
    alert(e);
}

function error() {
    alert('error');
}

$(document).ready(function () {
    $('#browse').on('load', (function () {
        load('ok');
        clearTimeout(iframeError);
    }));

}); 
```

演示：http: [//jsfiddle.net/IrvinDominin/QXc6P/](http://jsfiddle.net/IrvinDominin/QXc6P/)

## 第二个问题

这是因为您错过了内联函数调用中的括号；尝试改变这个：

```
<iframe id="browse" style="width:100%;height:100%" onload="load" onerror="error"></iframe> 
```

进入这个：

```
<iframe id="browse" style="width:100%;height:100%" onload="load('Done func');" onerror="error('failed function');"></iframe> 
```

演示：http: [//jsfiddle.net/IrvinDominin/ALBXR/4/](http://jsfiddle.net/IrvinDominin/ALBXR/4/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-08-04T11:05:06.767

onload 将始终被触发，我使用 try catch 块来解决这个问题。当您尝试获取 contentDocument 时它会抛出异常。

```
iframe.onload = function(){
   var that = $(this)[0];
   try{
        that.contentDocument;
   }
   catch(err){
        //TODO 
   }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-09-22T16:32:46.887

这是对 Edens 答案的轻微修改 - 对我来说，在 chrome 中没有发现错误。尽管您仍然会在控制台中收到错误消息：“拒绝在框架中显示 ' [https://www.google.ca/](https://www.google.ca/) '，因为它将 'X-Frame-Options' 设置为 'sameorigin'。” 至少这会捕获错误消息，然后您可以处理它。

```
 <iframe id="myframe" src="https://google.ca"></iframe>

 <script>
 myframe.onload = function(){
 var that = document.getElementById('myframe');

 try{
    (that.contentWindow||that.contentDocument).location.href;
 }
 catch(err){
    //err:SecurityError: Blocked a frame with origin "http://*********" from accessing a cross-origin frame.
    console.log('err:'+err);
}
}
</script> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-08-14T09:41:23.673

我用`window.length`. 但是使用此解决方案，您可以获取当前错误（X-Frame 或 404）。

```
iframe.onload = event => {
   const isLoaded = event.target.contentWindow.window.length // 0 or 1
} 
```

[MSDN](https://developer.mozilla.org/en-US/docs/Web/API/Window/length)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-06-07T16:40:57.210

**更新：** contentWindow.name 现在总是会在跨域帧上抛出错误。似乎唯一的方法是做这个服务器端（现在）。我编写了一个小型 cloudflare worker 来捕获远程 api 的标头，它可以在这里用来检查 X-Frame-Options。

在 iframe 中渲染之前要检查的示例代码：（jsfiddle：[https](https://jsfiddle.net/2gud39aw/2/) ://jsfiddle.net/2gud39aw/2/ ）

```
function checkUrlFrameOptions(apiurl){
  return fetch("https://header-inspector.repalash.workers.dev/?" + new URLSearchParams({
    'apiurl': apiurl,
    'headers': 'x-frame-options'
  }), {
    method: 'GET'
  }).then(r => r.json()).then(json => {
    let xFrameOp = (json.headers['x-frame-options'] || '').toLowerCase();
    // deny all requests
    if(xFrameOp==='deny') return false;
    // deny if different origin
    if(xFrameOp==='sameorigin' && json.origin !== location.origin) return false;
    return true;
  })
}

checkUrlFrameOptions("https://google.com").then((res)=>console.log("google.com can be loaded in iframe: ", res))
checkUrlFrameOptions("https://example.com").then((res)=>console.log("example.com can be loaded in iframe: ", res)) 
```

cloudflare worker 端点 ( [https://header-inspector.repalash.workers.dev](https://header-inspector.repalash.workers.dev) ) 仅用于测试，请勿在生产中使用。代码在：[https](https://gist.github.com/repalash/b1e778dbe3ac2e7149831c530a6535f9) ://gist.github.com/repalash/b1e778dbe3ac2e7149831c530a6535f9 可以直接部署为[cloudflare worker](https://workers.cloudflare.com/)

*旧答案*

这是一个简单的解决方案，在 Chrome 和 Safari 上进行了测试。

```
 const iframe = document.createElement('iframe')
    iframe.onload = function() {
        try {
            iframe.contentWindow.name
        } catch (e) {
            if (e.message.includes('cross-origin')) console.warn(e.message);
            else console.error(e.message);
        }
    }

    iframe.src = "https://google.com"; 
```

jsFiddle 演示：[https ://jsfiddle.net/k5e1mg3t/5/](https://jsfiddle.net/k5e1mg3t/5/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-15T11:48:16.597

我遇到了类似的问题。我在不使用 onload 处理程序的情况下解决了它。我正在处理 AngularJs 项目，所以我使用了 $interval 和 $ timeout。你也可以使用 setTimeout 和 setInterval。这是代码：

```
 var stopPolling;
 var doIframePolling;
 $scope.showIframe = true;
 doIframePolling = $interval(function () {
    if(document.getElementById('UrlIframe') && document.getElementById('UrlIframe').contentDocument.head && document.getElementById('UrlIframe').contentDocument.head.innerHTML != ''){
        $interval.cancel(doIframePolling);
        doIframePolling = undefined;
        $timeout.cancel(stopPolling);
        stopPolling = undefined;
        $scope.showIframe = true;
    }
},400);

stopPolling = $timeout(function () {
        $interval.cancel(doIframePolling);
        doIframePolling = undefined;
        $timeout.cancel(stopPolling);
        stopPolling = undefined;
        $scope.showIframe = false;     
},5000);

 $scope.$on("$destroy",function() {
        $timeout.cancel(stopPolling);
        $interval.cancel(doIframePolling);
 }); 
```

每 0.4 秒检查 iFrame Document 的头部。我有东西。CORS 没有停止加载，因为 CORS 错误显示空白页。如果 5 秒后没有出现任何错误（Cors 政策）等。显示合适的消息。谢谢。我希望它能解决你的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-24T12:37:41.510

我有同样的问题，当 iframe src 加载错误时，chrome 无法触发 onerror。

但就我而言，我只需要发出一个跨域 http 请求，所以我使用脚本 src/onload/onerror 而不是 iframe。它运作良好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-18T23:47:20.853

如已接受的答案[https://stackoverflow.com/a/18665488/4038790](https://stackoverflow.com/a/18665488/4038790)中所述，您需要通过服务器进行检查。

因为没有可靠的方法在浏览器中检查这一点，我建议您自己构建一个快速服务器端点，您可以使用它来检查是否有任何 url 可通过 iframe 加载。一旦您的服务器启动并运行，只需向其发送 AJAX 请求以通过在查询字符串中提供 url 作为`url`（或您的服务器所需的任何内容）来检查任何 url。这是 NodeJs 中的服务器代码：

```
const express = require('express')
const app = express()

app.get('/checkCanLoadIframeUrl', (req, res) => {
  const request = require('request')
  const Q = require('q')

  return Q.Promise((resolve) => {
    const url = decodeURIComponent(req.query.url)

    const deafultTimeout = setTimeout(() => {
      // Default to false if no response after 10 seconds
      resolve(false)
    }, 10000)

    request({
        url,
        jar: true /** Maintain cookies through redirects */
      })
      .on('response', (remoteRes) => {
        const opts = (remoteRes.headers['x-frame-options'] || '').toLowerCase()
        resolve(!opts || (opts !== 'deny' && opts !== 'sameorigin'))
        clearTimeout(deafultTimeout)
      })
      .on('error', function() {
        resolve(false)
        clearTimeout(deafultTimeout)
      })
  }).then((result) => {
    return res.status(200).json(!!result)
  })
})

app.listen(process.env.PORT || 3100)
```

# jquery - response.getWriter.write(jsondata) 返回 [object Object]

> ID：15273050
> 
> 赞同：2
> 
> 时间：2013-03-07T13:56:28.360
> 
> 标签：jquery, json, servlets

我正在尝试将 JSON 数据作为来自 servlet 的响应发送到我的 JSP 页面中的 Javascript 代码。我使用代码发回数据`response.getWriter.write(jsondata);`，其中 jsondata 是 JSON 对象。我在 Javascript 中得到的响应类似于 [object Object]，这不是我需要的。有人可以帮我理解这里出了什么问题吗？

```
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

    Map<String, Object> data = new HashMap<String, Object>();
    data.put("success", true);
    data.put("message", "Hello World!");
    data.put("param", request.getParameter("user"));

    // Write response data as JSON.
    response.setContentType("application/json");
    response.setCharacterEncoding("UTF-8");
    System.out.println(new Gson().toJson(data));
    response.getWriter().write(new Gson().toJson(data));
} 
```

另外，请注意，当我使用 sysout 打印 json 对象时，它可以正常工作，但是当我将其写入响应对象时，它会在 Javascript 端返回 [object Object]。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-10-06T09:58:51.010

您可以使用 [**GSON**](https://sites.google.com/site/gson/gson-user-guide)库。

```
Gson gson = new Gson();

String jsonString = gson.toJson(chartData);

response.setContentType("application/json");

response.getWriter().write(jsonString); 
```

# c# - Windows 条码阅读器服务

> ID：15273053
> 
> 赞同：4
> 
> 时间：2013-03-07T13:56:34.637
> 
> 标签：c#, .net, sql, winforms

我正在用 c# Windows Form 开发一个软件，我的软件必须控制员工的工作时间、签到和签出，我想我会将这些输入/输出保存在一个表格中。这是诀窍，每个员工都有一个独特的在他的唯一*ID（社会安全号码等）*之后生成的条形码，此条形码打印到*ID-CARD 中*，然后由条形码扫描仪读取，并通过扫描仪办理入住或退房的事件必须是处理。

我需要在不使用任何类型的 Windows 窗体控件的情况下执行此操作，例如，员工不得与系统本身交互，而只能与扫描仪交互。我可以让 Windows 服务 ta 自动处理这个并将其保存到数据库中吗？

我的数据库是一个 SQL 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:45:16.503

在不涉及实际跟踪人员的设计问题的情况下，您可以做到这一点，我已经使用仓库库存系统做到了。

用他们在数据库中的唯一 ID 设置您的用户，并相应地打印出条形码（很多免费的应用程序为此）。现在在每次扫描后将您的条形码设置为选项卡，并使用事件侦听器等待选项卡调用。

一旦你知道剩下的事情很简单，检查数据库，并根据条形码编号存储信息，之后它会再次等待选项卡。使用便宜的扫描仪，您可能希望显示“好的”或“再试一次”的屏幕

（对于设计问题，您始终可以让员工无法离开，除非该员工已经登录，反之亦然，并且屏幕显示“登录，退出”以进行双重扫描）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:09:08.310

谢谢大家的时间，我最终为签入和签出制作了另一种表格，作为一种安全方式，以确保签入/签出的人是身份证的所有者，这是条形码设计的问题，不是出现在任何生物识别设备上（我不能给别人我的手指，所以可以检查我进出），问题最终成为软件本身的另一个功能。

# android - 如何定期更新网格布局数据

> ID：15273054
> 
> 赞同：0
> 
> 时间：2013-03-07T13:56:37.977
> 
> 标签：android, android-gridlayout

每当数据库中的数据更新时，如何更新网格布局数据？每当数据库中的数据更新时，我想从服务中广播一条消息并在此 Acitivty 上接收。但是，如果我调用`updateSummary()`广播接收器的接收，它会将新子代添加到现有的 gridLyout 子代中。如何替换现有的子代并定期刷新网格布局？

```
public class MyActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_activity);
        updateSummary();
    }

    public void updateSummary()
    {
        gridLayout=(GridLayout)findViewById(R.id.newgrid);

        DBHelper dbHelper = new DBHelper(this);
        SQLiteDatabase mySummaryDB = dbHelper.getWritableDatabase();

        if (mySummaryDB != null) {

            String mycols=DBConstants.ID+","+DBConstants.NUMBER+","+DBConstants.DATE+","+DBConstants.TIME;

            Cursor c0 = mySummaryDB.rawQuery("select distinct("+DBConstants.NUMBER+") from "+DBConstants.MASTER_DATA_TABLE+"", null);

            if(c0!=null)
            {
                if(c0.moveToFirst())
                {
                    do
                    {

                        String number = c0.getString(c0.getColumnIndex(DBConstants.NUMBER));

                        Cursor c1 = mySummaryDB.rawQuery("select "+mycols+" from "+DBConstants.MASTER_DATA_TABLE+" where "+DBConstants.NUMBER+"='"+NUMBER+"' order by "+DBConstants.MYDATETIME+" desc limit 1", null);

                        Log.i("summary",Integer.toString(c1.getCount()));

                        if(c1!=null)
                        {
                            if(c1.moveToFirst())
                            {
                                int increment=0;
                                do
                                {
                                     String id = c1.getString(c1.getColumnIndex(DBConstants.ID));
                                     String date = c1.getString(c1.getColumnIndex(DBConstants.DATE));
                                     String time = c1.getString(c1.getColumnIndex(DBConstants.TIME));

                                     Cursor c2 = mySummaryDB.query(DBConstants.MYDATA_TABLE,new String[]{DBConstants.NAME}, DBConstants.NUMBER+"=?", new String[]{number}, null, null, null);   
                                     String name="";

                                     if(c2!=null)
                                     {
                                         if(c2.moveToFirst())
                                         {
                                             name = c2.getString(c2.getColumnIndex(DBConstants.NAME));
                                             Log.i("summary", "name->"+name);
                                         }
                                     }
                                     c2.close();

                                        TextView nameTV = new TextView(this);
                                        nameTV.setText(name);
                                        gridLayout.addView(nameTV);

                                        TextView dateTV = new TextView(this);
                                        dateTV.setText(date);
                                        gridLayout.addView(dateTV);

                                        TextView timeTV = new TextView(this);
                                        timeTV.setText(time);
                                        gridLayout.addView(timeTV);

                                    }
                                        increment=increment+1;
                                }
                                while(c1.moveToNext());
                            }
                        }
                }
                    while(c0.moveToNext());

            }
        }

        dbHelper.close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:43:24.460

我不是 100% 确定我是否知道您想做什么，但在我看来，您似乎想在 GridLayout 中拥有三个 TextView，当调用 updateSummary 方法时应该更新它们。如果是这样，您应该在活动的 xml 布局文件中定义它们并给它们一个 id。在您的活动中使用该函数`textView = (TextView) findViewById(R.id.id_of_your_component)`，您可以通过 id 从您的 java 代码中访问 TextView，然后您可以更新三个组件的文本，`textView.setText("your text")`因为这似乎是您真正想要做的。目前，您每次调用 updateSummary 方法时都会创建新的 TextView，并将它们添加到 GridLayout，但您只需实例化它们一次（最好在 xml 布局中），然后在您的方法中更新它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:35:02.470

我不确定 Cursor 的一部分，但总的来说，这是您可以用来更新 GridView 的方法。

1.  您需要监视您的数据库更改（尽管有一些后台线程）。
2.  如果基础数据集已更改，请调用 notifyDataSetChanged（参考：[BaseAdapter.html#notifyDataSetChanged()](http://developer.android.com/reference/android/support/v4/widget/SimpleCursorAdapter.html)或[SimpleCursorAdapter.html#notifyDataSetChanged()](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)
3.  一旦调用了上述方法，视图就会在它们变得可见时被刷新。
4.  您不需要更新 GridView 中的所有单元格（但为每个单元格视图创建新的 TextView）。
5.  实现[getView()](http://developer.android.com/reference/android/support/v4/widget/CursorAdapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)方法（当单元格变得可见时调用）以返回 GridView 中单元格的自定义视图。
6.  还使用 ViewHolder 模式，这样您就不会每次都重新创建每个单元格（更像是缓存）。确保数据作为每个 getView 调用的一部分动态设置（我们只缓存视图 - UI 部分）

参考： 1.[使用适配器构建布局](http://developer.android.com/guide/topics/ui/declaring-layout.html#AdapterViews) 2.[将视图对象保存在视图支架中](http://developer.android.com/training/improving-layouts/smooth-scrolling.html#ViewHolder)

# c# - 使用对 DataTable 所做的更改更新数据库...混乱

> ID：15273057
> 
> 赞同：11
> 
> 时间：2013-03-07T13:56:48.103
> 
> 标签：c#, datatable, dataadapter

`DataAdapter.Fill(DataTable);`如果我用这样的简单方法填充 DataTable，然后对 DataTable 中的一行进行更改：`DataTable.Rows[0]["Name"] = "New Name";`如何轻松地将这些更改保存回数据库？我以为我可以打电话`DataAdapter.Update(DataTable);`，但我读到它只适用于 TableAdapter(?)。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-08T12:26:11.937

这是一个实际有用的答案，以防其他人需要知道如何执行此操作：

```
string selectStatement = "SELECT * FROM Contact";
System.Data.DataTable dt = new System.Data.DataTable();
SqlConnection conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
conn.Open();
SqlDataAdapter sqlDa = new SqlDataAdapter();
sqlDa.SelectCommand = new SqlCommand(selectStatement, conn);
SqlCommandBuilder cb = new SqlCommandBuilder(sqlDa);
sqlDa.Fill(dt);
dt.Rows[0]["Name"] = "Some new data here";
sqlDa.UpdateCommand = cb.GetUpdateCommand();
sqlDa.Update(dt); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-05T20:44:48.433

请注意 SqlBulkCopyOptions.KeepIdentity ，您可能希望也可能不希望在您的情况下使用它。

```
using (var bulkCopy = new SqlBulkCopy(_connection.ConnectionString, SqlBulkCopyOptions.KeepIdentity))
{
      // my DataTable column names match my SQL Column names, so I simply made this loop. However if your column names don't match, just pass in which datatable name matches the SQL column name in Column Mappings
      foreach (DataColumn col in table.Columns)
      {
          bulkCopy.ColumnMappings.Add(col.ColumnName, col.ColumnName);
      }
      bulkCopy.BulkCopyTimeout = 600;
      bulkCopy.DestinationTableName = destinationTableName;
      bulkCopy.WriteToServer(table);
} 
```

# python - kqueue 跟踪文件更改 - 在处理以前的事件时丢失事件的可能性？

> ID：15273061
> 
> 赞同：3
> 
> 时间：2013-03-07T13:56:55.260
> 
> 标签：python, python-2.7, freebsd, kqueue

**我在做什么**

我正在实现一个基于 python/kqueue (FreeBSD) 的解决方案来跟踪对特定日志文件的更改，当满足 KQ_NOTE_WRITE fflag 时，对文件的更改由我的 python 脚本中的另一个函数拾取和处理。

**为什么我这样做**

最终，我将获取最新的日志文件条目并将其发送到其他地方，作为快速'n'dirty 会计系统的一部分。

**我认为我需要知道的**

1）由于日志文件可以看到高流量的时期，我想知道是否会有任何“原子性”，即在将最新条目传递给日志文件时，我们会“错过”一个新条目吗？事实上，kqueue 是一个“队列”，我认为不是，但历史告诉我，我通常最终会觉得自己像个笨蛋。

2) kqueue 是否保证为每个事件触发，或者多个事件是否可以通过？我想象的情况是日志文件几乎同时产生 2 个单独的条目。

感谢任何智慧/建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:37:51.137

你的怀疑是正确的。:-)

如果在发生第二个相同事件时，kqueue“事件”不在被消耗的过程中，则它被“扩展”。也就是说，假设低级别的事件序列是这样的：

```
1: you start monitoring the log file for writes
2: something writes to the log file (this adds a "write" notice to the kqueue)
3: your process is notified, but does not have a chance to go look yet
4: something (same something as step 2, or different, does not matter)
   writes more to the log file (this merely "expands" the existing notice,
   with no effect in this case)
5: your process finally gets a chance to read the "file was written" notice
   from the kqueue 
```

当第 5 步发生时，“文件已写入”通知将只是一个通知。由您的代码决定写入了多少。例如，您可以`fstat()`在第 1 步检查文件的长度，然后`fstat()`在第 5 步之后检查另一个文件的长度。如果文件只是附加到，则这些点之间的大小差异就是您关心的“新数据”。

请注意，如果您在第 1 步看到（比如说）100 个字节，在第 5 步之后看到 500 个字节——比如说，在第 7 步：

```
7: you fstat the file 
```

后来得到另一个“文件已写入”通知，实际上可能有一个“步骤 6”，文件发生了另一个写入。因此，即使您收到添加了字节的通知，您也应该准备好在后面的步骤中发现添加了 0 个字节，因为在将注释附加到 kqueue 之后您可能已经阅读了它们。

如果您正在观看`syslog`类型日志，请注意它们会随着文件被重命名（然后有时会被压缩等）而“翻转”，并创建一个新文件，例如，“messages”变为“messages.0.bz2”和一个新的“消息”被创建。您可以查看目录以及文件，并检查是否有新文件创建，以捕捉此类情况。

# svn - 安装和配置 Trac

> ID：15273062
> 
> 赞同：0
> 
> 时间：2013-03-07T13:56:56.243
> 
> 标签：svn, trac

我的服务器上有一堆 SVN 存储库，我想安装[Trac](http://trac.edgewall.org)以查看存储库的源

我从 github 获得了 Trac，我正在运行`1.1.2-dev`

我通过安装 subversion`yum install subversion`并创建了一个基本的 subversion 存储库

然后我创建了一个 trac 项目

现在，我想要的是能够在 trac 中查看存储库。

因此，我编辑`trac.ini`并添加了以下内容：

```
repository_dir = /path/to/my/repo

[components]
tracopt.versioncontrol.svn.* = enabled 
```

但这给了我以下错误：

> 警告：无法与存储库“（默认）”同步（不支持的版本控制系统“svn”：/usr/lib64/libsvn_fs_base-1.so.0：未定义符号：svn_fs__path_change2_create）。查看 Trac 日志以获取更多信息。

我正在运行 CentOS6，但我似乎无法找出发生这种情况的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-01T19:44:42.353

就我而言（Trac 1.0.11），只需添加即可修复

```
tracopt.versioncontrol.svn.svn_fs.subversionconnector = enabled 
```

到 trac.ini 中的 [components] 部分

不过我花了一个星期才知道......

# regex - Perl正则表达式在特定位置插入字符串

> ID：15273068
> 
> 赞同：1
> 
> 时间：2013-03-07T13:57:12.540
> 
> 标签：regex, string, perl, insert

**我有以下代码：**

```
#!/usr/bin/perl

use strict;
use warnings;

use URI qw( );

my @insert_words = qw( HELLO );

while (<DATA>) {
chomp;
my $url = URI->new($_);
my $path = $url->path();

for (@insert_words) {
  # Use package vars to communicate with /(?{})/ blocks.
  my $insert_word = $_;
  local our @paths;
  $path =~ m{
     ^(.*/)([^/]*)((?:/.*)?)\z
     (?{

        push @paths, "$1$insert_word$2$3";
        if (length($2)) {
           push @paths, "$1$insert_word$3";
           push @paths, "$1$2$insert_word$3";
        }
     })
     (?!)
  }x;

  for (@paths) {
     $url->path($_);
     print "$url\n";
    }
  }
}

__DATA__
http://www.bagandboxfactory.com/index.php?route=checkout/
http://www.stackoverflow.com/dog/cat/rabbit/
http://www.superuser.co.uk/dog/cat/rabbit/hamster/ 
```

目前，上面的代码非常适用`stackoverflow and superuser`于`__DATA__`. 它为`stackoverflow`url 提供以下输出：

```
http://www.stackoverflow.com/dog/cat/rabbit/HELLO
http://www.stackoverflow.com/dog/cat/HELLOrabbit/
http://www.stackoverflow.com/dog/cat/HELLO/
http://www.stackoverflow.com/dog/cat/rabbitHELLO/
http://www.stackoverflow.com/dog/HELLOcat/rabbit/
http://www.stackoverflow.com/dog/HELLO/rabbit/
http://www.stackoverflow.com/dog/catHELLO/rabbit/
http://www.stackoverflow.com/HELLOdog/cat/rabbit/
http://www.stackoverflow.com/HELLO/cat/rabbit/
http://www.stackoverflow.com/dogHELLO/cat/rabbit/ 
```

如您所见，`HELLO`当遇到斜杠 (/) 时，它会在特定位置插入字符串。

**我遇到的问题：**

当在 url 中找到等号 (=) 时，我希望发生同样的事情。

举`http://www.bagandboxfactory.com/index.php?route=checkout`个例子，我希望输出给我以下信息：

```
http://www.bagandboxfactory.com/index.php?route=HELLOcheckout/   <- puts HELLO before the string after the equals
http://www.bagandboxfactory.com/index.php?route=HELLO/   <- replaces the string after the equals with HELLO
http://www.bagandboxfactory.com/index.php?route=checkoutHELLO/  <- puts HELLO after the string that is after the equals 
```

我认为将正则表达式从

`^(.*/)([^/]*)((?:/.*)?)\z`

到

`^(.*[/=])([^/=]*)((?:[/=].*)?)\z`会工作，但它不会。

**我需要对正则表达式进行什么更改才能做到这一点？**

非常感谢您的帮助，非常感谢

****__更新*_* _ _****

 **它需要能够处理多个参数，例如，如果我有 url `http://www.example.com/dog/cat=2&foo=5`，我应该得到的输出如下：

```
http://www.example.com/HELLOdog/cat=2&foo=5  
http://www.example.com/HELLO/cat=2&foo=5
http://www.example.com/dogHELLO/cat=2&foo=5
http://www.example.com/dog/cat=HELLO2&foo=5
http://www.example.com/dog/cat=HELLO&foo=5
http://www.example.com/dog/cat=2HELLO&foo=5
http://www.example.com/dog/cat=2&foo=HELLO5
http://www.example.com/dog/cat=2&foo=HELLO
http://www.example.com/dog/cat=2&foo=5HELLO 
```

我已经拥有的代码可以正常工作，并且对它在 url 中**遇到的每个斜线都执行此**操作，但我**现在希望它在遇到`=`url 中的**时也这样做（或我选择在正则表达式中指定的任何其他字符例如 [/=@-]）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:50:48.980

让正则表达式引擎为您执行回溯是一项聪明的技术。

主要问题是问号后面的部分是*查询*，可以通过`$url->query`。`$url->path`返回没有查询的路径组件。

将您的代码修改为

```
#!/usr/bin/perl

use strict;
use warnings;

use URI qw( );

my @insert_words = qw( HELLO );

while (<DATA>) {
    chomp;
    my $url = URI->new($_);
    my $path = $url->path();
    my $query = $url->query;

    for (@insert_words) {
      # Use package vars to communicate with /(?{})/ blocks.
      my $insert_word = $_;
      local our @paths;
      $path =~ m{
         ^(.*/)([^/]*)((?:/.*)?)\z
         (?{
            push @paths, "$1$insert_word$2$3";
            if (length($2)) {
               push @paths, "$1$insert_word$3";
               push @paths, "$1$2$insert_word$3";
            }
         })
         (?!)
      }x;

      local our @queries;
      if (defined $query) {
          $query =~ m{
              ^(.*[/=])([^/=&]*)((?:[/=&].*)?)\z
              (?{
                  if (length $2) {
                      push @queries, "$1$insert_word$2$3";
                      push @queries, "$1$insert_word$3";
                      push @queries, "$1$2$insert_word$3";
                  }
              })
              (?!)
          }x;
      }

      for (@paths) {
          $url->path($_);

          if (@queries) {
              for (@queries) {
                  $url->query($_);
                  print $url, "\n";
              }
          }
          else {
              print $url, "\n";
          }
      }
    }
}

__DATA__
http://www.bagandboxfactory.com/index.php?route=checkout/
http://www.stackoverflow.com/dog/cat/rabbit/
http://www.superuser.co.uk/dog/cat/rabbit/hamster/
http://www.example.com/index.php?route=9&other=7/ 
```

给出以下输出。查询替换的逻辑略有不同，因为它会`@insert_words`在查询中的尾部斜杠之后附加每个（如果存在）。

```
http://www.bagandboxfactory.com/HELLOindex.php?route=HELLOcheckout/
http://www.bagandboxfactory.com/HELLOindex.php?route=HELLO/
http://www.bagandboxfactory.com/HELLOindex.php?route=checkoutHELLO/
http://www.bagandboxfactory.com/HELLO?route=HELLOcheckout/
http://www.bagandboxfactory.com/HELLO?route=HELLO/
http://www.bagandboxfactory.com/HELLO?route=checkoutHELLO/
http://www.bagandboxfactory.com/index.phpHELLO?route=HELLOcheckout/
http://www.bagandboxfactory.com/index.phpHELLO?route=HELLO/
http://www.bagandboxfactory.com/index.phpHELLO?route=checkoutHELLO/
http://www.stackoverflow.com/dog/cat/rabbit/HELLO
http://www.stackoverflow.com/dog/cat/HELLOrabbit/
http://www.stackoverflow.com/dog/cat/HELLO/
http://www.stackoverflow.com/dog/cat/rabbitHELLO/
http://www.stackoverflow.com/dog/HELLOcat/rabbit/
http://www.stackoverflow.com/dog/HELLO/rabbit/
http://www.stackoverflow.com/dog/catHELLO/rabbit/
http://www.stackoverflow.com/HELLOdog/cat/rabbit/
http://www.stackoverflow.com/HELLO/cat/rabbit/
http://www.stackoverflow.com/dogHELLO/cat/rabbit/
http://www.superuser.co.uk/dog/cat/rabbit/hamster/HELLO
http://www.superuser.co.uk/dog/cat/rabbit/HELLOhamster/
http://www.superuser.co.uk/dog/cat/rabbit/HELLO/
http://www.superuser.co.uk/dog/cat/rabbit/hamsterHELLO/
http://www.superuser.co.uk/dog/cat/HELLOrabbit/hamster/
http://www.superuser.co.uk/dog/cat/HELLO/hamster/
http://www.superuser.co.uk/dog/cat/rabbitHELLO/hamster/
http://www.superuser.co.uk/dog/HELLOcat/rabbit/hamster/
http://www.superuser.co.uk/dog/HELLO/rabbit/hamster/
http://www.superuser.co.uk/dog/catHELLO/rabbit/hamster/
http://www.superuser.co.uk/HELLOdog/cat/rabbit/hamster/
http://www.superuser.co.uk/HELLO/cat/rabbit/hamster/
http://www.superuser.co.uk/dogHELLO/cat/rabbit/hamster/
http://www.example.com/HELLOindex.php?route=9&other=HELLO7/
http://www.example.com/HELLOindex.php?route=9&other=HELLO/
http://www.example.com/HELLOindex.php?route=9&other=7HELLO/
http://www.example.com/HELLOindex.php?route=HELLO9&other=7/
http://www.example.com/HELLOindex.php?route=HELLO&other=7/
http://www.example.com/HELLOindex.php?route=9HELLO&other=7/
http://www.example.com/HELLO?route=9&other=HELLO7/
http://www.example.com/HELLO?route=9&other=HELLO/
http://www.example.com/HELLO?route=9&other=7HELLO/
http://www.example.com/HELLO?route=HELLO9&other=7/
http://www.example.com/HELLO?route=HELLO&other=7/
http://www.example.com/HELLO?route=9HELLO&other=7/
http://www.example.com/index.phpHELLO?route=9&other=HELLO7/
http://www.example.com/index.phpHELLO?route=9&other=HELLO/
http://www.example.com/index.phpHELLO?route=9&other=7HELLO/
http://www.example.com/index.phpHELLO?route=HELLO9&other=7/
http://www.example.com/index.phpHELLO?route=HELLO&other=7/
http://www.example.com/index.phpHELLO?route=9HELLO&other=7/
```**

# nhibernate - 如何使用 NHibernate 配置 XML 文件中的拦截器？

> ID：15273069
> 
> 赞同：2
> 
> 时间：2013-03-07T13:57:13.713
> 
> 标签：nhibernate, interceptor

我想在不更改代码的情况下使用休眠拦截器（覆盖 EmptyInterceptor）。

可以从 XML 配置文件中完成吗？

我的 EmptyInterceptor 覆盖类：

```
public class QueryNumberInterceptor : EmptyInterceptor {
        public override SqlString OnPrepareStatement(SqlString sql) {
            return base.OnPrepareStatement(sql);
        }
} 
```

我的 XML 配置文件：

```
<config>
    <add key="connection.driver_class" value="NHibernate.Driver.SqlClientDriver, NHibernate"/>
    <add key="dialect" value="NHibernate.Dialect.MsSql2008Dialect, NHibernate"/>
    <add key="connection.connection_string" value="ConnectionString = ${MainConnection}"/>
    <add key="show_sql" value="true"/>
</config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:05:29.890

AFAIK，你不能用配置文件注入拦截器。

但是你可以注册一个[事件监听器](http://nhforge.org/doc/nh/en/index.html#objectstate-events)。您可以对事件侦听器执行与拦截器相同的操作。但它是一个不同的概念，因此看起来不同。

# linux - 用于连接到 sql server 数据库服务器并从文件中插入结果的 shell 脚本

> ID：15273071
> 
> 赞同：0
> 
> 时间：2013-03-07T13:57:14.907
> 
> 标签：linux, shell, unix

我通常在 .NET 和 windows 中工作。但最近我遇到了一个涉及 unix 服务器的问题。unix 服务器有文本文件，其数据需要插入到另一个 windows 服务器中的 sql server 数据库中。我需要以 15 分钟的固定时间间隔自动插入数据。我将能够通过编写 Windows 服务来做同样的事情......但在 Unix 中不知道......请帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:04:44.800

您的问题非常笼统，所以我会尝试以通用的方式回答。

首先，创建一个`crontab`每 15 分钟触发一次脚本的条目

```
*/15 * * * *    /path/to/your/script.sh 
```

然后，假设您必须将文件的每一行推送到表格中，您必须在脚本中执行类似的操作

```
#!/bin/bash

# read every line of the output of your script
/path/to/your/output_script | while read line 
do

    # push data into db
    /path/to/your/sqlclient [auth params] -c "INSERT INTO yourtable (field) VALUES ('$line');"

done 
```

# c# - SharpRepository EF5，如何共享 dbcontext

> ID：15273074
> 
> 赞同：4
> 
> 时间：2013-03-07T13:57:33.803
> 
> 标签：c#, entity-framework, repository, sharp-repository

使用[SharpRepository 的 EF5 实现](http://nuget.org/packages/SharpRepository.Ef5Repository/)，如何在使用 RepositoryFactory 时在 IRepository 的不同实例之间共享 DBContext？

代码片段：

```
using SharpRepository.Repository;

public class PersonManager()
{

    private IRepository<Domain.PersonIdentifier, int> personIdentifierRepository;
    private IRepository<Domain.NextNumber, string> nextNumberRepository;

    public PersonManager()
    {

        //HOW TO SHARE A SINGLE DBCONTEXT INSTANCE BETWEEN THESE TWO INSTANTIATIONS ??
        this.personIdentifierRepository = RepositoryFactory.GetInstance<Domain.PersonIdentifier, int>();
        this.nextNumberRepository = RepositoryFactory.GetInstance<Domain.NextNumber, string>();

    }

} 
```

Web.config 文件：

```
<sharpRepository>
    <repositories default="EF5Repo">
      <repository name="EF5Repo" connectionString="MyContainer" factory="SharpRepository.Ef5Repository.Ef5ConfigRepositoryFactory, SharpRepository.Ef5Repository" />
    </repositories>
    <cachingProviders default="inmemory">
      <cachingProvider name="inmemory" factory="SharpRepository.Repository.Caching.InMemoryConfigCachingProviderFactory, SharpRepository.Repository" />
    </cachingProviders>
    <cachingStrategies default="noCaching">
      <cachingStrategy name="timeout" timeout="30" factory="SharpRepository.Repository.Caching.TimeoutConfigCachingStrategyFactory, SharpRepository.Repository" />
      <cachingStrategy name="standardCachingStrategy" generational="true" writeThrough="true" factory="SharpRepository.Repository.Caching.StandardConfigCachingStrategyFactory, SharpRepository.Repository" />
      <cachingStrategy name="noCaching" factory="SharpRepository.Repository.Caching.NoCachingConfigCachingStrategyFactory, SharpRepository.Repository" />
    </cachingStrategies>
  </sharpRepository> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:45:04.827

RepositoryFactory 和配置位相对较新，不幸的是现在不包含共享单个 DbContext 的方法，但我将添加它作为功能请求，只需要考虑实现它的最佳方法。

话虽如此，这就是我现在的处理方式。在我们实现这个新特性之前，您可以使用 Ef5Repository 进行硬编码，而不是使用 RepositoryFactory。Ef5Repository 的构造函数中的第一个参数是 DbContext，因此您可以将相同的参数传递给两个存储库。

不确定您是否使用像 StructureMap 这样的 IOC 容器，但如果是这样，您可以将其设置为处理为每个线程或 .NET 请求（如果它是 Web 应用程序）创建单个 DbContext。

StructureMap 配置如下所示：

```
 // Hybrid (once per thread or ASP.NET request if you’re in a web application)
        For<DbContext>()
           .HybridHttpOrThreadLocalScoped()
           .Use<MyEntities>()
           .Ctor<string>("MyContainer").Is(entityConnectionString); 
```

然后你的 PersonManager 看起来像：

```
using SharpRepository.Repository;

public class PersonManager()
{

    private IRepository<Domain.PersonIdentifier, int> personIdentifierRepository;
    private IRepository<Domain.NextNumber, string> nextNumberRepository;

    public PersonManager(DbContext dbContext)
    {
        this.personIdentifierRepository = new Ef5Repository<Domain.PersonIdentifier, int>(dbContext);
        this.nextNumberRepository = new Ef5Repository<Domain.NextNumber, string>(dbContext);

    }

} 
```

不幸的是，此时您正在对存储库的类型进行硬编码，并且没有获得配置文件的好处，但我们很快就会在那里获得该功能。谢谢。

**SharpRepository 版本 1.2 的更新**

SharpRepository 1.2 版（3/14 发布）修复了这个问题。现在您可以告诉 SharpRepository 您正在使用什么 IoC 容器，它将使用它来创建 DbContext。这允许您控制 DbContext 的生命周期并在多个存储库中共享它。

第一步是为您正在使用的 IoC 容器获取 NuGet 包。在 NuGet 中搜索 SharpRepository.Ioc，您将看到我们创建并开箱即用的 5 个 IoC 包（Autofac、Ninject、StructureMap、Unity 和 Windsor），如果您使用的是我们现在不涉及的不同 IoC。

安装后，您需要在 App_Start 代码、Global.asax 或引导程序代码中设置 RepositoryDe​​pendencyResolver，以便它在应用程序启动时运行。以下是使用 StructureMap 时的操作方法。

```
RepositoryDependencyResolver.SetDependencyResolver(new StructureMapDependencyResolver(ObjectFactory.Container)); 
```

我告诉它使用 StructureMap 并传入容器。然后，您只需确保 IoC 已设置并知道如何处理对 DbContext 的请求。（有关在 StructureMap 中使用 ASP.NET 请求生命周期的示例，请参见上文）

# webview - Titanium 3.0 移除 Webview 投影

> ID：15273075
> 
> 赞同：0
> 
> 时间：2013-03-07T13:57:35.140
> 
> 标签：webview, titanium, appcelerator, shadow

在钛 3.0 中，我无法完全删除 web 视图在 iOS 上的过度滚动阴影。我根本不想禁用滚动，我喜欢反弹效果，我只想让阴影消失。

我已经尝试过 1.8.2 SDK hack，但没有奏效。

我把它们放在一个滚动视图中并且部分工作，我的意思是一个新创建的 webview 已经删除了它的阴影，但是当导航回以前的 webview 时，阴影会返回。

有人知道解决这个问题的明确方法吗？我已经搜索了很长时间，发现绝对没有完全有效的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:50:33.537

你试过这个吗？

```
var window = Ti.UI.createWindow();

var scroll = Ti.UI.createScrollView();
var webView = Ti.UI.createWebView({
    url : "http://www.ieee.org/conferences_events/conferences/publishing/templates.html",
    disableBounce : true,
    height : Ti.UI.SIZE
});
scroll.add(webView);
window.add(scroll);
window.open(); 
```

这只是使 web 视图具有其内容的大小，并将其放入滚动视图中，滚动视图仍然提供您喜欢的反弹，而没有阴影。

我不确定我是否知道“导航回阴影返回的前一个 web 视图”是什么意思，但这种方法对我有用。有时它需要一些 JavaScript eval 注入来修复边距并移除滚动，但除此之外它很好。

# sql - 使用 .txt 文件中的数据作为对日期时间的约束

> ID：15273076
> 
> 赞同：1
> 
> 时间：2013-03-07T13:57:35.883
> 
> 标签：sql, sql-server-2005, datetime

我正在寻找一些建议，我正在寻找是否可以使用从批处理文件中的批处理文件代码生成的文本文件中的日期和时间，将日期设置如下：

```
set datetimef=%date:~-4%-%date:~3,2%-%date:~0,2% %time%
echo %datetimef% >C:\Desktop\Andy\DateTime1.txt 
```

输出输出格式如下：2013-03-07 13:04:55.02

对 SQL 跟踪文件的 StartTime 使用，所以最终它会像

```
SET NOCOUNT ON;
go
select StartTime from fn_trace_gettable ('C:\desktop\Andy\AndyTestTrace3.trc', default) 
WHERE StartTime >= **--the value from the DateTime1.txt file--** 
```

如果我指定它工作的时间没有问题，但是每次运行另一个批处理文件时都会生成 datetime1.txt 文件，其想法是显示自上次运行批处理文件以来发生的跟踪，因为它从跟踪文件转换为平面文件。

# html - 图像未按应有的方式显示

> ID：15273077
> 
> 赞同：-1
> 
> 时间：2013-03-07T13:57:36.340
> 
> 标签：html, css

因为我的工作，我必须学习 html 和 CSS。所以它发生得很快，我遇到了一个我找不到解决方案的问题。

这个CSS：

```
#footer{
    height: 207px;
    margin-top: 7px;
    background: url(img/footer.jpg);
    background-repeat: no-repeat;
}
#footer.menue{
    height: 25px;
    background-image: url(img/menue.jpg);
    background-repeat: no-repeat; 
```

应该将两张图片带到网站上，但只显示第一张。

HTML

```
 <div id="footer">
            <ul class="menue">
                <li><a href="#Links">Links</a></li>
                <li><a href="#Kontakt">Kontakt</a></li>
                <li><a href="#Impressum">Impressum</a></li>
            </ul>
        </div> 
```

[已解决：] [http://jsbin.com/utupat/1/edit](http://jsbin.com/utupat/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:07:49.040

如果您使用的是 html 代码：

```
<div id="footer" class="menue"></div> 
```

和CSS作为

```
#footer{
    height: 207px;
    margin-top: 7px;
    background: url(img/footer.jpg);
    background-repeat: no-repeat;
}
#footer.menue{
    height: 25px;
    background-image: url(img/menue.jpg);
    background-repeat: no-repeat; } 
```

你对一个 div 使用相同的高度，他将使用第二个 - 25px 并忽略第一个。你也不能有 2 个背景图像一个 div，他只会使用一个。如果你想要多个背景图片，你必须使用 css3 功能[多个背景图片在一个 div](https://stackoverflow.com/questions/9070362/multiple-background-images-in-one-div)

# jquery - 使用 jQuery Datatables 设置新行的样式

> ID：15273080
> 
> 赞同：0
> 
> 时间：2013-03-07T13:57:39.040
> 
> 标签：jquery, datatables

我正在使用 jQuery Datatables 插件并在通过 JSON 从 AJAX 传回数据后添加新行。

数据添加得很好，但是我希望除第 2 列之外的所有列都具有 padding-top: 14px 但是我的代码出于某种原因仅将其应用于添加的第一行。

```
$( data['table_data'] ).each(function( index, domEle) {

var a = oTable.fnAddData( [
    domEle['rownum'],
    domEle['logo'],
    domEle['total_impressions'],
    domEle['total_clicks'],
    domEle['ecpm'],
    domEle['total_media_cost'],
    domEle['total_media_cost_diff'],
    domEle['total_spend'],
    domEle['total_spend_diff']

]);

var nTr = oTable.fnSettings().aoData[ a[0] ].nTr;
$('td:eq(0),td:eq(2),td:eq(3),td:eq(4),td:eq(5),td:eq(6),td:eq(7),td:eq(8)').css('padding-top', '10px');

}); 
```

谁能阐明如何使其适用于每一行？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:12:48.693

尝试：

```
$("tr").each(function(){
    $(this).find("td:not(:eq(1))").css({
        'padding-top': '14px',
        'color': 'blue'
    });
}); 
```

[在这里](http://jsfiddle.net/ypcHL/)提琴

# installation - TideSDK - 添加安装选项

> ID：15273081
> 
> 赞同：0
> 
> 时间：2013-03-07T13:57:43.517
> 
> 标签：installation, tidesdk

我需要让用户在安装时设置一些选项。然后需要可以从应用程序中读取选项集。

选项将是一些简单的键/值，以纯文本形式。

有没有办法用 TideSDK 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:47:00.890

您能否详细说明您希望用户在安装时如何从安装程序/安装时输入键值对？

当前的安装程序不提供任何类型的功能来设置这样的变量，但是您可以使用 TideSDK / webkit 中内置的 sqlite 数据库轻松地做到这一点。

您可以通过在数据库中设置标志来检测应用程序的第一次运行。并要求用户输入您希望他添加并存储的参数（键/值）。

# jquery - 第二页不会显示jquery mobile

> ID：15273083
> 
> 赞同：1
> 
> 时间：2013-03-07T13:57:48.903
> 
> 标签：jquery, cordova, jquery-mobile

我将我的 Android 应用程序从 cordova-1.6.1 升级到了 cordova-2.5.0。另外，我从 jquery.mobile-1.1.0 升级到 jquery.mobile-1.3.0.js。我在 Android 2.3.3 上运行我的应用程序。第一个页面 index.html 是一个闪屏，3 秒后进入页面 login.html。第一页，启动页，显示正确，但第二页出现空白，即使我链接到第一页之外的另一页。这一切在我升级之前都有效。我更进一步，将所有 login.html 页面内容复制到 index.html，它正确显示了我的登录表单。然后无论下一页要显示它都是空白的。这是我正在使用的代码：

```
 <!DOCTYPE HTML>
        <html>
        <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <title>AFitnessPal</title>

        <script src="jquery.mobile/jquery-1.9.0.js"></script>
        <link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.3.0.css" />
        <script src="jquery.mobile/jquery.mobile-1.3.0.js"></script>
        <script type="text/javascript" charset="utf-8"  src="javascripts/cordova-2.5.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="javascripts/DBAdapter.js"></script>

        </head>
        <body>
            <div data-role="page" id="indexpage" data-dom-cache="false">

                <div data-role="header" data-position="inline">
                    <h1>AFitnessPal</h1>

                </div>

                <div data-role="content">
                    <ul id="LoginForm" data-role="listview">
                        <li data-role="fieldcontain"><label for="name">Login
                                ID:</label> <input type="text" maxlength="100" name="loginID" id="loginID"
                            value="" /></li>
                        <li data-role="fieldcontain"><label for="name">Password:</label>
                            <input type="password" maxlength="100" name="loginPassword"
                            id="loginPassword" value="" /></li>
                        <li data-role="fieldcontain"><label for="slider2">Remember
                                login:</label> <select name="RememberLogin" id="RememberLogin"
                            data-role="slider">
                                <option value="0">No</option>
                                <option value="1">Yes</option>
                        </select></li>
                        <li class="ui-body ui-body-b">
                            <fieldset class="ui-grid-a">

                                <div class="ui-block-b">
                                    <button onclick="javascript:DoLogin();" data-theme="a">Submit</button>
                                </div>

                            </fieldset>
                        </li>
                        <li class="ui-body ui-body-b">
                            <div align="center">
                                <a href="CreateAccount.html"> Create New Account</a>
                            </div>
                        </li>
                    </ul>

                </div>
                <script type="text/javascript" charset="utf-8">
             function goToLogin()
             {
                 $.mobile.changePage("Login.html", { transition: "flip"} );

             }

              $("#indexpage").on('pageinit', function(){
                  alert('login.html pageinit fired');

                });

                $("#indexpage").on("pageshow", function(e) {
                    alert('login.html pageshow fired');

                  });

            </div>
        </body>
        </html> 
```

# jquery - 无法触发图像点击事件

> ID：15273084
> 
> 赞同：-2
> 
> 时间：2013-03-07T13:57:49.763
> 
> 标签：jquery, html

我有这样的代码：

我想为 DIV 元素内的 2 个图像触发单击事件，但第 2 个图像单击事件不起作用

```
<ul style="float: left; width: 898px; margin: 0px; overflow: hidden; position: relative; top: 0px; padding: 0px; left: 0px;" class="jcarousel-list jcarousel-list-horizontal" id="mycarousel">
            <li class="jcarousel-item jcarousel-item-horizontal jcarousel-item-1 jcarousel-item-1-horizontal" style="float: left; list-style: none outside none; width: 52px;" jcarouselindex="1">
                <div style="position: relative">
                    <img width="40" height="40" style="cursor: pointer" title="Project 010" alt="image" class="5137aa052acf96352027d9a0|Project 010|Employee|5/1/2004|6/1/2011||||Descriptions**True|Skills**True|Client**true|Achievements**True|Memberships**False|Org Chart**False|Specialization**False|Get Ratings**False|" src="../Images/DefaultPhotoMale.png" id="img5137aa052acf96352027d9a0">
                    <img class="imgProjectDelete" style="position: absolute; display: none; top: 4px; right: 5px" src="../Images/RemoveButton.ico">
                </div>
            </li>
            <li class="jcarousel-item jcarousel-item-horizontal jcarousel-item-2 jcarousel-item-2-horizontal" style="float: left; list-style: none outside none; width: 52px;" jcarouselindex="2">
                <div style="position: relative">
                    <img width="40" height="40" style="cursor: pointer" title="Project 009" alt="image" class="5137aa052acf96352027d995|Project 009|Employee|5/1/2002|5/1/2004||||Descriptions**True|Skills**True|Client**true|Achievements**True|Memberships**False|Org Chart**False|Specialization**False|Get Ratings**False|" src="../Images/DefaultPhotoMale.png" id="img5137aa052acf96352027d995">
                    <img class="imgProjectDelete" style="position: absolute; top: 4px; right: 5px; display: none;" src="../Images/RemoveButton.ico">
                </div>
            </li>
            <li class="jcarousel-item jcarousel-item-horizontal jcarousel-item-3 jcarousel-item-3-horizontal" style="float: left; list-style: none outside none; width: 52px;" jcarouselindex="3">
                <div style="position: relative">
                    <img width="40" height="40" style="cursor: pointer" title="Project 008" alt="image" class="5137aa052acf96352027d987|Project 008|Employee|6/1/1994|5/1/2002||||Descriptions**True|Skills**True|Client**true|Achievements**False|Memberships**False|Org Chart**False|Specialization**False|Get Ratings**False|" src="../Images/DefaultPhotoMale.png" id="img5137aa052acf96352027d987">
                    <img class="imgProjectDelete" style="position: absolute; display: none; top: 4px; right: 5px" src="../Images/RemoveButton.ico">
                </div>
            </li>
        </ul> 
```

我累的是：-

第一个图像点击事件是这样的，并且工作正常

```
 $("#mycarousel").find("img").live("click", function () {

    }); 
```

第二张图片点击事件是这样的，并且不起作用

```
 $("#mycarousel").find(".imgProjectDelete").live("click", function () {
        alert("You CLick on Delete");
    }); 
```

无论如何我都想删除点击事件！，无论我们使用其他元素作为第二张图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:35:23.800

好的，我将第二张图片更改为

并写下以下内容，它正在工作

```
$("#mycarousel").find("a").live("click", function () {

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:00:58.103

尝试

```
$(document).on("click","#mycarousel .imgProjectDelete",function(e){
//your code
}); 
```

或者如果您使用的是旧版本的 jquery，请使用`.delegate`

```
$(document).delegate("#mycarousel .imgProjectDelete","click",function(e){
//your code
}); 
```

# mp3 - 多个播放列表 MP3 Flash Player

> ID：15273085
> 
> 赞同：0
> 
> 时间：2013-03-07T13:57:51.290
> 
> 标签：mp3, flash, playlist

我想根据发送的参数播放一首歌曲。

在我的项目中，我有不同的播放列表，所以我想发送参数（这是一个数字，对应于一个播放列表），然后只听该播放列表中的歌曲。关于我该怎么做的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:17:48.527

不幸的是，正如我在 Flash 网页上阅读的那样，此功能未实现。这就是我现在使用 jQuery jPlayer 的原因

# sql - 使用联合更新

> ID：15273088
> 
> 赞同：0
> 
> 时间：2013-03-07T13:58:02.923
> 
> 标签：sql, oracle

如何使用 select for update 子句通过 union 锁定表。

这可能吗

```
select * from table_a,table_b
where table_a.join_col=table_b.join_col
for update table_a.col1
union
select * from table_a 
```

但这是不可能的，因为我们不能将 for update 与 union 一起使用。

你能帮我么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:22:54.807

Oracle 文档声称：

*FOR UPDATE*
子句的限制 此子句受以下限制：
您不能使用以下其他构造指定此子句：DISTINCT 运算符、CURSOR 表达式、集合运算符、group_by_clause 或聚合函数。

# html - 定位表

> ID：15273092
> 
> 赞同：-1
> 
> 时间：2013-03-07T13:58:17.247
> 
> 标签：html, css, html-table

我试图让文本位于图像的中心。

```
<table width="261" height="253" cellspacing="0" cellpadding="0" align="left" style="margin-left: 0px; margin-top: 0px; margin-right: 5px; border-collapse: collapse;">
  <tbody>
    <tr>
      <td style="vertical-align: top; letter-spacing: 0px; word-spacing: 0px; background-image: none; background-repeat: repeat; background-position: 0% 0%; height: 235px; padding-left: 10px; padding-right: 10px; padding-top: 0px;">
        <p> 
          <table width="" cellpadding="0" align="center" style="border-collapse: collapse; margin-top: 0px; margin-right: 0px; margin-left: 40px; width: 189px; height: 121px;">
            <tbody>
              <tr>
                <td><span style="font-family: Tahoma;"><span style="font-weight: bold;">Lorem Ipsum</span> is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer </span></td>
              </tr>
            </tbody>
          </table><img src="/resource/resmgr/boxes/box_connect2.png" title="" alt="" /></p></td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:11:50.583

首先，让你的 CSS 脱离内联并放入适当的 CSS 文件中。

这是清理和一种可能的解决方案：

[http://jsfiddle.net/UD2XV/](http://jsfiddle.net/UD2XV/)

**HTML**

```
<table cellspacing="0" cellpadding="0" class="outer_table">
  <tbody>
    <tr>
      <td class="outer_td">

          <table width="" cellpadding="0" class="inner_table">
            <tbody>
              <tr>
                <td>
                    <span class="inner_text">Lorem Ipsum</span> 
                    is simply dummy text of the printing and typesetting industry. 
                    Lorem Ipsum has been the industry's standard dummy text ever since 
                    the 1500s, when an unknown printer
                </td>
              </tr>
              <tr>
                  <td>
                      <img src="/resource/resmgr/boxes/box_connect2.png" title="" alt="" />
                  </td>
              </tr>
            </tbody>
          </table>

        </td>
    </tr>
  </tbody>
</table> 
```

**CSS**

```
.outer_table { width:261px; height:253px; margin-left: 0px; margin-top: 0px; margin-right: 5px; border-collapse: collapse; text-align:left;}

.inner_table{border-collapse: collapse; margin-top: 0px; margin-right: 0px; margin-left: 40px; width: 189px; height: 121px; text-align:center;}

.outer_td {vertical-align: top; letter-spacing: 0px; word-spacing: 0px; background-image: none; background-repeat: repeat; background-position: 0% 0%; height: 235px; padding-left: 10px; padding-right: 10px; padding-top: 0px;}

.inner_td{font-family: Tahoma;}

.inner_text {font-weight: bold; font-family: Tahoma;} 
```

# testing - “service_name”下无法识别的选项“service_name” - Symfony2 配置生成器

> ID：15273093
> 
> 赞同：4
> 
> 时间：2013-03-07T13:58:17.833
> 
> 标签：testing, symfony, bundle

我正在尝试在我的捆绑包中测试配置生成器：

这是我的 DependencyInjection/Configuration.php

```
class Configuration implements ConfigurationInterface
{
    /**
     * Generates the configuration tree.
     *
     * @return TreeBuilder
     */
    public function getConfigTreeBuilder()
    {
        $treeBuilder = new TreeBuilder();
        $rootNode = $treeBuilder->root('product_viewer');

        $supportedDrivers = array('REST', 'SOAP');

        $rootNode->children()
            ->arrayNode('car')
                ->children()
                    ->scalarNode('webservice_type')
                        ->validate()
                            ->ifNotInArray($supportedDrivers)
                            ->thenInvalid('The driver %s is not supported. Please choose one of '.json_encode($supportedDrivers))
                        ->end()                
                    ->end()                
                    ->scalarNode('rest_url')->end()
                ->end()
            ->end();                

        return $treeBuilder;
    }
} 
```

我的测试：

```
 /**
  * @test
  */
public function fullCondig() {
    $extension = new ProductCalculatorExtension();
    $config = $this->loadConfig('config1'); //this method only load yaml from file and parse it 
    $extension->load(array($config), new ContainerBuilder());
} 
```

和测试配置看起来像：

```
product_viewer:
    car : 
        webservice_type : REST
        rest_url: 'example.com' 
```

不幸的是，我得到的每一个测试：

> Symfony\Component\Config\Definition\Exception\InvalidConfigurationException：“product_viewer”下无法识别的选项“product_viewer”

我不知道这里有什么问题？

# php - 如何确保通过 PHP 发送即时电子邮件

> ID：15273094
> 
> 赞同：0
> 
> 时间：2013-03-07T13:58:18.057
> 
> 标签：php, sendmail

我已经为用户注册了一个注册页面，当用户注册时，一封确认电子邮件将发送到用户电子邮件地址。但是 PHP mail() 函数有时会立即发送电子邮件，有时会在几分钟后发送电子邮件，而且邮件也会进入垃圾邮件箱。我见过很多论坛，邮件是立即发送的，不会进入垃圾邮件箱，而是直接进入收件箱。

我怎样才能解决我上面提到的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:06:37.747

关于您的滞后：您可以将消息保存在数据库中，并每分钟使用一个 cron 来发送队列中的邮件。用户通常会在 1 分钟内收到消息。

关于您的垃圾邮件问题：使用像[http://www.sendgrid.com这样的 SaaS](http://www.sendgrid.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T16:59:06.483

Mailchimp 会更好：[http ://mailchimp.com/](http://mailchimp.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:05:53.000

仅使用 PHP 无法加快发送邮件的过程。至于垃圾邮件问题，这是 PHP`mail()`函数的众多问题之一。您可以查看被标记为垃圾邮件的电子邮件的标题，通常它应该给出一些关于为什么它是垃圾邮件的指示。此外，请检查您发送的电子邮件中的标题。正如我所说，该`mail()`功能可能很难使用。选择更好的解决方案：

[PHP 邮件程序](https://code.google.com/a/apache-extras.org/p/phpmailer/)或[Swift 邮件程序](http://swiftmailer.org/)

# tsql - SQL 查询在 case 之后添加一列，该列是行的总和

> ID：15273097
> 
> 赞同：0
> 
> 时间：2013-03-07T13:58:38.893
> 
> 标签：tsql

如果下面的代码冒犯了任何专业人士，让我事先道歉，现在问题是：在完成以下位后，它会准确地吐出我正在寻找的内容，如果该列有一个字符串，如果没有，我会得到 1一个零。我的意图是添加第 7 列，将它们加起来，以便我可以将其汇集到报告中的一个等式中，并将其与另一列进行比较。我确信可以在查询中做，我只是不知道怎么做。服务器是sql 2008

```
 select CASE
WHEN [1  First Name] = ''
THEN 1
ELSE 0
    END as "First Name 1",
    CASE
WHEN [1  Last Name] = ''
THEN 1
ELSE 0
    END as "Last Name 1",
    CASE
WHEN [2  First Name] = ''
THEN 1
ELSE 0
    END as "First name 2",
    CASE
WHEN [2  Last Name] = ''
THEN 1
ELSE 0
    END as "Last Name 2",
    CASE
WHEN [3  First Name] = ''
THEN 1
ELSE 0
    END as "First Name 3",
    CASE
WHEN [3  Last Name] = ''
THEN 1
ELSE 0
    END as "Last Name 3"
    FROM
    member 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:07:21.660

这将为所有行和列求和你的 1

```
SELECT
    X.*,
    "First Name 1"+
        "Last Name 1"+
        "First name 2"+
        "Last Name 2"+
        "First Name 3"+
        "Last Name 3" AS TheSum
FROM
    (
    SELECT
        CASE WHEN [1  First Name] = '' THEN 1 ELSE 0 END as "First Name 1",
        CASE WHEN [1  Last Name] = '' THEN 1 ELSE 0 END as  "Last Name 1",
        CASE WHEN [2  First Name] = '' THEN 1 ELSE 0 END as "First name 2",
        CASE WHEN [2  Last Name] = '' THEN 1 ELSE 0 END as  "Last Name 2",
        CASE WHEN [3  First Name] = '' THEN 1 ELSE 0 END as "First Name 3",
        CASE WHEN [3  Last Name] = '' THEN 1 ELSE 0 END as  "Last Name 3"
    FROM
        member
    ) X 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:00:09.800

除非我遗漏了一些东西，否则您可以将当前查询放在子查询中，然后添加一个包含总数的列：

```
select "First Name 1",
    "Last Name 1",
    "First name 2",
    "Last Name 2",
    "First Name 3",
    "Last Name 3",
    ("First Name 1" +"Last Name 1"+"First name 2"+"Last Name 2"+"First Name 3"+"Last Name 3") As total
from
(
    select CASE
            WHEN [1  First Name] = '' THEN 1 ELSE 0
        END as "First Name 1",
        CASE
            WHEN [1  Last Name] = '' THEN 1 ELSE 0
        END as "Last Name 1",
        CASE
            WHEN [2  First Name] = '' THEN 1 ELSE 0
        END as "First name 2",
        CASE
            WHEN [2  Last Name] = '' THEN 1 ELSE 0
        END as "Last Name 2",
        CASE
            WHEN [3  First Name] = '' THEN 1 ELSE 0
        END as "First Name 3",
        CASE
            WHEN [3  Last Name] = '' THEN 1 ELSE 0
        END as "Last Name 3"
    FROM member
) m 
```

# ios - 当虚拟键盘在 Mobile Safari 中打开时，如何阻止我的固定导航像这样移动？

> ID：15273098
> 
> 赞同：55
> 
> 时间：2013-03-07T13:58:43.543
> 
> 标签：ios, css, mobile, position, mobile-safari

我知道移动 safari 有很多关于固定元素的错误，但在大多数情况下，我已经设法让我的布局正常工作，直到我在底部的固定导航中添加了非常需要的文本输入。现在，当用户专注于文本输入元素并出现虚拟键盘时，我的导航（否则总是固定在页面底部）跳到页面中间一个非常奇怪的位置。

![在此处输入图像描述](../Images/b31789ce8597040b94caf19a3bf2796a.png)

我会在这篇文章中添加一些代码，但我不确定从哪里开始。该导航固定在底部并定位在左侧和底部 0 处，宽度为 100%。从那里，我不知道发生了什么，我只能假设这是一个移动 safari 错误。

它似乎也失去了它的固定位置并变得相对，只有在文本输入元素被聚焦并且虚拟键盘打开时。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T14:46:33.020

[http://dansajin.com/2012/12/07/fix-position-fixed/](http://dansajin.com/2012/12/07/fix-position-fixed/)这是提出的解决方案之一。似乎值得一试。

简而言之：当任何输入被编辑时设置`fixed`元素并在该元素为红色时重置它们`position:absolute``focus``blur`

```
.header { 
    position: fixed; 
} 
.footer { 
    position: fixed; 
} 
.fixfixed .header, 
.fixfixed .footer { 
    position: absolute; 
} 
```

和

```
if ('ontouchstart' in window) {
    /* cache dom references */ 
    var $body = $('body'); 

    /* bind events */
    $(document)
    .on('focus', 'input', function() {
        $body.addClass('fixfixed');
    })
    .on('blur', 'input', function() {
        $body.removeClass('fixfixed');
    });
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-12-10T19:33:26.303

上面的解决方案是解决问题的一些方法，但我认为添加额外的 css 类或使用 moderniz 会使事情复杂化。

如果您想要一个更简单的解决方案，这里是一个**非modernizr** **非额外 css**但纯**jquery 解决方案**，适用于所有设备和浏览器我在所有项目中都使用此修复

```
if ('ontouchstart' in window) {
    $(document).on('focus', 'textarea,input,select', function() {
        $('.navbar.navbar-fixed-top').css('position', 'absolute');
    }).on('blur', 'textarea,input,select', function() {
        $('.navbar.navbar-fixed-top').css('position', '');
    });
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-24T01:34:49.420

我有一个类似的问题，但我找到了一种解决方法，方法是在输入焦点上将以下 css 类添加到 body 元素，然后在 unfocus 上再次将其删除：

```
.u-oh {
    overflow: hidden;
    height: 100%;
    width: 100%;
    position: fixed;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-16T00:38:55.937

从 sylowgreen 所做的事情来看，关键是`body`在进入`input`. 因此：

```
$("#myInput").on("focus", function () {
    $("body").css("position", "fixed");
});

$("#myInput").on("blur", function () {
    $("body").css("position", "static");
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-17T09:30:19.293

像这样添加javascript：

```
$(function() {
  var $body;
  if ('ontouchstart' in window) {
    $body = $("body");
    document.addEventListener('focusin', function() {
      return $body.addClass("fixfixed");
    });
    return document.addEventListener('focusout', function() {
      $body.removeClass("fixfixed");
      return setTimeout(function() {
        return $(window).scrollLeft(0);
      }, 20);
    });
  }
}); 
```

并添加这样的类：

```
.fixfixed header{ 
    position: absolute; 
} 
```

你可以参考这篇文章：[http ://dansajin.com/2012/12/07/fix-position-fixed/](http://dansajin.com/2012/12/07/fix-position-fixed/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-19T11:06:08.887

我真的很喜欢上面的解决方案。我将它打包成一个小的 jQuery 插件，这样我就可以：

*   设置哪个父母获得班级
*   设置适用于哪些元素（不要忘记“textarea”和“select”）。
*   设置父类名是什么
*   允许它被链接
*   允许多次使用

代码示例：

```
$.fn.mobileFix = function (options) {
    var $parent = $(this),
    $fixedElements = $(options.fixedElements);

    $(document)
    .on('focus', options.inputElements, function(e) {
        $parent.addClass(options.addClass);
    })
    .on('blur', options.inputElements, function(e) {
        $parent.removeClass(options.addClass);

        // Fix for some scenarios where you need to start scrolling
        setTimeout(function() {
            $(document).scrollTop($(document).scrollTop())
        }, 1);
    });

    return this; // Allowing chaining
};

// Only on touch devices
if (Modernizr.touch) {
    $("body").mobileFix({ // Pass parent to apply to
        inputElements: "input,textarea,select", // Pass activation child elements
        addClass: "fixfixed" // Pass class name
    });
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-22T20:51:09.120

我使用这个 jQuery 脚本：

```
var focus = 0;
var yourInput = $(".yourInputClass");
yourInput.focusin(function(){
    if(!focus) {
        yourInput.blur();
        $("html, body").scrollTop($(document).height());
        focus = 1;
    }
    if(focus) {
        yourInput.focus();
        focus = 0;
    }
}); 
```

非常适合我。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-06T09:12:55.540

`focusin`and`focusout`事件似乎比 and 事件更适合这个问题，`focus`因为`blur`前者冒泡到根元素。在 SO 上看到[这个答案。](https://stackoverflow.com/a/19464062/2619800)

我个人使用AngularJS，所以我是这样实现的：

```
$window.document.body.addEventListener('focusin', function(event) {
    var element = event.target;
    var tagName = element.tagName.toLowerCase();
    if(!$rootScope.inputOverlay && (tagName === 'input' || tagName === 'textarea' || tagName === 'select')) {
        $rootScope.$apply(function() {
            $rootScope.inputOverlay = true;
        });
    }
});
$window.document.body.addEventListener('focusout', function() {
    if($rootScope.inputOverlay) {
        $rootScope.$apply(function() {
            $rootScope.inputOverlay = false;
        });
    }
}); 
```

**注意：**如果这是移动 Safari，我将有条件地运行此脚本。

我在导航栏上放了一个`ng-class`属性：

```
<div class="navbar navbar-default navbar-fixed-top" ng-class="{'navbar-absolute': inputOverlay}"> 
```

使用以下 CSS：

```
.navbar-absolute {
    position: absolute !important;
} 
```

`focusin` [您可以在此处](https://developer.mozilla.org/en-US/docs/Web/Events/focusin)和`focusout` [此处](https://developer.mozilla.org/en-US/docs/Web/Events/focusout)阅读更多信息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-30T00:19:06.983

这些解决方案都不适合我，因为我的 DOM 很复杂，而且我有动态无限滚动页面，所以我必须创建自己的。

**背景：**我正在使用一个固定的标题和一个更向下的元素，一旦用户向下滚动那么远，它就会粘在它下面。该元素有一个搜索输入字段。此外，我在向前和向后滚动期间添加了动态页面。

**问题：**在 iOS 中，只要用户单击固定元素中的输入，浏览器就会一直滚动到页面顶部。这不仅导致了不良行为，还触发了我在页面顶部添加动态页面。

**预期的解决方案：**当用户单击粘性元素中的输入时，iOS 中没有滚动（根本没有）。

**解决方案：**

```
 /*Returns a function, that, as long as it continues to be invoked, will not
    be triggered. The function will be called after it stops being called for
    N milliseconds. If `immediate` is passed, trigger the function on the
    leading edge, instead of the trailing.*/
    function debounce(func, wait, immediate) {
        var timeout;
        return function () {
            var context = this, args = arguments;
            var later = function () {
                timeout = null;
                if (!immediate) func.apply(context, args);
            };
            var callNow = immediate && !timeout;
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
            if (callNow) func.apply(context, args);
        };
    };

     function is_iOS() {
        var iDevices = [
          'iPad Simulator',
          'iPhone Simulator',
          'iPod Simulator',
          'iPad',
          'iPhone',
          'iPod'
        ];
        while (iDevices.length) {
            if (navigator.platform === iDevices.pop()) { return true; }
        }
        return false;
    }

    $(document).on("scrollstop", debounce(function () {
        //console.log("Stopped scrolling!");
        if (is_iOS()) {
            var yScrollPos = $(document).scrollTop();
            if (yScrollPos > 200) { //200 here to offset my fixed header (50px) and top banner (150px)
                $('#searchBarDiv').css('position', 'absolute');
                $('#searchBarDiv').css('top', yScrollPos + 50 + 'px'); //50 for fixed header
            }
            else {
                $('#searchBarDiv').css('position', 'inherit');
            }
        }
    },250,true));

    $(document).on("scrollstart", debounce(function () {
        //console.log("Started scrolling!");
        if (is_iOS()) {
            var yScrollPos = $(document).scrollTop();
            if (yScrollPos > 200) { //200 here to offset my fixed header (50px) and top banner (150px)
                $('#searchBarDiv').css('position', 'fixed');
                $('#searchBarDiv').css('width', '100%');
                $('#searchBarDiv').css('top', '50px'); //50 for fixed header
            }
        }
    },250,true)); 
```

**要求：**需要 JQuery mobile 才能使startsroll 和stopscroll 功能正常工作。

包含去抖动以消除粘性元素产生的任何滞后。

在 iOS10 中测试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-27T18:51:08.810

测试这个。有用。我只是测试一下。

```
$(document).on('focus','input', function() {
    setTimeout(function() {
        $('#footer1').css('position', 'absolute');
        $('#header1').css('position', 'absolute');
    }, 0);
});
$(document).on('blur','input', function() {
    setTimeout(function() {
        $('#footer1').css('position', 'fixed');
        $('#header1').css('position', 'fixed');
    }, 800);
}); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-05-19T15:12:40.833

我对 Dan Sajin 提出的解决方案没有任何运气。也许自从他写了那篇博文后这个 bug 已经改变了，但是在 iOS 7.1 上，当输入模糊后位置变回固定时，这个 bug 总是会出现，即使你延迟到软件键盘完全隐藏。我提出的解决方案涉及等待`touchstart`事件而不是`blur`事件，因为当页面滚动时，固定元素总是会重新回到正确的位置。

```
if (Modernizr.touch) {
  var $el, focused;
  $el = $('body');
  focused = false;
  $(document).on('focus', 'input, textarea, select', function() {
    focused = true;
    $el.addClass('u-fixedFix');
  }).on('touchstart', 'input, textarea, select', function() {
    // always execute this function after the `focus` handler:
    setTimeout(function() {
      if (focused) {
        return $el.removeClass('u-fixedFix');
      }
    }, 1);
  });
} 
```

高温高压

# razor - MVC 4 - 如何在视图中将 linq 返回到实体查询结果

> ID：15273107
> 
> 赞同：3
> 
> 时间：2013-03-07T13:59:47.040
> 
> 标签：razor, asp.net-mvc-4, linq-to-entities, entity-framework-5

使用控制器索引操作中的下一个代码，我尝试在剃刀视图中显示 2 个字段内容：

```
public class MyController : Controller
{
   private MyEntities db = new MyEntities();
   public ActionResult Index()
      {
         IEnumerable<Prod> signatures = from Prod in db.Products
                                        select new Prod(Prod.ProductID, Prod.ProductName);
      }
} 
```

以前我在模型文件夹中创建了一个类并将其命名为“ **Prod** ”：

```
public class Prod
{
   public int ProductID { get; set; }
   public string ProductName { get; set; }
} 
```

但是当我运行该项目时，我陷入了下一个错误：

```
MyProject.Controllers.MyController.Index() 
```

**并非所有代码路径都返回值**

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:20:08.693

Sami-L，您的 Prod 类没有专门的构造函数，即接受一些初始化值的构造函数。您的操作应该是这样的：

```
public ActionResult Index()
{
    IEnumerable<Prod> signatures = from p in db.Products
                                    select new Prod
                                    {
                                        ProductId = p.ProductID, 
                                        ProductName = p.ProductName
                                    };
    return View(signatures); 
} 
```

请注意花括号“{”而不是“（”大括号。这应该有助于解决您遇到的构造函数错误。

更新：我已将您的 LINQ 查询中的参数从 重命名`Prod`为`p`。以您指定的方式使用 Prod 使编译器认为您的 ProductID 和 ProductName 是静态属性。通过在此之后重命名参数`from`应该有助于解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T14:02:15.147

我认为您只是缺少`return`声明。

```
public ActionResult Index()
{
    IEnumerable<Prod> signatures = from Prod in db.Products
                                        select new Prod(Prod.ProductID, Prod.ProductName);
    return View(signatures);  // this is missing
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T14:08:30.130

您缺少`return`元素。您需要将其包装在 a 中`View`，以便您的 Index razor 视图将通过 Prod 列表。

```
public ActionResult Index()
{
    IEnumerable<Prod> signatures = from Prod in db.Products
                                   select new Prod(Prod.ProductID, Prod.ProductName);
    return View(signatures);  // add this
} 
```

在 Index.cshtml 中，您还可以声明模型，以便视图是强类型的，即

```
@model IEnumerable<MyProject.Models.Prod>

<table>
  @foreach(var prod in Model)
  {
    <tr>
      <td>@prod.ProductID</td>
      <td>@prod.ProductName</td>
    </tr>
  }
</table> 
```

# c# - 图像不显示在 Chrome 和 FF 上

> ID：15273108
> 
> 赞同：3
> 
> 时间：2013-03-07T13:59:49.597
> 
> 标签：c#, asp.net, mysql

我将图像存储在 mysql 数据库中，并在图像路径和名称的帮助下使用图像超链接在数据列表中检索图像。现在我面临一个问题，图像显示在 IE 上，但不在 FF 和 chrome 上。我的侧aspx代码如下：

```
 <div>
    <asp:DataList ID="dtlistImages" runat="server" RepeatColumns="5" RepeatDirection="Horizontal"
                        BorderColor="#336699" BorderStyle="Solid" BorderWidth="2px">
            <ItemTemplate>

            <asp:hyperlink ID="Hyperlink1" style="float:right; margin:5px; margin-left:10px; border:2px solid #BAB9BE;" Width="90px" Height="95px" runat="server" NavigateURL='<%# Eval("img_big") %>' ImageUrl='<%# Eval("img_tb") %>' Autopostback="true" />    </br>
                 <asp:Label ID="lblID" runat="server" Text='<%# Eval("pageNumber") %>' Font-Bold="true"
                            Font-Size="10pt" ForeColor="#336699" Width="100%"/>                            
                 </ItemTemplate>
                 <ItemStyle HorizontalAlign="Center" VerticalAlign="Top" />    
    </asp:DataList>
    </div> 
```

在 chrome 上显示快照的图像就像（不显示图像）： ![在此处输入图像描述](../Images/4620be3990d19bce1d89629ddf8aa11a.png)

在 IE 上显示快照的图像类似于（显示图像）： ![在此处输入图像描述](../Images/4870a42d2714a1813468b54baa6245e0.png)

我面临的真正问题是什么。我使用 html 图像标签、asp Image、ImageButton 但不显示单个图片缩略图。为什么？？？？当我看到视图源时，缩略图源是准确的，但未在数据列表中显示图像。这个问题是我只在 FF 和 Chrome 上面临的，IE 显示我想要的。请帮助我摆脱困境。图像存储在 Mysql 中，我使用的是 .net IDE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:24:39.800

您不应使用文件共享呈现图像链接。相反，您必须：

*   创建一个自定义处理程序（页面），从共享中读取图像并在 HTTP 响应中返回它

    -或者 -

*   将该共享映射为 IIS 中的虚拟目录并将链接指向那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:29:37.310

我同意 Mike 的观点，呈现的 HTML 会很有帮助。在代码片段的第 4 行，您启动了一个锚标记。结束标签被注释掉。也许 IE 对格式错误的 HTML 更宽容？Hyperlink 控件也没有 AutoPostBack 属性。

# charts - Highstock 传奇旗帜

> ID：15273112
> 
> 赞同：0
> 
> 时间：2013-03-07T13:59:57.343
> 
> 标签：charts, highcharts, flags, legend, highstock

我的标志数据如下所示：

```
 events = [{"x":1116885600000,"title":"","name":"flag"}, {"x":1116738600000,"title":"","name":"flag"} ...] 
```

是否可以在图例中显示我的数组“事件”的每个元素？
我的图例只显示了标志名称：

```
type : 'flags',
data: events,
name: 'flag on series', 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:19:33.330

在传说中，每个项目都是系列，而不是点。因此，您需要准备单独系列中的每个点，然后实现图例中的所有点。

# perl - 如何清理输出

> ID：15273115
> 
> 赞同：1
> 
> 时间：2013-03-07T14:00:16.470
> 
> 标签：perl

我打开一个文件并在屏幕上打印一些数据，但是我想在输出数据后清理屏幕，我使用`clear`；在程序中，但我没有看到 clean 的效果。它没有清理。是否有任何命令或功能可以让我这样做？

我只想看到一个文件的包含，而不是在屏幕上看到一些以前的文件...

这是我的程序

```
`ls > File_List`;
open List , "<./File_List";
while(eof(List)!=1)
{
        $Each = readline(*List);
        chomp $Each;

        print $Each;
        print "\n";
        `clear`;
        open F , "<./$Each";
        while(eof(F)!=1)
        {
                for($i=0;$i<20;$i++)
                {
                        $L = readline(*F);
                        print $L;
                }
                last;
        }
        close(F);
        sleep(3);
        $Each = "";
}
close List; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:07:41.800

您的程序使用非惯用 Perl。更自然的风格是

```
#!/usr/bin/env perl

use strict;
use warnings;
no warnings 'exec';

opendir my $dh, "." or die "$0: opendir: $!";

while (defined(my $name = readdir $dh)) {
  if (-T $name) {
    system("clear") == 0 or warn "$0: clear exited " . ($? >> 8);
    print $name, "\n";
    system("head", "-20", $name) == 0 or warn "$0: head exited " . ($? >> 8);

    sleep 3;
  }
} 
```

不要将名称列表写入另一个文件，而是直接使用[`opendir`](http://perldoc.perl.org/functions/opendir.html)和读取名称[`readdir`](http://perldoc.perl.org/functions/readdir.html)。`defined`如果您有一个名为 的文件，则检查是必要的，`0`Perl 认为该文件是错误值并会过早终止循环。

您不想打印*所有内容*。目录条目可以是目录或可执行映像或 tarball。`-T`文件测试尝试猜测文件是否为文本文件。

`clear`使用 Perl调用外部命令[`system`](http://perldoc.perl.org/functions/system.html)。

最后，使用外部`head`命令打印每个文本文件的前 20 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:44:29.950

`clear`不起作用，因为它输出的清除屏幕的控制序列被捕获并返回到您的程序，而不是发送到显示器。

尝试

```
print `clear` 
```

或者

```
system('clear') 
```

反而

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:08:15.480

您提供的解决方案不起作用，因为该`clear`命令是在子 shell 中执行的。我建议使用 CPAN 模块（并且支持多平台）：[Term::Screen::Uni](http://search.cpan.org/perldoc?Term%3a%3aScreen%3a%3aUni)

例子：

```
use Term::Screen::Uni;
my $screen = Term::Screen::Uni->new;
$screen->clrscr; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:13:56.033

使用`system()`，它的工作原理。

```
system("ls > File_List");
system("clear;"); 
```

# php - 如何使用 GROUP BY 在 mysql 中连接字符串

> ID：15273118
> 
> 赞同：2
> 
> 时间：2013-03-07T14:00:40.723
> 
> 标签：php, mysql, group-by, concatenation

普通查询

```
id  sid  string
5    1    AAA
6    1    BBB
7    2    CCC
8    3    ZZZ
9    3    EEE 
```

我想要

```
sid  string
1    1\. AAA 2\. BBB
2    1\. CCC
3    1\. ZZZ 2\. EEE 
```

你知道该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:13:17.040

您可以使用该[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数将值放入一行中，并且可以使用用户定义的变量将数字分配给`sid`组中的每个值：

```
select sid,
  group_concat(concat(rn, '. ', string) ORDER BY id SEPARATOR ' ') string
from
(
  select id,
    sid,
    string,
    @row:=case when @prev=sid then @row else 0 end +1 rn,
    @prev:=sid
  from yourtable
  cross join (select @row:= 0, @prev:=null) r
  order by id
) src
group by sid 
```

参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/20448/6)，结果是：

```
| SID |        STRING |
-----------------------
|   1 | 1\. AAA 2\. BBB |
|   2 |        1\. CCC |
|   3 | 1\. ZZZ 2\. EEE | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:04:17.550

看看**[MySQL 的 GROUP_CONCAT() 函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。**

但是我会在 PHP 中进行编号。

# jquery - jQuery 数据表显示/隐藏一行中的一个字段

> ID：15273122
> 
> 赞同：2
> 
> 时间：2013-03-07T14:00:45.573
> 
> 标签：jquery, datatables

我使用 JSON 加载 jQuery 数据表。一行中的一个字段是图例。基本上，我想要一个“显示/隐藏”图例而不是完整的图例文本。我能做些什么？

谢谢！

更新了一个例子：http: [//jsfiddle.net/fDavN/5592/](http://jsfiddle.net/fDavN/5592/)

```
Please check code on jsfiddle (quite long) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:36:26.823

如果您想将此功能添加到每一行，您应该查看数据表文档： [show-hide](http://www.datatables.net/release-datatables/examples/api/row_details.html)

在我的项目（服务器端处理）中，我通过调用`sDefaultContent`（在第一列）`aoColumns`定义：

```
"aoColumns": [
    {
       "mDataProp": null,
       "sClass": "control center",
       "sDefaultContent": '<img src="some_image_url">'
    },
    //...
] 
```

并准备将一些数据附加到单击行的函数：

```
$('#datatables_selector').live( 'click', function () {
    var nTr = this.parentNode;
    var i = $.inArray( nTr, anOpen );
    if ( i === -1 ) {
        $('img', this).attr( 'src', "some_image_url" );
        var nDetailsRow = oTable.fnOpen( nTr, fnFormatDetails(oTable, nTr), 'details' );
        $('div.innerDetails', nDetailsRow).slideDown();
        anOpen.push( nTr );
    }
    else {
        $('img', this).attr( 'src', "some_image_url" );
        $('div.innerDetails', $(nTr).next()[0]).slideUp( function () {
            oTable.fnClose( nTr );
            anOpen.splice( i, 1 );
        } );
    }
} );
function fnFormatDetails( oTable, nTr ){
    var oData = oTable.fnGetData( nTr );
    var sOut = 'some html for input data: <div>, <table> etc';
    return sOut;
} 
```

# javascript - 使用 onsubmit 和 javascript 时，经典 ASP Request.form 没有更新

> ID：15273129
> 
> 赞同：0
> 
> 时间：2013-03-07T14:01:01.773
> 
> 标签：javascript, forms, asp-classic, vbscript

我有一个简单的表单，我使用 Javascript 在数据库上执行搜索。

```
<form id="searchForm" onsubmit="return searchTree(this);" method="post" class="form-poshytip">
 <input type="text" name="searchbox" placeholder="zoek hier je product..." id="searchField" />
 <input type="image" value="Zoeken" name="submit" src="../img/Zoeken.PNG" alt="submit" />
</form> 
```

在 Javascript 中，我使用经典 ASP 连接到 Access。

```
<script language="JavaScript">
function searchTree(form) {
<% Dim rsTreeview2 %>
<% Set adoCon = Server.CreateObject("ADODB.Connection") %>
<% adoCon.Open "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" & Server.MapPath("...") %>
<% Set rsTreeview2 = Server.CreateObject("ADODB.Recordset") %>
<% strSQL = "SELECT tblTreeview_nl.volgnr, tblTreeview_nl.lid_van, tblTreeview_nl.omschrijving, tblTreeview_nl.doctype, tblTreeview_nl.docnaam FROM tblTreeview_nl WHERE tblTreeview_nl.omschrijving LIKE '%" & request.form("searchbox") & "%'"%>
<% rsTreeview2.Open strSQL, adoCon %>
...
<% rsTreeview2.Close %>
<% Set rsTreeview2 = Nothing %>
<% Set adoCon = Nothing %>
return false;
};
</script> 
```

第一次单击按钮时，我使用 request.form("searchbox") 从文本框中获取正确的值，但如果在更改文本框后再次单击按钮，request.form("searchbox") 将包含旧值。如何从文本框中获取当前值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:35:37.320

呸，从哪里开始……

*   第一的; 从这篇文章中删除您的数据库名称，因为我可以找到并下载它。
*   第二; 转义您的搜索词，以防止 SQL 注入

问题是你使用`onsubmit="return searchTree(this);"`. 这意味着如果函数返回 FALSE，则不会提交表单。在您的脚本中，我看到该函数始终返回 false，因此表单不会真正提交。

我不知道你为什么将所有的 ASP/vbscript 代码放在你的 javascript 标签中，但我认为你将一些 javascript 代码直接输出到你的脚本标签中以创建树视图。这很好，但出于测试目的，我会从在屏幕上输出它开始，而不是在脚本标签内，然后从那里开始工作。

我已经重新格式化了你的代码来做到这一点。对于您遇到的 SQL 注入问题，还有一个快速修复方法。

希望这可以帮助，

埃里克

```
<%

function hasValue(value)
    hasValue = NOT(isNull(value) OR value="")
end function

function escape(inputValue)
    if hasValue(inputValue) then
        escape  = Replace(inputValue, "'", "''")
    end if
end function

function recordsetToString(rs)
    Dim objField
    recordsetToString   = ""
    recordsetToString   = recordsetToString & "<table class=""dbgtable"">"
    recordsetToString   = recordsetToString & "<tr>" & vbNewLine
    For Each objField in rs.Fields
    recordsetToString   = recordsetToString & "<th>" & objField.Name & "</th>" & vbNewLine
    Next
    recordsetToString   = recordsetToString & "</tr>" & vbNewLine
    if NOT rs.EOF then
        Do While Not rs.EOF
            recordsetToString   = recordsetToString & "<tr>" & vbNewLine
            For Each objField in rs.Fields
                recordsetToString   = recordsetToString & "<td>"
                if isNull(objField.Value) then
                    recordsetToString   = recordsetToString & "<i>NULL</i>"
                else
                    if vartype(objField.Value)>20 then
                        recordsetToString   = recordsetToString & typename(objField.Value)
                    else
                        recordsetToString   = recordsetToString & objField.Value
                    end if
                end if
                recordsetToString   = recordsetToString & "</td>" & vbNewLine
            Next
            recordsetToString   = recordsetToString & "</tr>" & vbNewLine
        rs.MoveNext
        Loop
        if rs.CursorType>0 then
            rs.movefirst
        end if
    end if
    recordsetToString   = recordsetToString & "</table>" & vbNewLine
end function

if hasValue(request.form("searchbox")) Then
Dim adoCon
Set adoCon = Server.CreateObject("ADODB.Connection") 
    adoCon.Open "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" & Server.MapPath("[PATH_TO_DATBASE]") 
    Dim rsTreeview2
    Set rsTreeview2 = Server.CreateObject("ADODB.Recordset") 
        strSQL = "SELECT tblTreeview_nl.volgnr, tblTreeview_nl.lid_van, tblTreeview_nl.omschrijving, tblTreeview_nl.doctype, tblTreeview_nl.docnaam FROM tblTreeview_nl WHERE tblTreeview_nl.omschrijving LIKE '%" & escape(request.form("searchbox")) & "%'"
        rsTreeview2.Open strSQL, adoCon 
            recordsetToString(rsTreeview2)
        rsTreeview2.Close 
    Set rsTreeview2 = Nothing 
Set adoCon = Nothing 
end if
%>

<script language="JavaScript">
function searchTree(form) {
    return false;
};
</script> 
```

# c# - 在 ASP.NET 代码文件中使用内联样式

> ID：15273136
> 
> 赞同：1
> 
> 时间：2013-03-07T14:01:11.690
> 
> 标签：c#, asp.net

再会。

我想从我在 ASP.NET 中的代码文件发送一封电子邮件。我想对我的 html 应用样式...我该怎么做？

这是html部分：

```
var Message = string.Format("<html><head></head><body><div style=""this does not work!!"">{0}<br/>{1}<br />{2}<br />{3}<br />{4}<br />{5}</body></html>", emaildetail.Name, emaildetail.Surname, emaildetail.CardProvider, emaildetail.CardType, emaildetail.CardNo, emaildetail.SuspendGuid); 

SendEmail("my email address", "Suspended Message", Message, true, null, true, 587); 
```

我尝试使用双引号，但它不起作用。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:09:46.140

使用 @ 前缀：

```
@"Some text ""here"""; 
```

或使用反斜杠转义引号：

```
"Some text \"here\""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:03:38.617

```
var Message = string.Format(@"<html><head></head><body><div style=""this does not work!!"">{0}<br/>{1}<br />{2}<br />{3}<br />{4}<br />{5}</body></html>", emaildetail.Name, emaildetail.Surname, emaildetail.CardProvider, emaildetail.CardType, emaildetail.CardNo, emaildetail.SuspendGuid); 
```

您需要使用 @ 转义您的字符串。

看到这个帖子

[转义双引号](https://stackoverflow.com/questions/1928909/in-c-can-i-escape-a-double-quote-in-a-literal-string)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:04:28.310

通常在这种情况下，在文字字符串的双引号中*使用*单引号会少得多，而且更漂亮（尽可能多） ；当然，您可以使用反斜杠或前缀来*转义*`@`双打，但意义不大，而且打字或混淆更多：

```
<html><head></head><body><div style='this will work!!' 
```

但是，即使这样，您的问题的另一个症结也可能存在，因为客户可能会自行决定呈现样式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T14:04:00.587

在引号之前使用 \ 作为转义字符...

```
var Message = string.Format("<html><head></head><body><div style=\"\">") 
```

# php - 没有 PDO 错误，但事务失败（正确）

> ID：15273140
> 
> 赞同：0
> 
> 时间：2013-03-07T14:01:24.047
> 
> 标签：php, sql-server, pdo

我有一个带有约束的表，该约束阻止插入某些变量组合，但是，当我从内部事务执行带有错误值的插入时，插入失败（应该如此），但`PDOException`没有引发。事实上，事务就像它成功提交一样，但是下面的选择表明没有插入值（只是为了记录，使用相同的函数插入了正确的值组合）。出了什么问题？

下面是有问题的功能。`db_SqlSrv::pdo()`创建并返回一个新实例`PDO`，我正在使用 sqlsrv 驱动程序。

```
/**
 * Inserts number of rules into <code>menu_availability</code> table.
 * The expected format for rules is:
 * <code>[{ menu_id: int,
 *          start: timestring,
 *          end: timestring,
 *          weekly: 0..6,
 *          once: datestring }, ...]</code>
 */
public static function addRules() {
    $rules = web_Util::getRequestParam('rules', 'json');
    if ($rules !== null) {
        $pdo = db_SqlSrv::pdo();
        try {
            $pdo->beginTransaction();
            foreach ($rules as $rule) {
                $statement = $pdo->prepare(
                    "insert into menu_availability
                     (menu_id, daily_serving_start, daily_serving_end,
                     weekly_service_off, one_time_service_off)
                     values (?, ?, ?, ?, ?)");
                $statement->bindParam(1, $rule->menu_id, PDO::PARAM_INT);
                if ($rule->start) {
                    $statement->bindParam(2, $rule->start, PDO::PARAM_STR);
                    $statement->bindParam(3, $rule->end, PDO::PARAM_STR);
                } else {
                      // This feels kind of stupid...
                    $rule->start = null;
                    $rule->end = null;
                    $statement->bindParam(2, $rule->start, PDO::PARAM_NULL);
                    $statement->bindParam(3, $rule->end, PDO::PARAM_NULL);
                }
                $statement->bindParam(4, $rule->weekly, PDO::PARAM_INT);
                $statement->bindParam(5, $rule->once, PDO::PARAM_STR);
                $statement->execute();
            }
            $pdo->commit();
        } catch (PDOException $e) {
            $pdo->rollBack();
            throw $e;
        }
    }
    return true;
} 
```

表是这样定义的：

```
if not exists (select * from sysobjects where name = 'menu_availability' and xtype = 'U')
create table menu_availability
   (menu_id int not null,
    daily_serving_start time(0) null,
    daily_serving_end time(0) null,
    weekly_service_off tinyint null,
    one_time_service_off date null,
    sn as case
       when ((daily_serving_start is null
              and daily_serving_end is null)
             and ((weekly_service_off is not null and one_time_service_off is null)
                  or (one_time_service_off is not null and weekly_service_off is null)))
            or
            ((daily_serving_start is not null
              and daily_serving_end is not null)
             and (one_time_service_off is null
                  or weekly_service_off is null))
             then cast(1 as bit)
        end persisted not null,
    constraint ch_valid_week_day
    check ((weekly_service_off is null)
        or (weekly_service_off <= 6 and weekly_service_off >= 0))); 
```

应触发约束限制的示例数据：

```
{"menu_id":"18283","start":"","end":"","weekly":3,"once":"16-01-1901"} 
```

*`weekly`（同时给出and是违法的`once`）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:34:12.413

PDO 要求您明确告诉它在发生错误时抛出异常。默认情况下，它不会触发错误，也不会抛出异常，它希望您使用[`PDO::errorCode()`](http://php.net/manual/en/pdo.errorcode.php)and手动检查错误[`PDO::errorInfo()`](http://php.net/manual/en/pdo.errorinfo.php)，以及它们的等价物 on [`PDOStatement`](http://php.net/manual/en/class.pdostatement.php)。

通过调用[`PDO::setAttribute()`](http://php.net/manual/en/pdo.setattribute.php)您可以更改此行为，通常我在设置 PDO 连接时执行此操作：

```
$db = new PDO($myDSN);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

执行此操作时，PDO 将在遇到错误时抛出异常。

还值得注意的是，无论此设置如何，连接错误总是会引发异常，因为连接是在构造函数中建立的，而异常实际上是处理此问题的唯一方法 - 您显然不能调用尚未调用的对象的方法被实例化。这是构造函数通常不应包含业务逻辑的原因之一的一个很好的例子，它在这种情况下大大降低了灵活性。

# c# - 在 Entity LINQ 语句中加入集合

> ID：15273142
> 
> 赞同：1
> 
> 时间：2013-03-07T14:01:28.743
> 
> 标签：c#, linq, linq-to-entities

此问题与 LINQ-to-entity 相关。

我发布了一个[类似的问题](https://stackoverflow.com/questions/15269842/linq-join-to-collection-using-index)，但没有答案就让人困惑，所以我提供了一个例子和一个新的呼救声。

我有一个“颜色”类，`ObservableCollection`其中包含一个有两个成员的类，`Index`并且`Name`填充如下：

0 - 红色
1 - 蓝色
2 - 绿色

我有一个数据库表，其中包含我最喜欢的颜色的整数列表。我想根据存储在数据库中的索引值返回一个查询，其中包含我最喜欢的颜色的整数值和匹配的名称（由 observablecollection 返回）。

此语句单独工作正常并返回我的颜色名称：-

`string ColorName = Colors.Names.Where(x => x.Index == 1).FirstOrDefault().Name;`

但是当包含在 LINQ-to-entity 查询中时：-

```
var query = from c in context.FavoriteColor
select (new Item
    {
        Id = c.Id,
      ColorName = Colors.Names.Where(x => x.Index == c.ColorIndex).FirstOrDefault().Name
    }); 
```

我收到此错误：

> 无法创建类型为“blah blah”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

我知道该对象可能是在 LINQ 语句中返回的，但我认为通过在末尾指定 .Name 表示法，这是一个字符串成员，它会使用它并将其分配给“ColorName”，唉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:15:31.990

你有没有尝试过：

```
var query = from c in context.FavoriteColor
            select new { c.Id, c.ColorIndex };
var result = from c in query.ToList()
             select new Item
             {
                 Id = c.Id,
                 ColorName = Colors.Names.Where(x => x.Index == c.ColorIndex).FirstOrDefault().Name
             }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:16:56.027

您正在尝试在数据库查询中使用 CLR 对象。LINQ-to-Entities 是说你不能这样做。查询完成后获取颜色名称。

```
var dbItems = context.FavoriteColor.Select(c => new {
    c.Id,
    c.ColorIndex
).ToList();

var items = dbItems.Select(item => new Item {
    Id = item.Id,
    ColorName = Colors.Names.Where(x => x.Index == item.ColorIndex).First().Name
}) 
```

这里的想法是调用`ToList`命中数据库并在 CLR 对象中返回结果。然后可以像使用任何其他对象一样使用该对象。

# ruby - 未初始化常量 FactoryGirl::Evaluation::Observable

> ID：15273147
> 
> 赞同：0
> 
> 时间：2013-03-07T14:01:41.030
> 
> 标签：ruby, factory-bot

我正在尝试将 factory_girl 4.2.0 与 rspec 2.13.0 一起使用。首先，我将“factory_girl”添加到我的 Gemfile 并进行捆绑更新：

```
Using aasm (3.0.16) 
Using i18n (0.6.4) 
Using multi_json (1.6.1) 
Using activesupport (3.2.12) 
Using builder (3.0.4) 
Using activemodel (3.2.12) 
Using arel (3.0.2) 
Using tzinfo (0.3.36) 
Using activerecord (3.2.12) 
Using active_record_inline_schema (0.6.0) 
Using tins (0.7.1) 
Using amatch (0.2.11) 
Using coderay (1.0.9) 
Using conversions (1.4.6) 
Using fastercsv (1.5.5) 
Using fixed_width-multibyte (0.2.3) 
Using hash_digest (1.0.0) 
Using nokogiri (1.5.6) 
Using rubyzip (0.9.9) 
Using ruby-ole (1.2.11.6) 
Using spreadsheet (0.8.2) 
Using roo (1.10.3) 
Using unix_utils (0.0.15) 
Using remote_table (2.1.0) 
Using to_regexp (0.2.0) 
Using errata (1.1.1) 
Using posix-spawn (0.3.6) 
Using upsert (1.1.7) 
Using data_miner (2.4.1) 
Using diff-lcs (1.2.1) 
Using httpclient (2.3.3) 
Using method_source (0.8.1) 
Using pg (0.14.1) 
Using pg-hstore (1.1.7) 
Using slop (3.4.3) 
Using pry (0.9.12) 
Using rspec-core (2.13.0) 
Using rspec-expectations (2.13.0) 
Using rspec-mocks (2.13.0) 
Using rspec (2.13.0) 
Using umarket1-package (0.2.0) 
Using bundler (1.3.1) 
```

然后在我的 spec_helper.rb 我做：

```
require 'factory_girl' 
```

但我收到此错误：

```
.rvm/gems/ruby-1.9.3-p327/gems/factory_girl-4.2.0/lib/factory_girl/evaluation.rb:5:in `<class:Evaluation>': uninitialized constant FactoryGirl::Evaluation::Observable (NameError) 
```

在 factory_girl 之前我需要其他要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T05:06:34.350

可能你有一个文件在某个地方定义了一个`Observer`类（或者甚至只是一个名为observer.rb的文件）。

[https://github.com/thoughtbot/factory_girl/blob/af282a178b02ea9cc85b7b0767fce836a76108b4/lib/factory_girl/evaluation.rb#L1](https://github.com/thoughtbot/factory_girl/blob/af282a178b02ea9cc85b7b0767fce836a76108b4/lib/factory_girl/evaluation.rb#L1)

并在您初始化应用程序后加载（例如在 lib 文件夹中）。

# r - 在ggplot2中着色箱线图异常点？

> ID：15273148
> 
> 赞同：16
> 
> 时间：2013-03-07T14:01:43.487
> 
> 标签：r, graphics, ggplot2

如何为ggplot2中的异常点着色？我希望它们与箱线图本身的颜色相同。`colour=`这样做是不够的。

例子：

```
p <- ggplot(mtcars, aes(factor(cyl), mpg))
p + geom_boxplot(aes(colour=factor(cyl))) 
```

我也想为异常值着色`factor(cyl)`。这不起作用：

```
> p <- ggplot(mtcars, aes(factor(cyl), mpg))
> p + geom_boxplot(aes(colour=factor(cyl), outlier.colour=factor(cyl))) 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-16T11:34:19.163

更新（2015-03-31）：请参阅[@tarch 的解决方案`ggplot2`>= 1.0.0](https://stackoverflow.com/a/29028203/755257)

<= 0.9.3 的解决方案`ggplot2`如下。

* * *

正如@koshke 所说，现在可以通过设置轻松地将异常值着色为框线（而不是填充颜色）`outlier.colour = NULL`：

```
p <- ggplot(mtcars, aes(x=factor(cyl), y=mpg, col=factor(cyl)))
p + geom_boxplot(outlier.colour = NULL) 
```

![带有彩色异常值的箱线图](../Images/85d14e299f4f52f5f0525181a95b740c.png)

*   `outlier.colour`必须写“ou”
*   `outlier.colour`必须在外面`aes ()`

*我将其发布为较晚的答案，因为我发现自己一次又一次地查找此问题，并且我还为相关问题[Boxplot，如何匹配异常值的颜色以填充美学？](https://stackoverflow.com/questions/8499378/ggplot2-boxplot-how-do-i-match-the-outliers-color-to-fill-aesthetics?rq=1)*

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-07T14:56:58.077

为了使异常点的颜色与箱线图相同，您需要计算异常值并分别绘制它们。据我所知，为异常值着色的内置选项将所有异常值都涂成相同的颜色。

**帮助文件示例**

使用与“geom_boxplot”帮助文件相同的数据：

```
ggplot(mtcars, aes(x=factor(cyl), y=mpg, col=factor(cyl))) +
    geom_boxplot() 
```

![帮助文件演示](../Images/2c9cda1971eca670fabee0ecb46bccfd.png)

**为异常点着色**

现在可能有一种更精简的方法来做到这一点，但我更喜欢手工计算，所以我不必猜测引擎盖下发生了什么。使用 'plyr' 包，我们可以快速获取使用默认 (Tukey) 方法确定异常值的上限和下限，该异常值是 [Q1 - 1.5 * IQR, Q3 + 1.5 * IQR] 范围之外的任何点。Q1 和 Q3 是数据的 1/4 和 3/4 分位数，IQR = Q3 - Q1。我们可以将这一切写成一个巨大的语句，但由于 'plyr' 包的 'mutate' 函数将允许我们引用新创建的列，我们不妨将其拆分以便于阅读/调试，如下所示：

```
library(plyr)
plot_Data <- ddply(mtcars, .(cyl), mutate, Q1=quantile(mpg, 1/4), Q3=quantile(mpg, 3/4), IQR=Q3-Q1, upper.limit=Q3+1.5*IQR, lower.limit=Q1-1.5*IQR) 
```

我们使用 'ddply' 函数，因为我们正在输入一个数据帧并想要一个数据帧作为输出（“d->d”ply）。上述 'ddply' 语句中的 'mutate' 函数是保留原始数据框并添加额外的列，并且规范`.(cyl)`是告诉要为每组 'cyl' 值计算的函数。

此时，我们现在可以绘制箱线图，然后用新的彩色点覆盖异常值。

```
ggplot() +
    geom_boxplot(data=plot_Data, aes(x=factor(cyl), y=mpg, col=factor(cyl))) + 
    geom_point(data=plot_Data[plot_Data$mpg > plot_Data$upper.limit | plot_Data$mpg < plot_Data$lower.limit,], aes(x=factor(cyl), y=mpg, col=factor(cyl))) 
```

![有色异常值](../Images/3183890ae85defc99f282bc2188dbdd8.png)

我们在代码中所做的是指定一个空的“ggplot”层，然后使用独立数据添加箱线图和点几何图形。箱线图几何可以使用原始数据框，但我使用我们的新“plot_Data”来保持一致。点几何然后仅绘制异常点，使用我们新的“lower.limit”和“upper.limit”列来确定异常状态。由于我们对“x”和“col”美学参数使用相同的规范，因此箱线图和相应的异常点之间的颜色神奇地匹配。

**更新**：OP 要求对此代码中使用的“ddply”函数进行更完整的解释。这里是：

'plyr' 系列函数基本上是一种对数据进行子集化并对数据的每个子集执行函数的方法。在这种特殊情况下，我们有以下声明：

```
ddply(mtcars, .(cyl), mutate, Q1=quantile(mpg, 1/4), Q3=quantile(mpg, 3/4), IQR=Q3-Q1, upper.limit=Q3+1.5*IQR, lower.limit=Q1-1.5*IQR) 
```

让我们按照语句的编写顺序来分解它。首先，“ddply”功能的选择。我们要计算“mtcars”数据中“cyl”每个值的下限和上限。我们可以编写一个“for”循环或其他语句来计算这些值，但是稍后我们将不得不编写另一个逻辑块来评估异常值状态。相反，我们想使用“ddply”来计算下限和上限，并将这些值添加到每一行。我们选择“ddply”（与“dlply”、“d_ply”等相对），因为我们正在输入一个数据帧并想要一个数据帧作为输出。这给了我们：

```
ddply( 
```

我们想在“mtcars”数据框上执行语句，所以我们添加了它。

```
ddply(mtcars, 
```

现在，我们要使用“cyl”值作为分组变量来执行我们的计算。我们使用 'plyr' 函数`.()`来引用变量本身而不是变量的值，如下所示：

```
ddply(mtcars, .(cyl), 
```

下一个参数指定要应用于每个组的函数。我们希望我们的计算将新行添加到旧数据中，因此我们选择了“mutate”函数。这会保留旧数据并将新计算添加为新列。这与“summarize”等其他功能形成对比，后者会删除除分组变量之外的所有旧列。

```
ddply(mtcars, .(cyl), mutate, 
```

最后一系列参数是我们要创建的所有新数据列。我们通过指定名称（不带引号）和表达式来定义它们。首先，我们创建“Q1”列。

```
ddply(mtcars, .(cyl), mutate, Q1=quantile(mpg, 1/4), 
```

“Q3”列的计算方式类似。

```
ddply(mtcars, .(cyl), mutate, Q1=quantile(mpg, 1/4), Q3=quantile(mpg, 3/4), 
```

幸运的是，通过 'mutate' 函数，我们可以使用新创建的列作为其他列定义的一部分。这使我们不必编写一个巨大的函数或不必运行多个函数。我们需要在计算“IQR”变量的四分位间距时使用“Q1”和“Q3”，而使用“mutate”函数很容易。

```
ddply(mtcars, .(cyl), mutate, Q1=quantile(mpg, 1/4), Q3=quantile(mpg, 3/4), IQR=Q3-Q1, 
```

我们终于到了现在想去的地方。从技术上讲，我们不需要“Q1”、“Q3”和“IQR”列，但它确实使我们的下限和上限方程更易于阅读和调试。我们可以像理论公式一样写出我们的表达式：`limits=+/- 1.5 * IQR`

```
ddply(mtcars, .(cyl), mutate, Q1=quantile(mpg, 1/4), Q3=quantile(mpg, 3/4), IQR=Q3-Q1, upper.limit=Q3+1.5*IQR, lower.limit=Q1-1.5*IQR) 
```

为了便于阅读，去掉中间的列，这是新数据框的样子：

```
plot_Data[, c(-3:-11)]
#     mpg cyl    Q1    Q3  IQR upper.limit lower.limit
# 1  22.8   4 22.80 30.40 7.60      41.800      11.400
# 2  24.4   4 22.80 30.40 7.60      41.800      11.400
# 3  22.8   4 22.80 30.40 7.60      41.800      11.400
# 4  32.4   4 22.80 30.40 7.60      41.800      11.400
# 5  30.4   4 22.80 30.40 7.60      41.800      11.400
# 6  33.9   4 22.80 30.40 7.60      41.800      11.400
# 7  21.5   4 22.80 30.40 7.60      41.800      11.400
# 8  27.3   4 22.80 30.40 7.60      41.800      11.400
# 9  26.0   4 22.80 30.40 7.60      41.800      11.400
# 10 30.4   4 22.80 30.40 7.60      41.800      11.400
# 11 21.4   4 22.80 30.40 7.60      41.800      11.400
# 12 21.0   6 18.65 21.00 2.35      24.525      15.125
# 13 21.0   6 18.65 21.00 2.35      24.525      15.125
# 14 21.4   6 18.65 21.00 2.35      24.525      15.125
# 15 18.1   6 18.65 21.00 2.35      24.525      15.125
# 16 19.2   6 18.65 21.00 2.35      24.525      15.125
# 17 17.8   6 18.65 21.00 2.35      24.525      15.125
# 18 19.7   6 18.65 21.00 2.35      24.525      15.125
# 19 18.7   8 14.40 16.25 1.85      19.025      11.625
# 20 14.3   8 14.40 16.25 1.85      19.025      11.625
# 21 16.4   8 14.40 16.25 1.85      19.025      11.625
# 22 17.3   8 14.40 16.25 1.85      19.025      11.625
# 23 15.2   8 14.40 16.25 1.85      19.025      11.625
# 24 10.4   8 14.40 16.25 1.85      19.025      11.625
# 25 10.4   8 14.40 16.25 1.85      19.025      11.625
# 26 14.7   8 14.40 16.25 1.85      19.025      11.625
# 27 15.5   8 14.40 16.25 1.85      19.025      11.625
# 28 15.2   8 14.40 16.25 1.85      19.025      11.625
# 29 13.3   8 14.40 16.25 1.85      19.025      11.625
# 30 19.2   8 14.40 16.25 1.85      19.025      11.625
# 31 15.8   8 14.40 16.25 1.85      19.025      11.625
# 32 15.0   8 14.40 16.25 1.85      19.025      11.625 
```

只是为了进行对比，如果我们要使用“summarize”函数执行相同的“ddply”语句，那么我们将得到所有相同的答案，但没有其他数据的列。

```
ddply(mtcars, .(cyl), summarize, Q1=quantile(mpg, 1/4), Q3=quantile(mpg, 3/4), IQR=Q3-Q1, upper.limit=Q3+1.5*IQR, lower.limit=Q1-1.5*IQR)
#   cyl    Q1    Q3  IQR upper.limit lower.limit
# 1   4 22.80 30.40 7.60      41.800      11.400
# 2   6 18.65 21.00 2.35      24.525      15.125
# 3   8 14.40 16.25 1.85      19.025      11.625 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-03-13T08:55:29.917

我找到了一个解决方案，即设置`geom_boxplot(outlier.colour = NULL)`在最新版本的 R 中不再起作用（@hamy 谈到 ggplot2 的 1.0.0 版）。

为了复制@cbeleites 提出的行为，您只需使用以下代码：

```
update_geom_defaults("point", list(colour = NULL))
m <- ggplot(movies, aes(y = votes, x = factor(round(rating)),
            colour = factor(Animation)))
m + geom_boxplot() + scale_y_log10() 
```

正如预期的那样，这会产生与线条颜色匹配的点。

当然，如果他需要绘制多个图，应该记住恢复默认值：

```
update_geom_defaults("point", list(colour = "black")) 
```

通过阅读github 上的[ggplot2 更改日志找到了解决方案：](https://github.com/hadley/ggplot2/blob/master/NEWS)

> 异常值`geom_boxplot()`使用来自 的默认颜色、大小和形状 `geom_point()`。`geom_point()`更改with 的默认值`update_geom_defaults()`将对 的异常值应用相同的更改 `geom_boxplot()`。以前无法更改异常值的默认值。（@蒂埃里奥，#757）

*也在这里发布：[ggplot2 boxplot，我如何匹配异常值的颜色来填充美学？](https://stackoverflow.com/questions/8499378/ggplot2-boxplot-how-do-i-match-the-outliers-color-to-fill-aesthetics)*

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-07T14:03:44.017

如果需要根据不同的因素（与用于制作箱线图组的因素不同）改变异常点的形状或颜色，则可以调整@Dinre 的答案。

仅当颜色本身不用于箱线图时才能更改点的颜色（您不能将两个变量用于颜色）。

使用来自@Dinre 答案的数据`plot_Data`和代码 - 异常值的颜色取决于因素`carb`。`outlier.shape = NA`通过向原始异常值添加参数，`geom_boxplot()`以确保它们不会被`geom_point()`.

```
ggplot() +
  geom_boxplot(data=plot_Data, aes(x=factor(cyl), y=mpg),outlier.shape = NA) + 
  geom_point(data=plot_Data[plot_Data$mpg > plot_Data$upper.limit | 
                              plot_Data$mpg < plot_Data$lower.limit,], 
             aes(x=factor(cyl), y=mpg, color=factor(carb))) 
```

![在此处输入图像描述](../Images/7d9a55819f3cbc05e242c4ac02cb4695.png)

要更改点的形状：

```
ggplot() +
  geom_boxplot(data=plot_Data, aes(x=factor(cyl), y=mpg),outlier.shape = NA) + 
  geom_point(data=plot_Data[plot_Data$mpg > plot_Data$upper.limit | 
                              plot_Data$mpg < plot_Data$lower.limit,], 
             aes(x=factor(cyl), y=mpg, shape=factor(carb))) 
```

![在此处输入图像描述](../Images/e3f545fed9377a34311dc18f7fc79a1b.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-09T23:22:23.837

异常值会自动从 ggplot2 * 1.0.1.9003 中的框中再次继承颜色。

[https://github.com/hadley/ggplot2/issues/1400](https://github.com/hadley/ggplot2/issues/1400)

```
```{r}
library(ggplot2)
point_size=10
ggplot(mtcars, aes(x=factor(cyl), y=mpg, col=factor(cyl))) +
geom_boxplot(outlier.size = point_size)
``` 
```

[箱形图](http://i.stack.imgur.com/qrCRY.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-06T15:54:36.720

**以防万一你真的想让盒子保持黑色：**

另一种可能的解决方案是

1.  将点是否为异常值存储在变量中，
2.  `outlier.color = NA`用和抑制异常值绘图
3.  仅绘制那些异常值并`col`在此调用中使用美学`geom_point()`

第 1 步：定义一个函数来确定一个点是否为异常值：

```
is.outlier <- function (x) {
  x < quantile(x, .25) - 1.5 * IQR(x) |
    x > quantile(x, .75) + 1.5 * IQR(x)
} 
```

第 2 步：对数据进行分组并使用此函数为组计算异常值

```
diamonds %>% group_by(cut) %>%
  mutate(outlier.p = is.outlier(price)) %>%
  ungroup() -> diamonds 
```

第 3 步：创建绘图

```
ggplot(diamonds, aes(x = cut, y = price, fill = cut)) +
  geom_boxplot(outlier.color = NA) +
  geom_point(data = diamonds[diamonds$outlier.p,], aes(col = cut)) 
```

请注意，您必须在`geom_point()`调用（最后一行）中对数据集进行子集化，以免绘制所有点。

[![阴谋](../Images/ded9ab3f37240f3638df3e51279829c3.png)](https://i.stack.imgur.com/qAZZ4.png)

# javascript - 创建一个可在任何地方共享的链接

> ID：15273149
> 
> 赞同：0
> 
> 时间：2013-03-07T14:01:43.923
> 
> 标签：javascript, facebook, meta

我想通过链接分享我网站的特定内容，我希望当我在 Facebook、Twitter、Google+ 等上分享它时，会显示特定的图像、标题和描述。当我分享我的网站 URL 时非常容易，因为修改相关的**元标记**就足够了，但是对于您想要与专用图像、标题、描述分享的特定内容，它并不是那么简单。

我想，既然这些信息应该在**元标记**中指定，为什么不将我的内容包含在一个**iframe**中，该 iframe 包含一个包含所有必要元标记的简单*html页面？*

这样，当我尝试在社交网络上分享我的链接时，内容摘要将填充我的**元标记**信息。

你有更聪明的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:18:16.113

好吧，我相信每个社交媒体都有不同的方式来获取这些信息，有些甚至不需要它们（比如 twitter 不需要图片到推文）。

他们总是在改变他们的做法，facebook 就是一个例子，url 派对正在被弃用，他们强迫我们使用他们的 api 来分享/喜欢/任何东西。

你可以做的是自己处理这些差异，或者让 js 社交插件为你处理它。

编辑：这里有一些插件[http://community.paper.li/2012/10/15/top-8-social-media-plugins-for-your-blog-or-website/](http://community.paper.li/2012/10/15/top-8-social-media-plugins-for-your-blog-or-website/)

# php - 从查询中检索 SUM 结果的问题

> ID：15273155
> 
> 赞同：0
> 
> 时间：2013-03-07T14:02:20.857
> 
> 标签：php, sql

我在这里有这个查询，我用它来获取某个列的总和，但是我不断收到错误`Undefined index`。

```
$sql_shuma="SELECT SUM(vlera) AS shuma "
          ."FROM   servis_pjeset_perdorura "
          ."WHERE  random = $random";
$resultshuma = odbc_exec($connection, $sql_shuma) or die(odbc_error());

while( $rowshuma = odbc_fetch_array($resultshuma) ) {
    echo $total1 = $rowshuma['shuma'];
}
?> 
```

我在这里做错了什么？也许是`$total1`值，我不知道如何保存结果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:31:33.163

$random 是整数吗？如果不是，则必须使用 ' ' 来分隔字符串，如下所示：

```
$sql_shuma="SELECT SUM(vlera) AS shuma FROM servis_pjeset_perdorura WHERE random = '$random'"; 
```

# javascript - 从 javascript 中排除页面

> ID：15273156
> 
> 赞同：0
> 
> 时间：2013-03-07T14:02:22.333
> 
> 标签：javascript, jquery, ios

我有一个滑动来为我在每个页面上运行的 ios Web 应用程序执行脚本，但我想知道如何排除影响显示的第一页。剧本是这样的

```
<script>
$(document).bind('swiperight', function () {
        history.back();
    });</script> 
```

如何排除假设 id 为“home”的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:10:44.757

我假设您使用的是 jQuery mobile（如果您不使用，请道歉），您可以使用 $.mobile.activePage 检查您是否在家：

[http://jquerymobile.com/demos/1.2.0/docs/api/methods.html](http://jquerymobile.com/demos/1.2.0/docs/api/methods.html)（在底部）

```
<script>
    $(document).bind('swiperight', function () {
        if ( $.mobile.activePage !== 'home' )
          history.back();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:06:20.177

```
$(document).bind('swiperight', function () {
    if (!$('body#home').length === 0) {
         history.back();
         // ... anything else
    }
}); 
```

你也可以使用：`if (!$('#page.home').length === 0)`如果它是一个包含元素的类，那么它`if ($('#page').hasClass('home'))`也是一种更可靠的 jQuery-y 方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:06:47.507

一般原则是这样的：

```
<script>
var id = // get your hypothetical id from somewhere;
if(id !== "home") {
    $(document).bind('swiperight', function () {
        history.back();
    });
}
</script> 
```

如果没有更多关于假设 id 来自何处的信息，很难比这更具体。

# haskell - 如何在 ghci 的 do 块中使用 let？

> ID：15273158
> 
> 赞同：12
> 
> 时间：2013-03-07T14:02:34.203
> 
> 标签：haskell, ghci

我正在尝试在 ghci 中以交互方式创建一个 do 块。只要我不使用 in 块定义变量，就可以了：

```
Prelude>let a = do putStrLn "test"; putStrLn "other test"
Prelude> 
```

但我无法弄清楚如何在 do 块中交互地定义 let 构造而不会出现解析错误：

```
Prelude> let a = do let b = 5; putStrLn $ show b

<interactive>:2:40:
    parse error (possibly incorrect indentation or mismatched brackets) 
```

明显地

```
let a = do
     let b = 5
     putStrLn $ show b 
```

在 Haskell 源文件中完全没问题。我只是无法弄清楚如何将其转换为 ghci。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T14:12:12.650

试试这个：

```
let a = do let { b = 5 } ; print b 
```

该`let`块可以包含多个声明，因此您必须在它们完成时告诉 GHCi - 这就是该行中括号的含义。

顺便说一句，您可以使用`print`for `putStrLn . show`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-07T14:21:15.670

```
:help

 <statement>                 evaluate/run <statement>    
:{\n ..lines.. \n:}\n        multiline command 
```

您可以键入**:{**启动多行命令，然后键入**:}**结束它。

所以就这样做

```
 Prelude> :{
 Prelude| let a = do
 Prelude|     let b=5
 Prelude|     putStrLn $ show b
 Prelude| 
 Prelude| :} 
```

小心布局（缩进/空白）。否则，您可能会在明显正确的代码中出现解析错误。

例如，以下将**不起作用**，因为缩进不够深：

```
Prelude> :{
Prelude| let a = do
Prelude|    let b=5
Prelude|    putStrLn $ show b
Prelude| 
Prelude| :} 
```

它会导致这样的解析错误：

```
<interactive>:50:4: parse error on input ‘let’ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:07:00.220

我原以为放入大括号会很好，但这并不能解析：

```
ghci> let a = do {let b = 5; putStrLn (show b)} 
```

您始终可以采用多行方法，该方法确实有效：

```
ghci> :{
ghci| let a = do let b = 5
ghci|            putStrLn $ show b
ghci| :} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-05T14:04:26.393

我来到这里是因为我有同样的问题，但是 yatima2975 的回答让我想起了每个 let-block 可以有多个绑定，所以我尝试了下面的方法，确实有效。

```
$ ghci
GHCi, version 8.8.3: https://www.haskell.org/ghc/  :? for help
Prelude> do { let { x = 1; y = 2 }; putStrLn (show (x, y)) }
(1,2) 
```

# asp.net-mvc - 视图中的 MVC 4 强类型模型

> ID：15273160
> 
> 赞同：1
> 
> 时间：2013-03-07T14:02:34.810
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我是 MVC 4 的初学者。我有一个视图是强类型的模型，其脚手架模板为“创建”。现在，如果我修改我的模型，视图会自动更改吗？或者可以做些什么来修改模型的视图。删除以前的视图并创建新视图也是一种选择。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:19:50.550

[`EditorForModel`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.editorextensions.editorformodel%28v=vs.98%29.aspx)除非您在其中使用方法，否则现有视图不会自动更新。

# eclipse - 在 Sublime Text Processing Bundle 中导出并在 Eclipse 中复制其功能

> ID：15273161
> 
> 赞同：0
> 
> 时间：2013-03-07T14:02:34.833
> 
> 标签：eclipse, eclipse-plugin, bundle, sublimetext2, processing

可以在[http://vimeo.com/45573600](http://vimeo.com/45573600)找到视频和相关链接：

1) 是否有可能获得完全相同的行为，尤其是 Eclipse 中特定于库的自动完成功能？我尝试了 proclipsing 以及在 Processing 论坛上找到的在 Eclipse 上处理的所有说明，但它们都没有让你拥有它，即使基于 Eclipse 的 Aptana Studio 3 对 HTML 和 CSS 执行相同的操作。

2) 在 Sublime Text 2 中安装捆绑包后，我注意到，即使我可以在文档中找到“使用 cmd+shift+b 并键入 build 您可以获得替代构建系统：全屏运行草图和各种导出草图选项”这个对我根本不起作用。也许只是因为我在 PC 上，我不得不尝试 CTRL+shift+b，但无论如何，即使在菜单中也没有它的踪迹。有什么提示吗？

# jquery - CSE 输入框文本/值

> ID：15273171
> 
> 赞同：0
> 
> 时间：2013-03-07T14:03:03.223
> 
> 标签：jquery, google-custom-search

我已经用谷歌搜索并在这里检查过，但找不到适合我的解决方案。那么问题来了：

我想更改谷歌自定义搜索框输入默认文本（因为我删除了品牌形象，因为我在输入上使用了 bg 颜色，然后看起来很糟糕）以显示“谷歌搜索......”以符合 tos 和向用户展示搜索内容..

```
 $(document).ready(function () {
      $('input.gsc-input').val('Google search..');
}); 
```

但这行不通。有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:40:00.930

找出文本框的id。

```
$(document).ready(function(){
    document.getElementById('gsc-i-id1').value='Google search..';
}); 
```

祝你好运。

# python - Pyramid：向应用程序工厂发送杂项配置

> ID：15273173
> 
> 赞同：0
> 
> 时间：2013-03-07T14:03:10.833
> 
> 标签：python, configuration-files, pyramid

我已经像这样设置了 Pyramid 配置文件：

```
[app:main]
...

[server:main]
...

[memcache]
# memcache config

[zeromq]
# zeromq xonfig 
```

现在在我的里面`app_factory`，我想得到所有的配置——不仅仅是这个`app:main`部分，还有`memcache`,`zeromq`和其他可能的部分。

我该怎么做。

我将配置分成不同部分的原因是因为我的应用程序使用了许多不同的服务，我不想将所有配置拼凑到该`app:main`部分中。

一种方法是通过读取配置文件手动将配置拉入应用程序。然后你必须以某种方式知道应用程序正在运行什么模式（开发或生产）。此外，还有多次解析配置的开销（因为 paste-deploy 将首先执行此操作）。

有没有更好，更优雅的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:30:33.073

不幸的是，如果您想采用这种方法，您将不得不再次解析配置文件。您可以通过`config_file = global_config['__file__']`in获取文件`main`并使用 stdlib 自行解析`ConfigParser`。

如果您喜欢这种带有单独部分的 INI 格式，Mozilla 服务有一个不错的小模块，您可以使用它来为您处理所有这些。它进行值转换（尝试将值转换为整数或布尔值）。它支持使用其他部分扩展您的配置，例如`[foo:bar] key = value`，在解析时将返回一个包含`settings['foo.bar.key'] == value`. 它还将方便地为您解析内容，因此您的 main 看起来像：

```
def main(global_config, **settings):
    config = get_configurator(global_config, **settings)
    settings = config.registry.settings
    # ... do your app configuration
    return config.make_wsgi_app() 
```

[https://wiki.mozilla.org/index.php?title=Services/Sync/Server/GlobalConfFile](https://wiki.mozilla.org/index.php?title=Services/Sync/Server/GlobalConfFile) [https://github.com/mozilla-services/mozservices/blob/master/mozsvc/config.py](https://github.com/mozilla-services/mozservices/blob/master/mozsvc/config.py)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:37:10.793

您可以将特定于应用程序的配置传递到 ini 文件中：

```
[app:xyz]
    something = True 
```

然后在您的`main`功能（应用程序工厂）中，您可以访问它

```
settings['something'] 
```

更多信息：

[http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/environment.html#adding-a-custom-setting](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/environment.html#adding-a-custom-setting)

# hadoop - mahout kmeans 聚类：显示错误

> ID：15273176
> 
> 赞同：1
> 
> 时间：2013-03-07T14:03:13.867
> 
> 标签：hadoop, mahout, k-means

我试图在 mahout 中对数据进行聚类。显示错误。这是错误

```
java.lang.ArrayIndexOutOfBoundsException: 0
    at org.apache.mahout.clustering.classify.ClusterClassificationMapper.populateClusterModels(ClusterClassificationMapper.java:129)
    at org.apache.mahout.clustering.classify.ClusterClassificationMapper.setup(ClusterClassificationMapper.java:74)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:621)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:177)
13/03/07 19:29:31 INFO mapred.JobClient:  map 0% reduce 0%
13/03/07 19:29:31 INFO mapred.JobClient: Job complete: job_local_0010
13/03/07 19:29:31 INFO mapred.JobClient: Counters: 0
java.lang.InterruptedException: Cluster Classification Driver Job failed processing E:/Thesis/Experiments/Mahout dataset/input
    at org.apache.mahout.clustering.classify.ClusterClassificationDriver.classifyClusterMR(ClusterClassificationDriver.java:276)
    at org.apache.mahout.clustering.classify.ClusterClassificationDriver.run(ClusterClassificationDriver.java:135)
    at org.apache.mahout.clustering.kmeans.KMeansDriver.clusterData(KMeansDriver.java:260)
    at org.apache.mahout.clustering.kmeans.KMeansDriver.run(KMeansDriver.java:152)
    at com.ifm.dataclustering.SequencePrep.<init>(SequencePrep.java:95)
    at com.ifm.dataclustering.App.main(App.java:8) 
```

这是我的代码

```
Configuration conf = new Configuration();
            FileSystem fs = FileSystem.get(conf);

            Path vector_path = new Path("E:/Thesis/Experiments/Mahout dataset/input/vector_input");
            SequenceFile.Writer writer = new SequenceFile.Writer(fs, conf, vector_path, Text.class, VectorWritable.class);
            VectorWritable vec = new VectorWritable();
            for (NamedVector outputVec : vector) {
                vec.set(outputVec);
                writer.append(new Text(outputVec.getName()), vec);
            }
            writer.close();

            // create initial cluster
            Path cluster_path = new Path("E:/Thesis/Experiments/Mahout dataset/clusters/part-00000");
            SequenceFile.Writer cluster_writer = new SequenceFile.Writer(fs, conf, cluster_path, Text.class, Kluster.class);

            // number of cluster k
            int k=4;
            for(i=0;i<k;i++) {
                NamedVector outputVec = vector.get(i);
                Kluster cluster = new Kluster(outputVec, i, new EuclideanDistanceMeasure());
//                System.out.println(cluster);
                cluster_writer.append(new Text(cluster.getIdentifier()), cluster);
            }            
            cluster_writer.close();

            // set cluster output path
            Path output = new Path("E:/Thesis/Experiments/Mahout dataset/output");
            HadoopUtil.delete(conf, output);

            KMeansDriver.run(conf, new Path("E:/Thesis/Experiments/Mahout dataset/input"), new Path("E:/Thesis/Experiments/Mahout dataset/clusters"),
                                            output, new EuclideanDistanceMeasure(), 0.001, 10,
                                                            true, 0.0, false);

            SequenceFile.Reader output_reader = new SequenceFile.Reader(fs,new Path("E:/Thesis/Experiments/Mahout dataset/output/" + Kluster.CLUSTERED_POINTS_DIR+ "/part-m-00000"), conf);
            IntWritable key = new IntWritable();
            WeightedVectorWritable value = new WeightedVectorWritable();
            while (output_reader.next(key, value)) {
                System.out.println(value.toString() + " belongs to cluster "
                         + key.toString());
             }
            reader.close();

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:36:30.917

输入/输出数据的路径似乎不正确。MapReduce 作业在集群上运行。因此，数据是从 HDFS 读取的，而不是从本地硬盘读取的。

错误信息：

```
java.lang.InterruptedException: Cluster Classification Driver Job failed processing E:/Thesis/Experiments/Mahout dataset/input
    at org.apache.mahout.clustering.classify.ClusterClassificationDriver.classifyClusterMR(ClusterClassificationDriver.java:276) 
```

给你一个关于不正确路径的提示。

在运行作业之前，请确保您首先将输入数据上传到 HDFS：

```
hadoop fs -mkdir input
hadoop fs -copyFromLocal E:\\file input
... 
```

然后代替：

```
new Path("E:/Thesis/Experiments/Mahout dataset/input") 
```

您应该使用 HDFS 路径：

```
new Path("input") 
```

或者

```
new Path("/user/<username>/input") 
```

**编辑：**

使用[FileSystem#exists(Path path)](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileSystem.html#exists%28org.apache.hadoop.fs.Path%29)来检查 a`Path`是否有效。

# autocompletetextview - 两个 AutoCompleteTextView 中只有一个显示建议

> ID：15273177
> 
> 赞同：1
> 
> 时间：2013-03-07T14:03:14.693
> 
> 标签：autocompletetextview

我在同一页面上有两个 AutoCompleteTextView 控件： ACTV1 和 ACTV2 并且只有一个 (ACTV1 ) 显示来自我的数据库的建议。对于每个数据绑定操作，我分别创建了一个 java 类：ACTV1.java 和 ACTV2.java。但是，如果我在我的清单文件中为 ACTV2.java 类添加一个意图过滤器（MAIN，LAUNCHER）并在运行配置 ACTV2.java 中设置为启动操作，那么我将不再收到有关 ACTV1 控制的建议，但这次我会获取有关 ACTV2 控制的建议。这两个 java 类完全相同，只是某些常量/控件名称的名称不同。

```
 package com.fishing2;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONObject;
import android.app.Activity;

import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;

public class CompleteBalti extends Activity {

    //private CustomAutoCompleteView CompleteBalti;
    private ArrayAdapter<String> adaperbalti; 
    @Override  
      public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.activity_partida);

    }

    final TextWatcher textChecker = new TextWatcher() {  
        public void afterTextChanged(Editable s) {}  

        public void beforeTextChanged(CharSequence s, int start, int count, int after) { }  

        public void onTextChanged(CharSequence s, int start, int before, int count)  
        {  

              adaperbalti.clear();
              callPHP1();  

        }       
    };  

    private void callPHP1(){  
    String result = "";       
    InputStream is=null; 
    AutoCompleteTextView CompleteBalti = (AutoCompleteTextView) findViewById(R.id.nume_localitate);
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
    nameValuePairs.add(new BasicNameValuePair("st",CompleteBalti.getText().toString()));

    {   

        try{ 
                HttpClient httpclient = new DefaultHttpClient();  
                HttpPost httppost = new HttpPost("http://192.168.3.159/wtf/balti.php");  
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,"utf-8"));  
                HttpResponse response = httpclient.execute(httppost);  
                HttpEntity entity = response.getEntity();  
                is = entity.getContent();  
             BufferedReader reader = new BufferedReader(new InputStreamReader(is,"utf-8"),8);  
                StringBuilder sb = new StringBuilder();  
                String line = null;  
                while ((line = reader.readLine()) != null) {                                      
                        sb.append(line + "\n");  
                }  
                is.close();  

                result=sb.toString(); 
                result = result.substring(1);
        }catch(Exception e){  
                Log.e("log_tag", "Error in http connection "+e.toString());  
        }  

         try{
             JSONArray jArray = new JSONArray(result);
             JSONObject json_data = null;

             for (int i=0;i<jArray.length(); i++)
             {   
                  json_data = jArray.getJSONObject(i);
                 adaperbalti.add(json_data.getString("nume_balta"));
             }

            } catch(Exception e1){  
                Log.e("log_tag", "Error converting result "+e1.toString());   

            }     
    }  

                                                      }

                        } 
```

# mediawiki - Semantic mediawiki #ask 查询：在同一查询中显示嵌套属性

> ID：15273180
> 
> 赞同：4
> 
> 时间：2013-03-07T14:03:38.263
> 
> 标签：mediawiki, semantic-web, semantic-mediawiki

我想在与我正在查询的页面相关的页面的相同查询属性中显示。

假设我想查询位于德国的城市类别中的所有页面，并且我想显示页面的标题，但我还想显示德国的表面数据，例如。

像这样的东西：`{{#ask: [[Category:City]] [[location::Germany]] |?mainlabel |?Location.surface }}`

我知道这行不通，但是您可以看到我想要实现的目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:57:38.577

我不确定是否有办法将查询直接嵌套在其他查询中。这样做的正常方法是使用模板。因此，您可以定义一个名为的模板（或模板的子页面，如果这进入模板）`{{tablerow}}`，它包括：

```
<includeonly>
|- valign="top"
| [[{{{1|}}}]]
| {{#show: {{{1|}}} | ?surface }}</includeonly> 
```

标签很重要，`<includeonly>`原因我不太了解，如果您将它们排除在外，有时会产生错误。然后，您只需`#ask`使用`format = template`. （您可以将标头构建到查询中，但我发现将其放在外面更简单。）

```
{| class="wikitable smwtable sortable"
|- valign="bottom"
! [[City]]
! [[Surface]]

{{#ask: [[Category:City]] [[location::Germany]]
  | format   = template
  | template = tablerow
  | link     = none
}}

|} 
```

这将通过模板将查询返回的每个结果打孔，`{{{1}}}`并根据它生成一行。如果您有其他数据要从主查询返回，您要求的其他属性将作为连续的未命名参数出现（因此，如果您包含`| ?population`，它将进入模板，`{{{2}}}`并且需要添加到行结构或它将被丢弃）。

# c# - IGMP 加入消息给出错误的校验和

> ID：15273186
> 
> 赞同：0
> 
> 时间：2013-03-07T14:03:50.603
> 
> 标签：c#, sockets, wireshark, multicast, igmp

我正在尝试连接到多播组以接收一些 UDP 数据包。我正在使用的代码运行良好，我正在接收数据包并且我之前没有遇到过这个问题。但是刚才有一个新的要求，需要数据包通过一个需要看到组播加入消息的交换机。在它只是愚蠢的开关之前，这不是问题。

要加入多播组，我使用以下代码：

```
var LocalAddress = "228.12.12.27";
var LocalPort = 46715;
var LocalEndPoint = new IPEndPoint(IPAddress.Parse(LocalAddress), LocalPort);
var RxSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

RxSocket.Blocking = false;
RxSocket.ReceiveBufferSize = UInt16.MaxValue;
RxSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, 1);

RxSocket.Bind(new IPEndPoint(IPAddress.Any, LocalEndPoint.Port));
RxSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AddMembership, new MulticastOption(LocalEndPoint.Address));
RxSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.MulticastTimeToLive, 50);

RxSocket.Close(); 
```

生成 IGMP Join 消息的行是

```
RxSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AddMembership, new MulticastOption(LocalEndPoint.Address)); 
```

并发出 IGMP Join 消息。

但是，当我使用 Wireshark 窥探网络时，我发现 IGMP 消息的校验和错误； ![http://i.imgur.com/6Ct52QG.png](../Images/0c514dc4d33181bbeb805a4f0eb99897.png)

这是我的代码或输入的问题吗？或者还有别的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:52:03.843

这是在硬件中进行校验和的现代网卡所期望的。不要担心这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:06:27.243

> 这是我的代码的问题吗

不，因为您的代码没有生成*IP*校验和。这要么是由操作系统的网络堆栈生成的，要么是由 Nikolai Fetissov 在他的回答中指出的，由网络适配器生成。

如果您的网络分析器正在发送数据包的机器上运行，并且校验和是由网络适配器而不是由网络堆栈生成的，那么，因为捕获您自己的数据包是由网络堆栈“循环这些数据包”来完成的捕获机制而不是通过网络适配器捕获它传输的数据包（如果有适配器的话，很少有），捕获的数据包将没有计算 IP 校验和，因此几乎肯定会出现错误的 IP 校验和。

注意“可能是由“IP校验和卸载”引起的？” 在 Wireshark 显示中。这就是 Wireshark 所说的。

# c# - 意外的组合框行为

> ID：15273189
> 
> 赞同：0
> 
> 时间：2013-03-07T14:04:00.017
> 
> 标签：c#, winforms, combobox

给定以下代码

```
namespace WindowsFormsApplication1
{
    public class Form1 : Form
    {
        public Form1()
        {
            comboBox1 = new System.Windows.Forms.ComboBox();

            comboBox1.Items.AddRange(new object[] {
            "Item 1",
            "Item 2",
            "Item 3"});
            comboBox1.Location = new System.Drawing.Point(93, 103);
            comboBox1.Name = "comboBox1";
            comboBox1.Size = new System.Drawing.Size(121, 21);
            comboBox1.Text = "Item 1"; // **line 1**

            ClientSize = new System.Drawing.Size(284, 262);
            Controls.Add(this.comboBox1);

            Name = "Form1";
            Text = "Form1";

            comboBox1.Text = "Nanu"; // **line 2**
        }

        private ComboBox comboBox1;

    }
} 
```

我希望我的 ComboBox 显示“Nanu”（DropDownStyle.DropDown），但它显示“Item 1”。省略该行可以`comboBox1.Text = "Item 1";`解决此问题。放入OnShown`comboBox1.Text = "Nanu";`事件处理程序也修复了“错误”。

为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:24:49.223

根据[msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.text.aspx)

> 将 Text 属性设置为 null 或空字符串 ("") 会将 SelectedIndex 设置为 -1。将 Text 属性设置为 Items 集合中的值会将 SelectedIndex 设置为该项目的索引。将 Text 属性设置为不在集合中的值会使 SelectedIndex 保持不变。

所以，当你这样做时：

```
comboBox1.Text = "Item 1"; 
```

您将自动选择之前添加到项目列表中的“项目 1”。将“Nanu”添加到集合中，它应该可以工作：

```
comboBox1.Items.AddRange(new object[] {
    "Item 1",
    "Item 2",
    "Item 3",
    "Nanu"}); 
```

# jenkins - Jenkins 的多个 jMeter 脚本？

> ID：15273194
> 
> 赞同：1
> 
> 时间：2013-03-07T14:04:12.347
> 
> 标签：jenkins, jmeter, jenkins-plugins

我很感兴趣是否可以使用 Jenkins+Performance 插件来运行多个 .jmx (jMeter) 文件。我正在使用 SVN 存储库来保存我的 jMeter 脚本。但问题是我只能将一个 jmx 文件添加到 repo。我想添加多个，但詹金斯只运行第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T12:43:12.157

我认为您可以在 Jenkins 中使用 Ant 来执行此操作。

请注意以下 build.xml 片段中的“testplans”元素：

```
<jmeter>
    jmeterhome="c:\jakarta-jmeter-1.8.1"
    resultlog="${basedir}/loadtests/JMeterResults.jtl">
    <testplans dir="${basedir}/loadtests" includes="*.jmx"/>
</jmeter> 
```

更多信息在这里： http: [//www.programmerplanet.org/projects/jmeter-ant-task/](http://www.programmerplanet.org/projects/jmeter-ant-task/)

# cloudbees - 加密配置参数

> ID：15273195
> 
> 赞同：0
> 
> 时间：2013-03-07T14:04:14.460
> 
> 标签：cloudbees

如何存储配置属性，使其值无法通过 bees config:list 随时读取？我们使用主密码作为系统属性（尽管我们对其他选项开放），允许我们解密其他密码。但是，我们意识到任何拥有 CB SDK 访问权限的用户都可以轻松列出该值。我们在这里有哪些选项可以将其加密存储或解决方案的其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:38:33.010

不幸的是，还没有可用的加密选项，例如，除非您自己在 ClickStack 中烘焙它。

不过，这将是一个有趣的功能，我将与我的同事讨论这种可能性。

# powershell - 从 AD 中删除/删除组

> ID：15273202
> 
> 赞同：0
> 
> 时间：2013-03-07T14:04:36.520
> 
> 标签：powershell, windows-server-2008-r2, adsi

我正在使用此脚本添加/创建一个新组：

```
$strCLass = "Group"
$StrName = "CN=$naam"
$intGroupType = $type
$objADSI = [ADSI]"LDAP://ou=$OU,dc=myADserver,dc=local" 
$objGroup = $objADSI.create($strCLass, $StrName)
$ObjGroup.put("GroupType",$intGroupType)
$objGroup.setInfo() 
```

我找不到扭转这种情况的方法，以便我可以从 OU 中删除组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:17:24.823

```
$objADSI.Delete($strCLass,$StrName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:07:11.960

你可以使用 Powershell ActiveDirectory 模块吗？

如果可以，那么它很简单`Remove-ADGroup`

[http://technet.microsoft.com/en-us/library/ee617228.aspx](http://technet.microsoft.com/en-us/library/ee617228.aspx)

# symfony - symfony2 分层 ACL

> ID：15273206
> 
> 赞同：2
> 
> 时间：2013-03-07T14:04:47.690
> 
> 标签：symfony, doctrine-orm, acl

我有以下问题：

我的大多数实体都通过一个指向树结构的链接保存，该树结构具有[教义树扩展名](https://github.com/l3pp4rd/DoctrineExtensions)。我开始实现 acl 系统，但很快意识到它并不完全适合。

一个虚构的小例子来说明这一点：

*   运动组
    *   网球组
    *   篮球组
    *   游泳组

新闻项目可以添加到这些不同的组中。现在有了 symfony acl，我可以授予所有或个别新闻实体的权利。我希望能够将特定组中的实体的权限授予一个用户。

我应该放弃使用acl系统并自己编写还是有其他方法可以解决这个问题？

# iphone - Objective C - UIStepper 反应

> ID：15273208
> 
> 赞同：0
> 
> 时间：2013-03-07T14:04:49.453
> 
> 标签：iphone, objective-c, uiviewcontroller, delegates

我试图问这个问题，但不知怎的，我想我没能正确表达自己，所以我删除了它并重新开始。

我有一个层次结构：- **ViewController** => **UIView** => **Stepper**

这是我的 UIView 代码：-

```
@implementation Controls
@synthesize m_numColumn=_whatever;
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        int i;
        m_numColumn= [[UIStepper alloc]init];
        m_numColumn.frame = CGRectMake(1, 1, 30, 30);
        m_numColumn.autorepeat= FALSE;
        [m_numColumn setValue:2];
        m_displayColumnNum= [[UILabel alloc]init];
        m_displayColumnNum.frame = CGRectMake(30, 30, 60, 30);
      //  m_displayColumnNum.backgroundColor =lgammaf(<#float#>);
       // m_displayColumnNum.text= [NSString stringWithFormat:@"aaaaaa"];
        i= m_numColumn.value;
        m_displayColumnNum.text= [NSString stringWithFormat:@"%d",i];
        [self addSubview:m_numColumn];
        [self addSubview:m_displayColumnNum];
     //   Controls.delegate = [m_numColumn.navigationController.viewControllers objectAtIndex:0];
        [m_numColumn addTarget:self  action:@selector(stepperChanged:) forControlEvents:UIControlEventTouchUpInside];
        //[m_numColumn setdelegate];

    }
    return self;
} 
```

这里重要的一行是：

```
[m_numColumn addTarget:self  action:@selector(stepperChanged:) forControlEvents:UIControlEventTouchUpInside]; 
```

我想要的是在 UIViewController （父对象）中对该事件做出反应。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:18:04.403

是你没有得到事件的问题吗？我一直将 UIStepper 与“UIControlEventValueChanged”一起使用，在您的情况下应该是：

```
[m_numColumn addTarget:self  action:@selector(stepperChanged:) forControlEvents:UIControlEventValueChanged]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:42:39.817

有你正在听的controlEvents的点，但是目标也有问题

```
[m_numColumn addTarget:self  action:@selector(stepperChanged:) forControlEvents:UIControlEventTouchUpInside]; 
```

您不应该使用“self”，它是对您的视图而不是您的视图控制器的引用，要么使用“myController”变量，要么在控制器中执行此方法

# javascript - 当原型中的网址 http://www.google.com 时，toQueryParams() 将返回什么

> ID：15273209
> 
> 赞同：1
> 
> 时间：2013-03-07T14:04:55.213
> 
> 标签：javascript, prototypejs, query-parameters

我有一个从 URL 获取查询参数的场景。有一个方法被调用`toQueryParams()`，它将获取所有参数。但是当 URL 是`http://www.google.com`相同的方法时，返回与查询参数相同的 URL，URL 作为键，未定义作为值。

```
var param = window.location.href.toQueryParams() 
```

这是我使用的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:15:40.970

当 URL 没有查询参数时，即没有URL`?`或`&`URL 的一部分，那么除了 URL 之外没有查询参数。

那么我通常如何在给定的 URL [http://www.mywebsite.com/index.php?arg=2500&search=Smith上使用此方法](http://www.mywebsite.com/index.php?arg=2500&search=Smith)

```
var param = window.location.href.toQueryParams();
if(param.arg != undefined)
{
    //do things with the arg parameter
}
if(param.search != undefined)
{
    //do things with the search param
    alert('User has selected '+param.search+' as the search parameter');
} 
```

因此，如果给定的参数不存在，那么我不会尝试处理它。该方法`toQueryParam()`为您提供了一个您可以处理的错误，而不是停止您的 JS 执行的 Exception 或 full on JS 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:28:34.327

我尝试通过以下方式解决此问题。

```
if (window.location.search != "") { // this means the url has no query params
var param = window.location.href.toQueryParams(); // param Object will holds queryparams in key and value form
} else {
var param = new Object(); // param will has no queryParmas but, it is an empty object
} 
```

# javascript - 查找mousedown期间鼠标位置是否改变

> ID：15273211
> 
> 赞同：0
> 
> 时间：2013-03-07T14:05:04.707
> 
> 标签：javascript, jquery, html, backbone.js, web

我有一个文本，当我长按鼠标按钮（700 毫秒）时，我将在该文本上激活一个文本编辑器。在此期间（按下鼠标时），我必须检查鼠标位置是否移动。问题是，我只有一个事件，鼠标按下事件。

如何判断鼠标是否被移动？我试图参加一个新活动，但我是 jquery 的初学者，所以我无法实现我想要的。

这是我获得事件的功能。

```
 onTaskItemMouseDown: function (event) {

        // We only check the left click
        if (event.button !== 0) { return true; }

        var that = this,
            initialX = event.pageX,
            initialY = event.pageY;

        // Set timeout
        console.log("x=" + initialX);
        console.log("y=" + initialY);
        this.pressTimer = window.setTimeout(function () {

            clearTimeout(that.pressTimer);
            that.pressTimer = 0;
            that.onEditTask(event, that.$(event.currentTarget).closest(".task").find(".dropdown-container").data("task-id"));
        }, MindomoUtils.longClickDuration);

        return true;
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:13:46.320

您可能正在寻找 mousemove 事件。

我可以看到您已经在使用 jQuery，所以这里有一个示例。

用于输出的 HTML

```
<ul class="output"></ul> 
```

jQuery

```
$(document).on('mousedown', onMouseDown)
$(document).on('mousemove', onMouseMove)
$(document).on('mouseup', onMouseUp)

var mouseIsDown = false

function onMouseDown(event) {
    // set boolean true
    mouseIsDown = true
    $('.output').append($('<li>').text('Mouse down - x: ' + event.pageX + ' y: ' + event.pageY))
}

function onMouseMove(event) {
    if(mouseIsDown) {
        $('.output').append($('<li>').text('Mouse moving - x: ' + event.pageX + ' y: ' + event.pageY))
    }
}

function onMouseUp(event) {
    // set boolean false again
    mouseIsDown = false
    $('.output').append($('<li>').text('Mouse up - x: ' + event.pageX + ' y: ' + event.pageY))
} 
```

[在这里你可以自己玩。](http://jsfiddle.net/CJHfd/)

# java - 程序不工作（有自己的数学方法的兴趣程序）（未处理的异常类型错误）（作业）

> ID：15273213
> 
> 赞同：0
> 
> 时间：2013-03-07T14:05:25.277
> 
> 标签：java

以下程序旨在计算简单的利息给定公式 i = p*r*t，给定用户输入并将其放入自己的方法（必须），但是，在运行它时，我收到错误“未处理的异常类型 IOException。 ..” 我之前尝试实现一个 try catch 块，但它导致了更多错误

```
import java.io.*;

public class cInterest {

    public static void main(String[] args) throws IOException {

    }

    public static double balance(double principal, double rate, double years) {

        double amount = 0;

        String input;
        BufferedReader myInput = new BufferedReader(new InputStreamReader(
                System.in));

        System.out.print("How much would you like to take out? ");
        input = myInput.readLine();
        principal = Double.parseDouble(input);

        System.out.print("Enter the interest rate: ");
        input = myInput.readLine();
        rate = Double.parseDouble(input);

        for (int i = 1; i < years; i++) {
            amount = principal * rate * years;
            amount += principal;
        }
        return amount; // - principal;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:11:00.513

```
myInput.readLine(); can throw `IOException` so you **must** handle it somewhere. 
```

利用：

```
try {
    myInput.readLine();
} catch (IOException e){
    e.printStackTrace();
} 
```

并尝试解决其他问题。还要从方法中删除`throws`声明。`main`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:11:03.250

最简单的解决方法是简单地声明您的方法抛出（如果您从那里调用，您也`IOException`需要对方法执行此操作）：`main``balance`

```
public static double balance(double principal, double rate, double years) throws IOException {

public static void main(String[] args) throws IOException { 
```

您可能想尝试使用[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)而不是`InputStreamReader`- 它更容易用于此类事情

```
Scanner sc = new Scanner(System.in); 
```

为了执行您的代码，您需要从`main`方法中调用它：

```
public static void main(String[] args) throws IOException {
    balance(0, 0, 0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:10:31.400

> 但是，在运行它时，我收到错误“未处理的异常类型 IOException...”

程序运行时不会出现异常（实际上，您的`main()`方法仍然是空的，因此不会执行任何操作），但是**编译器**在编译代码时会出现此错误。

你要么需要捕获异常，要么让你的方法让它继续下去，比如

```
public static double balance(double principal, double rate, double years) throws IOException { ... } 
```

背景是您`myInput.readLine();` **可以**抛出`IOException`- 这需要传递给调用方法，如上所示，或者需要由 a 处理`try{}-catch()-block`：

```
try {
    input = myInput.readLine();
} catch(IOException ioex) {
    ioex.printStackTrace();
    // ... additional code to handle the exception properly
} 
```

您还应该避免`main()`抛出异常 - 如果您从上面选择第一种方法并让 balance 抛出异常，请`IOException`在 main 方法中处理它。以下代码片段还显示了如何调用该`balance`方法：

```
public static void main(String[] args) {
    try {
        balance(1, 2, 3);
    } catch(IOException ioex) {
        ioex.printStackTrace();
        // ... additional code to handle the exception properly
    }
} 
```

另见[课程：例外](http://docs.oracle.com/javase/tutorial/essential/exceptions/)。

# c# - DateTime ToString(“dd/MM/yyyy”) 返回 dd.MM.yyyy

> ID：15273215
> 
> 赞同：12
> 
> 时间：2013-03-07T14:05:29.423
> 
> 标签：c#, asp.net, datetime

我也尝试过屏蔽格式化字符串中的“/”符号，但效果不佳。我的最终目标是获取以“/”符号作为分隔符的日期。我想我可以使用`DateTime.ToString(“dd/MM/yyyy”).Replace('.', '/')`，但这感觉有点过分。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-07T14:08:20.567

`/`日期/时间格式字符串中的字符代表“格式提供程序的日期分隔符是什么”。由于您不提供格式提供程序`Thread.CurrentCulture`，因此在您的情况下，当前区域性`.`用作日期分隔符。

如果要使用*文字*斜线，请将其放在单引号内：

```
dateTime.ToString("dd'/'MM'/'yyyy"); 
```

或者，您可以指定日期分隔符为的格式提供程序`/`：

```
dateTime.ToString("dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

以上所有内容都[记录在 MSDN 上](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#dateSeparator)。

**[看一个活生生的例子中的区别](http://ideone.com/gp9RE4)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:08:38.733

```
string s = dt.ToString("dd/M/yyyy", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T14:10:53.977

这是因为[`ToString`默认情况下的工作](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)方式，根据当前的文化：

> 此方法使用从当前区域性派生的格式信息。

所以，覆盖它：

```
string date = dt.ToString("dd/M/yyyy", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T14:09:38.823

这有效（注意[`InvariantCulture`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)）：

```
DateTime.Now.ToString("dd/MM/yyyy", CultureInfo.InvariantCulture) 
```

如果`CultureInfo`未指定 a，`CurrentCulture`将使用 。如果这是一种在日期中不使用斜杠作为分隔符的区域性，则它将替换为实际区域性日期分隔符。

# android - 保护 REST API 以供 Android 客户端使用

> ID：15273217
> 
> 赞同：9
> 
> 时间：2013-03-07T14:05:32.713
> 
> 标签：android, security, rest, ruby-on-rails-3.2

我们正在 Rails 中开发一个 JSON REST API，供我们也在开发的 Android 应用程序使用。有什么方法可以保护 API，使其只能由我们特定的 Android 应用程序使用？

API 是只读的，不涉及任何类型的用户相关信息或其他敏感信息。但在合理的范围内，我们希望防止滥用并将其仅用于我们的应用程序。

我可以轻松地将身份验证令牌添加到 API 并将其与应用程序一起分发，但是：

1.  如果我们使用 BASIC auth，我们可能不得不将 API 转移到 SSL。
2.  无论如何，对于一个有决心的人来说，打开 Android APK 二进制文件并发现身份验证令牌可能是微不足道的。

这种情况似乎类似于咖啡馆在商店柜台上张贴他们的 WiFi 密码——你必须将秘密告诉所有想要使用你服务的人，所以一开始就拥有它似乎毫无意义。

采取什么最合理的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T14:33:43.753

想要保护一个可能公开的未记录 API，使其只能由一个应用程序访问，意味着您想要阻止那些**确定**使用您的 API 的人使用您的 API。

意思是那些会尽一切可能使用你的 API 的人。

如果不是这种情况，添加 Auth 令牌并非易事，但对于偶然发现您的 API 的人来说至少是一个很大的垫脚石。实现这一点并不是一个非常糟糕的主意。

因为此身份验证不是基于用户的，而是基于应用程序的，并且您不希望身份验证依赖于用户输入。该请求必须完全由应用程序完成。

这意味着无论如何您都必须这样做（添加硬编码令牌）。只有你让一个有决心的人很难发现访问和请求令牌和方法。

这取决于具体情况，但我会选择 SSL 和硬编码令牌。

一些额外的安全性：

*   向只需要定期发送请求令牌的应用程序释放访问令牌。这意味着人们拦截硬编码请求令牌的机会较小，但基于会话的访问令牌会过期。也许只为每个应用程序安装执行一次。
*   在通过空中发送此请求令牌之前对其进行编码。这意味着人们必须反编译您的应用程序。
*   混淆代码（使其更难反编译）。

# makefile - 停止制作它进入/退出的回显目录

> ID：15273219
> 
> 赞同：1
> 
> 时间：2013-03-07T14:05:35.333
> 
> 标签：makefile, gnu-make

我有一个`Makefile`遍历目录列表，它工作正常，但是我不想*得到*`Entering`/ info 消息，`Leaving`如下所示：

```
make[1]: Leaving directory `/home/zzz/aaa/bbb/ccc' 
```

执行遍历的代码位（列表`ccc`中的目录之一在哪里并且在目录中）在这里：`SUBDIRS``Makefile``bbb`

```
@for i in $(SUBDIRS); do \
(cd $$i; make $@); \
done 
```

我猜想这`(cd $$i; make $@)`部分需要做些什么，但不知道是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:21:40.560

GNU 根据`MAKELEVEL`: 决定是否打印此信息，如果已设置且 > 0，则打印该信息。您可以取消设置或伪造 zero `MAKELEVEL`，因此 GNU make 认为这是初始调用。

```
@for i in $(SUBDIRS); do \
    (cd $$i; unset MAKELEVEL; make $@); \
done 
```

应该做的伎俩。

另一方面，**Recursive make 被认为是有害**的（google it）。如果可以，请避免它。

**编辑**：正如 bobbogo 指出的那样，有一个 GNU make 选项`--no-print-directory`；这比我上面的破解要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:09:52.540

尝试使用包含而不是“for”循环：

[http://www.gnu.org/software/make/manual/html_node/Include.html](http://www.gnu.org/software/make/manual/html_node/Include.html)

# ajax - ui：包含在 TabView 中：选项卡中的第一个 ajax 调用不会触发（commandButton 操作）

> ID：15273220
> 
> 赞同：1
> 
> 时间：2013-03-07T14:05:38.173
> 
> 标签：ajax, jsf, action, actionlistener, tabview

下面的代码是tabView，后面是加载页面的结构。对于 commandButton，我尝试了 actionListener、渲染和更新的不同组合，显式引用目标 inputtextarea (req) 等。当表单在其自己的页面中运行时（而不是在选项卡中），该操作可以正常工作。

在“preRenderView”事件中，我初始化数据结构，这些数据结构在表单显示时填充。问题是当我单击预览按钮时。通常动作触发，处理方法组装数据以在预览输入外部区域（req）中显示，并显示。

奇怪的是，当我单击按钮时，不会调用该操作，尽管有活动调用我的其他选项卡的 loadReqEvents，并且在托管 tabView 的外部页面中。我怀疑这是我不知道的 JSF 的请求-响应细微差别。感谢帮助。

```
<p:tabView id="tbv" dynamic= "true" activeIndex="#{sessionController.activeTab}" styleClass="tabview-style">       
  <p:tab id="rtmTab" styleClass="tab-style" title="RTM" closable="false" titletip="Requirements Traceability Matrix">
      <ui:include src="url(./../rtm.xhtml"/>
   </p:tab>
   <p:tab id="composeTab" styleClass="tab-style" title="#{sessionController.composeTabTitle}" rendered="#{sessionController.crudTabRendered}" closable="false" titletip="Composition Form">
      <ui:include src="url(./..#{sessionController.composeUrl}.xhtml"/>
   </p:tab>
   <p:tab id="objTab" styleClass="tab-style" title="Object / Data Model" closable="false" titletip="Object and Data Model View">
      <ui:include src="url(./../objView.xhtml"/>
   </p:tab>
</p:tabView>  
</p:layoutUnit>

<p:layoutUnit id="formLayout" position="center" gutter="0" styleClass="form-layout"> 
  <h:form>
    <f:event listener="#{attrDefController.loadReqEvent}" type="preRenderView"></f:event>  
    <p:panel style="background-color:rgb(222,231,254);width:925px;height:98%;margin-top:-4px;margin-left:-8px">
      <h:panelGrid columns="7" style="margin-right:-8px" cellpadding="2">
          <h:commandButton id="preview" value="Preview" action="#{attrDefController.previewReqAction}" style="width:100px; margin-top:2px">
             <f:ajax execute="@form" render="req"/>
          </h:commandButton>
       </h:panelGrid>
     </p:panel>
   </h:form>
 </p:layoutUnit> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:41:12.227

在没有看到组件`req`声明位置的标记的情况下，我假设它存在于`ui:include`.

问题是 的`render`属性`f:ajax`指定了页面上不存在的 id。这样做的原因是组件客户端 ID 将以其 parent 的客户端 ID 为前缀`UINamingContainer`。

并非所有 JSF 组件都是 UINamingContainer，`form`这就是为什么您通常会看到表单的 ID 以组件的客户端 ID 为前缀的原因。例如：

```
<h:form id="formone">
  <h:outputText id="textComponent" value="YO" />
  <h:commandButton ...>
    <f:ajax update="textComponent" />
  </h:commandButton>
</h:form>
<h:form id="formtwo">
  <h:commandButton ...>
    <f:ajax update=":formone:textComponent" />
  </h:commandButton>
</h:form> 
```

在上面的示例中，客户端 ID`textComponent`实际上是`formone:textComponent`。现在，上面示例中的命令按钮仍然可以通过其实际 ID 引用它，因为它恰好`UINamingContainer`与其兄弟组件相同。

然而，另一种形式的 commandButton 必须通过其完整的客户端 ID 访问它，因为它不是`textComponent`. 它通过在客户端 ID 前面加上通用选择器`:`，然后在其后加上`textComponent`.

现在这与您的问题有什么关系？

PrimeFaces TabView 组件恰好也是一个`UINamingContainer`。

所以这意味着要 Ajax 渲染带有 ID 的组件，`req`您需要为表单指定一个 ID 并以这种方式调用它......

```
render=":formid:tbv:req" 
```

我希望这是有道理的。

# angularjs - Meteor (v0.5.7) 和 Meteor_angularjs (v1.2.0) 在 body 标签内生成 'html##html_attributes##' 标签

> ID：15273221
> 
> 赞同：0
> 
> 时间：2013-03-07T14:05:40.573
> 
> 标签：angularjs, meteor

我想知道如何解决这个问题，Meteor (v0.5.7) 和 Meteor_angularjs(v1.2.0) 在 body 标记中生成 'html##html_attributes##' 标记。

如果我将 Meteor(v0.5.6) 与 Meteor_angularjs(v1.2.0) 一起使用，则不会发生此问题。所以我认为 Meteor(v0.5.7) 中的一些生成代码影响了 Meteor_angularjs。

这个案例是这样的：

```
<html>
<head>…&lt;/head>
<body>
    <html##html_attributes##>
    <script type="text/javascript" src="/packages/underscore/underscore.js?47479149fe12fc56685a9de90c5a9903390cb451"></script>
    ...
    (generated code by Meteor) 
    ...
    </html##html_attributes##>
</body>
</html> 
```

您可以通过 Meteor_angularjs (v1.2.0) 和 Meteor (v0.5.7) 的 todos 看到这个问题。

为了避免这个问题，我目前正在使用 Meteor (v0.5.6) 来测试 Meteor 和 Angular 的集成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:27:31.697

解决这个问题的方法是用陨石运行它。使用 Meteor 总是会给我带来这些问题。以下是修复方法：

1.  安装陨石：`sudo npm install -g meteorite`
2.  将 CD 放入您的目录： `cd myproject`
3.  现在，不要运行meteor，而是运行mrt！添加包：`mrt add angularjs`会自动下载并添加包。
4.  现在，用陨石运行你的项目： `mrt`

那应该可以解决您的问题。

# r - 使用循环定义数据片段（for 和 if）

> ID：15273223
> 
> 赞同：1
> 
> 时间：2013-03-07T14:05:46.980
> 
> 标签：r

我有大量的数据，但这只是一个有代表性的例子。

```
data=c(0,0,0,0,0.1,0.1,0.1,0,0,0,0,0.2,0.1,0,0,0.3,0.1,0.1,0,0) 
```

我正在尝试定义单独的事件，这些事件以不同于零的第一个值开始，并以不等于零的最后一个值结束（事件不得包含零值）。所以在这种情况下，我将有三个事件：(0.1,0.1,0.1)、(0.2,0.1) 和 (0.3,0.1,0.1)。首先，我尝试定义第一个不为零的数字：

```
events <- list()
for(i in seq(1,length(data),1)){
if(data[i]==0) next
else start1=i 
```

当循环找到与零不同的第一个值时，我尝试使用另一个 for 循环（并重复）来定义事件的结束，但我的解决方案都不起作用......

然后我尝试用部分数据定义新列表：

```
events[[paste('ev', end1-start1)]] = data[start1:end1]
rm(start1); rm(end1)
} 
```

当我更改变量的名称时，我忘记了 start 和 end 是函数...谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:23:31.160

也使用`rle`，但获得结果的方式不同：

```
rr  <- rle(data != 0)
idx <- rr$lengths[rr$values]
split(data[data != 0], rep(seq(idx), idx))

# $`1`
# [1] 0.1 0.1 0.1

# $`2`
# [1] 0.2 0.1

# $`3`
# [1] 0.3 0.1 0.1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T14:15:08.480

怎么样：

定义数据

```
data=c(0,0,0,0,0.1,0.1,0.1,0,0,0,0,0.2,0.1,0,0,0.3,0.1,0.1,0,0) 
```

使用`rle`（正如 Carl Witthoft 在评论中独立建议的那样）

```
rr <- rle(data!=0)
cc <- c(0,cumsum(rr$lengths))
v <- rr$values 
```

下一位*可以*通过循环来完成。`mapply`有点神奇。如果结果恰好都是相同的长度，您可能需要添加`SIMPLIFY=FALSE`以防止结果折叠到矩阵中。

```
mapply(function(start,end) data[start:end],
   cc[v]+1,cc[v]+rr$length[v])

## [[1]]
## [1] 0.1 0.1 0.1

## [[2]]
## [1] 0.2 0.1

## [[3]]
## [1] 0.3 0.1 0.1 
```

请注意，我还没有对此进行过广泛的测试...

# python - 初学者对为什么即使 list [var1, var2] 更改 var1 也不会更改感到困惑

> ID：15273228
> 
> 赞同：1
> 
> 时间：2013-03-07T14:05:54.523
> 
> 标签：python

对 python 和整体编程非常陌生。为什么这段代码：

```
def daysBetweenDates(year1, month1, day1, year2, month2, day2):
    years = [year1, year2]
    def leapyr(n):
        if n % 400 == 0:
            return True
        elif n % 100 == 0:
            return False
        elif n % 4 == 0:
            return True
        else:
            return False

    for i, year in enumerate(years):
        if leapyr(year):
            years[i] = year * 366
            print 'l:', years, year1, year2
        else:
            years[i] = year * 365
            print 'n:', years, year1, year2

daysBetweenDates(1,1,1,4,2,1) 
```

在years[ ]中改变year1和year2，但不改变year1和year2？

```
n: [365, 4] 1 4
l: [365, 1464] 1 4 
```

**编辑：工作代码**

```
def daysBetweenDates(year1, month1, day1, year2, month2, day2):
    years = [year1, year2]
    def leapyr(n):
        if n % 400 == 0:
            return True
        elif n % 100 == 0:
            return False
        elif n % 4 == 0:
            return True
        else:
            return False

    for i, year in enumerate(years):
        if leapyr(year):
            years[i] = year * 366
            year1 = years[0]
            year2 = years[1]
            print 'l:', years, year1, year2
        else:
            years[i] = year * 365
            year1 = years[0]
            year2 = years[1]
            print 'n:', years, year1, year2

daysBetweenDates(1,1,1,400,2,1) 
```

现在给出正确答案：

```
n: [365, 400] 365 400
l: [365, 146400] 365 146400 
```

你的帖子看起来代码太多了，这里放一些更多的文字。文字很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:12:49.880

Years 是一个列表，如果它是可变对象（即 dict、list 等），则通过引用复制其中的值，如果变量不可变（int、string、tuple 等），则通过值复制。因此，当您修改列表中的 int 值时，它不会反映用于构建它的 int 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:22:44.677

当您创建列表年份时，变量 year1 和 year2 将按值传递。因此，当您随后修改它时：

```
years[i] = year * 365 
```

您只是更改列表中的值，而不是创建它的变量。

这个 SO 问题有关于如何在 Python 中传递参数的很好的信息：[如何通过引用传递变量？](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)

从我的浏览来看，您可能需要将日期作为对象而不是原始整数传递给您的 daysBetweenDates 函数。

# .htaccess - 如何阻止 apache 将以斜杠结尾的 url 视为目录

> ID：15273230
> 
> 赞同：0
> 
> 时间：2013-03-07T14:06:01.993
> 
> 标签：.htaccess, mod-rewrite

我目前有以下作为我的静态文件的 htaccess 规则，它工作正常。

`http://mywebsite.local/en/testing-page`从中获取页面`cached_pages/en/testing-page.html`

```
RewriteCond %{REQUEST_METHOD} GET
RewriteCond %{DOCUMENT_ROOT}/cached_pages/%{REQUEST_URI}\.html -s
RewriteRule .* cached_pages/%{REQUEST_URI}\.html [L] 
```

我的服务器还将索引文件写为 cached_pa​​ges/en.html 这是正确的。但是，需要哪些 htaccess RewriteCond 和 RewriteRule 行来指向文件，所以`http://mywebsite.local/en/`从`cached_pages/en.html`

```
RewriteCond %{REQUEST_METHOD} GET
???????????
??????????? 
```

**请注意**URL 的末尾有一个**/**，所以它不像我想象的那么简单。

那么，如何让重写规则为以斜杠结尾的 url 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:49:43.247

最简单的方法是使用附加的斜杠复制现有规则并使用and`/`锚定它`^``$`

```
RewriteCond %{REQUEST_METHOD} GET
RewriteCond %{DOCUMENT_ROOT}/cached_pages/$1\.html -s
RewriteRule ^(.+)$ cached_pages/$1\.html [L]

RewriteCond %{REQUEST_METHOD} GET
RewriteCond %{DOCUMENT_ROOT}/cached_pages/$1\.html -s
RewriteRule ^(.+)/$ cached_pages/$1\.html [L] 
```

# c# - 来自其他对象的 wpf 命令参数

> ID：15273233
> 
> 赞同：13
> 
> 时间：2013-03-07T14:06:08.623
> 
> 标签：c#, wpf, data-binding, icommand

我想知道如何为以下内容标记 XAML。我有一个基于对象的视图模型`ICommand`。

我有一个带有文本框和按钮的表单。按钮通过 连接到`ICommand`对象`Command="{Binding MyButtonInViewModel}"`。

我想要做的是将按钮设置为`CommandParameter`等于文本框文本中的任何内容，例如调用“搜索”，但显然不知道如何挂钩视图中的控件。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-07T14:09:34.830

以下 XAML 应该可以将 TextBox 中的文本作为参数传递给您的命令。

```
<TextBlock x:Name="searchBox" />

<Button Command="{Binding MyButtonInViewModel}" 
        CommandParameter="{Binding Text, ElementName=searchBox}"/> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T14:14:55.770

您可以通过`ElementName`在绑定中设置来做到这一点。这是一个例子：

```
<TextBox x:Name="textBox"/>
<Button Content="Button" 
        Command="{Binding ButtonCommand}" 
        CommandParameter="{Binding ElementName=textBox, Path=Text}"/> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-27T17:01:25.260

如果您将文本框本身绑定到按钮的命令参数，而不仅仅是文本框的文本属性，您可以在视图模型中操作文本框，例如，清除文本属性。

```
<TextBox x:Name="searchBox" />

<Button Command="{Binding MyButtonInViewModel}"
        CommandParameter="{Binding ElementName=searchBox}" /> 
```

查看型号代码

```
private void SearchStuff(TextBox searchBox)
{
    //do stuff with searchBox.Text
    searchBox.Text = "";
} 
```

对于这个示例可能不是很好，您可能希望搜索文本与搜索结果一起显示。更适合您希望在单击按钮时“使用”文本的日志记录或消息传递应用程序。

# android - 翻译人员将文本捕获到的本地化工具 - 为 Android、BB、iOS 等输出文件

> ID：15273234
> 
> 赞同：2
> 
> 时间：2013-03-07T14:06:12.383
> 
> 标签：android, ios, blackberry, localization

我想要一个工具来帮助我们的应用程序进行语言本地化。我们目前支持 iOS、Android、Blackberry。

*   我们使用手动过程，将 Excel 文件传递​​给客户端并再次返回。
*   我们不传递资源文件，因为客户端可以很容易地破坏它们。

当我得到翻译时，我必须为每个平台制作所需的文件。我已经编写了一些代码以使其更容易一些，但我确信那里有一个合适的工具。

这是关于类似工具的答案，但适用于 Visual Studio 和 MS 工具链：

*   [生成新的本地化资源文件的最简单方法是什么？](https://stackoverflow.com/questions/3704115/what-would-be-the-easiest-way-to-generate-new-localized-resource-files?rq=1)

* * *

这个过程很慢，但很常见（见相关的，不是重复的，问题）：

*   [解析 Excel 文件中的字符串以翻译 Android 应用程序](https://stackoverflow.com/questions/10891533/parse-strings-from-excel-file-for-translating-an-android-app)
*   [是否有非开发人员（翻译人员！）编辑资源包的工具？](https://stackoverflow.com/questions/1006550/is-there-a-tool-for-non-developers-translators-to-edit-resource-bundles)

认为：

*   我知道平台所需文件的格式
*   应用程序已经使用资源文件编写，即没有硬编码字符串

* * *

**理想**的工具应具有以下特点：

*   为客户提供直观的布局以更新各种语言
*   看起来类似于 Excel 即表格布局
*   基于网络
*   允许将捕获的语言轻松输出到 iOS、Android、Blackberry 资源文件中

我不需要自动翻译工具，而且我知道它们至少存在于 Android 上。

我知道我可以自己写，而且可能不得不写——但这是开发人员经常觉得他们必须重新发明一个已经完善的轮子的地方之一……

# gcc - 相当于gcc编译器的pgcc“-Minfo =”标志？

> ID：15273244
> 
> 赞同：3
> 
> 时间：2013-03-07T14:06:31.297
> 
> 标签：gcc, compiler-optimization, pgcc

我刚刚在 pgcc 中发现了一个不错的“-Minfo=”标志，它输出编译器正在进行的所有优化。

IE：

```
pgcc -c -pg -O3 -Minfo=all -Minline    -c -o example.o example.c
run:
 55, Memory zero idiom, loop replaced by call to __c_mzero8
 91, Memory zero idiom, loop replaced by call to __c_mzero8
pgcc -c -pg -O3 -Minfo=all -Minline    -c -o controller.o controller.c
main:
 82, second inlined, size=4, file controller.c (113)
 84, second inlined, size=4, file controller.c (113) 
```

GCC是否有等效的编译器标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-20T16:02:44.610

**是的，有**。`-fopt-info`就是你要找的。

```
gcc -O3 -fopt-info example.c -o example 
```

或者等效地你可以做

```
gcc -O3 -fopt-info-all=all.dat example.c -o example 
```

将所有优化信息输出到文件`all.dat`。您还可以通过如下方式指定您想要的优化信息`-fopt-info-options`：

```
-fopt-info-loop                 # info about all loop optimizations  
-fopt-info-vec                  # info about auto-vectorization
-fopt-info-inline               # info about function inlining
-fopt-info-ipa                  # info about all interprocedural optimizations 
```

如果您愿意，您可以通过告诉`gcc`仅转储有关`loops/inlinings/vectorizations`已优化或遗漏的 信息来获得更具体的信息

```
-fopt-info-inline-optimized     # info only about functions that were inlined
-fopt-info-vec-missed           # info only about vectorizations that were missed
-fopt-info-loop-note            # verbose info about loop optimization 
```

有关更多详细信息，请查看[在线文档](https://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)。

# python - 如何使用 python//Matplotlib 重新创建此图形？

> ID：15273245
> 
> 赞同：5
> 
> 时间：2013-03-07T14:06:35.000
> 
> 标签：python, matplotlib, plot

我想重新创建这样的东西：

![](../Images/28c83e3610f025d0b5752f53fcc654ed.png)

但使用我自己的数据。我的数据如下所示：

```
 Number    Name1        Structure        mean    stdev
 1         Aldehydes    RCH=O       122.76    7.67
 2         Ketones          R2C=O       8.11      0.15
 2         Amides       R-CONr2     20.1      83.24 
```

我怎样才能重新创建这个情节？我做到了：

```
from pylab import *
import numpy  
data = numpy.genfromtxt('data',unpack=True,names=True,dtype=None) 
pos = arange(size(data['Number']))
ax2.errorbar(pos,data['mean'], yerr=data['stdev']) 
```

但我无法让这个情节与我的例子相似。有人可以为此发布示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:46:10.303

您可以首先将数据绘制为误差线，然后用相应的文本对其进行注释。

下面是一个简单的代码供您开始：

```
import numpy as np
import matplotlib.pyplot as plt

data = np.genfromtxt('data.txt', unpack=True,names=True,dtype=None)

fig, ax = plt.subplots()
ax.set_yticklabels([])
ax.set_xlabel(r'ppm ($\delta$)')
pos = np.arange(len(data))
#invert y axis so 1 is at the top
ax.set_ylim(pos[-1]+1, pos[0]-1)
ax.errorbar(data['mean'], pos, xerr=data['stdev'], fmt=None)

for i,(name,struct) in enumerate(zip(data['Name1'], data['Structure'])):
    ax.text(data['mean'][i], i-0.06, "%s, %s" %(name, struct), color='k', ha='center')

plt.show() 
```

![图片](../Images/4fdd452b1e7471e853e94a1ec43ea14d.png)

更改注释中单个字母的颜色将非常棘手，因为 matplotlib 不支持多色文本。我试图通过使用正则表达式来注释两次相同的文本（一个只有红色的“C”和一个没有“C”）来找到一种解决方法，但是因为每个字母不占用相同的空间，所以它不会对所有单词都很好用（见下文）。

```
#add to the import
import re

#and change
for i,(name,struct) in enumerate(zip(data['Name1'], data['Structure'])):
    text_b = ax.text(data['mean'][i], i-0.05, "%s, %s" %(name, struct), color='k', ha='center')
    text_b.set_text(text_b.get_text().replace('C', '   '))
    text_r = ax.text(data['mean'][i], i-0.05, "%s %s" %(name, struct), color='r', ha='center')
    text_r.set_text(re.sub('[abd-zABD-Z]', '  ', text_r.get_text()))
    text_r.set_text(re.sub('[0-9\=\-\W]', ' ', text_r.get_text())) 
```

![img2](../Images/8e4218a9f966f15296a17d27da827769.png)

# google-analytics - Google Analytics API：创建新的配置文件

> ID：15273246
> 
> 赞同：0
> 
> 时间：2013-03-07T14:06:36.417
> 
> 标签：google-analytics

是否可以通过 Google Analytics API 创建新的配置文件？

这样，当我们创建新的登录页面时，我们可以自动注册跟踪。我很好奇是否有人正在使用自动设置 GA 跟踪的自动化方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-30T13:00:38.430

是的！Google Analytics Management API 已更改...正如您从[文档中看到的](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtReference/management/profiles#methods)，配置文件的可用方法是`delete`、`get`、`insert`、和。`list``patch``update`

您甚至可以插入新的[网络](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtReference/management/webproperties "网络属性")媒体资源，但请注意每个帐户 20 个媒体资源的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:49:34.323

否 - Google Analytics Management API 是只读的。正如您从[文档中看到的](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtReference/management/profiles#methods)那样，帐户、属性和配置文件的唯一可用方法是`list`.

# algorithm - 每周分组分配算法

> ID：15273249
> 
> 赞同：8
> 
> 时间：2013-03-07T14:06:41.433
> 
> 标签：algorithm, combinatorics

我的一个朋友是老师，一个班有23个学生。他们需要一种算法，在 14 周内将学生分成 2 人一组和 3 人一组（处理奇数学生），这样在 14 周内没有两对重复（一对被分配到一个星期）。

蛮力方法效率太低，所以我在考虑其他方法，矩阵表示听起来很吸引人，还有图论。有没有人有任何想法？我能找到的问题只需要 1 周就可以解决，而[这个答案](https://stackoverflow.com/questions/12586587/combinatorial-algorithm-for-assigning-people-to-groups)我完全可以弄清楚。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T15:29:32.800

我认为[循环算法可以解决问题。](http://en.wikipedia.org/wiki/Round-robin_tournament#Scheduling_algorithm)

将剩余的学生添加到第二组，您就完成了。

```
First run
1   2   3   4   5   6   7   8   9   10  11  12
23  22  21  20  19  18  17  16  15  14  13

Second run
1   23  2   3   4   5   6   7   8   9   10  11  
22  21  20  19  18  17  16  15  14  13  12 
```

...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:43:15.057

另一种可能性可能是[图匹配](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29)，需要 14 个不同的图匹配。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T14:18:23.457

尝试用约束来描述问题。

然后将约束传递给像 ECLiPSe（不是 Eclipse）这样的工具，请参阅[http://eclipseclp.org/](http://eclipseclp.org/)。

事实上，您的问题似乎与该网站 ( [http://eclipseclp.org/examples/golf.ecl.txt](http://eclipseclp.org/examples/golf.ecl.txt) ) 上的 Golf 示例类似。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T14:18:53.747

从包含所有其他学生的每个学生的集合开始（可能是对学生的位集映射以减少内存消耗）。重复 14 次，每次选择 11 名学生（对于您将组成的 11 个小组），您将为他们选择合作伙伴。对于每个学生，选择一个他们尚未加入小组的伙伴。对于这 11 个学生中的一个随机学生，选择第二个伙伴，但要确保没有学生的剩余伙伴少于剩余的迭代次数。对于每一个选择，调整集合。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-07T16:59:19.820

这是 Haskell 中的一个示例，它将生成 14 个非重复 11 对组合的组。值“pairs”是从 1 到 23 的所有对的组合（例如，[1,2]、[1,3] 等）。然后程序构建列表，其中每个列表是 11 对的 14 个列表（从值 'pairs' 中选择），这样在一个 11 对的列表中不会重复任何对，也不会重复单个数字。您可以根据自己的需要简单地安排每周失踪的最后一名学生。（在开始输出结果之前计算了大约三分钟）：

```
import Data.List
import Control.Monad

pairs = nubBy (\x y -> reverse x == y) 
        $ filter (\x -> length (nub x) == length x) $ replicateM 2 [1..23]

solve = solve' [] where
  solve' results =
    if length results == 14
       then return results
       else solveOne [] where
         solveOne result =
           if length result == 11
              then solve' (result:results)
              else do next <- pairs
                      guard (notElem (head next) result' 
                             && notElem (last next) result'
                             && notElem next results')
                      solveOne (next:result)
                         where result' = concat result
                               results' = concat results 
```

输出中的一个样本：

```
[[[12,17],[10,19],[9,18],[8,22],[7,21],[6,23],[5,11],[4,14],[3,13],[2,16],[1,15]],
[[12,18],[11,19],[9,17],[8,21],[7,23],[6,22],[5,10],[4,15],[3,16],[2,13],[1,14]],
[[12,19],[11,18],[10,17],[8,23],[7,22],[6,21],[5,9],[4,16],[3,15],[2,14],[1,13]],
[[15,23],[14,22],[13,17],[8,18],[7,19],[6,20],[5,16],[4,9],[3,10],[2,11],[1,12]],
[[16,23],[14,21],[13,18],[8,17],[7,20],[6,19],[5,15],[4,10],[3,9],[2,12],[1,11]],
[[16,21],[15,22],[13,19],[8,20],[7,17],[6,18],[5,14],[4,11],[3,12],[2,9],[1,10]],
[[16,22],[15,21],[14,20],[8,19],[7,18],[6,17],[5,13],[4,12],[3,11],[2,10],[1,9]],
[[20,21],[19,22],[18,23],[12,13],[11,14],[10,15],[9,16],[4,5],[3,6],[2,7],[1,8]],
[[20,22],[19,21],[17,23],[12,14],[11,13],[10,16],[9,15],[4,6],[3,5],[2,8],[1,7]],
[[20,23],[18,21],[17,22],[12,15],[11,16],[10,13],[9,14],[4,7],[3,8],[2,5],[1,6]],
[[19,23],[18,22],[17,21],[12,16],[11,15],[10,14],[9,13],[4,8],[3,7],[2,6],[1,5]],
[[22,23],[18,19],[17,20],[14,15],[13,16],[10,11],[9,12],[6,7],[5,8],[2,3],[1,4]],
[[21,23],[18,20],[17,19],[14,16],[13,15],[10,12],[9,11],[6,8],[5,7],[2,4],[1,3]],
[[21,22],[19,20],[17,18],[15,16],[13,14],[11,12],[9,10],[7,8],[5,6],[3,4],[1,2]]] 
```

# xcode - 禁用来自特定文件夹的警告

> ID：15273250
> 
> 赞同：3
> 
> 时间：2013-03-07T14:06:42.330
> 
> 标签：xcode, xcode4, compiler-warnings

我已经建立了一个 Xcode 项目，其中部分代码（在本例中为文件夹）来自 svn 存储库。

该文件夹**由外部合作伙伴不断更新，**`.h`其中包含`.m`文件。特别是，这些文件包含在项目中，因为在我的目标中设置为**标题搜索路径**和**库搜索路径。**

由于`.h`文件包含很多警告（我收到**Showing first 200 warning only**消息），Xcode 不允许我显示我的代码警告。

基于这种情况，如何防止 Xcode 显示针对该特定文件夹的警告？

我在 SO ( [Selectively disable GCC warnings for only part of a translation unit?](https://stackoverflow.com/questions/965093/selectively-disable-gcc-warnings-for-only-part-of-a-translation-unit/3394305#3394305)，[关闭来自子项目的警告](https://stackoverflow.com/questions/11841479/turn-off-warnings-coming-from-subprojects)) 中进行了一些讨论，但我还没有找到解决方案。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:33:13.383

由于我找到了解决方案，因此我回答了我自己的问题。希望这可以帮助其他人。

可以在[如何为整个项目禁用新的 Xcode 4.6 警告中找到该问题的部分解决方案？“......用作前一个参数的名称，而不是作为选择器的一部分”](https://stackoverflow.com/questions/14579197/how-to-disable-new-xcode-4-6-warning-for-whole-project-used-as-the-name-of)。我赞成！

显然，我正在等待供应商解决问题，因为此解决方法会为我自己的代码禁用此类警告。而且我不想要这种行为。

干杯。

# controls - 使用 Slick 库在 2d 游戏中移动的问题

> ID：15273254
> 
> 赞同：1
> 
> 时间：2013-03-07T14:06:46.143
> 
> 标签：controls, 2d, slick2d

出于某种原因，你只是继续向左移动，我不知道为什么。键盘输入读数不是问题，因为向任何其他方向移动都可以完美运行。忽略 isClipped() 方法，因为我还没有完成它。谢谢您的帮助。

**主班**

```
package Genisis;

import java.io.FileNotFoundException;
import java.util.ArrayList;

import org.lwjgl.input.Mouse;
import org.newdawn.slick.*;
import org.newdawn.slick.state.*;
import org.newdawn.slick.tiled.TiledMap;

public class Play extends BasicGameState
{
int mouseX;
int mouseY;
Level testLevel;
boolean[][] blocked;

MainCharacter mc;

public Play(int state)
{

}

public void init(GameContainer gc, StateBasedGame sbg) throws SlickException
{

    gc.setMouseCursor("res/sprites/Cursor.png", 0, 0);

    try {
        testLevel = new Level(0, 0, "res/maps/testmap.tmx");
    } catch (FileNotFoundException e) {
        System.out.println("Failed to load map.");
        e.printStackTrace();
    }

    mouseX = Mouse.getX();
    mouseY = gc.getHeight() - Mouse.getY();

    mc = new MainCharacter(50, 50, new Image("res/sprites/mcg.png"));   
}

public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws 
                                                                         SlickException
{
    testLevel.render(mc.x, mc.y);
    mc.render(mouseX, mouseY);
}

public void update(GameContainer gc, StateBasedGame sbg, int delta) throws 
                                                                        SlickException
{
    mc.move(gc, testLevel);
    mc.render(gc.getWidth()/2, gc.getHeight()/2);
    testLevel.render(mc.x, mc.y);
}

public int getID()
{
    return 1;
}

public void spawnMC(float spwnMCX, float spwnMCY)
{
    testLevel.render(spwnMCX, spwnMCY);
    testLevel.render(spwnMCX, spwnMCY);
}

public void spawnOC()
{
    //todo
}
} 
```

**玩家等级**

```
 package Genisis;

import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Image;
import org.newdawn.slick.Input;
import org.newdawn.slick.SlickException;

public class MainCharacter extends Player
{

public MainCharacter(float newX, float newY, Image newSprite) throws SlickException
{
    sprite = newSprite;
    x = newX;
    y = newY;
}

public void move(GameContainer gc, Level map)
{   
    Input in = gc.getInput();

    if(in.isKeyDown(Input.KEY_W))
        if(map.isClipped(x, y + 1))
            y += 1;
    if(in.isKeyDown(Input.KEY_D))
        if(map.isClipped(x + 1, y))
            x -= 1;
    if(in.isKeyDown(Input.KEY_S))
        if(map.isClipped(x, y - 1))
            y -= 1;
    if(in.isKeyDown(Input.KEY_A));
        if(map.isClipped(x - 1, y))
            x += 1;
}

public void render(float mX, float mY)
{
    float xDist = mX - (500 + (sprite.getWidth() / 2));
    float yDist = mY - (250 + (sprite.getHeight() / 2));

    double angleToTurn = Math.toDegrees(Math.atan2(yDist, xDist));
    sprite.setRotation((float)angleToTurn);

    sprite.draw(500, 250);
}
} 
```

**等级班**

```
package Genisis;

import org.newdawn.slick.Image;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.SpriteSheet;
import org.newdawn.slick.tiled.TiledMap;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.Scanner;

public class Level 
{

//height of background (in tiles)
public int height;

//width of background (in tiles)
public int width;

public boolean[][] clipped;

public TiledMap map;

public Level(int newHeight, int newWidth, String path) throws 
                                                  FileNotFoundException, SlickException
{
    map = new TiledMap(path);
    clipped = new boolean[map.getHeight()][map.getWidth()];

    for(int i = 0; i < map.getHeight(); i++)
        for(int j = 0; i < map.getWidth(); i++)
        {
            if("true".equals(map.getTileProperty(map.getTileId(i, j, 
                            0), "blocked", "false")))
                clipped[i][j] = false;
        }
}

//render map
public void render(float mcX, float mcY)
{
    map.render((int)(mcX), (int)(mcY));
}

//return height of level (in pixels)
public int getHeight()
{
    return map.getHeight();
}

//return width of level (in pixels)
public int getWidth()
{
    return map.getWidth();
}

public boolean isClipped(float charX, float charY)
{
    //return clipped[(int)(charX / 50)][(int)(charY / 50)];
        return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:39:55.957

发现了问题。在用于左移的 if 语句之后有一个额外的分号（它始终是一个分号 -_-）。

```
 if(in.isKeyDown(Input.KEY_A));
    if(map.isClipped(x - 1, y))
        x += 1; 
```

# java - 如何将分数写入 SQLite 数据库？

> ID：15273257
> 
> 赞同：0
> 
> 时间：2013-03-07T14:06:52.447
> 
> 标签：java, android, android-sqlite

我是一个 sqlite 新手。我正在尝试做什么...我有一个游戏，游戏结束后它将时间结果存储在一个名为 elapsedSeconds 的双变量中。我想将该结果放在一个数据库中，然后在我的专用活动中显示用户的前 10 名。我有创建数据库的 HighScoreDb 类（我使用了一些我在网上找到的代码，但我认为它会达到我的目的）。这是代码。

```
public class HighScoreDb {
    private static class HighScoreDbHelper extends SQLiteOpenHelper {

    public HighScoreDbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        try {
        db.execSQL(SCORE_TABLE_CREATE);
        } catch (SQLException e) {
        Log.i("Error", "Error making database");
        e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + SCORE_TABLE_NAME);
        onCreate(db);
    }

    }

    private static final int DATABASE_VERSION = 2;
    private static final String SCORE_TABLE_NAME = "highscore";
    private static final String SCORE_TABLE_CREATE = "CREATE TABLE "
                             + SCORE_TABLE_NAME
                             + " (_id INTEGER PRIMARY KEY autoincrement, "
                             + "name TEXT NOT NULL, score DOUBLE  NOT NULL)";
    private static final String DATABASE_NAME = "highscores.db";
    // The index (key) column name for use in where clauses.
    public static final String KEY_ID = "_id";

    // The name and column index of each column in your database.
    public static final String KEY_NAME = "name";
    public static final String KEY_SCORE = "score";
    public static final int NAME_COLUMN = 1;
    public static final int NUMBER_COLUMN = 2;
    public static final int SCORE_COLUMN = 3;

    SQLiteDatabase db;
    private final Context ctx;
    private final HighScoreDbHelper dbHelper;

    public HighScoreDb(Context context) {
    this.ctx = context;
    ctx.deleteDatabase(SCORE_TABLE_NAME);
    dbHelper = new HighScoreDbHelper(context);
    db = dbHelper.getWritableDatabase();
    }

    public void close() {
    if (db != null) {
        db.close();
    }

    }

    public void createRow(String name, int score) {
    ContentValues intialValue = new ContentValues();
    intialValue.put("name", name);
    intialValue.put("score", score);
    db.insertOrThrow(SCORE_TABLE_NAME, null, intialValue);

    }

    public void deleteRow(long rowId) {
    db.delete(SCORE_TABLE_NAME, "_id=" + rowId, null);
    }

    public Cursor GetAllRows() {
    try {
        return db.query(SCORE_TABLE_NAME, new String[] { "_id", "name", "score" }, null,
                null, null, null, "score DESC");
    } catch (SQLException e) {
        Log.i("Error on query", e.toString());
        return null;
    }

    }

    public void updateRow(long _id, String name, String score) {
    ContentValues args = new ContentValues();
    args.put("name", name);
    args.put("number", score);
    db.update(SCORE_TABLE_NAME, args, "_id=" + _id, null);
    }

} 
```

从这个表中我不需要列名，因为我只有 10 个有分数的地方。我的游戏结束后如何将该结果插入到这个数据库中？我想我知道如何从中阅读，我会做这样的事情：

```
HighScoreDb db = new HighScoreDb(this);
Cursor myCursor = db.GetAllRows();
myCursor.moveToPosition(0);
    String Row1Value2 = myCursor.getString(2);
myCursor.close();
db.close(); 
```

我在我的游戏课上这样称呼它：

```
HighScoreDb db = new HighScoreDb(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:28:30.647

我不确定我是否理解您的问题...要将一些数据放入您的数据库中，您只需正确使用下面编写的函数（我假设您的课程工作正常），例如：

```
HighScoreDbHelper myDbHelper = new HighScoreDbHelper(yourContext);
myDbHelper.createRow(yourName, yourScore); 
```

本教程是 sqlite 概念的良好入门：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:31:41.597

您打开数据库的方式很好。

与其使用游标来获取有关行的特定信息，不如在表中创建一个表示行的实体。使用来自光标的信息创建这些对象的列表。

```
public UserScore {
    String name;
    Integer score; // don't know why you would use double here.

    // getters + setters or make it immutable
} 
```

我将提供的是在 HighScoreDb 中添加新分数的一些方法。例如带有签名

```
public void addScore(UserScore userScore); 
```

不要考虑只添加 10 个分数，将每个分数添加到数据库中。每当你想要前10名的分数。只需查询降序的最后 10 个分数。否则，您将编写很多复杂性，而这很容易通过查询完成。为此，请查看前 N 个查询。

一个在助手内部写入数据库的例子是这样的，（没有测试 SQL，但它应该是这种形式）

```
this.getWritableDatabase().execSQL("insert into highscore (name, score) values (" + userScore.getName() + "," + userScore.getScore() + ")"); 
```

# c++ - CreateFile() 返回地址为 FFFFFF 的无效指针

> ID：15273270
> 
> 赞同：0
> 
> 时间：2013-03-07T14:07:28.817
> 
> 标签：c++, windows, msdn, createfile

我只想使用函数 CreateFile 读取文件，如下所示：

```
#include <iostream>
#include <windows.h>
#include <stdio.h>
int main(int argc, char **argv)
{
    PIMAGE_DOS_HEADER pImageDosHeader;
    HANDLE hFile = NULL;
    HANDLE hMapObject;
    PUCHAR uFileMap;
    if (argc < 2)
        return (-1);
    std::cout << "hFile=" << hFile << std::endl;
    if (!(hFile = CreateFile((LPCWSTR)argv[1], GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ,
        NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL)))
    {
        return (-1);
    } else {
        std::cout << argv[1] << std::endl;
        std::cout << "hFile=" << hFile << std::endl;
        getchar();
    }
    return (0);
} 
```

问题是输出如下：

> hFile=000000（指针初始化为 NULL -> OK）
> 
> hFile=FFFFFF（无效指针）

有人可以帮助我吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:11:48.420

以下：

```
if (!(hFile = CreateFile(...))) 
```

不是您检查错误的方式。

从[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa363858%28v=vs.85%29.aspx)中：

> 如果函数失败，则返回值为`INVALID_HANDLE_VALUE`。要获取扩展的错误信息，请调用`GetLastError`。

`INVALID_HANDLE_VALUE`是`-1`，或`0xFFFFFFFFF`十六进制。你需要打电话`GetLastError()`了解发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:11:40.383

当您从大多数 Win32 API 收到错误时，您可以调用`GetLastError()`以找出问题所在。从那里拿走它。

这种类型的防御性编程对于高效的 Win32 编程至关重要。失败的实际情况因 API 而异，因此请使用[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)检查您应该在失败代码路径中查找的内容。

# php - 嵌入一 组表单 Symfony2 表单，允许添加和删除

> ID：15273272
> 
> 赞同：9
> 
> 时间：2013-03-07T14:07:29.677
> 
> 标签：php, symfony, doctrine-orm

在 Symfony2 中，如果我在 Doctrine 中[嵌入了一组](http://symfony.com/doc/current/cookbook/form/form_collections.html)指向多对一关系的表单并允许添加和删除，如果我从头删除一条记录，在最后添加一条，并在中间编辑一些，系统如何知道用哪些数据更新哪些记录？

本教程中没有任何内容可以传递嵌入数据的主键。在某些情况下，我的记录会被不必要地删除并再次添加，而不是在原地编辑（即使特定记录没有更改）。这会破坏未包含在表单中的记录字段，将它们设置为数据库模型中的默认值。

有没有办法在表单中传递主键并在数据返回时使用它来执行更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-23T20:35:07.857

如果您想为所有查询索引集合（通过实体 id），您可以简单地使用`indexBy`实体类中的注释。

```
/**
 * @ORM\OneToMany(targetEntity="EntityClass", mappedBy="EntityVariable", indexBy="id")
 */
private $collection; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-06T18:41:06.970

根据[Akkumulator 的回答和评论](https://stackoverflow.com/a/17265053/380140)以及一些实验，我这样做了：

[创建新字段（使用文档中描述的](http://symfony.com/doc/current/cookbook/form/form_collections.html#allowing-new-tags-with-the-prototype)Javascript ），`__name__`而不是由数字而是由字符串替换：**new_**后跟与列表无关的永远增加的数字（例如 new_1、new_2、new_3...）

我不必将主键推送到表单中，也不需要 indexBy - 这很好，因为 indexBy 感觉它与表单相距太远，最终导致[Action 在远处](https://en.wikipedia.org/wiki/Action_at_a_distance_%28computer_programming%29)反模式。

为什么这样有效：

*   PHP 数组与其他语言中的数组不同。它们始终是字典，因此即使它们只有数字键开头，您也可以向它们添加字符串键。
*   因为 Symfony 集合是按字段名称映射的，所以新字段将不匹配现有数据，删除的字段将不匹配现有数据（因此从集合中删除）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:36:16.293

传递主 id 的一种方法是使用[INDEX BY](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#using-index-by)。

例如，假设我有一个名为 Customer 的实体，而一个 Customer 有几封电子邮件。在我的客户存储库类中，我可以指定要按电子邮件的主 ID 索引的集合。

```
$qb->select('c, e')
    ->leftJoin('c.emails', 'e', null, null, 'e.id')
    ->where('c.id = :id'); 
```

通过这样做，输入标签的生成名称将是

```
customer[emails][e.id][fieldName] 
```

提交表单后，Symfony 将根据输入名称绑定请求值。

# mod-rewrite - Apache URL 重写技巧来修复编码的“http://”

> ID：15273273
> 
> 赞同：0
> 
> 时间：2013-03-07T14:07:33.303
> 
> 标签：mod-rewrite, seo

我有一些导致最终格式不佳的网站，例如：

```
http://www.mydomain.com/directory/http%3A%2F%2Fwww.another.com%2Falink-that-doesnt-work 
```

我想要一个重写规则来截断该部分直到 url 并修复编码以重定向到

```
http://www.another.com/alink-that-doesnt-work 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:24:16.703

使用正则表达式从 URL 中提取主机名和链接，并使用反向引用进行替换和重定向。请注意，模式与解码的 URL 匹配。

```
RewriteEngine On
RewriteRule   /directory/http://([^/]*)/(.*)    http://$1/$2   [R] 
```

# java - Android 到 AppEngine SSL 通信

> ID：15273274
> 
> 赞同：3
> 
> 时间：2013-03-07T14:07:35.347
> 
> 标签：java, android, google-app-engine, ssl

我有一个分布相当广泛的 Android 应用程序，当客户端尝试连接到服务器并发送/接收数据时，我会遇到一些间歇性的怪异现象。客户端每十分钟尝试一次推送本地存储的更改。

我正在尝试连接到我的 version-dot-application.appspot.com URL。一般来说，系统运行良好；但是，有时我会在日志中收到一些 SSL 异常。这些包括：

```
javax.net.ssl.SSLPeerUnverifiedException: No peer certificate 
at org.apache.harmony.xnet.provider.jsse.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:137)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:93) 
```

报告还表明：

```
javax.net.ssl.SSLException: Read error: ssl=0x5152b758: I/O error during system call, Connection timed out
at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_read(Native Method)
at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLInputStream.read(OpenSSLSocketImpl.java:651) 
```

这真的很令人困惑，因为它只是偶尔发生，而且我从未在开发或测试场景中看到过。有没有人有任何见解或看到这种行为？

我目前的想法是吞下这些异常并尝试在下一个时间表上同步，但这似乎是一个糟糕的主意。

感谢您的任何帮助或建议！

# php - 存在的表上的 CakePHP 未定义索引

> ID：15273275
> 
> 赞同：1
> 
> 时间：2013-03-07T14:07:36.167
> 
> 标签：php, cakephp

当我在网上发布我的 cakephp 项目时，视图不再适用于 100%。本地视图显示正确的数据，但在线仅显示 21 个值之一

```
undefined index: commission_total [APP/View/Brokeraccountupdates/detail.ctp, line 77] 
```

那里没有错字和数据库字段确实存在。我在网上做了一个phpinfo来比较php和mysql版本的设置。

代码相同，服务器设置良好。（分页器是好的）。有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:10:13.860

我之前遇到过这个问题，通常它是由缓存的模型引起的。尝试为您的应用删除模型缓存：

```
cd <cake_app_root>
rm -rf app/tmp/cache/model/* 
```

或者导航到 FTP 客户端中的目录并删除文件，但是您管理您的服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:17:56.387

托管服务器存在权限问题，我们使用新的托管服务器，问题就消失了。不管怎么说，还是要谢谢你。

# doctrine-orm - Doctrine2：如何在双向多对多关联中保持自定义连接表同步？

> ID：15273278
> 
> 赞同：3
> 
> 时间：2013-03-07T14:07:46.200
> 
> 标签：doctrine-orm, bidirectional

## 该声明

我正在尝试重现用于处理多对多双向关系的自动 Doctrine 机制，但引入了自定义连接表。

*我已经深入研究过类似的问题：*

*   [使用元数据连接表会损害 Getters/Setters - Doctrine 2](https://stackoverflow.com/questions/9204873/joining-table-with-metadata-impairs-getters-setters-doctrine-2) 但它并没有真正帮助我，因为它绝对是单向的
*   [学说2多对多自我引用，中间细节](https://stackoverflow.com/questions/8067036/doctrine2-many-to-many-self-referencing-with-intermediate-details) ，但这个甚至没有谈论管理关系
*   [Doctrine2：使用参考表中的额外列处理多对多的最佳方法](https://stackoverflow.com/questions/3542243/doctrine2-best-way-to-handle-many-to-many-with-extra-columns-in-reference-table) 非常有趣。然而，尽管作者提到了它的双向需求，但他并没有涵盖这种情况。

我知道带有额外字段的连接表**不再是关联**，只是引用另外两个实体的第三个实体。从该声明中，很明显，人们不能期望它作为由 Doctrine 管理的隐式多对多关联开箱即用。

**但我想让这三重奏作为一个简单、直接、双向的多对多关联**工作，这意味着使用代理方法并依赖逻辑类。

## 编码

有一个 Category 实体和一个 Product 实体：

```
/**
 * @ORM\Table(name="category")
 * @ORM\Entity(repositoryClass="CategoryRepository")
 */
class Category
{   
    /**
     ...
     */
    protected $id = null;

    /**
     * @ORM\OneToMany(targetEntity="CategoryProduct", mappedBy="category", fetch="LAZY", cascade={"persist"})
     */
     protected $categoryProducts;
} 
```

和

```
/**
 * @ORM\Table(name="product")
 * @ORM\Entity(repositoryClass="ProductRepository")
 */
class Product
{
    /**
     ...
     */
    protected $id = null;

    /**
     * @ORM\OneToMany(targetEntity="CategoryProduct", mappedBy="product", fetch="LAZY", cascade={"persist"})
     */
    protected $categoryProducts;
} 
```

当然还有一个连接实体：

```
/**
 * @ORM\Table(name="category_product")
 * @ORM\Entity(repositoryClass="CategoryProductRepository")
 */
class CategoryProduct
{
    /**
        ...
     */
    protected $id = null;

    /**
     * @ORM\ManyToOne(targetEntity="Category", fetch="EAGER", inversedBy="categoryProducts")
     * @ORM\JoinColumn(onDelete="CASCADE")
     */
    protected $category;

    /**
     * @ORM\ManyToOne(targetEntity="Product", fetch="EAGER", inversedBy="categoryProducts")
     * @ORM\JoinColumn(onDelete="CASCADE")
     */
    protected $product;

    /**
     * @ORM\Column(type="boolean", nullable=true)
     */
    protected $starred = false;
} 
```

## 问题

如何以纯 ORM 样式的方式保持对两个实体都可用的 CategoryProduct 实体的最新列表？在 ORM 中，一切都在对象层上进行管理。仅根据用户的请求对 DB 进行更改，但只要仅从 ORM 的角度工作，就不是强制性的。换句话说：

```
$category->addProduct($product); 
```

不会向数据库写入任何内容，甚至不会将任何对象持久化到实体管理器，但只要脚本运行，仍然可以从列表中检索或删除该产品。

在自定义连接表的情况下，情况有所不同，因为当想要添加产品时，他必须创建并持久化 CategoryProduct 实体。**那么如果我们需要从反面检索这个关联呢？**. 这是一个演示我的问题的代码示例：

```
$product->addCategory($category);
$category->addProduct($product); 
```

在这种双向关联中，`$category::addProduct`函数如何知道由创建的 CategoryProduct 实体的实例`$product::addcategory`？风险是为同一个关联创建两个相似的连接实体，我不知道如何避免它。

# c# - 为文化/全球化问题设计测试

> ID：15273281
> 
> 赞同：1
> 
> 时间：2013-03-07T14:07:51.883
> 
> 标签：c#, string, unit-testing, globalization, culture

我担心我的应用程序在处理不同文化中的字符串输入时的可预测性。这是旧软件中的问题，我不希望它成为新软件中的问题。

我通常有两个输入来源；输入到 WPF 应用程序和 Streams 中的字符串，从文件加载，包含文本。这些培养的​​字符串在使用前一般都输入到模型中

```
public struct MyModel
{
    public String Name;
} 
```

我想设计一个有意义的测试，以确保某些逻辑`Result DoSomething(MyModel model);`在包含在不同机器上输入的文本时可以实际处理。

但是我怎样才能证明差异很重要呢？

例如以下失败。

```
 var inNativeCulture= "[Something12345678.9:1] {YeS/nO}";
 var inChineseCulture = inNativeCulture.ToString(new CultureInfo("zh-CN"));
 Assert.That(inChineseCulture, Is.Not.EqualTo(inNativeCulture)); 
```

**[问题]**

`DoSomething`如果字符串未转换为 InvarientCulture，我如何进行测试以使测试失败？

我应该打扰吗？即在`Something`法语键盘上输入的字符串总是等于`Something`在中文键盘上输入的？

*我可以测试什么来缓解全球化问题？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:06:16.323

对字符串采用 IFormatProvider 的 ToString 方法本质上是无操作的。文档声明[“返回此字符串实例；不执行实际转换。”](http://msdn.microsoft.com/en-us/library/29dxe1x2.aspx)

由于您担心避免问题，这里有一些一般性建议。首先，明确区分前端（面向用户）字符串和后端（数据库、线路、文件等）字符串是非常有帮助的。应根据用户的文化/应用程序语言生成/接受前端字符串。这些字符串不应该被持久化（除了少数例外，比如当你生成一个只能由人而不是机器读取的文档时）。后端字符串应始终使用不会随时间改变的标准格式。如果您接受用于生成/解析全球化字符串的数据发生变化的事实，那么您将通过确保不保留面向用户的字符串来将自己与影响隔离开来。

# html - 奇偶元素左右浮动

> ID：15273289
> 
> 赞同：3
> 
> 时间：2013-03-07T14:08:21.800
> 
> 标签：html, css, css-float

这就是问题所在。我得到了简单的 html 模板：

```
<div class="wrapper"><div class="inside">

    <div class="left"><p>Lorem ipsum...</p></div>
    <aside><p>Lorem ipsum...</p></aside>
    <div class="left"><p>Lorem ipsum...</p></div>
    <aside><p>Lorem ipsum...</p></aside>
    <div class="left"><p>Lorem ipsum...</p></div>
    <aside><p>Lorem ipsum...</p></aside>

</div></div> 
```

和简单的CSS：

```
div.wrapper {width:1020px;margin:0 auto;}
div.wrapper .inside {padding: 10px;}
div.left {width:700px;background:#EEE;float:left;border-top:1px solid #000; clear: left;}
aside {width:300px;background:#CCC;float:right;border-top:1px solid #000; clear: right;} 
```

我希望所有 div 一个接一个地位于页面的左侧，没有任何间距，所有的侧面都在右侧。它就在那里。无论旁白的内容有多高，div 都可以正常工作。但是，如果任何 div 的内容太高，我会在两边之间留出空白，就像有类似 clear:both 和这个 div 一样的东西。

例子：

![在此处输入图像描述](../Images/87edec033f9dee8fb70f460b9e3f7a29.png)

我希望它始终看起来像这样，没有任何空格：![在此处输入图像描述](../Images/f51631ecb9a64990195f9aae8c1e01d4.png)

我无法更改 html（divs&asides 顺序），我只能更改 CSS。我可以使用 html5 和 css3。

[http://jsfiddle.net/HRp2H/](http://jsfiddle.net/HRp2H/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:24:43.223

您可以添加一个 CSS 渐变来模拟完整的列：

[http://jsfiddle.net/HRp2H/5](http://jsfiddle.net/HRp2H/5)

```
div.wrapper {
    width:400px;
    margin:0 auto;
    padding: 10px;
}
div.wrapper .inside {
    background: -moz-linear-gradient(left, #eee 250px, #ccc 250px);
    overflow: auto;
}
div.left {
    width:250px;
    float:left;
    border-top:1px solid #000;
    clear: left;
}
aside {
    width:150px;
    float:right;
    border-top:1px solid #000;
    clear: right;
} 
```

在这里，我已将您在 .inside 上的填充移至其子元素：http: [//jsfiddle.net/HRp2H/3](http://jsfiddle.net/HRp2H/3)

更新：这是使用 jQuery 的方法。我会使用我之前的答案作为后备。

[http://jsfiddle.net/HRp2H/7/](http://jsfiddle.net/HRp2H/7/)

```
.leftCol, .rightCol {float: left;}
.leftCol .left, .rightCol aside {display: block}
div.left {
    display: none;
    ...
}
aside {
    display: none;
    ..
}

var myLefts = $('.inside').clone().find('aside').remove().end().html();
var myAsides = $('.inside').clone().find('.left').remove().end().html();

$('.wrapper .inside').html('');

$('.wrapper .inside').append('<div class="leftCol" />');
$('.wrapper .leftCol').append(myLefts);

$('.wrapper .inside').append('<div class="rightCol" />');
$('.wrapper .rightCol').append(myAsides); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:28:48.113

检查这个小提琴：

[http://jsfiddle.net/HRp2H/4/](http://jsfiddle.net/HRp2H/4/)

它利用 css hack 使浮动列的高度相同：

```
margin-bottom: -500px;
padding-bottom: 500px;
overflow: hidden; 
```

进而

```
overflow: hidden; 
```

在主 div 上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:27:59.910

尝试使用[JQuery masonry](http://masonry.desandro.com/)。它可以将你所有的积木整齐地堆叠`DIV`在一起

# javascript - 使用 requirejs 仅在用户交互时加载 jquery 插件

> ID：15273291
> 
> 赞同：0
> 
> 时间：2013-03-07T14:08:30.957
> 
> 标签：javascript, jquery, requirejs

我第一次开始使用 require js / 模块化开发，并且喜欢我所看到的。

我想要实现的基本上只是在需要时加载某些自定义 jQ 模块。我的主要目标是页面性能。目前我只加载 require.js （这反过来加载 jQ 异步）然后其他 jQ 代码/插件只在用户交互时触发。

以下代码是否会被视为好/坏做法？有什么人会改变吗？（下面的超级基本示例）

主.JS

```
require.config({
    paths: {
        "jquery": "//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min"
    }
});

require(["jquery"], function($) {

    // overlay plugin
    $("a").on("click", function(e){
        var self = this;
        require(["overlay"], function (overlay) {
            overlay.init(self);
        });
        e.preventDefault();
    });

}); 
```

OVERLAY.JS

```
define(function () {
  return {
    init: function(self) {
        $.ajax({
           url: self.href,
           success: function (data) {
              $("#results").html($(data).filter('#details').html());
           },
           dataType: 'html'
        });
        $('#results').fadeIn();
    }
  }
}); 
```

干杯，阿迪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:55:26.560

您的加载方法`overlay`是对 require 的正确使用，但是有几点：

Overlay.js 应该将 jQuery 列为依赖项。确保您的模块具有运行所需的所有代码。在这种情况下，这很好（因为您在 .js 文件中抓取了 jQuery `require`）但是如果您曾经`document.addEventListener`附加您的点击，那么您不再确定 jQuery 是否可供`$.ajax`. 很高兴知道您的模块需要他们需要的一切，而不是靠运气。

我尝试遵循的一条规则是将所有与 DOM 相关的内容保存在`main`. 例如：

**覆盖**

```
// Example code, and not complete
define(function(require) {
    var $ = require('jquery');

    return {
        init: function(elements) {
            this.trigger = $(elements.trigger);
            this.target = $(elements.target);

            this.trigger.on('click', this.someEvent.bind(this));
        },

        someEvent: function() {
            this.getAjax();
        }
    }
}); 
```

然后`main.js`传入 DOM 元素

```
require(['overlay'], function(overlay) {
    overlay.init({
        trigger: 'a',
        target: '#results'
    })
}); 
```

将 DOM 元素分开并放在一个地方使更新它们变得轻而易举。您也可以像 jQuery 插件一样为其他事物（例如类名）传递一个选项对象。

最后，在您的示例代码中，您`$('#results').fadeIn();`在成功回调之外并且会立即运行。

# php - Wordpress 使用 AJAX 提交表单

> ID：15273292
> 
> 赞同：3
> 
> 时间：2013-03-07T14:08:31.580
> 
> 标签：php, jquery, ajax, wordpress

我创建了一个 Wordpress 插件，允许我的客户创建能够回复和支付活动费用的活动。我对需要放置某些代码的位置以及如何将表单提交到位于插件文件夹函数文件中的函数感到困惑。

目前它返回一个空白警报。

我在单个事件的页面上显示此表单：

```
<div id="rsvpContent">  
  <form id="Attendevent" action="">
   <input id="attend" name="attend" type="checkbox" value="yes" /><label for="attent">Yes, I plan to attend.</label>
 </form> 
```

然后，我把它放到了通用的 header.php 文件中：

```
 $("#attend").click(function(){
    var form = $("#Attendevent").serialize();

    $.ajax({
      type:'POST',
      data:{"action":"Attending","data": form },
      url: "<?php bloginfo('url'); ?>/wp-admin/admin-ajax.php",
      beforeSend: function(){
        alert(form);
      },
      success: function(data) {
            alert(data);
      }

    }); 

 }); 
```

然后，我将此功能放入插件文件夹中的主功能页面：

```
function eventAttent() {
$wpdb->show_errors();
            if($_POST['attend'] == 'yes') {
                $wpdb->insert('wp_event_attendants',
                array( 'event_id' => get_the_ID(),'user_id' => $current_user->ID));
 echo $wpdb->print_error();
                }
            }

 add_action('wp_ajax_Attending', 'eventAttend');
 add_action('wp_ajax_nopriv_Attending', 'eventAttend'); 
```

当用户单击“参加”复选框时，如何调用此函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-16T16:47:49.487

此[链接](http://www.garyc40.com/2010/03/5-tips-for-using-ajax-in-wordpress/#admin-ajax)是 ajaxifying 您的主题的一个很好的来源。

将此代码放入您的子主题中的functions.php 中。

```
// enqueue your custom js       
 function my_js_method() {
    // for jquery ui
       wp_enqueue_style( 'jqueryUI_style', get_stylesheet_directory_uri() . '/customCSS/jquery-ui.css' );
        wp_enqueue_script(
            'handleFormAjax-script',
            get_stylesheet_directory_uri() . '/handleFormAjax.js',
            array( 'jquery' )
        );
    // add the appropriate hook
    add_action( 'wp_enqueue_scripts', 'my_scripts_method' );

    // declare the URL to the file that handles the AJAX request (wp-admin/admin-ajax.php)
    wp_localize_script( 'handleFormAjax-script', 'MyAjax', array( 'ajaxurl' => admin_url( 'admin-ajax.php' ) ) );
    }

    // AJAX handler snippet
    function myHandlerMethod(){
      if (is_admin())
    echo "woow working like a charm";
    die();
    }
    //add the hooks for your handler function
    add_action('wp_ajax_myHandlerMethod', 'myHandlerMethod');
    // for users who are not logged in
    add_action('wp_ajax_nopriv_myHandlerMethod', 'myHandlerMethod'); 
```

除此之外，您的表单应如下所示。

```
<form id="assetForm" action= "/wp-admin/admin-ajax.php" method="post">
    <input type="hidden" name="action" value="myFunction"/>
    <button id="sbmBtn">SUBMIT </button>
</form> 
```

最后，你的 js 函数应该处理你在 functions.php 中定义的处理函数

```
var data = jQuery("#myForm :input").serializeArray();

    jQuery.post(jQuery("#myForm").attr("action"),data, function(info) {
        // success code ;
                }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T05:53:46.787

尝试使用此代码。这是我测试过的代码。和我一起工作得很好..但它不会处理文件上传。

**HTML**

```
<form id="form_name" name="form_name" >
<span id='errfrmMsg' style='margin:0 auto;'></span>
  //form attributes just as input boxe.
  <input type="hidden" name="action" value="anyName" />
  <input id="submit_button" onclick="submit_form();" type="button" value="Send" />
</form> 
```

**查询**

```
function submit_form()
{
  jQuery.post(the_ajax_anyName.ajaxurl_anyName,
   jQuery("#form_name").serialize(),
     function(response_from_the_action_function){
                jQuery("#errfrmMsg").html(response_from_the_action_function).css({"display":"block"});
      }
   );
} 
```

**functions.php 中的 PHP 代码**

```
wp_register_script("ajax-anyName", get_bloginfo('template_directory')."/js/custom_js.js", array( "jquery"));
wp_enqueue_script('ajax-anyName');
wp_localize_script("ajax-anyName","the_ajax_anyName", array("ajaxurl_anyName" => admin_url("admin-ajax.php")));
// add actions
add_action( "wp_ajax_anyName", "ajax_action_anyName" );
add_action( "wp_ajax_nopriv_anyName", "ajax_action_anyName" );

function ajax_action_anyName(){ 
  //Form processing code in PHP

} 
```

# php - 在 PHP 中上传文件并获取文件的详细信息

> ID：15273295
> 
> 赞同：-7
> 
> 时间：2013-03-07T14:08:39.540
> 
> 标签：php, html

我有以下代码接受文件并上传它，然后显示文件的详细信息。编码是用PHP编写的。但我无法执行代码。我使用 Wamp 作为我的服务器。请帮我。示例.php

```
<html>
<head>
    <title>PHP File Upload Example</title>
</head>
<body>
        <form enctype="multipart/form-data" method="post" action="uploadFile.php">
        <input type="file" name="fileToUpload" /><br />
        <input type="submit" value="Upload File" />
    </form>
</body> 
```

上传文件.php

```
echo "<table border=\"1\">";
echo "<tr><td>Client Filename: </td> <td>" . $_FILES["fileToUpload"]["name"] . "</td></tr>";
echo "<tr><td>File Type: </td> <td>" . $_FILES["fileToUpload"]["type"] . "</td></tr>";
echo "<tr><td>File Size: </td> <td>" . ($_FILES["fileToUpload"]["size"] / 1024) . " Kb</td></tr>";
echo "<tr><td>Name of Temp File: </td><td>" . $_FILES["fileToUpload"]["tmp_name"] . "</td></tr>";
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:14:00.947

您没有正确打开 PHP 文件，请尝试：

```
<?php
echo "<table border=\"1\">";
echo "<tr><td>Client Filename: </td> <td>" . $_FILES["fileToUpload"]["name"] . "</td></tr>";
echo "<tr><td>File Type: </td> <td>" . $_FILES["fileToUpload"]["type"] . "</td></tr>";
echo "<tr><td>File Size: </td> <td>" . ($_FILES["fileToUpload"]["size"] / 1024) . " Kb</td></tr>";
echo "<tr><td>Name of Temp File: </td><td>" . $_FILES["fileToUpload"]["tmp_name"] . "</td></tr>";
echo "</table>";

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:14:01.440

我在您的uploadFile.php 开头添加了以下标签

```
<?php 
```

表示它应该被解析为 PHP。一切正常

# javascript - CodeIgniter 中 JS 脚本的放置

> ID：15273299
> 
> 赞同：1
> 
> 时间：2013-03-07T14:08:49.033
> 
> 标签：javascript, performance, codeigniter

我对 CodeIgniter 还很陌生，目前正在开发几个站点。我敢肯定，人们可能对此有不同的看法，但就原因达成普遍共识和解释会很有用。

在没有 CI 等框架的情况下进行开发时，通常会将各种 JS 操作（侦听器、jQuery 调用等）放在页面的页脚中。

对于 CI，规范是包含一个通用的页脚和页眉，但是如果我们将所有页面的所有 JS 放在这个页脚中，我们就会调用每个页面上不需要的东西。

解决此问题/设置此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:31:05.120

我没有任何经验，但是对于我的下一个项目，我可能会尝试[Carabiner](https://github.com/EllisLab/CodeIgniter/wiki/Carabiner)。

来自[GitHub 项目](https://github.com/tonydewan/Carabiner)：

> Carabiner 管理 javascript 和 CSS 资产。它会根据它是在生产环境还是开发环境中做出不同的反应。在生产环境中，它将合并、缩小和缓存资产。（随着文件的更改，将生成新的缓存文件。）在开发环境中，它将仅包含对原始资产的引用。

Carabiner 允许您执行类似的操作

```
// add a js file
$this->carabiner->js('scripts.js');

// add a css file
$this->carabiner->css('reset.css'); 
```

在您的控制器中添加 css 或 js 文件，然后将它们输出到您的页眉或页脚中

```
// display css
$this->carabiner->display('css');

//display js
$this->carabiner->display('js'); 
```

我过去确实实现了类似的东西，但是这个库看起来很有希望，而且比我自己构建的努力少得多。如果我是你，我会明确地检查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:43:29.983

使用应用程序框架不是破坏前端代码的借口。谁告诉你*“使用 CI，规范是包含一个通用的页脚和页眉”*是一个懒惰的开发人员。

我过去所做的是这样的：

**MY_html_helper.php**

```
<?php
function js($js)
{
    $js_base_path = '';

    if(is_array($js))
    {
        foreach($js as $script_src)
        {
            if(strpos($script_src, 'http://') === false && strpos($script_src, 'https://') === false)
            {
                $js_base_path = base_url() . 'js/';
            }

            echo "<script src=\"{$js_base_path}{$script_src}\"></script>";
        }
    }
    else
    {
        if(strpos($js, 'http://') === false && strpos($js, 'https://') === false)
        {
            $js_base_path = base_url() . 'js/';
        }
        echo "<script src=\"{$js_base_path}{$js}\"></script>";
    }
}
?> 
```

**控制器**

```
// many scripts
$this->load->view('_footer', array('js'=>array('whatever.js', 'plugin.js')));

// or a single script
$this->load->view('_footer', array('js'=>'jquery.cycle.lite.js')); 
```

**看法**

```
<?php
if(isset($js))
{
    $this->load->helper('html');
    js($js);
}
?>

<script src="/js/script.js"></script> 
```

* * *

不用说，但可以随意定制它以满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:51:27.273

我建立的许多网站并不那么忙，优先考虑的是易于维护。对于这些情况，我只加载我需要的所有脚本，通常是 jQuery 核心和图像旋转器的相关插件等。

我的观点是，一旦主页被加载，脚本就会被缓存，因此额外的权重并不会真正影响网站性能（尤其是对于流量较低的网站）。

然而，更大的问题与页面之间不同的 jQuery 操作有关。在 CodeIgniter 中，我在模板类型的方法中使用嵌套视图来呈现页面。`<script>`我经常发现自己在页面内容部分之后、页脚部分之前的标签中放入页面特定的 jQuery 操作。不是最好的，但至少我的 jQuery 操作接近相关的页面元素（通常是表单）。理想情况下，我会创建一个特定于每个页面的 javascript 文件并从相关的 CodeIgniter 控制器加载它。一旦网站/应用程序稳定下来，我通常会将其作为从版本 1 重构到 2 的一部分。

顺便说一句，我更关心保持我的 CSS 文件有条理和模块化。我的 CSS 比我的 JS 文件更容易陷入混乱。

**要点：**如果您有一个繁忙的站点并且性能很关键，则将逐页脚本加载到您的控制器中，并在全局 JS 文件之外为每个页面维护一个 JS 文件（对于 CSS 也是如此）。

如果您的站点不那么繁忙，只需根据需要加载主页模板（或通用页眉和页脚文件）中的所有脚本和 CSS 文件。

话虽如此，我宁愿花几分钟正确编码，避免在两年后请求重大站点升级时处理大混乱。

作为专业人士，我们努力提高我们的技能和部署策略，但并非每个网站项目都能完美执行，因为所有预算都是有限的，时间也是有限的。归根结底，我们在工作完成后获得报酬，即使不是 100% 完美。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:23:07.737

我会说你可以做一些事情。您可以有许多不同的页脚链接到不同的脚本，并在控制器中更改页脚链接（例如，footer-home.php 或 footer-about.php）。然后只需在标题中保留一般脚本链接。

您还可以为特定页面编写个人脚本，并将它们包含在页面的正文部分（home.php 或您在页眉和页脚之间挤压的任何内容）。

我想这取决于脚本的重量以及它们的使用频率。

# attributes - 厨师属性与数据包

> ID：15273302
> 
> 赞同：21
> 
> 时间：2013-03-07T14:09:03.530
> 
> 标签：attributes, chef-infra, databags

我是 Chef 的新手，在阅读了文档后，我仍然无法理解何时使用属性以及何时使用数据包。

**什么样的数据应该存储为属性，什么样的数据应该存储在数据包中？**

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-08T08:50:57.890

这得看情况。虽然数据包和属性都保存数据，但它们之间的主要区别在于，属性在运行配方时作为节点属性公开，但是您没有清楚地了解使用了哪些数据包（除了您在运行列表）。

我个人存储在属性中的是：

*   安装、创建某些东西（文件、程序）的路径
*   软件版本
*   网址，端口（下载，服务器监听等）
*   用户名

在数据包中：

*   所有不能暴露的东西——在加密的数据包中（私钥、密码）
*   用户属性（名称、shell、密码哈希、公钥、评论等）
*   其他一些配置，更像是对象，而不是简单的字符串或数字数据，这对节点本身并不重要。

关于最后一点：一个例子是maven repositories list。存储库具有属性：名称、url、策略等。对于节点来说，配置什么存储库并不重要——重要的是它安装了 maven。另一个例子是用户，属性中只有可用的用户名。所有其他数据都在数据包中，尽管它可以被暴露——那里没有秘密数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-08T20:31:17.243

当然，这是没有简单答案的事情之一。我的经验法则是，任何事物中的一种都属于数据包。例如，如果您有一个要使用[fnichol 的用户手册](https://github.com/fnichol/chef-user)在节点上创建的用户和组的列表，那么这就是一个数据包。为了调整 MySQL 服务器上的参数，它是属性。

# c# - 如何在 msHTML 中调用脚本

> ID：15273311
> 
> 赞同：2
> 
> 时间：2013-03-07T14:09:29.920
> 
> 标签：c#, .net, webbrowser-control, axwebbrowser

我正在使用 axWebBrowser，我需要制作一个脚本，该脚本在更改列表框的选定项目时工作。

在默认的 webBrowser 控件中，有一个类似的方法；

```
WebBrowserEx1.Document.InvokeScript("script") 
```

但是在 axWebBrowser 我不能使用任何脚本！并且没有关于此控件的文档。

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-25T10:39:41.570

一个迟到的答案，但希望仍然可以帮助某人。使用 WebBrowser ActiveX 控件时，有多种方法可以调用脚本。相同的技术也可用于 WinForms 版本的 WebBrowser 控件（通过[webBrowser.HtmlDocument.DomDocument](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.domdocument.aspx)）和 WPF 版本（通过[webBrowser.Document](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.document.aspx)）：

```
void CallScript(SHDocVw.WebBrowser axWebBrowser)
{
    //
    // Using C# dynamics, which maps to COM's IDispatch::GetIDsOfNames, 
    // IDispatch::Invoke
    //

    dynamic htmlDocument = axWebBrowser.Document;
    dynamic htmlWindow = htmlDocument.parentWindow;
    // make sure the web page has at least one <script> tag for eval to work
    htmlDocument.body.appendChild(htmlDocument.createElement("script"));

    // can call any DOM window method
    htmlWindow.alert("hello from web page!");

    // call a global JavaScript function, e.g.:
    // <script>function TestFunc(arg) { alert(arg); }</script>
    htmlWindow.TestFunc("Hello again!");

    // call any JavaScript via "eval"
    var result = (bool)htmlWindow.eval("(function() { return confirm('Continue?'); })()");
    MessageBox.Show(result.ToString());

    //
    // Using .NET reflection:
    //

    object htmlWindowObject = GetProperty(axWebBrowser.Document, "parentWindow");

    // call a global JavaScript function
    InvokeScript(htmlWindowObject, "TestFunc", "Hello again!");

    // call any JavaScript via "eval"
    result = (bool)InvokeScript(htmlWindowObject, "eval", "(function() { return confirm('Continue?'); })()");
    MessageBox.Show(result.ToString());
}

static object GetProperty(object callee, string property)
{
    return callee.GetType().InvokeMember(property,
        BindingFlags.Instance | BindingFlags.GetProperty | BindingFlags.Public,
        null, callee, new Object[] { });
}

static object InvokeScript(object callee, string method, params object[] args)
{
    return callee.GetType().InvokeMember(method,
        BindingFlags.Instance | BindingFlags.InvokeMethod | BindingFlags.Public,
        null, callee, args);
} 
```

JavaScript必须至少有一个`<script>`标签`eval`才能工作，可以如上所示注入。

或者，JavaScript 引擎可以使用类似`webBrowser.Document.InvokeScript("setTimer", new[] { "window.external.notifyScript()", "1" })`或的东西异步初始化`webBrowser.Navigate("javascript:(window.external.notifyScript(), void(0))")`。

# python - Fabric 将停止 redis 服务器，但不会再次启动它

> ID：15273321
> 
> 赞同：3
> 
> 时间：2013-03-07T14:09:52.463
> 
> 标签：python, fabric

Fabric 将停止我的 redis 服务器，但它不会启动。我尝试过使用织物，但使用 paramiko 它有效。为什么Fabric不会启动redis服务器？我可以使用 paramiko，但这似乎有点反常。

```
[ec2-xxx-xxx-xxx.compute-1.amazonaws.com] Executing task 'redis_master_role'
[master.redis.htdevops.com] Executing task 'redis_master_stop'
[master.redis.htdevops.com] sudo: service redis_6379 stop
[master.redis.htdevops.com] out: Stopping ...
[master.redis.htdevops.com] out: Waiting for Redis to shutdown ...
[master.redis.htdevops.com] out: Redis stopped
[master.redis.htdevops.com] out: 

#Fail 1
[master.redis.htdevops.com] sudo: service redis_6379 start
[master.redis.htdevops.com] out: Starting Redis server...
[master.redis.htdevops.com] out: 

#Fail 2
[master.redis.htdevops.com] sudo: service redis_6379 start
[master.redis.htdevops.com] out: Starting Redis server...
[master.redis.htdevops.com] out: 

#Started by paramiko
Starting Redis server...

def redis_master_role():
    env.roles = ['redis'] 
def redis_master_stop():
    sudo('service redis_6379 stop')
    time.sleep(5)
def redis_master_start():
    sudo('service redis_6379 start')
    time.sleep(5)
    sudo('service redis_6379 start')

    keypair_path = "/home/ubuntu/.ec2/test.pem"
    key = paramiko.RSAKey.from_private_key_file(keypair_path)
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.connect(redis_master,22,username='ubuntu',pkey=key,timeout=60)
    cmd = 'sudo service redis_6379 start'
    stdin, stdout, stderr = ssh.exec_command(cmd)
    print stdout.read()
    ssh.close()

def redis_bootstrap():
    env.user = "ubuntu"
    env.key_filename = "/home/ubuntu/.ec2/test.pem"

    execute('redis_master_role')
    execute('redis_master_stop')
    execute('redis_master_put')
    execute('redis_master_start') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:48:05.557

检查这个：[fabric 似乎启动 apache2 但没有](https://stackoverflow.com/questions/6379484/fabric-appears-to-start-apache2-but-doesnt)

但基本上，试试这个：

`sudo('service redis_6379 start', pty=False)`

# c# - 不影响访问者数量的网页阅读

> ID：15273324
> 
> 赞同：0
> 
> 时间：2013-03-07T14:09:57.617
> 
> 标签：c#, httpwebrequest, webpage, httpwebresponse

我正在编写一个使用 C# Windows 窗体读取网页内容的程序。我正在使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.110%29.aspx)和[WebResponse](http://msdn.microsoft.com/en-us/library/system.net.webresponse.aspx)阅读任何内容都没问题。但是页面访问者计数器受此影响并且正在上升。我不想增加访客柜台。我使用`UserAgent`信息`"Googlebot/2.1 (+http://www.googlebot.com/bot.html)"`，但它不能解决我的问题。在不影响访问者计数器网页的情况下，如何解决此问题。我很抱歉我的小英语，请帮助我。

我的代码是这样的：

```
HttpWebRequest wReq = (HttpWebRequest)WebRequest.Create(url);
wReq.Method = "GET"; // Alredy use a POST
wReq.MediaType = "HTTP/1.1";
wReq.ContentType = "text/xml";
wReq.Referer = "http://googlebot.com/"; // Already use site name
wReq.UserAgent = "Googlebot/2.1 (+http://www.googlebot.com/bot.html)";
wReq.CookieContainer = new CookieContainer();
wReq.Timeout = 10000;
WebResponse wRes = wReq.GetResponse();
Encoding enc = Encoding.GetEncoding("iso-8859-9");
StreamReader sRed = new StreamReader(wRes.GetResponseStream(), enc);
return sRed.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:37:13.130

你不太可能做到这一点。如果您使用的是 Google 用户代理，它仍然会上升，那么当真正的 Google 访问该页面时，它可能也会上升。网站的问题在于没有在他们的计数器中过滤掉机器人。

# html - 如何防止在 Razor（独立）中转义 html？

> ID：15273327
> 
> 赞同：28
> 
> 时间：2013-03-07T14:10:05.157
> 
> 标签：html, .net, asp.net-mvc, razor

我有一个带有属性 Content 的模型，其中包含 HTML 字符串。

```
var model = new { Content = ... }
Razor.Parse(templateBody, model) 
```

如何使用独立的 Razor 呈现此字符串。

我试过：

```
@(new HtmlString(Model.Content)) 
```

并且

```
@(HttpUtility.HtmlDecode(Model.Content)) 
```

Model.Content 始终呈现 HTML 转义。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-07T17:26:09.790

这应该工作`Html.Raw(Model.Content)`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-11T10:17:01.900

在 RazorEngine 库中，特殊的“do-not-escape-me”类型是`RazorEngine.Text.IEncodedString`. 在模板基类上使用简单的辅助方法：

```
 @Raw("<script>alert('!');</script>") 
```

要说服 VS 和 Resharper 为您提供 IntelliSense，请在模板顶部添加以下行：

```
@inherits RazorEngine.Templating.TemplateBase 
```

# javascript - 将 jquery-1.9.1.min.js 和 query.mobile-1.3.0.min.js 合并到一个文件中给出错误

> ID：15273329
> 
> 赞同：2
> 
> 时间：2013-03-07T14:10:06.730
> 
> 标签：javascript, jquery, jquery-mobile

我正在开发一个 jquery 移动 webapp

基本结构需要 jqueryMobile 文档中记录的 jquery.js 和 jquery-mobile.js 广告。

```
<!DOCTYPE html> 
<html>
<head>
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="myjqueryconfig.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head> 
```

一切都适用于这种结构，但我想将 jquery js 文件与 jquery-mobile js 文件合并以拥有一个 js 文件但是当我这样做时（只需将 jquery 移动代码剪切并推送到 jquery 文件的末尾）页面停止工作和萤火虫给我一个javascript错误：

```
 TypeError: $(...).bind(...) is not a function 
```

我的单个 .js 文件的结构如下：

```
//jquery 1.9.1 min source code

$(document).bind("mobileinit", function(){
    $.mobile.autoInitializePage = false
})

//jquery mobile min 1.3.0 source code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:54:11.583

`;`连接文件时在文件之间添加 a可以解决问题。

看看这段代码：

```
(function(){
  console.log('A');
}())

(function(){
  console.log('B');
}()) 
```

如果没有中间分号，第二个 IIFE 看起来就像是传递给第一个的参数。所以它失败了。添加分号解决了这个问题，因为它指定了这两个语句。

JavaScript 中的分号是可选的，但省略它们是非常危险的。

# c# - 在 xna 游戏工作室中处理快速点击

> ID：15273332
> 
> 赞同：0
> 
> 时间：2013-03-07T14:10:16.777
> 
> 标签：c#, xna, click

我正在处理点击事件，我不介意更新和绘制的闪电般的速度处理，这就是为什么我只是使用一个简单的按钮按下事件来处理点击。但是和其他程序员一样，我在使用这种方法时遇到了一个问题，我正在添加像 score += 100 这样的分数，正如你所猜到的那样，分数的添加非常快，我认为只需单击一下分数增加了200-400。这是我的做法。

```
mouseStateCurrent = Mouse.GetState();
                mousePosition = new Point(mouseStateCurrent.X, mouseStateCurrent.Y);
                if (drawPauseMenu == false)
                {
                    if (pauseBtnRec.Contains(mousePosition))
                    {
                        if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
                        {
                            drawPauseMenu = true;
                            paused = true;
                        }
                    }
                    else if (binRec.Contains(mousePosition))
                    {
                        if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
                        {
                            playerScore += 100;
                            binSelected = 1;
                        }

                    }
                    else if (birdBathRec.Contains(mousePosition))
                    {
                        if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
                        {
                            playerScore += 100;
                            birdBathSelected = 1;
                        }

                    }
                    else if (bowlRec.Contains(mousePosition))
                    {
                        if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
                        {
                            playerScore += 100;
                            bowlSelected = 1;
                        }

                    }
                    else if (cansRec.Contains(mousePosition))
                    {
                        if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
                        {
                            playerScore += 100;
                            cansSelected = 1;
                        }

                    }
                    else if (paintsRec.Contains(mousePosition))
                    {
                        if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
                        {
                            playerScore += 100;
                            paintsSelected = 1;
                        }

                    }
                    else if (poolRec.Contains(mousePosition))
                    {
                        if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
                        {
                            playerScore += 100;
                            poolSelected = 1;
                        }

                    }
                    else if (pothRec.Contains(mousePosition))
                    {
                        if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
                        {
                            playerScore += 100;
                            potSelected = 1;
                        }

                    }
                    else if (tiresRec.Contains(mousePosition))
                    {
                        if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
                        {
                            playerScore += 100;
                            tiresSelected = 1;

                        }

                    }
                    else if (vasesRec.Contains(mousePosition))
                    {
                        if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
                        {
                            playerScore += 100;
                            vasesSelected = 1;
                        }

                    }
                    mouseStatePrevious = mouseStateCurrent;
                } 
```

一直在尝试使用此代码并尝试这样做，

```
if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
{

    if (mouseStateCurrent.LeftButton == ButtonState.Released)
    {
        playerScore += 100;
        vasesSelected = 1;
    }
} 
```

仍然没有运气。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:23:23.490

您快到了。你有一个`mouseStatePrevious`并且你设置正确，但你从来没有使用它。

代替：

```
if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
{ // Why are you checking if the mouse is pressed AND released?
    if (mouseStateCurrent.LeftButton == ButtonState.Released)
    {
        playerScore += 100;
        vasesSelected = 1;
    }
} 
```

做这个：

```
if (mouseStateCurrent.LeftButton == ButtonState.Pressed)
{
    if (mouseStatePrevious.LeftButton == ButtonState.Released)
    {
        playerScore += 100;
        vasesSelected = 1;
    }
} 
```

# javascript - 如何强制 Mustache 将数字呈现为字符串？

> ID：15273335
> 
> 赞同：3
> 
> 时间：2013-03-07T14:10:31.560
> 
> 标签：javascript, mustache

```
var template = Mustache.compile("{{#list}}<option value=\"{{&0}}\">{{&0}}</option>{{/list}}");

var view = { list: ["1.0", "2.0"] };

var output = template(view); 
```

在上面的代码片段中，输出到 HTML 中的数字是“美化的”，即

```
"1.0" => 1
"2.0" => 2 
```

对应用程序来说重要的是这些数字完全按照收到的方式打印。进入列表的项目可能并不总是数字或具有相同的小数位数。

如何强制将它们打印为接收/视为字符串？

注意 - 我还使用了 unescape 标记 (&) 注意 - 我尝试将它们重新声明为字符串，但 JS 在渲染时仍将它们解释为数字，即

```
var view = { list: [new String("1.0"), new String("2.0")] }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:42:22.780

你的模板有点不对劲。尝试使用 {{.}} 而不是 {{0}} 或 {{&0}} 将当前元素引用为字符串。

```
var template = Mustache.compile("{{#list}}<option value=\"{{.}}\">{{.}}</option>{{/list}}"); 
```

这是一个 jsFiddle 来演示：[Fiddle](http://jsfiddle.net/NNjUU/1/)

根据 Mustache 规范，{{.}} 将标识迭代中的当前元素，并将小数转换为字符串。在您的情况下，您从字符串开始，这确实是保留小数点为 0 位（1.0 === 1）所必需的。

小胡子规范（~第 157 行）：[sections.yml](https://github.com/mustache/spec/blob/master/specs/sections.yml#L157)

我不熟悉使用 {{0}} 代替，但显然它的行为有点不同。我在规范中没有找到任何关于其用法的内容。

只有在处理 HTML 时才需要尝试转义。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:04:09.590

`{{0}}`（或`{{&0}}`就此而言）并没有因为编码或转换问题而做一些奇怪的事情，而是因为你要求它做一些奇怪的事情:)

在 Mustache 中，首先针对当前范围尝试查找，然后针对父范围尝试查找，并一直向上到堆栈。

鉴于此数据：

```
{list: ["1.0", "2.0"]} 
```

还有这个 Mustache 模板：

```
{{# list }}{{ 0 }}{{/ list }} 
```

您的渲染上下文堆栈开始为：

```
[
  {list: ["1.0", "2.0"]}
] 
```

但是，一旦您进入该`{{# list }}`部分，并且它开始遍历列表项，上下文堆栈就是：

```
[
  {list: ["1.0", "2.0"]}, // same as before
  "1.0"                   // or, "2.0" in the second trip through the loop...
] 
```

因此，该部分内的任何标签都将针对第一个标签进行尝试`"1.0"`，如果不成功，将针对`{list: ["1.0", "2.0"]}`. 所以真的，你的`{{&0}}`意思是......`"1.0"[0]``"2.0"[0]`

当然，计算结果为`"1"`和`"2"`。

# c++ - 搜索并找到最短队列并在某些条件后搜索

> ID：15273338
> 
> 赞同：1
> 
> 时间：2013-03-07T14:10:43.630
> 
> 标签：c++, loops, for-loop, queue, goto

我正在尝试实现一个任务调度程序，其中我有 n 个任务。我的任务调度器背后的想法是，在向量的队列循环中，任务应该排入队列循环中最短的队列，这是通过以下代码完成的。

```
#include <vector> 
#include <queue> 
std::vector<std::queue<int> > q
int min_index = 0;
task t // implemented in the other part of the program
std::size_t size = q.size();
for( i=0; i<size; i++){ //accessing loop of queues
    if(q[min_index].size() > q[i].size())
        min_index = i; // Now q[min_index] is the shortest queue
} 
q[min_index].push(Task); 
```

接下来我试图扩展这个范例以减少调度程序的开销时间，而不是每次都搜索最短的队列，而是搜索一些条件，即。在 5 个任务进入最短队列后搜索最短队列。

我需要做这样的事情

```
#include <vector> 
#include <queue> 
std::vector<std::queue<int> > q
task t // implemented in the other part of the program
while(q[min_index].size()!=q[min_index].size()+5) // check whether current min_index  queue's size is increased 5 more times if not goto enqueue
        {
        goto enqueue;
        }

    int min_index = 0;

    std::size_t size = q.size();
    for( i=0; i<size; i++){ //accessing loop of queues
        if(q[min_index].size() > q[i].size())
            min_index = i; // Now q[min_index] is the shortest queue
    } 
    enqueue:  
    q[min_index].push(Task); 
```

有人可以帮我如何正确进行。提前致谢

**更新** 而不是拥有 5（一个随机数），我想拥有一个每次都可靠且近似的数字。所以我想获取队列循环的 min_value 大小和 max_value 大小的差异，并每次将其与计数器进行比较。

```
// global variables 
std::vector<std::queue<int> > q;
int counter = INT_MAX; // 
int min_index = 0;
int max_size = -1;

void enqueue(scheduler::task new_task) { 
 if ( counter > diff_size ){
  // look for new min and maximum
  std::size_t size = q.size();
  for( i=0; i<size; i++){ 
    if(q[min_index].size() > q[i].size())
     min_index = i; 
       if(q[i].size() > max_size)
        max_size = q[i].size(); 
    diff_size=max_size - min_index;
  } 
  // counter reset
  counter = 0;
 }

 // enqueue in minimum queue
 q[min_index].push(new_task)

 // increase counter
 counter ++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:05:45.290

我想我会试试这个（代码确实编译，它确实有效）：

```
#include <vector> 
#include <queue>
#include <cassert>
#include <iostream>
using namespace std;

class multi_queue{
  private:
    typedef std::vector<std::queue<int> > mq_type;
    mq_type q;
    int min_queue;
    int min_queue_inc;
    int max_inc;
    void find_min_queue(){
      max_inc=q[min_queue].size();
      min_queue_inc=0;
      min_queue=0;
      for(int i=1;i<q.size();++i)
        if(q[i].size()<q[min_queue].size())
          min_queue=i;
    }
  public:
    multi_queue(int n) {
      assert(n>0);
      min_queue=0;
      min_queue_inc=0;
      max_inc=5;
      increase_queues(n);
    }
    void increase_queues(int n){ 
      if(n<q.size()) return;
      q.resize(n);
    }
    void push(int item){
      if(min_queue_inc++==max_inc)
        find_min_queue();
      q[min_queue].push(item);
    }
    int queues() const {
      return q.size();
    }
    int pop_from(int qnum){
      assert(qnum>=0);
      assert(qnum<q.size());
      assert(can_pop_from(qnum));
      int temp=q[qnum].front();
      q[qnum].pop();
      return temp;
    }
    bool can_pop_from(int qnum) const {
      return q[qnum].size()>0;
    }
    int largest_queue() const {
      int largest=0;
      for(int i=1;i<q.size();++i)
        if(q[i].size()>q[largest].size())
          largest=i;
      return q[largest].size();
    }
};

int main(){
  multi_queue q(10);
  for(int i=0;i<100;++i){
    cout<<"Current largest queue: "<<q.largest_queue()<<endl;
    cout<<"Pushing: " <<i<<endl;
    q.push(i);
  }

  for(int i=0;i<10;++i)
  for(int j=0;j<100;++j)
    if(q.can_pop_from(i))
      cout<<q.pop_from(i)<<endl;
} 
```

当然，您不想`q.largest_queue()`每次都显示，因为那样会破坏要点，但我在这里这样做是为了让您能够看到事情正在发挥作用。

从回答问题的角度来看，重要的方法是`push()`和`find_min_queue()`。

我使用两个状态变量，`min_queue`并`min_queue_inc`跟踪正在发生的事情。

`min_queue`总是指向最短的队列。`min_queue_inc`跟踪已添加到该队列的项目数。

在`push()`我们检查当前最小队列是否添加了 5 个项目；如果是这样，是时候看看我们是否应该使用新的最小队列，因此我们调用`find_min_queue()`.

`find_min_queue()`重置`min_queue_inc`，找到最短的队列，并在 中记下该队列`min_queue`。

根据您要执行的操作，调整变量的行为`max_inc`以满足您的需要。

# ruby-on-rails - 运行 cap deploy 时出错：cold

> ID：15273343
> 
> 赞同：0
> 
> 时间：2013-03-07T14:10:54.793
> 
> 标签：ruby-on-rails, capistrano, rubber

当我`cap [deploy:cold]`在部署到亚马逊 ec2 时使用橡胶运行时，我会在控制台上无休止地打印出以下内容。
请帮忙出出主意。我在这里关注了railscast链接 [http://railscasts.com/episodes/347-rubber-and-amazon-ec2](http://railscasts.com/episodes/347-rubber-and-amazon-ec2)

```
servers: ["app01.foo.com"]
  [app01.foo.com] executing command
** [out :: app01.foo.com] .
** [out :: app01.foo.com] .
** [out :: app01.foo.com] .
** [out :: app01.foo.com] .
** [out :: app01.foo.com] .
** [out :: app01.foo.com] .
** [out :: app01.foo.com] . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T05:46:13.463

这是一个设置问题。开箱即用的橡胶对我们不起作用。您必须进行一些修改。您遇到的问题的主要修复是在 mysql 配置中：config/rubber/deploy_mysql.rb

```
@@ -40,7 +40,7 @@
             pass = "identified by '#{env.db_pass}'" if env.db_pass
             rubber.sudo_script "create_master_db", <<-ENDSCRIPT
             mysql -u root -e "create database #{env.db_name};"
-              mysql -u root -e "delete from mysql.user where user='' and host='localhost';"
+              mysql -u root -e "delete from mysql.user where user='';"
           mysql -u root -e "grant all on *.* to '#{env.db_user}'@'%' #{pass};"
           mysql -u root -e "grant select on *.* to '#{env.db_slave_user}'@'%' #{pass};"
           mysql -u root -e "grant replication slave on *.* to '#{env.db_replicator_user}'@'%' #{pass};" 
```

还有将 :asset 角色设置为 :app 让我们长期受阻。这发生在 deploy.rb 并且根据上面的 railscast。

# c# - OnListItemClick(...) 被标记为覆盖，但找不到合适的方法来覆盖

> ID：15273347
> 
> 赞同：0
> 
> 时间：2013-03-07T14:11:03.360
> 
> 标签：c#, android, listview, xamarin.android

我从适配器创建了一个 ListView，但我想选择项目，在新活动中提供有关此项目的信息。

那是我的代码：

```
 protected override void OnListItemClick(ListView listview, 
                                            View view, int pos, long id)
    {
        var selectedvalue = sw_items[pos];
        var i = new Intent(this, typeof(Activity1));
        i.PutExtra("selectedvalue", selectedvalue);
        StartActivity(i);
    } 
```

但我得到这个错误：

```
MainActivity.OnListItemClick(Android.Widget.ListView, Android.Views.View, int, long)' is marked as an override but no suitable method found to override (CS0115) 
```

MainActivity 是一个`Activity`

我该如何解决这个问题，或者有没有其他方法可以做到这一点`Activity`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:35:46.010

如果要覆盖`OnListItemClick`in `MainActivity`，则必须继承该活动，`ListActivity`而不是普通的 old `Activity`。

此外，请确保`Listview`您的 xml 中的 id 为“@android:id/list”（或者`list`如果它在代码中）。

您可以遵循一个非常好的指南：[使用数据填充 ListView](http://docs.xamarin.com/guides/android/user_interface/working_with_listviews_and_adapters/part_2_-_populating_a_listview_with_data)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:19:41.550

尝试以下操作：

```
@Override
protected void OnListClick(ListView listview, View view, int pos, long id) {
    var selectedvalue = sw_items[pos];
    var i = new Intent(this, typeof(Activity1));
    i.PutExtra("selectedvalue", selectedvalue);
    StartActivity(i);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:40:54.147

您需要删除覆盖，然后在您的设置中的某个地方，您需要将您的方法连接到列表中的单击事件。

通常这样做是这样的：

```
myList.OnClick += new ClickEventHandler(myMethodName); 
```

但我没有使用过monodroid，所以可能会有一些细微的差别。

# c++ - Makefile 和更新文件

> ID：15273350
> 
> 赞同：0
> 
> 时间：2013-03-07T14:11:06.927
> 
> 标签：c++, makefile

我正在处理一个项目，其中包含几个目录，而我的 makefile 比所有目录都高一级。当我更新代码/头文件并重新制作时，它会显示“没有什么可以为‘所有’做的”。有没有办法强制 make 检查所有目录并因此意识到必须重新制作某些组件？干杯杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:14:19.837

每次都可以强制进入子目录：

```
SUBDIRS = dir1 dir2

.PHONY: all
all: subdirs final_target

.PHONY: subdirs
subdirs:
    for d in $(SUBDIRS); do $(MAKE) -C $$d; done

.PHONY: final_target
final_target:
    echo "Do something here..." 
```

这种进入所有子目录的方案其实很常见。

# c++ - 在 Web 服务器上运行 C++ 代码并从应用程序调用它

> ID：15273359
> 
> 赞同：4
> 
> 时间：2013-03-07T14:11:46.643
> 
> 标签：c++, web-services, web-applications

在 Web 开发和服务器管理方面，我是一个完全的新手，因为我一直在编写桌面应用程序。

我想制作一个执行此操作的桌面应用程序

*   将数据发送到 Web 服务器（http://... 地址）
*   Web 服务器接收数据并通过存储在 Web 服务器本身上的 C++ 应用程序进行计算
*   Web 服务器将计算的值返回给桌面应用程序

这可能吗？我从哪里开始？

我的虚拟主机是[http://www.namecheap.com/](http://www.namecheap.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:28:23.967

您似乎想创建 CGI。如果您是新手，请查看[CGI 编程](http://www.cs.tut.fi/~jkorpela/forms/cgic.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:15:13.407

使用 Boost Asio，您可以使用 C++ 编写自己的服务器和客户端，并使用 C++ 处理您想要的内容。

看教程，有几个例子[HttpServer 和 HttpClient](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)。

# java - YUI 压缩器在构建时压缩和替换

> ID：15273367
> 
> 赞同：1
> 
> 时间：2013-03-07T14:12:09.403
> 
> 标签：java, javascript, maven, yui

我试图找到`js/css`maven 项目的压缩工具，所以我找到了这个线程 - [Maven Javascript Compressor](https://stackoverflow.com/questions/3586455/maven-javascript-compressor)

一切正常，但我仍在努力解决一个问题。

当您不设置后缀 yui 时，它`*-min`默认设置并在旧文件的旁边创建一个新文件。因此，例如，如果我`scripts.js`在使用该插件构建 maven 之后，我将同时拥有`scripts.js`和`scripts-min.js`文件。我只需要`*-min`文件。如果我将其设置`<nosuffix>`为 true，则表示压缩成功，但不会覆盖文件。

有没有办法我只能拥有同名的压缩文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:58:10.283

最终为 maven ant 插件编写了这个 ant 脚本：

```
<delete includeEmptyDirs="false">
    <fileset dir="${basedir}/target/${project.build.finalName}/resources/js" excludes="**/*-min.js" />          
</delete>
<move todir="${basedir}/target/${project.build.finalName}/resources/js" includeemptydirs="false">
    <fileset dir="${basedir}/target/${project.build.finalName}/resources/js" />
    <mapper type="glob" from="*-min.js" to="*.js" />
</move>

<delete includeEmptyDirs="false">
<fileset dir="${basedir}/target/${project.build.finalName}/resources/css"
    excludes="**/*-min.css, **/*.ttf, **/*.png, **/*.jpg" />
</delete>
<move todir="${basedir}/target/${project.build.finalName}/resources/css" includeemptydirs="false">
    <fileset dir="${basedir}/target/${project.build.finalName}/resources/css" />
    <mapper type="glob" from="*-min.css" to="*.css" />
</move> 
```

简要说明：脚本首先删除旧的未压缩文件，然后将`*-min.js`and`*-min.css`文件重命名为简单`*.js`和`*.css`

工作正常，刚刚测试。此外，如果您在`/js`or`/css`文件夹中有一些不同的文件（不是`.js`or `.css`），请确保您没有删除它们并将这些扩展名放在`exclude`属性中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-09T07:42:30.313

是的，您使用的 maven Javascript Compressor 确实压缩了文件。但是在**maven 包生命周期**中，压缩发生在**准备包**阶段，之后，在**包阶段**，maven-war-plugin 将复制原始文件并覆盖压缩器刚刚所做的。下面的配置是我解决问题的方法，我将js文件压缩到另一个文件夹，并在打包阶段将其复制回来。

```
 <plugin>
            <groupId>net.alchim31.maven</groupId>
            <artifactId>yuicompressor-maven-plugin</artifactId>
            <version>1.5.1</version>
            <executions>
                <execution>
                <id>yui-compress</id>
                <phase>prepare-package</phase>
                    <goals>
                        <goal>compress</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <excludes>
                    <exclude>**/*-min.js</exclude>
                    <exclude>**/*.min.js</exclude>
                    <exclude>**/*-min.css</exclude>
                    <exclude>**/*.min.css</exclude>
                    <exclude>**/amazeui*</exclude>
                    <exclude>**/*.css</exclude>
                </excludes>
                <encoding>UTF-8</encoding>
                <nosuffix>true</nosuffix>
                <statistics>false</statistics>
                <linebreakpos>5000</linebreakpos>
                <useSmallestFile>true</useSmallestFile>
                <jswarn>false</jswarn>
                <warSourceDirectory>${basedir}/web</warSourceDirectory>
                <webappDirectory>${project.build.directory}/min</webappDirectory>
                <skip>false</skip>
            </configuration>
        </plugin> 
         <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
                <webResources>
                    <resource>
                        <directory>${project.build.directory}/min</directory>
                    </resource>
                </webResources>
            </configuration>
        </plugin> 
```

# windows-phone-8 - 从 byte[] 设置 StoredContact 的显示图片

> ID：15273369
> 
> 赞同：1
> 
> 时间：2013-03-07T14:12:09.870
> 
> 标签：windows-phone-8

我有一个`byte[]`包含图片数据。我想将此图片数据设置为 windows phone 8 中 StoredContact 的显示图片。我尝试过：

```
byte[] data = ...

ContactStore store = await ContactStore.CreateOrOpenAsync(ContactStoreSystemAccessMode.ReadWrite, ContactStoreApplicationAccessMode.ReadOnly);
StoredContact contact = await store.FindContactByRemoteIdAsync(remoteId);
using (IInputStream stream = new MemoryStream(data).AsInputStream())
{                    
    await contact.SetDisplayPictureAsync(stream);
} 
```

但我`System.UnauthorizedAccessException`接听`AsInputStream()`电话。我有`ID_CAP_CONTACTS`-capability 集，并且联系人属于自定义数据存储，我对其具有写访问权限。有谁知道如何解决这个问题？

**编辑：**

我从 Web 请求中获取数据，使用以下内容提取字节数据：

```
DataContractJsonSerializer serializer = new DataContractJsonSerializer(new PhotoObject().GetType());
var result = (PhotoObject)serializer.ReadObject(stream);
byte[] data = Convert.FromBase64String(result.Data);

[DataContract]
class PhotoObject
{
    [DataMember(Name = "size")]
    public string Size { get; set; }

    [DataMember(Name = "data")]
    public string Data { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:15:27.293

我终于设法解决了这个问题。我做的第一件事是使用以下方法创建流：

```
new MemoryStream(data, 0, data.Length, true, true).AsInputStream(); 
```

代替

```
new MemoryStream(data).AsInputStream(); 
```

这摆脱了`UnauthorizedException`，但是它给了我一个`ArgumentException: "Value does not fall within the expected range"`on the `SetDisplayPictureAsync`-call 。我仍然不知道它为什么起作用，但我通过将数据写入临时文件来解决这个问题，然后我打开并传递给`SetDisplayPictureAsync`. 这是我这样做的代码：

```
//Write bytes to file then open file and pass stream to setdisplaypicture.
StorageFolder localFolder = ApplicationData.Current.LocalFolder;
var folder = await localFolder.CreateFolderAsync("Photo_Temp_Folder", CreationCollisionOption.OpenIfExists);
var file = await folder.CreateFileAsync("photo_" + contact.Id, CreationCollisionOption.ReplaceExisting);
uint written = 0;
using (var writeStream = await file.OpenAsync(FileAccessMode.ReadWrite))
{
    while (written < data.Length)
    {
        written += await writeStream.WriteAsync(data.AsBuffer());
    }
}

using (var accessStream = await file.OpenAsync(FileAccessMode.Read))
{
    await contact.SetDisplayPictureAsync(accessStream);
    await contact.SaveAsync();
}
await file.DeleteAsync(); 
```

希望它可以帮助某人。

# ios - 如何对我的自定义类进行版本控制

> ID：15273371
> 
> 赞同：-1
> 
> 时间：2013-03-07T14:12:13.747
> 
> 标签：ios, xcode, core-data, versioning

我已经为 coredata 编写了一些用于项目的自定义类。这些将随着时间的推移而更新。

除了使用 git，在我的 iOS 项目中管理自定义类的版本控制的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:15:48.557

在 Xcode4.x 中有非常好的新功能用于版本控制，您可以借助它来实现它。

有关它的详细信息：查看此链接：http:
[//developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode_User_Guide/000-About_Xcode/about.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode_User_Guide/000-About_Xcode/about.html)

# java - 为什么谷歌地理编码找不到一些地址

> ID：15273377
> 
> 赞同：-2
> 
> 时间：2013-03-07T14:12:27.197
> 
> 标签：java, google-geocoding-api

你好，我有这个 java 程序，它从数据库中获取地址，对谷歌地理编码 api 进行请求，然后我想查看 lat、lng 坐标。

此外，由于谷歌无法找到某些地址 - 所以我决定如果谷歌无法找到城镇和街道的地址，我只使用城镇名称提出请求。

这是java程序

```
public class TestCon {
    static String nodeString="";
    static String nody="";

    static String elementValue = "";
    static String townstr="";
    static String streetstr="";
    static String urlString;
    static Document geocoderResultDocument;

    static NodeList nodes2;
    static Connection conn2 = null;
    static NodeList nodes; 
    private static final String GEOCODE_REQUEST_PREFIX = "http://maps.google.com/maps/api/geocode/xml";

    public String _xpath = null;
    public Document _xml = null;

    public static void main(String[] args) throws IOException,  URISyntaxException, ParserConfigurationException, SAXException, ClassNotFoundException, SQLException 
    {          Class.forName("org.postgresql.Driver");

        try 
        {
            conn2 = DriverManager.getConnection(
                    "jdbc:postgresql://localhost:5432/plovdivbizloca",
                    "postgres", "tan");
        }

        catch (SQLException ex) 
        {

            ex.printStackTrace();
        }

       for (int j=1500;j<1550;j++)

        {
           try 
        {
        conn2 = DriverManager.getConnection(
                    "jdbc:postgresql://localhost:5432/plovdivbizloca",
                    "postgres", "tan");
        }

        catch (SQLException ex) 
        {

            ex.printStackTrace();
        }

        Statement mystmt = null;

        String selectQuery = "SELECT main_office_town, address FROM pl_biz where id="+j;

        try
        {
            mystmt = conn2.createStatement();
            ResultSet mysr = mystmt.executeQuery(selectQuery);

            ResultSetMetaData rsmd = mysr.getMetaData();
            int colCount = rsmd.getColumnCount();

             elementValue="";
             townstr="";

            while (mysr.next()) 
            {

                for (int i = 1; i <= colCount; i++) 
                {

                     elementValue += mysr.getString(i);
                    if (i < colCount)
                        elementValue += ",";
                }
                townstr = mysr.getString(1);
                streetstr = mysr.getString(2);
                //System.out.println(elementValue);
                //System.out.println(townstr);
                //System.out.println(streetstr);

            }

         }
        catch (Exception ex) 
        {
        }
        // NEW GEOCODING;

        String inputQuery, resultXml,  xPathString, xi = null;
        inputQuery = elementValue;

        urlString = GEOCODE_REQUEST_PREFIX + "?address=" + URLEncoder.encode(inputQuery, "UTF-8") + "&sensor=false";
        System.out.println("FIRST URL WITH THE WHOLE ADDRESS: "+urlString);

        // Convert the string to a URL so we can parse it
         URL url = new URL(urlString);

         geocoderResultDocument = makeConnection(url);

        // Process the results
        xPathString = "//GeocodeResponse//location/lat";
        nodes = process(geocoderResultDocument, xPathString);
        xi = "//GeocodeResponse//location/lng";
         nodes2 = process(geocoderResultDocument, xi);

        if ((nodes.getLength()==0)&&(nodes2.getLength()==0))
        {
            System.out.println ("ZERO RESULTS FOUND - making NEW REQUEST");
            urlString = GEOCODE_REQUEST_PREFIX + "?address=" + URLEncoder.encode(townstr, "UTF-8") + "&sensor=false";
            System.out.println("new url only with towwn" + urlString);
           //System.out.println(townstr);
            // Convert the string to a URL so we can parse it
            URL url2 = new URL(urlString);

             geocoderResultDocument = makeConnection(url2);
             System.out.println("EHOOO");
             nodes = process(geocoderResultDocument, xPathString);
             nodes2 = process(geocoderResultDocument, xi);
             System.out.println("after teh new search only with town  nodes length is: "+nodes.getLength());
        }

        if ((nodes.getLength()>=1)&&(nodes2.getLength()>=1))  
        {
            if ((nodes.getLength()>1)&&(nodes2.getLength()>1))  

                    {System.out.println("more than one result found - get the first closest");}

        // Print results
                        nodeString = nodes.item(0).getTextContent();

            System.out.println("lat_cordinate:"  + nodeString);

                   nody = nodes2.item(0).getTextContent();
                        System.out.println("longitude:" + nody);

        }
        else 
        {

            System.out.println("After making an request only with town - again zero result");
        }

        System.out.println("jjj"+j);

      }
    }

    public static NodeList process(Document xml, String xPathStrings)
            throws IOException {

        NodeList result = null;

        XPathFactory factory = XPathFactory.newInstance();

        XPath xpath = factory.newXPath();

        try {
            result = (NodeList) xpath.evaluate(xPathStrings, xml,
                    XPathConstants.NODESET);
        }
        catch (XPathExpressionException ex) {
            ex.printStackTrace();
        }

        return result;
    }

  public static  Document makeConnection(URL url) throws IOException, SAXException, ParserConfigurationException    
  { 
  HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    Document geocoderResultDocument = null;
    try 
    {
        // open the connection and get results as InputSource.
        conn.connect();
        InputSource geocoderResultInputSource = new InputSource(conn.getInputStream());

        // read result and parse into XML Document
        geocoderResultDocument = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(geocoderResultInputSource);
    } 
    finally 
    {
        conn.disconnect();
    }

    return geocoderResultDocument;
  } 
```

问题在于我得到的响应：

我已经测试了地址和坐标，大部分时间它们都是正确的，响应也是正确的。但是在某些时候，我注意到了这种奇怪的情况-查看此示例以获取 id=1512 的地址

* * *

[包含完整地址的第一个 URL： http](http://maps.google.com/maps/api/geocode/xml?address=%D0%9F%D0%BB%D0%BE%D0%B2%D0%B4%D0%B8%D0%B2%2C%D1%83%D0%BB.+%D0%94%D0%98%D0%9B%D0%AF%D0%9D%D0%9A%D0%90+2%D0%90+&sensor=false) ://maps.google.com/maps/api/geocode/xml?address=%D0%9F%D0%BB%D0%BE%D0%B2%D0%B4%D0% [B8%D0%B2%2C%D1%83%D0%BB.+%D0%94%D0%98%D0%9B%D0%AF%D0%9D%D0%9A%D0%90+2%D0% 90+&传感器=假](http://maps.google.com/maps/api/geocode/xml?address=%D0%9F%D0%BB%D0%BE%D0%B2%D0%B4%D0%B8%D0%B2%2C%D1%83%D0%BB.+%D0%94%D0%98%D0%9B%D0%AF%D0%9D%D0%9A%D0%90+2%D0%90+&sensor=false)

[发现零结果 - 仅使用城镇创建新请求新网址： http](http://maps.google.com/maps/api/geocode/xml?address=%D0%9F%D0%BB%D0%BE%D0%B2%D0%B4%D0%B8%D0%B2&sensor=false) ://maps.google.com/maps/api/geocode/xml?address=%D0%9F%D0%BB%D0%BE%D0%B2% [D0%B4%D0%B8%D0%B2&sensor=false](http://maps.google.com/maps/api/geocode/xml?address=%D0%9F%D0%BB%D0%BE%D0%B2%D0%B4%D0%B8%D0%B2&sensor=false)

新搜索后的 EHOOO 仅城镇节点长度为：0

仅在withtown提出请求后-再次为零结果

jjj1522

* * *

**如果你点击网址，你会发现谷歌在两次都找到了地址——但是正如你看到的程序给我的，谷歌没有找到地址——我不明白为什么**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:47:09.257

尝试将它们转换为英文地址...使用结果中建议的地址而不是编码的俄罗斯地址..

# android - 当设备闲置一段时间时，如何触发我的应用程序重新打开？

> ID：15273378
> 
> 赞同：0
> 
> 时间：2013-03-07T14:12:29.320
> 
> 标签：android, android-intent

我有一个应用程序需要在不使用设备时重新打开，我搜索了互联网，但没有找到我要找的东西。

设备闲置 10 秒后，如何自动重新打开我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:49:34.173

一旦您的用户退出活动，唤醒锁定将不再有效。

如果我安装了一个应用程序，它在我退出并离开它后会自动唤醒它，我会卸载它。什么是你试图做的事情如此重要，以至于即使在他们离开你的应用程序之后，你也必须纠缠你的用户？描述场景——也许有一个替代方法可以让你的用户烦死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:19:53.480

也许您想使用 WAKE-LOCK，它可以防止屏幕在一段时间不使用后变黑。与其“重新打开”您的应用程序，不如简单地阻止它关闭。 [http://developer.android.com/reference/android/os/PowerManager.WakeLock.html](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)

# php - 如果（setChunkedStreamingMode）无法将文件从 android 发送到 php

> ID：15273380
> 
> 赞同：3
> 
> 时间：2013-03-07T14:12:31.257
> 
> 标签：php, android

尝试将大文件从 android 发送到 php，我可以发送小文件（最多 1 mp）我正在四处寻找解决方案，当我设置 connection.setconnection（1024）时出现“setChunkedStreamingMode”我无法发送任何文件，即使是小尺寸。获取 PHP 回显“无法上传文件！！！” 这是安卓代码

```
public static void main(String[] args) throws IOException, URISyntaxException {

    uploadFileToServer("path","http://"");
    downloadFileFromServer("path","http://"");
}

/**
 * This function upload the large file to server with other POST values.
 * @param filename
 * @param targetUrl
 * @return
 */
public static String uploadFileToServer(String filename, String targetUrl) {
    String response = "error";
    HttpURLConnection connection = null;
    DataOutputStream outputStream = null;

    String pathToOurFile = filename;
    String urlServer = targetUrl;
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";
    //String path = filename;
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1 * 1024;
    try {
        FileInputStream fileInputStream = new FileInputStream(new File(
                pathToOurFile));

        URL url = new URL(urlServer);
        connection = (HttpURLConnection) url.openConnection();

        // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);
        //connection.setChunkedStreamingMode(1024);
        // Enable POST method
        connection.setRequestMethod("POST");
        connection.setRequestProperty("uploaded_file", filename);
        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type",
                "multipart/form-data; boundary=" + boundary);

        outputStream = new DataOutputStream(connection.getOutputStream());
        outputStream.writeBytes(twoHyphens + boundary + lineEnd);

        String token = "anyvalye";
        outputStream.writeBytes("Content-Disposition: form-data; name=\"Token\"" + lineEnd);
        outputStream.writeBytes("Content-Type: text/plain;charset=UTF-8" + lineEnd);
        outputStream.writeBytes("Content-Length: " + token.length() + lineEnd);
        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(token + lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + lineEnd);

        String taskId = "anyvalue";
        outputStream.writeBytes("Content-Disposition: form-data; name=\"TaskID\"" + lineEnd);
        outputStream.writeBytes("Content-Type: text/plain;charset=UTF-8" + lineEnd);
        outputStream.writeBytes("Content-Length: " + taskId.length() + lineEnd);
        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(taskId + lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + lineEnd);

        String connstr = null;
       connstr = "Content-Disposition: form-data; name=\"uploaded_file\";filename=\""
                + pathToOurFile + "\"" + lineEnd;

        outputStream.writeBytes(connstr);
        outputStream.writeBytes(lineEnd);

        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // Read file
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        System.out.println("Image length " + bytesAvailable + "");
        try {
            while (bytesRead > 0) {
                try {
                    outputStream.write(buffer, 0, bufferSize);
                } catch (OutOfMemoryError e) {
                    e.printStackTrace();
                    response = "outofmemoryerror";
                    return response;
                }
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }
        } catch (Exception e) {
            e.printStackTrace();
            response = "error";
            return response;
        }
        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + twoHyphens
                + lineEnd);

        // Responses from the server (code and message)
        int serverResponseCode = connection.getResponseCode();
        String serverResponseMessage = connection.getResponseMessage();
        System.out.println("Server Response Code " + " " + serverResponseCode);
        System.out.println("Server Response Message "+ serverResponseMessage);

        if (serverResponseCode == 200) {
            response = "true";
        }else
        {
            response = "false";
        }

        fileInputStream.close();
        outputStream.flush();

        connection.getInputStream();
        //for android InputStream is = connection.getInputStream();
        java.io.InputStream is = connection.getInputStream();

        int ch;
        StringBuffer b = new StringBuffer();
        while( ( ch = is.read() ) != -1 ){
            b.append( (char)ch );
        }

        String responseString = b.toString();
        System.out.println("response string is" + responseString); //Here is the actual output

        outputStream.close();
        outputStream = null;

    } catch (Exception ex) {
        // Exception handling
        response = "error";
        System.out.println("Send file Exception" + ex.getMessage() + "");
        ex.printStackTrace();
    }
    return response;
}

/**
 * This function download the large files from the server
 * @param filename
 * @param urlString
 * @throws MalformedURLException
 * @throws IOException
 */
public static void downloadFileFromServer(String filename, String urlString) throws MalformedURLException, IOException
{
    BufferedInputStream in = null;
    FileOutputStream fout = null;
    try
    {
        URL url = new URL(urlString);

        in = new BufferedInputStream(url.openStream());
        fout = new FileOutputStream(filename);

        byte data[] = new byte[1024];
        int count;
        while ((count = in.read(data, 0, 1024)) != -1)
        {
            fout.write(data, 0, count);
            System.out.println(count);
        }
    }
    finally
    {
        if (in != null)
                in.close();
        if (fout != null)
                fout.close();
    }
    System.out.println("Done");
} 
```

}

这是PHP代码

> ```
> <?php
> $target_path = "uploads/";
> /* Add the original filename to our target path.
> Result is "uploads/filename.extension" */
> $target_path = $target_path . basename( $_FILES['uploaded_file']['name']);
> if(move_uploaded_file($_FILES['uploaded_file']['tmp_name'], $target_path)) {
>     echo "The first file ".  basename( $_FILES['uploaded_file']['name']).
>     " uploaded.";
> } else{
>     echo "cannot uploading the file!!!!  ";
>     echo "filename: " .  basename( $_FILES['uploaded_file']['name']);
>     echo "target_path: " .$target_path;
> }
> ?> 
> ```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-20T07:59:37.970

**使用这个 PHP 代码，它对我来说很好 **

```
public void uploadFile() {
String charset = "UTF-8";
File[] uploadFileArray = new File[mediaList.size()];

for (int i = 0; i < mediaList.size(); i++) {
    uploadFileArray[i] = new File(mediaList.get(i).getMediaPath());
}

try {
    MultipartUtility multipart = new MultipartUtility(upLoadServerUri, charset);

    for (int i = 0; i < mediaList.size(); i++) {
        if (isImage)) {
            multipart.addFilePart("image_doc[]", uploadFileArray[i]);
        } 
        else if (isVideo) {
            multipart.addFilePart("video_doc[]", uploadFileArray[i]);
        } 
        else if (isAudio) {
            multipart.addFilePart("audio_doc[]", uploadFileArray[i]);
        }
    }

    List<String> responseUploadDocument = multipart.finish();
    System.out.println("SERVER REPLIED:");

    for (String line : responseUploadDocument) {
        System.out.println(line);
        responseUploadDocumentString = line;
    }

    if (responseUploadDocumentString != null) {
        JSONObject jsonObj = new JSONObject(responseUploadDocumentString);
        statusUploadDoc = jsonObj.getString("status");
    }

} catch (Exception e) {
    e.printStackTrace();
} 
```

}

# ios - 在 iOS Objective-c (xcode) 中将 PPT 或 PPTX 转换为 PDF

> ID：15273381
> 
> 赞同：5
> 
> 时间：2013-03-07T14:12:37.663
> 
> 标签：ios, objective-c, xcode, pdf, powerpoint

我只想在 iOS Objective-C 应用程序中将 PPT 或 PPTX 文件转换为 PDF 文件。（iPhone 和 iPad 应用程序）

但我找不到任何直接的解决方案来做到这一点。

有什么方法可以将 powerpoint 文件转换为 PDF 文件吗？

不需要其他选项，只想转换它。（不是通过生成图像，因为分辨率问题）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-05T10:20:20.633

有一种方法可以分几个步骤来完成。

首先，您应该将您的 pptx 文件加载到 UIWebView 中。

```
// fileURL – URL of your pptx file
NSURLRequest* request = [NSURLRequest requestWithURL:fileURL];
webView = [[UIWebView alloc] initWithFrame:self.view.bounds];
webView.delegate = self;
[webView loadRequest:request]; 
```

当您的 webView 完成加载您的 webView 的获取内容时：

```
NSString *htmlContent = [webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"]; 
```

然后，您可以将您的 html 内容呈现为 PDF，而不会丢失质量。有一个[教程](https://www.appcoda.com/pdf-generation-ios/)描述了如何做到这一点。

# filter - Angular $filter 不更新 $resource 返回的数组上的变量

> ID：15273385
> 
> 赞同：0
> 
> 时间：2013-03-07T14:12:48.973
> 
> 标签：filter, angularjs, xmlhttprequest, angular-resource

假设我有一个 Angular ，它返回一个包含所有属性`$resource`的数组。我想**在 Javascript**中使用（**不在**模板中使用 Angular 的语法）来根据属性提取这些条目的子集。`entries``name``$filter` ****`{{ blah | filter:filter }}`****

 ****代码看起来像：

```
app.controller('AppController', function ($scope, Project, $filter) {
    $scope.entries = Project.query();
    $scope.entry = $filter('filter')($scope.entries, {name: 'Bar'});
    ...
} 
```

但是，正如此处的[jsFiddle](http://jsfiddle.net/mMRfV/5/)所示，该代码段不会按预期工作。`entry`当 XHR 完成时，无论`entries`异步填充什么，都将包含一个空数组。设置一个`$scope.$watch`也不起作用。

我想在填充数据`entry`时根据过滤器进行更新。`entries`我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:12:48.973

好的，当我进行更多实验并发现我可以通过为调用提供`success`回调来做到这一点时，我的问题已经基本完成`query()`：

```
app.controller('AppController', function ($scope, Project, $filter) {
    $scope.entries = Project.query({}, function() {
        $scope.entry = $filter('filter')($scope.entries, {name: 'Bar'});
    });
    ...
} 
```

请参阅[更新的 jsFiddle](http://jsfiddle.net/mMRfV/6/)。****

# .net - 带有 WCF 的漂亮格式的 json 响应

> ID：15273388
> 
> 赞同：3
> 
> 时间：2013-03-07T14:12:50.947
> 
> 标签：.net, wcf, web-services

我正在使用以 JSON 格式响应的 WCF RESTfull 服务，但默认情况下，WCF 服务发送格式不正确的 JSON 消息（我的意思是没有制表的 json 对象）。

默认情况下，WCF 会像这样发送 JSON：

```
{"ResponseBody":{"Code":"0011","InvocationTime":278,"Message":""},"ResponseInformation":{"ServiceCode":0,"ServiceMessage":"Successfull","ServiceInvocationTime":0}} 
```

但我需要这个：

```
{
"ResponseBody": {
    "Code": "0011",
    "InvocationTime": 278,
    "Message": ""
},
"ResponseInformation": {
    "ServiceCode": 0,
    "ServiceMessage": "Successfull",
    "ServiceInvocationTime": 0
} 
```

有人知道这个简单问题的解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:35:25.253

您可以使用[Json.NET](http://james.newtonking.com/projects/json-net.aspx)。添加对库的引用（也可作为 NuGet 包提供）并添加

```
using Newtonsoft.Json; 
```

到你的类文件。然后，执行以下操作：

```
var json = "{\"ResponseBody\":{\"Code\":\"0011\",\"InvocationTime\":278,\"Message\":\"\"},\"ResponseInformation\":{\"ServiceCode\":0,\"ServiceMessage\":\"Successfull\",\"ServiceInvocationTime\":0}}";
var formattedJson = JsonConvert.DeserializeObject(json).ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:21:33.917

通常 wcf 以 xml 格式响应。因此，如果您在 json 中指定该响应，它将以 jason 格式给出结果。以下示例为 xml 格式的请求和 json 格式的响应。

```
 [OperationContract]
    [WebInvoke(Method = "GET",
        RequestFormat = WebMessageFormat.Xml,
       ResponseFormat = WebMessageFormat.Json,
       BodyStyle = WebMessageBodyStyle.Bare,
       UriTemplate = "GetAllcustomer")]
   List< CustomerResponse> GetAllCustomerDetails(); 
```

# spring - javax.servlet.ServletException：无法在模型中找到要编组的对象

> ID：15273393
> 
> 赞同：0
> 
> 时间：2013-03-07T14:13:04.707
> 
> 标签：spring, spring-mvc, jaxb2, oxm

我环顾四周，但无法弄清楚我在尝试获取结果的 xml 视图时错过了什么。

以下是我得到的例外：

```
javax.servlet.ServletException: Unable to locate object to be marshalled in model: {movies=[com.wickedlynotsmart.imdb.model.Movie@1450f1f, com.wickedlynotsmart.imdb.model.Movie@ac622a, com.wickedlynotsmart.imdb.model.Movie@160c21a, com.wickedlynotsmart.imdb.model.Movie@1677737, com.wickedlynotsmart.imdb.model.Movie@1c3dc66]}
    at org.springframework.web.servlet.view.xml.MarshallingView.renderMergedOutputModel(MarshallingView.java:100)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    ...
    ... 
```

以下是处理请求时包含的文件：

**servlet 应用程序上下文文件**

```
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
            <value>com.wickedlynotsmart.imdb.model.Movie</value>
        </list>
    </property>
</bean>

<bean id="movies" class="org.springframework.web.servlet.view.xml.MarshallingView">
    <constructor-arg ref="jaxbMarshaller" />
</bean> 
```

**领域对象**

```
@Entity
@XmlRootElement
public class Movie implements Serializable {
    public Movie() {}
    //interesting stuff
} 
```

**控制器**

```
@RequestMapping("/movies")
public class MoviesController {
    private static final Log logger = LogFactory.getLog(MoviesController.class);

    @Autowired
    private MovieManagementService movieManagementService;

    @RequestMapping(method=RequestMethod.GET)
    public String findAllMovies(Model model) {
        List<Movie> movies = movieManagementService.getAllMovies();
        model.addAttribute("movies", movies);
        return "movies";
    }   
        //interesting stuff
} 
```

有人可以帮我解决我在这里可能缺少的东西吗？

谢谢。

**编辑**：我基本上是想查看 BeanNameViewResolver 的运行情况，我已经在配置文件中配置了 BeanNameViewResolver，如下所示：

```
<bean id="beanNameViewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver">
    <property name="order" value="2" />
    </bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:14:01.693

以下更改使事情正常进行：

**Movie 类的包装器，以使 JAXB 满意**

```
@XmlRootElement(name="movies")
public class MovieList {

    private List<Movie> movieList;

    public MovieList() {}
    public MovieList(List<Movie> movieList) {
        this.movieList = movieList;
    }

    @XmlElement(name="movie")
    public List<Movie> getMovieList() {
        return movieList;
    }
    public void setMovieList(List<Movie> movieList) {
        this.movieList = movieList;
    }

} 
```

**控制器**

```
@RequestMapping(method=RequestMethod.GET)
public String findAllMovies(Model model) throws MovieNotFoundException {
    List<Movie> movieList = movieManagementService.getAllMovies();
    MovieList movies = new MovieList(movieList);
    model.addAttribute("movies", movies);
    return "movies";
} 
```

**sevlet 应用程序上下文**

```
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
            <value>com.wickedlynotsmart.imdb.model.Movie</value>
            <value>com.wickedlynotsmart.imdb.model.MovieList</value>
        </list>
    </property>
</bean> 
```

# c# - IEnumerable的protobuf序列化

> ID：15273394
> 
> 赞同：6
> 
> 时间：2013-03-07T14:13:05.947
> 
> 标签：c#, protocol-buffers

```
[ProtoContract] 
class A
{
[ProtoMember(1)]
 public B bbb
{
 get;set; //getter & setter is here
} 
}

[ProtoContract]
public class B : IData
{
///???0
[ProtoMember(1)] 
public IEnumerable <IData> subData
{
get;set; //getter & setter is here
//the setter puts some data inn structure that in fact contains List<T> plus some simple int's
}

///????
public interface  IData: Iface1
{
 ///????
 IEnumerable<Iface3> data2 {get;}
  ///????
 IEnumerable<IData> subdata{get;}
} 
```

当我尝试序列化一个类对象时，我收到一个错误：“没有为类型定义序列化程序：System.Collections.Generic.IEnumerable`1 [IData, namespaceMy, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]

问题是 - 我如何序列化和反序列化该 IEnumerable？

将 IEnumerable 更改为 List<> 是一个坏主意（（该程序中的许多代码都在等待 IEnumerable 并引发大量错误。尽可能重复 - 在这种情况下，类型 T 不是接口

# objective-c - 未为托管对象上下文核心数据保存的数据

> ID：15273395
> 
> 赞同：0
> 
> 时间：2013-03-07T14:13:07.107
> 
> 标签：objective-c, core-data

我在我的应用程序委托（Apple 样板代码）中定义了一个托管对象上下文。

我正在尝试在关闭辅助窗口并使用以下代码时触发保​​存：

```
NSLog(@"close and save");
HEFTAppDelegate *appDelegate = (HEFTAppDelegate *)[[NSApplication sharedApplication] delegate];

NSError *error = nil;

if (![appDelegate.managedObjectContext commitEditing]) {
    NSLog(@"%@:%@ unable to commit editing before saving", [self class], NSStringFromSelector(_cmd));
}

if (![appDelegate.managedObjectContext save:&error]) {
    [[NSApplication sharedApplication] presentError:error];
} 
```

这似乎不会导致数据被保存。

我哪里错了？

# matlab - 正态分布的峰度

> ID：15273399
> 
> 赞同：5
> 
> 时间：2013-03-07T14:13:22.380
> 
> 标签：matlab, statistics, kurtosis

根据我从[这里](http://mathworld.wolfram.com/Kurtosis.html)读到的内容，正态分布的峰度应该在 3 左右。但是，当我使用 MATLAB 提供的峰度函数时，我无法验证它：

```
data1 = randn(1,20000);
v1 = kurtosis(data1) 
```

似乎正态分布的峰度约为 0。我想知道它有什么问题。谢谢！

**编辑** 我正在使用 MATLAB 2012b。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T14:14:35.843

如果它这样做了，这将强烈表明它正在计算[*过度*峰度](http://en.wikipedia.org/wiki/Kurtosis#Pearson_moments)，其定义为峰度减三。

但是，我的 MATLAB 实际上并没有这样做：

```
MATLAB>> data1 = randn(1,20000);
MATLAB>> kurtosis(data1)

ans =

    2.9825 
```

# python - 接口错误未知类型 对于 arg 10

> ID：15273400
> 
> 赞同：0
> 
> 时间：2013-03-07T14:13:24.800
> 
> 标签：python, django, google-app-engine, google-cloud-sql

我正在尝试从我的数据库中获取一些数据。这在我的本地机器上非常有效。但是当部署在 Google App Engine 上时，它给了我一个错误

> /report/unit/D8500/WV_herverkoop/2013/0/10/ arg 10 的未知类型 <class 'decimal.Decimal'> 处的 InterfaceError

**完整回溯**

```
 InterfaceError at /report/unit/D8500/WV_herverkoop/2013/0/10/
unknown type <class 'decimal.Decimal'> for arg 10
Request Method: GET
Request URL:    http://dw-services.appspot.com/report/unit/D8500/WV_herverkoop/2013/0/10/
Django Version: 1.4.3
Exception Type: InterfaceError
Exception Value:    
unknown type <class 'decimal.Decimal'> for arg 10
Exception Location: /python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms.py in _AddBindVariablesToRequest, line 427
Python Executable:  /python27_runtime/python27_dist/python
Python Version: 2.7.3
Python Path:    
['/base/data/home/apps/s~dw-services/2.365787501016750085',
 '/python27_runtime/python27_dist/lib/python27.zip',
 '/python27_runtime/python27_dist/lib/python2.7',
 '/python27_runtime/python27_dist/lib/python2.7/plat-linux2',
 '/python27_runtime/python27_dist/lib/python2.7/lib-tk',
 '/python27_runtime/python27_dist/lib/python2.7/lib-old',
 '/python27_runtime/python27_dist/lib/python2.7/lib-dynload',
 '/python27_runtime/python27_dist/lib/python2.7/site-packages',
 '/python27_runtime/python27_lib/versions/1',
 '/python27_runtime/python27_lib/versions/third_party/django-1.4',
 '/python27_runtime/python27_lib/versions/third_party/webapp2-2.3',
 '/python27_runtime/python27_lib/versions/third_party/webob-1.1.1',
 '/python27_runtime/python27_lib/versions/third_party/yaml-3.10',
 '/base/data/home/apps/s~dw-services/2.365787501016750085/..']
Server time:    don, 7 Mrt 2013 13:58:28 +0000
Traceback Switch to copy-and-paste view

/python27_runtime/python27_lib/versions/third_party/django-1.4/django/core/handlers/base.py in get_response
                        response = callback(request, *callback_args, **callback_kwargs) ...
▶ Local vars
/python27_runtime/python27_lib/versions/third_party/django-1.4/django/contrib/auth/decorators.py in _wrapped_view
                return view_func(request, *args, **kwargs) ...
▶ Local vars
/base/data/home/apps/s~dw-services/2.365787501016750085/dewaelereports/views/reportView.py in showReportPerOffice
        position = 0           # position in which we'll insert the region
        region_commission = 0  # commission earned in a region
        region_count = 0       # transactions in a region
        region_avg = 0         # average in a region
        counter = 0            # detect when it's the first zip in the region
        for zip in region.zips.all():
            results = zip.get_total_sales(office, start_week, end_week, year, unit_type) ...
            total_count += results[0][0]
            total_commission += results[0][1]
            region_count += results[0][0]
            region_commission += results[0][1]
            zipList.append((zip.zip_name, results[0], results[1]))
            if counter == 0:
▶ Local vars
/base/data/home/apps/s~dw-services/2.365787501016750085/dewaelereports/models.py in get_total_sales
        return [calculate_results(zip_transactions, unit), zip_transactions] ...
▼ Local vars
Variable    Value
office  
<Office: D8500>
transactions    
[<Transaction: k08071>, <Transaction: T8500-08157C>, <Transaction: D8500-11451>, <Transaction: D8500-12042H>, <Transaction: D8500-12143B>, <Transaction: T8500-09259>, <Transaction: T8500-10244a>, <Transaction: T8500-10277>, <Transaction: T8500-10277>, <Transaction: D8500-10345-A12>, <Transaction: T8500-10420>, <Transaction: T8500-10496>, <Transaction: T8500-11040H>, <Transaction: D8500-11048>, <Transaction: D8500-11650H>, <Transaction: D8500-11255B>, <Transaction: T8500-11325>, <Transaction: D8500-11343H>, <Transaction: T8500-11497>, <Transaction: D8500-11508B>, '...(remaining elements truncated)...']
start_week  
u'0'
self    
<Zip: 8500 - Kortrijk>
zip_transactions    
[<Office_per_transaction: 2460>, <Office_per_transaction: 2413>, <Office_per_transaction: 775>, <Office_per_transaction: 2477>, <Office_per_transaction: 2414>, <Office_per_transaction: 2485>]
unit    
<Unit_type: WV herverkoop>
year    
u'2013'
office_transactions 
[<Office_per_transaction: 196>, <Office_per_transaction: 1111>, <Office_per_transaction: 2460>, <Office_per_transaction: 2433>, <Office_per_transaction: 1105>, <Office_per_transaction: 1135>, <Office_per_transaction: 2413>, <Office_per_transaction: 775>, <Office_per_transaction: 3176>, <Office_per_transaction: 3444>, <Office_per_transaction: 2477>, <Office_per_transaction: 2414>, <Office_per_transaction: 1094>, <Office_per_transaction: 2485>]
end_week    
u'10'
/base/data/home/apps/s~dw-services/2.365787501016750085/dewaelereports/models.py in calculate_results
    if len(transaction_query) >= 1:
        sum = 0
        for tr in transaction_query:
            sum += tr.transaction.commission_fix_out * (tr.office_percentage / 100)
        if unit:
            if unit.min_quantity:
                count_transactions = len(transaction_query.filter(transaction__transaction_price_out__gt=str(unit.min_quantity))) ...
        if not unit or not unit.min_quantity:
            count_transactions = len(transaction_query)
        avg = sum / len(transaction_query)
▼ Local vars
Variable    Value
transaction_query   
[<Office_per_transaction: 2460>, <Office_per_transaction: 2413>, <Office_per_transaction: 775>, <Office_per_transaction: 2477>, <Office_per_transaction: 2414>, <Office_per_transaction: 2485>]
count_transactions  
0
sum 
Decimal('61313.0300')
tr  
<Office_per_transaction: 2485>
avg 
0
unit    
<Unit_type: WV herverkoop>
/python27_runtime/python27_lib/versions/third_party/django-1.4/django/db/models/query.py in __len__
                self._result_cache = list(self.iterator()) ...
▶ Local vars
/python27_runtime/python27_lib/versions/third_party/django-1.4/django/db/models/query.py in iterator
        for row in compiler.results_iter(): ...
▶ Local vars
/python27_runtime/python27_lib/versions/third_party/django-1.4/django/db/models/sql/compiler.py in results_iter
        for rows in self.execute_sql(MULTI): ...
▶ Local vars
/python27_runtime/python27_lib/versions/third_party/django-1.4/django/db/models/sql/compiler.py in execute_sql
        cursor.execute(sql, params) ...
▶ Local vars
/python27_runtime/python27_lib/versions/third_party/django-1.4/django/db/backends/util.py in execute
            return self.cursor.execute(sql, params) ...
▶ Local vars
/python27_runtime/python27_lib/versions/third_party/django-1.4/django/db/backends/mysql/base.py in execute
            return self.cursor.execute(query, args) ...
▶ Local vars
/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms.py in execute
    request = sql_pb2.ExecRequest()
    request.options.include_generated_keys = True
    if args is not None:
      if not hasattr(args, '__iter__'):
        args = [args]
      self._AddBindVariablesToRequest(
          statement, args, request.bind_variable.add) ...
    request.statement = _ConvertFormatToQmark(statement, args)
    self._DoExec(request)
    self._executed = request.statement
  def executemany(self, statement, seq_of_args):
    """Prepares and executes a database operation for given parameter sequences.
▼ Local vars
Variable    Value
self    
<google.storage.speckle.python.api.rdbms.Cursor object at 0xfc8c0b10>
args    
(1,
 0,
 10,
 '2013-01-01 00:00:00',
 '2013-12-31 23:59:59.99',
 'R',
 'S',
 13,
 2,
 1459,
 Decimal('75000'))
request 
<google.storage.speckle.proto.sql_pb2.ExecRequest object at 0xfc8a6458>
statement   
'SELECT `dewaelereports_office_per_transaction`.`id`, `dewaelereports_office_per_transaction`.`office_id`, `dewaelereports_office_per_transaction`.`transaction_id`, `dewaelereports_office_per_transaction`.`office_percentage` FROM `dewaelereports_office_per_transaction` INNER JOIN `dewaelereports_transaction` ON (`dewaelereports_office_per_transaction`.`transaction_id` = `dewaelereports_transaction`.`id`) WHERE (`dewaelereports_office_per_transaction`.`office_id` = %s  AND `dewaelereports_transaction`.`transaction_end_week` BETWEEN %s and %s AND `dewaelereports_transaction`.`transaction_end_date` BETWEEN %s and %s AND `dewaelereports_transaction`.`transaction_end_status` IN (%s, %s) AND `dewaelereports_office_per_transaction`.`transaction_id` IN (SELECT U0.`transaction_id` FROM `dewaelereports_transaction_status` U0 WHERE U0.`status` = %s ) AND `dewaelereports_transaction`.`unit_type_id` = %s  AND `dewaelereports_office_per_transaction`.`transaction_id` IN (SELECT U0.`id` FROM `dewaelereports_transaction` U0 INNER JOIN `dewaelereports_property` U1 ON (U0.`premises_id` = U1.`id`) WHERE U1.`property_zip_id` = %s ) AND `dewaelereports_transaction`.`transaction_price_out` > %s )'
/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms.py in _AddBindVariablesToRequest
          raise InterfaceError('unknown type %s for arg %d' % (type(arg), i)) ...
▼ Local vars
Variable    Value
direction   
1
i   
10
bind_variable_factory   
<bound method RepeatedCompositeFieldContainer.add of [<google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c14c8>, <google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c17a0>, <google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c1960>, <google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c1998>, <google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c1f10>, <google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c1dc0>, <google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c17d8>, <google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c1c70>, <google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c15a8>, <google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c1d50>, <google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c1ed8>]>
args    
(1,
 0,
 10,
 '2013-01-01 00:00:00',
 '2013-12-31 23:59:59.99',
 'R',
 'S',
 13,
 2,
 1459,
 Decimal('75000'))
bv  
<google.storage.speckle.proto.client_pb2.BindVariableProto object at 0xfc8c1ed8>
statement   
'SELECT `dewaelereports_office_per_transaction`.`id`, `dewaelereports_office_per_transaction`.`office_id`, `dewaelereports_office_per_transaction`.`transaction_id`, `dewaelereports_office_per_transaction`.`office_percentage` FROM `dewaelereports_office_per_transaction` INNER JOIN `dewaelereports_transaction` ON (`dewaelereports_office_per_transaction`.`transaction_id` = `dewaelereports_transaction`.`id`) WHERE (`dewaelereports_office_per_transaction`.`office_id` = %s  AND `dewaelereports_transaction`.`transaction_end_week` BETWEEN %s and %s AND `dewaelereports_transaction`.`transaction_end_date` BETWEEN %s and %s AND `dewaelereports_transaction`.`transaction_end_status` IN (%s, %s) AND `dewaelereports_office_per_transaction`.`transaction_id` IN (SELECT U0.`transaction_id` FROM `dewaelereports_transaction_status` U0 WHERE U0.`status` = %s ) AND `dewaelereports_transaction`.`unit_type_id` = %s  AND `dewaelereports_office_per_transaction`.`transaction_id` IN (SELECT U0.`id` FROM `dewaelereports_transaction` U0 INNER JOIN `dewaelereports_property` U1 ON (U0.`premises_id` = U1.`id`) WHERE U1.`property_zip_id` = %s ) AND `dewaelereports_transaction`.`transaction_price_out` > %s )'
arg 
Decimal('75000')
self    
<google.storage.speckle.python.api.rdbms.Cursor object at 0xfc8c0b10> 
```

显然它失败了，因为它说这`unit.min_quantity`是一个小数。但我没有在我的模型中将其声明为小数：

```
class Unit_type(models.Model):
    unit_name = models.CharField(max_length=145)
    department = models.ForeignKey(Department)
    min_quantity = models.IntegerField(blank=True, null=True)

    class Meta:
        verbose_name = 'unit type'

    def __unicode__(self):
        return self.unit_name 
```

当我填写语句并在 Google Cloud Sql 中手动执行时，它确实有效。有人可以帮我解决这个讨厌的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:19:58.553

Google Cloud SQL DBAPI 当前不支持该`decimal.Decimal`类型，但您可以将其修补为：

```
import decimal  
from google.storage.speckle.proto import jdbc_type

from google.storage.speckle.python.api import converters  
from google.storage.speckle.python.api import rdbms  
from google.storage.speckle.python.api import rdbms_googleapi

rdbms._PYTHON_TYPE_TO_JDBC_TYPE[decimal.Decimal] = jdbc_type.DECIMAL  
converters.conversions[decimal.Decimal] = converters.Any2Str  
converters.conversions[jdbc_type.DECIMAL] = decimal.Decimal 
```

[这里](https://code.google.com/p/googlecloudsql/issues/detail?id=62)记录了一个问题，谷歌代表提供了上面的补丁，并表示他们正在解决这个问题。

# integration - Maple 无法使用整数参数进行定积分

> ID：15273401
> 
> 赞同：1
> 
> 时间：2013-03-07T14:13:27.220
> 
> 标签：integration, maple

在 maple 中，我计算两个余弦函数乘积的（非常简单的）定积分：

```
restart;
f := n -> (x -> cos(n*x)):

assume(n1::integer);
assume(n2::integer);

int(f(n1)(x)*f(n2)(x),x=0..2*Pi); 
```

它（不幸地）返回

```
0 
```

但是它应该`Pi`用于`n1=n2`.

出奇

```
int(f(n1)(x)*f(n1)(x),x=0..2*Pi); 
```

给出正确的结果。我是在错误地使用枫树还是这是一个错误？如果它是一个错误，我该如何避免它？我将编写一个大型程序，它必须评估许多项，这些项都归结为这种类型的整数相关积分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:57:46.280

您可能想要修改您的期望（或您的假设）以涵盖另一个极端情况，因为如果`n1=n2=0`那么积分应该等于`2*Pi`.

```
restart:

int(cos(0*x)*cos(0*x),x=0..2*Pi);
                          2 Pi

int(cos(3*x)*cos(-3*x),x=0..2*Pi);

                           Pi

int(cos(2*x)*cos(2*x),x=0..2*Pi);

                           Pi

ans1 := int(cos(n1*x)*cos(n2*x),x=0..2*Pi,AllSolutions)
       assuming n1::integer, n2::integer;

      piecewise(n1 - n2 = 0, Pi, 0) + piecewise(n1 + n2 = 0, Pi, 0)

simplify(ans1) assuming n1::integer, n2::integer, n1=n2, n1=0;

                          2 Pi

simplify(ans1) assuming n1::integer, n2::integer, n1=n2, n1<>0;

                           Pi

simplify(ans1) assuming n1::integer, n2::integer, n1<>n2, n1<>-n2;

                           0 
```

您可能还想在`n1`和`n2`都是正整数的假设下考虑积分（它有一个更简单的条件结果，甚至可能是您的想法）。

```
ans2 := int(cos(n1*x)*cos(n2*x),x=0..2*Pi,AllSolutions)
       assuming n1::posint, n2::posint;

             piecewise(n1 - n2 = 0, Pi, 0)

simplify(ans2) assuming n1=n2;

                           Pi

simplify(ans2) assuming n1<>n2;

                           0 
```

# php - PHP检查开关内的无穷大

> ID：15273403
> 
> 赞同：0
> 
> 时间：2013-03-07T14:13:29.293
> 
> 标签：php, switch-statement, infinity

以下代码：

```
switch ($value) {
    case INF: $x = 'INF';
        break;
    case -INF: $x = '-INF';
        break;
    case NAN: $x = 'NaN';
        break;
    default: break;
} 
```

不像我预期的那样工作。我知道有像[is_infinite()](http://www.php.net/manual/en/function.is-infinite.php)这样的函数，但是我可以在 switch 语句中检查变量无穷大吗？

我的输入可以是任何简单的值（即不是数组也不是对象）。可以是整数、浮点数、字符串等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:18:40.897

> 我可以在 switch 语句中检查变量无穷大吗？

不，Switch 语句适用于常量，而不适用于表达式。

```
if (is_infinite($value) || is_nan($value)) {
  $x = (string)$value;
} 
```

它的代码行数也更少。

# angularjs - 角度指令定义中的“名称”？

> ID：15273404
> 
> 赞同：10
> 
> 时间：2013-03-07T14:13:29.587
> 
> 标签：angularjs, angularjs-directive

在这个关于指令的文档中：http: [//docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

> ### 指令定义对象
> 
> 指令定义对象向编译器提供指令。属性是：
> 
> **name** -**当前范围的名称**。可选，默认为注册时的名称。

我不明白为什么名称是当前范围的名称？注册时叫什么名字？如果我指定一个名称，如何使用它？

```
app.directive('aaa', function() {
   return {
      name: 'bbb',
      link: function() {
          // how and where to use the new name `bbb`
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-07T20:35:59.307

在对源代码进行了一些挖掘之后，我发现：这是一种声明单独属性以动态地将控制器分配给指令的方法。见[plunker](http://plnkr.co/edit/pXgrsc9mfC5VLyLGiKXM?p=preview)。

这个想法是有一种方法可以将控制器引用放在与指令名称不同的属性中。如果未指定 name 属性，则指令名称将用作属性。

```
var app = angular.module('angularjs-starter', []);

app.directive('myDirective', [ function() {
  return {
    name : 'myController',
    controller : '@',
    restrict : 'A',
    link : function(scope, elm, attr) {
      console.log('myDirective.link');
    }
  };
} ]);

app.directive('myDirective2', [ function() {
  return {
    controller : '@',
    restrict : 'A',
    link : function(scope, elm, attr) {
      console.log('myDirective2.link');
    }
  };
} ]);

app.controller('MyDirectiveController', [ '$scope', function($scope) {
  console.log('MyDirectiveController.init');
} ]);

app.controller('MyDirectiveController2', [ '$scope', function($scope) {
  console.log('MyDirectiveController2.init');
} ]);

app.controller('MyDirective2Controller', [ '$scope', function($scope) {
  console.log('MyDirective2Controller.init');
} ]); 
```

模板：

```
<h1 my-directive my-controller="MyDirectiveController">My Directive Controller</h1>
<h1 my-directive my-controller="MyDirectiveController2">My Directive Controller 2</h1>
<h1 my-directive2="MyDirective2Controller">My Directive 2 Controller</h1> 
```

输出：

```
MyDirectiveController.init
myDirective.link
MyDirectiveController2.init
myDirective.link
MyDirective2Controller.init
myDirective2.link 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-11T11:29:02.343

您可以更改指令控制器的名称，因此如果您想要来自另一个指令的控制器，则使用新名称。这由`ngForm`您必须输入的指令使用，`require:'form'`而不是`require:ngForm`.

# ios - ios在不支持ac3的情况下编译ffmpeg

> ID：15273418
> 
> 赞同：-1
> 
> 时间：2013-03-07T14:14:17.953
> 
> 标签：ios, video, ffmpeg, compilation

我正在为 iOS 设备制作视频播放器。我使用 ffmpeg 库来播放视频文件。我看到 App Store 中其他支持 AC3 声音的视频播放器存在的问题。

我希望我的视频播放器不支持 AC3 声音。我正在编译脚本 ffmpeg 库中寻找参数，例如 a `--enable-gpl`and `--enable-nonfree`，但不起作用。

ffmpeg库的license看了好几遍，觉得不是很懂。

有人可以解释如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T23:16:39.317

只需添加`--disable-decoder=ac3`到 ffmeg 配置参数。

# asp.net - Mono HttpResponse.TransmitFile 发送损坏的数据

> ID：15273422
> 
> 赞同：0
> 
> 时间：2013-03-07T14:14:28.230
> 
> 标签：asp.net, mono

我在 Mono/linux 下的 HttpResponse.TransmitFile 遇到了一些问题。此代码有效：

```
using (var f = System.IO.File.Open(FileName, System.IO.FileMode.Open, FileAccess.Read))
{
    f.CopyTo(response.OutputStream);
} 
```

因为这没有：（虽然它在 Windows 上）

```
response.TransmitFile(FileName); 
```

虽然在这两种情况下我都得到了一些数据，但差异是极端的。这是数据的开始，因为它应该是：

```
8950 4e47 0d0a 1a0a 0000 000d 4948 4452
0000 04b0 0000 00a0 0806 0000 001c b895
4700 0000 0473 4249 5408 0808 087c 0864
8800 0000 0970 4859 7300 001b af00 001b
af01 5e1a 911c 0000 0019 7445 5874 536f
6674 7761 7265 0077 7777 2e69 6e6b 7363
6170 652e 6f72 679b ee3c 1a00 0020 0049
4441 5478 9cec bd79 7454 c799 37fc bbbd
492d b5f6 7d97 90d8 1108 3060 b3d8 98dd
3660 6ce2 78c1 d8ce 624f 66be 64f2 bd99
9ce4 cb99 c9c9 36f1 c439 4eec c964 9cc5
9937 f19b 38c9 6499 378e 63c7 3678 5f00
6302 189b cd6c 0281 d086 d46a f5be dcef
0f51 5777 a9ba b76e 770b 845d bf73 38b4
... (109270 bytes total) 
```

但这就是我得到的：

```
3161 6164 360d 0a89 504e 470d 0a1a 0a00
0000 0d49 4844 5200 0004 b000 0000 a008
0600 0000 1cb8 9547 0000 0004 7342 4954
0808 0808 7c08 6488 0000 0009 7048 5973
0000 1baf 0000 1baf 015e 1a91 1c00 0000
1974 4558 7453 6f66 7477 6172 6500 7777
772e 696e 6b73 6361 7065 2e6f 7267 9bee
3c1a 0000 2000 4944 4154 789c ecbd 7974
54c7 9937 fcbb bd49 2db5 f67d 9790 d811
0830 60b3 d898 dd36 606c e278 c1d8 ce62
4f66 be64 f2bd 999c e4cb 99c9 c936 f1c4
394e ecc9 649c c599 37f1 9b38 c964 9937
8e63 c736 785f 0063 0218 9bcd 6c02 81d0
86d4 6af5 bedc ef0f 5157 77a9 bab7 6e77
... (109286 bytes total) 
```

它看起来像是某种编码问题，但我不知道它可能是什么或如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:42:15.033

它以 开头`3161 6164 360d 0a`，这是一个十六进制数字（`0x1aad6`或`109270`十进制数字，即文件的大小），后跟一个 CRLF。对我来说看起来像是分块编码。

您的 HTTP 标头还应包含`Transfer-Encoding: chunked`.

这没什么好担心的，服务器会得到正确的数据。

# javascript - 没有使用按钮 onclick 函数调用 AJAX 函数

> ID：15273428
> 
> 赞同：0
> 
> 时间：2013-03-07T14:14:40.397
> 
> 标签：javascript, html, ajax, servlets

我有一个带有 2 个输入字段和一个按钮的简单表单。单击按钮时，应将 2 个输入字段的值发送到 AJAX 函数以在 servlet 中处理。由于某种原因，无法访问 servlet。谁能明白为什么？我有一种几乎相同的方法来处理不同的表单，我不明白为什么这个方法不起作用。

这是 HTML 表单代码：

```
 <div id="addCourses" class="hidden" align="center" >
        <form id="addCourse" name="addCourse">
        <input type="text" id="courseID" name="courseID" value="courseID" size="40" /><br />
        <textarea rows="5" cols="33" id="courseDesc" name="courseDesc">Description</textarea><br />
        <input type="button" value="Add Course" onclick="addCourse(this.courseID.value, this.courseDesc.value);"/>
        </form>
    </div> 
```

这是脚本功能：

```
<script type ="text/javascript">
function addCourse(id, descr)
{
   var fluffy;
   fluffy=new XMLHttpRequest();
   fluffy.onreadystatechange=function()
   {
      if (fluffy.readyState==4 && fluffy.status==200)
      {   
      //do something here
      }  
   };

  fluffy.open("GET","ajaxServlet?courseID="+id+"&courseDescription="+descr,true);
  fluffy.send();
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:17:23.103

因为`this`是按钮而不是表单

所以

```
this.courseID.value
this.courseDesc.value 
```

返回错误。

你应该使用

```
this.form.courseID.value
this.form.courseDesc.value 
```

第二个问题是你有一个名字冲突。表单和函数被命名为 addCourse。这会导致问题。将其中一个重命名为不同。

[运行示例](http://jsfiddle.net/sz8A5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:17:59.390

当您使用`this`, as in 时`onclick="addCourse(this.courseID.value, this.courseDesc.value);"`，我认为这将引用`input`元素，因此未正确传递值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:23:40.463

在 javascript 中绑定事件处理程序，它们应该在哪里，你可以完全避免这个问题。

HTML：

```
<input type="text" id="courseID" name="courseID" value="courseID" size="40" /><br />
<textarea rows="5" cols="33" id="courseDesc" name="courseDesc">Description</textarea><br />
<input type="button" id="addCourse" value="Add Course"/> 
```

JS：

```
document.getElementById('addCourse').onclick = function () {
    var fluffy = new XMLHttpRequest();
    var id = document.getElementById('courseID').value;
    var descr = document.getElementById('courseDesc').value;

    fluffy.onreadystatechange=function() {
        if (fluffy.readyState==4 && fluffy.status==200) {   
            //do something here
        }  
    };

    fluffy.open("GET","ajaxServlet?courseID="+id+"&courseDescription="+descr,true);
    fluffy.send();
}; 
```

正如 epascarello 指出的那样，您需要更改表单的 ID，因为不允许有两个具有相同 ID 的元素，这会导致不可预测的 javascript 行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:15:29.850

试试fluffy.close；在 if 就绪状态表达式之后。

# c# - 如何检查图像的 URL 路径

> ID：15273430
> 
> 赞同：0
> 
> 时间：2013-03-07T14:14:41.253
> 
> 标签：c#, asp.net-mvc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:20:48.990

如果这些图像不在您的项目文件夹中，您可能需要创建一个虚拟文件夹（例如 myImages）然后访问图像。

```
@Url.Content("~/myImages/imgName.ext") 
```

否则你可以使用

```
@Url.Content("~/path_relative_to_main_folder/imgName.ext") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:21:55.267

永远不要使用确切的位置。它会让你头疼。相反，将文件夹放在站点目录中的某个位置，然后使用相对路径引用它。例如：

```
<img src="@Url.Content("~/Images/ABC.png")" /> 
```

这意味着它正在您项目的根目录中查找 Images 文件夹。

# listview - jquery mobile listview：如何为个人动态设置主题 的

> ID：15273431
> 
> 赞同：2
> 
> 时间：2013-03-07T14:14:47.853
> 
> 标签：listview, jquery-mobile, themes

我正在使用 jqm 1.3 Listview，并且成功捕获了 onClick。

```
 function handle_onClick( )
    { jQuery( "#my_panel li" )
        .each( function( )
             { jQuery( this ).attr( 'data-theme' , "a" ).trigger('refresh') ;
             }) ;
   } 
```

见[小提琴](http://jsfiddle.net/kC3bD/) （**编辑：** [更新的小提琴](http://jsfiddle.net/kC3bD/3/)）

但是`<li>`'s 的数据主题没有被更新。

在实践中，我`<li>`的 's**不会**使用相同的主题。

有没有办法以编程方式单独更改它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:51:48.073

关键是：

*   删除 ui-btn-up-### 和 ui-btn-hover-### 类，使用正则表达式从 jqm 创建的长类字符串中挑选它们，
*   然后添加类（ui-btn-up-NEW_THEME），
*   然后更新数据主题

见[小提琴](http://jsfiddle.net/kC3bD/10/)：

```
function handle_onClick( argoj_element , args_language_id )
  { 
    jQuery( "#my_panel li" )
      .each( function( )
        { var lvb_active = ( jQuery( this ).attr( 'data-lang_id' ) == args_language_id ) ;

          var lvs_theme_default = 'a' ; 
          var lvs_theme_active  = 'e' ;  
          var lvs_theme         = lvb_active ? lvs_theme_active : lvs_theme_default  ;

          var lvs_current_class  = jQuery( this ).attr('class')                   ;
          var lvs_removes        = lvs_current_class.match(/ui-btn-up-\w+/gi ).join( " " ) ;
              lvs_removes       += " "  ;
              lvs_removes       += (lvs_current_class.match(/ui-btn-hover-\w+/gi )||[]).join( " " ) ;
          var lvs_adds           = "ui-btn-up-" + lvs_theme ;

          jQuery( this ).removeClass( lvs_removes )  
                        .addClass   (  lvs_adds   ) 
                         .attr( 'data-theme' , lvs_theme ) ;  
         }) ;             
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:25:11.163

这是一个工作示例：http: [//jsfiddle.net/Gajotres/YNYnU/](http://jsfiddle.net/Gajotres/YNYnU/)

```
$('#my_panel li' ).on( 'click' ,  function( argo_e ) { 
    $(this).attr('data-theme','d');
}); 
```

您使用错误的功能来增强列表视图标记。在这种情况下，我们不需要增强列表视图标记，将 data-theme 属性设置为正确的 li 元素就足够了。

另请查看我关于此主题的其他答案/文章：[https](https://stackoverflow.com/a/14550417/1848600) ://stackoverflow.com/a/14550417/1848600 。每个 jQuery Mobile 组件都有一个用于增强其标记的独特功能，并且每一个都在该文章中列出。

这是我修复的代码示例：http: [//jsfiddle.net/Gajotres/AeBuV/](http://jsfiddle.net/Gajotres/AeBuV/)

# mysql - MySQL 中的连接不起作用

> ID：15273432
> 
> 赞同：1
> 
> 时间：2013-03-07T14:14:48.277
> 
> 标签：mysql

我是 MySQL 的初学者，并试图在 MySQL 中创建连接查询。

我的第一个 SQL 查询如下所示，它显示了 2 列投票和发布

```
SELECT votes, post 
FROM `wp_votes` where votes!=''
GROUP BY votes,post asc LIMIT 0 , 30 
```

**第二张表是帖子所在的位置**

```
SELECT *
FROM `wp_posts`
LIMIT 0 , 30 
```

我想做的是创建一个连接，以便它显示 wp_posts 表 WHERE wp_post.ID=wp_votes.post 中的所有记录，还必须检查 wp_votes.votes!=''

我尝试了以下但我坚持下去

```
SELECT * FROM wp_posts join wp_votes ON wp_posts.ID =wp_votes.post 
```

下面的表结构

```
CREATE TABLE IF NOT EXISTS `wp_posts` (
  `ID` bigint(20) unsigned NOT NULL auto_increment,
  `post_author` bigint(20) unsigned NOT NULL default '0',
  `post_date` datetime NOT NULL default '0000-00-00 00:00:00',
  `post_date_gmt` datetime NOT NULL default '0000-00-00 00:00:00',
  `post_content` longtext NOT NULL,
  `post_title` text NOT NULL,
  `post_excerpt` text NOT NULL,
  `post_status` varchar(20) NOT NULL default 'publish',
  `comment_status` varchar(20) NOT NULL default 'open',
  `ping_status` varchar(20) NOT NULL default 'open',
  `post_password` varchar(20) NOT NULL default '',
  `post_name` varchar(200) NOT NULL default '',
  `to_ping` text NOT NULL,
  `pinged` text NOT NULL,
  `post_modified` datetime NOT NULL default '0000-00-00 00:00:00',
  `post_modified_gmt` datetime NOT NULL default '0000-00-00 00:00:00',
  `post_content_filtered` longtext NOT NULL,
  `post_parent` bigint(20) unsigned NOT NULL default '0',
  `guid` varchar(255) NOT NULL default '',
  `menu_order` int(11) NOT NULL default '0',
  `post_type` varchar(20) NOT NULL default 'post',
  `post_mime_type` varchar(100) NOT NULL default '',
  `comment_count` bigint(20) NOT NULL default '0',
  PRIMARY KEY  (`ID`),
  KEY `post_name` (`post_name`),
  KEY `type_status_date` (`post_type`,`post_status`,`post_date`,`ID`),
  KEY `post_parent` (`post_parent`),
  KEY `post_author` (`post_author`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4570 ;

--
-- Table structure for table `wp_votes`
--

CREATE TABLE IF NOT EXISTS `wp_votes` (
  `ID` int(11) NOT NULL auto_increment,
  `post` int(11) NOT NULL,
  `votes` text NOT NULL,
  `guests` text NOT NULL,
  `usersinks` text NOT NULL,
  `guestsinks` text NOT NULL,
  PRIMARY KEY  (`ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1052 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:02:40.017

```
SELECT  a.votes, a.post, 
        b.*
FROM    wp_votes a
        INNER JOIN wp_Post b
            ON a.post = b.ID
WHERE   a.votes <> '' 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# project-management - 如何为多个任务和未知开发人员进行基于证据的调度 (EBS)？

> ID：15273434
> 
> 赞同：2
> 
> 时间：2013-03-07T14:14:51.963
> 
> 标签：project-management, estimation, fogbugz

我试图了解FogBugz 中使用的*基于证据的调度*(EBS) 方法，并且我已经多次阅读[基于证据的调度](http://www.joelonsoftware.com/items/2007/10/26.html)。

我所理解的是一般的想法，为什么使用蒙特卡洛，等等......

而且我还可以通过使用过去故事的因子来计算估计的外推。到现在为止还挺好。

### 问题 1

我的问题是：如何计算多个故事的概率分布？即，我想知道五个故事什么时候完成。

我可以把 10% 的值、20% 的值、...，最后是 100% 的值加起来吗？

举个例子：

*   我知道故事 1 估计为 4 小时，它的概率分布告诉我 0% 是 3 小时，25% 是 4 小时，50% 是 4 小时，75% 是 5 小时，100% 是 9 小时。
*   我知道故事 2 估计为 6 小时，它的概率分布告诉我 0% 是 4 小时，25% 是 6 小时，50% 是 6 小时，75% 是 7 小时，100% 是 13 小时。

如果我现在想知道故事 1 和 2 的概率分布，我可以将它们相加，所以我得到：

*   0%：7 小时
*   25%：10 小时
*   50%：10 小时
*   75%：12 小时
*   100%：22 小时

这就是我需要做的一切吗？还是更复杂的事情？

### 问题2

我的另一个问题是当涉及的用户多于用户时，如何计算多个任务的结束时间，*但我事先不知道哪个用户将处理什么故事*。只要我知道那个作业，就很容易：计算每个用户的故事总和，然后将最近的一个作为总时间（如果一个在 3 周后完成，另一个在 5 周后完成，则整个项目将需要 5 周）。

但是，如果我事先不知道，并且不是每个用户都能处理每个故事怎么办？例如，我已将*能力*放在故事中，例如*前端*、*后端*……并且我已将能力分配给我的用户，因此可能会有前端开发人员、后端开发人员……和很快。

当然，有些故事可能需要多种能力，而这反过来又需要多个用户的工作。但是他们将从事不同的工作，并且需要不同的时间来完成他们的任务。这又取决于概率分布：如果一个人*跑过*，他可能会比没有跑过的人更早完成。这可能会影响他接下来的工作，他可以​​帮助谁，等等......

知道我如何计算这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:02:26.147

1.

您可能不会将概率分布中相应级别的值相加。这将毫无根据地假设任务完成时间之间存在完美的相关性。这是您可以做的事情。

在最坏的情况下，完成两项任务的时间是完成每项任务的时间之和。到现在为止还挺好。软件开发中的最坏情况估计可能很好。我认为将时间加起来通常不会引起问题。

现在我们需要考虑这两个任务的时间是否由相互独立的概率分布控制。也就是说，当我们知道一项任务多久完成时，这是否告诉我们另一项任务完成的时间？如果我们不知道，我们能否做出适当安全的假设？

当然，这取决于不正确估计的成本，但假设分布确实是独立的可能足够安全。这样，至少完成一项任务*通常*不会给我们对另一项任务的错误希望。所以答案是，如果一个任务被分析成 M 个结果，每个结果都有自己的概率，而另一个任务被分析成 N 个结果，每个结果都有自己的概率，我们可以形成 M*N 个结果并分配给 (i,j ) 结果是第一个任务的第 i 个结果的概率（密度）与第二个任务的第 j 个结果的概率（密度）的乘积。

我将修改您的示例，因为抱歉，我不明白。假设第一个任务有这个分布，其中 X 是 0% 到 100% 之间的均匀分布的连续随机变量：

```
3 hours, if       X <= 20% (with probability density 20%);
4 hours, if 20% < X <= 60% (with probability density 40%);
5 hours, if 60% < X <= 80% (with probability density 20%);
9 hours, if 80% < X        (with probability density 20%). 
```

第二个任务有这个分布，其中 Y 是一个在 0% 到 100% 之间均匀分布的连续随机变量，与 X 无关：

```
 4 hours, if       Y <= 20% (with probability density 20%);
 6 hours, if 20% < Y <= 60% (with probability density 40%);
 7 hours, if 60% < Y <= 80% (with probability density 20%);
13 hours, if 80% < Y        (with probability density 20%).

Now we calculate as follows:

               4@20%   6@ 40%   7@20%   13@20%
              ------ -------- ------- --------
     3@20% | 3+4@ 4% 3+6@  8% 3+7@ 4% 3+13@ 4%
     4@40% | 4+4@ 8% 4+6@ 16% 4+7@ 8% 4+13@ 8%
     5@20% | 5+4@ 4% 5+6@  8% 5+7@ 4% 5+13@ 4%
     9@20% | 9+4@ 4% 9+6@  8% 9+7@ 4% 9+13@ 4% 
```

所以这里是两个任务时间总和的概率分布和密度，其中 Z 是从 0% 到 100% 的均匀分布的连续随机变量：

```
 7 hours, if       Z <=  4% (with probability density  4%);
      8 hours, if  4% < Z <= 12% (with probability density  8%);
      9 hours, if 12% < Z <= 24% (with probability density 12%);
     10 hours, if 24% < Z <= 44% (with probability density 20%);
     11 hours, if 44% < Z <= 60% (with probability density 16%);
     12 hours, if 60% < Z <= 64% (with probability density  4%);
     13 hours, if 64% < Z <= 68% (with probability density  4%);
     15 hours, if 68% < Z <= 76% (with probability density  8%);
     16 hours, if 76% < Z <= 84% (with probability density  8%);
     17 hours, if 84% < Z <= 92% (with probability density  8%);
     18 hours, if 92% < Z <= 96% (with probability density  4%);
     22 hours, if 96% < Z        (with probability density  4%). 
```

所有这些可能很乏味，但它是合乎逻辑的，并且不难自动化。

2.

你是对的，有一个分散的场景。粗略地说，它始于最初的确定性，即在世界存在之前，没有人做过任何事情！在那之后，在您对问题 1 进行自动化处理之后，您可以在分析中采用各种策略。也许你的想象力和我的一样好。无论如何，这是我可以建议的。

您可以交互式地探索假设场景。

您可以尝试计算和汇总可能发生的所有事情。正如我们所看到的，这种分析对于小案例是可能的。正如我们可以想象的那样，在大型情况下它会变得棘手，例如可能构建一个飞行导航系统。

您可以分析最可能的情况，并可能在此范围内进行有限程度的变化。

您很可能会对控制风险感兴趣。因此，您可以根据自己的需要和方便考虑分析以下一项或多项，所有这些都与其他情况有所不同：不可接受的结果的可能性，或存在不可接受的不确定性程度的可能性，或估计存在多少不确定性，或对预期结果的估计（即，如果一个人面对同样情况不断重复的平均结果）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:06:05.827

如果没有谷歌搜索问题，我猜“未知的开发人员能力”可能会将问题推入 NP-hard 优化问题箱。有几个算法可以看模拟退火和遗传算法（模拟退火用于 Wintek 的电子 CAD 自动放置程序（我在开发团队中））。

# security - 针对特定 IP 阻止 Tomcat 6 上的特定页面

> ID：15273438
> 
> 赞同：2
> 
> 时间：2013-03-07T14:15:04.763
> 
> 标签：security, tomcat, tomcat6

`https://<ip-address>:<port>/resource/t.jsp`我只需要为来自 Tomcat 6 上特定 IP 地址的请求授予访问特定页面（如）的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:19:50.677

我认为您可以在您的 context.xml 中执行以下操作（例如，对于 10.10.10.* 上的 /manager）：

```
<Context path="/manager"
 docBase="/usr/share/tomcat6-admin/manager"
 antiResourceLocking="false" privileged="true">
 <Valve className="org.apache.catalina.valves.RemoteAddrValve"
    allow="10\.10\.10\..*"/>
</Context> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:21:27.173

如果这样做的安全性很重要，请不要尝试仅使用 Tomcat 来执行此操作。将服务器置于防火墙（如 PF）后面，您可以将其配置为根据 IP 地址阻止或允许请求。您可以根据需要制定具体的规则（例如仅允许来自特定源 IP 的端口 80 的请求等）。

# ruby - 允许重新定义 Ruby 常量并允许通过 send() 方法访问私有方法背后的基本原理？

> ID：15273446
> 
> 赞同：0
> 
> 时间：2013-03-07T14:15:21.010
> 
> 标签：ruby, constants, private-methods

当我们尝试重新定义一个常量时，Ruby 只显示一个警告，而不是任何错误。所以总是可以在 Ruby 中重新定义一个常量？

也可以使用 send 方法调用类的私有方法：

```
Const = 12
puts Const
#only an warning: already initialized constant Const
Const = 14
puts Const #Displays 14
class MyClass
private
    def priv
        puts 'In private method'
    end
end
obj = MyClass.new
#Error: private method `priv' called for #<MyClass:0x7f2cfda21738> (NoMethodError)
#obj.priv
#but this is fine!
obj.send(:priv) 
```

Ruby 中的这种设计背后有什么理由吗？这些不分别违反常量和访问说明符的基本思想吗？

这些设计有什么真正的、实际的用途吗？如果有的话，一些例子会很棒！

**注意：**我确实在这里看到了很多关于 Ruby 的常量和私有方法的问题/讨论，但我没有找到任何与这些背后的原因相关的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:39:26.650

至于`send`，答案很简单：一旦你使用反射，所有的赌注都没有了。请注意，这与大多数其他语言没有什么不同，例如，您还可以使用反射规避 Java 中的访问限制。

对于常量，你*确实*会收到警告。你*确实*被告知你正在做一些你不应该做的事情。但是 Ruby 是一种相信你知道你在做什么的语言。它不会妨碍你。如果你想在脚上开枪，你应该被允许这样做。或者，用一种更愤世嫉俗的方式来看待它：在 Ruby 中有很多邪恶的事情可以做，重新定义常量真的没那么重要。

# java - Java for 循环在条件满足后继续执行

> ID：15273447
> 
> 赞同：2
> 
> 时间：2013-03-07T14:15:24.893
> 
> 标签：java

我正在运行这段代码，循环似乎没有在指定的条件下停止。

```
for(double i=1.0; i!=2.0; i+=0.2){
    System.out.println("The value of i :" +i);
} 
```

这是Java中表示双数的方式的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T14:17:07.650

这是一个相当普遍的问题：`0.2`不能在 a 中精确表示`double`，因此`2.0`不等于十`0.2`加起来的总和。您需要使用`<`而不是`!=`停止循环。

请注意，您的循环将适用于等于 2 的负幂的增量，例如`0.25`：下面的循环工作正常，并按预期停止：

```
for(double i=1.0; i!=2.0; i+=0.25){
    System.out.println("The value of i :" +i);
} 
```

这是可行的，因为`0.25`可以在`double`. `double`这个小实验表明，在比较s 是否相等时，您需要格外小心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:18:00.363

是的，就是这样 - 0.2 不能精确地表示为双精度数。要查看确切的值，您可以运行以下程序：

```
public static void main(String[] args) {
    for (double i = 1.0; i != 2.0 && i < 3.0; i += 0.2) {
        System.out.println("The value of i :" + new BigDecimal(i));
    }
} 
```

打印：

```
The value of i :1
The value of i :1.1999999999999999555910790149937383830547332763671875
The value of i :1.399999999999999911182158029987476766109466552734375
The value of i :1.5999999999999998667732370449812151491641998291015625
The value of i :1.79999999999999982236431605997495353221893310546875
The value of i :1.9999999999999997779553950749686919152736663818359375
The value of i :2.199999999999999733546474089962430298328399658203125
The value of i :2.399999999999999911182158029987476766109466552734375
The value of i :2.600000000000000088817841970012523233890533447265625
The value of i :2.800000000000000266453525910037569701671600341796875 
```

您的选择：

*   四舍五入
*   使用`i < 2.0`条件（但您可能会错过一次迭代，具体取决于舍入）
*   使用 a`BigDecimal`精确表示 0.2

# java - System.in.read 实际上返回什么？

> ID：15273449
> 
> 赞同：5
> 
> 时间：2013-03-07T14:15:27.980
> 
> 标签：java, java-io

有什么作用：

```
System.in.read() 
```

返回 ？[文档](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28%29) 说：

***返回： 数据的下一个字节，如果到达流的末尾，则返回 -1。***

但例如，如果我输入：`10`我回来了`49`。这是为什么 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T14:18:17.117

`49`是 char 的 ASCII 值`1`。它是第一个字节的值。

当您在控制台或终端上输入时产生的字节*流*`1``0``Enter`包含三个字节`{49,48,10}`（在我的 Mac 上，可能以 10,12 或 12 而不是 10 结尾，具体取决于您的系统）。

所以简单片段的输出

```
int b = System.in.read();
while (b != -1) {
    System.out.println(b);
    b = System.in.read();
} 
```

输入 10 并按 Enter 后，是（在我的机器上）

```
49
48
10 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T14:18:34.510

`System.in.read()`只读取**一个字节**。

*49*是*1的***Unicode**点值。

 *尝试打印：

`System.out.println((char)49);`

这将帮助您更多地了解它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T14:18:33.010

当您输入`10`时，它不是作为整数读取，而是作为字符串读取，或者更准确地说，是字节数组。

49 是字符的 ASCII 码`1`。*

# google-plus - Google+ 登录按钮自定义图片

> ID：15273451
> 
> 赞同：3
> 
> 时间：2013-03-07T14:15:39.643
> 
> 标签：google-plus

我已经使用 Google 的教程实现了登录，但该按钮并不真正适合我正在使用它的网站的设计。我想使用我的平面设计师制作的图像。目前是否可以为登录按钮使用自定义图像？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-08T02:04:40.383

您可以使用[gapi.signin.render](https://developers.google.com/+/web/signin/#javascript_api)将指定的容器呈现为登录按钮。例如，如果在您的 HTML 代码中，您有：

`<button id="mySignIn">SignIn</button>`

Javascript 调用将类似于：

```
gapi.signin.render("mySignIn", { 
  'callback': signinCallback, 
  'clientid': 'CLIENT_ID', 
  'cookiepolicy': 'single_host_origin', 
  'requestvisibleactions': 'http://schemas.google.com/AddActivity',
  'scope': 'https://www.googleapis.com/auth/plus.login'
}); 
```

另外，请记住遵循[品牌指南](https://developers.google.com/+/branding-guidelines)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-07T14:24:50.867

以下代码用于将登录按钮添加到页面对吗？

```
<span id="signinButton">  
   <span 
      class="g-signin" 
      data-callback="signinCallback" 
      data-clientid="CLIENT_ID" 
      data-cookiepolicy="single_host_origin" 
      data-requestvisibleactions="http://schemas.google.com/AddActivity" 
      data-scope="https://www.googleapis.com/auth/plus.login">  
   </span>
</span> 
```

您是否尝试过简单地将“g-signin”类替换为您自己的类？

如果 google 自己需要 g-signin，要确定哪个是实际的登录按钮，您总是可以为其添加一个子类。

```
<span class="g-signin custom" ...></span> 
```

在您的 CSS 中，这将显示为：

```
.g-signin .custom {
/*properties*/
} 
```

# jquery - 使用 jQuery 进行简单切换

> ID：15273456
> 
> 赞同：-2
> 
> 时间：2013-03-07T14:15:50.287
> 
> 标签：jquery, toggle

我有两个`li`要在悬停时切换的 s，它很简单，但没有像我预期的那样工作：

```
$('ul li:first').hover(function () {
    $(this).hide();
}, function () {
    $(this).show();
}); 
```

小提琴：http: [//jsfiddle.net/wg9cS/](http://jsfiddle.net/wg9cS/)

在悬停时，我想隐藏第一个并滑动第二个，但它现在有点波动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:19:53.370

那是因为当你隐藏元素时`mouseleave`会触发事件，所以会显示元素并`mouseenter`再次触发事件，即*事件循环*。

```
$('ul li:first').mouseenter(function () {
    $(this).hide();
});

$('ul li:eq(1)').mouseleave(function () {
    $(this).prev().show();
}); 
```

[http://jsfiddle.net/wg9cS/2/](http://jsfiddle.net/wg9cS/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:22:16.253

[http://jsfiddle.net/wg9cS/6/](http://jsfiddle.net/wg9cS/6/)

```
$('ul li:first').hover(function () {
    $(this).slideUp();
});

$('ul li:nth-child(2)').mouseleave(function () {
  $(this).parent().find(":first").slideDown();
}); 
```

这是一个可以滑动的版本。编辑：未定义的更优雅。

# c - if 语句不适用于我的语法

> ID：15273457
> 
> 赞同：1
> 
> 时间：2013-03-07T14:15:55.747
> 
> 标签：c, if-statement, antlr, grammar, antlrworks

我的 if 语句与我的语法有问题，可以在这里找到[http://sd-g1.archive-host.com/membres/up/24fe084677d7655eb57ba66e1864081450017dd9/CNew.txt](http://sd-g1.archive-host.com/membres/up/24fe084677d7655eb57ba66e1864081450017dd9/CNew.txt)。例如，当我输入 Ctrl+D 时：

```
 int k = 0;
  if ( k ==0 ){
       return k;
  } 
```

树解析器在“if(”处停止，控制台没有说明任何原因。有人知道问题可能来自哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:30:30.840

假设您的语法的入口点是`translation_unit`，看起来解析器在匹配单个`external_declaration`. 尝试`EOF`在该规则的末尾添加（文件结尾）标记，以便强制解析器匹配整个输入：

```
translation_unit
    : external_declaration+ EOF
    ; 
```

但是，我看不出 an`external_declaration`会如何匹配语法中的`if`-statement (a `selection_statement`)。也许您想在`statement`您的`external_declaration`:

```
translation_unit
scope Symbols; // entire file is a scope
@init {
  $Symbols::types = new HashSet();
}
    : (external_declaration)+ EOF
    ;

external_declaration
    : function_definition
    | declaration
    | statement
    ; 
```

之后，您的输入将得到正确解析。

# android - GCM 消息返回填写表格

> ID：15273461
> 
> 赞同：1
> 
> 时间：2013-03-07T14:16:05.543
> 
> 标签：android, android-activity, fill, google-cloud-messaging

嗨，我是开发 android 应用程序的新手，我有一些问题。

我的 GCM 工作正常：

```
protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Receenter code hereived message");
        Log.i(TAG, intent.getStringExtra("name"));
        Log.i(TAG, intent.getStringExtra("fone"));

        //google example (with this, the "message" ll be append in screen, like a miracle)
        displayMessage(context, intent.getStringExtra("nome") + " " + intent.getStringExtra("telefone"));
    } 
```

登录名称和 fone，但我想在我的表单字段中输入“消息”。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroll"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="8dip" >

    <TableLayout
        android:id="@+id/TableLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="8dp" >

         <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="8dp" >

        <TextView
            android:id="@+id/display"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        </TableRow>

        <EditText
            android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10" >

            <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/fone"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10" />
    </TableLayout>

</ScrollView> 
```

我该怎么做？（获取活动，获取字段，填写字段......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:12:07.360

一旦您收到“消息”，您`GCMIntentService`可以通过多种方式将其内容传递给其他应用程序组件。

在 GCM 演示应用程序中，他们创建了一个通知（请参阅“generateNotification”方法）。 [https://code.google.com/p/gcm/source/browse/samples/gcm-demo-client/src/com/google/android/gcm/demo/app/GCMIntentService.java](https://code.google.com/p/gcm/source/browse/samples/gcm-demo-client/src/com/google/android/gcm/demo/app/GCMIntentService.java)

如果您想在 an 中显示内容`Activity`，那么您需要使用所需的数据作为“附加”`Intent`来触发 an 。`Activity`

您不会在 GCM 服务中“获取活动”，而是指定“意图”，系统将调用正确`Activity`的来处理它。有关更多信息，请参阅有关意图/意图过滤器的文档：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)。

这是一个过于简单的例子：

```
protected void onMessage(Context context, Intent intent) {
  Log.i(TAG, "Receenter code hereived message");
  Log.i(TAG, intent.getStringExtra("name"));
  Log.i(TAG, intent.getStringExtra("fone"));

  // create ANOTHER intent to fire off the data to YOUR activity
  Intent i = new Intent(this, MyActivity.class);
  i.putExtra("nome", intent.getStringExtra("nome"));
  i.putExtra("fone", intent.getStringExtra("fone"));
  startActivity(i); 
```

}

然后在 MyActivity 中执行以下操作：

```
 String nome = getIntent().getStringExtra("nome"); 
```

正如我所说，这个例子过于简单（你需要在使用它之前检查数据是否真的存在，在你的服务和你的活动中，你可能想要使用其他数据类型并有默认值，还有其他方法可以交换数据取决于要求），但它应该让你开始。

# report - 显示对 Trac 报告的回复/评论数

> ID：15273463
> 
> 赞同：0
> 
> 时间：2013-03-07T14:16:09.853
> 
> 标签：report, trac

我想为活动工单报告中显示的每张工单添加回复计数。

这是我当前的查询：

```
SELECT p.value AS __color__,
   id AS ticket, summary, component, version, milestone, t.type AS type, 
   reporter, owner, status,
   time AS created,
   changetime AS _changetime, description AS _description,
   date(changetime / 1000000, 'unixepoch') as LastUpdate,
   reporter AS _reporter
  FROM ticket t
  LEFT JOIN enum p ON p.name = t.priority AND p.type = 'priority'
  WHERE status <> 'closed'
  ORDER BY CAST(p.value AS integer), milestone, t.type, time 
```

是否可以添加回复/评论计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:37:27.913

使用子查询它可能看起来像

```
SELECT p.value AS __color__,
    id AS ticket, summary, component, version, milestone, t.type AS type, 
    reporter, owner, status,
    time AS created,
    changetime AS _changetime, description AS _description,
    date(changetime / 1000000, 'unixepoch') as LastUpdate,
    reporter AS _reporter,
    CASE WHEN c.count ISNULL OR c.count = '' THEN 0 ELSE c.count
    END AS comments
FROM ticket t
LEFT JOIN (
    SELECT ticket, count(newvalue) AS count
    FROM ticket_change
    WHERE field = 'comment' AND NOT newvalue = ''
    GROUP by ticket) AS c
    ON t.id = c.ticket
LEFT JOIN enum p ON p.name = t.priority AND p.type = 'priority'
WHERE status <> 'closed'
ORDER BY CAST(p.value AS integer), milestone, t.type, time 
```

并非所有的列名都需要包含表名，但知道它们的来源并没有什么坏处，尤其是如果您对 db 模式了解不多的话。

CASE 表达式用于填充没有评论的工单的“评论”列。否则，这些单元格将是空的。

*AND NOT newvalue = ''*排除没有真正评论的更改，例如更改所有者重新分配。

我也更喜欢按票号订购，但这取决于开放票的数量。

# php - 带有变量的 HTML i18n/l10n 编码风格

> ID：15273465
> 
> 赞同：0
> 
> 时间：2013-03-07T14:16:13.163
> 
> 标签：php, python, html, localization, internationalization

我从事网络开发已经有一段时间了，我一直在努力寻找一个干净的解决方案来解决我在 HTML 字符串的 i18n 期间遇到的问题，主要是锚标记。

首先让我给你看一个典型的有问题的例子。这是 HTML 模板中经常遇到的字符串：

```
Welcome to my site. Check out our cool <a href="/products">products</a> 
you should not miss. 
```

如何在仍然具有以下属性的同时翻译此字符串：

*   URL 的动态生成（例如使用路由器）
*   尽可能可读的可翻译字符串（因此翻译人员可以在不查看代码的情况下进行翻译）
*   因为字符串包含 HTML，我可能想转义我插入的某些部分（例如 URL），所以如果这个 URL 包含用户输入，我不会让自己易受 XSS 攻击
*   它也应该在代码中看起来尽可能好

当字符串包含动态内容和 HTML 时，如何翻译它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:16:13.163

当我现在想将 i18n 应用于该字符串时，我可能会转向`gettext`或框架函数。因为我来自 PHP/ [Joomla！](http://www.joomla.org/)世界，我以前用过`JText::_`，它的行为与`gettext`. 在 Python 中，我现在使用[Babel](http://babel.edgewall.org/)。两者都有相同的问题，可能还有更多的语言。我在这里分享的所有代码都是我在 Python 中执行的方式，更明确地说，在我的[Mako 模板中](http://www.makotemplates.org/)

当然，问题是：我们的字符串中有 HTML 需要翻译（还有一个 URL）。以下是我的选择，我将在之后分别解释：

*   将原始字符串传递给`gettext`
*   将文本分成三位
*   用变量包围链接词
*   使用一个单独构建的变量

## 将原始字符串传递给`gettext`

如果不了解其含义，这似乎是人们可能采取的第一种方法。

**方法一：**

```
_('Welcome to my site. Check out our cool <a href="/products">products</a> \
you should not miss.') 
```

为此，`msgid`您现在可以翻译它，同时保持 HTML 完整。

优点：

*   这在代码中看起来很干净，很容易理解
*   如果翻译器保持 HTML 完整，这不会产生任何问题

缺点：

*   翻译者必须至少了解一点 HTML
*   字符串完全不灵活，例如，如果 URL 发生变化，则必须调整所有翻译
*   它不允许使用诸如路由器之类的东西动态生成 URL

所以作为一个结论，当我使用这个时，我很快就达到了我的极限。我的下一个想法是：

## 将文本分成三位

**方法二：**

```
_('Welcome to my site. Check out our cool ') + '<a href="/products">' +\
_('products') + '</a>' + _(' you should not miss.') 
```

优点：

*   URL 现在完全灵活了
*   仅为译者提供实际文本

缺点：

*   将一个句子分成三个部分
*   翻译者必须*知道*哪些部分相互关联，否则他可能无法产生有意义的句子
*   代码不是很漂亮
*   The`msgid`可能是一个单词，可能会导致问题（注意上下文），但可以修复。

我使用这种技术有一段时间了，因为我不知道`printf`PHP 中的样式字符串（我当时使用过）。因为这看起来很丑，我尝试了一种不同的方法：

## 用变量包围链接词

**方法3：**

```
_('Welcome to my site. Check out our cool %sproducts%s you should not miss.' % \
('<a href="/products">', '</a>') 
```

优点：

*   单串要翻译，一个完整的句子
*   翻译器直接从字符串中获取上下文
*   代码没*那么*难看

缺点：

*   译者必须注意不要`%s`遗漏（读起来可能会造成混淆`sproducts`）
*   为每个 URL 引入两个格式字符串变量，一个仅`</a>`

## 使用一个单独构建的变量

从这里我有一些不同的方法，但我最终选择了我目前使用的一种（这*可能*看起来有点矫枉过正，但我​​现在更喜欢它）。

**方法4：**

```
_('Welcome to my site. Check out our cool %s \
you should not miss.') % ('<a href="%s">%s</a>' % ('/products', _('products'))) 
```

让我花点时间来解释一下这种（看似疯狂的）方法。首先，实际的翻译字符串如下所示：

```
_('Welcome to my site. Checkout our cool ${product_url} \
you should not miss.') 
```

这给翻译留下了插入的信息（即[翻译字符串](http://docs.pylonsproject.org/projects/translationstring/en/latest/)版本）。其次，我想确保我可以手动转义插入到 HTML 中的所有部分。虽然 Mako 提供了[自动转义](http://docs.makotemplates.org/en/latest/filtering.html#expression-filtering)，但这在这样的语句中是没有意义的：

```
${'This is a <a href="/">url</a>'} 
```

它会破坏 url，所以我必须应用`|n`过滤器来删除任何转义。但是，如果用户提供了任何参数，它也会打开我想要阻止的 XSS。不冒任何风险，我可以转义*任何*输入（就像好的模板引擎默认做的一样），然后删除 Mako 对这个字符串的转义。所以

```
'<a href="%s">%s</a>' % ('/products', _('products')) 
```

实际上看起来像

```
'<a href="%s">%s</a>' % (escape('/products'), _('products')) 
```

从哪里`escape`导入`markupsafe`（参见[Markupsafe](https://github.com/mitsuhiko/markupsafe#markupsafe)）。

现在的最后一部分是通过路由器的动态 URL：`request.route_url('products_view')`

为了结合这些可能性，我必须产生一些非常难看的东西（请注意，这使用了（[translationstring.TranslationString](http://docs.pylonsproject.org/projects/translationstring/en/latest/api.html#translationstring.TranslationString)`mapping` ）的关键字参数，但这结合了我想要/需要从翻译中获得的所有好处：`translationstring`

**最后结果：**

```
_('Welcome to my site. Checkout our cool ${product_url} \
you should not miss.', mapping={'product_url': '<a href="%s">%s</a>' %\
(escape(request.route_url('products_view')), _('products'))}) 
```

优点：

*   完整的 HTML 转义
*   全动态
*   非常`msgid`适合翻译

缺点：

*   模板中的一个**极其**丑陋的构造（或程序）
*   语言提取器没有捕获`_('products')`，所以我们必须手动提取它

就是这样，这结束了我解决这个问题的方法。也许我正在做一些*复杂*的事情，而您有很多更好的想法，或者这可能是一个取决于特定类型的可翻译文本的问题（并且必须选择正确的方法）。

我是否错过了任何解决方案或任何可以改进我的方法的东西？

# bitmap - 绘制位图 c++ builder 的一部分

> ID：15273473
> 
> 赞同：2
> 
> 时间：2013-03-07T14:16:29.187
> 
> 标签：bitmap, c++builder, region

只绘制指定形式的位图一定不难，但是我不明白为什么该代码不起作用（我在一些 delphi 示例中看到了它）：

```
Graphics::TBitmap* bmp;

void __fastcall TForm1::FormCreate(TObject* Sender)
{
    bmp = new Graphics::TBitmap();
    bmp->Width = 300;
    bmp->Height = 300;
    bmp->Canvas->Ellipse(0, 0, 300, 300);
}

void __fastcall TForm1::Button1Click(TObject* Sender)
{
    HRGN rgn = CreateRectRgn(10, 10, 30, 30);
    if(SelectClipRgn(bmp->Handle, rgn) == ERROR) ShowMessage("Error");
    Canvas->Draw(0, 0, bmp);
} 
```

所以位图以通常的方式绘制。在 MSDN 中，错误标志被解释为“以前的剪辑区域不受影响”。应该先配置设备还是删除之前的区域？这是完成这项任务的正确方法吗？我会在包含此位图的 TImage 上使用 SetWindowRgn，但 TImage 不是窗口，因此没有句柄。请帮我找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:00:51.127

只是使用`CopyRect`，一种方法`Canvas`。

例如，创建一个名为 Button2 的按钮并插入以下代码：

```
void __fastcall TForm1::Button2Click(TObject *Sender)
{
    //dimensions of real image: 300x300

    //clipping a region
    //dimension: 200x200
    //offset (x,y): (10,10)
    int xOff = 10;
    int yOff = 10;
    int widthOfRegion = 200;
    int heightOfRegion = 200;

    //printing the clipped region
    //dimension: 200x200
    //offset (x,y): (305,0) -> to do not overwrite image drawn by button1
    int xOff2 = 305;
    int yOff2 = 0;
    int widthOfRegion2 = 200;
    int heightOfRegion2 = 200;

    Canvas->CopyRect(
        //first rect is destination
        TRect(xOff2, yOff2, xOff2 + widthOfRegion2, yOff2 + heightOfRegion2)
        //second is canvas of source
        ,bmp->Canvas
        //third is rect of source that you want to copy
        ,TRect(xOff, yOff, xOff + widthOfRegion, yOff + heightOfRegion)
    );
} 
```

所以结果如下，运行并按下 Button1 和 Button2 后： ![XD](../Images/697980b302e21324fc288e5a6eda51a1.png)

提示：您可以放大或缩小裁剪区域，改变区域 2 的宽度和高度：)

来源： http: [//www.borlandtalk.com/how-to-use-selectcliprgn-vt11696.html](http://www.borlandtalk.com/how-to-use-selectcliprgn-vt11696.html)

# ant - Apache Ant 从现有文件集创建新文件集，文件名重命名

> ID：15273477
> 
> 赞同：0
> 
> 时间：2013-03-07T14:16:38.930
> 
> 标签：ant, fileset

我的 Apache Ant 构建文件 (BuildFilesetXML.xml) 中有以下文件集：

```
<fileset id="XMLFileset" dir="mydir/myxml"> 
    <include name="**/1.xml"/>
    <include name="**/2.xml"/>
</fileset> 
```

我想在不同的构建文件（BuildFilesetLog.xml）中动态创建（不知道我的第二个构建文件中“XMLFileset”的内容）一个名为“LOGFileset”的新文件集，它将具有与“XMLFileset”相同的内容，但具有名称重命名为 .log。因此，在运行时它将具有与以下文件集相同的结构：

```
<fileset id="LOGFileset">   
    <include name="**/1.log"/>
    <include name="**/2.log"/>
</fileset> 
```

这可以在Ant中完成吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:40:48.227

不，但有些任务支持[映射器](http://ant.apache.org/manual/Types/mapper.html)。例如，请参阅以下答案：

*   [引用时更改 FileList 的目录](https://stackoverflow.com/questions/9363383/change-directory-of-filelist-when-referencing-it/9368261#9368261)

# php - 如何更改此正则表达式以匹配不在锚点内的所有关键字

> ID：15273479
> 
> 赞同：0
> 
> 时间：2013-03-07T14:16:46.760
> 
> 标签：php, regex

我正在尝试用一个锚点替换某些文本中的关键字，该锚点会为所述关键字打开一个详细信息窗口。这是我用于替换的代码：

```
$pattern = '%\b('.$keyword['Keyword'].')\b(?![^<]*</a>)%i';
$replacement = '<a href="#detalii_keyword_'.$keyword['CodKeyword'].'" data-toggle="modal"><strong>\\1</strong></a>';
$text = preg_replace($pattern, $replacement, $text); 
```

它旨在避免锚点内的单词，从而避免已经替换的多单词关键字。所以我不会在已经替换的“detalii deviz”中替换“deviz”。例外情况适用于所有情况，除非我要查找的单词不是锚中的第一个单词。因此，例如，它不会替换中的“deviz”，`<a>deviz detalii</a>`或者只是`<a>deviz</a>`替换它`<a>detalii deviz</a>`。

我应该如何更改模式以使正则表达式避免匹配锚点内的任何单词，就像我想要的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:48:01.763

```
$text = 'deviz <a>deviz deviz deviz</a> deviz';
$pattern = '%\bdeviz\b(?![^<]*</a>)%i';
$text = preg_replace($pattern, 'replaced', $text);

echo $text;
// 'replaced <a>deviz deviz deviz</a> replaced' 
```

您的正则表达式似乎工作正常 - 有什么问题？

# mysql - Mysql 需要每周 COUNT 题字持续 12 周

> ID：15273485
> 
> 赞同：4
> 
> 时间：2013-03-07T14:16:56.527
> 
> 标签：mysql, date, count, week-number

我已经数过铭文，这周。但我需要在过去 12 周内每周计算题字，并将其以数组形式发送。

我的实际要求是：

```
SELECT COUNT(*) FROM PERSON
YEAR(date_inscription) = YEAR(NOW())
AND WEEK(date_inscription) = WEEK(NOW()) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T14:18:53.013

```
SELECT YEARWEEK(date_inscription) as yweek,
       COUNT(*) as cnt
FROM PERSON
where YEARWEEK(date_inscription) >= YEARWEEK(curdate()) - 12
group by yweek 
```

# php - 在 HTML5/WebGL 游戏中通过 API 安全地保存数据

> ID：15273487
> 
> 赞同：2
> 
> 时间：2013-03-07T14:17:08.717
> 
> 标签：php, javascript, html, three.js, webgl

我正在创建一个基于 HTML5/WebGL 的游戏，在考虑将游戏数据保存到服务器时遇到了一些困难。

我需要在不加载页面的情况下保存数据。所以显而易见的选择是对我的服务器 Restful API 使用 AJAX 调用。显然，这提出了一些问题。主要是欺骗请求。使用 AJAX 调用意味着请求是在客户端发出的，允许“坏”用户向服务器发送他们自己的请求，从而改变数据以使自己受益。

我首先想到的是使用会话来保护服务器。在初始页面加载时，存储一个允许访问 API 的会话。虽然我确信会话可以被欺骗。

我怎样才能最好地安全地将游戏数据保存到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:29:55.267

您可以扩展这个简单的示例；

```
<?php
$secret = "test123";
$time = time();
$code = md5($secret.$time); 
```

秘密和时间被组合在一起并散列在一起。生成的代码和时间被发送到服务器；

```
http://www.domain.com?TIME=1362668370&CODE=cdade9f3df6a8cb9b17c736b96c64133 
```

然后，服务器可以散列秘密和接收到的时间值，并将其与接收到的 CODE 进行比较。

# php - 当我执行时，Microtime 给了我一个否定的结果

> ID：15273488
> 
> 赞同：0
> 
> 时间：2013-03-07T14:17:12.797
> 
> 标签：php, time

我正在运行一个脚本，它决定了我的执行时间。当它计算时间时我得到一个负数。我希望它在执行时能给我带来积极的影响。

```
<?php
$mtime = microtime();
$mtime = explode(" ",$mtime);
$mtime = $mtime[1] + $mtime[0];
$starttime = $mtime;
echo "executed";

$mtime = microtime();
$mtime = explode(" ",$mtime);
$mtime = $mtime[1] + $mtime[0];
$endtime = $mtime;
$totaltime = ($endtime - $starttime);
$minutes = (int)($totaltime/60)-$hours*60;
echo "This page was created in ".$minutes." minute/s";

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T14:18:57.167

以`microtime()`字符串形式返回。尝试传入 true 以使其返回浮点值。这也会将您的代码缩短为：

```
$starttime = microtime(true);
echo "Executed";

$endtime = microtime(true);
$totaltime = $endtime - $starttime;
$minutes = intval(ceil(($endtime - $starttime) / 60));
echo "This page was created in " . $minutes . " minute(s)";
... 
```

资源：[http ://www.php.net/microtime](http://www.php.net/microtime)

# r - 使用 .SD 时 R data.table 聚合缓慢

> ID：15273491
> 
> 赞同：15
> 
> 时间：2013-03-07T14:17:22.770
> 
> 标签：r, data.table

我正在对 data.table 进行一些聚合（优秀的包！！！），我发现 .SD 变量对很多事情都非常有用。但是，当有很多组时，使用它会显着减慢计算速度。跟随一个例子：

```
# A moderately big data.table
x = data.table(id=sample(1e4,1e5,replace=T),
               code=factor(sample(2,1e5,replace=T)),
               z=runif(1e5)
              )

setkey(x,id,code)

system.time(x[,list(code2=nrow(.SD[code==2]), total=.N), by=id])
##  user  system elapsed 
##  6.226   0.000   6.242

system.time(x[,list(code2=sum(code==2), total=.N), by=id])
## user  system elapsed 
## 0.497   0.000   0.498

system.time(x[,list(code2=.SD[code==2,.N], total=.N), by=id])
## user  system elapsed 
## 6.152   0.000   6.168 
```

难道我做错了什么？我应该避免使用 .SD 来支持单个列吗？提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T14:44:00.497

> 我做错了什么，即我应该避免`.SD`支持个别列吗？

对，就是这样。仅`.SD`当您确实在使用里面的所有数据时才使用`.SD`。您可能还会发现对 inside 的调用和对内部`nrow()`的子查询调用也是罪魁祸首：用于确认。`[.data.table``j``Rprof`

[见FAQ 2.1](https://cran.r-project.org/web/packages/data.table/vignettes/datatable-faq.html#how-can-i-avoid-writing-a-really-long-j-expression-youve-said-that-i-should-use-the-column-names-but-ive-got-a-lot-of-columns.)的最后几句：

> *FAQ 2.1 如何避免写一个很长的 j 表达式？你说过我应该使用列名，但我有很多列。*
> 分组时，`j`表达式可以使用列名作为变量，如您所知，但它也可以使用保留符号`.SD`，该符号引用每个组的 Data.table 的子集（不包括分组列）。所以总结一下你所有的专栏，它只是 `DT[,lapply(.SD,sum),by=grp]`. 这可能看起来很棘手，但它的编写速度快，运行速度快。请注意，您不必创建匿名函数。有关与其他方法的比较，请参阅时间插图和 wiki。该`.SD`对象在内部有效地实现并且比将参数传递给函数更有效。**请不要这样做：`DT[,sum(.SD[,"sales",with=FALSE]),by=grp]`. 这行得通，但是非常低效和不优雅。这就是预期 `DT[,sum(sales),by=grp]`的：并且可能快 100 倍。**

另请参阅 FAQ 3.1 的第一个项目符号：

> *FAQ 3.1 我有 20 列和大量的行。为什么一列的表达式这么快？*
> 几个原因：
> -- 只有该列被分组，其他 19 个被忽略，因为`data.table`检查`j` 表达式并意识到它不使用其他列。

当`data.table`检查`j`并看到该`.SD`符号时，效率增益就会消失。`.SD`即使您不使用所有列，它也必须为每个组填充整个子集。很难知道您真正使用`data.table`了哪些列（例如，可能包含s）。但是，如果您无论如何都需要它们，那当然没关系，例如在. 这是.`.SD``j``if``DT[,lapply(.SD,sum),by=...]``.SD`

所以，是的，`.SD`尽可能避免。直接使用列名给data.table的优化`j`最好的机会。符号的存在`.SD`很`j`重要。

这就是为什么`.SDcols`要介绍的。因此，如果您只想要一个子集，您可以知道`data.table`应该在哪些列中。`.SD`否则，`data.table`将填充`.SD`所有列以防万一`j`需要它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T14:24:29.980

尝试通过将计算分为两个步骤来解决此问题，然后合并生成的数据帧：

```
system.time({
  x2 <- x[code==2, list(code2=.N), by=id]
  xt <- x[, list(total=.N), by=id]
  print(x2[xt])
}) 
```

在我的机器上，它的运行时间为 0.04 秒，而不是 7.42 秒，即比原始代码快约 200 倍：

```
 id code2 total
   1:     1     6    14
   2:     2     8    10
   3:     3     7    13
   4:     4     5    13
   5:     5     9    18
  ---                  
9995:  9996     4     9
9996:  9997     3     6
9997:  9998     6    10
9998:  9999     3     4
9999: 10000     3     6
   user  system elapsed 
   0.05    0.00    0.04 
```

# php - PHP中的URL调用

> ID：15273492
> 
> 赞同：1
> 
> 时间：2013-03-07T14:17:23.657
> 
> 标签：php, web-services, api, http, web

我在 PHP 中使用 API。我必须将数据推送到这个 API 中。例如，如果我访问[http://www.api.com/api.php?data=mydata](http://www.api.com/api.php?data=mydata)，我会将“mydata”推送到 api。

事实上，我想使用 PHP 在 URL 栏中输入数据（这可能非常好哈哈）

提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:20:50.443

你需要这个吗？

```
$URL = "http://www.api.com/api.php?data=mydata";
$data = file_get_contents($URL); 
```

data 现在包含响应。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T14:32:46.473

你试过看卷曲吗？[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

例子：

```
$ch = curl_init();// init curl
curl_setopt($ch, CURLOPT_URL,"http://www.api.com/api.php");
curl_setopt($ch, CURLOPT_POST, 1);// set post data to true
curl_setopt($ch, CURLOPT_POSTFIELDS,"data=mydata&foo=bar");// post data

// receive server response ...
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);// gives you a response from the server

$response = curl_exec ($ch);// response it ouputed in the response var

curl_close ($ch);// close curl connection 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:23:57.010

您需要发布数据吗？查看 http_post_data ：

[http://php.net/manual/en/function.http-post-data.php](http://php.net/manual/en/function.http-post-data.php)

# javascript - CSS中的侧面板

> ID：15273494
> 
> 赞同：1
> 
> 时间：2013-03-07T14:17:25.087
> 
> 标签：javascript, html, css

我有一个名为日历的 div，它位于一个名为 cal-container 的 div 中。日历的宽度为：100%，因此目前它占据了整个 cal 容器。

我需要添加一个侧面板 div。这个 div 的宽度固定为`150 pixels`. 因此，#calendar 宽度应该是#cal-container 宽度 - 150px。这可以通过 CSS 实现还是我被迫使用表格？

如果可能，有例子吗？我用谷歌搜索了它，但没有像我想要的那样出现。通过单击按钮可以隐藏和显示侧面板，因此添加填充将不起作用。

这是我的意思的一个想法：天部分是#calendar，非计划部分是150px的侧面板。

我尝试将日历向左浮动，并将侧面板向右遮盖并为其设置 150 像素的宽度。但我的想法是，如果我隐藏那个 div，那么日历应该占 100%。

![在此处输入图像描述](../Images/40b765e3b25468e08deb72e88ec40d23.png) 谢谢

像这样，蓝色将在侧面，日历在左侧，但日历需要占用房间侧面而不是隐藏时。 [http://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/finished.html](http://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/finished.html)

浮动结果： ![在此处输入图像描述](../Images/36c6d27de6f38b8bb129bba574bd25c5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:39:37.760

[在这里为您找到了可行的解决方案](http://jsfiddle.net/barney/W4hwt/)。

使其工作的代码基本上取决于以下结构：

```
<div class="sideBar">
  ...
</div>
<div class="tableWrapper">
  <table>
    ...
  </table>
</div> 
```

接下来，确保元素具有这些重要的 CSS 属性：

```
.sideBar {
  float: right;
}

.tableWrapper {
  overflow: hidden;
}

table {
  width: 100%;
} 
```

这里发生的是`.sideBar`浮动正确，并占用了它需要的任何空间。同时，`.tableWrapper`将占用任何剩余的空间`overflow: hidden`。最后，告诉`table`100% 的可用宽度。

单击演示中的按钮以查看表格自动调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:33:14.847

所有主流浏览器和 IE10 都支持[flexbox](http://css-tricks.com/old-flexbox-and-new-flexbox/)。不支持 < IE10。

# asp.net - 使用 AddWithValue 插入 - 会引发错误？

> ID：15273499
> 
> 赞同：2
> 
> 时间：2013-03-07T14:17:33.377
> 
> 标签：asp.net, sql, sql-server, database, vb.net

**你好。第一个代码片段将文本框值插入数据库并且效果很好：**

```
 Public Sub InsertintoTable(ByVal username As String, ByVal password As String)
        Dim adp As New SqlCommand("INSERT INTO [users_tbl] (usr_username,usr_password) values ('" & username & "','" & password & "')", con)
        adp.ExecuteNonQuery()
    End Sub 
```

**相反，我想使用 AddWithValue，所以我试试这个：**

```
 Public Sub InsertintoTable(ByVal username As String, ByVal password As String)
        Using adp As New SqlCommand("INSERT INTO [users_tbl] (usr_username, usr_password) values (@username, @password)", con)
            adp.Parameters.AddWithValue("@usr_username", username)
            adp.Parameters.AddWithValue("@usr_password", password)
            adp.ExecuteNonQuery()
        End Using
    End Sub 
```

**但不幸的是它抛出了一个错误：**

```
Exception Details: System.Data.SqlClient.SqlException: Must declare the scalar variable "@username". 
```

* * *

为什么会出错？我的`AddWithValue`片段可能是错误的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T14:19:56.220

参数名称不同，这有效：

```
adp.Parameters.AddWithValue("@username", username)
adp.Parameters.AddWithValue("@password", password) 
```

或从

```
INSERT INTO [users_tbl] (usr_username, usr_password) values (@username, @password) 
```

到

```
INSERT INTO [users_tbl] (usr_username, usr_password) values (@usr_username, @usr_password) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T14:19:56.077

您的查询需要这两个变量：

```
@username, @password 
```

但是你传递一个不同名称的变量：

```
adp.Parameters.AddWithValue("@usr_username", username)
adp.Parameters.AddWithValue("@usr_password", password) 
```

参数名称需要匹配。像这样的东西：

```
adp.Parameters.AddWithValue("@username", username)
adp.Parameters.AddWithValue("@password", password) 
```

# .htaccess - 不正确的重定向

> ID：15273501
> 
> 赞同：0
> 
> 时间：2013-03-07T14:17:48.443
> 
> 标签：.htaccess, url-redirection

我有网站[http://paweljanicki.pl/Realizacje/](http://paweljanicki.pl/Realizacje/)。

```
RewriteEngine On 
RewriteBase / 

RewriteCond %{HTTP_HOST} !^paweljanicki.pl$ [NC]
RewriteRule ^(.*)$ http://paweljanicki.pl/$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://paweljanicki.pl/$1/ [L,R=301]

RewriteCond %{REQUEST_URI} ^\/Realizacje.aspx$
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^(.*)$ /Realizacje/ [L,R=301]
RewriteCond %{REQUEST_URI} ^\/Kontakt.aspx$
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^(.*)$ /Kontakt/ [L,R=301]
RewriteCond %{REQUEST_URI} ^\/Galeria.aspx$
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^(.*)$ /Galeria/ [L,R=301]
RewriteCond %{REQUEST_URI} ^\/Linki.aspx$
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^(.*)$ /Linki/ [L,R=301]
RewriteCond %{REQUEST_URI} ^\/Mapa-strony.aspx$
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^(.*)$ /Mapa-strony/ [L,R=301]

RewriteCond %{REQUEST_URI} ^\/Galeria.aspx$
RewriteCond %{QUERY_STRING} ^gId=([0-9]*)$
RewriteRule ^(.*)$ /Galeria/%1/? [L,R=301]
RewriteCond %{REQUEST_URI} ^\/Galeria.aspx$
RewriteCond %{QUERY_STRING} ^gId=([0-9]*)&sgId=([0-9]*)$
RewriteRule ^(.*)$ /Galeria/%1/%2/? [L,R=301]
RewriteCond %{REQUEST_URI} ^\/Galeria.aspx$
RewriteCond %{QUERY_STRING} ^gId=([0-9]*)&sgId=([0-9]*)&pId=([0-9]*)$
RewriteRule ^(.*)$ /Galeria/%1/%2/%3/? [L,R=301]

RewriteRule ^Galeria/$ Galeria.aspx [L]
RewriteRule ^Galeria/([^/]+)/?$ Galeria.aspx?gId=$1 [L]
RewriteRule ^Galeria/([^/]+)/([^/]+)/?$ Galeria.aspx?gId=$1&sgId=$2 [L]
RewriteRule ^Galeria/([^/]+)/([^/]+)/([^/]+)/?$ Galeria.aspx?gId=$1&sgId=$2&pId=$3 [L]

RewriteCond %{REQUEST_URI} ^\/Realizacje.aspx$
RewriteCond %{QUERY_STRING} ^gId=([0-9]*)$
RewriteRule ^(.*)$ /Realizacje/%1/? [L,R=301]

RewriteRule ^Realizacje/$ Realizacje.aspx [L]
RewriteRule ^Realizacje/([^/]+)/?$ Realizacje.aspx?pId=$1 [L]

RewriteRule ^Kontakt/$ Kontakt.aspx [L]
RewriteRule ^Linki/$ Linki.aspx [L]
RewriteRule ^Mapa-strony/$ Mapa-strony.aspx [L]

RewriteCond %{REQUEST_URI} ^\/Programy-na-Zlecenie/$
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^(.*)$ /Pisanie-Programow-na-Zamowienie/ [L,R=301]

#to use relative paths in RewriteMap, map files must reside in the same folder as .htaccess
#http://www.helicontech.com/ape/doc/mod_rewrite.htm
RewriteMap mapfile txt:mapfile.txt [NC]
RewriteMap revmapfile txt_rev:mapfile.txt [NC]
#RewriteCond %{QUERY_STRING} (.+) 
#RewriteRule ^Default\.aspx$ ${mapfile:%1}? [NC,R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/$ Default.aspx?${revmapfile:$1} [NC,L,NS] 
```

# php - Mysql查询错误 - 自动硬币添加

> ID：15273504
> 
> 赞同：-2
> 
> 时间：2013-03-07T14:17:58.007
> 
> 标签：php, mysql

**我有一些错误，md100sms.php 没有在硬币列的数据库中添加硬币**

```
<?PHP
  if(isset($_GET['do']) && $_GET['do']=="aktivieren" && isset($_GET['hash']) && !empty($_GET['hash'])) {
    echo '<div class="main main_top">
    Information
</div>
<div class="main main_content">';
    if(strlen($_GET['hash'])==32 && $_GET['hash']!=1 && checkAnum($_GET['hash'])) {
      $cmdHash = "SELECT id,web_aktiviert FROM account.account WHERE web_aktiviert='".$_GET['hash']."' AND web_aktiviert!='1' LIMIT 1;";
      $qryHash = mysql_query($cmdHash,$sqlServ);

      if(mysql_num_rows($qryHash)) {

        $getData = mysql_fetch_object($qryHash);
        $userUpdate = "UPDATE account.account SET web_aktiviert='1',status='OK' WHERE id='".$getData->id."' LIMIT 1;";
        $updateQry = mysql_query($userUpdate,$sqlServ);

        if($updateQry) {
          echo'Ihr Account wurde erfolgreich aktiviert. Sie k&ouml;nnen sich nun einloggen.';
          echo'<meta http-equiv="refresh" content="1; URL=index.php?s=login"> ';
        }
        else {
          echo'Query fehlgeschlagen. Bitte einen Admin kontaktieren!';
        }

      }
      else {
        echo'Es wurde kein passender Eintrag gefunden. Aktivierung fehlgeschlagen.';
      }

    }
    else {
      echo'Kein valider Hash!';
    }
    echo '</div>
<div class="main main_bottom">
</div>';
  }

  if(!empty($_SESSION['user_id'])) 
  {
    echo '<div id="con-top" class="post-top1">Login</div>
<div id="con-mid">
    ';
    echo'<ul style="margin-top:0;">';
    if($_SESSION['user_admin']>0) {
      echo'<li><a href="index.php?s=admin">Administrar</a></li>';
    }
    if($_SESSION['user_admin']>=0) {
      echo'<a href="index.php?s=itemshop"><input type="submit" class="btn" value="ItemShop" name="submit"></a>&nbsp;&nbsp;';
      echo'<a href="index.php?s=spenden"><input type="submit" class="btn" value="Comprar Moedas" name="submit"></a>&nbsp;&nbsp;';
      echo'<a href="index.php?s=charaktere"><input type="submit" class="btn" value="Personagens" name="submit"></a>&nbsp;&nbsp;';
      echo'<a href="index.php?s=passwort"><input type="submit" class="btn" value="Alterar Dados" name="submit"></a>&nbsp;&nbsp;';
        echo'<a href="index.php?s=Vote"><input type="submit" class="btn" value="Votar no Servidor" name="submit"></a>&nbsp;&nbsp;';
    }    
    $cmdStats = "SELECT SUM( player.playtime ) AS ges_spielzeit, COUNT( * ) AS ges_chars, player_index.empire
    FROM player.player
    INNER JOIN player.player_index ON player_index.id = player.account_id
    WHERE player.account_id = '".$_SESSION['user_id']."'
    LIMIT 1";

    $qryStats = mysql_query($cmdStats,$sqlServ);
    $getStats = mysql_fetch_object($qryStats);

    if(!empty($getStats->empire)) {
      $reich = '<img src="img/reiche/'.$getStats->empire.'.png" title="Reino" alt="Reino"/>';
    }
    else {
      $reich='Conta sem reino.';
    }

    echo'<table>
      <tr>
        <th class="topLine">ID:</th>
        <td class="tdunkel">'.$_SESSION['user_name'].'</td>
      </tr>
      <tr>
        <th class="topLine">Reino:</th>
        <td class="thell">'.$reich.'</td>
      </tr>
      <tr>
        <th class="topLine">Personagens:</th>
        <td class="tdunkel">'.$getStats->ges_chars.'</td>
      </tr>
      <tr>
        <th class="topLine">Tempo de Jogo:</th>
        <td class="thell">'.$getStats->ges_spielzeit.' Minutos</td>
      </tr>';
    $sqlAcc = "SELECT account.social_id AS loeschcode, safebox.password AS lagerpw
    FROM account.account 
    LEFT JOIN player.safebox 
    ON account.id=safebox.account_id 
    WHERE account.id='".$_SESSION['user_id']."'";

    $qryAcc = mysql_query($sqlAcc) or die(mysql_error());
    $getAcc = mysql_fetch_object($qryAcc);

    if(empty($getAcc->lagerpw)) $getAcc->lagerpw = '000000';

      echo'<tr style="margin-bottom:0;">
        <th class="topLine">Codigo Personagem:</th>
        <td class="tdunkel">'.$getAcc->loeschcode.'</td>
      </tr>
    </table>
</div>
<div id="con-bot"></div>    </div>';
  }
  else 
  {
  ?>
<div id="con-top" class="post-top1">Entrar</div>
<div id="con-mid">
<form action="index.php?s=login" method="POST" class="login">
      <input type="text" class="bar" name="userid" onFocus="if(this.value=='Oseuid') this.value=''" onBlur="if(this.value=='')this.value='Oseuid'" value="Oseuid">
      <input type="password" class="bar" name="userpass" onFocus="if(this.value=='Passwortpasswort') this.value=''" onBlur="if(this.value=='')this.value='Passwortpasswort'" value="Passwortpasswort">
      <input type="submit" class="btn" value="LOGIN" name="submit">
      <span><br>
       <a href="index.php?s=register">Criar um nova conta!</a><br />
       <a href="index.php?s=lostpw">Esqueceste a senha?</a>
      </span>
    </form>
</div>
<div id="con-bot"></div>    </div>
  <?PHP
  }
?> 
```

**md100sms.php**

```
<div id="con-top" class="post-top1">Moedas Automaticas - 100 Moedas</div>
<div id="con-mid">

<font color="green">Moedas compradas com sucesso.<br>
Foram adicionadas <font color="white">100</font> Moedas à tua conta.</font>
<?PHP
          $sqlCmd = sprintf("UPDATE account.account SET coins = coins +100 WHERE id = '.$_SESSION['user_id'].'")
  ?>

</div>
<div id="con-bot"></div></div> 
```

当我转到 md100sms.php 时，页面显示：`Successful added coins, 100 coins.`

但是当我在数据库中查看我的帐户时，它会继续使用相同的硬币。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:21:08.233

你在这里的引号有问题。改变

```
$sqlCmd = sprintf("UPDATE account.account SET coins = coins +100 WHERE id = '.$_SESSION['user_id'].'" 
```

和

```
$sqlCmd = "UPDATE account.account SET coins = coins +100 WHERE id = '".$_SESSION['user_id']."'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:21:21.803

你把你的报价搞混了一点。尝试这个：

```
$sqlCmd = sprintf("UPDATE account.account SET coins = coins +100 WHERE id = '" . $_SESSION['user_id'] . "'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:24:41.467

代替：

```
$sqlCmd = sprintf("UPDATE account.account SET coins = coins +100 WHERE id = '.$_SESSION['user_id'].'") 
```

和： -

```
$sqlCmd = sprintf("UPDATE account.account SET coins = coins +100 WHERE id = '{$_SESSION['user_id']}'"); 
```

（我在行尾加了一个分号，并更正了会话变量周围的语法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:59:46.587

尝试添加`session_start();`到页面顶部。

另外，请检查您在查询中的报价。尝试：

```
$sqlCmd = sprintf("UPDATE account.account SET coins = coins + 100 WHERE id = '".$_SESSION['user_id']."'"); 
```

# android - 在位图上画一个圆圈

> ID：15273513
> 
> 赞同：2
> 
> 时间：2013-03-07T14:18:05.343
> 
> 标签：android, android-canvas

我在这里搜索了很多关于使用画布在位图上绘制圆圈的答案。但是，我在代码中遇到了一些错误，应用程序毫无例外地停止了。

谁能给我一些帮助？它适用于我创建一个空白位图并在其上画一个圆圈。任何帮助将不胜感激！

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.main);

Paint paint = new Paint();
//paint.setAntiAlias(true);
paint.setColor(Color.BLUE);

Canvas canvas = new Canvas(bmp);
canvas.drawCircle(50, 50, 10, paint);

ImageView imageView = (ImageView)findViewById(R.id.imageView1);
//imageView.setAdjustViewBounds(true);
imageView.setImageBitmap(bmp); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:28:13.573

在某处阅读资源位图是不可变的。尝试...

```
bmp = bmp.copy(bmp.getConfig(), true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:22:12.447

这将为给定高度为您绘制一个圆圈

```
 private RectF outerCircle;
    diameter =400;

   int left = (width - diameter) / 2;
   int top = (height - diameter) / 2;
   int bottom = top + diameter;
   int right = left + diameter;
    outerCircle = new RectF(left, top, right, bottom); 
```

# heroku - 使用多个测功机玩 2 Heroku 启动

> ID：15273516
> 
> 赞同：3
> 
> 时间：2013-03-07T14:18:10.787
> 
> 标签：heroku, playframework-2.0

我有一个 Play 2.x 应用程序，并在 Heroku 上运行，只有一个网络测功机。

在启动时，会触发一个 Akka actor，它自己会安排未来的作业（例如发送推送通知）。

```
object Global extends GlobalSettings {

  override def onStart(app:Application) {
    val actor = Akka.system.actorOf(Props[SomeActor])
    Akka.system.scheduler.scheduleOnce(0 seconds, actor, None)
  }
} 
```

这适用于一个网络测功机，但我很想知道如果我增加网络测功机的数量会发生什么。onStart 会用两个网络测功机执行两次吗？

如果**Global**真的在全球范围内工作并且**onStart**只执行一次，与网络测功机的数量无关，那就太好了。如果没有，多个测功机必须以某种方式就一个负责完成这项工作的测功机达成一致。

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T19:27:39.707

如果您运行两个网络测功机，您的全局将执行两次。全局对于流程来说是全局的。当您扩展您的 Web 进程时，您正在运行两个进程。你有几个选择：

*   使用不同的进程（又名单例进程）来运行你的全局。Play 的好处是你可以有多个`GlobalSettings`实现。当你开始你的过程时，你指定你想要使用的全局`-Dapplication.global=YourSecondGlobal`。那么，在您的 procfile 中，您将拥有`singleton: target/start -Dhttp.port=${PORT} ${JAVA_OPTS} -Dapplication.global=YourSecondGlobal`. 启动您的 Web 进程和`singleton`进程，并确保`singleton`缩放到 1。
*   使用分布式信号量获取锁。然后每个进程将竞相获得锁——获胜的进程将继续执行，其他进程将失败。如果您正在使用 Postgres（正如许多人在 Heroku 上所做的那样），[建议锁](http://www.postgresql.org/docs/9.1/static/explicit-locking.html#ADVISORY-LOCKS)是一个不错的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-05T22:27:35.373

您还可以在运行时获取测功机名称：

```
String dyno = System.getenv("DYNO"); 
```

所以做这样的检查也可能有效：

```
if(dyno.equals("web.1")) {

} 
```

# java - facesContext.getExternalContext().getRequest().getSession() 的返回对象是什么类？

> ID：15273518
> 
> 赞同：1
> 
> 时间：2013-03-07T14:18:13.070
> 
> 标签：java, xpages, lotus-domino, xpages-ssjs

当尝试在 XPage 上获取 SSJS 中的 Session 时（[如此处所述](http://openntf.org/XSnippets.nsf/snippet.xsp?id=get-sessionid-in-ssjs)），前面的类型只会到`getSession()`.

我可以看到`getSession()`调用返回一个 standard `java.lang.Object`，这解释了为什么前面的类型`getSession()`只显示类的道具/方法`java.lang.Object`。

但是，如果您继续并调用该`getId()`方法（如上面链接中所述），那么您可以保存 XPage，它会毫无问题地运行。

这很好，但是如果我想在 Java 中进行相同的调用，代码将无法编译，因为正如上面对 SSJS 所述，返回的对象是标准的`java.lang.Object`并且没有名为`getId()`.

因此，我可以转换返回的对象以允许我访问会话方法吗？如果是这样，我应该将它投射到哪个班级？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T14:32:44.940

代码`facesContext.getExternalContext().getRequest().getSession()`返回类`com.ibm.designer.runtime.domino.adapter.servlet.LCDAdapterHttpSession`。

如果您需要知道该对象属于哪个类，只需添加`.getClass().getName()`它即可。所以在你的情况下的代码将是 - `facesContext.getExternalContext().getRequest().getSession().getClass().getName()`

在Java中你必须写

```
import javax.faces.context.FacesContext;
// import com.ibm.designer.runtime.domino.adapter.servlet.LCDAdapterHttpSession;
import javax.servlet.http.HttpSession;
...
...
// LCDAdapterHttpSession s = (LCDAdapterHttpSession)FacesContext.getCurrentInstance().getExternalContext().getSession(true);
HttpSession s = (HttpSession)FacesContext.getCurrentInstance().getExternalContext().getSession(true);
return s.getId(); 
```

该类`LCDAdapterHttpSession`实现`javax.servlet.http.HttpSession`.

# cakephp - 在 CakePHP 2.x 中未从主题加载图像

> ID：15273521
> 
> 赞同：0
> 
> 时间：2013-03-07T14:18:16.010
> 
> 标签：cakephp, cakephp-2.3

我正在运行 CakePHP 2.3.1。我已经`app/View/Themed/my_theme`根据需要创建了我的目录。我已将`webroot`目录添加到放置所有主题资产的主题中。但是，当我使用`$this->Html->image('{some_image}');`.

我需要在不同的目录中暂存图像吗？如果我将它们放在主 app/webroot/img 目录中，它们当然会按预期出现在页面上。

*更新：* 使用示例`logo.png`我有以下内容：

图像在这里上演：`app/View/Themed/{my_theme}/webroot/img/logo.png`

图像未显示在呈现的页面上。图像的来源显示为：`<img src="http://example.com/img/logo.png">`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:01:34.980

我猜你需要在你的引导程序中使用 AssetDispatcher：

```
Configure::write('Dispatcher.filters', array(
    'AssetDispatcher'
)); 
```

这将使使用插件或主题资产成为可能。

[http://book.cakephp.org/2.0/en/development/dispatch-filters.html#configuring-filters](http://book.cakephp.org/2.0/en/development/dispatch-filters.html#configuring-filters)

# java - 在路径中使用波浪号执行 bash 脚本

> ID：15273524
> 
> 赞同：2
> 
> 时间：2013-03-07T14:18:20.987
> 
> 标签：java, linux, bash, exec

我正在尝试在linux中执行：

```
command[0] = "~/test/bin/runScript_sh";
Runtime.getRuntime().exec(command); 
```

但是得到一个异常 java.io.IOException: Cannot run program
error=2, No such file or directory

可能是因为它无法评估波浪号。

可以做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:21:51.640

我会自己更换。

```
if(path.s.substring(0,1).contains("~"))
    path = path.replaceFirst("~",System.getProperty("user.home")); 
```

这可以让你得到你想要的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:11:56.533

当您在 shell 命令提示符下运行命令时，诸如`~`扩展、引用处理、通配符、$variable 扩展、输入/输出重定向和管道等都由 shell 处理......在它要求操作系统运行之前适合您的程序。

当您使用 运行命令时`Runtime.exec`，您有三个选择：

*   编写没有任何外壳“时髦的东西”的命令
*   复制 shell 在 Java 中的功能；例如用适当的东西替换前导波浪线¹，或
*   使用 exec 启动子 shell 来运行命令；例如

    ```
    Runtime.getRuntime().exec("/bin/sh", "-c", "~/test/bin/runScript_sh"); 
    ```

    在像这样的简单情况下，这可能是矫枉过正。但是，如果您尝试做更复杂的事情，那么子 shell 可以真正简化事情。

* * *

^(1 - 事实上，波浪线的完全兼容外壳的处理相当复杂。)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T14:22:16.167

您可以使用以下命令获取用户的主目录[`System.getProperty`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getProperty%28java.lang.String%29)：

```
command[0] = System.getProperty("user.home") + "/test/bin/runScript_sh"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T14:20:47.523

诸如`~`和之类的项目`$HOME`是外壳扩展

您必须在程序中展开这些项目，然后替换它们（提示：从 os 属性中获取它们，请参阅[此](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)页面）

# css - Css 选择取决于不同选择器的条件

> ID：15273526
> 
> 赞同：1
> 
> 时间：2013-03-07T14:18:23.940
> 
> 标签：css, css-selectors, conditional

是否可以定义 css 类的行为依赖于其他 css 类？

例如; 什么时候

```
a:hover 
```

然后我想设置

```
p {background:#fff;} 
```

纯CSS可以做到吗？

**编辑**：假设不存在嵌套关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:21:53.873

如果你有这样的结构：

```
<a><p>...</p></a> 
```

那么这个：

```
a:hover p {background: #fff;} 
```

将工作。但是，块元素不应该放在内联元素内（在这种情况下，没有`<p>`内`<a>`

如果您的标记是有效的，并且看起来像这样：

```
<p><a>...</a></p> 
```

那么你可以有

```
p:hover {background: #fff;} 
```

但是后代不能影响父 css（除非您使用 javascript），而相反是正确的（父 css 影响后代）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:25:09.063

如果您的意思是无论他们在 DOM 中的什么位置，您都希望所有人`p`都拥有这种风格，那么不，您不能那样做。当收到悬停时`a:hover`，您需要使用脚本将样式（或包含该样式的某个类）应用于`p`元素。`a`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:36:06.497

我不明白为什么你会受到这些限制而没有一点创造力。如果您使用固定定位，则后代可以与其父代重叠。并且仍然像后代一样回应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:06:13.450

如果`<p>`标签紧跟在`<a>`标签之后，那么您可以使用相邻的兄弟选择器，例如

```
a:hover+p{
    background:#fff;
} 
```

这在 IE8+ 中受支持

# android - 不使用 android 2.3 启动 MainActivity

> ID：15273528
> 
> 赞同：0
> 
> 时间：2013-03-07T14:18:26.310
> 
> 标签：android, android-intent

我想启动我的 MainActivity，在 android 2.3 中，它不会启动，但在 Jelly Bean 中它可以工作。我没有错误，没有任何反应！

我注意到当我使用 putExtra 时，它不起作用。有原因吗？

启动 MainActivity

```
final ComponentName cn = new ComponentName("de.application.ui", "de.application.ui.MainActivity");

    Intent intent = IntentCompat.makeRestartActivityTask(cn);
    intent.putExtra("de.application.exit", true); // I have this line in it yet
    activity.startActivity(intent); 
```

显现

```
<activity
        android:theme="@style/Theme"
        android:name=".ui.MainActivity"
        android:launchMode="singleTop">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity> 
```

**我的解决方案有效。**

启动 MainActivity

```
 Intent intent = new Intent(activity, MainActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intent.putExtra("de.application.exit", true);
    activity.finish();
    activity.startActivity(intent); 
```

显现

```
<activity
        android:theme="@style/Theme"
        android:name=".ui.MainActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:56:42.557

可能想试试这个：

```
 Intent intent = new Intent("android.intent.action.MAIN");
    intent.addCategory("android.intent.category.LAUNCHER");
    intent.setComponent(new ComponentName("de.application.ui", "de.application.ui.MainActivity"));
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.putExtra("de.application.exit", true);
    startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:29:02.137

我这样做是为了开始一个主要活动：

```
Intent intent = IntentCompat.makeRestartActivityTask(cn);
activity.startActivity(intent);

        Intent i =  new Intent("android.intent.action.MAIN");
        final ComponentName cn = new ComponentName  ("de.application.ui", "de.application.ui.MainActivity");

                        i.setComponent(n);                          

                    try {
                        startActivity(i);
                    } 
                    catch (ActivityNotFoundException e) {

                    } 
```

# javascript - 遍历用户选项并将它们分配给 CoffeeScript 中的对象实例

> ID：15273529
> 
> 赞同：0
> 
> 时间：2013-03-07T14:18:28.257
> 
> 标签：javascript, class, coffeescript

假设我在 CoffeeScript 中有这个类：

```
class Human
   constructor: ( options ) ->
       if options 
           for property of options
               opts[ property ] = options[ property ]

   printName: ->
       console.log 'My name is ' + opts.name

   opts =
       name: 'foo' 
```

如果我要在对象的多个实例中打印出 name 属性，我总是会得到相同的值：

```
a = new Human({name: 'bob'})
b = new Human({name: 'john'})

// a.printName() -> john
// b.printName() -> john 
```

但我想单独保存每个实例的值，如下所示：

```
// a.printName() -> bob
// b.printName() -> john 
```

现在我知道我必须使用`this.name`，但是我将如何使用一种方法来遍历一长串值并将它们分配给对象实例来实现呢？我不想像这样污染构造函数

```
constructor: ( @name, @surname, @age, ... ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:28:45.307

这应该有效：

```
class Human
   constructor: ( options ) ->
       @opts = default_ops
       if options 
           for property of options
               @opts[ property ] = options[ property ]

   printName: ->
       console.log 'My name is ' + @opts.name

   default_ops =
       name: 'foo' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:49:45.243

好的，将对象作为参数传递给构造函数作为参考工作。感谢 Amber 的提醒。

```
class Human
   constructor: ( @opts, options ) ->
       if options 
           for property of options
               @opts[ property ] = options[ property ]

   printName: ->
       console.log 'My name is ' + @opts.name

   @opts =
       name: 'foo' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:05:17.260

`underscore`您可以使用来自（或提供类似功能的任何其他库）的一些帮助以非常简单易读的方式编写它`extend`：

```
class Human
  DEFAULTS:
    name: 'default name'

  constructor: (opts = {}) ->
    @opts = _.extend {}, @DEFAULTS, opts

  printName: ->
    console.log 'My name is ' + @opts.name 
```

顺便说一句，您可以将道具直接附加到实例：

```
class Human
  DEFAULTS:
    name: 'default name'

  constructor: (opts = {}) ->
    _.extend @, @DEFAULTS, opts

  printName: ->
    console.log 'My name is ' + @name 
```

# ruby-on-rails - 自动刷新 无需重新加载整个页面

> ID：15273540
> 
> 赞同：13
> 
> 时间：2013-03-07T14:18:45.083
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我正在尝试更新“mydiv”的内容而不刷新整个索引页面。@mydata 由 mycontroller 提供。我需要每隔*n*秒重新计算一次并将其传递给“mydiv”

使用“link_to”它可以工作！

**index.html.erb**

```
<%=
    link_to('refresh', '/mycontroller/index', :remote => true)
%>

<div id="mydiv">
    <%=
        @mydata
    %>
</div> 
```

**index.js.erb**

```
$('#mydiv').html('<%= escape_javascript(@mydata) %>') 
```

现在我需要每隔*n*秒自动刷新“mydiv”的内容（所以不用点击链接）。我尝试了以下解决方案：

*   [第一个链接](https://stackoverflow.com/questions/220767/auto-refreshing-div-with-jquery)
*   [第二环节](https://stackoverflow.com/questions/5052543/how-to-fire-ajax-request-periodically)

但没有运气。

在我的**application.js**中，我写了这个：

```
function executeQuery() {
  $.ajax({
    //url: '/index',
    success: function(data) {
      $('#mydiv').html(data)
    }
  });
  setTimeout(executeQuery, 500);
}

$(document).ready(function() {
  setTimeout(executeQuery, 500);
}); 
```

* * *

**对于面临同样问题的人，我通过替换解决了**

```
$('#mydiv').html(data) 
```

和

```
$('#mydiv').load('/mycontroller/index #mydiv') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-09T09:43:30.213

使用`setInterval()`而不是使用`setTimeout()`.

**参考：** [https ://www.w3schools.com/jsref/met_win_setinterval.asp](https://www.w3schools.com/jsref/met_win_setinterval.asp)

```
function executeQuery() {
  $.ajax({
    type: 'GET',
    url: 'example.com/url/', // Provide your response URL here.
    success: function(data) {
      $('#mydiv').html(data);
    }
  });
}

setInterval(executeQuery(), (n * 1000)); // Replace 'n' with how many seconds you want. 
```

此代码将`executeQuery()`每隔“n”秒间隔运行该方法。这样你的要求就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T13:38:00.483

在操作中将布局设置为 false 并仅传递相关内容，而不是整个页面

```
def action1
   <your code here>
end
def action2
   <your code here>
   render :layout => false
end 
```

您的 action2 视图应包含仅与 #mydiv 相关的内容。

更好的解决方案是使用单个操作并根据请求类型更改渲染选项。（Ajax 或非 ajax）

# querydsl - QueryDSL：从 PathBuilder 生成谓词

> ID：15273542
> 
> 赞同：2
> 
> 时间：2013-03-07T14:18:52.050
> 
> 标签：querydsl

如何用 PathBuilder 替换以下使用生成的 Q* 类和 java 反射的方法？

```
// member vars:
T operand;  // can be a BigDecimal or a String
String tableName;
String fieldName;
String methodName;

public Predicate asPredicate()
{
   Class<?> tableClazz = Class.forName("foo.bar.database.model.Q"+ WordUtils.capitalize(tableName));
   Object tableObj = tableClazz.getConstructor(String.class).newInstance(tableName +"1000");
   Field colField = tableClazz.getDeclaredField(fieldName);
   Object colObj = colField.get(tableObj);

   Class classParam = Object.class;
   if(methodName.matches(".*like"){
     classParam = String.class;
   }
   // method name is one of eq, ne, like...
   Method m = colObj.getClass().getMethod(methodName, classParam );
   return (Predicate) m.invoke(colObj, operand);
} 
```

这很好用，但我被建议使用 PathBuilder 来回答我的其他问题[https://stackoverflow.com/questions/15269845/querydsl-extract-table-name-from-predicate-booleanexpression-object](https://stackoverflow.com/questions/15269845/querydsl-extract-table-name-from-predicate-booleanexpression-object#15270675)）这也将删除尴尬的 newInstance(tableName +"1000")。

```
PathBuilder<?> entityPath = new PathBuilder("foo.bar.database.model.Q"+ WordUtils.capitalize(tableName), "entity"); // what does the second param stand for?
PathBuilder relation = entityPath.get(fieldName);
// ??? 
```

两个问题：1）我现在可以在关系上调用 eq() 或 ne()，但不能调用 like()、notLike() 2) 如何获取 colObj 以便可以使用 java 反射 colObj.getClass().getMethod(. ..)

**解决方案：** 感谢 Timo 的回答，除了两个 instanceof 条件外，我完全放弃了反射，现在使用此代码：

```
tableClazz = Class.forName("foo.bar.database.model."+ WordUtils.capitalize(tableName));
PathBuilder<?> entityPath = new PathBuilder(tableClazz, tableName +"1000");
Predicate predicate = null;

if(operand instanceof String){
   StringPath path = entityPath.getString(fieldName);
   switch(type){
       case EQ:
          predicate = path.eq((String) operand);
       case CONTAINS:
          predicate = path.like("%" + operand +"%");
          break;
      // snip BEGINS WITH, ENDS WITH
    }
}else if(operand instanceof BigDecimal){
    assert(type.equals(Type.EQ));
    NumberPath<BigDecimal> path = entityPath.getNumber(fieldName, BigDecimal.class);
    predicate = path.eq((BigDecimal) operand);
}
if(negation){
  return predicate.not();
}
return predicate; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T14:28:40.860

你应该像这样使用它

```
// entityClass is the entity type, not the Q-type
Class<?> entityClass = Class.forName(...)
// "entity" is the variable name of the path
PathBuilder<?> entityPath = new PathBuilder(entityClass, "entity"); 
// use getString to get a String path
Predicate predicate = entityPath.getString("property").like("a%"); 
```

# c# - SELECT 后是否立即返回 ExecuteScalar？

> ID：15273547
> 
> 赞同：5
> 
> 时间：2013-03-07T14:19:02.350
> 
> 标签：c#, .net, sql-server, executescalar

我最近注意到了一些有趣的行为。

当使用*SqlCommand.ExecuteScalar()*运行 MS SQL 存储过程时，我的应用程序似乎完全不知道*SELECT*完成后出现的任何 SQL 错误或 PRINT。

最可能的解释是，在任何 SELECT 结果出现后立即向 C# 提供流控制，而无需等待存储过程完成（尽管存储过程在下面默默地继续执行）。

明显的优势是性能提升（无需等待，因为结果是已知的），不幸的是 C# 应用程序不知道在那之后可能发生的任何 SQL 异常。

谁能证实我的解释？这种行为可以改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:16:30.500

ExecuteNonQuery 方法将调用“ExecuteReader”并立即对返回的阅读器对象调用“Close”。ExecuteScalar 将调用一次“Read”，取出第一个值（索引 0），然后调用“Close”。

由于 DataReader 本质上只不过是一个专门的网络流，因此在其当前位置（调用 Close 时）之后返回的任何信息将永远不会到达实际的客户端组件，即使服务器*可能*已经发送了它。这样的实现是为了避免在不需要时返回大量数据。

在你的情况下，我看到了这个问题的两种解决方案。

1.  确保您改用 ExecuteReader，并一直阅读结果：

    ```
    using(var reader = command.ExecuteReader())
    {
        do 
        {
              while (reader.Read()) { /* whatever */ };
        } while (reader.NextResult());
    } 
    ```

2.  如果您可以控制服务器端，这将有助于将实际的“发送到客户端”选择移动到有问题的过程或批处理的末尾。像这样：

    ```
    create proc Demo
    as
    declare @result int
    select top 1 @result = Id from MyTable where Name = 'testing'
    print 'selected result...'
    select @result Id  -- will send a column called "Id" with the previous value
    go 
    ```

# jquery - 一页上的多个jquery切换

> ID：15273548
> 
> 赞同：0
> 
> 时间：2013-03-07T14:19:04.507
> 
> 标签：jquery, toggle

您好我正在尝试使用 div 让 jquery 切换的多个实例在单个页面上工作。当前的小提琴在这里：http: [//jsfiddle.net/sketch360/kX34v/](http://jsfiddle.net/sketch360/kX34v/) 我正在使用简单的javascript：

```
$(".toggle-title").click(function () {
    $(".toggle-details").toggle("fast");
}); 
```

不幸的是，目前，切换任何标题都会显示所有结果，因为显然它们都带有相同的类，但我找不到一种方法来激活属于其父级的子 div，而不激活其他子级.

我试图找到一种方法来做到这一点，而不必过多地修改 html，即为每个孩子设置不同的类。

我已经看过 Jeff 的回答：[fiddle](http://jsfiddle.net/sYPWN)，虽然它在小提琴中运行良好，但在我的（wordpress）网站中似乎不起作用。我上面的小提琴正在工作，只是没有我所追求的独立切换动作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:20:48.180

你不应该那样做。您以这种方式切换所有内容。因此，以这种方式更改您的代码：

```
$(".toggle-title").click(function () {
    $(this).next(".toggle-details").toggle("fast");
}); 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/kX34v/1/](http://jsfiddle.net/praveenscience/kX34v/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:34:15.507

如果您使用 jquery 1.2 或更高版本，以下一个也可以使用

```
$(".toggle-title").click(function () {        
     $(this).nextAll(".toggle-details").first().toggle("fast");
}); 
```

这是小提琴[http://jsfiddle.net/kX34v/3/](http://jsfiddle.net/kX34v/3/)

# .net - 使用 MSBuild，我如何从命令行构建 MVC4 解决方案（在过程中应用 Web.config 转换）并输出到文件夹？

> ID：15273551
> 
> 赞同：10
> 
> 时间：2013-03-07T14:19:13.253
> 
> 标签：.net, deployment, msbuild, msdeploy

我认为问题标题几乎说明了一切，但为了清楚起见，我试图：

1.  从命令行 (MSBuild) 构建 VS2010 ASP.NET MVC4 解决方案，指定解决方案配置（例如发布）
2.  在此过程中为该配置应用任何 Web.config 转换
3.  将结果输出到本地计算机上的文件夹中（没有 IIS、代理、zip 文件、FTP、包等，只是一个包含运行该网站所需的所有文件的文件*夹）*

近一周以来，我一直在尝试通过 Microsoft 文档（非常无用）、关于 SO 和一般谷歌搜索的其他答案来解决这个问题。我不知道我是否只是没有得到它（这完全有可能），或者 MSBuild/MSDeploy 是否真的是它目前看起来的神秘混乱。

有没有一种相当简单的方法来实现这一目标？请帮忙！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-09T23:28:13.073

如果您运行的是 VS2010：确保安装了 Azure 1.7+ SDK（即使您没有发布到 Azure，它也会将 VS2012 发布功能添加到 VS2010）

VS2012+ 内置了这些功能

```
msbuild ProjectFile.csproj /p:Configuration=Release ^
                           /p:Platform=AnyCPU ^
                           /t:WebPublish ^
                           /p:WebPublishMethod=FileSystem ^
                           /p:DeleteExistingFiles=True ^
                           /p:publishUrl=c:\output 
```

或者，如果您正在构建解决方案文件：

```
msbuild Solution.sln /p:Configuration=Release ^ 
                     /p:DeployOnBuild=True ^
                     /p:DeployDefaultTarget=WebPublish ^
                     /p:WebPublishMethod=FileSystem ^
                     /p:DeleteExistingFiles=True ^
                     /p:publishUrl=c:\output 
```

无论哪种方式，您还可以设置`/p:PrecompileBeforePublish=true`并且输出将是站点的预编译版本。

安装 Azure SDK 后，您通常会创建一个发布配置文件并简单地使用`/p:PublishProfile=DeployToFolder`，但我已经为您提供了手动命令行，以防您对新的发布内容不感兴趣。

# java - 不使用注解参数“targetEntity”的休眠接口映射

> ID：15273553
> 
> 赞同：7
> 
> 时间：2013-03-07T14:19:23.397
> 
> 标签：java, hibernate, jpa, jpa-2.0

我最近试图为我的一些休眠映射实体引入接口，但不知道如何配置映射。

当我在没有任何进一步声明的情况下使用接口时，我总是得到以下异常：

```
org.hibernate.MappingException: Could not determine type for: ...MyInterface 
```

然后我发现一切正常，当我明确定义 targetEntity 时：

```
 @OneToOne(targetEntity=InterfaceImpl.class)
   private MyInterface myInterface; 
```

不幸的是，这个解决方案在我的情况下不起作用：我无法通过注释定义 targetEntity，因为我想将这个类提取到一个不包含甚至不知道接口的最终实现的公共外部库中。

那么有没有另一种方法来声明应该使用哪个实现，我可以在提取的库之外使用？![在此处输入图像描述](../Images/b68a92bfe35607e14da356b8a3758d90.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:53:13.697

在抽象中定义您的映射契约，`@MappedSupperclass` 然后`@AssociationOverride`在实现类中覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:37:22.913

我不确定带有休眠注释的事情是如何工作的，但我做了类似的描述[here](https://forum.hibernate.org/viewtopic.php?p=2438357)

请参阅上一篇文章以获得非常详尽的解释。

从某种意义上说，基本需求是相似的，我们在休眠映射文件中指定了接口，并且实现是主要在运行时使用 javassist 创建的类（它们是不存在的编译时）。

您需要的是可以在运行时从接口解析实现类的代码，反之亦然，并使用 hibernate tuplizer/instantiator 契约作为扩展点以允许休眠

(a) 当它需要从 DB 填充实体时创建实现实例，并且 (b) 当它需要将实体（实现实例）存储到 DB 时定位休眠映射元数据。

# c# - c#登录页面SQL错误

> ID：15273554
> 
> 赞同：0
> 
> 时间：2013-03-07T14:19:25.077
> 
> 标签：c#, login

c#代码：

```
 namespace WpfApplication22
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            private void button1_Click(object sender, EventArgs e)
            {

                SqlConnection conn = new SqlConnection(@"data source=(local);database=Aukcija;integrated security=true;");
                SqlCommand cmd = new SqlCommand ("Select * from Users where username='"textBox1.Text +"' and pasword= '"textBox2.Text +"' ", conn);
                conn.Open();

    }
            }
        } 
```

这有什么问题，我收到 11 个错误...谁能帮助我？

![http://i.stack.imgur.com/rGCbZ.jpg](../Images/adfd1d244ae96a3f1649c52ab9b1acad.png)错误列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:20:59.187

您在 textBoxes 文本之前丢失了“+”号。

```
SqlCommand cmd = new SqlCommand ("Select * from Users where username='" + textBox1.Text +"' and pasword= '" + textBox2.Text + "' ", conn); 
```

但是在这种情况下你最好使用命令参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:26:48.177

`SqlCommand cmd = new SqlCommand("Select * from Users where username='" + textBox1.Text + "' and password= '" + textBox2.Text + "' ", conn);`

您在阅读文本框文本之前缺少`+`标志，并且您`password`在查询中拼写错误。

但是你真的应该放弃这个并改用[参数化查询](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)。你让自己容易受到[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:27:21.913

我想说已经给出了正确的答案，但是通过将文本框的内容直接注入 SQL 命令中，您也犯了一个巨大的错误。这使得它容易受到 SQL 注入攻击的影响，这可能会破坏您的整个数据库。

总是，总是使用参数来避免这个问题。

```
SqlConnection conn = new SqlConnection(@"data source=(local);database=Aukcija;integrated security=true;");
                SqlCommand cmd = new SqlCommand ("Select * from Users where username=@username and pasword=@password ", conn);
cmd .Parameters.AddWithValue("username", textBox1.Text);
cmd .Parameters.AddWithValue("password", textBox2.Text);
                conn.Open(); 
```

在这里阅读更多：

[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:24:20.957

应该

```
SqlCommand cmd = new SqlCommand (
"Select * from Users where username='" + textBox1.Text + "' and password= '" + textBox2.Text + "'", conn); 
```

您想通过使用以下内容来避免[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)

```
SqlCommand.CommandText = "SELECT * FROM tblTable WHERE TableID = @Parameter";
SqlCommand.Parameters.Add(new SqlParameter("@Parameter", parameterValue)); 
```

# javascript - 如果在滚动条启动后插入内容，Nanoscroller 不会创建滚动条

> ID：15273556
> 
> 赞同：3
> 
> 时间：2013-03-07T14:19:39.650
> 
> 标签：javascript, jquery

我正在使用[nanoscroller js](https://github.com/jamesflorentino/nanoScrollerJS)`div`在元素中创建可滚动区域。问题是我正在`div`用 ajax 数据填充该元素（想象一下 facebook 通知）。首先有 0 个通知，没有数据。然后我用 10 填充它。滚动条不存在。当我刷新页面时（现在已经有 10 个通知），它会自行创建，因为它知道内容多于空间。

填充数据后如何使其创建滚动条？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T14:25:45.653

重新初始化 nanoScroller $("your scrollable").nanoScroller(); 插入内容后...

像

```
$("your content div").append("something");
$("your scrollable container").nanoScroller(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-24T07:21:11.607

@Jonatas Answer 对我不起作用，然后我想出了这个

`$("#my_scrollable_container")[0].nanoscroller.reset();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-24T18:49:21.080

我有一个类似的问题。我的 nano div 原本是填满屏幕的宽度，内容量不需要滚动条。但是随后用户操作导致第二个 div 出现在右侧，使 nano div 更小，无法显示所有内容 - 但滚动条没有出现（尽管我仍然可以使用鼠标滚轮滚动纳米含量）。

提供的答案都不适合我，或者我可能错误地应用了它们。所以我查看了 jquery.nanoscroller.js 代码（我想这是我首先应该做的），发现调用只是：

> $(".nano").nanoScroller();

无需引用 div ID 或任何东西。每次更改 nano div 的大小时，进行此调用，nano 滚动条应调整以适应。如果页面中有多个 nano div，则此调用将重置所有这些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-05T21:17:49.760

小心使用这样的东西：

`$(".nano").nanoScroller();`

因为如果 U 有很多 .nano DIV 和 U Ajaxing 数据到其中一个，最好使用例如：

`$("#FaceBookAjaxNotifi .nano").nanoScroller();` 正如乔纳塔斯所写..

**（在某些情况下会显着提高性能）**

# cocoa - NSTableView + NSSegmentedControl + NSSegmentSwitchTrackingSelectAny

> ID：15273559
> 
> 赞同：0
> 
> 时间：2013-03-07T14:19:43.153
> 
> 标签：cocoa, nstableview, nssegmentedcontrol

我有一个表格视图，其中最右边的列有一个 NSSegmentedCell。

从中提取单元格的 NSSegmentedControls 使用“任何”跟踪模式（又名：多选），并且根据可能值为 1、2 和 4 的位域选择段。值为 1 表示 A|b |c。2是a|B|c。4是a|b|C。3 是 A|B|c 等等...

该位域由数据源的 tableView:objectValueForTableColumn:row: 方法返回，单元格在委托的 tableView:dataCellForTableColumn:row: 方法中返回。

在 tableView:dataCellForTableColumn:row: 中单独设置单元格不会做任何事情，因为表视图调用 tableView:objectValueForTableColumn:row: 之后就可以获取该列的值，然后使用它来设置“值”分段控制/单元。

问题就在那个时候。

看起来位域被误解为段的索引值：0 表示 A，1 表示 B，2 表示 C（和 -1 表示无选择）......假设单选。

如何进行此设置，以便表格视图正确设置多个段？（例如：位域 3 = A|B|c）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-19T13:05:33.227

我是这样做的，它可以工作：
1）确保您在tableview的数据源/委托方法中引用了分段控制单元格；在我的项目中，我只是在我的视图控制器类中将分段控制单元与插座属性连接起来

2）从表的数据源 getter 方法中为具有分段控制的列返回任何内容（在我的项目中，repeatDays 是该列的标识符），例如，零

```
 - (id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)rowIndex {
    NSString *colId = [tableColumn identifier];

    if ([colId isEqualToString:@"repeatDays"]) {
        return nil;
    }

    //handle other columns
} 
```

3）实现tableview的委托willDisplayCell方法

```
- (void)tableView:(NSTableView *)tableView willDisplayCell:(id)cell forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    NSString *colId = [tableColumn identifier];

    if ([colId isEqualToString:@"repeatDays"]) {
        for (int i = 0; i < self.segmentedCell.segmentCount; ++i) {
            BOOL selected = [[self.days objectForKey:[NSNumber numberWithInt:i]] boolValue];
            [self.segmentedCell setSelected:selected forSegment:i];
        }
    }
} 
```

您需要在表格视图即将显示时配置分段单元格，根据您的模型详细信息进行配置，例如，在我的项目中我有一个可变字典days，它包含与段对应的布尔值，如{0：NO , 1: YES, 2: NO, 3:YES, 4:NO, 5:NO, 6:NO}，其中 0, 1, 2, 3, 4, 5, 6 - 段，YES/NO - 是否segment selected or no

4) 最后，实现tableview的datasource setter方法；传递给它的对象是点击段索引；适当修改您的模型，即为单击的段索引翻转标志：

```
- (void)tableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    NSString *colId = [tableColumn identifier];

    if ([colId isEqualToString:@"repeatDays"]) {
        int i = [object intValue];
        BOOL selected = [[self.days objectForKey:[NSNumber numberWithInt:i]] boolValue];
        [self.days setObject:[NSNumber numberWithBool:!selected] forKey:[NSNumber numberWithInt:i]];
    }
} 
```

# php - 在多页中显示帖子缩略图导航链接

> ID：15273561
> 
> 赞同：0
> 
> 时间：2013-03-07T14:19:50.913
> 
> 标签：php, wordpress

我为我的 WordPress 创建了一个导航，导航获取页面的标题并按标题显示它们。

现在我想将联系人标题更改为图像（当然是邮件图标）。

我在联系页面中添加了一张特色图片。我可以调用缩略图

```
<?php echo get_the_post_thumbnail(); ?> 
```

问题是缩略图仅在我位于添加缩略图的联系页面内时显示。

我可以在我创建的每个页面中添加图像，但它必须是另一种更好的方法。

这是我的导航代码。

```
 <ul id="nav">
   <?php wp_list_pages('exclude=19&title_li=', 'sort_column=menu_order'); ?>
     <?php echo get_the_post_thumbnail(); ?> 
               </ul> 
```

如您所见，我不包括第 19 页，因此它不会显示在导航中。但我可以用`get_the_post_thumbnail`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:01:44.457

经过一番搜索，我发现我一点也不难。

如果我想使用第 19 页的缩略图，我就写

```
<?php echo get_the_post_thumbnail('19'); ?> 
```

# android - android singleTask 活动

> ID：15273568
> 
> 赞同：1
> 
> 时间：2013-03-07T14:19:57.260
> 
> 标签：android, android-activity, activity-lifecycle

查看活动生命周期，在 android[文档](http://developer.android.com/guide/components/tasks-and-back-stack.html)中找到以下图像：

![在此处输入图像描述](../Images/dbcdff2004b73687f94ab25c910a1a11.png)

怎么能`Activity Y`声明为`singleTask`？这是一项任务的首要任务！据我了解，它应该始终作为任务的根活动（位于堆栈的底部）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:38:34.850

您在定义活动的 AndroidManifest.xml 中定义它。将启动模式设置为 singleTask：

```
 <activity
        android:name="package.YourActivity"
        android:launchMode="singleTask"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T06:01:00.000

当我们像下面的代码片段一样定义您的活动时。

```
 <activity
    android:name="package.YourActivity"
    android:launchMode="singleTask"/> 
```

它不会创建新任务，而是在当前任务中叠加。但是当你这样定义时

```
 <activity
    android:name="package.YourActivity"
    android:launchMode="singleTask"
    android:taskAffinity="com.some.somename"/> 
```

它将以 Activity 为根创建一个新任务 (com.some.somename)。

# mysql - 如何在春季使用 Hibernate 从子查询中的一对一关系中获取数据

> ID：15273569
> 
> 赞同：0
> 
> 时间：2013-03-07T14:19:59.993
> 
> 标签：mysql, spring, hibernate

我有两张桌子`hesk_users`，`user`如下所示。

@Entity @Table(name="hesk_users") 公共类 UserHesk {

```
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column
private int id;

@OneToOne
@JoinColumn(name="user_id")
private User user;

    set.... get.. 
```

}

@Entity @Table(name="user") 公共类用户实现可序列化 {

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private int id;

@NotEmpty
@Column
private String firstname;

     @OneToOne(mappedBy="user")
private UserHesk userHesk; 

    set ... get ... 
```

}

我有休眠查询，但它不起作用..

```
 DetachedCriteria detachedCriteria=DetachedCriteria.forClass(UserHesk.class)
    .setProjection(Projections.property("user_id"));

    Criteria criteria=sessionFactory.getCurrentSession().createCriteria(User.class);
    criteria.add(Property.forName("id").notIn(detachedCriteria));
    User user=(User)criteria.list().get(0);
    System.out.println(user.getFirstname());
    System.out.println("Subquery Size "+criteria.list().size()); 
```

`user_id`归档错误。由于关系无法得到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:29:35.443

HQL 和条件查询始终使用实体类和属性。永远不要使用基础表和列的名称。UserHesk 类没有任何`user_id`属性。它有一个`user`属性。

所以代码应该是

```
DetachedCriteria detachedCriteria = 
    DetachedCriteria.forClass(UserHesk.class)
                    .setProjection(Projections.property("user.id")); 
```

甚至

```
DetachedCriteria detachedCriteria = 
    DetachedCriteria.forClass(UserHesk.class)
                    .createAlias("user", "u")
                    .setProjection(Projections.property("u.id")); 
```

# php - 发送http响应后继续处理php

> ID：15273570
> 
> 赞同：126
> 
> 时间：2013-03-07T14:20:02.003
> 
> 标签：php, http, response

我的脚本由服务器调用。从服务器我会收到`ID_OF_MESSAGE`和`TEXT_OF_MESSAGE`.

在我的脚本中，我将处理传入的文本并使用 params:`ANSWER_TO_ID`和生成响应`RESPONSE_MESSAGE`。

问题是我正在发送对 incomming 的响应`"ID_OF_MESSAGE"`，但是在收到 http 响应 200 后，向我发送消息以处理的服务器会将他的消息设置为已发送给我（这意味着我可以向他发送对该 ID 的响应）。

一种解决方案是将消息保存到数据库并制作一些每分钟运行的 cron，但我需要立即生成响应消息。

是否有一些解决方案如何发送到服务器 http 响应 200 而不是继续执行 php 脚本？

十分感谢

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2013-03-07T14:24:42.327

是的。你可以这样做：

```
ignore_user_abort(true);//not required
set_time_limit(0);

ob_start();
// do initial processing here
echo $response; // send the response
header('Connection: close');
header('Content-Length: '.ob_get_length());
ob_end_flush();
@ob_flush();
flush();
fastcgi_finish_request();//required for PHP-FPM (PHP > 5.3.3)

// now the request is sent to the browser, but the script is still running
// so, you can continue...

die(); //a must especially if set_time_limit=0 is used and the task ends 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2015-02-26T09:05:05.030

我在这里看到很多建议使用的回复，`ignore_user_abort(true);`但这段代码不是必需的。所有这一切都是为了确保您的脚本在用户中止（通过关闭浏览器或按转义键停止请求）的情况下在发送响应之前继续执行。但这不是你要问的。您要求在发送响应后继续执行。您只需要以下内容：

```
// Buffer all upcoming output...
ob_start();

// Send your response.
echo "Here be response";

// Get the size of the output.
$size = ob_get_length();

// Disable compression (in case content length is compressed).
header("Content-Encoding: none");

// Set the content length of the response.
header("Content-Length: {$size}");

// Close the connection.
header("Connection: close");

// Flush all output.
ob_end_flush();
@ob_flush();
flush();

// Close current session (if it exists).
if(session_id()) session_write_close();

// Start your background work here.
... 
```

如果您担心您的后台工作将花费比 PHP 的默认脚本执行时间限制更长的时间，那么请坚持 `set_time_limit(0);`在顶部。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2016-08-12T12:39:04.490

如果您使用 FastCGI 处理或 PHP-FPM，您可以：

```
session_write_close(); //close the session
ignore_user_abort(true); //Prevent echo, print, and flush from killing the script
fastcgi_finish_request(); //this returns 200 to the user, and processing continues

// do desired processing ...
$expensiveCalulation = 1+1;
error_log($expensiveCalculation); 
```

来源：[https ://www.php.net/manual/en/function.fastcgi-finish-request.php](https://www.php.net/manual/en/function.fastcgi-finish-request.php)

PHP 问题 #68722：[https ://bugs.php.net/bug.php?id=68772](https://bugs.php.net/bug.php?id=68772)

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2017-02-15T09:23:37.837

我在这个问题上花了几个小时，我已经有了这个适用于 Apache 和 Nginx 的功能：

```
/**
 * respondOK.
 */
protected function respondOK()
{
    // check if fastcgi_finish_request is callable
    if (is_callable('fastcgi_finish_request')) {
        /*
         * This works in Nginx but the next approach not
         */
        session_write_close();
        fastcgi_finish_request();

        return;
    }

    ignore_user_abort(true);

    ob_start();
    $serverProtocole = filter_input(INPUT_SERVER, 'SERVER_PROTOCOL', FILTER_SANITIZE_STRING);
    header($serverProtocole.' 200 OK');
    header('Content-Encoding: none');
    header('Content-Length: '.ob_get_length());
    header('Connection: close');

    ob_end_flush();
    ob_flush();
    flush();
} 
```

您可以在长时间处理之前调用此函数。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-06-03T00:42:12.690

稍微修改了@vcampitelli 的答案。不要认为你需要`close`标题。我在 Chrome 中看到重复的关闭标题。

```
<?php

ignore_user_abort(true);

ob_start();
echo '{}';
header($_SERVER["SERVER_PROTOCOL"] . " 202 Accepted");
header("Status: 202 Accepted");
header("Content-Type: application/json");
header('Content-Length: '.ob_get_length());
ob_end_flush();
ob_flush();
flush();

sleep(10); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-05-18T11:00:07.350

我为此使用了 php 函数 register_shutdown_function。

```
void register_shutdown_function ( callable $callback [, mixed $parameter [, mixed $... ]] ) 
```

[http://php.net/manual/en/function.register-shutdown-function.php](http://php.net/manual/en/function.register-shutdown-function.php)

**编辑**：以上不起作用。似乎我被一些旧文档误导了。[自 PHP 4.1链接](https://bugs.php.net/bug.php?id=15209) [链接](http://www.nusphere.com/kb/phpmanual/function.register-shutdown-function.htm?)以来 register_shutdown_function 的行为发生了变化

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-02-01T00:55:33.327

我无法安装 pthread，以前的解决方案都不适合我。我发现只有以下解决方案可以工作（参考：[https](https://stackoverflow.com/a/14469376/1315873) ://stackoverflow.com/a/14469376/1315873 ）：

```
<?php
ob_end_clean();
header("Connection: close");
ignore_user_abort(); // optional
ob_start();
echo ('Text the user will see');
$size = ob_get_length();
header("Content-Length: $size");
ob_end_flush(); // Strange behaviour, will not work
flush();            // Unless both are called !
session_write_close(); // Added a line suggested in the comment
// Do processing here 
sleep(30);
echo('Text user will never see');
?> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-06-17T07:59:48.330

我在 2012 年 4 月向 Rasmus Lerdorf 提出了这个问题，引用了这些文章：

*   [https://www.zulius.com/how-to/close-browser-connection-continue-execution/](https://www.zulius.com/how-to/close-browser-connection-continue-execution/)
*   [尽早关闭连接](https://stackoverflow.com/questions/138374/close-a-connection-early)
*   [http://php.net/manual/en/features.connection-handling.php](http://php.net/manual/en/features.connection-handling.php)

我建议开发一个新的 PHP 内置函数来通知平台不会生成进一步的输出（在标准输出上？）（这样的函数可能会关闭连接）。拉斯穆斯·勒多夫回应：

> 见[齿轮人](http://gearman.org/)。您真的不希望您的前端 Web 服务器像这样进行后端处理。

我可以理解他的观点，并支持他对某些应用程序/加载场景的意见！然而，在其他一些场景下，vcampitelli 等人的解决方案是好的。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-08-11T13:06:14.513

我有一些可以压缩和发送响应并让其他 php 代码执行的东西。

```
function sendResponse($response){
    $contentencoding = 'none';
    if(ob_get_contents()){
        ob_end_clean();
        if(ob_get_contents()){
            ob_clean();
        }
    }
    header('Connection: close');
    header("cache-control: must-revalidate");
    header('Vary: Accept-Encoding');
    header('content-type: application/json; charset=utf-8');
    ob_start();
    if(phpversion()>='4.0.4pl1' && extension_loaded('zlib') && GZIP_ENABLED==1 && !empty($_SERVER["HTTP_ACCEPT_ENCODING"]) && (strpos($_SERVER["HTTP_ACCEPT_ENCODING"], 'gzip') !== false) && (strstr($GLOBALS['useragent'],'compatible') || strstr($GLOBALS['useragent'],'Gecko'))){
        $contentencoding = 'gzip';
        ob_start('ob_gzhandler');
    }
    header('Content-Encoding: '.$contentencoding);
    if (!empty($_GET['callback'])){
        echo $_GET['callback'].'('.$response.')';
    } else {
        echo $response;
    }
    if($contentencoding == 'gzip') {
        if(ob_get_contents()){
            ob_end_flush(); // Flush the output from ob_gzhandler
        }
    }
    header('Content-Length: '.ob_get_length());
    // flush all output
    if (ob_get_contents()){
        ob_end_flush(); // Flush the outer ob_start()
        if(ob_get_contents()){
            ob_flush();
        }
        flush();
    }
    if (session_id()) session_write_close();
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-08-26T08:26:03.913

在使用 php file_get_contents 的情况下，连接关闭是不够的。php 仍然等待服务器发送的 eof 女巫。

我的解决方案是阅读“内容长度：”

这是示例：

响应.php：

```
 <?php

ignore_user_abort(true);
set_time_limit(500);

ob_start();
echo 'ok'."\n";
header('Connection: close');
header('Content-Length: '.ob_get_length());
ob_end_flush();
ob_flush();
flush();
sleep(30); 
```

注意响应关闭行的“\n”，如果不是等待 eof 时读取的 fget。

阅读.php：

```
<?php
$vars = array(
    'hello' => 'world'
);
$content = http_build_query($vars);

fwrite($fp, "POST /response.php HTTP/1.1\r\n");
fwrite($fp, "Content-Type: application/x-www-form-urlencoded\r\n");
fwrite($fp, "Content-Length: " . strlen($content) . "\r\n");
fwrite($fp, "Connection: close\r\n");
fwrite($fp, "\r\n");

fwrite($fp, $content);

$iSize = null;
$bHeaderEnd = false;
$sResponse = '';
do {
    $sTmp = fgets($fp, 1024);
    $iPos = strpos($sTmp, 'Content-Length: ');
    if ($iPos !== false) {
        $iSize = (int) substr($sTmp, strlen('Content-Length: '));
    }
    if ($bHeaderEnd) {
        $sResponse.= $sTmp;
    }
    if (strlen(trim($sTmp)) == 0) {
        $bHeaderEnd = true;
    }
} while (!feof($fp) && (is_null($iSize) || !is_null($iSize) && strlen($sResponse) < $iSize));
$result = trim($sResponse); 
```

如您所见，如果达到内容长度，则此脚本不会等待 eof。

希望它会有所帮助

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-07-19T01:33:08.587

如果您不想篡改响应标头，还有另一种方法值得考虑。如果你在另一个进程上启动一个线程，被调用的函数不会等待它的响应，而是会返回一个最终的 http 代码给浏览器。您将需要配置**[pthread](http://php.net/manual/kr/pthreads.installation.php)**。

```
class continue_processing_thread extends Thread 
{
     public function __construct($param1) 
     {
         $this->param1 = $param1
     }

     public function run() 
     {
        //Do your long running process here
     }
}

//This is your function called via an HTTP GET/POST etc
function rest_endpoint()
{
  //do whatever stuff needed by the response.

  //Create and start your thread. 
  //rest_endpoint wont wait for this to complete.
  $continue_processing = new continue_processing_thread($some_value);
  $continue_processing->start();

  echo json_encode($response)
} 
```

一旦我们执行*$continue_processing->start()* PHP 将不会等待该线程的返回结果，因此只要考虑 rest_endpoint。它完成了。

一些帮助 pthreads 的链接

*   [如何在 PHP 应用程序中使用多线程](https://stackoverflow.com/questions/70855/how-can-one-use-multi-threading-in-php-applications)
*   [http://php.net/manual/kr/pthreads.installation.php](http://php.net/manual/kr/pthreads.installation.php)

祝你好运。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-06T06:40:14.240

除了答案之外，我还返回了一个 JSON 字符串作为响应。我发现响应因未知原因而被截断。解决问题的方法是增加额外的空间：

```
echo $json_response;
//the fix
echo str_repeat(' ', 10); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-25T14:39:29.927

除了所有其他出色的答案之外，我还有一个重要的补充！
TL;DR：
添加

```
echo str_repeat(' ', 1024); 
```

在我的用例中，我想将 API 调用标记为“已接受”，并且不要让客户端等待完成处理。

实际上感觉是对的：客户端在收到“Connection: close”标头时应该停止等待答案，但实际上至少我的 php 还没有发送这些标头。（使用两个不同的 PHP 服务器进行测试，并分别通过 Browser+Insomnia 客户端进行测试）

如果没有回显至少特殊数量的字节（在我的情况下为 1024 个字节），则存在一些特殊行为，flush() 不会发送第一个内容。（可能是一些修补程序，以防 php 文件中有一些前导或尾随空格，这些空格实际上被视为 echo 语句或类似的东西，这会阻止以后的 header() 语句生效。）

为了解决这个问题，可以发送 1024 个前导空格字符，这些字符应该被 JSON/XML/HTML 解释器忽略。

所以完整的代码如下所示：

```
ob_start();
echo str_repeat(' ', 1024);
echo $response; // send the response
header('Connection: close');
header('Content-Length: '.ob_get_length());
ob_end_flush();
@ob_flush();
flush(); 
```

（这是我的论点的一些备份，找不到正确的来源 rn: [How to flush output after each `echo` call?](https://stackoverflow.com/questions/3133209/how-to-flush-output-after-each-echo-call)）

# java - 如果从单元格渲染器更改数据，如何在列调整后计算 jTable 宽度和高度

> ID：15273571
> 
> 赞同：0
> 
> 时间：2013-03-07T14:20:04.213
> 
> 标签：java, swing, jtable

我正在开发一个应用程序，我必须在其中计算 JTable 宽度和高度，如果模型数据在运行时和列宽调整后发生更改，宽度和列计算不正确。以下是示例代码：-

**

*   简单表演示.java

**

```
 package com.swing.data;

import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.TableModel;

public class SimpleTableDemo extends JPanel implements ActionListener {
    private boolean DEBUG = false;
    private JTable table = null;
    private TableColumnAdjuster app = null;
    String[] columnNames = {"First Name",
            "Last Name",
            "Sport",
            "# of Years",
            "Vegetarian"};
    Object[][] data = {
            {"Kathy", "Smith",
             "Snowboarding", new Integer(5), new Boolean(false)},
            {"John", "Doe",
             "Rowing", new Integer(3), new Boolean(true)},
            {"Sue", "Black",
             "Knitting", new Integer(2), new Boolean(false)},
            {"Jane", "White",
             "Speed reading", new Integer(20), new Boolean(true)},
            {"Joe", "Brown",
             "Pool", new Integer(10), new Boolean(false)}
            };
    CutomTableCellRenderer renderer = null;
    public SimpleTableDemo() {
        super(new GridLayout(1,0));
        table = new JTable(data, columnNames);
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);

        if (DEBUG) {
            table.addMouseListener(new MouseAdapter() {
                public void mouseClicked(MouseEvent e) {
                    printDebugData(table);
                }
            });
        }
        renderer = new CutomTableCellRenderer(table.getDefaultRenderer(Object.class));
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        table.setDefaultRenderer(Object.class, renderer);
        //table.setSelectionMode(JTable.AUTO_RESIZE_SUBSEQUENT_COLUMNS);
        JScrollPane scrollPane = new JScrollPane(table);
        app = new TableColumnAdjuster(table);
        app.adjustColumns();
       // scrollPane.setRowHeaderView(jRowTable);
        //scrollPane.setCorner(JScrollPane.UPPER_LEFT_CORNER,jRowTable.getTableHeader());
        //scrollPane.setSize(300,300);
        //Create the scroll pane and add the table to it.

        //Add the scroll pane to this panel.
        add(scrollPane);
        JButton button = new JButton("Change");
        add(button);
        button.addActionListener(this);

    }

    private void printDebugData(JTable table) {
        int numRows = table.getRowCount();
        int numCols = table.getColumnCount();
        javax.swing.table.TableModel model = table.getModel();

        System.out.println("Value of data: ");
        for (int i=0; i < numRows; i++) {
            System.out.print("    row " + i + ":");
            for (int j=0; j < numCols; j++) {
                System.out.print("  " + model.getValueAt(i, j));
            }
            System.out.println();
        }
        System.out.println("--------------------------");
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("SimpleTableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        SimpleTableDemo newContentPane = new SimpleTableDemo();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        renderer.setText("Modified.............................");  
        app.adjustColumns();
        System.out.println("tableWidth:" + table.getWidth() + "tableHeight:" + table.getHeight());
    }
} 
```

**

*   TableColumnAdjuster.java

**

```
package com.swing.data;

import java.awt.*;
import java.awt.event.*;
import java.beans.*;
import java.util.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.*;

/*
 *  Class to manage the widths of colunmns in a table.
 *
 *  Various properties control how the width of the column is calculated.
 *  Another property controls whether column width calculation should be dynamic.
 *  Finally, various Actions will be added to the table to allow the user
 *  to customize the functionality.
 *
 *  This class was designed to be used with tables that use an auto resize mode
 *  of AUTO_RESIZE_OFF. With all other modes you are constrained as the width
 *  of the columns must fit inside the table. So if you increase one column, one
 *  or more of the other columns must decrease. Because of this the resize mode
 *  of RESIZE_ALL_COLUMNS will work the best.
 */
public class TableColumnAdjuster implements PropertyChangeListener, TableModelListener
{
    private JTable table;
    private int spacing;
    private boolean isColumnHeaderIncluded;
    private boolean isColumnDataIncluded;
    private boolean isOnlyAdjustLarger;
    private boolean isDynamicAdjustment;
    private Map<TableColumn, Integer> columnSizes = new HashMap<TableColumn, Integer>();

    /*
     *  Specify the table and use default spacing
     */
    public TableColumnAdjuster(JTable table)
    {
        this(table, 6);
    }

    /*
     *  Specify the table and spacing
     */
    public TableColumnAdjuster(JTable table, int spacing)
    {
        this.table = table;
        this.spacing = spacing;
        setColumnHeaderIncluded( true );
        setColumnDataIncluded( true );
        setOnlyAdjustLarger( true );
        setDynamicAdjustment( false );
        installActions();
    }

    /*
     *  Adjust the widths of all the columns in the table
     */
    public void adjustColumns()
    {
        TableColumnModel tcm = table.getColumnModel();

        for (int i = 0; i < tcm.getColumnCount(); i++)
        {
            adjustColumn(i);
        }
    }

    /*
     *  Adjust the width of the specified column in the table
     */
    public void adjustColumn(final int column)
    {
        TableColumn tableColumn = table.getColumnModel().getColumn(column);

        if (! tableColumn.getResizable()) return;

        int columnHeaderWidth = getColumnHeaderWidth( column );
        int columnDataWidth   = getColumnDataWidth( column );
        int preferredWidth    = Math.max(columnHeaderWidth, columnDataWidth);

        updateTableColumn(column, preferredWidth);
    }

    /*
     *  Calculated the width based on the column name
     */
    private int getColumnHeaderWidth(int column)
    {
        if (! isColumnHeaderIncluded) return 0;

        TableColumn tableColumn = table.getColumnModel().getColumn(column);
        Object value = tableColumn.getHeaderValue();
        TableCellRenderer renderer = tableColumn.getHeaderRenderer();

        if (renderer == null)
        {
            renderer = table.getTableHeader().getDefaultRenderer();
        }

        Component c = renderer.getTableCellRendererComponent(table, value, false, false, -1, column);
        return c.getPreferredSize().width;
    }

    /*
     *  Calculate the width based on the widest cell renderer for the
     *  given column.
     */
    private int getColumnDataWidth(int column)
    {
        if (! isColumnDataIncluded) return 0;

        int preferredWidth = 0;
        int maxWidth = table.getColumnModel().getColumn(column).getMaxWidth();

        for (int row = 0; row < table.getRowCount(); row++)
        {
            preferredWidth = Math.max(preferredWidth, getCellDataWidth(row, column));

            //  We've exceeded the maximum width, no need to check other rows

            if (preferredWidth >= maxWidth)
                break;
        }

        return preferredWidth;
    }

    /*
     *  Get the preferred width for the specified cell
     */
    private int getCellDataWidth(int row, int column)
    {
        //  Inovke the renderer for the cell to calculate the preferred width

        TableCellRenderer cellRenderer = table.getCellRenderer(row, column);
        Component c = table.prepareRenderer(cellRenderer, row, column);
        int width = c.getPreferredSize().width + table.getIntercellSpacing().width;

        return width;
    }

    /*
     *  Update the TableColumn with the newly calculated width
     */
    private void updateTableColumn(int column, int width)
    {
        final TableColumn tableColumn = table.getColumnModel().getColumn(column);

        if (! tableColumn.getResizable()) return;

        width += spacing;

        //  Don't shrink the column width

        if (isOnlyAdjustLarger)
        {
            width = Math.max(width, tableColumn.getPreferredWidth());
        }

        columnSizes.put(tableColumn, new Integer(tableColumn.getWidth()));
        table.getTableHeader().setResizingColumn(tableColumn);
        tableColumn.setWidth(width);
    }

    /*
     *  Restore the widths of the columns in the table to its previous width
     */
    public void restoreColumns()
    {
        TableColumnModel tcm = table.getColumnModel();

        for (int i = 0; i < tcm.getColumnCount(); i++)
        {
            restoreColumn(i);
        }
    }

    /*
     *  Restore the width of the specified column to its previous width
     */
    private void restoreColumn(int column)
    {
        TableColumn tableColumn = table.getColumnModel().getColumn(column);
        Integer width = columnSizes.get(tableColumn);

        if (width != null)
        {
            table.getTableHeader().setResizingColumn(tableColumn);
            tableColumn.setWidth( width.intValue() );
        }
    }

    /*
     *  Indicates whether to include the header in the width calculation
     */
    public void setColumnHeaderIncluded(boolean isColumnHeaderIncluded)
    {
        this.isColumnHeaderIncluded = isColumnHeaderIncluded;
    }

    /*
     *  Indicates whether to include the model data in the width calculation
     */
    public void setColumnDataIncluded(boolean isColumnDataIncluded)
    {
        this.isColumnDataIncluded = isColumnDataIncluded;
    }

    /*
     *  Indicates whether columns can only be increased in size
     */
    public void setOnlyAdjustLarger(boolean isOnlyAdjustLarger)
    {
        this.isOnlyAdjustLarger = isOnlyAdjustLarger;
    }

    /*
     *  Indicate whether changes to the model should cause the width to be
     *  dynamically recalculated.
     */
    public void setDynamicAdjustment(boolean isDynamicAdjustment)
    {
        //  May need to add or remove the TableModelListener when changed

        if (this.isDynamicAdjustment != isDynamicAdjustment)
        {
            if (isDynamicAdjustment)
            {
                table.addPropertyChangeListener( this );
                table.getModel().addTableModelListener( this );
            }
            else
            {
                table.removePropertyChangeListener( this );
                table.getModel().removeTableModelListener( this );
            }
        }

        this.isDynamicAdjustment = isDynamicAdjustment;
    }
//
//  Implement the PropertyChangeListener
//
    public void propertyChange(PropertyChangeEvent e)
    {
        //  When the TableModel changes we need to update the listeners
        //  and column widths

        if ("model".equals(e.getPropertyName()))
        {
            TableModel model = (TableModel)e.getOldValue();
            model.removeTableModelListener( this );

            model = (TableModel)e.getNewValue();
            model.addTableModelListener( this );
            adjustColumns();
        }
    }
//
//  Implement the TableModelListener
//
    public void tableChanged(TableModelEvent e)
    {
        if (! isColumnDataIncluded) return;

        //  A cell has been updated

        if (e.getType() == TableModelEvent.UPDATE)
        {
            int column = table.convertColumnIndexToView(e.getColumn());

            //  Only need to worry about an increase in width for this cell

            if (isOnlyAdjustLarger)
            {
                int row = e.getFirstRow();
                TableColumn tableColumn = table.getColumnModel().getColumn(column);

                if (tableColumn.getResizable())
                {
                    int width = getCellDataWidth(row, column);
                    updateTableColumn(column, width);
                }
            }

            //  Could be an increase of decrease so check all rows

            else
            {
                adjustColumn( column );
            }
        }

        //  The update affected more than one column so adjust all columns

        else
        {
            adjustColumns();
        }
    }

    /*
     *  Install Actions to give user control of certain functionality.
     */
    private void installActions()
    {
        installColumnAction(true,  true,  "adjustColumn",   "control ADD");
        installColumnAction(false, true,  "adjustColumns",  "control shift ADD");
        installColumnAction(true,  false, "restoreColumn",  "control SUBTRACT");
        installColumnAction(false, false, "restoreColumns", "control shift SUBTRACT");

        installToggleAction(true,  false, "toggleDynamic",  "control MULTIPLY");
        installToggleAction(false, true,  "toggleLarger",   "control DIVIDE");
    }

    /*
     *  Update the input and action maps with a new ColumnAction
     */
    private void installColumnAction(
        boolean isSelectedColumn, boolean isAdjust, String key, String keyStroke)
    {
        Action action = new ColumnAction(isSelectedColumn, isAdjust);
        KeyStroke ks = KeyStroke.getKeyStroke( keyStroke );
        table.getInputMap().put(ks, key);
        table.getActionMap().put(key, action);
    }

    /*
     *  Update the input and action maps with new ToggleAction
     */
    private void installToggleAction(
        boolean isToggleDynamic, boolean isToggleLarger, String key, String keyStroke)
    {
        Action action = new ToggleAction(isToggleDynamic, isToggleLarger);
        KeyStroke ks = KeyStroke.getKeyStroke( keyStroke );
        table.getInputMap().put(ks, key);
        table.getActionMap().put(key, action);
    }

    /*
     *  Action to adjust or restore the width of a single column or all columns
     */
    class ColumnAction extends AbstractAction
    {
        private boolean isSelectedColumn;
        private boolean isAdjust;

        public ColumnAction(boolean isSelectedColumn, boolean isAdjust)
        {
            this.isSelectedColumn = isSelectedColumn;
            this.isAdjust = isAdjust;
        }

        @Override
        public void actionPerformed(ActionEvent e)
        {
            //  Handle selected column(s) width change actions

            if (isSelectedColumn)
            {
                int[] columns = table.getSelectedColumns();

                for (int i = 0; i < columns.length; i++)
                {
                    if (isAdjust)
                        adjustColumn(columns[i]);
                    else
                        restoreColumn(columns[i]);
                }
            }
            else
            {
                if (isAdjust)
                    adjustColumns();
                else
                    restoreColumns();
            }
        }
    }

    /*
     *  Toggle properties of the TableColumnAdjuster so the user can
     *  customize the functionality to their preferences
     */
    class ToggleAction extends AbstractAction
    {
        private boolean isToggleDynamic;
        private boolean isToggleLarger;

        public ToggleAction(boolean isToggleDynamic, boolean isToggleLarger)
        {
            this.isToggleDynamic = isToggleDynamic;
            this.isToggleLarger = isToggleLarger;
        }

        @Override
        public void actionPerformed(ActionEvent e)
        {
            if (isToggleDynamic)
            {
                setDynamicAdjustment(! isDynamicAdjustment);
                return;
            }

            if (isToggleLarger)
            {
                setOnlyAdjustLarger(! isOnlyAdjustLarger);
                return;
            }
        }
    }
} 
```

**

*   CutomTableCellRenderer.java

**

```
package com.swing.data;

import java.awt.Color;
import java.awt.Component;

import javax.swing.JLabel;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellRenderer;
public class CutomTableCellRenderer extends DefaultTableCellRenderer 
{   
    private TableCellRenderer mWrappedRenderer; 
    private String text = "Original";
    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    public CutomTableCellRenderer(TableCellRenderer pWrappedRenderer) { 
        mWrappedRenderer = pWrappedRenderer; 
        } 

    public Component getTableCellRendererComponent
       (JTable table, Object value, boolean isSelected,
       boolean hasFocus, int row, int column) 
    {
        Component cell = mWrappedRenderer.getTableCellRendererComponent(table, value, isSelected,
                   hasFocus, row, column); 

            if( row == 1 )
            {

                JLabel label = (JLabel)cell;
                label.setText(text);
            }
            else
            {
                cell.setBackground( Color.white );
            }

        return cell;
    }
} 
```

从上面的代码中，模型中的实际数据不会改变。但是第一次点击更改按钮时表格的宽度和高度计算不正确。在下一次更改时，单击显示修改后的表格宽度和高度。我对此很陌生。

如果从单元格渲染器更改数据，如何检索 JTable 的实际宽度和高度？

如何正确计算表格宽度和高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:37:00.967

在 ActionListener 的代码中，你有

```
renderer.setText("Modified.............................");
app.adjustColumns();
System.out.println("tableWidth:" + table.getWidth() + "tableHeight:" + table.getHeight()); 
```

调用`app.adjustColumns()`仅触发新布局，调整后的列仅在事件完成后可见，即在方法完成并写入输出之后。

您可以通过将输出封装到另一个事件中来轻松验证它：

```
System.out.println("PRE  tableWidth:" + table.getWidth() + "tableHeight:" + table.getHeight());
SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() {
        System.out.println("POST tableWidth:" + table.getWidth() + "tableHeight:" + table.getHeight());
    }
}); 
```

产生

```
PRE  tableWidth:390tableHeight:80
POST tableWidth:710tableHeight:80 
```

# socket.io - Socket.io 客户端事件触发

> ID：15273576
> 
> 赞同：1
> 
> 时间：2013-03-07T14:20:33.947
> 
> 标签：socket.io

我希望我的 server.js 在 client.html 提示时执行特定功能

两只苍蝇的部分如下：

服务器.js：

```
io.sockets.on('connection', function (socket) {

socket.on('key',function(data){
console.log('done'); //this statement is never executed

    });
  }); 
```

客户：

```
<script>
      var socket = io.connect();
     socket.on('connect', function () {
     socket.emit('key',{
     string:'string'
     });

    </script> 
```

console.log('完成'); 永远不会被执行..不知道为什么...请帮帮我..:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:29:41.107

你有没有包含`socket`js 文件？

`<script src="/socket.io/socket.io.js"></script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T20:10:06.270

老问题，但是您的代码无法正常工作的原因是因为您错过了关闭：`});`在您的客户端代码上。

解决方案：

```
<script>
var socket = io.connect();
socket.on('connect', function () {
  socket.emit('key',{
     string:'string'
   });
});  //<--- Missing closing tag
</script> 
```

# c++ - C++：错误 LNK：未解析的外部符号，由虚函数产生

> ID：15273578
> 
> 赞同：11
> 
> 时间：2013-03-07T14:20:34.560
> 
> 标签：c++, interface, virtual, lnk2019

*我的界面的类等概述！*

**动物.H：**

```
class Animal
{
public:
   virtual void walk();
} 
```

**动物.CPP**

=空

**牛.H:**

```
class Cow : public Animal
{
public:
   virtual void walk();
} 
```

在这里，它应该异常地知道函数 walk 是从它派生的类中获取的，对吗？（ea Animal..）当我不定义函数walk时，它应该说我应该正确定义它...？

**牛.CPP：**

```
void Cow::walk()
{
   //do something specific for cow
} 
```

**其他类.H**

```
namespace SomeNamespace
{
   void LetAnimalWalk();
} 
```

**其他类.CPP**

```
Cow myCow;
namespace SomeNamespace
{
   void LetAnimalWalk()
   {
      myCow.walk();
   }
} 
```

这应该可以正常工作吗？...我的意思是命名空间，“Class::...”的东西？以及我继承和使用接口的方式？

因为通过这种方式我得到了从接口创建的每个功能，所以每个虚拟功能都会给我以下错误：

```
SomeOtherClass.obj : error LNK2019: unresolved external symbol "public: virtual void __thiscall Cow::Walk (...etc etc...) referenced in function "void __cdecl SomeNamespace::LetAnimalWalk() (...etc etc...) 
```

有谁知道我做错了什么，我发现主要是这意味着我没有正确声明一个函数（在 Cow.cpp 的某个地方？？）

提前谢谢各位

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T14:22:11.917

```
class Animal
{
public:
   virtual void walk();
} 
```

您需要定义该函数或使其成为纯虚拟函数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-07T14:27:20.930

当您有一个不想在基类中定义的虚函数时，您需要将其抽象化，这是使用以下语法完成的：

```
class Animal
{
public:
   virtual void walk() = 0;
} 
```

如果没有这个，如果它没有定义，你会得到一个错误，如果没有任何派生类没有定义它，你会得到一个错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T14:46:48.613

要么使基类中的函数成为纯虚拟函数：

```
class Animal
{
    public:
        virtual void walk() = 0;
} 
```

或定义一个简单的实现：

```
void Animal::walk()
{
   return;    // could also throw an exception here
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T15:25:47.770

动物* 动物 = 新牛（）；动物->步行（）；

Cow myCow 显然不起作用！

# oracle - Oracle nocopy 方法

> ID：15273579
> 
> 赞同：6
> 
> 时间：2013-03-07T14:20:39.217
> 
> 标签：oracle, procedure

我创建了一个 Oracle 块来检查使用 nocopy 对关联数组的影响；创建一个包含 1000000 个元素的数组并将其作为参数传递给两个相同的方法，第一次作为 in out 参数，第二个作为 in out nocopy。代码如下所示：

```
declare
type my_type is table of varchar2(32767) index by binary_integer;
my_array my_type;
st number;
rt number;
procedure in_out(m1 in out my_type)
is
begin
dbms_output.put_line(my_array(1));
end in_out;
procedure in_out_nocopy(m1  in out nocopy my_type)
is
begin
dbms_output.put_line(my_array(1));
end in_out_nocopy;
begin
for i in 1..999999 loop
  my_array(i) := '123456789012345678901234567890123456789012345678901234567890abcd';
end loop;
st := dbms_utility.get_time;
in_out(my_array);
rt := (dbms_utility.get_time - st)/100;
dbms_output.put_line('Time needed for in out is: ' || rt || ' 100''ths of second!');
st := dbms_utility.get_time;
in_out_nocopy(my_array);
rt := (dbms_utility.get_time - st)/100;
dbms_output.put_line('Time needed for in out nocopy is: ' || rt || ' 100''ths of second!');
end; 
```

现在这将报告 nocopy 方法的性能提高了 0.27 秒。我对两件事感到困惑：

i）如果我将两种方法的主体更改为

```
begin
null;
end; 
```

不会注意到时间差异，但是参数传递的差异仍然存在。为什么会这样？

ii）如果我将程序主体保留为

```
begin
null;
end; 
```

这一次，我没有将参数定义为 in out 和 in out nocopy，而是将其定义为 out 和 out nocopy，我确实得到了时间差。我想出参数无论如何都会重新初始化，那么为什么我在这里得到一个时差而不是在 out case 中呢？

问候，克里斯托斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T14:32:56.907

很好的测试用例，我使用 Oracle 11gR1 (11.1.0.7.0) 得到了相同的结果。

这是文档必须说的[`NOCOPY`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/tuning.htm#sthref958)：

> NOCOPY 提示（在“NOCOPY”中描述）。
> 
> 默认情况下，PL/SQL 按值传递 OUT 和 IN OUT 子程序参数。在运行子程序之前，PL/SQL 将每个 OUT 和 IN OUT 参数复制到一个临时变量，该变量在子程序执行期间保存参数的值。如果子程序正常退出，则PL/SQL将临时变量的值复制到对应的实参中。如果子程序以未处理的异常退出，则 PL/SQL 不会更改实际参数的值。
> 
> 当 OUT 或 IN OUT 参数表示大型数据结构（例如集合、记录和 ADT 实例）时，复制它们会减慢执行速度并增加内存使用——尤其是对于 ADT 实例。
> 
> 对于 ADT 方法的每次调用，PL/SQL 都会复制 ADT 的每个属性。如果方法正常退出，则 PL/SQL 应用该方法对属性所做的任何更改。如果方法以未处理的异常退出，则 PL/SQL 不会更改属性。
> 
> 如果您的程序不要求 OUT 或 IN OUT 参数在子程序以未处理的异常结束时保留其调用前值，则在参数声明中包含 NOCOPY 提示。NOCOPY 提示请求（但不确保）编译器通过引用而不是值传递相应的实际参数。

请注意，这`NOCOPY`仅被描述为提示（即不是命令）。在某些情况下，它[不会得到尊重](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/parameter_declaration.htm#CJACJCGJ)。

无论如何，NOCOPY 的行为对于情况 (1) 和 (3) 是标准的（是的，PL/SQL 将在出错的情况下恢复 OUT 参数的值）。（2）呢？

我认为在情况（2）中[优化](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams195.htm#REFRN10255)了 NULL 过程。让我们尝试关闭优化：

```
SQL> alter session set plsql_optimize_level=0;

Session altered

SQL> DECLARE
  2     TYPE my_type IS TABLE OF LONG INDEX BY BINARY_INTEGER;
  3     my_array my_type;
  4     st       NUMBER;
  5     rt       NUMBER;
  6     PROCEDURE in_out(m1 IN OUT my_type) IS
  7     BEGIN
  8        NULL;--dbms_output.put_line(my_array(1));
  9     END in_out;
 10     PROCEDURE in_out_nocopy(m1 IN OUT NOCOPY my_type) IS
 11     BEGIN
 12        NULL;--dbms_output.put_line(my_array(1));
 13     END in_out_nocopy;
 14  BEGIN
 15     FOR i IN 1 .. 9999999 LOOP
 16        my_array(i) :=
 17         '123456789012345678901234567890123456789012345678901234567890abcd';
 18     END LOOP;
 19     st := dbms_utility.get_time;
 20     in_out(my_array);
 21     rt := (dbms_utility.get_time - st) / 100;
 22     dbms_output.put_line('Time needed for in out is: '
 23                          || rt || ' seconds!');
 24     st := dbms_utility.get_time;
 25     in_out_nocopy(my_array);
 26     rt := (dbms_utility.get_time - st) / 100;
 27     dbms_output.put_line('Time needed for in out nocopy is: '
 28                          || rt || ' seconds!');
 29  END;
 30  /

Time needed for in out is: 5,59 seconds!
Time needed for in out nocopy is: 0 seconds! 
```

正如所料，差异神奇地再次出现:)

# java - java自省查找类的成员

> ID：15273588
> 
> 赞同：0
> 
> 时间：2013-03-07T14:20:51.347
> 
> 标签：java, introspection

我正在尝试通过其名称 memberName 访问 Object 对象的属性。

我试过：

```
new PropertyDescriptor(memberName,object.getClass()).getReadMethod().invoke(object); 
```

它适用于我的对象的大多数属性。但其中一些是布尔值，getter 的形式是“isValid”而不是“getValid”，上面的代码会产生 IntrospectionException 错误。

如果可能的话，在不使用更多代码/外部库的情况下，我能做些什么来完成这项工作？

* * *

编辑 ：

是的，对不起，我忘了提到我班成员的名字可能选得不好。它已经是 'boolean isValid' 并且 getter 也是 'isValid'。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:26:59.497

它对我来说很好用，并且有[记录](http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyDescriptor.html#PropertyDescriptor%28java.lang.String,%20java.lang.Class%29)表明这就是它的工作方式：

> 通过具有 getFoo 和 setFoo 访问器方法，为遵循标准 Java 约定的属性构造 PropertyDescriptor。因此，如果参数名称是“fred”，它将假定编写器方法是“setFred”，而读取器方法是“getFred” **（或布尔属性的“isFred”）**。请注意，属性名称应以小写字符开头，在方法名称中将大写。

（强调我的。）

示例代码：

```
import java.beans.*;

public class Test {

    public static void main(String[] args) throws Exception {
        Test test = new Test();
        PropertyDescriptor pd = new PropertyDescriptor("checked", Test.class);
        System.out.println(pd.getReadMethod().invoke(test));
    }

    public boolean isChecked() {
        System.out.println("isChecked called!");
        return true;
    }

    public void setChecked(boolean checked) {
    }
} 
```

我建议你试试我的示例代码，如果这对你有用，那么看看你是否能找到我的代码和你的代码之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:27:09.173

如果您要访问的属性是公开的，您可以执行以下操作

```
object.getClass().getDeclaredField(name) 
```

如果该属性是私有的，您可以通过以下方式访问它：

```
object.getClass().getDeclaredField(name).setAccessible(true);   object.getClass().getDeclaredField(name); 
```

# sql-server-2008 - SSIS - 轮询文件文件夹和触发 ETL 包

> ID：15273593
> 
> 赞同：2
> 
> 时间：2013-03-07T14:21:02.933
> 
> 标签：sql-server-2008, ssis

需要建议，请参见下面的场景

我们开发了 1 个 ETL 包，可以一次处理 5 个文件（通常需要 1 分钟）。我们预计早上 6 点到 7 点之间可以有近 100 多个文件进入 PROCESSING 文件夹。

我正在努力设计/开发某种轮询机制，它会不断寻找文件，如果它们到达，它将触发 ETL 包（通过 SQL Server 代理作业触发）。

如何进行轮询然后触发该 ETL 包 - 服务代理会有所帮助

我是 SSIS 的新手，所以需要建议。需要在 SQL Server 中找到解决方案，而不是开发 .net 应用程序来轮询文件夹然后触发作业

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:25:29.453

您有 2 个选项：

1.  设置一个文件夹监视程序，它应该从命令行调用包，例如 MyTrigger[从 CNET 下载它](http://download.cnet.com/MyTrigger/3000-2086_4-10339114.html)。
2.  正如您所说，您希望 SQL 代理执行它，另一个可能更有效的选项是设置一个文件表并在表上创建一个触发器以进行插入，它应该使用[sp_start_job](http://msdn.microsoft.com/en-us/library/ms186757.aspx)系统存储过程执行代理作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T11:01:57.037

[SSIS 文件观察任务](http://www.sqlis.com/post/file-watcher-task.aspx)呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T12:57:32.170

我所做的是设置一个代理来按计划触发 SSIS 包。我在 SSIS 中做的第一件事是确定是否有要处理的文件。出于各种原因，我更喜欢为此执行一个小脚本任务。如果存在文件，我设置一个变量，以便脚本任务之后的约束可以转到下一个任务，或者如果不存在文件，则结束包报告成功。

如果您没有任何辅助需求（例如日志记录），那么您可以只为每个文件使用一个枚举器，如果没有找到文件，它将成功结束包。

ps 如果您将计划设置为一分钟并且包需要更长的时间来运行（导入多个文件），那么下一个计划将在原始过程完成之前不会触发。因此，您不必担心多个进程相互干扰。

# ios - iOS Clips AI 集成

> ID：15273594
> 
> 赞同：1
> 
> 时间：2013-03-07T14:21:05.917
> 
> 标签：ios, objective-c, rule-engine, clips

我正在尝试将 Clips AI 引擎集成到我的 iOS 应用程序中。我按照此[链接](https://groups.google.com/forum/?fromgroups=#!topic/clipsesg/Birk6kK8opk)中给出的 JCL 的步骤进行操作。但我坚持将剪辑框架集成到一个单独的项目中。我不确定应该为构建 iOS 框架设置什么架构和 SDK。请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-21T02:45:54.353

[我在https://sourceforge.net/projects/clipsrules/files/CLIPS/Misc/](https://sourceforge.net/projects/clipsrules/files/CLIPS/Misc/)上传了一个 Xcode 4.6 项目 (clips_mab_ios_0_1.zip) 。它展示了如何将 CLIPS 代码链接到静态库、加载包含规则的 CLIPS 文件以及将输出重定向到 UITextView。

# python - 覆盖 Python 日历 HTMLCalendar CSS

> ID：15273598
> 
> 赞同：0
> 
> 时间：2013-03-07T14:21:16.823
> 
> 标签：python, django, calendar

我想覆盖默认的 Python 日历 CSS。我目前正在使用类 calendar.HTMLCalendar 并想覆盖默认的 python 日历 css。

覆盖默认 css 的最聪明的方法是什么？任何帮助或建议将不胜感激。

我想使用我的日历 css。

-Keoko

这是我正在使用的模板标签示例：

```
 def formatday(self, day, weekday):
       if day != 0:
           cssclass = self.cssclasses[weekday]
           if date.today() == date(self.year, self.month, day):
           cssclass += ' today'
       if day in self.readings:
           cssclass += ' filled'
           body = ['<ul>']
           for reading in self.readings[day]:
              body.append('<li>')
              body.append('<a href="%s">' % reading.get_absolute_url())
              body.append(esc(reading.series.primary_name))
              body.append('</a></li>')
           body.append('</ul>')
           return self.day_cell(cssclass, '<span class="dayNumber">%d</span> %s' %  (day, ''.join(body)))
        return self.day_cell(cssclass, '<span class="dayNumberNoReadings">%d</span>' % (day))
    return self.day_cell('noday', '&nbsp;') 
```

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:25:24.730

From your sample codes. Let's say we add class name in < ul > like this:

```
def formatday(self, day, weekday):
       if day != 0:
           cssclass = self.cssclasses[weekday]
           if date.today() == date(self.year, self.month, day):
           cssclass += ' today'
       if day in self.readings:
           cssclass += ' filled'
           body = ['<ul class="sample">'] //<---------add class
           for reading in self.readings[day]:
              body.append('<li>')
              body.append('<a href="%s">' % reading.get_absolute_url())
              body.append(esc(reading.series.primary_name))
              body.append('</a></li>')
           body.append('</ul>')
           return self.day_cell(cssclass, '<span class="dayNumber">%d</span> %s' %  (day, ''.join(body)))
        return self.day_cell(cssclass, '<span class="dayNumberNoReadings">%d</span>' % (day))
    return self.day_cell('noday', '&nbsp;') 
```

Then, in your css codes, you can simply write:

```
<style>
.sample {
    background:red;
    font-weight: bold;
}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:45:16.327

如果没有确切地看到您需要覆盖的规则，您的 CSS 规则必须比已经存在的规则更具体。有几种方法可以做到这一点，但这取决于已经制定了哪些规则。

作为入门，请查看：[http](http://css-tricks.com/specifics-on-css-specificity/) ://css-tricks.com/specifics-on-css-specificity/ 。它将为您提供一些关于如何最好地覆盖您想要更改的样式的指示。

假设您有以下来自您正在实现的 Python 日历 CSS 的样式：

```
.calendar .day {
    background-color: #ccc;
} 
```

要覆盖此样式，您可以执行以下操作：

```
table.calendar .day  // or

.calendar td.day  // or

table.calendar td.day 
```

日历为月份输出 a `<table>`，表格上的 CSS 类为“月”，`<th>`标签为“月”。因此，要覆盖样式，您可以执行以下操作：

```
table.month th.month {
  // your style here
} 
```

但这不是一个非常有效的选择器，因为在应用样式之前，将在 DOM 中搜索所有表格标签。一个更有效的选择器是将日历包装在目标`div`标记中，并带有`id`：

```
#mycalendar .month .month {
  // your style
} 
```

这专门针对 id 为“mycalendar”的 div，因此它不必遍历所有标签。

您必须覆盖来自他们提供给您的 Python 日历 CSS 代码的 CSS 的特殊性。上面的示例提供了一个更具体的选择器。*这是层叠*样式表最基本的原则之一（注意强调“层叠”部分）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T15:02:07.413

Chrome 开发人员工具允许您检查页面元素 - 只需右键单击并单击检查，它就会在右侧弹出。这样，您只需将鼠标悬停在您想要的区域上即可查看分配给每个表格元素的类。

下面的 css 是一个示例，css 标签应该适合您的日历。

```
.filled{
    background-color: pink;
}
.today {
    background-color: #66ccff;
}
.noday{
    background-color: #f0f0f5;
}
.month {
    border:1px solid navy;
    width: 70%;
    text-align: center;
}
.month th {
    text-align: center;
    width:100px;
    height:20px;
}
.month td {
    width: 100px;
    height: 100px;
    vertical-align: top;
    text-align: right;
    border: 1px solid #c6c6ec;
} 
```

然后确保将 .css 导入模板！

```
<link rel='stylesheet' href="location-of-your-css-here" type='text/css' media='all'/> 
```

# maven - 如何在 Maven 原型中保留文件的可执行权限

> ID：15273605
> 
> 赞同：7
> 
> 时间：2013-03-07T14:21:38.020
> 
> 标签：maven, maven-archetype

我正在构建一个原型，我想在其中包含一个包含一些可执行二进制文件的文件夹。问题是当我从原型创建一个新项目时，可执行二进制文件是在没有可执行权限的情况下创建的。

如何告诉 maven 保留对这些文件的执行权限？或者也许有一种方法可以告诉 maven 在生成时自动添加执行权限？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-06-12T01:23:58.360

这个问题已经很老了，但是我发现自己处于同样的情况并且找到了解决方案，所以就到这里了。[这里](https://maven.apache.org/archetype/maven-archetype-plugin/advanced-usage.html)它说您可以在原型的 src/main/resources/META-INF/ 文件夹中编写一个名为**archetype-post-generate.groovy**的 groovy 脚本，以便在生成新项目后执行操作。该脚本应如下所示：

```
def file = new File( request.getOutputDirectory(), request.getArtifactId()+"RELATIVE_PATH" );
file.setExecutable(true, false); 
```

其中**request.getOutputDirectory()**是创建新项目的目录，**request.getArtifactId()**是项目工件 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T19:49:56.347

我用 exec-maven-plugin 通过两次执行解决了类似的问题，一个是压缩目录，另一个是使用 bin 分类器部署到存储库中，在我的情况下是第三方。因此，我将所有 unix 权限保存在 zip 文件中。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.2.1</version>
    <executions>
        <execution>
            <id>1</id>
            <phase>package</phase>
            <goals>
                <goal>exec</goal>
            </goals>
            <configuration>
                <executable>zip</executable>
                <workingDirectory>${basedir}</workingDirectory>
                <arguments>
                    <argument>-r</argument>
                    <argument>target/com.example.test.ext.zip</argument>
                    <argument>Out</argument>
                    <argument>-x</argument>
                    <argument>*.svn*</argument>
                </arguments>
            </configuration>
        </execution>
        <execution>
            <id>2</id>
            <phase>package</phase>
            <goals>
                <goal>exec</goal>
            </goals>
            <configuration>
                <executable>mvn</executable>
                <workingDirectory>${basedir}/target</workingDirectory>
                <arguments>
                    <argument>deploy:deploy-file</argument>
                    <argument>-Dfile=com.example.test.ext.zip</argument>
                    <argument>-Dclassifier=bin</argument>
                    <argument>-DgroupId=com.example</argument>
                    <argument>-DartifactId=test</argument>
                    <argument>-Dversion=1.0</argument>
                    <argument>-Dpackaging=zip</argument>
                    <argument>-DrepositoryId=releases</argument>
                    <argument>-Durl=http://nexus..../nexus/content/repositories/thirdparty
                    </argument>
                </arguments>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

如果您将结果用作依赖项，请不要忘记“bin”分类器：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.8</version>
    <executions>
        <execution>
            <id>unpack1</id>
            <phase>generate-resources</phase>
            <goals>
                <goal>unpack</goal>
            </goals>
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>com.example</groupId>
                        <artifactId>test</artifactId>
                        <version>1.0-SNAPSHOT</version>
                        <classifier>bin</classifier>
                        <type>zip</type>
                        <overWrite>true</overWrite>
                        <outputDirectory>output</outputDirectory>
                    </artifactItem>
                </artifactItems>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T15:27:17.480

[有关在 Linux 和 Windows 平台上调用外部脚本](https://stackoverflow.com/questions/14809931/maven-calls-external-script-on-both-linux-and-windows-platforms)的另一个示例，请参阅这篇文章

所以我通过添加以下内容来解决这个问题：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <executions>
                <execution>
                    <id>script-chmod</id>
                    <phase>install</phase>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                    <configuration>
                        <executable>chmod</executable>
                        <arguments>
                            <argument>+x</argument>
                            <argument>myscript</argument>
                        </arguments>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

但是，对于每次安装而不是仅在原型生成上运行它似乎很浪费，所以如果有人有任何更好的建议，那么很想听听他们的建议。

# java - 在 Firefox 中部署 WebGoat

> ID：15273607
> 
> 赞同：0
> 
> 时间：2013-03-07T14:21:40.457
> 
> 标签：java, security, firefox, tomcat

我刚刚下载了 WebGoat 5.4

我已解压缩文件并单击 webgoat.bat 文件。

但是，当我在 Firefox 中输入 [http://localhost/WebGoat/attack] 时，IIS 会弹出一个警告，说资源不存在。

我究竟做错了什么？我是否需要安装任何其他软件才能使其运行？

我在 IIS 上部署了一些网站。它们有影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:38:32.000

**Firefox**不是用于部署**WebGoat的****Web 应用程序服务器**。您需要一个**Apache Tomcat**实例才能使用**WebGoat**。

 ******这是一个[链接](https://www.owasp.org/index.php/WebGoat_Installation)，可以帮助您设置**WebGoat**。******

# jquery - 点击按钮在 iDevices 上不起作用

> ID：15273608
> 
> 赞同：2
> 
> 时间：2013-03-07T14:21:48.323
> 
> 标签：jquery, html, mobile-safari

我有这个向下滑动的标题，当它被按下时它会向下滑动。

演示：http: [//jsfiddle.net/ygAV2/2/](http://jsfiddle.net/ygAV2/2/)

```
$(document).on("click", 'h1', function() {
    if (!$(this).parent().hasClass('header-down')) {
        $(this).parent().stop().animate({
            height: '100px'
        }, {
            queue: false,
            duration: 600,
            easing: 'linear'
        }).addClass('header-down');
    } else {
        $(this).parent().stop().animate({
            height: '30px'
        }, {
            queue: false,
            duration: 600,
            easing: 'linear'
        }).removeClass('header-down');
    }
});

$(document).click(function () {
    if ($(".box_header").hasClass('header-down')) {
        $(".box_header").stop().animate({
            height: '30px'
        }, {
            queue: false,
            duration: 600,
            easing: 'linear'
        }).removeClass('header-down');
    }
});

$(document).on("click", ".box_header", function (e) {
    e.stopPropagation(); // This is the preferred method.
    // This should not be used unless you do not want
    // any click events registering inside the div
}); 
```

标题和“删除我”按钮在计算机上工作正常，但在我的 iPhone 和 iPad 上不工作，有没有人尝试过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:39:48.313

试试这个（应该可以，在 iOS 模拟器上试过 - 没有设备）：

```
$('h1').on('click touchstart', function() {
    // ... your code 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T06:04:07.743

我知道这是一篇较旧的帖子，但我发现 Mac OS 和 iOS 不允许您进行点击操作，除非相应的图层实际上是一个 html 按钮。

我在上周建立一个网站时注意到了这一点，移动菜单可以在 Windows 和 Android 设备上使用 span 进行切换，但 Mac OS 和 iOS 没有切换菜单。

第二次我将图层更改为实际的 html 按钮，它起作用了！

为此在 Apple 提供 Facepalm！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T14:25:20.507

尝试使用[`.live()`](http://api.jquery.com/live/)代替`.on`或`.click`：

```
$('h1').live('click', function() {
    // your code goes here...
}); 
```

# path - Neo4j-使用 Gremlin 寻找最短路径及其遍历成本

> ID：15273609
> 
> 赞同：2
> 
> 时间：2013-03-07T14:21:50.247
> 
> 标签：path, neo4j, traversal, gremlin, shortest

我想将我的加权图从起始节点遍历到某个深度并打印遍历节点和累积权重。

例如，在这样的图中：A--1--B--2--C--1--D，A--1--B--1--F--1--G 起始节点深度为 3 的 A 应返回以下内容：A,B,F,G,cost:3

我使用以下代码取得了一些进展，但它不计算路径的权重：

```
x=g.v(36);x.out('BELONGS').out('RELATED').in('BELONGS').loop(3){it.loops<10}{true}.paths{it.name} 
```

我如何编写它来计算路径的成本和遍历列表？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:10:38.360

我认为您可以`.path`查看[http://gremlindocs.com/#transform/path](http://gremlindocs.com/#transform/path)并从那里计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:46:38.653

我尽量不要过多地修改 Gremlin 的前面，并从路径表达式的末尾进行计算。也许有更好的方法来解决这个问题，但这是我使用玩具图的方法：

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()
==>tinkergraph[vertices:6 edges:6]
gremlin> g.v(1).outE.inV.loop(2){it.loops<3}{true}.path 
==>[v[1], e[7][1-knows->2], v[2]]
==>[v[1], e[8][1-knows->4], v[4]]
==>[v[1], e[9][1-created->3], v[3]]
==>[v[1], e[8][1-knows->4], v[4], e[10][4-created->5], v[5]]
==>[v[1], e[8][1-knows->4], v[4], e[11][4-created->3], v[3]] 
```

因此请注意包含 outE.inV 以便边缘出现在路径中。然后我在路径中添加第二个闭包，以使重量脱离边缘：

```
gremlin> g.v(1).outE.inV.loop(2){it.loops<3}{true}.path{it.name}{it.weight}
==>[marko, 0.5, vadas]
==>[marko, 1.0, josh]
==>[marko, 0.4, lop]
==>[marko, 1.0, josh, 1.0, ripple]
==>[marko, 1.0, josh, 0.4, lop] 
```

然后只是一堆 Groovy JDK 将输出操作为总权重：

```
gremlin> g.v(1).outE.inV.loop(2){it.loops<3}{true}.path{it.name}{it.weight}.transform{it.toList().split{i->"${i}".isNumber()}}.collect{[it[0].sum(),it[1]]}
==>[0.5, [marko, vadas]]
==>[1.0, [marko, josh]]
==>[0.4, [marko, lop]]
==>[2.0, [marko, josh, ripple]]
==>[1.4000000059604645, [marko, josh, lop]] 
```

所以，我加入了一个转换（正如彼得建议的那样），将项目列表分成权重和名称（只需检查值是否“isNumber”......你可能需要不同的方法）然后我在其上运行一个 map 函数来 sum() 权重集合并返回名称集合。

# vb.net - 打开带有附件的电子邮件客户端

> ID：15273611
> 
> 赞同：-2
> 
> 时间：2013-03-07T14:21:52.653
> 
> 标签：vb.net, email

我正在寻找一种方法来打开安装了计算机的默认电子邮件客户端（Outlook 或 groupwise）并附加文件。用户将在电子邮件客户端中输入其他信息。

试过：

```
Dim SendFrom As MailAddress = New MailAddress("test@email.com")
Dim SendTo As MailAddress = New MailAddress("test@email.com") 
Dim MyMessage As MailMessage = New MailMessage(SendFrom, SendTo) 
MyMessage.Subject = "Hola" 
MyMessage.Body = "Body:" 
'Dim attachFile As New Attachment("C:\test.txt") 
'MyMessage.Attachments.Add(attachFile) 
Dim emailClient As New SmtpClient("yahoo.com") 
emailClient.Timeout = Int32.MaxValue 
emailClient.Send(MyMessage) 
TextBox1.Text = "Message Sent" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:28:20.977

正确的方法是使用 MAPI

这是 VB6 的一些代码：

```
Public Function MailtoWithAttachment(ByVal Recipient As String, ByVal Subject As String, ByVal Body As String, ByVal Attachment As String) As Boolean
Dim Message As MAPIMessage
Dim RecipientA() As Byte
Dim Recipients(0) As MapiRecip
Dim AttachmentA() As Byte
Dim Attachments(0) As MapiFile
Dim SubjectA() As Byte
Dim BodyA() As Byte

Dim Result As Long

  'Set the recipient
  RecipientA = StrConv(Recipient & vbNullChar, vbFromUnicode)
  Recipients(0).lpName = VarPtr(RecipientA(0))
  Recipients(0).RecipClass = MAPI_TO
  Message.RecipCount = 1
  Message.lpRecips = VarPtr(Recipients(0))

  'Add the attachment
  AttachmentA = StrConv(Attachment & vbNullChar, vbFromUnicode)
  Attachments(0).lpPathName = VarPtr(AttachmentA(0))
  Attachments(0).Position = -1
  Message.FileCount = 1
  Message.lpFiles = VarPtr(Attachments(0))

  'Subject
  SubjectA = StrConv(Subject & vbNullChar, vbFromUnicode)
  Message.lpSubject = VarPtr(SubjectA(0))

  'And body
  BodyA = StrConv(Body & vbNullChar, vbFromUnicode)
  Message.lpNoteText = VarPtr(BodyA(0))

  'Try and send the email
  Result = MAPISendMail(0, 0, ByVal VarPtr(Message), MAPI_DIALOG, 0&)
  'Return false if there was a problem (ignoring canel)
  MailtoWithAttachment = Result = 0 Or Result = 1
End Function 
```

这使用来自[MAPI32.bas](http://support.microsoft.com/kb/163216)的声明，并大量使用 unicode 到 ANSI 的转换和结构中的指针。

请注意，并非所有邮件客户端都支持这一点，唯一的解决方案是为每个客户端使用自定义界面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-01T16:23:25.347

取决于您使用的开发环境。看看你是否可以构建一个 .EML 文件。并启动一个新进程来加载文件。只要您的电子邮件客户端与 .EML 扩展名相关联，这就会起作用。

在这里，您可以找到 .NET 环境的示例。

[打开默认邮件客户端以及附件](https://stackoverflow.com/questions/20328598/open-default-mail-client-along-with-a-attachment/25586282#25586282)

# xslt - Umbraco Contour, 1.1.12 - 选择下拉列表的值

> ID：15273614
> 
> 赞同：0
> 
> 时间：2013-03-07T14:21:57.147
> 
> 标签：xslt, umbraco, umbraco-contour

本质上我的 XSLT 没有达到标准，该字段是 Contour 中的一个下拉列表，我得到它是这样的：

```
<xsl:value-of select="$records//fields/child::* [name() = 'countryoforigin']"/> 
```

但是，这会带回我不想要的值：

> 3c7607b3-714c-47ec-8863-3919c6bdcfc9dc2c66c2-fa57-4e98-b26a-89b7ed041300#country of originStringUnited Kingdomld

我只想要这个值，在这种情况下是“英国”。

作为输入字段的其他字段，像这样带回值：

```
<xsl:value-of select="$records//fields/child::* [name() = 'position']/.//value"/> 
```

但是当相同的应用于下拉列表时（名称='countryoforigin'） - 它不起作用

有什么想法吗？

Ĵ

*更多片段*

XML:

```
 <state>Approved</state>
    <created>2013-03-07T11:42:47</created>
    <updated>2013-03-07T11:42:36</updated>
    <id>325c5b27-9f0f-443b-89a2-af82bfd33356</id>
    <ip>37.152.45.58</ip>
    <pageid url="/" name="Home">1051</pageid>
    <memberkey email="" login=""></memberkey>
    <fields>
        <position record="325c5b27-9f0f-443b-89a2-af82bfd33356" sortorder="3" pageindex="0" fieldsetindex="0">
            <key>ae7f2030-1a29-4b5a-9967-2c0c939a32cb</key>
            <fieldKey>08d208c3-3c49-48ca-ac2a-5a50560a8351</fieldKey>
            <caption>#position</caption>
            <datatype>String</datatype>
            <values>
                <value><![CDATA[aM]]></value>
            </values>
        </position>
        <name record="325c5b27-9f0f-443b-89a2-af82bfd33356" sortorder="0" pageindex="0" fieldsetindex="0">
            <key>d64d51e4-b663-4279-9e5b-473d47a8751b</key>
            <fieldKey>af70f6b5-7b5c-4ac4-9643-1028a62d580a</fieldKey>
            <caption>#name</caption>
            <datatype>String</datatype>
            <values>
                <value><![CDATA[amTest4]]></value>
            </values>
        </name>
        <countryoforigin record="325c5b27-9f0f-443b-89a2-af82bfd33356" sortorder="4" pageindex="0" fieldsetindex="0">
            <key>4eb2aeaf-2b21-498f-ba38-61d20da66339</key>
            <fieldKey>dc2c66c2-fa57-4e98-b26a-89b7ed041300</fieldKey>
            <caption>#country of origin</caption>
            <datatype>String</datatype>
            <values>
                <value key="fd329420-b331-4a32-bd15-1cf2ca333c1f"><![CDATA[United Kingdom]]></value>
            </values>
        </countryoforigin>
        <sendmemail record="325c5b27-9f0f-443b-89a2-af82bfd33356" sortorder="0" pageindex="0" fieldsetindex="1">
            <key>41b02cfb-ff5b-41ff-beed-6fbfdc7ad900</key>
            <fieldKey>f81d8b63-86ea-4609-9925-f4f9ae20b82f</fieldKey>
            <caption>#send me mail</caption>
            <datatype>Bit</datatype>
            <values>
                <value><![CDATA[True]]></value>
            </values>
        </sendmemail>
        <email record="325c5b27-9f0f-443b-89a2-af82bfd33356" sortorder="2" pageindex="0" fieldsetindex="0">
            <key>7763ac53-1569-43b4-8bab-c14bb30d2874</key>
            <fieldKey>cccb1f0f-ff81-4a25-8d37-f3c7be6553f0</fieldKey>
            <caption>#email</caption>
            <datatype>String</datatype>
            <values>
                <value><![CDATA[test@test.com]]></value>
            </values>
        </email>
        <jobtitle record="325c5b27-9f0f-443b-89a2-af82bfd33356" sortorder="1" pageindex="0" fieldsetindex="0">
            <key>4a8d98bb-407a-428b-a47c-c352653f3836</key>
            <fieldKey>502ceee3-4025-41dc-a6c4-a95825f8a1fb</fieldKey>
            <caption>#job title</caption>
            <datatype>String</datatype>
            <values>
                <value><![CDATA[amTest4]]></value>
            </values>
        </jobtitle>
    </fields>
</uformrecord> 
```

代码片段：

```
<xsl:param name="currentPage"/>
<xsl:param name="records" />
<table>
    <tr>
        <td width="26%">
            <font face="arial" color="#333333" size="2"><strong><xsl:value-of select="umbraco.library:GetDictionaryItem('position')"/>:</strong></font>
        </td>
        <td width="74%"><font face="arial"><xsl:value-of select="$records//fields/child::* [name() = 'position']/.//value"/></font>
        </td>
    </tr>       
</table>
<p>
      <font face="arial" color="#333333" size="2">
          <strong>
              Country of origin
              <br/>

              <xsl:value-of select="$records//fields/child::* [name() = 'countryoforigin']"/>

          </strong>
      </font>
  </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:36:08.917

好的，就像其他值一样，这应该可以完成工作：

```
<xsl:value-of select="$records//fields/*[name() = 'countryoforigin']//value"/> 
```

# selenium - Selenium WebDriver - 同时按下和单击 C#

> ID：15273616
> 
> 赞同：3
> 
> 时间：2013-03-07T14:22:02.110
> 
> 标签：selenium, webdriver, automated-tests, selenium-webdriver

如何同时在 selenium WebDriver 2 中执行两个操作？我需要按住 CTRL 并单击链接。我想在 C# 中看到一些解决方案。

这是行不通的。

```
Actions builder = new Actions(_driver);
builder.SendKeys(Keys.Control).Click(link).KeyUp(Keys.Control);
IAction multiple = builder.Build();
multiple.Perform(); 
```

非常感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:36:48.210

您忽略了构建器的返回值。尝试：

```
Actions builder = new Actions(_driver);
builder = builder.KeyDown(Keys.Control).Click(link).KeyUp(Keys.Control);
IAction multiple = builder.Build();
multiple.Perform(); 
```

甚至是等效的速记：

```
new Actions(_driver)
    .KeyDown(Keys.Control)
    .Click(link)
    .KeyUp(Keys.Control)
    .Perform(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T13:07:59.027

如果您无法`Actions`正常工作，您可以退出并调用 javascript（或 jQuery，如我这里的示例），以调用*Ctrl-Click*。

示例 html 片段（您正在尝试对其进行自动化测试）...

```
<script type='text/javascript'>
    function myClick(e) {if(e.ctrlKey) {alert('ctrl+click');}}
</script> 
```

...

```
<img id='myElement' onclick='myClick();' src='abc.gif' /> 
```

示例 c# 调用：

```
public void ExecuteJs(string javascript)
{
    var js = Browser.WebDriver as IJavaScriptExecutor;
    if (js != null) js.ExecuteScript(javascript);
}

public void CtrlClickElement(string elementId)
{
    var script = string.Format("var e=jQuery.Event('click');e.ctrlKey=true;$('#{0}').trigger(e);", elementId);
    ExecuteJs(script);
} 
```

...

```
CtrlClickElement("myElement"); 
```

参考：

*   Selenium Google Code 网站上的相关[公开问题。](https://code.google.com/p/selenium/issues/detail?id=6817)
*   [jQuery 事件对象](http://api.jquery.com/category/events/event-object/)

# c# - C# 将图片插入 Ms Access

> ID：15273617
> 
> 赞同：4
> 
> 时间：2013-03-07T14:22:02.173
> 
> 标签：c#, database, image, insert

我要感谢所有在最后一个问题中提供帮助的人。但现在，我对另一种说法有问题，即 saveimageto MS 访问。首先我想问一下，关于ms访问数据库，Datatype应该放附件吗？

我的代码：

```
private void button2_Click(object sender, EventArgs e)
        {

            OleDbCommand cmd = new OleDbCommand();
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "insert into Table1 (id,picture) values ('" + textBox1.Text +  "')";

            cmd.Connection = con;
            con.Open();
            cmd.ExecuteNonQuery();
            System.Windows.Forms.MessageBox.Show("Created", "Caption", MessageBoxButtons.OKCancel, MessageBoxIcon.Information);
            con.Close();

        } 
```

我使用 openFIledialog 将图片插入图片框。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T14:30:14.650

首先，使用参数。永远不要连接 SQL 命令的字符串，因为它会向 SQL 注入开放。这是一个易于遵循的良好做法，可以避免您将来遇到很多麻烦。

也就是说，这样的事情应该有效：

```
// You've got the filename from the result of your OpenDialog operation
var pic = File.ReadAllBytes(yourFileName);
OleDbCommand cmd = new OleDbCommand();
cmd.CommandType = CommandType.Text;
cmd.CommandText = "insert into Table1 (id, picture) values (@p1, @p2)";
cmd.Parameters.AddWithValue("@p1", TextBox1.Text);
cmd.Parameters.AddWithValue("@p2", pic);
cmd.ExecuteNonQuery(); 
```

在这里从记忆中引用，但如果该代码给您带来麻烦，请告诉我。如果我没记错的话，这样的东西应该可以工作。

编辑 - 如果您在 PictureBox 控件上预加载图像，则将该图像转换为字节数组，然后将该字节数组用作第二个参数。

编辑 (2).- 稍微澄清一下。如果您要从文件中获取图像，那么您就有了它的路径；那么你可以使用`File.ReadAllBytes(string path)`. 在我的示例中，我假设这`yourFileName`是成功`OpenDialog`操作后所选文件的文件和路径名。所以你可以像这样使用它：

```
byte[] fromPath = File.ReadAllBytes(@"C:\walls\aurora.jpg"); 
```

并且您将图像存储到字节数组 fromPath 中，转换为字节并准备好在插入命令中使用，如上所示。

**但是**，如果您从图片框控件中获取图像，则情况会有所不同：

```
MemoryStream ms = new MemoryStream();
pictureBox1.Image.Save(ms, Imaging.ImageFormat.Jpeg);
byte[] fromControl = ms.GetBuffer(); 
```

在该示例中，我创建了一个`MemoryStream`，用图片框控件的内容填充它，然后将其传递给字节数组，我们再次准备将其用作插入查询的参数。

哦，别忘了加

```
using System.IO;
using System.Drawing; 
```

到你的用途。

# asp.net - IE10 SCRIPT5009：“__doPostBack”未定义

> ID：15273618
> 
> 赞同：31
> 
> 时间：2013-03-07T14:22:02.957
> 
> 标签：asp.net, postback, internet-explorer-10

我在 IE10 上遇到了一个需要 JavaScript 回发的 ASP.NET 控件问题[例如，链接按钮]。

它在 IE9 版本以及 IE10 兼容模式下都能正常工作。但是在 IE10 标准模式下，它给出了以下错误。SCRIPT5009：“__doPostBack”未定义

[我用一个简单的 asp:link 按钮创建了一个演示项目，该按钮重定向到另一个页面。] ![IE10_错误画面](../Images/4c7e8df4b3b648c56d50df2b6ca756db.png)

[尝试了解决方案，但对我不起作用](http://www.hanselman.com/blog/CommentView.aspx?guid=40de7f39-3ff7-4f21-89ab-baa6cdd9d51e#commentstart)

任何人都可以建议解决这个问题吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-14T21:42:43.150

.NET 2.0 和 .NET 4 附带的浏览器定义文件中显然存在错误。定义文件不适合 IE10 作为浏览器版本，因此默认为不支持 JavaScript 的默认定义。

Scott Hanselman 在这里有关于这个问题的非常详细的文章：[http ://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

Scott 提出了两种解决方案，第一种是推荐的：

**1.机器范围** 的修复在服务器上下载并安装一个修复程序：

*   .Net 4 ( [http://support.microsoft.com/kb/2600088](http://support.microsoft.com/kb/2600088) )
*   .Net 2 ( [http://support.microsoft.com/kb/2600100](http://support.microsoft.com/kb/2600100) , [http://support.microsoft.com/kb/2608565](http://support.microsoft.com/kb/2608565) )

**2\. 仅站点修复**从 NuGet 安装`App_BrowsersUpdate`包到您的网站以导入新的 ie 和 firefox 浏览器定义。

*   .Net 4 ( [http://nuget.org/List/Packages/App_BrowsersUpdate](http://nuget.org/List/Packages/App_BrowsersUpdate) )
*   .Net 2 ( [http://nuget.org/List/Packages/App_BrowsersUpdate.net20](http://nuget.org/List/Packages/App_BrowsersUpdate.net20) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T21:43:00.287

如果您已尝试修复并且仍然在 IE11 中看到错误，则将 .net 框架更新到 4.5 即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:53:00.327

IE 10 有问题：

它无法识别带有 _doPostBack 的链接【在 ASP Link Button 的 HTML 输出中基本可以看到】

您可以参考以下链接进行修复：

[http://ronniediaz.com/2013/02/07/ie10-imagebutton-_dopostback-undefined-bug-with-update-panel-script-manager/](http://ronniediaz.com/2013/02/07/ie10-imagebutton-_dopostback-undefined-bug-with-update-panel-script-manager/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T09:24:31.560

基本上发生了什么是缺少 2 个 html 隐藏元素“eventtarget”和“eventargument”，以及缺少函数“__doPostBack”。

DOM 中缺少这些。

我尝试了为此列出的所有修复程序，但没有一个有效。然而，使用 jquery 和 javascript 的组合有一个不显眼的解决方案。将此添加到您的 javascript 上准备好文档，然后您就可以参加比赛了（这比在您的服务器上安装 .net 框架 4.5 更快，尽管如果您可以安装 4.5 这就是要走的路）：

```
if ($('#__EVENTTARGET').length <= 0 && $('#__EVENTARGUMENT').length <= 0) {
  $('#YOUR_ASPNET_FORMID').prepend('<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" /><input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />');
}

if (typeof __doPostBack == 'undefined') {
  __doPostBack = function (eventTarget, eventArgument) { 
    var theForm = document.forms['YOUR_ASPNET_FORMID'];
    if (!theForm) {
      theForm = document.YOUR_ASPNET_FORMID;
    }
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
      theForm.__EVENTTARGET.value = eventTarget;
      theForm.__EVENTARGUMENT.value = eventArgument;
      theForm.submit();
    }
  };
} 
```

我知道有些人说安装 4.5 解决了这个问题。我肯定会推荐的。但是，如果您像我一样在使用 .net 4 中烘焙的 cms 系统的企业公共站点上工作，这可能只是一个更简单的解决方案，而不是可能引入因更新您的平台而产生的新错误。

# c# - TCP客户端的最大发送速度是否完全受限于客户端计算机的上传速度

> ID：15273620
> 
> 赞同：7
> 
> 时间：2013-03-07T14:22:04.697
> 
> 标签：c#, performance, networking, tcp

## 背景

我正在尝试将远程计算机桌面的实时提要流式传输到我的应用程序。为此，我使用了面向连接的 (TCP) 套接字，捕获客户端计算机的帧并将其发送到服务器。

## 我的研究

我每 100 毫秒（即 10 FPS）发送一个帧（屏幕截图）。每帧大约 145kb，这意味着我需要每秒发送 1450kb（相当于 1.4 兆字节，每秒 11 兆位）。

我的互联网的最大下载速度为每秒 0.32 兆位。因为我需要每秒发送 11 兆比特的数据，这意味着我的互联网比我需要的要慢 10.6 兆比特。因此，根据我的计算，为了有效地流式传输桌面，我需要每帧大约为 4.5kb（4608b + 20b TCP 标头），这在当前系统下实际上是不可能的，即使仅发送桌面的更新部分并压缩位图也是如此.

## 问题

我不确定系统是否完全受到上传速度的限制。我认为这是因为 4.5kb 的大小非常小。我可以使用类似的软件（Teamviewer、Join.me 和 Skype 等软件）完美流畅地流式传输我的桌面，即使这些软件包使用的协议比我智能得多（[这里是个好问题](https://stackoverflow.com/questions/9498877/how-is-teamviewer-so-fast)）我非常怀疑它们只发送 4.5kb每个框架/桌面更新。

所以我的问题最终是；我的计算是否准确，为什么？我的目标是确定每个帧的合适大小，然后我可以努力达到该大小并计算不同速度连接的质量/间隔。当然，我对任何对我的情况有帮助的评论/答案都很感兴趣，但我接受的答案将是回答我实际问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:43:44.813

首先不要混淆位和字节，因为你的计算有点混乱。

其次，你只看你发送的对象的大小，你忘记了数据包本身，它增加了一点大小，不要忘记你将忍受的 TCP 延迟。如果您的网络对发送流量如此敏感，我建议升级它，或使用更好的压缩。

总结一下，我总是说：网络支持的带宽等于所需路径上带宽最小的部分。

例如：10M => 100K => 1M ==> 10M（这里最大速度为 100K）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:43:35.617

> TCP客户端的最大发送速度是否完全受限于客户端计算机的上传速度

这是一个毫无意义的问题。对于任何给定的连接，它们都是一样的，它们都取决于它们之间最慢链接的速度。

# php - 将 RegEx for php 设置为 workarund oracle 的 4Kb 查询限制

> ID：15273622
> 
> 赞同：0
> 
> 时间：2013-03-07T14:22:09.280
> 
> 标签：php, regex, oracle

我正在尝试使用大字符串 (>4Kb) 更新 oracle Clob 字段。我正在使用 phpBB 的 (3.0) 数据库抽象类来执行查询，这些查询实际上包含大于 4000 个字符的查询代码。但是，当我尝试执行下面的查询时，正则表达式类无法捕获更新查询。你能告诉我这个正则表达式有什么问题吗？

```
$query = "UPDATE table_x
   SET id = '4',
       type_id = '77',
       holder = '99999',
       year = '2012',
       period = '1',
       rel_year = '2013',
       start = '14/01/2013',
       finish = '15/02/2013',
       total_days = '120',
       total_units = '1042',
       answered = '865',
       non_response = '174',
       na = '3',
       sent = '1',
       assessments = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse semper pulvinar nunc, nec fringilla mauris ultrices et. Mauris urna metus, laoreet quis viverra vel, venenatis in enim. Vivamus suscipit ultrices venenatis. Proin sed augue dolor. Donec quam magna, ornare eget varius quis, dignissim sed diam. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque convallis gravida augue, rutrum commodo lectus semper sit amet. Curabitur ac lorem non leo ultricies malesuada ut in leo. Ut vitae enim felis, at vehicula arcu.
Phasellus diam augue, molestie at adipiscing vitae, semper in massa. Suspendisse ac urna et sem vehicula fringilla id ac ligula. Nunc feugiat dolor nec leo mollis interdum. Nam consectetur, diam malesuada vestibulum rutrum, neque neque porttitor nisi, in molestie metus orci in mauris. Cras in est lectus, in luctus mi. Etiam suscipit elit et odio viverra nec vehicula orci cursus. Nullam ornare, arcu eget condimentum ullamcorper, nulla mauris rhoncus nisi, sed dapibus velit leo at nisi. Nullam interdum feugiat enim, ut vulputate enim fringilla mattis. Donec eget neque nisl, laoreet tincidunt ante. Etiam ac urna libero, nec suscipit mauris. Etiam ullamcorper, erat sed tempus aliquet, dui erat vehicula sem, et congue dolor elit malesuada justo. Nunc sodales ipsum at tellus posuere eu pretium elit mattis. Quisque velit sem, egestas et placerat quis, semper non arcu.
Ut dignissim adipiscing nunc, nec eleifend nisi tincidunt eu. Ut aliquet rhoncus cursus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis viverra dui sit amet ipsum lobortis ornare. Integer odio lacus, volutpat id euismod ut, tincidunt vitae nibh. Vivamus elit nisi, ornare et vulputate a, egestas et libero. Mauris eros urna, faucibus ut imperdiet ac, commodo in libero. Vestibulum ac tellus at nulla malesuada placerat nec tempus mauris. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Mauris nulla ligula, tempor non congue non, dictum eget arcu. Donec et urna tortor. Pellentesque neque tortor, adipiscing id sodales condimentum, fringilla vel erat. Phasellus nibh magna, varius ut imperdiet sit amet, ultricies vitae eros. Aenean interdum luctus ipsum. Aenean mauris eros, accumsan eget auctor in, imperdiet ut arcu.
Donec aliquet sodales lorem eu varius. Nulla facilisi. Vestibulum ut dolor nisl. Fusce feugiat vulputate est, vel auctor lorem gravida eget. Ut nec aliquam lorem. Vestibulum mattis elit tortor. Praesent et rutrum metus.
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed placerat sollicitudin mauris, et euismod ligula tincidunt sed. Nullam ut dui dolor, ut egestas augue. Curabitur eget ultrices nunc. Cras dapibus, metus at lobortis consectetur, sapien augue pharetra odio, a suscipit velit sem a tellus. Vivamus porttitor cursus magna at convallis. Vivamus neque justo, lobortis sit amet facilisis sed, auctor in justo. Phasellus venenatis felis at orci volutpat non viverra nisl ultricies. Sed sed lectus dui, a dignissim neque. Morbi posuere, dui nec varius laoreet, nunc velit tempor lacus, eget placerat nibh augue ac lacus. Sed mauris nulla, ultrices eget dignissim et, viverra sagittis justo. Suspendisse sem lorem, blandit nec pretium sed, tristique ac tellus. Sed vestibulum lorem sit amet odio scelerisque eu blandit nisl ornare. Pellentesque urna justo, condimentum a rutrum vitae, tincidunt at odio. Proin et est leo.
Nunc porta risus non erat sollicitudin tincidunt. Sed pellentesque varius risus mattis hendrerit. Donec nec ipsum ut sem aliquam lacinia lacinia eu libero. Nulla commodo tellus in lacus semper porta. Nulla eros odio, pulvinar non ultrices a, tempus hendrerit purus. Aliquam erat eros, lacinia non sodales a, varius at augue. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae;
Maecenas risus ante, sollicitudin molestie eleifend ut, vestibulum sit amet magna. Maecenas quis urna a augue facilisis tristique et eget lacus. Cras non augue ante. Vestibulum non rutrum nunc. Vivamus imperdiet, elit vitae convallis dictum, nisi magna rhoncus odio, nec ornare tortor dolor in magna. Sed accumsan, leo imperdiet tincidunt scelerisque, est arcu interdum nibh, id mattis quam mi in dui. Quisque vitae risus sagittis odio consequat varius. Etiam quis risus in magna pretium rutrum. Aenean ac elementum metus. Vestibulum a orci non nulla elementum tincidunt. Morbi '
 WHERE id = '20'";

if (preg_match_all('/^(UPDATE [\\w_]++\\s+SET )([\\w_]++\\s*=\\s*(?:\'(?:[^\']++|\'\')*+\'|[\d-.]+)(?:,\\s*[\\w_]++\\s*=\\s*(?:\'(?:[^\']++|\'\')*+\'|[\d-.]+))*+)\\s+(WHERE.*)$/s', $query, $data, PREG_SET_ORDER)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:37:40.773

在 Oracle 中，除非使用 PL/SQL，否则不能修改字符串长度超过 4000 个字符的 CLOB 列。例如，您需要定义一个 CLOB 变量，将您的字符串分配给您的变量，然后执行您的 DML。

```
DECLARE
  l_str CLOB;
BEGIN
  l_str := 'My really long string....';
  UPDATE table_x SET assessments = l_str WHERE id = 20;
  COMMIT; --Or not commit until your transaction is complete
END; 
```

我不熟悉如何在 phpBB 中处理 DML 语句，但 Oracle 数据库希望您使用 PL/SQL 处理超过 4000 个字符的 CLOBS。看看是否可以通过 PL/SQL 块作为`$query`.

# asp.net - 从字符串到类型“日期”的转换无效使用正确的日期字符串

> ID：15273626
> 
> 赞同：0
> 
> 时间：2013-03-07T14:22:13.160
> 
> 标签：asp.net, vb.net

我面临一个奇怪的错误

我正在使用以下行来解析字符串到日期

```
DepartureDate = CDate("20" & year & "/" & month & "/" & day & " " & hour & ":" & minute) 
```

它工作正常。

但有时我从我的网站页面收到以下错误

> 从字符串“2013/04/14 18:15”到类型“日期”的转换无效。

字符串是正确的日期，为什么会出现此错误。

重新启动 IIS 时错误停止

IIS 发生了什么事，所以它抛出了这个错误？？？

以及如何处理此类错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:29:14.590

该错误可能是因为文化设置发生了变化。

不要将组件放在一个字符串中然后解析它，而是直接从组件创建一个值：

```
DepartureDate = New DateTime(2000 + year, month, day, hour, minute, 0) 
```

# regex - 日志的正则表达式

> ID：15273630
> 
> 赞同：0
> 
> 时间：2013-03-07T14:22:26.680
> 
> 标签：regex, vbscript

我有一个这样的日志文件：

```
some strings...
<FX>
another strings...
<FX s='asdf' asd="ascvas">
<TEG1>
  <TEG2>
  </TEG2>
</TEG1>
</FX>
some strings...
</FX>
some strings...
<FX>
             <?xml version="1.0" encoding="utf-16" standalone="yes"?>    

<FX>
<CLR>
</CLR>
</FX>
end of file
</FX> 
```

我需要编写 vbscript 正则表达式来解析它并得到这个结果：

```
<FX s='asdf' asd="ascvas">
    <TEG1>
      <TEG2>
      </TEG2>
    </TEG1>
</FX> 
```

和

```
<?xml version="1.0" encoding="utf-16" standalone="yes"?>    
<FX>
    <CLR>
    </CLR>
</FX> 
```

我已经写了这个表达式：

```
(<\?xml[^>]*>[\s\S]*)*<\s*FX[^>]*>((?!<\s*FX[^>]*>)[\s\S])*<\s*/\s*FX\s*> 
```

但它不适用于标签/FX。您可以在这里查看 rezult： [http ://regexr.com?341ps](http://regexr.com?341ps)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:24:09.020

以这种方式更改它：

```
^\<\?xml[^>]*>[\s\S]*<\s*FX[^>]*>((?!<\s*FX[^>]*>)[\s\S])*<\s*/\s*FX\s*> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T08:04:01.437

```
/(<[^\s]+\s+\w=[^>]+>[^/]+\/[^/]+/[^/]+/[^>]+>)|(<\?xml[^/]+/[^/]+/[^>]+>)/m
# http://regexr.com?386si

/(<[^\s]+\s+\w=[^>]+>[^\/]+\/[^\/]+\/[^\/]+\/[^>]+>)|(<\?xml[^\/]+\/[^\/]+\/[^>]+>)/m
# (escaped forward slash)
# http://rubular.com/r/SwI2vz6ctk 
```

[http://regexr.com?386si](http://regexr.com?386si)

[http://rubular.com/r/SwI2vz6ctk](http://rubular.com/r/SwI2vz6ctk)

# ios - 使用 UIImage 时图像不从 URL 保存

> ID：15273631
> 
> 赞同：1
> 
> 时间：2013-03-07T14:22:31.490
> 
> 标签：ios, objective-c

“img”实际上是一个带有 URL 的字符串，但我实际上也将它用作文件名

```
NSString *applicationDocumentsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString *storePath = [applicationDocumentsDir stringByAppendingPathComponent:img];

NSURL *url = [NSURL URLWithString:img];
NSData *imageData = [NSData dataWithContentsOfURL:url];  

[imageData writeToFile:storePath atomically:TRUE]; 
```

在我的视图控制器中，我得到了这个：

```
UIImage *img = [[UIImage alloc] initWithContentsOfFile:self.initialImg];
if(img == nil) NSLog(@"image is nil");
[self.image setImage:img]; 
```

"initialImg" 是一个 NSString，其 url 与 "img" 中的相同。我还用另一个字符串（如 test.png）更改了“img”和“initialImg”，但这也不起作用。

它打印出“图像为零”，不知道为什么它是零......

**编辑：**

现在我得到了：

```
 NSURL *url = [NSURL URLWithString:img];
    NSData *imageData = [NSData dataWithContentsOfURL:url]; 

    UIImage *uiImage=[UIImage imageWithData:imageData];

    NSData *pngData = UIImagePNGRepresentation(uiImage);
    NSString *documentsPath  = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    NSString *filePath = [documentsPath stringByAppendingPathComponent:@"image.png"]; 
    [pngData writeToFile:filePath atomically:YES]; 
```

在 viewDidLoad 函数的另一个视图控制器中：

```
 UIImage *img = [[UIImage alloc] initWithContentsOfFile:@"image.png"];
    if(img == nil) NSLog(@"image is nil");

   [self.image setImage:img]; 
```

它仍然显示“图像为零”，我更改了网址，但它们是正确的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:34:58.937

因为 `initWithContentsOfFile:`你应该给出整个文件路径。我认为您只提供文件名。
**试用案例**

```
NSString *initialImg= @"test.png";
NSString *imagePath = [[NSBundle mainBundle]pathForResource:initialImg ofType:@"png"];
UIImage *img = [[UIImage alloc] initWithContentsOfFile:imagePath];
if(img == nil) NSLog(@"image is nil");
[self.image setImage:img]; 
```

否则你可以使用

```
self.image =[UIImage imageNamed:@"test.png"] 
```

但这会导致性能问题

**回答你的问题**

```
//Write image data into document directory  

NSData *pngData = UIImagePNGRepresentation(image);
NSString *documentsPath  = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *filePath = [documentsPath stringByAppendingPathComponent:@"image.png"]; //Add the file name
[pngData writeToFile:filePath atomically:YES]; //Write the file

 // Read from directory using same file path 
NSData *pngData = [NSData dataWithContentsOfFile:filePath];
UIImage *image = [UIImage imageWithData:pngData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:20:51.397

我想这对你来说已经足够了......

```
NSString *applicationDocumentsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString *storePath = [applicationDocumentsDir stringByAppendingPathComponent:img];

NSURL *url = [NSURL URLWithString:img];
NSData *imageData = [NSData dataWithContentsOfURL:url];

[imageData writeToFile:storePath atomically:TRUE]; 
```

**在 viewDidLoad**
// 你需要**storePath**而不是 url

```
NSData *imageData = [NSData dataWithContentsOfFile:storePath];
UIImage *image = [UIImage imageWithData:imageData]; 
```

# .net - 在 .net 应用程序中使用 capsol.exe

> ID：15273633
> 
> 赞同：0
> 
> 时间：2013-03-07T14:22:40.547
> 
> 标签：.net, vb.net, .net-2.0, caspol

我正在创建一个 .net 应用程序，该应用程序在从网络运行时由于不信任而出现错误。所以我想使用 caspol.exe 。我知道手动使用它的命令行。但是我如何使用它来使应用程序本身信任路径？我如何在我的应用程序中实现它以使其变得可信。

# r - 无法找出 lapply 中的错误

> ID：15273635
> 
> 赞同：4
> 
> 时间：2013-03-07T14:22:43.763
> 
> 标签：r, apply, lapply

我是一个初学者，几周前学习了 R，我正在努力学习这个`apply`家庭。无法弄清楚如何使用`lapply`，这令人抓狂。是的，我查了`?lapply`几本书，包括[R 简而言之](https://rads.stackoverflow.com/amzn/click/com/059680170X)和[R 食谱](https://rads.stackoverflow.com/amzn/click/com/0596809158)，但仍然无法弄清楚我做错了什么。

```
lapply(X = c("ggplot2", "gtable", "grid"), library)
## Error: 'package' must be of length 1
lapply(X = c("ggplot2", "gtable", "grid"), FUN = function(x) library(x))
## Error: there is no package called 'x'
lapply(X = c("ggplot2", "gtable", "grid"), FUN = library)
## Error: 'package' must be of length 1
x = c("ggplot2", "gtable", "grid")
lapply(x, library)
## Error: 'package' must be of length 1
lapply(x, FUN = function(x) library(x))
## Error: there is no package called 'x' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T14:31:51.953

你`lapply()`本身没有问题，但问题是`library()`它以一种稍微特殊的方式评估它的论点。

这意味着您需要使用

```
library(pkg.name, character.only=TRUE) 
```

这在帮助中相当模糊`?library`：

> 包，帮助包
> 的名称，以名称或文字字符串或字符串形式给出，具体取决于 character.only 是 FALSE（默认）还是 TRUE）。

这意味着如果您向 提供字符串`library()`，则*必须*设置`character.only`为 TRUE。

所以，试试这个：

```
lapply(x, library, character.only=TRUE) 
```

然后你可能想要调用`require()`而不是`library()`，并使用 简化结果`sapply`：

```
sapply(x, require, character.only=TRUE)
ggplot2  gtable    grid 
   TRUE    TRUE    TRUE 
```

不同之处在于`require()`返回一个逻辑值，指示包是否加载成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:29:37.850

试试这个例如：

```
 lapply(X = c("ggplot2", "gtable", "grid"), library,character.only =T) 
```

看`?library`

> 包，帮助包的名称，以名称或文字字符串或字符串形式给出，具体取决于 character.only 是 FALSE（默认）还是 TRUE）。

因此，当您尝试时，例如：

```
lapply(X = c("ggplot2", "gtable", "grid"), FUN = function(x) library(x))
## Error: there is no package called 'x' 
```

你得到一个错误，因为`library` 将 x 作为参数并尝试 loa name = 'x' 的包

# asp.net-mvc - 将 URL 映射到具有相同名称的控制器

> ID：15273656
> 
> 赞同：0
> 
> 时间：2013-03-07T14:23:51.533
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, directory-structure

我有以下路由：

```
routes.MapRoute("Home", "{language}-{culture}/{controller}/{action}"); 
```

然后我有两个这样的控制器：

```
Controllers
--->en-EN
-------->HomeController
--->pt-PT
-------->HomeController 
```

不幸的是，这不起作用，我收到此错误：

“找到了与名为‘Home’的控制器匹配的多种类型。如果为该请求提供服务的路由 (‘{language}-{culture}/{controller}/{action}’) 未指定要搜索的命名空间，则可能会发生这种情况匹配请求的控制器。如果是这种情况，请通过调用带有“命名空间”参数的“MapRoute”方法的重载来注册此路由。

'Home' 的请求找到了以下匹配的控制器：

```
MvcApplication2.Controllers.en_EN.HomeController
MvcApplication2.Controllers.pt_PT.HomeController" 
```

我尝试将命名空间“MvcApplication2.Controllers”添加为参数，但它仍然存在，但我不知道它是如何工作的，但这是我在互联网上找到的解决方案。

我刚刚开始使用 ASP.Net MVC，所以如果我错过了一些非常基本的东西，请不要抱歉。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:37:17.933

你会有很多不同的文化吗？您可能想研究使用[MVC Areas](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)。他们是为这种事情而生的。

如果你只有 2 个，你可以像这样硬编码你的路线：

```
routes.MapRoute(
     "HomeEn", // Route name
     "en-EN/{controller}/{action}", // URL with parameters
     new { controller = "Home", action = "Index" }, // Parameter defaults
     new string[] { "MvcApplication2.Controllers.en_EN"}
);

routes.MapRoute(
     "HomePt", // Route name
     "pt-PT/{controller}/{action}", // URL with parameters
     new { controller = "Home", action = "Index" }, // Parameter defaults
     new string[] { "MvcApplication2.Controllers.pt_PT"}
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:50:56.217

这似乎是一个普遍的误解。MVC 路由与您的文件系统没有任何关联。您可以在嵌套文件夹中尽可能深地埋藏控制器，它仍然只是`HomeController`MVC。

# apex-code - 在 Visualforce 中设置两列的不同宽度？

> ID：15273661
> 
> 赞同：1
> 
> 时间：2013-03-07T14:24:09.130
> 
> 标签：apex-code, visualforce

我想设置两列的宽度（如左列 70% 和右列 30%）。我怎样才能做到这一点。

```
<apex:page>
    <apex:panelGrid columns="2">
        <apex:detail/>
        <apex:outputText>Here come's the Image</apex:outputText>
    </apex:panelGrid>
</apex:page> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:18:03.650

```
<apex:page>
    <script type="text/javascript"        src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
    <apex:panelGrid width="100%" columnClasses="testcc" columns="2">
        <apex:detail/>
        <apex:outputText>Here come's the Image</apex:outputText>
    </apex:panelGrid>
<script>
$(".testcc").each(function( index ) {
   if((index % 2)==0)$(this).css('width','30%');
   else $(this).css('width','70%');
});
<script>
</apex:page> 
```

# text - 替换所有出现的空格字符

> ID：15273663
> 
> 赞同：1
> 
> 时间：2013-03-07T14:24:15.667
> 
> 标签：text, replace, mootools

我正在寻找替换空格（非中断空间）的解决方案。
这是我尝试过的：

```
 var text = this.get('text').toLowerCase().replace(' ',''); 
```

但它没有按预期工作，也没有替换所有空格。
如果相关，我正在使用 MooTools。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:33:26.380

Mootools replace 仅替换第一个实例，除非您使用带有全局修饰符的正则表达式。试试这个。

```
var text = this.get('text').toLowerCase().replace(/\s/g,''); 
```

# c# - C#中的while循环无限循环

> ID：15273665
> 
> 赞同：1
> 
> 时间：2013-03-07T14:24:21.647
> 
> 标签：c#, while-loop, console-application

下面是我的代码

```
namespace ProgrammingTesting
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("GUESS THE ANSWER");
            Console.WriteLine("Please enter the input");

            int input1 = (int.Parse(Console.ReadLine()));
            while (input1 != 4)
            {
                Console.WriteLine("Try agian");
            }
            if (input1 == 4)
            {
                Console.WriteLine("You are a winner");
                Console.ReadLine();
            }
            else if (input1 < 4)
            {
                Console.WriteLine("TOOOOO low");
                Console.ReadLine();
            }
            else if (input1 > 4)
            {
                Console.WriteLine("TOOOO high");
                Console.ReadLine();          
            }
        }
    }
} 
```

在这里我设置了while条件但仍然无法继续。它正在无限循环

在这里我想应用一个条件，如果用户输入的数字不是 4，那么它应该开始并且用户应该再次输入数字。现在它正在关闭控制台应用程序。如何放置while loo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:25:11.850

您只是`input1`在循环开始之前更改 的值。由于您永远不会再更改它，因此它将永远循环下去。

编辑：您可能需要考虑为您的循环执行以下操作：

```
int input1 = 0;
while (input1 != 4)
      {
        input1 = (int.Parse(Console.ReadLine()));

        if (input1 == 4)
        {
            Console.WriteLine("You are a winner");
        }
        else if (input1 < 4)
        {
            Console.WriteLine("TOOOOO low");
          Console.WriteLine("Try agian");

        }
        else if (input1 > 4)
        {
            Console.WriteLine("TOOOO high");
          Console.WriteLine("Try agian");

        }    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:25:49.380

添加

```
input1 = (int.Parse(Console.ReadLine())); 
```

在你的 while 循环结束时，或者 input1 永远不会改变。

但这还不够。

你应该这样做（不是很好，但工作）

```
static void Main(string[] args)
{
    Console.WriteLine("GUESS THE ANSWER");

    int answer;
    var success = false;
    Console.WriteLine("Please enter the input");
    while (!success) {

       var userInput = Console.ReadLine();

       if (!Int32.TryParse(userInput, out answer))
          Console.WriteLine("You must enter an integer");

       else {
          if (answer < 4)
             Console.WriteLine("Too low");

          else if (answer > 4)
             Console.WriteLine("Too high");

          else {
             Console.WriteLine("Grats !");
             success = true;
          }
        }
      if (!success)
         Console.WriteLine("Try again !");
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:25:21.907

好吧，`input1`在循环内的任何地方都不会改变。因此，很自然，如果循环输入一次，则每次都输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:25:51.720

```
 while (input1 != 4)
  {
      Console.WriteLine("Try agian");

  } 
```

在上面的代码中，never 的值`input1`永远不会改变，所以它永远循环

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T14:44:55.307

我更正了您的缩进，您可以看到您的 while 块仅包含 Console.WriteLine 而不是输入检查，因此 input1 不会更改并且您的循环是无限的。

如果您删除 Console.WriteLine 下的 } 并将其放在末尾，您将能够通过输入 4 来停止循环。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T15:47:46.273

我修改了你的代码，请检查

```
 namespace ProgrammingTesting
{
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("GUESS THE ANSWER");
        Console.WriteLine("Please enter the input");
        int input1 = 0;
        while (input1 != 4)
        {
            input1 = (int.Parse(Console.ReadLine()));

            if (input1 == 4)
            {
                Console.WriteLine("You are a winner");
                Console.ReadLine();
            }
            else if (input1 < 4)
            {
                Console.WriteLine("TOOOOO low");

            }
            else if (input1 > 4)
            {
                Console.WriteLine("TOOOO high");

            }
        }
    }
} 
```

}

删除 Console.Readline() ，这样你就不需要输入 doble 时间

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-07T14:26:26.093

你有一个额外的`}`权利在`if (input1 == 4)`关闭while循环，所以while循环永远不会退出，因为它里面没有代码。将大括号向下移动到`if else`.

# opengl - 在 OpenGL 中绑定零纹理

> ID：15273674
> 
> 赞同：4
> 
> 时间：2013-03-07T14:24:40.533
> 
> 标签：opengl, texturing

在我的程序中，我使用 2 个纹理：t0 和 t1。t1 是额外的，仅在某些情况下需要：

```
.....
glActiveTexture ( GL_TEXTURE1 );
if ( mDisplayMode == EDM_DEFAULT ){
    glBindTexture( GL_TEXTURE_2D, 0 ); // In this case I don't need t1
}else{
    glBindTexture( GL_TEXTURE_2D, mglDegreeTexture ); // In this case t1 will overlap t0
}
shader->setUniformValue( "textureId1", 1 ); 
```

绘图着色器：

```
.....
vec4 c1 = texture( textureId0, uv );
vec4 c2 = texture( textureId1, gridUV );
float a = c2.a;
gl_FragColor = ( 1.0 - a )*c1 + a*c2; 
```

它工作正常：第二个纹理在需要时首先重叠。假设使用 glBindTexture( .. , 0 ) 返回零纹理 (0,0,0,0)，但是在将 NVidia 驱动程序更新到 314.07 后，我的代码会产生黑屏，例如 glBindTexture( .. , 0 ) 返回 (0,0 ,0,1) 纹理。

我进行了一些测试：使用着色器

```
....
vec4 c1 = texture( textureId0, uv );
vec4 c2 = texture( textureId1, gridUV );
float a = c2.a;
if (a == 1){
    gl_FragColor = vec4(1,0,0,0);
    return;
}
if ( a == 0){
    gl_FragColor = vec4(0,1,0,0);
    return;
}
gl_FragColor = ( 1.0 - a )*c1 + a*c2; 
```

我在旧驱动程序（296、306）上得到绿屏，在新驱动程序上得到红屏。我在 2 台装有 Win 7 (GeForce 210) 和 win XP (GTX 260) 的计算机上对其进行了测试。

所以我的问题是：使用 0 作为第二个参数的 glBindTexture 是正确的，以及如何使用新驱动程序实现相同的结果（ 0000 纹理）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T15:51:04.177

以下所有内容均指核心配置文件 3.2，但通常适用于所有版本的 GL。

名称 0 对应于默认纹理对象（每个纹理目标一个：1d、2d、...参见 3.8.14，最后一段）。

所以`glBindtexture(2D, 0);`给你默认的纹理对象。这并不*意味着*禁用纹理。现在，默认对象的纹理会产生通常的操作，只是在您自己没有创建的纹理对象上。初始纹理对象最初是不完整的，因此除非您对其进行修改，否则它将遵循“不完整”规则。

现在规范说（3.9.2，纹理访问段落）从不完整的纹理中采样将返回（0,0,0,1）。

所以你的老司机没有按照规范行事。

# java - 是否可以根据在 java 中的调用位置在方法中执行不同的代码？

> ID：15273684
> 
> 赞同：1
> 
> 时间：2013-03-07T14:25:06.197
> 
> 标签：java

我正在浏览 API 并尝试用谷歌搜索，但我想我不能正确地用词或它不可能。我的问题是：是否可以让方法根据调用位置执行特定的代码序列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:29:30.983

您可以[获取当前的堆栈跟踪](https://stackoverflow.com/questions/1069066/get-current-stack-trace-in-java)并从中找出哪个方法调用了您的当前方法。

但是，这似乎非常肮脏，因此您应该确保您的用例确实保证了这种方法，而不是仅仅向方法添加参数或创建不同的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T14:31:09.163

它看起来像是继承和两种不同实现的好地方

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T14:31:53.163

对的，这是可能的。但这可能是个坏主意。

实现这种事情的一种方法是这样的：

```
public void myMethod(...) {
    Exception ex = new Exception();
    StackTraceElement caller = ex.getStackTrace()[1];
    if (caller.getMethod().equals("someMethod") {
        // do this 
    } else {
        // do that
    }
} 
```

StackTraceElement 给出方法的名称、声明类的名称以及源文件的名称和源代码行号（如果可用）。

为什么这是一个坏主意有几个原因：

*   这种东西往往很脆弱。很难预先预测将从哪里调用方法，也很难预测未来某个时间可能由另一个开发人员做出的更改。
*   构建堆栈跟踪数组的成本很高，尤其是在堆栈很深的情况下。
*   它违反了“最小意外”规则。开发人员不希望方法具有那样的行为。
*   很可能有更好的方法来做……无论你想要实现什么。

# xml-parsing - iOS：从 NSMutableArray 中的已解析数据中检索元素

> ID：15273685
> 
> 赞同：1
> 
> 时间：2013-03-07T14:25:08.967
> 
> 标签：xml-parsing, nsmutablearray

我正在努力实现以下目标：

我的应用程序解析一个 XML 文件，构建如下：

```
<product>
 <id>3482</id>
 <title>Product 1</title>
 <number>1</number>
 <description>Text</description>
</product>

<product>
 <id>4743</id>
 <title>Product 2</title>
 <number>2</number>
 <description>Text</description>
</product>

<product>
 <id>3864</id>
 <title>Product 3</title>
 <number>3</number>
 <description>Text</description>
</product> 
```

XML 中有 20 个产品。一切正常。解析器将所有数据保存在 NSMutableArray 中。现在我想从这个 NSMutableArray 中检索产品的所有 20 个标题。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:38:54.703

澄清您正在使用的解析器会很有用。大概这些项目存储为字典数组，其中 xml 属性作为键。如果是这种情况，要获取第一个对象的 id，您可以执行以下操作：

```
[objectArray[0] valueForKey:@"id"]; 
```

# javascript - 如何使用 dojo 提交使用 spring 表单标签创建的表单

> ID：15273687
> 
> 赞同：1
> 
> 时间：2013-03-07T14:25:09.213
> 
> 标签：javascript, spring, dojo, taglib

我有一个使用弹簧表单标签创建的表单。

```
<form:form commandName="cmdName" action="save" id="formId"> 
```

我正在尝试在使用 Dojo 进行验证后提交此表单。当我使用：

```
dijit.byId("formId").submit() 
```

我得到：

```
TypeError: dijit.byId(...) is undefined 
```

在萤火虫控制台和使用时：

```
dojo.byId("formId").submit() 
```

我得到：

```
TypeError: dojo.byId(...).submit is not a function 
```

在搜索时，我在这里发现了一个类似的问题。

[应用程序](http://appfuse.547863.n4.nabble.com/Spring-2-0-Form-tags-And-Javascript-submit-td562601.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:10:34.303

我通过向表单添加隐藏的输入提交按钮来解决此问题。并在验证后调用按钮的单击事件。

```
<input class="hidden" type="submit" value="" name="submit" id="submitId"/> 
```

从脚本：

```
dojo.byId("submitId").click(); 
```

# python - 多个范围的并集

> ID：15273693
> 
> 赞同：21
> 
> 时间：2013-03-07T14:25:23.890
> 
> 标签：python, range, union

我有这些范围：

```
7,10
11,13
11,15
14,20
23,39 
```

我需要执行重叠范围的并集以给出不重叠的范围，因此在示例中：

```
7,20
23,39 
```

我已经在 Ruby 中完成了这项工作，我在数组中推送了范围的开始和结束并对它们进行排序，然后执行重叠范围的联合。在 Python 中有什么快速的方法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T14:28:28.440

假设，`(7, 10)`结果`(11, 13)`为`(7, 13)`：

```
a = [(7, 10), (11, 13), (11, 15), (14, 20), (23, 39)]
b = []
for begin,end in sorted(a):
    if b and b[-1][1] >= begin - 1:
        b[-1] = (b[-1][0], end)
    else:
        b.append((begin, end)) 
```

`b`就是现在

```
[(7, 20), (23, 39)] 
```

**编辑**：

正如@CentAu 正确注意到的那样，`[(2,4), (1,6)]`将返回`(1,4)`而不是`(1,6)`. 这是正确处理这种情况的新版本：

```
a = [(7, 10), (11, 13), (11, 15), (14, 20), (23, 39)]
b = []
for begin,end in sorted(a):
    if b and b[-1][1] >= begin - 1:
        b[-1][1] = max(b[-1][1], end)
    else:
        b.append([begin, end]) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-12-15T00:47:57.130

老问题。但我想添加这个答案以供将来参考。 [sympy](http://docs.sympy.org/latest/index.html)可用于实现区间的联合：

```
from sympy import Interval, Union
def union(data):
    """ Union of a list of intervals e.g. [(1,2),(3,4)] """
    intervals = [Interval(begin, end) for (begin, end) in data]
    u = Union(*intervals)
    return [list(u.args[:2])] if isinstance(u, Interval) \
       else list(u.args) 
```

如果`Union`超过两个区间的输出是一个`Union`对象，而当有一个区间时，输出是一个`Interval`对象。`if statement`这就是返回线中的原因。

例子：

```
In [26]: union([(10, 12), (14, 16), (15, 22)])
Out[26]: [[10, 12], [14, 22]]

In [27]: union([(10, 12), (9, 16)])
Out[27]: [[9, 16]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:33:56.793

我尝试了存在 (45, 46) 和 (45, 45) 的特定案例，以及
在您的应用程序中不太可能发生的测试案例：存在 (11,6)，存在 (-1, -5)， (-9, 5) 的存在，(-3, 10) 的存在。
无论如何，结果对于所有这些情况都是正确的，这是一个重点。

算法：

```
def yi(li):
    gen = (x for a,b in li for x in xrange(a,b+1))
    start = p = gen.next()
    for x in gen:
        if x>p+2:
            yield (start,p)
            start = p = x
        else:
            p = x
    yield (start,x) 
```

如果`aff`在下面的代码中设置为 True，则会显示执行的步骤。

```
def yi(li):
    aff = 0
    gen = (x for a,b in li for x in xrange(a,b+1))
    start = p = gen.next()
    for x in gen:
        if aff:
            print ('start %s     p %d  p+2 %d     '
                   'x==%s' % (start,p,p+2,x))
        if x>p+2:
            if aff:
                print 'yield range(%d,%d)' % (start,p+1)
            yield (start,p)
            start = p = x
        else:
            p = x
    if aff:
        print 'yield range(%d,%d)' % (start,x+1)
    yield (start,x)

for li in ([(7,10),(23,39),(11,13),(11,15),(14,20),(45,46)],
           [(7,10),(23,39),(11,13),(11,15),(14,20),(45,46),(45,45)],
           [(7,10),(23,39),(11,13),(11,15),(14,20),(45,45)],

           [(7,10),(23,39),(11,13),(11,6),(14,20),(45,46)], 
           #1 presence of (11, 6)
           [(7,10),(23,39),(11,13),(-1,-5),(14,20),(45,45)], 
           #2  presence of (-1,-5)
           [(7,10),(23,39),(11,13),(-9,-5),(14,20),(45,45)], 
           #3  presence of (-9, -5)
           [(7,10),(23,39),(11,13),(-3,10),(14,20),(45,45)]): 
           #4  presence of (-3, 10)

    li.sort()
    print 'sorted li    %s'%li
    print '\n'.join('  (%d,%d)   %r' % (a,b,range(a,b)) 
                     for a,b in li)
    print 'list(yi(li)) %s\n' % list(yi(li)) 
```

结果

```
sorted li    [(7, 10), (11, 13), (11, 15), (14, 20),
              (23, 39), (45, 46)]
  (7,10)   [7, 8, 9]
  (11,13)   [11, 12]
  (11,15)   [11, 12, 13, 14]
  (14,20)   [14, 15, 16, 17, 18, 19]
  (23,39)   [23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 
             35, 36, 37, 38]
  (45,46)   [45]
list(yi(li)) [(7, 20), (23, 39), (45, 46)]

sorted li    [(7, 10), (11, 13), (11, 15), (14, 20), 
              (23, 39), (45, 45), (45, 46)]
  (7,10)   [7, 8, 9]
  (11,13)   [11, 12]
  (11,15)   [11, 12, 13, 14]
  (14,20)   [14, 15, 16, 17, 18, 19]
  (23,39)   [23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
             35, 36, 37, 38]
  (45,45)   []
  (45,46)   [45]
list(yi(li)) [(7, 20), (23, 39), (45, 46)]

sorted li    [(7, 10), (11, 13), (11, 15), (14, 20), 
              (23, 39), (45, 45)]
  (7,10)   [7, 8, 9]
  (11,13)   [11, 12]
  (11,15)   [11, 12, 13, 14]
  (14,20)   [14, 15, 16, 17, 18, 19]
  (23,39)   [23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
             35, 36, 37, 38]
  (45,45)   []
list(yi(li)) [(7, 20), (23, 39), (45, 45)]

sorted li    [(7, 10), (11, 6), (11, 13), (14, 20), 
              (23, 39), (45, 46)]
  (7,10)   [7, 8, 9]
  (11,6)   []
  (11,13)   [11, 12]
  (14,20)   [14, 15, 16, 17, 18, 19]
  (23,39)   [23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 
             35, 36, 37, 38]
  (45,46)   [45]
list(yi(li)) [(7, 20), (23, 39), (45, 46)]

sorted li    [(-1, -5), (7, 10), (11, 13), (14, 20), 
              (23, 39), (45, 45)]
  (-1,-5)   []
  (7,10)   [7, 8, 9]
  (11,13)   [11, 12]
  (14,20)   [14, 15, 16, 17, 18, 19]
  (23,39)   [23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
             35, 36, 37, 38]
  (45,45)   []
list(yi(li)) [(7, 20), (23, 39), (45, 45)]

sorted li    [(-9, -5), (7, 10), (11, 13), (14, 20), 
              (23, 39), (45, 45)]
  (-9,-5)   [-9, -8, -7, -6]
  (7,10)   [7, 8, 9]
  (11,13)   [11, 12]
  (14,20)   [14, 15, 16, 17, 18, 19]
  (23,39)   [23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
             35, 36, 37, 38]
  (45,45)   []
list(yi(li)) [(-9, -5), (7, 20), (23, 39), (45, 45)]

sorted li    [(-3, 10), (7, 10), (11, 13), (14, 20), 
              (23, 39), (45, 45)]
  (-3,10)   [-3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
  (7,10)   [7, 8, 9]
  (11,13)   [11, 12]
  (14,20)   [14, 15, 16, 17, 18, 19]
  (23,39)   [23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 
             35, 36, 37, 38]
  (45,45)   []
list(yi(li)) [(-3, 20), (23, 39), (45, 45)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-17T22:33:03.123

以下函数适用于给定的示例数据：

```
def range_overlap_adjust(list_ranges):
    overlap_corrected = []
    for start, stop in sorted(list_ranges):
        if overlap_corrected and start-1 <= overlap_corrected[-1][1] and stop >= overlap_corrected[-1][1]:
            overlap_corrected[-1] = min(overlap_corrected[-1][0], start), stop
        elif overlap_corrected and start <= overlap_corrected[-1][1] and stop <= overlap_corrected[-1][1]:
            break
        else:
            overlap_corrected.append((start, stop))
    return overlap_corrected 
```

### 用法

```
list_ranges = [(7, 10), (11, 13), (11, 15), (14, 20), (23, 39)]   
print(range_overlap_adjust(list_ranges))
# prints [(7, 20), (23, 39)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-18T22:51:41.900

这是一个使用`functools.reduce`（假设（x，10）和（11，y）重叠）的单​​线：

```
reduce(
    lambda acc, el: acc[:-1:] + [(min(*acc[-1], *el), max(*acc[-1], *el))]
        if acc[-1][1] >= el[0] - 1
        else acc + [el],
    ranges[1::],
    ranges[0:1]
) 
```

这从第一个范围开始，并用于`reduce`遍历其余范围。它将最后一个元素 ( `acc[-1]`) 与下一个范围 ( `el`) 进行比较。如果它们重叠，它将用两个范围的最小值和最大值替换最后一个元素 ( `acc[:-1:] + [min, max]`)。如果它们不重叠，它只是将这个新范围放在列表的末尾（`acc + [el]`）。

例子：

```
from functools import reduce

example_ranges = [(7, 10), (11, 13), (11, 15), (14, 20), (23, 39)]

def combine_overlaps(ranges):
    return reduce(
        lambda acc, el: acc[:-1:] + [(min(*acc[-1], *el), max(*acc[-1], *el))]
            if acc[-1][1] >= el[0] - 1
            else acc + [el],
        ranges[1::],
        ranges[0:1],
    )

print(combine_overlaps(example_ranges)) 
```

输出：

```
[(7, 20), (23, 39)] 
```

# excel - Excel 2010 VBA 用户编写函数修改输入参数

> ID：15273703
> 
> 赞同：0
> 
> 时间：2013-03-07T14:26:01.193
> 
> 标签：excel, vba

我有一个关于 Excel 2010 VBA 的问题。进行了大量搜索以寻找解决方案，但答案并没有解决我的问题。希望stackoverflow社区能够为我提供一些启示。

我有一个从工作表中的单元格调用的用户编写的函数。它使用两个参数调用——两个单元格在同一张表上。

该函数的目的是检查这两个参数并根据它们的值返回一个字符串作为函数的结果。

到目前为止，功能按预期工作。

但是，如果第一个参数的值有一定的值，我希望能够改变第二个参数的值。这就是我卡住的地方。我找不到任何方法来改变它的价值。

我尝试将参数设置为所需的值，但这会导致错误。我想我可能能够设置一个指向活动工作表的指针，因此可以设置单元格，但我不知道它的引用是什么（因为工作表上会有很多）。

老实说，我不确定我能做我需要的。任何关于前进道路的想法或意见将不胜感激。

带着敬意

格雷厄姆·琼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:43:11.320

由于用户定义的函数（UDF）无法更改工作簿/工作表等的状态。您可以使用工作表更改事件。

将此代码复制到您输入函数的工作表中

```
 Private Sub Worksheet_Change(ByVal Target As Range) 
Application.EnableEvents=False
     if Target.Address = "$A$1" and target.count = 1 Then ' change in first parameter - first parameter
       if Target.Value ="something" then    Range("B1").Value ="change"
         '$A$1 is the location of fist paramenter
         'range("b1") is second parameter on assumption
      end if
   Application.EnableEvents=True
    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:42:24.620

作为一般规则，您不希望 Excel 函数更改其输入。我以前做过，但它被认为是非常糟糕的做法。

更可接受的方法是**创建一个计算第二个参数的函数**- 这将需要 2 个输入：

1.  第一个参数
2.  第二个参数的默认值

然后你使用这个函数来计算你的工作表中的第二个参数（换句话说，而不是让包含你的第二个参数的单元格只是一个设定值，它现在是通过这个函数计算的）然后你的原始函数可以作为总是第二个参数总是期望值。

我希望这是有道理的 - 如果没有，请告诉我，我会提供一个例子。

# iphone - 在 iPhone 应用程序中使用 REST API 时的安全性

> ID：15273705
> 
> 赞同：5
> 
> 时间：2013-03-07T14:26:12.490
> 
> 标签：iphone, security, encryption

我知道这个问题以前曾以各种形式提出过。但是，我不是在寻找“使用 https”的答案。我已经在使用 HTTPS，而且我并不担心来回传输的有效负载的敏感性。

但是，我正在开发的 iPhone 应用程序正在与我构建的 REST API 通信（我可以控制应用程序和服务器 - 因此欢迎提出任何建议）。

我使用 OAuth2 协议进行身份验证，这意味着我的“API 密钥”是 Client ID 和 Client Secret 的组合，*只需*传输即可获取`access_token`. 之后，所有请求都使用 和包含请求主体的 HMAC 的标头发送到服务器`access_token`（使用客户端密钥作为密钥）。这种添加的唯一原因是有人无法使用 JUST 发出 API 请求`access_token`。

当我发布应用程序时，我正在与之交谈的 API 将被公开。所以我不一定担心其他人能够对其进行 API 调用。

我关心的是：

*   人们能够使用我的应用程序的客户端凭据进行 API 调用（这意味着我无法在服务器端检测到它不是来自我的应用程序）
*   人们能够滥用我的客户端 ID 允许他们拥有的额外范围，而传统 API 用户将不会拥有

我的猜测是这个问题并没有真正的解决方案（除了使用 UIWebView 和制作一个美化的 webapp），但我想我还是会在这里问。

如果应用程序需要使用客户端 ID/客户端密码，你们能想出一种方法来保护它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T17:18:09.720

我知道这不是您所希望的答案，但不幸的是，我认为您不能绝对有把握地完成您的目标。归根结底，你不能信任一个你无法控制的客户，一旦它离开你的手，你就无法控制它。

为了实现您的两个目标，您需要验证访问 API 的客户端是您编写的。这样做的方法是使用公钥/私钥对。您需要将私钥嵌入到客户端中，它可以用来签署某些内容。这样服务器就知道请求来自您的客户端，而不是其他人的。这也将允许您将某些呼叫限制为仅对您的客户。

但是，这并不是万无一失的，因为精明的用户可以逆向工程并从您的应用程序中提取私钥并使用它来欺骗源。虽然不是防弹的，但它是防弹的，因为这样做需要大量的工作并且技术含量很高，特别是如果您使用缓冲涂抹、大量红鲱鱼等反 RE 技术时。

如果我是你，我会问自己如果有人确实入侵了它会造成什么类型​​的损害。如果您是 Facebook，那将是灾难性的。如果您为内部组织服务，那可能根本不是什么大问题。如果你不能承受一次滥用，那么你需要重新考虑你的设计，因为这个是行不通的。您根本无法信任您无法控制的代码，并且一旦客户端在其他人的设备上，您就无法再控制它。

# xcode - 从 DataViewController 转到 UIPageViewController 的页面？

> ID：15273707
> 
> 赞同：0
> 
> 时间：2013-03-07T14:26:17.430
> 
> 标签：xcode

我正在使用来自 xcode 的基于页面的应用程序模板，该模板创建了 RootViewController、DataViewController 和 ModelController。

我已经设法让它从 RootViewController 转到我需要的任何页面，但我还需要 DataViewController 中的这个，在特定页面的事件上触发。这不太好。我应该如何更改代码以使其从 DataViewController 工作？

我的代码如下所示：-从根（工作）：

```
//get current index of current page
DataViewController *theCurrentViewController = [self.pageViewController.viewControllers objectAtIndex:0];
NSUInteger retreivedIndex = [self.modelController indexOfViewController:theCurrentViewController];

//get the page(s) to go to
DataViewController *targetPageViewController = [self.modelController viewControllerAtIndex:(pageToGoTo - 1) storyboard:self.storyboard];

//put it(or them if in landscape view) in an array
NSArray *theViewControllers = nil;
theViewControllers = [NSArray arrayWithObjects:targetPageViewController, nil];

//check which direction to animate page turn then turn page accordingly
if (retreivedIndex < (pageToGoTo - 1) && retreivedIndex != (pageToGoTo - 1)){
[self.pageViewController setViewControllers:theViewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL]; 
} 
if (retreivedIndex > (pageToGoTo - 1) && retreivedIndex != (pageToGoTo - 1)){
[self.pageViewController setViewControllers:theViewControllers direction:UIPageViewControllerNavigationDirectionReverse animated:YES completion:NULL];
} 
```

- 从页面，dataviewcontroller（不工作）：

```
DataViewController *targetPageViewController = [((UIPageViewController*)self.parentViewController) viewControllerAtIndex:(pageToGoTo - 1) storyboard:self.storyboard]; //The problem is here, but I do not know how to solve it.

//put it(or them if in landscape view) in an array
NSArray *theViewControllers = nil;
theViewControllers = [NSArray arrayWithObjects:targetPageViewController, nil];

[((UIPageViewController*)self.parentViewController) setViewControllers: theViewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T07:56:26.007

我在这里回答了这个问题 [https://stackoverflow.com/a/16435166/1463518](https://stackoverflow.com/a/16435166/1463518)

我这样做的方法是使用通知

我在 DataViewController 中的按钮单击上添加了一个通知

```
[[NSNotificationCenter defaultCenter]postNotificationName:@"H2RAutoPage" object:nil]; 
```

并在 RootViewController 中的 viewDidLoad

```
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(autoPage:) name:@"H2RAutoPage" object:nil]; 
```

我的 AutoPage 例程看起来像这样

```
- (void)autoPage: (NSNotification *)notification
{
//get current index of current page
  NSUInteger currentPage = [self.modelController indexOfViewController:[self.pageViewController.viewControllers objectAtIndex:0]];
// this is the next page nil mean we have reach the end
  H2RDataViewController *targetPageViewController = [self.modelController viewControllerAtIndex:(currentPage + 1) storyboard:self.storyboard];
  if (targetPageViewController) {
      //put it(or them if in landscape view) in an array
       NSArray *viewControllers = [NSArray arrayWithObjects:targetPageViewController, nil];
      //add page view
      [self.pageViewController setViewControllers:viewControllers  direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];
  }

} 
```

我也尝试过使用委托，但发现代码变得混乱，因为它不断失去委托，我发现 NSnotification 更干净。

# ios - 如何在 iOS 中获取海拔和磁场

> ID：15273708
> 
> 赞同：1
> 
> 时间：2013-03-07T14:26:20.837
> 
> 标签：ios, cmmotionmanager

我试图在 iOS 中获取海拔值和磁场值。我一直在谷歌上搜索这些主题很长时间，但我找不到任何可以正常工作的东西。

a）当我谈论仰角值时，我想在我向上移动我的手机顶部时获得以度为单位的角度。我附上了一张图片，以使其更容易。我一直在尝试这样，但它不起作用：

。H

```
#import <CoreMotion/CoreMotion.h>

@property (nonatomic, retain) CMMotionManager *motionManager; 
```

.m

```
self.motionManager = [[CMMotionManager alloc] init];
[self.motionManager startMagnetometerUpdates];
NSOperationQueue *myQueue = [[NSOperationQueue alloc] init];
[self.motionManager startDeviceMotionUpdatesToQueue:myQueue withHandler:^(CMDeviceMotion *motion, NSError *error){
    float degrees = (motion.attitude.roll*180) / M_PI;
    NSLog(@"Value of elevation is: %f", degrees);
}]; 
```

b）关于磁场，我想了解影响我手机精度的设备、磁铁、铁等的影响。* 我得到的所有值都不正确（在一种 NSTimer 中）：

```
NSLog(@"magnetometer data -> x: %f", self.motionManager.magnetometerData.magneticField.x);
NSLog(@"magnetometer data -> y: %f", self.motionManager.magnetometerData.magneticField.y);
NSLog(@"magnetometer data -> z: %f", self.motionManager.magnetometerData.magneticField.z);

float magneticField = sqrtf( powf(self.motionManager.magnetometerData.magneticField.x, 2) 
+ powf(self.motionManager.magnetometerData.magneticField.y, 2) + 
powf(self.motionManager.magnetometerData.magneticField.z, 2) );

NSLog(@"magneticField value: %@", magneticField.text); 
```

任何想法如何弄清楚....谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:05:40.823

最后，我得到了这两个问题的答案。这是我正在使用的代码。希望它可以帮助某人。

磁场：.h

```
@property (nonatomic, retain) CLLocationManager *locationManager; 
```

.m

```
@synthesize locationManager;

- (void)viewDidLoad
{
[super viewDidLoad];

// Starting compass setup
if(locationManager == nil)
    locationManager = [[CLLocationManager alloc] init];
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
locationManager.delegate = self;

//Start the compass updates.
if (CLLocationManager.headingAvailable) {
    [locationManager startUpdatingHeading];
    [locationManager startUpdatingLocation];
}
else {
    NSLog(@"No Heading Available: ");
    UIAlertView *noCompassAlert = [[UIAlertView alloc] initWithTitle:@"No Compass!" message:@"This device does not have the ability to measure magnetic fields." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [noCompassAlert show];
}
}

-(void)locationManager:(CLLocationManager *) manager didUpdateHeading:(CLHeading *)newHeading
{
NSLog(@"Magnetic value: %@", [[NSString stringWithFormat:@"%.1f", sqrt(newHeading.x*newHeading.x + newHeading.y*newHeading.y + newHeading.z*newHeading.z)] stringByAppendingFormat:@" µT"]);
} 
```

海拔：.h

```
@property (nonatomic, retain) CMMotionManager *motionManager; 
```

.m

```
@synthesize motionManager;

- (void)viewDidLoad
{
[super viewDidLoad];
// Initializating MotionManager Object    
motionManager = [[CMMotionManager alloc] init];
motionManager.showsDeviceMovementDisplay = YES;
motionManager.deviceMotionUpdateInterval = 20.0/60.0;

// Getting Elevation Value
CMDeviceMotionHandler  motionHandler = ^ (CMDeviceMotion *motion, NSError *error) {
    CMAttitude *a = motionManager.deviceMotion.attitude;
    NSLog(@"Elevation value, %@:", [[NSString stringWithFormat:@"%.0f", a.pitch*180/M_PI] stringByAppendingFormat:@"˚"]);
};
[motionManager startDeviceMotionUpdatesUsingReferenceFrame:CMAttitudeReferenceFrameXTrueNorthZVertical toQueue:[NSOperationQueue currentQueue] withHandler:motionHandler];
} 
```

干杯。

# c++ - 我们如何将 SECURITY_ATTRIBUTES 与 SHCreateDirectoryEx() 一起使用？

> ID：15273711
> 
> 赞同：2
> 
> 时间：2013-03-07T14:26:24.137
> 
> 标签：c++, c, file, directory, directory-structure

我的要求如下：

1.  在指定位置创建目录。
2.  设置其属性，使文件夹为“只读”。换句话说，用户帐户不应该能够在此文件夹中创建文件夹/文件。

现在，我可以按如下方式创建目录：

```
SHCreateDirectoryEx( NULL, <path>.c_str(), NULL ); 
```

我现在想设置适当的安全属性。任何帮助/代码示例将不胜感激。

平台：Win7（语言：C++/C）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:45:01.587

您要做的第一件事是创建一个`SECURITY_ATTRIBUTES`结构，并设置它的成员。

```
SECURITY_ATTRIBUTES SecAttr;

SecAttr.size = sizeof(SECURITY_ATTRIBUTES); //Set size of structure 
```

下一个成员是一种类型，`SECURITY_DESCRIPTOR`它实际上包含管理对该对象的安全访问所需的所有数据。

[根据MSDN 文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa379561%28v=vs.85%29.aspx)，您不能直接创建此结构，但您可以使用文档中提供的函数来创建这样的结构，根据需要设置所有必要的标志，然后获取指向它的指针以传递给`SecAttr`.

`SECURITY_DESCRIPTOR`可以在[此处](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa446595%28v=vs.85%29.aspx)找到有关如何创建此类结构的示例。在此示例中，它是针对注册表项完成的，但原理是相同的。

本质上，您正在填写 DACL（[自主安全访问控制列表](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms721573%28v=vs.85%29.aspx#_security_discretionary_access_control_list_gly)）或 SACL（[系统访问控制列表](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms721625%28v=vs.85%29.aspx#_security_system_access_control_list_gly)，其中包含您希望对象拥有的访问权限（读/写/只读）等的正确属性。

填写完整个`SECURITY_ATTRIBUTES`结构后，您可以将其传递给您的`SHCreateDirectoryEx`函数。

# java - com.mysql.jdbc.driver 类未找到异常

> ID：15273713
> 
> 赞同：1
> 
> 时间：2013-03-07T14:26:27.070
> 
> 标签：java, android, sql, sql-server, database

我从[这篇](http://capdroid.wordpress.com/2012/07/10/configuring-and-accessing-mysql-jdbc-driver-on-android-application/)博文中得到了帮助：

但是我得到 com.mysql.jdbc.driver class not found 异常。那篇博客文章的不同之处在于，在我的例子中，他们尝试连接到 mysql 而不是 MS SQL。到目前为止，这是我的代码： package com.example.dbtry;

```
public class MainActivity extends Activity {
protected TextView tv;

private static final String url = "jdbc:jtds:sqlserver://Server.com:1433/DB_name";
private static final String user = "username";
private static final String pass = "password";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    testDB();
}

public void testDB() {
    tv = (TextView)findViewById(R.id.textView1);
     try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection(url, user, pass);
            /* System.out.println("Database connection success"); */

            String result = "Database connection success\n";
          tv.setText(result);
            Statement st = con.createStatement();
            ResultSet rs = st.executeQuery("select * from this_table");
            ResultSetMetaData rsmd = rs.getMetaData();

            while(rs.next()) {
                result += rsmd.getColumnName(1) + ": " + rs.getInt(1) + "\n";
                result += rsmd.getColumnName(2) + ": " + rs.getString(2) + "\n";
                result += rsmd.getColumnName(3) + ": " + rs.getString(3) + "\n";
            }
            tv.setText(result);
        }
        catch(Exception e) {
            e.printStackTrace();
            tv.setText(e.toString());
        }   

    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

请告诉我我做错了什么。我还在清单中添加了对 Internet 的权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:29:36.103

从此处下载[`JTDS`](http://jtds.sourceforge.net/)驱动程序并将其包含在您的`classpath`. 构建并运行您的代码。它会工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:29:38.053

您的类路径中缺少 Mysql Connection JAR。

此 jar 包含驱动程序：`com.mysql.jdbc.Driver`

但是，由于您使用的是 MSSQL 而不是 MySQL，我建议您为 MSSQL 找到合适的驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:36:37.857

我想有一个问题的网址所述。

尝试先在本地主机上运行，​​然后提供您拥有的正确 url。“jdbc:mysql://localhost:3306/databaseName”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:45:28.677

您正在为 MYSQL DB 连接加载类，您应该为 MS SQL 加载类，并且应该在构建路径中包含所需的 jar 文件。编辑 Class.forName 行，如下所示：

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver").newInstance(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T14:50:49.417

从以下位置下载 jar：[http](http://www.java2s.com/Code/Jar/s/Downloadsqljdbc430jar.htm) ://www.java2s.com/Code/Jar/s/Downloadsqljdbc430jar.htm 然后将这些行更改如下：

```
private static final String url = "jdbc:sqlserver://Server.com:1433/DB_name";
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver"); 
```

# c - NULL 宏和 nul

> ID：15273714
> 
> 赞同：-2
> 
> 时间：2013-03-07T14:26:29.803
> 
> 标签：c

如果代码中主要使用常量，我们将使用宏来定义常量。为什么将 "NULL" 定义为宏，为什么 nul("\0") 未定义为宏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:43:34.620

可能有一些微妙的原因可以用来证明差异的合理性，但我希望零字符（以`NUL`ASCII 命名）不需要宏。

`NULL`可以是实现选择的任何空指针常量，它可以是整数或指针。所以当你需要一个空指针常量时使用它，但你不想给读者留下这样的印象，即使用*哪个*空指针常量很重要。基本上，当您希望它为空指针时，您可以使用它来初始化/分配指针。您也可以在测试指针是否为空时使用它。

不是每个人都愿意使用`NULL`. `0`是 的允许值`NULL`，因此您可以在任何可以*便携*使用的地方`NULL`使用`0`。就我个人而言，我认为 C 语言如果没有`NULL`. 特别是，传入`NULL`可变参数函数可能会遇到麻烦，因为人们通常认为它是一个指针，如果需要它会转换为指针，但可变参数函数不会转换它。因此，如果它不是需要指针的指针，那么您将获得 UB。这同样适用于范围内没有原型的函数。

您提出的宏总是会扩展为`int`值为 0 的。“我们需要更多的写零的方法”在我看来并不是那种会激发 C 标准委员会采取行动的事情，即使它是被提出的。如果有一组宏命名基本执行集中的字符，那么`NUL`在该集中有一个 for 是有意义的。但是人们似乎很乐意写`'a'`而不是`LATIN_LOWERCASE_A`，`'\n'`而不是`LINEFEED`，和`0`或`'\0'`而不是`NUL`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:32:38.133

宏必须扩展为不是宏的东西。[一路下来](http://en.wikipedia.org/wiki/Turtles_all_the_way_down)都不是乌龟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:38:12.500

`\0`是一个八进制字符常量（表示二进制 0），因此可以放在`char`. NULL 不是。

`NULL`表示无法访问的地址，其内部值取决于实现。但是，当在代码中用作指针时，它始终表示 0，因此类似的测试`if (p == NULL)`与`if (!p)`.

# python - 如何在 Windows 上增加 python 堆大小

> ID：15273725
> 
> 赞同：4
> 
> 时间：2013-03-07T14:27:05.890
> 
> 标签：python, memory-management, heap-memory

我正在使用[ocropus](https://github.com/tmbdev/ocropy)库来处理大图像。

当我尝试处理 5000x4000pix 图像时，会引发 MemoryError。

我查找了一个答案，但[以下答案](https://stackoverflow.com/questions/2308091/how-to-limit-python-heap-size)是我找到的全部。

但是，我在 windows 上工作，我的服务器在 windows 上工作；因此该解决方案对我不起作用。

Python 是否有任何参数，例如 Java 中的 -Xmx？

谢谢您的回答。

# php - 如何进行递归？

> ID：15273733
> 
> 赞同：0
> 
> 时间：2013-03-07T14:27:17.583
> 
> 标签：php, arrays, recursion, multidimensional-array

如何通过递归将一个数组转换为另一个数组？此示例仅适用于第二级。

```
$array2 = array();
foreach ($array as $levelKey => $level) {
  foreach ($level as $itemKey => $item) {
    if (isset($array[$levelKey + 1])) {
      $array2[$item['data']['id']] = $item;
      $children = $this->searchChildren($item['data']['id'], $array[$levelKey + 1]);
      $array += $children;
    }               
  }
}

function searchChildren($parent_id, $level)
{
  $_children = array();
  foreach ($level as $key => $item) {
    if ($item['data']['parent_id'] === $parent_id) {
      $_children[$key] = $item;
    }
  }
  return $_children;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:32:14.200

要递归地遍历多维数组，请使用**array_walk_recursive**函数。

文档可以在这里找到：[http ://www.php.net/manual/en/function.array-walk-recursive.php](http://www.php.net/manual/en/function.array-walk-recursive.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:33:54.163

这是一个使用递归的简单示例。此函数*递归*打印数组中所有项目的连接键和值

```
function printArrayWithKeys(array $input, $prefix = null) {
    foreach ($input as $key=>$value) {
        $concatenatedKey = $prefix . '.' . $key;
        if (is_array($value)) {
            printArrayWithKeys($value, $concatenatedKey);
        } else {
            print $concatenatedKey . ': ' . $value . "\n";
        }
    }
} 
```

这个函数的关键在于它遇到另一个数组时*会调用自己*（从而继续遍历数组的所有层级）

您可以使用以下输入调用它：

```
array(
    array(
        array( 'Hello', 'Goodbye' ),
        array( 'Again' )
    ),
    'And Again'
) 
```

它会在哪里打印：

```
0.0.0: Hello
0.0.1: Goodbye
0.1.0: Again
1: And Again 
```

# c# - 如何使用动态生成的按钮通过动态生成的 FileUpload 控件上传文件？

> ID：15273737
> 
> 赞同：1
> 
> 时间：2013-03-07T14:27:42.863
> 
> 标签：c#, asp.net, dynamic, findcontrol, dynamic-controls

如何通过动态生成的文件上传控件和单击动态生成的按钮事件来上传文件？

以下是我尝试过的代码，但它不起作用：

```
void UpLdButton_Click(object sender, EventArgs e)
{
    Button btnUpLD = sender as Button;
    btnUpLD = (Button)this.FindControl(Form.ID).FindControl(table.ID).FindControl(row.ID).FindControl(cell.ID).FindControl(UpLdButton.ID);

    fileUp = (FileUpload)this.FindControl(Form.ID).FindControl(table.ID).FindControl(row.ID).FindControl(cell.ID).FindControl(fileUp.ID);
    string args = ((Button)sender).CommandArgument;
    //lblTest.Text = args;        
    //UploadFile(fileUp);

    if (fileUp.HasFile)
    {
        fileUp.PostedFile.SaveAs(Server.MapPath("~\\") + fileUp.FileName);            
        Label1.Text = "The" + fileUp.FileName + " Has been uploaded";
    }
    else
    {
        Label1.Text = "FILE not selected";
    }
} 
```

提前致谢！！！

# .net - 从项目 .NET 中删除 TeamFoundationServer DLLS

> ID：15273746
> 
> 赞同：0
> 
> 时间：2013-03-07T14:28:19.010
> 
> 标签：.net, tfs, tfsbuild

我有一个项目曾经在 TFS 中，但现在已迁移到 mercurial。

这样做之后，我们注意到在 Build 上的解决方案中添加了三个 DLL。

除了编写脚本在构建结束时删除文件之外，还有没有办法从解决方案中完全删除 TFS？

谢谢，

麦克风

# objective-c - expr (void)NSLog(@"someString is %@", someString)

> ID：15273747
> 
> 赞同：0
> 
> 时间：2013-03-07T14:28:21.927
> 
> 标签：objective-c, xcode4, lldb

我在断点中将其作为调试器操作：

```
expr (void)NSLog(@"someString is %@", someString) 
```

但它与：

```
error: warning: expression result unused
error: cannot find interface declaration for '$__lldb_objc_class'
error: cannot find interface declaration for '$__lldb_objc_class'
error: 2 errors parsing expression 
```

为什么它不起作用？

====
更新

我在一个全新的 Xcode 项目中尝试了这个。它工作正常。因此，需要明确的是，这一行在 Xcode 4.6 中没有语法问题：

```
expr (void)NSLog(@"someString is %@", someString) 
```

但是，从断点复制完全相同的行到我以前的 Xcode 项目会导致同样的问题。

可能是我在此特定项目的构建设置中更改的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T22:49:55.780

确保您没有从块内访问此代码。这可以解释为什么相同的断点在新项目中有效，而在另一个项目中无效。这就是在块内的断点处尝试打印对象的值时发生的情况。解决方案是在块中使用 NSLog 来执行打印输出，而不是使用断点。这很烦人，我知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:35:37.057

除非您复制不正确，否则我会说双引号字符无效。怎么样：

```
expr (void)NSLog(@"someString is %@", someString) 
```

如果您确实正确复制了它，那么这是一个[已知的错误](https://devforums.apple.com/message/758329#758329)。

# c# - 如何在不关闭流的情况下取消 NetworkStream.ReadAsync

> ID：15273752
> 
> 赞同：14
> 
> 时间：2013-03-07T14:28:34.823
> 
> 标签：c#, .net, asynchronous, async-await, networkstream

我正在尝试使用 NetworkStream.ReadAsync() 来读取数据，但我找不到如何在调用后取消 ReadAsync()。作为背景，NetworkStream 由连接的 BluetoothClient 对象（来自 32Feet.NET 蓝牙库）提供给我。

我正在尝试的当前 get-it-working 代码如下。

```
int bytesRead;

while (this.continueReading)
{
    bytesRead = await this.stream.ReadAsync(this.buffer, 0, (int)this.buffer.Length);

    Console.WriteLine("Received {0} bytes", bytesRead);
}

Console.WriteLine("Receive loop has ended"); 
```

代码在接收数据时工作正常，如果 continueReading 标志设置为 false 并且接收到数据，则将停止循环，但在接收到数据之前，它不会继续通过 ReadAsync() 行。我看不到如何在不接收数据的情况下中止呼叫。

我知道存在提供 CancellationToken 的 ReadAsync 过载，但似乎由于 NetworkStream 没有覆盖默认的 ReadAsync 行为，因此忽略了令牌（请参阅[NetworkStream.ReadAsync with a](https://stackoverflow.com/questions/12421989/networkstream-readasync-with-a-cancellation-token-never-cancels) cancelation token never cancels ）。

我已经尝试关闭底层流，这会导致等待 ReadAsync 调用抛出 ObjectDisposedException，并且底层蓝牙连接也被关闭。理想情况下，我不想仅仅为了停止阅读而完全切断与设备的连接。这似乎不是一种干净的方式，并且感觉没有必要仅仅为了中断 va ReadAsync() 调用而拆除整个流。

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T21:34:18.383

您无法取消 ReadAsync，因为内部调用是非托管的并且使用 IOCompletion 端口。您的选项如下。

1.  使用 Socket.Shutdown()。这将返回带有 OperationAborted 套接字错误的 ReadAsync。
2.  等待读取超时。
3.  在从套接字读取之前检查数据是否可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T16:35:55.933

您可以围绕 NetworkStream.Read（或 ReadAsync）实现异步包装器，该包装器还接收您可以监控和尊重自己的取消令牌。像这样的东西：

```
Task MyCancelableNetworkStreamReadAsync(NetworkStream stream, CancellationToken ct)
{
...
if(this.stream.CanRead)
{
  do 
  {
    //check ct.IsCancellationRequested and act as needed
    bytesRead = await this.stream.ReadAsync(this.buffer, 0, (int)this.buffer.Length);
  }
  while(myNetworkStream.DataAvailable);
} 
```

请注意，我只是想说明这个想法，您可能不想考虑返回`Task<TResult>`，以及是否有 do{}while 循环、任何额外的处理或清理等 - 一切都根据您的需要。

我还希望您注意 Stephen Toub 的文章[如何取消不可取消的异步操作？](http://blogs.msdn.com/b/pfxteam/archive/2012/10/05/how-do-i-cancel-non-cancelable-async-operations.aspx)以及他在那里创建的 WithCancellation 扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-11T10:30:40.720

我通过让任务等待异步调用和等待语句之间的取消令牌调用来管理取消，如下所示：

```
try {

 ....

 Task<int> readTask = input.ReadAsync(buffer, 0, buffer.Length);
 readTask.Wait(myCancellationToken);
 int readBytes= await readTask;

....

}
catch ( OperationCanceledException e )
{
   // handle cancellation
} 
```

# jquery - jquery height animate() 不起作用

> ID：15273753
> 
> 赞同：4
> 
> 时间：2013-03-07T14:28:36.667
> 
> 标签：jquery, html, css, jquery-animate

我刚刚创建了这个：[jsfiddle.net/MWzDe/](http://jsfiddle.net/MWzDe)，

JS：

```
$('button').click(function () {
  if ($('ul').height = 0) {
    $('ul').animate({'height':'100%'},'slow');
  } else {
    $('ul').animate({'height': 0},'slow');
  }}); 
```

我需要向上/向下滑动“ul”标签，而不会“真正”消失。代码有什么问题？还没成功。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T14:31:40.643

`.height`是一个函数：`$('ul').height()`用来得到这样的高度

```
if ($('ul').height() == 0) {
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T14:36:06.967

尝试：

```
$('button').click(function () {

    $('ul').animate({
        'height':'toggle'
    }, 'slow');

}); 
```

[在这里](http://jsfiddle.net/MWzDe/9/)提琴

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T14:31:29.363

您可以使用`slideToggle`.

尝试这个：

```
$('button').click(function () {
    $("ul").slideToggle("slow");
}); 
```

小提琴：http: [//jsfiddle.net/MWzDe/3/](http://jsfiddle.net/MWzDe/3/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T14:30:55.943

当您使用 jquery 时，为什么不使用`.slideToggle()`？

```
$('button').click(function() {
    $('ul').slideToggle('slow');
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-07T14:31:19.580

使用 slideToggle()

[演示视图](http://jsfiddle.net/MWzDe/2/)

```
$('button').click(function () {
    $('ul').slideToggle('slow');
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-07T14:32:51.310

只需使用**.slideToggle**功能。 [在这里演示](http://jsfiddle.net/letiagoalves/S3DQt/)

```
$('button').click(function () {
    $('ul').slideToggle();
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T14:52:45.607

以下代码使用动画

```
$('button').on(click, function() {
    $('ul').animate({height: 'toggle'},'slow');
}) 
```

# javascript - JavaScript 中的两位正则表达式模式匹配

> ID：15273754
> 
> 赞同：0
> 
> 时间：2013-03-07T14:28:37.230
> 
> 标签：javascript, regex, replace, special-characters

以下表达式：

```
targetString = targetString.replace(parenthesizedRegEx, "$3$1$11"); 
```

其中 parenthesizedRegEx 是一个有效的带括号的正则表达式，用一个字符串替换匹配的文本，该字符串是第三项、第一项、第一项和文字“1”的串联。就好像它忽略了“两位数”括号项索引“$11”并将其视为“$1”和文字“1”。

是否应该使用一些转义或其他分隔？

此结果出现在 FF 和 IE9 中。

谢谢你的帮助。我希望答案是令人尴尬的简单！

**编辑更新：**

我做了一个 jfiddle 来全面展示这个问题。我使用的正则表达式包括一个否定的前瞻断言。似乎当我包含断言的所有开放括号时，它失败了。如果我不包含任何插入的开放括号，它也会失败。但是，如果我包括除了断言的初始开头括号之外的所有内容，它就可以工作。我知道用 (?:...) 组成的组没有编号。但似乎必须在断言中包含所有其他开放括号才能正确计数。所以你会在 jfiddle 中看到 $11 不起作用，但 $10 起作用。

[http://jsfiddle.net/pxMFx/1/](http://jsfiddle.net/pxMFx/1/)

谢谢你看这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:34:12.917

这对我来说很好：

```
var regex = /^(\w)(\w)(\w)(\w)(\w)(\w)(\w)(\w)(\w)(\w)(\w).*$/i;

alert("abcdefghijklmno".replace(regex,"$3$1$11")); 
```

[http://jsfiddle.net/J3RAa/](http://jsfiddle.net/J3RAa/)

关键是，如果您要针对其中的特定位置，您需要将整个字符串与您的正则表达式进行匹配。尝试去掉`.*`上面的正则表达式，你会发现它破坏了替换。

# css - 高 dpi 媒体查询不重写原始 css

> ID：15273756
> 
> 赞同：0
> 
> 时间：2013-03-07T14:28:40.947
> 
> 标签：css, media-queries, retina-display

我正在为我的网站设计样式，我希望它对视网膜显示友好，为此我计划将媒体查询用于高 dpi 显示，但是我认为媒体查询不起作用，因为当我查看浏览器生成代码时我的视网膜 macbook，我可以看到身体仍然有默认的 css，而不是媒体查询中的一个。这是为什么？还有什么我需要添加的吗？请注意，默认 css 和媒体查询都在同一个 css 文件中，但是我认为这不是问题。

```
 /* ==========================================================================
   Theme Style
   ========================================================================== */

body {
    background-color: #ebebeb;
    /* background-image: url("../images/bg.png"); */
    background-image: url("http://bit.ly/Z1zQeb");
}

/* ==========================================================================
   Media Queries
   ========================================================================== */

@media 
(-webkit-min-device-pixel-ratio: 2), 
(min-resolution: 192dpi) { 

    /* background-image: url("../images/bg_@2X.png"); */
    background-image: url("http://bit.ly/ZgBQ4c");
    background-size: 147px 147px;

} 
```

* * *

**编辑：**我也在控制台中收到此错误：`INDEX_SIZE_ERR: DOM Exception 1: Index or size was negative, or greater than the allowed value.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:38:23.533

您尚未指定要应用样式的标签。试试这个。

```
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    body {
        /* background-image: url("../images/bg_@2X.png"); */
        background-image: url("http://bit.ly/ZgBQ4c");
        background-size: 147px 147px;
    }
} 
```

# java - 试图让一个框架从动作监听器中消失

> ID：15273762
> 
> 赞同：2
> 
> 时间：2013-03-07T14:29:05.703
> 
> 标签：java, swing

我在使用它的同一类中有一个**私有动作侦听**器类，我试图使当前类消失并在`JLabel`单击时使一个新类可见。`JLabel`是在运行时动态添加的。我不知道如何在不使用`this.setVisible()`. `"cannot find symbol"`使用 netbeans IDE 时出现错误。这是我的代码：

```
public class displayImage extends javax.swing.JFrame {
    private static class tagListener extends MouseAdapter {
        public tagListener() {
        }

        public void mouseClicked(MouseEvent e) {
            JLabel text = (JLabel) e.getSource();
            displayImage display = new displayImage(text.getText());
            this.setVisible(false);
            display.setVisible(true);
        }
    }

    //Creates new form displayImage
    public static String tagWord;

    public displayImage(String tag) {
        initComponents();
        tagWord = tag;
        JLabel labelTag = new JLabel();
        labelTag.setText(tagWord);
        labelTag.addMouseListener(new tagListener());
    }

    //...other methods
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:33:09.730

您已将 tagListener 作为内部*静态*类。因此它就像另一个类，它不共享`this`displayImage 类的引用。

将内部类定义更改为

```
private class tagListener extends MouseAdapter 
```

并修改您对 setVisible 的调用以使用，以指定您要引用的内容：~~`tagListener.this`~~ `displayImage.this``this`

```
displayImage.this.setVisible(false); 
```

一些注意事项：您应该真正使用 Java 类名约定：tagListener 和 displayImage 应该是 TagListener 和 DisplayImage。此外，扩展 JFrame 也是一种不好的风格。支持组合而不是继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:36:46.123

有两种方法可以做到这一点。第一个已经由上面的[Cyrille Karmann](https://stackoverflow.com/a/15273856/758280)陈述过。第二个是将您的引用传递`JFrame`给您的`MouseAdapter`：

```
 private static class tagListener extends MouseAdapter
 {
  private final JFrame frame;

  public tagListener(JFrame frame) 
  { this.frame = frame; }

  public void mouseClicked(MouseEvent e)
  {
   JLabel text =(JLabel)e.getSource();
   displayImage display = new displayImage(text.getText());
   frame.setVisible(false);
   display.setVisible(true);
  }
 }

 public displayImage(String tag) 
 {
  /* snip */
  labelTag.addMouseListener(new tagListener(this));
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T17:04:29.050

```
public void mouseClicked(MouseEvent e) 
{
    JLabel text = (JLabel) e.getSource();
    Window window = SwingUtilities.windowForComponent(text);
    window.setVisible( false );
    ...
} 
```

# c# - 在 C# winforms 中使用 Web 服务填充 Gridview

> ID：15273766
> 
> 赞同：4
> 
> 时间：2013-03-07T14:29:15.030
> 
> 标签：c#, winforms, web-services, datagridview

我已经制作了一个具有此代码的网络服务

```
static SqlConnection conn = new SqlConnection(ConfigurationSettings.AppSettings["Connection"].ToString());

[WebMethod]
public DataSet SQLBranchMaster() {

    String Load = "SELECT * FROM BranchMaster";
    conn.Open();
    SqlDataAdapter adapt = new SqlDataAdapter(Load,conn);
    DataSet ds = new DataSet();
    adapt.Fill(ds);
    conn.Close();
    return ds;

} 
```

现在在 Windows 窗体上我的代码是

```
 dataGridView1 = new DataGridView();

// Service is my Webserive class name
// myservice is my reference added in the Winforms

myservice.Service test = new myservice.Service();
dataGridView1.DataSource = test.SQLBranchMaster(); 
```

现在怎么办？当我运行表单时没有显示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:42:49.760

您正在从服务方法返回数据集，因此将表绑定到 DataGridview 因此，请确保将 DataGridview 正确添加到表单控件集合中（最好在表单 UI 中手动拖放控件），然后使用以下方式绑定它。

```
myservice.Service test = new myservice.Service();
DataSet ds= test.SQLBranchMaster();

if (ds.Tables.count > 0)
{
dataGridView1.DataSource = ds.Tables[0];
} 
```

# json - CF9 和 Solr：CFSEARCH 与 CFHTTP

> ID：15273768
> 
> 赞同：3
> 
> 时间：2013-03-07T14:29:24.967
> 
> 标签：json, coldfusion, solr, cfml, cfsearch

我正在使用 Solr 集合在 CF 9 环境中工作。我正在使用其中的 7 个，它们都是严格的 PDF。使用`CFSEARCH`，我没有得到所有应该出现在结果中的文档。

举一个具体的例子，客户端有十个 PDF，其中包含`1386`文档正文中某处的字符串。但是当使用搜索表单并输入`1386`时，只出现了其中的 4 个。客户担心并非所有 PDF`1386`都显示在搜索结果中。

我一直在关注（非常感兴趣）David Faber 的帖子支持`CFHTTP`查询 Solr 集合的方法，但我在尝试实现它时遇到了障碍。

其中一个问题是，在使用 时`CFSEARCH`，我使用了所有四个`CUSTOM`字段，而且我还得到`CONTEXT`了将突出显示关键字的字段。在该`CFHTTP`方法中，我没有`CONTEXT`使用突出显示的关键字。

此外，我正在尝试反序列化 JSON 并将其转换为查询对象。但我不断收到关于

> 试图将标量变量数组引用为具有成员的结构

建议/建议非常感谢。

# android - Android、SpannableString、ArrayAdapter 和 Listview

> ID：15273771
> 
> 赞同：0
> 
> 时间：2013-03-07T14:29:32.997
> 
> 标签：android, listview, spannablestring

我是android的新手，我有一个问题要问你。我想将图标添加到列表视图中的文本。我正在使用以下代码将行（文本视图）动态添加到列表视图。但文本不包含图标。

```
.
.
.
btnicon = (Button)findViewById(R.id.button1);
txt = (TextView)findViewById(R.id.textView1);
txt.setText("   denemedene",BufferType.SPANNABLE);
list = (ListView)findViewById(R.id.listview);
dizi = new ArrayAdapter<String>(this, R.layout.text);
list.setAdapter(dizi);
btnicon.setOnClickListener(click);
.
.
.
private OnClickListener click = new OnClickListener() {

    @Override
    public void onClick(View v) {
        if (v == btnicon){
            SpannableString spans = new SpannableString(txt.getText());
            Drawable dra = getResources().getDrawable(R.drawable.p1);
            dra.setBounds(0, 0, dra.getIntrinsicWidth() , dra.getIntrinsicHeight());
            ImageSpan span = new ImageSpan(dra,ImageSpan.ALIGN_BASELINE);
            spans.setSpan(span, 0, 1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            dizi.add(spans.toString());
        }
    }
}; 
```

它与 toString 方法有关。因为当我改变

```
dizi.add(spans.toString()); 
```

符合

```
txt.setText(spans,BufferType.SPANNABLE); 
```

它有效，我可以看到文本上的图标。我不知道为什么它不能与 toString() 方法一起使用。

有任何想法吗？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:53:03.343

这篇文章中有一个自定义列表适配器的示例： [https ://stackoverflow.com/a/15272092/1752867](https://stackoverflow.com/a/15272092/1752867)

您可以像这样创建自定义适配器，并在布局中使用 imageView 或 ProgressBar 更改复选框组件

# asp.net - 使用 TRIGGER 在 DELETE 之前将已删除的记录插入历史表

> ID：15273781
> 
> 赞同：1
> 
> 时间：2013-03-07T14:29:41.393
> 
> 标签：asp.net

我有一个显示表中的记录集的gridview - Master2。我想使用 gridview 从这个表中删除记录。在删除发生之前，我想将记录插入到历史记录表中，其中包含执行删除操作的人的日期时间戳和用户 ID。这是可能的还是我应该简单地用一系列下拉框和一个按钮来构建字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:18:35.050

> 使用`FOR DELETE`触发器：

```
CREATE TRIGGER TriggerName    
ON TableName  
FOR DELETE    
AS     
BEGIN    
    INSERT INTO HistoryTable(Col1, Col2, Col3)  
    SELECT Col1, GETDATE(), Col3  
    FROM TableName  
    WHERE DeletedRecordID IN (SELECT DeletedRecordID FROM TableName)     
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:34:36.047

使用触发器。

它*更安全*，这意味着每次您从该历史表中删除一条记录（无论机制如何）时，它仍然会触发。

它也更容易编码，因为您不必在 .net 代码中放入任何内容来处理它。

最后，由于涉及零网络流量，因此速度更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:38:13.740

I recomend using a flag for deletion, and not actually delete the record... to the gridview, you add an extra checkpoint that when selected it will tr​​igger...like this

```
<asp:TemplateField HeaderText="Delete" SortExpression="ToBeDeleted">
                            <EditItemTemplate>
                                <asp:TextBox ID="txtToBeDeleted" runat="server" Text='<%# Bind("ToBeDeleted") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <%--<asp:Label ID="lblToBeDeleted" Width="20px" runat="server" Text='<%# Bind("ToBeDeleted") %>'></asp:Label>--%>
                                <asp:CheckBox ID="chkToBeDeleted" Width="20px" runat="server" Checked='<%# Bind("ToBeDeleted") %>' OnCheckedChanged="chkToBeDeleted_CheckedChanged" AutoPostBack="true"/>
                            </ItemTemplate>
                            <ItemStyle CssClass="overflowClass" HorizontalAlign="Center" Wrap="false" />
                        </asp:TemplateField> 
```

然后在你处理触发器的代码中：

```
protected void chkToBeDeleted_CheckedChanged(object sender, EventArgs e)
        {
            CheckBox cb = (CheckBox)sender;
            GridViewRow gvr = (GridViewRow)cb.NamingContainer;
            int id = (int)gvWines.DataKeys[gvr.RowIndex].Value;

            ListOfWine record = (from l in db.ListOfWines
                         where l.Id == id
                         select l).FirstOrDefault();

            //here you add the record to another table and then continue flagging the record for deletion

         record.ToBeDeleted = cb.Checked;
db.SaveChanges();
            gvWines.DataBind();
        } 
```

# php - 如何从网页创建 XML

> ID：15273782
> 
> 赞同：0
> 
> 时间：2013-03-07T14:29:41.813
> 
> 标签：php, dom, symfony

我想从网页创建一个 XML 文件。我有一个站点，例如这个表

```
<table class="table table-striped table-bordered table-condensed">
    <thead>
        <tr>
            <th>Id</th>
            <th>Title</th>
            <th>Lastname</th>

        </tr>
    </thead>
    <tbody>
            <tr>
            <td><a href="/Surgery/web/app_dev.php/workers/13/show">13</a></td>
            <td>aa</td>
            <td>aaaa</td>
            <td>aaaa</td>

        </tr>
        </tbody>
</table> 
```

我尝试了类似的方法，但它不起作用。如何从网页中的表格中加载数据？

```
 $currentUrl = $this->getRequest()->getUri();
 $domOb = new \DOMDocument();
 $html = $domOb->loadHTMLFile($currentUrl); 
```

我在本地主机上工作并使用 Symfony2

编辑：

执行此代码后我有问题

```
$currentUrl = $this->getRequest()->getUri();
$domOb = new \DOMDocument();
$xml = $domOb->loadHTML(file_get_contents($currentUrl)); 
```

我明白了

> 警告：file_get_contents(http: `localhost`///Surgery/web/app_dev.php/test)：打开流失败：HTTP 请求失败！在

在 php.ini 我有`allow_url_fopen = On`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:37:05.490

并以正确的方式显示它：

```
$currentUrl = $this->getRequest()->getUri();
$domOb = new \DOMDocument();
$xml = $domOb->loadHTML(file_get_contents($currentUrl));
header('text/xml; charset=utf-8');
echo $xml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:33:52.363

您需要`loadHTML`为对象调用方法`$domOb`并传递网页的内容：

```
// disable libxml warnings
libxml_use_internal_errors(true);

$currentUrl = $this->getRequest()->getUri();
$domOb = new \DOMDocument();
@$domOb->loadHTML(file_get_contents($currentUrl)); 
```

然后您可以使用`$domOb`对象来解析 html，例如要获取您的表格，您可以执行以下操作：

```
$xpath = new DOMXPath($domOb);
$items = $xpath->evaluate("//table[contains(@class, 'table')]"); 
```

# c# - C DLL 中的 PInvoke char* 在 C# 中作为字符串处理。空字符问题

> ID：15273783
> 
> 赞同：10
> 
> 时间：2013-03-07T14:29:47.283
> 
> 标签：c#, c, string, pinvoke, dllimport

C DLL 中的函数如下所示：

```
int my_Funct(char* input, char* output); 
```

我必须从 C# 应用程序调用它。我通过以下方式执行此操作：

```
...DllImport stuff...
public static extern int my_Funct(string input, string output); 
```

输入字符串完美地传输到 DLL（我有明显的证据）。函数填写的输出虽然是错误的。我里面有六边形数据，比如：

```
3F-D9-00-01 
```

但不幸的是，两个零之后的所有内容都被删除了，只有前两个字节进入我的 C# 应用程序。它发生了，因为（我猜）它被视为空字符并将其作为字符串的结尾。

知道我怎么能摆脱它？我试图将它指定为 out IntPtr 而不是字符串，但我不知道之后该怎么处理它。我试图做之后：

```
 byte[] b1 = new byte[2];
 Marshal.Copy(output,b1,0,2); 
```

2 通常应该是字节数组的长度。但我得到了各种各样的错误：比如“请求的范围超出了数组的末尾。” 或“试图读取或写入受保护的内存......”

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T15:21:33.140

您对输出字符串的编组不正确。`string`在将数据从托管传递到本机时，在 p/invoke 声明中使用是合适的。但是当数据流向另一个方向时，您不能使用它。相反，您需要使用`StringBuilder`. 像这样：

```
[DllImport(...)]
public static extern int my_Funct(string input, StringBuilder output); 
```

然后为输出分配内存：

```
StringBuilder output = new StringBuilder(256);
//256 is the capacity in characters - only you know how large a buffer is needed 
```

然后你就可以调用这个函数了。

```
int retval = my_Funct(inputStr, output);
string outputStr = output.ToString(); 
```

* * *

另一方面，如果这些参数中包含空字符，则不能将其编组为字符串。那是因为编组器不会编组任何超过空值的东西。相反，您需要将其编组为字节数组。

```
public static extern int my_Funct(
    [In] byte[] input, 
    [Out] byte[] output
); 
```

这与您的 C 声明相匹配。

然后假设 ANSI 编码将输入字符串转换为字节数组，如下所示：

```
byte[] input = Encoding.Default.GetBytes(inputString); 
```

如果你想使用不同的编码，很明显如何做到这一点。

对于输出，您确实需要分配数组。假设它与输入的长度相同，您将执行以下操作：

```
byte[] output = new byte[input.Length]; 
```

不知何故，你的 C 函数必须知道数组的长度。我会把那一点留给你！

然后就可以调用函数了

```
int retval = my_Funct(input, output); 
```

然后要将输出数组转换回 C# 字符串，请`Encoding`再次使用该类。

```
string outputString = Encoding.Default.GetString(output); 
```

# c# - 通过超时取消 C# 4.5 TcpClient ReadAsync

> ID：15273784
> 
> 赞同：10
> 
> 时间：2013-03-07T14:29:48.533
> 
> 标签：c#, timeout, tcpclient

通过超时取消 TcpClient ReadAsync 操作并在 .NET 4.5 中捕获此超时事件的正确方法是什么？

TcpClient.ReadTimeout 似乎适用于同步只读。

更新：
尝试应用此处描述的方法[取消异步操作](http://msdn.microsoft.com/en-us/library/hh211418.aspx)

```
var buffer = new byte[4096];
CancellationTokenSource cts = new CancellationTokenSource(5000);
int amountRead = await tcpClientStream.ReadAsync(buffer, 0, 4096, cts.Token); 
```

但它永远不会因超时而取消。有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-12-16T23:16:40.740

所以我知道那是很久以前的事了，但谷歌仍然把我带到这里，我看到没有标记为答案

对我来说，我解决了这样的问题，我做了一个扩展来添加一个需要额外超时的方法 ReadAsync

```
public static async Task<int> ReadAsync(this NetworkStream stream, byte[] buffer, int offset, int count, int TimeOut)
{
    var ReciveCount = 0;
    var receiveTask = Task.Run(async () => { ReciveCount = await stream.ReadAsync(buffer, offset, count); });
    var isReceived = await Task.WhenAny(receiveTask, Task.Delay(TimeOut)) == receiveTask;
    if (!isReceived) return -1;
    return ReciveCount;
} 
```

所以如果它返回 -1 意味着读取超时

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-31T21:52:34.713

编辑：以下要点是我为此所做的解决方法。 [https://gist.github.com/svet93/fb96d8fd12bfc9f9f3a8f0267dfbaf68](https://gist.github.com/svet93/fb96d8fd12bfc9f9f3a8f0267dfbaf68)

原来的：

[我真的很喜欢Khalid Omar](https://stackoverflow.com/a/41193744/5149679)的回答，并做了我自己认为值得分享的版本：

```
public static class TcpStreamExtension
{
    public static async Task<int> ReadAsyncWithTimeout(this NetworkStream stream, byte[] buffer, int offset, int count)
    {
        if (stream.CanRead)
        {

            Task<int> readTask = stream.ReadAsync(buffer, offset, count);
            Task delayTask = Task.Delay(stream.ReadTimeout);
            Task task = await Task.WhenAny(readTask, delayTask);

            if (task == readTask)
                    return await readTask;

        }
        return 0;
    }
} 
```

它或多或少是相同的东西，除了格式略有不同（对我来说）更具可读性，更重要的是它不使用`Task.Run`我不确定为什么在他的示例中使用它。

编辑：

以上内容乍一看似乎不错，但我发现它会导致一些问题。如果没有数据进入， readAsync 调用似乎会泄漏，在我的情况下，它似乎读取了稍后的写入，并且数据基本上返回到内存中不再使用的位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-16T12:55:52.883

传递 a `CancellationToken`to`ReadAsync()`不会增加太多价值，因为它**仅在** [开始读取](https://source.dot.net/#System.Private.CoreLib/Stream.cs,448)之前检查令牌的状态：

```
// If cancellation was requested, bail early with an already completed task.
// Otherwise, return a task that represents the Begin/End methods.
return cancellationToken.IsCancellationRequested
            ? Task.FromCanceled<int>(cancellationToken)
            : BeginEndReadAsync(buffer, offset, count); 
```

您可以很容易地自己添加一个 timout 机制，方法是等待`ReadAsync()`或 timout 任务完成，如下所示：

```
byte[] buffer = new byte[128];
TimeSpan timeout = TimeSpan.FromSeconds(30);

var readTask = stream.ReadAsync(buffer, 0, buffer.Length);
var timeoutTask = Task.Delay(timeout);
await Task.WhenAny(readTask, timeoutTask);
if (!readTask.IsCompleted)
{
    throw new TimeoutException($"Connection timed out after {timeout}");
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-10-02T19:48:22.187

编辑：好的，这锁定了一个线程。但对于许多应用程序，我认为这仍然是一个简单的解决方案。

好的，所以这是一个旧线程，但我想我会分享我自己的解决方案，因为它看起来更简单。

而不是使用例如

```
int length = await stream.Read(buffer, 0, 2, cancellationToken); 
```

只需使用

```
int length = 0;
await Task.Run(() => { length = stream.Read(buffer, 0, 2); }); 
```

这尊重 stream.ReadTimeout 就好了。

# c# - 在 C# 中阻止来自 WndProc 处理程序函数的函数调用

> ID：15273786
> 
> 赞同：1
> 
> 时间：2013-03-07T14:30:02.230
> 
> 标签：c#, synchronization, nonblocking

我在 C# 中有代码，其中 Window 正在获取消息（来自 GigE 相机的图像）。在函数处理程序中，我调用另一个函数对从消息中获得的图像进行一些处理。此处理可能需要比我收到下一条消息之间的时间更多的时间。我想使用一些不错的机制来忽略消息，直到处理完成。我可以简单地写：

```
bool is_processing = false;

void HandleUeyeMessage(int wParam, int lParam) 
{
   frame = getNewFrame();

   if(!is_processing) {
      doProcessing(frame);
   } else non-blocking ignore 
}

void doProcessing(frame f)
{
    is_processing = true;
    // some processing work...
    is_processing = false;
    return;
} 
```

但我想使用一些同步机制，但我真的不知道该使用什么，因为这通常不是线程的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:45:09.483

您不能忽略单个线程中的消息 - 当您的应用能够响应时，它们将被排队和处理。您可以使用带有一些基本同步的工作线程。

```
BackgroundWorker _worker=new BackgroundWorker();

void OnMessage(int lparam, int wparam)
{
    frame frame=GetFrame();
   if(!_worker.IsBusy)
        _worker.RunWorkerAsync(frame);
}

void DoWork(object sender,DoWorkEventArgs e)
{
    //do processing
} 
```

# security - Sitecore 访问权限如何相互影响

> ID：15273788
> 
> 赞同：0
> 
> 时间：2013-03-07T14:30:08.160
> 
> 标签：security, sitecore, sitecore6

例如，sitecore Role1 和 Role2 Role1 中的 2 个外联网角色 Role1 是阻止访问项目，Role2 - 允许访问。

我需要有逆转默认站点核心行为的行为：

> 5.3 访问权限如何相互影响 在 Sitecore 中，每个用户和角色都可以是多个角色的成员。当一个安全账户被分配了多个角色时，不同角色所拥有的访问权限被加在一起。因此，安全帐户被分配了它所属的所有角色的累积访问权限。但是，如果为安全帐户分配了两个角色，其中一个角色被拒绝对某个项目的特定访问权限，而另一个角色被授予对同一项目的此访问权限，则此安全帐户的访问权限将被拒绝。**换句话说，当访问权限累积时，拒绝总是推翻授予。**

是否可以通过一些站点核心设置等来完成？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:42:26.147

那你想要的行为是什么？如果某人同时具有角色 1 和角色 2 - 您希望该人看到它吗？

在这种情况下，您最好删除角色 1 上的继承，而不是拒绝访问。拒绝访问基本上是告诉 Sitecore 从特定点重新开始。然后角色 2 可以再次获得访问权限。

阅读以下内容：[TheClientView 的最佳实践](http://theclientview.net/2011/04/sitecore-recommended-practices-part-3-security-roles-and-users/)。第一个示例听起来像您要实现的目标：

> 有一个角色 A 拒绝对“/home/contact us”项目进行写访问。有一个角色 B 允许对该项目进行写访问。有一个用户 AB 应该同时拥有角色 A 和 B 的权力。但是由于明确拒绝对该项目的权限，用户将无法获得对该项目的写访问权限。当您破坏安全继承时，它会将权限设置为默认拒绝状态，可以通过在角色上设置显式允许访问来覆盖该状态。但是显式拒绝访问永远不会被显式允许访问覆盖。

# python - 将文件的最后一行与 Python 中的字符串进行比较

> ID：15273790
> 
> 赞同：0
> 
> 时间：2013-03-07T14:30:17.673
> 
> 标签：python, intel, bootloader

我是一个 Python 菜鸟，正在尝试编写一个脚本来获取两个 Intel hex 文件（一个用于我的应用程序代码，一个用于引导加载程序），从第一个文件中剥离 EOF 记录，将第二个文件附加到剥离的文件中第一个版本，并另存为新文件。我一切正常，但后来决定变得更有趣：我想确保第一个文件的最后一行真正匹配英特尔 EOF 记录格式。不过，我似乎无法正确理解这个条件的语法。

```
appFile = open("MyAppFile.hex", "r")
lines = appFile.readlines()
appFile.close()

appStrip = open("MyAppFile and BootFile.hex",'w')

if appStrip.readline[:] == ":00000001FF":  #Python complains about "builtin_function_or_method" not subscriptable here
    appStrip.writelines([item for item in lines[:-1]])
    appStrip.close()
else:
    print("No EOF record in last line. File may be corrupted.")

appFile = open("MyAppFile and BootFile", "r")
appObcode = appFile.read()
appFile.close()

bootFile = open("MyBootFile", "r")
bootObcode = bootFile.read()
bootFile.close()

comboData = appObcode + bootObcode

comboFile = open("MyAppFile and BootFile", "w")
comboFile.write(comboData)
comboFile.close() 
```

也欢迎任何其他关于更清洁或更安全版本的建议。

更新：添加了一行来打印最后一行；我得到了预期的输出，但每次比较仍然失败。这是当前的完整程序：

```
appFile = open("C:/LightLock/Master/Project/Debug/Exe/Light Lock.hex")

appLines = appFile.readlines()

appFile = open("MyAppFile.hex").read()

EOF = appLines[len(appLines)-1]

print(appLines[len(appLines)-1])

if not EOF == (":00000001FF"):
    print("No EOF record in last line of file. File may be corrupted.")
else:
    with open("MyAppFile Plus Boot", "a") as appStrip:
        appStrip.writelines([item for item in appLines[:-1]])

    with open("MyAppFile Plus Boot.hex", "r") as appFile:
        appObcode = appFile.read()

    with open("MyBootFile.hex", "r") as bootFile:
        bootObcode = bootFile.read()

    comboData = appObcode + bootObcode

    with open("MyAppFile Plus Boot.hex", "w") as comboFile:
        comboFile.write(comboData) 
```

UPDATE2：尝试修改检查以包括回车和换行，如下所示：

```
EOF = appLines[len(appLines)-1]

print(EOF)

if EOF != (":00000001FF","\r","\n"):
    print("No EOF record in last line of file. File may be corrupted.") 
```

仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:22:42.340

终于弄明白了：我写了一些测试代码来输出 Python 正在读取的字符串的长度。结果是 12 个字符，但只显示了 11 个字符。所以我知道“隐形”字符之一必须是回车或换行。两种都试过了；原来是换行（新行）。

这是最终（工作，但“未优化”）代码：

```
appFile = open("MyAppFile.hex")

appLines = appFile.readlines()

appFile = open("MyAppFile.hex").read()

EOF = appLines[len(appLines)-1]

if EOF != (":00000001FF\n"):
    print("No EOF record in last line of file. File may be corrupted.")
else:
    with open("MyAppFile and Boot.hex", "a") as appStrip:
        appStrip.writelines([item for item in appLines[:-1]])

    with open("MyAppFile and Boot.hex", "r") as appFile:
        appObcode = appFile.read()

    with open("MyBootFile.hex", "r") as bootFile:
        bootObcode = bootFile.read()

    comboData = appObcode + bootObcode

    with open("MyAppFile and Boot.hex", "w") as comboFile:
        comboFile.write(comboData) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:24:08.927

这是一个更简单的版本：

```
app = open("app.hex").read()
if not app.endswith(":00000001FF"):
   print("No EOF")
combo = open("combo.hex","w")
combo.write(app)
boot = open("boot.hex").read()
combo.write(boot)
combo.close() # it's automatic after program ended 
```

# ruby - 如何包含扩展类方法并正确引用类 var 的模块

> ID：15273791
> 
> 赞同：1
> 
> 时间：2013-03-07T14:30:18.580
> 
> 标签：ruby, include, extend

我的期望在评论中。

```
require 'logger'

module Logging
  attr_accessor :logger

  def logger
    return @logger if @logger # allow items to have own loggers
    @@logger ||= Logger.new(STDERR)
    puts "Instance Class REF ID#{@@logger.__id__}"
    puts "Class ID #{self.class.logger.__id__}"
    @@logger
  end

  module ClassMethods
    def logger= logger
      @logger = logger
    end

    def logger
      @logger ||= Logger.new(STDERR)
      puts "Class Instance REF ID #{@logger.__id__}"
      @logger
    end
  end

  def self.included(base)
    base.extend(ClassMethods)
  end
end

class Test

  include Logging

  def wow
    logger.info 'wow'
  end
end

t = Test.new

# should be the same
puts "Loggers are #{t.logger.__id__ == Test.logger.__id__ ? '' : 'not '}the same"

Test.logger = Logger.new('/dev/null')

# should still be the same
puts "Loggers are #{t.logger.__id__ == Test.logger.__id__ ? '' : 'not '}the same"

lg = Test.logger.__id__
t.logger =  Logger.new(STDERR)

# class logger should be same
puts "Class Logger is #{Test.logger.__id__ == lg ? 'still the' : 'not'} same"

# class and instance logger should be different
puts "Loggers are #{t.logger.__id__ == Test.logger.__id__ ? '' : 'not '}the same" 
```

执行时：

```
➜沙盒irb
1.9.3-p392:001 > 加载“test_l.rb”
实例类 REF ID70203753590760
类实例 REF ID 70203753590500
类 ID 70203753590500
类实例 REF ID 70203753590500

记录器不一样#我希望是一样的...... :(

实例类 REF ID70203753590760
类实例 REF ID 70203753590000
类 ID 70203753590000
类实例 REF ID 70203753590000

记录器不一样#我希望是一样的...... :(

类实例 REF ID 70203753590000
类实例 REF ID 70203753590000

类 Logger 还是一样的

类实例 REF ID 70203753590000

记录器不一样

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T14:46:21.047

我故意忘记了如何使用`@@`变量，因为它们非常混乱而且很少需要。

相反，只考虑使用实例变量，但如果需要，可以委托给类级别：

```
module Logging
  attr_writer :logger

  def logger
    defined?(@logger) ? @logger : self.class.logger
  end

  module ClassMethods
    def logger=(logger)
      @logger = logger
    end

    def logger
      @logger ||= Logger.new(STDERR)
    end
  end

  def self.included(base)
    base.extend(ClassMethods)
  end
end

class Test
  include Logging

  # ...
end 
```

# ios - 如何关闭代码生成的子视图？

> ID：15273795
> 
> 赞同：-1
> 
> 时间：2013-03-07T14:30:35.200
> 
> 标签：ios, objective-c, uiview, uiviewcontroller

在我的项目中，我想在第一次启动应用程序时显示第一次运行视图。为此，我在 mainViewCntroller.m 中添加了一个 UIView。为了关闭这个（覆盖的）视图，我在视图上放置了一个名为 acceptButton 的按钮。我必须向 Button 添加什么代码才能从堆栈中删除此视图？

我做错了什么？

这是我的代码：

```
- (void) firstRun {
if (((AppDelegate*)[UIApplication sharedApplication].delegate).firstRun)
{
    CGFloat height = [[UIScreen mainScreen] bounds].size.height;
    CGFloat width = [[UIScreen mainScreen] bounds].size.width;

    NSLog(@"%f", height);

    CGRect myFrame = CGRectMake(0, 0, width, height);
    UIView *myView = [[UIView alloc] initWithFrame:myFrame];
    myView.backgroundColor = [UIColor scrollViewTexturedBackgroundColor];
    myView.tag = 12345;
    [self.view addSubview:myView];

    // Create a ScrollView and a label
     UIScrollView *discScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(20.0f, 0.0f, self.view.frame.size.width - 20, self.view.frame.size.height -70)];
     discScroll.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

     UILabel *discLabel = [[UILabel alloc] initWithFrame:CGRectMake(0,0,0,0)];
     discLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

     NSString *labelText = NSLocalizedString (@"InfoText",@"");
     [discLabel setText:labelText];

     // Tell the label to use an unlimited number of lines
     [discLabel setNumberOfLines:0];
     [discLabel setNumberOfLines:0];
     [discLabel setBackgroundColor:[UIColor clearColor]];
     [discLabel setFont:[UIFont boldSystemFontOfSize:17]];
     discLabel.textColor = [UIColor colorWithRed:255 green:255 blue:255 alpha:1.0];
     //[infoLabel sizeToFit];

     CGSize infoLabelSize = [discLabel.text sizeWithFont:discLabel.font
     constrainedToSize:CGSizeMake(discScroll.frame.size.width, 5000)
     lineBreakMode:UILineBreakModeWordWrap];

     discLabel.frame = CGRectMake(0, 0, infoLabelSize.width, infoLabelSize.height);
     discScroll.contentSize = infoLabelSize;

     [discScroll addSubview:discLabel];

     [self.view addSubview:discScroll];

    UIButton *acceptButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    acceptButton.frame = CGRectMake(110, [[UIScreen mainScreen] bounds].size.height - 74, 100, 44);
    // position in the parent view and set the size of the button
    [acceptButton setTitle:@"Click Me!" forState:UIControlStateNormal];
    // add targets and actions
    [acceptButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    // add to a view
    [self.view addSubview:acceptButton];

}
}

-(IBAction)buttonClicked:(id)sender
{

[[self.myView viewWithTag:12345] removeFromSuperview];

} 
```

在我的 mainViewController.h 中有以下属性：

```
@property (weak, nonatomic) IBOutlet UIView *myView; 
```

**编辑**我已经发布了完整的代码。也许有别的东西在路上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T15:39:05.603

我已经用 Xcode 编写了它，下面的代码对我有用。

我打开了一个新的 XCode 项目（基于单一视图），并添加了以下代码：

```
- (void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];

    UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    myView.backgroundColor = [UIColor scrollViewTexturedBackgroundColor];
    myView.tag = 12345;
    [self.view addSubview:myView];

    UIButton *acceptButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    acceptButton.frame = CGRectMake(0, 0, 100, 44);
    [acceptButton setTitle:@"Click Me!" forState:UIControlStateNormal];
    [acceptButton addTarget:self action:@selector(buttonClicked) forControlEvents:UIControlEventTouchUpInside];
    [myView addSubview:acceptButton];

    [myView release];

}

- (void)buttonClicked{
    [[self.view viewWithTag:12345] removeFromSuperview];
} 
```

这在 iPhone 模拟器中对我有用.... 只是 MainViewController.m 中的这段代码.m 没有别的......试一试，希望它也适用于你:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T14:33:01.447

```
 [acceptButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

当您的方法被称为acceptButton时，更改为

```
 [acceptButton addTarget:self action:@selector(acceptButton:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:34:30.557

您的目标设置为，`buttonClicked`但您正在使用`acceptButton`

```
[acceptButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];

-(IBAction)buttonClicked:(id)sender
 {
  [self.myView removeFromSuperview];
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:33:12.183

问题出`[acceptButton addTarget:self action:@selector(buttonClicked:)`在线路上。在该调用中更改`buttonClicked`为您的方法。`acceptButton:`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T14:36:21.533

```
[acceptButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

异常很明显，没有名为“buttonClicked”的函数

只需使用以下代码更改代码的一部分；

```
[acceptButton addTarget:self action:@selector(acceptButton:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T14:45:14.463

只是给它一个标签...

```
UIView *myView = [[UIView alloc] initWithFrame:myFrame];
myView.backgroundColor = [UIColor scrollViewTexturedBackgroundColor];
myView.tag = 12345;
[self.view addSubview:myView];
[myView release];

-(IBAction)acceptButton:(id)sender{
[[self.view viewWithTag:12345] removeFromSuperview];
} 
```

也改变

```
action:@selector(buttonClicked:) 
```

到

```
action:@selector(acceptButton:) 
```

# python - 使用 Python 在 quantlib 中为浮动债券定价

> ID：15273797
> 
> 赞同：10
> 
> 时间：2013-03-07T14:30:45.490
> 
> 标签：python, quantlib, quantlib-swig

我正在尝试使用 Quantlib (v1.2) SWIG 包装器在 python 中为一个非常基本的浮动利率债券定价。我修改了文档中包含的示例。

我的债券期限为 4 年。libor 设置为 10%，债券的利差为 0。我的问题是，如果我以 10% 的利率贴现，为什么债券的 PV 不是 100？我得到的值为 99.54。

谢谢！

```
from QuantLib import *

frequency_enum, settle_date = 4, Date(5, 1, 2010)
maturity_date = Date(5, 1, 2014)
face_amount = 100.0
settlement_days = 0
fixing_days = 0

calendar = NullCalendar()
settle_date = calendar.adjust(settle_date)
todays_date = calendar.advance(settle_date, -fixing_days, Days)
Settings.instance().evaluationDate = todays_date

rate = 10.0 / 100.0

flat_forward = FlatForward(settle_date,
                           rate,
                           Thirty360(),
                           Compounded,
                           frequency_enum)

discounting_term_structure = RelinkableYieldTermStructureHandle(flat_forward)
index_term_structure = RelinkableYieldTermStructureHandle(flat_forward)

index = USDLibor(Period(3, Months), index_term_structure)

schedule = Schedule(settle_date,
                    maturity_date, Period(frequency_enum),
                    NullCalendar(),
                    Unadjusted, Unadjusted,
                    DateGeneration.Forward, False)

floating_bond = FloatingRateBond(settlement_days,
                                 face_amount,
                                 schedule,
                                 index,
                                 Thirty360(),
                                 Unadjusted,
                                 fixing_days,
                                 [],   # Gearings
                                 [0],  # Spreads
                                 [],      # Caps
                                 [],      # Floors
                                 False,    # Fixing in arrears
                                 face_amount,
                                 settle_date)

bond_engine = DiscountingBondEngine(discounting_term_structure)
floating_bond.setPricingEngine(bond_engine)

# coupon pricers
pricer = BlackIborCouponPricer()

volatility = 0.0
vol = ConstantOptionletVolatility(settlement_days,
                                  calendar,
                                  Unadjusted,
                                  volatility,
                                  Thirty360())

pricer.setCapletVolatility(OptionletVolatilityStructureHandle(vol))
setCouponPricer(floating_bond.cashflows(), pricer)

print floating_bond.NPV(), floating_bond.cleanPrice(), floating_bond.dirtyPrice() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T15:54:46.673

优惠券利率使用与您提供的付款日计数器 (30/360) 不匹配的 USDLibor 日计数器（即 Actual/360）固定。您可以通过检查优惠券看到它：

```
cfs = floating_bond.cashflows()
coupons = [ as_coupon(c) for c in cfs[:-1] ] # the last one is the redemption
print [ (c.rate(), c.accrualPeriod()) for c in coupons ] 
```

对于所有优惠券，您的 T = 0.25，但利率低于 10%。

要获得您想要的价格，您必须匹配费率和累积期限。一种方法是通过 Actual360() 作为债券日计数器，它在我的机器上给出 100.002 的价格（我没有进一步调查，但差异可能是由于 LIBOR 固定的结束日期，它是使用确定的美元日历，可能与优惠券的结尾不完全匹配）。另一种方法是使用内部 30/360 天计数器创建自定义 LIBOR 指数；我自己没有尝试过，但您可以通过创建 IborIndex 类的适当实例来实现。

# c# - 将html页面重写为字符串的最有效方法（MVC 3）？

> ID：15273799
> 
> 赞同：1
> 
> 时间：2013-03-07T14:30:52.437
> 
> 标签：c#, html, asp.net-mvc, asp.net-mvc-3, razor

我需要将此 html 页面重写为字符串：

```
 <h1>Report @ViewData["reviewId"]</h1>
 <table width="1000">
 @foreach (var group in Model.GroupBy(item => item.Parent_Group_Name))
 {
 <tr bgcolor="gray">
    <td><b>@group.Key</b></td>
 </tr>
     foreach (var line in group)
     { 
      <tr>
          <td><b>@line.Child_Group_Name </b></td>
      </tr>
      <tr>
          <td width="100%"><b>Question:</b> @String.Format("{0}. {1}",line.Question_Order,line.Question_Label)</td>
      </tr>
      <tr>
          <td width="100%"><b>Answer:</b> @line.Question_Answer</td>
      </tr>
        <tr>
       <td valign=right>
            <table width="100%" >
                <thead bgcolor="BDBDBD">Comments</thead>
                @foreach (var comment in line.Comments)
                { 
                  <tr>
                      <td width="100%"><font size="3" color=302F2F>@comment.Comment_Text</font></td>
                  </tr>
                      <tr>     
                        <td width="100%"><font size="2" color=302F2F>by @comment.Comment_User...[@comment.Comment_Date.ToShortDateString()] </font></td>
                  </tr>
                }
            </table><hr />      
       </td>
        </tr>        
     }

 }
 </table> 
```

我在想只是使用字符串生成器来包装所有这些 html，有没有更有效或更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:36:46.430

如果您需要将该 HTML 代码作为另一个视图中的字符串，您可以使用`HtmlHelper.Partial()`方法，因为它返回一个字符串值。

如果您需要 MVC 视图之外的内容，那么您需要更复杂的东西，如下所述：[http ://www.west-wind.com/weblog/posts/2012/May/30/Rendering-ASPNET-MVC-Views-到字符串](http://www.west-wind.com/weblog/posts/2012/May/30/Rendering-ASPNET-MVC-Views-to-String)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:39:30.910

这是我使用的方法：

```
public static string RenderPartialToString(Controller controller, string viewName, object model)
{

    controller.ViewData.Model = model;

    using (StringWriter sw = new StringWriter())
    {
        ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(controller.ControllerContext, viewName);
        ViewContext viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, sw);
        viewResult.View.Render(viewContext, sw);

        return sw.GetStringBuilder().ToString();
    }
} 
```

# c++ - 我可以使用 boost.statecharts 自定义对不同正交区域中多个状态的事件做出反应吗？

> ID：15273805
> 
> 赞同：0
> 
> 时间：2013-03-07T14:31:08.933
> 
> 标签：c++, boost, state-machine, boost-statechart

我的用例类似于这个 SSCCE。问题是，如果没有发生转换，我需要转发似乎不自然的事件，以便它们由其他正交区域处理。更重要的是，尽管在我需要过渡的情况下，我无法找到一种方法来让该事件在其他地区得到反应。我应该如何重组来解决这个问题？

如果这很重要，我正在使用 boost 1.53。

```
namespace sc = boost::statechart;
struct Active;
struct Keyboard : sc::state_machine< Keyboard, Active > {};

struct NumLockOff;
struct CapsLockOff;
struct ScrollLockOff;
struct Active: sc::simple_state< Active, Keyboard, boost::mpl::list< NumLockOff, CapsLockOff, ScrollLockOff > > {};

struct EvNumLockPressed : sc::event< EvNumLockPressed > {};
struct EvCapsLockPressed : sc::event< EvCapsLockPressed > {};
struct EvScrollLockPressed : sc::event< EvScrollLockPressed > {};
struct EvAllLocksOffPressed : sc::event< EvAllLocksOffPressed > {
    int i_;
    EvAllLocksOffPressed(int i):sc::event< EvAllLocksOffPressed >(),i_(i){}
};

struct NumLockOn : sc::simple_state< NumLockOn, Active::orthogonal< 0 > >
{
    typedef boost::mpl::list<sc::transition< EvNumLockPressed, NumLockOff >, sc::custom_reaction<EvAllLocksOffPressed>> reactions;
    sc::result react( const EvAllLocksOffPressed & e)
    {
        if(e.i_ == 42)
            return transit< NumLockOff >();
        return forward_event();
    }
};

struct NumLockOff : sc::simple_state< NumLockOff, Active::orthogonal< 0 > >
{
    typedef sc::transition< EvNumLockPressed, NumLockOn > reactions;
};

struct CapsLockOn : sc::simple_state< CapsLockOn, Active::orthogonal< 1 > >
{
    typedef boost::mpl::list<sc::transition< EvCapsLockPressed, CapsLockOff >, sc::custom_reaction<EvAllLocksOffPressed>> reactions;
    sc::result react( const EvAllLocksOffPressed & e)
    {
        if(e.i_ == 42)
            return transit< CapsLockOff >();
        return forward_event();
    }
};

struct CapsLockOff : sc::simple_state< CapsLockOff, Active::orthogonal< 1 > >
{
    typedef sc::transition< EvCapsLockPressed, CapsLockOn > reactions;
};

struct ScrollLockOn : sc::simple_state< ScrollLockOn, Active::orthogonal< 2 > >
{
    typedef boost::mpl::list<sc::transition< EvScrollLockPressed, ScrollLockOff >, sc::custom_reaction<EvAllLocksOffPressed>> reactions;
    sc::result react( const EvAllLocksOffPressed & e)
    {
        if(e.i_ == 42)
            return transit< ScrollLockOff >();
        return forward_event();
    }
};

struct ScrollLockOff : sc::simple_state< ScrollLockOff, Active::orthogonal< 2 > >
{
    typedef sc::transition< EvScrollLockPressed, ScrollLockOn > reactions; 
};

int main(){
    Keyboard k;
    k.initiate();
    k.process_event(EvNumLockPressed());
    k.process_event(EvCapsLockPressed());
    k.process_event(EvScrollLockPressed());
    k.process_event(EvAllLocksOffPressed(1));
    k.process_event(EvAllLocksOffPressed(42));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:53:07.093

图书馆作者[回答](http://boost.2283326.n4.nabble.com/boost-users-statechart-processing-an-event-by-few-orthogonal-regions-td2576184.html)了这个问题。他的意思是[事件派发到正交区域](http://www.boost.org/doc/libs/1_53_0/libs/statechart/doc/rationale.html#Limitations)。

# vim - 重新映射键并获取用户输入

> ID：15273810
> 
> 赞同：1
> 
> 时间：2013-03-07T14:31:11.640
> 
> 标签：vim

所以我发现这样做

```
:%s//my new string/g 
```

我可以替换我当前搜索的所有文本

```
Hello, world! la la la Hello. 
```

因此，如果我踩到 Hello，按 *，然后执行 :%s//Bye/g，我可以将所有 Hello's 更改为 Bye's。

我只想为我做一个小的重映射，我是 vim 的新手，所以这对我来说非常困难，我真的不知道如何获取用户输入以进行重映射。

一位 reddit 用户建议我

```
nnoremap <c-n> :%s///g<left><left> 
```

所以我可以用来触发替换，但它不起作用，我猜是因为它没有在任何地方指定输入？我想做

```
<c-n> SOME NEW TEXT <enter> 
```

并用一些新文本替换所有你好

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:44:33.073

您需要编写一个小函数来接受用户输入。例如：

```
function! ReplaceIt()
    call inputsave()
    let replacement = input('Enter replacement:')
    call inputrestore()
    execute '%s//'.replacement.'/g'
endfunction 
```

你可以把它放在你的vimrc中。或另一个文件并在 vim 中获取它。

那么您可以先搜索（按`/`或`*`，`#`...），然后输入：

```
:call ReplaceIt() 
```

您将看到输入提示，您只需提供所需的替换，然后按`Enter`。

您可以为此函数调用创建映射，例如：

```
nnoremap <leader>r :call ReplaceIt()<cr> 
```

# wordpress - 为什么 the_content 在 wordpress single.php 中不起作用

> ID：15273818
> 
> 赞同：1
> 
> 时间：2013-03-07T14:31:28.880
> 
> 标签：wordpress, wordpress-theming

我的代码：

```
<?php if (have_posts()) : ?>
    <?php while (have_posts()) : the_post(); ?> 
        <div class="posts" id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
            <h2> 
              <?php the_title(); ?>
            </h2>
            <div class="entry">
                <?php the_content();?>
            </div>                  
        </div><!--post end-->
    <?php endwhile; ?>
<?php else : ?>
    <h3>no content</h3>
<?php endif; ?> 
```

我将代码放入我自定义的 wordpress 主题文件 single.php 中。为什么不能输出帖子内容，可以输出帖子标题。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T15:33:39.863

您可以尝试以下方法，看看它是否有效，而不是`the_content`

```
<?php echo wpautop($post->post_content); ?> // content with p tags
<?php echo $post->post_content; ?> //without p tags 
```

也是一种选择

```
<?php echo wpautop( get_the_content() ); ?> // content with p tags 
```

看看这是否适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:09:16.373

在开发 Wordpress 主题时，建议您将调试模式（在安装的根目录中找到`wp-config.php`）切换为 true。如果您有任何错误，这将提醒您。

在你的情况下，试试`<?php the_excerpt(); ?>`. 此外，这可能听起来有点愚蠢，但你真的有帖子吗？不是该帖子中的页面或内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-29T07:22:18.897

很多时候，我遇到来自开发人员或第一次主题开发人员关于无法`the_content()`在他们的自定义模板页面上显示的查询。问题是 the_content() 函数在 WP 循环内运行，例如

```
if (have_posts()) {
while (have_posts()) {
the_post();
the_content();
}
} ?> 
```

这将起作用，但在某些情况下，您希望在循环外调用该函数——解决方案是：

```
echo $post->post_content; 
```

# objective-c - 你能强制一个 NSWindow 加载，即在它出现在屏幕上之前？

> ID：15273823
> 
> 赞同：2
> 
> 时间：2013-03-07T14:31:33.443
> 
> 标签：objective-c, macos, cocoa

我都赞成仅在需要对象时才对对象进行惰性实例化，尤其是对于像 NSWindows 这样的重型对象。不幸的是，虽然我使用的是 WebKit 视图并且需要一种方法来预加载页面（最多可能需要 10 秒），所以我想在应用程序启动后立即启动视图层次结构初始化。我正在构建一个任务栏应用程序，因此在启动时看不到任何窗口。

我的第一直觉是快速“隐藏和显示”，但必须有更好的方法来强制窗口取消归档并调用它的`awakeFromNib`和`windowDidLoad`方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:16:01.997

如果您使用 NSWindowController 来管理窗口，您可以调用窗口控制器的`-window`方法来使其加载窗口而不显示它。像这样：

```
// Window is not loaded
[windowController window];
// Window is now loaded but not on screen
[windowController showWindow:nil];
// Window is now visible 
```

# mysql - MySQL计数列值等于另一列

> ID：15273831
> 
> 赞同：0
> 
> 时间：2013-03-07T14:31:51.510
> 
> 标签：mysql, sql

我有一个这样的 MySQL 表：

```
Id  Id_1    Id_2
1     0   0
2     0   0
3     1   0
4     1   0
5     0   0
6     0   1
7     2   1
8     0   2 
```

其中 Id_1 和 Id_2 可以等于 Id 除了它自己或等于 0

我想通过使用最有效的查询来获得这个结果：

```
id    COUNT(Id_1)   COUNT(Id_2)
1         2             2
2         1             1
3         0             0
4         0             0
5         0             0
6         0             0
7         0             0
8         0             0 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:34:21.467

您可以使用带有子查询的 CASE 语句来获得所需的结果

```
SELECT ID, SUM(id1.ids), SUM(id2.ids)
FROM mytable
 LEFT OUTER JOIN
  (SELECT id_1, count(id) ids
   FROM my table
   GROUP BY id_1) AS id1 ON mytable.ID = id1.id_1
 LEFT OUTER JOIN
  (SELECT id_2, count(id) ids
   FROM my table
   GROUP BY id_2) AS id2  AS id2 ON mytable.ID = id2.id_2
GROUP BY ID
ORDER BY ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:43:32.870

您的解释不是很清楚，但是根据您的示例数据和所需的输出，您可以通过两个外部连接到基表的子查询来完成此操作，如下所示：

```
select a.id, 
  coalesce(b.id_1_count,0), 
  coalesce(c.id_2_count,0)
from so15273831 a
left outer join (
  select id_1, count(*) as id_1_count
  from so15273831
  group by id_1
) b on b.id_1 = a.id
left outer join (
  select id_2, count(*) as id_2_count
  from so15273831
  group by id_2
) c on c.id_2 = a.id
order by a.id; 
```

SQL 小提琴在这里：[http ://sqlfiddle.com/#!2/71b67/1](http://sqlfiddle.com/#!2/71b67/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:44:35.290

```
Select t1.id1 id,
(Select COUNT(*) From tableName t2 Where t1.id1=t2.id2) COUNT(Id_1),
(Select COUNT(*) From tableName t2 Where t1.id1=t2.id3) COUNT(Id_2)
 From tableName t1 
```

这是示例的替代方法：

```
declare @aa table
(
 id1 int,
 id2 int,
 id3 int

)

insert into @aa
Select 
1,0,0
Union All Select
2,0,0
Union All Select
3,1,0
Union All Select
4,1,0
Union All Select
5,0,0
Union All Select
6,0,1
Union All Select
7,2,1
Union All Select
8,0,2

 Select t1.id1,IsNull(t2.CountId,0) as [Count(Id_2)],IsNull(t3.CountId,0) as [Count(Id_2)] From @aa t1
 Left Join 
 (
  Select COUNT(*) CountId,t2.id2 From @aa t2 Group By t2.id2
 )t2
 On t1.id1=t2.id2
 Left Join 
 (
  Select COUNT(*) CountId,t2.id3 From @aa t2 Group By t2.id3
 )t3 On t1.id1=t3.id3 
```

# facebook - 将帖子分享到 Facebook 时没有缩略图

> ID：15273836
> 
> 赞同：-3
> 
> 时间：2013-03-07T14:31:57.660
> 
> 标签：facebook, image, share, blogger

自上周以来，我遇到了问题。当我尝试从我的网站（博客）分享视频时，没有出现 youtube 缩略图。

看这个例子：

[https://www.facebook.com/sharer/sharer.php?app_id=309437425817038&sdk=joey&u=http%3A%2F%2Fwww.antesfossefacil.com%2F2013%2F02%2Fque-puto-de-golaco-dos-melhores- de.html&display=popup](https://www.facebook.com/sharer/sharer.php?app_id=309437425817038&sdk=joey&u=http%3A%2F%2Fwww.antesfossefacil.com%2F2013%2F02%2Fque-puto-de-golaco-dos-melhores-de.html&display=popup)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:38:24.787

如果您通过[调试器](https://developers.facebook.com/tools/debug/og/object?q=http%253A%252F%252Fwww.antesfossefacil.com%252F2013%252F02%252Fque-puto-de-golaco-dos-melhores-de.html)运行 URL ，它会为您的 URL 显示这些警告。

> 小 og:image：og:image 引用的所有图像在两个维度上都应至少为 200 像素，最好是 1500x1500。（最大图像大小为 5MB。）请检查给定 url 中所有带有标签 og:image 的图像，并确保其符合推荐的规格。
> 
> og:image 应该更大：前提是 og:image 不够大。请使用至少 200x200，最好是 1500x1500 的图片。（最大图像大小为 5MB。）将使用图像“ [http://2.bp.blogspot.com/-Cq-6EzxeQ7A/T57exlijroI/AAAAAAAAAqo/X_opAw26xxU/s1600/antesfoss+NOVO+1.png ”。](http://2.bp.blogspot.com/-Cq-6EzxeQ7A/T57exlijroI/AAAAAAAAAqo/X_opAw26xxU/s1600/antesfoss+NOVO+1.png)

修复这些警告以生成该缩略图。

# c++ - 使用 createWindowEx 成功构建，窗口仍然不会出现

> ID：15273839
> 
> 赞同：0
> 
> 时间：2013-03-07T14:32:01.220
> 
> 标签：c++, window, createwindowex

我正在尝试学习一些 windows 和 directX 编程，但我正在尝试一些不同的东西。当我的窗户突然停止出现时，即使它是一个成功的构建。我想我一定是搞砸了，我解开了一切，直到我回到我最后一次设法让窗口出现的地方，但是现在当我运行（成功构建）它仍然没有显示:(而且我开始想不出问题可能是什么，太奇怪了。自从上次我让它工作以来，我做的一件事就是添加了一些 libs 目录，但我很难看出这会如何影响以这种方式编程。你们中是否有人遇到过这个问题，如果有，你是如何解决的？这是创建窗口的 func 的代码（是的，我知道无限循环，它应该

附言。我还尝试在 WINDCLASSEX 和 WINDCLASS 之间进行更改，所有需要更改的功能都没有任何区别 ds。

```
int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE, PWSTR pCmdLine, int nCmdShow){
    // Register the window class.
    const wchar_t CLASS_NAME[]  = L"Sample Window Class";

    WNDCLASS wc = { };

    wc.lpfnWndProc   = WindowProc;
    wc.hInstance     = hInstance;
    wc.lpszClassName = CLASS_NAME;
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)COLOR_WINDOW;

    RegisterClass(&wc);

    RECT wr = {0, 0, 500, 400};    // set the size, but not the position
    AdjustWindowRect(&wr, WS_OVERLAPPEDWINDOW, FALSE);    // adjust the size

    // Create the window.

    HWND hwnd = CreateWindowEx(
    0,                              // Optional window styles.
    CLASS_NAME,                     // Window class
    L"My first window",    // Window text
    WS_OVERLAPPEDWINDOW,            // Window style
    CW_USEDEFAULT, CW_USEDEFAULT,//position x,y
    wr.right-wr.left, wr.bottom-wr.top,//width, height
    NULL,       // Parent window    
    NULL,       // Menu
    hInstance,  // Instance handle
    NULL        // Additional application data
    );

    if (hwnd == NULL){
        return 0;
    }

    InitD3D(hwnd);
     // Run the message loop.

    MSG msg = { };
    while (true){
    if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE)){
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    else{

    }
    }

    return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:38:28.120

看起来你需要`ShowWindow`在那里打电话（除非`InitD3D`你没有显示代码）

默认情况下，窗口是不可见的，因此您可以进行各种初始化，而无需用户看到发生了什么

作为替代方案，您可以创建已经可见的窗口，但通常最好遵守单一约定

* * *

顺便说一句，你可以只使用一个标准`int main`，不需要使用微软的怪物

使用 GNU 工具链就是这样，使用 Microsoft 的工具，如果您使用 GUI 子系统，则必须通过链接器选项告诉链接器接受标准代码`/entry:mainCRTStartup`。

* * *

此外，对非阻塞的调用`PeekMessage`意味着您的消息循环很可能会占用 CPU

相反，使用阻塞`GetMessage`

并记得在返回 0 时退出循环`GetMessage`（这表示`WM_QUIT`消息已发布）

# javascript - 模态弹出扩展器窗口（JavaScript）之间闪烁？

> ID：15273840
> 
> 赞同：0
> 
> 时间：2013-03-07T14:32:05.550
> 
> 标签：javascript, jquery, asp.net, css

我有 3 个分页 AJAX 模态弹出扩展器窗口，显示我的应用程序的帮助页面。

我有这个脚本，它隐藏和显示相关的模态窗口。每个功能都是从模式面板中的“下一步”和“后退按钮”触发的。

```
 function Help_Next(sender, args) {

        $find('HelpTable').hide();
        $find('HelpTable2').show();

    }

    function Help_Back(sender, args) {

        $find('HelpTable').show();
        $find('HelpTable2').hide();
    }

    function Help_Last(sender, args) {

        $find('HelpTable3').hide();
        $find('HelpTable').hide();
        $find('HelpTable2').show();

    } 

     </script> 
```

该脚本工作正常，并允许在模式弹出窗口之间进行分页。唯一的问题是我在从 HelpTable2 返回到 HelpTable 时遇到闪烁。它在 IE8 中很普遍，但在 Firefox 和 Chrome 中也偶尔发生。所有模态面板共享相同的灰色模态背景。

```
function Help_Back(sender, args) {

    $find('HelpTable').show();
    $find('HelpTable2').hide();
} 
```

知道为什么会这样吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:40:03.543

尝试在 Help_Back 中切换显示/隐藏命令的顺序，它们可能会快速争夺在 IE8 中趋于暗淡的聚光灯

# google-chrome - 使用 Content-Security-Policy-Report-Only 时，Eval() 不会在 Chrome 中执行

> ID：15273841
> 
> 赞同：1
> 
> 时间：2013-03-07T14:32:10.547
> 
> 标签：google-chrome, content-security-policy

当使用*Content-Security-Policy*的仅报告模式时，Chrome 不再执行`eval()`。

对于以下示例，我希望获得 2 个报告（一个用于内联脚本，一个用于`eval`），并且还会看到一个弹出窗口。但只有 2 个报告显示在控制台中。

是我使用了错误的 CSP 还是 Chrome 中的 CSP 仅报告模式存在错误？

```
<!DOCTYPE html>
<html>
    <meta http-equiv="Content-Security-Policy-Report-Only"   content="default-src 'self'; report-uri /dummy.html"/>     
    <meta http-equiv="X-Content-Security-Policy-Report-Only" content="default-src 'self'; report-uri /dummy.html"/>     
    <meta http-equiv="X-WebKit-CSP-Report-Only"              content="default-src 'self'; report-uri /dummy.html"/>
    <head>
        <script>
            eval('alert(1);');  
        </script>
    </head>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:37:40.953

我可以复制这个，我已经提交了[https://bugs.webkit.org/show_bug.cgi?id=111867](https://bugs.webkit.org/show_bug.cgi?id=111867)。我很快就会修复。这是我的直接疏忽。对于那个很抱歉。

# .net - 将 .Net NewRelic 与多线程一起使用

> ID：15273842
> 
> 赞同：1
> 
> 时间：2013-03-07T14:32:10.470
> 
> 标签：.net, multithreading, newrelic

我有一个多线程应用程序，我需要使用 .Net NewRelic 代理对其进行监控。发生的问题是 NewRelic 设法监控所有内容，直到线程被分叉，之后，我无法让代理监控任何方法。如果可能的话，我需要一种方法来监视子线程中的方法，而无需更改我的代码。

# robotium - 使用带有上下文菜单的 Robotium

> ID：15273844
> 
> 赞同：1
> 
> 时间：2013-03-07T14:32:15.323
> 
> 标签：robotium, android-testing

我正在使用 Robotium 测试一个应用程序，并且我有一个带有复选框的自定义列表视图。当我点击一个复选框时，它会加载一个上下文菜单，为用户提供修改和删除这些项目的按钮。

我可以让 Robotium 单击加载菜单的复选框，但由于某种原因，我无法让它单击删除按钮。

我试过了：

```
solo.clickOnActionBarItem(R.id.menu_delete);
solo.clickOnMenuItem("Delete");
solo.clickOnImageButton(1);
solo.clickOnImage(1); 
```

到目前为止，没有任何效果。是否可能是因为我在菜单弹出之前单击了按钮？我怎样才能让 Robotium 等待？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:19:28.267

其实很简单，按id点击查看即可：

```
solo.clickOnView(getActivity().findViewById(R.id.menu_edit)); 
```

# actionscript-3 - actionscript 3 中的实际大小

> ID：15273857
> 
> 赞同：0
> 
> 时间：2013-03-07T14:33:10.713
> 
> 标签：actionscript-3, object, size, controls, screen

我正在尝试使用 ActionScript 3 在 Flash Pro 中的特定设备屏幕中为用户交互制作原型。需要在设备屏幕的真实尺寸中测试此用户交互原型。测试将使用普通电脑执行，但没有具体的，所以问题是如何在原型电影中设置设备屏幕的真实尺寸以及如何控制和保持其尺寸以适应任何可能的显示器屏幕尺寸和分辨率（一个真实世界屏幕尺寸的精确复制品）。

换句话说：屏幕尺寸是 2 x 1 英寸，我需要在原型中保留这些尺寸。

我试图使用这种方法，但我没有正确应用它的技能水平：

```
 this.addEventListener(Event.ENTER_FRAME,loop)

function loop(e:Event):void
{
trace(stage.stageWidth)

} 
```

提前感谢你们所有人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:51:45.943

利用：

```
stage.addEventListener(Event.RESIZE, onStageResized, false, 0, true);
//and handler
protected function onStageResized(e:Event=null):void
{
    //here code to do something with size change
} 
```

还值得注意的是，您必须设置舞台以不调整大小，例如通过网页

```
 stage.align = StageAlign.TOP_LEFT;
        stage.scaleMode = StageScaleMode.NO_SCALE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:07:35.593

实际上，我大约在一年前创建了一个原型应用程序，用于在移动设备上执行此操作。我使用了 Flex，但你可以通过这个计算出所有的数学。这是为移动设备制作的，但我认为这不应该在桌面屏幕上工作。

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark">
    <fx:Declarations>
        <fx:Number id="spacing">5</fx:Number>
    </fx:Declarations>
    <s:Rect id="rectangle" width="{this.sliderWidth.value}" height="{this.sliderHeight.value}" x="{this.spacing}" y="{this.spacing}">
        <s:fill>
            <s:SolidColor color="#ff000f"/>
        </s:fill>
    </s:Rect>
    <s:VGroup bottom="10" width="100%" 
              horizontalAlign="center" gap="20" 
              left="{this.spacing * 2}" right="{this.spacing * 2}" 
              maxWidth="{this.width - 4 * this.spacing}">
        <s:Label id="measurements" opaqueBackground="#ffffff" 
                 text="
                 Box: {(this.rectangle.width/Capabilities.screenDPI).toFixed(2)}in x {(this.rectangle.height/Capabilities.screenDPI).toFixed(2)}in — 
                 {this.rectangle.width}px x {this.rectangle.height}px" 
                 textAlign="center" />

        <s:Label id="screenStats" opaqueBackground="#ffffff" 
                 text="
                 Screen  DPI: {Capabilities.screenDPI} — 
                 Resolution: {Capabilities.screenResolutionX}x{Capabilities.screenResolutionY} — 
                 Size: {(Capabilities.screenResolutionX / Capabilities.screenDPI).toFixed(2)}in x {(Capabilities.screenResolutionY / Capabilities.screenDPI).toFixed(2)}in" 
                 maxWidth="{this.width - 4 * this.spacing}"/>
        <s:HGroup width="100%" horizontalAlign="center" verticalAlign="middle">
            <s:Label text="Width:" opaqueBackground="#ffffff"/>
            <s:HSlider id="sliderWidth" width="100%" height="5%" 
                       maximum="{this.width - 2 * this.spacing}" minimum="{this.spacing}" 
                       value="50" />
        </s:HGroup>
        <s:HGroup width="100%" horizontalAlign="center" verticalAlign="middle">
            <s:Label text="Height:" opaqueBackground="#ffffff"/>
            <s:HSlider id="sliderHeight" width="100%" height="5%" 
                       maximum="{this.height - 2 * this.spacing}" minimum="{this.spacing}" 
                       value="50"/>
        </s:HGroup>
    </s:VGroup>

</s:Application> 
```

我强烈建议将其放入一个快速的 Flex 项目中并运行它。基本上，它允许您在舞台上放置一个红色矩形，并将其调整为像素尺寸，然后在屏幕上输出真实尺寸。自从我构建它以来，我还没有测试过它，但它在我的 Nexus 7 和 iPad 3 上总是很有效，而且非常准确。这可能是错误的唯一可能性是设备报告不正确`screenDPI`的 ，Flash 偶尔会这样做（例如，iPad 3 有一段时间的 DPI 不正确）。

# web-services - SOAP 请求的问题

> ID：15273862
> 
> 赞同：3
> 
> 时间：2013-03-07T14:33:25.210
> 
> 标签：web-services, soap, sap, siebel

我正在尝试通过...将 Siebel CRM 与 SAP 系统集成...问题是：siebel 生成的 SOAP 请求给了我一个错误，而如果我使用 SOAP UI 生成 SOAP 请求，它工作正常。以下是生成的错误消息和 SOAP 请求

来自 siebel SOAP 请求的错误：

> CX_ST_MATCH_ELEMENT:.系统预期元素'PiCopyreference'"。(SBL-EAI-04308)

Siebel 生成的 SOAP 请求不成功：-

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <SOAP-ENV:Body>
        <CustomerCreatefromdata1 xmlns="urn:sap-com:document:sap:soap:functions:mc-style">
            <PiCompanydata xmlns="urn:sap-com:document:sap:soap:functions:mc-style"></PiCompanydata>
            <PiCopyreference xmlns="urn:sap-com:document:sap:soap:functions:mc-style">
                <Salesorg xmlns="urn:sap-com:document:sap:soap:functions:mc-style">0001</Salesorg>
                <DistrChan xmlns="urn:sap-com:document:sap:soap:functions:mc-style">01</DistrChan>
                <Division xmlns="urn:sap-com:document:sap:soap:functions:mc-style">01</Division>
                <RefCustmr xmlns="urn:sap-com:document:sap:soap:functions:mc-style">0000000011</RefCustmr>
            </PiCopyreference>
            <PiOptCompanydata xmlns="urn:sap-com:document:sap:soap:functions:mc-style"></PiOptCompanydata>
            <PiOptPersonaldata xmlns="urn:sap-com:document:sap:soap:functions:mc-style">
                <Transpzone xmlns="urn:sap-com:document:sap:soap:functions:mc-style">0000000001</Transpzone>
            </PiOptPersonaldata>
            <PiPersonaldata xmlns="urn:sap-com:document:sap:soap:functions:mc-style">
                <TitleP xmlns="urn:sap-com:document:sap:soap:functions:mc-style">MR</TitleP>
                <Firstname xmlns="urn:sap-com:document:sap:soap:functions:mc-style">FirstN</Firstname>
                <Lastname xmlns="urn:sap-com:document:sap:soap:functions:mc-style">lastN</Lastname>
                <City xmlns="urn:sap-com:document:sap:soap:functions:mc-style">SomeCity</City>
                <PostlCod1 xmlns="urn:sap-com:document:sap:soap:functions:mc-style">7866</PostlCod1>
                <Country xmlns="urn:sap-com:document:sap:soap:functions:mc-style">AT</Country>
                <LanguP xmlns="urn:sap-com:document:sap:soap:functions:mc-style">E</LanguP>
                <Currency xmlns="urn:sap-com:document:sap:soap:functions:mc-style">INR</Currency>
            </PiPersonaldata>
        </CustomerCreatefromdata1>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

成功的 SOAP UI 生成请求：-

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:sap-com:document:sap:soap:functions:mc-style">
    <soapenv:Header/>
    <soapenv:Body>
        <urn:CustomerCreatefromdata1>
            <PiCompanydata/>
            <PiCopyreference>
                <Salesorg>0001</Salesorg>
                <DistrChan>01</DistrChan>
                <Division>01</Division>
                <RefCustmr>0000000011</RefCustmr>
            </PiCopyreference>
            <PiOptCompanydata/>
            <PiOptPersonaldata>
                <Transpzone>0000000001</Transpzone>
            </PiOptPersonaldata>
            <PiPersonaldata>
                <TitleP>MR</TitleP>
                <Firstname>FirstN</Firstname>
                <Lastname>lastN</Lastname>
                <City>SomeCity</City>
                <PostlCod1>7866</PostlCod1>
                <Country>AT</Country>
                <LanguP>E</LanguP>
                <Currency>INR</Currency>
            </PiPersonaldata>
        </urn:CustomerCreatefromdata1>
    </soapenv:Body>
</soapenv:Envelope> 
```

同样在 siebel 中，我使用工作流（不涉及脚本）生成 SOAP 请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:21:34.263

可能是命名空间问题。在 Siebel 外部 IO 中，您可以尝试在 ICField 级别停用名称空间的所有用户属性。

# php - 读取 XML 动态 PHP

> ID：15273870
> 
> 赞同：1
> 
> 时间：2013-03-07T14:33:55.880
> 
> 标签：php, xml, simplexml

在我的 PHP 站点中，我想读取这样的 xml 文件：

```
<?xml version="1.0" standalone="yes"?>
<RETURNDATA lang="it-IT" type="COR" xsi:noNamespaceSchemaLocation="http://xmlv5test.travco.co.uk/trlink/schema/CountryRequestV6Rcv.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <MESSAGE>All Countries details and relevant city details</MESSAGE>
    <DATA COUNTRY_CODE="ABW" CURRENCY_CODE="EUR">
        <COUNTRY_NAME>Aruba</COUNTRY_NAME>
        <CURRENCY_NAME>euro</CURRENCY_NAME>
        <COUNTRY_CITIES>
            <CITY_DATA CITY_CODE="AUA">
                <CITY_NAME>Aruba</CITY_NAME>
            </CITY_DATA>
        </COUNTRY_CITIES>
    </DATA>
    <DATA COUNTRY_CODE="ALB" CURRENCY_CODE="EUR">
        <COUNTRY_NAME>Albania</COUNTRY_NAME>
        <CURRENCY_NAME>euro</CURRENCY_NAME>
        <COUNTRY_CITIES>
            <CITY_DATA CITY_CODE="TIA">
                <CITY_NAME>Tirana</CITY_NAME>
            </CITY_DATA>
        </COUNTRY_CITIES>
    </DATA>
    <DATA COUNTRY_CODE="ARE" CURRENCY_CODE="EUR">
        <COUNTRY_NAME>Emirati Arabi Uniti</COUNTRY_NAME>
        <CURRENCY_NAME>euro</CURRENCY_NAME>
        <COUNTRY_CITIES>
            <CITY_DATA CITY_CODE="DXB">
                <CITY_NAME>Dubai</CITY_NAME>
            </CITY_DATA>
            <CITY_DATA CITY_CODE="AAI">
                <CITY_NAME>Al Ain</CITY_NAME>
            </CITY_DATA>
            <CITY_DATA CITY_CODE="FJR">
                <CITY_NAME>Fujaira</CITY_NAME>
            </CITY_DATA>
            <CITY_DATA CITY_CODE="SSH">
                <CITY_NAME>Sharja</CITY_NAME>
            </CITY_DATA>
            <CITY_DATA CITY_CODE="RKT">
                <CITY_NAME>Ras al-Khaimah</CITY_NAME>
            </CITY_DATA>
            <CITY_DATA CITY_CODE="AUH">
                <CITY_NAME>Abu Dhabi</CITY_NAME>
            </CITY_DATA>
         </COUNTRY_CITIES>
     </DATA>
</RETURNDATA> 
```

我想在每个节点名称中输入 DATA 并取：
COUNTRY_CODE
CURRENCY_CODE
COUNTRY_NAME
CURRENCY_NAME
并将所有国家的城市代码和名称放入一个关联的数组中。

我尝试过使用 SimpleXML，但 XML 是动态的，我想优化我的周期，因为我可以拥有一个非常大的 XML（这只是它的一小部分）。

```
$xml_str = file_get_contents('xml/country.xml');
    $xml = new SimpleXMLElement($xml_str);
    echo $xml->getName(), PHP_EOL;
    foreach($xml as $name => $part) {
       echo "$name: $part", PHP_EOL;
    } 
```

我想创建一个非常优化的循环来获取我的价值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:52:29.477

使用以下样式仅访问`<DATA>`根元素中的子元素：

```
foreach ($xml->DATA as $name => $part) { 
```

Also please check the [SimpleXML Introduction](http://php.net/simplexml.examples-basic.php) it should have some good examples for you showing different ways how to do the basic stuff with SimpleXML. The documentation is pretty good.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:41:46.513

您可以直接使用 XML 解析器，这很可能是最有效的方法

```
set_time_limit(0);
define('__BUFFER_SIZE__', 131072);
define('__XML_FILE__', 'pf_1360591.xml');

function elementStart($p, $n, $a) {
  //handle opening of elements
}

function elementEnd($p, $n) {
  //handle closing of elements
}

function elementData($p, $d) {
  //handle cdata in elements
}

$xml = xml_parser_create();

xml_parser_set_option($xml, XML_OPTION_TARGET_ENCODING, 'UTF-8');
xml_parser_set_option($xml, XML_OPTION_CASE_FOLDING, 0);
xml_parser_set_option($xml, XML_OPTION_SKIP_WHITE, 1);

xml_set_element_handler($xml, 'elementStart', 'elementEnd');
xml_set_character_data_handler($xml, 'elementData');

$f = fopen(__XML_FILE__, 'r');
if($f) {
  while(!feof($f)) {
    $content = fread($f, __BUFFER_SIZE__);

    xml_parse($xml, $content, feof($f));

    unset($content);
  }
  fclose($f);
} 
```

# php - php5-cgi.ini 中的 post_max_size -> 我必须重新启动服务器吗？

> ID：15273872
> 
> 赞同：0
> 
> 时间：2013-03-07T14:34:09.003
> 
> 标签：php

我想更改 post_max_size 限制的大小。我在目录中尝试了一个新的 php5-cgi.ini。在 php5-cgi.ini 中，我将限制设置为 32M。

`phpinfo();`说我的限制现在是 32M 位，当我称 `echo ini_get('post_max_size');` 它回显“8M”并且上传不起作用时。

我现在是否必须重新启动服务器，或者可能是什么问题？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:35:43.240

是的，您必须重新启动 apache 才能使其生效。

# python - 通过正则表达式进行大规模重命名 - python 解决方法

> ID：15273873
> 
> 赞同：1
> 
> 时间：2013-03-07T14:34:13.850
> 
> 标签：python, regex, bash, recursion, rename

我想通过 bash 将许多文件中的所有特殊字符重命名为下划线。因为我发现我无法使用 bash 我想使用 python 来做到这一点。这是我的 bash 代码：

```
#!/bin/bash
find /home/dave/files/ -depth -execdir rename '
s/ä/ae/g;
s/ö/oe/g;
s/ü/ue/g;
s/Ä/Ae/g;
s/Ö/Oe/g;
s/Ü/Ue/g;
s/ß/ss/g;
s/\x3C/_/g; # <
s/\x3E/_/g; # >
s/\x5C/_/g; # \
s/\x3A/_/g; # :
s/\x3F/_/g; # ?
s/\x2A/_/g; # *
s/\x7C/_/g; # |
s/\x22/_/g; # "
' -v "{}" \;
echo "Done" 
```

不幸的是，我对 python 的经验很少，而且我找不到很多类似的例子。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:38:26.807

创建带有翻译的字典：

```
trans = {'ä': 'ae',
         'Ä': 'Ae', ... } 
```

可以使用 访问`trans.get(char, char)`，如果可翻译，则返回已翻译的字符，否则返回字符本身。

使用这一行翻译文件名：

```
new_name = ''.join(trans.get(char, char) for char in old_name) 
```

现在列出您要重命名和应用的所有文件

```
os.rename(old_name, new_name) 
```

# jquery - 使用 Razor 布局将 DropDownList / SelectList 动态添加到 div

> ID：15273877
> 
> 赞同：1
> 
> 时间：2013-03-07T14:34:23.767
> 
> 标签：jquery, html, asp.net-mvc-3, razor

我正在 Razor 布局中构建一个具有 DropDownList 和文本框的表单

在此下方，将有一个“添加另一个”链接。

单击此按钮，我需要向 div 添加另一个 DropDownList 和 TextBox 对（我们称之为#socialNetworks）

目前，我使用这样的 jQuery 来处理“普通”/一次性文本框：

```
 var phoneFieldsIndex = 0;

    $('#addAnotherPhoneLink').click(function () {

        if ($('#phoneFields input:last').val()) {

            phoneFieldsIndex++;

            $('#phoneFields').append('<input name="phone[' + emailFieldsIndex + ']" type="text"><br />');

        }

    }); 
```

这工作正常 - 当单击带有 addAnotherPhoneLink 的 a 元素时，另一个输入框（索引递增）被添加到 div #phoneFields

我正在尝试用我的 DropDownList / Input 对做类似的事情

但是，对于 DropDownList，我目前有：

```
@Html.DropDownList("SocialNetwork", new SelectList(Model.AvailableSocialNetworks))

<input name="Username" type="text" /> 
```

所以，我看到这里有两个问题：

*   **我每次都需要增加 SocialNetwork DropDownList 的索引**
*   **我需要为每个复制 Model.AvailableSocialNetworks 中的值**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:11:00.913

使用 jQuery 复制现有`select`列表之一（或使用服务器提供隐藏的列表作为模板并复制它）。

```
var newSelect = $('#phoneFields select:first-child').clone()
   .attr("name", 'SocialNetwork[' + emailFieldsIndex + ']');

$('#phoneFields').append(newSelect); 
```

我假设索引将与`input`您同时添加的框相同？

# java - 从没有 throws 声明的泛型方法传播异常

> ID：15273881
> 
> 赞同：3
> 
> 时间：2013-03-07T14:34:33.833
> 
> 标签：java, exception

我有一个简单的界面

```
public interface Func<I, O> {
    public O apply(I i);
} 
```

我有一个带有一堆私有（静态）类的类，它们像这样实现该接口

```
import org.json.*;
public static class Baz {
    public static B Qux(String jsonSource) throws JSONException {
        JSONObject m = new JSONObject(jsonSource);
        return new Baz.Foo().apply(m);
    }

    private static class Foo implements Func<JSONObject, B> {
        public B apply(JSONObject f) {
            JSONObject x = f.getJSONObject("bar");
            /* Whatever other code in here */
            return new B(); /* Place-holder */
        }
    }
} 
```

由于几乎所有对 JSONObjects 的操作都需要`JSONException`被捕获，因此编译器会在`JSONObject x = f.getJSONObject("bar");`. 考虑到我可以简单地将该特定应用包装起来`try-catch`并将异常重新抛出给调用者，我尝试了它，如下所示：

```
private static class Foo implements Func<JSONObject, B> {
    public B apply(JSONObject f) {
        try {
            JSONObject x = f.getJSONObject("bar");
            /* Whatever other code in here */
            return new B(); /* Place-holder */
        catch (JSONException e) {
            throw e;
        }
    }
} 
```

然而，有了这个，我现在开始`error: unreported exception JSONException; must be caught or declared to be thrown`指向`throw e;`.

我不明白为什么这不起作用。`apply`正如预期的那样，进一步包装调用并没有做任何新的事情。

我的问题是：

1.  为什么这不起作用？
2.  我该如何解决？

我相信解决方法是让我的界面接受异常类型。我不确定这种语法是否有效，但我想我可以按照以下方式做一些事情

```
public interface FuncEx<I, O, E> {
    public O apply(I i) throws E;
} 
```

有更好的方式吗？我不认为我必须创建一个全新的界面来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:47:14.493

已检查的异常（即不是 RuntimeException 子类的异常，如 JSONException）构成方法签名的一部分。如果您调用一个引发检查异常的方法，您必须处理它，或者声明您自己抛出它。如果您自己抛出一个检查异常（就像您使用 catch/rethrow 代码所做的那样），您仍然必须声明它。

如果您不想声明将其抛出，则可以将其包装在 RuntimeException 中。例如：

```
private static class Foo implements Func<JSONObject, B> {
  public B apply(JSONObject f) {
    try {
        JSONObject x = f.getJSONObject("bar");
        /* Whatever other code in here */
        return new B(); /* Place-holder */
    catch (JSONException e) {
        throw new RuntimeException("Could not get bar", e);
    }
  }
} 
```

关于何时抛出已检查异常而不是 RuntimeExceptions 的想法是多种多样的。对我来说，我的第一个指导原则是，如果您可以合理地期望调用者以有意义的方式响应异常（而不仅仅是重新抛出它），然后将其设为已检查异常。否则将其设为 RuntimeException。

这是一篇关于该主题的优秀文章：http: [//onjava.com/pub/a/onjava/2003/11/19/exceptions.html](http://onjava.com/pub/a/onjava/2003/11/19/exceptions.html)

# android - Android 搜索所有可能的单词。更快的方式？

> ID：15273886
> 
> 赞同：0
> 
> 时间：2013-03-07T14:34:51.360
> 
> 标签：android, search, loops, optimization

我需要优化搜索引擎。所做的是通过像这样进行所有可能的组合来找到所有可能的 2 到 n 字母单词

（对于 2 个字母的单词）w = 任何字母都可以在第一个字母点 + 任何剩下的字母（但第一个字母）用于第二个点；checkIfIsWord(w)

（对于 n 个字母单词） n1 + n2 + n3 + n4 + ... n ；checkIfIsWord(w)

这是有效的，但相当耗时。请帮我想想如何让它更快！

这是代码：

```
String w = "";
    for (int i = 0; i < letters.length; i++)
    {
        for (int j = 0; j < letters.length; j++)
        {
            if (i == j) continue;
            w = "" + (char) letters[i] + (char) letters[j];
            checkIfIsWord(w);
            for (int k = 0; k < letters.length; k++)
            {
                if (i == k || j == k) continue;
                w = "" + (char) letters[i] + (char) letters[j] + (char) letters[k];
                checkIfIsWord(w);
                for (int m = 0; m < letters.length; m++)
                {
                    if (i == m || j == m || j == m || k == m) continue;
                    w = "" + (char) letters[i] + (char) letters[j] + (char) letters[k] + (char) letters[m];
                    checkIfIsWord(w);
                    ...
                }
            }
        }
    } 
```

方法`checkIfIsWord`

```
void checkIfIsWord(String w) 
{ 
    if (w.length() > 2 
        && words.contains(w.toLowerCase()) // (1) 
        && !allWords.contains(w)) 
    { 
       allWords.add(w); 
        runOnUiThread(updateMaxWords); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:50:40.197

如果您有一个预定义字符串列表，正如我从您的评论中收集的那样，您应该反过来检查它。遍历列表中的所有单词并存储符合您条件的单词。这只会具有线性复杂性。

在您的方法中`checkIfIsWord`：

```
void checkIfIsWord(String w) 
{ 
    if (w.length() > 2 
        && words.contains(w.toLowerCase()) // (1) 
        && !allWords.contains(w)) 
    { 
        allWords.add(w); 
        runOnUiThread(updateMaxWords); 
    } 
} 
```

标有 的行将`(1)`检查您当前的单词与`w`当前在 中的所有条目`words`。这就是`.contains()`内部所做的。这意味着在您的结果列表中`allWords`，您只能将值的子集存储在`words`. 更快的实现肯定如下：

```
for(String word : words)
{
    if(word.length() > 2
       && word.length() < n)
    {
        allWords.add(word);
        runOnUiThread(updateMaxWords);
    }
} 
```

现在，如果您说具有 16k 个条目的字符串数组会消耗大量内存，这是正确的。但是您的原始解决方案也有同样的问题，因为标有 的行`(1)`只允许列表中已经存在的单词`words`成为结果集的一部分。如果你想解决这个问题，我建议将这些词移到数据库中，而不是将它们全部保存在 RAM 中。

# android - android 线性规划 lp_solve 库

> ID：15273887
> 
> 赞同：1
> 
> 时间：2013-03-07T14:34:52.527
> 
> 标签：android, linear-programming, lpsolve

有人可以帮我如何`lpsolve55j.jar`在 Android 设备上使用。我尝试像其他所有库一样导入它（将其放在 libs 文件夹中并将其添加到 JavaBuildPath -> Libraries 中），但出现此错误：

```
03-07 15:28:52.910: W/dalvikvm(3421): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Llpsolve/LpSolve;
03-07 15:28:52.910: D/AndroidRuntime(3421): Shutting down VM
03-07 15:28:52.910: W/dalvikvm(3421): threadid=1: thread exiting with uncaught exception (group=0x9e495930)
03-07 15:28:52.910: E/AndroidRuntime(3421): FATAL EXCEPTION: main
03-07 15:28:52.910: E/AndroidRuntime(3421): java.lang.UnsatisfiedLinkError: Couldn't load lpsolve55j from loader dalvik.system.PathClassLoader[dexPath=/data/app/com.app.cutstockan-2.apk,libraryPath=/data/app-lib/com.app.cutstockan-2]: findLibrary returned null
03-07 15:28:52.910: E/AndroidRuntime(3421):     at java.lang.Runtime.loadLibrary(Runtime.java:365)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at java.lang.System.loadLibrary(System.java:535)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at lpsolve.LpSolve.<clinit>(LpSolve.java:275)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at com.app.cutstockan.Calculate.generateEquations(Calculate.java:123)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at com.app.cutstockan.Calculate.<init>(Calculate.java:52)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at com.app.cutstockan.Main$1.onClick(Main.java:37)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at android.view.View.performClick(View.java:4204)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at android.view.View$PerformClick.run(View.java:17355)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at android.os.Handler.handleCallback(Handler.java:725)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at android.os.Looper.loop(Looper.java:137)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at android.app.ActivityThread.main(ActivityThread.java:5202)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at java.lang.reflect.Method.invokeNative(Native Method)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at java.lang.reflect.Method.invoke(Method.java:511)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
03-07 15:28:52.910: E/AndroidRuntime(3421):     at dalvik.system.NativeStart.main(Native Method)
03-07 15:28:54.650: I/Process(3421): Sending signal. PID: 3421 SIG: 9 
```

**编辑**

好的，所以我需要这个来解决不平等系统。有人可以帮我找到可以解决这个问题的图书馆的替代品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:51:31.917

[Apache Commons Math](http://commons.apache.org/proper/commons-math//)是一个纯 Java 库，其中包含例如用于求解线性程序的 Simplex 算法。这个库的二进制文件应该可以在 Android 应用程序中按原样使用，或者应该直接为 Android 构建库。

相关的[单元测试用例](http://svn.apache.org/viewvc/commons/proper/math/trunk/src/test/java/org/apache/commons/math3/optimization/linear/SimplexSolverTest.java?view=markup)充分说明了使用*Apache Commons Math* [SimplexSolver](http://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/optimization/linear/SimplexSolver.html)解决不同类型的较小 LP 问题。

# python - 只计算一次类对象值的pythonic方法

> ID：15273888
> 
> 赞同：1
> 
> 时间：2013-03-07T14:34:52.903
> 
> 标签：python, class-method

我有一个类，我需要访问只能按子类计算的计算值。这种计算并不便宜，而且由于子类有很多实例，我想每个子类只计算一次这个值。

我可以想到两个我不太喜欢的解决方案：

父类将有一个`@classmethod` `start()`将计算值的。这迫使我确定每个类的第一个实例化的精确位置，所以我已经排除了这个选项。

或者，这段代码：

```
class A(object):
    @classmethod
    def _set_cls_attribute(cls):
        if hasattr(cls, 'big_attr'):
            return
        cls.big_attr = heavy_func(cls.VAL)

    def __init__(self):
        self._set_cls_attribute()

class B(A):
        VAL = 'b'

class C(A):
        VAL = 'c'

for _ in range(large_number):
        b = B()
        c = C() 
```

我不喜欢使用`hasattr`...有什么更好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:46:08.967

元类是解决此问题的便捷方法

```
class A_meta(type):
    def __init__(cls, *args):
        type.__init__(cls, *args)
        if hasattr(cls, 'VAL'):
            cls.big_attr = heavy_func(cls.VAL)

class A(object):
    __metaclass__ = A_meta

class B(A):
        VAL = 'b'

class C(A):
        VAL = 'c' 
```

与您的路线相同的另一种方式。这样做的好处是可以推迟对 heavy_func 的调用，直到第一次访问该属性。

```
class A(object):
    def __getattr__(self, attr):
        if attr == 'big_attr':
            self.__class__.big_attr = heavy_func(self.VAL)
        return object.__getattribute__(self, attr) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:49:21.323

没有元类或 hasattr ：

```
class A(object):
   @classmethod
   def attribute(cls):
       v = heavy_func(cls.VAL)
       cls.attribute = lambda k : v
       return v 
```

# sql-server - 非常奇怪的 SQL Server 查询行为

> ID：15273890
> 
> 赞同：0
> 
> 时间：2013-03-07T14:35:08.343
> 
> 标签：sql-server, if-statement

我对 SQL 查询有一个非常奇怪的问题。

```
IF NOT EXISTS ([special query here])
    BEGIN
        SELECT 1;
    END
ELSE
    BEGIN
        SELECT 2;
    END 
```

上面的查询输出：2。

但是，当我用`SELECT 1;`包含创建表等的大型查询替换该部分时，会引发多个错误。SQL Server 怎么可能在`IF`语句的情况下执行代码，而这种情况不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:41:25.910

如果您正在更改模式，解析器将在运行之前查看所有实体是否存在。

```
ALTER TABLE myTable ADD aNewColumn INT 

UPDATE myTable SET aNewColumn = 0 
```

这将产生错误。

只要您不从客户端获取参数，您就可以使用动态 sql。

```
EXEC sp_executesql N'UPDATE myTable SET aNewColumn = 0' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:43:45.680

语法错误是语法错误，无论您是在将运行的条件分支还是不会运行的条件分支中。解析发生在执行之前，并且*必须*成功。

考虑这个用 C++ 编写的类似示例：

```
int main()
{
   if (false) {
       acbukasygdfukasygdaskuygdfas#@4r9837y214r
   }
} 
```

即使它在一个永远不会运行的块内，你也不能写那句废话，因为程序的预期含义不能由编译器确定。

# ember.js - 如何通知父视图子视图中的图像已在emberjs中加载

> ID：15273891
> 
> 赞同：3
> 
> 时间：2013-03-07T14:35:17.093
> 
> 标签：ember.js

当其中一个子视图中的图像完全加载并出现在 dom 中时，如何通知父视图？加载所有图像**后**，我需要测量所有孩子的完整高度。由于测量它`didInsertElement`的高度不正确（它返回没有图像高度的高度）。

所以这就是我的视图结构的样子：

```
{{#view App.ArtistBoxesView}}
  {{#each artist in controller}}
    {{#view App.ArtistBoxView}}
      <div class="artist">
        <div class="thumb">{{styledmediaitem artist.thumb style="thumb"}}</div>
      </div>
    {{/view}}
  {{/each}}
{{/view}} 
```

哪里`styledmediaitem`是一个把手助手，它输出一个`<img src=""/>`到服务器的正确路径。

我想在`ArtistBoxesView`图像（甚至更好：当所有图像）`ArtistBoxView`完全预加载时收到通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:14:35.647

考虑在视图的 didInsertElement fx 中使用[jQuery ImagesLoaded 插件](https://github.com/desandro/imagesloaded)。这样的事情应该可以解决问题：

```
App.ArtistBoxView = Ember.View.extend({ 
  didInsertElement: function() {
    this.$().imagesLoaded( function( $images, $proper, $broken ) {
      console.log( $images.length + ' images total have been loaded' );
      console.log( $proper.length + ' properly loaded images' );
      console.log( $broken.length + ' broken images' );
    });
  }
}); 
```

# image - 用其 4 个邻域的中值替换每个像素

> ID：15273892
> 
> 赞同：-1
> 
> 时间：2013-03-07T14:35:20.320
> 
> 标签：image, matlab, digital

我制作了这段代码，任何人都可以告诉我这是正确的，我该如何验证它。

```
I=imread('cameraman.tif');
[M N]=size(I);
for i=2:M-1
    for j=2:N-1
        x=I(i-1,j);
        y=I(i+1,j);
        z=I(i,j-1);
        zz=I(i,j+1);
        A=[x y z zz];
        J(i,j)=median(A);
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:42:52.200

一般来说，你可以发现它是否达到你期望的唯一方法是尝试它是否有效。@Maroun 已经描述了这一点。

以下是我注意到的一些事情：

*   我相信代码没有技术问题。

*   `I(i,j)`我不是该主题的专家，但如果您在确定中位数时不想考虑中间点，我会感到惊讶。现在你只需检查左右上下。除此之外，您可能需要评估 upleft upright downleft 和 downright。然而，这是一个选择。

*   需要注意的另一件事是，目前您的结果将小于原始图像。可能你想从`J=I`或`J = NaN(size(I));`

# perl - 在 perl 中获取当前语言环境名称

> ID：15273893
> 
> 赞同：4
> 
> 时间：2013-03-07T14:35:19.920
> 
> 标签：perl, posix, locale

我想在 Perl 中使用数千个_sep。我可以使用以下代码获取它

```
use strict;
use POSIX qw(setlocale locale_h LC_ALL);
setlocale(LC_ALL, "fr_FR");
my $lc=localeconv();
print $lc->{thousands_sep}; 
```

之后，我想将语言环境更改回以前的值，但在使用`setlocale`. 我应该从`$ENV{LANG}`哪个 解析它`en_US.UTF-8`？或者有没有其他方法来获取语言环境名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T14:41:59.033

`setlocale()`在没有第二个参数的情况下调用时返回当前语言环境，例如。

```
my $oldlocale = setlocale(LC_ALL); 
```

如果要根据当前环境设置语言环境，请使用空字符串（即。`""`）调用它。

# c# - XMLSerializiation 在 Serializer 的声明处停止

> ID：15273895
> 
> 赞同：1
> 
> 时间：2013-03-07T14:35:22.587
> 
> 标签：c#, xml-serialization

在我的项目中，我使用 a`List<Name>`来存储数据。现在我想`List`通过 XMLSerialization 保存：

```
 XmlSerializer listser = new XmlSerializer(typeof(List<Name>)); //Stops here, jumps back to screen/GUI
                FileStream liststr = new FileStream(xmlSaveFile_Dialog.FileName, FileMode.Create);
                listser.Serialize(liststr, nameslist.list);
                liststr.Close(); 
```

现在该方法只是在声明处停止`XmlSerializer`。（没有例外！）我使用之前完全相同的方法来序列化另一个对象（`List<File>`）。这没有问题。

现在我的代码：名称类：

```
 [Serializable()]
public class Name
{
    //[XmlElement("name")]
    public string name { get; set; }
    //[XmlElement("index")]
    public string index { get; set; }

    public Name(string name, string index)
    {
        this.name = name;
        this.index = index;
    }
} 
```

名单：

```
 [XmlRoot("Units")]
class Namelist
{

    [XmlArray("Unitlist")]

    [XmlArrayItem("Unit", typeof(Name))]
    public List<Name> list;

    // Constructor
    public Namelist()
    {
        list = new List<Name>();
    }

    public void AddNameData(Name item)
    {
        list.Add(item);
    }
} 
```

我主要在构造函数中声明：

```
nameslist = new NameList(); //this a global internal variable 
```

与我对对象所做的完全相同`List<File>`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:38:14.313

`Name`在其当前定义中不是 XML 可序列化的。XML 序列化程序无法处理缺少公共无参数 ctor 的类。因此，您基本上应该将以下 ctor 添加到`Name`：

```
public Name()
{
} 
```

希望这可以帮助。

# facebook-graph-api - Facebook 在发出 GET 请求时返回 HTTP 状态代码 502

> ID：15273900
> 
> 赞同：2
> 
> 时间：2013-03-07T14:35:30.833
> 
> 标签：facebook-graph-api, http-status-codes

我正在尝试使用我的应用程序访问令牌从 Facebook 获取一批 ID 的 GET 请求，并用逗号分隔。

请在电话下方找到：

```
https://graph.facebook.com/?ids=1374186930,100005305471358,1516423103,100003031846875,100002939786624,100004705179654,522691095,100002893804783,100005269178084,1417831236,100004652521769,100003511989378,100002394692546,1646211152,1092931510,100000152985362,100004151552444,100004122698187,100001574061632,100005007584068&access_token=<my_app_access_token>&format=json 
```

对于其中一些请求，Facebook 会间歇性地返回错误，HTTP 状态代码为 502。

我已经尝试使用图形 API 资源管理器以及稍后的应用访问令牌来获取这些 id。它们已被正确提取。我进行了一些研究，但 Facebook 的所有问题都与开放图有关，并且 502 是“Bad Gateway Error”。由于我的不是网络应用程序，我什至无法刷新浏览器再次拨打电话。这是对 Facebook API 的正常调用。

Facebook 返回的错误是 html，其中包含以下消息：“抱歉，出了点问题。我们正在努力尽快解决这个问题。”

既然他们已经给出了这个回复，我想知道是否有人也面临这个问题，如果有人可以告诉我，什么时候会解决这个问题。

这也影响了其他调用，并且在获取中存在延迟。提前致谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-07T14:44:07.507

错误 502 表示消息太大。我不知道确切的最大尺寸。好奇心。你用什么语言？？

再见

# php - 如何一次向元素添加多个属性？

> ID：15273901
> 
> 赞同：0
> 
> 时间：2013-03-07T14:35:31.933
> 
> 标签：php, domdocument

目前我有这段代码，但它很慢而且不合逻辑：

```
$dom = new DOMDocument('1.0', 'utf-8');
$dom->loadHTML($html);
$hrefs = $dom->getElementsByTagName('a');

$attributes = array('data-role' => 'button', 'data-inline' => 'true', 'data-mini' => 'true', 'data-transition' => 'slide');

foreach($hrefs as $href){
    foreach($attributes as $attribute_name => $attribute_value){
        $attribute = $dom->createAttribute($attribute_name);
        $attribute->value = $attribute_value;

        $href->appendChild($attribute);
    }
} 
```

它也可以用 来完成`str_replace('<a', '<a data-role="button" data-inline="true" data-mini="true" data-transition="slide" ', $html);`，它更快（1.0E-5s < 0.22s），但我也在某些链接中产生替换，所以我需要将它作为 DOM。

# makefile - 制作错误：“制作[1]：*** [目录]错误1”

> ID：15273904
> 
> 赞同：1
> 
> 时间：2013-03-07T14:35:36.507
> 
> 标签：makefile, gnu-make

当我尝试在具有一定复杂性的 makefile 上运行“make all”时，出现以下错误：

```
C:\BITCLOUD\BitCloud_PS_SAM3S_EK_1_10_0\BitCloud_PS_SAM3S_EK_1_10_0\Applications\ZAppSi\Dem o\SEDevice>make all 
make -C makefiles/PC -f Makefile_PC_Gcc all APP_NAME=DemoSE
make[1]: Entering directory
'C:/BITCLOUD/BitCloud_PS_SAM3S_EK_1_10_0/BitCloud_PS_SAM3S_EK_1_10_0/Applications/ZAppSi/Demo/SEDevice/makefiles/PC'
A sintaxe do comando está incorrecta.
make[1]: *** [directories] Error 1
make[1]: Leaving directory
'C:/BITCLOUD/BitCloud_PS_SAM3S_EK_1_10_0/BitCloud_PS_SAM3S_EK_1_10_0/Applications/ZAppSi/Demo/SEDevice/makefiles/PC'
make: *** [all] Error 2 
```

哪里行

```
A sintaxe do comando está incorrecta. 
```

翻译成英文的意思是：“命令的语法不正确”

我已经尝试将项目更改为不同的目录，检查文件名中的空格，使用 GNU make 并使用 MinGW make (mingw32-make)，结果与“make”相同。我还检查了 makefile 中包含的所有文件并且它们对应。

我不是makefile专家，所以我寻求帮助。当 make 抛出这种类型的错误时发生的主要问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:56:40.380

可能不会`make`引发此错误，而是 make 执行的命令返回非零退出状态，在这种情况下状态为 1（由于错误 1）；然后顶层`make`停止并出现错误 2。请注意，`make`默认情况下，一旦命令失败，就会停止。由于输出没有显示执行了什么命令，因此无法准确判断出了什么问题。

**编辑**：来自 GNU make 手册：

> ```
>  -d   Print debugging information in addition  to  normal  processing.
>         The  debugging information says which files are being considered
>         for remaking, which file-times are being compared and with  what
>         results,  which files actually need to be remade, which implicit
>         rules are considered and which are  applied---everything  inter‐
>         esting about how make decides what to do.
> 
>    --debug[=FLAGS]
>         Print  debugging  information  in addition to normal processing.
>         If the FLAGS are omitted, then the behavior is the same as if -d
>         was specified.  FLAGS may be a for all debugging output (same as
>         using -d), b for basic  debugging,  v  for  more  verbose  basic
>         debugging,  i for showing implicit rules, j for details on invo‐
>         cation of commands, and m for  debugging  while  remaking  make‐
>         files. 
> ```

我建议运行`make --debug=j`以查看命令。

# java - 按组排序

> ID：15273909
> 
> 赞同：0
> 
> 时间：2013-03-07T14:35:41.353
> 
> 标签：java, sorting, object

我正在努力使用 Java 解决这个问题

这是所需的输入和输出：

```
Input
1,9
1,12
1,7
3,3
2,4
3,2
2,2
output
1 -> 7,9,12
2 -> 2,4
3 -> 2,3 
```

我可以使用`Comparable`and来实现和打印这样的输出`compareTo`

```
1,7,
1,9,
1,12,
2,2,
2,4,
3,2,
3,3 
```

但这不是我想要的答案。有人可以帮助我或给我任何建议吗？这是我实现的代码，但这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:49:22.353

使用地图：

```
Map<Integer, List<Integer>> groups = new TreeMap<Integer, List<Integer>>(); 
```

对于每个输入行，将其拆分为逗号并分隔数字：

```
String[] parts = inputLine.split(',');
int group = Integer.parseInt(parts[0]);
int member = Integer.parseInt(parts[1]); 
```

其中“组”是逗号之前的数字，“成员”是逗号之后的数字。查找组的 Map 条目，如果不存在则创建：

```
List<Integer> list = groups.get(group);
if (list==null) {
  list = new ArrayList<Integer>();
  groups.put(group, list);
} 
```

将“成员”号添加到组中：

```
group.add(member); 
```

输出留作练习:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:50:34.603

假设你的字符串是`String[]`这样的：

```
public static void main(String[] args) {
    final Scanner sc = new Scanner(System.in);
    final List<String> list = new ArrayList<String>();
    while (sc.hasNext()) {
        final String next = sc.next();
        if ("print".equals(next)) {
            break;
        }
        list.add(next);
    }
    printGrouped(list);
}

public static void printGrouped(Collection<String> args) {
    final TreeMap<Integer, Set<Integer>> map = new TreeMap<Integer, Set<Integer>>() {
        @Override
        public Set<Integer> get(Object key) {
            Set<Integer> list = super.get(key);
            if (list == null) {
                list = new TreeSet<Integer>();
                put((Integer) key, list);
            }
            return list;
        }
    };
    for (final String string : args) {
        final String[] split = string.split(",");
        final Set<Integer> list = map.get(Integer.parseInt(split[0]));
        list.add(Integer.parseInt(split[1]));
    }
    for (final Entry<Integer, Set<Integer>> entry : map.entrySet()) {
        final String valueString = entry.getValue().toString();
        System.out.println(entry.getKey() + " -> " + valueString.substring(1, valueString.length() - 1));
    }
} 
```

输入：

```
1,9
1,12
1,7
3,3
2,4
3,2
2,2
print 
```

输出：

```
1 -> 7, 9, 12
2 -> 2, 4
3 -> 2, 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:58:08.023

你可以使用这样的东西：

```
Map<Integer, Set<Integer>> result = new TreeMap<Integer, Set<Integer>>();

public void parseInput(int key, int value) {
    if(result.get(key) == null) { // if you have not encountered the first integer yet, add it to your map.
        result.put(key, new TreeSet<Integer>() {{ add(value); }});
    } else { // otherwise, just add your value to your existing set. The set will take care of duplicates.
        result.get(key).add(value);
    }
} 
```

# spring - 如何在多个项目中共享 JSP 页面？

> ID：15273911
> 
> 赞同：0
> 
> 时间：2013-03-07T14:35:43.663
> 
> 标签：spring, jsp, spring-mvc

我正在尝试找到一种在多个页面中共享 JSP 页面的方法？

例如我们有以下项目：

```
commmon
projectA
projectB 
```

通用项目包含所有的 CSS、图像和两个 JSP 页面。header.jsp 和 footer.jsp，我公司的所有项目都将使用它们。

我们尝试添加：

```
<jsp:include page="/common/webapphead.jsp" /> 
```

到 projectA 和 projectB 但它仍然找不到标题，但如果我转到

```
http://127.0.0.1:8080/common/webapphead.jsp 
```

该页面确实显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:46:03.407

一种简单的方法是使用 JSTL。使用 c:import 标签。

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
<c:import url="http://127.0.0.1:8080/common/webapphead.jsp" /> 
```

或者，如果您可以启用跨上下文访问，那么您可以使用

```
<c:import url="/webapphead.jsp" context="/common" /> 
```

看 [http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Common_Attributes](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Common_Attributes)

# sql-server - “删除未映射的表和视图”对话框的替代方法有什么作用？

> ID：15273912
> 
> 赞同：1
> 
> 时间：2013-03-07T14:35:46.890
> 
> 标签：sql-server, entity-framework, visual-studio-2012

我有一个连接到 SQL Server 数据库的实体框架模型。我想从模型中删除一个表，而不是从数据库中。所以我在模型中的表上按删除并得到一个对话框：

```
Delete Unmapped Tables and Views

The following tables and views in the store model will no longer be mapped. Do you want them deleted?

Yes No Cancel 
```

根据[msdn](http://msdn.microsoft.com/en-us/library/vstudio/dd673936%28v=vs.100%29.aspx "微软")：

```
Yes: In addition to the objects in the conceptual model that you selected for deletion, all unmapped objects (shown in the dialog box display) are deleted from the storage model. This includes objects in the storage model that were already unmapped, not just objects that have become unmapped as a result of the deleting the selected conceptual model objects.

No: No objects will be deleted from the storage model. Only the objects in the conceptual model that you selected will be deleted.

Cancel: The operation is canceled. No objects in the conceptual model or storage model will be deleted. 
```

**因此，如果我正确理解这一点，是和否都会从模型中删除表，而取消不会？**

**是否也不是一个安全按钮，因为它不会从数据库中删除表或删除其数据？**

我正在运行 Visual Studio 2012、C#、.NET 4.5 和 SQL Server 2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:47:58.883

以下是它们的真正含义：

是 - 从设计器和 sql 数据库中删除。

否 - 从设计器中删除

取消 - 不删除任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-26T16:08:44.773

接受的答案是正确的一半。Yes 不会删除底层的 sql 表。

[![在此处输入图像描述](../Images/48f78ea4d80a8f033b0df21b4efbe3a7.png)](https://i.stack.imgur.com/VrHHS.png)

*   否 - 从图表中删除，但不从 .Store 存储模型中删除：

[![在此处输入图像描述](../Images/8e3d7ab812e8b398e7e042c5c4fd7ede.png)](https://i.stack.imgur.com/Ixqy4.png)

*   是 - 从图表和 .Store 存储模型中删除。不是实际的 Db 表。
*   我在对表结构进行重大更改时经常这样做，即更改列名等。选择是，然后从数据库更新模型，然后重新添加表。

# ruby - Jira Rest API - 如何登录

> ID：15273915
> 
> 赞同：1
> 
> 时间：2013-03-07T14:35:59.857
> 
> 标签：ruby, rest, jira, jira-rest-java-api

我一直在阅读本指南：[JIRA API 文档](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Basic+Authentication#JIRARESTAPIExample-BasicAuthentication-Simpleexample)，如果您使用 gmail 登录 Jira，似乎无法弄清楚如何简单地对 API 进行身份验证。我希望在我的 ruby​​ 应用程序中使用 REST API 来链接 github 和 jira

编辑：代码：

```
 uri = URI.parse("https://<address>.jira.com/rest/api/2/issue/<issue-name>")
    http = Net::HTTP.new(uri.host, uri.port)
    http.use_ssl = true
    http.verify_mode = OpenSSL::SSL::VERIFY_NONE
    request = Net::HTTP::Get.new(uri.request_uri)
    request["user"] = "<username>"
    request["password"] = "<password>"
    @jira_response = http.request(request) 
```

用上面的代码；我收到 HTTP 未经授权的响应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:27:58.033

通过使用解决；

```
request.basic_auth 'username', 'password'
request["Content-Type"] = "application/json" 
```

代替：

```
request["user"] = "<username>"
request["password"] = "<password>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T12:55:43.837

不久前，我写了一个使用 Jira api 的小型骨架应用程序。它可能对您有帮助，也可能没有帮助。请参阅[https://github.com/vaneyckt/SimpleJira](https://github.com/vaneyckt/SimpleJira)。

# ajax - Blueimp jQuery 文件上传按钮触发

> ID：15273916
> 
> 赞同：2
> 
> 时间：2013-03-07T14:36:00.537
> 
> 标签：ajax, jquery, file-upload

这听起来很简单，但我找不到 Blueimp jQuery File Upload 的代码示例，它使浏览器的默认文件输入框（显示“选择文件...”和浏览的那个）元素隐藏，而是通过按钮触发对话框. 有人可以告诉我如何做到这一点吗？

我尝试将输入元素放在按钮元素中，如[本演示](http://blueimp.github.com/jQuery-File-Upload/)中所示，但它在 Firefox 上不起作用。有没有办法使用 jQuery 来触发对话框。我不太确定为什么这在 Chrome 中有效，除了“浏览”按钮恰好与 Chrome 中的按钮对齐但在 FF 中没有。

这就是我想要做的事情：

`<button id="upload-button" class="btn btn-primary btn-large" type="button"> <input type="file" name="image" id="fileupload" multiple data-url=""/> Upload Images
</button><br>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-14T23:58:21.183

将按钮元素更改为跨度（并将其样式设置为按钮），就像在插件的[演示页面上](http://blueimp.github.io/jQuery-File-Upload/)一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:46:34.460

听起来你在这里问了几个问题，所以我会尝试解决它们。

1.  [隐藏默认输入 - 在这里](http://blueimp.github.com/jQuery-File-Upload/)的示例页面上，您可以看到他的 CSS 负责隐藏默认文件输入元素：

    `.fileinput-button input { cursor: pointer; direction: ltr; font-size: 23px; margin: 0; opacity: 0; position: absolute; right: 0; top: 0; transform: translate(-300px, 0px) scale(4); }`

2.  如何触发 - 至少有两种方法可以做到这一点：

    2.1[像这样的](https://github.com/blueimp/jQuery-File-Upload/wiki/API)基本实例化：`$('#fileupload').fileupload();`

    2.2 务实地通过绑定到另一个事件，在本例中为更改事件：

    `$('#some-file-input-field').bind('change', function (e) { $('#fileupload').fileupload('add', { fileInput: $(this) }); });`

    该示例也可以在[API上找到](https://github.com/blueimp/jQuery-File-Upload/wiki/API)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-27T04:25:30.987

一旦选择文件将开始上传

```
$('#fileupload').fileupload({
    dataType: 'json',
    url: '<?php echo base_url(); ?>asset/applicant/blueimp/server/php/',
    add: function (e, data) {
        //Renaming files name
        var count = data.files.length;
        var i;
        for (i = 0; i < count; i++) {
            data.files[i].uploadName =
                Math.floor(Math.random() * 1000) + '_' + data.files[i].name;
        }
        data.submit();
    }
}); 
```

触发按钮上传文件

```
$('#fileupload').fileupload({
        dataType: 'json',
        url: '<?php echo base_url(); ?>asset/applicant/blueimp/server/php/',
        add:function (e, data) {
           $("#uploadBtn").off('click').on('click',function () {           
             data.submit();
           });
        }
    }); 
```

尝试将插件保留在 jquery 文档就绪函数中，以避免出现意外的 jquery 错误，如下所示

```
$(document).ready(function () {
    $('#fileupload').fileupload({
      //....
    });
}); 
```

# haskell - Haskell 如何隐藏数据构造函数？

> ID：15273923
> 
> 赞同：12
> 
> 时间：2013-03-07T14:36:17.657
> 
> 标签：haskell, constructor, system

我探索了 System.Random.StdGen 并在源代码中看到了这段代码。

```
data StdGen = StdGen Int32 Int32 
```

似乎模块也导出了 StdGen。

```
module System.Random (

    RandomGen(next, split, genRange)

    , StdGen

    ... 
```

但是，为什么我不能在我的代码中这样做，比如，

```
Prelude System.Random> StdGen 1 2

Not in scope: data constructor `System.Random.StdGen'** 
```

另一方面，我可以做到这一点，

```
module F (Foo) where

    import GHC.Int

    data Foo = Foo GHC.Int.Int32 GHC.Int.Int32 deriving (Show) 
```

和

```
Prelude> Foo 1 2

Foo 1 2 
```

有人能告诉我这个数据构造函数是如何隐藏的吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T14:53:48.690

这里有两点需要理解。导出语法和编译值和解释值之间 GHCi 行为的差异。

### 导出语法

使用此语法从模块导出

```
module System.Random (
    -- ...
    , StdGen
    -- ... 
```

告诉 GHC 只导出数据类型，而不是构造函数（即使两者具有相同的名称）。如果要导出构造函数，可以在数据类型名称后的括号内显式列出，如下所示：

```
 StdGen(StdGen) 
```

或者，您可以导出具有所有构造函数的数据类型，如下所示：

```
 StdGen(..) 
```

### GHCI 行为

此外，GHCi 在加载*解释*模块时，始终允许您查看模块顶层可见的所有实体，即使它们被导出列表隐藏。`Foo`这是为了方便开发和调试，也是你可见的原因。

这种“一切”可见的模式通过`*`在 GHCi 提示符的模块名称前面放置一个来反映。如果有`*`，则一切都是可见的，如果没有，则导出的实体是可见的。

使用`:m`命令在作用域中添加或删除模块时，您可以选择是否要在`*`-form 中添加模块。

*但是*对于已*编译*的模块（以及`System.Random`通常已编译的库模块），- `*`form 不可用，因此对于这些，您将始终处于导出列表受到尊重的情况。

有关 GHCi 作用域行为的完整描述，请参阅[文档](http://www.haskell.org/ghc/docs/latest/html/users_guide/interactive-evaluation.html#ghci-scope)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T14:41:06.787

如果您[查看 sources](http://hackage.haskell.org/packages/archive/random/1.0.1.1/doc/html/src/System-Random.html#RandomGen)，您会看到以下内容：

```
module System.Random
    (
    -- stuff...
    , StdGen
    -- even more stuff...
    ) 
```

此语法意味着仅导出*类型*，而不导出其构造函数。如果你也想导出构造函数，你会这样做：

```
module System.Random
    ( StdGen(..)
    -- ...
    ) 
```

# php - 需要帮助将我的表单数据提交到数据库

> ID：15273928
> 
> 赞同：0
> 
> 时间：2013-03-07T14:36:36.707
> 
> 标签：php, html, mysql, phpmyadmin, xampp

好的，让我先说我是一个业余爱好者，因此非常感谢您的所有帮助。

好的，我有一个名为“skills.php”的表单，在此表单上，您输入以下字段“Skills_ID、Employee_ID、First_name、Last_name 和 Skill”。我使用过 java，所以当您选择employee_ID 时，名称字段会更改为是哪个员工（链接到员工表）。

但是，由于我添加了此功能，我无法将表单数据保存到我的数据库中。可能我在实现java函数的时候不小心删掉了一行代码。有人可以帮我弄清楚吗？下面是我的表格'Skill.php'：

```
<html>

<?php
// Connecting to database
$pdo = new PDO("mysql:host=localhost;dbname=hrmwaitrose;charset=utf8", "root", "");
?>
<html>
<head>
        <link type="text/css" rel="stylesheet" href="style.css"/>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> <!-- Online Jquery -->
        <title>Skill</title>
    </head>

    <body>
        <div id="content">
            <h1 align="center">Add Employee Skill</h1>

            <form action="insertskill.php" method="post">
                <div>
                    <p>
                        Skill ID:
                        <input type="text" name="Training_ID">
                    </p>
                    <p>
                        Employee ID:
                        <select id="Employee_ID">
                            <option value="">Select one</option>
                            <?php
                            $st = $pdo->prepare("SELECT Employee_ID FROM Employee");
                            $st->execute();
                            $rows = $st->fetchAll(PDO::FETCH_ASSOC);
                            foreach ($rows as $row) {
                                ?><option value="<?php echo $row ['Employee_ID']; ?>"><?php echo $row ['Employee_ID']; ?></option><?php
                            }
                        ?>
                        </select>
                    <p>
                        First name:
                        <input type="text" name="First_name" id="First_name">
                    </p>
                    <p>
                        Last name:
                        <input type="text" name="Last_name" id="Last_name">
                    </p>
                    <p>
<p>Skill: <select name="Skill">
  <option value="">Select...</option>
  <option value="Checkouts">Checkouts</option>
  <option value="Fresh goods">Fresh goods</option>
  <option value="Dry goods">Dry goods</option>
  <option value="Fruit & Veg">Fruit & Veg</option>
  <option value="Operations">Operations</option>
</select>
</p>
                    <input type="submit">
                    <INPUT Type="BUTTON" VALUE="Back" ONCLICK="window.location.href='index.html'">
            </form>
        </div>
    <script type="text/javascript">
        $(function() { // This code will be executed when DOM is ready
            $('#Employee_ID').change(function() { 
                var $self = $(this); // jQuery object with the select inside
                $.post("insertskill.php", { Employee_ID : $self.val()}, function(json) {
                    if (json && json.status) {
                        $('#First_name').val(json.name);
                        $('#Last_name').val(json.lastname);
                    }
                })
            });
        })
    </script>
    </body>
</html> 
```

这是按下提交按钮“insertskill.php”时使用的代码：

```
<?php
$pdo = new PDO("mysql:host=localhost;dbname=hrmwaitrose;charset=utf8", "root", "");

header("Content-Type:application/json; Charset=utf-8");

$st = $pdo->prepare("SELECT First_name, Last_name FROM Employee WHERE Employee_ID = :employee_id");
$st->execute(array ('employee_id' => $_POST['Employee_ID']));
$data = $st->fetch(PDO::FETCH_ASSOC);

echo json_encode(array ('status' => true, 'name' => $data ['First_name'], 'lastname' => $data ['Last_name']));
?> 
```

只是通过查看这段代码，我很确定我可能会不小心删除了将其插入数据库的编码，但是我不知道如何修复它:(有人可以帮忙吗？非常感谢！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:53:46.383

在`"insertskill.php"`第 6 行：

```
$st = $pdo->prepare("SELECT First_name, Last_name FROM Employee WHERE Employee_ID = :employee_id"); 
```

您正在执行`SELECT`查询（读取），听起来更像是您想要`INSERT`查询（写入）。

在您的`INSERT`情况下，声明将类似于：

```
$st = $pdo->prepare("INSERT INTO Employee (Training_Id,Employee_Id,First_Name,Last_Name,Skill) VALUES (:training_id,:employee_id,:first_name,:last_name,:skill)")

$st->execute(array(':training_id' => $training_id, ':employee_id' => ...)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:59:25.310

首先，小心。[`Java is not JavaScript`](http://nakedsecurity.sophos.com/2013/01/16/java-is-not-javascript-tell-your-friends/)！

你是对的，你删除了 INSERT 行。网上有几篇关于如何做到这一点的文章。[这是一个](http://www.phpeveryday.com/articles/PDO-Insert-and-Update-Statement-Use-Prepared-Statement-P552.html)。只需谷歌`PDO Insert`搜索更多结果。

您应该将这些 INSERT 命令放入您的`insertskill.php`文件中，并使用您提供的代码创建另一个可能`fetchName.php`或类似的命令，以根据员工的 id 返回其名字和姓氏，并在您的 JavaScript`$.change()`函数中使用它。`insertskill.php`调用文件来获取数据是没有意义的。

而且您忘记在命令中指定您期望使用 JSON `$.post()`。改为这样做：

```
$.post("insertskill.php", { Employee_ID : $self.val()}, function(json) {
    if (json && json.status) {
        $('#First_name').val(json.name);
        $('#Last_name').val(json.lastname);
    }
}, 'json'); // Here! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:01:55.253

首先要说的是您没有使用Java。您正在使用 JavaScript（实际上是 ECMAScript，它与 Java 非常不同。

接下来，你是对的，现在根本没有 INSERT 语句，你需要写一个来插入你想要插入的任何数据。

但是，您还需要以某种方式区分何时为 Ajax 请求调用 insertskill.php（以获取表单的名称）和何时调用它以插入数据。因此，在您的 Javascript（我猜是 jQuery）请求中，您可以将 url 更改为：

```
$.post("insertskill.php?ajax" 
```

然后在 insertskill.php 做：

```
if(isset($_GET['ajax'])) {
  header("Content-Type:application/json; Charset=utf-8");
  $st = $pdo->prepare("SELECT First_name, Last_name FROM Employee WHERE Employee_ID = :employee_id");
  $st->execute(array ('employee_id' => $_POST['Employee_ID']));
  $data = $st->fetch(PDO::FETCH_ASSOC);
  echo json_encode(array ('status' => true, 'name' => $data ['First_name'], 'lastname' => $data ['Last_name']));
  } 
else {
  // Do the insert statement stuff...
  } 
```

# javascript - 使单选按钮与动态文本插入一致

> ID：15273930
> 
> 赞同：1
> 
> 时间：2013-03-07T14:36:37.750
> 
> 标签：javascript, jquery, html, mobile, radio

我正在构建一个由单选按钮组成的表单。我在单选按钮旁边的测试是动态的，这意味着它是根据之前的用户输入从 sql 数据库加载的。我正在使用 jQuery 将测试插入 HTML，但是，当我这样做时，jQuery Mobile GUI 停止正常工作。问题是什么。这是代码。

HTML 文件：

```
<input class="optionsBox" type='radio' name='answer' id="option-1" checked="checked">
<label for="option-1" id="option-label-1"></label> 
```

请记住，其中有五个输入和标签标签，其 id 为 option2、option3 等以及 option-label-2、option-label-3 等。这就是 JavaScript 中有 for 循环的原因。

JAVASCRIPT 文件：

```
for(rowNum=1; rowNum <= 5; rowNum++) {
    $("#option-"+rowNum).val(options[rowNum]);
    $("#option-label-"+rowNum).text(options[rowNum]);
} 
```

现在的问题是 jQuery Mobile 单选按钮消失了，只剩下文本了。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:49:08.740

我找到了解决方法。您可以使用 jQuery 网格功能将两个项目放在同一行中。[http://view.jquerymobile.com/1.3.0/docs/widgets/grids/](http://view.jquerymobile.com/1.3.0/docs/widgets/grids/)。

我做了一个两列五行的网格。一列是单选按钮，另一列是答案。这些行用于分隔单选按钮和答案。

# java - iText – HTML 到 PDF – 图像不显示在 PDF 中

> ID：15273933
> 
> 赞同：21
> 
> 时间：2013-03-07T14:36:43.600
> 
> 标签：java, itextsharp, itext, relative-path, html-to-pdf

我有一个带有文本、图像的 html 页面，我正在将 HTML 内容解析为 iText 以生成 PDF。在生成的 PDF 中，未显示包含的图像，仅显示文本。

如果我通过像**D:/Deiva/CRs/HTMLPage/article-101-horz.jpg**这样的绝对路径，那么图像将被打印出来。但是如果我尝试从服务器打印图像

`http://localhost:8085/content/dam/article-101-h1.jpg or http://www.google.co.in/intl/en_ALL/images/logos/images_logo_lg.gif`

那么它不会被打印在 PDF 中。

**注意：**我使用**itextpdf-5.2.1.jar**来生成 PDF。

**我的 HTML 代码（Article.html）：**

```
<html>
   <head>
   </head>
   <body>   
     <p>Generate PDF with image using iText.</p>
     <img src="http://localhost:8085/content/dam/article-10-h1.jpg"></img>
     <img src="http://www.google.co.in/intl/en_ALL/images/logos/imgs_logo_lg.gif"></img>
     <img class="right horz" src="D:/Deiva/CRs/HTMLPage/article-101-horz.jpg"></img>
   </body>
</html> 
```

**我正在使用以下 java 代码生成 PDF：**

```
private void createPDF (){

  String path = "D:/Deiva/Test.pdf";
  PdfWriter pdfWriter = null;

  //create a new document
  Document document = new Document();

  try {

   //get Instance of the PDFWriter
   pdfWriter = PdfWriter.getInstance(document, new FileOutputStream(path));

   //document header attributes
   document.addAuthor("betterThanZero");
   document.addCreationDate();
   document.addProducer();
   document.addCreator("MySampleCode.com");
   document.addTitle("Demo for iText XMLWorker");
   document.setPageSize(PageSize.LETTER);

   //open document
   document.open();
   InputStream is = new             FileInputStream("D:/Deiva/CRs/Oncology/Phase5/CR1/HTMLPage/Article.html");

   // create new input stream reader
   InputStreamReader isr = new InputStreamReader(is);

   //get the XMLWorkerHelper Instance
   XMLWorkerHelper worker = XMLWorkerHelper.getInstance();
   //convert to PDF
   worker.parseXHtml(pdfWriter, document, isr);

   //close the document
   document.close();
   //close the writer
   pdfWriter.close();

  } catch (Exception e) {
      e.printStackTrace();
  }

 } 
```

请提出以 PDF 格式显示图像的解决方案。

提前致谢。

天神

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-15T11:55:08.323

我认为您可以使用 Servlet 轻松查看图像。如何为此编写一个 servlet 在[这里](http://balusc.blogspot.com/2007/04/imageservlet.html)

这是为您提供的示例调度程序。只需根据需要编辑所需的位置

```
@Controller
public class ImageController extends DispatcherServlet {

    private static final int DEFAULT_BUFFER_SIZE = 10240; // 10KB.

    // Properties ---------------------------------------------------------------------------------

    private String imagePath;

   @RequestMapping(value="images/{imageId:.+}", method = RequestMethod.GET)
   public @ResponseBody void getImage(@PathVariable String imageId,HttpServletRequest request, HttpServletResponse response){
        String requestedImage = request.getPathInfo();
         this.imagePath ="image path in server here";

         if (requestedImage == null) {
             // Do your thing if the image is not supplied to the request URI.
             // Throw an exception, or send 404, or show default/warning image, or just ignore it.
             try {
                response.sendError(HttpServletResponse.SC_NOT_FOUND);
             }catch(IOException ioException){
                logger.error("error image path incorrect:{}", ioException);

            } // 404.
             return;
         }

         File image=null;
        try {
            image = new File(imagePath, URLDecoder.decode(imageId, "UTF-8"));
        } catch (UnsupportedEncodingException unsupportedEncodingException) {
            logger.error("error image can not decode:{}", unsupportedEncodingException);

        }

         // Check if file actually exists in filesystem.
         if (!image.exists()) {
             // Do your thing if the file appears to be non-existing.
             // Throw an exception, or send 404, or show default/warning image, or just ignore it.
             try {
                response.sendError(HttpServletResponse.SC_NOT_FOUND);
             }catch(IOException ioException){
                logger.error("error image does not exists:{}", ioException);

            } // 404.
             return;
         }

         // Get content type by filename.
         String contentType = "jpeg";
         contentType="image/"+contentType;

         // Init servlet response.
         response.reset();
         response.setBufferSize(DEFAULT_BUFFER_SIZE);
         response.setContentType(contentType);
         response.setHeader("Content-Length", String.valueOf(image.length()));
         response.setHeader("Content-Disposition", "inline; filename=\"" + image.getName() + "\"");

         // Prepare streams.
         BufferedInputStream input = null;
         BufferedOutputStream output = null;

         try {
             // Open streams.
             try {
                input = new BufferedInputStream(new FileInputStream(image), DEFAULT_BUFFER_SIZE);
            } catch (FileNotFoundException e) {

                logger.error("error creating file input stream to the image file :{}", e);

            }
             try {

                 output = new BufferedOutputStream(response.getOutputStream(), DEFAULT_BUFFER_SIZE);

            } catch (IOException e) {

                logger.error("error creating output stream to the http response :{}", e);

            }

             // Write file contents to response.
             byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
             int length;
             try {
                while ((length = input.read(buffer)) > 0) {
                     output.write(buffer, 0, length);
                 }
            } catch (IOException e) {

                logger.error("error writing the image file to outputstream :{}", e);

            }
         } finally {
             // Gently close streams.
             close(output);
             close(input);
         }
     }

     // Helpers (can be refactored to public utility class) ----------------------------------------

private  void close(Closeable resource) {
    if (resource != null) {
        try {
            resource.close();
        } catch (IOException e) {
            // Do your thing with the exception. Print it, log it or mail it.
            logger.error("error closing resources:{}", e);
        }
    }
}

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-07T14:27:40.323

以下是一些示例：[https ://developers.itextpdf.com/examples/xml-worker-itext5/html-images](https://developers.itextpdf.com/examples/xml-worker-itext5/html-images)

```
htmlContext.setImageProvider(new AbstractImageProvider() {
    public String getImageRootPath() { return "src/main/resources/html/"; }
}); 
```

如果您正在解析的 HTML 文件存储在与工作目录不同的目录中，则 iText 将无法创建 Image 对象。我们必须提供一个 ImageProvider 接口的实现，告诉 iText 如果遇到 img 标签该怎么做。该接口有以下方法：

```
Image retrieve(final String src);
String getImageRootPath();
void store(String src, Image img);
void reset(); 
```

您可以编写自己的类来实现这四个方法，也可以将 AbstractImageProvider 子类化。最好采用后者。XML Worker 将使用 AbstractImageProvider 类的 store() 方法来缓存 Map 中遇到的所有 Image 对象。当为具有相同 src 的图像调用 retrieve() 方法时，这些对象将被重用。如果您不缓存图像，您的 PDF 将变得臃肿。相同的图像位和字节将多次写入 PDF。reset() 方法清除缓存；它在 ImageProvider 被克隆时使用。最后，没有实现 getImageRootPath() 方法。

如果您正在解析的 HTML 文件存储在与工作目录不同的目录中，则 iText 将无法创建 Image 对象。我们必须提供一个 ImageProvider 接口的实现，告诉 iText 如果遇到 img 标签该怎么做。该接口有以下方法：

您可以编写自己的类来实现这四个方法，也可以将 AbstractImageProvider 子类化。最好采用后者。XML Worker 将使用 AbstractImageProvider 类的 store() 方法来缓存 Map 中遇到的所有 Image 对象。当为具有相同 src 的图像调用 retrieve() 方法时，这些对象将被重用。如果您不缓存图像，您的 PDF 将变得臃肿。相同的图像位和字节将多次写入 PDF。reset() 方法清除缓存；它在 ImageProvider 被克隆时使用。最后，没有实现 getImageRootPath() 方法。您必须自己实现它，就像在以下代码段中所做的那样：

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-12T15:21:23.663

要使用 Itext 显示图像，您必须更改有关图像提供程序的默认配置 喜欢它：我从[http://demo.itextsupport.com/xmlworker/itextdoc/flatsite.html执行此操作](http://demo.itextsupport.com/xmlworker/itextdoc/flatsite.html)

```
public class HtmlToPDF1 {
  public static void main(String ... args ) throws DocumentException, IOException {    

      FontFactory.registerDirectories();
      Document document = new Document();
      PdfWriter writer = PdfWriter.getInstance(document,
          new FileOutputStream("src/test/ressources/mypdf.pdf"));
      document.open(); HtmlPipelineContext htmlContext = new HtmlPipelineContext(null);
      htmlContext.setTagFactory(Tags.getHtmlTagProcessorFactory());
      htmlContext.setImageProvider(new AbstractImageProvider() {
          public String getImageRootPath() {
              return "/home/fallphenix/workspace/JAVA/JEE/testHTMLtoPDF/src/test/ressources/";
          }
      }); CSSResolver cssResolver =
            XMLWorkerHelper.getInstance().getDefaultCssResolver(true);
        Pipeline<?> pipeline =
            new CssResolverPipeline(cssResolver,
                    new HtmlPipeline(htmlContext,
                        new PdfWriterPipeline(document, writer)));
        XMLWorker worker = new XMLWorker(pipeline, true);
        XMLParser p = new XMLParser(worker);
        p.parse(new FileInputStream("src/test/ressources/other.html"));
        document.close();
          System.out.println("Done.");        
    }} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-12T07:52:03.717

I also faced to same issue..

but it was working with the image absolute path. it seems not working with remote path. What id did here is save the image in temp location of file system and generates pdf , finally delete the image file from temp location.

```
<img src="/home/jboss/temp/imgs/img.png"/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-09T15:49:45.617

尝试将图像放入内存或字节流对象，然后将该图像对象转换为 itextsharp 图像。

探索重载`iTextSharp.text.Image`

**编辑：**

***虽然代码是用 C# 编写的，但它可能会对您有所帮助。***

从本地驱动器获取图像：

```
Bitmap image1;
image1 = new Bitmap(@"C:\Documents and Settings\All Users\" 
            + @"Documents\My Music\music.jpeg", true); 
```

**注意：：**如果您的应用程序文件夹中有图像，那么我们有一些函数可以在 C# 中获取它们的本地文件路径。不知道Java。来自外部站点的图像可以下载为

```
System.Net.WebClient client = new WebClient();
client.DownloadFile(imageURL, localPathname);   // look into java to get local path 
```

现在将此字节流转换为图像对象

```
MemoryStream imgMemoryStream = new MemoryStream(imgByteArray);
Image myImage = Drawing.Image.FromStream(imgMemoryStream); 
```

现在从它创建一个 iTextSharp 图像对象并将其添加到您的文档中

```
iTextSharp.text.Image pic = iTextSharp.text.Image.GetInstance(myImage, System.Drawing.Imaging.ImageFormat.Jpeg);
document.Add(pic); 
```

希望这对您有所帮助。

# iphone - 在浏览器中打开链接或打开应用程序

> ID：15273940
> 
> 赞同：0
> 
> 时间：2013-03-07T14:36:51.973
> 
> 标签：iphone, url, iframe

我做了一个iphone应用程序。应用程序调用网页并显示内容。服务器端编码在 php.ini 中。问题是我在网页中有几个链接。当我单击网页中的链接时，它会打开整个页面，我无法再回到原来的位置。

我尝试了 iframe，但并非所有网站都支持它，例如 google、facebook。我正在寻找以某种方式在浏览器中打开链接或启动另一个应用程序，例如 facebook 的应用程序。我已经非常彻底地寻找解决方案，但运气不佳。

任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:23:50.497

要为 UIWebView 实现导航，您可以执行以下操作：创建两个按钮，一个用于在历史中前进，一个用于返回。这是您必须包含的按钮的代码：

```
//For going forward
if (yourWebView.canGoForward)
{
   yourWebView.goForward();
}

//For going back
if (yourWebView.canGoBack)
{
   yourWebView.goBack();
} 
```

# r - R中的两个列表的总和

> ID：15273941
> 
> 赞同：13
> 
> 时间：2013-03-07T14:36:54.270
> 
> 标签：r, list, sum

有没有一种简单的方法可以在列表列表中进行简单计算？

```
x <- list(a=list(1:4),b=list(1:6))
y <- list(a=list(1:4),b=list(1:6)) 
```

当我尝试：

```
x+y 
```

我收到错误：x + y 中的错误：二进制运算符的非数字参数

X 和 y 的长度相等，并且只包含整数。使用矩阵可以执行 y+x，有没有办法对带有列表的列表执行此操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T14:45:17.640

假设每个列表具有相同的结构，您可以使用`mapply`如下

```
 mapply(function(x1, y1) x1[[1]]+y1[[1]], x, y) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-07T14:46:49.097

您可以使用`lapply`同时浏览每两个列表。

```
 lapply(seq_along(x),function(i)
         unlist(x[i])+unlist(y[i]))

[[1]]
a1 a2 a3 a4 
 2  4  6  8 

[[2]]
b1 b2 b3 b4 b5 b6 
 2  4  6  8 10 12 
```

如果 x 和 y 的长度不同，您可以这样做：

```
 lapply(seq_len(min(length(x),length(y)),function(i)
         unlist(x[i])+unlist(y[i])) 
```

# c - C 中的 TDD 测试。通过交换和排序测试？

> ID：15273943
> 
> 赞同：0
> 
> 时间：2013-03-07T14:37:02.847
> 
> 标签：c, sorting, testing, swap

我正在用 C 编写代码。我为交换方法和冒泡排序方法编写了代码，但我不知道如何为它们运行 TDD 测试。你能告诉我如何创建 TDD 测试来验证这些方法中的每一个是否都能正常工作吗？这是我的每个方法的代码：

```
/**
* swaps the values referenced by p and q
*/
void swap (int *p, int *q)
{
   int tmp; 

   tmp = *p; 
   *p = *q; 
   *q = tmp; 
}

/**
* an implementation of bubble sort
* n is the size of array a
*/
void bubble (int a[], int n)
{
   int i, j; 

   for (i = 0; i < n-1; i++)
   {
     for (j = n-1; i < j; j--)
      {
       if (a[j-1] > a[j])
      {
         swap (&a[j-1], &a[j]); 
      }
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:16:07.783

这是围绕单元测试的基本思想。您单独测试一小部分代码。如果此测试通过但排序不起作用，您将知道错误在排序实现中，而不是在交换中。

```
void testSwap() {
  int a = 0;
  int b = 1;

  swap(&a, &b);
  if (a == 1)
    printf("ok");
  if (b == 0)
    printf("ok");
} 
```

如果您在实现 swap() 函数之前编写 testSwap() 函数，那么您将执行 TDD。

# java - 插入带有外键的记录。目前还没有国外数据。数据库布局问题？

> ID：15273948
> 
> 赞同：0
> 
> 时间：2013-03-07T14:37:14.757
> 
> 标签：java, database, database-design, mybatis

我有一个数据库布局，其中我的员工和我的近亲都有一个地址。

所以我的钥匙是这样布置的：

```
Address
----------
addressID

Employee
----------
employeeID
addressID

NextOfKin
----------
nextOfKinID
addressID 
```

在 MyBatis 中，我的关联设置如下：

```
<resultMap id="employeeMap" type="employee">
    <id column="employeeID" property="employeeID" />

    <association property="address" column="addressID" resultMap="addressMap" />
</resultMap>

<resultMap id="addressMap" type="address">
    <id column="addressID" property="addressID" />
</resultMap> 
```

这是插入语句。employeeID 是自动递增的，所以我把它省略了。

```
<insert id="insert">
INSERT into Employees (addressID)
    VALUES (#{address.addressID})
</insert> 
```

员工对象：

```
Employee{
  int employeeID
  Address address
} 
```

因此，当员工注册并设置帐户时，他们还没有地址。所以addressID应该为空。

当我插入一条记录时，我收到“列'addressID'不能为空”的错误。当我将它从插入语句中取出时，它会引发错误“字段'addressID'没有默认值”。

我希望能够添加一个员工，然后再添加地址和关系..

这是布置表格/关系的坏方法吗？我似乎找不到将地址存储为空的方法..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-10T16:58:15.040

APC 是对的：您在数据库中将 employees.AddressID 定义为 NOT NULL。这会导致错误“列 'addressID' 不能为空”。如果要在数据库中存储 Java 空引用，则必须允许该列的 NULL 值。

你还应该告诉 MyBatis address.addressID 的 SQL 类型。因此，例如对于类型 INT 更改

```
<insert id="insert">
INSERT into Employees (addressID)
    VALUES (#{address.addressID})
</insert> 
```

至

```
<insert id="insert">
INSERT into Employees (addressID)
    VALUES (#{address.addressID, jdbcType=NUMERIC})
</insert> 
```

请参阅[MyBatis 文档](http://www.mybatis.org/mybatis-3/sqlmap-xml.html)：

> “如果将 null 作为值传递，则 JDBC 对所有可空列都需要 JDBC 类型。您可以通过阅读 PreparedStatement.setNull() 方法的 JavaDocs 自行调查。”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T15:15:19.420

您可以插入一个假地址获取值并使用用户的 id 更新真实地址吗？你能改变对数据库的约束吗？

# batch-file - 批量复制多个文件夹中的所有文件到 1 个文件夹

> ID：15273949
> 
> 赞同：0
> 
> 时间：2013-03-07T14:37:17.563
> 
> 标签：batch-file, copy

我正在尝试使用以下代码将多个文件夹中的多个文件复制到 1 个文件夹中：

```
for /R \\wiki\help\images %%f in (*.jpg, *.png, *.gif) do (
    copy %%f "\\10.101.3.21\wikitest\wiki\wikiimages"
) 
```

但是，它将所有文件复制为 wikiimages，我无法绕过它。我只想使用复制命令，而不是外部程序（所以没有`xcopy`或类似的）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:43:09.817

我确信

对于 /R \wiki\help\images %%f in (*.jpg, *.png, *.gif) 复制 %%f "\10.101.3.21\wikitest\wiki\wikiimages\"

是解决这个问题的方法，它通常需要 \ 来知道它的文件夹而不是文件名。

# r - 在 R 中将箱线图转换为 ggplot2 中的密度

> ID：15273951
> 
> 赞同：3
> 
> 时间：2013-03-07T14:37:18.843
> 
> 标签：r, graphics, ggplot2

我有以下 ggplot2 图：

```
ggplot(iris) + geom_boxplot(aes(x=Species, y=Petal.Length, fill=Species)) + coord_flip() 
```

我想将其绘制为水平密度图或直方图，这意味着每个物种或直方图都有密度线图而不是箱线图。这不能解决问题：

```
> ggplot(iris) + geom_density(aes(x=Species, y=Petal.Length, fill=Species)) + coord_flip()
Error in eval(expr, envir, enclos) : object 'y' not found 
```

为简单起见，我将`Species`其用作`x`变量，`fill`但在我的实际数据中，X 轴表示一组条件，而填充表示另一组条件。尽管这对于绘图目的无关紧要。我正在尝试使 X 轴代表不同的条件，将值`y`绘制为密度/直方图而不是箱线图。

**编辑**这可以用一个具有两个类似因子的变量（如 Species）的变量来更好地说明。在`mpg`数据集中，我想为每个制造商制作一个密度图，绘制`displ`每个`cyl`值的分布。x 轴（在翻转坐标中垂直）代表每个制造商，直方图的值为，但对于每个制造商，我想要与该制造商的值`displ`一样多的直方图。`cyl`希望这更清楚。我知道这不起作用，因为`y=`期望计数。

```
ggplot(mpg, aes(x=manufacturer, fill=cyl, y=displ)) + 
    geom_density(position="identity") + coord_flip() 
```

我得到的最接近的是：

```
> ggplot(mpg, aes(x=displ, fill=cyl)) + 
+     geom_density(position="identity") + facet_grid(manufacturer ~ .) 
```

但我不想要不同的网格，我希望它们在同一个图中是不同的条目，就像在直方图的情况下一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T15:05:22.387

像这样的东西？对于`histogram`和`density`图，`y`变量是`count`。因此，您必须`x = Petal.Length`在 y 轴上绘制其频率（对于给定的 binwidth）。只需使用`fill=Species`with`x=Petal.Length`来赋予颜色 by `Species`。

对于`histogram`：

```
ggplot(iris, aes(x=Petal.Length, fill=Species)) + 
       geom_histogram(position="identity") + coord_flip() 
```

对于`density`：

```
ggplot(iris, aes(x=Petal.Length, fill=Species)) + 
       geom_density(position="identity") + coord_flip() 
```

**编辑：**也许你正在寻找`facetting`？？

```
ggplot(mpg, aes(x=displ, fill=factor(cyl))) +  
     geom_density(position="identity") + 
     facet_wrap( ~ manufacturer, ncol=3) 
```

给出：

![在此处输入图像描述](../Images/5d1f630eb5809d737545e4c0b1e1410b.png)

**编辑：**因为，你不想要`facetting`，我能想到的唯一其他方法是通过粘贴`manufacturer`和`cyl`一起创建一个单独的组：

```
dd <- mpg
dd$grp <- factor(paste(dd$manufacturer, dd$cyl))

ggplot(dd, aes(x=displ)) +  
     geom_density(aes(fill=grp), position="identity") 
```

给出：

![在此处输入图像描述](../Images/ee707813f8577e8d2c82233ffddebd27.png)

# ios - 如何防止 Web Socket 在 iPhone/iPad 处于锁定状态时断开连接？

> ID：15273952
> 
> 赞同：3
> 
> 时间：2013-03-07T14:37:23.273
> 
> 标签：ios, html

我们已经在我的 iPhone 和 iPad 应用程序中实现了 HTML5 Web 套接字。当应用程序进入后台（iPad/iPhone 未处于锁定状态）时，Web Socket 工作正常。但是当 iPhone 或 iPad 被锁定时，它会断开连接。

即使 iPhone/iPad 处于锁定状态，有什么方法可以保持网络套接字运行？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:52:24.563

根据我自己的实验。当您锁定设备时，设备似乎会关闭 WiFi 并关闭网络套接字，这很可能是为了节省电量。不过，移动宽带连接仍然活跃，并且套接字似乎仍然存在。至少有一段时间。

您是否尝试将套接字代码的某些部分包装在[beginBackgroundTaskWithExpirationHandler() 中](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/beginBackgroundTaskWithExpirationHandler%3a)？这至少应该允许您优雅地关闭套接字，或者让套接字保持活动状态一段时间。但是，操作系统将在全局计时器到期后终止您的任务。

# php - Perl pack() 函数和“B”格式字符到 Php

> ID：15273953
> 
> 赞同：2
> 
> 时间：2013-03-07T14:37:25.233
> 
> 标签：php, perl, pack

`"B"`Perl 代码中的这条`pack`语句做了什么？

```
$hce_hash=pack('B*', $hce_hash); 
```

PHP中是否有等效的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:23:14.717

`pack 'B*', $s`返回由 of 的字符串表示的字节`0`和`1`组成字符串 in 的字符`$s`。的值`$s`在必要时用零填充到可被 8 整除的长度。

例如，

```
pack 'B*', '0100101000110101' 
```

结果是

```
chr(0b01001010) . chr(0b00110101); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:32:31.843

PHP[`pack`](http://php.net/manual/en/function.pack.php)不支持 的格式`B*`，但支持`H*`. 在 Perl 中，你可以用

```
sub pack_Bstar {
  my($bits) = @_;
  my $Hstar;

  my $nybble = 0;
  for (my $i = 0; $i < length $bits; ++$i) {
    $nybble *= 2;
    $nybble += int substr($bits, $i, 1);
    if ($i % 4 == 3) {
      $Hstar .= sprintf "%x", $nybble;
      $nybble = 0;
    }
  }

  my $pad = 4 - length($bits) % 4;
  if ($pad != 4) {
    $nybble = ($nybble << $pad);
    $Hstar .= sprintf "%x", $nybble;
  }

  pack "H*", $Hstar;
} 
```

上面的代码不是惯用的 Perl，但转换为 PHP 应该很简单。

该`H*`格式首先需要一个具有高 nybble（4 位）的十六进制字符串。上面的代码一次咀嚼四个位来计算每个 nybble 值。例如，对于 的位串`1011`，跟踪算法给出

1.  nybble = 0
2.  nybble = 2 * 0 + 1 = 1
3.  nybble = 2 * 1 + 0 = 2
4.  nybble = 2 * 2 + 1 = 5
5.  nybble = 2 * 5 + 1 = 11

1011 [2]确实是 11 [10]，也就是 b [16]。如果最后一个 nybble 不完整（在 1 到 3 位之间），我们将该位左移适当的位数。这具有在右侧填充零的效果。

测试：

```
my @tests = (
  ["01001010011101010111001101110100"                               => "Just"],
  ["0110000101101110011011110111010001101000011001010111001"        => "another"],
  ["01010000010010000101000000101111010100000110010101110010011011" => "PHP/Perl"],
  ["01101000011000010110001101101011011001010111001000101100"       => "hacker,"],
);

for (@tests) {
  my($input,$expect) = @$_;
  my $got = pack_Bstar $input;
  print "$input: ", ($got eq $expect ? "PASS" : "FAIL"), " ($got)\n";
} 
```

输出：

```
01001010011101010111001101110100：通过（仅）
0110000101101110011011110111010001101000011001010111001：通过（另一个）
01010000010010000101000000101111010100000110010101110010011011：通过（PHP / Perl）
01101000011000010110001101101011011001010111001000101100：通过（黑客，）
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T19:39:33.543

正如其他人所指出的那样，PHP 的[pack()](http://php.net/pack)不支持`B`模板，它在 Perl 的[pack()](http://perldoc.perl.org/functions/pack.html)中将一个位串（表示为`0`和`1`字符的文字串）转换为每个字节 8 位的压缩字节串。

然而，由于 PHP 的 pack() 确实支持`H`模板，除了十六进制数字而不是位之外，它的功能相同，我们可以`B`在 PHP 中模拟 Perl 的模板，首先使用[base_convert()](http://php.net/base_convert)将位转换为十六进制数字，然后将它们打包：

```
function pack_B( $bits, $len = false ) {
    // truncate input to desired length, if given:
    if ( $len === false ) $len = strlen( $bits );
    else $bits = substr( $bits, 0, $len );

    // pad input with zeros to next multiple of 4 above $len:
    $hexlen = (int)( ($len + 3) / 4 );
    $bits = str_pad( $bits, 4*$hexlen, "0" );

    // split input into chunks of 4 bits, convert each to hex and pack them:
    $nibbles = str_split( $bits, 4 );
    foreach ( $nibbles as $i => $nibble ) {
        $nibbles[$i] = base_convert( $nibble, 2, 16 );
    }
    return pack( "H*", implode( "", $nibbles ) );
} 
```

（我们不能只将整个输入字符串提供给 base_convert() 的原因是它将中间结果存储为 PHP 浮点数，因此对于太大而无法用浮点数准确表示的数字不会产生正确的结果。做但是，一次一个十六进制数字可以正常工作。）

# android - 带有分页崩溃的 Android ListView

> ID：15273956
> 
> 赞同：7
> 
> 时间：2013-03-07T14:37:31.533
> 
> 标签：android

我有可分页的 ListView，它的行在向下滚动时被异步加载，有时应用程序会崩溃。它不会在 Android 2.3.3 上发生，但会在 Android 4.0 及更高版本上发生。

这是我的堆栈跟踪：

```
03-07 15:23:02.450: D/AndroidRuntime(1545): Shutting down VM
03-07 15:23:02.450: W/dalvikvm(1545): threadid=1: thread exiting with uncaught exception (group=0x40ccb930)
03-07 15:23:02.455: E/AndroidRuntime(1545): FATAL EXCEPTION: main
03-07 15:23:02.455: E/AndroidRuntime(1545): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131099953, class com.ui.PaginableListView) with Adapter(class android.widget.HeaderViewListAdapter)]
03-07 15:23:02.455: E/AndroidRuntime(1545):         at android.widget.ListView.layoutChildren(ListView.java:1544)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:4042)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at android.view.Choreographer.doCallbacks(Choreographer.java:562)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at android.view.Choreographer.doFrame(Choreographer.java:531)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at android.os.Handler.handleCallback(Handler.java:725)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at android.os.Handler.dispatchMessage(Handler.java:92)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at android.os.Looper.loop(Looper.java:137)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at android.app.ActivityThread.main(ActivityThread.java:5191)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at java.lang.reflect.Method.invokeNative(Native Method)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at java.lang.reflect.Method.invoke(Method.java:511)
03-07 15:23:02.455: E/AndroidRuntime(1545):         at com.android.internal.os.ZygoteInit$MethodAnd 
```

这是代码的一部分，可能不是很有帮助；/

```
protected DataResponse doInBackground(IRequest... reqs) {
    IRequest req = reqs[0];
    CancelStateHolder cancelStateHolder = new CancelStateHolder() {
        @Override
        public boolean isCancelled() {
            return DataRequestTask.this.isCancelled();
        }
    };

    if (cacheKey != null) {
        try {
            CacheDogpileProtector.getInstance().acquire(cacheKey);
        } catch (InterruptedException e) {
            cancel(true);
            ZLog.printStackTrace(e);
        }
    }

    reqExec.setParentTask(this);
    DataResponse resp = reqExec.execute(req, cancelStateHolder,
    cacheContext, cacheKey);
    if (resp == null) {
        Log.d(LOG, "resp == null");
    }
    return resp;
}

@Override
protected void onPostExecute(DataResponse result) {
    super.onPostExecute(result);
    ZLog.d(LOG, "override onPostExecute");
    try {
        if (result.getJsonResponse() == null) {
            ZLog.i(LOG, "json is NULL (probably connection problem)   response text: " + result.getResponseText());
            throw new NASAException(R.string.exception_io);
        }
        ConsumptionStatus consumption = ConsumptionStatus.REQUEST_NOT_CONSUMED;
        if (onZadaneRequestCompletedListener != null) {
            consumption = onZadaneRequestCompletedListener.onZadaneRequestCompleted(PaginableListView.this, request, result);
        }

        switch (consumption) {
            case REQUEST_CONSUMED:
                 break;
            case REQUEST_UPDATE_METADATA:
                 wrapAndUpdate(result.getJsonResponse(), true);
                 break;
            case REQUEST_NOT_CONSUMED:
                 wrapAndUpdate(result.getJsonResponse(), false);
                 break;
         }
         if (onZadaneRequestCompletedListener != null) {
             onZadaneRequestCompletedListener.onZadaneRequestCompletedAfterWrap(PaginableListView.this, request, result, lastFetchedPage);
         }
         setOnRefreshListener(properOnRefreshListener);
     } catch (NASAException e) {
         DialogHandler.handleError(mContext, e.getMessage(mContext));
     } finally {
         removeFooterView(footerView);
         actualTask = null;
     }
}

};
actualTask.executeCached(activity, cacheContext, request); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T08:16:14.537

您可以尝试将这样的内容添加到您的 ListView：

```
 @Override
protected void layoutChildren() {
    try {
        super.layoutChildren();
    } catch (IllegalStateException e) {
        ZLog.e(LOG, "This is not realy dangerous problem");
    }
} 
```

如果你添加了一个headerview或者一个footerview ListView，当你notifyDataSetChanged()时，它会将mItemCount更改为真实适配器的itemcount，但是右侧会返回添加了headercount和footercount的假itemcount：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ListView.java?av=f#1538](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ListView.java?av=f#1538)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:12:03.853

正如您的堆栈跟踪所说，您无法使用后台线程更新适配器的内容。由于您使用的是`AsyncTask`，因此修复它非常容易。不要在 中更新您的适配器，而是在 中`doInBackground`更新它`onPostExecute`。

这是这可能的样子的示例。

```
@Override
protected Object doInBackground(Object... params) {
    Object results = getResults(); /* Replace with your own result fetching code */
    return results;
}

@Override
protected void onPostExecute(Object result) {
    super.onPostExecute(result);
    /* Update your adapter here using the returned results. */
    myAdapter.addNewData(result);
    myAdapter.notifyDataSetChanged();
} 
```

# c# - SmtpClient 可扩展性问题（只有两个正在运行的请求）

> ID：15273960
> 
> 赞同：2
> 
> 时间：2013-03-07T14:37:47.977
> 
> 标签：c#, .net, networking, smtp, smtpclient

我正在尝试在[`SmtpClient.SendMailAsync`](http://msdn.microsoft.com/en-us/library/hh193922.aspx)具有 32 个 CPU 的 Windows Server 2008 64 位企业版上使用 .NET 4.5 的方法发送大量电子邮件。

在调试过程中，我发现只有两个请求同时运行。考虑到我在服务器操作系统上，这很奇怪。

这是一个简单的测试用例：

```
static void Main(string[] args)
{
    var sw = Stopwatch.StartNew();
    var t1 = SendEmail();
    var t2 = SendEmail();
    var t3 = SendEmail();
    var t4 = SendEmail();
    var t5 = SendEmail();
    var t6 = SendEmail();
    var t7 = SendEmail();
    var t8 = SendEmail();
    Task.WaitAll(t1, t2, t3, t4, t5, t6, t7, t8);
    Console.WriteLine(sw.Elapsed);
}

static async Task SendEmail()
{
    using (var smtp = new SmtpClient())
    {
        Console.WriteLine("Starting [{0}]", DateTime.UtcNow.ToString("o"));
        await smtp.SendMailAsync("...", "...", "Test", "Testing...");
        Console.WriteLine("Done [{0}]", DateTime.UtcNow.ToString("o"));
    }
} 
```

和结果。它开始很快，但分两批完成（见时代）。在 Process Explorer 中检查打开的连接也显示了相同的行为。

```
Starting [2013-03-07T14:27:17.4643296Z]
Starting [2013-03-07T14:27:17.4783382Z]
Starting [2013-03-07T14:27:17.4783382Z]
Starting [2013-03-07T14:27:17.4793387Z]
Starting [2013-03-07T14:27:17.4793387Z]
Starting [2013-03-07T14:27:17.4793387Z]
Starting [2013-03-07T14:27:17.4793387Z]
Starting [2013-03-07T14:27:17.4793387Z]
Done [2013-03-07T14:27:19.2070974Z]
Done [2013-03-07T14:27:19.2070974Z]
Done [2013-03-07T14:27:19.7541596Z]
Done [2013-03-07T14:27:19.7602234Z]
Done [2013-03-07T14:27:20.3880420Z]
Done [2013-03-07T14:27:20.3906050Z]
Done [2013-03-07T14:27:20.9254624Z]
Done [2013-03-07T14:27:20.9324577Z]
00:00:03.7476343 
```

有没有办法真正启动更多请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:00:55.647

每个 ServicePoint 对象的默认限制为 2 个并发连接。您可以通过设置 ServicePointManager.DefaultConnectionLimit 为未来的 ServicePoint 实例修改此设置。您还可以修改现有实例的 ServicePoint.ConnectionLimit - SmtpClient 公开了一个 ServicePoint 属性，您可以使用该属性来获取它。

# progress-bar - 取消 innosetup 中的设置回滚进度条？

> ID：15273961
> 
> 赞同：1
> 
> 时间：2013-03-07T14:37:53.893
> 
> 标签：progress-bar

InnoSetup取消安装过程时如何显示回滚进度条？

如何在 .iss 文件中编写脚本？

非常感谢。

# java - Java中的单链表实现

> ID：15273962
> 
> 赞同：-1
> 
> 时间：2013-03-07T14:37:59.560
> 
> 标签：java

```
public class SinglyLinkedList implements Lista {
private final Element _headAndTail = new Element(null);
private int _size;

public SinglyLinkedList() {
    clear(); 
}

private static final class Element {

    private Object _value;
    private Element _next;

    public Element(Object value) {
        setValue(value);
    }

    public void setValue(Object value) {
        _value = value;
    }

    public Object getValue() {
        return _value;
    }

    public Element getNext() {
        return _next;
    }

    public void setNext(Element next) {
        assert next != null : "Wskaźnik na element następny nie może być pusty";
        _next = next;
    }

    public void attachBefore(Element e) {
        setNext(e);
        e.setNext(this);
    }
}

public void insert(int index, Object value)
        throws IndexOutOfBoundsException {
    if (index < 0 || index > _size)
        throw new IndexOutOfBoundsException();
    Element element = new Element(value);
    element.attachBefore(getElement(index));
    ++_size;
}

private Element getElement(int index) {
    return getElementForwards(index);
}

private Element getElementForwards(int index) {

    Element element = _headAndTail.getNext();
    for (int i = index; i > 0; --i)
        element = element.getNext();
    return element;
}

private void checkOutOfBounds(int index) throws IndexOutOfBoundsException {
    if (index < 0 || index >= size())
        throw new IndexOutOfBoundsException();
}

public void add(Object value) {
    insert(size(), value);
}

public int size() {
    return _size;
}

public Object get(int index) throws IndexOutOfBoundsException {
    checkOutOfBounds(index);
    return getElement(index).getValue();
}

public Object set(int index, Object value) throws IndexOutOfBoundsException {
    checkOutOfBounds(index);
    Element element = getElement(index);
    Object oldValue = element.getValue();
    element.setValue(value);
    return oldValue;
}

public Object delete(int index) throws IndexOutOfBoundsException {
    checkOutOfBounds(index);
    Element element = getElement(index);
    --_size;
    return element.getValue();
}

public boolean delete(Object value) {
    Element e = _headAndTail.getNext();
    while (e != _headAndTail && !value.equals(e.getValue()))
        e = e.getNext();
    if (e != _headAndTail) {
        --_size;
        return true;
    }
    else
        return false;
}

public boolean contains(Object value) {
    return indexOf(value) != -1;
}

public void clear() {
    _headAndTail.setNext(_headAndTail);
    _size = 0;
}

public int indexOf(Object value) {
    int index = 0;
    Element e = _headAndTail.getNext();
    while (e != _headAndTail && !value.equals(e.getValue())) {
        e = e.getNext();
        ++index;
    }
    return e != _headAndTail ? index : -1;
}

public boolean isEmpty() {
    return _size == 0;
}

public Iterator iterator() {
    return new ValueIterator();
}

private final class ValueIterator implements Iterator {

    private Element _current = _headAndTail;

    public void first() {
        _current = _headAndTail.getNext();
    }

    public void last() {
    }

    public boolean isDone() {
        return _current == _headAndTail;
    }

    public void next() {
        _current = _current.getNext();
    }

    public void previous() {
    }

    public Object current() throws IndexOutOfBoundsException {
        if (isDone())
            throw new IndexOutOfBoundsException();
        return _current.getValue();
    }
} 
```

}

这是我的代码，它的编译没有任何问题，我已经制作了这样的双向链表，它没有任何问题，当我将它更改为单链表时，如果有人可以看一下，它不会将对象添加到列表中会很棒 - 我认为问题是方法`insert(int index, Object value)`，并且`attachBefore(Element e)`在 Element 类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:49:18.743

中存在概念问题`Element.attachBefore(e)`。基本上不可能为单链表实现该方法。相反，您必须`Element`在要插入的位置之前找到，并在其后插入新`Element` *的*。（并处理您在列表开头插入的特殊情况。）

我会让你处理细节...

但纳伦德拉的评论是正确的。如果您无法弄清楚当前版本的代码在做什么，请使用 IDE 的 Java 调试器运行它，并单步调用给您带来麻烦的方法。

# r - 如何在 R 中获取石英设备的当前尺寸？

> ID：15273963
> 
> 赞同：5
> 
> 时间：2013-03-07T14:38:00.667
> 
> 标签：r, quartz-graphics

如果这是一个太简单的问题，我深表歉意。我对 R 比较陌生，似乎无法找到答案。

我在 R 中绘制了一个图表并将石英窗口保存为 pdf。我想在稍后的某个时间点在另一个图表中重用相同的尺寸（高度和宽度）。窗口大小不是默认的（我用鼠标调整了大小）。我如何获得这些参数？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T14:40:40.060

尝试使用`dev.size`：

```
dev.new()
dev.size()
[1] 7.000000 6.989583
dev.new(width=3)
dev.size()
[1] 3.000000 6.989583 
```

# c++ - 解决矢量 , 使用 basic_string ?

> ID：15273964
> 
> 赞同：8
> 
> 时间：2013-03-07T14:38:05.957
> 
> 标签：c++

这是一个安全的解决方法吗？我想使用*向量 bool*但需要将指针传递给期望 C 样式数组的旧代码。

```
typedef std::basic_string<bool> vector_bool;

int main()
{
    vector_bool ab;
    ab.push_back(true);
    ab.push_back(true);
    ab.push_back(true);
    ab.push_back(false);
    bool *b = &ab[0];
    b[1] = false;
} 
```

编辑：感谢其他解决方案的建议，但我真的很想对我的上述解决方案有一个明确的答案。谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T14:46:09.753

我不确定，`std::basic_string<bool>`因为它会实例化`std::char_traits<bool>`，而且我不确定标准是否需要定义它，或者是否`char_traits`可以保留主模板未定义，只有明确的特化，例如`char_traits<char>`被定义。您不能提供自己的特化，`char_traits<bool>`因为如果特化依赖于用户定义的类型，您只能特化标准模板，而这`bool`显然不是。也就是说，如果您的 stdlib 确实具有默认`char_traits`定义，并且您不尝试使用要求成员`char_traits`执行任何有用操作的字符串操作，它可能会起作用。

或者，这是 hacky 但可能有效：

```
struct boolish { bool value; };
inline boolish make_boolish(bool b) { boolish bish = { b }; return bish; }

std::vector<boolish> b;
b.push_back( make_boolish(true) );
bool* ptr = &b.front().value; 
```

`boolish`是一个微不足道的类型，所以只要一个数组`boolish`具有与数组相同的表示形式`bool`（你需要检查你的编译器，我用 a`static_assert`来检查没有填充），那么你可能会侥幸逃脱，尽管它可能违反了别名规则，因为`*ptr`and`*++ptr`不是同一个数组的一部分，所以递增指针并不指向下一个`boolish::value`它指向前一个的“结束”（即使这两个位置实际上具有相同的地址，尽管 [basic.compound]/3 似乎确实说`++ptr`“指向”下一个`bool`）。

使用 C++11，语法变得更容易一些，你不需要`make_boolish`...

```
#include <vector>
#include <assert.h>

struct boolish { bool value; };

int main()
{
  std::vector<boolish> vec(10);
  vec.push_back( boolish{true} );
  bool* ptr = &vec.front().value;
  assert( ptr[10] == true );
  ptr[3] = true;
  assert( vec[3].value == true );

  static_assert( sizeof(boolish) == sizeof(bool), "" );
  boolish test[10];
  static_assert( sizeof(test) == (sizeof(bool)*10), "" );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:41:19.183

来自“C++ 工作草案，2012-11-02”

> **21.1 一般 [strings.general]**
> 1 本条款描述了用于操作任何非数组 POD (3.9) 类型的序列的组件。
> 
> **21.4.1 basic_string 一般要求 [string.require]**
> 5 basic_string 对象中的类字符对象应连续存储。也就是说，对于任何 basic_string 对象 s，标识 &*(s.begin() + n) == &*s.begin() + n 应适用于所有 n 值，使得 0 <= n < s.size ()。

但

> 6 引用 basic_string 序列元素的引用、指针和迭代器可能会因该 basic_string 对象的以下用途而失效：
> — 作为任何标准库函数的参数，将对非 const basic_string 的引用作为参数.233
> —调用非 const 成员函数，除了 operator[]、at、front、back、begin、rbegin、end 和 rend。

因此，只要您注意，不要在其他地方使用原始数组时调用这些函数，就应该是安全的。

**更新**：

性格特征和要求在**21.2 性格特征 [char.traits]**和**21.2.1 性格特征要求 [char.traits.require]**中描述。此外，typedefs 和 specializations 分别在**21.2.2 traits typedefs [char.traits.typedefs]**和**21.2.3 char_traits specializations [char.traits.specializations]**中描述。

这些特征也用于输入/输出库。所以有些要求，比如`eof()`or`pos_type`和`off_type`，在`basic_string`.

除了`char`、和. `char16_t`_`char32_t``wchar_t`

虽然，它在您的示例中使用 gcc 4.7 开箱即用，但我`bool_traits`只定义了一个最小值

```
struct bool_traits {
    typedef bool char_type;
    static void assign(char_type &r, char_type d);
    static char_type *copy(char_type *s, const char_type *p, std::size_t n);
    static char_type *move(char_type *s, const char_type *p, std::size_t n);
}; 
```

采用提供的默认实现（gcc 4.7），并使用它

```
std::basic_string<bool, bool_traits> ab; 
```

您的环境可能已经提供了一个有效的实现。如果没有，您可以自己实现一个简单`bool_traits`的或模板特化`std::char_traits<bool>`。

[您可以在工作草案、PDF](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/)或[cppreference.com - std::char_traits](http://en.cppreference.com/w/cpp/string/char_traits)中查看角色特征的完整界面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-31T09:53:19.060

您也可以使用[`boost::container::vector`](https://www.boost.org/doc/libs/1_76_0/doc/html/boost/container/vector.html). 它完全一样`std::vector`，但不是专门用于`bool`.

# python - 我想为我的函数调用元组元组中的元素

> ID：15273965
> 
> 赞同：0
> 
> 时间：2013-03-07T14:38:05.817
> 
> 标签：python

当tictactoe游戏的其中一条线已满时，我想获得True：

```
teste5=('O','X','X',' ',' ',' ',' ',' ',' ')
teste6=('X','X','X',' ',' ',' ',' ',' ',' ')

def vencedor_linha(t):
    tl1=(t[0],t[1],t[2])
    tl2=(t[3],t[4],t[5])
    tl3=(t[6],t[7],t[8])
    tl=(tl1,tl2,tl3)
    if tl[0:][0:]=='X':
        return True
    elif tl[0:][0:]=='O':
        return True
    else:
        return False 
```

所以`vencedor_linha(teste5)`->`True`和 `vencedor_linha(teste6)`->`False`

问题是：它给了我`vencedor_linha(teste5)`-> `False`，因为我无法让`if`'s 正常工作。

PS。我不能使用列表，所以不要费心告诉我。:p

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:48:23.963

如果要检查 3 个不同的值是否相等，则需要使用 all() 或 3 个不同的 == 条件；检查切片是否等于一个值没有任何意义。

你想要这样的东西：

```
def vencedor_linha(t):
    tl1=(t[0],t[1],t[2])
    tl2=(t[3],t[4],t[5])
    tl3=(t[6],t[7],t[8])
    tl=(tl1,tl2,tl3)
    for row in tl:
        if all(x == 'X' for x in row) or all(x == 'O' for x in row):
            return True
    return False 
```

（这会检查所有 3 行；我不清楚您的原始代码是否仅尝试检查第一行。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:43:31.203

一个使用 itertools 的衬垫，就像几乎所有用 iterables 做一些聪明的事情一样：

```
from itertools import groupby
def vencedor_linha(t):
    return any(reduce(lambda x,y:x if x==y and x in ['X','Y'] else False,
        (r[1] for r in row[1])) for row in groupby(enumerate(t),lambda (i,v):i/3)) 
```

基本上： enumerate(t) 返回一个迭代器，其中每个元素的形式为（t 中元素的索引，t 中的元素）

groupby(iterable, keyfunction) 返回一个迭代器，其中每个元素的形式为 (value, iterable 元素的迭代器，应用于该元素的 keyfunction 返回值)

reduce(function,iterable)：将两个参数的函数从左到右累积应用于序列的项，从而将序列缩减为单个值。例如，reduce(lambda x, y: x+y, [1, 2, 3, 4, 5]) 计算 ((((1+2)+3)+4)+5)。（来自 python 文档）

如果可迭代的任何元素评估为 True，则 any(iterable) 返回 True，否则返回 False。

因此，我们使用 groupby 将您的元组分成几行，计算每行是否是同质的，并且只包含“X”或“Y”，如果这些行中的任何一个为 True，则返回 True。

# django - Django 上下文处理器：视图不会重新加载

> ID：15273971
> 
> 赞同：0
> 
> 时间：2013-03-07T14:38:20.467
> 
> 标签：django, django-views

我用 Django 构建了一个包含一定数量视图的应用程序。我必须从一个项目切换到另一个使用相同视图的项目。

为此，我使用了一个上下文处理器，它返回字典中变化的变量。然后在我所有的观点中，我返回一个`context_instance=RequestContext(request)`

我的问题是我的视图不会重新加载，直到我第二次单击“更改项目”按钮。

我不知道我是否足够清楚，但是如果有人可以提示我这里出了什么问题，那就太好了。我什至不知道哪段代码有助于理解这个问题，所以如果你认为你可以帮助，请询问！

**编辑**

我的 context_processor 示例

```
from django.shortcuts import render_to_response
from django.core.context_processors import csrf
from django.template import RequestContext

def display_select_proj(request):
if request.method == "POST" and (request.POST.get("action", "") == "OK"):
     form = SelectForm(request.POST, proj_id=request.session['proj'])
     if form.is_valid():
         p = form.save()
         request.session['proj'] = proj

         return {'my_variables': my_variables} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:40:27.183

上下文处理器不适合这种逻辑，尤其是会话修改。您应该将其移至[中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/)或视图功能。

为什么您的方法不起作用：上下文处理器只是修改正在呈现的模板的上下文，并在您的视图函数之后应用。[请参阅“应用上下文处理器时”](https://docs.djangoproject.com/en/dev/ref/templates/api/)。

# php - 快速排序数组中的 2500 个元素

> ID：15273972
> 
> 赞同：0
> 
> 时间：2013-03-07T14:38:22.047
> 
> 标签：php, for-loop, while-loop

```
<?php
 // Recursive version:
function quicksort($seq) {
if(!count($seq)) return $seq;
$pivot= $seq[0];
$low = $high = array();
$length = count($seq);
for($i=1; $i < $length; $i++) {
    if($seq[$i] <= $pivot) {
        $low [] = $seq[$i];
    } else {
        $high[] = $seq[$i];
    }
}
return array_merge(quicksort($low), array($pivot), quicksort($high));
}
//Let's try some examples
$myarr = array(25,5,3,4,17,1,88,8);
$final = quicksort($myarr);
print_r($final);
$final = quicksort($final);
print_r($final);
$strarray = array("mark","wes","mj","bruce","ming","lance","vince");
var_dump(quicksort($strarray));

?> 
```

我是 php 新手，我想知道如何使这个循环超过 100 次。我有一个数组 2500 int 元素，我需要对其进行快速排序并显示结果，但是在 100 个元素之后它开始给出循环最大错误............知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:44:51.967

是的。使用一些内置的排序功能。例如：[`sort()`](http://php.net/manual/en/function.sort.php)。查看[`Sorting Arrays`](http://www.php.net/manual/en/array.sorting.php)手册以查看完整列表。

# ruby-on-rails - 如何在嵌套记录上使用 fields_for 获取部分索引

> ID：15273976
> 
> 赞同：4
> 
> 时间：2013-03-07T14:38:24.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

鉴于：

```
<%= f.fields_for :socials do |builder| %>
  <%= render :partial => "social_fields", :locals => { :f => builder} %>
<% end %> 
```

如何在 _social_fields.html.erb 计数器中获取计数器/索引（以便在最后一项上获取某些内容）？social_fields_counter 似乎只有在您明确传递 :collection 来渲染时才会生成，但这些是嵌套对象，其父级中有 accept_nested_attributes_for :socials 。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T21:22:28.547

内部`_social_fields.html.erb`：

```
<%= f.options[:child_index] %> 
```

# touch - 不能在 IE10 中滚动

> ID：15273984
> 
> 赞同：0
> 
> 时间：2013-03-07T14:38:48.320
> 
> 标签：touch, internet-explorer-10

考虑以下：

```
<ul onmouseover="javascript:this.style.overflowY='auto';" onmouseout="javascript:this.style.overflowY='hidden'" id="chatwindow" class="replies" style="overflow-y:hidden;height:90%"> 
```

没什么特别的，只是一个滚动的 UL，当鼠标在其他地方时隐藏它的滚动条。适用于所有浏览器。在带有 IE10 的 Windows 8 平板电脑上，只要我将手指放在 UL 上，滚动条就会出现（并保持在视图中）。但是，UL 拒绝滚动。我试过 -ms-touch-action:none 和 -ms-touch-action:pan-y 无济于事。如果没有 onmouseover/onmouseout 事件，滚动是预期的。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:57:35.207

您是否尝试过纯 CSS？删除事件并使用它：

```
#chatwindow {overflow:hidden}
#chatwindow:hover {overflow:auto} 
```

如果这不起作用，我建议不要隐藏滚动条——从用户界面的角度来看，这不是一个好主意——毕竟，除非我碰巧将鼠标移到它上面，否则我怎么知道它是可滚动的？这将是非常违反直觉的。此外，滚动条的出现可能会导致布局问题，例如 YouTube 播放列表中的视频名称有时会因为出现滚动条而突然出现在两行。

# javascript - 从按钮客户端选择gridview中的所有复选框

> ID：15273988
> 
> 赞同：-1
> 
> 时间：2013-03-07T14:38:55.310
> 
> 标签：javascript, asp.net, gridview, client-side, checkbox

我有一个网格视图，其中的行包含一个复选框。在gridview下面我有一个按钮。当我单击它时，我想从客户端选择所有复选框。到目前为止，我已经阅读了有关 OnClientClick、javascript 等的内容。但我的代码不起作用。有人可以帮帮我吗？

注意：我不想选择在标题中选择复选框的复选框（我发现了很多关于此的示例），但是单击 gridview 之外的按钮

```
 <asp:GridView runat="server"  ID="MyGridView" EnableViewState="true" 
    AutoGenerateColumns="False" 
    ><AlternatingRowStyle BackColor="White" />

    <Columns>

    <asp:TemplateField HeaderText="Select" SortExpression="Select" ItemStyle-HorizontalAlign="Center" >
                <EditItemTemplate>
                    <asp:CheckBox ID="CkBoxSelectET" runat="server" /></EditItemTemplate>
                <ItemTemplate>
                    <asp:CheckBox ID="CkBoxSelectIT" runat="server" /></ItemTemplate>
       </asp:TemplateField>

       <asp:TemplateField HeaderText="Name" SortExpression="Name" ItemStyle-HorizontalAlign="Center" Visible="false" >
                <ItemTemplate>
                    <asp:Label ID="name" runat="server" Text='<%# Bind("Name") %>' Visible="false" /></ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="City" SortExpression="City" ItemStyle-HorizontalAlign="Left" >
                <ItemTemplate>
                    <asp:Label ID="lblCity" runat="server" /></ItemTemplate>
        </asp:TemplateField>

    </Columns>
    </asp:GridView>

<asp:Button runat="server" ID="btnSelect" Text="Select all" BackColor="LightGray" OnClientClick="SelectAll(id);" />

<script type="text/javascript">

var gridViewControl = document.getElementById('<%= MyGridView.ClientID %>');

function SelectAll(id) {
    for (i = 0; i < gridViewControl.elements.length; i++) {
        if (gridViewControl.elements[i].type == "checkbox") {
            gridViewControl.elements[i].checked = document.getElementById(id).checked;
        }
    }
} 
```

在c#中，当我绑定数据时：

```
 btnSelect.Attributes.Add("OnClientClick", "javascript:SelectAll('" + btnSelect.ClientID + "')"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:48:47.713

您似乎在说“如果我的按钮被'选中'（即与您传入的 ID 对应的元素），请选中此复选框”。由于无法检查按钮，因此这是行不通的。

您还说“单击此按钮时，调用此 Javascript 并传入变量的值`id`。” 但`id`在这种情况下没有定义。

如果您只想选择所有复选框，并且不想在全部/未选中之间切换，则此代码应该可以工作：

HTML：

```
<button id="btnSelect" type="button" onclick="SelectAll" >Select All</button> 
```

在 JavaScript 中：

```
var gridViewControl = document.getElementById('<%= MyGridView.ClientID %>');

function SelectAll() {
    for (i = 0; i < gridViewControl.elements.length; i++) {
        if (gridViewControl.elements[i].type == "checkbox") {
            gridViewControl.elements[i].checked = true;
        }
   } 
```

}

您根本不需要 c# 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:21:27.030

我建议使用 jQuery 完全在客户端执行此操作。我假设新的 ASP.NET 会按照您命名元素的方式呈现元素的 ID，所以我将使用它们。（我认为 ASP.NET 中有一个设置以这种方式呈现 ID）

在包含 jQuery 之后，您可以将一些示例代码放在 HTML 代码的底部：

```
<script>
    $("#btnSelect").click(function(event) {
        event.preventDefault();
        $("#MyGridView").find("[type='checkbox']").prop('checked', true);
    });
</script> 
```

这将只选择并检查 GridView 中的复选框，假设 GridView 容器元素的呈现 ID 是“MyGridView”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:45:53.923

最后我找到了解决方案，并且有效。我稍微修改了@Ann L 的解决方案。

```
function SelectAll() {

    var frm = document.forms['aspnetForm'];

    for (var i = 0; i < document.forms[0].length; i++) {
        if (document.forms[0].elements[i].id.indexOf('CkBoxSelectIT') != -1) {

                document.forms[0].elements[i].checked = true

        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-26T12:29:21.660

我已经这样做了，通过使用在网格内查找输入元素`getElementsByTagName("input")`。然后迭代并将值设置为选中。

**HTML**

```
<asp:CheckBox ID="chkSelectAll" runat="server" onclick="selectAll(this)" /> 
```

**Javascript**

```
function selectAll(chkAll) {
            var gvrecipe = document.getElementById('<%=gvrecipe.ClientID %>');
            var inputs = gvrecipe.getElementsByTagName("input");
            alert(inputs.length);
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].id.indexOf("_chkSelect") != -1)
                    inputs[i].checked = chkAll.checked;
            }
        } 
```

# xcode - Xcode 4 不支持 AppleScript 数据

> ID：15273989
> 
> 赞同：0
> 
> 时间：2013-03-07T14:38:59.087
> 
> 标签：xcode, applescript, xcode4.5, nib

我正在将一个 GUI 应用程序从 XCode 3 迁移到 XCode 4。源代码只是 AppleScript。当我打开 NIB 文件时，会弹出以下消息：

> Xcode 不支持 AppleScript 数据。此 NIB 文件中的 AppleScript 数据已被删除。

当我启动应用程序时，它的主窗口保持空白。

我能做些什么呢？我希望能够编辑我的应用程序，它在 XCode 4.5 中的 GUI 并在那里构建它。

这是消息框的屏幕截图：

![在此处输入图像描述](../Images/16df26ec7cb392085aeb2126b2aed499.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T01:31:49.680

您可以尝试在 Xcode 3 中复制窗口，然后将其粘贴到 Xcode 4 项目中。

由于这个原因，我自己没有尝试过。但过去也做过类似的事情。

我发现了使用这种方法解决这个问题的建议虽然[在这里](http://lists.apple.com/archives/applescript-users/2012/May/msg00019.html)

# ruby-on-rails - Heroku 上的私人酒吧 | 导轨 3

> ID：15273991
> 
> 赞同：2
> 
> 时间：2013-03-07T14:39:07.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, private-pub, procfile

我无法理解 private_pub gem 在heroku 上使用的端口。一切都在本地运行，我可以在 heroku 上启动额外的测功机。我认为必须有一种方法来动态设置它。

我的档案

`pubsub: bundle exec rackup private_pub.ru -s thin -E production -p 9292`

private_pub.yml

```
production:
    server: "http://myapp.herokuapp.com:9292/faye" 
```

请注意，在我的 Procfile 中将端口设置为 $PORT 将自动分配一个端口，但我如何在 private_pub.yml 中引用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:38:56.600

您无需指定端口。我的看起来像这样：

```
production:
  server: "http://mm-faye-pp.herokuapp.com/faye" 
```

确保您传递了您的 secret_token 并确保您的 faye 应用程序在完全不同的 dyno 上运行，或者像我一样为您的 faye 制作一个新的 heroku 应用程序。

# r - 使用 Craven 命令在我的代码中出错

> ID：15273993
> 
> 赞同：-3
> 
> 时间：2013-03-07T14:39:10.890
> 
> 标签：r

大家好，我正在使用 R 解决以下问题：

![在此处输入图像描述](../Images/7fe3abc9a9df425ba302ae4f62e3b4c1.png)

我已经在 R 中编写了以下脚本，但最后两行给出了我不知道如何修复以便继续进行的错误。

```
craven<-read.csv("cystfibr.csv")
craven
attach(craven)
Pemax
cor(craven)
round(cor(craven),2)
Model2<-lm(Pemax~Age+Sex+Height+Weight+Bmp+Fev1+Rv+Frc+Tlc)
summary(Model2) 
```

注意 'cystfibr.csv' 是 excel 中的以下内容并保存在我的文档中

![在此处输入图像描述](../Images/31a79a942f693fd6d22131802e14a53a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:06:36.353

请不要使用 attach()，除非你知道它的作用——例如使用`data`lm() 的参数。

查看您的 excel 表，您的变量名称看起来都是小写的，但是在您的模型规范中，名称以大写字母开头。这可能会导致错误（哪个错误？）。

# asp.net-mvc - 淘汰视图模型部分回发到 ASP.NET MVC - 如何回发完整对象？

> ID：15273994
> 
> 赞同：1
> 
> 时间：2013-03-07T14:39:13.350
> 
> 标签：asp.net-mvc, knockout.js, viewmodel, knockout-2.0, asp.net-mvc-viewmodel

拥有这些 ASP.NET MVC 视图模型：

```
public class User
  {
    public string Name { get; set; }
    public LabeledEmail LabeledEmail { get; set; }
  }
public class LabeledEmail
  {
    public IList<ContactLabel> Labels;
    public IList<ContactEmail> Emails;
  } 
```

和像这样的淘汰赛视图模型：

```
 <script type="text/javascript">

    $(function() {
      ko.applyBindings(viewModel);

      $("#profileEditorForm").validate({
    submitHandler: function(form) {
      if (viewModel.save())
        window.location.href = "/";
      return false;
    }
      });
    });

    var viewModel = {

      Name: ko.observable("@Model.Name"),

      EmailLabels: ko.observableArray(@Html.Json(Model.LabeledEmail.Labels.Select(l => l.Name)) || []),
      Emails: ko.observableArray(@Html.Json(Model.LabeledEmail.Emails) || []),

      addEmail: function() {
    viewModel.Emails.push(@Html.Json(new ContactEmail()));
      },
      removeEmail: function(eml) {
    viewModel.Emails.remove(eml);
      },

      saveFailed: ko.observable(false),

      // Returns true if successful
      save: function() {
    var saveSuccess = false;
    viewModel.saveFailed(false);

    jQuery.ajax({
      type: "POST",
      url: "@Url.Action("MyAction", "MyController")",
      data: ko.toJSON(viewModel),
      dataType: "json",
      contentType: "application/json",
      success: function(returnedData) {
        saveSuccess = returnedData.Success || false;
        viewModel.saveFailed(!saveSuccess);
      },
      async: false
    });     
    return saveSuccess;
      }
    };
</script> 
```

正确回传到控制器的是`User.Name`，但是`User.LabeledEmail`是空的。我必须按照我的方式展平模型，以便能够在其他地方单独使用列表。事实上，我知道 viewModel.Emails 在保存时已正确填充，但 User.LabeledEmails 以某种方式返回 null。

它基本上归结为分配`Model.LabeledEmail.Emails`和`viewModel.Emails`交易将得到解决，似乎，但我不知道如何也找不到任何合适的例子。

1.  我犯了什么错误
2.  如何正确地做到这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:05:21.157

您的 JSON 数据结构应与 C# 类的结构相匹配，尤其是属性名称。所以你需要发送一个看起来像这样的 JSON：

```
{
    Name: 'somename',
    LabeledEmail: {
        Labels: [ somelements ],
        Emails: [ someelements ]
    }
} 
```

所以改变你的`data: ko.toJSON(viewModel),`：

```
data: JSON.stringify({
   Name: viewModel.Name(),
   LabeledEmail: { 
       Labels: viewModel.EmailLabels(),
       Emails: viewModel.Emails()
   }
}) 
```

或者只是在客户端和服务器上使用相同结构的数据......

附带说明：您的 C# 视图模型需要具有属性而不是字段才能使 MVC 模型绑定器正常工作：

```
public class User
{
    public string Name { get; set; }
    public LabeledEmail LabeledEmail { get; set; }
}

public class LabeledEmail
{
    public IList<ContactLabel> Labels { get; set; }
    public IList<ContactEmail> Emails { get; set; }
} 
```

# c# - 显示 200 帧的动画

> ID：15273995
> 
> 赞同：-1
> 
> 时间：2013-03-07T14:39:15.530
> 
> 标签：c#, animation

我有 200 个动画，由 200 个 png 图像组成。在 C# 应用程序中加载它并循环通过它以获得平滑动画的最佳方法是什么。图像尺寸为 640x480。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:48:04.337

要在 Visual Studio/.NET 中嵌入资源并使用它们，您需要知道的所有内容都写[在这里](http://support.microsoft.com/kb/319292/en-us)。实际上，还有很多其他指南。

# java - 如何从 JTextPane 中删除图片？

> ID：15273996
> 
> 赞同：0
> 
> 时间：2013-03-07T14:39:21.400
> 
> 标签：java, swing, user-interface, image, jtextpane

我有一个代码可以让用户将图片插入到他的文本文档中。我确实有一个 JtextPane，用户可以在其中编写一些文本并插入图片。但是，如果图片已经插入，则在不关闭整个程序的情况下就不可能删除它。用户如何按退格键删除图片？

我现在的代码：

```
 @Override
    public void actionPerformed(ActionEvent arg0) {
JFileChooser fileChooser = new JFileChooser();
            int option = fileChooser.showOpenDialog(null);
            File file = fileChooser.getSelectedFile();

            if (option == JFileChooser.APPROVE_OPTION){

        try {
            BufferedImage image = ImageIO.read(file);
            image = Scalr.resize(image, 150);
            document = (StyledDocument)textPane.getDocument();
            javax.swing.text.Style style = document.addStyle("StyleName", null);
            StyleConstants.setIcon(style, new ImageIcon(image));
            document.insertString(document.getLength(), "ignored text", style);
        } 

        catch (Exception e){
            e.printStackTrace();
        }

        }

            if (option == JFileChooser.CANCEL_OPTION){

                fileChooser.setVisible(false);

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:46:35.973

[查看javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JTextPane.html#removeStyle%28java.lang.String%29)的方法链接`removeStyle(String stylename)`

总之，您需要做的是为上述方法提供您希望从文档中删除的样式的名称。所以在你的情况下（根据你的例子）

```
textPane.removeStyle("StyleName"); 
```

现在，要使用退格键删除它，您需要跟踪插入的图像（或者更确切地说，包含图像的样式）的插入位置，以及相应的样式名称在哪里命名。然后，在退格上，不断检查是否需要删除，如果需要，使用`removeStyle("relevantStyleName")`删除

# google-app-engine - 使用 Python 创建与 App Engine 连接的 Android 项目

> ID：15273999
> 
> 赞同：1
> 
> 时间：2013-03-07T14:39:27.437
> 
> 标签：google-app-engine, google-cloud-endpoints, gae-eclipse-plugin

我找到了一个看似简单的[应用程序引擎教程，用于创建带有 java 后端的 android 应用程序](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)。应用引擎是否有使用 Python 而不是 Java 的教程？我一直找不到。即使没有像 Java 那样简单的 python 插件，是否有人知道与 appEngine 提供的 java 插件的明显简单性非常接近的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:56:10.933

App Engine 为 Python 开发人员提供了大量教程和材料，但它们没有您列出的 Python 等价物。

不过没关系，因为无论如何这已经过时了。将 App Engine 连接到 Android（或 iOS 或 Web）客户端的新方法是通过其端点服务/代码生成器，这同样适用于 Python 或 Java。