# StackOverflow 问答 13578000-13578999

# objective-c - 如何在目标 C/Xcode/iOS 中的 .lib 文件中隐藏 url

> ID：13578000
> 
> 赞同：0
> 
> 时间：2012-11-27T05:36:10.267
> 
> 标签：objective-c, ios, cocoa-touch, cocoa

我想为 iOS 制作一个广告框架，所以我需要在 lib 文件中隐藏“请求的服务器”的 url。但是由于存在一些像otool这样的工具来反编译lib文件，所以我担心黑客可以反编译我们的lib文件并获取url并发送连续的广告请求。所以任何人都可以给我一些想法，让我知道如何保护我们的“URL”免受黑客攻击。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:38:01.347

这似乎是个坏主意……如果您需要实施保护或速率限制，请在服务器端执行。不是通过在客户端代码中玩捉迷藏。

# java - 如何从具有 2 个不同包中的源代码的命令行运行 java 代码？

> ID：13578010
> 
> 赞同：2
> 
> 时间：2012-11-27T05:37:22.537
> 
> 标签：java, command-line, classpath, command-prompt

所以我想运行一个名为 WordFrequencyCounter 的类，它嵌套在以下文件夹中：C:\Users\Mike\Documents\Computer Science\AI\Machine Learning\175\Assignment 2\src\ir\assignments\two\b

但是当我进入该文件夹并运行时：

javac WordFrequencyCounter.java

它给了我一个错误，因为它说它找不到 import ir.assignments.two.a.Frequency; 具体来说，它说包 ir.assignments.two.a 不存在，但该文件位于：

C:\Users\Mike\Documents\Computer Science\AI\Machine Learning\175\Assignment 2\src\ir\assignments\two\a

我还尝试从以下文件夹中调用 javac WordFrequencyCounter.java：C:\Users\Mike\Documents\Computer Science\AI\Machine Learning\175\Assignment 2

但这也不起作用。所以我想要的是能够编译和运行 WordFrequencyCounter，然后从命令行输入一个位于 C:\Users\Mike\Documents\Computer Science\AI\Machine Learning\175\Assignment 2 中的输入文件。我可以从 IDE 执行此操作，但无法通过命令行使其工作。

我认为这是一个与类路径相关的问题，但对于我的特定示例，我找不到任何有用的东西，而且我尝试过的没有任何效果。 ![在此处输入图像描述](../Images/4e4bcc365e6d00464d27b33f2b968195.png)

下面是 WordFrequencyCounter 的主要方法：

```
public static void main(String[] args) throws FileNotFoundException {
    File file = new File(args[0]);

    List<String> words = Utilities.tokenizeFile(file);

    List<Frequency> frequencies = computeWordFrequencies(words);
    Utilities.printFrequencies(frequencies);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:43:25.013

转到 src 文件夹并运行

`javac -d . ir/assignments/2/b/MainClass.java`

并用于`java ir.assignments.2.b.MainClass`运行它。

# jquery - 根据侧jQuery中的另一个下拉列表填充下拉列表

> ID：13578013
> 
> 赞同：0
> 
> 时间：2012-11-27T05:37:37.997
> 
> 标签：jquery, asp.net, data-binding, drop-down-menu

我`jquery accordion`在我的 asp.net 项目中有一个。
在第一个选项卡内，我有 2 `drodownlists`。

1.  第一个病房号。
2.  另一个用于 BHTNo。

这两个与`database`.
当我从第一个下拉列表中选择一个病房时，我需要将与该病房相关的 BHTNo 加载到第二个下拉列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:41:59.157

你可以使用像 CascadingDropDown 这样的 asp.net 工具包功能，它可能会解决你的问题 [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)

# visual-studio-2010 - 将大型 DGML 图导出到 XPS

> ID：13578015
> 
> 赞同：3
> 
> 时间：2012-11-27T05:37:59.547
> 
> 标签：visual-studio-2010, architecture, xps, dgml

我目前有一个相当大的应用程序（大约 30k 行代码）。我使用 VS2010 中的架构工具生成了一个依赖关系图。我正在尝试将它导出到 XPS，因为它表明我可以，它会在大约 300KB 处停止，并且不会在 XPS 查看器中打开。

关于它为什么停止导出和损坏文件的任何想法，或者是吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:48:31.673

您可以在将图表转换为 XPS 之前通过另一个结构，例如将其保存为图像，以执行此操作：

```
Right-click the graph surface, and then click Copy Image.

Paste the image into another application. 
```

来源：http: [//msdn.microsoft.com/en-us/library/dd380607%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd380607%28v=vs.100%29.aspx)

# java - Hibernate 无法运行此 hql 查询

> ID：13578021
> 
> 赞同：1
> 
> 时间：2012-11-27T05:38:38.987
> 
> 标签：java, sql, hibernate, hql

我有这个查询

```
select faktur.* from
(select a.no_do, a.no_faktur, b.dlr_nama, a.crea_date from honda_h100_fakdos a, honda_h000_dealers b where a.kd_dlr=b.kd_dlr and a.status<>'X' and a.do_tahun>='2012') faktur 
```

它在我的 SQL 管理器上运行没有问题，但是当我将此 SQL 转换为 HQL 时，我总是收到此错误消息。

```
"expecting IDENT, found '*' near line 1" 
```

下面是我的 HQL

```
select f.* (select a.noDo, a.noFaktur, a.creaDate from HondaH100Fakdos a where a.status <> 'X' and a.doTahun >= '2012' and a.doBulan = '02')  f 
```

我仍然是 Hibernate 和 Java 的初学者。

有人可以解释为什么 Hibernate 不能将此查询转换为 HQL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:56:56.927

例如：

数据库实体：

```
public class User{

int id;

String name;

// setter and getter
} 
```

```
db table name : tn_user
       column : tn_id,tn_name

hql : "from User where id=? and name=?" 

? is parameter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:05:19.580

我认为您缺少`FROM`after `SELECT`：

```
select f.* from (select a.noDo, a.noFaktur, a.creaDate 
from HondaH100Fakdos a 
where a.status <> 'X' and a.doTahun >= '2012' and a.doBulan = '02') f 
```

无论如何，这个子选择在这里是没用的。这将为您带来相同的结果：

```
select a.noDo, a.noFaktur, a.creaDate 
from HondaH100Fakdos a 
where a.status <> 'X' and a.doTahun >= '2012' and a.doBulan = '02' 
```

# ruby-on-rails - 在Haml中将类附加到：markdown段落？

> ID：13578028
> 
> 赞同：3
> 
> 时间：2012-11-27T05:39:26.297
> 
> 标签：ruby-on-rails, haml, markdown

我不想要以下提供的额外包装 div：

```
.note
  :markdown
    Please, [don't use Haml for markup][x], for your sake!
    [x]: http://chriseppstein.github.com/blog/2010/02/08/haml-sucks-for-content/ 
```

但我不想写这个：

```
%p.note
  Please,
  = link_to("don't use Haml for markup", "http://chriseppstein.github.com/blog/2010/02/08/haml-sucks-for-content/") + ", for your sake!" 
```

有没有办法使用`:markdown`但也将 CSS 类附加到生成的段落标签？

见：[http ://chriseppstein.github.com/blog/2010/02/08/haml-sucks-for-content/](http://chriseppstein.github.com/blog/2010/02/08/haml-sucks-for-content/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:04:08.047

简短的回答似乎是：[不](https://stackoverflow.com/questions/1058933/can-i-define-a-class-name-on-paragraph-using-markdown)。这是 Markdown 问题，而不是 HAML 问题。

您可以通过直接在`markdown`块中使用 HTML 来做到这一点：

```
:markdown
  <p class="note">
    some more HTML
  </p> 
```

但是你不能在标签内粘贴 markdown，因为那里的所有内容都被解释为 HTML 而不是 Markdown。可能有一些扩展允许您添加这样的类，但显然这在本机是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T06:01:20.783

我发现这样做的最好方法是使用 Maruku 过滤器（您可能需要 haml-contrib gem），因为 Maruku 实现了标准 Markdown 的[PHP Markdown Extra](http://michelf.ca/projects/php-markdown/extra/)扩展。这使得很多简洁的东西成为可能，包括在封闭的块元素中指定 Markdown 解析`markdown='1'`，所以你可以做

```
:maruku
  <p class='note' markdown='1'>
    Please, [don't use Haml for markup][x], for your sake!
  </p>  
  [x]: http://chriseppstein.github.com/blog/2010/02/08/haml-sucks-for-content/ 
```

变成

```
<p class='note'>Please, <a href='http://chriseppstein.github.com/blog/2010/02/08/haml-sucks-for-content/'>don&#8217;t use Haml for markup</a>, for your sake!</p> 
```

（是的，在这种情况下，链接 ref 需要在之后`</p>`。）

请注意，Maruku 在这种情况下不会插入额外的包装器元素。

使用这种语法将类放在其他元素上更容易：

```
:maruku
  # Cool stuff {#cool_stuff}

  You can put classes and IDs on [links](links.html){.links} too. 
```

变成

```
<h1 id='cool_stuff'>Cool stuff</h1>

<p>You can put classes and IDs on <a class='links' href='links.html'>links</a> too.</p> 
```

# android - 在 ListView 中设置选定节点的背景

> ID：13578029
> 
> 赞同：0
> 
> 时间：2012-11-27T05:39:32.167
> 
> 标签：android, android-listview

我有一个水平的 ListView，它以文件夹的形式显示一些项目。单击这些项目将打开该节点的子节点。我想设置所选节点的背景。我可以在 Adapter 类中使用此代码执行此操作：

```
public void bindView(View view, Context context, Cursor cursor) {
    this.cursorPosition = cursor.getPosition();
    if (this.cursorPosition == selectedPosition) {
        holder.title.setBackgroundResource(R.color.toc_selected);
    }
} 
```

这`selectedPosition`是所选项目的位置，我将其设置在不同的位置。

如果在单击项目后向左/向右滑动项目，此代码将失败。一次`ListView`显示 8 个项目，其值为`cursor.getPosition()`as `0,1,2,...,7`。如果我们滑动第`ListView`9 个元素的值为`cursor.getPosition()`0，第 10 个元素的值为 1，依此类推。因此，如果我们选择第一个节点，那么它将在列表视图中选择第一个和第 9 个节点。在滑动视图的情况下更新位置。此外，如果我们选择第 9 项，那么第 1 项也将被选中，因为第 1 和第 9 节点的 getPosition 相同，即 0。

有没有办法摆脱这种情况？

# php - 显示过去 24 小时的推文

> ID：13578030
> 
> 赞同：1
> 
> 时间：2012-11-27T05:39:32.803
> 
> 标签：php, json, twitter

试图从用户返回过去 24 小时内的所有推文，但不知道该怎么做，这是我目前拥有的代码，只是为了获取最后 5 条推文，不知道下一步该怎么做.. .

谢谢马特。

```
<?php
$username = "MelbournePollen";
$count = 5;
$tweet=json_decode(file_get_contents("http://api.twitter.com/1/statuses/user_timeline/".$username.".json?count=".$count."" ));

for ($i=1; $i <= $count; $i++){
    //Assign feed to $feed
    $feed = $tweet[($i-1)]->text;
    echo date("M \- j",strtotime($tweet[($i-1)]->created_at)). " -- " .$feed. "</br>";
    }?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:50:09.093

以下代码应基于您的逻辑引导您朝着正确的方向前进（我的代码未经测试）：

```
<?php
    $username = "MelbournePollen";
    $count = 5;
    $tweet=json_decode(file_get_contents("http://api.twitter.com/1/statuses/user_timeline/".$username.".json?count=".$count."" ));

    $tweets = array();
    for ($i=1; $i <= $count; $i++){
        //Assign feed to $feed
        $feed = $tweet[($i-1)]->text;
        $time_between = time() - strtotime($tweet[($i-1)]->created_at);
        $twenty4hours = 60 * 60 * 24;
        if($time_between <= $twenty4hours)
        {
            $tweets[] = $tweet;
        }
    } 
    //Use $tweets array as needed
?> 
```

# python - Python：如果一个列表中的元素，更改另一个列表中的元素？

> ID：13578031
> 
> 赞同：0
> 
> 时间：2012-11-27T05:39:42.000
> 
> 标签：python, list, comparison

我有两个列表（长度不同）。一个在整个程序中发生变化（`list1`），另一个（更长）没有（`list2`）。基本上我有一个函数应该比较两个列表中的元素，如果一个元素 in ，`list1`则`list2`副本中的元素`list2`更改为“A”，副本中的所有其他元素都更改为“B” . 当.中只有一个元素时，我可以让它工作`list1`。但是由于某种原因，如果列表更长，则所有元素都`list2`依次为 B....

```
def newList(list1,list2):         
    newList= list2[:]  
    for i in range(len(list2)):  
        for element in list1:  
            if element==newList[i]:  
                newList[i]='A'  
            else:
                newList[i]='B'  
    return newList 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:53:17.780

Try this:

```
newlist = ['A' if x in list1 else 'B' for x in list2] 
```

Works for the following example, I hope I understood you correctly? If a value in `B` exists in `A`, insert `'A'` otherwise insert `'B'` into a new list?

```
>>> a = [1,2,3,4,5]
>>> b = [1,3,4,6]
>>> ['A' if x in a else 'B' for x in b]
['A', 'A', 'A', 'B'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:52:35.923

It could be because instead of

```
newList: list2[:] 
```

you should have

```
newList = list2[:] 
```

Personally, I prefer the following syntax, which I find to be more explicit:

```
import copy
newList = copy.copy(list2) # or copy.deepcopy 
```

Now, I'd imagine part of the problem here is also that you use the same name, `newList`, for both your function and a local variable. That's not so good.

```
def newList(changing_list, static_list):
    temporary_list = static_list[:]
    for index, content in enumerate(temporary_list):
        if content in changing_list:
            temporary_list[index] = 'A'
        else:
            temporary_list[index] = 'B'
    return temporary_list 
```

Note here that you have not made it clear what to do when there are multiple entries in `list1` and `list2` that match. My code marks all of the matching ones `'A'`. Example:

```
>>> a = [1, 2, 3]
>>> b = [3,4,7,2,6,8,9,1]
>>> newList(a,b)
['A', 'B', 'B', 'A', 'B', 'B', 'B', 'A'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:53:42.333

I think this is what you want to do and can put newLis = list2[:] instead of the below but prefer to use list in these cases:

```
def newList1(list1,list2):         
     newLis = list(list2)
     for i in range(len(list2)):  
          if newLis[i] in list1:  
               newLis[i]='A'  
          else: newLis[i]='B'  
     return newLis 
```

The answer when passed

```
newList1(range(5),range(10)) 
```

is:

```
['A', 'A', 'A', 'A', 'A', 'B', 'B', 'B', 'B', 'B'] 
```

# android - 使用地图中的纬度和经度值显示经过的路线

> ID：13578033
> 
> 赞同：1
> 
> 时间：2012-11-27T05:39:46.927
> 
> 标签：android, android-maps

我有一个 android 应用程序，它将不断向服务器发送位置信息（纬度和经度值）。另一个应用程序将检索这些信息并将其显示在 textview 中。

我需要做的是在我的第二个应用程序中显示在文本视图中，我需要添加一个地图视图，该地图视图通过使用纬度和经度值在地图上标记它来显示该位置。

怎么做 ？提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:12:33.573

由于您已经获取了位置信息，现在您只需要在地图视图上标记点以在地图视图上显示所需的位置，您应该[使用 google maps android](http://mobiforge.com/developing/story/using-google-maps-android)

在这里，您将找到一个关于如何在地图视图上添加标记的好示例。

# php - 如何使用我的 apache/php 网络托管来设置收音机？

> ID：13578035
> 
> 赞同：0
> 
> 时间：2012-11-27T05:39:47.837
> 
> 标签：php, apache, audio, stream, radio

有没有办法使用我的 Apache/PHP 网络托管来设置网络收音机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:52:47.693

如果我说得对，您想设置一个网络广播，而不是一个文件访问系统来流式传输到单台计算机。

在这种情况下，我建议你看看

Linux [http://www.howtoforge.com/linux_webradio_with_icecast2_ices2](http://www.howtoforge.com/linux_webradio_with_icecast2_ices2)

Windows 另一种方法是使用 Winamp的[http://www.shoutcast.com/ ，它可以通过网络界面进行控制，如果运行 apache 服务器，可以通过互联网访问](http://www.shoutcast.com/)

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:55:11.567

I dont know wich platform you have, but take a look at these sites:

For Windows: [http://www.ehow.com/how_7637097_stream-audio-apache-server.html](http://www.ehow.com/how_7637097_stream-audio-apache-server.html)

For Linux: (it says its for Free BSD, but you can use it in every type of Linux, just some commands may be diffrent) [http://drewish.com/writeups/radio_station_website_with_freebsd](http://drewish.com/writeups/radio_station_website_with_freebsd)

# android - Android相机选择图像并上传

> ID：13578037
> 
> 赞同：0
> 
> 时间：2012-11-27T05:40:25.773
> 
> 标签：android

我已经编写了捕获照片并将捕获的图像上传到 Facebook 的代码。它适用于所有设备，但是当我尝试在三星 Galaxy s3 上运行应用程序时，应用程序崩溃并出现内存不足错误，当我压缩图像时它显示空指针异常。

```
 Intent intent = new Intent(
                MediaStore.ACTION_IMAGE_CAPTURE);
         this.file = new File(
                Environment
                        .getExternalStorageDirectory(),
                "tmp_"
                        + String.valueOf(System
                                .currentTimeMillis())
                        + ".jpg");
        ImageCaptureUri = Uri.fromFile(file);

        try {
            intent.putExtra(
                    android.provider.MediaStore.EXTRA_OUTPUT,
                    ImageCaptureUri);
            intent.putExtra("return-data", true);

            startActivityForResult(intent,
                    PICK_FROM_CAMERA);
        } catch (Exception e) {
            e.printStackTrace(); 
```

## }

::onActivityResult

```
uploadBitmap= decodeFile(MainActivity.this.file);

                         int width = uploadBitmap.getWidth()/3;
                         int height = uploadBitmap.getHeight()/3;

                 //     uploadBitmap=Bitmap.createScaledBitmap(uploadBitmap, 50, 50, false);

                        ByteArrayOutputStream stream = new ByteArrayOutputStream();
                        uploadBitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);

                        byte[] byteArray = stream.toByteArray();

                        // Bitmap bitmap = BitmapFactory.decodeFile(path);

                        if (photoUrl != null) {
                            Bundle params = new Bundle();

                            params.putByteArray("photo", byteArray);

                            params.putString("caption",
                                    MainActivity.locationData+" lat: "+MainActivity.latitude+" long:"+MainActivity.longitude);

                            String place ="\"location\""+": {"+
                                   "\"latitude\""+":"+"\"12.9833\""+","+
                                   "\"longitude\""+":"+"\"77.5833\""+
                                "}";

                            params.putString("place", placeid);

                            Utility.mAsyncRunner.request("me/photos", params, "POST",
                                    new PhotoUploadListener(), null);
                        } else {
                            Toast.makeText(getApplicationContext(),
                                    "Error capturing image",
                                    Toast.LENGTH_SHORT).show();
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:47:45.600

try to decode as below

```
public static Bitmap decodeFile(File f,int WIDTH,int HIGHT){
        try {
            //Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //The new size we want to scale to
            final int REQUIRED_WIDTH=WIDTH;
            final int REQUIRED_HIGHT=HIGHT;
            //Find the correct scale value. It should be the power of 2.
            int scale=1;
            while(o.outWidth/scale/2>=REQUIRED_WIDTH && o.outHeight/scale/2>=REQUIRED_HIGHT)
                scale*=2;

            //Decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    } 
```

# c++ - String.substring 不返回 true

> ID：13578040
> 
> 赞同：1
> 
> 时间：2012-11-27T05:40:28.427
> 
> 标签：c++, string, arduino

我正在研究一个 Arduino 和 String.substring 似乎没有正确运行，所以我想知道我可能做错了什么......

我的功能如下：

```
boolean processSerial()
{
     String buf;
     int iter = 0;
     char thisChar; 

     while(iter < 1000){
     if (Serial.available()) {
       #if ARDUINO >= 100 //For Arduino v1.0+
       {
         thisChar = Serial.read();
         buf += thisChar;
         //if(DEBUG){Serial.print(thisChar);}
       }  
       #else //For Arduino v0023 or earlier
         thisChar = Serial.read();
       #endif
     }
     iter++;
     }
     Serial.print(buf);
     Serial.print(buf.substring(0,10));

     if(buf.substring(1) == "GPGGA"){
        Serial.println("FOUND IT!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
        }
        Serial.println("And we're done");

} 
```

模式“GPGGA”即将出现，但子字符串未返回 true。

我的 Serial 的输出如下：

```
$GPGGA,053540.000,3804.1237,N,07615.5232,W,1,7,1.39,117.5,M,-33$GPGGA,053And we're done 
```

因此`buf`，字符串中显然有“GPGGA”。再次显示“GPGGA”的最后一点是字符串中字符 0-10 的打印。为什么我的`if`陈述不正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T05:43:26.340

`buf.substring(1)`返回从位置 1 开始并一直持续到字符串末尾的子字符串。这将从 开始`GPGGA`，但不会*相等* `GPGGA`。

如果您知道要比较的字符串长度为 5 个字符，则可以使用

```
if (buf.substring(1,1+5) == "GPGGA")
  /* ... */ 
```

另请注意，`substring()`返回 true 的不是函数，而是比较运算符`==`。

# javascript - 选择表格中的正确单元格时显示正确答案

> ID：13578043
> 
> 赞同：4
> 
> 时间：2012-11-27T05:40:34.780
> 
> 标签：javascript, html, css

我在下面写了一个代码。我在这里要做的是，当三个正确的单元格被选中时，它应该显示一条消息说“Right”，如果没有，那么应该说“再试一次”。到目前为止，我的代码只突出显示了单元格。我想知道下一步我该如何进行？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<style>
table {
width:400px;
font-family:Verdana, Arial, Helvetica, sans-serif;
border:1px solid #000;
}
table td {border:1px solid #000;}
.bgrd {background-color:#CCCCCC;cursor:pointer;}
.bgrd_selected {background-color:#FFCC00;cursor:pointer;}

</style>
<script type="text/javascript">
function setColor(what)
{
    var thetds = document.getElementsByTagName('td');
    for(var i = 0; i < thetds.length; i++)
    {
        if(thetds[i].className == 'bgrd_selected')
        {
            thetds[i].className = 'bgrd';
        }
    }
    what.className = 'bgrd_selected';
}
</script>
</head>
<body>
<table cellspacing="0" cellpadding="0">
<tr>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>

</tr>
<tr>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>

</tr>

<tr>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>

</tr>

<tr>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>

</tr>

<tr>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>

</tr>

<tr>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>

</tr>

<tr>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>
<td class="bgrd" onclick="setColor(this)">
Select</td>

</tr>
</table>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:03:05.187

我不确定我是否理解你。但是试试这段代码。

```
 <table id="myTable" cellspacing="0" cellpadding="0">
        <tr>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>

        </tr>
        <tr>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>

        </tr>

        <tr>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>

        </tr>

        <tr>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>

        </tr>

        <tr>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>

        </tr>

        <tr>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>

        </tr>

        <tr>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>
            <td class="bgrd" onclick="setColor(this)">
            Select</td>

        </tr>
    </table>

    <script type="text/javascript">
        var answerRow = 5;
        var noOfCols = 3;

        function setColor(what)
        {
            if(what.className == 'bgrd_selected')
            what.className = 'bgrd';
            else
            what.className = 'bgrd_selected';
            if(what.parentNode.getElementsByClassName('bgrd_selected').length == noOfCols)
            {
                if(document.getElementById('myTable').getElementsByTagName('tr')[answerRow].getElementsByClassName('bgrd_selected').length == noOfCols)
                    alert('You win');
                else
                {
                    alert('Try again');
                var arr = document.getElementById('myTable').getElementsByTagName('td') ;
                    for(var i=0;i<arr.length;i++)
                    {
                        arr[i].className="bgrd";
                    }
                }
            }
        }

</script>
<style type="text/css">
    table {
    width:400px;
    font-family:Verdana, Arial, Helvetica, sans-serif;
    border:1px solid #000;
    }
    table td {border:1px solid #000;}
    .bgrd {background-color:#CCCCCC;cursor:pointer;}
    .bgrd_selected {background-color:#FFCC00;cursor:pointer;}

</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:53:55.767

如果有某些正确答案，您需要唯一地识别每种可能性。我使用了 id 标签

**HTML**

```
<table cellspacing="0" cellpadding="0">
<tr>
    <td class="bgrd" id="A1" onclick="setColor(this)">Select</td>
    <td class="bgrd" id="A2" onclick="setColor(this)">Select</td>
    <td class="bgrd" id="A3" onclick="setColor(this)">Select</td>
</tr>
<tr>
    <td class="bgrd" id="B1" onclick="setColor(this)">Select</td>
    <td class="bgrd" id="B2" onclick="setColor(this)">Select</td>
    <td class="bgrd" id="B3" onclick="setColor(this)">Select</td>
</tr>
[ ... ] 
```

接下来**是 Javascript**。这需要定义您的正确答案，切换用户单击的元素的类名，然后计算所选元素的数量和选择的正确答案的数量。最后，如果选择的数字与正确答案的数量相匹配，那就对了！

```
var answers = ["A1","B2","C3"];

function setColor(what){
    // Toggle the class name for the selected element
    what.className = (what.className == 'bgrd' ? 'bgrd_selected' : 'bgrd');

    // Set number of correct answers and selected answers to 0
    var numCorrect = 0,
        numSelected = 0;

    // Loop all relevant elements
    var thetds = document.getElementsByTagName('td');
    for(var i = 0; i < thetds.length; i++){
        // if an element is selected, add one to numSelected
        if(thetds[i].className == 'bgrd_selected'){
            numSelected++;
        }
    }

    // Loop all possible correct answers
    for(var i = 0; i < answers.length; i++){
        // If an answer is selected, add one to numCorrect
        if(document.getElementById(answers[i]).className == 'bgrd_selected'){
            numCorrect++;
        }
    }
    // Determine if there are the same number of numCorrect and numSelected as there are answers
    document.getElementById("out").innerHTML =
        (numCorrect == answers.length && numSelected == answers.length ? "Right" : "Try Again!");
} 
```

[http://jsfiddle.net/aWsCu/](http://jsfiddle.net/aWsCu/)

当然，有几种方法可以做到这一点，这绝不是最好或最干净的......但是，这是一个开始。

# asp-classic - 将查询字符串从 asp 传递到 htm 文件 vbscript

> ID：13578046
> 
> 赞同：0
> 
> 时间：2012-11-27T05:40:46.723
> 
> 标签：asp-classic, vbscript

我有 2 个文件，一个 SendEmail.asp 和一个 Home.htm 文件。

在 Home.htm 中，我通过以下方式将 VB 脚本中的一些值传递给 SendEmail：

```
document.formname.action = "SendEmail.asp?homepage =" + window.location.href; 
```

现在，当电子邮件成功完成后，我想将参数发送到 htm 文件并显示成功消息。

现在我以这种方式重定向到 home.htm：

```
response.redirect(request.QueryString("homepage")) 
```

如果我添加任何查询字符串，`home.htm?n1=success`那么我会收到错误消息。请提出您宝贵的建议和答案。

home.htm 文件中的代码：

```
<script language="javascript" type="text/javascript"> 
function fnSubmit()
{
  var retValue=true;
  if(retValue)
  {
    if(document.formname.txtName.value=='')
    {
        alert("Please enter Name");
        document.formname.txtName.focus();
        retValue=false;
    }
  }
  if(retValue)
  {
    if(checkEmail(document.formname.txtEmail, "Email", false)==false)
    {
        alert("Please enter Email");
        document.formname.txtEmail.focus();
        retValue=false;
    }
  }
  if(retValue)
  {
    if(document.formname.txtPhone.value=='')
    {
        alert("Please enter Phone No.");
        document.formname.txtPhone.focus();
        retValue=false;
    }
  }
  if(retValue)
  {
    if(document.formname.txtQuery.value=='')
    {
        alert("Please enter Your Query");
        document.formname.txtQuery.focus();
        retValue=false;
    }
  }
  if(retValue)
  {      
      document.formname.action = "SendEmail.asp?homepage =" + window.location.href;
      document.formname.submit(); 
  }
return false;

</script> 
```

点击按钮：

```
onclick="javascript:fnSubmit();" 
```

在 SendEmail.asp 文件中：

```
<%@  language="VBScript" %>
<%Option Explicit%>
<%
Dim Uploader, File, FileSys, FilePath, UploadFileName, strHTML, subject, Mailer, EmailAddress
subject = request("txtSubject")
EmailAddress = request("txtEmail")
strHTML = " Name : "&request("txtName")&" Email : "&request("txtEmail")&" Query : "&request("txtQuery")

Set Mailer=CreateObject("CDO.Message")
        Mailer.Subject="accurate-data-entry.com:: new"&subject
        Mailer.From= request("txtEmail")                
        Mailer.To="abc@gmail.com "
        Mailer.HTMLBody=strHTML        
        Mailer.Configuration.Fields.Item _
       ("http://schemas.microsoft.com/cdo/configuration/sendusing")=2
        Mailer.Configuration.Fields.Item _
        ("http://schemas.microsoft.com/cdo/configuration/smtpserver")="smtp.gmail.com"
        Mailer.Configuration.Fields.Item _
        ("http://schemas.microsoft.com/cdo/configuration/smtpserverport")=465  
        Mailer.Configuration.Fields.Item _
        ("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = 1
        Mailer.Configuration.Fields.Item _
        ("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 60
Mailer.Configuration.Fields.Item _ 
("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
Mailer.Configuration.Fields.Item _ 
("http://schemas.microsoft.com/cdo/configuration/sendusername") ="abc@gmail.com" 
Mailer.Configuration.Fields.Item _ 
("http://schemas.microsoft.com/cdo/configuration/sendpassword") ="xyz"  
        Mailer.Configuration.Fields.Update
        Mailer.send
        Set Mailer = nothing   
'Response.write("Done Successful") 
response.redirect(request.QueryString("homepage "))
%> 
```

如果我添加 Response.Write 我收到错误消息：

> CDO.Message.1 错误“80040213”
> 
> 传输无法连接到服务器。
> 
> /SendEmail.asp，第 41 行

第 41 行是 Mailer.send

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:20:34.280

您需要使用 jquery 使用 AJAx 提交表单。Jquery 将获取您所有的表单变量并将它们提交到您的 asp 页面以发送电子邮件。在asp页面中，去掉response.redirect。重定向不是必需的，它会破坏 ajax 响应。而是在 asp 页面中做一个 response.write “THANKS FOR YOUR MESSAGE” 或类似的东西。

查看 Jquery Ajax 文档。

```
 $.ajax({
   type: "POST",
   url: "SendEmail.asp",
   dataType: 'text',
   data: { username: username, password: password },
   success: function(data) {
     if(data == 'Incorrect password'){
       $('#results_callback').html(data);        
     }
     else{
       $('#results').html(data);
     }
   },
   error: function(msg) {
    alert("O NOES");
   }
}); 
```

# java - MongoDB: How to implement a PUT method for saving Objects?

> ID：13578051
> 
> 赞同：2
> 
> 时间：2012-11-27T05:41:28.507
> 
> 标签：java, mongodb, database

[http://www.mongodb.org/display/DOCS/Java+-+Saving+Objects+Using+DBObject](http://www.mongodb.org/display/DOCS/Java+-+Saving+Objects+Using+DBObject)

This page is about saving and retrieving objects in MongoDB. But after implementing DBObject, I have to override a bunch of methods. Does anyone know how to implement a PUT method so that "myTweet.put("user", userId);" can work?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T05:48:48.407

Instead of implementing [DBObject](http://api.mongodb.org/java/2.6/com/mongodb/DBObject.html) just extend [BasicDBObject](http://api.mongodb.org/java/2.6/com/mongodb/BasicDBObject.html)

```
class Tweet extends BasicDBObject {
  public Tweet() {
    super();
  }
  public Tweet(BasicDBObject base) {
    super();
    this.putAll(base);
  }
}

Tweet myTweet = new Tweet();
myTweet.put("user", userId); 
```

[BasicDBObject](http://api.mongodb.org/java/2.6/com/mongodb/BasicDBObject.html) implements [DBObject](http://api.mongodb.org/java/2.6/com/mongodb/DBObject.html) so a class that extends it can be passed to any function that expects a class that implements `DBObject`. If you wanted to implement the interface you would have to supply some container class to store the tweet attributes BasicDBObject does this by extending another class called `BasicBSONObject` which you can see in the [source](https://github.com/mongodb/mongo-java-driver/blob/master/src/main/com/mongodb/BasicDBObject.java), a naive implementation would look like this:

```
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

import org.bson.BSONObject;

import com.mongodb.DBObject;

public class Tweet implements DBObject {
    private Map<String, Object> data;
    private boolean partial;

    public Tweet() {
        data = new HashMap<>();
        partial = false;
    }

    @Override
    public Object put(String key, Object value) {
        return data.put(key, value);
    }

    @SuppressWarnings("unchecked")
    @Override
    public void putAll(BSONObject o) {
        data.putAll(o.toMap());
    }

    @SuppressWarnings({ "rawtypes", "unchecked" })
    @Override
    public void putAll(Map m) {
        data.putAll(m);
    }

    @Override
    public Object get(String key) {
        return data.get(key);
    }

    @SuppressWarnings("rawtypes")
    @Override
    public Map toMap() {
        return data;
    }

    @Override
    public Object removeField(String key) {
        return data.remove(key);
    }

    @Override
    public boolean containsKey(String key) {
        return data.containsKey(key);
    }

    @Override
    public boolean containsField(String key) {
        return data.containsKey(key);
    }

    @Override
    public Set<String> keySet() {
        return data.keySet();
    }

    @Override
    public void markAsPartialObject() {
        partial = true;
    }

    @Override
    public boolean isPartialObject() {
        return partial;
    }
} 
```

This class implements the `DBObject` and uses a `HashMap` to store it's properties.

# iphone - 如何将语音气泡绘制为 UITextview ContentSize

> ID：13578057
> 
> 赞同：5
> 
> 时间：2012-11-27T05:42:19.553
> 
> 标签：iphone, ios6, uitextview, uibezierpath, contentsize

`UIBezierpath`我在`UIView`课堂上使用了语音气泡。在视图类中包含 UITextView。我正在使用以下代码来绘制语音气泡。

//BezierPathView.h

```
@interface BezierpathView :  UIView<UITextViewDelegate>{

CGFloat animatedDistance;

UITextView *LXVolabel;
UIView *view;
UIBezierPath* speechBubbleTopPath;
UIBezierPath* rectanglePath;
UIBezierPath* speechBubbleBottomPath;
UIColor* darkGray;
UIColor* shadow;
CGSize shadowOffset;
CGFloat shadowBlurRadius;
NSString* textContent;
}
 @property(nonatomic,strong)UIView *view;
 @property(nonatomic,strong)UITextView *LXVolabel; 
```

//贝塞尔路径.m

```
@implementation BezierpathView
@synthesize LXVolabel,view;
- (id)initWithFrame:(CGRect)frame{
self = [super initWithFrame:frame];
if (self) {
    self.backgroundColor = [UIColor clearColor];
    self.LXVolabel = [[UITextView alloc]initWithFrame:CGRectMake(0, 0,self.frame.size.width , self.frame.size.height-10)];
    self.LXVolabel.backgroundColor = [UIColor clearColor];
    self.LXVolabel.delegate = self;
    self.LXVolabel.font = [UIFont systemFontOfSize:20];

    [self addSubview:self.LXVolabel];

    CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame];
    view = [[UIView alloc]initWithFrame:CGRectMake(0, 0, applicationFrame.size.width, applicationFrame.size.height)];

    // Color Declarations
    darkGray = [UIColor grayColor];

    // Shadow Declarations
    shadow= [UIColor blackColor];
    shadowOffset= CGSizeMake(0, 1);
    shadowBlurRadius= 1;

    // Abstracted Graphic Attributes
    textContent= LXVolabel.text;

}
return self;
}
 - (void)drawRect:(CGRect)rect
 {
[super drawRect:rect];
  CGContextRef  context = UIGraphicsGetCurrentContext();

   // Drawing code

//// General Declarations

// speechBubbleTop Drawing
speechBubbleTopPath = [UIBezierPath bezierPath];
[speechBubbleTopPath moveToPoint: CGPointMake(294, 7)];
[speechBubbleTopPath addCurveToPoint: CGPointMake(288, -0) controlPoint1: CGPointMake(294, 3.13) controlPoint2: CGPointMake(291.31, -0)];
[speechBubbleTopPath addLineToPoint: CGPointMake(8, -0)];
[speechBubbleTopPath addCurveToPoint: CGPointMake(2, 7) controlPoint1: CGPointMake(4.69, -0) controlPoint2: CGPointMake(2, 3.13)];
[speechBubbleTopPath addLineToPoint: CGPointMake(294, 7)];
[speechBubbleTopPath closePath];
[darkGray setFill];
[speechBubbleTopPath fill];

  // Rectangle Drawing
  rectanglePath = [UIBezierPath bezierPathWithRect: CGRectMake(2, 6, 292,self.frame.size.height-15)];
CGContextSaveGState(context);
CGContextSetShadowWithColor(context, shadowOffset, shadowBlurRadius, shadow.CGColor);
[darkGray setFill];
[rectanglePath fill];
CGContextRestoreGState(context);

// Text Drawing
CGRect textRect = CGRectMake(7, 6, 292, self.frame.size.height-15);
CGContextSaveGState(context);
CGContextSetShadowWithColor(context, shadowOffset, shadowBlurRadius, shadow.CGColor);
[[UIColor whiteColor] setFill];
[textContent drawInRect: textRect withFont: [UIFont fontWithName: @"Helvetica-Light" size: 14] lineBreakMode: NSLineBreakByWordWrapping alignment: NSTextAlignmentLeft];
//CGContextRestoreGState(context);

float addedHeight = 100 -38;

[self drawPath:addedHeight contextValue:context];
//speechBubbleBottom Drawing

speechBubbleBottomPath = [UIBezierPath bezierPath];
[speechBubbleBottomPath moveToPoint: CGPointMake(2, 24+addedHeight)];
[speechBubbleBottomPath addCurveToPoint: CGPointMake(8, 30+addedHeight) controlPoint1: CGPointMake(2, 27.31+addedHeight) controlPoint2: CGPointMake(4.69, 30+addedHeight)];
[speechBubbleBottomPath addLineToPoint: CGPointMake(13, 30+addedHeight)];
[speechBubbleBottomPath addLineToPoint: CGPointMake(8, 42+addedHeight)];
[speechBubbleBottomPath addLineToPoint: CGPointMake(25, 30+addedHeight)];
[speechBubbleBottomPath addLineToPoint: CGPointMake(288, 30+addedHeight)];
[speechBubbleBottomPath addCurveToPoint: CGPointMake(294, 24+addedHeight) controlPoint1: CGPointMake(291.31, 30+addedHeight) controlPoint2: CGPointMake(294, 27.31+addedHeight)];
[speechBubbleBottomPath addLineToPoint: CGPointMake(2, 24+addedHeight)];
[speechBubbleBottomPath closePath];
CGContextSaveGState(context);
CGContextSetShadowWithColor(context, shadowOffset, shadowBlurRadius, shadow.CGColor);
[darkGray setFill];
[speechBubbleBottomPath fill];
CGContextRestoreGState(context);

}
 -(void)textViewDidChange:(UITextView *)textView{
CGRect rect = textView.frame;
rect.size.height = textView.contentSize.height;// Adding.size Since height is not a member of CGRect
  self.frame = CGRectMake(10, 20, textView.frame.size.width, textView.contentSize.height+20);
   textView.frame = rect;
 } 
```

我的想法是，当我在文本视图中输入文本时，我想根据文本视图的文本增加对话气泡的大小。但是我的语音气泡大小没有正确增加。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:02:56.040

更改文本时是否触发重绘？

在 textViewDidChange 方法中添加...

```
[self setNeedsDisplay]; 
```

...作为最后一行。

这将再次触发 drawRect 方法。

# shell - 用于读取和更新 csv 文件的 Shell 脚本

> ID：13578061
> 
> 赞同：0
> 
> 时间：2012-11-27T05:43:07.603
> 
> 标签：shell, unix

在使用 Shell 脚本读取和更新 csv 文件时，我需要一些帮助。我已经编写了下面的代码来读取 csv 文件，它工作正常。

```
#!/bin/sh
#This script is to read the excel data
IFS=","
echo "Starting to read csv"
i=1
while read f1 f2
do
    test $i -eq 1 && ((i=i+1)) && continue
    echo "tenantID is :$f1"
    echo "status is   :$f2"

#The below command will update the schema with data

java -Xmx512m -XX:MaxPermSize=128m -jar biz.jar -install -readers=seed -          delegator=default#$f1

done < TenantId.csv

echo "end of file " 
```

上面的代码工作正常。即它读取csv 文件并将tenantID 传递给java arg。一旦 java 处理完成，我想用一些值更新状态（f2）。同样在上面的代码中，空白行也被执行。我想知道如何只处理存在数据的行。请让我知道如何实现同样的目标。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:53:55.233

```
while read f1 f2
do
    test $i -eq 1 && ((i=i+1)) && continue
    [ -z "$f1" ] && continue
    echo "tenantID is :$f1"
    echo "status is   :$f2"

    #The below command will update the schema with data

    java -Xmx512m -XX:MaxPermSize=128m -jar biz.jar -install -readers=seed -          delegator=default#$f1

    echo $f1, XXX >> TenantIdOut.csv
done < TenantId.csv 
```

添加了 2 行代码：

1.  如果 f1 为空，则继续 - 这是跳过空白行。
2.  将记录 f1 和新状态写入新文件，在循环之外，您可以用这个新文件重命名输入文件。

# java - 如何在 Mac 上的 IntelliJ IDEA 中增加 IDE 内存限制？

> ID：13578062
> 
> 赞同：347
> 
> 时间：2012-11-27T05:43:15.840
> 
> 标签：java, macos, intellij-idea, jvm-arguments

我在 Mountain Lion 上使用 IDEA 12 Leda。我想增加 IDE 可以使用的最大内存。我将 Info.plist 文件中的 VMOptions 设置为 `-Xmx2048m -ea -XX:+HeapDumpOnOutOfMemoryError -Xverify:none -Xbootclasspath/a:../lib/boot.jar`

打开IDEA，还是看到最大内存是711m。

`jps -v`显示我的 VMOptions 已加载，但已被以下选项替换。

```
29388  **-Xmx2048m** -ea -XX:+HeapDumpOnOutOfMemoryError -Xverify:none -Xbootclasspath/a:../lib/boot.jar -Xms128m **-Xmx800m** -XX:MaxPermSize=350m -XX:ReservedCodeCacheSize=64m -XX:+UseCodeCacheFlushing -XX:+UseCompressedOops -Didea.paths.selector=IdeaIC12 -Dsun.java2d.noddraw=true -Didea.max.intellisense.filesize=2500 -Didea.dynamic.classpath=false -Didea.jars.nocopy=false -Dsun.java2d.d3d=false -Dapple.awt.fullscreencapturealldisplays=false -Dapple.laf.useScreenMenuBar=true -Djava.endorsed.dirs= -Dswing.bufferPerWindow=false -Didea.fatal.error.notification=enabled -Didea.cycle.buffer.size=1024 -Didea.popup.weight=heavy -Didea.xdebug.key=-Xdebug -Dapple.awt.graphics.UseQuartz=true -Dsun.java2d.pmoffscreen=false -Didea.no.launcher=false -DCVS_PASSFILE=~/.cvspass -Didea.use.default.antialiasing.in.editor=false -Dcom.apple.mrj.application.live-resize=false -Didea.smooth.progress=false
29392 Jps -Dapplication.home=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home -Xms8m 
```

从哪里来`-Xmx800`？我需要删除它。

* * *

## 回答 #1

> 赞同：627
> 
> 时间：2012-11-27T09:54:31.847

当前版本：`Help`| `Change Memory Settings`：

[![更改内存设置](../Images/229052fbb0681d943ae4bf0d8cbd77a9.png)](https://i.stack.imgur.com/3mr53.png)

从 IntelliJ IDEA 15.0.4 开始，您还可以使用：`Help`| `Edit Custom VM Options...`：

这将自动在 config 文件夹中创建文件的副本`.vmoptions`并打开一个对话框进行编辑。

* * *

旧版本：

IntelliJ IDEA 12 是一个签名的应用程序，因此`Info.plist`不再建议更改选项，因为签名将不匹配，并且您会遇到问题，具体取决于您的系统安全设置（应用程序将不会运行，或者防火墙会在每次启动时抱怨，或者该应用程序将无法使用系统密钥库来保存密码）。

由于解决了[IDEA-94050](http://youtrack.jetbrains.com/issue/IDEA-94050)，在 IDEA 12 中引入了一种提供 JVM 选项的新方法：

> 现在它可以 `~/Library/Preferences/<appFolder>/idea.vmoptions`从`~/Library/Preferences/<appFolder>/idea.properties`.

例如，要使用**-Xmx2048m**选项，您应该将原始`.vmoptions`文件从复制`/Applications/IntelliJ IDEA.app/bin/idea.vmoptions`到`~/Library/Preferences/IntelliJIdea12/idea.vmoptions`，然后修改`-Xmx`设置。

最终文件应如下所示：

```
-Xms128m
-Xmx2048m
-XX:MaxPermSize=350m
-XX:ReservedCodeCacheSize=64m
-XX:+UseCodeCacheFlushing
-XX:+UseCompressedOops 
```

复制原始文件很重要，因为**没有添加**选项，而是**替换**了它们。

这样，您的自定义选项将在更新之间保留，并且应用程序文件将保持不变，使签名检查器满意。

* * *

**社区版**：`~/Library/Preferences/IdeaIC12/idea.vmoptions`改用文件。

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2016-09-18T22:28:41.120

[自 JetBrains UI 更改后于 2021 年 8 月更新]

我想我会在这个旧线程上分享有用的技巧。

您可以查看正在使用多少内存并使用`Memory Indicator`

右键单击最底部的任务栏区域并选择该`Memory Indicator`项目

[![如何通过右键单击启用内存指示器](../Images/066d3119d4c0c872d0f45a05601c1754.png)](https://i.stack.imgur.com/Rx4Sa.png)

它显示在窗口的右下方。

[![在此处输入图像描述](../Images/c897fdc5a0ffe5358520da885aa45541.png)](https://i.stack.imgur.com/3kuTy.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-10-21T13:49:50.190

对于 IDEA 13 和 OS X 10.9 Mavericks，正确的路径是：

原文：/Applications/IntelliJ IDEA 13.app/Contents/bin/idea.vmoptions

复制到：~/Library/Preferences/IntelliJIdea13/idea.vmoptions

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-06-17T17:48:58.713

这是截至今天的最新文档的链接[http://www.jetbrains.com/idea/webhelp/increasing-memory-heap.html](http://www.jetbrains.com/idea/webhelp/increasing-memory-heap.html)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-07-08T10:51:16.473

转到该路径“C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.1.4\bin\idea.exe.vmoptions”并将大小更改为 -Xmx512m

```
 -Xms128m
  -Xmx512m
  -XX:MaxPermSize=250m
  -XX:ReservedCodeCacheSize=64m
  -XX:+UseCodeCacheFlushing
  -ea
  -Dsun.io.useCanonCaches=false
  -Djava.net.preferIPv4Stack=true 
```

希望它会起作用

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-09-12T18:24:50.893

至于intellij2018版本我使用如下配置以获得更好的性能

```
-server
-Xms1024m
-Xmx4096m
-XX:MaxPermSize=1024m
-XX:ReservedCodeCacheSize=512m
-XX:+UseCompressedOops
-Dfile.encoding=UTF-8
-XX:+UseConcMarkSweepGC
-XX:+AggressiveOpts
-XX:+CMSClassUnloadingEnabled
-XX:+CMSIncrementalMode
-XX:+CMSIncrementalPacing
-XX:CMSIncrementalDutyCycleMin=0
-XX:-TraceClassUnloading
-XX:+TieredCompilation
-XX:SoftRefLRUPolicyMSPerMB=100
-ea
-Dsun.io.useCanonCaches=false
-Djava.net.preferIPv4Stack=true
-Djdk.http.auth.tunneling.disabledSchemes=""
-XX:+HeapDumpOnOutOfMemoryError
-XX:-OmitStackTraceInFastThrow
-Xverify:none

-XX:ErrorFile=$USER_HOME/java_error_in_idea_%p.log
-XX:HeapDumpPath=$USER_HOME/java_error_in_idea.hprof 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-11-16T06:40:38.830

IntelliJ 的最新版本（当然是 WebStorm 和 PhpStorm）通过添加一个`Help >> Change Memory Settings`菜单项来打开一个可以设置内存限制的对话框，从而使这种更改变得更加容易。

[![显示内存限制设置的菜单项](../Images/72c6a592c8236ce75d72e4bf83d8a226.png)](https://i.stack.imgur.com/GwLOS.png) [![内存设置对话框](../Images/cad60ae360b4ecb93ba97b304ee2fb33.png)](https://i.stack.imgur.com/lxOve.png)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-11-07T07:24:02.367

OSX 10.9，如果您不关心已签名的应用程序，您可能会更改

```
/Applications/IntelliJ\ IDEA\ 12\ CE.app/bin/idea.vmoptions 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-11-28T08:58:55.810

在我的机器上，这仅适用于`bin/idea.vmoptions`，添加设置`~/Library/Preferences/IntelliJIdea12/idea.vmoptions`会导致 IDEA 在启动期间挂起。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-04-20T02:01:45.783

看起来 IDEA 为您解决了这个问题（就像其他一切一样）。当加载一个大型项目并让它抖动时，它将打开一个对话框来设置内存设置。Xmx 输入 2048 并单击“关闭”，然后重新启动 IDEA 会使 IDEA 以更多内存启动。这似乎适用于 Mac OS，尽管它似乎从未在 Windows 上持续存在（不确定 IDEA 12）。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-08-29T09:21:18.317

此处对最佳答案的一些补充[https://stackoverflow.com/posts/13581526/revisions](https://stackoverflow.com/posts/13581526/revisions)

1.  随心所欲地改变记忆`.vmoptions`
2.  如此处所述启用内存视图[https://stackoverflow.com/a/39563251/5515861](https://stackoverflow.com/a/39563251/5515861)

你会在右下角有这样的东西

[![在此处输入图像描述](../Images/a32114448a41c020af41d02585e233c1.png)](https://i.stack.imgur.com/BgGjA.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-11T21:37:24.347

我使用 Mac 和 Idea 14.1.7。在此处找到idea.vmoptions 文件：/Applications/IntelliJ IDEA 14.app/Contents/bin

[细节](https://intellij-support.jetbrains.com/hc/en-us/articles/206544869-Configuring-JVM-options-and-platform-properties)

# php - 使用 PHP 处理动态表单值的问题

> ID：13578064
> 
> 赞同：0
> 
> 时间：2012-11-27T05:43:23.237
> 
> 标签：php, forms, loops, foreach

我有一个用于动态添加/删除项目的循环，但是每次只删除最后一个项目。我可以添加项目就好了。

我不知道为什么无论我尝试从 add_friends 和 register_tasks 中删除哪些项目，只有最后一个项目被删除。当我回显 $_POST['task_name'] 时，它始终是列表中的最后一项，而不是我选择的一项（当然，除非我选择了最后一项）。

这是表格

```
 <center><h2>Create Event</h2></center>
        <form method="post"> 
        <?
        $form = new common_functions();

        if($form->check_saved_forms($my_username, "event") == TRUE){
            $this->existing_forms(); //allow the user to select existing forms that they have created
       }

        ?>               
        <tr><td>Title:</td><td><input type="text" width="20%" name="event_title" value="<? echo $form_data[0]; ?>" /></td></tr>
        <tr><td>Details:</td><td><input type="text" width="20%" name="event_details" value="<?echo $form_data[1]; ?>" /></td></tr>
        <tr><td>Date:</td><td><input type="text" width="20%" name="event_date" id="event_date" value="<? echo $form_data[2]; ?>" /></td></tr>
        <tr><td> <input type="submit" name = "submit_event" id = "lOBut" value="Create Event" /></td></tr>  
        </table>

    <?
    //this is the section giving me trouble
    $form->add_friends($added_friends); 
    $form->register_tasks($tasks,$nums); 
    ?>
    </form> 
```

add_friends 和 register_tasks 都通过文本框动态添加和删除好友/任务，并显示添加项目的列表。用户可以删除项目，但是，现在只有最后一个项目是可移动的，我不知道为什么。

这是寄存器（add_friend 是相同的，但标记不同）

```
function register_tasks($tasks,$nums){
    <table>    
    <td><input type="textbox" size="50" name="register_description"/> </td></tr>
    <td><input type ="textBox" name="register_num" /> </td>
    <td><input type="submit" name="add_register_tasks" value="Add"/></td></tr>
    </table>
    <?
    if(count($tasks) > 0){
        ?>
        <table>
        <tr><td><b>Registration Item Description</b></td><td><b># Of Available Spots</b></td></tr><br>
        <?
        foreach (array_combine($tasks, $nums) as $task => $task_num){
            ?>
            <tr><td><? echo $task; ?></td><td><? echo $task_num; ?></td>
            <td><input type="submit" name="remove_task" value="Remove"/></td>
            <td><input type="hidden" name="task_name" value="<? echo $task; ?>"/>
            <td><input type="hidden" name="task_num" value="<? echo $task_num; ?>"/></td></tr>

            <?
        }
        ?></table><?
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:50:59.447

您需要将表单标签放在循环内。现在发生的情况是所有记录都显示在一个表单中，无论您选择什么项目，它都只取最后一个值。另一种替代解决方案是使用 GET 方法并将数字/名称作为查询字符串传递。

# iphone - UITextfield 键盘辞职

> ID：13578069
> 
> 赞同：0
> 
> 时间：2012-11-27T05:43:28.103
> 
> 标签：iphone, ios

在每个单元格的 uitableview 中，当用户编辑文本字段并且按下屏幕上的任何其他按钮后，键盘没有退出时，我都有 uitextfield。我在文本字段代表中做了以下事情

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    textfieldInCell = textField;
}

-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    textfieldInCell=nil;// this is the ivar i am using for each textfield in cell.
    return YES;
}

-(void)textFieldDidEndEditing:(UITextField *)textField
{
    textfieldInCell=textField;
    // do the process...
    textfieldInCell=nil
} 
```

一旦用户点击任何其他按钮但键盘没有退出，我也会调用 shouldReturn 委托函数。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:46:11.123

您是否已将文本字段的委托与您的控制器绑定？或者您是否检查了 textFieldShouldReturn 调用？

我认为，在您的情况下，绑定缺少智能视图控制器。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:48:19.107

在要添加文本字段的表格视图中添加一行。

```
<YOUR_TEXTFIELD>.delegate = YES; 
```

享受编程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:50:53.037

首先检查你是否给了委托，`UITextField`然后当你当时调用按钮的方法时给委托，然后像下面这样辞职这个文本字段......

```
-(IBAction)yourButton_Clicked(id)sender{

   [yourTextField resignFirstResponder];
   ////your code write here

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T05:56:34.690

确认您将创建的每个文本字段的委托与视图控制器绑定，并在文本字段中添加一行代码并结束编辑：-

```
-(void)textFieldDidEndEditing:(UITextField *)textField
{
   // add the following line
   [textField resignFirstResponder];
   textfieldInCell=textField;
   // do the process...
    textfieldInCell=nil 

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T06:38:06.543

您必须尝试将标签值分配给文本字段，然后应该返回您使用该标签隐藏键盘的方法（如果您分配标签 -1 然后）

```
-(void)textFieldDidEndEditing:(UITextField *)textField{
    if(textField.tag==-1){
     [textField resignFirstResponder];
     }

} 
```

# python-2.7 - 如何在 Windows 7 中逐步进行 wapiti 安全测试（显示没有错误）

> ID：13578070
> 
> 赞同：1
> 
> 时间：2012-11-27T05:43:27.150
> 
> 标签：python-2.7, wapiti

![enter image description here](../Images/83a8e1b20b04390f25514bee74bf2769.png)安装python 2.7

```
D:\wapiti\wapiti-2.2.1\src> python wapiti.py <server url>/ -s 
```

我没有收到任何错误。我得到了一个没有错误的 html 文件

```
D:\wapiti\wapiti-2.2.1\src> python wapiti.py http://serverdomain/Dashboard/Index/ -u

D:\wapiti\wapiti-2.2.1\net> python getcookie.py http://serverdomain/Dashboard/Index/ -c <file url>

D:\wapiti\wapiti-2.2.1\src> python wapiti.py http://serverdomain/Dashboard/Index/ -a username%password 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-20T14:30:55.100

1.你下载 zip (wapiti-2.3.0-win32-standalone) 包，解压并更改目录到它 (eg cd wapiti-2.0.X)

2.在window机器上安装Python 2.6或2.7。

使用 cmd 执行以下命令：-

```
#wapiti-getcookie  cookies.json  http://stage.xxxxxxx.com/login

#wapiti http://stage.xxxxxxxx.com -c cookies.json -x http://stage.xxxxxxx.com/logout 
```

# iphone - How to extract a number from a string using NSRegularExpression

> ID：13578072
> 
> 赞同：0
> 
> 时间：2012-11-27T05:43:49.320
> 
> 标签：iphone, objective-c, nsregularexpression

I want to extract the number `81698` from the string below, however I am running into some difficulties.

Here is my code.

```
NSString *content = @"... list.vars.results_thpp = 32;
                          list.vars.results_count = 81698;
                          list.vars.results_board = '12'; ...";

NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"results_count.*[0-9*];"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];

NSString *modifiedString = [regex stringByReplacingMatchesInString:content
                                                           options:0
                                                             range:NSMakeRange(0, [content length])
                                                      withTemplate:@"$1"]; 
```

The output is this

```
... list.vars.results_thpp = 32;
    list.vars.
    list.vars.results_board = '12'; ... 
```

But I just want `81698`

What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:00:02.980

```
NSString *content = @"... list.vars.results_thpp = 32;list.vars.results_count = 81698;list.vars.results_board = '12'; ...";
NSString *param = nil;
NSRange start = [content rangeOfString:@"list.vars.results_count = "];
if (start.location != NSNotFound) {
    param = [content substringFromIndex:start.location + start.length];
    NSRange end = [param rangeOfString:@";"];
    if (end.location != NSNotFound) {
        param = [param substringToIndex:end.location];
    }
}
NSLog(@"param:%@", param); 
```

我想这会对你有所帮助。

# android - main listview in android

> ID：13578074
> 
> 赞同：2
> 
> 时间：2012-11-27T05:44:16.470
> 
> 标签：android, listview

In main list if suppose there are 3 topics if i click one topic it should expand list in that i should select one sub topic and if click the 2nd topic in the main list it should expand in that i should select one sub topic and if i click 3rd topic in the main list it should expand in that i should one sub topic.... By selecting like this three topics and then if give submit after that it should the related contents based on the three topics...can help me for this concept can you give example coding for this...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T05:48:35.940

Check these Related examples

*   [Expandable list and checkboxes revisited](http://mylifewithandroid.blogspot.in/2010/12/expandable-list-and-checkboxes.html)

*   [ExpandableListView and CheckBox in Android](http://prativas.wordpress.com/2012/06/22/expandablelistview-and-checkbox-in-android/)

*   [Android BaseExpandableListAdapter](http://blog.csdn.net/zhyooo123/article/details/6254180)

# asp.net-mvc - asp.net mvc3模型中的日期比较

> ID：13578080
> 
> 赞同：0
> 
> 时间：2012-11-27T05:44:58.293
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, jquery-validate

我的模型中有两个字段

1.  创建日期到
2.  创建日期从

像这样呈现

```
<b>Start Date</b>  @Html.EditorFor(model => model.AdvanceSearch.CreateDatefrom, new {  @class = "picker startDate" })

<b>End Date</b> @Html.EditorFor(model => model.AdvanceSearch.CreateDateto, new { @class = "picker endDate" }) 
```

我有一个验证方案，结束日期不应大于开始日期，目前我正在通过 jquery 验证它

```
$.validator.addMethod("endDate", function (value, element) {
        var startDate = $('.startDate').val();
        return Date.parse(startDate) <= Date.parse(value);
    }, "* End date must be Equal/After start date"); 
```

我想知道在 MVC3 模型验证中有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T10:11:05.093

我会说你不应该仅仅依赖 Javascript，除非你在某种 Intranet 应用程序中控制你的客户端的浏览器。如果应用程序是面向公众的 - 确保您有客户端和服务器端验证。

此外，在模型对象中实现服务器端验证的更简洁的方法可以使用如下所示的自定义验证属性来完成。然后您的验证变得集中，您不必明确比较控制器中的日期。

```
public class MustBeGreaterThanAttribute : ValidationAttribute
{
    private readonly string _otherProperty;

    public MustBeGreaterThanAttribute(string otherProperty, string errorMessage) : base(errorMessage)
    {
        _otherProperty = otherProperty;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var otherProperty = validationContext.ObjectInstance.GetType().GetProperty(_otherProperty);
        var otherValue = otherProperty.GetValue(validationContext.ObjectInstance, null);
        var thisDateValue = Convert.ToDateTime(value);
        var otherDateValue = Convert.ToDateTime(otherValue);

        if (thisDateValue > otherDateValue)
        {
            return ValidationResult.Success;
        }

        return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
    }
} 
```

然后可以将其应用于您的模型，如下所示：

```
public class MyViewModel
{
    [MustBeGreaterThan("End", "Start date must be greater than End date")]
    public DateTime Start { get; set; }

    public DateTime End { get; set; }

    // more properties...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T05:59:11.073

您需要针对模型创建自定义验证。您可以在 if(Model.IsValid) 之后将其放入控制器中

* * *

```
if(Model.End<Model.StartDate)
   .... 
```

但我会坚持使用 javascript。它在客户端工作，不会命中服务器。除非你只需要额外的保证。

# java - 寻找一个测试来重现损坏的双重检查锁定

> ID：13578087
> 
> 赞同：0
> 
> 时间：2012-11-27T05:45:53.927
> 
> 标签：java, multithreading, double-checked-locking

有人知道在java中重现“损坏的双重检查锁定”问题的测试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:01:54.767

签出这个项目：[java-concurrency-torture](https://github.com/shipilev/java-concurrency-torture)。它是由 Alexey Shipilev 编写的。他是在 Oracle 工作的 Java 性能工程师。这是针对不同类型的单例初始化实践的[一系列测试。](https://github.com/shipilev/java-concurrency-torture/tree/master/src/main/java/org/openjdk/concurrent/torture/tests/singletons)

**重要提示**：为了最大限度地提高您发现 DCL 错误的机会，您应该`-server`在 32 位 jvm 上运行这些带有标志的测试。

# magento - Magento; Modifying a payment module changing name in "method" field

> ID：13578091
> 
> 赞同：1
> 
> 时间：2012-11-27T05:46:27.670
> 
> 标签：magento, payment

Modifying a payment module I'm not having any success changing the "payment name" that is placed in table `sales_flat_order_payment` in field "method". For example if payment is check, it is populated with checkmo. I've tried changing

`protected $_code = '.........';` in payment.php with no success.

I'm guessing this name may need changing in multiple places?

I have researched this but any answers I can find are assuming I have the skill level to know how to duplicate or modify the extension. magento ver 1.4.1.1

more info; I'm using a Western Union payment extension as a Bpay payment extension and that field method is used to SMS payment type to me (and it would be more elegant it said what it really was!)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:10:48.697

通过复制与您尝试做的最匹配的其他支付模块之一来创建新的支付模块。

如果您尝试为支票创建支付模块，请查看[创建新的支付方式](http://www.excellencemagentoblog.com/magento-create-custom-payment-method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:11:04.880

最好为此使用单独的付款方式。您可以复制一些现有方法，并使用您的自定义名称。

# mysql - 从具有相同结构的表中添加两列

> ID：13578092
> 
> 赞同：1
> 
> 时间：2012-11-27T05:46:32.247
> 
> 标签：mysql, sql

我有两个表如下： -

```
 Table 1                      Table 2 
         date     value             date     value 
         1120101   v11              1120102   v21
         1120202   v12              1120303   v22  
         1120203   v13              1120104   v23 
```

获取以下输出的 sql 查询是什么

```
 date         value 
       1120101       (v11)
       1120102       (v12+v21)
       1120103       (v13+v22)
       1120104       ( v23) 
```

我厌倦了以下查询，但未能获得所需的输出

```
select table1.date,
       table2.date,
       table1.delta+table2.delta as delta 
from table1,
     table2   
where table1.date=table2.date; 
```

提前致谢 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T05:48:37.613

```
SELECT date, SUM(value)
FROM
(
    SELECT date, value FROM table1
    UNION ALL
    SELECT date, value FROM table2
) a
GROUP BY date 
```

*   [SQLFiddle Demo（*数据不同但思路相同*）](http://sqlfiddle.com/#!2/2b10d2/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T05:52:37.137

玩子查询和联合：

```
SELECT
    c.date,
    COALESCE(a.value, 0) + COALESCE(z.value,0)
FROM (
    SELECT
        date
    FROM table1
    UNION
        SELECT date
    FROM table2
) AS c
LEFT OUTER JOIN table1 a
    ON a.date = c.date
LEFT OUTER JOIN table2 z
    ON z.date = c.date 
```

# visual-c++ - c++ - cli application compiled on Windows 8 can not start on Windows Server 2008 R2 if boost/thread.hpp is included

> ID：13578093
> 
> 赞同：0
> 
> 时间：2012-11-27T05:46:39.763
> 
> 标签：visual-c++, boost, c++-cli, boost-thread

My application starts fine on my Windows 8 laptop. However I can not start it on Windows Server 2008 R2\. Following error occured:

```
The exception unknown software exception (0xe0434352) occured in the application at location 0xfd5ecaed. 
```

The following is printed in the command line:

```
Unhandled Exception: Cannot print exception string because Exception.ToString() failed. 
```

My solution contains one c++-cli project which i'm trying to use, and if I do not use it then everything works fine, so commenting just this line helps:

```
// private static CliAdapterMain cliAdapter = new CliAdapterMain(); 
```

I've tried:

*   repair .NET Framework 4.5 on target machine
*   repair/reinstall VS 2012 Update 1 Redistributable (both x86 and x64, version 11.0.51106.1)
*   updated my VS2012 to Update 1 recompiled project
*   no Windows pending updates, tried to reboot system several times

Dependency Walker claims that following DLL's are missing: `GPSVC.DLL IESHIMS.DLL MF.DLL MFPLAT.DLL MFREADWRITE.DLL WLANAPI.DLL` However they exist on target computer, for example here

```
c:\Windows\winsxs\amd64_microsoft-windows-grouppolicy-base_31bf3856ad364e35_6.1.7601.17514_none_8649674dfda23046\gpsvc.dll 
```

Probably I can try manually reregister missing dll's, but i don't think this is really a problem. Looking at an exception it seems that something is broken, not something is missing.

**upd:** From Windows logs:

Va.MBClient.exe Framework Version: v4.0.30319 Description: The process was terminated due to an unhandled exception. Exception Info: System.TypeInitializationException Stack: at Va.MBClient.Program.Main(System.String[])

So I guess that `private static CliAdapterMain cliAdapter = new CliAdapterMain();` is failed but i don't know why.

**upd** played with my application a little. Finally i've found just one line of code that causes a failure. This is `#include <boost/thread.hpp>`. Why this doesn't work? I'm using latest version of boost (1.52), but i did built it on my Windows 8 machine. Should I rebuilt everything for Windows Server 2008 R2? Should I built entire project on Windows Server 2008 R2?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:02:35.073

这是由于在Windows Sever中，有些功能默认是没有开启的，需要自己添加Windows Media Services和Wireless LAN Service才能找回Dll。

你可以参考[MSDN](http://technet.microsoft.com/en-us/library/cc730957.aspx)

# hadoop - 在 hdfs 文件上运行 mapreduce 并将 reducer 结果存储在 hbase 表中的示例

> ID：13578097
> 
> 赞同：1
> 
> 时间：2012-11-27T05:47:42.867
> 
> 标签：hadoop, mapreduce, hbase

有人可以为使用 Hbase 的 mapreduce 提供一个很好的示例链接吗？我的要求是在 hdfs 文件上运行 mapreduce 并将 reducer 输出存储到 hbase 表。映射器输入将是 hdfs 文件，输出将是 Text,IntWritable 键值对。Reducers 输出将是 Put 对象，即添加 reducer Iterable IntWritable 值并存储在 hbase 表中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:16:57.993

这是解决您问题的代码

* * *

* * *

## 司机

```
HBaseConfiguration conf =  HBaseConfiguration.create();
Job job = new Job(conf,"JOB_NAME");
    job.setJarByClass(yourclass.class);
    job.setMapperClass(yourMapper.class);
    job.setMapOutputKeyClass(Text.class);
    job.setMapOutputValueClass(Intwritable.class);
    FileInputFormat.setInputPaths(job, new Path(inputPath));
    TableMapReduceUtil.initTableReducerJob(TABLE,
            yourReducer.class, job);
    job.setReducerClass(yourReducer.class);
            job.waitForCompletion(true); 
```

* * *

* * *

## Mapper&Reducer

```
class yourMapper extends Mapper<LongWritable, Text, Text,IntWritable> {
//@overide map()
 } 
```

* * *

```
class yourReducer
        extends
        TableReducer<Text, IntWritable, 
        ImmutableBytesWritable>
{
//@override rdeuce()
} 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-04T11:02:19.897

**使用 Phoenix Hbase 和 map reduce 使用对我来说可以正常工作的波纹管代码 **

该程序将从 Hbase 表中读取数据，并在 map-reduce 作业之后将结果插入到另一个表中。

表：-> 股票，STOCK_STATS

**StockComputationJob.java**

```
public static class StockMapper extends Mapper<NullWritable, StockWritable, Text , DoubleWritable> {

    private Text stock = new Text(); 
    private DoubleWritable price = new DoubleWritable ();

    @Override
    protected void map(NullWritable key, StockWritable stockWritable, Context context) throws IOException, InterruptedException {
       double[] recordings = stockWritable.getRecordings();
       final String stockName = stockWritable.getStockName();
       System.out.println("Map-"+recordings);
       double maxPrice = Double.MIN_VALUE;
       for(double recording : recordings) {
           System.out.println("M-"+key+"-"+recording);
         if(maxPrice < recording) {
          maxPrice = recording;
             }
       }
       System.out.println(stockName+"--"+maxPrice);
       stock.set(stockName);
       price.set(maxPrice);
       context.write(stock,price);
    }

}

    public static void main(String[] args) throws Exception {

         final Configuration conf = new Configuration();
         HBaseConfiguration.addHbaseResources(conf);
         conf.set(HConstants.ZOOKEEPER_QUORUM, zkUrl);
         final Job job = Job.getInstance(conf, "stock-stats-job");
      // We can either specify a selectQuery or ignore it when we would like to retrieve all the columns
         final String selectQuery = "SELECT STOCK_NAME,RECORDING_YEAR,RECORDINGS_QUARTER FROM STOCK ";

         // StockWritable is the DBWritable class that enables us to process the Result of the above query
         PhoenixMapReduceUtil.setInput(job,StockWritable.class,"STOCK",selectQuery);  

         // Set the target Phoenix table and the columns
         PhoenixMapReduceUtil.setOutput(job, "STOCK_STATS", "STOCK_NAME,MAX_RECORDING");

         job.setMapperClass(StockMapper.class);
         job.setReducerClass(StockReducer.class); 
         job.setOutputFormatClass(PhoenixOutputFormat.class);

         job.setMapOutputKeyClass(Text.class);
         job.setMapOutputValueClass(DoubleWritable.class);
         job.setOutputKeyClass(NullWritable.class);
         job.setOutputValueClass(StockWritable.class); 
         TableMapReduceUtil.addDependencyJars(job);
         job.waitForCompletion(true);
     }

} 
```

**StockReducer.java**

```
 public class StockReducer extends Reducer<Text, DoubleWritable, NullWritable , StockWritable> {

     protected void reduce(Text key, Iterable<DoubleWritable> recordings, Context context) throws IOException, InterruptedException {
          double maxPrice = Double.MIN_VALUE;
          System.out.println(recordings);
          for(DoubleWritable recording : recordings) {
              System.out.println("R-"+key+"-"+recording);
            if(maxPrice < recording.get()) {
             maxPrice = recording.get(); 
            }
          } 
          final StockWritable stock = new StockWritable();
          stock.setStockName(key.toString());
          stock.setMaxPrice(maxPrice);
          System.out.println(key+"--"+maxPrice);
          context.write(NullWritable.get(),stock);
        }

} 
```

**StockWritable.java**

```
public class StockWritable  implements DBWritable,Writable {

      private String stockName;

        private int year;

        private double[] recordings;

        private double maxPrice;   

        public void readFields(DataInput input) throws IOException {

        }

        public void write(DataOutput output) throws IOException {

        }

        public void readFields(ResultSet rs) throws SQLException {
           stockName = rs.getString("STOCK_NAME");
           setYear(rs.getInt("RECORDING_YEAR"));
           final Array recordingsArray = rs.getArray("RECORDINGS_QUARTER");
           setRecordings((double[])recordingsArray.getArray());
        }

        public void write(PreparedStatement pstmt) throws SQLException {
           pstmt.setString(1, stockName);
           pstmt.setDouble(2, maxPrice); 
        }

        public int getYear() {
            return year;
        }

        public void setYear(int year) {
            this.year = year;
        }

        public double[] getRecordings() {
            return recordings;
        }

        public void setRecordings(double[] recordings) {
            this.recordings = recordings;
        }

        public double getMaxPrice() {
            return maxPrice;
        }

        public void setMaxPrice(double maxPrice) {
            this.maxPrice = maxPrice;
        }

        public String getStockName() {
            return stockName;
        }

        public void setStockName(String stockName) {
            this.stockName = stockName;
        }

} 
```

# python - Python 3.3：生日概率

> ID：13578101
> 
> 赞同：3
> 
> 时间：2012-11-27T05:47:56.723
> 
> 标签：python

试图在 python 中做生日程序。作为 Python 的初学者，我遇到了一些麻烦。

1.  函数*duplicates(l)*接受一个列表 l，如果它有一个重复的元素，则返回 True，如果没有，则返回 False。
2.  函数*test(count)*生成1 到 365 之间的*count随机整数列表。*函数 duplicates(l) 将测试重复项。
3.  函数*probability(count, num)*运行*count人的**num*次测试，并计算重复的测试次数。它返回带有重复的测试的分数 - 重复的数量除以 num。

 *结果应如下所示：

对于 2 个人，2 次生日的概率是 0.002。

对于 3 个人，2 个生日的概率是 0.008。等等...

* * *

坚持第 2 步和第 3 步：

```
import random

# not sure what to put for count
count = [random.randint(1, 365)]

def duplicates(l):
    if len(l)!=len(set(l)):
        return True
    else:
        return False

def test(count):
    return [random.randint(1, 365)]

#def probability(count,num): 
```

我相信我的第一步是正确的，但我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T05:58:10.957

您应该像这样创建列表。`test`不是一个很有用的名字。`make_birthday_list`考虑类似的东西

```
def test(count):
    return [random.randint(1, 365) for x in range(count)] 
```

重复的测试已经评估为布尔值，所以你可以这样做。`l`用作变量名（看起来太像）不是一个好主意，`1`所以我将其更改为`the_list`

```
def duplicates(the_list):
    return len(the_list)!=len(set(the_list)) 
```

您必须[一遍又一遍地](http://en.wikipedia.org/wiki/Monte_Carlo_method)运行测试才能获得概率

例如。

```
num_samples = 10000
for count in range(100):
    dup = 0
    for test_number in range(num_samples):
        the_list = make_birthday_list(count)
        if duplicates(the_list):
            dup += 1
    print(count, dup/num_samples)   # / returns a float in Python3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:04:57.637

`test`不返回长度列表`count`。结果只有一个元素。你会想利用列表理解来让它工作得很好：

```
[random.randint(1, 365) for x in range(count)] 
```

然后对于第 3 步：

```
def probability(count,num):
    dup_trues = sum([duplicates(test(count)) for i in range(num)])  #***
    dup_falses = num-dup_trues
    return float(fails)/num 
```

上述函数中的主机重要行标记为`#***` 以下是其工作原理的细分：

方括号中的内容是列表理解。

`for i in range(num)`说用 i=0, i=1, ...i=num-1 做这些事情。您知道重复和测试的作用。所以列表以一堆真假（一和零）结束

`sum`将列表的元素相加。所以这给了我们真实的数量

下一行`dup_falses = num-dup_trues`说我们总共有 num 个结果，那些不正确的结果是错误的。

`return float(fails)/num`在`float`python 3 中不需要*

# php - 从 PHP 中的循环打印值

> ID：13578108
> 
> 赞同：0
> 
> 时间：2012-11-27T05:48:37.987
> 
> 标签：php

下面是我的代码中的一个循环。当起始值和结束值为零时，循环打印值零 (0)。但是我在这里需要做的是，当起始值和结束值为零时，它不应该打印任何内容。有人可以告诉我如何改变方法吗？

```
while ($recQ = mysqli_fetch_array($runx))
{
   for($ii=$recQ['start']; $ii<=$recQ['end']; $ii++)
    {
        if (!in_array($ii, $exclude))
        {
            echo $ii.", ";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:51:09.263

[`empty()`](http://php.net/manual/en/function.empty.php)怎么样，使用函数对值添加额外的检查：

```
while ($recQ = mysqli_fetch_array($runx))
{
   for($ii=$recQ['start']; $ii<=$recQ['end']; $ii++)
    {
        if (!in_array($ii, $exclude))
        {
            if (!empty($ii)) echo $ii.", ";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:00:41.037

[`continue;`](http://www.php.net/continue)您可以通过在主循环中使用来跳过内部循环的执行：

```
while ($recQ = mysqli_fetch_array($runx))
{
   if ($recQ['start'] == 0 && $recQ['end'] == 0) {
       continue; // skip the rest of the code inside this loop
   }
   for($ii=$recQ['start']; $ii<=$recQ['end']; $ii++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:07:58.490

您可以尝试一些不同的方法：

```
$resulting_set = array();

while( $recQ = mysqli_fetch_array($runx) ){

    $my_set = range( $recQ['start'], $recQ['end'] );

    $resulting_set = array_merge( 
        $resulting_set,
        array_diff( $my_set, $exclude )
    );

}

echo implode( ', ', $resulting_set); 
```

该代码更易于阅读，并且结果不会包含您从版本中获得的尾随逗号 + 空格（假设您出于某种原因不需要它）。

这也更容易重构，因为您可以操作包含输出的数组比动态输出容易得多。

**要从 values 中删除 0**，您只需将 0 添加到 $exclude 数组即可。

# django - Django DateField 减法

> ID：13578114
> 
> 赞同：0
> 
> 时间：2012-11-27T05:49:44.697
> 
> 标签：django, django-models, datefield

我正在尝试这个：

```
retVal= ""
dI = models.DateField(date(year=2005, month=11, day=1))
dF = models.DateField(date(year=2005, month=11, day=6))

diff = dF - dI

retVal += diff + "message" 
```

但我收到了这个错误

> - 不支持的操作数类型：“DateField”和“DateField”

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:26:06.397

你正在做一些非常奇怪的事情。您有 django 模型代码，它定义了不包含任何值的 Field 对象。只有实例包含字段值（您在类级别定义事物）所以无论您做什么都应该放在类方法中。

也许你很困惑，因为 django 的元类魔法将对这些属性的引用转换为数据库中的 python 值？

```
class MyModel(models.Model):
    foo = models.DateField()

    print foo  # is a models.DateField

    def get_foo_after_django_magic(self):
        print self.foo  # is a datetime() instance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:45:43.360

DateFields 与 python datetime 实例不同，因此您无法执行您尝试执行的操作，因为 DateFields 不允许该操作。Raunak 提供的答案是正确的。

如果您有一个模型，其中包含 DateField 作为属性，那么您将执行类似的操作。

```
my_object = MyModelWithDateField.object.get(pk=1)
diff = datetime.today - my_object.some_datefield 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T06:59:33.990

您可以减去 Datefiedl 的值，即

```
df = datetime.date(year=2005, month=11, day=1)
di = datetime.date(year=2005, month=11, day=6) 
```

您不能直接对日期字段执行操作

当您尝试减去两个日期对象时，差异会返回一个 timedelta 实例

```
>>> df = datetime.date(year=2005, month=11, day=1)
>>> di = datetime.date(year=2005, month=11, day=6)
>>> di -d5
datetime.timedelta(5) 
```

# hyperlink - Trouble with clearcase VOB database

> ID：13578117
> 
> 赞同：1
> 
> 时间：2012-11-27T05:50:08.187
> 
> 标签：hyperlink, clearcase, clearcase-ucm, clearcase-automation

I am getting the following error for most of the clearcase activities, like labeling, checkout etc.

```
cleartool: Error: Error from VOB database: "\11.3.0".
cleartool: Error: Trouble finding the global definition for local type "???".
cleartool: Error: Trouble applying label to 
```

Some times it is going on, but most often failing with this error. Above is the error while applying a label. Please suggest

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:13:10.430

按照技术说明“[使用管理 VOB 修复损坏的超链接](http://www-01.ibm.com/support/docview.wss?uid=swg21231183)”，检查您的 vob 和管理 vob 之间是否没有丢失的超链接（如果您使用的是 UCM，则应该是 PVob）。

> AdminVOB 是一个普通的 VOB，主要用于存储全局定义的元数据类型（分支、标签、属性、元素和超链接）。请参阅[此处了解更多信息](http://www-01.ibm.com/support/docview.wss?rs=984&uid=swg21148828)。

解析示例（此处以全局类型为分支的情况）：

```
cleartool unlock vob:\ClientVOB
cleartool describe -long vob:\ClientVOB
 Hyperlinks:
   AdminVOB@53@\ClientVOB -> <object not available>
cleartool describe -local -long brtype:MyBranch@\ClientVOB
GlobalDefinition@54@\ClientVOB -> <object not available>
cleartool checkvob -hlink vob:\ClientVOB
cleartool describe -local -long brtype:MyBranch@\ClientVOB
cleartool checkvob -hlink brtype:MyBranch@\ClientVOB
cleartool mkhlink AdminVOB vob:\ClientVOB vob:\AdminVOB3
cleartool mkbrtype -global -acquire MyBranch@\AdminVOB3 
```

> 在大量元数据类型被破坏的情况下，执行所有这些操作可能会非常耗时，尤其是当必须在所有 VOB 中完成时。
> 这可以编写脚本以自动化该过程。

* * *

另一个原因：技术说明“[删除的用户帐户和 ClearCase 性能](http://www-01.ibm.com/support/docview.wss?uid=swg21150848)”：

> 不再存在但仍列在 -nuers 选项中以清除分支的 cleartool 锁定的用户帐户可能会导致检出、检入和合并失败，例如：

因此，如果您在分支上有锁，这也可能是一个问题。

# css - background-color not working css

> ID：13578127
> 
> 赞同：0
> 
> 时间：2012-11-27T05:50:58.127
> 
> 标签：css

I have a Div tag in aspx page

```
<div id="mainDiv">
...........                                
</div> 
```

Following style is working for it all right except `background-color`. Any changes made in following class also work. `background-color`is also applied at design time in visual-studio but does not work at run-time. Any reasons?

```
#mainDiv
{
    width:95%;
    background-color:Silver;
    font-weight:bold;
    color:Maroon;    
} 
```

**Update** Instead of `background-color:Silver;`, I have tried `background-color:Silver !important;`but no difference. However changing `color:Maroon;` to `color:Blue;` affects

**Edit** I have no other css files for this page only one css file is linked to it

**Edit** I had two divs inside the `mainDiv` there style was `float:left` when I removed `float:left` I was able to see the changes in `background-color` of `mainDiv`. Still do not know the reason

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:00:29.220

该页面上的其他 CSS 可能存在一些冲突，因为这可以正常工作：

```
<div id="mainDiv">
    content here
</div> 
```

CSS

```
#mainDiv {     
    width:95%;     
    background-color:Silver;     
    font-weight:bold;     
    color:Maroon;     
} 
```

见这里：**[JS小提琴](http://jsfiddle.net/qUyp2/93/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:56:20.540

而不是`Silver`尝试使用十六进制颜色代码

```
background-color:#C0C0C0; 
```

# php - 标题：以相同的形式将下拉框与文本输入框结合起来？

> ID：13578132
> 
> 赞同：0
> 
> 时间：2012-11-27T05:51:31.317
> 
> 标签：php, html, mysql

我想创建一个表单，我可以在其中使用下拉列表和简单文本字段在表中输入新记录的数据，然后通过 .php 文件提交。

我有一个简单的表单，只使用输入框：

![我有一个简单的表单，只使用输入框：](../Images/ea3de52fd3488e49c1379402c7432354.png)

我有一个单独的下拉框，可以显示选择：

![在此处输入图像描述](../Images/2037084a84059af03efa7411b0d4d29f.png)

是否可以将这些表单合并到一个页面中，使用一个提交按钮，使用 PHP 和 MySQL？

# java - 如何使用 java 密钥库工具自动生成密钥库？没有用户交互

> ID：13578134
> 
> 赞同：100
> 
> 时间：2012-11-27T05:51:45.893
> 
> 标签：java, keystore

我正在尝试使用 Java 密钥库工具自动生成密钥库。我使用的命令是：

```
keytool -keystore keystore -alias jetty -genkey -keyalg RSA 
```

但是在此命令之后，用户需要输入某些输入，如下所示：

```
Enter keystore password:  password
What is your first and last name?  
[Unknown]:  jetty.mortbay.org  
What is the name of your organizational unit?  
[Unknown]:  Jetty  
What is the name of your organization?  
[Unknown]:  Mort Bay Consulting Pty. Ltd.  
What is the name of your City or Locality?  
[Unknown]:  
What is the name of your State or Province?  
[Unknown]:  
What is the two-letter country code for this unit?  
[Unknown]:  
Is CN=jetty.mortbay.org, OU=Jetty, O=Mort Bay Consulting Pty. Ltd.,  
L=Unknown, ST=Unknown, C=Unknown correct?  
[no]:  yes  

Enter key password for <jetty>  
(RETURN if same as keystore password):  password 
```

除了用户输入这些值之外，有没有什么方法可以在没有用户交互的情况下提供这些值，无论是在命令中还是通过脚本？

谢谢

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-11-27T06:22:32.817

试试这个：

```
keytool -genkey -noprompt \
 -alias alias1 \
 -dname "CN=mqttserver.ibm.com, OU=ID, O=IBM, L=Hursley, S=Hants, C=GB" \
 -keystore keystore \
 -storepass password \
 -keypass password 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-08-30T00:54:53.860

不要忘记 -noprompt，否则会要求你输入 Yes 或 No

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-27T06:10:41.253

查看[有关命令行的完整文档](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html)`keytool`或不带任何参数 键入。

具体来说，您可能想要查看选项`-storepass password -keypass password`

# jquery - asp.net中的ajax webmethod问题

> ID：13578138
> 
> 赞同：1
> 
> 时间：2012-11-27T05:52:31.867
> 
> 标签：jquery, asp.net, ajax, webmethod

这是我的 jquery 函数。我有两个功能。`showgrid()`函数将数据加载到 html 表。从那，如果我`editrow()`funcion。我收到错误。

```
function showgrid() {
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "CourseSearch.aspx/DisplayCourses",
        data: "{'strSearchText':'" + $("#txtSearchText").val() + "'}",
        dataType: "json",
        success: function (data) {
            for (var i = 0; i < data.d.length; i++) {
            //$("#searchCoursesDiv").append("<tr><td style='color:#000888;'>" + data.d[i].CourseName + "</td><td>|</td><td style='color:#000888;'>" + data.d[i].CourseCode + "</td></tr><tr><td border='0px' colspan='3'><hr/></td></tr>");
                $("#searchCoursesDiv").append("<table><tr><td align='left' width='500px' style='color:#000888;' colspan='3'>" + data.d[i].CourseName + " | " + data.d[i].CourseCode + "</td></tr><tr><td colspan='3' valign='bottom'><hr /></td></tr><tr><td align='left'>Description:</td><td></td><td rowspan='2' align='right'><a href='#'>Course Details...</a><br/><a href=# onclick='EditRow( " + data.d[i].CourseCode + ")'>Nominate as Trainer...</a></td></tr><tr><td></td><td></td></tr><table>");
            }
        },
        error: function (result) {
                    alert("Error");
                }
    });
    // });
    return false;
}

//This function returns coursecode when user click html table row,.. this function get value from showgrid function and return value to page.but this funcion is not firing.i m getting error when click editrow() funciont in showgrid funcion.

function EditRow(CourseCode) {
    alert(CourseCode);
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "CourseSearch.aspx/StoreCourseCode",
        data: "{'CourseCode':'" + CourseCode + "'}",
        dataType: "json",
        success: function (data) {
            //                    $("#displayasstname").html(data.d);
            window.location = "nextpage.aspx";
        },
        error: function (result) {
            alert("Error");
        }
    });                     
} 
```

这是我的 HTML 设计代码：

```
<html>
    <body>
        <div id="searchCoursesDiv">
        </div>
    </body>
</html> 
```

问题：当我单击`editrow()`功能时，我收到这样的错误`coursecode 'DOTNET3.0' undefined.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:59:22.507

删除帖子中的 json 字符串...像这样

```
data: {"CourseCode": CourseCode }, 
```

反而

```
data: "{'CourseCode':'" + CourseCode + "'}", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:12:12.643

你可以`JSON.stringify`用来管理你的参数：

```
var data = JSON.stringify({ CourseCode: CourseCode, ... }); 
```

然后 ：

```
function EditRow(CourseCode) {

        var data = JSON.stringify({ CourseCode: CourseCode, ... });
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "CourseSearch.aspx/StoreCourseCode",
                data: data,
                dataType: "json",
                success: function (data) {
                    //                    $("#displayasstname").html(data.d);
                    window.location = "nextpage.aspx";

                },
                error: function (result) {
                    alert("Error");
                }
                        });                     
        } 
```

# java - Committed JDO writes do not apply on local GAE HRD, or possibly reused transaction

> ID：13578141
> 
> 赞同：27
> 
> 时间：2012-11-27T05:52:54.503
> 
> 标签：java, google-app-engine, memcached, jdo

I'm using JDO 2.3 on app engine. I was using the Master/Slave datastore for local testing and recently switched over to using the HRD datastore for local testing, and parts of my app are breaking (which is to be expected). One part of the app that's breaking is where it sends a lot of writes quickly - that is because of the 1-second limit thing, it's failing with a concurrent modification exception.

Okay, so that's also to be expected, so I have the browser retry the writes again later when they fail (maybe not the best hack but I'm just trying to get it working quickly).

But a weird thing is happening. Some of the writes which should be succeeding (the ones that DON'T get the concurrent modification exception) are also failing, even though the commit phase completes and the request returns my success code. I can see from the log that the retried requests are working okay, but these other requests that seem to have committed on the first try are, I guess, never "applied." But from what I read about the Apply phase, writing again to that same entity should force the apply... but it doesn't.

Code follows. Some things to note:

1.  I am attempting to use [automatic JDO caching](http://ukena.de/content/enabling-jdo-caching-google-app-engine). So this is where JDO uses memcache under the covers. This doesn't actually work unless you wrap everything in a transaction.
2.  all the requests are doing is reading a string out of an entity, modifying part of the string, and saving that string back to the entity. If these requests weren't in transactions, you'd of course have the "dirty read" problem. But with transactions, isolation is supposed to be at the level of "serializable" so I don't see what's happening here.
3.  the entity being modified is a root entity (not in a group)
4.  I have cross-group transactions enabled

The relevant code (this is a simplified version):

```
PersistenceManager pm = PMF.getManager();
Transaction tx = pm.currentTransaction();
String responsetext = "";
try {
    tx.begin();
    // I have extra calls to "makePersistent" because I found that relying
    // on pm.close didn't always write the objects to cache, maybe that
    // was only a DataNucleus 1.x issue though
    Key userkey = obtainUserKeyFromCookie();
    User u = pm.getObjectById(User.class, userkey);
    pm.makePersistent(u); // to make sure it gets cached for next time
    Key mapkey = obtainMapKeyFromQueryString();
    // this is NOT a java.util.Map, just FYI
    Map currentmap = pm.getObjectById(Map.class, mapkey);
    Text mapData = currentmap.getMapData(); // mapData is JSON stored in the entity
    Text newMapData = parseModifyAndReturn(mapData); // transform the map
    currentmap.setMapData(newMapData); // mutate the Map object
    pm.makePersistent(currentmap); // make sure to persist so there is a cache hit
    tx.commit();
    responsetext = "OK";
} catch (JDOCanRetryException jdoe) {
    // log jdoe
    responsetext = "RETRY";
} catch (Exception e) {
    // log e
    responsetext = "ERROR";
} finally {
    if (tx.isActive()) {
        tx.rollback();
    }
    pm.close();
}
resp.getWriter().println(responsetext); 
```

**UPDATE**: I am pretty sure I know why this is happening, but I will still award the bounty to anyone who can confirm it.

Basically, I think the problem is that transactions are not really implemented in the local version of the datastore. References:

[https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/gVMS1dFSpcU](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/gVMS1dFSpcU) [https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/deGasFdIO-M](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/deGasFdIO-M) [https://groups.google.com/forum/?hl=en&fromgroups=#!msg/google-appengine-java/4YuNb6TVD6I/gSttMmHYwo0J](https://groups.google.com/forum/?hl=en&fromgroups=#!msg/google-appengine-java/4YuNb6TVD6I/gSttMmHYwo0J)

Because transactions are not implemented, rollback is essentially a no-op. Therefore, I get a dirty read when two transactions try to modify the record at the same time. In other words, A reads the data and B reads the data at the same time. A attempts to modify the data, and B attempts to modify a different part of the data. A writes to the datastore, then B writes, obliterating A's changes. Then B is "rolled back" by app engine, but since rollbacks are a no-op when running on the local datastore, B's changes stay, and A's do not. Meanwhile, since B is the thread that threw the exception, the client retries B, but does not retry A (since A was supposedly the transaction that succeeded).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T13:57:01.490

也许对你来说是个坏消息，我离开了 JDO，我正在使用 Objectify，在某些地方直接使用 datanucleus。我对我的持久性有一个完美的控制，这是一个性能和设计更好的选择（如果你从长远来看）。

因为 db 是 no-sql，所以针对 JPA、JDO 和标准假设存在结构变化：

使用本机 datanucleus API，您可以执行标准 JPA 甚至 Objectify 中都没有的事情：我使用的示例是动态创建列

事务在 GAE 中不存在，有些东西有时看起来像事务（实体组）。所以使用本机 API 可以避免你做这种看不见的体操。

尝试用操纵杆驾驶汽车可能会奏效，但肯定有新的东西需要学习。在我看来，学习原生方式是值得的

# android - use internet connection continuously in android

> ID：13578142
> 
> 赞同：0
> 
> 时间：2012-11-27T05:53:13.713
> 
> 标签：android, wakelock

i have a chat application.my code has a thread which manages internet connection. but after some minutes my thread goes sleep. I know i should use `WakeLock` to wake CPU and my thread. but when i use below code , battery usage goes up.

```
if (mWakeLock == null) {
                        mWakeLock = pm.newWakeLock(
                                PowerManager.PARTIAL_WAKE_LOCK,
                                "NewOnlineSignalingPowerManagerTag");
                    }
                    if (mWifiLock == null) {
                        mWifiLock = wm.createWifiLock(
                                WifiManager.WIFI_MODE_FULL,
                                "NewOnlineSignalingWifiManagerTag");
                    }
                    if (!mWakeLock.isHeld()) {
                        logging.l("mWakeLock.acquire()");
                        mWakeLock.acquire();
                    }
                    if (!mWifiLock.isHeld()) {
                        logging.l("mWifiLock.acquire()");
                        mWifiLock.acquire();
                    } 
```

can you prefer me a better way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:02:42.983

为什么你必须管理互联网连接？你不必。使用安卓服务，不会出现线程问题，也不会出现睡眠问题。

# apache-flex - 声音无法在 Android 设备上播放视频

> ID：13578147
> 
> 赞同：0
> 
> 时间：2012-11-27T05:53:40.840
> 
> 标签：apache-flex, air, flex4.6

我有一个在桌面浏览器上运行良好的 VideoDisplay 播放的 mp4 视频（mp4 是用 Camtasia 创建的）。当我在我的移动 Nexus 7 上从 Google Play 加载它时，它会播放视频但没有声音。在其他 Android 设备上，它确实会播放声音。当我在 Nexus 7 上进行本地调试时，屏幕是空白的。我刚刚购买了 Nexus 7，所以这是第一次看到这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:36:58.450

我导出为 Quicktime MOV 格式，它们在我拥有的设备上正常播放。

# objective-c - 在 UIImageView 中仅显示原始图像的一部分

> ID：13578151
> 
> 赞同：3
> 
> 时间：2012-11-27T05:53:52.260
> 
> 标签：objective-c, ios, uiimageview

如何在 UIImageView 中仅显示原始图像的一部分

这个问题可能很熟悉而且很老，但是再次问的原因是，我在那些答案的帮助下找不到可行的想法很多人说 set image.contentMode = UIViewContentModeCenter; （但不工作）

我几乎需要一个包含原始图像中心的矩形，我如何得到这个？

**当我向我的应用程序显示静态图像并将 UIImageVie 的内容模式设置为 Aspect Fill 时，我确实做到了这一点。但这在我从 url 显示图像并使用 NSData 的情况下不可行**

添加我的代码和图像

```
 NSString *weburl = @"http://topnews.in/files/Sachin-Tendulkar_15.jpg";
   UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 50, 108, 86)];
   NSURL *url = [NSURL URLWithString:weburl];
   NSData *data = [NSData dataWithContentsOfURL:url];
   imageView.image = [UIImage imageWithData:data];

   [self.view addSubview:imageView]; 
```

![原始图像](../Images/3407c9653f6eca120f300a972c3fa4f9.png) ![当前输出](../Images/bd5e6c38b132ad0fc155e8aa4962cbb6.png) ![需要](../Images/46222d12843243a8240e44800dc14fab.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T06:16:52.097

如果您添加了 UIImageView 表单 XIB，您可以在那里找到一个“模式”属性，然后您可以从那里查看和设置不同的模式（来自界面生成器）。或者通过编程方式，您可以设置不同的模式

```
imageView.contentMode = UIViewContentModeCenter;
imageView.clipsToBounds = YES; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T09:57:58.767

试试这个：

```
self.imageView.layer.contentsRect = CGRectMake(0.25, 0.25, 0.5, 0.5); 
```

self.imageView 将显示图像的中间部分。你可以自己计算 CGRect 所需的值 ​</p>

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T05:59:00.507

对于这种输出，您需要根据您的要求裁剪图像。

裁剪代码如下，可以使用。

```
-(UIImage *) CropImageFromTop:(UIImage *)image
{
    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], CGRectMake(0, 12, image.size.width, image.size.height - 12));
    UIImage *cropimage = [[[UIImage alloc] initWithCGImage:imageRef] autorelease];
    CGImageRelease(imageRef);
    return cropimage;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T06:29:23.873

您尝试缩放图像，然后在 UiImageView 中添加图像并将该图像设置为中心，然后它位于中心。比例图像的代码是

```
-(UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize{
   UIGraphicsBeginImageContext(newSize);
   [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
   UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext();
   return newImage; 
```

}

然后你设置该图像的中心并添加到图像视图中我希望这是工作

# c++ - 为 make_heap 编写trickleUp 和trickleDown 例程

> ID：13578157
> 
> 赞同：1
> 
> 时间：2012-11-27T05:54:20.950
> 
> 标签：c++

我有一个对象向量`Nx`。`Ny``A`

*   `A`有成员`a`和`b`.
*   如果成员`b`满足特定条件，则将其添加到指针向量中`heapItem`。
*   然后我想使用该函数`std::make_heap`来创建一个最小堆。

然后，在我的代码中，我想更改`A[i][j].b`堆中存在的值，并希望堆反映这些更改。

为此，我需要编写一个`filterUp`和`filterDown`例程。我的问题是我不知道`A[i][j].b`堆中的位置。有什么方法可以找到或另一种方法来编写`trickleUp`&`trickleDown`例程？我不想经常调用该`make_heap`函数，因为它可能代价高昂。

```
#include <vector>
#include <iostream>
#include <algorithm>
#include <cmath>

struct A
{
  A(){}

  A(int av, int bv):a(av),b(bv){}

  int a, b;
};

struct MinHeap
{
    bool operator()(const A* lhs, const A* rhs) const
    {
        return lhs->b > rhs->b;
    }
};

int main()
{
  int Nx=4;
  int Ny=3;
  int cnt=0;
  std::vector<A*> heapItem;

  A gridPt[Nx][Ny];  
  for(int i=0; i<Nx; ++i)  // initialize grid of A objects
  {
    for(int j=0; j<Ny; ++j)
    {
      gridPt[i][j].a=i*(-j)+2*j+i+j;
      gridPt[i][j].b=i+j*(-2)+4;

      if(gridPt[i][j].b>0)  // add selected A objects to heap
      { 
          heapItem.push_back(&gridPt[i][j]);
          cnt++;
      }
    }
  }

    std::make_heap(heapItem.begin(), heapItem.end(), MinHeap());  //make heap

    gridPt[1][2].b=3; //this object is in heap. need to call a filterUp or filterDown routine to retain min heap structure

    int count=0;
    for(int i=0; count<heapItem.size(); ++i)
    {
        for(int j=0; j<pow(i,2) && count<heapItem.size(); ++j)
        {
            std::cout << heapItem[count++]->b << "   ";
        }
        std::cout << std::endl;
    }

    //make_heap, push_heap, pop_heap maintain min heap structure

  return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:16:09.243

你有一堆 A* 指针。您需要堆中 A* obj 的**索引**，以便在操作 obj 后保留堆结构。除了搜索整个堆之外，没有其他方法可以得到它。以下是一些选项：

1.  只操作堆顶，这里很明显如何获取索引。这就是您应该使用非侵入式堆的方式。
2.  实现您自己的侵入式堆，其中结构 A 有一个索引成员。您需要自己的堆函数来更新它。

# c# - Get time zone with time

> ID：13578159
> 
> 赞同：0
> 
> 时间：2012-11-27T05:54:28.533
> 
> 标签：c#, asp.net, sql-server, datetime

> **Possible Duplicate:**
> [How to display DateTime with an abbreviated Time Zone?](https://stackoverflow.com/questions/180370/how-to-display-datetime-with-an-abbreviated-time-zone)

Iam displaying time from database table. Now I want to display that datetime in my webpage with timezone like IST,PST,EST,CST.

By using C# datetime formatspecifiers.

```
Convert.ToDateTime(ds_E2A.Tables[0].Rows[0][2]).ToString("MM/dd/yyyy HH:mm:ss zz") 
```

The above displays like this `11/12/2012 21:10:10 +05`. Instead of +05 I want to display `IST`,`PST`,`EST`.

I used `Convert.ToDateTime(ds_E2A.Tables[0].Rows[0][2]).ToString("r")`. It displays `GMT` at the end of time. But I want to display current timezone.

I used `TimeZoneInfo` and `TimeZone` classes in C#.

If Iam getting data from india I want to display as `IST` or any other country `PST` or `CST`

I want to display as `11/12/2012 21:10:10 PST`

Thanks in advance

# java - 使用 java.net.UrlConnection 和 outputstream 使用 Grails 1.3.7 下载大文件时出错

> ID：13578161
> 
> 赞同：0
> 
> 时间：2012-11-27T05:54:57.107
> 
> 标签：java, exception, grails, download, broken-pipe

我们在 Tomcat 1.6 环境中运行 Grails 1.3.7 应用程序。几天前，我们的一些 Pdf 报告开始给我们带来问题。较小的报告（大小约为 1MB 或更小）可以正常工作，但较大的报告会给我们一个“java.net.SocketException: Broken pipe”异常。

为了生成 Pdf 报告，我们使用 itext-2.1.0。然后我们使用 java.net.URLConnection 使用户能够下载生成的文件。代码如下：

```
// retrives file generated using itext
   def thisUrl = new File(session.getServletContext().getRealPath("/reports  /${pdffilename}")).toURI().toURL();

   def connection = null
   def pdfInputStream = null  

   try {
      connection = thisUrl.openConnection() //returns a java.net.UrlConnection
      pdfInputStream = connection.inputStream

          if (connection && pdfInputStream) {
                    connection.connectTimeout = 25* 60*1000;
                    connection.readTimeout = 25* 60*1000
                    response.setHeader "Content-disposition", "attachment; filename = ${pdffilename}"
                    response.contentType = 'pdf/pdf'
                    response.outputStream << pdfInputStream     // This line fails for large files
          } else {
                    redirect(action: 'failHandler')
         }
  } catch (e) {
         log.info('Could not report, connection may have terminated')
         throw e;
  } finally {
     response.outputStream.flush()
      response.outputStream.close()
  } 
```

'response.outputStream << pdfInputStream' 对于较大的文件大小失败，给我们以下异常：

[输出流异常](http://pastebin.com/1xQmX91D)

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:20:27.177

检查您的服务器中是否有负载均衡器。这可能会导致您的连接超时

# sql - 如何清理旧值表？

> ID：13578164
> 
> 赞同：0
> 
> 时间：2012-11-27T05:55:13.987
> 
> 标签：sql, performance, cron

基本上，我有一个增长非常快的表格，因为它记录了所有用户印象。但是大部分数据都是无用的，我只需要为每个用户制作的最新条目。（该表用于对用户进行身份验证）。

我正在寻找删除旧数据，因此该表最终应该在注册用户总数周围具有稳定的行数。

我可以使用 cron 作业，然后可以选择在身份验证脚本的末尾添加一行来删除旧行。它会在每个页面加载时运行。

```
DELETE WHERE `Date` < NOW() - SOME INTERVAL 
```

这是有效的，我应该使用 CRON JOB 还是其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:00:17.713

我会说，您可以`CREATE`使用临时表来保存您的最新记录。

然后`DROP`把旧桌子放在一起。比删除更快:) 删除。

将您的临时表重命名为旧表。

`CRONJOB`所以如果你愿意，这个逻辑可以在你的身上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:01:07.587

从页面执行此操作将增加用户登录的时间。

这是一个不好的方法。最好使用 cronjob 或其他一些作业调度工具，如 Jenkins

# android - Android- how to Convert library project to external jar files

> ID：13578165
> 
> 赞同：3
> 
> 时间：2012-11-27T05:55:18.440
> 
> 标签：android, android-2.2-froyo

i have a requirement like i have to use one app for two other applications. so i want to create a library project as jar file so that i can use that in build path easily with out adding the project. so i have added my main project as a library project so it has generated jar file in bin folder . so i have copied that jar file and added to libs and added that to my project build path. but still i am getting no class def found exception. please sugest whether this process of generating a jar file is correct or not. if it is not correct please suggest me how to do.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:01:04.733

右键单击库项目，导出 -> Jar 文件。

选择除 AndroidManifest.xml 之外的所有文件。

确保不要选择清单文件。否则会导致冲突错误。

现在在构建路径中包含这个 JAR 文件，它就可以工作了。我也这样做了。

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-27T07:11:00.470

最重要的是，您的项目不包含任何资源（RES 文件夹）然后

1-右键单击**项目->导出-> Java-> JarFile**

2-**仅选择 src 复选框**，即左上角窗口中的 (pacakages)。 **如果选择了某些东西，请不要**在右上角的窗口中选择任何东西删除标记。

3-选择仅**导出生成类文件和资源**

4-In **Options** Select only**压缩jar文件的内容**（不重要）

将您的外部 Jar 添加到您的文件中

1-右键单击项目->选择属性-> Java构建路径->库->添加外部Jar文件->单击确定

2-**清理**你的项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T06:00:57.947

您可以将项目导出为 jar。要执行此操作

```
right click your project->export->java->JAR file->Next 
```

但是如果你使用库项目中的资源，那么你将无法从jar中获取它。但是如果你使用作为库项目而不是jar，它将可用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T14:55:45.650

您不能将库项目导出到 JAR 文件 库不能作为二进制文件（例如 JAR 文件）分发。这将在 SDK 工具的未来版本中添加。

[资源](http://developer.android.com/tools/projects/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-09T19:07:50.737

您需要执行以下操作：
将 .jar 文件的引用添加到您的客户端应用程序。右键单击项目->属性->单击“Java构建路径”->打开库选项卡->单击按钮“添加外部JAR..”并选择您创建的.Jar文件->转到“订购和导出”选项卡并选择添加的外部 Jar 并将其移动到顶部。

我希望这能帮到您。
如果对您有帮助，请标记 +1。

# c# - OData services don't return the default order in which the items are present in the db

> ID：13578168
> 
> 赞同：2
> 
> 时间：2012-11-27T05:55:30.430
> 
> 标签：c#, asp.net, asp.net-web-api, odata

I am using OData services for my Web Api to provide pagination to my client app. This is the code for one of my controller methods.

```
// Get all Categories
    [HttpGet]
    [ActionName("all")]
    public ODataResult<DataAccess.Model.Category> GetCategoryList(ODataQueryOptions options)
    {          

        var categoryList = this.Repository.GetCategories().AsQueryable<Category>();

        var results = (options.ApplyTo(categoryList) as IQueryable<DataAccess.Model.Category>);                     

        long count = categoryList.Count();

        if (count == 0) 
            count = 1; // throws up an ArgumentException error if the count is less than 1

        return new ODataResult<DataAccess.Model.Category>(results, null, count);

    } 
```

But when i use any OData protocols in the api call like api/Category/all?$skip&$top=5 it doesnt return me the exact order in which the 5-10 elements are there in the db (i.e sorted by their primary key=ID). I can fix this by using $orderby=ID for all my API calls, but i want to know if i can avoid it. Am i doing anything wrong here because by default the OData services should return in the same order as they are in the db right? Please let me know if you have any ideas or suggestions.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T01:44:47.290

默认情况下，我们通过 key 属性对结果集进行排序，以确保排序稳定（如果不是分页会被破坏）。所以，看看你的模型是什么会很有趣，即 DataAccess.Model.Category 的样子。此外，如果您想自己进行稳定排序并禁用 webapi 推断顺序，则可以将 ODataQuerySettings.EnsureStableOrdering (false) 用于 ApplyTo 的另一个重载，即

```
public virtual IQueryable ApplyTo(IQueryable query, ODataQuerySettings querySettings); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T13:58:49.570

除非客户要求，否则 OData 中的任何内容都不会强制执行特定的排序。$top 和 $skip 查询选项强制“一些稳定的”排序，默认情况下（在 .NET 实现中）使用键属性（主键）的排序，但如果您只是询问集合中的所有实体，服务将不强制任何排序（因为它不需要），因此将返回底层提供者给出的任何顺序（取决于数据库等）。

# python - scrapy.crawler 和 scrapy.spider 的区别？

> ID：13578170
> 
> 赞同：3
> 
> 时间：2012-11-27T05:55:33.080
> 
> 标签：python, scrapy

我是 Scrapy 的新手，对爬虫和蜘蛛很困惑。看来他们俩都可以爬取网站并解析项目。

有一个**Crawler**类（/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py）和一个**CrawlerSpider**类（/usr/local/lib/python2.7/dist-packages/scrapy/contrib /spiders/crawl.py) 在 Scrapy 中。有谁可以告诉我它们之间的区别吗？我应该在什么条件下使用哪一个？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:02:01.893

CrawlerSpider 是 BaseSpider 的子类：如果您希望蜘蛛按照“规则”列表跟踪链接，则需要扩展这些调用。“Crawler”是 CrawlerProcess 子类的主要爬虫。你将不得不在你的蜘蛛中继承 CrawlerSpider，但我认为你不必接触 Crawler。

# unicode - Get code point of character in Lua?

> ID：13578171
> 
> 赞同：1
> 
> 时间：2012-11-27T05:55:33.793
> 
> 标签：unicode, lua

I've done it before, but I'm not certain how and I have since lost the source files.

How do I get the code point of a character in Lua? Or, at least, a unique value for a character?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-14T11:18:54.133

在 Lua 5.3 中，您可以使用[utf8.codepoint](http://www.lua.org/manual/5.3/manual.html#pdf-utf8.codepoint)获取 UTF-8 字符串的代码点。

```
print(utf8.codepoint("瑞"))
--29790 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:18:19.583

对于 ASCII 字符串，这很容易：

```
local char_code = string.byte("A",1);
-- char_code now contains 65 
```

对于 UTF-8（假设这是您表示数据的方式），它变得很棘手。要么使用[slnunicode 之](http://luaforge.net/projects/sln/)类的第 3 方库，要么您必须编写自己的函数来解析 UTF-8 字节。

你的 Lua 安装可能已经包含[ValidateUnicodeString](http://lua-users.org/wiki/ValidateUnicodeString)扩展，它允许它工作：

```
local char_code = string.utf8code("ٱ");
-- char_code now contains 1649 
```

（该示例包含阿拉伯语 Alef Wasla，可能无法以您的本地字体正确显示）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T06:36:16.267

有几个答案可能会给您想要的东西（如果您将自己限制为 UTF8）：

*   [拆分多字节字符串](https://stackoverflow.com/questions/9003747/splitting-a-multibyte-string-in-lua)
*   [迭代 UTF8 代码点](https://stackoverflow.com/questions/13235091/extract-the-first-letter-of-a-utf-8-string-with-lua/13238257#13238257)
*   [反转 UTF8 字符串](https://stackoverflow.com/questions/13111508/in-corona-sdk-how-to-reverse-a-unicode-string/13112347)

# python - pyexiv2 import error libexiv2.so.12 not found

> ID：13578174
> 
> 赞同：2
> 
> 时间：2012-11-27T05:55:40.767
> 
> 标签：python

I'm running Centos 6.3 with python 2.6 and trying to use pyexiv2, but I'm getting an import error, file not found when I import pyexiv2\. Here is the text of the error

```
     Traceback (most recent call last):
  File "/home/chuck/bin/pylib/test.py", line 13, in 
    import pyexiv2
  File "/usr/lib64/python2.6/site-packages/pyexiv2/__init__.py", line 60, in 
    import libexiv2python
ImportError: libexiv2.so.12: cannot open shared object file: No such file or directory

```

However, libexiv2.so.12 is in /usr/local/lib. How can I make this visible to python?

How I installed pyexiv2:
I removed the stock exiv2 and built the latest version, 0.23, from source. I used the build defaults and it installed into /usr/local. I installed the stock boost libraries, version 1.41\. I downloaded the latest pyexiv2 and built that using the recommended build tool scons. After I got the import error I put a soft link to libexiv2.so.12 in /lib. Also, my ld.so.conf contains a listing for /usr/local/lib.

Any help is greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:28:13.923

这个问题在 stackoverflow 上的另一个线程中得到了很好的回答，[为什么 Python 找不到 sys.path 目录中的共享对象](https://stackoverflow.com/questions/1099981/why-cant-python-find-shared-objects-that-are-in-directories-in-sys-path)。原来我在 /etc/ld.so.conf 添加条目后忘记运行 ldconfig。哎呀。将 /usr/local/lib 添加到 $LD_LIBRARY_PATH 并在 /etc/ld.so.conf 中有一个活动条目都解决了我的问题。

# android - 如何从phonegap中的html文件中引用src文件夹的java类中的方法

> ID：13578179
> 
> 赞同：2
> 
> 时间：2012-11-27T05:55:55.470
> 
> 标签：android, api, cordova

我在 Phonegap www 文件夹中有用户注册页面。我想使用原生 android 功能验证电子邮件 ID 和电话号码。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:18:19.117

我们必须编写 JS 接口才能从 javascript 执行 java 代码。
在您的 onCreate 方法中编写以下代码：

```
public class MainActivity extends DroidGap {
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");

        WebView webView = (WebView) findViewById(R.id.webView);
        WebSettings webSettings = webView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webView.addJavascriptInterface(new Object()
             {
                public void performClick(String emailAdress, String phoneNo)
                {
                   // Validate email address and Phone number here
                }
             },"MyAndroid");
}
} 
```

要在phonegap app中调用JS接口，编写javascript函数：

```
<script>
document.getElementById("validateButton").addEventListener('touchstart',touchPagePressed);// you can use 'onclick' also
function touchPagePressed()
{
   // MyAndroid interface will execute java's performClick method
   MyAndroid.performClick($("#emailId").val(),$("#phoneNo").val());
}
</script>
```

# ffmpeg - 将原始视频 .y4m 转换为具有特定 GOP 的 mpg 视频

> ID：13578184
> 
> 赞同：1
> 
> 时间：2012-11-27T05:56:34.830
> 
> 标签：ffmpeg

我想将原始视频**.y4m**压缩为**mpg**，然后我想从 mpg 视频中提取帧，我需要压缩的 GOP`:IBBPBBPBBPBBPBBIBBP....15:2`

我使用了这个命令：

```
ffmpeg -i video.ym4 -vcodec libx264 -sameq -y -r 30 output.avi 2>list.txt
ffmpeg -i output.avi -vcodec libx264 -y -sameq -vf showinfo -y -f image2 image%3d.jpeg -r 30 2>list1.txt 
```

输出只包含 2 个 I 帧，`100 P`并且`198 B`帧，它不是`15:2 GOP`，怎么办？

我需要`I-frame`每 15 帧一个，以及 b 的模式`IBBPBBP..`

对不起，我是新手`ffmpeg`，请帮助我，这是我项目的输入，对我来说是重要的一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:08:49.260

尝试（根据[http://ffmpeg.org/ffmpeg.html#Video-Encoders](http://ffmpeg.org/ffmpeg.html#Video-Encoders)）

*ffmpeg -i video.ym4 -vcodec libx264 **-g 15** -y -r 30 output.avi*

我认为`-sameq`您的情况不需要选项（意味着“相同的量化器”）。

# python - QGridLayout中QPushButton之间的距离

> ID：13578187
> 
> 赞同：2
> 
> 时间：2012-11-27T05:56:56.507
> 
> 标签：python, user-interface, python-2.7, pyqt, pyqt4

我编写了以下程序，它为工兵游戏画了一个雷区

```
# -*- coding: utf-8 -*-
import mainw, sys
from PyQt4 import QtCore, QtGui

class WindowSapper(QtGui.QMainWindow):
    buttons=[]

    def __init__(self, parent=None):
        QtGui.QMainWindow.__init__(self,parent)
        self.ui=mainw.Ui_mainwin()
        self.ui.setupUi(self)
        for i in xrange(10):
            l=[]
            for j in xrange(10):
                b=QtGui.QPushButton()
                l.append(b)
                self.ui.gridLayout.addWidget(b, i, j, 1, 1)
            self.buttons.append(l)

def main():
    app=QtGui.QApplication(sys.argv)
    window=WindowSapper()
    window.show()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

我也申请了表单模块

```
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'mainw.ui'
#
# Created: Tue Nov 27 08:52:39 2012
#      by: PyQt4 UI code generator 4.9.4
#
# WARNING! All changes made in this file will be lost!

from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_mainwin(object):
    def setupUi(self, mainwin):
        mainwin.setObjectName(_fromUtf8("mainwin"))
        mainwin.resize(546, 530)
        self.centralwidget = QtGui.QWidget(mainwin)
        self.centralwidget.setObjectName(_fromUtf8("centralwidget"))
        self.gridLayoutWidget = QtGui.QWidget(self.centralwidget)
        self.gridLayoutWidget.setGeometry(QtCore.QRect(10, 30, 521, 461))
        self.gridLayoutWidget.setObjectName(_fromUtf8("gridLayoutWidget"))
        self.gridLayout = QtGui.QGridLayout(self.gridLayoutWidget)
        self.gridLayout.setMargin(0)
        self.gridLayout.setHorizontalSpacing(6)
        self.gridLayout.setObjectName(_fromUtf8("gridLayout"))
        mainwin.setCentralWidget(self.centralwidget)
        self.menubar = QtGui.QMenuBar(mainwin)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 546, 21))
        self.menubar.setObjectName(_fromUtf8("menubar"))
        mainwin.setMenuBar(self.menubar)
        self.statusbar = QtGui.QStatusBar(mainwin)
        self.statusbar.setObjectName(_fromUtf8("statusbar"))
        mainwin.setStatusBar(self.statusbar)

        self.retranslateUi(mainwin)
        QtCore.QMetaObject.connectSlotsByName(mainwin)

    def retranslateUi(self, mainwin):
        mainwin.setWindowTitle(QtGui.QApplication.translate("mainwin", "Сапер", None, QtGui.QApplication.UnicodeUTF8))

class mainwin(QtGui.QMainWindow, Ui_mainwin):
    def __init__(self, parent=None, f=QtCore.Qt.WindowFlags()):
        QtGui.QMainWindow.__init__(self, parent, f)

        self.setupUi(self) 
```

但这并没有达到我的预期：按钮没有完全填满GridLayout，其中还有空闲空间，也就是没有完全填满单元格GridLayout。如何摆脱这些差距？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:46:33.237

您看到大量间距的第一个原因实际上不是因为`QGridLayout`，而是因为没有什么限制您的布局对象使它们聚集在一起。您需要做的是在布局中添加一个拉伸，以尽可能多地占用空间，迫使其余项目挤在一起。

QGridLayout 确实允许您向其中添加拉伸项目，但我认为这会使网格稍后导航更加复杂，因为您始终必须考虑该间隔行/列。因此，您可以将网格布局包装在垂直/水平布局中，并在其中添加间隔。

执行此操作后，您会注意到行之间留有少量空间。显然，这只是 QGridLayout 的一个已知问题（[请参阅另一个问题](https://stackoverflow.com/questions/2203669/remove-all-spacing-in-qgridlayout)）。但是您可以使用按钮的大小以及行和列的最小大小来使其正确：

这是一个示例（独立 - 不需要您的 UI 模块）

```
class WindowSapper(QtGui.QMainWindow):

    def __init__(self, parent=None):
        QtGui.QMainWindow.__init__(self,parent)
        self.resize(450,350)
        self.centralwidget = QtGui.QWidget()
        self.setCentralWidget(self.centralwidget)

        self.vLayout = QtGui.QVBoxLayout(self.centralwidget)
        self.hLayout = QtGui.QHBoxLayout()

        self.gridLayout = QtGui.QGridLayout()
        self.gridLayout.setSpacing(0)

        # center the grid with stretch on both sides
        self.hLayout.addStretch(1)
        self.hLayout.addLayout(self.gridLayout)
        self.hLayout.addStretch(1)

        self.vLayout.addLayout(self.hLayout)
        # push grid to the top of the window
        self.vLayout.addStretch(1)

        self.buttons = []
        for i in xrange(10):
            l=[]
            for j in xrange(10):
                b=QtGui.QPushButton()
                b.setFixedSize(40,30)
                l.append(b)
                self.gridLayout.addWidget(b, i, j)
                self.gridLayout.setColumnMinimumWidth(j, 40)
            self.buttons.append(l)
            self.gridLayout.setRowMinimumHeight(i, 26) 
```

![在此处输入图像描述](../Images/3261a9b2023b71257b298ec76d61f601.png)

# java - 无法连接数据库

> ID：13578189
> 
> 赞同：0
> 
> 时间：2012-11-27T05:57:02.670
> 
> 标签：java, php, android

我正在尝试使用 eclipse 创建一个应用程序。在用户注册页面中，输入所有必需的数据后，单击提交按钮，消息“不幸的是，您的 Eclipse 已停止”。此消息是什么意思以及如何解决？

```
 public class UserRegister extends Activity {

JSONParser jsonParser = new JSONParser();
EditText inputName;
EditText inputUsername;
EditText inputEmail;
EditText inputPassword;
RadioButton button1;
RadioButton button2;
Button button3;
int success = 0;

// url to create new product
private static String url_register_user = "http://192.168.1.100/MEMS/add_user.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_user_register);

    // Edit Text
    inputName = (EditText) findViewById(R.id.nameTextBox);
    inputUsername = (EditText) findViewById(R.id.usernameTextBox);
    inputEmail = (EditText) findViewById(R.id.emailTextBox);
    inputPassword = (EditText) findViewById(R.id.pwTextBox);

    // Create button
    //RadioButton button1 = (RadioButton) findViewById(R.id.studButton);
    // RadioButton button2 = (RadioButton) findViewById(R.id.shopownerButton);
    Button button3 = (Button) findViewById(R.id.regSubmitButton);

    // button click event
    button3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            String name = inputName.getText().toString();
            String username = inputUsername.getText().toString();
            String email = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();

                   if(name.contentEquals("")||username.contentEquals("")||email.contentEquals("")||password.contentEquals(""))
            {
                AlertDialog.Builder builder = new AlertDialog.Builder(UserRegister.this);

                // 2\. Chain together various setter methods to set the dialog characteristics
                builder.setMessage(R.string.nullAlert)
                   .setTitle(R.string.alertTitle);

                builder.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // User clicked OK button
                   }
               });

            // 3\. Get the AlertDialog from create()
            AlertDialog dialog = builder.show();
            }
            else
            {
                new RegisterNewUser().execute();
            }

        }
    });
}

       class RegisterNewUser extends AsyncTask<String, String, String>{
   protected String doInBackground(String... args) {
       String name = inputName.getText().toString();
       String username = inputUsername.getText().toString();
       String email = inputEmail.getText().toString();
       String password = inputPassword.getText().toString();

       // Building Parameters
       List<NameValuePair> params = new ArrayList<NameValuePair>();
       params.add(new BasicNameValuePair("name", name));
       params.add(new BasicNameValuePair("username", username));
       params.add(new BasicNameValuePair("email", email));
       params.add(new BasicNameValuePair("password", password));

       // getting JSON Object
       // Note that create product url accepts POST method
       JSONObject json = jsonParser.makeHttpRequest(url_register_user,
                           "GET", params);
                   // check log cat for response
       Log.d("Send Notification", json.toString());

       try
           {
                   int success = json.getInt(TAG_SUCCESS);

                   if (success == 1)
                   {
                       // successfully created product
                    Intent i = new Intent(getApplicationContext(), StudentLogin.class);
                    startActivity(i);
                    finish();
                   }

                   else
                   {
                       // failed to register

                   }
           }

            catch (Exception e)
            {
                  e.printStackTrace();
            }
            return null;
           }
                        }
                          } 
```

我的 php 文件：

```
<?php

  /*
   * Following code will create a new product row
   * All product details are read from HTTP Post Request
   */

  // array for JSON response
  $response = array();
   // include db connect class
   require_once __DIR__ . '/db_connect.php';

// connecting to db
     $db = new DB_CONNECT();

     // check for required fields
     if (isset($_GET['name']) && isset($_GET['username']) && isset($_GET['email']) &&             isset($_GET['password'])) {

$name = $_GET['name'];
$username = $_GET['username'];
$email = $_GET['email'];
$password = $_GET['password'];

// mysql inserting a new row
$result = mysql_query("INSERT INTO register(name, username, email, password) VALUES('$name', '$username', '$email', '$password')");

// check if row inserted or not
if ($result) {
    // successfully inserted into database
    $response["success"] = 1;
    $response["message"] = "You are successfully registered to MEMS.";

    // echoing JSON response
    echo json_encode($response);
}
else {
    // failed to insert row
    $response["success"] = 0;
    $response["message"] = "Oops! An error occurred.";

    // echoing JSON response
    echo json_encode($response);
}
} else {
      // required field is missing
      $response["success"] = 0;
      $response["message"] = "Required field(s) is missing";

        // echoing JSON response
        echo json_encode($response);
        }
           ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:07:30.783

将比较方法更改为，`equals()`而不是`contentEquals()`在您的代码中

as[`String#equals()`](http://download.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)不仅比较 String 的内容，还检查另一个对象是否也是 a 的实例`String`。这些[方法](http://download.oracle.com/javase/6/docs/api/java/lang/String.html#contentEquals%28java.lang.StringBuffer%29)只比较内容（字符序列），**而不**检查另一个对象是否也是. 它可以是任何东西，只要它是.[`String#contentEquals()`](http://download.oracle.com/javase/6/docs/api/java/lang/String.html#contentEquals%28java.lang.CharSequence%29) **`String`[`CharSequence`](http://download.oracle.com/javase/6/docs/api/java/lang/CharSequence.html)[`StringBuffer`](http://download.oracle.com/javase/6/docs/api/java/lang/StringBuffer.html)**

 **所以像这样改变你的代码

```
if(name.equals("")||username.equals("")||email.equals("")||password.equals(""))
 {
     ....
} 
```**

# apache - 我无法在 Windows wampserver 上安装 apc

> ID：13578191
> 
> 赞同：1
> 
> 时间：2012-11-27T05:57:09.543
> 
> 标签：apache, windows-7, apc, wampserver

我无法在 wampserver windows 7 上安装 apc。

从 [http://downloads.php.net/pierre/下载](http://downloads.php.net/pierre/)

将 php_apc.dll 复制到 \wamp\bin\php\php5.3.5\ext

这是我的 php.ini 配置

```
[APC]
apc.enabled = 1
apc.shm_segments = 1
apc.shm_size = 64M
apc.max_file_size = 10M
apc.stat = 1

extensions=php_apc.dll 
```

然后重新启动 wampserver

`http://localhost/?phpinfo=1`在浏览器中打开这个地址

但仍然无法找到 apc 部分，因为如果 apc 在 wampserver 上成功安装，那么它必须在 phpinfo 中显示 apc 的新部分，但它没有显示任何 apc 设置或 apc 部分。请帮我

# c# - 在没有参数化查询的情况下从 c# 在 sql server 中插入日期时间

> ID：13578192
> 
> 赞同：2
> 
> 时间：2012-11-27T05:57:18.013
> 
> 标签：c#, datepicker

我正在开发一个相当古老的应用程序，当时没有使用参数化查询。

`sql`我必须在数据类型为表的列中插入日期时间值，`date-time`此列中不允许空值。

我的代码。

```
var expires = dtpExpires.Enabled ? dtpExpires.Value.ToString() : "'1/1/1900 12:00:00 AM'";
string query = "INSERT INTO route (expires) Values ("+ expires +")"; 
```

这样做的问题是，当日期选择器被禁用时，必须传递一个默认值，因为不允许 null。因此，为此我必须包含一个额外`''` 的日期来包裹日期并且它可以正常工作。

但是，当启用日期选择器并且尝试将有效日期时间插入数据库时​​，由于缺少`''`围绕`expires`变量的包装，它会失败。

是否有任何干净的方法可以在没有参数化查询的情况下做到这一点。更新代码时会出现同样的问题。可以有一种干净的方法来处理这两种情况，而不是只添加`if-else`子句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:59:04.330

**编辑**

避免“无法确定条件表达式的类型，因为'string'和'System.DBNull'之间没有隐式转换”

```
SqlCommand command = new SqlCommand("INSERT INTO route (expires) 
                                   Values (@dtpExpires)", connections);
SqlParameter dtpExpires= new SqlParameter("@dtpExpires", SqlDbType.DateTime, 10);
dtpExpires.Value = dtpExpires.Enabled ? dtpExpires.Value : DBNull.Value;
command.Parameters.Add(dtpExpires); 
```

为您提供信息 OP@ankur

[使用参数而不是串联的好处](https://stackoverflow.com/questions/8412776/benefits-of-use-parameters-instead-of-concatenation)

*   安全。连接使您可以进行 SQL 注入，尤其是当 TB 代表文本框时。（强制性[XKCD卡通](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx)）
*   类型安全。您解决了很多 DateTime 和数字格式问题。
*   速度。查询不会一直改变，系统可能能够重新使用查询句柄。

**笔记**

最好使用 pram 查询来避免 sql 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:04:32.153

因为您将日期时间和空数据都作为字符串发送，所以让 SQL 服务器使用 CONVERT 函数处理从字符串到日期时间的转换

```
 var expires = dtpExpires.Enabled ? "'" + tpExpires.Value.ToString() + "'" : "null";

  string query = "INSERT INTO route (expires) Values (CONVERT(datetime, " + expires + "))"; 
```

# java - 如何使用 for 循环创建 int[][] 的返回类型？

> ID：13578195
> 
> 赞同：1
> 
> 时间：2012-11-27T05:57:49.740
> 
> 标签：java, for-loop, return-value

这是我的代码：

```
public int getPieceCoords(int entityId) {
    for(int x = 0;x<8;x++) {
        for(int y=0;y<8;y++) {
            if(position[x][y] == entityId){
                return position[x][y];
            }else{
                return (int)null;
            }
        }
    }
    //Need a return here, but it overrides the returns above
} 
```

所以，我无法让它返回我想要的实际输出，不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:00:34.163

```
public int getPieceCoords(int entityId) {
int  temp = 0;
    for(int x = 0;x<8;x++) {
        for(int y=0;y<8;y++) {
            if(position[x][y] == entityId){
                temp = position[x][y];
            }
        }
    }
   return temp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:02:22.127

尝试这个 ：：

```
public int getPieceCoords(int entityId) 
{
   int result = -1;
    for(int x = 0;x<8;x++) 
     {
        for(int y=0;y<8;y++) 
          {
            if(position[x][y] == entityId)
               {
                result = position[x][y];
                break;

               }
           }
    }
   return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:06:34.553

您已指定在方法中返回`int[][]`类型，但是，

`return position[x][y];`

正在返回一个`int`，您可能需要检查它。

编辑：根据您的新（编辑）代码，您将返回与参数相同的值

```
entityId 
```

如果匹配或`0`不匹配。

这没有多大意义，为什么不使用 Boolean 作为返回类型呢？即返回`true`比赛或`false`其他？

# java - 如何优雅地关闭 procrun？

> ID：13578196
> 
> 赞同：3
> 
> 时间：2012-11-27T05:57:54.597
> 
> 标签：java, windows-xp, procrun, apache-commons-daemon

在 Windows XP 32 位平台上使用**Apache commons daemon - procrun**运行 Java 应用程序时，如何优雅地停止服务？

我已阅读**procrun**文档并在注册服务时设置了 120 秒的超时时间。这没有按预期工作。Windows 无需等待上述时间段即可关闭。

在互联网上搜索时发现 Windows 服务有一个[结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685996%28v=vs.85%29.aspx)，它包含在[procrun](http://svn.apache.org/repos/asf/commons/proper/daemon/tags/COMMONS_DAEMON_1_0_4/src/native/windows/apps/prunsrv/prunsrv.c)中。

现在的问题是如何使用 procrun 使服务接受关闭？

***仅供参考：***使用以下三种方式中的任何一种停止服务都是优雅的

1.  网络停止服务名称
2.  服务名称.exe 停止
3.  服务.msc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:44:02.860

这是 procrun 1.0.10 中的一个错误，可能很快就会得到修复。请关注[问题](https://issues.apache.org/jira/browse/DAEMON-274 "问题")以获取更多信息

更新：2013 年 1 月 22 日该错误已解决。更改在发布序列中排队。在 ASF 中等待投票。一旦投票（希望在几天内），它将可用于 GA。

更新：2013 年 1 月 25 日 ASF 公共守护程序版本 1.0.12 解决了这个错误。请下载最新版本。

# python - Python Bar Plot pylab 未从 csv 读取所有数据

> ID：13578200
> 
> 赞同：0
> 
> 时间：2012-11-27T05:58:14.893
> 
> 标签：python, list, csv, matplotlib

我正在尝试创建一个大文本数据文件的条形图，如下所示，存储在 csv 文件中：

```
#DowntonPBS, 23
#DowntonAbbey, 12
#Download, 8
#Download:, 2
#Downloads, 2
#DownstairsMixtape, 1
#DownWithAssad, 1
#DownYoTLParty, 1
#DowntonAbbey?, 1
#Downtonabbey, 1
#DowntownAbbey, 1 
```

以下代码是我所在的位置，虽然这种方法过去适用于不同的绘图脚本，但我在这里做错了我似乎无法找到的事情。我似乎只得到了三条记录，而不是绘制所有数据。

```
import pylab as p                                                                                                                                                       
import sys                                                                                                                                                              
from matplotlib.mlab import csv2rec                                                                                                                                     

y = []                                                                                                                                                                  

fig = p.figure()                                                                                                                                                        
ax = fig.add_subplot(1,1,1)                                                                                                                                             

input = open(sys.argv[1], 'r')                                                                                                                                          

data = csv2rec(input, names=['tag', 'count'])                                                                                                                           

for item in data['count']:
        y.append(item)

N = len(y)

ind = range(N)

ax.bar(ind, y, align='center')

ax.set_ylabel('Counts')

ax.set_title('HashTag Diversity')

ax.set_xticks(ind)

group_labels = data['tag']

ax.set_xticklabels(group_labels)

fig.autofmt_xdate()

p.show() 
```

如果我为 y 和 N 添加打印语句，并针对我更大的数据集运行脚本，我最终会得到：

```
[45, 37, 36]
3 
```

这些值应该是一个非常大的数组“1000”值，长度 (N) 应该 = 1000。我不确定这里发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:31:06.067

`csv2rec()`默认情况下将忽略以“#”开头的行，您可以通过以下方式更改：

```
csv2rec(input, names=['tag', 'count'], comments="something") 
```

# image - IE10的背景图片和渐变

> ID：13578201
> 
> 赞同：1
> 
> 时间：2012-11-27T05:58:38.073
> 
> 标签：image, css, background, internet-explorer-10

我有多个带有渐变的背景，它适用于 Firefox、Chrome 和 Safari，以及针对移动设备的某些媒体查询。

像往常一样，问题是 Internet Explorer。我曾经有一个 IE 的条件样式表，我只加载了一个背景图像，但据我所知，IE10 在我的 CSS 中不支持 < !--If IE--> 。

理想情况下，我希望在所有浏览器上都使用 css3 渐变和单独的背景图像，我很高兴为所有 IE 浏览器使用单个背景图像，但到目前为止，单个背景图像不适用于 IE。

主 style.css 中的 CSS

```
 body{
    font:14px 'questrialregular', Arial, Helvetica, sans-serif;
    margin:0;
    width:100%;
    color:#797979;

    background-image: 
    url(../img/bknd_img1.png),
    url(../img/bknd_img2.png),
    url(../img/bknd_img3.png),
    url(../img/bknd_img4.png),
    url(../img/bknd_img5), -webkit-gradient(radial, 50% 20%, 0, center center, 500, from(#c0deff), to(#509deb));

    background-image: 
    url(../img/bknd_img1.png),
    url(../img/bknd_img2.png),
    url(../img/bknd_img3.png),
    url(../img/bknd_img4.png),
    url(../img/bknd_img5.png), -moz-radial-gradient(center center, circle contain, #c0deff, #509deb);

    background-attachment:fixed;
    background-position:top right, top left, center bottom,  bottom right,  left bottom;
    background-repeat: no-repeat, no-repeat, no-repeat, no-repeat, no-repeat;
    background-color:#509deb;
    display:block;} 
```

Internet Explorer 的 CSS：style-ie.css

```
 font:14px 'questrialregular', Arial, Helvetica, sans-serif;
    margin:0;
    width:100%;
    color:#797979;

    background-image: url('img/bknd_full_img.jpg');
    background-attachment:fixed;
    background-position:center top;
    background-repeat: no-repeat;
    background-color:#fff;
    display:block;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:08:48.337

问题是您只为 WebKit（使用旧语法）和 Firefox（使用稍新的语法）提供渐变和多重背景。IE 或 Opera 都无法显示渐变或多个背景，因为您不提供它们的前缀或无前缀版本。

IE10 使用最新和最终的语法实现渐变，没有前缀。最新的 Opera 也是如此，最近的 Firefox 也是如此。IE10 不需要您的条件注释代码，因为它的工作方式与其他浏览器相同。

径向渐变应该变成这样的：

```
background-image: 
    url(../img/bknd_img1.png),
    url(../img/bknd_img2.png),
    url(../img/bknd_img3.png),
    url(../img/bknd_img4.png),
    url(../img/bknd_img5.png),
    radial-gradient(circle closest-side at center, #c0deff, #509deb);
```

有关语法更改的更多详细信息，请参见 IE 博客 [0] 和规范 [1]

[0] [http://blogs.msdn.com/b/ie/archive/2012/06/25/unprefixed-css3-gradients-in-ie10.aspx，[1](http://blogs.msdn.com/b/ie/archive/2012/06/25/unprefixed-css3-gradients-in-ie10.aspx) ] [http://dev.w3.org/ csswg/css3-images/#radial-gradients](http://dev.w3.org/csswg/css3-images/#radial-gradients)

# css - css - 整个 div 是 div 内的链接 - 可点击 - 包括小提琴

> ID：13578202
> 
> 赞同：0
> 
> 时间：2012-11-27T05:58:40.443
> 
> 标签：css, html, z-index

带有标题和文本的 div。当 div 悬停时，背景会发生变化，并且会从 div 的底部升起一个“toast”。整个 div 可以根据标题链接点击并在 css 中完成。

问题：在所有版本的 IE 中，只有当光标不在 div 内的文本上时，链接才可点击（小提琴示例中的问题相同）。它可以在 FF、Opera 和 Safari 中正常工作。

JSFiddle -[示例](http://jsfiddle.net/Zp2Rp/1/)

```
<div class="one-third">
    <div class="inside">
        <h3><a href="/#">Testing</a></h3>
        <p>This some text inside the testing blox blah blah blah blah blah.</p>
        <p>and some more and some more.and some more and some morep>and some more and some moreand some more and some moreand some more and some moreand some more and some moreand some more and some moreand some more and some more.</p>
        <span class="toast">View more stuff</span>
    </div>
</div> 
```

CSS：

```
.one-third{
    border:1px solid #d8d8d8;
    margin:35px 9px 0;
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
    border-radius: 6px;
    background:#ffffff;
    text-align:center;
    position:relative;
    overflow:hidden;
    cursor: pointer;
    padding:25px 0 0 0;
}

.one-third:hover{ 
    background: #eeeeee;
}

.inside{
    height:185px;
}

.inside h3 a, .inside h3 a:hover{ /*entire div is link*/
    font-size: 20px;
    color:#30629a;
    text-decoration:none;
    position:absolute; 
    width:100%;
    height:100%;
    top:13px;
    left: 0;
    z-index: 1;
}

.inside p{
    padding:15px 15px 0 15px;
}

.toast{
    background: rgb(71, 71, 71); /* Fall-back for browsers that don't support rgba */
    background: rgba(0, 0, 0, .7);
    display: block;
    position: absolute;
    left: 0;
    width: 100%;
    bottom: -30px;
    line-height:30px;
    color: #fff;
    text-shadow:0 1px 1px #111111;
    font-size:14px;
    text-align: center;
    transition: all 0.1s linear 0s; /*no moz, webkit, or o because radius is needed and won't scroll right*/    
    -moz-border-radius: 0 0 6px 6px;
    -webkit-border-radius: 0 0 6px 6px;
    border-radius: 0 0 6px 6px;
}

.one-third:hover .toast {
    bottom: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:09:19.107

另一种解决方案是添加

```
background:url("datdata:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"); 
```

到.inside h3 a，.inside h3 a：悬停。这是一个base64透明gif，解决了IE的问题。

GIf 在这里找到：[http ://css-tricks.com/snippets/html/base64-encode-of-1x1px-transparent-gif/](http://css-tricks.com/snippets/html/base64-encode-of-1x1px-transparent-gif/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:17:14.467

一种解决方案是如果 h3 将 'a' 移到外面。IE 在“p”标签后面的那个元素有问题。

```
<a href="/#"><h3>Testing</h3>
<p>...</p></a> 
```

[http://jsfiddle.net/Zp2Rp/14/](http://jsfiddle.net/Zp2Rp/14/)

# android - 在 Facebook 和 Google + 之类的应用程序中使用的 Rage Shake api 是什么，我可以在我的应用程序中使用相同的 api 吗？

> ID：13578210
> 
> 赞同：1
> 
> 时间：2012-11-27T05:59:11.600
> 
> 标签：android

我最近发现了这篇关于 Rage Shake 的文章，这是 Facebook 用来记录它的错误并获取报告的秘密错误报告工具。

所以我的问题是我可以在我的 android 应用程序中使用那个 Rage Shake API。我找不到任何可用的 API。如果你有的话，请与我分享。

Rage Shake Api 在 Facebook 中的确切作用是什么？我从这个站点[Facebook Droid fooding](http://techcrunch.com/2012/11/24/facebook-droidfooding/)读到Rage Shake 用于在设备抖动时记录应用程序状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:25:53.737

它不是公开可用的功能。当然可以通过使用加速度计 API 和提供报告 API 的错误工具后端来创建类似的东西。

# javascript - 如何从 Ext.Record 中获取数据？

> ID：13578214
> 
> 赞同：1
> 
> 时间：2012-11-27T05:59:39.187
> 
> 标签：javascript, extjs

我可以从存储中获取记录：`var record = store.getAt(i);`
但是如果我想从记录中获取具有相同名称的文件，我只会得到第一个字段值。例如，如果我有 XML：

```
Code:

<zem>
  <parcel>
    ....
  <parcel>
  <really>
    <price>555.555<price>
  </really>
  <really>
    <price>666.666<price>
  </really>
</zem> 
```

并且使用`record.get("price")`i 只能获得`555.555`价值。有可能获得所有字段的值`<really>`？或者 name= 的所有字段的值数组`<price>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:18:37.723

逛逛商场：

```
var res = [];
store.each(function(record) { res.push(record.get('price'));  }) 
```

# perl - 从perl中给定的excel数据绘制条形图

> ID：13578216
> 
> 赞同：-1
> 
> 时间：2012-11-27T05:59:57.253
> 
> 标签：perl, excel, charts

从 perl Excel 数据中的给定 excel 数据绘制条形图：它每周动态变化。我想把它自动化。

================================

下面是程序：

*   我在 Excel 中有示例数据。数据可以是学生在每个科目中获得的姓名和分数。
*   我想为它绘制excel图表。

    ```
    #!/usr/local/bin/perl
      print "Content-type: text/html\n\n"; 
      use strict; 
      use Win32::OLE;
      use Win32::OLE::Const 'Microsoft Excel';
      use Spreadsheet::ParseExcel; 
      use Spreadsheet::ParseExcel::SaveParser;

     my $parser   = new Spreadsheet::ParseExcel::SaveParser;
         my $workbook = $parser->Parse('Nilu.xls');

     my $worksheet1 = $workbook->worksheet('Worksheet1'); 
     $worksheet1->activate();

    my ( $row_min, $row_max ) = $worksheet1->row_range(); 
    my ( $col_min, $col_max ) = $worksheet1->col_range(); 

    print "row min:$row_min row_max:$row_max col_max:$col_max\n\n";

        my $worksheet2 = my $parser->add_worksheet( 'Worksheet2' );

    #$parser->add_worksheet( 'Worksheet2' ); 
    ```

    $worksheet2->激活（）；

    ```
    # Create a new chart object. In this case an embedded chart.
    my $chart1 = $workbook->add_chart( type => 'column', embedded => 1 );

    # Configure the first series. 
    ```

    $chart1->add_series(name => '=Sheet1!$B$1', categories => "=Sheet1!\$A\$2:\$A:$row_max", values => "=Sheet1!\$B\ $2:\$B:$row_max", );

    ```
    # Set an Excel chart style. Blue colors with white outline and shadow.
    $chart1->set_style( 11 );

    # Insert the chart into the worksheet (with an offset).
    $worksheet2->insert_chart( 'F2', $chart1, 25, 10 );

     # Write over the existing file or write a new file.
    $parser -> SaveAs('Nilu1.xls'); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:08:45.683

下面是使用 Perl 在 Excel[中绘制条形图的示例。](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX/Examples.pm#Example%3a_chart_bar.pl)

使用 Perl 更新包含图表的现有文件并不容易（除了在 Windows 上使用 Win32::OLE），因此我建议每周生成 Excel 工作簿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:36:51.533

您可以使用Spreadsheet::ParseExcel 来解析您的Excel 工作表（或将它们导出为CSV 数据，然后使用Text::CSV_XS）和例如用于绘制条形图的图表模块。

为了给出更准确的答案，我需要更多信息，特别是：

*   样本输入数据
*   示例图表
*   “perl Excel 数据”到底是什么意思？

# iphone - iOS Sqlite3 删除查询不删除行

> ID：13578218
> 
> 赞同：2
> 
> 时间：2012-11-27T06:00:06.030
> 
> 标签：iphone, objective-c, ios, sqlite

我正在使用此代码从数据库中为我的 ipad 应用程序删除一行，

```
-(BOOL) removeSegmentWithSegmentId:(NSInteger)sId
{
    AppDelegate *appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];

    sqlite3_stmt *statement;

    NSString *removeKeyword =[NSString stringWithFormat:@"DELETE FROM segment WHERE segment.segment_id = %d",sId];
    const char *query = [removeKeyword UTF8String];
    NSLog(@"%@",removeKeyword);

    //if(sqlite3_prepare_v2(appDelegate->globalConnection,[removeKeyword UTF8String] , -1, &statement, NULL) == SQLITE_OK)
    if(sqlite3_prepare_v2(appDelegate->globalConnection,query , -1, &statement, NULL) == SQLITE_OK)
    {
        if(sqlite3_step(statement) == SQLITE_DONE) {
            sqlite3_finalize(statement);
            return YES;
        }
    }
    return NO;
} 
```

但它不起作用，有人可以指导我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T06:26:26.050

你的方法返回YES吗？

有几件事：

*   始终登录`sqlite3_errmsg`任何故障
*   现在，您所做`sqlite3_finalize`的只是`sqlite3_step`return `SQLITE_DONE`，而只要您成功了，您就应该这样做`sqlite3_prepare_v2`

所以，我可能会建议，至少：

```
-(BOOL) removeSegmentWithSegmentId:(NSInteger)sId
{
    BOOL success = NO;

    AppDelegate *appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];

    sqlite3_stmt *statement;

    NSString *removeKeyword = [NSString stringWithFormat:@"DELETE FROM segment WHERE segment.segment_id = %d",sId];

    if (sqlite3_prepare_v2(appDelegate->globalConnection, [removeKeyword UTF8String], -1, &statement, NULL) == SQLITE_OK)
    {
        if(sqlite3_step(statement) == SQLITE_DONE) 
        {
            success = YES;
        }
        else
        {
            NSLog(@"%s: step not ok: %s", __FUNCTION__, sqlite3_errmsg(appDelegate->globalConnection));
        }
        sqlite3_finalize(statement);
    }
    else
    {
        NSLog(@"%s: prepare failure: %s", __FUNCTION__, sqlite3_errmsg(appDelegate->globalConnection));
    }

    return success;
} 
```

假设这个方法总是返回`YES`，如果你没有看到记录被删除，那一定是它没有找到要删除的记录。（这不被认为是 SQLite 失败。SQL 已成功执行，但`WHERE`无法满足子句。）您可以通过定义以下方法来验证这一点：

```
- (NSInteger)countSegmentWithSegmentId:(NSInteger)sId
{
    NSInteger count = 0;

    AppDelegate *appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];

    sqlite3_stmt *statement;

    NSString *sql = [NSString stringWithFormat:@"SELECT segment_id FROM segment WHERE segment.segment_id = %d", sId];

    if (sqlite3_prepare_v2(appDelegate->globalConnection, [sql UTF8String], -1, &statement, NULL) == SQLITE_OK)
    {
        while ((rc = sqlite3_step(statement)) == SQLITE_ROW)
            count++;

        sqlite3_finalize(statement);
    }
    else
    {
        NSLog(@"%s: prepare failure: %s", __FUNCTION__, sqlite3_errmsg(appDelegate->globalConnection));
        return -1;
    }

    return count;
} 
```

然后将诊断消息放入`removeSegmentWithSegmentId`：

```
- (BOOL)removeSegmentWithSegmentId:(NSInteger)sId
{
    BOOL success = NO;
    NSInteger count = [self countSegmentWithSegmentId:sId];

    NSLog(@"%s there are %d records with segment_id of %d", __FUNCTION__, count, sId);

    AppDelegate *appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];

    sqlite3_stmt *statement;

    NSString *removeKeyword = [NSString stringWithFormat:@"DELETE FROM segment WHERE segment.segment_id = %d",sId];

    if (sqlite3_prepare_v2(appDelegate->globalConnection, [removeKeyword UTF8String], -1, &statement, NULL) == SQLITE_OK)
    {
        if(sqlite3_step(statement) == SQLITE_DONE)
        {
            success = YES;
        }
        else
        {
            NSLog(@"%s: step not ok: %s", __FUNCTION__, sqlite3_errmsg(appDelegate->globalConnection));
        }
        sqlite3_finalize(statement);
    }
    else
    {
        NSLog(@"%s: prepare failure: %s", __FUNCTION__, sqlite3_errmsg(appDelegate->globalConnection));
    }

    return success;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:25:26.867

```
if(sqlite3_step(statement) == SQLITE_DONE) 
{
sqlite3_finalize(statement);
            return YES;
}
else
{
NSLog(@"Failed to delete row %s", sqlite3_errmsg(database));
} 
```

检查错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T07:17:44.070

请试试这个

步骤是

1.打开数据库

2.从表中删除行

3.关闭数据库

还添加了 NSLog 以在控制台中查看错误

```
//------------------------------------------------------------------------
// Method : checkAndCreateDatabase
// Method to Check and Create the database
//------------------------------------------------------------------------
//Function to check & create a database
-(void) checkAndCreateDatabase
{
    //-------------------------------------------
    BOOL success;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    success = [fileManager fileExistsAtPath:cDatabasePath];
    //-------------------------------------------
    //databse already there
    if(success)
    {
        return;
    }
    //-------------------------------------------
    //create database
    NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:cDatabaseName];
    [fileManager copyItemAtPath:databasePathFromApp toPath:cDatabasePath error:nil];

}

//------------------------------------------------------------------------
// Method : checkAndCreateDatabase
// Method to open database
//------------------------------------------------------------------------
-(void) openDatabase
{

        cDatabaseName = @"db.sqlite";

    NSArray *documentsPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDir = [documentsPaths objectAtIndex:0];
    cDatabasePath = [documentDir stringByAppendingPathComponent:cDatabaseName];
    [self checkAndCreateDatabase];
    //-------------------------------------------
    if(sqlite3_open([cDatabasePath UTF8String],&database) == SQLITE_OK)
    {
      //nothing
    }
}

//------------------------------------------------------------------------
// Method : closeDatabase
// Method to close database
//------------------------------------------------------------------------
- (void)closeDatabase
{

    // Close the database.
    if (sqlite3_close(database) != SQLITE_OK) {
        //NSLog(@"Error: failed to close database with message '%s'.", sqlite3_errmsg(database));

    }

}

-(BOOL) removeSegmentWithSegmentId:(NSInteger)sId
{
    //for sharing variables of appdelegate file
    AppDelegate *appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];

    BOOL isDeleted=NO;
    [self openDatabase];
    const char *sqlStatement;
    sqlStatement = "DELETE FROM segment WHERE segment_id =?";
    sqlite3_stmt *compiledStatement;

    if(sqlite3_prepare_v2(appDelegate.database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK)
    {   
        sqlite3_bind_int(compiledStatement, 1, sId); 

        if(SQLITE_DONE != sqlite3_step(compiledStatement))
        {
            NSLog( @"Error while deleting metadata of  segment '%s'", sqlite3_errmsg(appDelegate.database));         

        }
        else 
        {
            NSLog(@"Deleted chart segment successfully !");
            isDeleted=YES;

        }
        //-------------------------------------------
        sqlite3_reset(compiledStatement);       
    }
    else 
    {
        NSLog( @"Error while deleting segment of  chart '%s'", sqlite3_errmsg(appDelegate.database));

    }
    sqlite3_finalize(compiledStatement);
    [self closeDatabase];
    return isDeleted;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-10T12:18:22.867

> 使用文本框中的名称删除行。

*   (BOOL) deleteRow:(NSString *)name { const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &database) == SQLITE_OK) { NSString *querySQL = [NSString stringWithFormat: @"DELETE FROM person WHERE name='%@'",name]; const char *query_stmt = [querySQL UTF8String];

    ```
    if (sqlite3_prepare_v2(database, query_stmt, -1, &statement, NULL) == SQLITE_OK) {
        if (sqlite3_step(statement) == SQLITE_DONE) {
            sqlite3_finalize(statement);
            sqlite3_close(database);
            return YES;
        }
        else
        {
            NSLog(@"%d",sqlite3_step(statement));
        }
    }
    sqlite3_finalize(statement); 
    ```

    } sqlite3_close（数据库）；返回否；}

> 删除成功返回Yes，删除失败返回NO。

# android-notifications - android中的通知窗口全黑，无法看到任何通知详情

> ID：13578220
> 
> 赞同：1
> 
> 时间：2012-11-27T06:00:11.390
> 
> 标签：android-notifications

我面临的问题是通知显示在通知栏上，但是当我展开栏时，无法看到通知详细信息（显示空白黑色窗口）。

如果我单击空白通知窗口，控件将转到存在通知的活动。

谁能告诉我为什么会这样？

# python - Py Mechanize 使用经过身份验证的用户提交更多数据

> ID：13578223
> 
> 赞同：1
> 
> 时间：2012-11-27T06:00:20.647
> 
> 标签：python, mechanize

我正在尝试使用 Mechanize 登录网站。感谢 del 的更正。

```
import re
import mechanize

login_url = 'login.aspx'

def login(id, username, password):
    br = mechanize.Browser()
    br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]
    br.open("login.aspx")
    br.select_form(nr=0)
    br.form.set_all_readonly(False) # allow us to modify hidden form elements
    br["__EVENTTARGET"] = "TransactBtn"
    br["AccountID"] = id
    br["UserName"] = username
    br["Password"] = password   
    response = br.submit()

    print response.geturl()

def redirect(response.geturl())
    #i want to get the url of the redirect and submit it to see the main login page

def dostuff()
    #i want to do submit more data using the authenticated user.

login('id', 'user', 'pass') 
```

这正确登录，但返回现在返回一个重定向门户，要求再次提交。
我该怎么做才能返回真实登录的站点？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title></head>
<body>
    <form name="form1" method="post" action="tmp.aspx" id="form1">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE2MTY2ODcyMjlkZCOgyU+AdP30f85W4DdUIV6LnCqa" />
</div>

    <script type="text/javascript">
        top.location.href = document.location.href;
        document.forms["form1"].submit();
    </script>
        &nbsp;&nbsp;</form>
    </body>
</html> 
```

如何在已通过身份验证的用户中提交数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:11:54.123

您需要先选择表单，然后才能使用`Browser.form`：

```
>>> import mechanize
>>> br = mechanize.Browser()
>>> response = br.open("default.aspx")
>>> print br.form
None
>>> br.select_form(nr=0)
>>> print br.form
<form1 POST default.aspx application/x-www-form-urlencoded
  <HiddenControl(__VIEWSTATE=/wEPDwUKLTcxNTg3NzEzMQ9kFgQCAQ9kFgICCA8WAh4EaHJlZgUJZ3JlZW4uY3NzZAIDD2QWBgIHDw8WAh4EVGV4dAUjWW91ciBJUCBBZGRyZXNzIGlzIDogMjAzLjI5LjE1OS4xMzRkZAIJDxBkZBYBZmQCCw8WAh4HVmlzaWJsZWgWEAIDDxYCHwJoZAIFDxYCHwJoZAIHDxYCHwJoZAIPDxYCHgV2YWx1ZQUKMTEvMjcvMjAxMmQCEQ8PFgIfAQVKPHNlbGVjdCBpZD0iUEwiIG5hbWU9IlBheWVlTGlzdCI+PG9wdGlvbiB2YWx1ZT0iYWxsIj5BbGw8L29wdGlvbj48L3NlbGVjdD5kZAITDxYCHwMFCjExLzI3LzIwMTJkAhUPFgIfAwUKMTEvMjcvMjAxMmQCFw8PFgIfAQVMPHNlbGVjdCBpZD0iUEwyIiBuYW1lPSJQYXllZUxpc3QyIj48b3B0aW9uIHZhbHVlPSJhbGwiPkFsbDwvb3B0aW9uPjwvc2VsZWN0PmRkZDTdDxIlMu2gUsdr7GPbmUOQ3xzg) (readonly)>
  <HiddenControl(__EVENTVALIDATION=/wEWBwKfnIxpAsCktrgLAr2x1tEIAubH1rAKAtWJze8HAvCR5qcGAsjWwOgISMYAcE5r11vGAeoqgWzW0JGk2e4=) (readonly)>
  <SelectControl(ThemeList=[*Green, Blue, Red, Orange, Yellow, Violet])>> 
```

**更新**

关于您的问题的编辑，有两个问题：

1.  您需要设置用户代理。如果您使用 Mechanize 默认值，服务器似乎会提供不同版本的页面
2.  页面[使用Javascript设置`__EVENTTARGET`字段](http://search.cpan.org/~ecarroll/HTML-TreeBuilderX-ASP_NET-0.09/lib/HTML/TreeBuilderX/ASP_NET.pm#DESCRIPTION)

以下作品：

```
>>> import mechanize
>>> br = mechanize.Browser()
>>> br.addheaders = [('User-agent', 'Mozilla/5.0 (Windows NT 5.2; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11')]
>>> br.open("login.aspx")
<response_seek_wrapper at 0x201c290 whose wrapped object = <closeable_response at 0x2017758 whose fp = <socket._fileobject object at 0x1fb4ad0>>>
>>> br.select_form(nr=0)
>>> br.form.set_all_readonly(False) # allow us to modify hidden form elements
>>> br["__EVENTTARGET"] = "TransactBtn"
>>> br["AccountID"] = "id"
>>> br["UserName"] = "user"
>>> br["Password"] = "pass"
>>> response = br.submit()
>>> [line for line in response.readlines() if 'ErrorMsg' in line]
['                <span id="ErrorMsg">Account ID is numeric.</span></span></div>\r\n'] 
```

您可以看到它已输出错误消息“Account ID is numeric”。

# c# - 如何在 Azure 中构建高度可扩展的全局计数器？

> ID：13578225
> 
> 赞同：1
> 
> 时间：2012-11-27T06:00:28.530
> 
> 标签：c#, .net, azure, scalability

我正在尝试在 Windows Azure 中设置一个全局计数器，该计数器将跟踪一天内开始的游戏数量。每次玩家开始游戏时，都会从客户端向服务器发出一个 Web 服务调用，并且全局计数器将加一。使用数据库应该相当简单......但我想知道如何有效地做到这一点。数据库方法同时适用于数百个客户，但如果我有 100,000 个客户会发生什么？

感谢您的帮助/想法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T08:03:31.273

一年多前，这是 Cloud Cover 插曲中的一个主题：[Cloud Cover Episode 43 - Scalable Counters with Windows Azure](http://channel9.msdn.com/Shows/Cloud+Cover/Cloud-Cover-Episode-43-Scalable-Counters-with-Windows-Azure)。他们讨论了如何创建[Apaythy Button](http://www.apathybutton.com/)（类似于 Facebook 上的 Like Button）。

Steve Marx 还在包含源代码的博客文章中详细讨论了这一点：[Architecting Scalable Counters with Windows Azure](http://blog.smarx.com/posts/architecting-scalable-counters-with-windows-azure)。在此解决方案中，他们正在执行以下操作：

*   在每个实例上，跟踪本地计数器
*   用于`Interlock.Increment`修改本地计数器
*   如果计数器发生变化，请将新值保存在表存储中（让计时器每隔几秒执行一次）。对于每个部署/实例，您将在计数器表中拥有 1 条记录。
*   要显示总计数，请计算 counters 表中所有记录的总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:26:12.743

好吧，有很多选择。而且我不知道哪个最适合你。但是我会在这里介绍它们的一些优点和缺点，您可以根据您的要求得出自己的结论。

最简单的答案是“存放起来”。SQL Azure 和核心 Azure 表或博客存储选项都适合您。要解决的一个问题是面对大规模并发时的性能，但我也鼓励您考虑正确性。你真的想要支持原子增量的东西来外包这个问题 IMO。

面向存储的选项的另一种变体是高度可用的虚拟机。您可以在 Azure 上启动自己的 VM，将数据驱动器备份到 Azure 驱动器，然后使用操作系统之上的某些东西来执行此操作（数据库服务器、直接使用文件系统的应用程序等）。这将更类似于您在家中所做的事情，但会有相当不幸的权衡……您的整个云现在都依赖于这台虚拟机的可用性，成本是需要考虑的事情，解决方案的可扩展性，等等。如果您查看虚拟机，Splunk 也是一个可以考虑的选项。

正如之前的评论者所提到的，您可以根据日志数据进行计算。但这可能不是超实时的。

服务总线是另一个需要考虑的选项。您可以通过 SB 为这些事件发送消息，并让消费者读取它们并发出“摘要”。如果你看这个，有很多设计模式需要考虑。SB 堆栈有很好的文档记录。SB 的另一个有趣的元素是，您可能能够以 100% 的正确性来换取性能/规模/成本。根据您的目标，这对您来说可能是一个值得权衡的选择。

Azure 还公开了可能适合的队列。我承认我认为 SB 可能更合适，但如果你走这条路，两者都值得一看。

对不起，我没有灵丹妙药，但我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:46:45.017

我建议您遵循[.NET Multi-Tier Application](http://www.windowsazure.com/en-us/develop/net/tutorials/multi-tier-application/)中描述的模式。这将帮助您将面向客户端的 Web 角色和 Worker 角色分离，后者将使用服务总线将数据存储到持久性介质（SQL Server / Azure 存储）。

此外，这是一种有效的扩展模型，因为您可以跨越 Web 角色或辅助角色或两者的新实例。对于仪表板，取决于负载，您可以定期[缓存](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)数据并从缓存中提供服务。这会影响数据的准确性，但仍会提供易于扩展的选项。您甚至可以每 1 分钟使缓存无效，并从持久性介质中加载它以获取最新值。

关于使用 SQL Server 或 Azure 存储，如果不需要诸如此类的关系功能`JOINS`，您可以很好地选择 Azure 存储。

# iphone - 在 UItextVew iPhone 中获取最大内容偏移量

> ID：13578226
> 
> 赞同：1
> 
> 时间：2012-11-27T06:00:33.040
> 
> 标签：iphone, ios, uiscrollview

单击按钮时，会附加我的 TextView 中的数据。我希望当内容到达 textView 的末尾时，它应该自动滚动。

数据由“\n”附加，所以我需要将 rectTovisile 设置为最大内容偏移量，但我不知道如何获得最大内容偏移量。

如果您有任何其他方法 doProvide。

代码后面：

```
- (IBAction) onLap
{   
    NSString *lapCatch = ......;

    myUITextView.text = [myUITextView.text stringByAppendingFormat:@"myData: %@ \n",lapCatch];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:24:23.687

试试这个，

```
if (myUITextView.text.length > 0) {
  NSRange range = NSMakeRange(myUITextView.text.length - 1, 1);
  [myUITextView scrollRangeToVisible:range];
} 
```

# python - 如何读取包含数组的文本文件并将其放入数组中？（Python）

> ID：13578230
> 
> 赞同：1
> 
> 时间：2012-11-27T06:00:38.987
> 
> 标签：python

```
from numpy import *

f = open('matrix.txt', 'r')

x = []
for line in f.readlines():
    y = [value for value in line.split()]
    x.append(y)

f.close()

x = map(int, x)

a = array([x]) 
```

基本上，我的代码是假设打开文本文件并将其放入列表 x。然后我将 x 中的这些值更改为整数并将其放入数组 a 中。有没有更快的方法来做到这一点？顺便说一句，我的代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:04:16.413

如果您使用[`np.loadtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:10:23.423

```
import numpy as np
with open('matrix.txt', 'r') as f:
    x = []
    for line in f:
        x.append(map(int, line.split()))
print x
print np.array(x) 
```

使用 matrix.txt 包含 3 行，每行 4 个数字：

```
1 2 3 4
5 6 7 8
9 8 7 6 
```

如上所述，这打印

```
[[1, 2, 3, 4], [5, 6, 7, 8], [9, 8, 7, 6]]
[[1 2 3 4]
 [5 6 7 8]
 [9 8 7 6]] 
```

但是，如上一个答案中所述，请考虑使用 [numpy.loadtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)。例如，如果
`print np.loadtxt('matrix.txt')`
添加到程序中，它也会打印出

```
[[ 1\.  2\.  3\.  4.]
 [ 5\.  6\.  7\.  8.]
 [ 9\.  8\.  7\.  6.]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:03:25.727

差不多好了...

以下行创建您不想要的列表列表

```
y = [value for value in line.split()]
x.append(y) 
```

因此，地图调用将失败

而不是这两条线使用

```
x = [int(value) for value in line.split()] 
```

# c++ - C++ 继承和构造函数、析构函数

> ID：13578233
> 
> 赞同：4
> 
> 时间：2012-11-27T06:01:07.120
> 
> 标签：c++, inheritance, constructor, destructor

```
//Parent.h
class Parent{
public:
   Parent(){}
   ~Parent(){}
   virtual void func1() = 0;
};

//Child.h
#include "Parent.h"
class Child : public Parent{
  int x, y;
public:
  Child() : Parent(){ //constructor

  }
  virtual void func1();
};

//Child.cpp
#include "Child.h"
void Child::Parent::func1(){

} 
```

这编译得很好，但是，我想把 Child 类的构造函数（和析构函数）的实现放在它的 cpp 文件中，这可能吗？如何？

我已经尝试了下面的代码，但它抛出了对 vtable for Child 的未定义引用

```
Child::Child() : Parent(){  //in the cpp
}

Child(); //in the header file 
Child():Parent(); //also tried this one 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:27:00.413

您需要做的几件事：

*   保护发布您的头文件，以防止意外的多次包含。
*   使您的 Parent 析构函数虚拟化
*   初始化您的非自动成员变量以确定值。

您的最终布局可能看起来像这样。

**父.h**

```
#ifndef PARENT_H_
#define PARENT_H_

class Parent
{
public:
    Parent() {};
    virtual ~Parent() {};

public:
    virtual void func1() = 0;
};

#endif // PARENT_H_ 
```

**孩子.h**

```
#ifndef CHILD_H_
#define CHILD_H_

#include "Parent.h"

class Child : public Parent
{
    int x,y;

public:
    Child();
    virtual ~Child();

    virtual void func1();
};
#endif 
```

**孩子.cpp**

```
Child::Child()
   : Parent()     // optional if default
   , x(0), y(0)   // always initialize members to determinate values
{
}

Child::~Child()
{
}

void Child::func1()
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:10:41.483

```
$ cat Parent.h 
#ifndef GUARD_PARENT_H_
#define GUARD_PARENT_H_

class Parent{
public:
   Parent(){}
   ~Parent(){}
   virtual void func1() = 0;
};

#endif /* GUARD_PARENT_H_ */
$ cat Child.h
#ifndef GUARD_CHILD_H_
#define GUARD_CHILD_H_

#include "Parent.h"

class Child : public Parent{
  int x, y;
public:
  Child();
  virtual void func1();
};

#endif /* GUARD_CHILD_H_ */
$ cat Child.cpp
#include "Child.h"

Child::Child() : Parent() {
}

void Child::func1(){
}
$ cat try.cc
#include "Child.h"

int main() {
        Child c;
}
$ g++ try.cc Child.cpp
$ ./a.out
$ 
```

# java - postgres 9.1 中的图像大小不匹配

> ID：13578240
> 
> 赞同：0
> 
> 时间：2012-11-27T06:02:11.347
> 
> 标签：java, postgresql, jdbc

我正在使用 postgres PostgreSQL 9.1 并有一个带有列 bytea 数据类型的表。当尝试插入图像时，它能够将图像插入到表中，表的架构如下：

```
 CREATE TABLE emp
(
  uname character varying(100) NOT NULL,
  pass character varying(100) NOT NULL,
  name character varying(100) NOT NULL,
  dob date,
  country character varying(20),
  region character varying(20),
  description character varying(3000),
  role character varying(100),
  photo bytea,
  CONSTRAINT emp_pkey PRIMARY KEY (uname )
 )
WITH (
  OIDS=FALSE
 );
ALTER TABLE emp
  OWNER TO postgres; 
```

示例java代码如下：

```
package com.q4;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.sql.*;

public class DataTest {
   public void insert() throws Exception
   {
       Connection c = ConnectionHelper.getConnection();
       FileInputStream fis = new FileInputStream("C:\\pics\\viticcio.jpg");
        int counter = 0;

       String sql ="insert into emp(uname, pass,name,photo) values (?,?,?,?)";
       PreparedStatement pstmt = c.prepareStatement(sql);
       pstmt.setString(1, "Senthil1");
       pstmt.setString(2, "Password");
       pstmt.setString(3, "Senthil1");
        //pstmt.setBlob(4, fis);

       while(fis.read( ) != -1) counter++;
       byte[] b= new byte[counter];
       fis.close();
       fis = new FileInputStream("C:\\pics\\viticcio.jpg");
       for(int i = 0;i<counter;i++)
       {
           b[i] = (byte)fis.read();
          // System.out.print(b[i]);
       }
       System.out.println("Input File Size : " + counter); //Output 1

       System.out.println(counter);
       pstmt.setBytes(4, b);
      // pstmt.setBlob(4, fis, counter);
       pstmt.executeUpdate();
       System.out.println("Successfully insertted ..."); 

   }
   public void select() throws Exception
   {
      String sql = "select * from emp where uname = ?";
      Connection c = ConnectionHelper.getConnection();
      PreparedStatement pstmt = c.prepareStatement(sql);
      pstmt.setString(1, "Senthil1");
      ResultSet set = pstmt.executeQuery();
      if(set.next())
      {
          FileOutputStream fos = new FileOutputStream("C:\\test.jpg");

          byte[] a = set.getBytes("photo");
          System.out.println("Output Filesize : "+a.length); //Output 2
          for(int i = 0; i <a.length;i++)
          {
           fos.write((byte)a[i]);   
       //    System.out.print((byte)a[i]);
           fos.flush();
         }
           fos.close();
      }
      pstmt.close();
      c.close();
  }
  public static void main(String[]s) throws Exception
  {
       new DataTest().insert();
       new DataTest().select();
   }
} 
```

下面给出了运行该程序时得到的输出，文件 test.jpg 在 C:\ 中创建，但该文件的大小是读取文件大小的两倍。

```
 Input File Size : 6455
6455
Successfully insertted ...
SELECT ......... 12909 
```

请澄清问题的根本原因是什么。在此先感
谢森蒂尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:12:35.500

1.  fis.read() 返回读取的字节数，以获取数据，将字节数组（在我的代码中，这是*b*）初始化为文件长度并调用 read 如下：

    `File file = new File("C:\\pics\\viticcio.jpg");`

    `byte[] b = new bye[file.length()];`

    `fis.read(b);`

    `pstmt.setBytes(4, b);`

2.  [PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)默认为只读。要将其设置为可更新初始化，如下所示：

`PreparedStatement pstmt = c.prepareStatement(sql, ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_UPDATABLE);`

# php - 在 Netbeans 7.1.2 中安装 CodeIgniter 插件时出错

> ID：13578246
> 
> 赞同：0
> 
> 时间：2012-11-27T06:02:36.980
> 
> 标签：php, codeigniter, netbeans

我已经安装了 Netbeans 7.1.2，我需要 NetBeans 上的 CodeIgniter 框架。但是在安装插件时，会显示以下错误消息。如何解决？我也已经在我的 Windows 上安装了 xampp。“某些插件需要安装插件 PHP API 在实现版本 201203012225 中请求插件 php api 以下插件受到影响 php CI 框架”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:25:59.553

尝试使用[此](http://netbeans.org/downloads/start.html?platform=windows&lang=en&option=php)链接下载。它仅包含 PHP 语言

# zend-framework - Zend REST 控制器与 Backbonejs

> ID：13578248
> 
> 赞同：1
> 
> 时间：2012-11-27T06:02:52.460
> 
> 标签：zend-framework, rest, backbone.js

这是我打算做的事情：

我有一个简单的表单，我正在使用 BackboneJS。我想发出一个 AJAX 请求来检查用户名是否存在。（Jquery ajax 要简单得多，但我告诉我这样做）。我正在使用 [这篇文章。](http://www.techchorus.net/create-restful-applications-using-zend-framework)所以我创建了一个名为 ArticleController 的控制器：

```
namespace Album\Controller;
use Zend\Mvc\Controller\AbstractRestfulController;
class ArticleController extends AbstractRestfulController{
    public function indexAction()
    {
        echo "Working";
    }
} 
```

在我的 module.config 文件中，我添加到数组 invokables 中：

> '专辑\控制器\文章' => '专辑\控制器\文章控制器',

（我正在扩展他们在 zend 网站上构建的 zend 框架应用程序）。

所以我面临的问题是：

1.  当我去

> http://zf2-tutorials/专辑

我能够加载应用程序（建立在网站上的骨架），但如果我这样做

> http://zf2-tutorials/article

它说找不到页面！? 应该回显**工作**/我做错了什么/错过了 2.这是我为发出 ajax 请求所做的正确方法吗？

谢谢

# css - 移动设备的全局/通用字体大小

> ID：13578262
> 
> 赞同：0
> 
> 时间：2012-11-27T06:04:14.360
> 
> 标签：css, html, cordova

我正在使用 phonegap 做移动应用程序。它适用于跨平台。此应用程序中的一切都很好。唯一的问题是字体大小。我的字体大小为 12px。它在小型设备中运行良好。

但是当我在 ipad 和 tab（更大的设备）中打开时，12px 对观众来说太小了。那么有没有办法根据设备宽度调整字体大小？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:10:33.640

要搜索的主题是 CSS 媒体查询。

```
@media screen and min-width: 768px {
    body { font-size: 20pt; }
    } 
```

# parsing - 使用 sed 或 awk 将当前字段/列解析为同一行上的其他字段/列

> ID：13578263
> 
> 赞同：3
> 
> 时间：2012-11-27T06:04:15.503
> 
> 标签：parsing, sed, awk

这是感兴趣的文本文件的 4 行示例

```
EnumerateKey,explorer.exe,HKCR\\Directory\\shellex\\ContextMenuHandlers,NOMORE
CreateSec,explorer.exe,\\WINDOWS\\system32\\verclsid.exe,SUCCESS
QueryKey,AcroRd32.exe,HKCU\\Control Panel\\International,BUFOVRFLOW       
QueryValue,AcroRd32.exe,HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer\\NoRecentDocsHistory,NOTFOUND 
```

我想通过附加 K 字段/列（例如`K=3`下面）来增加行，这些字段/列包含在 $3 中找到但被解析的路径的元素`\\`

这是 4 行所需的输出。

```
EnumerateKey,explorer.exe,HKCR\\Directory\\shellex\\ContextMenuHandlers,NOMORE, Directory, shellex, ContextMenuHandlers
CreateSec,explorer.exe,\\WINDOWS\\system32\\verclsid.exe,SUCCESS, WINDOWS, system32, verclsid.exe
QueryKey,AcroRd32.exe,HKCU\\Control Panel\\International,BUFOVRFLOW, Control Panel, International,
QueryValue,AcroRd32.exe,HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer\\NoRecentDocsHistory,NOTFOUND, Software, Microsoft, Windows 
```

经过更多研究，这里有两个细微差别：

有些路径以 HK** 开头，有些则不是。但是，在这两种情况下，我只关心在初始`\\`. 这种差异体现在第 1 行和第 2 行之间。因此，如果可能，我相信解析必须锚定在`\\`而不是简单地 $3 上。（我是否正确使用了该术语？）

其次，路径的深度不同。为了保持列/字段的一致性，我愿意丢失一些信息（第 4 行）以及为短路径（第 3 行）保留空白字段以保持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:27:18.677

这是一种使用方法`GNU awk`：

```
awk 'BEGIN { FS=OFS="," } { split($3,a,"\\\\\\\\"); print $0, a[2], a[3], a[4] }' file 
```

结果：

```
EnumerateKey,explorer.exe,HKCR\\Directory\\shellex\\ContextMenuHandlers,NOMORE,Directory,shellex,ContextMenuHandlers
CreateSec,explorer.exe,\\WINDOWS\\system32\\verclsid.exe,SUCCESS,WINDOWS,system32,verclsid.exe
QueryKey,AcroRd32.exe,HKCU\\Control Panel\\International,BUFOVRFLOW,Control Panel,International,
QueryValue,AcroRd32.exe,HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer\\NoRecentDocsHistory,NOTFOUND,Software,Microsoft,Windows 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:43:51.440

使用一些丑陋的 Perl：

```
perl -lane '{$l=$_;s/.*?\\\\([^,]*),.*/$1/;@v=split(/\\\\/,$_); print "$l,".join(",",@v[0,1,2]);}' input 
```

# sql - 优化器拒绝使用索引

> ID：13578266
> 
> 赞同：1
> 
> 时间：2012-11-27T06:04:29.557
> 
> 标签：sql, performance, oracle

```
SELECT /*+ PARALLEL(cfe, 6) */
      dpd.f_p_descr,
      ef.t_a_code,
      pd.p_name,
      ef.t_q
 FROM e_fact ef
INNER JOIN d_dim dd
   ON ef.t_d_key = dd.d_key
INNER JOIN f_e cfe
   ON ef.ref_id = cfe.t_id
  AND ef.r_version = cfe.t_version
INNER JOIN d_dim dpd
   ON dpd.d_key = ef.d_key
INNER JOIN p_dim pd
   ON pd.p_key = ef.b_p_key
INNER JOIN r_dim rd
   ON rd.r_key = ef.t_r_key
INNER JOIN f_t_dim ftd
   ON ftd.t_key = cfe.t_key
WHERE dd.d_value = '19-OCT-2012'
  AND dpd.f_d = 'XYZ'
  AND ftd.s_id IN (201, 209)
  AND rd.r_n = 'ABC' 
```

我从生产中得到了这个查询，问题是优化器拒绝使用索引，`f_e`即使添加了提示（`/*+ index(e.c_fact_idx12) */`。我的方法应该是什么以及我需要检查的所有东西。有没有其他方法来调整这个查询？查询调整的新手，因此将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:40:26.060

您正在使用`e.c_fact_idx12`，但表别名`e`未在查询中的任何位置定义！

# php - 如果没有价值，产品不应该存储 MySQL

> ID：13578268
> 
> 赞同：0
> 
> 时间：2012-11-27T06:04:35.117
> 
> 标签：php, mysql, report, store

我有条目表，类似于 php 中的以下格式。“产品”行是从 MySQL 表中获取的。因此它将在入口页面中显示所有列表。

```
Date.  Product.  New stock sale 
1-1-12\. Xyzzy.      6      1
1-1-12\. Yyyyy.      0\.      0
1-1-12\. Hjjjjj.     O.      O
1-1-12\.  Ddddd.     5\.      2 
```

当我添加这些条目时，将存储在我的 MySQL 数据库中。我不想添加产品“yyyyy”和“hjjjjj”，因为它没有价值。两个产品0值。我不需要在我的MySQL数据库中添加这些产品。它应该在SQL中添加如下所示。

```
Date.  Product.  New stock sale 
1-1-12\. Xyzzy.      6       1
1-1-12\.  Ddddd.     5\.      2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:07:45.383

```
select  * from tableName
WHERE   `NewStock` !=0  or   `Sale` != 0 
```

# iphone - 为什么不需要定义和合成需要的iphone

> ID：13578274
> 
> 赞同：1
> 
> 时间：2012-11-27T06:05:10.337
> 
> 标签：iphone, objective-c

我有一个界面

```
@接口 A
{
    NSMutableArray *_myArray;
}

@property（非原子，保留）NSMutableArray *myArray;

```

在我写的实现中

```
@synthesize myArray = _myArray;

```

在我使用这个数组的代码主体中，只存储了一些数组值，就像这样......

```
-(void)updateArray:(NSArray*)p_NewValues
{
    self.myArray = nil;
    myArray = [NSMutableArray alloc]initwithArray:p_NewArray];
}

```

但不幸的是在代码审查中我发现我不需要任何变量定义只有 Synthesize 是可以的，有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:11:37.430

从[文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/chapters/ocproperties.html)

> 如果没有另外声明，@synthesize 指令还会合成适当的实例变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T06:23:05.150

使用最新版本的 Xcode 中使用的现代 Objective-C 编译器，您不需要显式 ivar，甚至`@synthesize`不再需要。您的代码现在可以是：

```
@interface A

@property (nonatomic, retain) NSMutableArray *myArray;

@end

@implementation A

- (void)updateArray:(NSArray *)p_NewValues {
    self.myArray = [NSMutableArray arrayWithArray:p_NewArray];
}

@end 
```

# android - 调用 onCreate() 方法而不是 onNewIntent()

> ID：13578275
> 
> 赞同：3
> 
> 时间：2012-11-27T06:05:11.697
> 
> 标签：android, twitter, android-tabactivity

我正在开发一个应用程序，我在 TabActivity 中集成了 Twitter。我没有创建另一个活动，我正在从 TabActivity（我们添加所有选项卡的位置）调用意图，如果我从另一个活动调用意图，它会显示黑屏。为此，我从 TabActivity 调用意图。现在它没有显示黑屏但它没有返回到 onNewIntent 函数，而不是调用 TabActivity 的这个 onCreate。

```
 <activity android:name=".guide.Tab_Custom"      android:windowSoftInputMode="adjustPan">
 <intent-filter><action android:name="android.intent.action.VIEW" /><category   ndroid:name="android.intent.category.DEFAULT" /><category android:name="android.intent.category.BROWSABLE" /><data android:scheme="x-oauthflow-twitter" android:host="callback" /></intent-filter>    </activity> 
```

这是调用意图的代码：

```
try {
            final String url = provider.retrieveRequestToken(consumer, Twitter_Constants_Key.OAUTH_CALLBACK_URL);
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
            context.startActivity(intent);
        } catch (Exception e) {
            Log.e(TAG, "Error during OAUth retrieve request token", e);
        } 
```

任何想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-25T08:17:43.907

onNewIntent() 只有在有一个活动已经在运行时才能被调用。否则，需要调用 onCreate() 来实例化活动。

# javascript - 如何使用 VideoJS flash fallback 进行 RTMP 流式传输？

> ID：13578276
> 
> 赞同：3
> 
> 时间：2012-11-27T06:05:13.277
> 
> 标签：javascript, flash, video-streaming, rtmp, video.js

我想设置 VideoJS 以使用 VideoJS-SWF 播放器作为 flash-fallback 处理 RTMP 流，这似乎对它有一些支持。

这就是我为普通 MP4 视频设置 VideoJS 的方式：

```
var tag = document.createElement("video");
tag.id = "vid1";
tag.controls = true;
tag.className = "video-js";
tag.preload = "auto";
tag.width = "640";
tag.height = "264";
tag.poster = "http://video-js.zencoder.com/oceans-clip.png";

var source1 = document.createElement("source");
source1.src = "http://video-js.zencoder.com/oceans-clip.mp4";
source1.type = "video/mp4";
tag.appendChild(source1);

// Add more sources, etc...

document.getElementById('player').appendChild(tag);

var player = _V_(tag, {width:640, height:264, techOrder:['flash', 'html5']}, function() {
    var that = this;
    this.addEvent('loadstart', function { that.play(); });
}); 
```

但是如何设置 VideoJS 来播放 RTMP 流？您是否使用相同的标签，或者是否有其他方式来指定 RTMP 提供程序和流 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T18:10:38.857

仅供参考 - VideoJS 中尚不提供 RTMP 流，但最近的更改（如[https://github.com/videojs/video.js/pull/605](https://github.com/videojs/video.js/pull/605)）表明它可能很快就会出现。

请注意[https://github.com/videojs/video.js/issues/559](https://github.com/videojs/video.js/issues/559)上的功能请求以获取更新。

# iphone - 如何为 iCloud 获取 EKSource？

> ID：13578278
> 
> 赞同：3
> 
> 时间：2012-11-27T06:05:18.870
> 
> 标签：iphone, ios, calendar, icloud

尝试为 iOS 实现 iCloud 日历同步。

需要获取相应的 EKSource 对象才能在那里创建日历。在迭代存储时，iCloud 存储的类型是 EKSourceTypeCalDAV，但相同的类型也可以用于其他存储。

那么如何指定相应的商店是否真的适用于 iCloud？

现在使用描述文本，但这不是一个正确的解决方案：

```
for (EKSource *source in store.sources) {
    if (source.sourceType == EKSourceTypeCalDAV) {
        if([source.title isEqualToString:@"iCloud"]) {
            caldavSource = source;
            break;
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:48:52.337

这就是我在 iCloud 上创建日历的方式

```
EKSource* localSource=nil;

for (EKSource* source in self.eventStore.sources)
{
    if(source.sourceType == EKSourceTypeCalDAV && [source.title isEqualToString:@"iCloud"])
    {
        localSource = source;
        break;
    }

} 
```

# matlab - 在matlab网格中查找最近点

> ID：13578279
> 
> 赞同：10
> 
> 时间：2012-11-27T06:05:21.287
> 
> 标签：matlab, nearest-neighbor

G'day

我正在尝试编写一种智能方法来找到最接近轮廓点的网格点。

网格是一个二维网格，存储在`x`and中`y`（其中包含网格单元的 x 和 y 公里位置）。

轮廓是一条线，由 x 和 y 位置组成，不一定是规则间隔的。

如下所示 - 红点是网格，蓝点是轮廓上的点。如何找到最接近每个蓝点的红点的索引？

[![插入最接近每个蓝点的红点](../Images/2fc9ff9f82fc083d8fbafd6d327cf6a1.png)](https://i.stack.imgur.com/OzrOJ.png)

编辑 - 我应该提到网格是一个纬度/经度网格，位于非常靠近南极的区域。因此，这些点（红点）是以米为单位的距离南极的位置（使用极地立体表示法）。由于网格是地理网格，因此网格间距不相等 - 由于高纬度地区的变形，单元格的形状略有不同（红点定义单元格的顶点）。结果是我不能只找到`x`和`y`矩阵的哪一行/列最接近输入点坐标 - 与来自 的常规网格不同`meshgrid`，行*和*列中的值各不相同......

干杯戴夫

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T06:13:19.933

通常的方法是去：

```
for every blue point {
    for every red point {
        is this the closest so far
    }
} 
```

但更好的方法是将红色数据放入kd树中。这是一棵树，它沿着平均值分割数据，然后沿着它们的平均值分割两个数据集，等等，直到你把它们分成一个树结构。

![在此处输入图像描述](../Images/4f0f522e3a05625c6ec2326b85bd578c.png)

这会将您的搜索效率`O(n*m)`从`O(log(n)*m)`

这是一个图书馆：

[http://www.mathworks.com.au/matlabcentral/fileexchange/4586-kd-tree](http://www.mathworks.com.au/matlabcentral/fileexchange/4586-k-d-tree)

该库将为您提供轻松从数据中创建 kd 树并在其中搜索最近点的方法。

或者，您可以使用四叉树，不是那么简单，而是相同的想法。（您可能需要为此编写自己的库）

确保最大的数据集（在这种情况下是您的红点）进入树，因为这将提供最大的时间减少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T00:09:50.057

我想我已经找到了一种`nearest`使用`griddata`.

`x`我制作了一个与网格和矩阵大小相同的`y`矩阵，但填充了相应矩阵元素的线性索引。这是通过将向量（即`1:size(x,1)*size(x,2)`）重塑为与 相同的维度而形成的`x`。

然后我使用`griddata`和`nearest`标志来找到最接近我的轮廓上每个点的点的线性索引（蓝点）。然后，只需将其转换回下标符号，`ind2sub`我就会得到一个 2 行向量来描述最接近蓝点轮廓上每个点的点的矩阵下标。

下图显示了轮廓（蓝点）、网格（红点）和最近的网格点（绿点）。

[![网格化的结果](../Images/9cc94fa1c35026bc848810ec8519a202.png)](https://i.stack.imgur.com/rrwOE.png)

这是我使用的代码片段：

```
index_matrix1 = 1:size(x,1)*size(x,2); 
index_matrix1 = reshape(index_matrix1,size(x));
lin_ind = griddata(x,y,index_matrix1,CX,CY,'nearest'); % where CX and CY are the coords of the contour
[sub_ind(1,:),sub_ind(2,:)] = ind2sub(size(x),lin_ind); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T23:11:28.620

我想在立体表示中，您的点在`r`-`theta`坐标中形成了一个整齐的网格。（我对此不太熟悉，如果我错了，请纠正我。我的建议可能仍然适用）。

对于绘图，您将立体图转换为经纬度，这会扭曲网格。但是，为了找到最近的点，请考虑将蓝色轮廓点的经纬度转换为立体坐标，在该坐标中，使用其`r`和`theta`值很容易确定每个点的像元。

如果您可以索引立体表示中的单元格，则当您转换为另一种表示时，索引将相同。

主要要求是在某种变换下，网格点由两个向量定义，`X`并且`Y`，因此对于任何`x`in`X`和`y`in `Y`，`(x, y)`都是一个网格点。接下来通过该变换同时变换网格和轮廓点。然后给定一个任意点`(x1, y1)`，我们可以通过找到最接近`x`的`x1`和最接近的`y`来找到合适的网格单元`y1`。变换回来以获取所需坐标系中的点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-04T23:14:02.843

`dsearchn`：ND最近点搜索。

`[k, d] = dsearchn(A,B)`: 返回到最近点的距离 d。d 是长度为 p 的列向量。

[http://au.mathworks.com/help/matlab/ref/dsearchn.html?s_tid=gn_loc_drop](http://au.mathworks.com/help/matlab/ref/dsearchn.html?s_tid=gn_loc_drop)

# python - 如何在 Python 中显示和解析 rsync 进度？

> ID：13578281
> 
> 赞同：6
> 
> 时间：2012-11-27T06:05:43.643
> 
> 标签：python, progress-bar, rsync

我正在使用`rsync`with`--info-progress`选项的开发版本。我正在编写一个 python 程序，它使用 rsync 将文件从服务器传输到本地计算机：

```
finalresult = subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz', '--info=progress2', 'hostname:/filename', '/home/nfs/django/user'],
                                    stdout=subprocess.PIPE).communicate()[0] 
```

当我在终端中运行程序时，它不会显示进度，但是如果我独立使用 rsync 实用程序，它会显示进度。我想在终端中查看进度并解析或获取进度百分比以便稍后使用它来实时向用户显示进度条。谢谢！

**编辑：** 这是我迄今为止尝试过的：上面的代码将命令处理存储在`finalresult`变量中。我试图`finalresult`在 django 模板中打印变量，但它没有返回任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:29:47.870

抱歉，但这可能既不能用`subprocess`也不能用标准库的其余部分来完成。那是因为在里面`subprocess.communicate()`你会发现：

```
def wait(self):
   """Wait for child process to terminate.  Returns returncode
   attribute."""
   if self.returncode is None:
      # Try calling a function os.waitpid(self.pid, 0)
      # Ignore Interrupted System Call (errno.EINTR) errors  
      pid, sts = _eintr_retry_call(os.waitpid, self.pid, 0)
      self._handle_exitstatus(sts)
   return self.returncode 
```

在 Unix 上，os.waitpid() 函数调用意味着：等待由进程 id pid 给出的子进程完成，并返回一个包含其进程 id 和退出状态指示的元组。因此，您必须等到子进程完成。

最接近的替代方案是[pexpect](http://www.noah.org/wiki/pexpect)，但它仍然不会进行进度条分析。一个可能的解决方案是破解 rsync 并修补其进度输出，以便 pexpect 可以使用它。

# a-star - A*（A 星）算法说明

> ID：13578287
> 
> 赞同：2
> 
> 时间：2012-11-27T06:06:24.197
> 
> 标签：a-star

我试图根据维基百科的伪代码实现一个简单的 A* 搜索程序。但是，我对它对 openset 的解释有些不清楚。我了解开始节点最初将添加到 openset 中。但是，代码执行会在 处引发错误`remove current from openset`，这是有道理的，因为`current`在第一次迭代期间从未将其添加到 openset。似乎 openset 在循环之前还需要添加起始节点的 8 个邻居。有人可以指出我正确的方向吗？

谢谢，

```
 function A*(start,goal)
 closedset := the empty set    // The set of nodes already evaluated.
 openset := {start}    // The set of tentative nodes to be evaluated, initially containing the start node
 came_from := the empty map    // The map of navigated nodes.

 g_score[start] := 0    // Cost from start along best known path.
 // Estimated total cost from start to goal through y.
 f_score[start] := g_score[start] + heuristic_cost_estimate(start, goal)

 while openset is not empty
     current := the node in openset having the lowest f_score[] value
     if current = goal
         return reconstruct_path(came_from, goal)

     remove current from openset
     add current to closedset
     for each neighbor in neighbor_nodes(current)
         if neighbor in closedset
             continue
         tentative_g_score := g_score[current] + dist_between(current,neighbor)

         if neighbor not in openset or tentative_g_score <= g_score[neighbor] 
             came_from[neighbor] := current
             g_score[neighbor] := tentative_g_score
             f_score[neighbor] := g_score[neighbor] + heuristic_cost_estimate(neighbor, goal)
             if neighbor not in openset
                 add neighbor to openset

 return failure 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T16:50:15.417

“开放集”是我们从中选择的节点集`current`——也就是说，它包含我们接下来可能有兴趣查看的所有节点。“封闭集”是我们已经考虑过的节点集。通常，我们只是在每个`Node`、命名`HasBeenVisited`或类似的东西上设置一个标志，而不是一个实际的封闭集。

最初，开放集仅包含`start`，因此在第一次迭代中，我们删除`start`，将其邻居添加到开放集，然后添加`start`到封闭集。然后我们取 Open 集中的下一个节点，添加它的邻居，等等。

假设您的启发式是[一致](http://en.wikipedia.org/wiki/Consistent_heuristic)`open`的，一旦删除它们就不会被重新添加到集合中。

# vb.net - “新”：论点太多

> ID：13578288
> 
> 赞同：0
> 
> 时间：2012-11-27T06:06:25.897
> 
> 标签：vb.net, forms, overriding

我制作了一个“自定义”表格，如下所示。当我说：

```
Dim nSplash As New frmSplash(nBitmap) 
```

它告诉我“ **Public Sub New 的论点太多**”。

我不明白它为什么嘲笑它。

```
Imports System.Drawing
Imports System.Drawing.Imaging
Imports System.Runtime.InteropServices
Imports System.Windows.Forms

Namespace AlphaWindow

Public Class frmSplash

    Inherits Form

    Public Sub New(ByRef uBitmap As Bitmap)

        Me.Size = uBitmap.Size
        Me.StartPosition = System.Windows.Forms.FormStartPosition.CenterScreen

        APIHelp.ShowTopmost(Me)

        Me.SelectBitmap(uBitmap)

    End Sub

 (...)

' Class to assist with Win32 API calls
Class APIHelp

    Private Const SW_SHOWNOACTIVATE As Integer = 4
    Private Const HWND_TOPMOST As Integer = -1

 (...)

End Class
End Namespace 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:29:57.013

问题不在于命名空间，而是当包含命名空间时，表单必须由“Namespace.Form”调用，而不仅仅是“Form”。

# javascript - 访问单选按钮值

> ID：13578300
> 
> 赞同：0
> 
> 时间：2012-11-27T06:07:26.367
> 
> 标签：javascript

html代码： -

```
<input type="radio" name="radio" id="radio" value="1" onclick="validate()"> For Yourself</input> </p></br>
    <p>
    <input type="radio" name="radio" id="radio" value="2" onclick="validate()"> For Users</input>
    </p> 
```

和 JavaScript 代码：-

```
function validate()
    {
        var btn_value=document.getElementById("radio").value;
        if(btn_value==true)
        {
            alert(btn_value);
        }

    } 
```

现在，每当我尝试打印单选按钮的值时。它始终将值打印为 1。

所以，现在我不明白我到底在这里错过了什么......

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:10:49.037

元素`ID`应该是唯一的。我修改了您的 HTML 和 JS 部分并在下面检查

试试这个

**HTML**

```
<p>
     <input type="radio" name="radio" id="radio1" value="1" onclick="validate(this)"> For Yourself</input> </p></br>
<p>
    <input type="radio" name="radio" id="radio2" value="2" onclick="validate(this)"> For Users</input>
</p> 
```

**JavaScript**

```
function validate(obj)
    {
        var btn_value=obj.value;
        if(btn_value==true)
        {
            alert(btn_value);
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:13:18.623

首先，永远不要在你的 html 中使用 DOMID 两次！删除它们......只使用重复的名称！

```
<input type="radio" name="radio" value="1" onclick="validate()"> For Yourself</input> </p></br>
<p>
<input type="radio" name="radio" value="2" onclick="validate()"> For Users</input>
</p> 
```

使用 js 检查具有 name 属性的每个元素！

```
function validate() {
    var elements = document.getElementsByName("radio");
    for(var n = 0; n < elements.length; n++) {
        if(elements[n].checked === true) {
            alert(elements[n].value);
        }
    }
} 
```

如果您仅在 onclick 中使用您的 validate 方法，您可以像这样在 validate 方法中传递 domelement：

```
<input type="radio" name="radio" value="1" onclick="validate(this)"> For Yourself</input> </p> 
```

和你的js：

```
function validate(domElement) {
     if(domElement.checked === true) {
            alert(elements[n].value);
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:10:35.263

试试这个

```
<input type="radio" name="radio" id="radio" value="1" onclick="validate(this)"> For Yourself</input> </p></br>
<p>
<input type="radio" name="radio" id="radio" value="2" onclick="validate(this)"> For Users</input>
</p>​

function validate(ele)
{
    alert(ele.value);
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T06:11:31.720

1.  ID 必须是唯一的，给它相同的 id 是错误的。
2.  您可以为 ID 提供一个运行编号（-radio1、radio2 等）并遍历它们以检查选择了哪个。

# bash - 从长文本中提取字符串

> ID：13578302
> 
> 赞同：3
> 
> 时间：2012-11-27T06:07:31.463
> 
> 标签：bash, shell, grep

OSX 中的以下命令检查帐户是否被禁用（或未被禁用）。

我想用 grep 字符串“isDisabled=X”来创建禁用用户的报告，但由于输出在三行上，我不确定如何执行此操作，而且我对第三行的前 12 个字符感兴趣：

```
bash-3.2# pwpolicy -u jdoe -getpolicy
Getting policy for jdoe /LDAPv3/127.0.0.1

isDisabled=0 isAdminUser=1 newPasswordRequired=0 usingHistory=0 canModifyPasswordforSelf=1 usingExpirationDate=0 usingHardExpirationDate=0 requiresAlpha=0 requiresNumeric=0 expirationDateGMT=12/31/69 hardExpireDateGMT=12/31/69 maxMinutesUntilChangePassword=0 maxMinutesUntilDisabled=0 maxMinutesOfNonUse=0 maxFailedLoginAttempts=0 minChars=0 maxChars=0 passwordCannotBeName=0 validAfter=01/01/70 requiresMixedCase=0 requiresSymbol=0 notGuessablePattern=0 isSessionKeyAgent=0 isComputerAccount=0 adminClass=0 adminNoChangePasswords=0 adminNoSetPolicies=0 adminNoCreate=0 adminNoDelete=0 adminNoClearState=0 adminNoPromoteAdmins=0 
```

非常感谢您的想法/建议！最终这将成为 Bash 脚本的一部分。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:13:28.560

这就是你`grep`用来匹配“ `isDisabled=X`”的方式：

```
grep -o "isDisabled=." 
```

* * *

**解释：**

*   `grep`: 调用 grep 命令
*   `-o`：使用`--only-matching`选项`grep`（来自 grep 手册：“仅打印匹配行的匹配（非空）部分，每个这样的部分在单独的输出行上。”
*   `"isDisabled=."`: 这是你给 grep 的搜索模式。`.`是正则表达式的一部分，它的意思是“匹配除换行符以外的任何字符” 。

* * *

**用法：**

这是您将其用作脚本的一部分的方式：

```
pwpolicy -u jdoe -getpolicy | grep -oE "isDisabled=." 
```

这是将结果保存到变量的方法：

```
status=$(pwpolicy -u jdoe -getpolicy | grep -oE "isDisabled=.") 
```

如果您的命令在某个时间之前运行，并且命令的结果被保存到名为“results.txt”的文件中，您可以将其`grep`用作如下输入：

```
grep -o "isDisabled=." results.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:08:56.907

您可以使用 sed 作为

```
cat results.txt | sed -n 's/.*isDisabled=\(.\).*/\1/p' 
```

这将打印 的值`isDisbaled`。

# ssis - SSIS 脚本组件连接

> ID：13578304
> 
> 赞同：5
> 
> 时间：2012-11-27T06:07:39.473
> 
> 标签：ssis, database-connection, script-component

几天来我一直在寻找解决方案，但似乎仍然找不到。我在脚本组件中获取连接时遇到问题。我需要查询我的数据库以检索要使用的 Id，然后再将其插入

```
public override void AcquireConnections(object Transaction)
{
    connMgr = base.Connections.Connection;
    conn =  (SqlConnection)connMgr.AcquireConnection(null);
} 
```

我在这里得到一个例外。

```
System.InvalidCastException: Unable to cast COM object of type 'System.__ComObject' to class type 'System.Data.SqlClient.SqlConnection'. Instances of types that represent COM components cannot be cast to types that do not represent COM components; however they can be cast to interfaces as long as the underlying COM component supports QueryInterface calls for the IID of the interface. 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-27T05:25:02.037

对于那些希望能够在脚本组件中执行此操作的人：

1.  双击脚本组件打开“脚本转换编辑器”
2.  单击“连接管理器”列表项。
3.  添加新的连接管理器。选择现有的 ADO.NET 连接管理器。
4.  单击“脚本”列表项，然后单击“编辑脚本...”按钮。

您可以在脚本中执行以下操作：

```
using (SqlConnection connection = this.Connections.Connection.AcquireConnection(null) as SqlConnection)
{
    using (SqlCommand command = connection.CreateCommand())
    {
        command.CommandText = "SELECT [Value] FROM dbo.MyTable";
        command.CommandType = CommandType.Text;

        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                ProfanityWords.Add(reader.GetValue(0).ToString());
            }
        }
    }

    this.Connections.Connection.ReleaseConnection(connection);
} 
```

![在此处输入图像描述](../Images/8417e0f80bcf7ac8d79b04d49b2b286f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:51:05.790

应创建 ADO.NET 连接管理器并参考代码以将类型转换为`SqlConnection`. 如果您的 SSIS 包中没有 ADO.NET 连接，您将收到 TypeCast 异常。如果要使用 SqlConnection，应使用以下步骤。

1.  创建 ADO.NET 连接。
2.  在您的代码中使用以下行。

    ```
    var connObj = Dts.Connections["ADO.NETConnectionName"].AcquireConnection(null);

    var sqlConn = (SqlConnection)connObj; 
    ```

3.  完成 SQL 连接后。使用以下代码关闭/释放您的连接。

    ```
    Dts.Connections["ADO.NETConnectionName"].ReleaseConnection(connObj); 
    ```

希望这可以帮助。

# c# - Silverlight 中 ComboBox 项的工具提示

> ID：13578311
> 
> 赞同：0
> 
> 时间：2012-11-27T06:08:16.023
> 
> 标签：c#, silverlight-4.0, combobox, tooltip, silverlight-5.0

我只想`ToolTip`为 Silverlight Custom 中的每个项目添加一个`ComboBox`。因此当用户在项目周围移动时可以看到`ToolTip`，项目中的项目`ComboBox`将是字符串类型，并且相同的值将显示为`ToolTip`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:31:39.840

您可以通过添加一个简单的数据模板来创建工具提示——给模板`TextBlock`添加了工具提示：

```
<ComboBox>
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock ToolTip="{Binding}" Text="{Binding}" />
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

* * *

**编辑**- 使用后面的代码

```
var dt = new DataTemplate();
var tb = new TextBlock();
tb.ToolTip = new Binding(".");
tb.Text = new Binding(".");
dt.VisualTree = tb;

var cb = new ComboBox();
cb.ItemTemplate = dt; 
```

# oop - MVC：两步和复合视图模式之间的差异

> ID：13578312
> 
> 赞同：6
> 
> 时间：2012-11-27T06:08:18.867
> 
> 标签：oop, model-view-controller, design-patterns

简单来说，你能告诉我“两步视图”和“复合视图”布局设计模式之间的区别吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-27T10:09:43.607

[复合视图](http://www.corej2eepatterns.com/Patterns2ndEd/CompositeView.htm)，顾名思义，是视图的[复合](http://sourcemaking.com/design_patterns/composite)（如在 GOF 模式中）。这意味着 Composite View 是其他（Composite、[Template](http://www.martinfowler.com/eaaCatalog/templateView.html)、[Transform](http://www.martinfowler.com/eaaCatalog/transformView.html)等）视图的树形结构，您可以通过根 Composite View 对象统一处理这些视图。

![复合视图 UML](../Images/43ffa7f1977dca59845317258a93ab3f.png)

如果客户端分派到根视图，它将分派到树结构中的所有视图，从而创建结果页面。所以在复合视图中，没有两个步骤，而只有一个，因为每个单独的视图都是一步视图（具体的最终输出）。

> 使用由多个原子子视图组成的复合视图。整体模板的每个子视图都可以动态包含在整体中，页面的布局可以独立于内容进行管理。

在简化的伪代码中：

```
composite = new CompositeView;
composite.add(new HeaderView(headerData));
composite.add(new TableView(tableData));
…
composite.add(new FooterView(footerData));
composite.render(); 
```

这与[两步视图](http://www.martinfowler.com/eaaCatalog/twoStepView.html)的不同之处在于两步视图不是组合，而只是两个执行步骤，首先从域数据到该数据的逻辑屏幕表示，然后到具体的输出格式。也就是说，它将页面的逻辑结构和格式分开。

![两步视图 UML](../Images/d788fffbc0c1972a0b97c2692c256806.png)

> 两步视图通过将转换分为两个阶段来处理这个问题。第一个将模型数据转换为没有任何特定格式的逻辑表示；第二个将逻辑表示转换为所需的实际格式。

在简化的伪代码中：

```
twoStepView = new TwoStepView;
twoStepView.setData(data);
twoStepView.setFirstStep(new ConcreteScreen);
twoStepView.setSecondStep(new ConcreteHtmlScreen);
twoStepView.transform(); 
```

如您所见，两步视图仅编排这两个步骤。例如，如果您的两步视图使用 XSLT，它只会处理从输入 XML 到屏幕 XML 到最终 HTML 输出的转换。Concrete Screen 和 ConcreteHTMLScreen 将成为 XSLT 模板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T06:54:31.287

我认为“复合视图”是一种设计模式，它建议您通过组合来设计视图，或者组合较小的部分（子视图）来创建整体——这有助于提高可重用性和更好的可维护性。

另一方面，“两步视图”更多是复合视图设计模式的具体实现，主要由 Zend 框架布局驱动。此实现建议您首先定义子视图的所有内容（步骤 1），然后允许`layout`在渲染的 HTML 中的适当位置渲染子视图（步骤 2）。

我通常是布局模式的粉丝，但发现两步（并首先定义所有子视图）的想法是有限的。我更倾向于按照 Smarty 3 的扩展/块功能的工作原理来考虑布局：

[http://www.smarty.net/docs/en/advanced.features.template.inheritance.tpl](http://www.smarty.net/docs/en/advanced.features.template.inheritance.tpl)

像 Smarty 这样的功能在其组成中没有固定数量的步骤 - 即布局可以扩展布局，子视图可以由进一步的子视图组成，等等。

希望有帮助。

# c - 文件包含头保护而不是C中可能的文件名？

> ID：13578314
> 
> 赞同：1
> 
> 时间：2012-11-27T06:08:36.557
> 
> 标签：c

在 C 语言中，我们可以包含一个文件为`#include "filename.h"`
But 例如，如果`filename.h`它的内容为 -

```
#ifndef FILE_NAME_GUARD

#define FILE_NAME_GUARD

//contents
.
.
. 
```

在我的另一个文件中，我可以包含上述文件`#include <FILE_NAME_GUARD>`而不是`#include "filename.h"`？

我尝试了这种方式，我惊讶地发现没有编译器错误或链接器错误。但是有这个警告：

```
FILE_NAME_GUARD: No such file or directory 
```

请帮助澄清我们是否可以包含带有`multiple_header_guard`名称而不是文件名的标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:16:36.097

否 - 除非您用于保护宏的名称与文件名*完全匹配，否则不会。*例如，您可以包含这样的文件：

```
#define filename <stdio.h>
#include filename 
```

将`filename`被宏替换，因此结果相当于：

```
#include <stdio.h> 
```

因此，如果您使用与要包含的文件名（包括引号或尖括号）精确匹配的 header-guard 宏，您可以使其工作 - 但否则它将失败。我认为以这种方式编写代码不是一个好主意。在大多数情况下，它似乎根本没有意义——只有在已经包含该标头时才会定义标头保护宏，而这正是您（通常）不想包含它的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:15:55.077

实际上，在 include 语句中的`<>`or之间发生的事情`""`几乎完全是实现定义的，所以你不能肯定地说。

从技术上讲，实现*可以*记住哪个包含文件映射到哪个保护名称并智能地处理它，但我从未在野外看到过。

而且，从您的警告信息来看，您的实施也没有这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:17:34.507

> 请帮助澄清我们是否可以包含带有 multiple_header_guard 名称而不是文件名的标头？

不，你不能，因为预处理器不是魔法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T06:21:30.390

您不能真正通过其标头保护宏包含文件。通常，标头保护宏定义为空字符串，并且很难包含以空字符串命名的文件。

你可以写：

```
#define MAGIC_HEADER "magic.h"
#include MAGIC_HEADER 
```

匹配后使用的宏`#include`其中一种形式`"name"`或`<name>`. 然而，用头后卫来尝试是没有意义的。在定义标头保护宏时，您已经包含该文件并且不想再次这样做（点头`<assert.h>`可以多次包含，每次都有不同的效果，具体取决于 NDEBUG 宏是否已定义）。

# rest - 如何使用 TeamCity REST API 获取触发构建的 buildId？

> ID：13578321
> 
> 赞同：3
> 
> 时间：2012-11-27T06:09:14.390
> 
> 标签：rest, teamcity, custom-build

我已经通过 TeamCity REST API 触发了一个自定义构建：

`http://{buildServer}/httpAuth/action.html?add2Queue={buildTypeId}`

但是这个http请求没有任何响应消息，所以我不知道这个构建是在运行还是在构建队列中。

有没有人知道如何通过 REST API 获取这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:25:37.787

好了，您可以使用以下 URL 查看支持的请求列表和 REST API 的参数名称：

`http://{buildServer}/httpAuth/app/rest/application.wadl`

从 TeamCity 7.1 开始，您可以使用以下 REST URL 检查构建状态：

`http://{buildServer}//app/rest/builds/buildType:(id:btXXX)/statusIcon`

[在此处](http://confluence.jetbrains.net/display/TW/REST+API+Plugin)阅读完整的 REST 文档

# android - 自动建议短语/句子完成

> ID：13578322
> 
> 赞同：2
> 
> 时间：2012-11-27T06:09:18.043
> 
> 标签：android

我正在构建一个应用程序，我希望我的应用程序能够读取用户在输入文本框中输入的内容，并根据到目前为止的句子向用户提供两个事物。

1）他们正在输入的可能短语列表以允许轻松自动完成，我猜我会使用我可以搜索的预设短语列表来获得这些建议。

2）根据句子结构或仅基于最后输入的单词，列出最有可能出现在句子中的单词。

我的问题是，还有其他类似的东西吗？搜索可能数千个字符串以尽可能快速有效地找到匹配项的最佳方法是什么？字符串应该存储在 sd 卡上的文本文件中还是直接存储在代码中或某种数据库或 xml 文件甚至 cvs 文件中？任何想法都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:23:22.463

我自己正在研究这个，我认为你应该看看[这个](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

他们使用的代码：

```
 public class CountriesActivity extends Activity {
 protected void onCreate(Bundle icicle) {
     super.onCreate(icicle);
     setContentView(R.layout.countries);

     ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
             android.R.layout.simple_dropdown_item_1line, COUNTRIES);
     AutoCompleteTextView textView = (AutoCompleteTextView)
             findViewById(R.id.countries_list);
     textView.setAdapter(adapter);
 }

 private static final String[] COUNTRIES = new String[] {
     "Belgium", "France", "Italy", "Germany", "Spain"
 }; 
```

}

您可以将预设短语声明为静态最终字符串，并在上面的示例中使用它来代替“COUNTRIES”。

现在，如果您尝试“预测”下一个单词类型的事情，那就是另一回事了。有一个名为 Swiffkey 的应用程序可以预测句子后面可能出现的一些单词。也许你可以用谷歌搜索一下，看看是否有源代码可以告诉你如何实现该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:31:21.443

您可以查看 Google Scribe - 它与您所说的差不多。该链接曾经是[http://scribe.googlelabs.com](http://scribe.googlelabs.com)，但现在似乎消失了 :(。此外，许多键盘（如 swiftkey）甚至标准的 Android 键盘都具有基本的“下一个单词”预测功能。

对于当前的单词预测，您过滤的加权字典可能是最好的。然后可以基于句法类似地进行下一个单词预测（这将需要字典中的一些语义结构，即哪些单词是主语，哪些是动词，动词可以采用哪些不同形式，例如短语，情态等）

您的研究的一些链接：

*   [项目：可能性](http://projectpossibility.org/viewProject.php?id=5)（他们使用 xml 例如 afaik）
*   [让我输入](http://www.clasohm.com/lmt/en/)（代码在 GPL 下可用）

任何允许您附加并快速搜索此类标记数据的数据库都应该工作，困难实际上在于构建它 - 非常雄心勃勃的项目，祝您好运！

# php - 提交表单后发送电子邮件

> ID：13578325
> 
> 赞同：0
> 
> 时间：2012-11-27T06:09:30.223
> 
> 标签：php, webforms, html-email

我想知道在用户向我的网站提交表单后如何向他们发送电子邮件..

**背景：** 我正在重新启动一个我父亲在 2002 年关闭的网站，我们目前有一个欢迎/启动页面，上面说该网站很快就会回来。此页面要求用户输入他们的电子邮件以添加到启动列表中。此表单使用“网络表单邮件程序”，如下所示：

```
<form action="/webformmailer.php" method="post"> 
```

他们的电子邮件被发送到我们选择的收件箱。我想做的是向该用户发送一封电子邮件，其中包含感谢、期待更新、再次感谢等。

我该怎么办？我不知道，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:42:11.920

如果您想发送一封非常简单的纯文本电子邮件，那么您可以使用 PHP[`mail()`](http://php.net/manual/en/function.mail.php)函数，因为它很快就可以完成。（假设您的网络主机设置了 sendmail）。否则 SMTP 功能是一个选项（上面的答案）。**但请确保您验证所有用户提交的输入，以确保您的邮件不会被垃圾邮件发送者使用**- 最重要的是，从电子邮件地址和用户名等中删除换行符。

但是更好的选择是使用预先编写的库，因为这可以消除很多问题/问题。[SwiftMailer](http://swiftmailer.org/)可能是目前最好的之一，因为它可以处理各种发送方法（SMTP、sendmail）和格式（文本、HTML 等），并有助于防止使用游览表单来中继垃圾邮件。它的文档也很好（如果你不使用 IE - 文档页面在 IE 中不起作用！）

如果您想发送附件或 HTML 电子邮件，那么它也可以通过`mail()`，但要让它在所有平台上工作有点困难。同样，SwiftMailer（和其他库）使这变得简单。所以不妨从图书馆开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:14:23.287

**尝试这个**

**SMTPconfig.php**

```
<?php
//Server Address
$SmtpServer="127.0.0.1";
$SmtpPort="25"; //default
$SmtpUser="username";
$SmtpPass="password";
?> 
```

**SMTPclass.php**

```
<?php
class SMTPClient
{

function SMTPClient ($SmtpServer, $SmtpPort, $SmtpUser, $SmtpPass, $from, $to, $subject, $body)
{

$this->SmtpServer = $SmtpServer;
$this->SmtpUser = base64_encode ($SmtpUser);
$this->SmtpPass = base64_encode ($SmtpPass);
$this->from = $from;
$this->to = $to;
$this->subject = $subject;
$this->body = $body;

if ($SmtpPort == "") 
{
$this->PortSMTP = 25;
}
else
{
$this->PortSMTP = $SmtpPort;
}
}

function SendMail ()
{
if ($SMTPIN = fsockopen ($this->SmtpServer, $this->PortSMTP)) 
{
fputs ($SMTPIN, "EHLO ".$HTTP_HOST."\r\n"); 
$talk["hello"] = fgets ( $SMTPIN, 1024 ); 
fputs($SMTPIN, "auth login\r\n");
$talk["res"]=fgets($SMTPIN,1024);
fputs($SMTPIN, $this->SmtpUser."\r\n");
$talk["user"]=fgets($SMTPIN,1024);
fputs($SMTPIN, $this->SmtpPass."\r\n");
$talk["pass"]=fgets($SMTPIN,256);
fputs ($SMTPIN, "MAIL FROM: <".$this->from.">\r\n"); 
$talk["From"] = fgets ( $SMTPIN, 1024 ); 
fputs ($SMTPIN, "RCPT TO: <".$this->to.">\r\n"); 
$talk["To"] = fgets ($SMTPIN, 1024); 
fputs($SMTPIN, "DATA\r\n");
$talk["data"]=fgets( $SMTPIN,1024 );
fputs($SMTPIN, "To: <".$this->to.">\r\nFrom: <".$this->from.">\r\nSubject:".$this->subject."\r\n\r\n\r\n".$this->body."\r\n.\r\n");
$talk["send"]=fgets($SMTPIN,256);
//CLOSE CONNECTION AND EXIT ... 
fputs ($SMTPIN, "QUIT\r\n"); 
fclose($SMTPIN); 
// 
} 
return $talk;
} 
}
?> 
```

**索引.php**

```
<?php
include('SMTPconfig.php');
include('SMTPClass.php');
if($_SERVER["REQUEST_METHOD"] == "POST")
{
$to = $_POST['to'];
$from = $_POST['from'];
$subject = $_POST['sub'];
$body = $_POST['message'];
$SMTPMail = new SMTPClient ($SmtpServer, $SmtpPort, $SmtpUser, $SmtpPass, $from, $to, $subject, $body);
$SMTPChat = $SMTPMail->SendMail();
}
?>
<form method="post" action="">
To:<input type="text" name="to" />
From :<input type='text' name="from" />
Subject :<input type='text' name="sub" />
Message :<textarea name="message"></textarea>
<input type="submit" value=" Send " />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:52:21.823

您可以使用 php 的[`mail()`](http://www.php.net/manual/en/function.mail.php)函数或使用 PHPmailer 之类的类（[从此处下载](https://github.com/Synchro/PHPMailer)）。后者给了我更好的结果。

```
<?php

require_once('../class.phpmailer.php');

$mail             = new PHPMailer(); // defaults to using php "mail()"

$body             = file_get_contents('contents.html');
$body             = preg_replace('/[\]/','',$body);

$mail->SetFrom('name@yourdomain.com', 'First Last');

$mail->AddReplyTo("name@yourdomain.com","First Last");

$address = "whoto@otherdomain.com";
$mail->AddAddress($address, "John Doe");

$mail->Subject    = "PHPMailer Test Subject via mail(), basic";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
}

?> 
```

这非常易于使用，并且需要最少的设置。您可以使用`$_POST`设置收件人地址等。您可能需要先验证电子邮件地址。使用 javascript 的[PHP 验证](http://php.net/manual/en/filter.examples.validation.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T06:23:27.110

您可以使用此代码在 PHP 中发送电子邮件。：

```
<?php

   require_once "Mail.php";

    $from = "<from.gmail.com>";
    $to = "<to.yahoo.com>";
    $subject = "Hi!";
    $body = "Hi,\n\nHow are you?";

    $host = "ssl://smtp.gmail.com";
    $port = "465";
    $username = "myaccount@gmail.com";  //<> give errors
    $password = "password";

    $headers = array ('From' => $from,
      'To' => $to,
      'Subject' => $subject);
    $smtp = Mail::factory('smtp',
      array ('host' => $host,
        'port' => $port,
        'auth' => true,
        'username' => $username,
        'password' => $password));

    $mail = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail)) {
      echo("<p>" . $mail->getMessage() . "</p>");
     } else {
      echo("<p>Message successfully sent!</p>");
     }

?>  <!-- end of php tag--> 
```

如果您想使用 PHP 发送大量电子邮件，那么您可以在[这里找到解决方案。](https://stackoverflow.com/questions/1118154/sending-mass-email-using-php)

# java - 用于匹配模式的 Java 正则表达式

> ID：13578326
> 
> 赞同：0
> 
> 时间：2012-11-27T06:09:31.300
> 
> 标签：java, regex

我是 Java 新手。请帮助我使用 Java 正则表达式来匹配模式并检索值。我需要匹配下面的模式：

```
\# someproperty=somevalue // this is a new property

\#someproperty=somevalue // this is a new property 
```

我必须匹配上述模式（可能包含空格），我需要检索`"someproperty"`和`"somevalue"`.

我尝试使用下面的模式，但它只匹配`someproperty=somevalue`，而不是`"#"`在开头。请帮帮我。

```
Pattern propertyKeyPattern = Pattern.compile("^\\s*(\\S+?)\\s*=.*?"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:47:50.507

如果要匹配整个字符串并查找模式，例如“ `\# someproperty =some value`”。试试正则表达式

```
^\\#\s*(\S+?)\s*=(.*)$ 
```

作为Java字符串，它是

```
"^\\\\#\\s*(\\S+?)\\s*=(.*)$" 
```

字符串的匹配结果`\# someproperty = a some value`是

```
matches() = Yes

find()    = Yes

group(0)  = \# someproperty = a some value

group(1)  = someproperty

group(2)  = a some value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:29:12.253

字符串 a=yourString.replaceAll("[^\w\s]",""); 通过使用它，您将获得“someproperty”和“somevalue”字符串，然后您可以检查它。有关更多信息，请清楚地发布您的问题。

# android - 禁用/过滤布局的任何触摸事件

> ID：13578328
> 
> 赞同：4
> 
> 时间：2012-11-27T06:09:34.017
> 
> 标签：android, android-layout, touch-event

是否可以通过定位 ParentLayout 来禁用布局内所有视图的触摸事件。我知道这可以通过浏览布局中包含的每个单独的视图来实现，但是如果有办法为完整的布局做到这一点，那将非常有帮助。我已经尝试了以下方法，但都是徒劳的。

```
ParentLayout.setClickable(false);

ParentLayout.onFilterTouchEventForSecurity(event);

ParentLayout.onTouchEvent(event);

ParentLayout.setOnTouchListener(l);
... 
```

和其他类似的方式。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:36:41.400

1.  禁用父视图中的所有触摸事件。`dispatchTouchEvent()`并且 `onInterceptTouchEvent()`都可以实现这个目标。
2.  设置`android:duplicateParentState="true"`为所有子视图，并设置父视图`android:enable="false"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:18:05.447

考虑采取以下方法。

```
 public void disableTouch(ViewGroup viewGroup) {
    int childCount = viewGroup.getChildCount();
    for (int i = 0; i < childCount; i++) {
        View view = viewGroup.getChildAt(i);
        view.setClickable(false);
        if (view instanceof ViewGroup) {
            disableTouch((ViewGroup) view);
        }
    }
} 
```

它将遍历所有 Child 并禁用每个 Child 的触摸事件。

# c# - 如何等待按钮被点击？

> ID：13578333
> 
> 赞同：1
> 
> 时间：2012-11-27T06:10:06.247
> 
> 标签：c#, .net

在C#编写的Windows窗体应用程序中单击一个按钮后，如何等待另一个按钮被单击？同时，我正在通过当前信息动态更新数据网格视图。

**编辑**

单击 button1 后，我想用当前信息重复更新 dataGridView，当单击 button2 时，我想停止更新 dataGridView。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:30:49.280

使用[计时器类](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)。

```
public partial class Form1 : Form
{
    System.Windows.Forms.Timer timer;

    public Form1()
    {
        InitializeComponent();

        //create it
        timer = new Timer(); 
        // set the interval, so it'll fire every 1 sec. (1000 ms)
        timer.Interval = 1000; 
        // bind an event handler
        timer.Tick += new EventHandler(timer_Tick); 

        //...
    }

    void timer_Tick(object sender, EventArgs e)
    {
        //do what you need
    }

    private void button1_Click(object sender, EventArgs e)
    {
        timer.Start(); //start the timer
        // switch buttons
        button1.Enabled = false;
        button2.Enabled = true;        
    }

    private void button2_Click(object sender, EventArgs e)
    {
        timer.Stop(); //stop the timer
        // switch buttons back
        button1.Enabled = true;
        button2.Enabled = false;
    } 
```

来自 MSDN：

> Timer 用于以用户定义的时间间隔引发事件。此 Windows 计时器专为使用 UI 线程执行处理的单线程环境而设计。它要求用户代码具有可用的 UI 消息泵，并且始终从同一个线程操作，或者将调用编组到另一个线程。
> 
> 使用此计时器时，使用 Tick 事件执行轮询操作或在指定时间段内显示启动画面。只要 Enabled 属性设置为 true 并且 Interval 属性大于零，就会根据 Interval 属性设置每隔一段时间引发 Tick 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:23:33.867

所以你有按钮 A 和按钮 B。当按钮 A 被按下时，你想等待按钮 B 被按下，然后做一些特别的事情？没有更多信息，最简单的方法是这样的：

```
private void OnButtonAClicked(object sender, EventArgs e)
{
    ButtonA.Enabled = false;
    ButtonA.Click -= OnButtonAClicked;
    ButtonB.Click += OnButtonBClicked;
    ButtonB.Enabled = true;
}

private void OnButtonBClicked(object sender, EventArgs e)
{
    ButtonB.Enabled = false;
    ButtonB.Click -= OnButtonBClicked;

    // Do something truly special here

    ButtonA.Click += OnButtonAClicked;
    ButtonA.Enabled = true;
} 
```

此代码将切换（初始状态；按钮 A 已启用，按钮 B 已禁用），当按下按钮 A 时，按钮 B 变为启用并处理事件等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:47:55.517

使用 BackgroundWorker [http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

它不会冻结 UI，支持 ProgressBar，也可以是异步的。在链接中，您将看到一个具有您想要的相同功能的好示例（通过单击一个按钮启动某些任务并通过单击另一个按钮取消它）。

# ios - XlsLib 在 IOS 应用程序中的集成

> ID：13578335
> 
> 赞同：1
> 
> 时间：2012-11-27T06:10:12.380
> 
> 标签：ios, iphone, excel, xlslib

我正在尝试将[xlslib](http://xlslib.sourceforge.net/)集成到我的应用程序中。在编译和安装 lib 之后，我在我的代码中添加了这个。然后我得到如下所示的错误：

```
format_t::format_t(CGlobalRecords& gRecords, const u16string& fmtstr) :
formatstr(fmtstr),
index(0),
m_usage_counter(0),
m_GlobalRecords(gRecords)
{
} 
```

错误：

`format.cpp:125:52: Reference to 'u16string' is ambiguous`

`Out-of-line definition of 'format_t' does not match any declaration in`

`xlslib_core::format_t`

在 format.h 文件中，声明如下

`format_t(CGlobalRecords& gRecords, const u16string& fmtstr);`

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:26:38.880

您为什么不在 SourceForge 页面上发布错误报告？无论如何，xlslib 项目已经更新，现在提供了 DHxlslibIOS 库，您可以将其合并到您的项目中。您可以[在此处](http://sourceforge.net/projects/xlslib/files/)下载带有最新 2.4.0b1 源的压缩包，或从 SVN 拉取它。该框架位于 DHxls 目录中。

# android - Android ArrayAdapter、AsyncTaskLoader。切换方向时重复项目

> ID：13578336
> 
> 赞同：0
> 
> 时间：2012-11-27T06:10:20.787
> 
> 标签：android

AsynctaskLoader 被多次调用，我在 listfragment 上得到 3 个项目（2 个重复项）。（我不想清除，因为我想实现一个无限滚动）。如果我在调用 onLoadFinished 时删除项目（adapter.remove），我仍然会得到两个项目（一个重复项）。如果我调用 adapter.clear onLoadFinished 我会得到 1 个项目，但无法实现无限滚动。无限滚动器是通过调用具有新想法和新捆绑包的加载器来实现的。

```
 public class ArticlePreviewAdapter extends ArrayAdapter<ArticlePreview>  {

        private final LayoutInflater inflater;
        private final ImageUpdater imageUpdater;

        public ArticlePreviewAdapter(Context context, ImageUpdater imageUpdater) {
            super(context, android.R.layout.simple_list_item_1);
            android.util.Log.d("SCROLL", "ArticlePreviewAdapter.ArticlePreviewAdapter" );

            this.inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);     
            this.imageUpdater = imageUpdater;
        }

        public void setData(ArticlePreview data) {
            //clear();      
            if (data != null) {         
                add(data);
                //this.add(data);           
            }
        }   

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            View view;

            if (convertView == null) {
                view = inflater.inflate(R.layout.article_preview, parent, false);
            } 
            else {
                view = convertView;
            }

            ArticlePreview articlePreview = getItem(position);      

            android.util.Log.d("SCROLL", "ArticlePreviewAdapter.getView pos: " + position);

            ((TextView) view.findViewById(R.id.article_preview_title)).setText(articlePreview.getTitle());
            ((TextView) view.findViewById(R.id.article_preview_info)).setText(articlePreview.getInfo());

            ImageView imageView = ((ImageView) view.findViewById(R.id.article_preview_image));
            Bitmap bitmap = this.imageUpdater.accessDirectly(articlePreview.getImageLink());

            if (bitmap != null) {
                imageView.setImageBitmap(bitmap);
            }
            else {
                this.imageUpdater.add(new ImageViewWebUpdate(view.hashCode(),
                        imageView, 100, 75, articlePreview.getImageLink()));
            }       

            return view;
        }
        } 
```

加载器类

```
public class ArticlePreviewLoader extends AsyncTaskLoader<List<ArticlePreview>>
{

    private String type;
    private String nid;
    private String start;
    private String end;

    private List<ArticlePreview> data;

    public ArticlePreviewLoader(Context context, Bundle args)
    {
        super(context);

        this.type = (String) args.get("type");
        this.nid = (String) args.get("nid");
        this.start = (String) args.get("start");
        this.end = (String) args.get("end");
    }

    /**
     * load JSON data, parse it and return.
     */
    @Override
    public List<ArticlePreview> loadInBackground()
    {

        android.util.Log.d("LOAD", "ArticlePreviewLoader.loadInBackground");

        // even if fail return empty list and print exception stack trace
        LinkedList<ArticlePreview> list = new LinkedList<ArticlePreview>();
        URL url;
        HttpURLConnection httpURLConnection = null;

        --

        android.util.Log.d("LOAD", "ArticlePreviewLoader.loadInBackground return");

        return Collections.unmodifiableList(list);
        //return list;
    }

    @Override
    protected void onStartLoading()
    {

        if (data != null)
            deliverResult(data);

        if (takeContentChanged() || data == null)
            forceLoad();
    }

    @Override
    protected void onStopLoading()
    {

        //super.onStopLoading();
        cancelLoad();
    }

    @Override
    protected void onReset()
    {
        super.onReset();

        onStopLoading();
        data = null;
    }
} 
```

帮助将不胜感激..我已经坚持了一天。

**编辑**

清单代码：

```
 <uses-sdk
        android:minSdkVersion="13"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />

     <!-- Permission to write to external storage -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".SplashActivity"
            android:label="@string/title_activity_splash" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".LoginActivity"
            android:label="@string/title_activity_login" >
        </activity>
        <activity
            android:name=".ArticleForumActivity"
            android:label="@string/title_activity_article_forum" >
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:11:26.903

`Set`改为使用`List<ArticlePreview> data`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:06:07.257

我已经完成了@Yahor10 所说的。加载器中的数据验证并在类 listfragment 的 onActivityCreated 方法中调用了 adapter.clad

# delphi - Delphi 2010/XE2 MDI 示例 - 缺少代码

> ID：13578338
> 
> 赞同：5
> 
> 时间：2012-11-27T06:10:26.120
> 
> 标签：delphi, mdi

当您希望创建一个新应用程序并单击 MDI 时，Delphi 会为您创建一个带有基本菜单项和图形的基本 MDI 应用程序。您可以运行程序并创建子窗口，并使用窗口菜单项将子窗口以级联、平铺等方式排列。

我的问题是：执行这些操作的代码在哪里？

我难住了。你打开pas文件编辑器，基本上什么都没有。它是如何做到的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T06:40:55.070

每个菜单项都链接到不同类型的`TWindowsAction=class(TAction)`. 例如`WindowsCascadeItem`，菜单项链接到`WindowsCascade1:TWindowsCascade(=class(TWindowAction))`操作。因此代码隐藏在 VCL\STDActns.PAS 中的此类实现中。

# sql - 使用返回多个值的函数更新多个列

> ID：13578340
> 
> 赞同：1
> 
> 时间：2012-11-27T06:10:33.190
> 
> 标签：sql, oracle

我正在尝试使用函数的多个返回来更新表。

我创建了一个类型

```
CREATE OR REPLACE TYPE city_state AS OBJECT
(
  city VARCHAR2(30),
  state VARCHAR2(2)
);
/ 
```

我有一个返回这种类型变量的函数。

```
CREATE OR REPLACE FUNCTION closestcity(lat IN NUMBER, lon IN NUMBER) RETURN city_state IS
... 
```

我需要更新一个包含城市、州、纬度和经度列的表。使用纬度/经度，我应该调用函数并使用结果来更新城市/州的值。我只想为每一行调用一次函数，并且只有一些行需要更新（假设 city 为 NULL）

这是我到目前为止得到的

```
UPDATE (SELECT * FROM t t1 WHERE city IS NULL)
SET (city, state) = (
                     SELECT newcity.city, newcity.state FROM
                       ( SELECT closestcity(latitude, longitude) newcity
                         FROM t t2
                         WHERE t1.latitude = t2.latitude AND
                               t1.longitude = t2.longitude)
                    ); 
```

但我得到一个无效的标识符错误。我觉得我过于复杂了，正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:35:58.863

出现该错误的原因是 Oracle 尝试限定select 语句`newcity`中引用的内容。`SELECT newcity.city, newcity.state`它找不到对象`newcity`，因此引发错误。还为内联视图设置别名，就`t1`好像您真的需要它一样。正如@Rene[提到](https://stackoverflow.com/a/13578634/997660)的，您可以成功地将其替换为表名。为此，您可以按如下方式重写您的更新语句：

```
UPDATE (SELECT * FROM t t1 WHERE city IS NULL) t1
   SET (city, state) = (
                         SELECT closestcity(latitude, longitude).city 
                              , closestcity(latitude, longitude).state
                           FROM t t2
                          WHERE t1.latitude = t2.latitude 
                            AND t1.longitude = t2.longitude 
                        ); 
```

或者简单地说：

```
UPDATE t t1 
   SET city  = closestcity(latitude, longitude).city 
     , state = closestcity(latitude, longitude).state
where t1.city is null 
```

**更新#1**

```
update (select nd.newdata.city  as newcity
             , nd.newdata.state as newstate
             , city
             , state
          from (                             
                 SELECT closestcity(latitude, longitude) newdata
                      , city
                      , state
                   FROM t
                  where city is null
                ) nd
              ) q  
set q.city  = q.newcity
  , q.state = q.newstate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:35:16.163

语法应该是：

```
UPDATE <table1>
set (<column1>, <column2>) = (select <column1>,<column2> 
                              from <table2> 
                              where <where clause table2 > )
where <where clause table1> 
```

所以你的查询应该是：

```
UPDATE t1
SET (city, state) = (SELECT closestcity(latitude, longitude) newcity
                            ,state
                       FROM t t2
                      WHERE t1.latitude = t2.latitude 
                        AND t1.longitude = t2.longitude)
where city IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:47:56.697

只是一个变化

```
UPDATE (SELECT * FROM t WHERE city IS NULL) **t1**
SET (city, state) = (
                     SELECT newcity.city, newcity.state FROM
                       ( SELECT closestcity(latitude, longitude) newcity
                         FROM t t2
                         WHERE t1.latitude = t2.latitude AND
                               t1.longitude = t2.longitude)
                    ); 
```

# php - 在 zf2 mvc 之外使用 Zend_Db zf2 模块

> ID：13578349
> 
> 赞同：3
> 
> 时间：2012-11-27T06:11:11.067
> 
> 标签：php, zend-db, zend-framework2

我正在编写一个不基于 zf2 mvc 的 PHP 应用程序。

我只想使用 Zend_Db zf2 模块。如何配置我的应用程序以知道如何在需要的地方找到 Zend_Db 相关的 PHP 文件？

我用 phyrus 下载了 zf2 Zend_db 模块并安装在该位置`vendor/zf2/php`。

我尝试使用以下命令将模块添加到包含路径：

```
set_include_path("../vendor/zf2/php".PATH_SEPARATOR.get_include_path()); 
```

我在目录中创建了与每个​​表相关的模型类文件（使用 zend-db-model-generator）`Model/`。

我的主要应用程序包含以下内容：

```
use DrinkManagement\Model\DrinkTable;
use Zend\Db\Adapter\Adapter;

set_include_path("../vendor/zf2/php".PATH_SEPARATOR.get_include_path());

require_once('Model/DrinkTable.php');

/**
 @var DrinkManagement\Model\Drink
 */
$drinkTable=null;

$drinkTable = new DrinkTable();
$res=$drinkTable->getDrink(1);
echo var_export($res,1); 
```

我的 DrinkTable 课：

```
namespace DrinkManagement\Model;

use Zend\Db\TableGateway\AbstractTableGateway,

class DrinkTable extends AbstractTableGateway
{
protected $table ='drink';
protected $tableName ='drink';

public function __construct(Adapter $adapter)
{
    $this->adapter = $adapter;
    $this->resultSetPrototype = new ResultSet(new Drink);

    $this->initialize();
}

public function fetchAll()
{
    $resultSet = $this->select();
    return $resultSet;
}

public function newSelect() {
    return new Select;
}

public function getSelect(&$select,$columnsArray=array()) 
{
    $select = new Select;
    return $select->from('drink')->columns($columnsArray);      
}

public function createIfNotExist($checkColumnsArray,$optionalColumns=array(),&$isRowCreated=null) {
        $rowset=$this->select($checkColumnsArray);
        $row = $rowset->current();
        $id=null;
        if ($row == null) {
            $allColumns=array_merge($checkColumnsArray,$optionalColumns);
            $affectedRows = $this->insert($allColumns);
            if ($affectedRows != 1) {
                throw new \Exception("error: could not add line to db");
            }
            $id=$this->lastInsertValue;
            $isRowCreated=true;
        } else {
            $id=$row->drink_id;
            $isRowCreated=false;
        }
        return $id;
}

//http://stackoverflow.com/questions/6156942/how-do-i-insert-an-empty-row-but-have-the-autonumber-update-correctly

public function createEmptyRow() {
    $row=array(
    'drink_id' => null
    );
    $affectedRows=$this->insert($row);
    if ($affectedRows != 1) {
        throw new \Exception("error: could not add empty row to db");
    }
    $id=$this->lastInsertValue;
    return $id;
}

public function getDrink($id)
{
    $id  = (int) $id;
    $rowset = $this->select(array('drink_id' => $id));
    $row = $rowset->current();
    if (!$row) {
        throw new \Exception("Could not find row $id");
    }
    return $row;
}

public function saveDrink(Drink $drink)
{
    $data = array(
                    'drink_type_id' => $drink->drink_type_id,
                    'drink_brand_id' => $drink->drink_brand_id,
                    'creation_timestamp' => $drink->creation_timestamp,
                );

    $id = (int)$drink->id;
    if ($id == 0) {
        $this->insert($data);
    } else {
        if ($this->getDrink($id)) {
            $this->update($data, array('drink_id' => $id));
        } else {
            throw new \Exception('Form id does not exit');
        }
    }
}

public function addDrink($drink_type_id, $drink_brand_id = null, $creation_timestamp = null)
{
    $data = array(            'drink_type_id' => $drink_type_id,
                    'drink_brand_id' => $drink_brand_id,
                    'creation_timestamp' => $creation_timestamp,
                );
    $affectedRows=$this->insert($data);
            if ($affectedRows != 1) {
        return null;
    }
    return $this->lastInsertValue;
        }

public function updateDrink($drink_id, $drink_type_id, $drink_brand_id, $creation_timestamp)
{
    $data = array(
                    'drink_type_id' => $drink->drink_type_id,
                    'drink_brand_id' => $drink->drink_brand_id,
                    'creation_timestamp' => $drink->creation_timestamp,
                        );
    $this->update($data, array(drink_id => $id));
}

public function deleteDrink($id)
{
    $this->delete(array('drink_id' => $id));
}

} 
```

当我尝试执行我的主 php 应用程序时，我收到以下错误消息：

```
PHP Fatal error:  Class 'Zend\Db\TableGateway\AbstractTableGateway' not found in /Users/ufk/Documents/workspace/tux-drink/TuxDb/mysql/Model/DrinkTable.php on line 10 
```

任何想法如何在不到处添加 require_once 的情况下解决问题？

也许我可以使用另一个 zf2 组件来自动加载相关类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:18:12.980

从我从您的代码中看到的，您没有在任何地方包含与必要类相对应的文件（例如 AbstractTableGateway）。将供应商路径设置为包含路径不会解决您的问题。

尝试手动添加您的依赖项会给您带来很多麻烦，因为您不仅要为您正在使用的类手动添加您的依赖项，还要为它们的依赖项（适配器、驱动程序等）添加依赖项。

在我看来，你最好使用[Composer](http://www.getcomposer.org/)等依赖管理器来管理你的依赖及其自动加载。实际上，您可以在 composer.json 中为 zendframework\zend-db 包定义一个依赖项（您必须在根项目目录中创建它），如下所示：

```
{
    "name": "Your project name",
    "description": "Your project description",
    "autoload": {
        "psr-0": {
            "Zend\\Db\\": ""
        }
    },
    "target-dir": "Zend/Db",
    "repositories": [
                {
                    "type": "composer",
                    "url": "https://packages.zendframework.com/"
                }
            ],
    "require": {
        "php": ">=5.3.3",
        "zendframework/zend-db":"2.0.*"
    }
} 
```

将 composer 安装到项目文件夹后，从命令行运行`php composer.phar install`。Composer 将为您生成自动加载文件`vendor/autoload.php`，您可以包含该文件以自动加载依赖项类。

例子：

```
<?php

// Always include autoload files when using vendor classes
include 'vendor/autoload.php';
require_once('Model/DrinkTable.php');

use DrinkManagement\Model\DrinkTable;
use Zend\Db\Adapter\Adapter;

//Don't forget declaring an adapter

$adapter = new Adapter(array(
        'driver' => 'Mysqli',
        'database' => 'test',
        'username' => 'dev',
        'password' => 'dev'
     ));
//Your constructor should include the adapter
$drinkTable = new DrinkTable('drinktable', $adapter);

//Do necessary stuff with the table
//....

echo var_export($res,1);

?> 
```

注意：你可以为 zend-loader 声明一个依赖，这样你就可以使用 Zend\Loader\StandardAutoloader 来自动加载你自己的类（假设你使用的是 PSR-0）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:10:13.517

这不是我的工作，但 Abdul Malik Ikhsan（ZF2 贡献者）有一篇关于将 Zend/DB 用作独立组件的精彩[博客文章。](http://samsonasik.wordpress.com/2013/01/15/zend-framework-2-cheat-sheet-zenddb/)

就像@yechabbi 提到的那样，使用 Composer 作为依赖项管理器可能会给自己带来很多好处。

看起来您可能对放置 Zend-Db 的位置和命名它感到困惑。例如，在我工作的 ZF2 安装中，Zend_Db 组件位于 vendor/zendframework/zendframework/library/Zend/Db 中。将 Composer 与正确的 require 语句一起使用，正如 Abdul 在他的博客文章中引用的那样，应该会为您解决所有这些问题：

```
"require": {
    "php": ">=5.3.3",
    "zendframework/zend-db": "2.*",
    "zendframework/zend-stdlib": "2.*"
} 
```

Abdul 然后在他的 Table 类中使用以下命名空间

```
use Zend\Db\TableGateway\TableGateway;
use Zend\Db\Sql\Select;
use Zend\Db\ResultSet\HydratingResultSet; 
```

我不知道这会解决您的所有问题，但我希望它会让您走上正确的轨道。

# java - 给予按钮鼠标点击焦点

> ID：13578352
> 
> 赞同：0
> 
> 时间：2012-11-27T06:11:38.100
> 
> 标签：java, swing, focus, setfocus

希望我能很好地解释这一点以使其有意义。

我的表弟被禁用并使用单个按钮来控制计算机上的应用程序。所有这些应用程序都是定制的，它们依赖于循环焦点和粗体突出显示的按钮。通过这样做，您只需在按钮突出显示时单击即可，这样就无需移动鼠标。

我目前正在为他制作一个小游戏，但我在聚焦部分遇到了障碍。我正在使用线程来循环焦点并`LayoutButton.requestFocus();`获得焦点。

如果按下空格键，这会起作用，但是他使用的按钮会按下鼠标左键。

有没有办法将按钮的焦点设置为鼠标左键？所以鼠标必须有效地指向按钮，所以当你点击鼠标时，按钮就会被按下。然后它必须取消该按钮的焦点并重新关注下一个按钮。有道理？

如果有人能指出我正确的方向，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:19:25.243

1.  确保您与 UI 的所有交互都是在事件调度线程的上下文中执行的
2.  使用`requestFocusInWindow`代替`requestFocus`,`requestFocus`取决于系统，因此其功能未定义
3.  [`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)您可以通过使用该类将鼠标光标的位置更改为坐在按钮上。

您将需要使用[`Component#getLocationOnScreen`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getLocationOnScreen%28%29)和的组合[`Robot#mouseMove`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getLocationOnScreen%28%29)

就像是...

```
try {
    button.requestFocusInWindow();
    Robot bot = new Robot();
    Point pos = button.getLocationOnScreen();
    bot.mouseMove(pos.x + (button.getWidth() / 2), pos.y + (button.getHeight() / 2));
} catch (AWTException ex) {
    Logger.getLogger(TestRobot.class.getName()).log(Level.SEVERE, null, ex);
} 
```

**更新示例**

好的，这是一个工作示例。这有一个内置的计时器，可以简单地移动到下一个可聚焦的组件。

我在每个按钮上附加了一个焦点组件，将鼠标移动到每个按钮的中心。

这意味着您可以让计时器移动到下一个组件或按 Tab，您应该得到相同的结果

```
public class TestFocusTransversal {

    public static void main(String[] args) {
        new TestFocusTransversal();
    }

    public TestFocusTransversal() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ButtonPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                Timer timer = new Timer(1000, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        FocusManager.getCurrentKeyboardFocusManager().focusNextComponent();
                    }
                });
                timer.setRepeats(true);
                timer.setCoalesce(true);
                timer.start();

            }

        });
    }

    public class ButtonPane extends JPanel {

        public ButtonPane() {
            setLayout(new GridLayout(3, 2));
            FocusHandler focusHandler = new FocusHandler();
            ActionHandler actionHandler = new ActionHandler();
            for (int index = 0; index < 6; index++) {
                JButton button = new JButton("Button " + index);
                button.addActionListener(actionHandler);
                button.addFocusListener(focusHandler);
                add(button);
            }
        }

    }

    public class FocusHandler extends FocusAdapter {

        @Override
        public void focusGained(FocusEvent e) {
            try {
                Robot bot = new Robot();
                Component component = e.getComponent();
                Point pos = component.getLocationOnScreen();
                bot.mouseMove(pos.x + (component.getWidth() / 2), pos.y + (component.getHeight() / 2));
            } catch (AWTException ex) {
                ex.printStackTrace();
            }
        }

    }

    public class ActionHandler implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent e) {
            JButton button = ((JButton)e.getSource());
            System.out.println("Fired " + button.getText());
        }
    }

} 
```

# syntax - 对象方法不接收可变参数

> ID：13578354
> 
> 赞同：1
> 
> 时间：2012-11-27T06:11:52.033
> 
> 标签：syntax, autohotkey, variadic-functions

这行得通。

```
string = <div>foo</div><br /><div>bar</div><br />
ModifyText(string, {"<br\s\/?>": "REPLECED`r`n", "<div>": "<p>", "</div>": "</p>"}*)
msgbox % string
ModifyText(ByRef strHaystack, oParams*) {
    for k, v in oParams 
        strHaystack := RegexReplace(strHaystack, k, v)
} 
```

但是，当我用类方法做同样的事情时，它会失败。类方法不接收传递的对象。

```
string = <div>foo</div><br /><div>bar</div><br />
o := new ByrefTest
o.ModifyText(string, {"<br\s\/?>": "REPLECED`r`n", "<div>": "<p>", "</div>": "</p>"}*)
msgbox % string
class ByrefTest 
{
    ModifyText(ByRef strHaystack, oParams*) {
        for k, v in oParams 
            strHaystack := RegexReplace(strHaystack, k, v)      
    }
} 
```

为什么？

手册似乎暗示了什么。

> 设置对象属性时不能使用此语法，因为最后一个物理参数实际上是分配的值。

但这听起来不像是关于这个限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:16:21.230

手册说：

> 直接调用用户定义函数时，参数数组可能包含命名项。

这意味着在其他情况下**不支持命名项目/参数。**

当您直接调用用户定义的可变参数函数`ModifyText`时，命名项（`"<br\s\/?>"`和`"<div>"`）`"</div>"`被复制到`oParams`. 请注意，对象本身不会传递给函数。

当您`ByrefTest.ModifyText`通过调用对象间接调用该函数时`o`，仅使用数组中的编号项目（但在这种情况下没有任何项目）。命名的项目被忽略。

# sql - 如何在pl sql中进行更新触发器查询

> ID：13578359
> 
> 赞同：2
> 
> 时间：2012-11-27T06:12:16.380
> 
> 标签：sql, oracle, plsql, oracle11g, oracle-apex

我有 2 张桌子 (1)`product_warehouse`和 (2) `Return_Vendor Invoice`。我必须根据Table的值更新`quantity`in by trigger。where是两个表中的唯一键。`product_warehouse``Return_Vendor Invoice``Item_code`

例如，如果 product_warehouse 包含 3 个数量，并且店主将 1 个数量返回给供应商，那么它应该是 2 个`Product_warehouse`。更新查询也可以接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:22:37.183

```
create or replace trigger tiuda_return_vendor after insert or update or delete
on return_vendor is
begin
  update product_wherehouse
  set
    quantity = quantity - (:new.quantity - nvl(:old.quantity, 0)
  where
    item_code = nvl(:new.item_code, :old.item_code);
end; 
```

此触发器在大多数情况下都有效。您可以插入更新或删除返回行。

唯一的事情是：更新时，您不能更新 item_code 本身，因为更新语句没有考虑到这一点。你可以很容易地解决这个问题，但我不知道它是否符合你的要求。我通常不会像那样更改值，而是删除该项目并为不同的项目添加新行。

更新数量工作正常。如果您更新数量，则会计算新旧之间的差异，并使用该差异来修改仓库中的库存数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T06:33:12.070

```
create or replace
TRIGGER "WR_RETURN_INVOICE_UPDATE_TRG" 
AFTER UPDATE ON RETURN_INVOICE
FOR EACH ROW
  BEGIN
    UPDATE PRODUCT_WAREHOUSE
    SET QUANTITY=QUANTITY-:OLD.QUANTITY
    WHERE ITEM_CODE=:OLD.ITEM_CODE;   
END WR_RETURN_INVOICE_UPDATE_TRG;

Try this one it will works. 
```

# facebook - Flex mobile facebook 注销后清除会话

> ID：13578365
> 
> 赞同：1
> 
> 时间：2012-11-27T06:12:35.260
> 
> 标签：facebook, apache-flex, mobile, logout

我正在尝试为 Android 和 iOS 构建 Facebook Flex 移动应用程序，我尝试使用连接 Facebook`Facebook Mobile.login(call Back);`

当我试图做`Facebook Mobile.log Out();`

我不知道它是否将我注销，但我认为我没有清除会话，因此它不再向我显示 Facebook 登录窗口。

对此有什么帮助吗？如何清除会话？以及如何返回 Facebook 登录窗口？

提前致谢

# java - 启动第二个活动而不是第一个 android

> ID：13578367
> 
> 赞同：1
> 
> 时间：2012-11-27T06:13:00.757
> 
> 标签：java, android

例如，第一次我想开始第一个活动 eq：登录屏幕。我验证屏幕，如果成功我想显示仪表板屏幕。第二次，我直接想显示仪表板屏幕而不是登录。是否可以直接启动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:17:40.217

在第一个活动中，如果登录成功，则在 sharedpreferences 中存储标志值为 true，下次检查 splashscreenactivity 中的 sharedpreferences 值是否为 true，然后直接打开仪表板活动，使用以下代码在登录成功时保存共享首选项。

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
SharedPreferences.Editor editor = preferences.edit();
editor.putString("Flag Value","True");
editor.commit(); 
```

要将 SharedPreferences 数据获取到 SplashScreen Activity：-

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
String FlagValue = preferences.getString("Flag Value","");

if(FlagValue.equals("True")){
    Intent intent=new Intent(this, DashBoard_Activity.class);
    startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:18:38.753

在您的项目中使用 SharedPreferences。

把你的字符串放在偏好中

```
Editor edit = preferences.edit();
edit.putString("pref_empId", "1");
edit.putString("pref_userName", "kiran");
edit.putString("pref_userType", "ADMIN");
edit.commit(); 
```

下次检查

```
pref_userName = preferences.getString("pref_userName", "n/a");
pref_empId    =  preferences.getString("pref_empId","n/a");
pref_userType =  preferences.getString("pref_userType","n/a");

if(!pref_userName.equals("") || !pref_userName.equals("n/a"))
{
   // go to login activity
}
else
{
  // dash board activity
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T06:31:46.783

您可以使用 Preferences 来检查天气，它是一个有效的用户不是。如果是，那么您可以允许进入第二个活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T06:17:26.630

一种解决方案是进行虚拟活动。它所做的只是一个人是否登录。如果他没有启动登录活动，则启动仪表板活动。

我通常在这里为应用程序放置一个启动屏幕，并显示应用程序的名称或带有漂亮图像的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T06:35:17.683

按照如下顺序 1\. 登录屏幕 2\. 在打开验证屏幕之前完成登录屏幕 3\. 成功验证后打开 dashword 屏幕

```
 Intent in = new Intent(Login.this,Validation.class);
      startActivity(in);
      this.finish();

      Intent in = new Intent(Validation.this,Dashword.class);
      startActivity(in);
      this.finish(); 
```

# c - 字符串 - 分段错误

> ID：13578369
> 
> 赞同：1
> 
> 时间：2012-11-27T06:13:04.010
> 
> 标签：c

我对这段代码有疑问。我正在使用 gcc 编译器，当我编译并执行此代码时，我遇到了 seg 错误。我只是分配了两个变量，name_1 作为指针，name_2 作为字符串。当我尝试为这两个值提供字符串输入时，我遇到了段错误。此段错误始终与我正在使用的指针变量相关联。

下面我提供了错误的代码和屏幕截图。

```
#include <stdio.h>

int main()
{
char *name_1 ;
char name_2[10] ;

/*      Getting 2 strings as an input from the user
        and is stored in the pointer variable name_1 and name_2*/
scanf("%s",name_1) ;
scanf("%s",name_2) ;

/*      Printing the values of the varibales 
        name_1 and name_2 in string format      */
printf("\n%s",name_1) ;
printf("\n%s",name_2) ;

printf("\n\n") ;
return 0 ;
} 
```

请在这段代码中帮助我。

![段错误](../Images/7e3068a27a8a091fd1bf31e437e62f22.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:15:40.647

`char *name_1;`, 是一个指针。最初，它指向一些随机垃圾。然后，您要求在程序启动时碰巧指向的`scanf`随机垃圾地址放置一个字符串；`name_1`这是未定义的行为。如果需要，一个符合 C 的 C 实现可以让这个程序只在星期二按预期工作。:)

如果你要传递一个指针，你必须首先确保它指向一个有效的缓冲区。

此外，您在调用中存在一定程度的间接违规`scanf`--`name_1`已经是一个指针。您不想将指针传递给指向`scanf`; 只是一个指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:16:43.940

问题的原始版本包含：

```
char *name_1;
...
scanf("%s", &name_1); 
```

该问题已被修改为包含：

```
char *name_1;
...
scanf("%s", name_1); 
```

您还没有为`name_1`指向分配任何空间。您还将 a `char **`（即`&name_1`）传递给`scanf()`了一个`%s`格式，该格式期望得到一个`char *`.

可能的修复：

```
int main(void)
{
    char name_1[20];
    char name_2[10];

    scanf("%s", name_1);
    scanf("%s", name_2); 
```

另一个可能的解决方法：

```
int main(void)
{
    char name_0[20];
    char *name_1 = name_0;
    char name_2[20];

    scanf("%s", name_1);
    scanf("%s", name_2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:15:12.007

```
char *name_1 ;
...
scanf("%s",&name_1) ; 
```

`name_1`是一个悬空指针，您正在尝试使用它，这是不正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T06:33:55.913

你的指针`char *name_1`应该指向某个东西。原则上遵循

```
Declaring a pointer variable does not create the type of variable, 
it points at. It creates a pointer variable. So in case you are pointing 
to a string buffer you need to specify the character array and a buffer 
pointer and point to the address of the character array. 
```

建议更改：

*   您可以让您`char *name_1`指向另一个字符数组或

*   你可以把它作为一个数组..

# android - eclipse中的Android项目无处可寻

> ID：13578379
> 
> 赞同：1
> 
> 时间：2012-11-27T06:13:49.280
> 
> 标签：android, eclipse, adt

我已经尝试了我在网上搜索的所有内容，例如卸载 sdk、eclipse 并下载所有内容，但我仍然无法从 New > Other 中找到“Android Project”。也可以从 Window>Customize Perspective 中选择。但我还是找不到。

我这样做是为了学习android编程，我是这个android编程的初学者，所以如果你们能告诉我如何开始这个以及你们推荐什么教程，我也会很感激。

我有适用于 Java 开发人员（Juno）的 Eclipse IDE。ADT 版本：21.0

是否有可能在新的 ADT 版本中删除“Android Project”并替换为 Android Application Project？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:23:08.783

它现在称为**Android 应用程序项目**。试试看。你会像往常一样在 new - other - android - android 应用程序项目下找到它。正如我理解你的那样，你是对的。他们在一些较早的 adt 版本中对其进行了重命名。

作为教程，我会向您推荐[http://www.vogella.com/articles/Android/article.html](http://www.vogella.com/articles/Android/article.html)。很好的解释和易于学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:21:42.883

尝试再次安装 ADT 插件。（不是 zip 文件，请使用“帮助”菜单上的“安装新软件”菜单。

否则，如何安装另一个 Eclipse 版本而不是 JUNO。

# php - 错误 mysql_num_rows() 期望参数 1 是资源，给定的布尔值

> ID：13578380
> 
> 赞同：-2
> 
> 时间：2012-11-27T06:13:49.400
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

警告：mysql_fetch_assoc() 期望参数 1 是资源，在第 36 行的 home/public_html/ 中给出布尔值

警告：mysql_fetch_assoc() 期望参数 1 是资源，在第 42 行的 home/public_html/ 中给出布尔值

在这两行代码中的第 36 行和第 42 行显示错误

请告诉我如何解决这个错误

这是我的代码

```
<?php

//get date
$button = $_GET['submit'];
$search = $_GET['search'];

if (!$button)
   echo "Type Name";
else
{
    if (strlen($search)<=3)
   echo "The item you searched for was to small";
    else
   {
     echo "You searched for <b>$search</b> <hr size='1'>";

     //connect to database

     mysql_connect('localhost','wh_num','password.');
     mysql_select_db('wh_num');

 //explode search term
           $search_exploded = explode(" ",$search);
           foreach($search_exploded as $search_each)
{
    $str = mysql_real_escape_string(substr($search_each, 0, 6));
    //construct query
    $x++;
    if ($x==1) $construct .= "keyword LIKE '$str%'";
    else       $construct .= " OR keyword LIKE '$str%'";
}

    $construct = "SELECT * FROM location WHERE $construct";
     $run = mysql_query($construct);

     $foundnum = mysql_num_rows($run);

     if ($foundnum==0)
        echo "No results found.";
     {

       echo "$foundnum results found.<p><hr size='1'>";

       while ($runrows = mysql_fetch_assoc($run))
       {

        //get data
        $email = $runrows['email']; 
        $area = $runrows['area'];
          echo "<b><font face=tahoma size=4 color=#600000> Name</b><b> <font face=tahoma size=4 color=#00AAFF> $search<BR></FONT></b>";
        echo "<b><font face=tahoma size=4 color=#600000> Email :</b><b><font face=tahoma size=4 color=#FF9933> $email<BR></FONT></b>
            <b><font face=tahoma size=4 color=#600000> Location :</b><b><font face=tahoma size=4 color=#FF0066> $area<BR></FONT></b>";

       }

     }

    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:46:31.663

从 else 部分删除 OR 后尝试： else $construct .= "keyword LIKE '$str%'";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:17:29.397

当资源为假时，您的查询失败....我认为您的错误是您所在位置的连接...

使用数组来创建正确的 mysql where 语句：

```
$where = array();
if ($x==1) $where[] = "keyword LIKE '$str%'";
else       $where[] = "keyword LIKE '$str%'";

$construct = "SELECT * FROM location";
if(count($where) > 0) {
    $construct .= ' WHERE '.implode(' OR ', $where);
} 
```

你的代码

```
<?php

//get date
$button = $_GET['submit'];
$search = $_GET['search'];

if (!$button)
    echo "Type Name";
else
{
    if (strlen($search)<=3)
        echo "The item you searched for was to small";
    else
    {
        echo "You searched for <b>$search</b> <hr size='1'>";

        //connect to database

        $link = mysql_connect('localhost','wh_num','password.');
        mysql_select_db('wh_num');

        //explode search term
        $search_exploded = explode(" ",$search);
        $where = array();
        foreach($search_exploded as $search_each)
        {
            $str = mysql_real_escape_string(substr($search_each, 0, 6));
            //construct query

            if ($x==1) $where[] = "keyword LIKE '$str%'";
            else       $where[] = "keyword LIKE '$str%'";
        }

        $construct = "SELECT * FROM location";
        if(count($where) > 0) {
            $construct .= ' WHERE '.implode(' OR ', $where);
        }
        $run = mysql_query($construct);
                if(strlen(mysql_error($link)) > 0) {
                         echo 'SQL error: '.mysql_error($link); exit;
                    }
        $foundnum = mysql_num_rows($run);

        if ($foundnum==0)
            echo "No results found.";
        {

            echo "$foundnum results found.<p><hr size='1'>";

            while ($runrows = mysql_fetch_assoc($run))
            {

                //get data
                $email = $runrows['email'];
                $area = $runrows['area'];
                echo "<b><font face=tahoma size=4 color=#600000> Name</b><b> <font face=tahoma size=4 color=#00AAFF> $search<BR></FONT></b>";
                echo "<b><font face=tahoma size=4 color=#600000> Email :</b><b><font face=tahoma size=4 color=#FF9933> $email<BR></FONT></b>
            <b><font face=tahoma size=4 color=#600000> Location :</b><b><font face=tahoma size=4 color=#FF0066> $area<BR></FONT></b>";

            }

        }

    }
}

?> 
```

# javafx - 我无法在 HTMLEditor (JAVAFX) 中输入日文粗体文本

> ID：13578381
> 
> 赞同：1
> 
> 时间：2012-11-27T06:13:58.497
> 
> 标签：javafx, html-editor

我正在使用 JAVAFX 开发工具。当我在 Eclipse 中创建 HTMLEditor 的屏幕时，虽然我按下了“粗体按钮”，但当我输入日语时它不是“粗体文本”。

此时，我正在选择字体，MS Gothic，PGothic，它也不是粗体。

我可以用粗体字输入英文，但不能用日文输入粗体字。

如果您能告诉我这件事发生的原因，我将不胜感激。

这是 HTMLEditor 中的一种“错误”吗？

还是某种设置问题？

[http://bitwalk.sitemix.jp/java_javafx_HTMLEditor.php](http://bitwalk.sitemix.jp/java_javafx_HTMLEditor.php)

谢谢您的合作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-16T10:34:04.763

检查窗口的字体文件夹。Windows 不支持粗体哥特式。检查[https://bugs.openjdk.java.net/browse/JDK-8117279](https://bugs.openjdk.java.net/browse/JDK-8117279)

# database - 数据库表结构

> ID：13578383
> 
> 赞同：2
> 
> 时间：2012-11-27T06:14:06.923
> 
> 标签：database, structure

我在一个表单中有七个组合框。选择的项目也需要通过表格在数据库中进行预先维护。但是，如何创建一个可以存储未绑定到任何主键的项目的表。所有字段将有不同的行数。或者我想为每个项目创建 7 个不同的表？请帮忙...

谢娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:34:43.823

下拉菜单通常由表格填充，这些表格基本上只是这些不同选项的定义。七个组合框中的每一个都控制完全不同的东西吗？如果您有七个独立的字段，则包含七个不同的表来包含标准选项似乎是完全合理的。

如果您举例说明不同组合框中的内容，我也许可以给出更详细的答案。

# geocode - 无法对德国柏林的国际机场进行地理编码

> ID：13578387
> 
> 赞同：1
> 
> 时间：2012-11-27T06:14:44.303
> 
> 标签：geocode, google-geocoding-api

我正在尝试对德国柏林的一个国际机场进行地理编码，但地理编码 API 返回 ZERO_RESULTS。

有问题的机场是柏林舍内费尔德机场，国际航空运输协会代码 SXF。它是柏林两个机场中最小的一个。使用我检查过的任何地址查询都无法对该机场进行地理编码，其中一些是：

[http://maps.googleapis.com/maps/api/geocode/json?address=SXF&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=SXF&sensor=false) [http://maps.googleapis.com/maps/api/geocode/json?address=Sch%C3%B6nefeld&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=Sch%C3%B6nefeld&sensor=false) [http://maps.googleapis.com/maps/api/geocode/json?address=Berlin%20Airport,%20Germany&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=Berlin%20Airport,%20Germany&sensor=false)

有趣的是，两三个月前就可以对其进行地理编码。您还可以对另一个现在未使用的机场进行地理编码：Tempelhof (THF)，因为几年前它已被 Schönefeld 取代。

我怎样才能报告这样的问题？

谷歌地图能够毫无问题地找到它。

编辑：

出于某种奇怪的原因，泰格尔机场也无法使用其 IATA 代码，即 TXL。

[http://maps.googleapis.com/maps/api/geocode/json?address=TXL&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=TXL&sensor=false)

当我尝试使用“Tegel Airport”查询时，其中一个结果是“Sixt Airport Berlin Tegel, 13405 Berlin, Germany”，具有以下类型：“airport”、“transit_station”和“establishment”，而 Sixt 是汽车租赁公司。

[http://maps.googleapis.com/maps/api/geocode/json?address=Tegel%20Airport&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=Tegel%20Airport&sensor=false)

这是怎么回事？

# android - 如何在地图视图气球中添加图像？

> ID：13578388
> 
> 赞同：0
> 
> 时间：2012-11-27T06:14:43.653
> 
> 标签：android

我使用了本教程 [http://crazyandroidian.blogspot.com/2011/10/custom-mapview-popup-in-android.html](http://crazyandroidian.blogspot.com/2011/10/custom-mapview-popup-in-android.html)请告诉我如何在气球标签中添加图像。我想在标记点气泡中添加位置图像。此代码仅显示一条文本消息，但没有图像。

```
package com.readystatesoftware.mapviewballoons;
import mapviewballoons.example.R;
import java.lang.reflect.Method;
import java.util.List;
import android.graphics.drawable.Drawable;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup.LayoutParams;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public abstract class BalloonItemizedOverlay<Item> extends ItemizedOverlay<OverlayItem>  {
  private MapView mapView;
  private BalloonOverlayView balloonView;
  private View clickRegion;
  private int viewOffset;
  final MapController mc;

  public BalloonItemizedOverlay(Drawable defaultMarker, MapView mapView) {
    super(defaultMarker);
    this.mapView = mapView;
    viewOffset = 0;
    mc = mapView.getController();
  }
  public void setBalloonBottomOffset(int pixels) {
    viewOffset = pixels;
  }
  protected boolean onBalloonTap(int index) {
    return false;
  }
  @Override
  protected final boolean onTap(int index) {
    boolean isRecycled;
    final int thisIndex;
    GeoPoint point;
    thisIndex = index;
    point = createItem(index).getPoint();
    if (balloonView == null) {
      balloonView = new BalloonOverlayView(mapView.getContext(), viewOffset);
      clickRegion = (View) balloonView.findViewById(R.id.balloon_inner_layout);
      isRecycled = false;
    } else {
      isRecycled = true;
    }
    balloonView.setVisibility(View.GONE);
    List<Overlay> mapOverlays = mapView.getOverlays();
    if (mapOverlays.size() > 1) {
      hideOtherBalloons(mapOverlays);
    }
    balloonView.setData(createItem(index));
    MapView.LayoutParams params = new MapView.LayoutParams(
      LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, point,
      MapView.LayoutParams.BOTTOM_CENTER
    );
    params.mode = MapView.LayoutParams.MODE_MAP;
    setBalloonTouchListener(thisIndex);
    balloonView.setVisibility(View.VISIBLE);
    if (isRecycled) {
      balloonView.setLayoutParams(params);
    } else {
      mapView.addView(balloonView, params);
    }
    mc.animateTo(point);
    return true;
  }
  /**
    * Sets the visibility of this overlay's balloon view to GONE.
  */
  private void hideBalloon() {
    if (balloonView != null) {
      balloonView.setVisibility(View.GONE);
    }
  }
  private void hideOtherBalloons(List<Overlay> overlays) {
    for (Overlay overlay : overlays) {
      if (overlay instanceof BalloonItemizedOverlay<?> && overlay != this) {
        ((BalloonItemizedOverlay<?>) overlay).hideBalloon();
      }
    }
  }
  private void setBalloonTouchListener(final int thisIndex) {
    try {
      @SuppressWarnings("unused")
      Method m = this.getClass().getDeclaredMethod("onBalloonTap", int.class);
      clickRegion.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
          View l =  ((View) v.getParent()).findViewById(R.id.balloon_main_layout);
          Drawable d = l.getBackground();
          if (event.getAction() == MotionEvent.ACTION_DOWN) {
            int[] states = {android.R.attr.state_pressed};
            if (d.setState(states)) {
              d.invalidateSelf();
            }
            return true;
          } else if (event.getAction() == MotionEvent.ACTION_UP) {
            int newStates[] = {};
            if (d.setState(newStates)) {
              d.invalidateSelf();
            }
            // call overridden method
            onBalloonTap(thisIndex);
            return true;
          } else {
            return false;
          }
        }
      });
    } catch (SecurityException e) {
      Log.e("BalloonItemizedOverlay", "setBalloonTouchListener reflection SecurityException");
      return;
    } catch (NoSuchMethodException e) {
      // method not overridden - do nothing
      return;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:47:40.333

我相信你需要为你的气球创建一个布局。在[本教程](http://mobileappproject.wordpress.com/2011/11/26/add-a-balloon-pop-up-on-map-in-itemizedoverlay/)中，作者创建了一个气球视图并拥有一个 balloon.xml。要显示图像，您需要将正确的图像视图放入 XML 文件中。有点像尝试在需要行布局的列表视图中显示文本和图像。除非我错过了，否则您需要在您的 `R.id.balloon_main_layout`

您甚至可能需要创建一个扩展 OverlayItem 的类，因为地图上的每个项目都可能有与之关联的不同图片。如果您创建一个扩展 OverlayItem 的项目，那么您可以传入图片或具有在创建叠加层时检索图片的功能。

编辑：您的示例完全按照它描述的方式工作。您在评论中链接到的教程可以解决您的问题。本教程显示文本，`ImageView`旁边有一个。图片在教程底部提供给您，您必须将它们保存到 res 目录中名为 drawable 的文件夹中。

编辑：我实际上刚刚得到了你使用的代码。它显示一个空白地图，因为我没有输入我的 api 密钥，但弹出窗口有文本和旁边的取消按钮，这是从 balloon_map_overlay.xml 膨胀的图像视图

您可以像这样扩展 OverlayItem 包含图片：

```
import android.graphics.Rect;
import android.graphics.drawable.Drawable;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.OverlayItem;

public class MyItem extends OverlayItem{

    Drawable balloonPic = null;
    Rect mBounds = null;
    public MyItem(GeoPoint point, String title, String snippet, Drawable draw, Rect bounds) {
        super(point, title, snippet);

        mBounds = bounds;
        //0,0 position is the geopoint on the map. Positive is going right and down. negative goes left and up. setBounds accepts (leftBound, topbound, right bound, bottom bound)
        draw.setBounds(-draw.getIntrinsicWidth()/2, -draw.getIntrinsicHeight(), draw.getIntrinsicWidth()/2, 0);
        this.setBalloonPic(draw);

    }

    @Override
    public void setBalloonPic(Drawable draw) {

        balloonPic = draw;

    }
    @Override
    public Drawable getBalloonPic() {

        return balloonPic;

    }

} 
```

在您的气球覆盖视图中，您需要在创建覆盖项时为图片设置数据。这将由您决定，但该示例显示了如何访问 OverlayItem 的 get 方法，并且上面的代码提示为您要显示的 Image 设置 getter 和 setter。否则，它将在每个气球上显示相同的图像。

```
public void setData(OverlayItem item) {
    layout.setVisibility(VISIBLE);
    if (item.getTitle() != null) {
    title.setVisibility(VISIBLE);
    title.setText(item.getTitle());
    } else {
    title.setVisibility(GONE);
    }
    if (item.getSnippet() != null) {
    snippet.setVisibility(VISIBLE);
    snippet.setText(item.getSnippet());
    } else {
    snippet.setVisibility(GONE);
    } 
```

PS你`public class MyItemizedOverlay extends BalloonItemizedOverlay<OverlayItem>`需要 `public class MyItemizedOverlay extends BalloonItemizedOverlay<MyItem>`

# jquery - 切换后触发功能

> ID：13578389
> 
> 赞同：1
> 
> 时间：2012-11-27T06:14:50.433
> 
> 标签：jquery, function, toggle

我不知道为什么这不起作用。我只是想在 .toggle-box 完成动画后将 .toggle 容器滚动到顶部。

```
jQuery(".toggle").click(function(){
    jQuery(".toggle-box").slideToggle(), function() {
        jQuery("html,body").animate({scrollTop: jQuery(".toggle").offset().top}, 500)
        };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:16:48.410

确保将滚动回调作为参数传递给`slideToggle`函数：

```
jQuery(".toggle").click(function(){
  jQuery(".toggle-box").slideToggle(function() {
    jQuery("html,body").animate({scrollTop: jQuery(".toggle").offset().top}, 500)
  });
}); 
```

# cocoa - NSManagedObjects 没有被保存——当心反向关系

> ID：13578395
> 
> 赞同：1
> 
> 时间：2012-11-27T06:15:27.670
> 
> 标签：cocoa, core-data, nsmanagedobjectcontext

（找到答案。见下文。）

在下面的代码中，我通过链接一些关系来更新大约 350,000 条记录。但是，最后，我检查了 sqlite 数据库，只保存了一小部分关系。其余的仍然为零。

-更新-

在描述有问题的代码之前，我应该解释一下`dictionaryOfSynsetDictionaries`包含预取的`synset`对象。它被组织成一个包含四个字典的字典，其中键是“n”、“v”、“a”和“r”（用于四个词性，或`pos`）。每个内部字典都包含对`synset`对象的引用，这些对象是 NSManagedObject 的子类。

每个内部字典都以所谓的`synsetOffset`.

下面的代码从存储中获取所有`SYNSET_POINTER`对象并将它们放入一个数组中。每个对象通过和( ) 属性`SYNSET_POINER`引用一个。它还包含一个关系，该关系将对象链接到by 匹配和对应的 in`synset``synsetOffset``partOfSpeech``pos``SYNSET_POINTER``synset``synsetOffset``pos``synset``dictionaryOfSynsetDictionaries`

因此，现在，在将`synset`对象预取并组织到字典中之后，以下代码将所有`SYNSET_POINTER`对象获取到一个数组中，遍历数组，通过对应关系将同义词指针直接链接到同义词集对象。

![在此处输入图像描述](../Images/c542328d3efad643fe7db3280956ad81.png)

`SYNSET`（上图显示了和对象之间的两种关系`SYNSET_POINTER`。这是基于原始数据集组织。它们有两个不同的目的。对于这个问题，我指的是一对一的关系。）

-结束更新-

这是执行更新的代码：

```
[request setEntity:[NSEntityDescription entityForName:@"SYNSET_POINTER" inManagedObjectContext:[ManagedObjectContext moc]]];
predicate = nil;
[request setPredicate:predicate];
sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"synsetOffset" ascending:YES];
[request setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];
NSArray *synsetPointersArray = [[ManagedObjectContext moc] executeFetchRequest:request error:&error];

int i = 0;
int j = 0;

for(SYNSET_POINTER *pointer in synsetPointersArray) {
    NSString *pos = pointer.partOfSpeech;
    NSString *offset = [pointer.synsetOffset stringValue];
    pointer.synsetPointer = [[dictionaryOfSynsetDictionaries objectForKey:pos] objectForKey:offset];
    error = nil;
    if (![[ManagedObjectContext moc] save:&error]) {
        NSLog(@"error with save\n%@\n%@",error.localizedFailureReason, error.localizedDescription);
        NSLog(@"pause and quit");
    }
    NSLog(@"pos %@, offset %@, pointer %@", pos, offset, pointer);
    if (j==100) {
        NSLog(@"%@ %d", pos, i);
        j=0;
    }
    i++;
    j++;
} 
```

在这里，我正在更新`synsetPointer`NSManagedObject 的子类 SYNSET_POINTER 类的指针的属性。我可以看到，在循环的每次迭代中，`synsetPointer`关系确实指向一个正确的对象，就像在这个调试器输出中一样：

```
2012-11-26 22:03:08.753           [26156:fb03] pos v, offset 5815, pointer <SYNSET_POINTER: 0x404e84f0> (entity: SYNSET_POINTER; id: 0x404d00d0 <x-coredata://9136BC94-4D77-4DB6-B03F-4F3AA35E2E49/SYNSET_POINTER/p282133> ; data: {
    partOfSpeech = v;
    pointerSymbol = "~";
    reverseRelatedSynset = "0x244cd880 <x-coredata://9136BC94-4D77-4DB6-B03F-4F3AA35E2E49/SYNSET/p85476>";
    sourceTarget = 0000;
    synsetOffset = 5815;
    synsetPointer = "0x244cdda0 <x-coredata://9136BC94-4D77-4DB6-B03F-4F3AA35E2E49/SYNSET/p83738>";
})
2012-11-26 22:03:08.822           [26156:fb03] pos v, offset 5815, pointer <SYNSET_POINTER: 0x404e8530> (entity: SYNSET_POINTER; id: 0x404d00e0 <x-coredata://9136BC94-4D77-4DB6-B03F-4F3AA35E2E49/SYNSET_POINTER/p285862> ; data: {
    partOfSpeech = v;
    pointerSymbol = "@";
    reverseRelatedSynset = "0x244cd870 <x-coredata://9136BC94-4D77-4DB6-B03F-4F3AA35E2E49/SYNSET/p86470>";
    sourceTarget = 0000;
    synsetOffset = 5815;
    synsetPointer = "0x244cdda0 <x-coredata://9136BC94-4D77-4DB6-B03F-4F3AA35E2E49/SYNSET/p83738>";
}) 
```

`synsetPointersArray`是按值排序的`synsetOffset`。我可以在 Firefox 的 sqlite 查看器中对表格进行排序，我看到大多数值仍然为零。上面的调试输出显示它们都已分配。由于某种原因，他们没有得救。

任何人都可以看到此代码的问题会阻止某些更新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:36:34.457

解决了！

从我提供的所有信息来看，这并不明显，但我发现图片中显示的一对一关系是问题所在。

SYNSET_POINTER.synsetPointer 应该指向一个且只有一个 SYNSET 对象。

但事实证明，**不止一个 SYNSET_POINTER 对象可以指向一个单独的 SYNSET 对象**。

因此，反向关系 SYNSET.reverseSynsetPoint 应该已配置为一对多双向关系的一部分。

由于托管对象上下文负责解决反向关系，因此一对一关系意味着先前分配的链接将被自动取消。每次更改 SYNSET.reverseSynSetPointer 时，将新的 SYNSET_POINTER 分配给已经设置了 SYNSET_POINTER 到 SYNSET 关系的 SYNSET 将使两个方向上的现有链接无效。这会在 SYNSET_POINTER 端留下一个悬空链接，但托管对象上下文会自动将其无效。

所以 Core Data 一直在设置和保存更改。但是，正如我所料，在配置了许多这些链接之后，它们也被取消了。

在我的情况下，我真的不需要反向关系，并把它作为事后的想法，我想我以后可能会使用它。我的建议是在最初设置这些类型的反向关系时仔细考虑它们。否则，他们可能会在以后制造麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:40:44.350

您的代码使用了非常糟糕的变量名称，这使得您难以理解您想要实现的目标。但是，您似乎犯了一个基本的概念错误。

通常，要在核心数据中建立关系，您不会将对其他核心数据对象的引用保存为这些对象中的属性。相反，您使用关系并让核心数据处理外键的技术细节。为了将对象添加到关系中，请在对象类中使用 Core Data 生成的访问器。

查看核心数据编程指南的这些部分：
[关系和获取的属性](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html#//apple_ref/doc/uid/TP40001857-CJBDBHCB)
[托管对象](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdMOM.html#//apple_ref/doc/uid/TP40002328-SW1)

# c# - 访问冲突异常 c#

> ID：13578396
> 
> 赞同：4
> 
> 时间：2012-11-27T06:15:30.720
> 
> 标签：c#, access-violation

这是我抛出异常的代码，它今天刚刚随机开始这里是照片：

![在此处输入图像描述](../Images/43fbe82b3669b3c677599e4577cd5d1b.png)

这是整个页面代码和错误异常：

```
 public frmWFDocumentDetail()
    {
        InitializeComponent();

        NavigationInTransition navigateInTransition = new NavigationInTransition();
        navigateInTransition.Backward = new TurnstileTransition { Mode = TurnstileTransitionMode.BackwardIn };
        navigateInTransition.Forward = new TurnstileTransition { Mode = TurnstileTransitionMode.ForwardIn };

        NavigationOutTransition navigateOutTransition = new NavigationOutTransition();
        navigateOutTransition.Backward = new TurnstileTransition { Mode = TurnstileTransitionMode.BackwardOut };
        navigateOutTransition.Forward = new TurnstileTransition { Mode = TurnstileTransitionMode.ForwardOut };
        TransitionService.SetNavigationInTransition(this, navigateInTransition);
        TransitionService.SetNavigationOutTransition(this, navigateOutTransition);

        DataContext = App.ViewModel_WFDocumentDetailItems;
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        //**this is how you pass parameters through to a new page**//
        string processID = "-1";
        string processName = "";
        NavigationContext.QueryString.TryGetValue("processID", out processID);
        NavigationContext.QueryString.TryGetValue("processName", out processName);

        App.ViewModel_WFDocumentHeaderItems.LoadData("johnny", processID);

        App.ViewModel_WFDocumentDetailItems.LoadData("johnny");

    } 
```

和访问冲突：

> *System.AccessViolationException：试图读取或写入受保护的内存。这通常表明其他内存已损坏。*

我已经阅读了它，有人说它是 nvidia 网络管理器，有人说我必须设置一些设置，比如 Suppress JIT optimization ，如果值没有改变则忽略 gpu 内存......但没有任何效果？任何人都可以请向我发送正确的方向吗？

根据要求，全栈

![在此处输入图像描述](../Images/db1303b5e87ee35d0935928c55a21096.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T06:50:06.680

我使用了 taylorjohnl 给我的设置“调试 -> 选项和设置 -> 调试 -> 常规 -> 仅启用我的代码”，然后错误直接出现在 xaml 中，这是一个语法错误，然后繁荣修复了它和应用程序再次工作:) 所以对我来说违反错误基本上是一个参考错误，希望这也可以帮助其他人，也可以使用 Silverlight 中的表达式混合在 UI 中调试 xaml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T17:29:38.800

我有一个类似的问题，最终通过向 MS 技术支持提交故障转储来解决。这是他们的回应：

要点是崩溃是 Windows 操作系统附带的 comctl32.dll（Windows 通用控件）版本 5.0 中的一个已知错误。此错误不会在通用控件的 5.0 版中得到修复，因为该版本适用于 Windows XP 之前存在的应用程序。此后，它已在 comctl32.dll 的 6.0 版中得到修复，该版本包含在 Windows XP 及更高版本中。请注意，两个版本的 comctl32.dll（5.0 和 6.0）都包含在自 Windows XP 以来的每个 Windows 版本中。旧的只是为了向后兼容非常旧的应用程序。

要解决此问题，您需要更改应用程序以使其选择 comctl32.dll 的 6.0 版。在 Windows 窗体应用程序中，这是通过在应用程序启动时调用 Application.EnableVisualStyles 方法来完成的。如果您在 C# 项目中进行开发，则可以通过在应用程序入口点中的 Application.Run 调用之前添加调用来执行此操作。例如：

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();   //Add this line
        Application.Run(new Form1());
    } 
```

如果您在 Visual Basic .Net 项目中，您可以通过转到您的项目属性，然后选择应用程序属性页面上的“启用应用程序框架”和“启用 XP 视觉样式”复选框来选择加入。

一旦你这样做，它应该解决这个特定的访问冲突。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T06:30:52.457

InitializeComponent() 中的代码是什么？其中有一些类引用 null，（主要是事件处理程序）。一旦触发，它会报告 AccessViolation。

# javascript - 删除/退格在 RadDatePicker 中不起作用

> ID：13578401
> 
> 赞同：1
> 
> 时间：2012-11-27T06:15:52.317
> 
> 标签：javascript, telerik, asp.net-4.0

我正在使用 RadDatePicker，但问题是退格/删除不起作用。因此，一旦用户选择了一个日期，他就无法取消选择它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:37:08.627

确保您没有将**DateInput-Enabled**和**EnableTyping**属性设置为**false**。

尝试将其更改为：

```
<telerik:RadDatePicker DateInput-Enabled="true" EnableTyping="true" runat="server" /> 
```

# iphone - 为什么 MKMapView 在其父控制器从导航堆栈中弹出后仍被保留？

> ID：13578404
> 
> 赞同：4
> 
> 时间：2012-11-27T06:16:11.620
> 
> 标签：iphone, ios, mkmapview, automatic-ref-counting, instruments

我在 SO 和其他地方发现了一些与此相关的问题，但没有一个有明确的答案。据我所知，使用 ARC，当包含它的视图控制器被释放时，我的 MKMapView 没有被释放（或者至少在堆上留下垃圾）。

我不*认为*这对我来说是一个愚蠢的问题 - 我花了很多时间倾注我的代码，一次测试一小部分，拍摄无数的堆，确保 mapView 的委托被设置为 nil 等等，最后，这条简单的线：

```
self.mapView = [[MKMapView alloc] initWithFrame:CGRectMake(20, 3, 154, 171)]; 
```

每次我进出 mapView 所在的视图控制器时，都会分配大约 200 KB 的内存。

所以，我的问题是：谁能解释这里发生了什么？ARC没有释放我的MKMapView占用的内存是否有原因？这是一个已知的问题？对我来说，它看起来非常像一个保留循环，并且丢失了相当多的记忆，但在我看来，这一定是幕后发生的事情......

**编辑**

这是我的财产声明`mapView`：

```
@property (nonatomic, retain) MKMapView *mapView; 
```

请记住，我正在做的唯一一件事`MKMapView`就是 alloc 和 init，正如我原来的问题中所看到的那样（当然我想用这个地图视图做更多的事情，但我已经把它缩小到这条线是导致泄漏的唯一部分 -`mapView`甚至从未插入到视图中）。当我注释掉那条线时，泄漏就消失了。

# knockout.js - Breeze 多次查询一个淘汰赛 observable 数组

> ID：13578408
> 
> 赞同：0
> 
> 时间：2012-11-27T06:16:22.020
> 
> 标签：knockout.js, asp.net-mvc-4, breeze

我被困在这一点上，无法继续。

我正在以这种方式为搜索表单创建 ViewModel：

```
var viewModel = new SearchViewModel("Api/Vehicle", "Vehicles");
ko.applyBindings(viewModel); 
```

稍后当用户单击查找按钮时，它会触发查找方法（此处简化）：

```
self.Find = function (predicate) {
     var query = breeze.EntityQuery
         .from(self.actionName)
         .where(predicate);

     var promisse = self.manager.executeQuery(query)
          .then(querySucceeded)
          .fail(queryFailed);
 } 
```

query* 方法仅将数据放入 Knockout.js 可观察数组中：

```
function querySucceeded(data) {
    data.results.forEach(function (item) {
        self.results.push(item);
    });

    return true;
}

function queryFailed(error) {
    var erroboj = { message: error.message };
    self.errors.push(erroboj);
    return false;
} 
```

问题是 querySucceeded 永远不会被调用，并且 Knockout.js 的数据永远不会更新触发数据绑定。

我做错了什么？

* * *

这是视图模型。有点不完整和模糊。我想我没有正确理解微风查询的承诺：

```
/*global $, jQuery, ko, breeze, bootstrap */

function SearchViewModel(serviceName, actionName) {
    "use strict";
    var self = this;

    self.serviceName = serviceName;
    self.actionName = actionName;
    self.errors = ko.observableArray([]);
    self.results = ko.observableArray([]);

    self.CreateEntity = function (entityTypeName) {
        var entityType = self.manager.metadataStore.getEntityType(entityTypeName),
            newEntity = entityType.createEntity();
        return self.manager.addEntity(newEntity);
    };

    function querySucceeded(data) {
        // Here the function I want to run
        data.results.forEach(function (item) {
            self.results.push(item);
        });

        return true;
    }

    function queryFailed(error) {
        var erroboj = { message: error.message };
        self.errors.push(erroboj);
        return false;
    }

    function addError(errorMessage) {
        var erroobj = { message: errorMessage };
        self.errors.push(erroobj);
    }

    function NoFilterDefined(Condition) {
        var s = "Find(): Funcao Filter() not implemented:";
        addError(s);
        Condition = null;
        throw new Error(s);
    }

    try {
        self.Filter = NoFilterDefined;

        self.Find = function () {
            debugger;
            var Condition = breeze.Predicate;
            var predicate;

            self.errors.removeAll();
            try {
                predicate = self.Filter(Condition);
            } catch (errorf) {
                var sf = "Find(): Error calling Filter() in {actionName}: {error}";
                sf = sf.replace("{error}", errorf.message);
                sf = sf.replace("{actionName}", predicate.toString());
                addError(sf);
                throw new Error(sf);
            }

            var query = breeze.EntityQuery
                .from(self.actionName)
                .where(predicate);

            try {
                debugger;
                var promisse = self.manager.executeQuery(query)
                    .then(querySucceeded)
                    .fail(queryFailed);

                // Here I suppose the .then(querySucceeded) already was called
            } catch (errore) {
                var se = "Find(): Erro calling query in {actionName}: {error}";
                se = se.replace("{error}", errore.message);
                se = se.replace("{actionName}", self.actionName);
                addError(se);
                throw new Error(se);
            }
        };

        self.FetchMetadata = function () {
            //self.manager.fetchMetadata() // not working?
            //   .fail(self.queryFailed);
            var query = breeze.EntityQuery
                    .from(actionName)
                    .where("1", "==", "0"); // Just to get metadata

            var execution = self.manager.executeQuery(query);
            execution.then(function (data) {
                data = null;
            });
            return true;
        };

        self.SetParameters = function (parameters) {
            self.parameter = ko.observable(parameters);
        };

        self.store = new breeze.MetadataStore(); // define metadataStore for all managers
        self.manager = new breeze.EntityManager({
            serviceName: self.serviceName,
            metadataStore: self.store
        });

    } catch (error) {
        var erroboj = { message: error.message };
        self.Errors.push(erroboj);
    }
}

try {
    // Uncomment //debugger to debug this script. Use Visual Studio an IE to debug.
    //debugger;

    var viewModel = new SearchViewModel("Api/Vehicle", "Vehicles");
    var parameter = {
        Id: "AAB-1113",
        Type: "CIF"
    };

    viewModel.SetParameters(parameter);

    viewModel.Filter = function (Condition) {
        "use strict";
        var self = this;
        var where = Condition.create("Type", "==", self.parameter.Type);

        if (parameter.Id !== null) {
            where = where.and("Id", "contains", self.parameter.Id);
        }

        return where;
    };

    ko.applyBindings(viewModel);

} catch (error) {
    alert("Erro de codigo:".concat(error.message));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:26:17.077

最重要的问题：为什么你的`querySucceeded`方法根本没有被调用？我假设你的`queryFailed`也没有被调用？一个或另一个应该被击中。

您是否使用调试器验证过这两种方法都没有被调用？您确定服务器有任何查询结果吗？我将从网络流量日志中复制 HTTP GET 请求并在浏览器地址栏中重放它。只有在您确定服务器正在返回某些内容之后，我才会继续处理查询结果。

* * *

**注意：我刚刚在您的问题陈述下方看到了完整的 ViewModel。**

我在看到完整的虚拟机之前写了回复，几乎重新开始。但是我保留了我原来的答案，因为*知道如何解决一个谜很重要*，而不仅仅是回答它。

几乎可以肯定，问题出在您的谓词上。`where(...)`如果您删除该子句，我敢打赌您会看到结果。我敢打赌，谓词设置的条件永远不会为真，因此您永远不会显示任何结果。

在内部`self.Find`，您将谓词初始化为 Breeze`Predicate`构造函数。我不认为你想这样做。您可能想要创建一个新实例。

您似乎想要创建一个“身份条件” - 一个始终为真的条件。这对我来说似乎有点聪明。的实用性和实现对`NoFilterDefined`我来说也是一个谜……但现在我离手头的事情还很远。

为什么不让 let`self.Filter()`保持`null`直到有实际的过滤条件？然后适当地构建您的查询，可能如下所示：

```
var 查询 = 微风.EntityQuery.from(self.actionName);
var predicate = self.Filter();
if (predicate) { query = query.where(predicate); }

```

查看此[谓词介绍](http://www.breezejs.com/documentation/query-filter)。

* * *

尽管我希望进行一些更改，但您**`querySucceeded`**似乎应该可以使用。例如，我不会将查询结果项一一推送到 KO observableArray 中。为什么不只使用查询结果数组？

```
函数查询成功（数据）{
    self.results(data.results);
};

```

如果您担心`data.results`在查询方法返回之前会弄乱数组（为什么？），您可以先复制它

`self.results(data.results.slice());`

小分：

*   我强烈建议将诸如此类的持久性问题从 ViewModel 中移出，并将其移至辅助组件中，例如此处[描述](http://www.breezejs.com/documentation/share-entitymanager)`dataservice`的 a或。`datacontext`

*   `fetchMetadata`据我所知，你不需要任何业务。Breeze 在 EntityManager 的第一次查询时隐式获取元数据。如有必要，您可以预取元数据（[请参阅`MetadataStore.fetchMetadata`](http://www.breezejs.com/sites/all/apidocs/classes/MetadataStore.html#method_fetchMetadata)），但这里没有明显的需要。

*   您的`self.Find`方法应该将承诺返回给调用者吗？

*   为什么你的`querySucceeded`回报`true`？

*   `self.results([])`您应该在`self.Find` 执行查询之前清除吗？我通常会。

*   为什么`self.errors`在`queryFailed`KO observableArray 中。您正在将错误消息推送到错误消息数组中……您在方法开始时清除的数组。为什么是数组？为什么不是一个简单的 KO observable？

# java - 向 Java 代码添加十进制毫秒延迟

> ID：13578412
> 
> 赞同：6
> 
> 时间：2012-11-27T06:16:43.757
> 
> 标签：java, multithreading, events, timeout, timedelay

我想在我的 java 代码中添加 0.488 毫秒的延迟。但是 thread.sleep() 和 Timer 函数只允许毫秒的粒度。如何指定低于该水平的延迟量？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T13:17:05.857

从 1.5 开始，您可以使用这个不错的方法`java.util.concurrent.TimeUnit.sleep(long timeout)`：

```
TimeUnit.SECONDS.sleep(1);
TimeUnit.MILLISECONDS.sleep(1000);
TimeUnit.MICROSECONDS.sleep(1000000);
TimeUnit.NANOSECONDS.sleep(1000000000); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T06:19:07.100

您可以使用`Thread.sleep(long millis, int nanos)`

请注意，您无法保证睡眠的精确度。根据您的系统，计时器可能仅精确到 10 毫秒左右。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-24T23:17:06.940

TimeUnit.anything.sleep() 调用 Thread.sleep() 和 Thread.sleep()**舍入**到毫秒，所有 sleep() 都不可用，精度低于毫秒

Thread.sleep(long millis, int nanos) 实现：

```
public static void sleep(long millis, int nanos) throws java.lang.InterruptedException
{
  ms = millis;
  if(ms<0) {
    // exception "timeout value is negative"
    return;
  }
  ns = nanos;
  if(ns>0) {
    if(ns>(int) 999999) {
      // exception "nanosecond timeout value out of range"
      return;
    }
  }
  else {
    // exception "nanosecond timeout value out of range"
    return;
  }
  if(ns<500000) {
    if(ns!=0) {
      if(ms==0) { // if zero ms and non-zero ns thread sleep 1ms
        ms++;
      }
    }
  }
  else {
    ms++;
  }
  sleep(ms);
  return;
} 
```

同样的情况是方法 wait(long, int);

# android - 从 adb shell 读取二进制标准输出数据？

> ID：13578416
> 
> 赞同：68
> 
> 时间：2012-11-27T06:16:52.733
> 
> 标签：android, adb

是否可以从 adb shell 命令读取二进制标准输出？例如，如何使用屏幕截图的所有示例都包括两个步骤：

```
adb shell screencap -p /sdcard/foo.png
adb pull /sdcard/foo.png 
```

但是，该服务支持写入标准输出。例如，您可以执行以下操作：

```
adb shell "screencap -p > /sdcard/foo2.png"
adb pull /sdcard/foo2.png 
```

这同样有效。但是，如何跨 ADB 读取输出呢？我想要做的是以下内容：

```
adb shell screencap -p > foo3.png 
```

并避免中间写入SD卡。这会生成一些*看起来*像 PNG 文件的`strings foo3.png`东西（运行会生成具有 IHDR、IEND 等的东西）并且大小大致相同，但就图像阅读器而言，该文件已损坏。

我也尝试在 java 中使用 ddmlib 来执行此操作，结果是相同的。我很乐意使用任何必要的库。我的目标是减少获得捕获的总时间。在我的设备上，使用双命令解决方案，获取图像大约需要 3 秒。使用 ddmlib 并捕获 stdout 花费不到 900 毫秒，但它不起作用！

是否有可能做到这一点？

编辑：这是两个文件的 hexdump。第一个，screen.png 来自标准输出并且已损坏。第二个， xscreen 来自双命令解决方案并且有效。图像应该在视觉上相同。

```
$ hexdump -C screen.png | head
00000000  89 50 4e 47 0d 0d 0a 1a  0d 0a 00 00 00 0d 49 48  |.PNG..........IH|
00000010  44 52 00 00 02 d0 00 00  05 00 08 06 00 00 00 6e  |DR.............n|
00000020  ce 65 3d 00 00 00 04 73  42 49 54 08 08 08 08 7c  |.e=....sBIT....||
00000030  08 64 88 00 00 20 00 49  44 41 54 78 9c ec bd 79  |.d... .IDATx...y|
00000040  9c 1d 55 9d f7 ff 3e 55  75 f7 de b7 74 77 d2 d9  |..U...>Uu...tw..|
00000050  bb b3 27 10 48 42 16 c0  20 01 86 5d 14 04 11 dc  |..'.HB.. ..]....|
00000060  78 44 9d c7 d1 d1 11 78  70 7e 23 33 8e 1b 38 33  |xD.....xp~#3..83|
00000070  ea 2c 8c 8e 0d 0a 08 a8  23 2a 0e 10 82 ac c1 40  |.,......#*.....@|
00000080  12 02 81 24 64 ef ec 5b  ef fb 5d 6b 3b bf 3f ea  |...$d..[..]k;.?.|
00000090  de db dd 49 27 e9 ee 74  77 3a e3 79 bf 5e 37 e7  |...I'..tw:.y.^7.|

$ hexdump -C xscreen.png | head
00000000  89 50 4e 47 0d 0a 1a 0a  00 00 00 0d 49 48 44 52  |.PNG........IHDR|
00000010  00 00 02 d0 00 00 05 00  08 06 00 00 00 6e ce 65  |.............n.e|
00000020  3d 00 00 00 04 73 42 49  54 08 08 08 08 7c 08 64  |=....sBIT....|.d|
00000030  88 00 00 20 00 49 44 41  54 78 9c ec 9d 77 98 1c  |... .IDATx...w..|
00000040  c5 99 ff 3f d5 dd 93 37  27 69 57 5a e5 55 4e 08  |...?...7'iWZ.UN.|
00000050  24 a1 00 58 18 04 26 08  8c 01 83 31 38 c0 19 9f  |$..X..&....18...|
00000060  ef 7c c6 3e 1f 70 f8 7e  67 ee 71 e2 b0 ef ce f6  |.|.>.p.~g.q.....|
00000070  f9 ec 73 04 1b 1c 31 60  23 84 30 22 88 a0 40 10  |..s...1`#.0"..@.|
00000080  08 65 69 95 d3 4a 9b c3  c4 4e f5 fb a3 67 66 77  |.ei..J...N...gfw|
00000090  a5 95 b4 bb da a4 73 7d  9e 67 55 f3 ed 50 5d dd  |......s}.gU..P].| 
```

乍一看，似乎添加了几个额外的 0x0d (13) 字节。回车？？这有什么铃声吗？它是否混合了一些空白行？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2015-07-14T08:22:48.183

与`adb shell`命令`adb exec-out`不使用`pty`which 破坏二进制输出不同。所以你可以做

```
adb exec-out screencap -p > test.png 
```

[https://android.googlesource.com/platform/system/core/+/5d9d434efadf1c535c7fea634d5306e18c68ef1f](https://android.googlesource.com/platform/system/core/+/5d9d434efadf1c535c7fea634d5306e18c68ef1f)

请注意，如果您将此技术用于在 STDERR 上产生输出的命令，则应将其重定向到`/dev/null`，否则`adb`将在其 STDOUT 中包含 STDERR 破坏您的输出。例如，如果您尝试备份和压缩目录：

```
adb exec-out "tar -zcf - /system 2>/dev/null" > system.tar.gz 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-01-16T07:30:57.347

很抱歉发布一个老问题的答案，但我自己也遇到了这个问题，只想通过 shell 来解决。这对我来说效果很好：

```
adb shell screencap -p | sed 's/^M$//' > screenshot.png 
```

这`^M`是我通过按 ctrl+v -> ctrl+m 得到的一个字符，只是注意到它在复制粘贴时不起作用。

```
adb shell screencap -p | sed 's/\r$//' > screenshot.png 
```

也为我做了伎俩。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-27T15:13:00.867

最好的解决方案是使用[@AjeetKhadke](https://stackoverflow.com/a/31401447/1778421)建议的`adb exec-out`命令。

`adb shell`让我说明一下和`adb exec-out`输出之间的区别：

```
~$ adb shell "echo -n '\x0a'" | xxd -g1
00000000: 0d 0a

~$ adb exec-out "echo -n '\x0a'" | xxd -g1
00000000: 0a 
```

它也适用于 Windows（我使用`hexdump`GNUWin32 [Hextools](https://gigenet.dl.sourceforge.net/project/gnuwin32/hextools/1.0/hextools-1.0-bin.zip)进行演示）：

```
C:\>adb shell "echo -n '\x0a'" | hexdump
00000000: 0D 0A

C:\>adb exec-out "echo -n '\x0a'" | hexdump
00000000: 0A 
```

缺点是为了能够从使用`adb exec-out`命令中受益，设备和主机 PC 都必须支持`adb shell`V2 协议。

处理 PC 端相当简单——只需将`platform-tools`包（包含`adb`二进制文件）更新到最新版本。设备上的`adbd`daemon 版本与 Android 版本相关联。`adb shell`V2 协议已在 Android 5.0 中引入，并进行了全面检修`adb`（从代码`c`到`C++`代码）。但是有一些回归（也就是错误），所以`adb exec-out`在 Android 5.x 中的用处仍然有限。最后，不支持 Android 4.x 和更早的设备。幸运的是，仍在用于开发的旧设备的份额正在迅速下降。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-11-27T22:00:10.073

如前所述，“adb shell”正在执行换行 (0x0a) 到回车 + 换行 (0x0d 0x0a) 的转换。这是由伪 tty 线路规程执行的。由于 shell 没有可用的“stty”命令，因此没有简单的方法来弄乱终端设置。

使用ddmlib*可以*做你想做的事。您需要编写在设备上执行命令、捕获输出并通过网络发送的代码。这或多或少是 DDMS 对某些功能所做的。这可能比它的价值更麻烦。

解决方案——将`repair()`所有 CRLF 转换为 LF——感觉不稳定，但实际上是可靠的，因为“损坏的”LF 到 CRLF 的转换是确定性的。我曾经做过同样的事情来修复无意的 ASCII 模式 FTP 传输。

值得注意的是，PNG 文件格式被明确设计为准确捕捉这个（和相关的）问题。幻数以 0x89 开头，用于捕获任何去除高位的内容，然后是“PNG”，以便您可以轻松分辨文件中的内容，然后是 CR LF，用于捕获各种 ASCII 行转换器，然后是 0x1a，用于捕获旧的 MS-DOS 程序使用 Ctrl-Z 作为一个特殊的文件结束标记，然后是一个单独的 LF。通过查看文件的前几个字节，您可以准确地知道对它做了什么。

...这意味着您的`repair()`函数可以接受“损坏”和“纯”输入，并可靠地确定它是否需要做任何事情。

**编辑：**一个附加说明：设备端二进制文件可以配置 tty 以避免转换，使用`cfmakeraw()`. 请参阅Android 5.0 中[screenrecord](https://android.googlesource.com/platform/frameworks/av/+/lollipop-release/cmds/screenrecord/screenrecord.cpp)`prepareRawOutput()`命令中的功能，该功能可以通过 ADB shell 连接从实时屏幕截图发送原始视频。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-11-27T21:24:00.270

在深入挖掘十六进制转储后，很明显每次发出字符 0x0A 时，shell 都会发出 0x0D 0x0A。我用以下代码修复了流，现在二进制数据是正确的。现在，当然，问题是为什么 adb shell 这样做？但无论如何，这可以解决问题。

```
static byte[] repair(byte[] encoded) {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    for (int i=0; i<encoded.length; i++) {
        if (encoded.length > i+1 && encoded[i] == 0x0d && encoded[i+1] == 0x0a) {
            baos.write(0x0a);
            i++;
        } else {
            baos.write(encoded[i]);
        }
    }
    try {
        baos.close();
    } catch (IOException ioe) {

    }

    return baos.toByteArray();      
} 
```

编辑：我明白为什么要这样做。它像老式 DOS 一样将 LF 转换为 CR/LF。我想知道是否有某个地方可以关闭它？

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-11-22T09:37:06.253

是的，在 Unix/Linux/Mac OS X 上，您可以通过添加“stty -onlcr;”来接收 adb shell 的二进制输出。到你的命令（ **不**~~需要是一个有根的android）。

1.**下载“stty”可执行文件。**
[http://www.busybox.net/downloads/binaries/latest/](http://www.busybox.net/downloads/binaries/latest/)
对于旧的android，使用busybox-armv5l，其他使用busybox-armv7l。
将文件重命名为“stty”

2.**上传文件“stty”到android并设置适当的权限。**

```
adb push somelocaldir/stty /data/local/tmp/   
adb shell chmod 777 /data/local/tmp/stty 
```

3.**前置“stty -onlcr;” 像这样听你的命令；**

```
adb shell /data/local/tmp/stty -onlcr\; screencap -p  > somelocaldir/output.png
or:
adb shell "/data/local/tmp/stty -onlcr; screencap -p"  > somelocaldir/output.png
or (Only for Windows):
adb shell /data/local/tmp/stty -onlcr; screencap -p  > somelocaldir/output.png 
```

完毕！

但是对于 Windows 操作系统，默认情况下，来自 android 的 LF 将被转换为 CR CR LF。
即使你做了上述步骤，你仍然会得到 CR LF。
这“似乎”是因为本地 adb.exe 使用 fwrite 导致 CR 被前置。
除了在 Windows 操作系统上手动将 CR LF 转换为 LF 之外，我对此没有任何办法。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-12-11T04:24:25.447

这是**适用于任何地方**的解决方案（包括 Linux 和 Windows）。

**您将需要`netcat`实用程序，通常命名为`nc`.**
如果两者都在您的设备`nc`上`busybox nc`失败，您需要新`busybox`的 . 您可以使用 Play Market 的busybox安装程序（需要root），也可以使用[osexp2003的解决方案（从](https://stackoverflow.com/a/20141481/3710080)[官方网站](http://www.busybox.net/downloads/binaries/latest/)下载busybox ，放入`/data/local/tmp/`设备并添加执行权限）。

**这个想法是`netcat`用作原始 HTTP 服务器。**
好吧，实际上甚至不是合适的服务器。它只会将其输入作为对*任何*TCP 连接的响应（无论是来自浏览器的 HTTP 请求、telnet 连接还是只是`netcat`）并终止。

**运行您想要从中获取输出的命令，如下所示：**

```
adb shell 'screencap -p | busybox nc -p 8080 -l >/dev/null' 
```

在上面的示例中，`screencap -p`截取屏幕截图（PNG 图像）并将其通过管道传输到`netcat`.
`-l`告诉`netcat`充当服务器（监听连接），并`-p 8080`告诉它使用 TCP 端口 8080。省略`>/dev/null`将简单地打印例如传入的 HTTP GET 请求到您的终端。
上面的示例将等待某人连接，发送屏幕截图，然后才终止。
当然，您可以在没有 的情况下运行它`adb shell`，例如从您设备上的终端仿真器中运行。

如上所述运行命令后，您可以通过在浏览器中打开或通过任何其他方式**从手机下载其输出****`http://ip.of.your.phone:8080`**，例如使用`netcat`：

```
busybox nc ip.of.your.phone:8080 >screenshot.png 
```

**如果要使用 USB 数据线下载**，则需要使用 ADB 转发连接，如下所示：

```
adb forward tcp:7080 tcp:8080 
```

之后，您可以使用`localhost:7080`而不是`ip.of.your.phone:8080`.
您可以使用以下命令删除此转发：

```
adb forward --remove tcp:7080 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-09-11T07:19:33.037

其他方式：

```
adb shell "busybox stty raw; screencap -p "> foo3.png 
```

但是，正如@osexp2003 所说，**这不适用于 Windows 操作系统。**

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-30T15:00:49.433

也可以为此使用 base64，因此只需使用以下代码对其进行编码：

```
base64 foo3.png>foo3.png.base64 
```

然后在windows上使用一些[base64实用程序](http://sourceforge.net/projects/gbm64/)或者notepad++来解密文件。

或者在 linux/cygwin 中：

```
base64 -d foo3.png.base64>foo3.png 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-11-15T07:13:56.867

如果可用，您也可以使用标准`dos2unix`命令。

（`apt-get install dos2unix`如果你在 Debian/Ubuntu 上。如果你用谷歌搜索，可能有适用于 Windows、OS X 等的构建版本）。

`dos2unix``repair()`以与 Eric Lange 的函数相同的方式将 CRLF 转换为 LF 。

```
adb shell screencap -p | dos2unix -f > screenshot.png 
```

或者，修复损坏的文件（就地）：

```
dos2unix -f screenshot.png 
```

您需要`-f`强制它处理二进制文件。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-10-24T08:16:56.153

试试这个家伙：

```
adb shell screencap -p | perl -pe 's/\x0D\x0A/\x0A/g' > screen.png 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-05-02T16:49:40.247

这是一个老问题，但可能这个解决方案对某人有用。

为了简单地从 adb 下载任何文件，您可以使用：

`adb run-as your.package.name base64 -w 0 /path/to/your/file.db`

然后在linux中读取和解码base64字符串（例如）：

`cat saved.base64.str|base64 -d`

当然，您可以在将源数据编码为 base64 之前对其进行压缩。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-01-15T06:20:09.137

我把使用python get image bytes using adb的方法放在这里，也许这对遇到这个问题的人会有帮助。代码如下：

```
 pipe = subprocess.Popen("adb shell screencap -p",
                      stdin=subprocess.PIPE,
                      stdout=subprocess.PIPE, shell=True)
 image_bytes = pipe.stdout.read().replace(b'\r\n', b'\n')
 gray_image = cv2.imdecode(np.fromstring(image_bytes, np.uint8), cv2.IMREAD_GRAYSCALE) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-04T17:32:34.930

我想为这些应用添加另一个解决方案，**防止 adb 截屏**。

您可以为此使用[scrcpy](https://github.com/Genymobile/scrcpy)。它适用于 Linux 和 Windows！赶紧跑：

```
scrcpy 
```

将打开一个带有您设备屏幕的窗口。您现在可以使用**本地截图工具**（例如 windows 上的截图工具和 linux 上的截图）来截取当前屏幕的截图！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-15T18:30:59.477

`adb exec-out`正如[Ajeet47](https://stackoverflow.com/users/884052)和[Alex P.](https://stackoverflow.com/users/1778421) [指出的](https://stackoverflow.com/a/31401447) [那样](https://stackoverflow.com/a/13587203)，一般要走的路是使用。

但是，如果中间有任何东西会创建一个伪 tty，事情就会变得一团糟。

我想知道为什么即使我使用的是 .tar 文件，我的 tar 文件也会损坏`adb exec-out`。在我的情况下，问题是使用`su`二进制文件生成`tar`进程。`su`似乎产生了一个伪 tty，你不能把它关掉，给你两全其美。

例子：

```
% adb exec-out 'su -c '"'"'printf "\n"'"'" | xxd
00000000: 0d0a                                     .. 
```

在这种情况下，您仍然需要通过以下方式告诉外壳程序不要使用额外的回车符来破坏换行符`stty raw`：

```
% adb exec-out 'su -c '"'"'stty raw; printf "\n"'"'" | xxd                                                                  
00000000: 0a                                       . 
```

但是，正如其他人指出的那样，这可能很脆弱，尤其是对于二进制数据。在配对时接收输出时我`tar`还没有看到任何问题，但肯定可能存在问题。`adb``exec-out``stty raw`

因此，如果您真的想要逐位相等，**请检查**生成的数据是否与您希望捕捉到的令人惊讶的情况相匹配。这不会修复它们，但至少会提醒您注意它们。

一种方法是在写出原始数据时对原始数据进行校验和，并对主机上接收到的数据进行校验和。使用与 POSIX 兼容的系统和 shell 执行此操作的一种相当复杂但必要的方法如下：

```
% adb exec-out 'su -c '"'"'stty raw && printf "\n" 2>/data/local/tmp/printf.stderr | { tee /dev/fd/3 | sha512sum -b - > /data/local/tmp/printf.sha512sum; } 3>&1'"'" | sha512sum -b - 
be688838ca8686e5c90689bf2ab585cef1137c999b48c70b92f67a5c34dc15697b5d11c982ed6d71be1e1e7f7b4e0733884aa97c3f7a339a8ed03577cf74be09 *-
% adb exec-out 'cat /data/local/tmp/printf.sha512sum'
be688838ca8686e5c90689bf2ab585cef1137c999b48c70b92f67a5c34dc15697b5d11c982ed6d71be1e1e7f7b4e0733884aa97c3f7a339a8ed03577cf74be09 
```

**不要**试图使用`bash`'s 的命令行替换功能（例如`cmd | tee >(sha512sum -b - > ...)`），因为这会遗憾地删除尾随换行符并因此修改原始数据。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2017-07-08T14:17:52.487

此命令在**Windows 操作系统**上对我有用：

```
adb exec-out screencap -p > test.png && dos2unix.exe -f test.png 
```

但你想用这个： [https ://sourceforge.net/projects/dos2unix/](https://sourceforge.net/projects/dos2unix/)

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2017-07-20T18:51:16.863

`nc`是它对我有用的唯一方法。用过的：

```
adb forward tcp:7080 tcp:8080 &&\    
adb shell 'tar -zcvf - /data/media | nc -p 8080 -l 1>/dev/null' &\    
sleep 1;\    
nc localhost 7080 > media.tar.gz &&\    
adb forward --remove tcp:7080 
```

以 root 身份为 /data/media 创建一个有希望的正确备份

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2017-12-27T08:31:28.340

这是在 OS 中使用 Shell 的最佳方式

**`adb shell screencap -p | perl -pe 's/\x0D\x0A/\x0A/g' > screen.png`**

# php - php 中的 json_decode 处理一些特殊字符

> ID：13578418
> 
> 赞同：1
> 
> 时间：2012-11-27T06:16:55.217
> 
> 标签：php, json

这是php代码：

```
$str='{"key":"'.chr(1).'"}';
$json=json_decode($str); 
```

json_decode 返回空值。那么我应该如何处理 $str 以便解码。（PS $str 这里只是一个例子，它可能包括 chr(2)、chr(10) 等等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:21:42.550

[只有 U+0020-U+0021、U+0023-U+005B、U+005D-U+10FFFF 范围内的字符可能在字符串中未转义。](https://www.rfc-editor.org/rfc/rfc4627#section-2.5)任何其他字符都必须使用 Unicode 转义序列进行转义。在你的情况下使用`\u0001`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:36:22.030

正如 Gumbo 指出的那样，您没有生成有效的 JSON。如果你必须这样做（不确定为什么，你的例子是基本的无操作），那么使用`json_encode()`：

```
$str = '{"key":'.json_encode(chr(1).chr(2)).'}';
$json = json_decode($str); 
```

这将创建有效的 JSON：

```
{"key":"\u0001\u0002"} 
```

并将正确解码。

# jquery - 如何从 li 中删除 li 元素

> ID：13578419
> 
> 赞同：0
> 
> 时间：2012-11-27T06:16:55.497
> 
> 标签：jquery, html

我有很多这样的..

我想要的是当点击 li 时我不想触发所有 li 下的“.actiontools”类的点击事件

```
<li>
 <div class="bordered collapse-tree">
    <div class="actionTools">
        <div class="navItemcustom">
            <a href="#" class="actionToolsDropDown"><span class="">
                Actions</span></a>
            <div class="dropscustom">
                <a >Add</a>
                <a >edit</a>
            </div>
        </div>
    </div>
    <div class="title">
        test

    </div>
</div>

<ol>

    <li id="menuid">
        <div class="bordered  ">
            <div class="actionTools">
                <div class="navItemcustom">
                    <a href="#" class="actionToolsDropDown"><span class="">
                        Actions</span></a>
                    <div class="dropscustom">
                        <a >Add</a>
                        <a >edit</a>
                    </div>
                </div>
            </div>
            <div class="title">
                new

            </div>
        </div>

    </li>
</ol>
</li>

<script type="text/javascript">
(function (cash) {
    $.fn.collapsibleList = function () {
        this.find("li").each(function (i, li) {

        });

        return this;
    }
})(jQuery);
$(".collapsibleList").collapsibleList();

</script> 
```

这是小提琴：http: [//jsfiddle.net/napper7/BTcwr/](http://jsfiddle.net/napper7/BTcwr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:25:15.797

```
$("li").click(function(event)}{
    event.preventDefault();
    //do your stufff

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:35:39.573

试试这个：

```
$("li").find(".actionTools").click(function() {
    return false;
});​ 
```

# c# - 单击下一页后，在上一页上取消选中复选框

> ID：13578420
> 
> 赞同：2
> 
> 时间：2012-11-27T06:17:07.363
> 
> 标签：c#, asp.net, c#-4.0, gridview

当我检查页面 (1) 上的 [复选框] 数据，然后通过分页 ([1234] 等页面的底部按钮) 进入下一页 (2)，然后检查页面 (2) 上的数据。

当我回到第 (1) 页时，它保持未选中状态，因为我没有检查任何内容！！！

所有的东西都保持在原来的位置。在两个页面上都未选中。当从第 1 页到第 2 页时（第 1 页的复选框忘记了他的值并被取消选中），当从第 2 页到第 1 页时，同样的事情会发生。抱歉我的英语不好。有什么建议吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:37:25.120

如果它是 gridview 或任何中继器控件，请尝试此操作

网格视图 HTML

```
<asp:GridView ID="GridView1" runat="server" 
AutoGenerateColumns="False" AllowPaging="True"  
PageSize="5" Width="324px" DataKeyNames="CategoryID" 
OnPageIndexChanging="GridView1_PageIndexChanging">
<Columns>
<asp:BoundField DataField="CategoryID" HeaderText="CategoryID" />
<asp:BoundField DataField="CategoryName" HeaderText="CategoryName" />
<asp:TemplateField HeaderText="Select">
<ItemTemplate>
<asp:CheckBox ID="CheckBox1" runat="server" />
</ItemTemplate>
</asp:TemplateField>
</Columns>
</asp:GridView> 
```

CS 代码

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
  RememberOldValues();
  GridView1.PageIndex = e.NewPageIndex;
  BindData();
  RePopulateValues();
} 
```

和

```
private void RememberOldValues()
{
  ArrayList categoryIDList = new ArrayList();
  int index = -1;
  foreach (GridViewRow row in GridView1.Rows)
  {
   index = (int) GridView1.DataKeys[row.RowIndex].Value;
   bool result = ((CheckBox)row.FindControl("CheckBox1")).Checked;

  // Check in the Session
  if (Session[CHECKED_ITEMS] != null)
   categoryIDList = (ArrayList)Session[CHECKED_ITEMS];
  if (result)
  {
  if (!categoryIDList.Contains(index))
   categoryIDList.Add(index);
  }
  else
   categoryIDList.Remove(index);
  }
  if (categoryIDList != null && categoryIDList.Count > 0)
   Session[CHECKED_ITEMS] = categoryIDList;
} 
```

和

```
private void RePopulateValues()
{
  ArrayList categoryIDList = (ArrayList)Session[CHECKED_ITEMS];
  if (categoryIDList != null && categoryIDList.Count > 0)
  {
  foreach (GridViewRow row in GridView1.Rows)
  {
   int index = (int)GridView1.DataKeys[row.RowIndex].Value;
  if (categoryIDList.Contains(index))
  {
   CheckBox myCheckBox = (CheckBox) row.FindControl("CheckBox1");
   myCheckBox.Checked = true;
  }
  }
  }
} 
```

绑定数据代码

**编辑**

```
/* QUERY */
private const string QUERY_SELECT_ALL_CATEGORIES = "SELECT * FROM Categories";

private void BindData()
{
  SqlConnection myConnection = new SqlConnection(ConnectionString);
  SqlDataAdapter ad = new SqlDataAdapter(QUERY_SELECT_ALL_CATEGORIES,
  myConnection);
  DataSet ds = new DataSet();
  ad.Fill(ds, "Categories");
  GridView1.DataSource = ds;
  GridView1.DataBind();
} 
```

有关更多详细信息，请查看此[Maintaining_State_of_CheckBoxes](http://aspalliance.com/774_Maintaining_State_of_CheckBoxes_While_Paging_in_a_GridView_Control.all)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:22:41.273

当您从一个页面导航到另一个页面时，您的页面会刷新，因此它不能保留复选框的值，如果您想这样做，您必须从后面的代码中执行此操作，根据您的有效代码在 !IsPostback 中编写代码 Checkbox.Checked=True条件。

# c++ - C++ Windows 最小化未注册

> ID：13578424
> 
> 赞同：0
> 
> 时间：2012-11-27T06:17:20.517
> 
> 标签：c++, windows

我已将最小化和恢复案例添加到我的平均处理中，但我发现它们从未被击中。

只有在程序启动时**Size_Minimized 才会**受到影响。之后，最小化大小写永远不会发生。**Size_Restore**
的情况也永远不会发生。

 ****仅在程序启动时在 Size_Minimize 处停止调试：**
![图片](../Images/8103b637983962a80db41d2050a834b3.png)

我的其他案例有效，所以我不知道为什么最小化和恢复不会触发我的代码或断点。
我得出的结论是**Size_Minimized** & **Size_Restore**与我需要的无关。

*我需要知道什么来处理最小化/恢复？*

代码，以防我做错了：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam){
    PAINTSTRUCT ps;
    HDC hdc;

    switch(message){
    case WM_PAINT:
        hdc = BeginPaint(hWnd, &ps);
        EndPaint(hWnd, &ps);
        break;

    case SIZE_MINIMIZED:
        break;

    case SIZE_RESTORED:
        break;

    case WM_SIZING:
    case WM_SIZE:
        if(engine.isReady()) engine.resizeDevice();
        if(engine.isReady()) engine.draw();
        break;

    case WM_DESTROY:
        PostQuitMessage(0);
        break;

    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:23:33.797

`SIZE_MINIMIZED`并且`SIZE_RESTORED`是通过消息传递给您的常量`WM_SIZE`；它们不是窗口消息。每当您的窗口收到与`SIZE_MINIMIZED`和/或具有相同 id 的窗口消息时，您的断点就会被命中`SIZE_RESTORED`。

你需要让你的代码看起来像这样：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam){
    PAINTSTRUCT ps;
    HDC hdc;
    switch(message){
    case WM_PAINT:
        hdc = BeginPaint(hWnd, &ps);
        EndPaint(hWnd, &ps);
        break;

    case WM_SIZE:
        switch(wParam) {
        case SIZE_MINIMIZED:
          // Do whatever
          break;
        case SIZE_RESTORED:
          // Do whatever
          break;
        }
    case WM_SIZING:
        if(engine.isReady()) engine.resizeDevice();
        if(engine.isReady()) engine.draw();
        break;

    case WM_DESTROY:
        PostQuitMessage(0);
        break;

    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }

    return 0;
} 
```**

# google-chrome - 从服务器收到重复的标头

> ID：13578428
> 
> 赞同：128
> 
> 时间：2012-11-27T06:17:28.550
> 
> 标签：google-chrome, pdf, http-headers

> 从服务器收到重复的标头
> 
> 来自服务器的响应包含重复的标头。此问题通常是由于网站或代理配置错误造成的。只有网站或代理管理员可以解决此问题。
> 
> 错误 349 (net::ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION)：收到多个不同的 Content-Disposition 标头。不允许这样做以防止 HTTP 响应拆分攻击。

我在 chrome 中导出为 pdf 时发现了这个错误。

```
Response.Buffer = false;
Response.ClearHeaders();
string ext = objProp.PACKAGEFILENAME.Substring(objProp.PACKAGEFILENAME.LastIndexOf("."));
string ext1 = ext.Substring(1);
Response.ContentType = ext1;
Response.AddHeader("Content-Disposition", "target;_blank,attachment; filename=" + objProp.PACKAGEFILENAME);
const int ChunkSize = 1024;
byte[] binary = objProp.PACKAGEDOCUMENT;
System.IO.MemoryStream ms = new System.IO.MemoryStream(binary);
int SizeToWrite = ChunkSize;

for (int i = 0; i < binary.GetUpperBound(0) - 1; i = i + ChunkSize)
{
    if (!Response.IsClientConnected) return;
    if (i + ChunkSize >= binary.Length) SizeToWrite = binary.Length - i;
    byte[] chunk = new byte[SizeToWrite];
    ms.Read(chunk, 0, SizeToWrite);
    Response.BinaryWrite(chunk);
    Response.Flush();
}
Response.Close(); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2013-02-12T16:10:57.840

这有点旧，但在谷歌排名中很高，所以我想我会抛出我从[Chrome、pdf 显示、从服务器收到的重复标题中找到的答案](https://stackoverflow.com/questions/8588818/chrome-pdf-display-duplicate-headers-received-from-the-server-fixed)

基本上我的问题也是文件名包含逗号。用逗号替换以删除它们，你应该没问题。我制作有效文件名的功能如下。

```
 public static string MakeValidFileName(string name)
    {
        string invalidChars = Regex.Escape(new string(System.IO.Path.GetInvalidFileNameChars()));
        string invalidReStr = string.Format(@"[{0}]+", invalidChars);
        string replace = Regex.Replace(name, invalidReStr, "_").Replace(";", "").Replace(",", "");
        return replace;
    } 
```

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2014-09-15T08:46:26.050

正如@cusman 和@Touko 在他们的回复中提到的，服务器**应该**在文件名两边加上双引号。

例如：

```
Response.AddHeader("Content-Disposition", "attachment;filename=\"" + filename + "\""); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-29T22:54:27.107

只需在您的文件名周围加上一对双引号，如下所示：

this.Response.AddHeader("Content-disposition", $"attachment; filename=\"{outputFileName}\"");

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-28T18:34:50.580

对我来说，问题是关于不在文件名中的逗号，但如下所示： -

Response.ok(streamingOutput,MediaType.APPLICATION_OCTET_STREAM_TYPE).header("content-disposition", " **attachment, filename** =your_file_name").build();

附件后面不小心加了逗号。通过用分号替换逗号来解决它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-13T11:38:06.630

标题中文件名周围的双引号是每个[MDN Web 文档的标准。](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition) 省略引号会为文件名中的字符引起的问题创造多种机会。

# java - OnClickListener = 向下 + 向上？安卓

> ID：13578432
> 
> 赞同：0
> 
> 时间：2012-11-27T06:17:54.983
> 
> 标签：java, android, onclicklistener

OnClickListener 是按钮按下 + 按钮松开。无论如何只要按下按钮就可以让它消失吗？

我仍然不喜欢阅读[文档](http://developer.android.com/reference/android/view/View.OnClickListener.html)。没有提到任何关于这个，我不知道如何去寻找可以帮助的东西。

[OnLongClickListener](http://developer.android.com/reference/android/view/View.OnLongClickListener.html)说`Called when a view has been clicked and held.`

## **由于我的问题得到了相当快的回答，有谁知道为什么当我将 onClick 更改为 onTouch 时会出现此错误？**

```
The method setOnTouchListener(View.OnTouchListener) in the type View is not applicable for the arguments (new OnTouchListener(){}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:21:11.893

为此，您需要使用[onTouchListener](https://developer.android.com/reference/android/view/View.OnTouchListener.html)。

**更新：**

请参阅本教程以了解如何使用它：

[http://www.mybringback.com/tutorial-series/3279/android-the-basics-32-androids-ontouchlistener-and-motionevent/](http://www.mybringback.com/tutorial-series/3279/android-the-basics-32-androids-ontouchlistener-and-motionevent/)

# ios - 如何将纬度值传递给iphone中的下一个视图？

> ID：13578436
> 
> 赞同：0
> 
> 时间：2012-11-27T06:18:06.850
> 
> 标签：ios, uitableview, navigation

我得到了服务的响应，我得到了纬度值，我复制到了一个数组中。现在我想在单击下一个视图行时传递数组。

我早些时候通过了一些地方。在第二个视图`UITableViewController`中，如果我单击特定行，那么它应该打印行文本值和特定文本的纬度值.....？这可能吗...

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    NSString *myText=[places objectAtIndex:indexPath.row];
    NSLog(@"his is selected lattidude value:%@",myText);} 
```

在这里，我正在打印行的文本，我需要打印每个的纬度值....请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T06:25:30.117

有很多方法可以将数据从一个视图传递到另一个视图。

最适合你的是：

只需在您的第二个视图控制器中创建一个变量。

当您在将值分配给该变量之前从当前页面推送导航时。

现在您可以轻松地在第二个视图中使用该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:33:46.763

在你`SecondViewController`的 .h 文件中

```
@interface SecondViewController : UIViewController{
     NSString *strLatLong;
}

@property (nonatomic, retain) NSString *strLatLong;

@end 
```

并在 .m 文件中像下面这样合成它..

```
@synthesize *strLatLong 
```

在你的`FirstViewController`课堂上只需使用下面的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    NSString *myText=[places objectAtIndex:indexPath.row];
    NSLog(@"his is selected lattidude value:%@",myText);
    SecondViewController *objSecondView = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];
    objSecondView.strLatLong = myText;
    [objSecondView.strLatLong retain];
    [self.navigationController pushViewController:objSecondView animated:YES];
    [objSecondView release];

} 
```

我希望这可以帮助你...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T06:33:58.590

`@property`在第二个 viewcontroller 类`.h`文件中创建

```
 @property (nonatomic ) NSString *StrName; 
```

`@synthesize`在第二个视图控制器类`.m`文件中

```
@synthesize StrName; 
```

之后在您当前的视图控制器类中

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    //NSString *myText=[places objectAtIndex:indexPath.row];

 secondviewcontroller *ss=[[secondviewcontroller alloc]initWithNibName:@"secondviewcontroller" bundle:nil];

ss.StrName=[places objectAtIndex:indexPath.row];

        [self presentModalViewController:ss animated:YES];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T06:34:12.620

您必须在第二类中创建一个变量并定义他的属性，在第一类中您使用此属性将一个值发送到下一个类您像这样 sed 值

```
in first class you create a variable with property like this 
```

@property(nonatomic ,strong) NSString *str;

在第一类中，当您创建第二类的对象时，您会像这样发送值

```
SecondClass *secondClass=[[SecondClass alloc]init];
secondClass.str=@"value is here"; 
```

在这种方法中，您将价值发送到下一堂我希望您理解 ;-)

# asp.net - 从 runat 服务器 asp.net 内部添加

> ID：13578440
> 
> 赞同：0
> 
> 时间：2012-11-27T06:18:21.327
> 
> 标签：asp.net, paypal, multiple-forms

我在页面上方有一个注册页面，有一个运行在服务器上的表单标签。我想添加一个由贝宝支付的代码。该代码包含一个简单的 html 控件而不是 asp.net 控件，但是当我将代码粘贴到页面时，它不会将其提交给它回发表单的操作，并且根本不使用 paypal 代码。当我检查代码的来源时，它没有显示贝宝给出的来自标签。它不会对贝宝给出的表格进行排序。我还必须采用顶部的表格，因为我的页面有 asp.net 控件，这就是为什么这是必要的。

请告诉解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:33:56.723

我假设您使用的是 PayPal Standard。

如果是这样，请从（常规 ASP.Net）表单中收集提交的值。然后像这样将它们转发到PayPal -

```
protected void SubmitRadButton_Click(object sender, EventArgs e)
{
    string paypalUrl = IsTestMode ? 
        "https://www.sandbox.paypal.com/us/cgi-bin/webscr" : 
        "https://www.paypal.com/us/cgi-bin/webscr";

    var builder = new StringBuilder();

    builder.Append(paypalUrl);
    builder.AppendFormat("?cmd=_xclick&business={0}", EmailTextBox.Text);
    builder.Append("&lc=US&no_note=0&currency_code=USD");
    builder.AppendFormat("&item_name={0}", ItemNameHiddenField.Value);

    builder.AppendFormat("&amount={0}", AmountTextBox.Text);
    builder.AppendFormat("&return={0}", ReturnUrl);
    builder.AppendFormat("&cancel_return={0}", CancelUrl);

    builder.AppendFormat("&undefined_quantity={0}", 1);
    builder.AppendFormat("&item_number={0}", ItemNumberHiddenField.Value);

    builder.AppendFormat("&cpp_header_image={0}", HeaderImage);

    HttpContext.Current.Response.Redirect(builder.ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:14:58.943

付款处理时，您不得在 asp.net 中使用 asp.net 表单标签。

用这个

```
<body onload="document.paypal.submit();">
  <form name="paypal" action='<%= ConfigurationManager.AppSettings["PayPalSubmitUrl"] %>'
method="post">

      // rest html goes here

  </form>
</body> 
```

我总是这样处理贝宝

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T17:26:38.247

我尝试了同样的方法，但没有奏效。请查看他们提供的我的贝宝代码，并让我知道如何执行此操作。我以前尝试过上述方法，但这次不能使用代码。可能是订阅代码不同。阅读下面的代码，让我知道如何使用它。

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
                            <input type="hidden" name="cmd" value="_s-xclick" />
                            <input type="hidden" name="hosted_button_id" value="LL5LZEB8L6T8S" />
                            <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_subscribeCC_LG.gif"
                                name="submit" alt="PayPal - The safer, easier way to pay online!" />
                            <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif"
                                width="1" height="1" />
                            </form> 
```

谢谢

# c++ - 重载加法运算符

> ID：13578441
> 
> 赞同：1
> 
> 时间：2012-11-27T06:18:27.613
> 
> 标签：c++

我有一个链接列表，表示为

```
struct term{
    double coef;
    unsigned deg;
    struct term * next;
    }; 
```

然后我有一个多项式类

```
class Polynomial{
public:
    Polynomial & operator+ (const Polynomial & ) const;
private:
    term *ptr 
```

我正在尝试做一个加法重载运算符，但我尝试的只是给了我中间多项式的一些随机部分。

```
Polynomial & Polynomial::operator+(const Polynomial & poly) const{
    Polynomial p2 = *this;
    term * temp = (*this).ptr;
    while(temp->next != NULL){
        temp = temp->next;
    }
    temp->next = poly.ptr;
    return p2;
} 
```

而且当我有 2 个多项式时，一个是另一个多项式的副本，然后又添加了一个项，然后当我尝试使用加法运算符时，第一个多项式更大，就像第二个多项式被添加到它一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:59:57.550

您的 operator+() 严重受损。考虑“期限”所有权的概念。每个多项式都有一个项的链接列表。它*拥有*这个列表（至少更好）。现在考虑一下对您的**简要**分析`operator +()`：

```
Polynomial Polynomial::operator+(const Polynomial & poly) const 
{
    // hopefully creates a deep copy of *this
    Polynomial p2 = *this;

    // walk *our* terms (not the copy in p2??) to find the end.
    term * temp = (*this).ptr;
    while(temp->next != NULL)
        temp = temp->next;

    // once we find the end, we then *LINK* the params term-list
    //  which *they* are **supposed** to own, to our list. (and 
    //  p2 is still out there with a copy of our original content).
    temp->next = poly.ptr;

    // now we return p2, still holding a copy of our former self,
    // and we now have a cross-linked term list between us and the 
    // parameter poly
    return p2;
} 
```

我真诚地希望这有什么问题是显而易见的。为了使它正常工作，您的操作员应该返回一个 by-val，（它就是，万岁！），并正确地制造那个东西：

*   制作*this（你有那个）的副本（让我们称之为`p2`）
*   **查找所拥有**的术语列表的末尾**`p2`**
*   `rhs`复制 的参数中的所有术语`operator +(const Polynomial* rhs)`，将副本一一链接到`p2`的术语列表的尾部。注意：尾部将随着每个链接的新术语移动。
*   按 val 返回 p2。如果您的复制器和析构器正在完成他们的工作，那么一切都应该很好。完成后，*this 和`rhs`都应该保持不变。

这就是我能提供的程度。祝你好运。

PS：对于extra-credit-bonus-round，在插入时对列表中的术语进行排序。这将使您更接近相似度合并，这将成为`operator +=()`您的`operator +()`. 后者从字面上退化为`Polynomial p2 = *this; p2 += poly; return p2;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:23:17.450

您正在通过引用返回一个临时值，这是未定义的行为。`Polynomial`而是返回一个。IE

```
Polynomial & operator+ (const Polynomial & ) const; 
```

应该

```
Polynomial operator+ (const Polynomial & ) const; 
```

您还缺少[复制构造函数和复制赋值运算符](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

# javascript - dojotype 改变按钮的id

> ID：13578445
> 
> 赞同：0
> 
> 时间：2012-11-27T06:18:47.287
> 
> 标签：javascript, jquery, html, dojo

我有一个使用`dojotype`属性的 html 按钮：

```
<button id="btnSearchEmployees" dojotype="dijit.form.Button">
                        Search
                    </button> 
```

并尝试使用 jQuery 处理此按钮上的单击事件：

```
$("#btnSearchEmployees").click(function() {
    alert("test");
}); 
```

但它不起作用，如果我取出`dojotype`属性，它可以正常工作：

```
 <button id="btnSearchEmployees"> Search </button> 
```

我怎样才能避免这种情况？

**编辑：**这是道场的变化：

```
<span class="dijit dijitReset dijitInline dijitButton" role="presentation" style="width: 70px;" widgetid="btnSearchEmployee">
    <span class="dijitReset dijitInline dijitButtonNode" data-dojo-attach-event="ondijitclick:_onClick" role="presentation">
        <span class="dijitReset dijitStretch dijitButtonContents" data-dojo-attach-point="titleNode,focusNode" role="button" aria-labelledby="btnSearchEmployee_label" tabindex="0" id="btnSearchEmployee">
            <span class="dijitReset dijitInline dijitIcon dijitNoIcon" data-dojo-attach-point="iconNode"></span><span class="dijitReset dijitToggleButtonIconChar">?</span>
            <span class="dijitReset dijitInline dijitButtonText" id="btnSearchEmployee_label" data-dojo-attach-point="containerNode">Search</span>
        </span>
    </span>
    <input type="button" value="" class="dijitOffScreen" tabindex="-1" role="presentation" data-dojo-attach-point="valueNode">
</span> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T12:01:36.820

你应该使用

```
dojo.connect(dijit.byId("btnSearchEmployees"), "onClick", function(){
    alert("test");
}); 
```

这是因为一旦你使用了 dojoType（或 data-dojo-type）。[dojo 解析器](https://dojotoolkit.org/reference-guide/1.8/dojo/parser.html)会将原始 dom 替换为您的 dijit 声明的模板。结果可能与您的标记所写的内容完全不同（如您所见）。它为最外层的 dom 生成一个新的 id。所以你实际点击的不是原来的 Button 元素。然后您必须将其用作“dojo 小部件”，它只能通过**dijit.byId**检索。

如果您已经在使用 dojo 框架，那么它具有您需要的大部分功能。您也不必使用 JQuery。

# vb.net - 自动化 MS 项目

> ID：13578447
> 
> 赞同：1
> 
> 时间：2012-11-27T06:19:00.813
> 
> 标签：vb.net, vb.net-2010, ms-project, ms-project-server-2010

有没有办法让我们在 ms 项目 2010 中自动输入。以下是场景：

1.  我们有一个 vb.net 应用程序，用于输入任务名称、小时数、估计和完成日期时间。
2.  有没有办法可以在 ms 项目 2010 中上传这些日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:59:13.953

有一种方法。如果您使用桌面版的 MS Project（Pro 或 Standard），那么您唯一的选择就是使用 OLE 自动化。

通过 OLE 自动化，您将获得对 Application 类实例的引用，该类是每个 MS Office 应用程序中的关键类。从应用程序中，您可以使用`Application.Projects`集合获取当前打开的项目列表，甚至可以使用`Application.ActiveProject`.

一旦您引用了一个项目，您就可以使用`Project.Tasks`集合访问项目中的所有任务。（所有集合的索引从 1 开始）

大多数任务字段（如名称或开始日期）都可以通过任务的属性获得：`Task.Name = "something"`或`Task.StartDate = "1/1/2001"`

无论如何，这里有一个链接：[msdn.microsoft.com](http://msdn.microsoft.com/en-us/library/office/ff863668%28v=office.14%29.aspx)

另一个故事是，如果您拥有 Project Server，并且想要更快地完成所有事情。在这种情况下，您应该使用 PSI（Project Server 接口） - Web 服务集合，可让您访问大部分 Project Server 功能。

MSDN 有很棒的文章，其中包含如何使用 PSI 处理项目的示例，这里有一个链接：[关于 PSI 的 MSDN](http://msdn.microsoft.com/en-us/library/office/websvcproject.project_di_pj14mref_methods%28v=office.14%29.aspx)。您可以搜索该链接以查找有关通过 PSI 提供的其他服务的更多文章。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-28T21:25:56.860

如果您能够按照评论中所述将数据放入 Excel，那么编写一个读取 Excel 数据并使用工作簿中的数据更新项目任务的 VBA 程序将相当简单。

# java - Linux，top 命令，为什么“数据”值和 jvm -xmx 参数不相等？

> ID：13578451
> 
> 赞同：0
> 
> 时间：2012-11-27T06:19:09.907
> 
> 标签：java, linux, tomcat, ubuntu

在我的 tomcat server.xml 中，我设置`JAVA_OPTS -Xmx3072m;`

top 命令，为什么显示“DATA”列的值为3.8G？

![在此处输入图像描述](../Images/50adbb536fd911eae8e2c6a27aede9ef.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T06:32:28.077

该`-Xmx`开关纯粹是针对 JVM 的可回收堆（例如 eden、tenured 区域等）。它不包括`PermGen`本地资源使用的空间。top 返回的 DATA 值显示了进程使用的全部内存量。

# php - 起点和终点列表的基本非加权寻路

> ID：13578454
> 
> 赞同：0
> 
> 时间：2012-11-27T06:19:25.680
> 
> 标签：php, mysql

我正在制作一个旅游项目，但我遇到了一个问题。我创建了一个数据库：

```
ID  Source   Destination

1     C1         C2
2     C3         c4
3     C3         C5
4     C4         C6
5     C8         C9
6     C2         C3 
```

当我从 C1->C6 进行游览时，它应该遵循路径 c1->c2->c3->c4->c6。但是当通过查询检索时，我在到达 c3 时遇到了冲突：还有另一个 C3->c5。

我该如何克服这个问题？

首先，我通过签入 mysql 将 c1 作为源，从该目的地获取目的地作为源检查相关目的地

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:06:46.537

尝试：

```
CREATE TABLE test (
  ID INTEGER NOT NULL,
  SOURCE CHAR(2) NOT NULL,
  DESTINATION CHAR(2) NOT NULL
);

INSERT INTO test VALUES (1, 'C1', 'C2');
INSERT INTO test VALUES (2, 'C3', 'C4');
INSERT INTO test VALUES (3, 'C3', 'C5');
INSERT INTO test VALUES (4, 'C4', 'C6');
INSERT INTO test VALUES (5, 'C8', 'C9');
INSERT INTO test VALUES (6, 'C2', 'C3'); 
```

然后：

```
SELECT
  CONCAT_WS(
    '->',
    A.SOURCE,
    A.DESTINATION,
    B.DESTINATION,
    C.DESTINATION,
    D.DESTINATION
  )
FROM test A
LEFT JOIN test B ON B.SOURCE = A.DESTINATION
LEFT JOIN test C ON C.SOURCE = B.DESTINATION
LEFT JOIN test D ON D.SOURCE = C.DESTINATION
WHERE
  A.SOURCE = 'C1'
  AND 'C6' IN (A.DESTINATION, B.DESTINATION, C.DESTINATION, D.DESTINATION); 
```

这使：

```
C1->C2->C3->C4->C6 
```

请记住，此示例仅给出最大深度为 4 的路径，但您可以轻松扩展它。此外，您将获得所有可能的路径（如果有多个）。所以你需要决定你选择哪一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:07:20.713

1）您可以通过将数据存储到树中来解决，并使用算法到达目的地：

![在此处输入图像描述](../Images/cb3160ad5f8d1198673f9cb6565c2528.png)

2）使用数组和递归的简单解决方案：

这里复杂的部分只是带来“提到的源和目标所需的数据”，即离开 c8->c9

我havnt工作做带来foll数据。但是，你可以继续： $destination['c1'] = 'c2'; $目的地['c3'][] = 'c4'; $destination['c4'] = 'c6'; $destination['c2'] = 'c3';

```
$route = array();
$int = 0;

function route_to($route,$source_statn, $dest_statn) {
    global $int, $destination,$path;

    if ($source_statn != '' && $dest_statn != '') {
        if ($destination[$source_statn] == $dest_statn) {
            $route[++$int] = "$source_statn -> {$destination[$source_statn]}";

            $path = $route;
            return $path;
        } else {
            if (is_array($destination[$source_statn])) {
                foreach ($destination[$source_statn] as $each) {
                    $route[++$int] = "$source_statn -> $each";
                    route_to($route,$each, $dest_statn);
                }
            } else {
                if($destination[$source_statn] != ''){
                    $route[++$int] = "$source_statn -> {$destination[$source_statn]}";
                }
                route_to($route,$destination[$source_statn], $dest_statn);
            }
        }
    }
}

route_to($route,'c1','c6');

echo '<pre>path';
print_r($path);
echo '</pre>'; 
```

---------o/p------------

```
Array
(
    [1] => c1 -> c2
    [2] => c2 -> c3
    [3] => c3 -> c4
    [4] => c4 -> c6
) 
```

# php - 在 php 中查询 $ 或 mongodb

> ID：13578455
> 
> 赞同：1
> 
> 时间：2012-11-27T06:19:26.710
> 
> 标签：php, mongodb

这是我要查询的语法

[http://pastebin.com/q05EBSUJ](http://pastebin.com/q05EBSUJ)

我得到了结果错误

```
[Tue Nov 27 13:05:16 2012] [error] [client 127.0.0.1] PHP Fatal error:  Uncaught exception 'MongoCursorException' with message 'invalid operator: $or' in /var/www/ 
```

我尝试谷歌搜索，很多人说如果它在 mongodb 版本中出错。

所以我的语法错了吗？还是我的mongodb版本错误，我的mongodb verison = 2.2.1？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:45:55.760

使用以下代码

```
$result = $mo->find(
      array(
        'node' => 'stream',
         array('or' => array(
          'user_id' => $this->session->userdata('user_id'),
          'to' => $this->session->userdata('user_id')
         )
      )
   )
 )->sort(array('time' => -1))->limit(5); 
```

代替

```
$result = $mo->find(
      array(
        'node' => 'stream',
         array('$or' => array(
          'user_id' => $this->session->userdata('user_id'),
          'to' => $this->session->userdata('user_id')
         )
      )
   )
 )->sort(array('time' => -1))->limit(5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:08:00.093

考虑以下示例，该示例使用`$or`运算符从嵌入文档中选择字段：

```
$collection->find([
    // $or (array)
    '$or' => [
        ['key 1' => 'value 1'], // (array)
        ['key 2' => 'value 2']  // (array)
    ]
]); 
```

尝试：

```
$result = $mo->find([
    // $or (array)
    '$or'   => [
        ['user_id'  => $this->session->userdata('user_id')], // (array)
        ['to'       => $this->session->userdata('user_id')]  // (array)
    ],
    'node'  => 'stream',
])->sort(['time' => -1])->limit(5); 
```

[参考](https://coderwall.com/p/aymsvw)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:39:03.917

@tpae 它不起作用。

我有自己的解决方案。

```
 $result = $mo->find(
      array('$or' => array(
        array(
          'node' => 'stream',
          'user_id' => $this->session->userdata('user_id')
        ),
        array(
          'node' => 'stream',
          'to' => $this->session->userdata('user_id')
        )
      )
    )
  )->sort(array('time' => -1))->limit(5); 
```

及其工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T06:27:43.857

**$or**数组有额外的深度层。

尝试：

```
$result = 
    $mo->find(array(
          "node" => "stream",
          "$or"  => array("user_id" => $this->session->userdata('user_id'),
                               "to" => $this->session->userdata('user_id'))
       ->limit(5)
       ->sort(array("time" => -1)); 
```

# c++ - 绑定错误：地址已在使用中

> ID：13578457
> 
> 赞同：0
> 
> 时间：2012-11-27T06:19:43.903
> 
> 标签：c++, sockets, networking, webserver

当我尝试重用套接字地址时，此错误即将到来。我用谷歌搜索，我从这个链接得到[BIND ERROR : Address already in use](https://stackoverflow.com/q/2147592/539472)

我应该打电话给

```
setsockopt(SO_REUSEADDR) 
```

但这样做后它不能正常工作。

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:22:11.970

即使在使用时，`SO_REUSEADDR`您也不能将多个绑定绑定到单个地址/端口对，但事实并非`SO_REUSEADDR`如此。

参见例如[这个链接](http://www.unixguide.net/network/socketfaq/4.5.shtml)以获得对标志的一个很好的解释。

# wcf - 如何在一个对象中继承三个数据契约？

> ID：13578461
> 
> 赞同：0
> 
> 时间：2012-11-27T06:19:56.647
> 
> 标签：wcf, datacontracts

如何调用三个数据合约对象并在单个对象中创建它？

我有一个像这样的数据合同类

```
 [Serializable]
    [DataContract]
    public class Address
    {
        [DataMember]
        public long AddressId { get; set; }
} 
```

另一个数据合同类，如

```
 [Serializable]
    [DataContract]
    public class Email
    {
        [DataMember]
        public long EmailId { get; set; }
    } 
```

另一个数据合同类，如

```
[Serializable]
    [DataContract]
    public class Phone
    {
        [DataMember]
        public long PhoneId { get; set; }
    } 
```

现在我想以相同的方法使用 AddressId、EmailId、PhoneId。

怎么可能？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:17:10.793

请**只保留 [DataContract] 属性，您也不需要使用 Serializable 进行装饰**。

好吧，WCF 数据合同有以下选项：

**复合数据契约。**

任何标记为 DataMember 的类的成员字段都可以是数据协定本身，只要它们也使用 DataContract 属性进行修饰。所有嵌套数据合约的聚合说明了数据合约本质上是递归的事实。WCF 检测对象图中所有*启用数据协定的*属性并捕获它们的状态。

```
[DataContract]
class Address
{
    [DataMember]
    public long AddressId { get; set; }
}

// The same for the rest two, and then an aggregating type.

[DataContract]
class Contact
{
    [DataMember]
    public Address Address {get;set;} // here we go

    [DataMember]
    public Email Email {get;set;}

    [DataMember]
    public Phone Phone {get;set;}
} 
```

**数据契约层次结构**

您的数据契约类可能是另一个数据契约类的子类，在这里您只需要明确选择加入给定的数据契约，即在层次结构树中的每种类型上指定 DataContract。

```
[DataContract]
class ContactDetails
{
    [DataMember]
    public long AddressId { get; set; }

    // you could move the phone and email details here too.
}

[DataContract]
class Contact : ContactDetails
{
    [DataMember]
    public string Name { get; set; }
} 
```

在 .Net 中，您不能为每个类设置三个单独的类并同时从它们继承。我的建议是你的第一个案例——数据合约聚合。

奖励：**多态类型参考。**

在基本类型上应用 [KnownType(Type type)] 属性，以将多态对象作为操作协定参数传递。这绝对不是你的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:31:09.610

应用于类的契约为您的服务提供服务元数据（服务类只能使用修饰类作为服务方法中的参数类型）。因此 - 如果您想从现有属性中组合某种类型（类） - 这与 WCF 合同无关。

# django - 用户配置文件匹配查询不存在 django facebook 错误

> ID：13578464
> 
> 赞同：1
> 
> 时间：2012-11-27T06:20:38.647
> 
> 标签：django, django-models, django-facebook

集成后出现以下错误

DoesNotExist at /facebook/connect/ UserProfile 匹配查询不存在。

**这是我的models.py**

```
from django.db import models

from django_facebook.models import FacebookProfileModel

from django.contrib.auth.models import User

class UserProfile(FacebookProfileModel):

    user = models.OneToOneField(User)

from django.db.models.signals import post_save

from django.dispatch import receiver

@receiver(post_save, sender=User)

def create_profile(sender, instance, created, **kwargs):

    if created: 

        profile, new = UserProfile.objects.get_or_create(user=instance) 
```

**也在我的设置中**

```
AUTH_PROFILE_MODULE = 'kk.UserProfile' 
```

请帮忙！

**编辑** **编辑** 我的回溯

```
Environment:

Request Method: POST
Request URL: http://localhost:8000/facebook/connect/?facebook_login=1

Django Version: 1.4.2
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django_facebook',
 'kk')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/views/decorators/csrf.py" in wrapped_view
  77\.         return view_func(*args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django_facebook-4.0.8-py2.7.egg/django_facebook/utils.py" in wrapper
  358\.         response = f(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django_facebook-4.0.8-py2.7.egg/django_facebook/decorators.py" in _wrapped_view
  89\.                 get_persistent_graph(request, redirect_uri=current_uri)
File "/usr/local/lib/python2.7/dist-packages/django_facebook-4.0.8-py2.7.egg/django_facebook/api.py" in get_persistent_graph
  61\.         graph = get_facebook_graph(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django_facebook-4.0.8-py2.7.egg/django_facebook/api.py" in get_facebook_graph
  181\.                 profile = request.user.get_profile()
File "/usr/local/lib/python2.7/dist-packages/django/contrib/auth/models.py" in get_profile
  400\.                                    self._state.db).get(user__id__exact=self.id)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py" in get
  366\.                     % self.model._meta.object_name)

Exception Type: DoesNotExist at /facebook/connect/
Exception Value: UserProfile matching query does not exist. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:22:54.073

要么你的 create_profile 信号没有被触发（信号文件是从 django 机器的某个地方导入的吗？）

或者您有尚未运行新的 create_profile 信号处理程序的现有用户。

发布回溯总是有帮助的。

# asp.net-mvc-3 - MVC 路由和导航

> ID：13578465
> 
> 赞同：0
> 
> 时间：2012-11-27T06:20:40.360
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我的问题涉及 Web 应用程序导航。我正在使用区域文件夹。加载位于 Areas 文件夹中的页面后，我无法导航到根目录下的 View 文件夹中的页面。

例子：

在称为维护视图的区域中的文件夹称为银行银行页面使用菜单加载正常。

现在我想加载关于页面关于页面位于根目录下的查看文件夹中。

当我单击关于菜单项时，URL 显示为 http:\mysite\maintenance\home\about。正确的 url 是 http:\mysite\home\about。

请注意，在我加载位于 Areas 文件夹中的页面之前，我可以毫无问题地加载 about 页面。

格里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:27:54.320

如果我的理解是正确的，那么在您生成链接时，您希望从一个区域内生成一个返回到站点根目录而不是在一个区域内的链接。

为此，您必须告诉路由引擎您不需要任何区域。

```
@Html.ActionLink("About Link Text", "About", "Home", new { area = "" }, null); 
```

通过一个空白区域应该让你回到顶部。

编辑：

创建了一个测试用例来验证。

一切都按预期工作。

![在此处输入图像描述](../Images/562ce5ab11d41256422b3368244aac6a.png)

# r - R中的分解图函数

> ID：13578469
> 
> 赞同：2
> 
> 时间：2012-11-27T06:21:23.977
> 
> 标签：r, igraph

我在下面有一段代码。我无法理解“decompose.graph”究竟是如何工作的。在下面的代码中，我想看看“comps”中有什么。但它显示为一些列表结构，我无法理解。

我还可以使用哪个函数来查看“comps”的图形表示（我尝试了绘图，但它不起作用）

```
gr<-graph(c(1,2,1,3,1,4,2,3,2,4,3,4),directed=FALSE)

cl<-cliques(gr,min=2,max=2)

  edges <- c()
  for (i in seq_along(cl)) {
    for (j in seq_along(cl)) {
      if ( length(unique(c(cl[[i]], cl[[j]]))) == 3 ) {
        edges <- c(edges, c(i,j))
      }
    }
  }

  plot(clq.graph) <- simplify(graph(edges))
  V(clq.graph)$name <- seq_len(vcount(clq.graph))
  comps <- decompose.graph(clq.graph)

  lapply(comps, function(x) {
    unique(unlist(cl[ V(x)$name ]))
  }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:52:58.403

一般来说，如果你想在 R 中查看函数背后的代码，你可以在命令中输入函数名并回车。这将为您提供代码的概述。例如：

```
> decompose 
```

会给你：

```
function (x, type = c("additive", "multiplicative"), filter = NULL) 
{
    type <- match.arg(type)
    l <- length(x)
    f <- frequency(x)
    if (f <= 1 || length(na.omit(x)) < 2 * f) 
        stop("time series has no or less than 2 periods")
    if (is.null(filter)) 
        filter <- if (!f%%2) 
            c(0.5, rep(1, f - 1), 0.5)/f
        else rep(1, f)/f
    trend <- filter(x, filter)
    season <- if (type == "additive") 
        x - trend
    else x/trend
    periods <- l%/%f
    index <- seq(1L, l, by = f) - 1
    figure <- numeric(f)
    for (i in 1L:f) figure[i] <- mean(season[index + i], na.rm = TRUE)
    figure <- if (type == "additive") 
        figure - mean(figure)
    else figure/mean(figure)
    seasonal <- ts(rep(figure, periods + 1)[seq_len(l)], start = start(x), 
        frequency = f)
    structure(list(x = x, seasonal = seasonal, trend = trend, 
        random = if (type == "additive") x - seasonal - trend else x/seasonal/trend, 
        figure = figure, type = type), class = "decomposed.ts")
}
<environment: namespace:forecast> 
```

我对 decompose.graph 进行了同样的尝试，但我似乎没有可用的功能。这是一个特殊的图书馆吗？我在执行您的代码时也遇到了一些挑战，因为该功能`cliques`似乎也不可用；包括您正在使用的图书馆会有所帮助。

# java - 如何替换数组的值？

> ID：13578470
> 
> 赞同：0
> 
> 时间：2012-11-27T06:21:28.947
> 
> 标签：java, arrays, matching

我正在尝试在这里做一个配对游戏，我几乎完成了。给出 userInput 后​​，我​​试图用隐藏的值替换游戏板。我已经编写了代码来查看“A1”是否可以工作，但它不会。有人对如何用另一个元素替换数组的元素有任何想法吗？还是我做错了？

```
import java.util.*;
public class breitje_MatchUp{
   static Scanner input = new Scanner(System.in);
   static int i=0, count=0;
   static char[][] clearBoard = new char[4][4];
   static char[][] board = new char[4][4];
   public static void main(String[] args){
      gamePlay();

   }

   public static void drawMenu(){
      System.out.println("Welcome to the Match Up game! \n");  
      System.out.println("Please select from the following: ");  
      System.out.println("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");  
      System.out.println("1\. New Game");  
      System.out.println("2\. Quit");  
      System.out.println("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");  
      int optionSelect = input.nextInt();
      System.out.println("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");  
      while(optionSelect!=1 && optionSelect !=2){
         System.out.println("Please enter 1 (New Game) or 2(Quit)");
         optionSelect = input.nextInt();}
      if (optionSelect == 1)
         System.out.print("START GAME HERE********");
      else if (optionSelect == 2)
         System.out.println("Thanks for playing! Have a great day.");  
   }

   public static char[][] buildBoard(){
      char[][] board = new char[4][4];
      for(int i = 0; i <board.length; i ++){
         for(int j = 0; j<board[0].length;j++){
            board[i][j]=(char)(65+Math.random()*8);
         }
      }
      return board;
   } 

   public static void drawBoard(){
      for(int row1 = 0; row1 < 4; row1++) {
         // this will create a new line for each new row
         System.out.println("");
         for(int col1 = 0; col1 < 4; col1++) {
            // this will print out the 4 row variable values
            clearBoard[row1][col1]='.';
         }        
      }
      System.out.format("   %2s %2s %2s %2s \n",'A','B','C','D');
      System.out.format("   %2s %2s %2s %2s \n",'-','-','-','-');
      System.out.format("1 |%2s %2s %2s %2s \n",
          clearBoard[0][0],
          clearBoard[0][1],
          clearBoard[0][2],
          clearBoard[0][3]);
      System.out.format("2 |%2s %2s %2s %2s \n",
          clearBoard[1][0],
          clearBoard[1][1],
          clearBoard[1][2],
          clearBoard[1][3]);
      System.out.format("3 |%2s %2s %2s %2s \n",
          clearBoard[2][0],
          clearBoard[2][1],
          clearBoard[2][2],
          clearBoard[2][3]);
      System.out.format("4 |%2s %2s %2s %2s \n",
          clearBoard[3][0],
          clearBoard[3][1],
          clearBoard[3][2],
          clearBoard[3][3]);  
   } 

   public static void gamePlay(){
      while(!checkForWin(count)){
         drawBoard();
         System.out.print("Card 1: Column/Row (Ex: A3) : "); //input 1
         String userInput = input.nextLine(); System.out.println();
         userInput = userInput.toUpperCase().trim();

         convertInput(userInput);

         drawBoard();

         System.out.print("Card 2: Column/Row (Ex: A3) : "); //input 2
         String userInput1 = input.nextLine(); System.out.println();
         userInput1 = userInput.toUpperCase().trim();
      }
      drawMenu();
   }
   public static void convertInput(String input){
      if(input.equals("A1"))
         clearBoard[0][0]=board[0][1];

   }

   public static boolean checkForWin(int count){
      if (count == 8)
         return true;
      else
         return false;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:27:39.230

您所做的更改将被 draw 方法覆盖。

```
 clearBoard[row1][col1]='.'; // this will print out the 4 row variable values 
```

我不清楚你想用这种方法完成什么，因为评论完全不同意代码 - 你将值设置为一个句点，而不是在该行打印任何内容。

这里还有很多风格需要改进——一个名为的方法`draw`不应该有重置板的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:36:24.793

除了@I82Much 的回答之外，您还声明了 buildBoard 方法但从不调用它，因此当您设置 clearBoard[0][0]=board[0][1] 时，您将其设置为 null（我认为）。

在您的 buildBoard 方法中，您重新声明了一个新的板数组，该数组在范围内是本地的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:39:50.670

查看 JAVA 的 Arrays API；它几乎没有非常有趣和有用的方法。 [http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)

# iphone - iPad：标签栏项目标题不显示

> ID：13578472
> 
> 赞同：1
> 
> 时间：2012-11-27T06:21:38.767
> 
> 标签：iphone, objective-c, ios, ipad, uitabbarcontroller

嗨朋友我刚刚添加`TabbarController`并使用波纹管代码`UISplitViewController`相关：-`DetailsViewController`

```
-(IBAction)loginclick:(id)sender
{

    tabBarController =[[UITabBarController alloc]init];
    NSMutableArray *array = [NSMutableArray array];

    NSMutableArray *tabArray = [NSMutableArray array];

    UISplitViewController *HomeSpilitView = [[[UISplitViewController alloc] init]autorelease];

    HomeSpilitViewController *HomeMster = [[HomeSpilitViewController alloc] initWithNibName:@"HomeSpilitViewController" bundle:nil];
    UINavigationController *masterNavigationController = [[[UINavigationController alloc] initWithRootViewController:HomeMster] autorelease];

    [array addObject:masterNavigationController];

    HomeDetailsViewController *HomeDetailsViewControllers = [[HomeDetailsViewController alloc] initWithNibName:@"HomeDetailsViewController" bundle:nil];

    UINavigationController *detailNavigationController = [[[UINavigationController alloc] initWithRootViewController:HomeDetailsViewControllers] autorelease];

    [array addObject:detailNavigationController];

    [HomeSpilitView setViewControllers:array];

    [tabArray addObject:HomeSpilitView];

    HomeMster.objHomeDetailsViewcontroller = HomeDetailsViewControllers;
    HomeSpilitView.delegate = HomeDetailsViewControllers;

    array = [NSMutableArray array];

    UISplitViewController *splitViewConntroller2 = [[[UISplitViewController alloc] init]autorelease];

    REMMasterViewController *viewCont3 = [[REMMasterViewController alloc] initWithNibName:@"REMMasterViewController" bundle:nil];

    UINavigationController *masterNavigationController3 = [[[UINavigationController alloc] initWithRootViewController:viewCont3] autorelease];

    [array addObject:masterNavigationController3];

    REMDetailViewController *viewCont4 = [[REMDetailViewController alloc] initWithNibName:@"REMDetailViewController" bundle:nil];

    UINavigationController *detailNavigationController2 = [[[UINavigationController alloc] initWithRootViewController:viewCont4] autorelease];

    [array addObject:detailNavigationController2];

    viewCont3.detailViewController = viewCont4;

     splitViewConntroller2.delegate = viewCont4;
    [splitViewConntroller2 setViewControllers:array];

    [tabArray addObject:splitViewConntroller2];

    // Add the tab bar controller's current view as a subview of the window
    [tabBarController setViewControllers:tabArray];

    objAppdelegate.window.rootViewController=tabBarController; 

} 
```

我在每个`ViewController` 中设置了导航标题，`- (id)initWithNibName`如下所示：-

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Detail", @"Detail");

        //  self.navigationItem.title=@"details";    I am trying with this line code also
        //  self.tabBarItem.title=@"details";

    }
    return self;
} 
```

在上面我也设置了标题`self.navigationItem.title=@"details`， `self.tabBarItem.title=@"details`但我仍然有同样的问题我不知道错误在哪里，请指导我并帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:35:22.403

当您在初始化方法中为视图控制器设置标题时，视图控制器不在导航控制器堆栈中。仅当视图控制器位于导航控制器中时，标题才可见。在导航控制器堆栈中添加这些控制器后，设置标题以查看控制器。在您的情况下，在使用视图控制器作为根视图 vontrollers 创建导航控制器之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:09:24.423

**解决**

在添加`tabbarController`窗口之前使用波纹管解决

> [[self.tabBarController.tabBar.items objectAtIndex:1] setTitle:NSLocalizedString(@"BotonMapas", @"comment")];

# html - CSS 悬停菜单浮动在窗口外，“li”元素也在“ul”边框之外扩展

> ID：13578476
> 
> 赞同：0
> 
> 时间：2012-11-27T06:22:03.297
> 
> 标签：html, css

![第一个问题的图像](../Images/0ec1c59074d373826e5bda1c09b6774f.png)

![第二个问题的图像](../Images/817005818dd4971c3384efb9d3160a9e.png)

嗨专家，

我有一个要求，我必须创建一个**悬停菜单**，该菜单最多扩展为**3 个级别**，因为`IE8,`我的意思是，当您将鼠标悬停在第一级时，第一级是顶层，您将看到第二级，再次悬停在第二级时，您会看到第 3 级。

因为我以前没有做过这样的事情，而且我对 CSS 也不是很好，所以我编写了一个非常基本的代码，其中有 2 个主要问题，我希望各位专家研究一下。

**1.**在顶层导航中，当我将鼠标悬停在最后一个选项卡上时，第二级悬停菜单的某些部分会浮出窗口，在页面上创建水平滚动。更进一步，当我将鼠标悬停在第 2 层上时，我看不到第 3 层，因为它太向前浮动，从而产生更大的水平滚动。请参考图片 1.jpg。

**2.**我在 2 级和 3 级菜单中的一些链接浮动在 UL 标记的边框之外。请参考图片2.jpg

这是我的**JSP** :--

```
 <%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd" >

<%@ taglib uri="NavigationTagLibrary" prefix="nav"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title></title>
<script type="text/javascript">

TLNHover = function(){

    alert('inside TLNHover 2 nowrap style added');

    if (!document.all) return; // continue only for IE

    var cssRule;

    var newSelector;

    for (var i = 0; i < document.styleSheets.length; i++){

        for (var j = 0; j < document.styleSheets[i].rules.length ; j++){

            cssRule = document.styleSheets[i].rules[j];

            if (cssRule.selectorText.indexOf("LI:hover") >= 0){

                newSelector = cssRule.selectorText.replace(/LI:hover/gi, "LI.iehover");

                document.styleSheets[i].addRule(newSelector , cssRule.style.cssText);

            }

        }

    }

    var getElm = document.getElementById("navigation").getElementsByTagName("LI");

    for (var i=0; i<getElm.length; i++) {

        getElm[i].onmouseover=function() { this.className+=" iehover"; } 

        getElm[i].onmouseout=function() { this.className=this.className.replace(new RegExp(" iehover\\b"), ""); }

         }// end of for

}// end of functionn TLNHover

if(window.attachEvent) window.attachEvent("onload", TLNHover);

</script>
</head>
<body>

<%-- this is the main navigation section --%> 

<div id="hoverNav" style="background-color:#ffffff;height:30px;"> 
<ul id="navigation">

<%-- iterate level 1 navigation nodes --%> 

<nav:iterateInitialNavNodes> 

<li class="header"><a class="headanchor">

<nav:navNodeAnchor navigationMethod="byURL" anchorAttributes="style='text-decoration: none;color:#000;font-weight: bold;'" />

</a> 

<%-- check child nodes --%> 

<nav:ifNavNodeHasChildren> 

<ul class="sub"> 

<%-- iterate level 2 --%> 

<nav:iterateNavNodeChildren> 

<%-- check child nodes level 3--%> 

<nav:ifNavNodeHasChildren> 

<li >

<a class="fly" ><nav:navNodeAnchor navigationMethod="byURL"/>

</a> 

<ul > 

<%-- iterate child nodes level 3--%> 

<nav:iterateNavNodeChildren> 

<li>

<a>

<nav:navNodeAnchor navigationMethod="byURL" />

</a>

</li> 

</nav:iterateNavNodeChildren> 

</ul> 

</li> 

</nav:ifNavNodeHasChildren> 

<nav:ifNotNavNodeHasChildren> 

<li >

<a>

<nav:navNodeAnchor navigationMethod="byURL"/>

</a> 

</li> 

</nav:ifNotNavNodeHasChildren> 

</nav:iterateNavNodeChildren> 

</ul> 

</nav:ifNavNodeHasChildren> 

</li>

<b>&nbsp;&nbsp;&nbsp;</b> 

</nav:iterateInitialNavNodes> 

</ul>

 </div>

</body>
<script type="text/javascript"> TLNHover; </script>
</html> 
```

这是我的**CSS** :--

/* “导航”是`id`第一**级** `UL`标签 */

```
#navigation {z-index:100;background-color:#ffffff;position: absolute; list-style:none;margin-left:5px;-moz-margin-start:0px;padding-left=2px;margin-top:5px;}

#navigation li.header{width:5em;padding-left: 10px;padding-right: 10px;margin-right:2px;white-space: nowrap; border:1px solid #ffffff; background-color:#E0E0E0;display: -moz-inline-stack; display: inline-block; float:left;height:25px;text-decoration:none;font-family:Arial;font-style:normal;font-size:13px;font-color:#000000;}

#navigation li.header a.headanchor{text-decoration: none; height: 20px;position: absolute;font-color:#000000; }

#navigation li:hover a.headanchor{text-decoration:none;position: absolute;font-color:#ffffff;}

#navigation li:hover {position:relative;z-index:100;font-weight: bold;font-color:#ffffff;}

#navigation li:hover ul.sub {width: 15em;}

#navigation li:hover ul.sub {left:0px; right:1px; top:23px; background: #E0E0E0; z-index:300;border:1px solid #5c731e;height:auto;}

#navigation li:hover ul.sub li:hover {padding: 0;}

#navigation li:hover ul.sub li {left:10px;right:5px;background: #E0E0E0;font: 0.5em Arial; color:#000000; font-size: 1em; position:relative;width:10em;height: 25px;}

#navigation li:hover ul.sub li a{position: absolute;z-index:200; font: 0.4em Arial; text-decoration:none;color:#000000; font-size: 1em;width: 15em;}

#navigation li:hover ul.sub li a:hover {width:15em}

#navigation li:hover ul.sub li a:hover {position:relative;height:auto;}

#navigation li:hover ul.sub li a.fly:hover {width:15em}

#navigation li:hover ul.sub li a.fly:hover{position:relative;z-index:300;color:#ffffff;height:auto;}

#navigation li:hover li:hover ul {left:100 px; top:12px;bottom: 2px; background: #E0E0E0; border:1px solid #5c731e;display: block; width:15em;position:absolute; z-index:400; text-decoration:none;height:auto;}

#navigation li:hover li:hover ul li {padding: 0;}

#navigation li:hover li:hover ul li a {display: inline-block; padding: 0; }

#navigation ul {position:absolute; left:-9999px; top:-9999px; width:0; height:0; margin:0; padding:0; list-style:none;text-decoration:none;height:auto;display: block;border:1px solid #5c731e;} 
```

在此先感谢， 最好的问候， Abhijt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:50:30.530

现在替换一些css属性

**像这样**

```
#navigation li:hover ul.sub li {
    background: none repeat scroll 0 0 #E0E0E0;
    color: #000000;
    display: block;  // add this line
    font: 1em Arial;
    position: relative;
    width: 10em;  // remove this line
 }

#navigation li:hover ul.sub li a {
    color: #000000;
    display: block;  // add this line
    font: 1em Arial;
    padding-left: 14px;// add this line
    position: absolute;// remove this line
    text-decoration: none; 
    white-space: normal;// add this line
    width: 15em;// remove this line
    z-index: 200; // remove this line
margin-top:10px;// add this line
margin-right:10px;// add this line

} 
```

***[现场演示](http://jsfiddle.net/rohitazad/ggSu6/)***

# c# - 处理程序文件（.ashx）文件不会在 Windows 7 中加载

> ID：13578484
> 
> 赞同：0
> 
> 时间：2012-11-27T06:23:00.750
> 
> 标签：c#, asp.net, windows-7, handler

我将**iis 6.1与windows7一起**使用。如果我在我的asp.net网站中创建处理程序文件（.ashx），当我在浏览器中执行它时没有加载它。**是否需要任何系统更改才能在windows7中**正确加载处理程序文件？但是相同的处理程序在 Windows 2008 上正确加载。***我的 .Net 规范是 Visual Studio 2008 版本 9.0.21022.8 RTM***，我的 .net 框架是 3.5 SP1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T01:08:43.813

Windows 7 不支持 IIS 6.1。此外，请参阅以下链接并启用 iis 作为 Windows 功能并重试您的服务。如果您需要测试 iis 6 部署，请考虑在支持 iis 6 的平台（如 windows server 2003）上进行调试。

为什么您的安装不起作用，缺少注册表项，iis 元数据库更改，这只是冰山一角。

[我可以在同一台 Windows 7 机器上安装 IIS 6 和 IIS 7.5 吗？](https://stackoverflow.com/questions/3701954/can-i-install-iis-6-iis-7-5-on-the-same-windows-7-machine)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:18:14.777

好的，我不确定你为什么需要使用 IIS 6.1，但是在我看来你有 IIS 配置错误的问题。这是您需要检查的内容：

*   根据您的应用程序结构，确保您有与网站相关联的适当应用程序池（经典或托管）。
*   检查 ASP.NET 是否在 ISS 正确注册，如果没有，您可以浏览到适当的 .NET 版本。该实用程序是 aspnet_regiis.exe，它位于 %WindowsDir%\Microsoft.NET\Framework\vx.y.zzzz\ 下，您应该使用 -i 参数调用它：aspnet_regiis.exe -i
*   检查 MIME 类型下是否定义了 .ashx 类型。

# selenium - 右键单击（或 contextClick）退出 iframe。如何正确执行？

> ID：13578485
> 
> 赞同：1
> 
> 时间：2012-11-27T06:23:02.043
> 
> 标签：selenium, webdriver, selenium-webdriver

在我的应用程序中，我需要对框架中的一个元素执行右键单击操作。我切换到该框架并且正常的单击操作正确执行，但是对于右键单击，该操作在框架之外的某处执行，但不在指定元素上。

为了交叉检查，我使用了以下代码：

```
//switch to iframe
driver.switchTo().frame(driver.findElement(By.xpath("//tr[2]/td/iframe")));
//click on element      
driver.findElement(By.xpath("//My xpath")).click();//correctly clicked on element

WebElement span=driver.findElement(By.xpath("//My xpath"));
//right click       
Actions right=new Actions(driver);
right.contextClick(span).build().perform();//not clicked on element. context click performed out side of frame 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2021-12-01T11:15:24.390

尝试在元素之间应用睡眠，即

```
driver.findElement(By.xpath("//My xpath")).click();

Thread.Sleep(1000);

WebElement span=driver.findElement(By.xpath("//My xpath")); 
```

# jquery - jQuery滚动固定空白

> ID：13578487
> 
> 赞同：0
> 
> 时间：2012-11-27T06:23:06.507
> 
> 标签：jquery, html, css

该问题在每个浏览器中出现的方式不同，在 Firefox 中，例如空格 appr。如果您再次滚动到顶部，则会出现具有相同高度的滚动框。在 chrome 中，框在滚动时会变得狭窄，依此类推......

使用的调用是：

```
 for (i = 1; i < $('.picbox').length; i++) {
    $('#picbox' + i).scrollToFixed({
            marginTop: 50,
            limit: $('#pic' + (i + 1)).offset().top - $('#picbox' + i).height() - 30
    });
    } 
```

我试过的：

*   互联网...
*   更改边距、高度等
*   给图像固定高度

嗯......检查行为： [http ://www.animize.de/users/galerie/showall](http://www.animize.de/users/galerie/showall)

这就是它应该表现的样子：http: [//jsfiddle.net/y3qV5/760/](http://jsfiddle.net/y3qV5/760/)

很高兴得到任何答案......我猜它与css有关，但不确定......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T00:11:28.763

嗯，这是一项相当多的研究工作 - 首先你必须取消设置滚动固定功能......

```
 for (i = 1; i < $('.picfeeditem').length; i++) {
                            if ($.isScrollToFixed($('#picbox' + i))) 
                                { 
                                    $('#picbox' + i).trigger('remove.ScrollToFixed'); 
                                }
                                $('#picbox' + i).scrollToFixed({
                                        marginTop: 50,
                                        limit: $('#pic' + (i + 1)).offset().top - $('#picbox' + i).height() - 40
                                });
                        } 
```

这也是一些css工作，重要的是让属性溢出：隐藏在容器元素上，因为scrolltofixed添加了一些奇怪的容器，留下了一些空白......但是现在它正在工作并且正在运行。

# java - Android：如何从 android 中的 getHolder() 中删除数据

> ID：13578501
> 
> 赞同：1
> 
> 时间：2012-11-27T06:24:38.633
> 
> 标签：java, android

我在触摸事件的基础上在画布上的图像上绘制多条线。当我单击我需要以先进先出的方式删除行时，我在活动中有一个清除按钮。我将触摸坐标存储在 arrayobject 中，并在 ondraw() 方法中使用它。我正在清除按钮单击时的矢量。但它在 onDraw() 方法中不起作用。请帮助我。

```
public class ImageViewTest extends SurfaceView implements ClearData,SurfaceHolder.Callback {
    int xpoint, ypoint, xendpoint, yendpoint;
    Vector v, v1;
    Canvas canvas;
    private ViewThread mThread;
    boolean motionevent = false ,clear =false;
    ArrayList<Vector> objects = new ArrayList<Vector>();
    ArrayList<Vector> objects1 = new ArrayList<Vector>();
    Vector vobj = new Vector();

    public ImageViewTest(Context context) {
        super(context);
        getHolder().addCallback(this);
        mThread = new ViewThread(this);
        // TODO Auto-generated constructor stub
    }

    public ImageViewTest(Context context, AttributeSet attr) {

        super(context, attr);
        getHolder().addCallback(this);
        mThread = new ViewThread(this);
        // TODO Auto-generated constructor stub
    }

    public void cleardata() {
         System.out.println(" cleardata");
         this.objects.clear();
         this.objects1.clear();
        // v = null;
        //
        //
        // System.out.println(" v value "+v);
    //  onDraw(canvas);
        invalidate();

    }

    public void doDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        //super.onDraw(canvas);

        Paint p = new Paint();

        System.out.println("ondraw " + objects.size() + " // "
                + objects1.size()+ "CANVAS "+canvas);

        DisplayMetrics metrics = getResources().getDisplayMetrics();

        Bitmap mapImg = BitmapFactory.decodeResource(getResources(),
                R.drawable.film2);
        Rect dest = new Rect(0, 0, getWidth(), getHeight());
        p.setFilterBitmap(true);
        canvas.drawColor(Color.BLACK);
        canvas.drawBitmap(mapImg, null, dest, p);
        if(motionevent)
        {
            p.setColor(Color.RED);
            p.setStrokeWidth(2);
            canvas.drawLine(xpoint, ypoint, xendpoint, yendpoint, p);

        }else{
            canvas.drawBitmap(mapImg, null, dest, p);
        //  System.out.println("Objects size "+objects.size()+" // "+objects1.size());
//
        for (int index = 0; index < objects.size(); index++) {

            p.setColor(Color.RED);
            p.setStrokeWidth(2);

            Vector vv = objects.get(index);
            Vector vv1 = new Vector();

            xpoint = (int) Float.parseFloat(vv.elementAt(0).toString());
            ypoint = (int) Float.parseFloat(vv.elementAt(1).toString());

            if (objects1.size() > index) {
                vv1 = objects1.get(index);
            //  System.out.println("VV SIZE " + vv.size() + " // " + vv1.size());
                if (vv1.size() == 2) {
                    xendpoint = (int) Float.parseFloat(vv1.elementAt(0)
                            .toString());
                    yendpoint = (int) Float.parseFloat(vv1.elementAt(1)
                            .toString());
                }
            }

            canvas.drawLine(xpoint, ypoint, xendpoint, yendpoint, p);

        }
        }

        // canvas.drawLine(xpoint, ypoint, xendpoint, yendpoint, p);

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        //System.out.println("getAction  " + event.getAction());
        //System.out.println("X CORdinates " + event.getX() + " Y coornaf  "
        //      + event.getY() + " V " + objects.size());
        v = new Vector();
        v1 = new Vector();
        switch (event.getAction()) {
        case 0: // down
            xpoint = (int) event.getX();
            ypoint = (int) event.getY();
            v.add(event.getX());
            v.add(event.getY());
            objects.add(v);

            break;
        case 1: // up
            motionevent = false;
            v1.add(event.getX());
            v1.add(event.getY());
            objects1.add(v1);
            break;
        case 2: // move
            motionevent = true;
            xendpoint = (int) event.getX();
            yendpoint = (int) event.getY();

            break;

        }

        // if(v.isEmpty())
        // {
        // v.add(event.getX());
        // v.add(event.getY());
        // System.out.println("hi ");
        // xpoint =(int)Float.parseFloat(v.get(0).toString());
        // ypoint = (int)Float.parseFloat(v.get(1).toString());
        //
        //
        // }
        // xendpoint = (int)event.getX();
        // yendpoint = (int)event.getY();
        // DisplayMetrics metrics = getResources().getDisplayMetrics();
        invalidate();
        return true;
    }

    @Override
    public void clearData() {
        // TODO Auto-generated method stub
        System.err.println(" hi m");

         this.objects.clear();
         this.objects1.clear();
         System.out.println("OBJECTS VALUE "+objects.size()+ " // "+objects1.size() );
         clear =true;

         System.err.println(clear+" CLEAR");

         //  postInvalidate();
        // onDraw(canvas);

    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        System.err.println("Srface changed");
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        System.out.println("Surface created");
        if (!mThread.isAlive()) {
            mThread = new ViewThread(this);
            mThread.setRunning(true);
            mThread.start();
        }

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }

    class ViewThread extends Thread {
        private ImageViewTest mPanel;
        private SurfaceHolder mHolder;
        private boolean mRun = false;

        public ViewThread(ImageViewTest panel) {
            System.out.println("ViewThREd constructor");
            mPanel = panel;
            mHolder = mPanel.getHolder();
        }

        public void setRunning(boolean run) {
            mRun = run;
        }

        @Override
        public void run() {
            Canvas canvas = null;
            while (mRun) {
                  System.out.println("Inside Run  "+mPanel.clear);
                canvas = mHolder.lockCanvas(); 
                if (canvas != null) {
                    if(clear)
                    {
                        System.out.println("clear call back");
                        mHolder.removeCallback(mPanel);
                    }
                    mPanel.doDraw(canvas);
                    mHolder.unlockCanvasAndPost(canvas);
                }
            }
        }

}
} 
```

# task-parallel-library - Tasks vs. TPL Dataflow vs. Async/Await，什么时候使用？

> ID：13578511
> 
> 赞同：11
> 
> 时间：2012-11-27T06:25:39.743
> 
> 标签：task-parallel-library, async-await, tpl-dataflow

我已经阅读了一些 Microsoft 团队或其他作者的大量技术文档，详细介绍了新的 TPL 数据流库、异步/等待并发框架和 TPL 的功能。但是，我还没有真正遇到任何明确描述何时使用的内容。我知道每个都有自己的位置和适用性，但我特别想知道以下情况：

我有一个完全在进程中运行的数据流模型。顶部是一个数据生成组件 (A)，它生成数据并通过数据流块链接或通过引发事件将其传递给处理组件 (B)。(B) 中的某些部分必须同步运行，而 (A) 大量受益于并行性，因为大多数进程都受 I/O 或 CPU 限制（从磁盘读取二进制数据，然后对其进行反序列化和排序）。最后，处理组件 (B) 将转换后的结果传递给 (C) 以供进一步使用。

**我特别想知道何时在以下方面使用任务、异步/等待和 TPL 数据流块：**

*   启动数据生成组件 (A)。我显然不想锁定 gui/仪表板，因此这个过程必须在不同的线程/任务上运行。

*   如何调用（A）、（B）、（C）中不直接参与数据生成和处理过程但执行可能需要数百毫秒/秒才能返回的配置工作的方法。我的直觉是，这就是 async/await 的亮点？

*   我最挣扎的是如何最好地设计从一个组件传递到下一个组件的消息。TPL 数据流看起来很有趣，但有时对我的目的来说太慢了。（注意最后关于性能问题）。如果不使用 TPL Dataflow，我如何通过进程间任务/并发数据传递来实现响应性和并发性？例如，如果我在任务中引发事件，订阅的事件处理程序会在同一个任务中运行，而不是传递给另一个任务，对吗？综上所述，组件（A）在将数据传递给组件（B）而组件（B）检索数据并专注于处理数据后如何开展业务？这里最好使用哪种并发模型？我在这里实现了数据流块，但这真的是最好的方法吗？

*   我想以上几点总结表明我在如何使用标准实践设计和实现 API 类型组件方面遇到了困难？方法是否应该设计为异步的，数据输入作为数据流块，数据输出作为数据流块或事件？一般来说，最好的方法是什么？我之所以问，是因为上面提到的大多数组件都应该独立工作，因此它们基本上可以在内部被换出或独立更改，而无需重新编写访问器和输出。

**性能注意事项：**我提到 TPL 数据流块有时很慢。我处理高吞吐量、低延迟类型的应用程序和目标磁盘 I/O 限制，因此 tpl 数据流块的执行速度通常比同步处理单元慢得多。问题是我不知道如何将流程嵌入到它自己的任务或并发模型中以实现与 tpl 数据流块已经处理的类似的东西，但没有 tpl df 带来的开销。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T13:01:58.017

听起来你有一个“推送”系统。纯`async`代码仅处理“拉”场景。

您的选择是在 TPL Dataflow 和[Rx](http://msdn.microsoft.com/en-us/data/gg577609)之间。我认为 TPL Dataflow 更容易学习，但是由于您已经尝试过它并且它不适用于您的情况，所以我会尝试 Rx。

Rx 从一个非常不同的角度来解决问题：它以“事件流”而不是 TPL Dataflow 的“参与者网格”为中心。最新版本的 Rx 非常`async`友好，因此您可以`async`在 Rx 管道中的多个点使用委托。

关于您的 API 设计，TPL 数据流和 Rx 都提供了您应该实现的接口：`IReceivableSourceBlock`/`ITargetBlock`用于 TPL 数据流，和`IObservable`/`IObserver`用于 Rx。您可以将实现连接到内部网格（TPL 数据流）或查询（Rx）的端点。这样，您的组件只是一个“块”或“可观察/观察者/主题”，可以在其他“网格”或“查询”中组合。

最后，对于您的`async`构建系统，您只需要使用工厂模式即可。您的实现可以调用`Task.Run`在线程池线程上进行配置。

# android - Fragments API <11 中的 MapViews。

> ID：13578516
> 
> 赞同：0
> 
> 时间：2012-11-27T06:25:54.470
> 
> 标签：android, android-fragments, android-mapview

我已经研究了一段时间了。我实际上有 2 个在片段中实现地图的工作应用程序。每个应用程序使用不同的方法。想知道如果有的话哪个更好。我也想知道我是否只是落后于此，也许还有更好的方法我还没有找到。

2种方法。

一种使用已折旧的 LocalActivityManager。

[此处](https://xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment)详细介绍了另一种方法，使用 Exchanger 在 Activity 和 Map 之间进行协调

第一种方法的缺点是已经折旧。我以为我发现第二种方法有问题，但我无法再次找到它。

一种方法或另一种方法有什么好处。或者还有什么我应该研究的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:32:54.493

看看[这个](https://github.com/petedoyle/android-support-v4-googlemaps)库（android-support-v4-googlemaps）

> Android 兼容性包的一个端口，它使 FragmentActivity 扩展 MapActivity。这是一个 hack，可以在 Fragment 中使用 MapView。

此外，我使用它而不是 Compatibility 包来构建 ActionBarSherlock - 所以我有地图 + 片段 + 动作栏。

# java - 如何检查方法在 Java 的 IF 语句中返回 true 还是 false？

> ID：13578520
> 
> 赞同：7
> 
> 时间：2012-11-27T06:26:10.997
> 
> 标签：java, methods, if-statement, boolean

假设我有一个布尔方法，它使用*if*语句来检查返回类型是*true*还是*false*：

```
public boolean isValid() {
   boolean check;
   int number = 5;

   if (number > 4){
      check = true;
   } else {
      check = false;
   }

 return check; 
```

现在，我想将此方法用作**不同方法中***if*语句的参数：

 **```
if(isValid == true)  // <-- this is where I'm not sure
   //stop and go back to the beginning of the program
else
   //continue on with the program 
```

所以基本上我要问的是，我如何检查 if 语句的参数中布尔方法的返回类型是什么？非常感谢您的回答。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T06:28:42.943

由于它是一种方法，因此要调用它，您应该在之后使用括号，因此您的代码将变为：

```
if(isValid()) {
    // something
} else {
    //something else
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T06:30:16.013

```
public boolean isValid() {
   int number = 5;
   return number > 4;
} 
```

 *```
if (isValid()) {
    ...
} else {
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T06:31:48.743

您应该能够在 IF 条件内调用该函数，以便：

```
if (isValid()) {

}else {

} 
```

由于`isValid()`返回 a `boolean`，因此将立即评估条件。我听说在测试条件之前创建一个本地变量是更好的形式。

```
 boolean tempBoo = isValid();

 if (tempBoo) {

 }else {

 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T07:06:00.947

**-** `If`语句**只接受** `boolean`值。

```
public boolean isValid() {

   boolean check = false;   // always intialize the local variable
   int number = 5;

   if (number > 4){
      check = true;
   } else {
      check = false;
   }

 return check;

}

if(isValid()){

    // Do something if its true
}else{

    // Do something if its false
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T06:30:41.417

```
if (isValid()) {
   // do something when the method returned true
} else {
   // do something else when the method returned false
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T06:34:02.270

您可以使用 ：

```
if(isValid()){
     //do something....
}
else
{
    //do something....
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-18T12:04:34.617

```
public boolean isValid() {
   boolean check;
   int number = 5;

   if (number > 4){
      check = true;
   } else {
      check = false;
   }

 return check; 
```

如果没有布尔检查，你怎么能完成整个方法？

那么如何摆脱.. check = true，check = false，return check 的东西？***

# javascript - D3 强制布局：单击时添加和删除节点

> ID：13578522
> 
> 赞同：4
> 
> 时间：2012-11-27T06:26:16.590
> 
> 标签：javascript, html, d3.js, force-layout, mindmapping

我似乎找不到与我正在尝试做的事情有类似应用的任何其他示例，所以我想我只是问一下。

我正在尝试使用来自 mike bostock 的很棒的 d3.js 库来模拟一个时髦的思维导图工具。我仍在尝试学习 d3，事实证明，基本编码！我想要的是一个空白画布和 3 个按钮；“添加”、“删除”和“编辑”。我希望非常基本！

1.  当您选择“添加”按钮（顶部图像），然后单击空白画布时，将添加一个节点。如果您在附近再次单击，将添加另一个节点并将链接到第一个节点。

2.  选择“删除”按钮（中间图像）然后单击一个节点将删除该节点和所有接触的链接。

3.  选择“编辑”按钮（底部图像）将允许您标记节点。

我有第 1 步和第 2 步的一半。我遇到的问题是这样的：

1.  单击“添加”按钮一次，添加功能打开。**作品**
2.  添加一些节点。**作品**
3.  再次点击“添加”按钮，添加功能被“关闭”。**作品**
4.  单击画布，没有添加节点，但现有节点是可拖动的。**作品**
5.  单击“删除”按钮一次，删除功能打开。**作品**
6.  单击一个节点将其删除。**破碎**。删除一切。
7.  再次单击“删除”按钮，删除功能已“关闭”。**破碎的**
8.  再次点击“添加”按钮，添加功能开启。**破碎的**

有没有人对我为什么会遇到这个问题以及他们将如何解决这个问题有任何建议？我认为这与状态选择之间的混淆有关。关闭“删除”功能时，它会调用与关闭“添加”功能时相同的功能，因此它不知道该做什么，什么也不做……我认为它们不应该是相互选择的，但是开启后保持开启的一种状态？我真的很难过:(

我希望其中的某些部分也对其他人有用。谢谢！塞布

.js 下面..>>>>

```
//==D3 STUFFS ======================================================

//height & width of the interactive area
var divh = document.getElementById('container').offsetHeight;
var divw = document.getElementById('container').offsetWidth;

//node size
var radius = 20;

//define the nodes and links as empty data sets
var nodes = [];
var links = [];

//place the interactive area onto the browser UI with the dimensions defined above
var interactiveArea = d3.select("#container").append("svg:svg").attr("width", divw).attr("height", divh);

//enable dragging of node elements
var drag = d3.behavior.drag()
    .origin(Object)
    .on("drag", dragmove);

//define the physics parameters that will take effect on the nodes and links
var force = d3.layout.force()
    .gravity(0.01)
    .charge(-80)
    .linkDistance(60)
.nodes(nodes)
.links(links)
.size([divw, divh]);

//apply the physics parameters defined above on the nodes and links

force.on("tick", function() 
    {
    interactiveArea.selectAll("line.link")
  .attr("x1", function(d) { return d.source.x; })
  .attr("y1", function(d) { return d.source.y; })
  .attr("x2", function(d) { return d.target.x; })
  .attr("y2", function(d) { return d.target.y; });

    interactiveArea.selectAll("circle.node")
  .attr("cx", function(d) { return d.x; })
  .attr("cy", function(d) { return d.y; }); 
    });

//update the position of the object on drag

function dragmove(d) 
    {
d3.select(this)
  .attr("cx", d.x = Math.max(radius, Math.min(divw - radius, d3.event.x)))
  .attr("cy", d.y = Math.max(radius, Math.min(divh - radius, d3.event.y)));
    }

//update the force layout

function update() 
    {
interactiveArea.selectAll("line.link")
  .data(links)
  .enter().insert("svg:line", "circle.node")
  .attr("class", "link")
  .attr("x1", function(d) { return d.source.x; })
  .attr("y1", function(d) { return d.source.y; })
  .attr("x2", function(d) { return d.target.x; })
  .attr("y2", function(d) { return d.target.y; });

interactiveArea.selectAll("circle.node")
  .data(nodes)
  .enter().insert("svg:circle", "circle.cursor")
  .attr("class", "node")
  .attr("cx", function(d) { return d.x; })
  .attr("cy", function(d) { return d.y; })
  .attr("r", 10)
  .call(force.drag);

force.start();
    }

//==============================================================

//==BUTTON & EVENT SELECTOR=======================================

var addCounter = 0;
var removeCounter = 0;
var editCounter = 0;

function addButton_Off()
    {
    //alert("ADD - off");
    document.images["add-button"].src = "love.lost.PNG";
    all_Off();
    return true;
    }

function removeButton_Off()
    {
    //alert("REMOVE - off");
    document.images["remove-button"].src = "love.lost.PNG";
    //all_Off();
    return true;
    }

function editButton_Off()
    {
    //alert("EDIT - off");
    document.images["edit-button"].src = "love.lost.PNG";

    return true;
    }

function addButton()
    {
    addCounter++;
    if (addCounter%2 == 0)
        addButton_Off();
    else
        addButton_On();
        if (removeCounter%2 == 1)
            removeCounter++;
            removeButton_Off();
        if (editCounter%2 == 1)
            editCounter++;
            editButton_Off();

    function addButton_On()
        {
        //alert("ADD - on");
        document.images["add-button"].src = "pop.cloud.PNG";
        add_Nodes();
        return true;
        }
    }

function removeButton()
    {
    removeCounter++;
    if (removeCounter%2 == 0)
        removeButton_Off();
    else
        removeButton_On();
        if (addCounter%2 == 1)
            addCounter++;
            addButton_Off();
        if (editCounter%2 == 1)
            editCounter++;
            editButton_Off();

    function removeButton_On()
        {
        //alert("REMOVE - on");
        document.images["remove-button"].src = "pop.cloud.PNG";
        remove_Nodes();
        return true;
        }
    }

function editButton()

    {
    editCounter++;
    if (editCounter%2 == 0)
        editButton_Off();
    else
        editButton_On();
        if (addCounter%2 == 1)
            addCounter++;
            addButton_Off();
        if (removeCounter%2 == 1)
            removeCounter++;
            removeButton_Off();

    function editButton_On()
        {
        //alert("EDIT - on");
        document.images["edit-button"].src = "pop.cloud.PNG";
        return true;
        }
    }

//=============================================================

//==EVENT ACTIONS========================================================

function all_Off()
    {
    interactiveArea.on("mousedown", function() 
        {
        update();
        });
    }

function add_Nodes()
    {
    //do the following actions when the mouse is clicked on the interactiveArea
    interactiveArea.on("mousedown", function() 
            {
            // add a node under the mouse cursor
            var point = d3.svg.mouse(this),
                node = {x: point[0], y: point[1]},
                n = nodes.push(node);

            nodes.forEach(function(target) 
                {
                var x = target.x - node.x,
                    y = target.y - node.y;
                //if there is a node less than 30 pixels? away, add a link between the 2 nodes
                if (Math.sqrt(x * x + y * y) < 30)
                    {
                    // add links to any nearby nodes
                    links.push({source: node, target: target});
                    }
                });
            update();
            });
    }

function remove_Nodes()
    {
    interactiveArea.on("click", function()
        {
        var point = d3.select(this);
        point.remove();
        update();
        });
    }

//function edit_Nodes()

//========================================================== 
```

html 下面...>>>>

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
        <link type="text/css" rel="stylesheet" href="style.css">
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>

    <body>
        <div id="enclosure">
            <div id="title">
            /
            </div>
            <div id="button-menu">

                <a onMouseDown="return addButton()">
                    <img name="add-button" id="add-button-img" src="love.lost.PNG" width="80px" height="80px" border = "0" alt="fuchs">
                </a>
                <a onMouseDown="return removeButton()">
                    <img name="remove-button" id="remove-button-img" src="love.lost.PNG" width="80px" height="80px" border = "0" alt="fuchs">
                </a>
                <a onMouseDown="return editButton()">
                    <img name="edit-button" id="edit-button-img" src="love.lost.PNG" width="80px" height="80px" border = "0" alt="fuchs">
                </a>

            </div>
            <div id="container">
                <script type="text/javascript" src="http://mbostock.github.com/d3/talk/20111116/d3/d3.js"></script>
                <script type="text/javascript" src="http://mbostock.github.com/d3/talk/20111116/d3/d3.geom.js"></script>
                <script type="text/javascript" src="http://mbostock.github.com/d3/talk/20111116/d3/d3.layout.js"></script>
                <script type="text/javascript" src="bonquiqui.js"></script>
                <!--<script type="text/javascript" src="origin.js"></script>-->

            </div>
        </div>
    </body>
</html> 
```

下面的CSS..>>>>

```
body {
  font: 300 36px "Lane - Posh";
  height: 100%;
  width: 100%;
  margin: auto;
  overflow: hidden;
  position: absolute;
  text-align: center;
  background: #fff;
}

#enclosure {
  margin-top: 3%;
 }

#title {
background: #fff;
font: 300 220% "Lane - Posh";
height: 100px;
width: 60%;
margin-left: auto;
margin-right: auto;
}

#button-menu {
background: #eee;
height: 20%;
width: 4%;
position: absolute;
top: 48.0%;
left: 81%;
} 

#add-button {
cursor: pointer;
position: relative;
top: 5%;
}

#remove-button {
cursor: pointer;
position: relative;
top: 5%;
}

#edit-button {
cursor: pointer;
position: relative;
top: 5%;
}

#container {
  height: 60%;
  width: 60%;
  margin: auto;
  margin-top: 1%;
  background: #eee;
  overflow: hidden;
}   

circle.node 
  {
  cursor: pointer;
  stroke: #000;
  stroke-width: .5px;
  }

line.link 
  {
  fill: none;
  stroke: #9ecae1;
  stroke-width: 1.5px;
  } 
```

# javascript - 如何比较 jQuery val() 和 JavaScript 值

> ID：13578525
> 
> 赞同：3
> 
> 时间：2012-11-27T06:26:49.040
> 
> 标签：javascript, jquery, html-select, html-input

当我进行以下比较时，尽管 val() 和 value 在视觉上都显示相同的值，但我得到了错误：12

```
if ($(this).val() == txt.value)//returns false 
```

当我同时提醒 $(this).val() 和 txt.value 时，我得到 12。其中一个是字符串，另一个是 int 吗？如果是这样，哪个是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T06:29:53.573

做一个`typeof`知道你的价值观的类型。

```
console.log(typeof $(this).val());
console.log(typeof txt.value); 
```

* * *

`.val()`当使用应该存在的修剪空白时， jQuery 可能已经改变了这些值。为了确保，您可以避免使用`val()`.

`this`in`.each()`以及第二个参数是每次迭代的 DOM 元素。你可以[直接](http://jsfiddle.net/fTLCX/1/)[得到的值`option`](http://jsfiddle.net/fTLCX/1/)：

```
$('select > option').each(function(i,el){
   //we should be getting small caps values
   console.log(this.value);
   console.log(el.value);
}); 
```

* * *

使用松散比较 ( `==`) 时，数字 12 和字符串 12 应该相同。更令人惊讶的是，即使字符串周围有空格也是如此。但通过严格比较 ( `===`)，它们不应该是：

```
"12"    ==  12  // true
" 12  " ==  12  // true; tested on Firefox 20 (nightly)
"12"    === 12  // false 
```

* * *

在这一点上，我们已经清除了所有可以想到的问题。如果没有一个有效，那么首先两者可能是完全不同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:35:26.237

我觉得有必要写这么多评论，我觉得这些评论非常有用，在这里花了这么多时间之后。所以我的问题是：

```
('#mySelect option').each(function({
  if ($(this).val() == txt.value)
    return;
});
alert('Code still continues'); 
```

尽管条件 $(this).val() == txt.value 的结果为真，但每个循环之后的代码仍然执行。这就是为什么我认为这两个值不匹配的原因。但是，如果我在这种情况下发出警报，它就会出现。这意味着每个循环内的“返回”行为有问题。我最近开始明白，虽然 return 会在每个循环内停止执行代码，但它不会阻止代码在每个块之后执行。因此，要在 jquery 的每个循环中实现完整的函数返回，我们似乎必须放置一个标志，并根据该标志决定是否在每个循环之后返回。以下代码对我有用：

```
var shouldContinue = true;
('#mySelect option').each(function ()
{
    if ($(this).val() == txt.value) {
        shouldContinue = false;
        return (false);
    }
});
if (!shouldContinue)
    return; 
```

注意迭代中的 return(false)。这意味着，如果条件为真，则不再继续迭代并退出循环。

# ruby - 使用 Ruby 测试 filepicker.io 的安全性

> ID：13578526
> 
> 赞同：1
> 
> 时间：2012-11-27T06:26:55.287
> 
> 标签：ruby, filepicker.io

我正在尝试构建一个测试，让我可以锻炼 FilePicker.io 的安全性。代码运行为：

```
ruby test.rb [file handle] 
```

结果是我可以附加到 FilePicker URL 的查询字符串。我很确定我的政策得到了正确阅读，但我的签名没有。有人可以告诉我我做错了什么吗？这是代码：

```
require 'rubygems'
require 'base64'
require 'cgi'
require 'openssl'
require 'json'

handle = ARGV[0]
expiry = Time::now.to_i + 3600
policy = {:handle=>handle, :expiry=>expiry, :call=>["pick","read", "stat"]}.to_json
puts policy
puts "\n"
secret = 'SECRET'
encoded_policy = CGI.escape(Base64.encode64(policy))
signature = OpenSSL::HMAC.hexdigest('sha256', secret, encoded_policy)
puts "?signature=#{signature}&policy=#{encoded_policy}" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T01:47:55.297

诀窍是使用 Base64.urlsafe_encode64 而不是 CGI.escape：

```
require 'rubygems'
require 'base64'
require 'cgi'
require 'openssl'
require 'json'

handle = ARGV[0]
expiry = Time::now.to_i + 3600
policy = {:handle=>handle, :expiry=>expiry}.to_json
puts policy
puts "\n"
secret = 'SECRET'
encoded_policy = Base64.urlsafe_encode64(policy)
signature = OpenSSL::HMAC.hexdigest('sha256', secret, encoded_policy)
puts "?signature=#{signature}&policy=#{encoded_policy}" 
```

当使用 Filepicker.io 文档中的到期、句柄和机密的示例值进行测试时，它返回与 python 示例相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:33:09.703

我在我的 Ruby 1.8 环境中通过删除 CGI.escape 和 gsubbing 换行解决了这个问题：

```
 Base64.encode64(policy).gsub("\n","") 
```

十一臂的答案对于 Ruby 1.9 用户来说是最好的，但是你必须为 Ruby 1.8 做一些像上面这样有点笨拙的事情。尽管如此，我还是会接受他的回答，因为这些天我们中的大多数人已经或即将使用 1.9。

# html - 在更高版本的 android 中支持“webworker”

> ID：13578530
> 
> 赞同：0
> 
> 时间：2012-11-27T06:27:34.123
> 
> 标签：html

我在 safari 5.1、iphone 4 以及带有 OS 2.3 的 android 手机上测试了 html5 功能“webworker”。该功能完美运行

但在更高版本的 android OS（浏览器）中不支持“webworker”

如果有人知道答案，请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T08:46:49.633

[答案是否定的，你可以在这里看到网络工作者的所有兼容性我可以使用吗](http://caniuse.com/webworkers)

# java - 在android的Socket通信中写入十六进制字符串

> ID：13578535
> 
> 赞同：0
> 
> 时间：2012-11-27T06:27:50.447
> 
> 标签：java, android, sockets, socket.io

我正在处理套接字连接。我在客户端工作。我已经通过这个讨论[Socket pass value as Hex](https://stackoverflow.com/questions/5546853/socket-pass-value-as-hex)。我需要在服务器上发送字符串，例如（0x01 是一个十六进制值和一个字符串“Ravi”），他们期望像 1 72 61 76 69 这样的十六进制值。我尝试将字符串 Ravi 转换为十六进制值作为字符串并附加“1 " 并尝试转换为字节数组。我收到 StringIndexOutOfBound 异常的异常。

更新：

`public static byte[] hexStringToByteArray(String s) { int len = s.length(); 字节[] 数据 = 新字节[len / 2]; for (int i = 0; i < len; i += 2) { data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 2) + Character.digit (s.charAt(i+1), 16)); } 返回数据；}

```
public String toHex(String arg) {
    return String.format("%x", new BigInteger(arg.getBytes()));
}` 
```

我使用这两种方法将 1Ravi 字符串转换为字节数组，但我得到了异常 hexstringtobytearray 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:36:55.153

试试这个

```
 Socket sock = new Socket("host", port);
    OutputStream out = sock.getOutputStream();
    out.write(0);
String s = "ravi";
    byte[] bytes = s.getBytes("UTF-8");
    out.write(bytes); 
```

# c - C 中的动态分配二维数组与简单的二维数组 Mpi 的区别

> ID：13578548
> 
> 赞同：0
> 
> 时间：2012-11-27T06:28:58.787
> 
> 标签：c, image, dynamic, mpi, allocation

我在 MPI C 中有一个用于图像处理（pgm 文件）的 MPI 程序，我对 2D 数组使用动态分配，如下所示。

```
float **masterbuf;
masterbuf = arralloc(sizeof(float), 2, M, N); 
```

当我使用

```
float masterbuf[M][N]; 
```

该程序提供的图像看起来不错。

问题是当我使用动态分配时，图像在其左侧丢失了一些像素。所以这些缺失的像素会形成一条黑线。就像图像向右移动了 2 个像素。我没有对图像做任何其他操作，只是读取它并再次打印它。

我用来写图像的函数是：

```
void pgmwrite(char *filename, void *vx, int nx, int ny)
{
  FILE *fp;

  int i, j, k, grey;

  float xmin, xmax, tmp, fval;
  float thresh = 255.0;

  float *x = (float *) vx;

  if (NULL == (fp = fopen(filename,"w")))
  {
    fprintf(stderr, "pgmwrite: cannot create <%s>\n", filename);
    exit(-1);
  }

  printf("Writing %d x %d picture into file: %s\n", nx, ny, filename);

  /*
   *  Find the max and min absolute values of the array
   */

  xmin = fabs(x[0]);
  xmax = fabs(x[0]);

  for (i=0; i < nx*ny; i++)
  {
    if (fabs(x[i]) < xmin) xmin = fabs(x[i]);
    if (fabs(x[i]) > xmax) xmax = fabs(x[i]);
  }

  if (xmin == xmax) xmin = xmax-1.0;

  fprintf(fp, "P2\n");
  fprintf(fp, "# Written by pgmwrite\n");
  fprintf(fp, "%d %d\n", nx, ny);
  fprintf(fp, "%d\n", (int) thresh);

  k = 0;

  for (j=ny-1; j >=0 ; j--)
  {
    for (i=0; i < nx; i++)
    {
      /*
       *  Access the value of x[i][j]
       */

      tmp = x[j+ny*i];

      /*
       *  Scale the value appropriately so it lies between 0 and thresh
       */

      fval = thresh*((fabs(tmp)-xmin)/(xmax-xmin))+0.5;
      grey = (int) fval;

      fprintf(fp, "%3d ", grey);

      if (0 == (k+1)%16) fprintf(fp, "\n");

      k++;
    }
  }

  if (0 != k%16) fprintf(fp, "\n");
  fclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:28:51.363

您对 masterbuf 的两个定义可能都创建了 2D 数组，但它们的创建方式不同。函数[arralloc()](https://code.google.com/p/messagepassing/source/browse/trunk/arralloc.c)为数据和指针创建空间——不仅仅是像简单的静态数组定义那样的数据。这意味着在 pgmwrite() 中，无论使用何种方法，x[i][j] 都会返回相同的结果，但由于指针的参与，x[i] 将意味着两个不同的东西。

值得注意的是，如果您将`void *vx`原型更改为`float *vx`. 由于您立即无条件地将这个 void * 转换为 float *，因此无论如何这样做会更好。

(2nd edit:) Also, if interested, check out this [response](https://stackoverflow.com/a/10116675). It shows how to index using two dimensions into a single malloc'd block, without arralloc().

# c++ - 类引用授予对私有成员的访问权限

> ID：13578552
> 
> 赞同：0
> 
> 时间：2012-11-27T06:29:22.373
> 
> 标签：c++, templates, private-members

我正在写一个轻松“打开”模式的课程，然后我有点困惑。在重载 operator= 从另一个类复制时，授予对私有`T`成员`m_Mode`的访问权限，为什么会发生这种情况？它是标准的，还是编译器错误？

```
template<class T>
class CFixedMode
{
private:
    T m_Mode;
public:
    CFixedMode()
    {
        m_Mode = static_cast<T>(0);
    }
    ~CFixedMode(){}
    void            SetMode( T mode );
    void            SetNotMode( T mode );
    BOOL            IsMode( T mode );
    CFixedMode<T>&              operator=( const CFixedMode< T >& rFixedMode );
};

template<class T>void CFixedMode<T>::SetMode( T mode )
{
    m_Mode |= mode;
}
template<class T>void CFixedMode<T>::SetNotMode( T mode )
{
    m_Mode &= (~mode);
}
template<class T>BOOL CFixedMode<T>::IsMode( T mode )
{
    return ( ( m_Mode & mode ) == mode ) ? TRUE : FALSE;
}
template<class T>CFixedMode<T>& CFixedMode<T>::operator =( const CFixedMode<T>& rFixedMode )
{
    if( typeid( m_Mode ) == typeid( rFixedMode.m_Mode ) )
        m_Mode = rFixedMode.m_Mode;
    return *this;
}

int _tmain(int argc, _TCHAR* argv[])
{
    CFixedMode<DWORD> Mode;
    DWORD rMode = 0x00000010;
    Mode.SetMode( rMode );

    CFixedMode<DWORD> Mode2;
    Mode2 = Mode;
    if( Mode2.IsMode( 0x00000010 ) )
    {
        //cout << Mode2.m_Mode; //c2248
        cout << "True" << endl;
    }

    typeid(Mode).before(typeid(CFixedMode<DWORD>));

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:32:59.137

Private 意味着它是私有的*class*，而不是 class 的*实例*。私有用于隐藏实现细节，因此相同类型的对象可以访问其他对象的私有成员是有意义的。那些其他对象具有相同的实现，因此隐藏细节没有意义。

顺便说一句，您的 operator= 应该检查自分配。（或者，正如 Chris 指出的那样，您可以使用复制和交换习惯用法。）而且，您不需要使用 typeid 检查类型。

# ruby - 将电子表格列索引转换为字符序列

> ID：13578555
> 
> 赞同：1
> 
> 时间：2012-11-27T06:29:41.010
> 
> 标签：ruby, spreadsheet

如何获取字符序列，例如`"AA"`从列索引`26`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T06:41:12.573

这是一个将为您处理索引的递归哈希：

```
index_hash = Hash.new {|hash,key| hash[key] = hash[key - 1].next }.merge({0 => "A"})
index_hash[26] #=> "AA" 
```

这里的关键是`.next`方法，当发送到字符串时，将返回按字母顺序排列的字符串，例如`"CD".next #=> "CE"`.

你能澄清你的第一个问题吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:18:22.840

```
class Numeric
  Alph = ("A".."Z").to_a
  def alph
    s, q = "", self
    (q, r = (q - 1).divmod(26)) && s.prepend(Alph[r]) until q.zero?
    s
  end
end

(26+1).alph #=> "AA" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-13T12:20:08.540

```
c = "A"
26.times { c = c.next }
c # => "AA" 
```

# java - 使用 Tomcat 服务器缓存数据

> ID：13578559
> 
> 赞同：0
> 
> 时间：2012-11-27T06:30:13.787
> 
> 标签：java, mysql, tomcat7

我有关于 Tomcat 服务器和 MySQL 服务器的问题。

有时无法从 Mysql 服务器获取数据。尽管数据库有很多数据。
当我关闭 Tomcat 服务器和启动 Tomcat 服务器时。一切都变得正常。我想也许原因是 Tomcat 服务器的缓存，但我不确定。

如果你知道，请为我解释。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:36:04.163

Tomcat 可能正在为您的数据库创建连接池。并且可能是您的应用程序在使用后没有关闭与数据库的连接。如果是这种情况，那么在进行一些数据库操作后，您将无法从应用程序连接到数据库。检查您的应用程序正在关闭与数据库的连接。重新启动 tomcat 将关闭从您的应用程序到数据库的连接。重启tomcat不是解决办法。确保您的应用程序在使用后关闭与数据库的连接

# php - 如何使用 NORMDIST(x, mean, standard_dev, accumulative) 在 PHP 中计算与 Excel 结果完全匹配的正态分布

> ID：13578563
> 
> 赞同：1
> 
> 时间：2012-11-27T06:30:21.100
> 
> 标签：php, normal-distribution

> **可能重复：**
> [将均匀分布转换为正态分布](https://stackoverflow.com/questions/75677/converting-a-uniform-distribution-to-a-normal-distribution)

我需要使用 Excel 正态分布函数在 PHP 中计算与结果匹配的正态分布`NORMDIST(x, mean, standard_dev, accumulative)`

我尝试了几种方法，但无法根据`NORMDIST(x, mean, standard_dev, accumulative)`具有以下输入值的 Excel 公式获得正确的结果，即 0.513：

```
Z=65, mean=64.43, standard_dev=18.76, accumulative=1 
```

结果应该是`0.513`

请问有什么帮助吗？

# c++ - 为类中的静态变量动态分配内存

> ID：13578571
> 
> 赞同：0
> 
> 时间：2012-11-27T06:31:02.010
> 
> 标签：c++

我有一个关于如何为类中的静态变量动态分配内存的问题。考虑这个例子

```
class my_class {
    static int *ptr_to_int;
    // Don't care 
}; 
```

如何为 ptr_to_int 分配内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:33:10.200

在单个实现文件中：

```
int* my_class::ptr_to_int = new int; 
```

但是**为什么**？你**真的**需要指针吗？只是有什么问题

```
class my_class {
    static int actual_int;
    // Don't care 
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:56:52.673

此处的类名仅用作您的目的的范围名称。只需使用 my_class::ptr_to_int 作为静态指针。

# php - 刷新 div，但前提是 php 文件中有新内容

> ID：13578579
> 
> 赞同：6
> 
> 时间：2012-11-27T06:31:38.780
> 
> 标签：php, jquery, mysql, ajax, html

**背景信息**

我现在正在摆弄一些 PHP 和 AJAX，试图让代码为包含注释的自动刷新 div（每 10 秒）工作。

这是我用来刷新 div 的 javascript 代码。

```
<script type="text/javascript">// <![CDATA[
$(document).ready(function() {
        $.ajaxSetup({ cache: false }); 
            setInterval(function() {
                    $('#content_main').load('/feed_main.php');
        }, 5000);  
});
// ]]></script> 
```

将填充名为“content_main”的 div 的代码位于 feed_main.php 中，本质上是访问数据库并回显最新的评论......

**问题**

如果其中的数据自上次加载以来没有更改，是否可以仅加载 div“content_main”？

**我的逻辑**

因为我对 javascript 和 AJAX 比较陌生，所以我不太清楚如何做到这一点，但我的逻辑是：

第一次运行..

*   从 feed_main.php 文件加载数据
*   创建一个唯一值（可能是哈希值？）来识别 3 个唯一评论

每隔一段时间就运行一次...

*   从 feed_main.php 文件加载数据
*   创造新的独特价值
*   用前一个值检查这个值
*   如果它们相同，请不要刷新 div，只需保持原样，但如果它们不同，则刷新..

之所以要这么做，是因为评论里一般都附有图片，而且每次看到图片都重新加载很烦人。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T06:35:39.837

不久前我遇到过类似的问题，我假设您使用 mysql 或其他东西作为您的评论存储服务器端？

我通过首先将时间戳整数列添加到我的 mysql 表来解决我的问题，然后当我添加一个新行时，我只是`time()`用来保存当前时间。

mysql 行插入示例：

```
$query = "INSERT INTO comments (name, text, timestamp) VALUES ('". $name ."', '". $text ."',". time() .");"; 
```

第二步是对您从服务器端发送的数据进行 json_encode：

```
$output = array();

if ($html && $html !== '') {   // do we have any script output ?
  $output['payload'] = $html;  // your current script output would go in this variable
}
$output['time'] = time();      // so we know when did we last check for payload update

$json = json_encode($output, ((int)JSON_NUMERIC_CHECK)); // jsonify the array
echo $json;                    // send it to the client 
```

因此，现在您的服务器端脚本不再是纯 html，而是返回如下内容：

```
{
  "payload":"<div class=\"name\">Derpin<\/div><div class=\"msg\">Foo Bar!<\/div>",
  "time":1354167493
} 
```

您可以简单地在 javascript 中获取数据：

```
<script type="text/javascript"> // <![CDATA[

var lastcheck;
var content_main = $('#content_main');

pollTimer = setInterval(function() {
  updateJson();
}, 10000);

function updateJson() {
  var request = '/feed_main.php?timestamp='+ (lastcheck ? lastcheck : 0);

  $.ajax({
    url: request,
    dataType: 'json',
    async: false,
    cache: false,
    success: function(result) {
      if (result.payload) {        // new data
        lastcheck = result.time;   // update stored timestamp
        content_main.html(result.payload + content_main.html()); // update html element
      } else {                     // no new data, update only timestamp
        lastcheck = result.time;
      }
    }
  });
}

// ]]> </script> 
```

这几乎可以处理服务器和客户端之间的通信，现在您只需像这样查询数据库：

```
$timestamp = 0;
$where = '';

if (isset($_GET['timestamp'])) {
  $timestamp = your_arg_sanitizer($_GET['timestamp']);
}

if ($timestamp) {
  $where = ' WHERE timestamp >= '.$timestamp;
}

$query = 'SELECT * FROM comments'. $where .' ORDER BY timestamp DESC;'; 
```

时间戳来回传递，客户端始终发送服务器在先前查询中返回的时间戳。

您的服务器仅发送自您上次检查以来提交的评论，您可以像我一样将它们添加到 html 的末尾。（警告：我没有添加任何理智控制，您的评论可能会变得非常长）

由于您每 10 秒轮询一次新数据，您可能需要考虑通过 ajax 调用发送纯数据以节省大量的块带宽（其中只有时间戳的 json 字符串，只有大约 20 个字节）。

然后，您可以使用 javascript 生成 html，它还具有将大量工作从服务器卸载到客户端的优势:)。您还可以更好地控制一次要显示多少评论。

* * *

我做了一些相当大的假设，你必须修改代码以满足你的需要。如果你使用我的代码，而你的 cat|computer|house 碰巧爆炸了，你可以保留所有的碎片 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T08:05:04.400

这个怎么样：

```
<script type="text/javascript">
    // <![CDATA[
    $(function () {

        function reload (elem, interval) {
            var $elem = $(elem);
            // grab the original html
            var $original = $elem.html();
            $.ajax({
                cache : false,
                url : '/feed_main.php',
                type : 'get',
                success : function (data) {
                    // compare the result to the original
                    if ($original == data) {
                        // just start the timer if the data is the same
                        setTimeout(function () {
                            reload(elem, interval)
                        }, interval);
                        return;
                    }
                    // or update the html with new data
                    $elem.html(data);
                    // and start the timer
                    setTimeout(function () {
                        reload(elem, interval)
                    }, interval);
                }
            });
        }

        // call it the first time
        reload('#content_main', 10000);
    });
    // ]]>
</script> 
```

这只是一个让你继续前进的想法，它不处理错误或超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-05T08:00:28.170

最简单的代码

```
setInterval(function()
    { 
        $.ajax({
          type:"post",
          url:"uourpage.php",
          datatype:"html",
          success:function(data)
          {
            $("#div").html(data);
          }
        });
    }, 5000);//time in milliseconds 
```

# c++ - C++ 验证 - 截断设置为下一个输入

> ID：13578584
> 
> 赞同：1
> 
> 时间：2012-11-27T06:31:53.833
> 
> 标签：c++, validation, user-input, iostream, truncation

我一直遇到这个问题，我试图验证用户输入，但我发现自己在整个程序中使用了大量的 ignores()。由于这是一个**学校课程**，我只限于**iostream** **、** cctype**和**student.h**库**。问题是我需要确保用户不会尝试将字母字符输入到我认为已涵盖的整数字段中`if(!(cin >> val))`，然后我使用`cin.ignore(numeric_limits<streamsize>::max(), '\n');`忽略任何额外的内容（例如，如果他们尝试在整数字段中输入小数）。有些东西不能正常工作，因为我要么无法输入名称字段，要么我得到剩余的小数作为名称（如果我输入 123.6，名称将为 0.6）。有人知道比使用质量忽略更好的方法来验证整数吗？

**主要的**

```
#include <iostream>
using namespace std;
#include "student.h"
//**************************************************************************
bool validInt(int&);
//**************************************************************************
int main()
{
    Student student;
    bool validInput;

    cout << "You have Chosen to Add a New Student." << endl;
    cout << "---------------------------------------" << endl;

    // Student ID Validation
    do
    {
        cout << "Enter Student ID (ex. 123): ";
        validInput = validInt(student.id);
    }while(!validInput);

    cout << "Enter Student Name (ex. John Doe): ";
    cin.getline(student.name, 50);

    cout << "Enter Student City and State (ex. St. Louis, Missouri): ";
    cin.getline(student.citystate, 50);

    cout << "\n\nStudent ID: " << student.id << endl;
    cout << "Student Name: " << student.name << endl;
    cout << "Student City / State: " << student.citystate << endl;

    return 0;
}
//**************************************************************************
bool validInt(int& val)
{
    bool valid = true;
    if(!(cin >> val))
    {
        cout << "\nERROR: Please enter a Positive Whole Number" << endl;
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
        valid = false;
    }
    return valid;
} 
```

**学生页眉**

```
#ifndef STUDENT_H
#define STUDENT_H
//**************************************************************************
struct Student
{
    int id;
    char name[50];
    char citystate[50];

    friend ostream& operator<<(ostream& out, const Student& data);

    bool operator == (const Student &rhs) const;
    bool operator != (const Student &rhs) const;
    bool operator < (const Student &rhs) const;
    bool operator > (const Student &rhs) const;
    bool operator <= (const Student &rhs) const;
    bool operator >= (const Student &rhs) const;
};
//**************************************************************************
ostream& operator << (ostream& out, const Student& data)
{
    out << data.id << " " << data.name << endl;
    return out;
}
//**************************************************************************
bool Student::operator == (const Student &rhs) const
{
    return (this->id == rhs.id);
}
//**************************************************************************
bool Student::operator != (const Student &rhs) const
{
    return (this->id != rhs.id);
}
//**************************************************************************
bool Student::operator < (const Student &rhs) const
{
    return (this->id < rhs.id);
}
//**************************************************************************
bool Student::operator > (const Student &rhs) const
{
    return (this->id > rhs.id);
}
//**************************************************************************
bool Student::operator <= (const Student &rhs) const
{
    return (this->id <= rhs.id);
}
//**************************************************************************
bool Student::operator >= (const Student &rhs) const
{
    return (this->id >= rhs.id);
}
#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:31:51.523

通常您会使用`std::getline(std::string&,std::istream&)`面向行的输入并使用`istringstream`. 但是，由于您既不允许使用也`std::string`不允许`std::stringstream`您自己解析整数。

但首先要解释你的错误。

### 解释

> 某些东西无法正常工作，因为我无法输入名称字段

当您输入正确的整数时，不会从字符串中提取换行符`\n`，这就是为什么`cin.getline(student.name, 50);`不会提取任何内容的原因：下一个字符`std::cin`是`\n`，行结束并用提取行`std::getline`填充`student.name`，这是空的。

> 或者我得到剩余的小数作为名称（如果我输入 123.6，名称将是 0.6）。

同样，这是相同的：您只提取整数，但不提取该行的其余部分。

### 临时解决方案

忽略你的行的其余部分`validInt`：

```
bool validInt(int& val)
{
    bool valid = true;
    if(!(cin >> val))
    {
        cout << "\nERROR: Please enter a Positive Whole Number" << endl;
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
        valid = false;
    }
    cin.ignore(numeric_limits<streamsize>::max(), '\n');
    return valid;
} 
```

### 正确的解决方案

正确的解决方案稍微复杂一点，因为您必须编写一些提取单个字符的东西，检查它们是否是数字（或减号或加号），将它们保存为整数并忽略该行的其余部分。别担心，这只有通过`<iostream>`

# yii - 在 yii 中如何创建密码重置功能

> ID：13578587
> 
> 赞同：-1
> 
> 时间：2012-11-27T06:31:56.173
> 
> 标签：yii, change-password

在 yii 中，我正在创建重置新密码功能。为此，用户需要输入他在注册期间输入的主要电子邮件 ID。在该服务器将验证此电子邮件 ID 并将安全问题发送给他之后。用户将输入该安全问题的答案。在服务器端，此答案的验证将从数据库中完成。如果找到匹配，密码重置链接将被发送到该主电子邮件 ID。那么如何在 yii 框架中实现这个功能。请帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:54:02.917

你像这样实现这个东西：

1.  创建一个密码更改页面，其中包含用于提交电子邮件 ID 的文本字段。
2.  用户提交电子邮件后，通过ajax检查数据库中是否存在电子邮件，并更新同一页面，或者，如果电子邮件不存在，则将他重定向到同一页面，否则重定向到另一个页面询问安全问题，当用户提交答案时，检查是否答案是否正确，如果正确，请给他发送带有更改密码页面链接的邮件。

要检查电子邮件是否正确，您可以执行以下查询：

```
 mysql_query(SELECT email FROM user WHERE email = "$email"); 
```

`$email`用户提交的电子邮件在哪里。

如果它返回 1 则电子邮件存在，否则找不到电子邮件。

同样可以应用于答案检查。

谢谢。

# windows-8 - 在 Windows 8 中解析 JSON 响应时出错

> ID：13578589
> 
> 赞同：0
> 
> 时间：2012-11-27T06:32:20.337
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-xaml, winrt-async

以下代码在语句中引发错误：

```
Result res = (Result)stdserialize.ReadObject(ms); 
```

错误是：反序列化 TrackLocation.MainPage+Result 类型的对象时出错。应来自命名空间“”的结束元素“类型”。从命名空间“”中找到元素“项目”。

```
HttpClient gClientRequest = new HttpClient();
System.Uri gURI = new Uri("http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true");
HttpResponseMessage gResponse = await gClientRequest.GetAsync(gURI);
string   strStream = await gResponse.Content.ReadAsStringAsync();
MemoryStream ms = new MemoryStream(Encoding.Unicode.GetBytes(strStream));
DataContractJsonSerializer stdserialize = new DataContractJsonSerializer(typeof(Result));
Result res = (Result)stdserialize.ReadObject(ms); 
```

//############################################### ##############################################

```
[DataContract]
public class Address
{
    [DataMember(Name = "long_name")]
    public string address1;
    [DataMember(Name = "short_name")]
    public string shortaddress;
    [DataMember(Name = "formatted_address")]
    public string formattedtaddress;
    [DataMember(Name = "lat")]
    public string latitude;
    [DataMember(Name = "long")]
    public string latitude;
}
//###############################################################################################

[DataContract]
    public class Result
    {           

        [DataMember(Name = "results")]
        public Address[] Results { get; set; }

        [DataMember(Name = "status")]
        public string Status { get; set; }
    }

    [DataContract]
    public class Address
    {
        [DataMember(Name = "formatted_address")]
        public string FormattedAddress;

        [DataMember(Name = "address_components")]
        public AddressComponent[] AddressComponents;
    }

    [DataContract]
    public class AddressComponent
    {
        [DataMember(Name = "long_name")]
        public string LongName;

        [DataMember(Name = "short_name")]
        public string ShortName;

        [DataMember(Name = "types")]
        public string Types;
    } 
```

任何想法如何解决这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:41:08.600

仔细看看 JSON，你的`Type`字段`AddressComponent`应该`string[]`不是`string`.

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "285",
               "short_name" : "285",
               "types" : [ "street_number" ]
            }, 
```

此外，您似乎有两个`Address`类和一个`result`（小写）和`Result`（大写）类；我假设这些是剪切和粘贴问题，因为它们似乎与返回的 JSON 不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:19:26.353

我刚刚将 JSON 转换为 XMl 并发现要重复的类型（检查下面的屏幕截图）但在您的数据合同中它的 [DataMember(Name = "types")] public string Types;

把它当作

```
 [DataMember(Name = "types")]
        public string[] Types; 
```

它应该可以工作 ![截屏](../Images/4bac948896c7c5aa4839e8a605ea63e9.png)

# java - 有没有办法以编程方式启动数据存储备份？

> ID：13578590
> 
> 赞同：1
> 
> 时间：2012-11-27T06:32:24.693
> 
> 标签：java, google-app-engine, google-cloud-storage, google-cloud-datastore, database-backups

有没有办法以编程方式启动数据存储备份？

请注意，我想备份到谷歌云存储而不是本地主机，并且我正在使用 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:10:02.280

我发现了一些有用的东西，可以使用 google auth cookie 调用下面的链接来启动备份任务。

```
https://ah-builtin-python-bundle.Your_App_Name.appspot.com/_ah/datastore_admin/backup.create?name=BackupToCloud&kind=SOME_KIND&filesystem=gs&gs_bucket_name=SOME_NAME 
```

此 API 的详细信息在[这里](https://developers.google.com/appengine/articles/scheduled_backups)

[在此处](http://krasserm.blogspot.com/2010/01/accessing-security-enabled-google-app.html)获取 cookie 的详细信息

# python - 如何用pypy创建virtualenv？

> ID：13578593
> 
> 赞同：34
> 
> 时间：2012-11-27T06:32:28.840
> 
> 标签：python, virtualenv, pypy

运行以下命令

```
virtualenv -p /usr/local/bin/pypy pypy 
```

退出时出现错误，例如

```
Running virtualenv with interpreter /usr/local/bin/pypy
New pypy executable in pypy/bin/pypy
debug: WARNING: Library path not found, using compiled-in sys.path.
debug: WARNING: 'sys.prefix' will not be set.
debug: WARNING: Make sure the pypy binary is kept inside its tree of files.
debug: WARNING: It is ok to create a symlink to it from somewhere else.
'import site' failed
AttributeError: 'module' object has no attribute 'prefix'
ERROR: The executable pypy/bin/pypy is not functioning
ERROR: It thinks sys.prefix is u'/Users/myname' (should be u'/Users/myname/pypy')
ERROR: virtualenv is not compatible with this system or executable 
```

我正在使用 CPython 2.7.3 运行 Mac OS X 10.8.1 (Mountain Lion)，并使用 Brew 安装了 pypy 1.9。virtualenv 的版本是 1.8.4

使用直接从 pypy 网站下载的 Mac OS X 的预构建 pypy 二进制文件没有任何区别

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-27T06:54:59.390

这似乎是 1.8.4 中的回归。在我的系统上尝试这个时，virtualenv 1.8.2 一切正常，然后我升级了，现在我得到了和你一样的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T18:41:15.230

我在使用 virtualenv 1.8.2 的 Windows 上遇到了同样的错误。1.9 和 1.10 也存在类似问题。对我有用的是运行一次以创建目录，复制丢失的文件，然后再次运行以完成它。

```
virtualenv -p c:\bin\pypy\pypy.exe pypy
copy c:\bin\pypy\lib_pypy \virtualenvs\pypy
copy c:\bin\pypy\lib-python \virtualenvs\pypy
virtualenv -p c:\bin\pypy\pypy.exe pypy 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-28T07:12:31.163

这`windows`对我有用：

```
 python -m virtualenv -p <Your PYPY installed path\pypy3.exe> <venv_name> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-31T04:47:25.067

使用 pypy-4.0.1 和 virtualenv 14.0.3，开箱即用我得到一个错误：

```
Q:\>c:\pypy\bin\virtualenv -p c:\pypy\pypy.exe my_pypy_virtualenv
Already using interpreter c:\pypy\pypy.exe
New pypy executable in Q:\my_pypy_virtualenv\bin\pypy.exe
debug: OperationError:
debug:  operror-type: ImportError
debug:  operror-value: No module named UserDict
ERROR: The executable Q:\my_pypy_virtualenv\bin\pypy.exe is not functioning
ERROR: It thinks sys.prefix is u'q:\\' (should be u'q:\\my_pypy_virtualenv')
ERROR: virtualenv is not compatible with this system or executable
Note: some Windows users have reported this error when they installed Python for "Only this user" or have multiple versions of Python installed. Copying the appropriate PythonXX.dll to the virtualenv Scripts/ directory may fix this problem. 
```

在原始 pypy install 中搜索`UserDict*`，我发现但`UserDict.py`在`lib-python\2.7`virtualenv`lib-python\2.7`中只有大写文件`userdict.py`，没有大写`User`文件。按照其他解决方案的示例，我删除了virtualenv`userdict.py`并复制了原始`User*`文件，然后重新运行`virtualenv`命令，它运行没有错误。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-07-26T08:02:53.707

我得到了解决方案只需使用 pypy3.exe 而不是 pypy.exe 下载的文件夹中有两个 .exe

```
virtualenv -p C:/pypy3.7-v7.3.5-win64/pypy3.7-v7.3.5-win64/pypy3w.exe <folder_name> 
```

默认情况下，python 带有 venv。但是venv没有 -p 使用pip安装virtualenv 然后直接使用virtualenv -p path/pypy3.exe <folder_name> 不需要使用python -m

# android - 连接丢失或恢复时如何通知用户？

> ID：13578598
> 
> 赞同：0
> 
> 时间：2012-11-27T06:32:51.040
> 
> 标签：android, connectivity

我的应用程序必须经常更新服务器，因此，我使用 ConnectivityManager 和 NetworkInfo 每 3 分钟运行一次检查设备是否在覆盖区域内的服务。它工作正常......我的疑问是，当连接丢失或恢复时如何通知用户？如果有一个选项可以在重新连接时自动进行更新，那就太好了！！！提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:39:19.397

您可以使用处理程序向用户显示 toast 消息

您可以通过接口类将服务通知到活动。

您还可以使用广播接收器，因此当连接丢失时，您可以通过注册在应用程序中接收广播并相应地显示 toast 消息。

我建议您使用带有处理程序的服务。有关处理程序的更多信息，请查看链接。 [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# android - 在 Android 上通过 Spinner 值选择 Spinner onItemChange

> ID：13578602
> 
> 赞同：0
> 
> 时间：2012-11-27T06:33:01.607
> 
> 标签：android, android-spinner

我有两个旋转器。我正在从服务器接收信息并将其显示在第一个微调器中。我的疑问是“第二个微调器应该根据第一个微调器值的选择自动更改”。我怎样才能做到这一点？我为此浪费了 2 天时间。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:00:58.457

您对问题的解释并不十分慷慨。以下内容应该可以帮助您解决可能遇到的问题。

```
spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View v,
                int position, long id) {
            spinner2.setSelection(position);
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });
  } 
```

# r - 当函数不将序列作为参数时，难以在序列上应用函数

> ID：13578603
> 
> 赞同：2
> 
> 时间：2012-11-27T06:33:07.857
> 
> 标签：r

当函数不将序列作为参数并且函数使用从函数本身返回的值作为序列的前一个值时，难以在序列上应用函数。

我有以下问题。在我的 main 方法 function`mainn`中，我将首先初始化`fa`, `mu.a`, `mu.b`, `sigma`，然后将其用作函数中的`step2`参数。（请注意，我很确定我的`px.q4`和在返回一个值并返回 3 个值`step2`的意义上工作正常/正确）`px.q4``step2`

这就是我的问题所在。我想`step2`对一个序列执行应用，并且每次它应用于序列（第一次迭代除外）时，该`step2`函数将**不使用初始值**`fa.iter`，而是使用前一个`mu.a.iter`,的值。这可以在R中完成吗？还是我必须为这类问题使用 for 循环`mu.b.iter``step2`

我能够使用 for 循环来做到这一点。但是，我想了解有关 R 的更多信息。是否有一个（更有效的）特定命令可以用来解决这个问题？

```
#this function returns a value    
px.q4 <- function(fa, mu.a, mu.b,sigma)
{   
  v <- fa + mu.a + mu.b * sigma
  v
}

#this function returns 3 values, fa.iter, mu.a.iter, and mu.b.iter
#for completeness I include the full code of what i am trying to do. 
#But all you need to know is that the function step2 returns 3 values .
step2 <- function(fa, mu.a, mu.b)
{

  #set prev = iter values // this also allow set initial values = prev in 
  #the 1st iteration
  mu.a.prev <- mu.a.iter
  mu.b.prev <- mu.b.iter
  fa.prev <- fa.iter

  #draw a trail point x.trail from propsal distribution ~ N(x_i-1,0.1)
  mu.a.trail <- rnorm(1, mu.a.prev, 0.1)
  mu.b.trail <- rnorm(1, mu.b.prev, 0.1)
  fa.trail <- rnorm(1, fa.prev, 0.1)
  while(fa.trail < 0 || fa.trail > 1)         
  {
    fa.trail <- rnorm(1, fa.prev, sigma)
  }
  #if p(x_trail) >= p(x_i-1) set x_i = x_trail
  a <- px.q4(fa.trail, mu.a.trail, mu.b.trail, sigma) 
  b <- px.q4(fa.prev ,mu.a.prev , mu.b.prev,sigma)
  if(a >= b)
  {
    mu.a.iter <- mu.a.trail
    mu.b.iter <- mu.b.trail
    fa.iter <- fa.trail
  }else{
    r <- runif(1,min = 0, max = 1)
    if(r < a/b){
      mu.a.iter <- mu.a.trail
      mu.b.iter <- mu.b.trail
      fa.iter <- fa.trail
    }else{
      mu.a.iter <- mu.a.prev
      mu.b.iter <- mu.b.prev
      fa.iter <- fa.prev
    }
  }

  res <-  list(mu.a.iter,  mu.b.iter,  fa.iter)
  res
}
#main body

mainn <- function(n,fa,mu.a,mu.b)
{
  sigma <- 0.3
  mu.a.init <- mu.a               #initial values 
  mu.b.init <- mu.b
  fa.init <- fa           #(must be between 0 and 1)

  #set initial values = iter values (for entering for loop)
  mu.a.iter <- mu.a.init
  mu.b.iter <- mu.b.init
  fa.iter <- fa.init

  #where to the logical flaw comes in and how can I overcome it
    y <- sapply(n,FUN = step2)

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:28:04.113

您可以使用`Reduce`在列表上递归地应用函数：例如，

```
Reduce(`+`, 1:10, accumulate=TRUE) 
```

相当于`cumsum(1:10)`。

在您的情况下，您不是在列表上应用该函数，而只是对其进行迭代：`Reduce`如果您忽略第二个参数，您仍然可以使用。

```
# It is easier if your function takes a vector and returns a vector.
# The second argument is ignored.
step2 <- function(x, u) cumsum(x) + rnorm(length(x))
r <- Reduce(step2, 1:100, init=c(0,0,0), accumulate = TRUE) 
```

但是使用循环并没有错：它不应该明显变慢，除非你的函数非常快。

# python - 如何在 django 中访问 as_view 中传递的变量

> ID：13578605
> 
> 赞同：0
> 
> 时间：2012-11-27T06:33:09.980
> 
> 标签：python, django, view

我正在编辑现有项目，我是 django 的新手。这是写在 url 文件中的

```
url(r'^test/$', views.MyUpdate.as_view(model=models.User,
        form_class=forms.UserForm), name='user_update'), 
```

现在我想知道如何在我的视图中访问这些变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:38:30.107

您可以使用获取表单，`self.get_form().__class__`并且应该能够使用 获取模型`self.get_object().__class__`。

显然要获取表单实例或模型实例，只需使用`self.get_form()`or `self.get_object()`。

如果您希望通过 url 将参数传递给视图，您可以将其`self.args[0]`用于位置参数和`self.kwargs['my_kwarg']`关键字参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:16:26.993

[https://docs.djangoproject.com/en/dev/topics/class-based-views/](https://docs.djangoproject.com/en/dev/topics/class-based-views/)

```
Any arguments passed to as_view() will override attributes set on the class. 
```

UpdateView 的类属性

[http://ccbv.co.uk/projects/Django/1.4/django.views.generic.edit/UpdateView/](http://ccbv.co.uk/projects/Django/1.4/django.views.generic.edit/UpdateView/)

```
form_class = None   
http_method_names = ['get', 'post', 'put', 'delete', 'head', 'options', 'trace']
initial = {}    
model = None 
```

基本上你正在覆盖这些属性，因此它们会自动填充

# programming-languages - 显式堆动态变量

> ID：13578606
> 
> 赞同：-1
> 
> 时间：2012-11-27T06:33:14.877
> 
> 标签：programming-languages

什么是显式堆动态变量，它们中的绑定属性是如何实现的？（不适用于我想了解这些变量的整体功能的特定语言）。我才知道它们在运行时是绑定的，这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:47:29.020

显式堆动态变量是由程序员编写的显式运行时指令分配和释放的无名内存单元。这些从堆分配和释放到堆的变量只能通过指针或引用变量来引用。

# version-control - 在 Perforce Visual Client 中搜索

> ID：13578607
> 
> 赞同：1
> 
> 时间：2012-11-27T06:33:16.203
> 
> 标签：version-control, perforce, configuration-management, perforce-client-spec

我是 perforce Visual Client 的新手，我无法找出一个非常基本的实用程序。我想在我的工作区中搜索包含某些特定单词的文件。我发现在 Edit --> Find in File ---> 有两个选项 Search in: 和 All or part of the file name:。但是我在哪里设置我只想搜索包含特定单词的文件的过滤器？我认为 Perforce Visual Client 应该在某个地方有这个基本实用程序，但也许我错过了它。请帮我找到这个选项。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T22:21:34.417

Perforce 可视化客户端不包含用于搜索具有特定内容的文件的工具。您可以使用命令行：

```
p4 grep -e compile_settings //Jam/MAIN/src/... 
```

检查[http://www.perforce.com/blog/100712/p4-grep](http://www.perforce.com/blog/100712/p4-grep)

# ms-access - 我们可以在 ms access 数据库中存储超过 65,535 个字符吗？

> ID：13578609
> 
> 赞同：1
> 
> 时间：2012-11-27T06:33:48.720
> 
> 标签：ms-access

我正在将一个字符串保存到 ms 访问数据库，memo 是该字段的数据类型。我的字符串将有超过 65,535 个字符，但备忘录只能保存 65,535 个字符。是否有任何数据类型/方法可以在 ms access 数据库中保存超过 65,535 个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:04:16.457

您可以将字符串保存在 txt 文件中，并将链接保存到数据库中的文件位置。当然你不能从数据库中查询文本，但是txt文件本身可以通过VBA中的代码查询。

第二个选项是将文件保存为数据库中的 OLE 对象。尽管如此，它与上面并没有太大的不同。你仍然无法查询它。

希望能帮助到你。

# c# - ASP.NET MVC 4 - 发布时设置日期时间？

> ID：13578615
> 
> 赞同：0
> 
> 时间：2012-11-27T06:34:02.367
> 
> 标签：c#, asp.net-mvc, datetime

我正在尝试学习 ASP.NET MVC 4，所以我正在尝试制作一个博客来帮助我学习。我似乎无法设置发布时的日期时间，它只是使用当前时间。

这是我的博客模型的代码

```
public class BlogPost
{
    public int ID { get; set; }
    public string Title { get; set; }
    [DataType(DataType.MultilineText)]
    public string Content { get; set; }
    public DateTime DateTimePosted { get; set; }
    public string Author { get; set; }
    public List<Comment> Comments { get; set; }

    public BlogPost()
    { }

    public BlogPost(int id, string title, string content, string author)
    {
        this.ID = id;
        this.Title = title;
        this.Content = content;
        this.DateTimePosted = DateTime.Now;
        this.Author = author;
    }

}

public class BlogPostDBContext : DbContext
{
    public BlogPostDBContext()
        : base("DefaultConnection")
    { }

    public DbSet<BlogPost> BlogPosts { get; set; }
} 
```

如何更改它以存储发布日期时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:56:37.783

您可以在网站上的 UI 中添加其他字段。并在那里设置自定义日期。只需将此字段添加到您的构造函数和参数中。如果您不想学习如何在请求中正确发送日期，您可以将日期作为字符串发送，然后将其转换为 DateTime`Convert.ToDateTime(customDateString)`

```
public class BlogPost
{
    public int ID { get; set; }
    public string Title { get; set; }
    [DataType(DataType.MultilineText)]
    public string Content { get; set; }
    public DateTime DateTimePosted { get; set; }
    public string Author { get; set; }
    public List<Comment> Comments { get; set; }
    public DateTime? CustomDate { get; set; }

    public BlogPost()
    { }

    public BlogPost(int id, string title, string content, string author, DateTime? customDate)
    {
        this.ID = id;
        this.Title = title;
        this.Content = content;
        this.DateTimePosted = customDate ?? DateTime.Now;
        this.Author = author;
    }

} 
```

在上面的构造函数中，如果您设置 customDate 它将被设置为 post datetime，如果没有，将设置当前 datetime。

# java - html、jsp、javascript

> ID：13578616
> 
> 赞同：0
> 
> 时间：2012-11-27T06:34:03.230
> 
> 标签：java, jsp

我有三个 jsp，，，，`GetAllEmployee`现在我必须在一个 jsp 中编写代码，`EmployeeFindByid`当用户单击新的弹出窗口打开并在单击后要求 id提交按钮输出应该填充在 index.jsp 中我已经完成了m 卡在部分中，因为当用户单击按钮时，我必须将这些写在一个 jsp 页面中，应该打开一个弹出窗口并取值然后弹出窗口应该会自动关闭。我无法提供如何执行一个 jsp 的特定代码部分的条件，这是我的 servlet 包；`EmployeeFindByName``EmployeeFindById``EmployeeFindByName``employeeFindbyid``GetAllEmployeei``EmployeeFindByid``EmployeeFindByName``com.nousinfo.tutorial`

```
import java.io.IOException;

import java.io.PrintWriter;
import java.util.List;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.nousinfo.tutorial.employee.service.model.bo.EmployeeBO;
import com.nousinfo.tutorial.service.bo.EmployeeService;
import com.nousinfo.tutorial.service.bo.impl.EmployeeServiceImpl;
import com.nousinfo.tutorial.service.exception.EmployeeServiceBOException;
import com.nousinfo.tutorial.service.exception.EmployeeServiceException;

/**
 * Servlet implementation class GetEmployee
 */
public class GetEmployee extends HttpServlet {
    private static final long serialVersionUID = 1L;
    EmployeeService employeeService = new EmployeeServiceImpl();

    /**
     * @see HttpServlet#HttpServlet()
     */
    public GetEmployee() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#service(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void service(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        PrintWriter out = response.getWriter();
        String name = request.getParameter("findbyid");
        System.out.println(name);
        RequestDispatcher dispatcher = null;
        try {

            if (request.getParameter("findbyid") != null) {

                request.setAttribute("EmployeeObject", findEmployees(Long
                        .parseLong(request.getParameter("findbyid"))));
                dispatcher = request.getRequestDispatcher("/jsp/employee.jsp");

            } else {
                request.setAttribute("employeeList", getAllEmployee());
                dispatcher = request.getRequestDispatcher("/jsp/winopen.jsp");
            }
            if (dispatcher != null)
                dispatcher.forward(request, response);

        } catch (EmployeeServiceBOException e) {
            e.printStackTrace();
        }
    }

    private List<EmployeeBO> getAllEmployee() throws EmployeeServiceBOException {
        return employeeService.getAllEmployees();
    }

    private EmployeeBO findEmployees(long id) throws EmployeeServiceBOException {

        return employeeService.getEmployee(id);
    }

    private List<EmployeeBO> findEmployees(String name)
            throws EmployeeServiceBOException {

        return employeeService.findEmployees(name);
    }
} 
```

这是我的 index.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<link rel="stylesheet" href="../css/style.css" type="text/css"></link><title>Home</title>
</head>
<body>
<table width="951" height="116" border="0" align="center">
  <tr>
    <td width="661" height="112" align="center" bgcolor="#99CCFF"><h2>Project Management </h2></td>
    <td width="266" height="112" align="center" bgcolor="#FFFFFF"><img src="../image/nous.jpg" alt="1" width="266" height="84" /></td>
  </tr>
</table>
<p>&nbsp;</p>

    <table width="949" height="183" border="0" align="center">

      <tr>
        <td height="42" align="center" bgcolor="#3366FF"><strong>Find Employee </strong></td>
      </tr>

  <tr>

    <td height="43"><form id="form2"  method="post" action="/EmployeeWeb/GetEmployee">

       <input name="Submit2" type="submit" class="button" value="GetAllEmployee"/>

    </form>    </td>
  </tr>

<tr>
<td width="943" height="43">
<input name="Submit" type="submit" value="getEmployee By ID"
onClick="window.open('file.jsp','mywindow','width=500,height=200 align=center,toolbar=no,resizable=yes,menubar=yes' )" />
</td>
</tr>

    <tr>
    <td height="43">
    <input name="Submit2" type="submit" class="button" value="Get Employee By Name"  onClick="window.open('winopen.jsp','mywindow','width=500,height=350,toolbar=no,resizable=yes,menubar=yes')"/>
     </td>
  </tr>
</table>

<p>&nbsp;</p>
</body>
</html> 
```

这是我的 getAllEmployee.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@page  language="java" import="com.nousinfo.tutorial.employee.service.model.bo.*" %>
<%@page  language="java" import="java.util.*" %>
 <input name="employee id" value="">

    <table >
        <tr>
            <th>EmployeeNumber</th>
            <th>FirstName</th>
            <th>LastName</th>
            <th>Title</th>
            <th>Address-1</th>
            <th>Address-2</th>
            <th>City</th>
            <th>State</th>
            <th>Pincode</th>
            <th>Mobile_Number</th>
            <th>Date_Of_Birth</th>

        </tr>
    <c:forEach var="employee" items="${employeeList}">
            <tr>
                <td>${employee.empNumber}</td>
                <td>${employee.firstName}</td>
                <td>${employee.lastName}</td>
                <td>${employee.title}</td>
                <td>${employee.address1}</td>
                <td>${employee.address2}</td>
                <td>${employee.city}</td>
                <td>${employee.state}</td>
                <td>${employee.pincode}</td>
                <td>${employee.mobileNUmber}</td>
                <td>${employee.dateOfBirth}</td>

            </tr>
        </c:forEach>
    </table>

</body>
</html> 
```

# linux - “构建”和“源”链接在“/lib/modules/”中的作用是什么 "

> ID：13578618
> 
> 赞同：3
> 
> 时间：2012-11-27T06:34:12.520
> 
> 标签：linux, kernel, kernel-module

我正在编译和安装linux内核。当我这样做时`make modules_install`，我意识到它在模块目录下有两个链接：`build`链接到我输出编译内容的位置和`source`链接到内核源代码的位置。

我想知道这两个链接在做什么？我将模块复制到另一台没有目录`build`并`source`链接到的计算机上。它工作正常。我可以删除这两个链接吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:22:18.650

这些符号链接仅在您编译 3rd 方内核驱动程序时才相关 - 通常使脚本依赖于`/lib/modules/$(uname -r)/build`.

如果您不打算这样做，可以安全地删除它们。

# ruby-on-rails - 简单的 Rails 路由，在资源块中执行 get 'action'

> ID：13578621
> 
> 赞同：1
> 
> 时间：2012-11-27T06:34:19.063
> 
> 标签：ruby-on-rails, ruby, routing

在 routes.rb 中考虑这一点

```
resource :places do
    resource :people
    get 'search'
end 
```

当我在浏览器中执行此操作时：

```
localhost:3000/places/search 
```

它为我提供了无效的位置错误 ID。

我希望在不使用“匹配”的情况下做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:43:19.770

您需要指定`get`适用于集合：

```
resource :places do
  resource :people
  get 'search', :on => :collection
end 
```

有关详细信息，请参阅[有关收集路线的文档](http://guides.rubyonrails.org/routing.html#adding-collection-routes)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:43:24.570

```
resources :places do
    resources :people
    get 'search', :on => :collection
end 
```

# java - Java 检查 file.exists() 是否不适用于 ImageIO.read(file)

> ID：13578622
> 
> 赞同：0
> 
> 时间：2012-11-27T06:34:23.433
> 
> 标签：java, image, file-io

我知道如何通过 if/else 检查文件是否存在，它在我之前的作业中有效：

```
File f = new File("file.txt");
    if (f.exists() && f.canRead()) {
        // Code goes here.
    } else { } // Error message. 
```

但是，如果我对缓冲图像执行相同操作，如下所示：

```
private BufferedImage img;

File f = new File("pic.png");
    if (f.exists() && f.canRead()) {
        img = ImageIO.read(f);
    } else { } // Error message. 
```

然后编译器要求 try/catch 或 @throws 违背了目的。我究竟做错了什么？将我所有的精灵打包在一个 .jar 中并将它们称为资源（我打算在完成后做）会更好吗？

如果这很重要，我在 JRE 1.6 上运行，文件检查在 switch case 语句中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:39:01.170

作为一个检查的异常，你必须抓住它。它是否真的被抛出并不重要。您的手动错误处理将无法处理所有情况。考虑您正在从网络驱动器读取，并且在读取时连接可能会中断。

**更新**查看您上面的评论。如前所述，您必须构建一个 try/catch 块，因为可以抛出异常并处理每个规范所需的已检查异常。通过事先检查，您已经避免了`FileNotFoundException`. 有时您甚至将我归类为实现根本不会引发任何错误的地方，但由于它在接口中，您仍然必须处理它，例如[ByteArryOutputStream.close()](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html#close%28%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:45:04.730

> 我们与他进行了一些详细的讨论，他的意思是，如果我确切地知道会发生什么，我应该尝试处理它，而不是诉诸 try/catch 后备。

如果你的导师告诉你应该测试以避免 IO 异常，那么我担心他是完全错误的。

1.  大多数 I/O 操作都被声明为抛出`IOException`，这是一个检查异常。当您调用这些方法时，您的代码必须处理或传播异常。你没有选择。Java 语言对所有检查的异常都要求这样做。

2.  测试所有可能的 IOExceptions 是不切实际的。例如，此代码可能会失败：

    ```
     if (f.exists() && f.canRead()) {
          os = new FileInputStream(f);
      } 
    ```

    为什么？因为构造函数可能会抛出 IOException 的原因还有其他，例如硬盘错误、网络错误（如果文件在远程挂载的文件系统上）、强制访问控制失败等。除了尝试打开文件之外，通常无法以任何其他方式检测潜在条件。

3.  然后是竞争条件的问题。在上面的示例中，在测试文件可读性和尝试打开它之间有一个小的时间窗口。在那个时间窗口内，有*可能*一些其他线程，或者一些外部进程会删除文件或改变它的访问权限，从而导致打开失败。没有办法关闭那个时间窗口。

然后是为什么你甚至*想要*避免异常的问题。我怀疑你的老师是“例外否认者”；即，将“例外只用于例外的事情”的建议推向不合逻辑的极端的人之一。

“异常应该只用于特殊的事情”的建议基本上是说你不应该过度使用异常，因为它们有点昂贵。但贵是相对的。

在这个例子中，对`File.exists()`和对的调用`File.canRead()`也很昂贵，因为它们都需要一个系统调用，这将花费数千个时钟周期。更糟糕的是，除非你的应用程序有什么不寻常的地方，否则这两个测试将会成功……所以你刚刚做了两个不必要的系统调用来避免无论如何都不会抛出的异常。除非这些测试失败的可能性很高（即 > 50%），否则跳过测试、尝试打开并在发生异常时处理异常会*更有效。*

* * *

> 我不会给我的教授贴上这样的标签。我们没有专门讨论 I/O 的复杂性，更多的是笼统地说，如果我能避免它，我应该避免它。我不知道（他也没有详细说明）有一些非常不可避免的例外情况。

好的。所以你的教授没有这么说。对他有好处。

是的，它们在不止一种意义上**是不可避免的。**

> 至于拒绝使用 .exists() 检查，对性能的影响有那么大吗？

是的。看到这个 -[系统调用开销](https://stackoverflow.com/questions/8247331/syscall-overhead)

或者如果你不相信，写一个微基准并测量它。并将其与抛出和捕获异常的开销进行比较。

> 会是桌面与移动设备之类的问题吗？

没有。或者对于操作系统使用虚拟内存来阻止一个“应用程序”干扰另一个“应用程序”的移动设备来说当然不是。

> 为故障排除/调试（如果我可以更好地查明问题同时避免程序崩溃）的清晰度进行权衡是否值得？

好吧，我认为这段代码：

```
try (InputStream is = new FileInputStream(f)) {
    // use file
} catch (IOException ex) {
    System.err.println("IO error: ": ex.getMessage());
} 
```

...比这更简单，更容易维护和调试：

```
if (!f.exists()) {
    System.err.println("File " + f + " does not exist");
} else if (!f.isDirectory()) {
    System.err.println("File " + f + " is a directory");
} else if (!f.canRead()) {
    System.err.println("File " + f + " is not readable");
} ...
} else {
    try (InputStream is = new FileInputStream(f)) {
        // read
    } catch (IOException ex) {
        System.err.println("IO error: "+ ex.getMessage());
    }
} 
```

你不同意吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T06:39:58.020

使用*try/catch 块*根本不会破坏目的。

即使该文件存在并且可读，也可以抛出许多其他异常。

可能的例子：

*   文件在读取时被删除
*   文件的权限在读取时被撤销
*   磁盘驱动器在读取时被拔出/卸载

[*ImageIO.read()*](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)方法抛出一个[IOException](http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html)。

没有办法避免抓住它或扔掉它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T06:39:35.773

如果您看到`ImageIO.read`方法的声明：-

```
public static BufferedImage read(File input)
                          throws IOException 
```

它声明`IOException`要抛出一个，即 a `CheckedException`。因此，在调用该方法时，您要么需要在`try-catch block`. 或者，将其声明为在您使用它的方法中抛出：-

```
File f = new File("pic.png");
if (f.exists() && f.canRead()) {
    try {
        img = ImageIO.read(f);
    } catch (IOException e) {
        e.printStackTrace();
    }
} else { } // Error message. 
```

但是，如果您没有像上述情况那样处理它，那么您必须在方法的`throws`子句中声明该方法，以便将其传播到`caller`, 以便它处理它。

通常，任何已检查的异常都应该被处理，或者传播给调用者，调用者逐渐到达`main`方法，在这种情况下，如果`main`方法不处理它，它会由 处理`JVM`，从而导致您的程序终止。

通常，最好在方法本身中处理引发异常的异常，并在需要时将适当的消息返回给调用者。

# javascript - ASP.NET MasterPage javascript 错误

> ID：13578628
> 
> 赞同：0
> 
> 时间：2012-11-27T06:35:00.920
> 
> 标签：javascript, asp.net, master-pages

我有这个 javascript：

```
<script type="text/javascript">
            $(document).ready(function () {
                $('#social-share').dcSocialShare({
                    buttons: 'twitter,facebook,linkedin,digg,stumbleupon,delicious,pinterest,buffer,print,email',
                    offsetLocation: 0,
                    center: 625,
                    floater: false
                });
                var a = $('#dcssb-1');
                buttonPosition(a);
                $(window).scroll(function () {
                    buttonPosition(a);
                });
            });
            function buttonPosition(obj) {
                var top = $(document).scrollTop();
                var p = top > 400 ? { marginTop: '20px' } : { marginTop: (400 - top) + 'px' };
                obj.css(p);
            }
</script> 
```

当我将代码放在 MasterPage 或使用 Masterpage 的页面中时，我收到此错误：

```
Object doesn't support property or method 'dcSocialShare' 
```

我已将所有 JS 包含在页面中正确放置，但是当我在没有母版页的情况下使用它时，为什么只有将它放在母版页或使用母版页的页面中才会出现此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:27:34.047

尝试将您的 js 文件`asp:ScriptManager`包含在以下内容中

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
    <Scripts>
        <asp:ScriptReference Path="~/jquery.js" />
    </Scripts>
</asp:ScriptManager> 
```

# android - 如何从活动中调用广播接收器？

> ID：13578629
> 
> 赞同：0
> 
> 时间：2012-11-27T06:35:00.330
> 
> 标签：android

我有一个阻止来电的广播类。我想从活动中调用那个广播接收器？任何人都可以帮我解决这个问题。我感谢您的帮助。1.A类扩展​​活动将调用扩展BroadcastReceiver的B类，现在我想阻塞调用，仅基于某些要求，在A类中检查，如果为真则调用B类（或简称阻塞调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:40:04.133

您可以`BroadcastReceiver` 从 Activity 开始：

```
public static final String BROADCAST_ACTION_NAME = "PACKAGE_NAME.ACTION_NAME";
Intent intent = new Intent(BROADCAST_ACTION_NAME);  
        Bundle extras = new Bundle();  
        extras.putString("data", "any_string");  
        intent.putExtras(extras);  
        //send Broadcast from Activity
        sendBroadcast(intent); 
```

# java - Sax解析后ListView数据拆分为另一行

> ID：13578630
> 
> 赞同：1
> 
> 时间：2012-11-27T06:35:04.890
> 
> 标签：java, android, listview, row, saxparser

我收到错误的列表视图数据。我正在使用 SAX 解析从 Web 服务获取数据。服务很好，就是不知道错在哪里？这是我的代码：

```
import java.io.InputStream;
import java.net.URL;
import java.util.ArrayList;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;

import android.app.Activity;
import android.app.ListActivity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class SaxParserDemoActivity extends ListActivity {
    /** Called when the activity is first created. */
    ArrayList<String> al_sno=new ArrayList<String>();
    ArrayList<String> al_sname=new ArrayList<String>();
    ArrayList<String> al_sclass=new ArrayList<String>();
    ArrayList<String> al_sphno=new ArrayList<String>();
    ArrayList<String> al_semail=new ArrayList<String>();

    SAXParserFactory spf;
    SAXParser sp;
    XMLReader xr;   

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try{

            spf=SAXParserFactory.newInstance();
            sp=spf.newSAXParser();
            xr=sp.getXMLReader();

            URL sourceUrl = new URL(
            "http://xxxxxxxxxxxxxxxxxxx");

            MyHandler mh=new MyHandler();
            xr.setContentHandler(mh);

            xr.parse(new InputSource(sourceUrl.openStream()));

            //.getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.main);
            setListAdapter(new MyAdapter());

        }
        catch(Exception e){}

        setListAdapter(new MyAdapter());
    }

    class MyAdapter extends BaseAdapter{

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return al_sclass.size();
        }

        @Override
        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return arg0;
        }

        @Override
        public long getItemId(int arg0) {
            // TODO Auto-generated method stub
            return arg0;
        }

        @Override
        public View getView(int arg0, View arg1, ViewGroup arg2) {
            LayoutInflater li=(LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
            View v=li.inflate(R.layout.second, null);

            TextView tv1=(TextView)v.findViewById(R.id.text1);
            tv1.setText(al_sno.get(arg0));

            TextView tv2=(TextView)v.findViewById(R.id.text2);
            tv2.setText(al_sname.get(arg0));

            return v;
        }

    }

    class MyHandler extends DefaultHandler{
        boolean is_sno=false;
        boolean is_sname=false;

        @Override
        public void startDocument() throws SAXException {
            // TODO Auto-generated method stub
            super.startDocument();
        }

        @Override
        public void startElement(String uri, String localName, String name,
                Attributes attributes) throws SAXException {
            super.startElement(uri, localName, name, attributes);
            if(localName.equals("ID")){
                is_sno=true;
            }
            else if(localName.equals("Name")){
                is_sname=true;
            }

        }

        @Override
        public void characters(char[] ch, int start, int length)
                throws SAXException {
            // TODO Auto-generated method stub
            super.characters(ch, start, length);
            if(is_sno){
                al_sno.add(new String(ch,start,length));
            }
            else if(is_sname){
                al_sname.add(new String(ch,start,length));
            }

        }

        @Override
        public void endElement(String uri, String localName, String name)
                throws SAXException {
            // TODO Auto-generated method stub
            super.endElement(uri, localName, name);

            if(localName.equals("ID")){
                is_sno=false;
            }
            else if(localName.equals("Name")){
                is_sname=false;
            }

        }

        @Override
        public void endDocument() throws SAXException {
            // TODO Auto-generated method stub
            super.endDocument();
        }
    }
} 
```

我的输出屏幕：

![屏幕](../Images/fc5a2747333cb40b29cb4d24d0fc3f0d.png).

您可以在这里看到“Alabama A&M”被分成 3 行。

我的日志猫是

```
11-27 11:56:15.516: D/PhoneWindow(429): couldn't save which view has focus because the focused view com.android.internal.policy.impl.PhoneWindow$DecorView@40549d60 has no id.
11-27 11:56:15.976: D/dalvikvm(429): GC_CONCURRENT freed 218K, 50% free 2958K/5831K, external 1064K/1413K, paused 17ms+4ms
11-27 11:56:17.876: V/tea(429): Air Force
11-27 11:56:17.929: V/tea(429): Akron
11-27 11:56:17.946: V/tea(429): Alabama
11-27 11:56:17.986: V/tea(429): Alabama A
11-27 11:56:17.996: V/tea(429): &
11-27 11:56:18.036: V/tea(429): M
11-27 11:56:18.046: V/tea(429): Alabama State
11-27 11:56:18.066: V/tea(429): Albany
11-27 11:56:18.156: V/tea(429): Air Force
11-27 11:56:18.166: V/tea(429): Akron
11-27 11:56:18.196: V/tea(429): Alabama
11-27 11:56:18.229: V/tea(429): Alabama A
11-27 11:56:18.246: V/tea(429): &
11-27 11:56:18.274: V/tea(429): M
11-27 11:56:18.286: V/tea(429): Alabama State
11-27 11:56:18.326: V/tea(429): Albany
11-27 11:56:18.376: V/tea(429): Air Force
11-27 11:56:18.396: V/tea(429): Akron
11-27 11:56:18.426: V/tea(429): Alabama
11-27 11:56:18.456: V/tea(429): Alabama A
11-27 11:56:18.467: V/tea(429): &
11-27 11:56:18.504: V/tea(429): M
11-27 11:56:18.526: V/tea(429): Alabama State
11-27 11:56:18.636: V/tea(429): Albany
11-27 11:56:18.756: D/dalvikvm(429): GC_CONCURRENT freed 173K, 48% free 3188K/6023K, external 1056K/1413K, paused 19ms+6ms
11-27 11:56:19.097: I/ActivityManager(60): Displayed com.ei.s/.Teamlist: +3s566ms 
```

我的 XML 数据是...

```
<Table diffgr:id="Table2" msdata:rowOrder="1">
    <ID>47</ID>
    <Name>Akron</Name>
    </Table>
    <Table diffgr:id="Table3" msdata:rowOrder="2">
    <ID>73</ID>
    <Name>Alabama</Name>
   </Table>
    <Table diffgr:id="Table4" msdata:rowOrder="3">
    <ID>356</ID>
    <Name>Alabama A&M</Name>
   </Table>
    <Table diffgr:id="Table5" msdata:rowOrder="4">
    <ID>187</ID>
    <Name>Alabama State</Name>
    </Table> 
```

我在 WEB-Service 中获得了正确的数据，但在 Android 应用程序中却没有。请帮助我，我在这里犯错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:30:30.770

下面的代码（修改你的`MyHandler`类）应该把你的节点文本放在一起：

```
 // a field in the MyHandler class:
    boolean mIsSegment = false;
    // ...
    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        // TODO Auto-generated method stub
        super.characters(ch, start, length);
        if (is_sno) {
            al_sno.add(new String(ch, start, length));
        } else if (is_sname) {
            if (!mIsSegment) {
                al_sname.add(new String(ch, start, length));
            } else {
                al_sname.set(al_sname.size() - 1,
                        al_sname.get(al_sname.size() - 1)
                                + new String(ch, start, length));
            }
            mIsSegment = true;
        }

    }

    @Override
    public void endElement(String uri, String localName, String name)
            throws SAXException {
        // TODO Auto-generated method stub
        super.endElement(uri, localName, name);

        if (localName.equals("ID")) {
            is_sno = false;
        } else if (localName.equals("Name")) {
            is_sname = false;
            mIsSegment = false;
        }

    }
    // ... 
```

将`SAXParser`名称文本分成多个部分，并且您将每个部分添加为列表中的单个项目。检查[这个答案](https://stackoverflow.com/questions/3354811/saxparser-concatenation-problem)。也没有理由调用`setListdapter`两次（只需在方法结束时调用一次`onCreate`）。

# c# - 在类中使用 INotifyPropertyChanged

> ID：13578631
> 
> 赞同：0
> 
> 时间：2012-11-27T06:35:08.120
> 
> 标签：c#, wpf

C# 允许创建如下属性：

```
public string SomeRandomText
{
    get; set;
} 
```

框架处理此属性的支持变量的创建。我怎样才能拥有这样的财产并且仍然有更改通知？

这在实现 INotifyPropertyChanged 的​​类中是否允许？

```
public string SomeRandomTextBeingNotified
{
    get;
    set
    {
        NotifyPropertyChanged("SomeRandomTextBeingNotified");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:37:21.377

尝试使用它时不能使用自动属性。您需要创建一个后备存储：

```
private string _someRandomText;
public string SomeRandomText {
    get { return _someRandomText; }
    set 
    {
        _someRandomText = value;
        NotifyPropertyChanged("SomeRandomText");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:42:43.867

为了使代码看起来更干净，您可以使用 INotifyPropertyChanged 的​​属性。

[使用 Property-Attribute 轻松使用 INotifyPropertyChanged](http://blog.saschabaumann.com/2010/06/easy-usage-of-inotifypropertychanged-with-property-attribute/)

看看这个[Use of Attributes... INotifyPropertyChanged](https://stackoverflow.com/questions/1662745/use-of-attributes-inotifypropertychanged)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T06:43:13.490

实际上你可以，但你基本上需要在 C# 编译器后更改字节码。

这听起来可能需要做很多工作，但这是 PostSharp 所包含的更简单的后处理步骤之一。

[http://www.sharpcrafters.com/solutions/notifypropertychanged](http://www.sharpcrafters.com/solutions/notifypropertychanged)

[http://www.sharpcrafters.com/blog/post/Recording-Automate-INotifyPropertyChanged-with-Karol-Waledzik-from-Internetium.aspx](http://www.sharpcrafters.com/blog/post/Recording-Automate-INotifyPropertyChanged-with-Karol-Waledzik-from-Internetium.aspx)

还有更多功能可用；）

否则请注意

`enter code here`在此处输入代码`NotifyPropertyChanged("SomeRandomTextBeingNotified");

是坏代码。我在一个字段更新方法中完成所有这些：

```
set 
{
    OnUpateField (ref _someRandomText, value);
} 
```

update 方法完成所有工作 - 检查是否相等（您不想在新值 = 旧值时触发），然后根据需要触发更新。它通过编译器自动设置的调用方法第三个参数获取属性名称。替代方法是使用 LINQ 语句（ref someRandomText, value, this->SomeRandomText）。我永远不会喜欢在重构时不会重命名的字符串；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T06:49:33.467

如果您没有基类，那么像这样的东西很容易而且非常灵活：

```
public class NotificationObject : INotifyPropertChanged
{
    private readonly Dictionary<string, object> Properties = new Dictionary<string, object>();

    public event PropertyChangedEventHandler PropertyChanged;

    protected TType Get<TType>(string propertyName)
    {
        object value;
        return Properties.TryGetValue(propertyName, out value) ? (TType)value : default(TType);
    }

    protected void Set<TType>(TType value, string propertyName, params string[] dependantPropertyNames)
    {
        Properties[propertyName] = value;
        OnPropertyChanged(propertyName);
        if (dependantPropertyNames != null)
        {
            foreach (string dependantPropertyName in dependantPropertyNames)
            {
                OnPropertyChanged(dependantPropertyName);
            }
        }
    }

    protected void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArts(propertyName));
        }
    }
} 
```

这可以像这样使用：

```
public SomeObjectThatNeedsToNotifySomething : NotificationObject
{
    public int SomeValue
    {
        get { return Get<int>("SomeValue"); }
        set { Set<int>(value, "SomeValue", "SomeAggregateValue"); }
    }

    public int SomeOtherValue
    {
        get { return Get<int>("SomeOtherValue"); }
        set { Set<int>(value, "SomeOtherValue", "SomeAggregateValue"); }
    }

    public int SomeAggregateValue
    {
        get { return SomeValue + SomeOtherValue; }
    }
} 
```

如果你已经有一个基类并且只需要实现 INotifyPropertyChanged 接口，@Rob 是正确的，提供一个支持字段并触发事件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T07:24:33.510

没有半自动属性之类的东西。尽管如此，有很多方法可以实现 INotifyPropertyChanged，它们不需要繁琐的命令式代码。

1）前面提到过：PostSharp，一个面向切面的商业项目。

2) 创建 Castle DynamicProxy 解决方案。可以在[这里](http://jonas.follesoe.no/2009/12/23/automatic-inotifypropertychanged-using-dynamic-proxy/)找到样本，实际上还有很多其他样本。

在通用解决方案上投入一些时间是值得的，样板代码会在一段时间后变得令人烦恼并且容易出错。

# python - “选择没有扩展的文件名”的负前瞻

> ID：13578632
> 
> 赞同：2
> 
> 时间：2012-11-27T06:35:11.040
> 
> 标签：python, regex, negative-lookahead

我需要将“php”添加到所有`href="xxx"`不以“php”结尾的网址。
我使用负前瞻`(?!php)`：

```
find = r'href="(.+?)(?!php)"'
replace =  r'href="\1.php"'
re.sub(find, replace, 'href="url"')
re.sub(find, replace, 'href="url.php"') 
```

两者都添加扩展名：

```
href="url.php"
href="url.php.php" 
```

为什么负前瞻不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:51:13.363

以下确实有效：

```
In [49]: re.sub(r'href="([^"]*?)([.]php)?"', r'href="\1.php"', 'href="url.php"')
Out[49]: 'href="url.php"'

In [50]: re.sub(r'href="([^"]*?)([.]php)?"', r'href="\1.php"', 'href="url"')
Out[50]: 'href="url.php"' 
```

您原来的正则表达式`(.+?)(?!php)`不能正常工作的原因是它匹配`url.php`如下：

*   `(.+?)`匹配`url.php`；
*   此时满足负前瞻，因为下一个字符是双引号。

换句话说，`.+?`使用包括扩展名在内的整个文件名，使前瞻成为无操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:58:32.137

负前瞻意味着正则表达式尝试匹配下一个模式，但不使用该模式。您的模式`"(.+?)(?!php)"`匹配 1 个或多个任意字符，直到遇到`"`，然后尝试匹配下一个模式，即`php`. 这个前瞻总是会失败，因为下一个字符是`"`，并且因为这是一个负前瞻，所以整个模式都会成功。

您需要的是负面的后视， ( `(?<!PATTERN)`) 它将在字符被消耗后尝试匹配模式。当它遇到时`"`，lookbehind pattern 尝试将最后 3 个字符与 pattern 匹配`php`。

简而言之，请使用以下模式重试

```
find = 'href="(.+?)(?<!php)"' 
```

# sql - Excel 2010 中 VBA 中的 SQL 字符串与日期

> ID：13578633
> 
> 赞同：1
> 
> 时间：2012-11-27T06:35:10.780
> 
> 标签：sql, excel, vba

我环顾四周，但找不到此 SQL 语句的问题：

```
 strSQL = "SELECT Directory.DisplayName, Department.DisplayName, Call.CallDate, Call.Extension, Call.Duration, Call.CallType, Call.SubType FROM (((Department INNER JOIN Directory ON Department.DepartmentID = Directory.DepartmentID) INNER JOIN Extension ON (Department.DepartmentID = Extension.DepartmentID) AND (Directory.ExtensionID = Extension.ExtensionID)) INNER JOIN Site ON Extension.SiteCode = Site.SiteCode) INNER JOIN Call ON Directory.DirectoryID = Call.DirectoryID WHERE (Call.CallDate)>=27/11/2012" 
```

无论我更改 WHERE 什么，它总是返回数据库中的每一个值（至少我假设它确实如此，因为当我尝试这样做时，excel 完全挂起）这个 SQL 语句在 Access 中工作得非常好（如果日期周围有 ##）。知道如何解决这个问题，目前正在尝试创建一个允许用户在不同日期输入的 SQL 语句，但必须首先克服这个随机障碍。

**编辑**：SQL 数据库中的日期字段是 DD/MM/YY HH:MM:SS 格式，并且此查询是在 VBA - EXCEL 2010 中完成的。
另外，为了避免混淆，已从语句中删除了 TOP 10，即停止excel 检索数据库中的每一行。
我激活的当前参考是：MicrosoftX Data Objects 2.8 Library
Database 是一个 MSSQL，使用连接字符串：
Provider=SQLOLEDB;Server=#######;Database=#######;User ID=# #######;密码=########;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:05:16.910

```
WHERE (Call.CallDate) >= #27/11/2012# 
```

用 包围日期变量`#`。

**编辑**：请明确日期字符串，例如 27-Nov-2012

```
strSQL = "SELECT ........ WHERE myDate >= #" & Format(dateVar, "dd-mmm-yyyy") & "# " 
```

如果您使用 ado，您应该查看`Paramaters`而不是使用动态查询。

**EDIT2**：感谢@ElectricLlama 指出它是 SQL Server，而不是 MS-Access

```
strSQL = "SELECT ........ WHERE myDate >= '" & Format(dateVar, "mm/dd/yyyy") & "' " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:22:27.180

请验证 Call.CallDate 字段的数据类型为 DATETIME 或 DATE

如果您确实在 SQL Server 上运行它，请尝试以下语法：

```
SELECT Directory.DisplayName, Department.DisplayName, Call.CallDate, 
Call.Extension, Call.Duration, Call.CallType, Call.SubType 
FROM (((Department INNER JOIN Directory 
ON Department.DepartmentID = Directory.DepartmentID) 
INNER JOIN Extension ON (Department.DepartmentID = Extension.DepartmentID) 
AND (Directory.ExtensionID = Extension.ExtensionID)) 
INNER JOIN Site ON Extension.SiteCode = Site.SiteCode) 
INNER JOIN Call ON Directory.DirectoryID = Call.DirectoryID 
WHERE (Call.CallDate)>= '2012-11-27' 
```

您看到的日期格式只是您的客户端工具决定显示的任何格式。日期不以任何格式存储，它们有效地存储为自 x 以来的持续时间。

默认情况下，如果要使用日期文字，SQL 将使用格式 YYYY-MM-DD。

但是你最好在代码中定义一个日期类型的参数，并尽可能长时间地保持你的日期数据类型为“日期”。这可能包括只允许他们使用日历控件输入日期以消除歧义。

# silverlight - 将 Silverlight 控件集合绑定到 Grid - 可能与否？

> ID：13578638
> 
> 赞同：0
> 
> 时间：2012-11-27T06:35:21.467
> 
> 标签：silverlight, mvvm, binding

我对 Silverlight 有点陌生，现在我正在开发一个地图应用程序。我有一组自定义控件（地图标记、POI 等）。每个控件都有一个 Point 类型的属性“Location”，其中控件的`Location.X`意思是控件的意思。`Canvas.Left``Location.Y``Canvas.Top`

我正在尝试将我的界面重构为 MVVM 模式。我想做这样的事情：

1.  假设我的控件在 Canvas 中。我想要类似的东西：

    `<Canvas DataContext="{StaticResource myModel}" ItemsSource="{Binding controlsCollection}">`

    `<Canvas.ItemTemplate> ... </Canvas.ItemTemplate>`

    `</Canvas>`

2.  在我的自定义控件中，我想要类似的东西：

    `<myCustomControl DataContext="{StaticResource myControlModel}" Canvas.Left="{Binding Location.X}" Canvas.Top="{Binding Location.Y}" />`

可能吗？也许有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:40:43.133

我认为可以为此使用 ItemsControl 控件。

假设您创建了一个持有者控件，该控件持有控件的位置+您选择的更多信息。我称之为“ControlDefinition.cs”：

```
public class ControlDefinition : DependencyObject, INotifyPropertyChanged
{
    public static readonly DependencyProperty TopProperty = DependencyProperty.Register("Top", typeof(Double), typeof(ControlDefinition), new PropertyMetadata(0d));
    public static readonly DependencyProperty LeftProperty = DependencyProperty.Register("Left", typeof(Double), typeof(ControlDefinition), new PropertyMetadata(0d));
    public static readonly DependencyProperty ModelProperty = DependencyProperty.Register("Model", typeof(Object), typeof(ControlDefinition), new PropertyMetadata(null));

    public Double Top
    {
        get { return (Double)GetValue(TopProperty); }
        set
        {
            SetValue(TopProperty, value);
            NotifyPropertyChanged("Top");
        }
    }
    public Double Left
    {
        get { return (Double)GetValue(LeftProperty); }
        set
        {
            SetValue(LeftProperty, value);
            NotifyPropertyChanged("Left");
        }
    }
    public Object Model
    {
        get { return (Object)GetValue(ModelProperty); }
        set
        {
            SetValue(ModelProperty, value);
            NotifyPropertyChanged("Model");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String aPropertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(aPropertyName));
    }
} 
```

然后，在我的模型（ViewModel.cs）中，我创建了这个类的 ObservableCollection：

```
public static readonly DependencyProperty ControlsProperty = DependencyProperty.Register("Controls", typeof(ObservableCollection<ControlDefinition>), typeof(MainWindow), new PropertyMetadata(null));
public new ObservableCollection<ControlDefinition> Controls
{
    get { return (ObservableCollection<ControlDefinition>)GetValue(ControlsProperty); }
    set
    {
        SetValue(ControlsProperty, value);
        NotifyPropertyChanged("Controls");
    }
} 
```

然后，在同一个模型中，我初始化集合并添加 4 个虚拟控件：

```
this.Controls = new ObservableCollection<ControlDefinition>();
this.Controls.Add(new ControlDefinition() { Top = 10, Left = 10, Model = "One" });
this.Controls.Add(new ControlDefinition() { Top = 50, Left = 10, Model = "Two" });
this.Controls.Add(new ControlDefinition() { Top = 90, Left = 10, Model = "Three" }); 
```

我的 VIEW (View.xaml) 会是这样的：

```
<ItemsControl ItemsSource="{Binding Path=Controls}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas Background="Beige" IsItemsHost="True" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=Model, Mode=OneWay}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
    <ItemsControl.ItemContainerStyle>
        <Style>
            <Setter Property="Canvas.Top" Value="{Binding Path=Top, Mode=OneWay}" />
            <Setter Property="Canvas.Left" Value="{Binding Path=Left, Mode=OneWay}" />
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

请注意，我在我的“DataTemplate”中显示了一个“TextBlock”控件，但缺乏您的控制。我在 TextBlock 的“文本”属性中显示了“模型”属性（我已将其定义为“字符串”）。您可以将“模型”属性分配给控件的“DataContext”属性，如您的示例中所示。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:57:08.710

所以，在谷歌搜索、询问和阅读之后，我在这里找到了一个解决方案：

1.  应该有一个模型实现 INotifyPropertyChanged 接口。DependencyProperties 不是必需的。这是一个例子：

    ```
    public class MyItemModel: INotifyPropertyChanged
    {
        // INotifyPropertyChanged implementation
        ...
        //

        private Point _location;
        public Point Location
        {
            get { return Location; }
            set { _location = value; NotifyPropertyChanged("Location"); }
        }

        // any other fields
        ...
        //
    } 
    ```

2.  然后，假设我们有一个包含 MyItemModel 集合的模型：

    ```
    public class MyModel: INotifyPropertyChanged
    {
        // INotifyPropertyChanged implementation
        ...
        //

        private ObservableCollection<MyItemModel> _myCollection;
        public ObservableCollection<MyItemModel> MyCollection
        {
            get { return _myCollection; }
            set { _myCollection = value; NotifyPropertyChanged("MyCollection"); }
        }
    } 
    ```

3.  然后，在 XAML 中，我们应该像这样使用 ItemsControl：

    ```
    <ItemsControl x:Name="LayoutRoot" DataContext="{StaticResource model}"
                ItemsSource="{Binding MyCollection}" 
                HorizontalAlignment="Left" VerticalAlignment="Top">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Canvas x:Name="host"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Grid x:Name="item" Background="Transparent">
                    <Grid.RenderTransform>
                        <TranslateTransform X="{Binding Location.X}" Y="{Binding Location.Y}"/>
                    </Grid.RenderTransform>

                    // other stuff here
                    ...
                    //

                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>

    </ItemsControl> 
    ```

像魅力一样工作:) 谢谢大家。

# mysql - 如何在 MySQL 中对行进行求和

> ID：13578640
> 
> 赞同：3
> 
> 时间：2012-11-27T06:35:26.200
> 
> 标签：mysql, sql, select, sum

我有一张桌子叫`temp_reading`. 它有以下列（消费是一个索引键）：

```
id consumption total
1  100
1  200
1  300
1  400
2  50
2  100
3  200
4  250 
```

现在我想将总计显示为

```
id   consumption  total
1    100          100
1    200          300
1    300          600
1    300          900
2    50           50
2    100          150
3    200          200
4    250          250 
```

可以像上面那样显示吗？

我尝试了以下查询：

```
SELECT id,consumption,sum(consumption) as total 
FROM temp_reading 
GROUP BY consumption; 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T08:01:31.550

我建议你`Primary Key`在你的`temp_reading`桌子上添加一个。（阅读有关[主键](http://dev.mysql.com/doc/refman/5.5/en/optimizing-primary-keys.html)的更多信息）此键每行都是唯一的。然后你可以试试这个查询：

```
SELECT TR.id
  , TR.consumption
  , TR.consumption + IFNULL(SUM(TR2.consumption), 0) AS Total
  FROM temp_reading TR
  LEFT JOIN temp_reading TR2 ON TR.id = TR2.id AND TR.pk > TR2.pk
  GROUP BY TR.pk; 
```

我已经在[SQL Fiddle](http://sqlfiddle.com/#!2/9899b/11)中尝试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:51:01.017

```
 select id,sum(consumption) as total 
     from temp_reading 
     group by id; 
```

我建议你没有相同的`ID`（1,1,1.2,2 ...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:44:47.243

尝试这个：

```
SELECT id, consumption, IF(@s=@s:=id, @s2:=@s2+consumption, @s2:=consumption) AS total
FROM temp_reading, (SELECT @s:=0, @s2:=0); 
```

# php - codeigniter num_rows 纠正时抛出时区错误，然后页面显示 500 内部服务器错误

> ID：13578642
> 
> 赞同：0
> 
> 时间：2012-11-27T06:35:31.880
> 
> 标签：php, date, codeigniter-2

我正在使用 codeigniter 2 作为我网站中的一个模块。这是第一次投入生产。

num_rows() 抛出以下错误

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：Home::index() [home.index]：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们为 'IST/5.0/no DST' 选择了 'Asia/Calcutta'
> 
> 文件名：控制器/home.php
> 
> 行号：18

在第 18 行，我有 echo $catgory->num_rows();

然后我更新了代码如下

```
function __construct()
{
    date_default_timezone_set('UTC');
    parent::__construct();
} 
```

当我重新加载页面时

> HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。

可能是什么问题呢？

有没有可能隐藏这个特定的错误？

与服务器端设置有什么关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:44:15.477

问题不在于时区。

我检查了日志，发现发生了致命错误，codeigniter 向浏览器发送了 500 状态。

我做了 ini_set('display_errors', 1) 并且 CI 显示了实际错误，而不是向客户端发送 500 状态。

所以此时要么关闭生产中的所有错误，要么让它查看所有初始冲突（错误）（因为在某些情况下，生产中的开发会有所不同），然后在试驾后再次隐藏所有错误。

我在stackoverflow中阅读这篇文章时得到了信息

[Codeigniter 显示空白页而不是错误消息](https://stackoverflow.com/questions/9587413/codeigniter-displays-a-blank-page-instead-of-error-messages)

此外，我没有在每个控制器中设置时区，而是在 index.php 中设置它。

# freebase - 在 Freebase 中寻找房产

> ID：13578644
> 
> 赞同：0
> 
> 时间：2012-11-27T06:35:44.173
> 
> 标签：freebase, mql

如果我想搜索名称或实际链接路径中包含特定字符串的属性，MQL 查询会是什么。对于名称，我能够在名称属性上放置一个 ~= 匹配，但不是在链接路径中。我尝试在 id 中使用 ~=，但它说我们无法在 id 中进行匹配。

[{

"/type/object/id": "wikipedia", "name~=": "wikipedia", "/type/object/type": "/type/property", "/type/object/name": null "限制”：200 }]​</p>

有没有办法在 id 中搜索字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:39:57.047

有几件事：

*   ~= 运算符在整个单词的基础上工作，所以如果你想在所有上下文中找到字符串“wikipedia”，你会想要使用“*wikipedia*”
*   ID 不是用完整的路径存储的，而是它们各自命名空间中的一系列键（想想目录中的文件名）

您将需要两个单独的查询来匹配属性及其包含的域，因为您无法在 MQL 中进行这样的联合。

对于名称包含维基百科的属性：

```
[{
  "type": "/type/property",
  "name~=" : "*wikipedia*",
  "name": null,
  "id":null,
  "limit":         200
}]​ 
```

对于属于 ID 包含维基百科的类型的属性：

```
[{
  "type": "/type/property",
  "name": null,
  "id":null,
  "schema" : {"key":{"namespace":{"name~=":"*wikipedia*"}},"id":null},
  "limit":         200
}]​ 
```

第二个查询可能需要一些改进，但它应该为您提供基本概念。

# c# - 获取 contentEditable 标签的重写值

> ID：13578645
> 
> 赞同：1
> 
> 时间：2012-11-27T06:35:53.363
> 
> 标签：c#, asp.net, html

在我的代码中，我想使用来自 .mdb 数据库（oleDb）的值设置一个标签，当用户注册为管理员时，我将 contentEditable=true 属性添加到我希望他能够编辑的部分。完成后，他将点击“保存”按钮，后面的代码会将新值更新到数据库中。
这是代码：（Admin.LogIn(,); 如果用户注册为管理员，也返回 true）

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/BenOptic.master" AutoEventWireup="true" CodeFile="ben_info.aspx.cs" Inherits="ben_info" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<h1 align="center" id="ben_info_header" runat="server">

</h1>
<h3 align="center" id="ben_info_subheader" runat="server">

</h3>
<p id="ben_info_main_text" runat="server">

</p>
<form id="Form1" action='' method='post' runat='server'><asp:Button id='SaveChanges' Text='שמור' OnClick='saveChanges_Click' runat='server' /></form>

</asp:Content> 
```

以及背后的代码：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;

public partial class ben_info : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        SaveChanges.Visible = false;
        DAL data = new DAL();
        if (Request.Form["submit"] != null)
        {
            if (Admin.LogIn(Request.Form["adm_username"], Request.Form["adm_pass"]))
            {
                ben_info_header.Attributes.Add("contenteditable", Session["isAdmin"].ToString());
                ben_info_main_text.Attributes.Add("contenteditable", Session["isAdmin"].ToString());
                ben_info_subheader.Attributes.Add("contenteditable", Session["isAdmin"].ToString());
                SaveChanges.Visible = true;
                SaveChanges.OnClientClick += new EventHandler(saveChanges_Click);
            }
        }

        DataTable config = data.Select("Select *  from Config where setting like 'ben_info%'");
        foreach (DataRow setting in config.Rows)
        {
            switch (setting["setting"].ToString())
            {
                case "ben_info_header": ben_info_header.InnerText = setting["val"].ToString(); break;
                case "ben_info_subheader": ben_info_subheader.InnerText = setting["val"].ToString(); break;
                case "ben_info_main_text": ben_info_main_text.InnerText = setting["val"].ToString(); break;
            }
        }
    }

    public void saveChanges_Click(object sender, EventArgs e)
    {
        DAL data = new DAL();
        data.Execute("update Config set val = '" + ben_info_header.InnerText + "' where setting = 'ben_info_header'");
        data.Execute("update Config set val = '" + ben_info_subheader.InnerText + "' where setting = 'ben_info_subheader'");
        data.Execute("update Config set val = '" + ben_info_main_text.InnerText + "' where setting = 'ben_info_main_text'");
        SaveChanges.Visible = false;
    }
} 
```

# mysql - Groovy：如何使用异常或 用 MySQL 查询构建？

> ID：13578646
> 
> 赞同：0
> 
> 时间：2012-11-27T06:35:56.080
> 
> 标签：mysql, exception, groovy, if-statement

我有一个来自 MySQL 数据库表的查询，我想检查一下：我是否在表中得到了这个数字，如果没有 - println 这个数字不在数据库中，如果这个数字存在 - println 这个数字存在。我怎么能做到这一点，使用异常或（如果）（否则）构造？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:19:32.390

假设您使用的是内存中的 hsql db：

```
def sql = Sql.newInstance( 'jdbc:hsqldb:mem:testDB',      // JDBC Url
                           'sa',                          // Username
                           '',                            // Password
                           'org.hsqldb.jdbc.JDBCDriver')  // Driver classname

def tim = 'tim'

def name = sql.firstRow( "SELECT name FROM users WHERE userid=$tim" )?.name

if( name ) {
  println "Name was $name"
}
else {
  println "Name not found"
} 
```

# android - 构建 android - 如何在 mkbootimg 命令中加载内核映像？

> ID：13578652
> 
> 赞同：3
> 
> 时间：2012-11-27T06:36:13.357
> 
> 标签：android, android-source, android-build

root@ubuntu:/media/Source/ICS_SOURCE# out/host/linux-x86/bin/mkbootimg --kernel zImage --ramdisk ramdisk.img.gz -o --boot.img 错误：无法加载内核'zImage'

我一次又一次地收到这个错误..

我必须在哪里放置内核映像才能运行此命令？实际上在构建源代码之后我没有得到boot.img！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T07:52:53.670

编译内核后，您将无法获得引导映像（`zImage`或`Image`来自文件夹）文件。`arch/arm/boot`

将您的 mkbootimg 二进制文件移动到 bin

```
sudo mv mkbootimg /bin 
```

将所有的`zImage`，`ramdisk.img.gz`（当我编译时我使用`ramdisk.img`）复制到一个文件夹

在那里打开终端

类型

```
mkbootimg --kernel zImage --ramdisk ramdisk.img.gz -o --boot.img 
```

# flyway - 以编程方式在占位符中使用模式

> ID：13578654
> 
> 赞同：2
> 
> 时间：2012-11-27T06:36:17.043
> 
> 标签：flyway

我是 Flyway 的新手。Flyway很好，很友好。

我想在 V1__Initial_structure.sql 文件中为我的表创建并提供模式名称。我不知道在哪里为占位符赋值。我已经以编程方式配置了 Flyway。我的 sql 文件包含，

创建架构 ${schemaName}

创建表 ${schemaName}.brand(brand_code IDENTITY,brand_name varchar(50) 唯一不为空，活动字符(1) 默认为 'Y')

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:27:11.073

这是您正在寻找的方法：http: [//flywaydb.org/documentation/javadoc/com/googlecode/flyway/core/Flyway.html#setPlaceholders](http://flywaydb.org/documentation/javadoc/com/googlecode/flyway/core/Flyway.html#setPlaceholders(java.util.Map) (java.util.Map )

# html - 如何将图像拖放到 HTML5 Canvas 上？

> ID：13578657
> 
> 赞同：3
> 
> 时间：2012-11-27T06:36:19.940
> 
> 标签：html, canvas

我修改了一个页面，我可以在其中将图像拖放到画布上。它做了我想要的一切，除了一个。我尝试了多种方法（包括脚本，例如 Kinetic 和 Raphael，我仍然认为这可能是要走的路）但已经死路一条：

**删除图像后，我无法将其在画布上拖动到新位置。**

```
function drag(e)
{
    //store the position of the mouse relativly to the image position
    e.dataTransfer.setData("mouse_position_x",e.clientX - e.target.offsetLeft );
    e.dataTransfer.setData("mouse_position_y",e.clientY - e.target.offsetTop  );

    e.dataTransfer.setData("image_id",e.target.id);
}

function drop(e)
{
    e.preventDefault();
    var image = document.getElementById( e.dataTransfer.getData("image_id") );

    var mouse_position_x = e.dataTransfer.getData("mouse_position_x");
    var mouse_position_y = e.dataTransfer.getData("mouse_position_y");

    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');

    // the image is drawn on the canvas at the position of the mouse when we lifted the mouse button
    ctx.drawImage( image , e.clientX - canvas.offsetLeft - mouse_position_x , e.clientY - canvas.offsetTop - mouse_position_y );
}

function convertCanvasToImage() {
    var canvas = document.getElementById('canvas');

    var image_src = canvas.toDataURL("image/png");
    window.open(image_src);

} 
```

这是我用作初始起点的 JSFiddle - [http://fiddle.jshell.net/gael/GF96n/4/](http://fiddle.jshell.net/gael/GF96n/4/)（将 JSFiddle 徽标拖到画布上，然后尝试移动它）。我已经在我几乎可以工作的页面中添加了 CSS、选项卡、内容等。我不想失去的功能是能够将单个图像多次（克隆）拖到画布上。

关于如何创建此功能的任何想法/示例/指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T08:42:20.940

您需要对代码进行一些更改，而不是立即将图像绘制到画布上，您需要跟踪所有丢弃的图像。`imagesOnCanvas`将填充所有丢弃的图像。

```
var imagesOnCanvas = [];

function drop(e)
{
    e.preventDefault();
    var image = document.getElementById( e.dataTransfer.getData("image_id") );

    var mouse_position_x = e.dataTransfer.getData("mouse_position_x");
    var mouse_position_y = e.dataTransfer.getData("mouse_position_y");

    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');

    imagesOnCanvas.push({
      context: ctx,  
      image: image,  
      x:e.clientX - canvas.offsetLeft - mouse_position_x,
      y:e.clientY - canvas.offsetTop - mouse_position_y,
      width: image.offsetWidth,
      height: image.offsetHeight
    });

} 
```

您还需要一个动画循环，它将遍历所有图像`imagesOnCanvas`并按顺序绘制它们。`requestAnimationFrame`用于实现此目的。

```
function renderScene() {
    requestAnimationFrame(renderScene);

    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    ctx.clearRect(0,0,
        canvas.width,
        canvas.height
    );

    for(var x = 0,len = imagesOnCanvas.length; x < len; x++) {
        var obj = imagesOnCanvas[x];
        obj.context.drawImage(obj.image,obj.x,obj.y);

    }
}

requestAnimationFrame(renderScene); 
```

接下来，您将必须`mousedown`在画布上监视事件，如果事件发生在图像上，`startMove`则可以调用操作

```
canvas.onmousedown = function(e) {
    var downX = e.offsetX,downY = e.offsetY;

    // scan images on canvas to determine if event hit an object
    for(var x = 0,len = imagesOnCanvas.length; x < len; x++) {
        var obj = imagesOnCanvas[x];
        if(!isPointInRange(downX,downY,obj)) {
            continue;
        }

        startMove(obj,downX,downY);
        break;
    }

} 
```

`isPointInRange`如果鼠标事件发生在图像对象上，该函数返回 true

```
function isPointInRange(x,y,obj) {
    return !(x < obj.x ||
        x > obj.x + obj.width ||
        y < obj.y ||
        y > obj.y + obj.height);
} 
```

一旦“移动模式”处于活动状态，对象的 x/y 坐标就会更改以反映新的鼠标位置

```
function startMove(obj,downX,downY) {
    var canvas = document.getElementById('canvas');

    var origX = obj.x, origY = obj.y;
    canvas.onmousemove = function(e) {
        var moveX = e.offsetX, moveY = e.offsetY;
        var diffX = moveX-downX, diffY = moveY-downY;

        obj.x = origX+diffX;
        obj.y = origY+diffY;
    }

    canvas.onmouseup = function() {
        // stop moving
        canvas.onmousemove = function(){};
    }
} 
```

这里的工作示例：

[http://jsfiddle.net/XU2a3/41/](http://jsfiddle.net/XU2a3/41/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T15:29:04.433

我知道已经有 2 年了，但我会试一试......在@lostsource 提供的答案中，Opera 浏览器不支持 dataTransfer 对象，并且 jsfiddle 不起作用。我迫切需要这个答案，这就是我一直在寻找的，但它不起作用！

# xcode - 何时保留和释放 CGLayerRef？

> ID：13578661
> 
> 赞同：0
> 
> 时间：2012-11-27T06:36:25.790
> 
> 标签：xcode, cocoa, memory-management, cglayer

我有一个与此类似的问题：

[NSValue 中的 CGLayerRef - 何时调用 retain() 或 release()？](https://stackoverflow.com/questions/7220398/cglayerref-in-nsvalue-when-to-call-retain-or-release)

我在视图中绘制 24 个圆圈作为径向渐变。为了加快速度，我将渐变绘制到一个图层中，然后将该图层绘制 24 次。这非常有效地加快了渲染速度。在随后的 drawRect 调用中，一些圆圈可能需要用不同的色调重新绘制，而另一些则保持不变。

每次通过 drawRect 我都会用新的色调重新计算一个新的渐变并将其绘制到一个新图层中。然后我循环遍历圆圈，根据需要使用原始图层/渐变或新图层/渐变绘制它们。我有一个 24 个元素的 NSMutableArray，它为每个圆圈存储一个 CGLayerRef。

我认为这是我在上面链接的问题中提供的答案，但它对我不起作用。第二次通过 drawRect 时，使用存储在数组中的 CGLayerRef 绘制的任何圆都会导致程序在调用 CGContextDrawLayerAtPoint 时崩溃。在调试器中，我验证了原始 CGLayerRef 的实际十六进制值已正确存储到数组中，并且第二次通过 drawRect 将相同的十六进制值传递给 CGContextDrawLayerAtPoint。

此外，我发现如果我不 CGLayerRelease 层，那么程序不会崩溃，它工作正常。这告诉我层的内存管理出了问题。我的理解是将对象存储到 NSArray 中会增加它的引用计数，并且在数组释放它之前不会释放它。

无论如何，这里是drawRect的相关代码。在底部你可以看到我注释掉了 CGLayerRelease。在此配置中，应用程序不会崩溃，尽管我认为这是资源泄漏。如果我取消注释该版本，则应用程序会第二次崩溃，但 drawRect （在第一次和第二次调用之间，其中一个圆圈的 led_info.selected 属性已清除，表明它应该使用保存的图层而不是新图层：

```
NSLog(@"ledView drawing hue=%4f sat=%4f num=%d size=%d",hue_slider_value,sat_slider_value,self.num_leds,self.led_size);
rgb_color = [UIColor colorWithHue:1.0 saturation:1.0 brightness:1.0 alpha:1.0];
end_color = [UIColor colorWithHue:1.0 saturation:1.0 brightness:1.0 alpha:0.0];
NSArray *colors = [NSArray arrayWithObjects:
                   (id)rgb_color.CGColor, (id)end_color.CGColor, nil];
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGGradientRef gradient = CGGradientCreateWithColors(colorSpace,(__bridge CFArrayRef) colors, NULL);

CGLayerRef layer = CGLayerCreateWithContext(context, (CGSize){self.led_size,self.led_size}, /*auxiliaryInfo*/ NULL);
if (layer) {
    CGContextRef layer_context = CGLayerGetContext(layer);
    CGContextDrawRadialGradient(layer_context, gradient, led_ctr,self.led_size/8,led_ctr, self.led_size/2,kCGGradientDrawsBeforeStartLocation);
} else {
    NSLog(@"didn't get a layer");
}

for (int led=0;led<[self.led_info_array count];led++) {
    led_info=[self.led_info_array objectAtIndex:led];

// the first time through selected=1 and led_info.cg_layer=nil for all circles,
// so this branch is taken.
    if (led_info.selected || led_info.cg_layer==nil) {
        CGPoint startPoint=led_info.rect.origin;
        CGContextDrawLayerAtPoint(context, startPoint, layer);
        CGContextAddRect(context, led_info.rect);
        led_info.cg_layer=layer;

// the second time through drawRect one or more circles have been deselected.
// They take this path through the if/else
    } else {
        CGPoint startPoint=led_info.rect.origin;
// app crashes on this call to CGContextDrawLayerAtPoint
        CGContextDrawLayerAtPoint(context, startPoint, led_info.cg_layer);
    }

}

// with this commented out the app doesn't crash.
//CGLayerRelease(layer); 
```

这是led_info的声明：

```
@interface ledInfo : NSObject
@property CGFloat hue;
@property CGFloat saturation;
@property CGFloat brightness;
@property int selected;
@property CGRect rect;
@property CGPoint center;
@property unsigned index;
@property CGLayerRef cg_layer;
- (NSString *)description;
@end 
```

led_info_array 是 ledInfo 对象的 NSMutableArray，数组本身是视图的一个属性：

```
@interface ledView : UIView
@property float hue_slider_value;
@property float sat_slider_value;
@property unsigned num_leds;
@property unsigned led_size;
@property unsigned init_has_been_done;
@property NSMutableArray *led_info_array;
//@property layerPool *layer_pool;
@end 
```

数组初始化如下： self.led_info_array = [[NSMutableArray alloc] init];

编辑：自从我发布以来，我发现如果我将分配周围的保留/释放放入 NSMutableArray 中，那么我也可以保留原始 CGLayerRelease 并且应用程序可以工作。所以我想这就是它应该如何工作，虽然我想知道为什么保留/释放是必要的。在我正在阅读的目标 C 书籍（以及上面链接的问题的答案）中，我认为隐式分配给 NSArray 确实保留/释放。新的工作代码如下所示：

```
 if (led_info.selected || led_info.cg_layer==nil) {
        CGPoint startPoint=led_info.rect.origin;
        CGContextDrawLayerAtPoint(context, startPoint, layer);
        CGContextAddRect(context, led_info.rect);
        if (led_info.cg_layer) CGLayerRelease(led_info.cg_layer);
        led_info.cg_layer=layer;
        CGLayerRetain(layer);
    } else {
        CGPoint startPoint=led_info.rect.origin;
        CGContextDrawLayerAtPoint(context, startPoint, led_info.cg_layer);
    } 
```

您可能会说我是 Objective C 和 iOS 编程的新手，并且我意识到我并没有真正遵守关于大小写和其他事情的约定。我会清理它，但现在我想解决这个内存管理问题。

罗布，谢谢你的帮助。我可以进一步澄清一下。我认为从你所说的有两个问题：

1) 引用计数不适用于 CGLayerRef。好的，但是在编写代码而不是在调试之后知道这一点会很好。我在 Objective C/cocoa 中使用“事物”时资源计数不起作用的迹象是什么？

2）你说我存储到一个属性，而不是一个 NSArray。是的，但是存储的目的地是 NSArray 通过属性，它是一个指针。该值确实使其进入数组并退出。资源计数不是这样工作的吗？即，如果我使用上面的代码将一些 NSObject 存储到 NSArray 中，而不是 CGLayerRef，资源计数会起作用吗？如果不是，那么摆脱中间的 led_info 属性并直接从循环内访问数组会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:19:22.590

# android - 重新填充数据库中的先前信息

> ID：13578663
> 
> 赞同：0
> 
> 时间：2012-11-27T06:36:31.483
> 
> 标签：android, android-layout

```
public class FragmentActivity extends Activity implements OnItemClickListener{

    private ListView discrepancy_list;
    private DiscrepancyListAdapter list_adapter = null;
    private ArrayList<CommonEntity> discrepancyList = new ArrayList<CommonEntity>();
    private RelativeLayout objRelativeLayout;
    private static int X_CO_ordinate;
    private static int Y_CO_ordinate;
    private ArrayList<String> arrlstCo_ordinate;
    private ArrayList<String> arrlst_Count;
    private boolean touch = true,isOnLaunch = false;
    private int editText_ID=1,count=1;
    private EditText objEditText;
    private SortedMap<Integer,String> mapDefect=null;
    private int final_position; 
    private ImageButton objImageButton;
    private DatabaseHandler db;
    Bitmap StoredBitmap;
    Drawable StoredDrawable;
    private static int dataSet = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState){

         super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mapDefect=new TreeMap<Integer, String>();
        arrlstCo_ordinate=new ArrayList<String>();
        arrlst_Count=new ArrayList<String>();
        discrepancy_list = (ListView)findViewById(R.id.number_list);
        discrepancy_list.setOnItemClickListener(this);
        db = new DatabaseHandler(this);

        objRelativeLayout=(RelativeLayout) findViewById(R.id.RelativeLayout);
        objRelativeLayout.setOnTouchListener(new View.OnTouchListener(){
            public boolean onTouch(View v, MotionEvent event){
                String strEditText;
                if(!checkForDataSaved()){
                if(touch){
                    Log.d("ON", "onTouch called");
                    X_CO_ordinate=(int) event.getX() ; 
                    Y_CO_ordinate=(int) event.getY();

                    boolean isNotDuplicate=checkDuplicateElement(X_CO_ordinate,Y_CO_ordinate);
                    if(isNotDuplicate){
                        Log.d("TOUCH", "TOUCH"+X_CO_ordinate+"|"+Y_CO_ordinate+"|"+"Touch :");
                        if(objEditText != null){
                            strEditText=objEditText.getText().toString();
                            Log.d("Err", "EditText not null"+strEditText);

                            if(strEditText != null && strEditText.length() != 0){
//                              if(chekMapEntry(objEditText.getId(), objEditText.getText().toString(), ""+X_CO_ordinate+"|"+Y_CO_ordinate))
//                              {
                                arrlst_Count.add(""+X_CO_ordinate+"|"+Y_CO_ordinate);
                                arrlstCo_ordinate.add(""+X_CO_ordinate+"|"+Y_CO_ordinate);
                                mapDefect.put(objEditText.getId(),objEditText.getText().toString());
                                Log.d("Err", "In Touch Map Size :"+mapDefect.size() +"Arr List Size :"+arrlstCo_ordinate.size());
                                objEditText.setVisibility(View.INVISIBLE);
                                //}else{Toast.makeText(FragmentActivity.this, "Duplicate map entry", Toast.LENGTH_LONG).show();}
                                addEditText();
                                Log.d("Err", "String not null");
                            }else{
                                Log.d("Err", "String null");
                                Toast.makeText(FragmentActivity.this, "Please log the defect ::: in onTouch()", Toast.LENGTH_LONG).show();
                            }
                        }else{
                            Log.d("Err", "EditText  null");
                            arrlst_Count.add(""+X_CO_ordinate+"|"+Y_CO_ordinate);
                            arrlstCo_ordinate.add(""+X_CO_ordinate+"|"+Y_CO_ordinate);
                            Log.d("Err", "In Touch else Map Size :"+mapDefect.size() +"Arr List Size :"+arrlstCo_ordinate.size());
                            Drawable relative_image_bg = objRelativeLayout.getBackground();
                            Bitmap bitmap = ((BitmapDrawable)relative_image_bg).getBitmap();
                            Bitmap bitmap2 = ((BitmapDrawable)(getResources().getDrawable(R.drawable.no_image_screen_new))).getBitmap();

                            if(bitmap.sameAs(bitmap2)){
                                Toast.makeText(FragmentActivity.this, "Please capture the image", Toast.LENGTH_LONG).show();
                            }else{
                                Toast.makeText(FragmentActivity.this, "Not equal..", Toast.LENGTH_LONG).show();
                                addEditText();
                            }
                        }
                    }
                    touch=false;
                }else{
                    touch=true;
                }
            }
                return true;
            }

            private boolean checkDuplicateElement(int x_CO_ordinate,int y_CO_ordinate){
                String strX=String.valueOf(x_CO_ordinate);
                String strY=String.valueOf(y_CO_ordinate);

                for(int i=0;i<arrlstCo_ordinate.size();i++){
                    String strResult=arrlstCo_ordinate.get(i);
                    String []arrResult=StringUtils.split(strResult, "|");
                    String strTemp_X=arrResult[0];
                    String strTemp_Y=arrResult[1];
                    Log.d("CO", ""+strTemp_X+strTemp_Y+"|"+strX+strY);

                    if(strTemp_X.equalsIgnoreCase(strX) || strTemp_Y.equalsIgnoreCase(strY)){
                        Log.d("DUP", "Duplicate element is not allow");
                        Toast.makeText(FragmentActivity.this, "Duplicate element is not allow", Toast.LENGTH_SHORT).show();
                        return false;
                    }
                }
                return true;
            }
        });

        //add list in main.xml

        addList();
        getDefects();

    }

    private void addList(){

        discrepancyList = LocalDatabaseOperations.callDBToGetList(this);

        list_adapter = new DiscrepancyListAdapter(this, discrepancyList);
        discrepancy_list.setAdapter(list_adapter);
        isOnLaunch = true;
        discrepancy_list.performItemClick(null, 0, discrepancy_list.getFirstVisiblePosition());

    }

    private void getDefects(){

        if(LocalDatabaseOperations.callDBToGetDefects(this) == true){
            fechCoordinate();
            addViewEditText();

        }
    } 
```

> 因此，这是在 LHS 上加载“差异列表”的活动，并在片段的 RHS 上加载有关列表中第一项的信息。在新启动此活动时（首次启动应用程序时），屏幕的 RHS 将填充数据库中存在的先前值（“缺陷”）。这是输入的数据，应用程序最后一次执行。

# java - hadoop eclipse中的EOF异常/在eclipse中设置hadoop

> ID：13578665
> 
> 赞同：0
> 
> 时间：2012-11-27T06:36:43.140
> 
> 标签：java, linux, eclipse, hadoop, mapreduce

```
 softwares description : eclipse Juno version latest
 hadoop : 1.0.4
 hadoop eclipse plugin : 1.0.4 (created through apache ant) 
```

我正在尝试在 Eclipse 中设置 hadoop 的新位置，但这给了我错误

“ `Call to localhost/127.0.0.1:54310 failed on local exception:java.io.EOFexception`”。

我在网上搜索过，但无法解决问题。我还检查了我的 netstat 状态并给出如下

```
Proto Recv-Q Send-Q Local Address Foreign Address State 
tcp 0 0 localhost:39839 localhost:54311 ESTABLISHED
tcp 0 0 localhost:59944 localhost:54310 ESTABLISHED
tcp 0 0 localhost:60140 localhost:54310 TIME_WAIT 
tcp 0 0 ubuntu-2.local:46841 channel-ecmp-05-a:https ESTABLISHED
tcp 179 0 localhost:54311 localhost:40006 ESTABLISHED
tcp 0 0 localhost:60141 localhost:54310 TIME_WAIT 
tcp 0 0 localhost:60146 localhost:54310 ESTABLISHED
tcp 180 0 localhost:54311 localhost:40000 CLOSE_WAIT 
```

似乎 eclipse 试图建立连接，但由于零字节返回，一段时间后关闭连接。为什么我收到此错误？代理服务器或防火墙是否有任何问题。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:21:19.367

我遇到了同样的问题。您从 ant 创建的 eclipse 插件在这种情况下将不起作用，可能是因为它覆盖了一些 hadoop 配置（查看 buid.xml 了解更多详细信息）这主要是由于 hadoop eclipse 版本不匹配你的hadoop安装。您可以从这里安装 hadoop-0.20.1 和从[这里](https://issues.apache.org/jira/browse/MAPREDUCE-1262)[安装](http://archives.apache.org)hadoop eclipse 插件并试一试。它会起作用的。谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:09:44.543

如果您可以`hdfs-site.xml`在项目的 src 下包含它应该可以解决您的问题。如果您使用的是 Hbase，那么`hbase-site.xml`也包括

# java - 何时选择要声明为最终静态变量的变量

> ID：13578668
> 
> 赞同：2
> 
> 时间：2012-11-27T06:36:55.073
> 
> 标签：java, android, static, final

我也使用了 final 和 static 变量。我发现这些变量是，

## 最终变量

*   最终变量只能通过初始化程序或赋值语句初始化一次。

*   与常量的值不同，最终变量的值在编译时不一定是已知的。

**我应该将哪些变量声明为 final-**

大多数情况下，我使用那些值普遍不变且永远不会改变的变量，例如 PI 的值。

```
public static final double PI = 3.141592653589793; 
```

## 静态变量

*   这些是属于类而不属于对象（实例）的变量。

*   静态变量只在执行开始时初始化一次。

*   由类的所有实例共享的单个副本

*   静态变量可以通过类名直接访问，不需要任何对象。

**我应该将哪些变量声明为 final-**

大多数时候，我使用那些我只想初始化一次的变量并在 enitre 类中使用它们。

## 何时使用最终静态变量

现在，我在我的一个数据库项目中遇到了一个术语`final static`。我发现一些数据库对象甚至数据库版本被声明为 statci final。

```
 static final String DATA_BASE = "BackUpDatabase.db";
    static final int DATA_BASE_VERSION = 1; 
```

现在，我的问题是我们应该将哪些变量声明为`final`or`static`或`final static`，因为使用它们中的任何一个都可以解决问题，然后将两者一起使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T06:48:53.597

```
static -  Only use when a variable which is used globally 
final -  Only use when you need to declare a value as constant 

static final - Only use when a value is globally used and it is a constant.

: - Here global means across all the instances of a java class 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T06:40:25.617

`static final`声明为（或反之亦然）的变量被理解为有意义的常量，并以全部大写命名，下划线表示空格。

一个常见的常量例子是`Integer.MAX_VALUE`, 或`Math.PI`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-27T06:52:15.443

**final**只说一旦初始化的值就不能改变；**static**表示该属性属于 Class 而不是对象。

所以当你说**final static** ; 这意味着只有一个变量副本并且不能更改。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-27T06:51:15.353

**-** `static`在 java 中表示类的成员。它由类的所有实例共享。

**-** `final` Java 中的关键字表示常量，但根据应用的内容有不同的解释。

**-**当我们`static final`在字段上使用时，将其视为全局变量。

**-** `PI`是数学类的静态变量，使用类名直接访问，如`Math.PI`.

**-**使用大写字母来定义静态最终变量。

**最终解释：**

`final variable :`它的值不能改变

`final method :`它不能被覆盖

`final class :`不能扩展

`final Parameter :`它的值不能改变，它从调用者的参数接收到

`final Object Reference Variable :`它不能引用任何其他对象，除了它当前引用的对象

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-27T06:46:00.847

仅将变量声明为静态可能会导致其值被声明它的类的一个或多个实例更改。

正如@Vulcan 所说，将它们声明为 static final 将帮助您创建一个 CONSTANT 。只有一个副本存在，可以在任何地方访问。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-15T14:55:03.823

静态方法或类是隐式的 final 。因为所有对象都只存在此方法的一个副本，这意味着子类无权修改该副本。假设您在父类中有一个方法，并且您不希望子类更改此方法..只需将父方法声明为最终方法。干得好。

```
class Parent {

    final void myMethod() {
        //No one can change this method from subclassess 
        //compiler works efficiently because it knows that this method will not change
    }
}

class Child extends Parent{
   //from this class I can use myMethod but I cannot override.
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-26T18:45:40.983

## 静态变量

*   您可以通过调用同一类中存在的静态方法来更改静态变量值。
*   从此类创建的所有对象的静态变量值将相同。如果我们更改值，那么该类的所有对象都将获得新值，旧值将丢失。
*   值可以多次更改。

## 最终变量

这个变量值可以通过两种方式初始化：

1.  在声明变量时。
2.  在创建该类的对象时，类构造函数将具有`this.finalvariable = newfinalvariablevalue;`

一旦初始化，它就不能被任何方法（静态或非静态）更改。

# iphone - 通过 HTTP POST 发送图像数据

> ID：13578669
> 
> 赞同：1
> 
> 时间：2012-11-27T06:36:57.197
> 
> 标签：iphone, objective-c, cocoa-touch, ios-simulator

如何通过 HTTP POST 发送图像数据？

我有以下代码：

```
NSURL *aUrl = [NSURL URLWithString:@"http://demo25.projectproofonline.com/soul_mate_modified/save.php"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:aUrl
cachePolicy:NSURLRequestUseProtocolCachePolicy  timeoutInterval:60.0];
[request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPMethod:@"POST"];
[NSURLConnection connectionWithRequest:request delegate:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:41:12.197

因此，一种方法是进行多部分图像上传，但这不会是 json 格式，但这确实是正常的做法，可能是您唯一的选择。 [Multipart/Formdata图片上传，获取文件](https://stackoverflow.com/questions/8561403/multipart-formdata-image-upload-get-the-file)

# vb.net - 如何将文本框的值从一个表单传递到另一个表单

> ID：13578670
> 
> 赞同：3
> 
> 时间：2012-11-27T06:37:05.543
> 
> 标签：vb.net

如果我有一个值存储到 form1 的文本框中，我必须将该值传递到另一个 form2 的另一个文本框中。将值从一种形式传递到另一种形式的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-03T13:55:08.703

有一个没有。的方式。

1.使用`TextChanged`事件。

```
 Private Sub TextBox1_TextChanged(sender As Object, e As EventArgs) Handles TextBox1.TextChanged
        Form2.TextBox1.Text = TextBox1.Text
    End Sub

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Form2.Show()
    End Sub 
```

2.  使用`Click`事件：

```
 Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Form2.TextBox1.Text = TextBox1.Text
    End Sub 
```

3.  使用`LostFocus`事件：

```
 Private Sub TextBox1_LostFocus(sender As Object, e As EventArgs) Handles TextBox1.LostFocus
        Form2.TextBox1.Text = TextBox1.Text
    End Sub 
```

同样，您可以处理每个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:11:35.310

如果两种形式都在运行，那么您可以使用

```
 form2.TextBox1.Text=form1.TextBox1.Text 
```

否则，您可以在任何事件中在 Form2 中声明一个公共字符串变量，

```
dim Obj as new Form2
Obj.StrVariable=Me.TextBox1.Text
Obj.Show 
```

在 Form2 加载时，

```
Me.TextBox1.Text=StrVariable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T20:51:27.220

在 Form1.vb 中确保使用 Button.Click 之类的事件并在其中

```
 Dim obb As New Form2
 obb.val = Me.TextBox1.Text()
 obb.Show()
 Me.Hide() 
```

在 Form2.vb 中使用名为“val”的属性

```
Public Property val As String 
```

在像 MyBase.Load 这样的事件上

```
TextBox1.Text = val 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-03T00:03:25.367

为了`TextBox.Text`从另一个窗体中检索控件的值（例如 ），最好的方法是创建一个模块并为私有变量创建一个属性。

包含客户名字的属性示例：

```
Module modPrivateVariables

Private strCustomerFirstNameSTR As String

    Public Property getCustomerFirstNameSTR() As String
        Get
            Return strCustomerFirstNameSTR
        End Get
        Set(ByVal strCustomerFirstName As String)
            strCustomerFirstNameSTR = strCustomerFirstName
        End Set
    End Property

End Module 
```

然后在文本框的 TextChanged 事件中使用该属性`getCustomerFirstNameSTR`来保存文本框的文本。例如，如果您有一个名为 ( `txtCustomerFirstName`) 的文本框，您可以在其 TextChanged 事件下输入`getCustomerFirstNameSTR = txtCustomerFirstName.Text`。

文本框的文本现在将分配给`getCustomerFirstNameSTR`属性。现在，您将能够从应用程序中的任何位置和任何形式访问此属性的值。例如，如果您有另一个表单的文本框，例如 Form2，名为“txtBoxInForm2”，您可以调用`txtBoxInForm2.Text = getCustomerFirstNameSTR`.

如果您想清除属性的值，只需键入`getCustomerFirstNameSTR = String.Empty`. 要了解的主要内容是，当您以一种形式（类）创建变量并尝试从另一种形式（另一个类）访问其值时，必须重新实例化该变量一次。

发生这种情况后，变量将重置为其默认值，即空字符串。这将导致您每次从另一个表单调用它时都得不到任何东西（一个空的文本框）。不需要重新实例化属性，因为它们是通过属性本身内的公共方法（get 和 set 方法）访问的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-14T23:04:59.807

您可以在`button1_click`那里使用 and 状态：

```
Dim obj as new form2
Obj.pass=me.textbox1.text

Obj.show() 
```

然后在您的 form2 主类**之前的 form2 中，您声明：**

```
Public property pass as string 
```

关于负载状态

Textbox1.text=pass

现在，当您单击 form1 上的按钮时，将显示 form2，并且 form2 上的 textbox1 将具有与 form1 中相同的文本。前提是您仅将其与文本框、标签或其他类型的字符串一起使用，否则将起作用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-09-01T23:06:20.483

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

' timer1 must be set to true

Timer1.Start() Form1.Show() Me.Hide()

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    Form1.TextBox13.Text = TextBox1.Text 
```

# vim - 以编程方式执行命令以关闭当前缓冲区并切换到上一个状态

> ID：13578676
> 
> 赞同：1
> 
> 时间：2012-11-27T06:37:16.993
> 
> 标签：vim

我正在编辑一个文件`:e foo`。

现在我想保存它，关闭缓冲区（这样我就可以回到打开之前的状态`foo`），使用`command`.

我现在有这个：

```
command! GC silent execute ":wq" | silent execute ":close" 
```

但如果我之前没有打开任何缓冲区，我会收到此错误：

```
E444: Cannot close last window 
```

我怎样才能关闭窗口，这样如果它是最后一个窗口，它仍然会关闭它，并让我回到你刚运行时得到的空屏幕`vim`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:32:10.097

我认为您正在寻找`:update`+`:bdelete`命令组合。如果有任何更改，第一个保持更改，后者删除缓冲区。如果还有其他拆分窗口，则关闭当前窗口。否则，如果您有其他参数/​​隐藏缓冲区，则下一个将显示在单个窗口中。如果没有其他窗口，则会`:enew`显示一个空缓冲区（如 ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:44:31.320

当你在没有文件作为参数的情况下启动 Vim 时，你看到`$ vim`的只是一个空缓冲区。如果它的状态没有以任何方式改变，那么当你改变它时它就会被丢弃`:e file`。

您可以看到`:ls`： 唯一可用的缓冲区是`file`.

如果你想要一个空缓冲区（我不知道你为什么想要那个），你需要明确地创建一个：

```
:enew 
```

除非有一个我不知道的选项。

无论如何，我建议你这样做：

```
$ vim file 
```

而不是：

```
$ vim
:e file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:14:52.217

你想做`save all files, and exit vim`吗？然后只需键入`ZZ`. 或者你想做什么`save all files if updated, and close all windows`？然后

```
command! GC bufdo update | windo bw 
```

# css - 我们可以在 css 中使用 em 单位定义元素的高度和宽度吗？

> ID：13578681
> 
> 赞同：2
> 
> 时间：2012-11-27T06:37:47.023
> 
> 标签：css, layout, em

我曾多次看到技术娴熟的网页设计师/开发人员在字体大小以及边距和填充中应用 em 单位，我很想知道 em 单位也可以应用于元素的高度和宽度？或者我们可以坚持使用像素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:40:31.310

是的，您也可以将`em`(and `pt`, `%`and [all other](http://www.w3.org/TR/css3-values/#lengths) ) 用于`width`and `height`。

# android - 为什么我的登录屏幕不起作用

> ID：13578683
> 
> 赞同：1
> 
> 时间：2012-11-27T06:37:58.823
> 
> 标签：android, login

我创建了一个屏幕，它将询问密码并与内置密码进行比较并启动另一个屏幕，但即使我提供了正确的密码，我也无法启动该活动。任何帮助将不胜感激。

```
 public class MainActivity extends Activity {

     public static String lock = "vamsi";
     public static String locker;
     EditText et;
     Button b;

     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

         setContentView(R.layout.activity_main);
         et = (EditText) findViewById(R.id.editText1);
         b = (Button) findViewById(R.id.button1);
         locker = et.getText().toString();

         b.setOnClickListener(new View.OnClickListener() {
             public void onClick(View arg0) {
                     if (locker.equals(lock)) {
                     Intent intent = new Intent("screen");

                     startActivity(intent);
                 }
             }
         });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:55:58.760

我假设您是这里的新手，所以在开始开发之前，您必须阅读一些理论并完成一些教程。根据您的代码，我假设您不知道如何调用`intent`.

看这里，什么是[Intent](http://developer.android.com/reference/android/content/Intent.html)？

您的 onclick 代码应如下所示：

```
 b.setOnClickListener(new View.OnClickListener() {
             public void onClick(View arg0) {
                 // TODO Auto-generated method stub
               locker = et.getText().toString();
                 if (locker.equalsIgnoreCase(lock)) {
              Intent intent = new Intent(getApplicationContext(),example.class);
               //example.class is the name of activity which you want to launch.
              startActivity(intent);
                 }

             }

         }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:52:35.900

写下一行

```
Intent intent = new Intent (getApplicationContext(), FileName.class); 
```

代替

```
Intent intent = new Intent("screen"); 
```

其中**FileName**是您要在 Onclick 方法中打开的活动的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:55:51.490

首先我想在这里补充几点：

1.  如果您使用 Web 服务，请使用异步任务。
2.  请在此处询问之前解决问题。

也许你可以试试这个：

```
if(locker.contains(lock)){
             Intent success = new Intent(LoginScreen.this,MainMenu.class);
             startActivity(success
}else{

AlertDialog.Builder builder = new AlertDialog.Builder(LoginScreen.this);
builder.setMessage("Incorrect LoginId or Password");
builder.setCancelable(true);
builder.setPositiveButton("OK",
new DialogInterface.OnClickListener() {

@Override
public void onClick(DialogInterface dialog, int id) {
// TODO Auto-generated method stub
}
});
builder.create().show();
} 
```

# iphone - 如果视频文件损坏，MPMoviePlayerViewController 会返回错误吗？

> ID：13578686
> 
> 赞同：4
> 
> 时间：2012-11-27T06:38:07.463
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller, mpmovieplayer

我正在下载视频并将其保存在某个目录中，以便用户之后可以播放该文件。

它适用于所有情况，例如由于某些网络波动而停止下载并再次恢复。但有时文件完全下载但没有在 MPMoviePlayerViewController 中播放。

我正在使用 ASIHTTPRequest 在后台下载视频文件。

观察：可能是在下载过程中，网络有时会波动，文件可能已经损坏。

问题：我怎样才能知道下载的文件已损坏？（通过 MPMoviePlayerViewControll）

有什么建议么？下面是玩的代码：

@ACB ...我使用了您的代码，但它总是处于其他状态：

```
 playerViewController = [[MPMoviePlayerViewController alloc]initWithContentURL:url];

    player = [playerViewController moviePlayer];
    player.movieSourceType = MPMovieSourceTypeFile;
    [player prepareToPlay];

    if(player.loadState == MPMovieLoadStatePlayable)
    {
        playerViewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
        [self presentMoviePlayerViewControllerAnimated:playerViewController];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playerInterruptByUser:) name:MPMoviePlayerPlaybackStateDidChangeNotification object:playerViewController.moviePlayer];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playerFinished:) name:MPMoviePlayerPlaybackDidFinishNotification object:playerViewController.moviePlayer];

        //[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playerFinished:) name:UIApplicationDidEnterBackgroundNotification object:playerViewController.moviePlayer];

        [player play];
    }
    else
    {
        corruptVideoAlert = [[UIAlertView alloc]initWithTitle:NSLocalizedString(@"Corrupt Video", nil) message:NSLocalizedString(@"This video is corrupted due to some network error. We suggest you to download again. Do you want to download it again?", nil) delegate:self cancelButtonTitle:NSLocalizedString(@"NO", nil) otherButtonTitles:NSLocalizedString(@"YES", nil),nil];
        [corruptVideoAlert show];
        [corruptVideoAlert release];
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:26:48.830

我发现了类似的问题，我解决了这个问题。试试下面的代码：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playerPlayingErrorNotification:) name:MPMoviePlayerPlaybackDidFinishNotification object:playerViewController.moviePlayer];

 -(void)playerPlayingErrorNotification:(NSNotification*)notif
{

    NSNumber* reason = [[notif userInfo] objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey];
    switch ([reason intValue]) {
        case MPMovieFinishReasonPlaybackEnded:
            NSLog(@"Playback Ended");        
            break;
        case MPMovieFinishReasonPlaybackError:
            NSLog(@"Playback Error");
            [self performSelector:@selector(CorruptVideoAlertView) withObject:nil afterDelay:1.0];
            break;
        case MPMovieFinishReasonUserExited:
            NSLog(@"User Exited");
            break;
        default:
            break;
    }
} 
```

如果它也适合你，请接受它。有一个美好的一天。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:41:53.237

利用

```
if(moviePlayer.loadState == MPMovieLoadStatePlayable) 
```

并检查它是否可以播放。`MPMoviePlayerLoadStateDidChangeNotification`如果需要，您可以使用。有关更多详细信息，[请查看苹果文档。](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/c/data/MPMoviePlayerLoadStateDidChangeNotification)

可以这样试试

```
playerViewController = [[MPMoviePlayerViewController alloc]initWithContentURL:url];

player = [playerViewController moviePlayer];
player.movieSourceType = MPMovieSourceTypeFile;
[player prepareToPlay];

playerViewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentMoviePlayerViewControllerAnimated:playerViewController];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playerInterruptByUser:) name:MPMoviePlayerPlaybackStateDidChangeNotification object:playerViewController.moviePlayer];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playerFinished:) name:MPMoviePlayerPlaybackDidFinishNotification object:playerViewController.moviePlayer];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loadStateChanged:) name:MPMoviePlayerLoadStateDidChangeNotification object:playerViewController.moviePlayer];

    //[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playerFinished:) name:UIApplicationDidEnterBackgroundNotification object:playerViewController.moviePlayer]; 
```

在`loadStateChanged:`方法中执行以下操作，

```
if(player.loadState == MPMovieLoadStatePlayable)
{
 [player play];
}
else
{
    corruptVideoAlert = [[UIAlertView alloc]initWithTitle:NSLocalizedString(@"Corrupt Video", nil) message:NSLocalizedString(@"This video is corrupted due to some network error. We suggest you to download again. Do you want to download it again?", nil) delegate:self cancelButtonTitle:NSLocalizedString(@"NO", nil) otherButtonTitles:NSLocalizedString(@"YES", nil),nil];
    [corruptVideoAlert show];
    [corruptVideoAlert release];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T22:27:33.903

对于我的场景，我最终记录了传入视频的预期内容长度，并确保在您尝试播放视频时文件大小匹配。

从这个意义上说，我可以更快地决定是否应该播放视频。如果文件大小不匹配，我只需重新开始下载。

# capistrano - 独角兽在部署+重启后继续使用旧代码

> ID：13578687
> 
> 赞同：8
> 
> 时间：2012-11-27T06:38:09.037
> 
> 标签：capistrano, unicorn

```
task :restart_unicorn, :except => { :no_release => true } do
  run "#{try_sudo} kill -s USR2 $(cat /var/www/app_name/shared/pids/unicorn.pid)"
end 
```

当我`sudo kill -s USR2 $(cat /var/www/app_name/shared/pids/unicorn.pid)`在服务器上执行此操作时，会创建一个新的独角兽主人，而旧的主人已经`(old)`附加到它的名字上。旧的永远不会被杀死，但即使我自己杀死它，新的独角兽实例仍然显示我部署之前的旧代码。新实例与旧实例具有相同的创建时间——就好像它只是被复制一样。如果我停止实例并重新启动它，它可以工作，但我希望能够进行零停机时间部署。

任何帮助表示赞赏。

**编辑**

在遵循 sugest Ilya O. 之后，我创建了一个执行此操作的 capistrano 任务：

```
old_pid = get_pid('/var/www/appname/shared/pids/unicorn.pid')
run "#{try_sudo} kill -s SIGUSR2 $(cat /var/www/appname/shared/pids/unicorn.pid)"
/var/www/app/current/tmp/pids/unicorn.pid)"
run "#{try_sudo} kill -s SIGWINCH #{old_pid}" 
```

这会在 pid 上运行 SIGUSR2，并杀死旧的独角兽进程。问题是我所有的应用程序服务器从未更新到我最近部署的代码，这个任务似乎只是将我的旧独角兽环境复制到一个新进程中。如果我简单地杀死主进程然后重新启动独角兽，它工作正常，但是有一分钟左右的请求被丢弃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T06:42:46.807

您是否`preload_app`在 Unicorn 配置中设置为 true ？如果是这样，您需要在新进程启动并运行后向原始主进程发送 SIGUSR2 和 SIGQUIT。

也可能发生的是原始主进程已经死亡，但子进程仍在服务请求。您可以尝试发送 SIGUSR2，在新的主进程产生后，发送 SIGWINCH（给旧的主进程）以杀死旧的独角兽子进程，然后对旧的主进程进行 SIGQUIT。您现在应该只有“新的”独角兽进程为请求提供服务。

编辑：尝试使用 SIGQUIT 而不是 SIGWINCH。我认为旧进程可能会在 SIGWINCH 之后产生工人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T09:56:10.383

我不确定你为什么要把所有的工作都放在 capistrano 上，通常在 capistrano 上这样的东西就足够了：

```
set :unicorn_pid, "unicorn.my_website.pid"

desc "Zero-downtime restart of Unicorn"
task :restart, roles: :app do
  if remote_file_exists?("/tmp/#{unicorn_pid}")
    puts "Killing /tmp/#{unicorn_pid}"
    run "kill -s USR2 `cat /tmp/#{unicorn_pid}`"
  else
    run "cd #{current_path} ; RAILS_ENV=#{rails_env} bundle exec unicorn_rails -c #{unicorn_config} -D"
  end
end 
```

然后真正的杀死独角兽老进程的代码其实是在独角兽配置上

```
# config/unicorn.rb

# Set environment to development unless something else is specified
env = ENV["RAILS_ENV"] || "production"

# See http://unicorn.bogomips.org/Unicorn/Configurator.html for complete documentation.
worker_processes 2 # amount of unicorn workers to spin up

APP_PATH = "/u/apps/my_website/current"

listen "/tmp/my_website.socket"

preload_app true

timeout 30         # restarts workers that hang for 30 seconds

pid "/tmp/unicorn.my_website.pid"

# By default, the Unicorn logger will write to stderr.
# Additionally, ome applications/frameworks log to stderr or stdout,
# so prevent them from going to /dev/null when daemonized here:
stderr_path APP_PATH + "/log/unicorn.stderr.log"
stdout_path APP_PATH + "/log/unicorn.stdout.log"

if env == "production"
  # Help ensure your application will always spawn in the symlinked
  # "current" directory that Capistrano sets up.
  working_directory APP_PATH

  # feel free to point this anywhere accessible on the filesystem
  user 'deploy', 'deploy' # 'user', 'group'
  shared_path = "/u/apps/my_website/shared"

  stderr_path "#{shared_path}/log/unicorn.stderr.log"
  stdout_path "#{shared_path}/log/unicorn.stdout.log"
end

before_fork do |server, worker|
  # the following is highly recomended for Rails + "preload_app true"
  # as there's no need for the master process to hold a connection
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
  end

  # When sent a USR2, Unicorn will suffix its pidfile with .oldbin and
  # immediately start loading up a new version of itself (loaded with a new
  # version of our app). When this new Unicorn is completely loaded
  # it will begin spawning workers. The first worker spawned will check to
  # see if an .oldbin pidfile exists. If so, this means we've just booted up
  # a new Unicorn and need to tell the old one that it can now die. To do so
  # we send it a QUIT.
  #
  # This enables 0 downtime deploys.
  old_pid = "/tmp/unicorn.my_website.pid.oldbin"
  if File.exists?(old_pid) && server.pid != old_pid
    begin
      Process.kill("QUIT", File.read(old_pid).to_i)
    rescue Errno::ENOENT, Errno::ESRCH
      # someone else did our job for us
    end
  end
end

after_fork do |server, worker|

  # Unicorn master loads the app then forks off workers - because of the way
  # Unix forking works, we need to make sure we aren't using any of the parent's
  # sockets, e.g. db connection (since "preload_app true")
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
  end

  # if preload_app is true, then you may also want to check and
  # restart any other shared sockets/descriptors such as Memcached,
  # and Redis.  TokyoCabinet file handles are safe to reuse
  # between any number of forked children (assuming your kernel
  # correctly implements pread()/pwrite() system calls)
end 
```

我大部分时间都使用该设置，并且我的应用程序重新加载没有任何问题，您可能已经拥有所有这些，因为它主要是默认配置，但是如果您缺少某些东西，请尝试一下；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T23:27:57.020

Unicorn 家伙为此有一个公共的 init.d 脚本，您可能应该将其添加到您的系统中并使用它。

您会发现 2 种不同的方式来重启 unicorn：重启和升级。

我个人将此脚本添加到 /etc/init.d/unicorn 中，设置此可执行文件然后您可以`sudo service unicorn upgrade`在您的 capistrano 配方中使用。

初始化脚本：[http ://unicorn.bogomips.org/examples/init.sh](http://unicorn.bogomips.org/examples/init.sh)

# matlab - 如何制作一个自动显示我的程序输出的循环

> ID：13578688
> 
> 赞同：0
> 
> 时间：2012-11-27T06:38:26.997
> 
> 标签：matlab, octave

在我的程序中，假设我解决了问题。的用户`N=6`。SIR 的阈值`SIRo=6`；生成的输出是`SIRmean=10`（假设）。

我想制作一个循环，以便

```
if SIRmean < SIRo

   disp N=6

else

  decrease the counter till SIRmean> SIRo
   and display the value of N for which this condition holds true.

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:58:05.210

您可以使用带有递减计数器和条件中断的简单 for 循环：

```
N=6;
for k=N:-1:0
   SIRmean = calc_SIR_mean(N);
   if SIRmean < SIRo
      disp(['N=' k])
      break;
   end
end 
```

函数`calc_SIR_mean`应该根据用户数量返回平均值（从你的问题中不清楚你是如何收到这个值的）。

# android - 在android中使用动画的两个活动之间的黑屏

> ID：13578690
> 
> 赞同：1
> 
> 时间：2012-11-27T06:38:36.403
> 
> 标签：android, animation

我正在使用 Apis 的 deme 在两个活动之间滑入和滑出。但是当我从一个活动跳到另一个活动时，会出现黑屏。

向左滑动-

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_interpolator" >

    <translate
        android:duration="300"
        android:fromXDelta="100%p"
        android:toXDelta="0" />

</set> 
```

向右滑动-

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_interpolator" >

    <translate
        android:duration="300"
        android:fromXDelta="-100%p"
        android:toXDelta="0" />

</set> 
```

从一项活动跳到另一项活动：-

```
Button button1 = (Button) findViewById(R.id.Button01);
        button1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                startActivity(new Intent(getApplicationContext(), SecondView.class));
                overridePendingTransition(R.anim.slide_left, R.anim.slide_right); 
```

});

为什么这个黑屏出现在两个活动之间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T07:01:32.840

你的第一个 xml 应该是这样的：

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_interpolator" >

<translate
    android:duration="300"
    android:fromXDelta="0"
    android:toXDelta="100%p" />

</set> 
```

fromXDelta 是在动画开始时应用的水平平移。将其设置为“100%p”会使第一个活动在动画开始时正好移出屏幕，因此是空白屏幕。

对函数的调用`overridePendingTransition(int, int)`应该是这样的：

```
overridePendingTransition(R.anim.slide_right, R.anim.slide_left); 
```

第一个参数确定**第二个**活动使用的过渡动画。此外，这两个动画可以更恰当地命名为 slide_out_to_right 和 slide_in_from_left，因为实际上它们都向右滑动。

# java - 打印 JPanel 作为放大的屏幕截图出现

> ID：13578696
> 
> 赞同：0
> 
> 时间：2012-11-27T06:39:13.517
> 
> 标签：java, swing

我正在用java创建一个高中管理系统。我有一个应该打印学生成绩单的功能。我决定将内容放入 JPanel 并打印 JPanel。遇到的问题是，如果打印到文件，我会以屏幕上显示的方式获得 Jpanel，但如果我打印到打印机，我会得到一个爆破的图像。下面是吹出的打印和文件中的打印![打印出来的](../Images/616b5a9d4667431ef911da4d79470e92.png)

![从文件中打印出来（即从 XPS 查看器）](../Images/ab8c5f77d9087e74033e0a6c72b68be1.png)

顺便说一句，我出于测试目的使用 hp 2515deskjet

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:03:37.813

你可以看看[RenderingHints](http://docs.oracle.com/javase/6/docs/api/java/awt/RenderingHints.html)和其他的东西是字体不匹配。您的框架字体不同，打印机字体不同。

# sublimetext2 - 使用 Sublime Text 将多行合并为一行

> ID：13578705
> 
> 赞同：78
> 
> 时间：2012-11-27T06:39:44.627
> 
> 标签：sublimetext2, sublimetext3, sublimetext

我对 Sublime Text 很陌生，我相信这是一个幼稚的问题。[在http://www.sublimetext.com/](http://www.sublimetext.com/)观看多行选择（2/6 幻灯片）。绝对喜欢它。

我理解`Ctrl (Cmd)`++ “多`Shift`选`L`”，以便我们可以同时进行编辑。但是，在演示中，它们还将所有行合并为 1 行。什么是捷径？
我使用了`**Ctrl**`+`**J**`但它只删除了一次，而不是所有出现的新行。

我使用 TextPad 并`\n`在空白处使用查找/替换。但似乎提供演示的人使用了某种捷径。

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2013-03-10T19:45:29.493

将多行合并为 1 的单个命令快捷方式是“连接行”。

*   `Command`++在`Shift`Mac`J`上加入行。
*   `CTRL`+ `Shift`+`J`在 Windows 上
*   编辑 > 线 > 连接线

**重要提示**：此键盘快捷键在 2021 年年中左右发布的 sublime text 版本中发生了变化。对于*旧*版本，请使用`Command` +`J`或`CTRL`+ `J`。

[在sublimetext.com](http://www.sublimetext.com/)上的演示动画中可以看到另一种方法。使用多个选择，`Ctrl`++用于将选择`Shift`拆分`L`为行，然后同时编辑每行。 `end`+`del`然后将删除所有换行符。这可以在[http://sublimetexttips.com/7-handy-text-manipulation-tricks-sublime-text-2/的幻灯片 2/6 中看到](http://sublimetexttips.com/7-handy-text-manipulation-tricks-sublime-text-2/)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-11-27T08:00:13.057

我认为，在演示中，他按下`Del`，光标位于行尾，进行多项选择。这样，`\n`在每个选定的行中都会删除。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2017-09-18T08:46:42.277

`ctrl+a`似乎正在研究崇高的`ctrl+j`文字3。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-01T05:51:51.173

编辑

join 将以下行连接到当前行，用一个空格替换空格之间的所有内容

[http://www.sublimetext.com/docs/commands](http://www.sublimetext.com/docs/commands)

转到菜单中的编辑选项，编辑 -> 线 -> 连接线

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-11-27T07:36:46.900

选择要合并的行并按`Ctrl + j`，如果要将所有文件放在 1 行中，请执行`Ctrl + a`和`Ctrl + j`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-18T20:20:54.927

如果要将行合并为一行，同时从行中删除起始和结束空格，则以下正则表达式应该可以工作：

```
Find What: ^\s*(.+)\s*\n
Replace With: \1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-23T19:16:03.097

`Join lines`是一个很好的命令，但它在合并的行之间添加了空格。要合并没有间距的行，最简单的方法似乎如下：

1.  `Find -> Replace`（Mac 上的 Command+Option+F）
2.  `Ctrl+Enter`在字段中输入换行符`Find What`。
3.  不要在`Replace With`字段中输入任何内容。
4.  按`Replace All`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-13T12:38:28.567

我一直在 Sublime Text 3 中使用正则表达式方法，如下所示：

*   按`Ctrl`+ `H`（在 Windows 中）在底部显示“查找和替换”对话框。
*   在“查找”字段中，使用`$\n\s*`(行尾、回车和后面的任意数量的空格，包括零，应该在下一行的开头)。
*   “替换”字段应为空。
*   点击“全部替换”或`Alt`+ `Ctrl`+ `Enter`。

这应该可以解决问题！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-27T15:11:46.120

Mac 的崇高文本 3：

cmd + j 不再有效，现在是`CMD + SHIFT + J`

# android - 为 TextView 的一部分设置不同的字体和颜色

> ID：13578710
> 
> 赞同：9
> 
> 时间：2012-11-27T06:40:01.023
> 
> 标签：android, typeface, spannablestring

我试过这个：

```
String s = "Some big string"
SpannableStringBuilder sb = new SpannableStringBuilder(s);
//normal font for 1st 9 chars
sb.setSpan(robotoRegular, 0,9,Spannable.SPAN_INCLUSIVE_INCLUSIVE);
//bold font for rest of the chars
sb.setSpan(robotoBold, 9,s.length(),Spannable.SPAN_INCLUSIVE_INCLUSIVE);
//also change color for rest of the chars
sb.setSpan(new ForegroundColorSpan(Color.BLACK), 9,s.length(),Spannable.SPAN_INCLUSIVE_INCLUSIVE);
textView.setText(sb); 
```

但这没有用。

它只需要最新的setSpan，即..，文本颜色正在更改，但字体没有更改。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-27T08:58:01.640

您必须使用 a`TypefaceSpan`而不是 a `Typeface`。

但是由于您使用的是自定义字体，因此您需要扩展`TypefaceSpan`.

查看此[答案](https://stackoverflow.com/a/4826885/1117415)并创建`CustomTypefaceSpan`课程。

现在执行以下操作：

```
Typeface robotoRegular = Typeface.createFromAsset(getAssets(), "fonts/Roboto-Regular.ttf");
Typeface robotoBold = Typeface.createFromAsset(getAssets(), "fonts/Roboto-Bold.ttf");

TypefaceSpan robotoRegularSpan = new CustomTypefaceSpan("", robotoRegular);
TypefaceSpan robotoBoldSpan = new CustomTypefaceSpan("", robotoBold);

// normal font for 1st 9 chars
sb.setSpan(robotoRegularSpan, 0, 9, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
// bold font for rest of the chars
sb.setSpan(robotoBoldSpan, 9, s.length(), Spannable.SPAN_INCLUSIVE_INCLUSIVE);
// also change color for rest of the chars
sb.setSpan(new ForegroundColorSpan(Color.BLUE), 9, s.length(), Spannable.SPAN_INCLUSIVE_INCLUSIVE);
textView.setText(sb); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-23T10:23:22.293

对于喜欢为此制作实用程序类的人：

```
public static SpannableStringBuilder makeTextBold (Activity activity, String string, int fromCharIndex, int toCharIndex) {
    return makeTextBold(activity, new SpannableStringBuilder(string), fromCharIndex, toCharIndex);
}

public static SpannableStringBuilder makeTextBold (Activity activity, SpannableStringBuilder string, int fromCharIndex, int toCharIndex) {
    SpannableStringBuilder sb = new SpannableStringBuilder(string);
    Typeface bold = Typeface.createFromAsset(activity.getAssets(), "fonts/NexaBold.ttf");
    TypefaceSpan robotoBoldSpan = new CustomTypefaceSpan("", bold);
    sb.setSpan(robotoBoldSpan, fromCharIndex, toCharIndex, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
    return sb;
}

public static SpannableStringBuilder colorText (int resourceId, String string, Activity activity, int fromCharIndex, int toCharIndex) {
    return colorText(resourceId, new SpannableStringBuilder(string), activity, fromCharIndex, toCharIndex);
}

public static SpannableStringBuilder colorText (int resourceId, SpannableStringBuilder sb, Activity activity, int fromCharIndex, int toCharIndex) {
    sb.setSpan(new ForegroundColorSpan(activity.getResources().getColor(resourceId)), fromCharIndex, toCharIndex, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
    return sb;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:44:54.143

检查此代码：-

```
protected void onDraw(Canvas canvas) {

        Paint circlePaint = new Paint();
        Typeface mType = Typeface.create(Typeface.SANS_SERIF, Typeface.ITALIC);
        circlePaint.setTextSize(25);
        circlePaint.setColor(Color.RED);
        circlePaint.setTypeface(mType);
        canvas.drawText("Default Typeface", 50, 100, circlePaint);
        //
        circlePaint.setFlags(Paint.UNDERLINE_TEXT_FLAG);
        circlePaint.setColor(Color.YELLOW);
        canvas.drawText("Underline Text Flag", 50, 120, circlePaint);
        //
        circlePaint.setFlags(Paint.STRIKE_THRU_TEXT_FLAG);
        circlePaint.setColor(Color.GREEN);
        canvas.drawText("Strike Thru Text Flag", 50, 140, circlePaint);
        //
        circlePaint.setFlags(Paint.ANTI_ALIAS_FLAG);
        circlePaint.setColor(Color.WHITE);
        canvas.drawText("Anti Alias Flag", 50, 160, circlePaint);
        //
        circlePaint.setFlags(Paint.DEV_KERN_TEXT_FLAG);
        circlePaint.setColor(Color.WHITE);
        canvas.drawText("Dev Kern Text Flag", 50, 180, circlePaint);
        //
        circlePaint.setFlags(Paint.FAKE_BOLD_TEXT_FLAG);
        circlePaint.setColor(Color.CYAN);
        canvas.drawText("Fake Bold Text Flag", 50, 200, circlePaint);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-03T08:29:43.690

谷歌实际上在[这段视频](https://youtu.be/x-FcOX6ErdI?t=793)中给出了官方答案：

**字符串.xml**

```
 <string name="test">Hello <annotation font="sans-serif-medium">World!</annotation></string> 
```

在代码中：

```
val spannedString = getText(R.string.title) as SpannedString
val annotations = spannedString.getSpans(0, spannedString.length, Annotation::class.java)
for (annotation in annotations) {
    if (annotation.key == "font") {
        val fontName = annotation.value
        val typeFace: Typeface = ...
        spannable.setSpan(TypefaceSpan(typeFace), abstract.getSpanStart(annotation),
                abstract.getSpanEnd(annotation), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)
    }
} 
```

但是，这段代码遗漏了一些重要的事情：如何从字符串中获取字体（尤其是内置的），以及那里的“spannable”和“abstract”是什么。

如果有人知道如何正确获取这些内容并在这里填写空白，请告诉我。

# ruby-on-rails - 使用 Webmock 伪造成功的 ActiveMerchant 响应

> ID：13578722
> 
> 赞同：1
> 
> 时间：2012-11-27T06:41:09.773
> 
> 标签：ruby-on-rails, rspec, activemerchant, webmock

我正在使用 ActiveMerchant 与 Authorize.net CIM 集成。我正在编写自动化测试，并且我已经开始实施 Webmock 调用，这样我的测试在每次运行时都不会真正访问 Authorize.net。

我已经根据原始请求数据的响应创建了 XML 文件，并且在大多数情况下，它运行良好。但是，当我模拟一个成功的响应时，ActiveMerchant 出于某种原因仍然告诉我 Response.success？不是真的。

我的功能

```
if self.cim_customer_profile_id.nil?
  ActiveMerchant::Billing::Base.mode = :test

  customer_profile_information = {
    :profile     => {
      :merchant_customer_id => self.customer.username.first(20),
      :email => self.customer.email
    }
  }

  gateway = ActiveMerchant::Billing::AuthorizeNetCimGateway.new(
    :login    => AUTHORIZE_NET_API_LOGIN_ID,
    :password => AUTHORIZE_NET_API_TRANSACTION_KEY
  )

  response = gateway.create_customer_profile(customer_profile_information)

  if response.success?
    self.cim_customer_profile_id = response.authorization
  else
    raise StandardError, response.message
  end
end 
```

然后我的回复是：

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8

<?xml version="1.0" encoding="utf-8"?>
<createCustomerProfileResponse xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns='AnetApi/xml/v1/schema/AnetApiSchema.xsd'>
  <messages>
    <resultCode>
      Ok
    </resultCode>
    <message>
      <code>
        I00001
      </code>
      <text>
        Successful.
      </text>
    </message>
  </messages>
  <customerProfileId>10793616</customerProfileId>
  <customerPaymentProfileIdList/>
  <customerShippingAddressIdList/>
  <validationDirectResponseList/>
</createCustomerProfileResponse> 
```

ActiveMerchant 是否有任何理由无法处理成功的存根请求？还是我错过了 ActiveMerchant 为了注册响应实际上成功而需要的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:06:41.523

啊，我太笨了。为了便于阅读，我在所有 XML 标记之后添加了新行，但它们干扰了 ActiveMerchant 解析和评估响应的方式。

所以正确的 XML 响应模拟应该是：

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
<?xml version="1.0" encoding="utf-8"?>
<createCustomerProfileResponse xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns='AnetApi/xml/v1/schema/AnetApiSchema.xsd'>
  <messages>
    <resultCode>Ok</resultCode>
    <message>
      <code>I00001</code>
      <text>Successful.</text>
    </message>
  </messages>
  <customerProfileId>10793616</customerProfileId>
  <customerPaymentProfileIdList/>
  <customerShippingAddressIdList/>
  <validationDirectResponseList/>
</createCustomerProfileResponse> 
```

# android - 如何避免在同一个 webview 中打开 webview 链接

> ID：13578727
> 
> 赞同：0
> 
> 时间：2012-11-27T06:41:14.037
> 
> 标签：android, android-webview

当用户单击`webview`. 我想显示一个对话框，询问用户是否想在默认浏览器中查看它，如果他选择是，那么他应该被带到默认浏览器，否则它根本不应该加载链接。
但是，我面临的问题是，我可以在覆盖的方法中`run()`显示`WebViewClient's`对话框`shouldOverrideUrlLoading()`。当用户选择“是”时，我`startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse(url)));`将在默认浏览器中显示它。但是，无论用户选择是/否，它都会显示`webview`我想要避免的链接。任何建议表示赞赏...TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:47:58.793

```
WebView myWebView = (WebView) findViewById(R.id.webview);
myWebView.setWebViewClient(new WebViewClient());

private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (Uri.parse(url).getHost().equals("www.example.com")) {
            // This is my web site, so do not override; let my WebView load the page
            return false;
        }
        // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        startActivity(intent);
        return true;
    }
} 
```

[http://developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:02:50.877

我通过在 shouldOverrideUrlLoading() 方法中重新加载相同的 URL 解决了这个问题。感谢您的建议

# android - 如何在android中的指定矩形中绘制文本？

> ID：13578731
> 
> 赞同：3
> 
> 时间：2012-11-27T06:41:39.720
> 
> 标签：android, android-canvas, drawtext

有没有一种方法可以在指定的矩形中绘制文本？我正在使用直接绘制到画布（ImageView）

```
canvas.drawText(text,x,y,paint) 
```

但这将整个文本绘制在一行中。我想用指定的 (x,y) ,(x1,y1) 限制来包装文本。我不想使用 textviews 或任何其他视图。

我只想在图像上绘制文本。

有什么方法可以做到这一点吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:59:49.610

首先，您必须确定文本大小。每个字符的宽度可以通过getTextWidths()获取，高度与文本大小相同。尝试估计一个初始文本大小，并使用文本的高度和宽度来调整最终值。

其次，您需要断线。Paint.getTextWidths() 或 Paint.breakText() 都可以达到这个目的。

编辑：添加代码示例。

```
public static class RectTextView extends View {
    private int mWidth = 200;
    private int mHeight = 100;
    private String mText = "Hello world. Don't you know why, why you and I.";
    private Paint mPaint;
    private List<Integer> mTextBreakPoints;

    public RectTextView(Context context) {
        this(context, null);
    }

    public RectTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        mPaint = new Paint();
        mPaint.setColor(Color.WHITE);
        mPaint.setAntiAlias(true);
        setSuitableTextSize();
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        setMeasuredDimension(mWidth, mHeight);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        int start = 0;
        int x = 0;
        int y = 0;
        for (int point : mTextBreakPoints) {
            y += mPaint.getTextSize();
            canvas.drawText(mText, start, point, x, y, mPaint);
            start = point;
        }
    }

    private void setSuitableTextSize() {
        int textSize = getEstimateTextSize();
        for (; textSize > 0; textSize--) {
            if (isTextSizeSuitable(textSize))
                return;
        }
    }

    private boolean isTextSizeSuitable(int size) {
        mTextBreakPoints = new ArrayList<Integer>();
        mPaint.setTextSize(size);
        int start = 0;
        int end = mText.length();
        while (start < end) {
            int len = mPaint.breakText(mText, start, end, true, mWidth,
                    null);
            start += len;
            mTextBreakPoints.add(start);
        }
        return mTextBreakPoints.size() * size < mHeight;
    }

    private int getEstimateTextSize() {
        return (int) Math.sqrt(mWidth * mHeight / mText.length() * 2);
    }
} 
```

# scala - Playframework中使用异常时如何添加缓存机制

> ID：13578734
> 
> 赞同：5
> 
> 时间：2012-11-27T06:42:03.623
> 
> 标签：scala, playframework, playframework-2.0, anorm

我看到 anorm 不是 ORM 框架，它是通过 SQL 直接查询数据。对于大多数应用程序/网站，我们不应该每次都查询数据库，我们需要通过 SQL 或 item id 缓存数据。我想知道 playframework 是否提供了任何类型的缓存机制？如果没有怎么添加呢？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T10:06:24.883

在查询数据库之前，您可以在控制器中使用 Play 缓存。[下面是一个从Play 缓存文档](http://www.playframework.org/documentation/2.0.4/ScalaCache)和[Scala API](http://www.playframework.org/documentation/api/2.0.4/scala/index.html#play.api.cache.Cache$)派生的简单示例：

```
val user: User = Cache.getOrElse[User](key = "user" + userId, expiration = 10) {
  User.findById(userId)
} 
```

在这段代码中，在尝试查询数据库之前，我们在缓存中进行查找以检查之前是否未加载用户。如果在缓存中找不到，我们将其存储在缓存中，并在 10 秒内过期。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T10:13:02.263

您可以简单地缓存 Anorm 方法的答案。例如，我使用的真实方法：

```
def findById(id: Long): Option[User] = {
    Cache.getOrElse(userCacheKey + id, 60*60) {
      DB.withConnection {
        implicit connection =>
          SQL("select * from publisher where id = {id}").on('id -> id).as(User.simple.singleOpt)
      }
    }
} 
```

代码执行 Select 并将答案存储在缓存中`getOrElse`。如果该值在缓存中，它将被检索并且不会执行任何查询。

唯一的问题是，当您更新实体用户时，您必须更新缓存（因此它不会保留过时的数据）：

```
// Assumes a user: User object available with the updated user
Cache.set(userCacheKey + id, cached.copy(name = user.name, avatar = user.avatar, bio = user.bio, url = user.url, location = user.location), 60*60) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:09:59.247

假设您使用的是 Play2 框架，它确实提供了缓存机制。它在这里有很好的文档：

[http://www.playframework.org/documentation/2.0/JavaCache](http://www.playframework.org/documentation/2.0/JavaCache)（它被称为 javacache，但它适用于 Scala）

# css - Div 内的 Div 具有 css 的溢出属性

> ID：13578736
> 
> 赞同：1
> 
> 时间：2012-11-27T06:42:29.990
> 
> 标签：css, html

我正在开发一个 html 页面，其中有一个 div 标签，并且在该 div 标签内有一个多个 div 标签，在每个 div 标签里面也有一些 div 标签

例如

```
<div>
     <div class=wrap>
           <div class="child" style="width:30%"></div>
           <div class="child" style="width:30%"></div>   
           <div class="child" style="width:40%"></div>
    </div>

    <div class=wrap>
           <div class="child" style="width:10%"></div>
           <div class="child" style="width:50%"></div>   
           <div class="child" style="width:40%"></div>
    </div>

     <div class=wrap>
           <div class="child" style="width:70%"></div>
           <div class="child" style="width:30%"></div>   

    </div>

    <div class=wrap>
            <div class="child" style="width:100%"></div>
    </div>

    <div class=wrap>

           <div class="child" style="width:80%"></div>
           <div class="child" style="width:10%"></div>   
           <div class="child" style="width:10%"></div>

    </div>

</div> 
```

我的预期结果是

```
|------30------|------30------|---------40----------|
|--10--|---------40---------|----------50-----------|
|-----------------70-----------------|------30------|
|------------------------100------------------------|
|-------------------80----------------|--10--|--10--| 
```

但我得到的实际结果

```
|------30------|------30------|
---------40----------|
|--10--|---------40---------|
----------50-----------|
|-----------------70-----------------|
------30------|
|------------------------100------------------------|
|-------------------80----------------|--10--|
--10--| 
```

这意味着当子 div 标签占据父 div 标签的 100% 区域时，它会溢出并进入新行，但我希望该 div 标签水平（如果属于同一个父 div）

我尝试使用 div 标签的溢出属性作为溢出：隐藏，但它隐藏了下一个可能溢出的 div 标签

下面是我的 CSS 类 CSS 代码：

```
.child
{
 float:left;
height:50px;
position: relative;
 overflow: hidden;
 border-bottom:1px solid #46464f;
border-right:1px solid #46464f;

}

.wrap {
    height: 50px;
    width: 100%;

    border-top: 1px solid #46464f;
    border-left: 1px solid #46464f;
} 
```

请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:50:40.000

现在`box-sizing` 在您的`.child` **班级**中定义，因为您定义了**边框** `left`或`top`

比你的**孩子** `with`计算**这个**`50%+1`

```
.child{
box-sizing:border-box;
  -webkit-box-sizing:border-box;
  -moz-box-sizing:border-box;
} 
```

***[现场演示](http://tinkerbin.com/XsUtGrqw)***

更多关于***[盒子尺寸的信息](http://css-tricks.com/box-sizing/)***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:50:40.777

您的左右边框各增加 1px 的总宽度。这对元素来说没什么大不了的`.wrap`，但是对于`.child`元素来说，这使得它们不能全部放在一行中，因为它们每个都有额外的 1px 宽度。

这是您的布局使用`outline`（不添加宽度）来显示子元素的位置：http: [//jsfiddle.net/tWESq/](http://jsfiddle.net/tWESq/)

您必须删除左右边框。作为一种解决方法，您可能必须为每个`.child`元素添加另一个内部 div 并在其上设置边框。[如果您可以使用](http://caniuse.com/#search=box-sizing)该[`box-sizing`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)属性，那也是一个解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:49:17.390

我认为您在某些 div 之间有空格。尝试像这样删除所有空格

```
<div class="child" style="width:30%"></div><div class="child" style="width:30%"></div><div class="child" style="width:40%"></div> 
```

或者也许是因为

```
border-right:1px solid #46464f; 
```

尝试删除它。

# android - 点击时 Android WebView 不播放 Youtube 视频

> ID：13578742
> 
> 赞同：0
> 
> 时间：2012-11-27T06:43:11.180
> 
> 标签：android, android-webview

我知道这个问题被问了很多次，但没有一个解决方案有效。我想做的很简单。我有一个 url，我想将该 url 加载到一个 .那个`WebView`url 包含视频。点击时 Bt播放按钮，它不播放任何东西。

以下是我迄今为止尝试过的代码，

```
public class MoviesActivity extends Activity {

    WebView mWebView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        // Adds Progrss bar Support
        this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
        setContentView(R.layout.webview);

        // Makes Progress bar Visible
        getWindow().setFeatureInt(  Window.FEATURE_PROGRESS, Window.PROGRESS_VISIBILITY_ON); 

        // Get Web view
        mWebView = (WebView) findViewById( R.id.webView1); //This is the id you gave 
        if (Build.VERSION.SDK_INT < 8) {
            mWebView.getSettings().setPluginsEnabled(true);
        } else {
            mWebView.getSettings().setPluginState(PluginState.ON);
        }

             //to the WebView in the main.xml
        mWebView.getSettings().setJavaScriptEnabled(true);   
        mWebView.getSettings().setSupportZoom(true);         //Zoom Control on web (You don't need this 
      //  mWebView.getSettings().setPluginsEnabled(true);                                                    //if ROM supports Multi-Touch      
        mWebView.getSettings().setBuiltInZoomControls(true); //Enable Multitouch if supported by ROM
        // Load URL

        // Sets the Chrome Client, and defines the onProgressChanged
        // This makes the Progress bar be updated.
        final Activity MyActivity = this;
        mWebView.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress)   
        {
            //Make the bar disappear after URL is loaded, and changes string to Loading...
            MyActivity.setTitle("Loading...");
            MyActivity.setProgress(progress * 100); //Make the bar disappear after URL is loaded

            // Return the app name after finish loading
            if(progress == 100)
                MyActivity.setTitle(R.string.app_name);
          }
        });

        mWebView.setWebViewClient(new HelloWebViewClient()); 
        mWebView.loadUrl("http://www.youtube.com/user/africanmoviesnews");  
        mWebView.setWebViewClient(new HelloWebViewClient()); 
    }//End of Method onCreate
    private class HelloWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:05:55.650

你可以试试这个，它对我有用。

```
WebView video = (WebView) findViewById(R.id.video);
String widthAndHeight = "width='220' height='200'";
String videoURL = "http://www.youtube.com/v/DZi6DEJsOJ0?fs=1&amp;hl=nl_NL";

String temp = "<object "+widthAndHeight+">" +
"<param name='allowFullScreen' value='false'>" +
"</param><param name='allowscriptaccess' value='always'>" +
"</param><embed src='"+ videoURL +"'" +
" type='application/x-shockwave-flash' allowscriptaccess='always' allowfullscreen='true'" + widthAndHeight +
"></embed></object>";

video.getSettings().setJavaScriptEnabled(true);
video.getSettings().setPluginsEnabled(true);
video.loadData(temp,"text/html", "utf-8"); 
```

# javascript - 写入 html 中的文本文件

> ID：13578748
> 
> 赞同：0
> 
> 时间：2012-11-27T06:43:30.690
> 
> 标签：javascript, html

我想尝试使用 HTML 上的小屏幕向文件提​​供输出。每次单击按钮时，我都希望替换文件中的文本。这是我写的代码：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>This is Web App</title>
</head>
<script>
function createDoc()
{
var doc=document.open("answer.txt","replace");
var txt="<html><body>You clicked Allow</body></html>";
doc.write(txt);
doc.close();
}

function createDoc2()
{
var doc=document.open("answer.txt","replace");
var txt="<html><body>You clicked Deny</body></html>";
doc.write(txt);
doc.close();
}
</script>

<body>
<h1> This is the visitor at your house</h1>
<img src = "./images/chef.gif" width="130" height="101" />
<br />
<button name="Yes" type="button" onclick="createDoc()">Allow! </button>
<button name="No" type="button" onclick="createDoc2()">Deny! </button>

</body>
</html> 
```

我知道这不是正确的方法，但我正在努力学习。请帮助我并指出我的错误，并告诉我如何在可能的情况下纠正它们。我知道可能有很多。我只是想在这一点上自学。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:01:29.783

如果您只想下载页面生成的文件，这个问题可能会有所帮助：

[下载数据url文件](https://stackoverflow.com/questions/3916191/download-data-url-file)

这个想法是您需要将数据编码为 base64（不难，现代浏览器支持[btoa](https://stackoverflow.com/questions/3916191/download-data-url-file)）并指示浏览器打开它。如果你通过给文件一个它不知道如何打开的 mime 类型来欺骗它（例如`application/octet-steam`），它会下载文件而不是显示它。

此解决方案的问题是您无法命名文件。

如果您想命名文件，我`POST`会将数据发送到您的网络服务器，将其写入服务器上的文件，然后`window.open`使用文件的路径执行操作。这将允许您下载有问题的文件。

正在制定允许 Javascript 直接写入文件的草案，但该文件将位于用户无法直接访问的沙盒位置。这仅适用于 Web 应用程序在客户端上存储大量数据。从您的问题来看，这可能不是您想要的。尝试上述解决方案之一。

# php - 使用 PHP 或 Javascript 的回历（阿拉伯语）日历日期选择器

> ID：13578749
> 
> 赞同：9
> 
> 时间：2012-11-27T06:43:38.460
> 
> 标签：php, javascript, datepicker

我正在开发一个项目，该项目的表单要求用户使用回历（阿拉伯语）日历输入日期。我只熟悉公历的 Javascript 日期选择器。

我在互联网上搜索了很多，我得到的最接近的是波斯日历的 JS 代码，它是阿拉伯语，但其他一切都不同。例如日期、月份等名称。波斯历是基于阳历的。

无论如何，请告诉我能做什么。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T22:12:59.800

您必须使用库/类为您完成转换工作，其中一个可用选项是 Ar-PHP 库提供的（它是在 LGPL 许可下发布的免费开源库），请在下面找到示例代码：

```
date_default_timezone_set('UTC'); 
$time = time(); 

require('I18N/Arabic.php'); 
$obj = new I18N_Arabic('Date'); 

$fix = $obj->dateCorrection ($time); 

echo $obj->date('l dS F Y h:i:s A', $time, $fix); 
```

[您可以在此处](http://www.ar-php.org/ar-example-Date-php-arabic.html)找到一个生活示例并检查输出

有关计算本身如何完成的更多信息，请参见[此处](http://www.ar-php.org/I18N/Arabic/Docs/I18N_Arabic/_Arabic---Date.php.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:54:25.303

阿拉伯语 PHP 项目可以帮助您使用 PHP。

[http://www.ar-php.org/features-php-arabic.html](http://www.ar-php.org/features-php-arabic.html)

# android - android中的Alarm Manager，Alarm Dialog和Activity组

> ID：13578758
> 
> 赞同：0
> 
> 时间：2012-11-27T06:44:29.043
> 
> 标签：android, android-intent, android-activity, alarmmanager

我正在尝试为活动组实现带有**警报对话框的****警报管理器。**我可以通过在我的应用程序内部或外部暂停警报对话框来成功进入计划的活动。如果安排了活动组而不是活动，则在暂停警报对话框时无法进入活动组。（可以在应用程序中但不能在应用程序外部暂停警报对话框时进入活动组。 )

 ****示例代码如下：**

```
public  static  ActivityGroup   group; 
```

* * *

```
public  static  void    switchPendingActivity(Class<?> destClass)
{
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setClass(group, destClass);
View view = group.getLocalActivityManager().startActivity(destClass.getSimpleName(),intent).getDecorView();
group.setContentView(view);
} 
```

* * *

我已经开始了活动组，`getLocalActivityManager().startActivity()`并且意图的标志在意图的`FLAG_ACTIVITY_NEW_TASK`位置`setFlags`。即使在上面的代码执行之后，活动组也没有出现在前台。（在调试代码时，我确定活动组没有出现在前台，但是执行了一些内部函数，例如为活动组的活动绘制表格，这些函数在 onCreate() 中调用。）

因此，我不确定上述代码是否需要任何更新才能正常运行以在暂停警报对话框时安排活动组中的活动。请帮助我解决上述问题。

* * *

我的问题不是暂停警报。我想通过警报管理器调度程序进入活动组。活动组应该在警报管理器调度到期后出现在前台，但它永远不会发生（但活动组活动的 onCreate 函数被执行）。只有当我们退出我们的应用程序时才会发生上述情况。无论应用程序内部还是外部，都会出现警报对话框。在单击警报对话框的确定​​按钮时，我们需要进入活动组的活动，但它没有发生。如何解决上述情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:08:17.197

```
public class AndroidAlarmService extends Activity {

private PendingIntent pendingIntent;

/** Called when the activity is first created. */

@Override

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    Button buttonStart = (Button)findViewById(R.id.startalarm);

    Button buttonCancel = (Button)findViewById(R.id.cancelalarm);

    buttonStart.setOnClickListener(new Button.OnClickListener(){

 @Override

 public void onClick(View arg0) {

  // TODO Auto-generated method stub

  Intent myIntent = new Intent(AndroidAlarmService.this, MyAlarmService.class);

  pendingIntent = PendingIntent.getService(AndroidAlarmService.this, 0, myIntent, 0);

           AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

           Calendar calendar = Calendar.getInstance();

           calendar.setTimeInMillis(System.currentTimeMillis());

           calendar.add(Calendar.SECOND, 10);

           alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);

  Toast.makeText(AndroidAlarmService.this, "Start Alarm", Toast.LENGTH_LONG).show();

 }});

    buttonCancel.setOnClickListener(new Button.OnClickListener(){

 @Override

 public void onClick(View arg0) {

  // TODO Auto-generated method stub

  AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

  alarmManager.cancel(pendingIntent);

           // Tell the user about what we did.

           Toast.makeText(AndroidAlarmService.this, "Cancel!", Toast.LENGTH_LONG).show();

 }});

}

} 
```**

# ios - 我可以使用某种方法来获取变量名吗？

> ID：13578766
> 
> 赞同：1
> 
> 时间：2012-11-27T06:45:09.507
> 
> 标签：ios, instance, var

我创建了一个类的实例。我可以使用某种方法获取变量名，然后打印出来吗？当我做一些测试项目时，我只是想要这个。我想我真正的意思是变量名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:50:53.637

不幸的是，不，你不能。

对象实例没有名称。类有名称。方法有名字。属性有名称。但是对象实例没有。变量有名称，但它们不是实例所独有的，无论如何，您无法以编程方式访问它。

如果您只是调用该`description`方法，您通常会得到一些东西来识别实例，但这不是一个名称。

`UIView`对象具有数字`tag`属性，因此您可以设置该属性并以这种方式识别您的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:23:19.303

property_getAttributes 是 Objective-C 运行时的一部分，如此处所述[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Introduction/Introduction.html#//apple_ref/doc/uid/ TP40008048-CH1-SW1](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008048-CH1-SW1)。

如果您想对 ObjC 类进行某种内省，这是您的必经之路。我不认为这是不稳定的，因为 Objective-C 运行时本身是相当稳定的。此外，还有一个官方指南（参见上面的链接），因此您可以相信它与任何其他官方 Apple API 一样稳定。

# c++ - 如何从诸如 systeminfo.exe 显示的区域设置字符串中检索“人类可读”字符串？

> ID：13578769
> 
> 赞同：0
> 
> 时间：2012-11-27T06:45:23.327
> 
> 标签：c++, c, winapi, locale, native

```
System Locale:             en-us;English (United States)
Input Locale:              en-us;English (United States) 
```

当您运行 systeminfo.exe 时，有用的信息包括上述两行。Windows API 或 C 运行时函数是否提供字符串**English (United States)**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:23:36.853

它可以与`GetLocaleInfo`. LCTYPE 是 LOCALE_SENGLANGUAGE / LOCALE_SENGCOUNTRY，我猜。

```
#include <windows.h>
#include <stdio.h>

int
main() {
  char language[256] = {0}, country[256] = {0};
  GetLocaleInfo(
    GetUserDefaultLCID(),
    LOCALE_SENGLANGUAGE,
    language,
    sizeof(language));
  GetLocaleInfo(
    GetUserDefaultLCID(),
    LOCALE_SENGCOUNTRY,
    country,
    sizeof(country));
  printf("%s (%s)\n", language, country);
}
// I got "Japanese (Japan)" 
```

# c# - 如何找到适合特定文化的任何资源

> ID：13578770
> 
> 赞同：1
> 
> 时间：2012-11-27T06:45:26.923
> 
> 标签：c#, dll, reference, assemblies

我的花药分支有一个项目。在运行该项目时，我遇到了以下错误：

找不到任何适合指定文化或中性文化的资源。确保“Manufacturing.Images.resources”在编译时被正确嵌入或链接到程序集“QBSBM”中。或者所需的所有卫星组件都是可加载的并完全烧焦。

实际上我在 Manufaturing 项目下没有 Images 文件夹。但在错误消息中显示。你能建议我如何解决这个参考错误。

# jquery - jQuery - Each() 选择器适用于其他元素，如何避免？

> ID：13578775
> 
> 赞同：0
> 
> 时间：2012-11-27T06:46:23.143
> 
> 标签：jquery, image, jquery-selectors

**我正在尝试做的事情：**

jQuery 检查所有：`<div class="message-body">`

但是，另一个名为: 的 div`<div class="message-body">`也被选中。

该代码按预期工作 - 但***包括***具有相似名称的其他 div。

如何防止 jQuery 选择这些其他元素？

示例可以在这里看到：http: [//jsfiddle.net/Z5HJE/](http://jsfiddle.net/Z5HJE/)

顶部图像不应用作链接。

底部图像应该是唯一可以用作链接的图像。

我根本没有 jQuery 经验，但我的网站需要这个简单的功能。

感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:50:34.307

jQuery 完全按照您的指示去做。

当迭代所有`.message-body`元素时，它应该对**所有**元素进行迭代。

在注意到您可能拼错了您的问题后，您的问题是您遍历所有 div，然后再次遍历所有`img`标签，无论它们的位置如何。你应该试试这个：`$('.message-body img')`在你的第一个`each`循环中，你不需要两者。

代码 ：

```
 $('.message-body img').each(function ()
   {
      var currImg = $(this);
      currImg.wrap("<a target='_blank' href='" + currImg.attr("src") + "'/>");
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:54:14.727

这将工作:)

```
 $(function ()
    {
       $('.message-body').each(function ()
        {
           $(this).find('img').each(function ()
            {
                var currImg = $(this);  // cache the selector
                currImg.wrap("<a target='_blank' href='" + currImg.attr("src") + "'/>");
            });
        });
    });​ 
```

[http://jsfiddle.net/Z5HJE/2/](http://jsfiddle.net/Z5HJE/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:54:40.277

我假设你需要在里面获取 img 标签`<div class="message-body">`，所以你可以修改你的 javascript 代码成为：

```
$('.message-body').each(function ()
{
   $(this).find('img').each(function ()
   {
      var currImg = $(this);  // cache the selector
      currImg.wrap("<a target='_blank' href='" + currImg.attr("src") + "'/>");
   });
}); 
```

# salesforce - Apex 编译错误：不支持 sObject 类型“Book__c”

> ID：13578776
> 
> 赞同：1
> 
> 时间：2012-11-27T06:46:23.907
> 
> 标签：salesforce, apex-code

我是顶点编程的新手。我正在使用 site.com。我正在使用此代码创建新的顶点类-

```
@isTest 
private class HelloWorldTestClass {
    static testMethod void validateHelloWorld() {
       Book__c b = new Book__c(Name='Behind the Cloud', Price__c=100);
       System.debug('Price before inserting new book: ' + b.Price__c);

       // Insert book 

       insert b;

       // Retrieve the new book 

       b = [SELECT Price__c FROM Book__c WHERE Id =:b.Id];
       System.debug('Price after trigger fired: ' + b.Price__c);

       // Test that the trigger correctly updated the price 

       System.assertEquals(90, b.Price__c);
    }
} 
```

但它给了我这个错误-错误：编译错误：***不支持*****sObject类型'Book_c '。*如果您尝试使用自定义对象，请务必*在实体名称后附加“_c”。请参考您的 WSDL 或相应名称的描述调用。在第 13 行第 12 列。**

帮帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:08:10.820

您是否真的在 Salesforce 实例中创建了这样的对象？有一些标准对象（如`User`），您很可能也有与 CRM 产品相关的对象（如`Account`、`Contact`、`Opportunity`），但它们`Book__c`将是您或您组织中的其他系统管理员创建的自定义对象。

检查设置（Web 界面右上角）-> 创建-> 对象。有一个[youtube 教程](http://www.youtube.com/watch?v=uD5t8rCvqlE)，或者您可以随时单击“此页面的帮助”链接。

要在站点上公开此对象（这意味着世界上任何人都可以查看和插入书籍），您必须执行[更多步骤](http://login.salesforce.com/help/doc/en/siteforce_data_overview.htm)。但由于它是一个无法编译的测试类，我认为你还没有遇到这个问题。有关权限的更多信息：http: [//login.salesforce.com/help/doc/en/siteforce_data_access_perms.htm](http://login.salesforce.com/help/doc/en/siteforce_data_access_perms.htm)

# php - 第一次单击按钮时，jquery.load() 在第一次单击时不起作用

> ID：13578781
> 
> 赞同：0
> 
> 时间：2012-11-27T06:46:36.447
> 
> 标签：php, jquery

我有一个按钮，一旦您单击，它将在现有表中插入一个新行。我面临的问题是我必须第一次单击两次才能插入新行。但是在那之后，每次单击一次，都会插入该行。

按钮：

```
<input type="button" id="add_po_item" name="add_po_item" value="Add Next PO Item" class="btn" style="width:150px; visibility:visible" onclick="addStock(this, '<?php echo $prod_id; ?>', '<?php echo $poid; ?>'); "> 
```

添加新行的javascript函数：

```
function addStock(obj, stock_id, poid)
{
        var inputs = document.getElementById('counter').value*1;
        var elemName = "hid"+inputs; 

        if(obj.id == 'add_po_item')
        {
            $('#' + elemName).load("grn_additem.php", { inputs: inputs, stock_id: stock_id, poid: poid } );
        }

        inputs++;
        var table = document.getElementById("add");
        var elem = document.createElement("tr");
        elem.id = "hid" + inputs;
        table.appendChild(elem);

        document.getElementById('counter').value = inputs;
} 
```

grn_additem.php 中的内容

```
<td width="144"><input type="text" id="ttlM3_<?php echo $ctr; ?>" name="ttlM3_<?php echo $ctr; ?>" readonly="readonly" style="border:none; text-align:center" value="0" /></td>
<td width="144"><input type="text" id="m31_<?php echo $ctr; ?>" name="m31_<?php echo $ctr; ?>" onkeyup="calcM3('<?php echo $ctr; ?>')" /></td>
<td width="144"><input type="text" id="m32_<?php echo $ctr; ?>" name="m32_<?php echo $ctr; ?>" onkeyup="calcM3('<?php echo $ctr; ?>')" /></td>
<td width="144"><input type="text" id="m33_<?php echo $ctr; ?>" name="m33_<?php echo $ctr; ?>" onkeyup="calcM3('<?php echo $ctr; ?>')" /></td>
<td width="45">&nbsp;</td>
<td width="144"><input type="text" id="matchcolor<?php echo $ctr; ?>" name="matchcolor<?php echo $ctr; ?>" readonly="readonly" style="background-color:#FF0000" /></td> 
```

# c++ - 创建一个高效的函数

> ID：13578784
> 
> 赞同：1
> 
> 时间：2012-11-27T06:47:15.920
> 
> 标签：c++, qt, function, qt-creator, repeat

我是第四周学习 C++ 的初学者；我一直在研究 CodeBlocks，但由于我对制作 GUI 感兴趣，我转而使用 Qt Creator。回到 CodeBlocks，我创建了一个函数，可以避免下面代码中的所有重复，只更改“TXT 文件”。但是，使用 Qt Creator 的“专用”C++，我无法理解如何创建一个函数来避免所有这些重复。

有任何想法吗？（我对这个 Qt 项目太深入了，无法回到 CodeBlocks。）

“TXT 文件”根据`RadioButton`用户选择而改变。

```
void MovierRec::on_searchButton_clicked()
{
    int randomValue = qrand() % 100;
    QList<QString> titles;
    if(ui->modernButton->isChecked())
           {
               QFile myfile(":/classics.txt");
               if (myfile.open(QIODevice::ReadOnly))
               {
                   QTextStream in(&myfile);
                   while (!in.atEnd())
                   {
                       QString line = in.readLine();
                       titles.append(line);
                   }
                   myfile.close();
                   ui->textBrowser->setPlainText (titles[randomValue]);
                }
           }
    else if(ui->romanceButton->isChecked())
           {
               QFile myfile(":/romance.txt");
               if (myfile.open(QIODevice::ReadOnly))
               {
                   QTextStream in(&myfile);
                   while (!in.atEnd())
                   {
                       QString line = in.readLine();
                       titles.append(line);
                   }
                   myfile.close();
                   ui->textBrowser->setPlainText (titles[randomValue]);
                }
           }

    else if(ui->scifiButton->isChecked())
           {
               QFile myfile(":/scifi.txt");
               if (myfile.open(QIODevice::ReadOnly))
               {
                   QTextStream in(&myfile);
                   while (!in.atEnd())
                   {
                       QString line = in.readLine();
                       //titles.append(line);
                   }
                   myfile.close();
                   ui->textBrowser->setPlainText (titles[randomValue]);
                }
           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:01:02.653

这是通用编程问题，可以以更好的方式重构代码：

```
// I didn't dig into every line of the code. just provide the refactor idea here
void getTitle(const QString& file_name, QList<QString>& titles;)
{
   QFile myfile(file_name);
   if (myfile.open(QIODevice::ReadOnly))
   {
     QTextStream in(&myfile);
     while (!in.atEnd())
     {
       QString line = in.readLine();
       titles.append(line);
     }
   myfile.close();
 }
}

void MovierRec::on_searchButton_clicked()
{
    int randomValue = qrand() % 100;
    QList<QString> titles;
    if(ui->modernButton->isChecked())
    {
        getTitle("classics.txt", titles);       
    }
    else if(ui->romanceButton->isChecked())
    {
        getTitle("romance.txt", titles);       
    }
    else if(ui->scifiButton->isChecked())
    {
        getTitle("scifi.txt", titles);
   }
   ui->textBrowser->setPlainText(titles[randomValue]); // move the dup action to the end
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:05:04.433

QT 以信号和插槽而闻名。每个按钮都可以连接到一个插槽。例如在你的情况下。您可以将每个单选按钮连接到一个插槽。为此，打开您的 GUI 表单，右键单击单选按钮并选择“Go To Slot”，然后选择要连接的插槽。这将在您的 .cpp 文件中创建一个空函数。

现在为该按钮编写代码。并且仅当该特定 Button 被按下/单击时才会调用此函数。

例子：

```
 void ClassA::on_radioButton_clicked()
     {
         // write your code inside this function for , when this button is checked
      } 
```

我希望这能帮助你解决你的问题。如果您有其他疑问，请提供更多信息。

# google-chrome - Google Chrome 扩展程序的内容 CSS 将在开发之前应用。控制台打开和关闭

> ID：13578786
> 
> 赞同：0
> 
> 时间：2012-11-27T06:47:27.700
> 
> 标签：google-chrome, google-chrome-extension

奇怪。这是我清单的一部分：

```
"permissions"     : [
    "http://site.com/"
    ,"http://site.com/*"
    ,"http://www.site.com/*"
    ,"http://www.site.com/"
   ]
   ,"web_accessible_resources": [
     "css/tweaks.css"
   ]
   ,"content_scripts" : [{
    "matches" : [
        "http://*.site.com/",
        "http://*.site.com/*",
        "http://site.com/*",
        "http://www.site.com/*"
    ],
    "css" : [
                    "css/tweaks.css"
    ],
    "js" : [
                "js/jquery162.js",
                "js/tweaks.js"
    ]
    ,"run_at": "document_end"
}] 
```

这是tweaks.css：

```
*{
   color: red !important;
   font-weight: bold;
 } 
```

最后是 background.html（这里不重要）

```
<html>
    <head>
        <title></title>
        <script src="js/jquery162.js"></script>
        <script src="js/js_extend/extend.js"></script>
        <!--<script src="js/main.js"></script>-->
    </head>
    <body>
    </body>
</html> 
```

而且，当我重新加载扩展（解压缩），然后重新加载必须通过注入的 CSS 自定义的页面时，我什么也看不到。当我在 google.chrome 中打开开发者控制台时，我看不到任何应用到任何元素的自定义样式。之后我关闭控制台，突然看到所有文本都变成红色和粗体，打开控制台，你猜怎么着，用我注入的规则查看“用户样式表”。我不明白出了什么问题。在谷歌将他们的清单更改为第 2 版之前，我有一个带有很多内容 CSS 的中等大小的扩展，它运行良好，现在我什至无法注入 *{color:red} 规则。请帮我。

Chrome 是 24.0.1312.14 beta-m

更新：tweaks.js 是空的

更新：用 24.0.1312.14 m 测试 - 相同的 sh...

更多更新：以某种方式修复它。但我对此并不完全有信心。

```
 chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
var isSite    = ( tab.url && tab.url.indexOf('site.com') >= 0);

if ( isSite ){
    chrome.tabs.executeScript(tabId, {
        file: Paths.add_element //filepath
    });
    chrome.tabs.insertCSS(tabId, {
        file: Paths.my_css_path //filepath
    });
}

}); 
```

诀窍是您需要在应用所有 site.com 规则后执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:50:58.057

这是 Chrome 中的一个已知错误：请参阅[http://crbug.com/154905](http://crbug.com/154905)和[http://crbug.com/158012](http://crbug.com/158012)

# c++ - 功能对象安全风险

> ID：13578798
> 
> 赞同：6
> 
> 时间：2012-11-27T06:48:11.600
> 
> 标签：c++, function-object

我正在阅读一篇关于 C++11 的文章，作者提到使用 lambdas 的一个优点是可以避免函数对象的乏味和安全风险。

FO 有哪些安全风险？

资料来源：[C++11 的最大变化以及您应该关心的原因](http://blog.smartbear.com/software-quality/bid/167271/The-Biggest-Changes-in-C-11-and-Why-You-Should-Care)

# wiki - 以编程方式在父 wiki 页面中创建目录，其中子页面的标题作为内容

> ID：13578799
> 
> 赞同：1
> 
> 时间：2012-11-27T06:48:11.783
> 
> 标签：wiki, confluence

我正在使用 confluence cli 使用 python 脚本在一个父页面下创建子 wiki 页面。这些显示为父 wiki 页面底部的子页面。要求是我需要在父页面中创建一个目录。这应该包含正在创建的子页面的标题。我无法找到如何添加此目录，请提供有关如何执行此操作的任何指针？我正在使用 confluence CLI 创建 wiki 页面，如下所示： confluence_cli = confluence.Client() confluence_cli.add_page(parent-page-title, child-page-title, child-page-data)

从父页面中添加到子页面的链接的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T11:09:34.533

您可以将子显示宏添加到父页面。如果需要，这将列出所有孩子甚至子孩子。

# django - Django South 的 south.exceptions.NoMigrations 错误

> ID：13578802
> 
> 赞同：0
> 
> 时间：2012-11-27T06:48:44.760
> 
> 标签：django, heroku, django-south

我正在尝试将[南](http://south.aeracode.org/)添加到我在 Heroku 上的项目中。我按照以下步骤操作。

```
heroku run easy_install South 
```

添加`'south'`在`INSTALLED_APPS`_`settings.py`

# 然后

```
heroku run ./manage.py syncdb
heroku run ./manage.py convert_to_south sheets 
```

# 追溯

```
Running `./manage.py convert_to_south sheets` attached to terminal... up, run.2005
Creating migrations directory at '/app/sheets/migrations'...
Creating __init__.py in '/app/sheets/migrations'...
 + Added model sheets.Sheets
 + Added model sheets.UserSheets
 + Added M2M table for users on sheets.UserSheets
 + Added model sheets.SheetScribble
 + Added model sheets.SheetScribbleComment
 + Added model sheets.Tasks
 + Added model sheets.TaskComment
Created 0001_initial.py. You can now apply this migration with: ./manage.py migrate sheets
 - Soft matched migration 0001 to 0001_initial.
Running migrations for sheets:
- Nothing to migrate.
 - Loading initial data for sheets.
Installed 0 object(s) from 0 fixture(s)

App 'sheets' converted. Note that South assumed the application's models matched the database
(i.e. you haven't changed it since last syncdb); if you have, you should delete the sheets/migrations
directory, revert models.py so it matches the database, and try again. 
```

然后当我尝试将我的第二个应用程序转换为南时，

```
heroku run ./manage.py convert_to_south scribbler 
```

我收到这个错误

```
Running `./manage.py convert_to_south scribbler` attached to terminal... up, run.6046
Creating migrations directory at '/app/scribbler/migrations'...
Creating __init__.py in '/app/scribbler/migrations'...
 + Added model scribbler.ScribbleMedia
 + Added model scribbler.Scribble
 + Added model scribbler.Tag
 + Added M2M table for scribbles on scribbler.Tag
 + Added model scribbler.SharedScribble
 + Added M2M table for users_favored on scribbler.SharedScribble
 + Added model scribbler.ScribbleComment
 + Added model scribbler.Connections
 + Added unique constraint for ['following', 'followers'] on scribbler.Connections
 + Added model scribbler.UserProfile
 + Added model scribbler.Invitation
 + Added model scribbler.Notifications
Created 0001_initial.py. You can now apply this migration with: ./manage.py migrate scribbler
Traceback (most recent call last):
  File "./manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/south/management/commands/convert_to_south.py", line 87, in handle
    delete_ghosts=options.get("delete_ghosts", False),
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/south/management/commands/migrate.py", line 108, in handle
    ignore_ghosts = ignore_ghosts,
  File "/app/.heroku/venv/lib/python2.7/site-packages/south/migration/__init__.py", line 193, in migrate_app
    applied_all = check_migration_histories(applied_all, delete_ghosts, ignore_ghosts)
  File "/app/.heroku/venv/lib/python2.7/site-packages/south/migration/__init__.py", line 74, in check_migration_histories
    m = h.get_migration()
  File "/app/.heroku/venv/lib/python2.7/site-packages/south/models.py", line 34, in get_migration
    return self.get_migrations().migration(self.migration)
  File "/app/.heroku/venv/lib/python2.7/site-packages/south/models.py", line 31, in get_migrations
    return Migrations(self.app_name)
  File "/app/.heroku/venv/lib/python2.7/site-packages/south/migration/base.py", line 61, in __call__
    self.instances[app_label] = super(MigrationsMetaclass, self).__call__(app_label_to_app_module(app_label), **kwds)
  File "/app/.heroku/venv/lib/python2.7/site-packages/south/migration/base.py", line 89, in __init__
    self.set_application(application, force_creation, verbose_creation)
  File "/app/.heroku/venv/lib/python2.7/site-packages/south/migration/base.py", line 161, in set_application
    raise exceptions.NoMigrations(application)
south.exceptions.NoMigrations: Application '<module 'sheets' from '/app/sheets/__init__.py'>' has no migrations. 
```

我不确定问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:16:30.410

您不应该在 heroku 上运行这些命令。您应该在本地环境中执行此操作，将它们推送到 heroku，然后运行迁移命令。

它有一个“临时文件系统”，可能在这两个命令之间清除。所以南有0001迁移的记录，但不存在。

我不确定为什么在“convert_to_south”命令（一些新的南方功能？）期间抛出它，但这是我最好的猜测。

尝试在本地执行此操作，提交迁移文件，然后继续在 heroku 上运行迁移命令。

# php - 如何使用 SQL 在 MySQL 数据库中查找中文短语的长度？

> ID：13578803
> 
> 赞同：0
> 
> 时间：2012-11-27T06:48:48.990
> 
> 标签：php, mysql, sql

例如，这是我的表，称为示例：

```
--------------------------
| id | en_word | zh_word |
--------------------------
| 1  | Internet| 互联网   |
--------------------------
| 2  | Hello   |   你好   |
--------------------------

and so on... 
```

我尝试使用这个 SQL 查询：

```
SELECT * FROM `example` WHERE LENGTH(`zh_word`) = 3 
```

出于某种原因，它不会给我三个，但会给我很多单字母字符。

为什么是这样？这可以解决吗？我在 PhpMyAdmin 中试过了。

但是当我用 JavaScript 做到这一点时：

```
"互联网".length == 3; // true 
```

它似乎工作正常。那怎么行不通呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:50:03.820

你应该使用`CHAR_LENGTH`而不是`LENGTH`

`LENGTH()`返回以字节为单位的字符串长度。
`CHAR_LENGTH()`返回以字符为单位的字符串长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:51:30.313

LENGTH 以字节为单位返回长度（中文是多字节的）

使用 CHAR_LENGTH 获取字符长度

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_char-length](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_char-length)

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_length](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_length)

# c++ - Boost ASIO 网络时序问题

> ID：13578807
> 
> 赞同：1
> 
> 时间：2012-11-27T06:48:57.153
> 
> 标签：c++, networking, boost, boost-asio

我正在使用 boost::asio 来实现网络编程并遇到时间问题。目前，这个问题主要出在客户身上。

该协议最初由服务器向用户返回一个日期时间字符串开始，客户端读取它。直到那部分它工作正常。但我还想要的是能够将命令写入服务器然后处理它们。为此，我使用了 io_service.post() 函数，如下所示。

```
io_service.post(boost::bind()); // bounded function calls async_write() method. 
```

由于某种原因，写入尝试发生在初始客户端/服务器通信之前，此时尚未创建套接字。我得到了错误的套接字描述符错误。

现在 io_service 的 run 方法确实在另一个线程中被调用。

当我在 post 方法之前放置一个 sleep(2) 命令时，它工作正常。

有没有办法同步这个，以便在执行任何发布的调用之前创建套接字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:01:57.817

在创建套接字并使用 建立连接`boost::asio`时，您可以定义一个在这些操作完成或失败时调用的方法。因此，您应该在成功回调中触发您的“已发布呼叫”。

相关的方法和类是：

```
boost::asio::ip::tcp::resolver::async_resolve(...)
boost::asio::ip::tcp::socket::async_connect(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:55:28.487

我认为下面的链接

会给你一些帮助

[http://www.boost.org/doc/libs/1_42_0/doc/html/boost_asio/reference/io_service.html](http://www.boost.org/doc/libs/1_42_0/doc/html/boost_asio/reference/io_service.html)

# java - 我如何合计用户输入的两组数字？

> ID：13578808
> 
> 赞同：0
> 
> 时间：2012-11-27T06:48:56.587
> 
> 标签：java, eclipse, sum

我正在编写一个程序，我必须询问用户他们有多少作业。然后，我必须询问他们的分数和作业的最高分。我知道如何找到他们输入的第一组数字的总和（他们的分数），但我一直坚持如何计算可能的最高分。这是我到目前为止所拥有的：

```
 int totalNumber = scan.nextInt();
                double sum = 0.0;
                for (int i = 1; i <= totalNumber; i++) {
                    System.out.print("Assignment " + i + " score and max? ");
                    double score = scan.nextDouble();
                    double maxScore = scan.nextDouble();
                    sum += score; 
```

输出看起来像这样：Assignment 1 score and max? 16 17 作业 2 的分数和最大值？18 19

我不确定如何计算最高分（示例中为 17 和 19），因为我必须打印总分：（总分）/（最高分总和）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:52:08.640

简单的答案是添加另一个变量来求和 maxScore

```
 int totalNumber = scan.nextInt();
 double sum = 0.0;
 double maxSum = 0.0;
 for (int i = 1; i <= totalNumber; i++) {
     System.out.print("Assignment " + i + " score and max? ");
     double score = scan.nextDouble();
     double maxScore = scan.nextDouble();
     sum += score;
     maxSum += maxScore;
 } 
```

# iphone - Amazon Dynamo DB - 扫描和更新表记录 - iOS SDK

> ID：13578814
> 
> 赞同：1
> 
> 时间：2012-11-27T06:49:24.993
> 
> 标签：iphone, objective-c, ios, amazon-web-services, amazon-dynamodb

是否可以使用单个 API 扫描和更新 DynamoDB 表中的记录。考虑我在 Items 表中有项目列表，其中包含字段（ItemID、ItemName、ItemAssigned）。ItemID 是表的哈希键。项目 ID 命名为 、Item1、Item2、Item3 等，用户将不知道表中的项目是什么。因此，在应用程序中，如果用户点击“获取项目”按钮，则会获取随机项目并将其分配给他。然后 ItemAssigned 设置为 YES。项目选项卡 然后项目将不会分配给任何其他用户。这就是发生的事情。

步骤：
1\. 点击“获取一个项目”
2\. 扫描 Items 表中的第一个项目，其中 ItemAssigned = NO
3\. 在主屏幕中显示该项目
4\. 更新 Items 表中的项目以设置 ItemAssigned = YES

如果一个用户一次尝试获取该项目，这很有效。当两个用户 A 和 B 试图同时获取一个项目，并且相同的项目分配给两个用户时，就会出现此问题。

所以首先 A 获取项目。在更新 Items 表以设置 ItemAssigned = YES 之前，B 还获取相同的项目。现在 A 和 B 的主屏幕都显示相同的项目。这是错误的。

唯一的方法是使用单个 API 扫描和更新 Items 表。是否有可能在 Amazon DynamoDB 中执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T14:47:44.687

不幸的是，没有 API 可以在单个操作中进行扫描和更新。您可能需要查看有条件的 PUT 项目，因为这将允许您实现类似*结帐*的功能，以便您可以**仅在**“ItemAssigned = NO”时设置“ItemAssigned = YES”。

在处理扫描结果时，您的应用程序代码需要优雅地处理异常，但将允许您请求的工作流只允许一个用户查看该项目。

[PUT 项目的 API 文档](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_UpdateItem.html)

# android - 在 Intellij IDEA 11.1 中给出库项目的相对路径

> ID：13578822
> 
> 赞同：2
> 
> 时间：2012-11-27T06:50:11.327
> 
> 标签：android, intellij-idea, bitbucket

我成功地将一个库项目添加到 intellij 的主项目中，一切都很好，而且运行良好。但我的问题是我必须将此项目更新到私有存储库（BitBucket）。所以问题是我无法在另一台电脑上获取这个库模块（因为我不知道如何为此提供相对路径）。

或者有没有其他方法可以解决这个问题。任何帮助将不胜感激。

# multithreading - 在连接开始时使用 SSL 和 Netty，然后禁用它

> ID：13578824
> 
> 赞同：2
> 
> 时间：2012-11-27T06:50:14.830
> 
> 标签：multithreading, ssl, netty

我正在编写一个服务器应用程序及其客户端应用程序，它们都使用 Netty 作为网络层。我发现自己面临从客户端向服务器发送密码的典型安全问题，因此我认为 SSL 是最安全的方式。

我知道[安全聊天](http://docs.jboss.org/netty/3.2/xref/org/jboss/netty/example/securechat/package-summary.html)示例，并将使用它来相应地修改我的管道。但是，我还想在密码传输后禁用 SSL，并确认可以在服务器端节省一些宝贵的 CPU 周期，这可能正忙于许多其他客户端。[ChannelPipeline](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/channel/ChannelPipeline.html)文档指出：

> “一旦连接，通道和管道之间的耦合是永久的；通道不能将另一条管道连接到它，也不能将当前管道与其分离。”

然后的想法是不要动态更改管道，这是被禁止的，而是以某种方式告诉管道中的*SslHandler*它应该在某个时候停止加密消息。我正在考虑创建一个继承自*SslHandler*的类，覆盖其*handleDownstream*函数以在通信中的某个时间点调用*context.sendDownstream(evt) 。*

*问题 1*：这是一个坏主意，即在某些时候禁用 SSL 吗？

为了允许管道中的一个块（比如*Decoder*）告诉另一个块（比如*SslHandler*）它​​应该从现在开始改变它的行为，我想我可以在我的*ChannelPipelineFactory*的*getPipeline()中创建一个**AtomicBoolean*并传递它到*Decoder*和*SslHandler*的构造函数。

 ****问题2*：这是一个坏主意，即在管道块之间共享状态吗？我担心我可能会在这里搞砸 Netty 的多线程：管道的块是否一次只处理一条消息？即：在拉下一条消息之前，第一个块是否等待最后一个块的完成？

**编辑：**

哦，我的错，这是来自我多次访问并引用这个问题的[ChannelPipeline页面：](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/channel/ChannelPipeline.html)

> “由于ChannelPipeline是线程安全的，因此可以随时添加或删除ChannelHandler。例如，您可以在即将交换敏感信息时插入SslHandler，并在交换后将其删除。”

因此，这回答了关于即时修改管道*内容的问题 2，而不是管道引用本身。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:02:16.173

您可以`SslHandler`从管道中删除，`ChannelPipeline.remove(..)`然后它应该将您的连接转换为纯文本。如果它不起作用，请提交一个错误 - 我们实际上还没有在生产中尝试过这种情况:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T10:12:56.043

我不确定一旦建立就关闭 SSL 的效果，但我认为您误解了管道的可变性。一旦给定通道与管道相关联，该关联就是不可变的。但是，可以安全地修改管道中的处理程序。也就是说，您可以根据协议的需要添加和删除处理程序。因此，一旦 SSL 处理程序达到其目的，您应该能够删除它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T10:38:41.183

我不确定 Netty，但原则上，您确实可以在同一个 TCP 连接上继续使用普通流量。有几个缺点：

*   只有身份验证会受到保护。MITM 可以执行用户预期之外的操作。（这在某种程度上类似于使用 HTTP Digest：凭据受到保护，但请求/响应实体不受保护。）

*   从实现的角度来看，这很难做到正确。[TLS 规范](https://www.rfc-editor.org/rfc/rfc2246#section-7.2.1)说：

    > 如果使用 TLS 的应用程序协议规定任何数据都可以在 TLS 连接关闭后通过底层传输进行传输，则 TLS 实现必须 `close_notify`在向应用层指示 TLS 连接已结束之前接收响应警报。

    这意味着您将以某种方式同步您的流以等待`close_notify`响应，然后再继续您的普通流量。编程模型相当复杂，`SSLEngine`您可能会发现不需要 Netty API 来处理这种情况。

虽然希望节省一些 CPU 周期可能是有意义的，但大部分 SSL/TLS 开销都在握手中，无论如何您都会这样做。用于数据实际加密的对称加密操作要便宜得多。（您应该尝试测量这个开销，看看它是否真的是一个问题。）***

# asp.net-mvc-3 - 如何使模型字段在 MVC3 中有条件地需要？

> ID：13578827
> 
> 赞同：1
> 
> 时间：2012-11-27T06:50:28.450
> 
> 标签：asp.net-mvc-3

我有一个带有下拉列表和富文本框的视图。此视图与模型相关联。我想根据下拉列表中选择的值使富文本框字段是必需的。

MVC3 中是否有任何开箱即用的功能可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:09:41.307

过去我也有类似的要求，我使用 FoolProof 解决了它们。它提供了额外的验证对象，例如 requiredIf 等。

我遇到的唯一问题是 JS 文件，它在日期和日期处理方面可能有点问题，除此之外，它是 ace。

[万无一失的网站](http://foolproof.codeplex.com/)

# android - android 中 ksoap2 中元素的 getAttribute

> ID：13578834
> 
> 赞同：1
> 
> 时间：2012-11-27T06:51:06.460
> 
> 标签：android, soap, ksoap2

所以，我有一个肥皂服务，我从中得到如下响应：

```
<xml>   
  <SpinnerMaster name="masterStatus">
              <value>Unknown</value>
              <value>Not Started</value>
              <value>Excavation</value>
              <value>Piling</value>
              <value>Plinth</value>
              <value>Floor Slab</value>
              <value>Internal Work</value>
              <value>External Work</value>
              <value>Complete</value>
            </SpinnerMaster>

<status type="drop" editable="1">1</status>
</xml> 
```

因此，当我想访问 SpinnerMaster 的属性时，它很简单：

```
((SoapObject)soapObject.getProperty("SpinnerMaster")).getAttribute("name") 
```

但是当我尝试对状态元素做同样的事情时，我遇到了类转换异常。

```
((SoapObject)soapObject.getProperty("status")).getAttribute("type") 
```

好吧，异常非常简单——soapObject.getProperty("status") 返回一个字符串，然后我不能将它转换回 SoapObject 但是在这种情况下，我怎样才能获得元素状态的属性类型。

# mongodb - 无法映射文件内存-mongo 需要 64 位构建更大的数据集

> ID：13578842
> 
> 赞同：4
> 
> 时间：2012-11-27T06:51:28.910
> 
> 标签：mongodb

我在 3 个系统中有一个分片集群。插入时我收到错误消息：

```
cant map file memory-mongo requires 64 bit build for larger datasets 
```

我知道 32 位机器的限制大小为 2 GB。我有两个问题要问。

1.  2 GB 限制适用于 1 个系统，因此总数据为 6 GB，因为我的分片是在 3 个系统中完成的。那么它只有 2 GB 还是 6 GB？
2.  在正确完成分片的情况下，尽管将数据分布在所有三个分片系统中，但所有数据都存储在单个系统中？

分片在增加数据大小限制方面有什么作用吗？块大小在性能中起任何重要作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:29:42.170

除了在可能无法运行 64 位的开发机器上运行它之外，我不建议您对 32 位 MongoDB 做*任何事情。*一旦达到限制，文件就无法使用。

文档指出*“使用 64 位进行生产。这很重要，因为如果您达到 mmap 大小限制（确切限制有所不同但小于 2GB），您将无法写入数据库（类似于磁盘已满情况）。”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:58:46.800

分片就是跨多个节点扩展您的数据集，因此在回答您的问题时，是的，您增加了数据集的可能大小。请记住，名称空间和索引也会占用空间。

你还没有指定你的 mongos 住在哪里？？？您在哪里看到来自 -a`mongod`或的错误`mongos`？我怀疑是`mongod`. 我相信您需要查看[预拆分](http://docs.mongodb.org/manual/reference/glossary/#term-pre-splitting)块 - [http://docs.mongodb.org/manual/administration/sharding/#splitting-chunks](http://docs.mongodb.org/manual/administration/sharding/#splitting-chunks)。这似乎表明您的所有数据都将转到`mongod`.

如果你有一个`mongos`，`sh.status()`返回什么？块是否遍布所有`mongod's`？

对于测试，我建议块大小为 1mb。在生产中，最好坚持使用默认的 64mb，除非您有一些非常重要的理由不想要默认值并且您真的知道自己在做什么。如果您的块大小太小，那么您将过于频繁地执行拆分。

# javascript - javascript中未定义错误函数

> ID：13578845
> 
> 赞同：1
> 
> 时间：2012-11-27T06:51:36.250
> 
> 标签：javascript

我有一个示例代码：

```
<input width="50" type="text" value="" name="application_id" id="text_input">
<a href="#" onclick="addSelect('1', 'Test Name');" title="Click to add this item">Test Name</a> 
```

和 javascript

```
function addSelect(id, title) {
    document.getElementById('text_input').value = title;
} 
```

当我运行代码时，结果错误是`addSelect is not defined`？[演示在这里](http://jsfiddle.net/TmLut/)，如何适合它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T06:54:01.167

您的脚本已定义为 run `onLoad`，这意味着您的函数在全局范围内不可用，就像您期望的那样。它将在某个`onLoad`方法的本地范围内定义（无论 jsFiddle 使用哪个）。使用此设置，我认为 jsFiddle 会将您的代码放入此**或类似**的内容中：

```
window.onload = function () {
    // Your code
}; 
```

（类似于`onDomReady`选项）

这样您就不必担心绑定正确的事件，您只需测试您的脚本（确保页面已加载）。

当您尝试调用您希望在全局范围内的函数时，它将不起作用。只需将左侧的设置更改为`no wrap (head)`（或`no wrap (body)`）

[http://jsfiddle.net/TmLut/3/](http://jsfiddle.net/TmLut/3/)

正如 mplungjan 指出的那样，我不知何故根本没有意识到，当使用`onclick`锚元素时，您可能希望阻止链接的默认行为（即使它只是转到“#”），并且可以通过多种方式实现，但其中一种是：

```
<a href="#" onclick="runFunction();return false;">Text</a> 
```

尽管同时，有人可能会争辩说您根本不应该有内联处理程序，并且希望将事件与 Javascript 完全绑定。根据这种情况，您仍然可以选择阻止默认行为。在任何情况下，您仍然可以获取`event`对象（按浏览器标准化......顺便说一下，jQuery 所做的）并调用`event.preventDefault();`该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:57:42.843

这里是[http://jsfiddle.net/TmLut/4/](http://jsfiddle.net/TmLut/4/)

我改为`onload`在`head`左侧选择框

# qml - 使用 Qt/QML 将文本从 Qt textEdit 控件发送到 QML TextInput 控件

> ID：13578848
> 
> 赞同：2
> 
> 时间：2012-11-27T06:51:45.300
> 
> 标签：qml

我在小部件中创建了一个 UI，并向其中添加了一个 edittext 控件和一个 pushButton 控件。在 QML 文件中，我有一个 TextInput 控件。我能够在 QML 中显示小部件控件。现在，我想将 QML 中的 EditText 控件文本设置为单击 Widget 的 pushButton 时在该控件内部的 edittext 控件中的文本。单击按钮时，我想将文本从 editText 发送到 QML TextInput。

这怎么可能。

我使用以下内容在 QML 中注册和使用 Widget。main.cpp 文件--->

```
qmlRegisterType<WidgetContainer>("MyWidget", 1, 0, "MyWidget"); 
```

QML 文件内容：

```
import QtQuick 1.1
import MyWidget 1.0
Rectangle {
    width: 360
    height: 360
    color: "gray"
    TextInput {
        id: textInput1
        x: 10
        y: 10
        width: 100
        height: 100
        color: "black"
        cursorVisible: true
        text: widget.getText()
    }

    MyWidget {
        id: widget
        x:10;
        y:70
        width: 180;
        height: 150
        text: "Widget text"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:34:32.387

`WidgetContainer`单击按钮时，类应发出信号。然后您将能够在 QML 中编写您需要的单击处理。

默认情况下，按钮（或任何其他`WidgetContainer`类成员）在 QML 代码中不可用。所以你不能`clicked`直接在 QML 中使用按钮的信号。
您需要在类中声明例如`buttonClicked`信号。`WidgetContainer`然后您需要将`WidgetContainer`的`buttonClicked`信号连接到按钮的`clicked`信号。

现在您可以`buttonClicked`在 QML 中使用信号：

```
TextInput {
    id: textInput1
    text: widget.getText()
}

MyWidget {
    id: widget
    text: "Widget text"
    onButtonClicked: textInput1.text = text
} 
```

# java - Matlab java互操作。使用枚举值

> ID：13578849
> 
> 赞同：4
> 
> 时间：2012-11-27T06:51:46.160
> 
> 标签：java, matlab

我有java枚举

```
package com.moc;
public enum MyType {
    s,
    q,
    p,
    none,
} 
```

在 matlab(2012a) 我加载适当的 jar，并设置

```
a = com.moc.MyType.q;
a = com.moc.MyType.none; 
```

它也有效。但是当我尝试评估

```
a = com.moc.MyType.s; 
```

或者

```
a = com.moc.MyType.p; 
```

我得到一个例外

```
The class com.moc.MyType has no property or method named 's'. 
```

和

```
The class com.moc.MyType has no property or method named 'p'. 
```

为什么 matlab 不允许我获取 's' 和 'p' 枚举值？

附言

```
a = com.moc.MyType.q;
a.getClass.getDeclaredField('p') 
```

返回

```
public static final com.moc.MyType com.moc.MyType.p 
```

**更新**

com.moc.MyType.valueOf('p') 有效。但问题对我来说仍然很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:09:38.767

[如本答案](https://stackoverflow.com/a/1846161/544198)中所列，您可能需要以不同的方式引用它。有时 Java 将内容存储为`$`而不是`.`，因此如果您按照下面列出的方式进行调用，它应该可以工作。

```
javaObject('com.moc.MyType$q') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:14:24.030

嗯，这应该可以。我只是在猜测，但您能否尝试使用大写的枚举常量（例如 com.moc.MyType.P） 也许有一些依赖于约定的草率的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:23:34.590

我真的怀疑这是一个配置错误。（我以前称之为 makefile 错误）。也就是说，我怀疑您实际加载到 Matlab 中的代码没有链接到您正在编写的 Java 代码，而是一个较旧的版本。

要确认/反驳此类错误，请进行最小的更改，这将在您执行时可见。例如，更改`q`并`qq`确认`a = com.moc.MyType.qq;`在 Matlab 中有效。

如果它确实有效，那么我错了。如果没有，那么您需要通过编译/jar'ing/加载过程来查看您在哪里有一个陈旧的文件。

# configuration - 配置 BjyAuthorize 和 ZfcUser 以作为管理员和普通用户工作

> ID：13578850
> 
> 赞同：0
> 
> 时间：2012-11-27T06:51:52.570
> 
> 标签：configuration, module, zend-framework2

我已经在我的骨架应用程序中安装了这两个模块。两者都在使用他们在这里给出的配置示例[https://github.com/bjyoungblood/BjyAuthorize](https://github.com/bjyoungblood/BjyAuthorize)。

我还安装了 ZfcAdmin 并向其中添加了一些功能专家。我需要以不低于管理员角色的身份阻止它。已在 db guest、用户 admin 中创建角色

我创建的用户具有管理员角色，这是我的 BjyAuthorize 模块配置文件的一部分

```
'BjyAuthorize\Guard\Controller' => array(
                array('controller' => 'index', 'action' => 'index', 'roles' => array('guest','user')),
                array('controller' => 'index', 'action' => 'stuff', 'roles' => array('user')),
                array('controller' => 'zfcuser', 'roles' => array()),
                // Below is the default index action used by the [ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication)
                array('controller' => 'Application\Controller\Index', 'roles' => array('guest', 'user')),
                array('controller' => 'ZfcAdmin\Controller\Admin', 'roles' => array('admin')),
            ), 
```

我已经添加了具有管理员角色的控制器“ZfcAdmin\Controller\Admin”，但它仍然阻止了管理部分。

非常感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:35:55.570

好的，这只是一个错误的理解，这里的控制器是我们在模块中为控制器定义的可发音键，对于'ZfcAdmin\Controller\Admin'，它是'ZfcAdmin\Controller\AdminController'。所以它起作用了......

# cobol - 在 COBOL 程序中显示格式化日期

> ID：13578854
> 
> 赞同：1
> 
> 时间：2012-11-27T06:51:56.727
> 
> 标签：cobol, cobol85

我在数据库中采用**YYYY-MM-DD:hh:min:ss**格式的日期变量，我想使用 cobol 程序在报告**YYYY-MM-DD HH:MIN:SS中显示它。如何做到这一点？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T02:25:15.370

看看内在函数，例如

*   功能组合-日期时间
*   功能当前日期
*   函数日期整数
*   功能日期到 YYYYMMDD
*   函数日期整数
*   函数区域日期
*   还有很多其他的，谷歌的 OpenCOBOL 常见问题，见第 4.2 节的例子

[http://opencobol.add1tocobol.com/#does-opencobol-implement-any-intrinsic-functions](http://opencobol.add1tocobol.com/#does-opencobol-implement-any-intrinsic-functions)

要获取当前时钟，请查看 ACCEPT FROM DATE YYYYMMDD, ACCEPT FROM TIME

然后您可能想要创建一个 PICTURE 数据子句，让您完全控制日期和时间的格式和显示方式。

当您想快速将冒号转换为空格或斜杠等时，我还发现 INSPECT REPLACING 是一件方便的事情。

```
 identification division.
    program-id. inspecting.

    data division.
    working-storage section.
    01  ORIGINAL            pic XXXX/XX/XXBXX/XX/XXXXXXX/XX.
    01  DATEREC             pic XXXX/XX/XXBXX/XX/XXXXXXX/XX.

    procedure division.

    move function when-compiled to DATEREC ORIGINAL

    INSPECT DATEREC REPLACING ALL "/" BY ":" AFTER INITIAL SPACE

    display
        "Intrinsic function WHEN-COMPILED " ORIGINAL
    end-display
    display
        " after INSPECT REPLACING         " DATEREC
    end-display

    goback.
    end program inspecting. 
```

给予

```
Intrinsic function WHEN-COMPILED 2010/03/25 23/05/0900-04/00
 after INSPECT REPLACING         2010/03/25 23:05:0900-04:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T16:00:07.927

我喜欢详细的 PICTURE 方法，就像 Brian Tiffin 所说的那样，然后您只需使用括号逐个移动数据。

类似: `MOVE MY-DATE(1:4) to MY-YEAR`, 会将前 4 个字符移动到所需的字段。

# java - 获取进程java使用的内存

> ID：13578855
> 
> 赞同：2
> 
> 时间：2012-11-27T06:51:58.577
> 
> 标签：java

我知道这个问题很常见，但是我从这个站点检查了一些解决方案，但它似乎对我不起作用。

所以，我写了一个小的java程序，我想知道它在不同的执行时刻消耗了多少内存。我尝试了 Runtime.getRuntime.total() 和 Runtime.getRuntime.free()，但每次都得到（几乎）相同的结果。

我对整个 JVM 有多少可用或使用的内存不感兴趣，我想知道专门针对我的 java 进程。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T06:55:36.240

这会让你知道你的进程使用了​​多少堆内存。

```
MemoryUsage heapMemoryUsage = ManagementFactory.getMemoryMXBean().getHeapMemoryUsage();
heapMemoryUsage.getUsed(); 
```

您还可以获取所有内存池并遍历它们以确定其他内存使用情况

```
List<MemoryPoolMXBean> memoryPoolMXBeans = ManagementFactory.getMemoryPoolMXBeans() 
```

您还可以使用 jvisualvm 来询问您的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T07:13:25.220

> 我对整个 JVM 有多少可用或使用的内存不感兴趣，我想知道专门针对我的 java 进程。

在典型的用例中，“整个 JVM”和“您的 Java 进程”之间没有真正的区别。至少，不是从内存使用的角度来看。

问题是，JVM 所做的一切，以及它分配的每一点内存都是在应用程序的要求下完成的。并且内存中的每个字都可以访问，因为您的应用程序中的某些东西*可能会*在某个时候使用它。

所以真的你所要求的并没有多大意义。当然，信息不可用。即使这确实有意义，但我不知道通过了解哪些内存“属于”您的应用程序以及哪些内容属于 JVM，您会获得什么。

# android - 防止 ListView 重用 ViewFlipper

> ID：13578863
> 
> 赞同：1
> 
> 时间：2012-11-27T06:52:47.347
> 
> 标签：android, listview, sync, viewflipper

我有一个 ListView，其中一行（第一行）是`ViewFlipper`.

现在，我的问题是，当`ViewFlipper`滚动出屏幕并返回时，它会被重用。通常只重用是一件好事，但在我的情况下，当 ViewFlipper 被回收时，它从头开始。

我有 5 个图像，例如，如果 ViewFlipper 在第二个图像上，并且您将它滚动出屏幕并返回，它会返回到第一个图像。时间和图像很重要，因为它与屏幕上的其他组件同步，并且在重新使用后不同步。

那么，当它离开屏幕时，我怎样才能让它`ViewFlipper`继续运行，以便它在重新打开时回到确切的位置和时间呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:48:05.633

为了防止包含 的行的回收`ViewFlipper`（并且因为该行是第一行），您可以简单地将其设置为的标题视图`ListView`（但您需要在设置适配器之前设置标题视图）。另一种方法是将 ' 中的当前位置保留在某处`ViewFlipper`，当请求包含此位置的行时，`ViewFlipper`您将`ViewFlipper`根据`getView`方法中保存的位置重置 ' 的位置。

# cluster-computing - 在 Grid Engine 上并行启动许多不相关的作业？

> ID：13578865
> 
> 赞同：0
> 
> 时间：2012-11-27T06:52:54.167
> 
> 标签：cluster-computing, qsub, sungridengine

我经常想在 Grid Engine 集群上启动一组完全不相关的（“令人尴尬的”并行）作业，以达到负载平衡的目的。

我现在所做的是，我为每个作业生成一个 Bash 脚本，然后分别提交它们中的每一个，所有这些都由我编写的 Perl 脚本控制。

如果我只是将所有作业放入一个文件，一行作业，那么 Grid Engine 将按顺序执行这些作业，这并不重要。

有什么方法可以让我只有一个文件，并告诉 Grid Engine 它应该并行执行每一行/作业？

基本上我想要像 Grid Engine Array Jobs 这样的东西。但是数组作业的问题是，它们只有在每个作业之间的变化元素是一个数字或数组中的一个索引，并且这个数字/索引是均匀分布的情况下才有效。但我说的是完全不相关且不共享模式的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T14:39:23.403

您使用中等强大的解释器提交数组作业，以将 $SGE_TASK_ID 转换为您想要的任何内容：

```
#$ -t 1-3    
#$ -S /bin/bash
case $SGE_TASK_ID in
1)echo "I'm a teapot short and stout";;
2)cat /etc/passwd;;
3)touch ~/job3run;;
esac 
```

# nant - 如何将 nant 构建错误重定向到“catch”部分？

> ID：13578870
> 
> 赞同：2
> 
> 时间：2012-11-27T06:53:35.660
> 
> 标签：nant

我需要在 nant 配置文件的“try-catch”部分构建我的应用程序，如下所示：

```
<trycatch>
        <try>
         <echo message="Start building MyApplication.."/>
         <call target="BuildApp"/>
        </try>
        <catch>
         <echo message="Build MyApp.sln is failed"/>
         <fail/>
        </catch>
</trycatch> 
```

当构建失败时，它只显示消息：“构建 MyApp.sln 失败”，没有任何失败的详细信息。如何将构建错误重定向到“catch”部分并查看失败的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:45:46.767

您需要将`property`属性添加到`catch`标签：

```
<trycatch>
  <try>
    <echo message="Start building MyApplication.."/>
    <call target="BuildApp"/>
  </try>
  <catch property="failure.message">
    <echo message="Build MyApp.sln is failed"/>
    <echo message="Failure message: ${failure.message}"/>
    <fail />
  </catch>
</trycatch> 
```

您也可以通过 转发失败消息`<fail message="${failure.message}" />`。

# eclipse - 虚拟机上的 Hadoop

> ID：13578871
> 
> 赞同：0
> 
> 时间：2012-11-27T06:53:40.877
> 
> 标签：eclipse, hadoop

我正在尝试使用 Hadoop 和 map reduce 进行工作和试验。为此，我在雅虎提供的虚拟机上的单节点集群上运行 Hadoop，并通过 Eclipse 编写代码。我只是想知道在虚拟机上运行 hadoop 的限制或缺点是什么，或者建议从一开始就开始使用 Hadoop 的隔离安装。

谢谢马尼什
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:13:14.570

您可以在虚拟机上运行 Hadoop 用于学习目的，但不推荐用于生产或性能测试由于 Hadoop 在机器集群上运行，它利用多个节点的硬件，Hadoop 用于/设计用于处理大量数据，为此目的我们需要更多的计算单元（CPU）和更多的内存（RAM），并且在虚拟机上效率不高。

但是是的，如果您想学习 Hadoop 并进行测试，您可以使用虚拟机

# android - Android 如何以编程方式在Activity中实现月历

> ID：13578872
> 
> 赞同：1
> 
> 时间：2012-11-27T06:53:43.773
> 
> 标签：android

我是安卓开发的新用户。单击按钮时，我需要显示月历。怎么做。

```
Calendar cal = Calendar.getInstance();              
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("beginTime", cal.getTimeInMillis());
intent.putExtra("allDay", true);
intent.putExtra("rrule", "FREQ=YEARLY");
intent.putExtra("endTime", cal.getTimeInMillis()+60*60*1000);
intent.putExtra("title", "A Test Event from android app");
startActivity(intent); 
```

他们的任何方法都适用于月历吗

# hook - 使用 Microsoft Detours 调用 COM 方法

> ID：13578876
> 
> 赞同：1
> 
> 时间：2012-11-27T06:54:09.387
> 
> 标签：hook

我正在尝试挂钩位于 C:\Windows\System32 中的 jscript.dll 的编译方法，这是 Internet Explorer Javascript 引擎的核心。

该代码适用于 API 调用，例如 RegOpenKeyExW，它负责读取寄存器值。

但是，当我尝试在 jscript.dll 中使用 COleScript::Compile 时，会出现错误。

这是我的代码：

```
 FunctionHook* CompileFunExWHook = new FunctionHook();
   CompileFunExWHook->Identifier = "COleScript::Compile";
   CompileFunExWHook->Module = "jscript.dll";
   CompileFunExWHook->Detour = (PBYTE)MyRegOpenKeyExW;
   HookManager::Instance()->CreateHook(CompileFunExWHook);
   pOriginalRegOpenKeyExW = (pRegOpenKeyExW)(HookManager::Instance()-   >GetHook("COleScript::Compile")->DetourAddress); 
```

# android - 用于推送通知的 Android 后台服务

> ID：13578879
> 
> 赞同：1
> 
> 时间：2012-11-27T06:54:19.483
> 
> 标签：android, alarmmanager

我的应用需要连接到后台服务中的远程套接字服务器。

我需要“总是”在后台运行它。众所周知-始终尝试运行服务是不可能的，而且不是一个好的架构师，因为它会使系统过载，而系统会杀死它。

有人可以建议一种方法，让我的服务仍处于“侦听”模式以进行推送通知，并仍然使用 AlarmManager 保持套接字连接处于活动状态？

# sql - 仅返回最新行

> ID：13578889
> 
> 赞同：1
> 
> 时间：2012-11-27T06:54:48.313
> 
> 标签：sql, oracle, oracle11g

我有一个名为 TRANSFER 的存储事务的表。我需要编写一个查询以仅返回给定库存标签的最新交易条目（这是识别材料的唯一键），因此我使用了以下查询

```
SELECT a.TRANSFER_ID
     , a.TRANSFER_DATE
     , a.ASSET_CATEGORY_ID
     , a.ASSET_ID
     , a.TRANSFER_FROM_ID
     , a.TRANSFER_TO_ID
     , a.STOCK_TAG
 FROM TRANSFER a
INNER JOIN (
              SELECT STOCK_TAG
                   , MAX(TRANSFER_DATE) maxDATE
                FROM TRANSFER
               GROUP BY STOCK_TAG
            ) b
   ON a.STOCK_TAG = b.STOCK_TAG AND
      a.Transfer_Date =b.maxDATE 
```

但是我遇到了一个问题，当在同一个转移日期发生多个转移时，它会返回所有行，因为我只需要最新的。我怎样才能得到最新的行？

编辑：

```
transfer_id   transfer_date   asset_category_id  asset_id   stock_tag 
 1               24/12/2010      100               111         2000
 2               24/12/2011      100               111         2000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:04:29.003

考虑`MAX(TRANSFER_ID)`在您的子查询中进行选择，假设这`TRANSFER_ID`是一个递增字段，这样以后的传输总是比之前的传输具有更大的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:33:19.873

为了避免未按 transfer_date 顺序插入行的潜在情况，并且可能出于性能原因，您可能想尝试：

```
 select
   TRANSFER_ID      ,
   TRANSFER_DATE    ,
   ASSET_CATEGORY_ID,
   ASSET_ID         ,
   TRANSFER_FROM_ID ,
   TRANSFER_TO_ID   ,
   STOCK_TAG
 from (
   SELECT
     TRANSFER_ID      ,
     TRANSFER_DATE    ,
     ASSET_CATEGORY_ID,
     ASSET_ID         ,
     TRANSFER_FROM_ID ,
     TRANSFER_TO_ID   ,
     STOCK_TAG        ,
     row_number() over (
       partition by stock_tag
       order by     transfer_date desc,
                    transfer_id desc) rn
   FROM TRANSFER)
 where rn = 1 
```

# iphone - 优化 SearchBarController iOS

> ID：13578891
> 
> 赞同：1
> 
> 时间：2012-11-27T06:54:51.910
> 
> 标签：iphone, ios

我正在创建一个自定义音乐播放器，并使用 Apple 文档中给出的谓词访问音乐库。 [http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/UsingTheiPodLibrary/UsingTheiPodLibrary.html#//apple_ref/doc/uid/TP40008765-CH101-SW1](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/UsingTheiPodLibrary/UsingTheiPodLibrary.html#//apple_ref/doc/uid/TP40008765-CH101-SW1)

但是，如果我必须搜索包含 10000 多首歌曲的库，我会发现在表格视图中显示结果存在延迟。有什么方法可以让我在本地音乐选择器搜索工作时快速获取歌曲并在表格视图中显示它？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:36:40.473

问题是您在一次调用中从核心数据中获取所有记录。您只需要获取需要在屏幕上显示的数据，并且当用户向下滚动以获取更多数据时。您可以使用`NSFetchedResultsController` [Here](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller) is a great tutorial来做到这一点

# backbone.js - 调试 Backbone.js：集合 fetch() 后渲染

> ID：13578900
> 
> 赞同：9
> 
> 时间：2012-11-27T06:55:33.160
> 
> 标签：backbone.js

我正在尝试在集合（Backbone 0.9.2）上的 fetch() 之后执行基本的渲染（）：

```
var ProjectListView = Backbone.View.extend({
        el: $('#container'),
        initialize: function () {
            this.collection = new ProjectsCollection();
            this.collection.bind("change", _.bind(this.render, this));
            this.collection.fetch({ success: function () { console.log("collection fetched"); } });
            ...
             }, 
        render: function () {
            console.log("rendered");
            ... 
```

创建新的视图实例打印出来：

```
 collection fetched 
```

所以 render() 永远不会在 fetch() 之后被调用。我在这里做错了什么？目前没有例外。

任何提示如何在主干中调试这些东西？

附言。考虑到关于 SO 的问题数量，这个特性似乎没有得到很好的记录。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-27T08:01:04.090

来自[精美手册](http://backbonejs.org/#Collection-fetch)：

> **拿来** `collection.fetch([options])`
> 
> 从服务器获取此集合的默认模型集，当它们到达时重置集合。[...] 当模型数据从服务器返回时，集合将重置。

有什么作用`reset`？[`reset`](http://backbonejs.org/#Collection-reset)做这个：

> **重启** `collection.reset(models, [options])`
> 
> [...] 使用**reset**将集合替换为新的模型列表（或属性哈希），`"reset"`最后触发单个事件。

因此`fetch`调用`reset`更新集合的模型并`reset`触发`"reset"`事件，而不是`"change"`事件。模型都没有改变，集合的`"change"`事件来自它的模型。

您应该`render`必须`"reset"`：

```
initialize: function () {
    this.collection = new ProjectsCollection();
    this.collection.bind("reset", _.bind(this.render, this));
    this.collection.fetch(...);
} 
```

如果要侦听`"change"`包含模型上的事件，则可以将`"change"`处理程序绑定到集合[，因为](http://backbonejs.org/#Collection)：

> 您可以绑定`"change"`事件以在修改集合中的任何模型时收到通知，
> [...]
> 为方便起见，在集合中的模型上触发的任何事件也将直接在集合上触发。

随着集合本身的变化，集合也会生成`"add"`和事件。`"remove"`

* * *

较新版本的 Backbone 在以下期间不再重置集合[`fetch`](http://backbonejs.org/#Collection-fetch)：

> 当模型数据从服务器返回时，它使用*set*来（智能地）合并获取的模型，除非您通过`{reset: true}`，在这种情况下，集合将（有效地）*重置*。

并且[`set`](http://backbonejs.org/#Collection-set)：

> [...] 使用传递的模型列表对集合执行“智能”更新。如果列表中的模型尚未在集合中，它将被添加；如果模型已经在集合中，它的属性将被合并；如果集合包含列表中不存在的任何模型，它们将被删除。发生这种情况时会触发所有适当`"add"`的`"remove"`, 和`"change"`事件

因此，对于较新版本的 Backbone，您需要列出`"add"`、`"remove"`和`"change"`事件（基于集合的视图无论如何都应该监听）；您也可以`{reset: true}`在初始时使用`fetch`并聆听`"reset"`。对于基于集合的视图，我建议采用以下方法：

1.  使用一个简单地将一个项目添加到视图中的回调来监听`"add"`和处理该事件，不要扔掉所有东西并重新渲染。
2.  使用仅删除新删除模型的回调来侦听`"remvoe"`并处理该事件。
3.  使用替换（或更新）适当项目的回调来监听`"change"`并处理它。
4.  收听`"reset"`并将其绑定到`render`. 然后传递`{reset: true}`给集合的初始`fetch`调用。

这将捕获重要事件，并且集合视图将做最少的工作来处理每个事件。当然，这种策略并不适用于所有情况，但我认为这是一个很好的起点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-31T15:44:37.627

这在 1.0 中发生了变化

[http://backbonejs.org/#changelog](http://backbonejs.org/#changelog)

“如果您想继续使用“重置”，请传递 {reset: true}。”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T07:35:56.890

好的，所以在有人可以解释为什么绑定不起作用之前，我使用了以下解决方法：

```
 initialize: function () {
            var self = this;
            this.collection = new ProjectsCollection();
            this.collection.fetch({ success: function () { self.render(); } }); 
```

# vb.net - 如何在 phpmyadmin 数据库中保存和检索指纹模板，使用 VB

> ID：13578909
> 
> 赞同：1
> 
> 时间：2012-11-27T06:56:11.963
> 
> 标签：vb.net, phpmyadmin, fingerprint, biometrics

我们正在使用数字角色进行生物识别。我们已经可以保存员工 ID、员工姓名和分配的手指。我们的问题是我们不知道如何将指纹模板保存到数据库并检索它，以便生物识别扫描仪仍然可以读取和验证它。文件扩展名为“.ftp”。

代码：

```
Private Sub buttonRegister_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles buttonRegister.Click

        'Does user already exists
        Dim bUserExists As Boolean = _Users.UserExists(New UserID(textBoxUserName.Text))

        ' first make sure the user is created if new user
        If _ActiveUser Is Nothing Or Not bUserExists Then
            ' initialize with supplied user name
            _ActiveUser = New User(textBoxUserName.Text)
        Else
            ' update active user if not as originally selected
            If bUserExists And Not listBoxUsers.SelectedItem.ToString() = textBoxUserName.Text Then
                _ActiveUser = _Users(New UserID(textBoxUserName.Text))
            End If
        End If

        ' and check if the template already exists for the assigned finger
        If _ActiveUser.TemplateExists(_AssignedFinger) Then
            ' show message indicating template already exists for selected finger
            Dim diagResult As DialogResult = MessageBox.Show(Me, [String].Format("Oops!" + ControlChars.Cr + ControlChars.Lf + "{0} has a template enrolled to his/her {1} finger." + ControlChars.Cr + ControlChars.Lf + ControlChars.Cr + ControlChars.Lf + "Shall the old template be discarded?", _ActiveUser.ID.ToString(), _Fingers(_AssignedFinger)), "Template already assigned!", MessageBoxButtons.YesNo, MessageBoxIcon.Error)

            ' if user selected not to overwrite, then abort
            If diagResult = Windows.Forms.DialogResult.No Then
                Return
            End If
        End If

        Try
            ' attempt to read the template
            Dim templateOpened As New DPFP.Template(File.OpenRead(textBoxTemplateFilename.Text))

            ' run a template duplicate check
            IdentifyTemplate(templateOpened)

            ' remove the old template if exists
            If _ActiveUser.TemplateExists(_AssignedFinger) Then
                ' removed from assigned finger
                _ActiveUser.RemoveTemplate(_AssignedFinger)
            End If

            ' and assign it to the user as specified
            _ActiveUser.AddTemplate(templateOpened, _AssignedFinger)

            ' update collection
            If Not _Users.UserExists(_ActiveUser.ID) Then
                ' update list box
                listBoxUsers.Items.Add(_ActiveUser.ID.ToString())

                ' add user it to the user collection
                _Users.AddUser(_ActiveUser)
            End If

            ' success
            UpdateEventLog([String].Format("{0}: Template successfully assigned to {1} finger.", _ActiveUser.ID.ToString(), _AssignedFinger.ToString()))

            ' turn off groupbox
            groupAddTemplate.Visible = False

            listBoxUsers.SelectedItem = _ActiveUser.ID.ToString()

            ' sync gui
            _syncUI()

            ' view user
            _syncViewUser()

        Catch Err As DPFP.Error.SDKException
            ' log message
            UpdateEventLog(Err.ToString())
            System.Diagnostics.Trace.WriteLine(Err.ToString())
        Catch Err As System.IO.FileNotFoundException
            ' log message
            UpdateEventLog("Template file not found or is inaccessible.")
            System.Diagnostics.Trace.WriteLine(Err.ToString())
        Catch Err As Exception
            ' log message
            UpdateEventLog(Err.ToString())
            System.Diagnostics.Trace.WriteLine(Err.ToString())
        End Try

        Using conn As New MySqlConnection("Server = localhost; Username= root; Password =; Database = vb")
            Using cmd
                With cmd
                    MsgBox("Connection Established")
                    .Connection = conn
                    .Parameters.Clear()
                    'Create Insert Query
                    .CommandText = "INSERT INTO employees(UserID, Name, Finger) VALUES (@iID, @iName, @iFinger)"
                    .Parameters.Add(New MySqlParameter("@iID", ID.Text))
                    .Parameters.Add(New MySqlParameter("@iName", textBoxUserName.Text))
                    .Parameters.Add(New MySqlParameter("@iFinger", comboBoxAssignedFinger.Text))

                End With
                Try
                    'Open Connection and Execute Query
                    conn.Open()
                    cmd.ExecuteNonQuery()
                Catch ex As MySqlException
                    MsgBox(ex.Message.ToString())
                End Try
            End Using
        End Using 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T02:49:36.513

我知道这是一篇旧帖子，但这里有一些代码块可能会有所帮助......

在保存时我使用了这个

```
 For Each template As DPFP.Template In Data.Templates    
            If Not template Is Nothing Then 
                cmd = New MySqlCommand("INSERT INTO employeefp " +
                                  "SET No=@No, " +
                                  "FP=@FP " +
                                  " ", conn)

                cmd.Parameters.Add(New MySqlParameter("@No", txtEmpNo.Text))
                cmd.Parameters.Add(New MySqlParameter("@FP", template.Bytes))

                cmd.ExecuteNonQuery()

            End If
        Next 
```

在从数据库验证时，我使用了这个

1.  加载表格时，我获取所有指纹

    ```
     Dim cmd As New MySqlCommand("SELECT * FROM employeefp  ", conn)
        Dim rdr As MySqlDataReader = cmd.ExecuteReader()

        While (rdr.Read())
            Dim MemStream As IO.MemoryStream
            Dim fpBytes As Byte()

            fpBytes = rdr("FP")
            MemStream = New IO.MemoryStream(fpBytes)

            Dim templa8 As DPFP.Template = New DPFP.Template()
            templa8.DeSerialize(MemStream)

            Dim tmpObj As New AppData
            tmpObj.No = rdr("No").ToString()
            tmpObj.Template = templa8
            FPList.Add(tmpObj)
        End While 
    ```

注意：Dim FPList As List(Of AppData) = New List(Of AppData) //你可以在 SDK 中找到这个的定义我刚刚添加了模板（包含一个打印）除了现有的模板（包含许多打印）

1.  比较机器的当前样品

    ```
    Sub OnComplete(ByVal Control As Object, ByVal FeatureSet As DPFP.FeatureSet, ByRef EventHandlerStatus As DPFP.Gui.EventHandlerStatus) Handles VerificationControl.OnComplete
    Dim printFound As Boolean = False
    VerifiedFPData = New AppData
    Try
        For Each FPData As AppData In FPList
            Dim tmplateData As New DPFP.Template
            tmplateData = FPData.Template
            Dim compareTo As New DPFP.FeatureSet
            compareTo = FeatureSet

            Dim ver As New DPFP.Verification.Verification()
            Dim res As New DPFP.Verification.Verification.Result()

            If Not tmplateData Is Nothing Then
                ver.Verify(FeatureSet, tmplateData, res)

                If res.Verified Then
                    EventHandlerStatus = DPFP.Gui.EventHandlerStatus.Success
                    printFound = True
                    VerifiedFPData = FPData
                    Exit For ' success
                End If
            End If
        Next
    Catch ex As Exception
        MessageBox.Show("verification error")
    End Try

    If printFound Then
        //TO DO 
    Else
        EventHandlerStatus = DPFP.Gui.EventHandlerStatus.Failure
        // TODO
    End If 
    ```

    结束子

希望它可以帮助某人:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T03:21:49.677

There are some missing codes from the answer above. The code of the class appdata is missing.These code is error without declaring first the tmpObj in the class AppData. `Dim tmpObj As New AppData tmpObj.No = rdr("No").ToString() tmpObj.Template = templa8 FPList.Add(tmpObj)`

# jquery - qTip2翻转缩略图显示全尺寸图像

> ID：13578910
> 
> 赞同：0
> 
> 时间：2012-11-27T06:56:23.473
> 
> 标签：jquery, replace, qtip2

我正在使用 qTip2 和我的 Umbraco 安装。我希望我的图像插入到富文本编辑器中，以便在翻转时显示完整尺寸的图像。

问题是，Umbraco 的富文本编辑器显示的图像小于全尺寸。适合富文本编辑器的宽度。因此前端显示的图像添加了例如“_360x200.jpg”而不是“.jpg”

如何替换下划线及其之后的所有内容，直到句号/句号？

```
 // Create the tooltips only on document load
    $(document).ready(function() {
        $('.rightUnevenCol img').each(function() {
            // Grab fullsize image src
//Replace the underscore and everything after it before the '.' e.g. '_320x200.jpg' to '.jpg'
            var bigSrc = $(this).attr('src').replace(/_\d+$/, "");
            $(this).qtip({
                content: '<img src="' + bigSrc + '" alt="" />',
                // Set the height/width!!! This can cause positioning problems if not set
                position: {
                    target: 'mouse',
                    adjust: {
                        mouse: true
                    }
                },
                show: {
                    target: false,
                    event: 'mouseenter',
                    effect: true,
                    delay: 90,
                    solo: false,
                    ready: false,
                    modal: false
                },
                hide: {
                    target: false,
                    event: 'mouseleave',
                    effect: false,
                    delay: 0,
                    fixed: true,
                    when: {
                        event: 'unfocus'
                    },
                    inactive: false
                },
                style: {
                    tip: false,
                    classes: 'preview'
                },
                events: {
                    render: null,
                    move: null,
                    show: null,
                    hide: null,
                    toggle: null,
                    focus: null,
                    blur: null
                }
            });
        });

        // since the qTip copies the content of the info div, you can remove it now
        $('.rightUnevenCol img').remove('.preview');

    });​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:35:44.650

尝试

```
var bigSrc = $(this).attr('src').replace(/_[^\.]*/, ""); 
```

或者如果您确定格式 123x456

```
var bigSrc = $(this).attr('src').replace(/_\d{1,3}x\d{1,3}/, ""); 
```

# android - 在没有 Google API 的情况下使用 Google Map

> ID：13578913
> 
> 赞同：1
> 
> 时间：2012-11-27T06:56:42.557
> 
> 标签：android, google-maps, maps

几周前开始了一个显示我们当地医疗中心和医院信息的简单项目，我能够从数据库中获取列表到列表视图，当我开始项目时，我没有在 min SDK 版本中选择 GOOGLE API，现在我想为每个条目添加谷歌地图。是否仍然可以在不选择谷歌 api 的情况下使用谷歌地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:14:13.510

如果没有 Google API，您将无法使用 Google 地图（好吧，您可以使用[webview 小部件并改用 javascript API](https://developers.google.com/maps/articles/android_v3)，但我认为您不想要这个）。但是为什么不立即添加 API 呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:15:20.183

据我所知，您必须使用地图 api。它非常容易做到。您所要做的就是进入 Eclipse 中的项目资源管理器，右键单击您的项目，转到首选项，选择 android，转到您使用的任何 api，然后检查下面的地图版本。您还必须获得地图密钥，但这也非常容易。

# python - Python 中不区分大小写的字符串以开头

> ID：13578916
> 
> 赞同：57
> 
> 时间：2012-11-27T06:57:02.097
> 
> 标签：python, string, performance, case-insensitive, startswith

这是我检查是否`mystring`以某个字符串开头的方法：

```
>>> mystring.lower().startswith("he")
True 
```

问题是它`mystring`很长（数千个字符），所以`lower()`操作需要很多时间。

**问题：**有没有更有效的方法？

我的失败尝试：

```
>>> import re;
>>> mystring.startswith("he", re.I)
False 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-27T06:59:08.127

您可以使用正则表达式，如下所示：

```
In [33]: bool(re.match('he', 'Hello', re.I))
Out[33]: True 

In [34]: bool(re.match('el', 'Hello', re.I))
Out[34]: False 
```

在 2000 个字符的字符串上，这比 : 快大约 20 倍`lower()`：

```
In [38]: s = 'A' * 2000

In [39]: %timeit s.lower().startswith('he')
10000 loops, best of 3: 41.3 us per loop

In [40]: %timeit bool(re.match('el', s, re.I))
100000 loops, best of 3: 2.06 us per loop 
```

如果您重复匹配相同的前缀，预编译正则表达式会产生很大的不同：

```
In [41]: p = re.compile('he', re.I)

In [42]: %timeit p.match(s)
1000000 loops, best of 3: 351 ns per loop 
```

对于短前缀，在将其转换为小写之前从字符串中切出前缀可能会更快：

```
In [43]: %timeit s[:2].lower() == 'he'
1000000 loops, best of 3: 287 ns per loop 
```

这些方法的相对时间当然取决于前缀的长度。在我的机器上，盈亏平衡点似乎是大约六个字符，这是预编译正则表达式成为最快方法的时候。

在我的实验中，单独检查每个字符可能会更快：

```
In [44]: %timeit (s[0] == 'h' or s[0] == 'H') and (s[1] == 'e' or s[1] == 'E')
1000000 loops, best of 3: 189 ns per loop 
```

但是，此方法仅适用于编写代码时已知的前缀，不适用于更长的前缀。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-27T07:02:10.013

这个怎么样：

```
prefix = 'he'
if myVeryLongStr[:len(prefix)].lower() == prefix.lower() 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-12-21T19:23:17.763

另一个简单的解决方案是将一个**元组**传递给`startswith()`所有需要匹配的情况，例如`.startswith(('case1', 'case2', ..))`.

例如：

```
>>> 'Hello'.startswith(('He', 'HE'))
True
>>> 'HEllo'.startswith(('He', 'HE'))
True
>>> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-22T14:31:26.493

只要您考虑 ASCII 范围之外的任何内容，给定的答案实际上都不是正确的。

例如，在不区分大小写的比较中，如果您遵循 Unicode 的大小写映射规则`ß`，则应将其视为等于。`SS`

要获得正确的结果，最简单的解决方案是安装遵循标准的 Python[正则表达式模块：](https://pypi.python.org/pypi/regex)

```
import re
import regex
# enable new improved engine instead of backwards compatible v0
regex.DEFAULT_VERSION = regex.VERSION1 

print(re.match('ß', 'SS', re.IGNORECASE)) # none
print(regex.match('ß', 'SS', regex.IGNORECASE)) # matches 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-27T07:14:13.313

根据 .lower() 的性能，如果前缀足够小，则多次检查相等性可能会更快：

```
s =  'A' * 2000
prefix = 'he'
ch0 = s[0] 
ch1 = s[1]
substr = ch0 == 'h' or ch0 == 'H' and ch1 == 'e' or ch1 == 'E' 
```

时序（使用与 NPE 相同的字符串）：

```
>>> timeit.timeit("ch0 = s[0]; ch1 = s[1]; ch0 == 'h' or ch0 == 'H' and ch1 == 'e' or ch1 == 'E'", "s = 'A' * 2000")
0.2509511683747405

= 0.25 us per loop 
```

与现有方法相比：

```
>>> timeit.timeit("s.lower().startswith('he')", "s = 'A' * 2000", number=10000)
0.6162763703208611

= 61.63 us per loop 
```

（当然，这很可怕，但如果代码对性能非常关键，那么它可能是值得的）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-25T01:27:53.670

在 Python 3.8 中，最快的解决方案涉及切片和比较前缀，如[this answer](https://stackoverflow.com/a/13578990/631596)中所建议：

```
def startswith(a_source: str, a_prefix: str) -> bool:
    source_prefix = a_source[:len(a_prefix)]
    return source_prefix.casefold() == a_prefix.casefold() 
```

第二快的解决方案使用 ctypes（例如[_wcsicmp](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/stricmp-wcsicmp-mbsicmp-stricmp-l-wcsicmp-l-mbsicmp-l)）。*注意：这是一个 Windows 示例。*

```
import ctypes.util

libc_name = ctypes.util.find_library('msvcrt')
libc = ctypes.CDLL(libc_name)

libc._wcsicmp.argtypes = (ctypes.c_wchar_p, ctypes.c_wchar_p)

def startswith(a_source: str, a_prefix: str) -> bool:
    source_prefix = a_source[:len(a_prefix)]
    return libc._wcsicmp(source_prefix, a_prefix) == 0 
```

[编译`re`](https://stackoverflow.com/a/13578943/631596)后的[解决方案](https://stackoverflow.com/a/13578943/631596)是第三快的解决方案，包括编译成本。如果该`regex`模块用于完整的 Unicode 支持，则该解决方案会更慢，如[this answer](https://stackoverflow.com/a/42954601/631596)中所建议的那样。每个连续匹配的成本与每个 ctypes 调用大致相同。

`lower()`并且`casefold()`很昂贵，因为这些函数通过迭代源字符串中的每个字符（不考虑大小写）并相应地映射它们来创建新的 Unicode 字符串。（请参阅：[内置函数是如何`str.lower()`实现的？](https://stackoverflow.com/a/41975752/631596)）在该循环中花费的时间随着每个字符的增加而增加，因此如果您正在处理短前缀和长字符串，请仅在前缀上调用这些函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-13T03:12:04.167

另外一个选项：

```
import re
o = re.search('(?i)^we', 'Wednesday')
print(o != None) 
```

[https://docs.python.org/library/re.html#re.I](https://docs.python.org/library/re.html#re.I)

# python - GAE 中的请求处理程序和 app.yaml

> ID：13578918
> 
> 赞同：3
> 
> 时间：2012-11-27T06:57:06.643
> 
> 标签：python, google-app-engine

我是一名刚出生的婴儿程序员，发现我对 GAE 的一些事情不太了解。

我有我的 app.yaml 设置路由到单独的应用程序

```
handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /unit3.*
  script: unit3.app

- url: /birthday.*
  script: birthday.app

- url: /signup.*
  script: signup.app

- url: /rot13.*
  script: rot13.app

- url: .*
  script: main.app 
```

然后在 signup.app - WSGI 在一个简单的发布请求后将人们重定向到欢迎页面

```
import webapp2
import jinja2
import os
import re

template_dir=os.path.join(os.path.dirname(__file__), 'templates')
jinja_env= jinja2.Environment(loader= jinja2.FileSystemLoader(template_dir), autoescape = True)

USER_RE = re.compile(r"^[a-zA-Z0-9_-]{3,20}$")
def valid_username(username):
    return username and USER_RE.match(username)

PASS_RE = re.compile(r"^.{3,20}$")
def valid_password(password):
    return password and PASS_RE.match(password)

EMAIL_RE  = re.compile(r'^[\S]+@[\S]+\.[\S]+$')
def valid_email(email):
    return not email or EMAIL_RE.match(email)

def render_str(template,**parms):
    t = jinja_env.get_template(template)
    return t.render(parms)

class  BaseHandler(webapp2.RequestHandler):
    """ a BaseHandler object to render and write  """
    def render(self, template, **kw):
        self.response.out.write(render_str(template, **kw))

    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)

class SignUpHandler(BaseHandler):

    def get(self):
        self.render('signup.html')

    def post(self):
        have_error=False
        username=self.request.get('username')
        password=self.request.get('password')
        verify=self.request.get('verify')
        email=self.request.get('email')

        params = dict(username = username, 
                      email = email)

        if not valid_username(username):
            params['name_error']='that is not a valid name'
            have_error=True

        if not valid_password(password):
            params['password_error']=('that is not a valid password')
            have_error=True
        elif password != verify:
            params['verify_error']='your passwords dont match'
            have_error=True

        if not valid_email(email):
            params['email_error']='that is not a valid email address'
            have_error=True

        if have_error:
            params['message']=('Please type your info in again ' + username)
            self.render('signup.html', **params)
        else:
            self.redirect('welcome?username=' + str(username))

class WelcomeHandler(BaseHandler):

    def get(self):
        username = self.request.get('username')
        if valid_username(username):
            self.render('welcome.html', username = username)
        else:
            self.redirect('signup')

app = webapp2.WSGIApplication([('/signup',SignUpHandler),
                               ('/welcome',WelcomeHandler)]
                               ,debug=True) 
```

虽然 WelcomeHandler 没有找到模板化的 html 文件，但我得到了 404。

基本上，对于通过 RequestHandler 路由的任何内容，我都会得到这个 404。

我很确定这是我忽略的一个基本误解，并且无法通过谷歌搜索轻松纠正。

我需要路由 .yaml 中的所有内容吗？为什么当我只有通用 URL 处理程序时不是这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:44:28.767

您需要将`/welcome.*`路线添加到您的路线，`app.yaml`以便由`signup.app`.

**另外**，如果我提出建议。您目前仅支持路线`/signup`和`/welcome`in `signup.app`：

```
app = webapp2.WSGIApplication([('/signup',SignUpHandler),
                               ('/welcome',WelcomeHandler)]
                               ,debug=True) 
```

但你正在路由所有`/signup.*`。`app.yaml`因此，如果`/signup/`将被发送到此 WSGI 处理程序并将导致 404。与其这样做，`app.yaml`不如在您的 catch-all in 中添加显式路径和 404 处理程序，`main.app`或者在每个子模块中添加一个 404 处理程序 catch-all。

# javascript - fileUploader javascript - 如何覆盖参数？

> ID：13578920
> 
> 赞同：-1
> 
> 时间：2012-11-27T06:57:08.190
> 
> 标签：javascript, jquery, file-upload

我正在使用插件[Fileuploader](https://github.com/valums/file-uploader)。我很难改变他的属性（类）。Id 必须与`$('#jquery-wrapped-fine-uploader')`的 attr Id 相同（即`<div id="jquery-wrapped-fine-uploader" class="main_pic">`）。有没有办法获得这个值？

```
$('#jquery-wrapped-fine-uploader').fineUploader({
    request: {
        endpoint: '../../main/fileupload',
        params: {
            'class' : (function(){

                var class = 5;
                /* Заместо 5 надо поставить атрибут class */
                /* i.e. insert here an Class attr */
                /* $(this).closest('#jquery-wrapped-fine-uploader').attr('class')
                    does not work :-(
                 */

                return id;
            })(),
        }
    },
    failedUploadTextDisplay: {
        mode: 'custom',
        maxChars: 256,
        responseProperty: 'error',
        enableTooltip: true
    },
    debug: true,
}); 
```

})

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T07:13:14.033

它必须是工作 - `.attr('class')`。问题是 - `$(this).closest('#jquery-wrapped-fine-uploader').attr('class')`。在这种情况下，“这”是什么意思？如果是`'#jquery-wrapped-fine-uploader'`你必须写`$(this).attr('class')`。

尝试使用这样的东西：

```
 $('#jquery-wrapped-fine-uploader').each(function(){
    var self = this;
    var className = $(self).attr('class');

    $(self).fineUploader({
        request: {
            endpoint: '../../main/fileupload',
            params: {
                'class' : (function(){

                    var class = className;

                    return id;
                })(),
            }
        },
        failedUploadTextDisplay: {
            mode: 'custom',
            maxChars: 256,
            responseProperty: 'error',
            enableTooltip: true
        },
        debug: true,
    });
}); 
```

PS Короче если по русски - то не понятно что объект “这个”。Поэтому попробуй код который написан выше。Правда не гарантирую что он без ошибок。

# javascript - 使用方法对 link_to 的 ajax 请求：在禁用 javascript 的情况下放入 rails

> ID：13578921
> 
> 赞同：0
> 
> 时间：2012-11-27T06:57:11.403
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, jquery, ruby-on-rails-3.1

我有一个链接，它使用 put 方法在投票时发送 ajax 请求。它在启用 javascript 的情况下工作正常。所以当我禁用 javascript 时它发送一个 get 请求。我什至尝试在 link_to 中使用方法 post 没有运气。任何帮助将不胜感激..

路线

```
resources :coupon_votes ,:only => [:voted_down,:voted_up] do 
  member do 
    put 'voted_up'
    put 'voted_down'    
  end
end 
```

看法

```
link_to(image_tag("coupon/works_yes_icon.png",:alt => "Worked",:size =>"16x15"),voted_up_coupon_vote_path(object.id),:html => {:remote => true, :method=>:put},:id => "voted_up_voted_up_#{object.id}",:class => "working")
link_to(image_tag("coupon/works_no_icon.png",:alt => "Did not work",:size => "16x15"),voted_down_coupon_vote_path(object.id),:remote => true, :method=>:put , :id => "voted_up_voted_down_#{object.id}",:class => "not_working")) 
```

控制器

```
def voted_up
  comman_vote do 
    @coupon.vote_up(current_user)
  end
end

def voted_down
 comman_vote do 
  @coupon.vote_down(current_user)
 end
end

def comman_vote
  if current_user && current_user.active?
    yield       
  end
respond_to do |format|
  format.js {render  "coupon_voted"}
  format.html {render :text => "Thanks for the vote! Please enable javascript to use all the features of the website."}
end
end

def find_coupon
  return if !current_user
  @coupon=Coupon.find(params[:id])
end 
```

**更新**

谢谢大家的努力。我做了另一种方式，而不是在我在 javascript(application.js) 中做的 link_to 中使用 remote true 。

意见

```
link_to(image_tag("coupon/works_yes_icon.png",:alt => "Worked",:size => "16x15"), "#", :data => {"source" => object.id },:id => "voted_up_voted_up_#{object.id}",:class => "working") 
```

应用程序.js

```
$(".working").click(function (){
var coupon_id = $(this).data('source');
var request = $.ajax({url: '/coupon_votes/' + coupon_id + '/voted_down',
  type: 'POST',
  dataType: 'script'
})
return false; 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:50:10.593

问题不在于方法 (put)，而在于调用本身是远程的。这意味着异步调用并需要 javascript。

# python - 移植一行代码

> ID：13578923
> 
> 赞同：-2
> 
> 时间：2012-11-27T06:57:28.637
> 
> 标签：python, objective-c, ios

任何人都可以弄清楚下面的 python 代码是如何工作的，并给我一种将它移植到 Objective-C (iOS) 以在我自己的项目中工作的可能方法吗？

`month_id = calendar.timegm(datetime(year, month, 1, hour, 0, 0).timetuple()) * 1000`

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:15:00.370

calendar.timegm 将给定时间转换为自 1970 年以来的秒数。更多信息请访问[http://docs.python.org/3/library/calendar.html?highlight=calendar.timegm#calendar.timegm](http://docs.python.org/3/library/calendar.html?highlight=calendar.timegm#calendar.timegm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:01:18.983

打开一个python解释器，然后输入：

```
>>> import calendar
>>> from datetime import datetime 
```

然后输入你的代码行，你应该能得到一个不错的主意。

# java - 如何使用 selenium.creatCookie 添加特定域的 cookie

> ID：13578924
> 
> 赞同：0
> 
> 时间：2012-11-27T06:57:29.313
> 
> 标签：java, selenium, junit, selenium-webdriver

我不能使用`selenium.createCookie`具有`setcookie`特定域agrument 的函数。（使用 Jmeter 还是可以的）

我使用如下：

```
selenium.createCookie("name=value", "domain=localhost");
selenium.open("localhost/sample/login"); 
```

你对此有什么想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T18:08:28.343

```
Cookie cookie = new Cookie.Builder("name", "value").domain("domain").build();
driver.manage().addCookie(cookie); 
```

只需确保首先导入正确类型的 cookie：

```
import org.openqa.selenium.Cookie; 
```

此外，您可能无法为当前不在的域添加 cookie。所以首先导航到所需的域，然后添加Cookie。

# c# - 使用 C# 获取表单中的所有文本框名称时使用什么函数？

> ID：13578930
> 
> 赞同：3
> 
> 时间：2012-11-27T06:57:55.323
> 
> 标签：c#, winforms

我想知道如何使用 C# 获取表单中的所有文本框名称？

这是我生成动态文本框的代码：

```
private void Form1_Load(object sender, EventArgs e)
    {
        for (int i = 1; i <= 5; i++)
        {
            TextBox txtbox = new TextBox();
            txtbox.Name = "txtbox" + i;
            flowLayoutPanel1.Controls.Add(txtbox);

            Label lbl = new Label();
            lbl.Name = "lbl" + i;
            lbl.Text = lbl.Name;
            flowLayoutPanel2.Controls.Add(lbl);
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        string[] textBoxNamesArray = this.Controls.OfType<TextBox>()
                                      .Select(r => r.Name)
                                      .ToArray();

        var textboxes = string.Join(",", textBoxNamesArray);

        MessageBox.Show(textboxes);
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T07:00:48.457

您可以使用 LINQ`TextBox`从当前窗体中获取类型控件的所有名称。以下查询将返回一个包含所有名称的字符串数组。

```
string[] textBoxNamesArray = flowLayoutPanel1.Controls.OfType<TextBox>()
                                          .Select(r => r.Name)
                                          .ToArray(); 
```

记得包括`using System.Linq;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:10:27.613

我使用了 this.controls 。您可以转换或添加它。

```
for ( int x = 0; x < i; x++ )
            {
                TextBox txtbox= ( TextBox )this.Controls["txtbox" + ( x + 1 ).ToString()];
               double commissions = Convert.ToDouble( txtbox.Text ) / 100;

            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T07:05:13.437

如果您可以将 .NET 4.0 与 LINQ 一起使用，则可以使用以下代码

```
ArrayList list = new ArrayList(control.Controls);
var names = list.ToArray()
            .Where(src => src is TextBox)
            .Select(src => (src as TextBox).Name); 
```

Habib提供的方法稍微好一点；）

# php - PHP - 在 $_GET 中存储 URL 的正确协议

> ID：13578932
> 
> 赞同：1
> 
> 时间：2012-11-27T06:57:58.517
> 
> 标签：php, url, get, store, external-url

将其他网站 URL 存储在您自己的 php 页面 URL 中的正确协议是什么？

例如，如果我想存储`google`它会很容易。

`MySite.com/test.php?url=http://www.google.com`

* * *

但是`http://www.google.com`，如果我想存储另一个网站的 PHP 页面，那么一个比 更复杂的 URL 又如何呢？

（例如`http://www.AnotherSite.com/page1.php?key=value&key2=value2&key3=value3`）

那么我将如何将它存储在我的 PHP 页面的 URL 中？您是否用“\&”短语替换所有“&”符号？有没有更好的方法？这甚至一开始就有效吗？

* * *

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:01:08.503

只需对URL[进行编码。](http://en.wikipedia.org/wiki/Urlencode)您可以使用 PHP 函数`urlencode()`并`urldecode()`为此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:01:15.007

如果你不想考虑：

```
$url = 'mysite.com/test.php?' . http_build_query(array(
    'url' => $anything_you_want,
)); 
```

除此以外：

```
$url = 'mysite.com/test.php?url=' . urlencode($anything_you_want); 
```

你也可以使用`rawurlencode()`. 显着的区别在于它遵循[RFC 3986](http://www.faqs.org/rfcs/rfc3986)。

进一步阅读：

[`http_build_query()`](http://www.php.net/http_build_query) [`urlencode()`](http://www.php.net/urlencode) [`rawurlencode()`](http://www.php.net/rawurlencode)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T07:01:15.633

`urlencode()`如果您想将整个 URL 用作一个参数，只需对其进行编码：

[http://us3.php.net/manual/en/function.urlencode.php](http://us3.php.net/manual/en/function.urlencode.php)

例子：

```
$url = 'http://www.AnotherSite.com/page1.php?key=value&key2=value2&key3=value';
echo 'http://MySite.com/test.php?url='.urlencode($url); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T07:01:42.640

您可以对网址使用编码。PHP 内置了非常简单的方法来做到这一点。

[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

# android - 在 VideoView 控件 Android 中禁用搜索

> ID：13578934
> 
> 赞同：0
> 
> 时间：2012-11-27T06:58:15.223
> 
> 标签：android

我正在开发一个正在播放直播频道的应用程序，所以我不需要搜索，并且要求在我的视频视图中禁用搜索。我在视频视图控件中找不到任何可以禁用搜索的属性。有谁知道我该怎么做？

我会非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:08:24.783

要在 VideoView 中隐藏控件，请将 null 设置为 MediaController 属性。

代码片段如下：

```
videoView.setMediaController(null) 
```

# html - CSS：具有半流体中心的三列布局

> ID：13578935
> 
> 赞同：4
> 
> 时间：2012-11-27T06:58:15.397
> 
> 标签：html, css, layout

我正在尝试创建一个基本的 3 列布局。本质上，中心列应该是流动的，因为它应该扩展以消耗左右列未使用的任何空间。但是，它还需要有`min-width`大约 378 个像素的固定值。

有许多选项可用于创建具有完全流动的中心列的 3 列布局，[无论](http://www.webdesign.org/img_articles/8033/demo_1.htm)是否[使用](http://jsfiddle.net/AlienWebguy/ykAPM/)浮动。但是，到目前为止，我遇到的每个预打包解决方案（以及我自己尝试过的解决方案）的问题是，随着页面宽度的减小，一旦页面宽度减小，右列将超过中心列的顶部变得太窄了。

如果可能的话，我想防止这种情况发生。理想情况下，一旦`min-width`被击中，右列应该保持原位，并且页面应该可以水平滚动。所以目标是：

1.  具有流动中心列和固定宽度左右列的 3 列布局。
2.  具有固定最小宽度的中心列，以防止它变得太小。
3.  一个尊重最小宽度的右列，当窗口变得太小时，它不会践踏、浮动或环绕在中心列下方。

首选纯 CSS 解决方案，但如果有使用一些聪明的 JavaScript 的简单方法来做到这一点，我也不反对这种方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T07:06:56.510

为此，您可以使用**display:table**属性。像这样写：

```
#wrapper{
    display:table;
    width:100%;
    height:100%;
}
#wrapper > div{
    display:table-cell;
    height:100%;
}

#left {
    width:50px;
    min-width:50px;
    background-color:pink;
}

#center {
    background-color:green;
    min-width:200px;
}

#right {
    width:50px;
    min-width:50px;
    background-color:red;
}

body, html{
    width:100%;
    height:100%;

} 
```

检查这个[http://jsfiddle.net/ykAPM/137/](http://jsfiddle.net/ykAPM/137/)

# android - Android，文本视图中的水平滚动条

> ID：13578937
> 
> 赞同：2
> 
> 时间：2012-11-27T06:58:31.387
> 
> 标签：android, android-layout, xml-layout

我希望按钮中的文本滚动...所以为此我在按钮上使用文本视图。我在布局中设置了以下属性。但它不起作用。我正在使用它`RelativeLayout`......谁能告诉我我的代码有什么问题？

```
<TextView
    android:id="@+id/textView1"
    android:text="Single-line text view that scrolls automatically if the text is too long to fit in the widget" 
    android:layout_width="wrap_content"
    android:singleLine="true" 
    android:ellipsize="marquee"
    android:marqueeRepeatLimit ="marquee_forever"
    android:focusable="true"
    android:focusableInTouchMode="true" 
    android:scrollHorizontally="true"
    android:layout_height="wrap_content"/> 
```

我得到了解决方案，我正在分享这个......我创建了一个类

```
import android.content.Context;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.widget.TextView;

public class ScrollingTextView extends TextView {

    public ScrollingTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ScrollingTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ScrollingTextView(Context context) {
        super(context);
    }
    @Override
    protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
        if(focused)
            super.onFocusChanged(focused, direction, previouslyFocusedRect);
    }

    @Override
    public void onWindowFocusChanged(boolean focused) {
        if(focused)
            super.onWindowFocusChanged(focused);
    }

    @Override
    public boolean isFocused() {
        return true;
    }

} 
```

因为我需要`TextView`在屏幕上滚动不止一个……`layout.xml`文件中的下一个使用了这个……

```
<com.yourpackage.ScrollingTextView
        android:id="@+id/TextView01"
        android:layout_width="100dip"
        android:layout_height="wrap_content"
        android:ellipsize="marquee"
        android:marqueeRepeatLimit="marquee_forever"
        android:padding="5dip"
        android:scrollHorizontally="true"
        android:singleLine="true"
        android:text="1.option" /> 
```

瞧……完成了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:44:59.800

创建一个扩展 textView 的类，因为您需要在多个 textveiw 上滚动

```
import android.content.Context;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.widget.TextView;

public class ScrollingTextView extends TextView {

    public ScrollingTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ScrollingTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ScrollingTextView(Context context) {
        super(context);
    }
    @Override
    protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
        if(focused)
            super.onFocusChanged(focused, direction, previouslyFocusedRect);
    }

    @Override
    public void onWindowFocusChanged(boolean focused) {
        if(focused)
            super.onWindowFocusChanged(focused);
    }

    @Override
    public boolean isFocused() {
        return true;
    }

} 
```

现在使用这个类来完成你的文本视图

```
 <com.yourPackage.ScrollingTextView
        android:id="@+id/TextView"
        android:layout_width="100dip"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button4"
        android:layout_alignTop="@+id/button4"
        android:layout_marginLeft="18dp"
        android:ellipsize="marquee"
        android:marqueeRepeatLimit="marquee_forever"
        android:padding="5dip"
        android:scrollHorizontally="true"
        android:singleLine="true"
        android:text="Text"
        android:textColor="#000000" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:25:13.433

如果您不需要对 TextView 进行子类化。

```
TextView
        android:text="Single-line text view that scrolls automatically if the text is too long to fit in the widget" 
        android:singleLine="true" 
        android:ellipsize="marquee"
        android:marqueeRepeatLimit ="marquee_forever"
        android:focusable="true"
        android:focusableInTouchMode="true" 
        android:scrollHorizontally="true"
        android:layout_width="wrap_content" 
    android:layout_height="wrap_content"/>

public class WordExtractTest extends Activity {

    TextView tv1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv1 = (TextView)findViewById(R.id.tv1);

        loadDoc();
    }

    private void loadDoc(){

        String s = "";

        for(int x=0;x<=100;x++){
            s += "Line: "+String.valueOf(x)+"\n";
        }

        tv1.setMovementMethod(new ScrollingMovementMethod());

        tv1.setText(s);

    }
} 
```

# xml - 使用 xsl 在 xml 中将 '&' 替换为 '&'

> ID：13578938
> 
> 赞同：1
> 
> 时间：2012-11-27T06:58:30.783
> 
> 标签：xml, xslt

我正在为 xml 编写 xsl，但我被困`&`在我的 xml 中。它显示错误，如`A semi colon character was expected. Error processing resource..`.

现在我希望全部`&`替换为`&amp;`. 这样它就不会显示任何错误。

我怎样才能做到这一点？

有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:29:23.587

XSL 不可能——它只对格式良好的 XML 输入进行操作。

您需要使用一些搜索和替换功能，例如 sed：

```
sed -i 's:&:&amp;:' yourfile.xml 
```

甚至更好：

```
sed -i 's:&:&amp;:g;s:amp;amp;:amp;:g;' yourfile.xml 
```

这会阻止您替换正确的实体引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:34:17.093

所以这里有一个答案。将 $input 参数替换为您的输入文件。针对任何有效的 XML 文件运行 - 而不是您的输入文件作为输入 - 脚本将忽略它。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl"
  exclude-result-prefixes="xs xd"
  version="2.0">

  <xsl:param name="input" select="'file:/U:/input.txt'"/>

  <xsl:template match="/">
    <result>
    <xsl:analyze-string select="unparsed-text($input)" regex="&amp;">
      <xsl:matching-substring><xsl:text>&amp;</xsl:text></xsl:matching-substring>
      <xsl:non-matching-substring><xsl:copy-of select="."></xsl:copy-of></xsl:non-matching-substring>
    </xsl:analyze-string>
    </result>
  </xsl:template>

</xsl:stylesheet> 
```

PS - 我将此作为概念证明，而不是针对您的潜在问题的建议解决方案。XSLT 不是完成这项工作的最佳工具（仅仅因为你只有一把锤子并不意味着你应该把所有东西都当作钉子）。

# ruby-on-rails-3 - 如何渲染祖先树视图的嵌套 ul 列表

> ID：13578945
> 
> 赞同：2
> 
> 时间：2012-11-27T06:59:10.823
> 
> 标签：ruby-on-rails-3, ancestry, content-tag

我想使用 content_tag 呈现如下所示的结构，其中集合是祖先对象。

```
 <ul>
    <li>
       <a>Fruits</a>
     <ul>
       <li>
         <a>Apple</a>
        </li>
        <li>
            <a>Orange</a>
        </li>
      </ul>
     </li>
     <li>
        <a>Colours</a>
     </li>
   </ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T02:42:33.150

我相信这是答案，社区，如果它是错误的，请编辑和调整这篇文章。

像这样创建一个辅助方法

```
def nested_groups(groups)
   content_tag(:ul) do
      groups.map do |group, sub_groups|
         content_tag(:li, group.name +  nested_groups(sub_groups))
      end.join.html_safe
   end  
end 
```

然后，将祖先对象传递给视图中的方法：

```
<%= nested_groups(@groups.arrange) %> 
```

它将以正确的方式呈现 ul-list。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-04T14:46:44.240

以下代码将生成一个正确嵌套的列表。例如，参见[W3schools](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_lists2)。

首先创建一个助手：

```
module AttributeHelper
  def nested_attributes(attributes)
    content_tag :ul do
        attributes.each do |attribute|
            concat(content_tag(:li, attribute.name))
            if attribute.has_children? 
                concat(nested_attributes(attribute.children))
            end
        end
    end
  end
end 
```

然后在您的视图中使用辅助方法：

```
= nested_attributes(@attributes.roots) 
```

# java - queryDSL MathExpressions 幂函数

> ID：13578951
> 
> 赞同：2
> 
> 时间：2012-11-27T06:59:41.013
> 
> 标签：java, querydsl

查询`DSL` `MathExpressions`幂函数具有以下语法。

力量：

```
public static <A extends Number & Comparable<?>> 
  NumberExpression<Double> power(Expression<A> num, int exponent). 
```

我们正在尝试将其用作

```
MathExpressions.power(Expressions.constant(new Integer(10)),
  xyz.amtScale.intValue()); 
```

在这种情况下，我们将 DB 列 ,`amtScale(NumberPath)`作为指数值。

我们如何将 a 转换`NumberExpression`为原始 int 值？

# javascript - 在 Mobile Web 中检测 iPhone 5 或其他设备

> ID：13578956
> 
> 赞同：0
> 
> 时间：2012-11-27T07:00:15.227
> 
> 标签：javascript, mobile, web, iphone-5

我正在编写一个也在手机中浏览的 Web 应用程序（xhtml、css、js）。我要检测设备是不是iphone 5！

你知道它的 javascript 控制器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:22:54.910

您需要检查用户是否在 iOS 设备上**并**具有 Retina 显示屏**，以及**屏幕是否正好为 548px 高。

仅检查retina+displayHeight 是不够的，因为您可能会不小心将其他操作系统（例如Android）作为目标，这些操作系统在同样具有高密度显示器和548 像素屏幕高度的设备上运行。

只需使用这个脚本，它会做你想做的事：[http ://www.timo-ernst.net/2013/04/simple-iphone-5-detection-with-javascript/](http://www.timo-ernst.net/2013/04/simple-iphone-5-detection-with-javascript/)

现在您可以在启动时将标志应用到您的 dom 树（在 中`<head></head>`）：

```
<script>if (isIphone5()) $("html").addClass("isIphone5");</script> 
```

如果您需要通过 css 定位 iPhone5，您现在可以应用如下样式，例如：

```
<style>.isIphone5 .someClass{color:red}</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:16:22.060

我知道这一点：

```
 if('devicePixelRatio' in window && window.devicePixelRatio == 2 ){
     // retina
  } 
```

AND（如果需要在服务器上检测）

[如何检测视网膜屏幕？](https://stackoverflow.com/questions/13511682/how-to-detect-retina-screen/13512333#13512333)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:05:36.187

您可以使用 CSS3 媒体查询来检测 iPhone 5：

```
@media (device-height: 568px) and (-webkit-min-device-pixel-ratio: 2) {
/* iPhone 5 or iPod Touch 5th generation */
} 
```

# junit - 如何使用 JMock 模拟具有模拟对象参数的构造函数的类？

> ID：13578959
> 
> 赞同：1
> 
> 时间：2012-11-27T07:00:27.677
> 
> 标签：junit, jmock

如何使用 JMock 模拟具有模拟对象参数的构造函数的类？

我需要在使用 JMock 的方法中覆盖以下代码行。

搜索搜索 = 搜索（请求）；

在单元测试方法中，我为请求创建了模拟对象，但我无法模拟搜索，因为搜索具有带有模拟对象请求参数的构造函数（这里我模拟了请求）

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:09:20.743

如果它没有构造函数，你将如何模拟它？您的问题可能是缺少依赖注入。该`Search`对象可以是您在测试中调用的方法的参数，也可以是您正在测试的类的字段。另一方面，如果这个`Search`类是一个简单的 bean 或助手类，你可能不需要模拟它。

因此，为了提供更多帮助，我们需要更多地了解您正在测试的代码以及更多关于`Search`类的信息。

# actionscript-3 - actionscript 3，设置颜色变量onClick of button

> ID：13578961
> 
> 赞同：0
> 
> 时间：2012-11-27T07:00:34.387
> 
> 标签：actionscript-3

好的，想法很简单，舞台上的一组按钮，点击按钮改变颜色来绘制。我正在尝试学习 flash 和 actionscript，但不确定我的问题出在哪里，但我不知道该怎么做。

```
package {
import flash.display.Sprite;
import flash.events.MouseEvent;

public class Artist extends Sprite {
    public var drawing:Boolean;
    public var colorArray:Array;
    public var dc;

    public function colors() {
        colorArray = ["0xFF0000","0xFFA500","0xFFFF00","0x00FF00","0x0000FF","0x4B0082","0x8F00FF","0xFF69B4","0x00CCFF","0x008000","0x8B4513"];

        for (var i:int = 0; i < colorArray.length; i++) {
        this["btn_" + i].addEventListener(MouseEvent.CLICK, set_color);
        }
    }

    public function set_color(e:MouseEvent):void {
        dc = colorArray;
    }

    public function Artist() {
        graphics.lineStyle(10,dc);
        drawing = false;
        stage.addEventListener(MouseEvent.MOUSE_DOWN, startDrawing);
        stage.addEventListener(MouseEvent.MOUSE_MOVE, draw);
        stage.addEventListener(MouseEvent.MOUSE_UP, stopDrawing);
    }

    public function startDrawing(event:MouseEvent):void {
        graphics.moveTo( mouseX, mouseY);
        drawing = true;
    }

    public function draw(event:MouseEvent) {
        if(drawing) {
            graphics.lineTo(mouseX,mouseY);
        }
    }

    public function stopDrawing(event:MouseEvent) {
        drawing = false;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:42:20.747

您应该通过按钮名称获取索引，然后您可以使用单击的索引分配颜色。

```
for (var i:int = 0; i < colorArray.length; i++) {
    this["btn_" + i].addEventListener(MouseEvent.CLICK, set_color);
}

public function set_color(e:MouseEvent):void {
    // Get the button name and fetch it's index
    var index:int = int(e.currentTarget.name.substring(4));
    dc = colorArray[index];
} 
```

此外，如果您想在方法中访问它，请确保 colorArray 在整个类中都是已知的。`colors`正如Lukasz 所说 ，只需在方法之外定义它：`protected var colorArray:Array`并使用数字而不是字符串作为颜色`0xFF0000`而不是`"0xFF0000"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:54:17.647

使用`tag`Button 上的属性将颜色（或颜色索引）放入按钮本身，然后在单击处理程序中通过`event.sender.tag`.
您还可以使用颜色数组中的标签（以及另一个数组中的名称）生成按钮。

# c - 如何跟踪函数调用？

> ID：13578962
> 
> 赞同：0
> 
> 时间：2012-11-27T07:00:38.923
> 
> 标签：c, function

看到我有这样的功能集

```
funtion_a();
funtion_b();
funtion_c();
|
|
funtion_y();
funtion_z(); 
```

现在这个所有函数在内部调用`magic()`

现在，当`function_j() calles magic()`出现问题并且我想在这种情况下进行调试时，当我将任何单个打印语句放入魔术时，然后在每种情况下

```
function_a() calles magic()
function_b() calles magic()
|
function_z() calles magic() 
```

printf 已执行，很难看到在我感兴趣的案例中发生了什么

```
function_j() calles magic() 
```

**所以现在有什么办法让我可以跟踪从 function_j() 调用的魔法，所以只有在这种情况下我的调试打印才会出现。？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:06:59.233

就在这里。它被称为调试器。gdb 什么的。如果在代码中放置断点，则可以显示调用堆栈并查看被调用的函数。您将不得不研究您的特定调试器的命令。有些集成在 IDE 中，有些是命令行工具，有些是独立的。让 google 帮助您找到适合您的环境和偏好的产品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T07:33:58.003

您可以使用以下结构

```
int debug = 0;

function magic() {
    .
    .
    if (debug) printf("hello\n");
    .
    .
}

function a();
function b();
.
.
function j() {
   debug = 1;
   .
   .
   magic();
   .
   .
   debug = 0;
}
function k();
.
.
.
function z(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T07:08:30.193

你还没有发布你的原型，`magic()`所以我要弥补一个：

```
int magic(int a, int b); 
```

现在，给定这个原型，在定义这个原型的标题中的定义下面添加这些行：

```
inline int real_magic(int a, int b) { return magic(a, b); }

#define magic(a, b) (printf(__func__ " calling magic()\n"), real_magic((a), (b))) 
```

在实现的翻译单元中`magic()`，您必须`#undef`使用宏：

```
#undef magic

int magic(int a, int b)
{
    // implementation
}

#define magic(a, b) (printf(__func__ " calling magic()\n"), real_magic((a), (b))) 
```

您将不得不调整宏和`real_magic`包装器以匹配您的参数和返回类型。

这是一个可怕的 hack，但它是我能想出的最简单的机制来满足您的要求。考虑改用适当的调试器，因为它们将允许在错误发生时更深入地检查程序状态，包括变量值和整个堆栈跟踪。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T07:11:19.883

正如其他人所提到的，我建议使用调试器。但是，如果您很着急，并且鉴于您已经编写了所有这些诊断程序`printf`，您难道不能直接通过管道输出您的输出，`grep`以便查看您感兴趣的行吗？

# java - 在 hbase mapreduce 中传递 Delete 或 Put 错误

> ID：13578963
> 
> 赞同：0
> 
> 时间：2012-11-27T07:00:40.140
> 
> 标签：java, hadoop, mapreduce, hbase

在 hbase 上运行 mapreduce 时出现以下错误：

```
java.io.IOException: Pass a Delete or a Put
    at org.apache.hadoop.hbase.mapreduce.TableOutputFormat$TableRecordWriter.write(TableOutputFormat.java:125)
    at org.apache.hadoop.hbase.mapreduce.TableOutputFormat$TableRecordWriter.write(TableOutputFormat.java:84)
    at org.apache.hadoop.mapred.MapTask$NewDirectOutputCollector.write(MapTask.java:639)
    at org.apache.hadoop.mapreduce.TaskInputOutputContext.write(TaskInputOutputContext.java:80)
    at HBaseImporter$InnerMap.map(HBaseImporter.java:61)
    at HBaseImporter$InnerMap.map(HBaseImporter.java:1)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)
12/11/27 16:16:50 INFO mapred.JobClient:  map 0% reduce 0%
12/11/27 16:16:50 INFO mapred.JobClient: Job complete: job_local_0001
12/11/27 16:16:50 INFO mapred.JobClient: Counters: 0 
```

代码：

```
public class HBaseImporter extends Configured implements Tool  {    
    public static class InnerMap extends
TableMapper<Text, IntWritable> {
    IntWritable one = new IntWritable();

    public void map(ImmutableBytesWritable row, Result value, Context context) throws IOException, InterruptedException {
    String val = new String(value.getValue(Bytes.toBytes("cf"), Bytes.toBytes("line")));
    String[] words = val.toString().split(" ");
        try {
                for(String word:words)
            {
            context.write(new Text(word), one);
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

public static class MyTableReducer extends TableReducer<Text, IntWritable, ImmutableBytesWritable>  {

    public void reduce(Text key, Iterable<IntWritable> values, Context context) throws IOException, InterruptedException {
            int i = 0;
            for (IntWritable val : values) {
                i += val.get();
            }
            Put put = new Put(Bytes.toBytes(key.toString()));
            put.add(Bytes.toBytes("cf"), Bytes.toBytes("count"), Bytes.toBytes(i));

            context.write(null, put);
    }
}

public int run(String args[]) throws Exception
{
    //Configuration conf = getConf();
     Configuration conf = HBaseConfiguration.create();
        conf.addResource(new Path("/home/trg/hadoop-1.0.4/conf/core-site.xml"));
        conf.addResource(new Path("/home/trg/hadoop-1.0.4/conf/hdfs-site.xml"));

    Job job = new Job(conf,"SM LogAnalyzer MR");

    job.setJarByClass(HBaseImporter.class);
    //FileInputFormat.setInputPaths(job, new Path(args[1]));
    //FileOutputFormat.setOutputPath(job, new Path("outyy"));
     //job.setOutputFormatClass(TextOutputFormat.class);
      job.setMapOutputKeyClass(Text.class);
        job.setMapOutputValueClass(IntWritable.class);

    //job.setMapperClass(InnerMap.class);
    Scan scan = new Scan();
    scan.setCaching(500);        // 1 is the default in Scan, which will be bad for MapReduce jobs
    scan.setCacheBlocks(false);
    TableMapReduceUtil.initTableMapperJob(
            "wc_in",        // input table
            scan,               // Scan instance to control CF and attribute selection
            InnerMap.class,     // mapper class
            Text.class,         // mapper output key
            IntWritable.class,  // mapper output value
            job);

    TableMapReduceUtil.initTableReducerJob(
            "word_count",        // output table
            MyTableReducer.class,    // reducer class
            job);
        job.setNumReduceTasks(1);

    job.setNumReduceTasks(0);

    return job.waitForCompletion(true)?0:1;
}

public static void main(String[] args) throws Exception {
    //Configuration conf = new HBaseConfiguration();
    //Job job = configureJob(conf, args);
    //System.exit(job.waitForCompletion(true) ? 0 : 1);

    String[] inArgs = new String[4]; 
    inArgs[0] = "HBaseImporter";
        inArgs[1] = "/user/trg/wc_in"; 
        inArgs[2] = "AppLogMRImport"; 
        inArgs[3] = "MessageDB"; 
        int res = ToolRunner.run(new Configuration(), new HBaseImporter(), inArgs);
        //int res = ToolRunner.run(new Configuration(), new HBaseImporter(), args);

    }
} 
```

我将地图输出值类设置为 IntWritable.class，但仍会在需要 Put 对象的映射器中调用 TableOutputFormat.write。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:16:24.543

我自己的问题得到了答案。我错误地将减速器任务设置为“0”。

```
 job.setNumReduceTasks(0); 
```

所以 Mapper 期望 Put 对象直接写入 Hbase 表。评论上面的行解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T11:21:18.163

下面的代码没有解决这个问题：

```
job.setNumReduceTasks(0); 
```

它仅有助于禁用 reduce 阶段并跳过 reduce 阶段的真正问题。

此外，配置中存在问题，您应该将`mapred-site.xml`和`hbase-site.xml`作为配置资源。

# amazon-s3 - Amazon S3 Java 下载挂在最后一个文件上

> ID：13578966
> 
> 赞同：0
> 
> 时间：2012-11-27T07:00:54.573
> 
> 标签：amazon-s3, download, progress, freeze

我在最后一个文件完成下载后挂起 Amazon S3 下载时遇到问题，“锁定”文件不被删除，因为它仍然被 java 应用程序“使用”，否则它们工作正常。此外，进度似乎没有正确更新，因为最大的文件只是说 100 一次它的进度，然后继续下载而没有任何进一步的更新，直到它完成，此时它在脚本挂起之前显示“状态：已完成” . 我的代码如下：

```
private static void getTheS3File(String bucketName, String file, String projID, String fileType) throws Exception {
    ProgressListener progressListener = new ProgressListener() {
        int lastProg = 0;
        public void progressChanged(ProgressEvent progressEvent) {
            if (download == null) return;

            int curProg = (int)download.getProgress().getPercentTransfered();
            if(curProg != lastProg) {
                System.out.println(curProg);
                lastProg = curProg;
            }

            switch (progressEvent.getEventCode()) {
            case ProgressEvent.COMPLETED_EVENT_CODE:
                System.out.println("State: " + download.getState());
                break;
            case ProgressEvent.FAILED_EVENT_CODE:
                try {
                    AmazonClientException e = download.waitForException();
                    System.out.printf("Unable to download file from Amazon S3: " + e.getMessage(), "Error Downloading File", JOptionPane.ERROR_MESSAGE);
                } catch (InterruptedException e) {}
                break;
            }
        }
    };
    File newFile = null;
    GetObjectRequest request = new GetObjectRequest(bucketName, file).withProgressListener(progressListener);
    if(fileType == "img") {
        newFile = new File("/c:/test/" + projID + "/original.jpg");
    } else if(fileType == "txt") {
        newFile = new File("/c:/test/" + projID + "/test.txt");
    }
    download = tx.download(request,newFile);
    //System.out.println("progress: " + download.getProgress().getPercentTransfered() + " State: " + download.getState());
} 
```

我几乎破解了 SDK 附带的 Amazon S3 传输进度示例的示例代码，以创建没有 GUI 的方法的下载版本，所以我很惊讶它甚至可以工作。我对 Java 不是很好，对 AWS API 更差，所以欢迎任何指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:45:37.527

我找到了解决挂起问题的方法。显然**tx = new TransferManager(credentials);** 应该是**tx = new AmazonS3Client(credentials);** . 我不确定传输管理器是如何工作的，但我假设它挂起的原因是它完成后没有关闭连接，但这可能是另一个话题......

# php - decalare 方法依赖于 php 中的超类

> ID：13578973
> 
> 赞同：-2
> 
> 时间：2012-11-27T07:01:10.640
> 
> 标签：php, static

我想将子类中的方法声明为静态或非静态取决于父类。我正在使用 php，由于版本更改，我遇到了这个问题，有人可以帮忙吗？这是一个例子，展示了到底发生了什么变化

```
//in earlier version
class parent{

  function test(){
    //some code here
  }
}

class child extends parent{

  function test(){
    //some code here
  }
} 
```

* * *

```
//in new version
class parent{

  static function test(){
    //some code here
  }
}

class child extends parent{

  function test(){
    //some code here
  }
} 
```

**致命错误：无法在子类中使静态方法 parent::test() 非静态**

我希望我的代码与这两个版本兼容。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:07:45.797

前言：这是一个非常糟糕的主意。如果你的基础框架在两个版本之间发生了如此根本的变化，以至于 API 破坏了向后兼容性，你应该为你的类创建两个单独的版本，分别针对旧版本和新版本。很可能不仅仅是函数签名更改为`static`，您很可能必须更改大量代码才能使用这种新`static`的做事方式。

不过，要回答您的字面问题：您不能创建*一个*与两者兼容的类，因为更改根本不兼容。您可以根据您的目标版本动态声明不同的类。如果基础框架没有可以读取的明显版本号，则可以自省父类：

```
$class  = new ReflectionClass('Parent');
$method = $class->getMethod('test');

if ($method->isStatic()) {
    // include code for new version
    require_once 'child.new.class.php';
} else {
    // include code for old version
    require_once 'child.old.class.php';
} 
```

同样，由于相同名称下的代码重复，**这是一个非常糟糕的主意。**但这是唯一的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:17:43.890

您不能用非静态方法覆盖静态方法。您可以尝试在孩子中进行简单的覆盖

```
public static function test(){
 //some code here
 } 
```

如果它在你的情况下是可以接受的。

确实，您陷入了一种非常糟糕的编码方式。您必须找到比检查父类中是否存在静态或非静态方法更好的解决方案。

# sql - 合并两列中两个sql查询的结果

> ID：13578983
> 
> 赞同：4
> 
> 时间：2012-11-27T07:01:42.027
> 
> 标签：sql, sql-server, tsql, join

查询一：

```
SELECT COUNT (A.EMPNO) AS [PRESENT]    
FROM ERPDATA.NIITESS.DBO.ZEMP_MASXST_WEB_AL A INNER                    
JOIN PPA_EVENTWISEEMPLOYEEMASTER B ON 
(CASE B.VC_BA WHEN '%' THEN LTRIM(RTRIM(A.PDIBUSHORT)) ELSE B.VC_BA END) =  LTRIM(RTRIM(A.PDIBUSHORT))                   
AND (CASE B.VC_PA WHEN '%' THEN A.PA ELSE B.VC_PA END) = A.PA                
WHERE A.STATUS = 3  
AND A.EMPNO IN (SELECT VC_EMPCODE FROM ERPDATA.NIITESS.DBO.ADA_MXEASTER WHERE IN_ATTENDANCE_STATUS = 1 AND CH_ACTIVE = 'Y' AND VC_EMPCODE <> '')                    
GROUP BY B.IN_EVENTID 
```

查询 2：

```
SELECT COUNT (A.EMPNO) AS [TOTAL]    
FROM ERPDATA.NIITESS.DBO.ZEMP_MASXST_WEB_AL A INNER                    
JOIN PPA_EVENTWISEEMPLOYEEMASTER B ON 
(CASE B.VC_BA WHEN '%' THEN LTRIM(RTRIM(A.PDIBUSHORT)) ELSE B.VC_BA END) =  LTRIM(RTRIM(A.PDIBUSHORT))                   
AND (CASE B.VC_PA WHEN '%' THEN A.PA ELSE B.VC_PA END) = A.PA                
WHERE A.STATUS = 3 
```

我想将两个结果合并到两列中，其中缺少列 = 查询 2 - 查询 1 以更快地处理速度。我该怎么做？示例：
我有两个结果：
//----------------------------------------查询: 1
1
2
3
4
//------------------------------------- 查询：2
4
5
6
8

//------------------------------------------------两列中的结果
1 5
2 6
3 7
4 8

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T07:09:58.833

```
Select a.C1-b.C2 as Res
 from
(
Select Count(*) as C1 from Users
Group by Name
) a
join
(
Select Count(*) as C2 from User2
Group by Name
) b ON 1=1 -- or desired condition if existing 
```

# java - PayPal：callBack url 和 returnurl 有什么区别？

> ID：13578985
> 
> 赞同：2
> 
> 时间：2012-11-27T07:01:45.940
> 
> 标签：java, web-services, soap, paypal

现在我正在使用表达式结帐。

我在 API 中有两个属性，一个是**返回 url**，另一个是**回调 url。**

我知道返回 url，但什么时候使用回调 url？

在经常性付款的情况下，哪个更好地用于确认交易？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:06:51.710

ReturnURL 是 PayPal 在用户在 PayPal 页面上完成审查/付款后重定向的位置。

CallbackURL 用于将 PayPal 引导到您设置的 Web 服务，该服务可以从 PayPal 的服务器接收付款人的运输信息，根据该数据生成运输和销售税率，并将运输选项返回到 PayPal 审查屏幕。这会在此评论页面上的下拉列表中填充您的退货费率，以便买家可以在 PayPal 审核期间从这些价格中进行选择，并在他们返回您的网站后消除额外的步骤。

从理论上讲，它很棒，但不幸的是，我没有很好的经验。它确实有效，但它只给应用程序最多 6 秒的时间来完成所有事情。如果您尝试在回调脚本中调用 UPS、USPS、FedEx 等第三方服务以获取费率信息，这通常会一直崩溃，并且 PayPal 将默认使用您提供的运输选项与您的 SetExpressCheckout 请求。

但是，如果您有一种真正快速的方法来获得运费，那么它是一个很棒的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:14:25.923

> **返回**买家完成付款后，PayPal 将他们的浏览器重定向到的 URL。例如，在您的网站上指定一个显示“感谢您的付款”页面的 URL。默认 – PayPal 将浏览器重定向到 PayPal 网页。
> 
> **callback_url**您的即时更新回调服务器的 URL [用于跟踪您的库存、记录等]

[贝宝变量](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)

在定期付​​款的情况下，两者都不应该用于向用户确认交易。我相信 Paypal 每次收款或向帐户付款时都会默认发送通知电子邮件。

**请注意**，我不是 Paypal 专家，所以如果我不在，请不要恨我。:)

# mysql - 如何在 SQL 中拆分列

> ID：13578989
> 
> 赞同：0
> 
> 时间：2012-11-27T07:01:56.680
> 
> 标签：mysql, sql

在我的表中，我有一列`current_date`的值为 2012-11-27。

这是我的代码

```
$query = QModel::query("SELECT * FROM transaction WHERE current_date='$order_date'"); 
```

的值`$order_date`仅是年月“ *2012-10* ”，我如何将其拆分`current_date`为仅年月“ *2012-10* ”...

我应该使用`CHARINDEX`拆分 current_date 吗？请问如何...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:04:34.000

好吧，如果您需要在一个月内选择所有记录，您可以执行以下操作：

```
SELECT * 
FROM table
WHERE current_date >= convert(datetime, '20121001', 112) and current_date < convert(datetime, '20121101', 112) 
```

我无法建议使用`month`和`year`功能，因为您的索引不起作用

**更新：** AFAIK，在 MySQL 中它将是

```
SELECT * 
FROM table
WHERE current_date >= str_to_date('20121001', '%y%m%d') and current_date < str_to_date('20121101', '%y%m%d') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:04:33.907

如果你正在使用`MySQL`

```
SELECT * 
FROM table 
WHERE YEAR(current_date) = 2012 AND
      MONTH(current_date) = 10 
```

为了`SQL Server`

```
SELECT * 
FROM table 
WHERE DATEPART(year,current_date) = 2012 AND
      DATEPART(month, current_date) = 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:04:36.167

试试这个：

适用于 mysql 和 sql server

```
SELECT * 
FROM table 
WHERE month(current_date)=10
and   year(current_date)=2012 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T07:05:45.393

如果您使用的是 MSSQL，请尝试以下操作：

```
select * 
from table
where datepart(year, current_date) = 2012
    and datepart(month, current_date) = 10 
```

# svg - 如何阅读 raphael js 中的多篇论文集

> ID：13578991
> 
> 赞同：2
> 
> 时间：2012-11-27T07:02:28.110
> 
> 标签：svg, raphael

我的画布上有一堆图像，我正在旋转，借助 raphael js 和 raphael-free-transform 插件进行缩放

我有这个问题。我需要图像对象周围的边框，因为 svg 不允许在图像周围进行描边，所以我通过设置矩形的描边添加了一个矩形。将图像和矩形组合在 paper.set() 中，并在集合本身上应用自由变换。代码是

```
img = paper.image(image.src, tx, ty, 362, 500); //main image
            rec = paper.rect(tx, ty, 362, 500).attr({'stroke':'#ff00ff','stroke-width':'2'});
            var se = $paper.set();
            se.push(img);
            se.push(rec);
            ft = paper.freeTransform(se) 
```

现在一切正常，但我需要在另一张画布上按原样复制纸张元素，我使用 raphael.serialize 将元素从纸张复制到另一张纸张。唯一的问题是复制应用于元素的转换。

早些时候没有边界，每个节点都使用名为“freeTransform”的属性（由 raphael-free-transform.js 添加），我用来在另一张纸上复制复制。

但是因为现在我在**set()**上应用我的自由变换，所以我没有得到这个属性值。

希望我的问题很清楚。任何指向解决方案的指针将不胜感激。:)

# ruby-on-rails - 试图通过在 Rails 上备份 ruby gem nad ruby 来备份 postgres 数据库

> ID：13578992
> 
> 赞同：1
> 
> 时间：2012-11-27T07:02:38.077
> 
> 标签：ruby-on-rails, postgresql, openssl, backup, public-key

我的 my_backup.rb=>

```
 database PostgreSQL do |db|
      db.name               = "xxxxx"
      db.username           = "postgres"
      db.password           = "*********"
      db.host               = "localhost"
      db.port               = 5432
    end

    store_with SCP do |server|
      server.username     = "username"
      server.password     = "password"
      server.ip           = "xxx.xxx.xxx.xxx" 
      server.port         = 300
      server.path         = "~/backups/"
      server.keep         = 5
      #server.passive_mode = false
    end 
```

并有这个错误=>

```
CleanerError：清理警告
   临时备份文件夹“/home/ilfs/Backup/.tmp”
   似乎包含以前备份的包文件！
   /home/ilfs/Backup/.tmp/2012.11.26.17.34.07.my_backup.tar
   这些文件现在将被删除。

   请检查日志以获取消息和/或您的通知
   关于此备份：“my_backup (my_backup) 的说明”
   必须删除的临时文件不应该存在。
 为“my_backup (my_backup) 的描述”执行备份！
 [备份 3.0.27：ruby 1.8.7（补丁级别 358 上的 2012-02-08 MBARI 8/0x6770）[x86_64-linux]，MBARI 0x6770，Ruby 企业版 2012.02]
 Database::PostgreSQL 开始转储和归档“ces_dev”。
 使用 Compressor::Bzip2 进行压缩。
   命令：'/bin/bzip2'
   分机：'.bz2'
 数据库::PostgreSQL 完成！
 打包备份文件...
 拆分器配置为 250MB 的块大小。
 包装完成！
 清理临时文件...
 ModelError：备份 my_backup (my_backup) 的描述失败！
   发生错误，导致此备份在完成之前中止。
   原因：OpenSSL::PKey::PKeyError
   不是公钥“/home/sumanta/.ssh/id_rsa.pub”

```

有人可以帮忙快速回复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:00:37.740

那么问题出在postgress - 你必须在pg_hba.conf中添加你的ip => host all ip trust/md5（取决于版本）。并感谢 a_horse_with_no_name 以正确的格式编辑它

# java - java - 如何在java中创建具有指定字符集和指定长度的md5字符串的md5？

> ID：13578998
> 
> 赞同：0
> 
> 时间：2012-11-27T07:03:04.353
> 
> 标签：java, md5

它有什么方法可以为给定的字符串创建一个 md5，md5 应该只有指定的字符，比如只有字母数字，md5 的长度也应该使用 java 定义。

**例子：**

假设这个问题的文本是一个用于制作 md5 的字符串，并且它具有“//:\ #$%^&*!()_-=+|” 这个测试开始和结束时的这些字符我需要一个 md5 之类的。

*预期输出：*

sdki544k54353453（只有字母数字的 16 长字符串）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:07:48.017

> 它有什么方法可以为给定的字符串创建一个 md5

第一个问题：您需要定义要使用哪种编码将字符串转换为字节。MD5 适用于*二进制*数据，而不是文本。因此，您需要将字符串转换为字节，然后对其进行散列，这将为您提供 16 个字节作为散列。

> md5 应该只有指定的字符说只有字母数字

好吧，如果你想节省一点空间，那最容易用十六进制或 base32 完成。

> md5 的长度也应该使用 java 定义

二进制散列数据的大小是固定的——MD5*总是*产生 128 位（16 字节）。如果您想减少长度，您可能需要截断数据（这会降低哈希的有效性）。当然，如果你想要的长度*比*它需要的长，你只需要填充它。

16 个字节将以十六进制编码为 32 个字符，或以 base32 编码为 26 个字符。Base64 只需要 22 个字符，但至少需要两个非字母数字字符。（数字 + az + AZ 给出 62 个字符；base64 需要 64 - 通常加上一个填充字符，但如果您事先知道长度，则可以省略。）

如果您能更详细地解释您的要求，我们可能会提供更多帮助 - 但基本上 MD5 是一个固定大小的哈希。

# c# - 在读取 I/O 流以在 XNA 上加载游戏时，mscorlib.dll 中发生 System.FormatException

> ID：13578999
> 
> 赞同：0
> 
> 时间：2012-11-27T07:03:13.023
> 
> 标签：c#, io, xna

首先是代码：

```
 if (Global.SaveDevice.FileExists(Global.containerName, Global.Challenges))
        {
            Global.SaveDevice.Load(
                Global.containerName,
                Global.Challenges,
                stream =>
                {
                    using (StreamReader reader = new StreamReader(stream))
                    {
                        Challenges.CompleteCount = int.Parse(reader.ReadLine());
                        Challenges.Colorist = bool.Parse(reader.ReadLine());
                        Challenges.ConsecutiveI = bool.Parse(reader.ReadLine());
                        Challenges.ConsecutiveII = bool.Parse(reader.ReadLine());
                        Challenges.ConsecutiveIII = bool.Parse(reader.ReadLine());
                        Challenges.ConsecutiveIV = bool.Parse(reader.ReadLine());
                        Challenges.CountDownWizardI = bool.Parse(reader.ReadLine());
                        Challenges.CountDownWizardII = bool.Parse(reader.ReadLine());
                        Challenges.CountDownWizardIII = bool.Parse(reader.ReadLine());
                        Challenges.MultiplierI = bool.Parse(reader.ReadLine());
                        Challenges.MultiplierII = bool.Parse(reader.ReadLine());
                        Challenges.MultiplierIII = bool.Parse(reader.ReadLine());
                        Challenges.MultiplierIV = bool.Parse(reader.ReadLine());
                        Challenges.OneUpI = bool.Parse(reader.ReadLine());
                        Challenges.OneUpII = bool.Parse(reader.ReadLine());
                        Challenges.OneUpIII = bool.Parse(reader.ReadLine());
                        Challenges.OneUpIV = bool.Parse(reader.ReadLine());
                        Challenges.PongWizardI = bool.Parse(reader.ReadLine());
                        Challenges.PongWizardII = bool.Parse(reader.ReadLine());
                        Challenges.PongWizardIII = bool.Parse(reader.ReadLine());
                        Challenges.ScoreI = bool.Parse(reader.ReadLine());
                        Challenges.ScoreII = bool.Parse(reader.ReadLine());
                        Challenges.ScoreIII = bool.Parse(reader.ReadLine());
                        Challenges.ScoreIV = bool.Parse(reader.ReadLine());
                        Challenges.ScoreV = bool.Parse(reader.ReadLine());
                        Challenges.StarShifterWizardI = bool.Parse(reader.ReadLine());
                        Challenges.StarShifterWizardII = bool.Parse(reader.ReadLine());
                        Challenges.StarShifterWizardIII = bool.Parse(reader.ReadLine());
                    }
                }); 
```

我在第 12 行（Challenges.ConsecutiveI = bool.Parse(reader.ReadLine()); ）得到一个“在 mscorlib.dll 中发生 System.FormatException”，如果我将其注释掉，我也会在解析时收到以下行的它，但是我在前两行解析中没有得到异常。我在这里尝试做的是使用 Nick Gravelyn 的 EasyStorage 示例加载一堆东西，它可以很好地保存具有不同错误的不同类中的对象，我认为它们称为“子容器”，例如 Global.Challenges，然后是 Global。选项等，但是是的，我对问题的根源感到困惑。

这里也是调用堆栈的最后两行：

> GameStateManagementSample.exe!GameStateManagement.ChallengesScreen..ctor.AnonymousMethod__0(System.IO.Stream stream) 第 42 行 + 0x6 字节 C# EasyStorage.dll!EasyStorage.SaveDevice.Load(string containerName, string fileName, EasyStorage.FileAction loadAction) 第 75 行 + 0x7 字节 C#

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:11:20.643

听起来文件中的其中一行没有说“True”或“False”。