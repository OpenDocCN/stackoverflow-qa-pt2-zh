# StackOverflow 问答 14124000-14124999

# asp.net-mvc-3 - 当我尝试设置 ViewBag 属性时，Windows Azure 正在触发 RuntimeBinderException

> ID：14124003
> 
> 赞同：0
> 
> 时间：2013-01-02T14:43:57.193
> 
> 标签：asp.net-mvc-3, azure

我正在检查我的服务的 Intellitrace 日志，`RuntimeBinderException`当我尝试设置`ViewBag`属性时它正在记录几个：

> “System.Dynamic.DynamicObject”不包含“UserInfo”的定义

当我在我的机器上运行 MVC 项目时，它可以完美运行。

我在这里有什么遗漏吗？这是为什么？

**编辑**

设置 ViewBag 并引发异常的位置：

```
this.ViewBag.UserInfo = new UserInfo()
                {
                    Id = this.DbUser.Id,
                    DisplayName = this.DbUser.Person.FullName,
                    GravatarEmailHash = this.DbUser.Person.EmailGravatarHash,
                    AdministratorId = this.DbUser.AdministratorId,
                    IsOwner = this.DbUser.IsOwner,
                }; 
```

# aqgridview - AQGridView：外部没有填充，只有内部

> ID：14124007
> 
> 赞同：1
> 
> 时间：2013-01-02T14:44:56.090
> 
> 标签：aqgridview

我有一个 768px 宽的网格视图，单元格是 240 宽。这意味着我得到 3 列，每列的左侧和右侧有 8 个像素的填充。这类似于这种情况：[AQGridView: How to adjust UIGridViewCell margin](https://stackoverflow.com/questions/9452887/aqgridview-how-to-adjust-uigridviewcell-margin)。

我不希望填充填充，而是希望填充只在“中间”，而不是在外列的外侧。

所以：
[ [cell] [24 像素的填充] [cell] [24 像素的填充] [cell] ]

这可能吗？

# c++ - 如何使用visual studio c在win32中拉伸背景图像

> ID：14124008
> 
> 赞同：0
> 
> 时间：2013-01-02T14:44:56.290
> 
> 标签：c++, windows, visual-studio, winapi, visual-c++

我正在尝试使用 c++ 在 Win32 api 中创建一个应用程序，我想让它成为没有任何栏的全屏，我成功了，但我的背景图像仍然有问题。图像重复，但我希望它被拉伸。你有什么想法吗？代码的以下部分：

```
int WINAPI WinMain (HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
LPSTR lignesDeCommande, int modeDAffichage)
{
HWND fenetrePrincipale;
MSG message;
WNDCLASS classeFenetre;

instance = cetteInstance;

classeFenetre.style = 0;
classeFenetre.lpfnWndProc = procedureFenetrePrincipale;
classeFenetre.cbClsExtra = 0;
classeFenetre.cbWndExtra = 0;
classeFenetre.hInstance = NULL;
classeFenetre.hIcon = LoadIcon(NULL, MAKEINTRESOURCE(IDI_APPLICATION));
classeFenetre.hCursor = LoadCursor(NULL, IDC_ARROW);
   // classeFenetre.hbrBackground = (HBRUSH)(1 + COLOR_BTNFACE);
//classeFenetre.hbrBackground = CreatePatternBrush(LoadBitmap( instance, MAKEINTRESOURCE("images\Image1.bmp" ) ) );
HBITMAP hbmp = LoadBitmap(instance,MAKEINTRESOURCE(IDB_BITMAP1));
    if(NULL == hbmp)
    {
        MessageBox(NULL,L"BitMap Loading Failed.",L"Error",MB_ICONEXCLAMATION | MB_OK);
    }
    else
    {
        HBRUSH hbr = CreatePatternBrush(hbmp);
        if(NULL == hbr)
        {
            MessageBox(NULL,L"Brush Creation Failed.",L"Error",MB_ICONEXCLAMATION | MB_OK);
        }
        else
        {
            //StretchBlt();
            HDC hdcMem = GetDC (NULL) ;
            HDC wndHDC = GetDC (fenetrePrincipale) ;
            StretchBlt(hdcMem, 0, 0, 800, 600, wndHDC, 0, 0, 1280, 1024, SRCCOPY);
            classeFenetre.hbrBackground = hbr ;

        }
    }
classeFenetre.lpszMenuName = NULL;
classeFenetre.lpszClassName = L"classeF";

//fullscreen mode and delete minimize and max buttons

// On prévoit quand même le cas où ça échoue
if(!RegisterClass(&classeFenetre)) return FALSE;
//WS_OVERLAPPEDWINDOW
    fenetrePrincipale = CreateWindow(L"classeF", L"Ma premiere fenetre winAPI !",WS_MAXIMIZE|WS_POPUP ,
                               CW_USEDEFAULT, CW_USEDEFAULT, 800, 630,
                                               NULL,
                                               NULL,//LoadMenu(instance, L"ID_MENU"),
                                               cetteInstance,
                                               NULL);
if (!fenetrePrincipale) return FALSE;

//ShowWindow(fenetrePrincipale, modeDAffichage);

ShowWindow(fenetrePrincipale,SW_MAXIMIZE);
UpdateWindow(fenetrePrincipale);

while (GetMessage(&message, NULL, 0, 0))
{
    TranslateMessage(&message);
    DispatchMessage(&message);
}
return message.wParam; 
```

}

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:49:18.970

您尚未显示确切的代码，但您似乎加载了一个位图，从中创建了一个画笔，然后将该画笔设置为您的窗口的画笔。画笔确实会导致您报告的重复图像行为。要获得拉伸位图，您可以跳过任何与画笔相关的代码。相反，处理`WM_ERASEBKGND`发送到您的窗口的消息。在其中，调用`StretchBlt`将位图绘制到窗口的客户区。`HDC`要绘制的对象在消息的参数中给出`wParam`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:58:18.843

步骤 1、CreateWindowEx 创建窗口

2、SetWindowPos 把你的窗口放在所有窗口和全屏之上

3、在你的windows的WindowProce上处理WM_PAINT消息

4、加载你的位图

5、使用CreateCompatibleDC创建内存dc

6、通过调用 SelectObject 将您的位图放入内存 dc

7、对你的实际dc做StretchBlt，使用准备好的内存dc作为源，你应该知道位图的实际宽度和高度才能正确拉伸

# jquery - Mustache 和 Jquery 插件问题

> ID：14124012
> 
> 赞同：2
> 
> 时间：2013-01-02T14:45:21.363
> 
> 标签：jquery, ajax, json, templates, mustache

我正在使用带有手风琴插件的 mustache js。我的想法是使用外部模板文件以及外部 json 文件并将模板文件拉入手风琴小部件（使用插件）。一切都很好，除了我的手风琴不工作。它仅在使用警报检查代码时才有效。Html 是基本的 Jquery 库调用和一个 div 来保存内容。非常感谢任何帮助。

```
$(document).ready(function () {
    $('head').append("<script id='templateHolder' type='text/template'></script");

    $('#templateHolder').load('templates/template.html', function () {
        var scripts = ['js/liteaccordion.jquery.js', 'js/mustache.js']; //add as many script as required here
        for (var i = 0; i < scripts.length; i++) {
            $.getScript(scripts[i], function () {
                $.getJSON('json/data.json', function (data) {
                    var template = $('#templateHolder').html();
                    var info = Mustache.to_html(template, data);
                    $('.jsoncontent').html(info);
                });
                //alert('done'); 
                //not working without alert?
                $('.jsoncontent').liteAccordion();
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:51:25.970

问题是该函数是`$.getJSON`异步执行的，因此该指令`$('.jsoncontent').liteAccordion();`在此之前执行：`$('.jsoncontent').html(info);`当您放置`alert`它时，它可以证明是有效的，因为您正在停止执行，并且在这种情况下，该指令`$('.jsoncontent').html(info);`有时间在执行之前完成`$('.jsoncontent').liteAccordion();`。

一种可能的解决方法，也许不是最好的，但最困难的可能是使 $.getJSON 的执行同步运行，以替换以下代码块：

```
 $.getJSON('json/data.json', function (data) {
                    var template = $('#templateHolder').html();
                    var info = Mustache.to_html(template, data);
                    $('.jsoncontent').html(info);
                }); 
```

为了这：

```
$.ajax({
    url: 'json/data.json',
    dataType: 'json',
    success: function (data) {
                    var template = $('#templateHolder').html();
                    var info = Mustache.to_html(template, data);
                    $('.jsoncontent').html(info);
                },
    data: {},
    async: false
}); 
```

**编辑**

我刚刚注意到您的代码还有另一个重要问题，显然在执行“for”时，您首先加载 Jquery 库，然后再加载 Mustache 库。但是您在加载 JQuery 库之后以及在加载“Mustache”库之前尝试使用函数“Mustache”......这是个问题。

试试这个：

```
$(document).ready(function () {
    $('head').append("<script id='templateHolder' type='text/template'></script");

    $('#templateHolder').load('templates/template.html', function () {
        var scripts = ['js/liteaccordion.jquery.js', 'js/mustache.js']; //add as many script as required here
        var scriptsLoaded =0;
        for (var i = 0; i < scripts.length; i++) {
            $.getScript(scripts[i], function () {
                scriptsLoaded++;
                if(scriptsLoaded==scripts.length){
                    $.getJSON('json/data.json', function (data) {
                        var template = $('#templateHolder').html();
                        var info = Mustache.to_html(template, data);
                        $('.jsoncontent').html(info);
                        $('.jsoncontent').liteAccordion();
                    });
                }    
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:41:06.127

Josep 是对的，如果它在您使用 alert() 时起作用，那是因为那会阻塞执行，这为 ajax 调用工作和回调提供了时间执行。

然而，与其重构你的代码——你可以将调用移到`$.liteAccordion()`回调中。例如：

```
$(document).ready(function () {
    $('head').append("<script id='templateHolder' type='text/template'></script");

    $('#templateHolder').load('templates/template.html', function () {
        var scripts = ['js/liteaccordion.jquery.js', 'js/mustache.js']; //add as many script as required here
        for (var i = 0; i < scripts.length; i++) {
            $.getScript(scripts[i], function () {
                $.getJSON('json/data.json', function (data) {
                    var template = $('#templateHolder').html();
                    var info = Mustache.to_html(template, data);
                    $('.jsoncontent').html(info);
                    $('.jsoncontent').liteAccordion(); //move here
                }); //eof .getJSON
            }); //eof .getScript()
        } //eof for()
    }); //eof load()
}); //eof ready() 
```

但是，我对您使用的选择有点好奇`$.getScript()`——因为循环中的代码`for()`实际上并不需要像那样运行；为每个脚本获取一次 JSON 是没有意义的；最好是获取每个脚本，然后获取 JSON 一次.. 例如..

```
$(document).ready(function () {
    $('head').append("<script id='templateHolder' type='text/template'></script");

    $('#templateHolder').load('templates/template.html', function () {
        var scripts = ['js/liteaccordion.jquery.js', 'js/mustache.js']; //add as many script as required here
        for (var i = 0; i < scripts.length; i++) {
            $.getScript(scripts[i], function () {
                //just get the script; this callback doesn't need to do anything really
            }); //eof .getScript()
        } //eof for()

       /* we're out of the for() loop now, so this will only make the call
          once; however - all our scripts are loaded so it will work */
       $.getJSON('json/data.json', function (data) {
            var template = $('#templateHolder').html();
            var info = Mustache.to_html(template, data);
            $('.jsoncontent').html(info);
            $('.jsoncontent').liteAccordion(); //move here
        }); //eof .getJSON

    }); //eof load()
}); //eof ready() 
```

此解决方案再次将`$.liteAcordion()`调用置于回调中，因此它将在 Mustache.js 被调用后执行。

值得记住 AJAX 有时是异步的，因为如果您不充分利用回调函数等，它可能会导致头痛。

**但是，正如@Josep 在下面的评论中指出的那样，您仍然冒着`$.getScript()`尚未完成执行的风险；对于您在阵列中包含的更多脚本，这将是一个问题。**

`$.getJSON()`考虑到这一点，从`for()`循环中进行轻微的重构和调用可能会很好；但确保它绝对是*最后*一次迭代。（*编辑：我看到 Jesop 实际上有一个相同的解决方案 - 我知道我们大多数人都在这里获得积分，但如果你要接受答案 - 接受他的答案，他先到了那里；）*）

```
$(document).ready(function () {
    $('head').append("<script id='templateHolder' type='text/template'></script");

    $('#templateHolder').load('templates/template.html', function () {
        var scripts = ['js/liteaccordion.jquery.js', 'js/mustache.js']; //add as many script as required here
        for (var i = 0; i < scripts.length; i++) {
            $.getScript(scripts[i], function () {
                if( i == (scripts.length -1) )
                  $.getJSON('json/data.json', function (data) {
                      var template = $('#templateHolder').html();
                      var info = Mustache.to_html(template, data);
                      $('.jsoncontent').html(info);
                      $('.jsoncontent').liteAccordion(); //move here
                  }); //eof .getJSON

            }); //eof .getScript()
        } //eof for()
    }); //eof load()
}); //eof ready() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:29:21.190

正如 josep 所指出的，for 循环会导致问题 - 我暂时保留了 scripts 数组，因为它有助于加载 mustache 不影响的 js。JSON 回调中的 get 脚本有效。

```
$(document).ready(function(){

        $('head').append("<script id='templateHolder' type='text/template'></script");

        $('#templateHolder').load('templates/template.html',function(){
            var scripts = ['js/mustache.js'];
            //problem here for any scripts directly affected by moustache templating.
                 for(var i = 0; i < scripts.length; i++){
                             $.getScript(scripts[i], function() {  
                                $.getJSON('json/data.json', function(data) {
                                            var template = $('#templateHolder').html();
                                            var info = Mustache.to_html(template, data);
                                            $('.jsoncontent').html(info);
                                            $.getScript('js/liteaccordion.jquery.js', function() {
                                            $('.jsoncontent').liteAccordion();
                                     });
                                 });
                            });
                 }
        });
    }); 
```

# c# - 使用 IE 时，花式框不会在花式框弹出窗口中打开页面

> ID：14124014
> 
> 赞同：0
> 
> 时间：2013-01-02T14:45:31.890
> 
> 标签：c#, jquery, asp.net, fancybox

我使用`fancybox`如下

```
$(document).ready(function () {
            $('[id*=addnewRequest]').fancybox({
                'width': 760,
                'height': 540,
                'padding': 0,
                'margin': 0,
                'hideOnOverlayClick': false,
                'scrolling': 'auto',
                'autoScale': false,
                'transitionIn': 'none',
                'transitionOut': 'none',
                'type': 'iframe',
                'centerOnScroll': true,
                'onClosed': function () {

                }
            });
        }); 
```

它适用于所有浏览器，除了`IE`. 任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:47:17.993

您的代码中的这一行：

```
$('[id*=addnewRequest]').fancybox( ... 
```

....让我觉得您在`ID`同一个文档中的多个元素重复相同的内容，不是吗？

在这种情况下，IE 的容忍度低于其他浏览器，并且它不适用于具有相同`ID`但第一个的选择器。这记录在这里[http://fancybox.net/faq](http://fancybox.net/faq)，第 7 号。

`ID`s 应该是唯一的，这意味着在`ID`同一个文档中只有一个元素应该具有相同的元素......你应该使用*类*而不是这个：

```
<a id="addnewRequest" href="{first target}"...
<a id="addnewRequest" href="{second target}"... 
```

... 和

```
$('[id*=addnewRequest]').fancybox( ... 
```

你应该有 ：

```
<a class="addnewRequest" href="{first target}"...
<a class="addnewRequest" href="{second target}"... 
```

... 和

```
$('.addnewRequest').fancybox( ... 
```

# c# - Shapefile 到 SQL Server

> ID：14124016
> 
> 赞同：2
> 
> 时间：2013-01-02T14:45:37.583
> 
> 标签：c#, sql-server-2008-r2, geometry, shapefile

是否有任何 C# 库或代码可用于将数据上传到 SQL Server？

创建表后，我需要将 shapefile 中的列附加到数据库表中。我正在使用[easygisdotnet 库](http://www.easygisdotnet.com/)读取 shapefile，但没有找到将 Shape 数据转换为`Microsoft.SqlServer.Types.SqlGeometry`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-20T14:43:22.517

[shp2sqlserver](http://code.google.com/p/cumberland/wiki/shp2sqlserver "shp2sqlserver")（[cumberland](http://code.google.com/p/cumberland/ "坎伯兰")的一部分，一个 .Net Spatial 框架）是一个命令行工具，用于将 shapefile 加载到 Microsoft SQL Server 2008 中。

只需[检查](http://code.google.com/p/cumberland/source/checkout "查看")源代码。

# html - 使用 knitr 设置 HTML 元元素

> ID：14124022
> 
> 赞同：9
> 
> 时间：2013-01-02T14:45:58.573
> 
> 标签：html, r, knitr, literate-programming

我正在使用 knitr 生成 HTML 报告，并且我想包含作者和生成日期元标记。

我的 Rhtml 页面看起来像这样。

```
<html>
<head>
  <meta name="author" content="<!--rinline Sys.getenv('USERNAME') -->">
  <meta name="date" content="<!--rinline as.character(Sys.time()) -->"> 
</head>
<body>
</body>
</html> 
```

不幸的是，在我之后`knit("test.Rhtml")`，knitr 生成的 HTML 是

```
 <meta name="author" content="<code class="knitr inline">RCotton</code>">
  <meta name="date" content="<code class="knitr inline">2013-01-02 14:38:16</code>"> 
```

这不是有效的 HTML。我真正想要生成的是

```
 <meta name="author" content="RCotton">
  <meta name="date" content="2013-01-02 14:38:16"> 
```

我可以生成没有`code`包装标签的 R 代码吗？还是有另一种方法来指定标签属性（如这些内容属性）？

到目前为止，我最糟糕的计划是使用`readLines`/ `str_replace`/手动修复内容`writeLines`，但这似乎相当笨拙。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T17:37:15.433

另一种（未记录的）方法是`I()`在您的内联代码周围添加以在没有标签的情况下按原样打印字符`<code>`，例如

```
<html>
<head>
  <meta name="author" content="<!--rinline I(Sys.getenv('USERNAME')) -->">
  <meta name="date" content="<!--rinline I(as.character(Sys.time())) -->"> 
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T16:30:23.617

不是很好，但似乎无需添加钩子就可以工作：

```
<head>
<!--begin.rcode results='asis', echo=FALSE
cat('
  <meta name="author" content="', Sys.getenv('USERNAME'), '"> 
  <meta name="date" content="', as.character(Sys.time()),'-->"> 
',sep="")
end.rcode-->

</head> 
```

# php - PHP 将变量从表单传递到表单，但从不离开页面

> ID：14124024
> 
> 赞同：0
> 
> 时间：2013-01-02T14:46:00.767
> 
> 标签：php, drop-down-menu

我被一件小事困住了。

我在一个表单中有两个选择下拉框。但是现在当我选择年份然后月份时，我失去了选定的年份，我知道为什么我失去了年份。因为我已经在脚本`onChange`中设置了`javascript:document.location`我试图把它放在`$_GET['jaartal'];`里面但它不起作用。

有人可以帮我解决这个问题吗？

这是脚本。

```
<?php   
    //Including config and connection file
    include_once '..\config\config.php';
    include_once '..\config\inc_connect.php';

    //Retrive month value from url and put in variable
    $maand = ViewDatumArray();

    //Retrive typ value from url and put in variable
    $verwerking = $_GET['type'];
    $vast_verwerking = $verwerking;

    // Years range setup
    //$kayako_start = 2012;

    ?>
  <!DOCTYPE html PUBLIC "XHTML 1.0 Transitional" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
      <script type="text/javascript" src="../config/function.js"></script>
      <link rel="stylesheet" href="../config/style.css" type="text/css">
  </head>
  <body style="background-color:#F8F4EB">
    <div style="width:900px; margin:0px auto;">
        <input type="button" value="Ga Terug" class="goBackJS" onClick="goBack()"/>
        <br/>
        <!-- 02-01-2013 Added function for year instead -->
        <span>Kies de Jaar / Maand van overzicht dat je wilt downloaden.</span>
            <form action="" method="post">
                <select class="dropstyle" name="jaartal" onChange"<?php $jaar_keuze = $jaar?>">
                    <option value="2012" selected>Kies jaartal</option>
                <?php // Generate the years from start kayako until now.
                    foreach (range($jaar_nummer = date("Y"), 2012) as $jaar) { ?>
                    <option value="<?php echo($jaar); ?>" selected><?php echo($jaar); ?></option>
                <?php
                } 
                ?>
                </select>
            </form>

            <?php echo $jaar_keuze; ?>
            <form action="" method="post">
                <select class="dropstyle" name="maand" onChange="javascript:document.location='class.View_Evident_Download.php?type=<?php echo $vast_verwerking; ?>&jaar=<?php $_GET['jaartal']; ?>&maand=' + this.value">
                <?php
                    foreach ($maand_teksten as $keyvalue => $waarde) { ?>
                    <option value="<?php echo $keyvalue; ?>"><?php echo $waarde;?></option>
                <?php 
                } 
                ?>
                </select>
            </form>
    <?php

                if(!empty($maand)){
                    $maand_gekozen = $maand[0]; 

        //Functies voor eerste en laatste dag van de maand
        $jaardag = eersteDagVanMaand();
        $jaareind = laatsteDagVanMaand();

    echo "<br/>";
    if ($maand_gekozen < "1"){
    echo "Kies maand om te downloaden.";
    } else {
        if(isset($_GET['type']))
        {
            $type_download = $_GET['type'];
            $jaar_nummer = $_GET['jaartal'];
            echo $type_contract[$type_download] . ' van <b>' . $maand_teksten[$maand_gekozen] . $jaar_keuze . '</b> staat klaar om gedownload te worden.<br/>';
            echo '<input style="width:300px;" type="button" onClick="location.href = \'class.Controller_Evident_Download.php?type=' . $type_download . '&maand=' . $maand_gekozen . '&jaar=' . $jaar_gekozen . '\';" class="goBackJS" value="Download ' . $type_contract[$type_download] . '"';
        };
    }
    echo "<br/>";
    echo "<br/>";
    }

    ?>
<br/>
</div>
 </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:57:44.833

您应该在表单提交后通过添加“selected”属性而不是像现在这样的“2012”选项来选择选定的选项。你可以这样做：

```
<option <?php if($jaar==$_GET['jaartal']) print 'selected'; ?> value="<?php echo($jaar); ?>"><?php echo($jaar); ?></option> 
```

要使用它，您应该从“2012”选项中删除“selected”属性。编辑：您的另一个问题是，在进行页面重定向时，您正在尝试使用表单数据，但它不可用或与所选值不同。而不是`$_GET['jaartal']`您应该使用当前选定年份的javascript代码。[这里](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)有一些提示如何做到这一点。

# command - Prolog读取输入没有句号

> ID：14124031
> 
> 赞同：1
> 
> 时间：2013-01-02T14:46:24.297
> 
> 标签：command, prolog

我目前正在用 SWI-Prolog 编写一个基于文本的小型冒险游戏。因此，用户将不得不给出诸如“goto(room)”或“goto room”之类的命令。

然而问题是您总是必须以句号结束命令，即“goto(room)”。而不是“goto(room)”。这不是很人性化。

我有一个谓词读取命令然后执行输入。如果没有句号，我如何自动添加句号（如果已经有一个，则应该执行输入）？

提前致谢！

问候，

沃尔克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:58:11.103

显然您正在使用`read/1`或一些变体；这应该用于阅读有效的序言术语（这就是您需要句号的原因）。

解决方案是自己解析输入（检查[原语 char io](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.18%27,swi%28%27/doc/Manual/chario.html%27%29%29)、[读取实用程序](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.24%27,swi%28%27/doc/Manual/readutil.html%27%29%29)和[一般](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.16%27,swi%28%27/doc/Manual/IO.html%27%29%29)的 io （尽管您可能只需要读取实用程序）），然后[将](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.21%27,swi%28%27/doc/Manual/manipatom.html%27%29%29)其转换为术语。

此外，您可以使用 DCG 创建小型自然语言并使用；例如，用户可以只写`goto room`而不是`goto(room)`.

另一方面，我个人认为，如果他们无论如何都必须输入序言词，则不必跳过句号会更加用户友好。

# c# - 隐藏一些datagridview复选框单元格

> ID：14124033
> 
> 赞同：5
> 
> 时间：2013-01-02T14:46:35.047
> 
> 标签：c#, winforms, datagridview, datagridviewcheckboxcell

我有`datagridview`显示的贷款分期付款。我创建了一个`datagridviewcheckbox`专栏，然后我可以选择我想要支付的所有分期付款。

这是数据网格的屏幕：

![在此处输入图像描述](../Images/890693a45a029b61c8bc643ff99969cb.png)

我的问题是我需要禁用已付款的复选框。在这种情况下，当“Restante”（还剩什么）是`= 0`。

我读了一些帖子，他们使用绘画事件不显示复选框单元格，但我不喜欢那个解决方案。我想隐藏复选框单元格，但我不知道是否可以这样做。

这就是我尝试过的：

```
foreach (DataGridViewRow row in dgv_Cuotas.Rows)
            {
                if (Convert.ToDecimal(dgv_Cuotas.Rows[row.Index].Cells[17].Value) == 0)
                {
                    dgv_Cuotas.Rows[row.Index].Cells[16].Visible = false;
                }
            } 
```

显然这不起作用，我收到一条编译器错误消息，指出该属性是只读的。

有人知道如何将复选框单元格设置为不可见吗？

以防万一，我附上`DataGridViewCheckboxColumn`创建代码：

```
DataGridViewCheckBoxColumn chbox = new DataGridViewCheckBoxColumn();
            {
                chbox.CellTemplate = new DataGridViewCheckBoxCell();
                chbox.HeaderText = "";
                chbox.Name = "Seleccionar";
                chbox.AutoSizeMode = DataGridViewAutoSizeColumnMode.DisplayedCells;
                chbox.FlatStyle = FlatStyle.Standard;
            }
            dgv_Cuotas.Columns.Insert(16, chbox);
            dgv_Cuotas.Columns[16].DisplayIndex = 0; 
```

编辑：

一些考虑：

我使用单元格内容单击事件来处理复选框，因此 readonly 不起作用。我想要的是隐藏复选框：

```
private void dgv_Cuotas_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        if (e.RowIndex == -1)
            return;
        if (dgv_Cuotas.Columns[e.ColumnIndex].Name == "Seleccionar")
        {
            DataGridViewRow row = dgv_Cuotas.Rows[e.RowIndex];
            DataGridViewCheckBoxCell cellSeleccion = row.Cells["Seleccionar"] as DataGridViewCheckBoxCell;
            int n_cuota = Convert.ToInt32(dgv_Cuotas[2, dgv_Cuotas.CurrentRow.Index].Value);
            Cuota cuota_seleccionada = new Cuota();
            cuota_seleccionada = Lista_cuotas.Where(x => x.num_cuota == n_cuota).First();

            if (cellSeleccion != null && Convert.ToBoolean(cellSeleccion.Value) == true)
            {
                cellSeleccion.Value = false;
                Actualizar_cuotas_seleccionadas(false, cuota_seleccionada);
            }
            else
            {
                if (cellSeleccion != null && Convert.ToBoolean(cellSeleccion.Value) == false)
                {
                    cellSeleccion.Value = true;
                    Actualizar_cuotas_seleccionadas(true, cuota_seleccionada);
                }
            }
        } 
```

另一方面，我已经在使用 Onpaint 事件了。它是继承的，这就是我试图避免使用它的原因。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-16T15:06:50.607

为复选框单元格赋值。然后将其转换为具有新值的文本框。为我工作。

```
dataGridView1.Rows[row.Index].Cells[16].Value = false;
dataGridView1.Rows[row.Index].Cells[16] = new DataGridViewTextBoxCell();
dataGridView1.Rows[row.Index].Cells[16].Value = ""; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T14:53:46.880

是的，您可以通过`DataGridViewCheckBoxCell`将`DataGridViewTextBoxCell`

```
 foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            if (dataGridView1.Rows[row.Index].Cells[17].EditedFormattedValue.ToString().Length == 0) //  if (string.IsNullOrWhiteSpace(dataGridView1.Rows[row.Index].Cells[4].EditedFormattedValue.ToString()))
                break; 
            if (Convert.ToDecimal(dataGridView1.Rows[row.Index].Cells[17].EditedFormattedValue) == 0)
            {
                dataGridView1.Rows[row.Index].Cells[16].Value = null;
                dataGridView1.Rows[row.Index].Cells[16] = new DataGridViewTextBoxCell();

            }
            else
            {
                //dgv_Cuotas.Rows[row.Index].Cells[16] = new DataGridViewCheckBoxCell();
            }
        } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T14:52:09.817

使用单元格的`ReadOnly`属性来禁用任何修改。

如果要将其变为隐藏，则需要覆盖单元格的绘制代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-06T23:02:07.443

尝试隐藏它并保留该值，这应该可以防止运行时错误。

```
dataGridView1.Rows[row.Index].Cells[16].Style.Padding =
new Padding(dataGridView1.Rows[row.Index].Cells[16].OwningColumn.Width, 0, 0, 0); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-10T18:02:32.967

我接受了 spajce 的回答并对其进行了一些调整以使其对我有用。

```
for (var i = 0; i < datagridview1.Count; i++)
{
    if ((bool)datagridview1[0, i])
        {
            datagridview1[0, i] = new DataGridViewTextBoxCell
            {
                        Style = { ForeColor = Color.Transparent, 
                                  SelectionForeColor = Color.Transparent }
            };
        }
} 
```

我们基本上是在遍历行并寻找一个“真正的”复选框。如果它被选中，那么我们会将框转换为文本框并将其文本颜色设置为透明，以便单元格看起来是空的。我希望这对遇到这个问题的每个人都有帮助，我花了几个小时试图找到一个可行的答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T14:57:23.723

有几种方法可以实现您想要的。

例如，您可以使用单元格的 Readonly 属性来避免用户更改值并将控件的外观更改为灰色：

[C# DataGridViewCheckBoxColumn 隐藏/灰显](https://stackoverflow.com/questions/7664115/c-sharp-datagridviewcheckboxcolumn-hide-gray-out)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-04T08:56:52.960

一个简单而有效的替代方法是使用 chkbox ThreeState 属性。在下面的代码中，如果我的对象没有电子邮件地址，那么我不想让用户勾选发送电子邮件的复选框。为此，复选框值设置为未知和只读，这意味着它显示为“不可选择”并且用户无法修改。

```
chk = DirectCast(row.Cells(m_idxEmailChecked), DataGridViewCheckBoxCell)
If String.IsNullOrEmpty(contact.EmailAddress) Then
  chk.Value = enumTristate.Unknown
  chk.ReadOnly = True
Else
  chk.ThreeState = False
End If 
```

请注意，这还需要在复选框上设置几个相关的 ThreeState 属性。

```
 .ValueType = GetType(enumTristate)
        .TrueValue = enumTristate.True
        .FalseValue = enumTristate.False
        .IndeterminateValue = enumTristate.Unknown
        .ThreeState = True 
```

祝你好运。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-01-25T16:30:29.200

我尝试了查理的方式：

```
dataGridView1.Rows[row.Index].Cells[16].Value = false;
dataGridView1.Rows[row.Index].Cells[16] = new DataGridViewTextBoxCell();
dataGridView1.Rows[row.Index].Cells[16].Value = ""; 
```

我得到的错误更少，但仍然不断得到它们。所以我尝试单独实例化新的 DataGridViewTextBoxCell ，这对我有用（我也不需要设置复选框单元格值）：

```
DataGridViewTextBoxCell c = new DataGridViewTextBoxCell();
c.Value = "";
dataGridView1.Rows[row.Index].Cells[16] = c; 
```

希望对某人有所帮助！

# vb.net - 当我将 web.config 转换添加到 VB .NET 站点时，为什么必须启用 isapi v4.0.30319？

> ID：14124042
> 
> 赞同：1
> 
> 时间：2013-01-02T14:47:23.767
> 
> 标签：vb.net, visual-studio-2010, visual-studio-2012, iis-7.5

我有一个要更改的 VB MVC 3 站点。它一直在VS2010中工作。在更改之前，它在 Windows Server 2008 R2 Standard 上的 IIS 7.5 中运行良好，允许 ASP.NET ISAPI 2.0.50727 并且不允许 ASP.NET ISAPI 4.0.30319。

我所做的更改： - 将连接字符串移动到 web.config - 添加了解决方案配置。现在我有 Debug、Release、Release (Backup) -添加配置转换 -在每个转换文件中添加标记以转换连接字符串

我第一次这样做时，我错误地在 VS2012 中打开了该网站，它转换了一些东西。我希望我已经阅读了更改的窗口。我做了更改并将网站备份。只有当我允许 4.0.30319 时它才会起作用。

我在 VS2012 转换之前恢复到该站点的先前版本，并确保将其备份到服务器上并且它在 4.0.30319 不允许的情况下工作正常

我再次进行了更改，并且再次，该站点仅在启用 4.0.30319 时才能运行

我对 ISAPI 一无所知。我不负责服务器，我不想更改我不明白的设置。

**我的问题：**

为什么我必须启用 4.0.30319？

我可以在不启用 4.0.30319 的情况下进行更改吗？

是什么导致需要允许 4.0.30319？换句话说，我怎样才能避免这种情况再次发生？

# android - 用于缩放和平移包含文本框、按钮、微调器等的相对布局的 Android 代码

> ID：14124045
> 
> 赞同：5
> 
> 时间：2013-01-02T14:47:40.580
> 
> 标签：android, android-relativelayout, zooming

我已经轻松地放大了布局，但我也想滚动缩放的布局。我已经能够缩放，但我还想在缩放后滚动，以便我可以编辑`Widgets`

有没有办法做到这一点？

```
 import android.app.TabActivity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.RelativeLayout;
    import android.widget.TabHost;
    import android.widget.TabHost.TabSpec;

    public class MainActivity extends TabActivity {
        View mainview;
        int zoomed = 0;
        TabHost th;
        TabSpec one;
        TabSpec two;
        TabSpec three;
        TabSpec four;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            mainview = (RelativeLayout) findViewById(R.id.relLayout1);

            th = getTabHost();
            th.setup();
            one = th.newTabSpec("One");
            two = th.newTabSpec("Two");
            three = th.newTabSpec("Three");
            four = th.newTabSpec("Four");

            one.setIndicator("One");
            two.setIndicator("Two");
            three.setIndicator("Three");
            four.setIndicator("Four");

            Intent a = new Intent(this, first.class);
            Intent b = new Intent(this, second.class);
            Intent c = new Intent(this, third.class);
            Intent d = new Intent(this, fourth.class);

            one.setContent(a);
            two.setContent(b);
            three.setContent(c);
            four.setContent(d);

            th.addTab(one);
            th.addTab(two);
            th.addTab(three);
            th.addTab(four);

            mainview.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {

                    mainview.setPivotX(100);
                    mainview.setPivotY(100);
                    if (zoomed == 0) {                  
                        mainview.setScaleX(2f);
                        mainview.setScaleY(2f);
                        zoomed=1;
                    }
                    else{
                        mainview.setScaleX(1f);
                        mainview.setScaleY(1f);
                        zoomed=0;
                    }
                }
            });
        }
    } 
```

这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/relLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="220dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >
            </TabWidget>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <LinearLayout
                    android:id="@+id/tab1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/tab2"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/tab3"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/tab4"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </LinearLayout>
            </FrameLayout>
        </LinearLayout>
    </TabHost>

</RelativeLayout> 
```

# python - 使用字典追加多个文件并删除重复项

> ID：14124047
> 
> 赞同：2
> 
> 时间：2013-01-02T14:47:45.933
> 
> 标签：python, dictionary, merge, duplicate-removal

所以我有一些看起来像这样的文件：

```
snpID  Gene
rs1  ABC1
rs2  ABC1
rs3  ABC25
rs4  PT4
rs5  MTND24 
```

在不同的文件中会有其他的 snpID 和基因对，但给定的 snpID 可能有重复，但相关的相应“基因”可能不同。例如：

```
snpID  Gene
rs100  URX1
rs95  KL4
rs1  ABC1
rs2  ABC1-MHT5
rs3  ABC25
rs4  PT4-FIL42 
```

我想要做的是附加文件的所有内容，如果它们具有相同的 snpID 和基因对，则删除重复项。然而，如果一个 snpID 的对应基因不同，它必须进入同一行对于上面的示例，它应该如下所示：

```
snpID  Gene
rs1  ABC1
rs2  ABC1, ABC1-MHT5
rs3  ABC25
rs4  PT4, PT4-FIL42
rs5  MTND2
rs100  URX1
rs95  KL4 
```

我想我可以通过创建字典来实现这一点。

```
import glob
file_list = glob.glob('annotations.*')
dict_snps_genes = {}
for filename in file_list:
    with open(filename) as fileA:
        for line in fileA:
            col0 = line.split()[0]
            col1 = line.split()[1]
            dict_snps_genes[col0] = col1 

unique_dict_snps = {}
for key,value in dict_snps_genes:
    if key not in unique_dict_snps.keys():
        unique_dict_snps_genes[key] = value 
```

我在进一步移动之前对此进行了测试，这给了我一个错误，例如：

```
ValueError: too many values to unpack 
```

PS：每个文件有大约8000个snpId-Gene对，超过5个文件

关于如何克服这个问题的想法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T14:50:43.067

您正在循环键，但试图将它们分配给键和值变量：

```
for key,value in dict_snps_genes: 
```

将其更改为循环`.items()`：

```
for key,value in dict_snps_genes.items(): 
```

或者更好的是，如果在 Python 2.x 上，使用 `.iteritems()：

```
for key,value in dict_snps_genes.iteritems(): 
```

请注意，您读取文件的方式，您只存储任何给定 snpID 的最后读取基因；如果您找到该 id 的另一个条目，则覆盖前一个条目。

就个人而言，我会使用`collections.defaultdict()`默认`set`值：

```
import glob
import collections

file_list = glob.glob('annotations.*')
snps_genes = collections.defaultdict(set)
for filename in file_list:
    with open(filename) as fileA:
        for line in fileA:
            snpid, gene = line.strip().split(None, 1)
            snps_genes[snpid].add(gene) 
```

现在，其中的值`snps_genes`是一组基因，每个都是独一无二的。请注意，我在空格 ( ) 上将您的行分成两部分，`.split(None, 1)`以便如果基因值中有任何空格，它将按如下方式存储：

```
>>> 'id gene with whitespace'.split(None, 1)
['id', 'gene with whitespace'] 
```

通过使用 `snpid,gene' 作为左手赋值表达式，Python 获取拆分的结果并将每个部分分配给一个单独的变量；这里有一个方便的技巧来节省一行代码。

要将其输出到新文件，只需遍历生成的`snps_genes`结构即可。这是对所有内容进行排序的方法：

```
for id in sorted(snps_genes):
    print id, ', '.join(sorted(snps_genes[id])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T14:56:35.923

我会这样写：

```
from glob import glob
import fileinput

infiles = glob('annotations.*')
lines = fileinput.input(infiles)
rows = (line.split() for line in lines)

from collections import defaultdict
dd = defaultdict(list)
for row in rows:
    dd[row[0]].append(row[1]) 
```

如果值是唯一的，那么：

```
dd = defaultdict(set)
for row in rows:
    dd[row[0]].add(row[1]) 
```

然后从那里去......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:56:21.957

您可以将之后的行替换为`col1 = line.split()[1]`：

```
if col0 in dict_snps_genes:
    dict_snps_genes[col0].add(col1)
else:
    dict_snps_genes[col0] = set([col1]) 
```

[您可以在此处](http://docs.python.org/2/library/stdtypes.html#set-types-set-frozenset)阅读有关套装的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T15:23:53.157

为什么不这样做：

```
import glob
files = glob.glob('annotations.*')
d = {}
for f in files:
    with open(f) as f:
        for line in f:
            col0, col1 = line.split()
            if col0 not in d:
                d[col0] = [col1]
            elif col1 not in d[col0]:
                d[col0].append(col1) 
```

将导致：

```
d = {
    "rs95": ['KL4'],
    "snpID": ['Gene'],
    "rs1": ['ABC1'],
    "rs2": ['ABC1', 'ABC1-MHT5'],
    "rs3": ['ABC25'],
    "rs4": ['PT4', 'PT4-FIL42'],
    "rs5": ['MTND24'],
    "rs100": ['URX1']
} 
```

# python - Cython 中是否有任何类型的函数？

> ID：14124049
> 
> 赞同：27
> 
> 时间：2013-01-02T14:47:49.043
> 
> 标签：python, callback, cython

有什么方法可以告诉 Cython 编译器 param 是函数。就像是

```
 cpdef float calc_class_re(list data, func callback) 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-06T13:54:41.663

应该是不言自明的..？:)

```
# Define a new type for a function-type that accepts an integer and
# a string, returning an integer.
ctypedef int (*f_type)(int, str)

# Extern a function of that type from foo.h
cdef extern from "foo.h":
    int do_this(int, str)

# Passing this function will not work.
cpdef int do_that(int a, str b):
    return 0

# However, this will work.
cdef int do_stuff(int a, str b):
    return 0

# This functio uses a function of that type. Note that it cannot be a
# cpdef function because the function-type is not available from Python.
cdef void foo(f_type f):
    print f(0, "bar")

# Works:
foo(do_this)   # the externed function
foo(do_stuff)  # the cdef function

# Error:
# Cannot assign type 'int (int, str, int __pyx_skip_dispatch)' to 'f_type'
foo(do_that)   # the cpdef function 
```

# c# - C#视频转码库

> ID：14124052
> 
> 赞同：5
> 
> 时间：2013-01-02T14:48:29.990
> 
> 标签：c#, video, video-streaming, rtp, transcoding

我需要使用 C# 对视频流进行转码。流有多种格式，如`MP4`, `H264`, `H263`, `VP8`. 有没有可以转码的c#库`MemoryStream`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T14:57:59.673

有一个[`ffmpeg-sharp`](http://code.google.com/p/ffmpeg-sharp/)图书馆

> ffmpeg-sharp 是 FFmpeg 多媒体套件的包装库，它提供易于使用的包装器，可用于 Mono 和 .NET 下的 CIL 产品

也看看[`SharpFFmpeg`](http://sourceforge.net/projects/sharpffmpeg/)

> SharpFFmpeg 是 ffmpeg 的 C# 绑定。SharpFFmpeg 的目标是提供允许 .NET 开发人员轻松创建音频和视频应用程序的工具。

和[`MeWiG - MEncoder GUI for Windows`](http://sourceforge.net/projects/mewig/?source=navbar)

> MeWiG 是使用 .NET Framework 的 MEncoder（MPlayer 的一部分）的 Windows 前端。您应该能够裁剪、缩放、去隔行等，最后转换几乎任何数字视频源，而无需命令行选项。

# sql-server - 更新使用以前在 Oracle 上自动生成的 ID

> ID：14124053
> 
> 赞同：1
> 
> 时间：2013-01-02T14:48:31.130
> 
> 标签：sql-server, oracle, nhibernate

我们在 Oracle 中遇到了一个奇怪的问题。我将首先勾勒一些（简化的）上下文：

考虑这个到实体的映射：

```
public EntityMap()
{
    Table("EntityTable");
    Id(x => x.Id)
        .Column("entityID")
        .GeneratedBy.Native("ENTITYID").UnsavedValue(0);
    Map(x => x.SomeBoolean).Column("SomeBoolean");
} 
```

这个代码：

```
var entity = new Entity();
using (var transaction = new TransactionScope(TransactionScopeOption.Required))
{
    Session.Save(entity);
    transaction.Complete();
}

//A lot of code
if(someCondition)
{            
    using (var transaction = new TransactionScope(TransactionScopeOption.Required))
    {
        enitity.SomeBoolean = true;
        Session.Update(entity);
        transaction.Complete();
    }
} 
```

这段代码被调用了几次。它第一次生成以下查询：

```
select ENTITYID.nextval from dual
INSERT INTO Entity
    (SomeBoolean, EntityID)
    VALUES  (0, 1216)
UPDATE Entity
    SET SomeBoolean = 1
    WHERE  EntityID = 1216 
```

第二次调用时会生成这些查询（`someCondition`为假）

```
select ENTITYID.nextval from dual
INSERT INTO Entity
    (SomeBoolean, EntityID)
    VALUES  (0, 1217) 
```

现在麻烦开始了。从现在开始，每次插入都将使用正确的自动增量值，但更新将始终使用 1217

```
select ENTITYID.nextval from dual
INSERT INTO Entity
    (SomeBoolean, EntityID)
    VALUES  (0, 1218)
UPDATE Entity
    SET SomeBoolean = 1
    WHERE  EntityID = 1217 
```

当然，这不是我们想要发生的。如果我在调试时检查 Id 的值，它包含正确的自动增量值。不知何故，在 NHibernate 的深处，不正确的被分配给了 WHERE 子句......

奇怪的是，这只发生在 Oracle 上。如果我将 NHibernate 切换到 MsSql，一切都会像魅力一样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:56:28.933

所以我发现了发生了什么。NHibernate 更改了 1.x 和 2.x 版本之间的默认连接释放模式。不是在会话被释放时关闭连接，而是在每次事务后关闭连接。但是，我们手动协调我们的事务，这显然在 Oracle 中造成了麻烦。

[这个](https://stackoverflow.com/questions/1989150/nhibernate-connection-release-modes-why-does-the-documentation-recommened-using)问题有一些额外的信息，[NHibernate 文档中的这个条目](http://nhforge.org/doc/nh/en/index.html#transactions-connection-release)也阐明了如何处理连接：

> 从 NHibernate 开始，如果您的应用程序通过 System.Transactions 库等 .NET API 管理事务，ConnectionReleaseMode.AfterTransaction 可能会导致 NHibernate 在一个事务期间打开和关闭多个连接，从而导致不必要的开销和从本地到分布式的事务提升。指定 ConnectionReleaseMode.OnClose 将恢复为旧行为并防止发生此问题。

[这篇博](http://blog.brianhartsock.com/2009/12/17/nhibernate-connection-release-modes/)文让我找到了正确的方向。

# java - 在 testng.xml 中使用组时，Testng 忽略 @AfterMethod 调用

> ID：14124055
> 
> 赞同：5
> 
> 时间：2013-01-02T14:48:42.627
> 
> 标签：java, testing, testng, qa

所以我有一个包含以下代码的测试：

```
public class ViewLineList 
{

Browser browser = new Browser();
WebDriver driver;

public void viewLineList(String driverName)
{
    driver = browser.getDriver(driverName);

    //Navigate to System Facing
    driver.manage().window().maximize();
    driver.navigate().to("URL GOES HERE");
    driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);

    //Verify Line List is present
    WebElement lineList = driver.findElement(By.xpath("/html/body/div/div/div/div/form/div/div[2]/div/div[2]/div"));
    Assert.assertNotNull(lineList, "The Line List is empty");
    Assert.assertEquals(true, lineList.isDisplayed(), "The line list is not displayed");

    //Verify Columns are present

    WebElement poEligibleColumn = driver.findElement(By.linkText("PO Eligible"));
    WebElement patientColumn = driver.findElement(By.linkText("Patient/SSN"));
    WebElement wardColumn = driver.findElement(By.linkText("Ward/Room"));
    WebElement drugColumn = driver.findElement(By.linkText("Drug"));
    WebElement dosageColumn = driver.findElement(By.linkText("Dosage"));
    WebElement startDateColumn = driver.findElement(By.linkText("Start Date"));
    WebElement nextDoseColumn = driver.findElement(By.linkText("Next Dose"));
    WebElement lastReviewDateColumn = driver.findElement(By.linkText("Last Review Date"));
    WebElement reviewerColumn = driver.findElement(By.linkText("Reviewer"));
    WebElement toolsColumn  = driver.findElement(By.linkText("Tools"));

    Assert.assertEquals(true, poEligibleColumn.isDisplayed(), "The PO Eligible column is not present");
    Assert.assertEquals(true, patientColumn.isDisplayed(), "The Patient column is not present");
    Assert.assertEquals(true, wardColumn.isDisplayed(), "The Ward column is not present");
    Assert.assertEquals(true, drugColumn.isDisplayed(), "The Drug column is not present");
    Assert.assertEquals(true, dosageColumn.isDisplayed(), "The Dosage column is not present");
    Assert.assertEquals(true, startDateColumn.isDisplayed(), "The Start Date column is not present");
    Assert.assertEquals(true, nextDoseColumn.isDisplayed(), "The Next Dose column is not present");
    Assert.assertEquals(true, lastReviewDateColumn.isDisplayed(), "The Last Review Date column is not present");
    Assert.assertEquals(true, reviewerColumn.isDisplayed(), "The Reviewer column is not present");
    Assert.assertEquals(true, toolsColumn.isDisplayed(), "The Tools column is not present");

}

//Tests - Run these
@Test(groups = {"functionalTests.FF"})
public void test_ViewLineList_FF() 
{
    viewLineList("firefox");
}

@Test(groups = {"functionalTests.IE"})
public void test_ViewLineList_IE() 
{
    viewLineList("ie");
}
@AfterMethod
public void tearDown()
{
    driver.quit();
}
} 
```

当`@AfterMethod`我从上面的类运行测试时，它工作正常。当我从我的 testng.xml 调用类时，问题就出现了。如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
 <suite name="Suite" parallel="none">
  <test name="Test" preserve-order="true">
    <groups>
     <run>
       <include name="functionalTests.FF"/>
       <exclude name="functionalTests.IE"/>
       <exclude name="functionalTests.iOS"/>    
     </run>
    </groups> 
    <classes>
     <class name="ui_Tests.ViewLineList"/> 
     <!-- <class name="ui_Tests.ViewLineListResolutions"/>
     <class name="ui_Tests.InteractWithLineList"/> 
     <class name="ui_Tests.POEligibleTests"/> 
     <class name="ui_Tests.DisableColumns"/> 
     <class name="ui_Tests.ExpandCollapseBars"/> 
     <class name="ui_Tests.BarGraphs"/> -->
   </classes>    
</test> <!-- Test -->
</suite> <!-- Suite --> 
```

如果我从 XML 文件运行测试，则将`@AfterMethod`被忽略。我也尝试过`@AfterTest`，`@AfterClass`当测试失败时，它们似乎都被忽略了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T17:08:06.987

您`@AfterMethod`没有运行，因为它不在您正在运行的组中。您要么指定组，要么告诉它始终运行。

```
@AfterMethod(groups = {"functionalTests.FF"}) 
```

或者

```
@AfterMethod(alwaysRun = true) 
```

很可能您想使用`alwaysRun = true`.

# api - REST API 202 与 204

> ID：14124056
> 
> 赞同：8
> 
> 时间：2013-01-02T14:48:43.847
> 
> 标签：api, rest, return-value

我正在处理一个 REST API 并且有这个问题，当请求被安排进一步处理时，我们应该返回 202，当请求没有响应主体时，我们应该返回 204。当请求将在进一步处理中时我们应该怎么做，但也没有响应体？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T14:50:43.377

那将是 202。处理完成（并成功）*后*没有响应正文。

如果它没有办法失败，或者客户端不关心失败，并且客户端不关心操作何时完成，那么 204 将是合适的，因为延迟它没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-04T15:16:36.737

以下是一些更详细的链接：-

[Restful API 设计：异步请求](http://restful-api-design.readthedocs.org/en/latest/methods.html#asynchronous-requests)

[RFC 7231 超文本传输​​协议 (HTTP/1.1)：语义和内容 - 第 6.3.3 节 - 接受 202](https://www.rfc-editor.org/rfc/rfc7231#section-6.3.3)

[HTTP 状态码](http://www.restapitutorial.com/httpstatuscodes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:53:16.530

为什么不返回 202 的响应正文？根据规范：

> 与此响应一起返回的实体应该包括请求当前状态的指示以及指向状态监视器的指针或用户可以期望何时完成请求的一些估计。

您可以选择不提供详细响应，但这不会更改正确的响应状态代码。

# ios - 由于 UIScrollView 放置，UIButton 和 UITextField 不可点击？

> ID：14124058
> 
> 赞同：0
> 
> 时间：2013-01-02T14:48:46.967
> 
> 标签：ios, uiscrollview, interface-builder

我最近开始了 iOS 开发，并使用 Interface Builder 创建了一个基本布局。但是，我注意到 my`UIScrollView`导致 my`UITextField`和`UIButton`不可点击（直到某个点）。

这是一个屏幕截图。红线上方的所有内容都是可点击的并响应触摸事件，但下方的所有内容都是/不可以。

![指示可点击性/对触摸事件的响应的红线屏幕截图](../Images/6f71f9b05b460a349c5feb06248f5cc0.png)

我决定`UIScrollView`向下移动几个像素，并注意到这条“红线”也向下移动了。将高度`UIScrollView`从 589px 缩小到 550px 后，我现在可以单击按钮上/文本字段中的任意位置（因为理论上的“红线”现在就在按钮下方）。这是那个截图：

![向下移动 UIScrollView 后，我现在可以单击按钮/文本字段](../Images/f2dbd02bee04582c515a1a6e607986de.png)

所以，我的问题是，为什么要对我的and`UIScrollView`这样做？似乎它以某种方式重叠了文本字段和按钮，尽管它似乎在物理上位于它们下方。有什么办法可以避免这种“重叠”，而不必牺牲我为防止“重叠”而放弃的那 39 个像素？`UITextField``UIButton`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:17:45.703

`viewDidLoad`在函数中编写此代码

```
[self.view sendSubviewToBack:scrolView]; 
```

希望这可以帮助你..

# asp.net - 将 wordpress 博客集成到 asp.net 网站中

> ID：14124059
> 
> 赞同：1
> 
> 时间：2013-01-02T14:48:49.337
> 
> 标签：asp.net, wordpress

我使用 wordpress 为我的一位客户开发了一个博客。现在我需要将博客集成到他们使用基于.net 的 cms 平台开发的网站中。

我需要在博客部分保留网站的页眉和页脚。

为博客制作页眉和页脚以使其与网站保持一致既困难又耗时。

有没有更好的方法可以将博客整合到网站中并保留网站页眉和页脚？

注意：我不能嵌入使用`iframe`，因为博客必须包含在网站的水平菜单部分（使用精灵开发）中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:03:15.180

我的建议是采用博客设计并以同样的方式对现有网站进行皮肤设计。然后为 Wordpress 博客使用子域。它应该看起来是无缝的。我在这里对 BlogEngine 和现有网站做了同样的事情：

主站点：[http ://homenetdirect.com](http://homenetdirect.com)

博客：[http ://blog.homenetdirect.com/](http://blog.homenetdirect.com/)

# android - 是否可以通过禁用它们的包装布局来禁用所有小部件？

> ID：14124061
> 
> 赞同：1
> 
> 时间：2013-01-02T14:49:07.123
> 
> 标签：android

![图像](../Images/56503e8e792f2742c501df1a8aa25a04.png)

我试图通过禁用包装 relativeLayout 来禁用子小部件，但这不起作用，有没有其他方法可以做到这一点？我认为这是必要的，因为有时我们不想在每个子小部件上设置 setEnable(xx)。那么我可以这样做吗？还是有类似的方法？非常感谢~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T14:56:16.583

也许你可以尝试这样的事情：

```
RelativeLayout myLayout = (RelativeLayout findViewById(R.id.linearLayout1);
for ( int i = 0; i < myLayout.getCount();  i++ ){
   View view = myLayout.getChildAt(i);
   view.setEnabled(false); // Or whatever you want to do with the view.
} 
```

我相信您可以扩展布局类并实现一个新方法来完成这项工作。另外，您可以检查这个问题：[How to disable all content inside linear layout in android？](https://stackoverflow.com/questions/9081156/how-to-disable-all-content-inside-linear-layout-in-android)

# c# - 从另一个 AppDomain 接收程序集引用时出现异常

> ID：14124064
> 
> 赞同：7
> 
> 时间：2013-01-02T14:49:22.847
> 
> 标签：c#, .net, dll, appdomain

我正在从新的 AppDomain 中的特定“扩展”目录中加载所有 DLL，以从中获取一些与反射相关的信息。

这就是我正在尝试的：

我在我的解决方案中创建了一个新库`AssemblyProxy`，它只有这个类：

```
public class AssemblyProxy : MarshalByRefObject
{
    public Assembly LoadFile( string assemblyPath )
    {
      try
      {
        return Assembly.LoadFile( assemblyPath );
      }
      catch
      {
        return null;
      }
    }
} 
```

我确保这个 DLL 存在于我的“扩展”目录中。然后我使用以下代码将所有程序集从“扩展”目录加载到新的`AppDomain`.

```
foreach( string extensionFile in Directory.GetFiles( ExtensionsDirectory, "*.dll" ) )
{
        Type type = typeof( AssemblyProxy.AssemblyProxy );
        var value = (AssemblyProxy.AssemblyProxy) Domain.CreateInstanceAndUnwrap(
            type.Assembly.FullName,
            type.FullName );

        var extensionAssembly = value.LoadFile( extensionFile );

        types.AddRange( extensionAssembly.GetTypes() );
} 
```

某些 DLL 确实加载成功，但在某些 DLL 上会抛出如下异常：

`Could not load file or assembly 'Drivers, Version=2.3.0.77, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.`

编辑：新的 AppDomain 中不会引发异常。DLL 在新的 AppDomain 中成功加载。一旦程序集引用返回到主/调用 AppDomain，就会引发异常。主/调用 AppDomain 是否尝试在收到引用时自行加载程序集？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:47:16.330

您不应该`Assembly`从新对象返回一个对象，`AppDomain`因为这只有在您`AppDomain`可以访问那些它没有的程序集时才有效，因为这些程序集位于以下目录中：

*   不是 AppDomain 的基本目录 ( [AppDomain.BaseDirectory](http://msdn.microsoft.com/en-us/library/system.appdomain.basedirectory.aspx) )，
*   不在 AppDomain 的相对搜索路径 ( [AppDomain.PrivateBinPath](http://msdn.microsoft.com/en-us/library/system.appdomain.relativesearchpath.aspx) )中指定的目录中

避免这种情况的一种方法是遵循 leppie 的评论，并且：

1.  创建一个序列化类型，其中包含您需要从`Assembly`对象获得的最少信息。
2.  将此类型添加到两个 AppDomain 都可以访问的新程序集。最简单的方法是将其添加到 GAC。

另一种方法是使用[Mono.Cecil](http://www.mono-project.com/Cecil)而不是`System.Reflection`. Mono.Cecil 将允许您在不加载程序集的情况下检查它们。[对于一个非常简单的示例，请查看此答案](https://stackoverflow.com/a/10008239/850119)的后半部分。

# java - 从 1-50 的生成器生成 1-100 的随机数

> ID：14124066
> 
> 赞同：6
> 
> 时间：2013-01-02T14:49:24.067
> 
> 标签：java, optimization, random

在最近的一次采访中，我被问到以下问题：

> `getrnd50()`使用生成 1-50 的随机数的给定方法打印 1-100的随机数。每个随机数应该只打印一次并且以随机顺序打印。不允许使用其他随机数生成器，并且不允许我更改 `getrnd50()`.

我想出了以下代码，它给出了正确的输出。

```
import java.util.Random;

public class Test {

public static void main(String[] args) {
    int[] rs = new int[100];
    int count = 0;
    int k;
    while (count != 100) {

        // I decided to simply multiply the result of `getrnd50()` by 2\. 
        // But since that would generate only even numbers,

        k = getrnd50() * 2;

        // I decided to randomly subtract 1 from the numbers. 
        // Which i accomlished as follows.          

        if (getrnd50() <= 25) // 25 is to half the possibilities.
            k--;

        // Every number is to be stored in its own unique location 
        // in the array `rs`, the location is `(number-1)`. 
        // Every time a number is generated it is checked whether it has 
        // already been generated. If not, it is saved in its position, printed and 
        // `count` is incremented.

        if (rs[k-1] == 0) {
            rs[k-1] = k;
            count++;
            System.out.print(k + " ");
        }
    }
}
// This is the method and i am not supposed to touch it.
static int getrnd50() {
    Random rand = new Random();
    return (1 + rand.nextInt(50));
}

} 
```

虽然它在该轮中被接受，但在下一轮中，面试官告诉我这`getrnd50()`是一种昂贵的方法，即使在最好的情况下，我也必须为每个生成的数字调用两次。即 1-100 次 200 次。在最坏的情况下，它将是无穷大，平均情况下是数万。他要求我优化代码，以**显着**改善平均情况。

当我表示无法做到时，他给了我一个提示，他说：

> 考虑生成新数字时生成的数字数量。例如。如果`count`变成 99，我不必打电话`getrnd50()`，我可以简单地找到剩余的号码并打印出来。

虽然我理解他的漂移，但我不知道它会对我有什么帮助，所以很明显我被拒绝了。现在我很想知道答案。帮我！提前谢谢！

**注意：**如果有人懒得写冗长的代码，只需指出数字生成部分，其余的很容易。我们也不一定要遵循提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T14:54:26.303

关键是不要检查你之前是否生成过号码，如果只查找剩余的1个号码会非常昂贵，而是按顺序生成1-100的号码，然后洗牌。

在您的代码中，当您从 100 个数字中生成 99 个时，您将循环生成随机数，直到找到剩余的 1 个数字。这就是为什么您的版本中的平均情况如此糟糕的原因。

相反，如果您只是对数组进行洗牌，那么您只需要拥有与洗牌操作一样多的随机数，并且只需与您需要的数字输出一样多的洗牌操作。

（有关改组的完整详细信息，请查看[Fisher-Yates](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)改组，特别是可以在适当位置生成改组数组的由内而外的变体）

要生成随机数，您需要一个变量生成器，而不是一个固定的 1-50 生成器。您可以通过多种方式解决此问题，但如果您真的希望输出在可能的状态中具有良好的分布，请非常小心地将偏斜引入结果。

例如，我建议使用整数位，并进行移位，而不是尝试使用模数。如果值超出所需范围，这确实涉及一定量的循环，但是由于无法修改原始随机数生成，您的手有些束缚。

```
static int bits = 0;
static int r100 = 0;

static int randomInt(int range)
{
    int ret;

    int bitsneeded = 32 - Integer.numberOfLeadingZeros(range - 1);

    do {
            while(bits < bitsneeded)
            {
                    int r = (getrnd50()-1) * 50 + getrnd50()-1;
                    if(r < 2048)
                    {
                            r100 <<= 11;
                            r100 |= r;
                            bits += 11;
                    }
            }
            ret = r100 & ((1 << bitsneeded) - 1);
            bits -= bitsneeded;
            r100 >>=  bitsneeded;
    } while(ret >= range); 

        return ret + 1;
} 
```

此实现将为您的 100 值混洗数组使用 150 个随机数区域中的某些内容。这比模数版本差，但优于输入范围的 2 倍，这是原始版本的最佳情况。如果随机生成是真正随机的，那么仍然是无穷大的最坏情况，但随机生成通常不会那样工作。如果确实如此，我不确定考虑到约束条件，未倾斜的结果是否现实。

为了说明，由于结果很微妙，这是我建议的随机例程与模数版本的图表：

![随机发生器图](../Images/3244f0ad50592ef7d57c410a2f306c80.png)

所以总而言之，我认为虽然你的随机生成效率有点低，并且可以改进，但面试官正在寻找的真正巨大的胜利在于，首先不需要这么多随机数，通过洗牌而不是以不断降低的概率重复搜索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T14:54:24.987

因为 100 / 50 是一个整数，所以这很容易。由于 50 / (100 / 50) 是一个整数，所以它更容易。

如果你不太明白，这里有一些示例代码：

```
int rnd1 = getrnd50();
int rnd2 = getrnd50();
if (rnd1 % 2 == 0)
{
    rnd2 += 50;
}
return rnd2; 
```

这是一个大纲：

*   两个数字，在 1 到 50 之间随机选择，称为**a**和**b**。
*   如果**a**是偶数，则将 50 添加到**b**。
*   返回**b**。

如果您愿意，可以将其设为单行：

```
return getrnd50() + getrnd50() % 2 * 50; 
```

不过这有点太糊涂了。

编辑：我看到这个问题真的是要求一个随机列表，而不是一个随机整数序列。

这可以通过创建一个从 1 到 100 的列表并进行 100 次随机交换来完成，例如 Fisher-Yates shuffle。我想，使用 Fisher-Yates shuffle 时，绝对最小调用次数为 93（由公式 给出`ceil(log50(100!))`），但使用更简单的算法，您可以使用 200。

简单的算法将涉及将 100 个元素中的每一个与 100 个中的一个随机元素进行交换。要选择的数字将使用上述生成器从 1-100 生成。

例如：

```
for (int i = 0; i < 100; i++)
{
    swap(i, getrnd100() - 1); // - 1 for zero base!
} 
```

这是一些完整的代码：

```
int[] result = new int[100];
for (int i = 0; i < 100; i++)
{
    result[i] = i + 1;
}
for (int i = 0; i < 100; i++)
{
    int j = (getrnd50() + getrnd50() % 2 * 50) - 1;
    int tmp = result[i];
    result[i] = result[j];
    result[j] = tmp;
}
return result; 
```

（免责声明：我不懂 Java，也没有测试过。）

最佳情况 200，最坏情况 200，平均情况 200。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T15:15:21.293

这是您如何回答它的方法。它利用了这样一个事实，

*   假设您使用 shuffle 来交换“卡片”的 O(n)，则模数会在 shuffle 中减小。即从`int[]`每个值中的一个开始，然后像 Collections.shuffle() 一样对其进行洗牌。
*   如果你调用 getrnd50() 两次，你有比你需要的更多的随机性，特别是当你有少于 50 个值可以交换时。

编辑：对于那些不熟悉 shuffle 如何工作的人，我添加了 shuffle 的代码

```
import java.util.*;
import java.lang.*;

class Main {
    public static void main(String... args) {
        int samples = 100;

        // all the numbers [1, 100]
        int[] nums = new int[samples];
        for (int i = 0; i < samples; i++) nums[i] = i + 1;

        for (int i = samples - 1; i > 0; i--) {
            int swapWith = nextInt(i + 1);

            // swap nums[i] and nums[swapWith]
            if (swapWith == i) continue;
            int tmp = nums[swapWith];
            nums[swapWith] = nums[i];
            nums[i] = tmp;
        }
        System.out.println("calls/sample " + (double) calls / samples);
        System.out.println(Arrays.toString(nums));

        int[] count49 = new int[49];
        for (int i = 0; i < 49 * 10000; i++)
            count49[nextInt(49) - 1]++;
        int[] count54 = new int[54];
        for (int i = 0; i < 54 * 10000; i++)
            count54[nextInt(54) - 1]++;
        System.out.println("Histogram check (49): " + Arrays.toString(count49));
        System.out.println("Histogram check (54): " + Arrays.toString(count54));

    }

    // keep track of the range of values.
    static int maxRandom = 1;
    // some random value [0, maxRandom)
    static int rand100 = 0;

    static int nextInt(int n) {
        while (maxRandom < 10 * n * n) {
            maxRandom *= 50;
            rand100 = rand100 * 50 + getrnd50() - 1;
        }
        int ret = rand100 % n;
        maxRandom = (maxRandom + n - 1) / n;
        rand100 /= n;
        return ret + 1;
    }

    static final Random rand = new Random();
    static int calls = 0;

    static int getrnd50() {
        calls++;
        return (1 + rand.nextInt(50));
    }
} 
```

印刷

通话/样本 0.94

[1, 37, 4, 98, 76, 53, 26, 55, 9, 78, 57, 58, 47, 12, 44, 25, 82, 2, 42, 30, 88, 81, 64, 99, 16 , 28, 34, 29, 51, 36, 13, 94, 80, 66, 19, 38, 20, 8, 40, 89, 72, 56, 75, 96, 35, 100, 95, 17, 74, 69 , 11, 31, 86, 92, 6, 27, 22, 70, 63, 32, 93, 84, 71, 15, 23, 5, 14, 62, 49, 43, 87, 65, 83, 33, 45 , 52, 39, 91, 60, 73, 68, 24, 97, 46, 50, 18, 79, 48, 77, 67, 59, 10, 7, 54, 90, 85, 21, 61, 41, 3 ]

直方图检查（49）：[10117，10158，10059，10188，10188，10338，9959，10313，10278，10166，9828，10159，10159，10250，10155 ，10029，10052，9996，10057，9849，9990，9914，9914，9835，10029，9738，9953，9828，9896，9931，9995，9995，9995，10034，10034，10067，10067 , 10007, 9765]

直方图检查（54）：[10124，10251，10071，10071，1002，10196，10170，10123，10096，9966，9966，10225，10262，10036，10029，10029，9862，9862，9994，9994，9960 , 10118, 10163, 9986, 9988, 10008, 9965, 9967, 9950, 9965, 9870, 10172, 9952, 9972, 9828, 9754, 10152, 9943, 9996, 9779, 10014, 9937, 9931, 9794, 9708, 9978 , 9894, 9803, 9904, 9915, 9927, 10000, 9838]

在这种情况下，100 个号码需要少于 100 次调用 getrnd50

如果你有 1000 个值要洗牌

```
calls/sample 1.509 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T14:54:52.243

您的代码的性能损失在该行

```
if (getrnd50() <= 25) 
```

您需要找到一种方法从生成的单个随机数中获取更多信息，否则您正在浪费那些昂贵的生成资源。这是我的建议：

首先假设我们将有一个随机数生成器用于数字 0-15。每个数字都可以表示为二叉树中的一条路径，其中叶子代表数字。所以我们可以说，我们`true`每次从根开始向左走时都会评估 if 条件。

问题是随机数生成器在不以 2 的幂次方结束的区间内生成数字。所以我们需要扩展那棵树。这样做是这样
的：如果随机数在 0-31 范围内，我们可以为这些数字创建一棵树。如果它在 32-47 范围内，我们使用 0-15 的树来表示这些，在 48-49 的情况下，我们使用树来表示数字 0-1。

因此，在最坏的情况下，我们不会使用来自该随机数的更多信息，但在大多数情况下，我们会使用。所以这应该会显着改善平均情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T15:19:46.193

(1) 创建一个用 {1,...,100} 初始化的数组 A。保留此数组的可变“长度”。

（2）创建随机方法，随机生成一个从1到length的数。每次调用该方法都会调用 getrnd50() 不超过 2 次。将返回的值称为 'index'。

(3) 输出 A[index]，将 A[length] 交换为 A[index] 和 length--。

(4) 重复(1)-(3)，直到数组为空。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T15:01:39.127

好的，所以您可以打印最后一个丢失的 n 组 anny 数，而不是由随机数生成器生成？

如果是这样，您可以使用递归并在每次调用时减小集合的大小，直到您只有 n=2，然后调用 getrnd50() 一次。当您递归返回时，只需在每组上打印缺失的数字。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T15:09:26.043

```
 List<Integer> lint ; 

  public void init(){
      random = new Random();
      lint = new LinkedList<>();
      for(int i = 1 ; i < 101; ++i) {
          lint.add(i); // for truly random results, this needs to be randomized.
      }
  }

  Random random ; 
  public int getRnd50() {
      return random.nextInt(50) + 1;
  }

  public int getRnd100(){

      int value = 0;
      if (lint.size() > 1) {
          int index = getRnd50()%lint.size();
          value = lint.remove(index); 
      } else if (lint.size() == 1 ) {
          value = lint.remove(0);
      }      

      return value;      
  } 
```

准确地调用 getRnd50() 99 次。它不是真正随机的，因为存储在 100 个整数列表中的数字是按顺序排列的。

# ios - 更改应用的 iOS 开发者 ID

> ID：14124068
> 
> 赞同：0
> 
> 时间：2013-01-02T14:49:30.257
> 
> 标签：ios

是否可以使用同一个应用程序在两个不同的“卖家”之间进行切换？我的意思是，有一家公司正在开发我的应用程序的第一个版本，但是我会为那个应用程序编写代码并发布新的更新，我不知道这是否可能，因为我们的帐户不同。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:57:13.643

不，这是不可能的。防止自己再次陷入同样情况的最好方法是开设自己的开发帐户。然后，当您任命承包商时，您可以将他们添加为开发团队的成员，并在项目完成后将其删除。

这样，您可以简单地将来源从一个承包商移交给下一个承包商。

# android - Android上的2.5D引擎？

> ID：14124070
> 
> 赞同：-7
> 
> 时间：2013-01-02T14:49:40.180
> 
> 标签：android, 2d, 2.5d

这道题这么负分说明了stackoverflow的威力和对2.5D的错误理解，其实没有2.5D的游戏，只有2D或者3D。

> 我想在安卓上开发一个 2.5D 游戏，就像 iphone 上的 'minigore2' 一样，安卓有没有 2.5D 引擎？
> 
> 这是我想要的效果：

![在此处输入图像描述](../Images/23686a0ae785f451d7128bceebb6b0e1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:29:49.260

就像[Wikipedia](http://en.wikipedia.org/wiki/2.5D)所说的那样，您可以在屏幕上渲染 2D 图像，从而产生 3D 世界的效果。为此，我建议您查看 Android 开发人员网站上的[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)类以及查看此 Android Game Dev。[关联](http://www.edu4java.com/androidgame.html)

如果您更喜欢创建 3D 世界并将相机设置在固定的角度和位置，我建议您阅读适用于 Android 的 OpenGl ES。

如果您正在寻找适用于 Android 的游戏引擎，我建议您查看[此线程](https://stackoverflow.com/questions/6407155/game-engines-for-android)。

我希望这有帮助。

# winapi - IShellFolder2.GetDefaultColumn aways 因 E_NOTIMPL 而失败

> ID：14124073
> 
> 赞同：0
> 
> 时间：2013-01-02T14:49:56.933
> 
> 标签：winapi, sorting, notimplementedexception

我正在尝试使用[IShellFolder2.GetDefaultColumn](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775045%28v=vs.85%29.aspx)函数来获取推荐用于特定 shell 文件夹的默认排序列。但不幸的是，该函数总是以`E_NOTIMPL`(HResult -2147467263) 失败。

方法调用如下所示：
`hr := ishellfolder2.GetDefaultColumn(0, sortColumn, displayColumn);`

通过使用查询[IShellFolder](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775075%28v=vs.85%29.aspx)对象，
`SHBindToParent`
或者
`ShellFolder.BindToObject`
之后将其强制转换为`IShellFolder2`.

该对象是有效的，因为它已成功用于例如查询[GetDetailsOf](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775053%28v=vs.85%29.aspx)。

有什么我想念的吗？
感谢你并致以真诚的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:45:31.650

来自微软的回答：

IShellFolder2.GetDefaultColumn 总是返回 E_NOTIMPL 的原因如下： 几乎没有 shell 文件夹实现此方法。这意味着该文件夹不想覆盖默认排序顺序。如果此方法成功，它将返回一个不同于默认排序列的自定义排序列。

# mysql - 使用 Redis 作为活动流的键/值存储

> ID：14124079
> 
> 赞同：1
> 
> 时间：2013-01-02T14:50:21.680
> 
> 标签：mysql, redis, feed

我正在为我的应用程序创建一个简单的活动流。

目前的技术层和逻辑如下：

** 与活动相关的所有数据都存储在 MYSQL 中，所有活动 ID 的数组都保存在 Redis 中，供每个用户使用。**

1.  用户执行操作，活动直接存储在 MYSQL 的“活动”表中，并返回唯一**的“活动**ID” 。
2.  从数据库中检索该用户的**“关注者”**数组，对于每个关注者，我将这个新的**activity_id**推送到他们在**Redis**中的列表中。

当用户查看他们的流时，我根据他们的用户 ID 从 redis 检索活动 ID 数组。然后我执行一个简单的 MYSQL`WHERE IN($ids)`查询来获取所有这些活动 ID 的实际活动数据。

我相信这种设置是相当可扩展的，因为查询总是非常简单的 IN 查询。然而，它提出了几个问题。

1.  `Removing a Follower`**- 如果用户停止关注某人，我们需要从他们的Redis**列表中删除与该用户对应的所有 activity_id 。这需要遍历 Redis 列表中的所有 ID，并删除与已删除用户对应的 ID。这让我觉得很不雅，有没有更好的方法来管理这个？
2.  `'archiving'`- 我想将 Redis 列表的最大长度保持为 1000 个 activity_id，并经常从 MYSQL 活动表中删除旧数据，以防止其增长到无法管理的大小。显然，这可以通过在我们添加新 ID 时从用户流列表中删除旧 ID 来实现。但是，我不确定如何归档这些数据，以便用户可以选择查看非常旧的活动数据。最好的方法是什么？还是我最好完全执行此限制并阻止用户查看非常旧的活动数据？

**总结一下：**我真正想知道的是我当前的设置/逻辑是好还是坏。我需要重新思考吗？如果是这样，您推荐的型号是什么？如果你觉得一切都好，我应该如何解决上述两个问题？我意识到这个问题非常广泛，所有答案都将基于意见，但这正是我正在寻找的。形成良好的意见。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:12:43.247

1 似乎并不难执行（没有循环）：

```
delete Redis from Redis
 join activities on Redis.activity_id = activities.id
                and activities.user_id = 2 
                and Redis.user_id = 1
; 
```

2 我不太确定存档。您可以在每个时期创建存档表，并定期将旧活动从主表移动到存档表。似乎一个正确规范化的活动表应该能够变得相当大。（确保任何“大”活动将活动数据存储在单独的表中，主活动表应该是“窄”的，因为它预计会有很多条目）

# c# - 动态页面上的 ASP.NET MVC 2 验证

> ID：14124081
> 
> 赞同：2
> 
> 时间：2013-01-02T14:50:31.147
> 
> 标签：c#, jquery, .net, asp.net-mvc-2, asp.net-mvc-validation

我的 asp.net mvc 2 应用程序上有多个页面的注册向导。在第一页上，我应该有参与该过程的人员的基本数据表格。我应该有 3 个标记为名字、姓氏和地址的文本框，以及 1 个带有文本“添加另一个人”的复选框。当用户点击单选按钮时，新的文本框会出现新的单选按钮，所以我们可以在同一个表单中添加多个人。理论上，我们应该能够插入尽可能多的人。所有字段都是必填的，所以在页面顶部的验证摘要中，我应该有类似“请输入第二个人的名字”之类的内容。我有 DTO 课程：

```
public class Person
{
     public string FullName { get; set; }
     public string LastName { get; set; }
     public string Address{ get; set; }
} 
```

我想我的这个页面的模型应该是`List<Person>`，我会用 javascript/jQuery 为新人附加 html。请在这里帮助我，我应该如何验证这个动态页面？我可以通过保存和返回按钮来完成这个向导，而且，我们应该能够取消点击页面上的任何单选按钮，那个特定的人应该消失并且验证器应该不再捕获它。我的整个向导都在使用服务器端验证（DataAnnotations），我不想使用客户端验证。提前致谢。

更新：

我需要更多帮助。我想用新属性扩展 Person 类：

```
public int Percent { get; set; } 
```

如果每个人中的所有百分比的总和`IEnumerable<Person>`等于 100，我希望在提交时进行服务器验证。我可以为此创建自定义属性吗？如何创建？我的模型是通用列表，我不能应用`[CustomAttribute]`它，对吗？
另外，我应该在页面顶部有验证摘要，而不是在每个输入之后。我已经提出：`<%:Html.ValidationSummary(false, "Please correct the following and resubmit the page:")%>`有没有办法为每个人设置不同的验证消息？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:52:07.713

在开始执行此任务之前，我强烈建议您阅读 Steven Sanderson 的[*Editing a variable length list, ASP.NET MVC 2-style*](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)。

准备好？

好的，现在我们可以进入实现了。

首先是为任务定义我们的视图模型。你已经有了，只要在上面定义相应的验证规则即可：

```
public class Person
{
    [Required]
    public string FullName { get; set; }

    [Required]
    public string LastName { get; set; }

    [Required]
    public string Address{ get; set; }
} 
```

> 我想我的这个页面的模型应该是 List

是的，绝对的。

所以让我们继续创建我们的`PersonsController`：

```
public class PersonsController : Controller
{
    public ActionResult Index()
    {
        var model = new[] 
        {
            new Person()
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(IEnumerable<Person> persons)
    {
        if (!ModelState.IsValid)
        {
            return View(persons);
        }

        // To do: do whatever you want with the data
        // In this example I am simply dumping it to the output
        // but normally here you would update your database or whatever
        // and redirect to the next step of the wizard
        return Content(string.Join(Environment.NewLine, persons.Select(p => string.Format("name: {0} address: {1}", p.FullName, p.Address))));
    }

    public ActionResult BlankEditorRow()
    {
        return PartialView("_PersonEditorRow", new Person());
    }
} 
```

现在让我们定义视图 ( `~/Views/Persons/Index.cshtml`)：

```
@model IEnumerable<Person>

@using (Html.BeginForm())
{
    <div id="editorRows">
        @foreach (var item in Model)
        {
            Html.RenderPartial("_PersonEditorRow", item);
        }
    </div>    

    @Html.ActionLink(
        "Add another person", 
        "BlankEditorRow", 
        null, 
        new { id = "addItem" }
    )

    <p>
        <button type="submit">Next step</button>
    </p>
}

<script type="text/javascript">
    $('#addItem').click(function () {
        $.ajax({
            url: this.href,
            cache: false,
            success: function (html) { $('#editorRows').append(html); }
        });
        return false;
    });

    $(document).delegate('a.deleteRow', 'click', function () {
        $(this).parents('div.editorRow:first').remove();
        return false;
    });
</script> 
```

和相应的局部视图 ( `~/Views/Persons/_PersonEditorRow.cshtml`)：

```
@model Person

<div class="editorRow">
    @using(Html.BeginCollectionItem("persons")) 
    {
        <div>
            @Html.LabelFor(x => x.FullName)
            @Html.EditorFor(x => x.FullName)
            @Html.ValidationMessageFor(x => x.FullName)
        </div>
        <div>
            @Html.LabelFor(x => x.LastName)
            @Html.EditorFor(x => x.LastName)
            @Html.ValidationMessageFor(x => x.LastName)
        </div>
        <div>
            @Html.LabelFor(x => x.Address)
            @Html.EditorFor(x => x.Address)
            @Html.ValidationMessageFor(x => x.Address)
        </div>

        <a href="#" class="deleteRow">delete</a>
    }
</div> 
```

备注：`Html.BeginCollectionItem`这里使用的助手取自 Steven Sanderson 的博客文章，我之前在我的答案中链接到了该文章，并且您已经阅读并熟悉了该文章。这是完整性的源代码：

```
public static class HtmlPrefixScopeExtensions
{
    private const string idsToReuseKey = "__htmlPrefixScopeExtensions_IdsToReuse_";

    public static IDisposable BeginCollectionItem(this HtmlHelper html, string collectionName)
    {
        var idsToReuse = GetIdsToReuse(html.ViewContext.HttpContext, collectionName);
        string itemIndex = idsToReuse.Count > 0 ? idsToReuse.Dequeue() : Guid.NewGuid().ToString();

        // autocomplete="off" is needed to work around a very annoying Chrome behaviour whereby it reuses old values after the user clicks "Back", which causes the xyz.index and xyz[...] values to get out of sync.
        html.ViewContext.Writer.WriteLine(string.Format("<input type=\"hidden\" name=\"{0}.index\" autocomplete=\"off\" value=\"{1}\" />", collectionName, html.Encode(itemIndex)));

        return BeginHtmlFieldPrefixScope(html, string.Format("{0}[{1}]", collectionName, itemIndex));
    }

    public static IDisposable BeginHtmlFieldPrefixScope(this HtmlHelper html, string htmlFieldPrefix)
    {
        return new HtmlFieldPrefixScope(html.ViewData.TemplateInfo, htmlFieldPrefix);
    }

    private static Queue<string> GetIdsToReuse(HttpContextBase httpContext, string collectionName)
    {
        // We need to use the same sequence of IDs following a server-side validation failure,  
        // otherwise the framework won't render the validation error messages next to each item.
        string key = idsToReuseKey + collectionName;
        var queue = (Queue<string>)httpContext.Items[key];
        if (queue == null)
        {
            httpContext.Items[key] = queue = new Queue<string>();
            var previouslyUsedIds = httpContext.Request[collectionName + ".index"];
            if (!string.IsNullOrEmpty(previouslyUsedIds))
                foreach (string previouslyUsedId in previouslyUsedIds.Split(','))
                    queue.Enqueue(previouslyUsedId);
        }
        return queue;
    }

    private class HtmlFieldPrefixScope : IDisposable
    {
        private readonly TemplateInfo templateInfo;
        private readonly string previousHtmlFieldPrefix;

        public HtmlFieldPrefixScope(TemplateInfo templateInfo, string htmlFieldPrefix)
        {
            this.templateInfo = templateInfo;

            previousHtmlFieldPrefix = templateInfo.HtmlFieldPrefix;
            templateInfo.HtmlFieldPrefix = htmlFieldPrefix;
        }

        public void Dispose()
        {
            templateInfo.HtmlFieldPrefix = previousHtmlFieldPrefix;
        }
    }
} 
```

* * *

更新：

我的错，我刚刚注意到你的问题被标记为`asp.net-mvc-2`. 所以我想我的 Razor 观点不适用于你的情况。尽管如此，其他一切都应该是一样的。您需要做的就是更新视图，以便它们使用 WebForms 视图引擎：

这是`~/Views/Persons/Index.aspx`：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<IEnumerable<Person>>" %>
<% using (Html.BeginForm()) { %>
    <div id="editorRows">
        <% foreach (var item in Model) { %>
            <% Html.RenderPartial("_PersonEditorRow", item); %>
        <% } %>
    </div>    

    <%= Html.ActionLink(
        "Add another person", 
        "BlankEditorRow", 
        null, 
        new { id = "addItem" }
    ) %>

    <p>
        <button type="submit">Next step</button>
    </p>
<% } %>

<script type="text/javascript">
    $('#addItem').click(function () {
        $.ajax({
            url: this.href,
            cache: false,
            success: function (html) { $('#editorRows').append(html); }
        });
        return false;
    });

    $(document).delegate('a.deleteRow', 'click', function () {
        $(this).parents('div.editorRow:first').remove();
        return false;
    });
</script> 
```

最后是 ( `~/Views/Persons/_PersonEditorRow.ascx`) 部分：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Person>" %>
<div class="editorRow">
    <% using(Html.BeginCollectionItem("persons")) { %>
        <div>
            <%= Html.LabelFor(x => x.FullName) %>
            <%= Html.EditorFor(x => x.FullName) %>
            <%= Html.ValidationMessageFor(x => x.FullName) %>
        </div>
        <div>
            <%= Html.LabelFor(x => x.LastName) %>
            <%= Html.EditorFor(x => x.LastName) %>
            <%= Html.ValidationMessageFor(x => x.LastName) %>
        </div>
        <div>
            <%= Html.LabelFor(x => x.Address) %>
            <%= Html.EditorFor(x => x.Address) %>
            <%= Html.ValidationMessageFor(x => x.Address) %>
        </div>

        <a href="#" class="deleteRow">delete</a>
    <% } %>
</div> 
```

# heroku - Heroku Iron.io worker vs cron vs worker dyno

> ID：14124086
> 
> 赞同：2
> 
> 时间：2013-01-02T14:50:51.723
> 
> 标签：heroku, cron, iron.io

我的理解是，Heroku 使用测功机（基于：[https](https://devcenter.heroku.com/articles/scheduler#dynohour-costs) ://devcenter.heroku.com/articles/scheduler#dynohour-costs ）根据任务运行的实际时间量对 Cron 任务收费。

因此，如果我需要每 X 分钟运行一次快速任务，我可以使用 cron 插件来处理它，而不是使用工作人员测功机，而我只需支付一小部分成本。

那么，如果以上一切都是真的，那么 Iron.io 工人有什么用呢？它们的收费（大约）与来自 cron 作业的测功机相同，并且它们无法连接到数据库。

我有一种感觉，我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:22:56.443

我的印象是 IronWorker 可以使用 Heroku 的数据库。然而，我可能对此有误解。

我不能声称在 Heroku 上的 cron 任务有丰富的经验，所以如果我弄错了它的限制，请原谅我。但是，我的印象是从一个测功机扩展到多个测功机是一个过程。IronWorker 的真正优势在于使工作服务器的数量能够根据需求波动——您可以随时进行扩展，但只需为您实际使用的规模付费。

# iphone - 架构 armv7 的未定义符号：“_OBJC_CLASS_$_Flurry”

> ID：14124097
> 
> 赞同：16
> 
> 时间：2013-01-02T14:51:43.703
> 
> 标签：iphone, ios, flurry

我正在尝试将 Flurry analytics 4.1.0 集成到我的 iPhone 应用程序中，但在尝试构建项目时收到以下错误：

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_Flurry", referenced from:
      objc-class-ref in AppDelegate.o 
```

我已经按照 Flurry 的步骤搜索了这个问题，但遇到类似问题的每个人都忘记了链接 SystemConfiguration.framework。

以下是我的项目设置的一些屏幕截图。

![项目文件](../Images/ba81c164b252e07efe055025b20ccd5a.png) ![图书馆](../Images/ecc3301c3e91fdef0e17153e96338a70.png) ![项目构建设置](../Images/1bcf38c82bed14db67f1870dd8b65f3b.png)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-02T15:00:57.573

似乎库*libFlurry.a*未正确添加到您的项目中。它应该出现在第二个屏幕截图中。

单击*Link Binary with Libraries*视图`+`底部的图标（第二个屏幕截图）并选择*libFlurry.a*文件。然后重新构建。

 *** * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-08-18T14:25:20.920

实际上，您还需要添加以下框架：

```
CFNetwork.framework
Security.framework
SystemConfiguration.framework 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-13T07:50:15.337

我不知道为什么，但我的 libFlurry.a 文件位于名为“libFlurry_6.7.0.a”的 pod 文件夹中。我不确定我是否在这里愚蠢，但以防万一像我这样的人不知道在哪里寻找它......

添加后，它可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-26T09:59:39.257

我正在通过 pod 使用 flurry：

```
pod 'Flurry-iOS-SDK/FlurrySDK'
pod 'Flurry-iOS-SDK/FlurryAds'
pod 'Flurry-iOS-SDK/TumblrAPI' 
```

我必须从 pods 文件夹中链接 libFlurryAds.a。

[![在此处输入图像描述](../Images/ce4ec7892f3460c80a003415ed791788.png)](https://i.stack.imgur.com/iwbOl.png)**

# java - 无法在 H2 DB 中调用触发器

> ID：14124099
> 
> 赞同：1
> 
> 时间：2013-01-02T14:51:49.323
> 
> 标签：java, netbeans, h2

我尝试运行一个简单的类来从 Java 代码中调用 TRIGGER，我使用了 H2 DB，你能帮帮我吗？这是我的简单代码（如 H2 中的示例代码）：

```
public class TriggerTest {

public static void main(String[] args) throws Exception {
    System.out.println(TriggerTest.MyTrigger.class.getName());
    Class.forName("org.h2.Driver");
    Connection conn = DriverManager.getConnection("jdbc:h2:tcp://localhost/~/chap1", "sa", "sa");
    Statement stat = conn.createStatement();
    stat.execute("Drop Table if exists INVOICE");
    stat.execute("Drop Table if exists INVOICE_SUM");
    stat.execute("CREATE TABLE INVOICE(ID INT PRIMARY KEY, AMOUNT DECIMAL)");
    stat.execute("CREATE TABLE INVOICE_SUM(AMOUNT DECIMAL)");
    stat.execute("INSERT INTO INVOICE_SUM VALUES(0.0)");
    stat.execute("CREATE TRIGGER INV_INS AFTER INSERT ON INVOICE FOR EACH ROW CALL \""+TriggerTest.MyTrigger.class.getName()+"\"");
    stat.execute("CREATE TRIGGER INV_UPD AFTER UPDATE ON INVOICE FOR EACH ROW CALL \""+TriggerTest.MyTrigger.class.getName()+"\"");
    stat.execute("CREATE TRIGGER INV_DEL AFTER DELETE ON INVOICE FOR EACH ROW CALL  \""+TriggerTest.MyTrigger.class.getName()+"\"");

    stat.execute("INSERT INTO INVOICE VALUES(1, 10.0)");
    stat.execute("INSERT INTO INVOICE VALUES(2, 19.95)");
    stat.execute("UPDATE INVOICE SET AMOUNT=20.0 WHERE ID=2");
    stat.execute("DELETE FROM INVOICE WHERE ID=1");

    ResultSet rs;
    rs = stat.executeQuery("SELECT AMOUNT FROM INVOICE_SUM");
    rs.next();
    System.out.println("The sum is " + rs.getBigDecimal(1));
    conn.close();
}

public static class MyTrigger implements Trigger {

    public void init(Connection conn, String schemaName, String triggerName, String tableName, boolean before, int type) {
        // Initializing trigger
    }

    public void fire(Connection conn,
            Object[] oldRow, Object[] newRow)
            throws SQLException {
        BigDecimal diff = null;
        if (newRow != null) {
            diff = (BigDecimal) newRow[1];
        }
        if (oldRow != null) {
            BigDecimal m = (BigDecimal) oldRow[1];
            diff = diff == null ? m.negate() : diff.subtract(m);
        }
        PreparedStatement prep = conn.prepareStatement(
                "UPDATE INVOICE_SUM SET AMOUNT=AMOUNT+?");
        prep.setBigDecimal(1, diff);
        prep.execute();
    }

} 
```

和错误：线程“main”中的异常 org.h2.jdbc.JdbcSQLException：创建或初始化触发器“INV_INS”对象时出错，类“vn.com.khangpn.core.trigger.TriggerTest$MyTrigger”，原因：“org.h2 .message.DbException：类“”vn.com.khangpn.core.trigger.TriggerTest$MyTrigger“”未找到[90086-169]”；有关详细信息，请参阅根本原因；SQL 语句：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T06:02:47.083

在H2中，[触发器类必须在数据库引擎的classpath中（使用服务器模式时，必须在服务器的classpath中）。](http://h2database.com/html/features.html#triggers)

# android - Android：CheckBox多选ArrayIndexOutOfBoundsException

> ID：14124102
> 
> 赞同：0
> 
> 时间：2013-01-02T14:52:03.457
> 
> 标签：android, android-listview

我正在尝试使用复选框实现联系人并选择多个联系人并保存它们..下面是我的代码

```
public class ProfileAdapter extends ArrayAdapter<Profile>{
    private String TAG="ContactArrayAdapter";
    private int renderer;
    ArrayList<Profile> myElements;
    HashMap<String, Integer> alphaIndexer;
    String[] sections;
    protected List<Profile> listCont;
    private Activity activity;
    private String profileType;

 // boolean array for storing
    //the state of each CheckBox 
    boolean[] checkBoxState;

    ViewHolder viewHolder;

    public ProfileAdapter(Activity activity, int textViewResourceId, List<Profile> listCont,int renderer, String profileType) {
        super(activity, textViewResourceId, listCont);
        this.renderer = renderer;
        this.listCont = listCont;
        this.activity = activity;
        this.profileType=profileType;

        checkBoxState=new boolean[listCont.size()];
    }

    private class ViewHolder
    {
      ImageView photo;
      TextView text,textContNo, textEmailId;
      CheckBox checkBox;
    }

    @TargetApi(9)
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        View view = convertView;

        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) (getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE));
            view = inflater.inflate(renderer, null);
             viewHolder=new ViewHolder();

             //cache the views
                viewHolder.photo=(ImageView) view.findViewById(R.id.photo);
                viewHolder.text=(TextView) view.findViewById(R.id.name);
                viewHolder.textContNo=(TextView) view.findViewById(R.id.contactno);
                viewHolder.textEmailId=(TextView) view.findViewById(R.id.emailId);
                viewHolder.checkBox=(CheckBox) view.findViewById(R.id.checkBox1);

                 //link the cached views to the convertview
                view.setTag( viewHolder);

        }
          else
           viewHolder=(ViewHolder) view.getTag();

                   viewHolder.text = (TextView) view.findViewById(R.id.name);
                   viewHolder.photo = (ImageView) view.findViewById(R.id.photo);

                   viewHolder.textContNo = (TextView) view.findViewById(R.id.contactno);
                   viewHolder.textEmailId = (TextView) view.findViewById(R.id.emailId);

        Profile contact = listCont.get(position);
        viewHolder.text.setText(contact.getName());
        contact.getName();
        contact.getId();

        viewHolder.text.setTag(contact);
        viewHolder.text.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Profile myContact= (Profile) v.getTag();

                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("city", myContact.getCity());
                intent.putExtra("state", myContact.getState());
                intent.putExtra("countryName", myContact.getCountryName());
                intent.putExtra("postalCode", myContact.getPostalCode());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                Log.d(TAG, "On Activity Result Method : 1");
                activity.setResult(100, intent);

                activity.finish();
                Constants.loadEntries.cancel(true);
                return false;
            }
        });

        if(contact.getPhoto() !=null && !contact.getPhoto().equals("")){
            viewHolder.photo.setImageBitmap(contact.getPhoto());
        }else{
            viewHolder.photo.setImageResource(R.drawable.profile);
        }

        viewHolder.photo.setTag(contact);
        viewHolder.photo.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Profile myContact= (Profile)v.getTag();

                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                Log.d(TAG, "On Activity Result Method : 2");
                activity.setResult(100, intent);
                activity.finish();
                Constants.loadEntries.cancel(true);
                return false;
            }
        });

        viewHolder.textContNo.setText(contact.getNumber());
        viewHolder.textEmailId.setText(contact.getEmail());

        view.setClickable(true);
        view.setTag(contact);
        view.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Profile myContact= (Profile) v.getTag();

                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                Log.d(TAG, "On Activity Result Method : 3");
                activity.setResult(100, intent);
                activity.finish();
                Constants.loadEntries.cancel(true);
            }
        }); 

        LinearLayout layout = (LinearLayout)view.findViewById(R.id.profilelayout);
        layout.setTag(contact);
        layout.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Profile myContact= (Profile) v.getTag();
                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                Log.d(TAG, "On Activity Result Method : 4");
                activity.setResult(100, intent);
                activity.finish();
                Constants.loadEntries.cancel(true);
            }
        });

        //VITAL PART!!! Set the state of the 
       //CheckBox using the boolean array
            viewHolder.checkBox.setChecked(checkBoxState[position]);

               //for managing the state of the boolean
               //array according to the state of the
               //CheckBox

               viewHolder.checkBox.setOnClickListener(new View.OnClickListener() {

       public void onClick(View v) {
        if(((CheckBox)v).isChecked())
         checkBoxState[position]=true;
        else
         checkBoxState[position]=false;

        }
       });

        if (position % 2 == 0) 
            view.setBackgroundResource(R.drawable.listshape); 
            else 
            view.setBackgroundResource(R.drawable.favoritebody); 

            if (contact.getAddress() != null && contact.getAddress().length() != 0){ 
                view.setBackgroundResource(R.drawable.hasaddress); 

            } 
            return view;
            } 

            } 
```

但我在行得到 ArrayIndexOutOfBoundsException

```
 viewHolder.checkBox.setChecked(checkBoxState[position]);

01-02 20:14:51.926: E/AndroidRuntime(26353): java.lang.ArrayIndexOutOfBoundsException: length=0; index=0
01-02 20:14:51.926: E/AndroidRuntime(26353):    at org.app.myhood.adaptor.ProfileAdapter.getView(ProfileAdapter.java:215)
01-02 20:14:51.926: E/AndroidRuntime(26353):    at android.widget.AbsListView.obtainView(AbsListView.java:2468)
01-02 20:14:51.926: E/AndroidRuntime(26353):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1250)
01-02 20:14:51.926: E/AndroidRuntime(26353):    at android.widget.ListView.onMeasure(ListView.java:1162)
01-02 20:14:51.926: E/AndroidRuntime(26353):    at android.view.View.measure(View.java:15481)
01-02 20:14:51.926: E/AndroidRuntime(26353):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5107)
01-02 20:14:51.926: E/AndroidRuntime(26353):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
01-02 20:14:51.926: E/AndroidRuntime(26353):    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1038) 
```

我很震惊，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:56:03.150

检查这一行

```
 checkBoxState=new boolean[listCont.size()]; 
```

稍后发生错误时，您正在访问一个不存在的索引。

在访问数组之前放置一个断点以检查元素的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:15:33.453

您必须将值分配给`checkBoxState`. 在此处对其进行初始化后，`checkBoxState=new boolean[listCont.size()];`它需要值，如`checkBoxState[i] = true;`.

当您尝试在线读取其值时`viewHolder.checkBox.setChecked(checkBoxState[position]);`，它会崩溃，因为没有分配任何内容。您分配任何值的唯一时间是在`onClick()`您设置它之前没有发生的期间。

# winapi - WinAPI - GDI：DrawText() 和 ExtTextOut() 丑陋（启用 AA）

> ID：14124103
> 
> 赞同：4
> 
> 时间：2013-01-02T14:52:05.550
> 
> 标签：winapi

我尝试使用[此处](http://groups.google.com/group/borland.public.cppbuilder.vcl.components.using/tree/browse_frm/thread/e1c1093aabd7b345/640a45bd65903e29?rnum=1&_done=/group/borland.public.cppbuilder.vcl.components.using/browse_frm/thread/e1c1093aabd7b345/640a45bd65903e29?pli=1&#doc_2a5c8e53253996e1)描述的方法（虽然不是 MFC）为丰富的编辑控件制作行号。虽然它工作得很好，但与富编辑相比，行号的渲染真的很难看。

我做了一个小程序来重现这个问题：（对不起，我复制粘贴但找不到正常的文件托管服务-.-）：

```
#include <Windows.h>

LRESULT WINAPI WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch( msg )
    {
    case WM_CLOSE:
        ShowWindow(hWnd, SW_HIDE);
        DestroyWindow(hWnd);
        break;

    case WM_PAINT:
        {
            HDC hdc = GetDC(hWnd);
            HDC bdc = CreateCompatibleDC(hdc);
            HBITMAP bitmap = CreateCompatibleBitmap(hdc, 400, 100);

            int height = -MulDiv(10, GetDeviceCaps(hdc, LOGPIXELSY), 72);

            HFONT font = CreateFont(
                height, 0, 0, 0, FW_DONTCARE, FALSE, FALSE, FALSE,
                DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS,
                ANTIALIASED_QUALITY, FF_DONTCARE, "Consolas");

            HGDIOBJ oldbm = SelectObject(bdc, bitmap);
            HGDIOBJ oldft = SelectObject(bdc, font);

            RECT rc = { 0, 0, 200, 20 };

            FillRect(bdc, &rc, (HBRUSH)GetStockObject(WHITE_BRUSH));

            DrawText(bdc, " 1 2 3 4 5 6 7 8 9", 19, &rc, DT_LEFT|DT_EDITCONTROL);
            BitBlt(hdc, 20, 20, rc.right - rc.left, rc.bottom - rc.top, bdc, 0, 0, SRCCOPY);

            SelectObject(bdc, oldbm);
            SelectObject(bdc, oldft);

            DeleteObject(bitmap);
            DeleteObject(font);
            DeleteDC(bdc);
        }
        return 1;

    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;

    case WM_KEYUP:
        switch(wParam)
        {
        case VK_ESCAPE:
            SendMessage(hWnd, WM_CLOSE, 0, 0);
            break;
        }
        break;

    default:
        break;
    }

    return DefWindowProc(hWnd, msg, wParam, lParam);
}

INT WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPSTR lpCmdLine, int nShowCmd)
{
    HWND hwnd = 0;

    WNDCLASSEX wc =
    {
        sizeof(WNDCLASSEX),
        CS_CLASSDC,
        (WNDPROC)WndProc,
        0L, 0L,
        hInst,
        NULL, NULL, NULL, NULL,
        "TestClass", NULL
    };

    RegisterClassEx(&wc);

    int w = GetSystemMetrics(0);
    int h = GetSystemMetrics(1);

    DWORD style = WS_CLIPCHILDREN|WS_CLIPSIBLINGS|WS_SYSMENU|WS_BORDER|WS_CAPTION;

    hwnd = CreateWindowA("TestClass", "Winapi1", style,
        (w - 400) / 2, (h - 200) / 2, 400, 200,
        NULL, NULL, wc.hInstance, NULL);

    if( !hwnd )
    {
        MessageBoxA(NULL, "Could not create window!", "Error!", MB_OK);
        goto _end;
    }

    ShowWindow(hwnd, SW_SHOWDEFAULT);
    UpdateWindow(hwnd);

    MSG msg;
    ZeroMemory(&msg, sizeof(msg));

    while( msg.message != WM_QUIT )
    {
        while( PeekMessage(&msg, NULL, 0U, 0U, PM_REMOVE) )
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }

_end:
    UnregisterClass("TestClass", wc.hInstance);
    return 0;
} 
```

将文本输入富编辑的结果比较：

*（...无法发布图片 -.- ...）*

虽然如果我放大图像，差异是“微妙的”，但它表明富编辑使用了某种颜色。

我尝试了以下事情：

*   使用 ExTextOut
*   将位图保存到文件中，看看它是否也很丑（它是）
*   直接绘制到 hdc 中（也很丑，而且会闪烁，但现在这不是问题）

我错过了什么？

# android - 谷歌地图 V2 android 滚动上的黑色空间

> ID：14124104
> 
> 赞同：1
> 
> 时间：2013-01-02T14:52:09.147
> 
> 标签：android, google-maps-android-api-2

> **可能重复：**
> [带有 Google Maps API v2 的 ViewPager：神秘的黑色视图](https://stackoverflow.com/questions/13837697/viewpager-with-google-maps-api-v2-mysterious-black-view)

我有一个片段使用 com.google.android.gms.maps.MapView 来显示地图。包含地图的片段位于滚动视图中。当我滚动滚动视图时，MapView 往往会过度滚动，我最终会看到黑色背景（顶部或底部），我认为它位于地图下方，并且由于过度滚动而显示。无论如何我可以将这个黑色更改为白色或完全防止过度滚动。我尝试设置背景但无济于事。

谢谢你。

![地图黑屏截图](../Images/5c6a06750a2fa3c7432436f53aa0121a.png)

# iphone - NSDictionary 中 NSArray 的 NSPredicate

> ID：14124108
> 
> 赞同：1
> 
> 时间：2013-01-02T14:52:22.770
> 
> 标签：iphone, objective-c, ios, nspredicate, predicate

我的阵列

```
(
   {id:1,data:(@"macbook",@"mac mini")},
   {id:2,data:(@"ipad",@"ipod")},
   {id:3,data:(@"macbook",@"ipod")}
) 
```

我有一个谓词

```
NSString *text = @"mac";
[NSPredicate predicateWithFormat:@"(data contains[cd] %@)",text];
[array filteredArrayUsingPredicate:predicate]; 
```

但它不会遍历我的字典中的数组（我的结果应该是一个包含 2 个 id 为 1 和 3 的对象的数组）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:18:06.610

```
NSString* text = @"mac" ;
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"any data contains[cd] %@",text] ;
NSArray* filteredArray = [theArray filteredArrayUsingPredicate:predicate] ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:43:43.993

我个人发现`NSPredicate`格式很容易出错。

您可以考虑使用块来过滤您的`NSArray`

```
NSString * filterString = @"mac";
NSIndexSet * indexes = [array indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    NSArray * entry = obj[@"data"];
    for (NSString * value in entry)
        if ([value rangeOfString:filterString].location != NSNotFound)
            return YES;
    return NO;
}];
NSArray * filteredArray = [array objectsAtIndexes:indexes]; 
```

它肯定更长更冗长，但我发现它绝对更容易阅读和调试。

# java - Spring MVC 测试框架因 HTTP 响应 406 而失败

> ID：14124110
> 
> 赞同：11
> 
> 时间：2013-01-02T14:52:34.050
> 
> 标签：java, spring, testing, model-view-controller

我开始使用 Spring 3.2 的新 MVC 测试框架，并为我的所有测试用例获取了 406 HTTP 响应代码。

测试用例很简单

```
public class LocationResouceTest {

    @Autowired
    private WebApplicationContext wac;

    private MockMvc mockMvc;

    @Before
    public void setup() {
        this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();
    }

    @Test
    public void testGetLocationByPlzPattern() throws Exception {
        // here I need to define the media type as a static var from MediaType
        this.mockMvc.perform(get("/someurl?someparam=somevalue")).andExpect(status().isOk());
    }

} 
```

对应的资源是

```
@Controller
// here I need to define the media type as string
@RequestMapping(value = "/someurl", produces = "application/json; charset=UTF-8")
public class LocationResource {

    @ResponseBody
    @RequestMapping(method = RequestMethod.GET)
    public ArrayList<DTO> getAllIndex(@RequestParam("someparam") String param) {
        return ... //the list of DTO classes is transformed to json just fine if called with curl
    }

} 
```

我确信这是因为媒体类型错误，但我不知道为什么。

失败的测试用例的痕迹：

> java.lang.AssertionError: 预期状态：<200> 但在 org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:60) 处为 <406> 在 org.springframework.test.util.AssertionErrors.assertEquals( AssertionErrors.java:89) at org.springframework.test.web.servlet.result.StatusResultMatchers$5.match(StatusResultMatchers.java:546) at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java: 141) 在 de.yourdelivery.rest.location.LocationResouceTest.testGetLocationByPlzPattern(LocationResouceTest.java:37) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun .reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) 在 org.junit 的 org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)。 runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42) at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20) at org.junit.internal.runners.statements.RunBefores.evaluate( RunBefores.java:28) 在 org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74) 在 org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java: 83) 在 org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72) 在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88) at org.junit.runners.ParentRunner$3.run (ParentRunner.java:231) 在 org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60) 在 org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229) 在 org.junit.runners.ParentRunner .access$000(ParentRunner.java:50) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222) at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61 ) 在 org.junit 的 org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)。org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174) at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run( JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:第 467 章.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.run(TestExecution.run) 运行(SpringJUnit4ClassRunner.java:174) java:38) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.run(TestExecution.run) 运行(SpringJUnit4ClassRunner.java:174) java:38) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit。 runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit。 runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-11-18T19:00:12.180

如果你有一个`@Configuration`类，你可以添加 `[@EnableWebMvc](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/EnableWebMvc.html)` 注解而不是使用带有`<mvc:annotation-driven />`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T10:46:01.090

需要在spring xml中加入如下代码，在jackson中序列化POJO。

```
<annotation-driven /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T18:41:39.010

这可能是由于 Spring 测试上下文中没有任何 MVC 配置造成的。使用类似的东西时：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration("/test-context.xml") 
```

...那么该`test-context.xml`文件还应包括以下内容：

```
<mvc:annotation-driven content-negotiation-manager="contentNegotiationManager">
  <mvc:message-converters>
    <bean id="..." class=
"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"/>
    <bean id="..."
      class="org.springframework.http.converter.StringHttpMessageConverter"/>
    <bean id="..."
      class="org.springframework.http.converter.FormHttpMessageConverter"/>
  </mvc:message-converters>
</mvc:annotation-driven>

<bean id="contentNegotiationManager" 
  class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
  <property name="defaultContentType" value="application/json" />
  <property name="mediaTypes">
    <value>
      json=application/json
      xml=application/xml
    </value>
  </property>
</bean> 
```

使用没有指定任何特殊内容（例如： no `produces`in `@RequestMapping`）的控制器可以轻松测试上述问题是否存在，因此不需要任何内容​​协商：

```
@RequestMapping(value = "/foo", method = RequestMethod.GET)
@ResponseBody
public String getFoo() {
    return "bar";
} 
```

...和：

```
@Test
public void getFoo() throws Exception {
    MvcResult result = 
      this.mockMvc.perform(get("/foo").accept(MediaType.TEXT_PLAIN))
        .andExpect(status().isOk())
        .andReturn();
    Assert.assertEquals(result.getResponse().getContentAsString(), "bar"); 
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-01T20:32:30.903

必须同时拥有`@EnableWebMvc` 和`.accept(MediaType.APPLICATION_JSON)`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-17T06:36:59.203

您缺少`<mvc:annotation-driven />`配置 xml 文件中的 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T15:52:46.323

我认为解决方法是这样修改请求：

```
this.mockMvc.perform(get("/someurl?someparam=somevalue").contentType(MediaType.APPLICATION_JSON)).andExpect.. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T14:56:12.340

我认为春天的做事方式是使用 HttpResponseEntity，或返回模型和视图。例如 ：

```
@ResponseBody
ResponseEntity<String> getFoo() {
  HttpHeaders responseHeaders = new HttpHeaders();
  responseHeaders.setContentType(MediaType.APPLICATION_JSON);
  String test = "{\"foo\":{\"title\": \"Stack\"}}";
  return new ResponseEntity<String>(test, responseHeaders, HttpStatus.OK);
} 
```

（我会对你取得的任何进一步进展感兴趣，因为它是全新的）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-11T06:35:13.377

我刚才也遇到了同样的问题，通过将Controller的返回类型改为String来解决。并直接返回 JSON 字符串而不是对象。它确实有效。

```
Gson gson = new Gson();
return gson.toJson(dto); 
```

# ruby - 除非从 zsh 调用，否则 Emacs 无法加载 ruby gem

> ID：14124112
> 
> 赞同：3
> 
> 时间：2013-01-02T14:52:40.810
> 
> 标签：ruby, emacs, rvm, debian, bundler

我为 emacs 安装了*bundler*包，如果从 zsh（终端）调用 emacs，它工作正常。

但是当通过其他方式调用 emacs 时，例如 (Alt+F2) 或应用程序菜单，

`M-x bundle-install`给出以下错误：

> “zsh：1：找不到命令：捆绑”

我相信 emacs 在后一种情况下无法加载一些环境变量。

*系统详情：*

Debian（不稳定的 amb64）

转速 1.17.6

zsh 4.3.17

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:04:43.533

得到了解决方案。 *[rvm](https://github.com/senny/rvm.el)*包是我需要的

```
M-x package-install rvm
M-x rvm-use-default
M-x bundle-install 
```

像魅力一样工作:) 编辑：

将以下内容添加到 init.el 让生活更轻松

```
(rvm-use-default) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:11:52.163

只是对此的一个注释。我也有类似的问题，`rvm`它似乎取决于 bash 或 zsh 才能正确加载。rvm 脚本`/etc/profile.d`会明确检查“正确”的 shell，如果它被调用，`dash`否则`sh`它将不起作用。因此`bundle`，例如 alt-f2 也将不可用，例如用于`sh`加载程序

# android - 我怎样才能获得我自己的 android 设备的蓝牙 UUID？

> ID：14124114
> 
> 赞同：0
> 
> 时间：2013-01-02T14:52:45.360
> 
> 标签：android, bluetooth, uuid, sdp

我目前可以`fetchUuidsWithSdp`使用**远程**设备。*（`getUuids`不工作，不知道为什么）*

但是我怎么能得到我自己的安卓设备的 UUID 呢？

假设当我在**服务器套接字**上成功执行时，注册的 UUID**必须****包括**我在使用此命令创建服务器套接字时建立的 UUID`accept()`****`listenUsingInsecureRfcommWithServiceRecord`****

 ****我发现情况**并非**总是如此！我想测试一下。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-16T18:07:43.990

嘿有点晚，但我发现最好的方法是做这样的事情。对于生产代码，我不是最好的主意，但对于测试它还不错。

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter(); 
Method getUUIDsMethod = BluetoothAdapter.class.getDeclaredMethod("getUuids", null);
ParcelUuid[] dUUIDs = (ParcelUuid[]) getUUIDsMethod.invoke(mBluetoothAdapter, null); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T10:47:03.450

```
 TelephonyManager tManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
 String uuid = tManager.getDeviceId();
//or
UUID.nameUUIDFromBytes(tManager.getDeviceId().getBytes("utf8")) 
```****

# java - 无法从 jsf 中的数据表内的 InputText 捕获数据

> ID：14124116
> 
> 赞同：1
> 
> 时间：2013-01-02T14:53:01.537
> 
> 标签：java, jsf, jsf-2

我有一个`datatable`我有两列的地方。

第 1 列：输出文本，由 bean 数据填充。第2栏：输入文本框

我已经将 column1 作为`commandLink`我附加了一个`actionListener`. 目的是当我单击 UI 上的一行时，应在 bean 中捕获选定的行数据。

这是代码：

```
<h:dataTable id="headerOverrides" styleClass="header" headerClass="headerTable"
  cellpadding="0" cellspacing="0" width="100%">
        <h:column>
            <f:facet name="header">
                <h:commandLink id="payment_Fund_Name" styleClass="header"
                    actionListener="#{pc_Billing.sortColumn}"
                    onmouseover="resetTargetFrame();">
                    <h:outputText style="width:150px" 
                      value="#{bundle.billing_Fund_Name}">                                                    
                    </h:outputText>
                </h:commandLink>
           </f:facet>
        </h:column>
        <h:column>
           <f:facet name="header">
                <h:commandLink id="allocation_Percent" styleClass="header"
                    actionListener="#{pc_Billing.sortColumn}"
                    onmouseover="resetTargetFrame();">
                    <h:outputText style="width:65px" value="#{bundle.billing_Allocation_Percent}">
                    </h:outputText>
                </h:commandLink>                            
           </f:facet>
        </h:column>
</h:dataTable>
</td>
</tr>

<tr>
<td colspan="2">
    <div class="divTable" style="height: 176px" id="overrideTableData">
    <h:dataTable id="overrideTable" value="#{pc_Billing.overrideFundsList}"
                var="currentRow" columnClasses="column" headerClass="header"
                    rowClasses="#{pc_Billing.paymentRowStyles}" binding="#{pc_Billing.allocationOverrideTable}"
                    styleClass="complexTable" cellpadding="2" cellspacing="0"
                    width="100%" border="1" >

          <h:column id="override_Fund">
            <h:commandLink onmouseover="resetTargetFrame();" id="override_FundLink"
                            actionListener="#{pc_Billing.selectFromRow}" immediate="true"
                            styleClass="textTable" style="width:100%">
                     <h:outputText styleClass="textTable"
                               value="#{currentRow.fundName}" style="width:140px">
                      </h:outputText>
            </h:commandLink>
           </h:column>
           <h:column id="override_Allocation">
              <h:inputText id="allocation_Percent" styleClass="textInput" value="#{currentRow.allocation}"
                                disabled="#{!(pc_Billing.loanPayment || pc_Billing.universalLife)}" onblur="totalFrom();"
                                style="width:70px">
                  <f:convertNumber type="percent" />
              </h:inputText>
        </h:column>
    </h:dataTable> 
```

`selectFromRow`来自bean的方法

```
public void selectFromRow(ActionEvent e) {

        if (e.getComponent().getId().equalsIgnoreCase("override_FundLink")) {
            paymentOverrideSelectedRow = (PaymentOverride) allocationOverrideTable.getRowData();
            allocationOverrideTableData.setFundName(paymentOverrideSelectedRow.getFundName());
            allocationOverrideTableData.setAllocation(paymentOverrideSelectedRow.getAllocation());

        }else if(e.getComponent().getId().equalsIgnoreCase("fundLink"))
        {
            preimumOverrideSelectedRow = (PremiumOverride) premiumOverrideTable.getRowData();
            premiumOverrideTableData.setFundName(preimumOverrideSelectedRow.getFundName());
            premiumOverrideTableData.setAmount(preimumOverrideSelectedRow.getAmount());
            premiumOverrideTableData.setEndDate(preimumOverrideSelectedRow.getEndDate());
            premiumOverrideTableData.setInterestRate(preimumOverrideSelectedRow.interestRate);
        }

    FacesContext.getCurrentInstance().renderResponse();
    } 
```

现在发生的事情是我没有从表格上的输入文本框中获取数据。它是空的。我错过了什么？此外，当`selectFromRow`函数执行表格渲染并且我在文本框中输入的数据被清除时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:16:10.300

您是否尝试从此处删除 immediate="true" ？

```
<h:commandLink onmouseover="resetTargetFrame();" id="override_FundLink"
               actionListener="#{pc_Billing.selectFromRow}" immediate="true"
               styleClass="textTable" style="width:100%"> 
```

我猜它会在处理 inputText 的值之前运行你的 selectFromRow 方法。

# odbc - 链接服务器 INSERT、UPDATE 和 DELETE 失败并出现“未知提供程序错误”

> ID：14124119
> 
> 赞同：1
> 
> 时间：2013-01-02T14:53:07.020
> 
> 标签：odbc, ibm-midrange, linked-server, msdasql

对于某个文件（我认为是 AS/400 的远程系统中的一个表），突然 INSERT、UPDATE 和 DELETE 失败。

我们使用的链接服务器是在 SQL Server 中设置的，它使用 ODBC 数据源 (DSN)。数据源是“iSeries Access for Windows 的 ODBC 数据源”。

只有一个表有这个问题。我们可以使用相同的链接服务器在其他表中进行插入和更新，而不会出现任何错误，并且 SELECT 仍然适用于有问题的表。

我们收到 INSERT 和 UPDATE 语句的这些消息（在下面的代码中替换了服务器和数据库名称）：

```
Msg 7399, Level 16, State 1, Line 1
The OLE DB provider "MSDASQL" for linked server "MYSERVER" reported an error. 
The provider did not give any information about the error.
Msg 7343, Level 16, State 2, Line 1
The OLE DB provider "MSDASQL" for linked server "MYSERVER" could not INSERT INTO 
table "[MYSERVER].[MYDB].[DMPCOM].[DMPXIF]". Unknown provider error. 
```

并且 DELETE 给出了这个消息：

```
The OLE DB provider "MSDASQL" for linked server "MYSERVER" could not delete from 
table ""MYDB"."DMPCOM"."DMPXIF"". There was a recoverable, provider-specific 
error, such as an RPC failure. 
```

如果您对此有任何线索，请不要犹豫，回答这个问题。

谢谢， 安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:21:55.150

错误的原因是 AS400 文件上的日志功能已关闭，我们使用链接服务器和 ODBC iSeries 数据源从 SQL Server 连接到该文件。这也关闭了承诺控制。

然而，在 ODBC iSeries 数据源上将提交设置为“立即提交 (*NONE)”并没有帮助。（也许除了更改该设置之外还有更多内容。）

AS/400 系统的数据库管理员使用其默认设置重新创建了表，包括日志和提交控制，然后一切恢复正常，并且从链接服务器连接中插入、更新和删除工作正常。

# javascript - 正则表达式替换html标签外的文本

> ID：14124120
> 
> 赞同：1
> 
> 时间：2013-01-02T14:53:09.643
> 
> 标签：javascript, regex

我正在开发一个自动完成组件，它突出显示所有搜索文本的出现。我所做的是按单词分解输入文本，并将这些单词的每一次出现都包装成一个

我的代码看起来像这样

```
inputText = 'marriott st';
text = "Marriott east side";
textSearch = inputText.split(' ');
for (var i in textSearch) {
  var regexSearch = new RegExp('(?!<\/?strong>)' + textSearch[i]), "i");
  var textReplaced = regexSearch.exec(text);
  text = text.replace(regexSearch, '< strong>' + textReplaced + '< /strong>');
} 
```

例如，给定结果：“万豪东区”

输入文本：“marriott st”

我应该得到

```
 <strong>marriot< /strong > ea < strong >st < /strong > side 
```

我得到了

```
 <<strong>st</strong>rong>marriot</<strong>st </strong>rong>ea<<strong>st</strong> rong>s</strong> side 
```

有什么想法可以改进我的正则表达式，以避免在 html 标签中出现？谢谢

```
 /(?!<\/?strong>)st/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:12:34.487

我会一次性处理字符串。您可以从搜索字符串中创建一个正则表达式：

```
var search_pattern = '(' + inputText.replace(/\s+/g, '|') + ')';
// `search_pattern` is now `(marriot|st)`
text = text.replace(RegExp(search_pattern, 'gi'), '<strong>$1</strong>'); 
```

[**演示**](http://jsfiddle.net/uL3GK/)

您甚至可以先拆分搜索字符串，按长度对单词进行排序并将它们组合起来，从而为较长的匹配项提供更高的优先级。

您绝对应该在字符串中转义特殊的正则表达式字符：[如何使用 javascript 转义正则表达式特殊字符？](https://stackoverflow.com/questions/3115150/how-to-escape-regular-expression-special-characters-using-javascript).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:03:00.500

在每次搜索之前，我建议每次都获取（或保存）原始搜索字符串。例如，在您当前的情况下，这意味着您可以将所有 '<strong>' 和 '</strong>' 标记替换为 ''。这将有助于使您的正则表达式保持简单，特别是如果您决定在将来添加其他 html 标记和格式。

# asp.net - 重写 WCF RIA 服务请求 URL

> ID：14124123
> 
> 赞同：1
> 
> 时间：2013-01-02T14:53:31.497
> 
> 标签：asp.net, silverlight, url-rewriting, wcf-ria-services

我制作了自定义 HttpModule，它搜索 $where 参数，更改它（用 DateTime.UtcNow 替换 DateTime.Now）并重写路径。简化的模块实现如下所示：

```
private void OnBeginRequest(object sender, EventArgs e)
{
    HttpApplication app = sender as HttpApplication;

    string whereQuery = app.Request.QueryString["$where"];
    string newWhereQuery = this.ChangeWhereQuery(whereQuery);

    // Combine new where query string with other query strings
    string newQueryString = this.BuildQueryString(app, newWhereQuery);
    app.Context.RewritePath(app.Request.FilePath, app.Request.PathInfo, newQueryString);
} 
```

问题是重写后查询表达式丢失，即在DomainService的Query方法中queryDescription.Query为null：

```
public override IEnumerable Query(QueryDescription queryDescription, out IEnumerable<ValidationResult> validationErrors, out int totalCount)
{
    // queryDescription.Query is null
    return base.Query(queryDescription, out validationErrors, out totalCount);
} 
```

如果我用以下代码替换我的自定义模块（路径用原始查询字符串重写），一切正常：

```
private void OnBeginRequest(object sender, EventArgs e)
{
    HttpApplication app = sender as HttpApplication;

    string qs = app.Request.QueryString.ToString();
    app.Context.RewritePath(app.Request.FilePath, app.Request.PathInfo, qs);
} 
```

我在 Silverlight 论坛上找到了这篇文章，但线程 URL 不再可用：

> WCF RIA 服务本身使用 URL 重写，因此可能会发生冲突。这是一个带有解决方案的最近线程： [http ://forums.silverlight.net/forums/p/233310/573340.aspx#573340](http://forums.silverlight.net/forums/p/233310/573340.aspx#573340)

任何想法为什么在更改 URL 查询字符串后查询表达式会丢失？

我正在使用 WCF RIA Services V1.0 SP2、.NET 4 和 IIS 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:19:37.953

我链接到的线程可能是这个： [http ://social.msdn.microsoft.com/Forums/en-US/silverlightwcf/thread/c6ab7061-19ce-4bd9-8afe-cfbdc7fd9267/](http://social.msdn.microsoft.com/Forums/en-US/silverlightwcf/thread/c6ab7061-19ce-4bd9-8afe-cfbdc7fd9267/)

不过，在这里查看您的扩展问题，我认为您正试图在错误的地方加入。在 DomainService 本身中，每个查询都是通过虚拟 Query 方法进入的。如果您覆盖 Query 方法，那么您应该能够在将 QueryDescription 发送到 base.Query 方法之前对其进行修改。

# ruby - 象棋类游戏的红宝石设置

> ID：14124133
> 
> 赞同：3
> 
> 时间：2013-01-02T14:54:11.507
> 
> 标签：ruby, ajax, sinatra, server-sent-events

我要开始一个宠物项目，把[这个棋盘游戏](http://en.wikipedia.org/wiki/Quoridor)带入网络。为简单起见，想象一下 pvp 国际象棋。

我对这种异步编程的经验很少。唯一的一个 - 我使用 sinatra 的流媒体功能写了一个简单的聊天。

我有两个密切相关的问题：

*   我应该如何组织游戏流程？我应该将游戏状态存储在数据库中吗？或者我可以有一个类，例如游戏，并将所有内容存储在其中吗？第二个选项听起来更容易，更自然，但是是否可以在具有客户端-服务器异步性质的应用程序中实现它？

*   客户端应该如何与服务器交互？我希望实时更新董事会状态。js EventSource 是这里的最佳选择吗？除了带有 stream 关​​键字的 Sinatra 应用程序之外，我还需要什么吗？我需要 EventMachine 吗？

# sql - 在多个 PostgreSQL 数据库中运行脚本

> ID：14124142
> 
> 赞同：1
> 
> 时间：2013-01-02T14:54:52.117
> 
> 标签：sql, macos, postgresql-9.1, multiple-databases

如何在 Mac 中的多个 PostgreSQL 数据库中运行脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:41:23.420

```
for db in first_db second_db ...; do
    psql -d $db -f yourscript.sql
done 
```

Of course there will be many variations depending on exactly what you want to do.

# asp.net - 空数据行样式不起作用

> ID：14124148
> 
> 赞同：0
> 
> 时间：2013-01-02T14:55:34.663
> 
> 标签：asp.net

我有一个`emptydatarowstyle`似乎不起作用的。当 GridView 为空时。我试图隐藏这个周围的白色边框：

![在此处输入图像描述](../Images/a2798628cbd1a9538b28cbf8d992d151.png)

代码：

```
<emptydatarowstyle  BorderStyle="None" BorderWidth="0px" />

                    <emptydatatemplate>

                    No Dates Found for this experience at this current time.  Please try again.

                    </emptydatatemplate> 
```

编辑：

ASPX：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="book.aspx.cs" Inherits="chinatownexperience.book" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="css/main.css" rel="stylesheet" type="text/css" />

<!-- Put the following javascript before the closing </head> tag. -->
<script type="text/javascript">
    (function () {
        var cx = '000935526448861961589:s0c0yzdtfao';
        var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
    })();
</script>

</head>
<body>
    <form id="form1" runat="server">
    <div id="body-1">
        <div id="topblank">
                <div class="top-1-1"><a href="experiences.aspx"><img onmouseover="this.src='images/myexperience-on.png'" onmouseout="this.src='images/myexperience.png'" src="images/myexperience.png" width="111" height="23" alt="My Experience" /></a></div>
                <div class="yellowsquare"></div>
                <div class="top-1-2"><a href="loginpublic.aspx"><img onmouseover="this.src='images/login-on.png'" onmouseout="this.src='images/login.png'" src="images/login.png" width="49" height="23" alt="Login" /></a></div>
                <div class="yellowsquare"></div>
                <div class="top-1-3"><a href="register.aspx"><img onmouseover="this.src='images/register-on.png'" onmouseout="this.src='images/register.png'" src="images/register.png" width="62" height="23" alt="Register" /></a></div>
                <div class="top-2-google"><gcse:searchbox-only></div>
        </div>

        <div class="center">
            <div class="navhome"><a href="index.aspx"><img src="images/menu-home-button-off.png" width="81" height="54" alt="Home" /></a>
            </div>
            <div class="navaboutus"><a href="aboutus.aspx"><img src="images/menu-aboutus-button-off.png" width="105" height="54" alt="Home" /></a>
            </div>
            <div class="navexperiences"><a href="experiences.aspx"><img src="images/menu-experiences-button-on.png" width="129" height="54" alt="Home" /></a>
            </div>
            <div class="navgetinvolved"><a href="getinvolved.aspx"><img src="images/menu-getinvolved-button-off.png" width="130" height="54" alt="Home" /></a>
            </div>
            <div class="navsupportus"><a href="supportus.aspx"><img src="images/menu-supportus-button-off.png" width="128" height="54" alt="Home" /></a>
            </div>
            <div class="navcontactus"><a href="contactus.aspx"><img src="images/menu-contactus-button-off.png" width="132" height="54" alt="Home" /></a>
            </div>
            <div class="navmenuend"><img src="images/menu-end.png" width="8" height="54" alt="menu end" />
            </div>
        </div>

        <div class="line"><hr /></div>

        <div class="centergrid">
            <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                DataSourceID="SqlDataSource1" CssClass="bookgridview">

<%--                <emptydatarowstyle  BorderStyle="None" BorderWidth="0px" />--%>

                    <emptydatatemplate>

                    Unfortunately, this Experience is currently fully booked. Please try again later for availability.

                    <!-- <div id="filler"></div>  -->

                    </emptydatatemplate> 

                <Columns>
                    <asp:BoundField DataField="TName" HeaderText="Experience" SortExpression="TName" />
                    <asp:BoundField DataField="SDate" HeaderText="Date" SortExpression="SDate" DataFormatString="{0:d}" />
                    <asp:BoundField DataField="STime" HeaderText="Time" SortExpression="STime" />
                    <asp:BoundField DataField="TDuration" HeaderText="Duration (approx)"
                        SortExpression="TDuration" />
                    <asp:BoundField DataField="TPriceadult" HeaderText="Adult" 
                        SortExpression="TPriceadult" DataFormatString="{0:C}"  /> 
                    <asp:BoundField DataField="TPricesenior" HeaderText="Student/Senior" 
                        SortExpression="TPricesenior" DataFormatString="{0:C}"  /> 
                    <asp:BoundField DataField="TPricechild" HeaderText="Child" 
                        SortExpression="Tpricechild" DataFormatString="{0:C}"   /> 

                    <asp:BoundField DataField="ScheduleId" HeaderText="ScheduleId" 
                        SortExpression="ScheduleId"  Visible="False" />
                    <asp:TemplateField>
                    <ItemTemplate>
                         <asp:HyperLink ID="lnkSelect" runat='server' NavigateUrl='<%# String.Format("~/bookingform.aspx?ID={0}", Eval("ScheduleId")) %>'>Book</asp:HyperLink>
                    </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>

            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:ChinatowndbConnString %>" 
                SelectCommand="SELECT * FROM [vwSchedule] Where TourId=@tid">

                <SelectParameters>
                    <asp:QueryStringParameter DbType="Int32" Name="tid" QueryStringField="tourid" />
                </SelectParameters>
            </asp:SqlDataSource>

        </div>

        <div id="bottomspace"></div>
        <div class="line"><hr class="top" /></div>             

    </div>

    </form>

</body>
</html> 
```

CSS：

```
.bookgridview 
{
    float: left;
    width: 836px;
    border: 1px solid white; 
    padding: 0px 0px 0px 0px;
    font: 14px "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif;
    color: #FFFFFF;  
}

.bookgridview td {   
    padding: 2px;   
}

.bookgridview th {   
    padding: 2px;    
} 
```

敬茶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:44:35.107

我解剖了你的页面。见下图。

![在此处输入图像描述](../Images/cf69f190c0be207c1e98ee1db0044eda.png)

并在行数据绑定中执行魔术之后。您可以看到样式 bookgridview 是罪魁祸首。所以我们通过将 css 设置为空字符串来清除它。

![在此处输入图像描述](../Images/2402a6eb2267992ad83686ac39999d7a.png)

最终结果。您现在可以看到边框已删除。让我知道这是怎么回事。 ![在此处输入图像描述](../Images/5d405920b10ca66fdb1a3f2d3ff08d70.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:55:50.283

如果在空数据行中删除样式后丢失样式，请像这样将其添加回来。您不必在标记中删除它。

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            GridView bookingGridView = (GridView)sender;
            bookingGridView.CssClass = "bookgridview";

        }

        if (e.Row.RowType == DataControlRowType.EmptyDataRow)
        {
            GridView bookingGridView = (GridView)sender;

            bookingGridView.Attributes.Add("border", "0");
            bookingGridView.CssClass = "";

        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:52:19.200

我复制了您的问题并发现在网格视图的渲染 html 表上，它带有一个额外的边框 =“1” 属性添加到它。无论您如何尝试将样式设置为空数据行，它都会被覆盖通过这个父属性。我使用萤火虫工具和 Opera Dragon fly 发现了这一点。这两个工具都确认将添加这个讨厌的边框属性。

然后我以这种方式解决了这个问题

**标记**

```
 <EmptyDataTemplate>
        Ooops. No rows to display.
    </EmptyDataTemplate> 
```

**后面** 的代码在你的 gridview 行数据绑定事件中添加这些代码行，看看魔术

```
 Protected Sub TestGridView_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles TestGridView.RowDataBound
If e.Row.RowType = DataControlRowType.EmptyDataRow Then

      CType(sender,GridView).Attributes.Add("border","0")
      CType(sender,GridView).CssClass=""

 End If
 End Sub 
```

这在所有浏览器中都能完美运行。请参阅下面的示例！！！ ![查看结果](../Images/aa4bcc2788e39399bfb48558bc56c029.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-11T15:24:52.410

也许你可以试试这种方法。

## 添加到您的 css 文件

```
tr.empty-row, tr.empty-row td
{
  border: none;
} 
```

## 在您的网格视图中添加

```
<EmptyDataRowStyle CssClass="empty-row" /> 
```

如果它不起作用，请尝试将边框颜色设置为与背景相同。

# c# - 在 asp.net 中使用嵌套中继器

> ID：14124149
> 
> 赞同：1
> 
> 时间：2013-01-02T14:55:41.803
> 
> 标签：c#, javascript, asp.net, c#-4.0

我想用 asp.net 中继器做一个自定义菜单。我正在获取我的数据`SiteMap.RootNode.ChildNodes`，它是子节点。

ASP.NET：

```
<asp:Repeater runat="server" ID="rep1" OnItemDataBound="rpt1_ItemDataBound">
    <HeaderTemplate>
        <ul>
    </HeaderTemplate>
    <ItemTemplate>
        <li class="links">
            <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='<%# Eval("Url") %>' Text='<%# Eval("Title") %>'></asp:HyperLink>
        </li>
        <%--<asp:Repeater ID="rep2" runat="server">                                     
        </asp:Repeater>--%>
    </ItemTemplate>
    <FooterTemplate>
        </ul>
    </FooterTemplate>
</asp:Repeater> 
```

C＃

```
protected void Page_Load(object sender, EventArgs e)
{
      rep1.DataSource = SiteMap.RootNode.ChildNodes;
      rep1.DataBind();
}

protected void rpt1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
} 
```

这该怎么做？请帮我。

编辑 ：![在此处输入图像描述](../Images/7e7047ce3abd5109b7e4d4eb2ca8cc64.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:09:24.097

如果您只有两个层次结构级别，那么您已经完成了一半：使用`ItemDataBound`事件为内部中继器设置 DataSource：`((Repeater)FindControl('rep2')).DataSource = <proper data>;`

如果您有多个/未知的层次结构级别，唯一的方法是从后面的代码中创建它们。您可以使用 Panel 作为容器，动态创建转发器并将父级添加到面板中，例如：`Panel1.Controls.Add(rep1);`

# android - 从主机的eclipse构建并运行第二台机器的androidx86（在virtualbox中）

> ID：14124152
> 
> 赞同：3
> 
> 时间：2013-01-02T14:55:59.803
> 
> 标签：android, eclipse, virtualbox

我有两台电脑，第二台电脑在协同的帮助下用作第二台显示器

我对android编程很感兴趣。

由于 AVD 非常慢，我使用 AndroVM 作为从 eclipse 运行我的程序的一种方式

我的问题是我想在第一台机器的 Eclipse 中单击构建和运行，而不是在我的主机上的 AndroVM 中运行，我想在安装在第二台机器上的 AndroVM 上运行它，以便在协同作用的帮助下无缝访问。

有没有办法在虚拟盒子里设置？我是菜鸟，详细的解释会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:24:54.157

您可以通过 tcp/ip 实现这一点。

1.  使用此网络配置安装 X86 Android

![在此处输入图像描述](../Images/a6358ad8772a611355e865867e4a7240.png)

2.  给 Android 一个 IP 按：ALT + F1 类型：netcfg eth0 dhcp setprop net.dns1 8.8.8.8

3.  将 adb 与虚拟机 **./adb connect [上一步中的 ip] 连接**

看看我几个月前写的详细教程。 [http://standroid.blogspot.de/2012/06/android-4-x86-in-virtualbox.html](http://standroid.blogspot.de/2012/06/android-4-x86-in-virtualbox.html)

# mongodb - 锂中的 Mongo 查询

> ID：14124160
> 
> 赞同：1
> 
> 时间：2013-01-02T14:56:19.750
> 
> 标签：mongodb, lithium

```
 db.tickers.aggregate(
{ $project: 
    {_id: 0,
    year: {$year: '$date'},
    month: {$month: '$date'},
    day: {$dayOfMonth: '$date'},
    hour: {$hour: '$date'},
    avg: '$ticker.avg'     
    }
},
{ $group: { 
    _id: { year: '$year', month: '$month', day: '$day', hour: '$hour' },
    avg: { $avg: '$avg' }
    }
},
{ $sort: {
    'year':1, month:1, day:1, hour:1
    }
}
); 
```

你如何在 Lithium 中编写上述查询？

我试过了：

```
 $mongodb = Connections::get('default')->connection;
        $tick = Tickers::connection()->connection->command(array(
          'aggregate' => 'tickers',
          'pipeline' => array( 
                            '_id'=>null,
                            array('year' => array('$year' => '$date')),
                            array('month' => array('$month' => '$date')),                               
                            array('day' => array('$dayOfMonth' => '$date')),                                
                            array('hour' => array('$hour' => '$date')),                             
                            array('avg' => '$ticker.avg'),                              
                            ),
                            array( '$group' => array( '_id' => array(
                                    'year'=>'$year',
                                    'month'=>'$month',
                                    'day'=>'$day',
                                    'hour'=>'$hour'
                                    ),
                                'avg' => array('$avg' => '$ticker.avg'),  
                            ),
                            array('$sort'=>array(
                                'year'=>1,
                                'month'=>1,
                                'day'=>1,
                                'hour'=>1
                            ))
                        )
        )); 
```

这是对问题的回复，我有[mongodb：find summary of records](https://stackoverflow.com/questions/14120240/mongodb-find-summary-of-records)

find-summary of records 问题的答案是正确的，但我不能将它放在 Lithium 中。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:42:49.757

您忘记了`$project`对象的级别。试试这个：

```
 $tick = Tickers::connection()->connection->command(array(
      'aggregate' => 'tickers',
      'pipeline' => array( 
                        array( '$project' => array(
                            '_id' => 0,
                            'year' => array('$year' => '$date'),
                            'month' => array('$month' => '$date'),                               
                            'day' => array('$dayOfMonth' => '$date'),                                
                            'hour' => array('$hour' => '$date'),                             
                            'avg' => '$ticker.avg',                              
                        )),
                        array( '$group' => array( '_id' => array(
                                'year'=>'$year',
                                'month'=>'$month',
                                'day'=>'$day',
                                'hour'=>'$hour'
                                ),
                            'avg' => array('$avg' => '$ticker.avg'),  
                        )),
                        array('$sort'=>array(
                            'year'=>1,
                            'month'=>1,
                            'day'=>1,
                            'hour'=>1
                        ))
                    )
    )); 
```

# ruby - 从 RVM 切换到 rbenv 后服务器找不到 gem

> ID：14124162
> 
> 赞同：2
> 
> 时间：2013-01-02T14:56:21.137
> 
> 标签：ruby, rbenv

我有一个使用 RVM 时创建的应用程序。我切换到 rbenv 并不能让它工作。当我尝试运行服务器时，它说它找不到 formastic gem：

```
Could not find formtastic-2.2.1 in any of the sources
Try running `bundle install`. 
```

如果我运行`bundle install`，它表示我的包已完成，但未列出 formtastic。

但是，`bundle show formtastic`显示它已安装：

```
bundle show formtastic
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/formtastic-2.2.1 
```

但服务器找不到它：

```
Macintosh-2:$ rails s
Could not find formtastic-2.2.1 in any of the sources
Try running `bundle install`. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:17:17.637

除了运行`rvm implode`删除 RVM 的命令外，我还必须从主目录中删除 .rvm 目录，因为系统似乎正在那里寻找 gem：

```
rm -rf .rvm 
```

删除它后，我就可以启动服务器了。

# ios - 将子视图的子类添加到 UIView 的子类中

> ID：14124163
> 
> 赞同：0
> 
> 时间：2013-01-02T14:56:23.167
> 
> 标签：ios, objective-c, uiview

我正在尝试做一些非常基本的事情。我想向我的 UIView 子类添加一个子视图。我假设我会将它放在下面的 initWithFrame 方法中，但是作为此类实例的视图不会绘制此子视图。我究竟做错了什么？

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        redView = [[UIView alloc] initWithFrame:CGRectMake(10, 10, 20, 20)];
        [redView setBackgroundColor:[UIColor redColor]];
        [self addSubview:redView];
    }

    return self;
} 
```

BTW redView 是在子类的头部定义的一个属性，比如：

```
@property (strong, nonatomic) UIView *redView; 
```

谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:16:26.667

您应该将初始化代码放入：

```
- (id)initWithCoder:(NSCoder *)aDecoder { ... } 
```

或者

```
- (void)awakeFromNib { ... } 
```

当从 nib 加载视图时会调用这些方法。不要忘记在上述方法中调用 [super ...] 。

# amazon-web-services - EC2 弹性负载均衡器停止服务

> ID：14124166
> 
> 赞同：1
> 
> 时间：2013-01-02T14:56:31.167
> 
> 标签：amazon-web-services, amazon-ec2, load-balancing

当我直接从我的实例连接它时，我可以查看我的网页，但是当我尝试通过负载均衡器连接它时它不起作用。我的实例对负载均衡器似乎不健康。我尝试过以下健康检查规则： Ping 目标：HTTP:80/ Ping 目标：HTTP:80/index.php Ping 目标：HTTP:80/install.php

但结果是一样的。这里可能是什么问题..

亲切的问候...

# r - 如何以人类可读的格式显示数字？

> ID：14124167
> 
> 赞同：1
> 
> 时间：2013-01-02T14:56:31.367
> 
> 标签：r

> **可能重复：**
> [数字格式，写 1e-5 而不是 0.00001](https://stackoverflow.com/questions/3978266/number-format-writing-1e-5-instead-of-0-00001)
> [如何不将数字显示为指数？](https://stackoverflow.com/questions/7810001/how-to-not-display-number-as-exponent)

我正在使用 RStudio，但遇到了一个我找不到任何解决方案的问题：

当处理非常大的数字时，R 会以较短的格式显示这些数字。

但是在计算（例如）*(2000x1000x2000)*时，我真的很想看到*4000000000*而**不是** *4e+09*。我怎样才能改变这种行为？

# android - 没有剪辑的android ProgressBar？

> ID：14124171
> 
> 赞同：4
> 
> 时间：2013-01-02T14:56:57.373
> 
> 标签：android, progress-bar

任何默认的 ProgressBar 都有一个 ClipDrawable 级别，例如一个绿色的 Drawable 在我的设备上填充灰色背景，在其他一些上填充黄色。

![在此处输入图像描述](../Images/90d9a72d4e5cbe9f1f6f95fdd8ec865e.png)

我的问题：当进度小于最大值时，是否可以在没有这个（部分）空白背景的情况下创建 ProgressBar，或者我应该使用 ImageView 来代替？我只需要 ClipDrawable 来改变它的宽度，使它看起来像一个图表，而灰色背景永远不会出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:10:56.777

像这样创建`layer-list`drawable。

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item android:id="@android:id/background">
    <shape android:shape="rectangle" >
        <solid android:color="@android:color/transparent" />
    </shape>
</item>

<item android:id="@android:id/secondaryProgress">
    <clip>
        <shape>
            <gradient
                    android:startColor="#234"
                    android:centerColor="#234"
                    android:centerY="0.75"
                    android:endColor="#a24"
                    android:angle="270"
            />
        </shape>
    </clip>
</item>

<item android:id="@android:id/progress">
    <clip>
        <shape>
            <gradient
                android:startColor="#144281"
                android:centerColor="#0b1f3c"
                android:centerY="0.75"
                android:endColor="#06101d"
                android:angle="270"
            />
        </shape>
    </clip>
</item> 
```

重点是用`android:id="@android:id/background`用途做物品`@android:color/transparent`

然后将其设置`android:progressDrawable`为`ProgressBar`

```
<ProgressBar
    android:id="@+id/progressBar"
    android:progressDrawable="@drawable/your_layer_list_created_on_previous_step"
    android:layout_width="fill_parent"
    android:layout_height="8dp" 
    style="?android:attr/progressBarStyleHorizontal"
    android:indeterminateOnly="false" 
    android:max="100" /> 
```

# autocomplete - Flashdevelop - 禁用 txt 文件的自动完成功能

> ID：14124172
> 
> 赞同：2
> 
> 时间：2013-01-02T14:57:04.243
> 
> 标签：autocomplete, flashdevelop

我想`Text`在 FlashDevelop 4.2.2 中关闭编辑 txt 文件的自动完成功能（语法设置） - 我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:50:06.640

在**Settings** > **BasicCompletion** > **Disable Auto Completion**中，将值设置为`True`。

![Flashdevelop的截图](../Images/4032d27b26483243e14224321e54d8fb.png)

# .net - IIS 8 - FTP 隔离提供程序 - Microsoft.Web.Administration

> ID：14124173
> 
> 赞同：0
> 
> 时间：2013-01-02T14:57:08.213
> 
> 标签：.net, iis-8

我正在尝试将 Microsoft.Web.Administration 添加到我的 VS 项目中，如下所述： [http ://www.iis.net/learn/develop/developing-for-ftp/how-to-use-managed-code-c -创建一个简单的 ftp 身份验证提供程序](http://www.iis.net/learn/develop/developing-for-ftp/how-to-use-managed-code-c-to-create-a-simple-ftp-authentication-provider)

但是 Visual Studio 一直告诉我文件夹“C:\Program Files\Reference Assemblies\Microsoft\IIS”不存在。

有没有人有幸为 IIS 8 创建自定义 FTP 隔离提供程序？

非常感谢，阿迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:06:01.817

您必须使用添加/删除Windows功能，然后在FTP服务器下，在IIS下添加FTP服务器，以及其中的两个功能（可扩展性是其中之一）。然后你得到不存在的文件夹

# css - 表单 Div 高度随内容扩展

> ID：14124175
> 
> 赞同：3
> 
> 时间：2013-01-02T14:57:19.170
> 
> 标签：css, html, height

我有一个`div`具有以下 css 属性

```
#maindiv {
   padding: 0px 30px 15px 30px;
   background-color: #fff;
   border-radius: 4px 0 0 0;
   border: solid 2px #ccc;
   min-height: 500px;
   height: auto;
   width: 100%; 
} 
```

我在这个视图中有一个 webgrid。不幸的是，`#maindiv`并没有扩展以适应其内容（webgrid）。如何调整 div 的属性以始终扩展以覆盖其所有内容？

***编辑：***
我有两个内部 div 结构是

```
<div id="maindiv">
   <div class="container">
      <div id="inner1">
        <!-- my webgrid is contained here -->
      </div>
   <div id="inner2>
</div> 
```

其他css如下：

```
.container{
   height: 100%;
   width: 100%;
}

#inner1 {
   height: 100%;
   width: 700px;
   float: left;
   border: 2px solid #000;
}

#inner2 {
   height: 100%;
   width: 200px;
   float: right;
   margin-right: 90px;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T16:16:48.637

你不是在花车之后清理。浏览器认为浮动元素的高度为零，这就是为什么它们的父元素没有扩展以适应它们的原因。

要解决此问题，请在 #inner2 之后添加一个空 div`clear: both;`或将 clearfix 添加到 .container。后者的优点是不会用非语义标签弄乱你的 html，并且可以像这样实现。

```
.clearfix:after
{
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    height: 0;
    line-height: 0;  
} 
```

# android - 为什么某些 Eclipse Android 项目显示为灰色？

> ID：14124181
> 
> 赞同：2
> 
> 时间：2013-01-02T14:57:34.337
> 
> 标签：android, eclipse

![在此处输入图像描述](../Images/b318b4b3cf967935399469ab2b3ba07f.png)

有一些我无法导入到 Eclipse 中的 Android 项目是灰色的。我不知道为什么。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:07:28.030

这些项目已经存在于您的当前工​​作区中。检查它们。

如果您在 Eclipse 中没有找到它们，那么它们的根文件夹可能存在于 Workspace 文件夹中。您必须从 Windows 资源管理器中手动删除它们

# java - GWT RPC - 多个 RPC 服务

> ID：14124186
> 
> 赞同：2
> 
> 时间：2013-01-02T14:57:48.777
> 
> 标签：java, gwt, servlets, rpc

我遇到了将大型 RPC 服务拆分为较小块的问题。我在这里找到了基础知识[GWT RPC - Multiple RPC Services Per App](https://stackoverflow.com/questions/12533839/gwt-rpc-multiple-rpc-services-per-app)，但我正在努力实现。我在任何地方都找不到任何好的指南。我对以下部分感到困惑。（目标是将一个大型 RPC 拆分为两个较小的 RPC）

1.  我在模块 xml 文件中创建了一个 servlet 类

2.  在 web.xml 中，我创建了一个 servlet 和一个带有 2 个 servlet-url 的 servlet-mapping。第一个 servlet 是“主 servlet”，与模块 xml 文件中的相同。第二个是身份验证 servlet。

3.  我有两个 servlet 的同步和异步接口，以及两个 servlet 的服务器端实现。

4.  我使用 GWT.create() 在代码中创建 servlet。我可以毫无问题地调用“主 servlet”中的方法。但我不能在身份验证 servlet 中调用方法。当我尝试这个时，我收到以下错误：

> [错误] [项目] - 无法加载模块入口点类 com.projects.client.Project（有关详细信息，请参阅相关异常）

```
com.google.gwt.user.client.rpc.ServiceDefTarget$NoServiceEntryPointSpecifiedException: Service implementation URL not specified
at com.google.gwt.user.client.rpc.impl.RemoteServiceProxy.doPrepareRequestBuilderImpl(RemoteServiceProxy.java:430)
at com.google.gwt.user.client.rpc.impl.RemoteServiceProxy.doInvoke(RemoteServiceProxy.java:368)
at com.google.gwt.user.client.rpc.impl.RemoteServiceProxy$ServiceHelper.finish(RemoteServiceProxy.java:74)
at com.projects.client.AuthService_Proxy.signIn(AuthService_Proxy.java:44)
at com.projects.client.Authentication.signIn(Authentication.java:38)
at com.projects.client.Project.onModuleLoad(Project.java:53)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source) 
```

> 15：48：13.877 [错误] [项目] 无法从用户代理“Mozilla/5.0（Windows NT 6.1）AppleWebKit/537.11（KHTML，如 Gecko）Chrome/23.0.1271.97 Safari/537.11”在 127.0 加载模块“项目” .0.1:2588**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:13:20.607

从您的链接：

> > ```
> > I believe I'd have to make a new servlet for each one. 
> > ```
> 
> 不必要。

也就是说，是的，您可以只为所有接口使用一个 servlet，但这不是必需的。您当然可能只有一个实现所有给定接口的 servlet，但只要每个 RPC 接口都有一个`@RemoteServiceRelativePath`指向不同 URL`web.xml`的指向它的那个接口。

# c# - 我可以将基于接口的对象传递给 MVC 4 WebApi POST 吗？

> ID：14124189
> 
> 赞同：18
> 
> 时间：2013-01-02T14:58:22.750
> 
> 标签：c#, asp.net-mvc, post, interface, asp.net-web-api

我想要一个这样的API：

```
public class RelayController : ApiController
{
    // POST api/values
    public void Post([FromBody]IDataRelayPackage package)
    {
        MessageQueue queue = new MessageQueue(".\\private$\\DataRelay");
        queue.Send(package);
        queue.Close();
    }
} 
```

我得到了 'package' 的空值，所以我想知道可能出了什么问题。我唯一的想法是默认`JSON`序列化程序无法处理此问题，但我不清楚如何修复它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-03-09T06:36:56.817

您可以使用自定义模型绑定器轻松完成此操作。这对我有用。（使用 Web API 2 和 JSON.Net 6）

```
public class JsonPolyModelBinder : IModelBinder
{
    readonly JsonSerializerSettings settings = new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.Auto };

    public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
    {
        var content = actionContext.Request.Content;
        string json = content.ReadAsStringAsync().Result;
        var obj = JsonConvert.DeserializeObject(json, bindingContext.ModelType, settings);
        bindingContext.Model = obj;
        return true;
    }
} 
```

Web API 控制器如下所示。（注意：也应该适用于常规的 MVC 操作——我之前也为它们做过类似的事情。）

```
public class TestController : ApiController
{
    // POST api/test
    public void Post([ModelBinder(typeof(JsonPolyModelBinder))]ICommand command)
    {
        ...
    }
} 
```

我还应该注意，当您序列化 JSON 时，您应该使用相同的设置对其进行序列化，并将其序列化为接口以使 Auto 启动并包含类型提示。像这样的东西。

```
 JsonSerializerSettings settings = new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.Auto };
    string json = JsonConvert.SerializeObject(command, typeof(ICommand), settings); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T15:08:52.773

您正在尝试反序列化到接口。除非被告知，否则序列化程序不会知道要实例化什么类型。

看一下 TypeNameHandling 选项[Posting a collection of subclasses](https://stackoverflow.com/questions/12858748/asp-net-webapi-posting-collection-of-subclasses)

或者看看创建一个自定义的 JsonConverter。看看这个问题[如何在 JSON.NET 中实现自定义 JsonConverter 以反序列化基类对象的列表？](https://stackoverflow.com/questions/8030538/how-to-implement-custom-jsonconverter-in-json-net-to-deserialize-a-list-of-base)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T15:31:11.013

Json.NET（ASP.NET Web API 的默认 Json 序列化程序）可以处理这种情况。您需要做的就是更改序列化程序设置，并将 TypeNameHandling 设置为 All（或 Objects）。这将为您的 json 添加一个“$type”-json 属性，其中包含您的实例的类型名称。另一方面，它会尝试再次反序列化为这种类型。

我们自己使用它，将抽象基类作为类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T15:09:16.870

序列化程序需要一种可以构造的类型，一种具有空（默认）构造函数的类型。由于无法构造接口，因此序列化失败并且您得到一个空值。

两种选择：

1.  使用带有默认构造函数的 POCO（普通旧 Clr 对象）
2.  [使用 IActionValueBinder 实现您自己的活页夹](http://blogs.msdn.com/b/jmstall/archive/2012/04/18/mvc-style-parameter-binding-for-webapi.aspx)

# linux - 是否可以结合使用tail和grep？

> ID：14124190
> 
> 赞同：7
> 
> 时间：2013-01-02T14:58:28.510
> 
> 标签：linux, grep, pipeline, tail

我正在尝试在生产日志中跟踪用户。

是否可以使用

```
tail -f grep "username" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T15:00:06.683

是的 - 你使用管道。IE

```
tail -f <some filename> | grep 'username' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T15:04:12.143

是的，您可以只使用管道

尾 -f 文件名 | grep 用户名

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-19T06:08:08.097

该`ack`命令是一个类似 grep 的文本查找器，具有`--passthru`专门为此设计的标志。

由于`ack`自动为您匹配颜色代码，您可以使用它来搜索有尾日志文件的输出，并突出显示匹配项，但*也可以*查看不匹配的行。

```
tail -f error.log | ack --passthru whatever 
```

带尾日志的所有行都会显示出来，但匹配项会突出显示。

ack 位于[http://beyondgrep.com/](http://beyondgrep.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-19T05:46:34.767

事实上，我发现使用它更有效： grep username filename | 尾巴

# python - 列表列表中的项目索引（Python）

> ID：14124203
> 
> 赞同：4
> 
> 时间：2013-01-02T14:59:58.703
> 
> 标签：python, list, python-2.7

我正在尝试在以下列表列表中查找字母的索引：

例如：

```
>>> alphabet = [[["A","B","C"],["D","E","F"],["G","H","I"]],[["J","K","L"],["M","N","O"],["P","Q","R"]],[["S","T","U"],["V","W","X"],["Y","Z","_"]]]
>>> find("H",alphabet)
(0,2,1) 
```

这样做的最 Pythonic 方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T15:20:55.310

如果您真的想要一个解决方案来解决这个问题，那么这就是您正在寻找的东西（作为一个简单的递归函数）：

```
def find_recursive(needle, haystack):
    for index, item in enumerate(haystack):
        if not isinstance(item, str):
            try:
                path = find_recursive(needle, item)
                if path is not None:
                    return (index, ) + path
            except TypeError:
                pass
        if needle == item:
            return index,
    return None 
```

编辑：刚刚记住，在 2.x 中，您也希望`basestring`允许使用 unicode 字符串 - 此解决方案适用于 3.x 用户。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T15:12:33.140

您可以简单地更改数据结构并使用`dict`：

```
>>> import itertools
>>> import string
>>> lets = string.ascii_uppercase
>>> where = dict(zip(lets, itertools.product(range(3), repeat=3)))
>>> where
{'A': (0, 0, 0), 'C': (0, 0, 2), 'B': (0, 0, 1), 'E': (0, 1, 1), 'D': (0, 1, 0), 'G': (0, 2, 0), 'F': (0, 1, 2), 'I': (0, 2, 2), 'H': (0, 2, 1), 'K': (1, 0, 1), 'J': (1, 0, 0), 'M': (1, 1, 0), 'L': (1, 0, 2), 'O': (1, 1, 2), 'N': (1, 1, 1), 'Q': (1, 2, 1), 'P': (1, 2, 0), 'S': (2, 0, 0), 'R': (1, 2, 2), 'U': (2, 0, 2), 'T': (2, 0, 1), 'W': (2, 1, 1), 'V': (2, 1, 0), 'Y': (2, 2, 0), 'X': (2, 1, 2), 'Z': (2, 2, 1)}
>>> where["H"]
(0, 2, 1) 
```

但请注意，我不会将`U`to pad 的位置加倍，所以

```
>>> where["U"]
(2, 0, 2) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T15:10:23.057

```
In [9]: def find(val,lis):
        ind=[(j,i,k) for j,x in enumerate(lis) for i,y in enumerate(x) \
                                             for k,z in enumerate(y) if z==val]
        return ind[0] if ind else None
   ...: 

In [10]: find("H",alphabet)
Out[10]: (0, 2, 1)

In [14]: find("M",alphabet)
Out[14]: (1, 1, 0) 
```

# node.js - 在 node.js 中的网页上显示变量的内容

> ID：14124204
> 
> 赞同：1
> 
> 时间：2013-01-02T14:59:59.403
> 
> 标签：node.js, express, var, node-serialport

我有一个代码如下：

```
app.get('/list', function(req, res) {
    serialport.list(function (err, ports) {
        ports.forEach(function(port) {
            var temp = port.manufacturer;
            console.log(temp);
            res.send(temp);
        });
    });
}); 
```

可以看出，`port.manufacturer`值被保存到变量 temp 中，并且 temp 的结果内容显示在控制台上。

当我运行上面的代码时，我在控制台上得到了这样的东西：

```
Listening on port 3000...
Tinkerforge GmbH
GET /list 200 219ms - 16
Arduino (www.arduino.cc)
GET /favicon.ico 404 4ms 
```

但是当我调用 api 时`http://localhost:3000/list`，

仅显示 Tinkerforge GnbH，而不显示 Arduino。

有什么我在这里想念的吗？

我必须将列表保存在数组中吗？

任何帮助将非常感激。

提前非常感谢。顺便说一句，我在 node.js 和 javascript 中都是初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:12:19.367

这里的问题是`.send`，与 不同`.write`，只能调用一次。调用时，Express 将分析数据并检测正确的标头 (res.writeHead) 以在写入 (res.write) 到套接字之前发送，最后关闭连接 (res.close)。

解决方案是一次性使用`.write`或发送所有数据。

**使用 .write**

```
app.get('/list', function(req, res) {
    serialport.list(function (err, ports) {
        ports.forEach(function(port) {
            var temp = port.manufacturer;
            res.write(temp);
        });
        res.send();
    });
}); 
```

**使用 .send**

```
app.get('/list', function(req, res) {
    serialport.list(function (err, ports) {
        var manufacturers = [];
        ports.forEach(function (port) {
            manufacturers.push(port.manufacturer);
        });
        res.send(manufacturers.join(" "));
    });
}); 
```

我可能会使用类似的东西`JSON.stringify(manufacturers)`而不是 using `.join`，因为 JSON 很容易使用。

# java - JAVA Regex 删除 html 标记和内容

> ID：14124207
> 
> 赞同：0
> 
> 时间：2013-01-02T15:00:16.187
> 
> 标签：java, html, regex

> **可能重复：**
> [如何删除 Java](https://stackoverflow.com/questions/1699313/how-to-remove-html-tag-in-java)
> [RegEx 中的 HTML 标记匹配打开的标记，XHTML 自包含标记除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

我想删除特定的 HTML 标记及其内容。

例如，如果 html 是：

```
<span style='font-family:Verdana;mso-bidi-font-family:
"Times New Roman";display:none;mso-hide:all'>contents</span> 
```

如果标签包含“mso-*”，则必须删除整个标签（开始、结束和内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:19:44.313

正如[Dave Newton](https://stackoverflow.com/users/438992/dave-newton)在他的评论中指出的那样，html 解析器是这里的方法。如果您真的想以艰难的方式做到这一点，那么这里有一个有效的正则表达式：

```
 String html = "FOO<span style='font-family:Verdana;mso-bidi-font-family:"
        + "\"Times New Roman\";display:none;mso-hide:all'>contents</span>BAR";
    // regex matches every opening tag that contains 'mso-' in an attribute name
    // or value, the contents and the corresponding closing tag
    String regex = "<(\\S+)[^>]+?mso-[^>]*>.*?</\\1>";
    String replacement = "";
    System.out.println(html.replaceAll(regex, replacement)); // prints FOOBAR 
```

# reporting-services - 如何在 SSRS 2008 R2 中为 tablix 创建浮雕效果

> ID：14124210
> 
> 赞同：1
> 
> 时间：2013-01-02T15:00:48.940
> 
> 标签：reporting-services, ssrs-2008, ssrs-tablix

有什么方法可以为 tablix 创建浮雕效果，或者在 SSRS 2008 R2 中为 tablix 创建任何其他“酷”效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:27:50.013

Emboss 不适用于 SSRS 的开箱即用选项。如果你真的需要那种效果，你可以通过在表格中放置矩形来模拟它，然后在其中放置一个文本框。然后，您可以为文本框的不同侧面着色不同的颜色。

我个人会避免看起来像浮雕的东西。我认为它们通常看起来很糟糕，尤其是在打印时。如果你想看起来很酷，并在 SSRS 中保持简单，我建议这些东西朝着更“地铁”的方向发展。

**使用颜色**
跨多个报告为项目选择并使用一致的调色板。如果您不是设计师类型，请访问公司网站，并在那里取样一些颜色。

通常，您可以找到：

*   用于标题文本的深色
*   副标题颜色较浅
*   用于偶尔强调的中等颜色，例如标题后面或标题下方的一行
*   一种更浅的颜色（用于网站的侧边栏），您可以将其设置为表格标题的背景。

**注意类型**
对报告的所有部分使用相同的字体。您可能会为标题使用不同的字体而侥幸，但通常看起来会很糟糕。根据需要使用斜体和粗体。*斜体字*应用于附带数据的详细信息，这不是报告的重点。**粗体**应用于标题、子标题和关键数据元素，尤其是当数据超过一行时。

**一致的间距**
彼此大小接近的报表元素的大小应该完全相同。这意味着您将无法塞入尽可能多的数据，但该报告将更加令人愉快和专业。我尝试使用半英寸或 0.75 英寸的网格，并将所有内容都设为该尺寸的倍数。BIDS 并不真正支持这一点，因此这可能涉及一些尺寸的输入。

如果有图形，尽可能将它们与网格对齐。

如果您想认真对待这一点，请开始阅读[Edward Tufte](http://www.edwardtufte.com/tufte/)的书籍。尤其[是量化信息的可视化展示](https://rads.stackoverflow.com/amzn/click/com/0961392142)通常被认为是信息设计的经典。

以这种“少即是多”的态度开发的报告将比充满干扰的报告（即 Chart Junk）看起来更新鲜和可用。

# ruby-on-rails-3 - 删除基于多列的重复记录？

> ID：14124212
> 
> 赞同：80
> 
> 时间：2013-01-02T15:00:56.463
> 
> 标签：ruby-on-rails-3, activerecord, duplicates, destroy

我正在使用 Heroku 来托管我的 Ruby on Rails 应用程序，出于某种原因，我可能有一些重复的行。

有没有办法根据 2 个或更多条件删除重复记录，但只保留该重复集合的 1 条记录？

在我的用例中，我的数据库中有汽车的品牌和型号关系。

```
Make      Model
---       ---
Name      Name
          Year
          Trim
          MakeId 
```

我想删除所有具有相同名称、年份和修剪但保留其中 1 条记录的模型记录（意思是，我需要该记录但只需要一次）。我正在使用 Heroku 控制台，所以我可以轻松地运行一些活动记录查询。

有什么建议么？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-01-02T15:15:47.277

```
class Model

  def self.dedupe
    # find all models and group them on keys which should be common
    grouped = all.group_by{|model| [model.name,model.year,model.trim,model.make_id] }
    grouped.values.each do |duplicates|
      # the first one we want to keep right?
      first_one = duplicates.shift # or pop for last one
      # if there are any more left, they are duplicates
      # so delete all of them
      duplicates.each{|double| double.destroy} # duplicates can now be destroyed
    end
  end

end

Model.dedupe 
```

*   找到所有
*   将它们分组到您需要唯一性的键上
*   循环分组模型的哈希值
*   删除第一个值，因为您想保留一个副本
*   删除其余的

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-08-06T09:11:33.643

如果您的用户表数据如下

```
User.all =>
[
    #<User id: 15, name: "a", email: "a@gmail.com", created_at: "2013-08-06 08:57:09", updated_at: "2013-08-06 08:57:09">, 
    #<User id: 16, name: "a1", email: "a@gmail.com", created_at: "2013-08-06 08:57:20", updated_at: "2013-08-06 08:57:20">, 
    #<User id: 17, name: "b", email: "b@gmail.com", created_at: "2013-08-06 08:57:28", updated_at: "2013-08-06 08:57:28">, 
    #<User id: 18, name: "b1", email: "b1@gmail.com", created_at: "2013-08-06 08:57:35", updated_at: "2013-08-06 08:57:35">, 
    #<User id: 19, name: "b11", email: "b1@gmail.com", created_at: "2013-08-06 09:01:30", updated_at: "2013-08-06 09:01:30">, 
    #<User id: 20, name: "b11", email: "b1@gmail.com", created_at: "2013-08-06 09:07:58", updated_at: "2013-08-06 09:07:58">] 
1.9.2p290 :099 > 
```

电子邮件 ID 是重复的，因此我们的目标是从用户表中删除所有重复的电子邮件 ID。

**步骤1：**

获取所有不同的电子邮件记录 ID。

```
ids = User.select("MIN(id) as id").group(:email,:name).collect(&:id)
=> [15, 16, 18, 19, 17] 
```

**第2步：**

从具有不同电子邮件记录 ID 的用户表中删除重复的 ID。

现在 ids 数组包含以下 id。

```
[15, 16, 18, 19, 17]
User.where("id NOT IN (?)",ids)  # To get all duplicate records
User.where("id NOT IN (?)",ids).destroy_all 
```

** 导轨 4 **

ActiveRecord 4 引入了`.not`允许您在步骤 2 中编写以下内容的方法：

```
User.where.not(id: ids).destroy_all 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-01-12T07:41:56.993

类似于@Aditya Sanghi 的答案，但这种方式会更高效，因为您只选择重复项，而不是将每个模型对象加载到内存中然后遍历所有对象。

```
# returns only duplicates in the form of [[name1, year1, trim1], [name2, year2, trim2],...]
duplicate_row_values = Model.select('name, year, trim, count(*)').group('name, year, trim').having('count(*) > 1').pluck(:name, :year, :trim)

# load the duplicates and order however you wantm and then destroy all but one
duplicate_row_values.each do |name, year, trim|
  Model.where(name: name, year: year, trim: trim).order(id: :desc)[1..-1].map(&:destroy)
end 
```

此外，如果您真的不想在此表中重复数据，您可能希望向表中添加一个多列唯一索引，类似于：

```
add_index :models, [:name, :year, :trim], unique: true, name: 'index_unique_models' 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-04-06T17:33:51.450

您可以尝试以下方法：（基于以前的答案）

```
ids = Model.group('name, year, trim').pluck('MIN(id)') 
```

获取所有有效记录。接着：

```
Model.where.not(id: ids).destroy_all 
```

删除不需要的记录。当然，您可以进行为三列添加唯一索引的迁移，以便在数据库级别强制执行：

```
add_index :models, [:name, :year, :trim], unique: true 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-22T14:25:23.123

为了在迁移中运行它，我最终做了以下事情（基于@aditya-sanghi[上面的答案）](https://stackoverflow.com/a/14124391/2667984)

```
class AddUniqueIndexToXYZ < ActiveRecord::Migration
  def change
    # delete duplicates
    dedupe(XYZ, 'name', 'type')

    add_index :xyz, [:name, :type], unique: true
  end

  def dedupe(model, *key_attrs)
    model.select(key_attrs).group(key_attrs).having('count(*) > 1').each { |duplicates|
      dup_rows = model.where(duplicates.attributes.slice(key_attrs)).to_a
      # the first one we want to keep right?
      dup_rows.shift

      dup_rows.each{ |double| double.destroy } # duplicates can now be destroyed
    }
  end
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-20T11:34:23.083

基于[@aditya-sanghi 的回答](https://stackoverflow.com/a/14124391/311657)，使用 SQL 找到重复项的更有效方法。

将此添加到您`ApplicationRecord`的以便能够对任何模型进行重复数据删除：

```
class ApplicationRecord < ActiveRecord::Base
  # …

  def self.destroy_duplicates_by(*columns)
    groups = select(columns).group(columns).having(Arel.star.count.gt(1))
    groups.each do |duplicates|
      records = where(duplicates.attributes.symbolize_keys.slice(*columns))
      records.offset(1).destroy_all
    end
  end
end 
```

然后，您可以调用`destroy_duplicates_by`以销毁对于给定列具有相同值的所有记录（第一条除外）。例如：

```
Model.destroy_duplicates_by(:name, :year, :trim, :make_id) 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2015-06-01T07:41:01.597

您可以尝试此 sql 查询，以删除所有重复记录但最新记录

```
DELETE FROM users USING users user WHERE (users.name = user.name AND users.year = user.year AND users.trim = user.trim AND users.id < user.id); 
```

# php - 如何拥有没有 .html、.php 或 .asp 扩展名的网页？

> ID：14124216
> 
> 赞同：1
> 
> 时间：2013-01-02T15:01:37.160
> 
> 标签：php, html, url

我知道为什么像 youtube、stackoverflow 这样的大型网站在他们的网站上使用这些无扩展文件系统。

我想知道如何在我的网站上做同样的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T15:03:33.123

这与文件系统无关，而是与您看到的 URL 有关。

一个简单的解决方案是使用 .htaccess 将不带扩展名的 URL 映射到您的 PHP 文件。

从[这个在线教程](http://www.google.com/url?sa=t&rct=j&q=htaccess%20remove%20extension&source=web&cd=1&ved=0CDQQFjAA&url=http://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/&ei=IEzkUOT9GKmg0QWD74G4BA&usg=AFQjCNFUW2MyFZs6W5GRmQOFyDF2-QHWpA&bvm=bv.1355534169,d.d2k&cad=rja)：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:03:25.430

您可以通过重写 URL 来实现它，例如使用 Apache 的[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T15:04:12.437

mod_rewrite 重写规则生成器将获取给它的动态 url，并生成正确的语法以放置在 .htaccess 文件中，以允许以可抓取的格式重写 url。apache 模块“mod_rewrite”（您需要启用它）将某种格式的 url 转换为另一种格式，并且在帮助对具有动态内容的站点进行索引方面非常有用。

```
Syntax: RewriteRule url-pattern url-new [[flag,...]]
Example: RewriteRule ^/foo/(.*)$ /bar/$1 [R,L] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T15:05:34.983

对于 apache 服务器，您可以使用具有重写功能的 .htaccess 文件。 [SEO 友好的 URL (.htaccess)](https://stackoverflow.com/questions/4504169/seo-friendly-urls-htaccess) 您可以找到许多 ModRewrite 教程。

# c++ - 预构建代码块中的 .rc 到 .o 转换，访问文件的权限被拒绝

> ID：14124221
> 
> 赞同：1
> 
> 时间：2013-01-02T15:01:45.557
> 
> 标签：c++, winapi, codeblocks, pre-build-event

我是一个新手，一直在尝试在 CodeBlocks 中使用 C++ 进行一些 winapi 编码。我正在努力向 exe 文件添加图标。在创建 .rc 文件和它的头文件之后

```
#include <windows.h>
#include <commctrl.h>
#include <richedit.h>
#include "resource.h"

LANGUAGE 0, SUBLANG_NEUTRAL
IDI_ICON1          ICON           "C:\\Users\\Stanislaw\\Desktop\\WIN32api + other    Win development\\programujte.com_3_resource\\grafika"

resource.h header: 
#ifndef IDC_STATIC
#define IDC_STATIC (-1)
#endif

#define IDI_ICON1                               100 
```

那么编译器需要 .rc 到 .o 的转换

然后使用 Cobeblocks 项目/构建选项/预构建：

```
windres 3_icon.rc 3_icon.o 
```

它没有通过预构建中的windres。我收到“权限被拒绝”说我无法访问 .ico 文件。

```
Running target pre-build steps
windres 3_icon.rc 3_icon.o
windres: can't open icon file `C:\Users\Stanislaw\Desktop\WIN32api + other Win   development\programujte.com_3_resource\grafika': Permission denied 
```

我在 Win Vista 32 位上使用 CodeBlocks 10.05。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:45:14.310

The reference to an `ICON` resource [needs to specify a file](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381018%28v=vs.85%29.aspx). It looks like you're pointing at a directory instead of a file.

You will get `Permission Denied` error messages when trying to 'open a directory as a file'

# spring - Spring BeanCreationException：无法解析对 bean 异常的引用

> ID：14124228
> 
> 赞同：4
> 
> 时间：2013-01-02T15:02:39.783
> 
> 标签：spring

我正在以下网站尝试示例应用程序：

[JSF 2、PrimeFaces 3、Spring 3 和 Hibernate 4 集成项目](http://www.javacodegeeks.com/2012/04/jsf-2-primefaces-3-spring-3-hibernate-4.html)

但我发现在运行项目时，我得到：

> 严重：向类 org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.BeanCreationException 的侦听器实例发送上下文初始化事件的异常：在 ServletContext 资源 [/WEB-INF/applicationContext .xml]：在设置 bean 属性 'userDAO' 时无法解析对 bean 'UserDAO' 的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中定义名称为“UserDAO”的 bean 创建错误

但是，在applicationContext.xml文件中，相关代码如下：

```
<!-- Beans Declaration -->
<bean id="User" class="com.otv.model.User"/>

<!-- User Service Declaration -->
<bean id="UserService" class="com.otv.user.service.UserService">
  <property name="userDAO" ref="UserDAO" />
</bean>

<!-- User DAO Declaration -->
<bean id="UserDAO" class="com.otv.user.dao.UserDAO">
 <property name="sessionFactory" ref="SessionFactory" />
</bean>

<!-- Session Factory Declaration -->
<bean id="SessionFactory"    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
 <property name="dataSource" ref="DataSource" />
 <property name="annotatedClasses">
  <list>
   <value>com.otv.model.User</value>
 </list>
</property>
<property name="hibernateProperties">
 <props>
  <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
  <prop key="hibernate.show_sql">true</prop>
 </props> 
```

这些类确实存在于相关包中，如下所示以及各种配置文件的位置。

![在此处输入图像描述](../Images/70e3dc40e6e07dac4bdd9fcf48b5c960.png)

我可以看到本教程和我的实现之间的唯一区别是我使用的是 NetBeans 7.2 而不是 Eclipse。

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:07:28.667

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'UserService' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'UserDAO' while setting bean property 'userDAO'; 
```

这告诉您无法创建 UserService，因为它缺少属性定义

```
 nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'UserDAO' defined in ServletContext resource [/WEB-INF/applicationContext.xml] 
```

这告诉您找不到 UserDAO 的定义。

您缺少 UserDao 定义， ref 只是意味着它应该是那种类型，它仍然需要一个 bean 定义。

基本上，每当您使用“ref”时，您就是在告诉 spring 创建该类型的属性。该类型需要在其自己的 bean 定义中定义。

因此，如果 UserDao 使用另一个由“ref”定义的其他属性，则该属性也需要自己的 bean 定义。

您必须将类和弹簧定义视为两个完全独立的实体。这些类可能存在并放置在它们应该放置的位置，但是 spring 需要它的 bean 定义才能调用它们。它不知道 UserDao 或 SessionFactory 是什么，除非您明确告诉它要调用哪个包/类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:16:03.447

`/WEB-INF/applicationContext.xml`应该包含一个条目，`<bean id="UserDAO" class="com.otv.dao.UserDAO">...</bean>`其属性在很大程度上取决于所使用的后端系统。

我还怀疑`User`bean 是一个错误的副本并且已经过去，因为`User`实例应该从 DAO 中检索或以编程方式创建。

至于为什么它在 Eclipse 中而不在 Netbeans 中起作用，这太奇怪了。一定是有什么乱七八糟的...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T15:43:06.803

我找到了该错误的主要原因。其实很简单。

在类中，字段上方`com.otv.model.User`没有注释。`@Id``id`

这是导致我找到错误的答案的链接：[休眠异常：org.hibernate.AnnotationException：没有为实体指定标识符：com..domain.idea.MAE_MFEView](https://stackoverflow.com/questions/4381290/hibernate-exception-org-hibernate-annotationexception-no-identifier-specified)

# rabbitmq - 绑定一个rabbitmq服务

> ID：14124230
> 
> 赞同：2
> 
> 时间：2013-01-02T15:02:47.897
> 
> 标签：rabbitmq, cloud-foundry, vmc

使用 vmc，我将我的 java 应用程序推送到 cloudfoundry 中，并创建了一个绑定到该应用程序的 rabbitmq 服务，我已经测试了两三个这样的应用程序，并且一切都很好，但是从几天开始，我在将 rabbitmq 服务绑定到这两个应用程序时遇到了问题一个现有的应用程序也不是一个新的应用程序，我收到了这条消息：

```
user@user-System-I7:~$ vmc bind-service rabbitmq-broker myApp
NoMethodError: undefined method `service_by_name' for #<CFoundry::V1::Client:0x7f417344f4b0>
For more information, see ~/.vmc/crash 
```

当我输入： user@user-System-I7:~$more ~/.vmc/crash 我得到

```
Time of crash:
Wed Jan 02 15:06:31 +0100 2013

NoMethodError: undefined method `service_by_name' for #<CFoundry::V1::Client:0x7f417344f4b0>

vmc-0.4.7/lib/vmc/cli.rb:406:in `send'
vmc-0.4.7/lib/vmc/cli.rb:406:in `by_name'
mothership-0.3.5/lib/mothership/inputs.rb:150:in `instance_exec'
mothership-0.3.5/lib/mothership/inputs.rb:150:in `convert_given'
mothership-0.3.5/lib/mothership/inputs.rb:113:in `get'
mothership-0.3.5/lib/mothership/inputs.rb:69:in `[]'
vmc-0.4.7/lib/vmc/cli/service/bind.rb:15:in `bind_service'
mothership-0.3.5/lib/mothership/base.rb:61:in `send'
mothership-0.3.5/lib/mothership/base.rb:61:in `run'
mothership-0.3.5/lib/mothership/command.rb:68:in `invoke'
mothership-0.3.5/lib/mothership/command.rb:82:in `instance_exec'
mothership-0.3.5/lib/mothership/command.rb:82:in `invoke'
mothership-0.3.5/lib/mothership/base.rb:50:in `execute'
vmc-0.4.7/lib/vmc/cli.rb:106:in `execute'
mothership-0.3.5/lib/mothership.rb:45:in `start'
vmc-0.4.7/bin/vmc:11
1.8/bin/vmc:19:in `load'
1.8/bin/vmc:19 
```

请帮忙 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:51:49.907

我有[同样的问题](https://cloudfoundry.atlassian.net/browse/CF-216)。这似乎有点神秘，但我通过将 vmc 降级到 0.4.4 来解决它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T08:14:36.893

我在绑定 mongodb 服务时遇到了同样的问题，我通过使用解决了它

```
vmc bind-service 
```

# javascript - Highcharts 显示在多个具有相同名称的 div 中

> ID：14124233
> 
> 赞同：2
> 
> 时间：2013-01-02T15:03:03.060
> 
> 标签：javascript, jquery, jquery-mobile, highcharts

我每个函数都有问题，我想在不同的div中加载一个具有相同名称的highcharts，并使用ajax函数重新加载。

我正在阅读以这种方式加载图表的旧帖子：

```
$('.portlet_content_18').each(function(){
var chart = new Highcharts.Chart({
    chart: {
        renderTo: this,
        height: 400
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },

    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
    }]
});
})); 
```

对我有用的东西，但当我更改为 ajax 调用时就不行了。

我的代码使用 ajax 调用，只加载名为“graphcontainer”的第一个 div 是下一个：

```
function graph() {
    $(function () {

        $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function (data) {
            // Create the chart
            window.chart = new Highcharts.StockChart({
                chart: {
                    renderTo: 'graphcontainer'
                },
                rangeSelector: {
                    selected: 1
                },

                title: {
                    text: 'AAPL Stock Price'
                },

                series: [{
                    name: 'AAPL',
                    data: data,
                    tooltip: {
                        valueDecimals: 2
                    }
                }]
            });
        });
    });
} 
```

我尝试添加每个函数，以便它加载到其他 div 中而没有结果。希望您能够帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:30:24.830

根据 HighChart [API](http://api.highcharts.com/highcharts#chart.renderTo)和 HighStock [API](http://api.highcharts.com/highstock#chart.renderTo)：

```
renderTo: String|Object
The HTML element where the chart will be rendered. 
If it is a string, the element by that id is used. 
The HTML element can also be passed by direct reference. Defaults to null. 
```

首先，Highchart 需要传递`"id"`div 元素。因此，我怀疑传递类名如何与您提到的第一个示例一起使用。

你能分享你从哪里得到前`HighChart`一个例子吗？

其次，你有一个包含`id="graphcontainer"`和包含`Highstock`的div

```
<script src="http://code.highcharts.com/stock/highstock.js"></script> 
```

# ruby - 如何在“vagrant up”上传递参数并将其置于 Vagrantfile 的范围内？

> ID：14124234
> 
> 赞同：88
> 
> 时间：2013-01-02T15:03:04.243
> 
> 标签：ruby, command-line, vagrant, parameter-passing

我正在寻找一种将参数传递给 Chef 食谱的方法，例如：

```
$ vagrant up some_parameter 
```

然后`some_parameter`在其中一本厨师食谱中使用。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-01-02T15:10:23.243

您不能将任何参数传递给 vagrant。唯一的方法是使用环境变量

```
MY_VAR='my value' vagrant up 
```

并`ENV['MY_VAR']`在食谱中使用。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2015-06-26T09:48:39.693

您还可以包含允许您解析命令行选项的*GetoptLong Ruby 库。*

**流浪文件**

```
require 'getoptlong'

opts = GetoptLong.new(
  [ '--custom-option', GetoptLong::OPTIONAL_ARGUMENT ]
)

customParameter=''

opts.each do |opt, arg|
  case opt
    when '--custom-option'
      customParameter=arg
  end
end

Vagrant.configure("2") do |config|
             ...
    config.vm.provision :shell do |s|
        s.args = "#{customParameter}"
    end
end 
```

然后，您可以运行：

```
$ vagrant --custom-option=option up
$ vagrant --custom-option=option provision 
```

^(注意：确保在 vagrant 命令**之前**指定自定义选项，以避免无效选项验证错误。)

更多关于图书馆的信息在[这里](http://ruby-doc.org/stdlib-2.1.0/libdoc/getoptlong/rdoc/GetoptLong.html)。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-11-17T22:33:11.280

可以从 ARGV 读取变量，然后在进入配置阶段之前从中删除它们。修改 ARGV 感觉很恶心，但我找不到任何其他命令行选项的方法。

### 流浪文件

```
# Parse options
options = {}
options[:port_guest] = ARGV[1] || 8080
options[:port_host] = ARGV[2] || 8080
options[:port_guest] = Integer(options[:port_guest])
options[:port_host] = Integer(options[:port_host])

ARGV.delete_at(1)
ARGV.delete_at(1)

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  # Create a forwarded port mapping for web server
  config.vm.network :forwarded_port, guest: options[:port_guest], host: options[:port_host]

  # Run shell provisioner
  config.vm.provision :shell, :path => "provision.sh", :args => "-g" + options[:port_guest].to_s + " -h" + options[:port_host].to_s 
```

### 提供.sh

```
port_guest=8080
port_host=8080

while getopts ":g:h:" opt; do
    case "$opt" in
        g)
            port_guest="$OPTARG" ;;
        h)
            port_host="$OPTARG" ;;
    esac
done 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-03-02T20:41:40.040

@benjamin-gauthier 的 GetoptLong 解决方案非常简洁，非常适合 ruby​​ 和 vagrant 范例。

然而，它需要额外的一行来修复对 vagrant 参数的干净处理，例如`vagrant destroy -f`.

```
require 'getoptlong'

opts = GetoptLong.new(
  [ '--custom-option', GetoptLong::OPTIONAL_ARGUMENT ]
)

customParameter=''

opts.ordering=(GetoptLong::REQUIRE_ORDER)   ### this line.

opts.each do |opt, arg|
  case opt
    when '--custom-option'
      customParameter=arg
  end
end 
```

这允许此代码块在处理自定义选项时暂停。所以现在， `vagrant --custom-option up --provision` 还是 `vagrant destroy -f` 被干净利落地处理了。

希望这可以帮助，

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-28T10:06:20.560

```
Vagrant.configure("2") do |config|

    class Username
        def to_s
            print "Virtual machine needs you proxy user and password.\n"
            print "Username: " 
            STDIN.gets.chomp
        end
    end

    class Password
        def to_s
            begin
            system 'stty -echo'
            print "Password: "
            pass = URI.escape(STDIN.gets.chomp)
            ensure
            system 'stty echo'
            end
            pass
        end
    end

    config.vm.provision "shell", env: {"USERNAME" => Username.new, "PASSWORD" => Password.new}, inline: <<-SHELL
        echo username: $USERNAME
        echo password: $PASSWORD
SHELL
    end
end 
```

# ruby - be_true rspec 未找到名称错误

> ID：14124241
> 
> 赞同：2
> 
> 时间：2013-01-02T15:03:44.293
> 
> 标签：ruby, rspec

我对 rspec 和页面对象有疑问。我有

```
 cell(:balance_type_tab_element, :id => 'a') 
```

然后我有

```
def check_all
  check_navigation_to_and_from_balance_page
  check_printer_friendly_link
end 
```

然后我也有

```
def check_allocation_by_balance_type
  balance_type_tab?
  puts "found tab"
  puts balance_type_tab_element.visible?
  balance_type_tab_element.visible?.should be_true
end 
```

和

```
def check_navigation_to_and_from_balance_page
  //some other checks
  check_allocation_by_balance_type
end 
```

然后在步骤文件中

```
on_page(ParticipantBalanceDetailsPage).check_all 
```

但我不断收到错误 NameError: undefined local variable or method `be_true'

我试过谷歌搜索，但到目前为止没有运气，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T15:41:46.660

各种匹配器方法并非在每种情况下都自动可用。考虑一下，当您打电话时`be_true`，您正在`be_true`向`self`. 为了使所有匹配器在每个上下文中都可用，RSpec 必须将所有匹配器对象添加到系统中的每个对象，这将是一个糟糕的主意。

要使匹配器在这种情况下可用，您只需`RSpec::Matchers`在您的类中混入：

```
class MyPageObject
  include RSpec::Matchers

  def check_allocation_by_balance_type
    balance_type_tab?
    puts "found tab"
    puts balance_type_tab_element.visible?
    balance_type_tab_element.visible?.should be_true
  end
end 
```

# jquery - IE上的fancybox iframe + jcrop问题

> ID：14124244
> 
> 赞同：1
> 
> 时间：2013-01-02T15:04:05.447
> 
> 标签：jquery, internet-explorer, iframe, fancybox, jcrop

上传图片后，我在带有 fancybox 的 iframe 上打开它并使用 jcrop（缩略图示例[http://deepliquid.com/projects/Jcrop/demos.php?demo=thumbnail](http://deepliquid.com/projects/Jcrop/demos.php?demo=thumbnail)）进行剪切（这是个人资料照片上传）。

除 IE 外，所有浏览器都可以正常工作（哦，严重吗？：/）

不知道为什么，但在 IE 上 iframe 似乎被锁定。我可以点击每个链接，但不能使用鼠标进行选择，光标上显示不允许的图标。

有谁知道为什么 IE 有这个动作，如果可能的话，如何改变这个？如果不可能，我将使用没有 iframe 的其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:00:40.457

再花一点时间，我对此进行了更好的分析，我发现 Jcrop 没有加载到 IE 上，只是因为在 Fancybox 生成 iframe 内容之前，在图像中应用 Jcrop 的代码正在运行。

window.load 和 document.ready 还不够。我必须使用此代码才能使其在 IE 上运行。

```
$('#target').load(function () {
loadJcrop();
}); 
```

“#target”是要裁剪的图像的 id，而 loadJcrop() 是应用 Jcrop 的函数。

# php - 将 Symfony2 应用程序部署到 AWS Elastic Beanstalk - 部署后缓存清除

> ID：14124246
> 
> 赞同：16
> 
> 时间：2013-01-02T15:04:10.973
> 
> 标签：php, amazon-web-services, symfony-2.1, amazon-elastic-beanstalk

将 Symfony2 应用程序部署到 Elastic Beanstalk 时，我需要执行手动缓存清除，以便应用程序开始运行。因此，我添加了一个容器命令来在部署期间清除产品缓存。命令运行，但我仍然必须手动清除才能使应用程序正常工作。

经过一番挖掘，我发现 Symfony2 缓存文件本身就有绝对路径字符串。我添加的命令运行“预部署”或在应用程序文件从其暂存文件夹（称为“/var/app/ondeck”）移动到它们的最终存放位置（“/var/app/current”）之前运行。结果，缓存文件中的绝对路径字符串错误，导致应用无法加载。

此外，开发环境可以立即正常工作，因为它会自动重建自己的缓存。prod 环境是唯一受到影响的环境。

我的问题：

*   有没有办法在代码移动到位后自动运行缓存清除命令？
*   或者，是否有某种方法可以让 Symfony2 让您为缓存生成指定不同的“基本路径”？这样它就可以设置为指向正确的最终位置。

提前感谢大家:-)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-21T07:45:12.363

出现问题是因为当各种 Symfony 命令在 composer 安装过程和/或您自己的命令（例如assetic:dump）结束时运行时，缓存被填充在*ondeck环境中。*

解决方案是在部署的最后一个命令清除缓存，并指定*--no-warmup*来停止 Symfony 自动重新填充它，这样当环境从*ondeck*移动到*current*时，缓存是空的。在我的*.ebextensions/symfony.config*我有：

```
container_commands:
  01_migrate:
    command: php app/console doctrine:migrations:migrate --env=prod --no-debug --no-interaction
    leader_only: true
  02_dumpassets:
    command: php app/console assetic:dump --env=prod --no-debug
  99_clearcache:
    command: php app/console cache:clear --env=prod --no-debug --no-warmup 
```

它没有很好的文档记录，但您也可以在环境移动到*current**后*使用部署后挂钩来预热缓存。同样在*.ebextensions/symfony.config*：

 **```
files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/01-cachewarm.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/usr/bin/env bash
      . /opt/elasticbeanstalk/support/envvars
      cd $EB_CONFIG_APP_CURRENT
      php app/console cache:warmup --env=prod --no-debug 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-04T00:37:50.277

这个问题在最新的 Symfony 发行版 2.3.23、2.5.8、2.6.1 和即将推出的版本（2.7.、3.、...）中得到修复

见[https://github.com/heroku/heroku-buildpack-php/issues/64](https://github.com/heroku/heroku-buildpack-php/issues/64)

Symfony 现在将在容器中使用相对于**FILE**的链接，因此您不再需要使用 post deploy hack。请注意，您仍然需要将资产安装为硬链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-15T12:50:01.400

我花了一些时间试图让事情以可重用的方式工作，这是我们最终确定的 ebextensions 文件。

```
files:
  "/tmp/parameters.yml":
    mode: "000444"
    content: |
      parameters:
        database_driver: pdo_mysql
        database_host: '...'
        database_port: null
        database_name: ...
        database_user: ...
        database_password: ...
        mailer_transport: smtp
        mailer_host: 127.0.0.1
        mailer_user: null
        mailer_password: null
        locale: en
        secret: ...

option_settings:
  - namespace: aws:elasticbeanstalk:hostmanager
    option_name: LogPublicationControl
    value: true
  - namespace: aws:elasticbeanstalk:container:php:phpini
    option_name: document_root
    value: /web
  - namespace: aws:autoscaling:launchconfiguration # This is for permission to the RDS instance
    option_name: SecurityGroups
    value: ...

container_commands:
  01-params:
    command: cp /tmp/parameters.yml app/config/parameters.yml
  02-params:
    command: chown webapp:webapp app/config/parameters.yml
  03-bootsrap:
    command: php vendor/sensio/distribution-bundle/Sensio/Bundle/DistributionBundle/Resources/bin/build_bootstrap.php
  04-bootsrap:
    command: chown webapp:webapp app/bootstrap.php.cache
  05-cache:
    command: php app/console cache:clear --env=prod --no-debug --no-warmup
  06-cache:
    command: chmod -R 0777 app/cache
  07-logs:
    command: chmod -R 0777 app/logs
  08-cache:
    command: chown -R webapp:webapp app/cache
  09-logs:
    command: chown -R webapp:webapp app/logs 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-29T13:21:12.283

我有同样的问题，我在[这个](http://www.dannemanne.com/posts/post-deployment_script_on_elastic_beanstalk_restart_delayed_job)页面上找到了解决方案

我的最终代码是 - 我正在使用 Symfony 框架（v2.8）：

```
commands:
  01_create_post_dir:
    command: "mkdir /opt/elasticbeanstalk/hooks/appdeploy/post"
    ignoreErrors: true

files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/initial_cron_job.sh":
  mode: "000755"
  owner: root
  group: root
  content: |
    #!/usr/bin/env bash
    # This line was very important for me as I needed to get EnvVars
    . /opt/elasticbeanstalk/support/envvars
    rm -rf /var/app/current/app/cache/* /var/app/current/app/logs/*
    chmod -R 777 /var/app/current/app/cache
    chmod -R 777 /var/app/current/app/logs
    su -c "command_name" $EB_CONFIG_APP_USER 
```

解释词：

*   我不需要预热缓存，所以我对*缓存*和*日志*文件夹执行 rm -rf
*   我将缓存和日志文件夹权限更改为 100% 确保它们对于 $EB_CONFIG_APP_USER 是可写的 - 在这种情况下是**webapp**用户

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T07:35:00.310

尝试覆盖 getCacheDir？

在 app/AppKernel.php 中：

```
public function getCacheDir()
{
    return "/path/to/the/cache";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-28T13:21:48.263

根据@rhunwicks 的回答，这是我的`.ebextensions/symfony.config`：

```
commands:
  01updateComposer:
    command: export COMPOSER_HOME=/root && /usr/bin/composer.phar self-update

files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/01-cachewarm.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/usr/bin/env bash
      . /opt/elasticbeanstalk/support/envvars
      cd $EB_CONFIG_APP_CURRENT
      php app/console cache:clear --env=prod
      php app/console assetic:dump --env=prod 
```

确保在您的作曲家中，无需`"symfony-assets-install": "symlink"`花费数小时试图弄清楚为什么符号链接指向`/var/app/ondeck/src/BundleName/MyBundle/Resources/public`而不是`current`文件夹。**

# javascript - 第一次尝试在 Rails 中使用 Ajax：控制器渲染空文档？

> ID：14124256
> 
> 赞同：2
> 
> 时间：2013-01-02T15:04:51.927
> 
> 标签：javascript, ruby-on-rails, ajax, controller

我有一个页面呈现`Ideas`. 每个项目旁边都有一个索赔按钮。应该发生的*情况*是用户单击 Claim 按钮，`Idea#claim`控制器操作运行，Claim 按钮变暗。

*实际*发生的是……什么都没有。甚至没有 Rails 错误页面，这就是我被卡住的原因。相关片段如下：

**路线.rb**

```
 resources :ideas do 
    collection do
      post 'claim'
    end
  end 
```

**想法控制器#claim**

```
 def claim
    @idea = Idea.find(params[:idea_id])
    current_user.claim(@idea)
    respond_to do |format|
      format.js   { render :nothing => true } 
    end
  end 
```

**_idea.html.erb 部分**

```
<span class="idea-actions" id=<%="idea"+idea.id.to_s%>>
    <%= link_to "Claim", {method: "post", action: "claim", idea_id: idea.id}, {class: 'claim', remote: true}  %>
</span> 
```

**想法.js.coffee**

```
$ ->
  $('.claim').bind 'ajax:success', ->
    alert 'Ajax success!' 
```

这绝对是我第一次尝试做这样的事情，而我的 CoffeeScript/JS 几乎不存在。任何建议或指示将不胜感激。

**编辑 1：**将代码从 application.js 移动到 idea.js.coffee，使用`button_to`to切换表单`link_to`。上面代码中显示的更改。现在，当我单击链接时，绝对没有任何反应。还是不开心！:\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:25:42.347

尝试移动`remote: true`到`html_options`部分`button_to`

```
<%= button_to "Claim", {action: "claim", idea_id: idea.id}, {remote: true, class: 'btn btn-small claim'}  %> 
```

[http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:50:34.080

将 button_to 修改为更简洁：

```
<%= button_to "Claim", claim_ideas_path(id: idea.id, format: 'js'),  remote: true  %> 
```

应该这样做。。

# javascript - 在javascript / jquery中取消事件mousedown

> ID：14124258
> 
> 赞同：1
> 
> 时间：2013-01-02T15:05:04.867
> 
> 标签：javascript, jquery, mousedown

我正在进行拖放，当可拖动对象通过我为屏幕设置的某些限制时，我想将其返回到其原始位置。

我的问题是，如果 onmousedown 事件处于活动状态，则对象在调用 onmouseup 事件之前不会返回其原始位置。

是否可以在运行时取消或停止 mousedown？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:21:23.203

当满足特定条件时，您可以清除 mousemove 事件：

```
function trackMouse(e) {
    if (e.pageX > 200 || e.pageY > 200) {
        // stop execution (event continues to run)
        // alternatively, to detach this event:
        $(window).off('mousemove', trackMouse);
    } else {
        $('#output').html(e.pageX +', '+ e.pageY); 
    }
}

$(window).on('mousemove', trackMouse);​ 
```

[演示（JSLint）](http://jsfiddle.net/yYVM5/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:11:01.270

听起来您应该使用 onmousemove-event 来查看是否已达到限制，但正在使用 onmousedown，~~正如您所说，在您释放鼠标按钮之前不会触发。~~按下鼠标按钮时仅触发一次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:28:21.810

也许您会发现这个[jquery.event.drag](http://threedubmedia.com/code/event/drag)插件很有用。它允许您在拖动过程中取消拖动。从它的文档：

> 拖
> 
> 每次鼠标移动时，此事件都会在“draginit”和“dragstart”之后触发。处理程序可以返回 false 以停止拖动交互并直接进入“dragend”并防止任何“drop”事件。如果拖动多个元素（来自“draginit”），此事件将在每个元素上唯一触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T16:11:46.047

@Voitek Zylinski：您的解决方案有效，但我终于发现这个解决方案在我的情况下更好：

```
$(document).trigger("mouseup"); 
```

谢谢你。

# c# - odbc 命令。表名参数化

> ID：14124261
> 
> 赞同：2
> 
> 时间：2013-01-02T15:05:29.773
> 
> 标签：c#, odbc, sql-injection, parameterized

我在对 C# 中的 odbc 驱动程序的 OdbcConnection 执行参数化 sql 查询时遇到问题。列名和表名可以从 web gui 配置，所以我希望它免受注入

```
using (OdbcCommand command = connection.CreateCommand())
{
    command.CommandText = "SELECT ? FROM ?";
    command.CommandTimeout = SynchTimeout;
    command.CommandType = CommandType.Text;

    command.Parameters.Add(new OdbcParameter(string.Empty, "User"));
    command.Parameters.Add(new OdbcParameter(string.Empty, "TableName"));

    OdbcDataReader reader = command.ExecuteReader();
    while (reader.Read())
    {
      // TODO: Do something clever..
    }
} 
```

对列名“用户”使用 odcparameters 似乎没问题。但是如果我将表名添加为带有占位符的参数“？” 我收到以下错误：错误 [HY000] [Microsoft][ODBC Excel 驱动程序] 参数“Pa_RaM002”指定了需要表名的位置。

如果表名不能是 OdbcParameter，有谁知道如何在这种情况下安全地传递表名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:34:15.110

我认为不可能在 SQL 中参数化表名和列名。因此，以某种方式，您仍然会求助于字符串连接来构建动态 SQL 语句。

不过，您可以在执行语句之前进行一些检查。我看到您可以执行两种类型的检查：

**1.白名单检查（更好的解决方案）**

如果可能，请列出您允许以这种方式使用的表和列。当用户指定表和列时，请确保您只允许列表中的元素。

**2.动态检查（有风险的解决方案）**

*仅当事先不知道表/列的名称（例如：动态创建）并且不可能建立白名单时才应用此方法。否则，请使用白名单方法。*

您可以检查配置的表和列是否存在于数据库中。

例如，如果您使用的是 SQL Server，您可以通过查询[信息架构视图](http://msdn.microsoft.com/en-us/library/ms186778.aspx)来执行此操作，如下所示：

```
select top 1 COLUMN_NAME
from INFORMATION_SCHEMA.COLUMNS
where TABLE_NAME = @tableNameParameter
and COLUMN_NAME = @columnNameParameter
and <additional criteria*> 
```

为了避免过于频繁地运行检查，您可以在允许配置表和列名称的网页中执行这些检查作为验证。

***警告：**如果您只验证表和列是否存在，这将使用户能够发现数据库中的所有表。为避免这种情况，您可以在 SQL 中添加一个附加条件，以确保您只选择打算以这种方式使用的表。例如，所有动态表都可以有一个特定的前缀，所以你可以这样做`[...] and TABLE_NAME like 'prefix%'`

* * *

无论您选择哪种解决方案，请注意从安全角度来看它是至关重要的。您应该非常小心允许系统的哪些组件编写自定义表/列值并在每个点中应用验证。

# ms-access-2010 - Access 2010 中有限长度文本字段的富文本输入

> ID：14124264
> 
> 赞同：1
> 
> 时间：2013-01-02T15:05:44.263
> 
> 标签：ms-access-2010

在 Access 2010 中，我以某种方式配置了一个前端表单和后端表，允许将“富文本”数据输入到后端数据库中的纯文本字段中。

表格字段定义为文本字段，长度为 255 个字符。当直接查看字段中的数据时，它采用以下形式：`<div>&nbsp;P2 &nbsp;&nbsp;</div>`这是我对 Access“富文本”字段的期望。

绑定到此表字段的字段是文本格式纯文本 (!) 的文本框。没有与之相关的验证或代码。当我在此字段中输入或编辑文本时，我可以对其应用文本格式。

在许多方面，这非常有用——我有一个长度限制为 255 个字符的富文本字段。但是，排序和过滤显示了底层的 HTML 标记，因此必须禁止，而且我确信还有其他缺点。

但是，我的用户非常喜欢它，以至于他们要求在应用程序的其他地方提供相同的功能......我无法弄清楚我是如何做到的。我怀疑我正在为这个特定的数据尝试备忘字段与纯文本字段，并偶然发现了导致此结果的一系列更改。

我试过剪切粘贴和重命名表格和相应的表单字段来复制它，但没有成功。

我已经广泛搜索了类似情况的描述 - 没有成功。

有没有办法复制我所取得的成就？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:09:26.733

如果您有一个带有绑定到富文本备忘录字段的文本框的表单，您可以在该文本框上设置验证规则，将其限制为 50 个字符或更少。

![显示验证规则的文本框属性表](../Images/bd8b95ffac00a0c35ac706a7de055a23.png)

然而，长度限制将基于所有字符的总数......不仅是显示的字符，还有标记标签字符。从立即窗口中查看此示例：

```
? DLookup("memo_field", "tblFoo", "id =1")
<div>a <strong>b </strong>c</div>
? Len(DLookup("memo_field", "tblFoo", "id =1"))
 33 
```

如果要从长度限制中排除标记字符，请使用以下`PlainText()`函数：

```
? PlainText(DLookup("memo_field", "tblFoo", "id =1"))
a b c
? Len(PlainText(DLookup("memo_field", "tblFoo", "id =1")))
 5 
```

在这种情况下，验证规则属性可能是这样的：

```
=(Len(PlainText([txtMemo_field]))<=50) 
```

当您在该备注字段上使用过滤条件查询源数据时，将评估所有存储的字符（包括标记标签）。如果您希望过滤条件忽略标记标签，请使用以下`PlainText()`功能：

```
SELECT *
FROM YourTable
WHERE PlainText(memo_field) = "a b c"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:23:38.507

您可以使用少量代码来限制字符数。一个例子是：

```
Private Sub txtText_KeyPress(KeyAscii As Integer)
    If Me.txtText.SelStart >= 254 Then
        KeyAscii = 0
    End If
End Sub 
```

但是，我没有测试富文本的字符数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-02T13:54:52.833

我已经弄清楚了如何配置允许“富文本”数据输入到后端数据库中的纯文本字段的前端表单和后端表。

我将前端数据库链接到测试后端，该后端将相关字段设置为富文本字段，然后创建/编辑相关表单（字段格式为富文本）。然后我将它重新链接到具有完全相同结构的生产数据库，除了后端字段是纯文本。

我不推荐它，但它确实有效。

# java - Eclipse 成员排序顺序与 Oracle Java 代码约定

> ID：14124270
> 
> 赞同：5
> 
> 时间：2013-01-02T15:06:17.897
> 
> 标签：java, eclipse, static, members

在 Eclipse 中，默认的“成员排序顺序”（在 Preferences - Java - Appearance - Members Sort Order 中）是：

*   类型
*   静态字段
*   静态初始化器
*   静态方法
*   字段
*   初始化器
*   构造函数
*   方法

但是[甲骨文的 Java 代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-141855.html#1852)说顺序应该是：

*   类（静态）变量
*   实例变量
*   构造函数
*   方法

所以Oracle在排序上不区分静态方法和非静态方法。由于这个原因，我收到了 Checkstyle 错误：

> 实例变量定义顺序错误。

所以我想知道是否要修改 Eclipse 中的顺序或禁用 Checkstyle 检查。倾向于禁用 Checkstyle 检查，这样加入项目的每个人都不必修改他们的 Eclipse 设置，但忽略官方约定似乎有点错误。

人们的看法是什么，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:26:18.110

“所以我想知道是在 Eclipse 中修改订单还是禁用 Checkstyle 检查。倾向于禁用 Checkstyle 检查，这样加入项目的每个人都不必修改他们的 Eclipse 设置，但忽略官方公约。”

我建议更改 Eclipse 以符合您想要使用的规则。如果您想要的话，最好使用 Oracles。我通常使用 Maven 生成我的 Eclipse 项目文件（因此所有代码格式都是为新用户自动创建的）。我知道[CXF](http://cxf.apache.org/setting-up-eclipse.html "CXF")使用类似的东西，看看他们的 POM 以获得灵感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-09T10:26:01.780

根据 Peter Svensson 接受的答案，这些 Checkstyle 错误可以通过在 Eclipse 中使用以下成员排序顺序来解决：

1.  类型
2.  静态字段
3.  字段
4.  静态初始化器
5.  初始化器
6.  构造函数
7.  静态方法
8.  方法

# ssrs-2008 - 同时在 WordTemplate 和 SSRS 中生成 o/p

> ID：14124271
> 
> 赞同：0
> 
> 时间：2013-01-02T15:06:29.650
> 
> 标签：ssrs-2008, axapta, dynamics-ax-2012

我编写了一个单独的类，在其中将计算值作为参数传递以在 Word 模板中生成数据。我只需要从我的 DP 类中初始化类（Word 模板）对象`processReport()`并同时获取 word 模板和 ssrs 报告。我在执行时遇到错误。请建议如何克服这个问题。WordTemplate 类似乎在客户端运行，而进程报告在服务器端。 ![正在处理的代码报告](../Images/24e595ceedb5d35a89f07a78d81d38fc.png) ![错误消息。 当我尝试通过作业执行 <code>processReport()</code> 时，我没有收到错误（用于测试）](../Images/266bfb6180db64a5b9f5e447e62817f0.png)

错误消息。当我尝试执行`processReport()`直通作业（用于测试）时，我没有得到相同的错误可能是因为作业在客户端上运行

# css - bootstrap 如何预处理 LESS？

> ID：14124272
> 
> 赞同：-2
> 
> 时间：2013-01-02T15:06:41.073
> 
> 标签：css, twitter-bootstrap, less

在中`bootstrap.css`，我看到了这样的事情：

```
@media screen, print {
  [class*="iconic-"] { 
```

看起来像`LESS`。我感到困惑的是浏览器只知道`css`而不是`LESS`. `css`它是否由引导程序的 javascript 代码转换为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T15:07:49.367

> 看起来像 LESS

错误的。

那是一个[CSS 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:10:16.560

这不是 LESS，它是用于检测设备尺寸或应该应用哪种方法的[媒体查询](http://css-tricks.com/css-media-queries/)（比如说，用于打印方法）。

# graph - PHP -> ezcomponents -> 图形 -> 调色板 -> 颜色不变

> ID：14124273
> 
> 赞同：0
> 
> 时间：2013-01-02T15:06:44.827
> 
> 标签：graph, palette, zeta-components

我们在 Zend Framework 应用程序中使用 PHP 中的 ezcomponents 图形类绘制图形。现在我必须自定义一个 StackBar 图表。按照教程，您可以通过创建调色板类并设置一些属性来为图形元素设置自定义颜色。开始了：

```
class My_Graph_Palettes_Shc extends ezcGraphPalette
{
    protected $dataSetColor = array('#FF4E9A', '#3465A4', '#F57900');
    protected $dataSetSymbol = array(
            ezcGraph::BULLET,
    );
    protected $fontName = 'sans-serif';
    protected $fontColor = '#000000'; 
    protected $axisColor = '#000000';
    protected $majorGridColor = '#bbbbbb';
 } 
```

我们可以使用此类设置axisColor或majorGridColor，但图表元素的颜色不能使用dataSetColor属性设置，如文档所述。它根本不会改变任何东西。

你知道我们缺少什么吗？如果是这样，请告诉我们。

干杯，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:30:54.373

调色板必须在设置 $graph->data[$keys] 之前设置，至少在我们的例子中是这样。然后它工作正常。

# java - 映射字符串数组

> ID：14124275
> 
> 赞同：1
> 
> 时间：2013-01-02T15:06:55.390
> 
> 标签：java, parsing, map

```
 private Map<String, String> readFile(String file) throws IOException{
        FileReader fr = null;
        Map<String, String> m = new HashMap<String, String>();
        try {
        fr = new FileReader(file); 
        BufferedReader br = new BufferedReader(fr);

        String s = br.readLine();
        String[] split = s.split(";");
        for (int j = 0; j < split.length; j++ ) { //Just a temporary solution.
            m.put(split[j], split[(j+=1)]); //inserts username and password from file
        } 
        br.close();
        }
        catch (FileNotFoundException e){
            System.out.format("%s not found.%n", file);
            System.exit(1);
        }
        fr.close();

        return m;
    } 
```

文件输入是 -> 哈哈哈；密码; 我使用分隔符将行分成两个标记，即“哈哈哈”和“密码”。我的问题是如果我的 .txt 文件中有更多行，我如何将我的用户名和密码映射到一个 HashMap 中，我的密码对应于我的用户名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:12:53.850

而缓冲的阅读器有更多的行：

```
while ((line = br.readLine()) != null) {
   // process the line.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:21:08.057

你可以试试这个：

```
BufferedReader br = new BufferedReader(fr);

String s = br.readLine();
while( s != null) {
    String[] split = s.split(";");
    m.put(split[0], split[1]);
    s = br.readLine();
}
br.close(); 
```

我强烈建议使用[IOUtils](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html)进行文件操作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:57:05.377

其中大部分也是由以前的答案完成的。

我建议尽可能使用 LinkedHashMap 来保持输入顺序，并使用 Reader for API 参数来避免在文件不足时立即重复代码。

并且在 split 中使用的正则表达式的约束较少（在 ';' 周围去除空格）

```
public class ParseLogin {

    /**
     * Parses lines of username password pairs delimited by ';' and returns a Map
     * username->password.
     *
     * @param reader source to parse
     * @return Map of username->password pairs.
     * @throws IOException if the reader throws one while reading.
     */
    public static Map<String, String> parse(Reader reader) throws IOException {

        Map<String, String> result = new LinkedHashMap<String, String>();
        BufferedReader br = new BufferedReader(reader);
        String line;
        while (null != (line = br.readLine())) {
            String fields[] = line.split("\\s*;\\s*");
            if (fields.length > 1) {
                result.put(fields[0], fields[1]);
            } // else ignore (or throw Exception)
        }
        return result;
    }

    public static void main(String[] args) {

        try {
            Map<String, String> result = parse(new FileReader(args[0]));
        } catch (FileNotFoundException e) {
            System.out.format("%s not found.\n", args[0]);
            System.exit(1);
        } catch (IOException e) {
            System.out.format("Error while reading from %s.\n", args[0]);
            e.printStackTrace();
            System.exit(2);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T15:17:44.577

你需要在这里循环：

```
while ((s = br.readLine()) != null) {
   String[] split = s.split(";");
   for (int j = 0; j < split.length; j++) { 
    m.put(split[j], split[(j += 1)]);
  }
} 
```

# gwt - GWT 无法将嵌套的 LayoutPanel 添加到 FlowPanel

> ID：14124277
> 
> 赞同：0
> 
> 时间：2013-01-02T15:07:12.067
> 
> 标签：gwt, nested, flowpanel

我一直在尝试将带有 LayoutPanel 的视图添加到 FlowPanel 的另一个视图中：

父包含这个：

```
<g:FlowPanel ui:field="innerContentPanel" /> 
```

孩子包含这个：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">

<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
xmlns:g="urn:import:com.google.gwt.user.client.ui" xmlns:p1="urn:import:com.google.gwt.user.cellview.client"
xmlns:o="urn:import:com.sun.org.apache.xpath.internal.operations">
<g:HTMLPanel ui:field="parentView" >

    <g:LayoutPanel width="100%" height="15%" ui:field="innerPanel"
        styleName="inner_panel">...</g:LayoutPanel>
</g:HTMLPanel> 
```

我不断收到错误消息，指出继承面板的 XML 没有用于 innerContentPanel 的 ui:field 属性。

我需要在父母或孩子身上保证什么，以便孩子的 xml 不会寻找父母的变量吗？

提前致谢。

# image-processing - 如何开始使用 dart 中的图像处理？

> ID：14124278
> 
> 赞同：2
> 
> 时间：2013-01-02T15:07:13.577
> 
> 标签：image-processing, dart

您好，谁能帮我处理飞镖中的图像处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:14:32.993

如果您在客户端，您可以在画布上绘制图像，读回画布像素，然后在它们上运行过滤器。有关一些示例，请参阅[使用 Canvas 的图像过滤器。](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/)

# python - Python 2.7.3 IDLE 打不开

> ID：14124281
> 
> 赞同：2
> 
> 时间：2013-01-02T15:07:23.813
> 
> 标签：python, windows-7, python-2.7, python-idle

我正在使用 windows 7 64 位和 python 2.7.3 32 位并且 IDLE 不会打开。我有 python 2.7.3 64 位（并且 IDLE 很好） - 但我需要 32 来运行一些代码。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:10:49.230

打开 cmd 或 powershell 并输入：

```
C:\path\to\python.exe -m idlelib.idle 
```

其中当然 \path\to\python.exe 是您的 python 可执行文件的本地路径。你看到那里有什么错误吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T18:10:08.577

卸载 64 位 Python 2.7 并安装 32 位 Python 2.7。然后你的 IDLE 就可以正常工作了。

# python - 如何对这个网站进行网页抓取

> ID：14124285
> 
> 赞同：1
> 
> 时间：2013-01-02T15:07:30.773
> 
> 标签：python, ajax, web-scraping

我这里有一个网站

[疯牛病小型股](http://money.rediff.com/indices/bse/bsesmallcap)

这里列出了大约 100 家公司。如何使用 Python（或 C#）以编程方式保存接下来的 100 家公司。在这个页面的底部

> 显示 1 - 100 个，共 528 个 << 上一页 | 下一页>>

可见。如何访问链接

> 下一页>>

以编程方式。此链接被视为基本 url + '#'(http://money.rediff.com/indices/bse/bsesmallcap#)。如何保存所有 1-528 公司详细信息（作为单独的网页：1-100,101-200 等）。是否有针对此类任务的特殊定制程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T15:41:04.330

你甚至不需要scrapy或类似的东西——没有找到“Next”链接的链接，因为它实际上是javascript：

```
javascript:nextPage(document.paging.totalPages.value) 
```

我使用 Chrome 的开发者工具查看了它实际发出的请求，结果发现它只是一个简单的未经身份验证的 POST 请求。您可以通过以下方式获得所需的任何页面：

```
import requests
r = requests.post('http://money.rediff.com/indices/bse/bsesmallcap',
              data={'currentPageNo': 3, 'RowPerPage': 100})
print r.text 
```

您所要做的就是更改`'currentPageNo'`参数以获取您要查找的任何页面。 ~~您可能还可以更改每页的行数，但我没有对此进行试验。~~ *更新：你不能；我试过了。*

在实际保存信息方面，您可以使用`BeautifulSoup`从每个请求中获取数据并将其存储或保存。鉴于该表`'dataTable'`在每一页上都有该类，因此很容易找到。因此，鉴于有 6 页，您最终会得到如下代码：

```
import requests
from bs4 import BeautifulSoup as BS
for page in range(1, 7):
    r = requests.post('http://money.rediff.com/indices/bse/bsesmallcap',
                      data={'currentPageNo': page, 'RowPerPage': 100})
    soup = BS(r.text)
    table = soup.find(class_='dataTable')
    # Add table information to whatever output you plan to use 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:56:00.040

“每一页”的完整链接是： http: [//money.rediff.com/indices/bse/bsesmallcap&cTab=12&sortBy=&sortDesc=&pageType=indices_wise¤tPageNo=1&RowPerPage=100&bTab=12](http://money.rediff.com/indices/bse/bsesmallcap&cTab=12&sortBy=&sortDesc=&pageType=indices_wise&currentPageNo=1&RowPerPage=100&bTab=12)

（我已经删除了 totalPages 方面，因为你需要自己刮这个位）

一旦你知道了页数（来自抓取），你可以增加`currentPageNo`直到你拥有所有的行。

您可以增加 RowsPerPage 的数量，但似乎有 200 行的内部限制（即使您将其更改为 500）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T16:56:56.573

在[jdotjdot 的](https://stackoverflow.com/users/1351335/jdotjdot)答案上使用[`PyQuery`](http://packages.python.org/pyquery/)而不是[`BeautifulSoup`](http://www.crummy.com/software/BeautifulSoup/)，我喜欢它用于遍历的 jQuery 式表示法。它将`urllib`默认使用或[`requests`](http://docs.python-requests.org/en/latest/)用于抓取。

```
from pyquery import PyQuery as pq
for page in range(1, 3):
    # POST request
    d = pq(url="http://money.rediff.com/indices/bse/bsesmallcap",
           data={"currentPageNo": page, "RowPerPage": 50},
           method="post")
    # jQuery-esque notation for selecting elements
    d("table.dataTable").text() 
```

# eclipse - Selenium 网格+TestNG+Maven

> ID：14124291
> 
> 赞同：1
> 
> 时间：2013-01-02T15:08:05.983
> 
> 标签：eclipse, maven, testng, selenium-grid

我需要组织我的应用程序的功能测试。我需要使用 selenium grid + testng + webdriver。正如我发现设置项目的好方法是在eclipse中使用maven。我已经设置了 selenium 网格，但不知道如何适当地设置将与所有这些工具一起使用的 maven 项目。也许有人有这方面的经验或有用的链接。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:59:43.387

如果你想在 maven 中使用 testng 测试，你需要设置 maven surefire 插件来启动你在 testng 中定义的测试套件。

首先，您需要在依赖项中包含 testng，因此将其添加到您的 pom.xml 文件中：

```
<dependencies>
  [...]
    <dependency>
      <groupId>org.testng</groupId>
      <artifactId>testng</artifactId>
      <version>6.3.1</version>
      <scope>test</scope>
    </dependency>
  [...]
</dependencies> 
```

然后你需要告诉surefire正在使用哪个测试套件，假设它是suite.xml：

```
<plugins>
    [...]
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.13</version>
        <configuration>
          <suiteXmlFiles>
            <suiteXmlFile>testng.xml</suiteXmlFile>
          </suiteXmlFiles>
        </configuration>
      </plugin>
    [...]
</plugins> 
```

如我所见，您正在使用网格，因此如果您想并行运行它们，您可以在 pom.xml 文件的插件部分执行以下操作：

```
</plugins>
    [...]
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.13</version>
        <configuration>
          <parallel>methods</parallel>
          <threadCount>10</threadCount>
        </configuration>
      </plugin>
    [...]
</plugins> 
```

当然，您需要在该 PC 和至少一个客户端上运行 selenium hub。确保您的测试配置为使用 selenium grid2 而不是本地 webdriver 运行。

问候，

圣地亚哥

# c# - 人脸检测 EmguCV

> ID：14124293
> 
> 赞同：2
> 
> 时间：2013-01-02T15:08:27.810
> 
> 标签：c#, opencv, emgucv

当图片中有 5 个人时，我在 picture.jpg 上的给定绿色矩形上有问题。我在这里使用 emguCV v2.2 当我单击并触发它时按钮的代码。

```
Image InputImg = Image.FromFile(@"C:\img\Picture.jpg"); 
Image<Bgr,byte> ImageFrame = new Image<Bgr,byte>(new Bitmap(InputImg));

Image<Gray, byte> grayframe = ImageFrame.Convert<Gray, byte>();
 var faces =  grayframe.DetectHaarCascade(haar, 1.4, 4,
                                    HAAR_DETECTION_TYPE.DO_CANNY_PRUNING,
                                    new Size(25, 25))[0];
foreach (var face in faces)
            {
                ImageFrame.Draw(face.rect, new Bgr(Color.Green), 3);
            }
CamImageBox.Image = ImageFrame; 
```

我希望它应该返回给我图片.jpg，每个面上都有绿色矩形。但事实并非如此。我可以知道为什么吗？这里有什么错误吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T02:50:14.863

> ```
>  var faces =  grayframe.DetectHaarCascade(haar, 1.4, 4,
>                                     HAAR_DETECTION_TYPE.DO_CANNY_PRUNING,
>                                     new Size(25, 25))[0]; 
> ```

您正在使用`scaleFactors = 1.4`and `minNeighbors = 4`，也许您可​​以调整这些参数并检查结果（`scaleFactors = 1.2`？）

为了证明您的 haarcascade 运行良好，您是否可以尝试使用网络摄像头捕获作为您的图片来源？

```
Private void Form1_load(object sender, EventArgs e)
{
    try
    {
        //capture webcam
        Capture grabber = new Capture();
        //test capture frame
        grabber.QueryFrame();
        //trigger event when application is idle
        Application.Idle += new EventHandler(FrameGrabber);
    }
    catch
    {
        MessageBox.Show("Capture fail to start");
    }
}

void FrameGrabber(object sender, EventArgs e)
{
    Image<Bgr,byte> ImageFrame = grabber.QueryFrame().Resize(320,240,Emgu.CV.CvEnum.INTER.CV_INTER_CUBIC);
    Image<Gray, byte> grayframe = ImageFrame.Convert<Gray, byte>();
    MCvAvgComp[] faces =  grayframe.DetectHaarCascade(haar, 1.4, 4,
                                    HAAR_DETECTION_TYPE.DO_CANNY_PRUNING,
                                    new Size(25, 25))[0];
    foreach (MCvAvgComp face in faces)
    {
        ImageFrame.Draw(face.rect, new Bgr(Color.Green), 3);
    }
    CamImageBox.Image = ImageFrame;
} 
```

顺便说一句，返回类型 of`grayframe.DetectHaarCascade`是`MCvAvgComp[][]`，因此您的情况下的面类型是 `MCvAvgComp[]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-13T09:30:23.753

`ScaleFactor`应该是这样，`>1.0 but closer to 1`您可以使用 1.04 或 1.01 以获得更好的结果，但这会使过程变慢。你可以增加，`minNeighbours`这样你就可以减少误报。最后使用`maxSize`参数来限制检测框的最大尺寸。你可以按照方法的定义

```
public Rectangle[] DetectMultiScale(
    IInputArray image,
    double scaleFactor = 1.1,
    int minNeighbors = 3,
    Size minSize = null,
    Size maxSize = null
) 
```

# wpf - WPF MVVM EF 简单示例

> ID：14124294
> 
> 赞同：3
> 
> 时间：2013-01-02T15:08:50.747
> 
> 标签：wpf, mvvm

我希望有人可以帮助我完成这个简单的 WPF MVVM 示例，因为我正在努力将数据插入视图模型。

我有一个 SQL 表温度，其中每条记录都有一个时间戳，然后是一个数值，例如。

LogTime-------------温度
01/01/2013 00:00 --60
01/01/2013 00:05 --61.1
01/01/2013 00:10 --61.2

我的 WPF 视图将有一个开始日期时间和结束日期时间选择器和一个网格视图，允许用户从日期范围中选择记录，然后在网格中显示它们

我的模型是实体框架，所以我正在苦苦挣扎的是视图模型需要什么，以及 linq 查询将在哪里传递用户输入的开始和结束日期时间。我最终要绘制数据图表，并且有明确的要求（scichart）为数据使用可观察的集合。但是我只是想获得一个非常简单的数据示例，以了解如何在 ViewModel 中将数据库数据作为 Observable Collection 获取以绑定到视图。我还在为我的 GridView 使用 Telerik WPF 控件，我知道他们可能会做不同的事情。

正如你所知道的那样，我是一个完整的初学者，并且一直在努力在任何地方找到一个简单的例子（大量复杂的例子），所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:51:56.207

这实际上是一个相当大的课题。但是，为了简单起见，暂时排除设计模式和 MVVM 框架......

您需要创建；

**WPF XAML 视图具有：**

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="728" Width="772">
    <Grid>
        <DataGrid AutoGenerateColumns="True" ItemsSource="{Binding MyDataGridDataSource}" HorizontalAlignment="Center" Margin="0,88,0,0" VerticalAlignment="Top" Height="286" Width="584"/>
        <Grid Margin="0,403,0,0" VerticalAlignment="Top" HorizontalAlignment="Center" >
            <Grid.RowDefinitions>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Label Content="Start Date:" HorizontalAlignment="Left" Margin="10,8,0,0" VerticalAlignment="Top"/>
            <DatePicker SelectedDate="{Binding StartDate}" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Grid.Column="1"/>
            <Label Content="End Date:" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Grid.Column="2"/>
            <DatePicker SelectedDate="{Binding EndDate}" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Grid.Column="3"/>
        </Grid>

    </Grid>
</Window> 
```

**一个名为 clsMyTemperatureViewModel 的 VieModel 类：**

```
Imports System.Collections.ObjectModel
Imports System.ComponentModel

''' <summary>
''' Only for Simulating the EF Context!
''' </summary>
''' <remarks></remarks>
Public Class TableTemperatures

    Public Property LogTime As Date
    Public Property Temperature As Double

End Class

Public Class clsMyTemperatureViewModel : Implements INotifyPropertyChanged

    Private _ListOfTemperatures As ObservableCollection(Of TableTemperatures)

    Private _MyDataGridDataSource As ObservableCollection(Of TableTemperatures)
    Public Property MyDataGridDataSource As ObservableCollection(Of TableTemperatures)
        Get
            Return _MyDataGridDataSource
        End Get
        Set(value As ObservableCollection(Of TableTemperatures))
            _MyDataGridDataSource = value
            OnPropertyChanged("MyDataGridDataSource")
        End Set
    End Property

    Private _StartDate As Date
    Public Property StartDate As Date
        Get
            Return _StartDate
        End Get
        Set(value As Date)
            If _StartDate <> value Then
                _StartDate = value
                OnPropertyChanged("StartDate")
                GetResults()
            End If
        End Set
    End Property

    Private _EndDate As Date
    Public Property EndDate As Date
        Get
            Return _EndDate
        End Get
        Set(value As Date)
            If _EndDate <> value Then
                _EndDate = value
                OnPropertyChanged("EndDate")
                GetResults()
            End If
        End Set
    End Property

    Public Event PropertyChanged(sender As Object, e As PropertyChangedEventArgs) Implements INotifyPropertyChanged.PropertyChanged
    Public Sub OnPropertyChanged(ByVal PropertyChangeName As String)

        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(PropertyChangeName))
    End Sub

    Public Sub GetResults()

        Dim query = From TemperatureList In _ListOfTemperatures
                    Where TemperatureList.LogTime >= StartDate
                    Where TemperatureList.LogTime <= EndDate
                    Select TemperatureList

        MyDataGridDataSource = New ObservableCollection(Of TableTemperatures)(query)

    End Sub

    Public Sub New()

        '
        ' Only for Simulating the EF Context!
        '
        _ListOfTemperatures = New ObservableCollection(Of TableTemperatures)
        _ListOfTemperatures.Add(New TableTemperatures With {.LogTime = New Date(2012, 9, 1), .Temperature = 14})
        _ListOfTemperatures.Add(New TableTemperatures With {.LogTime = New Date(2012, 10, 2), .Temperature = 15})
        _ListOfTemperatures.Add(New TableTemperatures With {.LogTime = New Date(2012, 11, 3), .Temperature = 16})
        _ListOfTemperatures.Add(New TableTemperatures With {.LogTime = New Date(2012, 12, 4), .Temperature = 17})
        _ListOfTemperatures.Add(New TableTemperatures With {.LogTime = New Date(2013, 1, 5), .Temperature = 18})

        StartDate = New Date(2011, 1, 1)
        EndDate = New Date(2014, 1, 1)

        GetResults()

    End Sub
End Class 
```

在这里，我模拟了一个小类来复制您的 EF 上下文。但是，您需要引用您的 EF 上下文而不是我的 _ListOfTemperatures 集合。这将是类似的东西；

```
 Public Sub GetResults()

        Dim query = From TemperatureList In MyEFContext.TemperatureList
                    Where TemperatureList.LogTime >= StartDate
                    Where TemperatureList.LogTime <= EndDate
                    Select TemperatureList

        MyDataGridDataSource = New ObservableCollection(Of TableTemperatures)(query)

    End Sub 
```

ViewModel 基本上将相关的公共属性暴露给视图。需要注意的一件重要事情是，您必须实现 INotifyPropertyChanged 接口，并引发 PropertyChanged 事件以在 ViewModel 中的属性发生更改时更新视图。

然后，您需要在 New Sub 后面的代码中添加以下内容；

```
Me.DataContext = New clsMyTemperatureViewModel 
```

这会将 View 的 DataContext 设置为新的 ViewModel。

正如我之前提到的，这个例子没有尝试涉及任何 MVVM 框架，也没有使用任何适当的设计模式。

你真的应该为你的数据使用存储库模式。在这个存储库中，您可以放置​​ Linq to Entities 代码，只返回一个 ObservableCollection 给您的 ViewModel。

您将创建一个具有；

*   一个可以容纳您的 EF 上下文的项目
*   数据库存储库项目
*   您的主应用程序的项目，该项目反过来将为您的视图、视图模型、类、行为等设置文件夹。

但是，我希望这能让你继续前进！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:56:44.953

创建一个视图模型，让它看起来像这样：

```
public class YourViewModel: INotifyPropertyChanged
{

private ObservableCollection<YourModel> _yourModels;
public ObservableCollection<YourModel> YourModels
    {
    get { return _yourModels; }
    set
    {
    _yourModels= value;
    RaisePropertyChanged(() => this.YourModels);
    }
    }

private DateTime _startTime;
public DateTime StartTime
    {
    get { return _startTime; }
    set
    {
    if (value == _startTime) return;
    _startTime= value;
    RaisePropertyChanged(() => this.StartTime);
    }
    }

private DateTime _endTime;
public DateTime SendTime
    {
    get { return _endTime; }
    set
    {
    if (value == _endTime) return;
    _endTime= value;
    RaisePropertyChanged(() => this.SendTime);
    }
    }

public YourViewModel()
{
YourModels = new ObservableCollection<YourModel>();

//
// You'll need to load your data into the ObservableCollection
//

}
} 
```

现在在您的视图中，您需要绑定到属性和集合。像这样的东西：

```
<DatePicker x:Name="startDate" SelectedDate="{Binding Path=StartDate}"></DatePicker>
<DatePicker x:Name="endDate" SelectedDate="{Binding Path=EndDate}"></DatePicker>

<ListView ItemsSource="{Binding Path=YourModels}">
     <ListView.View>
         <GridView>
         <GridViewColumn Header="YourProperty" DisplayMemberBinding="{Binding        Path=YourProperty}" />
         </GridView>
     </ListView.View>
</ListView> 
```

我还没有测试过这个，但它应该会给你一个正确的方向。

# c# - 字符串列表序列化器

> ID：14124296
> 
> 赞同：1
> 
> 时间：2013-01-02T15:09:04.967
> 
> 标签：c#, xml-serialization

我有一个必须序列化的表。

它是我的课，我向它添加表值

```
 public class NewCVXml
{
    [XmlArray]
    [XmlArrayItem(ElementName = "Name")]
    public List<string> FieldFirst { get; set; }
    [XmlArray]
    [XmlArrayItem(ElementName = "Value")]
    public List<string> FieldSecond { get; set; }
    [XmlArray]
    [XmlArrayItem(ElementName = "State")]
    public List<string> FieldThird { get; set; }

} 
```

这是来自 ajax (Request.Form) 的值

> {field1=name1&field1=name2&field1=name3&field2=value1&field2=value2&field2=value3&field3=Private&field3=Public&field3=Public}

这是我的由 ajax 调用的 c# 函数（用于发布）

```
 string xmlText;
        NewCVXml newCv = new NewCVXml();
        newCv.FieldFirst =  Request.Form.GetValues(0).ToList();
        newCv.FieldSecond = Request.Form.GetValues(1).ToList();
        newCv.FieldThird = Request.Form.GetValues(2).ToList();

        try
        {
            XmlSerializer serializer = new XmlSerializer(newCv.GetType());
            MemoryStream ms = new MemoryStream();
            using (XmlTextWriter writer = new XmlTextWriter(ms, Encoding.UTF8) { Formatting = Formatting.Indented })
            {

                serializer.Serialize(writer, newCv);
                ms = (MemoryStream)writer.BaseStream;
                xmlText = new UTF8Encoding().GetString(ms.ToArray());
                ms.Dispose();
                return Content(xmlText);
            }
        }
        catch (Exception e)
        {

            return Content( "Hata: " + e.Message);

        } 
```

这个xml创建

```
 <?xml version="1.0" encoding="utf-8"?>
<NewCVXml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <FieldFirst>
    <Name>name1</Name>
    <Name>name2</Name>
    <Name>name3</Name>
  </FieldFirst>
  <FieldSecond>
    <Value>value1</Value>
    <Value>value2</Value>
    <Value>value3</Value>
  </FieldSecond>
  <FieldThird>
    <State>Private</State>
    <State>Public</State>
    <State>Public</State>
  </FieldThird>
</NewCVXml> 
```

![我的桌子](../Images/24db59aaa1074b458127c94f9f499dfa.png)

但我想要类似xml的东西

```
<?xml version="1.0" encoding="utf-8"?>
<NewCVXml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Rows>
    <name1 state="Private">value1</name1>
    <name2 state="Public">value2</name2>
    <name3 state="Public">value3</name3>
</Rows>
</NewCVXml> 
```

我不知道如何创建这样的 xml。我不能为每一行使用一个类。因为行的单元格是可变的。我的意思是，它可以是 name1 或 XXX 或 YYY 或......它取决于用户。一切都是动态的，然后我认为我需要使用字符串列表并从列表值创建标记名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:17:42.243

您的类结构不会以您希望使用标准 XmlSerializer 的方式序列化为 XML。相反，您可以使用 IXmlSerializable 实现自定义序列化。

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)

```
public class NewCVXml : IXmlSerializable {

    public List<string> FieldFirst { get; set; }
    public List<string> FieldSecond { get; set; }
    public List<string> FieldThird { get; set; }

    public void WriteXml (XmlWriter writer)
    {
        // Custom Serialization Here
    }

    public void ReadXml (XmlReader reader)
    {
        // Custom Deserialization Here
    }

    public XmlSchema GetSchema()
    {
        return(null);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:43:24.900

正如 Robert Graves 所说，我需要一个自定义的 xml 序列化程序。我使用了罗伯特给出的代码并对其进行了编辑。它现在有效，也许有些人会需要它然后我把它放在这里

```
using System.Collections.Generic;
using System.Xml;
using System.Xml.Schema;
using System.Xml.Serialization;

namespace E_Cv.Functions
{
    public class NewCVXml :IXmlSerializable
    {

        public List<string> FieldFirst { get; set; }
        public List<string> FieldSecond { get; set; }
        public List<string> FieldThird { get; set; }

        public void WriteXml(XmlWriter writer)
        {

            for (int i = 0; i < FieldFirst.Count; i++)
            {

                writer.WriteStartElement("Satir");

                writer.WriteAttributeString("AlanIsmi",FieldFirst[i]);
                //writer.WriteString(FieldFirst[i]);    
                writer.WriteAttributeString("AlanTuru", FieldThird[i]);
                writer.WriteString(FieldSecond[i]); 
                writer.WriteEndElement();
            }

        }

        public void ReadXml(XmlReader reader)
        {
            // Custom Deserialization Here
        }

        public XmlSchema GetSchema()
        {
            return (null);
        }
    }
} 
```

# css - 具有动态宽度的 CSS 和 DIV

> ID：14124300
> 
> 赞同：0
> 
> 时间：2013-01-02T15:09:20.477
> 
> 标签：css, html, dynamic, width

我需要设置一个div的宽度动态，因为我在那个div里面有一个动态表格，当它有太多列时，我不能用底栏水平滚动**（不是DIV的，浏览器的）**。

我的 HTML 文件中有这个：

```
<div class="total">
    <table border="1">
        <tr>
            <td>row 1, cell 1</td>
            ...
            <td>row 1, cell m</td>
        </tr>
        <tr>
            <td>row 2, cell 1</td>
            ...
            <td>row 2, cell m</td>
        </tr>
        ...
        <tr>
            <td>row n, cell 1</td>
            ...
            <td>row n, cell m</td>
        </tr>
    </table>
</div>​ 
```

我的css中有这个：

```
.total{
position:relative;
top:50px;
margin: 0 auto;
background-color:#eeeeee;
height:auto;
width:auto;
border:2px solid #000;
border-color:rgb(82,115,154);
overflow: hidden;
} 
```

这里有一个链接，其中包含我正在做的示例：

[链接 jsfiddle](http://jsfiddle.net/CJZCt/10/)

如何设置“总”div 的宽度动态？这必须适用于 IE7 浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:51:55.083

您不能使用 上的边框或任何块格式属性执行此操作`<div>`，请在此处查看精简版本：http: [//jsfiddle.net/MQ9MJ/1/](http://jsfiddle.net/MQ9MJ/1/)

If you move these styles to the `<table>` and `<td>`s instead, it will work: [http://jsfiddle.net/MQ9MJ/3/](http://jsfiddle.net/MQ9MJ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:15:38.453

您需要摆脱 overflow:hidden 属性。改用溢出：自动，然后您的 div 将是可滚动的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:42:56.187

试试这个 CSS

```
.total{
     position:relative;
     top:50px;
     margin: 0 auto;
     background-color:#eeeeee;
     height:auto;
     border:2px solid #000;
     border-color:rgb(82,115,154);
     overflow: none;
}
td{
    min-width:50px;
} 
```

# c# - 如何为分页传递附加参数

> ID：14124304
> 
> 赞同：2
> 
> 时间：2013-01-02T15:09:28.540
> 
> 标签：c#, asp.net-mvc-3, extjs, parameters, paging

我知道分页需要传递给控制器​​的启动和限制参数......但我还使用了更多需要传递的参数......这是'STATE'和'ID'......我尝试了baseParams，params。 ..没有任何作用...这是我的商店

```
this.myStore = Ext.create('Ext.data.Store', {
        scope: this,
        storeId: 'myStore',
        fields: [
            { name: 'State', type: 'string' },
            { name: 'ID', type: 'string' }
        ],
        proxy: {
            type: 'ajax',
            scope: this,
            extraParams: { State: '', ID: '', start: 1, limit: 200 },
            url: 'myControl/getRecords',
            reader: {
                type: 'json',
                totalProperty: 'count',
                root: 'data'
            }
        },
        autoLoad: true
    }); 
```

我知道我不必使用 start 和 limit 作为参数，但将它们取出也无济于事。

这是我的 c# 方法

```
public string getRecords(string State, string ID, int start, int limit) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:23:41.087

你试过这个吗？

```
this.myStore = Ext.create('Ext.data.Store', {
    scope: this,
    storeId: 'myStore',
    fields: [
        { name: 'State', type: 'string' },
        { name: 'ID', type: 'string' }
    ],
    proxy: {
        type: 'ajax',
        scope: this,
        extraParams: { State: '', ID: '' },
        url: 'myControl/getRecords',
        reader: {
            type: 'json',
            totalProperty: 'count',
            root: 'data'
        }
    },
    autoLoad: true
}); 
```

因为分页是由分页栏完成的，所以你不需要自己设置。您这样做的方式将覆盖商店提供的分页参数（分页栏）

请注意，您可以通过调用覆盖您的 extraParam 值

```
myStore.getProxy().setExtraParam('State', 'AnyValue'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:36:24.917

**start**是默认起始页，**limit**是每页的行数

```
 this.myStore = Ext.create('Ext.data.Store', {
        scope: this,
        storeId: 'myStore',
        fields: [
            { name: 'State', type: 'string' },
            { name: 'ID', type: 'string' }
        ],
        proxy: {
            type: 'ajax',
            scope: this,
            extraParams: { State: '', ID: '' },
            url: 'myControl/getRecords',
            reader: {
                type: 'json',
                totalProperty: 'count',
                root: 'data,

                start:0,    
                limit: 25
            }
        },
        autoLoad: true
    }); 
```

# magento - 允许客户在 Magento 中删除他们的产品评论

> ID：14124306
> 
> 赞同：0
> 
> 时间：2013-01-02T15:09:50.960
> 
> 标签：magento, review

我什么也没找到。没有内置功能，没有模块，也没有任何人试图这样做。现在，我需要知道这一点的原因是因为我有一个客户想要这个功能。

当用户/客户登录时，如何在“我的评论”页面中添加一个链接，以允许他们删除他们的评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:16:27.440

您需要使用能够删除特定评论的控制器创建自己的模块。首先，看看这是如何在管理员中完成的，管理员可以在其中删除评论。您可以使用布局 xml 将新部分“我的评论”添加到用户区域。当用户点击它时，您应该使用控制器中的 indexAction 来呈现会话中属于用户的所有评论。这肯定需要相当多的自定义编码经验。

# svn - 将 BUG ID 复制到所有 Tortise 客户端

> ID：14124307
> 
> 赞同：0
> 
> 时间：2013-01-02T15:09:58.243
> 
> 标签：svn, tortoisesvn, visualsvn, visualsvn-server

我们正在使用 Visual SVN 服务器和 Tortise SVN 客户端。我们想添加 BUG ID，以跟踪我们所有的签到。

我们可以成功地为一台具有 Tortise SVN 客户端的客户端机器做同样的事情。但同样的情况不会被复制到其他机器上。

如何在 VisualSVN 服务器上设置 BUG ID，以便使用 BUG ID 选项复制所有客户端计算机。

如何将 BUG ID 字段设置为必填项（截至目前，它提示一个选项“不带 BUG ID 继续”，此选项不应提示）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:17:20.653

简短的回答：你不能。

更长的答案：Subversion 没有内置工具，您可以通过该工具通过服务器控制客户端配置。

您*可以*做的事情（我假设您正在这样做[？](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-bugtracker.html)）：

*   将适当的属性应用到您的树中，以便您的客户端都选择设置、使用它们并将它们应用到随后创建的文件夹中。但是，当有人使用其他 TortoiseSVN 的任何客户端时，这就会崩溃。
*   在服务器上安装一个预提交挂钩脚本，以拒绝任何缺少适当格式/具有所需数据的 BUG ID 的提交，并给提交者一条消息，告知他们为什么他们的提交被拒绝，以便他们可以修复它。

# jquery - JQuery 不适用于 ListView

> ID：14124308
> 
> 赞同：1
> 
> 时间：2013-01-02T15:09:58.597
> 
> 标签：jquery, asp.net, listview

所以基本上我有几个文本框，我只想接受其中的数字，但是我无法让下面使用的 JQuery Im 与 ListView 内的文本框或另一个 asp.net 页面一起使用。

```
$(document).ready(function () {
        $("#<%= txtSearch.ClientID %>").keydown(function (event) {
            // Allow: backspace, delete, tab, escape, and enter
            if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||
                // Allow: Ctrl+A
                (event.keyCode == 65 && event.ctrlKey === true) ||
                // Allow: home, end, left, right
                (event.keyCode >= 35 && event.keyCode <= 39)) {
                // let it happen, don't do anything
                return;
            }
            else {
                // Ensure that it is a number and stop the keypress
                if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)) {
                    event.preventDefault();
                }
            }
        });
    }); 
```

此代码适用于名为 txtSearch 的普通文本框，但是当我在 txtSearch 中插入 txtQty 时，它不起作用：s

```
<asp:ListView ID="lvProducts" runat="server" OnItemCommand="lbProducts_ItemCommand" OnSelectedIndexChanged="lvProducts_SelectedIndexChanged">
        <LayoutTemplate>
            <div class="productoutercontainer">
                <div id="itemPlaceHolder" runat="server"></div>
            </div>
        </LayoutTemplate>
        <ItemTemplate>
            <div class="productinnercontainer">
                <img class="pics" src="<%#Eval("ProductImage") %>" alt="<%#Eval("ProductName") %>" title="<%#Eval("ProductName") %>" />  &nbsp;&nbsp;&nbsp;
                <asp:Label ID="lblName" runat="server" Text='<% # Eval("ProductName") %>' Font-Bold="true" Font-Size="Medium"></asp:Label><br /><br />
                Quantity: <asp:TextBox ID="txtQty" runat="server" columns="3"/>
                <asp:Button ID="btnAddToCart" runat="server"  Text="Add To Cart" CssClass="button2"  CommandArgument='<%# Eval("ProductId")%>' OnClick="btnAddToCart_Click" />  <br /><br /><br />
                </div>
        </ItemTemplate>
    </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:15:23.913

列表视图中的每个文本框都将具有不同的客户端**ID**。运行代码并通过在浏览器上**查看源**代码来查看生成的客户端代码。检查**txtQty**文本框的 ID。

1.  给 txtQty 一个**CssClass**。只需给一个不需要 css 编码的名称。让我们说：

    ```
    <asp:TextBox ID="txtQty" CssClass="qty" runat="server" columns="3"/> 
    ```

2.  改变这个：

    ```
    $("#<%= txtSearch.ClientID %>") 
    ```

    对此：

    ```
    $(".qty") 
    ```

现在它必须工作......

# jquery - 这个 jquery 库的目的是什么？

> ID：14124309
> 
> 赞同：1
> 
> 时间：2013-01-02T15:10:03.043
> 
> 标签：jquery, css, jquery-animate, css-transitions

我最近找到了一个用于 css3 动画的库，因为我对 javascript 有点陌生，我不确定它有什么好处。

[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

它似乎做了 jquery 本身可以做的事情，但使用 css3。那么使用这样的东西有什么意义呢？除了它似乎用 csshooks 规范化供应商前缀......

还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:14:41.237

使用本机功能总是更好。这就是为什么 jQuery 将`querySelector`在可用时使用。如果浏览器支持它，它也会使用 JSON。

据我所知，这个插件增加了对原生 CSS 过渡的支持，而不是手动为元素设置动画。

# python - elementtree注册命名空间错误

> ID：14124311
> 
> 赞同：8
> 
> 时间：2013-01-02T15:10:10.960
> 
> 标签：python, elementtree

我试图用这个注册命名空间：

```
ET.register_namespace("inv", "http://www.stormware.cz/schema/version_2/invoice.xsd") 
```

但它不起作用：

```
Traceback (most recent call last):
  File "C:\tutorial\temp_xml2.py", line 34, in module>
    for listInvoice in root.findall('inv:invoiceHeader'):
  File "C:\Python27\LIB\xml\etree\ElementTree.py", line 390, in findall
    return ElementPath.findall(self, path, namespaces)
  File "C:\Python27\LIB\xml\etree\ElementPath.py", line 293, in findall
    return list(iterfind(elem, path, namespaces))
  File "C:\Python27\LIB\xml\etree\ElementPath.py", line 259, in iterfind
    token = next()
  File "C:\Python27\LIB\xml\etree\ElementPath.py", line 83, in xpath_tokenizer
    raise SyntaxError("prefix %r not found in prefix map" % prefix)
SyntaxError: prefix 'inv' not found in prefix map
>>> 
```

这有什么问题？

* * *

谢谢马丁尼

我试过 - 1.：

```
for listInvoice in root.findall('inv:invoiceHeader', namespaces=dict(inv='http://www.stormware.cz/schema/version_2/invoice.xsd')):
    invoiceHeader = listInvoice.find('inv:id', namespaces=dict(inv='http://www.stormware.cz/schema/version_2/invoice.xsd')).text
    print invoiceHeader 
```

结果：（空）

2.:

```
nsmap=root.nsmap
print nsmap 
```

结果：AttributeError：“元素”对象没有属性“nsmap”

3.:

```
for listInvoice in root.findall('.//{http://www.stormware.cz/schema/version_2/invoice.xsd}invoiceHeader'):
    invoiceHeader = listInvoice.find('.//{http://www.stormware.cz/schema/version_2/invoice.xsd}id').text
    print invoiceHeader 
```

结果：工作正常。

有没有机会一次注册命名空间？然后我想使用 listInvoice.find('inv:id').text 而不是 listInvoice.find('.//{http://www.stormware.cz/schema/version_2/invoice.xsd}id') .text（更好的代码且易于阅读）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-02T15:23:08.743

关于如何使用命名空间和`.findall()`.

`.findall()`函数（以及.iterfind `.find()`( `.findtext() and`) `) takes a`namespaces` 参数应该是一个映射。这是查找标签时唯一参考的结构：

```
root.findall('inv:invoiceHeader', namespaces=dict(inv='http://www.stormware.cz/schema/version_2/invoice.xsd')) 
```

该`.register_namespace()`函数仅在将树再次序列化为文本时有用。

# iphone - 将视图控制器链接到 TableView 条目

> ID：14124312
> 
> 赞同：1
> 
> 时间：2013-01-02T15:10:14.627
> 
> 标签：iphone, objective-c, xcode, ios6

我做了一个表格视图，有 19 个条目。我想要的是让每个单独连接到一个视图控制器，因为所有的视图控制器都会有所不同。

我用于 tableView 的代码是：

```
tableData = [NSArray arrayWithObjects:@"One", @"Two",[...], nil]; 
```

有没有办法将这些条目中的每一个连接到单独的视图控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:24:36.043

您需要使用 UITableViewDelegate 方法。为此，您需要实施的是：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

另请参阅苹果文档：[here](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)

希望这可以帮助...

# php - PHP 创建一个 xml 文件

> ID：14124318
> 
> 赞同：-2
> 
> 时间：2013-01-02T15:10:51.290
> 
> 标签：php, xml

> **可能重复：**
> [PHP：创建新的 XML 文件并将数据写入其中？](https://stackoverflow.com/questions/2038535/php-create-new-xml-file-and-write-data-to-it)
> [PHP DOM 方法 createElement 需要是自闭标签](https://stackoverflow.com/questions/7539551/php-dom-method-createelement-need-to-be-self-closing-tag)

我正在尝试使用 php 创建 XML 文件，但我不知道创建以下内容的命令：

```
<gexf xmlns="http://www.gexf.net/1.2draft" version="1.2">
    <graph mode="static" defaultedgetype="directed">
        <nodes>
            <node id="0" label="Hello" />  //I mena this Object
            <node id="1" label="Word" />
        </nodes>
        <edges>
            <edge id="0" source="0" target="1" />
        </edges>
    </graph>
</gexf> 
```

我说的是这个孩子，它不是由一个开场白和一个结束语组成，而是一个单一的陈述。现在我正在寻找一个可以创建这种孩子的命令（`<node/>`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:15:46.830

你有两个选择。

1 - XML 只是一个文本文件。`fopen`只需使用etc创建一个文本文件。

或者

2 - 使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)模型创建树结构。然后，您可以使用它从使用该`saveXML`函数的文件创建文件。

这完全取决于你。

# asp.net-mvc - 剑道下拉菜单 - 模板

> ID：14124320
> 
> 赞同：1
> 
> 时间：2013-01-02T15:10:57.760
> 
> 标签：asp.net-mvc, razor, kendo-ui

我正在尝试使用 kendo 下拉列表并使用 Template 方法呈现选项，如[http](http://demos.kendoui.com/web/dropdownlist/template.html) ://demos.kendoui.c​​om/web/dropdownlist/template.html 所示（单击 ASP.NET MVC > template.cshtml）。为了简化问题，我只是尝试仅显示 AccountDescription。

到目前为止，这是我的代码。

cshtml

```
 ...        
    <div class="editor-field">
        <script>
            function entityFiltering() {
                return {
                    entityId: $("#EntityId").val()
                };
            }
        </script>

        @(Html.Kendo().DropDownListFor(m => m.AccountNumber)
           .Name("AccountNumber")
           .DataTextField("AccountShortCode")
           .DataValueField("AccountNumber")
            .Template("<table><tr><td width='100px'>${ data.AccountDescription } </td></tr></table>")
           .OptionLabel("Please select...")
           .DataSource(source => source.Read(read => read.Action("ActionName", "ControllerName")
                                                         .Data("entityFiltering"))
                                     .ServerFiltering(true))
           .Enable(false)
           .AutoBind(false)
           .CascadeFrom("EntityId")
              )
        @Html.ValidationMessageFor(m => m.SourceAccountNumber)
    </div>
    ... 
```

模型看起来像

```
public class Model {

    [Required]
    [Display(Name = "Short Code")]
    public string AccountShortCode { get; set; }

    [Required]
    [Display(Name = "Account Number")]
    [ScaffoldColumn(false)]
    public int AccountNumber { get; set; }

    [Required]
    [Display(Name = "Description")]
    [ScaffoldColumn(false)]
    public string AccountDescription { get; set; }
} 
```

当下拉列表呈现时，所有选项都在列表中，但它们显示`undefined`如果我选择一个选项，我可以在网格上看到实际正确的值绑定，所以我认为我的问题纯粹是一个显示问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:41:38.713

几个小时后，我设法解决了这个问题！我将模板中的语法更改为，就成功`#= data.AccountDescription #`了！

# ffmpeg - 什么时候 fps 可能是一个猜测而不是确切的值？

> ID：14124321
> 
> 赞同：2
> 
> 时间：2013-01-02T15:10:58.930
> 
> 标签：ffmpeg, frame-rate, libavcodec, libavformat

我使用 libavcodec 进行视频处理。

的文档`AVStream->r_frame_rate`说

```
Real base framerate of the stream.
This is the lowest framerate with which all timestamps can be
represented accurately (it is the least common multiple of all
framerates in the stream). Note, this value is just a guess! 
```

我尝试了几个 mp4 和 avi 视频（25fps）并且`r_frame_rate`总是像我预期的那样 25。所以，我想了解为什么文档说`...is just a guess!`如果我总是得到精确的 fps？什么时候改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T19:18:32.850

许多容器，尤其是流式容器（例如 mpeg-ts）不记录帧速率。许多容器允许可变帧率视频。ffmpeg 尝试通过查看前几秒并计算帧数来确定帧速率。但是，如果帧速率在整个流中发生变化或变化，则 r_frame_rate 可能会变得不准确。

因此 r_frame_rate 对于信息目的来说是一个很好的值。但最好单独查看每一帧的 PTS。

# asp.net-mvc - 提交表单并将数据传递给 FileStreamResult 类型的控制器方法

> ID：14124324
> 
> 赞同：35
> 
> 时间：2013-01-02T15:11:10.253
> 
> 标签：asp.net-mvc, forms, controller

我有一个 mvc 表单（由模型制成），提交时我想获取一个参数 我有设置表单并获取参数的代码

```
using (@Html.BeginForm("myMethod", "Home", FormMethod.Get, new { id = @item.JobId })){
} 
```

在我的家庭控制器里面我有

```
 [HttpPost]
    public FileStreamResult myMethod(string id)
    {
         sting str = id;

    } 
```

但是，我总是得到错误

> 您正在查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

当我省略 时`[HttpPost]`，代码执行文件但变量`str`和`id`为空。请问我该如何解决这个问题？

编辑

这可能是因为控制器中的 myMethod 不是 ActionResult 造成的吗？我意识到，当我有一个 Actionresult 类型的方法并且该方法绑定到一个视图时，一切正常。但是 FileStreamresult 类型不能绑定到视图。如何将数据传递给这些方法？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-02T15:38:50.197

如有疑问，请遵循 MVC 约定。

如果您还没有包含 JobID 的属性，请创建一个 viewModel

```
public class Model
{
     public string JobId {get; set;}
     public IEnumerable<MyCurrentModel> myCurrentModel { get; set; }
     //...any other properties you may need
} 
```

强烈键入您的视图

```
@model Fully.Qualified.Path.To.Model 
```

将 JobId 的隐藏字段添加到表单

```
using (@Html.BeginForm("myMethod", "Home", FormMethod.Post))
{   
    //...    
    @Html.HiddenFor(m => m.JobId)
} 
```

并接受模型作为控制器操作中的参数：

```
[HttpPost]
public FileStreamResult myMethod(Model model)
{
    sting str = model.JobId;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-02T15:26:57.843

这是因为您已将表单方法指定为**GET**

将视图中的代码更改为：

```
using (@Html.BeginForm("myMethod", "Home", FormMethod.Post, new { id = @item.JobId })){
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T15:29:24.563

您似乎正在指定使用 HTTP 'GET' 请求的表单`FormMethod.Get`。除非您告诉它发布帖子，否则这将不起作用，因为这似乎是您希望 ActionResult 执行的操作。这可能会通过更改`FormMethod.Get`为`FormMethod.Post`.

除此之外，您可能还想考虑 Get 和 Post 请求如何工作以及它们如何与模型交互。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-02T16:01:45.023

这里的问题是模型绑定，如果您指定一个类，那么模型绑定可以在发布期间理解它，如果它是整数或字符串，那么您必须指定 [FromBody] 才能正确绑定它。

在 FormMethod 中进行以下更改

```
using (@Html.BeginForm("myMethod", "Home", FormMethod.Post, new { id = @item.JobId })){ 
```

}

并在您的家庭控制器中绑定字符串，您应该指定 [FromBody]

```
using System.Web.Http;
[HttpPost]
public FileStreamResult myMethod([FromBody]string id)
{
     // Set a local variable with the incoming data
     string str = id;

} 
```

FromBody 在 System.Web.Http 中可用。确保您有对该类的引用并将其添加到 cs 文件中。

# android - ListView 在加载数据之前短暂显示空消息

> ID：14124326
> 
> 赞同：10
> 
> 时间：2013-01-02T15:11:22.540
> 
> 标签：android, android-listfragment

我`ListFragment`使用以下自定义布局创建了一个，它添加了一个`TextView`以在列表为空时显示一条消息：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical" >

  <ListView android:id="@id/android:list"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:drawSelectorOnTop="false"/>

  <TextView android:id="@id/android:empty"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="@string/vsl_empty"
            android:gravity="center"
            android:layout_gravity="center"
            android:textColor="#8C8C8C" />
</LinearLayout> 
```

使用派生自 的自定义适配器加载数据`CursorAdapter`。当数据库中有数据时，列表会非常简短地显示空列表消息，直到加载数据，此时列表被填充。

如何防止空列表消息因为列表尚未填充而短暂出现？

**更新**

我想强调的是，我使用的`ListFragment`a 布局包含`ListView`带有特殊 id`android:list`的 a 和`TextView`带有特殊 id的 a ，如此[处](http://developer.android.com/reference/android/app/ListFragment.html)`android:empty`所述。

设置`android:visibility="invisible"`不影响可见性。我怀疑这是因为它在内部设置为可见。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T08:23:52.153

提供的答案是正确的。我确实不得不将 设置`TextView`为不可见，但正确的位置在`onCreateLoader`：

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args)
{
  mListView.getEmptyView().setVisibility(ListView.GONE);

  return new CursorLoader(getActivity(), CONTENT_URI, null, null, null, null);
} 
```

此外，没有必要让空视图再次可见：这是由框架自动完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:28:12.467

如何将以下内容添加到 TextView

```
android:visibility="invisible" 
```

到 XML 布局文件，然后在需要时使 TextView 可见。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T18:46:27.057

您必须将可见性设置`TextView` *为*不*可见*，并且只有在加载数据后——即`onLoadComplete`——您必须将其设置为`ListView`by doing的空视图`setEmptyView(textView)`；

如果您在*XML*中执行此操作，或者您在加载结果之前执行此操作，则将显示视图，因为列表实际上是空的。所以你必须等到结果加载后才能设置空视图。

# .net - http请求谷歌驱动器离线访问的错误请求

> ID：14124327
> 
> 赞同：0
> 
> 时间：2013-01-02T15:11:24.960
> 
> 标签：.net, httprequest, access-token, google-drive-api

我正在尝试使用刷新令牌进行离线访问。通过 httprequest，我必须使用保存的 refreshToken 获取新的 accessToken。

但我不断收到错误请求 400，没有进一步解释出了什么问题。有人可以告诉我此代码有什么问题或发布有效的代码吗？

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://accounts.google.com/o/oauth2/token");

authenticator.ApplyAuthenticationToRequest(request);

request.Method = "POST";

String para = "code='"+refreshtoken+"'&client_id='" + ClientCredentials.CLIENT_ID + "'&client_secret='" + ClientCredentials.CLIENT_SECRET + "'&grant_type='refresh_token'";

System.IO.Stream requestStream = request.GetRequestStream();

System.IO.StreamWriter streamwriter = new System.IO.StreamWriter(requestStream);

streamwriter.Write(para);
streamwriter.Close();

HttpWebResponse response = (HttpWebResponse)request.GetResponse();
System.IO.Stream stream = response.GetResponseStream();

StreamReader reader = new StreamReader(stream);
String result = reader.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:23:43.617

```
Public Function httpReq(uri As String, para As String, host As String, method As String) As String
    Dim responseData As String = ""
    Dim postData As String = para
    Dim encoding As New ASCIIEncoding()
    Dim byte1() As Byte = encoding.GetBytes(postData)

    Dim httpWebRequest As System.Net.HttpWebRequest = Net.WebRequest.Create(uri)
    httpWebRequest.Method = method
    httpWebRequest.ContentType = "application/x-www-form-urlencoded"
    httpWebRequest.ContentLength = byte1.Length

    Dim newStream As IO.Stream = httpWebRequest.GetRequestStream()
    newStream.Write(byte1, 0, byte1.Length)
    newStream.Close()

    Dim httpWebResponse As System.Net.HttpWebResponse = httpWebRequest.GetResponse()
    If httpWebResponse.StatusCode = System.Net.HttpStatusCode.OK Then
        Dim responseReader As System.IO.StreamReader = New System.IO.StreamReader(httpWebResponse.GetResponseStream())
        responseData = responseReader.ReadToEnd()
    End If
    httpWebResponse.Close()
    Return responseData
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:18:47.290

您应该使用[.NET 的客户端库](http://code.google.com/p/google-api-dotnet-client/)，如果您可以粘贴完整的请求和响应，那可能会有所帮助。

# java - Java String.valueOf(null) 抛出 NPE，但 Object a = null; String.valueOf(a) 返回 'null'

> ID：14124328
> 
> 赞同：36
> 
> 时间：2013-01-02T15:11:27.093
> 
> 标签：java, string

以下行为是否有逻辑语言设计类型的解释（Java 7，我也怀疑早期版本）：

```
 Object  a = null;
    String as = String.valueOf(a);              // as is assigned "null"
    System.out.println(as+":"+as.length());     // prints: "null:4"
    System.out.println ( String.valueOf(null)); // NPE 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-02T15:16:36.020

在语句`System.out.println(String.valueOf(null));`中有一个方法的调用`public static String valueOf(char data[])`，源代码如下：

```
public static String valueOf(char data[]) {
  return new String(data);
} 
```

这就是您获得**NPE的原因**

另一方面，在语句`Object a = null; String as = String.valueOf(a);`中有一个方法的调用`public static String valueOf(Object obj)`，其源代码如下：

```
public static String valueOf(Object obj) {
    return (obj == null) ? "null" : obj.toString();
} 
```

这就是为什么你得到**“null”**而不是**NPE**

* * *

Java 语言规范中的一点理论：[15.12.2.5 选择最具体的方法](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.12.2.5)

*如果多个成员方法既可访问又适用于方法调用，则有必要选择一个为运行时方法分派提供描述符。Java 编程语言使用选择**最具体**方法的规则。*

A`char[]`是 type `Object`，但不是所有`Object`都是 type `char[]`。Type`char[]`比Object**更具体**，如 Java 语言规范中所述，`String.valueOf(char[])`在这种情况下选择重载。

**编辑**

还值得一提的是[Ian Roberts](https://stackoverflow.com/users/592139/ian-roberts)提到的（在他下面的评论中）：

> 重要的是要注意，如果没有比所有其他重载更具体的单个重载，这是一个编译错误 - 如果有一个`valueOf(String)`方法以及`valueOf(Object)`然后 `valueOf(char[])`对无类型的调用`String.valueOf(null)` 将是模棱两可的

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-02T15:15:59.810

第一个调用是 to `String#valueOf(Object)`，第二个是 to`String#valueOf(char[])`

重载方法是根据参数的**静态类型**选择的，这就是为什么第一个有效而第二个获得 NPE 的原因。

如果您调用`System.out.println ( String.valueOf((Object)null));`它将起作用

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-02T15:13:47.983

那是因为`String`类中的这段代码：

```
public static String valueOf(char data[]) {
return new String(data);
} 
```

您的代码（抛出`NullPointerException`）调用上述方法，因此该`data`字段为`null`. 实际上，这个调用是由`String`构造函数上的类抛出的。

使用JDK 6，异常如下：

```
java.lang.NullPointerException
    at java.lang.String.<init>(String.java:177)
    at java.lang.String.valueOf(String.java:2840)
    at org.bfs.data.SQLTexter.main(SQLTexter.java:364) 
```

至于你的线路：

```
System.out.println(as+":"+as.length());     // prints: "null:4" 
```

这在调用以下方法时起作用：

```
public static String valueOf(Object obj) {
return (obj == null) ? "null" : obj.toString();
} 
```

显然，`a`是类型`Object`，所以`String.valueOf(Object)`方法被调用。

如果您特别想调用`String.valueOf(Object obj)`方法，请按如下方式对 null 进行类型转换：

```
System.out.println (String.valueOf((Object)null)); 
```

您正在经历方法重载（其中有多个具有相同名称和方法签名的方法，但具有不同的方法参数）。在您的情况下（发生 NPE），JVM 根据**最具体**的静态类型确定要调用的方法。如果声明了类型，那么最具体的方法是与声明的变量的参数类型相同的方法，否则， JVM使用*最具体的方法*规则来查找调用哪个方法。

我希望这有帮助。

# android - android zxing captureActivity NPE on ViewfinderView

> ID：14124329
> 
> 赞同：0
> 
> 时间：2013-01-02T15:11:43.160
> 
> 标签：android, zxing

我已将 zxing 库集成到我的应用程序中。尝试扫描 QR 码时出现运行时错误。它是由 NPE 在尝试从 XML 膨胀 ViewFinderView 对象时引起的。在我的项目中，我的所有应用程序代码都位于一个名为 com.carefreegroup 的包中，所有 zxing 代码都位于 com.google.zxing.client.android 中。我做了一些日志记录来测试 ViewFinderView 是否为空，它实际上返回为空。

谁能告诉我为什么这个物体没有膨胀，可能是包装问题吗？

```
01-02 15:09:53.887: E/AndroidRuntime(14732): FATAL EXCEPTION: main
01-02 15:09:53.887: E/AndroidRuntime(14732): java.lang.RuntimeException: Unable to resume activity {com.carefreegroup/com.google.zxing.client.android.CaptureActivity}: java.lang.NullPointerException
01-02 15:09:53.887: E/AndroidRuntime(14732):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2850)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2889)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2265)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at android.os.Looper.loop(Looper.java:156)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at android.app.ActivityThread.main(ActivityThread.java:5045)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at java.lang.reflect.Method.invokeNative(Native Method)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at java.lang.reflect.Method.invoke(Method.java:511)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at dalvik.system.NativeStart.main(Native Method)
01-02 15:09:53.887: E/AndroidRuntime(14732): Caused by: java.lang.NullPointerException
01-02 15:09:53.887: E/AndroidRuntime(14732):    at com.google.zxing.client.android.CaptureActivity.onResume(CaptureActivity.java:192)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1236)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at android.app.Activity.performResume(Activity.java:4625)
01-02 15:09:53.887: E/AndroidRuntime(14732):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2834)
01-02 15:09:53.887: E/AndroidRuntime(14732):    ... 12 more 
```

如果需要检查包裹，我可以发布我的清单文件。

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T15:43:44.407

您已经复制了项目的 UI，包括`CaptureActivity`和`ViewfinderView`。不要那样做——这是不行的，也不是完全允许的。您需要编写自己的应用程序并将您理解的部分重用到您理解的应用程序中。这里确实你粘贴了一堆代码不完整，当你这样做时它不起作用。

通过 Intent 集成，或编写自己的应用程序。无论如何请不要这样使用`com.google.zxing.client.android`。

# android - 无法使用某些 Android 模拟器：权限被拒绝

> ID：14124330
> 
> 赞同：0
> 
> 时间：2013-01-02T15:11:47.880
> 
> 标签：android, maven, android-emulator, adt

我在运行“Nexus 7，Android 4.1.2”等最新的 Android 模拟器时遇到问题。模拟器可以启动，但我无法在其上部署（通过 Maven），这可能取决于这个问题：当我将手机切换到应用程序视图时，我得到**“不幸的是，启动器已停止”**并且 LogCat 给了我以下信息输出：

> 01-02 14:30:26.313: W/ActivityManager(151): Permission denied: checkComponentPermission() owningUid=1000 01-02 14:30:26.313: W/BroadcastQueue(151): Permission Denial: broadcasting Intent { act=android .appwidget.action.APPWIDGET_UPDATE_OPTIONS flg=0x10 cmp=com.android.settings/.widget.SettingsAppWidgetProvider (has extras) } 来自 android (pid=970, uid=10014) 由于接收器 com.android 未从 uid 1000 导出。 settings/com.android.settings.widget.SettingsAppWidgetProvider

我的 AndroidManifest 看起来像这样：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-sdk
    android:minSdkVersion="5"
    android:targetSdkVersion="7" />

<application
    android:name="my.domain.appcontext.ApplicationContext"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" 
    android:allowBackup="true">
    <activity
        android:name="my.domain.appcontext.activities.MainActivity"
        android:screenOrientation="nosensor"
        android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="my.domain.appcontext.activities.MainMenuDialogActivity"
        android:excludeFromRecents="true"
        android:theme="@style/Theme.Dialog" >
    </activity>
    <activity
        android:name="my.domain.appcontext.activities.DistrictMenuDialogActivity"
        android:excludeFromRecents="true"
        android:theme="@style/Theme.Dialog" >
    </activity>
    <activity
        android:name="my.domain.appcontext.activities.StreetMenuPreselectionDialogActivity"
        android:excludeFromRecents="true"
        android:theme="@style/Theme.Dialog" >
    </activity>
    <activity
        android:name="my.domain.appcontext.activities.StreetMenuDialogActivity"
        android:excludeFromRecents="true"
        android:theme="@style/Theme.Dialog" >
    </activity>

    <uses-library android:name="com.google.android.maps"
                  android:required="true" />
</application> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:31:26.377

您是否尝试`android.appwidget.action.APPWIDGET_UPDATE`在代码中的某处发送广播？这是一个**Android OS广播**，所以如果你是……你将无权使用它。

# cuda - 如何在远程服务器上启用 TCC 的设备上调试 CUDA 代码？

> ID：14124331
> 
> 赞同：0
> 
> 时间：2013-01-02T15:11:50.783
> 
> 标签：cuda, nsight

我想在我们即将成为生产服务器的开发 PC 上启动远程调试会话。在服务器上，我使用远程桌面启动 NSight，然后尝试在本地计算机上启动 CUDA 调试（之前将服务器作为目标）。结果是，调试会话断开连接并显示“远程系统已通过远程桌面登录。WDDM 适配器将无法调试”。

这是预期的行为、错误、错误的配置吗？如果没有涉及远程桌面的解决方案，我该如何启动 NSight 监视器，以便我可以启动调试会话？

在目标服务器上，我有两个 Tesla K10 和一个 Quadro FX（用于显示）。所有 Tesla 设备（实际上是四个）都显示 TCC 已打开。

我正在使用 NSight 3.0、CUDA 5.0 和 Visual Studio 2008（后两者仅在开发工作站上）。

最后一件事：将应用程序复制到服务器并通过远程桌面执行工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:51:08.487

您提到的消息是一条警告，让用户知道 Nsight 已检测到您在目标端运行 RDP 会话，并且它无法在其中的任何 WDDM 卡上进行 Nsight 调试（如果有的话） （或更多） - 看起来像您使用您提到的 Quadro FX）。此消息是一个警告，它应该继续让您在 Nsight 下运行或调试应用程序，并假设 GPU 代码在 TCC 设备上运行时调试应用程序。您确定应用程序在目标机器上成功运行了吗？您能否再次检查您是否设置了 GPU 断点并查看您是否遇到了这些断点？是否显示任何其他消息？- 您可以检查 VS 输出窗口。

您使用的是哪个驱动程序版本？

您可以尝试在服务器上运行（双击）应用程序，但从 Nsight 将应用程序同步到的目录中？它应该在`%appdata\NVIDIA Corporation\Nsight\Monitor\Mirror\<hostdev_machine_name>\<path_to_the_sync_app>` 我知道您提到您尝试复制它的情况下，但我想看看 Nsight 同步的所有内容是否都是应用程序所需的，并且可能没有缺少您需要指定同步的内容（有关同步的更多信息在这里： [http](http://http.developer.nvidia.com/NsightVisualStudio/3.0/Documentation/UserGuide/HTML/Content/Synchronization.htm) ://http.developer.nvidia.com/NsightVisualStudio/3.0/Documentation/UserGuide/HTML/Content/Synchronization.htm ）

谢谢

# c# - 返回要在 sql 查询中使用的用户当前位置的 lat 和 long 值

> ID：14124335
> 
> 赞同：1
> 
> 时间：2013-01-02T15:12:09.337
> 
> 标签：c#, asp.net, sql, geolocation

我正在使用 HTML5 地理位置来获取用户当前位置并将其显示在谷歌地图上。但是，我还想返回此位置的 lat 和 long 值，并将这些值传递给 SQL 数据源查询。我想要一个 lat 变量和一个 long 变量通过。为了获得纬度，我只是分配了 var jsVar = position.coords.latitude 但这并没有返回任何东西。我意识到我应该使用隐藏字段来实现将 var 发送到服务器，但我不完全确定当有多个隐藏字段时该怎么做。任何帮助将非常感激。这是我所拥有的：

**Javascript**

```
function SetHiddenVariable() {

  var jsVar = position.coords.latitude;
    // Set the value of the hidden variable to 
    // the value of the javascript variable
    var hiddenControl = '<%= inpHide.ClientID %>';
    document.getElementById(hiddenControl).value = "Latitude = " + jsVar;
} 
```

**ASP.NET**

```
 <body onload="SetHiddenVariable()">
    <form id="form1" runat="server">
    <div>   
        <input id="inpHide" type="hidden" runat="server" />   
        <asp:TextBox ID="txtJSValue" runat="server"></asp:TextBox>
        <asp:Button ID="btnJSValue" 
           Text="Click to retrieve Javascript Variable" 
           runat="server" onclick="btnJSValue_Click"/>
    </div>
    </form>
</body> 
```

C#背后的代码

```
protected void btnJSValue_Click(object sender, EventArgs e)
{
    txtJSValue.Text = inpHide.Value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:27:42.350

这是执行此操作的 html 方式，可以帮助您入门。您只需要连接您的按钮单击事件并将输入转换为服务器端控件。祝你好运！

```
<!DOCTYPE html>
<html>
<head>
<script>
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(success);
}

function success(position) {
        document.getElementById("lat").value = position.coords.latitude;
        document.getElementById("long").value = position.coords.longitude;
} 
</script>
</head>

<body>
    <form id="form1" runat="server">
    <div>   
        Lat: <input id="lat" type="text" />
        Long: <input id="long" type="text" />
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:28:23.070

您可以在客户端连接数据（使用逗号或其他对您有意义的分隔符，然后在服务器端分隔。在这种情况下，您只需要使用一个变量。

# sql - t-sql 返回错误代码与 RaiseError

> ID：14124336
> 
> 赞同：8
> 
> 时间：2013-01-02T15:12:13.013
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

嗨，我正在编写一个存储过程，它将按小时计划执行一批作业，我正在尝试决定是返回错误还是引发错误。假设我将记录每个作业中的错误，这将导致更好的性能和可维护性？

例如

--带有错误代码

```
CREATE PROCEDURE Job1
AS
BEGIN

    BEGIN TRY
        --Do some work
    END TRY
    BEGIN CATCH
        --log error
        RETURN 1; --Return 1 for error
    END CATCH
    RETURN 0;

END

CREATE PROCEDURE USP_BatchJob
AS
BEGIN
    BEGIN TRANSACTION;

    DECLARE @Error INT;
    EXEC @Error = Job1;
    IF @Error <> 0
        GOTO ErrorHandling;

    EXEC @Error = Job1;
    IF @Error <> 0
        GOTO ErrorHandling;

    IF @@TRANCOUNT > 0
        COMMIT TRANSACTION;

    RETURN;

ErrorHandling:
    IF @@TRANCOUNT > 0
        ROLLBACK;
END 
```

例如 RaiseError

```
CREATE PROCEDURE Job1
AS
BEGIN

    BEGIN TRY
        --Do some work
    END TRY
    BEGIN CATCH
        --log error
        RAISERROR(ERROR_MESSAGE(), ERROR_SEVERITY(), ERROR_STATE());
    END CATCH

END

CREATE PROCEDURE USP_BatchJob
AS
BEGIN
    BEGIN TRANSACTION
    BEGIN TRY

    EXEC Job1;

    EXEC Job1;

    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > 0
            ROLLBACK;
    END CATCH

    IF @@TRANCOUNT > 0
        COMMIT TRANSACTION;

END 
```

后者似乎产生了更可维护的代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:29:12.100

关于编码风格，这可能是一个宗教问题。返回码和异常之间的主要区别在于异常将继续沿调用链向上传递。

通常，在我编写的代码中，我使用返回值将存储过程的状态作为“应用程序错误”返回。与您的示例一样， 0 表示成功，其他任何内容都表示失败。每当我在实际代码中调用存储过程时，我都会检查返回值以及可能出现的任何新错误。顺便说一句，在 SQL Server 中，您不能使用“@retval <> 0”检查失败，因为存储过程可以返回 NULL。

当然，异常/数据库错误仍然可能发生。这个想法是，当识别出异常时，它会被记录和处理。系统“错误”变成了应用程序错误。

我遇到的一个问题是与 SQL Server 代理的交互。为此，您希望引发错误以“分叉”到错误处理步骤。这很容易在作业步骤中完成，方法是查看返回值然后生成错误。

# regex - 正则表达式查找两个字符串之间的共同字母

> ID：14124346
> 
> 赞同：2
> 
> 时间：2013-01-02T15:12:44.323
> 
> 标签：regex, groovy

我已经在谷歌上搜索了几个小时并得到了部分解决方案。

我是 Groovy 和正则表达式的新手。这些年来我偶尔使用过正则表达式，但我对它很不适应。

我有一个简单的游戏，可以检查您与隐藏单词有多少共同字母。

为简单起见，假设单词是“pan”，而人输入的是“can”。

我希望正则表达式的结果给我“一个”。

现在，我通过这样做（在 Groovy 中）得到了部分工作：

```
// Where "guess" is the user's try and "word" is the word they need to guess.
def expr = "[$word]"
def result = guess.find(expr) 
```

结果字符串仅包含第一个匹配的字母。有人有更优雅的解决方案吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:53:18.867

我认为这不是正则表达式的用例。您必须注意诸如不让用户自动猜测他是否进入等事情`.*`。

典型的收集工作更适合 IMO 的这项任务。一种解决方案是找到两个单词的交集，将它们视为字符集：

```
(word as Set).intersect(guess as Set).join() 
```

或者过滤出现在密码词中的猜测字符：

```
guess.findAll { word.contains(it) }.unique().join() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:22:36.330

假设现在两个字符串是 s1 和 s2 来查找公共字符串：

```
commonString=s1.replaceAll("[^"+s2+"]",""); 
```

如果您的单词包含元字符，则首先执行以下操作：

```
Pattern.quote(s2); 
```

进而

```
commonString=s1.replaceAll("[^"+s2+"]",""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:27:16.333

你可以试试：

```
guess.findAll( /[$word]/ ).join() 
```

# ruby-on-rails - 将 api 请求中的数据保存到模型 (JSON)

> ID：14124350
> 
> 赞同：-1
> 
> 时间：2013-01-02T15:13:14.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, api, model

好的，所以在过去一周左右的时间里，我一直在处理进行 api 调用，然后将响应返回为 JSON，然后将我想要的部分输出到我的视图中（我认为到达那里，尽管速度很慢）。我学习曲线的下一部分是获取这些数据并将其保存到模型中，以便我可以在我的应用程序的其他地方使用它。

我想要实现的是在发出 api 请求并显示结果之后我想单击一个按钮，然后将数据发布到我的模型

在这个例子中，我通过它的 ISBN 号从 itunes api 获取书籍数据

这是返回数据的示例

```
 {
 "resultCount":1,
  "results": [
 {"kind":"ebook", "artistId":545975179, "artistName":"Gareth Halfacree", "price":9.99, 
 "description":"<p><b>Make the most out of the world&rsquo;s first truly compact  computer<\/b><\/p><p>It's the size of a credit card, it can be charged like a smartphone,  it runs on open-source Linux, and it holds the promise of bringing programming and playing  to millions at low cost. And now you can learn how to use this amazing computer from its co-creator, Eben Upton, in <i>Raspberry Pi User Guide<\/i>. Cowritten with Gareth Halfacree, this guide gets you up and running on Raspberry Pi, whether you're an educator, hacker, hobbyist, or kid. Learn how to connect your Pi to other hardware, install software, write basic programs, and set it up to run robots, multimedia centers, and more.<\/p><ul><li>Gets you up and running on Raspberry Pi, a high-tech computer the size of a credit card <\/li><li>Helps educators teach students how to program <\/li><li>Covers connecting Raspberry Pi to other hardware, such as monitors and keyboards, how to install software, and how to configure Raspberry Pi <\/li><li>Shows you how to set up Raspberry Pi as a simple productivity computer, write basic programs in Python, connect to servos and sensors, and drive a robot or multimedia center <\/li><\/ul><p>Adults, kids, and devoted hardware hackers, now that you've got a Raspberry Pi, get the very most out of it with <i>Raspberry Pi User Guide<\/i>.<\/p>", "genreIds":["10017", "38", "9027"], "releaseDate":"2012-08-30T07:00:00Z", "currency":"USD", "genres":["Computers", "Books", "Computers & Internet"], "trackId":559783692, "trackName":"Raspberry Pi User Guide",  "artistIds":[545975179],  "artworkUrl60":"http://a2.mzstatic.com/us/r30/Publication/v4/ba/a8/2c/baa82ce0-2ac7-7026-04da-6f74bc97b403/9781118464496.60x60-50.jpg", "artistViewUrl":"https://itunes.apple.com/us/artist/gareth-halfacree/id545975179?mt=11&uo=4", "trackCensoredName":"Raspberry Pi User Guide", "formattedPrice":"$9.99", "artworkUrl100":"http://a4.mzstatic.com/us/r30/Publication/v4/ba/a8/2c/baa82ce0-2ac7-7026-04da-6f74bc97b403/9781118464496.100x100-75.jpg", "trackViewUrl":"https://itunes.apple.com/us/book/raspberry-pi-user-guide/id559783692?mt=11&uo=4", "averageUserRating":2.5, "userRatingCount":5}]
} 
```

我想保存艺术家姓名、描述、图像（我需要回形针吗？）和曲目名称

任何人都可以就我如何解决这个问题提供一些建议，显然我创建了一个模型并设置了表列（我知道列名可以是任何东西？）但在这之后我有点迷失了

如果有人可以提供一个很好的示例，那么我可以按照这个过程并了解正在发生的事情

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:53:23.103

一种选择是`before_filter`在您的控制器上创建一个，您可以列出您希望它执行的控制器操作，即。您的 API 调用。

在从 before 过滤器调用的方法中，您可以将请求的详细信息保存到模型中。这将避免手动保存信息的需要。

基于您的示例响应的图像具有图像的 URL，因此您可以将其保存到模型中，假设您确信图像 URL 不会更改。如果您想保存图像本身，是的，我会推荐回形针或载波之类的东西。

如果您不想这样做，那么另一种选择，在我看来不太整洁的方式是使用按钮将 JSON 发布回执行我上面提到的控制器操作。

编辑：所以要保存到您的模型，例如称为 ApiCall，您可以在每次点击控制器操作时创建一个新的数据库条目。假设您的控制器操作被调用`get_info`，并且它传递了使您能够构建所描述的 JSON 响应的参数。您可以执行以下操作。

```
json_response = JSON.parse(your_response_object)
ApiCall.create(:artist_name => json_response["results"]["artistName"]) 
```

您显然可以包含您拥有的任何/所有信息。或者，您可以将整个响应作为 YAML 字符串存储在一个 db 属性中，并在检索时解析信息，由您决定。

```
yaml = your_response_object.to_yaml
ApiCall.create(:payload => yaml) 
```

# web-services - 我可以使用 PowerShell 的 New-WebServiceProxy 过滤基于 WSDL 的 SOAP 查询以仅发送一个参数吗？

> ID：14124352
> 
> 赞同：2
> 
> 时间：2013-01-02T15:13:45.913
> 
> 标签：web-services, powershell

问题：对 ServiceNow 的 ../cmdb_ci_win_server.do?WSDL 表的所有 Web 服务调用都返回零结果。

原因：我正在使用 PowerShell 的 New-WebServiceProxy 方法，该方法根据 ServiceNow 提供的 WSDL 定义动态创建一个 .NET .dll。WSDL 定义了 174 个参数，我希望只定义和查询其中一个参数，但是在执行时，.dll 总是在其查询的 WHERE 子句中发送其他 173 个空参数，这显然会导致不匹配的情况。

希望：动态 .dll 让我可以创建一个包含 174 个参数的参数对象，然后让我根据需要设置属性。我是否可以以某种方式创建一个仅包含我需要的单个参数的类似对象？我已经尝试使用 $param.PSObject.TypeNames.Insert(0,$paramClassName) 这样做，但是 $wsproxy.getRecords($param) 调用不能接受生成的 param 对象。此外，我无法直接添加本机属性，只能添加 NoteProperties。恢复使用原始参数对象，我可以删除 173 个参数吗？底层对象似乎是不可变的，但也许有一些我从未见过的技巧？

演示代码：

```
$cred = Get-Credential
$wsproxy = New-WebServiceProxy -uri 'https://snowtest/cmdb_ci_win_server.do?WSDL' -Credential $cred 

if ($wsproxy) {
    # Force $cred onto the new wsproxy, or it will default to non-authenticated calls
    $wsproxy.Credentials = $cred

    # The parameter object we'll send with the query must be built from the custom object. 
    # That requires we extract the class name from the method's parameter definition.  
    # All my attempts to create a custom query object failed, including forcing the classname. 
    $overloadDefinitions = $wsproxy.getRecords.OverloadDefinitions
    $paramClassName = $overloadDefinitions[0] -ireplace '^[^(]+\(([^ ]+).+$', '$1'
    $param = New-Object $paramClassName
    $param.host_name = 'ServerName'
    $wsproxy.getRecords($param)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T03:48:25.070

我不确定这是否适用于您的要求，但在我遵循这些说明之前，我无法成功与 ServiceNow Web 服务进行交互。

[https://wiki.servicenow.com/index.php?title=Microsoft_.NET_Web_Services_Client_Examples](https://wiki.servicenow.com/index.php?title=Microsoft_.NET_Web_Services_Client_Examples)

基本上，您正在生成一个 .NET Web 客户端，您需要取消选中该 URL 中要求中指定的框。

希望这可以帮助！

# android - Android - SupportMapFragment 与 GoogleMaps API 2.0 给出 IllegalArgumentException

> ID：14124354
> 
> 赞同：14
> 
> 时间：2013-01-02T15:13:48.473
> 
> 标签：android, maps, android-fragments, google-maps-api-2, supportmapfragment

我正在尝试使用为 Android 提供的最新 Map API 2.0。我正在使用支持库，因为我想支持 Android 2.2。以下是我的代码：

**主要活动类**

```
public class MainActivity extends FragmentActivity {

    public FragmentManager fManager ;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        fManager = getSupportFragmentManager();
        Button showMapButton = (Button) findViewById(R.id.showMapButton);
        showMapButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                loadMapFragment();
            }
        });
    }

    private void loadMapFragment() {
        MapPageFragment plotterFragment = new MapPageFragment();
        FragmentTransaction ft = fManager.beginTransaction();
        ft.replace(R.id.allFragmentsFrameLayout, plotterFragment);
        ft.addToBackStack(null);
        ft.commit();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**主 Activity 布局文件**

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/showMapButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Show Map"
        android:layout_marginLeft="30dp"
        android:layout_marginRight="30dp"
        android:layout_marginTop="30dp"
        android:layout_alignParentTop="true" />

    <FrameLayout
        android:id="@+id/allFragmentsFrameLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true">
        <!-- Put fragments dynamically -->
    </FrameLayout>

</RelativeLayout> 
```

**地图片段类**

```
public class MapPageFragment extends SupportMapFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
                                         Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        return inflater.inflate(R.layout.map_fragment_layout, container, false);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
    }
} 
```

**地图片段布局**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    class="com.google.android.gms.maps.SupportMapFragment"
    map:uiCompass="true"
    map:mapType= "normal"
    map:uiRotateGestures="true"
    map:uiScrollGestures="true"
    map:uiTiltGestures="true"
    map:uiZoomControls="true"
    map:uiZoomGestures="true" /> 
```

**Android 清单文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mapfragmentexample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission
        android:name="com.plotter.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>
    <uses-permission android:name="com.plotter.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyA5FtIeLQ1gGUihZIZPQVi3Yz_0l4NG9PY"/>
    </application>

</manifest> 
```

一切都是第一次正常工作。即当我单击`Show Map`按钮时，地图片段会被加载并显示地图。当我按下*返回*按钮时，地图片段被卸载，我可以再次看到`Show Map`按钮。

`Show Map`再次按下按钮时遇到问题。我收到以下错误：

```
FATAL EXCEPTION: main
android.view.InflateException: Binary XML file line #2: Error inflating class fragment
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:699)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:468)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:397)
    at com.mapfragmentexample.MapPageFragment.onCreateView(MapPageFragment.java:17)
    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
    at android.os.Handler.handleCallback(Handler.java:605)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4503)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
    at dalvik.system.NativeStart.main(Native Method)

Caused by: java.lang.IllegalArgumentException: Binary XML file line #2: 
       Duplicate id 0x7f040006, tag null, or parent id 0x0 with another fragment 
       for com.google.android.gms.maps.SupportMapFragment
    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:671)
    ... 18 more 
```

我没有找到错误或遗漏任何东西的地方。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-08T08:16:33.930

如果您**删除**. `onDestroyView()`不知道这是否是一个适当的解决方案。

```
public void onDestroyView() {
   super.onDestroyView(); 
   Fragment fragment = (getFragmentManager().findFragmentById(R.id.map));   
   FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
   ft.remove(fragment);
   ft.commit();
} 
```

像往常一样给它们充气`onCreateView()`

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.map, container, false);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-21T08:06:23.720

您需要使用 getChildFragmentManager() 来添加 SupportMapFragment，而不是通过 xml。

关于“为什么”，见官方文档：http: [//developer.android.com/about/versions/android-4.2.html#NestedFragments](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)

看看我的答案：[https ://stackoverflow.com/a/15512285/2183804](https://stackoverflow.com/a/15512285/2183804)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-27T09:52:02.483

使用此解决方案（类似于其他解决方案）：

```
public void onDestroyView() {

    FragmentManager fm = getActivity().getSupportFragmentManager();
    Fragment fragment = (fm.findFragmentById(R.id.map));

    if (fragment.isResumed()) {
        FragmentTransaction ft = fm.beginTransaction();
        ft.remove(fragment);
        ft.commit();
    }
    super.onDestroyView();
} 
```

在使用 if (fragment.isResumed) 之前我遇到了问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-06T22:51:34.423

当布局包含片段时，您不能将布局膨胀为**片段**。仅当动态添加到片段时才支持嵌套片段。[更多细节在这里](http://kyuritsolution.blogspot.com/2013/11/how-to-display-mapfragment-inside.html)！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-15T08:13:05.530

尝试这个

**地图片段布局**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:map="http://schemas.android.com/apk/res-auto"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/map"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
map:uiCompass="true"
map:mapType= "normal"
map:uiRotateGestures="true"
map:uiScrollGestures="true"
map:uiTiltGestures="true"
map:uiZoomControls="true"
map:uiZoomGestures="true" 
tools:context="the.package.name.of.mappagefragment.MapPageFragment" /> 
```

**地图片段类**

```
public class MapPageFragment extends SupportMapFragment 
{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    View rootView = super.onCreateView(inflater, container, savedInstanceState);
    if (rootView == null)
    {
        rootView = inflater.inflate(R.layout.map_fragment_layout, container, false);
    }
    return rootView;
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) 
{
    super.onViewCreated(view, savedInstanceState);
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-13T07:52:59.113

当我们尝试加载时，在您的活动原因中使用`dialog.SetContentView()`方法。`onCreate()`

再次对话框，它只加载对话框而不是整个活动生命周期，并导致它出现重复 ID 异常。

试试看。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-19T09:33:09.533

> > 我在 JakeWhartonViewPagerIndicatore 和 SherlockFragments 中遇到了同样的问题。这是解决问题的示例 TestFragment，感谢[Natalia](https://stackoverflow.com/users/1314695/natalia)提供上述解决方案。你的片段可能和我的有点不同。
> > 
> > 参考：[让 ActionBarSherlock 和 ViewPagerIndicator 玩起来不错](http://droidista.blogspot.com/2012/08/making-actionbarsherlock-and.html)
> > 
> > > ### *祝你好运..！！*

```
package com.example.vpiabstest;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import com.actionbarsherlock.app.SherlockFragment;

public class TestFragment extends SherlockFragment {
    private String mContent = "???";
    private String text;
    private static final String KEY_TAB_NUM = "key.tab.num";

    public static TestFragment newInstance(String text) {
        TestFragment fragment = new TestFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();
        args.putString(KEY_TAB_NUM, text);
        fragment.setArguments(args);

        return fragment;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        text = getString(R.string.tab_page_num) + mContent;

        View view = null;

        if(text.contains("2")) {
            view = inflater.inflate(R.layout.pinpoints_list, null);
        } else if(text.contains("1")) {
            view = inflater.inflate(R.layout.main_fragment_activity, null);
        } else {
            view = inflater.inflate(R.layout.activity_main, null);
            ((TextView)view.findViewById(R.id.text)).setText(text);
        }

        return view;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mContent =  getArguments() != null ? getArguments().getString(KEY_TAB_NUM) : "???";
    }

    public void onDestroyView() {
        super.onDestroyView();

        // Your Programing skills goes here

        if(text == null || !text.contains("1")) {
            return;
        }

        // Do Not Miss this
        try {
            Fragment fragment = (getFragmentManager().findFragmentById(R.id.map_fragment));  
            FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
            ft.remove(fragment);
            ft.commit();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-25T22:29:51.803

我使用了 Natalia 响应，但有时会破坏应用程序。使用这个，它可以完美地工作而不会损坏。

```
@Override
public void onDestroyView() {

  try{
    FragmentTransaction transaction = getSupportFragmentManager()
            .beginTransaction();

    transaction.remove(nestedFragment);

    transaction.commit();
  }catch(Exception e){
  }

    super.onDestroyView();
} 
```

[https://stackoverflow.com/a/7953801/3364157](https://stackoverflow.com/a/7953801/3364157)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-24T18:08:11.487

使用意图标志：

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK); 
```

调用主要活动时。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-28T04:18:14.830

```
Fragment fragment = (getChildFragmentManager().findFragmentById(R.id.mapview));
FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
ft.remove(fragment);
ft.commit(); 
```

使用它可以节省一天的时间。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2013-02-21T15:00:02.903

我有同样的问题。尝试添加...

```
android:name="com.mapfragmentexample.MapPageFragment" 
```

...`fragment`在布局文件中！

# cuda - CUDA 中的稀疏 Cholesky 分解

> ID：14124361
> 
> 赞同：1
> 
> 时间：2013-01-02T15:14:19.963
> 
> 标签：cuda, gpu, thrust, cusp-library

随着 CUDA 编程模型的成熟，我想知道是否有人知道在 NVIDIA GPU 上实现稀疏 Cholesky 分解的任何可用研究代码或开源库。

2012 年 5 月，我被 V. Volkov 指出了以下文献

[1] Christen 等人，2007 年使用 NVIDIA CUDA 技术平台的通用稀疏矩阵构建块，[http://www.cs.jhu.edu/~misha/ReadingSeminar/Papers/Christen07.pdf](http://www.cs.jhu.edu/~misha/ReadingSeminar/Papers/Christen07.pdf)

[2] Krawezik 和 Poole，2009 年，使用 GPU 加速 ANSYS 直接稀疏求解器，[http ://saahpc.ncsa.illinois.edu/09/papers/Krawezik_paper.pdf](http://saahpc.ncsa.illinois.edu/09/papers/Krawezik_paper.pdf)

[3] Yu et al., 2011, A CPU-GPU hybrid approach for the unsymmetric multifrontal method, [http://www.sciencedirect.com/science/article/pii/S0167819111001293](http://www.sciencedirect.com/science/article/pii/S0167819111001293)

[4] George 等人，2011 年，GPU 上稀疏 SPD 矩阵的多正面分解，http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber= [6012808](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6012808)

[5] Lucas 等人，2012 年，图形处理单元上的多前沿稀疏矩阵分解，[ftp ://ftp.isi.edu/isi-pubs/tr-677.pdf](ftp://ftp.isi.edu/isi-pubs/tr-677.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:52:16.860

Tim Davis 工作[suitesparse](http://faculty.cse.tamu.edu/davis/suitesparse.html)和 nVIDIA 的加速[cusparse](https://developer.nvidia.com/cusparse)。AMD 可能会在不久的将来支持[Cholesky 分解。](https://github.com/clMathLibraries/clSPARSE)

# mysql - 获取“[Err] 1111 - 组函数的无效使用”错误

> ID：14124365
> 
> 赞同：0
> 
> 时间：2013-01-02T15:14:23.657
> 
> 标签：mysql, group-by, mysql-error-1111

我目前正在做这个查询：

```
SELECT Date_Format(M.Signupdate,"%Y-%m") as YearMonth,
SUM(IF(Count(H.Nr) >= 0,1,0)) ,
SUM(IF(Count(H.Nr) >= 1,1,0)) ,
SUM(IF(Count(H.Nr) >= 2,1,0)) ,
SUM(IF(Count(H.Nr) >= 3,1,0)) 
FROM people M 
INNER JOIN History H ON H.login = M.Login 
WHERE
M.Masteraccount = "" AND
M.logincount > 5 AND
DATEDIFF(M.lastlogin,M.Signupdate) >= 3 AND
DATEDIFF(H.EntryDate,M.Signupdate) <= 151
GROUP BY YearMonth ORDER BY YearMonth ; 
```

但是，我不断收到“[Err] 1111 - 组函数的无效使用”错误。如果我删除 SUM，它就可以正常工作。请问有人给我答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:15:10.037

您不能在`GROUP BY`. 您需要将 放置在`Date_Format(M.Signupdate,"%Y-%m")`中`GROUP BY`才能使其正常工作。此外，您不能嵌套聚合函数，因此您需要使用子查询来获取`count`，然后使用`sum`：

```
select YearMonth,
    SUM(IF(CountNR >= 0,1,0)) ,
    SUM(IF(CountNR >= 1,1,0)) ,
    SUM(IF(CountNR >= 2,1,0)) ,
    SUM(IF(CountNR >= 3,1,0)) 
from
(
    SELECT Date_Format(M.Signupdate,"%Y-%m") as YearMonth,
        Count(H.Nr) CountNR 
    FROM people M 
    INNER JOIN History H 
      ON H.login = M.Login 
    WHERE M.Masteraccount = "" AND
      M.logincount > 5 AND
      DATEDIFF(M.lastlogin,M.Signupdate) >= 3 AND
      DATEDIFF(H.EntryDate,M.Signupdate) <= 151
    GROUP BY Date_Format(M.Signupdate,"%Y-%m") 
) src
GROUP BY YearMonth
ORDER BY YearMonth; 
```

# python - python内存分配跟踪

> ID：14124367
> 
> 赞同：4
> 
> 时间：2013-01-02T15:14:34.710
> 
> 标签：python, memory, allocation

我的代码连续分配内存（每秒约 12kb）。运行时间为 8 小时，内存很大！

因此，我想跟踪我的 python 代码分配内存的时刻/代码行。

您可以通过以下方式处理已处理的代码行：

```
python -m trace --count -C ./tmp code.py 
```

这会生成一个视图，您可以在其中查看该行的执行频率。看起来像：

**代码覆盖**

```
1:     import sys
1:     import os
1534:  while 1:
1534:      print "foo" 
```

我需要这个来分配内存。如果可能的话

```
1245 B    import sys
893 B     import os
17.46 KB  import somecode 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:23:07.803

看起来这个问题已经在这里得到了回答：[Python memory profiler](https://stackoverflow.com/questions/110259/python-memory-profiler)

也许这个可以帮助你： http: [//pypi.python.org/pypi/memory_profiler](http://pypi.python.org/pypi/memory_profiler)

从文档中，执行将选项传递`-m memory_profiler`给 python 解释器的代码以加载 memory_profiler 模块并将逐行分析打印到标准输出。如果文件名是 example.py，这将导致：

```
$ python -m memory_profiler example.py 
```

输出将如下：

```
Line #    Mem usage  Increment   Line Contents
==============================================
     3                           @profile
     4      5.97 MB    0.00 MB   def my_func():
     5     13.61 MB    7.64 MB       a = [1] * (10 ** 6)
     6    166.20 MB  152.59 MB       b = [2] * (2 * 10 ** 7)
     7     13.61 MB -152.59 MB       del b
     8     13.61 MB    0.00 MB       return a 
```

# java - 为什么我的 AES Cipher 在 DECRYPT_MODE 的 init 上抛出 InvalidKeyException

> ID：14124370
> 
> 赞同：5
> 
> 时间：2013-01-02T15:14:53.740
> 
> 标签：java, encryption, aes, secret-key, initialization-vector

为什么这个初始化会成功：

```
Cipher AESCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
AESCipher.init(Cipher.ENCRYPT_MODE, secretKey, secRandom); 
```

虽然这失败了：

```
Cipher AESCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
AESCipher.init(Cipher.DECRYPT_MODE, secretKey, secRandom); 
```

在线程“main”java.security.InvalidKeyException 中引发异常：缺少参数

secretKey 由 KeyGenerator 生成，secureRandom 由 SecureRandom.getInstance("SHA1PRNG") 与随机静态种子集生成。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T19:37:51.310

正如 CodeInChaos 正确推测的那样，SecureRandom 实例用于在使用`AESCipher`创建实例时派生随机 IV `Cipher.ENCRYPT_MODE`。但是，您在以解密模式创建 Cipher 实例时将其作为参数提供。这个毫无意义的小代码片段显示了一个示例。

```
public static void main(String[] args) throws Exception {
    SecureRandom secRandom = SecureRandom.getInstance("SHA1PRNG");
    KeyGenerator kg = KeyGenerator.getInstance("AES");
    kg.init(128, secRandom);
    Key secretKey = kg.generateKey();
    Cipher AESCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    AESCipher.init(Cipher.ENCRYPT_MODE, secretKey, secRandom);
    IvParameterSpec iv = new IvParameterSpec(AESCipher.getIV());
    AESCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    AESCipher.init(Cipher.DECRYPT_MODE, secretKey,iv, secRandom);
} 
```

此外，您声称您正在使用静态种子初始化 SecureRandom 实例表明对该类的误解。SecureRandom 不保证您在提供相同种子时将获得相同的输出。如果您仔细查看[Javadocs](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)，您会发现它尽可能地尝试从其他来源提供一些真实的熵。

编辑1：

感谢 owlstead 在审查答案时一贯的彻底。有关其他讨论，请参阅他对相关问题的[回答。](https://stackoverflow.com/questions/13923247/does-the-sha1prng-algorithm-for-securerandom-use-dev-random-for-entropy)SHA1PRNG 的源代码可[在此处](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/sun/security/provider/SecureRandom.java)在线获取。这有点棘手，但是如果您在向实例询问任何随机字节*之前提供种子，那么输出将是完全确定的。*所以我之前的说法是不正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T17:48:52.627

只需使用您正在应用[的 SecureRandom 阅读 init 方法的 JavaDoc：](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html#init%28int,%20java.security.Key,%20java.security.SecureRandom%29)

> 如果此密码需要任何不能从给定密钥派生的算法参数，则底层密码实现应该自己生成所需的参数（使用特定于提供程序的默认值或随机值），如果它正在初始化以进行加密或密钥包装，并且`InvalidKeyException`如果它正在为解密或密钥解包而初始化，则引发一个。可以使用`getParameters`or检索生成`getIV` 的参数（如果参数是 IV）。

您必须将加密的 IV 传输到解密方法，例如将其添加到密文中。IV可以以明文形式转移。使用`IvParameterSpec`而不是`SecureRandom`设置IV进行解密。

# html - div中的“锁定”图像

> ID：14124371
> 
> 赞同：-1
> 
> 时间：2013-01-02T15:14:56.393
> 
> 标签：html, css, positioning, image

我想将图像放置在 div 中的某个位置，但是在调整窗口大小时它会移动到另一个 div 后面。我需要它始终在同一个地方。

HTML：

```
<div id="gallery">

<div id="gallerytext">
<p>This week's<br />heroes</p>
</div>

<div id="kranz">
<img src="images/kranz.png" alt="kranz" width="310px" />
</div>

<div id="pic1">
<img src="frontgallery/1.jpg" alt="gallery image 1" width="20%" />
</div>

<div id="pic2">
<img src="frontgallery/2.jpg" alt="gallery image 2" width="20%" />
</div>

<div id="pic3">
<img src="frontgallery/3.jpg" alt="gallery image 3" width="20%" />
</div>

<div id="pic4">
<img src="frontgallery/4.jpg" alt="gallery image 4" width="20%" />
</div>

<div id="pic5">
<img src="frontgallery/5.jpg" alt="gallery image 5" width="20%" />
</div>

<div id="pic6">
<img src="frontgallery/6.jpg" alt="gallery image 6" width="25%" />
</div>

<div id="pic7">
<img src="frontgallery/7.jpg" alt="gallery image 7" width="20%" />
</div>

<div id="pic8">
<img src="frontgallery/8.jpg" alt="gallery image 8" width="20%" />
</div>

<div id="pic9">
<img src="frontgallery/9.jpg" alt="gallery image 9" width="20%" />
</div>

<div id="entergal">
<a href="index.html">Enter contest</a>
</div>

</div> 
```

CSS：

```
#kranz img {
    position:absolute;
    left:42%;
    margin-left:-50px;
    margin-top:-13%;
    width:275px;
} 
```

“图库”中的图像是这样放置的：

```
#pic2 img {
    display:block;
    float:left;
    margin-left:10%;
    margin-top:10%;
    -moz-box-shadow: 5px 5px 10x #000000;
    -webkit-box-shadow: 5px 5px 10px #000000;
    box-shadow: 5px 5px 10px #000000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:27:35.310

不知道我是否理解正确......

但尝试分配

```
position:relative; 
```

到所有包含绝对定位图像的 div。

如果一个元素有 position:absolute; 它的位置是从下一个相对或绝对定位的父级计算的。

如果定位的元素没有向右重叠，请尝试 z-index：

在顶部元素

```
z-index:2 
```

“背后”元素

```
z-index:1; 
```

最高的指数在上面。

# jquery - ko.observableArray() 对于 1000+ 来说非常慢 元素

> ID：14124372
> 
> 赞同：14
> 
> 时间：2013-01-02T15:15:00.843
> 
> 标签：jquery, knockout.js

有关示例，请参阅我的 jsfiddler。

[http://jsfiddle.net/cYYEt/](http://jsfiddle.net/cYYEt/)

如果有另一种方式，我们应该绑定/创建我们的数组/等也可以。我已经通过使用列表或跨度解决了这个问题

谢谢！

JS

```
var mainViewModel = function () {
    var self = this;

    this.Items = ko.observableArray();

    this.init = function () {
        var itemsArray = [];
        for(var i = 0; i < 1300; i++){
            itemsArray.push("My value is: " + i);
        }
        self.Items(itemsArray );
    };
};

$(function () {
    myApp = new mainViewModel();
    ko.applyBindings(myApp);
    myApp.init();
});​ 
```

HTML

```
<!-- ko foreach: Items -->
    <div data-bind="text: $data"></div>
<!-- /ko -->​ 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-02T15:30:16.717

通过删除围绕“模板”的文本节点，您可以在 Chrome 中获得不错的改进，例如：http: [//jsfiddle.net/rniemeyer/RAfNv/](http://jsfiddle.net/rniemeyer/RAfNv/)。

```
<!-- ko foreach: Items --><div data-bind="text: $data"></div><!-- /ko --> 
```

我认为我们会在某个时候寻求在核心方面改进这一点。我们之前看过这样的内容：[https](https://github.com/SteveSanderson/knockout/pull/709) ://github.com/SteveSanderson/knockout/pull/709 ，但此时并未最终添加任何更改。

# r - 在 R 图形窗口中组合 base 和 ggplot 图形

> ID：14124373
> 
> 赞同：76
> 
> 时间：2013-01-02T15:15:02.010
> 
> 标签：r, plot, ggplot2, base, biwavelet

我想生成一个结合了基本图形和 ggplot 图形的图形。以下代码使用 R 的基本绘图功能显示了我的图形：

```
t <- c(1:(24*14)) 
P <- 24 
A <- 10 
y <- A*sin(2*pi*t/P)+20

par(mfrow=c(2,2))
plot(y,type = "l",xlab = "Time (hours)",ylab = "Amplitude",main = "Time series")
acf(y,main = "Autocorrelation",xlab = "Lag (hours)", ylab = "ACF")
spectrum(y,method = "ar",main = "Spectral density function", 
         xlab = "Frequency (cycles per hour)",ylab = "Spectrum")
require(biwavelet)
t1 <- cbind(t, y)
wt.t1=wt(t1)
plot(wt.t1, plot.cb=FALSE, plot.phase=FALSE,main = "Continuous wavelet transform",
     ylab = "Period (hours)",xlab = "Time (hours)") 
```

产生 ![在此处输入图像描述](../Images/b60d6aee44cbfde572537bf675883e0e.png)

这些面板中的大多数看起来足以让我包含在我的报告中。但是，显示自相关的图需要改进。使用 ggplot 看起来好多了：

```
require(ggplot2)
acz <- acf(y, plot=F)
acd <- data.frame(lag=acz$lag, acf=acz$acf)
ggplot(acd, aes(lag, acf)) + geom_area(fill="grey") +
  geom_hline(yintercept=c(0.05, -0.05), linetype="dashed") +
  theme_bw() 
```

![在此处输入图像描述](../Images/f93eb2b57cf02f5c79978cac2db55790.png)

但是，由于 ggplot 不是基本图形，我们不能将 ggplot 与 layout 或 par(mfrow) 结合使用。如何用 ggplot 生成的自相关图替换从基础图形生成的自相关图？我知道如果我的所有数字都是用 ggplot 制作的，我可以使用 grid.arrange 但是如果在 ggplot 中只生成一个图，我该怎么做？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-02T16:29:27.390

使用 gridBase 包，您只需添加 2 行即可。我认为如果你想用网格做有趣的情节，你只需要理解和掌握**视口**。它确实是网格包的基本对象。

```
vps <- baseViewports()
pushViewport(vps$figure) ##   I am in the space of the autocorrelation plot 
```

baseViewports() 函数返回三个网格视口的列表。我这里使用 figure Viewport 对应于**当前**绘图的图形区域的视口。

这是最终解决方案的外观：

![在此处输入图像描述](../Images/f2f13f84f17c9aee27a5a74ec9361420.png)

```
library(gridBase)
library(grid)

par(mfrow=c(2, 2))
plot(y,type = "l",xlab = "Time (hours)",ylab = "Amplitude",main = "Time series")
plot(wt.t1, plot.cb=FALSE, plot.phase=FALSE,main = "Continuous wavelet transform",
     ylab = "Period (hours)",xlab = "Time (hours)")
spectrum(y,method = "ar",main = "Spectral density function", 
         xlab = "Frequency (cycles per hour)",ylab = "Spectrum")
## the last one is the current plot
plot.new()              ## suggested by @Josh
vps <- baseViewports()
pushViewport(vps$figure) ##   I am in the space of the autocorrelation plot
vp1 <-plotViewport(c(1.8,1,0,1)) ## create new vp with margins, you play with this values 
require(ggplot2)
acz <- acf(y, plot=F)
acd <- data.frame(lag=acz$lag, acf=acz$acf)
p <- ggplot(acd, aes(lag, acf)) + geom_area(fill="grey") +
  geom_hline(yintercept=c(0.05, -0.05), linetype="dashed") +
  theme_bw()+labs(title= "Autocorrelation\n")+
  ## some setting in the title to get something near to the other plots
  theme(plot.title = element_text(size = rel(1.4),face ='bold'))
print(p,vp = vp1)        ## suggested by @bpatiste 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-02T16:44:57.597

您可以将 print 命令与 grob 和视口一起使用。
首先绘制你的基本图形，然后添加 ggplot

```
library(grid)

# Let's say that P is your plot
P <- ggplot(acd, # etc... )

# create an apporpriate viewport.  Modify the dimensions and coordinates as needed
vp.BottomRight <- viewport(height=unit(.5, "npc"), width=unit(0.5, "npc"), 
                           just=c("left","top"), 
                           y=0.5, x=0.5)

# plot your base graphics 
par(mfrow=c(2,2))
plot(y,type #etc .... )

# plot the ggplot using the print command
print(P, vp=vp.BottomRight) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-28T21:21:38.857

我是 gridGraphics 包的粉丝。出于某种原因，我在使用 gridBase 时遇到了麻烦。

```
library(ggplot2)
library(gridGraphics)
data.frame(x = 2:10, y = 12:20) -> dat
plot(dat$x, dat$y)
grid.echo()
grid.grab() -> mapgrob
ggplot(data = dat) + geom_point(aes(x = x, y = y)) 
pushViewport(viewport(x = .8, y = .4, height = .2, width = .2))    
grid.draw(mapgrob) 
```

[![在此处输入图像描述](../Images/9a98c8d4ebea94540a2e26b375e671cb.png)](https://i.stack.imgur.com/rtivM.png)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-03-17T07:06:49.313

[`cowplot`](https://cran.r-project.org/web/packages/cowplot/vignettes/plot_grid.html)包具有`recordPlot()`捕获基本 R 图的功能，以便可以将它们组合在一起`plot_grid()`。

```
library(biwavelet)
library(ggplot2)
library(cowplot)
library(gridGraphics)

t <- c(1:(24*14)) 
P <- 24 
A <- 10 
y <- A*sin(2*pi*t/P)+20

plot(y,type = "l",xlab = "Time (hours)",ylab = "Amplitude",main = "Time series")
### record the previous plot
p1 <- recordPlot()  

spectrum(y,method = "ar",main = "Spectral density function", 
         xlab = "Frequency (cycles per hour)",ylab = "Spectrum")
p2 <- recordPlot()

t1 <- cbind(t, y)
wt.t1=wt(t1)
plot(wt.t1, plot.cb=FALSE, plot.phase=FALSE,main = "Continuous wavelet transform",
     ylab = "Period (hours)",xlab = "Time (hours)")
p3 <- recordPlot()

acz <- acf(y, plot=F)
acd <- data.frame(lag=acz$lag, acf=acz$acf)
p4 <- ggplot(acd, aes(lag, acf)) + geom_area(fill="grey") +
  geom_hline(yintercept=c(0.05, -0.05), linetype="dashed") +
  theme_bw()

### combine all plots together
plot_grid(p1, p4, p2, p3,
          labels = 'AUTO',
          hjust = 0, vjust = 1) 
```

![](../Images/92c70b9a64653054fc7566d3b11fce5a.png)

^(由[reprex 包](https://reprex.tidyverse.org)（v0.2.1.9000）于 2019-03-17 创建)

# android - 从游标获取表信息（存在/不存在）

> ID：14124374
> 
> 赞同：0
> 
> 时间：2013-01-02T15:15:06.613
> 
> 标签：android

在我的活动中需要检查我使用的表是否存在

```
 Cursor cursor = marksdb.rawQuery("SELECT count(*) FROM sqlite_master WHERE type='table' AND name='"+classt+"'", null); 
```

我得到 1 如果表存在 0 否则我需要检查光标中的值以供我使用

```
if(cursor.getCount()==1){
        // get values from cursor here
         callclasstb();
        }
     else{
         tv.setVisibility(View.VISIBLE);
        subjectet.setEnabled(false);
        markset.setEnabled(false);
        markssp.setEnabled(false);
     } 
```

但在所有情况下，我都会得到值 1，因为 getcout() 返回值 1 r 0 并且

```
callclasstb(); 
```

没有执行我需要在 if{....} 中写入的条件以使其执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:34:31.817

`cursor.getCount()`在您的情况下，将始终返回 1（结果集中的“行”数）。您需要弄清楚通过光标返回的内容。

```
 Cursor cursor = marksdb.rawQuery(...);
     cursor.moveToFirst(); // first "row"
     int nTableExists = cursor.getInt(0);
     cursor.close();

     if (nTableExists) { // != 0
        ...do something...
     } 
```

# variables - 使用变量作为 TCL 过程的默认值的更直观的方法

> ID：14124379
> 
> 赞同：1
> 
> 时间：2013-01-02T15:15:15.550
> 
> 标签：variables, arguments, tcl, dereference, procedures

因此，我使用了类似名称的线程来使用 list 命令使其工作。这是我的工作代码：

```
proc E364xA::Connect [list [list VisaAlias ${E364xA::DefaultAlias}]] {

    ::VISA::Connect $VisaAlias
} 
```

现在，通过使用存储在命名空间 eval 中的 DefaultAlias 中的值，这目前正在工作。我想知道是否有更直观的方法可以做到这一点：

```
proc E364xA::Connect {{VisaAlias ${E364xA::DefaultAlias}}} {

    ::VISA::Connect $VisaAlias
} 
```

这样你就不会有两个列表命令混淆水域。有任何想法吗？

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:27:46.310

我没有看到任何提供更多语法糖的不同方式。但是，您可以执行以下操作：

```
proc E364xA::Connect {{VisaAlias -use-default}} {
    if {$VisaAlias == "-use-default"} { 
        set VisaAlias ${E364xA::DefaultAlias}
    }

    ::VISA::Connect $VisaAlias
} 
```

示例用法：

```
E364xA::Connect                 ;# Use the default value
E364xA::Connect -use-default    ;# Use the default value
E364xA::Connect somethingElse   ;# Non default 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:28:03.690

也许这个？（删除了以前的编辑。）

```
proc E364xA::Connect "{VisaAlias {$E364xA::DefaultAlias}}" {

    ::VISA::Connect $VisaAlias
} 
```

**测试**

这是一个简化的测试：

```
set def "hello, world!"

proc test "{var {$def}}" {
    puts $var
}

test 
```

输出：

```
hello, world! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T16:37:23.043

您可以使用该`args`参数，但它并不比您的代码清晰得多，并且它隐藏了您的 proc 最多应采用 1 个参数的事实。

```
proc E364xA::Connect args {
    if {[llength $args] == 0} {
        set VisaAlias $E364xA::DefaultAlias
    } else {
        set VisaAlias [lindex $args 0]
    }
    ::VISA::Connect $VisaAlias
} 
```

或者

```
proc E364xA::Connect args {
    ::VISA::Connect [expr {[llength $args] ? [lindex $args 0] : $E364xA::DefaultAlias}]
} 
```

# php - id 在 PHP 中的 2 个页面之间传递

> ID：14124380
> 
> 赞同：0
> 
> 时间：2013-01-02T15:15:16.950
> 
> 标签：php, variables, get

我一直在研究一种将变量从一个页面传递到另一个页面的方法。这是我的考试，我需要帮助，因为我的老师说我可以使用互联网寻求帮助。我为传递变量而创建的这个链接不起作用，因为学生 ID 或电子邮件应该被传递到链接中。这是相关代码：

```
echo "<table border=1><th colspan=7>Placed Orders</th></tr><tr><td>Student ID or Email</td><td>Name</td><td>Phone Number</td><td>Room Number</td><td>Order</td><td>Approval</td><td>&nbsp;</td></tr>";
while ($row=mysql_fetch_array($result)) {
    $id = $row["StudentIDorEmail"];
    $name = $row["Name"];
    $phone = $row["Phone"];
    $roomnumber = $row["RoomNumber"];
    $order = $row["Orders"];
    $approval = $row["Approved"];
    echo "<tr><td align='center'>" . $id . "</td><td align='center'>" . $name . "</td><td align='center'>" . $phone . "</td><td align='center'>" . $roomnumber . "</td><td align='center'>" . $order . "</td><td align='center'>" . $approval . "</td><td align='center'><a href='approve.php?id=".$id."'>Fill Order</a></td></tr>";
}
echo "</table>"; 
```

我正在尝试将变量传递给approve.php 页面，以便我可以将该行设置为1，然后当它更改为1 时，它会从数据库中删除。这一直导致我不断出错，我不知道出了什么问题。下面是页面的相关代码的另一部分，它应该被传入和传出：

```
$id = $_GET["StudentIDorEmail"];
$query = "UPDATE tracker WHERE StudentIDorEmail=$id";
if (mysql_query($query, $con)) {
$query1 = "DELETE FROM tracker WHERE Approved=1";
if(mysql_query($query1, $con)) {
    echo "Order was filled successfully!";
} else {
    echo "Error: " . mysql_error();
} 
```

}

请帮忙，因为这是我考试的要求，我几乎完成了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T15:17:21.290

你的链接是`'approve.php?id=".$id."'`

这意味着您需要访问`$_GET['id']`，而不是`$_GET['StudentIDorEmail']`.

为了将来参考，试着`var_dump($_GET)`看看那里有什么变量。

编辑：您应该了解 SQL 注入。

![XKCD](../Images/ae64e1cbe3e51cba804e9c9a5c5a2db7.png)

在这种情况下，您可以使用`$id = intval($_GET['id'])`来确保您只获得数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:18:26.333

这个真的很简单

```
<a href='approve.php?id=".$id."'> 
```

将其更改为：

```
<a href='approve.php?StudentIDorEmail=".$id."'> 
```

# ads - 当我去查看朋友的照片时，会出现约会服务的广告

> ID：14124383
> 
> 赞同：-1
> 
> 时间：2013-01-02T15:15:23.727
> 
> 标签：ads, facebook-ads-api

最近，当我去查看朋友发布的照片​​时，出现了一个广告，宣传电话约会服务。图片显示一个几乎裸体的女人问你是否想和她说话。如果您单击“否”，它仍会将您带到此约会电话网站。当您单击“x”关闭此框时，您仍会被定向到该站点。这不仅限于一个朋友，而是我的任何朋友的照片。

我已经搜索了我的隐私设置，但没有看到在哪里可以阻止这种情况发生。这是非常不恰当的广告。

我怎样才能让它停止出现？今天我去给一个孩子看一张朋友的照片，他有小狗要卖，这张照片出现了。这不是我想看到的，当然还有孩子。

帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:20:50.833

应该是你下载安装有问题吧？这些类型的广告不是 facebook 通常显示的广告，因此您应该尝试的测试是更改浏览器并检查它是否再次显示，您可能会看到使用另一个浏览器这些广告会消失，如果是这样...清理工具栏上的其他浏览器和类似的东西......

# ruby-on-rails - mongoid 返回对象包含引用

> ID：14124384
> 
> 赞同：0
> 
> 时间：2013-01-02T15:15:25.857
> 
> 标签：ruby-on-rails, mongodb, mongoid

所以我正在使用 Mongoid 并且我想返回一个带有它的引用的对象。可以说我有：

```
class User
  include Mongoid::Document
  has_many :pictures
end

class Picture
  include Mongoid::Document
  belongs_to :user
end 
```

问题在于这段代码：

```
users = User.all #goes to the db
users.each do |user|
  pic = user.pictures.first # <--- bad! hitting the db again here
end 
```

那么，如何返回一个包含它的引用的对象（用户），这样我就不需要再次访问数据库了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:17:34.827

这通常通过加入 ActiveRecord 来完成。像这样的东西：

```
 User.includes(:pictures).each do |user| 
```

但是由于 MongoDB 不支持连接，因此无法一次性加载父文档及其引用的文档。如果这成为问题，您应该考虑在用户文档中嵌入图片（但是，这可能会导致更严重的性能损失）。

### 更新

Mongoid 有一种方法可以快速[加载](http://mongoid.org/en/mongoid/docs/querying.html)（在页面中搜索“Eager Loading”）引用的关系，但仍然会进行单独的查询。数据库不会在关系的后续访问中受到影响。

# regex - egrep 搜索：每个字母最多出现 2 次

> ID：14124387
> 
> 赞同：0
> 
> 时间：2013-01-02T15:15:40.990
> 
> 标签：regex, expression, md5, grep

好的，我遇到了这个问题，我有一个 md5 列表和旁边的一个单词，用空格分隔，我需要过滤掉一些行。

示例片段：

```
...
F08A4C9263AD215D70B9C216F0B385CB wrapup
7B286E6F0615D64ACD4A7BC3578871DD wrath
8E35BA3D27A7730840EB1694386F69A0 wrathful
096762EA6790EDA22BF2369347FD53AC wreak
56AC6677205EB591A7173BADBB610F5C wreath
A85C0CB6C0367AF9D23442DF56EC9E1C wreathe
9E44AAE612306D44B91C4162DB5C26B7 wreck
6D9C795CBB3075DC1A482F6F78DC6D68 wreckage
BD907BC4DC65934D133BD5C472B78CC0 wrench
758C70E9B6F437D49D98D92E28E95939 wrest
81A4471F73DFDA0B534F58F4E1501FAB wrestle
94183CC7C7A66338DE89DB9C7460A8A2 wretch
AFEED5CE5BACCEC17EC54E68A97CCD0F wriggle
... 
```

**我需要一个(e)grep**的正则表达式，它会拉出每个字母（所以 [AF]）最多只出现 2 次的每一行。所以一个例子是：

```
4F2048B829C2834A23832F28928DE38E turtle 
```

如果有人可以帮助我，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:41:04.347

你可以使用：

```
egrep -v "^\S*([A-F])\S*\1\S*\1" inputfile 
```

这将列出不包括在同一行中重复三次的字母 AF 的每一行。

编辑：更改以避免匹配单词中的大写字符...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:49:57.583

你提到：

> 拉出每个字母（因此 [AF]）最多只出现 2 次的每一行。

所以我的理解是，选择的行应该包含0-2 [AF]。基于此，以下 awk oneliner 应该可以完成这项工作：

```
awk  'BEGIN{FS=""}{delete a;for(i=1;i<=NF;i++)if($i~/[A-F]/){a[$i]++;if(a[$i]>2)next}}1' file 
```

测试

请注意，给定的输入**没有**满足您的要求的行。所以我在末尾添加了“乌龟”行：

```
kent$  echo "F08A4C9263AD215D70B9C216F0B385CB wrapup
7B286E6F0615D64ACD4A7BC3578871DD wrath
8E35BA3D27A7730840EB1694386F69A0 wrathful
096762EA6790EDA22BF2369347FD53AC wreak
56AC6677205EB591A7173BADBB610F5C wreath
A85C0CB6C0367AF9D23442DF56EC9E1C wreathe
9E44AAE612306D44B91C4162DB5C26B7 wreck
6D9C795CBB3075DC1A482F6F78DC6D68 wreckage
BD907BC4DC65934D133BD5C472B78CC0 wrench
758C70E9B6F437D49D98D92E28E95939 wrest
81A4471F73DFDA0B534F58F4E1501FAB wrestle
94183CC7C7A66338DE89DB9C7460A8A2 wretch
AFEED5CE5BACCEC17EC54E68A97CCD0F wriggle
4F2048B829C2834A23832F28928DE38E turtle"|awk  'BEGIN{FS=""}{delete a;for(i=1;i<=NF;i++)if($i~/[A-F]/){a[$i]++;if(a[$i]>2)next}}1'                          
4F2048B829C2834A23832F28928DE38E turtle 
```

# android - Android AsyncTask 与特定情况下的线程

> ID：14124388
> 
> 赞同：3
> 
> 时间：2013-01-02T15:15:41.490
> 
> 标签：android, multithreading, android-asynctask, android-compatibility

我正在开发一个看起来类似于 Google Play 应用程序的应用程序（在片段内使用 gridviews 滑动视图，此外 gridview [图像 + 文本] 中的数据是从远程服务器检索的）。

我的问题是后台任务。我无法决定使用什么来从互联网上检索数据。主要是我试图决定是使用 AsyncTask 还是手动线程。当然，实现 AsyncTask 会更容易，但经过一些研究，我注意到很多人发现它有限制。

在我的特殊情况下，我想从 Internet 下载数据作为 Json 对象，解析它们并在 gridview 中显示数据。网格视图最多有 30 个项目，每个项目包含一个缩略图和 3 个文本视图。在 Android 文档中，他们说 AsyncTask 适合短操作（最多几秒钟）。填写多达 30 个项目是否会被视为一项短期操作？我希望同时获取数据。我还想支持 API 8 及更高版本的 Android 手机。我读到对于不同的 API，AsyncTask 的行为不同（串行或同时）

我的问题是：为我的应用程序使用 AsyncTask 是否合适？还是我必须手动完成所有操作？ThreadPoolExecutor 是第三种方法吗？比手动穿线容易吗？

任何建议都将不胜感激，如果不对这个问题做出决定，我就无法继续实施。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:08:55.070

去年在伦敦参加[DroidCon](http://uk.droidcon.com/)时，一个演讲让我注意到为什么使用 AsyncTasks 从网络加载数据是不可靠的。

此演示文稿是关于[RoboSpice 库](https://github.com/octo-online/robospice)的。

该站点还有一个[非常好的信息图](https://raw.github.com/octo-online/robospice/master/gfx/RoboSpice-InfoGraphics.png)，解释了为什么 AsyncTasks 不可靠以及 RoboSpice 为修正这些问题所做的工作。

免责声明：我绝不隶属于 RoboSpice，也从未尝试过。他们的演示给我留下了深刻的印象并确信这是一个值得尝试的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:33:15.280

我的理解是，关于仅将 AsyncTasks 用于短操作的评论更多地旨在不期望在长操作完成时可以使用相同的视图。例如，如果用户离开应用程序并返回或当前活动因某种原因消失。解决这个问题的典型方法是使用服务并在那里启动一个普通的旧线程，然后发送一些消息告诉当前活动在操作完成时刷新。

下载和处理您的数据可能是最长的操作。所以我会以此为基础来判断它是短的还是长的。如果您根本不关心持久化数据并且不介意在用户离开和返回时重新开始下载，您可以使用 AsyncTask 而不用考虑。

如果您使用的是 GridView，则您应该只填充足够的视图，以便一次仅超过屏幕上显示的数量。

我会说 AsyncTask 在您的情况下很好，假设它是几千字节的数据而不是兆字节或数百千字节。Megs 的数据，我会说移动到带有线程的服务。几百k，是折腾起来的。

另外，请查看 Loaders ...如果您想查看更适合这种加载的替代方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T15:31:28.230

朋友，我正在按照您的需要在一个项目中工作，并且要支持 API 8 及更高版本，您应该使用 Asynctask 下载任何内容，否则您将遇到 API 15 及更高版本的崩溃，因为它甚至不会让您运行您的应用程序即使是短期操作也没有 AsyncTask。

因此，由于我几乎完成了您需要的所有工作，并且它在上面的 API 9 中运行良好，您应该使用 Asynctask，我已经使用 AsyncTask 实现了 SherlockActionbar、EndlessAdapter 和 ViewPager，所以继续，如果您需要更多帮助，请再次询问之后。

# c++ - c++ std::vector 搜索值

> ID：14124395
> 
> 赞同：11
> 
> 时间：2013-01-02T15:15:56.590
> 
> 标签：c++, search, vector, iterator

我正在尝试优化`std::vector`“搜索”-基于索引的迭代向量并返回与“搜索”条件匹配的元素

```
struct myObj {
   int id;
   char* value;
};

std::vector<myObj> myObjList; 
```

创建几千个具有唯一`id`值和值的条目，并将它们推送到向量`myObjList`。

检索`myObj`与`id`. 目前我正在索引迭代，如：

```
for(int i = 0; i < myObjList.size(); i++){
   if(myObjList.at(i).id == searchCriteria){
    return myObjList.at(i);
   }
} 
```

注意：`searchCriteria = int`。所有元素都有唯一`id`的。以上完成了这项工作，但可能不是最有效的方式。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-02T15:20:55.150

C++ 标准库有一些抽象算法，它们赋予 C++ 一种*函数式风味*，正如我所说的，它让您可以更专注于搜索标准，而不是如何实现搜索本身。这适用于许多其他算法。

您正在寻找的算法是[`std::find_if`](http://en.cppreference.com/w/cpp/algorithm/find)，通过迭代器范围进行简单的线性搜索。

在 C++11 中，您可以使用 lambda 来表达您的标准：

```
std::find_if(myObjList.begin(), myObjList.end(), [&](const myObj & o) {
    return o.id == searchCriteria;
}); 
```

当没有可用的 C++11 时，您必须提供一个谓词（函数对象 (=functor) 或函数指针），如果提供的实例是您要查找的实例，则该谓词返回 true。仿函数的优点是可以*参数化*，在您的情况下，您希望使用您正在寻找的 ID 参数化仿函数。

```
template<class TargetClass>
class HasId {
    int _id;
public:
    HasId(int id) : _id(id) {}
    bool operator()(const TargetClass & o) const {
        return o.id == _id;
    }
}

std::find_if(myObjList.begin(), myObjList.end(), HasId<myObj>(searchCriteria)); 
```

此方法返回一个迭代器，该迭代器指向找到的第一个与您的条件匹配的元素。如果没有这样的元素，则返回结束迭代器（它指向向量的末尾，而不是最后一个元素）。所以你的函数可能看起来像这样：

```
vector<myObj>::iterator it = std::find_if(...);

if(it == myObjList.end())
    // handle error in any way
else
    return *it; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-02T15:17:04.057

使用[`std::find_if`](http://www.cplusplus.com/reference/algorithm/find_if/).

参考页面上有一个示例。

这是一个更适合您的问题的工作示例：

```
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;

struct myObj
{
   int id;
   char* value;

   myObj(int id_) : id(id_), value(0) {}
};

struct obj_finder
{
    obj_finder(int key) : key_(key)
    {}

    bool operator()(const myObj& o) const
    {
        return key_ == o.id;
    }

    const int key_;
};

int main () {
  vector<myObj> myvector;
  vector<myObj>::iterator it;

  myvector.push_back(myObj(30));
  myvector.push_back(myObj(50));
  myvector.push_back(myObj(100));
  myvector.push_back(myObj(32));

  it = find_if (myvector.begin(), myvector.end(), obj_finder(100));
  cout << "I found " << it->id << endl;

  return 0;
} 
```

而且，如果你有 C++11 可用，你可以使用 lambda 使这更加简洁：

```
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;

struct myObj
{
   int id;
   char* value;

   myObj(int id_) : id(id_), value(0) {}
};

int main ()
{
  vector<myObj> myvector;
  vector<myObj>::iterator it;

  myvector.push_back(myObj(30));
  myvector.push_back(myObj(50));
  myvector.push_back(myObj(100));
  myvector.push_back(myObj(32));

  int key = 100;

  it = find_if (myvector.begin(), myvector.end(), [key] (const myObj& o) -> bool {return o.id == key;});
  cout << "I found " << it->id << endl;

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T15:34:14.453

这不是您问题的真正答案。其他回答的人都给出了很好的答案，所以我没有什么要补充的。

我想说的是，您的代码不是非常惯用的 C++。当然，真正惯用的 C++ 会使用`::std::find_if`. 但即使你没有`::std::find_if`你的代码仍然不是惯用的。我将提供两次重写。一个是 C++11 重写，第二个是 C++03 重写。

首先，C++11：

```
for (auto &i: myObjList){
   if(i.id == searchCriteria){
      return i;
   }
} 
```

二、C++03：

```
for (::std::vector<myObj>::iterator i = myObjList.begin(); i != myObjList.end(); ++i){
   if(i->id == searchCriteria){
      return *i;
   }
} 
```

通过任何类型的 C++ 容器的标准方法是使用迭代器。向量可以按整数索引，这很好。但是，如果您不必要地依赖这种行为，那么以后如果您应该更改数据结构，您就会变得更加困难。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T15:17:37.623

如果对 id 进行了排序，则可以执行二进制搜索（stl 中也有一个函数`binary_search`）。如果它们不是什么都不会表现得更好，但您仍然可以使用 stl(use `find_if`) 以更短的方式编写代码。

# c - 无法使用 MinGW C 链接器在 Eclipse 中链接 libpng 或 zlib

> ID：14124398
> 
> 赞同：2
> 
> 时间：2013-01-02T15:16:02.567
> 
> 标签：c, eclipse, mingw, static-libraries, libpng

我是 C 中外部静态库的新手，我无法将 pnglib（或任何库）添加到 Eclipse。我在 Windows 7 64 位上使用 Eclipse v3.3.2 和 mingw。

我首先按照这些说明安装 libpng 和 zlib：[http ://wiki.openttd.org/Compiling_on_MinGW](http://wiki.openttd.org/Compiling_on_MinGW)

然后在 Eclipse 下**C/C++ Build** -> **Settings** -> **Tool Settings** -> **MinGW C Linker** -> **Libraries**

我在库中添加了：**“png”**然后是**“z”**（-l）

和：库搜索路径中的**“C:\MinGW\libpng-1.5.12”**，然后是**“C:\MinGW\zlib-1.2.7” (-L)**

如果我执行最简单的代码：

```
#include <stdio.h>
#include <zlib.h>
#include <png.h>

int main(void) {        

    printf("foo\n");

    unsigned char header[8];
    //png_sig_cmp(header, 0, 0);    

    return 0;
} 
```

它工作正常，但是一旦我取消注释该函数，代码就会编译（没有错误/警告），但绝对什么都不做，（甚至打印语句也不行）。当我使用外部库中的任何函数时，就会发生这种情况。

我认为它可以读取标题，但查找函数定义很有趣。

我不知道我哪里出错了。

我确定我错过了一些微不足道的事情！

# mysql - 将数据从一行复制到指定行的同一列中的另一行

> ID：14124404
> 
> 赞同：1
> 
> 时间：2013-01-02T15:16:28.213
> 
> 标签：mysql

我已经找到了与我所问的问题类似的问题的解决方案，但到目前为止还没有一个完全解决我的问题，所以如果有少量重复，请原谅我。

我有一个表 meta_data，其中包含列 project、stage、function、m_char_2 和 id

```
meta_data
project |  stage    |  function  | m_char_2  |  id     |
 519    | reception |    notes   |  11/1272  | 2363827 |
 519    | reception | diagnosis_1|           | 2363827 |
 519    | reception |    notes   |  11/1278  | 2370589 |
 519    | reception | diagnosis_1|           | 2370589 |
 519    | reception |    notes   |           | 2398654 |
 519    | reception | diagnosis_1|  13/2586  | 2398654 | 
```

我希望将函数值 = 注释的 m_char_2 列中的值复制到相应 id 的函数值 = 诊断 1 的 m_char_2 列中。

我编写了一个语法，允许我对工作正常的单个 id 执行此操作

```
UPDATE meta_data 
SET m_char_2 =
  (SELECT m_char_2
   FROM (SELECT * FROM meta_data) AS md
   WHERE
     md.stage ='Reception'
     AND md.function='Notes'
     AND md.id = 2363827)
WHERE
  project=519
  AND stage='Reception'
  AND function ='Diagnosis_1'
  AND id = 2363827; 
```

但是，我无法让它适用于多个 id。我有超过 100 条记录要更新，所以不必为每个 id 条目运行查询。

这不起作用：

```
UPDATE meta_data 
SET m_char_2 =
  (SELECT m_char_2
   FROM (SELECT * FROM meta_data) AS md
   WHERE
     md.stage ='Reception'
     AND md.function='Notes'
     AND md.id IN (2363827,2370589))
WHERE
  project=519
  AND stage='Reception'
  AND function ='Diagnosis_1'
  AND id IN (2363827,2370589); 
```

它返回错误`#1242 subquery returns more than 1 row`。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:21:00.333

在这里，我加入自己，并使用以下值`meta_data`更新所有行：`diagnosis_1``notes`

```
UPDATE
  meta_data m1 inner join meta_data m2
  on m1.id=m2.id
     and m1.project=m2.project
     and m1.stage=m2.stage
     and m1.function='Notes'
     and m2.function='diagnosis_1'
SET
  m2.m_char_2=m1.m_char_2
WHERE
  m1.project=519
  AND m1.stage='Reception'
  AND m1.id IN (2363827,2370589); 
```

（见这个[小提琴](http://sqlfiddle.com/#!2/35187/2/0)）。如果您还需要保留现有值，例如“13/2586”，您可能需要添加一些其他条件，例如：

```
and (m2.m_char_2 IS NULL or LENGTH(m2.m_char_2)=0)
and m1.m_char_2 IS NOT NULL and LENGTH(m1.m_char_2)>0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:46:57.117

只是为了好玩，我认为它不需要加入：

```
UPDATE meta_data AS mn
  SET m_char_2 = (
    SELECT m_char_2
    FROM (SELECT * FROM meta_data) AS md
    WHERE md.stage ='Reception' AND md.function='Notes'
      AND md.id = mn.id
    ) 
  WHERE project=519 AND stage='Reception'
    AND function ='Diagnosis_1' AND isnull(m_char_2) 
```

# javascript - 字符串与另一个字符串字符的比较

> ID：14124407
> 
> 赞同：-5
> 
> 时间：2013-01-02T15:16:42.613
> 
> 标签：javascript, jquery, algorithm

假设我有两个字符串 a="abc"，另一个是 b="ab"。我想检查字符串 a 是否包含字符串 b 的每个字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:22:23.187

一个有效的解决方案是将**两个字符串读入[两组](http://en.wikipedia.org/wiki/Set_%28mathematics%29)**字符。这样做之后，“a 中 b 中的每个字符”当且仅[*当*](http://en.wikipedia.org/wiki/Subset)`b`是. 它可以优化为仅使用一组（对于 b） - 请参阅伪代码。[](http://en.wikipedia.org/wiki/Subset)*`a`*

 *这种方法的复杂性`O(|a|+|b|)`平均是使用哈希表，或者`O(log(min{|a|,|b|})*(|a|+|b|))`使用基于树的最坏情况。与一个简单的解决方案相比，它要好得多，`O(|a|*|b|)`如果你搜索每一个字符，它就会让你受益。

**伪代码：**

```
setB <- empty set
for each element e in b:
  setB.add(e)
for each element e in a:
  setB.remove(e) //assuming doing nothing if doesn't exist
return setB.isEmpty() 
```

优化的想法是将 的元素（字符）加载`b`到集合中，然后`a`在遇到时从集合中删除元素时进行迭代。
完成迭代`a`后，如果（且仅当）有一个字符`b`不在`a`其中 - 它将保留在集合中并且算法将返回`false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:23:42.280

```
function func(a,b) {
    var alphabet = b.split("-");    
    for (var i=0; i < alphabet.length; i++) {
      if (a.indexOf(alphabet[i]) == -1)
          return false;
    }   
    return true;
}

func("a-b-c", "a-b"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:30:01.040

您可以使用以下代码：

```
var b = "a-b";
var a = "a-b-c";
var firstArray = b.split("-");
var secArray = a.split("-");
var length = firstArray.lenght;
for(var i =0; i<length; i++)
{
  if(secArray.indexOf(firstArray[i]) != -1)
    continue; //or do something
  else
    break; // or return false.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T15:30:42.533

我假设有几种方法和命令可能会同时表示两个字符串；也就是说，最直接的方法是检查字符串 b 中的每个字符是否确实包含在字符串 a 中。为此，您可以轻松调用`indexOf(currentCharFromStringB)`String a。

我希望以下示例可以帮助您了解我的想法：

```
"Blue Whale".indexOf("Blue") != -1; // true
"Blue Whale".indexOf("Bloe") != -1; // false 
```

一些伪代码将是：

```
for each char in b
     for each char in a
        is a in b? 
```

Now, it's up to you, dealing how you want to extract or represent each character of String B.

I hope this helps.*

# django - 如何使用一个 PageTemplate 从 reportlab 创建 2 个页面？

> ID：14124408
> 
> 赞同：3
> 
> 时间：2013-01-02T15:16:41.490
> 
> 标签：django, django-admin, reportlab

大家好reportlab大师，

我在网上搜索过，也在 stackoverflow 中搜索过，但在这个假期期间我试图解决的问题上找不到类似的情况。

在 django admin 中，我正在尝试创建一个操作以将我的数据库查看为特定格式。如果我选择一条记录，我可以在一页 pdf 中查看报告。这很好。如果用户尝试更多记录，那就是问题开始的地方。例如我选择了多条记录，我可以查看报告但所有内容仍然在一页pdf中。

有没有办法在pdf中显示每页的记录？所有reportlab大师绝地，请帮助我如何以正确的方式做到这一点。

这是我所做的代码。

```
from django.contrib import admin
from models import LatestRsl    
from io import BytesIO
from reportlab.pdfgen import canvas
from django.http import HttpResponse

try:
from cStringIO import StringIO
    except ImportError:
from StringIO import StringIO

from reportlab.lib.units import inch
from reportlab.lib.styles import getSampleStyleSheet, ParagraphStyle
from reportlab.platypus import BaseDocTemplate, PageTemplate, Paragraph, Frame
from reportlab.lib.pagesizes import letter

def go(modeladmin, request, queryset):
    response = HttpResponse(mimetype='application/pdf')
    response['Content-Disposition'] = 'filename = testframe.pdf'

    buffer = StringIO()
    c = canvas.Canvas(buffer)
    doc = BaseDocTemplate(buffer, showBoundary=1, leftMargin= 0.1*inch, rightMargin= 0.1*inch,
                     topMargin= 0.1*inch, bottomMargin= 0.1*inch)

    signfr = Frame(5.1*inch, 1.2*inch, 2.8*inch, 0.44*inch, showBoundary=1)
    modelfr = Frame(3.6*inch, 4.6*inch, 2.8*inch, 0.44*inch, showBoundary=1)
    doc.addPageTemplates([PageTemplate(id= 'rsl_frame', frames=[signfr, modelfr]),
                         PageTemplate(id= 'rsl_frame2', frames=[signfr, modelfr])])

    story = []

    styles=getSampleStyleSheet()
        styles.add(ParagraphStyle(name='Verdana9', fontName= 'Verdana', fontSize= 9))
        styles.add(ParagraphStyle(name='VerdanaB10', fontName= 'VerdanaB', fontSize= 10))

    for obj in queryset:
        #1st frame
        model = Paragraph(obj.make,styles["Verdana9"])
        story.append(model)
        modelfr.addFromList(story,c)

        #2nd frame
        signatory = Paragraph(obj.signatory,styles["VerdanaB10"])
        story.append(signatory)
        signfr.addFromList(story,c)

    doc.build(story)
    c.showPage()
    c.save()
    pdf = buffer.getvalue()
    buffer.close()
    response.write(pdf)
return response 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T19:14:20.013

假设您的`queryset`变量包含您需要的所有记录，您可以插入一个`PageBreak`对象。只需添加`from reportlab.platypus import PageBreak`到文件的顶部，然后将`PageBreak`对象附加到文档的元素中。

如果要更改每个页面的模板，还可以附加 a并`NextPageTemplate`传递`id`. `PageTemplate`您还需要添加`from reportlab.platypus import NextPageTemplate`到文件的顶部。

```
for obj in queryset:
    #1st frame
    model = Paragraph(obj.make,styles["Verdana9"])
    story.append(model)
    modelfr.addFromList(story,c)

    #2nd frame
    signatory = Paragraph(obj.signatory,styles["VerdanaB10"])
    story.append(signatory)
    signfr.addFromList(story,c)

    # Force the report to use a different PageTemplate on the next page
    story.append(NextPageTemplate('rsl_frame2'))
    # Start a new page for the next object in the query
    story.append(PageBreak()) 
```

您可以将它移动到`PageBreak`您需要的任何地方，但它是一个简单的“功能”可流动。`NextPageTemplate`可以采用您通过添加`id`的任何有效对象的。`PageTemplate``addPageTemplates`

# iphone - MapView 显示引脚位置然后消失

> ID：14124426
> 
> 赞同：0
> 
> 时间：2013-01-02T15:18:01.437
> 
> 标签：iphone, ios, maps

我以前从未使用过地图视图，我正在关注[本](http://maybelost.com/2011/01/a-basic-mapview-and-annotation-tutorial/)教程

最后，我的模拟器以应有的方式显示该点，在应有的位置，但随后立即变为蓝屏。

蓝屏仍在谷歌地图中（它在底部显示谷歌徽标）但它不再是我想要显示的内容。

![首先它看起来像这样](../Images/de3c70e560798353792ad1e748e60868.png) ![片刻之后是这个样子](../Images/cba5865350bfc036c128b1aacfdf1ae0.png)

这是我的一些代码：

```
- (void)viewDidLoad 
{
    HandbookAppDelegate *delegate = (HandbookAppDelegate *)[[UIApplication sharedApplication] delegate];
    Rule *thisRule = [delegate.rules objectAtIndex:index.row];

    self.title = thisRule.ruleNumber;

    // Set some coordinates for our position (Buckingham Palace!)
    CLLocationCoordinate2D location;
    location.latitude = (double) 51.501468;
    location.longitude = (double) -0.141596;

    // Add the annotation to our map view
    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Buckingham Palace" andCoordinate:location];
    [self.map addAnnotation:newAnnotation];
    [newAnnotation release];
}

- (void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views
{
    MKAnnotationView *annotationView = [views objectAtIndex:0];
    id <MKAnnotation> mp = [annotationView annotation];
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([mp coordinate], 1500, 1500);
    [mv setRegion:region animated:YES];
    [mv selectAnnotation:mp animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:05:16.443

我能够自己发现解决方案。事实证明这是相当愚蠢的。

我已经在我的 MKMapView 的 xib 上打开了“显示用户位置”，所以这很干扰。当我关闭它时，问题就消失了。

# nservicebus - NServiceBus 找不到映射到 XXX 错误的具体类型

> ID：14124428
> 
> 赞同：1
> 
> 时间：2013-01-02T15:18:14.210
> 
> 标签：nservicebus

我正在尝试发布一个定义为接口的事件：

```
Bus.Publish<IAccountCreated>(m => { m.Key = Guid.NewGuid(); }); 
```

使用 JSON 序列化程序时，它给了我错误：

> 找不到映射到 Contracts.IAccountCreated 的具体类型

它适用于 XML 序列化程序。

我的端点配置：

```
Configure.With()
    .DefaultBuilder()
    .JsonSerializer() <-- when this is here I get the error.
    .DefiningCommandsAs(t => t.Namespace != null && t.Namespace.StartsWith("Website"))
    .DefiningEventsAs(t => t.Namespace != null && t.Namespace.Contains("Contracts")) 
```

我正在使用 NServiceBus 3.3.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:13:10.043

事实证明，您在流畅界面中执行操作的顺序很重要。

这有效：

```
Configure.With()
    .DefaultBuilder()
    .DefiningCommandsAs(t => t.Namespace != null && t.Namespace.StartsWith("Website"))
    .DefiningEventsAs(t => t.Namespace != null && t.Namespace.Contains("Contracts"))
    .JsonSerializer() <-- moving this down works 
```

# javascript - Javascript 页面重定向

> ID：14124434
> 
> 赞同：0
> 
> 时间：2013-01-02T15:18:49.690
> 
> 标签：javascript, url, redirect, encoding

我正在尝试使用此脚本将任何网页重定向到另一个网页，其中包含上一个网页的 URL 的查询。

我尝试使用的代码如下所示：

```
window.location = "http://www.readability.com/m?url=" + document.URL; 
```

虽然它不起作用，但我不知道是什么原因。我不熟悉编码，所以这可能是问题所在。由于这有效...

```
window.location = "http://www.readability.com" 
```

但这不起作用

```
window.location = "http://www.readability.com/" 
```

此外，我正在使用移动浏览器，而不是 chrome。所以这可能只是一个问题，但可能不是。感谢您的阅读，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:21:55.513

您需要转义 URL，否则它将在`&`它包含的第一个位置被剪切。

```
window.location = "http://www.readability.com/m?url=" + encodeURIComponent(window.location); 
```

也忽略`document.URL`并使用更常见和可互操作的`window.location`代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:23:25.627

不要使用[escape](https://stackoverflow.com/a/3608791/1916258)，因为它不会转义您需要的所有字符。您需要使用[encodeURIComponent](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)对其进行转义：

```
window.location = "http://www.readability.com/m?url=" + encodeURIComponent(window.location); 
```

# c++ - 如何让 Qt Tree 模型与 QSet 一起工作？

> ID：14124437
> 
> 赞同：0
> 
> 时间：2013-01-02T15:19:03.353
> 
> 标签：c++, qt, vector, set, treemodel

我想用添加、重命名和执行其他操作时始终在树节点下自动排序的项目构建一棵树。std::set 似乎是我的数据容器的不错选择。然而，Qt 树似乎更喜欢向量或 QList（指针向量），因为树项是通过它们的索引或行号来访问、插入或删除的。我正在使用类似 std::distance 的函数来计算集合中某个项目的索引。但我认为它很慢（未经测试）。让 Qt 树模型与 std::set 一起工作的任何好方法，或者我可能需要为我的数据使用向量，或者开发一个新容器来做到这一点？非常感谢！

找到答案：使用[boost::container::flat_set](http://www.boost.org/doc/libs/1_52_0/doc/html/container/non_standard_containers.html#container.non_standard_containers.flat_xxx)。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:14:43.073

出于此目的，QSet 不是一个好主意。除了不提供基于索引的访问之外，它是完全无序的，即绝对不能保证遍历的顺序。没有任何明智的方法可以用于 Qt 项目模型。最好只使用 QList 并确保自己的值是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:49:17.260

您可能应该使用 QTreeView 和子类 QAbstractItemModel 这样您可以使用您想要的任何数据源

看到这个问题：[为树视图创建 Qt 模型](https://stackoverflow.com/questions/1985936/creating-qt-models-for-tree-views)

# sql-server - 无法持久化计算列 - 不确定

> ID：14124439
> 
> 赞同：15
> 
> 时间：2013-01-02T15:19:11.753
> 
> 标签：sql-server, database, sql-server-2008-r2, calculated-columns

我有一个计算列的函数：

```
CREATE FUNCTION [dbo].[GetAllocatedStartTime](@Year INT, @Week INT)
RETURNS DATETIME

WITH schemabinding
AS BEGIN
    RETURN dateadd(week,@Week-(1),dateadd(day,(-1),dateadd(week,datediff(week,(0),CONVERT([varchar](4),@Year,(0))+'-01-01'),(1))))
END

GO 
```

我添加了`WITH schemabinding`它，希望它可以使其具有确定性，以便我可以坚持下去。它应该作为两个输入`[Week]`，并且`[Year]`总是会产生相同的结果。

确切的错误是：

> *无法保留表“Tmp_Bookings”中的计算列“AllocatedTimeStart”，因为该列是不确定的。*

我在列中使用这个公式：

```
([dbo].[GetAllocatedStartTime]([Year],[Week])) 
```

和列 defs ：

```
[Week] [int] NOT NULL,
[Year] [int] NOT NULL,
[AllocatedTimeStart]  AS ([dbo].[GetAllocatedStartTime]([Year],[Week])), 
```

有任何想法吗？

**编辑：**

将行更改为：

```
RETURN dateadd(week,@Week-(1),dateadd(day,(-1),dateadd(week,datediff(week,(0),CONVERT(datetime,CONVERT([varchar](4),@Year,(0))+'0101',112)),(1)))) 
```

但是现在我收到一个错误，说该列的公式无效。即使该功能保存得很好。

**编辑2：**

我已经准确地展示了我在做什么（或者至少我已经尝试过）。真的没有什么额外的。正如它所说的前一个函数（原始函数）与`[dbo].AllocatedStartDate(...)`列中的公式参考相结合，但没有持续存在，它说它是不确定的。所以根据建议我改变了FUNCTION，用新代码替换了转换部分，所以函数现在看起来像：

```
FUNCTION [dbo].[GetSTime](@Year INT, @Week INT)

RETURNS DATETIME
WITH schemabinding
AS BEGIN
    RETURN dateadd(week,@Week-(1),dateadd(day,(-1),dateadd(week,datediff(week,(0),CONVERT(datetime,CONVERT([varchar](4),@Year,(0))+'0101',112)),(1))))
END 
```

然后我在计算域中尝试了与以前相同的公式`(([dbo].[GetAllocatedStartTime]([Year],[Week])))`......它拒绝了这个公式，说它无效......这很奇怪，因为公式是相同的，所以它必须对更改的内容进行某种检查功能并发现它无效，这也很奇怪，因为我做了一个简单的`SELECT dbo.GetAllocatedStartTime(2012,13)`并且它有效......

所以是的，我很困惑，我从来没有见过`SqlFiddle`没关系使用它。但真的没有什么比我刚才所说的更多了。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-02T15:38:46.640

`CONVERT([varchar](4),@Year,(0))+'-01-01'`正在被传递给`DATEDIFF`调用，在预期日期的位置，强制进行隐式转换。

[从确定性函数](http://msdn.microsoft.com/en-us/library/ms178091.aspx)的规则：

> `CAST`
> 
> 确定性，除非与`datetime`、`smalldatetime`或一起使用`sql_variant`。
> 
> `CONVERT`
> 
> 确定性，除非存在以下条件之一：
> 
> ...
> 
> 源或目标类型是`datetime`or `smalldatetime`，另一个源或目标类型是字符串，并且指定了非确定性样式。为了具有确定性，样式参数必须是常数。此外，小于或等于 100 的样式是不确定的，除了样式 20 和 21。大于 100 的样式是确定的，除了样式 106、107、109 和 113。

好吧，您都没有调用，但是您依赖于隐式转换，我希望它的行为类似于`CAST`. 而不是依赖于此，我会切换到使用`CONVERT`并给出确定性样式参数。

所以，我会做： `CONVERT(datetime,CONVERT([varchar](4),@Year,(0))+'0101',112)`取而代之。这样做后，函数本身就变得确定了

# javascript - 检查链接是否重定向

> ID：14124440
> 
> 赞同：1
> 
> 时间：2013-01-02T15:19:16.387
> 
> 标签：javascript, jquery, ruby-on-rails

我想知道是否有 javascript 或 jquery 代码可用于检查链接是否会重定向当前页面，而不是打开新网页。

我在 Rails 上使用 ruby​​，在我的网站上有重定向的链接和打开新网页的链接。我需要在用户单击任何链接时执行的 js，如果链接重定向，它应该提示确认消息，然后执行要重定向的链接。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T15:29:03.080

我知道链接可以打开新页面的唯一方法是：

*   下载附件（非内联）
*   直接或通过事件回调运行“window.open”

不幸的是，通过 javascript 检查来可靠地确定这些是否会发生是极其困难的。这是因为您需要在事件链上执行反射以检查 javascript 代码，并且您需要调用服务器（通过 ajax 调用）以检查数据附件。

执行此操作的最简单方法是手动检查您自己的站点并查看这些情况发生在哪里。然后在继续之前修改“点击”事件以确认。

# c - 创建目录权限

> ID：14124441
> 
> 赞同：0
> 
> 时间：2013-01-02T15:19:23.133
> 
> 标签：c, windows

我想知道一些关于在 C 中创建目录的知识。

我知道在基于 unix 的系统中，您可以使用此功能创建一个目录：

```
mkdir (const char* directory_name,mode_t mode); 
```

但是，在 windows 中，mkdir 函数只接受一个参数，即目录的名称。您不能为访问权限指定模式位。

在 windows 中创建目录的函数是：

```
_mkdir (const char* directory_name); 
```

因此，创建目录的可移植方式如下：

```
#ifdef WIN32
      _mkdir (directory_name);
#else
       mkdir (directory_name,mode);
#endif 
```

我的问题是，有没有办法在 unix 中指定权限，如 mkdir，但在 windows 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:22:07.890

您可以使用[`CreateDirectory`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363855%28v=vs.85%29.aspx)并提供适当[`SECURITY_ATTRIBUTES`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446595%28v=vs.85%29.aspx)的（链接的示例使用安全描述符和注册表项的属性，但基本上这与文件没有什么不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:21:29.367

`CreateDirectory`您可以使用, 从 API Windows设置权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:23:27.743

在 Windows 上也有类似的`chmod()`： http `_chmod()`: [//msdn.microsoft.com/en-us/library/1z319a54%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/1z319a54%28v=vs.100%29.aspx)

# powershell - 拉取字符之间的文本

> ID：14124445
> 
> 赞同：1
> 
> 时间：2013-01-02T15:19:52.050
> 
> 标签：powershell

如何在两个单词之间提取文本？我知道正则表达式可以做到这一点，我一直在环顾四周，但我尝试的代码根本不适合我......就像正则表达式的砖头一样无能为力......所以可能做错了......

我有一个文本文件，想查询这些文本字符串之间显示的任何内容：

> [问题设备]
> 
> 设备 PNP 设备 ID 错误代码
> 
> [USB]

我试过这样做，但无处可去！

```
$devices = Get-Content c:\temp\dev.txt | out-string [regex]::match($devices,'(?<=\<Problem Devices\>).+(?=\<USB\>)',"singleline").value.trim()

You cannot call a method on a null-valued expression.
At line:1 char:141
+ $devices = Get-Content c:\temp\dev.txt | out-string [regex]::match($devices,'(?<=\<Problem Devices\>).+(?=\<USB\>)',"
singleline").value.trim <<<< ()
    + CategoryInfo          : InvalidOperation: (trim:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:11:38.980

`out-string`不需要管道；`get-content`将文件的每一行作为单独的对象发送到管道中。所以你想用`foreach-object`.

```
$devices = Get-Content c:\temp\dev.txt | foreach-object{[regex]::match($devices,'(?<=\<Problem Devices\>).+(?=\<USB\>)',"singleline").value.trim()} 
```

但是，您仍然会遇到尝试对象的问题`trim()`-`null`如果您的正则表达式匹配未找到匹配项，则无法调用`value.trim()`.

当您`<Problem Devices>`的输入文件具有`[Problem Devices]`.

与其尝试在一组管道步骤中完成所有事情，不如分解您的问题：

1.  对于文件中的每一行，检查 [Problem Devices]
2.  对于后续的每一行，如果是[USB]，则退出循环。如果不是 [USB]，则将每一行捕获到一个变量中（构建这些行的数组）
3.  在循环之后，迭代您刚刚构建的数组的每个元素以解析出每个值（创建一个集合`PSObjects`（每个设备一个），或一个哈希集合（每个设备一个），具体取决于您的需要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:31:58.657

如果您对正则表达式不满意，还有其他方法：

$测试 = $假

$devices = 获取内容文件.txt |

foreach {

```
if ($_.trim() -eq '[Problem Devices]'){$test = $true}

elseif ($_.trim() -eq '[USB]') {$test = $false}

elseif ($test){$_}

} | where {$_.trim()} 
```

# mysql - 带有 COLLATE 和 MATCH 的 MySQL SELECT 语句

> ID：14124446
> 
> 赞同：1
> 
> 时间：2013-01-02T15:20:13.267
> 
> 标签：mysql, select, match, match-against, collate

有没有办法在同一个查询字符串中指定`COLLATE`和。`MATCH() AGAINST()`我试图得到这个。

```
SELECT * FROM table  WHERE COLLATE latin1_general_cs MATCH(column) AGAINST('string') 
```

我知道这行不通，只是一个例子。如果`COLLATE`剂量不适用于`MATCH`. 如何在每个查询中指定区分大小写，因为我需要区分大小写和不区分大小写的`MATCH() AGAINST()`查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:27:12.897

我想出了如何做到这一点。就像@Ollie Jones 说的那样，我将所有数据复制到一个新列中，并带有区分大小写的排序规则。就我而言`latin1_general_cs`。

但是因为`FULLTEXT`索引不能有混合排序规则。必须有 2 个`FULLTEXT`索引。一个在不区分大小写的列 ( `latin1_general_ci`) 上，一个在区分大小写的列 ( `latin1_general_cs`) 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:28:04.483

不，不幸的是

> 尽管支持在单个表中使用多个字符集，但 FULLTEXT 索引中的所有列必须使用相同的字符集和排序规则。

全文`MATCH() AGAINST`语法上没有用于指定排序规则的修饰符。

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-restrictions.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-restrictions.html)

`column`您可以使用不同的排序规则维护该列的副本。

# struts2 - struts.xml 中“resultpath”常量没有影响

> ID：14124447
> 
> 赞同：0
> 
> 时间：2013-01-02T15:20:22.093
> 
> 标签：struts2

我在 WebContent 文件夹中有所有 jsp 页面（例如：index.jsp），并且我的应用程序运行顺利。现在，我在 WebContent 中创建了一个文件夹“pages”，我在其中传输了所有 jsp 页面。

我在`<struts>`标签内添加了以下行：

```
<constant name="struts.convention.result.path" value="/pages" /> 
```

但是，它仍然没有在“页面”文件夹中搜索 jsp。我正进入（状态：

**HTTP 状态 404 - /MyApplicationName/index.jsp**

我在哪里做错了？

编辑：我的应用程序的当前结构如下：

欢迎页面是一个动作而不是一个 jsp 页面。此操作的结果页面是 index.jsp。此操作填充下拉菜单和 index.jsp 中的一些其他字段。现在，我想将 index.jsp 与其他 jsp 页面一起保存在“WebContent/pages”文件夹中。我的应用程序中有 30 多个 jsp 页面，我不想在 result-tag 中提及每个 jsp 的完整路径。这就是为什么我想使用 struts2 常量**“struts.convention.result.path”**

我的问题是，为什么我上面提到的代码不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:47:33.287

直接访问`index.jsp`会绕过所有 S2 请求处理。

不涉及 S2 或 S2 Convention 插件，您只是在访问 JSP 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:00:33.013

如果`index.jsp`是应用程序的第一页，则需要在`<welcome-file>`web.xml 的标记中将其路径更改为 /pages/index.jsp。至于休息，我同意@Dave Newton :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:29:32.063

可能您的错误出现在 struts.xml 中。

当您创建具有相同名称（文件夹名称）的`new-Folder`下制作时`web-content`

`xml file` `under src`并将其包含在`struts.xml`文件中，它将正常工作。

例如：假设您`example folder`在 web-content 下创建，现在创建 example.xml 文件

在 src 文件夹和 struts.xml 文件中包含 example.xml

> 示例.xml：

```
<struts>

    <package name="example" namespace="/example" extends="default">
     <action name="your action name" class="your class" method="your method">
     </action> 
</package>
</struts> 
```

> struts.xml：

```
<struts>

<constant name="struts.enable.DynamicMethodInvocation" value="false" />
<constant name="struts.devMode" value="false" />

<action  name="" class="" method="">
</action>
</package>

<include file="example.xml"/> 
```

# php - PDO 插入语句未执行

> ID：14124448
> 
> 赞同：0
> 
> 时间：2013-01-02T15:20:26.590
> 
> 标签：php, mysql, pdo, html-table, isset

我有一个名为 waiting.php 的页面，该页面是开始辅导员和学生之间真实生活会话的门户。我有一个名为“name='submit”的提交按钮

我有一段代码调用提交按钮（isset），一旦发生这种情况，我希望 PDO 语句执行插入查询。但是我检查了 phpmyadmin 并没有插入任何内容。

我的代码是这样的：

```
f(isset($_POST['submit'])){
    $query = $dbh->prepare("INSERT INTO counselors (counselorname) VALUES (:counselorname)");
    $query->bindParam(':counselorname', $_POST['namedrop']);
    $query->execute();
    } 
```

现在这是制作提交按钮和辅导员姓名下拉菜单的实际代码：

```
echo "<td> 
                <form method= 'post'>
                    </form><select name='namedrop'>
                        <option value=''>Counselor Name</option> 
                        <option value='dmin-John'>Admin - John</option>
                        <option value='Admin-Christine'>Admin - Christine</option>
                        <option value='Admin-Dawne'>Admin - Dawne</option>
                        <option value='Counselor-Cherie'>Counselor - Cherie</option>
                        <option value='Counselor-Tootie'>Counselor - Tootie</option>
                        <option value='Counselor-Debbie'>Counselor - Debbi</option>
                        <option value='FrontDesk-Delores'>Front Desk - Delores</option>
                        <option value='FrontDesk-Kiana'>Front Desk - Kiana</option>
                    </select> 
                </form>";

echo "<td> <form action='counselor.php?id=" . $row['id'] . "' method='post' target='_new'>
            <input type='submit' name='submit' value='Start Session'>
            </form> </td>"; 
```

我是 PHP 新手，所以我的逻辑有点像那里，但我的语法和知道如何实现我的逻辑低于平均水平。

任何帮助将非常感激。

编辑 ：

这就是页面的外观：

![等待.php](../Images/82826919b33ebd92bce10d2c41f47dff.png)

编辑2：

```
echo "<td> 
            <form action='counselor.php?id=" . $row['id'] . "' method='post' target='_new'>
                    <select name='namedrop'>
                        <option value=''>Counselor Name</option> 
                        <option value='dmin-John'>Admin - John</option>
                        <option value='Admin-Christine'>Admin - Christine</option>
                        <option value='Admin-Dawne'>Admin - Dawne</option>
                        <option value='Counselor-Cherie'>Counselor - Cherie</option>
                        <option value='Counselor-Tootie'>Counselor - Tootie</option>
                        <option value='Counselor-Debbie'>Counselor - Debbi</option>
                        <option value='FrontDesk-Delores'>Front Desk - Delores</option>
                        <option value='FrontDesk-Kiana'>Front Desk - Kiana</option>
                    </select> 

            <td> <input type='submit' name='submit' value='Start Session'>
            </form> </td>";
}

  echo "</tr>";
  echo "</table>";

if(isset($_POST['submit'])){
    $query = $dbh->prepare("INSERT INTO counselors (id, counselorname) VALUES (:id, :counselorname)");
    $query = $dbh->bindParam(':id', $row['id']);
    $query->bindParam(':counselorname', $_POST['namedrop']);
    $query->execute();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:27:43.003

你的标记有缺陷。您的 $query 语句需要`namedrop`，但此选择列表与您的提交按钮不是同一表单的一部分。

您的代码显示了 3 种不同的形式，但没有一种是完整的。

```
<form method="post" action="..." target="_new">
    -- All components and elements must be declared inside this node
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:23:06.183

您可以添加绑定数组以直接执行语句：

```
if(isset($_POST['submit'])){
    $query = $dbh->prepare("INSERT INTO counselors (counselorname) VALUES (:counselorname)");
    $query->execute(array(':counselorname', $_POST['namedrop']));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:15:39.537

问题是：action="counselor.php?id="。$row['id'] 。"

这意味着插入脚本应该转到counselor.php 页面。它没有出现错误的原因是我告诉它所做的是工作接受不是我想要的方式。

第二个问题是表单必须在 method=post 如果不是 ID 将插入但不是名称。所以要解决这个问题：

```
echo "
        <td>    <form action='counselor.php?id=" . $row['id'] . "' method='post' target='_new'>
                    <select name='namedrop'>
                        <option value=''>Counselor Name</option> 
                        <option value='dmin-John'>Admin - John</option>
                        <option value='Admin-Christine'>Admin - Christine</option>
                        <option value='Admin-Dawne'>Admin - Dawne</option>
                        <option value='Counselor-Cherie'>Counselor - Cherie</option>
                        <option value='Counselor-Tootie'>Counselor - Tootie</option>
                        <option value='Counselor-Debbie'>Counselor - Debbi</option>
                        <option value='FrontDesk-Delores'>Front Desk - Delores</option>
                        <option value='FrontDesk-Kiana'>Front Desk - Kiana</option>
                    </select>
            </td>

            <td> <input type='submit' name='submit' value='Start Session'></td>
            </form> </td>"; 
```

然后在我的counsoror.php上我进行了测试以检查我是否得到任何东西：

```
$id = $_GET['id'];
echo "$id";

$name = $_POST['namedrop'];
echo "$name"; 
```

![查看](../Images/216cd3799e0ed98fde9360feee9bbab9.png)

然后我为运行查询所做的一切是：

```
if(isset($_POST['submit'])){
    $query = $dbh->prepare("INSERT INTO counselors (id, counselorname) VALUES (:id, :counselorname)");
    $query->bindParam(':id', $_GET['id']);
    $query->bindParam(':counselorname', $_POST['namedrop']);
    $query->execute();
    } 
```

然后这是完成的结果：

![结束](../Images/941ad71921fb35e67f8c17486569341c.png)

# java - 计算唯一标记java

> ID：14124455
> 
> 赞同：-1
> 
> 时间：2013-01-02T15:21:02.110
> 
> 标签：java, string, unique

我想计算字符串中的唯一字符

输入：

```
"aabbccdefgh" 
```

输出：

```
8 
```

我的代码不起作用并引发错误：

我的代码：

```
public class test {

    public static void main(String[] args) {
    String[] s = {""};
    int counter = 0;
    int pom  = 0;
    for(int i = 0; i < s.length; i++){
        for(int y = 0; y < 128; y++){
            if(s[i].compareTo(args[y])>0){
                pom++;
            }
        }
    }
    while(pom == 1){
        counter++;
    }
    System.out.println(counter);
}
} 
```

有人能指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:29:48.163

使用`Set`. 它将确保唯一性，因此在您添加每个字符后，集合的大小将是您的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:29:25.337

为什么不使用`Set`来计算令牌的唯一数量？

```
String str = "aabbccdefgh";
HashSet<Character> set = new HashSet<Character>();    

for (int i=0; i < str.length; i++) {
    char c = str.charAt(i);
    set.put(c);
}

System.out.println(set.size()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T15:28:54.307

我相信错误的根本原因是这段代码：

```
for(int y = 0; y < 128; y++){
    if(s[i].compareTo(args[y])>0){
        pom++;
    }
} 
```

具体来说，`args[y]`循环内部的比较。上面的代码假设你在调用java程序时至少传递了128个参数，即

```
java test param0 param1 ... param127 
```

我很确定你会得到`ArrayIndexOutOfBoundsException`.

既然您知道原因，请使用[@Kevin 的答案](https://stackoverflow.com/a/14124604/717214)来解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T15:46:25.560

```
public static void main(String[] args) {
    String str = "aabbccdefgh";
    int count = 0;
    for (int i = 0; i < str.length(); i++) {
        if (str.substring(0, i).contains(str.charAt(i) + ""))
            System.out.println();

        else
            count++;
    }
    System.out.println(count);

} 
```

不使用 set 试试这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T15:37:09.443

由于任务是只计算字符串中出现一次的字符，因此使用 a`Map<Character, Integer>`来计算字符频率。否则，其他答案中几乎都显示了逻辑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T09:34:51.287

```
public static void main(String[] args) {
    String str = "aabbccdefgh";

    Map<Character, Integer> map = new HashMap<Character, Integer>();

    for (int i = 0; i < str.length(); i++) {
        Integer count = map.get(str.charAt(i));
        if (count == null)
            map.put(str.charAt(i), 1);
        else
            map.put(str.charAt(i), count + 1);
    }

    int uniqueCount = 0;

    for (Integer i : map.values())
        if (i == 1)
            uniqueCount++;

    System.out.println(uniqueCount);

} 
```

这是另一个答案，它将使用 Map 计算在给定字符串中仅出现一次的字符的出现次数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-09T12:05:26.547

如果要计算唯一字符的数量，set 不是一个选项，因为 set 包含一次重复的字符。例如，“galaxy”应该返回 4，但使用 set，它将返回 5，因为 'a' 也将包括在内

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-05T22:05:35.767

如果您已经使用 Java 8，请使用以下代码：

```
public static void main(String[] args) {

    System.out.println(countDistinctCharacters("aabbccdefgh"));
}

public static long countDistinctCharacters(String letter) {
    return letter.chars().distinct().count();
} 
```

# julia - 在 Julia 中访问通用函数的 AST

> ID：14124456
> 
> 赞同：4
> 
> 时间：2013-01-02T15:21:04.997
> 
> 标签：julia

如何访问 Julia 中通用函数的抽象语法树？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T20:15:20.517

回顾一下：看起来 Simon 正在寻找与泛型函数关联的特定方法的 AST。我们可以`LambdaStaticData`为特定方法获取一个包含 AST 的对象，如下所示：

```
julia> f(x,y)=x+y

julia> f0 = methods(f, (Any, Any))[1]
((Any,Any),(),AST(:($(expr(:lambda, {x, y}, {{}, {{x, Any, 0}, {y, Any, 0}}, {}}, quote  # none, line 1:
        return +(x,y)
    end)))),())

julia> f0[3]
AST(:($(expr(:lambda, {x, y}, {{}, {{x, Any, 0}, {y, Any, 0}}, {}}, quote  # none, line 1:
        return +(x,y)
    end))))

julia> typeof(ans)
LambdaStaticData 
```

显然，这个 AST 可以是一个 Expr 对象或一个压缩的 AST 对象，表示为一个字节序列：

```
julia> typeof(f0[3].ast)
Array{Uint8,1} 
```

from的`show()`方法说明了遇到这种情况时如何解压：`LambdaStaticData``base/show.jl`

```
julia> ccall(:jl_uncompress_ast, Any, (Any, Any), f0[3], f0[3].ast)
:($(expr(:lambda, {x, y}, {{}, {{x, Any, 0}, {y, Any, 0}}, {}}, quote  # none, line 1:
        return +(x,y)
    end)))

julia> typeof(ans)
Expr 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-02T00:20:36.450

Julia 有四个函数和四个与这些函数类似的宏，用于检查很多关于泛型函数的方法：

```
julia> f(x, y) = x + y                                                                                                    
f (generic function with 1 method)

julia> methods(f)                                                                                                         
# 1 method for generic function "f":                                                                                      
f(x,y) at none:1 
```

# 降低代码：

```
julia> code_lowered(f, (Int, Int))                                                                                        
1-element Array{Any,1}:
 :($(Expr(:lambda, {:x,:y}, {{},{{:x,:Any,0},{:y,:Any,0}},{}}, :(begin  # none, line 1:
        return x + y
    end))))

julia> @code_lowered f(1, 1)    # Both `Int`s 
...same output. 
```

# 键入的代码：

```
julia> code_typed(f, (Int, Int))    

1-element Array{Any,1}:
 :($(Expr(:lambda, {:x,:y}, {{},{{:x,Int64,0},{:y,Int64,0}},{}}, :(begin  # none, line 1:                                 
        return (top(box))(Int64,(top(add_int))(x::Int64,y::Int64))::Int64                                                 
    end::Int64))))      

julia> @code_lowered f(1, 1)    # Both `Int`s  
...same output. 
```

# LLVM 代码：

```
julia> code_llvm(f, (Int, Int))                                                                                           

define i64 @julia_f_24771(i64, i64) {                                                                                     
top:                                                                                                                      
  %2 = add i64 %1, %0, !dbg !1014                                                                                         
  ret i64 %2, !dbg !1014                                                                                                  
}                           

julia> @code_llvm f(1, 1)    # Both `Int`s   
...same output. 
```

# 本机代码：

```
julia> code_native(f, (Int, Int))  

      .text                                                                                                               
Filename: none                                                                                                            
Source line: 1                                                                                                            
        push    RBP                                                                                                       
        mov     RBP, RSP                                                                                                  
Source line: 1                                                                                                            
        add     RDI, RSI                                                                                                  
        mov     RAX, RDI                                                                                                  
        pop     RBP                                                                                                       
        ret    

julia> @code_llvm f(1, 1)    # Both `Int`s
...same output. 
```

# 输入不稳定警告（v0.4+）：

```
julia> @code_warntype f(1, 1)
Variables:
  x::Int64
  y::Int64

Body:
  begin  # In[17], line 1:
      return (top(box))(Int64,(top(add_int))(x::Int64,y::Int64))
  end::Int64 
```

> [反思与内省](http://julia.readthedocs.org/en/latest/devdocs/reflection/?highlight=reflection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:51:45.183

由于多次分派，我不确定是否存在与通用函数关联的 AST。如果你正在编写一个函数定义`fbody`，你应该能够通过做得到 AST `dump(quote(fbody))`。

# java - fork-join，compute() 方法在一段时间后崩溃

> ID：14124460
> 
> 赞同：1
> 
> 时间：2013-01-02T15:21:13.077
> 
> 标签：java, fork-join

我编写了一个小程序，它打开一个 UDP 套接字并接收一些 UDP 数据包。我尝试的是每个数据包都由自己的线程使用 fork-join 处理（更改字节顺序），然​​后通过 udp 将更改的数据包转发到另一个系统。

这是代码：

```
package cwstreamswitcher;

import java.io.IOException;
import java.net.*;
import java.util.concurrent.*;
import java.util.logging.Level;
import java.util.logging.Logger;

public class CwStreamSwitcher {

    public class Switch extends RecursiveAction {

        private byte[] mMessage;
        DatagramSocket mSocket;

        public Switch(DatagramSocket serverSocket) throws UnknownHostException, IOException {
            // mMessage = message;
            mSocket = serverSocket;
            int cwPort = 51001;
            String host = "localhost";

            byte[] receiveData = new byte[33];
            DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
            serverSocket.receive(receivePacket);

            StringBuilder sb = new StringBuilder();                 //
            for (byte b : receiveData) {                            //
                sb.append(String.format("%02X ", b));               //just for checking the data , will be removed in final version
            }                                                       //
            System.out.println("Received: " + sb.toString());       //

            byte[] newCache = new byte[29];

            newCache[0] = (byte) 0x02;                       
            System.arraycopy(receiveData, 32, newCache, 1, 1);      
            System.arraycopy(receiveData, 1, newCache, 2, 2);       
            byte onid = receiveData[7];
            switch (onid) {
                case (byte) 0x6d:
                    newCache[4] = (byte) 0x03;
                    newCache[5] = (byte) 0x6e;
                    break;
                case (byte) 0x08:
                    newCache[4] = (byte) 0x08;
                    newCache[5] = (byte) 0x00;
                    break;
                case (byte) 0x3f:
                    newCache[4] = (byte) 0x01;
                    newCache[5] = (byte) 0x3e;
                    break;
                case (byte) 0x01:
                    newCache[4] = (byte) 0x00;
                    newCache[5] = (byte) 0x01;
                    break;
                case (byte) 0x04:
                    newCache[4] = (byte) 0xfb;
                    newCache[5] = (byte) 0xff;
                    break;
                case (byte) 0xab:
                    newCache[4] = (byte) 0x00;
                    newCache[5] = (byte) 0xab;
                    break;
                case (byte) 0x56:
                    newCache[4] = (byte) 0x00;
                    newCache[5] = (byte) 0x56;
                    break;
                case (byte) 0x02:
                    newCache[4] = (byte) 0x00;
                    newCache[5] = (byte) 0x02;
                    break;
                case (byte) 0x7e:
                    newCache[4] = (byte) 0x00;
                    newCache[5] = (byte) 0x7e;
                    break;
                case (byte) 0x06:
                    newCache[4] = (byte) 0x06;
                    newCache[5] = (byte) 0x00;
                    break;
                case (byte) 0x85:
                    newCache[4] = (byte) 0x00;
                    newCache[5] = (byte) 0x85;
                    break;
                case (byte) 0x71:
                    newCache[4] = (byte) 0x00;
                    newCache[5] = (byte) 0x71;
                    break;
                case (byte) 0x46:
                    newCache[4] = (byte) 0x00;
                    newCache[5] = (byte) 0x46;
                    break;
                default:
                    newCache[4] = (byte) 0x00;
                    newCache[5] = (byte) 0x85;
            }
            newCache[6] = (byte) 0x06;                       
            newCache[7] = (byte) 0x04;                       
            System.arraycopy(receiveData, 12, newCache, 8, 4);      
            newCache[12] = (byte) 0x01;                      
            System.arraycopy(receiveData, 16, newCache, 13, 16);    

            //send the converted data
            DatagramPacket response = new DatagramPacket(newCache, newCache.length, InetAddress.getByName(host), cwPort);
            mSocket.send(response);

            StringBuilder sb2 = new StringBuilder();                //
            for (byte k : newCache) {                               //
                sb2.append(String.format("%02X ", k));              //just for checking the data , will be removed in final version
            }                                                       //
            System.out.println("Sent:     " + sb2.toString());      //
        }

        @Override
        protected void compute() {
            try {
                invokeAll(new Switch(mSocket));
            } catch (UnknownHostException ex) {
                Logger.getLogger(CwStreamSwitcher.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(CwStreamSwitcher.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }

    public void CwServer(int port) throws SocketException, IOException {
        DatagramSocket serverSocket = new DatagramSocket(port);
        int processors = Runtime.getRuntime().availableProcessors();
        CwStreamSwitcher.Switch fb = new CwStreamSwitcher.Switch(serverSocket);
        ForkJoinPool pool = new ForkJoinPool();
        pool.invoke(fb);
    }

    public static void main(String[] args) throws SocketException, IOException {
        int port;
        if (args.length > 0) {
            port = Integer.parseInt(args[0]);
        } else {
            port = 9876;
        }
        new CwStreamSwitcher().CwServer(port);
    }
} 
```

该程序编译并运行良好，但大约 5 分钟后它停止并显示以下错误消息：

```
Exception in thread "main" java.lang.StackOverflowError
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
        at java.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:536)
        at java.util.concurrent.ForkJoinTask.reportResult(ForkJoinTask.java:596)
        at java.util.concurrent.ForkJoinTask.join(ForkJoinTask.java:640)
        at java.util.concurrent.ForkJoinPool.invoke(ForkJoinPool.java:1521)
        at cwstreamswitcher.CwStreamSwitcher.CwServer(CwStreamSwitcher.java:150)
        at cwstreamswitcher.CwStreamSwitcher.main(CwStreamSwitcher.java:171)
Caused by: java.lang.StackOverflowError
        at java.net.PlainDatagramSocketImpl.receive0(Native Method)
        at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:135)
        at java.net.DatagramSocket.receive(DatagramSocket.java:775)
        at cwstreamswitcher.CwStreamSwitcher$Switch.<init>(CwStreamSwitcher.java:31)
        at cwstreamswitcher.CwStreamSwitcher$Switch.compute(CwStreamSwitcher.java:126)
        at java.util.concurrent.RecursiveAction.exec(RecursiveAction.java:177)
        at java.util.concurrent.ForkJoinTask.doInvoke(ForkJoinTask.java:377)
        at java.util.concurrent.ForkJoinTask.invokeAll(ForkJoinTask.java:721) 
```

CwStreamSwitcher.java:126 是这个方法调用：protected void compute() {

什么会导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:58:30.800

您的 RecursiveAction 似乎没有停止条件。在 compute() 中，您应该决定何时生成新的 Switch，以及何时生成了足够的 Switch。

您的代码将永远产生 Switch。

# django - Django 禁止 HttpResponse

> ID：14124466
> 
> 赞同：0
> 
> 时间：2013-01-02T15:21:41.603
> 
> 标签：django, httpresponse

我正在使用 Django 中的开箱即用管理模块来开发一个小型电影管理器。

我通过传递这部电影的 id 在电影管理页面上添加了一个“播放”链接来播放电影。所以后端是这样的：

```
import subprocess 
def play(request, movie_id):
try:
    m = Movie.objects.get(pk=movie_id)
    subprocess.Popen([PLAYER_PATH, m.path + '/' + m.name])
    return HttpResponseRedirect("/admin/core/movie")
except Movie.DoesNotExist:
    return HttpResponse(u"The movie is not exist！") 
```

如上代码所示，每次点击“播放”链接时，页面都会刷新到/admin/core/movie，也就是电影管理页面，我只是不想让后端做这种事情，因为我可能会使用管理模块提供的“搜索”功能，所以点击“播放”之前的URL可能是这样的：“/admin/core/movie/?q=gun”，如果响应生效，那么查询条件将被删除。

所以，我的想法是我是否可以禁止 HttpResponse，以便让我留在当前页面上。

关于这个问题有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:10:36.303

我在 admin 中使用了自定义操作来实现这个功能。所以最后我觉得动作有点像过程，没有返回值，请求有点像有返回值的方法（视图）......

谢谢 ！

# android - 如果我在 MainActivity 以外的其他类中使用 findViewById，我的应用程序会崩溃

> ID：14124468
> 
> 赞同：0
> 
> 时间：2013-01-02T15:21:48.757
> 
> 标签：android

我需要使用 setText() 方法在 TextView 中写入文本。如果我写这个

```
TextView t = (TextView)this.findViewById(R.id.test); 
```

在我的 MainActivity 类中它可以工作，如果我尝试在另一个类中编写它，例如这里

```
public class AssociaCarta extends Activity{
    public void associaCarta(int numeroRandom, ImageView carta) {   
        TextView t = (TextView)this.findViewById(R.id.test);
    }
} 
```

我的应用程序崩溃。我不明白为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:45:14.753

一种解决方案是将当前 Activity 作为参数传递给您的方法，如下所示：

```
public class AssociaCarta {
    public void associaCarta(Activity context, int numeroRandom, ImageView carta) {
        TextView t = (TextView) context.findViewById(R.id.user);
    }
} 
```

然后你会像这样在你的 MainActivity 中使用它：

```
AssociaCarta carta = new AssociaCarta();
carta.associaCarta(this, randomNumber, cartaImageView); 
```

# coldfusion - 使用 ColdFusion 将文件上传到 Google Drive

> ID：14124469
> 
> 赞同：24
> 
> 时间：2013-01-02T10:01:30.930
> 
> 标签：coldfusion, google-drive-api, cfml

*为更好的第二部分进行了新更新 - 现在进入“308 Resume Incomplete”，即使文件应该只是一个上传！

我正在使用`cfgoogle`Ray Camden 的基础。但是谷歌已经弃用了文件上传的代码。新标准是[可恢复媒体上传](https://developers.google.com/gdata/docs/resumable_upload)。

我在上面引用的谷歌文档中让这部分工作（直到并包括“启动可恢复的上传请求”）。

调用页面：

```
<cfset application.cfc.Google                   = createObject('component','#path_cf_cfc#Google') />
<cfset application.cfc.GoogleDocs               = createObject('component','#path_cf_cfc#GoogleDocs') />

<cfset gtoken = application.cfc.GoogleDocs.authenticate(emailaddress,password)>

<CFSET testdoc = "a\filepath\documentname.doc">
<CFSET FileType = "application/msword">
<CFSET FileTitle = "test_001">

<cfset temp = application.cfc.GoogleDocs.upload_auth("#Application.Map.DocStorage##tv.testdoc#",FileType,FileTitle)>  

<CFSET uploadpath = Listgetat(Listgetat(temp.header,ListContains(temp.header,"https://docs.google.com","#chr(10)#"),"#chr(10)#"),2," ") >  

<cfset temp2 = application.cfc.GoogleDocs.upload_file("#Application.Map.DocStorage##tv.testdoc#",FileType,FileTitle,uploadpath)> 
```

该代码可以工作到并包括`cfset`临时行（获取唯一的上传 URI）

这是upload_auth的代码：

```
<cffunction name="upload_auth" access="public" returnType="any" hint="I get a uniqu URI from Google API." output="false">
<cfargument name="myFile" type="string" required="true" hint="filepath to upload.">
<cfargument name="myType" type="string" required="true" hint="application/msword"> 
<cfargument name="myTitle" type="string" required="true" hint="name of doc"> 

<cfset GoogleUrl = "https://docs.google.com/feeds/upload/create-session/default/private/full">
<cfset GoogleVersion = 3> 
<cfset FileSize = createObject("java","java.io.File").init(myFile).length()>

<cfhttp url="#GoogleUrl#" method="post" result="diditwork" resolveurl="no">
<cfhttpparam type="header" name="Authorization" value="GoogleLogin auth=#getAuth(variables.docservice)#">
<cfhttpparam type="header" name="GData-Version" value="#GoogleVersion#">
<cfhttpparam type="header" name="Content-Length" value="0">
<cfhttpparam type="header" name="X-Upload-Content-Type" value="#myType#">
<cfhttpparam type="header" name="X-Upload-Content-Length" value="#FileSize#">
<cfhttpparam type="header" name="Slug" value="#myTitle#">

</cfhttp>

<cfreturn diditwork>
</cffunction> 
```

好的 - 到目前为止一切顺利。但这里是它崩溃的地方：

运行 upload_file 从 Google 返回“308 Resume Incomplete”（以免不是 400！）。啊！！

这是upload_file -

```
<cffunction name="upload_file" access="public" returnType="any" hint="I upload the document." output="false">
<cfargument name="myFile" type="string" required="true" hint="filepath to upload.">
<cfargument name="myType" type="string" required="true" hint="like application/msword"> 
<cfargument name="myTitle" type="string" required="true" hint="name of doc"> 
<cfargument name="myAuthPath" type="string" required="true" hint="call auth"> 

<cfset FileSize = GetFileInfo(myFile).size >
<CFSET tv.tostartwithzero = FileSize - 1>

<CFFILE action="read" file="#myfile#" variable="FileText">

<cfhttp url="#myAuthPath#" method="put" result="diditwork" resolveurl="no" multipart="yes" charset="utf-8" >
<cfhttpparam type="header" name="Authorization" value="GoogleLogin auth=#getAuth(variables.docservice)#">
<cfhttpparam type="header" name="GData-Version" value="#variables.GoogleVersion#">
<cfhttpparam type="header" name="Content-Length" value="#FileSize#">
<cfhttpparam type="header" name="Content-Range" value="bytes 0-#tv.tostartwithzero#/#FileSize#">
<cfhttpparam type="header" name="Content-Type" value="#myType#">

<cfhttpparam type="body" value="#trim(FileText)#">

</cfhttp>

<cfreturn diditwork>
</cffunction> 
```

所以，我们有它 - 我被卡住了。我可以获得唯一的 URI，但是（可能是因为它是深夜）我对我做错的事情感到脑死，否则要完成文件上传。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:06:01.833

我强烈建议在这里采取不同的方法。你走的路有两个大问题：

*   看来代码正在使用已弃用的客户端登录身份验证机制，并且正在使用用户名/密码而不是 OAuth。
*   使用已弃用的文档列表 API 而不是较新的 Drive API。

由于您可以调用 java，我建议用纯 Java 编写上传代码，然后根据需要从您的 CF 页面调用它。

# c# - 从 C# 调用 T-SQL 存储过程超时 - 尝试重新编译

> ID：14124471
> 
> 赞同：2
> 
> 时间：2013-01-02T15:21:56.477
> 
> 标签：c#, sql, sql-server

我有一个在 SQL Server 管理工作室中执行需要 5-10 秒的存储过程。

当从 C# 调用它时，它会在 10 分钟后超时：

```
cmd.CommandTimeout = 600; 
```

我使用 sp_recompile 重新编译查询，还使用 ​​DBCC DROPCLEANBUFFERS 和 DBCC FREEPROCCACHE 来清除任何缓存和执行计划，但均无济于事。

我已经搜索和搜索，但我只找到了指向我上面尝试过的答案。所以我在想，也许我错过了一些更明显的东西？

```
public static void Action_StoredProc(SqlConnection conn, Boolean map, string acc) {
        SqlCommand cmd = new SqlCommand("Action_StoredProc", conn);
        cmd.CommandType = System.Data.CommandType.StoredProcedure;
        cmd.Parameters.Add("@map", SqlDbType.Bit).Value = map;
        cmd.Parameters.Add("@acc", SqlDbType.VarChar).Value = acc;
        cmd.CommandTimeout = 600;
        cmd.ExecuteNonQuery();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T17:49:19.477

您可能会发现这篇文章很有帮助：

应用程序慢，SSMS 快？

**[了解性能奥秘](http://www.sommarskog.se/query-plan-mysteries.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:17:18.453

如果您使用 SQL Server Profiler，请设置一个正在运行的配置文件，然后在 SSMS 中运行查询，然后从代码中运行。

记下从 SSMS 和您的代码传递的 SET 语句，我猜它们会有所不同。

然后，您需要做的就是在代码中针对您的连接显式设置它们，或者将不同的连接添加到 SP 的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T17:34:43.767

我有一个非常相似的情况，即通过 SSMS 执行一个过程需要不到 1 秒的时间，但是从任何代码运行它需要 45 秒才能完成。我们加载 SQL 跟踪，发现执行计划与通过 SSMS 和代码运行的过程不同。为了在这两个地方获得正确的执行计划，我们重新编译了该过程，对其进行了更改，清除了数据库中的所有执行计划，等等……但仍然存在问题。

最后，重建该过程使用的主表的统计信息，然后重新编译该过程，迫使两种执行方法的执行计划相同，从而解决了我们的问题。

以下是命令：

```
UPDATE STATISTICS [TABLE NAME]
GO

EXEC sys.sp_recompile @objname = N''
GO 
```

# python - 使用类的 __call__ 方法作为 Numpy curve_fit 的输入

> ID：14124474
> 
> 赞同：4
> 
> 时间：2013-01-02T15:22:10.893
> 
> 标签：python, class, numpy, call, curve-fitting

由于我相当精细的函数和数据准备过程（将分析模型数据拟合到某些测量值） ，我想使用一个`__call__`类的方法作为 Numpy curve_fit 函数的输入。通过定义一个函数它工作得很好，但我不能让它与类一起工作。

要重新创建我的问题，您可以运行：

```
import numpy as np
from scipy.optimize import curve_fit

#WORKS:
#def goal(x,a1,a2,a3,a4,a5):
#    y=a1*x**4*np.sin(x)+a2*x**3+a3*x**2+a4*x+a5
#    return y

# DOES NOT WORK:
class func():
    def __call__(self,x,a1,a2,a3,a4,a5):
        y=a1*x**4*np.sin(x)+a2*x**3+a3*x**2+a4*x+a5
        return y    

goal=func()

#data prepraration ***********
xdata=np.linspace(0,50,100)
ydata=goal(xdata,-2.1,-3.5,6.6,-1,2)
# ****************************

popt, pcov = curve_fit(goal, xdata, ydata)
print 'optimial parameters',popt
print 'The estimated covariance of optimial parameters',pcov 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "D:\...some path...\test_minimizacija.py", line 35, in <module>
    popt, pcov = curve_fit(goal, xdata, ydata)
  File "C:\Python26\lib\site-packages\scipy\optimize\minpack.py", line 412, in curve_fit
    args, varargs, varkw, defaults = inspect.getargspec(f)
  File "C:\Python26\lib\inspect.py", line 803, in getargspec
    raise TypeError('arg is not a Python function')
TypeError: arg is not a Python function 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:26:36.300

简单（虽然，不漂亮），只需将其更改为：

```
popt, pcov = curve_fit(goal.__call__, xdata, ydata) 
```

有趣的是，numpy 迫使您将函数对象传递给`curve_fit`而不是任意可调用的...

快速检查源代码`curve_fit`，似乎另一种解决方法可能是：

```
popt,pcov = curve_fit(goal, xdata, ydata, p0=[1]*5) 
```

这里，`p0`是拟合参数的初始猜测。问题似乎是`scipy`检查函数的参数，以便如果您实际上没有提供参数作为初始猜测，它知道要使用多少个参数。在这里，由于我们有 5 个参数，我最初的猜测是长度为 5 的所有参数的列表。（`scipy`如果您不提供猜测，则默认使用参数）。

# php - Zend Framework 2：捕获所有路由和 url 转义

> ID：14124477
> 
> 赞同：3
> 
> 时间：2013-01-02T15:22:23.897
> 
> 标签：php, routing, zend-framework2

我正在尝试创建或找到一条基本上可以捕获所有内容的路线。我需要的是可以路由以下内容的东西；

```
/some-page/some-childpage/another-childpage
/another-page
/yet-anotherpage/page 
```

这些 url 不会与任何模块相关，它们更重要的是管理员可以在任何 url 上创建页面。

我现在有一些东西可以使用通配符路由和子通配符路由来捕获路由，但是当我在 URL 视图助手中使用它时，它会在“url”参数中对正斜杠进行编码。基本上：

```
$this->url( 'public_page', array( 'url' => 'foo/bar' ) ) 
```

正在输出`/foo%2Fbar`。

除了不允许 /s 之外，当尝试检索 url 参数时，它会将查询字符串返回到第一个 /。

任何帮助和建议都会很棒！

问候，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:18:06.343

我不确定您是否可以使用任意数量的段来做到这一点。您可以指定具有您期望的最大段数的段路由，然后只允许它们都是可选的，但如果您尝试使用大量段，这似乎是一种肮脏的方式。

```
'route' => '/:controller[[[[/:action]/:third]/:fourth]/:fifth]',
    'constraints' => array(
        'controller' => '[a-zA-Z][a-zA-Z0-9_-]+',
        'action'     => '[a-zA-Z][a-zA-Z0-9_-]+',
    ),
    'defaults' => array(
        'controller' => 'Application\Controller\IndexController',
        'action'     => 'index',
        'third'      => 'something',
        'fourth'     => 'something-else',
    ), 
```

你可以用 Regex 路由完成一些事情，但这也可能很讨厌。

[http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html#zend-mvc-router-http-regex](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html#zend-mvc-router-http-regex)

我可能会建议使用更好的 url 结构，因为深度不是很好。

# php - Symfony2 - 映射两个表

> ID：14124479
> 
> 赞同：0
> 
> 时间：2013-01-02T15:22:26.297
> 
> 标签：php, symfony, doctrine

我想加入两个表（`games`和`ownership`）。从那里，我想打印用户在所有权中分配给他的那些游戏。例如：用户（id：2）有两个游戏（id：1和id：2）。我只想打印这两个。

我的控制器如下：

```
function getGameAction($id) {
    $game = $this->getDoctrine()
      ->getRepository('GameShelfGamesBundle:Game')
      ->find($id);

    return new Response($game->getOwnership()->getName());
} 
```

实体：[所有权](http://pastebin.com/nXj23edq)和[博弈](http://pastebin.com/XYs4g7z0)。

现在，我只收到一个错误：

> 致命错误：在第 50 行调用 D:!!XAMPP\htdocs\Symfony\src\GameShelf\GamesBundle\Controller\DefaultController.php 中的未定义方法 Proxies__CG__\GameShelf\UsersBundle\Entity\Ownership::getName()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:37:51.697

查看错误消息 - 您没有任何 getOwnership 方法，甚至没有与所有权表的关系。

首先，您需要在游戏实体中声明与所有权的关系：

```
/*
 * @ORM\ManyToOne(targetEntity="Namespace\To\Ownership", inversedBy="games")
 * @ORM\JoinColumn(name="ownership_id", referencedColumnName="id")
 */
private $ownership; 
```

在您的所有权实体中：

```
/**
 * @ORM\OneToMany(targetEntity="Namespace\To\Game", mappedBy="ownership")
 */
private $games; 
```

然后运行控制台命令生成 setter 和 getter，一切都会正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:39:10.107

您只是忘记在您的所有权实体中添加一个名为“名称”的变量。因此，您不会自动生成任何 getter 和 setter。尝试将所有变量放在代码的开头@Cyprian 因此监督了您的关系。

如果您只查看错误消息，您应该会立即看到错误来自何处。

# node.js - 为什么我不能从 Heroku 找到我可以从 NPM 获得的节点模块？

> ID：14124486
> 
> 赞同：0
> 
> 时间：2013-01-02T15:22:42.643
> 
> 标签：node.js, heroku, npm

在本地，我可以运行：

```
npm install oscar@0.2.0 
```

要安装这个包：[https ://npmjs.org/package/oscar](https://npmjs.org/package/oscar)

您可以在该页面上看到当前版本是 0.2.0。

然而，当我的 package.json 包含：

```
"dependencies": {
  "oscar": "~0.2.0",
  //...
} 
```

...然后我推到 Heroku，我得到了这样的回应：

```
-----> Installing dependencies with npm
       npm ERR! Error: No compatible version found: oscar@'>=0.2.0- <0.3.0-'
       npm ERR! Valid install targets:
       npm ERR! ["0.1.0","0.1.1","0.1.2"]
       npm ERR!     at installTargetsError (/tmp/node-npm-Sezl/lib/cache.js:424:10)
       npm ERR!     at /tmp/node-npm-Sezl/lib/cache.js:406:17
       npm ERR!     at saved (/tmp/node-npm-Sezl/lib/utils/npm-registry-client/get.js:136:7)
       npm ERR!     at cb (/tmp/node-npm-Sezl/node_modules/graceful-fs/graceful-fs.js:36:9)
       npm ERR! Report this *entire* log at:
       npm ERR!     <http://github.com/isaacs/npm/issues>
       npm ERR! or email it to:
       npm ERR!     <npm-@googlegroups.com>
       npm ERR! 
       npm ERR! System Linux 2.6.32-348-ec2
       npm ERR! command "/tmp/node-node-yaOa/bin/node" "/tmp/node-npm-Sezl/cli.js" "install" "--production"
       npm ERR! cwd /tmp/build_13f8kjrsns2wh
       npm ERR! node -v v0.4.7
       npm ERR! npm -v 1.0.106
       npm ERR! 
       npm ERR! Additional logging details can be found in:
       npm ERR!     /tmp/build_13f8kjrsns2wh/npm-debug.log
       npm not ok
 !     Failed to install --production dependencies with npm
 !     Heroku push rejected, failed to compile Node.js app

To git@heroku.com:xxxxx-xxxxxx-nnnn.git
 ! [remote rejected] master -> master (pre-receive hook declined) 
```

如果它有任何影响，这是我的 package.json 为 Heroku 指定的 node+npm 版本：

```
"engines": {
  "node": "0.8.x",
  "npm":  "1.1.x"
}, 
```

我究竟做错了什么？为什么此软件包的最新版本不可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:25:48.400

糟糕，答案竟然是我的问题中的最后一个代码示例尚未提交，因此 Heroku 仍在使用旧版本的 NPM 和 Node。提交该块并重新推送修复它。

# amazon-web-services - SSH 错误 - 标准输入必须是 TTY

> ID：14124488
> 
> 赞同：5
> 
> 时间：2013-01-02T15:22:47.350
> 
> 标签：amazon-web-services, amazon-ec2, sudo, su

我正在尝试运行以下命令：

```
ssh -i FILENAME.pem ec2-user@ec2-00-000-00-00.eu-west-1.compute.amazonaws.com su --session-command="./update.sh" 
```

我不断收到错误消息：

```
standard in must be a tty 
```

我怎样才能`SSH`在服务器上运行名为的文件`./update.sh`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T16:22:53.510

SSH 进入您的实例并运行`sudo visudo`. 找到这一行：`Defaults requiretty`并在其下方添加这一行：`Defaults:ec2-user !requiretty`保存并退出。 *（如果您不熟悉`vi`，请按`i`进入插入模式以对文件进行更改。`ESC`完成后按 并`ZZ`保存并退出。）*

`-t`然后在添加开关的情况下运行 SSH 命令：

`ssh -t -i FILENAME.pem ec2-user@ec2-00-000-00-00.eu-west-1.compute.amazonaws.com su --session-command="./update.sh"`

# php - 当我在 while 循环中有 mysql 查询时出现“未收到数据”错误

> ID：14124490
> 
> 赞同：2
> 
> 时间：2013-01-02T15:23:06.163
> 
> 标签：php

我有这个 PHP 代码：

```
<?php
    include_once("connect_to_mysql.php");

    $max=300;
    while($max--)
    {
        sleep(1);
        doMyThings();
    }
?> 
```

它应该重复一个 mysql 查询 300 次，每次之间的间隔为 1 秒。但问题是在浏览器中大约一分钟后我收到这条消息：没有收到数据。无法加载网页，因为服务器未发送数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:28:32.887

浏览器不会等待整整 5 分钟让您完成查询。

您需要找到不同的解决方案。考虑在 CLI 中执行 PHP 脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:37:39.490

问题如下：您的代码将至少（不考虑所需的时间量`doMyThings()`）持续 300 秒。大多数 PHP 环境将默认脚本运行时间设置为大约 60 秒，脚本停止并且没有打印出任何内容。

接下来的事情是（如果脚本执行时间设置得足够高以允许长时间运行脚本），脚本必须运行直到完成（即约 300 秒），然后将数据写入输出流。在此之前，您将看不到任何输出。

要规避这两个问题，请参阅以下代码：

```
<?php
    // If allowed, unlimited script execution time
    set_time_limit(0);

    // End output buffering
    ob_end_flush(); 

    include_once("connect_to_mysql.php");

    $max=300;

    // End output buffering IE and Safari Workaround
    // They will only display the webpage if it's completely loaded or
    // at least 5000 bytes have been "printed".
    for($i=0;$i<5000;$i++)
    {
        echo ' ';
    }       

    while($max > 0)
    {
        sleep(1);
        doMyThings();
        $max--;

        // Manual output buffering
        ob_flush();
        flush();            
    }
?> 
```

也许你也对这篇文章感兴趣：[逐步输出 exec() ping 结果](https://stackoverflow.com/questions/10807607/outputting-exec-ping-result-progressively/10814087#10814087)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:42:01.257

执行 300 次 doMyThings(); 似乎超时 你可以试试`set_time_limit(0);`

> 设置允许脚本运行的秒数。如果达到此值，脚本将返回致命错误。默认限制为 30 秒，如果存在，则为 php.ini 中定义的 max_execution_time 值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T15:44:30.250

当您在服务器端执行长时间的 php 代码时，您需要更改 php.ini 中的 max_execution_time 指令。但是浏览器不会等待你想要多长时间，所以你需要使用像 AJAX 这样的异步技术

# javascript - 重新打开 JQM 对话框

> ID：14124494
> 
> 赞同：0
> 
> 时间：2013-01-02T15:23:12.987
> 
> 标签：javascript, jquery, jquery-mobile

嗨，新年快乐，

有这个 JQM 对话框，它通过 AJAX 调用像这样打开

```
$('#calendar-event-form-container').html(HTML).toggle();
$("#calendar-event-form-container").dialog({theme:'a'}); 
```

并关闭

```
$("#calendar-event-form-container").dialog('close');
$("#calendar-event-form-container").toggle(); 
```

下次打开对话框时，它会丢失其 JQM 主题和位置。

任何人都可以看到代码出错的地方吗？

提前致谢 巴巴克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:43:27.097

将表单显示和隐藏为对话框`toggle()`是非标准的。jQuery Mobile 对话框旨在显示或隐藏页面`<div data-role="page">`容器。因此，假定它位于当前页面之外，并且在显示为对话框之前不可见。

[http://jquerymobile.com/demos/1.2.0/docs/pages/dialog/index.html](http://jquerymobile.com/demos/1.2.0/docs/pages/dialog/index.html)

`data-rel="dialog"`“通过将属性添加到页面锚链接，任何页面都可以呈现为模式对话框”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:08:43.537

andleer 是正确的，不要在 jQM 中使用 toggle()，它不是必需的。创建 jQM 对话框以用作单独的页面。看看这个例子：

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h3>
            First Page
        </h3>
        <a href="#second" class="ui-btn-right">Next</a>
    </div>

    <div data-role="content">
        <a href="#" data-role="button" id="open-button">Open dialo</a>         
    </div>

    <div data-theme="a" data-role="footer" data-position="fixed">

    </div>
</div>
<!-- DIALOG BOX -->
<div data-role="page" id="dialog-box" data-theme="b">
    <div data-role="header">
        <h1>Warning</h1>
    </div>
    <div data-role="content">
        <h3 id="dialog-msg">
            Dialog test
        </h3>
        <a href="#" data-role="button" id="close-button">
            Close dialog
        </a>   
    </div>
</div> 
```

如果可能的话，你应该打开这样的对话框：

```
$.mobile.changePage('#dialog-box', {transition: 'pop', role: 'dialog'}); 
```

如果您正在动态更改对话框内容，则必须在其上触发 pagecreate 以正确重新设置样式：

```
$('#dialog-box').trigger("pagecreate"); 
```

这是一个完整的 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/fXzWj/](http://jsfiddle.net/Gajotres/fXzWj/)

# java - 查找 Android 应用程序的主要活动

> ID：14124495
> 
> 赞同：0
> 
> 时间：2013-01-02T15:23:13.223
> 
> 标签：java, android, apk

我有一个自定义启动器，有时想添加一个按钮来启动第三方应用程序。为此，我需要很容易找到的应用程序包名称，还需要应用程序主或启动活动。我用它来创建传递给我的应用程序的意图。

例如，要创建启动 Skype 的意图，我使用：

```
`new Intent().setComponent(new ComponentName("com.skype.raider", "com.skype.raider.Main")) 
```

我能够通过谷歌搜索找到主要活动的名称，并且由于 Skype 是一个受欢迎的应用程序，它最终出现了。

我知道如果我有 APK，我可以打开它并查看 androidmainifest ，但是我完全不确定如何获取某些应用程序的 APK。例如，我想[从 Google Play 启动这个应用程序](https://play.google.com/store/apps/details?id=com.dbapp.android.mediahouse&feature=nav_result#?t=W251bGwsMSwyLDNd)。我可以看到包名称，`com.dbapp.android.mediahouse`但是我不确定如何获取主要活动的名称（我尝试过 .MAIN）。

我查看了 Chrome 扩展[apk 下载](http://apps.evozi.com/apk-downloader/)器，该下载器据称允许您从 Google Play 获取 APK，但它似乎不再起作用。

我知道从自定义启动器启动第三方应用程序一定很常见，但我在搜索时找不到答案。

人们通常如何处理这个问题？您是否从 Google Play 商店获得了 APK，如果是，如何做到这一点？同样，我知道我可以通过阅读清单来获取活动，但在很多情况下我不知道如何获取 APK 本身。任何建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:59:47.937

启动器应该通过使用和来查找设备上应用程序所宣传的`MAIN`/活动。这是一个实现此类启动器[的示例应用程序。](https://github.com/commonsguy/cw-omnibus/tree/master/Introspection/Launchalot)`LAUNCHER``PackageManager``queryIntentActivities()`

```
PackageManager pm=getPackageManager();
Intent main=new Intent(Intent.ACTION_MAIN, null);

main.addCategory(Intent.CATEGORY_LAUNCHER);

List<ResolveInfo> launchables=pm.queryIntentActivities(main, 0); 
```

然后，您可以使用它在 a 、等`List<ResolveInfo>`中显示可用的活动。`ListView``GridView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:33:45.760

`PackageManager`提供了一种获得您想要的东西的方法：

```
PackageManager.getLaunchIntentForPackage(String packageName) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:57:55.060

您可以使用`Intent intent = new Intent(android.content.Intent.MAIN);`

或者像后面的例子一样启动 Maps 并解析一个 URI：

```
String uri = "http://maps.google.com/maps?saddr=" + Utils.getLatitude(ShowDetails.this)+","+Utils.getLongitude(ShowDetails.this)+"&daddr="+userLatitude+","+userLongitude;
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

# javascript - 我怎样才能有一个设置高度但自动高度单元格的表格

> ID：14124496
> 
> 赞同：2
> 
> 时间：2013-01-02T15:23:14.447
> 
> 标签：javascript, html, css

```
.suspensionTableScroll {
   width: 100%;
   height: 180px;
   overflow: auto;
} 
```

我有上面的CSS。该表是 180 像素，这很好，但其中的数据未与顶部对齐。行添加在中间，随着我添加更多行，高度会变小。

我怎样才能根据他们的内容文本使他们的高度自动？

我试过了`vertical-align:top`，`vertical-align:text-top`但行仍然出现在中间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:25:23.043

也许您想设置放置表格的外部元素的高度？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:48:48.867

**更新：**

表格单元格高度会根据表格高度自动调整。

使用[max-height](http://www.w3schools.com/cssref/pr_dim_max-height.asp)而不是[height](http://www.w3schools.com/cssref/pr_dim_height.asp)，因此表格单元格的高度将取决于它们的上下文，并且您的表格高度不会超过 180 像素。

# c - 嵌入式系统文件加密库

> ID：14124497
> 
> 赞同：6
> 
> 时间：2013-01-02T15:23:21.550
> 
> 标签：c, encryption, filesystems, embedded

我有一个项目，其中一部分是将加密合并到 FAT 文件系统中。

该项目的目标不是加密，所以我可以自由使用开源的预完成库。

理想情况下，我所追求的是一个使用 RSA 的 C 库，它已经具有计算密钥和加密/解密文件的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T21:45:03.960

您可能想查看[NaCl](http://nacl.cr.yp.to/features.html)（发音为“salt”），尤其是因为这是针对嵌入式系统的。

它具有特定于 CPU 的调整，并且不需要任何动态内存分配。

至于许可，页面（上面链接）说“所有的 NaCl 软件都在公共领域”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:36:08.667

你可能想试试[河豚。](http://www.schneier.com/blowfish.html)它是免版税的，并且有[几个开源 C 实现](http://www.schneier.com/blowfish-download.html)。它是由[Bruce Schneier](http://www.schneier.com/about.html)创建的。这是[一篇](http://www.embedded.com/design/configurable-systems/4024599/Encrypting-data-with-the-Blowfish-algorithm)关于在嵌入式系统中使用它的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T15:51:59.303

关于库 - 检查[Cryptlib](http://www.cs.auckland.ac.nz/~pgut001/cryptlib/)。它具有双重许可证，并包含相当多的功能。

但是，*正确*加密文件的能力取决于您如何写入数据以及您希望如何进行加密。

具有随机访问的流的流加密（即，当您需要在写入或读取文件数据时即时加密-解密文件数据时）不是一项简单的任务，并且需要一定的密码学知识才能采用正确的加密模式并正确执行此操作。

另一方面，如果你有一个文件并希望它加密，CryptLib 有 PKCS7/CMS 实现来完成这项工作。

# lotusscript - 仅从日期/时间值 LotusScript Lotus Notes 中提取时间

> ID：14124501
> 
> 赞同：2
> 
> 时间：2013-01-02T15:23:37.537
> 
> 标签：lotusscript

我试图从 LotusScript 值中仅以 12 小时格式提取时间。

例如，如果值为 [3:00:00 PM] 我想返回“3:00”，就是这样。

问题是我每小时得到“15”。我得到“0”作为分钟。我尝试过的一些事情会返回错误。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:19:16.133

I'd recommend to use [format function](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/LSAZ_FORMAT_FUNCTION.html)

here is an example:

```
Dim s As New notessession
Dim dt As New NotesDateTime(now)
Print strleft(Format(dt.Timeonly, "h:nn AM/PM"), " ") 
```

# apache - 使用 .htaccess 进行静默重写

> ID：14124506
> 
> 赞同：0
> 
> 时间：2013-01-02T15:23:42.237
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我正在尝试在我的网站上执行以下操作：

重定向 / 到 /home 重定向 /index.php 到 /home

home 目录实际上不存在，但应该链接到 index.php 文件。因此服务器将运行 index.php，而客户端将 server/home 视为位置。我相信这应该通过一个无声的请求来完成，但是怎么做呢？

我有的：

```
RewriteEngine On
RewriteRule ^(.*[^/])$ /$1/ [L,R=301] # for trailing slash
RewriteRule ^home/$ http://server/index.php [NC]
RewriteRule ^/$ http://server/home [L,NC]
RewriteRule ^index.php/$ http://server/home [L,NC] 
```

虽然不起作用，它会无限重定向......我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:00:51.810

```
RewriteEngine On
RewriteBase /

#RewriteRule ^(.*[^/])$ /$1/ [L,R=301] # for trailing slash

RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteRule ^(/|index\.php/?|home)$ /home/ [L,R=302]

RewriteRule ^home/$ /index.php [NC] 
```

# php - 在自定义配置中获取图像的上传目录 - Magento

> ID：14124510
> 
> 赞同：2
> 
> 时间：2013-01-02T15:24:00.130
> 
> 标签：php, magento, magento-1.7

我正在尝试在后端检索上传图像的完整 URL。

为上传创建配置的代码：

```
<backend_model>adminhtml/system_config_backend_image</backend_model> 
<upload_dir config="system/filesystem/media" scope_info="1">voucher/logo</upload_dir>
<base_url type="media" scope_info="1">voucher/logo</base_url> 
```

但是当我尝试得到它时：

```
Mage::getBaseUrl('media').Mage::getStoreConfig('group/locale/module_logoimage',Mage::app()->getStore()); 
```

它不会给我在 system.xml（上图）中设置的上传目录，我得到：[http](http://sample.com/media/default(scope)/image.png) ://sample.com/media/default(scope)/image.png并且它错过了凭证/徽标部分。如何在不读取节点的情况下从配置中获取它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:13:06.537

似乎 Magento 没有内置的方法来检索`<upload_dir`.

如果您查看`Mage_Catalog_Model_Product_Image`第 563 行：

```
 $baseDir = Mage::getSingleton('catalog/product_media_config')->getBaseMediaPath(); 
```

跟踪此函数以：

```
Mage_Catalog_Model_Product_Media_Config 
```

它只这样做：

```
return Mage::getBaseDir('media') . DS . 'catalog' . DS . 'product'; 
```

有关更多信息，请参阅 AlanStorm 的这篇文章（查看评论部分）： [http ://alanstorm.com/magento_system_configuration_in_depth_tutorial](http://alanstorm.com/magento_system_configuration_in_depth_tutorial)

**更新**

您也可以使用以下代码获取节点的数据：

```
Mage::app()->getStore()-> getConfig('path/to/node') 
```

# php - 在 Fedora 上使用 Xdebug 和 Netbeans 进行调试

> ID：14124511
> 
> 赞同：9
> 
> 时间：2013-01-02T15:24:06.537
> 
> 标签：php, debugging, netbeans, xdebug, fedora

如何在 Fedora 17 操作系统上安装 Xdebug 以便与 netbeans 7.3（测试版）一起使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T16:55:45.113

安装 Xdebug：

> sudo yum install php-pecl-xdebug.x86_64

将此行添加到 php.ini 的末尾`/etc/php.ini`

```
zend_extension=/usr/lib64/php/modules/xdebug.so
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000 
```

将相同的行添加到`/etc/php-zts.d/xdebug.ini`：

```
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000 
```

允许 Xdebug 的端口

```
sudo semanage port -a -t http_port_t -p tcp 9000 
```

现在在您的系统中找到您的 netbeans.conf 文件：

```
sudo find / -name netbeans.conf 
```

现在，打开文件并在 netbeans_default_options 中添加文本“-J-Dorg.netbeans.modules.php.dbgp.level=400”，使该行看起来像这样：

> netbeans_default_options="-J-client -J-Xss2m -J-Xms32m -J-XX:PermSize=32m -J-Dnetbeans.logger.console=true -J-ea -J-Dapple.laf.useScreenMenuBar=true -J- Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true -J-Dsun.zip.disableMemoryMapping=true -J-Dsun.awt.disableMixing=true -J-Dnetbeans.extbrowser.manual_chrome_plugin_install=yes - J-Dorg.netbeans.modules.php.dbgp.level=400"

重新启动 NetBeans IDE 和 apache：

```
sudo service httpd restart 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T06:08:30.937

```
Configure php.ini for xDebug
Use: output_buffering = Off
Comment out any lines that configures output_buffering such as output_buffering = 4096
Add the following to /etc/php.ini
zend_extension=”/usr/lib/php5/…../xdebug.so”
[xdebug]
;xdebug.remote_autostart = 0
xdebug.remote_enable = true
xdebug.remote_handler=dbgp
;xdebug.remote_mode=”req”
xdebug.remote_port = 9001
xdebug.remote_host = 127.0.0.1
xdebug.profiler_enable = 1
xdebug.profiler_output_dir = “/tmp/”
xdebug.idekey=”netbeans-xdebug” 
```

# ruby-on-rails - Rails：如果没有找到对象而不是发送方法，则返回一个字符串

> ID：14124517
> 
> 赞同：1
> 
> 时间：2013-01-02T15:24:26.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个通过“origin_user”关联到用户模型的通知模型。

我正在寻找一个捷径：

```
if notification.origin_user.present?
  notification.origin_user.name
else
  "a user"
end 
```

不是有神奇的多合一功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:27:10.053

```
notification.origin_user.try(:name) || "a user" 
```

但如果你承诺一个`User`，就给一个`User`。您可以依赖[NullObject 设计模式。](http://en.wikipedia.org/wiki/Null_Object_pattern)

# nservicebus - 停止 MSMQ 时 NServiceBus 100% CPU 使用率

> ID：14124519
> 
> 赞同：0
> 
> 时间：2013-01-02T15:24:43.323
> 
> 标签：nservicebus

我们在我们的 Web 应用程序中使用 NServiceBus，并且最近发现，尽管处于连接状态，但有时会有一些消息仅位于出站队列中，但从未离开。删除它们的最快解决方案是重新启动 MSMQ 服务。我遇到的一个问题是，当重新启动或停止 MSMQ 服务时，CPU 会跳到 100%。

有没有人遇到过这种情况并找到一种方法来防止这种高负载。我不喜欢仅仅因为停止服务而中断的想法？我知道的一种方法是使用仅发送模式，但这并不理想。

更新： global.asax 应用程序中使用的配置代码开始：

```
 IBus bus = Configure
            .With()
            .DefaultBuilder()
            .FileShareDataBus("c:\\storage")
            .XmlSerializer()
            .MsmqTransport()
            .IsTransactional(false)
            .PurgeOnStartup(false)
            .UnicastBus()
            .ImpersonateSender(false)
            .CreateBus()
            .Start(() => Configure.Instance.ForInstallationOn<Windows>().Install()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:13:05.570

我认为您的问题可能与问题[不正确的 MSMQ 权限导致](https://github.com/NServiceBus/NServiceBus/issues/771)GitHub 上的 Web 应用程序中的 CPU 高，该应用程序已关闭，但针对尚未发布的 4.0 版本。

问题是 NServiceBus 正在尝试从队列中读取，但没有队列！因此，它进入了与处理器挂钩的 Check-Error-Retry 的紧密循环。

对于需要它的 Web 服务器来说，关闭 MSMQ 是一件相当愤怒的事情。如果您需要在生产中执行此操作，我建议将服务器从负载平衡池中取出（我假设/希望您正在使用负载平衡器），然后重新启动 MSMQ，然后重新启动 IIS。如果服务器不处理请求，那么短时间的高 CPU 活动应该没什么大不了的。

当 4.0 出来时，它应该解决 CPU 问题，但我仍然建议让服务器停止旋转，否则`Bus.Send()`会在 MSMQ 不可用时抛出。

# postgresql - 在 Postgresql 中转义反斜杠

> ID：14124520
> 
> 赞同：2
> 
> 时间：2013-01-02T15:24:43.853
> 
> 标签：postgresql, escaping

我需要从 postgres 将文件写入磁盘，该文件具有反斜杠字符串，后跟正斜杠`\/`

与此类似的代码不起作用：

```
drop table if exists test;
create temporary table test (linetext text);
insert into test values ('\/\/foo foo foo\/bar\/bar');
copy (select linetext from test) to '/filepath/postproductionscript.sh'; 
```

上面的代码产生`\\/\\/foo foo foo\\/bar\\/bar`......它插入了一个额外的反斜杠。

当您查看临时表时，字符串被正确地视为`\/\/`，所以我不确定文本在何处或何时更改为`\\/\\/`

我尝试`\`在字符串之前将 E 的 , 变体和 quote_literal() 加倍，但没有运气。

我注意到这里找到了解决方案[Postgres Manual](http://www.postgresql.org/docs/9.2/interactive/sql-syntax-lexical.html#SQL-SYNTAX-STRINGS-UESCAPE)

运行 Postgres 9.2，编码为 UTF-8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:39:48.310

问题在于它`COPY`不打算写出纯文本文件。它旨在写出可由`COPY`. 它使用的半内部编码会进行一些反斜杠转义。

对于您想要做的事情，您需要编写一些自定义代码。使用普通的客户端库来读取查询结果并将它们写入文件，或者，如果您想在服务器中执行此操作，请使用 PL/Perl 或 PL/Python 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:14:06.197

仅当 stringliteral 以 E 为前缀时才识别 \ excaping，否则遵循 standard_conforming_strings 设置（或类似设置）（ANSI-SQL 具有不同的字符串转义方式，可能源于 COBOL；-）。

```
drop table if exists test;
create temporary table test (linetext text);
insert into test values ( E'\/\/foo foo foo\/bar\/bar');
copy (select linetext from test) to '/tmp/postproductionscript.sh'; 
```

UPATE：一个丑陋的黑客是使用 .csv 格式并仍然使用 \t 作为分隔符。#!/bin/sh 作为 shebang 标题行应该被视为一个功能

```
 -- without a header line
drop table if exists test;
create temporary table test (linetext text);
insert into test values ( '\/\/foo foo foo\/bar\/bar');
copy (select linetext AS "#linetext" from test) to '/tmp/postproductionscript_c.sh'
        WITH CSV
        DELIMITER E'\t'
        ;
        -- with a shebang header line
drop table if exists test;
create temporary table test (linetext text);
insert into test values ( '\/\/foo foo foo\/bar\/bar');
copy (select linetext AS "#/bin/sh" from test) to '/tmp/postproductionscript_h.sh'
        WITH CSV
        HEADER
        DELIMITER E'\t'
        ; 
```

# memory - 未收到 addSubview 通知

> ID：14124523
> 
> 赞同：3
> 
> 时间：2013-01-02T15:24:56.487
> 
> 标签：memory, notifications, autorelease, ios4, addsubview

我遇到了一个奇怪的问题。我想在我当前的视图中添加一个 UIViewcontroller（称为 iView）。我通过调用来做到这一点

```
 iView = [[KFKaraokeInfosView alloc] initWithKaraoke:karaoke NibName:@"InfosView" commingFromPlayer:NO];
    iView.songTitle.text = karaoke.title;
    [self.view addSubview:iView.view]; 
```

在 iView 的 viewDidLoad 中，我将它作为观察者添加到 NotificationCenter 以获得某个通知，像这样

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        self.title = @"About";

        if ([karaoke.styles count] == 0)
        {
            [[NSNotificationCenter defaultCenter] postNotificationName:@"GetInfosOfSong" object:self.karaoke];
        }
        else
        {
            shouldSetup = YES;
        }

        [self.navigationController setNavigationBarHidden:NO animated:YES];
        [self.navigationController.navigationBar setBarStyle:UIBarStyleBlack];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(setup) name:GetSongInfos  object:nil];
        [optionsTableView setBackgroundView:nil];

    } 
```

问题是当我在初始化时在 iView 上调用 autorelease 方法时，通知永远不会被捕获（因此永远不会调用 setup 方法），但如果我不为 iView 调用 autorelease，它就可以工作。

我不明白这种情况下的内存管理，有人可以帮我理解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:36:22.067

容器视图控制器方法可在*UIViewController 类参考的*[实现容器视图控制器](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)中找到，示例代码可在*视图控制器编程指南的*[创建自定义容器视图控制器](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)中找到。

 **因此，在 iOS 5 及更高版本中，您可能应该拥有：

```
iView = [[[KFKaraokeInfosView alloc] initWithKaraoke:karaoke NibName:@"InfosView" commingFromPlayer:NO] autorelease];
[self addChildViewController:iView];
iView.songTitle.text = karaoke.title;
[self.view addSubview:iView.view];
[iView didMoveToParentViewController:self]; 
```

如果这是 iOS 4 或更早版本，则它不支持适当的遏制。您可以手动添加它，通过像您一样添加视图，没有`autorelease`：

```
iView = [[KFKaraokeInfosView alloc] initWithKaraoke:karaoke NibName:@"InfosView" commingFromPlayer:NO];
iView.songTitle.text = karaoke.title;
[self.view addSubview:iView.view]; 
```

您显然会在父视图控制器的某个 ivar 中保留子视图控制器的副本，而不是`autorelease`它，而是`release`在子视图被关闭时明确地保留子视图控制器。请注意，由于您在预包含的 iOS4 世界中运行，因此无法保证您的子控制器接收各种事件（众所周知的旋转事件）。但是您应该收到通知中心事件。

* * *

在 iOS 4 中试图伪造包含这种丑陋的替代方法是根本不使用子视图控制器，而只是将子视图添加到父视图。您实际上可以将其添加到父控制器的 NIB，但只需将其隐藏即可。然后，当您想要显示它时，取消隐藏它。但是将所有内容保留在父视图控制器中，它是 NIB。我上面描述的伪装遏制的方法可能有效（我见过人们这样做），但它给了我heebie jeebies。这更简单。**

# vba - 根据行的内容将代码更改为自动调整列宽

> ID：14124524
> 
> 赞同：1
> 
> 时间：2013-01-02T15:24:56.200
> 
> 标签：vba, excel

我这里有一些代码很好用，但我想对其进行微调。现在宏将三行值复制到一个新工作簿。粘贴这些值时没有任何格式。并非所有单元格的内容都是可见的，因为有时列宽不够大。我的问题如下：如何更改下面提供的代码，以便根据粘贴的第一行中的文本使列变大。
如何根据第一行的内容自动调整列？

代码：

```
Public Sub pub_sub_ExportRows()

'#
'# declare private variables
'#
     Dim pvt_xls_Current As Excel.Worksheet
     Dim pvt_wbk_New As Excel.Workbook
     Dim pvt_lng_SelectedSourceRow As Long
     Dim pvt_flg_ValidRow As Boolean
     Dim pvt_lng_RowNumber As Long
     Dim pvt_lng_FirstColumn As Long
     Dim pvt_lng_LastColumn As Long
     Dim pvt_lng_ColumnNumber As Long
     Dim pvt_lng_TargetColumn As Long

'#
'# record the current row based on the active cell
'#
     Set pvt_xls_Current = ThisWorkbook.ActiveSheet
     pvt_lng_SelectedSourceRow = ActiveCell.Row

'#
'# the maximum number of columns to be considered is not dependent on the columns        defined in the
'# worksheet, but rather by a limit imposed by the user - i.e. column HG is the last       column to be copied,
'# and column Q is the first column to be considered
'#
     pvt_lng_FirstColumn = Columns("Q").Column
     pvt_lng_LastColumn = Columns("HG").Column
     pvt_lng_TargetColumn = 0

'#
'# check if the selected row is valid by examining the values in the columns on that
'# row - any non-blank value implies that the selected row is valid - when looking at
'# the values the search starts in column Q as requested by the user
'#
     With pvt_xls_Current
          pvt_flg_ValidRow = False
          For pvt_lng_ColumnNumber = pvt_lng_FirstColumn To pvt_lng_LastColumn
               If LenB(.Cells(pvt_lng_SelectedSourceRow, pvt_lng_ColumnNumber).Value) > 0 Then
                    pvt_flg_ValidRow = True
                    Exit For
               End If
          Next pvt_lng_ColumnNumber
     End With

     If Not pvt_flg_ValidRow Then
          MsgBox "You must select a valid - i.e. non empty - row"
          Exit Sub
     End If

     If pvt_lng_SelectSourceRow > 10000 Then
          MsgBox "You may not select a row > 10000"
          Exit Sub
     End If

'#
'# create a new workbook to hold the copied values and copy & paste the information to   the
'# newly created workbook
'#
     Set pvt_wbk_New = Application.Workbooks.Add
     With pvt_xls_Current
          For pvt_lng_ColumnNumber = pvt_lng_FirstColumn To pvt_lng_LastColumn

               If LenB(.Cells(pvt_lng_SelectedSourceRow, pvt_lng_ColumnNumber).Value) > 0 And _
                    InStr(1, "$AF,$BF,$CG,$DH,$ES,$FV,$HD,$HF",    Split(Columns(pvt_lng_ColumnNumber).Address, ":")(0)) = 0 Then
                         pvt_lng_TargetColumn = pvt_lng_TargetColumn + 1
                         pvt_wbk_New.Worksheets("Sheet1").Cells(1,    pvt_lng_TargetColumn).Value = .Cells(4, pvt_lng_ColumnNumber).Value
                         pvt_wbk_New.Worksheets("Sheet1").Cells(2,   pvt_lng_TargetColumn).Value = .Cells(5, pvt_lng_ColumnNumber).Value
                         pvt_wbk_New.Worksheets("Sheet1").Cells(3,  pvt_lng_TargetColumn).Value = .Cells(pvt_lng_SelectedSourceRow, pvt_lng_ColumnNumber).Value
               End If

          Next pvt_lng_ColumnNumber
     End With

'#
'# activate the new workbook
'#
     pvt_wbk_New.Activate
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:59:38.630

这将自动调整第一个单元格的整行设置为一个值。显然可以将其简化为仅指示第 1 行，但我尝试复制您使用的代码：

```
 pvt_wbk_New.Worksheets("Sheet1").Cells(1,pvt_lng_TargetColumn).EntireRow.Columns.Autofit 
```

# javascript - 在 javascript 的链接中使用变量

> ID：14124525
> 
> 赞同：2
> 
> 时间：2013-01-02T15:25:01.980
> 
> 标签：javascript, jquery

所以我了解到我可以使用按钮将某人链接到另一个页面，如下所示：

```
$("#something").append("<br><center><input type='button' value='Go' onclick='location.href=\"http://www.google.com\"'></center>"); 
```

但是假设我想使用一个变量作为地址，我不知道该怎么做。我想做的是这样的：

```
var url = "http://www.google.com";
$("#something").append("<br><center><input type='button' value='Go' onclick='location.href=url'></center>"); 
```

有人可以纠正我的错误吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T15:26:37.370

您可以像这样在字符串中连接 url 变量，

**[现场演示](http://jsfiddle.net/bghkq/)**

```
$("#something").append("<br><center><input type='button' 
value='Go' onclick='location.href=" +url+ "'></center>"); 
```

# php - 用于 Curl Facebook Linter Url 的 PHP 脚本

> ID：14124526
> 
> 赞同：0
> 
> 时间：2013-01-02T15:25:02.667
> 
> 标签：php, facebook, facebook-graph-api, curl

我一直在寻找 php 中的脚本来卷曲 facebook linter URL，以便它强制 Facebook 再次抓取我的页面以更新我的打开图形数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:58:44.927

根据 facebook 的文档，您可以通过使用 linter api 并传递`scrape=true`参数来简单地做到这一点：

```
curl -X POST \
    -F "id={object-url OR object-id}" \
    -F "scrape=true" \
    "https://graph.facebook.com" 
```

或通过使用 php：

```
 $access_token="APP_ID|APP_SECRET"; //replace with your app details
 $params = array("id"=>'/*YOU PAGE URL*/',"scrape"=>"true","access_token"=>$access_token);
 $ch = curl_init("https://graph.facebook.com");
 curl_setopt_array($ch, array(
      CURLOPT_RETURNTRANSFER=>true,
      CURLOPT_SSL_VERIFYHOST=>false,
      CURLOPT_SSL_VERIFYPEER=>false,
      CURLOPT_POST=>true,
      CURLOPT_POSTFIELDS=>$params
 ));
 $result = curl_exec($ch); 
```

[如此处](https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-object/#updating_objects)所述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:25:02.667

这是我在stackoverflow的帮助下找到并更正的脚本！

```
$url = "http://developers.facebook.com/tools/debug/og/object?q=http://www.example.com";
$useragent = "Opera/9.80 (X11; Linux x86_64; U; en) Presto/2.10.229 Version/11.60";

if ( $ch = curl_init( $url ) )
{
    curl_setopt( $ch , CURLOPT_HEADER , 0 );
    curl_setopt( $ch , CURLOPT_RETURNTRANSFER , true );
    curl_setopt( $ch , CURLOPT_USERAGENT , $useragent );
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);

    $str_response = curl_exec( $ch );

    if( curl_errno( $ch ) != 0 )
    {
        $message = 'Girl of the day - cURL exec error: ' . $ch;

        error_log( $message );
    }

    curl_close( $ch );
}
else
{
    $message = 'Girl of the day - cURL init with url: ' . $url . ' failed';

    error_log( $message );
} 
```

# android - Android 阻止儿童触摸事件

> ID：14124527
> 
> 赞同：0
> 
> 时间：2013-01-02T15:25:03.820
> 
> 标签：android, events, touch

我有一个`ViewGroup`并且我想阻止触摸事件对他的所有孩子的看法。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:24:25.380

您可以在**ViewGroup**中重写一个名为**onInterceptTouchEvent**的方法，它为您提供了这些神圣的力量。

```
@Override
 public boolean onInterceptTouchEvent(MotionEvent event) {
   // code to block events from children here
 } 
```

它的目的：

> **boolean onInterceptTouchEvent(MotionEvent ev)** - 每当检测到此 ViewGroup 或其子作为目标的触摸事件时调用。如果此函数返回true，则MotionEvent 将被拦截，这意味着它不会传递给child，而是传递给此View 的onTouchEvent。

[在此处](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)查看 Android API

# c - Windows 命令屏幕

> ID：14124530
> 
> 赞同：1
> 
> 时间：2013-01-02T15:25:12.420
> 
> 标签：c, codeblocks

这是我在 CodeBlocks 中编写的一个简单程序的示例脚本

```
#include <windows.h>

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow)
{
    MessageBox(NULL, "Trollface", "Title", MB_OK);
    return 0;
} 
```

这很好，它显示了一个消息框，但它后面有一个讨厌的控制台。如何删除控制台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:41:14.443

您可能已经创建了一个控制台项目。您可以使用`FreeConsole()`.

# php - 数组不适用于动态表单域

> ID：14124534
> 
> 赞同：0
> 
> 时间：2013-01-02T15:25:24.337
> 
> 标签：php, javascript, mysql, arrays, forms

我已经找到了这个表单所需的大部分内容（使字段动态化等），但是现在这个数组部分似乎无法正确提交。

我想要完成的事情：一个带有选择字段的表单，可以动态复制，然后作为表单的一部分提交到它自己的表中。因此，如果我们在一个表单中添加并选择三个人，它会将外键提交给它自己的出席表，并返回表单所针对的事件。必须让它充满活力，因为我们永远无法确定有多少人会参加所说的活动，但它必须以一种形式发生。只是因为它确实如此。我的老板是这样说的。

这是我添加另一个字段按钮的javascript：

```
 $(document).ready(function() {
        $('#btnAdd').click(function() {
            var num     = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
            var newNum  = new Number(num + 1);      // the numeric ID of the new input field being added

            // create the new element via clone(), and manipulate it's ID using newNum value
            var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

            // manipulate the id value of the input inside the new element
            newElem.children(':first').attr('id', 'attendee' + newNum).attr('name', 'attendee[' + newNum + ']');

            // insert the new element after the last "duplicatable" input field
            $('#input' + num).after(newElem);

            // enable the "remove" button
            $('#btnDel').attr('disabled','');

            // business rule: you can only add 5 names
            if (newNum == 6)
                $('#btnAdd').attr('disabled','disabled');
        }); 
```

以下是该字段以以下形式开始的内容：

```
 <div id="input1" style="margin-bottom:4px;" class="clonedInput">
    <select name="attendee[1]" id="attendee1" style='float:right;margin-right:4.5%;'>
    <option value=''>Please choose one...</option>
    <?php
    while($row_attendees = mysql_fetch_assoc($res_attendees)){
        $attendee_id = $row_attendees['attendee_id'];
        $attendee_name = $row_attendees['name'];

        echo "<option value='".$attendee_id."'>".$attendee_name."     </option>";
    }
    ?>
    </select><label style='width:100px;display:inline-block;line-height:28px;' for="attendee">Attendee</label>
    </div> 
```

我正在正确更改所有内容。所有选择输入都被正确识别和命名。div 正在更新相同。所有这些都正常工作。什么不是我去提交的时候。这是我的php：

```
 foreach($_POST['attendee'] as $attendee){
    $sql_attendees = "INSERT into marketing_calendar.attending (event_title, attendee_id) VALUES ('".$_POST['title']."','".$attendee."')";  
    $res_attendees = mysql_query($sql_attendees) or die(mysql_error());
} 
```

我用来把它放在一起的所有教程都表明这是正确的。但是它不起作用。我只得到第一个下拉列表的内容，没有其他内容填充到数组中。如果我运行表单或在 foreach 语句中回显参加者变量，至少这就是它显示/提交的全部内容。请帮忙！:)

提前致谢。

**更新** 我已经尝试过与另一个用户讨论的几种方法来显示 $_POST['attendee'] 的数组，但是它仍然只显示数组中的 1 个 id，而不是我实际添加的许多字段。我还尝试从选择的名称属性中的数组中删除数字。所以它只是 name='attendee[]' 而不是 name='attendee[1]' 等等。这也无济于事。有人可以帮忙解释为什么我的动态添加的字段没有被添加到数组中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:44:48.540

我将您的代码放入 JSfiddle，这里：http: [//jsfiddle.net/rv8Mv/1/](http://jsfiddle.net/rv8Mv/1/)

看起来选择正在正确添加。您可以通过单击“提交”按钮进行检查，该按钮显示将提交给服务器的数据字符串。

您可能要检查的一件事是确保将所有选择元素都包含在一个`<form>`元素中，而这些元素未包含在您的问题中。

我认为您的问题出在服务器上的 PHP 代码中。

在服务器上，确保您使用以下代码接收所有变量：

```
<?php
    foreach($_POST as $key => $value){
        error_log($key.' -> '.$value;
    }
?> 
```

然后检查您的错误日志以查看所有 POST 变量的名称和值。

您可能没有在当前 PHP 代码中正确引用 POST 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:14:16.560

您应该将 sql 更改为如下所示：

```
foreach($_POST['attendee'] as $attendee){
    $sql_attendees = "INSERT into marketing_calendar.attending (event_title, attendee_id) VALUES ('".$_POST['title']."',".$attendee.")";  
    $res_attendees = mysql_query($sql_attendees) or die(mysql_error());
} 
```

你`attendee_id`是一个 int 列。您用单引号将列内容括起来，这表示一个字符串。如果您的列被定义为可为空，这将导致您`attendee_id`为空。

# html - 使用主体的宽度，而不是元素的宽度

> ID：14124535
> 
> 赞同：0
> 
> 时间：2013-01-02T15:25:24.967
> 
> 标签：html, css

```
<div id="tst">
    Hello. 
    <div id="ln">
     Red line should be not just in tst element, but in all body.            
    </div>
</div>​

#tst {
 width: 200px;
 margin: 10px auto;            
}
#ln {
 width: 100%;
 border-bottom: 2px solid red;    
}
​ 
```

工作示例：http: [//jsfiddle.net/hXEe7/](http://jsfiddle.net/hXEe7/)

是否可以在不将#ln 元素放在#tst 之外的情况下使红线为身体的 100% 宽度？行必须在#ln 元素中，这只是一个示例。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:31:06.800

```
#ln {
    width: 100%;
    border-bottom: 2px solid red;   
    position:absolute;
    left: 0;
    right: 0;
} 
```

将`<div id="ln">`取出常规文档流，并将使用`body`' 宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:27:50.943

最简单的方法是，如果它上面没有其他元素被定位，那么将线的位置设置为绝对位置，如下所示：

```
#ln {
     position: absolute;
     left: 0;
     right: 0;
} 
```

# c# - 在 xtragrid 和调度程序之间拖放

> ID：14124538
> 
> 赞同：0
> 
> 时间：2013-01-02T15:25:41.403
> 
> 标签：c#, .net, winforms, devexpress

有人可以告诉我如何从 devexpress 在 gridcontrol 和 schedulercontrol 之间拖放数据吗？我想从网格中拖动数据并将其放在调度程序上。演示中的 devexpress 示例对我不起作用。我只是得到一个块符号。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:01:48.813

我得到了它。

```
 private void grdGrid_MouseDown(object sender, MouseEventArgs e)
        {
            posImGrid = null;

            GridHitInfo hitInfo = grvView.CalcHitInfo(new Point(e.X, e.Y));

            if (Control.ModifierKeys != Keys.None)
            {
                return;
            }

            if ((e.Button == System.Windows.Forms.MouseButtons.Left) &&
                (hitInfo.InRow) &&
                (hitInfo.HitTest != GridHitTest.RowIndicator))
            {
                posImGrid = hitInfo;
            }
        }

        private void grdGrid_MouseMove(object sender, MouseEventArgs e)
        {
            if ((e.Button == System.Windows.Forms.MouseButtons.Left) &&
                (posImGrid != null))
            {
                Size dragSize = SystemInformation.DragSize;
                Rectangle dragRect = new Rectangle(new Point(posImGrid.HitPoint.X - dragSize.Width / 2,
                                                             posImGrid.HitPoint.Y - dragSize.Height / 2), dragSize);

                if (!dragRect.Contains(new Point(e.X, e.Y)))
                {
                    grvView.GridControl.DoDragDrop(GetDragData(grvView), DragDropEffects.All);
                    posImGrid = null;
                }
            }
        }

        private SchedulerDragData GetDragData(GridView view)
    {
        Appointment termin = Storage.CreateAppointment(AppointmentType.Normal);
        clsMeineKlasse tempObjekt = (clsMeineKlasse)grvView.GetFocusedRow();
        termin.Description = tempObjekt.Beschreibung;
        termin.Subject = tempObjekt.Bezeichnung;
        termin.Duration = TimeSpan.FromHours(8);

        SchedulerDragData sdd = new SchedulerDragData(termin);

        return sdd;
    } 
```

# magento - Magento onestepcheckout 表格中的更改订单

> ID：14124540
> 
> 赞同：0
> 
> 时间：2013-01-02T15:25:42.063
> 
> 标签：magento, payment, checkout

我遇到了一个小问题。我将 onestepcheckout 与 afterpay 模块一起安装。

除了一件事情，一切都很好。

在您看到小计和总计等的表格上。我想在这里改变事情的顺序。现在是这样的：

Bedrag € 165,00 Verzendkosten € 5,01 BTW 21% € 29,51 总计 € 171,01 AfterPay servicekosten € 1,00

当然，我想更改后付费服务费，使其高于总额。

有谁我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:37:57.840

您可以从系统 > 配置 > 销售 > 结帐总计排序顺序更改总项目的顺序

每个实现总计的扩展都应该实现排序值，如果你没有这个，那么添加到该模块的 system.xml 中，然后你可以对其进行排序。

# bash - Bash 从路径变量和 sed 命令中删除路径

> ID：14124541
> 
> 赞同：0
> 
> 时间：2013-01-02T15:25:41.593
> 
> 标签：bash, path, awk, export

使用此代码

[从 Bash 中的 $PATH 变量中删除路径的最优雅的方法是什么？](https://stackoverflow.com/questions/370047/what-is-the-most-elegant-way-to-remove-a-path-from-the-path-variable-in-bash)

```
export PATH=`echo ${PATH} | awk -v RS=: -v ORS=: '/SDE/ {next} {print}'` | sed 's/:*$//' 
```

在这种情况下，如果我只运行：

```
export PATH=`echo ${PATH} | awk -v RS=: -v ORS=: '/SDE/ {next} {print}'` 
```

我可以得到包含`/SDE/`删除的路径；然而一个`:`仍然存在。`sed`我假设之后的命令应该删除它。当我一次运行整个命令时，根本没有任何东西被删除。导致路径不更新的语句有什么问题`sed`以及如何在删除路径变量后使`sed`命令删除冒号。`:``/SDE/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:34:24.250

问题是关闭反引号```在命令中的位置：

```
export PATH=`echo ${PATH} | awk -v RS=: -v ORS=: '/SDE/ {next} {print}'` | sed 's/:*$//' 
```

如果您使用推荐的`$(...)`符号，您会看到这相当于：

```
export PATH=$(echo ${PATH} | awk -v RS=: -v ORS=: '/SDE/ {next} {print}') | sed 's/:*$//' 
```

它将操作的输出通过管道`export`传输到`sed`，但是`export`是静默的。

采用：

```
export PATH=$(echo ${PATH} | awk -v RS=: -v ORS=: '/SDE/ {next} {print}' | sed 's/:*$//') 
```

我已经修复了逐字复制错误命令的[答案。](https://stackoverflow.com/a/370192/15168)正如[三人组](https://stackoverflow.com/users/874188/tripleee)在评论中指出的那样，我并不完全相信该`awk`解决方案，但问题是“代码出了什么问题”，答案是“反引号的位置”。该`awk`脚本确实处理删除 PATH 中任何位置的 PATH 元素；该`sed`脚本只是确保没有尾随`:`，因此不会在 PATH 末尾隐式使用当前目录。

另请参阅：[我如何在 shell 脚本中操作 PATH 元素](https://stackoverflow.com/questions/273909/how-do-i-manipulate-path-elements-in-shell-scripts)`clnpath`以及如何[防止在其中复制 PATH 变量中`csh`](https://stackoverflow.com/questions/135754/how-to-keep-from-duplicating-path-variable-in-csh)的脚本——该脚本适用于像 Bourne、Korn、Bash shell 这样的 POSIX 式 shell，尽管有问题的主题。`clnpath`和这里使用的符号之间的一个区别是`clnpath`只删除完整的路径名；它不会尝试进行部分路径元素匹配：

```
export PATH=$(clnpath $PATH /opt/SDE/bin) 
```

如果要删除的路径元素是`/opt/SDE/bin`. 请注意，`clnpath`可用于维护`LD_LIBRARY_PATH`、`CDPATH`和`MANPATH`任何其他类似路径的变量；`awk`当然，调用也可以。

我顺便注意到脚本中的`/SDE/`模式将删除；正则表达式中的斜杠与路径名中的斜杠无关。`awk``/opt/USDER/bin`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:01:14.130

```
$ PATH="$( awk -v rmv="/SDE/" -v path="$PATH" 'BEGIN{sub(rmv,"",path); gsub(/:+/,":",path); print path}' )" 
```

以上是猜测，因为您没有提供示例输入或预期输出，因此它可能不是您想要的，但它是正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:27:46.050

就在 bash 中：

```
tmp=":$PATH"
[[ $tmp =~ :[^:]*/SDE/[^:]* ]] && tmp=${tmp/${BASH_REMATCH[0]}/}
PATH=${tmp#:} 
```

# python - 使用 sci-kit learn 进行多值输出分类

> ID：14124545
> 
> 赞同：2
> 
> 时间：2013-01-02T15:25:52.597
> 
> 标签：python, machine-learning, scikit-learn

假设我从训练集中选择了一个训练文档。我已将它放入我选择的特征的特征向量 X 中。

我正在尝试做：

```
self.clf = LogisticRegression()
self.clf.fit(X, Y) 
```

我的 Y 是这样的： `[0 0 0 1 1 0 1 0 0 1 0]`

我想训练我的一个模型，使其同时最适合 11 个输出值中的每一个。这似乎不起作用，`fit`因为我收到一个`unhashable type 'list'`错误，因为它需要一个单一的值，它是以太二进制或多类但不允许多个值。

有没有办法用 sci-kit learn 做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T10:27:42.380

多标签分类与普通分类有一些不同的 API。你`Y`应该是一个序列序列，例如一个列表列表，比如

```
Y = [["foo", "bar"],          # the first sample is a foo and a bar
     ["foo"],                 # the second is only a foo
     ["bar", "baz"]]          # the third is a bar and a baz 
```

`Y`然后可以将这样的 a馈送到处理多个分类的估计器。`OneVsRestClassifier`您可以使用包装器构造这样的估计器：

```
from sklearn.multiclass import OneVsRestClassifier
clf = OneVsRestClassifier(LogisticRegression()) 
```

然后用 训练`clf.fit(X, Y)`。`clf.predict`现在也将产生序列序列。

**从 scikit-learn 0.15 开始更新**，此 API 已被弃用，因为它的输入不明确。您应该将`Y`我上面给出的转换为带有 a 的矩阵`MultiLabelBinarizer`：

```
>>> from sklearn.preprocessing import MultiLabelBinarizer
>>> mlb = MultiLabelBinarizer()
>>> mlb.fit_transform(Y)
array([[1, 0, 1],
       [0, 0, 1],
       [1, 1, 0]]) 
```

然后将其提供给估算器的`fit`方法。转换回来是`inverse_transform`在*同一个*二值化器上完成的：

```
>>> mlb.inverse_transform(mlb.transform(Y))
[('bar', 'foo'), ('foo',), ('bar', 'baz')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:20:52.763

您能否更具体地说明您的任务是什么？标签是二进制变量的固定长度向量吗？那么这将被称为多标签分类（即多个标签是打开或关闭）。如果每个标签可以有两个以上的值，则在 scikit-learn 中称为“多输出”，并且只能由树和集成来完成。

PS：如果您使用线性分类器，例如逻辑回归，则输出变量将以任何方式独立处理。

# android - 从 Android WebView 中的 CSS 文件加载背景图像

> ID：14124553
> 
> 赞同：2
> 
> 时间：2013-01-02T15:26:33.993
> 
> 标签：android, html, css

我有一个简单的 html 文件和一个简单的 css 文件，如果我使用 chrome 加载 html 文件，则显示扑克牌的图像。但是，如果我使用 WebView 加载相同的 html 文件，则没有图像。如果我只是设置背景颜色，那么效果很好，因此 html 和 css 可以正确加载并正常工作，所以我假设问题出在图像的 url 上。有什么我想念的吗？

谢谢，

约翰

资产 game.html gamecss3.css 图片 ssk.png

Java 代码

```
webView = (WebView) findViewById(R.id.webView1);
webView.getSettings().setJavaScriptEnabled(true);
webView.loadUrl("file:///android_asset/game.html"); 
```

CSS

```
body {
  background: #aaa;
}
/* defines styles for each card */
.card {
  width: 72px;
  height: 96px;
  margin: 20px;
  background: url("images/ssK.png");
  /*background: #efefef; */
  position: absolute;
  -webkit-transition: all 1s linear;  
} 
```

HTML 简单纸牌游戏

# 纸牌游戏

```
 <section id="game">
    <div id="cards">
      <div id="card1" class="card"></div>
    </div> <!-- #cards -->
  </section> <!-- #game -->
  <footer>
    <p>This is an example of transitioning cards.</p>
  </footer>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:46:32.433

是的。找不到图片网址。如果您有虚拟主机，请将其上传到该主机并分别更改 CSS 和 HTML 中的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T22:10:07.933

您需要下载图像文件，然后使用`webview.loadDataWithBaseUrl(...)`thingy..

# java - 从文本区域获取二进制，然后转换为 Hexa

> ID：14124556
> 
> 赞同：1
> 
> 时间：2013-01-02T15:26:40.083
> 
> 标签：java

我想在文本区域中获取一个二进制文件并将其转换为十六进制。使用计算器计算时，结果为“E0AC882AA428B6B8”，但我的代码结果为“30”。

```
String str = txtXOR.getText();
char[] chars = str.toCharArray();

StringBuffer hex = new StringBuffer();
int x = chars.length;

for(int i = 0; i < x; i++){
  hex.append(Integer.toHexString((int)chars[i]));
  txtXORToHexa.setText(Integer.toHexString((int) chars[i]));
} 
```

有人能指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:31:25.980

您应该使用基数为 2[的 Integer#parseInt(String s, int radix)](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)来解析二进制字符串，然后使用它`toHexString`来获取十六进制字符串：

```
String binaryStr = txtXOR.getText();
int number = Integer.parseInt(binaryStr, 2);
String hexStr = Integer.toHexString(number);
txtXORToHexa.setText(hexStr); 
```

如果您必须支持非常大的数字，您可以使用[BigInteger](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)：

```
String binaryStr = txtXOR.getText();
BigInteger number = new BigInteger(binaryStr, 2);
String hexStr = number.toString(16);
txtXORToHexa.setText(hexStr); 
```

# smartgwt - 从一开始就显示一个 ListGrid，它的所有行都展开

> ID：14124557
> 
> 赞同：0
> 
> 时间：2013-01-02T15:26:43.693
> 
> 标签：smartgwt, listgrid

我正在使用 SmartGWT 2.5。

我有一个主网格，它具有可扩展的行以显示子网格。我只是想显示从一开始就展开所有行的主网格。

我尝试添加一个包含以下代码的侦听器：

```
ListGridRecord[] records = getRecords();
for (ListGridRecord rec : records) {
    expandRecord(rec);
} 
```

我尝试使用 DataArrivedHandler 和 DrawAreaChangedHandler，但我只是在客户端收到 javascript 错误，或者只有部分行被扩展。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:22:34.420

如果您正在谈论网格分组，那么您可以使用以下内容：

```
grid.setGroupStartOpen(GroupStartOpen.ALL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:15:30.167

```
listGrid.addDataArrivedHandler(new DataArrivedHandler() {
        @Override
        public void onDataArrived(DataArrivedEvent event) {
            for (ListGridRecord rec : listGrid.getRecords()) {
                listGrid.expandRecord(rec);
            }
        }
    }); 
```

应该工作（与以前的版本一起工作..）你得到什么错误？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:29:40.310

最后，我在每个处理程序中放置了一个 100 毫秒的计时器。问题是在完全创建组件之前有一个延迟（我想要显示的内容非常复杂），所以当调用处理程序时，并不是一切都到位......

# extjs - ExtJS 窗口位置在调整大小时更改

> ID：14124566
> 
> 赞同：1
> 
> 时间：2013-01-02T15:27:19.427
> 
> 标签：extjs, javascript

使用 ExtJS 4，我有以下窗口：

```
 var mainWin = Ext.create('Ext.Window',{
    title: 'IE Screwup Illustration',
    id: 'MAINWIN',
    constrain: true,
    constrainTo: 'appdiv',
    x: 0,
    y: 0,
    width: '100%',
    height: 518,
    moveable: false,
    closable: false,
    layout: {
        type: 'border',
        padding: 3
    },
    renderTo: Ext.Element.get('appdiv'),
}).show(); 
```

请注意对名为“appdiv”的元素的渲染，该元素的样式如下所示：

```
#appdiv {
    position: absolute;
    left: 10px;
    width: 90%;
    height: 520px;
    border: 1px solid;
    overflow: hidden;
    border-color: #000000;
} 
```

渲染窗口没有问题。它出现在 appdiv 中，没有问题，周围有漂亮的边框。

当我调整浏览器大小时，问题就开始了。似乎该窗口试图在*屏幕上*而不是在 appdiv DIV 中居中。这会导致它在 DIV 内移动，以便渲染到左下角的下方和右侧。

我尝试了各种技巧，包括在调整窗口大小时尝试重新定位窗口。似乎没有任何效果，我想不出其他任何东西。

有人可以提供一些想法，当浏览器调整大小时，如何将此窗口保留在其 DIV 中？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:52:45.673

我创建了一个[JS Fiddle](http://jsfiddle.net/duplamatyi/ppJpL/)来说明我通常如何解决我的项目中的问题。

解决方案是侦听您希望窗口居中的组件的调整大小事件，然后计算窗口的新位置。在我的示例中，该组件是[viewport](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.Viewport)。

这是完成工作的侦听器：

```
viewPort.on('resize', function(vp, width, height) {
    var me = this,
       winWidth = me.getWidth(),
       winHeight = me.getHeight(),
       left = (width -winWidth) / 2,
       top = (height -winHeight) / 2;

    me.setPosition(left, top);
}, mainWin); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:03:06.007

我找到了问题的答案。事实证明这是一个时间问题。

Matyas 建议的 setPosition() 方法似乎被忽略是没有意义的，所以我检查了“move”事件。显然，当 Ext 窗口被渲染到 <div> 时，它会在调整大小事件*后*接收移动事件。我不知道为什么（也许 ExtJS 内部的专家可以在这里提供帮助？）。

因此，我没有在 Matyas 的调整大小监听器中进行计算，而是在 mainWin 中创建了一个移动监听器。我的稍微简单一些，因为我希望窗口保持在 <div> 的左上角：

```
listeners: {
    move: function(theWin,xP,yP,theOp) {
    if((xP != 0) || (yP != 0)) {
        theWin.setPosition(0,0);
    }
} 
```

这样，每当浏览器将窗口移动到我想要的位置以外的位置时，我都会将其设置回来。这解决了问题。

感谢所有回答这个问题的人（包括评论）。如果没有这些回应，我就没有解决这个问题所需的线索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T23:48:45.850

尝试这个：

```
 Ext.EventManager.onWindowResize(function()
  {
    mainWin.doComponentLayout();
  }, this, {buffer: 1}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-28T19:04:17.283

```
 Ext.EventManager.onWindowResize(function() {
            if(mainWin.isVisible()) {
                mainWin.center();
            }
        }, this, {buffer: 1}); 
```

# google-maps - 点击显示上的谷歌地图 api V3 javascript 标记

> ID：14124576
> 
> 赞同：0
> 
> 时间：2013-01-02T15:28:01.253
> 
> 标签：google-maps, google-maps-api-3

以下代码存在一些问题。

效果很好，但是当“单击”它时，我会向制造商显示 KML 文件中的关联图例...

我想要一个通用命令，因为标记可以超过 500...

有什么帮助吗？

网址：[http ://tequila357.wix.com/test-projet#!map/c161y](http://tequila357.wix.com/test-projet#!map/c161y)

谢谢

```
<html>
<head>

 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">

var map;

// lets define some vars to make things easier later
var kml = {
    a: {
        name: "MAP BELGIUM",
        url: "https://maps.google.be/maps/ms?authuser=0&vps=2&hl=fr&ie=UTF8&msa=0&output=kml&msid=208899208399411894595.0004d24e3bd5bbd990f5d"
    },
b: {
        name: "GARDIENNES",
        url: "https://maps.google.be/maps/ms?authuser=0&vps=3&hl=fr&ie=UTF8&msa=0&output=kml&msid=208899208399411894595.0004d21a429f0f00d5400"
    },
    c: {
        name: "CRECHES",
        url: "https://maps.google.be/maps/ms?authuser=0&vps=2&hl=fr&ie=UTF8&msa=0&output=kml&msid=208899208399411894595.0004d22900ca6b246c6a1"
    },
d: {
        name: "CRECHES PRIV",
        url: "https://maps.google.be/maps/ms?authuser=0&vps=2&hl=fr&ie=UTF8&msa=0&output=kml&msid=208899208399411894595.0004d24cf21e2a254a10c"
    },
e: {
        name: "MAGASINS STORES",
        url: "https://maps.google.be/maps/ms?authuser=0&vps=2&hl=fr&ie=UTF8&msa=0&output=kml&msid=208899208399411894595.0004d24db929a46bae78c"
    },
f: {
        name: "BABYSITTERS",
        url: "https://maps.google.be/maps/ms?authuser=0&vps=2&hl=fr&ie=UTF8&msa=0&output=kml&msid=208899208399411894595.0004d24dba905263481df"
    },
// keep adding more if ye like 
};

// initialize our goo
function initializeMap() {
    var options = {
        center: new google.maps.LatLng(50.5812, 4.5687),
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), options);

    createTogglers();
};

google.maps.event.addDomListener(window, 'load', initializeMap);

// the important function... kml[id].xxxxx refers back to the top 
function toggleKML(checked, id) {

    if (checked) {

        var layer = new google.maps.KmlLayer(kml[id].url, {
            preserveViewport: true,
            suppressInfoWindows: true 
        });
        // store kml as obj
        kml[id].obj = layer;
        kml[id].obj.setMap(map);
    }
    else {
        kml[id].obj.setMap(null);
        delete kml[id].obj;
    }

};

// create the controls dynamically because it's easier, really
function createTogglers() {

    var html = "<form><ul>";
    for (var prop in kml) {
        html += "<li id=\"selector-" + prop + "\"><input type='checkbox' id='" + prop + "'" +
        " onclick='highlight(this,\"selector-" + prop + "\"); toggleKML(this.checked, this.id)' \/>" +
        kml[prop].name + "<\/li>";
    }
    html += "<li class='control'><a href='#' onclick='removeAll();return false;'>" +
    "Remove all layers<\/a><\/li>" + 
    "<\/ul><\/form>";

    document.getElementById("toggle_box").innerHTML = html;
};

// easy way to remove all objects
function removeAll() {
    for (var prop in kml) {
        if (kml[prop].obj) {
            kml[prop].obj.setMap(null);
            delete kml[prop].obj;
        }

    }
};

// Append Class on Select
function highlight(box, listitem) {
    var selected = 'selected';
    var normal = 'normal';
    document.getElementById(listitem).className = (box.checked ? selected: normal);
};

function startup() { 
// for example, this toggles kml b on load and updates the menu selector
var checkit = document.getElementById('a');
checkit.checked = true;
toggleKML(checkit, 'a');
highlight(checkit, 'selector1');
 }

// test legen

google.maps.event.addListener(map, 'click', function(event) {

    marker = new google.maps.Marker({position: event.latLng, map: map});

});

// end legend

</script>

<style type="text/css">
.selected { font-weight: bold; }
</style>

</head>
<body onload="startup()">
<div id="map_canvas" style="width: 100%; height: 700px;"></div>
<div id="toggle_box" style="position: absolute; top: 100px; right: 20px; padding: 10px; background: #fff; z-index: 5; "></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:27:07.200

如果您正在寻找“侧边栏”，那么目前使用 KmlLayer 是不可能的。

你至少有两个选择：

*   将 KML 导入 FusionTables，使用 FusionTablesLayer 在地图上显示标记/多边形，在侧边栏的 onclick 处理程序中查询表格以打开 InfoWindow。

    [例子](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_Watershed_Stewards_Map_sidebar2.html)

*   使用第三方 KML 解析器，例如[geoxml3](http://code.google.com/p/geoxml3/)或[geoxml-v3](http://code.google.com/p/geoxml-v3/)

    [使用 geoxml3 的示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?type=m&filename=http://www.geocodezip.com/geoxml3_test/WeeklyVolcanoGE-Reports_20100908-0914.xml)

要使 InfoWindow 在单击时出现，请从初始化 KmlLayer 的代码中删除它：

```
 suppressInfoWindows: true 
```

# css - 是否可以使用媒体查询将 CSS 文件包含到另一个 CSS 文件中？

> ID：14124581
> 
> 赞同：7
> 
> 时间：2013-01-02T15:28:29.013
> 
> 标签：css, media-queries

我有一个很大的 CSS 文件，我想在使用媒体查询的特殊情况下包含其他 CSS 文件。

`@import`像这样在 CSS中使用是否安全：

```
@media only screen and (max-width: 480px) {    
    @import url('/css/styles-480.css');    
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T15:29:09.673

`@import`有一个规则是无效的`@media`，所以你有什么是行不通的。

正确的方法更简单——`@import`它本身接受 URL 之后的媒体查询：

```
@import url('/css/styles-480.css') only screen and (max-width: 480px); 
```

这种语法[在 CSS2.1 中被引入用于媒体类型](http://www.w3.org/TR/CSS21/cascade.html#at-import)，但[媒体查询也可以工作](http://www.w3.org/TR/css3-mediaqueries/#media0)，因为它们是媒体类型的直接扩展。

请记住，`@import`规则只能存在于样式表的开头。

如果您关心加载性能，您可能希望`<link>`在页面标题中使用单独的元素来引用此样式表，而不是`@import`，[如 Asad 所示](https://stackoverflow.com/questions/14124581/is-is-possible-to-include-css-file-into-another-css-file/14124648#14124648)。但是，无论哪种方式都可以正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T15:33:06.000

如果需要，我建议您并行下载 CSS 文件，而不是在 CSS 文件中导入：

```
<link media="only screen and (max-width: 480px)"
href="/css/styles-480.css" type="text/css" rel="stylesheet" /> 
```

使用的问题`@import`是第二个文件只有在包含的 CSS 文件`@import`完全下载和解析后才会下载。无论您是覆盖所有规则还是部分规则，这种方法都更快，因为它不会按顺序加载文件。

# sql - SQL - 日期查询问题 - varchar 到日期时间的转换导致超出范围的值

> ID：14124584
> 
> 赞同：6
> 
> 时间：2013-01-02T15:28:35.913
> 
> 标签：sql, tsql, datetime, sql-server-2008-r2

我有一个不再在这里的同事编写的 SQL 查询。该查询作为 SSIS 作业的一部分运行，并且截至本月已开始失败并出现以下错误：

> *将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。*

查询本身只是一个带有 where 子句的基本选择，用于查找特定时间范围内的值（和 之间的日期`@startdate`范围`@enddate`）

确定时间范围的代码如下：

```
DECLARE     @RunDateTime datetime
DECLARE     @RunDate datetime
DECLARE     @StartDate datetime
DECLARE     @EndDate datetime
DECLARE     @Month int
DECLARE     @Year int
DECLARE     @strStartDate varchar(10)

SET     @RunDateTime = GetDate()
SET     @RunDate = cast(round(convert(real, @RunDateTime),0,1) as datetime)

IF                  DATEPART(d, @RunDate) = 16
    BEGIN       
                    SET @StartDate =  DATEADD(d, -15, @RunDate)
                    SET @EndDate = @RunDate
    END
ELSE
    BEGIN
                    IF      Month(@RunDate) = 1
                            SET @Month = 12
                    ELSE    
                            SET @Month = Month(@RunDate) - 1

                    IF      Month(@RunDate) = 1
                            SET @Year = Year(@RunDate) - 1
                    ELSE
                            SET @Year = Year(@RunDate)

                    SET @strStartDate = CONVERT(varchar(2), @Month)+ '/16/' + CONVERT(varchar(4), @Year)
                    SET @StartDate = CONVERT(datetime, @strStartDate, 101)
                    SET @EndDate = @RunDate
    END 
```

该作业每月运行两次。每月1日至15日的数据为16日一次，16日至上月末的数据为下个月1日的数据。

我对 SQL 不够熟悉，不知道如何替换那里发生的所有转换内容？此外，有没有比仅获取运行时间更好的方法来确定月末日期？任何帮助都将不胜感激。`varchar``strStartDate`

（PS，我们在 SQL Server 2008 R2 上运行此作业）我与 DBA 进行了核对，他没有说 SQL 服务器上的本地化或区域设置已更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:39:23.760

SQL Server 支持多种格式 - 请参阅[有关 CAST 和 CONVERT 的 MSDN 联机丛书](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。这些格式中的大多数**取决于**您拥有的设置 - 因此，这些设置有时可能有效 - 有时无效。

解决此问题的方法是使用 SQL Server 支持的（稍作调整的）**ISO-8601 日期格式**- 这种格式**始终**有效- 无论您的 SQL Server 语言和日期格式设置如何。

SQL Server 支持的[ISO-8601 格式](http://msdn.microsoft.com/en-us/library/ms180878.aspx)有两种形式：

*   `YYYYMMDD`仅适用于日期（无时间部分）；注意这里：**没有破折号！**，这很重要！`YYYY-MM-DD`不独立于 SQL Server 中的日期格式设置，并且**不会****在**所有情况下工作！

 **或者：

*   `YYYY-MM-DDTHH:MM:SS`对于日期和时间 - 请注意：这种格式*有*破折号（但*可以*省略），并且`T`在您的`DATETIME`.

这对 SQL Server 2000 和更新版本有效。

如果您使用 SQL Server 2008 或更新版本以及`DATE`数据类型（仅`DATE`-**不是** `DATETIME`！），那么您确实也可以使用该`YYYY-MM-DD`格式，并且该格式也适用于您的 SQL Server 中的任何设置。

另外：对于 SQL Server 2008，如果可能的话，建议使用`DATETIME2`（而不是）。对于错误和/或不同的格式（如美国 AM/PM 格式等），字符串的解析要宽容得多。`DATETIME``DATETIME2`

不要问我为什么整个话题如此棘手和令人困惑——事情就是这样。但是使用该`YYYYMMDD`格式，您应该适用于任何版本的 SQL Server 以及 SQL Server 中的任何语言和日期格式设置。**

# c++ - SDL_FillRect 改变值

> ID：14124586
> 
> 赞同：1
> 
> 时间：2013-01-02T15:28:46.090
> 
> 标签：c++, sdl

我试图`SDL_Surface *`通过使用`SDL_FillRect()`以下代码来覆盖一个内的小矩形：

```
 int display(SDL_Surface * screen, Uint16 tile_size){
            if (!screen)
                return 1;
            std::cout << x << " " << y << std::endl;
            SDL_Rect pos = {(Sint16) (x * tile_size), (Sint16) ((y - 2) * tile_size), tile_size, tile_size};
            std::cout << pos.x << " " << pos.y << std::endl;
            for(uint8_t Y = 0; Y < 4; Y++){
                pos.x = x * tile_size;
                for(uint8_t X = 0; X < 4; X++){
//                    bit mask check to see which bits should be displayed. 
//                    not relevant to question
//                    if (shape[orientation][Y] & (1U << (3 - X))){
                        std::cout << pos.x << " " << pos.y << " -> ";
                        SDL_FillRect(screen, &pos, color);
                        std::cout << pos.x << " " << pos.y << std::endl;
//                    }
                    pos.x += tile_size;
                }
                pos.y += tile_size;
            }
            std::cout << std::endl << std::endl;
            return 0;
        } 
```

x 范围从 0 到 9，y 范围从 0 到 21，tile_size 很小（现在是 25）。

运行此代码时，输​​出如下：

```
3 0                             // x y
75 -50                          // x*tile_size y*tile_size
75 -50 -> 75 0                  // what in the world?
100 0 -> 100 0
125 0 -> 125 0
150 0 -> 150 0
75 25 -> 75 25
100 25 -> 100 25
125 25 -> 125 25
150 25 -> 150 25
75 50 -> 75 50
100 50 -> 100 50
125 50 -> 125 50
150 50 -> 150 50
75 75 -> 75 75
100 75 -> 100 75
125 75 -> 125 75
150 75 -> 150 75 
```

第三行（第一个显示的矩形）以某种方式从 -50 移动到 0。它正在抛出我的显示计算。怎么了？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:37:15.153

我在查看文档时看到了这一点：“如果在目标上设置了一个剪辑矩形（通过设置`SDL_SetClipRect`），那么这个函数将根据剪辑矩形和`dstrect`矩形的交集进行剪辑，并且`dstrect`矩形将被修改为表示实际填满的区域。”

这表明存在导致问题的剪辑矩形。

该剪辑矩形是包含在您的 中的一个属性`SDL_Surface`，并且可能从 (0,0) 开始。这将使任何负数在`SDL_FillRect()`调用后变为 0。

您可以通过传递对`dstrect`.

来源：[http ://www.libsdl.org/docs/html/sdlfillrect.html](http://www.libsdl.org/docs/html/sdlfillrect.html)

# python - 多处理中的共享内存

> ID：14124588
> 
> 赞同：92
> 
> 时间：2013-01-02T15:28:51.840
> 
> 标签：python, multiprocessing, shared-memory, large-data

我有三个大清单。第一个包含位数组（模块位数组 0.8.0），另外两个包含整数数组。

```
l1=[bitarray 1, bitarray 2, ... ,bitarray n]
l2=[array 1, array 2, ... , array n]
l3=[array 1, array 2, ... , array n] 
```

这些数据结构需要相当多的 RAM（总共约 16GB）。

如果我使用以下方法启动 12 个子流程：

```
multiprocessing.Process(target=someFunction, args=(l1,l2,l3)) 
```

这是否意味着将为每个子进程复制 l1、l2 和 l3，或者子进程将共享这些列表？或者更直接地说，我会使用 16GB 还是 192GB 的 RAM？

someFunction 将从这些列表中读取一些值，然后根据读取的值执行一些计算。结果将返回给父进程。列表 l1、l2 和 l3 不会被 someFunction 修改。

因此，我会假设子流程不需要也不会复制这些巨大的列表，而是只会与父级共享它们。这意味着由于 linux 下的写时复制方法，该程序将占用 16GB 的 RAM（不管我启动了多少子进程）？我是正确的还是我错过了会导致列表被复制的东西？

**编辑**：在阅读了有关该主题的更多内容后，我仍然感到困惑。一方面，Linux 使用写时复制，这应该意味着没有数据被复制。另一方面，访问对象会改变它的引用计数（我仍然不确定为什么以及这意味着什么）。即便如此，是否会复制整个对象？

例如，如果我定义 someFunction 如下：

```
def someFunction(list1, list2, list3):
    i=random.randint(0,99999)
    print list1[i], list2[i], list3[i] 
```

使用这个函数是否意味着 l1、l2 和 l3 将为每个子进程完全复制？

有没有办法检查这个？

**EDIT2**在阅读更多内容并在子进程运行时监视系统的总内存使用情况之后，似乎确实为每个子进程复制了整个对象。这似乎是因为引用计数。

在我的程序中实际上不需要 l1、l2 和 l3 的引用计数。这是因为 l1、l2 和 l3 将保留在内存中（不变），直到父进程退出。在此之前不需要释放这些列表使用的内存。事实上，我确信引用计数将保持在 0 以上（对于这些列表和这些列表中的每个对象），直到程序退出。

所以现在问题变成了，我怎样才能确保对象不会被复制到每个子流程？我可以禁用这些列表和这些列表中的每个对象的引用计数吗？

**EDIT3**只是一个附加说明。子流程不需要修改`l1`,`l2`和`l3`/或这些列表中的任何对象。子进程只需要能够引用其中一些对象，而不需要为每个子进程复制内存。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-03T08:50:13.307

一般来说，共享相同数据有两种方式：

*   多线程
*   共享内存

Python 的多线程不适合 CPU 密集型任务（因为 GIL），所以在这种情况下通常的解决方案是继续`multiprocessing`. 但是，使用此解决方案，您需要使用[`multiprocessing.Value`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Value)和显式共享数据[`multiprocessing.Array`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Array)。

请注意，由于所有同步问题，通常在进程之间共享数据可能不是最佳选择；涉及参与者交换消息的方法通常被视为更好的选择。另请参阅[Python 文档](http://docs.python.org/2/library/multiprocessing.html#sharing-state-between-processes)：

> 如上所述，在进行并发编程时，通常最好尽可能避免使用共享状态。在使用多个进程时尤其如此。
> 
> 但是，如果您确实需要使用一些共享数据，那么多处理提供了几种这样做的方法。

在您的情况下，您需要 wrap `l1`，`l2`并且`l3`以某种方式可以理解`multiprocessing`（例如通过使用 a `multiprocessing.Array`），然后将它们作为参数传递。
另请注意，正如您所说，您不需要写访问权限，那么您应该`lock=False`在创建对象时通过，否则所有访问权限仍将被序列化。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2019-12-09T22:06:31.567

因为这在谷歌上仍然是一个非常高的结果，而且还没有其他人提到它，所以我想我会提到在 python 版本 3.8.0 中引入的“真正”共享内存的新可能性：[https://docs.python .org/3/library/multiprocessing.shared_memory.html](https://docs.python.org/3/library/multiprocessing.shared_memory.html)

我在这里包含了一个小的人为示例（在 linux 上测试），其中使用了 numpy 数组，这可能是一个非常常见的用例：

```
# one dimension of the 2d array which is shared
dim = 5000

import numpy as np
from multiprocessing import shared_memory, Process, Lock
from multiprocessing import cpu_count, current_process
import time

lock = Lock()

def add_one(shr_name):

    existing_shm = shared_memory.SharedMemory(name=shr_name)
    np_array = np.ndarray((dim, dim,), dtype=np.int64, buffer=existing_shm.buf)
    lock.acquire()
    np_array[:] = np_array[0] + 1
    lock.release()
    time.sleep(10) # pause, to see the memory usage in top
    print('added one')
    existing_shm.close()

def create_shared_block():

    a = np.ones(shape=(dim, dim), dtype=np.int64)  # Start with an existing NumPy array

    shm = shared_memory.SharedMemory(create=True, size=a.nbytes)
    # # Now create a NumPy array backed by shared memory
    np_array = np.ndarray(a.shape, dtype=np.int64, buffer=shm.buf)
    np_array[:] = a[:]  # Copy the original data into shared memory
    return shm, np_array

if current_process().name == "MainProcess":
    print("creating shared block")
    shr, np_array = create_shared_block()

    processes = []
    for i in range(cpu_count()):
        _process = Process(target=add_one, args=(shr.name,))
        processes.append(_process)
        _process.start()

    for _process in processes:
        _process.join()

    print("Final array")
    print(np_array[:10])
    print(np_array[10:])

    shr.close()
    shr.unlink() 
```

请注意，由于 64 位整数，此代码可能需要大约 1gb 的 ram 才能运行，因此请确保您不会使用它来冻结您的系统。^_^

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2021-01-15T05:35:28.317

对于那些对使用 Python3.8 的[shared_memory](https://docs.python.org/3/library/multiprocessing.shared_memory.html)模块感兴趣的人，它仍然存在一个尚未修复的[错误，并且目前正在影响 Python3.8/3.9/3.10（2021-01-15）。](https://bugs.python.org/issue38119)该错误影响 posix 系统，并且是关于资源跟踪器在其他进程仍应具有有效访问权限时破坏共享内存段。因此，如果您在代码中使用它，请小心。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-01-03T19:41:34.547

如果您想使用写时复制功能并且您的数据是静态的（在子进程中未更改） - 您应该让 python 不要弄乱数据所在的内存块。您可以通过使用 C 或 C++ 结构（例如 stl）作为容器轻松地做到这一点，并提供您自己的 python 包装器，当创建 python 级对象时，将使用指向数据内存（或可能复制数据内存）的指针。 . 所有这一切都可以通过几乎 python 的简单性和[cython](http://cython.org/)的语法轻松完成。

```
# 伪cython
cdef 类 FooContainer：
   cdef 字符 * 数据
   def __cinit__(self, char * foo_value):
       self.data = malloc(1024, sizeof(char))
       memcpy(self.data, foo_value, min(1024, len(foo_value)))

   定义获取（自我）：
       返回self.data

```

```
# 蟒蛇部分
从 foo 导入 FooContainer

f = FooContainer("你好世界")
pid = fork()
如果不是 pid：
   f.get() # 这个调用将读取相同的内存页到哪里
           # 父进程写入了 1024 个字符的 self.data
           # 并且 cython 会自动创建一个新的 python 字符串
           # 从中获取对象并返回给调用者

```

上面的伪代码写得不好。不要使用它。在你的情况下，self.data 应该是 C 或 C++ 容器。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-02-01T11:58:47.313

您可以使用 memcached 或 redis 并将每个设置为键值对 {'l1'...

# neural-network - 关于kohonen神经网络的几个问题

> ID：14124592
> 
> 赞同：2
> 
> 时间：2013-01-02T15:28:58.910
> 
> 标签：neural-network

我有大数据集（时间序列，大约 50 个参数/值）。我想使用 Kohonen 网络对相似的数据行进行分组。我读过一些关于 Kohonen 神经网络的文章，我了解 Kohonen 网络的概念，但是：

1.  我不知道如何实现这么多维度的 Kohonen。我在 CodeProject 上找到了示例，但只有 2 或 3 维输入向量。当我有 50 个参数时 - 我应该在我的神经元中创建 50 个权重吗？

2.  我不知道如何更新获胜神经元的权重（如何计算新的权重？）。

我的英语并不完美，我不了解我读到的关于 Kohonen 网络的所有内容，尤其是对公式中变量的描述，这就是我问的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T22:43:43.783

应该区分地图的维数，它通常很低（例如，在矩形网格的常见情况下为 2）和参考向量的维数，它可以任意高而不会出现问题。

查看[http://www.psychology.mcmaster.ca/4i03/demos/competitive-demo.html](http://www.psychology.mcmaster.ca/4i03/demos/competitive-demo.html)以获得 49 维输入向量（7x7 像素图像）的一个很好的例子。在这种情况下，Kohonen 映射具有 8 个单元的一维环的形式。

另请参阅[http://www.demogng.de](http://www.demogng.de)以获得各种 Kohonen 类网络的 java 模拟器，包括像 McMasters 那样的环形网络。然而，参考向量都是二维的，只是为了更容易显示。它们可以具有任意高维度，而无需更改算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:37:14.800

1.  是的，你需要 50 个神经元。然而，这些类型的网络通常是低维的，如这篇[自组织地图](http://en.wikipedia.org/wiki/Kohonen_network)文章中所述。我从未见过他们使用超过几个输入。

2.  您必须使用更新公式。来自同一篇文章：`Wv(s + 1) = Wv(s) + Θ(u, v, s) α(s)(D(t) - Wv(s))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T15:38:58.657

1.  是的，每个神经元需要 50 个输入

2.  您基本上在神经元和目标（输入）神经元之间进行线性插值，并使用`W(s + 1) = W(s) + Θ() * α(s) * (Input(t) - W(s))`Θ 作为邻域函数。

你应该更新你所有的神经元，不仅仅是赢家

您将哪个函数用作邻域函数取决于您的实际问题。这种函数的一个共同特性是，当 i=k 时它的值为 1，并且随着距离欧几里得距离而下降。此外，它会随着时间的推移而缩小（为了定位集群）。

简单的邻域函数包括线性插值（达到“最大距离”）或高斯函数

# java - 如何在 Java 中旋转图形

> ID：14124593
> 
> 赞同：7
> 
> 时间：2013-01-02T15:28:58.593
> 
> 标签：java, graphics, rotation

我在 a 中绘制了一些图形`JPanel`，例如圆形、矩形等。

但我想绘制一些旋转特定度数的图形，比如旋转的椭圆。我应该怎么办？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-02T15:32:38.220

如果您使用的是 plain `Graphics`，`Graphics2D`请先转换为：

```
Graphics2D g2d = (Graphics2D)g; 
```

旋转整个`Graphics2D`：

```
g2d.rotate(Math.toRadians(degrees));
//draw shape/image (will be rotated) 
```

重置旋转（所以你只旋转一件事）：

```
AffineTransform old = g2d.getTransform();
g2d.rotate(Math.toRadians(degrees));
//draw shape/image (will be rotated)
g2d.setTransform(old);
//things you draw after here will not be rotated 
```

例子：

```
class MyPanel extends JPanel {
    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D)g;
        AffineTransform old = g2d.getTransform();
        g2d.rotate(Math.toRadians(degrees));
        //draw shape/image (will be rotated)
        g2d.setTransform(old);
        //things you draw after here will not be rotated
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T15:32:34.610

在您`paintComponent()`重写的方法中，将 Graphics 参数强制转换为 Graphics2D，调用[`rotate()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html#rotate%28double%29)此 Graphics2D，然后绘制椭圆。

# css - 在 css 中设置颜色条

> ID：14124595
> 
> 赞同：0
> 
> 时间：2013-01-02T15:29:07.037
> 
> 标签：css

我是 css 新手，并试图在一个盒子的 3 个独立部分中绘制。盒子在 CSS 中是这样定义的：

```
 #nutrients .row .values li {
    position:relative;
    float:left;
    width:29px;
    height:63px;
    border-right:1px solid #C9C3BA;
    list-style-type:none;
 } 
```

我希望能够做到这一点：

```
<li><span class="min_graph" style="background:green" height="32%">
    <span class="normal_graph" style="background:red" height="22%">
</li> 
```

其中最小部分将是底部三分之一，正常部分将是中间三分之一，最大部分将是顶部三分之一。我在 CSS 中试过这个：

```
#nutrients .row .values li span .min_graph {
    vertical-align:bottom;
}
#nutrients .row .values li span .normal_graph {
}
#nutrients .row .values li span .max_graph {
    vertical-align:top;
} 
```

但显然我不明白如何专注于盒子的 3 个不同部分。谢谢...

========

非常感谢所有的帮助！我没有很好地解释这一点。我确实想使用div。基本上有 3 个子框，下部 (min)、中间 (normal) 和顶部 (max)。我希望“#nutrients .row .values li”成为父元素。然后，最小图形块将是底部 21px；正常图将是中间 21px；并且最大图形块将是前 21px。

然后，在底部 21px 内（例如），我可能想要填充 30% 或 50% 等。

单元格 1：最小图形块 - 红色，其底部三分之一正常图形块全高的 21% - 白色，无文本（中间三分之一） 最大图形块 - 白色，无文本（顶部三分之一）

单元格 2：最小图形块 - 绿色，100% 的全高（底部三分之一）正常图形块 - 绿色，以及 46% 的全高（中间三分之一）最大图形块 - 白色

单元格 3：最小图形块 - 绿色，100% 的全高（底部三分之一）正常图形块 - 绿色，100% 的全高（中间三分之一）最大图形块 - 绿色，46% 的全高高度

换句话说，百分比不能进入 CSS 定义文件。HTML 必须能够设置百分比。但是 CSS 确实需要允许我写入父框的三个部分。

我需要了解如何将“#nutrients .row .values li”制作成父 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:39:00.967

理想情况下，您会希望使用`<div>`元素来完成此操作，因为`<span>`元素在这里没有达到预期目的。我将通过两种方式完成这件事。

## **`<div>`执行：**

**CSS：**

```
/* To use %-based heights, the parent element must have a defined height */
.values       {   height: 500px; width: 100%;}

.min_graph    {   background:green;  height: 32%;}
.normal_graph {   background:red;    height: 22%;}
.max_graph    {   background:yellow; height: 22%;} 
```

**HTML：**

```
<div class='values'>
    <div class="min_graph">TEST</div>
    <div class="normal_graph">TEST</div>
    <div class="max_graph" >TEST</div>
</div> 
```

**[例子](http://jsfiddle.net/FvKd6/3/)**

## **`<span>`执行**

首先 - 你需要确保你正在关闭你的`<span>`元素，并且你需要使用`display: block`来确保它们是可见的，如图所示：

**CSS**

```
#nutrients .row. values li span 
{
    height: auto;
    width: 100%; 
    display: block;
} 
```

**HTML：**

```
<li>
    <span class="min_graph" style="background:green; height:32%">Test</span>
    <span class="normal_graph" style="background:red; height:22%">Test</span>
    <span class="max_graph" style="background:yellow; height:22%">Test</span>
</li> 
```

**[例子](http://jsfiddle.net/FvKd6/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:39:22.707

您可以使用 css 渐变为不同部分着色：

我使用了这个网站： http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

产生这个：

```
background: -moz-linear-gradient(top, #ff3232 0%, #ff3030 33%, #f9f227 33%, #f5f900 66%, #00ff00 66%, #00ff00 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ff3232), color-stop(33%,#ff3030), color-stop(33%,#f9f227), color-stop(66%,#f5f900), color-stop(66%,#00ff00), color-stop(100%,#00ff00)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #ff3232 0%,#ff3030 33%,#f9f227 33%,#f5f900 66%,#00ff00 66%,#00ff00 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #ff3232 0%,#ff3030 33%,#f9f227 33%,#f5f900 66%,#00ff00 66%,#00ff00 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #ff3232 0%,#ff3030 33%,#f9f227 33%,#f5f900 66%,#00ff00 66%,#00ff00 100%); /* IE10+ */
background: linear-gradient(to bottom, #ff3232 0%,#ff3030 33%,#f9f227 33%,#f5f900 66%,#00ff00 66%,#00ff00 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ff3232', endColorstr='#00ff00',GradientType=0 ); /* IE6-9 */ 
```

哦，但是除非它被更改，否则我认为 iPad 版本的 Safari 不接受百分比渐变，只接受像素计数，因此您可能需要根据目标用户进行调整

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:43:37.093

用您的示例查看[此 JSFiddle](http://jsfiddle.net/gSvSy/)。你里面`<li>`的 div 是要走的路，因为 div 是一个块级元素，可以更好地满足你的需求。您定义一个父元素，在这种情况下，`<li>`具有您希望整个事物的宽度和高度。然后，只需定义您希望每个`<div>`的大小和颜色。

```
<ul id="boxes">
   <li>
      <div id="top">Div 1</div>
      <div id="mid">Div 2</div>
      <div id="bottom">Div 3</div>

   </li>    
</ul>​

#boxes li {
position:relative;
float:left;
width:29px;
height:63px;
border-right:1px solid #C9C3BA;
list-style-type:none;
}

#top {height:auto}
#mid {background:red; height: 32%}
#bottom {background:green; height:22%;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-02T17:07:04.633

我认为您可以使用颜色序列或渐变（如 Robot Woods 所述）更轻松地实现您正在寻找的东西。我发现一个很好的参考是[https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient()#gradient_with_multi-position_color_stops](https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient()#gradient_with_multi-position_color_stops)

```
body {
  background: linear-gradient(to right,
     red 20%, orange 20% 40%, yellow 40% 60%, green 60% 80%, blue 80%);
} 
```

# nhibernate - 更新 Fluent nHibernate 会导致缺少属性的问题

> ID：14124598
> 
> 赞同：0
> 
> 时间：2013-01-02T15:29:15.967
> 
> 标签：nhibernate, fluent-nhibernate, c#-3.0, updating

我正在尝试在我的应用程序中更新 nHibernate 版本。我使用了 nuGet 并将 NHibernate v2.1.2.4000 更新到 v3.3.2.4000 并将流利的 NHibernate 从 v1.1.0.685 更新到 v1.3.0.733

我期待一些问题，但我得到的错误很奇怪，我无法弄清楚。

在我的“多对多”约定中，有这样一行：

```
var userDefined = instance.Relationship.Columns.UserDefined.FirstOrDefault();
if (userDefined != null)
{
  instance.Relationship.Column(userDefined.EntityType.Name + "Id");
} 
```

问题是在更新 DLL 后，“UserDefined”属性不再存在。我无法理解的是我是否需要在某个地方重新定义它，或者是否有不同的方式来访问该属性。

我的印象是“UserDefined”属性是 fluent nHibernate 的一部分。有谁知道如何让这个工作？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:25:01.533

FluentNHibernate 重构了它表示指定值的方式。

之前只有一个值和指标来设置它们（默认、约定、显式）。现在所有三种类型都有值，并且在阅读时使用类似的东西，`explicit ?? convention ?? default`因此不再需要对显式/用户定义值的测试。

删除所有行，但`instance.Relationship.Column(userDefined.EntityType.Name + "Id");`

# c# - 在图例中显示禁用的系列

> ID：14124601
> 
> 赞同：2
> 
> 时间：2013-01-02T15:29:28.697
> 
> 标签：c#, winforms, charts, legend

我有一个复选框，允许我的程序启用图表上显示的禁用系列。当我禁用该系列时，它会从 chartArea 以及图例中删除。即使禁用，是否可以将其保留在图例中？我想更改它在图例中的透明度，使其看起来像已禁用，并在启用时将其设置回全彩。

这是我正在寻找的链接：

[http://postimage.org/image/kj675p14j/](http://postimage.org/image/kj675p14j/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:10:38.713

**编辑 ：**

我找到了另一种（更简单）的方法来做到这一点。您可以简单地处理`CustomizeLegend`事件（并使用禁用系列`series.Enabled`）：

```
void chart1_CustomizeLegend(object sender, CustomizeLegendEventArgs e)
{
    e.LegendItems.Clear();
    foreach (var series in this.chart1.Series)
    {
        var legendItem = new LegendItem();
        legendItem.SeriesName = series.Name;
        legendItem.ImageStyle = LegendImageStyle.Rectangle;
        legendItem.BorderColor = Color.Transparent;
        legendItem.Name = series.Name + "_legend_item";

        int i = legendItem.Cells.Add(LegendCellType.SeriesSymbol, "", ContentAlignment.MiddleCenter);
        legendItem.Cells.Add(LegendCellType.Text, series.Name, ContentAlignment.MiddleCenter);

        if (series.Enabled)
            legendItem.Color = series.Color;
        else
            legendItem.Color = Color.FromArgb(100, series.Color);
        e.LegendItems.Add(legendItem);
    }
} 
```

结果：

![所有系列启用](../Images/14c60a61ca48e045f08d7de6f05153ad.png)

![一系列禁用](../Images/4d4ba492b2740e2101b13614e254c2a5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-25T05:02:07.377

随着上面的示例展开，您可以使用在*MouseMove*事件中显示/隐藏的*Tooltip*对象，并在图例应该动画/更新时触发*CustomizeLegend事件。*单击图例将隐藏显示每个系列。

 **```
private int lastX; private int lastY;
ToolTip tip = new ToolTip();

Chart.MouseMove += (object sender, MouseEventArgs e) =>
{

    //Cancel tooltip re-triggering itself when shown 
    if (e.X == this.lastX && e.Y == this.lastY)
    {
        return;
    }

    //Get any object clicked
    var hit = Chart.HitTest(e.X, e.Y);

    if (hit.Object is LegendItem legendItem)
    {
        tip.Tag = legendItem;
        tip.ToolTipTitle = legendItem.SeriesName;
        tip.Show(legendItem.ToolTip, Chart, new Point(e.X + Chart.Cursor.Size.Width / 2, e.Y + Chart.Cursor.Size.Height / 2));
        Chart.Legends[0].Enabled = true; //trigger CustomizeLegend event
    }
    else
    {
        if (tip.Active)
        {
            tip.UseFading = true;
            tip.Hide(Chart);
            tip.Tag = null;
            Chart.Legends[0].Enabled = true; //trigger CustomizeLegend event
        }
    }

    this.lastX = e.X;
    this.lastY = e.Y;
}; 
```

*CustomizeLegend*事件扩展为检查当前 legendItem的工具提示 .Tag

```
Chart.CustomizeLegend += (o, e) =>
{

    e.LegendItems.Clear();
    foreach (var series in this.Chart.Series)
    {
        var legendItem = new LegendItem();
        legendItem.Tag = series;
        legendItem.SeriesName = series.Name;
        legendItem.ImageStyle = LegendImageStyle.Rectangle;

        //Check if Tooltip as active for the legend
        if (tip.Tag is LegendItem tipLegendItem && legendItem.SeriesName.Equals(tipLegendItem.SeriesName))
        {
            //Show legend highlighted
            legendItem.ImageStyle = LegendImageStyle.Rectangle;
            legendItem.BorderColor = Color.Black;
            legendItem.BorderWidth = 1;
        }
        else
        {
            //Show legend normal
            legendItem.BorderColor = Color.Transparent;
        }

        legendItem.Name = series.Name + "_legend_item";
        legendItem.ToolTip = "on/off";

        int i = legendItem.Cells.Add(LegendCellType.SeriesSymbol, "", ContentAlignment.MiddleCenter);
        legendItem.Cells.Add(LegendCellType.Text, series.Name, ContentAlignment.MiddleLeft);

        //Show legend faint or active by state of Series.Enabled  
        if (series.Enabled) { 
            legendItem.Color = series.Color;
            legendItem.Cells[1].ForeColor = Color.Black;
        }
        else
        {
            legendItem.Color = Color.FromArgb(100, series.Color);
            legendItem.Cells[1].ForeColor = Color.LightGray;
        }

        e.LegendItems.Add(legendItem);
    }
}; 
```

和用于切换 Series.Enabled的*MouseDown事件*

```
Chart.MouseDown += (o, e) =>
{
    {
        HitTestResult result = Chart.HitTest(e.X, e.Y);

        // When user hits the LegendItem
        if (result?.Object is LegendItem legendItem)
        {
            if (legendItem.Tag is Series series )
            {
                series.Enabled = !series.Enabled;
                legendItem.ToolTip = series.Enabled ? "Enabled" : "Disabled";
                tip.Show(legendItem.ToolTip, Chart, new Point(e.X + Chart.Cursor.Size.Width / 2, e.Y + Chart.Cursor.Size.Height / 2));
            }
        }
    }
}; 
```**

# vhdl - 时间类型常数的 Verilog 等效项

> ID：14124602
> 
> 赞同：0
> 
> 时间：2013-01-02T15:29:39.190
> 
> 标签：vhdl, verilog

VHDL中是否有与以下语句等效的Verilog？我有一些需要时间值的通用端口

```
constant TIME_C : time := 10 ms; 
```

我尝试将此作为猜测，但语法失败。

```
localparam TIME_C = 10 ms; 
```

'ms' 似乎不是 Verilog 中的保留关键字，但我的 IDE 编辑器将其突出显示为蓝色，所以我在想也许有一种方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:11:17.803

你可以这样做：

```
`timescale 1ms/1ms

module foo();
  localparam TIME_C = 10;
  ...
endmodule 
```

在 Verilog 中，重要的是要理解表示时间的变量或常量只是没有任何上下文的数值。当前模块的时间刻度决定了如何解释该值。在上面的示例代码中，`#TIME_C`将创建 10 毫秒的延迟，因为 TIME_C 等于 10，时间刻度为 1 毫秒。

如果您必须向模块的端口提供时间值，请确保您知道模块的时间刻度（如果指定）。

仅供参考，SystemVerilog 添加了一些与指定时间和时间尺度相关的功能。

# swing - invokeLater 没有被调用

> ID：14124608
> 
> 赞同：0
> 
> 时间：2013-01-02T15:30:06.057
> 
> 标签：swing, user-interface, thread-safety

我正在开发一个警报应用程序。我正在使用 SwingUtilities.invokeLater 方法来调用我的 UI 以实现贪睡功能。但是当我运行它时，我注意到 SwingUtilities.invokeLater 函数没有被调用。请帮我解决这个问题

```
public class IsTime {  
int hrs;  
int min;  
int sec;  
GregorianCalendar clk=new GregorianCalendar();  
Calendar gtl= Calendar.getInstance();  

    mp3 mix=new mp3();  

    public void makeReady(int h,int m,int s,String ampm){  

    Calendar c1=Calendar.getInstance();  
    c1.set(Calendar.HOUR_OF_DAY,h);  
    c1.set(Calendar.MINUTE, m);  
    c1.set(Calendar.SECOND,s);  

    if("PM".equals(ampm)){  
        c1.set(Calendar.AM_PM, Calendar.PM);  
        if(Calendar.getInstance().get(Calendar.AM_PM)==Calendar.PM){  

            if(c1.after(Calendar.getInstance())){  
                check(c1);  
            }  
            c1.set(Calendar.DAY_OF_YEAR,c1.get(Calendar.DAY_OF_YEAR)+1);  

            check(c1);  

        }  
    }  
    if(Calendar.getInstance().get(Calendar.AM_PM)==Calendar.AM){  
            if(c1.after(Calendar.getInstance())){  
                check(c1);  
            }  

            c1.set(Calendar.DAY_OF_YEAR,c1.get(Calendar.DAY_OF_YEAR)+1);  

            check(c1);  
        }  
    if(Calendar.getInstance().get(Calendar.AM_PM)==Calendar.PM){  
        c1.set(Calendar.DAY_OF_YEAR,c1.get(Calendar.DAY_OF_YEAR)+1);  
        check(c1);  
    }  
}  
public void check(Calendar ch){  
        while(!(Calendar.getInstance().after(ch))){//this line checks if it is time to sound alarm  
        }  

    SwingUtilities.invokeLater(new Runnable(){//here is my invokelater method  

                public void run(){  
                    System.out.println("git to invoke");  
                 new Snooze();  

                }  

    });  
            mix.start();  

}  
public void makeReady(int mis){  
        Calendar sz=Calendar.getInstance();  
        sz.set(Calendar.SECOND, 0);  
        sz.set(Calendar.MINUTE, Calendar.getInstance().get(Calendar.MINUTE)+mis);  
        check(sz);  
    }  

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:35:29.840

此行确实不是执行“等待”操作的正确方法：

```
while (!Calendar.getInstance().after(ch)) {// this line checks if it is time to sound alarm
    } 
```

而是这样做：

```
Thread.sleep(ch.getTimeInMillis()-System.currentTimeMillis()); 
```

（你应该确保它是积极的）。就目前而言，您的代码将不断评估是否到了可能会杀死您的 CPU 的时间。

对于您的，如果没有适当的完整示例（ [SSCCE](http://sscce.org)）`invokeLater()`，很难说清楚。尝试在通话之前放置一个日志，看看它是否会在您的控制台中弹出。

# python - Python列表理解昂贵

> ID：14124610
> 
> 赞同：11
> 
> 时间：2013-01-02T15:30:11.700
> 
> 标签：python, list-comprehension

我试图找到列表理解的效率，但它看起来比正常的函数操作更昂贵。有人可以解释吗？

```
def squares(values):
    lst = []
    for x in range(values):
        lst.append(x*x)
    return lst

def main():
    t = timeit.Timer(stmt="lst = [x*x for x in range(10)]")
    print t.timeit()
    t = timeit.Timer(stmt="squares",setup="from __main__ import squares")
    print t.timeit()

    lst = [x*x for x in range(10)]
    print lst
    print squares(10)

----Output:---
2.4147507644
0.0284455255965
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

对于相同的输出，与列表推导相比，普通函数的计算时间要少得多。

我认为列表理解更有效。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-02T15:32:32.893

你永远不会*调用*你的`squares`函数，所以它什么也没做。

列表推导*实际上*更快：

```
>>> import timeit
>>> def squares(values):
...     lst = []
...     for x in range(values):
...         lst.append(x*x)
...     return lst
... 
>>> def squares_comp(values):
...     return [x*x for x in range(values)]
... 
>>> timeit.timeit('f(10)', 'from __main__ import squares as f')
3.9415171146392822
>>> timeit.timeit('f(10)', 'from __main__ import squares_comp as f')
2.3243820667266846 
```

如果你使用`dis`模块查看每个函数的字节码，你会明白为什么：

```
>>> import dis
>>> dis.dis(squares)
  2           0 BUILD_LIST               0
              3 STORE_FAST               1 (lst)

  3           6 SETUP_LOOP              37 (to 46)
              9 LOAD_GLOBAL              0 (range)
             12 LOAD_FAST                0 (values)
             15 CALL_FUNCTION            1
             18 GET_ITER            
        >>   19 FOR_ITER                23 (to 45)
             22 STORE_FAST               2 (x)

  4          25 LOAD_FAST                1 (lst)
             28 LOAD_ATTR                1 (append)
             31 LOAD_FAST                2 (x)
             34 LOAD_FAST                2 (x)
             37 BINARY_MULTIPLY     
             38 CALL_FUNCTION            1
             41 POP_TOP             
             42 JUMP_ABSOLUTE           19
        >>   45 POP_BLOCK           

  5     >>   46 LOAD_FAST                1 (lst)
             49 RETURN_VALUE        
>>> dis.dis(squares_comp)
  2           0 BUILD_LIST               0
              3 LOAD_GLOBAL              0 (range)
              6 LOAD_FAST                0 (values)
              9 CALL_FUNCTION            1
             12 GET_ITER            
        >>   13 FOR_ITER                16 (to 32)
             16 STORE_FAST               1 (x)
             19 LOAD_FAST                1 (x)
             22 LOAD_FAST                1 (x)
             25 BINARY_MULTIPLY     
             26 LIST_APPEND              2
             29 JUMP_ABSOLUTE           13
        >>   32 RETURN_VALUE 
```

该函数在每次迭代中`squares`查找列表的方法，并调用它。每次调用`.append()`该函数时，都必须将列表增加一个元素。`.append()`

另一方面，列表理解不必做这项工作。相反，python 使用`LIST_APPEND`字节码，它使用 C API 将新元素附加到列表中，而无需对函数进行查找和 python 调用。

# html - 如何摆脱自动添加的 HTML 标签？

> ID：14124614
> 
> 赞同：0
> 
> 时间：2013-01-02T15:30:26.613
> 
> 标签：html, xslt

我有以下 XSLT 代码：

```
<xsl:for-each select="Component:SelectedCriteriaItem">
  <!--<xsl:if test="position() = 1">-->
  <ul class="filters-list">
    <li>
      <span class="value" id="occDisplayTitle">
        <xsl:value-of select="Component:Value"></xsl:value-of>
        <xsl:text disable-output-escaping="yes"><![CDATA[&nbsp;]]></xsl:text>
        <img src="/COSimages/BusPortal/custom-x.png"  alt="Close Icon" height="14" width ="14">
          <xsl:attribute name="onclick">
            <xsl:value-of select="concat('javascript:FOSLeftNav_locationdelete(event,',$apos,Component:Value,$apos,')',';','return false;')"></xsl:value-of>
          </xsl:attribute>
        </img>
      </span>
    </li>
  </ul>
  <!--</xsl:if>-->
</xsl:for-each> 
```

这是在 for 循环内。对于第一项，它在呈现的 HTML 中添加了一些垃圾 HT​​ML，如下所示：

```
<span id="occDisplayTitle" class="value">
12345 within 25 miles 
 <img<span class="truncate_ellipsis">...</img<span>
</span> 
```

实际上它应该呈现为

```
<span id="occDisplayTitle" class="value">
12345 within 25 miles 
 <img width="14" height="14" onclick="javascript:FOSLeftNav_locationdelete    (event,'12345    within 25 miles');return false;" alt="Close Icon"  src="/COSimages/BusPortal/custom-x.png">  </span> 
```

但对于其余的项目，它看起来很好并且正在添加正确的图像。

有什么建议么？

# google-drive-api - Google Drive SDK：通过域超级管理员访问权限将文件从一个用户复制到另一个用户

> ID：14124623
> 
> 赞同：3
> 
> 时间：2013-01-02T15:31:13.123
> 
> 标签：google-drive-api

说，我是域超级管理员。并且，有用户 A（源 - 要复制的文件）和用户 B（目标 - 要复制到的文件）。是否有任何可用于此功能的 Google Drive SDK API？

当我读到这个：[https](https://developers.google.com/drive/v2/reference/files/copy) ://developers.google.com/drive/v2/reference/files/copy时，这个 API 只允许复制到我自己的 Google Drive。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:54:10.300

1.  使用域范围的委派来模拟每个用户[https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)。

2.  验证为源用户并与目标用户共享文件[https://developers.google.com/drive/v2/reference/permissions/insert](https://developers.google.com/drive/v2/reference/permissions/insert)

3.  以目标用户身份进行身份验证并复制源文件以生成目标用户拥有的文件的目标副本[https://developers.google.com/drive/v2/reference/files/copy](https://developers.google.com/drive/v2/reference/files/copy)

# rss - 一行上有多个 htmlspecialchars 代码

> ID：14124624
> 
> 赞同：1
> 
> 时间：2013-01-02T15:31:16.187
> 
> 标签：rss, htmlspecialchars

我正在使用 joomla (mediarss) 上的模块设置 rss 提要。我设法添加了一些自定义代码，我现在的问题是，我可以在一行中使用多个 htmlspecialchars 代码/字段。

Herunder，示例：

```
$feed.= "        <title>".htmlspecialchars(strip_tags(strtr($this->items[$i]->title,"\n\r","  ")))."</title>\n";
$feed.= "        <region>".htmlspecialchars(strip_tags(strtr($this->items[$i]->region,"\n\r","  ")))."</region>\n"; 
```

第一个提要向我显示 rss 提要中的帖子标题，第二个提要显示一个地区。region 字段是我们在 joomla 后端添加的自定义字段。

在 RSS 提要中，显示如下：

```
<title>the title of the post</title>

<region>the region filled in, in the custom field 'region'</region> 
```

我想要实现的是以下输出

```
<title>the title of the post **in** the region filled in, in the custom field 'region' </title> 
```

那么我可以将 2 个代码放在一行上吗？

非常感谢，

# google-app-engine - 使用 App Engine 进行 Go 的 I18n 策略

> ID：14124630
> 
> 赞同：21
> 
> 时间：2013-01-02T15:31:41.580
> 
> 标签：google-app-engine, localization, internationalization, go

我想不一定特定于 GAE，但我很好奇人们使用什么来翻译或本地化他们的 Web 应用程序。

恐怕我自己的方法太天真了，实际上只是通过根据用户配置文件中记录的语言环境值从数据存储中为每个包加载一个实体来解决这个问题。至少这允许提供一些字符串的翻译：

```
package foo

...

type Messages struct {
    Locale string
    ErrorDatastore string
    LoginSuccessful string
    ...
} 
```

使用对应于语言环境的字符串 id 存储，然后加载到 Gorilla 上下文或类似内容：

```
const Messages ContextKey = iota

...

k := datastore.NewKey(c, "Messages", "en_US", 0, nil)
m := new(Messages)
if err := datastore.Get(c, k, m); err != nil {
    ...
} else {
    context.Set(r, Messages, m)
} 
```

这显然是非常有限的，但至少可以通过 context.Get(r, foo.Messages) 从调用代码中获取字符串。谁能指出我更有用的实现，或提出更好的方法？

编辑（相关但不完全有用）：

*   [gettext：一个 MO 文件解析器](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/6-MtqMAkTus)
*   [去-18n](http://godoc.org/github.com/Astaxie/go-i18n)
*   [Go的国际化计划](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/_dHb28WG68g)
*   [多语种](https://github.com/lxn/polyglot)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T23:11:16.513

[Jonathan Chan](https://stackoverflow.com/questions/14124630/i18n-strategies-for-go-with-app-engine#comment19739067_14124630)指出[Samuel Stauffer 的](http://samuelks.com/) [go-gettext](http://github.com/samuel/go-gettext)似乎可以解决问题。给定目录：

```
~appname/
 |~app/
 | `-app.go
 |+github.com/
 `-app.yaml 
```

从（假设 *nix）开始：

```
$ cd appname
$ git clone git://github.com/samuel/go-gettext.git github.com/samuel/go-gettext 
```

[由于下划线在 Go 中的特殊特性，](https://stackoverflow.com/questions/14293148)源准备不能使用 _("String to be translate") 短格式。您可以使用 -k 标志告诉 xgettext 查找驼峰式函数名称“GetText”。

最小的工作示例：

```
package app

import (
    "fmt"
    "log"
    "net/http"

    "github.com/samuel/go-gettext"
)

func init () {
    http.HandleFunc("/", home)
}

func home(w http.ResponseWriter, r *http.Request) {
    d, err := gettext.NewDomain("appname", "locale")
    if err != nil {
        log.Fatal("Failed at NewDomain.")
    }

    cat := d.GetCatalog("fr_FR")
    if cat == gettext.NullCatalog {
        log.Fatal("Failed at GetCatalog.")
    }

    fmt.Fprintf(w, cat.GetText("Yes."))
} 
```

使用以下命令创建模板：

```
$ xgettext -d appname -kGetText -s -o appname.pot app/app.go 
```

注意 -k，没有它就没有输出，因为 xgettext 不会识别对 GetText 的调用。在 appname.pot 中编辑相关字符串、电子邮件等。假设我们正在本地化法语：

```
$ mkdir -p locale/fr_FR/LC_MESSAGES
$ msginit -l fr_FR -o french.po -i appname.pot 
```

编辑法语.po：

```
# Appname l10n
# Copyright (C) 2013 Wombat Inc
# This file is distributed under the same license as the appname package.
# Wombat <wombat@example.com>, 2013.
#
msgid ""
msgstr ""
"Project-Id-Version: appname v0.1\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2013-01-13 11:03+1300\n"
"PO-Revision-Date: 2013-01-13 11:10+1300\n"
"Last-Translator: Rich <rich@example.com>\n"
"Language-Team: French\n"
"Language: fr\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=2; plural=(n > 1);\n"

#: app/app.go:15
msgid "Yes."
msgstr "Oui." 
```

生成二进制文件（将实际与应用程序一起部署的文件）：

```
$ msgfmt -c -v -o locale/fr_FR/LC_MESSAGES/appname.mo french.po 
```

最终目录结构：

```
~appname/
 |~app/
 | `-app.go
 |~github.com/
 | `~samuel/
 |   `~go-gettext/
 |     +locale/
 |     |-catalog.go
 |     |-domain.go
 |     `-mo.go
 |~locale/
 | `~fr_FR/
 |   `LC_MESSAGES/
 |    `-appname.mo 
 `-app.yaml 
```

（go-gettext 下的 locale 目录包含测试数据，可以删除以进行部署。）

如果一切顺利，访问 appname 应该会显示“Oui”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-30T06:37:30.410

[go-i18n](http://nicksnyder.github.io/go-i18n/)是一个具有一些不错功能的替代包：

*   实现[CLDR 复数规则](http://cldr.unicode.org/index/cldr-spec/plural-rules)。
*   对带有变量的字符串使用[文本/模板](http://golang.org/pkg/text/template/)。
*   翻译文件是简单的 JSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-19T22:49:41.757

GNU Gettext 作为 i18n 解决方案的事实标准被广泛采用。

要直接从您的 Go 项目中使用 .po 文件并将所有翻译加载到内存中以获得更好的性能，您可以使用我的包：[https ://github.com/leonelquinteros/gotext](https://github.com/leonelquinteros/gotext)

这相当简单直接。

因此，给定一个 default.po 文件（在 GNU gettext 之后格式化：[https](https://www.gnu.org/software/gettext/manual/html_node/PO-Files.html) ://www.gnu.org/software/gettext/manual/html_node/PO-Files.html ），`/path/to/locales/es_ES/default.po`您可以使用这个包加载它并开始使用立即翻译：

```
import "github.com/leonelquinteros/gotext"

func main() {
    // Configure package
    gotext.SetLibrary("/path/to/locales")
    gotext.SetLanguage("es_ES")

    // Translate text from default domain
    println(gotext.Get("Translate this text"))
} 
```

如果您希望在字符串中定义翻译以便更“集中”使用，您可以使用 Po 对象解析 PO 格式的字符串：

```
import "github.com/leonelquinteros/gotext"

func main() {
    // Set PO content
    str := `
msgid "One apple"
msgstr "Una manzana"

msgid "One orange"
msgstr "Una naranja"

msgid "My name is %s"
msgstr "Mi nombre es %s"
`

    // Create Po object
    po := new(Po)
    po.Parse(str)

    // Get a translated string
    println(po.Get("One orange"))

    // Get a translated string using variables inside the translation
    name := "Tom"
    println(po.Get("My name is %s", name))
} 
```

正如您在最后一个示例中看到的，也可以在翻译字符串中使用变量。

虽然大多数解决方案都非常相似，包括您的解决方案，但使用通用格式作为 gettext 可以带来一些额外的好处。

此外，您的解决方案似乎对于并发使用并不安全（当从多个 goroutine 使用时）。这个包为你处理所有这些。包也有单元测试，欢迎贡献。

# android - 如何从片段绑定服务

> ID：14124632
> 
> 赞同：9
> 
> 时间：2013-01-02T15:31:54.450
> 
> 标签：android, android-fragments

我正在尝试以与在活动中成功完成相同的方式从片段绑定服务，但是当我尝试在服务上调用方法时，我得到 NullPointerException - 显然是因为服务为空。现在绑定到 onStart 中的服务是否存在一些问题，或者我只是做错了？

```
@Override
public void onStart() {
    super.onStart();

    Intent intent = new Intent(getActivity(), LiteTrickService.class);
    getActivity().registerReceiver(receiver, new IntentFilter(LiteTrickService.BROADCAST_ACTION));
    getActivity().registerReceiver(receiver, new IntentFilter(LiteTrickService.BROADCAST_FAIL));
    getActivity().bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
}

@Override
public void onStop() {
    super.onStop();
    getActivity().unbindService(mConnection);
    getActivity().unregisterReceiver(receiver);
    mBound = false;
} 
```

*编辑：*对不起。这是我没有充分考虑这个问题的错误。mConnection 是一个 ServiceConnection，看起来像这样：

```
private ServiceConnection mConnection = new ServiceConnection() 
{

    @Override
    public void onServiceConnected(ComponentName className,
            IBinder service) {
        // We've bound to LocalService, cast the IBinder and get LocalService instance
        LocalBinder binder = (LocalBinder) service;
        mService = binder.getService();
        mBound = true;
    }

    @Override
    public void onServiceDisconnected(ComponentName arg0) {
        mBound = false;
    }
}; 
```

堆栈跟踪 ：

```
01-03 15:21:22.355: E/AndroidRuntime(12360): FATAL EXCEPTION: main
01-03 15:21:22.355: E/AndroidRuntime(12360): java.lang.NullPointerException
01-03 15:21:22.355: E/AndroidRuntime(12360):    at lite.hattrick.players.PlayerRankingFragment.onOptionsItemSelected(PlayerRankingFragment.java:205) 
```

这将是引发异常的确切位置：case POPULATE_ID:

```
 if (hasData) {
            return false;
        }
        if(!mBound)
            getActivity().bindService(new Intent(getActivity().getApplicationContext(), LiteTrickService.class), mConnection, Context.BIND_AUTO_CREATE);
        mService.refreshPlayers(); // Null Pointer Exception as mService is null
        pBar.setVisibility(View.VISIBLE);
        return true; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T14:36:18.393

我解决了这个问题。结果我忘记在我的清单中提供带有正确包名的服务声明。

通过改变

```
<service android:name=".LiteTrickService" /> 
```

到

```
<service android:name="lite.hattrick.services.LiteTrickService" /> 
```

我解决了问题，服务现在按预期连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:27:42.977

你`NullPointerException`在`mService`变量上。正如您所说`bindService()`，`Activity`绑定到`Service`它自己的线程。这意味着您的代码将在服务绑定时继续运行。这导致您的`mService`变量仍然是`null`.

您可以做的是将`Service`绑定后必须运行的代码移动到`onServiceConnected()`您的`mConnection`. 这将确保`mService`变量将指向您的服务，并且不会为空。

# jquery - 使用 jquery 更改带有文本的锚的 href 链接

> ID：14124633
> 
> 赞同：0
> 
> 时间：2013-01-02T15:32:03.007
> 
> 标签：jquery

如果我有：

```
<a href="#">Title </a> 
<a href="#">Title2 </a> 
```

我希望在第一个锚点上的 href 是 Title，在第二个锚点上是 Title2

我试过使用`attr("href" function() { return this.text; });`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:33:12.003

差不多好了 ：

```
$('a').attr("href", function() { return $(this).text(); }); 
```

[示范](http://jsfiddle.net/BcNxB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:35:22.550

*改变*它会是这样的：

```
$('a').each(function(i,e){
  this.href = '#' + $(this).text(); // using # because i assume named anchor?
}); 
```

那会改变：

```
<a href="#">Title</a>        -> <a href="#Title">Title1</a>
<a href="#">Title2</a>       -> <a href="#Title2">Title2</a> 
```

*   抓住所有锚点 ( `$('a')`)
*   循环遍历每一个 ( `.each()`)
*   使用锚的文本 ( `this.href = $(this).text()`)分配一个新值

*`'#' +`如果您不想要指向命名锚/id 元素的链接，也可以从上面删除该部分，但很可能锚的显示文本提供的任何内容都不是有效的 URL）*

# c# - Juice-ui：在代码隐藏中动态构建菜单

> ID：14124635
> 
> 赞同：0
> 
> 时间：2013-01-02T15:32:16.893
> 
> 标签：c#, juice-ui

我试图在页面加载时在运行时构建一个juiceui-menu，但我没有任何运气。如果我在设计时构建菜单但需要在运行时构建它，它工作得很好。任何帮助将非常感激！这是我到目前为止的代码......

c#代码：

```
 private void BuildLoginMenu()
        {
            Juice.Menu jMenuContainer = new Juice.Menu();

            Juice.MenuItem parentItem = new Juice.MenuItem();
            parentItem.ID = "Parent1";
            MenuTemplate p = new MenuTemplate("Parent");
            parentItem.Content = p;      

            Juice.MenuItem childItem = new Juice.MenuItem();
            childItem.ID = "Parent1";
            MenuTemplate c = new MenuTemplate("Parent");
            childItem.Content = c;

            parentItem.Items.Add(childItem);

            jMenuContainer.Items.Add(parentItem);
            Placeholder1.Controls.Add(jMenuContainer);
      }
    } 
```

这是 MenuTemplate 类供参考：

```
 public class MenuTemplate : ITemplate
        {

            private string _text;

            public MenuTemplate(string text)
            {
              _text = text;
            }

           public void InstantiateIn(Control container)
           {
             LiteralControl l = new LiteralControl(_text);
             container.Controls.Add(l);
           }
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:40:10.580

这次我正在回答我自己的问题......我发现更容易做的是避免在代码隐藏中构建 JuiceUI:Menu。而是使用 jQueryUI CSS 文件构建一个 HTML 无序列表来设置列表样式。由于 jQueryUI 是 JuiceUI 的骨干，我可以毫无问题地让它工作。这是我走这条路的原因：您不能将代码隐藏中的服务器控件呈现为字符串并将输出分配给 div 的 innerhtml 属性，但您可以将 html 呈现为代码隐藏中的字符串并将其分配给一个 div 的 innerhtml 属性 - 这允许我动态构建菜单。请参阅下面的适用于我的代码。

HTML

```
 <script type="text/javascript">
          $(function () {
               $("#menu").menu();
          });
        </script>    

        <div id="menuDiv" runat="server">
        </div> 
```

C＃

```
 str += "<ul id=\"menu\">  ";        
        //loop through each menuItem, build menu from top down.
        foreach (MenuItem m in menuItems)
        {        

            str += "<li>";
            str += "<a href=\"#\">" + m.Title + "</a>";
            str += "</li>";           

        }
        str += "</ul>";
        menuDiv.InnerHtml = str; 
```

# php - 使用 reCaptcha 后防止电子邮件垃圾邮件

> ID：14124636
> 
> 赞同：0
> 
> 时间：2013-01-02T15:32:27.773
> 
> 标签：php, jquery

总而言之，我的页面上有一个表格，用于发送电子邮件。在表单页面上，我有以下代码：

```
<input type="text" name="Name" id="your_name" class="contact_form_input_text">
<input type="text" name="Email_Address" id="your_email" class="contact_form_input_text">
<input type="text" name="fill_me_out" id="fill_me_out">
<input type="button" value="Send" id="submit_contact_form_button"> 
```

第一个文本框是一个lamecaptcha，我在PHP 端检查它以确保它没有被填写。我还使用一些 JS 来隐藏它：

```
jQuery(function(){
    jQuery("#fill_me_out").hide();
}); 
```

然后，在我的页面使用 jQuery 验证器提交之前，我进行了以下表单验证：

```
jQuery("#contact_form").validate({
    rules: {
        Email_Address: {
            required: true,
            email: true
        },
        Name: {
            required: true
        }
    },
    messages: {
        Email_Address: {
            required: "Please enter an email address!",
            email: "Please enter a valid email address!"
        },
        Name: {
            required: "Please enter your Name!"
        }
    }
});

jQuery("#submit_contact_form_button").click(function(event) {
      if (jQuery("#contact_form").valid()) {
        challengeField = jQuery("input#recaptcha_challenge_field").val();
            responseField = jQuery("input#recaptcha_response_field").val();
            var html = jQuery.ajax({
            type: "POST",
            url: site_url + "ajax.recaptcha.php",
            data: "recaptcha_challenge_field=" + challengeField + "&recaptcha_response_field=" + responseField,
            async: false
            }).responseText;

            if(html == "success")
            {
                //$("#captchaStatus").html(" ");
                // Uncomment the following line in your application
                //return true;
                jQuery("#contact_form").submit();
            }else{
                jQuery("#captchaStatus").html("Your captcha is incorrect. Please try again");
                Recaptcha.reload();
                return false;
            }
      }
      return false;
    }); 
```

如果所有内容都正确填写，则页面提交。我有以下检查来检查蹩脚的验证码：

```
$lamecaptcha_check = $_POST['fill_me_out'];
if($lamecaptcha_check!=""){
    echo '[box style="alert"]Why are you trying to spam us? It could be because you don\'t have Javascript enabled and filled out an incorrect box![/box]';
}else{
    //Send the form using mail
} 
```

提交表单是一个按钮而不是提交，因此它必须通过 jquery 验证才能提交。不知何故，我仍然收到空白电子邮件。有谁知道我可以做些什么来防止垃圾邮件/空白电子邮件？我在想我应该检查后端的变量以确保它们不是空白的，但是除非有一些值，否则甚至不应该提交表单，所以我需要在初始页面上提供一个有效的电子邮件地址。任何想法表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:36:09.757

仅仅因为您有一个提交按钮通过 jQuery 工作，并不意味着不能提交表单。

垃圾邮件机器人可能会检查表单的 HTML，查看不同的字段，然后发送带有相关信息的 POST 请求。它不会评估您的 jQuery。

如果您想做这样的事情，请设置表单的`action="javascript:;"`，然后在提交之前在您的 jQuery 中将其更新为实际值。

# android - 我的 Android 服务无法启动

> ID：14124637
> 
> 赞同：0
> 
> 时间：2013-01-02T15:32:31.713
> 
> 标签：android, android-intent, service, android-manifest

我的服务没有启动。

我在我的服务中使用了以下`onCreate`方法：

```
public void onCreate(Bundle savedInstanceState){

        wsConnection = new WSConnection();
        handler = new Handler();
        Bundle b = savedInstanceState;
        this.dbManager = b.getParcelable("object");

        super.onCreate();
        Log.i("prova","servizio attivato");
        TimerTask task = new TimerTask(){
            public void run(){

                FindPendingData();
            }

        };
        timer = new Timer();
        //timer.schedule(task, cal.getTime());
        timer.schedule(task, 0, 30000);
    } 
```

同时，以下代码启动我的服务：

```
 Intent intent = new Intent(this, myService.class);
        intent.putExtra("object", myObject);
        startService(intent); 
```

对象扩展`Object`和实现`Parcelable`

我还在 Manifest 中声明：

```
<service android:name="myPackage.myService" /> 
```

知道问题可能出在哪里吗？

**编辑**：我尝试删除 Bundle 参数，现在服务开始了！但我不明白为什么！有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:40:58.950

使用[onStartCommand(Intent, int, int)](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)或[onStart()](http://developer.android.com/reference/android/app/Service.html#onStart%28android.content.Intent,%20int%29)而不是 onCreate of Service 来获取 Intent 数据：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
      // get intent data here
    return START_STICKY;
} 
```

正如评论 OP 所说：

> 没有错误。我总是使用此代码来启动服务，通常效果很好

但是如果我们在 doc [onCreate()](http://developer.android.com/reference/android/app/Service.html#onCreate%28%29)中看到， 如果您要覆盖它，则不要使用任何参数

# android - 使用真实产品测试 Android 应用内购买

> ID：14124647
> 
> 赞同：3
> 
> 时间：2013-01-02T15:32:58.080
> 
> 标签：android, testing, in-app-purchase, google-play-services

我正在尝试为我的 android 应用测试应用内购买：

我已经阅读了有关测试的 android 开发者网站，并且我已经成功地使用了构建测试/假产品项目的游戏商店，例如 android.test.purchased、android.test.canceled ...

现在我想用我自己的真实产品测试应用内购买。因此，我在 Google Play 商店开发者控制台中指定了我自己的产品。

我的问题：根据 android 开发者指南，应该可以在不转移真钱的情况下购买这个真品，只需将 gmail 帐户添加到 Play 商店开发者控制台的应用程序设置（在“许可测试”部分下）。

> 许可证测试除了此控制台的所有者之外，以下用户将从应用程序获得许可证测试响应。他们还可以通过已上传但尚未发布的 APK 进行应用内购买。

因此，如果使用 gmail 帐户在我的测试设备上登录 google play store，我已添加到此许可证测试部分，我应该能够购买物品，而无需转移真钱？我做对了吗？有没有人在应用购买测试方面有经验，可以给我一些有用的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T19:27:24.423

不知道这是否相关，但这里有一个很好的测试购买指南，包括在 google 中测试购买帐户：

[http://developer.android.com/google/play/billing/billing_testing.html](http://developer.android.com/google/play/billing/billing_testing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T19:53:06.210

使用测试帐户不会收取 IAP 费用。

[http://developer.android.com/google/play/billing/billing_testing.html](http://developer.android.com/google/play/billing/billing_testing.html)

"测试购买和开发者账号

授权许可测试帐户与您在 Google Play 中的开发者帐户相关联，而不是与特定的 APK 或包名称相关联。将帐户标识为测试帐户使其能够购买您的任何应用内产品而无需付费。"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T15:39:04.120

根据我最近的经验。使用与开发人员不同的 gmail 帐户，可以购买为已上传但未发布的应用程序发布的应用程序购买。您必须兑换真钱，但可以退款。我认为你会失去谷歌 30% 的交易费。

# rabbitmq - 芹菜失去与 RabbitMQ 的连接

> ID：14124654
> 
> 赞同：0
> 
> 时间：2013-01-02T15:33:28.603
> 
> 标签：rabbitmq, celery

时不时地，我的芹菜工人会“失去”与 RabbitMQ 的连接。我查看了日志，在 celery 日志中没有看到任何内容，但我确实在 RabbitMQ 日志中看到了一些内容。

=警告报告==== 2-Jan-2013::09:13:04 === 来自 1.1.1.1:43760 connection_closed_abruptly 的 TCP 连接 <0.14032.9> 异常

我的设置非常简单。我有一台服务器运行 celery 工作程序，另一台运行 RabbitMQ 队列。工作人员远程连接到队列。

我注意到，如果我使用 RabbitMQ 服务器重新启动服务器，我也必须手动重新启动 celery 工作人员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:24:00.893

这似乎是我使用的初始化脚本的问题。当向 celery 守护进程发送 SIG TERM 信号时，它不会杀死工作人员。它使工作人员处于等待中介者将任务提供给池的状态，但 SIG TERM 会杀死中介者。

看看我在下面找到的调试语句：

```
 [2013-01-02 16:23:58,624: DEBUG/MainProcess] Terminating celery.worker.consumer.Consumer...
    [2013-01-02 16:23:58,624: DEBUG/MainProcess] consumer: Stopping consumers...
    [2013-01-02 16:23:58,625: DEBUG/MainProcess] Terminating celery.worker.mediator.Mediator...
    [2013-01-02 16:23:59,034: DEBUG/MainProcess] Terminating celery.concurrency.processes.TaskPool...
    [2013-01-02 16:23:59,050: DEBUG/MainProcess] Terminating celery.worker.hub.Hub...
    [2013-01-02 16:23:59,050: DEBUG/MainProcess] consumer: Closing consumer channel...
    [2013-01-02 16:23:59,051: DEBUG/MainProcess] consumer: Closing broadcast channel... 
```

解决方法是将 SIG TERM 信号也发送到所有工作进程。

```
 if [ $(ps aux | grep -c 'celery') -eq 1 ] ; then
            ps auxww | grep celeryd | grep -v "grep" | awk '{print $2}' | sudo xargs kill -HUP
    fi 
```

每次我们的 jenkins 构建脚本运行时（每次提交后）都会发生这种情况。

# jquery - 通过 ajax (rails) 加载嵌套资源

> ID：14124655
> 
> 赞同：3
> 
> 时间：2013-01-02T15:33:31.623
> 
> 标签：jquery, ruby-on-rails, ajax, nested-resources

我有如下所示的路线：

```
resources :projects do
  resources :tasks
end 
```

它给你一个这样的 URL： URL/projects/14/tasks/3

这些模型定义：

```
project has_many :tasks
task belongs_to :project 
```

现在，当用户单击任务的链接时，我正在通过远程 => true 链接从项目的显示视图中将任务#show 加载到 div 中。这工作正常。

```
#tasks/show.js.erb

$('#task_content').html("<%= j render(partial: 'tasks/single', locals: { t: @task }) %>"); 
```

* * *

```
#tasks/_single.html.erb

<%= t.content %> 
```

问题是我希望用户能够访问 URL/projects/14/tasks/3 并将任务自动加载到项目视图上的 div 中。

基本上，我需要找到一种方法来`URL/projects/14/tasks/3`实际渲染`URL/projects/14`，并调用 jquery`$('a#task_<%= task.id %>').click()`

我似乎无法弄清楚如何让视图识别这种行为。谁能指出我正确的方向？

谢谢！！！

**编辑**

```
#TasksController
  def show
    @task = Task.find(params[:id])
    respond_to do |format|
      format.js
    end
  end

#ProjectsController
  def show
    @project = Project.find(params[:id])
    respond_to do |format|
      format.html # show.html.erb
    end
  end 
```

Projects#show 有两个主要元素：

1.  id 为 task_<%= task.id %> 的链接
2.  任务内容应加载到的 div (div#task_content)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:38:59.937

> 基本上，我需要找到一种方法让 URL/projects/14/tasks/3 实际呈现 URL/projects/14，并调用 jquery $('a#task_<%= task.id %>').click( )

您可以测试任务是否通过标准 HTTP 调用（非 AJAX）到达，并重定向到项目的 url，传入参数以在加载时自动加载任务。由于您的默认情况使用一种`js`格式，它甚至更简单 - 您可以只测试一种`html`格式：

```
#TasksController
def show
  @task = Task.find(params[:id])
  respond_to do |format|
    format.html { redirect_to project_path(@task.project_id, :load_task_id => @task.id) }
    format.js
  end
end

# somewhere in /projects/show partial
<% if params[:load_task_id] %>
  <script type="text/javascript">
    $(function(){
      $('a#task_<%= params[:load_task_id] %>').click()
    });
  </script>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:13:01.233

我可能会使用[Rails 路由约束](http://guides.rubyonrails.org/routing.html#request-based-constraints)将 xhr 请求定向到任务控制器，并将 http 请求发送到项目控制器，并将任务 ID 作为参数，使该变量可用于您的视图，然后您的视图可以检查任务变量是否存在并加载 div？或者也许用 JS 检查 URL。

类似于以下内容：

```
match "/projects/:id/tasks/:tid", :to => "projects#show", :constraints => lambda { |request| !request.xhr? }
match "/projects/:id/tasks/:tid", :to => "tasks#show", :constraints => lambda { |request| request.xhr? } 
```

未经测试，但可能会工作？

# cuda - cuda 内核不能同时执行

> ID：14124673
> 
> 赞同：1
> 
> 时间：2013-01-02T15:34:46.933
> 
> 标签：cuda

我正在尝试探索具有 2.0 功能的 Nvidia Quadro 4000 的并发内核执行属性。

我使用 2 个不同的流，它们的运行方式如下：

1.  复制 H2D 两个不同的固定内存块
2.  运行内核
3.  Copyt D2H 两个不同的块到固定内存。

两个流的内核完全相同，每个都有 190 毫秒的执行时间。

在 Visual profiler（5.0 版）中，我希望两个内核同时开始执行，但它们仅重叠 20 毫秒。这是代码示例：

```
enter code here

//initiate the streams
        cudaStream_t stream0,stream1;
        CHK_ERR(cudaStreamCreate(&stream0));
        CHK_ERR(cudaStreamCreate(&stream1));
        //allocate the memory on the GPU for stream0
        CHK_ERR(cudaMalloc((void **)&def_img0, width*height*sizeof(char)));
        CHK_ERR(cudaMalloc((void **)&ref_img0, width*height*sizeof(char)));
        CHK_ERR(cudaMalloc((void **)&outY_img0,width_size_for_out*height_size_for_out*sizeof(char)));
        CHK_ERR(cudaMalloc((void **)&outX_img0,width_size_for_out*height_size_for_out*sizeof(char)));
        //allocate the memory on the GPU for stream1
        CHK_ERR(cudaMalloc((void **)&def_img1, width*height*sizeof(char)));
        CHK_ERR(cudaMalloc((void **)&ref_img1, width*height*sizeof(char)));
        CHK_ERR(cudaMalloc((void **)&outY_img1,width_size_for_out*height_size_for_out*sizeof(char)));
        CHK_ERR(cudaMalloc((void **)&outX_img1,width_size_for_out*height_size_for_out*sizeof(char)));

        //allocate page-locked memory for stream0
        CHK_ERR(cudaHostAlloc((void**)&host01, width*height*sizeof(char), cudaHostAllocDefault));
        CHK_ERR(cudaHostAlloc((void**)&host02, width*height*sizeof(char), cudaHostAllocDefault));
        CHK_ERR(cudaHostAlloc((void**)&host03, width_size_for_out*height_size_for_out*sizeof(char), cudaHostAllocDefault));
        CHK_ERR(cudaHostAlloc((void**)&host04, width_size_for_out*height_size_for_out*sizeof(char), cudaHostAllocDefault));

        //allocate page-locked memory for stream1
        CHK_ERR(cudaHostAlloc((void**)&host11, width*height*sizeof(char), cudaHostAllocDefault));
        CHK_ERR(cudaHostAlloc((void**)&host12, width*height*sizeof(char), cudaHostAllocDefault));
        CHK_ERR(cudaHostAlloc((void**)&host13, width_size_for_out*height_size_for_out*sizeof(char), cudaHostAllocDefault));
        CHK_ERR(cudaHostAlloc((void**)&host14, width_size_for_out*height_size_for_out*sizeof(char), cudaHostAllocDefault));

        memcpy(host01,in1,width*height*sizeof(char));
        memcpy(host02,in2,width*height*sizeof(char));

        memcpy(host11,in1,width*height*sizeof(char));
        memcpy(host12,in2,width*height*sizeof(char));

        cudaEvent_t start, stop;
        float time;
        cudaEventCreate(&start);
        cudaEventCreate(&stop);

        dim3 dimBlock(CUDA_BLOCK_DIM, CUDA_BLOCK_DIM);
        dim3 Grid((width-SEARCH_RADIUS*2-1)/(dimBlock.x*4)+1, (height-SEARCH_RADIUS*2-1)/(dimBlock.y*4)+1);

        cudaEventRecord(start,0);
        // --------------------
        // Copy images to device
        // --------------------
        //enqueue copies of def stream0 and stream1
        CHK_ERR(cudaMemcpyAsync(def_img0, host01,width*height*sizeof(char), cudaMemcpyHostToDevice,stream0));
        CHK_ERR(cudaMemcpyAsync(def_img1, host11,width*height*sizeof(char), cudaMemcpyHostToDevice,stream1));
        //enqueue copies of ref stream0 and stream1
        CHK_ERR(cudaMemcpyAsync(ref_img0, host02,width*height*sizeof(char), cudaMemcpyHostToDevice,stream0));
        CHK_ERR(cudaMemcpyAsync(ref_img1, host12,width*height*sizeof(char), cudaMemcpyHostToDevice,stream1));

        CHK_ERR(cudaStreamSynchronize(stream0));
        CHK_ERR(cudaStreamSynchronize(stream1));

        //CALLING KERNEL
        //enqueue kernel in stream0 and stream1
        TIME_KERNEL((exhaustiveSearchKernel<CUDA_BLOCK_DIM*4,CUDA_BLOCK_DIM*4,SEARCH_RADIUS><<< Grid, dimBlock,0,stream0>>>(def_img0+SEARCH_RADIUS*width+SEARCH_RADIUS,ref_img0,outX_img0,outY_img0,width,width_size_for_out)),"exhaustiveSearchKernel stream0");
        TIME_KERNEL((exhaustiveSearchKernel<CUDA_BLOCK_DIM*4,CUDA_BLOCK_DIM*4,SEARCH_RADIUS><<< Grid, dimBlock,0,stream1>>>(def_img1+SEARCH_RADIUS*width+SEARCH_RADIUS,ref_img1,outX_img1,outY_img1,width,width_size_for_out)),"exhaustiveSearchKernel stream1");

        //Copy result back
        CHK_ERR(cudaMemcpyAsync(host03, outX_img0, width_size_for_out*height_size_for_out*sizeof(char), cudaMemcpyDeviceToHost,stream0));
        CHK_ERR(cudaMemcpyAsync(host13, outX_img1, width_size_for_out*height_size_for_out*sizeof(char), cudaMemcpyDeviceToHost,stream1));

        CHK_ERR(cudaMemcpyAsync(host04, outY_img0, width_size_for_out*height_size_for_out*sizeof(char), cudaMemcpyDeviceToHost,stream0));
        CHK_ERR(cudaMemcpyAsync(host14, outY_img1, width_size_for_out*height_size_for_out*sizeof(char), cudaMemcpyDeviceToHost,stream1));

        CHK_ERR(cudaStreamSynchronize(stream0));
        CHK_ERR(cudaStreamSynchronize(stream1));

        cudaEventRecord( stop, 0 );
        cudaEventSynchronize( stop );
        cudaEventElapsedTime( &time, start, stop );
        printf("Elapsed time=%f ms\n",time);

        memcpy(outX,host03,width_size_for_out*height_size_for_out*sizeof(char));
        memcpy(outY,host04,width_size_for_out*height_size_for_out*sizeof(char));

        cudaEventDestroy( start ); 
        cudaEventDestroy( stop );
        CHK_ERR(cudaStreamDestroy(stream0));
        CHK_ERR(cudaStreamDestroy(stream1));

        CHK_ERR(cudaDeviceReset());

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:55:35.957

**计算能力 2.x-3.0**

计算能力 2.x-3.0 设备有一个硬件工作队列。CUDA 驱动程序将命令推送到工作队列中。GPU 主机读取命令并将工作分派给复制引擎或 CUDA 工作分配器 (CWD)。CUDA 驱动程序将同步命令插入到硬件工作队列中，以保证同一流上的工作不能同时运行。当主机点击同步命令时，它将停止，直到相关工作完成。

当网格太小而无法填满整个 GPU 或网格具有尾部效应（线程块的子集执行时间比其他线程块长得多）时，并发内核执行可提高 GPU 利用率。

**案例 1：一个流上的背靠背内核**

如果应用程序在同一个流上背靠背启动两个内核，CUDA 驱动程序插入的同步命令将不会将第二个内核分派给 CWD，直到第一个内核完成。

**案例 2：背靠背内核在两个流上启动**

如果应用程序在不同的流上启动两个内核，主机将读取命令并将命令分派给 CWD。CWD 将光栅化第一个网格（顺序取决于架构）并将线程块分派给 SM。只有当第一个网格中的所有线程块都已被分派时，CWD 才会从第二个网格中分派线程块。

**计算能力 3.5**

计算能力 3.5 引入了几个新功能来提高 GPU 利用率。其中包括： - HyperQ 支持多个独立的硬件工作队列。- 动态并行允许设备代码启动新工作。- CWD 容量增加到 32 个网格。

**资源**

*   [CUDA C/C++ 流和并发 [网络研讨会]](http://developer.download.nvidia.com/CUDA/training/StreamsAndConcurrencyWebinar.pdf)
*   [英伟达费米白皮书](http://www.nvidia.com/content/PDF/fermi_white_papers/NVIDIA_Fermi_Compute_Architecture_Whitepaper.pdf)
*   [NVIDIA Kepler GK110 架构白皮书](http://www.nvidia.com/content/PDF/kepler/NVIDIA-Kepler-GK110-Architecture-Whitepaper.pdf)

# android - 用于创建活动的意图是否存在？

> ID：14124675
> 
> 赞同：5
> 
> 时间：2013-01-02T15:34:56.357
> 
> 标签：android, android-intent, android-activity, oncreate

关于这个问题的更多信息。

我想知道如果我不杀死它，我在创建 Activity 的意图中传递的数据是否会保留。

示例：活动 A 使用额外数据 String(SomeStringValue) 调用活动 B。然后 Activity B 调用 C 调用 D。现在在这段时间的某个地方 Activity B 被销毁（例如为了节省内存），当我回到 Activity B 时需要重新创建它（例如再次调用 onCreate）但是因为我已经使用后退按钮而不是传递一个意图，我以前的意图仍然存在，我可以获得我需要的数据，或者这些数据会消失。

我试图自己测试它但我不能在不杀死整个应用程序的情况下再次调用 onCreate。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T16:00:45.830

如上所述，我通过进入开发人员选项并打开“不保留活动”进行了测试。

使用这种方法，我看到当从内存中删除活动时，原始 Intent 得以保留。

当我离开活动时，会立即调用 onDestroy。当我回到原来的活动时，onCreate 被调用，其 Intent 中的值与最初发送过来的值相同。

以下代码用作我的测试平台。

```
public class MyActivity extends Activity {
/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String extra = getIntent().getStringExtra("test");

    ((TextView) findViewById(R.id.test)).setText(extra);
}

public void onClick(View view) {
    Intent i = new Intent(this, MyActivity.class);
    i.putExtra("test", ""+Math.random());
    startActivity(i);
}

@Override
protected void onDestroy() {
    Log.d("Test", "onDestroy");
    super.onDestroy();    //To change body of overridden methods use File | Settings | File Templates.
} 
```

}

因此，要回答您的问题，在 onSavedInstanceState 中保存 Intent 数据是多余的。您应该只保存已更改或需要保留但不会永久保存的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:44:41.943

如果`onDestroy()`调用了该方法，则可能会丢失所有意图数据...您需要覆盖该`onSaveInstanceState()`方法并传递您的意图数据...之后`onCreate()`只需检查 saveInstaceState 包是否为空...

这应该让你确定所有额外的东西都会被保存，无论发生什么......

# jquery - Cakephp 2.1 和 Jquery UI 自动完成功能不起作用

> ID：14124680
> 
> 赞同：2
> 
> 时间：2013-01-02T15:35:21.943
> 
> 标签：jquery, cakephp, user-interface, autocomplete

我尝试在从数据表中获取的 cakephp 2.1 数据中实现自动完成没有成功请帮助我

**在默认布局中**

```
 echo $this->Html->script('jquery-1.8.3');
    echo $this->Html->script('jquery-ui-1.9.2.custom'); 
```

**在视图文件中**

```
 $('.TextBox').keydown(function (e){
   var FieldId =  $(this).attr('id');
   var ColName =  $(this).attr('title');
   var table = document.getElementById("dbTable").value;
   var TableName = table + "_docs";
   var TextValue = ""

   if (e.which >= 32 || e.which < 127) {
      var c = String.fromCharCode(e.which);
      TextValue = $(this).val() + c;
      }

  if(TextValue != ""){
              $.ajax({
              type:'POST',
              url:"../AutoSearch/" + TableName + "/" + ColName + "/" + TextValue ,
              success:function(response){
              var data = response.split("|");
              $('#' + FieldId).autocomplete(data);
              }
        });
       }
  }); 
```

**在控制器中**

```
public function AutoSearch($table,$col,$text){
       $this->autoRender=false;
       if($this->RequestHandler->isAjax()){
         Configure::write('debug', 0);
         if(trim($text) != ""){
           $info = "";
           $info = $this->Template->getAutoComplete($table,$col,$text);
           }
         else
         {
             $info = "";
         }
         return $info;
      } 
    } 
```

**在模型中**

```
 public function getAutoComplete($table,$col,$text){
          $sql = "select " . $col . " from " . $table . " where " . $col . " Like '%" . $text . "%'";
          $ret = $this->query($sql);
          $rText = "";
          foreach($ret as $val){
               if($rText == ""){
                     $rText = $val[$table][$col] . "|";}
                  else {
                $rText = $rText . $val[$table][$col] . "|";}
            }
              return $rText;
    } 
```

**firebug 中的错误消息**

类型错误：this.source 不是函数

.apply（实例，参数）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:10:22.497

作为起点，我建议使用默认的 jQuery 自动完成[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)并查看类似的内容。

在视图中

```
$('.TextBox').autocomplete({
        source: function(request, response) {
            $.ajax({
               type:'POST',
               url:"/your_controller/your_action/",
               data: {
                    column: 'col',
                    search: request.term // request.term will have value in field
                },
               success:function(response){
                    // to see what you are getting to browser
                    // console.log(response);
                    response( $.map( response, function( item ) {
                        // depending on what you send, return object you need
                        // label will be shown in list, value will be set when selected
                        return {
                            label: item.name,
                            value: item.id
                        }
                    }));
                 }
               }
            });
        }
    }); 
```

在控制器中

```
public function your_action() {
    // to see what you are getting to controller
    // debug($this->request->data);
    exit( json_encode($this->YourModel->find('list', array('conditions' => array())));
} 
```

# android - Dalvik缓存/安卓

> ID：14124681
> 
> 赞同：0
> 
> 时间：2013-01-02T15:35:23.270
> 
> 标签：android, dalvik

/data/dalvik-cache 中有什么？

我有一个三星 Galaxy Ace，它使用了 127Mb 的整个 ROM 空间，使手机总是显示“空间已满”的消息，让我无法下载任何应用程序。

可以清零吗？如何 ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:38:04.993

Dalvik 缓存是 Android 的重要组成部分。你可以在这里阅读更多关于它的信息：[http ://en.wikipedia.org/wiki/Dalvik_%28software%29](http://en.wikipedia.org/wiki/Dalvik_%28software%29)

清除缓存会导致您的手机在重新创建缓存时运行缓慢，然后您就会回到现在的位置。

要解决您的实际问题，您可以尝试使用 App2SD 之类的应用程序来释放一些空间。

# java - FindBugs : EI_EXPOSE_REP 背后的真正威胁

> ID：14124683
> 
> 赞同：3
> 
> 时间：2013-01-02T15:35:25.420
> 
> 标签：java, security, immutability, findbugs

FindBugs 提出了一个名为[EI_EXPOSE_REP](http://findbugs.sourceforge.net/bugDescriptions.html#EI_EXPOSE_REP)的错误，其描述如下：

**EI：可能通过返回对可变对象的引用来公开内部表示**

*返回对存储在对象字段之一中的可变对象值的引用会公开对象的内部表示。如果实例由不受信任的代码访问，并且对可变对象的未经检查的更改会危及安全性或其他重要属性，则您将需要做一些不同的事情。在许多情况下，返回对象的新副本是更好的方法。*

关于 SO ( [1](https://stackoverflow.com/questions/1732789/malicious-code-ei-expose-rep-medium)、[2](https://stackoverflow.com/questions/5472299/suppressing-java-findbugs-error-ei-expose-rep)和[3](https://stackoverflow.com/questions/7932489/findbugs-issues-with-mutability-of-date-object-in-java) ) 的几个问题已经解决了如何避免此类错误，我理解这是防止修改不可变对象的开发最佳实践但是我不清楚为什么此类错误属于 MALICIOUS_CODE 类别.

这背后的真正威胁是什么？

如果这是一个恶意代码问题，攻击者几乎可以做任何他想做的事情，而可变性不会是最大的问题。如果它是一个漏洞，那么只有在执行不受信任的代码时才能利用它，而且我看不到任何符合这种情况的用例。

对此有何看法？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:48:28.083

关键是，任何时候你打开一个实现，你都会冒着故意或以其他方式破坏代码的*风险*。显然，一个恶意的图书馆用户，例如，可以只是拆解你的 jar 并以这种方式了解细节——关键是要*尽量减少*暴露的风险：它无法被消除。

访问您的库的外部代码的一个简单示例：

考虑一些简单的东西，比如拥有访问级别的对象。如果它是可变的，那么可以想象图书馆用户可以设置自己的访问级别。任何合理的库都很少会公开这种微不足道的事情，但这是一个内部表示何时可能被滥用的明显例子。

底线是暴露的可变状态使代码难以推理，也难以保护。您的代码或其他人可能会意外或故意修改您自己的代码/库使用的某些内容。如果您的库随后更改其行为而没有考虑到这一点，您可能会引入一个微妙（或不那么微妙）的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:05:41.883

让对象隐藏状态并提供强大的静态接口的能力是 Java 移动代码安全性的核心。程序员搞砸了这件事可能会导致漏洞的方式有很多种。

对于值对象，请考虑`String`. 我们相信任何情况都`String`不会改变。我们不想验证 [check] 一个特定的文件名，例如，我们不希望它在我们实际使用它时改变（注意，`java.io.File`在这个意义上不能很好地工作）。此外，可变内部可能具有恶意`equals`方法（例如），由封闭类调用`equals`，但恶意获取对其他封闭类实例的内部对象的引用。

引用类型通常是*对象能力*。通常，它们会削弱它们被赋予的对象的能力（通过构造函数传递）。比如说，您只能通过您有权访问的实例将文件写入特定目录，但它有一个能够写入整个文件系统的字段。

然后是 Java 2 安全模型，这绝不是一件好事。内部对象可能有在特权上下文中调用的方法，这通常不是问题。现在，恶意方放置在对象（受信任类型）中，该对象执行了在该上下文中不应该执行的操作。

当然，请注意随机子类化类。他们可能会`get`在未来的版本中获得一种方法。

话虽如此，我认为 Findbugs 的这个警告没有帮助。该代码可能并非有意隐藏该对象。

（有关暴露内部对象问题的详细描述，请参阅 Michael Feathers[有效使用遗留代码](http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052)的第 13 章（和第 14 章） 。）

# php - 在 Magento 中显示更多/更少的属性

> ID：14124685
> 
> 赞同：0
> 
> 时间：2013-01-02T15:35:28.403
> 
> 标签：php, magento

我想在 Magento 属性中制作一个显示更少/更多按钮。目前，导航中有 50 种不同颜色的块。是否可以减少显示/显示更多按钮？我在互联网上找到的唯一内容是：

```
Go to the app/design/frontend/default/YOUR_THEME/template/catalog/layer/filter.phtml 

Replace the existing code with: 

<ol> 
 <?php 
 $displaySize=4; 
 $i=0; 
 $filterName=strtolower($this->getName()); 
 $cnt=count($this->getItems()); 
 foreach ($this->getItems() as $_item): ?> 
 <?php if($i == $displaySize) { ?> 
 <div id="more-<?php echo $filterName?>"><a >Show Filter</a></div> 
 <div id="cont-<?php echo $filterName?>"> 
 <?php } ?> 
 <li> 
 <?php if ($_item->getCount() > 0): ?> 
 <a href="<?php echo $this->urlEscape($_item->getUrl()) ?>"><?php echo $_item->getLabel() ?></a> 
 <?php else: echo $_item->getLabel() ?> 
 <?php endif; ?> 
 (<?php echo $_item->getCount() ?>) 
 </li> 
 <?php $i++; 
 if($i==$cnt && $cnt > $displaySize) 
 echo '<div id="less-'.$filterName.'"><a >Hide Filter</a></div></div>'; ?> 
 <?php endforeach ?> 
 </ol> 
 Now open the file view.phtml in the same folder 

 Add in the beginning: 

<?php $displaySize=4; 
 $hiddenFilters=array(); ?> 
 Add just before if($_filter->getItemsCount()): 

if($_filter->getItemsCount() > $displaySize) 
 $hiddenFilters[]=strtolower($_filter->getName()); 
 Add at the end of file: 

<script> 
 Event.observe(window, ‘load’, 
function() { 
 <?php foreach($hiddenFilters as $v) 
 { 
 echo "$('cont-".$v."').hide();"; 
 } ?> 
 } 
 ); 

 // Register event ‘click’ and associated call back. 
 Event.observe(document, ‘click’, respondToClick); 

 // Callback function to handle the event. 
 function respondToClick(event) { 
 var element = event.element(); 
 //------ 
 <?php foreach($hiddenFilters as $p) 
 { 
 echo "if(element.up('div').id=='more-".$p."') 
 { 
 $('cont-".$p."').show(); 
 $('more-".$p."').hide(); 
 } 
 if(element.up('div').id=='less-".$p."') 
 { 
 $('cont-".$p."').hide(); 
 $('more-".$p."').show(); 
 }"; 
 } ?> 

 //----- 

 } 

 </script> 
```

该脚本是否应该运行良好，并且构建良好？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:04:55.093

您可能想在模板级别使用 jQuery 'drawer' 来控制它。

您可以在此处查看有关如何创建的更多信息：http: [//jqueryfordesigners.com/slide-out-and-drawer-effect/](http://jqueryfordesigners.com/slide-out-and-drawer-effect/)

# json - 基于 D3js json 的小部件输入 - Json 格式

> ID：14124689
> 
> 赞同：0
> 
> 时间：2013-01-02T15:35:47.527
> 
> 标签：json, d3.js

让我描述一下我的情况，并希望得到您的意见。我正在为一个旨在以图形方式表示大量数据的应用程序规划一个 UI。为此，我决定使用 d3 令人敬畏的可视化。一方面我有一个存储大量数据的存储库，另一方面我有一个应用程序 UI，它使用三个不同的 d3js 小部件（强制图、咖啡风味轮和圆形图）来可视化该数据存储库的某些方面. 这三个小部件中任何一个的主要输入都是 .json 文件。每个 d3 小部件在以不同方式可视化数据方面都有自己的细节，这需要在提供它的“输入”.json 文件中存在一些差异。我的问题是，是否有一种最小的基本数据集输入。json 文件需要包含以便它可以用于构建任何 d3 小部件（或至少我在这里指出的三个小部件）？例如“至少包含主节点、它们的值以及它们与其他节点的关系”之类的东西？

提前感谢您的回答:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:21:24.783

您假设（我认为！）所有数据处理都将在您的数据服务器上完成。您也可以考虑在 javascript 中处理它。这将取决于数据的大小和所需的处理是否有意义。

如果您提供大型数据文件，您可能会发现将数据作为 csv 文件（它们比 json 小）发送并按照 javascript 的要求处理它们会更快。例如，发送平面 csv 文件并使用 d3.nest 为力图和咖啡轮创建层次结构[https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_nest](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_nest)或使用交叉过滤器对数据进行切片和切块。[http://square.github.com/crossfilter/](http://square.github.com/crossfilter/)

# delphi - 如何在 Delphi 中安装 Chromium 包？

> ID：14124690
> 
> 赞同：0
> 
> 时间：2013-01-02T15:35:49.370
> 
> 标签：delphi, delphi-xe2, chromium, tchromium

[我用 TortoiseSVN 从http://code.google.com/p/delphichromiumembedded/](http://code.google.com/p/delphichromiumembedded/)下载了必要的文件，但我不知道如何在 Delphi XE2 中使用它。如何安装 TChromium 组件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T16:00:14.333

要安装组件，请打开适当的包 - 在您的情况下，在包目录中打开 DCEF_XE2.dpk 并安装包。

# php - PHP 扩展中的 SEG 错误

> ID：14124695
> 
> 赞同：8
> 
> 时间：2013-01-02T15:36:16.140
> 
> 标签：php, c, segmentation-fault, php-extension, php-internals

我编写了一个 PHP 扩展来访问静态库中的函数，我将 PHP 构建为 CGI，一切似乎都正常工作（经过几天的工作......）

一旦一切正常，我很兴奋，我重新编译了 PHP，没有调试我在其中的消息。( `php_printf("here111");`.... `php_printf("sending arguments...");`)

然后，它就停止了工作。我在静态库中调用的函数有效，我已经通过直接从另一个可执行文件调用它来测试它。

我用调试符号（）构建了PHP，`--enable-debug`并且可以在gdb中对其进行一定程度的调试。

我仍在努力找出问题所在。似乎 lib ( `diffFst`) 中的函数似乎无法读取输入参数。

```
268     if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "ssssssd",
269        &filA, &filA_len,
270        &nomvarA, &nomvarA_len,
271        &filB, &filB_len,
272        &nomvarB, &nomvarB_len,
273        &filO, &filO_len,
274        &newnomvar, &newnomvar_len,
275        &mult
276        ) == FAILURE) {
277         RETURN_LONG(-100);
278     }
279 
280     php_printf("Read arguments:\nfilA: %s, nomvara: %s\nfilB: %s, nomvarB: %s\nfilO: %s, nomvarO: %s\nMult: %0.3f\n",
281        filA,nomvarA, filB,nomvarB, filO,newnomvar, mult);
282 
285     ier = difffst_(filA,nomvarA, filB,nomvarB, filO,newnomvar, mult); 
```

当我调用此函数时，该`php_printf()`语句起作用并打印出正确的值。但是，当我让它调用 difffst_ 函数时，当它尝试读取输入变量时出现段错误。

diffFst 函数是用 fortran 编写的：

```
 5 function diffFst(filA, nomvara, filB, nomvarb, filO, newnomvar, change, write_tictac, in_verbose) result(ier)
 10     implicit none
 11 

 12     character (len=*), intent(IN) :: filA, filB, filO
 13     character (len=*), intent(IN) :: nomvara, nomvarb, newnomvar
 14 
 16     real, intent(IN) :: change
 17     logical, intent(IN) :: write_tictac
 18 
 19     logical, intent(IN), optional :: in_verbose
 21     logical :: verbose = .false.
 27     integer :: ier
...
117     ier = fstouv(iuna, 'RND')
118     IF (ier < 0) THEN
119         if (verbose) write(stderr,'(2A)') "Could not fstouv FST file ", trim(filA)
120     ELSE
121         nmax = fstnbr(iuna);
122         if (verbose) write(stdout,'(3A,I6,A)') "Succesfully opened ", trim(filA), ' with ', nmax, ' records'
123         allocate(liste(nmax))
124     END IF 
```

具体来说，它在尝试读取时在第 122 行（根据调试器）失败`filA`。

我不知道为什么，我试过：

*   使函数成为子程序
*   使函数成为 fortran 函数
*   使函数成为“纯”函数
*   具有返回值（这就是现在的情况，即`ier = ..`）
*   在代码中有`return`语句，删除`return`语句
*   尝试将内容打印到标准输出并记录文件

似乎数据没有正确传递。即使在调试器中，我也无法读取参数。

令人沮丧的是，在某一时刻，这只是工作..我已经检查了文件权限，检查了路径等。我可以从一个 fortran 包装器可执行文件中运行这个函数就好了。

有没有我错过的技巧？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:57:52.573

花了一段时间，需要额外的帮助（[像这样的问题](https://stackoverflow.com/questions/14131903/exc-bad-access-when-calling-fortran-function-from-c)）

基本上有两件事必须改变：

*   通过引用传递整数
*   正确接受字符串

第一个很简单，很简单`ier=func(..., &integer_var, ...)`

第二个涉及传递字符串的长度。可能有一种更简单的方法可以做到这一点（通过查找 \0 来感知字符串长度），但它们没有成功。所以，现在我通过

```
ier = func(str,strlen,...) 
```

然后在 Fortran 中，我接受字符串为

```
character(kind=c_char,len=strlen), intent(IN) :: str 
```

上面对fortran代码的具体改动是

```
11     use, intrinsic :: iso_c_binding
12     use interfaces_rmnutils
13     implicit none
16     integer(kind=c_int), intent(IN) :: len_filA, len_filB, len_filO
17     character (kind=c_char,len=len_filA), intent(IN) :: filA
18     character (kind=c_char,len=len_filB), intent(IN) :: filB
19     character (kind=c_char,len=len_filO), intent(IN) :: filO 
```

当它工作时，它一定是在我尝试将字符串读取为 之前`(len=*)`，并且整数作为引用传入，因此它们本质上具有随机值。

谢谢大家的其他！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:11:33.010

您的程序似乎破坏了堆栈。堆栈损坏通常伴随着指针的不当使用。在可疑函数调用之前仔细检查（使用调试器或简单的足迹调查变量的内容）。

# c# - 如何从另一个类返回主函数中的特定语句

> ID：14124696
> 
> 赞同：-3
> 
> 时间：2013-01-02T15:36:17.073
> 
> 标签：c#, c#-4.0, c#-3.0

我在某个类中有几个嵌套方法。首先是从主函数调用。现在，如果某个条件为真，我希望下一个执行的语句是 main 中的某个语句。怎么做？

```
class A {
      void a()
        {
            b();
            c();
        }
        void b()
        {
            e();
            c();
        }
 } 
```

如果 A 类中的任何函数中的某些条件为真，我想转到 B 类中的主函数，正好在调用 Aa() 之后的第一个语句上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:40:14.973

使用 Goto*标识符*

其中 Identifier 是您要在 main 中返回的点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:44:41.800

如果你想在 main 基于`function`then use执行某些东西`Func<bool>`，如果你的函数接受一个参数然后 use `Func<T in, bool>`。

**用法**

```
 var isInt2 = new Func<int, bool>(int i => i == 2);
  if (isInt2(2))
    Console.WriteLine("Do something in main"); 
```

在你的 lambda 之后`=>`你做你的条件。上面是一个例子`Func<T in, bool>`。

[http://msdn.microsoft.com/en-us/library/bb549151.aspx](http://msdn.microsoft.com/en-us/library/bb549151.aspx)

# java - Java SimpleDateFormat：一个小时错误

> ID：14124701
> 
> 赞同：13
> 
> 时间：2013-01-02T15:36:40.810
> 
> 标签：java, date, date-format

我不需要一个完整的故事来澄清我的问题，所以我将只显示代码（这只是一个示例）。为什么我的结果有差异？

**代码**

```
long millis = 2305293L;
System.out.println(
    millis + "ms = " + 
    (millis / 1000) + "s = " + 
    (millis / 1000 / 60) + "m");
System.out.println(
    new SimpleDateFormat("HH:mm:ss").
    format(
        new Date(millis)
        )
    ); 
```

**输出**

```
2305293ms = 2305s = 38m
01:38:25 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-02T15:39:01.510

如果您在伦敦或巴黎，则时区为 1970 年 1 月 1 日的 GMT+1。

由于@ARC 在评论中解释的原因，英国在 1968 年 2 月 18 日至 1971 年 10 月 31 日期间使用 GMT+1 或 UTC+1

> 我可以在没有任何时区干扰的情况下转换 long 吗？

将时区设置为 GMT。

```
long millis = 2305293L;
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss.SSS");
sdf.setTimeZone(TimeZone.getTimeZone("GMT"));
System.out.println(sdf.format(new Date(millis))); 
```

印刷

```
00:38:25.293 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:42:23.783

试试这个 ：

```
System.out.println(new java.util.Date (0)); 
```

您会看到它从 01:00:00 开始，因此相差一小时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-04T14:05:16.923

其他答案是正确的，并且是 2013 年提出问题时的好答案。今天我们不应该再使用`Date`nor `SimpleDateFormat`，所以我想向您展示几个现代代码片段。格式化（在这种情况下）2 305 293 毫秒的正确方法取决于它们所代表的内容。我针对三种不同的情况提出了三种选择。

## 格式化自纪元以来的毫秒数

您需要决定要在哪个时区解释您的时间点。例如：

```
 long millis = 2_305_293L;
    DateTimeFormatter formatter = DateTimeFormatter
            .ofLocalizedDateTime(FormatStyle.LONG)
            .withLocale(Locale.ENGLISH);
    ZonedDateTime dateTime = Instant.ofEpochMilli(millis)
            .atZone(ZoneId.of("America/Coral_Harbour"));
    String formattedTime = dateTime.format(formatter);
    System.out.println(formattedTime); 
```

> 美国东部时间 1969 年 12 月 31 日晚上 7:38:25

由于在时代珊瑚港处于 UTC 偏移量 -05:00，我们得到一个接近 1969 年底的时间。如果你想要 UTC 时间（因为时代是用 UTC 定义的；换句话说，如果你想要`00:38:25`），有点不同：

```
 DateTimeFormatter formatter = DateTimeFormatter
            .ofLocalizedDateTime(FormatStyle.MEDIUM)
            .withLocale(Locale.ENGLISH);
    OffsetDateTime dateTime = Instant.ofEpochMilli(millis)
            .atOffset(ZoneOffset.UTC); 
```

> 1970 年 1 月 1 日，上午 12:38:25

除了时区之外，您还可以通过语言环境来改变语言，并通过格式样式（完整、长、中、短）来改变格式的长度。如果您想要没有日期的一天中的时间，请使用`ofLocalizedTime`而不是`ofLocalizedDateTime`.

## 格式化一天的毫秒

假设您的毫秒是从 0:00（“午夜”）开始在任何时区：

```
 LocalTime time = LocalTime.MIN.with(ChronoField.MILLI_OF_DAY, millis);
    System.out.println(time); 
```

> 00:38:25.293

如果此格式令人满意，则不需要任何显式格式化程序。如果没有，您可以使用`DateTimeFormatter`.

## 格式化持续时间，时间量

时间量与时间是完全不同的东西，它被当作一个`Duration`对象来处理。没有直接支持格式化它，但从 Java 9 开始，它并不难（当你知道如何操作时）：

```
 Duration amountOfTime = Duration.ofMillis(millis);
    String formattedTime = String.format("%02d:%02d:%02d",amountOfTime.toHours(),
            amountOfTime.toMinutesPart(), amountOfTime.toSecondsPart());
    System.out.println(formattedTime); 
```

> 00:38:25

## 关联

[Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。

# asp.net - https 保活？

> ID：14124702
> 
> 赞同：0
> 
> 时间：2013-01-02T15:36:42.890
> 
> 标签：asp.net, iis, https, keep-alive, response-headers

我知道如何为 http 做这件事，而且[很容易](http://technet.microsoft.com/en-us/library/cc772183%28v=ws.10%29.aspx)。

但是你如何在 iis 中为 https 做呢？

如果上面链接的方法应该为 https 执行此操作，那么它不适用于我的，或者至少我没有收到`keep-alive`响应标头。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:52:38.440

如果您使用的是 HTTP 1.1，则根据 RFC2616 假定默认保持活动状态 - 即使对于 HTTPS 连接也是如此。

[https://www.rfc-editor.org/rfc/rfc2616#section-8.1](https://www.rfc-editor.org/rfc/rfc2616#section-8.1)

# ios - RestKit w/ CoreData 拯救 MOC 混乱

> ID：14124705
> 
> 赞同：2
> 
> 时间：2013-01-02T15:36:44.000
> 
> 标签：ios, core-data, restkit

所以我对 RestKit 如何与 CoreData 一起工作有点困惑。我熟悉CoreData（但我主要使用MagicalRecord）并且我正在尝试学习RestKit，但我对RestKit应该处理的所有文档感到困惑。我已经成功地从 REST Web 服务加载了一个 NSManagedObject 并且我有这个实体对象，但我不确定我是否应该处理这个实体到我的托管对象上下文的保存，或者这是否是 RestKit 会自动执行的事情。如果是后者，谁能指出我使用这些功能的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:51:46.473

好的，似乎是的，它确实自动神奇地做到了。我真正的问题是我从未设置过 ObjectManager 的持久存储，即使我认为是这样。现在，当我使用 'getObjects..' 方法时，一切都很顺利。

# mod-rewrite - mod重写所有url，除了包括（js/css/img/some php）

> ID：14124706
> 
> 赞同：1
> 
> 时间：2013-01-02T15:36:45.437
> 
> 标签：mod-rewrite, url-rewriting

我想要的是一种 Wordpress 类型的 URL 重写。

我现在拥有的是：

.htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ rewrite.php?data=$1 [L,QSA] 
```

这几乎可以重写除现有文件之外的所有内容（css、js 等文件未按预期重写）。

我遇到的问题是：

1.  `.css`, `.js`, 图像和 PHP 文件也可以通过输入文件名来访问。例如：`domain.com/style.css`任何人都可以访问。

2.  无论如何，我希望一些现有文件（现在只有 php）被重定向。例如：domain.com/movies.php 应该重定向到 rewrite.php（包括 404.php）和 domain.com/movies 或 domain.com/movies/ 将包括 movies.php 页面。

理想情况下，我还可以将用户输入的 URL 从 更改`domain.com/movies`为`domain.com/movies/`以保持一致性。

我想保持`.htaccess`在最低限度。wordpress 会重写包括`.css`文件在内的所有内容吗？

我想要的是：

1.  一些 php 文件不会重定向其他文件。例如：includes/func.inc.php 不应该被用户访问，而 movies.php 应该可以访问，但只能从这个 url domain.com/movies/

（不是必需的）

1.  将 url 更改为规范的 url，例如：domain.com/movies 到
    domain.com/movies/（有关如何实现这一点的一些资源会
    很好）。注意：domain.com/movies url 应该仍然可以工作，但通过重写或仅通过 javasript 添加斜杠（更快？）

2.  使用户无法访问 .css/.js 文件。例如：domain.com/style.css 应该将用户重定向到 404 页面

# ios - 如何判断应用程序在后台时是否触发了本地通知？

> ID：14124709
> 
> 赞同：0
> 
> 时间：2013-01-02T15:37:03.877
> 
> 标签：ios, iphone

如果在应用程序处于后台并且现在已进入前台时触发了本地通知，我需要运行特定代码。一种方法是获取徽章计数，有更好的方法吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-02T16:01:18.987

[在http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html)查看文档

您的 App Delegate 可以在应用处于后台时检测通知

```
 - (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif {

    NSString *itemName = [notif.userInfo objectForKey:ToDoItemKey]

    [viewController displayItem:itemName];  // custom method

    application.applicationIconBadgeNumber = notification.applicationIconBadgeNumber-1;

} 
```

# python - 熊猫数据框的两列 - Python中的Concat

> ID：14124710
> 
> 赞同：1
> 
> 时间：2013-01-02T15:37:07.807
> 
> 标签：python, pandas

熊猫 python 新手。

我有一个带有两列尖峰的数据框（df）。我想将这些列转换为两列的唯一条目列表。

我的第一次尝试是执行以下操作：

cusips = pd.concat(df['long'], df['short'])。

这返回了错误：具有多个元素的数组的真值不明确。使用 a.any() 或 a.all()。

我已经阅读了一些帖子，但我仍然不知道为什么会出现这种情况。我在这里想念什么？

另外，在列或数据框中选择唯一条目的最有效方法是什么？我可以在一个函数中调用它吗？如果我想创建一个列表或一个新的单列数据框，函数会有所不同吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:52:26.043

要获取列中的唯一值，您可以使用[`unique`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.unique.html#pandas.Series.unique)Series 方法，该方法将返回唯一值的 numpy 数组*（而且速度很快！）*。

```
df.long.unique()
# returns numpy array of unique values 
```

然后你可以使用[`numpy.append`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.append.html)：

```
np.append(df.long.unique(), df.short.unique()) 
```

注意：这只是将两个唯一结果附加在一起，因此本身不是唯一的！

.

这是一个（微不足道的）示例：

```
import pandas as pd
import numpy as np
df = pd.DataFrame([[1, 2], [1, 4]], columns=['long','short'])

In [4]: df
Out[4]: 
   long  short
0     1      2
1     1      4

In [5]: df.long.unique()
Out[5]: array([1])

In [6]: df.short.unique()
Out[6]: array([2, 4]) 
```

然后[附加生成的两个数组](https://stackoverflow.com/a/9775378/1240268)：

```
In [7]: np.append(df.long.unique(), df.short.unique())
Out[7]: array([1, 2, 4]) 
```

使用@Zalazny7 的`set`速度明显更快（因为它只在数组上运行一次），而且有点令人不安的是，它甚至比*（对结果数组进行排序！）*还要快。[`np.unique`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:01:16.067

除了海登的答案，您还可以使用该`set()`方法获得相同的结果。如果考虑到这一点，性能会稍微好一些：

```
In [28]: %timeit set(np.append(df[0],df[1]))
100000 loops, best of 3: 19.6 us per loop

In [29]: %timeit np.append(df[0].unique(), df[1].unique())
10000 loops, best of 3: 55 us per loop 
```*

# asp.net - crredist2005_x64 是免费的吗？

> ID：14124716
> 
> 赞同：0
> 
> 时间：2013-01-02T15:37:42.740
> 
> 标签：asp.net, crystal-reports, c#-2.0

为什么我要问这个问题？我的故事是我开发了一个 c# asp.net 2005 应用程序。我的 Windows 是 xp 32 位。生产服务器是 windows server 2008 R2 Standard

当我移动到生产服务器时，我遇到了这个错误：

'无法加载程序集 CrystalDecisions.Enterprise.Framework 的文件，版本=10.2.3.600.0 系统找不到指定的文件。

1- 当我收到这个错误时，我去了我的项目并添加了所有 Crystal 引用。然后我再次重新编译了项目，但我仍然面临同样的错误。

2-经过几天的搜索，我发现一篇文章说我必须在生产服务器上下载并安装 crredist2005_x64，我所有的噩梦都会结束。

如果 crredist2005_x64 是免费的，请告诉我如果不告诉我该怎么做？感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:03:45.637

当我去 SAP 并查找文件时，它并没有说明与它相关的成本。

# javascript - 如何使用 ASP/JavaScript/HTML 从下拉列表中全选

> ID：14124717
> 
> 赞同：0
> 
> 时间：2013-01-02T15:37:50.073
> 
> 标签：javascript, html, asp-classic

我有一个我正在开发的软件，它允许您选择位置并显示在地图上。我想添加功能以使用按钮选择所有位置并在地图上显示信息。

我是编码新手，因此还没有真正编写任何代码。我一直在网上搜索，但无济于事，这就是为什么我来这里问你们这些可爱的人。

您提供的任何建议或链接将不胜感激。

函数 checkAddAllName(mode){

```
 var Name = document.getElementById('select_'+mode+'_ID').options[document.getElementById('select_'+mode+'_ID').selectedIndex].text;
    var Name = document.getElementById('select_'+mode+'_ID').options[document.getElementById('select_'+mode+'_ID').selectedIndex].value;

    var errorCount = 0;
    var Name = 0;
    var allStations = document.getElementsByTagName('input');

    for (var i=0; i<allNames.length; i++){
        if (allNames[i].id.substring(0,10) == 'StationNo_'){
            var splitID = allNames[i].id.split("_");
                if (splitID[1] == mode){
                    if (allNames[i].value == addedNameNo){
                        errorCount = 1;
                    }
                }
        }
    }

    if (errorCount == 0){
        addNAme(mode);
    } else {
        alert(addedName+' has already been added!');
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:23:32.913

假设您的意思是普通的单选下拉菜单，如下所示：

```
<select id="ddlSelectCountry" onchange="SelectCountry(this);">
    <option value="">Please select..</option>
    <option value="USA">USA</option>
    <option value="France">France</option>
    <option value="Spain">Spain</option>
</select> 
```

您可以使用这样的按钮来自动选择所有非空项目：

```
<button type="button" onclick="SelectAll('ddlSelectCountry');">Select All</button>​ 
```

用于此的 JavaScript 将是：

```
function SelectAll(strDropDownId) {
    var oDDL = document.getElementById(strDropDownId);
    if (!oDDL) {
        alert("No such element: " + strDropDownId);
        return;
    }
    for (var i = 0; i < oDDL.options.length; i++) {
        if (oDDL.options[i].value.length > 0) {
            oDDL.selectedIndex = i;
            if (oDDL.change)
                oDDL.change();
            else if (oDDL.onchange)
                oDDL.onchange();
        }
    }
} 
```

使用 jQuery 可以大大缩短代码的长度并使其更加优雅，但这是您的选择。

[现场测试用例](http://jsfiddle.net/GHEsA/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:01:29.780

最好使用 jQuery 之类的库来执行此操作。一开始你会花一些时间来学习，但它会在你剩下的网络编程日子里得到回报。

假设您的位置是复选框的无序列表，例如：

```
<ul id='listId'>
   <li><input type="checkbox value="London">London</li>
   <li><input type="checkbox value="Paris">Paris</li>
   <li><input type="checkbox value="Buenos Aires">Buenos Aires</li>
</ul>
<button id="selectAll">Select all</button> 
```

在 jQuery 中，您会执行以下操作：

```
$('button#selectAll').on("click",function(){
  $('ul#listId > li > input').prop('checked',true);
}); 
```

# sql - 用于统计投票结果的简单 SQL 查询

> ID：14124722
> 
> 赞同：1
> 
> 时间：2013-01-02T15:38:00.463
> 
> 标签：sql, sql-server, tsql

根据下面显示的数据库模式，从 PollResponses 表中为特定 PollId 计算轮询结果的最佳和有效方法是什么

![在此处输入图像描述](../Images/60d0038de8fe309e9f9d039dd2691575.png)

如果我们对该特定民意调查有四个选项，我想拥有以下类型的数据

```
optionText
count
optiontext
count
optiontext
count
optiontext
count 
```

例子

```
Obama
2000
Romney
1800
Clinton
3000
Xyz
1200 
```

总共提取了 8 行

我正在使用 SQL Server 2012 sp1 更新

使用以下查询

```
select options.OptionText as [optionText]
,count(responses._id) as [count]
from Polls polls
inner join PollOptions options on options.PollId = polls._id
inner join PollResponses responses on responses.PollId = polls._id
where polls._id = 104
group by options.OptionText, polls._id 
```

用 pollresponse 表的这个数据 ![在此处输入图像描述](../Images/5d22dd0509f2d84944fe6f4a3381262f.png)

我得到这个结果

![在此处输入图像描述](../Images/6c31cb3dc5e82dd5a1bc59998a13d1b1.png)

而我应该得到 No 0 Yes 1

所有三个表的当前数据

1.  民意调查

![在此处输入图像描述](../Images/c0ac649bb46eba3855c84cc37dfdc745.png)

2.  轮询选项

![在此处输入图像描述](../Images/57c8f7f50e6fa0f3639746b2c4fc6750.png)

3.  投票响应

![在此处输入图像描述](../Images/aabcba602afc6cf6b4070367d45d7a03.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:44:08.293

虽然我没有你的数据可以使用，但这里有一个非常粗略（即未经测试）的关于你应该做什么的想法。您基本上是`INNER JOIN`您的表格，然后使用聚合函数`COUNT`来计算每个分组候选人的所有响应。

```
select options.OptionText as [optionText]
,count(responses._id) as [count]
from Polls polls
inner join PollOptions options on options.PollId = polls._id
inner join PollResponses responses on responses.PollId = polls._id
where polls._id = @pollid
group by options.OptionText, polls._id 
```

关于效率，我可以看到您正在使用主键和外键约束；您可以进行的另一项性能改进是在您的表`OptionText`上索引您的列`PollOptions`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:25:52.413

我相信这会返回你想要的结果：

```
select po.optiontext,
  count(pr.optionid) Total
from PollOptions po
left join polls p
  on p._id = po.pollid
left join pollresponse pr
  on p._id = pr.pollid
  and pr.optionid = po._id
-- where p._id = 104
group by po.optiontext; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/33efe/24)

根据您提供的示例数据，结果将是：

```
| OPTIONTEXT | TOTAL |
----------------------
|     HOD IT |     1 |
|   HOD Mech |     1 |
|     Mr. CS |     2 |
|         no |     0 |
|        yes |     1 | 
```

编辑，如果您想按选项 id 对数据进行排序，那么您必须将其包含在`group by`：

```
select po.optiontext,
  count(pr.optionid) Total
from PollOptions po
left join polls p
  on p._id = po.pollid
left join pollresponse pr
  on p._id = pr.pollid
  and pr.optionid = po._id
--where p._id = 104
group by po.optiontext, po._id
order by po._id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/33efe/29)

结果：

```
| OPTIONTEXT | TOTAL |
----------------------
|     Mr. CS |     2 |
|     HOD IT |     1 |
|   HOD Mech |     1 |
|        yes |     1 |
|         no |     0 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T15:43:14.827

```
SELECT 
    po.OptionText AS [optionText],
    COUNT(pr._id) AS [count]
FROM PollResponses pr
JOIN Polls p ON (p._id = pr.PollID)
JOIN PollOptions po ON (po.PollID = p._id)
WHERE p._id = @pPollId
GROUP BY po.OptionText, pr._id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T16:18:05.610

我相信您编写的查询缺少 join 。. . 您显示的 ER 图中也缺少这点。但是，结果表有一个 OptionID。据推测，给定的民意调查有多个选项。所以试试这个：

```
select options.OptionText as [optionText], polls._id, count(responses._id) as [count]
from Polls polls inner join
     PollOptions options
     on options.PollId = polls._id inner join
     PollResponses responses
     on responses.PollId = polls._id and responses.OptionId = options._Id
where polls._id = 104
group by options.OptionText, polls._id 
```

如果未连接响应和选项，则无法直接获取每个选项的响应数。

# c# - 使用 VisualStudio 和 WebBrowser Windows.Forms 控件进行多线程调试

> ID：14124723
> 
> 赞同：-1
> 
> 时间：2013-01-02T15:38:01.607
> 
> 标签：c#, winforms, multithreading, visual-studio

我们在 Windows.Forms 解决方案中创建了几个线程。

我们还有一个 BrowserControl（是的，它是 OAUTH），当然我发现调试问题 -

> 跨线程操作无效：控件“xxForm”从创建它的线程以外的线程访问

然而我叫'正确'

> xxForm.Show()

通过确保它包含在调用调用中

> .Invoke(新的 MethodInvoker())

我仍然得到线程问题。我可以做其他所有事情（Focus，BringToFront），这是显示错误。

此外，GUI 永远不会得到浏览器的响应和显示。在 VS 调试器中，我得到了上述线程错误（后台线程的公寓状态 == MTA）。当作为 EXE 运行时，相同的代码具有 STA 的线程 aparement，并且 GUI 在调试时永远不会显示，但如果我直接运行 EXE，则没有线程问题，浏览器控件永远不会响应输入。

Spo的问题是：

*   为什么 VS / EXE 中的行为不同？
*   如何在 VS 中调试？
*   BrowserControl 是否可以与多个线程一起使用？

**更新**

是的，我知道没有代码 - 它太长了。我会看看我能做什么。

另外，请在发布答案之前阅读问题。我在 UI 线程上调用后台线程。那不是问题。这对结果没有影响。我会否决建议的答案。

还有一些希望 - 我已经搜索了很多小时。它链接了消息泵。除非消息泵正在运行，否则不会收到 DocumentCompleted 事件。

**更新 2** 我管理的最好的是伪代码：

程序：

```
 startWorkQueue
 LoadForm (don't show) 
```

线程1：

```
 addToQueue 
```

线程2：

```
 readFromQueue
 ShowForm (on occasion) 
```

现在 ShowForm 方法位于 Windows.Form 控件上。在此范围内，任何调用都是通过 Invoke 进行的，因此尽管第二个线程调用 ShowForm，但实际的 .Show() 等调用仍在 UI 线程上。

那么我错过了什么？我只是不明白为什么会有跨线程异常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:21:07.557

好的，我已经知道发生了什么，我会在这里发布以供参考。我希望它对将来的人有所帮助。

我们对 vanilla Forms 应用程序有一些不同的限制——我们的 Forms 是在主线程上创建的，但 Show() 在不同的线程上调用。我们也没有启动 UI - 我们坐在后台，有时会通过 UI 提示对事件做出反应。

因此，我们遇到了许多问题。我不会将它们全部列出来，而是详细说明我们的要点：

**应用程序运行**

*   如果决定在您的应用程序开始时不显示表单……那么您需要仔细考虑线程（请参阅 Form.Show 注释）

**表格显示**

*   这会完成所有资源分配等，而不是 Load/ctor
*   执行句柄创建/资源分配

**处理创建**

*   Hwnd
*   如果我们尝试在某些 Form 属性具有 Show(n) 之前访问它，那么您需要手动创建一个句柄（或创建一个异常）

    • 一样容易`if (!IsHandleCreated) { CreateHandle(); }`

**然而**

*   这将创建控件/表单
*   因此，控件/表单是在调用 Handle create 的线程上创建的
*   这必须是与 Main 函数相同的 UI 线程 (STA)

    • 否则会发生很多奇怪的事情

**所以**

*   您不受使用 Application.Run 的限制
*   您可以访问 .Show 中的属性（但您可能需要先创建一个句柄）
*   您可以从不同的线程调用 Show，但请确保仅在主线程上创建句柄

希望对您有所帮助，如果需要，我可以提供有关我们具体问题的更多详细信息。

各种帮助包括在日志中显示 ManagedThread 和 ProcessId 以及搜索 MSDN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:52:58.523

由于代码还没有粘贴，我想提醒你，在 WinForms 中，UI 元素应该只能在 UI 线程上访问。除了 UI 线程之外的任何其他线程都不应直接更新 UI 元素。

# mysql - 什么样的索引用于 varchar 字段，我只需要检查是否存在某些东西？

> ID：14124728
> 
> 赞同：0
> 
> 时间：2013-01-02T15:38:40.387
> 
> 标签：mysql, indexing

这是我当前的表格；

```
CREATE TABLE `linkler` (
  `link` varchar(256) NOT NULL,
  UNIQUE KEY `link` (`link`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

我只会在表上使用这两个查询，`SELECT EXISTS (SELECT 1 FROM linkler WHERE link = ?)`并且`INSERT INTO linkler (link) VALUES (?)`

我对索引数据库了解不多。因为我不会两次添加相同的东西，所以我认为将其标记为唯一是个好主意。我能做些什么来提高性能吗？例如，我可以做一些总是对行进行排序的事情，以便 mysql 可以进行二进制搜索或类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:42:43.630

添加唯一索引是完美的。此外，由于您有一个唯一索引，因此在插入之前不需要检查是否存在。如果行不存在，您可以简单地使用`INSERT IGNORE`它来插入行（如果存在则忽略错误）：

```
INSERT IGNORE INTO linkler (link) VALUES (?) 
```

这是否比执行 SELECT/INSERT 组合更快取决于您期望重复的频率。

ETA：如果这是此表中的唯一列，您可能希望将其设为 a`PRIMARY KEY`而不仅仅是 a，`UNIQUE KEY`尽管我认为除了为了清楚起见之外，它真的很重要。

# objective-c - Objective-c 编码

> ID：14124730
> 
> 赞同：0
> 
> 时间：2013-01-02T15:38:46.330
> 
> 标签：objective-c, coding-style

我真的对使用礼仪感到困惑。如果我声明这个

> @property (nonatomic, strong) NSString* aString;

这有什么区别

> 1.@synthesize aString = _aString

和

> 2.@synthesize 字符串；

如果我想使用它，有什么区别：

```
3\. anOtherString = aString; 
```

和

```
4\. anOtherString = self.aString; 
```

和

```
5\. anOtherString = _aString; 
```

我知道 _aString 是 ivar，但问题是 1、2、3、4、5 之间的组合。

例如，如果我使用 2 和 4，我是在传递对 anOtherString 的引用还是它的副本？我通常使用 2 和 4 是传递参考的最佳选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:48:13.100

当您使用您的`@synthesize`声明时，这会为您生成 getter/setter。当您使用`@synthesize`声明时`@synthesize aString = _aString`，您正在制作它，以便您的 getter/setter 方法将使用`setAString`and `aString`。您正在创建一个名为`_aString`. 这意味着在你的类中，你可以通过调用来获取这个变量

```
NSString *tempString = _aString; 
```

或者

```
NSString *tempString = self.aString; 
```

后者使用生成的 getter 方法来检索`aString`.

您还可以使用以下方法设置变量：

```
_aString = @""; 
```

或者

```
self.aString = @""; 
```

后者使用生成的setter方法。这非常重要，因为如果您已将属性声明为保留（现在为强）或复制，那么您的 setter 方法会执行一些您可能不知道的逻辑（请查看强/复制/弱属性）。本质上，如果您有一个强大的属性并且您使用生成的 setter，您的代码会释放它对该变量的先前引用，并创建一个对您分配给变量的内容的强引用。

我个人尝试始终使用 getter/setter 方法，除非它是弱引用（那么它真的没关系）。我通常也总是使用该`@synthesize aString = _aString`方法，以便我可以`aString`选择命名方法参数。它有助于避免命名冲突。

如果我能以任何方式澄清，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:53:00.963

你的答案在这里：

```
1.@synthesize aString = _aString 
```

回答：您的属性名称是 aString，但您正在创建别名 _aString。现在您可以访问aString，您的访问器只能由_aString 使用。从 Xcode4.4 开始，此语句默认出现。

```
2.@synthesize aString; 
```

Ans: 这是 Objective-c 合成属性的基本风格。从 Xcode4.4 开始，此语句将覆盖上述语句。

```
3.anOtherString = aString; 
```

您正在通过引用变量/别名访问该属性。

```
4.anOtherString = self.aString; 
```

您正在使用访问器来获取其值。

```
5.anOtherString = _aString; 
```

您正在访问该属性本身。

`I usually use 2 and 4 is that the best choice for passing a reference ?`

Ans : 这是一个很好的方法，作为self。使您的类 KVC 兼容。

# android - android.os.NetworkOnMainThreadException 上的服务启动在 android

> ID：14124739
> 
> 赞同：9
> 
> 时间：2013-01-02T15:39:01.507
> 
> 标签：android, service, logcat, onstart, networkonmainthread

在android上尝试了我的全新服务后，我得到了这个：

我猜是与清单文件和权限有关的东西，该服务在最后一个活动之后启动，以更新服务器上的数据并检索新数据并在 android 上的 sqlite 上保存 id：

这里还有清单文件：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.ggservice.democracy"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="17" />
        <uses-permission android:name="android.permission.INTERNET"/>

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name="com.ggservice.democracy.MainActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <activity android:label="@string/app_name" android:name="com.ggservice.democracy.sondaggioActivity"/>
            <activity android:label="@string/app_name" android:name="com.ggservice.democracy.domandeDiCategoria"/>
            <service android:name="com.ggservice.democracy.updateDemocracyService" />
        </application>

    </manifest> 
```

日志猫：

```
01-02 15:33:30.960: W/dalvikvm(2570): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
01-02 15:33:31.160: E/AndroidRuntime(2570): FATAL EXCEPTION: main
01-02 15:33:31.160: E/AndroidRuntime(2570): java.lang.RuntimeException: Unable to start service com.ggservice.democracy.updateDemocracyService@412f0c60 with Intent { cmp=com.ggservice.democracy/.updateDemocracyService }: android.os.NetworkOnMainThreadException
01-02 15:33:31.160: E/AndroidRuntime(2570):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2376)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at android.app.ActivityThread.access$1900(ActivityThread.java:123)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at android.os.Looper.loop(Looper.java:137)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at java.lang.reflect.Method.invokeNative(Native Method)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at java.lang.reflect.Method.invoke(Method.java:511)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at dalvik.system.NativeStart.main(Native Method)
01-02 15:33:31.160: E/AndroidRuntime(2570): Caused by: android.os.NetworkOnMainThreadException
01-02 15:33:31.160: E/AndroidRuntime(2570):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at com.ggservice.democracy.JSONParser.getJSONFromUrl(JSONParser.java:38)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at com.ggservice.democracy.updateDemocracyService.onStartCommand(updateDemocracyService.java:47)
01-02 15:33:31.160: E/AndroidRuntime(2570):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2359)
01-02 15:33:31.160: E/AndroidRuntime(2570):     ... 10 more 
```

难道我做错了什么？

这也是服务：

```
public class updateDemocracyService extends Service{
    private pollDataSource datasource;
     int mStartMode;       // indicates how to behave if the service is killed
        IBinder mBinder;      // interface for clients that bind
        boolean mAllowRebind; // indicates whether onRebind should be used
        // url to make request
        private static String url = "http://www.test.com/democracy/domande.php";

        // JSON Node names
        private static final String TAG_DOMANDE = "domande";
        private static final String TAG_ID = "id";
        private static final String TAG_TESTO = "testo";

        // contacts JSONArray
        JSONArray contacts = null;

        @Override
        public void onCreate() {
            // The service is being created
            datasource = new pollDataSource(this);
            datasource.open();

        }
        @Override
        public int onStartCommand(Intent intent, int flags, int startId) {

            // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(url);

            try {
                // Getting Array of Contacts
                contacts = json.getJSONArray(TAG_DOMANDE);

                // looping through All Contacts
                for(int i = 0; i < contacts.length(); i++){
                    JSONObject c = contacts.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String name = c.getString(TAG_TESTO);
                    datasource.createCategoria(name);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            Toast.makeText(this, "ho comunicato con un server!", Toast.LENGTH_LONG).show();  
            return mStartMode;
        }
        @Override
        public IBinder onBind(Intent intent) {
            // A client is binding to the service with bindService()
            return mBinder;
        }
        @Override
        public boolean onUnbind(Intent intent) {
            // All clients have unbound with unbindService()
            return mAllowRebind;
        }
        @Override
        public void onRebind(Intent intent) {
            // A client is binding to the service with bindService(),
            // after onUnbind() has already been called
        }
        @Override
        public void onDestroy() {
            datasource.close();
            // The service is no longer used and is being destroyed
        }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T15:44:22.823

发生这种情况是因为您正在主线程上执行网络操作，而这在 Android 3.0 及更高版本上是不允许的。即使它在服务中，服务也会在 UI 线程上运行，除非您专门在另一个线程中启动它们或在其中创建一个线程。

您可以通过使用[Thread](http://developer.android.com/reference/java/lang/Thread.html)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在主 UI 线程之外的服务中运行任务来解决此问题。

`onStartCommand()`按照@CommonsWare 的建议，尝试在 中创建一个新线程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-17T21:10:11.083

创建函数：

```
Thread thread = new Thread(new Runnable(){
    @Override
    public void run() {
       .......
    }
}); 
```

并从**onStartCommand调用它**

```
thread.start(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T15:43:24.077

[根据文档](http://developer.android.com/guide/components/services.html)，即使您使用 a`Service`来执行长时间运行的操作，服务本身也会在应用程序的主线程上运行。因此，您必须生成一个新线程来执行可能需要长时间运行的任务，例如网络访问。

Android[`StrictMode`](http://developer.android.com/reference/android/os/StrictMode.html)实际上会检查在主线程上执行的网络操作并抛出一个`NetworkOnMainThreadException`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T15:50:53.290

试试这个。[如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

仔细阅读此线程。

我希望这能解决你的问题。

# facebook - FBDialog scrollViewDidScroll 无法识别的选择器

> ID：14124742
> 
> 赞同：0
> 
> 时间：2013-01-02T15:39:15.687
> 
> 标签：facebook, ios5, sdk, ios6

我正在按照这个简单的[如何](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)让 Facebook 同时使用 iOS5 和 iOS6。

这在 iOS6 上运行良好，但在 iOS5 上出现以下错误。

对话框正在出现，但由于我尝试触摸屏幕，因此应用程序崩溃了。

这是代码：

```
// Invoke the dialog
[mainDelegate.facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

这是错误：

```
-[FBDialog scrollViewDidScroll:]: unrecognized selector sent to instance 0x40b4550 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:07:36.550

```
@implementation UIWebView(CustomScroll)
- (void) scrollViewDidScroll:(UIScrollView *)scrollView{
    [self.delegate scrollViewDidScroll: scrollView];
}
@end 
```

问题是由我正在导入的类中的此代码引起的。

# python - 是否可以在 Python 中看到刚刚调用的函数的变量范围？

> ID：14124743
> 
> 赞同：0
> 
> 时间：2013-01-02T15:39:15.900
> 
> 标签：python, reflection, scoping

关于函数变量范围和返回，我有一个相当奇怪的问题。被调用函数返回值后，有什么方法可以检查调用者中被调用函数的范围？

用例很简单：在 Flask 视图中，我想绕过`locals()`我的模板。我可以按照惯例定义我需要的模板，并且在每个视图中都返回一个字典让我很困扰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:46:21.227

函数返回后，其作用域不再存在。这使得在函数返回*后获取范围变得有问题。*

但是，使用 Python 的跟踪或配置文件功能，可以在函数*即将*返回时运行一些代码，并在那时从其堆栈帧中提取局部变量。然后可以将它们隐藏在某个地方，并使用包装函数与（或代替）被调用函数的返回值一起返回。

这是一个可以用于这个邪恶目的的装饰器。请记住，这个实现是一个可怕的 hack，仅仅为了方便而使用它是不好的风格。我可能会想到合法用途……给我几天时间。此外，它可能不适用于非 CPython 实现（实际上可能不会）。

```
import sys, functools

def givelocals(func):

    localsdict = {}

    def profilefunc(frame, event, arg):
        if event == "call":
            localsdict.clear()
        elif event == "return":
            localsdict.update(frame.f_locals)
        return profilefunc    

    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        oldprofilefunc = sys.getprofile()
        sys.setprofile(profilefunc)
        try:
            return func(*args, **kwargs), dict(localsdict)
        except Exception as e:
            e.locals = dict(localsdict)
            raise
        finally:
            sys.setprofile(oldprofilefunc)

    return wrapper 
```

例子：

```
@givelocals
def foo(x, y):
    a = x + y
    return x * y

>>> foo(3, 4)
(12, {'y': 4, 'x': 3, 'a': 7}) 
```

如果你有一些你想使用的任意函数，因为它在你没有编写的模块中，所以你不能装饰它，你可以动态创建包装器并调用它：

```
def foo(x, y):
    a = x + y
    return x * y

>>> givelocals(foo)(3, 4)
(12, {'y': 4, 'x': 3, 'a': 7}) 
```

或者存储包​​装器并稍后调用它：

```
locals_foo = givelocals(foo)
>>> locals_foo(3, 4)
(12, {'y': 4, 'x': 3, 'a': 7}) 
```

包装器返回实际返回值和本地字典的元组。如果引发异常，`.locals`则异常对象的属性设置为 locals dict。

请记住，通常 Python 在函数返回时会释放局部变量使用的内存。保留这些值将导致您的程序使用更多内存（只要有对它们的引用），因此当您不再需要它们时清理它们是个好主意。

最后一点：我在这里使用 Python 的配置文件功能，因为它仅在函数调用和返回时调用。如果您使用的是 2.6 之前的 Python 版本，则没有分析功能，因此您需要使用跟踪。profile 函数也可以用作编写的跟踪函数，您只需要使用`gettrace()`and`settrace()`而不是相应的 profile 相关函数。但是，由于对每一行都调用了跟踪，因此包装的函数可能会明显变慢。

# php - 可翻译 Doctrine 实体的 Symfony 表单

> ID：14124748
> 
> 赞同：3
> 
> 时间：2013-01-02T15:39:30.047
> 
> 标签：php, symfony, doctrine, symfony-forms

我有一个使用[Translatable Doctrine 扩展](https://github.com/l3pp4rd/DoctrineExtensions)翻译的 Doctrine 实体：

```
<?php
namespace Myapp\ProductBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;
use Gedmo\Translatable\Translatable;

/**
 * @ORM\Table(name="product_property")
 * @ORM\Entity()
 * @Gedmo\TranslationEntity()
 */
class Property implements Translatable
{
    /**
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @Gedmo\Translatable
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /**
     * @ORM\OneToMany(
     *   targetEntity="PropertyTranslation",
     *   mappedBy="object",
     *   cascade={"persist", "remove"}
     * )
     */
    private $translations;

    /**
     * @Gedmo\Locale
     * Used locale to override Translation listener`s locale
     * this is not a mapped field of entity metadata, just a simple property
     */
    private $locale;

    public function setTranslatableLocale($locale)
    {
        $this->locale = $locale;
    }

    public function getTranslations()
    {
        return $this->translations;
    }

    public function addTranslation(PropertyTranslation $t)
    {
        if (!$this->translations->contains($t)) {
            $this->translations[] = $t;
            $t->setObject($this);
        }
    }
} 
```

现在，我想在我的翻译中提供的每种语言中呈现一个带有“名称”属性输入字段的表单。

怎么做最好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:19:56.203

似乎以下捆绑包能够完全满足我的要求：[https ://github.com/a2lix/TranslationFormBundle](https://github.com/a2lix/TranslationFormBundle)

![在此处输入图像描述](../Images/1a36d71a990b54255df06c62981eb0f6.png)

# entity-framework - 为 Azure 缓存序列化实体框架对象

> ID：14124749
> 
> 赞同：4
> 
> 时间：2013-01-02T15:39:35.900
> 
> 标签：entity-framework, azure, azure-caching

我们直接使用 Azure 缓存（而不是通过可用的实体框架包装器之一）。显然，对于分布式缓存，我们需要序列化对象。不幸的是，这会导致用于导航属性的基于 DbContext 的延迟加载代理出现问题。

我看到我们可以使用[自定义序列化](http://msdn.microsoft.com/en-us/library/windowsazure/hh552969.aspx)程序将代理映射到空集合（如果未加载）或普通对象（如果已加载），但我不确定实现。一种可能的实现可以基于[WCF 使用的](http://msdn.microsoft.com/en-us/library/vstudio/ee705457%28v=vs.100%29.aspx)实现，但我不确定 Azure 的工作方式是否相同。

理想的解决方案（这就是我指向 ProxyDataContractResolver 的原因）是在序列化发生时：

*   如果导航属性已经加载，数据将被序列化，就好像它是一个普通的集合一样，
*   如果它们没有被加载，它们将不会被序列化（对于后一种情况，我希望延迟加载在反序列化后恢复工作，但如果不加载也是可以接受的）。

有没有人以优雅的方式手动解决了这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:26:18.637

我假设如果您想要缓存 EF 对象，则不需要延迟加载或对这些实体进行更改跟踪。

我相信这两者都是通过对象代理启用的，这会导致序列化问题（因为您不想序列化代理）。

如果禁用属性**DbContext.Configuration.ProxyCreationEnabled**则实际对象的序列化，而不是代理，应该可以正常工作。这通常在通过 WCF 返回 POCO 对象时是必需的，但对于其他序列化场景（例如这种情况）可能相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:06:36.207

如果在序列化之前将 EF 实体从 DbContext 中分离出来，则会禁用延迟加载，因此您的自定义序列化程序不会尝试序列化任何不属于实体图的任何内容。

然后，当您从缓存中取回它时，如果您将它附加到一个新的（相同的）DbContext，那应该会重新启用延迟加载。

（警告：一旦你将实体从上下文中分离出来，任何包含相同对象的新查询都将创建一个新的、附加的、副本，因此你需要小心编码以避免遇到多个可能不同版本的问题同一个对象跑来跑去。但这就是说，这应该让你做你想做的事。）

# c# - 如何在实时绘图中提高 Tchart 的性能？

> ID：14124751
> 
> 赞同：0
> 
> 时间：2013-01-02T15:39:47.657
> 
> 标签：c#, teechart

我正在开发一个应用程序，其中至少有一个 tchart 和 4 条快线。tcharts 的最大数量为 16，具体取决于几个标准。每条快线在不同情况下包含不同的样本数。这是现在的问题。如果我的样本数少于 200-250。然后我可以看到图表是实时绘制的。现在随着样本数量的增加，绘制图表的延迟会变得很长。因此，假设每个 fasline 有 1000 个样本，那么图表中总共有 4000 个样本。最多可以有 16 个这样的图表。我注意到延迟高度依赖于 fastline 包含的样本数量和图表中的 fastlines 数量。我已经对 autorepaint = false 进行了更改。我有 chart1.autorepaint = false series1.autorepaint = false 以及系列 2、3、4。每次我在 fastline 中添加一个值时，我必须手动执行chart1.refresh()，这又需要很长时间，因为它刷新了其中的所有4条快线。延迟也可能与 series1.add() 有关，但我不确定。我能做些什么来避免延误吗？

这是我正在使用的代码。

```
 public void PlotActualValuesUpToSampleNumber(int SampleNumber)
     {      
            int DataPoint;
            Chart1.AutoRepaint = false;
            for (DataPoint = LastActualSamplePlotted + 1; DataPoint <= SampleNumber; DataPoint ++ )
            {

                    if (Imp.ThisSampleContainsFault[ChannelNumber, DataPoint])
                    {

                        Chart1.Panel.Gradient.Visible = false;
                        Chart1.Panel.Color = Imp.ChartBackgroundColorIfFault;

                    }

                    Series4.Add(Imp.ActualValue[ChannelNumber, DataPoint], "", Color.Yellow);

                   LastActualSamplePlotted ++;

            }
            Chart1.Refresh();
            Chart1.AutoRepaint = true;               
     } 
```

我能做些什么来避免延误吗？我已经提到了这些链接。 [http://www.teechart.net/reference/articles/VCLRealtime.htm](http://www.teechart.net/reference/articles/VCLRealtime.htm) http://www.teechart.net/support/viewtopic.php?p=47388 [http://www.teechart.net/support/viewtopic。 php?t=5127](http://www.teechart.net/support/viewtopic.php?t=5127) http://stackoverflow.com/questions/11977423/performance-issue-with-tchart

但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:53:28.387

性能主要受图表必须处理的数据量的影响。不同的代码解决方案和环境在这里也可能非常有影响力。所以我的建议是：

1.  您是否尝试过将数据数组直接注入到 Sandra 在[此处](http://www.teechart.net/support/viewtopic.php?p=47388#p47388)发布的第二个示例中？[这与 VCL实时图表](http://www.teechart.net/reference/articles/VCLRealtime.htm)文章中的原理相同。

2.  你试过 TeeChart 的 Direct 2D 版本吗？[您可以在此处](http://www.steema.com/entry/37/NEW_Release_Digital_Signal_Processing_with_TeeChart_for_.NET)找到有关其性能的白皮书。

3.  我强烈建议您查看 TeeChart 程序组提供的功能演示中以下部分的示例。

*所有功能\欢迎！\图表样式\标准\快速线*

*所有功能\欢迎！\速度*

如果您仍然没有得到预期的结果，请[向我们发送](http://www.steema.net/upload/)一个简单的示例项目，我们可以“按原样”运行以在此处重现问题。

# crystal-reports - 如何在 Crystal Reports 中将文本旋转 45 度？

> ID：14124755
> 
> 赞同：4
> 
> 时间：2013-01-02T15:40:10.127
> 
> 标签：crystal-reports, rotation

我希望 Crystal Report 上的文本字段旋转 45 度。我怎样才能做到这一点？文本字段选项仅允许 90 度和 270 度旋转。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:40:10.127

Crystal Report 不支持这一点（至少不支持 CR XI），但只要文本是静态的，就有一种解决方法：

*   插入 Excel 电子表格作为新的 OLE 对象。
*   在单元格 A1 中键​​入所需的文本。
*   应用所需的格式并调整行和列的高度和宽度。
*   在 Excel 2010 中：在“显示”选项卡上，取消选中“参考线”，否则您将在文本框周围看到一个灰色框。
*   调整 OLE 对象的大小，以便只有 A1 单元格可见。

# javascript - JavaScript 相当于 Python 的导入？

> ID：14124757
> 
> 赞同：2
> 
> 时间：2013-01-02T15:40:13.300
> 
> 标签：javascript

> **可能重复：**
> [在 JavaScript 文件中包含 JavaScript 文件？](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)

有没有办法简单地将 JavaScript 库导入 JavaScript 文件？

在 Python 中，您可以简单地执行以下操作：

```
import math 
```

JavaScript中有类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:42:04.163

In today's vanilla javascript, no, you can't do that.

But in a future version, a similar feature will probably be available. [Modules are discussed from a long time](http://wiki.ecmascript.org/doku.php?id=harmony%3amodules). And as a Python programmer, you might be interested by [this article](http://css.dzone.com/articles/exciting-future-javascript-0) too.

Today you may

*   use one of the many frameworks enabling this kind of import, like [require.js](http://requirejs.org/).
*   dynamically add a `<script>` element to your page (yes, it's ugly)
*   fetch it using ajax and evaluating it (it's uglier)

But...

if you always import the same files, you should consider concatenating them (and minifying them), as the number of requested files is one of the main elements to consider when optimizing the performances of your site.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:45:44.453

你可以看看这个问题（以及答案......）：[如何在另一个 JavaScript 文件中包含一个 JavaScript 文件？](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)

我特别喜欢 jQuery 的[getScript()](http://api.jquery.com/jQuery.getScript/)函数：

```
$.getScript("my_lovely_script.js", function(){
   alert("Script loaded and executed.");
   // here you can use anything you defined in the loaded script
}); 
```

# java - 性能 Boolean.ValueOf 与 new Boolean(request.getParameter("value"))

> ID：14124761
> 
> 赞同：1
> 
> 时间：2013-01-02T15:40:22.260
> 
> 标签：java

> **可能重复：**
> [字符串到布尔转换的最佳性能](https://stackoverflow.com/questions/12044721/best-performance-for-string-to-boolean-conversion)

哪个被认为是更好的实践，更重要的是，它会给我带来更好的表现吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T15:43:30.213

布尔构造函数的文档说：

```
 * <p><b>Note: It is rarely appropriate to use this constructor.
 * Unless a <i>new</i> instance is required, the static factory
 * {@link #valueOf(boolean)} is generally a better choice. It is
 * likely to yield significantly better space and time performance.</b> 
```

`valueOf`返回对常量值的引用，因此不会创建新对象。

# sql - 如何编写 Sql 查询以查找从未满足以下“Where Not(a=x and b=x)”的不同值

> ID：14124763
> 
> 赞同：2
> 
> 时间：2013-01-02T15:40:47.730
> 
> 标签：sql, sql-server-2008

我有下表称为`Attributes`

```
* AttId  * CustomerId  * Class * Code *
| 1      | 1           | 1     | AA   |
| 2      | 1           | 1     | AB   |
| 3      | 1           | 1     | AC   |
| 4      | 1           | 2     | AA   |
| 5      | 1           | 2     | AB   |
| 6      | 1           | 3     | AB   |
| 7      | 2           | 1     | AA   |
| 8      | 2           | 1     | AC   |
| 9      | 2           | 2     | AA   |
| 10     | 3           | 1     | AB   |
| 11     | 3           | 3     | AB   |
| 12     | 4           | 1     | AA   |
| 13     | 4           | 2     | AA   |
| 14     | 4           | 2     | AB   |
| 15     | 4           | 3     | AB   | 
```

其中每一个`Class`，`Code`配对代表一个特定的`Attribute`。

我正在尝试编写一个返回所有`customers`未链接到**pairing**`Attribute`的查询`Class = 1, Code = AB`。

这将返回`Customer Id`值 2 和 4。

我开始写`Select Distinct A.CustomerId From Attributes A Where (A.Class = 1 and A.Code = 'AB')`，但当我意识到我正在写一个`SQL`查询并且在括号前没有可用于表示**不能**满足子句的运算符时停止了。

我错过了什么？或者我应该看哪个运营商？

**编辑：**

我正在尝试编写一个查询，该查询仅返回那些`Customers`（即不同的客户 ID）**与**`Attribute`配对没有链接的查询`Class = 1, Code = AB`。

这只能是`Customer Id`值 2 和 4，因为表不**包含**行：

```
* AttId  * CustomerId  * Class * Code *
| x      | 2           | 1     | AB   |
| x      | 4           | 1     | AB   | 
```

将标题更改为：

**如何在 Sql Query 中编写“Where Not(a=x and b=x)”**

到：

**如何编写 Sql 查询以查找从未满足以下“Where Not(a=x and b=x)”的不同值**

由于之前的标题本身就是一个问题，但是问题的细节增加了一个额外的维度，导致了混乱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:47:11.843

一种方法是

```
SELECT DISTINCT CustomerId FROM Attributes a 
WHERE NOT EXISTS (
    SELECT * FROM Attributes forbidden 
    WHERE forbidden.CustomerId = a.CustomerId AND forbidden.Class = _forbiddenClassValue_ AND forbidden.Code = _forbiddenCodeValue_
) 
```

或加入

```
SELECT DISTINCT a.CustomerId FROM Attributes a
LEFT JOIN (
    SELECT CustomerId FROM Attributes
    WHERE Class = _forbiddenClassValue_ AND Code = _forbiddenCodeValue_
) havingForbiddenPair ON a.CustomerId = havingForbiddenPair.CustomerId
WHERE havingForbiddenPair.CustomerId IS NULL 
```

根据 ypercube 的回答，另一种方法是使用 EXCEPT

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T15:55:08.193

由于没有人发布简单的逻辑语句，这里是：

```
select . . .
where A.Class <> 1 OR A.Code <> 'AB' 
```

(X and Y) 的负数是 (not X or not Y)。

我明白了，这是一个分组的事情。为此，您使用聚合并具有：

```
select customerId
from Attributes a
group by CustomerId
having sum(case when A.Class = 1 and A.Code = 'AB' then 1 else 0 end) = 0 
```

我总是更喜欢使用这种技术来解决“是否在一组”类型的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T15:59:01.607

```
SELECT CustomerId 
FROM Attributes

EXCEPT

SELECT CustomerId 
FROM Attributes
WHERE Class = 1
  AND Code = AB ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T15:44:02.300

```
Select Distinct A.CustomerId From Attributes A Where not (A.Class = 1 and A.Code = 'AB') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T15:47:26.287

试试这个：

```
SELECT DISTINCT A.CustomerId From Attributes A Where 
0 = CASE 
         WHEN A.Class = 1 and A.Code = 'AB' THEN 1 
         ELSE 0 
END 
```

编辑：当然，这仍然给你 cust 1（doh！），你应该理想地使用 pjotrs NOT EXISTS 查询，因为我没有足够仔细地查看数据:)

# sms - Google 如何在短信中使用“Google”作为源地址

> ID：14124769
> 
> 赞同：0
> 
> 时间：2013-01-02T15:41:04.613
> 
> 标签：sms, smpp

我见过其他公司这样做，但谷歌是一个显着的例子。

当您使用 Google 启用双重身份验证时，其中一个选项是在您登录时接收短信。我注意到发件人的地址，而不是像 346-555-1234 这样的 MSISDN 是“Google”。

他们是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:54:28.087

在 smpp 3.4 规范中，源地址可以定义为 11 个字符的字母数字字符串

# asp.net - 如何在此代码中添加“记录已删除”消息？

> ID：14124775
> 
> 赞同：0
> 
> 时间：2013-01-02T15:41:18.983
> 
> 标签：asp.net

我想在选择删除按钮时添加记录删除消息。该消息将出现 5 秒钟，然后消失。这是代码：

```
 <asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
                AllowSorting="True" DataSourceID="SqlDataSource1" 
                AutoGenerateColumns="False" DataKeyNames="ScheduleId">
                <Columns>
                    <asp:CommandField ShowDeleteButton="True" />
                    <asp:BoundField DataField="SDate" HeaderText="SDate" SortExpression="SDate" />
                    <asp:BoundField DataField="STime" HeaderText="STime" SortExpression="STime" />
                    <asp:BoundField DataField="SNoPlaces" HeaderText="SNoPlaces" 
                        SortExpression="SNoPlaces" />
                    <asp:BoundField DataField="ScheduleId" HeaderText="ScheduleId" 
                        InsertVisible="False" ReadOnly="True" SortExpression="ScheduleId" Visible="false" />
                    <asp:BoundField DataField="STourId" HeaderText="STourId" SortExpression="STourId" Visible="false" />
                    <asp:BoundField DataField="TName" HeaderText="Tour Name" SortExpression="TName" /> 
                </Columns>
            </asp:GridView>
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:ChinatowndbConnString %>" 
                DeleteCommand="DELETE FROM Schedule WHERE (ScheduleId = @ScheduleId)" 
                SelectCommand="SELECT SDate, STime, SNoPlaces, ScheduleId, STourId, TName FROM Schedule INNER JOIN Tour ON Schedule.STourId = Tour.TourId">
                <DeleteParameters>
                    <asp:Parameter Name="ScheduleId" />
                </DeleteParameters>
            </asp:SqlDataSource> 
```

敬茶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:51:45.947

我认为你不能天真地把它作为 a 的一部分来完成，`GridView`但你可以连接事件以使用该方法`RowDeleted`注入一些 JavaScript 。`ClientScriptManager.RegisterStartupScript`

我建议使用 toastr 来显示您的实际消息，并且可以将其与其关联的 nuget 包添加到您的项目中。

[行已删除](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdeleted.aspx)

[注册启动脚本](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerstartupscript%28v=vs.100%29.aspx)

[烤面包机](https://github.com/CodeSeven/toastr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:53:53.183

使用此 gridview 事件：

```
protected void GridView1_RowDeleted(object sender, GridViewDeletedEventArgs e)
{
    LabelMsg.Text = "Record Deleted";
} 
```

我会使用 jQuery 来始终淡出 $(document).ready() 上的 LabelMsg 元素。所以不管你放什么，从服务器端，它会在你决定的时候淡出。

# redmine - 如何卸载redmine插件？

> ID：14124776
> 
> 赞同：1
> 
> 时间：2013-01-02T15:41:19.483
> 
> 标签：redmine, uninstallation, bitbucket

我无法卸载 redmine 插件。我在下面输入了[这个 redmine 页面](http://www.redmine.org/projects/redmine/wiki/Plugins)描述的内容。

```
rake redmine:plugins:migrate NAME=plugin_name VERSION=0 RAILS_ENV=production 
```

并从插件目录中删除插件。当 redmine 重新启动时，它显示错误屏幕。如果我将 Redmine Bitbucket 放回插件目录，它会再次工作......

我使用[了 Redmine Bitbucket](http://www.redmine.org/plugins/redmine_bitbucket)。插件很好。但我想尝试卸载它。

一些新的 redmine 插件有这样的问题？

我的 redmine 版本是 Redmine 2.1.4.stable。

**我自己解决了。**

问题不在这个插件上。我只是将我的 Gemfile.lock 的所有者设置为 root。我改变了所有权。我可以删除这个插件。我会尝试再次使用这个插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:31:11.920

试试这个：

```
rake db:migrate:plugin NAME=plugin_name VERSION=0 RAILS_ENV=production 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-28T11:32:38.457

**试试这个..**

```
rake redmine:plugins:migrate NAME=plugin_name VERSION=0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-04T13:10:27.470

您始终可以看到 Redmine 版本附带的 rake 任务列表。

要查看它们，只需导航到您的 redmine 根目录并输入：

```
bundle exec rake -T 
```

当您滚动时，您会找到与插件相关的 rake 任务列表，这样您将始终使用正确的卸载命令。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-17T09:21:47.620

值得注意的是：

```
Note: The rake task db:migrate:plugin has been deprecated, please use the replacement version redmine:plugins:migrate 
```

# layout - Ext js 3.4 window add/remove Component error

> ID：14124778
> 
> 赞同：0
> 
> 时间：2013-01-02T15:41:31.993
> 
> 标签：layout, components, add, extjs3

We are using extjs 3.4\. The purpose is to replace a component in a Ext.Window. Even if there is no error when we remove the old and add the new component, when trying doLayout() the error **Uncaught TypeError: Cannot read property 'offsetWidth' of undefined** occurs.

The code that creates the window is:

```
 function createWindowConf(id, winconf, items) {
        var conf = {
            id: id,
            title: winconf.title, 
            iconCls: winconf.icon,
            x : winconf.xpos,
            y : winconf.ypos,
            width : parseInt(winconf.xsize), 
            height : parseInt(winconf.ysize),
            layout : winconf.layout, //'border',
            border : false,
            resizable : winconf.resizable,
            manager: windows,
            shadow: false,
            closable: true,
            items: items
        };
        var win = new Ext.Window(conf);
        win.render(desktopEl);
        return win;
    }; 
```

The items are a Ext.grid.GridPanel and a Ext.form.FormPanel. According to user's current selection in grip (component in position 0) the old form should be removed and a new should be added (component in position 1).

The code that creates the form is:

```
 var theConfig = {
    id: config.yid, 
            bodyStyle: 'padding:5px 5px 0',
            width: 370,
            maxWidth: 370,//not resizable
            minWidth: 370,
            layout: 'form',
            margins: '0 0 0',
            region: 'east',
            split: true,
            colapsible : true,
            trackResetOnLoad: true,
            autoScroll: true,
            fieldDefaults: {
                msgTarget: 'side',
                labelWidth: 75
            },
            items: [],
            buttons: [scopeDetails.updateButton, scopeDetails.submitButton]
    };
    this.detailsForm = new Ext.form.FormPanel(theConfig); 
```

and the items added afterwards.

The code that updates (adds/removes) components from the window is:

```
 this.updateWin = function(moduleForRemoveId, form, idWin) {
        var win = this.getWindow(idWin);
        if (win != null) {
            win.remove(moduleForRemoveId); 
            win.add(form);
            win.doLayout();
        }
    } 
```

and produces the error in win.doLayout().

By removing all components and add the add the new ones:

```
 win.removeAll();
    win.add(this.grid);
    win.add(this.form);
    win.doLayout(); 
```

we have the same error.

Any suggestion will be really helpful since more than 3 days spent for that error

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:32:06.517

我很确定错误来自其他东西，而不是组件删除/添加。我创建了一个简单的[测试用例](http://bit.ly/URDFDk)，它定义了一个带有表单和网格的窗口，以及一个用面板替换所有内容的按钮。它有效。

您的代码不完整。你应该提供一个完整的例子。您是否尝试过自己调试？在您的 Chrome 脚本调试器上启用“暂停未捕获的异常”以重现错误。您将获得所发生事件的堆栈跟踪，并提示您出了什么问题。当然包括 ext-all-debug。

# azure - Nservicebus NHibernate Azure Subscription Storage Exception

> ID：14124781
> 
> 赞同：0
> 
> 时间：2013-01-02T15:41:43.173
> 
> 标签：azure, nservicebus, azure-storage

when I try to run the Azure sample, I get the following error from the

OrderService:

```
Exception when starting endpoint, error has been logged. Reason: No

configuration section for NHibernate Azure Subscription Storage found. Please

add a NHibernateAzureSubscriptionStorageConfig section to you configuration

file. 
```

I wonder why this happens, because from what I know NHibernate is not used for

Azure queues?

These question was also [asked here](http://tech.dir.groups.yahoo.com/group/nservicebus/messages/11423?threaded=1&m=e&var=1&tidx=1) But no response has been given. Anyone with ideas

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:19:17.997

嗨，我终于能够通过再次查看样本来解决错误。我想我有一些设置从配置文件中弄乱了。但感谢@Andreas Öhlund 的回复

# visual-studio - Test Controller exception: No such host is known

> ID：14124784
> 
> 赞同：2
> 
> 时间：2013-01-02T15:41:47.403
> 
> 标签：visual-studio, visual-studio-2012, coded-ui-tests

I'm getting following errors on the test controller machine, when I'm trying to run `CodedUI Tests` remotely:

> (QTController.exe, PID 3032, Thread 12) ControllerDeployment.DoDeployment: System.Net.Sockets.SocketException (0x80004005): No such host is known

During controller and agent configuration no errors came up. And when I go to Manage test controller dialog in Visual Studio I can see all the agents active. But when I try to execute any CodedUI test remotely it's hanging forever.

Not sure if it's connected with the fact that I've upgraded client/controller/agents to 2012 versions recently, but I've started seeing the problem only after this upgrade.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T19:02:26.857

From [Microsoft KB 2643086](http://support.microsoft.com/kb/2643086/en-us):

> This issue occurs because the test agent computer sends its Network Basic Input/Output System (NetBIOS) name instead of sending its Fully Qualified Domain Name (FQDN) name to the test controller computer. When the DNS server of the test controller computer does not have the IP address mapping of the NetBIOS name of the test agent computer, the issue that is described in the "Symptoms" section occurs.

You should ensure you are using fully qualified domain names (FQDN).

There is also a hotfix is available from Microsoft. However, you have to contact Microsoft Customer Support Services to obtain the hotfix.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T09:43:03.173

I had similar problem, still not completely resolved but a workaround is to install Visual Studio on controller box and keeping result DB on same box.

Mostly the issue is restriction / firewall on VPN which might be blocking incoming traffic on TCP ports of machine / laptop.

# php - Writing SOAP vs RESTFUL web service to be used in iPhone, Android and Windows Phone apps

> ID：14124786
> 
> 赞同：3
> 
> 时间：2013-01-02T15:41:53.363
> 
> 标签：php, android, ios, windows-phone-7

I have a website running on PHP and i need to develop apps for same on Android, iOS and Windows Phone platforms. I guess i need to create web services to fetch data from the website but i am not very familiar with it.

Which one of these approaches will be best from compatibility and ease of use point of view that can be used on all the platforms:

1) Rest based web service 2) SOAP based web service 3) Any other approaches

Also what will be the best response format which can be easily consumed on all the platforms and has in built SDK support to parse them: XML/JSON/SOAP

If somebody came across such scenarios please suggest. Appreciate any responses as i have to start implementing same ASAP.

Thanks, MG

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:57:28.700

当前涉及多个平台的工作和经验以及为了便于开发，只是简单地使用通过 OAUTH 签名的 HTTP 上的 JSON。

HTTP，因为它在每个支持 Web 浏览器的平台上都可用（以及那些不通过使用 libCURL 的平台），并且还允许您在必要时使用 SSL，并带有众所周知的服务基础架构以实现可伸缩性。

JSON，因为它遵循可编程对象表示法，允许您在 HTTP 请求正文和响应正文中传输可解码结构。那里有很多库，尤其是对于您正在体验的平台。这使得从数据流和语言（PHP 服务器/C++ 客户端）之间推送和拉取对象变得更快。

OAUTH，因为它是一个使用 HTTP 的简单但非常好的身份验证协议，可以很好地识别您的应用程序和您的用户，所有这些都无需通过不安全的链接以明文形式传输密码（令牌）。

很明显，在安全方面要始终记住一件事，当您将应用程序提供给客户端设备时，您不能保证使用您的 Web 服务的客户端就是您构建的客户端。如果你编写了一个成功的产品，你会发现你的客户端被黑了，它的通信中断了，其他伪客户端使用的网络服务——当然这一切都取决于产品的功能和能力。不幸的是，移动应用程序世界充斥着在越狱设备上被黑客入侵的客户端。但是，如果您也可以利用这些客户，那么服务会更好！（例如，一个免费游戏，付费购买，在您控制的服务器上存储和验证）。同样对于本说明，您不能假设您的应用程序 OAUTH 令牌可以保证是安全的，

祝你好运！

# qt - How can I set QTabWidget's tab bar's length?

> ID：14124787
> 
> 赞同：2
> 
> 时间：2013-01-02T15:41:55.953
> 
> 标签：qt, tabs, resize, widget

I have been able to resize the QTabWidget's QTabBar size, but the string inside is always limited to a fixed length.

```
QTabWidget *tabWidget = new QTabWidget;
tabWidget->setStyleSheet("QTabBar::tab { width: 100px; }");
tabWidget->addTab(imagesList, "abcdefghijklmnop"); 
```

The string shown is made of the central five/six characters only.

Thank you for any help,
Pietro

References: [Qt Increase QTabWidget's QTabBar size](https://stackoverflow.com/questions/1725601/qt-increase-qtabwidgets-qtabbar-size)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:28:08.570

当您使用样式表指定选项卡的宽度时，您也可以固定选项卡的宽度。如果文本比指定的宽度宽，您将只能看到文本中间适合的任何字符。尝试将选项卡宽度增加到 200 像素或 300 像素，或者如果它是您要设置的选项卡的最小宽度（如果需要，它仍然会变宽）使用以下样式表：

```
tabWidget->setStyleSheet("QTabBar::tab { min-width: 100px; }"); 
```

# git - 当原始版本引用我的时，删除 GitHub 存储库的分支是否安全？

> ID：14124794
> 
> 赞同：8
> 
> 时间：2013-01-02T15:42:06.690
> 
> 标签：git, github, git-fork

背景：我有[类似](https://stackoverflow.com/questions/5749246/how-do-i-change-which-github-project-i-forked-from)的情况，但那里的解决方案并不能解决我的问题。在 GitHub 上，我分叉了一个项目：

```
Original -> SomeonesFork -> MyFork 
```

我从SomeonesFork 分叉，以清理他们所做的一些更改并将拉取请求发送回原始存储库。从那时起，我还直接向被接受的原始请求发送了拉取请求。

但是，我更希望我的 repo 是 Original 的直接分叉，而不是 SomesFork 中介。（使 GitHub 上的事情变得更容易。）我将原始设置为上游并推送到我的 fork，但 GitHub 仍然说它是 SomensFork 的一个分支。

如果我再次尝试分叉原件，我只会被发送到已经存在的那个。从研究来看，GH 似乎不允许多个分叉。

所以我的问题是：简单地删除我现在拥有的分叉，然后重新分叉原件是否安全？这会在任何地方的 git 或 GitHub 中引起问题吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T15:55:06.810

Git 是一个分布式系统，所有代码已提交或推送到的所有 repos 中的所有代码都有一个副本。存储库之间的引用是提及合并提交来自何处的最小文本标志。它们之间没有真正的联系。

我过去在 github 上删除了许多 fork，没有任何不良影响。拉取请求作为补丁文件“发送”给 repo 所有者。只需尝试`.patch`在 github 上的任何拉取请求或提交 URL 的末尾，以纯文本形式查看补丁文件内容。这是其他人针对我维护的项目提出的要求：[https ://github.com/j4mie/paris/pull/35.patch](https://github.com/j4mie/paris/pull/35.patch)

因此它是自包含的，你删除你的分叉不会影响这个补丁对上游 repo 所有者的可用性。

# python - Triangle Siblings in python

> ID：14124795
> 
> 赞同：0
> 
> 时间：2013-01-02T15:42:11.090
> 
> 标签：python

I would like to ask again the help of the Python experts in this forum. The task is to create a program that will return a triangle pattern. However, there must be a siblings.

Sample input:

```
Input an Integer:
9 
```

Sample Output:

```
*
**
***
****      *
*****     **
******    ***
*******   ****   *
********  *****  **
********* ****** *** 
```

The code that I have so far is:

```
a = int(input("Input a number? "))

k=a/3
t=a-k
y=a-(k*2)

for i in range(a + 1):
    print '*' * i

for i in range(t + 1):
    print '*' * i

for i in range(y + 1):
    print '*' * i 
```

When I run this code the output is:

```
Input a number: 12
*
**
***
****
*****   
******
*******
********
*********
**********
***********
************

*
**
***
****
*****   
******
*******
********

*
**
***
**** 
```

It prints after the first triangle, my goal is to print it beside each triangle..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:24:18.210

制作你的三角形。

```
def make_triangle(size, siblings, step): 
    return [['*' * (i-(step*sib)) + ' ' * ((size-(step*sib)) - ((i-(step*sib)) if (i-(step*sib) > 0) else 0)) for sib in xrange(siblings)] for i in xrange(1, size+1)] 
```

输出：

```
>>> for i in make_triangle(9,3,3):
    print ''.join(i)

*                        
**                     
***                  
****     *          
*****    **        
******   ***      
*******  ****  *  
******** ***** ** 
****************** 
```

或者您可以将其全部保存在函数中，并且：

```
def make_triangle(size, siblings, step): 
    return '\n'.join([''.join(line) for line in [['*' * (i-(step*sib)) + ' ' * ((size-(step*sib)) - ((i-(step*sib)) if (i-(step*sib) > 0) else 0)) for sib in xrange(siblings)] for i in xrange(1, size+1)]])

>>> print make_triangle(9,3,3)
*                        
**                     
***                  
****     *          
*****    **        
******   ***      
*******  ****  *  
******** ***** ** 
****************** 
```

如果你想要它们之间的空间：

```
def make_triangle(size, siblings, step): 
    return '\n'.join([' '.join(line) for line in [['*' * (i-(step*sib)) + ' ' * ((size-(step*sib)) - ((i-(step*sib)) if (i-(step*sib) > 0) else 0)) for sib in xrange(siblings)] for i in xrange(1, size+1)]])

>>> print make_triangle(9,3,3)
*                          
**                       
***                    
****      *           
*****     **         
******    ***       
*******   ****   *  
********  *****  ** 
********* ****** *** 
```

为了好玩（你可以看到非常好的功能）：

```
>>> print make_triangle(13,5,2)
*                                                                
**                                                           
***           *                                           
****          **                                       
*****         ***         *                          
******        ****        **                       
*******       *****       ***       *             
********      ******      ****      **           
*********     *******     *****     ***     *    
**********    ********    ******    ****    **   
***********   *********   *******   *****   ***  
************  **********  ********  ******  **** 
************* *********** ********* ******* ***** 
```

更有趣：

```
>>> print make_triangle(13,5,2)[::-1]
***** ******* ********* *********** *************
 ****  ******  ********  **********  ************
  ***   *****   *******   *********   ***********
   **    ****    ******    ********    **********
    *     ***     *****     *******     *********
           **      ****      ******      ********
            *       ***       *****       *******
                     **        ****        ******
                      *         ***         *****
                                 **          ****
                                  *           ***
                                               **
                                                * 
```

**另外：**对其工作原理的一些解释：

这是代码以更基本的形式执行的操作：

```
def make_triangle(size, siblings, step): 
    out_list = []
    for i in xrange(1, size+1):
        in_list = []
        for sib in xrange(siblings):
            if i-(step*sib) > 0: 
                in_list.append('*' * (i-(step*sib)) + ' ' * ((size-(step*sib)) - (i-(step*sib))))
            else:
                in_list.append('*' * (i-(step*sib)) + ' ' * (size-(step*sib))
        out_list.append(in_list)
    line_list = []
    for in_list in out_list:
        line_list.append(' '.join(in_list))
    result = '\n'.join(line_list)
    return result 
```

# android - Close Notifications in android

> ID：14124796
> 
> 赞同：0
> 
> 时间：2013-01-02T15:42:15.360
> 
> 标签：android, android-service

I'm trying to make a notification from a service. the code goes as follows

**UpdateService.java**

```
package com.androidhive.jsonparsing;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.IBinder;
import android.preference.PreferenceManager;
import android.util.Log;

public class UpdateService extends Service {

    private Updater updater;
    private static final String TAG = "Background";
    private boolean isRunning = false;
    public static int id = 1;
    NotificationManager NM;
    JSONArray updates = null;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    public boolean isRunning() {
        return this.isRunning;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        SharedPreferences prefs = PreferenceManager
                .getDefaultSharedPreferences(this.getApplicationContext());
        Editor prefEditor = prefs.edit();
        prefEditor = prefs.edit();
        prefEditor.putString("old", "0");
        prefEditor.putString("new", "");
        prefEditor.commit();
        updater = new Updater();
    }

    @Override
    public synchronized void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);
        if (!this.isRunning) {
            updater.start();
            this.isRunning = true;
        }
        Log.d(TAG, "ON START");
    }

    @Override
    public synchronized void onDestroy() {
        super.onDestroy();
        if (this.isRunning) {
            updater.interrupt();
        }
        updater = null;
        Log.d(TAG, "ON DESTOY");
    }

    class Updater extends Thread {

        static final long DELAY = 30000;

        @Override
        public void run() {
            isRunning = true;
            while (isRunning) {
                try {
                    Log.d(TAG, "update is running");
                    JSONParser jparser = new JSONParser();
                    JSONObject json1 = jparser
                            .getJSONFromUrl("http://ensignweb.com/sandbox"
                                + "/app/comment11.php");
                    updates = json1.getJSONArray("products");
                    JSONObject update = updates
                            .getJSONObject(updates.length() - 1);
                    String cid = update.getString("cid");
                    Log.d("update", "new update is available");
                    SharedPreferences prefs1 = PreferenceManager
                            .getDefaultSharedPreferences(UpdateService.this
                                    .getApplicationContext());
                    String old1 = prefs1.getString("old", "");
                    if (!(old1.equals(cid))) {
                        old1 = cid.toString();
                        Intent intent = new Intent(UpdateService.this,
                                AndroidJSONParsingActivity.class);
                        PendingIntent pIntent = PendingIntent.getActivity(
                            UpdateService.this, 0, intent, 0);
                        Notification n = new Notification(
                                R.drawable.ic_launcher, "new update arrived",
                                System.currentTimeMillis());
                        n.setLatestEventInfo(getApplicationContext(), "Update",
                            "new update arrived", pIntent);
                        NM = (NotificationManager) getSystemService
                                (Context.NOTIFICATION_SERVICE);
                        NM.notify(id, n);
                    }
                    Log.d("Update", "new value is");
                    // }
                    Thread.sleep(DELAY);
                } catch (InterruptedException e) {
                    isRunning = false;
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

But I'm confused where to place the notication.close() function so that once the user clicks the notification, the required activity must start and the notification must be removed. I tried all kinds of thigs. But none worked. Please suggest.

# c++ - boost function with optional parameters

> ID：14124797
> 
> 赞同：2
> 
> 时间：2013-01-02T15:42:16.967
> 
> 标签：c++, function, boost, optional-parameters

I have a map containing `boost::function` values, as defined below:

```
std::map <std::string, boost::function<std::string (std::string, int)> > handlers; 
```

Let us say I define the following function:

```
using namespace std;
string substring (string input, int index = 0){
    if (index <= 0){
        return input;
    }
    stringstream ss;
    for (int j = index; j<input.length(); j++){
        ss << input[j];
    }

    return ss.str();
} 
```

I would like to be able to store this in the handlers map, but WITH it's optional parameter. Does boost have a way to perform this? I have looked at `boost::optional`, but that doesn't seem to do what I want.

**EDIT**

To give a little more background, there are a few handlers that require extra arguments, such as a pointer to a dictionary (`typedef std::map < std::string, std::string > dictionary`) or something, because they make changes to that dictionary. However, the majority of the handlers do not touch the dictionary in question, but, in order to store them all in the same map, they all must take the same arguments (have the same template for `boost::function`). The goal is to make the functions that don't deal with the dictionary at all usable without having to either A) create a dictionary for the sole purpose of passing it and not using it or B) copy the code verbatim into another function that doesn't require that argument.

The code above is a simplified example of what I am doing.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:48:46.853

简短的回答：如果没有大量附加代码，这在 C++ 中是不可能的。

长答案：
C++ 中函数参数的默认值仅在函数**名称**出现的上下文中需要它们时使用。如果您通过其他方式调用函数（例如函数指针或`boost::function/std::function`，则编译器无法获得有关可能存在默认参数的信息，因此它无法为您填写它们。

作为背景，这是默认参数在 C++ 中的工作方式：
当您有表达式`substring(MyString)`(with `std::string MyString = "something"`) 时，编译器会查找所有调用的函数`substring`并找到`string substring(string, int=0)`. 这个函数有两个参数，其中一个可以有一个默认值，这使得函数可行。要实际调用该函数，编译器会更改源代码，以便它读取`substring(MyString, 0)`并继续生成基于该适配的代码。

为了能够通过间接调用（例如 through ）使用默认值`boost::function`，您必须有效地模拟编译器的默认参数机制。

# nfc - Windows Phone 8 设备作为接近访问卡

> ID：14124799
> 
> 赞同：1
> 
> 时间：2013-01-02T15:42:21.917
> 
> 标签：nfc, windows-phone-8, radio

Lumia 920 中的 NFC 硬件能否模拟 125 kHz 感应门禁卡？

看起来 NFC 硬件实现的标准是门禁卡使用的标准的超集。但是我对这些无线电标准没有足够的了解，无法了解手机是否只能用作接收器或也可以用作此类信号的发射器。

我还将欣赏一篇很好的概述文章的链接，该文章以比官方规范更简单的术语解释了这些标准。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:44:25.183

目前， Windows Phone[感应 API](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207060%28v=vs.105%29.aspx)**不**支持卡模拟。

资料来源：

*   [NFC，卡模拟](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/e6f5ee46-cdd1-4a9d-b13d-81b1adef854f)
*   [NFC 开发者比较](http://www.nfcinteractor.com/developers/nfc-developer-comparison/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:46:37.347

从物理学的角度和标准来看，这是不可能的。NFC 基于 ISO 14443 并使用 13,56 MHz 载波 - 这是高频层 - 它通常是电场范围。125 kHz 是接近范围（125 kHz - 134 kHz），它使用磁感应（和磁场）作为通信环境。
结论 - 在这种确切的情况下，它在物理上是不可能的。如果您使用 13,56-solutions 作为接近度，您可以（这是可能的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T20:23:32.050

看这里：本白皮书详细介绍了 Windows Phone 8.1 中可用于创建基于 UICC 的 NFC 卡模拟应用程序的功能。

[http://www.microsoft.com/en-us/download/details.aspx?id=43681](http://www.microsoft.com/en-us/download/details.aspx?id=43681)

# ios - Monotouch (mtouch) 命令行错误 MT0007 -“根程序集不存在”

> ID：14124802
> 
> 赞同：2
> 
> 时间：2013-01-02T15:42:32.427
> 
> 标签：ios, ipad, command-line, build, xamarin.ios

我们正在尝试使用 MonoTouch mtouch 命令行在模拟器中运行我们的应用程序。我们有一个解决方案，其中包含 3 个项目、一个库、一个前端应用程序和一个测试项目。当我们在前端应用程序上使用 mtouch --installsim 时，一切正常。但是，当我们在测试项目上运行 mtouch --installsim 或 mtouch --debugsim 时，我们会收到以下错误：

> 错误 MT0007：根程序集 '--installsim=/Users/myuser/root4/trunk/App/UnifiedTests/bin/iPhoneSimulator/Debug/UnifiedTests.app' 不存在

上面的应用程序在 MonoDevelop 的模拟器中构建和运行良好，但从命令行，它不起作用。这是确切的命令行输入：

> /Developer/MonoTouch/usr/bin/mtouch --debugsim=/Users/myuser/root4/trunk/App/UnifiedTests/bin/iPhoneSimulator/Debug/UnifiedTests.app --stdout=/Users/myuser/output --stderr= /用户/我的用户/错误
> 
> /Developer/MonoTouch/usr/bin/mtouch --installsim=/Users/myuser/root4/trunk/App/UnifiedTests/bin/iPhoneSimulator/Debug/UnifiedTests.app --stdout=/Users/myuser/output --stderr= /用户/我的用户/错误

关于为什么这不起作用的任何想法？测试应用程序和主应用程序之间似乎没有任何显着差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:48:01.470

那是因为里面没有`--installsim`选项`mtouch`（并且未知命令被怀疑是程序集名称）。

什么是可用的`--launchsim`，`--debugsim`并且都在[此处](http://docs.xamarin.com/ios/Guides/Advanced_Topics/mtouch)描述。

尝试`mtouch --help`查看所有可用选项或在线阅读[手册页](http://iosapi.xamarin.com/?link=man%3amtouch%281%29)。

# java - How to avoid a huge list of JavaFX coordinate translations (caused by UI responses)

> ID：14124804
> 
> 赞同：2
> 
> 时间：2013-01-02T15:42:42.510
> 
> 标签：java, javafx-2

I'm making a ScalaFX (but use of Scala is irrelevant here) application with a user interface similar to i.e. Google maps. There's panning and zooming.

For each such change of the user's viewpoint, I add a transform into a Group's `.transforms`.

```
transforms += new Translate( dx, dy ) 
```

or

```
transforms += new Scale( 1/f,1/f, cx, cy ) 
```

This seems like the only way to affect transformations (apart from `translateXYZ`, `layoutXYZ`, which I'm ignoring), and it works.

The [docs](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html) say this:

> Multiple transformations may be applied to a node by specifying an ordered chain of transforms. The order in which the transforms are applied is defined by the ObservableList specified in the transforms variable.

Doesn't this imply that there's a list (even, an observable list) of potentially hundreds or thousands of entries long?

If so, I would like to flatten the list occasionally. Tried calling `.localToSceneTransoform` and `.localToParentTransform` for this (thinking I'd then set the .transforms with the received overall affine matrix). That *crashed* the JVM.

Am I doing something wrong here, or should I just stop caring about the list growing, well, indefinately?

Can provide a short ScalaFX sample code to highlight all this (including the crash). Please ask.

System: OS X, JVM 7u10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:32:38.137

JavaFX 转换的“思考”需要一段时间。这个想法是制作一个转换列表，并更改这些转换的 Observable 参数。这消除了不断向列表添加越来越多转换的需要。

这实际上是一种非常可爱的处理方式。可悲的是，从我读过的任何文档中都看不到这一点（我认为将这个条目留在 SO 中的原因）。

必要的代码类似于：

```
private val panTrans = new Translate(0,0)

transforms = 
  panTrans ::
  Nil

...

panTrans.x = panTrans.x() + dx
panTrans.y = panTrans.y() + dy 
```

我认为从这里会很明显。

# xml - SOAPHTTPNV on Db2 9.1 zos

> ID：14124809
> 
> 赞同：0
> 
> 时间：2013-01-02T15:43:01.840
> 
> 标签：xml, web-services, db2, resultset, zos

I'm calling a webservice from Db2 9.1 on zOS using function SOAPHTTPNV. The result comes back ok, but the webservice is called multiple times, once for every row in the resultset (or occurrence of element ROW in the response). Why is that ?

The SQL

```
SELECT T.NR_KAT, T.PNR_F
FROM
XMLTABLE(
xmlnamespaces ('http://schemas.xmlsoap.org/soap/envelope/' AS
"soap",
'http://schemas/SERVICE/100921' AS "p"),
'$d/soap:Envelope/soap:Body/p:SERVICE_RESPONSE/p:document/p:result/p:ROW'
PASSING XMLPARSE(
DOCUMENT DB2XML.SOAPHTTPNV(
'http://serviceurl',
VARCHAR(''),
VARCHAR('<soap:Envelope
    request_simplified
</soap:Envelope>'
))) AS "d"
COLUMNS
NR_KAT VARCHAR(2) PATH 'p:NR_KAT',
PNR_F  VARCHAR(12) PATH 'p:PNR_F'
) AS T
; 
```

The result of the SQL in SPUFI

```
NR_KAT  PNR_F
---------+---------+---------+---------+------
09      194513051834
08      194515042978
19      194515300398 
```

The xml response from webservice

```
<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
        <Body>
    <SERVICE_RESPONSE xmlns="http://schemas/SERVICE/100921">
         <document>
             <result>
                 <ROW>
                    <NR_KAT>09</NR_KAT>
                    <PNR_F>194513051834</PNR_F>
                </ROW>
                 <ROW>
                    <NR_KAT>08</NR_KAT>
                    <PNR_F>194515042978</PNR_F>
                </ROW>
                 <ROW>
                    <NR_KAT>19</NR_KAT>
                        <PNR_F>194515300398</PNR_F>
                    </ROW>    
                    </result>
        </document>
    </SERVICE_RESPONSE>
    </Body>
    </Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:47:30.590

尝试使用 XMLTABLE 函数的 BY REF 子句：

```
SELECT T.NR_KAT, T.PNR_F
FROM XMLTABLE(xmlnamespaces ('http://schemas.xmlsoap.org/soap/envelope/' AS "soap",
                             'http://schemas/SERVICE/100921'             AS "p"),
              '$d/soap:Envelope/soap:Body/p:SERVICE_RESPONSE/p:document/p:result/p:ROW'
              PASSING BY REF XMLPARSE(...))) AS D
              COLUMNS NR_KAT VARCHAR(2)  PATH 'p:NR_KAT',
                      PNR_F  VARCHAR(12) PATH 'p:PNR_F') AS T
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:22:08.357

该症状与 APAR PM52237 中描述的症状相匹配。APAR PM52237 修复了为 XMLTABLE 返回的每一行调用 XMLTABLE 函数的参数的问题。请确保您的 z/OS 系统上已安装 PTF UK77921（用于 DB2 9）。

# objective-c - Without subclassing a UIView or UIViewController: possible to catch if a subview was added?

> ID：14124810
> 
> 赞同：0
> 
> 时间：2013-01-02T15:43:01.980
> 
> 标签：objective-c, ios, uikit

Is there a way to catch an event or notification if a view was added as subview to an existing view of a controller? I have a library here and I cannot subclass but need to know if a specific subview was added to trigger a custom action. Is there a chance?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:46:18.250

我将尝试为该`didAddSubview`方法添加一个类别。

**编辑**

类别是子类化的替代方法，因此您可以使用以下内容：

。H：

```
 #import <UIkit/UIKit.h>

  @interface UIView (AddSubView)

  - (void)didAddSubview:(UIView *)view

  @end 
```

米：

```
@implementation UIView (AddSubView)
- (void)didAddSubview:(UIView *)view
{
     [self addSubview: view];

     // invoke the method you want to notify the addition of the subview

}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:03:38.403

并不是说我认为这种方法比@tiguero 建议的方法更干净，但我认为它更安全（请参阅为什么在我对他的回答的评论中使用类别可能是危险的）并为您提供更多的灵活性。

这在某种程度上，虽然不完全是，但更多的是在概念层面上，与 KVO 的工作方式相同。基本上，您可以动态更改通知代码的实现`willMoveToSuperview`并向其添加通知代码。

```
//Makes views announce their change of superviews
Method method = class_getInstanceMethod([UIView class], @selector(willMoveToSuperview:));
IMP originalImp = method_getImplementation(method);

void (^block)(id, UIView*) = ^(id _self, UIView* superview) {
    [_self willChangeValueForKey:@"superview"];
    originalImp(_self, @selector(willMoveToSuperview:), superview);
    [_self didChangeValueForKey:@"superview"];
};

IMP newImp = imp_implementationWithBlock((__bridge void*)block);
method_setImplementation(method, newImp); 
```

# objective-c - 模拟器和 iPhone 的不同构建

> ID：14124811
> 
> 赞同：1
> 
> 时间：2013-01-02T15:43:05.007
> 
> 标签：objective-c, build-process

我正在处理的应用程序有一个它访问数据的 URL，这个 URL 被定义为一个常量，如下所示：

```
#define kURLToSendRequestsTo @"http://www.localhost.com/dataAccess.php" 
```

但是，此 URL 仅适用于模拟器。对于 iPhone，我必须手动将 URL 更改为测试站点。

我需要的是一种动态更改它的方法，因此我不必每次都手动更改它。像这样的东西：

```
#if iPhone

#define kURLToSendRequestsTo @"http://www.localhost.com/dataAccess.php"

#elseif simulator

#define kURLToSendRequestsTo @"http://www.testsite.com/dataAccess.php"

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:47:15.010

你想要的常数是：

```
TARGET_IPHONE_SIMULATOR 
```

和：

```
TARGET_OS_IPHONE 
```

[参考](https://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/15-Configuring_Applications/configuring_applications.html)。

# r - data.table fread 函数

> ID：14124813
> 
> 赞同：17
> 
> 时间：2013-01-02T15:43:09.977
> 
> 标签：r, csv, data.table

我正在使用新`data.table:::fread`函数（迄今为止我在 R 中使用过的最快读取函数）并且我得到了以下（自我解释）异常：

```
R) fread(path)
Erreur dans fread(path) : Coercing integer64 to real needs to be implemented 
```

我的文件（这是一个由制表符分隔的 csv）确实包含大整数，例如`902160000671352000`. 那么我的问题是，我可以告诉`fread`#NOT# 阅读第二列（那些怪物 int 在哪里）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T17:32:23.790

好问题。还没有，但是是的，你将能够做到。同意所有评论。

TO DO 列表位于[readfile.c 源代码](https://r-forge.r-project.org/scm/viewvc.php/pkg/src/readfile.c?view=markup&root=datatable)的顶部。如果有什么遗漏，请告诉我。该列表包括允许类型覆盖、实现未实现的强制和允许跳过列。希望在 1.9.0 的第一个版本中全部完成。

`fread`目前在 v1.8.7 中，正在 R-Forge 上开发。完成后，它将作为 1.9.0 发布给 CRAN。.0 表示新功能可能会更改参数名称和行为；`fread`即，如果在 1.9.1中对向后不兼容的更改进行了更改，请不要感到惊讶。不过，考虑到它的性质，很难想象会有什么重大变化。但这就是为什么我在 R-Forge 上公布了它的可用性，以便尽早将其投入使用并正确处理此类事情。

# c++ - 将一个矩阵块复制到 OPENCV 中的另一个矩阵块

> ID：14124816
> 
> 赞同：3
> 
> 时间：2013-01-02T15:43:19.077
> 
> 标签：c++, visual-c++, opencv, computer-vision

我有一个包含 $100x100$ 元素的矩阵 A.. 我还有另一个包含 $50x50$ 元素的矩阵 B..

我想将一个元素块复制到 A，例如，

```
A(Range(10,30),Range(10,30))  = B (Range(5,25),Range(5,25)); 
```

程序正在编译和执行，但值没有被复制。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:32:06.027

尝试

```
cv::Mat A;
cv::Mat B;
cv::Mat C = A(cv::Range(10,30),cv::Range(10,30));
B (cv::Range(5,25),cv::Range(5,25)).copyTo(C); 
```

我想在您的代码中发生的事情是您对 A 的函数调用返回一个 Mat 标头，然后将其设置为等于 B 返回的 Mat 标头。默认情况下，OpenCV 不会复制 cv::Mat 数据，您必须明确地进行.

# c++ - 用于按排序顺序存储元素并允许快速索引的数据结构？

> ID：14124825
> 
> 赞同：1
> 
> 时间：2013-01-02T15:44:05.457
> 
> 标签：c++, data-structures, vector, set

我需要一个排序和索引的容器。我想基于 std:set 或 std::vector 构建它。通过使用 set，我需要昂贵的 std::distance 来计算其元素的索引。通过使用向量，我知道添加或删除元素是昂贵的。假设我的元素是一个指针（小对象）。我知道两个操作的复杂性是相同的。但是哪个更快？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:41:53.173

如果您需要一个支持排序顺序和按索引查找的数据结构，您绝对应该查看**[order statistic tree](http://en.wikipedia.org/wiki/Order_statistic_tree)**，它是专门为支持这些操作而设计的数据结构。它支持在 O(log n) 时间内插入和删除，在 O(log n) 时间内查找元素的索引，以及在 O(log n) 时间内按值或按索引查找，因此它应该比向量或集合方法。

不幸的是，STL 没有构建它的顺序统计树，因此您必须搜索第三方库（[这个较早的问题和答案提供了一个示例](https://stackoverflow.com/a/11231596/501557)）。也就是说，您应该期望从订单统计树中获得的加速应该值得投资。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T18:39:10.523

根据你们的建议，我测量了它作为底部代码（添加了flat_set）。调试版本的结果是

设置：4.720976s 墙，4.711230s 用户 + 0.000000s 系统 = 4.711230s CPU（99.8%）（也测试了 set::insert，这需要很少的时间）

矢量：1.407571s 墙，1.404009s 用户 + 0.000000s 系统 = 1.404009s CPU (99.7%)

对于 flat_set：0.327714s 墙，0.327602s 用户 + 0.000000s 系统 = 0.327602s CPU (100.0%)

并且发布版本（我需要写出结果以让编译器优化不会过度杀伤我的代码）给每个版本大约 10 倍的加速。

我的结论是向量快 2-3 倍，而 boost flat_set 是最好的。对于少于数百个的条目数（例如 200 个），flat_set 插入并不比 std::set 慢（即无索引计算）。

```
int N = 10000;
{
    boost::timer::auto_cpu_timer t;
    std::set<int> s;
    for (int i = 0; i < N; ++i)
    {
        auto it = s.insert(i);
        int index = std::distance(s.begin(), it.first);
    }
}

{
    boost::timer::auto_cpu_timer t;
    std::vector<int> v;
    for (int i = 0; i < N; ++i)
    {
        v.insert(v.begin(), i);
    }
}

{
    boost::timer::auto_cpu_timer t;
    boost::container::flat_set<int> s;
    for (int i = 0; i < N; ++i)
    {
        auto it = s.insert(-i); // negative sign is used to make insertion
                                // (at the beginning) expensive
        int index = std::distance(s.begin(), it.first);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:13:03.247

分离存储和索引：

有一个整数向量 {I}，它索引你的对象类型的存储向量，{T}。

{I} 通过比较它在 {T} 中指向的对象进行排序。对 {I} 的插入/删除比对 {T} 的插入/删除便宜。

每当您将新项目添加到 {T} 向量时，都会将其索引插入到已排序的 {I} 中。

当您删除一个项目时，删除 {I} 中的索引，但您可以保持 {T} 中的对象不变，只需将刚刚删除的索引 push_back 到重用向量 {I'} 中。下次添加新项目时，可以将 {I'} 中的索引 pop_back 并重用存储。

如果您知道曾经使用过的项目数，您可以在启动时在 {T} 上调用 resize() 以避免在运行时（重新）分配。

这种方法类似于使用指针向量，优点是动态分配更少，缓存更友好，因为对象存储在连续内存中。

# html - 使用 Canvas 实现虚拟 Web 浏览器

> ID：14124835
> 
> 赞同：2
> 
> 时间：2013-01-02T15:44:31.397
> 
> 标签：html, canvas, html-parsing, html5-canvas

是否有可能在您现有的网络浏览器中使用画布创建一个虚拟网络浏览器，以在所有浏览器中实现网站近乎像素的完美表示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:02:51.653

看看[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/) - 这是一个使用 Canvas 元素的 HTML 渲染器。有一些限制（一些 CSS3 属性不起作用），你只能用它做静态图像。但它仍然很酷。

此外，就元素的精确定位而言，它仍将是特定于浏览器的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:48:26.243

理论上：是的，也许……不。

实际上：不。

你不能在画布上播放 flash/silverlight/java 小程序。此外，您还必须：

*   手动解析 DOM，
*   应用 CSS，
*   执行 JS，
*   渲染一切，
*   制作输入元素，
    *   下拉菜单，
    *   超链接，
    *   鼠标悬停，
    *   以及所有那种互动工作，
*   以及我忘记的其他任何事情。
*   像适当的抗锯齿

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:45:32.130

只是困难重重。

为什么不直接使用`<iframe>`？

# java - Java Scanner 类 useDelimiter 方法

> ID：14124836
> 
> 赞同：0
> 
> 时间：2013-01-02T15:44:31.980
> 
> 标签：java

我必须阅读包含自 1933 年以来所有 NCAA Division 1 冠军赛的文本文件，

文件格式如下：1939:Villanova:42:Brown:30 **1945：纽约大学：70：俄亥俄州：65 ** *一些大学有多个空格的事实给我带来了很多麻烦，因为我们只需要读取学校名称并丢弃年份、分数和冒号。我不知道我是否必须使用一个丢弃什么空格的分隔符，但底线是我很迷茫。*

 *我们要丢弃日期、分数和“：”。我对 useDelimiter 方法有点熟悉，但是我读到 .split("") 可能有用。由于缺乏模式知识，我遇到了很多问题。

这是我到目前为止所拥有的：

```
class NCAATeamTester
{
public static void main(String[]args)throws IOException
{
NCAATeamList myList = new NCAATeamList();     //ArrayList containing teams
Scanner in = new Scanner(new File("ncaa2012.data"));   
in.useDelimiter("[A-Za-z]+");      //String Delimeter excluding non alphabetic chars or ints
while(in.hasNextLine()){
String line = in.nextLine();
String name = in.next(line); 
String losingTeam = in.next(line);
//Creating team object with winning team 
NCAATeamStats win = new NCAATeamStats(name); 
myList.addToList(win);       //Adds to List
//Creating team object with losing team 
NCAATeamStats lose = new NCAATeamStats(losingTeam);
myList.addToList(lose)
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:52:09.723

关于什么

```
String[] spl = line.split(':');
String name1 = spl[1]; 
String name2 = spl[3]; 
```

?

或者，如果同一行有更多记录，请使用正则表达式：

```
String line = "1939:Villanova:42:Brown:30   1945:New York University:70:Ohio State:65";

Pattern p = Pattern.compile("(.*?:){4}[0-9]+");
Matcher m = p.matcher(line);

while (m.find())
{
    String[] spl = m.group().split(':');
    String name = spl[1];
    String name2 = spl[3];
} 
```*

# c# - 使用javascript选择asp linkbutton cssclass

> ID：14124843
> 
> 赞同：-1
> 
> 时间：2013-01-02T15:44:49.827
> 
> 标签：c#, javascript, asp.net

当用户选择当前链接时，我有三个`linkbuttons`它应该是红色的。但目前它甚至使访问的链接也变成红色，这不应该是这种情况。有人可以帮忙吗？

```
<li>
<asp:LinkButton ID="lnkCat1" runat="server" 
OnClick="lnkCat1_Click" CssClass="mylink" 
OnClientClick="return changeColor();"></asp:LinkButton></li>

<script type="text/javascript">
  function changeColor(e) {
        e.style.color = "red";
        }              
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:51:15.277

试试这个代码：

请先包含 jquery

css

```
.red {
     color: red;
} 
```

javascript:

```
<script type="text/javascript">
    function changeColor(e) {
        $('.red').removeClass('red');
        $(e).addClass("red"); 
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:07:07.713

这是原始的 javascript 代码，即您不需要像 jQuery 这样的库。

```
<li>
<asp:LinkButton ID="lnkCat1" runat="server" 
OnClick="lnkCat1_Click" CssClass="mylink" 
OnClientClick="return changeColor(this); return false;"></asp:LinkButton></li>

<script type="text/javascript">
  function changeColor(e) {
     e.style.color = "red";
  }              

</script> 
```

这条线

```
OnClientClick="return changeColor(this); return false;" 
```

将链接元素传递给 javascript 函数`changeColor`，并且立即`return false`，因此链接的默认操作（访问另一个页面）永远不会发生。（这对于 IE 可能有所不同）

你的实际功能也有一个额外`}`的。

我会使用诸如 Firebug 或 Chrome 的开发者工具之类的东西，这样您就可以查看出现的 javascript 错误

# iphone - 当 TouchImageView 在视图中拖动时，如何不参与另一个视图？

> ID：14124844
> 
> 赞同：0
> 
> 时间：2013-01-02T15:44:54.437
> 
> 标签：iphone, objective-c, ios

我在屏幕上有两个视图（A 和 B）。每个视图都包含 TouchImageView。当我将 A 视图中的图像拖到 B 时，我不想在 B 视图中显示图像。但图像似乎是 A 和 B 视图。怎么能忽略B上的出现？

* * *

这里是touchimageview源码 [——TouchImageView源码](http://read.pudn.com/downloads164/sourcecode/macos/747251/MultiTouchDemo/Classes/TouchImageView.m__.htm)

```
 UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 300, 300)];
    TouchImageView *touch = [[TouchImageView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    touch.image = [UIImage imageWithContentsOfFile: [[NSBundle mainBundle] pathForResource:@"57" ofType:@"png"]];
    touch.userInteractionEnabled=TRUE;
    [view addSubview:touch];
    [self.view addSubview:view]; 
```

我想拖动图像，只有坐标（0、0、300、300）中的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:19:14.837

```
 [view setClipsToBounds:YES]; 
```

当我添加此代码时，我的问题就解决了，没有视图区域就看不到图像。

# java - Java Play框架可以在内存中存储超过100KB的请求而不写入磁盘吗

> ID：14124845
> 
> 赞同：2
> 
> 时间：2013-01-02T15:44:56.997
> 
> 标签：java, playframework

我正在开发一个吞吐量密集型应用程序，并且在尝试识别瓶颈时，我发现将请求正文写入磁盘然后在收到整个请求时将其读回是一个非常缓慢的操作。

我的发送方将在一个 HTTP POST 中向我发送高达 512KB 的数据，并且无法更改，因此我正在寻找在服务器上更好地处理它的方法。在调试器中，我看到 Play 使用 RawBuffer 类来管理传入数据，并且该类具有*memoryThreshold*字段，当前设置为 100KB。有谁知道以编程方式或通过配置文件将此默认值更改为 512KB 的方法？

*更新：* 我尝试过但没有成功的事情：

*   在 application.conf 文件中输入“parsers.text.maxLength=512K”。
*   只是为了在application.conf中的“parsers.raw.maxLength = 512K”和“parsers.raw.memoryThreshold = 512K”踢和咯咯笑
*   在我的操作方法中添加“@BodyParser.Of(value = BodyParser.Raw.class, maxLength = 512 * 1024)”注释。
*   上面所有三个 application.conf 属性名称都使用“512288”而不是“512K”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:49:59.177

如果我查看我阅读的代码

```
lazy val DEFAULT_MAX_TEXT_LENGTH: Int = Play.maybeApplication.flatMap { app =>
  app.configuration.getBytes("parsers.text.maxLength").map(_.toInt)
}.getOrElse(1024 * 100) 
```

这让我认为该`parsers.text.maxLength`物业就是您要寻找的物业。

# mysql - 工作台不允许删除表

> ID：14124846
> 
> 赞同：0
> 
> 时间：2013-01-02T15:44:58.650
> 
> 标签：mysql, mysql-workbench

我有一个表`newsletter`，我想在其中删除/更新/插入数据，但是当我输入

```
delete * from crm_base.newsletter 
```

例如，它在该行中得到一个红色的“X”，并给我以下错误消息：

```
Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '* from crm_base.newsletter_temp' at line 1. 
```

我已经在首选项中取消选中安全更新模式并重置工作台，但它仍然给我同样的错误。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:46:33.180

```
delete from crm_base.newsletter 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:47:30.180

您的语法不正确，请使用`DELETE FROM crm_base.newsletter WHERE condition`. 检查[删除](http://dev.mysql.com/doc/refman/5.0/es/delete.html)语法参考。

# cordova - phonegap SQLite 插件 - 找出可用的存储空间

> ID：14124849
> 
> 赞同：1
> 
> 时间：2013-01-02T15:45:15.180
> 
> 标签：cordova, android-sqlite

我正在为我的 phonegap 应用程序使用以下插件

[https://github.com/brodyspark/PhoneGap-sqlitePlugin-Android](https://github.com/brodyspark/PhoneGap-sqlitePlugin-Android)

我知道我现在不限于 5mb，但我试图弄清楚我的应用程序实际可用的存储空间有多少。有没有办法获得 SQLite 数据库可用存储的最大容量？我知道有些手机限制了应用程序可以使用的资源量，我希望我的应用程序足够聪明，知道这个限制是什么。

我不确定这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:11:49.947

PhoneGap 本身不提供任何类似的功能。您将需要编写一个单独的插件或扩展您引用的插件添加此功能。如果您可以获取数据库文件或父目录的文件句柄，Android 似乎提供了一种可能是您正在寻找的方法。

[http://developer.android.com/reference/java/io/File.html#getUsableSpace](http://developer.android.com/reference/java/io/File.html#getUsableSpace) ()

# css - 页脚 div 的位置不一致

> ID：14124850
> 
> 赞同：-3
> 
> 时间：2013-01-02T15:45:16.310
> 
> 标签：css

所有三个页脚都具有相同的 html 和 css 代码，但在三个页面中的每一个页面中的作用都不同。有时它在底部，在其他页面它在中间，在另一个它在底部，但在它的前一个 div （#main）之间有一个间隙

```
jsfiddle.net/BBnzW/ 
jsfiddle.net/6cYQg/ 
jsfiddle.net/USSds/ 
```

猜猜为什么？请仅在确保在 jsfiddle 中有效后才能回答。我之前做过很多尝试。

该代码高于stackoverflow代码限制30000chars，所以不能在这里粘贴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:51:06.630

`#main { position: absolute }`导致页脚位于内容的中间。并且正在产生额外`.w1 { padding-bottom: ... }`的`#footer { margin-top: ... }`空白。但我不认为删除它会完全解决你的问题。

似乎您正在尝试获得粘性页脚。试试这个[http://jsfiddle.net/fL4XF/18/](http://jsfiddle.net/fL4XF/18/)。简单的css，没有额外的标记。它适用于 IE7。

这是另一个适用于 IE6 的[Sticky Footer](http://www.cssstickyfooter.com/using-sticky-footer-code.html)。但是，它需要额外的标记。由你决定。

# c++ - 如何防止 QTextDocument 块或框架中的分页符？

> ID：14124853
> 
> 赞同：5
> 
> 时间：2013-01-02T15:45:24.517
> 
> 标签：c++, qt

是否可以防止 QTextDocument 中表格内的任何地方分页？

在我的 QTextDocument 中，我有很多从小图像块创建的较大图像。添加大图像似乎是一种资源浪费，因此一个明显的解决方案似乎是创建一个表格，将小图像放在每个单元格中。

问题是现在这些表可以在每一行之后有分页符。我知道防止它的唯一方法是为每个表格/框架格式调用 setPageBreakPolicy() ，但这需要在每个较大的图像之前强制分页。我希望仅在必要时使用这些分页符（较大的图像不适合）。

有可能做我想做的事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-01T11:38:48.933

对于 QTextTable，您可以通过将 QTextTableFormat 的 headerRowCount 属性设置为等于表中的行数来防止将其拆分为多个页面。此属性设置跨页边界时重复的行数，重复表头。如果您将整个表格设置为标题，则整个表格总是放在一个页面上。

一个警告：不要对可能不适合单页的表格执行此操作。在这种情况下，Qt 会搞砸。

我希望 Qt 将来会在 pageBreakPolicy 属性中添加一些额外的标志，以便我们可以以干净的方式创建牢不可破的表/框架。

# xaml - Windows Phone 中的 Xaml 可见性绑定？

> ID：14124857
> 
> 赞同：0
> 
> 时间：2013-01-02T15:45:45.710
> 
> 标签：xaml

我正在使用 LongListSelector，我想将 ListHeader 的可见性绑定到项目的数量。如果没有任何内容，则将其折叠起来，否则使其可见。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:53:56.637

使用 valueconverter 来获得这个 => 实现 IValueconverter 接口。

如果没有项目返回枚举折叠，否则可见。

使用转换器将项目的计数绑定到折叠的依赖项属性。

有关更多信息，请参阅 msdn => [http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)

# javascript - 谷歌地图自定义标记图像不起作用

> ID：14124858
> 
> 赞同：0
> 
> 时间：2013-01-02T15:45:53.517
> 
> 标签：javascript, google-maps-api-3

出于某种原因，每当我尝试为我的地图使用自定义标记图像时，它只会显示默认值。这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Google Maps JavaScript API v3 Example: Marker Simple</title>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=false" type=
        "text/javascript"></script>
        <script type="text/javascript">        
            function initialize() {
                var mapOptions = {
                        zoom: 3,
                        center: new google.maps.LatLng(-25.363882,131.044922),
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                map = new google.maps.Map(document.getElementById('map'), mapOptions);
                var marker = new google.maps.Marker({
                        position: new google.maps.LatLng(-25.363882,131.044922),
                        map: map,
                        title: 5,
                        icon: new google.maps.MarkerImage('http://www.gettyicons.com/free-icons/108/gis-gps/png/24/needle_left_yellow_2_24.png',
                                new google.maps.Size(24, 24),
                                new google.maps.Point(0,0),
                                new google.maps.Point(0, 24))
                    });
            }
        </script>
    </head>
    <body onload="initialize()">
        <div id="map" style="width: 780px; height: 480px"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:54:07.853

问题出在您的标题选项中，它必须是一个字符串。所以替换它`"5"`，它会工作！

**见演示：http:** [//jsbin.com/uwudab/1/edit](http://jsbin.com/uwudab/1/edit)

# iphone - EKEvents 存储对象初始化

> ID：14124863
> 
> 赞同：2
> 
> 时间：2013-01-02T15:46:26.663
> 
> 标签：iphone, objective-c, ipad, ekeventkit, ekeventstore

我想创建一个 EKEventStore 对象，并在不同的类中使用它，我可以在每个类中使用不同的实例吗？或者我必须使用单例模式创建一个 EKEventStore 实例？

Apple 文档建议创建一个实例，但他们没有指定这个实例是针对每个类还是针对整个应用程序，请提供建议，我在此引用 Apple 文档：“一个 EKEventStore 对象需要相对大量的时间来“

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:39:49.477

我个人使用单例，我认为“在您的应用程序加载时初始化单个事件存储”的措辞支持这一点。

# php - 如何在页面加载时自动计算路线？

> ID：14124864
> 
> 赞同：0
> 
> 时间：2013-01-02T15:46:28.037
> 
> 标签：php, javascript, google-maps

我有一个谷歌地图，我想用预先填充的路线自动加载（取自一系列 PHP 表单提交）。

目前，PHP 表单在一个页面中达到高潮，该页面上有一个谷歌地图，一些带有起点和终点的下拉框（来自他们以前的 PHP 表单提交），以及下拉菜单上的 onChange 函数计算路线（`onChange="calcRoute();"`在下面的示例中）。这很好用，但实际上，每个最终形式最终都只有一个路线选项。因此，让用户“选择”路线的起点和终点是毫无价值的 - 每个下拉菜单中只有一个选项，所以我不妨在页面时自动加载这些选项以及它们之间的计算路线负载。

有没有办法做到这一点？

我的方向功能如下所示：

```
 <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=false"></script>
<?PHP
$Start_latLng = $_POST["start-latitude"] . ", " . $_POST["start-longitude"];
$End_latLng = $_POST["end-latitude"] . ", " . $_POST["end-longitude"];
?>
    <script>
      var directionDisplay;
      var directionsService = new google.maps.DirectionsService();
      var map;

      function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var mapOptions = {
          zoom:7,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: new google.maps.LatLng(54.219218, -2.905669)
        }
        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
        directionsDisplay.setMap(map);
      }

      function calcRoute() {
        var start = document.getElementById('start').value;
        var end = document.getElementById('end').value;
        var request = {
            origin:start,
            destination:end,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
          }
        });
      }
    </script> 
```

...我的下拉菜单由 PHP $_POST 函数的结果填充。

显然，我需要等待地图加载，然后才能计算路线，因此可能需要暂停一下 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:58:49.420

谢谢@Robot Woods： **你能开火 calcRoute(); 作为初始化函数的最后一行？– 机器人伍兹**

# wix - wix不更新可执行文件

> ID：14124868
> 
> 赞同：0
> 
> 时间：2013-01-02T15:46:35.093
> 
> 标签：wix, wix3.6

我是 WIX 的新手。事实上，这是我的第一个项目。因此，我遇到问题应该不足为奇。

我已经完成了安装程序的所有设置并准备好运行，但今天早上我需要对我的服务进行更改，所以我进行了更改并进行了编译。我构建了 WIX 项目并安装了它。我启动了我的服务并运行了它，但是旧代码被执行了。事实证明，我的服务的旧版本仍然安装。这是否意味着新版本的服务没有打包或者我缺少某种升级规则？由于某种原因，PDB 文件得到了更新，但 EXE 没有。

下面是我的 wxs 文件。请善待...

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">

<?define AppName="My Service"?>
<?define MfgName="My Company"?>
<?define SourcePath="..\My Service\bin\$(var.Configuration)"?>

<Product Name="$(var.AppName)" Language="1033" Version="1.0.0.0" Manufacturer="$(var.MfgName)" 
       Id="*" UpgradeCode="063de86b-f12b-4af1-91ff-ce0917fffd5c" Codepage="1252">

<Package Id="*" Keywords="Installer" Description="$(var.AppName) Installer" 
         Manufacturer="$(var.MfgName)" Comments="My Service blah blah blah"
         InstallerVersion="200" Compressed="yes" InstallScope="perMachine" SummaryCodepage="1252" />

<!--
    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
    <MediaTemplate />
-->

<Media Id="1" Cabinet="setup.cab" EmbedCab="yes" DiskPrompt="CD-ROM #1"/>
<Property Id="DiskPrompt" Value="$(var.AppName) Installer [1]"/>

<Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="ProgramFilesFolder" Name="PFiles">
    <Directory Id="CompanyFolder" Name="$(var.MfgName)">
              <Directory Id="INSTALLFOLDER" Name="$(var.AppName)">
        <Component Id="ServiceFile" Guid="3688d9ee-08ed-4dde-87d8-3b7a752a99bf">
          <File Id="ServiceEXE" Name="My Service.exe" DiskId="1" Source="$(var.SourcePath)\My Service.exe" KeyPath="yes" Vital="yes" />
          <File Id="ServicePDB" Name="My Service.pdb" DiskId="1" Source="$(var.SourcePath)\MY Service.pdb" KeyPath="no" Vital="yes"/>
          <File Id="LibraryDLL" Name="library.dll" DiskId="1" Source="$(var.SourcePath)\library.dll" KeyPath="no" Vital="yes"/>
          <File Id="LibraryPDB" Name="library.pdb" DiskId="1" Source="$(var.SourcePath)\library.pdb" KeyPath="no" Vital="yes"/>
          <File Id="Config" Name="My Service.exe.config" DiskId="1" Source="$(var.SourcePath)\My Service.exe.config" KeyPath="no" Vital="yes"/>

          <ServiceInstall Id="InstallService" Name="MyService" Type="ownProcess" ErrorControl="normal" Start="auto"
                          DisplayName="$(var.AppName)" Description="My Service blah blah blah">
            <ServiceConfig OnInstall="yes" DelayedAutoStart="yes" />
          </ServiceInstall>
          <ServiceControl Id="ControlService" Name="MyService" Remove="both" Stop="both" Wait="no"/>
        </Component>
      </Directory>
    </Directory>
        </Directory>
    </Directory>

<Feature Id="MainFeature" Title="$(var.AppName) Setup" Level="1">
  <ComponentRef Id="ServiceFile"/>
    </Feature>
</Product>
</Wix> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:47:59.973

如果安装成功但文件未更新，您应该记录安装以查看原因。例如：

```
msiexec /i filename.msi /lvoicewarmupx log.txt 
```

文件未更新的一个原因是，如果 Windows Installer 检查现有文件的版本并且它比您尝试安装的文件的版本新。

# javascript - 使用 Javascript 将名称更改为 HTML 表的导出 Excel

> ID：14124869
> 
> 赞同：1
> 
> 时间：2013-01-02T15:46:35.213
> 
> 标签：javascript, html, excel, html-table

我正在使用这个小 Javascript 函数将 HTML 表导出到 excel 存档：

```
$("#btn_export").click(function (e) {
    window.open('data:application/vnd.ms-excel,' + encodeURIComponent(HTML_table));
    e.preventDefault();
}); 
```

问题是，excel档案的名称总是“下载”

![在此处输入图像描述](../Images/7cf4a204b321abc7004612e9b2650497.png)

抱歉，图片是西班牙语。我可以做些什么来更改存档名称？

# magento - Magento 更改电子邮件模板中的付款信息

> ID：14124870
> 
> 赞同：0
> 
> 时间：2013-01-02T15:46:37.293
> 
> 标签：magento, email, templates

我对电子邮件模板有一个小问题。在结帐和购物车页面中，我设法将“总计”更改为“总计”，但这在电子邮件模板中并没有改变。

有谁知道我可以如何删除总计不包括增值税。并将“包含增值税的总计”更改为“总计”？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:14:40.223

包含总数的电子邮件模板位于：

```
email/order/invoice/items.phtml 
```

更具体地说，它是这行代码：

```
<?php echo $this->getChildHtml('invoice_totals')?> 
```

的模板`invoice_totals`是`sales/order/totals.phtml`

总计的模板位于：

```
tax/checkout/grandtotal.phtml 
```

要获得总计，您可以使用以下代码：

```
<?php $grandTotal =  Mage::getBlockSingleton('tax/checkout_grandtotal')->getTotalExclTax(); ?> 
```

# c# - 如何将两个 .cs 文件编译成单个 DLL？

> ID：14124871
> 
> 赞同：2
> 
> 时间：2013-01-02T15:46:39.303
> 
> 标签：c#

说我有`foo.cs`和`bar.cs`。如果我为每个源文件创建两个单独的项目并将它们编译为两个 DLL，那么在其他项目中导入和使用它们就没有问题。

如果我想要单个 DLL 的输出，我应该怎么做？（保留单独的源文件）一个 DLL 文件可以有两个命名空间吗？`foo`如果没有，我如何将内容`bar`放入单个命名空间？（我可以编辑它们）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T15:48:21.187

您只需要将这两个文件添加到同一个项目中。

> 一个 DLL 文件可以有两个命名空间吗？

是的。相反，一个命名空间可以在多个 DLL 中使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T15:48:23.497

> 如果我创建两个单独的项目

创建一个项目，其中包含两个文件，以生成一个 DLL 作为输出。命名空间可以是您喜欢的任何名称，但约定建议项目中的类共享一个公共根命名空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T16:00:53.693

请参阅[ILMerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)。

微软说：

> [ILMerge](http://www.microsoft.com/en-us/download/details.aspx?id=17630)是一个实用程序，可用于将多个 .NET 程序集合并为一个程序集。它可从[Microsoft .NET Framework 开发人员中心的](http://msdn.microsoft.com/de-ch/vstudio/aa496123)[工具和实用程序](http://msdn.microsoft.com/en-us/vstudio/aa496123)页面免费使用。

* * *

命名空间完全独立于源文件和项目。您可以在一个项目中甚至在一个文件中拥有多个命名空间，也可以在多个项目中拥有一个命名空间。当然，您可以在一个项目中拥有多个源文件（每个项目几乎总是有很多源文件，除非它是“Hello World”项目）

您可以在“应用程序”选项卡的“默认名称空间”字段的项目属性中更改为新源文件提供的默认名称空间。您还可以在项目中创建新文件夹和子文件夹。这些文件夹的名称会自动添加到在这些文件夹中创建的新源文件的默认命名空间（以点分隔`.`）。当然，您始终可以手动编辑命名空间语句。您添加或删除和嵌套命名空间语句。

您还可以在一个解决方案中拥有多个项目。您甚至可以在一个解决方案中混合使用不同类型和语言（例如 VB 和 C#）的项目。每个项目通常会生成一个程序集（dll 或 exe）。从技术角度来看，项目是否在同一个解决方案中没有区别。这只是组织问题。

看：

*   MSDN：[命名空间的名称](http://msdn.microsoft.com/en-us/library/vstudio/ms229026%28v=vs.100%29.aspx)
*   MSDN：[命名空间命名指南](http://msdn.microsoft.com/en-us/library/893ke618%28v=vs.71%29.aspx)
*   所以问题：[命名空间命名约定](https://stackoverflow.com/a/918913/880990)。

复杂解决方案的示例：
![复杂解决方案示例](../Images/f03e905d1c605d6f4d62f5a55236c553.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T15:51:29.130

您可以在单个项目中拥有多个子命名空间。不过，至少给项目（以及编译后的 DLL）一个总体命名空间可能是更好的做法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T16:20:25.450

如果您只需要在这些文件中合并一个类，您可以使用[部分类](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.100%29.aspx)

但无论如何，它们必须在同一个命名空间中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T15:49:01.433

C# 命名空间非常开放。

是的，您可以在一个库中拥有多个命名空间。

而且：您可以将内容添加到现有的命名空间中。例如：您可以在`System.Linq`命名空间中添加扩展方法，这样您只需要包含 dll 而不需要额外的包含。

# php - 将 xPath 变成变量

> ID：14124872
> 
> 赞同：0
> 
> 时间：2013-01-02T15:46:44.713
> 
> 标签：php, xml, xpath, domdocument

如何将输出转换为变量，以便我可以交叉引用它以查看它是否与我设置的另一个变量匹配

```
foreach ($nodes as $i => $node) {
  echo $node->nodeValue;
} 
```

我知道这是不正确的并且行不通，但是：

```
foreach ($nodes as $i => $node) {
  $target = $node->nodeValue;
}

$match = "some text"

if($target == $match) {
  // Match - Do Something
} else {
  // No Match - Do Nothing
} 
```

实际上，这解决了我的问题，但可能不是正确的方法：

```
libxml_use_internal_errors(true);
$dom = new DomDocument;
$dom->loadHTMLFile("http://www.example.com");
$xpath = new DomXPath($dom);
$nodes = $xpath->query("(//tr/td/a/span[@class='newprodtext' and contains(translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'adidas')])[1]");
foreach ($nodes as $i => $node) {

echo $node->nodeValue, "\n";
$target[0] = $node->nodeValue;
}

$match = "adidas";

if($target == $match) {
    // Match
} else {
    // No Match
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:15:15.517

您的问题更多是关于对循环的一般理解、为数组赋值以及在 php 中使用*if*条件而不是使用 xpath。

*   在您的 foreach 循环中，您将每个分配给数组中的相同索引，`$node`将`nodeValue`始终只有一个值（最后一个）`$target``$target`
*   在您的`if`条件语句中，您将一个`array`（或者`null`如果`$nodes`没有项目，所以您可能想先声明`$target`）与字符串“adidas”进行比较，这永远不会是真的。

您可能想要执行以下操作：

```
$matched = false;
$match = 'adidas';
foreach ($nodes as $i => $node) {
    $nodeValue = trim(strip_tags($node->textContent));
    if ($nodeValue === $match) {
        $matched = true;
        break;
    }
}

if ($matched) {
    // Match
} else {
    // No Match
} 
```

**更新**

[我看到这个 xpath 表达式是在另一个答案](https://stackoverflow.com/a/14122881/165969)中给你的，大概已经做了匹配，所以你只需要检查[长度](http://php.net/manual/en/class.domnodelist.php#domnodelist.props.length)属性`$nodes`

```
if ($nodes->length > 0) {
    // Match
} else {
    // No match
} 
```

# c# - 如何在具有 AllowPartiallyTrustedCallersAttribute 的库程序集中实现 .NET 4 中的 Exception.GetObjectData？

> ID：14124874
> 
> 赞同：6
> 
> 时间：2013-01-02T15:46:58.330
> 
> 标签：c#, code-access-security

我有一个标有 的程序集，`AllowPartiallyTrustedCallersAttribute`其中包含一个自定义异常类。我想通过覆盖使其可序列化`GetObjectData`。

随着 .NET 4，`GetObjectData`已经成为一种`SecurityCritical`方法。这意味着覆盖也需要是`SecurityCritical`. 由于我的程序集标有，因此除非另有说明，否则其中的`AllowPartiallyTrustedCallersAttribute`所有代码都是自动的。`SecurityTransparent`因此，我将 应用于`SecurityCriticalAttribute`GetObjectData 覆盖：

```
using System;
using System.Runtime.Serialization;
using System.Security;

[assembly:AllowPartiallyTrustedCallers]

namespace Library
{
  [Serializable]
  public class MyException : Exception
  {
    public string String;

    public MyException ()
    {
    }

    protected MyException (SerializationInfo info, StreamingContext context)
        : base(info, context)
    {
      String = info.GetString ("String");
    }

    [SecurityCritical]
    public override void GetObjectData (System.Runtime.Serialization.SerializationInfo info, System.Runtime.Serialization.StreamingContext context)
    {
      info.AddValue ("String", String);
      base.GetObjectData (info, context);
    }
  }
} 
```

这在完全信任的情况下工作得很好，例如，当我从我的桌面运行链接这个程序集的代码时。

但是，当我从安全沙箱（见下文）使用此类时，我得到`TypeLoadException`：

> 覆盖成员时违反了继承安全规则：'Library.MyException.GetObjectData(System.Runtime.Serialization.SerializationInfo, System.Runtime.Serialization.StreamingContext)'。重写方法的安全可访问性必须与被重写方法的安全可访问性相匹配。

我的问题：

*   为什么我会收到此异常？我确实将覆盖标记为`SecurityCritical`，那么问题出在哪里？
*   由于`SecurityCriticalAttribute`在我的沙箱中被忽略，此类在其他部分信任主机（例如 IIS/ASP.NET 或 SQL Server）中将如何表现？
*   如何在 .NET 4 中实现可序列化的异常类？

**沙盒代码：**

```
var evidence = new Evidence();
evidence.AddHostEvidence (new Zone (SecurityZone.Internet));
var setupInfo = AppDomain.CurrentDomain.SetupInformation;
var permissionSet = SecurityManager.GetStandardSandbox (evidence);
permissionSet.AddPermission (new ReflectionPermission (ReflectionPermissionFlag.MemberAccess));
permissionSet.AddPermission (new SecurityPermission (SecurityPermissionFlag.ControlEvidence));
var sandbox = AppDomain.CreateDomain ("Sandbox", evidence, setupInfo, permissionSet); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-26T22:25:01.710

您已经自己回答了问题的第一部分。您的程序集被加载为安全透明，因为它没有以完全信任的方式加载，因此该`SecurityCritical`属性被忽略。所以你得到了例外。

而不是覆盖`GetObjectData`，您应该处理[SerializeObjectState](https://msdn.microsoft.com/en-us/library/system.exception.serializeobjectstate(v=vs.110).aspx)事件并创建一个实现[ISafeSerializationData](https://msdn.microsoft.com/en-us/library/system.runtime.serialization.isafeserializationdata(v=vs.110).aspx)的类型来存储序列化的异常状态。这些存在于这个确切的场景中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:08:39.817

除了完全受信任的代码之外，您不能调用标有[securitycritical属性的代码：](http://msdn.microsoft.com/en-us/library/system.security.securitycriticalattribute.aspx)

> SecurityCriticalAttribute 相当于完全信任的链接需求。标有 SecurityCriticalAttribute 的类型或成员只能由完全受信任的代码调用；它不必要求特定的权限。它不能被部分受信任的代码调用。

[这里](https://stackoverflow.com/questions/5055632/net-4-allowpartiallytrustedcallers-attribute-and-security-markings-like-secur)有一个相关的问题，讨论了[securitysafecriticalattribute](http://msdn.microsoft.com/en-us/library/system.security.securitysafecriticalattribute.aspx)的使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-01T16:02:50.690

好吧，我知道这篇文章已经很老了，但是根据我最近的观察，如果您不在沙盒中提供程序集 FullTrust ，`AppDomain`则加载的程序集中的所有代码都将是安全透明的。这意味着`SecurityCriticalAttribute`应用于`MyException.GetObjectData`将什么都不做。它将是 SeurityTransparent，并且肯定与它的基本方法（即 SecurityCritical）不兼容。

希望这个提示会有所帮助。

请参阅[https://docs.microsoft.com/en-us/dotnet/framework/misc/how-to-run-partially-trusted-code-in-a-sandbox](https://docs.microsoft.com/en-us/dotnet/framework/misc/how-to-run-partially-trusted-code-in-a-sandbox)，了解如何将沙盒中的某些程序集标记`AppDomain`为完全可信。

# javascript - 更改 window.navigator JavaScript

> ID：14124875
> 
> 赞同：2
> 
> 时间：2013-01-02T15:47:00.067
> 
> 标签：javascript, arrays, browser

我正在尝试更改 window.navigator。但由于某种原因无法改变它：

```
--
[10:40:28.802] window.navigator['buildID'];
[10:40:28.811] "20121129162756"
--
[10:40:47.225] window.navigator['appCodeName'] = "I want to change it";
[10:40:47.234] "I want to change it"
--
[10:40:55.633] window.navigator['appCodeName'];
[10:40:55.643] "Mozilla"
--
[10:41:02.405] window.navigator['myProperty'] = 'someproperty';
[10:41:02.414] "someproperty"
--
[10:41:07.651] window.navigator['myProperty'];
[10:41:07.660] "someproperty" 
```

希望我的问题很清楚：“如何更改 window.navigator？”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T15:48:04.630

你不能。其预先存在的属性是只读的。为什么要修改它超出了我的范围...

# android - 如何将数据从定时器任务发送到android服务

> ID：14124876
> 
> 赞同：-1
> 
> 时间：2013-01-02T15:47:00.017
> 
> 标签：android, timertask

我正在寻找一种将数据从我的计时器任务发送到服务的方法。我看过许多其他与处理程序相关的帖子，但我不想在我的主线程中运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:54:25.693

您可以编写一个单例类来保存您想要共享的数据。这只是一种不标准的方式。

```
TimerTask task = new TimerTask() {
            public void run() {
                if (condition) {
                    MySingleton.getInstance().setData(put data here);
                } else {
                    timer.cancel();
                }
            }
        };
        Timer timer = new Timer();
        timer.schedule(task, 1000, 1000);
//then cancel timer somewhere by 
timer.cancel(); 
```

然后在服务中，您可以通过类似这样的方式获取数据

```
DataType myData = MySingleton.getInstance().getData(); 
```

# validation - 验证主干表单的单个字段

> ID：14124886
> 
> 赞同：2
> 
> 时间：2013-01-02T15:47:39.360
> 
> 标签：validation, backbone.js, coffeescript, backbone-forms

我希望能够使用[主干表单](https://github.com/powmedia/backbone-forms)和[主干验证](https://github.com/thedersen/backbone.validation)一次验证表单中的单个字段，但是如果我将我的要求放在模型验证而不是架构中，我会遇到问题。

我的模型是：

```
class Event extends Backbone.Model
  url: ->
    '/events' + (if @isNew() then '' else '/' + @id)

  validation:
    title:
      required: true
    start_date:
      required: true
    end_date:
      required: true

  schema: ->
    title:
      type: "Text"
    start_date:
      type: "DateTime"
      title: "Start Date"
      DateEditor: "DatePicker"
    end_date:
      type: "DateTime"
      title: "End Date"
      DateEditor: "DatePicker" 
```

我的视图中使用这些的代码是

```
class Events extends Backbone.View
  ...
  initialize: ->
    @form = new Backbone.Form(model: @model).render()
    Backbone.Validation.bind @form;

  validateField: (field) ->
    @form.on "#{field}:change", (form, fieldEditor) =>
      @form.fields[field].validate()

  render: ->
    ...
    @validateField for field of @form.fields
    ... 
```

但是，我的问题是，它似乎只验证我是否`required: true`像这样将 移动到架构中：

```
schema: ->
  title:
    type: "Text"
    validators: ["required"] 
```

但是我不想这样做，因为backbone.validation 有更广泛的内置验证器，我想在这个例子之外使用它们。

我注意到主干形式状态

> 有 2 个级别的验证：模式验证器和常规的内置 Backbone 模型验证。当调用 form.commit() 或 form.validate() 时，Backbone Forms 都会运行。

但是，当我验证各个字段时，我不确定它是否正在运行常规验证？想要这样做的原因是，当用户开始创建事件时，我不想验证他们尚未填写的字段。

有什么方法我仍然可以验证单个字段而无需将验证移动到架构中？

提前致谢。

=======**更新**=======

在查看各个字段的[表单编辑器源代码](https://github.com/powmedia/backbone-forms/blob/master/distribution/backbone-forms.js)时，验证功能如下：

```
validate: function() {
  var $el = this.$el,
      error = null,
      value = this.getValue(),
      formValues = this.form ? this.form.getValue() : {},
      validators = this.validators,
      getValidator = Form.helpers.getValidator;

  if (validators) {
    //Run through validators until an error is found
    _.every(validators, function(validator) {
      error = getValidator(validator)(value, formValues);

      return error ? false : true;
    });
  }

  return error;
}, 
```

它似乎没有使用模型验证，所以我想知道如何合并它？

# c# - SQL 中从 .NET 到 smalldatetime 的 DateTime - 如何进行查询？

> ID：14124887
> 
> 赞同：1
> 
> 时间：2013-01-02T15:47:39.800
> 
> 标签：c#, .net, sql-server-2008

我的代码中有一个`DateTime`组件，我想将它用于我的 SQL Server 数据库中的查询。

插入这个组件的时候，好像没有问题，但是查询`smalldatetime`值的时候，就是不知道怎么做。数据集始终为空。

```
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandText = "ReadDates"; 

dataset = new DataSet();

SqlParameter parameter = new SqlParameter("@date", SqlDbType.SmallDateTime);
parameter.Value = DateTime.Now();
cmd.Parameters.Add(parameter);

dataAdapter = new SqlDataAdapter(cmd);
dataAdapter.Fill(dataset);
return dataset; 
```

这是在我的存储过程中：

```
select * from TableDates
where ValueDate <= @date 
```

因此，当以这种格式输入参数时，我在 SQL Server Management Studio 中运行该过程没有问题：`'2000-03-03 04:05:01'`，但是当传递 a 时`DateTime`，查询始终为空。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T14:30:13.800

我使用 SQL Server 2008 R2 Express 进行了尝试。

这是我编写的示例存储过程：

```
CREATE PROCEDURE [dbo].[ShowGivenSmallDateTimeValue] 
    @givenSmallDateTime smalldatetime
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Simply return the given small date time value back to sender.
    SELECT @givenSmallDateTime
END 
```

这是执行该过程的 C# 代码：

```
var connectionBuilder = new SqlConnectionStringBuilder();
connectionBuilder.DataSource = "localhost\\sqlexpress";
connectionBuilder.IntegratedSecurity = true;

var now = DateTime.UtcNow;

using (var connection = new SqlConnection(connectionBuilder.ConnectionString))
using (var command = new SqlCommand())
{
    command.Connection = connection;
    command.CommandType = CommandType.StoredProcedure;
    command.CommandText = "ShowGivenSmallDateTimeValue";
    command.Parameters.Add(new SqlParameter("@givenSmallDateTime", SqlDbType.SmallDateTime) { Value = now });

    connection.Open();
    var result = (DateTime)command.ExecuteScalar();
    var difference = result - now;

    Console.WriteLine("Due to the smalldatetime roundings we have a difference of " + difference + ".");
} 
```

它很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T12:43:45.777

这是我为日期时间创建 SqlParameter 的代码；对于 SQL Server 2008，我们将值作为 datetime2 传递，因为 SQL 会从 datetime2 隐式转换为所有其他日期类型，只要它在目标类型的范围内......

```
 // Default conversion is now DateTime to datetime2\. The ADO.Net default is to use datetime. 
            // This appears to be a safe change as any datetime parameter will accept a datetime2 so long as the value is within the
            // range for a datetime. Hence this code is acceptable for both datetime and datetime2 parameters, whereas datetime is not 
            // (because it doesn't handle the full range of datetime2).
            SqlParameter sqlParam = new SqlParameter(name, SqlDbType.DateTime2); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-06T13:26:33.240

由于您的参数在日期和月份部分中包含零...sql server 将其转换但与您的日期不匹配....即，

如果 DATETIME.now() 返回 '2000-03-03 04:05:01'... 它被转换为 2000-3-3 不包括零...所以您还需要指定零以匹配您的日期。

# iphone - 在资产库中编写视频然后获取其属性的正确方法是什么

> ID：14124889
> 
> 赞同：5
> 
> 时间：2013-01-02T15:47:41.860
> 
> 标签：iphone, objective-c, ios

我正在使用 [library writeVideoAtPathToSavedPhotosAlbum:movieUrl completionBlock:^(NSURL *assetURL, NSError *error) 块在资源库中编写视频，然后将视频完全写入资源库之前提供 url。当我枚举块内的库以获取视频的属性时，我没有得到任何针对上述块给出的 url 的视频。如果我使用相同的 url 手动重新枚举资产库 3 或 4 次，我会得到视频属性。当我制作持续时间大于 5 分钟的视频时，通常会出现此问题我的代码是：

```
 library = [[ALAssetsLibrary alloc] init];
    [library writeVideoAtPathToSavedPhotosAlbum:movieUrl completionBlock:^(NSURL *assetURL, NSError *error)
    {   
        savedAssetURL = assetURL;
        [self assetsEmumeration:assetURL];
        NSLog(@"asset url %@",assetURL);
        if(error) 
        {
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Failed" message:[error localizedDescription] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:Nil];
            [alertView show];
        }
    }];

    -(void) assetsEmumeration:(NSURL *)_url 
    {   
    NSLog(@"assets enumeration ");
    ALAssetsLibrary *al;    
    void (^assetGroupEnumerator)(ALAssetsGroup *, BOOL *) = ^(ALAssetsGroup *group, BOOL *stop)
    {
        [group setAssetsFilter:[ALAssetsFilter allVideos]] ;
        [group enumerateAssetsUsingBlock:^(ALAsset *asset, NSUInteger index, BOOL *stop)
         {
             if (asset) 
             {
                 ALAssetRepresentation *representation = [asset defaultRepresentation];
                 NSURL *url = [representation url];
                 if([[url absoluteString] isEqualToString:[_url absoluteString]])
                 {
                     found = TRUE;
                     NSDictionary *asset_options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey];
                     AVAsset *avAsset = [[AVURLAsset alloc] initWithURL:url options:asset_options];
                     Float64 dur = CMTimeGetSeconds(avAsset.duration);
                     NSString *fileName = [representation filename];

                     appDelegate.videoLength = [NSString stringWithFormat:@"%f seconds",dur];
                     appDelegate.videoSize = [NSString stringWithFormat:@"%lld bytes",[representation size]];
                     appDelegate.originalFileName = [NSString stringWithFormat:@"%@",fileName];
                     [MBProgressHUD hideHUDForView:self.view animated:YES];
                     ExtraInfoViewController *extraInfoViewObj = [[ExtraInfoViewController alloc] init];
                     [self.navigationController pushViewController:extraInfoViewObj animated:YES];
                     NSLog(@"duration:%f,fileName:%@",dur,fileName);
                 }
                 else
                 {
                     found = FALSE;
                 }     
            }
         }];   
        if(found == FALSE)
        {
            NSLog(@"video not found");
        }
    };    
    void (^assetFailureBlock)(NSError *) = ^(NSError *error)
    {
        NSLog(@"failure");
        if(ALAssetsLibraryAccessGloballyDeniedError)
        {   
            UIAlertView *alerview = [[UIAlertView alloc] initWithTitle:@"Denied" message:@"Failed to get the meta data. Access to assets library is denied" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:Nil];
            [alerview show];
        }
    };
    al=[RecordVideoViewController defaultAssetsLibrary];
    [al enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:assetGroupEnumerator failureBlock:assetFailureBlock];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T07:43:29.403

```
// find out alAsset for that url and then do whatever you want with alAsset. 
library = [[ALAssetsLibrary alloc] init];
[library writeVideoAtPathToSavedPhotosAlbum:movieUrl completionBlock:^(NSURL *assetURL, NSError *error)
{   
    savedAssetURL = assetURL;
    NSLog(@"asset url %@",assetURL);
    if(error) 
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Failed" message:[error localizedDescription] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:Nil];
        [alertView show];
    }
    else
    {
        [library assetForURL:assetURL
                           resultBlock:^(ALAsset* alAsset) {
                           // do whatever you want with alAsset
                           }];
    }
}]; 
```

# ruby - 'require' 不适用于 rvm

> ID：14124891
> 
> 赞同：1
> 
> 时间：2013-01-02T15:47:49.440
> 
> 标签：ruby, rvm

以下代码位于我的 rails 应用程序的根文件夹中并 daemonizes/runs `myserver.rb`。

```
# myserver_control.rb

require 'rubygems'
require 'daemons'    # causes 'no such file to load -- daemons' error since gem reinstall with rvm

@options = {
    # options defined
}

Daemons.run('myserver.rb', @options) 
```

在我安装 rvm 之前它工作得很好，现在它似乎找不到守护进程 gem。我有一种感觉，也许上面是在某个系统范围的文件夹中搜索守护进程 gem？而不是能够使用 rvm 安装的守护进程 gem？如何在可以找到它的系统级别上安装守护程序 gem？或者我该如何做才能找到 rvm 安装的 gem？

目前我什至没有“系统”宝石集。已经安装 rvm 后，如何在系统级别安装 gems？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:16:31.350

如果希望使用系统 ruby​​ 和 gems，您可以输入

```
rvm use system 
```

这将允许使用系统安装的 ruby​​ 和 gems，但我认为这有点违背使用 RVM 的目的，我会在 RVM 中安装一个默认的 ruby​​ 并在其中安装任何 gems。要在安装后设置默认 Ruby，请键入

```
rvm --default use 1.9.2 
```

**编辑**

根据评论，您的问题在于运行 sudo，这会创建一个新的子外壳和不同的 rvm 实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:28:55.653

RVM 使用 gemsets 的概念，它们是您可以使用的独特的 gem 组，通常特定于 ruby​​ 版本（尽管您可以使它们特定于应用程序或全局）。

RVM 将在更改 ruby​​ 版本时更改您的 GEM_HOME，这会告诉 ru ygems 您的 gem 安装在哪里。因此，当您安装 RVM 时，您创建了一个新的空白 gemset，并且 RVM 告诉 ruby​​gems 使用它。

这是因为宝石并不总是在 ruby​​gems 之间交叉兼容。

但是，如果您只是编写 rails 应用程序，您现在应该忽略以上内容并使用 bundler。Place 'gem "daemon"' 我是你的 Gemfile 并从你的应用程序根目录运行包更新。

Bundle 可帮助您在每个应用程序的基础上维护 gem，这意味着如果您在其他地方升级 gem，您的应用程序不会中断。使用它并了解它的工作原理是最佳实践。祝你好运。

# iphone - 如何使用 Game Center 制作回合制纸牌游戏？

> ID：14124893
> 
> 赞同：-3
> 
> 时间：2013-01-02T15:47:56.273
> 
> 标签：iphone, ios, game-center

我正在开发基于回合的纸牌游戏。这是游戏结构的简短描述：

1.  向每位玩家发 4 张牌
2.  随机玩家翻出 1 张牌，在他之后翻出另一张牌（看过前任玩家的牌）等等。
3.  最后，拥有最高牌的玩家获胜并重新开始发牌

所以我的问题是如何使用 Game Center 制作回合制纸牌游戏，因为我还没有找到任何我需要的教程，所以我可以吗？

更新：我的第二个问题是；玩家是否可以创建一个房间，然后其他玩家可以加入（通过游戏中心）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:57:57.047

像往常一样，没有人会给你一个完整的教程。我猜你是 Obj-C 的新人。但：

1.  了解如何分配 UIImageViews 引用 Outlets。
2.  使用代码更改 UIImageViews 图像。
3.  导入图像。
4.  使用 IBAction
5.  使用 UIButtons（选择卡片）
6.  使用带有背景图像的自定义 UIButton。
7.  使用变量分配不同的卡片。(例如 Card1 = "5Spades)
8.  将变量放入列表
9.  从列表中的对象数量中选择随机数（取决于您希望每个玩家获得多少）
10.  为玩家分配那些随机数
11.  允许玩家使用 UIButtons 选择卡片
12.  确定谁拥有最大的牌。例如（如果 player1.selectedcard = 10 黑桃等）
13.  从第 9 步开始重复

所有代码示例都不起作用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:41:30.963

当然有人写了一个完整的教程。在这种情况下是史诗般的。它很大，专业且干净。功劳归于荷兰的 Matthijs Hollemans。它正在使用 Gamecenter 的蓝牙功能。

[http://www.raywenderlich.com/12735/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-1](http://www.raywenderlich.com/12735/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-1)

如果您想使用 Gamecenters 回合制 API，请继续阅读本教程：

[http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1](http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1)

借助这两个教程的知识，您将能够完成您的游戏。

# file - Grails：在引导期间将文件从 grails-app 复制到 web-app 目录

> ID：14124900
> 
> 赞同：0
> 
> 时间：2013-01-02T15:48:16.690
> 
> 标签：file, grails, filenotfoundexception, bootstrapping

我在特定文件夹中有一些文件到 grails-app 目录中。在引导期间，我想复制其中一个文件（假设是最新的，没关系）并将其复制到 web-app 文件夹中，以使其可供 grails 应用程序访问。

你会怎么做？我写了这样的东西：

```
class BootStrap {
    GrailsApplication grailsApplication

    def init = { servletContext ->
        // ...

        def source = new File('grails-app/myFolder/my-file-'+ grailsApplication.metadata.getApplicationVersion() +'.txt')
        def destination = new File('web-app/my-current-file.txt')

        source?.withInputStream { is ->
            destination << is
        }

        // ... 
    }
} 
```

但是我很难确定源文件和目标文件的正确路径（获取 FileNotFoundException）。我已经仔细检查了文件夹和文件名，我的问题是相对路径的起点。

引导程序是执行这种操作的好地方吗？

与往常一样，提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:20:10.993

我是用 Bootstrap 做的（请阅读完整的答案）：

```
class BootStrap {
    GrailsApplication grailsApplication

    def init = { servletContext ->    
        def applicationContext = grailsApplication.mainContext
        String basePath = applicationContext.getResource("/").getFile().toString()

        File source = new File("${basePath}/../grails-app/myFolder/" + grailsApplication.metadata.getApplicationVersion() +'.txt')
        File destination = new File("${basePath}/my-current-file.txt")

        source?.withInputStream {
            destination << it
        }
    }
} 
```

但是，正如 Muein Muzamil 所建议的，最好的方法是事件。这是他应用于我的示例的解决方案：

```
eventCompileEnd = {
    metadata = grails.util.Metadata.getCurrent()
    appVersion = metadata."app.version"

    ant.copy(file: "${basedir}/grails-app/myFolder/${appVersion}.txt", tofile: "${basedir}/web-app/my-current-file.txt")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:56:08.400

如何挂钩到 Grails 事件。目前作为项目编译步骤的一部分，我正在将外部配置文件从 conf 文件夹复制到类路径。所以你可以做类似的事情。

这就是我在 _Events.groovy 文件中的内容：我想你可以做类似的事情。

```
eventCompileEnd = {
ant.copy(todir:classesDirPath) {
  fileset(file:"${basedir}/grails-app/conf/override.properties")
}} 
```

# php - 动态扩展模型方法未运行 - PHP

> ID：14124901
> 
> 赞同：0
> 
> 时间：2013-01-02T15:48:18.020
> 
> 标签：php, model, module, controller, extends

我写了一个模块创建类。除了那个模型对象之外，它运行正确。

模型类：

```
class Model{
    public static  $db;
    protected $_table_name;
    public function __construct() {
        self::$db =& DB::singleton();
    }
    public function get($rows="*",$where=null,$page_no=null,$limit=null,$order_by=null,$table_name=null){
        if(!isset($table_name)||empty($table_name)){
            self::$db->table=$this->_table_name;
        }else{
            self::$db->table=$table_name;
        }
        self::$db->rows = $rows;
        self::$db->limit=$limit;
        self::$db->where=$where;
        self::$db->page_no=$page_no;
        self::$db->order_by=$order_by;
        return self::$db->read();
    }

    public function delete($id,$table){
        self::$db->table = $table;
        self::$db->where ="id='{$id}'";
        self::$db->delete();
        return 1;
    }
    public function drop_table($table){
        self::$db->table=$table;
        self::$db->drop_table();
        return 1;
    }
    public function get_module_name(){
        return $this->_table_name;
    }

    public function set_table($table_name){
        $this->_table_name=$table_name;
    }
} 
```

扩展类：

```
class m_publication_categories extends model
{
    protected $_table_name = 'publication_categories'; 
} 
```

控制器 ：

```
class Controller{
    public $db;
    public $model;

    public function __construct(){
        core::$theme->setup();
        $model_class_name = "m_".get_called_class();
        $this->model=new $model_class_name();
    }

    public function listAction(){
        $module_name = $this->model->get_module_name();
        $module_model = new m_modules();

        /**moduleinfo*/
        $module = $module_model->get("*","table_name='{$module_name}'");
        $module = $module[0];
        $module_columns = $module_model->list_fields($module->id);
        $data = $this->model->get();

        print_r($data);die;
        $this->assign('data',$data);
        $this->assign('module_columns' , $module_columns);
        $this->assign('module',$module);
        $this->display('list_module_data','modules');
    }
} 
```

我想使用控制器 $this->model->get 中的 model::get 方法，但这不能正常工作。但是如果我 print_r $this->model 在控制器中，返回结果如下：

```
m_publication_categories Object ( [_table_name:protected] => publication_categories ) 
```

这意味着扩展模型类中的代码，但为什么不进入主模型类？

谢谢。

# python - 带有轮廓 matplotlib 的动画

> ID：14124903
> 
> 赞同：8
> 
> 时间：2013-01-02T15:48:20.457
> 
> 标签：python, numpy, matplotlib

我正在尝试在 matplotlib 1.1.0 中为轮廓设置动画

基于： [http](http://www.mail-archive.com/matplotlib-users@lists.sourceforge.net/msg17614.html) ://www.mail-archive.com/matplotlib-users@lists.sourceforge.net/msg17614.html，http : [//matplotlib.1069221.n5.nabble.com/Matplotlib-1-1-0 -animation-vs-contour-plots-td18703.html](http://matplotlib.1069221.n5.nabble.com/Matplotlib-1-1-0-animation-vs-contour-plots-td18703.html)和 [http://www.scipy.org/Cookbook/Matplotlib/Gridding_irregularly_spaced_data](http://www.scipy.org/Cookbook/Matplotlib/Gridding_irregularly_spaced_data)

```
from numpy import linspace,exp,vstack
from scipy.interpolate import griddata
import matplotlib.pyplot as plt
import matplotlib.animation as animation
from numpy.random import uniform, seed

def main():
    seed(1234)
    x = uniform(-2,2,100)
    y = uniform(-2,2,100)
    data = vstack((x*exp(-x**2-y**2),0.5*x*exp(-x**2-y**2),0.2*x*exp(-x**2-y**2)))
    xi = linspace(min(x), max(x))
    yi = linspace(min(y), max(y))
    zi = []
    numframes = data.shape[0]
    for ii in range(numframes):
        zi.append(griddata((x, y), data[ii], (xi[None,:], yi[:,None]), method='cubic'))

    fig = plt.figure()
    im = plt.contour(xi, yi, zi[0], 15, linewidths=0.5, colors='k')
    ani = animation.FuncAnimation(fig, update_contour_plot, frames=xrange(numframes), fargs=(zi, im, fig, xi, yi), interval=100)
    plt.colorbar()
    plt.show()

def update_contour_plot(i, data, im, fig, xi, yi):
    for coll in im.collections:
        try:
            plt.gca().collections.remove(coll)
        except ValueError: #Everything is not removed for some reason!                                                                                      
            pass
    im = plt.contour(xi, yi, data[i], 15, linewidths=0.5, colors='k')
    plt.title(str(i))
    return im,

main() 
```

1）这是最好的方法吗？另有提及。

2）在最终输出中，前一帧的轮廓线仍然可见。如何删除它们？见除 ValueError：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:06:01.720

你有一个范围问题，`im`你在更新程序中创建的新文件没有被传回，所以第二次通过循环你试图再次删除第一层行，它正确地抱怨它不能因为你已经删除了它们。

稍微调整一下你的代码：

```
def main():
    seed(1234)
    x = uniform(-2,2,100)
    y = uniform(-2,2,100)
    data = vstack((x*exp(-x**2-y**2),0.5*x*exp(-x**2-y**2),0.2*x*exp(-x**2-y**2)))
    xi = linspace(min(x), max(x))
    yi = linspace(min(y), max(y))
    zi = []
    numframes = data.shape[0]
    for ii in range(numframes):
        zi.append(griddata((x, y), data[ii], (xi[None,:], yi[:,None]), method='cubic'))

    fig = plt.figure()
    im = plt.contour(xi, yi, zi[0], 15, linewidths=0.5, colors='k')
    ax = fig.gca()
    ani = animation.FuncAnimation(fig, update_contour_plot, frames=xrange(numframes), fargs=(zi, ax, fig, xi, yi), interval=100)
    plt.colorbar(im)
    plt.show()
    return ani

def update_contour_plot(i, data,  ax, fig, xi, yi):
    ax.cla()
    im = ax.contour(xi, yi, data[i], 15, linewidths=0.5, colors='k')
    plt.title(str(i))
    return im, 
```

另一种选择是使`im`某种可变的（例如将其包装在字典中），以便您的更改将在帧之间传播。

# php - Jqgrid 显示来自 json 的错误

> ID：14124912
> 
> 赞同：1
> 
> 时间：2013-01-02T15:48:42.200
> 
> 标签：php, jquery, json, oracle, jqgrid

我的问题是这样的，我想通过我得到的 json 信息来显示错误。也就是说，当我们在 jgrid 中添加/编辑某些内容时，我们总是希望在 json 数据中得到响应。然后我记得它是什么，如果你不能添加一些东西，我会发送 json 错误。

我想使用 Jquery 中的 Highlight / Error 来显示错误。这就是我的问题，我该如何展示它。从我一直在搜索的内容来看，应该是属性 aftersubmit 实现并在此处处理响应，但只是我没有得到。

代码：

```
afterSubmit: function (response) 
{
   if(responce == false)
        alert("test");
} 
```

json格式错误：

```
{"Response":false,"Message":"Dados inválidos"} 
```

有人可以帮助我吗？

----------------------------------------**解决方案**--------- ---------------------------------------------

```
jQuery.extend(jQuery.jgrid.edit, 
    {
        reloadAfterSubmit:false,
        afterSubmit: function (response, postdata) 
        {
            if(jQuery.parseJSON(response.responseText).Response  == false)
            {
                alert(jQuery.parseJSON(response.responseText).Message);
                return [false,null,null];
            }
            else
            {
                return [true,null,null];
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:39:06.973

试试这个

```
afterSubmit: function (response, postdata) 
{

  if(jQuery.parseJSON(response.responseText).Response)
alert(jQuery.parseJSON(response.responseText).Message);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:56:31.050

我认为对于错误，只需将错误作为 AJAX 脚本中的字符串返回。JqG​​rid 期望获取 JSON 数据，但是当它接收到一个字符串时，它会为您显示错误。

我使用 JqGrid 和 XML 而不是 JSON，但是在我的 AJAX 脚本中，当我遇到错误时，我只返回一个字符串而不是 jqgrid 期望的 XML，并且网格正确显示错误消息。

请在提交代码后尝试此操作，看看您是否看到任何内容：

```
afterSubmit: function (response) 
{
   alert(response);
} 
```

如果你能看到，那么你就已经准备好了，你只需要调整函数以仅在实际出现错误时显示响应。

# android - 测量 Android 应用启动时间

> ID：14124913
> 
> 赞同：29
> 
> 时间：2013-01-02T15:48:43.947
> 
> 标签：android

测量 Android 应用程序启动时间的最精确方法是什么？

启动时间是指 2\. 和 3\. 之间的差异：

1.  应用程序进程未运行
2.  用户单击启动器中的应用程序图标
3.  Main Activity 已完全初始化

所以我基本上需要以某种方式获取自 JVM 启动以来经过的时间并记录它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-03-10T09:12:30.057

我知道我来不及回答，但是，这恰恰回答了这个问题。

对于 API 版本 19 或更高版本，此信息默认记录在 Logcat 上。

> 从 Android 4.4（API 级别 19）开始，logcat 包含一个输出行，其中包含一个名为 Displayed 的值。该值表示从启动进程到完成在屏幕上绘制相应活动之间经过的时间量。
> 
> ActivityManager：显示 com.android.myexample/.StartupTiming：+3s534ms

关键是*找对地方*——

> 如果您从命令行或终端中跟踪 logcat 输出，则查找经过的时间很简单。要在 Android Studio 中查找经过的时间，您必须在 logcat 视图中禁用过滤器。禁用过滤器是必要的，因为系统服务器而不是应用程序本身提供此日志。

摘录来自[文档](https://developer.android.com/topic/performance/launch-time.html#time-initial)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-10-28T10:26:14.777

我会将您的问题解释为“我的应用程序启动时间是否足够快。我怎样才能检查我已经做了我能做的一切？

启动时间在很大程度上是一个错误的指标，因为它会因设备和 ROM 而异。我猜您最可能感兴趣的是您的代码有多少需要很长时间才能执行，以及什么可能会阻塞主线程。

我发现最有效的方法是在应用程序启动时使用[Traceview](http://developer.android.com/tools/debugging/debugging-tracing.html)，然后查看该方法执行所需的时间以及主线程上是否存在任何间隙。

开始追踪：

```
public class MyApplication extends Application {
    @Override
    public void onCreate() {
        super.onCreate();
        Debug.startMethodTracing("startup");
    }
} 
```

停止追踪：

```
@Override
public void onViewCreated(final View view, final Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    Debug.stopMethodTracing();
} 
```

收集跟踪后，您应该能够看到对启动时间有重大影响的任何事情。在我的例子中，如下所示，UI 线程上被阻塞的地方有很大的差距。

[![主线程阻塞](../Images/b2399d471d59245b40dd0c36bf120fd1.png)](https://i.stack.imgur.com/C33ZT.png)

事实证明，Crashlytics 和 Coremetrics 都需要调用`randomUUID()`，然后跨线程同步并阻塞主线程。解决方案只是启动一个新线程来初始化 Coremetrics 代码。

这是我仅通过测量启动时间就无法获得的东西，但它实际上**将应用程序的“启动时间”加快了几百毫秒**。

这是分离 Coremetrics 初始化的单独线程后的另一个快照：

[![主线程未阻塞](../Images/7d5b7df275191067657d164b48100068.png)](https://i.stack.imgur.com/WkSC4.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-22T08:34:37.153

按以下方式检查 adb shell。

```
adb shell
adb logcat -b events | grep am_activity_launch_time

[Output]
01-01 12:32:53.469 1236 1262 I am_activity_launch_time: 
    [0,205360373,com.sec.android.app.clockpackage/.ClockPackage,378,**378**,0]

Remarks:
Launch time for Clock is 378ms. 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-02T16:09:11.320

将整个`onCreate()`方法包装在一个`TimingLogger`. 把这个放在开头：

```
TimingLogger timings = new TimingLogger(TAG, "methodA"); 
```

最后是：

```
timings.dumpToLog(); 
```

如果您想在某个中间步骤减少时间，您可以`timings.addSplit("name");`获取到达该步骤所需的时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-30T08:42:24.457

可以使用以下代码实现时间跟踪：

覆盖你的`Application`：

```
public class CustomApplication extends Application {
    public final static long APP_START_TIME = System.currentTimeMillis();

    /**
     * Do all other application stuff
     */
} 
```

并在您的 main 中添加几行`Activity`：

```
public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final View contentView = findViewById(android.R.id.content);
        contentView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                if (Build.VERSION.SDK_INT >= 16) {
                    contentView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
                } else {
                    contentView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                }
                long launchTime = System.currentTimeMillis() - CustomApplication.APP_START_TIME;
                Log.e("TEST", "App launch time = " + launchTime);
            }
        });
    }
} 
```

并且不要忘记在以下位置定义您的自定义应用程序`Manifest`：

```
<application
    android:label="@string/app_name"
    android:name=".CustomApplication" >

</application> 
```

**重要提示**：您必须在启动前终止您的应用程序，因为应用程序存储了跟踪初始时间的静态变量。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-26T00:34:07.003

使用[SysTrace](https://developer.android.com/studio/profile/systrace.html)

Trace 类也可用于测量截面，使用

```
Trace.beginSection("name");
Trace.endSection(); 
```

这个[YouTube 视频](https://www.youtube.com/watch?v=AkafJ6NdrhY)也是一个快速入门。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-10T16:45:55.793

我认为这已经内置到 Firebase 控制台中，现在性能不佳 [![在此处输入图像描述](../Images/e308218cd040301c2aad7de9aff5cd72.png)](https://i.stack.imgur.com/laOVf.png) [![在此处输入图像描述](../Images/76df4b704e835aa342fa0548988f0111.png)](https://i.stack.imgur.com/RANGO.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-07T11:38:42.090

在android中显示启动时间的简单方法。

[![在此处输入图像描述](../Images/f6d79a61e6a1655cdc9dd0c6fc793cd2.png)](https://i.stack.imgur.com/fADGf.png)

有时，`Displayed`logcat 输出中的行包含一个额外的总时间字段。例如：

```
ActivityManager: Displayed com.android.myexample/.StartupTiming: +3s534ms (total +1m22s643ms) 
```

在这种情况下，第一次测量仅针对第一次绘制的活动

来源：[初始显示时间](https://developer.android.com/topic/performance/vitals/launch-time#time-initial)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-02T16:03:16.637

一种可能性是在`onCreate()`方法开始和结束时保存时间，`onCreate() method`然后将这些时间相互减去以获得初始化应用程序所花费的时间。

# python - win32com.client.Dispatch("Outlook.Application") error pywintypes.com_error: (-2147221005, 'Invalid class string', None, None)

> ID：14124915
> 
> 赞同：8
> 
> 时间：2013-01-02T15:48:55.447
> 
> 标签：python, outlook, pywin32

我在 Windows 7 上，并且安装了 Windows Live。现在，当我尝试运行以下代码时

```
import win32com.client
win32com.client.Dispatch("Outlook.Application") 
```

我收到以下错误

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\site-packages\win32com\client\__init__.py", line 95, in
Dispatch
    dispatch, userName = dynamic._GetGoodDispatchAndUserName(dispatch,userName,c

    lsctx)
      File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 108, in
    _GetGoodDispatchAndUserName
        return (_GetGoodDispatch(IDispatch, clsctx), userName)
      File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 85, in _
    GetGoodDispatch
        IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.II
    D_IDispatch)
    pywintypes.com_error: (-2147221005, 'Invalid class string', None, None) 
```

我有另一台安装了 windows xp 和 Outlook 的机器。我运行了相同的代码，我得到了同样的错误。

还有一个问题。如何在 Windows 7 上获取 Windows Live 的 com？

任何建议和意见将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-23T14:36:00.623

这表明未安装 Outlook。" `windows live`" 或 " `outlook.com`" 不会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-08T10:34:11.183

我遇到了类似的错误。您是否尝试过从 win32com 的文件夹运行 makepy.py 来为您正在使用的不同 COMobject 创建条目？基本上，win32com 只是将您与之交互的所有应用程序视为默认 COM 对象，直到您让它了解您计算机上安装的程序。您必须为要使用它控制的每个程序运行 makepy.py。

在我运行它之后，我获得了对 Outlook 的更多控制权。它打开了我正在纠正的其他错误。

此外，如果您使用您的 comobject ( *comboject = win32com.client.Dispatch("Outlook.Application")* ) 并查看*comboject._prop_map_get_.keys()*您将看到可以用于该程序的所有内容。

# facebook - 社交按钮如何加载文章的介绍文本，而不是网站的元描述？

> ID：14124923
> 
> 赞同：0
> 
> 时间：2013-01-02T15:49:31.520
> 
> 标签：facebook, joomla1.5

我在我的 Joomla 1.5 站点上安装了 ITPSocialButtons-Plugin 1.8 版。例如，当用户单击 facebook 按钮时，会获得一个新选项卡，其中包含文章的图像、文章的标题，在我的例子中，是网站的元描述文本。知道如何使用文章的介绍文本而不是网站的元描述吗？？？先感谢您！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:47:02.713

我已经与开发人员讨论过这个问题。在我的情况下，LinkedIn 存在的问题更糟，因为一旦文章被分享一次，你就无法撤消它，所以每个人都分享了网站元描述。

就我而言，有帮助的一件事是将介绍文本复制到文章的元描述中。另一件有帮助的事情是使用 ITPMeta pro 来管理每篇文章的所有标签。

至少尝试一下文章的元描述技巧，让我知道这是否对您有用……如果没有，我认为是时候回到 Todor 并要求他进行一些更改。

# node.js - node.js/express：发送静态文件（如果存在）

> ID：14124924
> 
> 赞同：4
> 
> 时间：2013-01-02T15:49:33.657
> 
> 标签：node.js, express, socket.io

如果存在，我想从文件夹中提供 html 文件，否则回退到动态应用程序。

目前我使用类似的东西：

```
var express = require('express');
var app = express()
, server = require('http').createServer(app)
, io = require('socket.io').listen(server);

server.listen(4444);

app.use("/", express.static(__dirname + '/../WebContent/index.html'));
app.use("/styles", express.static(__dirname + '/../WebContent/styles'));
app.use("/script", express.static(__dirname + '/../WebContent/script'));

//here I would like to define a rule like this:
//app.use("*.html", express.static(__dirname + '/../WebContent/*html')); 
```

我怎样才能做到这一点？

一些教程使用一个名为`connect`. 如果它是解决我的问题的最优雅的解决方案，我如何将连接集成到我当前的代码中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:06:17.553

你不必做任何特别的事情。

我假设 WebContent 文件夹位于根目录中。

如果您的所有静态内容都在同一个基本文件夹中，就像您展示的那样，您不必多次指定它。

```
 app.use(express.static(__dirname + '/WebContent')); 
```

如果您在 WebContent 文件夹中有一个名为 file.html 的文件，您现在可以通过 url 访问它，即 localhost:4444/file.html

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:20:09.123

你正在使用很多样板。使用起来更容易`routes`。这是一个例子：

```
var routes = require('./routes');

app.configure(function () {
    ...
    app.use(express['static'](path.join(__dirname, '/../WebContent')));
    app.use(app.router);
});

// Routes
app.get('/', routes.index); 
```

**路线/index.js：**

```
exports.index = function (req, res) {
   res.render('index');
}; 
```

在你的项目根目录之外渲染你的 webapp 根目录是很奇怪的。感觉是不好的做法。这是必要的吗？

# heroku - 保存图像无法在 heroku 上正确显示

> ID：14124930
> 
> 赞同：0
> 
> 时间：2013-01-02T15:50:08.167
> 
> 标签：heroku, carrierwave

我正在使用 Rails 3.2.6 并使用carrierwave 上传图片。当我上传图片时，它的显示效果很好，而且它的图片网址也运行良好。但是当我在heroku上推送下一个git commit时。

```
 git push staging master 
```

比我已经上传的所有图像都没有显示并且它的图像路径不起作用为什么？

请任何人都可以说出问题所在。

**纳克斯**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:24:54.113

您是否使用 s3 设置了carrierwave（https://github.com/jnicklas/carrierwave#using-amazon-s3）？Heroku 有一个只读文件系统 (https://devcenter.heroku.com/articles/s3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:57:40.453

虽然您的上传将起作用 - 当您推送新代码或重新启动应用程序时，您将丢失任何上传。

Heroku 使用临时文件系统，因为每个 dyno 都会收到原始部署代码的单独副本（slug），因此上传只会存在于处理上传的 dyno 上（https://devcenter.heroku.com/articles/dynos#临时文件系统）。

您需要使用外部持久数据存储，如 Amazon S3、Rackspace 文件等 - 幸运的是，使用 Carrierwave 更新它以使用它是微不足道的，因为它支持开箱即用。

# matlab - 获取趋势矩阵，matlab（概念）

> ID：14124931
> 
> 赞同：0
> 
> 时间：2013-01-02T15:50:09.227
> 
> 标签：matlab

我对编码的想法有疑问。欢迎任何帮助。

我有一个矩阵，我必须显示趋势。

```
Limit1=30;
limit2=40;
F=[0 ; 0; 0; 0; 0; 0 ; 1; -79; -84; 35 ; 75; 0 ;0 ]
[row1,col1,v1] = find(abs(F)>30)
[row2,col2,v2] = find(abs(F)>40) 
```

当我越过 Limit1 时，我还需要检查 Limit2 ，反之亦然。

请有任何想法

```
%% OutPut=[ row_of_F,Value_crossing_which_limit(Limit1,Limit2), trend (from lower to upper or vice versa] % values are abs – user31177 1 min ago edit 
```

%% 这应该是输出

```
 OutPut_=[ '8'     '30'    'GoingDown'
'8'     '40'    'GoingDown'
'9'     '40'    'GoingDown'
'10'    '40'    'Comingup' 
'11'    '30'    'GoingDown'
'11'    '40'    'GoingDown'
'12'    '40'    'Comingup' 
'12'    '30'    'Comingup' ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:06:21.500

这种方法怎么样？

```
% your data
F=[0 ; 0; 0; 0; 0; 0 ; 1; -79; -84; 35 ; 75; 0 ;0];

% growth state
growthstate = [0; sign(diff(F))];

% state relative to the lim1
% true if crossing lim1
lim1=30;
lim1state_p =  [false; diff(F-lim1>0)];
lim1state_n =  [false; diff(F+lim1>0)];
lim1state = lim1state_p | lim1state_n

% the same for lim2
% true if crossing lim2
lim2=40;
lim2state_p =  [false; diff(F-lim2>0)];
lim2state_n =  [false; diff(F+lim2>0)];
lim2state = lim2state_p | lim2state_n;

% decod growth state
s{1}='GoingDown';
s{2}='GoingUp';
decode = @(idx) s{double(idx>0) + 1};

c = {};
for k=1:length(F)
  if lim1state(k)
    c(end+1,:) = {F(k-1), F(k), k, lim1, decode(growthstate(k))};
  end
  if lim2state(k)
    c(end+1,:) = {F(k-1), F(k), k, lim2, decode(growthstate(k))};
  end
end

% show
c 
```

我注释了程序的输出。

```
| F(k-1) | F(k) |  k | level |           | reason                 |
|--------+------+----+-------+-----------+------------------------|
|      1 |  -79 |  8 |    30 | GoingDown | cross -30,F(k)<F(k-1)  |
|      1 |  -79 |  8 |    40 | GoingDown | cross -40,F(k)<F(k-1)  |
|    -79 |  -84 |  9 |     - | -         | no crossing            |
|    -84 |   35 | 10 |    30 | GoingUp   | cross -30, F(k)>F(k-1) |
|    -84 |   35 | 10 |    40 | GoingUp   | cross -40, F(k)>F(k-1) |
|     35 |   75 | 11 |    40 | GoingUp   | cross 40, F(k)>F(k-1)  |
|     75 |    0 | 12 |    30 | GoingDown | cross 30, F(k)<F(k-1)  |
|     75 |    0 | 12 |    40 | GoingDown | cross 40, F(k)<F(k-1)  | 
```

# node.js - Passport.js + Express.js 验证后将用户转发到原始目的地

> ID：14124932
> 
> 赞同：10
> 
> 时间：2013-01-02T15:50:10.007
> 
> 标签：node.js, authentication, express, passport.js

我有一个应用程序，它是服务器上的 Node + Express + Passport 和客户端上的 jQuery + Backbone.js。客户端在 URL 中使用哈希标签，但对于某些功能，用户登录很重要。

我希望可以通过 URL 访问该应用程序，例如`http://mydomain.com/app#cone/waffle/flavor/mint/toppings/sprinkles`：

*   如果用户已经登录，他们会直接访问请求的 URL，没有任何麻烦
*   如果用户尚未登录，他们会转到`/login`然后转到请求的 URL

在这个 SO 帖子之后， [Node.js Passport 的 Google 策略上的自定义 returnUrl](https://stackoverflow.com/questions/9885711/custom-returnurl-on-node-js-passports-google-strategy)，我有它，所以

*   如果他们已经登录，他们会直接访问 URL、哈希标签和所有
*   如果他们没有被记录，它会将他们带到登录页面，然后到请求的 url，但是......

**登录后似乎从重定向的原始 URL 中删除了哈希参数。**

将哈希参数重定向到原始目的地时，有什么方法可以保留它们？

从这篇文章，[从请求 url 获取哈希参数，](https://stackoverflow.com/questions/8033537/getting-hash-parameters-from-request-url)我了解到哈希标签在服务器上不可用，这是使用哈希标签的全部意义所在。

所以我怀疑这是不可能的。也许以某种方式在本地缓存参数并在重定向时检索它们，比如说`[original URL minus hastags] + #use-cached-params`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T03:48:10.450

哈希参数仅限浏览器使用，它们不会发送到服务器。不过，您可以使用此技术进行重定向、哈希标签和所有操作：

*   获取 /some/page#with/hash
*   登录？然后渲染页面
*   未登录？渲染一个包含一些 JavaScript 的页面，比如“getHash.jade”
*   getHash.jade：复制完整的 URL，然后重定向到 '/login&redirect=' + originalURL
*   GET /login（现在您可以将哈希保存在服务器上并从那里获取）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-01T02:20:21.753

这是更详细地捕获锚链接的方法。适用于所有 Web 框架。

我将使用一个示例场景来说明：假设我们需要捕获未经身​​份验证的用户请求的深层 URL [http://server.com](http://server.com) **/#/xyz**，以便他们可以在登录后重定向到该深层 URL。

1.  未经身份验证的用户请求[http://server.com](http://server.com) **/#/xyz**（从“#”开始的所有内容都不会发送到服务器）。

2.  服务器所知道的是用户想要[http://server.com/](http://server.com/)并且他们未经身份验证。服务器将用户重定向到登录表单。

3.  这是聪明的一点：客户端仍在等待他们的原始请求，所以如果服务器在登录表单中包含一个隐藏元素，其中包含一些引用 window.location.href 的 JS，它可以捕获**原始请求**的完整URL锚点部分：

    ```
    <form action="/login" method="post">
      <div>
        <label>Username:</label>
        <input type="text" name="username"/><br/>
      </div>
      <div>
        <label>Password:</label>
        <input type="password" name="password"/>
      </div>
      <!-- XXXXXXXXX CLEVER BIT XXXXXXXXXX-->
      <script>
        document.write('<input type="hidden" name="from" value="'+document.location.href+'"/>');
      </script>
      <!-- XXXXXXXXXX-->
      <div>
        <input class="submit-button" type="submit" value="Submit"/>
      </div>
    </form> 
    ```

4.  用户对自己进行身份验证，原始 URL 与 POST 一起发送。然后，服务器可以将用户中继到原始深层 URL。

# java - 使用 AES CBC Java 加密

> ID：14124936
> 
> 赞同：3
> 
> 时间：2013-01-02T15:50:34.063
> 
> 标签：java, aes, encryption, encryption-symmetric

我有小问题。当我尝试加密文本然后解密此文本时，出现错误：

> javax.crypto.IllegalBlockSizeException：使用填充密码解密时，输入长度必须是 16 的倍数

这是我的代码：

```
import java.io.UnsupportedEncodingException;
import java.math.BigInteger;
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.ShortBufferException;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;
/**
 *
 * @author Grzesiek
 */
public class SymmethricCipherCBC {

    /* Klucz: */
    private byte[] keyBytes = new byte[] {
            0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,
            0x00,0x01,0x02,0x03,0x04,0x05
        };

   /* Wektor inicjalizacyjny: */
   private byte[] ivBytes = new byte[] {
            0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,
            0x00,0x01,0x02,0x03,0x04,0x05
        };

   private Cipher cipher;
   private SecretKeySpec keySpec;
   private IvParameterSpec ivSpec;

   public SymmethricCipherCBC() throws NoSuchAlgorithmException, NoSuchPaddingException{
        cipher = Cipher.getInstance("AES/CBC/PKCS5Padding"); //Utworzenie obiektu dla operacji szyfrowania/deszyfrowania algorytmem AES w trybie CBC.
        keySpec = new SecretKeySpec(keyBytes, "AES"); // Utworzenie obiektu klucza dla algorytmu AES z tablicy bajtow
        ivSpec = new IvParameterSpec(ivBytes); // // Utworzenie obiektu dla wektora inicjalizacyjnego
   }

   public String encryptText(String plainText) throws NoSuchAlgorithmException, 
                                                    InvalidKeyException, 
                                                    NoSuchPaddingException, 
                                                    InvalidAlgorithmParameterException, 
                                                    ShortBufferException, 
                                                    IllegalBlockSizeException, 
                                                    BadPaddingException,
                                                    UnsupportedEncodingException{

       int cipherTextLength;
       byte[] cipherText; // Bufor dla szyfrogramu

       byte[] plainTextBytes = plainText.getBytes(); // Reprezentacja tekstu jawnego w bajtach

       cipher.init(Cipher.ENCRYPT_MODE, keySpec, ivSpec); //Inicjalizacja obiektu dla operacji szyfrowania z kluczem okreslonym przez keySpec:   

       cipherText = new byte[cipher.getOutputSize(plainTextBytes.length)]; //Utworzenie buforu dla szyfrogramu

       cipherTextLength = cipher.update(plainTextBytes, 0, plainTextBytes.length, cipherText, 0); // Szyfrowanie tekstu jawnego

       cipherTextLength += cipher.doFinal(cipherText, cipherTextLength); //Zakonczenie szyfrowania

       return new BigInteger(1, cipherText).toString(16); // zapisanie 16 

   }

   public String decryptText(String ciptherTextString) throws InvalidKeyException, InvalidAlgorithmParameterException, ShortBufferException, IllegalBlockSizeException, BadPaddingException, UnsupportedEncodingException{

       byte[] cipherTextBytes = ciptherTextString.getBytes();

       cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);  //Inicjalizacja obiektu cipher dla odszyfrowywania z kluczem okreslonym przez keySpec

       byte[] plainTextBytes = new byte[cipher.getOutputSize(cipherTextBytes.length)];  // Utworzenie wyzerowanej tablicy

       int plainTextLength = cipher.update(cipherTextBytes, 0, cipherTextBytes.length, plainTextBytes, 0);
       plainTextLength += cipher.doFinal(plainTextBytes, plainTextLength);

       return new String(plainTextBytes); //Odtworzona wiadomosc
   }
} 
```

有什么想法我应该做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T23:04:43.500

你做的比必要的更难，而且你在做的时候加密了你的密文

```
cipher.doFinal(cipherText, cipherTextLength); 
```

我会按原样重写它：

```
public String encryptText(String plainText) throws ... {
    byte[] plainTextBytes = plainText.getBytes("UTF8");
    cipher.init(Cipher.ENCRYPT_MODE, keySpec, ivSpec); 
    byte[] encrypted = cipher.doFinal(plainTextBytes);
    return toHex(encrypted);
}

public String decryptText(String cipherTextString) throws ... {
    byte[] cipherTextBytes = fromHex(cipherTextString);
    cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);
    byte[] plainTextBytes = cipher.doFinal(cipherTextBytes);
    return new String(plainTextBytes, "UTF8");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:52:51.913

据我所知，您正在从加密算法中获取字节数组输出，并使用 BigInteger 将其转换为十六进制字符串。然后解密算法采用十六进制字符串并将其转换为十六进制字符串中 ASCII 字符的字节表示，使用`.toString()`

这是您的代码错误的地方（以及其他地方）。例如，不是将十六进制字符串输出“FFFF”转换为字节数组`[0xff, 0xff]`，而是将其转换为字节数组`[0x46,0x46,0x46,0x46]`（例如，大写字母 F 的 ASCII 字节表示）。这意味着不仅转换中的所有字节都是错误的，字节数组的长度也会错误（这会导致您在问题中列出的异常）。

相反，您应该`byte[]`从加密方法返回，并`byte[]`在解密方法中作为参数接受。如果做不到这一点，您应该使用 Apache Commons Codec 的[Hex](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Hex.html)类之类的东西来可靠地在字节数组和十六进制字符串之间进行转换。

# javascript - 如何查看远程脚本被阻止时返回的内容

> ID：14124940
> 
> 赞同：6
> 
> 时间：2013-01-02T15:50:56.347
> 
> 标签：javascript, jquery, browser, cdn, google-cdn

我在我的 webapp (//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js) 中使用 Google 托管的 jQuery 作为错误诊断的一部分，我有一个 window.onerror 处理程序，它可以捕获任何我没有在本地捕获错误并让服务器知道它们。

到目前为止一切都很好，但是......有时我会遇到这样的错误：

> "脚本错误。","加载脚本时出错","意外令牌 <"

我的假设是 Google CDN 在这些情况下被阻止（无论出于何种原因）。我确实有 jQuery 的本地后备，我相当确定它运行良好，但我想找出返回的内容，以便我可以测试我的假设，并可能将其中一些用户列入 Google CDN 的白名单（如果是公司防火墙阻止它）。

但到目前为止，我还无法弄清楚如何检索返回的内容。如果是文件，则无法检索 SCRIPT 标记的 innerText，由于跨域策略等原因，无法执行 ajax 请求。

有没有人对这怎么可能有任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T22:07:56.990

根本不可能获取`<script>`标签引用的任何文件的内容。这是有充分理由的：这样做可以让你绕过 XHR 的同源策略。

考虑：

```
<script src="https://www.example.com/private/api/getAuthToken" id="s"></script> 
```

如果您可以访问响应的文本，则可以执行以下操作：

```
var stolenAuthToken = $('#s').text(); 
```

这显然很糟糕。因此，您永远不能阅读`<script>`标签带来的内容。

您的特殊情况因最近引入的[更改](https://bugzilla.mozilla.org/show_bug.cgi?id=363897)而变得复杂，其中跨域脚本中的错误不会向您的页面处理程序报告*任何*有用的信息`onerror`。（本质上，这样做是为了修补一个信息泄露安全漏洞，该漏洞允许恶意网站推断您是否登录到某些知名网站等。）

这意味着您无法从 CDN 托管的脚本中获得有关错误的有用信息，因此进行了[另一项更改](https://bugzilla.mozilla.org/show_bug.cgi?id=696301)以允许将[CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)用于 CDN（或其他非同源）服务器以选择允许通过完整的错误详细信息到`onerror`处理程序。

> 我们（Facebook）需要一种机制来禁用[#363897](https://bugzilla.mozilla.org/show_bug.cgi?id=363897)`window.onerror`中实现的静音行为。我们的静态脚本资源在与主站点不同的域下的 CDN 上提供。因为这些域不同，我们与 x 域逻辑发生冲突，阻止我们收集有关浏览器错误的有用信息。
> 
> 这个“特性”已经被广泛采用（在 Firefox 和 Webkit 浏览器中），以至于我们在生产中看到的大多数未捕获的异常现在都没有可操作的信息。

该[`crossorigin`属性](https://developer.mozilla.org/en-US/docs/HTML/Element/img#attr-crossorigin)（最初用于`<img>`）允许您指定应使用 CORS 规则加载资源。它已由 Mozilla、[WebKit](https://bugs.webkit.org/show_bug.cgi?id=70574)和[Chrome](https://code.google.com/p/chromium/issues/detail?id=159566)实现。

```
<script src="http://example.com/xdomainrequest" crossorigin="anonymous"></script> 
```

不幸的是，在我的[测试](http://jsfiddle.net/josh3736/jm2JU/)中，我发现 Google CDN 不**发送**CORS 标头。

```
GET http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js HTTP/1.1
Host: ajax.googleapis.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0
Accept: */*
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://fiddle.jshell.net/josh3736/jm2JU/show/
Origin: http://fiddle.jshell.net
Pragma: no-cache
Cache-Control: no-cache

HTTP/1.1 200 OK
Vary: Accept-Encoding
Content-Type: text/javascript; charset=UTF-8
Last-Modified: Tue, 13 Nov 2012 19:53:02 GMT
Date: Wed, 02 Jan 2013 22:54:25 GMT
Expires: Thu, 02 Jan 2014 22:54:25 GMT
X-Content-Type-Options: nosniff
Server: sffe
Content-Length: 93637
X-XSS-Protection: 1; mode=block
Cache-Control: public, max-age=31536000
Age: 169036

... 
```

请注意请求中存在`Origin`标头（指示 CORS 请求），以及`Access-Control-Allow-Origin`响应中不存在标头。因此，即使您放置了该`crossorigin`属性，CORS 检查也会失败，并且您的脚本将收到已清理的错误详细信息。

在 Google CDN 服务器上启用 CORS存在[三年前的问题。](http://code.google.com/p/google-ajax-apis/issues/detail?id=427)我不会屏住呼吸。

* * *

**tldr：** 如果您想要有意义的错误消息，您必须自己托管所有 JavaScript，在同一来源上。

# accelerometer - 加速度下 IMU 单元中加速度计的重力去除算法？

> ID：14124941
> 
> 赞同：0
> 
> 时间：2013-01-02T15:50:57.580
> 
> 标签：accelerometer, sensors

> **可能重复：**
> [如何使用陀螺仪仅从加速度计获得线性加速度？](https://stackoverflow.com/questions/11089967/how-to-obtain-only-linear-acceleration-from-accelerometer-using-gyroscope)

我检查了有关该主题的类似问题，大多数处理静态情况，即加速度计处于静止位置但倾斜。但是，在我的情况下，设备处于恒定运动状态，加速度变化高达 2g。我尝试了一些算法，只要加速度很小（即步行），它们就可以正常工作。然而，当加速度增加时，它们都惨遭失败（即运行）。需要将重力分量与陀螺仪融合，以检测每时每刻的空间方位。那里有什么最好的算法来处理这个问题**。**

# ios5 - 什么是 docx 文件的统一类型标识符

> ID：14124943
> 
> 赞同：21
> 
> 时间：2013-01-02T15:51:10.443
> 
> 标签：ios5, uti

阅读[*Developer Library*](https://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html)*的文档， doc*的标识符是“ **com.microsoft.word.doc** ”。但是*docx*的标识符是什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-02T16:02:34.137

标识符是`org.openxmlformats.wordprocessingml.document`。

# google-drive-api - Google Drive 服务帐户 - 查看来自其他帐户的文件

> ID：14124946
> 
> 赞同：17
> 
> 时间：2013-01-02T15:51:16.260
> 
> 标签：google-drive-api

我已经成功创建了一个 Google Drive 服务帐户，并且可以通过 PHP 向该帐户创建文件。但是，我需要能够从其他用户帐户的 Google Web UI 查看这些创建的文件。如何允许其他用户访问这些自动创建的文件？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T16:12:55.150

您只需要与所需的用户共享文件：

[https://developers.google.com/drive/v2/reference/permissions/insert](https://developers.google.com/drive/v2/reference/permissions/insert)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-18T19:21:53.093

一种选择是*执行 Google Apps 域范围的授权*：[https ://developers.google.com/drive/web/delegation](https://developers.google.com/drive/web/delegation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-18T13:44:51.943

[杰](https://stackoverflow.com/users/1503886/jay-lee)是当场的。查看 API v3 权限[指南](https://developers.google.com/drive/v3/web/manage-sharing)和[参考](https://developers.google.com/drive/v3/reference/permissions)。我的另一个建议是首先创建一个文件夹并设置其权限，然后由任何子文件继承，例如在 Python 中（对不起，不知道 PHP！）：

```
 # Folder setup
    folder_metadata = {
        'name': 'Searchable folder name',
        'mimeType': 'application/vnd.google-apps.folder'
    }
    folder = drive_service.files().create(
        body=folder_metadata,
    ).execute()

    domain_permission = {
        'type': 'domain',
        'role': 'reader',
        'domain': 'example.com',
        'allowFileDiscovery': True,  # so they show up in user searches
    }
    drive_service.permissions().create(
        fileId=folder['id'],
        body=domain_permission,
    ).execute()

    # New files
    body = {
        'name': 'Searchable filename',
        'parents': [folder['id']],
    }
    drive_service.files().create(
        media_body=...,
        body=body,
    ).execute() 
```

# java - 并发异常

> ID：14124953
> 
> 赞同：0
> 
> 时间：2013-01-02T15:51:54.077
> 
> 标签：java, concurrency, synchronized, concurrentmodification, synchronized-block

```
private static HashMap<String, FileInfo> sFileInfoObjectList = new CacheLinkedHashMap<String, FileInfo>();

public static synchronized FileInfo getFileInfoForProvider(...) {
 FileInfo foundFileInfo = null;

 (...)

 foundFileInfo = sFileInfoObjectList.get(hashEntryKey);

 (...)

 sFileInfoObjectList.put(hashEntryKey, foundFileInfo);

 (...)
}

public static synchronized void removeFileInfoForProvider(final int providerId) {
    Thread thread = new Thread() {
        @Override
        public void run() {
            Iterator<Entry<String, FileInfo>> it = sFileInfoObjectList.entrySet().iterator();
            while (it.hasNext()) {
                Entry<String, FileInfo> pair = it.next();
                FileInfo info = pair.getValue();
                if (providerId == info.mProvider) {                            
                    it.remove();
                }
            }
        }
    };
} 
```

我在 run() 方法中收到 ConccurentModificationException。我尝试了以下，但没有奏效：

```
public void run() {
    synchronized(sFileInfoObjectList) {
        Iterator<Entry<String, FileInfo>> it = sFileInfoObjectList.entrySet().iterator();
        while (it.hasNext()) {
            Entry<String, FileInfo> pair = it.next();
            FileInfo info = pair.getValue();
            if (providerId == info.mProvider) {                            
                it.remove();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:55:27.463

run() 不在同步块中，因为它在另一个线程上运行。您可以在 run 方法中使用同步，但使用会引发此错误的并发集合会简单得多。例如并发哈希映射。

顺便说一句：我不会每次都启动一个线程，因为它可能比迭代集合更昂贵。我会使用线程池，或者在当前线程中执行。

* * *

用这个替换你的方法

```
public static void removeFileInfoForProvider(final int providerId) {
    Thread thread = new Thread() {
        @Override
        public void run() {
            removeFileInfoForProvider0(providerId);
        }
    };
    thread.start();
}

static synchronized void removeFileInfoForProvider0(final int providerId) {
    Iterator<Entry<String, FileInfo>> it = sFileInfoObjectList.entrySet().iterator();
    while (it.hasNext()) {
        Entry<String, FileInfo> pair = it.next();
        FileInfo info = pair.getValue();
        if (providerId == info.mProvider) {                            
            it.remove();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:53:52.330

您尚未同步`remove()`调用`Map`. 如果多个线程尝试同时调用`run()`，它将抛出`ConcurrentModificationException`这就是您的情况的原因。

您可能需要在 run() 上使用同步（或）使用并发集合，例如`ConcurrentHashMap`

# javascript - 如何在 $.ajax 调用后停止执行 JS 代码，即当服务器正在处理 AJAX 请求时

> ID：14124956
> 
> 赞同：0
> 
> 时间：2013-01-02T15:52:04.300
> 
> 标签：javascript, jquery

我在 JQuery AJAX 中有一个奇怪的问题..

我的步骤顺序如下：

1）我有一个 JS 函数，我在按钮单击事件上调用它：

```
 function Click()
 {

    //I am performing some Validations then making an AJAX Request:

   $.ajax({
      type: "POST", 
      url: url, 
      context: window, 
      data: datatoPost,
      contentLength: contentLength, 
      async: true, 
      success: function (response) { 
          callbackFn(response); 
       },
      error: function (msg) { 
          this.error = msg;
       }
    });

   // The callback function is called on Successfull AJAX Request 
   // i.e. callbackFn (See below)

   // I am then checking the window.IsValid which I have set in below function;

   if (window.IsValid == true) {
           // Then Perform another AJAX Request
     }
     else {
         // do nothing
     }
  }

  function callbackFn(response)
  {
     if(response == 'Valid')
     {
         window.IsValid = true;
     }
     else 
     {
         window.IsValid = false;
     }
  } 
```

2) 现在，问题是当**服务器正在处理第一个 AJAX 请求时，之后编写的代码即 if (window.IsValid == true) { // 然后执行另一个 AJAX 请求 } else { // 什么都不做 } } 被执行**

3）我得到**window.IsValid = false**作为第一个 AJAX 请求的回调函数，即**callbackFn(response)**尚未调用，即使在第一个 AJAX 请求的有效响应之后，我的第二个 ajax 请求也没有作为**window.IsValid**变量执行在回调函数中设置，因为由于服务器正在处理请求，尚未调用回调。

请帮助我，我被卡住了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:57:54.350

然后你应该使用

```
async: false, 
```

在你的ajax函数调用中。不推荐哪个。更好的办法是使用

```
if (window.IsValid == true) {
           // Then Perform another AJAX Request
     }
     else {
         // do nothing
     }
  } 
```

在您的回调函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:58:14.000

因为您的帖子是异步的，所以脚本会在处理 ajax 请求的同时继续执行。

相反，您需要将 window.IsValid 的测试移动到成功函数中：

```
function Click()
{
   //I am performing some Validations then making an AJAX Request:

   $.ajax({
      type: "POST", 
      url: url, 
      context: window, 
      data: datatoPost,
      contentLength: contentLength, 
      async: true, 

      success: function (response) { 
          callbackFn(response); 

          if (window.IsValid == true) {
              // Then Perform another AJAX Request 
              // best done as another function.
          }
          else {
              // do nothing
          }
       },

      error: function (msg) { 
          this.error = msg;
      }
   });
} 
```

# c++ - 在 C++ 中，如果一个函数返回一个结构，我是否需要在使用后删除该结构？

> ID：14124957
> 
> 赞同：3
> 
> 时间：2013-01-02T15:52:05.060
> 
> 标签：c++, memory-leaks, struct

```
typedef typedef struct _OBJTIME {
    WORD wYear;
    WORD wMonth;
    WORD wDayOfWeek;
    WORD wDay;
    WORD wHour;
    WORD wMinute;
    WORD wSecond;
    WORD wMilliseconds;
} OBJTIME

OBJTIME objTime; //Note, this objTime is modified other function
OBJTIME ObjectParent::returnObjTime() const
{
    return objTime;
} 
```

我的问题是：

1.  如果另一个类调用 returnObjTime() 函数，比如：

    OBJTIME t = objectP->returnObjTime()
    我假设将创建 OBJTIME 结构的新副本？

2.  完成后是否需要删除变量“t”？它会造成内存泄漏吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T15:54:01.083

不，您正在返回 global`objTime`的副本，副本和 global 都具有基于其范围的持续时间，这意味着当它们的范围结束时，它们将自动从内存中释放。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T15:55:27.897

这是一个副本，是的，但它不是由 创建的`new`，所以你不需要`delete`它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T15:56:47.663

答案 1：是的，将根据调用函数的范围创建一个具有生命周期的新副本。

答案 2：不，你不需要删除你没有用 new 创建的东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-02T15:56:41.657

你没有`dynamically allocate`它，你不需要手动`delete`它。所以不，这里不会有泄漏。

虽然，正如您自己所说，您在这里制作了很多副本，但这显然是一个坏主意。

如果您希望返回对象的只读副本，您可以这样做：

```
const OBJTIME&
ObjectParent::returnObjTime() const
{
    return objTime;
} 
```

那么你的对象的重量是 100 字节还是 100 兆字节并不重要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-02T16:17:39.870

这里是答案：

1 - 您正在通过**按值返回值方法**返回值，**返回 objTime；**并将其放入一个局部变量中，因此每次都会是一个新的本地副本“t”。

2 - 您不必担心删除**变量“t”**，因为您没有通过**new 运算符**为“t”分配内存，一旦您超出函数范围，它将自动删除（**局部变量范围在函数块内**）。

仅当您将执行以下操作时才需要删除：

```
OBJTIME *t = new OBJTIME 
```

# php - 循环通过 XML 并仅“查看”特定 ID

> ID：14124962
> 
> 赞同：0
> 
> 时间：2013-01-02T15:52:14.433
> 
> 标签：php, mysql, xml, loops, api-eveonline

在我的 mysql 数据库中，我有几行，每行都包含一个项目 ID。我想做的是为下面非常大的 URL 的 XML 文档中包含的内容更新每个“placidRate”列。例如，对于 typeID 1230，它应该在我的数据库中找到 1230 的速率并将其与`$type->sell->min`. 这就是最终目标。现在我正在寻找它做的就是将旧速率（db）和新速率（xml）相互呼应。

```
while($row = mysql_fetch_assoc($result)){
    $oldTypeID = $row['typeID'];

    $urlPlacid = 'http://api.eve-central.com/api/marketstat?typeid=1230&typeid=17470&typeid=17471&typeid=1228&typeid=17463&typeid=17464&typeid=1224&typeid=17459&typeid=18&typeid=17455&typeid=17456&typeid=1227&typeid=17867&typeid=17868&typeid=20&typeid=17452&typeid=17453&typeid=1226&typeid=17448&typeid=17449&typeid=1231&typeid=17444&typeid=17445&typeid=21&typeid=17440&typeid=17441&typeid=1229&typeid=17865&typeid=17866&typeid=1232&typeid=17436&typeid=17437&typeid=19&typeid=17466&typeid=17467&typeid=1225&typeid=17432&typeid=17433&typeid=1223&typeid=17428&typeid=17429&typeid=22&typeid=17425&typeid=17426&typeid=11396&typeid=17869&typeid=17870&typeid=34&typeid=35&typeid=36&typeid=37&typeid=38&typeid=40&typeid=39&typeid=11399&regionlimit=10000048';
    $xmlPlacid = simplexml_load_file($urlPlacid);
    foreach($xmlPlacid->marketstat->type as $type){
         $newRate = $type->sell->min;
         if($type[id] = $oldTypeID){
               echo "old placid rate: ".$row['placidRate']." || new placid rate: ".$newRate;
         }
    else{} 
```

这段代码的问题是它返回

老人平静率：14.5 || 新平静率：12.00旧平静率：14.5 || 新平静率：25.00旧平静率：14.5 || 新平静率：17.00旧平静率：14.5 || 新平静率：25.21旧平静率：14.5 || 新平静率：22.01旧平静率：14.5 || 新平静率：30.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：55.00旧平静率：14.5 || 新平静率：80.00旧平静率：14.5 || 新平静率：85.00旧平静率：14.5 || 新平静率：94.00旧平静率：14.5 || 新平静率：90.00旧平静率：14.5 || 新平静率：120.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：290.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：1087.06旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新的平静率：0。00岁平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：4.00旧平静率：14.5 || 新平静率：10.00旧平静率：14.5 || 新平静率：40.00旧平静率：14.5 || 新平静率：143.00旧平静率：14.5 || 新平静率：819.00旧平静率：14.5 || 新平静率：2599.00旧平静率：14.5 || 新平静率：770.00旧平静率：14.5 || 新人平静率：0.00 14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：4.00旧平静率：14.5 || 新平静率：10.00旧平静率：14.5 || 新平静率：40.00旧平静率：14.5 || 新平静率：143.00旧平静率：14.5 || 新平静率：819.00旧平静率：14.5 || 新平静率：2599.00旧平静率：14.5 || 新平静率：770.00旧平静率：14.5 || 新人平静率：0.00 14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：4.00旧平静率：14.5 || 新平静率：10.00旧平静率：14.5 || 新平静率：40.00旧平静率：14.5 || 新平静率：143.00旧平静率：14.5 || 新平静率：819.00旧平静率：14.5 || 新平静率：2599.00旧平静率：14.5 || 新平静率：770.00旧平静率：14.5 || 新人平静率：0.00 00岁平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：4.00旧平静率：14.5 || 新平静率：10.00旧平静率：14.5 || 新平静率：40.00旧平静率：14.5 || 新平静率：143.00旧平静率：14.5 || 新平静率：819.00旧平静率：14.5 || 新平静率：2599.00旧平静率：14.5 || 新平静率：770.00旧平静率：14.5 || 新人平静率：0.00 00岁平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：4.00旧平静率：14.5 || 新平静率：10.00旧平静率：14.5 || 新平静率：40.00旧平静率：14.5 || 新平静率：143.00旧平静率：14.5 || 新平静率：819.00旧平静率：14.5 || 新平静率：2599.00旧平静率：14.5 || 新平静率：770.00旧平静率：14.5 || 新人平静率：0.00 5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：4.00旧平静率：14.5 || 新平静率：10.00旧平静率：14.5 || 新平静率：40.00旧平静率：14.5 || 新平静率：143.00旧平静率：14.5 || 新平静率：819.00旧平静率：14.5 || 新平静率：2599.00旧平静率：14.5 || 新平静率：770.00旧平静率：14.5 || 新人平静率：0.00 5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：4.00旧平静率：14.5 || 新平静率：10.00旧平静率：14.5 || 新平静率：40.00旧平静率：14.5 || 新平静率：143.00旧平静率：14.5 || 新平静率：819.00旧平静率：14.5 || 新平静率：2599.00旧平静率：14.5 || 新平静率：770.00旧平静率：14.5 || 新人平静率：0.00 5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：4.00旧平静率：14.5 || 新平静率：10.00旧平静率：14.5 || 新平静率：40.00旧平静率：14.5 || 新平静率：143.00旧平静率：14.5 || 新平静率：819.00旧平静率：14.5 || 新平静率：2599.00旧平静率：14.5 || 新平静率：770.00旧平静率：14.5 || 新人平静率：0.00 5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：0.00旧平静率：14.5 || 新平静率：4.00旧平静率：14.5 || 新平静率：10.00旧平静率：14.5 || 新平静率：40.00旧平静率：14.5 || 新平静率：143.00旧平静率：14.5 || 新平静率：819.00旧平静率：14.5 || 新平静率：2599.00旧平静率：14.5 || 新平静率：770.00旧平静率：14.5 || 新人平静率：0.00 14.5 || 新平静率：10.00旧平静率：14.5 || 新平静率：40.00旧平静率：14.5 || 新平静率：143.00旧平静率：14.5 || 新平静率：819.00旧平静率：14.5 || 新平静率：2599.00旧平静率：14.5 || 新平静率：770.00旧平静率：14.5 || 新人平静率：0.00 14.5 || 新平静率：10.00旧平静率：14.5 || 新平静率：40.00旧平静率：14.5 || 新平静率：143.00旧平静率：14.5 || 新平静率：819.00旧平静率：14.5 || 新平静率：2599.00旧平静率：14.5 || 新平静率：770.00旧平静率：14.5 || 新人平静率：0.00

而且我不完全确定为什么...

离更新sql表又近了一步。再次编辑

```
$market = new eveCentral();
while($row = mysql_fetch_assoc($result2)){
    $oldTypeID = $row['typeID'];
    $oldRate = $row['placidRate'];
    $newPlacidRate = $market->placidMin($oldTypeID);
    $newForgeRate = $market->forgeMin($oldTypeID);
    $newUniverseRate = $market->universeMin($oldTypeID);

    $updateQuery = "UPDATE itemRates SET placidRate = $newPlacidRate, forgeRate = $newForgeRate, universeRate = $newUniverseRate WHERE typeID = $oldTypeID"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:55:46.607

如果您要按 ID 查找节点，只需使用 xpath
`$node = $xmlPlacid->xpath("//*[@id='foo']");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:57:39.093

你错过了`==`等于运算符`IF`

```
if($type['id'] == $oldTypeID){
...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:21:38.347

除了`if`比较中操作符错误的问题（正如@GBD 所概述的那样），这里还有一些问题：

1.  您正在从 eve-central.com *获取每个数据库结果行*的 XML 。但是 XML 没有改变。将其移至数据库查询*上方。*`while`
2.  正如@Alex 回答的那样，使用 xpath 找到具有您要查找的 ID 的项目。

俯视图：

```
$marketstat = new EveCentralMarketstat();

while ($row = mysql_fetch_assoc($result)) {
    $oldTypeID = $row['typeID'];
    $oldRate   = $row['placidRate'];
    $newRate   = $marketstat->getSellMinByType($oldTypeID);
    if (FALSE !== $newRate) {
        echo "old placid rate: " . $oldRate . " || new placid rate: " . $newRate;
    }
} 
```

类的定义`EveCentralMarketstat`：

*添加更多数据访问所需的功能，也可以根据您需要的信息改进构造函数，快速概述如何改进。*

```
/**
 * Wrapper Class for Even Central API Market Statistics
 */
class EveCentralMarketstat
{
    /**
     * @var SimpleXMLElement
     */
    private $xml;

    public function __construct() {

        $urlPlacid = 'http://api.eve-central.com/api/marketstat?typeid=1230&typeid=17470&typeid=17471&typeid=1228&typeid=17463&typeid=17464&typeid=1224&typeid=17459&typeid=18&typeid=17455&typeid=17456&typeid=1227&typeid=17867&typeid=17868&typeid=20&typeid=17452&typeid=17453&typeid=1226&typeid=17448&typeid=17449&typeid=1231&typeid=17444&typeid=17445&typeid=21&typeid=17440&typeid=17441&typeid=1229&typeid=17865&typeid=17866&typeid=1232&typeid=17436&typeid=17437&typeid=19&typeid=17466&typeid=17467&typeid=1225&typeid=17432&typeid=17433&typeid=1223&typeid=17428&typeid=17429&typeid=22&typeid=17425&typeid=17426&typeid=11396&typeid=17869&typeid=17870&typeid=34&typeid=35&typeid=36&typeid=37&typeid=38&typeid=40&typeid=39&typeid=11399&regionlimit=10000048';
        $this->xml = simplexml_load_file($urlPlacid);
    }

    /**
     * @param $typeID
     * @return bool|string String value if $typeID is found, FALSE on error
     */
    public function getSellMinByType($typeID) {

        $result = $this->xml->xpath("/*/marketstat/type[@id = '$typeID']/sell/min");
        if (!$result) {
            return FALSE;
        }
        return (string)$result[0];
    }
} 
```

# c++ - 使用环境变量 C++ 在 Linux 上的 C++ 中启动进程

> ID：14124966
> 
> 赞同：-1
> 
> 时间：2013-01-02T15:52:38.917
> 
> 标签：c++, linux, environment-variables

如何使用环境变量在 C++ 中在 linux 上启动进程`LD_PRELOAD=/test/lib.so`，我知道我应该使用函数`execl`函数，但是当我使用它时出现错误

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:48:23.950

[`man execle`](http://linux.die.net/man/3/execle)显示如何启动进程。您设置环境并将其传递给`execle()`

```
char *envp[] = { "LD_PRELOAD=/test/lib.so", "HOME=/home/olaf", NULL };
execle("/path/to/program", "program", "argument1", "argument2", NULL, envp); 
```

# c# - WPF半透明按钮控制MediaElement

> ID：14124982
> 
> 赞同：1
> 
> 时间：2013-01-02T15:53:26.497
> 
> 标签：c#, wpf, button, mediaelement

我正在制作播放视频的 WPF 应用程序。
我使用`MediaElement`，我希望添加`Play`/`Pause`按钮，我希望该图像按钮处于播放状态，并且只会显示我放在按钮上的图像。其余的要透明。

例如：将播放三角形图像放在矩形按钮上只会显示三角形图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:05:17.570

您将不得不“自己制作”，幸运的是这并不难，这是一个工作示例（虽然不处理鼠标悬停）：

```
 <Grid Background="Black">
      <Button HorizontalAlignment="Center" VerticalAlignment="Center">
         <Button.Template>
            <ControlTemplate TargetType="Button">
               <StackPanel>
                  <ContentPresenter Content="{TemplateBinding Content}" />
               </StackPanel>
            </ControlTemplate>
         </Button.Template>
         <Path Data="M 0,0 L 15,10 L 0,20" Fill="Green"/>
      </Button>
   </Grid> 
```

网格在这里只是为了显示实际上只绘制了箭头，而Path这个东西是矢量数据来绘制一个播放按钮。

它看起来像这样：

![播放按钮](../Images/1e2a13d30de8124e2385571201b904be.png)

# javascript - 如何使用 .load() 加载脚本

> ID：14124984
> 
> 赞同：2
> 
> 时间：2013-01-02T15:53:35.123
> 
> 标签：javascript, jquery

> **可能重复：**
> [为什么 jQuery 或诸如 `getElementByID` 之类的 DOM 方法找不到元素？](https://stackoverflow.com/questions/14028959/why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element)

我使用 jquery.load() 加载文件。在我的 load_to.html 中，我将 id 的元素定位为

```
$('#users').change(function() {
  alert('hello');
}); 
```

此元素存在于 load_from.html 中。我无法瞄准这个。但是当我检查页面时，我可以看到这个元素。

我像这样加载页面

```
$('#mydiv').load('/user/1/edit form'); 
```

如何定位元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T15:56:42.907

`on`在它的委托签名中使用：

```
$('#mydiv').on('change', '#users', function() {
  alert('hello');
}); 
```

[阅读文档](http://api.jquery.com/on/#direct-and-delegated-events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:56:41.727

尝试在回调中设置您的事件，`.load`以确保在元素进入 DOM 后创建它们。

```
$('#mydiv').load('/user/1/edit form', function () {

    //Callback
    //set up events here (once it is finished loading)

    $('#users').change(function() {
        alert('hello');
    });
}); 
```

# linq - Youtube api viewcount 字段 linq c#

> ID：14124986
> 
> 赞同：0
> 
> 时间：2013-01-02T15:53:38.353
> 
> 标签：linq, youtube, youtube-api

我有这些获取 youtube 视频列表的代码片段 (razor / c#)。不过，我需要获取 viewcount 字段，我该如何获取呢？

```
XDocument xDoc = XDocument.Load("https://gdata.youtube.com/feeds/api/users/BBC/uploads");

XNamespace media = "http://search.yahoo.com/mrss/";
XNamespace yt = "http://gdata.youtube.com/schemas/2007";

var items = xDoc.Descendants(media + "group")
                .Select(i=>new{
                    Title = i.Element(media + "title").Value,
                    Content = i.Element(media + "content").Attribute("url").Value,
                    Thumbnail = i.Element(media + "thumbnail").Attribute("url").Value,
            Category = i.Element(media + "category").Value
                })
                .ToList();

var items2 = xDoc.Descendants(media + "group").Descendants(yt + "uploaded")
                .Select(i=>new{
                    Uploaded = i.Element(yt + "uploaded").Value
                })
                .ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:18:58.173

这可能不是您正在寻找的响应，但我建议使用 JSON 而不是 XML，并解析 JSON 响应而不是处理 XML。

例如，您可以请求[https://gdata.youtube.com/feeds/api/users/BBC/uploads?v=2&alt=jsonc&prettyprint=true](https://gdata.youtube.com/feeds/api/users/BBC/uploads?v=2&alt=jsonc&prettyprint=true)以获取 JSON 格式的等效提要。

视图计数数据在 items[i]->viewCount 中，您想要的其他元数据也在那里。

# php - 如何在 OSX 上将 ODBC 添加到 MAMP

> ID：14124994
> 
> 赞同：8
> 
> 时间：2013-01-02T15:54:06.340
> 
> 标签：php, macos, odbc, mamp

我正在尝试让 ODBC 在 MAMP 上工作。我尝试了许多建议和解决方案，包括那些已经在 stackoverflow 上的建议和解决方案：

[MAMP：添加 ODBC 或 SQL Server 支持](https://stackoverflow.com/questions/1400908/mamp-adding-odbc-or-sql-server-support)， [如何将 ODBC 驱动程序添加到 MAMP 环境？](https://stackoverflow.com/questions/223165/how-do-i-add-an-odbc-driver-to-a-mamp-environment)

到目前为止，没有一个是成功的。

这是我尝试的最新版本。

我下载了最新的 ODBC 连接器： [http](http://dev.mysql.com/downloads/connector/odbc/) ://dev.mysql.com/downloads/connector/odbc/ 用 OSX DMG 安装它

我在 iODBC 中添加了驱动程序

我不断收到此消息：

> 无法加载特定驱动程序

和

> 没有找到合适的图片。确实找到了：/usr/local/lib/libmyodbc5w.so mach-o，但是架构错误

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:57:21.107

看起来您对仅 32 位 iODBC 的看法是正确的。

您将需要下载源代码，然后从头开始编译。您还需要先通过 AppStore 下载 XCode，这样您就可以访问 gcc 和 cmake。

源代码链接： http: [//www.iodbc.org/downloads/iODBC/libiodbc-3.52.7.ta​​r.gz](http://www.iodbc.org/downloads/iODBC/libiodbc-3.52.7.tar.gz)

**注意：**您可以从 CLI 运行`lipo -detailed_info /path/to/binary`命令。这将为您提供有关指定二进制文件的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T15:06:17.227

我在这个问题上苦苦挣扎了好几个小时（我搞砸了 msql/php，多年前，所以我认为自己目前是一个完全的新手！）。我的问题是我无法使用 ODBC 将我的 PC 连接到我的新在线服务器（服务器是运行小牛的 mac mini，试图通过 mysql odic 连接器从我办公室的 Windows 机器连接）。我终于找到了一个可行的解决方案。这是我的情况和环境：

1.  我正在从 Access 转换为 MySql/PHP。应用程序配置为前端/后端。

2.  让我的服务器联机，这样我就可以将我的访问后端表导出到 MYSQL。（有些在另一台服务器上在线，有些在我的内部 Windows 2003 服务器上。）计划将前端从访问 vba 更改为 php。

3.  根据谷歌搜索在 mac mini (mavericks) 上安装 ODBC 管理器。

4.  转到 ODBC 管理器中的驱动程序选项卡。在驱动程序页面的下拉菜单中将我的驱动程序从 USER 设置为 SYSTEM。这将打开驱动程序以显示在 ODBC 管理器的“系统”选项卡上（在此之前，驱动程序没有出现在 ODBC 管理器的“系统”选项卡上）。

5.  添加了 DSN、USER、PORT 和 PASSWORD 变量。

6.  然后我去了我在 Mac 上运行的 MAMP 应用程序。我点击了 [文件]、[编辑] [模板] [my.cnf]。这打开了配置文件。有一个警告 - 如果这被污染了，它会搞砸整个 MAMP 应用程序。

7.  我进行了以下更改（在更改上方插入了评论）。

    # 绑定地址刚刚被注释掉。9-5-14

# 绑定地址 = 127.0.0.1

此更改不会将 MAMP 绑定到本地主机（我相信）。

1.  我一直在滚动文件。我还进行了下一个更改，然后保存了 .cnf 文件：

    # 刚刚注释掉了下一行。试图让 odbc 工作。9-5-14

# MAMP_skip-networking_MAMP

我相信这个改变告诉 MAMP 允许远程连接。

1.  在 PC 上，在 Data Sources，System DSN 选项卡下，使用 MYSQL ODBC 5.1 驱动程序，设置数据源名称，设置在线服务器的 URL（已在 internic 注册），设置端口，然后输入用户和密码与我在 Mac 服务器上添加的 ODBC 系统 DSN 中设置的 KEYS 相同。然后，我拉下数据库选项卡，奇迹般地 - 我的 mac 服务器中的数据库出现了！

希望这对另一个新手有帮助！我真的花了太多时间试图找到一个解决方案，一旦我幸运地得到答案，结果就很容易了！.

# django - 我可以避免这种语法突出显示混乱吗？

> ID：14124999
> 
> 赞同：0
> 
> 时间：2013-01-02T15:54:28.067
> 
> 标签：django, syntax-highlighting, sublimetext2

我的 Django 视图中有以下内容：

```
<a title="{{ photo.time_taken|date:"N jS, 'y" }}" href='...' > {# ' #}
  ...
</a> 
```

问题在于想要将我的日期格式化为`'13`. 引号都弄糊涂了，所以我不得不在结尾加上一个 django 注释来“关闭”引号，否则下面的所有代码都会被错误突出显示。有没有更好的方法来解决这个问题？

我正在使用带有[Djaneiro](https://github.com/squ1b3r/Djaneiro)的 Sublime Text 2 。