# StackOverflow 问答 15938000-15938999

# flyway - 在 Flyway 中设置终止字符以创建 DB2 过程

> ID：15938000
> 
> 赞同：0
> 
> 时间：2013-04-10T22:59:40.500
> 
> 标签：flyway

我正在尝试创建一个 db2 存储过程，并在 Flyway 迁移中授予它权限。我正在运行 2.1.1。

该过程包括分号。通过将@ 字符设置为终止字符，我可以直接在db2 上创建该过程（开始与db2 +td@ 的连接）。

我们如何为 Flyway 迁移设置终止字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:33:58.163

你不应该需要它。Flyway 处理开始...结束；块就好了，即使它们包含分号。

如果您有一个不起作用的案例，请在问题跟踪器中提交一个问题，其中包含一个会导致问题的小样本迁移。

# android - 从使用 Google Maps API 的 github 导入现有 Android 项目，Google 身份验证失败

> ID：15938002
> 
> 赞同：0
> 
> 时间：2013-04-10T22:59:59.410
> 
> 标签：android, eclipse, github, google-maps-android-api-2

我是使用 github 的新手，但我有点肯定我已经在 eclipse 中正确配置了它。

我也是使用 Google Maps API 的新手。但是，该项目的其他工作人员已经使用 API 密钥对其进行了配置，并且对他们有效。

然而，就我而言：

项目成功导入。当我通过 Eclipse 在我的 nexus 7 上运行该应用程序时，该应用程序运行。

调用 google maps api 时，地图会打开，但没有任何地图数据（空白）。

控制台显示 Google 身份验证错误。

我必须使用自己的 API 密钥吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:32:11.150

假设 API 密钥在项目的 AndroidManifest.xml 中进行了硬编码：请其他开发人员从他们的`~/.android/`（`C:\Users\somename\.android\`在 Windows 上）文件夹中为您提供调试密钥库，并将其放在您机器上的相同位置。

# python - 基于页眉和页脚模式在python中搜索文件

> ID：15938005
> 
> 赞同：0
> 
> 时间：2013-04-10T23:00:22.667
> 
> 标签：python

我想解析一个看起来像这样的文件：

```
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA

AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
HEADER
body
body
body
FOOTER
BLABLABLABLA
BLABLABLABLA
BLABLABLABLA 
```

我想提取 HEADER 和 FOOTER 之间存在的内容。每个 HEADER 和 FOOTER 之间的行数可以变化，内容本身也可以变化，我编写了以下代码来提取它：

```
 fd=open(file,"r")
    for line in fd:
        if not start_flag:
            match = re.search(r'.*HEADER.*',line)
            if not match:
                continue
            else:
                body=body+line+"\n"
                start_flag=True
        else:
            match_end = re.search(r'.*FOOTER.*',line)
            if not match_end:
                body=body+line+"\n"
                continue
            else:
                body=body+line+"\n\n"
                break
   print body 
```

这是使用 python 从文件中提取内容的最佳方法吗？解决此类问题的其他方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T23:09:03.240

```
from itertools import groupby

with open(f, "r") as fin:
    groups = groupby(fin, key=lambda k:k.strip() in ("HEADER", "FOOTER"))
    any(k for k,g in groups)
    content = list(next(groups)[1])
print content 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T23:09:49.643

这是一种使用方法`itertools`：

```
from itertools import takewhile, dropwhile

with open("myfile.txt") as f:
    starting_iterator = dropwhile(lambda x: x.strip() != 'HEADER', f)
    next(starting_iterator, None)
    contents = takewhile(lambda x: x.strip() != 'FOOTER', starting_iterator)    
    print list(contents) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:04:01.597

由于我的评论遭到反对，我不妨展示一下我是如何做到的（无需在内存中构建列表——这就是迭代器的用途：

```
import itertools as it

def contents(source):
    return it.takewhile(lambda x: "FOOTER" != x.strip(),
        it.islice(
            it.dropwhile(lambda x: "HEADER" != x.strip(), source),
        1, None) )

with open("testfile") as f:
    for line in contents(f):
        # Do your stuff here.... 
```

# php - Functions.php 中的全局变量，然后在 Javascript (WordPress) 中使用

> ID：15938017
> 
> 赞同：0
> 
> 时间：2013-04-10T23:01:51.087
> 
> 标签：php, wordpress, global-variables

如果这是错误的地方，我很抱歉。实际上，另一个用户之前已经问过这个问题（尽管不是同一个问题），据说这是一个 PHP 问题。不幸的是，我在 PHP 方面还不够好，无法实现答案。

这是[上一个问题]：[https ://wordpress.stackexchange.com/questions/82503/cant-get-options-with-datavariable](https://wordpress.stackexchange.com/questions/82503/cant-get-options-with-datavariable)

我面临同样的问题。在我的选项中，我有一个滑块选项（动画 - 淡入淡出或滑动），然后我想使用存储在选项中的值并将其传递给我的 function.php 中的 Javascript。

在选项文件中，我有以下代码：

```
// Slider animation options
        $of_options_slider_animation = array(
            "fade" => __("Fade", "themename"),
            "slide" => __("Slide", "themename")
        ); 
```

和

```
$of_options[] = array(  "name" => __("Slider Animation", "themename"),
                        "desc" => __("Select the type of animation for the slider.", "themename"),
                        "id" => "slider_animation",
                        "std" => "fade",
                        "type" => "radio",
                        "options" => $of_options_slider_animation 
```

稍后我会将选项传递到functions.php中的js代码块中，如下所示：

```
jQuery('.flexslider').flexslider({
                    controlNav: true,
                    directionNav: true,  
                    prevText: 'Previous',     
                    nextText: 'Next',
                    **animation: "<?php echo $smof_data['slider_animation']; ?>",**
                    animationLoop: false
                    // animation: "slide"
                  }); 
```

（请注意粗体部分）

但是，正如您可能预测的那样，它不起作用。

我已经尝试像在上一个问题中那样定义 $smof_data （参见上面的链接），但仍然没有运气。这是我所做的：

```
// Fetch options data
global $smof_data;
$smof_data = of_get_options("slider_animation"); 
```

请帮忙，提前谢谢:)

编辑：

SMOF 链接：[https ://github.com/sy4mil/Options-Framework](https://github.com/sy4mil/Options-Framework)

我正在使用 underscores.me 的空白/入门主题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:34:00.917

解决了它：DI 直接在 Javascript 范围内使用变量。这是代码（以防万一）

```
function mytheme_flexslider() {

    if (!is_admin()) {

        // Enqueue FlexSlider JavaScript
        wp_register_script('jquery_flexslider', get_template_directory_uri(). '/js/jquery.flexslider-min.js', array('jquery') );
        wp_enqueue_script('jquery_flexslider');

        // Enqueue FlexSlider Stylesheet        
        wp_register_style( 'flexslider-style', get_template_directory_uri() . '/inc/flexslider/flexslider.css', 'all' );
        wp_enqueue_style( 'flexslider-style' );

        // FlexSlider custom settings       
        add_action('wp_footer', 'mytheme_flexslider_settings');

        function mytheme_flexslider_settings() { 
        // Fetch options data
        **global $smof_data;?>**

            <script>

                // Can also be used with $(document).ready()
                // flexslider have a fixed height
                jQuery(window).load(function() {
                  // jQuery('.subhead_shadow_bottom').hide();
                  jQuery('.flexslider').flexslider({
                    controlNav: true,
                    directionNav: true,  
                    prevText: 'Previous',     
                    nextText: 'Next',
                    animation: "<?php echo $smof_data['slider_animation']; ?>",
                    animationLoop: false
                    // animation: "slide"
                  });
                });

                jQuery(document).ready(function() {
                    fixFlexsliderHeight();
                });

                jQuery(window).load(function() {
                    fixFlexsliderHeight();
                }); // BUG: this ends up computing the slide height to the image height, not to the resized height, on page reload

                jQuery(window).resize(function() {
                    fixFlexsliderHeight();
                });

                function fixFlexsliderHeight() {
                    // Set fixed height based on the tallest slide
                    jQuery('.flexslider').each(function(){
                        var sliderHeight = 0;
                        jQuery(this).find('.slides > li').each(function(){
                            slideHeight = jQuery(this).height();
                            if (sliderHeight < slideHeight) {
                                sliderHeight = slideHeight;
                            }
                        });
                        // jQuery(this).find('ul.slides').css({'height' : sliderHeight});
                        // console.log("Fixing slider height to " + sliderHeight);
                    });
                }

                // jQuery(document).ready(function($){

                //  $('.flexslider').flexslider();
                // });
            </script>
        <?php 
        **// return $smof_data;**
        }

    }
}

add_action('init', 'mytheme_flexslider'); 
```

现在所有人都在工作。也许有一个小问题：我需要返回 $smof_data （第二个粗体部分）吗？它适用于两种方式..我需要了解有关可变范围的更多信息..

# javascript - 动画元素之后的引导工具提示

> ID：15938018
> 
> 赞同：1
> 
> 时间：2013-04-10T23:01:56.487
> 
> 标签：javascript, jquery, performance, twitter-bootstrap, d3.js

我有一个与[此类](http://mbostock.github.io/d3/talk/20111116/force-collapsible.html)似的 D3.js 图表。当用户深入到图表中时，我利用引导工具提示来显示节点名称。我目前正在通过反复调用工具提示显示方法来跟踪节点，这会导致工具提示在新位置重新呈现。

```
setInterval(function(){
        $(node).tooltip('show');
    }, 100) 
```

我担心这样调用这个函数会导致性能问题。任何人都可以建议一种更好的方法来完成此任务，或者在以这种方式使用 setInterval 函数时给我一些关于性能问题的见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:52:47.163

根据您的描述，听起来您正在尝试做的事情最好通过监听状态而不是时间的离散变化来完成。我没有使用过 D3.js，但即使是像监听`<circle>`元素点击这样简单的事情也会更有效率。

## JS

```
$('svg').on('click', 'circle', function () {
  $(node).tooltip('show')
}) 
```

看起来[D3.js 有它自己的事件框架](https://github.com/mbostock/d3/wiki/Selections#wiki-on)，但我不确定它是否支持委托。更熟悉的人可能会为此提供更好的建议。

最后，根据您一次显示的节点数量，在*所有*节点上调用 tooltip show本身可能会产生性能影响。通过存储引用来跟踪每次打开和关闭的文件可能会更有效。**同样， D3.js**中可能已经有一些东西可以处理这个问题，但这不是我所知道的。

# javascript - 如何在框架中的元素上使用 javascript

> ID：15938021
> 
> 赞同：1
> 
> 时间：2013-04-10T23:02:07.583
> 
> 标签：javascript, jquery, events, click

这是一个场景：从**create.jsp**，我正在创建一个播放按钮和一个音频标签，如下所示：

```
//play button
out.write("<input type=\"button\" id=\"playButton\" value=\"Play Now\" >");
out.write("");

//audio element
out.write("<audio id=\"sound\" preload=\"auto\">");
//out.write("<source src=\"sfl\" type=\"audio/ogg\" />");
out.write("<source src=\"sfl\" type=\"audio/mpeg\" />");
out.write("Your browser does not support the audio element.");
out.write("</audio>"); 
```

我使用了一个框架将其带到**home.jsp**，如下所示：

```
<iframe id='bgframe' style='display:compact;' src='create.jsp' width="400" height="200"></iframe> 
```

在我的 jquery 代码中，我有

```
 $("#playButton").click(function(){
    alert("Play button clicked");
    } 
```

但是当我单击播放按钮时没有任何反应。

问题：如何使用 jquery 或 javascript 捕获通过框架部署的播放按钮上的点击事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:08:34.990

按照设计，来自父框架的 JavaScript 不能作用于 iframe 中包含的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:17:11.420

你需要使用`contents()`

```
$("#bgframe").contents().find("#playButton").click(function(){
    alert("Play button clicked");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:12:14.180

尝试这个

```
out.write("<script>function(){//your code here}</script>");
out.write("<input type=\"button\" onclick=\"demo()"\ id=\"playButton\" value=\"Play Now\" >"); 
```

或者

```
out.write("<script src="file name where code is placed"></script>");
out.write("<input type=\"button\" id=\"playButton\" value=\"Play Now\" >"); 
```

# c - 阻塞不接收数据的 recv() (TCP)

> ID：15938022
> 
> 赞同：-1
> 
> 时间：2013-04-10T23:02:23.933
> 
> 标签：c, sockets, tcp, system-calls, recv

我正在尝试使用 C 系统调用编写一个简单的服务器，该服务器从未知客户端获取未知字节流并根据客户端输入执行特定操作。例如，客户端会发送一个命令“multiply 2 2”，服务器会将数字相乘并返回结果。

为了避免在客户端写入之前服务器读取错误，我有一个阻塞的 recv() 调用来等待使用 MSG_PEEK 的任何数据。当 recv 检测到要读取的数据时，我转到非阻塞 recv() 逐字节读取流。

除了客户端不发送数据的极端情况（即 write(socket, "", 0); ）外，一切正常。我想知道如何准确检测到没有数据的消息已发送。在这种情况下， recv() 永远阻塞。

此外，这篇文章几乎总结了我的问题，但它并没有提出检测大小为 0 数据包的方法。 [如果接收到有效载荷大小为 0 的有效 TCP 数据包，recv() 将返回什么值](https://stackoverflow.com/questions/3198049/what-value-will-recv-return-if-it-receives-a-valid-tcp-packet-with-payload-siz/3200060#3200060)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:27:00.483

在`send`/`recv`级别使用 TCP 时，您不知道进入流的数据包流量。当您通过 TCP 流发送非零字节数时，*序列号*会增加字节数。这就是双方在成功交换数据方面知道对方在哪里的方式。发送具有相同序列号的多个数据包并不意味着客户端做了任何事情（例如您的`write(s, "", 0)`示例），它只是意味着客户端想要传达一些其他信息（例如，以另一种方式流动的数据的 ACK ）。在流级别操作时，您无法直接看到重传、重复 ACK 或其他类似的异常情况。

您链接的答案说的差不多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:12:21.997

> 除了客户端不发送数据的极端情况（即 write(socket, "", 0); ）外，一切正常。

`write(socket, "", 0)`一开始甚至不是发送。它只是一个本地 API 调用，在网络上什么都不做。

> 我想知道如何准确检测到没有数据的消息已发送。

没有*消息*被发送，所以没有什么可检测的。

> 在这种情况下， recv() 永远阻塞。

我同意。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T03:59:09.853

> 我有一个阻塞的 recv() 调用来等待使用 MSG_PEEK 的任何数据。当 recv 检测到要读取的数据时，我转到非阻塞 recv() 逐字节读取流。

而不是使用`recv(MSG_PEEK)`，您应该使用`select()`,`poll()`或`epoll()`来检测数据何时到达，然后调用`recv()`以读取它。

# maven - Maven 没有编译我的源文件

> ID：15938024
> 
> 赞同：0
> 
> 时间：2013-04-10T23:02:33.473
> 
> 标签：maven, war, activiti

我有一个从 git 存储库导入的 Maven 项目：

[https://github.com/Activiti/Activiti.git](https://github.com/Activiti/Activiti.git) 标签 5.12

我导入了一个 maven 项目（Explorer2），它打包得很好，战争部署到 tomcat 服务器也很好。该项目未与源文件一起导入 Eclipse。我确实有源文件并将它们添加到 scr 文件夹中。我更改的文件（作为测试）在这里找到：

src > org > activiti > explorer > demo > DemoDataGenerator.java

我还在这里添加了一个测试类：

src > com > 测试 > Test.java

这些都不编译。我在“运行方式”菜单和“构建项目”上尝试了“打包”和“编译”。

如何设置它来编译源文件？

# python-2.7 - 如何扩展 sklearn TfIdfVectorizer 返回的 Scipy 稀疏矩阵以保存更多功能

> ID：15938025
> 
> 赞同：5
> 
> 时间：2013-04-10T23:02:34.267
> 
> 标签：python-2.7, scipy, sparse-matrix, scikit-learn

我正在使用 scikit-learn 分类器和文本特征提取器，特别是 TfidfVectorizer 类来解决文本分类问题。

问题是我有两种特征，第一种是由从 TfidfVectorizer 获得的 n-gram 捕获的，另一种是我从每个文档中提取的领域特定特征。我需要将每个文档的两个特征组合在一个特征向量中；为此，我需要通过在包含此文档的域特征的每一行中添加一个新维度来更新 TfidfVectorizer 返回的 scipy 稀疏矩阵。但是，我找不到一种简洁的方法来做到这一点，整洁的意思是不要将稀疏矩阵转换为密集矩阵，因为它根本不适合内存。

可能我错过了 scikit-learn 或其他东西的功能，因为我对 scipy 和 scikit-learn 都是新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:52:25.783

我认为最简单的方法是使用您的自定义功能创建一个新的稀疏矩阵，然后用于`scipy.sparse.hstack`堆叠这些功能。您可能还会发现管道模块中的“FeatureUnion”很有帮助。

# c++ - 设计一个记录器来转储用户定义的结构

> ID：15938032
> 
> 赞同：1
> 
> 时间：2013-04-10T23:03:07.257
> 
> 标签：c++, templates, inheritance, derived-class

我有一些用户定义的结构（不能更改），我想将它们存储在我的 Logger 类的地图中。IE

```
class Logger {
private:
map<string, vector<myType*> > myLog;
} 
```

当然，我不能这样做，因为 Logger 不是模板类。我认为没有足够的理由来改变这一点。

因此，我创建了一个 BaseClass 来解决用户定义的结构不从公共基础继承的事实。

```
class MyTypeBase {
}

template <typename T>
class MyTypeDerived : MyTypeBase {
void DoStuff(const T* tPtr);

private:
vector<T> myList;
} 
```

使我的 Logger 类看起来像：

```
class Logger {
LogState(const A* aPtr); 
LogState(const B* bPtr); 

private:
map<string, vector<MyTypeBase*> > myLog;
} 
```

我正在使用 LogState 的重载版本来解决模板化 Logger 对我来说还没有意义的事实。

我面临的问题是在 LogState(..) 中，我想调用 DoStuff 来处理输入。由于我的基类没有这个功能并且没有模板化，所以我不能调用它。

在客户端代码中，我希望它是：

```
Logger::LogState(aPtr);
Logger::LogState(bPtr); 
```

Logger 应该使用一些巫术魔法将这些状态推送到地图中并以无缝方式处理它们。

我看到一些类似的问题，其中一些评论提到了 boost::any 和 boost::shared_ptr; 如果有人可以详细说明这些选项，那将非常有帮助。

谢谢！

编辑 1：我希望我的 Logger 类对我打算转储的每个结构都有一个 LogState 方法，这有点愚蠢。再加上想要对所有这些类型使用单个容器（地图），这加剧了我的问题。

假设我有一个解决上述问题的 StateLogger 模板类（单例）。所有好东西都是在编译时为我生成的，我可以为我想要的每个结构存储数据包。

我的 Logger 类（也是一个单例）将是 StateLogger 与之交互的东西。这样，我就可以将状态特定逻辑与通用逻辑分离。

让我再考虑一下。橡皮鸭问题解决太酷了。

# ruby - 使用 repeat(:all) 时，Prawn 似乎不会向下推布局

> ID：15938034
> 
> 赞同：4
> 
> 时间：2013-04-10T23:03:09.397
> 
> 标签：ruby, prawn

我正在生成一个文档，其中包含流向每个后续页面的数据，每个页面都有一个标准标题。但是，当我使用 repeat(:all) 将标题放在每一页上时，我发现除了第一页之外的每一页上，下一个内容并没有被我放在页面上的标题横幅的大小向下移动.

我生成横幅的代码：

```
class SmartsoftPdf < Prawn::Document
  BOX_MARGIN = 30
  RHYTHM = 10
  INNER_MARGIN = 30

  # Colors
  #
  BLACK      = "000000"
  LIGHT_GRAY = "F2F2F2"
  GRAY       = "DDDDDD"
  DARK_GRAY  = "333333"
  BROWN      = "A4441C"
  ORANGE     = "F28157"
  LIGHT_GOLD = "FBFBBE"
  DARK_GOLD  = "EBE389"
  BLUE       = "08C"
  GREEN      = "00ff00"
  RED        = "ff0000"

  def show_header(text,date)
    header_box do
      image "#{Rails.root}/app/assets/images/smart_records_logo_h60.png", :height => 40
      draw_text text,
        :at => [80,25], :size => 12, :style => :bold, :color => BLUE
      draw_text "Date: #{ausDate(date)}", 
        :at => [bounds.right - 100,bounds.top - 15], :size => 10 if date
    end
  end

  def header_box(&block)
    bounding_box([-bounds.absolute_left, cursor + BOX_MARGIN + 8],
                 :width  => bounds.absolute_left + bounds.absolute_right,
                 :height => BOX_MARGIN*2) do

      fill_color LIGHT_GRAY
      fill_rectangle([bounds.left, bounds.top],
                      bounds.right,
                      bounds.top - bounds.bottom)
      fill_color BLACK
      move_down(RHYTHM)

      indent(BOX_MARGIN, &block)
    end

    stroke_color GRAY
    stroke_horizontal_line(-BOX_MARGIN, bounds.width + BOX_MARGIN, :at => cursor)
    stroke_color BLACK

    move_down(RHYTHM*4)
  end
end 
```

然后在 pdf 生成本身中，我这样做：

```
repeat(:all) do
  show_header("Custom Report",DateTime.now())
end 
```

但是，当我开始将内容放到页面上时，我希望当内容溢出到下一页时，内容将显示在标题之后。我发现标题与内容重叠。

这是说明问题的图像：http: [//i.imgur.com/mSy2but.png](http://i.imgur.com/mSy2but.png)

我是否错误地构建了标题框？我是否需要做一些额外的事情才能使溢出到下一页的内容被下推到适当的数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:23:36.857

好的。我自己解决了这个问题。最新版本的虾有更好的方法来处理这种情况。当您使用 repeat(:all) 时，页面会在文档创建后重新打开，然后添加您的内容创建项目。这不会将页面向下推。将此页眉添加到每个页面的正确方法是使用“画布”方法，该方法允许您在页边距之外进行操作。使用canvas在页面顶部绘制一个框，并设置页面top_margin将所有内容推送到banner下方。

```
canvas do
      bounding_box([bounds.left,bounds.top],
                   :width  => bounds.absolute_left + bounds.absolute_right,
                   :height => BOX_MARGIN*2) do

        fill_color LIGHT_GRAY
        fill_rectangle([bounds.left, bounds.top],
                        bounds.right,
                        bounds.top - bounds.bottom)
        fill_color BLACK
        move_down(RHYTHM)

        indent(BOX_MARGIN, &block)
      end

      stroke_color GRAY
      stroke_horizontal_line(-BOX_MARGIN, bounds.width + BOX_MARGIN, :at => cursor)
      stroke_color BLACK
 end 
```

在文档创建...

```
 def initialize(options = {})
    super(:page_layout => :landscape,:top_margin => HEIGHT_OF_BANNER)
 end 
```

# css - 尝试添加 CSS 子子菜单

> ID：15938038
> 
> 赞同：2
> 
> 时间：2013-04-10T23:03:24.847
> 
> 标签：css, menu, parent-child, submenu

在开始之前，我想让您知道，我一直在查看所有子菜单问题，但没有看到任何可以帮助我已经布置的代码的东西。我很感激任何人能给我的任何帮助。

所以，我正在尝试添加一个子子菜单，我以为我已经弄清楚了，但我认为我不太了解如何让子组合器工作。如果您可以专门查看代码的那部分，那么您将在我的“圣人名单”上。

ETA：哦，是的，问题是子子菜单没有出现在右边，并没有出现在它应该从其子菜单中的父级旁边，这就是我想要它做的事情。我希望这是有道理的。

这是小提琴预览 - [http://jsfiddle.net/BVtSC/18/](http://jsfiddle.net/BVtSC/18/)

这是CSS：

```
/*------------------------- Header ---------------------------*/
 #header {
 background: #333 url(../images/bg-header2.png) repeat-x;
 height:184px;
 margin:15px 0 0;
}
#header div {
margin:0 auto;
padding:28px 0 0;
position:relative;
width:500px;
}
#header div ul {
height:118px;
left:10px;
list-style:none;
margin:0;
overflow:visible;
padding:0;
position:absolute;
top:10px;
float: left;
width: 500px;
}
#header div ul li:first-child {
margin:0;
}
#header div ul li {
float:left;
height:66px;
margin:0 0 0 65px;
text-align:left;
position:relative;
}
#header div ul li a {
color:#fff;
font-family:oswaldregular;
font-size:16px;
line-height:24px;
text-decoration:none;
text-transform:uppercase;
}
#header div ul li.selected a, #header div ul li a:hover {
color:#DD2D00;
}
#header div ul li ul {
height:1000px;
left:-99999px;
overflow:visible;
position:absolute;
top:37px;
width:115px;
float: left;
}
#header div ul li:hover ul {
left:0;
top:37px;
}
#header div ul li ul li {
background:none #343434;
border:1px solid #4f4f4f;
float:none;
height:29px;
margin:-1px 0 0;
padding:0 12px;
position:relative;
width:auto;
z-index:1000;
}
#header div ul li ul li:hover {
background:none #DD2D00;
}
#header div ul li ul li:hover {
left:0;
top:0;
}
#header div ul li ul li a {
color:#ffffff!important;
font-family:Arial, Helvetica, sans-serif;
font-size:12px;
line-height:28px;
text-transform:none;
}
#header div ul li ul li.selected a, #header div ul li ul li a:hover {
color:#fff!important;
}
#header div ul li ul li ul {
height:1000px;
right:-99999px;
overflow:visible;
position:absolute;
top:37px;
width:115px;
float: right;
}
#header div ul li ul li:hover ul {
left:0;
top:37px;
}
#header div ul li ul li ul li {
background:none #343434;
border:1px solid #4f4f4f;
float:none;
height:29px;
margin:-1px 0 0;
padding:0 12px;
position:relative;
width:auto;
z-index:1000;
}
#header div ul li ul li ul li:hover {
background:none #DD2D00;
}
#header div ul li ul li ul li:hover {
left:0;
top:0;
}
#header div ul li ul li ul li a {
color:#ffffff!important;
font-family:Arial, Helvetica, sans-serif;
font-size:12px;
line-height:28px;
text-transform:none;
}
#header div ul li ul li ul li.selected a, #header div ul li ul li ul li a:hover {
color:#fff!important;
} 
```

这是HTML：

```
<div id="header">
<div>   

    <ul>
        <li>    <a href="index.html">Home</a>

        </li>
        <li>    <a href="about.html">About</a>

        </li>

        <li class="selected">   <a href="portfolio.html">Portfolio</a>

            <ul>
                <li>    <a href="fantasy.html">Fantasy</a>

                </li>
                <li>    <a href="makeup.html">Makeup</a>

                    <ul>
                        <li><a href="glamour.html">Glamour Makeup</a>
                        </li>
                        <li><a href="sfxmakeup.html">Special Effects Makeup</a>
                        </li>
                    </ul>
                </li>
                <li>    <a href="boudoir.html">Boudoir</a>

                </li>
                <li>    <a href="babykids.html">Baby & Kids</a>

                    <ul>
                        <li><a href="baby.html">Baby</li>
                        <li><a href="baby.html">Kids</li>  </ul>
                    </li>
                    <li>
                        <a href="family.html">Family</a>

                            <ul>
                                <li><a href="couples.html">Couples</li>
                        <li><a href="mombaby.html">Mother/Baby</li>
                        <li><a href="momchild.html">Mother/Child</li>
                        <li><a href="fatherchild.html">Father/Child</li>
                        </ul>
                    </li>
                    <li>
                        <a href="pets.html">Pets</a>

                                </li>
                                <li>    <a href="portrait.html">Portrait</a>

                                </li>
                                    </ul>
                        </li>

                        <li>    <a href="contact.html">Contact</a>

                        </li>
                    </ul>
</div>
</div> 
```

同样，任何帮助都会产生奇迹。谢谢您的考虑。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:09:58.173

三件事可以帮助你。
首先在 css 选择器中使用“>”。
第二次使用这个

```
ul ul{
    display:none;
}
ul > li:hover > ul {
    display:block;
} 
```

当您将鼠标悬停在其“<li>”父级上时，会导致显示 ul 块。
第三个是使用 css 位置来调整子菜单位置。像这样

```
#header > ul{
    position:relative;
}
li{
    position:relative;
}
ul ul{
    position:absolute;
    left:120px;
    top:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:23:47.927

或者您可以使用这是嵌套菜单的简单示例。（无限制）。[**jsfiddle**](http://jsfiddle.net/nS5P5)
你应该只调整它的大小和颜色。

HTML

```
<ul class="menu">
    <li><a href="#">item1</a></li>
    <li><a href="#">item2</a>
        <ul>
            <li><a href="#">sub item1</a></li>
            <li><a href="#">sub item2</a></li>
            <li><a href="#">sub item3</a>
                <ul>
                    <li><a href="#">sub sub item 1</a></li>
                    <li><a href="#">sub sub item 2</a>
                        <ul>
                            <li><a href="">sub sub sub item1</a></li>
                            <li><a href="">sub sub sub item2</a></li>
                            <li><a href="">sub sub sub item3</a>
                                <ul>
                                    <li><a href="">yes why not?</a></li>
                                    <li><a href="">you can still continue</a></li>
                                    <li><a href="">if you want</a></li>
                                    <li><a href="">you can try.(-;</a></li>
                                </ul>
                            </li>
                            <li><a href="">sub sub sub item4</a></li>
                        </ul>
                    </li>
                    <li><a href="#">sub sub item 3</a></li>
                </ul>
            </li>
            <li><a href="#">sub item4</a></li>
        </ul>
    </li>
    <li><a href="#">item3</a></li>
</ul> 
```

CSS

```
ul.menu{
    position:relative;
}

ul.menu li{
    padding:0;
    margin:0;
    position:relative;
    border:1px solid;
}

ul.menu > li{
    float:left;
    padding:10px 45px;
}

ul.menu > li li{
    padding:7px;
}

ul.menu , ul.menu ul{
    list-style:none;
    padding:5px;
    margin:0;
    overflow:visible;
}

ul.menu li:hover > ul{
    display:block;
}

ul.menu ul{
    display:none;
    position:absolute;
    left:-6px;
    top:37px;
    width:160px;
}

ul.menu ul:hover{
    display:block;
}

ul.menu ul ul{
    left:158px;
    top:0;
} 
```

# ios - 为什么 NSDateFormatter 不解析这个日期？

> ID：15938039
> 
> 赞同：2
> 
> 时间：2013-04-10T23:03:27.060
> 
> 标签：ios, objective-c, nsdateformatter

我无法让 NSDateFormatter 识别我传入的这个日期。我很确定它与工作日有关，但我无法弄清楚。

```
NSString *testDate = @"20130412 Friday";
NSDateFormatter *df = [[NSDateFormatter alloc] init];
df.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
df.dateFormat = @"yyyyMMdd cccc";
NSDate *result = [df dateFromString:testDate];
NSLog(@"test: %@, result: %@", testDate, result); 
```

这将给我一个结果日期 1999-12-30。我在工作日尝试过eeee和EEEE，但没有帮助。删除工作日似乎可行，但不能解释我的日期格式有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:52:10.367

我不明白为什么会有工作日。它会造成日期不一致的可能性。你对“20130412 Tuesday”有什么期待？（未来读者注意：20130412 实际上是星期五）我检查了[http://userguide.icu-project.org/formatparse/datetime](http://userguide.icu-project.org/formatparse/datetime)并没有发现禁止添加星期几，但这似乎是个坏主意大部头书。

但是，NSDateFormatter 的行为似乎不正确。我在 iOS 6.1 模拟器和 OS X 10.8.3 上进行了测试，在两个平台上都得到了相同的结果。我什至扩展了一点，添加

```
id longResult;
NSError *error;
NSRange range = NSMakeRange(0, testDate.length);
if (![df getObjectValue:&longResult forString:testDate range:&range error:&error]) {
    NSLog(@"error: %@ reason:%@", error.localizedDescription, error.localizedFailureReason );
}

NSLog(@"result: %@", longResult);
NSLog(@"%@", NSStringFromRange(range)); 
```

在您的代码下方并生成

```
2013-04-10 16:45:27.921 date formatter fun ios[47350:c07] test: 20130412 Friday, result: 1999-12-31 07:00:00 +0000
2013-04-10 16:45:27.922 date formatter fun ios[47350:c07] result: 1999-12-31 07:00:00 +0000
2013-04-10 16:45:27.922 date formatter fun ios[47350:c07] {0, 15} 
```

它正在尝试解析，返回 YES（成功解析），但将错误的答案放入结果中。

# sql - 确定查询的进度 (Oracle PL/SQL)

> ID：15938040
> 
> 赞同：10
> 
> 时间：2013-04-10T23:03:33.103
> 
> 标签：sql, database, oracle, plsql, monitoring

我是使用 Oracle 数据库的 Web 应用程序的开发人员。但是，UI 通常会触发需要一段时间才能处理的数据库操作。因此，当这些情况发生时，客户端会想要一个进度条。

我最近发现我可以从第二个连接查询 V$SESSION_LONGOPS，这很棒，但它只适用于耗时超过 6 秒的操作。这意味着我无法更新 UI 中的进度条，直到 6 秒过去。

我已经对 V$SESSION 中的等待时间进行了研究，但据我所知，这不包括等待查询。

有没有办法获取当前正在运行的会话查询的进度？或者我应该隐藏进度条直到 6 秒过去？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T06:16:44.637

这些操作是 Pl/SQL 调用还是只是长时间运行的 SQL？

`SET_SESSION_LONGOPS()`通过 PL/SQL 操作，我们可以在`DBMS_APPLICATION_INFO`包中写入消息。我们可以在`V$SESSION_LONGOPS`. [了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_appinf.htm#i996999)。

为此，您需要能够以工作单元量化操作。这些必须是具体事物的迭代，并且是数字而不是时间。因此，如果操作是插入 10000 行，您可以将其分成 10 个批次。该`totalwork`参数是批次数（即`10`），您在每 1000 行之后调用 SET_SESSION_LONGOPS() 以增加该`sofar`参数。这将允许您渲染一个十块的温度计。

这些消息是基于会话的，但没有自动方法将当前消息与来自相同会话和 SID 的先前消息区分开来。但是，如果您将 UID 分配给`context`参数，则可以使用该值来过滤视图。

* * *

这不适用于单个长时间运行的查询，因为我们无法将其分成块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:17:44.697

我发现这非常有用

```
dbms_session.set_module("MY Program" , "Kicking off ... ")
..
dbms_session.set_action("Extracting data ... ")
..
dbms_session.set_action("Transforming data ... ")
.. 
```

您可以使用以下方式监控进度

```
select module , action from v$session where sid = :yoursessionid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-01T19:03:46.290

使用 V$_SESSION_LONGOPS 需要设置 TIMED_STATISTICS=true 或 SQL_TRACE=true。您的数据库模式必须被授予 ALTER SESSION 系统权限才能这样做。

我曾经尝试将 V$_SESSION_LONGOPS 用于复杂且长时间运行的查询。但事实证明 V$_SESSION_LONGOPS 可能会显示*部分*查询的进度，例如全表扫描、连接操作等。

另见：[http ://www.dba-oracle.com/t_v_dollar_session_longops.htm](http://www.dba-oracle.com/t_v_dollar_session_longops.htm)

您可以做的只是向用户显示“查询仍在运行”。我实现了一个`<DIV>`嵌套到 a`<TD>`中，随着浏览器发送的每个状态请求而变得更长。状态请求由`window.SetTimeout`（每 3 秒）发起，是对服务器端过程的 AJAX 调用。服务器端过程返回的状态报告只是说“我们仍在运行”。进度条的宽度（即`<DIV>`' 的宽度）`<TD>`每次以 s 宽度的 5% 递增，显示 100% 后重置为 5%。

对于长时间运行的查询，您可能会在单独的表中跟踪它们所花费的时间，可能带有用于不同 where 子句的单独条目。您可以使用它在客户端对话框中显示平均时间加上刚刚过去的时间。

如果您在服务器端有一个长时间运行的 PL/SQL 过程或类似的程序执行几个步骤，请尝试以下操作：

*   为状态消息创建表
*   为用户启动的任何进程使用唯一键。建议：客户端的javascript日期（以毫秒为单位）+会话ID。
*   如果要通过浏览器窗口中的链接启动长时间运行的过程，请使用 DBMS_JOB.SUBMIT 创建一个作业来运行该过程，而不是直接运行该过程
*   使用 PRAGMA AUTONOMOUS_TRANSACTION 编写一个更新状态表的简短过程。此 pragma 允许您提交对状态表的更新，而无需提交主过程的更新。主过程的每个主要步骤都应在此状态表中具有自己的条目。
*   编写程序查询浏览器调用的状态表
*   如果用户单击“取消”或关闭窗口，则编写一个由 AJAX 调用调用的过程
*   编写一个在每个步骤完成后由主过程调用的过程：它查询状态表并引发异常，如果设置了取消标志或浏览器没有查询状态，则为 20,000 秒，例如， 60 秒。在主过程的异常处理程序中查找此错误，执行回滚并更新状态表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T03:54:48.930

这些年来，我做了很多 Web 开发，`Oracle`发现大多数用户更喜欢不确定的进度条，而不是不准确的确定进度条（几乎所有`Microsoft's`让我烦恼的进度条），不幸的是没有可靠的方法可以准确地确定查询进度。

虽然您对长操作能力的研究令人钦佩，并且肯定有助于使数据库查询的进度更加可靠，但它不能考虑可能/将影响 Web 操作的事务进度​​（网络负载）的无数其他变量、数据库负载、应用服务器负载、客户端数据解析、用户点击提交按钮 1000 次等）。

我会坚持使用 Javascript 回调的不确定进度方法。它更容易实现，并且会根据需要管理用户的期望。

# c - 在C中逐个字符读取字符串

> ID：15938041
> 
> 赞同：0
> 
> 时间：2013-04-10T23:03:40.467
> 
> 标签：c, string

我正在尝试在 C 中逐个字符地读取字符串。由于没有字符串类，因此没有函数可以帮助解决这个问题。这就是我想做的：我有，

```
char m[80];  //I do some concenation, finally m is:

m= 12;256;2; 
```

现在，我想计算半列之间有多少个字符。在这个例子中，分别有 2,4 和 1 个字符。怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:13:33.247

你是什​​么意思“没有功能可以帮助这个”？有。如果要读取字符串，请查看函数`fgets`。

关于手头的问题，假设你有这个：

```
char m[80] = "12;256;2"; 
```

你想计算分号之间的字符。最简单的方法是使用`strchr`.

```
char *p = m;
char *pend = m + strlen(m);
char *plast;
int count;

while( p != NULL ) {
    plast = p;
    p = strchr(p, ';');

    if( p != NULL ) {
        // Found a semi-colon.  Count characters and advance to next char.
        count = p - plast;
        p++;
    } else {
        // Found no semi-colon.  Count characters to the end of the string.
        count = pend - p;
    }

    printf( "Number of characters: %d\n", count );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:33:37.493

如果您不介意修改字符串，那么最简单的方法是使用`strtok`.

```
#include <string.h>
#include <stdio.h>
int main(void) {
    char m[80] = "12;256;2;";
    char *p;

    for (p = strtok(m, ";"); p; p = strtok(NULL, ";"))
        printf("%s = %u\n", p, strlen(p));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T23:14:31.630

好吧，我不确定是否应该在这里为您编写代码，只是更正它。但...

```
int strcount, charcount = 0, numcharcount = 0, num_char[10] = 0;  
                                            //10 or how many segments you expect

for (strcount = 0; m[strcount] != '\0'; strcount++) {

    if (m[strcount] == ';') {

         num_char[numcharcount++] = charcount;
         charcount = 0;             

    } else {

         charcount++;

    }

} 
```

这将存储`;`数组中每个字符的数量。我承认这有点草率，但它会满足你的要求。

# vb.net - 如何将数据绑定 datagridview 的内容导出到 vb.net 中的单词？

> ID：15938045
> 
> 赞同：1
> 
> 时间：2013-04-10T23:04:15.327
> 
> 标签：vb.net, datagridview, ms-word, export

我已经找到了在 c# 或 asp.net 中执行此操作的方法，但我需要 VB.net。我有一个需要导出到 .doc 文件的 dataviewgrid（我确信我可以弄清楚文档的格式等）。或者，如果这太复杂了，可以使用 excel 文件。

似乎有很多 asp.net 示例，但在 vb 上的 vb studio 中没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:09:26.973

过去在屏幕上显示 datagridview 并将页面的 mime 类型更改为 application/excel。它将自动在嵌入的 Excel 文件中打开。

试试这个链接如何做到这一点：http: [//support.microsoft.com/kb/317719](http://support.microsoft.com/kb/317719)

# iphone - NSFetchedResultsController 没有更新？

> ID：15938055
> 
> 赞同：1
> 
> 时间：2013-04-10T23:05:12.970
> 
> 标签：iphone, ios, objective-c, core-data

当我的用户看到一张图片时，她可以通过按下按钮来点赞。运行以下代码：

```
- (void)feedback:(Item *)item isLiked:(bool)liked {
    // Update the item with the new score asynchornously
    NSManagedObjectID *itemId = item.objectID;
    dispatch_async(dispatch_get_main_queue(), ^{
        // Create a new managed object context and set its persistent store coordinator
        // Note that this **must** be done here because this context belongs to another thread
        AppDelegate *theDelegate = [[UIApplication sharedApplication] delegate];
        NSManagedObjectContext *localContext = [[NSManagedObjectContext alloc] init];
        [localContext setPersistentStoreCoordinator:[theDelegate persistentStoreCoordinator]];

        Item *localItem = (Item *)[localContext objectWithID:itemId];
        localItem.liked = [NSNumber numberWithBool:liked];
        localItem.updated_at = [NSDate date];
        NSError *error;
        if (![localContext save:&error]) {
            NSLog(@"Error saving: %@", [error localizedDescription]);
        }
    }); 
```

在我的应用程序中， LikedViewController 显示用户喜欢的图像。LikedVC 由一个连接到 NSFetchedResultsController 的 UITableViewController 组成。

喜欢VC：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // NSFetchedResultsController
    NSManagedObjectContext *moc = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    _fetchedResultsController = \
    [[NSFetchedResultsController alloc] initWithFetchRequest:[self.delegate getFetchRequest]
                                        managedObjectContext:moc
                                          sectionNameKeyPath:nil
                                                   cacheName:nil];  // TODO investigate whether we should bother with cache
    _fetchedResultsController.delegate = self;

    NSError *error;
    if (![[self fetchedResultsController] performFetch:&error]) {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail
    }

    // Bottom loading bar
    self.tableView.tableFooterView = self.footerView;
    self.footerActivityIndicator.hidesWhenStopped = true;

    // ActivityIndicator
    self.activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    self.activityIndicator.color = [UIColor blackColor];
    [self.tableView addSubview:self.activityIndicator];
    self.activityIndicator.hidesWhenStopped = true;
    // FIXME Unable to center it inside the tableView properly
    self.activityIndicator.center = CGPointMake(self.tableView.center.x, self.tableView.center.y - self.tabBarController.tabBar.frame.size.height);
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    // Automatically fetch when there is nothing in the UITableView
    if ([self tableView:self.tableView numberOfRowsInSection:0] == 0) {
        if ([self canFetch]) {
            [self refill];
        }
    }
}

- (void)viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:animated];

    if (self.operation && self.operation.isExecuting) {
        NSLog(@"Cancelling Operation: %@", self.operation);
        [self.operation cancel];
        self.isFetching = false;
    }
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"FeedCell";
    Item *item = [_fetchedResultsController objectAtIndexPath:indexPath];

    FeedCell *cell = (FeedCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    cell.item = item;
    cell.tag = indexPath.row;
    cell.customImageView.userInteractionEnabled = YES;

    // NOTE Don't try to do this at the UITableViewCell level since the tap will be eaten by the UITableView/ScrollView
    if (self.likeOnTap) {
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
        tap.numberOfTapsRequired = 1;
        [cell.customImageView addGestureRecognizer:tap];
    }

    // Set up the buttons
    [cell.likeButton addTarget:self action:@selector(liked:) forControlEvents:UIControlEventTouchUpInside];
    [cell.dislikeButton addTarget:self action:@selector(disliked:) forControlEvents:UIControlEventTouchUpInside];
    [cell.detailButton addTarget:self action:@selector(detailed:) forControlEvents:UIControlEventTouchUpInside];

    [[SDImageCache sharedImageCache] queryDiskCacheForKey:item.image_url done:^(UIImage *image, SDImageCacheType type) {
        if (image) {
            [cell setCustomImage:image];
        } else {
            // If we have to download, make sure user is on the image for more than 0.25s before we
            // try to fetch. This prevents mass downloading when the user is scrolling really fast
            double delayInSeconds = 0.25;
            dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
            dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                if ([self isIndexPathVisible:indexPath]) {
                    [SDWebImageDownloader.sharedDownloader
                     downloadImageWithURL:[NSURL URLWithString:item.image_url]
                     options:0
                     progress:^(NSUInteger receivedSize, long long expectedSize) { }
                     completed:^(UIImage *image, NSData *data, NSError *error, BOOL finished) {
                         if (image && finished) {
                             [cell setCustomImage:image];
                             [[SDImageCache sharedImageCache] storeImage:image forKey:item.image_url];
                         }
                     }];
                }
            });
        }
    }];

    // Check if we are almost at the end of the scroll. If so, start fetching.
    // Doing this here is better than overriding scrollViewDidEndDragging
    if (indexPath.row >= [self.tableView numberOfRowsInSection:0] - 3) {
        [self refill];
    }

    return cell;
}

#pragma mark - Table view delegate

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id sectionInfo = [_fetchedResultsController.sections objectAtIndex:section];
    NSInteger ret = [sectionInfo numberOfObjects];
    self.hasContent = (ret != 0);
    return ret;
}

# pragma mark - NSFetchedResultsControllerDelegate

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    NSLog(@"1");
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {
    NSLog(@"2");
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                          withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                          withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath {
    NSLog(@"3");
    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [NSException raise:@"Unknown update" format:@"NSFetchedResultsChangeUpdate: invoked"];
            // [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [NSException raise:@"Unknown update" format:@"NSFetchedResultsChangeMove: invoked"];
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    NSLog(@"4");
    [self.tableView endUpdates];
} 
```

（请注意，我省略了一些信息以使这个问题简短）

这是 LikedVC 的 fetchRequest

```
- (NSFetchRequest *)getFetchRequest {
    NSManagedObjectContext *moc = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Item" inManagedObjectContext:moc];
    [request setPredicate:[NSPredicate predicateWithFormat:@"liked == %d OR origin == %d", 1, OriginsLike]];
    [request setEntity:entity];
    [request setResultType:NSManagedObjectResultType];
    [request setFetchBatchSize:10];
    NSSortDescriptor *d = [[NSSortDescriptor alloc] initWithKey:@"updated_at" ascending:NO selector:nil];
    [request setSortDescriptors:[NSArray arrayWithObject:d]];
    return request;
} 
```

我看到用户喜欢某个项目的错误，但是当用户切换到 LikedVC 时，该项目不会显示在任何地方。

我在 tableView 的 controllerDidChangeContent、controllerWillChangeContent 等方法中添加了 NSLog(@"1")、NSLog(@"2")、...。我根本没有看到“1”、“2”、.. 被记录。

为什么我的 NSFetchedResultsController 不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:56:45.010

**直接回答**

您的问题的直接答案是您需要观察 `NSManagedObjectContextDidSaveNotification`临时上下文中的更改并将其合并到`NSFetchedResultsController`正在观察的主要上下文中。最好在拥有您的主要上下文的任何对象中执行此操作。看起来您正在使用您的应用程序委托。

您按如下方式合并数据：

```
- (void)managedObjectContextDidSave:(NSNotification *)notification
{
    // if the notification is on a background thread, forward it to the main thread
    if (![NSThread isMainThread]) {
        [self performSelectorOnMainThread:@selector(managedObjectContextDidSave:) withObject:notification];
        return;
    }

    // if a context other than the main context has saved, merge the changes
    if (notification.object != self.managedObjectContext) {
        [self.managedObjectContext mergeChangesFromContextDidSaveNotification:notification];
    }
} 
```

**您的代码似乎可疑**

您的所有逻辑都发生在主队列上，因此您根本不需要另一个上下文。`dispatch_async`在这种情况下，在主队列上使用也没有真正的好处。如果您将所有内容都保留在主线程上，只需创建新对象并将其直接保存到主上下文中。如果您确实希望事情是异步的，请使用 dispatch_async 将块分派到后台队列，然后您将需要一个新的上下文（如您已实现的那样）用于后台线程。

# c - 如何确定父/其他目录中的文件和目录

> ID：15938059
> 
> 赞同：0
> 
> 时间：2013-04-10T23:05:41.173
> 
> 标签：c, file, directory

[我发现这里](https://stackoverflow.com/a/1036706/2159152)的另一个问题的答案非常有帮助。

sys/stat.h 库似乎有一个限制，因为当我尝试查看其他目录时，所有内容都被视为一个目录。

我想知道是否有人知道另一个系统功能，或者为什么它将当前工作目录之外的任何东西都视为一个目录。

我感谢任何人提供的任何帮助，因为这让我感到困惑，并且各种搜索都没有任何帮助。

我用来测试的代码是：

```
#include <sys/stat.h>
#include <dirent.h>
#include <stdio.h>

int main(void) {

        int status;

        struct stat st_buf;
        struct dirent *dirInfo;

        DIR *selDir;
        selDir = opendir("../");
                                    // ^ or wherever you want to look
        while ((dirInfo = readdir(selDir))) {

                status = stat (dirInfo->d_name, &st_buf);

                if (S_ISREG (st_buf.st_mode)) {
                        printf ("%s is a regular file.\n", dirInfo->d_name);
                }
                if (S_ISDIR (st_buf.st_mode)) {
                        printf ("%s is a directory.\n", dirInfo->d_name);
                }

        }

        return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:13:15.820

您需要检查`stat`通话状态；它失败了。

问题是你在当前目录中寻找一个文件`the_file`，而实际上它只存在于`../the_file`. 该`readdir()`函数为您提供相对于其他目录的名称，但`stat()`适用于当前目录。

要使其正常工作，您必须执行以下操作：

```
char fullname[1024];

snprintf(fullname, sizeof(fullname), "%s/%s", "..", dirInfo->d_name);

if (stat(fullname, &st_buf) == 0)
    ...report on success...
else
    ...report on failure... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:09:17.097

如果您打印出 stat，您会注意到有一个错误（找不到文件）。

这是因为 stat 获取文件的路径，但您只是提供文件名。然后对垃圾值调用 IS_REG。

因此，假设您有一个文件 ../test.txt 您在 test.txt 上调用 stat...它不在目录 ./test.txt 中，但您仍然从 IS_REG 打印出结果。

# jquery - jQuery在.load（）之后没有提交表单

> ID：15938064
> 
> 赞同：-2
> 
> 时间：2013-04-10T23:06:10.610
> 
> 标签：jquery, forms, submit

我有一个加载的页面，然后当加载完成时，它使用 Jquery 将内容加载到一个框中。该框包含一个表格。我希望它也能够通过 jQuery 提交表单。但是，当我尝试它时，页面只是刷新，我在 URL 栏中获得了 GET 变量。

jQuery，确实加载并假设提交表单：

```
$(document).ready(function(){
$("#passchangebox").load("boxes/settings_security_password.php?uID=" + uID, function() {
    $(".form_error").hide();
    $("#changepasswordloader").hide();
});
$("#passwordchange").submit(function(event) {  
    $('.form_error').hide();  
    var pass = $("input#pass").val();  
    if (pass === "") {  
        $("#pass_error").show();  
        $("input#pass").focus();  
        return false;
    }
    cpass = $("input#cpass").val();  
    if (cpass === "") {  
        $("#cpass_error").show();  
        $("input#cpass").focus(); 
        return false;
    }
    if(pass !== cpass){
        $("#match_error").show();  
        $("input#cpass").focus(); 
        return false;
    }
    email = $("input#email").val();
    $.ajax({
        type: "POST",
        url: "functions/settings_passwordchange.php",
        data: $('#passwordchange').serialize(),
        success: function(result) {
            if(result == 1){       
                $('input#pass').val("");
                $('input#cpass').val("");
                $('#payment_window_message_success').fadeIn(300);
                $('#payment_window_message_success').delay(3000).fadeOut(700);
                return false;
            }
        },
        error: function() {
            $('#payment_window_message_error_mes').html("An error occured, form was not submitted");
            $('#payment_window_message_error').fadeIn(300);
            $('#payment_window_message_error').delay(3000).fadeOut(700);
        }
    });
    event.preventDefault();
    return false;
    });
}); 
```

加载到页面中的 PHP 包含以下表单：

```
<?php
//get required config file and check login
if(!@include("../connect.php")){
    echo"<aside>
        <div class='error' id='errorconnecthide-this'>
            <img src='http://resources.domain.co.nz/backgrounds/icon_error.png' class='messageimg' />
            <h4>Error - Current Page</h4>
            <p>There was an error making a connection to the database. Please try again later.</p>
        </div>
    </aside>";
} elseif(isset($_GET['uID'])){
    $uID = strip_tags(stripslashes($_GET['uID']));
    if(!is_numeric($uID)){
        echo"<aside>
            <div class='error' id='errorconnecthide-this'>
                <img src='http://resources.domain.co.nz/backgrounds/icon_error.png' class='messageimg' />
                <h4>Error - User</h4>
                <p>There was an error retrieving the user information. Please try again later.</p>
            </div>
        </aside>";
    } else {
        //GET THE USERS EMAIL
        $get_custInfo = 'singleuser';
        $userInfo_ID = $uID;
        if(!include("../classes/global_userinfo_details.php")){
            echo"<aside>
                <div class='error' id='errorconnecthide-this'>
                    <img src='http://resources.domain.co.nz/backgrounds/icon_error.png' class='messageimg' />
                    <h4>Error - User</h4>
                    <p>There was an error retrieving the user information. Please try again later.</p>
                </div>
            </aside>";
        } else {
            $details = mysqli_fetch_assoc($userInfo_qry);
            $email = stripslashes($details['userinfo_email']);
            echo"<form class=\"halfboxform\" id=\"passwordchange\">
                <fieldset>
                    <br />
                    <input type=\"hidden\" id=\"email\" value=\"$email\" />
                    <label for=\"pass\">New Password:</label>
                    <input type=\"password\" name=\"pass\" id=\"pass\" size=\"45\" />
                    <p class=\"form_error clearb red input\" id=\"pass_error\">This field is required.</p>
                    <label for=\"cpass\" class=\"clearb\">Confirm:</label>
                    <input type=\"password\" name=\"cpass\" id=\"cpass\" size=\"45\" />
                    <p class=\"form_error clearb red input\" id=\"cpass_error\">This field is required.</p>
                    <p class=\"form_error clearb red input\" id=\"match_error\">Those passwords didnt match.</p>
                    <br class=\"clearl\" />
                    <br />
                    <input type=\"submit\" value=\"Update Login Details\" class=\"submit\" />
                </fieldset>
                <div class='clear'></div>
            </form>";
        }
    }
} else {
    echo"<aside>
        <div class='error' id='errordisplayhide-this'>
            <img src='http://resources.domain.co.nz/backgrounds/icon_error.png' class='messageimg' />
            <h4>Error - Unknown</h4>
            <p>There was an error retrieving the necessary information. Please try again later.</p>
        </div>
    </aside>";
}
?> 
```

对此的任何帮助都非常感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:35:31.837

解决方案是将提交功能移动到加载成功功能中，如下所示：

```
$(document).ready(function(){
    $("#passchangebox").load("boxes/settings_security_password.php?uID=" + uID, function() {
        $(".form_error").hide();
        $("#changepasswordloader").hide();
        $("#passwordchange").submit(function(event) { 
```

有信心我以前尝试过这个但它没有用，是否是我不确定的评论建议所做的更改的组合。也许有人可以解释为什么？感谢所有评论并帮助改进的人。

# android - 使用 ontouchevent 绘制橡皮筋线

> ID：15938066
> 
> 赞同：0
> 
> 时间：2013-04-10T23:06:31.243
> 
> 标签：android, touch-event, rubber-band, line-drawing

好的，我正在尝试制作一个利用 linedrawview 的程序。当用户启动一个触摸事件（动作 DOWN）时，它会获取当前的 x 和 y 并将它们存储在变量中。然后，当用户四处拖动手指时，会绘制一条线并以橡皮筋的方式进行动画处理。最后，当用户放手（动作 UP）时，该线被创建。我在这方面遇到了很多麻烦，希望得到一些帮助。到目前为止，我的 LineDrawView.java 代码：

```
 // Project:         Java2LineDrawEx
    // File:            LineDrawView.java
    // Date:            4/9/13
    // Author:          Joshua Lefelhocz
    // Description:     custom view to draw lines on

    package com.lcc.java2lab11lefelhocz;

    import android.content.Context;
    import android.graphics.Canvas;
    import android.graphics.Color;
    import android.graphics.Paint;
    import android.view.MotionEvent;
    import android.view.View;

    // Notice this class extends View
    public class LineDrawView extends View 
    {
// This view's bounds

private int xMin = 0;          
private int xMax;
private int yMin = 0;
private int yMax;
private float currentX;
private float currentY;

// Paint object
private Paint paintFill;

// constructor
public LineDrawView(Context context) 
{
    // call the super class constructor
    super(context);

    // The Paint class holds the style and color information about how to draw geometries, text and bitmaps.
    // For efficiency create the paint objects in the constructor, not in draw
    // paint.setStrokeWidth(10); // works on lines
    // You can change the color of Paint without effecting objects already drawn
    // You can NOT change the style of Paint without effecting objects already drawn
    // The Style, TextSize apply to all objects drawn with the paint.

    // Create a default Paint object Style=Fill
    paintFill = new Paint();

    // set the background color when the view is created
    this.setBackgroundColor(Color.LTGRAY);  
}

// Called to draw the view. Also called by invalidate().
@Override
protected void onDraw(Canvas canvas) 
{
    //      canvas.drawColor(Color.LTGRAY); // this works in onDraw to set the background color

    // Draw a Red Diagonal line from upper left corner to bottom right corner
    paintFill.setColor(Color.RED); 
    canvas.drawLine(xMin, yMin, xMax, yMax, paintFill);

    // draw a blue line 10 pixels wide horizontal across the center.
    paintFill.setColor(Color.BLUE);
    paintFill.setStrokeWidth(10);
    canvas.drawLine(xMin, yMax/2, xMax, yMax/2, paintFill);

    // draw a yellow line 20 pixels wide vertical across the center.
    paintFill.setColor(Color.YELLOW);
    paintFill.setStrokeWidth(20);
    canvas.drawLine(xMax/2, yMin, xMax/2, yMax, paintFill);
}

// Called when the view is first created or its size changes.
@Override
public void onSizeChanged(int width, int height, int oldWidth, int oldHeight) 
{
    // Set the view bounds
    xMax = width-1;
    yMax = height-1;
}

public boolean onTouchEvent(MotionEvent event)
{
    currentX = event.getX();
    currentY = event.getY();

    switch(event.getAction())
    {
    case MotionEvent.ACTION_DOWN:
        float startX = currentX; 
        float startY = currentY;

    case MotionEvent.ACTION_MOVE:
        float endX = 

    case MotionEvent.ACTION_UP:

        return super.onTouchEvent(event);
    }
    return super.onTouchEvent(event);
}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:43:14.557

好的，我发现：确保设置起始位置 x 和 y，如下所示：

currentXExample = event.getX(); currentYExample = event.getY();

exampleStartX = currentXExample; exampleStartY = currentYExample;

exampleEndX = currentXExample;

示例EndY = 当前Y示例；

您可以将其排除在 Up 事件之外，但永远不要将其排除在 MOVE 事件之外，否则它将不起作用。

LineDrawView.java

```
// Project:         Java2Lab
// File:            LineDrawView.java
// Date:            4/9/13
// Author:          Joshua Lefelhocz
// Description:     custom view to draw lines on

package com.lcc.java2lab11lefelhocz;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.MotionEvent;
import android.view.View;

// Notice this class extends View
 public class LineDrawView extends View 
{
      // This view's bounds

private int xMin = 0;          
private int xMax;
private int yMin = 0;
private int yMax;
private float currentX;
private float currentY;
private float startX;
private float endX;
private float startY;
private float endY;
// Paint object
private Paint paintFill;

// constructor
public LineDrawView(Context context) 
{
    // call the super class constructor
    super(context);

    // The Paint class holds the style and color information about how to draw geometries, text and bitmaps.
    // For efficiency create the paint objects in the constructor, not in draw
    // paint.setStrokeWidth(10); // works on lines
    // You can change the color of Paint without effecting objects already drawn
    // You can NOT change the style of Paint without effecting objects already drawn
    // The Style, TextSize apply to all objects drawn with the paint.

    // Create a default Paint object Style=Fill
    paintFill = new Paint();

    // set the background color when the view is created
    this.setBackgroundColor(Color.LTGRAY);  
}

// Called to draw the view. Also called by invalidate().
@Override
protected void onDraw(Canvas canvas) 
{
   //canvas.drawColor(Color.LTGRAY); // this works in onDraw to set the background color

    // Draw a Red Diagonal line from upper left corner to bottom right corner

    paintFill.setColor(Color.BLACK);
    canvas.drawLine(startX, startY, endX, endY, paintFill);

}

// Called when the view is first created or its size changes.
@Override
public void onSizeChanged(int width, int height, int oldWidth, int oldHeight) 
{
    // Set the view bounds
    xMax = width-1;
    yMax = height-1;
}

public boolean onTouchEvent(MotionEvent event)
{
    currentX = event.getX();
    currentY = event.getY();

    switch(event.getAction())
    {   
    case MotionEvent.ACTION_DOWN:
        startX = currentX;
        startY = currentY;
        return true;
    case MotionEvent.ACTION_MOVE:
    endX = currentX;
    endY = currentY;
    invalidate();
        return true;
    case MotionEvent.ACTION_UP:

        return true;
    }
    return super.onTouchEvent(event);
     }
} 
```

# function - php函数将html内容从函数更改为返回而不是显示它们

> ID：15938075
> 
> 赞同：0
> 
> 时间：2013-04-10T23:07:22.540
> 
> 标签：function, return

我有一个功能

```
myfunc(){

   ?>
   <h1>Title</h1>
   <div class="container">
       <?php if (condition): ?>
           <div class="something">more data</div>
       <?php endif; ?>
   </div>
   <?php

} 
```

这个函数有更多的 HTML 内容与 php if 语句相结合

现在，我想将该 html 内容存储到一个变量中，以便我以后可以使用它......现在它会立即显示函数的内容，这不是我想要的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:18:45.410

看看 php heredoc 和 nowdoc

它可能会有所帮助

[http://php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)

# html - 热点地图上的隐藏 div

> ID：15938076
> 
> 赞同：0
> 
> 时间：2013-04-10T23:07:23.200
> 
> 标签：html, hiddenfield

我试图获得与此类似的地图，因为当您单击地图区域时，右侧会出现一个 div 并向您显示该区域最近的商店

[http://www.kaiwakaclothing.co.nz/our-stores.php](http://www.kaiwakaclothing.co.nz/our-stores.php)

我一直在使用下面的这个网站获取代码；

[http://www.randomsnippets.com/2008/02/12/how-to-hide-and-show-your-div/](http://www.randomsnippets.com/2008/02/12/how-to-hide-and-show-your-div/)

并在 Dreamweaver 中实现了使用热点来执行以下操作

[http://www.colmanweb.co.nz/websites/betacraft/index.php?option=com_content&view=article&id=31](http://www.colmanweb.co.nz/websites/betacraft/index.php?option=com_content&view=article&id=31)

但是我似乎无法为每个区域显示不同的文本或隐藏的 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:10:35.900

抱歉，我设法解决了这个问题

添加

```
<script language="javascript" type="text/javascript">
// <![CDATA[
function togglewai() {
    var ele = document.getElementById("toggleText2");
    var text = document.getElementById("displayText");
    if (ele.style.display == "block") {
        ele.style.display = "none";
        text.innerHTML = "show";
    } else {
        ele.style.display = "block";
        text.innerHTML = "hide";
    }
}
// ]]> 
```

关键是改变名称功能切换到togglewai

# c++ - C++ 在多大程度上是一种静态类型语言？

> ID：15938077
> 
> 赞同：21
> 
> 时间：2013-04-10T23:07:39.200
> 
> 标签：c++, c++11, language-lawyer, static-typing, dynamic-typing

我曾经认为这个问题的答案是“ *100%* ”，但最近有人指出了一个值得三思的例子。考虑一个声明为具有自动存储持续时间的对象的 C 数组：

```
int main()
{
    int foo[42] = { 0 };
} 
```

这里的类型`foo`很明显`int[42]`。相反，考虑这种情况：

```
int main()
{
    int* foo = new int[rand() % 42];
    delete[] foo;
} 
```

这里的类型`foo`是`int*`，但是如何知道在编译时由**表达式****创建的对象的类型呢？`new`**（强调是为了强调我不是在谈论表达式返回的指针`new`，而是谈论由表达式创建的*数组对象*`new`）。

这是 C++11 标准的第 5.3.4/1 段对`new`表达式结果的规定：

> *[...] 由new-expression*创建的实体具有动态存储持续时间 (3.7.4)。[注意：此类实体的生命周期不一定限于创建它的范围。—尾注] 如果实体是非数组对象，则*new 表达式*返回指向所创建对象的指针。如果它是一个数组，则*new 表达式* 返回一个指向数组初始元素的指针。

我曾经认为在 C++ 中，所有对象的类型都是在编译时确定的，但上面的例子似乎反驳了这种看法。此外，根据第 1.8/1 段：

> [...] 对象的属性**是在创建对象时确定的**。一个对象可以有一个名称（第 3 条）。对象具有影响其生命周期 (3.8) 的存储持续时间 (3.7)。一个对象有一个类型（3.9）。[...]

所以我的问题是：

1.  最后引用的段落中的“*属性*”是什么意思？显然，一个对象的名称不能算作“*在创建对象时*”确定的东西——除非“*创建*”在这里的意思与我想的不同；
2.  是否还有其他类型仅在运行时确定的对象示例？
3.  说 C++ 是一种静态类型的语言在多大程度上是正确的？或者更确切地说，在这方面对 C++ 进行分类的最恰当方法是什么？

如果有人可以至少详细说明上述几点，那就太好了。

**编辑：**

该标准似乎清楚地表明该`new`表达式确实创建了一个**数组对象**，而不仅仅是一些人指出的以数组形式排列的几个对象。根据第 5.3.4/5 段（由[Xeo](https://stackoverflow.com/users/500104/xeo)提供）：

> **当分配的对象是一个数组**（即使用*noptr-new-declarator*语法或*new-type-id*或 *type-id*表示数组类型）时，new-expression 产生一个指向初始元素的指针（如果任何）的数组。[注意：两者都`new int`具有`new int[10]`类型`int*`，并且类型`new int[i][10]`是`int (*)[10]` --end note] *noptr-new-declarator*中的*属性说明符*序列属于**关联的数组类型**。

 **** * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T23:11:58.333

*new-expression*不会创建具有运行时变化数组类型的对象。它创建了许多对象，每个对象都是静态类型`int`。这些对象的数量是静态未知的。

* * *

C++ 为动态类型提供了两种情况（第 5.2.8 节）：

*   与表达式的静态类型相同
*   当静态类型为多态时，最派生对象的运行时类型

这些都没有给出由`new int[N]`动态数组类型创建的任何对象。

* * *

学究式地，对*new-expression*的求值会创建无限数量的重叠数组对象。从 3.8p2 开始：

> [注意：数组对象的生命周期从获得适当大小和对齐的存储开始，到数组占用的存储被重用或释放时结束。12.6.2 描述了基础子对象和成员子对象的生命周期。——尾注]

因此，如果要谈论由 创建的“数组对象” `new int[5]`，则不仅要给它 type `int[5]`，还要给它`int[4]`, `int[1]`, `char[5*sizeof(int)]`, and `struct s { int x; }[5]`。

我认为这相当于说数组类型在运行时不存在。对象的*类型*应该是限制性的、信息性的，并告诉您有关其属性的一些信息。允许将内存区域视为无限数量的具有不同类型的重叠数组对象实际上意味着数组对象是完全无类型的。运行时类型的概念只对存储在数组中的元素对象有意义。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-11T18:27:21.543

术语“静态类型”和“动态类型”适用于表达式。

> **静态类型**
> 
> 在不考虑执行语义的情况下分析程序产生的表达式（3.9）的类型

> **动态型**
> 
> <glvalue> 由 glvalue 表达式表示的 glvalue 所指的最衍生对象 (1.8) 的类型

此外，您可以看到动态类型仅在可以派生静态类型时与静态类型不同，这意味着动态数组类型始终与表达式的静态类型相同。

所以你的问题：

> 但是如何在编译时判断新表达式创建的对象的类型呢？

对象具有类型，但它们不是“静态”或“动态”类型，缺少引用该对象的表达式。给定一个表达式，静态类型在编译时总是已知的。在没有派生的情况下，动态类型与静态类型相同。

但是你问的是独立于表达式的对象类型。在您给出的示例中，您要求创建一个对象，但您没有指定要在编译时创建的对象的类型。你可以这样看：

```
template<typename T>
T *create_array(size_t s) {
    switch(s) {
        case 1: return &(*new std::array<T, 1>)[0];
        case 2: return &(*new std::array<T, 2>)[0];
        // ...
    }
} 
```

这没有什么特别或独特之处。另一种可能是：

```
struct B { virtual ~B() {}};
struct D : B {};
struct E : B {};

B *create() {
    if (std::bernoulli_distribution(0.5)(std::default_random_engine())) {
        return new D;
    }
    return new E;
} 
```

或者：

```
void *create() {
    if (std::bernoulli_distribution(0.5)(std::default_random_engine())) {
        return reinterpret_cast<void*>(new int);
    }
    return reinterpret_cast<void*>(new float);
} 
```

唯一的区别`new int[]`是您无法看到它的实现以看到它在要创建的不同类型的对象之间进行选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T23:13:09.527

> 我曾经认为在 C++ 中，所有对象的类型都是在编译时确定的，但上面的例子似乎反驳了这种看法。

您引用的示例是关于项目的存储持续时间。C++ 识别三种存储持续时间：

1.  静态存储持续时间是全局和局部静态变量的持续时间。
2.  自动存储持续时间是“堆栈分配”函数局部变量的持续时间。
3.  动态存储持续时间是动态分配内存的持续时间，例如带有`new`或的内存`malloc`。

此处使用“动态”一词与对象的类型无关。它指的是实现必须如何存储构成对象的数据。

> 我曾经认为在 C++ 中，所有对象的类型都是在编译时确定的，但上面的例子似乎反驳了这种看法。

在您的示例中，有一个变量，其类型为`int*`。底层数组没有可以以任何有意义的方式恢复到程序的实际数组类型。没有动态类型。***

# c# - 如何在用户输入 Winform TextBox 时动态检查文件或目录是否存在

> ID：15938080
> 
> 赞同：0
> 
> 时间：2013-04-10T23:07:53.010
> 
> 标签：c#, .net, winforms

我想在 Windows 窗体应用程序中创建一个 TextBox 来检查文件或目录是否存在。通常情况下，使用起来真的很简单，`File.Exist() or Directory.Exist()`尽管我怎样才能在用户仍在输入文本框时为其提供执行此检查的功能？

具体来说，我的意思是动态地执行此操作，如果目录或文件存在，则激活某个按钮或执行其他操作。也可以等待用户停止并在几分之一秒内执行检查。

最终，让用户在TextBox中写入目录或文件路径，用户停止后等待1秒（避免对每个按键输入进行不必要的处理），然后执行检查，如果成功则启用按钮。所以，它使它成为一个动态的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:27:53.280

与其定义任意时间，例如 1 秒，不如只查找一些应用程序空闲时间？

[http://msdn.microsoft.com/en-us/library/system.windows.forms.application.idle.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.idle.aspx)

您可以为事件放置一个事件句柄`Application.Idle`并检查是否`TextBox`有用户输入的值，并相应地处理它。

# java - 如何将整数存储在字符串中

> ID：15938082
> 
> 赞同：2
> 
> 时间：2013-04-10T23:07:57.203
> 
> 标签：java, arrays, eclipse, login

我正在尝试在 Java (Eclipse) 中编写一个登录界面，当玩家登录时，我想创建一个可以像这样使用的数组：

例子：

```
int x = userX[username];
int y = userY[username]; 
```

我希望能够像这样设置它：示例：

```
userX[username] = x;
userY[username] = y; 
```

由于玩家用户名可以是任何东西（例如：dark09.loser），我希望能够在对象内存储整数。感谢帮助。（抱歉英语不好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:10:54.477

你可能想要一个`Map<String, Integer>`，然后你可以做这样的事情

```
final Map<String, Integer> myMap = new HashMap<>();
final Integer x = myMap.get(username);
myMap.put(username, x); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:10:35.397

使用[地图](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

```
Map<String, Integer> map = new HashMap<String, Integer>();

map.put("username1", x); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T23:10:36.723

使用`Hashtable<String,Integer>`，那应该做你想要的。

# php - PHP 中的 SoapClient 抛出 SoapFault 异常：[HTTP] Forbidde

> ID：15938086
> 
> 赞同：0
> 
> 时间：2013-04-10T23:08:28.987
> 
> 标签：php, soap, soap-client

我对整个 SOAP 概念完全没有经验，所以我不知道在看到错误时要查找什么。所以基本上我试图从另一家公司提取一些数据。那家公司给了我一个数字证书和一些 xsd 和 wsdl 文件，并要求我提供我的服务器的 IP，以便他们可以将其列入白名单。正如我所提到的，我不知道如何处理他们给我的文件，所以我将它们上传到我的服务器，然后我开始用谷歌搜索，我把下面的代码粘贴在一起（虽然我什至不知道它是否使感觉）：

```
$protected_url = "http://www.myurl.com/WSDLFILE.wsdl";
$my_cert_file = "http://www.myurl.com/CERTFILE.pem";
$client = new SoapClient($protected_url, array('local_cert'=> $my_cert_file,'trace'=>1));

$params->Affiliate->AffiliateID = 555;
$params->Address->AddressLine = "123 Main Street";
$params->Contact = 'No';

$result = $client->QueryAddress($params); 
```

我收到以下错误

```
[10-Apr-2013 18:59:46 America/New_York] PHP Fatal error:  Uncaught SoapFault exception: [HTTP] Forbidden in /home/mysite/index.php:15
Stack trace:
#0 [internal function]: SoapClient->__doRequest('<?xml version="...', 'https://secure....', 'http://www....', 1, 0)
#1 /home/mysite/index.php(15): SoapClient->__call('QueryAddress', Array)
#2 /home/mysite/index.php(15): SoapClient->QueryAddress(Object(stdClass))
#3 {main}
  thrown in /home/mysite/index.php on line 15 
```

寻找帮助有点困难，因为我什至不知道我在寻找什么，所以任何指导都值得赞赏

编辑：我还应该补充一点，我实际上已经能够通过使用 cURL 并设置“CURLOPT_SSLCERT”选项来获得成功的响应，但我需要使用 SOAP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-31T10:35:32.560

（在评论中回答。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 已解决：我的问题是我使用`.wsdl`文件的方式。我以为我必须上传他们提供的那个，然后在创建 SoapClient 时使用它，但事实并非如此。我需要的是参考他们的 wsdl url，它以类似的结尾`https:......asmx?WSDL`

# c - 如何将 c 标头中定义的结构用于 fortran？

> ID：15938089
> 
> 赞同：0
> 
> 时间：2013-04-10T23:08:38.360
> 
> 标签：c, fortran, header-files, fortran-iso-c-binding, language-interoperability

我有一个 *.H 定义一个结构。像这样：

```
#define nfloats 9999
#define nword   655

typedef struct {

int a
short b
unsigned short d
float e
char t[nword]
short un[14]
float  dat[nfloats];

} datafile 
```

在 void c 中，数据文件的所有参数都被赋值。我想将分配的值传递给主 fortran 程序，而不必使用 TYPE 重新定义。只需调用 *.H 和 iso_c_binding。换句话说，我希望在 fortran 主程序中使用已经在 *. H. 有人提出什么建议？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:45:52.063

The easiest way is to write a script in your favourite language that reads the C definition and converts it to Fortran. If you fix your syntax then it is quite easy.

1) #define xxx yyy becomes integer, parameter:: xxx = yyy

2) There is no unsigned in Fortran so unsigned shorts and shorts are both integer(kind=1).

3) It depends on how you are using the character arrays. If they are returning individual characters, not assigned en block, then they can be declared as character t(nword). If they are expected to hold strings then they should be declared character(len=nword) t.

4) typedef struct { ... } datafile

becomes

type datafile sequence ... end type

5) Having done all that, you need to make sure that both the C and Fortran code have the same byte alignment. Your char array of 655 is not on a byte boundary so you might get alignment problems.

A second method is to play with macros and get the macros to do the generation for you. You need to define one set of macros for C and another set for Fortran. So you'd get something like

```
STRUCT_BEG(datafile)
   INTEGER(a)
   SHORT(b)
   ...
   CHARA(t,nword)
   FLOATA(dat,nfloats)
STRUCTEND(datafile) 
```

The C defines would be

```
#define STRUCT_BEG(ignore) typedef struct {
#define STRUCT_END(name)   } name;
#define INTEGER(a) int a;
#define CHARA(a,length) char a[length]; 
```

The Fortran defines would be something like

```
#define STRUCT_BEG(name) \
    type name \
        sequence
#define STRUCT_END(ignore) end type
#define INTEGER(a) integer::a
#define CHARA(a,length) character(len=length):: a 
```

If you compile with -e, the C compiler can be used to generate both headers.

# sql - SQL Server：带有标题的动态数据透视表以包括列名和日期

> ID：15938090
> 
> 赞同：0
> 
> 时间：2013-04-10T23:08:50.103
> 
> 标签：sql, sql-server, tsql, pivot, unpivot

我正在尝试使用动态数据透视，需要帮助将行转换为列

该表如下所示：

```
ID   expense  revenue date
1    43       45      12-31-2012   
1    32       32      01-01-2013 
3    64       56      01-31-2013
4    31       32      02-31-2013 
```

我需要用于报告目的，例如

```
ID  expense12-31-2012  expense01-01-2013 expense01-31-2013 revenue12-31-2013
1   43                 32                
3                                        64 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:24:26.973

为了将`expense`和`revenue`列作为标题`date`，我建议同时应用 UNPIVOT 和 PIVOT 函数。

UNPIVOT 会将费用和收入列转换为您可以将日期附加到的行。将日期添加到列名后，您可以应用 PIVOT 函数。

UNPIVOT 代码将是：

```
select id, 
  col+'_'+convert(varchar(10), date, 110) new_col, 
  value
from yt
unpivot
(
  value
  for col in (expense, revenue)
) un 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/30421/7)。这会产生一个结果：

```
| ID |            NEW_COL | VALUE |
-----------------------------------
|  1 | expense_12-31-2012 |    43 |
|  1 | revenue_12-31-2012 |    45 |
|  2 | expense_01-01-2013 |    32 | 
```

如您所见，费用/收入列现在`new_col`是通过将日期连接到末尾而创建的行。然后`new_col`在 PIVOT 中使用它：

```
select id,
  [expense_12-31-2012], [revenue_12-31-2012],
  [expense_01-01-2013], [revenue_01-01-2013],
  [expense_01-31-2013], [revenue_01-31-2013],
  [expense_03-03-2013], [revenue_03-03-2013]
from
(
  select id, 
    col+'_'+convert(varchar(10), date, 110) new_col, 
    value
  from yt
  unpivot
  (
    value
    for col in (expense, revenue)
  ) un
) src
pivot
(
  sum(value)
  for new_col in ([expense_12-31-2012], [revenue_12-31-2012],
                  [expense_01-01-2013], [revenue_01-01-2013],
                  [expense_01-31-2013], [revenue_01-31-2013],
                  [expense_03-03-2013], [revenue_03-03-2013])
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/30421/6)。

如果您有已知数量的日期要转换为列，则上述版本将非常有用，但如果您有未知数量的日期，那么您将需要使用动态 SQL 来生成结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(c.col+'_'+convert(varchar(10), yt.date, 110)) 
                    from yt
                    cross apply
                    (
                      select 'expense' col union all
                      select 'revenue'
                    ) c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id,' + @cols + ' 
            from
            (
              select id, 
                col+''_''+convert(varchar(10), date, 110) new_col, 
                value
              from yt
              unpivot
              (
                value
                for col in (expense, revenue)
              ) un
            ) src
            pivot 
            (
                sum(value)
                for new_col in (' + @cols + ')
            ) p '

execute(@query); 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/30421/8)。两个查询生成相同的结果。

# html - z-index 和 Chrome 26

> ID：15938091
> 
> 赞同：-3
> 
> 时间：2013-04-10T23:08:52.830
> 
> 标签：html, css, google-chrome, z-index

z-index 不适用于 Chrome 版本 26，因为我有 2 个 div

```
 <style>
      #div1{
           position:relative;
           z-index:1000;
         }
      #div2{
           position:absolute;
           z-index:10001;
 </style> 
```

它在 Firefox 上运行良好，但在 Chrome 中却不行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:10:38.657

您有语法错误。您缺少右大括号。

```
#div1 {
    position:relative;
    z-index:1000;
}
#div2 {
    position:absolute;
    z-index:10001;
} 
```

[jsfiddle.net/kUmYh](http://jsfiddle.net/kUmYh/)

# ruby-on-rails - HttpParty::Response 和 try(:parsed_response) 奇怪的行为

> ID：15938092
> 
> 赞同：3
> 
> 时间：2013-04-10T23:08:55.377
> 
> 标签：ruby-on-rails, ruby, activesupport, httparty

我尝试在 HttpParty::Response 的实例上使用 ActiveSupport 的（2.3-stable）try()。我有一个非常奇怪的行为：

```
> ro.parsed_response
{"error"=>"RecordInvalid", "description"=>"Record validation errors", "details"=>{"email"=>     [{"description"=>"Email: foo@bar.com is already taken by another user"}]}}

> ro.try(:parsed_response)
NoMethodError Exception: undefined method `parsed_response' for #<Hash:0x11397d5d8> 
```

在第一个示例中，我使用点表示法将 parsed_response 消息发送给 ro。它工作正常。在第二个中，我尝试使用 ActiveSupport 的 try() 调用它，它（令人惊讶地）引发了 NoMethodError 异常。

在这种情况下， try() 不应该返回 nil 吗？如果我可以使用点符号调用它，为什么它找不到“parsed_response”方法，如第一个示例中所示？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:48:03.863

不知道如何，但似乎`ro`对象被“转移”到已发送 `parsed_response`方法的哈希中。
在 Rails 2.3@ruby 1.8[中，对象的未定义方法引发异常](http://apidock.com/rails/Object/try#798-Doesn-t-return-nil-if-the-object-you-try-from-isn-t-nil-)。

此外，文档仅用于在*nil*对象上调用 try 而没有关于没有特定方法的对象：

> 然而，与该方法不同的是，如果接收对象是 nil 对象或 NilClass，则不会引发 NoMethodError 异常，而是返回 nil。

# android - 如何使语音识别器在整个屏幕上工作

> ID：15938100
> 
> 赞同：0
> 
> 时间：2013-04-10T23:09:42.000
> 
> 标签：android, speech-recognition, ontouchlistener

我正在为视障人士制作一个应用程序，为此我希望每当用户触摸屏幕上的任何位置时，语音识别器都应该启动。

我已经制作了语音识别器和其他东西......但我无法让我的语音识别器在 TouchListener 上工作......

TouchListener 没有将活动视为视图。应用程序崩溃

完整代码如下。

```
public class MainActivity extends Activity
{

private static final int REQUEST_CODE = 1234;
private ListView wordsList;
protected Button TextToSpeech;
/**
 * Called with the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState)
{
requestWindowFeature(Window.FEATURE_NO_TITLE);  getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
super.onCreate(savedInstanceState);
setContentView(R.layout.voice_recog);
Button speakButton = (Button) findViewById(R.id.speakButton);
Context context;
context = this.getApplicationContext();
Intent Inte = new Intent(context, FallDetection.class);
context.startService(Inte);
Intent Inte1 = new Intent(context, SmsSpeaker.class);
context.startService(Inte1);
Toast toast = Toast.makeText(getApplicationContext(), "Fall Detection Started", Toast.LENGTH_LONG);
toast.show();

 wordsList = (ListView) findViewById(R.id.list);
 LinearLayout myScreen = (LinearLayout) findViewById(R.id.myscreen); 
// change LinearLayout to your framelayout if it is not a LinearLayout
//View view =(View) findViewById(R.layout.voice_recog);

//wordsList.setOnTouchListener(new View.OnTouchListener() {
 myScreen.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Toast toast = Toast.makeText(getApplicationContext(),"Touch recognised",Toast.LENGTH_LONG);
        toast.show();
        startVoiceRecognitionActivity();
    }
}); 
```

截至目前，我正在使用 List 来识别触摸，但这也导致应用程序崩溃，找不到 Source 异常

布局xml文件如下

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/myscreen" 
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:30:55.253

布局xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  
xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/myscreen"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical">

<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingBottom="4dip"
android:text="Click the button and start speaking" />

<Button android:id="@+id/speakButton"
android:layout_width="fill_parent"
android:onClick="speakButtonClicked"
android:layout_height="wrap_content"
android:text="Click Me!" />
<ScrollView
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical">
<ListView
android:id="@+id/list"
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="0.41" >
</ListView>
</ScrollView>
</LinearLayout> 
```

代码

```
public class MainActivity extends Activity
{

    private static final int REQUEST_CODE = 1234;
    private ListView wordsList;
    protected Button TextToSpeech;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);  
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

        setContentView(R.layout.voice_recog);
        Button speakButton = (Button) findViewById(R.id.speakButton);

        Intent Inte = new Intent(this, FallDetection.class);
         startService(Inte);
        Intent Inte1 = new Intent(this, SmsSpeaker.class);
        startService(Inte1);
        Toast toast = Toast.makeText(this, "Fall Detection Started", Toast.LENGTH_LONG);
        toast.show();

        wordsList = (ListView) findViewById(R.id.list);
        LinearLayout myScreen = (LinearLayout) findViewById(R.id.myscreen); 

        myScreen.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
    // TODO Auto-generated method stub
          Toast toast = Toast.makeText(MainActivity.this,"Touch recognised",Toast.LENGTH_LONG);
         toast.show();
         startVoiceRecognitionActivity();
    }
  }); 
} 
```

# linux - Linux 32 位上奇怪的系统调用号

> ID：15938105
> 
> 赞同：0
> 
> 时间：2013-04-10T23:10:11.333
> 
> 标签：linux, x86, header-files, x86-64, system-calls

# 故事

*我有一个自动生成系统调用*编号列表的 C 程序，因为我更喜欢从现实世界的参考中自动生成，而不是在适用时手写生成的文件。目标是一个 Ada 包。我已经使用涉及公共`write`系统调用的经典“Hello world”进行了测试……它失败了。我认为系统调用号是错误的：64 而不是 4。

我从 C 程序生成了列表，包括`<asm-generic/unistd.h>`. 该平台为 32 位，从未安装过针对 64 位平台的工具链。

示例定义`unistd.h`：（`#define __NR_write 64`应该是 4）、`#define __NR_read 63`（应该是 3）、`#define __NR_getuid 174`（应该是 24）等等……</p>

我已经在所有文件中运行了文本搜索，以查找将是预期定义的一部分的出现，但没有找到`/usr/**`。`__NR_write`

# 问题

为什么此标头指定奇怪的系统调用号？为什么找不到预期的定义？这是新的 ABI 吗？

注：平台为 Ubuntu 12.04，32 位。

## 更新

我想出了一些运行这个命令的东西：

```
find /usr/include/ -name "unistd*" -exec nano '{}' \; 
```

它显示标题`/usr/include/i386-linux-gnu/asm/unistd_32.h`包含正确的数字，并且该标题包含在 中`/usr/include/i386-linux-gnu/asm/unistd.h`，但包含时未定义许多符号`<asm/unistd.h>`。

## 更新 2

不仅数字不同，而且名称也不同。前任。`__NR_socket`与`__NR_socketcall`。解释的开头可能在可能的副本中给出：  [arch/x86/include/asm/unistd.h vs. include/asm-generic/unistd.h](https://stackoverflow.com/questions/10988759/arch-x86-include-asm-unistd-h-vs-include-asm-generic-unistd-h)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:28:16.517

如果您从*/usr/include/sys/syscall.h*开始（如 syscall(2) 中所示）并重复遵循包含指令，您将到达*/usr/include/asm/unistd_32.h*。因此，我建议您使用此标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:30:39.970

从来源`asm-generic.h`：

```
 6 /*
  7  * This file contains the system call numbers, based on the
  8  * layout of the x86-64 architecture, which embeds the
                     ^^^^^^
  9  * pointer to the syscall in the table.
 10  *
       ...
 15  */ 
```

# magento - Magento：在单页结账时编辑“您的信用卡将被收取费用”以显示所需的货币

> ID：15938106
> 
> 赞同：1
> 
> 时间：2013-04-10T23:10:17.213
> 
> 标签：magento, currency, checkout

![在此处输入图像描述](https://i.stack.imgur.com/vjVxc.png)

我认为图片正在解释问题。我做了一个研究，我根本没有足够的时间再创建 4 家商店，一次又一次地设置 200 多篇文章。我同意完全删除“您的信用卡将被收取费用”行，或更改功能以显示客户选择的货币。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T09:27:26.697

注释掉要删除的行：`/app/design/frontend/base/default/template/checkout/onepage/review/totals.phtml`

另外从`app/code/core/Mage/Sales/Block/Order/Totals.php`

```
/**
         * Base grandtotal
         */
        if ($this->getOrder()->isCurrencyDifferent()) {
            $this->_totals[\'base_grandtotal\'] = new Varien_Object(array(
                \'code\'  => \'base_grandtotal\',
                \'value\' => $this->getOrder()->formatBasePrice($source->getBaseGrandTotal()),
                \'label\' => $this->__(\'Grand Total to be Charged\'),
                \'is_formated\' => true,
            ));
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T21:35:51.353

您可以编辑“您的信用卡将被收取费用”的 .csv 文件位于`/app/locale/en_US/Mage_Sales.csv`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T05:22:29.427

首先你必须去

**管理面板 -> 系统 -> 配置 -> 目录 -> 目录 -> 价格 -> 目录价格范围**并将其**从 Global 更改为 Website**。

现在当你去

**管理面板 -> 系统 -> 配置 -> 通用 -> 货币设置 -> 货币**选项，您可以**更改每个网站的基础货币**，而不仅仅是默认（全球）。

所以你必须把你的商店转移到网站上，你才能做你想做的事。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-07-22T11:25:07.713

您知道要编辑哪个 .csv 文件“您的信用卡将被收取费用”吗？

更新：发现：它位于 app/design/frontend/base/default/template/checkout/onepage/review/totals.phtml

# c++ - 结构中指针数组的析构函数

> ID：15938108
> 
> 赞同：0
> 
> 时间：2013-04-10T23:10:22.120
> 
> 标签：c++, arrays, pointers, structure

我有这个结构和动态分配的数组。我不能使用 std::vector 和 std::string，因为这是家庭作业。

```
 struct Moves
    {
        const char* date;
        const char* street;
        const char* city;
    };

struct Data
{
    const char* id;
    const char* name;
    const char* surname;
    int count;
    Moves** moves;

}; 
```

我有一个类，我在结构数据上创建一个指针数组，我在其中动态分配 char* 日期、街道、城市。

现在，我需要删除这些内存块。好吧，我试过这个：（我班的析构函数）问题是：我应该如何正确释放所有分配的内存？

```
class Reg
{
private:
 Data** arr;
 int counter;
public:
  Reg(){ arr=new Data*[1000]; }
  ~Reg();
  ... other methods
};

Reg::~Reg()
    {
        for(int i=0;i<counter;i++)
        {
            for(int c=0;c<arr[i]->count;c++)
            {
                delete arr[i]->moves;
            }

            delete arr[i];
        }

        delete [] arr;
    } 
```

下面是一个分配的例子：

```
arr[counter]=new Data; 
arr[counter]->id=new char[12];
arr[counter]->id=id;
arr[counter]->name=new char[strlen(name)+1];
arr[counter]->name=name;
arr[counter]->surname=new char[strlen(surname)+1];
arr[counter]->surname=surname;

arr[counter]->moves=new Moves*[100];
arr[counter]->moves[0]=new TMoves;

arr[counter]->moves[0]->city=new char[strlen(city)+1];
arr[counter]->moves[0]->city=city;

arr[counter]->moves[0]->date=new char[strlen(date)+1];
arr[counter]->moves[0]->date=date;

arr[counter]->moves[0]->street=new char[strlen(street)+1];
arr[counter]->moves[0]->street=street; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:57:04.063

与其试图解决这段代码中的所有问题，我会告诉你一个原则，由于某种原因，在编程课程中从未教授过：**从小而简单的开始，一次增加一点复杂性，每一步都进行测试，*永远不要增加不起作用的代码。***

看这个：

```
arr[counter]->moves[0]->city=new char[strlen(city)+1];
arr[counter]->moves[0]->city=city; 
```

即使假设此 Move 已正确构造，**您也会分配内存`new`然后立即放弃它，从而导致内存泄漏。**然后*if* `city`（与成员同名的变量，不是一个好主意）是指向`char[]`堆上的 a 的指针，并且*如果*`city`在其剩余的生命周期内没有做任何坏事，并且*不*存在指向该数组的其他指针（或者至少用这样的指针没有做坏事）那么这不会导致未定义的行为。你觉得有那么幸运吗？

相反，考虑一下：

```
struct Moves
{
private:
  const char* city;

public:

  Moves()
  {
    city = NULL;
  }

  ~Moves()
  {
    if(city)
      delete [] city;
  }

  void setCity(const char ncity[])
  {
    if(city)
      delete [] city;
    char *temp = new char[strlen(ncity)+1];
    strcpy(temp, ncity);
    city = temp;
  }
};

...
arr[counter]->moves[0]->setCity(someCity); 
```

请注意，一旦`setCity()`正常工作，从外部调用它是干净、安全和简单的。并且一旦`Moves`设置正确，`Data`就可以用类似的方式重写，然后`Reg`.

一旦你习惯了这种方法，你就可以学会使用`std::string`，再也不用胡闹`char[]`了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:25:59.263

很难回答这个帖子，但这里有一些建议：

*   考虑使用`std::vector`而不是数组
*   考虑使用`std::string`而不是 const char *
*   考虑将这些定义的成员的破坏`struct Moves`放在`struct Data`这些定义中

例如：

```
struct Moves
{
    const char* date;
    const char* street;
    const char* city;

    ~Moves () {
      delete [] date;
      ...
    }

}; 
```

这是您`class Reg`使用 a`std::vector`来保存类型的对象`Data *`：

```
class Reg
{
  private:
    std::vector<Data*> arr;
    int counter;  // this can probably be removed
  public:
    Reg() 
      :arr(1000, NULL) // initialize arr with 1000 NULL raw pointers
    {
    }

    ~Reg();
    ... other methods
}; 
```

一个好的 C++ 参考是[cplusplus.com](http://www.cplusplus.com/)。

如果你加强你的问题，你会得到一些好的答案（并学习很多 C++）:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T23:38:41.913

这有多好？

```
struct Moves
{
  std::string date;
  std::string street;
  std::string city;
};

struct Data
{
  Data() { moves.reserve(1000); }
  std::string id;
  std::string name;
  std::string surname;

  typedef std::unique_ptr<Moves> MovesPtr;
  typedef std::vector<MovesPtr> MovesList;
  MovesList moves;
}; 
```

现在您可以添加新的`Moves`，它们将在`Data`对象销毁时被释放。

```
int main()
{
  Data d;
  d.moves.push_back(Data::MovesPtr(new Moves()));

  return 0;
} 
```

STL 很好，可以帮助您，您应该使用它。

# javascript - 为什么 Nexus 4（使用 Android 版 Chrome）显示窗口大小为 384x519 但屏幕截图显示为 768x1038？

> ID：15938109
> 
> 赞同：2
> 
> 时间：2013-04-10T23:10:31.197
> 
> 标签：javascript, css, mobile, responsive-design

我正在使用媒体查询来根据屏幕尺寸提供不同的比例。但是屏幕尺寸没有向 CSS 显示正确的数字。在 Nexus 4 上，显示使用我的“480px”CSS 样式，并在 Javascript 中显示：

```
//Javascript shows these:
window.innerHeight == 519
window.innerWidth == 384

//CSS uses this rule:
@media screen and (orientation:portrait) and (min-width: 361px) {...} 
```

手机上浏览器的屏幕截图显示可见窗口为**768 x 1038**，正好是我显示的高度和宽度的两倍。

有没有办法让 CSS 和 javascript 使用实际的分辨率？我想根据分辨率提供不同的图像尺寸，以便他们获得适合其屏幕分辨率的最高分辨率图片。

例如，我有一个 768 x 400 版本的主图像。我想将它提供给 Nexus 4，而不是它所获得的 480 x 250 缩小图像。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:12:49.173

移动浏览器报告他们想要的任何屏幕尺寸。浏览器“像素”不一定是真正的像素。

我的 HTC One X 有一个 1280x720 的屏幕，报告为 640x360。

阻力最小的路径是将其留给硬件制造商。有时他们会弄错（iPad Mini），但通常这是最简单和最好的事情。通过每个报告像素使用多个真实像素，可以很好地呈现文本。*因此，当真正*像 32 像素文本一样绘制时，“标准”16 像素字体大小在小屏幕上会非常好看。

（不，你不能强迫浏览器做任何不同的事情。）

# java - 在 Ant JUnit 测试运行中仅运行类型的子类

> ID：15938114
> 
> 赞同：1
> 
> 时间：2013-04-10T23:10:51.253
> 
> 标签：java, ant, junit

嗨，Ant 是否可以定义一个仅运行作为给定类型的子类的 JUnit 测试的目标。

场景是：在我加入的项目中，我们有大量不与单元测试分开运行的集成测试，我想定义一个 Ant 任务以在与单元测试分开的构建阶段运行它们，并最终在一个单独的 Jenkins 构建中。但是，这些集成测试没有命名或打包约定，因此标准 Ant 路径匹配在这种情况下不起作用。

我认为我需要实现我想要的是一个任务定义，它可以让我说类似的话：

`<include name="? extends IntegrationBaseTest"/>`

这显然是一个人为的例子，但我相信它传达了我想要的东西。

有没有人实现过这样的东西，或者开箱即用的 Ant 有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:28:21.197

我不认为你可以用 Ant 做到这一点。也许[JUnit 类别](https://github.com/junit-team/junit/wiki/Categories)可以帮助隔离您的测试。

# backbone.js - 如何在 Backbone-Relational 中获取嵌套集合

> ID：15938117
> 
> 赞同：1
> 
> 时间：2013-04-10T23:10:54.987
> 
> 标签：backbone.js, backbone-relational

我正在尝试获取所有具有嵌套客户联系人（人）的客户。我在获取属于客户/公司的客户联系人集合时遇到了一些麻烦。如果我试图获得收藏，我什么也得不到。顺便说一句，我是骨干和相关东西的新手。

这是我在控制台上运行以显示我的问题的代码。

```
c = new SpencerGrafica.Models.Client({id:1})
c.fetch()
c.toJSON()
Object {id: 1, name: "Name", contacts: Array[0], …}
c.get('contacts').toJSON()
[] # (There should be ONE result, as I set this relation in rails console) 
```

如果我运行 c.get('contacts').fetch() 我会得到所有“客户联系人”，而不仅仅是那些相关的人。可能是网址问题？我错过了什么......？

谢谢。

这是模型的代码：

客户端.js.coffee

```
class SpencerGrafica.Models.Client extends Backbone.RelationalModel
  paramRoot: 'client'
  urlRoot: 'clients'

  defaults:
    id: null
    name: null

  relations: [{
    type: Backbone.HasMany,
    key: 'contacts',
    relatedModel: 'SpencerGrafica.Models.ClientContact',
    collectionType: 'SpencerGrafica.Collections.ClientContactsCollection',
    autoFetch: true,
    reverseRelation: {
      key: 'client',
      keySource: 'client_id'
    }
  }] 

class SpencerGrafica.Collections.ClientsCollection extends Backbone.Collection
  model: SpencerGrafica.Models.Client
  url: '/clients' 
```

ClientContact.js.coffee

```
class SpencerGrafica.Models.ClientContact extends Backbone.RelationalModel
  paramRoot: 'client_contact'
  urlRoot: 'client_contacts'

  defaults:
    name: null
    email: null
    phone: null

class SpencerGrafica.Collections.ClientContactsCollection extends Backbone.Collection
  model: SpencerGrafica.Models.ClientContact
  url: 'client_contacts' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:04:21.697

我面临着类似的问题，还没有得到答案。但我也许可以和你分享一些想法。

我猜你的json结构是：

```
/clients/: {id: 1, name: "Name"}
/client_contacts/: [{id: 1, client: 1}, {id: 2, client: 1}] 
```

然后你需要改变`/clients/`是`{id: 1, name: "Name", contacts: [1, 2]}`让骨干关系找出关系。

另一个问题是您`/client_contacts`用作 url 的 url `ClientContactsCollection`，这就是您找回所有联系人的原因，因为`/client_contacts`它是对所有联系人的请求。许多人想查看[http://backbonerelational.org/#example-person](http://backbonerelational.org/#example-person)了解详细信息。

如果您不想在其中包含联系人 ID `/clients/`，那么我们将面临同样的问题：[Backbone-relational hasmany best practice](https://stackoverflow.com/questions/15954406/backbone-relational-hasmany-best-practices)

# php - 如何在 Mustache 模板中进行过渡 for 循环？

> ID：15938119
> 
> 赞同：0
> 
> 时间：2013-04-10T23:11:01.663
> 
> 标签：php, templates, loops, mustache

刚开始在 PHP 中使用 Mustache 模板。我读过手册，但看起来 Mustache 中没有传统循环。

如何在 Mustache 中模拟以下循环？

```
for($i=0; $i<10; $i++)
{
    echo $i;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:40:45.237

我会通过分配一个值为 0 到 9 的数组来做到这一点。请参阅[http://php.net/range](http://php.net/range)如何轻松创建这样的数组。

在 mustache 中，更多地考虑*foreach* 而非*for* 或*while*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:00:13.483

Mustache 仅使用`<tags>`，因此假设 $MustacheData 是传递给模板的变量，并让 $i 包装在 ul,li 元素中。您需要在模板呈现之前定义模板中使用的所有数据。

PHP

```
$MustacheData = array(

    'i' = array(0,1,2,3,4,5,6,7,8,9)    
); 
```

胡子

```
<ul>
    <il>{{i}}</li>
</ul> 
```

小胡子高级

`<li>`即使您的数据中没有定义第一个模板，也会呈现一个模板`$i`，因此您也可以这样编写模板：

```
<ul>
    {{#i}}<li>{{.}}</li>{{/i}}
<ul> 
```

# apache - 无法让 apache 上的虚拟主机工作

> ID：15938120
> 
> 赞同：0
> 
> 时间：2013-04-10T23:11:19.837
> 
> 标签：apache, virtualhost

我真的在为 Windows 7 中的 apache 服务器配置虚拟主机而苦苦挣扎。

我已经阅读了尽可能多的帖子，并且我认为我所做的一切都是正确的，但我无法让我的浏览器访问任何内容 - 它指出（在 chrome 中）网页不可用，并且在 Firefox 中说找不到服务器。

在我的主机文件中，我设置了：

```
127.0.0.1       ebdowns
127.0.0.1       loc
127.0.0.1       ebdowns.loc 
```

在 httpd.conf 中，我包含了 vhosts 文件并将这些条目添加到 vhost.conf 文件中：

```
NameVirtualHost *:80

<VirtualHost *:80> 
DocumentRoot "C:\wamp\www"
ServerName localhost
</VirtualHost>

 <VirtualHost *:80> 
DocumentRoot "C:\wamp\www\ebdowns"
 ServerName ebdowns.loc
</VirtualHost> 
```

服务器似乎已启动，但 http://ebdowns.loc 或 http://localhost - 或任何东西都不起作用。

我哪里出错了？

我在 serverfault 中错误地发布了这个，所以我希望这是正确的地方，因为我不明白该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:49:26.430

如果你说的是 ServerName localhost，那么在你的 etc/hosts 文件中定义 127.0.0.1 localhost as well..

分享日志...

# mysql - mysql正则表达式，有点复杂

> ID：15938140
> 
> 赞同：1
> 
> 时间：2013-04-10T23:13:31.187
> 
> 标签：mysql, regex, expression

我在我的数据库中有一个表，其中包含“名称”字段，一个单元格可以包含多个名称，通过“|” 这会破坏它们，例如：'NAME1|NAME2|NAME3' 或另一个单元格：'NAME1'。我想选择包含确切名称的所有行，问题是，假设有人搜索“BLABLANAME1”或仅搜索“NAME”或“AME1”，这些都不应该返回他的行，我尝试了以下操作：

```
SELECT * FROM `players` WHERE REGEXP '^NAME\||\|NAME$|\|NAME\||NAME' 
```

根本不起作用，MySql 返回错误......我根本不知道如何搜索这样的东西..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:25:36.453

**已编辑**

```
SELECT * FROM `players` WHERE `the_name_column` REGEXP '^([^\|]+(\\|))*THE_NAME_YOU_SEARCH_HERE((\\|)[^\|]+)*$' 
```

这将匹配由“|”分隔的值之一的确切值，尝试将“THE_NAME_YOU_SEARCH_HERE”替换为数据库中的名称值之一（一列 XD 中的名称之一），并且不要忘记转义它。

# jquery - 不删除 id 的 RemoveAttr？

> ID：15938146
> 
> 赞同：0
> 
> 时间：2013-04-10T23:14:21.177
> 
> 标签：jquery, html, css

[小提琴链接在这里](http://jsfiddle.net/hsKba/1/)

怎么了？

```
$(document).ready(function (){
    $('.navi-ring').hover(function(){
            $(this).removeAttr("id"); // this doesnt work!
        )};
)}; 
```

它不会删除 id！它应该会改变颜色，但它不会。

```
.navi-ring:nth-child(1):hover{
background-color:yellow; 
```

它应该删除 ID（带有边框图像），但它没有。那么圆圈应该变成黄色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T23:20:58.553

`)}`应该`})`在它出现的两个实例中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:21:57.917

```
$(document).ready(function (){
  $('.navi-ring').hover(function(){
        $(this).removeAttr("id");
  });
}); 
```

[**小提琴**](http://jsfiddle.net/mohammadAdil/hsKba/9/)

您的小提琴中没有包含 jQuery，并且您的代码中有语法错误。你没有正确地结束你的牙套。

# ruby-on-rails - FactoryGirl 的创作没有出现在 Selenium 测试中

> ID：15938147
> 
> 赞同：1
> 
> 时间：2013-04-10T23:14:23.323
> 
> 标签：ruby-on-rails, database, testing, rspec, factory-bot

我有一个简单的测试用例，如下所示：

```
describe 'Quiz packs page' do
  before :each do
    FactoryGirl.create(:quiz_pack, :first_in_first_pack).should be_valid
  end
end

it "should have an index page", :js => true do
  visit quiz_packs_path
end 
```

为什么，当我使用 selenium 访问 quiz_packs_path 时，我来自 FactoryGirl 的特征不会显示为索引页面上的条目？

老实说，我读了太多关于 FactoryGirl 的文章，以至于我的大脑很痛，但我仍然不太明白创作是如何发生的。

如果有帮助，这是我的测验包。请注意，我使用的是 FactoryGirl 特征，因为我有很多这样的东西。如果这是一个问题，请告诉我。

```
FactoryGirl.define do
  factory :quiz_pack do
    trait :first_in_first_pack do |f|
      f.pack 1
      f.number 1
      f.image "first_image
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T00:45:41.507

这是一个很好的问题。我没有这个问题，因为我总是在开始时正确设置 rspec。但这个问题仍然值得解决。

这是解决方案

> 这次第一个规范失败了，因为页面中缺少内容“油漆栅栏”。创建的数据库记录对 Selenium 测试不可用，这是因为我们的规范使用与 Selenium 不兼容的数据库事务。为了解决这个问题，我们可以将 spec_helper 文件中的 config.use_transactional_fixtures 设置为 false。 [http://asciicasts.com/episodes/257-request-specs-and-capybara](http://asciicasts.com/episodes/257-request-specs-and-capybara)

所以，只要把它设置`spec_helper.rb`好，你就可以了。

```
config.use_transactional_fixtures = false 
```

我已经在我的一个项目上检查过它，它运行良好。

此外，在任何情况下，数据库清理器始终是首选。

*如果您有兴趣阅读，这里有一个详细的讨论，但不是必需的：*[https ://groups.google.com/forum/#!msg/ruby-capybara/JI6JrirL9gM/R6YiXj4gi_UJ](https://groups.google.com/forum/#!msg/ruby-capybara/JI6JrirL9gM/R6YiXj4gi_UJ)

# apache-flex - Adobe Illustrator 到 Flash Builder 4.6

> ID：15938148
> 
> 赞同：1
> 
> 时间：2013-04-10T23:14:27.890
> 
> 标签：apache-flex, svg, flex4, adobe-illustrator, flashbuilder4

我有一张 .ai 格式的美国地图。我想在我的 flex 应用程序中使用它。
问题是地图在状态线上切片，我想在应用程序中操作状态。

说明：在我的应用程序中，我希望能够单击一个州以突出显示它，然后将所有其他州从场景中删除，然后将所有州带回来以制作整个国家。就像拼图一样。

我将 FXG 文件从 Adob​​e Illustrator 导入到我在 Flash Builder 4 中的 Flex 应用程序，但我不能一次处理每个状态！

非常感谢帮助！干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:51:54.810

我最终将 fxg 转换为 MXML ......

我使用以下代码来做到这一点：

[FXG 到 MXML 转换器](http://www.dehats.com/drupal/node/98)

我改变了

> d:用户标签

进入属性 ID，效果非常好！...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:22:00.077

有一个[FxgParser](http://www.libspark.org/wiki/seven/fxgparser/en)`d:userLabel`库，但如果它们在 .fxg 文件中被标记为属性，它似乎不会输出状态名称。你可以修改源来解决这个问题。

就是这样：：

编辑 fxgparser.parser.Path.as 然后在类的顶部添加这个命名空间：

```
public static const aab:Namespace = new Namespace("aab", "http://ns.adobe.com/fxg/2008/dt"); 
```

然后在 parse() 方法的末尾添加：

```
target.name = data.currentXml.@aab::userLabel; 
```

因为 Illustrator CS6 似乎添加了一个 userLabel 属性而不是 id 或其他东西，而 FxgParser 默认会忽略这一点。

代码将与上面非常相似：

```
package  {

    import flash.display.*;
    import flash.events.*;
    import flash.geom.Point;
    import flash.net.*;
    import flash.utils.Dictionary;

    import com.greensock.*;
    import fxgparser.FxgDisplay;

    [SWF(width='1368', height='936', backgroundColor='#ffffff', frameRate='30')]
    public class FXGTest extends Sprite{

        private var states:Sprite;//container holding each state Shape
        private var positions:Dictionary = new Dictionary();//original position to restore states to

        public function FXGTest() {
            addEventListener(Event.ADDED_TO_STAGE,init);
        }
        private function init(e:Event):void{
            new URLLoader(new URLRequest("usa-wikipedia.fxg")).addEventListener(Event.COMPLETE,fxgLoaded);
        }
        private function fxgLoaded(e:Event):void{
            //trace(e.target.data);
            var map:FxgDisplay = addChild(new FxgDisplay( new XML(e.target.data) )) as FxgDisplay;
            trace(listChildren(map));
            //map.item.item.item.*
            states = Sprite(Sprite(Sprite(map.getChildAt(0)).getChildAt(0)).getChildAt(0));
            for(var i:int = 0 ; i < states.numChildren; i++){
                var s:DisplayObject = DisplayObject(states.getChildAt(i));//can't add mouse listeners because the states are Shape instances
                positions[s.name] = new Point(s.x,s.y);//store the positions in a hash to get the state position by name
            }
            stage.addEventListener(MouseEvent.CLICK,handleClick);
        }
        private function handleClick(e:MouseEvent):void{
            if(e.target is Stage) restore();
            else blast(getObjectsUnderPoint(new Point(mouseX,mouseY))[0].name);//named shapes are stored in a sprite so use getObjetsUnderPoint
        }
        private function blast(name:String):void{
            var blastRadius:Number = stage.stageWidth+stage.stageHeight;//or some other number
            var c:DisplayObject = states.getChildByName(name);//selected
            for(var i:int = 0 ; i < states.numChildren; i++){
                var s:DisplayObject = states.getChildAt(i);
                if(s != c){//everything else goes except this
                    var angle:Number = Math.atan2(s.y-c.y,s.x-c.x);//direction relative to the clicked state
                    var x:Number = s.x + (Math.cos(angle) * blastRadius);//get a position offset from the clicked state (blast centre) 
                    var y:Number = s.y + (Math.sin(angle) * blastRadius);//outwards at a random angle
                    TweenLite.to(s,1+Math.random() * 2,{x:x,y:y});//tween with different speeds for a bit of depth
                }
            }
        }
        private function restore():void{
            for(var i:int = 0 ; i < states.numChildren; i++){
                var s:DisplayObject = DisplayObject(states.getChildAt(i));
                TweenLite.to(s,.5+Math.random() * .5,{x:positions[s.name].x,y:positions[s.name].y});//tween states back into the original positions
            }
        }
        private function listChildren(d:DisplayObjectContainer):String{
            var result = 'parent: '+d.name+'\n\t';
            for(var i:int = 0 ; i < d.numChildren; i++){
                var c:DisplayObject = d.getChildAt(i);
                result += '\tchild: '+c.name+'\n';
                if(c is DisplayObjectContainer) result += listChildren(DisplayObjectContainer(c));
            }
            return result;
        }

    }

} 
```

您还可以在此处下载上述类、修改后的 fxgparser 库和状态 fxg并[在](http://lifesine.eu/so/FXGParse.swf)[此处](http://lifesine.eu/so/fxgmap.zip)查看正在运行的演示 或者您可以使用 SVG 而不是 FXG。同一开发人员也有一个[SvgParser](http://www.libspark.org/wiki/seven/svgparser)库，您可以像这样获得：

```
svn export http://www.libspark.org/svn/as3/SvgParser 
```

您可以轻松地将 .ai 文件保存为 .svg 文件。[这是一个使用来自维基百科](http://upload.wikimedia.org/wikipedia/commons/3/32/Blank_US_Map.svg)的美国地图的简单示例：

```
package  {
    import flash.display.*;
    import flash.events.*;
    import flash.geom.Point;
    import flash.net.*;
    import flash.utils.Dictionary;

    import svgparser.SvgDisplay;
    import com.greensock.*;

    [SWF(width='1368', height='936', backgroundColor='#ffffff', frameRate='30')]
    public class SVGTest extends Sprite {

        private var states:Sprite;//container holding each state Shape
        private var positions:Dictionary = new Dictionary();//original position to restore states to

        public function SVGTest() {
            addEventListener(Event.ADDED_TO_STAGE,init);//make sure we have the stage ready
        }
        private function init(e:Event):void{
            removeEventListener(Event.ADDED_TO_STAGE,init);//stage ready, load the svg
            new URLLoader(new URLRequest("http://upload.wikimedia.org/wikipedia/commons/3/32/Blank_US_Map.svg")).addEventListener(Event.COMPLETE,svgLoaded);
        }
        private function svgLoaded(e:Event):void{//svg loaded
            var map:SvgDisplay = addChild(new SvgDisplay( new XML(e.target.data) )) as SvgDisplay;//use the parser
            trace(listChildren(map));//quick debug of the maps display list
            states = Sprite(map.getChildAt(0));//we want to access the main container
            for(var i:int = 0 ; i < states.numChildren; i++){
                var s:DisplayObject = DisplayObject(states.getChildAt(i));//can't add mouse listeners because the states are Shape instances
                positions[s.name] = new Point(s.x,s.y);//store the positions in a hash to get the state position by name
            }
            stage.addEventListener(MouseEvent.CLICK,handleClick);
        }
        private function handleClick(e:MouseEvent):void{
            if(e.target is Stage) restore();
            else blast(getObjectsUnderPoint(new Point(mouseX,mouseY))[0].name);//named shapes are stored in a sprite so use getObjetsUnderPoint
        }
        private function blast(name:String):void{
            var blastRadius:Number = stage.stageWidth+stage.stageHeight;//or some other number
            for(var i:int = 0 ; i < states.numChildren; i++){
                var s:DisplayObject = states.getChildAt(i);
                if(s.name != name){//everything else goes except this
                    var angle:Number = Math.random() * Math.PI * 2;//pick a random angle
                    var x:Number = s.x + Math.cos(angle) * blastRadius;//get a position offset from the clicked state (blast centre) 
                    var y:Number = s.y + Math.sin(angle) * blastRadius;//outwards at a random angle
                    TweenLite.to(s,1+Math.random() * 2,{x:x,y:y});//tween with different speeds for a bit of depth
                }
            }
        }
        private function restore():void{
            for(var i:int = 0 ; i < states.numChildren; i++){
                var s:DisplayObject = DisplayObject(states.getChildAt(i));
                TweenLite.to(s,.5+Math.random() * .5,{x:positions[s.name].x,y:positions[s.name].y});//tween states back into the original positions
            }
        }
        private function listChildren(d:DisplayObjectContainer):String{//recursively traverse a display list and list children names
            var result = 'parent: '+d.name+'\n\t';
            for(var i:int = 0 ; i < d.numChildren; i++){
                var c:DisplayObject = d.getChildAt(i);
                result += '\tchild: '+c.name+'\n';
                if(c is DisplayObjectContainer) result += listChildren(DisplayObjectContainer(c));
            }
            return result;
        }

    }

} 
```

# objective-c - 自定义下拉对话框（类似于保存对话框）

> ID：15938150
> 
> 赞同：0
> 
> 时间：2013-04-10T23:14:39.663
> 
> 标签：objective-c, macos, drop-down-menu, window, save

是否可以创建类似于文件保存对话框的自定义下拉对话框？下面的链接也说明了这一点。

[保存对话框](http://i.stack.imgur.com/M4fZD.png)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:10:44.927

“下拉对话框”称为工作表，可以是 NSWindow。

使它们显示的方法可以在 NSApplication 上找到：[beginSheet:modalForWindow:modalDelegate:didEndSelector:contextInfo:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html)

一个超级简单的实现看起来像这样：

```
NSWindowController *sheet = [[NSWindowController alloc] initWithWindowNibName:@"Sheet"];

[NSApp beginSheet: sheet.window
   modalForWindow: self.view.window // The window from where the sheet will appear
    modalDelegate: self
   didEndSelector: nil // Optional @selector(didEndSheet:returnCode:contextInfo:)
      contextInfo: nil]; 
```

# matlab - 为什么即使我安装了计算机视觉工具箱，MATLAB 也找不到 insertShape 和 detectMinEigenFeatures？

> ID：15938154
> 
> 赞同：2
> 
> 时间：2013-04-10T23:15:08.083
> 
> 标签：matlab, matlab-cvst

我对 MATLAB 版本 R2012b 有疑问。`insertShape`和都是`detectMinEigenFeatures`“计算机视觉系统工具箱”的功能。我已经安装了“计算机视觉系统工具箱”。这是 的输出`ver`，显示了所有已安装的工具箱。

```
MATLAB Version: 8.0.0.783 (R2012b)
MATLAB License Number: 724504
Operating System: Microsoft Windows 7 Version 6.2 (Build 9200)
Java Version: Java 1.6.0_17-b04 with Sun Microsystems Inc. Java HotSpot(TM) 64-Bit Server VM mixed mode

MATLAB                                                Version 8.0        (R2012b)
Simulink                                              Version 8.0        (R2012b)
Bioinformatics Toolbox                                Version 4.2        (R2012b)
Computer Vision System Toolbox                        Version 5.1        (R2012b)
Curve Fitting Toolbox                                 Version 3.3        (R2012b)
DSP System Toolbox                                    Version 8.3        (R2012b)
Fuzzy Logic Toolbox                                   Version 2.2.16     (R2012b)
Global Optimization Toolbox                           Version 3.2.2      (R2012b)
Image Processing Toolbox                              Version 8.1        (R2012b)
MATLAB Builder NE                                     Version 4.1.2      (R2012b)
MATLAB Compiler                                       Version 4.18       (R2012b)
MATLAB Report Generator                               Version 3.13       (R2012b)
Mapping Toolbox                                       Version 3.6        (R2012b)
Neural Network Toolbox                                Version 8.0        (R2012b)
Optimization Toolbox                                  Version 6.2.1      (R2012b)
Parallel Computing Toolbox                            Version 6.1        (R2012b)
Signal Processing Toolbox                             Version 6.18       (R2012b)
Spreadsheet Link EX                                   Version 3.1.6      (R2012b)
Statistics Toolbox                                    Version 8.1        (R2012b)
System Identification Toolbox                         Version 8.1        (R2012b)
Wavelet Toolbox 
```

我测试的代码是这样的：

```
%Create System objects for reading and displaying video and for drawing a bounding box of the object.
videoFileReader = vision.VideoFileReader('visionface.avi');
videoPlayer = vision.VideoPlayer('Position', [100, 100, 680, 520]);

%Read the first video frame, which contains the object, define the region.
objectFrame = step(videoFileReader);
objectRegion = [264, 122, 93, 93];

%As an alternative, you can use the following commands to select the object region using a mouse. The object must occupy the majority of the region. 
figure; imshow(objectFrame);
objectRegion=round(getPosition(imrect))

%Show initial frame with a red bounding box.
objectImage = insertShape(objectFrame, 'Rectangle', objectRegion,'Color', 'red'); 
figure; imshow(objectImage); title('Yellow box shows object region');

%Detect interest points in the object region.
points = detectMinEigenFeatures(rgb2gray(objectFrame), 'ROI', objectRegion); 
```

当我运行此代码时，我收到此错误：

> 未定义函数“insertShape”和“detectMinEigenFeatures”，用于“single”和“double”类型的输入参数

问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T06:58:37.983

似乎两者`detectMinEigenFeatures`都是`insertShape`从 matlab 版本开始引入的`r2013a`。您正在运行`r2012b`，这些功能在计算机视觉工具箱中尚不存在。

因此，如果您能够升级到`r2013a`我认为您的问题应该得到解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-17T14:09:56.080

R2012b 中有一个解决方法。您可以使用 vision.CornerDetector 系统对象，它还实现了最小特征值角点检测算法。

# c - 如何初始化结构中的字符

> ID：15938156
> 
> 赞同：0
> 
> 时间：2013-04-10T23:15:30.693
> 
> 标签：c

我用三个字符制作了一个结构：

```
typedef struct{
  char inside;
  char condition;
  char whattoprint;      
} array; 
```

然后我制作了一个 2d（数组类型）表并对其进行了 malloc，现在一切都很好

然后我想调用一个函数来初始化我的表，如下所示：

```
array **initialize_table(int x,int y,array **table){
    int i,j;
    for(i=0;i<=x;i++){
       for(j=0;j<=y;j++){
          table[i][j].inside='.';
       }
    }
    return table;
} 
```

编译器没有显示错误，但是当我运行它时，“table[i][j].inside='.';”中有分段错误 线，我不知道我做错了什么。我希望你明白我的意思，如果有人可以帮助它会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:22:44.903

如果的大小是 xy 你应该只迭代直到 x-1 y-1 即

```
int i,j;
for(i=0; i < x; i++){
   for(j=0; j < y; j++){
      table[i][j].inside='.';
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:24:11.743

问题出在以下几行：

```
for(i=0;i<=x;i++){
    for(j=0;j<=y;j++){ 
```

在一个长度数组中`x`，索引从`0`到`x-1`，所以它应该是

```
for(i=0;i<x;i++){ 
```

这样我们就不会访问不存在的 index `x`，对于内部循环也是如此：

```
for(j=0;j<y;j++){ 
```

# verilog - 使用永远和永远语句

> ID：15938158
> 
> 赞同：8
> 
> 时间：2013-04-10T23:15:44.760
> 
> 标签：verilog

以下代码均生成时钟。我需要知道除了时钟生成之外是否还使用了永远循环？我只在时钟生成中永远遇到过。如果只是为了这个目的，岂不是没用？

```
initial begin
clk = 0;
forever begin
#5 clk = ~clk;
end
end

initial begin
clk = 0 ;
always begin 
# 5 clk = ~clk;
end
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T00:40:04.387

您的第二个代码段实际上是语法错误。`forever`和之间的区别在于`always`它`always`可以作为“模块项”存在，这是 Verilog 规范赋予可以直接写入模块中的构造的名称，而不包含在其他构造中。`initial`也是一个模块项。`always`块被重复，而`initial`块在模拟开始时运行一次。

`forever`是只能在程序上下文中使用的程序语句。所以写`initial forever`or是合法的`always forever`，但不只是`forever`.

变得非常重要的情况`forever`是在任务中，这是程序上下文，因此`always`不允许使用。（函数也是程序上下文，但可能不包含延迟，这使得它不太可能`forever`有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:32:41.923

是的，`forever`循环在设计验证的测试平台中广泛使用，特别是在行业标准方法、UVM 及其前身（如 VMM）中。它们用于验证组件，例如广泛使用 SystemVerilog 类中的任务的驱动程序和监视器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T05:58:34.827

//我将显示差异;;;;;;; //我们不能在初始块内使用永远块，但我们可以在初始块内使用永远块 //错误代码：

```
module stimulus(output reg a,b); 

 initial
 begin
  a = 1'b1;
  b = 1'b0;

  always
  begin
   #5 a = ~a;           //error when compiling
    #6 b = ~a;
  end

end

 initial
    #25 $stop;

endmodule

  // code with no error
module stimulus(output reg a,b); 

 initial
 begin
  a = 1'b1;
  b = 1'b0;

  always
  begin
   #5 a = ~a;    //no error when compiling
    #6 b = ~a;
  end

end

 initial
    #25 $stop;

endmodule 
```

# css - IE8 CSS 文件限制

> ID：15938161
> 
> 赞同：3
> 
> 时间：2013-04-10T23:16:07.480
> 
> 标签：css, internet-explorer-8

我正在向系统的现有网页添加功能。我宁愿在我正在做的改变范围之外做一点改变。

问题是在 IE8 中查看之前，一切都可以跨浏览器运行。那里的页面视图有一些奇怪的显示问题，这些问题与我所做的更改无关。

使用 IE Developer 工具，我能够看到它没有找到应该加载页面源代码的 CSS 文件的样式功能。

我对 IE8 开发工具了解不多，但是当我在 CSS 选项卡下查看时，我会得到一个 CSS 文件列表。我没有看到列出的有问题的 CSS 文件，所以看起来它由于某种原因没有加载。

我已经用我所做的添加了两个新的 CSS 文件，所以也许我已经把它推到了极限。

所以，这听起来像问题 IE（虽然 IE9 有效）有一个限制，可能是 31 个 CSS 文件可能能够加载： [Internet Explorer 的 CSS 规则限制](https://stackoverflow.com/questions/9906794/internet-explorers-css-rules-limits)

但在那个列表中，我可以数出超过 31 个 CSS 文件。看起来有 60 多个。但是有些文件是通过@import 加载的，而有些则没有，所以也许这解释了为什么还有更多文件。

我怎么能确定这是问题所在？我在 IE8 开发者控制台中没有看到任何错误。我在没有加载的文件上运行了 CSS Lint——这不是我的。有一些警告，但似乎并不严重。

从我读过的内容来看，这听起来没有很好的解决方案。那是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:04:38.403

我知道目标是尽可能地进行一些更改，但是，如果您手动将至少一些 css 合并到一个文件中，我们会使用类似 Minify 的东西（[http://code.google .com/p/minify/](http://code.google.com/p/minify/)）在后端代码中，它将尽最大努力不仅聚合 css 文件，还聚合 javascript 文件。

以仅更改必要的名义，您始终可以打开其他 css 文件之一并将 css 粘贴到文件末尾的其中一个中。这是草率的，但如果问题真的来自 IE 中的最大数量的 css 文件，那么这肯定会解决问题。

# ruby-on-rails - 渴望在 Active Record 之外加载

> ID：15938162
> 
> 赞同：1
> 
> 时间：2013-04-10T23:16:15.493
> 
> 标签：ruby-on-rails

我有一个集合非 Active Record 模型，每个模型都有几个外键。我想急切地加载协会，但我正在努力采用这种方法。代码看起来像这样：

模型：

```
class Tuple
  attr_accessor :widget_id
  attr_accessor :woogle_id

  def self.all
    # returns a bunch of tuples with ids
  end

  def widget
    @widget ||= Widget.find(widget_id)
  end

  def woogle
    @woogle ||= Woogle.find(woogle_id)
  end
end 
```

看法：

```
- Tuple.all.each do |tuple| 
  = render tuple.widget
  = render tuple.woogle 
```

关于如何在这种情况下急切加载活动记录并避免 N+1 查询的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:50:17.167

这段代码应该对你有用，尽管如果有一种更简洁的方法来设置`@woogle`和`@widget`实例变量会很好：

```
def self.all
  # get a bunch of tuples with ids
  all_tuples = some_logic
  widgets = Widget.where(id: all_tuples.map(&:widget_id)).inject({}){|m, w| m[w.id] = w; m}
  woogles = Woogle.where(id: all_tuples.map(&:woogle_id)).inject({}){|m, w| m[w.id] = w; m}
  all_tuples.each do |t|
    t.instance_variable_set :@widget, widgets[t.widget_id]
    t.instance_variable_set :@woogle, woogles[t.woogle_id]
  end
end 
```

请注意，如果元组的任何 Widget 或 Woogle 关联相同，则只有该关联的一个实例实际上是预先加载并由关联的元组共享

# javascript - div 菜单的默认值

> ID：15938167
> 
> 赞同：0
> 
> 时间：2013-04-10T23:16:49.403
> 
> 标签：javascript, jquery, html, drop-down-menu, default-value

我的 div 菜单有问题。

我希望将数据链接变量的值设置为 first，这样当我最初加载页面时，菜单下方有 ffffffffffff 行。就像现在的代码一样，该行将是空的。

然后，如果我单击菜单上的另一个项目，则新菜单项的内容会覆盖以前的内容。

```
<div id="menu_about">
    <a class="link" href="#about" data-link="first">
        &nbsp;&nbsp; Why We Exist
    </a> &#8226; 
    <a class="link" href="#about" data-link="second">Who We Are</a> &#8226;
    <a class="link" href="#about" data-link="third">What We Do</a> &#8226; 
    <a class="link" href="#about" data-link="fourth">How We Think</a> &#8226; 
    <a class="link" href="#about" data-link="fifth">Where We Are Going</a>
</div>
<div id="pages_about" class="textContainer_about">
    <div class="textWord_about" data-link="first">
        <p>ffffffffffff</p>
    </div>
    <div class="textWord_about" data-link="second">
        <p>ffffffffffffffffff</p>
    </div>
    <div class="textWord_about" data-link="third">
        <p>ffffffffffffffffffff</p>
    </div>
    <div class="textWord_about" data-link="fourth">
        <p>ffffffffffffffffffffffffffff</p>
        <p>ffffffffffffffffffffffffffff</p>
        <p>ffffffffffffffffffffffffffff</p>
        <p>ffffffffffffffffffffffffffff</p>
        <p>ffffffffffffffffffffffffffff</p>
    </div>
    <div class="textWord_about" data-link="fifth">
        <p>fffffffffffffffffffffffffff</p>
    </div>
</div> 
```

```
$('.textWord_about').hide();

$('.link').click(function() {
    $('.textWord_about').hide();       
    $('.textWord_about[data-link=' + $(this).data('link') + ']').fadeIn({
        width: '200px'
    }, 300);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:25:36.480

你只需要单独隐藏它们或者像我一样 [在这里](http://jsfiddle.net/Komlan/4wyjA/) 我显示你想用 show() 显示的元素，就像这样

```
 $('.textWord_about[data-link="first"]').show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:29:22.737

`.textWord_about`最初隐藏它们时，选择除第一个以外的所有内容。

使用`:gt(0)`：

```
$('.textWord_about:gt(0)').hide(); 
```

[jsfiddle.net/mLfgW](http://jsfiddle.net/mLfgW/)

或者`.slice(1)`：

```
$('.textWord_about').slice(1).hide(); 
```

[jsfiddle.net/mLfgW/1](http://jsfiddle.net/mLfgW/1/)

# c++ - C++ 内联函数原型

> ID：15938170
> 
> 赞同：4
> 
> 时间：2013-04-10T23:17:13.557
> 
> 标签：c++, prototype, inline-functions

我遇到了一个头文件，其中包含内联和常量的各种函数原型声明：

```
inline bool Foo1() const;
inline bool Foo2() const;
inline bool Foo3() const;
... 
```

我知道**inline**关键字允许编译器在调用时（可能）扩展函数，但为什么不包括函数体呢？

如果定义包含在头文件中，对我来说会更有意义：

```
inline bool Foo1() const { return m_Foo1; };
inline bool Foo2() const { return m_Foo2; };
inline bool Foo3() const { return m_Foo3; };
... 
```

在原型上使用内联有什么意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:28:23.977

这可能只是一个错误，但很可能程序员想要使函数内联，但不想用这些函数的实现来弄乱文件的那部分。在编写“仅标头”代码时，这是一种相当常见的模式。您有一个没有（或很少）实现的普通头文件和另一个包含但充当实现文件并包含所有实现的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:22:41.560

它只是允许紧凑地显示类接口。

函数定义稍后存在于编译单元中（在调用它们之前，*如果*它们被调用）

来自[Dobb 博士的](http://www.drdobbs.com/the-new-c-inline-functions/184401540)：

> 可以内联声明函数定义或函数原型。如果函数原型被声明为内联，则函数的单独定义必须出现在模块中的其他位置（如果调用该函数）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T23:22:29.543

有很多原因。

1.  您需要空函数声明来解决一个函数调用另一个函数的依赖性问题。
2.  出于文体原因。

唯一的限制是函数定义必须包含在每个使用内联函数的编译单元中。否则，内联函数在声明和定义方式上与普通函数完全相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T23:19:17.693

因为函数可能在目标文件中，开发人员不希望任何人看到源代码。

# c# - 正则表达式用另一个模式替换一个模式

> ID：15938171
> 
> 赞同：2
> 
> 时间：2013-04-10T23:17:20.400
> 
> 标签：c#, regex

谁能帮我写一个正则表达式，结果如下，用html标签替换bbcode，因为这里我想替换`[b][/b]`为`<strong></strong>`

所以这：

```
 "fsdfs [b]abc[/b] dddfs [b]abc[/b] fdsfdsfs [b]abcfsdfs" 
```

变成：

```
 "fsdfs <strong>abc</strong> dddfs <strong>abc</strong> fdsfdsfs [b]abcfsdfs" 
```

以下正则表达式是否有助于解决此问题？

```
 string result = Regex.Replace(s, @"\[b\](.*?)\[\/b\]", @"\<stront\>(.*?)\<\/strong\>"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T23:34:31.327

以下应该有效：

```
string s = "fsdfs [b]abc[/b] dddfs [b]abc[/b] fdsfdsfs [b]abcfsdfs";
string result = Regex.Replace(s, @"\[b\](.*?)\[/b\]", @"<strong>$1</strong>"); 
```

示例：http: [//ideone.com/xwP1EL](http://ideone.com/xwP1EL)

# file - 将变量文件保存到文件夹中

> ID：15938176
> 
> 赞同：0
> 
> 时间：2013-04-10T23:18:26.017
> 
> 标签：file, variables, text, vbscript, directory

我想我设法搞砸了我的程序。这里是麻烦的地方。

```
name=inputbox("Type the name here.",,"")
Dim file : Set file = CreateObject("Scripting.FileSystemObject")
If file.FileExists("G:\Rita\memory"\name) Then
msgbox("I believe we have met before.")
End If 
```

然后是一堆对话，然后是这些台词。

```
Dim aData : aData = Array(name, age, color)
If file.FileExists(name) Then aData = Split(file.OpenTextFile("G:\Rita\memory"\name).ReadAll())
file.CreateTextFile("G:\Rita\memory"\name).Write Join(aData) 
```

该程序是从闪存驱动器编写的。无论如何，我有几个小问题，主要是它不会保存到预制的“内存”文件夹中。另一个（不那么重要）是不再保存为文本文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:35:06.727

您缺少“&”，并且您的引号（“）在具有变量名称的每一行的错误位置。我在您的代码中更正了这一点。试试这个。

```
name=inputbox("Type the name here.",,"")
Dim file : Set file = CreateObject("Scripting.FileSystemObject")
If file.FileExists("G:\Rita\memory\" & name) Then
msgbox("I believe we have met before.")
End If

Dim aData : aData = Array(name, age, color)
If file.FileExists(name) Then aData = Split(file.OpenTextFile("G:\Rita\memory\" & name).ReadAll())
file.CreateTextFile("G:\Rita\memory\" & name).Write Join(aData) 
```

# riak - 这个 Riak Map Reduce 查询需要多长时间？

> ID：15938179
> 
> 赞同：1
> 
> 时间：2013-04-10T23:18:50.277
> 
> 标签：riak

我有一个包含大约 900,000 条记录的存储桶。这些记录中的大多数在二级索引中的状态为 PERSISTED。我想检索所有标记为 PERSISTED 的文档的所有 base_url 以及属于每个 base_url 的文档数。

这是查询：

```
curl -X POST -H "content-type: application/json" \
    http://localhost:8098/mapred?chunked=true --data @-<<\EOF
{
    "timeout":600000,
    "inputs":{
       "bucket":"test-bucket",
       "index":"status_bin",
       "key":"PERSISTED"
    },
    "query":[{
        "map":{
            "language":"javascript",
            "source":"
                function(value, keyData, arg) {
                    var data = Riak.mapValuesJson(value)[0];
                    var obj = {};
                    obj[data.base_url] = 1;
                    return [obj];
                }
            "
        }
    },
    {
        "reduce":{
            "language":"javascript",
            "source":"
                function(values, arg){ 
                    return [values.reduce(
                        function(acc, item){ 
                            for(var base_url in item){
                                if(acc[base_url]) {
                                    acc[base_url] = acc[base_url] + 1
                                } else {
                                    acc[base_url] = item[base_url];
                                }
                            }
                            return acc;
                        })
                    ];
                }
            "
        }
    }]

EOF 
```

这是 10 分钟后超时。

我在具有 20Gb 内存的 16 核 3Ghz AWS 节点上。

有什么我可能做错了，无论是我的配置还是上面的查询？

可能需要这么长时间吗？

为了给出观点，MySQL中的等效查询看起来像这样

SELECT COUNT(*), catalog FROM urls GROUP BY catalog;

我还没有尝试过，但我怀疑在 MySQL 中，来自上述查询的超过 900,000 条记录的结果集需要几秒钟。我不想将 Riak 与 MySQL 进行比较，因为我意识到它们非常不同，但我想知道我至少如何在 10 分钟内执行上述查询。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T02:39:23.110

Riak 中的 JavaScript MapReduce 作业使用 SpiderMonkey JavaScript VM 池，重要的是根据您的使用模式调整此池的大小，以避免或至少减少争用。池的大小通过 app.config 文件中的“map_js_vm_count”和“reduce_js_vm_count”参数指定。

[由于您在单个节点上运行并且只有一个映射阶段，我建议您将“map_js_vm_count”参数设置为环的大小，默认情况下为 64。可以在此处找到](https://stackoverflow.com/questions/13345448/riak-fails-at-mapreduce-queries-which-configuration-to-use)更深入的描述。

虽然 map 阶段处理很容易扩展并且是并行完成的，但中央 reduce 阶段很容易成为瓶颈，因为它在单个节点上递归运行。这可以通过[将参数传递给 map 阶段来解决，以启用 pre-reduce 并增加 reduce 阶段的批量大小，如此处所述](http://docs.basho.com/riak/latest/references/appendices/MapReduce-Implementation/#Configuration-Tuning-for-Reduce-Phases)。启用 pre-reduce 将允许 reduce 阶段的第一次迭代并行运行，这很可能会提高您的工作效率。但是，您需要通过大幅增加“reduce_js_vm_count”参数来增加可用于减少阶段函数的 VM 数量。

如果同时运行大型 MapReduce 作业，则支持此操作所需的 JavaScript VM 数量可能会变得非常大。通常鼓励将 map 和 reduce 阶段函数转换为 Erlang，因为它确实消除了 JS VM 争用，并且由于与 VM 相关的开销更少，性能也更好。对于您打算定期运行的 MapReduce 作业，始终建议这样做。

# sql - sql：检查表A中的条目是否存在于表B中

> ID：15938180
> 
> 赞同：91
> 
> 时间：2013-04-10T23:18:51.843
> 
> 标签：sql, exists

我有一个定义表，我知道它维护得不是很好，我们称之为`table A`. 我有另一个`table B`小得多的表（称为它），理想情况下应该是 a`subset of table A`但我知道它`table A`有些陈旧并且不包含`Table B`.

请注意，表 A 和 B 具有不同的列。

```
Table A:
ID, Name, blah, blah, blah, blah

Table B:
ID, Name 
```

我想要表 B 中的所有行，使得表 B 中的 ID 不存在于表 A 中。这不仅匹配表 A 中的行；还匹配表 A 中的行。我只想要表 B 中 ID 在表 A 中根本不存在的行。

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-04-10T23:21:46.573

```
SELECT *
FROM   B
WHERE  NOT EXISTS (SELECT 1 
                   FROM   A 
                   WHERE  A.ID = B.ID) 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2017-04-05T22:15:31.577

适用于几乎所有环境的经典答案是

```
SELECT ID, Name, blah, blah
FROM TableB TB
LEFT JOIN TableA TA
ON TB.ID=TA.ID
WHERE TA.ID IS NULL 
```

有时 NOT EXISTS 可能没有实现（不工作）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-10T23:22:15.860

如果您设置使用 EXISTS，您可以在 SQL Server 中使用以下内容：

```
SELECT * FROM TableB as b
WHERE NOT EXISTS
(
   SELECT * FROM TableA as a
   WHERE b.id = a.id
) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-12-11T18:43:40.937

这也有效

```
SELECT *
FROM tableB
WHERE ID NOT IN (
  SELECT ID FROM tableA
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-16T11:50:26.157

或者如果“不存在”没有实现

```
SELECT *
FROM   B
WHERE (SELECT count(*)  FROM   A WHERE  A.ID = B.ID) < 1 
```

# wpf - 将箭头键从 TextBox 重定向到 ListBox

> ID：15938182
> 
> 赞同：4
> 
> 时间：2013-04-10T23:19:00.313
> 
> 标签：wpf

我有一个下面有一个 ListView 的 TextBox，当 TextBox 获得焦点时，我想将向上和向下箭头键重定向到 ListView。在我做任何特别的事情之前，有人知道在控件之间重定向键的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:56:08.390

理想情况下，您可以设置 KeyboardNavigation.DirectionalNavigation （[http://msdn.microsoft.com/en-us/library/system.windows.input.keyboardnavigation.directionalnavigation.aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboardnavigation.directionalnavigation.aspx)），但我认为由于文本框处理方向键的方式，这将被忽略。

作为替代方案，您可以处理 PreviewKeyDown 以使向上和向下箭头模拟选项卡。

```
 <StackPanel PreviewKeyDown="StackPanel_PreviewKeyDown"  >
        <TextBox Text="Test" TabIndex="0" />
        <ListView TabIndex="1">
            <ListViewItem>One</ListViewItem>
            <ListViewItem>Two</ListViewItem>
            <ListViewItem>Three</ListViewItem>
        </ListView>
    </StackPanel>

    private void StackPanel_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        switch (e.Key)
        {
            case Key.Up:

                ((UIElement)Keyboard.FocusedElement).MoveFocus(new TraversalRequest(FocusNavigationDirection.Previous));
                e.Handled = true;

                break;
            case Key.Down:
                ((UIElement)Keyboard.FocusedElement).MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));
                e.Handled = true;

                break;
        }
    } 
```

# sql - 在moodle中选择所有文件及其课程路径

> ID：15938185
> 
> 赞同：3
> 
> 时间：2013-04-10T23:19:22.953
> 
> 标签：sql, moodle

我正在尝试编写查询以获取 Moodle 中课程文件的名称和路径，但似乎我永远无法做到。这是我到目前为止所做的，对此的任何帮助都非常感谢:)

```
SELECT SOURCE file,
              course,
              contenthash path
FROM mdl_files
INNER JOIN mdl_context ON mdl_files.contextid = mdl_context.id
JOIN mdl_resource ON instanceid = mdl_resource.id
WHERE course=
    (SELECT id
     FROM mdl_course
     WHERE fullname="XXXX") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T07:36:11.557

在任何这些 Moodle 表中都没有名为“文件”的列。您实际上是指“mdl_files.filename”列吗？

如果是这样，请尝试以下查询：

```
SELECT
    mdl_files.source,
    mdl_files.filename,
    mdl_files.contenthash,
    mdl_context.path,
    mdl_resource.course,
    mdl_resource.name,
    mdl_course.fullname, 
    mdl_course.shortname
FROM
    mdl_files
INNER JOIN mdl_context ON mdl_files.contextid = mdl_context.id
INNER JOIN mdl_resource ON mdl_context.instanceid = mdl_resource.id
INNER JOIN mdl_course ON mdl_resource.course = mdl_course.id
WHERE (mdl_course.fullname = 'XXXX') 
```

那是你要的吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-18T04:30:34.167

试试这个....只需将下面的“ **58** ”替换为适当的课程 ID 号

```
SELECT cm.id, cm.course, cm.module, mdl.name AS type,
       CASE
            WHEN mf.name IS NOT NULL THEN mf.name
            WHEN mb.name IS NOT NULL THEN mb.name
            WHEN mr.name IS NOT NULL THEN mr.name
            WHEN mu.name IS NOT NULL THEN mu.name
            WHEN mq.name IS NOT NULL THEN mq.name
            WHEN mp.name IS NOT NULL THEN mp.name
            WHEN ml.name IS NOT NULL THEN ml.name
            ELSE NULL
       END AS activityname,
       CASE
            WHEN mf.name IS NOT NULL THEN CONCAT('/mod/forum/view.php?id=', cm.id)
            WHEN mb.name IS NOT NULL THEN CONCAT('/mod/book/view.php?id=', cm.id)
            WHEN mr.name IS NOT NULL THEN CONCAT('/mod/resource/view.php?id=', cm.id)
            WHEN mu.name IS NOT NULL THEN CONCAT('/mod/url/view.php?id=', cm.id)
            WHEN mq.name IS NOT NULL THEN CONCAT('/mod/quiz/view.php?id=', cm.id)
            WHEN mp.name IS NOT NULL THEN CONCAT('/mod/page/view.php?id=', cm.id)
            WHEN ml.name IS NOT NULL THEN CONCAT('/mod/lesson/view.php?id=', cm.id)
            ELSE NULL
       END AS linkurl, f.id AS fileid, f.filepath, f.filename, CONCAT('/filedir/', SUBSTRING(f.contenthash, 1, 2), '/', SUBSTRING(f.contenthash, 3, 2), '/', f.contenthash) AS filesystempath, f.userid AS fileuserid, f.filesize, f.mimetype, f.author AS fileauthor, f.timecreated, f.timemodified
FROM mdl_course_modules AS cm
INNER JOIN mdl_context AS ctx ON ctx.contextlevel = 70 AND ctx.instanceid = cm.id
INNER JOIN mdl_modules AS mdl ON cm.module = mdl.id
LEFT JOIN mdl_forum AS mf ON mdl.name = 'forum' AND cm.instance = mf.id
LEFT JOIN mdl_book AS mb ON mdl.name = 'book' AND cm.instance = mb.id
LEFT JOIN mdl_resource AS mr ON mdl.name = 'resource' AND cm.instance = mr.id
LEFT JOIN mdl_url AS mu ON mdl.name = 'url' AND cm.instance = mu.id
LEFT JOIN mdl_quiz AS mq ON mdl.name = 'quiz' AND cm.instance = mq.id
LEFT JOIN mdl_page AS mp ON mdl.name = 'page' AND cm.instance = mp.id
LEFT JOIN mdl_lesson AS ml ON mdl.name = 'lesson' AND cm.instance = ml.id
LEFT JOIN mdl_files AS f ON f.contextid = ctx.id
WHERE cm.course = 58
AND mdl.name = 'resource'
AND ((f.mimetype = 'application/pdf') OR (f.id IS NULL)) 
```

注意：最初受到 Darko Miletić 解决方案的启发：[https ://moodle.org/mod/forum/discuss.php?d=153059#p1166404](https://moodle.org/mod/forum/discuss.php?d=153059#p1166404)

# silverlight - 通过 WebClient byte[] 或替代方法在 Silverlight 应用程序中安全地呈现 SSRS 报告

> ID：15938188
> 
> 赞同：0
> 
> 时间：2013-04-10T23:19:41.743
> 
> 标签：silverlight, reporting-services, webclient

我正在尝试在 Silverlight 5 应用程序中实现 SSRS 报告功能，该应用程序在浏览器模式下运行。

*尝试 1)* 最初的计划是在 Silverlight 客户端上使用 URL 技术呈现页面

```
var path = item.Path; // Where item.Path is something like '/MyReportFolder/Report1'
var url= @"http://<MyServerAddress>/ReportServer/Pages/ReportViewer.aspx?{0}&rs:Command=Render";
var completeUrl = string.Format(url, path.Replace(@"/", "%2f").Replace(" ", "+"));
System.Windows.Browser.HtmlPage.Window.Navigate(new Uri(completeUrl), "_newWindow", "toolbar=0,menubar=0,resizeable=1,scrollbars=1"); 
```

这里的问题是调用此 URL 的权限将难以管理，并且与 Silverlight 应用程序运行的基本安全性无关。

*尝试 2)* 通过 WebClient 中的类似 Url 调用在 IIS 服务器上（而不是在客户端，代表用户通过 WCF 调用）呈现报告并下载 byte[] 输出，然后发送 byte[ ] 到 Silverlight 客户端（作为对 WCF 调用的响应），然后在 Silverlight 应用程序中呈现内容。

```
var path = itemPath;
var url = @"http://<MyServerAddress>/ReportServer/Pages/ReportViewer.aspx?{0}&rs:Command=Render";
var completeUrl = string.Format(url, path.Replace(@"/", "%2f").Replace(" ", "+"));

var tcs = new TaskCompletionSource<byte[]>();
var webClient = new WebClient();

webClient.DownloadDataCompleted += (sender, args) => tcs.TrySetResult(args.Error != null ? args.Result : new byte[0]);
webClient.DownloadDataAsync( new Uri(completeUrl));
return tcs.Task; 
```

也可以将报告呈现为 byte[]，并且可以通过 WCF 服务操作调用轻松处理安全性。但是，一旦客户端收到 byte[]，我不知道如何在屏幕上显示结果。我的偏好是打开一个新的浏览器窗口并将内容呈现到其中，但是 System.Windows.Browser.HtmlPage.Window 不支持这一点。

所以我的选择是：

1.  将 IIS 服务器上的结果呈现到一个临时文件并将 URL（而不是 byte[]）发送到 Silverlight 客户端，以便浏览器客户端可以打开结果。*这是一个糟糕的结果，因为结果与尝试 1*非常相似，因为 URL 可供第三方接收者使用
2.  将报告呈现为 TIFF 字节 []，但是我不确定这将处理多页报告，并且它可能不支持 PDF 和 XLS 报告内容，因为 TIFF 需要显示在 Silverlight 图像控件中，而不是浏览器。
3.  我还没有考虑过其他一些很棒的选择......

是否有其他人尝试在 Silverlight 应用程序中使用企业 SSRS 功能并找到类似问题的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:32:16.147

有一个组件 - [PerpetuumSoft Viewers For SSRS](http://www.perpetuumsoft.com/PerpetuumSoft-Viewers-for-SSRS.aspx)（这是我们需要承认的组件），它使用基于 XAML 的原生查看器将 SSRS 报告无缝集成到 Silverlight 应用程序中。所以我们显然找到了解决方案。

# rest - 如何在 Go 中通过 REST 查询查找节点

> ID：15938189
> 
> 赞同：0
> 
> 时间：2013-04-10T23:19:45.377
> 
> 标签：rest, go, neo4j

我通过查询来测试查找节点参考neo4j手册（<a href="http://docs.neo4j.org/chunked/snapshot/rest-api-indexes.html" rel="nofollow">http://docs. neo4j.org/chunked/snapshot/rest-api-indexes.html<22.10.10。Find node by query>，但是我有一些麻烦，我创建了两个节点，一个索引。然后我将两个节点添加到索引中。当我通过 lucene 查询查询节点时，我找不到任何东西。

这是我的测试代码：</p>

```
func TestFindNodeByQuery(t *testing.T) {
    log.Println("Start testing FindNodeByQuery")
    session, err := Dial(settingFile)
    if err != nil {
        t.Error(err)
    }
    log.Println("Create Index,type lucene")
    indexName := "testIndex"
    indexType := "fulltext"
    indexProvider := "lucene"
    err = session.CreateNodeIndexWithConf(indexName, indexType, indexProvider)
    if err != nil {
        t.Error(err)
    }
    log.Println("create two nodes")
    data := map[string]string{
        "name":  "test01",
        "key01": "value01",
    }
    node1, err := session.CreateNode(data)
    if err != nil {
        t.Error(err)
    }
    data["name"] = "test02"
    node2, err := session.CreateNode(data)
    if err != nil {
        t.Error(err)
    }
    indexKey := "some key"
    indexValue := "some value"
    _, err = session.AddNodeToIndex(indexKey, indexValue, indexName, node1.ID)
    if err != nil {
        t.Error(err)
    }
    _, err = session.AddNodeToIndex(indexKey, indexValue, indexName, node2.ID)
    if err != nil {
        t.Error(err)
    }
    luceneQuery := "indexKey:some*"
    results, err := session.FindNodeByQuery(indexName, luceneQuery)
    // results, err := session.FindNodeByMatch(indexName, indexKey, indexValue)
    log.Println(len(results))
    for _, result := range results {
        log.Println(result)
    }
    log.Println("Clean data...")
    err = session.DeleteNode(node1.ID)
    if err != nil {
        t.Error(err)
    }
    err = session.DeleteNode(node2.ID)
    if err != nil {
        t.Error(err)
    }
    err = session.DeleteNodeIndex(indexName)
    if err != nil {
        t.Error(err)
    }
    log.Println("data cleaned")
    log.Println("FindNodeByQuery test finished!")

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:04:09.430

尝试使用没有空格的索引键。这让你的生活更轻松。

然后，您实际上必须**使用在 lucene 查询中存储数据的正确索引键**：

`luceneQuery := "some_key:some*"`

如果你用过

`indexKey := "some_key"`

前。不像你做的那样：`luceneQuery := "indexKey:some*"`

# database - DBI 是在 Perl 中访问数据库的唯一方法吗

> ID：15938192
> 
> 赞同：1
> 
> 时间：2013-04-10T23:20:40.183
> 
> 标签：database, perl

是`DBI`在 Perl 中访问数据库的唯一方法吗？

除了`DBI`可用于访问数据库（如`MS-SQL/Oracle/MySQL`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T00:34:22.340

试想一下Windows*之前的个人电脑硬件市场。*例如，在那些日子里，每个应用程序都需要有自己的驱动程序。这意味着如果打印机没有[WordStar](http://en.wikipedia.org/wiki/WordStar)和[Lotus 1-2-3](http://en.wikipedia.org/wiki/Lotus_1-2-3)的驱动程序，那么它在办公环境中几乎没有用处。如果您有一台打印机可以同时使用这两种应用程序，但您现在还需要[哈佛图形公司](http://en.wikipedia.org/wiki/Harvard_Graphics)的输出怎么办？您需要确保*应用程序本身*知道如何处理您的特定打印机。

也就是说，*N 个*应用程序和*M*个打印机意味着需要*N* × *M*个驱动程序。

使用 Windows，硬件制造商可以为 Windows 编写驱动程序，只要应用程序知道如何通过 Windows 提供的接口与打印机通信，它就不需要知道任何有关特定硬件的信息。

这使得硬件和软件都更便宜。具体来说，应用程序程序员不需要对现有的特定硬件有太多了解。而且，在编写应用程序时不存在的硬件仍然可以与应用程序一起使用，如果它们都通过相同的驱动程序接口进行通信。

当然，这是一种相当简化的情况。即使使用 DOS，也有[ESC/P](http://en.wikipedia.org/wiki/ESC/P)、[PCL](http://en.wikipedia.org/wiki/Printer_Command_Language)，当然还有[PostScript](http://en.wikipedia.org/wiki/PostScript)，所以并不是每台打印机都是独一无二的，但应用程序仍然需要了解这些细节。

这里的情况类似。在大多数情况下，知道如何与[DBI](http://search.cpan.org/perldoc/DBI)对话的 Perl 应用程序不需要关心每个特定数据库的大部分各种细节。为 Perl 程序提供一个特定的数据库只需要为它编写适当的[DBD::*](http://search.cpan.org/search?query=dbd&mode=module)模块。[DBI 文档](http://search.cpan.org/perldoc/DBI#Architecture_of_a_DBI_Application)中的下图说明了这一点：

```
             |<- DBI 的范围->|
                  .-. .-------------。.-------------。
  .--------。| |---| XYZ 驱动器 |---| XYZ 引擎 |
  | 珀尔 | | | `-------------' `-------------'
  | 脚本| |一个| |D| .-------------。.-------------。
  | 使用 |--|P|--|B|---|Oracle 驱动程序 |---|Oracle 引擎|
  | DBI | |我| |我| `-------------' `-------------'
  | API | | |...
  |方法| | |... 其他驱动程序
  `-------' | |...
                  `-'
```

一旦`DBI`存在，为给定引擎编写或使用特定专用模块的动机就会降低。当然，拥有一个独立模块来单独与`ABC`某个地方的引擎进行通信可能有某些好处，但必须权衡这些好处与成本。其应用程序需要访问数据库的程序员需要了解陌生 API 的来龙去脉。如果访问引擎的唯一方法`ABC`是通过 以外的其他方式`DBI`，那么`ABC`引擎不允许程序员利用他们已经知道的东西。无论是使用`ABC`引擎的专用 API 变得无法与其他引擎一起使用，或者应用程序程序员必须拥有自己的数据库独立接口，并对其进行编程，并复制`DBD`to`DBI`层。但是，既然已经建立了独立于数据库的接口及其随附的数据库驱动程序，为什么还要为此烦恼呢？

看看[DBIx::Class](http://search.cpan.org/dist/DBIx-Class/)的引擎特定部分，想象一下如果我们还没有`DBD`为每个引擎提供一个，那将会有多少工作量。然后，想象一下如果[Rose::DB](http://search.cpan.org/dist/Rose-DB)也必须复制整个驱动程序集。

或者，您可以想象如果每个房子都有自己喜欢的墙壁插座类型并且每个电器都有自己喜欢的电源插头会发生什么。每台笔记本电脑都可以有自己的变压器，但我们都受益于标准插头和插座，它们可以从中获取电力。`DBI`处于插头和插座级别。

# ios - Core Data 希望我的谓词参数是 NSNumber 和 NSDate

> ID：15938196
> 
> 赞同：2
> 
> 时间：2013-04-10T23:20:47.590
> 
> 标签：ios, core-data, subquery, nsdate, predicate

我有一个带有多个 UpcomingDates 的事件模型，每个事件都有一个类型为 (NS)Date 的属性日期。我正在构建一个获取请求以仅检索在两个给定日期之间具有即将到来的日期的事件。问题是，无论我如何格式化谓词中的输入日期，我都会遇到异常。似乎 Core Data 希望我的谓词参数既是 NSDates 又是 NSNumbers。

当我传入 NSNumbers 时，通过执行 @([date timeIntervalSinceReferenceDate])，我看到了：

```
predicate: 0 != SUBQUERY(upcomingDates, $upcomingDate, $upcomingDate.date >= 387270000 AND $upcomingDate.date <= 387356400).@count
-[__NSCFNumber timeIntervalSinceReferenceDate]: unrecognized selector sent to instance 0x865a0b0 
```

当我走直观的路线时，使用普通的旧 NSDates，我看到了：

```
predicate: 0 != SUBQUERY(upcomingDates, $upcomingDate, $upcomingDate.date >= CAST(387270000.000000, "NSDate") AND $upcomingDate.date <= CAST(387356400.000000, "NSDate")).@count
-[__NSDate objCType]: unrecognized selector sent to instance 0x86c6450 
```

打印出接收到无法识别的选择器的对象，它始终是谓词参数中的第一个。

我已经尽我所能验证了comingingDate.date 实际上是一个NSDate（这是模型指定的，但我也查看了它们创建时传入的内容）。我已经尝试使用 CAST 到 NSDates 和 NSNumbers 的每一个排列。我已将谓词分解为最简单的情况，这实际上只是意味着删除一个 AND 子查询谓词。我难住了。

ETA：谓词如下。NSNumbers：

```
[NSPredicate predicateWithFormat:@"0 != (SUBQUERY(upcomingDates, $upcomingDate, ($upcomingDate.date >= %@) AND ($upcomingDate.date <= %@))).@count", @([self.timeFilterRange[0] timeIntervalSinceReferenceDate]), @([self.timeFilterRange[1] timeIntervalSinceReferenceDate])] 
```

NSD日期：

```
[NSPredicate predicateWithFormat:@"0 != (SUBQUERY(upcomingDates, $upcomingDate, ($upcomingDate.date >= %@) AND ($upcomingDate.date <= %@))).@count", self.timeFilterRange[0] , self.timeFilterRange[1] ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T22:36:50.453

Weirdly, it seems the subquery was the problem. When I use this new predicate, I may or may not be getting correct results (my setup is such that it's difficult to test right now), but I am at least not getting crashes.

```
NSArray *times = @[@([self.timeFilterRange[0] timeIntervalSinceReferenceDate]),
                       @([self.timeFilterRange[1] timeIntervalSinceReferenceDate])];
[NSPredicate predicateWithFormat:@"ANY upcomingDates.date BETWEEN %@", times] 
```

# c - 在 C 中使用 tm 时出现分段错误

> ID：15938198
> 
> 赞同：1
> 
> 时间：2013-04-10T23:20:56.407
> 
> 标签：c, struct, segmentation-fault, time-t, tm

所以我在下面发布了我的代码（对不起，我知道它很长），但是当我尝试使用 tm 结构执行任何操作时出现分段错误。我不知道为什么会出现此段错误，我很确定我以前可以正常工作，但是现在我无法正常工作。如果有人知道如何摆脱段错误，那就太好了。段错误出现在第一个嵌套的 if 语句中，位于代码块的中下部，它位于 if-else 的长块之后。

非常感谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <netdb.h>
#include <time.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/stat.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <assert.h>

int main(){

int sockfd, clifd, status, monthModifiedi, newer;
struct sockaddr_in addr;
//char buf[1024] = "HEAD httpserver.c HTTP/1.1\nHost: www.reddit.com";
char buf[1024];
struct stat statBuf;
char *message, *filePath, *domain, *monthModified, *dayModified, *hourModified, *minuteModified, *secondModified, *yearModified;
FILE *pFile;
struct tm *tm;
time_t time;

//instantiate
strcpy(buf,"HEAD /httpserver.c HTTP/1.1\nHost: www.reddit.com\nIf-Modified-Since: Thu Mar 28 02:20:08 2013");

printf("%s\n\n", buf);

//parse buffer
message = strtok(buf, " ");
filePath = strtok(NULL, " ");
domain = strtok(NULL, "\n");
domain = strtok(NULL, " "); //domain will be overwritten with actual doman, this is filler
domain = strtok(NULL, " \n");
monthModified = strtok(NULL, " ");

printf("%s\n", filePath);
if(stat(filePath, &statBuf) == 0){
    tm = localtime(&statBuf.st_mtime);
    //time = &statBuf.st_mtime;
}

//newer will keep this value of 2 if there is no conditional GET request
newer = 2;

//If it is a conditional GET request
if(strcmp(monthModified, "If-Modified-Since:") == 0){

    monthModified = strtok(NULL, " ");
    monthModified = strtok(NULL, " ");
  dayModified = strtok(NULL, " ");
  hourModified = strtok(NULL, " :");
  minuteModified = strtok(NULL,":");
  secondModified = strtok(NULL,": ");
  yearModified = strtok(NULL, " ");

    //Turns string version of month to numeric value
    if(strcmp(monthModified,"Jan") ==0)
        monthModifiedi = 1;
    else if(strcmp(monthModified,"Feb")==0)
        monthModifiedi = 2;
    else if(strcmp(monthModified,"Mar") ==0)
        monthModifiedi = 3;
    else if(strcmp(monthModified,"Apr") ==0)
        monthModifiedi = 4;
    else if(strcmp(monthModified,"May") ==0)
        monthModifiedi = 5;
    else if(strcmp(monthModified,"Jun") ==0)
        monthModifiedi = 6;
    else if(strcmp(monthModified,"Jul") ==0)
        monthModifiedi = 7;
    else if(strcmp(monthModified,"Aug") ==0)
        monthModifiedi = 8;
    else if(strcmp(monthModified, "Sep") ==0)
        monthModifiedi = 9;
    else if(strcmp(monthModified,"Oct") ==0)
        monthModifiedi = 10;
    else if(strcmp(monthModified, "Nov") ==0)
        monthModifiedi = 11;
    else if(strcmp(monthModified,"Dec") ==0)
        monthModifiedi = 12;

    //Determines if file has been modified since date requested from client
    newer = 0;
    if(atoi(yearModified) > (*tm).tm_year)
        if(monthModifiedi > (*tm).tm_mon)
            if(atoi(dayModified) > (*tm).tm_mday)
                if(atoi(hourModified) > (*tm).tm_hour)
                    if(atoi(minuteModified) > (*tm).tm_min)
                        if(atoi(secondModified) > (*tm).tm_sec)
                            newer = 1;
}

printf("Value of newer: %i", newer);
printf("Message: %s Filename: %s Domain: %s monthModified: %i dayModified: %s hourModified: %s minuteModified: %s secondModified: %s yearModified: %s\n", message, filePath, domain, monthModifiedi, dayModified, hourModified, minuteModified, secondModified, yearModified);

if(message == "GET"){
    if ((pFile = fopen(filePath, "w")) == NULL){
        message = "HTTP/1.1 404 Not Found\n\r";
        send(clifd, message, strlen(message), 0);
    }
    // If not conditinal request, or if file has been modified
    else if(newer == 2 || newer == 1){
        message = "HTTP/1.1 200 OK\n\r", pFile;
        send(clifd, message, strlen(message), 0);
    }
    // If file has not been modified
    else{
        message = "HTTP/1.1 304 Not Modified\n\r";
        send(clifd, message, strlen(message),0);
    }
}
else if(message == "HEAD"){
    if ((pFile = fopen(filePath, "w")) == NULL){
        message = "HTTP/1.1 404 Not Found\n\r";
        send(clifd, message, strlen(message), 0);
    }
    else{
        message = "HTTP/1.1 200 OK\n\r";
        send(clifd, message, strlen(message), 0);
    }
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:25:30.640

的返回值是`stat`多少？

```
if(stat(filePath, &statBuf) == 0){
    tm = localtime(&statBuf.st_mtime);
    //time = &statBuf.st_mtime;
} 
```

您仅初始化`tm`是否`stat`成功，但如果不是，则无论如何都可以访问它而无需检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:25:48.247

问题不在于它`tm`本身，而在于`filePath`. 您很可能在根目录中没有名为`/httpserver.c`. 这导致分配

```
tm = localtime(&statBuf.st_mtime); 
```

被跳过并`tm`指向任意内存。

从字符串中，我猜这应该是一个 HTTP HEAD 请求。要测试正确的文件，您必须将文档根添加到请求的 URI 的名称之前。

# javascript - 在 JSP 或 Javascript 中获取标签的值

> ID：15938201
> 
> 赞同：1
> 
> 时间：2013-04-10T23:21:12.147
> 
> 标签：javascript, jsp

我在我的 jsp 页面中有一个名为 Promotion and Wholesale 的标签，它的值为 Yes 或 No。我想提取标签值（Yes 或 No）并验证它，但我不确定如何。请求帮助。标签的示例代码如下，图片如下。

```
<li class="FormFieldTitleTwo" style="padding-left: 10px;"><spring:message    
 code="label.promotion" />:</li>
 <li class="Checkbox">  
 <div class="FormFieldLabel"><spring:message code="yesNo.true"></spring:message></div>
  </li> 
```

![标签图像](https://i.stack.imgur.com/nPxtj.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:42:17.557

添加两个具有隐藏类型的输入文本字段。通过设置标签的方式设置其值。然后在 javascript 中获取这些值。

```
<inputy type="hidden" name="promotion" id="promotion" value="(your code to set value)" />

<inputy type="hidden" name="wholesale" id="wholesale" value="(your code to set value)" /> 
```

# three.js - three.js：TorusGeometry 的一些参数在 r57 中看起来很奇怪

> ID：15938202
> 
> 赞同：0
> 
> 时间：2013-04-10T23:21:42.873
> 
> 标签：three.js

TorusGeometry 的参数是radius、tube、radialSegments、tubularSegments 和arc。似乎radialSegments 和tublarSegments 在名称和功能方面是相反的。例如，TorusGeometry(40, 40, 32, 3) 预计会是 UFO 之类的形状，但它不起作用。相比之下，TorusGeometry(40, 40, 3, 32) 效果很好。我正在使用 r57 并通过 Firefox19 和 IE9+ChromeFrame26 确认。

如果这个问题已经知道，请忽略这篇文章。

# ruby - 为什么 Enumerator 包含 Enumerable

> ID：15938203
> 
> 赞同：2
> 
> 时间：2013-04-10T23:21:43.127
> 
> 标签：ruby, lazy-evaluation, enumerable

挖这个，这是一个很酷的`Enumerator`（惰性序列）从 1 到（最大的`Float`Ruby 可以表示）：

```
1.9.3-p327 :014 > e = (1..Float::INFINITY).each 
```

看看我们如何抓住序列的前面：

```
1.9.3-p327 :015 > e.first
 => 1 
1.9.3-p327 :016 > e.take(2)
 => [1, 2] 
```

这是好东西吧？我也这么认为。但后来这个：

```
1.9.3-p327 :017 > e.drop(2).first 
```

进入拉拉地。我的意思是它不会在不到 5 秒内返回。

哦，这里有一个线索：

```
1.9.3-p327 :020 > p e.method(:drop)
#<Method: Enumerator(Enumerable)#drop> 
```

似乎 Enumerator ( `e`) 将其`#drop`方法从`Enumerable`(module) 混合到`Enumerator`(class) 中。现在你问为什么 Ruby 会混`Enumerable`进去`Enumerator`？我不知道。但是它[`Enumerator`在 Ruby 1.9.3](http://ruby-doc.org/core-1.9.3/Enumerator.html)和[`Enumerator`Ruby 2.0](http://ruby-doc.org/core-2.0/Enumerator.html)中都有记录。

我看到的问题是在`Enumerable`工作中定义的某些方法或工作类型`Enumerator`。示例包括`#first`和`#take`。至少还有一个：`#drop`不起作用。

在我看来，`Enumerator`包括`Enumerable`是一个错误。你怎么看？

PS 注意到 Ruby 2.0 定义了`Enumerator::Lazy`(subclass of `Enumerator`)，它定义了一堆`Enumerable`总是惰性的方法。这里有一股腥味。为什么混合非惰性和在某些情况下损坏的方法 (into `Enumerator`) 只是为了在子类 (of ) 中转身并提供惰性替代方案`Enumerator`？

也可以看看：

```
1.9.3-p327 :018 > p e.method(:first)
#<Method: Enumerator(Enumerable)#first>
1.9.3-p327 :020 > p e.method(:drop)
#<Method: Enumerator(Enumerable)#drop> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:38:54.127

这也是许多其他集合框架所共有的设计选择。

Ruby 的集合操作不是类型保留的。无论调用什么类型的集合，它们*总是*返回一个。`Array`这也是，例如，.NET 所做的，除了类型 always `IEnumerable`，这既更有用（因为更多的东西可以表示为 an`IEnumerable`而不是`Array`，例如无限序列），但同时也不太有用（因为的接口`IEnumerable`比 的要小很多`Array`，所以可以对它进行的操作较少）。

这使得 Ruby 的收集操作可以实现*一次*，无需重复。

这也意味着将您自己的集合集成到 Ruby 的集合框架中非常容易：只需实现`each`, mixin`Enumerable`即可。如果 Ruby 的未来版本添加了新的收集方法（例如`flat_map`，在 Ruby 1.9 中），您不必做*任何事情*，它也可以与您的集合一起使用。

另一种设计选择是使所有收集操作保持类型。因此，所有集合操作都返回它们被调用的类型。

有一些语言可以做到这一点。然而，它是通过将所有集合方法复制并粘贴到所有集合类中来实现的，即大量代码重复。

这意味着如果你想将你自己的集合添加到集合框架中，你必须实现集合协议的每一个方法。如果该语言的未来版本添加了新方法，那么您必须发布您的集合的新版本。

Scala 2.8 的集合框架是第一次有人想出如何在不重复代码的情况下进行类型保留的集合操作。但那是在设计 Ruby 的集合框架之后很久。在设计 Ruby 的集合框架时，根本不知道如何在不重复代码的情况下进行类型保留的集合操作，Ruby 的设计者选择反对重复。

从 Ruby 1.9 开始，实际上存在一些重复。一些`Hash`方法被复制以返回`Hash`es 而不是`Array`s。您已经提到了 Ruby 2.0 `Enumerator::Lazy`，它重复了许多`Enumerable`返回方法`Enumerator::Lazy`。

可以使用 Scala 在 Ruby 中使用的相同技巧，但它需要对集合框架进行彻底改造，这将使每个现有的集合实现都过时。Scala 能够做到这一点是因为当时几乎没有任何用户群。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:48:30.623

针对第一部分：

> “进入啦啦之地。我的意思是它不会在不到 5 秒内返回。”

这种行为似乎与这些方法应该做的一致：

```
take(n) → array # Returns first n elements from enum. 
```

这意味着您只需要迭代到 N 即可返回它。

```
drop(n) → array # #Drops first n elements from enum, and returns rest elements in an array. 
```

这意味着它需要其余元素才能返回它们。并且由于您的上限是`Float::INFINITY`它的行为。

来源：[可枚举](http://ruby-doc.org/core-2.0/Enumerable.html)

# java - 从 (ExecutorService) CachedThreadPool 中捕获异常

> ID：15938204
> 
> 赞同：0
> 
> 时间：2013-04-10T23:21:44.840
> 
> 标签：java, executorservice

我们正在使用通过 ExecutorService#newCachedThreadPool 创建的 CachedThreadPool。（Java 1.6）。我们在代码的其他地方遇到错误：“无法创建新的本机线程”，我们已将其诊断为内存不足问题。当这个问题发生时，我们调用提交的代码块（我们使用提交，而不是执行）会变慢。我们怀疑 ThreadPool 在尝试创建新线程来处理任务时遇到了相同的问题“无法创建新的本机线程”，但我们不能确定。

有没有办法从 ExecutorService 内部捕获异常？100% 清楚，我不是在谈论赋予 ExecutorService 的任务，而是来自 ExecutorService 本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T01:51:56.207

`Executors.newCachedThreadPool`创建一个`ThreadPoolExecutor`具有无限的最大线程池大小（注意构造函数的第二个参数）`ThreadPoolExecutor`：

```
public static ExecutorService newCachedThreadPool() {
    return new ThreadPoolExecutor(0, Integer.MAX_VALUE,
                                  60L, TimeUnit.SECONDS,
                                  new SynchronousQueue<Runnable>());
} 
```

这意味着如果您提交任务的速度超过消耗率，将为每个新任务创建新线程，最终它将达到系统限制并抛出“无法创建新的本机线程”异常。

要解决此问题，您需要更改以下配置`ThreadPoolExecutor`：

1.  使用合理的 ThreadPoolExecutor。
2.  `ThreadPoolExecutor`用尽时选择适当的拒绝策略。

例如：

```
ExecutorService executorService = new ThreadPoolExecutor(5,200,
                          60L, TimeUnit.SECONDS,
                          new ArrayBlockingQueue(1000),
                          Executors.defaultThreadFactory(),
                          new ThreadPoolExecutor.CallerRunsPolicy()); 
```

请阅读[JavaDocs](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)了解配置细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T21:51:11.820

您可以使用实现 Runnable 的自定义类，其中包含一组异常，如下所示：

```
public class MyRunnable implements Runnable {
    private List<Exception> exceptions;

    ...

    public void addException(Exception e) { ... }
    public void getExceptions(){ ... }
} 
```

在所有可运行对象完成执行后，您可以检查它们内部的异常并抛出另一个异常作为响应。

# javascript - 如何对不同对象的属性求和？

> ID：15938217
> 
> 赞同：0
> 
> 时间：2013-04-10T23:22:30.357
> 
> 标签：javascript, object

JS菜鸟在这里。如何设置一个变量等于所有三个动物对象的 currentDays 属性的总和？

```
var foods = {

chicken: {
  'days': 1349.5,
  'deaths': 28.63,
  'currentDays': 1349.5,
  'currentDeaths': 28.63
  },

eggs: {
  'days': 456.25,
  'deaths': 1.733,
  'currentDays': 456.25,
  'currentDeaths': 1.733
  },

pork: {
  'days' :112.5,
  'deaths': .445,
  'currentDays': 112.5,
  'currentDeaths': .445
  },

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:25:43.533

```
var key, days = 0;

for (key in food) {
  if ( Object.prototype.hasOwnProperty.call(food, key) ) {
    days += foods[key].currentDays;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:24:30.370

```
var sum = 0;
for (var k in foods) {
    if (foods.hasOwnProperty(k))
        sum += foods[k].currentDays;
} 
```

JSFiddle：http: [//jsfiddle.net/dWCAu/](http://jsfiddle.net/dWCAu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T23:35:51.280

如果您可以依靠最近的 JavaScript 引擎，您可以使用`reduce`该类型的方法`Array`：

```
Object.keys(foods).reduce(function (p,v,i,a) {
    return p + foods[v].currentDays;
}, 0); 
```

# r - 事件日志列表表

> ID：15938221
> 
> 赞同：0
> 
> 时间：2013-04-10T23:23:23.093
> 
> 标签：r, data-mining

所以我不确定在**R**中使用哪个制表函数来解决我的问题。基本上，我有一组数据（一个事件日志），其中包含各种用户 ID 作为参考，然后是每个用户针对每个事件的特定产品。我想为特定用户购买两种不同产品的任何时候创建一个列表表（产品 x 产品），相应的表会得到 +1 .... 即

```
user1  prod2
user2  prod1
user1  prod1 
```

所以基本上输入（prod1，prod2）= 1（和（prod2，prod1）= 1，以及由于对称性）......对角线将是1或0不是超级重要......我可以为这可能会遍历数据，但如果已经有一个功能，我很想知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:19:23.417

Read in the data; use `xtabs` to convert it to a user (rows) by product (columns) table; take the cross product of the table with itself and reduce any element that is more than 1 to 1:

```
# read in data
Lines <- "user1  prod2
user2  prod1
user1  prod1
user3  prod2
user4  prod3
user4  prod2
user5  prod4
"
DF <- read.table(text = Lines)

# compute required matrix
pmin(crossprod(xtabs(~., DF)), 1) 
```

The last line returns:

```
 V2
V2      prod1 prod2 prod3 prod4
  prod1     1     1     0     0
  prod2     1     1     1     0
  prod3     0     1     1     0
  prod4     0     0     0     1 
```

# android - 接收广播意图 ACTION_BATTERY_CHANGED 时出错

> ID：15938223
> 
> 赞同：3
> 
> 时间：2013-04-10T23:23:31.417
> 
> 标签：android, android-intent, broadcastreceiver, batterylevel

我正在尝试通过使用广播接收器获取电池信息并将其存储在数据库中。我宁愿只在我特别想要的时候才得到它，但我愿意保留一个仅包含运行记录的数据库。无论如何，问题是我的应用程序因此错误而崩溃：

```
java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000010 (has extras) }
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:765)
at android.os.Handler.handleCallback(Handler.java:615)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4918)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x7f04006b
at android.content.res.Resources.getText(Resources.java:242)
at android.widget.TextView.setText(TextView.java:3773)
at com.Eddiecubed44.drunk.buddy.Main$2.onReceive(Main.java:180)
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:755) 
```

当我说崩溃时，我的意思是崩溃和燃烧。每次我用这段代码运行它时，我的手机都会自行重启。
我已经使用了调试器，但没有发现错误。我在我的主要活动类中创建广播接收器，如下所示：

```
 BroadcastReceiver batteryReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            int temp = -1;
            TextView tempText;

            tempText = (TextView)findViewById(R.id.mybatttemptxt);
            temp = intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, -1);
            tempText.setText(R.string.temp + temp); 
```

这就是我注册广播接收器的方式。

```
this.registerReceiver(this.batteryReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED)); 
```

我在我的 onStart 方法中执行此操作。问题是，如果我将 this.batteryReceiver 替换为 null，我可以运行我的应用程序，但该应用程序什么也不做。在此应用程序的其他任何地方都不会调用或使用接收器。

如果这很重要，这就是我正在使用的内容：在有根 Galaxy s3 应用程序上的测试使用目标 lvl15 api min 11。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:04:44.877

您的 Main.java 的第 180 行中有一个不存在的资源。

我的猜测是，`R.string.temp`但由于您甚至没有发布文件的名称，所以只是：猜测。

我刚刚看到了麻烦：

```
tempText.setText(R.string.temp + temp); 
```

该[文档](http://developer.android.com/reference/android/widget/TextView.html#setText%28int%29)允许将文本直接设置为残差。但是，通过将 temp 添加到该值，您更改了它并要求不存在的资源。

纠正它的一种方法是：

```
String resourceTemp = context.getString(R.string.temp);
tempText.setText(resourceTemp + " " + temp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:09:39.930

您将资源 id 添加到 temp 并因此更改 id，您应该更改为

```
tempText.setText(context.getString(R.string.temp) + temp); 
```

# phpunit - 如何解决 phpunit 中有关 assertRedirectTo() 以下 zend 框架 2.1 示例的错误，由斜杠引起？

> ID：15938224
> 
> 赞同：0
> 
> 时间：2013-04-10T23:23:32.193
> 
> 标签：phpunit, zend-framework2, zend-route

在成功遵循 Zend Framework 2 [“入门”](http://framework.zend.com/manual/2.1/en/user-guide/overview.html)教程后，我开始了[2.1 版的单元测试示例，](http://framework.zend.com/manual/2.1/en/tutorials/unittesting.html)并且逐字逐句地执行 PHPUnit 失败：

```
Failed asserting response redirects to "/album", actual redirection is "/album/" 
```

这是文件中的相关代码`IndexControllerTest.php`：

```
public function testAddActionRedirectsAfterValidPost() {

    $albumTableMock = $this->getMockBuilder('Album\Models\AlbumTable')
                           ->disableOriginalConstructor()
                           ->getMock();

    $albumTableMock->expects($this->once())
                   ->method('saveAlbum')
                   ->will($this->returnValue(null));

    $serviceManager = $this->getApplicationServiceLocator();
    $serviceManager->setAllowOverride(true);
    $serviceManager->setService('Album\Models\AlbumTable', $albumTableMock);

    $postData = array('title' => 'Led Zeppelin III', 'artist' => 'Led Zeppelin');
    $this->dispatch('/album/add', 'POST', $postData);
    $this->assertResponseStatusCode(302);

    $this->assertRedirectTo('/album');
} 
```

这是我在`addAction()`函数内的内容`AlbumController.php`：

```
 // Redirect to list of albums
            return $this->redirect()->toRoute('album'); 
```

该`.htaccess`文件是 Skeleton Application 附带的文件，并且要彻底，我已经在浏览器中对其进行了测试，`http://localhost/zf2-tut/album`并且`http://localhost/zf2-tut/album/`都可以正确解析，并且在添加条目的过程中，它确实将我重定向回带有斜杠。

我知道这可能有点小气，但我想学习解决此类问题的正确方法。

我知道我可以更改断言测试以包含斜杠，但由于示例没有遵循该示例并且 toRoute() 方法没有斜杠，我假设我的代码或环境中可能出现错误在某个地方，我认为让测试偏离它正在测试的内容是不好的做法。

处理这个问题的最佳方法是什么？如果我在某处进行了更改，导致 url 用尾部斜杠解析，我实际上更喜欢在这种情况下，但希望我的代码是干净的，并且不会留下任何歧义，所以我希望有关路线的任何内容都清楚指示尾随斜杠是预期的。

仅供参考，在遵循教程后，我对我的文件夹结构和命名空间做了一些小改动，根据个人喜好将“模型”更改为“模型”。这绝不会影响这个问题（afaik），但我想指出这一点，所以它不是一个红鲱鱼。

* * *

编辑：在我发布我的问题后不久，通过更多的工作，我意识到在这种情况下尾斜杠是如何附加到我的路线上的，并将其发布在答案中。但是，根据我的回答，我想了解为什么 Zend Framework 2 在它应该是可选的时附加斜线，以及如何使用 PHPUnit 正确测试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:29:27.913

I guess typing all this out jogged something in my memory as I remembered something odd about the routing config from the tutorial when I went through it several days ago.

Sure enough, in [Routing and controllers](http://framework.zend.com/manual/2.1/en/user-guide/routing-and-controllers.html), the example displayed currently shows:

```
'router' => array(
    'routes' => array(
        'album' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/album[/][:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
), 
```

Here, the route shows the trailing slash after *album* encapsulated on it's own, which allows for *optional* matching. However, the paragraph immediately following the example, plus several comments, make reference to the route previously being `/album[/:action][/:id]`. The current implementation has the effect of redirecting to the route with a trailing slash. Despite being optional, the controller puts it there so it fails the phpunit test (which judging by the tutorial section's comments, used to be in this portion of the tutorial but now has it's own separate section).

I've verified that changing the route to the older example does indeed redirect without a trailing slash and therefore the phpunit test passes but I then lose my ability to optionally route to this section with a trailing slash. I would prefer to be able to optionally match on this.

So, the "How is this happening?" question has been resolved but I would really like to know how to test for an optional match or if I should just revise the assertion test to check for a trailing slash here. Also, why does Zend\Mvc (or whichever relevant part of the framework, if otherwise) tack on the trailing slash if it's optional?

# csv - 将 ~500mb csv 文件转换为邻接列表

> ID：15938226
> 
> 赞同：-1
> 
> 时间：2013-04-10T23:23:45.477
> 
> 标签：csv, mapreduce, adjacency-list, large-data

我从 Kickstarter.com 抓取数据。数据格式为 CSV，标题为“backer”和“backed_projects”。“支持者”列存储支持者的所有个人资料 url，“backed_projects”列存储支持者支持的项目列表。该列表由分号分隔。我想在 Gephi 中制作一个网络图，看看是否有一群支持者倾向于支持相同的项目。在图中，如果两个支持者支持同一个项目，他们将通过一条边连接。数据的输入格式必须是支持者和支持相同项目的支持者。

我不确定如何将原始大型 CSV 文件处理为格式支持者 -> 支持相同项目的支持者列表。有什么建议么？

有人知道使用 map reduce 的有效方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:10:05.420

我认为 gawk 不一定能处理这 500mb，但你可以在大多数语言（java、perl 等）中完成同样的事情。我还假设仅列出边缘就可以了，无需将它们重新编译成一行。

我将假设一个像这样的输入文件（“input”）（其中 url 现在是名称）：

```
joe;proj2,proj9,pro8
erin;proj1,proj7,pro8
sue;proj47,pro7
elmo;pro7 
```

运行以下命令：

```
cat input | gawk -F"," '{
    split( $1, arr, ";" );
    printf( "%s;%s\n", arr[1], arr[2] );
    for( i = 2; i <= NF; i++ ) { printf( "%s;%s\n", arr[1], $i ); }
}' 
```

产生以下输出：

```
joe;proj2
joe;proj9
joe;pro8
erin;proj1
erin;proj7
erin;pro8
sue;proj47
sue;pro7
elmo;pro7 
```

[根据gephi csv 格式](https://gephi.org/users/supported-graph-formats/csv-format/)，这些似乎是边缘

或者您可以进一步处理输出。

我不记得 awk/gawk 是否预先消耗了整个文件。如果输出没问题，那么将每一行处理成多行将适用于许多其他语言。

* * *

好的 - 虽然我仍然认为我的第一次尝试更有用，但这是第二个版本，其中所有内容都被稍微重写并包括一个新的 gawk 来制作点文件有向图输出（这让我可以在 Yed 中查看它 - 见评论）。

“输入”文件，如（第一次尝试中的拼写错误在“proj”中删除了“j”）：

```
joe;proj2,proj9,proj8
erin;proj1,proj7,proj8
sue;proj47,proj7
elmo;proj7 
```

用以下内容制作一个可执行文件（我称之为“explode”）：

```
gawk -F"," '
{
count = split( $1, sc, ";" ); 
printf( "%s %s\n", sc[2], sc[1] ); 
for( i = 2; i <= NF; i++ ) { printf( "%s %s\n", $i, sc[1] ); }
}
' 
```

这会更改输出或原始 gawk，因为它将用于排序/提供下一个 gawk 脚本（另一个可执行文件；我称之为“组合”）：

```
gawk -F" " '
BEGIN { printf( "digraph similar_users (\n" );
    project_name = "";
    users = "";
    }

{
if( $1 ~ project_name )
    build_users_string( $2 );
else {
    make_user_nodes( users );
    users = "";
    build_users_string( $2 );
    }
project_name = $1
}

function build_users_string( u )
{
    users = sprintf( "%s%s%s", users, length( users ) == 0 ? "" : " ", u );
}

function make_user_nodes( u )
{
    if( (count = split( u, arr, " " )) <= 1 )
        return 1;
    for( i = 1; i <= count; i++ )
        {
        printf( "%s -> ", arr[ i ] );
        for( j = 1; j <= count; j++ )
            if( j != i )
                {
                end = (i == count ) ? count-1 : count;
                printf( "%s%s", arr[j], j != end ? "," : ";\n" );
                }
        }
    return( count );
}

END { make_user_nodes( users );
    printf( ")\n" );
    }
' 
```

它从“explode”脚本中读取排序后的输入文件，运行时如下：

```
cat input | explode | sort | combine > output.dot 
```

生成文件“output.dot”，其中“user -> 与同一项目关联的用户列表”

```
digraph similar_users (
elmo -> erin,sue;
erin -> elmo,sue;
sue -> elmo,erin;
erin -> joe;
joe -> erin;
) 
```

使用的内存应该只与最后一个脚本中的排序和最大的项目/用户转换一样糟糕，因为它只在项目名称更改时处理按项目分组的用户。更占用内存的“单程”会将所有用户放在 proj -> （用户列表）的地图中，并在最后完成地图的所有处理。请注意，指向单个项目的用户将被删除。

# c++ - 我该如何表达“ = <= “使用特征 3？

> ID：15938229
> 
> 赞同：7
> 
> 时间：2013-04-10T23:24:00.320
> 
> 标签：c++, matlab, eigen, vmat

我正在使用**Eigen 3模板库将一些****MATLAB**代码移植到**C++**，并且我正在为这个常见的**MATLAB**习语寻找一个好的映射：

 ****```
K>> [1 2 3 4 5] <= 3

ans =

     1     1     1     0     0 
```

因此，比较一个数组和一个标量，返回一个具有相同形状的布尔数组。

我知道 Eigen 的**Array**类具有系数比较运算符，但如果我正确解释文档，它们只能与另一个数组一起使用；不是标量值。

是否有一些我错过的选项可以与标量进行比较？或者如果做不到这一点，创建一个形状适当的数组的一种很好的惯用方法，该**数组**填充了表达式的 RHS 的标量值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T00:32:29.730

With thanks to **ChriSopht_** from the `#eigen` IRC channel:

```
VectorXd compareMat = ...;
double cutoff = 3;
Matrix<bool, Dynamic, 1> result = compareMat.array() <= cutoff; 
```

So, the trick is using `.array()` to get at coefficient-wise operators, and of course then getting the return type right…</p>****

# c# - 我需要知道 C# 中毫秒的确切日期

> ID：15938232
> 
> 赞同：-5
> 
> 时间：2013-04-10T23:24:06.517
> 
> 标签：c#, date, datetime

我尝试使用 DateTime.Now，但它显示了带有小时、分钟和秒的日期，但我还需要添加毫秒。我怎么才能得到它？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:29:37.467

DateTime 有毫秒，[MSDN for DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.millisecond.aspx) Even 给出了一个例子：

```
DateTime date1 = DateTime.Now;
Console.WriteLine("Date with milliseconds: {0:MM/dd/yyy hh:mm:ss.fff}", date1); 
```

`fff`格式字符串中的毫秒数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:26:42.270

DateTime.now 或 DateTime.UtcNow 如果您查找它们，则确实包含毫秒。但是，在某些较旧的操作系统上，无法将时间区分到毫秒级别。我曾经有一台运行 Windows Server 2003 的服务器，时间只精确到 15.625 毫秒。

# unity3d - 团结：爬梯子

> ID：15938234
> 
> 赞同：2
> 
> 时间：2013-04-10T23:24:11.190
> 
> 标签：unity3d, unityscript

我一直在 Unity 中开发第一人称游戏，遇到了一个我想添加的功能：爬梯。但是，到目前为止，我一直没有成功编写此代码（顺便说一句，我使用的是 javascript）。下面是一个脚本，我必须测试与梯子的碰撞，但它不起作用：

```
function OnCollisionEnter(collider:Collision){
    if(collider.gameObject.name=="ladder"){
        Debug.Log("hit ladder");
    }
} 
```

从技术上讲，这应该在与梯子发生碰撞时显示调试消息“hit ladder”......但事实并非如此。

有谁知道为什么这不起作用，或者我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T14:54:23.940

派对可能有点晚了，但我走了。

您总是可以制作一个基于触发器的梯子，当控制器向前移动时，它会向上移动。

我发布了一篇博文，解释（没有代码）我如何在旧的演示视频中实现简单的梯子，该视频也可以在帖子中看到。

[http://www.lazr.pw/2014/02/unity-trigger-based-ladders.html](http://www.lazr.pw/2014/02/unity-trigger-based-ladders.html)

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:27:06.463

这里有两件事我可以告诉你。

1.  按照 Steven Mills 的建议使用[CharacterController.OnControllerColliderHit](http://docs.unity3d.com/Documentation/ScriptReference/CharacterController.OnControllerColliderHit.html)，但请注意传递给函数的参数实际上是`ControllerColliderHit`.
2.  而不是检查对撞机的名称，而是比较`Tag`. `GameObject`您所要做的就是为每个`GameObject`您希望拥有此功能的标签分配相同的标签，比如说“梯子”。

这也是一个 C# 示例：

```
void OnControllerColliderHit(ControllerColliderHit hit) {
    if (hit.collider.CompareTag("Ladder")) {
        //Climbing
    }
} 
```

我建议查看上面的链接以获取更多信息。这是因为您可能想要执行额外的检查，例如玩家在哪里与梯子发生碰撞。这是因为您可能不想从梯子的侧面爬梯子（当然，除非*梯子*是*绳索*或类似的东西）。你还需要一种方法来告诉玩家已经完成了爬上/爬下梯子。当您的脚高于梯子顶部时，您可能不想继续爬梯子；）。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:36:16.770

由于此脚本正在寻找与梯子的碰撞，因此我假设脚本在角色内。如果脚本在您的梯子内，那么...问题出在 :P

在任何情况下，如果这在您的角色中，并且您可能正在使用 CharacterController 来移动他，则`OnCollisionEnter`不会触发。您需要使用`OnControllerColliderHit(collider:Collision) { ... }`并将碰撞检测放在其中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-14T12:58:21.080

1.  使用 OnTriggerEnter(Collider) 代替（不要忘记将梯子设置为触发器！）
2.  使用刚体（非运动学的）而不是角色控制器。文档说“只有当其中一个对撞机还附加了非运动刚体时才会发送碰撞事件。”

# php - 概念 - 基于 URL 路径提供动态内容？

> ID：15938238
> 
> 赞同：0
> 
> 时间：2013-04-10T23:24:22.943
> 
> 标签：php, javascript

例如，

用户输入，

```
www.foob.com/some_path 
```

我不想为用户可能使用的每个不同的标识符创建一个 some_path 文件夹……例如，如果它是一个人的名字，就像在许多社交应用程序中看到的那样。

```
www.foob.com/some_path1 
```

但是，我想将其作为变量读入并提供相关内容

JavaScript

```
var foo = 'some_path1' 
```

PHP

```
$foo = 'some_path1'; 
```

如何将“some_path1”放入 foo？

**笔记**

some_path 是一个变量，它可能包含

```
some_path_1
some_path_2
some_path_3 
```

澄清

所以以facebook.com为例

如果你去

```
www.facebook.com/your_name 
```

并不是所有 10 亿用户都有一个不同的目录。

提供一个通用页面，其中填充了用户特定的数据。

我如何获得 id your_name？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:27:43.667

您需要设置`www.foob.com/some_path`为指向您的[.htaccess](http://en.wikipedia.org/wiki/Htaccess)文件`index.php?q=some_path`中具有或类似内容的 PHP 脚本 URL：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9-z\-]+)$ index.php?q=$1 
```

`$_GET['q']`然后只需根据PHP 文件提供不同的内容即可。

或在 Javascript 中使用它：

```
echo '<script>...var q = ' . $_GET['q'] . ';</script>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:31:46.517

您可以使用`$_SERVER['REQUEST_URI']`PHP 来获取此信息。如果您想在 JavaScript 中使用它，请查看`window.location`对象（可能是`window.location.href`或`window.location.pathname`）。不过，两者都可能需要一些解析才能仅获取您想要的部分。

关于将这些请求发送到您的脚本的重写规则，我会使用类似这样的东西，它将重定向所有通过 app.php 在其他地方找不到的文件的请求。这应该放在站点根目录的 .htaccess 文件中。

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T23:29:17.967

将[.htaccess](http://httpd.apache.org/docs/2.2/howto/htaccess.html)文件添加到您的根目录。

***.htaccess***

```
RewriteEngine On

RewriteRule ^([A-Za-z0-9-]+)/?$ index.php?page=$1   [L] 
```

您可以在`index.php`页面顶部添加与此类似的内容：

```
<html>
  <head>
    <title> MyWebsite <?php echo '~'.ucwords($desired_page); ?> </title>
    <?php
        $page_array = array(
          "home", "blog", "news",
          "links", "about", "contact"
        );

        $desired_page = (isset($_REQUEST['page'])) ? 
          $_REQUEST['page'] : "home";

        if(!in_array($desired_page, $page_array))
          $desired_page = "error";
    ?>
  </head>
  <body>
      <div id="menu">
        <ul>
          <li <?php if($desired_page=="home")
              echo("class=\"current\""); ?>>
            <a href="home">Home</a></li>
          <li <?php if($desired_page=="blog")
              echo("class=\"current\""); ?>>
            <a href="blog">Blog</a></li>
          <li <?php if($desired_page=="news")
              echo("class=\"current\""); ?>>
            <a href="news">News</a></li>
          <li <?php if($desired_page=="links")
              echo("class=\"current\""); ?>>
            <a href="links">Links</a></li>
          <li <?php if($desired_page=="about")
              echo("class=\"current\""); ?>>
            <a href="about">About Us</a></li>
          <li <?php if($desired_page=="contact")
              echo("class=\"current\""); ?>>
            <a href="contact">Contact Us</a></li>
        </ul>
      </div><!--end menu-->

      <div id="content">
        <?php
          /*Includes specific page content*/
          include("content/".$desired_page.".php");
        ?>
      </div> <!-- end #content -->
  </body>
</html> 
```

# c# - 任务结果到单个列表中

> ID：15938254
> 
> 赞同：3
> 
> 时间：2013-04-10T23:25:58.127
> 
> 标签：c#, multithreading, c#-4.0, task-parallel-library

我的 WCF 服务中有以下方法：

```
public List<string> ProcessTask(IEnumerable<string> data)
{             
    var contentTasks = ..........
    List<string> contentWeb = new List<string>();

    Task.Factory.ContinueWhenAll(contentTasks, tasks =>
    {
        foreach (var task in tasks)
        {
            if (task.IsFaulted)
            {
                Trace.TraceError(task.Exception.GetBaseException().Message);
                continue;
            }

            if (task.Result == null || String.IsNullOrEmpty(task.Result.Content))
            {
               continue;
            }

            contentWeb.Add(task.Result.Content);
        }
    });
} 
```

如何返回`Result.Content`所有任务中的字符串列表？这些任务是异步任务，所以基本上我必须等到所有任务都完成后才能返回结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:30:46.703

你应该返回一个`Task<List<string>>`：

```
public Task<List<string>> ProcessTasksAsync(IEnumerable<string> data)
{
    var contentTasks = ..........
    return Task.Factory.ContinueWhenAll(contentTasks, tasks =>
    {
        var contentWeb = new List<string>(); // Build this in the continuation
        foreach (var task in tasks)
        {
            // ...same code...

            contentWeb.Add(task.Result.Content);

        }
        return contentWeb; // Set the task's result here
    });
} 
```

由于这是一个 WCF 服务，您可以使用该方法通过返回方法中的in并解开方法中的in`Task<T>`来[实现异步方法对](http://blogs.msdn.com/b/rjacobs/archive/2011/06/30/how-to-implement-a-wcf-asynchronous-service-operation-with-task-lt-t-gt.aspx)。`Task<T>``Begin***``Task<T>``End***`

这使得该方法以适当的方式异步。

请注意，这在 C# 5 中使用`async`/容易得多`await`：

```
public async Task<List<string>> ProcessTasksAsync(IEnumerable<string> data)
{
    var contentTasks = ..........

    await Task.WhenAll(contentTasks);

    var contentWeb = new List<string>(); // Build this in the continuation
    foreach (var task in contentTasks)
    { 
        // ...same code...

        contentWeb.Add(task.Result.Content);
    }

    return contentWeb;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:49:15.260

而不是 continuewhenall 我不得不使用 Task.WaitAll(contentTasks);

# oracle10g - Oracle Forms 10g 自动查询

> ID：15938259
> 
> 赞同：1
> 
> 时间：2013-04-10T23:26:25.650
> 
> 标签：oracle10g, oracleforms

我正在创建一个由数据块查询填充的表单。

假设我有一个 EMPLOYEE 表，其中包含“ID”和“NAME”列。

从 EMPLOYEE 中选择 ID、NAME；

如何在表单加载时自动触发它（并且是否有设计用于执行此操作的属性或触发器？）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:51:12.990

没有自动执行此操作的方法，因此您需要导航到数据库块（如果此块不是表单的第一个导航数据块），然后执行查询表单表单内置的 Execute_Query。例如，这可以在表单级触发器When-New-Form-Instance 中完成：

```
Go_Block(<name of your database block>);

Execute_Query; 
```

# python - tornado.database Importerror：没有名为数据库的模块

> ID：15938260
> 
> 赞同：1
> 
> 时间：2013-04-10T23:26:35.463
> 
> 标签：python, heroku, tornado

我正在使用 Bret Taylor 的“socialcookbook”（[https://github.com/finiteloop/socialcookbook](https://github.com/finiteloop/socialcookbook)）的一个分支，它使用“import tornado.database”——直到昨天（3.01 版本？）它一直运行良好，现在我'当我在 Heroku 上编译（使用 Python）时，我得到一个 ImportError: no module named database。

我的**requirements.txt**文件很简单：

```
mysql-python
tornado 
```

我的**进口**声明：

```
import base64
import datetime
import functools
import json
import hashlib
import hmac
import time
import logging
import os
import smtplib #for mandrill email notifications
import httplib #for custom error handler
import re
import string
import tornado.database
import tornado.escape
import tornado.httpclient
import tornado.ioloop
import tornado.web
import urllib
import urllib2
import urlparse
from tornado.options import define, options
import facebook 
```

有什么想法吗？我很难解决这个问题，而且我无法推送新版本（如果我在 Heroku 上回滚，旧版本可以正常工作，不过，奇怪的是......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T23:35:05.743

事实证明，Tornado 3.0 已弃用 tornado.database 并将其替换为 torndb：[https ://github.com/bdarnell/torndb](https://github.com/bdarnell/torndb)

所以解决方法是简单地将所有 tornado.database 引用替换为 torndb 并将 torndb 添加到 requirements.txt 文件中。

# php - jquery和html拖放图片上传

> ID：15938264
> 
> 赞同：0
> 
> 时间：2013-04-10T23:26:53.613
> 
> 标签：php, jquery

我一直在使用这个 jquery 和 html 图像上传脚本没有任何问题，该脚本允许用户将图像拖到目标区域并将其放置，然后上传图像并显示它。

我的问题是它现在停止工作，我不知道为什么（我没有改变任何我知道的东西）

它也从未在 Firefox 中工作过，用户无法通过选择文件或拖放来上传。所以我的另一个问题是它为什么停止工作以及为什么它在 Firefox 中完全没有响应，也许它只是我使用的可以更改的一行代码，我真的不知道，但我希望有人可能有一些想法，谢谢。

索引.php：

```
 <!-- jquery -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js" type="text/javascript"></script>
        <div id="devcontainer">
            <!-- development area -->
            <script src="droparea.js"></script>
            <style>
                .droparea {
                    position:relative;
                    text-align: center;
                    width:180px;
                    height:190px;
                    margin-left:-5px;
                }
                .multiple {
                    position:relative;
                    height: 20px;
                }
                .droparea div, .droparea input, .multiple div, .multiple input {
                    position: absolute;
                    top:0;
                    width: 180px;
                    height: 190px;
                }
                .droparea input, .multiple input {
                    cursor: pointer; 
                    opacity: 0; 
                }

                .droparea {
                    border: none;
                    color:#666;
                    background-color:#FFFFFF;
                    font-size: 0px;
    font-family: "lucida grande", tahoma, verdana, arial, sans-serif;
    width:180px;
                    height:190px;
                }

                .instructions {
                    padding-top:90px;
                    padding-left:0px;
                    color:#666;
                    text-align:center;
                    font-size: 14px;
    font-family: "lucida grande", tahoma, verdana, arial, sans-serif;
    height:180px;
    width:190px;

                }

                .droparea .progress, .multiple .progress {
                    position:absolute;
                    bottom: 0;
                    width: 180px;
                    height: 190px;
                    color: #fff;
                    background-image:url(../../assets/img/effects/wait.jpg)

                }
                .multiple .progress {
                    width: 180px;
                    height: 190px;
                }

                #areas { float: left; width: 180px; height:190px;}
                div.spot {
                    float: left;
                    margin-left: -4px;
                    margin-top:-4px;

                }
                .thumb {
                    float: left;
                    margin:0 0px 0px 0;
                    width: 180px;
                    min-height: 190px;
                }
                .desc {
                    float:left;
                    width: 180px;
                    height:190px;
                }
                .signature a { color:#555; text-decoration:none; }
                .signature img { margin-right:0px; vertical-align: middle; }
                input[type=text], textarea {
                    margin-bottom: 10px;
                    padding: 0px;
                    width: 180px;
                    height: 190px;
                    border: 1px solid #bbb;
                }
                textarea {
                    height: 58px;
                }
                input[type=submit] {
                    float: right;
                    margin-right: 20px;
                    padding: 5px 25px;
                    color: #111;
                    border: 1px solid #666;
                    background: #888;
                    width:180px;
                    height:190px;
                }
                h3 { clear: both; padding:5px 0; }
                #sampleform { width: 180px; width:190px; }
            </style>

            <div id="areas">

                <input type="file" class="droparea spot" name="xfile" data-post="upload.php" data-width="180" data-height="190" data-crop="true"/>

                <form id="sampleform" action="post.php" method="post">

                </form>
                <script>
                    $('#sampleform').submit(function(e){
                        e.preventDefault();
                        $.ajax({
                            url:$(this).attr('action'),
                            type:'post',
                            data:$(this).serialize(),
                            dataType:'json',
                            success:function(r){
                                $('#form-result').append(
                                '<div><b>Title: </b>'+r.title+'</div>'
                                ,'<div><b>Description: </b>'+r.description+'</div>'
                                ,'<div><b>Image/File: </b>'
                                  +'<a href="'+ r.url +'" target="_blank">'+ r.url +'</a>'
                                  +'</div>'
                                );
                            }
                        });
                });
                </script>
            </div>

            <script>
            // Calling jQuery "droparea" plugin
            $('.droparea').droparea({
                'init' : function(result){
                    //console.log('custom init',result);
                },
                'start' : function(area){
                    area.find('.error').remove(); 
                },
                'error' : function(result, input, area){
                    $('<div class="error">').html(result.error).prependTo(area); 
                    return 0;
                    //console.log('custom error',result.error);
                },
                'complete' : function(result, file, input, area){
                    if((/image/i).test(file.type)){
                        area.find('img').remove();
                        //area.data('value',result.filename);
                        area.append($('<img>',{'src': result.path + result.filename + '?' + Math.random()}));
                    } 
                    //console.log('custom complete',result);
                }
            });
            </script>

            <!-- /development area -->
        </div> 
```

post.php：

```
<?php

// LOG
$log = '=== ' . @date('Y-m-d H:i:s') . ' ===============================' . "\n"
        . 'FILES:' . print_r($_FILES, 1) . "\n"
        . 'POST:' . print_r($_POST, 1) . "\n";
$fp = fopen('post-log.txt', 'a');
fwrite($fp, $log);
fclose($fp);

// Result object
$r = new stdClass();
// Result content type
header('content-type: application/json');

$data = $_POST['thumbnail'];
unset($_POST['thumbnail']);

if($data){

  // Uploading folder
    $folder = '../'. '../'. 'data/'. 'photos/'. $_SESSION['user_id'] . '/';
    if (!is_dir($folder))
        mkdir($folder);

    // If specifics folder 
    $folder .= $_POST['folder'] ? $_POST['folder'] . '/' : '';
    if (!is_dir($folder))
        mkdir($folder);

    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . sha1(@microtime() . '-' . $_POST['_default']) . '.jpg';

    $data = split(',', $data);
    file_put_contents($filename, base64_decode($data[1]));

}
die(json_encode(array_merge(array('url' => $filename), $_POST)));

?> 
```

上传.php：

```
<?php
session_start()
?>
<?

// LOG
$log = '=== ' . @date('Y-m-d H:i:s') . ' ===============================' . "\n"
        . 'FILES:' . print_r($_FILES, 1) . "\n"
        . 'POST:' . print_r($_POST, 1) . "\n";
$fp = fopen('upload-log.txt', 'a');
fwrite($fp, $log);
fclose($fp);

// Result object
$r = new stdClass();
// Result content type
header('content-type: application/json');

// Maximum file size
$maxsize = 10; //Mb
// File size control
if ($_FILES['xfile']['size'] > ($maxsize * 1048576)) {
    $r->error = "Max file size: $maxsize Kb";
}

// Uploading folder
$folder = '../'. '../'. 'data/'. 'photos/'. $_SESSION['user_id'] . '/';
if (!is_dir($folder))
    mkdir($folder);

// If specifics folder 
$folder .= $_POST['folder'] ? $_POST['folder'] . '/' : '';
if (!is_dir($folder))
    mkdir($folder);

// PASS USER_ID HERE
$folder2 = '../'. '../'. 'data/'. 'photos/'. $_SESSION['user_id'] . '/';
if (!is_dir($folder2))
    mkdir($folder2);

// New directory with 'files/USER_SESSION_ID/'
$folder = $newDir . $folder2;

// If the file is an image
if (preg_match('/image/i', $_FILES['xfile']['type'])) {

    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . '_default.jpg';
} else {

    $tld = split(',', $_FILES['xfile']['name']);
    $tld = $tld[count($tld) - 1];
    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . sha1(@microtime() . '-' . $_FILES['xfile']['name']) . $tld;
}

// Supporting image file types
$types = Array('image/png', 'image/gif', 'image/jpeg');
// File type control
if (in_array($_FILES['xfile']['type'], $types)) {
    // Create an unique file name    
    // Uploaded file source
    $source = file_get_contents($_FILES["xfile"]["tmp_name"]);
    // Image resize
    imageresize($source, $filename, $_POST['width'], $_POST['height'], $_POST['crop'], $_POST['quality']);
} else
// If the file is not an image
if (in_array($_FILES['xfile']['type'], $types)) 
    move_uploaded_file($_FILES["xfile"]["tmp_name"], $filename);

// File path
$path = str_replace('upload.php', '', $_SERVER['SCRIPT_NAME']);

// Result data
$r->filename = $filename;
$r->path = $path;
$r->img = '<img src="' . $path . $filename . '" alt="image" />';

// Return to JSON
echo json_encode($r);

// Image resize function with php + gd2 lib
function imageresize($source, $destination, $width = 0, $height = 0, $crop = false, $quality = 100) {
    $quality = $quality ? $quality : 100;
    $image = imagecreatefromstring($source);
    if ($image) {
        // Get dimensions
        $w = imagesx($image);
        $h = imagesy($image);
        if (($width && $w > $width) || ($height && $h > $height)) {
            $ratio = $w / $h;
            if (($ratio >= 1 || $height == 0) && $width && !$crop) {
                $new_height = $width / $ratio;
                $new_width = $width;
            } elseif ($crop && $ratio <= ($width / $height)) {
                $new_height = $width / $ratio;
                $new_width = $width;
            } else {
                $new_width = $height * $ratio;
                $new_height = $height;
            }
        } else {
            $new_width = $w;
            $new_height = $h;
        }
        $x_mid = $new_width * .5;  //horizontal middle
        $y_mid = $new_height * .5; //vertical middle
        // Resample
        error_log('height: ' . $new_height . ' - width: ' . $new_width);
        $new = imagecreatetruecolor(round($new_width), round($new_height));
        imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $w, $h);
        // Crop
        if ($crop) {
            $crop = imagecreatetruecolor($width ? $width : $new_width, $height ? $height : $new_height);
            imagecopyresampled($crop, $new, 0, 0, ($x_mid - ($width * .5)), 0, $width, $height, $width, $height);
            //($y_mid - ($height * .5))
        }
        // Output
        // Enable interlancing [for progressive JPEG]
        imageinterlace($crop ? $crop : $new, true);

        $dext = strtolower(pathinfo($destination, PATHINFO_EXTENSION));
        if ($dext == '') {
            $dext = $ext;
            $destination .= '.' . $ext;
        }
        switch ($dext) {
            case 'jpeg':
            case 'jpg':
            $jpgQuality = ($quality - 100) / 11.111111;
            $jpegQuality = ($quality - 100) / 11.111111;
                imagejpeg($crop ? $crop : $new, $destination, $quality);
                break;
            case 'png':
                $pngQuality = ($quality - 100) / 11.111111;
                $pngQuality = round(abs($pngQuality));
                imagepng($crop ? $crop : $new, $destination, $pngQuality);
                break;
            case 'gif':
                imagegif($crop ? $crop : $new, $destination);
                break;
        }
        @imagedestroy($image);
        @imagedestroy($new);
        @imagedestroy($crop);
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:30:15.213

尝试使用更现代的 jQuery 版本。您不必一直到 1.9，但您至少应该尝试将自己提升到 1.7.2。我建议您尝试升级到 1.8.2，但 1.7.2 应该足够了。我什至不认为 1.5.2 支持拖放，但我可能弄错了。

将您的第二行更改为：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script> 
```

**更新**

抱歉，我忘了你还需要参考 jQuery UI。查看来自 jQuery 的[Draggable API 参考](http://jqueryui.com/draggable/)，以及这个[jQuery Draggable 教程](http://www.elated.com/articles/drag-and-drop-with-jquery-your-essential-guide/)。

# c# - 如何打开列表框中显示的文件？

> ID：15938267
> 
> 赞同：2
> 
> 时间：2013-04-10T23:27:27.573
> 
> 标签：c#, file-io, listbox

我已将所有启动程序添加到列表框中。选择项目并单击按钮时如何打开文件？

列表框代码：

```
private void readfiles()
{
    string startfolder = Environment.GetFolderPath(Environment.SpecialFolder.Startup);

    var files = Directory.GetFiles(startfolder).Where(name => !name.EndsWith(".ini"));

    foreach (string file in files)
    {
        startupinfo.Items.Add(System.IO.Path.GetFileName(file));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:37:33.100

我不知道您要打开什么文件类型，但这是您获取所选项目的方式。

```
Dictionary<string, string> startupinfoDict = new Dictionary<string, string>();
    private void readfiles()
    {
        string startfolder = Environment.GetFolderPath(Environment.SpecialFolder.Startup);

        var files = Directory.GetFiles(startfolder).Where(name => !name.EndsWith(".ini"));

        foreach (string file in files)
        {
            startupinfo.Items.Add(Path.GetFileNameWithoutExtension(file));
            startupinfoDict.Add(Path.GetFileNameWithoutExtension(file), file);
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (listBox1.SelectedItem != null)
        {
            string s = listBox1.SelectedItem.ToString();

            if (startupinfoDict.ContainsKey(s))
            {
                Process.Start(startupinfoDict[s]);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:38:10.397

获取当前选择的列表框项并假设应用程序与文件耦合（使用扩展名）：

```
Process.Start(fileName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T23:36:02.520

[`SelectedValue`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvalue.aspx)您可以通过使用列表框的属性来获取所选项目。

您可以使用[`Process.Start`](http://msdn.microsoft.com/en-nz/library/53ezey2s.aspx).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T23:41:53.433

您将启动一个新进程，声明要在您的按钮单击处理程序中执行/打开的文件的路径：

```
Process.Start(@" <path to file> "); 
```

如果列表框中的选定值是文件路径，则：

```
Process.Start(<name of list box>.SelectedValue); 
```

编辑：

改变你的 foreach 循环如下：

```
foreach (string file in files)
{
    startupinfo.Items.Add(System.IO.Path.GetFullPath(file) + @"\" + System.IO.Path.GetFileName(file));
} 
```

# emacs - 是否有一个关于键绑定的 emacs 百科全书？

> ID：15938272
> 
> 赞同：7
> 
> 时间：2013-04-10T23:28:05.840
> 
> 标签：emacs

这是 Emacs 中的一个常见场景：我想将一个函数绑定到一个键，但我不确定它是否可能与现有的键绑定（易于检查）或“流行”模块中的键绑定（难以检查，什么是*“流行”？*）

如果有一本百科全书就好了：如果我查一下`C-c C-t`，我会发现它一定会：

*   `org-todo`在`org-mode`
*   `sgml-tag`在`sgml-mode`
*   ...

有没有这样的事情？我知道我可以`C-c A`通过`C-c-Z`等方式使用，但有时不必按下并释放`Ctrl`键也很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T02:23:36.820

我从来没有遇到过这种事情的资源。包作者可以完全自由地添加和更改键绑定，无论是在他们自己的键映射中还是在全局键映射中。维护索引会很困难。

Emacs 可以动态加载功能，因此活动的键盘命令也是动态的，并且受制于您已安装的功能和`required`. 例如，如果您不需要 paredit，您将无法检查其键盘映射。

`M-x describe-bindings`将告诉您 Emacs 当前已加载的键绑定。这是一个很长的清单！下面的`show-key-bindings`函数会将其缩减为使用修饰键的绑定。

```
(defun get-bindings ()
  (with-temp-buffer
    (describe-buffer-bindings (current-buffer))
    (buffer-string)))

(defun format-binding (b)
  (let ((ws (split-string b))) 
    (apply 'format "%s\t%s" (butlast ws) (last ws))))

(defun binding? (str)
  (string-match-p (rx bol (any "C" "M" "H" "S")) str))

(defun join-string-lines (lines)
  (mapconcat 'identity lines "\n"))

(defun show-key-bindings ()
  "Show the active keybindings for the current buffer."
  (interactive)
  (let* ((bs  (split-string (get-bindings) "\n" t))
         (fmt (mapcar 'format-binding (remove-if-not 'binding? bs))))
    (save-excursion
      (let ((help-window-select t))
        (with-help-window  "*active bindings*"
          (princ (join-string-lines fmt))))))) 
```

* * *

回顾一下，您可以使用一些函数来设置绑定：

*   `global-set-key`

    当您希望某些命令始终可用时使用此选项。

*   `local-set-key`

    设置当前缓冲区的键值。我喜欢在我的钩子中使用它来使键绑定可用于特定模式。

*   `define-key`

    将命令添加到键盘映射。键盘映射必须已经绑定，因此这往往太脆弱而无法在您的配置中使用。

如果您担心在您的 emacs 配置中意外覆盖模式的绑定，最简单的做法是确定您是否真的需要将命令设置为*global*。尽可能使用`local-set-key`。

`M-x package-install key-chord`如果您发现您的键用完了，您还可以查看 key-chord ( ) 之类的包，或者使用自定义键映射定义您自己的次要模式。

* * *

使用一些精湛的 shell 脚本或 elisp，应该可以解析 elisp 文件列表并提取它们定义的键绑定。我以后可能会调查一下。

同时，以下 unix shell 命令将在目录树中找到对上述键绑定形式的所有引用。您可以在 .emacs.d 中运行它来检查 elpa 包中设置的键绑定。

```
tree -fxi -P '*.el' | xargs egrep -s 'local-set-key|define-key|global-set-key' 
```

# c# - 使用图表控件在两点之间绘制一条线

> ID：15938278
> 
> 赞同：3
> 
> 时间：2013-04-10T23:28:44.710
> 
> 标签：c#, winforms, c#-4.0

如何在附图中的点 (3,3) 和点 (1,1) 之间画一条线。

这是一个图表控件。使用 c# 的 WinForms 应用程序

![图表示例](https://i.stack.imgur.com/8Pnyc.png)

```
private void Form1_Load(object sender, EventArgs e)
{

    //chart1 is the name of the chart control
    chart1.ChartAreas.Add("Area");
    chart1.ChartAreas["Area"].AxisX.Minimum = 0;
    chart1.ChartAreas["Area"].AxisX.Maximum = 10;
    chart1.ChartAreas["Area"].AxisX.Interval = 1;
    chart1.ChartAreas["Area"].AxisY.Minimum = 0;
    chart1.ChartAreas["Area"].AxisY.Maximum = 10;
    chart1.ChartAreas["Area"].AxisY.Interval = 1;

    chart1.Series.Add("Node");
    chart1.Series.Add("DG");
    chart1.Series["Node"].Color = Color.Blue;
    chart1.Series["DG"].Color = Color.Red;

    chart1.Series["Node"].Points.Add(new DataPoint(1, 1));
    chart1.Series["Node"].Points.Add(new DataPoint(8, 2));
    chart1.Series["DG"].Points.Add(new DataPoint(3, 3));

    chart1.Series["Node"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Point;
    chart1.Series["DG"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Point;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T23:41:03.600

这应该这样做；

```
 chart1.Series.Add("Line");
        chart1.Series["Line"].Points.Add(new DataPoint(1, 1));
        chart1.Series["Line"].Points.Add(new DataPoint(3, 3));
        chart1.Series["Line"].ChartType = SeriesChartType.Line; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T02:21:43.780

这个版本的弗雷杜回答对我有用：

```
chart1.Series.Add("Line");
chart1.Series["Line"].Points.AddXY( x, y);
chart1.Series["Line"].Points.AddXY( x, y);
chart1.Series["Line"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Line; 
```

# soundmanager2 - 使用 soundmanager2 预加载声音

> ID：15938279
> 
> 赞同：4
> 
> 时间：2013-04-10T23:28:52.287
> 
> 标签：soundmanager2

在使用 soundmanager 2 时，如果您知道将要播放的下一首和上一首曲目是什么，则有一种方法可以预加载曲目。这当然会加快用户在声音之间切换的加载时间。在文档中有一个功能`autoLoad()`，`load()`我不确定应该使用哪个功能来实现预加载音乐。

我还应该问什么时候开始我在`whileplaying()`函数中考虑的预加载的最佳时间。

任何反馈将不胜感激

# php - Braintree - 使用过期信用卡创建订阅不会导致错误

> ID：15938280
> 
> 赞同：3
> 
> 时间：2013-04-10T23:28:57.407
> 
> 标签：php, credit-card, braintree

我正在尝试使用 Braintree 和 PHP 测试订阅。我能够成功发布交易，但我在订阅方面遇到了这个问题。

以下是我的步骤：
1\. 创建附有信用卡
的客户 2\. 为客户创建订阅

问题：
即使我提供的信用卡的有效期为 2013 年 1 月，第 1 步或第 2 步都会成功。

我遵循了 Braintree 上给出的教程，没有运气或文档帮助。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T15:22:41.297

[我在布伦特里工作。如果您需要更详细的帮助，请随时[联系我们的支持团队。](https://www.braintreepayments.com/support)]

我们不会在沙盒环境中检查到期日期。如果我们这样做了，并且您在测试中硬编码了到期日期，那么他们可能会在该日期过去后失败。

相反，您[使用等于所需处理器响应代码的数量](https://www.braintreepayments.com/docs/php/reference/sandbox#test_amounts_for_unsuccessful_transactions)来模拟故障：

> ## 不成功交易的测试金额
> 
> 处理交易时，您可以传递特定数量来模拟来自网关的不同响应。
> 
> *   0.01 美元 - 1999.99 美元之间的金额将模拟成功授权
> *   2000.00 美元 - 2060.99 美元和 3000.00 美元 - 3000.99 美元之间的金额将随着 > - 协调处理器响应而下降
> *   2061.00 美元 - 2999.99 美元之间的金额将模拟通用拒绝消息“处理器已拒绝”。</li>
> *   3001.00 美元及以上的金额也将模拟成功授权

过期卡是[处理器响应代码 2004](https://www.braintreepayments.com/docs/php/reference/processor_responses#decline_codes)：

```
代码文本
2000 不敬
2001 资金不足
2002 超出限制
2003 持卡人活动超限
2004 过期卡

```

因此，将您的订阅金额设置为 $2004.00 将导致它失败，就好像卡已过期，无论您使用的过期日期如何。

这样，您可以编写一次测试，即使在任何到期日期过后，它们也可以继续工作。

# php - 根据单击的链接更改隐藏 div 的内容

> ID：15938281
> 
> 赞同：0
> 
> 时间：2013-04-10T23:28:59.893
> 
> 标签：php, javascript, jquery, css

我正在建立一个网站，管理员可以在其中为网站进行设置。我希望管理设置页面与网站的其他部分有类似的“感觉”，它有一些漂亮的 jQuery 功能。

在管理站点上有一个隐藏的 div，当单击六个链接之一时会显示该 div。我希望隐藏 div 的内容在显示之前更改内容。我不知道该怎么做。我可以为页面上的每个链接设置一个 div 框。但这变得非常麻烦，因为我需要为每个链接重复我的 css 和 jquery。我想这可以通过一些 javascript/jquery 代码来完成，该代码确定哪个链接被点击，然后决定在隐藏的 div 中调用哪个 php 函数。然后 php 可以“回显”出 div 的内容，然后可以显示出来。

怎么可能做到这一点？

我的 HTML/jQuery 代码如下：

--- html 链接 ---

```
<table id="settings">
<tr>    
<td>
<a href="#" class="action"><img src="images/folder.gif" alt="" height="100"/></a>
</td>

<td>
<a href="#" class="action"><img src="images/folder.gif" alt="" height="100"/></a>
</td>
<td>
<a href="#" class="action"><img src="images/folder.gif" alt="" height="100"/></a>
</td> 
```

----- 隐藏的 div -----

```
<div id="dashboard_box">
<div class="dashboard_inside">
    <form action="#" method="post">
        <p style="font-size:20px; font-weight: bold;">Change color</p>
        </br>
        <fieldset>

            <? load_content1();?>

        </fieldset>
    </form>
</div>
</div> 
```

---- jquery代码（工作）----

```
var mouse_is_inside = false;

$(document).ready(function() {
$(".action").click(function() {
    var loginBox = $("#dashboard_box");
    if (loginBox.is(":visible"))
        loginBox.fadeOut("fast");
    else
        loginBox.fadeIn("fast");
    return false;
});

$("#dashboard_box").hover(function(){ 
    mouse_is_inside=true; 
}, function(){ 
    mouse_is_inside=false; 
});

$("body").click(function(){
    if(! mouse_is_inside) $("#dashboard_box").fadeOut("fast");
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:45:44.680

您可能想使用 ajax 从服务器加载内容。看看 jquery 的 .load() 方法：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

您可以在每个链接中包含一个数据属性：

```
<a class="action" data-content="content.php?method=load_content1"></a>
<a class="action" data-content="content.php?method=load_content2"></a> 
```

js 看起来像这样：

```
$(".action").on('click', function() {    
    $("#dashboard_box fieldset").load($(this).data('content'), function() {
      var loginBox = $("#dashboard_box");
      if (loginBox.is(":visible"))
        loginBox.fadeOut("fast");
      else
        loginBox.fadeIn("fast");
    }
    return false;

}); 
```

然后，在您的 content.php 文件中，您可以检查 url 中的方法参数以确定要返回的内容。

我的 php 有点生锈了，但是是这样的：

```
<?
  call_user_func($_GET['method']); // i'm not sure how safe this is. you may want to be more explicit
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:34:16.917

您可以在每个链接中添加数据属性

```
<a href="#" data-url="content1.php" .. 
```

然后单击任何一个，`a`您都可以获得要调用的 php。

```
$('a').on('click',function(){
    var phpFunctionToCall = $(this).data('url');
}); 
```

您可能需要进行 ajax 调用以将内容加载到您的字段集中，因为此`<? load_content1();?>`运行在服务器上并且 javascript 无法控制它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:41:24.257

感谢所有的帮助。这就是我最终要做的。

--- HTML ---

```
<a class="action" data-content="content.php?method=load_content2"></a> 
```

---jQuery---

```
var mouse_is_inside = false;

$(document).ready(function() {

$(".action").click(function() {

    var phpFunctionToCall = $(this).data('content');
    $('#indhold').load(phpFunctionToCall);

    var loginBox = $("#dashboard_box");
    if (loginBox.is(":visible"))
        loginBox.fadeOut("fast");
    else
        loginBox.fadeIn("fast");
    return false;

});

$("#dashboard_box").hover(function(){ 
    mouse_is_inside=true; 
}, function(){ 
    mouse_is_inside=false; 
});

$("body").click(function(){
    if(! mouse_is_inside) $("#dashboard_box").fadeOut("fast");
});

}); 
```

--- PHP（缩短）---

```
function load_settings_panel($settingOnRequest) {

return $settingOnRequest;

}

$result = call_user_func('load_settings_panel', $_GET['method']);
echo($result); 
```

# php - PHP 函数中的 register_sidebar 和 dynamic_sidebar() 不起作用

> ID：15938284
> 
> 赞同：1
> 
> 时间：2013-04-10T23:29:04.027
> 
> 标签：php, wordpress, sidebar

我正在将`register_sidebar`函数添加到我的`functions.php`文件中，如下所示：

```
 <?php
add_action( 'after_setup_theme', 'handheld_setup' );
if ( ! function_exists( 'handheld_setup' ) ){
    function handheld_setup(){
        global $et_mobile_theme_options;

        load_theme_textdomain( 'HandHeld', TEMPLATEPATH . '/languages' );

        add_action( 'wp_ajax_nopriv_et_show_ajax_posts', 'et_show_ajax_posts' );
        add_action( 'wp_ajax_et_show_ajax_posts', 'et_show_ajax_posts' );

        if ( isset( $et_mobile_theme_options['bg_color'] ) && '' != $et_mobile_theme_options['bg_color'] ) add_action( 'wp_head','et_add_bgcolor' );

        add_filter( 'template_include', 'et_check_homepage_static' );

        add_action( 'wp_head', 'et_add_apple_touch_images', 7 );
    }
}

function et_add_apple_touch_images(){
    global $et_mobile_theme_options;

    $webpage_icon_small = isset( $et_mobile_theme_options['webpage_icon_small'] ) && '' != $et_mobile_theme_options['webpage_icon_small'] ? $et_mobile_theme_options['webpage_icon_small'] : get_template_directory_uri() . '/images/ios_icons/apple-touch-icon-precomposed.png';
    $webpage_icon_big = isset( $et_mobile_theme_options['webpage_icon_big'] ) && '' != $et_mobile_theme_options['webpage_icon_big'] ? $et_mobile_theme_options['webpage_icon_big'] : get_template_directory_uri() . '/images/ios_icons/apple-touch-icon.png';
    $splash_image = isset( $et_mobile_theme_options['splash_image'] ) && '' != $et_mobile_theme_options['splash_image'] ? $et_mobile_theme_options['splash_image'] : get_template_directory_uri() . '/images/ios_icons/splash.png';

    echo '<link rel="apple-touch-icon-precomposed" href="' . esc_url( $webpage_icon_small ) . '" />';
    echo '<link rel="apple-touch-icon-precomposed" sizes="114x114" href="' . esc_url( $webpage_icon_big ) . '" />';
    echo '<link rel="apple-touch-startup-image" href="' . esc_url( $splash_image ) . '" />';
}

function et_check_homepage_static( $template ){
    # if static homepage is set ( WP-Admin / Settings / Reading ) and we're on the homepage, load home.php
    if ( is_front_page() && ! is_home() ) $template = get_home_template();

    return $template;
}

function et_add_bgcolor(){
    global $et_mobile_theme_options;

    echo '<style>body{ background-color: #'. esc_html( str_replace( '#', '', $et_mobile_theme_options['bg_color'] ) ) .'; }</style>';
}

if ( ! function_exists( 'et_mobile_custom_comments_display' ) ) :
function et_mobile_custom_comments_display($comment, $args, $depth) {
   $GLOBALS['comment'] = $comment; ?>
   <li <?php comment_class(); ?> id="li-comment-<?php comment_ID() ?>">
        <article id="comment-<?php comment_ID(); ?>" class="text_block comment clearfix">
            <div class="avatar-box">
                <?php echo get_avatar($comment,$size='37'); ?>
                <span class="avatar-overlay"></span>
            </div> <!-- end .avatar-box -->
            <?php printf('<span class="fn">%s</span>', get_comment_author_link()) ?>

            <div class="comment-content clearfix">
                <?php if ($comment->comment_approved == '0') : ?>
                    <em class="moderation"><?php esc_html_e('Your comment is awaiting moderation.','HandHeld') ?></em>
                    <br />
                <?php endif; ?>

                <?php comment_text() ?>
            </div> <!-- end comment-content-->

            <div class="comment-meta clearfix">
                <span class="comment-date"><?php if ( 1 == $depth ) printf( __( 'Posted on %1$s', 'HandHeld' ), get_comment_date() ); else echo get_comment_date(); ?></span>
                <?php 
                    $et_comment_reply_link = get_comment_reply_link( array_merge( $args, array('reply_text' => esc_attr__('Reply','HandHeld'),'depth' => $depth, 'max_depth' => $args['max_depth'])) );
                    if ( $et_comment_reply_link ) echo '<div class="reply-container">' . $et_comment_reply_link . '</div>';
                ?>
            </div> <!-- end .comment-meta -->
        </article>
<?php }
endif;

if ( ! function_exists( 'et_list_pings' ) ){
    function et_list_pings($comment, $args, $depth) {
        $GLOBALS['comment'] = $comment; ?>
        <li id="comment-<?php comment_ID(); ?>"><?php comment_author_link(); ?> - <?php comment_excerpt(); ?>
    <?php }
}

if ( ! function_exists( 'et_mobile_regular_post' ) ){
    function et_mobile_regular_post(){ 
        global $post; ?>
        <article class="post text_block clearfix">
            <?php
                $thumb = '';
                $width = 72;
                $height = 72;
                $classtext = '';
                $titletext = get_the_title();
                $thumbnail = et_get_thumbnail($width,$height,$classtext,$titletext,$titletext,false,'Entry');
                $thumb = $thumbnail["thumb"];
            ?>
            <?php if( $thumb <> '' ){ ?>
                <div class="post-thumb">
                    <a href="<?php the_permalink(); ?>">
                        <?php et_print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, $classtext); ?>
                        <span class="overlay"></span>
                    </a>
                    <span class="comment_count"><?php comments_popup_link( 0, 1, '%' ); ?></span>
                </div> <!-- end .post-thumb -->
            <?php } ?>
            <div class="post-content">
                <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
                <p class="meta-info"><?php esc_html_e('Posted on','HandHeld'); ?> <time datetime="<?php the_time( 'Y-m-d' ); ?>" pubdate><?php the_time( 'F jS' ); ?></time></p>
            </div> <!-- end .post-content -->
            <a href="<?php the_permalink(); ?>" class="readmore"><?php esc_html_e('Read more','HandHeld'); ?></a>
        </article> <!-- end .post -->
    <?php } 
}

if ( ! function_exists('register_sidebar') ) {

// Register Sidebar
function register_sidebar()  {
    $args = array(
        'id'            => 'mobile-sidebar',
        'name'          => 'Mobile',
        'description'   => __( 'Sidebar for mobile', 'text_domain' ),
        'before_title'  => '<h4 class="widgettitle">',
        'after_title'   => '</h4>',
        'before_widget' => '<li id="%1$s" class="widget %2$s">',
        'after_widget'  => '</li>',
    );

    register_sidebar( $args );
}

// Hook into the 'widgets_init' action
add_action( 'init', 'register_sidebar' );

}

if ( ! function_exists( 'et_mobile_gallery_post' ) ){
    function et_mobile_gallery_post(){
        global $post; ?>
        <a href="<?php the_permalink(); ?>" class="project">
            <?php
                $thumb = '';
                $width = 70;
                $height = 70;
                $classtext = '';
                $titletext = get_the_title();
                $thumbnail = et_get_thumbnail($width,$height,$classtext,$titletext,$titletext,false,'Project');
                $thumb = $thumbnail["thumb"];
            ?>
            <?php et_print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, $classtext); ?>
            <span></span>
        </a>
    <?php } 
}

add_action( 'template_redirect', 'et_mobile_load_ajax_scripts' );
function et_mobile_load_ajax_scripts(){
    wp_enqueue_script( 'et_home_load_more', get_template_directory_uri() . '/js/custom.js', array( 'jquery' ) );
    wp_localize_script( 'et_home_load_more', 'etmobile', array( 'ajaxurl' => admin_url( 'admin-ajax.php' ), 'et_load_nonce' => wp_create_nonce( 'et_load_nonce' ) ) );
}

function et_show_ajax_posts() {
    global $et_mobile_theme_options;
    if ( ! wp_verify_nonce( $_POST['et_load_nonce'], 'et_load_nonce' ) ) die(-1);

    $posts_num = (int) $_POST['et_posts_num'];
    $posts_offset = (int) $_POST['et_posts_offset'];
    $gallery = (int) $_POST['et_gallery'];

    $args = array(
        'posts_per_page' => $posts_num,
        'offset' => $posts_offset,
        'post_status' => 'publish'
    );

    if ( isset( $et_mobile_theme_options['home_blog_categories'] ) && !empty( $et_mobile_theme_options['home_blog_categories'] ) && 0 == $gallery )
        $args['category__in'] = $et_mobile_theme_options['home_blog_categories'];

    if ( 0 != $gallery && isset( $et_mobile_theme_options['home_project_categories'] ) && !empty( $et_mobile_theme_options['home_project_categories'] ) ) 
        $args['category__in'] = $et_mobile_theme_options['home_project_categories'];

    ob_start();
    $the_query = new WP_Query( $args );
    while ( $the_query->have_posts() ) : $the_query->the_post(); ?>
        <?php if ( 0 == $gallery ) { ?>
            <?php et_mobile_regular_post(); ?>
        <?php } else { ?>
            <?php et_mobile_gallery_post(); ?>
        <?php } ?>
    <?php endwhile;
    wp_reset_postdata();
    $posts = ob_get_clean();
    $last_query = ( $the_query->found_posts - $posts_offset ) > $posts_num ? false : true;
    echo json_encode( array( 'posts' => $posts, 'last_query' => $last_query ) );
    die();
} ?> 
```

该`register_sidebar`函数在第 114 行声明。

在我的`home.php`文件中，我试图调用侧边栏，如下所示：

```
<?php dynamic_sidebar( 'mobile-sidebar' ); ?> 
```

但是侧边栏永远不会显示。

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:45:17.863

Functions.php 中的代码

```
if ( function_exists('register_sidebar') ) {
register_sidebar(array(
'name' => 'Homepage Sidebar',
'id' => 'homepage-sidebar',
'description' => 'Appears as the sidebar on the custom homepage',
'after_widget' => '</li>',
'before_title' => '<h2 class="widgettitle">',
'after_title' => '</h2>',
));
} 
```

home.php 中的代码

```
<?php get_sidebar('homepage'); ?> 
```

创建一个文件“sidebar-homepage.php”

粘贴此代码：

```
<div class="custom">

    <?php
     if ( !function_exists('dynamic_sidebar') || !dynamic_sidebar('homepage-sidebar') ) :
    endif; ?>

 </div> 
```

转到小部件并添加一些文本...享受..

# c++ - 命名空间中的抽象方法

> ID：15938285
> 
> 赞同：0
> 
> 时间：2013-04-10T23:29:11.330
> 
> 标签：c++

我有一个很奇怪的问题。

我有 3 个文件：
figure.h：

```
#ifndef FIGURE_H
#define FIGURE_H
namespace figure
{
    class figure
    {
        public:
            figure(position &p,color c);
            virtual bool canMove(const position &p)=0;
            virtual bool move(const position &p)=0;
        protected:
            color col;
            position &p;
    };
    class king : public figure
    {
    };
};
#endif // FIGURE_H 
```

国王.h：

```
#ifndef KING_H
#define KING_H

#include "./figure.h"
namespace figure
{
   class king : protected figure
   {
   };
}
#endif // KING_H 
```

和 king.cpp：

```
#include "king.h"
bool figure::king::canMove(const position &p)
{
} 
```

我正在编译它： gcc -std=c11 -pedantic -Wall -Wextra

但问题是我收到了这个错误：

> /src/figure/figure.h:24:45: 错误：没有在类 'figure::king' 中声明的 'bool figure::king::canMove(const position&)' 成员函数</p>

我应该怎么办？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T23:34:00.333

*您*需要在`class king`.

```
class king : public figure
{
  virtual bool canMove(const position &p) override;  // This was missing.
}; 
```

**编辑：**

> 如果我没记错的话，所有派生类都必须实现抽象函数

这是不正确的。您可能希望类`king`也是*一个*抽象类。与其他类成员一样，省略上面的声明会告诉编译器`king::canMove`应该继承自`figure::canMove`- 它仍然应该是纯虚拟的。

这就是为什么你需要上面的声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:34:35.713

如编译器消息所示，您需要`declare` `canMove(const position&)`在`king`类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T23:35:00.750

如错误消息所述，您尚未声明方法`canMove()`。只需在课堂上声明即可`king`

```
namespace figure
{
   class king : public figure
   {
   public:
       bool canMove(const position &p); 
   };
} 
```

# linux - “输出到标准输出”是什么意思

> ID：15938290
> 
> 赞同：3
> 
> 时间：2013-04-10T23:29:47.093
> 
> 标签：linux, bash

bash 编程新手。我不确定“输出到标准输出”是什么意思。这是否意味着打印到命令行？

如果我有一个简单的 bash 脚本：

```
#!/bin/bash
wget -q  http://192.168.0.1/test -O -  | grep -m 1 'Hello' 
```

它向终端输出一个字符串。这是否意味着它正在“输出到标准输出”？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:31:21.980

是的，stdout 是终端（除非它使用`>`运算符重定向到文件或使用 重定向到另一个进程的标准输入`|`）

在您的具体示例中，您实际上是`| grep ...`通过 grep 重定向到终端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:33:04.787

Linux 系统（以及大多数其他系统）上的每个进程至少有 3 个打开的文件描述符：

*   标准输入 (0)
*   标准输出 (1)
*   标准错误 (2)

常规的每个文件描述符都将指向启动进程的终端。像这样：

```
cat file.txt # all file descriptors are pointing to the terminal where you type the      command 
```

但是，bash 允许使用[输入/输出重定向](http://www.tldp.org/LDP/abs/html/io-redirection.html)来修改此行为：

```
cat < file.txt # will use file.txt as stdin

cat file.txt > output.txt # redirects stdout to a file (will not appear on terminal anymore)

cat file.txt 2> /dev/null # redirects stderr to /dev/null (will not appear on terminal anymore 
```

当您使用管道符号时也会发生同样的情况，例如：

```
wget -q  http://192.168.0.1/test -O -  | grep -m 1 'Hello' 
```

实际发生的是 wget 进程的标准输出（ | 之前的进程）被重定向到 grep 进程的标准输入。所以 wget 的 stdout 不再是终端，而 grep 的输出是当前终端。例如，如果要将 grep 的输出重定向到文件，请使用以下命令：

```
wget -q  http://192.168.0.1/test -O -  | grep -m 1 'Hello' > output.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T23:32:34.297

除非重定向，否则标准输出是启动程序的文本终端。

这是一篇维基百科文章：[http ://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29](http://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29)

# tree - 从自引用表/sObject 在 VisualForce/Apex 中创建树状结构

> ID：15938292
> 
> 赞同：0
> 
> 时间：2013-04-10T23:29:56.520
> 
> 标签：tree, salesforce, apex-code, visualforce, force.com

我的控制器都是定制的。

我有一个对象/表，其中包含一个引用同一对象并表示父对象的字段。

对象/表中有很多行。

我希望将它们全部转储到 VF 并允许用户检查哪些行适用于它们。如果父对象不适用于用户，则子对象将永远不会。

为了限制用户必须在页面上看到多少项目，我希望只显示顶级对象，并且只有当用户选择顶级对象时，他才会看到它的子对象。顶级对象理论上可以具有无限深度。

这在 VisualForce 和 Apex 中如何最好地完成？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:15:56.720

例如，仅显示父帐户，您只需要

```
SELECT Id, Name FROM Account WHERE ParentId = null 
```

当您的用户决定他想要查看一条记录的子项时（例如，可以`<apex:actionFunction>`在复选框中完成），您将能够查询多达 5 + 1 个级别。从这个查询和实验开始

```
SELECT Id, Name, (optional subquery here)
FROM Account
WHERE ParentId = :selectedId
    OR Parent.ParentId = :selectedId
    OR Parent.Parent.ParentId = :selectedId
    ... // We can use up to 5 dots
ORDER BY ParentId, Parent.ParentId, Parent.Parent.ParentId ... 
```

5+1 我的意思是 5 个“点”和一个子查询选项。它不适用于帐户，但在您的自定义对象上，您也应该能够将其放在`(SELECT Id FROM CustomObjects__r)`那里。

然后你必须以某种方式在树中很好地显示它们；）有很多 Javascript 工具可以接受分层 JSON 数据，或者你可能决定构建大量嵌套`<apex:repeat>`......只要注意达到视图状态限制！

检查这些链接以获得一些灵感/警告：

1.  [https://salesforce.stackexchange.com/questions/4537/how-to-reduce-a-large-internal-view-state-what-is-in-the-internal-view-state](https://salesforce.stackexchange.com/questions/4537/how-to-reduce-a-large-internal-view-state-what-is-in-the-internal-view-state)
2.  [https://appexchange.salesforce.com/listingDetail?listingId=a0N300000016chCEAQ](https://appexchange.salesforce.com/listingDetail?listingId=a0N300000016chCEAQ)（免费）
3.  [https://appexchange.salesforce.com/listingDetail?listingId=a0N30000001gFEWEA2](https://appexchange.salesforce.com/listingDetail?listingId=a0N30000001gFEWEA2)（付费，不知道是否有“试运行”选项可以用来查看至少使用的 Visualforce。*我与这家公司没有任何关系*)

# java - 未收到 localhost Mercury 邮件发送的电子邮件

> ID：15938298
> 
> 赞同：0
> 
> 时间：2013-04-10T23:30:50.790
> 
> 标签：java, xampp, jakarta-mail

我正在使用 XAMPP 在 tomcat 中部署我的 java 应用程序，还使用水银邮件发送电子邮件。现在我只是用一个使用 java 邮件 API 和水银电子邮件的小型 java 程序来测试我的应用程序。我已经在 Mercury 中完成了必要的配置来设置 localhost。我的程序运行成功，没有任何错误。Mercury 日志文件也没有说明任何错误。

```
T 20130411 044359 51663963 Connection from 127.0.0.1
T 20130411 044359 51663963 EHLO 10.226.44.101
T 20130411 044359 51663963 MAIL FROM:<promil@localhost.com>
T 20130411 044359 51663963 RCPT TO:<*****@gmail.com>
T 20130411 044359 51663963 DATA
T 20130411 044359 51663963 DATA - 22 lines, 689 bytes.
T 20130411 044359 51663963 QUIT
T 20130411 044359 51663963 Connection closed with 127.0.0.1, 0 sec. elapsed. 
```

这也是我的java文件....

公共静态无效主要（字符串[]参数）{

```
 // Recipient's email ID needs to be mentioned.
      String to = "****@gmail.com";

      // Sender's email ID needs to be mentioned
      String from = "promil@localhost.com";

      // Assuming you are sending email from localhost
      String host = "localhost";
      String password = "****";

      // Get system properties
      Properties properties = System.getProperties();

      // Setup mail server
      properties.setProperty("mail.smtp.host", host);

   // Setup mail server
      properties.setProperty("mail.smtp.password", password);

      // Get the default Session object.
      Session session = Session.getDefaultInstance(properties);

      try{
         // Create a default MimeMessage object.
         MimeMessage message = new MimeMessage(session);

         // Set From: header field of the header.
         message.setFrom(new InternetAddress(from));

         // Set To: header field of the header.
         message.addRecipient(Message.RecipientType.TO,
                                  new InternetAddress(to));

         // Set Subject: header field
         message.setSubject("This is the Subject Line!");

         // Create the message part 
         BodyPart messageBodyPart = new MimeBodyPart();

         // Fill the message
         messageBodyPart.setText("This is message body");

         // Create a multipar message
         Multipart multipart = new MimeMultipart();

         // Set text message part
         multipart.addBodyPart(messageBodyPart);

         // Part two is attachment
         messageBodyPart = new MimeBodyPart();
         String filename = "C:/Users/toshiba/Desktop/file.txt";
         DataSource source = new FileDataSource(filename);
         messageBodyPart.setDataHandler(new DataHandler(source));
         messageBodyPart.setFileName(filename);
         multipart.addBodyPart(messageBodyPart);

         // Send the complete message parts
         message.setContent(multipart );

         // Send message
         Transport.send(message);
         System.out.println("Sent message successfully....");
      }catch (MessagingException mex) {
         mex.printStackTrace();
      } 
```

我对此一无所知......我的 Mercury 核心进程还说它有 4 个待处理的即将离职的工作......？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:48:43.920

目标地址是 gmail。您还没有澄清邮件应该在本地还是在 gmail 发送，所以我假设您的意思是将邮件发送到您在帖子中（正确）混淆的 Gmail 帐户。

您发布的会话记录在您的 Java 客户端和本地 Mercury 邮件服务器之间。这就是说本地 Mercury 邮件服务器接受了来自您的 Java 客户端的邮件。

会话记录不包含有关本地 Mercury 邮件服务器接受邮件后发生的邮件的信息。如果本地配置设置正确，则 Mercury 邮件应该尝试通过查找 Gmail 的 MX 记录并连接到 MX 查找返回的服务器之一来转发邮件。

如需更多信息，您必须查看 Mercury 服务器的日志以查看它是否尝试传递消息。

一个推测：

您的 Mercury 邮件服务器尝试投递邮件，但 Gmail 拒绝了它，因为您正在运行的计算机具有 ISP 分配的 DHCP（动态）地址。大量垃圾邮件来自这些地址，许多邮件主机甚至拒绝与这些邮件源通信。无论如何，如果 Gmail 拒绝它，Mercury 邮件需要将其“退回”给发件人。但是，您可能还没有为 设置接收邮箱`promil@localhost.com`，因此它没有地方存储退回邮件而只是将其丢弃。再次检查 Mercury 邮件日志以了解详细信息。

根据您提供的信息，这是任何人都可以给出的最佳答案。

# c++ - 从二进制文本读取时，为什么我会得到 unicode 和大数字？

> ID：15938302
> 
> 赞同：0
> 
> 时间：2013-04-10T23:31:33.450
> 
> 标签：c++, c, list, binary, fstream

我正在使用二进制文件中的 ifstream 读取列表以构建数组。这是我的构建数组函数：

```
 int buildArrays (Player players[])
{

ifstream inFile;

inFile.open( "binary_hockey", ios::binary );

if ( inFile.fail() )
   {
   cout << "The binary_hockey input file did not open";
   return 0;
   }

Player onePlayer;
int index = 1;

inFile.read( (char *) &onePlayer, sizeof(Player) );

while (inFile)
{
    index++;
    inFile.read( (char *) &onePlayer, sizeof(Player) );
}

inFile.close();
return index-1;

} 
```

然后我使用这个函数在屏幕上打印数组。

```
void printArrays( Player players[], int numPlayers)
{

    int i = 0;
    int pnts;

while((i)<numPlayers)     //keeps displaying the info as long as num players is greater the array building up t
        {

    pnts = players[i].goals + players[i].assists;

    cout<<left<<setw(20)<<players[i].name<<setw(10)<<players[i].goals<<setw(10)<<players[i].assists<<setw(10)<<pnts << endl;

    i++;
        }

    cout<<endl<<endl<<endl;
} 
```

结果是我从二进制列表中获得了 unicode 字符和非常大的数字，而不是名称和单个数字。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:40:31.430

你没有读入`players`. 您的代码应如下所示：

```
while (inFile)
{
 inFile.read( (char *) &players[index++], sizeof(Player) );
} 
```

# r - 如何定义 if else 语句，其中 else 语句可以删除不需要的 \t

> ID：15938303
> 
> 赞同：1
> 
> 时间：2013-04-10T23:31:35.480
> 
> 标签：r, if-statement

我有一个函数，其中一部分内容如下：

```
conefor.input <- function(conefor.file, onlyoverall, probmin, index)
{
for(i in 1:l00)
{
cat(paste(conefor.file,
        if(onlyoverall=="TRUE")
                {onlyoverall<-"onlyoverall"},
distance,
        if(probmin=="TRUE")
            {probmin<-paste("-pcHeur", min)}, 
 index, sep="\t"),file="conef_command.txt", sep="\n")}
return("conef_command.txt")
} 
```

我的目标是生成 100 行，其中每个输入都由一个选项卡分隔。

当上面的两个“if”语句为真时，没有问题。结果是：

```
conefor.file\tonlyoverall\tdistance\tpcHeur min\tindex 
```

但是，当上面的两个“if”语句为假时，我会留下两个选项卡，其中“onlyoverall”和“pcHeur”本来应该是，而我真正想要的是根本不采取任何行动，并且只有一个选项卡分隔每个参数.

'if' 语句为假的示例：

```
conefor.file\t\tdistance\t\tindex 
```

当'if'语句为假时我想要什么：

```
conefor.file\tdistance\tindex 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:58:34.033

很难为您的`for`循环提出任何形式的矢量化或类似的建议，因为尚不清楚（至少对我而言）迭代之间有什么区别。

但是，对于`paste`里面的语句`cat`，可以改用下面的

```
paste(ifelse(onlyoverall, 
          paste(conefor.file, onlyoverall<-"onlyoverall", sep="\t"),
          conefor.file),
      ifelse(probmin, 
            paste(distance, probmin<-paste("-pcHeur", min), sep="\t"), 
            distance),
      index, 
      sep="\t") 
```

请注意，这会在语句之前获取输出`if`并包含在`ifelse`输出中，在输出中同时给出`TRUE`和`FALSE`

例如：

```
x1 <- x2 <- TRUE
paste(ifelse(x1, paste("A", "B" , sep="#"), "A"), ifelse(x2, paste("C", "D", sep="#"), "C"), "E", sep="#")
# [1] "A#B#C#D#E"

x1 <- x2 <- FALSE
paste(ifelse(x1, paste("A", "B" , sep="#"), "A"), ifelse(x2, paste("C", "D", sep="#"), "C"), "E", sep="#")
#  [1] "A#C#E"

x2 <- TRUE
paste(ifelse(x1, paste("A", "B" , sep="#"), "A"), ifelse(x2, paste("C", "D", sep="#"), "C"), "E", sep="#")
#  [1] "A#C#D#E" 
```

# c - 使 printf 用浮点做正确的事

> ID：15938307
> 
> 赞同：0
> 
> 时间：2013-04-10T23:31:57.890
> 
> 标签：c, floating-point, printf

我试图让 printf 用浮点数“做正确的事”，即：

*   永远不会丢失信息，始终打印精确值所需的尽可能多的小数

*   不要打印一堆多余的尾随零

*   如果输出将不合理地大，则切换到科学计数法

`%.20g`似乎做到了所有这些，但我还想得到一件事：

*   如果该值是整数，请打印尾随 '.0' 以指示它是具有整数值的浮点数，而不是整数类型的数字

有没有办法在不失去前三个标准的情况下获得第四个标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:48:56.897

看起来标志“#”至少会在末尾加上一个句号。试试`%#.20g`。

例如[，此处](http://cplusplus.com/reference/cstdio/printf/%20here)记录了 # 标志：“与 a、A、e、E、f、F、g 或 G 一起使用，即使后面没有数字，它也会强制书面输出包含小数点。默认情况下，如果没有数字跟着，不写小数点。”

# c - 当指针未指向正确的类型时，为什么 gcc 允许取消引用。为什么还要有类型？

> ID：15938314
> 
> 赞同：2
> 
> 时间：2013-04-10T23:32:34.843
> 
> 标签：c, pointers, gcc, types, dereference

[我昨天在此处](https://stackoverflow.com/questions/15915046/initializing-values-at-the-end-of-a-pointer-to-pointer-to-pointer-chain/15915188?noredirect=1#comment22673098_15915188)发布了有关指向指针的指针等的指针，并决定将讨论移至新问题答案的评论中。

我的问题是为什么编译器允许这种情况发生：

```
int *foo = malloc(sizeof(int));
*foo = 8;
int **********blarg = foo; 
```

我收到了一些警告，但是当我像这样对 blarg 进行取消引用时：

```
*blarg; 
```

它的值是 8。取消引用不应该返回某种类型的空值吗？难道编译器不应该知道只有在取消引用之后，例如：

```
**********blarg; 
```

是否有实际的整数值，任何较低级别的取消引用只会返回更多指向指针的指针？

空指针对我来说是一个全新的困惑，因为像这样的变量：

```
void *asdf; 
```

可以指向以下任何类型：

```
int
char
float
*void
**********void
*******int 
```

你明白了。

所以我的主要问题：

1.  第一段代码中到底发生了什么？那些指向指针的指针甚至被创建了吗？
2.  为什么取消引用在第二段代码中起作用？
3.  （而且听起来很愚蠢）如果我可以为任何东西分配任何值并且只要我正确阅读它就可以工作，为什么还要有类型呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:10:16.620

举一个更简单的例子：

```
int n;
int *p = &n;
int **p2 = p; 
```

使用 gcc 4.7，使用默认选项，我得到：

```
warning: initialization from incompatible pointer type [enabled by default] 
```

C 标准说尝试初始化`p2`是*违反约束*的，这意味着需要符合要求的实现才能发出诊断。这*并不*意味着需要符合要求的实现来拒绝翻译单元。必须拒绝翻译单元（源文件）的唯一情况是它包含`#error`指令。

因此，通过打印无效初始化程序的警告，gcc 就 ISO C 标准而言已经完成了它的工作。

如果您希望它彻底拒绝它，您可以使用该`-pedantic-errors`选项，最好与其中一个`-std=...`选项一起使用。

那就是语言问题。gcc默认*可以*拒绝这样的程序——那为什么不呢？这是关于 gcc 的问题，而不是关于 C 语言的问题。

自 1989 年 ANSI 发布官方 C 标准之前，gcc 已经存在了很长时间。在 ANSI 之前的日子里，像这样的初始化程序是非法的还不是很清楚。有（并且可能仍然是）相当多的旧代码依赖于这样的结构，并且恰好可以工作。我推测 gcc 开发人员只是没有觉得现在是进行此类更改并冒着破坏现有代码的好时机。

就个人而言，我*希望*gcc 默认拒绝这样的事情，但您始终可以 (a) 启用更严格的诊断，并且 (b) 密切注意警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:49:53.080

这是一个有趣的问题。

归结为实现，拥有类型系统的 C 语言的价值在于以下承诺：“如果您的代码不触发警告，那么它在 C 类型系统的框架中是类型安全的”。程序员可能犯的许多错误都引起了他的注意。反之亦然，如果编译器没有发出警告，程序员可以在一定程度上相信他的代码不包含任何一大类问题。汇编程序员不能这么确定，可能必须仔细检查所有内容。但是 C 程序员只需要仔细检查代码的高级方面，而不是忘记取消引用指针等错误。

`(void*)`经常在那里使用，在那里不可能或不方便将功能、结构……与特定类型联系起来。示例包括集合、消息传递原语。

您的代码会触发警告，因此编译器当然不会声明您的代码是类型安全的，事实上，访问`**blarg`while`(int)*blarg == 8`会在许多架构上导致内存访问错误。（即使`**`不是最终的反抗。）

您在询问是否正在创建指向指针的指针：当您说

```
int **********blarg [...] ; //10-pointer to int 
```

您只创建了一个变量，它是一个指向 int 的 9 指针的指针。这条线没有创建也不应该创建指向 int 的 9 指针，`blarg`它将指向。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T00:10:40.787

让我们仔细看看你的代码。我注意到您几乎可以肯定是在 32 位模式下编译（在 32 位机器上或在 32 位模式下的 64 位机器上）。

```
int *foo = malloc(sizeof(int));
*foo = 8;
int **********blarg = foo;
*blarg; 
```

第一行分配一个指向 的指针`foo`，该指针指向一个足够大的空间来容纳一个`int`。第二行将值分配给`8`指向的整数`foo`。

具有 10 级指针（10 的）的第三行会`*`生成警告，因为 的类型`foo`与 的类型不匹配`blarg`。但是，编译器会尝试确定您所做操作的开头或结尾，并将指针从复制`foo`到`blarg`.

第四行访问`blarg`指向的值。结果是一个`int *** *** ***`（指向 int 的 9 级指针），但它的值是`blarg`指向的值。由于您看到`8`的值`*blarg`，我们可以合理地推断出`sizeof(int *) == sizeof(int)`——因此我对 32 位编译的观察。如果您在 64 位机器上（甚至是 Windows 64），`*blarg`将访问 8 个字节而不是 4 个字节，并且额外的 4 个字节可能不会全部为零。

所以，行为是可以预测的，即使你没有预料到。但由于分配给 的类型不匹配，它没有严格定义`blarg`。您也不能安全地使用`**blarg`或任何其他更多数量的取消引用`*`；您将访问无效的内存。

# zend-framework2 - 如何在 Zend Framework 2 中设置复选框/单选按钮的位置？

> ID：15938320
> 
> 赞同：2
> 
> 时间：2013-04-10T23:32:55.973
> 
> 标签：zend-framework2, zend-form, zend-form-element, zend-form2

我试过这样：

```
<?php
echo $this->formRow($form->get('weekday'), Zend\Form\View\Helper\FormRow::LABEL_PREPEND);
?> 
```

但是标签仍然留在复选框后面。

![在此处输入图像描述](https://i.stack.imgur.com/NQrnV.png)

我应该如何正确设置标签位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:57:52.960

工作日是多复选框吗？如果是这样，请使用渲染方法**formMultiCheckbox**而不是**formRow**，标签将放置在您想要的位置。

我一直在调试这个过程，这是一个奇怪的行为。当调用**Zend/Form/View/Helper/FormRow**类时，标签的位置会按照您的预期进行初始化（**LABEL_PREPEND**）。

稍后，调用**Zend/Form/View/Helper/FormMultiCheckbox**类，但它没有从**FormRow**继承位置，而是使用它的默认值，即您不想要的**LABEL_APPEND**。

检查两个类上的**__invoke**方法，你会看到。

# javascript - 使用 jQuery 显示前一个 td 元素

> ID：15938330
> 
> 赞同：1
> 
> 时间：2013-04-10T23:34:01.233
> 
> 标签：javascript, jquery, ruby-on-rails-3, jquery-events

我知道这种问题已经被问过 100 亿次了。我已经考虑过它们并尽我所能。

基本上，我有一个文本字段，我只想在单击按钮时呈现该字段。

这就是我的代码的样子（它是用 ruby​​ 编写的，因为我在 rails 上使用了 ruby​​）。这也是部分代码，因此该代码会在单个页面上一遍又一遍地显示。

```
<td class=search-form-block>
  <%= form_tag({:controller => "foods", :action => "save_selected"}, method: "post") %>
  <%#= text_field_tag 'search_food_text_field', nil, data: { catcomplete_source: search_foods_path } %>

  <%= text_field_tag 'search_food_text_field', nil, data: { catcomplete_source: search_foods_path } %>

</td>
<td class=remove-td-center> <%= link_to "new food", nil,  {class: "new-food-button"} %>     </td> 
```

这是从源头看的样子：

```
<td class=search-form-block>
  <form accept-charset="UTF-8" action="/foods/save_selected" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="nj7UzUO00UwgC0eeZk2GpZiKqz6PPTvLST1mINZCDR4=" /></div>

  <input data-catcomplete-source="/foods/search" id="search_food_text_field" name="search_food_text_field" type="text" />

</td>
<td class=remove-td-center> <a href="/meals/5" class="new-food-button">new food</a> </td> 
```

这是我预测会起作用但没有起作用的jQuery：

```
 $('.search-form-block').hide()

$('.new-food-button').click(function(e){
    e.preventDefault();
    $(this).prev('td').toggle();
}); 
```

我遇到的问题是当我点击切换按钮时，页面上的所有表单都会被切换。我只希望呈现该特定按钮的表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:35:38.923

问题出`this`在您的点击事件中。在您的函数`this`中指的是`link`而不是`td`. 所以要获得以前的`td`你需要这样的东西：

```
$(this).parent().prev('td').toggle(); 
```

从那里获得链接的父级，然后从那里获得上一个 td 。

# iphone - iOS 数组未完全填充

> ID：15938331
> 
> 赞同：2
> 
> 时间：2013-04-10T23:34:02.670
> 
> 标签：iphone, ios, objective-c, nsmutablearray

我正在使用这两种递归方法来查找某个文件夹中文件和目录的路径

```
- (NSMutableArray *)getFilePathsFromDirectory:(NSString *)directory{
NSMutableArray *contents = [[NSMutableArray alloc] init];
NSArray *arr = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:directory error:nil];
for (NSString *file in arr) {
    BOOL isDir;
    [[NSFileManager defaultManager] fileExistsAtPath:[directory stringByAppendingPathComponent:file] isDirectory:&isDir];
    if (!isDir) {
        [contents addObject:[directory stringByAppendingPathComponent:file]];
    }
    else{
        [contents addObject:[directory stringByAppendingPathComponent:file]];
        [contents addObject:[self getFilePathsFromDirectory:[directory stringByAppendingPathComponent:file]]];
    }
}
return contents;
}

- (NSString *)getPathForItemNamed:(NSString *)name array:(NSMutableArray *)arr{
NSString *str;
if (name) {
    for (NSString *s in arr) {
        if ([s isKindOfClass:[NSString class]]) {
            if ([[s lastPathComponent] isEqualToString:name]) {
                return s;
            }
        }
    }
    for (NSMutableArray *aq in arr) {
        if ([aq isKindOfClass:[NSMutableArray class]]) {
            str = [self getPathForItemNamed:name array:aq];
            return str;
        }
    }
}
return str;
} 
```

但问题是，经过一定数量的子目录（3-5）后，这将停止返回任何路径并返回`(null)`. 我觉得这与由于某种原因在返回之前没有填充所有目录的数组有关。这是我如何称呼这些

```
NSMutableArray *paths = [self getContentsOfPaths:[self downloadsDir]];

path = [self getPathForItemNamed:[tableView cellForRowAtIndexPath:indexPath].textLabel.text array:paths];
NSLog(@"%@", path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T02:37:58.547

你的方法有两个问题`getPathForItemNamed:`：

*   当它无法按名称找到文件时，它返回一个未初始化变量的值`str`。这是未定义的行为 - 您需要在初始化时设置`str`为。`nil`实际上，您根本不需要`str`（请参阅下面的修复程序）。
*   当它发现它的第一个子目录时，它假定它正在寻找的文件必须在该子目录中，即使它不是。无论第一级递归调用`getPathForItemNamed:`返回什么，都成为顶级调用的返回结果。这很糟糕：如果您要查找的文件位于第二个子目录的子树中，您将永远找不到它！

以下是修复方法的方法：

```
- (NSString *)getPathForItemNamed:(NSString *)name array:(NSMutableArray *)arr{
    if (!name) return nil;
    for (NSString *s in arr) {
        if ([s isKindOfClass:[NSString class]]) {
            if ([[s lastPathComponent] isEqualToString:name]) {
                return s;
            }
        }
    }
    for (NSMutableArray *aq in arr) {
        if ([aq isKindOfClass:[NSMutableArray class]]) {
            str = [self getPathForItemNamed:name array:aq];
            // Return something only when you find something
            if (str) return str;
        }
    }
    return nil; // You do not need str at all.
} 
```

# iphone - 如何使用视图控制器 2 中的滑块进行更改以反映视图控制器 1 中的更改？

> ID：15938348
> 
> 赞同：1
> 
> 时间：2013-04-10T23:35:31.157
> 
> 标签：iphone, ios, objective-c, uiviewcontroller, uislider

我不知道如何用视图控制器 1 中的视图控制器 2 计算滑块值的变化。我想我调用它是正确的，但这些值没有传递给视图。

我在 nib 文件中放了一个滑块，当我改变它的值时，矩形高度和宽度的值应该改变。

这是我的 //appdelegate.m

```
CGRect bounds        = [self.window bounds];
KaleidoTab *view    = [[KaleidoTab alloc] initWithFrame:bounds];
view.backgroundColor = [UIColor whiteColor];

KaleidoTabFirstViewController *vc = [[KaleidoTabFirstViewController alloc] init];
[vc setView: view];

KaleidoTabSecondViewController *vc2 = [[KaleidoTabSecondViewController alloc] init];
//[vc2 setView: view];
vc2.vc = vc;

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = @[vc, vc2];
self.window.rootViewController = self.tabBarController; 
```

这是我的 //secondviewcontroller.h

```
#import <UIKit/UIKit.h>
#import "KaleidoTabFirstViewController.h"
@interface KaleidoTabSecondViewController : UIViewController {
IBOutlet UISlider *changeSize;
IBOutlet UILabel *label1; }
@property KaleidoTabFirstViewController *vc;
@property (nonatomic, retain) IBOutlet UISlider *changeSize;
- (IBAction) changeSizeSlider:(id)sender; 
```

这是 //secondviewcontroller.m

```
- (IBAction)changeSizeSlider:(UISlider *)sender
{
/// Change label to match slider's value
label1.text = [NSString stringWithFormat:@"%g", changeSize.value];
CGFloat changeSizeCont = changeSize.value;
((KaleidoTab *)vc.view).rect_width = changeSizeCont;
((KaleidoTab *)vc.view).rect_height = changeSizeCont; 
} 
```

kaleidotab.m 具有绘制矩形的方法。

我合成了属性，一切都很好。我认为我的 firstviewcontroller 对象有问题。

感谢您的时间。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:03:30.967

您的代码使用类似 Java 的语法而不是 Objective-C 语法。如果您采用 Objective-C 的 OOP 语法方法，您会发现更容易诊断此类问题：

```
// For getting property values
[objectName propertyName];

// For setting property values
[objectName setPropertyName]; 
```

iOS 框架的很多工作方式取决于遵循这些约定。尝试将您的代码更改为以下内容：

```
 - (IBAction)changeSizeSlider:(UISlider *)sender
    {
    // Change label to match slider's value
    [label1 text] = [NSString stringWithFormat:@"%g", [changeSize value]];

    // Var for changing size
    CGFloat changeSizeCont = [changeSize value];

    // Log to the console so that we can confirm changeSizeCont is being set appropriately
    NSLog(@"changeSizeCont = %d", changeSizeCont);

    /* I'm not used to this current syntax, this may be what's going wrong
    It's confusing to read, it should be clearer.
    I understand that you are attempting to grab the 1st view controller and
    change its view properties, I think you can drop the
    ((KaleidoTab *)vc.view).rect_width and replace it with
    vc.view.rect_width
    vc.view.rect_height
    */
    ((KaleidoTab *)vc.view).rect_width = changeSizeCont;
    ((KaleidoTab *)vc.view).rect_height = changeSizeCont; 

    // Log to the console so that we can confirm the rect_width and rect_height properties are receiving the change
    NSLog("Current values for VC's view properties:");
    NSLog(@"rect_width = %d", ((KaleidoTab *)vc.view).rect_width);
    NSLog(@"rect_width = %d", ((KaleidoTab *)vc.view).rect_height);

    } 
```

这应该可以帮助您朝着正确的方向前进。您将能够在控制台上检查属性值是否正在更新。如果它们是并且视图没有适当地更改，您可能需要查看应用程序的生命周期并找出需要重新加载或更新视图的位置以将视图的更改反映到屏幕上。

# d3.js - 无法让 D3 甚至打印文本

> ID：15938353
> 
> 赞同：0
> 
> 时间：2013-04-10T23:35:42.423
> 
> 标签：d3.js

这让我发疯了。Iv 按照教程进行操作，但我无法让这件事做最简单的操作。

我只是想开始。Iv 有一个骨架页面、一个基本的 JSON 文件和加载的 D3 V3 库。

我可以从检查员那里看到一切正常。JSON 加载正常，但没有任何反应。我只是想将一些单词打印成几个 li 元素，但我什么也没得到。我可以看到 ul 被附加到页面上，但没有别的。

没有 JS 错误，也没有任何可以指导我的东西。只是一个空白页。

我在这里做错了什么？！

我的标记：

```
<!DOCTYPE html>
    <html>    
      <head>
        <meta charset="utf-8">
        <title>D3</title>
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>
        <script src="js/vendor/d3.v3.min.js"></script>
        <style>

        path {
          stroke: #fff;
          fill-rule: evenodd;
        }

        </style>
        <script>
        function draw(data){
          "use strict";
          d3.select("body")
          .append("ul") 
          .selectAll("li") 
          .data(data) 
          .enter() 
          .append("li")
          .text(function(d) {
            return 'Cant even see this message'; 
          });
        }
        </script> 
      <script>d3.json("json/status.json", draw);</script>
      </head>
      <body>
      </body>
    </html> 
```

和我的 JSON 文件

```
{
  "status": "OK",
  "name": "TEST A"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:40:37.033

您`var data`的格式不正确。D3.js 假定您将向其传递列表，但您提供了一个对象。让您入门的一个简单解决方法是将 status.json 更改为：

```
[{
  "status": "OK",
  "name": "TEST A"
}] 
```

来自 API 文档：[https ://github.com/mbostock/d3/wiki/Selections#wiki-data](https://github.com/mbostock/d3/wiki/Selections#wiki-data)

> selection.data（[值[，键]]）
> 
> 将指定的数据数组与当前选择连接起来。指定值是数据值数组，例如数字或对象数组，或返回值数组的函数。

# c# - MS.Internal.InternalMemoryStream 在后台代理中变为 MS.Internal.ReadOnlyBufferedStream？

> ID：15938358
> 
> 赞同：0
> 
> 时间：2013-04-10T23:36:10.643
> 
> 标签：c#, .net, windows-phone-8

我对某事感到困惑。

我有一个使用后台代理计划任务的 Windows Phone 8 应用程序。

除其他外，后台代理使用[此处找到](http://www.sharpgis.net/post/2009/04/22/REALLY-small-unzip-utility-for-Silverlight.aspx)的解压缩器下载并提取 .zip 文件。（解压缩功能在应用程序的常规非后台部分中运行良好。）

我注意到后台代理正在抛出 System.NotImplementedException，我将其追踪到 Unzipper.ParseCentralDirectory() 中的一行代码

```
private List<FileEntry> ParseCentralDirectory()
{
    BinaryReader reader = new BinaryReader(this.stream);
    //this next line is the one that's throwing the System.NotImplementedException
    reader.BaseStream.Seek(-4, SeekOrigin.End); 
```

在这种情况下，BinaryReader 参数中的“this.stream”定义在类的顶部：

```
public sealed class Unzipper : IDisposable
{
    private Stream stream;
    ... 
```

正如我所提到的，解压缩功能在常规主应用程序中运行良好。所以我在主应用程序和后台应用程序之间寻找有问题的代码部分的差异（解压缩类分别出现在主项目和后台代理项目中。）

我注意到 Unzipper 中的流（称为“this.stream”）是一个 MS.Internal.InternalMemoryStream。但是，当后台代理到达后台 Unzipper.cs 中的同一行时，“this.stream”是一个 MS.Internal.ReadOnlyBufferedStream。

这是我发现的唯一区别。但是，我什至不确定这是否是问题所在。它正在抛出 System.NotImplementedException

```
reader.BaseStream.Seek(-4, SeekOrigin.End); 
```

但实际上，MS.Internal.ReadOnlyBufferedStream 确实具有“true”的“CanSeek”属性（我注意到 Unzipper 会检查它，如果它是 false，则抛出 NotSupportedException。）

我被难住了。事实上，谷歌搜索“MS.Internal.ReadOnlyBufferedStream”不会产生单一结果（尽管我猜现在会......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:30:55.597

与大多数基于网络的 API 的前台对应物相比，后台代理具有显着不同的实现。

我只能建议将数据流式传输到隔离存储中的临时文件，然后打开*该*文件的流进行解压缩。

请记住，您只有 6mb 的内存 (RAM) 可供使用，包括您的应用程序程序集，之后您的任务将被终止（如果发生 3 次，则将被取消计划）。这可能会导致解压缩时出现内存问题。

# sql-server - 尽管统计信息有效，但查询计划估计的行数非常低

> ID：15938359
> 
> 赞同：3
> 
> 时间：2013-04-10T23:36:10.917
> 
> 标签：sql-server, sql-server-2008-r2, indexing

我的数据仓库中有一个简单的查询（如下），为其创建了正确的索引。查询计划总是说估计的行数大约是 1 或 2，而它应该是大约 6,000,000。我运行 sp_updatestats 'resample' 并检查了统计直方图，它显示 EQ_ROWS 为 6,000,000，其中 DWDateEnd = 12/31/9999，所以我很难过。所有表中 99% 的行的 DWDateEnd 为 12/31/9999。如果我删除 DWDateEnd 过滤器，估计的行数会变得相当准确。它似乎通过在应该进行哈希连接的地方引起嵌套循环来减慢我的查询速度。帮助！

```
SELECT r.OrderID
FROM DWOrders r
JOIN DWOrderStatus rs ON r.OrderID = rs.OrderID AND rs.StatusID = 5 AND rs.ExpiredDate IS NULL 
WHERE rs.StatusTimeStamp BETWEEN @StartDate AND @EndDate AND r.DWDateEnd = '12/31/9999' 
AND rs.DWDateEnd = '12/31/9999' 
```

这是执行计划。

```
<?xml version="1.0" encoding="utf-16"?>
<ShowPlanXML xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Version="1.1" Build="10.50.4000.0" xmlns="http://schemas.microsoft.com/sqlserver/2004/07/showplan">
  <BatchSequence>
    <Batch>          
      <Statements>
        <StmtSimple StatementCompId="3" StatementEstRows="2.48996" StatementId="3" StatementOptmLevel="FULL" StatementOptmEarlyAbortReason="GoodEnoughPlanFound" StatementSubTreeCost="0.00817222" StatementText="&#xA;SELECT r.OrderID&#xD;&#xA;           FROM DWOrder r&#xD;&#xA;            JOIN DWOrderStatus rs ON r.OrderID = rs.OrderID AND rs.StatusID = 5 AND rs.ExpiredDate IS NULL AND rs.DWDateEnd = '12/31/9999' &#xD;&#xA;           WHERE rs.StatusTimeStamp BETWEEN @StartDate AND @EndDate AND r.DWDateEnd = '12/31/9999' &#xD;&#xA;&#xD;&#xA;" StatementType="SELECT" QueryHash="0x24DFCAFA0E610FB3" QueryPlanHash="0x6DD5D50E203E6273">
          <StatementSetOptions ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" NUMERIC_ROUNDABORT="false" QUOTED_IDENTIFIER="true" />
          <QueryPlan CachedPlanSize="24" CompileTime="6" CompileCPU="6" CompileMemory="472">
            <RelOp AvgRowSize="11" EstimateCPU="1.0408E-05" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="2.48996" LogicalOp="Inner Join" NodeId="0" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.00817222">
              <OutputList>
                <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrder]" Alias="[r]" Column="OrderID" />
              </OutputList>
              <NestedLoops Optimized="false">
                <OuterReferences>
                  <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrderStatus]" Alias="[rs]" Column="OrderID" />
                </OuterReferences>
                <RelOp AvgRowSize="11" EstimateCPU="0.000159131" EstimateIO="0.003125" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="1.93725" LogicalOp="Index Seek" NodeId="1" Parallel="false" PhysicalOp="Index Seek" EstimatedTotalSubtreeCost="0.00328413" TableCardinality="24961700">
                  <OutputList>
                    <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrderStatus]" Alias="[rs]" Column="OrderID" />
                  </OutputList>
                  <IndexScan Ordered="true" ScanDirection="FORWARD" ForcedIndex="false" ForceSeek="false" ForceScan="false" NoExpandHint="false">
                    <DefinedValues>
                      <DefinedValue>
                        <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrderStatus]" Alias="[rs]" Column="OrderID" />
                      </DefinedValue>
                    </DefinedValues>
                    <Object Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrderStatus]" Index="[IX_DWOrderStatus_DWDateEnd_ExpiredDate_SID_STS_RID]" Alias="[rs]" IndexKind="NonClustered" />
                    <SeekPredicates>
                      <SeekPredicateNew>
                        <SeekKeys>
                          <Prefix ScanType="EQ">
                            <RangeColumns>
                              <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrderStatus]" Alias="[rs]" Column="DWDateEnd" />
                              <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrderStatus]" Alias="[rs]" Column="ExpiredDate" />
                              <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrderStatus]" Alias="[rs]" Column="StatusID" />
                            </RangeColumns>
                            <RangeExpressions>
                              <ScalarOperator ScalarString="'9999-12-31 00:00:00.000'">
                                <Const ConstValue="'9999-12-31 00:00:00.000'" />
                              </ScalarOperator>
                              <ScalarOperator ScalarString="NULL">
                                <Const ConstValue="NULL" />
                              </ScalarOperator>
                              <ScalarOperator ScalarString="(5)">
                                <Const ConstValue="(5)" />
                              </ScalarOperator>
                            </RangeExpressions>
                          </Prefix>
                          <StartRange ScanType="GE">
                            <RangeColumns>
                              <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrderStatus]" Alias="[rs]" Column="StatusTimeStamp" />
                            </RangeColumns>
                            <RangeExpressions>
                              <ScalarOperator ScalarString="[@StartDate]">
                                <Identifier>
                                  <ColumnReference Column="@StartDate" />
                                </Identifier>
                              </ScalarOperator>
                            </RangeExpressions>
                          </StartRange>
                          <EndRange ScanType="LE">
                            <RangeColumns>
                              <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrderStatus]" Alias="[rs]" Column="StatusTimeStamp" />
                            </RangeColumns>
                            <RangeExpressions>
                              <ScalarOperator ScalarString="[@EndDate]">
                                <Identifier>
                                  <ColumnReference Column="@EndDate" />
                                </Identifier>
                              </ScalarOperator>
                            </RangeExpressions>
                          </EndRange>
                        </SeekKeys>
                      </SeekPredicateNew>
                    </SeekPredicates>
                  </IndexScan>
                </RelOp>
                <RelOp AvgRowSize="11" EstimateCPU="0.000158414" EstimateIO="0.003125" EstimateRebinds="0.937251" EstimateRewinds="0" EstimateRows="1.28531" LogicalOp="Index Seek" NodeId="2" Parallel="false" PhysicalOp="Index Seek" EstimatedTotalSubtreeCost="0.00487768" TableCardinality="8048090">
                  <OutputList>
                    <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrder]" Alias="[r]" Column="OrderID" />
                  </OutputList>
                  <IndexScan Ordered="true" ScanDirection="FORWARD" ForcedIndex="false" ForceSeek="false" ForceScan="false" NoExpandHint="false">
                    <DefinedValues>
                      <DefinedValue>
                        <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrder]" Alias="[r]" Column="OrderID" />
                      </DefinedValue>
                    </DefinedValues>
                    <Object Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrder]" Index="[IX_DWOrder_DWDateEnd]" Alias="[r]" IndexKind="NonClustered" />
                    <SeekPredicates>
                      <SeekPredicateNew>
                        <SeekKeys>
                          <Prefix ScanType="EQ">
                            <RangeColumns>
                              <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrder]" Alias="[r]" Column="DWDateEnd" />
                              <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrder]" Alias="[r]" Column="OrderID" />
                            </RangeColumns>
                            <RangeExpressions>
                              <ScalarOperator ScalarString="'9999-12-31 00:00:00.000'">
                                <Const ConstValue="'9999-12-31 00:00:00.000'" />
                              </ScalarOperator>
                              <ScalarOperator ScalarString="[EcommArchive].[dbo].[DWOrderStatus].[OrderID] as [rs].[OrderID]">
                                <Identifier>
                                  <ColumnReference Database="[EcommArchive]" Schema="[dbo]" Table="[DWOrderStatus]" Alias="[rs]" Column="OrderID" />
                                </Identifier>
                              </ScalarOperator>
                            </RangeExpressions>
                          </Prefix>
                        </SeekKeys>
                      </SeekPredicateNew>
                    </SeekPredicates>
                  </IndexScan>
                </RelOp>
              </NestedLoops>
            </RelOp>
          </QueryPlan>
        </StmtSimple>
      </Statements>
    </Batch>
  </BatchSequence>
</ShowPlanXML> 
```

一件有趣的事情是，如果我将 = '12/31/9999' 更改为 >= '12/31/9999' 然后它使用哈希连接，但希望我更改大部分索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:44:55.443

请尝试添加`option (recompile)`到您的选择语句的末尾。

这应该会强制生成一个考虑到变量值的计划。

您可以尝试的另一个是`option(optimize for unknown)`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T15:57:41.517

我将此称为 SQL Server 2008 R2 (10.50.1400) 和 SQL Server 2012 (11.0.3000) 中的错误，因为没有人能够给我一个有效的答案。我最终改变了我所有的查询来使用

> DWDateEnd >= '12/31/9999'

（注意添加大于）因为这会导致 SQL Server 使用散列连接而不是嵌套循环，并且查询速度更快。

我最终使用了一种解决方法，它添加了一个名为 DWActive 的持久计算位列（如果 DWDateEnd = '12/31/9999' 然后 1 否则为 0）。一旦我添加了该列和相应的索引，一切都会好得多。

# gradle - 如何在 Gradle 任务上使用 inputs.property，但对值有闭包？

> ID：15938362
> 
> 赞同：3
> 
> 时间：2013-04-10T23:36:32.010
> 
> 标签：gradle

我正在尝试将安装程序构建器添加到我的构建配置中，但在正确设置任务输入时遇到了一些麻烦。我将配置拆分为一个单独的 .gradle 文件，然后通过执行以下操作将其添加到我的项目中。

```
project.ext.i4jArgs = [ "--verbose" ]
apply from: rootProject.projectDir.absolutePath + "/gradle/install4j.gradle" 
```

为了构建安装程序，我通过`exec`. 几乎所有内容都基于约定，但我想从我的主构建文件中选择添加几个参数/开关到命令。我使用该`project.ext.i4jArgs`属性（上图）。

如果我`project.ext.i4jArgs`在应用我的文件之前设置属性`install4j.gradle`，我可以使用以下输入，一切似乎都有效。

```
inputs.property("i4jArgs", project.ext.has('i4jArgs') ? project.ext.i4jArgs : null) 
```

但是，如果我`install4j.gradle`首先应用我的文件并设置`project.ext.i4jArgs`属性，那么`project.ext.i4jArgs`属性总是`null`在我在我的任务中声明输入时（显然）。`TaskInputs` [(here)](http://www.gradle.org/docs/current/javadoc/org/gradle/api/tasks/TaskInputs.html#property%28java.lang.String,%20java.lang.Object%29)的 API说我可以将闭包作为值传递。有没有办法可以使用闭包来延迟评估`project.ext.i4jArgs`足够长的时间以保证它已被初始化？我虽然以下方法会起作用，但永远不会调用闭包。

```
inputs.property("i4jArgs", {
    project.afterEvaluate {
        println "has args ${project.ext.has('i4jArgs')}"
        project.ext.has('i4jArgs') ? project.ext.i4jArgs : null
    }
}) 
```

我知道编写一个支持我想要的所有配置的插件对于我给出的特定示例可能是一个更好的选择，但无论如何我想弄清楚我在这里误解了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:37:39.967

我会`project.afterEvaluate`在第一次关闭时删除。这是为了添加在项目配置后执行的闭包。

`project.afterEvaluate`实际发生的情况是，当gradle解析输入时，它调用第一个闭包，然后调用现在处于执行阶段。

# asp.net - WinDBG w3wp.exe x64 挂起转储 WRONG_SYMBOLS

> ID：15938363
> 
> 赞同：4
> 
> 时间：2013-04-10T23:36:33.280
> 
> 标签：asp.net, iis, 64-bit, windbg

我正在分析在 IIS 7.5、Windows 2008 R2 64 中的 64 位 ASP.NET v4.0 AppPool 下运行的挂起 ASP.NET MVC 网站问题。我通过 taskmgr 进行了转储，并在 Windows 7 64 位上的 WinDBG x64 中进行分析.

运行时`!analyze -v`我看到错误`WRONG_SYMBOLS`和`BUGCHECK_STR: APPLICATION_FAULT_WRONG_SYMBOLS`. 这阻碍了我的调试，因为我无法检查一些我需要调查死锁的线程。

**细节**

我的符号服务器是`SRV*D:\DOWNLOADEDSYMBOLS*http://msdl.microsoft.com/download/symbols` 我已删除此本地文件夹并允许从 m$ 下载所有符号。

我已经加载了sos`.loadby sos clr`

输出`!analyze -v`：

```
*******************************************************************************
*                                                                             *
*                        Exception Analysis                                   *
*                                                                             *
*******************************************************************************

FAULTING_IP: 
+0
00000000`00000000 ??              ???

EXCEPTION_RECORD:  ffffffffffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 0000000000000000
   ExceptionCode: 80000003 (Break instruction exception)
  ExceptionFlags: 00000000
NumberParameters: 0

FAULTING_THREAD:  0000000000000544

DEFAULT_BUCKET_ID:  WRONG_SYMBOLS

PROCESS_NAME:  w3wp.exe

ERROR_CODE: (NTSTATUS) 0x80000003 - {EXCEPTION}  Breakpoint  A breakpoint has been reached.

EXCEPTION_CODE: (HRESULT) 0x80000003 (2147483651) - One or more arguments are invalid

NTGLOBALFLAG:  0

APPLICATION_VERIFIER_FLAGS:  0

APP:  w3wp.exe

MANAGED_STACK: !dumpstack -EE
OS Thread Id: 0x944 (15)
Current frame: 
Child-SP         RetAddr          Caller, Callee

PRIMARY_PROBLEM_CLASS:  WRONG_SYMBOLS

BUGCHECK_STR:  APPLICATION_FAULT_WRONG_SYMBOLS

LAST_CONTROL_TRANSFER:  from 000007fefd8910dc to 000000007712135a

STACK_TEXT:  
00000000`000afac8 000007fe`fd8910dc : 00000000`00000000 00000000`00000000 000007fe`f9921630 000007fe`fadb7f66 : ntdll!NtWaitForSingleObject+0xa
00000000`000afad0 000007fe`f99241bc : 00000000`00000000 00000000`ffaf6de0 00000000`00000000 00000000`00000128 : KERNELBASE!WaitForSingleObjectEx+0x79
00000000`000afb70 00000000`ffaf3c60 : 00000000`fffffffe 00000000`00415f90 00000000`ffaf4588 000007fe`f9920000 : w3wphost!AppHostInitialize+0x278
00000000`000afbd0 00000000`ffaf11f1 : 00000000`00000000 00000000`ffaf1351 00000000`00000000 000003fd`deed0e35 : w3wp!wmain+0x470
00000000`000afd60 00000000`76e6652d : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : w3wp!PerfStopProvider+0x19b
00000000`000afda0 00000000`770fc521 : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : kernel32!BaseThreadInitThunk+0xd
00000000`000afdd0 00000000`00000000 : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : ntdll!RtlUserThreadStart+0x1d

STACK_COMMAND:  ~0s; .ecxr ; kb

FOLLOWUP_IP: 
w3wphost!AppHostInitialize+278
000007fe`f99241bc f605e1b4000003  test    byte ptr [w3wphost!g_dwDebugFlags (000007fe`f992f6a4)],3

SYMBOL_STACK_INDEX:  2

SYMBOL_NAME:  w3wphost!AppHostInitialize+278

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: w3wphost

IMAGE_NAME:  w3wphost.dll

DEBUG_FLR_IMAGE_TIMESTAMP:  4ce7c9ef

FAILURE_BUCKET_ID:  WRONG_SYMBOLS_80000003_w3wphost.dll!AppHostInitialize

BUCKET_ID:  X64_APPLICATION_FAULT_WRONG_SYMBOLS_w3wphost!AppHostInitialize+278

WATSON_STAGEONE_URL:  http://watson.microsoft.com/StageOne/w3wp_exe/7_5_7601_17514/4ce7afa2/unknown/0_0_0_0/bbbbbbb4/80000003/00000000.htm?Retriage=1

Followup: MachineOwner
--------- 
```

输出`.chain`：

```
Extension DLL search Path:
    C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\WINXP;C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\winext;C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\winext\arcade;C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\pri;C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64;C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\winext\arcade;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Intel\Services\IPT\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\Program Files (x86)\Microsoft Team Foundation Server 2012 Power Tools\;C:\Program Files (x86)\Microsoft Team Foundation Server 2012 Power Tools\Best Practices Analyzer\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\;C:\Program Files (x86)\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files\Microsoft\Web Platform Installer\;C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files (x86)\Windows Kits\8.0\Windows Performance Toolkit\
Extension DLL chain:
    D:\DOWNLOADEDSYMBOLS\sos_AMD64_AMD64_4.0.30319.18034.dll\50B5A78395e000\sos_AMD64_AMD64_4.0.30319.18034.dll: image 4.0.30319.18034, API 1.0.0, built Wed Nov 28 18:45:59 2012
        [path: D:\DOWNLOADEDSYMBOLS\sos_AMD64_AMD64_4.0.30319.18034.dll\50B5A78395e000\sos_AMD64_AMD64_4.0.30319.18034.dll]
    sosex: image 4.5.0.0, API 1.0.0, built Thu Oct 04 03:57:55 2012
        [path: C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\sosex.dll]
    D:DOWNLOADEDSYMBOLS\sos_AMD64_AMD64_4.0.30319.18034.dll\50B5A78395e000\sos_AMD64_AMD64_4.0.30319.18034.dll: image 4.0.30319.18034, API 1.0.0, built Wed Nov 28 18:45:59 2012
        [path: D:\DOWNLOADEDSYMBOLS\sos_AMD64_AMD64_4.0.30319.18034.dll\50B5A78395e000\sos_AMD64_AMD64_4.0.30319.18034.dll]
    C:\Windows\Microsoft.NET\Framework64\v4.0.30319\sos: image 4.0.30319.18034, API 1.0.0, built Wed Nov 28 18:45:59 2012
        [path: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\sos.dll]
    dbghelp: image 6.2.9200.20512, API 6.2.6, built Fri Sep 07 17:45:49 2012
        [path: C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\dbghelp.dll]
    ext: image 6.2.9200.20522, API 1.0.0, built Fri Sep 21 20:17:05 2012
        [path: C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\winext\ext.dll]
    exts: image 6.2.9200.16384, API 1.0.0, built Thu Jul 26 14:15:20 2012
        [path: C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\WINXP\exts.dll]
    uext: image 6.2.9200.16384, API 1.0.0, built Thu Jul 26 14:15:09 2012
        [path: C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\winext\uext.dll]
    ntsdexts: image 6.2.9200.16384, API 1.0.0, built Thu Jul 26 14:16:01 2012
        [path: C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\WINXP\ntsdexts.dll] 
```

`.reload`与输出`!sym noisy`

```
DBGHELP: ntdll - public symbols  
      d:\downloadedsymbols\ntdll.pdb\15EB43E23B12409C84E3CC7635BAF5A32\ntdll.pdb
..............................................................
DBGHELP: KERNELBASE - public symbols 
      d:\downloadedsymbols\kernelbase.pdb\91C72371DD43448192B7B46F5ED10AA02\kernelbase.pdb 
```

**死锁分析**

*线程列表*

输出`!threads`：

```
 ID  OSID    ThreadOBJ           State   GC Mode     GC Alloc Context                    Domain              Lock Count  Apt Exception
7   1   7a8     0000000001f92a50    28220   Preemptive  0000000000000000:0000000000000000   000000000119ee70    0           Ukn 
13  2   1764    0000000001fa9fb0    2b220   Preemptive  0000000102D5DCC8:0000000102D5F7E8   000000000119ee70    0           MTA (Finalizer) 
15  3   944     0000000001ffa010    102a220 Preemptive  0000000000000000:0000000000000000   000000000119ee70    0           MTA (Threadpool Worker) 
16  4   bb0     0000000002006ec0    21220   Preemptive  0000000000000000:0000000000000000   000000000119ee70    0           Ukn
 6  15  1018    00000000086704d0    20220 Preemptive  0000000000000000:0000000000000000 000000000119ee70 0     Ukn 
35  16  12e4    00000000098fc820  202b220 Preemptive  000000010400E5A0:00000001040102B0 0000000002005e90 1     MTA 
```

....ETC

输出`!dlk`：

```
*DEADLOCK DETECTED*
CLR thread 0x15 holds the lock on SyncBlock 0000000009913cf8 OBJ:00000000ffe31898
  [System.Collections.Generic.Dictionary``2[[System.String, mscorlib],[System.Resources.ResourceLocator, mscorlib]]]
...and is waiting for the lock on SyncBlock 0000000009913ca8 OBJ:00000000ffe318e8[System.Resources.ResourceReader]
CLR thread 0x16 holds the lock on SyncBlock 0000000009913ca8 OBJ:00000000ffe318e8[System.Resources.ResourceReader]
...and is waiting for the lock on SyncBlock 0000000009913cf8 OBJ:00000000ffe31898
  [System.Collections.Generic.Dictionary``2[[System.String, mscorlib],[System.Resources.ResourceLocator, mscorlib]]]
CLR Thread 0x15 is waiting at System.Resources.ResourceReader.AllocateStringForNameIndex(Int32, Int32 ByRef)(+0x17 IL,+0xc9 Native)
CLR Thread 0x16 is waiting at System.Resources.RuntimeResourceSet.GetObject(System.String, Boolean, Boolean)(+0xee IL,+0x375 Native) 
```

*线程15分析*

输出`~6s`：

```
ntdll!ZwDelayExecution+0xa:
00000000`771213aa c3              ret 
```

..然后输出`!clrstack`：

```
OS Thread Id: 0x1018 (6)
        Child SP               IP Call Site
GetFrameContext failed: 1
0000000000000000 0000000000000000 <unknown> 
```

*线程16分析*

输出`~35s`：

```
ntdll!NtWaitForMultipleObjects+0xa:
00000000`771218ca c3              ret 
```

输出`!clrstack`：

```
OS Thread Id: 0x12e4 (35)
    Child SP               IP Call Site
000000000cc9e188 00000000771218ca [HelperMethodFrame_1OBJ: 000000000cc9e188]     System.Threading.WaitHandle.WaitMultiple(System.Threading.WaitHandle[], Int32, Boolean, Boolean)
000000000cc9e2c0 000007fef65e562c     System.Threading.WaitHandle.WaitAny(System.Threading.WaitHandle[], Int32, Boolean)
000000000cc9e320 000007fef5670d06 System.Net.TimerThread.ThreadProc()
000000000cc9e3f0 000007fef65a0a05     System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext,     System.Threading.ContextCallback, System.Object, Boolean)
000000000cc9e550 000007fef65a0769     System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext,     System.Threading.ContextCallback, System.Object, Boolean)
000000000cc9e580 000007fef65a0727     System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext,     System.Threading.ContextCallback, System.Object)
000000000cc9e5d0 000007fef65b3e81 System.Threading.ThreadHelper.ThreadStart()
000000000cc9e8e8 000007fef9ec07f3 [GCFrame: 000000000cc9e8e8] 
000000000cc9ec18 000007fef9ec07f3 [DebuggerU2MCatchHandlerFrame: 000000000cc9ec18] 
000000000cc9edf8 000007fef9ec07f3 [ContextTransitionFrame: 000000000cc9edf8] 
000000000cc9efe8 000007fef9ec07f3 [DebuggerU2MCatchHandlerFrame: 000000000cc9efe8] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T02:29:48.087

忽略那个错误。!analyze -v 仅对故障转储有用（我相信您可以将一些参数传递给它以用于故障转储以外的其他事情）。它报告的是“崩溃”的原因是调试点被命中。这是真的，因为当你转储一个进程时，它会向该进程注入一个线程并导致一个断点被命中，然后转储该进程的内存。所以分析告诉你的是，“崩溃”的原因是击中了一个断点。可以放心地忽略它。当您去查看它们时，您应该能够看到所有线程。其他一切都应该正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T23:34:32.670

我认为您只是误解了命令的输出，该`!blk`命令为我们提供了违规线程的 CLR 线程 ID，而不是它们的序号（这是`~s`命令所期望的）。要获取这两个线程的序号，您可以使用 `!threads`命令的输出。

从你的例子：

```
 ID  OSID    ThreadOBJ           State   GC Mode     GC Alloc Context                    Domain              Lock Count  Apt Exception
7   1   7a8     0000000001f92a50    28220   Preemptive  0000000000000000:0000000000000000   000000000119ee70    0           Ukn 
```

7 是序数，0x1 是 CLR 线程 ID，0x7a8 是 OS 线程 ID

# mysql - MySQL - 使用标题名称作为查询过滤器的一部分

> ID：15938364
> 
> 赞同：0
> 
> 时间：2013-04-10T23:36:39.763
> 
> 标签：mysql

我对 MySQL 比较陌生，遇到了一个我似乎找不到解决方案的问题。我已经搜索但找不到答案。我对我没有正确提出问题的可能性持开放态度。开始：

我正在尝试使用给定列的名称和一个表中该列中的值从另一个表中提取值。第一个表包含 3 列，其中对响应进行了编码。第二个表包含每个项目的每个代码的定义。相同的数字代码根据项目与不同的含义相关联。例如：

```
table1（此表无法更改）：
-------------------------------------------------- ------------
|result_id | f_initial | l_name | 项目_A | 项目_B | 项目_C |
-------------------------------------------------- ------------
| 1 | j | 母鹿 | 1 | 3 | 2 |
| 2 | ķ | 史密斯 | 3 | 1 | 2 |
| 3 | l | 威廉姆斯 | 2 | 2 | 1 |
-------------------------------------------------- ------------

table2（这个表可以修改，拆分，或者任何需要做的事情）：
------------------------------------------
|item_id | 项目名称 | 分数 | 定义 |
------------------------------------------
| 1 | 项目_A | 1 | 同意 |
| 2 | 项目_A | 2 | 中性 |
| 3 | 项目_A | 3 | 不同意 |
| 4 | 项目_B | 1 | 可能|
| 5 | 项目_B | 2 | 不太可能|
| 6 | 项目_B | 3 | 没有回复 |
| 7 | 项目_C | 1 | 是的 |
| 8 | 项目_C | 2 | 没有 |
------------------------------------------

我的目标是让查询输出以下内容：
-------------------------------------------------- ------------------
|result_id | f_initial | l_name | 项目_A | 项目_B | 项目_C |
-------------------------------------------------- ------------------
| 1 | j | 母鹿 | 同意 | 没有回复 | 没有 |
| 2 | ķ | 史密斯 | 不同意 | 可能| 没有 |
| 3 | l | 威廉姆斯 | 中性 | 不太可能| 是的 |
-------------------------------------------------- ------------------

```

非常感谢任何帮助或指导。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:50:07.597

您必须在`item_A/B/C`和`score`列上连接两个表

```
select t1.result_id, t1.f_initial, t1.l_name,
       t2a.definition as item_a,
       t2b.definition as item_b,
       t2c.definition as item_c
from table1 t1
join table2 t2a on t2a.score = t1.item_a
join table2 t2b on t2b.score = t1.item_b
join table2 t2c on t2c.score = t1.item_c
where t2a.item_name = 'item_A'
      and t2b.item_name = 'item_B'
      and t2c.item_name = 'item_C' 
```

# mysql - mysql获取具有限制的几列的平均值

> ID：15938366
> 
> 赞同：2
> 
> 时间：2013-04-10T23:36:48.270
> 
> 标签：mysql

我试图从 3 列中获取最后 60 项的平均值，但我得到一个错误：

```
#1248 - Every derived table must have its own alias 
```

这是查询：

```
SELECT AVG( Sensor1 ) , AVG( Sensor2 ) , AVG( Sensor3 ) 
FROM (

    SELECT Sensor1, Sensor2, Sensor3
    FROM temperatur
    ORDER BY Zeit DESC 
    LIMIT 0 , 60
) 
```

我对我相信的别名很迷茫..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T23:40:44.723

MySQL 需要所有派生表和子查询的别名，而右括号后缺少别名：

```
SELECT AVG( d.Sensor1 ) , AVG( d.Sensor2 ) , AVG( d.Sensor3 ) 
FROM 
(
    SELECT Sensor1, Sensor2, Sensor3
    FROM temperatur
    ORDER BY Zeit DESC 
    LIMIT 0 , 60
) d --- add this 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:40:49.177

我猜是语法，但我相信你需要更多这样的东西：

从（

```
SELECT Sensor1, Sensor2, Sensor3
FROM temperatur
ORDER BY Zeit DESC 
LIMIT 0 , 60 
```

) T

# c - 为什么这个 C sizeof 函数在不同的上下文中显示不同的值？

> ID：15938372
> 
> 赞同：0
> 
> 时间：2013-04-10T23:37:06.157
> 
> 标签：c, sizeof

一些背景：iOS 应用程序开发。Xcode 中的 Objective-C 代码。

这个让我困惑了几个小时：

我创建了一个小结构：

```
struct EIVertex {
    GLKVector3      P;
    GLKVector3      N;
    GLKVector3      barycentric;
    GLKVector2      st;
}; 
```

`GLKVector3`并且`GLKVector2`是在 GLKit 框架中找到的类型。

这是奇怪的：

```
sizeof(GLKVector2) = 8
sizeof(GLKVector3) = 12
sizeof(EIVertex) = 48 
```

的大小`EIVertex`是**48**，但应该是**44** (12 + 12 + 12 + 8 = 44)。

有人可以解释为什么会有这种大小差异吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:38:51.647

C 中的结构倾向于被填充以进行数据对齐。查看[此页面](http://en.wikipedia.org/wiki/Data_structure_alignment#Typical_alignment_of_C_structs_on_x86)了解更多信息。[另请参阅此问题](https://stackoverflow.com/questions/4306186/structure-padding-and-structure-packing)中的答案。

# cocoa - 将复选框绑定到共享用户默认值

> ID：15938374
> 
> 赞同：3
> 
> 时间：2013-04-10T23:37:13.710
> 
> 标签：cocoa, cocoa-bindings

我正在构建一个表格以在我的首选项窗格中显示一些数据。所有数据都存在于 NSUserDefaults 中。表格中有一个复选框可以启用/禁用所列设备的数据。复选框是唯一可编辑的单元格。

该表正确显示来自共享用户默认值的数据。所以我知道我已将表格内容正确映射到正确的共享用户默认模型密钥路径。但是，当我切换复选框时，新数据根本不会写入默认值。

这是复选框设置的一瞥...

![在此处输入图像描述](https://i.stack.imgur.com/ygORi.png)

我尝试将选择器操作分配给 NSButton（复选框），认为我可以以编程方式设置默认值。奇怪的是，这个动作永远不会被触发。我设置了一个简单的操作，只是做了一个 NSLog。单击复选框时它从未被触发。

**更新**：这样您就可以看到我的默认数据结构是什么样的，这是默认命令的输出。这张表后面实际上没有任何代码。

```
{
    ClimateDeviceData =     (
                {
            deviceName = Nest;
            deviceSetting = "76";
            display = 1;
            structure = Home;
            uuid = d01AA02AB145204VR;
        }
    );
    ClimateLoginAtLaunch = 1;
    ClimateMenuBarIconStyle = "Nest Temp Settings";
} 
```

**更新#2**：此时我会接受一个解决方案，即简单地能够从复选框中调用选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T07:46:04.420

我在应用程序中做大致相同的事情。不完全一样，但基本原理是一样的。一个填充有绑定的表格，其中有一个按钮（可以是复选框或其他按钮，没关系）。

我尝试了按钮上的操作，但它也不起作用，所以最后我使用了 KVC 概念。

*   我在 XIB 中使用 arrayController 在我的代码中引用一个可变数组，该数组存储具有状态属性（布尔值）的自定义对象的多个实例。
*   基于视图的 tableview 使用排列对象控制器键绑定到 arrayController。
*   按钮绑定到 tableCellView （排列的对象），使用 keyPath: objectValue.status （有效地获取该行上自定义对象的状态属性）。

在我的控制器代码中，我使用以下几行来创建包含自定义对象的可变数组：

```
 smartApp *appFound = [[smartApp alloc] initWithApplicationIdentifier:key];

  if (appFound)
  {
      [appFound setStatus:[NSNumber numberWithBool:YES]];

      [appFound addObserver:self
                 forKeyPath:@"status"
                    options:(NSKeyValueObservingOptionNew |
                             NSKeyValueObservingOptionOld)
                    context:NULL];

      [_appsArray addObject:appFound];
  } 
```

我在该对象的“状态”键路径上添加了一个观察者。我添加了待处理的代码，观察对象的值变化：

```
- (void)observeValueForKeyPath:(NSString *)keyPath
                  ofObject:(id)anObject
                    change:(NSDictionary *)change
                   context:(void *)context
{
    if ([anObject isKindOfClass:[smartApp class]])
    {
        if ([keyPath isEqual:@"status"])
        {
            NSLog(@"Clicked on row: %lu", (unsigned long)[self.appsArray indexOfObject:anObject]);
        }
    }
} 
```

一旦你在方法中，你可以做你想做的事。它肯定会被调用，并且您会得到与您单击的行匹配的对象、更改字典和键路径。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:28:06.033

您不应该将`NSButton`（复选框）绑定到`Shared User Defaults Controller`而不是它所描绘的，`Table Cell View`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:24:02.660

是的，基于视图的表格视图是不同的。（我自己只是在学习这个。）在基于视图的表格视图中，表格单元视图的 objectValue 是该行表示的对象。您将文本字段、复选框等绑定到该 objectValue 的键路径。

# ios - iOS ooyala 视频播放器：有没有办法播放视频列表？

> ID：15938376
> 
> 赞同：1
> 
> 时间：2013-04-10T23:37:22.647
> 
> 标签：ios, objective-c, ooyala

当当前视频完成时，不是检查播放状态并开始播放下一个视频（通过 embedCode），有没有办法给它一个视频列表（即嵌入代码）然后它一个接一个地播放它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:15:30.907

我假设您在这里谈论的是本机 iOS SDK。

OOOoyalaPlayer 上有一个名为 (BOOL)setEmbedCodes:(NSArray *)embedCodes 的方法，它接收表示嵌入代码的 NSString 数组。这些将按顺序播放，假设 actionAtEnd 设置为其默认值 OOOoyalaPlayerActionAtEndContinue。

# google-ads-api - Google AdWords 转化跟踪代码中的“&”或“&”？

> ID：15938383
> 
> 赞同：0
> 
> 时间：2013-04-10T23:38:09.940
> 
> 标签：google-ads-api

我正在我的网站上安装 Google AdWords 转换跟踪代码，并注意到 Google 提供的部分代码`&amp;`在 URL 查询字符串中使用。例如

```
<img height="1" width="1" style="border-style:none;" alt=""
src="//www.googleadservices.com/pagead/conversion/1000252671/
?value=0&amp;label=EQfkDGsBrkTPj_YU6FH&amp;guid=ON&amp;script=0"/> 
```

但是，[显示的是 Google AdWords 支持页面`&`，而不是`&amp;`](http://support.google.com/adwords/answer/1722054?hl=en&from=86276&rd=1)（展开“跟踪您网站上的转化”，然后展开“第 2 步”，然后查看第二个代码块的最后几行）

```
<img height=1 width=1 border=0 src="http://www.googleadservices.com/pagead/
conversion/1234567890/?value=10.0&label=Purchase&script=0"> 
```

我应该使用`&amp;`还是`&`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T13:05:57.847

大多数现代浏览器可能会让你侥幸逃脱`&`，但根据 HTML 规范，你必须使用*字符实体引用* `&amp;`。

您可以使用 W3 的验证器（[http://validator.w3.org](http://validator.w3.org)）自行检查；不使用 `&amp;`时会报错**“无法为一般实体“标签”生成系统标识符”**。

# git - 防火墙后面的木偶vcsrepo？

> ID：15938385
> 
> 赞同：0
> 
> 时间：2013-04-10T23:38:22.610
> 
> 标签：git, github, puppet

尝试使用 puppet 中的 vcsrepo 模块为 devstack 安装 GIT 存储库。使用[https://github.com/](https://github.com/) ...但我在防火墙后面。有一个代理服务器可用于 http、https 和 FTP 访问 Internet。

使用此模块时，有没有办法包含代理？我在 vcsrepo 中没有找到任何似乎有效的东西。如果需要，愿意调整（破解）模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T00:47:19.097

我能够在不修改 vcsrepo 代码的情况下解决这个问题。相反，我在 root 的主目录中创建了一个 .gitconfig 文件，该文件指定了 https/http 协议的代理信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T13:47:26.590

您可以查看模块 vcsrepo/lib/puppet/provider/vcsrepo/git.rb

在文件底部附近：

```
def git_with_identity(*args) 
```

在上述行下方添加以下内容：

```
if @resource.value(:http_proxy)
    ENV['http_proxy'] = @resource.value(:http_proxy)
    ENV['https_proxy'] = @resource.value(:http_proxy)
end 
```

接下来编辑 vcsrepo/lib/puppet/type/vcsrepo.rb - 在最后一个结束之前添加：

```
 newparam :http_proxy do
 desc "http proxy to use to communicate with the outside world"
end 
```

现在在您的木偶清单中，您可以添加 http_proxy var：

```
vcsrepo { '/var/www/blash':
            ensure => present,
            provider => git,
            http_proxy => 'http://prxy.local:8080',
            require => Class['git-core'],
            source => 'http://github.com/blah/blah.git';
    } 
```

# php - PHP解析JSON以获取多维数组中键的值

> ID：15938399
> 
> 赞同：1
> 
> 时间：2013-04-10T23:39:14.907
> 
> 标签：php, json, foreach

我正在尝试使用 PHP 解析 JSON，但我遇到了麻烦，因为我的数组是多维的，而且我不一定知道我要查找的所有内容的名称。我想要做的是获取 JSON 文件中每个项目的 ID。我在这里查看过，但我发现的解决方案仅适用于密钥的一个实例，或者要求您知道密钥的值。为了向您展示我想要的示例，这是我的 JSON。

```
{
   "products_and_categories":{
      "new":[
         {
            "category_name":"Jacket",
            "name":"Half Zip Windbreaker",
            "position":3,
            "sale_price":0,
            "image_url":"0/65030/Half_Zip_Windbreaker_Green_1365029293_cart_1365029294.jpg",
            "price":14800,
            "new_item":true,
            "detail_view_url":null,
            "id":1950
         },
         {
            "category_name":"Jacket",
            "name":"The North Face\u00ae/Supreme\u003Cbr\u003EReflective 3M\u00ae Mountain Parka",
            "position":0,
            "sale_price":0,
            "image_url":"0/65059/The_North_Face--r----s--Supreme_br_Reflective_3M--r--_Mountain_Parka_Red_1365029303_cart_1365029305.jpg",
            "price":49800,
            "new_item":true,
            "detail_view_url":null,
            "id":1951
         },
         {
            "category_name":"Hats",
            "name":"Rubber Logo Camp Cap",
            "position":29,
            "sale_price":0,
            "image_url":"0/64915/Rubber_Logo_Camp_Cap_Navy_1365029249_cart_1365029251.jpg",
            "price":4800,
            "new_item":true,
            "detail_view_url":null,
            "id":1947
         }
      ],
      "Hats":[
         {
            "category_name":"Hats",
            "name":"Rubber Logo Camp Cap",
            "position":29,
            "sale_price":0,
            "image_url":"0/64915/Rubber_Logo_Camp_Cap_Navy_1365029249_cart_1365029251.jpg",
            "price":4800,
            "new_item":true,
            "detail_view_url":null,
            "id":1947
         },
         {
            "category_name":"Hats",
            "name":"Enamel S 5-Panel",
            "position":34,
            "sale_price":0,
            "image_url":"0/63614/Enamel_S_5-Panel_Green_1362616033_cart_1362616034.jpg",
            "price":5400,
            "new_item":false,
            "detail_view_url":null,
            "id":1904
         },
         {
            "category_name":"Hats",
            "name":"Big Striped Beanie",
            "position":35,
            "sale_price":0,
            "image_url":"0/61745/Big_Striped_Beanie_Green_1362023179_cart_1362023181.jpg",
            "price":3200,
            "new_item":false,
            "detail_view_url":null,
            "id":1853
         }
      ],
      "Decks":[
         {
            "category_name":"Decks",
            "name":"Power, Corruption, Lies Cruiser",
            "position":46,
            "sale_price":0,
            "image_url":"0/62026/Power__Corruption__Lies_Cruiser_Black_1362023285_cart_1362023286.jpg",
            "price":6000,
            "new_item":false,
            "detail_view_url":null,
            "id":1861
         },
         {
            "category_name":"Decks",
            "name":"Bling Logo Deck",
            "position":47,
            "sale_price":0,
            "image_url":"0/62018/Bling_Logo_Deck_Platinum_1362023282_cart_1362023283.jpg",
            "price":4900,
            "new_item":false,
            "detail_view_url":null,
            "id":1860
         }
      ],
      "Sweatshirts":[
         {
            "category_name":"Sweatshirts",
            "name":"Heathered Crewneck",
            "position":11,
            "sale_price":0,
            "image_url":"0/63855/Heathered_Crewneck_Heather_Pink_1362616124_cart_1362616125.jpg",
            "price":11800,
            "new_item":false,
            "detail_view_url":null,
            "id":1914
         },
         {
            "category_name":"Sweatshirts",
            "name":"Checkered Pullover",
            "position":12,
            "sale_price":0,
            "image_url":"0/63826/Checkered_Pullover_Yellow_1362616113_cart_1362616114.jpg",
            "price":14800,
            "new_item":false,
            "detail_view_url":null,
            "id":1913
         }
      ]
   },
   "unique_detail_view_url_prefixes":[

   ],
   "sales_available":false,
   "unique_image_url_prefixes":[
      "http://d2flb1n945r21v.cloudfront.net/production/uploaded/style/"
   ]
} 
```

现在，如果我只想要新类别中项目的 ID，我的代码就可以工作，但我想要实现的是获取整个 JSON 文件中每个项目的 ID。这是我的代码。

```
<?php
$content = json_decode($json);
foreach($content->products_and_categories->new as $entry){
    echo $entry->id;
} 
```

它返回这个：

```
1950
1951
1947 
```

那么如何返回所有其他类别的 ID？谢谢您阅读此篇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:52:17.820

您只需要通过迭代每个类别和这些类别中的每个产品来稍微改变循环方法。

```
foreach($content->products_and_categories as $category_name => $products) {
    echo $category_name;
    foreach ($products as $product) {
        echo $product->id;
    }
} 
```

# java - 严重：java.lang.ClassNotFoundException：com.mysql.jdbc.Driver

> ID：15938402
> 
> 赞同：0
> 
> 时间：2013-04-10T23:39:26.500
> 
> 标签：java, mysql, netbeans, netbeans-7

我在 Netbeans 中编写了一个示例 Java EE 程序（Web 应用程序）来连接到 MySQL 数据库并获取数据。我的程序如下：

```
package A;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author Somnath
 */
@WebServlet(name = "myservlet", urlPatterns = {"/myservlet"})
public class myservlet extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
            /* TODO output your page here. You may use following sample code. */

        Class.forName("com.mysql.jdbc.Driver");
        String url = "jdbc:mysql://localhost/demo";
        String user = "root";
        String password = "";
        Connection con = DriverManager.getConnection(url);
        Statement st = con.createStatement();
        ResultSet rs = st.executeQuery("SELECT * FROM user_table");

        if (rs.next()) {//get first result
            out.println(rs.getString(1));//coloumn 1
        }

        } catch (SQLException ex) {
            Logger.getLogger(myservlet.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(myservlet.class.getName()).log(Level.SEVERE, null, ex);
        } finally {            
            out.close();
        }
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

但是，当我直接运行 servlet 时，我没有在浏览器中获得输出。相反，我的 Glassfish 服务器日志中有此错误。

```
SEVERE: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:188)
    at A.myservlet.processRequest(myservlet.java:48)
    at A.myservlet.doGet(myservlet.java:95)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

任何人都可以帮助我成功执行我的程序！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:48:41.293

确保 JDBC jar 在 WEB-INF/lib 中可用；[或者您可以按照http://docs.oracle.com/cd/E19798-01/821-1752/beaml/index.html](http://docs.oracle.com/cd/E19798-01/821-1752/beaml/index.html)上的说明使其在全球范围内可访问。

# c++ - HashTable 删除函数 C++

> ID：15938403
> 
> 赞同：2
> 
> 时间：2013-04-10T23:39:36.020
> 
> 标签：c++, hashtable

我对 C++ 很陌生，我正在使用 HashTables 创建一个程序。这是为了家庭作业。这是我第一次使用和创建 HashTables，所以请提前原谅我，因为我不完全知道我在做什么。我现在遇到的主要问题是合并我的`remove()`功能。我可以编译代码，但是当我运行测试程序时，它崩溃了。我收到的**错误是**

> 列表迭代器不可递减

我的删除功能基于我的教授提供给我们的插入功能。只是改变了一些东西。这是我的课`HTable`和我的`remove()`功能。

```
class HTable
{
public:
    HTable(int size);
    void insert(  const string &s);
    void remove(string key);

private:
    vector<list<string>> List;
    int currSize;
    int tableSize;
    int hash(const string &key);
    int hashFunction(string key);
    int HTableSize;
    int *status_arr;
    ostream &   operator <<( ostream &);
}; 
```

`remove()`功能

```
inline void HTable::remove(string key)
{
    list<string> List;

    if( find( List.begin( ), List.end( ), key )  ==  List.begin( ) )
    {
        List.pop_back();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:43:51.337

```
inline void HTable::remove( string key)
{
   list<string> List;

   if( find( List.end( ), List.begin( ), key )  ==  List.begin( ) )
   {         //^^^^^^^^^^^^^^^^^^^^^^^^^
     List.pop_back();
   }

} 
```

如果根据 find 的原型使用算法，则应该放在`List.begin()`前面：`List.end()``find`

```
template<class InputIterator, class T>
InputIterator find (InputIterator first, InputIterator last, const T& val) 
```

同时：

`first, last Input iterators to the initial and final positions in a sequence. The range searched is [first,last), which contains all the elements between first and last, including the element pointed by first but not the element pointed by last.`

此外，您的查找条件是错误的：

```
 if( find( List.begin( ), List.end( ), key )  !=  List.end( ) )
 {                                            //^^^^^
    //if key exist, remove
 } 
```

在您的代码中，它将继续删除，直到本地`List`为空。

您的删除功能应如下所示：

```
 inline void HTable::remove( string key)
 {
   vector<list<string> >::iterator it;
   for ( it = List.begin(); it != List.end(); it ++)
   {

     if( find( (*it).begin( ), (*it).end( ), key )  !=  (*it).end( ) )
     {
        (*it).pop_back();
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:49:18.517

如果您想向后遍历列表，请使用 rbegin 和 rend 获取反向迭代器（如果您需要这个，是的 - 有时它可能会更好，更快：取决于上下文）：

```
for (std::list<...>::reverse_iterator it=list.rbegin(); it!=list.rend(); ++it) 
```

你也可以使用自动：

`for( auto it=list.rend(); it!=list.rbegn(); ++it ) {...}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T01:56:58.297

由于您通过查找精确值从列表中删除，因此让标准模板库帮助您更容易。

对于 C++98，创建一个谓词对象来检查对象的相等性：

```
struct string_equal
{
   string_equal(const std::string& tgt) : target(tgt)
   {}

   bool operator()(const std::string& key) const
   {
      return key == target;
   }

   const std::string& target;
};

void remove(const std::string& key)
{
   // find the appropriate list in your vector
   list<string>& List = get_correct_list_for_key(key);

   list<string>::iterator new_end = std::remove_if(List.begin(), List.end(), string_equal(key));

   List.erase(new_end, List.end());
} 
```

在 C++11 中，您可以使用 lambda 更轻松地做到这一点：

```
void remove(const std::string& key)
{
   list<string>& List = get_correct_list_for_key(key);

   auto new_end = std::remove_if(List.begin(), List.end(),
     [&] (const std::string& target) -> bool { return target == key; });

   List.erase(new_end, List.end());
} 
```

# iphone - 游戏中心基于距离的匹配？

> ID：15938404
> 
> 赞同：1
> 
> 时间：2013-04-10T23:39:40.850
> 
> 标签：iphone, ios, game-center

假设我只想匹配那些在 GPS 坐标中相距一定距离的人。这可以通过游戏中心实现吗？

或者，如果我的应用有玩家的 GPS 坐标和他们的游戏中心配置文件，是否允许我指定非好友玩家邀请？

谢谢

# iphone - NSMutableArrays 没有将它们的对象保存在共享实例中

> ID：15938405
> 
> 赞同：0
> 
> 时间：2013-04-10T23:39:42.563
> 
> 标签：iphone, ios, objective-c

我有一个 sharedInstance ，它由许多 NSMutableArrays 组成，其中包含我的所有表单数据，这些数据分布在我的应用程序中的许多视图中。

他们在 .h 中的声明示例如下所示

```
@property (atomic, retain) NSMutableArray *i_date;
@property (atomic, retain) NSMutableArray *i_tailNumber;
@property (atomic, retain) NSMutableArray *i_pic;
@property (atomic, retain) NSMutableArray *i_sic; 
```

并在 .m (-init) 中

```
self = [super init];

_i_date = [NSMutableArray array];
_i_tailNumber = [NSMutableArray array];
_i_pic = [NSMutableArray array];
_i_sic = [NSMutableArray array]; 
```

共享实例函数是

```
+(id) sharedInstance
{    
    static id sharedInstance = nil;
    if (sharedInstance == nil) {
        sharedInstance = [[self alloc] init];        
    }
    return sharedInstance;
} 
```

编辑：

我在第一个视图上用空字符串实例化所有数组，如下所示

```
[_fd.i_date addObject:@""];
[_fd.i_tailNumber addObject:@""]; 
```

最后，我在为 segue 功能做准备时以这种方式与我的数据交互

```
[_fd.i_date replaceObjectAtIndex:leg withObject:transferDate];
rinse and repeate 
```

我的问题是，我今天通过阅读各种博客、文档和 SO 上的所有精彩资源花了很多时间进行调查，当我转到另一个视图时，我的数组会丢失我放置在其中的任何对象。

当我点击上面的代码行时，我得到了经典

```
signal SIGABRT 
```

错误，它抱怨我的数组是空的（0 个对象），所以它不能替换任何东西。

我怀疑我没有正确处理我的共享实例，而且……也许，我的数组的多个实例正在被分配，但我确信我的理解已经转变了。

任何想法正在发生什么？我想我提供了所有必要的代码片段，但如果我忘记了什么，就问吧。再次感谢！

杰西

* * *

**编辑：** 你们很快！:DI 在启用 ARC 的情况下创建了我的 OBJ-C 文件，所以我想我正在使用它。我是一个 C++ 人，主要是所以这个可选的手拿着 mem 的东西对我来说本来就模棱两可。

* * *

**编辑：** 完整的错误是

```
2013-04-10 20:25:03.239 ProjectName[4230:c07] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM replaceObjectAtIndex:withObject:]: index 0 beyond bounds for empty array'
*** First throw call stack:
(0x1caf012 0x10ece7e 0x1c65ba9 0x7c7e 0x478b87 0x478c14 0x1100705 0x342c0 0x270a64 0x1100705 0x342c0 0x34258 0xf5021 0xf557f 0xf46e8 0x63cef 0x63f02 0x41d4a 0x33698 0x1c0adf9 0x1c0aad0 0x1c24bf5 0x1c24962 0x1c55bb6 0x1c54f44 0x1c54e1b 0x1c097e3 0x1c09668 0x30ffc 0x222d 0x2155)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:42:48.770

假设您没有使用 ARC，则您的`init`方法使用了糟糕的内存管理。由于您直接访问 ivars（而不是属性），因此您需要保留数组：

```
_i_date = [[NSMutableArray alloc] init];
_i_tailNumber = [[NSMutableArray alloc] init];
_i_pic = [[NSMutableArray alloc] init];
_i_sic = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:44:44.440

您没有使用这些属性，而是创建了自动释放的对象。

要么使用像这样的属性

```
+(id) sharedInstance
{    
    static id sharedInstance = nil;
    if (sharedInstance == nil) {
        sharedInstance = [[self alloc] init];   

         sharedInstance.i_date = [NSMutableArray array];
         sharedInstance.i_tailNumber = [NSMutableArray array];
         sharedInstance.i_pic = [NSMutableArray array];
         sharedInstance.i_sic = [NSMutableArray array];     
    }
    return sharedInstance;
} 
```

或者按照 rmaddy 的建议去做。

* * *

```
[_fd.i_date replaceObjectAtIndex:leg withObject:transferDate]; 
```

此行崩溃，因为数组尚未在索引处有对象`leg`

尝试

```
[_fd.i_date addObject:transferDate]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T23:44:48.600

您应该分配并初始化您`NSMutableArray`的 s：

```
_i_date = [[NSMutableArray alloc] init]; 
```

然后使用你的单例类，即：

```
[[_fd sharedInstance] i_date] addObject...] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:22:56.293

不知道的是，我使用了函数“didMoveToParentViewController”，如果新视图重载并被视图使用，则在显示新视图后调用该函数。在其中，我正在清除所有数组，认为只有在返回父视图时才会调用它，因为“did”这个词是过去时态的词。由于情况并非如此，我在页面加载后立即清除我的数组，这导致在 segues 期间出现空数组。

# vb.net - 停止 VB.net 将诸如 01 之类的输入更改为仅 1？

> ID：15938407
> 
> 赞同：1
> 
> 时间：2013-04-10T23:39:57.947
> 
> 标签：vb.net

我正在努力寻找解决方案。我目前正在尝试接受像 01 这样的输入并通过程序保持这种方式，但是 VB.net 似乎将其格式化为 1。有没有办法阻止它这样做？

提前谢谢你，如果这只是我的愚蠢，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:30:43.340

If you want to keep it as "01" , you should store it in a string format not integer or any numerical data type. If you must use integers , you can display the output only in the format you want like this :

```
Dim int As Integer = 1
Console.Writeline(Format(int, "00")) 
```

This should give you the output in the desired format. I hope that was helpful for you.

# java - Java 服务器的奇怪输出 - 我的网站被黑客入侵了吗？

> ID：15938414
> 
> 赞同：2
> 
> 时间：2013-04-10T23:40:48.260
> 
> 标签：java, html, webserver

我正在使用 Java 构建服务器，以及 Horstmann 的*Big Java*。当我完成一个“简单地与主机建立连接，向主机发送`GET`命令，然后从服务器接收输入直到服务器关闭其连接”的程序时，我决定在我自己的网站上尝试一下。

它返回的代码与*我*[网站上的 html 看起来](http://thelinell.com)完全不同。事实上，它看起来像是完全劫持了我的网站。当然，网站本身看起来还是和往常一样......

我真的不确定我在这里看到了什么。我已经仔细检查了代码是否正确。是Java方面的问题，还是我这边的问题？

这是Java：

```
import java.io.InputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.Scanner;

public class WebGet {
    public static void main(String[] args) throws IOException {
        // Get command-line arguments
        String host;
        String resource;

    if (args.length == 2) {
        host = args[0];
        resource = args[1];
    } else {
        System.out.println("Getting / from thelinell.com");
        host = "thelinell.com";
        resource = "/";
    }

    // Open Socket
    final int HTTP_PORT = 80;
    Socket s = new Socket(host, HTTP_PORT);
    // Get Streams
    InputStream instream = s.getInputStream();
    OutputStream outstream = s.getOutputStream();
    // Turn streams into scanners and writers
    Scanner in = new Scanner(instream);
    PrintWriter out = new PrintWriter(outstream);
    // Send command
    String command = "GET " + resource + "HTTP/1.1\n" + "Host: " + host + "\n\n";
    out.print(command);
    out.flush();
    // Read server response
    while (in.hasNextLine()) {
        String input = in.nextLine();
        System.out.println(input);
    }

    // Close the socket
    s.close();
}
} 
```

现在，返回的代码看起来像一堆广告，而且相当长。为简洁起见，这是它给我的内容的[粘贴箱。](http://pastebin.com/NzTkqCNY)如果需要，我会在此处添加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:07:12.967

您需要在资源 URI 和 HTTP 版本片段之间留一个空格：

```
String command = "GET " + resource + "HTTP/1.1\n" ... 
```

应该：

```
String command = "GET " + resource + " HTTP/1.1\n" ... 
```

现在，您的请求如下所示：

> GET /HTTP/1.1
> 主机：thelinell.com

尽管对 HTTP 1.1 无效，但仍会被您的网络托管服务提供商拦截（可能是[Simple-Request](http://www.w3.org/Protocols/HTTP/1.0/draft-ietf-http-spec.html#Request)），然后会吐出（令人发指的）横幅广告集合。

# metadata - 社交媒体/元数据上的链接

> ID：15938416
> 
> 赞同：1
> 
> 时间：2013-04-10T23:40:50.783
> 
> 标签：metadata, google-plus

我已经进行了几次搜索，试图找到一个没有运气的解决方案。我希望这里有人可以提供帮助。

有一段时间，我在 Facebook 上的链接没有显示缩略图或我的博客文章的描述时遇到问题。他们只是展示了一个标准的描述，并且总是链接到我的主页。我能够通过将元数据更改为以下内容来解决该问题：

```
 <meta property="og:type" content="article" />
  <meta property="og:url" content="<?= "http://www.calsots.com".$_SERVER['REQUEST_URI']; ?>" /> 
  <meta property="og:title" content="<?= urldecode($_GET['title']) ?>" /> 
  <meta property="og:description" content="<?= urldecode($_GET['description']) ?>" /> 
  <meta property="og:image" content="<?= $_GET['image'] ?>" /> 
```

现在，我遇到了 G+ 的问题。当我发布链接时，缩略图不显示，也没有描述。关于如何解决这个问题的任何想法？我确实有 G+ 的其他元数据。

```
 <meta itemprop="name" content="">
   <meta itemprop="description" content="">
   <meta itemprop="image" content=""> 
```

我尝试将内容更改为呼叫、直接描述，我将其留空，甚至将其删除，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:55:07.700

您提供的 Google+ 片段的标记不是完整的 schema.org 微数据集。尽管它提供了数据，但您还没有显示页面本身是否正确设置以指示`itemscope`and `itemtype`。如果可能，您还应该避免使用元标记本身，而是`itemprop`在现有页面元素上指示属性。

有关一般微数据的更多信息，请参阅[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=176035](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=176035) ，有关详细信息，请参阅[http://schema.org/docs/gs.html#microdata_how](http://schema.org/docs/gs.html#microdata_how)如何使用微数据标记您的页面，以及[https://www.google.com/webmasters/tools/richsnippets](https://www.google.com/webmasters/tools/richsnippets)的结构化数据测试工具，它可以帮助确定 Google 如何看待您的页面。

# asp.net - 在 asp.net 中使用扩展方法的模糊调用

> ID：15938420
> 
> 赞同：0
> 
> 时间：2013-04-10T23:41:25.917
> 
> 标签：asp.net, extension-methods

从另一个扩展方法调用扩展方法时，我的解决方案构建正常，但在已发布的站点（或虚拟 asp.net 服务器）中，我收到编译错误“不明确的调用”。

```
public static string ExtensionMethodA(this ObjectToExtend myObj){//code here}

public static string ExtensionMethodB(this ObjectToExtend myObj){
   string a = myObj.ExtensionMethodA(); // this line causes the error.
   return a;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:41:25.917

我还没有阅读足够的内容来确切地知道原因，但这是解决方案：

```
public static string ExtensionMethodA(this ObjectToExtend myObj){//code here}

public static string ExtensionMethodB(this ObjectToExtend myObj){
    string a = ExtensionMethodA(myObj); // correct call.
    return a;
 } 
```

# mysql - 在 vbnet 中插入新行

> ID：15938423
> 
> 赞同：0
> 
> 时间：2013-04-10T23:41:42.370
> 
> 标签：mysql, vb.net

这就是我如何在 vb.net 中的 MYSQL 上插入一个新人

```
Dim cmd2 As New MySqlCommand("INSERT INTO login (username, password) VALUES (username ,
 password)", db_con) 
```

或者有没有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:45:53.970

使用参数化查询来防止 SQL 注入，甚至更好地使用存储过程。

```
Imports System
Imports System.Collections.Generic
Imports System.Linq
Imports System.Text

Imports System.Data
Imports MySql.Data
Imports MySql.Data.MySqlClient

Module Module1

    Sub Main()
        Dim conn As New MySqlConnection()
        conn.ConnectionString = "xyz"
        Dim cmd As New MySqlCommand()

       'Here we execute a command to insert data via stored procedure
        Try
            Console.WriteLine("Connecting to MySQL...")
            conn.Open()
            cmd.Connection = conn

            cmd.CommandText = "add_emp"
            cmd.CommandType = CommandType.StoredProcedure

            cmd.Parameters.AddWithValue("@uname", "Jeremy")
            cmd.Parameters("@uname").Direction = ParameterDirection.Input

            cmd.Parameters.AddWithValue("@pword", "123abc")
            cmd.Parameters("@pword").Direction = ParameterDirection.Input

            cmd.Parameters.AddWithValue("@empno", MySqlDbType.Int32)
            cmd.Parameters("@empno").Direction = ParameterDirection.Output

            cmd.ExecuteNonQuery()

            Console.WriteLine("Employee number: " & cmd.Parameters("@empno").Value)
        Catch ex As MySql.Data.MySqlClient.MySqlException
            Console.WriteLine(("Error " & ex.Number & " has occurred: ") + ex.Message)
        End Try
        conn.Close()
        Console.WriteLine("Done.")

    End Sub

End Module

Sub Main()
    Dim conn As New MySqlConnection()
    conn.ConnectionString = "server=localhost;user=root;database=world;port=3306;password=******;"
    Dim cmd As New MySqlCommand()

    'HERE WE EXECUTE A COMMAND TO CREATE THE TABLE AND STORED PROCEDURE
    Try
        Console.WriteLine("Connecting to MySQL...")
        conn.Open()
        cmd.Connection = conn
        cmd.CommandText = "DROP PROCEDURE IF EXISTS add_emp"
        cmd.ExecuteNonQuery()
        cmd.CommandText = "DROP TABLE IF EXISTS emp"
        cmd.ExecuteNonQuery()
        cmd.CommandText = "CREATE TABLE emp (empno INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, user_name VARCHAR(20), password VARCHAR(20))"
        cmd.ExecuteNonQuery()

        cmd.CommandText = "CREATE PROCEDURE add_emp(" & "IN uname VARCHAR(20), IN pword VARCHAR(20), OUT empno INT)" & "BEGIN INSERT INTO emp(user_name, password, birthdate) " & "VALUES(uname, pword); SET empno = LAST_INSERT_ID(); END"

        cmd.ExecuteNonQuery()
    Catch ex As MySqlException
        Console.WriteLine(("Error " & ex.Number & " has occurred: ") + ex.Message)
    End Try
    conn.Close()
    Console.WriteLine("Connection closed.")
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T05:24:30.743

为了防止 SQL 注入，你必须使用参数化查询。我给你一个函数的引用，你必须让你的函数像这样

**插入函数**

```
Public Shared Function InsertFile(ByVal name As String, ByVal pwd As String) As Integer
Dim sql As String
sql = "insert into login (username,password) values (?uname, ?upass);"
Dim params1(2) As MySqlParameter
params1(1) = New MySqlParameter("?uname", name )
params1(2) = New MySqlParameter("?upass", pwd )
Return MySqlHelper.ExecuteNonQuery(sql, params1)
End Function 
```

现在创建一个新的**ExecuteNonQuery**函数来执行您的查询

**ExecuteNonQuery 函数**

```
Public Shared Function ExecuteNonQuery(ByVal sql As String, ByVal params() As MySqlParameter) As Integer
Dim cnn As New MySqlConnection(connectionstring)
Dim cmd As New MySqlCommand(sql, cnn)
For i As Integer = 0 To params.Length - 1
cmd.Parameters.Add(params(i))
Next
cnn.Open()
Dim retval As Integer = cmd.ExecuteNonQuery()
cnn.Close()
Return retval
End Function 
```

就是这样，希望你能理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:01:15.457

插入登录名（用户名、密码）值（？，？）

# php - Wordpress大小属性与实际图像大小不匹配

> ID：15938424
> 
> 赞同：0
> 
> 时间：2013-04-10T23:41:49.257
> 
> 标签：php, wordpress

我正在从事一个图像繁重的 wordpress 项目。我使用以下代码为中型和大型图像尺寸设置图像宽度和高度，并将两者都设置为硬裁剪模式。这些值与设置>媒体的当前值相同：（基于[此文档](http://codex.wordpress.org/Function_Reference/add_image_size#Reserved_Image_Size_Names)的代码）

```
update_option('medium_size_w', 335);
update_option('medium_size_h', 400);
update_option('medium_crop', 1);

update_option('large_size_w', 690);
update_option('large_size_h', 400);
update_option('large_crop', 1); 
```

当我使用带有中等大小选项的后期插入媒体按钮上传和插入图像时，一切都按预期工作。但是，当我上传并插入大图像时，我得到以下标记：

```
<a href="http://saltdesignpdx.com/wp-content/uploads/2013/04/TCK7765.jpg">
<img src="http://saltdesignpdx.com/wp-content/uploads/2013/04/TCK7765-690x400.jpg" 
alt="_TCK7765" width="540" height="313" class="alignnone size-large wp-image-53" />
</a> 
```

请注意该`width="540" height="313"`标记的部分。应该是`width="690" height="400"`。

有谁知道这里发生了什么，或者我可以采取一些步骤来诊断它？

**编辑**：我只是尝试将主题切换到 21，上传一张新图片，并将其插入到帖子中。结果是这样的：

```
<a href="http://saltdesignpdx.com/wp-content/uploads/2013/04/IMG_0729.jpg">
<img src="http://saltdesignpdx.com/wp-content/uploads/2013/04/IMG_0729-690x400.jpg" 
alt="IMG_0729" width="584" height="338" class="alignnone size-large wp-image-57" />
</a> 
```

诡异的。更改主题更改了 img 标签中指定的尺寸，但它们仍然与图像的实际尺寸不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:52:43.810

问题是[content_width](http://codex.wordpress.org/Content_Width)。感谢 Fred 提出的搜索 540 的建议。
在设置 content_width 以匹配我的实际最大内容宽度后，wordpress 在`<img>`标签中提供的大小属性现在是正确的。

# java - 将 Netbeans 平台与 JavaFX 2 一起使用？

> ID：15938426
> 
> 赞同：0
> 
> 时间：2013-04-10T23:41:55.147
> 
> 标签：java, netbeans, javafx-2, rcp, netbeans-platform

我正在 JavaFX 2 上构建一个桌面应用程序，并希望加快我的开发速度——

RCP是要走的路吗？学习曲线有多陡峭？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:40:27.033

有一个[eFX](http://java.net/projects/efx/pages/Home)项目试图使 NetBeans 平台适应 JavaFX。

根据我对 NetBeans 平台源代码的了解，我怀疑他们是否设法摆脱了 Swing 依赖项。（一旦您想将应用程序部署到不支持 Swing 的平台，这可能很重要。请参阅：[Compact Profiles](http://openjdk.java.net/jeps/161)和[Project Jigsaw](http://openjdk.java.net/projects/jigsaw/)）。

它还使用 NetBeans 平台模块系统而不是 OSGi（许多 Apache Commons 库以及其他库都带有 OSGi 元数据，但不带有 NetBeans 平台元数据）。虽然有一种方法可以在 NetBeans 平台中运行 OSGi 包，但是，当然，这意味着您必须了解 2 个模块系统。

我也不知道 NetBeans 平台 Maven 插件是否可以与 eFX 一起使用，或者您是否必须使用 Ant。

作为替代方案，还请注意（主要针对上述问题）我最近发布了 Drombler FX 的初始早期访问版本，这是一个基于 OSGi 和 Maven（POM-first）的 JavaFX 模块化 RCP：

[http://puces-blog.blogspot.ch/2012/12/dromler-fx-building-modular-javafx.html](http://puces-blog.blogspot.ch/2012/12/drombler-fx-building-modular-javafx.html)

[http://wiki.dromler.org/GettingStarted](http://wiki.drombler.org/GettingStarted)

# ruby - 在Ruby中的加载路径之外需要文件

> ID：15938429
> 
> 赞同：0
> 
> 时间：2013-04-10T23:42:15.123
> 
> 标签：ruby, require, load-path

我有一个我编写的 gem，它有许多处理程序，每个处理程序在 gem 中都有自己的 ruby​​ 文件。我需要添加在命令行上指定文件的功能，该文件将以与这些其他处理程序相同的方式加载。该文件通常不在 gem 的默认加载路径中。

我不确定执行此操作的最佳方法。我可以取文件名，然后将包含目录添加到加载路径，然后加载文件。我可以让用户指定一个包含要读取的处理程序的目录，而不是指定文件，或者我确信有更好的方法来做到这一点，我还没有想到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:47:40.710

这已使用 require_relative 修复并使用 Dir.pwd 扩展文件路径：

```
req_path = File.expand_path(arg, Dir.pwd)
require_relative req_path 
```

# php - 更改 PHP DomNode nodeName 行为

> ID：15938432
> 
> 赞同：2
> 
> 时间：2013-04-10T23:42:38.033
> 
> 标签：php, xml

在 v5.3 和 v5.4 之间，nodeName 的值的行为似乎发生了微妙的变化（据我所知 - 未记录）。

在 v5.3 中，返回的名称不包括命名空间，但是，在 v5.4 中，名称包括命名空间前缀。我不确定更改是由 PHP 还是 libxml 引起的，但我在更改日志中都看不到任何内容。我也不清楚究竟是什么时候发生了变化，但我看到了 5.3.10-1ubuntu3.6 和 v5.4.6-1ubuntu1.2 的前后效果。

有谁知道这是何时/为什么/如何发生的？该更改破坏了我发布的一些服务器软件，因此我可以更好地理解更改，以便有效地解决它。

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:52:56.867

的值`DOMNode::nodeName`取决于该节点是哪个子类型。

对于 a`DOMElement`它是标记名称：[`DOMElement::$tagName`](http://www.php.net/class.domelement.php#domelement.props.tagname)。

`nodeName`包含限定名称，因此如果设置了前缀，则它带有前缀。

如果您为该*DOMElement*子类型获得不同的值，这将构成缺陷，因为它违反了标准 DOM 模型。

[在行动中看到它。](http://3v4l.org/FHZ4m#v500)（许多不同的 PHP 版本，从 PHP 5.0.0 到 5.5.0beta2 没有变化）

# c# - Query a table that schema is only known at runtime

> ID：15938441
> 
> 赞同：2
> 
> 时间：2013-04-10T23:43:16.050
> 
> 标签：c#, windows-8, sqlite, sqlite-net

We are creating a WinStore application using C# that stores some data locally within a SQLite database. We are currently using the SQLite-net library to access the database. There are a number of tables within the database that have a dynamic schema based on the client’s data. The schema for these tables is only known at runtime.

We have not been able to query these dynamic tables with the SQLite-net library. Is it possible to query these tables with the SQLite-net library? Is there a different library that would provide similar functionality?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:02:56.143

The sqlite_master table has metadata about the objects in the database such as tables. You can query that table just like any other table. Be aware that it is a system table that you cannot manipulate directly and it's created/updated as you create database objects.

Once you query the table, you would have to dynamically build queries based on that metadata to query your dynamic schema.

Here's another SO post covering querying for tables: [How to list the tables in an SQLite database file that was opened with ATTACH?](https://stackoverflow.com/questions/82875/how-do-i-list-the-tables-in-a-sqlite-database-file)

It is also discussed in the sqlite docs: [http://www.sqlite.org/sqlite.html](http://www.sqlite.org/sqlite.html)

See **"Aside: Querying sqlite_master table"**

EDIT:

Because you'll be creating dynamic sql based off of metadata, you'll need a method that can execute a text based t-sql query that you dynamically construct. Something like this method in sqlite-net:

```
public List<T> Query<T> (string query, params object[] args) 
```

*note: I haven't used sqlite-net directly to construct dynamic sql but I have used other drivers (including the c one) to do this.

What you won't be able to do since it's dynamic sql (unless you want to do c# code generation and reflection of that generated code) is use the simple generics style query methods:

```
var query = conn.Table<Stock>().Where(v => v.Symbol.StartsWith("A")); 
```

That pattern is most useful when you know your objects and table structure at compile time.

Note that there's is also a table called sqlite_temp_master which lists temporary tables. For example, as the docs above explain, the .tables cmdline shortcut actually does this query:

```
SELECT name FROM sqlite_master 
WHERE type IN ('table','view') AND name NOT LIKE 'sqlite_%'
UNION ALL 
SELECT name FROM sqlite_temp_master 
WHERE type IN ('table','view') 
ORDER BY 1 
```

Note that it's also filter out sqlite_% since that prefix is reserved for system tables.

# c++ - glGenBuffers/glGenBuffersARB 在什么情况下会失败？

> ID：15938442
> 
> 赞同：2
> 
> 时间：2013-04-10T23:43:28.637
> 
> 标签：c++, visual-c++, opengl, ogre3d

我正在使用支持 OpenGL 模式的 Ogre3d 引擎。

我有一个名为的对象`Chunk`，它创建一个`Ogre::ManualObject`. 因为创建`ManualObject`需要一些时间，所以我将任务放到了一个新线程上。

不幸的是，在线程创建后，`ManualObject`我现在得到以下 OgreException：

> “无法在 GLHardwareVertexBuffer::GLHardwareVertexBuffer 中创建 GL 顶点缓冲区”

[我查看了代码，在这个阶段](https://github.com/blackberry/OGRE/blob/master/src/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp)它失败了：

```
glGenBuffersARB( 1, &mBufferId );

if (!mBufferId)
{
    OGRE_EXCEPT(Exception::ERR_INTERNAL_ERROR,
        "Cannot create GL vertex buffer",
        "GLHardwareVertexBuffer::
} 
```

这表明 glGenBuffersARB() 没有正确填充 mBufferId。

我不知道是什么原因造成的，有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T10:25:21.497

> 因为 ManualObject 的创建需要一些时间，**所以我将任务放到了一个新线程上。**

那就是你的问题。OpenGL 上下文一次只能在一个线程中处于活动状态。如果你从没有绑定 OpenGL 上下文的线程调用 OpenGL 命令，你得到的只是错误。

# php - 使用 PHP 在同一类别内的多个页面上生成 rel canonical（并使用 glob() 函数）

> ID：15938443
> 
> 赞同：0
> 
> 时间：2013-04-10T23:43:29.850
> 
> 标签：php, glob, seo, rel

假设您为一家拥有相当大的电子商务网站的公司工作，该网站包含许多产品类别和子类别（有时还有子子类别）。因此，为了方便用户，有些类别具有重复的子类别和重复的内容。每当用户登陆这些重复类别之一并将其指向对 SEO 更友好的类别时，您想使用 PHP 生成 rel canonical。在这种情况下，带有重复子类别的类别是“随机的东西”，而我希望规范指向的类别是“各种东西”。所以，item_1.html - item_4.html 都在“随机东西”和“各种东西”中找到，但我希望规范指向“各种东西”。目前，这就是我所拥有的：

```
<?php if(is_numeric(strpos($_SERVER['REQUEST_URI'],'random-stuff/item_1.html'))) echo '<link rel="canonical" href="http://mydomain.com'.str_replace('random-stuff', 'assorted-things', $_SERVER['REQUEST_URI']).'" />'; ?>
<?php if(is_numeric(strpos($_SERVER['REQUEST_URI'],'random-stuff/item_2.html'))) echo '<link rel="canonical" href="http://mydomain.com'.str_replace('random-stuff', 'assorted-things', $_SERVER['REQUEST_URI']).'" />'; ?>
<?php if(is_numeric(strpos($_SERVER['REQUEST_URI'],'random-stuff/item_3.html'))) echo '<link rel="canonical" href="http://mydomain.com'.str_replace('random-stuff', 'assorted-things', $_SERVER['REQUEST_URI']).'" />'; ?>
<?php if(is_numeric(strpos($_SERVER['REQUEST_URI'],'random-stuff/item_4.html'))) echo '<link rel="canonical" href="http://mydomain.com'.str_replace('random-stuff', 'assorted-things', $_SERVER['REQUEST_URI']).'" />'; ?> 
```

它有效，但它很混乱。我宁愿用一行代码检查 item-1.html - item4.html 而不是四次检查。有谁知道如何实现这一目标？

另外，请记住 item_1.html - item_4.html 不是“随机东西”中唯一的东西，它们只是与“各种东西”共享的重复类别。谢谢！！

**更新：**

Marty 建议使用该`glob()`函数循环遍历目录中的所有文件并仅回显我需要的内容。这是我提出的代码：

```
$dir = 'http://www.mydomain.com/random-stuff/*'; 
foreach(glob($dir) as $file) {
   if($file == 'item_1.html' || 'item_2.html' ||'item_3.html' ||'item_4.html') {
   echo '<link rel="canonical" href="http://mydomain.com'.str_replace('random-stuff', 'assorted-things', $_SERVER['REQUEST_URI']).'" />';
   }
} 
```

这似乎仍然不起作用。谁能进一步照亮我？我从根本上误解了这里的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:17:07.433

这是一个更好的解决方案： - 抱歉，顺便说一下，我理解你的问题是错误的 -

```
// First, get last portion of url
$filename = end(explode('/',$_SERVER['REQUEST_URI']));

// Check if the same filename exists in 'assorted-things' directory:
if (file_exists("../assorted-things/$filename")) {
    // If so, echo canonical
    echo '<link rel="canonical" href="http://mydomain.com/assorted-things/' . $filename . '" />';
} 
```

# c - 字符数组到整数

> ID：15938444
> 
> 赞同：0
> 
> 时间：2013-04-10T23:43:34.257
> 
> 标签：c, integer, arrays

我有 2 个问题。

在 C++ 参考中

```
#include <stdio.h>

int main ()
{
  char sentence []="Rudolph is 12 years old";
  char str [20];
  int i;

  sscanf (sentence,"%s %*s %d",str,&i); <---
  printf ("%s -> %d\n",str,i);

  return 0;
} 
```

**问题 1\. %*s 到底在做什么？**

我的程序我正在构建一个哈希表。

它询问用户是否输入

```
q- quit
i <int> - inserts integer //must be on same line
d <int> - deletes integer //must be on same line
etc....

For example:

in order to insert "35" I would have to type:

i 35 
```

**问题 2\. C++ 参考对 'q' 和 'i 35' 是否有效，因为 'q' 没有整数？**

```
char choice[10];
char option;
int i;

sscanf(choice, "%c %d", &option, &i); 
```

如果输入了“q”（没有附加整数）以及输入“i 35”（附加了整数），这会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:49:13.917

这意味着它应该从流中跳过该类型。因此，例如输入流是：

```
"Rudolph is 12 years old" 
```

第一个`%s`将捕获`"Rudolph"`，`%*s`将“读取但忽略” `"is"`（即不将其存储在变量中），然后`%d`将读取并捕获`12`.

我不太清楚你的第二个问题是什么意思。我相信您是在询问该格式是否适用于从输入`"%s %*s %d"`中读取。`"q"`在这种情况下，您应该使用不同的格式，例如单个字符`"%s"`或`"%c"`单个字符。

针对您更新的问题，您可以轻松尝试并查看。`"q"`在我的测试中，它确实可以使用:`sscanf`的输入，`int`但会在`"q"`.

# pdf - 下载的 PDF 存储在 Documents 目录中以在 UIWebview 中查看但不知道如何

> ID：15938446
> 
> 赞同：0
> 
> 时间：2013-04-10T23:43:49.277
> 
> 标签：pdf, webview, hex, nsdata

问题：我尝试将数据加载到 web 视图，但只是得到一个黑屏。

我已成功下载 PDF 并将其存储在文档目录中，但是当我在 UIWebView 中查看它时，我什么也得不到。我怀疑这是因为数据（正如我在控制台中查看的那样）是十六进制的，并且我用来显示它的方法无法读取数据。这是我将数据加载到 webview 中的代码：

```
NSURL *url = [NSURL fileURLWithPath:PDFpathwithextension];

NSData *myData = [NSData dataWithContentsOfURL:url];
NSLog(@"data being loaded to webview =%@",myData);

[webview loadData:myData MIMEType:@"application/pdf" textEncodingName:@"utf-8" baseURL:nil]; 
```

这是从 NSlog 打印的数据示例：

"data being loaded to webview = b8e5f672 bec5562d 28b63505 9a2b7733 0595fb24 46eb982c d77a526e b02ecaf5 d69f227f 96e92b88 149118ca 09f33da2 677c8e7d 7707ebbf 889a73b5 e8776a00 86abd1ef 206d184f 0b9e8db5 0c381d2b a0b66e3d 543ba3c1 e64ca0ac ce34baac 2e9b6da9 2be01439 2c3c93c3 1e5050db 20ccabf5 88726af6 8ab36bfc 92aceae3 325df525 99b6fa27 c89f64da 2a22c9ac 22e24c3b 61747622 d2d99678 887d7713 57ce8ba8 75ba1eeb e044bf51 8739405a 907afc57 d31008f6 a697c1ea 0a817257 1494bae2 a8129786 36bb74ac 42571e3b bfa9889b db64e519 9aea02b2 1bdd425d e31e91b6 61589cde 3023496d 5890a634 dc976aea ff284971 12714a1d 6152eb88 28d5f182 07d877d7 3107f3a8 7d1cad80 bf09fba0 11a01d69 c06f7b0b fa1e370f 2cbb6450 dcfa2a98 3de150e8 89817ccf 762acf93 41e778f4 2c7d6b21 3babb58c 93d95ac3 cbd8d512 90bacb2b d4b88702 d5ee6966 bbfb3c93 e8becb24 b81f3189 2dff1125 361351a2 8b046e7f 46d31277310797b1 0673a83f e546df8b 56a01b71 23b5b88e 97b60198 3a283076 3290dbb5 1c72bca1 a0f76e82 1dddf190 d5ada132 bb757486 d748a779 4bd81aaf 9da3f636 71b77775 f0555dfb 03e2ba26 05dbbace 0963bbee 08633bbf 16c6eefe b730b69d 0863db88 60abe705 37b1ff16 f0ceb31e 8071d4eb 4776234d ed00b60e d4ef0630 f402e8fa 0490b12f 08d2fb57 43aa2f1c 527c4ad0 f812413d 904e250d e8a9449f 8956f92a 58713e27 3bd6e7e1 287dfddc 2dbec3bc cdfd6779 51bedbbc a8feaf78 517ddff1 a37a093f 6a0fd2f3 82ab58f3 b378df63 5e80912e 803dc82e fc76a076 296ae7f5 03640e02 a80fd290 30c240fc c82b1077 2818b61d 52c0567f 2cc4fa93 20c6af85 e8d15cd8 325a426d 1aada636 8eeea415 fe5e56b8 7f8cb5c1 7f86b5de ff1e7bbd ffb7acb0 917fb1c3 0e124ed8 1072e005 1731e7b3 a87ba40f 7b11ed69 27d288df 953ecc01 6aef406b a4190588 9b00d83c c983c8a3 12501c5d 0e115321 103e1509 1ba6b7c2 6bd36a58 3fad83b0 37fec776 7940457d 6561fcfb4f1f0670 e87d5004 2c048809 8385b180 0a28a271 5dd7e4e8 d1d5a0c6 8206bbb8 08414445 542c188a 4e5058aa 1d18d468 041d7b2c 472431ae 71755d13 7bd65812 ebdb8fe2 eeead9c3 f9f1a8ef 7bb7bcfb ee1d8940 f3780498 67a0a379 b1e467ce 91da9b8b 255ff33e c960fe51 326cfa5d 66281032 43be901b..."

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T23:33:28.467

您没有使用 Quick Look Framework 或 UIDocumentInteractionController 的任何原因？它们能够为用户提供比 WebView 更多的功能和更少的混乱。

以下是 Apple 文档的链接： [https ://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html](https://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html)

[https://developer.apple.com/library/ios/documentation/uikit/reference/UIDocumentInteractionController_class/Reference/Reference.html](https://developer.apple.com/library/ios/documentation/uikit/reference/UIDocumentInteractionController_class/Reference/Reference.html)

如果您希望从应用程序的文件系统呈现 PDF，则无需担心！只需确保您存储的 pdf 具有正确的“.pdf”扩展名，然后以完整路径将其提供给 QLPreviewController：

```
 self.contentURL = [NSURL fileURLWithPath:fullPath]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T21:18:58.390

是`PDFpathwithextension`网址还是本地路径？
如果是网络，首先保存`myData`到磁盘并尝试：

```
NSString *path = @"get full local path of your file including filename.extension";
NSURL *url = [NSURL fileURLWithPath:path];
[UIWebView alloc] loadRequest:[NSURLRequest requestWithURL:url]]; 
```

如果您不想下载它，那为什么要使用`NSData`？
只需将 pdf 网址加载到`UIWebView`.

```
[uiwebview loadrequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:PDFpathwithextension]]]; 
```

# c# - 如何使用 C# 检索闪存驱动器的制造商属性

> ID：15938447
> 
> 赞同：4
> 
> 时间：2013-04-10T23:43:49.380
> 
> 标签：c#, wmi

我需要使用 C# 编程语言检索闪存驱动器的制造商属性。我在这里尝试了建议的解决方案（[如何确定 USB 闪存驱动器制造商？](https://stackoverflow.com/questions/123986/how-to-determine-usb-flash-drive-manufacturer)），但这似乎不起作用。我为制造商属性获得了“标准磁盘驱动器”。有谁知道如何在 C# 中获取 Manufacturer 属性的值“SanDisk”，如下所示？

![在此处输入图像描述](https://i.stack.imgur.com/zJvNj.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T23:54:08.540

您应该能够做一些简单的事情来获取制造商数据，假设它包含除通用之外的其他内容`(Standard disk drives)`

```
ManagementObjectSearcher search = new
    ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive");

foreach(ManagementObject wmi in search.Get())
{
    Console.WriteLine(wmi["Manufacturer"].ToString());
} 
```

您需要`System.Management`在项目中添加对的引用才能使用这些函数。

作为替代方案，您可以使用 hack，基本上获取模型的名称并将其拆分，以便您只使用制造商名称。

```
Console.WriteLine(wmi["Model"].ToString().Split()[0]); 
```

# actionscript-3 - 如何在另一个影片剪辑中的影片剪辑中调用 gotoAndStop？

> ID：15938451
> 
> 赞同：1
> 
> 时间：2013-04-10T23:44:05.397
> 
> 标签：actionscript-3, flash

我正在使用带有 Flash 的 World Construction Kit 来制作基于物理的游戏。我有一个用作世界的电影剪辑。我正在创建一个平台游戏，现在，当玩家接触到目标时，它会将它们发送到主菜单，每个级别都在影片剪辑中的不同帧上，并且菜单是。

这是玩家触及目标时的代码

```
public function handleContact(e:ContactEvent):void {

        var g:goal = e.other.m_userData as goal;
        if (g) {
            trace(g.x + ", " + g.y);
            MovieClip(parent).gotoAndStop(2);
        } 
```

代码能够转到关卡动画剪辑中的下一帧，但我如何让它上一层以便它可以返回到主时间轴上的主菜单？

编辑：当我尝试 parent.MovieClip(parent).gotoAndStop(2); MovieClip(父).parent.gotoAndStop(2); 给我错误 1061：通过静态类型 flash.display:DisplayObjectContainer 的引用调用可能未定义的方法 MovieClip。

当我尝试 MovieClip(parent).MovieClip(parent).gotoAndStop(2); 时，它会编译，但是当我联系目标时，我会收到此错误：

```
TypeError: Error #1006: MovieClip is not a function.
    at fred/handleContact()[C:\Documents\sdrVG\fred.as:85]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at Box2DAS.Common::b2EventDispatcher/dispatchEvent()[C:\API\wck-master\wck-master\Box2DAS\Common\b2EventDispatcher.as:27]
    at Box2DAS.Dynamics::b2ContactListener/ContactDispatch()[C:\API\wck-master\wck-master\Box2DAS\Dynamics\b2ContactListener.as:65]
    at Box2DAS.Dynamics::b2ContactListener/BeginContact()[C:\API\wck-master\wck-master\Box2DAS\Dynamics\b2ContactListener.as:31]
    at Box2DAS.Dynamics::b2World/BeginContact()[C:\API\wck-master\wck-master\Box2DAS\Dynamics\b2World.as:346]
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at global/AS3_CallTS()
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at Function/<anonymous>()
    at cmodule.Box2D::FSM__ZN13WorldListener12BeginContactEP9b2Contact/work() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:58:34.047

尝试`MovieClip(this.parent)`像这样添加到您的功能中，

```
public function handleContact(e:ContactEvent):void
{
      var g:goal = e.other.m_userData as goal;

      if (g)
      {
            trace(g.x + ", " + g.y);
            MovieClip(this.parent).gotoAndStop(2);
      }
} 
```

好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:45:07.157

[事件捕获和冒泡](http://help.adobe.com/en_US/as3/mobile/WS948100b6829bd5a67edfb831266c0b5fc6-8000.html)可以将显示列表上的对象的感知解耦。

你可以引入一个游戏事件类，实现如下：

```
package
{
    import flash.events.Event;

    public class GameEvent extends Event
    {
        public static const NEXT_LEVEL:String = "NEXT_LEVEL";

        public function GameEvent(type:String, bubbles:Boolean=true, cancelable:Boolean=false)
        {
            super(type, bubbles, cancelable);
        }
    }
} 
```

从您的播放器影片剪辑实例中，您可以调度此事件，该事件通过父级冒泡直到被捕获。例如，从您的`handleContact(e:ContactEvent)`函数调用中：

```
dispatchEvent(new GameEvent(GameEvent.NEXT_LEVEL)); 
```

通过添加一个侦听器来处理该事件，可以在您的主类中处理此事件。

监听`NEXT_LEVEL`事件：

```
addEventListener(GameEvent.NEXT_LEVEL, nextLevelHandler); 
```

在下一级游戏事件中，创建一个处理函数：

```
protected function nextLevelHandler(event:GameEvent):void
{
    gotoAndStop(2);
} 
```

# ios - NSString 转换为 NSDate，结果很奇怪

> ID：15938458
> 
> 赞同：1
> 
> 时间：2013-04-10T23:44:31.443
> 
> 标签：ios, objective-c

我想将日期字符串转换为 NSDate，代码如下：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd EEE HH:mm:ss"];
NSDate *date = [formatter dateFromString:@"2013-04-11 Thu 09:00:00"];
NSLog(@"%@", date); 
```

但是，它打印`1999-12-30 09:00:00 +0000`. 好奇怪，谁能帮帮我，谢谢！

# javascript - 清除只是一个 in a form</h1> <div id="body"><p>I have this code which resets the form brilliantly</p> <pre><code><script type="text/javascript"> $("#formname").resetForm(); </script> </code>&lt

> ID：15938459
> 
> 赞同：2
> 
> 时间：2013-04-10T23:44:33.283
> 
> 标签：javascript, jquery, textarea

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T23:45:51.447

*清除*和*重置*是两个不同的东西。clears 表示将值设置为空字符串，而 reset 表示将值设置为初始值。

**清除：**

```
$('#textAreaId').val('');// clears the textarea. 
```

**重置**为 textarea 初始值，而不是仅仅重置它：

```
var t = document.getElementById('textAreaId');
t.value = t.defaultValue; 
```

> **defaultValue** 最初在创建此对象的 HTML 中指定的默认值。

[**现场演示**](http://jsfiddle.net/GK8Ca/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:45:59.963

绝对地。

```
document.getElementById("formname").getElementsByTagName('textarea')[0].value = ""; 
```

当然，如果你给 textarea 一个 ID，这可以变得更简单：

```
document.getElementById("textareaID").value = ""; 
```

旁注：这是重置表单的更好方法：`document.getElementById('formname').reset();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T23:47:08.877

**[jsfiddle 演示](http://jsfiddle.net/JGeRe/1)**

`.value= ""`定位文本区域时使用

```
document.getElementById("t").value= ""; 
```

# php - Chrome：使用 https 的 Google Maps API JS 加载问题

> ID：15938463
> 
> 赞同：1
> 
> 时间：2013-04-10T23:45:05.623
> 
> 标签：php, javascript, google-chrome, https, sugarcrm

我有一个为 SugarCRM 工作的开源包，它使用 Google Map API。用户报告说 Chrome 浏览器存在错误（https 加载问题）。当 SugarCRM URL 使用 https 协议定义且 Maps API URL 为 http 时，会出现此问题。因为这是一个已安装的包，它可以与 http 或 https 协议一起使用；这取决于它的安装位置。

示例 SugarCRM URL：

```
https://www.mydomain.com/index.php 
```

当前的 Google Maps API 调用：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

我正在考虑将其简单地更改为 https，但这会解决问题吗？我是否应该编写一些逻辑来检查站点的 URL（来自 SugarCRM 配置）的 http 或 https 并使其匹配协议？jquery 等其他外部 JS 文件呢？

另外，我看到人们使用 // 应该让浏览器决定协议？是否与所有最新的浏览器兼容？例如 Firefox、IE、Chrome 和 Safari？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:31:44.327

Using a Protocol Relative URL (i.e. the //) is I believe supported in pretty much all recent mainstream browsers (except possibly IE6) so I would say it's perfectly safe. You can read more about them from Paul Irish here: [http://paulirish.com/2010/the-protocol-relative-url/](http://paulirish.com/2010/the-protocol-relative-url/)

If you did want to do a check yourself it is a fairly simple check in javascript, something like this but obviously for maps instead of ga:

```
ga.src = ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js'; 
```

(as found here: [http://mathiasbynens.be/notes/async-analytics-snippet#protocol-check](http://mathiasbynens.be/notes/async-analytics-snippet#protocol-check))

Note that if you're on google maps API v2 I think you had to do it this way as the url was different for ssl, but it looks like you're on the current version so should be fine.

I believe twitter used to have a check like the one above for their tweet buttons but now use protocol relative urls too. The [HTML5 Boilerplate](http://html5boilerplate.com/) template also uses then so I'd say you're in good company if you decide to use them.

# maven - Eclipse Juno 中的生命周期配置错误未涵盖插件执行

> ID：15938466
> 
> 赞同：15
> 
> 时间：2013-04-10T23:45:26.027
> 
> 标签：maven, maven-3

为什么我的 Maven 构建在命令行上运行得非常好，但是当我在 Eclipse 中运行时，它需要我将此部分添加到我的 pom.xml 中，否则我会收到此错误：

```
Plugin execution not covered by lifecycle configuration
: org.apache.maven.plugins:maven-compiler-plugin:3.1:testCompile
 (execution: default-testCompile, phase: test-compile) 
```

这发生在'maven-compiler-plugin'插件周围不是很奇怪吗？我在谷歌的任何地方都找不到像这样的另一个问题，尽管我找到了很多关于 3rd 方插件的修复建议。我进行了大量的研究和搜索，但没有找到对此的解释，甚至[从这里](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)也没有。

解决此问题所需的 pom.xml：

```
<!--This plugin's configuration is used to store Eclipse m2e 
settings only. It has no influence on the Maven build itself.-->
    <plugin>
        <groupId>org.eclipse.m2e</groupId>
        <artifactId>lifecycle-mapping</artifactId>
        <version>1.0.0</version>
        <configuration>
        <lifecycleMappingMetadata>
            <pluginExecutions>
                <pluginExecution>
                    <pluginExecutionFilter>
                    <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <versionRange>[3.1,)</versionRange>
                        <goals>
                            <goal>testCompile</goal>
                        </goals>
                    </pluginExecutionFilter>
                    <action> 
                        <ignore></ignore>
                    </action>
                </pluginExecution>
            </pluginExecutions>
        </lifecycleMappingMetadata>
    </configuration>
</plugin> 
```

而且，如果您想查看我的源代码，[这是我在 GitHub 上的简单项目。](https://github.com/djangofan/maven-groovy)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T15:11:02.250

我终于解决了。似乎我在上面发布的“pluginManagement”部分通常是 Eclipse Maven 项目所必需的，尽管我拒绝了它，即使我在互联网上找不到任何文档明确提到这一点。

此外，生命周期排除部分中的“versionRange”似乎也需要“gmaven-plugin”的版本号，而不是我在上面试图给出的“Maven 版本”。

```
<pluginExecutionFilter>
    <groupId>org.codehaus.gmaven</groupId>
    <artifactId>gmaven-plugin</artifactId>
    <versionRange>[1.5,)</versionRange>
    <goals>
        <goal>testCompile</goal>
        <goal>compile</goal>
    </goals>
</pluginExecutionFilter> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-14T09:32:13.950

1.  帮助 -> 安装新软件

    *   安装*Groovy 编译器 2.2 / 2.1 功能*

    *   安装*Groovy-Eclipse M2E 集成*

2.  窗口 -> 首选项 -> Maven -> 生命周期映射 -> 打开工作区生命周期映射元数据

添加以下xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<lifecycleMappingMetadata>
    <pluginExecutions>
        <pluginExecution>
            <pluginExecutionFilter>
                <groupId>org.codehaus.gmaven</groupId>
                <artifactId>gmaven-plugin</artifactId>
                <versionRange>[1.3,)</versionRange>
                <goals>
                    <goal>compile</goal>
                    <goal>testCompile</goal>
                </goals>
            </pluginExecutionFilter>
            <action>
                <execute />
            </action>
        </pluginExecution>
    </pluginExecutions>
</lifecycleMappingMetadata> 
```

3.  重新加载生命周期映射并在您的 maven 项目上调用项目更新。(ALT+F5)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-27T01:19:43.933

您可能需要 M2E“连接器”来理解使用 Eclipse (JDT) 编译器的 maven-compiler-plugin。

选择“发现连接器”，选择JBoss提供的Eclipse JDT编译器的M2E连接器，或者手动安装。

> Eclipse JDT 编译器 1.0.1.201209200903 的 M2E 连接器

您可能还会获得一个 Groovy 连接器——也许它在底层使用了类似的技术？-- 但除非您使用 Groovy，否则安装这样的集成可能没有意义。

# c# - Xamarin 安装问题

> ID：15938468
> 
> 赞同：6
> 
> 时间：2013-04-10T23:45:35.430
> 
> 标签：c#, visual-studio, mono, monodevelop, xamarin

我正在尝试为 Android 安装 Xamarin，但遇到了一些问题，我在任何地方都找不到任何帮助。甚至，我尝试以管理员身份运行安装，但仍然出现相同的错误：
这是日志文件`Error Part`：

```
[2013-04-10 23:20:27.396] [Info] Installing an MSI
[2013-04-10 23:20:27.400] [Info] Database path: <USER_HOME>\Temp\Xamarin\downloads\mono-android-4.6.02001.msi
[2013-04-10 23:20:27.404] [Info] Starting MSI installation: msiexec /i "<USER_HOME>\Temp\Xamarin\downloads\mono-android-4.6.02001.msi" /quiet /passive /log "<USER_HOME>\Temp\tmp76AB.tmp" ADDLOCAL=MonoDroidSDK,VisualStudioAddin,VisualStudio11Addin
[2013-04-10 23:20:27.608] [Info] MSI installation process exited with code 1620
[2013-04-10 23:20:27.611] [Info] Status: failed.
[2013-04-10 23:20:27.615] [Info] InstallMsi failed for '<USER_HOME>\Temp\Xamarin\downloads\mono-android-4.6.02001.msi'
[2013-04-10 23:20:27.618] [Exception] Exception was thrown.
[2013-04-10 23:20:27.618] [Exception] System.InvalidOperationException: MSI execution failed.
[2013-04-10 23:20:27.618] [Exception] à Xamarin.Web.Installer.WindowsInstallationArchiveHandler.InstallMsi(String file, Boolean needsPrivileges)
[2013-04-10 23:20:27.621] [Info] BEGIN >>>>>> msiexec log: '<USER_HOME>\Temp\tmp76AB.tmp'
[2013-04-10 23:20:27.626] [Info] END >>>>>> msiexec log: '<USER_HOME>\Temp\tmp76AB.tmp'
[2013-04-10 23:20:27.629] [Info] Status: failed.
[2013-04-10 23:20:27.632] [Exception] Installation of software item 'Xamarin.Android for Visual Studio and Xamarin Studio' failed with exception.
[2013-04-10 23:20:27.632] [Exception] Xamarin.Web.Installer.InstallException: Installation of archive '<USER_HOME>\Temp\Xamarin\downloads\mono-android-4.6.02001.msi' failed with exception. ---> System.InvalidOperationException: MSI execution failed.
[2013-04-10 23:20:27.632] [Exception] à Xamarin.Web.Installer.WindowsInstallationArchiveHandler.InstallMsi(String file, Boolean needsPrivileges)
[2013-04-10 23:20:27.632] [Exception] à Xamarin.Web.Installer.Installer.InstallationArchiveHandler.Install(String path, Boolean needsPrivileges)
[2013-04-10 23:20:27.632] [Exception] --- Fin de la trace de la pile d'exception interne ---
[2013-04-10 23:20:27.632] [Exception] à Xamarin.Web.Installer.Installer.InstallationArchiveHandler.Install(String path, Boolean needsPrivileges)
[2013-04-10 23:20:27.632] [Exception] à Xamarin.Web.Installer.Installer.BaseSoftwareItem.Install(UInt32 tryNumber)
[2013-04-10 23:20:27.632] [Exception] à WindowsInstaller.ProgressPage.InstallationWorker()
[2013-04-10 23:20:27.635] [Info] Status: failed.
[2013-04-10 23:20:27.638] [Debug] Starting installation complete task.
[2013-04-10 23:20:27.641] [Info] Background installation worker completed.
[2013-04-10 23:20:27.644] [Info] Installation completed with failure
[2013-04-10 23:20:27.647] [Info] Status: failed. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T14:38:58.117

我只是第二次遇到同样的问题。

以下是允许我解决它的步骤：

1.  卸载所有 Xamarin 产品（Xamarin Android、Xamarin Studio 等）
2.  转到 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Extensions 并删除 Xamarin 文件夹
3.  转到 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions 并删除 Xamarin 文件夹
4.  根据需要安装 Xamarin Studio 或 mono-android-4.8.00013.msi

我希望它会有所帮助（并希望问题不会再次发生......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-27T07:26:50.250

就像[Chlebta](https://stackoverflow.com/users/1310952/chlebta)说的那样；尝试直接下载文件。

我已将 URL 更新为最新版本：http: [//download.xamarin.com/MonoforAndroid/Windows/mono-android-4.8.00013.msi](http://download.xamarin.com/MonoforAndroid/Windows/mono-android-4.8.00013.msi)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-02T17:15:14.033

MSI 未完成：（7,627,523 字节）与（40,300,544 字节）从 URI [http://download.xamarin.com/studio/Windows/XamarinStudio-5.0.0.878-0.msi直接下载时](http://download.xamarin.com/studio/Windows/XamarinStudio-5.0.0.878-0.msi)

# c++ - 如何使用 FFMPEG 从存储为视频 AVPackets 的 NAL 单元播放 H.264 流

> ID：15938469
> 
> 赞同：0
> 
> 时间：2013-04-10T23:45:42.393
> 
> 标签：c++, ffmpeg, video-streaming, h.264

我正在编写客户端-服务器系统，它使用 FFMPEG 库将 H.264 流解析为服务器端的 NAL 单元，然后使用通道编码通过网络将它们发送到客户端，我的应用程序必须能够播放视频。

问题是如何在我的应用程序中将接收到的 AVPackets（NAL 单元）作为视频流播放。我发现[本教程](http://dranger.com/ffmpeg/tutorial05.html)很有帮助，并将其用作服务器端和客户端的基础。

一些与播放视频相关的示例代码或资源不是来自文件，而是来自使用 FFMPEG 库的程序内部数据，这将非常有帮助。

我确信接收到的信息足以播放视频，因为我尝试将接收到的数据保存为 .h264 或 .mp4 文件，并且可以通过 VLC 播放器播放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:52:39.580

我从你的问题中了解到，你有 AVPackets 并且想要播放视频。实际上这是两个问题；1\. 解码您的数据包，以及 2\. 播放视频。

要使用 FFmpeg 解码数据包，您应该查看[AVPacket](http://ffmpeg.org/doxygen/trunk/structAVPacket.html)、[AVCodecContext](http://ffmpeg.org/doxygen/trunk/structAVCodecContext.html)和[avcodec_decode_video2](http://ffmpeg.org/doxygen/trunk/group__lavc__decoding.html#ga99ee61b6dcffb7817a275d39da58cc74)的文档以获得一些想法；一般的想法是你想做一些事情（只是在浏览器中写了这个，带着一粒盐）：

```
//the context, set this appropriately based on your video. See the above links for the documentation 
AVCodecContext *decoder_context; 
std::vector<AVPacket> packets;   //assume this has your packets
...
AVFrame *decoded_frame = av_frame_alloc();
int ret = -1;
int got_frame = 0;
for(AVPacket packet : packets) 
{
    avcodec_get_frame_defaults(frame);
    ret = avcodec_decode_video2(decoder_context, decoded_frame, &got_frame, &packet);
    if (ret <= 0) {
        //had an error decoding the current packet or couldn't decode the packet
        break;
    } 

    if(got_frame)
    {
        //send to whatever video player queue you're using/do whatever with the frame
        ...
    }
    got_frame = 0;
    av_free_packet(&packet);
} 
```

这是一个非常粗略的草图，但这是您解码 AVPackets 问题的一般思路。至于播放视频的问题，您有很多选择，这可能更多地取决于您的客户。您要问的是一个相当大的问题，我建议您熟悉 FFmpeg 文档和[FFmpeg 站点](http://ffmpeg.org/doxygen/trunk/examples.html)上提供的示例。希望这是有道理的

# assets - 使用电话的图像查看器通过隐式意图从资产文件夹加载图像时出错

> ID：15938476
> 
> 赞同：0
> 
> 时间：2013-04-10T23:46:10.983
> 
> 标签：assets, photoviewer, android-implicit-intent

我正在尝试使用隐式 Intent 通过手机的相机图像查看器应用程序显示不同的伦敦地铁地图。我在**资产文件夹中有****tube_map.gif**图像文件，但是当我尝试加载此文件时，应用程序显示**无法找到项目**。我认为我指定的文件路径不正确。我已经关注了以下视频。唯一的区别是，在视频中，图像文件存储在手机的 SD 卡中，而在我的情况下，它存储在资产文件夹中。[视频可以通过这个链接看到](http://www.youtube.com/watch?v=86daCHoDiOk)。我的代码如下：

 ****```
package uk.ac.kingston.mobileTechnology.k1059045.trainCountdown;

import java.io.File;

import uk.ac.kingston.mobileTechnology.k1059045.trainCountdown.R;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.webkit.WebView;
import android.widget.ImageView;
import android.widget.Toast;

public class ViewTubeMap extends Activity{

String[] maps = {"TUBE","NATIONAL RAIL","OVERGROUND","DLR","TRAMLINK","RIVER BUS","TOURISTS (Tube Map)","TOURISTS (Bus Map)","RAIL CONNECTIONS","TOILET FACILITIES"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.tube_map_layout);

     AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Pick a Map");
               builder.setItems(maps, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int which) {
                   // The 'which' argument contains the index position
                   // of the selected item
                       switch(which){

                       case(0):
                           makeToast("Case 0");
                           Intent intent = new Intent();
                                   intent.setAction(android.content.Intent.ACTION_VIEW);
                           File image = new File("assets/tube_map.gif");
                           intent.setDataAndType(Uri.fromFile(image), "image/*");
                           startActivity(intent);
                           break;

                       case(1):
                           makeToast("Case 1");
                           break;
                       case(2):
                           makeToast("Case 2");
                           break;
                       case(3):
                           makeToast("Case 3");
                           break;
                       case(4):
                           makeToast("Case 4");
                           break;
                       case(5):
                           makeToast("Case 5");
                           break;
                       case(6):
                           makeToast("Case 6");
                           break;
                       case(7):
                           makeToast("Case 7");
                           break;
                       case(8):
                           makeToast("Case 8");
                           break;
                       case(9):
                           makeToast("Case 9");
                           break;
                       }
               }
        });

       builder.create();
       builder.show();
}

public void makeToast(String message) {
    Toast.makeText(this, message, Toast.LENGTH_SHORT).show();
}
} 
```

谁能指导我我的代码有什么问题，或者我如何访问我的图像并将其显示在手机的相机图像查看应用程序中？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:17:58.557

assets 是应用程序的私有区域，所以*幸运*的是，没有其他应用程序可以访问另一个应用程序的这个区域。我要么通过 SD 卡（选项 1）解决问题，要么通过互联网（不是本地）提供 tubeMaps 并从那里获取图像（选项 2）。

选项 1：您添加访问外部存储的权限。在活动开始时，您将图像从本地资产同步到外部存储，然后稍微更改代码以传递另一个文件对象以及指向外部存储的 ACTION_VIEW 意图。

选项 2：您将管图上传到 Internet 上的某个位置，并为 ACTION_VIEW 意图提供一个 url。****

# php - CakePHP 获取没有语言前缀的当前 URL

> ID：15938481
> 
> 赞同：0
> 
> 时间：2013-04-10T23:46:37.080
> 
> 标签：php, cakephp, url-routing, cakephp-2.3

我[将此解决方案](http://nuts-and-bolts-of-cakephp.com/2008/11/28/cakephp-url-based-language-switching-for-i18n-and-l10n-internationalization-and-localization/)用于我的 CakePHP 2.3 网站的 i18n。

当此 URL 中的用户：`example.com/myController/myAction/param1/param2`
我想提供指向`example.com/eng/myController/myAction/param1/param2` This 的链接时，我的视图文件中的此代码效果很好：

```
<a href="/eng<?php echo $this->here;?>">English</a> 
```

但是当这个 URL 中的用户：`example.com/fre/myController/myAction/param1/param2`
我无法将他链接到这个 URL：`example.com/eng/myController/myAction/param1/param2`

我可以通过以下方式获取完整的 URL：

```
fullURL = Router::url( $this->here, true );
$strippedURL = str_replace("http://example.com/fre/myController/myAction/param1/param2","myController/myAction/param1/param2",$fullURL) 
```

但我需要为每种语言制作这个。或者我可以从`$fullURL`. 但它们似乎不是好的解决方案。你有什么建议吗？

编辑：在我的 Helper/View 文件中，我使用了这个：

```
function getRelURL() {
  $controller = $this->request->params['controller'];
  $action = $this->request->params['action'];
  $URL = "/".$controller."/".$action."/";
  foreach ($this->request->params['pass'] as $p) {
      $URL .= urlencode($p)."/";
  }
} 
```

如果您能推荐更好的选择，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:46:55.570

尽管我没有使用命名参数和所有其他路由功能对其进行测试，但我使用了一种似乎效果不错的稍微不同的方法。我在 AppHelper 中创建了以下函数：

```
public function urlLanguage($lang) {
    static $hereUrl=null;

    if (empty($hereUrl)) {
        $hereUrl = $this->request->params;
        unset ( $hereUrl ['models'] );
        unset ( $hereUrl ['named'] );
        unset ( $hereUrl ['paging'] );
        if (isset ( $hereUrl ['pass'] )) {
            foreach ( $hereUrl ['pass'] as $pass ) {
                $hereUrl [] = $pass;
            }
            unset ( $hereUrl ['pass'] );
        }
    }
    return array_merge( $hereUrl, array ('language' => $lang ) );
} 
```

并在视图中使用它，如下所示：

```
foreach ($languages as $lang=>$langDesc) {
    echo $this->Html->link($languageDesc, $this->Html->urlLanguage($lang));
} 
```

其中 $languages 是一个包含所有可用语言的数组。我跳过了链接本身的 HTML。我按照[此处](http://colorblindprogramming.com/multiple-languages-in-a-cakephp-2-application-in-5-steps)的说明设置路线和语言切换。

# php - DomDocument_object->getElementsByTagName('a'); 当页面上有锚点时返回一个空数组

> ID：15938482
> 
> 赞同：1
> 
> 时间：2013-04-10T23:46:51.877
> 
> 标签：php, html-parsing

我正在使用 PHP 的 DomDocument 类来解析 HTML。

当我给它带有锚点的 html 并要求它找到所有锚点并将它们存储在一个数组中时，它给了我一个空数组，就好像没有锚点一样。

为什么会这样，我该如何解决？

这是代码：

```
$dom = new DOMDocument();
$domObject->loadHTML($content);
$anchors = $domObject->getElementsByTagName('a');
print_r($anchors); // returns empty array. 
```

$content 看起来像这样：

```
 <p>
        Friend David, I do not think we shall need a call bell as Hello! can be heard 10 to 20 feet away. What you think? Edison - P.S. first cost of sender & receiver to manufacture is only $7.00.[12] Hello, hello! New York, hello!
       </p>
       <a href="http://the-irf.com/hello/hello5.html">Prev</a>
       <a href="hello7.html">Next</a>
       <a href="end.html">End</a>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:49:14.233

`$domObject`被设置在哪里？尝试这个：

```
$matchList = array();
$dom = new DOMDocument();
$dom->loadHTML($content);
$anchors = $dom->getElementsByTagName('a');
foreach($anchors as $anchor) {
    array_push($matchList, $anchor->getAttribute('href'));
}
var_dump($matchList); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:55:03.433

请注意，代码 - 修复`$dom`/`$domNode`错字后，不会返回空数组。相反，它返回：

```
DOMNodeList Object
(
) 
```

这意味着它只返回了一个具有私有属性的对象。`print_r()`因此它在输出中看起来是空的。

但是结果不是空的并且[`DOMNodeList`](http://www.php.net/manual/en/class.domnodelist.php)实现了[`Iterator`](http://php.net/manual/en/class.iterator.php)接口。所以你可以遍历结果：

```
foreach($anchors as $anchor) {
    var_dump($anchor->nodeValue);
} 
```

检查结果是否为空的一种更简单的方法是检查节点列表的长度：

```
echo "The query returned " . $anchors->length . " nodes"; 
```

* * *

这里有一个完整的例子：

```
$html = <<<EOF
<html>
  <head></head>
  <body>
     <p> 
        Friend David, I do not think we shall need a call bell as Hello! can be heard 10 to 20 feet away. What you think? Edison - P.S. first cost of sender & receiver to manufacture is only $7.00.[12] Hello, hello! New York, hello!
       </p>
       <a href="http://the-irf.com/hello/hello5.html">Prev</a>
       <a href="hello7.html">Next</a>
       <a href="end.html">End</a>
    </body>
</html>
EOF;

$domObject = new DOMDocument();
$domObject->loadHTML($html);
$anchors = $domObject->getElementsByTagName('a');

$links = array();
foreach($anchors as $anchor) {
    $links[] = $anchor->getAttribute('href');
}

var_dump($links); 
```

输出

```
string(36) "http://the-irf.com/hello/hello5.html"
string(11) "hello7.html"
string(8) "end.html" 
```

# ios - 保存游戏中心数据的良好做法（GKTurnBasedMatch）？

> ID：15938484
> 
> 赞同：0
> 
> 时间：2013-04-10T23:47:10.663
> 
> 标签：ios, game-center, gkturnbasedmatch

我正在使用游戏中心制作游戏应用程序。

我想问一下在应用程序中保存整个对象（GKTurnBasedMatch）等游戏数据的好习惯是什么？

因为，每场比赛都有 matchData。我打算将这个 GKTurnBasedMatch 保存在 NSDefault 中，但是从 nsdefault 中检索它没有运气。那么，有什么好的方法吗？

大家能给我一些建议吗？我的考虑只是如果我更新应用程序，NSDefault 数据会在应用程序更新后被删除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T10:54:54.220

存储这些对象根本不是一个好习惯。Game Kit 的“真相”在 Game Center，因此您的应用应该从 Game Center 检索最新信息，以确保一切都是最新的。想象一下，如果您的用户有两台不同的设备，并在一台设备上玩游戏；如果另一台设备依赖于共享状态，那么它将错过更新。

当您的应用启动时，使用`+[GKTurnBasedMatch loadMatchesWithCompletionHandler:]`来找出当前正在进行的匹配。如果您需要将自定义数据与比赛一起存储，请将其存储在`matchData`比赛的属性中，以便与 Game Center 同步。

如果你想支持某种有限的离线显示，我会使用你需要的属性来显示和存储与比赛 ID 相关联的那些（这样你就可以在重新连接到游戏时将其匹配回现场比赛中心。例如，您可以存储匹配参与者的姓名和当前消息。这些都只是字符串，因此您可以轻松地将它们与用户默认的匹配 ID 一起存储。

# php - CakePHP：“添加”操作不适用于管理员前缀

> ID：15938486
> 
> 赞同：1
> 
> 时间：2013-04-10T23:47:31.287
> 
> 标签：php, cakephp, cakephp-2.0

在添加管理员前缀/路由之前，一切正常......

目前，我有一个带有以下功能的 QuestionsController.php 文件：

```
public function admin_add() {
    if ($this->request->is('post') ) {
        $this->Question->create();
        if ($this->Question->save($this->request->data)) {
            $this->Session->setFlash('Your question has been saved.');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Unable to add your question.');
        }
    } else {
            $this->Session->setFlash('Not post.');
    }

} 
```

这是 /views/Questions/admin_add.php 的内容：

```
<h2>Add a question</h2>
<?php
echo $this->Form->create('Question');
echo $this->Form->input('nickname');
echo $this->Form->input('content');
echo $this->Form->input('option1');
echo $this->Form->input('option2');
echo $this->Form->input('option3');
echo $this->Form->end('Save question');

echo $this->Html->link('Cancel', array('controller' => 'questions', 'action' => 'index')); 
```

注意到控制器底部的 setFlash("Not post.") 了吗？每次单击“保存问题”按钮时，我都会看到该消息？为什么？

**更新** 我们已经确定请求方法是`get`，这就解释了为什么它不起作用。但现在真正的问题是*为什么*会这样`get`。我很确定这是`post`在添加管理员前缀之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:03:28.580

```
<?php echo $this->Form->create('Question', array( 'type' => 'POST' ) ); ?> 
```

试试看:)

您还可以向该`$options`数组添加其他选项，例如操作、编码、默认值、url 等。

**更新**

根据您的评论，我认为您是在告诉我们 GET 是由控制器确定的。检查源代码中的 FORM 以查看是否`type="post"`存在，或者是否显示`type="get"`.

如果它正在发布，那么您将在发布时被重定向，类似于[PRG](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式。这就是你失去它的地方。发布表单后，您最终会使用哪个 URL？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:57:08.557

如果它到达 if 块的后半部分，则不会发布请求。

要找出它是什么，只需在 if 块之前添加以下代码：

```
debug(CakeRequest::method()); 
```

（假设您的调试级别为 2 用于开发模式）

然后，一旦你知道发生了什么样的请求，就检查一下。

# ruby-on-rails - Ruby Rails 环境完全关闭关于路径、安装和 brew

> ID：15938487
> 
> 赞同：0
> 
> 时间：2013-04-10T23:47:39.940
> 
> 标签：ruby-on-rails, ruby, environment

谢谢你帮助我！

长话短说，我把它放在终端里

```
curl https://raw.github.com/gist/1688857/rbenv.sh | sh ; rbenv global 1.9.3-p327-perf 
```

我最终在我当前的 ruby​​/rails 上下载/安装了 ruby​​。我及时阻止了它，但为时已晚。我的rails和我的ruby命令都不起作用.....

最初我安装 railsinstaller 是为了让我的 rails/ruby 启动并运行。

我做了 rvm implode，删除了 .bash_profile 中的 rvm 路径，也删除了 /etc/rvmrc 文件。我认为 rmv 与我下载的新红宝石发生冲突。

最初我使用 railsinstaller 让 ruby​​/rails 启动并运行。

然后我尝试安装 railsinstaller 但它没有用！后来我卸载了 railsinstaller，因为我想尝试 brew。

这是我的 .bashrc 个人资料

```
export PATH="/usr/bin:$PATH"
export PATH="/usr/local:$PATH"
export PATH="/usr/local/bin:$PATH"
export PATH=/usr/local/mysql/bin:$PATH
export PATH="/usr/local/opt/ruby/bin:$PATH"
export DYLD_LIBRARY_PATH=/usr/local/mysql/lib:$DYLD_LIBRARY_PATH

### Added by the Heroku Toolbelt
export PATH="/usr/local/heroku/bin:$PATH" 
```

这是我运行 brew doctor 时得到的

```
Warning: Setting DYLD_* vars can break dynamic linking.
    Set variables:
DYLD_LIBRARY_PATH

Warning: The /usr/local directory is not writable.
Even if this directory was writable when you installed Homebrew, other
software may change permissions on this directory. Some versions of the
"InstantOn" component of Airfoil are known to do this.

You should probably change the ownership and permissions of /usr/local
back to your user account.

Warning: Experimental support for using Xcode without the "Command Line Tools".
You have only installed Xcode. If stuff is not building, try installing the
"Command Line Tools for Xcode" package provided by Apple.

Warning: You have unlinked kegs in your Cellar
Leaving kegs unlinked can lead to build-trouble and cause brews that depend on
those kegs to fail to run properly once built. Run `brew link` on these:

autoconf
libtool 
```

（我试过上面的 brew 链接）

```
Error: Could not symlink file: /usr/local/Cellar/autoconf/2.69/bin/ifnames
/usr/local/bin/ifnames may already exist.
/usr/local/bin may not be writable. 
```

同样的事情发生在 libtool

```
Warning: Your Xcode is configured with an invalid path.
You should change it to the correct path:
sudo xcode-select -switch /Applications/Xcode.app 
```

当我运行 brew install ruby​​ .......

```
NOTE: By default, gem installed binaries will be placed into:
   /usr/local/opt/ruby/bin

 You may want to add this to your PATH.
 Warning: Could not link ruby. Unlinking...
 Error: The `brew link` step did not complete successfully
 The formula built, but is not symlinked into /usr/local
 You can try again using `brew link ruby'
     ==> Summary
  /usr/local/Cellar/ruby/2.0.0-p0: 877 files, 18M, built in 2.7 minutes 
```

* * *

有一些我无法访问的 bash 命令。我每次都必须获取我的 bashprofile 才能让一些 bash 命令正常工作.....

* * *

我是 Rails 新手，我正在开发一个 Rails 应用程序。rails mvc 的概念很容易掌握，但是我没太注意。-paths -environments -rbenv -rvm -brew -bash 命令

ETC

这是您在安装完所有内容后开始制作应用程序并且不太了解 ruby​​/rails 在出现问题时如何在引擎盖下工作的类型。

如果有人能指出我正确的方向。我会喜欢你的帮助。我将尝试自己进一步研究。

谢谢！如果您需要更多信息，请告诉我，谢谢！

* * *

嗨，这是我的更新

谢谢！所以我安装了 xcode，我浏览了本教程 [https://coderwall.com/p/auvm9g](https://coderwall.com/p/auvm9g) 并成功安装了所有东西，但我的电脑找不到我安装的 ruby​​/rails。它在安装完成时出现，但在我退出终端后我丢失了它。

* * *

我做了酿造医生

```
Warning: Setting DYLD_* vars can break dynamic linking.
Set variables:
DYLD_LIBRARY_PATH

Warning: "config" scripts exist outside your system or Homebrew directories.
`./configure` scripts often look for *-config scripts to determine if
software packages are installed, and what additional flags to use when
compiling and linking.

Having additional scripts in your path can confuse software installed via
Homebrew if the config script overrides a system or Homebrew provided
script of the same name. We found the following "config" scripts:

/Library/Frameworks/Python.framework/Versions/2.7/bin/python-config
/Library/Frameworks/Python.framework/Versions/2.7/bin/python2-config
/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7-config 
```

* * *

```
Here is my .bashrc

PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/X11/bin

export PATH="/usr/local:$PATH"ls
export PATH=/usr/local/mysql/bin:$PATH
export DYLD_LIBRARY_PATH=/usr/local/mysql/lib:$DYLD_LIBRARY_PATH

### Added by the Heroku Toolbelt
export PATH="/usr/local/heroku/bin:$PATH" 
```

* * *

这是我的 .bash_profile

```
# Setting PATH for Python 2.7
# The orginal version is saved in .bash_profile.pysave
PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
export PATH

[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into    shell session *as a function*
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"

PATH="/usr/local/bin:/usr/local/heroku/bin:/usr/local/mysql/bin:/usr/local/bin:$PATH" 
```

* * *

红宝石-v

```
rbenv: ruby: command not found

The `ruby' command exists in these Ruby versions:
  1.9.3-p286 
```

* * *

导轨-v

```
rbenv: rails: command not found

The `rails' command exists in these Ruby versions:
  1.9.3-p286 
```

* * *

\curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s 稳定 --ruby

```
Upgrading the RVM installation in /Users/judyngai/.rvm/
RVM PATH line found in /Users/judyngai/.zshrc.
RVM sourcing line found in /Users/judyngai/.bash_profile /Users/judyngai/.zlogin.
Installing rvm gem in 1 gemsets ERROR:  Loading command: install (LoadError)
cannot load such file -- openssl
ERROR:  While executing gem ... (NoMethodError)
undefined method `invoke_with_build_args' for nil:NilClass

Upgrade Notes:

 * WARNING: Above files contains `PATH=` with no `$PATH` inside, this can break RVM,
 for details check https://github.com/wayneeseguin/rvm/issues/1351#issuecomment-10939525
 to avoid this warning append #PATH.

 * No new notes to display. 
```

* * *

我的 .rvm 和 .benv 在我的 Users/judyngai/.rvm

我很确定我有路径问题，如果有人能启发我，我会非常高兴和感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:25:22.483

你有一些事情正在发生。

首先，我没有使用 railsinstaller，但它看起来很糟糕。许多这些“一键式安装”应用程序最终会让您像这里一样一团糟。我建议删除 Rails 安装程序所做的所有事情，并按照本指南之类的内容进行操作：[https](https://coderwall.com/p/auvm9g) ://coderwall.com/p/auvm9g 。这将分别执行每个部分。

但是，如果你想尝试修复你得到的东西......

首先，根据`brew doctor`. 其中最大的是您需要安装 Xcode 命令行工具。

这也应该注意 autoconf 和 libtool 警告。

看起来您还需要更改 /uar/local 目录的权限，因为这是自制软件放置所有内容的地方。

其次，通过 brew 安装 Ruby 是个坏主意。我推荐 rbenv 或 rvm。

# asp.net-mvc - 为什么我在 MVC4 中的会话状态突然丢失数据？

> ID：15938488
> 
> 赞同：0
> 
> 时间：2013-04-10T23:47:43.430
> 
> 标签：asp.net-mvc, asp.net-mvc-4, azure, session-state

我在以下页面中阅读了持续的 WindowsAzure 回收存储会话

[为什么我的实例在尝试将会话存储在同一位置的 Azure 缓存中时会回收？](https://stackoverflow.com/questions/12052589/why-do-my-instances-recycle-when-trying-to-store-sessions-in-co-located-azure-ca)

这是我的 webconfig 设置：

```
<sessionState mode="InProc" timeout="2880" /> 
```

我正在阅读，也许我必须更改模式以保持会话活跃，因为当我使用该程序时，突然发生这种情况。让我们在一小时后去看看。

我能做些什么来避免这种糟糕的用户体验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:21:47.270

如果您正在运行多个实例，那么您会丢失会话数据，因为负载均衡器会在实例之间反弹用户。“InProc”设置将会话数据存储在每个单独的实例上，而不是跨实例存储 - 阅读[更多](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)。

如果你想使用 co-located 缓存，那么你的配置应该类似于：

```
<!-- Windows Azure Caching session state provider -->
<sessionState mode="Custom" customProvider="AFCacheSessionStateProvider">
  <providers>
    <add name="AFCacheSessionStateProvider" 
      type="Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider, Microsoft.Web.DistributedCache"
      cacheName="shared" 
      dataCacheClientName="shared" 
      applicationName="AFCacheSessionState"/>
  </providers>
</sessionState> 
```

阅读[更多](http://msdn.microsoft.com/en-us/library/windowsazure/gg185668.aspx)。

**更新**：最后，检查您是否在 ServiceConfiguration.cscfg 文件中使用了 REAL BLOB 连接字符串。如果连接字符串显示“ **UseDevelopmentStorage=true** ”，则部署的角色将永远无法创建/连接到缓存 - 但是它将在模拟器中本地工作。：

```
<Setting name="Microsoft.WindowsAzure.Plugins.Caching.ConfigStoreConnectionString" value="UseDevelopmentStorage=true" /> 
```

# algorithm - 具有中间节点的最大流二分

> ID：15938492
> 
> 赞同：1
> 
> 时间：2013-04-10T23:48:12.437
> 
> 标签：algorithm, networking, graph, flow

我正在解决一个问题，即通过创建流网络基于某些约束来创建考试时间表。

*   一定数量的课程 C
*   固定天数 D
*   一组房间R
*   学生 S 到他们的课程的映射

如果学生正在学习 c1 和 c2 课程，这两个考试不能同时举行。

我无法根据这些约束创建流网络。这是迄今为止我尝试建立的网络之一。 ![流网络](https://i.stack.imgur.com/4lTOd.jpg)

黑色节点是源和汇。红色是学生。绿色是课程。橙色是天。蓝色是房间。

数字代表流量。

创建适当的流图后，我知道我会使用 Ford-Fulkerson 算法来找到最大流量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:17:30.727

This isn't a flow problem. It's actually NP-complete; you can reduce the graph colouring problem to it as follows:

Take as the set of courses the vertex set of the graph in your graph colouring instance. For each edge in that graph, say between `u` and `v`, create a student who's taking only courses `u` and `v`. Have exactly as many time slots as there are colours available.

Then a feasible schedule (where no student has both of his exams at the same time) will be a colouring of your graph.

You might have better luck building an integer programming model of your problem.

# ruby-on-rails - 如果 ActiveRecord::Base#create 在 3.2.13 中已被弃用，我仍然如何使用它？

> ID：15938494
> 
> 赞同：2
> 
> 时间：2013-04-10T23:48:27.427
> 
> 标签：ruby-on-rails, ruby

我正在运行 3.2.13 并遵循标准的“railstutorial.org”，我遇到了一个问题。我仍然掌握从 C++/Java 编程思维方式转换的窍门，并试图理解正常的调用约定。

我可以使用我的类 ( `User < ActiveRecord::Base`)，例如：

```
User.create(email: "email", password: "password", password_confirmation: "password") 
```

该[方法的文档](http://apidock.com/rails/ActiveRecord/Base/create/class)表明它已被弃用。`def create`在我的 ActiveRecord gem 源中，我也没有看到对 a 的引用。

由于调用没有使用哈希，这种调用的名称是什么？如果参数用大括号括起来，是否相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T01:42:06.940

这里有两个问题。

### 第一个问题：方法弃用

[在此提交](https://github.com/rails/rails/commit/ceb33f84933639d3b61aac62e5e71fd087ab65ed)中进行了更改。

该`create`方法[已从](https://github.com/rails/rails/commit/ceb33f84933639d3b61aac62e5e71fd087ab65ed#L4L529)[名为](https://github.com/rails/rails/commit/ceb33f84933639d3b61aac62e5e71fd087ab65ed#L11R40). _ `ActiveRecord::Base`_ _`ActiveRecord::Persistence`

关于 APIDock 告诉您的内容……该方法已“弃用**或移动**”。如果您查看建议列表的一半，您将看到`ActiveRecord::Persistence#create`。这是该方法移动到的地方。

请注意，这`ActiveRecord::Persistence#create`是内部使用的。在应用程序代码中调用`create`ActiveRecord**模型**（不是对象）时，您正在调用[`ActiveRecord::Relation#create`](http://apidock.com/rails/ActiveRecord/Relation/create).

`ActiveResource::Base#create`在 Rails 2.0 中引入，与 ActiveRecord 无关。

### 第二个问题：哈希作为参数

检查[源代码](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-create)显示`ActiveRecord::Relation#create`以下内容：

```
# File activerecord/lib/active_record/relation.rb, line 85
def create(*args, &block)
  scoping { @klass.create(*args, &block) }
end 
```

看到 splat 论点了`*args`吗？这告诉 Ruby 将所有剩余的参数传递给`args`，无论有多少。Ruby/Rails 的ducktyping 魔术看到一堆键值对并假设它是一个散列。

Rails 有点松散，要求参数中的散列用大括号括起来，就像将所有参数包装在括号中一样松散。通常，当您传入一系列键值对时，Rails 会推断出一个哈希值。有时这会在传入多个散列时引起麻烦，例如在复杂`form_for`方法中。

如果您在没有大括号的情况下出现异常行为，请插入它们。明确定义哈希将允许您确保正确的行为。

[在此处](http://endofline.wordpress.com/2011/01/21/the-strange-ruby-splat/)阅读有关 Ruby splats的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:11:53.843

“已弃用”并不意味着“不再可用”。这意味着它将*不再*可用。

# c++ - 为二维数组正确读取文件（c++）

> ID：15938497
> 
> 赞同：0
> 
> 时间：2013-04-10T23:48:41.753
> 
> 标签：c++, arrays, file, file-io, multidimensional-array

我试图读入一个文件，其中前两行是从第三行开始的“游戏板”的尺寸。发生的情况是，当我读取数组时，它从 .txt 的第 0 行开始读取 20x20。我需要它从第 2 行开始。

```
 inputFile >> boardSizeRow;
    inputFile >> boardSizeCol;
    inputFile.get();

    char gameBoard[20][20];
    for (int row = 0; row < boardSizeRow; row++)
    {
        for (int col = 0; col < boardSizeCol; col++)
        {
            gameBoard[row][col] = inputFile.get();
        }
    }

    for (int row = 0; row < boardSizeRow; row++) //////////////TO TEST PRINT
    {
        for (int col = 0; col < boardSizeCol; col++)
        {
            cout << gameBoard[row][col];
        }
    } 
```

文件：

```
20
20
WWWWWWWWWWWWWWWWWWWW
  W GO  W          W
W WW      w    S   W       
W H W   GW  w      W  
WPW  WW          G W    
 WK       W        W 
W W W  W    w   w  W
  WK WU            W
    SW      w  w   W
           W       W
    w    W       G W
  G    W       w   W 
D   wwwww          W
         K   w  D  W
w w   W w   w      W
    ww  w    WWWWWWW
  G        w       W
    ww  w S    w   W
   WWW      G      W
WWWWWWWWWWWWWWWWWWWW 
```

# c# - IIS无法扩展，但cpu也没有最大化，为什么会变慢

> ID：15938498
> 
> 赞同：1
> 
> 时间：2013-04-10T23:48:47.070
> 
> 标签：c#, iis, scalability, cpu, application-pool

我有一个应用程序，其中客户端使用 websockets 连接到 IIS。IIS 然后为 IPC 创建一个本地代理以连接到可执行文件。

所以IIS有点像中间人。

随着更多的连接进来，整个架构变得越来越慢。

所以某处存在瓶颈。

有趣的是 CPU 没有超过 25% 的使用率。我没有对 CPU utils 施加任何限制。

问题不在于作为函数的代码需要 100 毫秒，而现在需要 1000 毫秒。并且这些功能不受网络限制。简单的图像转换。我还会检查我是否阻塞了锁或其他任何东西。

越多的用户加入系统，就会发生更多的这些图像转换，并且使用更多的 cpu。但同样，cpu 利用率并没有改变，它停留在 25% 左右

由于即使是最简单的函数的执行速度也会变慢，我猜应用程序池可以使用多少 CPU 是有限制的。我再次检查了 AppPool 设置，没有限制。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T23:58:06.087

听起来像是通过代码或系统设置进行的 CPU 亲和性设置。

您可以为每个应用程序池设置处理器关联（因此限制为 1 个处理器），这将有效地限制在该池中运行的应用程序使用一个处理器。这将限制 w3wp 进程仅使用一个处理器，因此如果您有一个四核 CPU，它将以 25% 的速度运行。在这里您可以通过您的 IIS 设置找到有关更改此设置的详细信息：[this:http://www.iis.net/configreference/system.applicationhost/applicationpools/add/cpu](http://www.iis.net/configreference/system.applicationhost/applicationpools/add/cpu)

您也可以检查任务管理器并右键单击该进程并单击“设置 Afinity..”，然后查看您是否将 IIS 限制为一个核心。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T00:02:10.527

您可以检查应用程序池进程的进程亲缘关系。这可能是你被困在 25% 的原因。

除了处理器关联之外，如果您的请求长时间运行，您可能会超出 IIS 允许的每个 CPU 的并发请求数的默认限制（尤其是在集成模式下....12）。四核 CPU 上的 25% 暗示亲和力是您的问题，但如果不是，您也可以检查一下。这是一个[相关的答案](https://stackoverflow.com/questions/6123453/problem-with-ihttpasynchandler-and-asp-net-requests-executing-counter/6128861#6128861)

# forms - 将记录添加到表中，并在 2 个单独的表中编辑记录

> ID：15938500
> 
> 赞同：1
> 
> 时间：2013-04-10T23:48:52.690
> 
> 标签：forms, vba, ms-access

嗨，我正在制作一个访问数据库，但我不知道如何做一件特定的事情。

我有一个带有两个文本框的表单：MovieID 和 CustomerID。我还有三个单独的表：MovieList、CustomerInfo 和 HireHistory。我需要的是，当我在给定框中输入 MovieID 和 CustomerID 然后按下我的按钮 HireButton 时，它将特定 MovieID 的 LastHireDate 编辑为 Today()，将特定 CustomerID 的 LastHireDate 编辑为 Today()，然后在我的 HireForm 中（第一行有 CustomerID）它在 CustomerID 下方添加一条新记录，格式如下：`MovieID " on " Today()`

另外，我需要让它检查 MovieID 的类型，如果它是 R16 或 R18，然后它会检查客户今天是否超过 16 岁或 18 岁，如果不是，那么它会出现一个错误框。我知道如何检查他们是否超过 16 岁或 18 岁，但不知道错误框。

我知道那是很多文字，所以我只会写我脑子里的东西（我如何看待代码），这样更容易看到我想要做什么。

```
IF MovieID.Rating = 'R16' OR 'R18'
   THEN IF CustomerID.[Date(Year(DOB)+16,Month(DOB),(Day(DOB))] > Today()
           THEN DISPLAY Msgbox = "Sorry, too young"

           ELSE SET CustomerID.LastHireDate = Today() 
                SET MovieID.LastHireDate = Today()
                ADDRECORD in HireHistory for that CustomerID to (MovieID & " on " & Today())

   ELSE SET CustomerID.LastHireDate = Today() 
        SET MovieID.LastHireDate = Today()
        ADDRECORD in HireHistory for that CustomerID to (MovieID & " on " & Today()) 
```

这是否更好地解释了它？在此先感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:53:37.497

所以在这里我会怎么做。您首先必须为每个表创建一个记录集。

对于这个年龄，我会使用这个功能。：[http ://www.fmsinc.com/MicrosoftAccess/modules/examples/AgeCalculation.asp](http://www.fmsinc.com/MicrosoftAccess/modules/examples/AgeCalculation.asp)

```
customerBirth = yourCode to get the date

If MovieID.Rating = 'R16' OR 'R18' then

    If AgeYears(customerBirth) < 16 then 
        msgbox("Sorry, too young")
    else
        MyCustomerRecordSet("LastHireDate") = now
        MyMovieRecordSet("LastHireDate") = now

        MyHireRecorset.AddNew
            MyHireRecorset("I don't know what your trying to do here")
        MyHireRecorset.Update

    end if

Else
        MyCustomerRecordSet("LastHireDate") = now
        MyMovieRecordSet("LastHireDate") = now
        MyHireRecorset.AddNew
        MyHireRecorset("I don't know what your trying to do here")

End if 
```

如果您有任何问题，请提出。

# ruby-on-rails - ArgumentError，创建操作中的参数数量错误（1 为 3）

> ID：15938510
> 
> 赞同：0
> 
> 时间：2013-04-10T23:49:59.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用omniauth gem 来允许用户注册/登录到我的rails 应用程序

这是我的 gemfile 的一部分

```
gem 'omniauth'
gem 'omniauth-twitter'
gem 'twitter' 
```

Omniauth = 是 v1.1.4，Omniauth-twtter 是 v0.0.16，Omniauth-oauth 是 v1.0.1，Twitter 是 4.6.2

[在将 rails 从 3.1.1 升级到 3.1.3 后，](https://stackoverflow.com/questions/8630441/wrong-number-of-arguments-3-for-1-after-upgrading-rails-from-3-1-1-to-3-1-3)我遇到了类似的错误错误数量的参数（3 for 1），所以我尝试卸载 Omniauth 并降级到版本“~> 0.2.6”，但我得到了这个信息：

该捆绑包当前将omniauth 锁定在1.1.4。是omniauth版本是问题的原因还是其他原因？

当我尝试使用 Twitter 登录时，我尝试修复的错误消息是这样的

```
ArgumentError in AuthenticationsController#create
wrong number of arguments (3 for 1)

app/helpers/sessions_helper.rb:4:in `sign_in'
app/controllers/authentications_controller.rb:12:in `create' 
```

这是我的 authentications_controller.rb

```
class AuthenticationsController < InheritedResources::Base

def index
    @authentications = current_user.authentications if current_user
end

def create
  omniauth = request.env['omniauth.auth']
  authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
  if authentication
     flash[:notice] = "Signed in successfully"
     sign_in_and_redirect(:user, authentication.user)
  elsif current_user
   token = omniauth['credentials'].token
   secret = omniauth['credentials'].token
   current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'], :token => token, :secret => token_secret)
   flash[:notice] = "Authentication successful"
   redirect_to authentications_url
   else
    user = User.new
    user.apply_omniauth(omniauth)
    if user.save!
    flash[:notice] = "Signed in successfully"
     sign_in(:user, authentication.user)
   else
    session[:omniauth] = omniauth.except('extra')
    redirect_to '/signup'
   end
end
end

def destroy
    @authentication = current_user.authentications.find(params[:id])
    @authentication.destroy
    flash[:notice] = "Successfully destroyed authentication"
    redirect_to authentications_url

end
end 
```

这是我的 session_helper.rb

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    current_user = user
  end

  def sign_in_and_redirect(user)
    redirect_to root_path
  end 
```

这是我的 session_controller.rb

```
class SessionsController < ApplicationController
  def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_to root_url
    else
      flash.now[:error] = "Invalid email/password combination"
      render 'new'
    end
  end 
```

这是 user.rb 模型

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password
  has_many :authentications

  before_save { |user| user.email = user.email.downcase }
  before_save :create_remember_token
  before_validation :no_password_omniauth
  validates_uniqueness_of :name, { case_sensitive: false }
  validates :name,  presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, length: { minimum: 6 }
  validates :password_confirmation, presence: true

  @called_omniauth = false

  def apply_omniauth(omniauth)
 authentications.build(:provider => omniauth['provider'],
 :uid => omniauth['uid'],
 :token => omniauth['credentials'].token,
 :secret => omniauth['credentials'].secret)
 @called_omniauth = true
 self.email = "test@example.com"
 self.name = omniauth['info']['name']
 self.password = self.password_confirmation = "password"
 end

  def password_required
    return false if @called_omniauth == true
    (authentications.empty? || !password.blank?)
end

  def twitter
unless @twitter_user
provider = self.authentications.find_by_provider('twitter')
@twitter_user = Twitter::Client.new(:oauth_token => provider.token, :oauth_token_secret => provider.secret) rescue nil
end
@twitter_user
end

  private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end

    def apply_twitter(omniauth)
if (extra = omniauth['extra']['user_hash'] rescue false)
# Example fetching extra data. Needs migration to User model:
# self.firstname = (extra['name'] rescue '')
end
end

def no_password_omniauth
  self.password_digest = SecureRandom.urlsafe_base64 unless password_required
end

def hash_from_omniauth(omniauth)
{
:provider => omniauth['provider'],
:uid => omniauth['uid'],
:token => omniauth['credentials']['token'],
:secret => omniauth['credentials']['secret']
}
end
end 
```

最后，这是 users_controller.rb

```
class UsersController < ApplicationController
  before_filter :signed_in_user,
                only: [:index, :edit, :update, :destroy]
  before_filter :correct_user,   only: [:edit, :update]
  before_filter :admin_user,     only: :destroy

def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome"
      redirect_to root_url
    else
      render 'new'
    end
  end

  def edit
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:06:53.690

您已将 sign_in_and_redirect 定义为仅接受一个参数 - 但您传入了两个参数。

所以也许`sign_in_and_redirect(:user, authentication.user)`在你的控制器中应该变成`sign_in_and_redirect(authentication.user)`.

但有两点值得注意：

*   您的 sign_in_and_redirect 方法实际上并没有让用户登录，它只是重定向他们。
*   如果您使用的是 Devise，那么您将拥有一个已使用以下签名定义的具有该名称的方法：`sign_in_and_redirect(resource_or_scope, *args)`. 我建议您使用他们的方法（如果您使用带 OmniAuth 的设计）或将您的方法命名为其他名称以避免冲突和混淆。

[实际上，我的分析可能有点偏离，因为堆栈跟踪指向您的 sign_in 方法，而不是 sign_in_and_redirect - 堆栈跟踪中的行号对于您共享的代码是否准确，或者您是否删除了一些代码？]

# java - 使用 OAuth 2.0 进行 Java 和 Google 电子表格 API 授权

> ID：15938514
> 
> 赞同：4
> 
> 时间：2013-04-10T23:50:41.510
> 
> 标签：java, oauth-2.0, google-drive-api, google-spreadsheet-api

我想使用 Java 阅读 Google 电子表格，推荐的方法是使用[Google 电子表格 API](https://developers.google.com/google-apps/spreadsheets/)。

当您想要使程序安全时，问题就开始了，因此他们鼓励您使用 OAuth 2.0。在[官方页面](https://developers.google.com/google-apps/spreadsheets/#authorizing_requests)中，他们展示了如何仅使用 .NET 来执行此操作，并说“ *Java 客户端库当前不支持 OAuth 2.0* ”，并且他们提供了替代方案，例如使用`OAuth 1.0`或`Client Login`直接使用*电子邮件*和*密码*。

这确定吗？，没有办法通过Java进行OAuth 2.0身份验证，可能不直接使用Java客户端库，而是通过具有特定参数的请求。

如有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-14T21:19:38.590

我还发现[开发人员文档](https://developers.google.com/google-apps/spreadsheets/#authorizing_requests_with_oauth_20)为除 OAuth2 之外的所有内容提供了 Java 示例，这很愚蠢。这是我用来让它工作的一些示例代码。为了完整起见，它包括后面部分中的[检索电子表格示例](https://developers.google.com/google-apps/spreadsheets/#retrieving_a_list_of_spreadsheets)。另请注意，您必须将所需的范围添加到 Java DrEdit 示例中，如下所示。

```
public class GSpreadsheets {

    private static final String CLIENT_ID = "YOUR_CLIENT_ID";
    private static final String CLIENT_SECRET = "YOUR_SECRET_ID";
    private static final String REDIRECT_URI = "urn:ietf:wg:oauth:2.0:oob";

    public static void main(String[] args) throws Exception {

        if (CLIENT_ID.equals("YOUR_CLIENT_ID") || CLIENT_SECRET.equals("YOUR_SECRET_ID")) {
            throw new RuntimeException(
                    "TODO: Get client ID and SECRET from https://cloud.google.com/console");
        }

            // get credentials similar to Java DrEdit example
            // https://developers.google.com/drive/examples/java
        HttpTransport httpTransport = new NetHttpTransport();
        JsonFactory jsonFactory = new JacksonFactory();

        GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(
                httpTransport, jsonFactory, CLIENT_ID, CLIENT_SECRET,
                Arrays.asList(DriveScopes.DRIVE, 
                              "https://spreadsheets.google.com/feeds", 
                              "https://docs.google.com/feeds"))
                .setAccessType("online")
                .setApprovalPrompt("auto").build();

        String url = flow.newAuthorizationUrl().setRedirectUri(REDIRECT_URI).build();
        System.out.println("Please open the following URL in your "
                + "browser then type the authorization code:");
        System.out.println("  " + url);
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String code = br.readLine();

        GoogleTokenResponse response = flow.newTokenRequest(code).setRedirectUri(REDIRECT_URI).execute();
        GoogleCredential credential = new GoogleCredential().setFromTokenResponse(response);

            // create the service and pass it the credentials you created earlier
        SpreadsheetService service = new SpreadsheetService("MyAppNameHere");
        service.setOAuth2Credentials(credential);

        // Define the URL to request.  This should never change.
        URL SPREADSHEET_FEED_URL = new URL(
            "https://spreadsheets.google.com/feeds/spreadsheets/private/full");

        // Make a request to the API and get all spreadsheets.
        SpreadsheetFeed feed = service.getFeed(SPREADSHEET_FEED_URL, SpreadsheetFeed.class);
        List<SpreadsheetEntry> spreadsheets = feed.getEntries();

        // Iterate through all of the spreadsheets returned
        for (SpreadsheetEntry spreadsheet : spreadsheets) {
          // Print the title of this spreadsheet to the screen
          System.out.println(spreadsheet.getTitle().getPlainText());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T03:11:59.630

Google Data Java 客户端库现在支持 OAuth 2.0：

[https://code.google.com/p/gdata-java-client/source/detail?r=505](https://code.google.com/p/gdata-java-client/source/detail?r=505)

不幸的是，库中没有完整的示例来展示如何使用它。我建议检查这两个链接以将信息放在一起使其工作：

*   [https://code.google.com/p/google-oauth-java-client/wiki/OAuth2](https://code.google.com/p/google-oauth-java-client/wiki/OAuth2)
*   [https://code.google.com/p/google-api-java-client/wiki/OAuth2](https://code.google.com/p/google-api-java-client/wiki/OAuth2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T03:59:08.667

[编辑]

## Java OAuth2 代码

关于 [google-spreadsheet-api] 和 OAuth2 的博客文章，代码为
[http://soatutorials.blogspot.co.at/2013/08/google-spreadsheet-api-connecting-with.html](http://soatutorials.blogspot.co.at/2013/08/google-spreadsheet-api-connecting-with.html)

*相关问题：* [使用 google gdata 客户端 API 来自 Java/Scala 的 OAuth2 授权](https://stackoverflow.com/questions/27572617/oauth2-authorization-from-java-scala-using-google-gdata-client-api)

[结束编辑]

我使用过：Google drive **DrEdit**教程，完整示例展示了如何将 OAuth 2.0 与 Drive 一起使用。该代码适用于谷歌电子表格 GData 样式 API。（注意：不包括刷新令牌，但刷新令牌可以按您的预期工作，所以不要太难添加。） -

额外说明：更好的文档化 API 是 Google-Apps-Script。

# ios - ARC语义问题 - 没有可见的@interface

> ID：15938515
> 
> 赞同：3
> 
> 时间：2013-04-10T23:50:41.640
> 
> 标签：ios, objective-c

我有 2 个 UIViewController 类 - DocumentViewController 和 LibraryViewController。

在类 DocumentViewController 中，我有以下代码：

```
- (id)initWithURL:(NSString *)linkToPdf withFileName:(NSString *)fileName{
     //some code goes here ... 
} 
```

我正在尝试使用以下代码从 LibraryViewController 加载 DocumentViewController 类：

```
DocumentViewController *documentViewController = [[DocumentViewController alloc] initWithURL:@"http://investor.google.com/pdf/2012Q4_google_earnings_slides.pdf" withFileName:@"Google Earnings Slides"];
[self presentViewController:documentViewController animated:NO completion:nil]; 
```

当我构建时，我在 LibraryViewController 类中收到一个错误，说 No visible @interface for 'DocumentViewController' 声明了带有 initWithURL:withFileName 的选择器：

我该如何解决 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:52:41.993

检查方法声明是否在`DocumentViewController`的头文件中。应该是这样的

```
- (id)initWithURL:(NSString *)linkToPdf withFileName:(NSString *)fileName; 
```

# python - 在中间模板中包装 jinja2 块内容

> ID：15938516
> 
> 赞同：1
> 
> 时间：2013-04-10T23:50:47.197
> 
> 标签：python, jinja2

是否可以从中间父模板调用子块？

例子

```
// base.html
<body>
  {% block content %}{% endblock %}
</body>

// base-for-pages.html
{% block content %}
  <div class="wrap">
  {% block content %}{% endblock %}
  </div>
{% endblock %}

// template3.html
{% block content %}
  <h1>Actual content</h1>
{% endblock %} 
```

我知道它不是这样工作的，但是是否可以设置类似 in 的东西，`base-for-pages.html`以便您可以在将子模板的内容发送到父模板之前对其进行包装？

创建一个新的根模板只是为了包装子模板的内容似乎有点过头了。

# c - 终端如何从标准输出读取并在屏幕上绘制文本？

> ID：15938518
> 
> 赞同：8
> 
> 时间：2013-04-10T23:51:16.590
> 
> 标签：c, linux, macos, bash, unix

我有一个关于终端和进程如何工作的一般性问题。

在任何进程中，如果我写入标准输出（即文件描述符 2），它就会被绘制在终端窗口上。我的问题是，这实际上是如何实现的？stdout 是否是终端不断读取并在屏幕上绘制内容的实际“虚拟”文件？或者进程/标准输出流和终端之间是否存在某种 IPC？

请注意，当我说终端时，我指的是一些通用的 GUI 终端/控制台，例如 Mac 上的终端。

PS如果这个问题不清楚，请告诉我，我会很乐意再次解释:)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T00:32:46.350

The magic part here that you don't seem to be aware of is the kernel's tty layer.

Each terminal window you open corresponds to a [pseudoterminal device](http://en.wikipedia.org/wiki/Pseudo_terminal) — for instance, `/dev/ttys001` is a name for one such device on Mac OS X. By default, any process that's running in a terminal and which doesn't have its input/output redirected from/to somewhere else, its standard input, output, and error are all set to one of these devices. For instance, if I run `lsof` on a `cat` process running in a terminal, I see:

```
COMMAND   PID USER   FD   TYPE DEVICE  SIZE/OFF     NODE NAME
...
cat     52919 user    0u   CHR   16,5    0t4562     3313 /dev/ttys005
cat     52919 user    1u   CHR   16,5    0t4562     3313 /dev/ttys005
cat     52919 user    2u   CHR   16,5    0t4562     3313 /dev/ttys005

```

When a process writes to a pseudoterminal slave device, the output is routed to the process holding the master end of the connection (in this case, your terminal application), which can read it. Similarly, when a terminal application writes to a pseudoterminal master device, the data becomes available to any process that's reading from the corresponding slave device.

There are a few other tricks involved with pseudoterminal devices. Most notably, they have an inherent size in rows and columns, which an application running in them can query, they can perform certain simple translations on data passing through them (for instance, CR to CR/LF, backspace to DEL, and other such things), and they can generate signals when certain characters are seen (e.g, `Ctrl`-`C` generates an interrupt signal to the foreground process). There's a lot of weird historical subtleties here, but the point is that the kernel's tty layer is where most of this behavior exists.

Pseudoterminal devices are created using the [`forkpty()`](http://linux.die.net/man/3/forkpty) libc function. The details of how this works behind the scenes vary from platform to platform, and can get pretty hairy, so I won't dig into the details.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T23:56:07.100

当您包含 stdio.h 时，stdout 是在那里定义的变量。

引用[维基百科](http://en.wikipedia.org/wiki/C_file_input/output)

> stdout - 指向标准输出流的 FILE 的指针，通常是显示终端

而且，正如 Russ C 所提到的，在 Unix 中一切都是文件，所以在这方面你是对的。

[显然](http://linux.about.com/library/cmd/blcmdl3_stdout.htm)，每个打开的 unix 程序都有其输出、输入和错误流，默认情况下分别设置为 stdout、stdin 和 stderr。不过，它们可以更改。就像在终端中使用'<'[重定向文件的标准输入一样，你可能会在如下语句中执行此操作](http://sc.tamu.edu/help/general/unix/redirection.html)

```
mysql -u root -p dbname < ./data.sql 
```

我想这并不能真正回答你关于实现的真正细节的所有问题，但知道它是一个文件流可能会让你对正在发生的事情有一个很好的了解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T00:53:13.480

这是大图。

1.  终端是一个设备。它是一个硬件，你可以通过向它的硬件接口写入数据来让事物出现在它上面。
2.  操作系统将此（以及任何硬件设备）的处理委托给设备驱动程序。设备驱动程序本质上为设备提供了一个软件接口。然后，您可以通过调用此设备驱动程序软件接口使事物出现在终端上。
3.  在 *nix 系统中，设备驱动程序将它们控制的硬件设备公开为文件系统中的文件。您可以打开这些文件，并调用设备驱动程序提供的软件接口（通过 open、ioctl、close 等）。
4.  C 库有一个分层的 I/O 系统，它在下面打开这些文件并代表您调用设备驱动程序接口。你也可以自己做，但只要知道你使用的任何库函数也在做这个。
5.  默认情况下，创建进程时，描述符 0 和 1 会在终端设备上打开。因此，当您写入这些描述符时，底层驱动程序会接收数据，并与硬件设备对话以在屏幕上呈现字符。
6.  当您将一个进程的输出通过管道传输到另一个进程或将输出重定向到文件时，描述符会重新打开到其他设备（如管道或文件）上，并且您写入它们的数据最终会出现在相应的设备驱动程序中，最终是硬件设备。

# sql - 使用表变量选择顶部、分组和求和其他对象

> ID：15938519
> 
> 赞同：1
> 
> 时间：2013-04-10T23:51:18.857
> 
> 标签：sql, sql-server, sql-server-2012

我查看了其他几个问题，试图找到答案，但我做不到。事情是这样的，我有一张*非常*大的桌子，可以无限期地增长。当我说*BIG*时，我的意思是我有大约 1000 万行用于 6 小时数据的查询。我们有几个月的数据，所以你可以看到它有多大。

好吧，证明大小问题是合理的，我想做一个非常简单的查询：按列分组并对另一列的值求和。例如，我想要最大的 10 个总和，以及所有其他不在前 10 位的总和。我知道有办法做到这一点，但我想这样做而不必计算总计表两次。为此，我使用了表变量。我正在使用 SQL SERVER 2012。

```
DECLARE @sumsTable TABLE(operationName varchar(200), operationAmount int)
DECLARE @topTable TABLE(operationName varchar(200), operationAmount int)
DECLARE @startTime DATETIME
DECLARE @endTime DATETIME
DECLARE @top INTEGER

SET @top = 10
SET @endTime = '03/11/2013'
SET @startTime = '03/10/2013'

--grouping by operationName and summing occurences
INSERT INTO @sumsTable
SELECT operationName, COUNT(*) AS operationAmount
FROM [f6f87bf0-33ab-4882-8674-2cb31e5e49c4]
WHERE (TIMESTAMP >= @startTime) AND (TIMESTAMP <= @endTime)
GROUP BY operationName

--selecting top ocurrences
INSERT INTO @topTable
SELECT TOP(@top) * FROM @sumsTable
ORDER BY operationAmount DESC

--Summing others and making union with top
SELECT 'OTHER' AS operationName, SUM(operationAmount) as operationAmount FROM @sumsTable
WHERE operationName NOT IN (SELECT operationName FROM @topTable)
UNION
SELECT * FROM @topTable
ORDER BY operationAmount DESC 
```

我的问题是适合这是一个很好的方法，如果有更好的方法，更快的方法......我犯了什么罪吗？我可以摆脱表变量而不使所有的总和超过一次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:57:26.990

您可以在没有临时表的情况下执行此操作：

```
SET @top = 10
SET @endTime = '03/11/2013'
SET @startTime = '03/10/2013'

select 
      (case when y.RowID > @top then 'OTHER' else y.operationName end) as operationName,
      sum(y.operationAmount) as operationAmount
from
(
    select 
           row_number() over(order by count(*) desc) as RowID, 
           x.operationName, 
           count(*) AS operationAmount
    from [f6f87bf0-33ab-4882-8674-2cb31e5e49c4] as x
    where (TIMESTAMP >= @startTime) AND (TIMESTAMP <= @endTime)
    group by x.operationName
)
as y
group by (case when y.RowID > @top then 'OTHER' else y.operationName end) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:25:54.383

使用以下 sql，您只需要聚合一次原始表

而不是

```
row_number() over(order by count(*) desc) as RowID, x.operationName, count(*) AS operationAmount 
```

哪个 count(*) 两次

```
DECLARE @startTime DATETIME
DECLARE @endTime DATETIME
DECLARE @top INTEGER

SET @endTime = '03/11/2013'
SET @startTime = '03/10/2013'

;WITH cte AS  ( -- get sum for all operations
    SELECT operationName, COUNT(*) AS operationAmount
    FROM [f6f87bf0-33ab-4882-8674-2cb31e5e49c4]
    WHERE (TIMESTAMP >= @startTime) AND (TIMESTAMP <= @endTime)
    GROUP BY operationName
),
cte1 AS ( -- rank totals
    SELECT operationName, operationAmount, ROW_NUMBER()OVER (ORDER BY operationAmount DESC) AS RN  
    FROM cte
) -- get top 10 and others
SELECT (CASE WHEN RN < 10 THEN operationName ELSE 'Others' END) Name, SUM(operationAmount) 
FROM cte1
GROUP BY (CASE WHEN RN < 10 THEN operationName ELSE 'Others' END) 
```

# asp.net - 在 Orchard 1.6 CMS 上启用 EventDate 1.0 模块时出错

> ID：15938521
> 
> 赞同：0
> 
> 时间：2013-04-10T23:51:50.910
> 
> 标签：asp.net, orchardcms, orchardcms-1.6

我一直在尝试在 Orchard 1.6 上安装和启用 EventDate 1.0 模块，但它安装正常但无法启用，它在下面抛出服务器错误。

*说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。*

任何建议都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:39:07.383

恐怕 EventDate 和 Timetables 需要使用 RoutePart，因为我相信...1.4 之后不再使用它。您必须检查并将 RoutePart 的所有引用更改为 AutoRoute。我快速浏览了一下，我认为不值得花费时间或精力，最好创建自己的模块。我认为没有任何模块可以处理您可能想到的事件。

对不起！

# makefile - Makefile：获取最近更新文件的文件名组件

> ID：15938522
> 
> 赞同：0
> 
> 时间：2013-04-10T23:51:56.373
> 
> 标签：makefile

我可以在文件列表中引用上次更新文件的**文件名组件吗？**不是**文件扩展名组件**？怎么可能这样？

我有一个列出许多文件的 Makefile。例如：

```
FILES= file1.txt file2.txt file3.txt 
```

如果我能得到最近更新的文件，`FILES`我就能有一个 Makefile 目标它。例如：

```
viewThatFile: open $(LAST_TOUCHED_FILE_IN_FILES).html 
```

这太棒了！

*我正在使用 OSX 顺便说一句。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:18:34.370

```
LATEST := $(basename $(shell ls -1t $(FILES) | head -1)) 
```

# javascript - ROR 中的 POST 参数不可访问但在控制台中可见

> ID：15938523
> 
> 赞同：0
> 
> 时间：2013-04-10T23:52:08.147
> 
> 标签：javascript, ruby-on-rails, ruby, ajax

我正在使用 jquery ajax 调用将一些数据发布到我的 ROR 应用程序

我已将这部分剥离为硬编码，以便我可以让它工作

```
var testjson = '{"company": {"name": "acme", "address": "123 carrot street"}}';

    $.ajax({
      type: "POST",
      dataType: "JSON",
      url: 'http://localhost:3000/home/scoring/' + 1234 + "/update",
      data: datas,
      success: function(){
        alert('success');
      }
    }); 
```

当它到达正确的控制器时，我可以访问称为 match_id 的查询字符串“1234”（在路由文件中）

```
 match "home/scoring/:match_id/update" => "home#update" 
```

但是我无法访问 POST 元素，我的根元素“company”应该可以作为 params[:company] 访问，但它只是返回一个 nil

查看控制台，我可以看到数据被传递

> 在 2013-04-11 00:43:45 +0100 由 HomeController#update 作为 JSON 参数处理 127.0.0.1 开始 POST "/home/scoring/1365750000348629332744/update": {" name\": \"acme\", \"address\": \"胡萝卜街123号\"}}"=>nil, "match_id"=>"136575000034 8629332744"}

虽然“=> nil”有点令人担忧（为什么它是 nil？）我无法找到为什么我这会导致我这样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:06:05.850

您将一个已经编码的字符串传递给 jQuery，然后它再次对其进行编码。

您只需将数据存储为实际的 JavaScript 哈希，而不是字符串...

```
var testjson = {"company": {"name": "acme", "address": "123 carrot street"}}; 
```

... 并且 jQuery 将为您处理将其编码为 JSON。就目前而言，您`params`包含一个键，该键是字符串`"{"company": {"name": "acme", "address": "123 carrot street"}}"`，它映射到的值`nil`。

# c - 4 字节未对齐写入地址

> ID：15938525
> 
> 赞同：1
> 
> 时间：2013-04-10T23:52:13.613
> 
> 标签：c, memory

我正在将 CHibiOS RTOS 移植到 lm32 微处理器。

我在为设置新线程而编写的第一行代码中存在内存地址未对齐的问题。当他们试图写入内存时，其他三行已经给我一个类似的问题，但我解决了它对齐`intctx`和`context`struct put `__attribute__((packed));`。

代码如下：

```
tp->p_ctx.sp = (struct intctx*)((uint32_t *)wsp + size - sizeof(struct intctx));
tp->p_ctx.sp->r1 = (uint32_t)arg;
tp->p_ctx.sp->r2 = (uint32_t)pf;
tp->p_ctx.sp->ra = (uint32_t)port_thread_start; 
```

这些结构在我实现的头文件中定义：

```
struct intctx {
uint32_t r1;
uint32_t r2;
uint32_t r3;
uint32_t r4;
uint32_t r5;
uint32_t r6;
uint32_t r7;
uint32_t r8;
uint32_t r9;
uint32_t r10;
uint32_t r11;
uint32_t r12;
uint32_t r13;
uint32_t r14;
uint32_t r15;
uint32_t r16;
uint32_t r17;
uint32_t r18;
uint32_t r19;
uint32_t r20;
uint32_t r21;
uint32_t r22;
uint32_t r23;
uint32_t r24;
uint32_t r25;
uint32_t gp;
uint32_t fp;
uint32_t sp;
uint32_t ra;
uint32_t ea;
uint32_t ba;
} __attribute__((packed));

struct context {
struct intctx *sp;
} __attribute__((packed)); 
```

我使用 gdb 进行调试，当它尝试执行该行时：

```
tp->p_ctx.sp = (struct intctx*)((uint32_t *)wsp + size - sizeof(struct intctx)); 
```

它给出了以下问题：

```
core: 4 byte misaligned write to address 0x107409 at 0x100b20

Program received signal SIGBUS, Bus error.
0x00000080 in ?? () 
```

谁能帮我？谢谢你。

* * *

wsp 通过引用作为这些代码行所在函数的参数传递。wsp 的类型为 void *：但这是一个 Thread * 类型，wsp 指向空闲线程结构。

这行代码在 ChibiOS 支持的其他架构中以相同的功能实现，我只做了同样的事情：

```
tp->p_ctx.sp =  (struct intctx*)((uint32_t *)wsp + size - sizeof(struct intctx)); 
```

这是完整的功能：

```
Thread *chThdCreateI(void *wsp, size_t size,
                 tprio_t prio, tfunc_t pf, void *arg) {
/* Thread structure is laid out in the lower part of the thread workspace.*/
Thread *tp = wsp;

chDbgCheckClassI();

chDbgCheck((wsp != NULL) && (size >= THD_WA_SIZE(0)) &&
         (prio <= HIGHPRIO) && (pf != NULL),
         "chThdCreateI");
tp->p_ctx.sp =  (struct intctx*)((uint32_t *)wsp + size - sizeof(struct intctx));
tp->p_ctx.sp->r1 = (uint32_t)arg;
tp->p_ctx.sp->r2 = (uint32_t)pf;
tp->p_ctx.sp->ra = (uint32_t)port_thread_start;
//SETUP_CONTEXT(wsp, size, pf, arg);
return _thread_init(tp, prio);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:50:22.043

wsp的类型是什么？我建议不需要与存储`int32_t`类型适当对齐的字符数组或您定义的任何其他字符。考虑总线是如何按常规对齐以检索`int32_t`以 32 位为一组对齐的值的。现在考虑一下“总线错误”在架构级别上的实际含义：

1.  需要多次获取才能检索该值（在性能方面不受欢迎），或者
2.  您的程序出现故障（甚至更糟）

在常见的 Intel 实现中，它使用第一个选项，除非您或您的调试器向您的程序注入一些疯狂的汇编（例如，请参阅[此 wikipedia 文章](http://en.wikipedia.org/wiki/Bus_error#Bus_error_example)）。在 C 中，这只是简单的未定义行为。确保 wsp 适当对齐以指向`int32_t`类型。您可以通过确保它指向以下之一来做到这一点：

1.  一个`int32_t`变量，或
2.  `int32_t`数组中的任何对象，或：
3.  malloc、calloc 或 realloc 的返回值，或者：
4.  `int32_t`“将 malloc/calloc/realloc 返回值视为指向“的指针的任何对象`int32_t`。

我认为您对指针算术感到困惑。你在看哪本书？

# arrays - 为什么数组的值会改变？

> ID：15938526
> 
> 赞同：0
> 
> 时间：2013-04-10T23:52:15.193
> 
> 标签：arrays, vb.net

考虑下面的 VB 代码：

```
 Dim speed() As Integer = {0, 1, 2, 3, 4}
    Dim speed2() As Integer
    speed2 = speed

    For i = 0 To UBound(speed2)
        speed2(i) *= 2
    Next

    Dim str As String
    For i = 0 To UBound(speed)
        str &= speed(i)
    Next

    For i = 0 To UBound(speed2)
        str &= speed2(i)
    Next
 Console.WriteLine(str) 
```

对于此代码，答案应该是：12342468

但真正出现的是：24682468

有谁知道代码有什么问题或者为什么数组“速度”正在改变它的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:55:15.847

数组`speed`会更改其值，因为数组是引用类型。
像在行中一样将一个数组分配给另一个数组

```
 speed2 = speed 
```

使数组`speed2`引用保存 的值的相同内存位置`speed`。因此，当您执行计算时，分配会影响使用的相同内存位置`speed`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:58:32.737

这样做应该解决它

```
 Dim speed() As Integer = {0, 1, 2, 3, 4}
    Dim speed2() As Integer
    ReDim speed2(speed.GetUpperBound(0))
    Array.Copy(speed, 0, speed2, 0, speed.GetUpperBound(0) + 1) 
```

# asp.net-mvc-4 - 在 asp.net WebAPI 控制器中，这是获取 http 还是 https 的可靠/建议方法吗？

> ID：15938529
> 
> 赞同：0
> 
> 时间：2013-04-10T23:52:43.757
> 
> 标签：asp.net-mvc-4, asp.net-web-api

下面是我的索引控制器的示例。我想知道是否有更好、更可靠的方法来获取流量是否为 https。

```
 public ActionResult IndexTest1(string year)
    {
        var isSecure = 
           ControllerContext.RequestContext.HttpContext.Request.IsSecureConnection; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T04:27:11.150

您可以使用

```
var isSecure = Request.RequestUri.Scheme == Uri.UriSchemeHttps; 
```

在控制器操作方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:17:00.157

`Request.IsSecureConnection`是确定是否通过 HTTPS 发出请求的正确方法。

> **来自 MSDN：**
> 
> 获取一个值，该值指示 HTTP 连接是否使用安全套接字（即 HTTPS）。
> 
> [http://msdn.microsoft.com/en-us/library/system.web.httprequest.issecureconnection.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.issecureconnection.aspx)

**编辑：** IsSecureConnection 属性不能直接从 ApiController 的 Request 属性中获得。您需要访问 HttpContext 对象的实例并使用其 Request 属性。

~~如果您想从控制器操作中获取此值，则无需直接引用 HttpContext。您可以只使用： var isSecure = Request.IsSecureConnection; 其中 `Request` 是控制器 bar 类中的一个属性。~~

# scala - SBT 的 Proguard 插件不起作用？

> ID：15938531
> 
> 赞同：1
> 
> 时间：2013-04-10T23:52:49.237
> 
> 标签：scala, plugins, sbt, proguard

```
[info]  [SUCCESSFUL ] org.scala-sbt#xsbt-proguard-plugin;0.1.3!xsbt-proguard-plugin.jar (425ms)
[info] downloading http://repo1.maven.org/maven2/net/sf/proguard/proguard-base/4.8/proguard-base-4.8.jar ...
[info]  [SUCCESSFUL ] net.sf.proguard#proguard-base;4.8!proguard-base.jar (1346ms)
[info] Done updating. 
```

添加后我收到了这些消息

```
resolvers += Resolver.url("sbt-plugin-releases-scalasbt", url("http://repo.scala-sbt.org/scalasbt/sbt-plugin-releases/"))(Resolver.ivyStylePatterns)

addSbtPlugin("org.scala-sbt" % "xsbt-proguard-plugin" % "0.1.3") 
```

到我的`.sbt/plugins/build.sbt`文件，这让我觉得 proguard 和它的库安装得很好。但是尝试使用`proguard`或检查`min-jar-path`只会给我一个错误

```
[error] Not a valid command: proguard (similar: reload) 
```

或者

```
[error] Not a valid key: min-jar-path (similar: ivy-paths) 
```

我也试过把同样的东西放进去`(proj-directory)/project/build.sbt`，但仍然没有运气。还尝试以`~/.sbt/plugins/plugins.sbt`相同的结果放置它。如果我`about`在 SBT 提示下尝试，它会告诉我

```
[info] Available Plugins: ProguardPlugin 
```

然而我似乎根本无法运行它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:57:46.443

缺少“将插件注入所需项目”的步骤：[https ://github.com/adamw/xsbt-proguard-plugin#injecting-the-plugin-into-desired-project](https://github.com/adamw/xsbt-proguard-plugin#injecting-the-plugin-into-desired-project)

# rotation - matplotlib：直方图和 bin 标签

> ID：15938532
> 
> 赞同：10
> 
> 时间：2013-04-10T23:52:49.643
> 
> 标签：rotation, matplotlib, histogram, bar-chart, axis-labels

我正在尝试用条形图绘制直方图，但我很难弄清楚如何将 x 轴标签与实际的 bin 对齐。下面的代码生成以下图：![条形图](https://i.stack.imgur.com/1MF1e.png)

如您所见，每个 x-label 的末尾未与其 bin 的中心对齐。我正在考虑的方式是：当我应用 45 度旋转时，标签围绕其几何中心旋转。我想知道是否可以将枢轴移动到标签的顶部。（或者简单地将所有标签稍微向左平移。）

```
import matplotlib.pyplot as plt
import numpy as np

#data
np.random.seed(42)
data = np.random.rand(5)
names = ['A:GBC_1233','C:WERT_423','A:LYD_342','B:SFS_23','D:KDE_2342']

ax = plt.subplot(111)
width=0.3
bins = map(lambda x: x-width/2,range(1,len(data)+1))
ax.bar(bins,data,width=width)
ax.set_xticks(map(lambda x: x, range(1,len(data)+1)))
ax.set_xticklabels(names,rotation=45)

plt.show() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T02:49:10.800

利用：

```
ax.set_xticklabels(names,rotation=45, rotation_mode="anchor", ha="right") 
```

输出是：

![在此处输入图像描述](https://i.stack.imgur.com/ysJEZ.png)

# php - 父容器中子项的css动态宽度

> ID：15938535
> 
> 赞同：0
> 
> 时间：2013-04-10T23:52:58.010
> 
> 标签：php, css

在编写一组彼此相邻的 div 元素时，我遇到了一个问题。情况如下。

![在此处输入图像描述](https://i.stack.imgur.com/M3PKX.png)

正如您在示例图像中看到的那样，有大量的 div 彼此相邻堆叠（红色、绿色和橙色块）。它们位于具有固定宽度的容器内。每次页面重新加载时，都会有**不同**数量的彩色 div。我怎样才能将它们均匀地分布在容器中？（右边的空白区域......）我虽然使用php计算宽度百分比（即21.14％）并将其设置为元素。这似乎在 Firefox 中有效，但在 IE 或 safari/chrome 中无效。我想这与 IE 和 webkit*无法*分配 ie 21.5 px 的宽度有关？

可能吗？如何？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:56:02.727

尝试这个：

```
#parentdiv{
    display: table;
}
.childrendiv{//give children divs the same class
    display: table-cell;
    width: auto;
} 
```

[jsfiddle](http://jsfiddle.net/arcm111/VdRgn/)

# cocos2d-iphone - Cocos2D - 添加对标准化位置的支持

> ID：15938536
> 
> 赞同：0
> 
> 时间：2013-04-10T23:53:28.133
> 
> 标签：cocos2d-iphone, add-on

我希望 cocos2d 在坐标小于 1 时使用节点的位置作为归一化因子，否则当坐标大于 1 时，我希望 cocos2d 像平常一样对待坐标

例如，位置 (1,1) 会将节点定位在屏幕的右上角，而 (.5,.5) 会将节点定位在屏幕的中心。

我正在考虑重写 cocos2d 将坐标传递给顶点缓冲区的代码，如下面的伪代码

```
if (Position.x <= 1)
    BufferPosition.x = Screen.Width * Position.x;
else
    BufferPosition.x = Position.x;

if (Position.y <= 1)
    BufferPosition.y = Screen.Height * Position.y;
else
    BufferPosition.y = Position.y; 
```

所以我的问题是你会把这段代码放在哪里，这样cocos2d就可以毫无问题地工作，或者如果它与上面显示的不同，你会采取什么方法

**更新**

`positionInPixels_`我更改了整个 cocos2d 库中的每个调用/分配`positionInPixels`

这意味着每次调用对应的getter和setter，而不是CCNode的positionInPixels_成员变量。

然后我改变了，`setPosition`就像这样`setPositionInPixels``CCNode.m`

***设置位置***

```
-(void) setPosition: (CGPoint)newPosition
{
CGSize winSize = [[CCDirector sharedDirector] winSize];

position_ = newPosition;

if (position_.x <= 1.0) {
    positionInPixels_.x = position_.x * winSize.width;
}
else
{
    if( CC_CONTENT_SCALE_FACTOR() == 1 )
        positionInPixels_.x = position_.x;
    else
    positionInPixels_.x = newPosition.x * CC_CONTENT_SCALE_FACTOR();
}

if (position_.y <= 1.0) {
    positionInPixels_.y = position_.y * winSize.height;
}
else
{
    if( CC_CONTENT_SCALE_FACTOR() == 1 )
    positionInPixels_.y = position_.y;
    else
    positionInPixels_.y = newPosition.y * CC_CONTENT_SCALE_FACTOR();
}

isTransformDirty_ = isInverseDirty_ = YES;
#if CC_NODE_TRANSFORM_USING_AFFINE_MATRIX
isTransformGLDirty_ = YES;
#endif
} 
```

***setPositionInPixels***

```
-(void) setPositionInPixels:(CGPoint)newPosition
{
CGSize winSize = [[CCDirector sharedDirector] winSize];

positionInPixels_ = newPosition;

if (position_.x <= 1.0) {
    position_.x = positionInPixels_.x / winSize.width;
}
else
{
    if( CC_CONTENT_SCALE_FACTOR() == 1 )
    position_.x = positionInPixels_.x;
    else
    position_.x = newPosition.x * 1/CC_CONTENT_SCALE_FACTOR() / winSize.width;
}

if (position_.y <= 1.0) {
    position_.y = positionInPixels_.y / winSize.height;
}
else
{
    if( CC_CONTENT_SCALE_FACTOR() == 1 )
    position_.y = positionInPixels_.y;
    else
    position_.y = newPosition.y * 1/CC_CONTENT_SCALE_FACTOR() / winSize.height;
}

isTransformDirty_ = isInverseDirty_ = YES;
#if CC_NODE_TRANSFORM_USING_AFFINE_MATRIX
isTransformGLDirty_ = YES;
#endif
} 
```

到目前为止，即使使用带有 CCActionInterval 的归一化坐标也是如此

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:49:50.833

所以你真的认为这个变种是正确的吗？改变整个框架而不是仅仅向 CCNode 的扩展添加一种方法？我想你很快就会看到很多定位问题。

也不好，（1.f，1.f）总是有坐标（screenWidth，screenHeight）。小节点会有很多麻烦。恕我直言，如果您需要这样的定位，将这个“因素”坐标连接到节点的父大小更合适。只需恢复 cocos2d 框架并将您自己的扩展添加到您的项目中。例如，

```
@interface CCNode(FactorPositioning)
- (void) setPositionFactor:(CGFloat) factor;
@end

@implementation CCNode(FactorPositioning)
- (void) setPositionFactor:(CGFloat) factor
{
    assert(self.parent != nil);

    // do your calculations relatieve to the parent's content size
}
@end 
```

# java - 如何让 JUnit 测试等待？

> ID：15938538
> 
> 赞同：120
> 
> 时间：2013-04-10T23:53:30.070
> 
> 标签：java, junit, thread-safety

我有一个 JUnit 测试，我想同步等待一段时间。我的 JUnit 测试如下所示：

```
@Test
public void testExipres(){
    SomeCacheObject sco = new SomeCacheObject();
    sco.putWithExipration("foo", 1000);
    // WAIT FOR 2 SECONDS
    assertNull(sco.getIfNotExipred("foo"));
} 
```

我试过`Thread.currentThread().wait()`了，但它抛出了一个**IllegalMonitorStateException**（如预期的那样）。

有什么技巧还是我需要不同的显示器？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-04-10T23:54:17.403

怎么样`Thread.sleep(2000);`？:)

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2015-05-27T02:07:44.617

Thread.sleep() 在大多数情况下都可以工作，但通常如果您在等待，您实际上是在等待特定条件或状态发生。Thread.sleep() 不能保证您等待的任何事情都已实际发生。

例如，如果您正在等待休息请求，它通常会在 5 秒内返回，但如果您将睡眠时间设置为 5 秒，那么您的请求会在 10 秒后返回，您的测试将失败。

为了解决这个问题，JayWay 有一个名为[Awatility](https://github.com/jayway/awaitility)的强大实用程序，它非常适合确保在您继续前进之前发生特定情况。

它也有一个很好的流利的 api

```
await().until(() -> 
{
    return yourConditionIsMet();
}); 
```

[https://github.com/jayway/awaitility](https://github.com/jayway/awaitility)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2019-06-05T21:55:09.987

您可以使用内部使用 Thread.sleep 的 java.util.concurrent.TimeUnit 库。语法应如下所示：

```
@Test
public void testExipres(){
    SomeCacheObject sco = new SomeCacheObject();
    sco.putWithExipration("foo", 1000);

    TimeUnit.MINUTES.sleep(2);

    assertNull(sco.getIfNotExipred("foo"));
} 
```

这个库为时间单位提供了更清晰的解释。您可以使用“小时”/“分钟”/“秒”。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2018-08-02T10:01:17.573

如果您的静态代码分析器（如 SonarQube）抱怨，但您想不出其他方法，而不是睡眠，您可以尝试使用类似的 hack： `Awaitility.await().pollDelay(Durations.ONE_SECOND).until(() -> true);` 它在概念上是不正确的，但它与`Thread.sleep(1000)`.

当然，最好的方法是在您的适当条件下传递一个 Callable，而不是`true`我拥有的 .

[https://github.com/awaitility/awaitility](https://github.com/awaitility/awaitility)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2020-11-02T12:16:13.737

如果绝对必须在测试中产生延迟`CountDownLatch`是一个简单的解决方案。在您的测试类中声明：

```
private final CountDownLatch waiter = new CountDownLatch(1); 
```

并在需要的测试中：

```
waiter.await(1000 * 1000, TimeUnit.NANOSECONDS); // 1ms 
```

也许没必要说，但请记住，您应该保持较小的等待时间，而不是累积等待太多地方。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-02-02T21:12:45.157

您也可以使用[此处](https://stackoverflow.com/questions/19025366/wait-until-boolean-value-changes-it-state)`CountDownLatch`解释的对象。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-07-02T13:37:20.383

有一个普遍的问题：很难模拟时间。此外，将长时间运行/等待的代码放在单元测试中是非常糟糕的做法。

因此，为了使调度 API 可测试，我使用了一个具有真实和模拟实现的接口，如下所示：

```
public interface Clock {

    public long getCurrentMillis();

    public void sleep(long millis) throws InterruptedException;

}

public static class SystemClock implements Clock {

    @Override
    public long getCurrentMillis() {
        return System.currentTimeMillis();
    }

    @Override
    public void sleep(long millis) throws InterruptedException {
        Thread.sleep(millis);
    }

}

public static class MockClock implements Clock {

    private final AtomicLong currentTime = new AtomicLong(0);

    public MockClock() {
        this(System.currentTimeMillis());
    }

    public MockClock(long currentTime) {
        this.currentTime.set(currentTime);
    }

    @Override
    public long getCurrentMillis() {
        return currentTime.addAndGet(5);
    }

    @Override
    public void sleep(long millis) {
        currentTime.addAndGet(millis);
    }

} 
```

有了这个，你可以在你的测试中模仿时间：

```
@Test
public void testExpiration() {
    MockClock clock = new MockClock();
    SomeCacheObject sco = new SomeCacheObject();
    sco.putWithExpiration("foo", 1000);
    clock.sleep(2000) // wait for 2 seconds
    assertNull(sco.getIfNotExpired("foo"));
} 
```

当然，高级多线程模拟`Clock`要复杂得多，但是您可以使用`ThreadLocal`引用和良好的时间同步策略来实现它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-15T21:44:36.520

[**Mockito**](https://site.mockito.org/)（已经通过 Spring Boot 项目的传递依赖项提供）有几种方法来等待异步事件，分别是条件发生。

目前对我们非常有效的一个简单模式是：

```
// ARRANGE – instantiate Mocks, setup test conditions

// ACT – the action to test, followed by:
Mockito.verify(myMockOrSpy, timeout(5000).atLeastOnce()).delayedStuff();
// further execution paused until `delayedStuff()` is called – or fails after timeout

// ASSERT – assertThat(...) 
```

[@fernando-cejas在](https://stackoverflow.com/users/760596/fernando-cejas)[这篇文章](https://web.archive.org/web/20211024124855/https://fernandocejas.com/blog/engineering/2014-04-08-unit-testing-asynchronous-methods-with-mockito/)中描述了两个稍微复杂但更复杂的

* * *

我对此处给出的当前最佳答案的紧急建议：您希望您的测试

1.  尽快完成
2.  具有一致的结果，独立于测试环境（非“片状”）

...所以不要愚蠢`Thread.sleep()`地在测试代码中使用。

相反，让您的生产代码使用依赖注入（或者，有点“脏”，公开一些可模拟/可监视的方法），然后使用 Mockito、[Awaitly](https://stackoverflow.com/questions/15938538#30471990)、[ConcurrentUnit](https://github.com/jhalterman/concurrentunit)或其他方法来确保在断言发生之前满足异步先决条件。

# iphone - 子类化 UIImageView 的子类 - 前向声明错误

> ID：15938539
> 
> 赞同：1
> 
> 时间：2013-04-10T23:53:30.150
> 
> 标签：iphone, ios, objective-c, subclassing

我已经阅读了一个又一个关于人们遇到与我相同的错误的问题，但我根本不理解他们，所以在你搜索重复的问题之前，也许有人可以向我解释我在这个子类交易中做错了什么。

我有一个名为 UIImageView 的子类`swapView`，我想对其进行子类化以覆盖`-(void)count`特殊情况下的方法。因为我有任何预先存在的 UIKit 类，所以我对其进行了子类化，但是当我尝试构建和运行该项目时，我收到了这个错误：

```
Attempting to use the forward class 'swapView' as superclass of 'coinView' 
```

**我已经尝试**将 和 的`#import`语句都放入`swapView`并且我尝试将 import 语句放入，但由于此持续错误，它拒绝构建。如果我将 import 语句移动到 .m 文件中，所有对超类方法和属性的引用，例如也会导致错误。`@class swapView``coinView.h``coinView.m``@property (nonatomic) int max;`

我究竟做错了什么？

**交换视图.h**

```
#import <UIKit/UIKit.h>

#import "ViewController.h"

@class ViewController;

@interface swapView : UIImageView
{
    NSTimer* tmr;
}

@property (nonatomic) int current;
@property (nonatomic) int max;
@property (nonatomic, retain) UIImage* firstImage;
@property (nonatomic, retain) UIImage* secondImage;
@property (nonatomic) BOOL smallMax;

@property (nonatomic, retain) ViewController* pvc;

- (BOOL)testCollision:(CGPoint)point;
- (float)randomFloatBetween:(float)smallNumber bigNumber:(float)bigNumber;

@end 
```

**coinView.h**

```
#import "swapView.h"

@class swapView;

@interface coinView : swapView

- (void)count;
- (void)move;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:41:37.193

对于继承，必须继承超类。

**coinView.h**

```
#import "swapView.h"
@interface coinView : swapView
  - (void)count;
  - (void)move;
@end 
```

您在您的 中都向前声明和导入`ViewController.h`，`swapView`这可能会导致编译器抱怨。

**交换视图.h**

```
#import <UIKit/UIKit.h>

@class ViewController

@interface swapView : UIImageView
.
.
.
@end 
```

# python - PyParsing 非贪婪匹配

> ID：15938540
> 
> 赞同：5
> 
> 时间：2013-04-10T23:53:45.277
> 
> 标签：python, pyparsing

我正在尝试使用`pyparsing`. 我想非贪婪地匹配一个可能有 N 个标记长的街道名称。

例如：

```
444 PARK GARDEN LN 
```

应该解析成：

```
number: 444
street: PARK GARDEN
suffix: LN 
```

我将如何使用 PyParsing 做到这一点？这是我的初始代码：

```
from pyparsing import *

def main():
    street_number = Word(nums).setResultsName('street_number')
    street_suffix = oneOf("ST RD DR LN AVE WAY").setResultsName('street_suffix')
    street_name = OneOrMore(Word(alphas)).setResultsName('street_name')

    address = street_number + street_name + street_suffix
    result = address.parseString("444 PARK GARDEN LN")
    print result.dump()

if __name__ == '__main__':
    main() 
```

但是当我尝试解析它时，街道后缀会被默认的贪婪解析行为吞噬。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T13:50:51.040

使用否定 ,`~`来检查即将到来`street_name`的是否真的是`street_suffix`.

```
from pyparsing import *

street_number = Word(nums)('street_number')
street_suffix = oneOf("ST RD DR LN AVE WAY")('street_suffix')
street_name = OneOrMore(~street_suffix + Word(alphas))('street_name')

address = street_number + street_name + street_suffix
result = address.parseString("444 PARK GARDEN LN")
print result.dump() 
```

此外，您不必*使用*，`setResultsName`您可以简单地使用上面的语法。恕我直言，它导致更清晰的语法定义。

# php - PHP 刷新按钮 onclick

> ID：15938543
> 
> 赞同：0
> 
> 时间：2013-04-10T23:54:06.470
> 
> 标签：php, html, sql, button, onclick

我有这个 while 循环来回显 SQL 数据库中的条目。我有一个“添加到购物车”按钮，它应该从列表中删除条目并将其添加到其他地方。这部分有效，但是一旦我单击“添加到购物车”按钮，该条目不会立即删除，我必须手动刷新页面或访问另一个页面并返回才能看到该项目已被删除。我尝试在按钮的 onclick 属性上使用以下（以及一些类似的）行，但它不起作用。

```
echo "<br /><center><input type='submit' name='submitAdd' value='Add to Cart' onclick='window.location.reload();'></center>"; 
```

任何建议表示赞赏。

谢谢你。

编辑：这是我用来生成表的 while 循环。它在一个标签内，该标签位于 .

```
while ($row = mysql_fetch_array($song_query)) {
    foreach ($_SESSION['selected_items'] as $key => $value) {
        if ($value == $row['Item_ID']) {
            $rowID = $row['Item_ID'];
            echo "<tr style='background-color: #66FFFF;'>";
            echo "<td><input type='checkbox' name='removeFromCart[]' value='$rowID'></td>";
            echo "<td>" . $row['Item_ID'] . "</td>";
            echo "<td>" . $row['Name'] . "</td>";
            echo "<td>" . $row['Artist'] . "</td>";
            echo "<td>" . $row['Album'] . "</td>";
            echo "<td>" . $row['Time'] . "</td>";
            echo "<td>" . $row['Year'] . "</td>";
            echo "<td>" . $row['Bit_Rate'] . "</td>";
            echo "<td>" . $row['Sample_Rate'] . "</td>";                
            echo "</tr>";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T00:09:27.017

PHP 是一种服务器端语言，因此在将结果显示给用户之前，任何“操作”都将在服务器上执行。为了在页面加载到用户浏览器后对其进行修改，您必须使用客户端语言，例如 JavaScript。如果您想在不重新加载页面的情况下显示购物车的更新，那么使用 AJAX 请求是您的最佳选择。查看[http://www.w3schools.com/ajax/](http://www.w3schools.com/ajax/)上的教程，如果您对如何实施有任何疑问，请告诉我 :)

**更新：强制重新加载**
如果您只想按原样重新加载页面，请尝试`onclick='window.location.reload(true);'`使用`onclick='window.location.reload();'`. 该`true`参数强制向服务器发出 get 请求。[http://www.w3schools.com/jsref/met_loc_reload.asp](http://www.w3schools.com/jsref/met_loc_reload.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-23T15:13:56.890

我使用引用同一页面的链接

```
<a href="<?php $_SERVER['PHP_SELF']; ?>">Recargar</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:04:25.423

如果您要寻找的唯一功能是在单击按钮时重新加载页面，我通常这样做的方式是 onclick="history.go(0)"

但是，如果表单按钮是提交表单并且已经重新加载页面，那么我不明白为什么你不能在你的其他代码之后放置 while 循环，

检查表格（）{更新SQL数据库}

WHILE () { 输出数据库数据 }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-15T16:12:39.023

不是一个按钮，而是一个简单的链接，但可能对某些人仍然有用：

```
<?php 
$page = $_SERVER['PHP_SELF'];
print "<a href=\"$page\">Reload this page</a>";
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-08T11:08:14.210

使用 header() 函数在 PHP 中刷新网页。PHP header() 函数以原始形式向客户端或浏览器发送 HTTP 标头。

在 HTML、XML、JSON 或其他输出被发送到浏览器或客户端之前，原始数据与服务器发出的请求（尤其是 HTTP 请求）一起作为标头信息发送。

语法：header（“页眉：页面的url”）

我希望这可以使您走上正确的道路。

# python - 抽象 Python

> ID：15938553
> 
> 赞同：-1
> 
> 时间：2013-04-10T23:54:36.467
> 
> 标签：python

我需要一个抽象类来维护成绩，并且应该有一个`get_grade()`返回 4.0 比例值的操作，并且必须是抽象的。这是我到目前为止所拥有的：

```
from abc import ABCMeta, abstractmethod

class Assessment:

    __metaclass__ = ABCMeta

    @abstractmethod
    def get_grade(self)
        return 
```

我在这做错了什么以及如何返回 4.0 比例的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:06:55.293

通常问“我做错了什么”而不解释是什么让你认为这是错误的，这通常不是很有帮助。

但是，您的代码存在两个问题。

首先，你会`SyntaxError`在这条线上得到一个：

```
def get_grade(self) 
```

`def`语句，就像所有引入块的语句一样，需要一个冒号，而你没有。

接下来，当您修复它时，您的代码将编译，但如果您使用的是 3.x，它将无法正常工作。目前尚不清楚您使用的是 Python 2.x 还是 3.x，但如果是 3.x，则您没有指定元类，您只是创建了一个名为的类变量`__metaclass__`，它什么都不做。（另外，如果你使用的是 2.x，你的类被定义为一个经典类，但是当它的主体被元类求值时，它变成了一个新式类，这可能会造成混淆。）

因此，您的代码的正确 2.x 版本是：

```
class Assessment(object):
    __metaclass__ = ABCMeta
    @abstractmethod
    def get_grade(self):
        return 
```

正确的 3.x 版本是：

```
class Assessment(metaclass=ABCMeta):
    @abstractmethod
    def get_grade(self):
        return 
```

一旦你解决了这个问题，你的代码就可以工作了。它创建一个带有抽象方法的抽象类，您可以轻松地对其进行测试：

```
>>> a = Assessment()
TypeError: Can't instantiate abstract class Assessment with abstract methods get_grade
>>> class Concrete(Assessment): pass
>>> b = Concrete()
TypeError: Can't instantiate abstract class B with abstract methods get_grade
>>> class Concrete2(Assessment):
...     def get_grade(self): pass
>>> c = Concrete2()
>>> class External(object):
...     def get_grade(self): pass
>>> Assessment.register(External)
>>> d = External() 
```

当然，这只是你任务的开始。您显然需要创建至少一个具体的子类`Assessment`（或您调用的类`Assessment.register`），它在`get_grade`.

* * *

这是一个“返回 4.0 比例值”的示例子类。我不知道这是否像你应该为你的作业做的那样，因为你给我们的只是那句话，但是……</p>

```
class PopQuiz(Assessment):
    def __init__(self, score_out_of_100):
        self.score_out_of_100 = score_out_of_100
    def get_grade(self):
        score_out_of_4_0 = self.score_out_of_100 / 25.0
        return score_out_of_4_0 
```

# php - 当 CakePHP 表单中的字段是 hasMany 关联的一部分时，如何“解锁”该字段

> ID：15938555
> 
> 赞同：3
> 
> 时间：2013-04-10T23:54:45.250
> 
> 标签：php, forms, cakephp, cakephp-2.0, has-many

我有一个代表`RewardModifier`我们数据库中的表的表单。那个`RewardModifier` `hasMany` `RewardOption`。

我的表格结构如下（图片）：

![在此处输入图像描述](https://i.stack.imgur.com/u3zDk.png)

因此，`RewardModifier`页面上可以有很多元素，每个元素都有很多`RewardOption`项。

**问题**

问题是，用户可以使用 Javascript 删除此表单的部分，这实际上将其从 DOM 中删除。当他们这样做时，它会破坏安全组件，因为 POST 的字段与生成页面时提供的令牌不匹配。

现在，我以前一直`unlockedFields`在处理这个问题：

```
$this->Security->disabledFields = array(
   'PrjRewardModifier.reward_id',
   'PrjRewardModifier.title',
   'PrjRewardModifier.option_type',
   'PrjRewardOption.description',
   'PrjRewardOption.modifier',
   'PrjRewardOption.amount'
); 
```

我知道它`disabledFields`已被弃用，但我们暂时使用它。

当我在 中调试发布的表单数据时`SecurityComponent`，我看到以下内容：

```
(int) 8 => 'PrjRewardModifier.0.reward_id',
(int) 9 => 'PrjRewardModifier.0.title',
(int) 10 => 'PrjRewardModifier.0.option_type',
(int) 11 => 'PrjRewardModifier.0.PrjRewardOption.0.description',
(int) 12 => 'PrjRewardModifier.0.PrjRewardOption.0.modifier',
(int) 13 => 'PrjRewardModifier.0.PrjRewardOption.0.amount' 
```

我需要知道如何编辑传递给的数据，`unlockedFields`以便它可以忽略这些为 hasMany 关系键入的字段。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T10:25:21.383

我有一个类似的问题。我发现将这个（相当于）添加到 RewardModifier 控制器可以解决问题：

```
public function beforeFilter(){
     $this->Security->unlockedFields = array('RewardOption');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-30T19:23:52.993

将以下内容添加到表单代码中对我有用

```
$this->Form->unlockField('User.id'); 
```

从视图文件中解锁字段也有助于整理控制器的`beforeFilter()`.

来源： /core-libraries/helpers/form.html#FormHelper:: [unlockField](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper::unlockField)

# php - PHP - 将 spl_autoload_register 与子文件夹一起使用

> ID：15938557
> 
> 赞同：1
> 
> 时间：2013-04-10T23:55:09.347
> 
> 标签：php, spl-autoload-register

所以我使用 spl_autoload_register 来加载我的类。但是我的课程有这个结构：

```
classes
    classfolder
       classfile 
```

所以通常当我包括他们时，我是这样做的：

```
include('classes/modules/module_class.php'); 
```

现在使用 spl_autoload_register 我将如何处理子文件夹？我没有能力升级到 php 5.3 来使用命名空间，我需要做这样的事情吗？

```
$module = new modules_Module(); 
```

然后我用 spl_autoload_register 注册的函数将 _ 炸开，第一部分作为类文件夹，第二部分作为类方法。但是我必须将类名更改为 modules_Module 对吗？如果是这样可以吗？或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:13:21.977

并不是说你应该这样做，但 PHP 领域的一个常见模式是在文件名中也使用 case，而不是添加诸如`_class`or之类的东西`class.Module.php`：

```
include('classes/Modules/Module.php'); 
```

在 PHP 5.2（不`namespace`支持）中，您可以使用`_`下划线：

```
class Modules_Module
{
} 
```

所以这就是通常的做法。*并不是*说你必须那样做。你也可以随心所欲地解决。但人们也应该了解这种更常见的模式，因为它有助于阅读/导航第三方源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:59:36.593

基本上就是这样。

除了命名空间（你不能使用）和类名的命名约定（这需要你重命名所有的类）之外，唯一的另一个明智的选择是构建一个类映射：一个将类名映射到完整路径的数组定义它们的文件。

采用这种方式意味着您必须在每次添加或修改类时更新类映射，这是自动化的主要候选任务。研究使用 Composer 的[自动加载功能](http://getcomposer.org/doc/04-schema.md#classmap)，它可以按需执行此操作并自动为您生成自动加载代码。Composer 非常好，即使您无视其 90% 的功能，它也很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:23:46.780

只要你的文件以某种方式排列，让你从类名到文件名，你就可以实现你的自动加载器功能，但是你喜欢。您的自动加载函数不需要将类名转换为目录路径：它的工作只是获取类名和`include`正确的文件，如果可能的话。

不过，保持映射相对简单对人类也很有用 - 这样您就知道要编辑哪个文件。

例如，您可以说所有开始的类都`Mod_`存在于一个名为的目录`classes/modules`中，但所有其他类都存在于一个名为`classes/general`.

您也可以使用`file_exists`来检查一个类的多种可能性，但请记住，这对于 PHP 检查文件系统和试图记住文件去向的人来说都是有代价的。

# java - 在堆栈计算器中计算负数

> ID：15938560
> 
> 赞同：2
> 
> 时间：2013-04-10T23:55:31.347
> 
> 标签：java, stack, calculator, negative-number, postfix-notation

忍受我，我现在因为把这一切放在一起有点焦躁，但我正处于最后阶段。我在java中制作了一个计算器，它采用中缀方程，然后将其更改为后缀。它也需要变量！我做到了，所以我的后缀包含中缀的负数。这看起来像这样：

```
infix: 1+-2*(4/2)
postfix: 12_42/*+ 
```

所以很明显我让它`'_'`在后缀中的底片工作。酷是吗？好的，但是现在我得让我的计算器来读取它们，我只是在思考它在堆栈中的位置以及我如何使它工作而不为所有形式的操作数设置条件。这是我所拥有的：

```
import java.util.Stack;

/**
 *
 * @author rtibbetts268
 */
public class InfixToPostfix
{
        /**
         * Operators in reverse order of precedence.
         */
    private static final String operators = "-+/*_";
    private static final String operands = "0123456789x";

    /*public int evalInfix(String infix)
    {
        return evaluatePostfix(convert2Postfix(infix));
    }*/

    public String xToValue(String postfixExpr, String x)
    {
        char[] chars = postfixExpr.toCharArray();
        StringBuilder newPostfixExpr = new StringBuilder();

        for (char c : chars)
        {
            if (c == 'x')
            {
                newPostfixExpr.append(x);
            }
            else
            {
                newPostfixExpr.append(c);
            }
        }
        return newPostfixExpr.toString();
    }

    public String convert2Postfix(String infixExpr)
    {
        char[] chars = infixExpr.toCharArray();
        StringBuilder in = new StringBuilder(infixExpr.length());

        for (int i = 0; i<chars.length; i++)
        {
            if (infixExpr.charAt(i) == '-')
            {
                if (i == 0)
                {
                in.append('_');
                }
                else if(isOperand(infixExpr.charAt(i + 1)))
                {
                    if (i != infixExpr.length())
                    {
                    if (isOperator(infixExpr.charAt(i-1)))
                        in.append('_');
                    }
                    else
                    {
                        in.append(infixExpr.charAt(i));
                    }
                }
                else
                {
                   in.append(infixExpr.charAt(i));
                }
            }
            else
            {
                in.append(infixExpr.charAt(i));
            }
        }

        chars = in.toString().toCharArray();
        Stack<Character> stack = new Stack<Character>();
        StringBuilder out = new StringBuilder(in.toString().length());

        for (char c : chars)
        {
            if (isOperator(c))
            {
                while (!stack.isEmpty() && stack.peek() != '(')
                {
                    if (operatorGreaterOrEqual(stack.peek(), c))
                    {
                        out.append(stack.pop());
                    }
                    else
                    {
                        break;
                    }
                }
                stack.push(c);
            }
            else if (c == '(')
            {
                stack.push(c);
            }
            else if (c == ')')
            {
                while (!stack.isEmpty() && stack.peek() != '(')
                {
                    out.append(stack.pop());
                }
                if (!stack.isEmpty())
                {
                    stack.pop();
                }
            }
            else if (isOperand(c))
            {
                out.append(c);
            }
        }
        while (!stack.empty())
        {
            out.append(stack.pop());
        }
        return out.toString();
    }

    public int evaluatePostfix(String postfixExpr)//YBEYFCNUNKJKDV IT'S RIGHT HERE!!!
    {
        char[] chars = postfixExpr.toCharArray();
        Stack<Integer> stack = new Stack<Integer>();
        for (char c : chars)
        {
            if (isOperand(c))
            {
                stack.push(c - '0'); // convert char to int val
            }
            else if (isOperator(c))
            {
                int op1 = stack.pop();
                int op2 = stack.pop();
                int result;
                switch (c) {
                    case '_':
                        result = op1 * -1;
                        //stack.push(result);
                        //break;
                    case '*':
                        result = op1 * op2;
                        stack.push(result);
                        break;
                    case '/':
                        result = op2 / op1;
                        stack.push(result);
                        break;
                    case '+':
                        result = op1 + op2;
                        stack.push(result);
                        break;
                    case '-':
                        result = op2 - op1;
                        stack.push(result);
                        break;
                }
            }
        }
        return stack.pop();
    }

    private int getPrecedence(char operator)
    {
        int ret = 0;
        if (operator == '-' || operator == '+')
        {
            ret = 1;
        }
        else if (operator == '*' || operator == '/')
        {
            ret = 2;
        }
        if (operator == '_')
        {
            ret = 3;
        }
        return ret;
    }

    private boolean operatorGreaterOrEqual(char op1, char op2)
    {
        return getPrecedence(op1) >= getPrecedence(op2);
    }

    private boolean isOperator(char val)
    {
        return operators.indexOf(val) >= 0;
    }

    private boolean isOperand(char val)
    {
        return operands.indexOf(val) >= 0;
    }

} 
```

我会少发帖，但是这一切都趋于一致，所以我会解释一下。仔细查看调用的方法`evaluatePostfix()`（从上数第三个）。

这是该类可以采用后缀表达式（例如我上面提到的那个）并计算它的地方。它计算一个包含所有正整数的表达式，但是当我尝试实现它以在它实际运行任何数学之前将一个数字更改为负数时，它会卡普特。

任何人都可以帮助我修复这个特定的方法，使其有效吗？我需要它来计算负整数以及正整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:24:25.470

基本上问题在于尝试从“_”案例的空堆栈中弹出。您需要做的只是尝试从堆栈中弹出 op2 以用于 '*/+-' 情况，而不是 '_' 情况。

```
public int evaluatePostfix(String postfixExpr)
{
    char[] chars = postfixExpr.toCharArray();
    Stack<Integer> stack = new Stack<Integer>();
    for (char c : chars)
    {
        if (isOperand(c))
        {
            stack.push(c - '0'); // convert char to int val
        }
        else if (isOperator(c))
        {
            int op1 = stack.pop();
            int op2;
            int result;
            switch (c) {
                case '_':
                    result = op1 * -1;
                    stack.push(result);
                    break;
                case '*':
                    op2 = stack.pop();
                    result = op1 * op2;
                    stack.push(result);
                    break;
                case '/':
                    op2 = stack.pop();
                    result = op2 / op1;
                    stack.push(result);
                    break;
                case '+':
                    op2 = stack.pop();
                    result = op1 + op2;
                    stack.push(result);
                    break;
                case '-':
                    op2 = stack.pop();
                    result = op2 - op1;
                    stack.push(result);
                    break;
            }
        }
    }
    return stack.pop();
} 
```

# mysql - Mysql将A表的记录插入B表。如果B表的列小于

> ID：15938563
> 
> 赞同：-2
> 
> 时间：2013-04-10T23:55:37.343
> 
> 标签：mysql, sql, join, relational-database

```
**Employee**

PK empId
firstName
lastName
isRegularEmp

**Employee_Training**

PK FK empId
PK FK trainingId
logId

**Training**

PK TrainingId
date
specialEmployeesNeeded
regularEmployeesNeeded
FK roomId 
```

我正在尝试在特定日期之前将所有员工插入到 employee_training 表中。它的工作原理是我有一个不超过 SpecialEmployees/Regular Employees 字段值的所需金额。

例如，我在员工表中有 200 名正式员工和 100 名正式员工，但我只需要按照培训表中的规定插入 35 名特殊员工和 5 名正式员工。

我尝试了 HAVING，但它不断抛出错误未知列。请帮忙，我尝试插入一种类型的员工，但它仍然不起作用

```
INSERT INTO EMPLOYEE_TRAINING(empId, trainingId)

SELECT E.empId , T.TrainingId

FROM EMPLOYEE E, TRAINING T

WHERE T.`date` = "2013-4-20" 

AND E.isRegularEmp = false

HAVING COUNT(E.empId) <= regularEmployeesNeeded 
```

我无法发布我的 erd，因为我没有足够的积分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:41:48.053

`regularEmployees`不是任何表中的列，也不是在查询中的任何位置定义的。尝试

```
INSERT INTO EMPLOYEE_TRAINING(empId, trainingId)

SELECT E.empId , T.TrainingId

FROM EMPLOYEE E, TRAINING T

WHERE T.`date` = "2013-4-20"

AND E.isRegularEmp = false

HAVING COUNT(E.empId) <= (select count(*) from EMPLOYEE where isRegularEmp=true ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:08:54.453

你的`isRegularEmp`条件的位置不正确。它应该放在`WHERE`从句中。

```
INSERT INTO EMPLOYEE_TRAINING(empId, trainingId)

SELECT E.empId , T.TrainingId

FROM EMPLOYEE E, TRAINING T

WHERE T.`date` = "2013-4-20"

AND E.isRegularEmp = false

HAVING COUNT(E.empId) <= regularEmployees 
```

* * *

**编辑：**正如迈克尔本杰明的回答所指出的，`regularEmployees`不是未定义的字段。你需要正式员工的`SELECT`。`COUNT`

```
INSERT INTO EMPLOYEE_TRAINING(empId, trainingId)

SELECT E.empId , T.TrainingId

FROM EMPLOYEE E, TRAINING T

WHERE T.`date` = "2013-4-20"

AND E.isRegularEmp = false

HAVING COUNT(E.empId) <= (SELECT COUNT(*) FROM EMPLOYEE WHERE isRegularEmp = true) 
```

# javascript - JavaScript 使用正则表达式验证电话号码

> ID：15938564
> 
> 赞同：3
> 
> 时间：2013-04-10T23:55:42.690
> 
> 标签：javascript, regex, validation

问候溢出者，

我正在尝试编写一个正则表达式来验证格式为##########（10 位数字）的电话号码，即这些是有效的情况：1231231234 或 1111111111。无效的情况是字符串少于 10 位或多于 10 位的数字。

到目前为止我的表达式是这样的：“\d{10}”

不幸的是，它不能正确验证字符串是否超过 11 位。

有谁知道完成这项任务的表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T23:58:43.530

你需要使用[ancors](http://www.regular-expressions.info/anchors.html)，即

```
/^\d{10}$/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T23:58:32.057

你也需要锚定开始和结束

```
/^\d{10}$/ 
```

这匹配 10 位数字，仅此而已。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-01T18:33:55.940

此表达式适用于谷歌表格 10 位电话号码，如下所示：

> (123) 123 1234 或 123-123-1234 或 123123124

```
(\W|^)[(]{0,1}\d{3}[)]{0,1}[\s-]{0,1}\d{3}[\s-]{0,1}\d{4}(\W|$) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T23:59:44.503

我包括使用破折号（xxx-xxx-xxxx）*的选项*以获得更好的用户体验（假设这是您的网站）：

```
var regex = /^\d{3}-?\d{3}-?\d{4}$/g
window.alert(regex.test('1234567890')); 
```

[http://jsfiddle.net/bh4ux/279/](http://jsfiddle.net/bh4ux/279/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-23T18:37:09.137

我通常使用

```
phone_number.match(/^[\(\)\s\-\+\d]{10,17}$/) 
```

为了能够接受 12345678、1234-5678、+12 345-678-93 或 (61) 8383-3939 格式的电话号码，世界各地的人们输入电话号码并没有真正的约定。因此，如果您不必验证每个国家/地区的电话号码，这应该主要工作。17 的限制是为了阻止人们输入两个许多无用的连字符和字符。

除此之外，您可以删除所有空格、连字符和加号并计算字符以确保它是 10 或更多。

```
var pureNumber = phone_number.replace(/\D/g, ""); 
```

一个完整的解决方案是两者的结合

```
var pureNumber = phone_number.replace(/\D/g, "");
var isValid = pureNumber.length >= 10 && phone_number.match(/^[\(\)\s\-\+\d]{10,17}$/)  ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-20T05:23:41.987

或者这个（这将从字符串中删除非数字字符）

```
var phoneNumber = "(07) 1234-5678";
phoneNumber = phoneNumber.replace(/\D/g,'');
if (phoneNumber.length == 10) {
    alert(phoneNumber + ' contains 10 digits');
    }
else {
    alert(phoneNumber + ' does not contain 10 digits');
    } 
```

# objective-c - Objective C - 格式化整数，中间有字符

> ID：15938565
> 
> 赞同：-4
> 
> 时间：2013-04-10T23:55:53.773
> 
> 标签：objective-c, string, formatting

例如，如何将数字 123 转换为： "00\00\00\12\3" ？stringwithformat 可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:39:29.293

我发现这个较早的答案更难阅读，所以这里有一个比其他人建议的更简单的版本：

```
NSString *stringByAddingSlashesToNumber(int num) {
    NSMutableString *str = [NSMutableString stringWithFormat:@"%09i", num];

    // we start at index 2 to skip the first pair, and increment by 3
    // because we need to skip the two digits and the added backslash
    for (NSUInteger idx = 2; idx < str.length; idx += 3) {
        [str insertString:@"\\" atIndex:idx];
    }

    return [str copy];
} 
```

希望逻辑更容易遵循，并且符合您的期望。

# c++ - Box2D 在没有 b2ContactListener 的情况下获得碰撞脉冲

> ID：15938566
> 
> 赞同：0
> 
> 时间：2013-04-10T23:55:59.407
> 
> 标签：c++, box2d

Box2D 中是否有任何方法可以在不注册联系人侦听器的情况下获得碰撞的冲动？

`GetContactList()`即，我可以使用and获得一个身体的所有联系人的列表`contact->GetManifold()->localNorm`，但这会返回一个单位向量。

我似乎找不到任何从`b2Contact`课堂上获取冲动信息的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:44:44.303

不，每个时间步可能有不止一个脉冲。使用监听器。

# android - 获得图像RGB强度的正确方法？

> ID：15938569
> 
> 赞同：0
> 
> 时间：2013-04-10T23:56:09.423
> 
> 标签：android, image-processing, camera, android-camera, rgb

我正在使用一个简单的相机应用程序，并获取实时相机预览到`surfaceView`. 我使用按钮打开/关闭相机。在按钮中`onClick`，在我调用之后`camera.startPreview()`，我运行：

```
camera.setPreviewCallback(new PreviewCallback() {
    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {
        sumRED = 0;
        sumGREEN = 0;
        sumBLUE = 0;
        int frameHeight = camera.getParameters().getPictureSize().height;
        int frameWidth = camera.getParameters().getPictureSize().width;
        int[] myPixels = convertYUV420_NV21toRGB8888(data, 200, 200);
        Bitmap bm = Bitmap.createBitmap(myPixels, 200, 200, Bitmap.Config.ARGB_8888);
        imageView.setImageBitmap(bm);
        for (int i = 0; i < myPixels.length; i++) {
            sumRED = sumRED + Color.red(myPixels[i]);
            sumGREEN = sumGREEN + Color.green(myPixels[i]);
            sumBLUE = sumBLUE + Color.blue(myPixels[i]);
        }
        sumRED = sumRED / myPixels.length;
        sumGREEN = sumGREEN / myPixels.length;
        sumBLUE = sumBLUE / myPixels.length;
        String sRed = Float.toString(sumRED);
        String sGreen = Float.toString(sumGREEN);
        String sBlue = Float.toString(sumBLUE);
        rTextView.setText("RED: " + sRed);
        gTextView.setText("Green: " + sGreen);
        bTextView.setText("Blue: " + sBlue);
    }
} 
```

我正在使用从[这里](https://stackoverflow.com/questions/5272388/extract-black-and-white-image-from-android-cameras-nv21-format/12702836#12702836)提供的 NV21 到 RGB 转换的代码。

我认为通过`Color.blue(myPixels[i]);`对 RGB 颜色进行处理，我将获得每个像素的颜色强度，然后获得图片的平均颜色强度。

但我注意到`TextView`红色和绿色显示为完全相同的值。

我重用的代码是否不适合这个目的？或者是否有更好、首选、更有效的方法来获得像素的特定颜色强度（或实时视频预览？）

谢谢

**更新：** 起初我没有触及预览的输出格式。重建位图的预览非常糟糕。当我添加`cameraParam.setPreviewFormat(ImageFormat.YV12);`重建的位图时，将重建的图像划分为 4 个象限。当我用手指盖住相机时（由于闪光灯打开而显示为橙色/红色），重建的图像在顶部两个象限为紫色，在底部两个象限呈绿色。当我将格式更改为 时`NV21`，重建的图像是单个图像，并且显示的预览几乎相同，**并且**所有 RGB 颜色之间都有显着的变化。所以，我的问题是：为什么我得到的结果在 150-160 的范围内，而大部分屏幕是单色的，而值在 255 左右的范围内？我以为我使用的转换算法正在转换为 255 的比例。我在这里缺少什么？

# eclipse - 如何升级 Eclipse 4.2 里程碑（例如 4.3 M5 到 4.3 M6）

> ID：15938576
> 
> 赞同：1
> 
> 时间：2013-04-10T23:57:03.370
> 
> 标签：eclipse, eclipse-kepler

我已经看过了，我只是在 Eclipse 页面上找不到关于升级里程碑（或真正升级一般）的明确答案 将 Eclipse 4.3 里程碑升级到下一个里程碑的正确方法是什么，例如 4.3 M5到 4.3 M6。

即使在添加[http://download.eclipse.org/eclipse/updates/4.3milestones](http://download.eclipse.org/eclipse/updates/4.3milestones)之后，核心 Eclipse 组件在检查更新时也不会出现。

我是否需要显式安装新的里程碑，然后甚至为里程碑复制包（如[https://stackoverflow.com/a/11264210/255961](https://stackoverflow.com/a/11264210/255961)中所述）？

[在为 Java EE 开发人员升级 Eclipse IDE 中](https://stackoverflow.com/questions/13585438/upgrading-eclipse-ide-for-java-ee-developers)有一个相关问题，但它专注于 4.2，并且与修复 Juno 缓慢而不是如何升级的一般问题复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:05:13.820

你做得对。我刚刚验证了升级 M3 SDK，它工作正常，无需向 3 个预配置的站点添加任何新的更新站点。

您可能已经安装了其他第三方插件，这些插件本身具有使用版本范围指定的依赖项。此类插件将禁止升级，因为 P2 不会安装破坏当前工作依赖项的升级。

# javascript - 选择选项和收音机；反映在其他方面的选择

> ID：15938578
> 
> 赞同：0
> 
> 时间：2013-04-10T23:57:10.107
> 
> 标签：javascript, html

我有一张地图并使用单选按钮允许用户在地图上选择一个点，但他们也可以使用下拉菜单进行选择（这在地图很小的手机上更容易）。

如何使单选和下拉选择保持同步，以便在选择一个时，另一个反映更改？

设置单选按钮的代码：

```
echo"<div class='site' style='margin:".$y."px 0px 0px ".$x."px;'>
    <input type='radio' id='site_".$site_id."' name='site_id'  value='".$site_id."' disabled/>
    <label for='site_".$site_id."'><span>".$site_id."</span></label>
    </div>"; 
```

用于在下拉菜单中创建选项

```
echo "<select id='site_select' name='site_select'>";
  foreach($avail_sites as $site){
    echo "<script>document.getElementById('site_".$site->id."').disabled=false;</script>";
    echo "<option value='".$site->id."'>Site: ".$site->name."</option>";
  }
  echo "</select>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:25:48.507

下面是一些代码，可以根据常用值保持选择和单选按钮同步。最好将前两个选择器更改为更具体一点（使用类名或其他东西）。

```
(function() {
    var sel = document.querySelector("select"),
    opts = document.querySelectorAll("input[type='radio']");

    sel.addEventListener('change', function() {
       var val = this.options[this.selectedIndex].value;
       for(var i=0, max = opts.length; i<max; i++) {
           if (opts[i].value == val) {
               opts[i].checked = "checked";
           }
       }
    });

    for(var i=0, max = opts.length; i<max; i++) {
        opts[i].addEventListener('click', function() {
            var val = this.value;
            for (var i=0, max=sel.options.length; i<max; i++) {
                if (sel.options[i].value == val) {
                   sel.options[i].selected = "selected";
                   return;
               }
            }
        });
    }
})(); 
```

[http://jsfiddle.net/ryanbrill/QCEbJ/](http://jsfiddle.net/ryanbrill/QCEbJ/)

# angularjs - 您如何使用 Karma Runner（又名 Testacular）提供 svg 和固定装置

> ID：15938580
> 
> 赞同：14
> 
> 时间：2013-04-10T23:57:13.990
> 
> 标签：angularjs, karma-runner

在过去的两个小时里，我一直在尝试让 Karma runner 提供一个 svg 文件和一个 html 固定装置，但到目前为止还没有运气。

在此线程上的第二个答案之后：[将 html 与 testacularjs 集成时出错](https://stackoverflow.com/questions/13019215/error-while-integrating-html-with-testacularjs)我一直在尝试使用`served`来指示我的固定装置和 svg 文件应该由服务器分发，但我仍然收到“未找到”

```
files = [
  JASMINE,
  JASMINE_ADAPTER,
  REQUIRE,
  REQUIRE_ADAPTER,

  // put all components in requirejs 'paths' config here (included: false)
  { pattern: 'preview/public/components/**/*.js', included: false },
  { pattern: 'preview/public/js/**/*.js', included: false },

  // assets
  { pattern: 'preview/public/img/svg/*.svg', included: false, served: true },

  // helpers & fixtures for jasmine-jquery
  { pattern: 'test/libs/**/*.js', included: true },
  { pattern: 'test/fixtures/**/*.html', included: false, served: true },

  // all src and test modules (included: false)
  { pattern: 'test/specs/**/*.spec.js', included: false },

  // test main require module last
  'test/test-main.js'
]; 
```

我正在设置`jasmine.getFixtures().fixturesPath`to `/fixtures`，我可以看到它使用了正确的路径，但我仍然最终......

`GET http://localhost:9876/img/svg/directional-pad-gradients.svg 404 (Not Found)` `GET http://localhost:9876/fixtures/directional-pad.html 404 (Not Found)`

如果有人有使用 Karma runner 加载固定装置和/或 svg 的示例，我**真的**很想看看。谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-12T15:19:28.873

在这里回答我自己的问题......

我试图在`http://localhost:9876/fixtures/directional-pad.html`

相反，我应该尝试在`http://localhost:9876/base/test/fixtures/directional-pad.html`

Karma 将所有内容存储在`base/`路由下，因此您添加的任何静态文件路由都需要从它开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T16:40:45.880

一种方法是设置代理服务器。

使用代理服务器的测试系统的一个很好的例子是 [https://github.com/yearofmoo-articles/AngularJS-Testing-Article](https://github.com/yearofmoo-articles/AngularJS-Testing-Article)

这是 Moo 的伟大测试教程中的示例。 [http://www.yearofmoo.com/2013/01/full-spectrum-testing-with-angularjs-and-testacular.html](http://www.yearofmoo.com/2013/01/full-spectrum-testing-with-angularjs-and-testacular.html)

您在 karma 配置文件中设置代理

```
proxies = {
  '/': 'http://localhost:8100/'
}; 
```

然后你需要在8100上设置服务器

这可以使用 http-server 来完成

> npm install http-server --save-dev

然后创建两个文件

### ./server.sh

```
nf --procfile ./config/Procfile.server start 
```

### ./config/Procfile.server

```
web_server: ./node_modules/http-server/bin/http-server -p 8100 preview/public 
```

然后你需要运行你的服务器

```
./server.sh 
```

然后，当您运行测试时，代理将提供您的文件。

# python - UUID 使用 str(value) 发送到客户端，但 ib 服务器在收到格式错误的十六进制字符串时发送

> ID：15938582
> 
> 赞同：1
> 
> 时间：2013-04-10T23:57:18.477
> 
> 标签：python, python-2.7, sqlalchemy, uuid

我在 SQLAlchemy uuid4 中使用一列，我得到的值就像`16d11d6abdaf4fe9905a56e0be8d15d1` 我需要使用 json 格式将此 id 发送给客户端，并且将来从客户端 id 接收并通过数据库进行查询。我正在发送

```
result = {'id': str(id)}
#this is from Tornado handler
self.write(simplejson.dumps(result)) 
```

当我从带有我收到的 id 的用户 json 发送时，在服务器上我提取像

```
data = tornado.escape.json_decode(self.request.body)
id = data.get('id', None)
#also tornado handler when I receive id from client
#I also have tried like uuid.UUID(bytes=id.bytes) but also get error 
```

我总是收到错误，例如格式错误的十六进制字符串。如何在json中发送到客户端以及从客户端到服务器uuid？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:13:17.193

第一：

```
result = {'id': str(id)}
#If the given chunk is a dictionary, we write it as JSON and set
#the Content-Type of the response to be application/json.
self.write(result) 
```

第二：

```
#Returns the value of the argument with the given name
id = self.get_argument("id") 
```

对不起，我的英语很差

# c# - 当焦点更改为对话框时，在 RichTextBox 中保留突出显示？

> ID：15938583
> 
> 赞同：3
> 
> 时间：2013-04-10T23:57:22.183
> 
> 标签：c#, .net, wpf, richtextbox

我正在使用 WPF、.NET4、VS2010。

我有一个允许用户编辑的 RichTextBox。我已经实现了一个查找/替换对话框。用户输入一个查找字符串和一个替换字符串。当他们点击 Replace 时，它​​会在 RTB 中搜索下一次出现的 Find 字符串并选择（突出显示）它。如果用户再次单击替换，它会替换文本并再次搜索，选择（突出显示）下一个出现。

问题是，用户看不到 RichTextBox 中的突出显示。我找到了如何在 RTB 失去焦点时保留突出显示的解决方案 - 特别是处理`OnLostFocus`和设置`e.Handled`为`true`. 但是，这似乎只在焦点转到同一 WPF 表单上的另一个控件时才有效。就我而言，我有一个单独的 WPF 表单（我的查找/替换对话框）。当焦点返回时，RTB 中所选文本的突出显示消失 - 尽管当我关闭“查找/替换”对话框并且焦点返回主窗体时，所选文本会适当突出显示。

我已经尝试过使用它`ShowDialog()`来显示我的查找/替换对话框并使用`Show()`.

所以，问题是，有没有办法让我的 RTB 显示选定的文本，即使焦点位于我的查找/替换对话框上？

# java - Java 主方法幻数

> ID：15938584
> 
> 赞同：1
> 
> 时间：2013-04-10T23:57:49.827
> 
> 标签：java, checkstyle, magic-numbers

所以我试图摆脱我主要方法中的两个神奇数字。我尝试将它们设为静态字段，但我得到了一个不同的 checkstyle 错误。我正在寻找一种方法让我的主要方法使用 checkstyle 完全检查。

这些是我得到的 checkstyle 错误：

> “2000”是一个神奇的数字
> 
> '262' 是一个神奇的数字

当我将它们设为静态字段时，这些是 checkstyle 错误：

> 名称 'twothou' 必须匹配模式 '^[AZ][A-Z0-9]*(_[A-Z0-9]+)*$'。
> 
> 名称“twosixtytwo”必须匹配模式“^[AZ][A-Z0-9]*(_[A-Z0-9]+)*$”。

PS如果我尝试使变量非静态它不会让我编译。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:00:33.360

“幻数”警告告诉您应该在代码中[使用数字常量而不是硬编码数字](https://stackoverflow.com/questions/47882/what-is-a-magic-number-and-why-is-it-bad)。

其他错误只是意味着您应该对标识符使用[标准命名实践](http://en.wikipedia.org/wiki/Naming_convention_(programming)#Java)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T00:00:34.997

我相信您只需要将字段变量名称更改为所有大写字母。

试试 TWO_THOU 和 TWO_SIXTY_TWO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-02T10:04:12.790

您可以将值存储在 final int 变量中，然后可能会使用它，然后避免 checkstyle 问题。

int hashcode=hashcode+4; // checkstyle 违规，因为 4 是一个幻数

最终int值=4；int哈希码=哈希码+值；// 没有违规

# google-maps - 谷歌地图构建多边形坐标

> ID：15938588
> 
> 赞同：3
> 
> 时间：2013-04-10T23:58:27.933
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

有没有办法在谷歌地图上检索建筑物的多边形坐标？

我可以手动绘制覆盖并获取多边形坐标，然后尝试确定纬度和经度是否在这些坐标边界内。但是有没有更聪明的方法来做到这一点？

目标是以编程方式了解一组 lat/lng 属于建筑物的位置。

# javascript - 使用 File API 从 iPhone 获取具有透明度的 png

> ID：15938595
> 
> 赞同：1
> 
> 时间：2013-04-10T23:58:46.157
> 
> 标签：javascript, iphone, html, fileapi

我使用带有fileAPI（fileReader / dataURL）的输入（type =“file”）来获取png（具有透明度）图像，然后显示到网站中。这在台式机上效果很好。我只需单击按钮，浏览并选择我的图像，然后它将显示在网站上。

在 iOS iPhone（未在其他 ios 设备上测试）中，当您单击按钮时，浏览器会显示拍照或从相机胶卷中选择图像的选项。我在相机上选择了我的图像，它以白色背景显示；但这是一个具有透明度的 png 24，并且该背景不应该存在（就像在桌面中一样）。

我发现这可能是相机胶卷去除图像透明度的问题。所以我想知道是否有人使用 html 5 文件 api 从 iphone 获得了具有透明度的 png，如果是，该怎么做？

注意：我尝试使用 Dropbox（一个允许将图像复制到相机胶卷的其他应用程序）希望 png 图像不会失去透明度，但不知何故，所有图像在导入网站时都以令人讨厌的背景结束。

这是我目前用于通过 File API 获取图像的代码：

```
function init() {
    var bHaveFileAPI = (window.File && window.FileReader);
    document.getElementById("inputid").addEventListener("change", onFileChanged);
}
function onFileChanged(theEvt) {
    var thefile = theEvt.target.files[0];
    var reader = new FileReader();

    reader.onload = function (evt) {
        var resultdata = evt.target.result;
        $('<img>')
            .attr('title', thefile.name)
            .attr('src', evt.target.result)
            .prependTo('#imgin');
    }
    reader.readAsDataURL(thefile);
}
window.addEventListener("load", init); 
```

# apache - 重写以追加到查询字符串

> ID：15938598
> 
> 赞同：5
> 
> 时间：2013-04-10T23:59:06.623
> 
> 标签：apache, .htaccess, mod-rewrite

我不明白为什么我总是在重写规则方面遇到如此大的问题，但我只想附加到查询字符串（如果它存在）并添加一个`?`如果它不存在。我实际上并不关心浏览器中的 URL 是否更改——它只需要加载正确的目标页面。

```
RewriteRule /cia16(.*)\?(.*) /cia$1?$2&CIA=16
RewriteRule /cia16(.*) /cia/$1?CIA=16 
```

如果我去`/cia16/steps.php?page=1`它实际上会被重写`/cia/steps.php?CIA=16`——也就是说，出于重写的目的，它似乎接受了查询字符串部分甚至不被视为 URL 的一部分。

我必须做什么才能使重写与现有的查询字符串一起正常工作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T00:05:30.783

您无法匹配 a 中的查询字符串`RewriteRule`，您需要匹配 a 中的`%{QUERY_STRING}`变量`RewriteCond`。但是，如果您只想附加查询字符串，则可以使用该`QSA`标志：

```
RewriteRule /cia16(.*) /cia/$1?CIA=16 [QSA] 
```

URI:`/cia16/steps.php?page=1`将被重写为`/cia/steps.php?CIA=16&page=1`. 如果由于某种原因，您需要在`page=1` *之前*，`CIA=16`那么您可以执行以下操作：

```
RewriteRule /cia16(.*) /cia/$1?%{QUERY_STRING}&CIA=16 
```

# python - Python ctypes如何从void指针返回中读取数组

> ID：15938599
> 
> 赞同：3
> 
> 时间：2013-04-10T23:59:19.533
> 
> 标签：python, ctypes

所以我试图读取一个无符号短数组，它由我正在使用的 c 库中的 void 指针返回。头文件中的函数定义是这样的：

```
void* Foo(int a, int b) 
```

这个函数最终返回一个指向 unsigned short 类型数组的指针。

在 python 中，我一直在尝试使用 ctypes 返回数组但没有成功。这是我所拥有的：

```
import ctypes
import numpy as np

libc = ctypes.cdll.LoadLibrary("Library.dll")

Vec=np.zeros((1000,),dtype=np.uint16)

c_ushort_p = ctypes.POINTER(ctypes.c_ushort)
Vec_p=confVec.ctypes.data_as(c_ushort_p)

libc.Foo.restype = ctypes.c_void_p
Vec_p=libc.Foo(1,1)

print Vec_p 
```

这将返回“无”。

如果我尝试：

```
...
libc.Foo.restype = ctypes.c_void_p
Vec_p=libc.Foo(1,1)

print Vec_p[0] 
```

我得到 TypeError: 'NoneType' 对象没有属性 ' **getitem** '。

我也试过这个：

```
...
libc.Foo.restype = ctypes.c_void_p
Vec_p=ctypes.cast(libc.Foo(1,1),c_ushort_p)

print Vec_p 
```

返回，其中 print Vec_p[0] 给出“ValueError：NULL 指针访问”

谁能给我任何帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:03:43.420

DLL 返回一个空指针。这些在 ctypes 中表示为 None 。

我不知道为什么函数会这样，但是您看到的输出清楚地表明您的函数返回 null。

# c# - WndProc 不想用 Alt+Keys 和 LeftAlt 触发它

> ID：15938600
> 
> 赞同：-2
> 
> 时间：2013-04-10T23:59:32.883
> 
> 标签：c#, xna

一切都很好，但它不适用于 ALT+Numpad(•◘○♦♣♠) 和左 ALT+数字(¹²³£¢¬)。我厌倦了使用 WM_KEYDOWN 和 WM_SYSKEYDOWN，仍然没有工作。

提前致谢， 卡杜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:08:00.573

ALT、SHIFT、CTRL 是键修饰符。这意味着您可以随心所欲地按下按键，但不会触发任何事件，并且不会真正关注普通应用程序中的按键，直到按下另一个按键。

你可能会发现[这篇](https://stackoverflow.com/questions/8603378/how-to-capture-when-the-user-pressed-a-modifier-key)文章很有帮助。

祝你好运！

# python - Python Difflib - 如何通过“更改”操作获取 SDiff 序列

> ID：15938605
> 
> 赞同：3
> 
> 时间：2013-04-11T00:00:16.023
> 
> 标签：python, diff, difflib

我正在阅读 Python 的[diffllib](http://docs.python.org/2/library/difflib.html)的文档。根据每个文档，Differ delta 给出了一个序列

```
Code    Meaning
'- '    line unique to sequence 1
'+ '    line unique to sequence 2
'  '    line common to both sequences
'? '    line not present in either input sequence 
```

但是“更改”操作呢？如何获得类似于 Perl 的 [sdiff](https://metacpan.org/module/Algorithm::Diff#sdiff)中结果的“c”指令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-15T04:18:20.000

看这个脚本。

sdiff.py@饥饿蛇网

[http://hungrysnake.net/doc/software__sdiff_py.html](http://hungrysnake.net/doc/software__sdiff_py.html)

Perl 的 sdiff(Algorithm::Diff) 不考虑“匹配率”，但 python 的 sdiff.py 考虑一下。=)

我有 2 个文本文件。

```
$ cat text1.txt
aaaaaa
bbbbbb
cccccc
dddddd
eeeeee
ffffff

$ cat text2.txt
aaaaaa
bbbbbb
xxxxxxx
ccccccy
zzzzzzz
eeeeee
ffffff 
```

我通过 sdiff 命令或 Perl 的 sdiff(Algorithm::Diff) 得到了并排差异。

```
$ sdiff text1.txt text2.txt
aaaaaa          aaaaaa
bbbbbb          bbbbbb
cccccc      |   xxxxxxx
dddddd      |   ccccccy
            >   zzzzzzz
eeeeee          eeeeee
ffffff          ffffff 
```

Sdiff 不要考虑“匹配率” =(

我通过 sdiff.py 得到它

```
$ sdiff.py text1.txt text2.txt
--- text1.txt (utf-8)
+++ text2.txt (utf-8)
 1|aaaaaa             1|aaaaaa
 2|bbbbbb             2|bbbbbb
  |            >      3|xxxxxxx
 3|cccccc      |      4|ccccccy
 4|dddddd      <       |
  |            >      5|zzzzzzz
 5|eeeeee             6|eeeeee
 6|ffffff             7|ffffff

[     ]      |      + 
[ <-  ]     3|cccccc  
[  -> ]     4|ccccccy 
```

Sdiff.py 考虑“匹配率”=）

我想要 sdiff.py 的结果。你不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-10T16:32:29.133

difflib中没有直接`c`类似的代码来显示更改的行，就像您谈到的 Perl 的 sdiff 中那样。但是你可以很容易地做一个。在 difflib 的 delta 中，“更改的行”也有`'- '`，但与实际删除的行相比，delta 中的下一行带有 标记，`'? '`表示 delta 的前一个索引中的行是“更改”的，而不是删除的。这条线在 delta 中的另一个目的是它充当“指南”，以了解更改在哪里。

因此，如果 delta 中的一行被标记为`'- '`，则根据 delta 的接下来几行，有四种不同的情况：

**案例1**：通过**插入**一些字符修改的行

```
- The good bad
+ The good the bad
?          ++++ 
```

**案例2**：通过**删除**一些字符来修改行

```
- The good the bad
?          ----
+ The good bad 
```

**情况 3**：通过**删除和插入**和/或**替换**某些字符来修改行：

```
- The good the bad and ugly
?      ^^ ----
+ The g00d bad and the ugly
?      ^^          ++++ 
```

**案例4**：行被**删除**

```
- The good the bad and the ugly
+ Our ratio is less than 0.75! 
```

如您所见，带有标记的行`'? '`准确显示了在何处进行了何种类型的修改。

请注意，如果[`ratio()`](http://docs.python.org/library/difflib.html#difflib.SequenceMatcher.ratio)正在比较的两行之间的值小于 0.75，则 difflib 认为删除了一行。这是我通过一些测试发现的值。

因此，要推断一条线已更改，您可以这样做。这将返回带有代码“c”标记的更改行和标记为“u”的未更改行的差异，就像在 Perl 的 sdiff 中一样：

```
def sdiffer(s1, s2):
    differ = difflib.Differ()
    diffs = list(differ.compare(s1, s2))

    i = 0
    sdiffs = []
    length = len(diffs)
    while i < length:
        line = diffs[i][2:]
        if diffs[i].startswith('  '):
            sdiffs.append(('u', line))

        elif diffs[i].startswith('+ '):
            sdiffs.append(('+', line))

        elif diffs[i].startswith('- '):
            if i+1 < length and diffs[i+1].startswith('? '): # then diffs[i+2] starts with ('+ '), obviously
                sdiffs.append(('c', line))
                i += 3 if i + 3 < length and diffs[i + 3].startswith('? ') else 2

            elif diffs[i+1].startswith('+ ') and i+2<length and diffs[i+2].startswith('? '):
                sdiffs.append(('c', line))
                i += 2
            else:
                sdiffs.append(('-', line))
        i += 1
    return sdiffs 
```

希望能帮助到你。

[***PS***：*这是一个老问题，所以我不确定我的努力会得到多大的回报。`:-(`我忍不住回答了这个问题，因为我最近一直在使用 difflib。*]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-03T23:52:51.223

我不太了解 Perl 的“更改”操作是什么。如果它类似于 PHP DIFF 输出，我用这段代码解决了我的问题：

```
def sdiffer(s1, s2):
    differ = difflib.Differ()
    diffs = list(differ.compare(s1, s2))

    i = 0
    sdiffs = []
    length = len(diffs)
    sequence = 0
    while i < length:
        line = diffs[i][2:]
        if diffs[i].startswith('  '):
            sequence +=1
            sdiffs.append((sequence,'u', line))

        elif diffs[i].startswith('+ '):
            sequence +=1
            sdiffs.append((sequence,'+', line))

        elif diffs[i].startswith('- '):
            sequence +=1
            sdiffs.append((sequence,'-',diffs[i][2:]))
            if i+1 < length and diffs[i+1].startswith('? '):
                if diffs[i+3].startswith('?') and i+3 < length : # case 2
                    sequence +=1
                    sdiffs.append((sequence,'+',diffs[i+2][2:]))
                    i+=3
                elif diffs[i+2].startswith('?') and i+2 < length: # case 3
                    sequence +=1
                    sdiffs.append((sequence,'+',diffs[i+2][2:]))
                    i+=2
            elif diffs[i+1].startswith('+ ') and i+2<length and diffs[i+2].startswith('? '): # case 1
                sequence +=1
                sdiffs.append((sequence,'+', diffs[i+1][2:]))
                i += 2
            else: # the line is deleted and inserted new line # case 4
                sequence +=1
                sdiffs.append((sequence,'+', diffs[i+1][2:]))
                i+=1   
        i += 1
    return sdiffs 
```

感谢@Sнаđошƒаӽ 您的代码。

# cocos2d-iphone - 花栗鼠物理：平稳地旋转身体

> ID：15938606
> 
> 赞同：1
> 
> 时间：2013-04-11T00:00:29.070
> 
> 标签：cocos2d-iphone, game-physics, chipmunk

翻遍论坛后没找到这个。我想实现这样的东西......主角总是朝着它所面对的方向移动。当玩家触摸屏幕时，角色会转向该触摸位置，这会导致身体朝不同的方向移动。

我可以让角色面对触摸位置，如下所示：

```
CGPoint diff = ccpSub(location, self.position);
CGFloat targetAngle = atan2f(diff.y, diff.x);
self.body->a = targetAngle; 
```

我想要一些类似的东西。获取角色当前面对的角度。将该角度转换为单位向量。将该单位向量乘以 max_velocity，并将其应用于角色。这应该（理论上）将角色以恒定速度朝其面对的方向移动？

这似乎给了我想要的东西：

```
cpVect rotatedVel = cpvmult(ccpForAngle(self.body->a), MAX_VELOCITY);
self.body->v = cpvlerpconst(self.body->v, rotatedVel, ACCELERATION * dt); 
```

现在我需要的只是一种随时间缓慢旋转角色方向的方法。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T18:50:49.553

听起来你想从 Chipmunk 的 Tank 演示中做这样的事情：

```
// turn the control body based on the angle relative to the actual body
cpVect mouseDelta = cpvsub(ChipmunkDemoMouse, cpBodyGetPos(tankBody));
cpFloat turn = cpvtoangle(cpvunrotate(cpBodyGetRot(tankBody), mouseDelta));
cpBodySetAngle(tankControlBody, cpBodyGetAngle(tankBody) - turn); 
```

通过转换相对于身体当前旋转的方向向量，相对于身体的当前旋转计算“转”。该演示使用约束（您可能也想在这里考虑）平滑旋转，但您也可以在“转弯”上使用 cpflerpconst() 来获得最大角速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T06:47:57.443

使用`cpBodySetTorque`设置对象扭矩以使其旋转/旋转怎么样？

# android - 项目的简单 Java 对象的 ListView 示例

> ID：15938609
> 
> 赞同：1
> 
> 时间：2013-04-11T00:00:33.917
> 
> 标签：android, android-listview

我是 Android 编程新手。我可以使用简单的 ListViews 在其中使用字符串的 ArrayList。我想在复杂性上更上一层楼，让我的 ListView 由简单的 Java 对象组成，如下所示：

```
class myItem {
    public String name;
    public Integer price;
    public Integer weight;
} 
```

ListView 只需要显示上述对象中的名称即可。它不必有多个图标或每个项目的多个可点击操作。

但我不知道从哪里开始。我在 WWW 上看到的所有示例都更加复杂，并且需要我学习与此无关的东西（例如数据库）。或者每个 ListView 项目都显示有多个视图，例如文本、图像和图标等，并且每个都可以单击以执行不同的操作。我不需要任何这些，而且为了让这些示例正常工作，我陷入了阅读不需要的功能的困境。

有没有人有一个简单的 ListView 示例，其中包含简单的 Java 对象（如上面的那个）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:08:18.063

> 但我不知道从哪里开始。

在 上实现一个`public String toString()`方法`myItem`。然后创建一个`ArrayList<myItem>`并使用它代替`ArrayList<String>`，用合适的实例填充该列表`myItem`，并将列表放入一个`ArrayAdapter<myItem>`而不是一个`ArrayAdapter<String>`。不需要进行任何其他更改——无论您使用什么布局，都`ArrayAdapter<String>`将适用于您的`ArrayAdapter<myItem>`.

如果您是 Java 新手，`toString()`这是用于返回对象表示的标准 Java 方法`String`。的默认行为`ArrayAdapter`是调用`toString()`给定列表位置的对象并使用它来填充行。

# php - 如何为外部站点调用基于 javascript 的表单

> ID：15938612
> 
> 赞同：1
> 
> 时间：2013-04-11T00:00:46.373
> 
> 标签：php, javascript, jquery, knockout.js

我为标题道歉，我不太清楚如何简洁地表达我的问题。

假设我在 knockout.js 中制作了一个表单，而其他人想要使用它。除了复制 knockout.js 源文件、包含视图模型的 javascript 甚至表单的 html 之外，是否可以使用使用 javascript（或其他东西）来调用我的服务器，然后返回所有必要的代码？我想我要问的是我可以托管这些文件吗？为了让他们更简单，只需几行代码就可以调用必要的文件来使用淘汰表吗？

我注意到很多网站都有通过 javascript 调用他们的 API 的功能，然后返回一些东西（看似），比如 Twitter 和 facebook。

比如推特呢？

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.example.com" data-text="Test Tweet">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> 
```

这一行是否`js.src=p+'://platform.twitter.com/widgets.js`只是包含来自 Twitter 服务器的 javascript 文件，这是推文按钮所必需的，其余代码只是与他们的 API 相关联，让它知道要返回什么？

它类似于使用 google 的 jQuery 吗？

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script> 
```

**编辑 - 我看到这是处理同源策略。当我的服务器托管在谷歌的服务器上而不是我的服务器上时，我的服务器如何加载 jQuery.js？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:52:46.997

通常，您不能因为[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，这会阻止您从另一个域调用 JavaScript。

但是，您可以设置[CORS（跨源资源共享）](http://enable-cors.org/server.html)以允许共享脚本。如果您访问该 CORS 链接，您可以了解如何设置它 - 方法取决于您的 Web 服务器软件。设置此（每个文件）允许将文件共享到指定（或所有）域。

# c - URL 查询解析器：第二个参数的分段错误

> ID：15938614
> 
> 赞同：1
> 
> 时间：2013-04-11T00:00:57.753
> 
> 标签：c

我目前正在编写一个解析器来解析一个 URL 查询，例如`key1=value1&key2=value2`. 我得到第一个参数，但在第二个，它死了。这是我使用的精简代码：

```
const char *query_str = "key1=&key2=value2"
char *tmp, *value, *key;
int no_of_params = 2, value_str_len;
key = strdup(query_str);
for(; no_of_params > 0; no_of_params--)
{
    tmp = strchr(key, '=');
    printf("Currently at: %s/%s\n", key, tmp);
    *tmp = '\0';
    printf("Currently at: %s/%s\n", key, tmp);
    tmp = tmp + 1;
    value_str_len = tmp - strchr(tmp, '&') + 1;
    value = malloc(value_str_len);
    strncpy(value, tmp, value_str_len - 1);
    value[value_str_len - 1] = '\0';
    printf("Adding Key '%s' and Value '%s'\n", key, value);
    free(value);

    key = strchr(query_str, '&') + 1;
} 
```

我希望我已经正确调整了一切。这实际上是一个更大函数的一部分，但它应该类似于我使用的代码。这是运行它时的输出：

```
Currently at: key1=&key2=value2/=&key2=value2
Currently at: key1/
Adding...
Adding Key 'key1' and Value ''
Currently at: key2=value2/=value2 
```

然后发生分段错误。所以这显然是一条线`*tmp = '\0'`，但为什么呢？（注意，在实际代码中，我`flush(stdout)`每次打印后，所以我现在是这一行。）

我假设自从我之前的`printf`工作以来，这`tmp`就是我所期望的，但为什么这种技术只适用于第一次迭代而不适用于第二次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:23:27.587

除了 Ganesh 所说的之外，我还看到了这条线的问题`value_str_len = tmp - strchr(tmp, '&') + 1;`。首先，`strchr`应该找到超出的与`tmp`号，但是从（较小的）中减去该指针值（通常会较大）`tmp`，可能会导致负长度。其次，您不处理没有找到＆符号的情况。是的，解析很棘手。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:19:00.887

`query_str` is of type `const char *` and hence, `key = strchr(query_str, '&') + 1;` will fail.

# ruby-on-rails - 添加到用户模型时迁移到未定义的heroku（设计）

> ID：15938620
> 
> 赞同：0
> 
> 时间：2013-04-11T00:01:42.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, devise

我在我的用户模型中添加了一个“区域”属性（我正在使用设计）。此迁移适用于本地主机，我已经运行 heroku rake db:migrate - 当我推送到 heroku 时，它会在注册页面上显示错误消息

```
ActionView::Template::Error (undefined method `area' for #<User:0x00000006589520>) 
```

我的注册视图有：

```
<%= f.input :area, label: "Specialty" %> 
```

数据库迁移：

```
class AddAreaColumnToUsers < ActiveRecord::Migration
  def change
    add_column :users, :area, :string
  end
end 
```

我错过了heroku迁移的某些部分吗？

# java - SQLGrammarException：ORA-00904（“无效标识符”）

> ID：15938622
> 
> 赞同：2
> 
> 时间：2013-04-11T00:02:05.817
> 
> 标签：java, oracle, spring, hibernate, jpa

我收到 Oracle 错误/`org.hibernate.exception.SQLGrammarException`当我对使用 JPA 和 Spring 的 Java 类运行 JUnit 测试时：

```
ORA-00904: "ALIAS"."COLUMN_NAME": invalid identifier 
```

奇怪的是，JUnit 测试在针对开发数据库运行时有效，但在针对我用于持续集成构建的数据库（它们都是 Oracle 数据库）运行时失败。

因此，这表明后者的 d/b 中存在某些缺失或错误。但是，我已经两次（和三次）检查了两个数据库中引用的表是否相同，并且包含错​​误所指的列 COLUMN_NAME。

更多信息 - 在 JUnit 测试中调用的 DAO Java 类使用 javax.persistence.EntityManager：

```
MyClass myObject = entityManager.find(MyClass.class, idNumber); 
```

MyClass JPA 实体类映射到 Oracle 表：

```
@Configurable
@Entity
@Table(name = "MyTable", schema = "MySchema")
public class MyClass implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "MY_SEQ")
    @SequenceGenerator(name = "MY_SEQ", sequenceName = "MY_SEQ", allocationSize = 1)
    @Column(name = "ID")
    protected BigDecimal id;

    @Column(name = "COLUMN_NAME")
    private String columnName;
    ...
} 
```

两个数据库中的数据库表中的列 COLUMN_NAME 都是 VARCHAR2(50) 并且可以为空。

版本：

爪哇 - 1.6

春天 - 3.1.1

甲骨文 - 11.2.0.3.0

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:44:07.427

发现了问题。我找到了 Hibernate 正在创建的查询（通过添加

```
<property name="hibernate.show_sql" value="true" /> 
```

到我的 data-persistence.xml 文件）并尝试在测试失败的数据库中运行它。事实证明，在实体 Java 类中，关联的数据库表定义如下：

```
@Table(name = "MyTable", schema = "MySchema") 
```

... 这对发展 d/b 效果很好。但是，持续集成数据库的所有表都在称为其他模式的模式中创建，因此会出现错误。

感谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-27T13:53:19.433

有同样的问题。原因是我错过了添加架构和表名。

@Table（名称=“表”，模式=“模式”）

# vim - 每次打开文件时运行命令，或一般语法

> ID：15938627
> 
> 赞同：3
> 
> 时间：2013-04-11T00:02:57.650
> 
> 标签：vim

我有一个突出尾随空格的语法规则：

```
highlight Badspace ctermfg=red ctermbg=red
match Badspace /\s\+$/ 
```

这是在我的`.vimrc`. 它工作正常，但问题是我经常使用 splits *，*而且似乎`match`只在您打开的第一个文件上运行，因为它`.vimrc`应该只运行一次。

无论如何，我怎样才能获得上述语法来匹配任何打开的文件？是否有“通用”语法文件？`match`每次*打开*文件而不是只运行一次时，是否还有其他方法可以运行？我想知道这两个，因为我将来可能会使用其中任何一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T06:22:24.130

该`:match`命令将突出显示应用于*窗口*，因此您可以使用`WinEnter`事件来定义`:autocmd`.

```
:autocmd WinEnter * match Badspace /\s\+$/ 
```

请注意，已经有许多用于此目的的插件，大多数基于此 VimTip：http: [//vim.wikia.com/wiki/Highlight_unwanted_spaces](http://vim.wikia.com/wiki/Highlight_unwanted_spaces)

他们为您处理所有这些，并在插入模式下关闭突出显示；有些还可以自动删除空格。事实上，我也为此编写了一组插件：[ShowTrailingWhitespace plugin](http://www.vim.org/scripts/script.php?script_id=3966)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T00:27:11.657

您可以通过使用`autocmd`：

```
highlight Badspace ctermfg=red ctermbg=red
autocmd BufEnter * match Badspace /\s\+$/ 
```

但是，还有另一种方法可以实现标记尾随空格的特定目标。Vim 有一个用于突出显示“特殊”空格的内置功能，其中包括制表符（以区别于空格）、尾随空格和不间断空格（字符 160，看起来像普通空格但不是）。

见`:help list`和`:help listchars`。这是我使用的：

```
set list listchars=tab:>·,trail:·,nbsp:·,extends:> 
```

`listchars`具有处理任何文件类型的好处，并标记了多种感兴趣的空白类型。它也快得多（在巨型文件上匹配会明显变慢）并且已经内置。

（请注意，这些是时髦的非 ASCII 点字符，如果您将其剪切并粘贴到支持 UTF8 的 Vim 中，它们应该可以正常工作。如果它们不适合您，您可以在那里使用您喜欢的任何字符，例如句点或下划线）。

这对我来说是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/MUzb7.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:44:32.247

这个问题的正确做法其实是用`:syntax`自定义的`syn-match`.

试着把它放在你的 vimrc 中：

```
augroup BadWhitespace
    au!
    au Syntax * syn match customBadWhitespace /\s\+$/ containedin=ALL | hi link customBadWhitespace Error
augroup END 
```

**编辑：**还应该注意的是，内置支持使用该`'list'`选项突出尾随空格；请参阅`:help 'listchars'`和`:h hl-SpecialKey`（`SpecialKey`是用于突出显示尾随空白字符的突出显示组`'list'`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:02:06.723

~~这是使用`autocmd`. 您要查找的事件是`BufWinEnter`和`VimEnter`。来自 Vim 手册：~~

 ~~## BufWinEnter

```
After a buffer is displayed in a window.  This
can be when the buffer is loaded (after
processing the modelines) or when a hidden
buffer is displayed in a window (and is no
longer hidden).
Does not happen for |:split| without
arguments, since you keep editing the same
buffer, or ":split" with a file that's already
open in a window, because it re-uses an
existing buffer.  But it does happen for a
":split" with the name of the current buffer,
since it reloads that buffer. 
```

## 输入法

```
After doing all the startup stuff, including
loading .vimrc files, executing the "-c cmd"
arguments, creating all windows and loading
the buffers in them. 
```~~ 

试着把它放在你的 vimrc 中：

```
augroup BadWhitespace
    au!
    au VimEnter,BufWinEnter * match Badspace /\s\+$/
augroup END 
```

~~`:help autocmd`了解更多信息。~~

**这是完全错误的，因为`:match`它是窗口本地的，而不是缓冲区本地的。** [Ingo Karkat](https://stackoverflow.com/users/813602/ingo-karkat)的想法是正确的。不幸的是，没有什么好的方法可以避免每次进入窗口时触发 autocmd。

不过，更重要的是，这是一份定制的工作`syntax`，而不是`match`.

# regex - 替换字符串，除非在两点之间

> ID：15938637
> 
> 赞同：5
> 
> 时间：2013-04-11T00:04:42.303
> 
> 标签：regex, r

我有正则表达式需要替换所有反斜杠`\\`，`\"`除非`\\`在两个美元符号之间`$\\bar{x}$`。我不知道如何用正则表达式替换所有这些，除非它介于这两个字符之间。

这是一个字符串和一个即使在双美元内也能`gsub`摆脱 og的字符串`\\`

```
x <- c("I like \\the big\\ red \\dog\\ $\\hat + \\bar$, here it is $\\bar{x}$",
    "I have $50 to \\spend\\", "$\\frac{4}{5}$ is nice", "$\\30\\ is nice too") 

gsub("\\\\", "\"", x)

## > gsub("\\\\", "\"", x)
## [1] "I like \"the big\" red \"dog\" $\"hat + \"bar$, here it is $\"bar{x}$" 
## [2] "I have $50 to \"spend\""    
## [3] "$\"frac{4}{5}$ is nice"   
## [4] "$\"30\" is nice too" 
```

我追求的是：

```
## [1] "I like \"the big\" red \"dog\" $\\hat + \\bar$, here it is $\\bar{x}$" 
## [2] "I have $50 to \"spend\""
## [3] "$\\frac{4}{5}$ is nice"   
## [4] "$\"30\" is nice too" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T00:30:09.853

If you ignore the content-dependent problem, then it is possible to do replacement with PCRE regex. (It is possible to patch it on case-by-case basis, if the `$` which doesn't denote the portion to preserve `\` has a non-ambiguous form).

## Assumes that `$` always starts and ends a non-replacement region, except for the case of the odd last `$` in the string.

Pattern (the first line is RAW regex, the second line is quoted string literal):

```
\G((?:[^$\\]|\$[^$]*+\$|\$(?![^$]*+\$))*+)\\
"\\G((?:[^$\\\\]|\\$[^$]*+\\$|\\$(?![^$]*+\\$))*+)\\\\" 
```

Replace string:

```
\1"
"\\1\"" 
```

[**DEMO 1**](http://www.regex101.com/r/zT5aG5)
[**DEMO 2**](http://www.regex101.com/r/vW7qY3)

### Explanation

The idea is to find the next `\` in the string that is not contained within 2 `$`. This is achieved by make sure the match always starts from where the last match left off `\G`, to ensure we don't skip over any literal `$` and match the `\` inside.

There are 3 forms of sequences that we don't replace:

*   Is NOT either literal `$` or literal `\`: `[^$\\]`
*   Any text in between 2 `$` (this doesn't take into account escaping mechanism, if any): `\$[^$]*+\$`
*   Allow replacement of `\` after the odd last `$`: `\$(?![^$]*+\$)`

So we just march through any combination of the 3 forms of sequences above, and match the nearest `\` for replacement.

## Same assumption as above, except that `$<digit>` will not start a non-replacement region.

This will work even with this kind of string:

```
I have $50 to \spend\. I just $\bar$ remembered that I have another $30 dollars $\left$ from my last \paycheck\. Lone $ \at the end\

```

Pattern:

```
\G((?:[^$\\]|\$\d|\$(?![^$]*\$)|\$[^$]*+\$)*+)\\
"\\G((?:[^$\\\\]|\\$\\d|\\$(?![^$]*\\$)|\\$[^$]*+\\$)*+)\\\\" 
```

[**DEMO**](http://www.regex101.com/r/yT7kF7)

`\$\d` is added in front of the `\$[^$]*+\$` in alternation to make the engine check for that case first.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T01:04:48.940

使用@FrankieTheKneeMan 的 strsplit 方法：

```
x <- c("I like \\the big\\ red \\dog\\ $\\hat + \\bar$, here it is $\\bar{x}$",
       "I have $50 to \\spend\\",
       "$\\frac{4}{5}$ is nice",
       "$\\30\\ is nice too") 

# > cat(x, sep='\n')
# I like \the big\ red \dog\ $\hat + \bar$, here it is $\bar{x}$
# I have $50 to \spend\
# $\frac{4}{5}$ is nice
# $\30\ is nice too

# split into parts separated by '$'.
# Add a space at the end of every string to deal with '$'
#  at the end of the string (as
#      strsplit('a$', '$', fixed=T)
#  is just 'a' in R)
bits <- strsplit(paste(x, ''), '$', fixed=T)

# apply the regex to every second part (starting with the first)
# and always to the last bit (because of the ' ' we added)
out <- sapply(bits, function (x) {
                   idx <- unique(c(seq(1, length(x), by=2), length(x)))
                   x[idx] <- gsub('\\', '\"', x[idx], fixed=T)
                   # join back together
                   x <- paste(x, collapse='$')
                   # remove that last ' ' we added
                   substring(x, 1, nchar(x) - 1)
               }, USE.NAMES=F)

# > cat(out, sep='\n')
# I like "the big" red "dog" $\hat + \bar$, here it is $\bar{x}$
# I have $50 to "spend"
# $\frac{4}{5}$ is nice
# $"30" is nice too 
```

这总是会出现失败的情况（`"I have $20\. \\hi\\ Now I have $30"`），因此您必须牢记这一点，并针对您期望的其他格式的字符串对其进行测试。

# actionscript-3 - 在 AS3 中获取沿 3D 空间对象的宽度、高度和位置

> ID：15938640
> 
> 赞同：3
> 
> 时间：2013-04-11T00:05:09.303
> 
> 标签：actionscript-3, 3d

我在理解对象的 x 和 y 位置以及它的 3D 旋转和它的 z 位置之间的关系时遇到了一些麻烦。

在 3D 空间中操作对象时，如何确定对象的高度和宽度？我认为它与 getRelativeMatrix3D() 有关，但不知道如何。

如果我想确定*沿*对象的全局 x 和 y（不是对象的“主要”x 或 y，而是沿对象“表面”的任何点），我该怎么做？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T18:00:33.733

我认为 getBounds 已经涵盖了宽度和高度问题。

```
 var obj:Sprite = new Sprite();
  obj.graphics.lineStyle(0,0,1);
  obj.graphics.beginFill(0xff9933,1);
  obj.graphics.drawRect(0,0,50,50);
  obj.graphics.endFill();

  obj.z = 0;
  addChild(obj);
  trace(obj.getBounds(obj));
  trace(obj.getBounds(this));

  obj.rotationX = 30;
  obj.rotationY = 50;
  trace(obj.getBounds(obj));
  trace(obj.getBounds(this));

  //output:
    (x=0, y=0, w=50, h=50)
    (x=0, y=0, w=50, h=50)
    (x=0, y=0, w=50, h=50)
    (x=0, y=-16, w=42, h=64) 
```

不过，我不确定您对问题的第二部分的要求是什么。假设你仍然想要一个答案......

> 如果我想确定沿对象的全局 x 和 y（不是对象的“主要”x 或 y，而是沿对象“表面”的任何点），我该怎么做？

# multithreading - 使用阻塞调用时如何退出程序

> ID：15938641
> 
> 赞同：2
> 
> 时间：2013-04-11T00:05:25.970
> 
> 标签：multithreading, sockets, destructor, exit, blocking

我需要做一个项目，其中应用程序监视传入连接并应用 xml 文档中定义的一些规则。规则要么过滤（阻止或允许）连接，要么重定向特定端口上的流量。为此，我使用了诸如accept 和recv（来自Winsock）之类的函数。所有这些功能都在不同的线程上使用。不过，我想知道，由于进行了所有这些阻塞调用，我应该如何在退出之前清理程序。通常，我要么等到该人通过 X 按钮退出控制台，要么等待用户在主线程中输入某个字符。问题是我不确定如果应用程序退出而仍然有活动线程/如果仍然分配内存/如果套接字正在使用中会发生什么。所有的析构函数都被调用了吗？h 和插座是否正确关闭？还是我需要以某种方式自己做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:50:44.893

一般来说，我会说不。不要试图明确地清理诸如套接字、fd、句柄、线程之类的资源，除非你绝对被迫这样做。

确切的行为取决于操作系统以及您终止应用程序的方式。

所有常见的桌面操作系统都会在进程终止时释放操作系统分配给进程的资源。这包括套接字、文件描述符、内存。

在 Windows/Linux 上，如果您从 C/C++ main() 返回而没有任何显式清理，则 crt 代码将调用静态 dtor。非主线程中动态分配对象的 Dtor 不会运行。

用其他语言编写的可执行文件可能表现不同。

如果不是从 main() 返回，而是直接调用 'ProcessExit()' API，则不会调用静态析构函数，因为操作系统没有 dtor 的概念——它不知道或不感兴趣使用什么语言生成可执行文件。

在任何一种情况下，都会调用操作系统来终止您的进程。操作系统通过首先更改所有未运行的进程线程的状态来执行此操作（简单的“傻瓜”版本：），以便它们不再运行。然后停止在其他内核上运行的线程。然后像 fd、套接字这样的 OS 资源被关闭，然后被释放，然后所有进程内存被释放，然后 OS 内核进程/线程对象被释放，然后你的进程不再存在。

如果您在某个线程需要停止应用程序时绝对需要一些或全部 C++/任何 dtors，则必须明确指示其他线程停止，以便可以运行 dtors。我倾向于使用全局可访问的“CloseRequested”布尔值，相关阻塞调用在返回后立即检查。仍然存在说服阻塞调用返回的问题。

一些阻塞调用可以编码为等待多个信号，因此允许调用通过简单的 event/sema/condvar/whatever 信号返回。

一些调用，如 recv()、accept()，可以通过关闭它们正在等待的 fd/socket 来劝说提前返回。

一些调用可以通过“人为”满足他们的等​​待条件来返回——例如。创建一个临时文件只是为了使文件夹监视器调用返回，以便可以检查“CloseRequested”布尔值。

如果阻塞调用非常顽固以至于无法说服它返回，您可以重新设计您的应用程序，以便在 dtors 中释放的任何关键资源都可以由另一个线程释放 - 也许在另一个线程中创建事物并传递它到阻塞在ctor参数中的线程，类似的东西。

注意：如上所述，线程关闭代码是额外的代码，不会添加到您的应用程序的正常功能中。您应该将显式线程关闭限制为那些拥有绝对必须由显式用户代码释放的资源的线程 - 例如，数据库连接。如果操作系统可以释放资源，则应该允许这样做。操作系统非常擅长在释放它们正在使用的资源之前停止所有进程线程，而用户代码则不然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:53:43.320

在可能的情况下，使用具有超时值的阻塞调用，并让你的线程循环。这为您提供了一个检查关闭条件并优雅退出线程的地方。进程退出时，系统通常会清理句柄。优雅地关闭套接字是有礼貌的，但不是绝对强制的。不这样做的缺点是内核可能需要一段时间来清理专有资源。例如，如果你只是杀死了一个等待 accept() 的线程，然后你的应用程序重新启动，它将无法在同一个端口上成功地 accept()，直到内核清理旧的套接字。

# jquery - 骨干网.js路由器

> ID：15938644
> 
> 赞同：0
> 
> 时间：2013-04-11T00:06:03.957
> 
> 标签：jquery, backbone.js, router

我想转到代码下方的链接之一：

```
 var  menukeuze;

   var AppRouter = Backbone.Router.extend({
        routes: {
            "menukeuze": "getPost",
            "*actions": "defaultRoute" // matches http://example.com/#anything-here
        }
    });
    // Instantiate the router
    var app_router = new AppRouter;
    app_router.on('route:getPost', function (menukeuze) {
        // Note the variable in the route definition being passed in here
        if (menukeuze == 'Welkom') { MakeRequest_goto(menukeuze); }
        if (menukeuze == 'Dogs1') { MakeRequest_goto(menukeuze); }
        if (menukeuze == 'Dogs2') { MakeRequest_goto(menukeuze); }
    });
    app_router.on('route:defaultRoute', function (actions) {
        MakeRequest_goto('Welkom');
    });
    // Start Backbone history a necessary step for bookmarkable URL's
    Backbone.history.start();

function MakeRequest_goto (ganaarpagina) {
                    $(document).ready(function() {
                    $('#div-main-content').fadeOut(function() { $.ajaxSetup( {
                    cache: false,
                    beforeSend: function() {
                    $('#div-main-content').fadeOut();
//                $('#content').hide();
//                $('#loading').show();
                    },
                    complete: function() {
//                $('#loading').hide();
//                $('#content').show();
                    },
                    success: function() {
//                $('#loading').hide();
                  $('#div-main-content').fadeIn();
//                  $('#div-main-content').show();
            }
        });
                    var $container = $("#div-main-content");
            //        $container.load(MakeRequest);
                    alert ("Loading: " + "page_" + ganaarpagina + ".php");
                            $container.load("page_" + ganaarpagina + ".php");
                }); }); } 
```

我通过以下方式调用这些路线：

```
<td>
 <a href="#/menu/Welkom" >
 <img src="images/test1.png" />
 </td>

<td>
 <a href="#/menu/Dogs1" >
 <img src="images/test2.png" />
</td>

<td>
 <a href="#/menu/Dogs2" >
 <img src="images/test3.png" />
</td> 
```

当我在浏览器中输入[http://link.nl/#/menu/Welkom](http://link.nl/#/menu/Welkom)时，我得到了一个完美的页面，但 url 丢失了 #。当我刷新页面时，网络服务器说：找不到请求的 URL。（这是因为 URL 从带“#”变为不带“#”。）当我单击其中一个 href 时，它永远不会起作用，我收到一个：GET [http://link.nl/Welkom?_=1365638638131](http://link.nl/Welkom?_=1365638638131) 404（未找到）

如何通过这些路由 URL 加载 ajax？我已经尝试了以下站点的设置和信息，但没有帮助：

[http://thomasdavis.github.io/examples/restful-app/](http://thomasdavis.github.io/examples/restful-app/)

[http://jsfiddle.net/ambiguous/xkZtB/](http://jsfiddle.net/ambiguous/xkZtB/)

[骨干路由器侦听器未命中哈希标记](https://stackoverflow.com/questions/13101905/backbone-router-listener-not-hitting-hash-tag)

我尝试了更多，但最终结果相同，或者没有任何“完整信息”。我希望有人看到我的问题？我正在使用的浏览器是：OSX 上的 Chrome v26。

我使用的java脚本是：

```
<script src="http:////ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http:////ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
<script src='http://underscorejs.org/underscore-min.js'></script>
<script src='http://documentcloud.github.io/backbone/backbone-min.js'></script> 
```

当我浏览到[http://link.nl/](http://link.nl/)站点时，默认路由正在工作。Link.nl 不是一个真实的站点，仅作为示例。问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:17:42.870

尝试以 pushState 为 true 启动 Backbone.history：

```
Backbone.history.start({pushState: "pushState" in window.history}); 
```

（该测试仅对兼容的浏览器启用 pushState。您可以手动将其设置为 true 或 false。请参阅[此处](http://backbonejs.org/#History)的文档）

这将强制 url 始终没有 hashbang (#!/)。如果您总是想要它，请将其设置为 false。

现在，对于您的 404 错误，这是因为当您加载“真实”网址（link.nl/menu/Welkom）时，您的网络服务器（apache、nginx 等）将搜索此文件（静态文件或通过 url 重写虚拟一个）。由于找不到它（因为您希望它只存在于前端客户端，通过 Backbone），它会在向您显示页面之前返回 404 错误。

为了避免 404，您可以设置一个 url 重写规则，该规则将为您想要的任何 url 加载包含您的 javascript 的特定页面。

# ruby-on-rails - 控制台日志中不同颜色条目之间有什么区别？

> ID：15938649
> 
> 赞同：0
> 
> 时间：2013-04-11T00:06:43.753
> 
> 标签：ruby-on-rails, ruby

洋红色和浅绿色日志条目之间有什么区别？

![在此处输入图像描述](https://i.stack.imgur.com/0OY4k.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:09:09.427

更容易区分单独的查询。

那里有八个查询。我一眼就能确定这一点，而无需拖动手指并单独数数。

这是[来源](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/log_subscriber.rb#L53-74)。颜色在第 53 行分配，在第 72 行交替。

颜色在[此文件](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/log_subscriber.rb#L36-L49)中定义。

# python - 非线性十六进制响应的整数

> ID：15938653
> 
> 赞同：0
> 
> 时间：2013-04-11T00:07:15.960
> 
> 标签：python, hex

我正在通过串行与 PLC 交谈，他们的规范没有描述从十六进制响应中获取值的任何公式。我正在编写一个 Python 脚本来处理响应。

我相信最终结果是一个有符号整数，在 C++ 中是“短”，并且规范在 SEND 消息中提到了 LSB/MSB，但我不确定这是否适用于响应。

以下是我正在使用的一些价值观：

```
18 FD = -744
20 FF = -224
07 00 = 7    (parsed OK)
0A 00 = 10   (parsed OK)
64 00 = 100  (parsed OK)
36 01 = 310  (parsed OK)
B0 04 = 1200 (parsed OK)
A4 06 = 1700 (parsed OK) 
```

目前我的计算正确解析为`FF 00`，但不知道正确的公式意味着 255 以上的值仍然是个谜。

编辑：写完问题后，它变得很明显。十六进制字节需要反转。现在负值是未知的。

如果需要，可以在**[此处](http://www.unitronics.com/Data/Uploads/communication/Unitronics%20PCOM%20Protocol.pdf)**找到规范。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:16:31.587

负数似乎是使用[二进制补码编码的](http://en.wikipedia.org/wiki/Two%27s_complement)。粗略地说，如果设置了数字的最高有效位，则必须减去 2^16 才能获得“真实”值。

# javascript - 未捕获的 SyntaxError：意外的令牌 i

> ID：15938654
> 
> 赞同：2
> 
> 时间：2013-04-11T00:07:48.157
> 
> 标签：javascript, json, syntax-error, special-characters, token

```
a = JSON.parse('["<input class="image" type="file" name="%simg_%d"/>"]'); 
```

给出上述错误。有人可以解释为什么吗？`%s`json/javascript中某种特殊字符串的开头是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:09:20.250

您不会转义引号，因此您会不断进出导致无效 JSON 的字符串

```
JSON.parse('["<input class=\\"image\\" type=\\"file\\" name=\\"%simg_%d\\"/>"]'); 
```

# c - 二维字符数组内存错误

> ID：15938657
> 
> 赞同：1
> 
> 时间：2013-04-11T00:08:09.987
> 
> 标签：c, pointers

您好我在显示二维字符数组时遇到问题。

下面是生成数据的函数，下面的函数将使用这些数据。它接受一个输入并创建一个 2d 字符数组的标记。从在 VS2012 中观察，这可以正常工作。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:40:21.953

进一步 chris 的评论（参考：[Can a local variable's memory be access outside its scope?](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)），我觉得要让你的程序正常工作，你需要重新考虑`tokens`in`TokStr`函数的分配。

您可以将此声明修改`char *tokens[10];`为以下代码。通过此更改，您的代码应该可以正常工作。

```
char **tokens;
tokens = malloc(10 * sizeof(char *)); 
```

# javascript - 如何在 VBScript 中引用 Photoshop 文件夹对象

> ID：15938658
> 
> 赞同：2
> 
> 时间：2013-04-11T00:08:10.097
> 
> 标签：javascript, vbscript, automation, photoshop-script

使用[Adob​​e PhotoShop CS4 脚本](http://www.adobe.com/devnet/photoshop/scripting.html)，JavaScript 提供`File`和`Folder`类，但我不知道如何从 VBScript 使用这些类。

目前我使用这样的`DoJavaScript`功能：

```
Set appRef = CreateObject("Photoshop.Application")
jsCode = Array(_
    "var inFolder = Folder.selectDialog('Select a folder to process');",_
    "if(inFolder != null){",_
    "  var fileList = inFolder.getFiles(/\.(jpg|jpeg|tif|)$/i);",_
    "  var outFolder = new Folder(decodeURI(inFolder) + '/Edited');",_
    "  if (outFolder.exists == false) outFolder.create();",_
    "  for(var i = 0 ;i < fileList.length; i++){",_
    "    var doc = open(fileList[i]);",_
    "    doc.flatten();",_
    "    var docName = fileList[i].name.slice(0,-4);",_
    "    var saveFile = new File(decodeURI(outFolder) + '/' + docName + '.png');",_
    "    SavePNG(saveFile);",_
    "    activeDocument.close(SaveOptions.DONOTSAVECHANGES);",_
    "  }",_
    "}",_
    "function SavePNG(saveFile){",_
    "  pngSaveOptions = new PNGSaveOptions();",_
    "  pngSaveOptions.embedColorProfile = true;",_
    "  pngSaveOptions.formatOptions = FormatOptions.STANDARDBASELINE;",_
    "  pngSaveOptions.matte = MatteType.NONE;",_
    "  pngSaveOptions.quality = 1;",_
    "  pngSaveOptions.PNG8 = false;",_
    "  pngSaveOptions.transparency = true;",_
    "  activeDocument.saveAs(saveFile, pngSaveOptions, true, Extension.LOWERCASE);",_
    "}")
appRef.DoJavaScript(Join(jsCode, vbNewLine)) 
```

我的问题是：我可以**直接从我的 VB 脚本****中使用`Folder`和类吗？`File`** 就像是：

```
Set psFolder = appRef.Folder
inputFolder  = psFolder.selectDialog("Select a folder to process") 
```

当我尝试这个时，`appRef.Folder`返回这个错误：

> 对象不支持此属性或方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-09T13:09:12.437

在 VBscript 中，您可以使用 FileSystemObject 访问文件夹：

```
'1.a - user browse for folder
Set objShell  = CreateObject( "Shell.Application" )
Set objFolder = objShell.BrowseForFolder( 0, "Select Folder", 0, myStartFolder )
'1.b - or use a fixed one
sFolder = "C:\foo\anyFolder\"
Set fs = CreateObject("Scripting.FileSystemObject")
Set objFolder = fs.GetFolder(sFolder)

'parse the content of the folder
Set oChildren = objFolder.SubFolders
ReDim aList(oChildren.Count)
For i = 1 To oChildren.Count
    aList(i) = oChildren.Item(i).Name
Next 
```

# entity-framework - 微风可以从 Ef 配置类中获取验证规则吗？

> ID：15938659
> 
> 赞同：0
> 
> 时间：2013-04-11T00:08:10.690
> 
> 标签：entity-framework, entity-framework-4, data-annotations, breeze

我想知道是否必须将 DataAnnotations 用于breathjs ef 元数据提供程序才能正确获取每个实体的所有配置？或者，是否可以避免使用任何约定或数据注释，而是为每个具有显式映射和配置的实体配置一个映射类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T05:19:56.537

你有几个选择：

1) 您可以在客户端或服务器上自己定义元数据，而不是从 EF 元数据生成。 [请参阅此处的微风元数据讨论](http://www.breezejs.com/documentation/breeze-metadata-format)

2）您可以在客户端上定义相同的元数据。请参阅 MetadataStore addEntityType 方法。

3) 除了上述两个选项中的任何一个，您还可以使用 JsonResultsAdapter 重新解释从任何 Web 服务调用返回的任何 json 结果。我们将在下周左右发布一个这样的例子。默认情况下，这是为您完成的，但您可以拦截该过程。

4) 混合使用，其中一些实体通过来自服务器的元数据定义，一些来自客户端元数据也是可能的。同样，您可以选择为仅选定的查询实现 JsonResultsAdapter 并为其余查询使用默认值。

希望这可以帮助。

# actionscript-3 - 应用程序在发布为有效时不起作用。漏洞？

> ID：15938661
> 
> 赞同：0
> 
> 时间：2013-04-11T00:08:28.137
> 
> 标签：actionscript-3

我很久以前就在开发一个应用程序，我从来没有发布过它，但我仍在编码它。我正在开发flash builder，调试时一切都很完美，导出时我只能看到舞台背景的颜色。由于我无法在调试器之外使用 Trace，因此我将所有类都转换为 Sprite，以通过显示文本字段来检查问题的来源。

但我还是无法理解。这没关系（在调试器中并已发布）：

```
b = new TextField;       
b.text = "Mytext";      
addChild(b);      
var fetch:Fetch_Tiles = new Fetch_Tiles(arr, "Ground", "Tiles"); 
```

这不行（当然，在调试器中一切正常）：

```
var fetch:Fetch_Tiles = new Fetch_Tiles(arr, "Ground", "Tiles");
b = new TextField;    
b.text = "Mytext";    
addChild(b); 
```

而且，当我说“不好”时，意味着我的文字没有显示。以及我的应用程序的整个以下部分（所以，什么都没有）。

我不得不猜测那个 Fetch_Tiles 对象有一个错误，调试器接受了这个错误，但在发布时没有（？？？）。

但是，更糟糕的是，当尝试在我的 Fetch_Tiles 的构造函数中显示此文本时，如下所示：

```
private var b:TextField;
function Fetch_Tiles($names:Array, $dir:String, $sub:String) {
    b = new TextField;
    b.text = "Mytext";
    addChild(b);
... 
```

同样，它适用于调试，而不适用于有效。

谁能给我解释一下？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:40:51.670

感谢 shaunhusain，我发现问题出在哪里，这不是错误（当然不是），但我的浏览器从未向我显示异常 #2148。我不知道为什么，但我的应用程序即使在本地也不被信任来加载数据......我可以使用编译器中的这个 hack -use-network=false 来摆脱这个异常。

[http://curtismorley.com/2007/08/31/flash-cs3-flex-2-as3-error-2148/](http://curtismorley.com/2007/08/31/flash-cs3-flex-2-as3-error-2148/)

# assembly - 是否有价格低廉、成熟且产生高质量结果的 ARM 反编译器？

> ID：15938663
> 
> 赞同：4
> 
> 时间：2013-04-11T00:08:31.867
> 
> 标签：assembly, arm, decompiling, decompiler

我正在寻找反编译器（将二进制/asm 转换为 C/伪代码）。

我知道 IDAPro 反编译器，但它真的很贵。

另外，我知道[Hopper](http://www.hopperapp.com/)，但它的 ARM 反编译器还没有准备好迎接黄金时段。

你在外面看到什么了吗？

**更新**

[Boomerang](http://boomerang.sourceforge.net/index.php) - 不支持 ARM

[vm64dec](https://code.google.com/p/vm64dec/downloads/list) - 不支持 ARM

PS 我对谷歌很熟悉 :) 然而，谷歌的大部分结果都是 x86 反编译器（而不是 ARM）。此外，谷歌无法判断反编译结果是否不错。

# javascript - jQuery，仅从 id 中选择数字，例如“article-23”

> ID：15938664
> 
> 赞同：0
> 
> 时间：2013-04-11T00:08:32.393
> 
> 标签：javascript, jquery, html

好吧，我有一个 div 标签，它有一个`class="blog-post"`和 id 类似的`id="article-23"`（其中“23”可以是任何数字，因为它是数据库中博客文章的 id）。我需要以某种方式从该 id 中获取一个数字，而不是对该 div 标签应用一些规则。所以说：

```
if number from id % 2 == 0 {
  set text colour black to associated div tag with class of blog-post
} else {
  set text colour white to associated div tag with class of blog-post
} 
```

这只是一个“伪”代码，用于显示如果来自 id 的数字是偶数或奇数，我不想应用依赖的逻辑，但问题仍然相同，我如何从 id 中获取数字，如“article-23”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:12:38.857

您实际上可以通过函数应用规则，这使得这是最干净的解决方案（在我看来）：

```
$(".blog-post").css('color', function () {
    return +this.id.replace('article-', '') % 2 ? 'blue' : 'red';
}); 
```

[http://jsfiddle.net/ExplosionPIlls/Jrc5u/](http://jsfiddle.net/ExplosionPIlls/Jrc5u/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:10:52.543

简单到

```
var number = "article-23".match(/\d+/)[0]; 
```

但是你必须确保字符串中存在任何数字，否则你会得到一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:13:49.823

作为替代方案，HTML5 支持这些称为“数据属性”的东西，它们专门用于将数据附加到您的 DOM，而不会滥用诸如“类”或“id”属性之类的东西。jQuery 提供了一种方便的`.data`方法来以更明显的方式读取这些属性。

您可以使用“data-id”之类的内容添加自己的数字 ID 属性：

```
<div class="blog-post" data-id="23" /> 
```

```
$("#blog-post").each(function () {
  console.log($(this).data("id")); // Look up the data-id attribute
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T00:14:25.853

如果我理解正确，您需要 .blog-post 类的 id 标签的连字符后的数字。

```
var article = $(".blog-post").attr('id'); //get the id
var article = article.split("-");  // split it on hyphens
return article = article[article.length-1];  // return the last element 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T02:43:09.417

尝试这个：

```
$('.blog-post[id^="article-"]').each(function () {
    if (parseInt(this.id.replace('article-', '')) % 2 === 0) {
        $('#' + this.id).css('color', 'black');
    } else {
        $('#' + this.id).css('color', 'white');
    }
}); 
```

[jsFiddle 演示](http://jsfiddle.net/Class/VPH55/1/)

# javascript - 调整 iframe 的大小，其中包含对象标签

> ID：15938666
> 
> 赞同：2
> 
> 时间：2013-04-11T00:08:52.867
> 
> 标签：javascript, html, pdf, object-tag

标题说明了一切。我已经尝试了所有方法，但是 iframe 中的内容一直在报告 iframe 本身的高度。

我什至在 iframe 中嵌入的 html 中添加了一个 javascript 函数，该函数执行以下操作：

警报（$（文档）.height（））；

它始终显示高度为 150 像素，恰好是初始加载时 iframe 的大小。我认为问题在于 iframe 有一个显示 pdf 的对象标签。从视觉上看，pdf 显然比 iframe 高，所以我希望文档高度可以相应地设置，但事实并非如此。

为什么会发生这种情况，我究竟如何获得内容的*实际*高度？在什么情况下会需要这种行为？

最终，我*要做*的是打印带有标题的 PDF。我正在调用 window.print() 的 iframe 中调用打印函数。我发现 PDF 的打印长度是正确的（打印预览将显示 3 页），但实际显示仅显示 iframe。换句话说，打印预览的第一页将显示 iframe，但第二页和第三页将是空白的，因为 iframe 没有那么高，只有嵌入的 PDF。

我的方法是使 iframe 达到必要的全高，打印，然后将高度重置为正常所需的高度。但是 iframe 中的文档高度始终被报告为 iframe 本身的高度。

我正在使用 Chrome 进行测试。

# class - MVVM 视图模型命名

> ID：15938668
> 
> 赞同：2
> 
> 时间：2013-04-11T00:09:02.280
> 
> 标签：class, mvvm, viewmodel, naming

我将视图命名为“SelectMethod”等操作。想知道，将关联的视图模型命名为“SelectMethodViewModel”是否有意义，或者它不应该在命名中使用操作（即选择）？我在想课程应该是这样的事情，所以这个动作没有意义还是我在想这个？我知道这是一个简单的问题，但它在应用程序中产生了涓涓细流的影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:12:51.643

我肯定会继续为您的 and 使用相同的`View`名称`ViewModel`。事实上，我会更进一步并添加`View`到`SelectMethod`.

这基本上保证了我们知道这两个类的关系和用途。

```
TestView
TestViewModel 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:14:01.353

`SelectMethod`不是视图的好名字。方法不是类，但视图是类，因此视图不是方法。我会建议：

```
SelectionView
SelectionViewModel 
```

# highcharts - 当我悬停另一个元素时，如何防止出现工具提示？

> ID：15938672
> 
> 赞同：0
> 
> 时间：2013-04-11T00:09:20.343
> 
> 标签：highcharts

我正在开发一个有 2 个样条和 2 个散点的图表。我使用默认的工具提示格式化程序来展示基于样条数据的工具提示。但是，尽管我隐藏了默认工具提示，但当我悬停散点图时，在显示散点图之前，它似乎再次触发了。

如何防止触发默认工具提示？

ps：我使用的是 Highcharts 3.0.1

已编辑：我尝试了“chartObj.tooltip.enabled = false”，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:01:01.927

如果您不想在图表中显示特定系列的工具提示，请查看是否设置

```
enableMouseTracking: false 
```

在你想要的系列的属性上做到这一点。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T00:34:40.877

我用这段代码解决了：

```
chartObj.tooltip.options.enabled = false; 
```

悬停时设置为“false”，鼠标悬停时设置为“true”。

# c++ - c++，位图不显示？

> ID：15938675
> 
> 赞同：1
> 
> 时间：2013-04-11T00:09:37.083
> 
> 标签：c++, winapi, bitmap

单击鼠标左键时不会显示位图。我正在使用visual c++ express

```
HDC DC, memDC;

switch(message) {
case WM_CREATE:
        hBit1 = LoadBitmap(hInst, "C:\New folder (2)\MyBP1.bmp");
        break;

case WM_LBUTTONDOWN:
            DC = GetDC(hwnd);
            memDC = CreateCompatibleDC(DC);
        SelectObject (memDC, hBit1);
        BitBlt(DC, LOWORD(lParam), HIWORD(lParam), 27, 59, memDC, 0, 0, SRCCOPY);
        ReleaseDC(hwnd, DC);
        DeleteDC(memDC);
        break; 
```

我不确定代码到底有什么问题。Visual c ++ express中没有显示错误如果代码都错了，有人会指出我正确的方向吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T03:50:41.023

`LoadBitmap`仅用于加载作为资源存储在可执行文件或 DLL 中的位图。

要从 BMP 文件加载位图，您需要使用`LoadImage`标志`LR_LOADFROMFILE`，如下所示：

```
bmp = (HBITMAP)LoadImage(0, filename, IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE); 
```

顺便说一句，您可能真的不想直接显示以响应`WM_LBUTTONDOWN`. 相反，您通常想要记录位置，可能设置一个标志来指示应该显示位图，并调用`InvalidateRect`使您的客户矩形无效 - 然后执行实际绘图以响应`WM_PAINT`.

# python - 如何在 Python 中抑制 SyntaxWarning？

> ID：15938676
> 
> 赞同：3
> 
> 时间：2013-04-11T00:09:38.580
> 
> 标签：python, warnings, suppress-warnings

如何在 Python 中抑制 SyntaxWarning？

这是生成警告的代码行。

```
def myfunction():
    from myimportfile import * 
```

请注意：

> 1.  在函数之外导入文件不是一种选择。导入工作。无论如何，它只是抛出一个 SyntaxWarning。
>     
>     
> 2.  **warnings.simplefilter('ignore')**将不起作用，因为警告是在代码实际运行之前生成的

例如，

```
 def myfunction():
    print 'trace 1'
    from myimportfile import *
    print 'trace 2' 
```

将输出

```
SyntaxWarning  
trace1  
trace2 
```

并不是

```
trace1  
SyntaxWarning  
trace2 
```

那么，如何禁用警告呢？
是否可以单独禁用此特定代码行的警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:50:26.760

你试图做的不仅是一个坏主意，而且是非法的。正如[文档](http://docs.python.org/2/reference/simple_stmts.html#the-import-statement)所说：

> with的`from`形式`*`只能出现在模块范围内。如果在函数中使用通配符形式的 import — `import *`— 并且该函数包含或者是具有自由变量的嵌套块，编译器将引发 SyntaxError。

在过渡版本期间（在我的脑海中，在这种情况下，我认为这是 2.6、2.7 和 3.0，但不要引用我的话）该错误可能是一个警告。但是，如果您升级到更高版本，或者可能只是使用同一版本的不同实现，您将得到一个实际错误。（对于更高版本：您肯定会在 CPython 3.3 中遇到错误。对于同一版本的不同实现：我使用 PyPy 1.9.0 beta 和 PyPy 1.9.0 final 进行了测试，它们都实现了 Python 2.7；beta 打印出 3 个警告然后引发异常，最后会在屏幕上水平分散 3 个警告，然后再打印 3 个正常警告。）

如果可能，您应该执行以下一项（或多项）操作：

*   将导入移动到模块级别。
*   `from myimportfile import foo, bar`而不是`*`.
*   `import myimportfile`然后通过限定名称使用所有内容。

如果您绝对必须将所有内容`myimportfile`导入您的函数`locals`范围，那么您最好想出一种不合法的hacky方法，而不是解决警告的hacky方法。例如：

```
import myimportfile
locals().update(myimportfile.__dict__) 
```

这个简单的版本没有完全相同的效果，但你可以尽可能接近。例如，要进行通常的限制，`name in myimportfile.__all__`如果存在则过滤，或`not name.startswith('_') or name.startswith('__') and name.endswith('__')`. 或者，如果您使用的是 3.1 或更高版本，请使用`importlib`而不是手动执行。

# php - 如何在 CodeIgniter URL 中的参数后引用函数？

> ID：15938680
> 
> 赞同：1
> 
> 时间：2013-04-11T00:10:07.150
> 
> 标签：php, codeigniter, codeigniter-routing

我想要的 Web 应用程序部分的 URL 结构如下：
`/user/FooBar42/edit/privacy`，我希望它路由到控制器：用户，函数：编辑，使用`FooBar42`和`privacy`作为参数（按此顺序）。**我应该如何使用 CodeIgniter 完成此任务？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:16:04.957

定义这[条路线](http://ellislab.com/codeigniter/user-guide/general/routing.html)应该`application/config/routes.php`有效：

```
$route['user/(:any)/edit/(:any)'] = "user/edit/$1/$2"; 
```

但是，请注意，`(:any)`在上述路线中会匹配多个段。例如，`user/one/two/edit/three`将调用控制器`edit`中的函数，`user`但仅`one`作为第一个参数和`two`第二个参数传递。

`(:any)`用正则表达式替换`([a-zA-Z0-9]+)`将只允许一个*长度至少为 1 的字母数字值*。这缓解了上述问题，其中`/`允许允许多个段。现在，如果`user/one/two/edit/three`使用，将显示 404 页面。

```
$route['user/([a-zA-Z0-9]+)/edit/([a-zA-Z0-9]+)'] = "user/edit/$1/$2"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:33:54.127

您还可以使用 CI 控制器的重新映射选项

[http://ellislab.com/codeigniter/user-guide/general/controllers.html#remapping](http://ellislab.com/codeigniter/user-guide/general/controllers.html#remapping)

并做这样的事情：

```
public function _remap($method, $params = array())
{
    // check if the method exists
    if (method_exists($this, $method))
    {
        // run the method
         return call_user_func_array(array($this, $method), $params);
    }
    else
    {
     // method does not exists so you can call nay other method you want
     $this->edit($params);
    }
} 
```

# image - FFMPEG 找不到任何匹配正则表达式的文件

> ID：15938685
> 
> 赞同：0
> 
> 时间：2013-04-11T00:10:41.953
> 
> 标签：image, video, ffmpeg, video-codecs

我想将 40 张图像序列转换为视频。问题是 ffmpeg 在命令中找不到与正则表达式匹配的任何输入图像。请问我做错了什么？

我运行了以下命令：

```
> ffmpeg -f image2 -i "img%0d.jpg" -vcodec mpeg4 -y -v "verbose" 07_seq_wire.avi 
*** THIS PROGRAM IS DEPRECATED ***
This program is only provided for compatibility and will be removed in a future release.    Please use avconv instead.
img%0d.jpg: No such file or directory

> ls -l
-rw-r--r-- 1 david david  69812 Apr 11 01:54 img01.jpg
-rw-r--r-- 1 david david  70858 Apr 11 01:54 img02.jpg
-rw-r--r-- 1 david david  71481 Apr 11 01:54 img03.jpg
-rw-r--r-- 1 david david  71528 Apr 11 01:54 img04.jpg
-rw-r--r-- 1 david david  71470 Apr 11 01:54 img05.jpg
-rw-r--r-- 1 david david  71534 Apr 11 01:54 img06.jpg
-rw-r--r-- 1 david david  70908 Apr 11 01:54 img07.jpg
-rw-r--r-- 1 david david  70633 Apr 11 01:54 img08.jpg
-rw-r--r-- 1 david david  70059 Apr 11 01:54 img09.jpg
-rw-r--r-- 1 david david  70021 Apr 11 01:54 img10.jpg
-rw-r--r-- 1 david david  69726 Apr 11 01:54 img11.jpg
-rw-r--r-- 1 david david  70896 Apr 11 01:54 img12.jpg
-rw-r--r-- 1 david david  72123 Apr 11 01:54 img13.jpg
-rw-r--r-- 1 david david  72605 Apr 11 01:54 img14.jpg
-rw-r--r-- 1 david david  73501 Apr 11 01:54 img15.jpg
-rw-r--r-- 1 david david  73743 Apr 11 01:54 img16.jpg
-rw-r--r-- 1 david david  74401 Apr 11 01:54 img17.jpg
-rw-r--r-- 1 david david  74697 Apr 11 01:54 img18.jpg
-rw-r--r-- 1 david david  75371 Apr 11 01:54 img19.jpg
-rw-r--r-- 1 david david  74802 Apr 11 01:54 img20.jpg
-rw-r--r-- 1 david david  74802 Apr 11 01:55 img21.jpg
-rw-r--r-- 1 david david  75371 Apr 11 01:55 img22.jpg
-rw-r--r-- 1 david david  74697 Apr 11 01:55 img23.jpg
-rw-r--r-- 1 david david  74401 Apr 11 01:55 img24.jpg
-rw-r--r-- 1 david david  73743 Apr 11 01:55 img25.jpg
-rw-r--r-- 1 david david  73501 Apr 11 01:55 img26.jpg
-rw-r--r-- 1 david david  72605 Apr 11 01:55 img27.jpg
-rw-r--r-- 1 david david  72123 Apr 11 01:55 img28.jpg
-rw-r--r-- 1 david david  70896 Apr 11 01:55 img29.jpg
-rw-r--r-- 1 david david  69726 Apr 11 01:55 img30.jpg
-rw-r--r-- 1 david david  70021 Apr 11 01:55 img31.jpg
-rw-r--r-- 1 david david  70059 Apr 11 01:55 img32.jpg
-rw-r--r-- 1 david david  70633 Apr 11 01:55 img33.jpg
-rw-r--r-- 1 david david  70908 Apr 11 01:55 img34.jpg
-rw-r--r-- 1 david david  71534 Apr 11 01:55 img35.jpg
-rw-r--r-- 1 david david  71470 Apr 11 01:55 img36.jpg
-rw-r--r-- 1 david david  71528 Apr 11 01:55 img37.jpg
-rw-r--r-- 1 david david  71481 Apr 11 01:55 img38.jpg
-rw-r--r-- 1 david david  70858 Apr 11 01:56 img39.jpg
-rw-r--r-- 1 david david  69812 Apr 11 01:56 img40.jpg 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:21:45.493

尝试更改`img%0d.jpg`为`img%2d.jpg`.

当我这样做时，它对我有用。

您必须使用 设置比特率`-b:v 1024K`，或使用 设置质量级别`-q:v 2`（范围从 1 到 31，2-5 是明智的选择）来更改输出质量。如果不指定任何内容，默认比特率将非常低并导致视觉质量不佳。

# javascript - Skrollr 样式表在 IE 中不起作用

> ID：15938690
> 
> 赞同：0
> 
> 时间：2013-04-11T00:11:06.233
> 
> 标签：javascript, jquery, html, css

尽管它提到 Skrollr 样式表与 IE 8+ 兼容，但我似乎无法在我的网站上使用。[http://group.com/good-to-go-training](http://group.com/good-to-go-training)。在 Chrome、Firefox 和 Safari 中运行良好。

供参考：[https ://github.com/Prinzhorn/skrollr-stylesheets](https://github.com/Prinzhorn/skrollr-stylesheets)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:56:50.133

测试现在通过了 IE 8。请获取最新版本并确保阅读更新日志！[https://github.com/Prinzhorn/skrollr-stylesheets#002](https://github.com/Prinzhorn/skrollr-stylesheets#002)

# sql - 在更新语句上使用输出子句时出现奇怪的错误？

> ID：15938691
> 
> 赞同：3
> 
> 时间：2013-04-11T00:11:07.030
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-update

首先，根据我的经验，很多人不熟悉输出。如果是这样，此链接非常方便：[SQL Server 的隐藏功能](https://stackoverflow.com/questions/121243/hidden-features-of-sql-server/1243721#1243721)

我有以下更新声明：

```
UPDATE  lease_deal.lease_budget
SET     change_type = NULL 
OUTPUT  inserted.*
WHERE   ISNULL(change_type, '') = '' 
```

虽然我认为这会为我返回更新的记录，但我收到以下错误：

> 消息 334，级别 16，状态 1，第 9 行 如果该语句包含没有 INTO 子句的 OUTPUT 子句，则 DML 语句的目标表“lease_deal.lease_budget”不能有任何启用的触发器。

我知道我可以成功地创建一个临时表并使用输出语句将更新的记录重定向到那里，但是为什么我不能将它返回到 IDE？我确定（确定）我以前能够做到这一点，但似乎无法在任何地方找到合适的例子来帮助我理解我做错了什么。当您正在更新的列上有触发器时，这根本不可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T01:34:42.723

这个

[http://msdn.microsoft.com/en-au/library/ms177564.aspx](http://msdn.microsoft.com/en-au/library/ms177564.aspx)

说这个

如果在未指定 INTO 关键字的情况下指定了 OUTPUT 子句，则 DML 操作的目标不能在其上为给定的 DML 操作定义任何启用的触发器。例如，如果在 UPDATE 语句中定义了 OUTPUT 子句，则目标表不能有任何启用的 UPDATE 触发器。

# iphone - 摆脱 UITabBar 上的白色条带

> ID：15938695
> 
> 赞同：2
> 
> 时间：2013-04-11T00:11:29.423
> 
> 标签：iphone, ios, uitabbar

我已经对此进行了研究，但仍然无法弄清楚 UITabBar 上的白色光泽条的正确词是什么。我在谷歌上搜索了很多关于如何去除这种光泽的东西，但找不到任何东西。有关我正在谈论的内容的参考，请参阅此图片：

![标签栏的图像](https://i.stack.imgur.com/AabOI.png)

我真的希望我在这里遗漏了一些简单的东西，并且不要过度思考这个......

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T02:18:00.100

看看这些代码是否对您有帮助。这都可以在 Apple Docs 中找到。[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBar_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBar_Class/Reference/Reference.html)

```
// custom icons
UITabBarItem *item = [[UITabBarItem alloc] init];
item.title = @"foo";
// setting custom images prevents the OS from applying a tint color
[item setFinishedSelectedImage:[UIImage imageNamed:@"tab1_active.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"tab1_image_deselected.png"]];
tab1ViewController.tabBarItem = item;

// tab bar

// set background image - will be used instead of glossy black
tabBarController.tabBar.backgroundImage = [UIImage imageNamed:@"tab_bar_bg.png"];
// optionally set the tint color - setting this ti nil will result in the standard, blue tint color. tint color is ignored when custom icons are set as above.
tabBarController.tabBar.selectedImageTintColor = nil;
// remove the highlight around the selected tab - or provide an alternate highlight image. If you don't do this the iOS default is to draw a highlighted box beneath the selected tab icon.
tabBarController.tabBar.selectionIndicatorImage = [[UIImage alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:13:34.790

只需自定义标签栏，一切都会修复。如果需要可以给你一些源代码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T02:16:00.987

没问题，只需给 UITabBar 一个自定义背景视图 ( `backgroundImage`)。

仅当您使用默认样式或色调时，才会出现光泽。如果您设置`backgroundImage`，则光泽被带走，整个事情都由您决定。

# java - 启动错误：选择不包含主要类型

> ID：15938697
> 
> 赞同：0
> 
> 时间：2013-04-11T00:11:49.680
> 
> 标签：java, types, main, launch

所以我有一个任务要做，它在西班牙，但我希望它没问题。问题是我按照他们给我的说明做了所有事情，当我尝试用 eclipse 运行它时，它说“选择不包含主要类型”我不知道该怎么做，因为在我的说明中他们没有说要放“ main (string ...etc." 这是我的代码：BTW TelemetriaEstado 和 CoordenadaEcuatorial 都是他们给我的两个类，所以它们不应该是问题：package es.upm.dit.prog.p3;

公共类 GestorTelemetrias {

```
 final int N_MAX_TELEMETRIAS = 5;
    private TelemetriaEstado [] telemetriasAlmacenadas;
    private int totalTMalmacenadas;

    /**
     * construcor de la clase GestorTelemetrias. Inicia el objeto.
     */
    public GestorTelemetrias () {
        totalTMalmacenadas = 0;
        telemetriasAlmacenadas = new TelemetriaEstado [N_MAX_TELEMETRIAS];

    }

    /**
     * Metodo que guarda 5 telemetrias de estado, sin que se repitan y ignorando las de valor null.
     */
    public void setTelemetrias (TelemetriaEstado [] telemetrias) throws NullPointerException {
        if (telemetrias == null)
            throw new NullPointerException (); //aseguramos no guardar ninguna telemetria con valor null. 

        totalTMalmacenadas = 0; //ponemos el contador de telemetrias almacenadas a 0.
        for (int i=0; i < telemetrias.length; i++) {
            if (telemetrias[i] != null) {
                telemetriasAlmacenadas [totalTMalmacenadas++] = telemetrias[i];
            }
            if (totalTMalmacenadas == N_MAX_TELEMETRIAS) break;
        }
    }

    public TelemetriaEstado[] getTelemetrias ()  {
        TelemetriaEstado [] telemetrias = new TelemetriaEstado [totalTMalmacenadas];
        for (int i=0; i < totalTMalmacenadas; i++) {
            telemetrias [i] = telemetriasAlmacenadas[i];
        }
    return telemetrias;
    }

    public void insertarTelemetria (TelemetriaEstado unaTelemetria) throws NullPointerException, Exception {
        if (unaTelemetria == null)
            throw new NullPointerException ();

            for (int i=0; i< totalTMalmacenadas; i++) {

                if (telemetriasAlmacenadas[i].equals(unaTelemetria)) 
                throw new Exception("La telemetria que intenta insertar ya está almacenada");

                if (!telemetriasAlmacenadas[i].equals(unaTelemetria))
                    telemetriasAlmacenadas[i] = unaTelemetria;

            }
    }
    public int obtenerNumeroTelemetrias () {
    return totalTMalmacenadas;
    } 

    public void eliminarTelemetria (TelemetriaEstado unaTelemetria) throws NullPointerException, Exception {

        if (unaTelemetria == null) throw new NullPointerException ();

        for (int i=0; i< totalTMalmacenadas; i++) {
            if (telemetriasAlmacenadas[i].equals(unaTelemetria) == true) unaTelemetria = null;

            else 
                throw new Exception("La telemetria que intenta eliminiar no existe.");
        }

    }
    public boolean estaTelemetria (TelemetriaEstado unaTelemetria) throws NullPointerException {
    if (unaTelemetria == null) throw new NullPointerException ();

    for (int i=0; i< totalTMalmacenadas; i++){
        if (telemetriasAlmacenadas[i].equals(unaTelemetria) == true)
            return true;
    }
    return false;
    }
    public double getMayorDiferenciaTemperatura () throws Exception {
        if (totalTMalmacenadas< 2) throw new Exception ("Error. Necesitamos al menos 2 telemetrias almacenadas para calcular la mayor diferencia de temperatura.");

        double diff = 0;
        for (int i=1; i< totalTMalmacenadas; i++) {
              double max = telemetriasAlmacenadas[0].getTemperatura();
              double comparacion = telemetriasAlmacenadas[i].getTemperatura();
              if (Math.max(comparacion, max) == telemetriasAlmacenadas[i].getTemperatura()) 
                  max = telemetriasAlmacenadas[i].getTemperatura();

              double min = telemetriasAlmacenadas[0].getTemperatura();
              double comparacion2 = telemetriasAlmacenadas[i].getTemperatura();
              if (Math.min(comparacion2, min) == telemetriasAlmacenadas[i].getTemperatura()) 
                  min = telemetriasAlmacenadas[i].getTemperatura();

          diff = Math.abs(max - min);
        }
          return diff;

    } 
```

}
非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:16:23.503

您提到的其他类之一是否有 main 方法？如果是这样，请尝试运行其中之一。如果没有，那么您可以尝试创建自己的 main 方法。没有 main 方法，Java 应用程序无法启动。

# powershell - 一个命令的值作为另一个命令的参数

> ID：15938700
> 
> 赞同：3
> 
> 时间：2013-04-11T00:12:02.347
> 
> 标签：powershell, exchange-server-2010

我试图弄清楚如何从一个命令中获取一个值作为另一个命令的参数，并在一个表中使用两者的输出。具体来说，我使用了两个 cmdlet，`Get-Mailbox`并且`Get-MailboxStatistics`（这是针对 Exchange 2010 服务器的）。

从`Get-Mailbox`我需要`DisplayName`和`UseDatabaseQuotaDefaults`数据库字段。除此之外，我需要从`Get-MailboxStatistics`and`TotalItemSize`字段`StorageLimitStatus`中获取。

我可以单独运行这些命令中的每一个，但无法弄清楚如何使用`DisplayName`从`Get-Mailbox`输入到`Get-MailboxStatistics`命令的标识值中的值，然后将整个批次输出到单个表中。

我正在尝试这些方面的东西：

```
get-mailbox | ForEach-Object {write-host $_.DisplayName, $_.UseDatabaseQuotaDefaults, $_.Database, Get-MailboxStatistics $_.SamAccountName} 
```

它没有将其实际处理`Get-MailboxStatistics`为命令，而是将其显示为文本。如何让 PS 将其视为命令而不是`write-host`cmdlet 的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:23:20.013

您需要使用括号，类似于以下内容：

```
get-mailbox | ForEach-Object { Write-Host ` 
    $_.DisplayName, `
    $_.UseDatabaseQuotaDefaults, `
    $_.Database, `
    (Get-MailboxStatistics $.SamAccountName) }
#   ^------- note the parentheses ---------^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:26:57.183

使用先前答案中的一些信息，结合一些谷歌搜索和我相当多的诅咒，提出了以下实际有效的脚本：

```
$mbx = Get-Mailbox

ForEach ($cur in $mbx)
{
  $stat = (Get-MailboxStatistics $cur.DisplayName)

  New-Object PSObject -Property @{
    DisplayName = $cur.DisplayName
    UseDatabaseQuotaDefaults = $cur.UseDatabaseQuotaDefaults
    SamAccountName = $cur.SamAccountName
    StorageLimitStatus = $stat.StorageLimitStatus
    TotalItemSize = $stat.TotalItemSize
    Database = $stat.Database
  }

} 
```

感谢大家！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:45:15.517

获取所有邮箱的列表，为每个邮箱分配其统计信息给一个变量，然后创建一个包含两个对象属性的自定义对象：

```
Get-Mailbox | ForEach-Object {

    $stats = $_ | Get-MailboxStatistics

    New-Object PSObject -Property @{
        DisplayName = $_.DisplayName
        UseDatabaseQuotaDefaults = $_.UseDatabaseQuotaDefaults
        Database = $_.Database
        SamAccountName = $_.SamAccountName
        TotalItemSize  = $stats.TotalItemSize
        StorageLimitStatus = $stats.StorageLimitStatus
    }
} 
```

# java - 在 Vaadin 7 中，将数据/参数传递给 BrowserWindowOpener 的新 UI 实例？

> ID：15938702
> 
> 赞同：4
> 
> 时间：2013-04-11T00:12:04.713
> 
> 标签：java, window, vaadin, vaadin7

我正在使用[BrowserWindowOpener](https://vaadin.com/api/7.0.3/com/vaadin/server/BrowserWindowOpener.html)成功打开新的浏览器窗口。

问题：如何将一些信息传递给新实例化的 UI 子类？

语法要求我指定要实例化的类。我如何与该未来实例进行通信？

```
BrowserWindowOpener bookOpener = new BrowserWindowOpener( BookUI.class ); 
```

例如，假设我的应用打开了一个窗口，其中列出了以特定字母 (AZ) 开头的单词的单词定义。如何告诉新打开的 UI 它应该显示“A”字、“B”字或“V”字？

我注意到[BrowserWindowOpenerState](https://vaadin.com/api/com/vaadin/shared/ui/BrowserWindowOpenerState.html)类，但没有记录它的使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:44:06.227

我没有尝试过，但是快速浏览一下 javadoc 表明，通过使用[BrowserWindowOpener#setParameter](https://vaadin.com/api/7.0.3/com/vaadin/server/BrowserWindowOpener.html#setParameter%28java.lang.String,%20java.lang.String%29)或[BrowserWindowOpener#setUriFragment](https://vaadin.com/api/7.0.3/com/vaadin/server/BrowserWindowOpener.html#setUriFragment%28java.lang.String%29)，您可以将参数传递到 UI。

例如

```
BrowserWindowOpener bookOpener = new BrowserWindowOpener( BookUI.class );
bookOpener.setParameter("startLetter", "A");

...

class BookUI {
  protected abstract void init(VaadinRequest request){
    String startLetter = request.getParameter("startLetter");
    // Etc
  }
} 
```

# php - Laravel3：如何检查是否有文件上传

> ID：15938703
> 
> 赞同：0
> 
> 时间：2013-04-11T00:12:10.447
> 
> 标签：php, laravel, laravel-3

我有一个带有表单的页面，用户可以在其中上传图像以替换他现有的头像。

但是，如果用户提交表单而不上传图片，我不会更新他的头像，用户可以保留他的旧头像。

这是一个更新问题，所以我需要这样的伪代码：

```
if (Input::has_uploaded_file() === true)
    //User uploaded something, update avatar column/remove old avatar etc.
else
    //User didn't upload anything so don't update avatar column 
```

不过，我只需要第一行。

有人可以帮忙吗？我在文档中找不到太多关于此的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:31:52.290

If `Input::has_file('name')` does not work for you then you can use the equivalent of what it is doing, like this...

```
if (Input::file('name.tmp_name', '') != '') 
```

*Taken from [laravel/input.php](https://github.com/laravel/laravel/blob/master/laravel/input.php#L211)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T00:21:08.477

I read laravel source code, i think its this:

```
Input::has_file('input_name'); 
```

If that's not work, try using native php:

```
$_FILES['input_name']['error'] = UPLOAD_ERR_NO_FILE; 
```

Or same above with laravel:

```
$i = Input::file('input_name');

$i['error'] = UPLOAD_ERR_NO_FILE; 
```

Code above is to check if user leave the upload form empty.

# javascript - 隐藏以前在 imagemap 上打开的文章点击？

> ID：15938704
> 
> 赞同：0
> 
> 时间：2013-04-11T00:12:25.003
> 
> 标签：javascript, jquery, imagemap

我想知道是否有人可以帮助我

[http://jsfiddle.net/zjCzc/](http://jsfiddle.net/zjCzc/)

我有这张在美国创建的区域地图，我写了

```
$(document).ready(function() {
    $(".region-box").hide();$('#Map').children('area').click(function() {
        var regionArea = $(this).attr('href').toString();
        $('.region-box' + regionArea).toggle();
        return false;
    });
}); 
```

这允许单击以在单击时显示每篇文章，但是有什么方法可以设置它以允许它隐藏已经打开的文章。

例如，当您单击东北，然后单击华盛顿。东北会自动关闭吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:24:43.850

只需添加`$('.region-box').hide();`到`.click()`回调的开头：

```
$(document).ready(function () {
    $(".region-box").hide();
    $('#Map').children('area').click(function () {
        $('.region-box').hide();
        var regionArea = $(this).attr('href').toString();
        $('.region-box' + regionArea).toggle();
        return false;
    });
}); 
```

[http://jsfiddle.net/zjCzc/1/](http://jsfiddle.net/zjCzc/1/)

# html - CSS 填充或边距问题

> ID：15938706
> 
> 赞同：1
> 
> 时间：2013-04-11T00:12:29.177
> 
> 标签：html, css, wordpress

我有一个正在开发的 WordPress 网站，似乎有一个我找不到的 CSS 问题。我安装了插件[AJAX 事件日历](http://wordpress.org/extend/plugins/ajax-event-calendar/)并将其短代码`[calendar]`放在页面编辑器中。这按预期工作，但有些东西将日历向下推到 400 多像素附近。我检查了所有包含的 div，以及日历 div。我在控制台中也没有看到任何错误。我似乎无法找到是什么推动了它。

有问题的页面可以在[这里](http://dev01.andywarren1.com/visualfaithministry/events/calendar/)看到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:21:21.507

in your custom.css file fix this:

```
 #aec-container {
position: relative;
float: none;
    } 
```

with this:

```
#aec-container {
position: relative;
float: left;
    } 
```

i tried and it works.

# android - android - 自动检测未使用的drawable

> ID：15938709
> 
> 赞同：3
> 
> 时间：2013-04-11T00:12:38.410
> 
> 标签：android, eclipse

问题：我在开发一个android应用程序时使用了很多图标和图片，后来我替换了很多，但保留了旧的，以防我需要再次使用它们。现在我的文件夹中有*大量*.png`drawable`文件，其中很多现在都没有使用，手动整理它们需要很长时间。有没有办法检测不存在引用的可绘制对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T00:51:32.597

您可以使用[Android Lint Tool](http://tools.android.com/tips/lint)，按照我提供的链接进行操作，概述如下：

*   缺少翻译（和未使用的翻译）
*   布局性能问题（旧的 layoutopt 工具用来查找的所有问题，等等）
*   ***未使用的资源***
*   等等

作为替代方案，该项目可能会帮助您（非常易于使用）：

> [https://code.google.com/p/android-unused-resources/](https://code.google.com/p/android-unused-resources/)

希望它有用...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-20T14:58:08.507

根据我的经验，Lint 不会检测到未引用的 PNG。它查找未引用的布局和可绘制的 XML 文件，例如形状和选择器，但不查找 PNG。我偶然发现了这个用于删除未引用的 PNG 可绘制对象的 Python 脚本。它适用于我的项目，但正如它的文档所说，请确保您使用源代码控制以防万一。

[https://github.com/instructure/android-ImageSweep](https://github.com/instructure/android-ImageSweep)

# acs - Azure 访问控制服务 (ACS) - ACS50001：未找到标识符为“https://[namespace].accesscontrol.windows.net/”的依赖方

> ID：15938711
> 
> 赞同：5
> 
> 时间：2013-04-11T00:12:51.583
> 
> 标签：acs, ws-federation

我有一个设置了 WS-Federation 身份提供程序的 ACS 名称空间。由于我使用的是 Visual Studio 2012，因此我使用了身份和访问工具来创建依赖方。该工具使用领域并返回我在创建依赖方时提供的 url 值（我使用部署项目的 Azure 云服务 url - 即[http://myapp.cloudapp.net](http://myapp.cloudapp.net)）。运行该工具后，我的依赖方的规则组中只有一条规则 - 通过 [依赖方] 的所有声明。我只用那一条规则测试了我的应用程序的 ACS，并且还在为 WS-Federation 身份提供者生成了所有规则之后。

无论规则组中的规则如何，我的问题标题中都会出现错误。我的浏览器被重定向到 ACS，但是由于某种原因它找不到正确的依赖方。我在两个不同的 Azure 帐户中创建了一个 ACS 命名空间、身份提供者和依赖方，结果完全相同。

我还尝试使用 http 和 https 端点将我的项目发布到 Azure 云服务，并且两个端点产生相同的结果。

WS-Federation 身份提供者的联合元数据来自 Windows Azure Active Directory。

更新 web.config 中的 FederationConfiguration 部分：

```
<federationConfiguration>
      <cookieHandler requireSsl="false" />
      <wsFederation passiveRedirectEnabled="true" issuer="https://[MyNamespace].accesscontrol.windows.net/v2/wsfederation" realm="http://[MyApp].cloudapp.net/" requireHttps="false" />
</federationConfiguration> 
```

更新2：仍然没有解决方案。看起来问题源于我设置了自己的 ACS 身份提供程序，并从 Windows Azure Active Directory (WAAD) 为该身份提供程序下载了联合元数据。这基本上将 2 个 ACS 实例链接在一起。当我的应用重定向到我的 ACS 时，它会将我的应用的 url 作为领域传递。然后，我的 ACS 重定向到身份提供者 WAAD，并将其自己的 url 作为领域传递。这就是为什么我返回的错误具有依赖方标识符的奇怪特征 = 我自己的 ACS 管理门户的 url。我不确定为什么它没有从我的应用程序一直传递到 WAAD。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T20:28:31.853

好吧，这个问题的答案比我预期的要模糊得多——我必须对我的 CRM Online WAAD 运行以下 powershell 脚本：

```
Connect-MsolService
Import-Module MSOnlineExtended -Force
$replyUrl = New-MsolServicePrincipalAddresses –Address "https://lefederateur.accesscontrol.windows.net/"
New-MsolServicePrincipal –ServicePrincipalNames @(“https://lefederateur.accesscontrol.windows.net/”) -DisplayName “LeFederateur ACS Namespace” -Addresses $replyUrl 
```

这告诉 WAAD 识别我的 ACS 命名空间，因此它不会抛出错误，指出 ACS 命名空间不是有效的依赖方标识符。在此处阅读整个过程：

[http://www.cloudidentity.com/blog/2012/11/07/provisioning-a-directory-tenant-as-an-identity-provider-in-an-acs-namespace/](http://www.cloudidentity.com/blog/2012/11/07/provisioning-a-directory-tenant-as-an-identity-provider-in-an-acs-namespace/)

感谢 Azure 的支持，我现在已经克服了这个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:45:50.387

进入 Azure ACS 管理门户。打开信赖方应用程序，然后选择您为此应用程序配置的信赖方。确保字段“Realm”与您在 web.config 下的 Realm 完全匹配`<federationConfiguration><wsFederation realm=""/>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T22:26:37.000

您只需要在 Active Directory 中设置对 ACS 的访问权限 安装 powershell Azure Commandlets 后，运行 Andrew 提到的以下命令

连接-MsolService

Import-Module MSOnlineExtended -Force $replyUrl = New-MsolServicePrincipalAddresses –Address " [https://xxx.accesscontrol.windows.net/](https://xxx.accesscontrol.windows.net/) "

New-MsolServicePrincipal –ServicePrincipalNames @(" [https://xxx.accesscontrol.windows.net/](https://xxx.accesscontrol.windows.net/) ") -DisplayName "xxx ACS 命名空间" -Addresses $replyUrl

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T11:47:55.933

万一其他人偶然发现此问题，请在此处仔细检查您的领域代码：

wsFederation passiveRedirectEnabled="true" issuer="必须匹配端点" realm="必须匹配受众 URI" requireHttps="true"

和

```
<add key="ida:Realm" value="must match audience uri" />
<add key="ida:AudienceUri" value="must match audience uri" /> 
```

我的问题是我本能地添加到我的 URI 末尾的 / - 即[https://somuri.com/](https://somuri.com/) - 而门户设置是[https://someuri.com](https://someuri.com)

删除 / 工作。

# django - Django 的 collectstatic 不再复制文件

> ID：15938713
> 
> 赞同：0
> 
> 时间：2013-04-11T00:12:56.507
> 
> 标签：django

在一个部署得很好的项目上，我突然`0 static files copied`从`manage.py collectstatic`. 我已尝试清除其中的目标文件，`STATIC_ROOT`但仍然没有任何内容被复制。我不知道设置、服务器或我的结构部署脚本中的任何更改（但显然**发生了一些**变化！）。运行该命令的用户拥有 repo 目录和目标目录。

我已经验证`manage.py findstatic`输出正确的目录并且可以找到原始文件。如果我`FileSystemFinder.list()`从提示符运行，它会找到我的所有静态文件。当我使用`manage.py runserver`图像时，它们可以很清楚地被找到。

关于可能导致问题的任何想法？

根据调试工具栏，以下设置处于活动状态：

```
STATIC_ROOT = '/var/www/realfood/static'
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'
STATICFILES_DIRS = (
    ('css', '/var/repos/realfood/realfood/static/css'),
    ('img', '/var/repos/realfood/realfood/static/img'),
    ('js', '/var/repos/realfood/realfood/static/js'),
    ('pdf', '/var/repos/realfood/realfood/static/pdf'))
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'compressor.finders.CompressorFinder') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:19:43.017

事实证明，这是[django-cumulus](https://github.com/richleland/django-cumulus) 1.0.8 版的一个特定问题。它覆盖`collectstatic`但未能返回值。[它通过应用更新的提交](https://github.com/richleland/django-cumulus/commit/b8d8ac842f0c22607a32995a48180261d6a84c39)来修复。

# r - `cut` 函数中的错误

> ID：15938717
> 
> 赞同：1
> 
> 时间：2013-04-11T00:13:31.163
> 
> 标签：r, cut

我正在尝试将旧金山的所有日期房屋按年出售。我正在使用以下代码

```
geo_big$month <- as.Date(paste0(strftime(geo_big$date, format = "%Y-%m"), "-01"))

geo_big$date_r <- cut(geo_big$month, breaks = as.Date(c("2003-04-01", "2004-01-01", "2005-01-01", "2006-01-01", "2007-01-01", "2008-11-01")), include.lowest = TRUE, labels = as.Date(c("2003-01 - 2004-12", "2004-01 - 2004-12", "2005-01 - 2005-12", "2006-01 - 2006-12", "2007-01 - 2007-12", "2008-01 - 2008-11"))) 
```

并收到此消息：

```
Error in charToDate(x) : 
  character string is not in a standard unambiguous format 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:45:28.460

给出的错误应该向您表明问题不是`cut`但是`as.Date`。（它向您抱怨无法确定日期的格式）

更具体地说，它是您作为标签提供的内容。无需将它们包裹起来`as.Date`

标签应该是`character`和`c(.)`，引号就足够了。

* * *

就像一点手一样，上面的代码可以在几个方面进行清理。
此外，该`lubridate`软件包可能对您非常有用。

```
# instead of: 
geo_big$month <- as.Date(paste0(strftime(geo_big$date, format = "%Y-%m"), "-01"))

# you can use `floor_date`: 
library(lubridate)
geo_big$month <- floor_date(geo_big$date, "month")  # from the `lubridate` pkg

# instead of: 
... a giant cut statement... 

# use variables for ease of reading and debugging

# bks <- as.Date(c("2003-04-01", "2004-01-01", "2005-01-01", "2006-01-01", "2007-01-01", "2008-11-01")) 
# or: 
bks <- c(dmin, seq.Date(ceiling_date(dmin, "year"), floor_date(dmax, "year"), by="year"), dmax)  # still using library(lubridate)

# basing your labels on your breaks helps guard against human error & typos
lbls <- head(floor_date(bks, "year"), -1)  # dropping the last one, and adding dmax
lbls <- paste( substr(lbls, 1, 7),   substr(c(lbls[-1] - 1, dmax), 1, 7), sep=" - ")

# a cleaner, more readable `cut` statement
cut(geo_big$month, breaks=bks, include.lowest=TRUE, labels=lbls) 
```

# php - 绘制多边形偏移量的函数？

> ID：15938718
> 
> 赞同：3
> 
> 时间：2013-04-11T00:13:31.960
> 
> 标签：php, polygon, outline

我有一个程序来确定一个点是否在多边形内，但是 id 还喜欢在多边形周围添加一个缓冲区以添加 X 超出边界的搜索结果。我该怎么做？

我用 php 编程。用于确定该点是否在多边形中的过程是：[http ://assemblysys.com/php-point-in-polygon-algorithm/](http://assemblysys.com/php-point-in-polygon-algorithm/)

任何帮助都会很棒。谢谢。

# python - matplotlib 的 set_xlim() 和 set_ylim() 的轴无关版本？

> ID：15938724
> 
> 赞同：2
> 
> 时间：2013-04-11T00:14:00.940
> 
> 标签：python, matplotlib

是否有 set_xlim() 和 set_ylim() 的 matplotlib 轴无关版本？

我有一个`setup_axis(ax, ...)`单独在每个轴上运行的函数，我想调用`ax.set_lim()`我可以调用的方式`ax.set_ticks()`和`ax.set_ticklabels()`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:35:44.643

我相信你正在寻找`set_data_interval`. 所以，例如，我可以说

```
ax = plt.subplot(111)
plt.plot(x, y)
plot.axis((0, 10, -5, 5)) 
```

或者

```
ax.xaxis.set_data_interval(0, 10)
ax.yaxis.set_data_interval(-5, 5) 
```

问题在于，这假设您要么知道所使用的坐标系类型（可能有办法找出这一点），要么您事先拥有`axis`对象（即`ax.xaxis`和）。`ax.yaxis`

查看更多信息： http: [//matplotlib.org/api/axis_api.html](http://matplotlib.org/api/axis_api.html)

# c# - 列出系统上的所有智能卡读卡器（Alcor Micro 读卡器问题）

> ID：15938725
> 
> 赞同：5
> 
> 时间：2013-04-11T00:14:03.823
> 
> 标签：c#, hardware, smartcard, smartcard-reader

我已经让这个软件在生产环境中运行多年，以前从未见过这个问题。我刚收到一台内置**Alcor Micro USB 智能卡读卡器**的新笔记本电脑 (HP EliteBook 8470p) 。

下面的代码将列出系统上的所有阅读器，并且似乎工作正常。我们的一些系统将有 3 或 4 个读卡器插入一台计算机。它已经过十几个模型的测试，没有任何问题。

奇怪的是，Alcor 读卡器只有在插入智能卡时才会被列出。如果我在设备管理器中查看它，在插入卡之前它不会显示在“智能卡读卡器”下（除非我去查看>显示隐藏的设备）。

有谁知道这是为什么，或者是否有办法确保它在我的软件中列出？

谢谢你。

编码：

```
[DllImport("WINSCARD.DLL", EntryPoint = "SCardEstablishContext", CharSet = CharSet.Unicode, SetLastError = true)]
static internal extern uint EstablishContext(ScopeOption scope, IntPtr reserved1,
    IntPtr reserved2, ref SmartcardContextSafeHandle context);

[DllImport("WINSCARD.DLL", EntryPoint = "SCardListReaders", CharSet = CharSet.Unicode, SetLastError = true)]
static internal extern uint ListReaders(SmartcardContextSafeHandle context, string groups,
    string readers, ref int size);

private bool EstablishContext()
{
    if ((this.HasContext))
    {
        return true;
    }
    this._lastErrorCode =
        (SmartcardErrorCode)UnsafeNativeMethods.EstablishContext(ScopeOption.System,
        IntPtr.Zero, IntPtr.Zero, ref this._context);
    return (this._lastErrorCode == SmartcardErrorCode.None);
}

public ArrayList ListReaders()
{
    ArrayList result = new ArrayList();

    //Make sure a context has been established before 
    //retrieving the list of smartcard readers.
    if (this.EstablishContext())
    {
        //Ask for the size of the buffer first.
        int size = this.GetReaderListBufferSize();
        //Allocate a string of the proper size in which 
        //to store the list of smartcard readers.
        string readerList = new string('\0', size);
        //Retrieve the list of smartcard readers.
        this._lastErrorCode =
            (SmartcardErrorCode)UnsafeNativeMethods.ListReaders(this._context,
            null, readerList, ref size);

        if ((this._lastErrorCode == SmartcardErrorCode.None))
        {
            //Extract each reader from the returned list.
            //The readerList string will contain a multi-string of 
            //the reader names, i.e. they are seperated by 0x00 
            //characters.
            string readerName = string.Empty;
            for (int i = 0; i <= readerList.Length - 1; i++)
            {
                if ((readerList[i] == '\0'))
                {
                    if ((readerName.Length > 0))
                    {
                        //We have a smartcard reader's name.
                        result.Add(readerName);
                        readerName = string.Empty;
                    }
                }
                else
                {
                    //Append the found character.
                    readerName += new string(readerList[i], 1);
                }
            }
        }
    }
    return result;
} 
```

顺便说一句，这段代码是由我猜测的其他人编写的（由于评论过多）在网上的其他地方找到了它。我对它有些熟悉，但从未深入过它。我已经尝试对其进行一些调整，但根本无法让它列出该 Alcor 阅读器。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-14T21:32:46.440

好吧，打开赏金后立即找到答案，我觉得真的很愚蠢。我花了一段时间从软件的角度来看这个并放弃了一段时间 - 当我回来重新审视这个时，我认为它可能适合赏金。

我决定仔细看看我的 BIOS 选项，你猜怎么着？那里有一个选项，上面写着“打开智能卡读卡器电源：a）插入卡时，b）总是”。我将其更改为“始终”并且它有效。啊啊啊啊

它不会让我删除我的问题，因为它现在有赏金，但这基本上是我的答案。感谢您的评论/建议。

# javascript - 通过部分在单个页面上显示多个 form_tags

> ID：15938726
> 
> 赞同：0
> 
> 时间：2013-04-11T00:14:07.120
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我的应用程序有一个为属于用户的每个餐点对象呈现的部分，有效地列出了餐点。每顿饭都有一些食物列在下面。我有一个 form_tag 和 text_field_tag，它们位于每餐使用自动完成功能的最后一道食物的下方。

当我输入第一个 text_field 时，我可以看到我的服务器正在处理请求。尽管当我在第一个文本字段下方的其他文本字段中输入内容时，服务器似乎根本没有处理任何内容。

似乎 form_tag 仅应用于其正下方的第一个 text_field_tag ，因为 chrome 控制台在其下方显示了一个结束标记。

form_tag 根本不会出现在其他 text_field_tags 中。

有趣的是，form_tag 下的默认隐藏 div 确实会为其他 form_tags 显示...

这是我的部分

```
<td class=search-form-block>
  <%= form_tag({:controller => "foods", :action => "save_selected"}, method: "post") %>

  <%= text_field_tag 'search_food_text_field', nil, data: { catcomplete_source: search_foods_path } %>

</td>
<td class=remove-td-center> <%= link_to "new food", nil,  {class: "new-food-button"} %> </td> 
```

自动完成jQuery：

```
 $( "#search_food_text_field" ).catcomplete({
   source: $("#search_food_text_field").data('catcomplete-source')
}); 
```

我怎样才能让页面上的每个表单都按照自动完成的方式工作，就像第一个 form_tag/text_field_tag 一样？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:19:21.017

我很确定你在这里有两个不同的问题。

关于表单标签，form_tag 根本不包含结束标签，除非它被称为块。Chrome 控制台可能会自动填写 close-form 标记，但您正在生成格式错误的 HTML 源代码。换句话说，你应该这样做：

```
 <%= form_tag({:controller => "foods", :action => "save_selected"}, method: "post") do %>
    <%= text_field_tag 'search_food_text_field', nil, data: { catcomplete_source: search_foods_path } %>
  <% end %> 
```

对于自动完成的问题，您应该尝试使用类而不是 id（因为 id 需要是唯一的），然后确保在每个文本字段上调用自动完成。尝试像这样声明你的 text_field_tags ：

```
 <%= text_field_tag 'search_food_text_field', nil, data: { catcomplete_source: search_foods_path }, class: 'auto-complete' %> 
```

并像这样调用你的jQuery：

```
$( ".autocomplete" ).each(function() {
  $(this).catcomplete({
   source: $(this).data('catcomplete-source')
  });
}); 
```

# visual-c++ - 在哪里可以找到 Visual Studio 2012 的 openGl 库

> ID：15938728
> 
> 赞同：-2
> 
> 时间：2013-04-11T00:14:17.160
> 
> 标签：visual-c++, opengl

我需要 Visual Studio 2012 的 openGL 库 (gl.h - glu.h - glut.h - glaux.h) 有人能给我下载这个库的链接吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:27:51.743

默认情况下，OpenGL 标头随 Visual C++ 提供。您无需安装任何东西即可获得它们。但是，要使用现代 OpenGL 版本，您必须通过扩展机制加载更新的功能。对此有包装器，例如[GLEW](http://glew.sourceforge.net)。

# jquery - 中间的 DIV 垂直布局，左侧的 div 水平布局

> ID：15938729
> 
> 赞同：0
> 
> 时间：2013-04-11T00:14:24.313
> 
> 标签：jquery, css, html, css-float

我无法使用浮动元素来处理事情......这是我正在尝试做的事情：

当屏幕“窄”时，我有 3 个具有此布局的 div（如纵向移动设备）

```
BB
AA
AA
CC 
```

但是，这是不可能的事情，当窗口更宽时（如桌面浏览器或横向移动），我希望它们像这样布局：

```
AABB
AACC 
```

这可能仅使用 CSS 还是我必须使用 jquery 之类的东西？

这真让我抓狂。:p

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:17:48.107

If you just float the elements it should work more or less automatically, and `@media` queries are at your side. However if you want a break on the odd elements (counting from zero) at any width, that's not a problem either:

```
div:nth-child(odd) {
    clear: both;
} 
```

Note that this has no effect if the screen is small enough to make all the elements stack vertically.

[http://jsfiddle.net/ExplosionPIlls/bBEE5/](http://jsfiddle.net/ExplosionPIlls/bBEE5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T00:40:40.610

这是这样的吗：

**html:**

```
<div class="wrapper">
    <div class="box">AA</div>
    <div class="box">BB</div>
    <div class="box">CC</div>
    <div class="box">DD</div>
</div> 
```

**CSS：**

```
.wrapper {
    float:left;
    width:100%;

}
.wrapper .box {
    float:left;
    width:50%;

}
@media handheld, screen and (max-width: 320px){
    .wrapper .box {
        width:100%;  
    }
} 
```

如果您的目标是在移动设备上工作，请将其放在结束标记之前`</head>`

```
<meta name="viewport" content="width=device-width" /> 
```

工作[演示](http://jsfiddle.net/AG66a/5/)

希望这对你有帮助......

# javascript - 需要使用 Passport.js / Node.js 对目录（一页除外）进行身份验证？

> ID：15938730
> 
> 赞同：1
> 
> 时间：2013-04-11T00:14:24.577
> 
> 标签：javascript, jquery, node.js, authentication, passport.js

我是使用 Passport.js 的新手，但我发现它到目前为止进展顺利。我正在使用带有本地护照的护照。

但是，我想要求对不包括一页的整个目录进行身份验证。所以在我的节点服务器中，我像这样（使用快递）提供这个目录：

```
app.use("/admin", express.static(__dirname + "/admin")); 
```

然后我想让用户点击/admin/login.html，所以我想做这样的事情：

```
app.get('/gb-admin/login.html', function(req, res){ }); 
```

然后我想要求对其余部分进行身份验证，所以是这样的：

```
app.get('/gb-admin/*', ensureAuthenticated, function(req, res){}); 
```

这是我的 ensureAuthenticated 函数，如果有帮助，请参考：

```
function ensureAuthenticated(req, res, next) {
  if (req.isAuthenticated()) { return next(); }
  res.redirect('/gb-admin/login.html')
} 
```

我该怎么做呢？我通常一直在无限循环中发送东西并导致浏览器超时。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:05:39.663

你得到超时的原因是你不能有一个空的路由处理程序；在某一时刻，您*必须*返回响应，或者将请求交给下一个路由处理程序/中间件。

也就是说，试试这个：

```
function ensureAuthenticated(req, res, next) {
  if (req.path === '/gb-admin/login.html' || req.isAuthenticated()) {
    return next();
  }
  res.redirect('/gb-admin/login.html')
}

app.get('/gb-admin/*', ensureAuthenticated, function(req, res, next) {
  next();
});

// the static middleware needs to be declared after the route above, otherwise
// it will take precedence and ensureAuthenticated will never be called.
app.use("/gb-admin", express.static(__dirname + "/admin")); 
```

我认为没有办法让它与登录页面的单独路由一起工作（除非您实际上`login.html`在没有该路由处理程序的情况下实现读取和发送回它），因此在`ensureAuthenticated`中间件中检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T01:52:37.303

我想知道这是不是你的回调。尝试：

```
app.get('/gb-admin/*', function (req, res, next) {
  ensureAuthentication(req, res, next) {
    if (req.isAuthenticated()) { return next(); }
    res.redirect('/gb-admin/login.html')
  });
}); 
```

# android - 为什么 RadioButton 返回 NULL？

> ID：15938735
> 
> 赞同：0
> 
> 时间：2013-04-11T00:14:56.920
> 
> 标签：android, radio-button, radio-group

我有一个 4`RadioButton`秒的对话框，`RadioGroup`我试图返回单击的按钮的 ID，但我一直得到一个`NullPointerException`. 我看过几个例子，看不出我的有什么不同。

```
 <RadioGroup
             android:id="@+id/radiojqmobdiv"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:checkedButton="0"
             android:orientation="horizontal" >

            <RadioButton
                android:id="@+id/jqpage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/jqpage" 
                android:checked="true" />

            <RadioButton
                android:id="@+id/jqheader"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/jqheader" />

            <RadioButton
                android:id="@+id/jqcontent"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/jqcontent" />

            <RadioButton
                android:id="@+id/jqfooter"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/jqfooter" />

        </RadioGroup> 
```

代码：

```
@Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        preferences = getSharedPreferences("MYPREFS", 0);

        et = (EditTextLineNumbers) findViewById(R.id.ide);
        et.setTextColor(preferences.getInt("colourChoice", Color.GREEN));
        et.setMaxLines(5000);
        divBtn = (Button) findViewById(R.id.divbutton);
        divGroup = (RadioGroup) findViewById(R.id.radiojqmobdiv);

        exists = false;
        gestureDetector = new GestureDetector(this, new MyGestureDetector());
        gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
            }
        };
        web = (WebView) findViewById(R.id.webpreview);
        web.setOnClickListener(this);
        web.setOnTouchListener(gestureListener);
        getWindow().setSoftInputMode(
                WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);
        File dir = new File(Environment.getExternalStorageDirectory()
                + "/My Webs");
        currentDirectory = dir;
        ListView lv = getListView();
        registerForContextMenu(lv);
        lv.setOnItemLongClickListener(new OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> a, View v,
                    int position, long id) {
                Show_Alert_box(v.getContext(), "Please select action.",
                        position);
                return false;
            }
        });

        et.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            @Override
            public void afterTextChanged(Editable s) {
                changed = true;
                startPos = et.getSelectionStart();
                endPos = et.getSelectionEnd();
            }
        });
        if (dir.isDirectory()) {
            browseToRoot();
        } else {
            dir.mkdir();
        }

        divBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                final Dialog dialog = new Dialog(MainActivity.this);
                dialog.setContentView(R.layout.divdialog);
                dialog.setTitle("Inserv Div");

                // set the custom dialog components - text, image and button
                // TextView text = (TextView) dialog.findViewById(R.id.text);
                // text.setText("Android custom dialog example!");
                // ImageView image = (ImageView)
                // dialog.findViewById(R.id.image);
                // image.setImageResource(R.drawable.ic_launcher);

                **Button insertButton = (Button) dialog
                        .findViewById(R.id.insertBtn);**
                // if button is clicked, close the custom dialog
                insertButton.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        // int selectedID = divGroup.getCheckedRadioButtonId();

                        // find the radiobutton by returned id
                        divRdoBtn = (RadioButton) findViewById(selectedID);

                        Toast.makeText(MainActivity.this, divRdoBtn.getText(),
                                Toast.LENGTH_LONG).show();
                    }
                });

                Button cancelButton = (Button) dialog
                        .findViewById(R.id.cancelBtn);
                cancelButton.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        dialog.dismiss();
                    }
                });
                dialog.show();
            }

        });

        gestureDetector = new GestureDetector(this, new MyGestureDetector());
        gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
            }
        };
        loadPrefs();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:03:51.953

您没有发布对话框布局和活动布局的完整 xml 文件，所以我在这里做一些假设。

但是，您在标题中说**对话框**包含您命名为 divGroup 的 RadioGroup。如果这是真的，那么当您执行此行时，您将无法找到 RadioGroup 是有道理的：

```
divGroup = (RadioGroup) findViewById(R.id.radiojqmobdiv); 
```

您正在 Activity 中搜索 id R.id.radiojqmobdiv，您暗示它仅存在于您尚未创建的对话框中。如果未找到视图，findViewById() 返回 null，因此您将 null 分配给`divGroup`.

您应该在声明对话框后将该行向下移动，并确保调用`findViewById`您的`dialog`对象而不是 Activity。

```
final Dialog dialog = new Dialog(MainActivity.this);
dialog.setContentView(R.layout.divdialog);
divGroup = (RadioGroup) dialog.findViewById(R.id.radiojqmobdiv); 
```

# php - 如何在不刷新页面的情况下将数据从 Android 发送到 PHP 并显示

> ID：15938736
> 
> 赞同：0
> 
> 时间：2013-04-11T00:14:58.110
> 
> 标签：php, android, jquery

我成功地将数据从 Android 发送到 PHP 并存储在 MYSQL 数据库中。

我想要的是在我的 PHP 页面中自动显示数据，而无需在从 Android 设备发送数据时刷新页面。这可能吗，可能使用带有 AJAX 的 jQuery 吗？

请解释如何完成或将我指向可以找到此类信息的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:19:43.687

因此，您实际上想在服务器上的数据更改时更新页面。

我想到了两个主要选项：

**1\. Ajax 民意调查**

将 setTimeout 与 ajax 调用结合使用以定期调用服务器并查看是否有任何更改。您已经提到了 jQuery，这当然是一个很好的起点。熟悉[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。这可能是你最好的选择。

**2\. 发布订阅**

为此，我在我的一个网站上使用[http://www.pubnub.com/ 。](http://www.pubnub.com/)浏览器订阅了一个 pubnub 频道，只要服务器发生变化，服务器就会在该频道上发布。这显然需要更多的预先设置工作，并且更适用于富客户端应用程序（我的是单页应用程序）。

还有很多其他的 PubSub 实现。

# internet-explorer - 在 Internet Explorer 中第二次调用后，jQuery ajax 无法正常工作

> ID：15938737
> 
> 赞同：2
> 
> 时间：2013-04-11T00:15:01.350
> 
> 标签：internet-explorer, jquery, caching

我和许多其他人一样遇到了 IE 和缓存的问题。我有一个拍卖网站，当用户点击出价时，**会触发此代码**：

```
function bid(id){
var end_dateUP=0;

var tupdate=jq("#tupdate"+id).val();

if (tupdate=="lvl1"){
    end_dateUP=20;  
}else if (tupdate=="lvl2"){
    end_dateUP=15;  
}else if (tupdate=="lvl3"){
    end_dateUP=10;  
}else{
    end_dateUP=0;
}

var url = "http://localhost/bid/comet/update-auction.php"; // the script where you handle the form input.
var user_id=<?php echo json_encode($user_id);?>; //here i'm getting id from SESSION
var user_name=<?php echo json_encode($user_name); ?>; //here i'm getting user name from SESSION
jq.ajax({
    type: "POST",
    async: false,
    url: url,
    data: {"auct_id" : id, "user_id" : user_id, "username" : user_name, "end_date" : end_dateUP}, // serializes the form's elements.
    cache:false,
    success: function(data)
    {
        setTimeout('waitForMsg()',100);
        jq("#tupdate"+id).val("");  
        jq('#bid-container'+id).animate({ backgroundColor: "#659ae0" }, 50);
        jq('#bid-container'+id).animate({ backgroundColor: "#FFF" }, 500);

    },
    error: function(xhr, errorString, exception) {
        alert("xhr.status="+xhr.status+" error="+errorString+" exception=|"+exception+"|");
    }
});
} 
```

**在 PHP (update-auction.php) 中，我得到了这个发布的 ajax 数据并更新了我的数据库：**

```
$auction_id=$_POST['auct_id'];
$user_id=$_POST['user_id'];
$usr=$_POST['username'];
$enddate=$_POST['end_date'];

//Database update 
```

**此代码在 Firefox 或 Chrome 中运行良好。**
**所以问题是**，当我第一次点击出价时，它可以工作，但是当我进入第二页时（下面的代码）：

```
function pageClick(page){
var url = "http://localhost/bid/auctions-ajax"; // the script where you handle the form input.  

jq.ajaxSetup({ cache: false }); //this line before $.ajax!!!
    jq.ajax({
           type: "POST",
           url: url,
           data: {"page" : page}, 
           async:false, //to sem dodal za časovni zamik
           cache: false,
           success: function(data)
           {
             jq("#a_loader").hide();  
             jq("#show-category").html(data); // show response from the php script.              
           },
            error: function(xhr, errorString, exception) {
            alert("xhr.status="+xhr.status+" error="+errorString+" exception=|"+exception+"|");
        }
    });

} 
```

（onClick 触发 ajax 调用并显示第二页）然后`function bid(id)`停止工作。我已经搜索了解决方案，例如`cache:false,`添加`new Date().time();`到 JSON 中的帖子和发布数据，但没有运气。（此外，当我尝试以 JSON 格式发布数据时，我遇到了一些语法错误：Unexpected token < 和解析错误等等）。我只是想用这个工作代码找出最简单的解决方案......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-05T08:27:14.973

这解决了我的问题：

```
$.ajax(url,
{
cache: false,
success: function(){
//do something
}
}
); 
```

“原因是，有些浏览器只要get请求中的请求相同，就会缓存结果。”

例子：

```
function showBootstrapModalPopup(url, containerId, modalId)
{
        $.ajax(url,
        {
            cache: false,
            success: function (data) {
                //do something
                $('#' + containerId).html(data);

                $('#' + modalId).modal('show');
            }
        }
        );

    //$.ajax({
    //    url: url,
    //    success: function (data) {
    //        $('#' + containerId).html(data);

    //        $('#' + modalId).modal('show');
    //    },
    //    cache: false
    //});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:54:49.603

好的，我找到了解决方案。Internet Explorer 的 jquery 动画有问题。我有一些旧的，这导致了问题并且没有完全执行脚本。我必须包括最新`<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>`的在 IE 中工作。现在效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:50:45.467

如果您当前正在将点击处理程序绑定到：

```
$("selector").click(function...); 
```

将其更改为：

```
$("#show-category").on("click", "selector", function ...); 
```

这是必要的，因为它`pageClick()`替换了之前具有点击绑定的 DOM 元素。您需要使用在整个页面替换过程中保留的父元素的委托。

# python - 清单模板，用于打包文件的任何通用分发

> ID：15938741
> 
> 赞同：0
> 
> 时间：2013-04-11T00:15:59.373
> 
> 标签：python, manifest, packaging

我有一组目录和文件，我想“打包”并移动到另一个系统。这些文件是科学模拟的输入，在目录结构中生成输出文件。

我正在寻找一个[清单文件](http://en.wikipedia.org/wiki/Manifest_file)解决方案来帮助打包输入文件，忽略其他文件，这样我就可以轻松地将模拟移动到不同的系统/位置。我目前的方法是手动创建目录结构并选择需要复制的文件，然后创建一个 tar.gz 或 zip 文件。这是缓慢且容易出错的。有没有通用的方法来做到这一点？

我熟悉Python 的[MANIFEST.in](http://docs.python.org/2/distutils/sourcedist.html#the-manifest-in-template)模板文件`setup.py sdist`，这是理想的，但我不确定如何或是否可以使用它来帮助打包任何通用文件分发。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:24:39.940

您能否将所有输入文件构建到一个 COM 对象中并使它们独立于平台和编程语言？

# laravel - Laravel3：在 UPDATE 语句期间 Eloquent/Fluent 失败

> ID：15938742
> 
> 赞同：0
> 
> 时间：2013-04-11T00:16:01.257
> 
> 标签：laravel, laravel-3

```
$account = Account::where('account_id', '=', $account_id)->first();
$account->username = 'New_Username';
$account->password = 'Password';
$account->save();

SQLSTATE[42S22]: Column not found: 1054 Unknown column 'id' in 'where clause' 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:38:36.470

当您更新 Eloquent 模型时，它将使用模型的主键。默认主键是`id`，您可以通过在类中添加以下内容来更改它：

```
public static $key = 'account_id'; 
```

请注意，在 Laravel 中有一些硬编码的引用`id`，因此最好的建议仍然是在为 Eloquent`id`设计数据库时将其用作主键。

参考：[laravel/database/eloquent/model.php](https://github.com/laravel/laravel/blob/master/laravel/database/eloquent/model.php#L50)

# java - 如何运行扩展名为 .jar 的构建的 java 文件

> ID：15938745
> 
> 赞同：-1
> 
> 时间：2013-04-11T00:16:06.467
> 
> 标签：java, netbeans

我用 Java netbeans 做了一个桌面应用程序，它是一个带有一些组件的 Jframe。我构建了它并在项目文件夹的 dist 文件夹中创建了 .jar 文件。我已经在我的电脑上安装了 jre（Java 运行时环境）。当我尝试使用 jre 打开 .jar 时，我什么也没有，什么都没有出现。我能做些什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:19:01.400

[https://netbeans.org/kb/articles/javase-deploy.html#Exercise_1](https://netbeans.org/kb/articles/javase-deploy.html#Exercise_1)

The link above will take you to a tutorial. Jar files are not executable by default. You need to specify a starting class to make a jar file executable.

If this doesn't work, then make sure you have called `setVisible(true)` on your JFrame.

Edited to add: (author added info)

> When I try to run through CMD there's Unsupported major.minor version 52.0

This means your JRE version does not match your compiler version. You can confirm with the -version option, then fix your path to use Java from the same place your compiler lives.

# python - python情节没有正确显示

> ID：15938755
> 
> 赞同：1
> 
> 时间：2013-04-11T00:16:53.893
> 
> 标签：python, matplotlib, plot

我有这段代码，预期的输出是（见第一张图），但实际输出是（见第二张图）。出了什么问题？

```
import numpy as np
import matplotlib.pyplot as plt

t = np.arange(-.75, 2.25, .001)

p = 1 / (np.cos(t) + np.sin(t))

plt.plot(p)

plt.axis((-1, 2.5, 0, 4))
plt.show() 
```

![正确的输出](https://i.stack.imgur.com/x5sW6.png)

![错误的输出](https://i.stack.imgur.com/ZqNAF.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:22:30.633

This should fix it:

```
plt.plot(t, p) 
```

What you were doing was plotting `p` against `range(len(p))`, essentially.

# javascript - 如何根据使用 jquery 的先前选择显示下一个选择选项？

> ID：15938759
> 
> 赞同：0
> 
> 时间：2013-04-11T00:17:33.523
> 
> 标签：javascript, jquery, html, css, forms

我想根据第一个选择选项中选择的内容显示相关的选择选项。像我所做的那样在第一个选项上设置 id 是一种好习惯，或者当你有分配选项时是否有一种聪明的方法来做这样的事情？

所以我有一个带有可见选择的表单，其中包含一个 distrikt 类，并且每个选项都有一个 id。

```
<div class="not-hidden">
<select name="distrikt" class="distrikt span2">
    <option id="distrikt1">Alla Distrikt</option>
    <option id="distrikt2">Bohuslän-Dals</option>
    <option id="distrikt3">Dalabridgen</option>
    <option id="distrikt4">Gotlands</option>
    <option id="distrikt5">Gävleborgs</option>
    <option id="distrikt6">Hallands</option>
    <option id="distrikt7">Jämtland-Härjedalens</option>
    <option id="distrikt8">Jönköpings läns</option>
    <option id="distrikt9">Medelpads</option>
    <option id="distrikt10">Mälardalens</option>
    <option id="distrikt11">Norrbottens</option>
    <option id="distrikt12">Skånes</option>
    <option id="distrikt13">Stockholms</option>
    <option id="distrikt14">Sydöstra Sveriges</option>
    <option id="distrikt15">Uplands</option>
    <option id="distrikt16">Värmland-Dals</option>
    <option id="distrikt17">Västerbottens</option>
    <option id="distrikt18">Västergötlands</option>
    <option id="distrikt19">Ångermanlands</option>
    <option id="distrikt20">Örebro läns</option>
    <option id="distrikt21">Östra Mellansvenska</option>
</select>
</div> 
```

（现在我只粘贴了接下来两个可能的选择标签及其内容，而不是全部 21 个）

这些具有以下类别的选择器： distrikt-klubbar 是隐藏的。根据选择的先前选项中的哪个，我希望出现相应的扇区。

```
<div class="hidden">
    <select name="distrikt1-klubbar" id="distrikt1-klubbar" class="distrikt-klubbar">
        <option>Billingsfors BS</option>
        <option>Brastads BS</option>
        <option>Färgelada BK</option>
        <option>Hunnebostrands BK</option>
        <option>Kungshamns BK</option>
        <option>Ljungskile BK</option>
        <option>Munkedals BS</option>
        <option>Orust BK</option>
        <option>Stenugnsunds BK</option>
        <option>Strömstads BK</option>
        <option>Tanums BK</option>
        <option>Tjörns BK</option>
        <option>Trollhättans BK</option>
        <option>Uddevalla BF</option>
        <option>Upphärads BK</option>
        <option>Vänern Teckenspråkig BS</option>
        <option>Vänersborgs BS</option>
    </select>
</div>
<div class="hidden">
    <select name="distrikt2-klubbar" id="distrikt2-klubbar" class="distrikt-klubbar">
        <option>Borlänge BK</option>
        <option>Dövas BK Dalom</option>
        <option>Falu BK</option>
        <option>Folkare BK</option>
        <option>Hedemora BS</option>
        <option>Insjöns BK</option>
        <option>LudvikaBygdens BK</option>
        <option>Malungs BK</option>
        <option>Mora BK</option>
        <option>Rättviks BS</option>
        <option>Särna BK</option>
        <option>Säters BK</option>
    </select>
</div> 
```

当有很多不同的选项时，我怎么能用 jquery 做到这一点？

问候，比尔

-编辑-

如果在选项中选择 x，`<select name="distrikt" class="distrikt">`则选择相关的下一个选择。例如：如果选择了 id="distrikt1" 的选项，则应显示 id="distrikt-klubbar1" 的选择。

我希望这能澄清一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:22:15.513

Your setup is okay, but you don't have to kill yourself by relying on IDs. You don't need them at all -- you can just use the index of the element (-1 because you have an initial element that doesn't count).

```
$(".distrikt").on('change', function () {
    $(".distrikt-klubbar").hide()
        .eq($(this).find(":selected").index() - 1).show();
}); 
```

[http://jsfiddle.net/ExplosionPIlls/2xPxV/](http://jsfiddle.net/ExplosionPIlls/2xPxV/)

# objective-c - 能否使用 CoreAudio 获取音频流数据到 System 输出设备？

> ID：15938760
> 
> 赞同：2
> 
> 时间：2013-04-11T00:17:34.327
> 
> 标签：objective-c, macos, cocoa, core-audio

是否可以使用 CoreAudio 或其他框架获得到达系统输出（扬声器、耳机等）的音频数据流？

**示例：**您在观看 YouTube 视频的同时在 iTunes 上听歌曲，同时在玩一个自己发出声音的电脑游戏，所有这些都是通过电脑的扬声器播放的（可能非常烦人）。我的应用程序需要将整个混音作为流数据接收。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:00:54.687

不在用户应用程序的 Core Audio 或其他应用程序框架级别。一些音频输出捕获/监听应用程序可能使用内核扩展 (kext) 或替换音频硬件驱动程序来执行此操作。

# arrays - 最大乘积升序子序列

> ID：15938762
> 
> 赞同：1
> 
> 时间：2013-04-11T00:17:48.380
> 
> 标签：arrays, algorithm, integer

如何在大小为 n 的（非负）整数数组中找到大小为 k 的最大乘积升序子序列。我没有找到任何好的解决方案。子序列不必是连续的。例如：10、1、3、9、7、8、5 中的 3、7、8 尺寸为 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:29:54.620

Try reducing to a problem you've seen before.

1.  Solve the max length increasing subsequence problem.
2.  Solve max sum increasing subsequence problem.
3.  Think about how a product can be converted to a sum. (hint: logarithm, why?)
4.  Solve max product increasing subsequence problem.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:30:34.137

In Haskell, you could do this, although it may not be very fast for large n:

```
import Data.List (maximumBy, sort, subsequences)

maxSubProduct k = 
  maximumBy (\a b -> compare (foldr (*) 1 a) (foldr (*) 1 b)) 
  . filter (\x -> x == sort x) 
  . filter ((==k) . length) 
  . subsequences

OUTPUT:
*Main> maxSubProduct 3 [10,1,3,9,7,8,5]
[3,7,8] 
```

# activerecord - ActiveRecord find if a record contain certain ID

> ID：15938763
> 
> 赞同：0
> 
> 时间：2013-04-11T00:18:23.983
> 
> 标签：activerecord

Suppose an ActiveRecord named "Relationships". It has an attribute "participants" which is an array containing people ID. Now I want to find the records that contain a certain people ID. How should I query it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:26:14.010

也许你想做的是这样的：

```
 Student.where(:grade => [9,11,12]) 
```

如此处所示：

[http://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

# python - pydev remote debug path

> ID：15938770
> 
> 赞同：1
> 
> 时间：2013-04-11T00:19:35.177
> 
> 标签：python, eclipse, pydev, remote-debugging

I want to use eclipse, pydev to remote debug my python script. Python script is on a remote Ubuntu server, and Eclispe/pydev is running on my Windows 7 machine.

I followed every step according to this one. [http://pydev.org/manual_adv_remote_debugger.html](http://pydev.org/manual_adv_remote_debugger.html)

The problem is in the last step of configuring path in pydevd_file_utils.py on server, it does not recognize the change. This is what I changed:

```
PATHS_FROM_ECLIPSE_TO_PYTHON = [(r'c:\EZ_Green\plugins', r'/home/jiechao/EZ_Green/plugins')] 
```

When I run the script, it gives me such error.

```
pydev debugger: warning: trying to add breakpoint to file that does not exist: /home/jiechao/EZ_Green/plugins/D:/EZ Green/backend/getData.py (will have no effect) 
```

Seems the change does not apply, has anyone done this before or have any ideas?

Thanks a lot

-----------------update 1--------------

So I solve the previous problem and now here is the new problem.

This is the output of program, and it seems the path configuration is correct. Debug Server at port: 5678 pydev debugger: replacing to server: D:\EZ Green\Product\EZ_Green\plugins\test.py pydev debugger: sent to server: /home/jiechao/EZ_Green/plugins\test.py pydev debugger: replacing to client: /home/jiechao/EZ_Green/plugins/test.py pydev debugger: sent to client: D:\EZ Green\Product\EZ_Green\plugins/test.py

But eclipse does not stop at the breakpoint, not even at pydevd.settrace() I have no idea why it does not stop. When I use remote debug on local machine, it works pretty well. When I want to debug on a remote server machine, it does not work. I don't know what's the problem.

------------------update 2---------------------

Problem solved. The script on my client and server turns out to be a little different. So I did not see the breakpoint it stopped. I am so stupid!

Thanks anyway.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-26T07:07:34.373

即使这可能不是您期望的确切方法，一种选择是从命令行启动 Unittest 并通过 RemoteDebugServer 通过“pydevd.py”附加调试器。

这现在是 ePyUnit 的一个完全自动化的选项，**其中**包括通过“pydevd.py”使用 PyDev 和 Eclipse 进行远程调试的自动化。这可以无缝地用于“子进程”以及独立启动的命令行进程。

主机名和端口号可根据需要更改，默认为 `localhost:5678`.

看：

*   [https://pypi.python.org/pypi/epyunit](https://pypi.python.org/pypi/epyunit)
*   [https://pythonhosted.org/epyunit/](https://pythonhosted.org/epyunit/)

对于远程调试的基础知识：

*   [http://www.pydev.org/manual_adv_remote_debugger.html](http://www.pydev.org/manual_adv_remote_debugger.html)

还增强了与 PyUnit 的 unittest 集成。

欢迎评论和修复。

玩得开心。

# java - 匿名类在 Java 中有何帮助？

> ID：15938772
> 
> 赞同：2
> 
> 时间：2013-04-11T00:19:39.593
> 
> 标签：java, generics, anonymous-class

如果每次我们都必须在调用接口的构造函数时定义一个类，那么使用匿名类有什么帮助。简单地使用泛型类型不是更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:30:58.903

GUI 应用程序中经常使用匿名类。当您只需要同时声明和创建一个类的对象时，它可以使代码更加精确。

这是一个例子：

```
 btn.setOnAction(new EventHandler<ActionEvent>() {

            @Override
            public void handle(ActionEvent event) {
                System.out.println("Hello World!");
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:25:14.250

匿名类不是在每次实例化时都定义的。它们像其他类一样被编译成字节码，名称为`MyEnclosingClass$1`. 有关更多信息，请参阅这篇文章：[Java 中如何编译匿名类？](https://stackoverflow.com/questions/5808492/how-are-anonymous-classes-compiled-in-java)

相切地，反射可用于在运行时使用[`Class.isAnonymousClass()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isAnonymousClass%28%29).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:31:08.463

这取决于实际情况; 在某些情况下，使用匿名类会更好，而在其他情况下，使用实现所需接口的具体类会更好。

如果您认为需要重复提供相同的匿名类定义，那么传递实现所需接口的具体类的实例可能会节省您的时间。

Java 语言提供匿名类语法是为了方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T15:32:50.500

为了让您体验一下，这里有一个我自己的经验的简单[示例](https://stackoverflow.com/questions/15099313/how-can-i-generate-a-list-backed-by-a-function)：拥有由函数支持的列表。

一般来说，匿名类（除其他外）有以下用途：

*   假设您想要一个对象（一个实例，而不是一个类），其行为取决于运行时可用的某个值。如果没有匿名类，您可以通过设置字段（或调用状态更改方法）来做到这一点 - 但您不能执行不同的*代码*。现在，确实，您可以在类的方法代码中包含一堆`switch()`语句 - 但这完全将行为的定义与其上下文分离。您可以采用的另一种方法是使用命名子类，但代码量很大，而且它会创建一个您并不真正希望存在的名词。
*   [函数式编程](https://stackoverflow.com/questions/1267297/functional-programming-in-java)！在 Java 8 出现之前，匿名函数几乎是您可以传递函数的唯一方式，这些函数在 Java中不是[一等公民。](http://en.wikipedia.org/wiki/First-class_citizen)有了这些，您可以执行许多简洁优雅的技巧，例如我上面的示例。

# c++ - QScrollBar + QScrollAera in QTabWidget

> ID：15938777
> 
> 赞同：0
> 
> 时间：2013-04-11T00:20:05.347
> 
> 标签：c++, qt, qscrollarea

My question is simple : how can I set a QScrollBar in my QScrollArea. I have tested a lot of things but nothing work ... Maybe it's a problem to set a QScrollArea in a QTabWidget ? Here is the code :

```
void    GamesWindow::createTabSucces()
{
    std::string nameImg;

    _succesPage = new QWidget(_tab);
    _tab->addTab(_succesPage, "      Succes       ");

    scrollArea = new QScrollArea(_succesPage);
    scrollArea->setBackgroundRole(QPalette::Dark);
    scrollArea->setFixedSize(500,500);
    /*  Integration of QScrollBar  */
    for (int i = 0; i < 45; i++)
    {
        nameImg = "img/allAchiv/";
        nameImg += intToString(i + 1);
        nameImg += ".jpg";
        _imgSucc[i] = new QLabel(scrollArea);
        _imgSucc[i]->setPixmap(QPixmap(QString(nameImg.c_str())));
        _imgSucc[i]->setGeometry((14 + (85 * (i % 5))), 46 + ((i / 5) * 85), 60, 60);
    }
} 
```

In fact, I add pictures in a tab where is created a QScrollArea (like 8-9 lines of pictures) but only 5 are visible, the others are hide, because they are at the bottom, out of the defined zone.

Any idea ? Thank's.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:30:59.120

您需要将小部件设置到滚动区域并将图片添加到小部件的布局中。检查[QScrollArea::setWidget(QWidget *widget)](http://qt-project.org/doc/qt-4.8/qscrollarea.html#setWidget)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T01:18:51.940

你必须：

*   为您的页面添加布局 ( `QVBoxLayout`)
*   将滚动区域添加到该页面布局
*   `viewport()`为滚动区域中的小部件添加布局( `QVBoxLayout`)
*   将您的 QLabels 添加到该视口布局

这样你就不需要在每个标签上调用 setGeometry

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:34:59.627

我几乎可以肯定您不能将滚动添加到选项卡小部件，但我的想法只是尝试制作更多可以显示的选项卡并查看默认情况下是否出现滑块。

# java - HttpServletRequest.getParameter() returns null

> ID：15938780
> 
> 赞同：0
> 
> 时间：2013-04-11T00:20:12.173
> 
> 标签：java, http, servlets, spring-mvc

Here is a little background of my problem:

I'm using Spring MVC 3.1.2.RELEASE. The server is deployed on Amazon AWS. I have a simple controller.

```
public class MyWebController implements Controller {

    @Override
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) {

        try {
            String delegateGuid = request.getParameter("delegateGuid");
            String serviceCodesToBeUpdated = request.getParameter("serviceCodesToBeUpdated");
            if (StringUtils.isBlank(delegateGuid) || StringUtils.isBlank(serviceCodesToBeUpdated)) {
                throw new MyException("delegateGuid and/or serviceCodesToBeUpdted cannot be null or empty");
            }

            ... 
```

I have a client script that makes POST request to this endpoint. But sometimes, I hit this `MyException` that tells me the params are not set. But client logs show that the params are set correctly before sending the requests. The difficult part of debugging this is that it is not reproducible.

Does anyone know what could possibly have caused this issue? I know this might not be the level of detail enough to identify the problem. But if you can suggest any debug logs I could insert into my code, that would be helpful as well. I'm lost in that I don't even know where to start debugging this.

Thanks.

# python - 如何使用重新定义一个方法，并且在方法中仍然使用原始未修改的继承方法？

> ID：15938782
> 
> 赞同：2
> 
> 时间：2013-04-11T00:20:17.443
> 
> 标签：python, class, methods, python-3.x

这个问题的措辞很糟糕，但我想不出更好的表达方式。这也可能是一个简单的问题，但很难正确描述来搜索它。我正在用python编码以供记录。

我正在尝试创建一个继承列表类型的新类。它应该实际上是我定义的另一个类的列表，其中该类的变量之一是 int。对列表进行排序后，我希望它根据这些整数进行排序。当我在类上重新定义排序时，我如何使它使用来自列表类型的原始排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:26:21.777

如果你只是问“我如何`sort`从我的方法中调用我的超类的方法`sort`，那是使用[super](http://docs.python.org/2/library/functions.html#super)完成的。

例如，如果您只想将`key`in`sort`默认设置为`int`Python 2.7：

```
class MyList(list):
    def sort(self, cmp=None, key=None, reverse=None):
        if cmp is None and key is None:
            key = int
        return super(MyList, self).sort(cmp, key, reverse) 
```

在 3.3 中，使用魔法更简单`super`（而且，没有`cmp`参数 to `sort`）：

```
class MyList(list):
    def sort(self, key=None, reverse=None):
        if key is None:
            key = int
        return super().sort(key, reverse) 
```

* * *

如果您要问如何在调用旧方法的方法中进行monkeypatch，那有点棘手……但关键是函数和方法是一等值，因此您可以将它们保存在变量、属性等中。

在 2.7 中：

```
old_sort = MyList.sort
def new_sort(self, cmp=None, key=None, reverse=None):
    if cmp is None and key is None:
        key = int
    return old_sort(self, cmp, key, reverse)
MyList.sort = types.UnboundMethodType(new_sort, None, MyList) 
```

同样，3.3 更简单，这一次是因为未绑定的方法与函数是一样的：

```
old_sort = MyList.sort
def new_sort(self, key=None, reverse=None):
    if key is None:
        key = int
    return old_sort(self, key, reverse)
MyList.sort = new_sort 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T00:25:07.907

如果你确切地知道哪个父类有你想要调用的重写方法（我假设在这种情况下它分别是`list`和`sort`），你可以像这样在子类中调用父类的方法：

```
def sort(self, ...):
    ...
    list.sort(self, ...)
    ... 
```

# java - server-clients java

> ID：15938783
> 
> 赞同：0
> 
> 时间：2013-04-11T00:20:29.757
> 
> 标签：java, client-server

I want to make my server able to accept messages from two clients. but something went wrong. Help needed! I tried to run same client twice, but received only one message and some errors.

```
import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

public class Serv1 {
public static void main(String[] args) throws IOException {

        Listner listner = new Listner();
        Thread thread = new Thread(listner);
        thread.start();

        System.out.println("thread already started");

        DatagramSocket s = new DatagramSocket(8787);

        byte[] receiveData = new byte[1024];

        System.out.println ("Waiting for datagram packet");

        DatagramPacket p = new DatagramPacket(receiveData, receiveData.length); 

        System.out.println("about to receive packet N1");
        s.receive(p);

        String sentence = new String(p.getData()); 
        InetAddress IPAddress = p.getAddress(); 
        int port = p.getPort(); 

        System.out.println ("From: " + IPAddress + ":" + port);
        System.out.println ("Message: " + sentence);

        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            e.printStackTrace();
        }

        receiveData = new byte[1024];

        System.out.println ("Waiting for datagram packet");
        p =  new DatagramPacket(receiveData, receiveData.length); 

        System.out.println("about to receive packet N2");

        s.receive(p);
        sentence = new String(p.getData()); 
        IPAddress = p.getAddress(); 
        port = p.getPort(); 
}

}

class Listner implements Runnable
    { 

        public void run() {
        String text = null;
        while(true){
            text = null;    
        int server_port = 8787;

         byte[] receiveData = new byte[1024];
        DatagramPacket p = new DatagramPacket(receiveData, receiveData.length); 
        DatagramSocket s = null;
        try{
           s = new DatagramSocket(server_port);
        }catch (SocketException e) {
            e.printStackTrace();
            System.out.println("Socket excep, port used");
        }
        try {
        s.receive(p);
       }catch (IOException e) {
            e.printStackTrace();
                System.out.println("IO EXcept");
            }
        text = new String(receiveData, 0, p.getLength());
        System.out.println("message = "+text);
        s.close();

    }
}

} 
```

run:

> thread already started
> 
> Waiting for datagram packet about to receive packet N1
> 
> ```
> java.net.BindException: Address already in use: Cannot bind
>   at java.net.PlainDatagramSocketImpl.bind0(Native Method)
>   at java.net.PlainDatagramSocketImpl.bind(PlainDatagramSocketImpl.java:91)
>   at java.net.DatagramSocket.bind(Socket excep, port used
> DatagramSocket.java:372)
>   at java.net.DatagramSocket.<init>(DatagramSocket.java:211)
>   at java.net.DatagramSocket.<init>(DatagramSocket.java:262)
>   at java.net.DatagramSocket.<init>(DatagramSocket.java:235)
>   at serv1.Listner.run(Listner.java:29)
>   at java.lang.Thread.run(Thread.java:662)
> Exception in thread "Thread-0" java.lang.NullPointerException
>   at serv1.Listner.run(Listner.java:35)
>   at java.lang.Thread.run(Thread.java:662)
> From: /192.168.1.102:58977
> Message: hi, i am the first one
> Waiting for datagram packet
> about to receive packet N2
> BUILD SUCCESSFUL (total time: 59 seconds)**strong text** 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:30:34.917

You are trying to bind the same port twice. That's not how it works. You should have 1 thread listening to the port, and a pool of threads to process the requests. Whenever new information comes thought the port, you give the request data (the new info received) to a thread for processing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T00:30:54.590

You are creating 2 `DatagramSocket`'s on the same port (8787). One is created in the main method, and the other is created in the `Listner` inner class' `run()` method.

I'm not sure what you're trying to do here, but you either need to run the `Listner` class' DatagramSocket on a different port or pass the one created by the `main()` method to the `Listner` class.

# sass - 使用 Susy 将 4 列更改为 3 列失败

> ID：15938785
> 
> 赞同：1
> 
> 时间：2013-04-11T00:20:45.053
> 
> 标签：sass, susy-compass

这当然是最容易用一些代码来展示的：

```
.container{
    .gallery {
        ul {
            @include clearfix;
        }
        li {
            @include span-columns(1,4);

            &:nth-child(4n) {
                @include omega;
            }
        }
    }

    @include at-breakpoint($large-columns) {
        .gallery {
            li {
                @include span-columns(1,3);

                &:nth-child(4n) {
                    @include remove-omega;
                }
                &:nth-child(3n) {
                    @include omega;
                }
            }
        }
    }
} 
```

我从 4 列开始，第 4 列是 omega，然后我想改成 3 列，第 3 列是 omega。正确的元素正确地向左/向右浮动，但每 4 次得到一个错误的边距 - 右...

我这样做对吗？或者更确切地说，我做错了什么？

感谢阅读，/安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T04:39:17.850

您的问题具有误导性，因为我们不知道`$large-columns`. 我认为该值可能是`59em 3`-但效果很好。看起来价值实际上只是`59em`- 这导致了你的问题。

如果你设置一个没有列数的断点，Susy 会根据你的`$column-width`和`$gutter-width`设置计算一个新的上下文。这不会导致任何问题，`span-columns(1,3)`因为您使用显式的一 (3) 覆盖全局上下文。但`remove-omega`也需要知道上下文（为了应用排水沟）并且你不通过一个 - 所以它使用全局上下文。

你有两个选择：

1.  您可以更改断点：`at-breakpoint(59em 3)`
2.  您可以传递显式上下文：`remove-omega(3)`.

# mysql - 在命令行上禁用外键检查

> ID：15938786
> 
> 赞同：58
> 
> 时间：2013-04-11T00:20:50.137
> 
> 标签：mysql, command-line, foreign-keys, mysqlimport

我有一个 MySQL 数据库的备份脚本，使用`mysqldump`该`--tab`选项，因此它会生成一个`.sql`为结构生成一个文件，为内容生成一个`.txt`文件（管道分隔）。

有些表有外键，所以当我导入它时，我得到了错误：

> 第 8 行的错误 1217 (23000)：无法删除或更新父行：外键约束失败

我知道使用`SET FOREIGN_KEY_CHECKS=0`（以及`SET FOREIGN_KEY_CHECKS=1`之后）。如果我将它们添加到每个`.sql`文件中，那么导入就可以了。但显然在下一个`mysqldump`的那些被覆盖。

我还尝试将其作为单独的命令运行，如下所示，但错误又回来了：

```
echo "SET FOREIGN_KEY_CHECKS=0" | mysql [user/pass/database] 
[all the imports]
echo "SET FOREIGN_KEY_CHECKS=1" | mysql [user/pass/database] 
```

是否有其他方法可以在命令行上禁用 FK 检查？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2016-01-14T23:05:33.307

您也可以使用命令`--init-command`的参数`mysql`。

IE：`mysql --init-command="SET SESSION FOREIGN_KEY_CHECKS=0;" ...`

[MySQL 5.5 文档 - mysql 选项](https://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_init-command)

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2013-04-11T00:32:40.067

You can do this by concatenating the string to the file inline. I'm sure there's an easier way to concatenate strings and files, but it works.

```
cat <(echo "SET FOREIGN_KEY_CHECKS=0;") imports.sql | mysql 
```

I don't think you need to set it back to 1 since it's just one session.

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-04-18T14:48:48.607

登录mysql命令行：

`mysql -u <username> -p -h <host_name or ip>`然后运行

1`SET FOREIGN_KEY_CHECKS=0;`

2.`use database <database_name>`

3`SOURCE /pathToFile/backup.sql;`

4`SET FOREIGN_KEY_CHECKS=1;`

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-01-31T21:25:55.967

只是另一个做同样的事情：

```
{ echo "SET FOREIGN_KEY_CHECKS=0;" ; cat imports.sql ; } | mysql 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-12-06T02:39:58.593

.gz 文件的另一种方式：

`gunzip < backup.sql.gz | mysql --init-command="SET SESSION FOREIGN_KEY_CHECKS=0;" -u <username> -p`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-28T22:32:35.537

根据评论和答案，我最终将其用于 InnoDB 和 MyISAM 的压缩数据库导入：

```
{ echo "SET FOREIGN_KEY_CHECKS=0;SET UNIQUE_CHECKS=0;" ; zcat dump.gz ; } | mysql 
```

# javascript - How to chain test with mocha with createReadStream function?

> ID：15938789
> 
> 赞同：2
> 
> 时间：2013-04-11T00:21:14.337
> 
> 标签：javascript, node.js, mocha.js

I have this function I would like to test with mocha:

```
exports.readFile = readFile;
function readFile(filepath, startOffset, outputStream){
    var fileSize = fs.statSync(filepath).size;
    var length = fileSize - startOffset;
    console.log(startOffset);
    fs.createReadStream(filepath, 
                    {start: startOffset, end: fileSize}
                                       ).pipe(outputStream);
} 
```

I use the following code to test my function:

```
var edp = require("edp.js");
    var Buffered = require("buffered-stream");
    var sampleData = 'A small test.';
fs.writeFileSync('./test.txt', sampleData);

var filedata = '';
var smallBufferedStream = new Buffered(20);
smallBufferedStream.on("data", function(data){
        filedata += data;
});

describe('File content redirection', function(){
    describe('reading small file from byte 0', function(){
        it('data should be equal', function(done){
                filedata = '';
                edp.readFile('./test.txt', 0, smallBufferedStream);
                smallBufferedStream.once('end', function(){
                    //sampleData value is "A small test.
                    assert.equal(filedata, sampleData);
                    done();
                });
        });
    });
    describe('reading small file from byte 8', function(){
        it('data should be equal', function(done){
                filedata = '';
                edp.readFile('./test.txt', 8, smallBufferedStream);
                smallBufferedStream.once('end', function(){
                    //sampleData value here is "A small test. 
                    //It should be 'test.'
                    assert.equal(filedata, sampleData.substr(8));
                    done();
                });
        });
    });
}); 
```

When I run the mocha command, I obtain the following:

```
 0
․8
․

✖ 1 of 2 tests failed:

1) File content redirection reading small file from byte 8 data should be equal:

  actual expected

  A small test. 
```

EDIT: the problem comes from the smallBufferedStream which is not reset between tests

This only happens in mocha (I made some test on an external program and this works).

How can I force my buffered stream to reset a new stream each time I call it inside mocha ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T05:07:22.303

您可以在 mocha 中使用 beforeEach 来重置每个测试之间的所有数据。因此，您上面的代码应该通过执行以下操作来工作：

```
//Have to initialize these here so they are in scope in the describe functions. 
var filedata = null; 
var smallBufferedStream = null;
describe('File content redirection', function(){
    beforeEach(function(done) {
        filedata = '';
        smallBufferedStream = new Buffered(20);
        smallBufferedStream.on("data", function(data){
            filedata += data;
        });
        done()
    });
    describe('reading small file from byte 0', function(){
        it('data should be equal', function(done){
                filedata = '';
                edp.readFile('./test.txt', 0, smallBufferedStream);
                smallBufferedStream.once('end', function(){
                    //sampleData value is "A small test.
                    assert.equal(filedata, sampleData);
                    done();
                });
        });
    });
    describe('reading small file from byte 8', function(){
        it('data should be equal', function(done){
                filedata = '';
                edp.readFile('./test.txt', 8, smallBufferedStream);
                smallBufferedStream.once('end', function(){
                    //sampleData value here is "A small test. 
                    //It should be 'test.'
                    assert.equal(filedata, sampleData.substr(8));
                    done();
                });
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T13:38:17.437

不确定这是最好的方法，但我终于发现问题似乎来自函数的异步调用。

我解决了复制我的代码的问题，如下所示：

```
describe('reading small file from byte 8', function(){
    it('data should be equal', function(done){
            var smallBufferedStream = new Buffered(20);
            var filedata = '';
            smallBufferedStream.on("data", function(data){
                    filedata += data;
            });
            var fd = edp.readFile(smallTestFile, 8, smallBufferedStream);
            smallBufferedStream.once('end', function(){
                assert.equal(filedata, sampleData.substr(1));

                done();
            });
    });
}); 
```

我将 8 替换为我需要测试的值。

# opencv - SIFT 匹配和识别？

> ID：15938793
> 
> 赞同：9
> 
> 时间：2013-04-11T00:22:00.250
> 
> 标签：opencv, computer-vision, sift, object-detection

我正在开发一个应用程序，我使用 SIFT + RANSAC 和 Homography 来查找对象（OpenCV C++，Java）。我面临的问题是，在有很多异常值的地方，RANSAC 表现不佳。

出于这个原因，我想尝试一下 SIFT 的作者说的很好：投票。

我读过我们应该在 4 维特征空间中投票，其中 4 维是：

*   位置 [x, y]（有人说 Traslation）
*   规模
*   方向

虽然使用 opencv 很容易获得匹配`scale`并且`orientation`使用：

```
cv::Keypoints.octave
cv::Keypoints.angle 
```

我很难理解如何计算位置。

我发现了一个[有趣的幻灯片](http://www.cs.utexas.edu/~cv-fall2012/slides/fall2012_02_specific_objects.pdf)，其中只有`one match`我们能够绘制一个边界框：

![](https://i.stack.imgur.com/ejPiP.png)

但我不明白如何只用一场比赛就画出那个边界框。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T03:14:45.377

您正在寻找适合从图像 1 到图像 2 的几何变换的最大匹配特征集。在这种情况下，它是相似变换，它有 4 个参数：平移`(dx, dy)`、尺度变化`ds`和旋转`d_theta`。

假设您已匹配特征：图像 1 中的 f1 和图像 2 中的 f2。设`(x1,y1)`f1 在图像 1 中的位置，`s1`设为其比例，`theta1`设为方向。同样，对于 f2 ，您有`(x2,y2)`、`s2`和。`theta2`

两个特征之间的转换是`(dx,dy) = (x2-x1, y2-y1)`.

两个特征之间的尺度变化是`ds = s2 / s1`。

两个特征之间的旋转是`d_theta = theta2 - theta1`。

所以, `dx`, `dy`, `ds`, 和`d_theta`是霍夫空间的维数。每个 bin 对应一个相似变换。

一旦您执行了 Hough 投票，并找到了最大 bin，该 bin 会为您提供从图像 1 到图像 2 的转换。您可以做的一件事是获取图像 1 的边界框并使用该转换对其进行转换：应用相应的转换，旋转和缩放到图像的角落。通常，您将参数打包到变换矩阵中，并使用齐次坐标。这将为您提供图像 2 中与您检测到的对象相对应的边界框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:28:14.540

When using the Hough transform, you create a signature storing the displacement vectors of every feature from the template centroid (either `(w/2,h/2)` or with the help of central moments).

E.g. for 10 SIFT features found on the template, their relative positions according to template's centroid is a `vector<{a,b}>`. Now, let's search for this object in a query image: every SIFT feature found in the query image, matched with one of template's 10, casts a vote to its corresponding centroid.

`votemap(feature.x - a*, feature.y - b*)+=1` where a,b corresponds to this particular feature vector.

If some of those features cast successfully at the same point (clustering is essential), you have found an object instance.

![enter image description here](https://i.stack.imgur.com/K1QJZ.png)

Signature and voting are reverse procedures. Let's assume `V=(-20,-10)`. So during searching in the novel image, when the two matches are found, we detect their orientation and size and cast a respective vote. E.g. for the right box centroid will be `V'=(+20*0.5*cos(-10),+10*0.5*sin(-10))` away from the SIFT feature because it is in half size and rotated by -10 degrees.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T06:56:43.663

为了完成[Dima](https://stackoverflow.com/users/13313/dima)，需要添加 4D 霍夫空间被量化为（可能很小）数量的 4D 框，其中每个框对应于其中心给出的相似度。

然后，对于通过试探性特征匹配获得的每个可能的相似性，将 1 添加到4D 空间中的相应框（或*单元格）中。*输出相似度由具有更多选票的单元格给出。

为了计算 1 个匹配的变换，只需在他的答案中使用 Dima 的公式。对于几对匹配，您可能需要使用一些最小二乘拟合。

最后，可以使用函数 应用变换`cv::warpPerspective()`，其中透视矩阵的第三行设置为`[0,0,1]`。

# ruby-on-rails - 存在分析和过滤滥用图像的方法

> ID：15938794
> 
> 赞同：1
> 
> 时间：2013-04-11T00:22:05.650
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我目前正在 Rails 中开发一个基于图像上传的应用程序，我想知道是否有一种技术可以在后端环境中分析图像并判断这些图像中的每一个是否包含滥用内容，例如色情内容。

我有这个疑问已经有一段时间了，因为我无法想象所有的“大网站”都只有人类来过滤成千上万的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:28:13.653

**人**在理解语义内容方面比**计算机更好。**

“滥用”是旁观者的看法，这是否会成为机器可计算的问题值得怀疑。

一般来说，如果您的问题涉及模式识别，请使用人员，只需谷歌“机械土耳其人”。

有例外，但很少，人工智能的高速公路上有鲜血。

# ruby-on-rails - 在 Ruby 1.8.7 上使用 Active Merchant

> ID：15938811
> 
> 赞同：0
> 
> 时间：2013-04-11T00:24:01.313
> 
> 标签：ruby-on-rails, ruby, activemerchant, ruby-1.8.7

我正在使用 Site5 来托管我的网站，这限制了我使用 ruby​​ 1.8.7。但是，我无法安装 Active Merchant gem，因为它具有 Money 作为依赖项 - 这需要 Ruby 1.9.2！有没有办法解决这个问题？也许声明旧版本的 ACtive Merchant 或 Money？如果这样做，它仍然可以使用吗？

这是我得到的错误：

```
Installing money (5.1.1) 
Gem::InstallError: money requires Ruby version >= 1.9.2.
An error occurred while installing money (5.1.1), and Bundler cannot continue.
Make sure that `gem install money -v '5.1.1'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:04:13.923

您应该能够使用 bundler 来确定您可以使用哪个版本。

否则，使用`git`或github来归咎于依赖。例如，您可以看到版本 5 中添加了[1.9.2 依赖项](https://github.com/RubyMoney/money/commit/81837dbaf690a46225ec021c2bf624f97e1bf1d7)，因此任何旧版本都应该没问题。您必须找出哪个版本的 ActiveMerchant 可以使用`money`4.x。

# c++ - 将套接字传输到地图

> ID：15938819
> 
> 赞同：1
> 
> 时间：2013-04-11T00:24:54.717
> 
> 标签：c++, sockets, winsock2

我正在尝试将刚刚创建的套接字传输到未签名的地图中，SOCKET- 但看起来它不起作用。我试图放入地图的原因是因为我需要跟踪客户端连接。这是我接受连接请求的地方：

```
SOCKET hAccepted = accept ( hSocket, NULL, NULL);
if(hAccepted == SOCKET_ERROR)
{
    return EXIT_FAILURE;
}
else
{
    unsigned clientId = 0;
    recv(hAccepted,reinterpret_cast<char *>( &clientId ), sizeof( clientId ),0);            

    if(clientSockets.find(clientId) == clientSockets.cend())
        clientSockets[clientId] = hAccepted;
    else 
        return EXIT_FAILURE;

    return EXIT_SUCCESS; 
```

我的客户在连接后立即发送一个唯一 ID，我希望我的地图在之后管理它们。

# java - Java——如何从超类列表中干净地构造子类列表？

> ID：15938821
> 
> 赞同：0
> 
> 时间：2013-04-11T00:25:08.650
> 
> 标签：java, inheritance

具体来说，我有一个对象列表。该类对象的每个子类都与特定的功能相关联。

这是我对这个问题的天真解决方案，而且很丑：

```
List<SuperClass> superClasses = ...

List<Subclass1> obj1 = Lists.newArrayList();
List<Subclass1> obj2 = Lists.newArrayList();
List<Subclass1> obj3 = Lists.newArrayList();
List<Subclass1> obj4 = Lists.newArrayList();
...

for (SuperClass obj : superClasses) {
  if (obj.getClass().equals(Subclass1.class)) {
    obj1.add((Subclass1) obj);
  }
}

//repeat for each subclass 
```

我也尝试过这样的事情：

```
public Map<Class, List<SuperClass>> constructMap(List<SuperClass> superClasses); 
```

但这不能用：

```
(List<Subclass1>) constructMap(superClasses).get(Subclass1.class)
cannot cast from List<SuperClass> to List<Subclass1>. 
```

我注定要在这里使用幼稚的代码吗？真的没有聪明的方法来获取超类对象的列表并根据它们的实际类来处理它们吗？

* * *

这是我要解决的问题：

```
public Driver {

    List<Fruit> fruits = collectAllFruit();

    StemHandler.pullStem(fruitsThatAreApples, fruitsThatArePears);
    ColorHandler.getColor(fruitsThatAreApples, fruitsThatAreOranges, fruitsThatArePears);

public interface Fruit {

    getColor();
}

public class Apple implements Fruit {

    getColor();
    pullStem();
}

public class Orange implements Fruit {

    getColor();
    peel();

}

public class Pear implements Fruit {

    getColor();
    pullStem();

}

public interface FruitHandler {

}

public class StemHandler extends FruitHandler {

    pullStem(List<Apple>, List<Pear>)

}

public class ColorHandler extends FruitHandler {

    getColor(List<Apple>, List<Orange>, List<Pear>)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:33:54.147

正确的做法是使用基类型 ( ) 列表来使用多态性`List<SuperClass>`。您不应该在遍历不同子类的循环中以不同方式处理它们。您应该做的是调用在超类（更好的是接口）上定义的特定方法，并在每个子类中以不同的方式实现该方法（实现）。请参阅[返回扩展类](https://stackoverflow.com/questions/15816229/returning-an-extended-class/15816518#15816518)

```
interface MyInteface{
    public void doSomething();
}

class Sub1 implements MyInterface{
    public void doSomething() {
        System.out.println("Behavior # 1");
    }
}

class Sub2 implements MyInterface{
    public void doSomething() {
        System.out.println("Different Behavior");
    }
}

for (MyInteface obj : superClasses) {
    // Will do different things for different implementations
    obj.doSomething();
} 
```

秘诀是定义不同实现的共同方面，并能够将它们全部压缩到同一个签名中。

# razor - 如何在 asp.net MVC4 razor 中嵌入分号

> ID：15938830
> 
> 赞同：1
> 
> 时间：2013-04-11T00:26:23.870
> 
> 标签：razor, asp.net-mvc-4

我有一个要构建的 URL，如下所示：

```
 http://cache.mysite.com/sponsorimage/718.jpg;format=gif;w=50;h=50;scale=both;mode=pad;bgcolor=white 
```

创建它的剃刀是这样的：

```
 @(sponsor.ImageURL)
   <img src="@(sponsor.ImageURL)&#59;format=gif&#59;w=50&#59;h=50&#59;scale=both&#59;mode=pad&#59;bgcolor=white" alt="@sponsor.SponsorName"  /> 
```

这只是感觉很丑陋。我是剃须刀的新手。有什么更好的方法来做到这一点。也就是说，在字符串中嵌入分号（我没有使用 ? 和 & 故意）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:38:02.980

非常冗长，但更通用。

```
@{
    UriBuilder ub = new UriBuilder();
    NameValueCollection queries = HttpUtility.ParseQueryString(ub.Query)
    queries.Add("format", "gif")
    queries.Add("w", "59")
    queries.Add("h", "50")
    queries.Add("scale", "both")
    queries.Add("mode", "pad")
    queries.Add("bgcolor", "white")
    ub.Query = queries.ToString()
}

<img src="@HttpUtility.UrlEncode(sponsor.ImageURL & ub.Query.Replace("?", ";").Replace("&", ";"))" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:59:26.827

我会使用 string.Format：

```
src="@(string.Format("{0};format=gif;w=50;h=50;scale=both;mode=pad;bgcolor=white", sponsor.ImageURL))" 
```

# c++ - 读取字符串时核心转储？

> ID：15938831
> 
> 赞同：1
> 
> 时间：2013-04-11T00:26:24.690
> 
> 标签：c++, string

我正在做一个介绍 C++ 的作业，我必须读取一个字符串，然后计算字符串本身中字母的频率，并输出结果。我不允许修改我的任何函数头（如果可以的话，我现在可能不会在这里），而且我看到大部分更困难的部分都已关闭。我得到的唯一问题是我以前能够读取我的字符串，但我的程序无法正确计算第一个字符的出现。在我修复它之后，我在读取字符串的函数中出现了分段错误。到目前为止，我的代码是这样的：

```
#include <iostream>
#include <iomanip>
#include <string>
#include <vector>

using namespace std;

//FUNCTION PROTOTYPES 

string getPhrase(const string & prompt);   
int charIndex(const vector<char> & list, char letter);
void addLetter(vector<char> & letters, vector<int> & freqs, char letter);

int main()
{
    // Define your local variables
const int COLUMNWIDTH = 2;  //will be used in later functions
vector<char> letters;  //list of letters in the string
vector<int> freqs;     //corresponding list of frequencies of letters
vector<char> list;     //not so sure whats up with this, but it
char letter;           //the current letter 
int index =-1;         //index location of letter, if == -1, then letter is not currently indexed and needs to be
string prompt;  //user input statement 

//Input string
const string phrase = getPhrase(prompt); 

    int i =0;
while (phrase[i] == ' ')//determine first term of phrase that isn't a space, then make that space the first term of list so next loop can run
  {
    i++;
  }
list[0] = phrase[i];

for (int i = 0; i<phrase.length(); i++)
  {
    index = charIndex(list,phrase[i]);
    if (phrase[i]!= ' ')
      {
    if (index == -1) 
      {
        letter = phrase[i];
        addLetter(letters, freqs, letter);
        list = letters;
        index = charIndex(list,letter);
      }
      }
  }

  return 0;
}

// FUNCTION DEFINITIONS GO HERE:
string getPhrase(const string &prompt)
{
  string phrase;
  std::cout<<"Enter phrase: ";    //**ERROR IS OCCURING HERE **
  std::getline(cin, phrase);      //**ERROR IS OCCURING HERE **

  return phrase;
}

 //determine the index location of the specific letter 
 int charIndex(const vector<char> &list, char letter)

 {
   int i = 0;
   int index = -1;
   while ( i <= list.size())
     {
       if (letter == list[i])
     {
       index = i;
       if (index != -1)
         {
           i = list.size() +1;
         }
     }
       i++;
     }
   return (index);
 }    

//addLetter adds the new letter to the list of letters, and the corresponding frequency list is changed 
void addLetter(vector<char> & letters, vector<int> & freqs, char letter)  
{
  letters.push_back(letter);
  freqs.push_back(1);

} 
```

我希望我能够删除很多“const”，但我不能。我也经历过并确定错误发生在我的“getLine”的“getPhrase”函数中，并且不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:33:06.240

段错误发生在：

```
list[0] = phrase[i]; 
```

因为虽然您声明`list`为向量，但您实际上还没有分配任何元素，所以`[0]`不存在。解决它的一种方法是这样做：

```
list.push_back(phrase[i]); 
```

# regex - 如何在 Scala 中对进程输出应用正则表达式？

> ID：15938832
> 
> 赞同：1
> 
> 时间：2013-04-11T00:26:31.243
> 
> 标签：regex, scala

我试图在 Scala 中获得与在 Mac/Linux 中运行以下命令相同的输出：

```
ps -ef | egrep "(mongo|mysql|rabbitmq)" 
```

这是我的实现，但我正在寻找一个优雅的实现。

```
import sys.process._
import scala.collection.mutable.HashSet

object Regex {
  val set = new HashSet[String]                  
  val logger = ProcessLogger(
    (o: String) => """(mysql|mongo|rabbitmq)""".r findAllIn o foreach (set += _),
    (e: String) => println(e))                  
  "ps -ef " ! logger                             
  println(set)                 
} 
```

我尝试的另一种方法是从 ProcessLogger 调用“启动”函数，但无法使其正常工作。

```
val Procs = """(mysql|mongo|rabbitmq)""".r         
def started(i: String) = i match {
  case Procs(p) => p
  case _ => null
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T02:56:56.003

`Source`您可以使用和使用常规收集方法逐行处理输出：

```
io.Source
  .fromString("ps -ef".!!)
  .getLines()
  .filter(_.matches(".*(mysql|mongo).*"))
  .foreach(println) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T02:32:47.730

```
Seq("bash", "-c", """ps -ef | egrep "(mongo|mysql|rabbitmq)"""").! 
```

# javascript - Angular.js 组织是否具有全局变量

> ID：15938839
> 
> 赞同：1
> 
> 时间：2013-04-11T00:27:24.753
> 
> 标签：javascript, angularjs

我正在开发一个角度应用程序，并且知道有几种方法可以构建它。

首先是创建一个全局命名空间，例如：

```
var App = angular.module('app', []); 
```

然后，例如使用控制器，我会这样做：

```
App.controller('HomeController', ['$scope', function($scope) {

}]); 
```

另一种方法（据我所知）是模块化我的控制器，例如：

```
angular.module('App', ['home']);

angular.module('home').controller('HomeController', ['$scope', function($scope) {

}]); 
```

另一种方法，如下所示：

```
angular.module('App'), ['App.controllers']);

angular.module('App.controllers').controller('HomeController', ['$scope', function($scope) {

}]); 
```

这些是否有任何好处，或者是否有最佳实践或通用风格在 Angular 社区中得到适应？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T05:48:19.040

因此，在处理了一些使用 AngularJS 的大型项目之后，我想到了一些事情：

1.  最终结果明智，您概述的三种方法之间没有区别
2.  注意 2 和 3，你可能会遇到 AngularJS 的错误，抱怨你没有名为“home”的模块。事实证明，调用`angular.module('home')`告诉 AngularJS 查找已经创建的名为 home 的模块。调用`angular.module('home', [])`告诉它创建一个名为 home 的新模块。微妙，但主要的区别。

也就是说，**如果**您正在考虑开发想要在您构建的所有应用程序中重用的组件，我强烈建议您遵循后一种方法。例如，您正在构建一些 Web 应用程序，并且您已经开发了自己的 UI 组件，例如 datepicker、carousel 等。现在，由于您不想一次又一次地对它们进行编码，那么您可以将它们放在一个模块中（说“Common.components”）。

然后，您可以仅将 JS 文件**导出**为可以包含在所有项目中的库，而无需复制粘贴代码或从大型应用程序的内部提取它。

这为您提供了很好的模块化、可重复使用的部分，可以在各种应用程序中很好地发挥作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:56:23.297

我认为这两种方法都没有任何特定的好处。我什至认为他们之间没有任何区别。到目前为止，我不知道任何 Angular.js 代码样式的“指南”。这是可读性和个人品味的问题。这里有几个我觉得有用的链接（Angular 文档并不完美，礼貌地说）：

1.  [Angular.js 初学者的 8 个技巧](http://vxtindia.com/blog/8-tips-for-angular-js-beginners/)
2.  [AngularJS 提示和技巧](http://deansofer.com/posts/view/14/AngularJs-Tips-and-Tricks-UPDATED)

# javascript - 单击按钮时如何执行功能？

> ID：15938843
> 
> 赞同：-2
> 
> 时间：2013-04-11T00:28:03.500
> 
> 标签：javascript

在不使用 jQuery 的情况下在 JavaScript 中单击按钮时执行函数的最佳实践是什么？

我正在寻找一个看起来像这样的解决方案：

```
var button = document.getElementById('myButton');

function sayHello() {
    alert('hello');
}

button.attachFunctionToClick(sayHello); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:30:20.023

附加事件的标准方式是这样的：

```
var button = document.getElementById("myButton");
button.addEventListener("click", sayHello, false); 
```

[阅读更多](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)

旧版本的 ie（小于 9）虽然不支持 addeventlistener ，但您必须回退到 attachEvent 函数。

```
button.attachEvent('click',sayHello); 
```

当然，您仍然可以`onclick`像这样添加到元素的方法中：

```
button.onclick = sayHello 
```

以上 3 个示例假设您没有将任何参数传递给回调函数，这意味着它们将接收的唯一参数将是事件对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T00:31:11.177

```
var button = document.getElementById('myButton');
function sayHello() {
    alert('hello');
}

if(document.addEventListener)
    button.addEventListener('click',sayHello,false);
else
    button.attachEvent('click',sayHello); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:31:19.380

```
<script>
    function test() {
        alert('aaa');
    }
</script>

<input type="button" onclick="test()" /> 
```

或者

```
<input type="button" id="myButton" /> 
```

这在关闭正文标记之前的页面末尾：

```
<script>
    function test() {
        alert('aaa');
    }
    var button = document.getElementById('myButton');
    button.onclick = test;
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T00:34:57.100

对于浏览器合规性，这里有一个简单的辅助函数：

```
function setEvent (element, event, handler) {
  if(document.addEventListener){
    element.addEventListener(event, handler);
   }else{
      element.attachEvent("on" + event, handler, false);
   }
}; 
```

**重要提示**：请注意`"on" + event`此处。它用于 IE 中的事件。[在这里](http://msdn.microsoft.com/en-us/library/aa741902%28v=vs.85%29.aspx)查看更多。

[**例子**](http://jsfiddle.net/PGdsb/)

或者您可以尝试：

```
button.onclick = sayHello; 
```

> 因为它本质上是 DOM 0 的一部分，所以这种方法得到了广泛的支持，并且不需要特殊的跨浏览器代码；因此它通常用于动态注册事件侦听器，除非需要 addEventListener() 的额外功能。

[**例子**](http://jsfiddle.net/z5ffR/)

[attachEvent](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx) - 用于 IE < 9：

> 将指定的函数绑定到一个事件，以便每当事件在对象上触发时调用该函数。

[添加事件监听器](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)：

> addEventListener() 在单个目标上注册单个事件侦听器。事件目标可以是文档中的单个元素、文档本身、窗口或 XMLHttpRequest。
> 
> 要为目标注册多个事件侦听器，请为同一目标调用 addEventListener() 但具有不同的事件类型、事件侦听器或捕获参数。

# debugging - Android NDK debugging: device can't be opened

> ID：15938848
> 
> 赞同：2
> 
> 时间：2013-04-11T00:28:28.927
> 
> 标签：debugging, android-ndk

I am trying to debug my native library for some time now and it just won't work. The native code works and compiles but for optimization purposes I would really need to debug the native code.

I have read and followed many tutorials (e.g. [tutorial1](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/), [tutorial2](http://www.doc.ic.ac.uk/~cb908/Android%20NDK%20Debugging.pdf)) step by step but I get some errors that I can't find a solution for.

I have set up the Android and C++ debug configuration and after I debug with the Android debug configuration it hits the breakpoint after loading the library (only one). I go to cygwin and see if my device is detected (which it is). Then run:

```
$ ndk-gdb --start --verbose 
```

Which gives me the following output:

```
Android NDK installation path: /cygdrive/c/Android/android-ndk/android-ndk-r8
Using default adb command: /cygdrive/c/Android/android-sdk/platform-tools/adb
ADB version found: Android Debug Bridge version 1.0.29
Using ADB flags:
Using auto-detected project path: .
Found package name: com.mypackage
ABIs targetted by application: armeabi-v7a
Device API Level: 15
Device CPU ABIs: armeabi-v7a armeabi
Compatible device ABI: armeabi-v7a
Using gdb setup init: ./libs/armeabi-v7a/gdb.setup
Using toolchain prefix: /cygdrive/c/Android/android-ndk/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-
Using app out directory: ./obj/local/armeabi-v7a
Found debuggable flag: true
Found device gdbserver: /data/data/com.mypackage/lib/gdbserver
Found data directory: '/data/data/com.mypackage'
Found first launchable activity: .MainActivity
Launching activity: com.mypackage/.MainActivity
## COMMAND: /cygdrive/c/Android/android-sdk/platform-tools/adb shell am start -n com.mypackage/.MainActivity
Starting: Intent { cmp=com.mypackage/.MainActivity }
## COMMAND: /cygdrive/c/Android/android-sdk/platform-tools/adb shell sleep 2
Found running PID: 6907
Launched gdbserver succesfully.
Setup network redirection
## COMMAND: /cygdrive/c/Android/android-sdk/platform-tools/adb shell run-as com.mypackage lib/gdbserver +debug-socket --attach 6907
## COMMAND: /cygdrive/c/Android/android-sdk/platform-tools/adb forward tcp:5039 localfilesystem:/data/data/com.mypackage/debug-socket
Attached; pid = 6907
Could not open remote device: Invalid argument.
Detaching process(es): 6907
## COMMAND: /cygdrive/c/Android/android-sdk/platform-tools/adb pull /system/bin/app_process obj/local/armeabi-v7a/app_process
2405 KB/s (9852 bytes in 0.004s)
Pulled app_process from device/emulator.
## COMMAND: /cygdrive/c/Android/android-sdk/platform-tools/adb pull /system/lib/libc.so obj/local/armeabi-v7a/libc.so
4994 KB/s (286412 bytes in 0.056s)
Pulled libc.so from device/emulator.

User@This-PC /cygdrive/c/Development/MyAppAndroid/trunk/MyApp
$ 
```

I can see that the gdbserver has been launched successfully, which is good, but I don't know why this happens:

```
Could not open remote device: Invalid argument 
```

because adb can connect to the device (as tested before). After that it seems to me (I am not too versed with cygwin) that gdb just closes everything and that would make the c++ Debug in eclipse fail as well. When I run it, the following error:

```
76-target-select remote localhost:5039
&"Remote communication error: Bad file descriptor.\n"
Remote communication error: Bad file descriptor.
76^error,msg="Remote communication error: Bad file descriptor." 
```

Is there anything that could prevent my device from being detected by the adb? I use this device for testing (without c++ debugging) all the time without problem.

Or does the problem lie in the port error?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T08:54:33.247

我遇到了同样的问题，所以我在 ndk-gdb 文件中替换了以下几行：

原来的：

```
run adb_cmd shell run-as $PACKAGE_NAME lib/gdbserver +$DEBUG_SOCKET --attach $PID & 
```

替换：

```
run adb_cmd shell run-as $PACKAGE_NAME lib/gdbserver tcp:5888 --attach $PID & 
```

和原文：

```
run adb_cmd forward tcp:$DEBUG_PORT localfilesystem:$DATA_DIR/$DEBUG_SOCKET 
```

替换：

```
run adb_cmd forward tcp:5039 tcp:5888 
```

这解决了“无效参数”问题。

P。

# internet-explorer - processing js .pde referenced in canvas not working on Firefox & IE

> ID：15938851
> 
> 赞同：0
> 
> 时间：2013-04-11T00:28:54.380
> 
> 标签：internet-explorer, firefox, canvas, processing

I have the following working in Safari & Chrome on a Mac. I just switched over to check Firefox Mac and IE on PC and it's not working. I can't seem to figure out why! Any suggestions would be grand.

[http://davidcool.com/experiments/follow.html](http://davidcool.com/experiments/follow.html)

The code:

```
<!DOCTYPE html>
<html>
<head>
    <title>follow</title>
    <script src=processing-1.4.1.min.js></script>
</head>
<body>
    <div style="width:100%; height:100%; position:absolute; top:50;">
        <canvas data-processing-sources="harmonograph_v2_1_logo.pde" tabindex="0" id="__processing0" width="1300" height="160"></canvas>
    </div>
</body>
</html> 
```

As per Mike's suggestions, I stripped this down to bare bones and it still doesn't work in PC IE or Mac Firefox. Chrome and Safari Mac work fine. I added in the encoding as firebug was giving me an error. No effect.

```
<!DOCTYPE html>
<html>
<head>
<title>test pjs</title>
    <meta charset='utf-8'>
<script src="processing-1.4.1.min.js"></script>
</head>
<body>
<div>
    <canvas data-processing-sources="harmonograph.pjs"></canvas>
</div>
</body>
</html> 
```

I also built a converter and converted the sketch from processing .pde file to processing js .pjs format here: [http://generactive.net/tools/pde_to_pjs/convert_to_pjs.html?#](http://generactive.net/tools/pde_to_pjs/convert_to_pjs.html?#)

The converted files work fine in the same two browsers as well.

Okay, an update on this problem. I've since replaced the sketch and it now works. So the problem is in the sketch somewhere. I'm not sure what the problem is, or why it works on some brewers and not others, but something in the sketch kills certain browsers. The code above should work fine.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:46:14.180

Pjs 库的名称中有特殊字符，因此需要引用：`<script src="processing-1.4.1.min.js"></script>`. 最好只引用属性字符串，因为只有连续的非特殊字符串可以不加引号。

其次，您并不需要这些`tabindex="0" id="__processing0"`位，它们是由 Pjs 自动添加的（如果您使用的是自指定的 id 属性，最好给它一个真实的名称）。

最后，`<div style="width:100%; height:100%; position:absolute; top:50;">`在高度方面不会做太多事情，除非您为 html 和 body 指定 CSS 规则，将它们也设置为高度 100%。基本上，首先肯定要让事情正常工作，我建议不要在画布和容器中指定宽度和高度。让 div 找出它需要自动调整到的尺寸，并让画布从pde 文件中函数`size(...,...)`内部的调用中获取其大小。`setup`

# perl - 在文件中特定字符串的每个实例之后获取接下来的 7 个字符

> ID：15938853
> 
> 赞同：0
> 
> 时间：2013-04-11T00:29:13.923
> 
> 标签：perl

我正在寻找一种方法来获取`"ISBN="`文件中每个单词实例后面的 7 个字符。`ISBN=`文件中每行一个。

所以像...

```
my @data = ();
my $word = "ISBN=";

foreach my $line (@file) {
    if (index($line, $word) ge 0) {
        my $d = next seven characters;
        push (@data, $d);
    }
} 
```

我没有线索...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:31:36.560

听起来像一个正则表达式和捕获会更容易：

```
if ($line =~ /ISBN=(.{7})/) {
    push @data, $1;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T00:32:16.313

```
if ($line =~ /\Q$word\E(.{7})/) {
  push(@data, $1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:32:49.613

要从字符串中的已知索引获取固定数量的字符，请使用[substr](http://perldoc.perl.org/functions/substr.html)函数：

```
my $d = substr $line, index($line, $word) + length($word), 7; 
```

# ruby - 将字符串添加到时间成员并保存到数据库

> ID：15938856
> 
> 赞同：0
> 
> 时间：2013-04-11T00:29:37.773
> 
> 标签：ruby, ruby-on-rails-3, string, time, save

我的数据库表中有一个`duration`列，我想在其中插入一个时间跨度，例如 02:00 或 19:20（小时和分钟），列类型是时间。用户会看到一个包含两个下拉列表的表单，一个用于分钟，一个用于小时：

```
=f.select :durationhours, options_for_select((0..23).to_a)
=f.select :durationminutes, options_for_select((0..59).to_a) 
```

该表单是使用 form_for 生成的，我的数据库中没有任何 durationminutes 或 durationhours，因此我在模型中使用了 validates_acceptance_of。

```
attr_accessible :durationhours, :durationminutes #not sure this line is necessary
validates_acceptance_of :durationhours, :durationminutes 
```

提交表单时，我试图将小时和分钟放在一起并将它们保存到数据库中，但这失败了，没有显示任何错误（终端中只提到了回滚）。我想做的是：

```
@record.duration = params[:record][:durationhours].to_s.rjust(2, "0") + ":" + params[:record][:durationminutes].to_s.rjust(2, "0")
# but I even tried this, and it doesn't work:
@record.duration = "13:30" 
```

如果没有上面我手动设置持续时间的行，则`@record.save`可以正常工作。这是执行保存后我遇到的错误`@record.errors.inspect`：

```
#<ActiveModel::Errors:0x10ba5be08 @messages=#<OrderedHash {:durationhours=>["must be accepted"],
:durationminutes=>["must be accepted"]}>, @base=#<Record id: nil, details: "",
happened: "2013-04-11 02:19:10", duration: "2000-01-01 12:12:00", activity_id: 17,
created_at: nil, updated_at: nil, price: nil>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:41:31.023

`validates_acceptance_of`不是您要在此处使用的验证。该验证器验证是否设置了布尔值。

也就是说，与其创建字符串，不如考虑将持续时间存储为整数。

```
self.duration = self.durationminutes.to_i.minutes + self.durationseconds.to_i 
```

这将为您提供以秒为单位的持续时间，您可以将其存储在数据库中的单个整数字段中。

```
durationminutes = 10
durationseconds = 24
duration = durationminutes.minutes + durationseconds
=> 624

624 / 1.minute => 10
624 - 10.minutes => 24 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T00:43:22.157

你可以这样做

```
irb> time = '20'.to_i.hours + '05'.to_i.minutes
=> 72300 seconds
irb> Time.at time
=> 1970-01-01 21:05:00 +0100 
```

我不确定为什么它在我的控制台上更改为 +1 时间，但您可以通过以下方式获取 UTC：

```
irb> Time.at(time).utc
=> 1970-01-01 20:05:00 UTC 
```

# mongodb - 每日分组内的 MongoDB 聚合

> ID：15938859
> 
> 赞同：63
> 
> 时间：2013-04-11T00:29:56.657
> 
> 标签：mongodb, mongodb-query, aggregation-framework

我在 mongo 中有一些看起来像这样的文档：

```
{
  _id : ObjectId("..."),
  "make" : "Nissan",
  ..
},
{
  _id : ObjectId("..."),
  "make" : "Nissan",
  "saleDate" :  ISODate("2013-04-10T12:39:50.676Z"),
  ..
} 
```

理想情况下，我希望能够按品牌计算每天售出的车辆数量。然后，我想查看今天或过去 7 天中的某个窗口，例如今天。

我能够用一些丑陋的代码完成日常视图

```
db.inventory.aggregate(
  { $match : { "saleDate" : { $gte: ISODate("2013-04-10T00:00:00.000Z"), $lt: ISODate("2013-04-11T00:00:00.000Z")  } } } ,
  { $group : { _id : { make : "$make", saleDayOfMonth : { $dayOfMonth : "$saleDate" } }, cnt : { $sum : 1 } } }
) 
```

然后产生结果

```
{
  "result" : [
    {
      "_id" : {
        "make" : "Nissan",
        "saleDayOfMonth" : 10
      },
      "cnt" : 2
    },
    {
      "_id" : {
        "make" : "Toyota",
        "saleDayOfMonth" : 10
      },
      "cnt" : 4
    },
  ],
  "ok" : 1
} 
```

所以没关系，但我更希望不必更改查询中的两个日期时间值。然后，正如我上面提到的，我希望能够运行此查询（同样，不必每次都修改它）并查看上周按天分类的相同结果。

哦，这是我一直用于查询的示例数据

```
db.inventory.save({"make" : "Nissan","saleDate" :  ISODate("2013-04-10T12:39:50.676Z")});
db.inventory.save({"make" : "Nissan"});
db.inventory.save({"make" : "Nissan","saleDate" :  ISODate("2013-04-10T11:39:50.676Z")});
db.inventory.save({"make" : "Toyota","saleDate" :  ISODate("2013-04-09T11:39:50.676Z")});
db.inventory.save({"make" : "Toyota","saleDate" :  ISODate("2013-04-10T11:38:50.676Z")});
db.inventory.save({"make" : "Toyota","saleDate" :  ISODate("2013-04-10T11:37:50.676Z")});
db.inventory.save({"make" : "Toyota","saleDate" :  ISODate("2013-04-10T11:36:50.676Z")});
db.inventory.save({"make" : "Toyota","saleDate" :  ISODate("2013-04-10T11:35:50.676Z")}); 
```

在此先感谢，凯文

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2014-12-22T17:59:06.657

在 Mongo 2.8 RC2 中，有一个新的数据聚合运算符：[$dateToString](http://docs.mongodb.org/master/reference/operator/aggregation/dateToString/)，可用于按天分组，并在结果中简单地包含“YYYY-MM-DD”：

文档中的示例：

```
db.sales.aggregate(
  [
     {
         $project: {
                yearMonthDay: { $dateToString: { format: "%Y-%m-%d", date: "$date" } },
                time: { $dateToString: { format: "%H:%M:%S:%L", date: "$date" } }
         }
     }
  ]
) 
```

将导致：

```
{ "_id" : 1, "yearMonthDay" : "2014-01-01", "time" : "08:15:39:736" } 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-04-11T04:01:48.000

**更新** 更新的答案基于 3.6 中的日期功能，并显示了如何在没有销售的范围内包含日期（包括我的任何原始答案中都没有提到）。

样本数据：

```
db.inventory.find()
{ "_id" : ObjectId("5aca30eefa1585de22d7095f"), "make" : "Nissan", "saleDate" : ISODate("2013-04-10T12:39:50.676Z") }
{ "_id" : ObjectId("5aca30eefa1585de22d70960"), "make" : "Nissan" }
{ "_id" : ObjectId("5aca30effa1585de22d70961"), "make" : "Nissan", "saleDate" : ISODate("2013-04-10T11:39:50.676Z") }
{ "_id" : ObjectId("5aca30effa1585de22d70962"), "make" : "Toyota", "saleDate" : ISODate("2013-04-09T11:39:50.676Z") }
{ "_id" : ObjectId("5aca30effa1585de22d70963"), "make" : "Toyota", "saleDate" : ISODate("2013-04-10T11:38:50.676Z") }
{ "_id" : ObjectId("5aca30effa1585de22d70964"), "make" : "Toyota", "saleDate" : ISODate("2013-04-10T11:37:50.676Z") }
{ "_id" : ObjectId("5aca30effa1585de22d70965"), "make" : "Toyota", "saleDate" : ISODate("2013-04-10T11:36:50.676Z") }
{ "_id" : ObjectId("5aca30effa1585de22d70966"), "make" : "Toyota", "saleDate" : ISODate("2013-04-10T11:35:50.676Z") }
{ "_id" : ObjectId("5aca30f9fa1585de22d70967"), "make" : "Toyota", "saleDate" : ISODate("2013-04-11T11:35:50.676Z") }
{ "_id" : ObjectId("5aca30fffa1585de22d70968"), "make" : "Toyota", "saleDate" : ISODate("2013-04-13T11:35:50.676Z") }
{ "_id" : ObjectId("5aca3921fa1585de22d70969"), "make" : "Honda", "saleDate" : ISODate("2013-04-13T00:00:00Z") } 
```

定义`startDate`和`endDate`作为变量并在聚合中使用它们：

```
startDate = ISODate("2013-04-08T00:00:00Z");
endDate = ISODate("2013-04-15T00:00:00Z");

db.inventory.aggregate([
  { $match : { "saleDate" : { $gte: startDate, $lt: endDate} } },
  {$addFields:{
     saleDate:{$dateFromParts:{
                  year:{$year:"$saleDate"},
                  month:{$month:"$saleDate"},
                  day:{$dayOfMonth:"$saleDate"}
     }},
     dateRange:{$map:{
        input:{$range:[0, {$subtract:[endDate,startDate]}, 1000*60*60*24]},
        in:{$add:[startDate, "$$this"]}
     }}
  }},
  {$unwind:"$dateRange"},
  {$group:{
     _id:"$dateRange", 
     sales:{$push:{$cond:[
                {$eq:["$dateRange","$saleDate"]},
                {make:"$make",count:1},
                {count:0}
     ]}}
  }},
  {$sort:{_id:1}},
  {$project:{
     _id:0,
     saleDate:"$_id",
     totalSold:{$sum:"$sales.count"},
     byBrand:{$arrayToObject:{$reduce:{
        input: {$filter:{input:"$sales",cond:"$$this.count"}},
        initialValue: {$map:{input:{$setUnion:["$sales.make"]}, in:{k:"$$this",v:0}}}, 
        in:{$let:{
           vars:{t:"$$this",v:"$$value"},
           in:{$map:{
              input:"$$v",
              in:{
                 k:"$$this.k",
                 v:{$cond:[
                     {$eq:["$$this.k","$$t.make"]},
                     {$add:["$$this.v","$$t.count"]},
                     "$$this.v"
                 ]}
              }
           }}
        }}
     }}}
  }}
]) 
```

在样本数据上，这给出了结果：

```
{ "saleDate" : ISODate("2013-04-08T00:00:00Z"), "totalSold" : 0, "byBrand" : {  } }
{ "saleDate" : ISODate("2013-04-09T00:00:00Z"), "totalSold" : 1, "byBrand" : { "Toyota" : 1 } }
{ "saleDate" : ISODate("2013-04-10T00:00:00Z"), "totalSold" : 6, "byBrand" : { "Nissan" : 2, "Toyota" : 4 } }
{ "saleDate" : ISODate("2013-04-11T00:00:00Z"), "totalSold" : 1, "byBrand" : { "Toyota" : 1 } }
{ "saleDate" : ISODate("2013-04-12T00:00:00Z"), "totalSold" : 0, "byBrand" : {  } }
{ "saleDate" : ISODate("2013-04-13T00:00:00Z"), "totalSold" : 2, "byBrand" : { "Honda" : 1, "Toyota" : 1 } }
{ "saleDate" : ISODate("2013-04-14T00:00:00Z"), "totalSold" : 0, "byBrand" : {  } } 
```

这种聚合也可以通过两个`$group`阶段来完成，一个简单`$project`的而不是`$group`复杂的`$project`。这里是：

```
db.inventory.aggregate([
   {$match : { "saleDate" : { $gte: startDate, $lt: endDate} } },
   {$addFields:{saleDate:{$dateFromParts:{year:{$year:"$saleDate"}, month:{$month:"$saleDate"}, day:{$dayOfMonth : "$saleDate" }}},dateRange:{$map:{input:{$range:[0, {$subtract:[endDate,startDate]}, 1000*60*60*24]},in:{$add:[startDate, "$$this"]}}}}},
   {$unwind:"$dateRange"},
   {$group:{
      _id:{date:"$dateRange",make:"$make"},
      count:{$sum:{$cond:[{$eq:["$dateRange","$saleDate"]},1,0]}}
   }},
   {$group:{
      _id:"$_id.date",
      total:{$sum:"$count"},
      byBrand:{$push:{k:"$_id.make",v:{$sum:"$count"}}}
   }},
   {$sort:{_id:1}},
   {$project:{
      _id:0,
      saleDate:"$_id",
      totalSold:"$total",
      byBrand:{$arrayToObject:{$filter:{input:"$byBrand",cond:"$$this.v"}}}
   }}
]) 
```

结果相同：

```
{ "saleDate" : ISODate("2013-04-08T00:00:00Z"), "totalSold" : 0, "byBrand" : { "Honda" : 0, "Toyota" : 0, "Nissan" : 0 } }
{ "saleDate" : ISODate("2013-04-09T00:00:00Z"), "totalSold" : 1, "byBrand" : { "Honda" : 0, "Nissan" : 0, "Toyota" : 1 } }
{ "saleDate" : ISODate("2013-04-10T00:00:00Z"), "totalSold" : 6, "byBrand" : { "Honda" : 0, "Toyota" : 4, "Nissan" : 2 } }
{ "saleDate" : ISODate("2013-04-11T00:00:00Z"), "totalSold" : 1, "byBrand" : { "Toyota" : 1, "Honda" : 0, "Nissan" : 0 } }
{ "saleDate" : ISODate("2013-04-12T00:00:00Z"), "totalSold" : 0, "byBrand" : { "Toyota" : 0, "Nissan" : 0, "Honda" : 0 } }
{ "saleDate" : ISODate("2013-04-13T00:00:00Z"), "totalSold" : 2, "byBrand" : { "Honda" : 1, "Toyota" : 1, "Nissan" : 0 } }
{ "saleDate" : ISODate("2013-04-14T00:00:00Z"), "totalSold" : 0, "byBrand" : { "Toyota" : 0, "Honda" : 0, "Nissan" : 0 } } 
```

基于2.6的原始答案：

您可能想在[此处](http://www.kamsky.org/1/post/2013/03/stupid-date-tricks-with-aggregation-framework.html)查看我的博客文章，了解如何在聚合框架中处理各种日期操作。

您可以做的是使用`$project`阶段将您的日期截断为每日分辨率，然后在整个数据集（或只是其中的一部分）上运行聚合，并按日期和制作进行聚合。

使用您的示例数据，假设您想知道今年按品牌销售的汽车数量：

```
match={"$match" : {
               "saleDate" : { "$gt" : new Date(2013,0,1) }
      }
};

proj1={"$project" : {
        "_id" : 0,
        "saleDate" : 1,
        "make" : 1,
        "h" : {
            "$hour" : "$saleDate"
        },
        "m" : {
            "$minute" : "$saleDate"
        },
        "s" : {
            "$second" : "$saleDate"
        },
        "ml" : {
            "$millisecond" : "$saleDate"
        }
    }
};

proj2={"$project" : {
        "_id" : 0,
        "make" : 1,
        "saleDate" : {
            "$subtract" : [
                "$saleDate",
                {
                    "$add" : [
                        "$ml",
                        {
                            "$multiply" : [
                                "$s",
                                1000
                            ]
                        },
                        {
                            "$multiply" : [
                                "$m",
                                60,
                                1000
                            ]
                        },
                        {
                            "$multiply" : [
                                "$h",
                                60,
                                60,
                                1000
                            ]
                        }
                    ]
                }
            ]
        }
    }
};

group={"$group" : {
        "_id" : {
            "m" : "$make",
            "d" : "$saleDate"
        },
        "count" : {
            "$sum" : 1
        }
    }
}; 
```

现在运行聚合为您提供：

```
db.inventory.aggregate(match, proj1, proj2, group)
{
    "result" : [
        {
            "_id" : {
                "m" : "Toyota",
                "d" : ISODate("2013-04-10T00:00:00Z")
            },
            "count" : 4
        },
        {
            "_id" : {
                "m" : "Toyota",
                "d" : ISODate("2013-04-09T00:00:00Z")
            },
            "count" : 1
        },
        {
            "_id" : {
                "m" : "Nissan",
                "d" : ISODate("2013-04-10T00:00:00Z")
            },
            "count" : 2
        }
    ],
    "ok" : 1
} 
```

您可以添加另一个 {$project} 阶段来美化输出，您可以添加一个 {$sort} 步骤，但基本上对于每个日期，每个让您计算售出的数量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-27T08:51:51.380

我喜欢[user1083621](https://stackoverflow.com/a/27607992/7744106)的回答，但该方法会导致对该字段的后续操作存在一些限制 - 因为您不能在（例如）下一个聚合管道阶段将其用作日期字段。您既不能比较也不能使用任何[日期聚合操作](https://docs.mongodb.com/manual/reference/operator/aggregation-date/)，聚合后您将拥有字符串（！）。所有这些都可以通过投影您的原始日期字段来解决，但在这种情况下，通过分组阶段保留它会遇到一些困难。毕竟，有时您只想在一天的开始时进行操作，而不是随意的一天时间。所以这是我的方法：

```
{'$project': {
    'start_of_day': {'$subtract': [
        '$date',
        {'$add': [
            {'$multiply': [{'$hour': '$date'}, 3600000]},
            {'$multiply': [{'$minute': '$date'}, 60000]},
            {'$multiply': [{'$second': '$date'}, 1000]},
            {'$millisecond': '$date'}
        ]}
    ]},
}} 
```

它给你这个：

```
{
    "start_of_day" : ISODate("2015-12-03T00:00:00.000Z")
},
{
    "start_of_day" : ISODate("2015-12-04T00:00:00.000Z")
} 
```

不能说它是否比[user1083621](https://stackoverflow.com/a/27607992/7744106)的方法快。

# ajax - django、ajax、jquery

> ID：15938861
> 
> 赞同：-1
> 
> 时间：2013-04-11T00:30:01.493
> 
> 标签：ajax, django, jquery, django-templates, django-views

朋友们，我真的吓坏了，不要安装这个应用程序 dajax django 现在尝试手动安装，但什么也没做，想法是从模板发送，给定一个变量并返回相同的变量作为警告，欢迎帮助我这个疯狂的人。

```
<script type="text/javascript">
    var name = 'Joe';
    function my_js_callback(){
        $.ajax({
            type:"POST",
            url:"/app/test",
            data: {
                    'name': name
            },
            success: function(data){
                alert(data);
            }
        });
    }
    </script>

@login_required
def app_test(request):
    if request.is_ajax():
        name = request.POST.getlist('name')[0]
        message = name
    else:
        message = "Not Ajax"
    return HttpResponse(message) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:42:56.990

```
vista
----------------------------------------------------
@csrf_exempt
@login_required
def app_test(request):
    if request.is_ajax():
        if request.method == 'POST':
            info = '"%s"' % request
            return HttpResponse(info)

html
----------------------------------------------------
    <script type="text/javascript">
        var myEvent = {id: '12345', end: '12345', allDay: '12345'};
        function my_js_callback(){
            $.ajax({
                url: '/app/test/',
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                data: $.toJSON(myEvent),
                dataType: 'text',
                success: function(result) {
                    console.log(result);
                    alert('OK');
                }
            });
        }
    </script> 
```

# java - How to add buttons to a JPanel from a list of numbers in a comboBox

> ID：15938862
> 
> 赞同：0
> 
> 时间：2013-04-11T00:30:06.477
> 
> 标签：java, swing, jpanel, jbutton, jcombobox

I'm trying to add some buttons in a JPanel from a comboBox. The comboBox has an array of 8 ints and when one of them is selected I want to be able to press a go button which will then display the number of buttons selected from the comboBox into a JPanel.

The JPanel is initially empty and the go button is disabled until something is selected.

I have created the JPanel, comboBox and the go button, but I'm now lost as to how to get and create the buttons.

The comboBox filled with Strings -

```
String[] floorStrings = {"Select one", "1", "2", "3", "4", "5", "6", "7", "8"};
//Create the combo box
JComboBox floorList = new JComboBox(floorStrings); 
```

The actionPerformed code -

```
 public void actionPerformed(ActionEvent e) {

        floorList.getSelectedIndex();
        //int i = Integer.valueOf((String) floorList);

    if (e.getSource() == go) {
        go.setText("Stop");
        System.out.print("Clicked " + floorList);
        p3.add(go, BorderLayout.NORTH);
    } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:34:05.783

将一个附加`ActionListener`到“开始”按钮。在`actionPerformed`您需要从 中获取值的方法中`JComboBox`，只需使用`getSelectedValue`. 这会返回一个`Object`. 检查对象是否不是`null`并尝试将其转换为`int`（即`(int)value`）。

如果转换成功，只需根据组合框中的值创建一个`for-next`循环`n`次数的循环并创建按钮，将它们添加到面板中。

查看[如何编写动作侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)以及[如何使用组合框](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)和[for 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)以获取更多详细信息

**更新示例**

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.management.StringValueExp;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestComboBox08 {

    public static void main(String[] args) {
        new TestComboBox08();
    }

    public TestComboBox08() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JComboBox floorList;
        private JPanel buttons;

        public TestPane() {
            setLayout(new BorderLayout());
            String[] floorStrings = {"Select one", "1", "2", "3", "4", "5", "6", "7", "8"};
            floorList = new JComboBox(floorStrings);
            JButton go = new JButton("Go");
            go.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    int count = floorList.getSelectedIndex();
                    buttons.removeAll();
                    for (int index = 0; index < count; index++) {
                        buttons.add(new JButton(String.valueOf(index)));
                    }
                    buttons.revalidate();
                }
            });
            JPanel top = new JPanel(new FlowLayout(FlowLayout.CENTER));
            top.add(floorList);
            top.add(go);

            buttons = new JPanel(new GridLayout(0, 4));
            buttons.setPreferredSize(new Dimension(200, 200));

            add(top, BorderLayout.NORTH);
            add(buttons);
        }
    }
} 
```

# ios - iOS MapKit：稍作调整的代码重构

> ID：15938864
> 
> 赞同：0
> 
> 时间：2013-04-11T00:30:18.957
> 
> 标签：ios, objective-c, mapkit

使用下面的代码，当位置移动时，我会得到多个红色地标。请看下面的图片。

我想删除旧的地标并在当前位置使用新的地标对其进行更新。因此，在任何给定时间，都只会有一个红色的地标。

```
- (void)locationManager:(CLLocationManager *)aManager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    CLLocationCoordinate2D regionCenter = newLocation.coordinate;
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(regionCenter, 400, 400);
    [mapView setRegion:region animated:TRUE];

    [self reverseGeocode:newLocation];
}

-(void)reverseGeocode:(CLLocation *)location
{
    if (!geocoder)
    geocoder = [[CLGeocoder alloc] init];
    [geocoder reverseGeocodeLocation:location completionHandler:^(NSArray* placemarks, NSError* error){
    if (nil != error) {
        UIAlertView *alert =
        [[UIAlertView alloc]
         initWithTitle:NSLocalizedString(@"Error translating coordinates into location",
                                         @"Error translating coordinates into location")
         message:NSLocalizedString(@"Geocoder did not recognize coordinates",
                                   @"Geocoder did not recognize coordinates")
         delegate:self
         cancelButtonTitle:NSLocalizedString(@"OK", @"OK")
         otherButtonTitles:nil];
        [alert show];
    }
    else if ([placemarks count] > 0) {

        placemark = [placemarks objectAtIndex:0];

        MapLocation *annotation = [[MapLocation alloc]init];
        annotation.street = placemark.thoroughfare;
        annotation.city = placemark.locality;
        annotation.state = placemark.administrativeArea;
        annotation.zip = placemark.postalCode;
        annotation.coordinate = location.coordinate;
        [self.mapView addAnnotation:annotation];
    }
  }];
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/pIbtS.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:37:31.650

在添加另一个注释之前，请删除以前的注释

```
//remove all previous annotations
NSArray *previousAnnotations = self.mapView.annotations;
[self.mapView removeAnnotations: previousAnnotations];

//then add your new annotation here
placemark = [placemarks objectAtIndex:0];
MapLocation *annotation = [[MapLocation alloc]init];
annotation.street = placemark.thoroughfare;
annotation.city = placemark.locality;
annotation.state = placemark.administrativeArea;
annotation.zip = placemark.postalCode;
annotation.coordinate = location.coordinate;
[self.mapView addAnnotation:annotation]; 
```

相关的苹果文档链接[`removeAnnotations:`](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/doc/uid/TP40008205-CH3-SW23)

如果您只想删除以前的注释，请将其存储为属性并通过调用将其删除`removeAnnotation:`

在您`@interface`声明这样的属性：

```
@property (nonatomic, strong) MapLocation *previousAnnotation; 
```

然后在您的代码中：

```
//remove the previous annotation if it exists
[self.mapView removeAnnotation: self.previousAnnotation];

//then add your new annotation here
placemark = [placemarks objectAtIndex:0];
MapLocation *annotation = [[MapLocation alloc]init];
annotation.street = placemark.thoroughfare;
annotation.city = placemark.locality;
annotation.state = placemark.administrativeArea;
annotation.zip = placemark.postalCode;
annotation.coordinate = location.coordinate;
[self.mapView addAnnotation:annotation];

//set your property
self.previousAnnotation = annotation; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:45:42.210

您可以将注释存储为属性：

在头文件`.h`或`@interface`：

```
@property (nonatomic, strong) MapLocation *myAnnotation; 
```

然后只需通过调用来更新它：

```
[myAnnotation setCoordinate:location.coordinate];
[myAnnotation setStreet:placemark.thoroughfare];
[myAnnotation setCity:placemark.locality];
... 
```

苹果文档：[MKAnnotation/setCoordinate](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKAnnotation_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/MKAnnotation/setCoordinate%3a)

# breeze - Breeze.js 的替代品？

> ID：15938866
> 
> 赞同：32
> 
> 时间：2013-04-11T00:30:30.263
> 
> 标签：breeze

是否有不需要 .Net 或 Enterprise Framework 连接器或数据库的 Breezejs 替代方案，并且可以与仅接受和返回 JSON（无元数据）的普通 REST 服务一起使用？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-11T01:51:07.313

我们实际上将 Breeze 设计为独立于 .NET，但我们的示例还没有显示这一点。在接下来的一两周内，我们将展示如何将 Breeze 连接到返回 JSON 的通用 HTTP 服务。我们很乐意在它发布时收到您的反馈，因为我们知道它将成为市场的重要组成部分。

**编辑：** Breeze 1.3.0 现在可用并包含[Edmunds 示例](http://www.breezejs.com/samples/edmunds)，它是一个纯 JavaScript 客户端，连接到 HTTP 服务，**不**依赖于 ASP.NET、Web API 或实体框架。请查看并向我们提供反馈！

**编辑 2：**我们也将很快发布一个示例，展示 Breeze 与 MongoDB、Express 和 Node.js 一起使用，而不涉及 Microsoft 技术。Ruby 示例也在开发中。敬请关注！

**编辑 3：** [MongoDB 和 node.js 支持](http://www.breezejs.com/documentation/mongodb)现在可用，这表明 Breeze 使用 MEAN 堆栈（MongoDB、Express、AngularJS、Node.js）。

**编辑 4：**一个[Ruby 示例](http://www.breezejs.com/samples/intro-spa-ruby)现已启动。这是 John Papa 著名的带有 Ruby 后端的 Code Camper JumpStart。

**编辑 5：** [NHibernate 支持](http://www.breezejs.com/documentation/nhibernate-support)以及随附的示例现在可用。

**编辑 6：** [Node/MySQL/Postgres 支持](http://www.getbreezenow.com/sequelize-mysqlpostgressql-lite)以及随附的示例现在可用。

**编辑 7：** [Java/Hibernate 支持](https://github.com/Breeze/breeze.server.java)以及随附的示例现在可用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-18T21:17:43.687

[Sails.js](http://sailsjs.org/)有一个与 Breeze.js 非常相似的 JavaScript ORM。它被称为[水线](https://github.com/balderdashy/waterline)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-12T17:23:34.930

JayData [http://jaydata.org/](http://jaydata.org/) 将成为 Breeze 的替代品，它也独立于 .NET。您可以查看的另一种选择是 ember.data [https://github.com/emberjs/data](https://github.com/emberjs/data)仅供参考，我已经看过两者并且更喜欢 Breeze 来满足我的需要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-30T05:56:39.267

作为替代方案，[AmplifyJS](http://amplifyjs.com/)、[PouchDB](http://pouchdb.com/)和[Lawnchair](http://brian.io/lawnchair/)各有优缺点。

# javascript - phantomJS 中的自动化测试：如何访问控制台日志

> ID：15938872
> 
> 赞同：3
> 
> 时间：2013-04-11T00:31:03.750
> 
> 标签：javascript, automated-tests, phantomjs

我正在使用 PhantomJS 进行自动化测试。我想知道自动化测试是否可以通过某种方式访问​​控制台日志。我不知道 phantomJS 是否发布控制台日志，因为它是一个无头浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:23:13.837

你是什​​么意思 ？

当然，您可以写入控制台或在脚本中使用参数。

这是一个非常基本的例子

```
var args = require('system').args;
if (args.length === 1) {
    console.log('Try to pass some arguments when invoking this script!');
}
else {
    args.forEach(function(arg, i) {
        console.log(i + ': ' + arg);
    });
} 
```

**更新** 您似乎对这两种情况感到困惑：PhantomJS 程序本身和在您的无头浏览器中打开的网页。这根本不一样。

只需将处理程序添加到[pages.onConsoleMessage](http://phantomjs.org/api/webpage/handler/on-console-message.html)

```
var webPage = require('webpage');
var page = webPage.create();

page.onConsoleMessage = function(msg, lineNum, sourceId) {
  console.log('CONSOLE: ' + msg + ' (from line #' + lineNum + ' in "' + sourceId + '")');
} 
```

在这里，我们在来自网页控制台的程序控制台中编写一些东西。

# ssl - Openssl Generate Public Asymmetric Key

> ID：15938880
> 
> 赞同：0
> 
> 时间：2013-04-11T00:31:41.750
> 
> 标签：ssl, openssl, rsa, dsa, ecdsa

I am trying to output the public EC key parameters Qx and Qy from OpenSSL CLI. Is this possible?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T01:44:16.730

您可以使用创建椭圆曲线键

> openssl ecparam -out key.pem -name prime256v1 -genkey

输出公钥和私钥

> openssl ec -inform PEM -in key.pem -pubout -text -noout

# java - Java if statement not comparing to the variable

> ID：15938882
> 
> 赞同：0
> 
> 时间：2013-04-11T00:31:45.413
> 
> 标签：java, if-statement

This is another school project where the main class generates two random numbers and then displays them as an addition problem. The user then has to enter the sum of the two numbers. The program should compare the input to the correct answer but every time the correct answer is put in, it says it is wrong?

Main Class:

```
import java.util.Random;

public class MathQuiz
{
private int answer1, answer2, answer3, answer4, answer5, n1, n2, sum, score,           scoreFinal;
private String message, m2, m3, m4, m5, finalPage;
public MathQuiz()
{
}

Random dice1 = new Random();

public void setN1()
{
    n1 = dice1.nextInt(100);
}

public void setN2()
{
    n2 = dice1.nextInt(100);
}

public void setSum()
{
    sum = n1+ n2;
}

public int getN1()
{
    return n1;
}

public int getN2()
{
    return n2;
}

public int getSum()
{
    return sum;
}

public String getAnswer1(String a1)
{
    if (a1.equals(getSum()))
    {
        message = "Correct";
        score++;
    }

    else 
    {
        message = "Incorrect";
    }

    return message;
}

public String getAnswer2(String a2)
{
    if (a2.equals(getSum()))
    {
        m2 = "Correct";
        score++;
    }

    else
    {
        m2 = "Incorrect";
    }

    return m2;
}

public String getAnswer3(String a3)
{
    if (a3.equals(getSum()))
    {
        m3 = "Correct";
        score++;
    }

    else
    {
        m3 = "Incorrect";
    }

    return m3;
}

public String getAnswer4(String a4)
{
    if (a4.equals(getSum()))
    {
        m4 = "Correct";
        score++;
    }

    else
    {
        m4 = "Incorrect";
    }

    return m4;
}

public String getAnswer5(String a5)
{
    if (a5.equals(getSum()))
    {
        m5 = "Correct";
        score++;
    }

    else
    {
        m5 = "Incorrect";
    }

    return m5;
}

public String getLast()
{
    scoreFinal = score * 20;
    finalPage = "Finished! Your score is " + scoreFinal + "%"; 
    return finalPage;
}
} 
```

JOptionPane:

```
import javax.swing.JOptionPane;

public class Dialog
{
public static void main(String[] args)
{
    String A1, A2, A3, A4, A5;
    int a1, a2, a3, a4, a5;

    MathQuiz quiz = new MathQuiz();

    JOptionPane.showMessageDialog(null, "Answer these 5 math questions...");

    quiz.setN1();
    quiz.setN2();
    quiz.setSum();
    A1 = JOptionPane.showInputDialog(quiz.getN1() + " + " + quiz.getN2());

    JOptionPane.showMessageDialog(null, quiz.getAnswer1(A1));

    quiz.setN1();
    quiz.setN2();
    quiz.setSum();
    A2 = JOptionPane.showInputDialog(quiz.getN1() + " + " + quiz.getN2());

    JOptionPane.showMessageDialog(null, quiz.getAnswer1(A2));

    quiz.setN1();
    quiz.setN2();
    quiz.setSum();
    A3 = JOptionPane.showInputDialog(quiz.getN1() + " + " + quiz.getN2());

    JOptionPane.showMessageDialog(null, quiz.getAnswer1(A3));

    quiz.setN1();
    quiz.setN2();
    quiz.setSum();
    A4 = JOptionPane.showInputDialog(quiz.getN1() + " + " + quiz.getN2());

    JOptionPane.showMessageDialog(null, quiz.getAnswer1(A4));

    quiz.setN1();
    quiz.setN2();
    quiz.setSum();
    A5 = JOptionPane.showInputDialog(quiz.getN1() + " + " + quiz.getN2());

    JOptionPane.showMessageDialog(null, quiz.getAnswer1(A5));

    JOptionPane.showMessageDialog(null, quiz.getLast());
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:36:34.633

传递给方法的答案`getAnswerX()`是字符串，您将它们与整数进行比较。`String`类的方法`.equals()`返回 false，因为参数是不同的类型，一个 int 原始类型。您可以使用 Integer.parseInt() 将字符串转换为整数，也可以在比较之前使用 Integer.toString() 将整数转换为字符串。

这样的事情应该会更好：

```
public String getAnswer1(String a1)
{
    if (Integer.parseInt(a1) == getSum())
    {
        message = "Correct";
        score++;
    }

    else 
    {
        message = "Incorrect";
    }

    return message;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T00:39:04.433

您正在将代码中的 a 与 a`String`进行比较`int`，它们不相等。尝试改变你的比较

```
a1.equals(getSum()) 
```

至

```
a1.equals(getSum().toString()) 
```

为了将字符串与字符串进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:41:53.843

您正在尝试将整数与字符串进行比较

尝试改变

```
a1.equals(getSum()) 
```

至

```
a1.equals(String.valueOf(getSum())) 
```

[http://www.tutorialspoint.com/java/java_string_valueof.htm](http://www.tutorialspoint.com/java/java_string_valueof.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T00:44:20.843

第 1 步：不要让用户问一组五个问题，而是问他们一个问题。这将极大地加快调试速度。一旦你的代码工作，提出五个问题。

第 2 步：代码只询问一个问题，然后您可以进行更简单的更改，即 Integer.toString() 并计算答案，如 Asaph 所述。你不会感觉到性能受到影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T00:45:40.473

在撰写本文时，有两个答案，两个都是正确的。尝试某事的第一份好工作。许多人来这里寻找专业人士为他们做功课。

以下是一些需要考虑的事项来改进您的代码：

1）一致的缩进将帮助您阅读代码。2）为什么需要这么多getAnswer方法，你只需要一个，而不是1-5个。3）你应该检查你的getAnswer方法的String参数是否为空，否则你会得到一个空指针异常。

还有一些其他的事情，但现在可以。

# android - 如何使我的 android 应用程序启用 NFC？

> ID：15938897
> 
> 赞同：-1
> 
> 时间：2013-04-11T00:33:32.193
> 
> 标签：android, nfc, nfc-p2p, open-nfc

我的应用程序已完成，但我希望在点击 NFC 标签时打开应用程序！请帮我

我将添加到主要活动中

```
 <uses-permission android:name="android.permission.NFC" /> 
```

这是java代码

```
 public class MainActivity extends Activity {  
    private static final String TAG = "NFCReadTag";  
    private NfcAdapter mNfcAdapter;  
    private IntentFilter[] mNdefExchangeFilters;  
    private PendingIntent mNfcPendingIntent;  
 @Override  
 public void onCreate(Bundle savedInstanceState) {  
   super.onCreate(savedInstanceState);  
   setContentView(R.layout.activity_main);  
         mNfcAdapter = NfcAdapter.getDefaultAdapter(this);  
      mNfcPendingIntent = PendingIntent.getActivity(this, 0, new Intent(this,  
                   getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP  
                   | Intent.FLAG_ACTIVITY_CLEAR_TOP), 0);  
         IntentFilter smartwhere = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);  
         smartwhere.addDataScheme("http");  
         smartwhere.addDataAuthority("www.smartwhere.com", null);  
         smartwhere.addDataPath(".*", PatternMatcher.PATTERN_SIMPLE_GLOB);  
         mNdefExchangeFilters = new IntentFilter[] { smartwhere };  
 } 
 @Override  
 public boolean onCreateOptionsMenu(Menu menu) {  
   getMenuInflater().inflate(R.menu.activity_main, menu);  
   return true;  
 }  
    @Override  
    protected void onResume() {  
         super.onResume();  
         if(mNfcAdapter != null) {  
              mNfcAdapter.enableForegroundDispatch(this, mNfcPendingIntent,  
                   mNdefExchangeFilters, null);  
              if (!mNfcAdapter.isEnabled()){  
          LayoutInflater inflater = getLayoutInflater();  
             View dialoglayout = inflater.inflate( (Integer) R.layout.nfc_settings_layout,(ViewGroup) findViewById(R.id.nfc_settings_layout));  
          new AlertDialog.Builder(this).setView(dialoglayout)  
                 .setPositiveButton("Update Settings", new DialogInterface.OnClickListener() {  
                      public void onClick(DialogInterface arg0, int arg1) {  
                                    Intent setnfc = new Intent(Settings.ACTION_WIRELESS_SETTINGS);  
                                    startActivity(setnfc);  
                      }  
                 })  
              .setOnCancelListener(new DialogInterface.OnCancelListener() {  
                   public void onCancel(DialogInterface dialog) {  
                        finish(); // exit application if user cancels  
                }                      
              }).create().show();  
              }  
         } else {  
              Toast.makeText(getApplicationContext(), "Sorry, No NFC Adapter found.", Toast.LENGTH_SHORT).show();  
         }  
    }  
    @Override  
    protected void onPause() {  
         super.onPause();  
         if(mNfcAdapter != null) mNfcAdapter.disableForegroundDispatch(this);  
    }  
    @Override  
    protected void onNewIntent(Intent intent) {  
         super.onNewIntent(intent);            
         if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {  
              NdefMessage[] messages = null;  
              Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);  
              if (rawMsgs != null) {  
                   messages = new NdefMessage[rawMsgs.length];  
                   for (int i = 0; i < rawMsgs.length; i++) {  
                        messages[i] = (NdefMessage) rawMsgs[i];  
                   }  
              }  
              if(messages[0] != null) {  
                   String result="";  
                   byte[] payload = messages[0].getRecords()[0].getPayload();  
                   // this assumes that we get back am SOH followed by host/code  
                   for (int b = 1; b<payload.length; b++) { // skip SOH  
                        result += (char) payload[b];  
                   }  
                   Toast.makeText(getApplicationContext(), "Tag Contains " + result, Toast.LENGTH_SHORT).show();  
              }  
         }  
    }  
} 
```

问题是在我的应用程序中的何处添加此代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:24:44.233

您可能想访问这里：[http](http://www.tappednfc.com/android-nfc-developer-guide/) : //www.tappednfc.com/android-nfc-developer-guide/ 开始使用 NFC。

# apache - CakePHP：来自除根以外的任何路由的 500 错误

> ID：15938899
> 
> 赞同：1
> 
> 时间：2013-04-11T00:33:49.457
> 
> 标签：apache, cakephp, routing

我一直在尝试学习 CakePHP，但是我遇到了一个问题，当我尝试访问除根目录以外的任何路由时，我会收到 500 错误。我在我的测试应用程序中进行了以下设置。

1）我将文档根`http://cake.localhost.com/`设置为`/app/webroot/`

2）在`/app/Config/routes.php`文件中，我设置了以下路线：

```
Router::connect('/', array('controller' => 'posts', 'action' => 'index', 'index'));
Router::connect('/posts/*', array('controller' => 'posts', 'action' => 'view'));
Router::connect('/users/*', array('controller' => 'users', 'action' => 'view')); 
```

3）我用`cake bake`来创建系统，它正在使用脚手架。

4）当我去`http://cake.localhost.com/posts/view/1`它给`HTTP Status Code 500`

如果您需要更多信息，请告诉我，我将很乐意为您服务！感谢您提前提供任何信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:01:57.987

这是一个与整个框架的核心功能相关的合理问题。

1.) 正确。

2.) 以您指示的方式配置路由将导致将所有请求重定向到指定控制器的视图操作。这可能不是你的想法。

Cake 的默认路由将尝试根据命名约定进行路由。有关路由示例及其行为的解释，请参阅[CakePHP 损坏的索引方法。](https://stackoverflow.com/questions/6526080/cakephp-broken-index-method/6533250#6533250)

3.) 脚手架可能不是你的想法。脚手架基本上只是将脚手架控制器标记为使用核心控制器生成默认值，并跳过实际编写生成的代码。您不妨生成默认值；它将让您了解基本的 CRUD、Cake 风格。

我克隆了您的应用程序，应用了这些步骤，一切都按预期工作。:) HTH

# c++ - Identify the greatest common divisor (GCD) of the two values using Euclid's Algorithm

> ID：15938900
> 
> 赞同：-2
> 
> 时间：2013-04-11T00:33:53.227
> 
> 标签：c++, greatest-common-divisor, pass-by-reference, call-by-value

My program asks a user for two numbers, and then I have to pass those numbers to my function. My function is supposed to "Identify the greatest common divisor (GCD) of the two values using Euclid's Algorithm. Return true if this value is greater than 1 and less than the smaller of the two numbers. Set the call-by-reference parameter to the value of the GCD. In main() output the GCD and whether or not your function returned true or false." How do I do this?

```
int gcd (int a, int b)
{
    int c;

    if ( b == 0 )
        return a;

    else
        while ( b != 0 )
        {
            c = b;
            b = a % b;
            a = c;
        }

        return a;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:26:33.297

伙计，这再简单不过了…… [STFG](http://en.wikipedia.org/wiki/Euclidean_algorithm#Implementations)

您的代码已接近示例 2，但您在此行中有错误

```
 if ( b == 0 )
        return a; 
```

检查和返回应该是相反的顺序

我会在伪代码中尝试这个 wiki 实现：

```
function gcd(a, b)
    while b ≠ 0
       t := b
       b := a mod t
       a := t
    return a 
```

但你至少应该尝试用谷歌搜索一些东西。=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T14:36:44.080

这是您使用的最难的逻辑，您可以从博客中获得非常简单的逻辑，我从

[http://www.programmingtunes.com/finding-greatest-common-divisor-of-2-numbers-c/](http://www.programmingtunes.com/finding-greatest-common-divisor-of-2-numbers-c/)：

```
//greatest common divisor of 2 numbers in C++
#include <iostream>
using namespace std;
void main()
{
int x = 24;
int y = 18;
int temp = 1 ;
for(int i = 2; i<=y; i++)
{
    if(x%i == 0 && y%i == 0)
    {
    temp = i;
    }

}

cout<<temp<<endl;

} 
```

# mysql - MySQL 无法选择特定的字段值？

> ID：15938902
> 
> 赞同：0
> 
> 时间：2013-04-11T00:34:02.320
> 
> 标签：mysql, sql, null

在使用 MySQL 查询为 Kayako Fusion 生成一些外部报告时，我遇到了一个奇怪而烦人的问题。表中的一个字段包含一个“TEXT”字段，该字段可以包含以下两个值之一：41 或 40。如果最终用户未选择其中一个值，则默认值为 NULL。（我无法改变它）。

所以，当试图做一个简单的：

```
WHERE swcustomfieldvalues.fieldvalue = '41' 
```

然后它还返回具有 NULL（或者可能是 ''）值的记录。

这同样适用于：

```
WHERE swcustomfieldvalues.fieldvalue = '40' 
```

我们还获得了 NULL 记录（这有点准确，因为我们将 NULL 视为 40。

为简单起见，40 的值用于非收费工作，41 的值用于收费工作。

我错过了什么，或者有解决方法吗？

[![截屏](https://i.stack.imgur.com/6vKb2.png)](https://i.stack.imgur.com/6vKb2.png)

这是讨厌的原始 SQL 语句：

```
SELECT
swtickets.ticketid AS `Ticket ID`,
swtickettimetracks.tickettimetrackid AS `Track ID`,
swtickets.ticketmaskid AS `TicketMASK`,
(
    SELECT
        swcustomfieldvalues.fieldvalue
    FROM
        swcustomfieldvalues,
        swcustomfields
    WHERE
        swcustomfieldvalues.customfieldid = swcustomfields.customfieldid
    AND swtickets.ticketid = swcustomfieldvalues.typeid
    AND swcustomfields.title = 'Member Company'
    ORDER BY
        swcustomfieldvalues.customfieldvalueid DESC
    LIMIT 1
) AS MemberCompany,
(
    SELECT
        swcustomfieldvalues.fieldvalue
    FROM
        swcustomfieldvalues,
        swcustomfields
    WHERE
        swcustomfieldvalues.customfieldid = swcustomfields.customfieldid
    AND swtickets.ticketid = swcustomfieldvalues.typeid
    AND swcustomfields.title = 'Member Name'
    ORDER BY
        swcustomfieldvalues.customfieldvalueid DESC
    LIMIT 1
) AS MemberName,
(
    SELECT
        swcustomfieldvalues.fieldvalue
    FROM
        swcustomfieldvalues,
        swcustomfields
    WHERE
        swcustomfieldvalues.customfieldid = swcustomfields.customfieldid
    AND swtickets.ticketid = swcustomfieldvalues.typeid
    AND swcustomfields.title = 'Chargeable'
    AND swcustomfieldvalues.fieldvalue = '41'
    ORDER BY
        swcustomfieldvalues.customfieldvalueid ASC
    LIMIT 1
) AS `Chg`,
swtickets.`subject` AS `Subject`,
swtickets.departmenttitle AS Category,
FROM_UNIXTIME(
    swtickettimetracks.workdateline,
    '%Y-%m-%d'
) AS `workDateline`,
FROM_UNIXTIME(
    swtickettimetracks.dateline,
    '%Y-%m-%d'
) AS `dateline`,
swtickettimetracks.timespent AS `Time Spent`,
swtickets.timeworked / 60 AS `Time Worked`
FROM
    swtickets
RIGHT OUTER JOIN swusers ON swtickets.userid = swusers.userid
INNER JOIN swuserorganizations ON swuserorganizations.userorganizationid = swusers.userorganizationid
INNER JOIN swtickettimetracks ON swtickettimetracks.ticketid = swtickets.ticketid
WHERE
    swuserorganizations.organizationname = 'Clarence Professional Offices'
AND (
    swtickets.ticketstatustitle = 'Closed'
    OR swtickets.ticketstatustitle = 'Completed'
)
AND swtickets.ticketid = '2895'
GROUP BY
    `Ticket ID`,
    `Track ID` 
```

请善待我，我是新手；）

打破个别的子选择（这是不可避免的）我可以证明这个用于获取自定义字段“收费”的个人选择与特定票“2895”的值为“41”实际上有效！看：

```
SELECT
        swcustomfieldvalues.fieldvalue,
        swtickets.ticketid

    FROM
        swcustomfieldvalues,
        swcustomfields,
        swtickets
    WHERE
        swcustomfieldvalues.customfieldid = swcustomfields.customfieldid
    AND swtickets.ticketid = swcustomfieldvalues.typeid
    AND swcustomfields.title = 'Chargeable'
    AND swcustomfieldvalues.fieldvalue = '40'
    AND swtickets.ticketid = '2895'
    ORDER BY
        swcustomfieldvalues.customfieldvalueid ASC 
```

它返回 TRUE，因为我知道这张票是不收费的 (40)。如果我将值更改为“41”（收费），它会返回 False（无记录）。

整个 SQL 语句（原始）应返回：所有在某​​个日期范围内可收费的票，显示给我

票证 ID/票证掩码、跟踪 ID、会员公司、会员姓名、是否收费？(40|41)、主题、类别、工作日期、日期、花费时间和工作时间。

然后在 PHP 中，我做了一些更多的操作来为 Sub Totals 等做一个“Break On”。但我离题了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:40:32.670

在您的屏幕截图中，问题清楚地显示：您使用嵌套查询将选择的结果直接返回到主 SELECT 语句中。

当您过滤 fieldvalue = '40' 时，此嵌套查询不返回空值，它只是不返回*任何内容*（即：不返回任何行），这导致在主 SELECT 语句中显示 NULL。

如果您想实际过滤掉与您提到的条件（字段值）不匹配的记录，那么您应该在 JOIN 部分中包含此嵌套子查询，以实际减少生成的记录集。

由于您没有将其粘贴到此处，因此我无法向您提供查询，但是如果您需要，我很乐意提供帮助。

# selenium - 仅在 Travis 上找不到水豚元素

> ID：15938909
> 
> 赞同：3
> 
> 时间：2013-04-11T00:34:38.637
> 
> 标签：selenium, capybara, ruby-on-rails-2, travis-ci, xvfb

我正在尝试将免费软件放在我作为合作者之一的地方，以在 Travis 上运行验收测试。除了硒的验收测试外，一切都进行得很好。

这是一个棘手的问题，因为该软件仅使用 Debian 6 上可用的 gem 版本。所以，一切都已经过时了。

更具体地说，只是我在屏幕上查找一些文本的步骤，步骤如下：

```
page.should have_content(text) 
```

我已经尝试过：

*   添加一些等待，因为它可能在渲染之前寻找元素；
*   更新xpath；
*   删除 webrat，因为我读过它可能与水豚冲突；
*   使用 xvfb 在本地运行测试；
*   使用 Ubuntu Server 12.04 32 位（Travis 版本）创建一个 VM，安装所有内容并在 xvfb 上运行测试；
*   将 Capybara 从 1.1.1 更新到 1.1.4。

但问题依然存在：

```
# features/step_definitions/web_steps.rb:107
Unable to find xpath "/html" (Capybara::ElementNotFound)
(eval):2:in `send'
(eval):2:in `text'
./features/step_definitions/web_steps.rb:110
./features/step_definitions/web_steps.rb:14:in `with_scope'
./features/step_definitions/web_steps.rb:108:in `/^(?:|I )should see "([^"]*)"(?: within "([^"]*)")?$/'
plugins/mezuro/features/repository.feature:101:in `And I should see "My Name"' 
```

这是构建的链接： [https ://travis-ci.org/rafamanzo/mezuro-travis/builds/6231714](https://travis-ci.org/rafamanzo/mezuro-travis/builds/6231714)

有人知道吗？恐怕它与 gem 版本有关，我无法以任何方式修复它。

以下是我在 Google 上找到的相关链接：

*   [https://groups.google.com/forum/#!msg/ruby-capybara/PDr7sZ124Vw/qLXqHXs0XdMJ](https://groups.google.com/forum/#!msg/ruby-capybara/PDr7sZ124Vw/qLXqHXs0XdMJ)
*   [https://github.com/rspec/rspec-rails/issues/406](https://github.com/rspec/rspec-rails/issues/406)

非常感谢！

# python - 如何在 pytest 中使用测试资源（如固定的 yaml 文件）？

> ID：15938915
> 
> 赞同：6
> 
> 时间：2013-04-11T00:35:32.233
> 
> 标签：python, testing, pytest

我查看了 pytest 网站上的文档，但没有找到使用“测试资源”的明确示例，例如在单元测试期间读取固定文件。类似于[http://jlorenzen.blogspot.com/2007/06/proper-way-to-access-file-resources-in.html](http://jlorenzen.blogspot.com/2007/06/proper-way-to-access-file-resources-in.html)为 Java 描述的内容。

例如，如果我有一个 yaml 文件签入到源代码管理，那么编写从该文件加载的测试的正确方法是什么？我认为这归结为理解在类路径（PYTHONPATH？）的python等效项上访问“资源文件”的正确方法。

这似乎应该很简单。有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-01T08:07:44.367

也许您正在寻找的是**pkg_resources**或**pkgutil**。例如，如果您的 python 源中有一个名为“resources”的模块，您可以使用以下命令读取您的“resourcefile”：

```
with open(pkg_resources.resource_filename("resources", "resourcefile")) as infile:
    for line in infile:
        print(line) 
```

或者：

```
 with tempfile.TemporaryFile() as outfile:
        outfile.write(pkgutil.get_data("resources", "resourcefile")) 
```

当您的“脚本”是可执行的 zip 文件时，后者甚至可以工作。前者无需从鸡蛋中提取资源即可工作。

请注意，创建源的子目录不会使其成为模块。为了 pkg_resources 和 pkgutil 的目的，您需要添加一个`__init__.py`在目录中命名的文件，以使其作为模块可见。`__init__.py`可以为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:56:52.060

我认为“资源文件”是您在 python 中给它的任何定义（在 Java 中，资源文件可以与普通 Java 类捆绑到 jar 文件中，Java 提供库函数来访问这些信息）。

等效的解决方案可能是访问 PYTHONPATH 环境变量，将您的“资源文件”定义为相对路径，然后在 PYTHONPATH 中寻找它。这是一个例子：

```
pythonpath = os.env['PYTHONPATH']
file_relative_path = os.path.join('subdir', 'resourcefile') // e.g. subdir/resourcefile
for dir in pythonpath.split(os.pathsep):
    resource_path = os.path.join(dir, file_relative_path)
    if os.path.exists(resource_path):
        return resource_path 
```

此代码片段返回 PYTHONPATH 上存在的第一个文件的完整路径。

# maven - 将 Tomcat 项目迁移到 Jboss 并在 NetBeans 中配置 JBoss AS

> ID：15938917
> 
> 赞同：1
> 
> 时间：2013-04-11T00:35:38.687
> 
> 标签：maven, netbeans, configuration, jboss, facelets

我有一个曾经在 Tomcat Server Application 7.0 中运行的项目。现在我必须将它迁移到 Jboss 5.1。

我必须在项目中更改哪些配置？

这是我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.labcon</groupId>
<artifactId>Catalogo2</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>war</packaging>

<name>Catalogo2</name>

<properties>
    <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

  <repositories>

  <repository>
        <url>http://download.java.net/maven/2/</url>
        <id>jsf20</id>
        <layout>default</layout>
        <name>Repository for library Library[jsf20]</name>
    </repository>
    <repository>
        <url>http://repo1.maven.org/maven2/</url>
        <id>jstl11</id>
        <layout>default</layout>
        <name>Repository for library Library[jstl11]</name>
    </repository>
    <repository>  
        <id>prime-repo</id>  
        <name>PrimeFaces Maven Repository</name>  
        <url>http://repository.primefaces.org</url>  
        <layout>default</layout>  
    </repository> 

        <repository>
            <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <id>apache.snapshots</id>
        <name>Apache Snapshot Repository</name>
        <url>https://repository.apache.org/content/repositories/snapshots</url>
    </repository>
</repositories>

<dependencies>

 <dependency>
   <groupId>javax.servlet</groupId>
   <artifactId>jstl</artifactId>
   <version>1.2</version>
 </dependency>

 <dependency>
  <groupId>javax.persistence</groupId>
  <artifactId>persistence-api</artifactId>
  <version>1.0</version>
 </dependency>

 <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-core</artifactId>
   <version>3.1.2.RELEASE</version>
 </dependency>

  <dependency>
   <groupId>org.springframework</groupId>
    <artifactId>spring-expression</artifactId>
    <version>3.1.2.RELEASE</version>
  </dependency>

  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-beans</artifactId>
    <version>3.1.2.RELEASE</version>
  </dependency>

  <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-aop</artifactId>
   <version>3.1.2.RELEASE</version>
  </dependency>

  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>3.1.2.RELEASE</version>
  </dependency>

  <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-context-support</artifactId>
   <version>3.1.2.RELEASE</version>
  </dependency>

  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-tx</artifactId>
    <version>3.1.2.RELEASE</version>
  </dependency>

  <dependency>
    <groupId>org.springframework</groupId>
     <artifactId>spring-jdbc</artifactId>
     <version>3.1.2.RELEASE</version>
  </dependency>

  <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-orm</artifactId>
   <version>3.1.2.RELEASE</version>
  </dependency>

  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>3.1.2.RELEASE</version>
  </dependency>

  <dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>3.3.2.GA</version>
  </dependency>

  <dependency>
   <groupId>org.hibernate</groupId>
   <artifactId>hibernate-validator</artifactId>
   <version>4.0.2.GA</version>
  </dependency>

  <dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.15</version>
  </dependency>

  <dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib-nodep</artifactId>
    <version>2.2.2</version>
  </dependency>

  <dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.6.1</version>
  </dependency>

  <dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-simple</artifactId>
    <version>1.6.1</version>
  </dependency>

  <dependency>
    <groupId>asm</groupId>
    <artifactId>asm-commons</artifactId>
    <version>3.1</version>
  </dependency>

  <dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.10</version>
  <scope>test</scope>
  </dependency>

  <dependency>
   <groupId>org.hibernate</groupId>
   <artifactId>hibernate</artifactId>
   <version>3.2.5.ga</version>
  </dependency>

  <dependency>
   <groupId>org.hibernate</groupId>
   <artifactId>ejb3-persistence</artifactId>
   <version>1.0.1.GA</version>
  </dependency>

  <dependency>
    <groupId>javax.sql</groupId>
    <artifactId>jdbc-stdext</artifactId>
    <version>2.0</version>
  </dependency>

  <dependency>
    <groupId>javax.transaction</groupId>
    <artifactId>jta</artifactId>
    <version>1.0.1B</version>
  </dependency>

 <dependency>
  <groupId>org.primefaces</groupId>  
  <artifactId>primefaces</artifactId>
  <version>3.4.1</version>
 </dependency>

  <dependency>
    <groupId>org.primefaces.themes</groupId>
    <artifactId>all-themes</artifactId>
    <version>1.0.9</version>
  </dependency>

  <dependency>
     <groupId>commons-fileupload</groupId>
 <artifactId>commons-fileupload</artifactId>
 <version>1.2.3-SNAPSHOT</version>
  </dependency>

 <dependency>
<groupId>commons-io</groupId>
<artifactId>commons-io</artifactId>
<version>2.5-SNAPSHOT</version>
 </dependency>
<dependency>
<groupId>rome</groupId>
<artifactId>rome</artifactId>
<version>1.0</version>
</dependency>
<dependency>
<groupId>org.apache.poi</groupId>
<artifactId>poi</artifactId>
<version>3.7</version>
</dependency>   
<dependency>
<groupId>com.lowagie</groupId>
<artifactId>itext</artifactId>
<version>2.0.7</version>
</dependency>
    <dependency>
        <groupId>javax</groupId>
         <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <type>jar</type>
    </dependency>

</dependencies>

    <build>
       <plugins>
           <plugin>
               <groupId>org.apache.maven.plugins</groupId>
               <artifactId>maven-compiler-plugin</artifactId>
               <version>2.3.2</version>
               <configuration>
                  <source>1.6</source>
                <target>1.6</target>
                <compilerArguments>
                    <endorseddirs>${endorsed.dir}</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${endorsed.dir}</outputDirectory>
                        <silent>true</silent>
                        <artifactItems>
                            <artifactItem>
                                <groupId>javax</groupId>
                                <artifactId>javaee-endorsed-api</artifactId>
                                <version>6.0</version>
                                <type>jar</type>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
   </build> 
```

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>

<servlet>  
    <servlet-name>
        Resource Servlet
    </servlet-name>  
    <servlet-class>
        org.primefaces.resource.ResourceServlet
    </servlet-class>  
</servlet> 

<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>

<welcome-file-list>
    <welcome-file>faces/index.xhtml</welcome-file>
</welcome-file-list>

<context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>bootstrap</param-value>
</context-param>

<filter>    
   <filter-name>PrimeFaces FileUpload Filter</filter-name>      
   <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class> 
</filter>   

<filter-mapping>    
   <filter-name>PrimeFaces FileUpload Filter</filter-name>  
   <servlet-name>Faces Servlet</servlet-name> 
</filter-mapping> 
```

另一个问题是我安装了 JBoss 5.1 并设法在 netbeans 中单独运行它，但是当我选择运行项目时，选项：JBoss 对我来说没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T16:01:57.403

所以这是你的“快速”答案;-)

我们比我们大 2 岁，JBoss AS 5 被 JBoss AS 7 和 WildFly 8 淘汰了。所以我认为今天的读者想要迁移到那个。

有两个工具可以帮助迁移到 JBoss AS 7 / WildFly 8 / EAP 6：

1) [JBoss SwanLoom](https://github.com/OndraZizka/jboss-migration/wiki/) - 针对服务器配置迁移的自动化迁移工具。

2) [JBoss WindUp](http://windup.jboss.org/) - 一个针对应用程序迁移的报告工具 - 部署描述符等。

最后，有一个专门用于 JBoss 迁移的新站点：[http](http://www.jboss.org/migration/) ://www.jboss.org/migration/ ，您可以在其中找到所有迁移指南来手动进行迁移。

关于`pom.xml`，您必须踢出 JBoss AS 中已包含的所有部门。API 可能会保留，但仅作为编译时依赖项（不应以 .war 结尾）。

根据您要迁移的程度，您可能还希望完全删除 Spring 并用 JBoss AS 提供的服务替换它，并使用 CDI 注释连接应用程序的各个部分。

关于 NetBeans 中的 JBoss AS，对 AS 5 的内置支持已经很久了，至少从 6.x 开始，从 7.3.1 开始，它也应该支持 AS 7。

# php - 生成唯一的视图 ID

> ID：15938919
> 
> 赞同：0
> 
> 时间：2013-04-11T00:36:17.327
> 
> 标签：php, mysql, codeigniter

我在 mysql 数据库中有表，我希望能够生成一个唯一的字符串，以便用户可以输入将运行适当查询并显示结果的字符串。

前任）

```
id | text         | view_code <--this would be randomly generated
1  | testing      | fsj2343lfs
2  | another_test | fsdflj2dff 
```

页面上会有一个文本框，它将**view_code**作为输入。如果文本输入与表中的 view_code 之一匹配，则会向用户显示相应的记录。

编辑：这个想法是我会给用户＃1 view_code of 'fsj2343lfs' ，这将只返回记录'1 | text' 并将其显示在网页上。这是为了确保该用户只能看到该记录，而无权访问数据库中的任何其他记录。

这是解决这个问题的好方法吗？还有其他更好的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:39:26.810

做你想做的事情的*正确*`username`方法是让用户在他们初次访问你的网站时登录，然后将他们的和存储`password`在`$_SESSION`变量中。然后，当您去比较用户输入的唯一 ID 时，您会要求您的数据库验证用户的唯一 ID，该用户的用户名和密码与存储在您的`SESSION`.

# html - Sharepoint 2010 HTML5 兼容性

> ID：15938920
> 
> 赞同：1
> 
> 时间：2013-04-11T00:36:17.473
> 
> 标签：html, sharepoint-2010

标题、文章、部分等 HTML5 标记是否可以在 Sharepoint 2010 中使用？我发现了对这个问题的几种不同的回答，包括“根本没有”和“是的，但是您需要将其中一个元标记中的浏览器支持从 IE8 更改为 IE9”。我已经尝试过后一种解决方案，但这是不行的；当我查看我的开发人员工具时，它为我所有的 HTML5 结束标签提供了“空文本节点”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:57:24.887

Yes, it's compatible. But in order to use the technique of HTML5 you also need a browser supporting HTML5 and SharePoint 2010\. There is a project on codeplex making a [custom HTML5 master page templates to SharePoint 2010](http://sharepoint2010html5.codeplex.com/) - so yes it's possible. At the same time be aware of that you can't expect fully supported functionality of your SharePoint 2010 farm, but most of it will work.

# ios - 'NSURLRequest' 没有可见的@interface 声明选择器'initwithURL:'

> ID：15938924
> 
> 赞同：1
> 
> 时间：2013-04-11T00:36:39.393
> 
> 标签：ios, objective-c, nsurlrequest

Xcode 新手，我的编码有什么问题？

```
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
Webview.userInteractionEnabled = TRUE;
[UIWebView loadRequest: [[[NSURLRequest alloc] initwithURL:[[NSURL alloc] initWithString:@"http://www.reddit.com/r/Diecast/"]]];
[super viewDidLoad]; 
```

请帮忙，如果我做错了什么，请纠正我！我正在尝试为该特定页面制作浏览器，以便人们可以打开图片并浏览该页面。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T01:01:32.287

检查您的大小写`-initWithURL:`

此外，您需要调用`loadRequest:`您的 Web 视图实例，而不是类`UIWebView`：

```
NSURL *url = [[NSURL alloc] initWithString:@"http://www.reddit.com/r/Diecast/"];
NSURLRequest *request = [NSURLRequest alloc] initWithURL:url];
[Webview loadRequest:request]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:02:07.913

尝试这个

```
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
Webview.userInteractionEnabled = YES;
[Webview loadRequest: [[[NSURLRequest alloc] initWithURL:[[NSURL alloc] initWithString:@"http://www.reddit.com/r/Diecast/"]]]; 
```

# mysql - hadoop 如何处理对从 RDBMS 提取的行的更改

> ID：15938931
> 
> 赞同：1
> 
> 时间：2013-04-11T00:37:41.380
> 
> 标签：mysql, hadoop, mapreduce, hdfs, sqoop

我有一个场景，每天将数据从 MYSQL 数据库摄取到 hadoop 到一个过时的文件夹中。每天都会编辑几行，并且可能还会有一些架构更改。如果我只对最新的数据和模式感兴趣，我们如何在 hadoop 中处理这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:31:05.233

[这](http://sqoop.apache.org/docs/1.4.2/SqoopUserGuide.html#_incremental_imports)是 Sqoop 中增量导入的文档。此外，Sqoop 可以在导入数据时获取表名，因此如果架构更改，Sqoop 命令应该相同。

> bin/sqoop 导入 --connect jdbc:mysql://localhost/bigdata --table 小部件 -m 1

# html - 在 CSS 中创建人字形

> ID：15938933
> 
> 赞同：23
> 
> 时间：2013-04-11T00:38:30.417
> 
> 标签：html, css

我正在研究如何在 CSS 中创建人字形（不是三角形）。基本上创建看起来像`>`或的图标`<`。

在这个网站上：[http](http://css-tricks.com/examples/ShapesOfCSS/) ://css-tricks.com/examples/ShapesOfCSS/在底部，有一个人字形。但是，它被指向下方。我想知道如何让它指向右边，指向左边。我试着玩弄角度，但我无法弄清楚，因为我不确定这些东西是如何创建的。

顺便说一句，这是应该在像 d3 这样的绘图库中创建的东西，还是只使用 div？我基本上是在使用这个人字形来尝试在屏幕上分离视觉元素。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-07-09T10:50:33.100

# 使用 CSS 边框管理、创建和控制 V 形

按照示例中的说明更改结果。

可以更改的参数：

1.  回转。
2.  厚度。
3.  颜色。
4.  规模。

![示例截图](https://i.stack.imgur.com/WHYUQ.jpg)

```
.chevron {
    position:relative;
    display:block;
    height:50px; /*Height should be double border thickness*/
}
.chevron::before,
.chevron::after {
    position:absolute;
    display:block;
    content:"";
    border:25px solid transparent; /*Adjust chevron size*/
}
/*Change the four instances of 'top' below to rotate chevron*/
/*Use (top/right/bottom/left) where you want the back of the chevron to be*/
.chevron::before {
    top:0;
    border-top-color:#b00; /*Chevron Color*/
}
.chevron::after {
    top:-10px; /*Adjust thickness*/
    border-top-color:#fff; /*Match chevron background colour*/
}
```

```
<i class="chevron"></i>
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-06-06T16:36:09.107

```
p:before { content:"\2039"; }
p:after  { content:"\203A"; } 
```

此特定示例的不同解决方案（无旋转和使用人字形字符代码）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-11T01:04:46.270

只需执行以下`rotate(90deg)`操作`#chevron`：

```
#chevron {
  position: relative;
  top: 100px;
  text-align: center;
  padding: 12px;
  margin-bottom: 6px;
  height: 60px;
  width: 200px;
  -webkit-transform: rotate(90deg);
  -moz-transform: rotate(90deg);
  -ms-transform: rotate(90deg);
  -o-transform: rotate(90deg);
  transform: rotate(90deg);
} 
```

[http://jsfiddle.net/29Edw/](http://jsfiddle.net/29Edw/)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-07-15T20:14:01.013

这里有另外两种用 CSS 制作人字形的方法。这些不使用变换或旋转，因此它与 IE8+ 兼容，但需要注意的是，您必须设置雪佛龙的颜色和雪佛龙所在的背景颜色：

[CSS Chevron - 两个三角形](http://jsfiddle.net/kevinkirchner/DQruj/)

```
.chevron {
    display:inline-block;
    width: .5em;
    height: .8em;
    position:relative;
}
.chevron:before,
.chevron:after {
    display:block;
    content:"";
    width:0;
    height:0em;
    border-style:solid;
    position:absolute;
}
.chevron:before {
    right:0;
    border-width:.4em 0 .4em .4em;
    border-color:transparent transparent transparent red;    
}
.chevron:after {
    left:0;
    border-width:.4em 0 .4em .4em;
    border-color:transparent transparent transparent #fff;    
}
.chevron.skinny {
    width:.4em;
}
.chevron.fat {
    width:.6em;
} 
```

* * *

[CSS Chevron - 三个三角形](http://jsfiddle.net/kevinkirchner/JdSgA/)

```
.chevron {
    display:inline-block;
    background:red;
    width: .55em;
    height: .75em;
    position:relative;
}
.chevron:before,
.chevron:after {
    display:inline-block;
    content:"";
    width:0;
    height:0em;
    border-style:solid;
    position:absolute;
}
.chevron:before {
    left:0;
    border-width:.4em 0 .4em .4em;
    border-color:transparent transparent transparent #fff;    
}
.chevron:after {
    right:0;
    border-width:.4em 0 .4em .4em;
    border-color:#fff transparent;    
}
.chevron.skinny {
    width:.4em;
}
.chevron.fat {
    width:.7em;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-12-21T18:22:12.647

这是右 V 形的简单 CSS 实现。您正在 :after 伪元素的两侧创建一个边框，并通过 rotate() 函数将其旋转 45 度。

```
.container:after {
  content: ' ';
  display: inline-block;
  border-bottom: 1px solid #f00;
  border-right: 1px solid #f00;
  height: 10px;
  width: 10px;
  transform: rotate(-45deg);
}
```

```
<div class="container"></div>
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-11T01:09:14.417

您可以使用 CSS 字形`&rang; , &lang;` [http://css-tricks.com/snippets/html/glyphs/](http://css-tricks.com/snippets/html/glyphs/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-11T01:03:16.747

是这么长的代码所以我做了这个[小提琴](http://jsfiddle.net/r8WSB/4/)
基本上是使用伪选择器 `:before`制作的`:after`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-06-29T08:33:45.523

到目前为止未提及的另一种可能性是内联 svg，例如

```
.breadcrumb::after {
  background-color: #b71c1c;
  width: calc((2/9)*3em);
  height: 3em;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2 9'%3E%3Cpath d='M-.1 0L2 4.5L-.1 9Z' fill='%237f0000'/%3E%3C/svg%3E");
} 
```

[![雪佛龙的屏幕截图](https://i.stack.imgur.com/Iz2k0.png)](https://i.stack.imgur.com/Iz2k0.png)

我不是一个真正的 CSS 人，这可以解释为什么我发现这比任何其他建议更容易理解和调整。

[这](https://yoksel.github.io/url-encoder/)是一个非常好的工具，可以快速生成您的 svg 并将其转义以复制粘贴到您的 css 中。

这种方法也非常灵活，因为您几乎可以绘制任何您想要的东西，例如可以完全控制您的人字形顶点的角度，（我认为）这里的其他方法不是这样。

另一个简单的例子：

```
.profile_menu::before {
  margin-right: 0.5em;
  background-color: #b71c1c;
  width: calc((2/10)*3em);
  height: 3em;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' style='width:100%25; height:100%25' viewBox='0 0 2 10'%3E%3Ccircle cx='8' cy='5' r='8' fill='%237f0000'/%3E%3C/svg%3E");
} 
```

[![通过内联 svg 弯曲边框](https://i.stack.imgur.com/kabX1.png)](https://i.stack.imgur.com/kabX1.png)

到目前为止，我发现的最大缺点是必须在 svg 中指定填充颜色。如果有办法解决这个问题会很好，但我不需要它，所以没有花太多时间尝试。

兼容性注意事项：在撰写本文时，它适用于桌面上的最新版 firefox (60.0.2)、safari (11.1.1) 和 chrome (67.0.3396.87)，以及 android/ios 上的 chrome/safari。这就是我到目前为止测试的所有内容。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-26T14:24:51.473

谢谢黑曜石的回答。我已经将它转换成一个 Sass mixin，所以你可以很容易地通过它传递设置来生成你的箭头。

```
/* $class outputs the selector, do not place mixin within a rule
   $dir == up, down, left or right,
   $bg == background-color of arrow container 
*/ 

@mixin arrow($class, $size, $weight, $color, $dir, $bg) {
    @if $dir == up {
        $dir : bottom;
    }
    @elseif $dir == down {
        $dir : top;
    }
    @elseif $dir == right {
        $dir : left;
    } 
    @else {
        $dir : right;
    }

   .#{$class} {
       position:relative;
       display:block;
       height: $size * 2;
    }

   .#{$class}:before,
   .#{$class}:after {
       position:absolute;
       display:block;
       content:"";
       /*Size*/
       border:$size solid transparent;
    }

    .#{$class}:before {
        #{$dir}:0;
        /*Arrow Color*/
        border-#{$dir}-color:$color;
    }

   .#{$class}:after {
      /*Thickness*/
      #{$dir}:-$weight;
      border-#{$dir}-color:$bg;
   }
} 
```

示例用法：

```
@include arrow(arrow-right, 25px, 5px, #cecece, right, #fff); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-03-09T16:33:31.513

我发现所有这些解决方案都比我想要的更复杂和/或更不灵活（在尺寸和/或厚度方面），所以我想分享我使用的代码。我还包括了一个`Hover`与链接一起使用的状态。

[链接到小提琴](https://jsfiddle.net/chayacooper/f631ewd1/)

**CSS**

```
.chevron a:before {
  border-style: solid;
  border-width: 0.1em 0.1em 0 0;  /* Line thickness */
  content: '';
  display: inline-block;
  height: 5em;     /* Arrow size; Height & Width must remain equal */
  width: 5em;
  left: 0.15em;
  position: relative;
  transform: rotate(-45deg);     
  color: #808080;
}

/* Hover State */   
.chevron a:hover:before {
  content: '';
  color: black;
}      

/* Right Arrow */   
.chevron.right a:before {
 left: 0;
 transform: rotate(45deg);    
}

/* Down Arrow */   
.chevron.bottom a:before {
  top: 0;
  transform: rotate(135deg);
  /* To position at top of element, compensate for rotation with margin-top: -2.5em; */
} 
```

**HTML**

```
<div class="chevron right">
  <a href="#" style="background-color: white;"></a>
</div>

<div class="chevron bottom">
  <a href="#" style="background-color: white;"></a>
</div> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-11T00:52:33.000

如果您不反对使用现有的解决方案，FontAwesome 在图标字体中有这个和其他字形，您可以在标记中利用：http: [//fortawesome.github.io/Font-Awesome/#icon/icon-chevron -下](http://fortawesome.github.io/Font-Awesome/#icon/icon-chevron-down)

您可以这样使用它（在按照说明包含所需文件之后）：

`<i class="icon-chevron-down"></i>`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-17T13:08:11.397

好的，所以我需要能够在不重复 ID 的情况下重复***使用***雪佛龙。. .所以这就是我想出的（感谢Yenn）。（我的应用程序需要小 V 形）。

它使用类而不是 ID 标签，还使用级联类将其向左翻转。. . 而不是加倍我的css代码。

```
.chevron {
  position: relative;
  padding: 0px;
  height:17px;
  width: 6px;
  margin-left:0px;
  margin-top:0px;
}

.chevron:before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  height: 50%;
  width: 100%;
  background: gray;
  -webkit-transform: skew(25deg, 0deg);
  -moz-transform: skew(25deg, 0deg);
  -ms-transform: skew(25deg, 0deg);
  -o-transform: skew(25deg, 0deg);
  transform: skew(25deg, 0deg);
}

.chevron:after {
  content: '';
  position: absolute;
  top: 50%;
  right: 0;
  height: 50%;
  width: 100%;
  background: gray;
  -webkit-transform: skew(-25deg, 0deg);
  -moz-transform: skew(-25deg, 0deg);
  -ms-transform: skew(-25deg, 0deg);
  -o-transform: skew(-25deg, 0deg);
  transform: skew(-25deg, 0deg);
}

.rotate180
{
  -webkit-transform: rotate(180deg);
  -moz-transform: rotate(180deg);
  -ms-transform: rotate(180deg);
  -o-transform: rotate(180deg);
  transform: rotate(180deg);

} 
```

[http://jsfiddle.net/n5Fd8/](http://jsfiddle.net/n5Fd8/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-12-16T02:55:51.683

无 CSS3，用边框做老派：

```
.chevron {
    display: inline-block;
    vertical-align: middle;
}
.chevron:before,
.chevron:after {
    content: '';
    display: block;
    overflow: hidden;
    height: 0;
    width: 0;
    border: solid black 20px;
}
.chevron.up:before,
.chevron.up:after {
    border-bottom-width: 12px;
    border-top-width: 0;
}
.chevron.up:before,
.chevron.down:after {
    border-left-color: transparent;
    border-right-color: transparent;
}
.chevron.up:after {
    border-top-width: 7px;
    border-bottom-color: transparent;
}
.chevron.down:before,
.chevron.down:after {
    border-top-width: 12px;
    border-bottom-width: 0;
}
.chevron.down:before {
    border-bottom-width: 7px;
    border-top-color: transparent;
}
.chevron.left:before,
.chevron.left:after,
.chevron.right:before,
.chevron.right:after {
    display: inline-block;
}
.chevron.left:before,
.chevron.left:after {
    border-right-width: 12px;
    border-left-width: 0;
}
.chevron.left:before,
.chevron.right:after {
    border-top-color: transparent;
    border-bottom-color: transparent;
}
.chevron.left:after {
    border-left-width: 7px;
    border-right-color: transparent;
}
.chevron.right:before,
.chevron.right:after {
    border-left-width: 12px;
    border-right-width: 0;
}
.chevron.right:before {
    border-right-width: 7px;
    border-left-color: transparent;
}
```

```
<span class="chevron down"></span>
<span class="chevron up"></span>
<span class="chevron right"></span>
<span class="chevron left"></span>
```

# css - 下拉菜单可以有灵活的宽度吗？

> ID：15938935
> 
> 赞同：0
> 
> 时间：2013-04-11T00:38:37.297
> 
> 标签：css, navigation

我已经建立了一个标准的下拉菜单（没什么花哨的），但是，为了扩展它，我必须设置一个固定的宽度。我可以省略宽度并根据我添加的内容量扩展它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:43:05.453

**简短的回答：**是的。

**长答案：**这在很大程度上取决于您构建标记的方式、CSS 的外观以及是否使用 jQuery 之类的东西来为下拉菜单设置动画。我用于下拉菜单的 CSS 是 Suckerfish 的一种变体，不需要固定宽度，因此**可以**。如果您可以发布一个简单的示例来说明您正在做什么，那么有人可能会就如何消除对固定宽度的需求提出建议。

# python - 如何查找列表中唯一单词的数量

> ID：15938936
> 
> 赞同：-7
> 
> 时间：2013-04-11T00:38:40.420
> 
> 标签：python, list

例如：

```
["apple", "banana", "apple", "mango"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:45:07.253

字符串“join”方法在这里可能对你有用，但它不会给你你想要的答案。用“nothing”连接列表的元素：

```
In [1]: "".join(["I","a","m","h","a","p","p","y"])
Out[1]: 'Iamhappy' 
```

如果您的列表包含空格，您可以这样做：

```
In [2]: "".join(["I"," ","a","m"," ","h","a","p","p","y"])
Out[2]: 'I am happy' 
```

后跟空格上的字符串“split”：

```
In [3]: 'I am happy'.split(" ")
Out[3]: ['I', 'am', 'happy'] 
```

但是解析字典单词的原始结果（Out[1]）是另一回事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:56:09.387

您对如何组合列表中的元素有定义吗？

所以，假设你有你的例子

```
x = ["I","a","m","h","a","p","p","y"]
comb = [1, 2, 5] 
```

然后

```
def combine(l, comb):
    x = []

    if sum(comb) == len(l):
        for n, i in enumerate(comb):
            d = sum(comb[:n])
            x.append(''.join(l[d : d + i]))
        return x
    return l 
```

并将`combine(x, comb)`返回`['I', 'am', 'happy']`。

# c - 混合增量运算符和逻辑运算符

> ID：15938941
> 
> 赞同：3
> 
> 时间：2013-04-11T00:39:31.233
> 
> 标签：c, increment, logical-operators, pre-increment

如果我有此代码，我有一个关于逻辑运算符的前后增量的问题

```
void main()
{int i = - 3 , j = 2 , k = 0 , m ;
m=++i||++j&&++k;
printf("%d %d %d %d",i,j,k,m);} 
```

知道递增和递减运算符的优先级高于 && 和 || 所以它们将首先被执行 然后 && 高于
意味着 -2||3&&1 ，它给出了 printf 的值 -2 3 1 1

但是我在尝试 VS2010 时得到的输出是 -2 2 0 1

有人对此有任何解释吗？问候，，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:45:02.833

这就是你从短路中得到的。`++i`是-2，其余的不必评估（并且不符合标准）。的左边`||`为真，因为-2不为0，所以整个表达式为真。

# java - Java中的顺序字符串搜索

> ID：15938943
> 
> 赞同：0
> 
> 时间：2013-04-11T00:39:39.093
> 
> 标签：java, string, search, sequential

你好再次堆栈溢出.. ers，我创建了这段代码来顺序搜索数组以找到一个值，在这种情况下是一个名称。但是我不能让它工作，它不会找到我输入的名字，并且总是返回一个值-1。

当我将所有类型更改为 INT 并在年龄数组上进行搜索时，它起作用了，所以它可能与字符串类型有关？有人可以帮帮我吗？

公共静态无效主要（字符串[]参数）{

```
 String[] name = {"John", "bert", "Elle", "beth"};
    String[] sex = {"Male", "Male", "female", "female"};
    int[] age = {18, 25, 22, 36};
    int found;

    Scanner keyboard = new Scanner(System.in);
    System.out.println("Enter name to search: ");

    String searchName = keyboard.next();

    found = searchNames(name, searchName);

    if(found == -1)
        System.out.println("Error, not found: " + found);
    else
        System.out.println("Found At: " + found);

}

private static int searchNames(String[] name, String searchName) {

    int i = 0, foundAt = -1;
    boolean found = false;

    while (!found && i < name.length)
    {
        if (name[i] == searchName)
        {
            found = true;
            foundAt = i;
        }
        i++;
    }
    return foundAt;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:42:11.977

这将很快关闭，但用于`.equals()`比较字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:58:49.110

尝试替换这部分代码

```
while (!found && i < name.length)
{
    if (name[i] == searchName)
    {
        found = true;
        foundAt = i;
    }
    i++;
} 
```

和

```
for(int i=0; i<name.length; i++)
{
    if(name[i].equalsIgnoreCase(searchName))
    {
        found = true;
        foundAt = i;
        break;
    }
} 
```

# complexity-theory - 在指数级大图上查找电路更改值的次数的计算复杂度是多少？

> ID：15938944
> 
> 赞同：0
> 
> 时间：2013-04-11T00:39:39.717
> 
> 标签：complexity-theory, theory, graph-theory

令 C 是一个将 n 长度位串映射到 {0, 1, 2} 的元素的电路。想象在一个巨大的循环中对一组 n 长度的位串进行排序：00000 与 00001 和 11111 相邻；00001 与 00000 和 00010 相邻；等等

如果 C(00000) = x 且 C(00001) != x，则 C 在这些相邻节点之间更改值。我想计算 C 在循环中更改值的总次数；更具体地说，我只想知道这个数字是偶数还是奇数。

这个问题的复杂性是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:56:38.880

没有关于函数（电路）C 的其他信息，我想你必须只计算......（你当然不能做的是通过查看它的输入输出来推断 C 的任何功能“特征”只是一个适当的考虑范围的子集。）

所以，我想，你必须执行 O(n) 的许多 C 应用程序，其中 n 是“循环”的大小......所以，在你的情况下是指数的

# python - 使用 python 问题读取注册表值

> ID：15938945
> 
> 赞同：0
> 
> 时间：2013-04-11T00:39:55.390
> 
> 标签：python

我觉得我正在服用疯狂的药丸。因此，为了确保我正在使用的工作 api 的安全性，我必须从注册表中读取 2 个内容，然后将其传递给 suds。问题在于读取注册表值。无论我做什么，我都会得到“错误2系统找不到指定的文件”。我知道注册表文件在那里，但它不会让我阅读它。我已经在 2 个不同的 2008 r2 服务器上尝试了下面的代码。在一个 Windows 7 机器上，我可以读取这些值……但只能在一台机器上。下面是代码，我需要更改实际目录（以保护匿名）

```
from _winreg import *

key = OpenKey(HKEY_LOCAL_MACHINE, r"Software\a\b", 0, KEY_ALL_ACCESS)
devguid = QueryValueEx(key, "DeviceID")
devid = QueryValueEx(key, "DeviceGUID")
devnm = socket.gethostname() 
```

如果我将目录更改为 \a\b 以外的其他目录，则它可以正常工作。我已经验证这些目录的权限与我可以读取的目录完全相同。

另外，我可以从 cmd 运行以下命令并获得我需要的输出： reg query HKLM\software\a\b /v DeviceGUID 但是当我从 python 脚本运行它时，它说找不到指定的文件。

```
import os
cmd = "reg query HKEY_LOCAL_MACHINE\software\a\b /v DeviceGUID"
a = os.system(cmd)
print a 
```

以管理员身份运行我的脚本或任何东西都无济于事。由于某种原因，python 无法尝试准备注册表....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:11:39.743

首先，您需要确保您的反斜杠被适当地转义，或者按照第一个代码示例使用原始字符串。我会假设你已经做到了。

最可能的解释是您在 64 位系统上使用 32 位 Python。所以受制于注册表重定向器提供注册表的 32 位视图。

要么使用 64 位 Python，要么专门用 64 位视图打开它们。通过指定 KEY_WOW64_64KEY 标志来执行后者。

# c# - 在列表框上选择时如何删除注册表项？

> ID：15938951
> 
> 赞同：0
> 
> 时间：2013-04-11T00:40:30.783
> 
> 标签：c#, file, listbox, registry

我已将所有启动程序添加到列表框中。当我选择项目并单击按钮时，如何删除选定的注册表项？

列表框代码：

```
 private void starting()
    {
        RegistryKey HKCU = Registry.CurrentUser.OpenSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Run");
        {
            foreach (string Programs in HKCU.GetValueNames())
            {
                startupinfo.Items.Add(Programs);
            }
            HKCU.Close();
        }
        RegistryKey HKLM = Registry.LocalMachine.OpenSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Run");
        {
            foreach (string HKLMPrograms in HKLM.GetValueNames())
            {
                startupinfo.Items.Add(HKLMPrograms);
            }
            HKLM.Close();
        } 
```

这是我可以逐个文件删除的启动文件夹：（感谢 Rikki-B 帮助我）

```
 private void readfiles()
    {
        string startfolder = Environment.GetFolderPath(Environment.SpecialFolder.Startup);

        var files = Directory.GetFiles(startfolder).Where(name => !name.EndsWith(".ini"));

        foreach (string file in files)
        {
            startupinfo.Items.Add(System.IO.Path.GetFileName(file));
            startupinfoDict.Add(System.IO.Path.GetFileName(file), file);
        }
    } 
```

这是按钮：

```
 private void DisableBtn_Click(object sender, RoutedEventArgs e)
    {
        if (startupinfo.SelectedItem != null)
    {
        string s = startupinfo.SelectedItem.ToString();

        if (startupinfoDict.ContainsKey(s))
        {
            File.Delete(startupinfoDict[s]);
        }
    }
} 
```

列表框的外观：

[![1](https://i.stack.imgur.com/XWNA9.png)](https://i.stack.imgur.com/XWNA9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:11:36.243

试试这个。

```
private void DisableBtn_Click(object sender, RoutedEventArgs e)
{
    if (startupinfo.SelectedItem != null)
    {
        string s = startupinfo.SelectedItem.ToString();

        if (startupinfoDict.ContainsKey(s))
        {
            try
            {
                File.Delete(startupinfoDict[s]);
            }
            catch
            {
                //errors are here
            }
        }

        string keyName = @"Software\Microsoft\Windows\CurrentVersion\Run";
        using (Microsoft.Win32.RegistryKey key = Microsoft.Win32.Registry.CurrentUser.OpenSubKey(keyName, true))
        {
            if (key != null)
            {
                try
                {
                    key.DeleteValue(startupinfo.SelectedItem.ToString());
                }
                catch
                {
                    //errors are here
                }
            }
        }
    }
} 
```

# algorithm - 是否有不超过 x 天从城市 a 到城市 b 的路线？

> ID：15938954
> 
> 赞同：3
> 
> 时间：2013-04-11T00:40:43.163
> 
> 标签：algorithm, graph, graph-algorithm, shortest-path

我在一家贸易公司面试时被问到这个问题，

您乘坐公共汽车穿越州，公共汽车可以在任何可能的 C 城市停靠，您需要找到从城市 a 到城市 b 的方法。共有B 辆公交车，每辆公交车往返于两个城市之间。所有公共汽车都以每日为基地行驶，例如，每辆公共汽车 x 在 d1 天离开某个城市 c1，并在另一天 d2 到达另一个城市 b1 (d2>d1)。假设如果您在 d 天到达一个城市，您可以搭乘任何在 d 天或之后离开该城市的公共汽车。

B 总线为您提供 a1、b1、d1 和 d2。描述一种算法，判断是否存在不超过 D 天从城市 a 到城市 b 的路线，并分析运行时间。

我最初试图将问题建模为最短路径算法，但当时我无法弄清楚，我搞砸了面试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:22:02.670

我想如果给你一天的时间（似乎不是这样），应用[Dijkstra 的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)应该很容易。

为问题创建图表很简单。每个节点都是一个城市，每条总线都是从一个节点到另一个节点的有向边。边缘的权重通常并没有真正定义（我们不能只考虑行程时间），并且将在我们处理它时确定。

因此，**将问题简化为您知道 start day 的多个子问题**，如下所示：

从a有k辆公共汽车到其他城市。所以巴士 b [i]从 a 到 b [i从第][i]天开始到第[i]天结束。[对于这些总线中的每一个，在第i]天结束时从 b [i]开始创建一个子问题（并记住 start [i]）。

**在给定起始日期和城市的情况下进行 Dijkstra：**

在探索图表时，我们需要跟踪当天。

当从第 d1 天开始在城市 c1 生成邻居时，对于每个有从 c1 到 c2 的公共汽车的城市 c2，我们生成从 c1 到 c2 的*最早*公共汽车（在 c1 >= 当天出发）（如果公共汽车可以乘坐从 c1 到 c2 的天数不同，考虑最早到达 c2)。c2 的值就是从最初的出发日（从上面开始[i]）到巴士到达 c2 的天数。

**优化：**

您不需要对每个子问题执行一次*完整*的 Dijkstra 运行，如果您在某一天到达一个城市，那么在同一天到达该城市的任何下一个子问题都将从那里开始具有相同的路径。同时完成它们应该不会太难，并且应该比一次完成它们产生更好的性能。

人们可能会想出一个启发式函数来应用[A*](http://en.wikipedia.org/wiki/A-star_algorithm)。

如果我错过了什么，请随时指出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:19:00.813

有趣的问题。这是我的尝试。如果我忽略了一些重要的事情，或者我的解决方案中的某些内容不清楚，请告诉我。

**提示 1：如果问题看起来很难，请将其简化为更简单的问题。解决更简单的问题，看看你是否可以将你的解决方案推广到更难的情况。**

让我们在这里应用这个技巧。我们知道公共汽车在两个城市之间穿梭。为了简化假设，如果一辆公共汽车从一个城市到另一个城市，我们总是可以在这两个节点之间穿行。因此，构建一个以城市为顶点的无向图。现在在顶点 i 和 j 之间有一条边，如果有从 i 到 j 的公共汽车（与从 j 到 i 相同）。现在在这种情况下，问题很简单，如果我们对从 a 开始并以长度 < n 的 b 结束感兴趣，最短路径的长度是否小于 n。伟大的！

现在让我们回到更难的问题。我们构建了两个图 G_1 和 G_2，G_1 表示在奇数天（如第 1 天）时我们可以到达的地方，而 G_2 表示在偶数天（如第 2 天）时我们可以到达的地方。现在这两个图都是有向的，不像以前。现在我们将这两个图结合起来形成图G。G的顶点只是G_1并集G_2。现在对于 G_1 中的每个有向边，表示开始顶点 s 和结束顶点 t。将 G_1 中的顶点 s（作为 G 的子图）连接到 G_2 中的顶点 t（作为 G 的子图）。对于 G_2 中的每个有向边，表示开始顶点 s 和结束顶点 t。将 G_2 中的顶点 s（作为 G 的子图）连接到 G_1 中的顶点 t（作为 G 的子图）。G 中的所有有向边的权重为 1。现在的问题是 G 中是否存在长度 < n 的最短路径。

这个想法是将两个图 G_1 覆盖在 G_2 之上，以便我们考虑路线在偶数日和奇数日发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:04:45.067

这是 Haskell 中的一个示例，其中包含真正的慢速巴士，构建从目的地到起点的路线：

```
import Data.List (elemIndex)
import Data.Maybe (fromJust)

cities = ["New York", "Philadelphia", "Washington", "Buffalo"]
buses = [([0,1],2), ([0,2],1), ([1,2],1), ([2,3],4)] --buses (cities a1 b1 as indexes, num days of travel)

solve origin destination maxDays = do
  lastBus <- filter ((== fromJust (elemIndex destination cities)) . last . fst) buses
  solve' [lastBus] where
    solve' result 
      | sum (map snd result) > maxDays                   = []
      | cities !! (head . fst . head $ result) == origin = 
          [(map (map (cities !!) . fst) result, show (sum . map snd $ result) ++ " Days Travel")]
      | otherwise = 
          let potentialBuses = filter ((== (head . fst . head $ result)) . last . fst) buses
          in if null potentialBuses 
                then []
                else do
                  bus <- potentialBuses
                  solve' (bus:result)

OUTPUT:
*Main> solve "New York" "Buffalo" 6
[([["New York","Washington"],["Washington","Buffalo"]],"5 Days Travel")]

*Main> solve "New York" "Buffalo" 3
[] --trip longer than D

*Main> solve "New York" "Washington" 3
[([["New York","Washington"]],"1 Days Travel"),
 ([["New York","Philadelphia"],["Philadelphia","Washington"]],"3 Days Travel")] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T17:20:39.253

您会不时发现另一种方法。它基于定义城市之间可能的过渡的矩阵。假设矩阵是 M，如果有从城市 j 到城市 i 的道路，则 M[i,j] 为 1，否则为 0。通过从起始城市的单位向量开始并将该向量与转移矩阵相乘，您可以将在一步内到达的所有城市中获得一个值大于零的向量。您在请求的天数内重复此步骤。

在为您的案例建模时，一个问题是您有一个加权图，即并非每个转换都需要相同的时间。但是，该成本是一个整数，因此您可以在需要超过一天时间的路线中引入人工停靠点（即顶点）来对此进行建模。然后你会得到一个未加权的图表。此外，您可以从问题中假设权重很低，因此它可能不会造成太多开销。

由于矩阵乘法是关联的，因此您可以将矩阵与自身相乘多次，然后再将其输入初始向量。由于实际值不感兴趣，只有它们是 0 还是 1，您可能能够进一步减少它并有效地对矩阵进行位打包。此外，您可以将 MxMxMxM 计算为 (MxM)x(MxM) 以减少开销。然后，还可以对矩阵乘法（Strassen 算法，IIRC）进行一些优化。

*注意：我知道这个描述有点粗略，请给我留言，我会尽力澄清它。*

# windows-store-apps - Windows 应用商店中没有异步的消息对话框？

> ID：15938956
> 
> 赞同：1
> 
> 时间：2013-04-11T00:40:53.967
> 
> 标签：windows-store-apps, async-await

所以，我正在将一个应用程序移植到 Windows 应用商店。在应用程序的开始，我有一些代码，它提出了一个问题。在我得到响应之前，我不希望我的代码的其余部分被触发。

我有这个：

```
 string message = "Yadda Yadda Yadda";
        MessageDialog msgBox = new MessageDialog(message, "Debug Trial");
        msgBox.Commands.Add(new UICommand("OK",
                    (command) => { curSettings.IsTrial = true; }));
        msgBox.Commands.Add(new UICommand("Cancel",
                    (command) => { curSettings.IsTrial = false; }));
        await msgBox.ShowAsync();

        //... more code that needs the IsTrial value set BEFORE it can run... 
```

当我运行应用程序时，msgBox.ShowAsync() 之后的代码运行，但没有设置正确的值。只有在方法完成后，用户才会看到对话框。

我希望这更像是一个提示，程序在继续该方法之前等待用户单击。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:14:28.573

MessageDialog 没有用于“显示”的非异步方法。如果您想在继续之前等待对话框的响应，您可以简单地使用[`await`](http://msdn.microsoft.com/en-us/library/vstudio/hh156528.aspx)关键字。

这也是 Windows 应用商店应用中异步编程的[快速入门指南](http://msdn.microsoft.com/en-US/library/windows/apps/hh452713)。

我看到您的代码示例已经使用“等待”。您还必须将调用函数标记为“异步”以使其正常工作。

例子：

```
private async void Button1_Click(object sender, RoutedEventArgs e) 
{
    MessageDialog md = new MessageDialog("This is a MessageDialog", "Title");
    bool? result = null;
    md.Commands.Add(
       new UICommand("OK", new UICommandInvokedHandler((cmd) => result = true)));
    md.Commands.Add(
       new UICommand("Cancel", new UICommandInvokedHandler((cmd) => result = false)));

    await md.ShowAsync();

    if (result == true) 
    {
        // do something   
    }
} 
```

# asp.net - asp.net 在 machine.config 之外使用注册为 allowDefinition='MachineOnly' 的部分是错误的

> ID：15938957
> 
> 赞同：1
> 
> 时间：2013-04-11T00:40:54.783
> 
> 标签：asp.net, machine.config

嘿伙计们，我一直在尝试将我的网站上传到远程服务器，但我一直收到此错误。我已将两台机器配置中的每个“allowDefinition”更改为“Everywhere”，但我没有提供帮助。它突出显示'部署零售=“真”/'作为问题字段。任何帮助将不胜感激。

完整的错误描述：

“/”应用程序中的服务器错误。

配置错误

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：在 machine.config 之外使用注册为 allowDefinition='MachineOnly' 的部分是错误的。

源错误：

```
Line 23:     </compilation>
Line 24:       <customErrors mode="RemoteOnly"></customErrors>
Line 25:       ***<deployment retail="true"/>***
Line 26:       <trace mostRecent="true" enabled="true" requestLimit="1000" pageOutput="false"                 localOnly="true"/>
Line 27:     <authentication mode="Forms" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:56:05.967

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms228298%28v=vs.100%29.aspx)，**部署**元素只能在机器级别设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T20:21:14.480

我的修复是我编辑了 machine.config 并从部署元素的声明中删除了 allowDefinition 属性。我不认为这是推荐的修复方法。请注意，对于不同的 .Net 版本以及 x86 和 x64 应用程序，还有更多 machine.config 文件。IE

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config\machine.config
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\machine.config 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:54:07.373

您需要创建一个虚拟目录。在 VS 中，转到项目属性并选择 Web 选项卡。在那里，您会找到一个按钮来创建它。除非绝对必要，否则不要理会 machine.config 文件。

# git - Github Graph：仅显示特定文件的添加行

> ID：15938958
> 
> 赞同：1
> 
> 时间：2013-04-11T00:40:55.700
> 
> 标签：git, github

Github 具有在 Github Graph 中显示提交统计信息的简洁功能。其中一张图显示了在特定时期内提交的行数。不幸的是，我遇到了这个问题，即一些数据文件提交了大量的行，这些行也包含在统计信息中。但我不想在统计数据中显示它们：我只想要 .java 文件的行数。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:34:22.533

不，目前不可能。正如你所说，GitHub 会计算它所能做的，因为它真的不知道每个 repo 的意义是什么（计算某些 repo 可能有意义，而对于其他 repos 可能不有意义）。

# android - 如何从应用程序中的网页启动移动浏览器？

> ID：15938959
> 
> 赞同：-2
> 
> 时间：2013-04-11T00:41:12.113
> 
> 标签：android, iphone, ipad, mobile

我正在开发一个应用程序内部的移动网站。我无法访问应用程序本身。我的客户希望从应用程序中的网站启动几个链接并在移动浏览器中打开。有没有办法做到这一点？任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:31:21.217

根据您的问题，我无法判断您想要它用于哪个平台，因此这是您标记的两个平台的解决方案。在 Android 上，您可以使用它（[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)）：

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://urlhere.com"));
startActivity(browserIntent); 
```

在 iOS 上，您可以使用它（[http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/openURL:](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/openURL:)）：

```
[[UIApplication sharedApplication] openURL:[NSURL urlWithString:@"http://urlhere.com"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:21:17.983

“如果您只需要知道您的查看器正在使用哪个设备，您可以使用像手机检测这样的服务器端检测。服务器端检测的优势在于您可以根据设备使用不同的模板或布局。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T02:43:09.813

我不确定 Android，但在 iOS 上，您需要访问应用程序的源代码才能覆盖

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

并打电话

```
[[UIApplication sharedApplication] openURL:url]; 
```

如果请求的 URL 应该在 MobileSafari 中打开。

# php - 如何在一列中选择具有较长文本的行

> ID：15938961
> 
> 赞同：0
> 
> 时间：2013-04-11T00:41:25.797
> 
> 标签：php, mysql

我在mysql中有一个这样的表，mysql中的文本被存储为“text”，数字存储为“int”

```
+----+-----------------------------------+---------+
| date |                text             | number  |
+------+---------------------------------+---------+
| 12.1 | hello!                          | 10      |
| 12.1 | hello every one!                | 15      |
| 12.1 | hello every one! welcome here!  | 20      |
+------+---------------------------------+---------+ 
```

文本越长，数字越大，那么我如何选择文本最长的行“大家好！欢迎来到这里！” 现在我有这样的代码： SELECT date,max(text),max(number) GROUP BY date 但它不起作用那我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:43:41.877

```
SELECT date, text, number from table order by length(text) desc, number LIMIT 1 
```

# php - 购物车

> ID：15938962
> 
> 赞同：0
> 
> 时间：2013-04-11T00:41:29.670
> 
> 标签：php, shopping-cart, oscommerce

我想`products_tax_class_ids`在 OSCommerce 购物车软件的结帐付款页面中检索。例如，用户的购物车中有 20 件商品，如果有任何商品有`products_tax_class_id = 30`，网站会警告他。

此代码不起作用。

```
$tax = tep_db_query("select products_tax_class_id 
                    from " . TABLE_PRODUCTS . " 
                    where products_id = '".$card[$products_id]."'");

while ($warn = tep_db_fetch_array($tax)) {
    if (warn== '30') { 
        echo "attention ....";
    } 
    else { 
        echo "..."
    }
} 
```

我怎么能`compare tax_class_id`的产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T00:38:44.807

您没有在 while 循环中指向字段名称。

```
$tax = tep_db_query("select products_tax_class_id 
                    from " . TABLE_PRODUCTS . " 
                    where products_id = '".$card[$products_id]."'");

while ($warn = tep_db_fetch_array($tax)) {
    if ($warn['products_tax_class_id'] == '30') { 
        echo "attention ....";
    } 
    else { 
        echo "..."
    }
} 
```

我认为“卡片”这个词应该是“购物车”......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T09:15:47.517

```
/**************************************************************************/
//Add following function in includes/functions/general.php
/**************************************************************************/

function tep_get_products_tax($product_id) {
    global $languages_id;

    if (empty($language)) $language = $languages_id;

    $product_query = tep_db_query("select products_tax_class_id from " . TABLE_PRODUCTS . " where products_id = '".$product_id."'");
    $product = tep_db_fetch_array($product_query);

    return $product['products_tax_class_id'];
  }

/**************************************************************************/
//Add following code in checkout_payment.php
/**************************************************************************/
$products = $cart->get_products();
for ($i=0, $n=sizeof($products); $i<$n; $i++) {
  if (tep_get_products_tax($products[$i]['id']) == 30) {
    echo "attention ....";
break
  }
}
/**************************************************************************/
//EOD
/**************************************************************************/ 
```

# android - Android：drawText 不显示在绘制

> ID：15938968
> 
> 赞同：2
> 
> 时间：2013-04-11T00:42:32.343
> 
> 标签：android, drawtext

这是我的第一个 Android 应用程序，我在使用 drawText() 时遇到了一些困难。*通过 Mario Zechner 的《Beinging Android Games* 》，我一直在自学 Android 编程。我正在修改他在书中用于 Mr. Nom 游戏的代码来创建我自己的游戏。这是一个颜色学习游戏，用户在其中点击颜色网格。我能够使用 graphics.drawRect() 成功绘制颜色网格和显示用户要“查找”的颜色的空间，以及使用 graphics.drawPixmap() 的其他几个图形资源。我试图将每种颜色的名称放在每个颜色填充矩形的顶部。我在代码底部添加了任意一行文本，如下所示：

```
p.setTypeface(Typeface.SERIF);
p.setTextSize(100);
p.setColor(Color.WHITE);
p.setStyle(Style.FILL);
canvas.drawPaint(p);
canvas.drawText("RED",120, 120, p); 
```

阅读类似的问题，我相信我的问题是我没有正确地告诉它与其他图形元素绘制到同一个屏幕上。如果我不清楚，我很抱歉 - 这又是我的第一个项目。请让我知道您可能需要哪些其他信息来帮助我。感谢您的时间和考虑！

以下是使用的其余 java 代码：

```
package com.lilyandrosieshow.colors;

import java.util.List;
import java.util.Random;

import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Canvas;
import android.graphics.Typeface;
import android.graphics.Paint.Style;

import com.badlogic.androidgames.framework.Game;
import com.badlogic.androidgames.framework.Graphics;
import com.badlogic.androidgames.framework.Input.TouchEvent;
import com.badlogic.androidgames.framework.Screen;
import com.badlogic.androidgames.framework.Sound;
import com.lilyandrosieshow.colors.ColorGrid;

public class GameScreen extends Screen {

    Random random = new Random();
    World world;
    ColorGrid colorGrid = new ColorGrid();
    Canvas canvas = new Canvas();
    Paint p = new Paint();

    static Sound[] colorSoundL = { Assets.lred, Assets.lorange, Assets.lyellow, Assets.lgreen, 
                                   Assets.lblue, Assets.lpurple, Assets.lbrown, Assets.lgrey, 
                                   Assets.lblack, Assets.lpink, Assets.lcyan, Assets.lwhite };
    static Sound[] colorSoundR = { Assets.rred, Assets.rorange, Assets.ryellow, Assets.rgreen, 
                                   Assets.rblue, Assets.rpurple, Assets.rbrown, Assets.rgrey, 
                                   Assets.rblack, Assets.rpink, Assets.rcyan, Assets.rwhite };
    static Sound[] correct1 = { Assets.correct1, Assets.correct2, Assets.correct3, Assets.correct4, Assets.correct5 };
    static Sound[] correct2 = { Assets.correcta, Assets.correctb, Assets.correctc, Assets.correctd, Assets.correcte };
    static Sound[] wrong1 = {Assets.wrong1, Assets.wrong2, Assets.wrong3, Assets.wrong4, Assets.wrong5 };
    static Sound[] wrong2 = {Assets.wronga, Assets.wrongb, Assets.wrongc, Assets.wrongd, Assets.wronge };
    static Sound[] ask = {Assets.ask1, Assets.ask2, Assets.ask3, Assets.ask4, Assets.ask5 };
    static Sound[] repeat = { Assets.again1, Assets.again2, Assets.again3, Assets.again4, Assets.again5 };

    int row = -1;
    int column = -1;

    public GameScreen(Game game) {
        super(game);
        this.world = new World();
    }

    @Override
    public void update(float deltaTime) {
        List<TouchEvent> touchEvents = game.getInput().getTouchEvents();
        int len = touchEvents.size();

        for (int i = 0; i < len; i++) {
            TouchEvent event = touchEvents.get(i);

            // Color Touched
            if (event.type == TouchEvent.TOUCH_UP && 
                    event.x >= 0 && event.x  <= 320 && event.y >= 0 && event.y <= 240) {

                for (int j = 1; j <= 4; j++){
                    if (event.x < (j*80)) {
                        column = j;
                        break;
                    }
                }
                for (int j = 1; j <= 3; j++){
                    if (event.y < (j*80)) {
                        row = j;
                        break;
                    }
                }

                updateColorTouched(column, row);

                if (world.colorTouched.x == world.colorWanted.x && world.colorTouched.y == world.colorWanted.y) {
                    correct2[new Random().nextInt(5)].play(1);
                    if (world.whichHead == World.WhichHead.LILY) colorSoundL[world.colorTouched.id].play(1);
                    if (world.whichHead == World.WhichHead.ROSIE) colorSoundR[world.colorTouched.id].play(1);
                    //world.colorTouched.s.play(1);
                    world.colorWanted = colorGrid.squares.get(random.nextInt(12));
                    //Assets.ask1.play(1);
                    //colorSet[colorWanted-1].play(1);
                } else {
                    wrong2[new Random().nextInt(5)].play(1);
                    //colorSet[colorTouched-1].play(1);
                }
            }
            // A Head Was Touched
            if (event.type == TouchEvent.TOUCH_UP && event.y > 240 && event.y <= 480){
                if (event.x > 0 && event.x < 160) world.changeVoice(World.WhichHead.LILY);
                if (event.x > 161 && event.x < 320) world.changeVoice(World.WhichHead.ROSIE);
            }
        }
    }

    @Override
    public void present(float deltaTime) { // Draw everything to the screen here
            Graphics g = game.getGraphics();
            g.drawRect(0, 0, g.getWidth(), g.getHeight(), Color.rgb(75, 75, 75));
            g.drawPixmap(Assets.findthis, 5, 245);
            g.drawRect(165, 245, 150, 70, Color.rgb(world.colorWanted.r,
                    world.colorWanted.g,
                    world.colorWanted.b)); 
            g.drawPixmap(Assets.lilyheadopen, 5, 325, 5, 5, 155, 155);
            g.drawPixmap(Assets.rosieheadopen, 165, 325, 5, 5, 155, 155);
            // Draws the grid
            for (int i = 0; i < 12; i++) {
                g.drawRect((
                          (world.colorGrid.squares.get(i).x-1)*80),
                          (world.colorGrid.squares.get(i).y-1)*80,
                           80,
                           80, 
                           Color.rgb(world.colorGrid.squares.get(i).r, world.colorGrid.squares.get(i).g, world.colorGrid.squares.get(i).b));
                // ************* DRAW TEXT NAMES HERE ********************
                p.setTypeface(Typeface.SERIF);
                p.setTextSize(100);
                p.setColor(Color.WHITE);
                p.setStyle(Style.FILL);
                canvas.drawPaint(p);
                canvas.drawText("RED",120, 120, p);
            }
    }

    public void updateColorTouched(int x, int y){
        for (int i = 1; i <= 12; i++) {
            if (x == world.colorGrid.squares.get(i-1).x && y == world.colorGrid.squares.get(i-1).y){
                world.colorTouched = world.colorGrid.squares.get(i-1);
                break;
            }
        }
    }

    @Override
    public void pause() {

    }

    @Override
    public void resume() {

    }

    @Override
    public void dispose() {

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:19:07.330

您可能希望使用方法来扩展接口，而不是绘制到`Canvas`不会在任何地方使用的对象。这将类似于在 中定义和实现的所有其他绘图调用。`Graphics``drawText(...)`[`Graphics`](http://beginning-android-games.googlecode.com/svn/trunk/ch08-2d-gamedev/src/com/badlogic/androidgames/framework/Graphics.java)[`AndroidGraphics`](http://beginning-android-games.googlecode.com/svn/trunk/ch08-2d-gamedev/src/com/badlogic/androidgames/framework/impl/AndroidGraphics.java)

为您提供帮助：

添加到`Graphics.java`：

```
public void drawText(String text, float x, float y, Paint p); 
```

添加到`AndroidGraphics.java`：

```
@Override public void drawText(String text, float x, float y, Paint p) {
    paint.set(p);
    canvas.drawText(text, x, y, paint);
} 
```

如果您需要`drawText(...)`Android 类中可用的任何其他重载[`Canvas`](http://developer.android.com/reference/android/graphics/Canvas.html)，您可以重复上述相同的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T02:27:20.150

尝试这个：

```
p.setTypeface(Typeface.SERIF);
            p.setTextSize(100);
            p.setColor(Color.WHITE);
            p.setStyle(Style.FILL);
Bitmap bitmap = Bitmap.createBitmap(200,200,Bitmap.Config.ARGB_8888);
canvas = new Canvas(bitmap);
            //canvas.drawPaint(p);
            canvas.drawText("RED",120, 120, p);
g.drawPixmap(new AndroidPixmap(bitmap,PixmapFormat.ARG_8888),839,282);//your actual
 //coordinates instead of 839,282 though 
```

# ruby - 验证不适用于扩展 ActiveModel::Naming 的类，包括 ActiveModel::Validations

> ID：15938969
> 
> 赞同：1
> 
> 时间：2013-04-11T00:42:41.163
> 
> 标签：ruby, ruby-on-rails-3, rubygems, activemodel

我是 ruby​​ 和 rails 的新手；我在我的 rails 3 应用程序中使用了以下 ruby​​ 类定义。此类仅用作在我的提交视图中填充的联系信息的属性容器（form_for）。我读了一篇文章，您可以在其中直接使用 ActiveModel 而不是 ActiveRecord 来执行验证，所以我正在尝试。当我检查对象是否有效时出现以下异常？在我的回发控制器中。我认为这有效吗？如果我包含 ActiveModel::Validations 将可用；也许我正在向后做一些其他的事情。任何帮助，将不胜感激：

未定义的方法“有效吗？” 为了 ＃

这是我的类定义，再往下是我在控制器操作中如何处理它：

```
require 'active_model'

class ContactModel
  extend ActiveModel::Naming
  include ActiveModel::AttributeMethods
  include ActiveModel::Validations
  include ActiveModel::Conversion

  validates_presence_of :first_name, :last_name, :email_address, :email_address_confirmed, :subject, :contact_message

  attr_accessor :first_name, :last_name, :email_address, :email_address_confirmed,
                :telephone_number, :subject, :contact_message 
```

# 只是搞乱测试。

```
 validates_each :first_name, :last_name do |record, attr, value|
    record.errors.add attr, 'starts with z.' if value.to_s[0] == z
  end
...
end 
```

在我的控制器/动作中......

```
def send_email
    #@contact_model = ContactModel.new().initialize_copy(params[:contact_model])
    @contact_model = params[:contact_model].dup

    respond_to do |format|
      if (@contact_model.valid?)
        # Tell the UserMailer to send a welcome Email after save
        ContactMailer.contact_email(@contact_model).deliver

        format.html { redirect_to(@contact_model, notice: 'Email successfully sent.') }
        format.json { render json: @contact_model, status: :created, location: @contact_model }
      else
        # What to do here?
      end

    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T02:05:22.603

在您的控制器中，您正在设置`@contact_model`一个哈希，`params[:contact_model]`然后调用`valid?`它。您需要创建一个 ContactModel 实例并在其上调用 valid。像这样：

```
@contact_model = ContactModel.new(params[:contact_model])

if (@contact_model.valid?)
... 
```

我看到了调用 ContactModel.new() 的注释掉的代码，但无论如何你都不想这样做。此外，没有理由对参数内容进行 dup() 或 initialize_copy() 。

# javascript - src URL 中没有协议的脚本会出现什么问题？

> ID：15938970
> 
> 赞同：4
> 
> 时间：2013-04-11T00:42:45.367
> 
> 标签：javascript, security, cross-domain, xss

从`http`和`https`协议提供的脚本的 src URL 中省略协议是否完全安全？

例如，可以像这样访问 Google CDN 上的 jQuery 代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

Facebook 和 jQuery 建议开发人员在脚本标签中使用没有协议的源代码。他们的 CDN 同时提供 HTTP 和 HTTPS 协议，因此如果其中包含脚本的页面以 HTTP 或 HTTPS 提供，它将获取具有匹配协议的脚本。这是这种做法的好处。

这有什么问题吗？我最关心的是安全性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:52:42.563

> 从 http 和 https 协议提供的脚本的 src URL 中省略协议是否完全安全？

是的。

当浏览器通过 HTTPS 查看页面时，浏览`network-path reference`器会自动请求带有协议的文件，否则它会请求带有.`https:``http:`

但是，当使用`network-path reference`本地查看文件时，浏览器将使用`file:`协议请求文件。

这里有更多信息：[**RFC 3986**](https://www.rfc-editor.org/rfc/rfc3986#section-4.2)。它没有提到安全性，但行为的性质确保根据需要选择 https/http。

去引用：

> **4.2\. 相对参考**
> 
> 相对引用利用分层语法
> （第 1.2.3 节）来表示相对于另一个分层 URI 的名称空间的 URI 引用。
> 
> ```
>  relative-ref  = relative-part [ "?" query ] [ "#" fragment ]
> 
>   relative-part = "//" authority path-abempty
>                 / path-absolute
>                 / path-noscheme
>                 / path-empty 
> ```
> 
> 相对引用所引用的 URI，也称为目标 URI，是通过应用第 5 节的引用解析算法获得的。
> 
> 以两个斜杠字符开头的相对引用称为网络路径引用；这种引用很少使用。以单个斜杠字符开头的相对引用
> 称为绝对路径引用。
> 不以斜杠字符开头的相对引用称为相对路径引用。
> 
> 包含冒号字符（例如，“this:that”）的路径段不能用作相对路径引用的第一段，因为
> 它会被误认为是方案名称。这样的段之前必须有
> 一个点段（例如，“./this:that”）以进行相对
> 路径引用。

# javascript - 在 JSON 变量中转换日期格式

> ID：15938973
> 
> 赞同：0
> 
> 时间：2013-04-11T00:43:10.483
> 
> 标签：javascript, jquery, json, string, datetime

我有一个包含数千行 JSON 数据的变量。一些变量是以下格式的日期`Fri Jun 27 2008 00:00:00 GMT-0700 (US Mountain Standard Time)`。我需要将所有这些变量转换为更可用的日期格式，例如“mm/dd/yyyy”。

关于如何做到这一点的任何建议？

```
{
"request": [
{ "startdate":"Fri Jun 27 2008 00:00:00 GMT-0700 (US Mountain Standard Time)" ,
  "status":"in progress" }, ...
]} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T01:03:35.430

您可以在实例化 Date 类时将日期字符串作为参数传递。Javascript 没有很好的日期格式化程序，但您可以轻松滚动自己的日期格式化程序。例如：

```
function parseDate(date) {
  var d = new Date(date);
  var month = d.getMonth() + 1;
  var day = d.getDate();
  var year = d.getFullYear();
  if(month < 10) month = '0' + month;
  if(day < 10) day = '0' + day;
  return month + '/' + day + '/' + year;
}
parseDate('Fri Jun 27 2008 00:00:00 GMT-0700 (US Mountain Standard Time)');
// returns "06/27/2008" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T01:03:33.653

尝试以下操作：

```
var json = {
    "request": [
      { "startdate":"Fri Jun 27 2008 00:00:00 GMT-0700 (US Mountain Standard Time)" ,
        "status":"in progress" }
]};
var date = new Date(json.request[0].startdate);
var formatDate = function(date) {
  var mm = date.getMonth()+1;
      mm = mm > 10 ? mm : "0"+mm;
  var dd = date.getDate();
      dd = dd > 10 ? dd : "0"+dd;
  var yy = date.getFullYear();
  return mm+"/"+dd+"/"+yy;
}
var formattedDate = formatDate(date); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T01:18:35.757

将字符串转换为日期对象总是最好的方法是手动解析它，除非您有一个非常受控的环境。以下应该做的工作：

```
// Use date string to create a UTC time to pass to Date constructor
// Expected format is day mon year hh:mm:ss GMToffset (timezone name)
// e.g. Fri Jun 27 2008 00:00:00 GMT-0700 (US Mountain Standard Time)
function parseDate(s) {

  var months = {jan:0, feb:1, mar:2, apr:3, may:4, jun:5,
                jul:6, aug:7, sep:8, oct:9, nov:10, dec:11};
  var s = s.split(/[ :]/g);
  var offset = s[7];

  // Deal with offset
  var sign = offset.indexOf('-') >= 0? -1 : 1;
  var len = offset.length;
  var offMins = sign * offset.substring(len-4, len-2) * 60 + sign * offset.substring(len-2, len);
  var mins = s[4] - offMins;

  return new Date(Date.UTC(s[3], months[s[1].toLowerCase()], s[2], s[4], mins, s[6]));
}

var s = 'Fri Jun 27 2008 00:00:00 GMT-0700 (US Mountain Standard Time)';

alert(parseDate(s)); //Fri 27 Jun 2008 17:00:00 GMT+1000 
```

然后，您可以根据需要格式化日期：

```
function formatDateUS(d) {
  function z(n){return (n<10? '0':'') + n}
  return z(d.getMonth()+1) + '/' + z(d.getDate()) + '/' + d.getFullYear();
}

formatDateUS(parseDate(s)); // 06/27/2008 
```

# php - 如何使用 PHP 链接 MySQL 中的表？

> ID：15938976
> 
> 赞同：-2
> 
> 时间：2013-04-11T00:43:50.170
> 
> 标签：php, mysql

抱歉问题标题具有误导性（mods，如果您能找到更好的标题，请重命名），但我真的想不出另一种概括我正在尝试做的事情的方法。我正在编写一个论坛。首先，这是我的表格：

“主题”表

```
topic_id INT(8) auto_increment
topic_subject VARCHAR(255)
topic_date DATETIME
topic_cat INT(8)
topic_by INT(8) 
```

“帖子”表

```
post_id INT(8) auto_increment
post_content TEXT
post_date DATETIME
post_topic INT(8)
post_by int(8) 
```

当有人想创建一个新主题时，他们会填写两个字段（和一个提交按钮）：“主题”和“内容”。FORM 方法是 POST。当他们单击提交按钮时，我将`$_POST`数组数据收集到两个数组中，一个称为`$topic_data`（包含“主题”表所需的信息），另一个称为`$post_data`（包含“帖子”表所需的信息）。但是，问题在于 post 表需要一个“post_topic”字段。该字段是我想要链接到“主题”表中的自动增量“主题 ID”字段的内容。

我想我问这个问题的方式是；如何将主题信息插入“主题”表，获取我刚刚插入的行的自动增量“主题 ID”字段，并将其与其他帖子数据一起插入“帖子”中的“帖子主题”字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:46:49.683

`mysqli`使用or运行 MySQL 查询`PDO`（选择）将主题插入`topics`表中。然后使用[`mysqli::$insert_id`](http://php.net/manual/en/mysqli.insert-id.php)or[`PDO::lastInsertId`](http://php.net/manual/en/pdo.lastinsertid.php)获取最后插入的主题的主题 ID。使用此值将帖子插入到您的`posts`表中。

# actionscript-3 - Flash AS3 中的 transform.getRelativeMatrix3d().position.z 和 .z 之间的区别？

> ID：15938982
> 
> 赞同：0
> 
> 时间：2013-04-11T00:45:09.080
> 
> 标签：actionscript-3, 3d

我理解为什么 transform.getRelativeMatrix3d().position.x 和 transform.getRelativeMatrix3d().position.y 不同（因为这是 Flash 3d 空间的本质），但是 transform.getRelativeMatrix3d().position.z 是什么意思？它与物体的 z 有什么不同？

谢谢。

# winforms - 使用 Entity Framework 4 填充 Listview 项时出错

> ID：15938992
> 
> 赞同：1
> 
> 时间：2013-04-11T00:46:38.270
> 
> 标签：winforms, entity-framework, c#-4.0

您好我正在尝试使用 EF4 从数据库中填充 Listview。我试图用下面的代码填充，但列表视图中没有填充，尽管项目正在获取。请帮助我如何进行。

```
 private void FillListView()
    {
        using (DiagnosoftDataContext context = new DiagnosoftDataContext())
        {
            var user = from c in context.Users
                          select new
                          {
                              Code = c.name,
                              Name = c.age,
                              Sex  = c.sex,
                              DOB =  c.dob,

                          };

            //Bind the ListView
            // Create items and subitems for each item.

            listView1.View = View.Details;
            ListViewItem lv = new ListViewItem("lv", 0);

            var item = user.ToList();

            foreach (var u in item)
            {
                lv.SubItems.Add(item[0].Code);
                lv.SubItems.Add(item[0].Name);
                lv.SubItems.Add(item[0].Sex);
                lv.SubItems.Add(item[0].DOB);

            }

            // Create columns for the items and subitems. 

            listView1.Columns.Add("Name", -2, HorizontalAlignment.Left);
            listView1.Columns.Add("Age", -2, HorizontalAlignment.Left);
            listView1.Columns.Add("Sex", -2, HorizontalAlignment.Left);
            listView1.Columns.Add("DOB", -2, HorizontalAlignment.Left);
        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:00:30.823

问题是您没有将创建的 ListViewItem(s) 添加到 ListView。

```
listView1.Items.Add(lv); 
```

ListViewItem 的创建似乎有点奇怪。在`foreach`您为每个用户添加 4 个子项，其中包含您的枚举的第一个用户的值。

我认为这不是您想要的，您想为每个用户添加一个带有其值的项目。

```
foreach (var user in item){
  ListViewItem lv = new ListViewItem(user.Name);

  lv.SubItems.Add(user.Code);
  lv.SubItems.Add(user.Name);
  lv.SubItems.Add(user.Sex);
  lv.SubItems.Add(user.DOB);

  listView1.Items.Add(lv);
} 
```

# php - 修剪解密的字符串是否安全？

> ID：15938993
> 
> 赞同：1
> 
> 时间：2013-04-11T00:46:39.027
> 
> 标签：php, encryption, aes, rijndael, cbc-mode

我正在使用以下方法加密和解密字符串：

```
$key = 'my key';
$data = 'my string';
$ivSize = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_CBC);
$iv = mcrypt_create_iv($ivSize, MCRYPT_DEV_URANDOM);
$encrypted = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $data, MCRYPT_MODE_CBC, $iv);
$decrypted = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $encrypted, MCRYPT_MODE_CBC, $iv);
$data = trim($decrypted, chr(0)); 
```

[http://codepad.viper-7.com/1JgCRs](http://codepad.viper-7.com/1JgCRs)

只修剪加密算法添加的填充是否安全，还是有必要在加密之前存储数据的长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:58:31.537

解密后您正在修剪该值，因此您不会遇到当前代码的任何问题。

如果您尝试重新加密不同的修剪数据，您将获得不同的加密值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:58:06.647

填充通常添加在右侧，因此请考虑`rtrim()`：

```
$data = rtrim($decrypted, chr(0)); 
```

然而，这仍然不是完全安全的，因为在 PHP 中字符串可以包含 NUL 字节。如果由于某种原因，plain 最后确实有 NUL 字节，`rtrim`则将删除填充*和*那些先前的 NUL 字节。

# performance - 我如何用更快的机器计算最大的情况？

> ID：15938994
> 
> 赞同：0
> 
> 时间：2013-04-11T00:46:43.057
> 
> 标签：performance, processing-efficiency

问题是 ：

对于一个需要 n^2 个“指令”来处理大小为 n 的输入案例的程序和一台在一个小时的计算时间内可以处理的最大输入案例为 100 的机器，最大案例有多大？如果换成一台快4倍的机器，一小时内处理完？

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:53:00.527

**通过枚举**

案例 n 需要 n^2 条指令并在时间 t 中计算

**旧机器**

案例 100 需要 10,000 条指令并在 1 小时内计算，速率 = 10,000 条指令/小时

**新机**

案例 100 需要 10,000 条指令并在 15 分钟内计算，速率 = 40,000 条指令/小时

**所以**

case unknown 需要 40,000 条指令并在 1 小时内完成计算

但是因为 case n --> instructions = n^2 所以 unk = sqrt(40,000)

你做剩下的，所以你实际上学到了一些关于这个作业问题的东西！

# formatting - 捕获漂亮打印的字符串输出，以在 gdb 的单行上显示多个变量？

> ID：15938999
> 
> 赞同：1
> 
> 时间：2013-04-11T00:47:28.870
> 
> 标签：formatting, gdb

在我的`gdb`会话中，我输入了这个：

```
(gdb) p arg1
$17 = (svn_revnum_t *) 0xbfffea0c
(gdb) p *(arg1)
$18 = -1 
```

现在，我希望将两个命令的“漂亮打印”输出显示在一行中，如下所示：

```
$19 = (svn_revnum_t *) 0xbfffea0c ; -1 
```

...所以我尝试这样的事情：

```
(gdb) p arg1, ";", *(arg1)
$19 = -1 
```

...但显然，它不起作用。

有没有办法做这样的事情？

我想，如果有可能以某种方式将漂亮打印的输出“捕获”`print`为字符串，那么我可以用它`printf "%s ; %s"`来格式化我的输出；但是如何捕获`print`输出呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T18:05:16.357

我认为最简单的方法是编写一个新的 Python 命令来执行您想要的操作。

或者，您可以编写一个 Python 便利函数，在其参数上使用 str 。然后，将其与 printf 一起使用。