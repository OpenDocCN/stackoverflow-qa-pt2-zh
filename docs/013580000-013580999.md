# StackOverflow 问答 13580000-13580999

# android - 安卓活动流

> ID：13580000
> 
> 赞同：2
> 
> 时间：2012-11-27T08:22:42.960
> 
> 标签：android, android-layout

我正在开发一个 android 应用程序，这是我面临的一个问题：

我的主菜单会将图像 uri 的意图传递给另一个活动，它将在第二个活动上显示图像。

我处理获取 uri 的意图并将其转换为 onStart() 方法中的位图（我自己编写代码以覆盖超类方法）。 **（这样做是否正确？）**

**我应该在哪里将图像设置到活动的图像视图上？**

我的问题是处理图像后，我的应用程序将强制关闭。但是如果我删除 onStart() 方法，第二个活动将不会出现错误，但不会显示图像（因为我处理显示图像）。

当我使用 Log.d() 方法来显示我的程序停止的位置时，它确实显示程序运行直到我处理意图并获取位图（我的程序此时结束的位置）。

这是我的 onStrat() 方法的代码：

```
 protected void onStart()
    {

        Bitmap newBitmap = null;

        Intent imageURI = getIntent();
        Log.d("HERE", "intent received");

        String imageLoc = imageURI.getExtras().getString("IMAGE_URI");
        Log.d("HERE", imageLoc);

        Uri imageLocation = Uri.parse(imageLoc);
        Log.d("HERE", "Uri reated");

        try 
        {
        newBitmap = MediaStore.Images.Media.getBitmap(this.getContentResolver(), imageLocation);
    } 
        catch (FileNotFoundException e) 
        {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 

        catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

        Log.d("HERE", "bitmap created");

} 
```

我搞砸了一些事情，终于找到了解决方案。感谢异步任务信息，它确实加快了我的进程。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:24:29.553

处理意图并获取 uri 并在 onResume() 中显示图像，它将为您工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:41:50.683

> 我处理获取 uri 的意图并将其转换为 onStart() 方法中的位图（我自己编写代码以覆盖超类方法）。（这样做是否正确？）

创建`Activity`. 最常见的方式是[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)用于处理位图。您应该在`onCreate()`从`Intent`.

> 我应该在哪里将图像设置到活动的图像视图上？

IMO，做到这一点的最佳场所 - 是[`onPostExecute()`](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)方法`AsyncTask`

# lwuit - 使用 LWUIT ImageDownloadService 时出现 arrayindexoutofboundsexception

> ID：13580010
> 
> 赞同：4
> 
> 时间：2012-11-27T08:23:28.843
> 
> 标签：lwuit, nokia-s40

我在我的项目中使用 Nokia-Lwuit，在使用时，当线程尝试使用下载的图像更新`ImageDownloadService`时，我没有被捕获。这是因为响应中返回的 url 指向没有图像，但我无法修复或捕获它。我尝试覆盖许多方法，例如, ，但没有成功。`ArrayIndexOutOfBoundsException``Label``handleErrorResponseCode``handleException``handleIOException`

请帮助我捕捉这个异常或以某种方式修复它。

问候， 阿什温

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:02:23.773

我在 Lwuit 开发。我建立了一个尝试从互联网获取图像的类。当我开发黑莓时，我遇到了像你这样的问题，当我创建图像时，它在图像长度上失败了。

发生这种情况是因为我在 METHOD POST 中使用，有时在某些情况下会在标头请求中出现问题（这取决于您是否需要发送参数）并返回响应状态 400 或 411。

# sql-server - 如果在 SQL 语句的部分字符串中？

> ID：13580012
> 
> 赞同：2
> 
> 时间：2012-11-27T08:23:41.740
> 
> 标签：sql-server, if-statement, sql-server-2008-r2, where

我正在 MS SQL 2008 R2 中编写一个表值函数。

SQL 语句的部分字符串（位于 WHERE 子句中）是否可以包装 IF 构造？

```
WHERE MyTable.MyColumn = @MyVariable
      AND (MyColumn2 = @MyVariable2)
ORDER BY MyTable.MyColumn DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:00:26.330

您可以使用

```
 WHERE MyTable.MyColumn = @MyVariable
  AND ((@date is null) or (MyColumn2 = @MyVariable2)) 
```

# php - 在完整日历中更新事件拖放时错误的 Unix 时间戳

> ID：13580018
> 
> 赞同：0
> 
> 时间：2012-11-27T08:23:54.390
> 
> 标签：php, jquery, fullcalendar, joomla2.5, unix-timestamp

从数据库中获取的事件在完整日历中正确显示。

当我尝试将事件拖放到另一个日期时，它给出了错误的 Unix 时间戳。

例如）

事件当前是2012年11月16日，当我将它拖放到2012年11月20日时，它给出了Unix时间戳为1353340800000和使用`strtotime()`PHP函数转换后的日期，结果是1983-07-03。

问题已修复：

检查下面的更新代码。

```
$('#calendar').fullCalendar({

            editable: true,

            eventDrop: function(calEvent,dayDelta,minuteDelta,allDay,revetFunc) {
                var stDate = $.fullCalendar.formatDate(calEvent.start, 'dd-MM-yyyyy');
                $.post('event_update.php',{'allday':allDay, 'event':calEvent.id, 'start':stDate}, function(response){
                    if(response.length > 0){
                       alert(response);
                       revertFunc();
                    }
            });
            },

            loading: function(bool) {
                if (bool) $('#loading').show();
                else $('#loading').hide();
            }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:25:30.680

您必须删除最后 3 个零。

# c# - 在 vs2012 中设置为起始页

> ID：13580020
> 
> 赞同：1
> 
> 时间：2012-11-27T08:23:58.397
> 
> 标签：c#, .net, asp.net-mvc, visual-studio-2012

回到 vs2010 我可以选择一个 web 项目

将其设置为启动项目

并在其中将特定的 aspx 页面设置为起始页面

因此，当我单击`wrun`此页面时，会在我的默认浏览器中打开

`start page`vs2012如何设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T08:36:46.020

项目属性 > Web >**特定页面**

![在此处输入图像描述](../Images/f45141c3f1a6267cba30d2abcaf95ba7.png)

[Web 项目的属性页设置](http://msdn.microsoft.com/en-us/library/ms164701.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T08:39:11.880

这与 VS2010 或 VS2012 无关。您的问题与您使用 ASP.NET MVC 的事实有关。您没有起始页，因为您不再有页面。

您可以在浏览器中设置指向实际起始页面的链接，或者按照 Maxim 的建议，将链接添加到项目属性（特定页面）。

# linux - Jenkins 在 MultiJob 项目中使用文件参数

> ID：13580023
> 
> 赞同：2
> 
> 时间：2012-11-27T08:24:04.767
> 
> 标签：linux, jenkins, jenkins-plugins

我正在使用 MultiJob 项目来实现每次推送到某个 Git 分支时运行的流程。

如何在 2 个不同的作业之间传递参数（每个作业位于单独的 MultiJob 阶段）

我试图做的是：

作业 A：（在 Master 上运行 - windows）

将 2 个参数回显到我放置在共享位置（而不是作业 A 的工作区）的新文件（称为 parameters.properties）中

所以这个文件的 contnet 看起来像：

```
currentBuild=2012-11-27_09-20-50 
currentBranch=master 
```

作业 B：（在 Linux 从站上运行）

“此构建已参数化”选项已打开。

添加了“文件参数”和仅文件名，因为我还将自定义工作区设置为文件所在的共享位置。

我有一个尝试使用此参数的 shell 脚本，但它没有得到它。

请协助，

多伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:21:29.530

解决方案：

1.  在 MultiJob 主项目中：

    *   设置“此构建已参数化”

        添加 2 个文本参数（不同的名称，因为 Job Build 基于 Jenkins 变量 Build_Id 已更改，我想稍后将 currentBuild 设置为常量值而不是新值）

        *   工作构建

        *   工作分公司

2.  在每个 MultiJob Phase 下的每个 Job 上：

    *   添加预定义参数：

        *   currentBuild=${JobBuild}

        *   currentBranch=${JobBranch}

    取消勾选“当前作业参数”

    取消勾选“暴露的 SCM”

# php - 延迟加载 MySQL 结果 PHP

> ID：13580035
> 
> 赞同：3
> 
> 时间：2012-11-27T08:24:46.867
> 
> 标签：php, mysql, performance

我是 PHP 编程的新手，所以我对 PHP 中的 MySQL 连接有这个基本（可能很愚蠢）的问题。

假设我们进行了一个基本查询，例如“从用户中选择 *”，并且表 users 中有数百万行。PHP代码会在内存中延迟加载SQL数据行，即根据代码中访问它们的方式加载行，还是将所有行直接转储到内存中？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:33:48.713

这取决于您使用的是*缓冲*查询还是非*缓冲*查询。使用缓冲查询，PHP*会*检索整个结果集。使用无缓冲查询，它允许您一次检索一行。

请参阅[此处](http://php.net/manual/en/mysqlinfo.concepts.buffering.php)了解更多信息。

# java - Java/GWT 中的端口连接图像

> ID：13580045
> 
> 赞同：3
> 
> 时间：2012-11-27T08:25:19.597
> 
> 标签：java, image, gwt

我正在工作的项目需要产品的视觉堆栈。显示端口连接的图像。来自外部文件的数据，其中包含有关哪个端口连接到哪个端口的信息。该程序接受该文件并生成一个图像，以适当的颜色显示连接性。

它需要使用 Java 和 GWT 来完成。

我使用 JUNG（Java Universal Network/Graph）做了一部分，但是有很多问题。是否有任何 Java 库可以帮助实现这一目标？？？任何帮助/建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:44:53.383

如果你还没有看过[这个](https://stackoverflow.com/questions/5279197/port-jung-into-gwt/5520023#5520023)。

GWT 中的类似内容 - Mxgraph - **[https://www.draw.io/](https://www.draw.io/)和[http://www.jgraph.com/](http://www.jgraph.com/)**

我们通过将它们包装在 GWT JSNI 中来使用它。

同样你有低成本 - Draw2D - [http://draw2d.org/draw2d_touch/jsdoc/#!/example/connection_drop](http://draw2d.org/draw2d_touch/jsdoc/#!/example/connection_drop)

**沿着类似的路线，你有**

```
 YFiles - http://www.yworks.com/en/products_yfileshtml_about.html

    Raphaël - 
    http://raphaeljs.com/
    http://code.google.com/p/raphaelgwt/

    WireIt - http://neyric.github.com/wireit/docs/index.html 
```

**一些 GWT 尝试 -**

```
http://code.google.com/p/gwt-diagrams/
http://code.google.com/p/gwt-graph/
http://code.google.com/p/gwt-links/ 
```

# php - Netbeans：如何配置远程服务器的 PHPUnit 路径？

> ID：13580046
> 
> 赞同：5
> 
> 时间：2012-11-27T08:25:23.003
> 
> 标签：php, zend-framework, netbeans, phpunit

我在 Windows 上使用最新版本的 Netbeans，并将远程 Ubuntu Apache 服务器连接到一个`Zend Framework`项目。我安装在那台服务器上`PHPUnit`，但我不知道到的绝对路径是什么`phpunit.bat`（我需要绝对路径`NetBeans Option->Php->Unit Testing`）。我安装`XAMPP`在我的计算机上并尝试在 XAMPP 和远程服务器的项目中使用 PHPUnit，但我遇到了包含路径的问题，例如我收到此错误：

> ' `Warning: include_once(PHP\Invoker.php): failed to open stream: No such file or directory in Y:\mos\public_html\library\Zend\Loader.php on line 146`'。

这是我的 bootstrap.php 文件：

```
<?php
error_reporting( E_ALL | E_STRICT );
ini_set('display_startup_errors', 1);
ini_set('display_errors', 1);
define('APPLICATION_PATH', realpath('Y:/mos/public_html' . '/application'));
define('APPLICATION_ENV', 'development');
define('LIBRARY_PATH', realpath('Y:/mos/public_html' . '/library'));
define('TESTS_PATH', realpath(dirname(__FILE__)));
$_SERVER['SERVER_NAME'] = 'http://mos.loc';
$includePaths = array(LIBRARY_PATH, get_include_path());
set_include_path(implode(PATH_SEPARATOR, $includePaths));
require_once "Zend/Loader/Autoloader.php";
$loader = Zend_Loader_Autoloader::getInstance();
$loader->setFallbackAutoloader(true);
$loader->suppressNotFoundWarnings(false);
Zend_Session::$_unitTestEnabled = true;
Zend_Session::start();
?> 
```

我可以从 Netbeans 以某种方式设置远程服务器上 PHPUnit 的绝对路径，还是可以使用远程服务器中的项目和我的 XAMPP 中的 PHPUnit 使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:52:55.483

也许您映射的网络驱动器未映射到运行 Web 服务器的任何帐户下。

在您自己的帐户下，检查您的 Y 驱动器的映射：

```
C:\>net use 
```

输出应该是这样的：

```
New connections will not be remembered.

Status       Local     Remote                    Network

-------------------------------------------------------------------------------
OK           Y:        \\server\share            Microsoft Windows Network 
```

然后修改您的 PHP 脚本以尝试为您的脚本目的映射驱动器：

```
<?php system("net use Y: \\server\share password /user:username /persistent:no >nul 2>&1"); ?> 
```

# javascript - Javascript 只执行 Deferred2，也没有 deferred

> ID：13580047
> 
> 赞同：1
> 
> 时间：2012-11-27T08:25:30.813
> 
> 标签：javascript, arcgis, deferred

我想要的是，我想打开一个信息窗口，在其中使用来自 2 个不同`IdentifyTask`s 的值：

这是我的代码：

```
dojo.connect(map, "onClick", executeIdentifyTask);

identifyTask = new esri.tasks.IdentifyTask("https://server.com/ArcGIS/rest/services/POI_Data/MapServer");

identifyTask2 = new esri.tasks.IdentifyTask("https://server.com/ArcGIS/rest/services/ProRail_Data/MapServer");

identifyParams = new esri.tasks.IdentifyParameters();
identifyParams.tolerance = 15;
identifyParams.returnGeometry = true;
identifyParams.layerIds = [0];
identifyParams.layerOption = esri.tasks.IdentifyParameters.LAYER_OPTION_ALL;
identifyParams.width = map.width;
identifyParams.height = map.height;

identifyParams2 = new esri.tasks.IdentifyParameters();
identifyParams2.tolerance = 10;
identifyParams2.returnGeometry = true;
identifyParams.layerIds = [23, 26, 31, 33];
identifyParams2.layerOption = esri.tasks.IdentifyParameters.LAYER_OPTION_ALL;
identifyParams2.width = map.width;
identifyParams2.height = map.height;

function executeIdentifyTask(evt) {

    identifyParams.geometry = evt.mapPoint;
    identifyParams.mapExtent = map.extent;
    var deferred = identifyTask.execute(identifyParams);
    identifyParams2.geometry = evt.mapPoint;
    identifyParams2.mapExtent = map.extent;

    var deferred2 = identifyTask2.execute(identifyParams2);

    deferred.addCallback(function (response) {
        // response is an array of identify result objects    
        // Let's return an array of features.
        return dojo.map(response, function (result) {
            var feature = result.feature;
            feature.attributes.layerName = result.layerName;
            if (result.layerName === 'Spoortoegang') {
                console.log(feature.attributes.PARCELID);
                var template = new esri.InfoTemplate("ToegangsNummer ${ToegangsNr}", "Toegangsnummer ${ToegangsNr} <br/> Baanvak: ${Baanvak},  <br/> Geocode: ${Geocode},  <br/> Kilometer: ${Kilometrering}");
                feature.setInfoTemplate(template);
                alert("Spoortoegang");
            }
            else if (result.layerName === 'sein') {
                var template = new esri.InfoTemplate("", "Parcel ID: ${NUMMER}");
                feature.setInfoTemplate(template);
            }
            return feature;
        });
    });

    deferred2.addCallback(function (response) {
        // response is an array of identify result objects    
        // Let's return an array of features.
        return dojo.map(response, function (result) {
            var feature = result.feature;
            feature.attributes.layerName = result.layerName;
            if (result.layerName === 'Wissels') {
                console.log(feature.attributes.PARCELID);
                var template = new esri.InfoTemplate("Wissel", "Toegangsnummer ${ToegangsNr} <br/> Baanvak: ${Baanvak},  <br/> Geocode: ${Geocode},  <br/> Kilometer: ${Kilometrering}");
                feature.setInfoTemplate(template);
                alert("Wissels");

            }
            else if (result.layerName === 'sein') {
                var template = new esri.InfoTemplate("", "Sein Nummer: ${NUMMER}");
                feature.setInfoTemplate(template);
                alert("sein");
            }
            else if (result.layerName === 'Sporen') {
                console.log(feature.attributes.PARCELID);
                var template = new esri.InfoTemplate("Wissel", "Toegangsnummer ${ToegangsNr} <br/> Baanvak: ${Baanvak},  <br/> Geocode: ${Geocode},  <br/> Kilometer: ${Kilometrering}");
                feature.setInfoTemplate(template);
                alert("Sporen");
            }
            else if (result.layerName === 'bovenleidingpaal') {
                console.log(feature.attributes.PARCELID);
                var template = new esri.InfoTemplate("Wissel", "Toegangsnummer ${ToegangsNr} <br/> Baanvak: ${Baanvak},  <br/> Geocode: ${Geocode},  <br/> Kilometer: ${Kilometrering}");
                feature.setInfoTemplate(template);
                alert("bovenleidingspaal");
            }

            return feature;
        });
    });

    // InfoWindow expects an array of features from each deferred
    // object that you pass. If the response from the task execution 
    // above is not an array of features, then you need to add a callback
    // like the one above to post-process the response and return an
    // array of features.
    map.infoWindow.resize(195, 75);
    map.infoWindow.setFeatures([deferred]);
    map.infoWindow.show(evt.mapPoint);

    map.infoWindow.resize(195, 75);
    map.infoWindow.setFeatures([deferred2]);
    map.infoWindow.show(evt.mapPoint);
} 
```

我只从 中获取警报和`infowindow`内容`deferred2`，而不是`deferred`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:46:42.427

您可以缩短代码`deferred2`：

```
deferred2.addCallback(function (response) {
    // response is an array of identify result objects    
    // Let's return an array of features.
    return dojo.map(response, function (result) {
        var feature = result.feature;
        feature.attributes.layerName = result.layerName;
        var template;
        switch(result.layerName){
            case 'Wissels':
            case 'Sporen':
            case 'bovenleidingpaal':
                template = new esri.InfoTemplate("Wissel", "Toegangsnummer ${ToegangsNr} <br/> Baanvak: ${Baanvak},  <br/> Geocode: ${Geocode},  <br/> Kilometer: ${Kilometrering}");
            break;
            case 'sein':
                var template = new esri.InfoTemplate("", "Sein Nummer: ${NUMMER}");
            break;
        }
        console.log(feature.attributes.PARCELID);
        feature.setInfoTemplate(template);
        alert(result.layerName);

        return feature;
    });
}); 
```

这应该是一样的。

# android - JQueryMobile 中的图像

> ID：13580053
> 
> 赞同：0
> 
> 时间：2012-11-27T08:26:22.147
> 
> 标签：android, css, jquery-mobile, android-webview

我想在 JQM 页面中有一个 2 列布局。第一列将是图像，第二列将是一些文本。

```
<div data-role="content">
    <div class="ui-grid-a">
        <img class="ui-block-a" src="/image/no-picture.jpg"/>
        <div class="ui-block-b">
            <h1>Some Text Here</h1>         
        </div>
    </div>
</div> 
```

我尝试设置`max-width`，它在浏览器中有效，但在`android webview`. 做这个的最好方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:00:28.420

[这](http://jsfiddle.net/Gajotres/RQXN3/)是一个工作示例。我已经在 Galaxy S3 andr 上测试过了。4.1

```
 <div class="ui-grid-a">
    <div class="ui-block-a">
      <img src="http://www.index.hr/thumbnail.ashx?path=images2/europskimljekari_AFP26112012.jpg&width=325&height=197"/>
    </div>
    <div class="ui-block-b">
      <h1>Some Text Here</h1>
    </div>
  </div> 
```

如果您想要其他内容，请给我评论。也不要忘记在你的标题中使用它：

```
<meta content="width=device-width, minimum-scale=1, maximum-scale=2" name="viewport"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:05:13.853

```
http://jquerymobile.com/test/docs/api/methods.html 
```

你可以找到所有数据..

```
http://operationmobile.com/dont-forget-to-call-refresh-when-adding-items-to-your-jquery-mobile-list/ 
```

也检查上面的链接也可以。

# image-processing - 如何使用边缘检测和直方图处理技术进行对象识别？

> ID：13580057
> 
> 赞同：0
> 
> 时间：2012-11-27T08:26:32.647
> 
> 标签：image-processing, computer-vision, object-recognition

大家好，我正在追求 mtech 我的项目是对象识别，以识别机场不允许的特定对象，例如武器等，因此输入将是 matlab 中行李/行李的扫描图像，现在它仅用于静态图像，现在我正在使用边缘检测和直方图处理技术..我已经通过互联网找到了ANN遗传算法等等，但无法总结每篇论文以自己的方式解释的整个场景请帮助我了解如何使用边缘检测和直方图处理技术进行对象识别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:20:28.977

如果您*只想*使用轮廓进行对象识别，请使用[Shape Context](http://www.eecs.berkeley.edu/Research/Projects/CS/vision/shape/sc_digits.html)。

本质上，您将拥有一个先验形状数据库，其中您知道每个形状的标签（枪、something_harmless_1、刀、something_harmless_2）。在查询时，您获取对象的轮廓并计算查询形状与数据库中所有形状之间的*形状上下文距离。*然后将具有最短形状上下文距离的形状视为对象的真实类。

或者，如果您想使用对象的直方图，您可以进行类似的匹配，但使用不同的距离度量。您可以在数据库中存储所有对象的直方图，并计算查询对象与数据库中所有其他对象之间的[Earth Mover距离，而不是使用 Shape Context Distance。](http://en.wikipedia.org/wiki/Earth_mover%27s_distance)

可以在最终结果中对这两个距离进行编码。您可以在它们之间提出一些对您有意义的加权方案。

# wsdl - 在 Salesforce 中从 WSDL 生成 Apex 代码时出现 WSDL 解析错误

> ID：13580059
> 
> 赞同：1
> 
> 时间：2012-11-27T08:26:44.573
> 
> 标签：wsdl, salesforce, apex-code

解析亚马逊产品广告 API 时出现以下错误。

错误：无法解析 wsdl：simpleType->element 名称不能为空。1295

WSDL 链接：[http ://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl](http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl)

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T01:55:44.297

我拉下 WSDL 并在第 1292 行和第 1295 行进行了以下更改。注意两个内部 simpleTypes 上的新名称属性。

```
<xs:simpleType name="positiveIntegerOrAll">
<xs:union>
    <xs:simpleType name="positiveTestOne">
        <xs:restriction base="xs:positiveInteger"/>
    </xs:simpleType>
    <xs:simpleType name="positiveTestTwo">
        <xs:restriction base="xs:string">
        <xs:enumeration value="All"/>
    </xs:restriction>
    </xs:simpleType>
    </xs:union>
</xs:simpleType> 
```

在此之后，我能够使用此修改后的文件成功创建 Apex 类。我没有测试实际调用它，但是生成它时没有错误。

Salesforce 使用不支持许多 WSDL 功能的内部 wsdl2apex 工具。有一个[受支持的 WSDL 功能](http://wiki.developerforce.com/page/Apex_Web_Services_and_Callouts#Supported_WSDL_Features)列表。除此之外，您通常可以破解源 WSDL 以获得合理水平的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:37:22.887

因此，您尝试使用某些用户界面将该 Web 服务添加到 Salesforce 并返回该错误，对吗？

如果是，那么您可以尝试在本地保存该 wsdl - 修复必要的节点并尝试让 Salesforce 上传您的 wsdl 文件副本，或上传到 Internet 主机上的某个位置并将新地址提供给 Salesforce。

如果不是，那么我需要有关您如何尝试使用该 wsdl 的更多信息。

# flash - 是否可以从 actionscript 登录网站？

> ID：13580066
> 
> 赞同：1
> 
> 时间：2012-11-27T08:27:17.707
> 
> 标签：flash, actionscript

假设我编写了一个将 POST 请求发送到网站的 flash 程序。然后，如果 Web 服务器设置 cookie 或会话，我如何获取这些 cookie/会话变量名称，假设服务器使用 PHP。

请提供一些代码的小例子。仅供观赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:34:15.053

看看这个[帖子](https://stackoverflow.com/questions/109580/how-do-i-access-cookies-within-flash)。有一个解决方案如何获取 cookie 数据。

# c++ - 通过基类特化类模板

> ID：13580072
> 
> 赞同：3
> 
> 时间：2012-11-27T08:28:16.097
> 
> 标签：c++, templates

我已经将我的疑问提炼到以下这段代码中

```
struct base {};
struct derived : public base {};

template <class T>
struct Type { };

template <> struct Type<base> {
  typedef float mytype;
};

typename Type<base>::mytype a=4.2;    // this works
typename Type<derived>::mytype a=4.2; // this doesnt 
```

谁能解释为什么我不能用它来实例化类模板对象`derived`并提出一种简单的方法来做到这一点。对于我感兴趣的实际问题，我想使用许多派生类来实例化模板类对象和/或使用 typedef。它们太多了，比我想单独专门研究的要多。

编辑：忘了提，我的错，这需要是 C++03

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T08:36:55.823

```
#include <iostream>
#include <type_traits>

struct base { };
struct derived : base { };

template<typename T, bool = std::is_base_of<base, T>::value>
struct Type { };

template<typename T>
struct Type<T, true>
{
   typedef float mytype;
};

int main()
{
   Type<base>::mytype a1 = 4.2f;
   Type<derived>::mytype a2 = 8.4f;
   std::cout << a1 << '\n' << a2 << '\n';
} 
```

在 C++03 中，`std`可以简单地替换为`boost`：[`boost::is_base_of`](http://www.boost.org/libs/type_traits/doc/html/boost_typetraits/reference/is_base_of.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:38:16.240

具有不同模板参数的模板类的两个实例是*完全*不相关的类类型。`Type<derived>`与 没有任何关系`Type<base>`，这当然意味着它不使用专业化并且是从主模板实例化的。主模板没有嵌套类型`mytype`。

# c# - C# 中的远程数据库连接

> ID：13580073
> 
> 赞同：0
> 
> 时间：2012-11-27T08:28:23.760
> 
> 标签：c#, sql, sql-server-ce, sync

我有一个 Windows 平板电脑应用程序，它存储来自用户的一些数据。现在我需要通过 Internet 将这些数据发送到服务器。我可以尝试哪些所有选项？我认为同步服务器和客户端数据库不会有好处，因为多个平板电脑正在连接到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:51:43.650

`I think syncng the server and client database wont do good since multiple tablets are getting connected to the server.`
为什么你这么想？你认为网络服务器是如何工作的？数据库可以轻松处理多个连接。

您可以直接连接到数据库服务器（如果它支持远程连接），或者您可以创建一个 Web 服务并通过它与数据库通信。无论哪种方式，请务必正确设置权限，否则您可能会遇到严重的安全问题。

// 编辑以解决评论中的问题

如果要使用直接连接，则连接到数据库的方式与连接到同一台计算机上的方式完全相同。你如何连接到那个 CE 数据库？您只需要更改连接字符串，但其他一切都保持不变。

如果你想使用 web 服务来解析和与数据库通信，事情会变得有点复杂，但它仍然相当简单。搜索谷歌（或 SO）如何使用网络服务以及如何创建网络服务。那里有很多示例和教程。恐怕不可能在这里全部覆盖。

# java - onActivityResult() 未在新的嵌套片段 API 中调用

> ID：13580075
> 
> 赞同：77
> 
> 时间：2012-11-27T08:28:25.603
> 
> 标签：java, android, kotlin, android-fragments, android-nested-fragment

我一直在使用Android 包含在支持库中的新[嵌套片段API。](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)

我在使用嵌套片段时遇到的问题是，如果一个嵌套片段（即已通过`FragmentManager`by 返回的片段添加到另一个片段的片段`getChildFragmentManager()`）调用`startActivityForResult()`，则不会调用嵌套片段的`onActivityResult()`方法。但是，父片段`onActivityResult()`和活动`onActivityResult()`都会被调用。

我不知道我是否遗漏了有关嵌套片段的某些内容，但我没想到所描述的行为。下面是重现此问题的代码。如果有人能指出我正确的方向并向我解释我做错了什么，我将不胜感激：

```
package com.example.nestedfragmentactivityresult;

import android.media.RingtoneManager;
import android.os.Bundle;
import android.content.Intent;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends FragmentActivity
{
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        this.getSupportFragmentManager()
            .beginTransaction()
            .add(android.R.id.content, new ContainerFragment())
            .commit();
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        super.onActivityResult(requestCode, resultCode, data);

        // This is called
        Toast.makeText(getApplication(),
            "Consumed by activity",
            Toast.LENGTH_SHORT).show();
    }

    public static class ContainerFragment extends Fragment
    {
        public final View onCreateView(LayoutInflater inflater,
                                       ViewGroup container,
                                       Bundle savedInstanceState)
        {
            View result = inflater.inflate(R.layout.test_nested_fragment_container,
                container,
                false);

            return result;
        }

        public void onActivityCreated(Bundle savedInstanceState)
        {
            super.onActivityCreated(savedInstanceState);
            getChildFragmentManager().beginTransaction()
                .add(R.id.content, new NestedFragment())
                .commit();
        }

        public void onActivityResult(int requestCode,
                                     int resultCode,
                                     Intent data)
        {
            super.onActivityResult(requestCode, resultCode, data);

            // This is called
            Toast.makeText(getActivity(),
                "Consumed by parent fragment",
                Toast.LENGTH_SHORT).show();
        }
    }

    public static class NestedFragment extends Fragment
    {
        public final View onCreateView(LayoutInflater inflater,
                                       ViewGroup container,
                                       Bundle savedInstanceState)
        {
            Button button = new Button(getActivity());
            button.setText("Click me!");
            button.setOnClickListener(new View.OnClickListener()
            {
                public void onClick(View v)
                {
                    Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
                    startActivityForResult(intent, 0);
                }
            });

            return button;
        }

        public void onActivityResult(int requestCode,
                                     int resultCode,
                                     Intent data)
        {
            super.onActivityResult(requestCode, resultCode, data);

            // This is NOT called
            Toast.makeText(getActivity(),
                "Consumed by nested fragment",
                Toast.LENGTH_SHORT).show();
        }
    }
} 
```

test_nested_fragment_container.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/content"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-12-12T12:13:33.433

我用以下代码解决了这个问题（使用了支持库）：

在容器片段中以这种方式覆盖 onActivityResult：

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        List<Fragment> fragments = getChildFragmentManager().getFragments();
        if (fragments != null) {
            for (Fragment fragment : fragments) {
                fragment.onActivityResult(requestCode, resultCode, data);
            }
        }
    } 
```

现在嵌套片段将收到对 onActivityResult 方法的调用。

此外，正如[Eric](https://stackoverflow.com/questions/6147884/onactivityresult-not-being-called-in-fragment?rq=1#comment27590801_6147919) [Brynsvold](https://stackoverflow.com/users/513060/eric-brynsvold)在类似问题中指出的那样，嵌套片段应该使用它的父片段而不是简单的 startActivityForResult() 调用来启动活动。因此，在嵌套片段启动活动中：

```
getParentFragment().startActivityForResult(intent, requestCode); 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-11-27T15:33:10.450

是的，`onActivityResult()`in 嵌套片段不会被这种方式调用。

onActivityResult（在Android支持库中）的调用顺序是

1.  `Activity.dispatchActivityResult()`.
2.  `FragmentActivity.onActivityResult()`.
3.  `Fragment.onActivityResult()`.

在第 3 步中，在`FragmentMananger`parent中找到片段`Activity`。因此，在您的示例中，发现调度的是容器片段`onActivityResult()`，嵌套片段永远不会接收到该事件。

我认为您必须在 中实现自己的调度`ContainerFragment.onActivityResult()`，找到嵌套片段并调用将结果和数据传递给它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-16T00:32:52.783

这是我解决它的方法。

在活动中：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    List<Fragment> frags = getSupportFragmentManager().getFragments();
    if (frags != null) {
        for (Fragment f : frags) {
            if (f != null)
                handleResult(f, requestCode, resultCode, data);
        }
    }
}

private void handleResult(Fragment frag, int requestCode, int resultCode, Intent data) {
    if (frag instanceof IHandleActivityResult) { // custom interface with no signitures
        frag.onActivityResult(requestCode, resultCode, data);
    }
    List<Fragment> frags = frag.getChildFragmentManager().getFragments();
    if (frags != null) {
        for (Fragment f : frags) {
            if (f != null)
                handleResult(f, requestCode, resultCode, data);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-03-26T18:51:36.077

## 对于使用 NavHostFragment 的带有导航组件的 Androidx

**2019 年 9 月 2 日更新的答案**

这个问题在 Androidx 中又出现了，当您使用单个活动并且您在 中嵌套了片段时`NavHostFragment`，`onActivityResult()`不会为`NavHostFragment`.

要解决此问题，您需要手动将调用路由到主机活动`onActivityResult()`的子片段。`onActivityResult()`

以下是使用 Kotlin 代码的方法。这进入了`onActivityResult()`托管以下内容的主要活动的内部`NavHostFragment`：

```
override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
    super.onActivityResult(requestCode, resultCode, data)
    val navHostFragment = supportFragmentManager.findFragmentById(R.id.your_nav_host_fragment)
    val childFragments = navHostFragment?.childFragmentManager?.fragments
    childFragments?.forEach { it.onActivityResult(requestCode, resultCode, data) }
} 
```

这将确保`onActivityResult()`子片段的 将被正常调用。

## 对于 Android 支持库

**旧答案**

此问题已在[Android 支持库 23.2](https://code.google.com/p/android/issues/detail?id=40537#c39)及更高版本中得到修复。`Fragment`在 Android 支持库 23.2+ 中，我们不再需要做任何额外的事情。`onActivityResult()`现在`Fragment`按预期在嵌套中调用。

我刚刚使用 Android 支持库 23.2.1 对其进行了测试，并且可以正常工作。最后我可以有更干净的代码！

**因此，解决方案是开始使用最新的 Android 支持库。**

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-07-06T09:50:42.873

我搜索了 FragmentActivity 源。我找到了这些事实。

1.  当fragment调用startActivityForResult()时，实际上调用了他父FragmentActivity的startAcitivityFromFragment()。
2.  当片段开始活动结果时，requestCode 必须低于 65536（16 位）。
3.  在FragmentActivity的startActivityFromFragment()中，调用了Activity.startActivityForResult()，这个函数也需要一个requestCode，但是这个requestCode不等于origin requestCode。
4.  实际上 FragmentActivity 中的 requestCode 有两个部分。较高的 16 位值是（片段在 FragmentManager 中的索引）+ 1。较低的 16 位等于原始请求代码。这就是为什么 requestCode 必须低于 65536。

观看 FragmentActivity 中的代码。

```
public void startActivityFromFragment(Fragment fragment, Intent intent,
        int requestCode) {
    if (requestCode == -1) {
        super.startActivityForResult(intent, -1);
        return;
    }
    if ((requestCode&0xffff0000) != 0) {
        throw new IllegalArgumentException("Can only use lower 16 bits for requestCode");
    }
    super.startActivityForResult(intent, ((fragment.mIndex+1)<<16) + (requestCode&0xffff));
} 
```

当返回结果时。FragmentActivity 覆盖 onActivityResult 函数，并检查 requestCode 的高 16 位是否不为 0，然后将 onActivityResult 传递给他的子片段。

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    mFragments.noteStateNotSaved();
    int index = requestCode>>16;
    if (index != 0) {
        index--;
        final int activeFragmentsCount = mFragments.getActiveFragmentsCount();
        if (activeFragmentsCount == 0 || index < 0 || index >= activeFragmentsCount) {
            Log.w(TAG, "Activity result fragment index out of range: 0x"
                    + Integer.toHexString(requestCode));
            return;
        }
        final List<Fragment> activeFragments =
                mFragments.getActiveFragments(new ArrayList<Fragment>(activeFragmentsCount));
        Fragment frag = activeFragments.get(index);
        if (frag == null) {
            Log.w(TAG, "Activity result no fragment exists for index: 0x"
                    + Integer.toHexString(requestCode));
        } else {
            frag.onActivityResult(requestCode&0xffff, resultCode, data);
        }
        return;
    }

    super.onActivityResult(requestCode, resultCode, data);
} 
```

这就是 FragmentActivity 调度 onActivityResult 事件的方式。

当你有一个fragmentActivity时，它包含fragment1，而fragment1包含fragment2。所以onActivityResult只能传给fragment1。

然后我找到了解决这个问题的方法。首先创建一个 NestedFragment 扩展 Fragment 覆盖 startActivityForResult 函数。

```
public abstract class NestedFragment extends Fragment {

@Override
public void startActivityForResult(Intent intent, int requestCode) {

    List<Fragment> fragments = getFragmentManager().getFragments();
    int index = fragments.indexOf(this);
    if (index >= 0) {
        if (getParentFragment() != null) {
            requestCode = ((index + 1) << 8) + requestCode;
            getParentFragment().startActivityForResult(intent, requestCode);
        } else {
            super.startActivityForResult(intent, requestCode);
        }

    }
} 
```

}

比创建 MyFragment 扩展 Fragment 覆盖 onActivityResult 函数。

```
public abstract class MyFragment extends Fragment {

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    int index = requestCode >> 8;
    if (index > 0) {
        //from nested fragment
        index--;

        List<Fragment> fragments = getChildFragmentManager().getFragments();
        if (fragments != null && fragments.size() > index) {
            fragments.get(index).onActivityResult(requestCode & 0x00ff, resultCode, data);
        }
    }
} 
```

}

就这样！用法：

1.  fragment1 扩展 MyFragment。
2.  fragment2 扩展 NestedFragment。
3.  没有更多不同。只需在 fragment2 上调用 startActivityForResult()，并覆盖 onActivityResult() 函数。

华林！！！！！！！！requestCode 必须低于 512(8bit)，因为我们在 3 部分中溢出了 requestCode

16位 | 8位 | 8位

Android已经用过的高16bit，中间8bit是为了帮助fragment1在他的fragmentManager数组中找到fragment2。低8bit是origin requestCode。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-02T10:06:07.967

对于 Main Activity，您使用 Super 类编写 OnActivityForResult，例如

```
 @Override
public void onActivityResult(int requestCode, int resultCode, Intent result) {
    super.onActivityResult(requestCode, resultCode, result);
    if (requestCode == Crop.REQUEST_PICK && resultCode == RESULT_OK) {
        beginCrop(result.getData());
    } } 
```

对于没有 getActivity() 的活动编写意图，如

```
 Intent pickContactIntent = new Intent(Intent.ACTION_PICK, Uri.parse("content://contacts"));
        pickContactIntent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE); // Show user only contacts w/ phone numbers
       startActivityForResult(pickContactIntent, 103); 
```

片段的 OnActivityResult

```
 @Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 101 && resultCode == getActivity().RESULT_OK && null != data) { 
```

}}

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-12-09T16:31:44.067

我遇到了同样的问题！`ChildFragment`我通过在 中使用 static 解决了它`ParentFragment`，如下所示：

```
private static ChildFragment mChildFragment;

protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    mChildFragment.onActivityResult(int requestCode, int resultCode, Intent data);

} 
```

# emacs - 在缓冲区菜单中选择不同的缓冲区

> ID：13580079
> 
> 赞同：1
> 
> 时间：2012-11-27T08:28:40.203
> 
> 标签：emacs

> **可能重复：**
> [如何更轻松地在 Emacs 中的缓冲区之间切换？](https://stackoverflow.com/questions/7394289/how-can-i-more-easily-switch-between-buffers-in-emacs)

```
GNU Emacs 24.1.1 
```

你好，

当我想切换缓冲区时，如果我有许多缓冲区处于活动状态，我会使用以下 Cx Cb。但我发现它非常低效。

它将在下一个缓冲区中显示打开的缓冲区列表（我不喜欢在下一个缓冲区中这样做）。通常我会同时打开 4 个缓冲区。

使用上面的方法，当向上或向下滚动以选择我想要的缓冲区时，我必须将光标 (Co) 放在缓冲区列表缓冲区中以获取焦点。

如果我没有很多活动缓冲区，有时我会使用 Cxb。但是，我总是有很多。

但是，我正在寻找一些东西，然后会打开一个带有缓冲区列表的小缓冲区（所需的最小值 - 足以显示所有缓冲区），并且会自动获得焦点。我滚动选择我想要的缓冲区。在我打开缓冲区列表之前，它会出现在我关注的缓冲区中。然后缓冲区列表将消失。

有谁知道这样的事情可以使切换缓冲区更容易。

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:48:11.867

检查[ido-mode](http://emacswiki.org/emacs/InteractivelyDoThings)。Cx Cb 是老方法。

```
The ido lets you interactively do things with buffers and files. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T09:29:45.213

除此之外`ido-mode`，良好的缓冲切换解决方案是：

1.  普通旧`C-x b`+ [icomplete-mode](http://emacswiki.org/emacs/IcompleteMode)
2.  [ibuffer](http://www.emacswiki.org/emacs/IbufferMode) - 只需重新绑定`C-x C-b`以`ibuffer`查看它的运行情况：

    (global-set-key (kbd "Cx Cb") 'ibuffer)

3.  [Helm](https://github.com/emacs-helm/helm) - 一个增量缩小和选择框架，可用于查找任何东西（包括缓冲区）。

# php - 插入带有 \"%s\ 错误的值 MYSQL PHP

> ID：13580081
> 
> 赞同：0
> 
> 时间：2012-11-27T08:28:47.983
> 
> 标签：php, mysql, insert

我想使用 php 将数组插入 mysql db ..

现在我收到此代码错误：

```
$insert_sql = sprintf("INSERT INTO detail_paket (id_paket, menu_paket) select
 paket.id,\'%s\' from paket where paket.nama_paket='$nama_paket'",%data1[$i]);
            ^
            |   
   here is the error syntax 
```

*data1*是数组..

使用*\'%s\'*的正确语法是什么？

当我尝试运行查询时，错误信息显示：*语法错误、意外的 '%' in* **或** *语法错误*意外的“” in*。

我已经尝试使用 \"%s\ and \"%s"\ and %s and '%s' and "%s" and \"%s\" 但查询仍然给我错误..

最后一个问题，这个“ **%s** ”语法叫什么？

谢谢...

**教程中的原始查询**

```
$insert_sql = sprintf("INSERT INTO student (first_name, last_name) VALUES(\"%s\",\"%s\")",
      $student_record[$i][0], $student_record[$i][1]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:36:00.610

删除周围的引号`%`并将`%`前缀更改`data1`为`$`：

```
$insert_sql = sprintf("INSERT INTO detail_paket (id_paket, menu_paket) select paket.id,%s from paket where paket.nama_paket='$nama_paket'",$data1[$i]); 
```

另一个问题是您需要用`;`. 这不适用于所有 MySQL API，并非所有 API 都允许多个查询。您可能需要运行两个查询而不是单个多个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:42:46.123

如果必须这样做，可以将 '%s' 替换为 '{$data1[$i]}' 并摆脱 sprintf。虽然我认为使用准备好的语句更安全[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

# vb.net - 数据集未更新 vb.net

> ID：13580084
> 
> 赞同：0
> 
> 时间：2012-11-27T08:28:57.710
> 
> 标签：vb.net, binding, dataset

在加载表单时，我使用以下代码填充数据集：

```
Con.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Congress.accdb;Persist Security Info=False"
Con.Open()

dAp1 = New OleDbDataAdapter("Select * from VotingRecords", Con)
DS.Tables.Add("VotingRecords")
dAp1.Fill(DS.Tables("VotingRecords"))

BindingNavigator1.BindingSource = myBS
myBS.DataSource = DS.Tables("VotingRecords")

Me.BillComboBox.DataBindings.Add(New Binding("Text", myBS, "BillNumber", True))
Me.CongressPersonComboBox.DataBindings.Add(New Binding("Text", myBS, "CID", True))
Me.VoteComboBox.DataBindings.Add(New Binding("Text", myBS, "Vote", True)) 
```

这里所有的 Con、dAP1、DS、myBS 变量都是全局或表单级变量。

单击保存按钮时：

```
Try
    myBS.EndEdit()
    dAp1.Update(DS.Tables("VotingRecords"))
Catch ex As Exception
    MsgBox("Error")
End Try 
```

不知道为什么它向我显示错误；错误信息：

> 当传递带有修改行的 DataRow 集合时，更新需要有效的 UpdateCommand。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:30:24.857

您需要`UpdateCommand`在`OleDbDataAdapter`.

```
dAp1 = New OleDbDataAdapter("Select * from VotingRecords", Con)
dAp1.UpdateCommand = new OleDbCommand("UPDATE VotingRecords SET Column1 = ?, Column2 = ? WHERE Column3 = ?")
dAp1.UpdateCommand.Parameters.Add("Column1", column1OleDbType, column1Length, "Column1")
dAp1.UpdateCommand.Parameters.Add("Column2", column2OleDbType, column2Length, "Column2")
dAp1.UpdateCommand.Parameters.Add("Column3", column3OleDbType, column3Length, "Column3")
dAp1.UpdateCommand.Parameters("Column3").SourceVerion = DataRowVersion.Original 
```

文档：http: [//msdn.microsoft.com/en-us/library/system.data.oledb.oledbdataadapter.updatecommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdataadapter.updatecommand.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:52:44.783

得到它的工作......感谢
[http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)

它是我缺少的命令生成器

# php - 如果匹配，则匹配两个表中的数据..显示名称和消息

> ID：13580090
> 
> 赞同：1
> 
> 时间：2012-11-27T08:29:17.940
> 
> 标签：php, mysql

我有两张桌子`mysql`。以下是我的脚本。

```
<?php
$conn=mysql_connect("localhost",'root','');
mysql_select_db('test');

$sql    = "SELECT data_student.name,ozekimessagein.msg 
            FROM ozekimessagein,data_student
            WHERE ozekimessagein.sender=data_student.sender 
            ORDER BY ozekimessagein.msg";

$res=mysql_query($sql);
$cn=mysql_num_rows($res);
for($x=0;$x<$cn;$x++)
{
    list($name,$msg)=mysql_fetch_row($res);
    echo "<li>$name,$msg";
}
mysql_close($conn);
?> 
```

只要表中的发件人与表中的发件人匹配，这应该显示表中的名称`data_student`和消息。但它不起作用。`ozekimessagein``data_student``ozekimessagein`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:03:43.010

尝试这个

```
 <?php
  $conn=mysql_connect('localhost','root','');
    mysql_select_db('test');

 $sql    = "

   SELECT s.name AS names, o.msg AS msgs
  FROM ozekimessagein o
  INNER JOIN data_student s
   ON o.sender = s.sender
   ORDER BY s.name";

  $res=mysql_query($sql);

  while ($row = mysql_fetch_assoc($res)) {

 echo "<li>".$row['names']." : ".$row['msgs']."</li>";
     }
  mysql_close($conn);
  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:31:45.450

尝试这个 ：：

```
SELECT 

data_student.name,
ozekimessagein.msg 

FROM ozekimessagein 
inner join data_student     on ozekimessagein.sender=data_student.sender 

ORDER BY ozekimessagein.msg 
```

# c# - div 内容丢失

> ID：13580092
> 
> 赞同：0
> 
> 时间：2012-11-27T08:29:22.157
> 
> 标签：c#, javascript, asp.net, .net

我有一个带有表格对象的 div，它填充页面的 onload 事件。

```
<div id="divcontent" runat="server">
<asp:Table id="tblcontent" runat="server" CellPadding="4" align="center"   width="80%">      </asp:Table>
</div>     

<div align="left" style ="width:90%; padding-top:20px;">
<input value="Print" type="button" onclick="PrintDiv();"/>       
</div> 
```

我有下面的代码来打开一个带有 div 内容的弹出窗口，以便只打印 div 内容：

```
<script type="text/javascript">

function PrintDiv() {

    var divToPrint = document.getElementById('divcontent');

    var popupWin = window.open('', '_blank', 'width=500,height=700');

    popupWin.document.open();

    popupWin.document.write('<html><body onload="window.print()">' +   divToPrint.innerHTML + '</html>');

    popupWin.document.close();
}

</script> 
```

但是当弹出窗口打开时，它是空的！有人可以说为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:32:04.837

如果您的页面有母版页，那么 divcontent 不会像您设置的那样在浏览器上显示 id 值`runat="server"`，因此使用`ClientID`控件获取 div 的呈现 id。

尝试这个，

```
function PrintDiv() {
    var divToPrint = document.getElementById('<%= divcontent.ClientID %>');

    var popupWin = window.open('', '_blank', 'width=500,height=700');
    popupWin.document.open();
    popupWin.document.write('<html><body onload="window.print()">' +   divToPrint.innerHTML + '</html>');
    popupWin.document.close();
} 
```

# css - 如何使用 css 创建标签

> ID：13580096
> 
> 赞同：1
> 
> 时间：2012-11-27T08:29:32.827
> 
> 标签：css, styles

我在一个网站上看到了以下图片，

![标签](../Images/56bb6da51cb35b0c0291b037e0a1f28e.png)

他们没有使用任何背景图像，而是使用 css 完成所有这些。我如何使用 css 创建这样的标签，假设其中没有`Buy!`按钮..

链接在这里

[链接到图片](http://www.groupon.com/deals/happy-hummus-hut-1?c=all&p=0)

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T08:33:10.223

他们使用精灵形式的背景图像。

这是精灵：[http ://assets2.grouponcdn.com/images/groupon/common-s587a68dd07.png?L4HgENCa](http://assets2.grouponcdn.com/images/groupon/common-s587a68dd07.png?L4HgENCa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:53:44.700

这确实是一个形象。但只是为了证明也可以只使用 css，这里有一个小提琴解决方案：http: [//jsfiddle.net/bspbg/](http://jsfiddle.net/bspbg/)

```
input{
    background-color:rgba(110, 180, 60, 1);
    padding:10px;
    border-radius:40px;
    border-color:white;
    border-width: 3px;
    border-style: solid;
    font-size:2em;
    font-weight:bold;
    color: white;
    margin:20px;
    margin-left: 70px;
    box-shadow:-2px -2px 1px 3px rgba(50, 150, 30,1) inset,5px 5px 5px rgba(255, 255, 255,0.5) inset;
}
.somebg{
    background-color: rgba(100, 200, 230, 1);
    width: 250px;
    height: 105px;
    box-shadow: 0px 0px 40px rgba(1,1,1,0.5) inset;
} 
```

这里`input`是按钮。使用边界、半径和盒子阴影，你就完成了:)

编辑：[带背景的新小提琴](http://jsfiddle.net/bspbg/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:31:33.797

您可以使用`content: "<p>Any html you like</p>"`CSS 中的命令来呈现标签内的内容。

# php - PHP开关下降虽然问题

> ID：13580099
> 
> 赞同：0
> 
> 时间：2012-11-27T08:29:48.677
> 
> 标签：php

代码：

```
switch ($_GET['operation']) {
    case "professionist":
    case "company":
    case "student":
        echo "ok<br>";

    case "professionist":
        echo "inprofessionist<br>";
        break;

    case "company":
        echo "incompany<br>";
        break;

    default:
        echo "Meh!<br>";
        break;
} 
```

我的目标是先执行一些（专业/公司/学生通用的）代码，然后根据操作执行其余代码...

问题是前 3 个案例完美运行，但是，例如，如果操作是“公司”，则切换到“专业人士”案例，我做错了什么？怎样才能改善呢？提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:32:55.977

这就是开关的工作原理。如果您总是需要打印“ok”，请将其移到开关外：

```
$op = $_GET["operation"];

if (in_array($op, array("professionist", "company"))) {
   echo "ok<br>";
}

switch ($op) {
    case "professionist":
        echo "inprofessionist<br>";
        break;

    case "company":
        echo "incompany<br>";
        break;

    default:
        echo "Meh!<br>";
        break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:34:32.087

只有`case`具有给定值的第一个才会成为 a 的目标`switch`。（事实上​​，`switch`每次执行只处理一个案例 - fallthough 只是让您有多个案例共享一些代码，但其中只有一个是实际触发的。）

因此，拥有多个`case`具有相同值的 es 是没有意义的——一个`switch`语句与一系列独立`if`的 s 不同；它是跳跃目标的映射。

本质上，假设您有一个这样的开关：

```
w;                               // 001
switch ($foo) {                  // 002
  case 'a':
     w;                          // 003
  case 'b':
     x;                          // 004
     break;                      // 005
  case 'c':
     y;                          // 006
}
z;                               // 007 
```

实际上最终发生的事情是您可以像这样有效地获得一些代码（注意：从实际工作方式高度简化）：

```
001  v
002  jump based on $foo: [a -> 003, b -> 004, c -> 006]
003  w
004  x
005  jump to 007
006  y
007  z 
```

然后那个程序就从上到下运行。

*   在 where `$foo`is 'a' 的情况下，它跳到 003 并从那里运行，这意味着它最终会做`v,jump,w,x,z`。
*   在 where `$foo`is 'b' 的情况下，它会跳到 004 并从那里运行，这意味着它最终会做`v,jump,x,z`。
*   在 where `$foo`is 'c' 的情况下，它会跳到 006 并从那里运行，这意味着它最终会做`v,jump,y,z`。

# mysql - 需要一组自己，孩子和孩子在铁轨上

> ID：13580101
> 
> 赞同：0
> 
> 时间：2012-11-27T08:29:50.350
> 
> 标签：mysql, ruby-on-rails-3, rubygems

我有一张如下表

![带有父ID的Mysql表](../Images/aeb1c0bcb24faae3bf17aecaa0de3a92.png)

好吧，在这个表中，每个用户都有一个父用户，那么如果我们选择一个用户，那么它的 id ，children ids 和children ids 应该作为数组返回。我需要一个查询来在不使用任何 gem 的情况下在 rails 中获取这个值。感谢您的帮助：->

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:59:43.743

```
class User << ActiveRecord::Base      
  def self.build_tree(reverse=false)
    g = Array.new    
    self.find(:all).each do |p|           
        if reverse
        g << [p.id,p.parent]            
        else
        g << [p.parent,p.id]            
        end
    end
    g
  end
  def self.subordinates(man_id)
    g = self.build_tree false       
    g.map{|i| i[1] if i[0]==man_id.to_i}.compact    
  end
  def self.superiors(user_id)
     g = self.build_tree true            
     g.map{|i| i[1] if i[0]==user_id.to_i}.compact     
  end
end 
```

当调用**上级（父母）**或**下级（孩子）**时，它会给出所需的结果
例如：- **[2,4,6,8]**
如果你想获得**孩子->孩子**或父母- **>父母****，**只需执行**迭代**调用函数**上级或下级**，直到得到**nil 或 []**数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:36:43.697

您正在陷入 SQL 反模式。对这样构造的树执行操作是非常低效的。我并不是说您应该为此使用 gem，而是考虑使用一些更智能的方法来保存这些数据（搜索`sql tree structure`应该会产生一些有意义的结果）。

您正在查找的查询需要两个自连接：

```
SELECT t1.id user_ids, t2.id children_ids, t3.id children_children_ids FROM users t1 
  LEFT JOIN users t2 ON t2.parent = t1.id
  LEFT JOIN users t3 ON t3.parent = t2.id 
```

另一方面，如果您的 Rails 模型定义了自关系，您可以轻松编写：

```
user.children #=> (array of children)
user.children.flat_map(&:children) #=> (array of grandchildren) 
```

此关系的定义应如下所示：

```
class User << ActiveRecord::Base
  has_many :children, class_name: User, foreign_key: 'parent'
end 
```

# android - 如何在 Android ICS 4.0.3 和 4.0.4 上播放音频文件

> ID：13580103
> 
> 赞同：2
> 
> 时间：2012-11-27T08:29:51.530
> 
> 标签：android, android-4.0-ice-cream-sandwich

```
_mediaPlayer = MediaPlayer.create(getApplicationContext(), R.raw.mysound);
_mediaPlayer.start(); 
```

它适用于 Android 1.6 或 2.1 或 2.2 或 2.3.3 但是，当我从 4.0.1 更新到 4.0.4 时，它就不起作用了！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-16T10:18:03.017

您必须在 AsyncTask 类中执行此操作，而不是在主要威胁中

# java - 检查上传和下载进度（适用于 Android 或 Java 的 Google Drive API）

> ID：13580109
> 
> 赞同：19
> 
> 时间：2012-11-27T08:30:03.817
> 
> 标签：java, android, google-drive-api

如何检查使用 GoogleDrive API 的上传进度？

service.files() . ***insert(body, mediaContent).execute();*** 只返回一个***文件***，我们可以检查该文件是否已完全上传。

但是我需要实时检查进度（至少每秒左右），无论如何要这样做？

对于下载部分，我认为我们可以手动比较我们已经从输入流中读取的字节数与总文件大小，然后计算当前进度。

但这是正确的方法吗？还是有其他更好的检查进度的方法？

```
private void saveFileToDrive() {
    Thread t = new Thread(new Runnable() {
      @Override
      public void run() {
        try {
          // File's binary content
          java.io.File fileContent = new java.io.File(fileUri.getPath());
          FileContent mediaContent = new FileContent("image/jpeg", fileContent);

          // File's metadata.
          File body = new File();
          body.setTitle(fileContent.getName());
          body.setMimeType("image/jpeg");

          File file = service.files().insert(body, mediaContent).execute();
          if (file != null) {
            showToast("Photo uploaded: " + file.getTitle());
            //startCameraIntent();
          }
        } catch (UserRecoverableAuthIOException e) {
          startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
        } catch (IOException e) {
          e.printStackTrace();
        }
      }
    });
    t.start();
  } 
```

编辑：使用此代码[http://code.google.com/p/google-api-java-client/source/browse/drive-cmdline-sample/src/main/java/com/google/api/services/samples /drive/cmdline/DriveSample.java?repo=samples&name=based-on-1.12&r=08555cd2a27be66dc97505e15c60853f47d84b5a](http://code.google.com/p/google-api-java-client/source/browse/drive-cmdline-sample/src/main/java/com/google/api/services/samples/drive/cmdline/DriveSample.java?repo=samples&name=based-on-1.12&r=08555cd2a27be66dc97505e15c60853f47d84b5a)

如果我使用***可恢复上传***，我现在可以取得一些进展，我将 chunksize 设置为 1MB。但是现在有两个问题。

1) 可恢复上传比单次上传慢很多，因为中间会停很多次，每次只发送1MB。
如果我将 chunksize 设置为更高，那么对于较小的文件，它根本不会显示进度。
所以，可恢复上传的进展并不是我真正想要的。我想要单次上传的进度。

2）如果我将块大小设置为 1MB，对于一个普通的 10MB 文件，我的上传总是在 70% 左右**失败。**
如果我将 chunksize 设置为 10MB，那么它会成功，但我不会看到任何进展。

```
Drive.Files.Insert insert = service.files().insert(body, mediaContent);
MediaHttpUploader uploader = insert.getMediaHttpUploader();
uploader.setDirectUploadEnabled(false);
uploader.setChunkSize(10*1024*1024); // previously I am using 1000000 thats why it won't work
uploader.setProgressListener(new FileUploadProgressListener());
com.google.api.services.drive.model.File f = insert.execute(); 
```

LogCat 错误：

```
11-27 19:23:26.927: D/FileUploadProgressListener(11527): Upload is In Progress: 0.5235538030501893
11-27 19:23:33.692: D/FileUploadProgressListener(11527): Upload is In Progress: 0.56095050326806
11-27 19:23:38.294: D/FileUploadProgressListener(11527): Upload is In Progress: 0.5983472034859306
11-27 19:23:50.583: D/FileUploadProgressListener(11527): Upload is In Progress: 0.6357439037038013
11-27 19:23:55.091: D/FileUploadProgressListener(11527): Upload is In Progress: 0.673140603921672
11-27 19:24:05.130: D/FileUploadProgressListener(11527): Upload is In Progress: 0.7105373041395426
11-27 19:24:17.005: D/FileUploadProgressListener(11527): Upload is In Progress: 0.7479340043574133
11-27 19:24:28.888: D/FileUploadProgressListener(11527): Upload is In Progress: 0.785330704575284
11-27 19:24:28.896: W/HttpTransport(11527): exception thrown while executing request
11-27 19:24:28.896: W/HttpTransport(11527): java.io.IOException: unexpected end of stream
11-27 19:24:28.896: W/HttpTransport(11527):     at libcore.net.http.FixedLengthOutputStream.close(FixedLengthOutputStream.java:58)
11-27 19:24:28.896: W/HttpTransport(11527):     at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:88)
11-27 19:24:28.896: W/HttpTransport(11527):     at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:980)
11-27 19:24:28.896: W/HttpTransport(11527):     at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:293)
11-27 19:24:28.896: W/HttpTransport(11527):     at com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive.java:309)
11-27 19:24:28.896: W/HttpTransport(11527):     at com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T14:11:39.057

进度监听器：

```
private class FileUploadProgressListener implements MediaHttpUploaderProgressListener {

    private String mFileUploadedName;

    public FileUploadProgressListener(String fileName) {
        mFileUploadedName = fileName;
    }

    @Override
    public void progressChanged(MediaHttpUploader mediaHttpUploader) throws IOException {
        if (mediaHttpUploader == null) return;
        switch (mediaHttpUploader.getUploadState()) {
            case INITIATION_STARTED:
            //System.out.println("Initiation has started!");
                break;
            case INITIATION_COMPLETE:
            //System.out.println("Initiation is complete!");
                break;
            case MEDIA_IN_PROGRESS:
                double percent = mediaHttpUploader.getProgress() * 100;
                if (Ln.DEBUG) {
                    Log.d(Ln.TAG, "Upload to Dropbox: " + mFileUploadedName + " - " + String.valueOf(percent) + "%");
                }
                notif.setProgress(percent, mFileUploadedName).fire();
                break;
            case MEDIA_COMPLETE:
            //System.out.println("Upload is complete!");
        }
    }
} 
```

更多信息在这里： [https ://code.google.com/p/google-api-java-client/wiki/MediaUpload](https://code.google.com/p/google-api-java-client/wiki/MediaUpload)

> **直接媒体上传将在一个请求**中上传整个媒体内容，而不是可以在多个请求中上传的可恢复媒体上传协议。
> 
> 直接上传会减少 HTTP 请求的数量，但 **会增加**大型媒体上传失败的变化（例如连接失败）。

由于库的架构，您必须在块和进度或没有进度的一步之间进行选择。最小的块大小应该可以改善事情。可能的更小的块：

```
setChunkSize(MediaHttpUploader.MINIMUM_CHUNK_SIZE) 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-18T00:12:03.723

关于块大小，它必须是 MediaHttpUploader.MINIMUM_CHUNK_SIZE 的倍数，这就是它与您之前的值出错的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-07T18:41:14.107

CloudRail SDK 的方法与原始方法略有不同。以下 ProgressInputStream 可用于上传和下载进度指示。

```
class ProgressInputStream extends InputStream {

  private InputStream stream;
  private ProgressListener progressListener;
  private long offset = 0;

  public ProgressInputStream(InputStream stream, UploadProgressListener progressListener) {
    this.stream = stream;
    this.progressListener = progressListener;
  }

  @Override
  public int read() throws IOException {
    int res = this.stream.read();
    this.progressListener.onProgressChanged(++this.offset);

    return res;
  }

  @Override
  public int read(byte[] b, int off, int len) throws IOException {
    int res = this.stream.read(b, off, len);
    this.offset += res;
    this.progressListener.onProgressChanged(this.offset);

    return res;
  }

  // You might need to override additional methods but you can just
  // call the corresponding method on the stream property

  public interface ProgressListener {
    void onProgressChanged(long bytes);
  }
} 
```

完整的教程可以在[这里](https://cloudrail.com/progress-indication-dropbox-google-drive-upload-download/)找到。

# windows-server-2008 - 服务帐户在 windows 2008 应用程序服务器中变为非活动状态

> ID：13580110
> 
> 赞同：0
> 
> 时间：2012-11-27T08:30:08.183
> 
> 标签：windows-server-2008

我在windows 2008 应用服务器上有一个服务帐号来实现word 到pdf 的转换。3-4 天前一切正常，突然功能关闭。

我深入研究细节。我得到的信息如下：

1.  当我使用该服务帐户登录并尝试实现该功能时，我能够做到。

2.  当我使用服务帐户注销并尝试实现该功能时，我无法做到。

结论：不知何故，服务帐户变得不活跃。

问题很奇怪，我尝试了 Dcom 配置中的每种权限组合。非常感谢任何正确方向的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:04:54.783

您已经尝试检查“密码永不过期”和“用户无法更改 Active Directory 用户和计算机中的密码”选项？另外，尝试在机器上重新安装应用程序。如果应用程序无法作为 Windows 服务运行，请使用 SRVANY.EXE 实用程序注册您的应用程序。

# android - 在 textview 上启动电话 click

> ID：13580115
> 
> 赞同：0
> 
> 时间：2012-11-27T08:30:20.047
> 
> 标签：android, android-intent

我有一个`TenantDetailsListAdapter`扩展`BaseAdapter` 为的课程详细信息

```
public class TenantDetailsListAdapter extends BaseAdapter {

} 
```

我正在尝试在课堂上开始一个意图活动，但它不起作用。

我的意图如下：

```
Intent callIntent = new Intent(Intent.ACTION_CALL);

callIntent.setData(Uri.parse("tel:+"+text1 .trim()));

startActivity(callIntent); 
```

有人可以知道如何调用不在活动扩展中的活动吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T08:37:21.760

在你的做这样的事情`BaseAdapter`：

```
private Context _mContext;
public MyBaseAdapter(Context context/*  some other data you need */){
    this._mContext = context;
}

@Override
public View getView(int position, View convertView, ViewGroup parent){
   Intent callIntent = new Intent(Intent.ACTION_CALL);
   callIntent.setData(Uri.parse("tel:+"+text1 .trim()));
   calIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  // you are starting intent out of the activity so you will need this.
   _mContext.startActivity(callIntent);
} 
```

# haskell - reactive-banana-wx `sink` 不会生成启用 post-sink 处理的事件

> ID：13580121
> 
> 赞同：6
> 
> 时间：2012-11-27T08:30:41.147
> 
> 标签：haskell, reactive-programming, frp, reactive-banana

我目前正在使用 reactive-banana 和 reactive-banana-wx 包重新设计一个遗留的 wxHaskell。然而，为了避免动态网络构建（我遇到了 MVar 上的线程块），我现在通过预先构建一组固定的 wxHaskell 小部件来模拟这一点，我根据需要设置了这些小部件的可见性。可见性由`sink`采用`Behavior`. 但是，wxHaskell 要求在所有这些小部件都通过 适当地修改`sink`之后，需要随后更改包含这些小部件的面板的布局。这意味着`sink`-ing 实际上应该是网络的一部分，因此它是一个可以触发并等待布局更改的事件。就目前而言，一个`sink``sink`将您“带出”事件网络，操作完成后无法触发事件。我确实尝试过适应`sink`这样的事情：

```
sink' :: Frameworks t =>
    w -> [Prop' t w] -> Moment t (Event t ())
sink' widget props = do
    es <- mapM sink1 props
    return $ unions es
  where
    sink1 (attr :== b) = do
        x <- initial b
        liftIOLater $ set widget [attr := x]
        e <- changes b
        return $ (\x -> unsafePerformIO $ set widget [attr := x]) <$> e 
```

然而，`unsafePerformIO`并没有被执行。如何实现所需的行为，即允许（wxHaskell）IO 通过`Event`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:46:46.317

基本上，您似乎想确保`reactimate`按特定顺序执行 IO 操作？也就是说，您要确保在设置小部件属性*之后设置布局。*

有几种方法可以指定顺序：

1.  使用`union`,`unionWith`和/或`collect`确定同时事件的顺序。
2.  使用按它们在monad`reactimate`中出现的顺序执行的事实。（虽然严格来说，当您从动态事件切换中`Moment`使用组合器时，这不再适用。）`observeE`

在您的特定情况下，可以按如下方式应用这些想法。

对于 1，你可以制作一个包含 IO 动作的事件，稍后将其与布局结合起来

```
sink' :: Frameworks t =>
    w -> [Prop' t w] -> Moment t (Event t (IO ()))
sink' widget props = do
    es <- mapM sink1 props
    return $ foldr1 (unionWith (>>)) es
  where
    sink1 (attr :== b) = do
        x <- initial b
        liftIOLater $ set widget [attr := x]
        e <- changes b
        return $ (\x -> set widget [attr := x]) <$> e 
```

对于2，您可以简单地使用普通`sink`功能，只需确保最后设置布局即可。

```
do
    sink widget1 [ visible :== bBool ]
    sink window1 [ layout  :== bLayout ] 
```

monad 中函数的顺序`sink`保证了布局是最后设置的。

* * *

另请注意，从反应香蕉 0.7 开始，您可以使用动态事件切换来对一组可变的小部件进行建模。有关演示，请参阅[BarTab.hs 示例](http://www.haskell.org/haskellwiki/Reactive-banana/Examples#bartab)。此示例还设置了布局。

您表示在使用动态网络时遇到了 MVar 块。这可能是因为您创建小部件的方式会触发网络中的另一个事件。不幸的是，这在语义上是不合理的——它对应于取决于自身未来版本的值——并且程序通过陷入谷底来做出响应。

# android - android中的最佳线程池大小

> ID：13580126
> 
> 赞同：1
> 
> 时间：2012-11-27T08:30:51.787
> 
> 标签：android

我有一个应用程序，它有很多远程资源加载操作、预定的可运行对象和其他操作系统事件处理。我正在使用带有缓存线程的单个执行程序服务。我不知道应该使用多少线程来获得最佳性能和电池使用。

有没有办法知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:40:58.263

通常，您无需担心影响电池使用的线程数。因为如果工作量相同（可以说是 CPU 指令），如果您在一个线程上执行或使用 2 个线程并行执行，那么电池消耗应该没有太大差异。您将获得更快的结果，但 CPU 仍将执行*几乎*相同数量的指令。

至于性能提升，如果线程 100% 的时间消耗 cpu，那么拥有比核心数量更多的线程不会产生任何性能差异，实际上，由于调度开销，你会获得更少的性能。

您应该定义一个指标来评估性能，并定义什么对您来说是“最佳的”。很难说不知道软件到底在做什么。如果现在没有性能/电池问题，那么可能无需担心。

你的问题不能有明确的答案，因为它非常广泛。

# android - Android 4.2：IllegalstateException：此 LayerDrawable 的一个或多个孩子没有恒定状态

> ID：13580128
> 
> 赞同：3
> 
> 时间：2012-11-27T08:31:01.827
> 
> 标签：android, inflate, layer-list

由于我的智能手机上从 Android 4.1 到 4.2 的新更新，我的应用程序在初始化 ViewPager 及其活动时引发异常。

**例外：**

java.lang.IllegalStateException: 此LayerDrawable 的一个或多个孩子没有恒定状态；这个drawable不能被改变。

**堆栈跟踪：**

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{imatuve.info/imatuve.news.NewsTabActivity}: android.view.InflateException: Binary XML file line #3: Error inflating class <unknown>
   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
   at android.app.ActivityThread.access$600(ActivityThread.java:141)
   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
   at android.os.Handler.dispatchMessage(Handler.java:99)
   at android.os.Looper.loop(Looper.java:137)
   at android.app.ActivityThread.main(ActivityThread.java:5039)
   at java.lang.reflect.Method.invokeNative(Native Method)
   at java.lang.reflect.Method.invoke(Method.java:511)
   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
   at dalvik.system.NativeStart.main(Native Method)Caused by: android.view.InflateException: Binary XML file line #3: Error inflating class <unknown>
   at android.view.LayoutInflater.createView(LayoutInflater.java:613)
   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
   at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
   at imatuve.news.NewsTabActivity.createTabView(NewsTabActivity.java:313)
   at imatuve.news.NewsTabActivity.initialiseTabHost(NewsTabActivity.java:261)
   at imatuve.news.NewsTabActivity.onCreate(NewsTabActivity.java:96)
   at android.app.Activity.performCreate(Activity.java:5104)
   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
   ... 11 more
    Caused by: java.lang.reflect.InvocationTargetException
   at java.lang.reflect.Constructor.constructNative(Native Method)
   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
   at android.view.LayoutInflater.createView(LayoutInflater.java:587)
... 23 more
    Caused by: android.content.res.Resources$NotFoundException: File res/drawable/tab_bg_selector.xml from drawable resource ID #0x7f020065
   at android.content.res.Resources.loadDrawable(Resources.java:1953)
   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
   at android.view.View.<init>(View.java:3328)
   at android.view.View.<init>(View.java:3257)
   at android.view.ViewGroup.<init>(ViewGroup.java:425)
   at android.widget.RelativeLayout.<init>(RelativeLayout.java:210)
   ... 26 more
    Caused by: java.lang.IllegalStateException: One or more children of this LayerDrawable does not have constant state; this drawable cannot be mutated.
   at android.graphics.drawable.LayerDrawable.mutate(LayerDrawable.java:579)
   at android.graphics.drawable.DrawableContainer.selectDrawable(DrawableContainer.java:315)
   at android.graphics.drawable.StateListDrawable.onStateChange(StateListDrawable.java:106)
   at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:189)
   at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:885)
   at android.graphics.drawable.Drawable.createFromXml(Drawable.java:822)
   at android.content.res.Resources.loadDrawable(Resources.java:1950)
   ... 31 more 
```

**编码：**

```
private static View createTabView(final Context context, final String tag) {

            //The exception comes when inflating the view
            View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);

    TextView tv = (TextView)view.findViewById(R.id.tabsText);
    tv.setText(tag);

    return view;
} 
```

**tab_bg_selector.xml：**

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<!--  Active tab -->
<item android:state_selected="true" android:state_focused="false"
    android:state_pressed="false" android:drawable="@drawable/tab_bg_selected" />
<!--  Inactive tab -->
<item android:state_selected="false" android:state_focused="false"
    android:state_pressed="false" android:drawable="@drawable/tab_bg_unselected" />
<!--  Pressed tab -->
<item android:state_pressed="true" android:drawable="@drawable/tab_bg_pressed" />
<!--  Selected tab  -->
<item android:state_focused="true" android:state_selected="true"
    android:state_pressed="false" android:drawable="@color/transparent" /> 
```

**tab_pg_pressed.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >   
<item
    android:bottom="8dp"
    android:top="63dp">
    <shape android:shape="rectangle" >
        <solid android:color="#70c0e7fd" />
    </shape>
</item>

<!-- mask out the bottom line of the tab shape -->
<item
    android:left="15dp"
    android:right="15dp"
    android:top="63dp">
    <shape android:shape="rectangle" >
        <corners android:bottomLeftRadius="0dp"
             android:bottomRightRadius="0dp" 
             android:topLeftRadius="3dp"
             android:topRightRadius="3dp" />

        <solid android:color="#70c0e7fd" />
    </shape>
</item> 
```

**tab_bg_selected.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:bottom="8dp"
    android:top="63dp">
    <shape android:shape="rectangle" >
        <solid android:color="#ffc0e7fd" />
    </shape>
</item>

<!-- mask out the bottom line of the tab shape -->
<item
    android:left="15dp"
    android:right="15dp"
    android:top="63dp">
    <shape android:shape="rectangle" >
        <corners android:bottomLeftRadius="0dp"
             android:bottomRightRadius="0dp" 
             android:topLeftRadius="3dp"
             android:topRightRadius="3dp" />

        <solid android:color="#ffc0e7fd" />
    </shape>
</item> 
```

**tab_bg_unselected.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
</layer-list> 
```

“tabs_bg”布局存在于我的布局文件夹中，就像 res/drawable/tab_bg_selector.xml 一样。

在 Android 4.1 或更低版本的操作系统上不会发生此异常。这可能是什么，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:40:37.743

我发现了问题。它位于 tab_bg_unselected.xml 中。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
</layer-list> 
```

显然，在 Android 4.2 中，layer-list 必须至少有一个孩子。所以我在列表中添加了一个项目，应用程序不会再次抛出异常！

但仅添加一个“空”项是不够的！它还必须是内容，例如形状。

# android - 哪个最适合 android 自动化葫芦或 UIAutomator api

> ID：13580136
> 
> 赞同：-1
> 
> 时间：2012-11-27T08:31:28.460
> 
> 标签：android, testing, functional-testing, ui-automation

朋友请建议我哪个最适合 android 自动化 - 葫芦或 UIAutomatorViewer。我对葫芦一无所知，但很少有朋友开始研究它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:21:53.717

我是 calabash-android 的创造者，所以对它持保留态度 ;-)

UIAutomatorViewer 仅适用于 api 级别 16 及以上，这意味着您无法在旧手机和平板电脑上运行测试。Calabash 适用于 api 级别 8 及以上。

Calabash 与在您的计算机上运行的 UIAutomatorViewer 不同，它驱动设备上与您的应用程序交互的服务器。这使您可以调用 Web 服务等。（您也可以在设备上执行此操作，但您的计算机上有更强大的工具可用。）

如果您还有其他问题，请告诉我:)

# android - 使用 Android 微调器从提示更改文本大小

> ID：13580137
> 
> 赞同：1
> 
> 时间：2012-11-27T08:31:28.643
> 
> 标签：android, text, spinner

我有一个带有自定义文本视图的微调器，如下面的代码所示：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="50dp"
          android:singleLine="true"
          android:textSize="16sp"
          android:ellipsize="end"
          android:gravity="center_vertical">

</TextView> 
```

我的问题是 16sp 的文本大小也适用于所选项目（提示中的文本），并且对于微调器来说太大（它不适合微调器），如果我将 textSize 更改为 11sp 然后项目上列表将太小。如何仅更改所选项目的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:14:38.530

好吧，也许您可​​以在 setOnItemClickListener 中修改 textsize，顺便说一下，您可以简单地创建一个按钮，然后单击它，显示一个包含元素列表的对话框，以便您模拟微调器的行为。通过这种方式，您可以根据需要自定义按钮文本大小和列表

# c# - 从资源中添加图像 - Visual Studio 11 Beta C#

> ID：13580138
> 
> 赞同：-3
> 
> 时间：2012-11-27T08:31:29.440
> 
> 标签：c#, image, resources

我想在 Visual Studio 11 Beta 中将图像添加到我的 C# WinForm 应用程序。因此，我使用“添加资源”+“来自现有文件...”在资源选项卡/图像中添加了我的 png（效果很好，并且在选项卡中列出）。

现在我尝试使用以下命令访问它： `Bitmap Image = new Bitmap(MyProject.Properties.Resources.MyImage);`但它在“资源”中找不到任何内容。（我获得的资源的唯一选项是：Culture、Equals、ReferenceEquals 和 ResourceManager）我还尝试将图像的构建操作设置为属性选项卡中的嵌入资源

添加带有本地路径的 png 就像一个魅力。

我做错了还是有其他问题？（我正在使用 .NET Framework 4）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:02:08.367

如果您尝试将其从程序集中加载（构建操作 = 嵌入式资源），则需要`Stream`从程序集中读取，如下所示：

```
using System.Reflection;
//...
var image = new Bitmap(
    Assembly.GetEntryAssembly().
        GetManifestResourceStream("MyProject.Properties.Resources.MyImage.png")); 
```

这假定您的文件位于`/Properties/Resources/MyImage.png`并且您的程序集的根命名空间是`MyProject`.

# c# - 具有水平列的 DataGridView

> ID：13580147
> 
> 赞同：2
> 
> 时间：2012-11-27T08:32:06.990
> 
> 标签：c#, winforms, datagridview

是否可以在 DataGridView 中有一个水平列，并能够绑定这些列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:49:12.020

您不必翻转 DataGridView 而是**翻转 DataSet 来绑定**

尝试这个：

```
public DataSet FlipDataSet(DataSet my_DataSet)
{
 DataSet ds = new DataSet();

 foreach (DataTable dt in my_DataSet.Tables)
 {
   DataTable table = new DataTable();

   for (int i = 0; i <= dt.Rows.Count; i++)
   {   table.Columns.Add(Convert.ToString(i));  }

   DataRow r;
   for (int k = 0; k < dt.Columns.Count; k++)
   { 
     r = table.NewRow();
     r[0] = dt.Columns[k].ToString();
     for (int j = 1; j <= dt.Rows.Count; j++)
     {  r[j] = dt.Rows[j - 1][k]; }
     table.Rows.Add(r);
   }
   ds.Tables.Add(table);
 }

 return ds;
} 
```

有关更多详细信息，请访问[Displaying-Vertical-Rows-in-DataGrid-View](http://www.codeproject.com/Articles/19313/Displaying-Vertical-Rows-in-DataGrid-View)

# objective-c - 应用程序在模拟器中崩溃但在设备上没有

> ID：13580156
> 
> 赞同：0
> 
> 时间：2012-11-27T08:32:53.423
> 
> 标签：objective-c, rubymotion

我正在使用 Rubymotion 构建一个 iOS 应用程序，当我在模拟器中运行该项目时，我收到此错误：

```
app_delegate.rb:31:in `application:didFinishLaunchingWithOptions:': NSInvalidArgumentException: -[NSNull pointSize]: unrecognized selector sent to instance 0x1639cd8 (RuntimeError) 
```

但是当我在设备上运行它时它不会崩溃。我在设备上安装了 iOS 6，在模拟器上安装了 iOS5。

*这是崩溃的行：*

```
UINavigationController.alloc.initWithRootViewController(firstViewController) 
```

当我在应用程序中注释掉*setTitleTextAttributes*的所有实例时，它可以工作。这是我如何使用它的几个例子：

```
aboutController.tabBarItem.setTitleTextAttributes({UITextAttributeFont => tabFont}, forState:UIControlStateNormal)

aboutNavController.navigationBar.setTitleTextAttributes({UITextAttributeFont => titleFont}) 
```

我猜这是iOS5的问题？我是否正确使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T23:04:13.607

我相信您的 navigationBar titleTextAttributes 需要像访问器一样设置：

```
aboutNavController.navigationBar.titleTextAttributes = {UITextAttributeFont => titleFont} 
```

苹果文档参考：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html)

# javascript - 对站点之间的 postMessage 感到困惑

> ID：13580158
> 
> 赞同：1
> 
> 时间：2012-11-27T08:32:58.393
> 
> 标签：javascript, dom-events, cross-domain, messaging

我上传了一个包含以下部分的 HTML：

```
<script>
window.onload = function(){
  window.addEventListener('message', receiver, false);
}

function receiver(event) {
  if (event.origin == 'http://documentA.com') {
    if (event.data == 'Hello B') {
      //event.source.postMessage('Hello A, how are you?', event.origin);
      alert("Recognized.");
    } else {
      //alert(event.data);
      alert("Unrecognized!");
    }
  }
}
</script> 
```

该文档是可访问的，我可以在浏览器中查看它。然后，我使用 FireBug 打开一个控制台窗口并输入以下调用（如[Wikipedia](http://en.wikipedia.org/wiki/Cross-document_messaging)中所述）。

```
window.postMessage("12345", "http://server:port/Index4.htm"); 
```

结果我变得*不确定*，坦率地说，我不知道这是好事还是坏事。可能很糟糕，特别是因为我没有看到任何*警报*。该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:14:52.990

首先：

您必须将消息发布到 iframe。尝试使用：

```
document.getElementById("yourIFrameID").contentWindow.postMessage() 
```

* * *

* * *

我在 Opera Dragonfly、Firebug 和 IE9 中执行了以下操作，并且没有问题：

```
//Add iframe: <iframe id="teest" src="http://www.dict.cc/?s=annahme">
var frame = document.getElementById("teest") 
```

切换到 iframe 上下文：

```
//Add event listener
window.addEventListener("message", function(ev){ console.log(ev.data); }, false); 
```

回到顶部上下文，发送一些东西：

```
frame.contentWindow.postMessage("foo", "http://www.dict.cc")
//Works. console: "foo"
frame.contentWindow.postMessage("foo", "http://www.dict.cc:80")
//Works. console: "foo"
frame.contentWindow.postMessage("foo", "http://www.dict.cc/?s=annahme")
//Works. console: "foo"
frame.contentWindow.postMessage("foo", "http://dict.cc/?s=annahme")
//Does NOT work. console: Nothing Happened 
```

因此，如果您忘记将正确的子域添加到第二个参数，或者您访问“https”页面但字符串中有“http”，我会看到困难。
尝试删除`if`事件处理程序中的所有 ' 并在使用之前打印出你得到的内容`if`（或者更好地使用 Firebug 或 Dragonfly 进行检查）

# jpa - 如何在 JPA 中持久化实体类型的数组列表

> ID：13580160
> 
> 赞同：19
> 
> 时间：2012-11-27T08:33:02.167
> 
> 标签：jpa, arraylist, entity, persist

如何在 JPA 中持久化实体类型的数组列表？

例如，有一个名为“表”的实体。我正在创建一个数组列表`ArrayList<Table> table = new ArrayList<Table>();` 尝试使用它来持久化它`entityManager.persist(table);`，但它没有用。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-22T05:45:02.110

```
 EntityManagerFactory emf = Persistence.createEntityManagerFactory("TDEMSPU");
        em = emf.createEntityManager();

            em.getTransaction().begin(); 

        List<Enquiry> tempEnqList = tempEnqList();
        for (Iterator<Enquiry> it = tempEnqList.iterator(); it.hasNext();) {
            Enquiry enquiry = it.next();

            em.persist(enquiry);
            em.flush();
            em.clear();
        }

         em.getTransaction().commit(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T08:37:22.433

只需对其进行迭代并一一持久化

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-11-27T09:01:16.570

答案在这里：

[使用 JPA/EJB3 进行批量插入](https://stackoverflow.com/questions/448181/batch-inserts-with-jpa-ejb3/3623222#3623222)

[http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html#batch-direct](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html#batch-direct)

# java - 树不占据整个父组合

> ID：13580162
> 
> 赞同：0
> 
> 时间：2012-11-27T08:33:06.433
> 
> 标签：java, layout, tree, swt

我正在尝试`Tree`在. SWT 树在启动时并没有填满整个 Group 组合，但是一旦我重新调整 SashForm 的大小，它就会填满。我得到了正确的功能，即树占据了整个 Group 组合。谁能帮帮我？`Group``SashForm`

```
 sashForm = new SashForm(parent, SWT.HORIZONTAL | SWT.SMOOTH | SWT.H_SCROLL);
    sashForm.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, false, 1, 1));

    explainStepsGroup = new Group(sashForm, SWT.NONE);
    explainStepsGroup.setText("Explain Steps");
    GridData gd = new GridData(SWT.FILL,SWT.FILL,true,true);
    explainStepsGroup.setLayoutData(gd);
    explainStepsGroup.setLayout(new FillLayout());

    tree = new Tree(explainStepsGroup, SWT.BORDER);
    tree.setLayout(new FillLayout());       
    tree.setHeaderVisible(true);
    tree.setToolTipText("Steps");
    ...
    ...
    void fillTreeItems() {  
    TreeItem rootTreeItem = new TreeItem(tree, SWT.NULL);
    rootTreeItem.setText("Steps");
    rootTreeItem.setExpanded(true); 

    TreeItem stepNumTreeItem = null;
    TreeItem stepTextItem = null;

    stepList = m_explainModel.getStepText();
    Iterator<String> iter = stepList.keySet().iterator();

    while(iter.hasNext()) {
    stepNumTreeItem = new TreeItem(rootTreeItem, SWT.NULL);
    String stepNum = iter.next();
    stepNumTreeItem.setText(stepNum.toString());
    stepNumTreeItem.setExpanded(false); 

    stepTextItem = new TreeItem(stepNumTreeItem, SWT.WRAP);
    stepTextItem.setText(stepList.get(stepNum));
    tree.showItem(stepNumTreeItem); 

    }
    tree.setRedraw(true);
    tree.pack();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:58:16.543

您没有`GridData`在`Tree`. 试试下面的示例代码：

```
public class Dummy
{
    public static void main(String[] args)
    {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setText("Dummy window");
        shell.setLayout(new GridLayout(1, false));

        SashForm sashForm = new SashForm(shell, SWT.HORIZONTAL | SWT.SMOOTH | SWT.H_SCROLL);
        sashForm.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        Group firstGroup = new Group(sashForm, SWT.NONE);
        firstGroup.setText("Upper");
        firstGroup.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
        firstGroup.setLayout(new GridLayout(1, false));

        Tree tree = new Tree(firstGroup, SWT.BORDER);
        tree.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
        tree.setHeaderVisible(true);
        tree.setToolTipText("Steps");

        fillTreeItems(tree);

        Group secondGroup = new Group(sashForm, SWT.NONE);
        secondGroup.setText("Lower");
        secondGroup.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
        secondGroup.setLayout(new GridLayout(1, false));

        Tree secondTree = new Tree(secondGroup, SWT.BORDER);
        secondTree.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
        secondTree.setHeaderVisible(true);
        secondTree.setToolTipText("Steps");

        fillTreeItems(secondTree);

        shell.pack();
        shell.setSize(400, 200);
        shell.open();
        while (!shell.isDisposed())
        {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }

    private static void fillTreeItems(Tree tree)
    {
        TreeItem rootTreeItem = new TreeItem(tree, SWT.NULL);
        rootTreeItem.setText("Steps");
        rootTreeItem.setExpanded(true);

        TreeItem item = new TreeItem(rootTreeItem, SWT.NULL);
        item.setText("item");
        item.setExpanded(false);

        tree.pack();
    }
} 
```

这是启动后的样子：

![在此处输入图像描述](../Images/4d93e88d4f09ce334d0273a2b03127a4.png)

移动后`Sash`：

![在此处输入图像描述](../Images/55dcb2d81346843f537694a20befb282.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:51:24.630

这些问题通常很难弄清楚。您需要回答的第一个问题是：哪个控件没有调整大小？

您假设它是树，但这只是因为您看不到该组。因此，也许树正在填充组，但组没有填充窗扇。

首先要做的是给所有东西一个边框或一个独特的背景颜色。这样，您就可以看到每个控件的位置和大小。

那应该给你一个想法。从代码来看，这一行是没用的：

```
tree.setLayout(new FillLayout()); 
```

树使用它自己的固定布局来布置它的孩子。此外，您没有为 设置布局`SashForm`，因此它不会更改其子项的大小。尝试

```
sashForm.setLayout(new FillLayout()); 
```

[按照这个例子](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/Createasashformwiththreechildren.htm)。

相关：[了解 SWT 中的布局](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)- 旧但仍然正确。

# windows-phone-7 - 在 bing 地图中单击图钉时，如何使按钮出现在图钉上方？

> ID：13580166
> 
> 赞同：0
> 
> 时间：2012-11-27T08:33:45.260
> 
> 标签：windows-phone-7, button, bing-maps, pushpin

它应该是这样的。单击图钉时。

![在此处输入图像描述](../Images/1b38253d5057b4a92bda204769c3ecba.png)

这是我的 XAML。

```
<my:Pushpin Name="pin1" Location="60.285323,24.943501" Template="{StaticResource normalPushPin}" MouseLeftButtonUp="Location1_Popup"/> 
```

这是我的 Location1_Popup 方法。我不知道该写什么。

```
private void Location1_Popup(object sender, MouseButtonEventArgs e)
    {
        MessageBox.Show("Location1 has been clicked");
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:58:13.617

您现在需要使您的弹出窗口在 MouseDown 事件中可见。

例如，请查看源代码。

[http://www.windowsphonegeek.com/upload/articles/WPPinPopup-Alternatives.zip](http://www.windowsphonegeek.com/upload/articles/WPPinPopup-Alternatives.zip)

![在此处输入图像描述](../Images/5fdb61b7d525932449f71462fbe3860e.png)

```
private void Location1_Popup(object sender, MouseButtonEventArgs e)
    {
        BlackRegionWithContent.Visible = Visibility.Visible;
    } 
```

# javascript - 在 JQM 中动态更改 data-iconpos

> ID：13580168
> 
> 赞同：0
> 
> 时间：2012-11-27T08:34:01.810
> 
> 标签：javascript, jquery, jquery-mobile

我正在制作一个 jQuery Mobile 应用程序。我希望能够在另一个文件的函数中设置导航栏的属性。这意味着，我想通过 .js 文件中的一个函数来更改许多 html 文件中的导航栏属性。

我试图在页面创建中更改类，但它对我不起作用：

```
$('div[data-role$="navbar"]').bind('pagecreate', function(){
    div=this;
    alert(div.class);
    div.setAttribute("class","ui-btn ui-btn-inline ui-btn-icon-left ui-btn-up-a");
} 
```

你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:43:44.407

当您使用 jQuery 时，为什么不让自己更轻松并在处理程序中使用它呢？

```
$('div[data-role$="navbar"]').bind('pagecreate', function(){
  var $this = $(this);
  alert( $this.attr('class') );
  $this.attr('class','ui-btn ui-btn-inline ui-btn-icon-left ui-btn-up-a');

  //Possibly you mean ...
  //$this.addClass('ui-btn ui-btn-inline ui-btn-icon-left ui-btn-up-a');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:12:52.413

[这](http://jsfiddle.net/Gajotres/8ES65/)是给你的一个例子，这是一个代码：

```
$('div:jqmData(role="page")').live('pagebeforeshow',function(){
    $('div[data-role$="navbar"] ul li a span span').addClass('new-class');
}); 
```

此行将为每个页面执行：

```
$('div:jqmData(role="page")').live('pagebeforeshow',function(){ 
```

例如，此行将更改导航栏文本的颜色：

```
$('div[data-role$="navbar"] ul li a span span').addClass('new-class'); 
```

这部分 od 代码可以在我的 jsFiddle 示例底部找到（HTML 部分）

# php - 从 sql 查询创建一个 javascript 数组

> ID：13580169
> 
> 赞同：0
> 
> 时间：2012-11-27T08:34:02.583
> 
> 标签：php, javascript, sql, amcharts

其实我的目标是用库amchart创建图表来创建图表，代码是提供类型：

```
var chartData = [{
  date: new Date(2012, 0, 1),
  distance: 227,
  townName: "New York",
  townName2: "New York",
  townSize: 25,
  latitude: 40.71,
  duration: 408
}] 
```

我有一个 sql 查询选择我要显示的结果

```
$test="SELECT dat,SDCCH_Drop, SDCCH_Drop_Rate ,TCH_Assign_unsuccess,
   TCH_Assign_unsuccess_Rate, Call_Setup_Success_Rate
 FROM graph
 WHERE dat BETWEEN '$date_begin' AND '$date_fin' AND nomcel='$cell'";
$te = mysql_query($test)OR DIE("Erreur sur la requeteee");
$gra = array();
$ch1="";
while ($row = mysql_fetch_array($te)) {
  $ch1=$row['dat'];
  $gra[] = $row;
  print_r($row);
} 
$t=json_encode($gra); 
```

但我看不到结果如何在这个 sql 查询中出现在一个数组中以 davoir：

谁能帮帮我谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:42:38.913

一种方法是运行 SQL 查询，将其作为数组获取，然后通过 JSON 返回结果。您可以在 MySQL 结果数组上调用 json_ecncode() 来执行此操作。

您需要编写 PHP 代码来运行查询并返回结果，还需要编写 javascript 来将 JSON 响应处理到图表对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:48:41.287

如下更改您的 while 和数组

```
$gra = array();
while ($row = mysql_fetch_assoc($te)) {
 $gra[] = array(
       'dat'=>  $row['dat'],
       'SDCCH_Drop'=>  (int) $row['SDCCH_Drop'],
       'SDCCH_Drop_Rate'=> (float) $row['SDCCH_Drop_Rate']
    );
}
echo json_encode($gra); 
```

# c# - 访问ArrayList c#中的数组元素

> ID：13580179
> 
> 赞同：0
> 
> 时间：2012-11-27T08:34:39.407
> 
> 标签：c#

我有以下问题，当我尝试从另一个数组列表中的数组访问数据时，它显示“无法将索引 [] 应用于‘对象’类型的表达式”。

这是我的代码

```
public void getWaypoints() {
ArrayList potentialWPs = new ArrayList();
potentialWPs.Add(containerWaypoint.GetComponentInChildren(typeof(Transform)));
wayPoints = new ArrayList();

foreach (Transform potentialWP in potentialWPs){
    if(potentialWP.transform != containerWaypoint.transform){
        wayPoints[wayPoints.Count] = new ArrayList(2);
        wayPoints[wayPoints.Count][0] = potentialWP;                    
    }
} 
```

错误显示在“ **wayPoints[wayPoints.Count][0]** ”行中。

任何人都知道为什么会发生此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:43:06.557

由于 ArrayList 是一个非泛型集合类，因此从中检索到的所有项目都是`object`s，并且需要强制转换为它们的真实类型，如下所示：

```
 foreach (Transform potentialWP in potentialWPs){
    if(potentialWP.transform != containerWaypoint.transform){
        wayPoints[wayPoints.Count] = new ArrayList(2);
        ArrayList arr = wayPoints[wayPoint.Count] as ArrayList; <-- THIS
        arr[0] = potentialWP;
    } 
```

需要注意的几个重要事项：

1) 如果您只是简单地创建了新数组并持有对它的引用（`arr`我介绍的变量），然后使用它添加到 wayPoints 并分配给，这将更加简单。

2) ArrayList 确实是一个古老而原始的类。您是否有理由不使用 a`List<Transform>`而不是>？

3）您的代码中有一个错误，因为您正在访问位置 Count 中的 ArayList。长度为 2 的 ArrayList，如果在位置 2 访问，将崩溃 - ArrayList 是从 0 开始的，因此您需要使用 Count - 1 来访问长度为 2 的数组上的最后一个位置 (1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:37:40.250

试试这个`wayPoints[0] = potentialWP;` 由于您已经声明了一个带有 size 的数组列表`wayPoints.Count`，因此您必须正确提及索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:44:43.097

您遇到的主要问题是，通过使用`ArrayList`which 只是对象的集合，没有隐式转换为数组。正如其他人回答的那样，一种方法是将结果转换为数组，之后您可以通过索引访问它。

更好的方法可能是使用`List<T>`可以定义为列表列表的 Generic：

```
List<List<Transform>> waypoints = new List<List<Transform>>(); 
```

这将使您的代码更容易：

```
public void getWaypoints() {
    ArrayList potentialWPs = new ArrayList();
    potentialWPs.Add(containerWaypoint.GetComponentInChildren(typeof(Transform)));
    List<Transform[]> waypoints = new List<Transform[]>();

    foreach (Transform potentialWP in potentialWPs){
        if(potentialWP.transform != containerWaypoint.transform){
            wayPoints.Add( new List<Transform>>(){ potentialWP });                 
        }
    }
} 
```

`waypoints`现在是 的列表的“多维”列表`Transform`。您可以像这样访问任何元素

```
List<Transform> first = waypoints[0]; 
```

或者您可以`Transform`直接访问

```
Transform firstOfFirst = waypoints[0][0]; 
```

或者您可以将另一个添加`Transform`到现有列表中

```
waypoints[0].Add(anotherTransform); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T08:39:03.613

ArrayList 只保存**对象**类型；这就是为什么你得到

```
"cannot apply indexing[] with to an expression of type 'object'" 
```

你需要投

```
wayPoints 
```

到你想要的类型

编辑：

你应该使用

```
List<T> (System.Collections.Generics) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T08:39:47.953

```
 wayPoints[wayPoints.Count] = new ArrayList(2);
        wayPoints[wayPoints.Count][0] = potentialWP; 
```

`wayPoints[wayPoints.Count]`返回一个`object`. 在将其视为 ArrayList 之前，您需要对其进行转换：

```
((ArrayList)wayPoints[wayPoints.Count])[0] = potentialWP; 
```

但是，您不应该使用 ArrayList，因为它已被弃用。请改用列表。

# ruby - 错误：Sequel:Module 的未定义方法“like”

> ID：13580180
> 
> 赞同：0
> 
> 时间：2012-11-27T08:34:41.017
> 
> 标签：ruby, sequel

我收到此错误：

```
Error: undefined method `like' for Sequel:Module 
```

使用：

```
@info = DB[:info].where(Sequel.like(:content, "%#{params[:sc]}%")) if params[:sc] 
```

我在 Sequel 的文档中找到了示例代码：

```
DB[:artists].where(Sequel.like(:name, 'A%')) 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:27:03.033

您正在运行哪个版本的 Sequel？该文档假定为最新版本，因此如果您未使用最新版本，则应升级。

# sencha-touch-2 - Itemtpl 或 Sencha touch 2 中 NestedList 的自定义列表

> ID：13580181
> 
> 赞同：0
> 
> 时间：2012-11-27T08:34:40.970
> 
> 标签：sencha-touch-2

是否可以在嵌套列表的项目中添加图像和按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T05:26:39.003

这可以使用：

```
 listConfig:{
        itemTpl:'<div id="{category_id}"> {img} <!--<h2>{client_category_id}</h2>--!><p>{text}</p></div>'
            } 
```

# php - 在将图像上传到mysql数据库时将图像重命名为用户名

> ID：13580184
> 
> 赞同：-5
> 
> 时间：2012-11-27T08:34:45.253
> 
> 标签：php, mysql, file-rename

在mysql中上传时将图像重命名为用户名

```
$file=$_FILES['image']['tmp_name'];
$image= addslashes(file_get_contents($_FILES['image']['tmp_name']));
$image_name= addslashes($_FILES['image']['name']);

        move_uploaded_file($_FILES["image"]["tmp_name"],"photos_user/" . $_FILES["image"]["name"]);

        $location="photos_user/" . $_FILES["image"]["name"]; 
```

我的用户名是

```
$fname= $_POST['fname']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:38:03.743

只需更换：

```
move_uploaded_file($_FILES["image"]["tmp_name"],"photos_user/" . $_FILES["image"]["name"]); 
```

和：

```
move_uploaded_file($_FILES["image"]["tmp_name"],"photos_user/" . $fname); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:38:44.290

尝试这个：

```
<?php
  $fname = $_POST['fname'];

  $file=$_FILES['image']['tmp_name'];
  $image= addslashes(file_get_contents($_FILES['image']['tmp_name']));
  $image_name= addslashes($_FILES['image']['name']);
  //$location="photos_user/" . $_FILES["image"]["name"];
  move_uploaded_file($_FILES["image"]["tmp_name"],"photos_user/" . $fname.".jpg"); // <--- altered here
?> 
```

# c# - Partialview的HtmlPrefix，去掉点

> ID：13580186
> 
> 赞同：0
> 
> 时间：2012-11-27T08:35:00.083
> 
> 标签：c#, asp.net-mvc-4, partial-views

我创建了一个局部视图，该视图应显示带有复选框的用户列表，因此我可以在各个页面中重用此局部视图。问题是，我无法生成正确的 htmlprefix 输入（我想删除 . 的前缀）

模型：

```
public class CircleEditViewModel
{
    [Key]
    public int CircleId { get; set; }

    [Required]
    [MaxLength(100)]
    public string Name { get; set; }

    public bool IsSystem { get; set; }

    public List<SimpleUserListViewModel> Users { get; set; }
    public CircleEditViewModel()
    {
        Users = new List<SimpleUserListViewModel>();
    }
}
public class SimpleUserListViewModel
{
    public SimpleUserListViewModel()
    {
    }
    public SimpleUserListViewModel(User user)
    {
        this.UserId = user.UserId;
        FullName = user.FullName;
    }
    public int UserId { get; set; }
    public byte[] Picture { get; set; }
    public string FullName { get; set; }
    public bool IsCheckedForAction { get; set; }
} 
```

“主视图”：

```
@model Wims.Website.ViewModels.CircleEditViewModel
<script type="text/javascript">
    $(document).ready(function () {

        $.validator.unobtrusive.parse('form');
    });
</script>

@using (Ajax.BeginForm(Html.ViewContext.RouteData.Values["Action"].ToString(), null, new AjaxOptions { HttpMethod = "POST", OnSuccess = "SaveDone(data)" }, new { id = "editform" }))
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Circle</legend>
        @Html.Label(DateTime.Now.ToString());
    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>
    </fieldset>
    @Html.Partial("~/Views/Shared/_UserList.cshtml", Model.Users, 
        new ViewDataDictionary(Html.ViewDataContainer.ViewData)
            {
                TemplateInfo = new System.Web.Mvc.TemplateInfo { HtmlFieldPrefix = "Users" }
            })

   @Html.GenerateSecureDataControls(model => model.CircleId)
    <input type="submit" value="Save" />
} 
```

部分观点：

```
@model List<Wims.Website.ViewModels.Shared.SimpleUserListViewModel>

@{  
    if (Model != null)
    {
        for (int i = 0; i < Model.Count; i++)
        {
    <div class="userDetail">
        <div>
            <div>
                @Html.CheckBoxFor(model => model[i].IsCheckedForAction)

            </div>
            <div class="iconDiv">
                @Html.Image("~/Content/Images/defaultUser.jpg", Model[i].FullName, null)
            </div>
            <div>
                @Html.TextBoxFor(model => model[i].FullName)
                @Html.HiddenFor(model => model[i].UserId)
            </div>
        </div>

    </div>
    <div style="clear: both"></div>
        }
    }
} 
```

我快到了，输入生成的 id 是

```
id="Users.[0].FullName 
```

有什么办法可以去掉第一个点？我昨天在博客上找到了一些解决方案（我再也找不到了......）但它是针对 MVC3 的，无论如何我都无法让它工作......

谢谢您的帮助！

**编辑：** 也许我应该使用 EditorFor 而不是部分视图： [.NET MVC 4 Strongly typed ViewModel contains Strongly typed Model with EditorFor and EditorTemplate partial view not binding](https://stackoverflow.com/questions/11487197/net-mvc-4-strongly-typed-viewmodel-containing-strongly-typed-model-with-editorf) 今晚检查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:55:41.030

好的，EditorFor 工作得很好。我需要阅读更多关于这个的内容。

# mysql - 当值大于 x 时查询以获取累积时间（以秒为单位）

> ID：13580187
> 
> 赞同：1
> 
> 时间：2012-11-27T08:35:04.103
> 
> 标签：mysql, aggregate-functions

我有一个带有测量结果的简单表格：

```
datetime            | p_power
------------------------------
2012-11-25 19:57:58 |   60  
2012-11-25 19:58:33 |   300  => start  
2012-11-25 19:59:05 |   350  
2012-11-25 19:59:39 |   400  
2012-11-25 20:00:13 |   50   => stop = t1  
2012-11-25 20:02:26 |   50  
2012-11-25 20:02:59 |   340  => start  
2012-11-25 20:04:07 |   310  
2012-11-25 20:06:37 |   60   => stop = t2  
2012-11-25 20:07:02 |   340 
```

当结果超过 200时，如何进行查询以获得累积时间（以秒为单位的`t1`+ `t2`+总和）。`tn``p_power`

预期结果：xxx 秒。

我坚持下去，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:43:15.310

我不确定我是否理解你的正确...

以下查询计算所有大于（或等于）200 的 p_power 的总和

```
Select Sum(p_power) from your_table
Where p_power >= 200; 
```

应该给你 2040（如果我的大脑计算正确的话）

# django - 带有相关额外字段的 django userena 编辑表单

> ID：13580189
> 
> 赞同：2
> 
> 时间：2012-11-27T08:35:12.777
> 
> 标签：django, forms, django-forms, django-userena

我有一些问题需要通过编辑 django-userena 的配置文件来解决。我想使用 EditProfileFormExtra（它是 userena EditProfileForm 的扩展）来编辑 Settings 模型的相关额外字段（选择字段），这些字段与 Accounts 应用程序存在 OneToOne 关系，字段：default_house_system。

保存是可以的，但是 default_house_system 的初始值不起作用，总是显示元组的第一个值。我想这样做而不在 Django-Userena 的原始文件中包含任何代码。

# 楷模：

```
class UserProfile(UserenaBaseProfile):
    user = models.OneToOneField(User,
                            unique=True,
                            verbose_name='user',
                            related_name='user_profile')

    settings = models.OneToOneField(Settings, unique=True, verbose_name="Ustawienia", blank=True, null=True)

    is_virtual = models.BooleanField(default=False)

class Settings(models.Model):
    points = models.IntegerField(default=0)
    default_house_system = models.CharField(choices=HOUSE_SYSTEMS, max_length=24, default="Placidus") 
```

# 用户表格：

```
class EditProfileForm(forms.ModelForm):
""" Base form used for fields that are always required """
    first_name = forms.CharField(label=_(u'First name'),
                             max_length=30,
                             required=False)
    last_name = forms.CharField(label=_(u'Last name'),
                            max_length=30,
                            required=False)

    def __init__(self, *args, **kw):
        super(EditProfileForm, self).__init__(*args, **kw)
        # Put the first and last name at the top
        new_order = self.fields.keyOrder[:-2]
        new_order.insert(0, 'first_name')
        new_order.insert(1, 'last_name')
        self.fields.keyOrder = new_order

    class Meta:
        model = get_profile_model()
        exclude = ['user']

    def save(self, force_insert=False, force_update=False, commit=True):
        profile = super(EditProfileForm, self).save(commit=commit)
        # Save first and last name
        user = profile.user
        user.first_name = self.cleaned_data['first_name']
        user.last_name = self.cleaned_data['last_name']
        user.save() 
```

# 我替换了一个 urls 定义，放入 accounts/urls.py：

```
url(r'^(?P<username>[\.\w]+)/edit/$',
   'userena.views.profile_edit', 
   {'edit_profile_form': EditProfileFormExtra},
   name='userena_profile_edit'), 
```

# ...这是 EditProfileFormExtra 的定义：

```
class EditProfileFormExtra(EditProfileForm):
    default_house_system = forms.ChoiceField(choices=HOUSE_SYSTEMS)

    def __init__(self, *args, **kw):
        super(EditProfileFormExtra, self).__init__(*args, **kw)

        new_order = self.fields.keyOrder[:-1]
        new_order.insert(3, 'default_house_system')
        self.fields.keyOrder = new_order

    class Meta:
        model = get_profile_model()
        fields = ['mugshot', 'default_house_system']

    def save(self, force_insert=False, force_update=False, commit=True):
        profile = super(EditProfileFormExtra, self).save(commit=commit)

        settings_profile = profile.settings
        settings_profile.default_house_system = self.cleaned_data['default_house_system']
        settings_profile.save()

    profile.save()

    return profile 
```

现在**重要**的东西。如果我放：

**'default_house_system'：user.user_profile.settings.default_house_system**

进入 userena/views.py/profile_edit 方法中的 dict （它是基于类的视图）：

```
user_initial = {'first_name': user.first_name,
                'last_name': user.last_name,
                'default_house_system': user.user_profile.settings.default_house_system} 
```

它工作正常！但我不想在 Django-Userena 的原始文件中包含任何代码。

除了将整个 profile_edit 方法从 userena/views.py 复制到我的应用程序帐户/views.py 之外，还有其他方法吗？

我将不胜感激任何提示或建议，谢谢。

# reporting-services - 报表参数表达式中不能使用字段

> ID：13580190
> 
> 赞同：7
> 
> 时间：2012-11-27T08:35:19.233
> 
> 标签：reporting-services, reportingservices-2005

我必须`start_date`根据报告参数设置我的报告。时间戳在数据库查询中计算。

我的表情是这样的：

```
=SWITCH (
    Parameters!report_type.Value = 1,First(Fields!daily_start.Value, "Timestamps")
    ,Parameters!report_type.Value = 2,First(Fields!weekly_start.Value, "Timestamps")
    ,Parameters!report_type.Value = 3,First(Fields!monthly_start.Value, "Timestamps")
) 
```

不幸的是，我收到错误消息：

> 用于报告参数“time_from”的值表达式指的是一个字段。报表参数表达式中不能使用字段

我知道，这是不允许的，因为 SSRS 无法确定调用数据集的顺序。但我认为这并不危险。

所有时间戳都是通过不带参数的查询接收的。该参数`report_type`由用户在生成报告之前选择。

有人可以给我一个解决方法的提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T23:34:02.797

这是解决方法 - 使用 SQL 获取值。

创建一个名为 StartDates 的新数据集：

```
SELECT CASE 
    WHEN @report_type = 1 THEN daily_start
    WHEN @report_type = 2 THEN weekly_start 
    WHEN @report_type = 3 THEN monthly_start
END AS StartDate
FROM MyTable 
```

您已经有了`@report_type`和`@time_from`参数。使用该`@time_from`参数，将其默认值设置为`Get values from a query`使用 StartDates 数据集和值字段 StartDate。

现在，您认为这可能足以使其工作 - 您将此查询作为默认值引用，并且当您更改`@report_type`参数时，其他参数会刷新，但参数中的第一个日期`@time_from`永远不会改变。这是因为刷新发生在可用值查询上，而不是在默认值查询上。

因此，您还需要将可用值查询连接到 StartDates 查询。现在您的查询将在更改时触发，`@report_type`默认值将设置为您选择的适当日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T07:02:01.020

我从查询切换到存储过程并收到此错误。我尝试过的事情：

*   确保我对数据库有足够的权限（您需要 EXEC 权限或 DBO 才能运行 sproc）
*   删除现有参数（然后使用刷新字段刷新/获取正确命名的参数）
*   如果您已指定，请删除存储过程周围的方括号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-01T14:19:11.243

有时，表达式可能会有点冗长。我创建了一个报告代码函数，然后将其用作参数值。

例如，我创建了一个名为“CalculateDateSet”的代码函数，然后将报表参数设置为此表达式：

"=Code.CalculateDateSet(Parameters!Month.Value, Parameters!Year.Value"

# android - 我如何在 Sqlite 中编写此查询？请帮我

> ID：13580198
> 
> 赞同：-4
> 
> 时间：2012-11-27T08:36:03.467
> 
> 标签：android, sqlite

我想用 sqlite 写这个查询，所以请帮帮我.....谢谢大家

```
SELECT d.name_ar, d.name_en,d._id
FROM drug_term dt 
INNER JOIN generic_drug d ON d._id = dt.drug_id
WHERE dt.term_id = 1047
AND d.type =1 
GROUP BY d._id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:39:07.680

您必须在 GROUP BY 中提供所有这些字段“d.name_ar, d.name_en,d._id”

```
SELECT d.name_ar, d.name_en,d._id
FROM drug_term dt 
INNER JOIN generic_drug d ON d._id = dt.drug_id
WHERE dt.term_id = 1047
AND d.type =1 
GROUP BY d.name_ar, d.name_en,d._id 
```

# mysql - 在 Windows 中使用类似配置签名的 linux 启动 Xampp Mysql 时出现错误 1067

> ID：13580200
> 
> 赞同：0
> 
> 时间：2012-11-27T08:36:41.310
> 
> 标签：mysql, xampp, startup-error

我说“类似 Linux 的配​​置签名”，这意味着我正在尝试在 Windows 中运行 Mysql，但 mysql 错误显示类似 linux 的文件路径。

我是 Xampp 的新手，我不知道它是如何工作的。我只是从 Xampp 控制面板运行了 xampp 设置工具。

我尝试用我的便携式硬盘携带 Xampp 并在便携式模式下设置 xampp。它在我自己的计算机上工作，但在所有其他计算机上，Mysql 没有以错误 1067 启动。我找到了这个控制台输出。

即使在我的本地计算机中，当我第一次尝试设置 Xampp 时，我必须将整个 Xampp 目录放入本地 C：驱动器，设置后我必须将文件夹从 C：复制到我的外部硬盘。然后设置再次。如果我第一次从硬盘安装，即使在我自己的本地计算机上也会出现上述错误。**“我的外置硬盘有一个 ext4 分区和 NTFS 分区。”** 我认为出现错误是因为 Xampp 设置工具找到了 ext4 分区，并且当它第一次在我的外部硬盘中运行时它认为我的操作系统是 Linux。

```
E:\xampp\mysql\bin>mysqld --console
121127 14:36:42 [Warning] Can't create test file \usr\local\mysql\data\W39.lower
-test
121127 14:36:42 [Warning] Can't create test file \usr\local\mysql\data\W39.lower
-test
mysqld: Can't change dir to '\usr\local\\mysql\data\' (Errcode: 2)
121127 14:36:42 [ERROR] Aborting

121127 14:36:42 [Note] mysqld: Shutdown complete 
```

# html - 为什么“浮动”属性会改变 HTML 中按钮的大小？

> ID：13580203
> 
> 赞同：1
> 
> 时间：2012-11-27T08:36:47.347
> 
> 标签：html, css

HTML 代码：

```
<body background="images/bg1.jpg" >
<header><h1>Sample</h1></header>
<br/><br/><br/>
<span class="button" >
    <a href="in.html" class="button" >
        In &nbsp;&nbsp;&nbsp;<span class="icon"><img border="0" src="images/in.jpg"></span>
    </a>
</span>
<br/><br/>
<span class="button"> 
    <a href="out.html" class="button">
        Out <span class="icon"><img border="0" src="images/out.jpg"></span>
    </a>
</span>

</body> 
```

CSS

```
.button {
float:left;
height:auto;
font-size:25px;
width:06em;
text-align:center;
white-space:nowrap;
}

/*Button link styles*/
.button a:link, .button a:visited {
-webkit-border-radius:10px;
 color:#291919;
 background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#f34f23), to(#cf0014));
 font-weight:bold;
 text-decoration: none;
-webkit-box-shadow:0px 1px 2px #999;
text-shadow:2px 2px 0px #fe6c6c;
border-bottom:1px solid #78000c;
 margin: 0.2em;
 padding:0.2em;
 } 
```

现在，如果我将浮动属性更改为“继承”（标题居中对齐），两个按钮都会居中，但它们的形状不是恒定的。这是为什么？我怎样才能让它保持不变？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:45:46.513

**`clear : left`在你的**添加到这个**`.button`**

 ****像这样**

```
.button {
clear:left;
} 
```

***[现场演示](http://tinkerbin.com/3UrWsCvy)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:40:52.710

您需要指定按钮将呈现为块元素的事实。正如 DCoder 所说，该`<span>`元素默认呈现为内联元素。您可以强制它进入阻止模式：

```
display: block; 
```

看到这个[小提琴](http://jsfiddle.net/c_kick/5beHU/)**

# android - AdMob for Android - 如何获取应用的“adUnitId”？

> ID：13580208
> 
> 赞同：0
> 
> 时间：2012-11-27T08:37:12.883
> 
> 标签：android

我如何获得`ads:adUnitId`？

我在 AdMob 创建了一个帐户，并开始添加我的新应用。问题：我还没有 Android 包 URL，因为很明显，如果没有广告，我的应用还没有准备好发布。

我是否需要采取这种方法：

1.  组成一些adUnitID，
2.  发布应用程序，
3.  获取 Android 包 URL
4.  使用包 URL 完成“添加站点/应用程序”表单
5.  用真实的应用程序重建我的应用程序`adUnitId`并重新发布

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:26:29.267

确实，您没有 Android 包 URL，但您将获得的 URL 遵循以下“规则”：

```
market://details?id=your.package.name 
```

Play Store 链接也是如此，每次都是一样的：

```
play.google.com/store/apps/details?id=your.package.name 
```

因此，即使没有发布您的应用程序，您也知道您的应用程序在发布后将获得哪些链接。

# ruby-on-rails-3 - Rails - 避免关联自动保存

> ID：13580216
> 
> 赞同：0
> 
> 时间：2012-11-27T08:37:40.467
> 
> 标签：ruby-on-rails-3, build, associations

我的模型及其关联是：

```
class Post < ActiveRecord::Base
  has_many :comments
end

class Comment < ActiveRecord::Base
  belongs_to :post
  validates :commenter, :presence => true
end 
```

**案例1：**当我尝试下面的代码时，调用了自动*保存*方法。

```
@post = Post.find(3)
@comments = @post.comments
p @comments #=> []
p @comments.class #=> Array
if @comments.empty?
  3.times do
    @comments << @post.comments.build
 end
end
p @comments.first.errors #=>{:commenter=>["can't be blank"]} 
```

**案例2：**如果我手动将相同的空数组初始化为@comments，则不会调用自动保存。例如，

```
p @comments #=> []
p @comments.class #=> Array
if @comments.empty?
  @comments = []
  p @comments #=> []
  3.times do
    @comments << @post.comments.build
  end
end
p @comments.first.errors #=>{} 
```

避免自动保存的最佳解决方案是什么，请任何人解释为什么上述代码的行为不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:16:21.773

Rails 广泛使用猴子补丁，因此 rails Array 与纯 Ruby 数组不同。（比较输出`irb > [].methods`和`rails c > [].methods`

根据收集 的[文件](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many) `<<`方法`has_many`

> 立即触发更新 sql，而无需等待父对象上的保存或更新调用

因此，Rails 很可能有一个收集事件的“观察者”，并在您尝试添加新对象时触发验证。

在第二个片段中，您使用纯数组（不是`has_many`集合），因此不会触发更新操作。

为避免您根本不需要`<<`的更新操作

```
@post = Post.find(3)
@comments = @post.comments
if @comments.empty?
  3.times do
    @post.comments.build
 end
end
p @comments.size
=> 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:24:10.590

自动保存在 Post 模型中定义。[在此处](http://api.rubyonrails.org/classes/ActiveRecord/AutosaveAssociation.html)阅读有关自动保存的信息。如果我正确理解您的问题，那么定义`:autosave => false`.

# ssl - 托管在不同物理服务器上的子域的通配符 ssl 证书

> ID：13580221
> 
> 赞同：2
> 
> 时间：2012-11-27T08:38:17.703
> 
> 标签：ssl, subdomain, wildcard

我拥有一个域，即 mysite.com，以及子域上的多个站点，即 service1.mysite.com、service2.mysite.com，它们托管在不同的物理服务器上。现在我需要保护所有站点。我可以使用通配符证书还是必须为每个站点购买不同的证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:29:13.750

您可以在所有物理服务器上使用相同的通配符证书。

请注意，在任何服务器上窃取通配符的私钥都会危及与所有服务器的通信。

# android - 获取帖子的评论列表 - Facebook SDK for Android 3.0

> ID：13580229
> 
> 赞同：0
> 
> 时间：2012-11-27T08:38:52.137
> 
> 标签：android, facebook

我查看了 Request.newRestRequest 类，但我不知道要传递给它什么。没有使用这种方法的例子。你能举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:45:41.017

如果您最初的休息请求是`https://api.facebook.com/method/method_name?access_token=oauth_access_token&arg0=value0&arg1=value1`

然后你会这样做：

```
Bundle b = new Bundle();
b.putString("arg0", "value");
b.putString("arg1", "value1");
Request r = Request.newRestRequest(session, "method_name", b, HttpMethod.GET); 
```

但是，如果您正在构建一个新应用程序，您应该真正开始使用 Graph API，因为 Facebook 正在弃用 REST API，如[本页](https://developers.facebook.com/docs/reference/rest/)所述。

# html - 两个不同的 html 模板

> ID：13580230
> 
> 赞同：-2
> 
> 时间：2012-11-27T08:38:52.633
> 
> 标签：html, templates

我正在尝试在一个站点中添加两个 html 模板，一个是正常的，另一个用于移动设备。

我希望当有人使用移动设备看到我的网站时，它会显示移动模板而不是正常的。

可能吗？

我讨论了其他人，他们说安装并行站点，例如：m.atecharea.com 并为常规站点使用配置文件，并将模板文件命名为常规站点。使用这种方法，除了根/目录中未加载的一个数据文件夹之外，一切都正常。他们还建议从此手动更改数据路径：

```
// Data paths
define('MEDIA_DIR', 'data/media'); 
```

对此

```
// Data paths
define('MEDIA_DIR', 'http://m.atecharea.com/data/media'); 
```

它不起作用，它显示这样的数据文件夹链接

[http://atecharea.com/http://m.site.com/data/media](http://atecharea.com/http://m.site.com/data/media)

**它不起作用**

其他人建议通过移动 url 查看时加载 wap 模板而不是默认模板。代码是这样的：

```
if ($HTTP_SERVER_VARS['HTTP_HOST'] == 'm.atecharea.com') {
    $config['template_dir'] = $config['template_dir'] . 'default_wap';
} 
```

它也没有用。

如果有人获得数据文件夹**或**第二个模板文件夹的指南，请从这两个中的任何解决方案解决我的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:40:53.833

这个问题不是很具体，所以合适的答案是“是”。您可以尝试使用用户代理检测浏览器，然后基于此将所需的 HTML 发送回客户端。

还有两种广泛使用的替代方案：

1.  使用自适应/响应式布局，这意味着一种布局可以适应任何屏幕
2.  为移动页面使用独立域

# asp.net - 图片上传，转换错误 InputStream.Read() 方法

> ID：13580232
> 
> 赞同：0
> 
> 时间：2012-11-27T08:39:00.913
> 
> 标签：asp.net, asp.net-mvc

我正在尝试上传图像，使用 HttpPostedFileBase.InputStream.Read() 方法将上传流读取到缓冲区，但它给了我一个转换错误

file.InputStream.Read(imageSize, 0, file.ContentLength);

请在下面找到代码，我错过了什么

```
 @using (Html.BeginForm("Create", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        <fieldset>
            <legend>Upload Image</legend>

            @Html.Label("Title")
            @Html.Editor("fileTitle")<br />
            Upload File: <input type="file" name="test" />
            <p>
                <input type="submit" value="Create" />
            </p>
        </fieldset>
    }

    [HttpPost]
            public ActionResult Create(string fileTitle)
            {
                try
                {
                    HttpPostedFileBase file = Request.Files[0];
                    byte[] imageSize = new byte[file.ContentLength];
                    **file.InputStream.Read(imageSize, 0, file.ContentLength);**
                    Image image = new Image()
                    {
                        Name = file.FileName.Split('\\').Last(),
                        Size = file.ContentLength,
                        Title = fileTitle,
                        ID = 1,
                        Image1 = imageSize
                    };
                    db.Images.AddObject(image);
                    db.SaveChanges();
                    return RedirectToAction("Detail");
                }
                catch(Exception e)
                {
                    ModelState.AddModelError("uploadError", e);
                }
                return View();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:34:21.997

```
@using (Html.BeginForm("Create", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        <fieldset>
            <legend>Upload Image</legend>

            @Html.Label("Title")
            @Html.Editor("fileTitle")<br />
            Upload File: <input type="file" name="test" />
            <p>
                <input type="submit" value="Create" />
            </p>
        </fieldset>
    }

    [HttpPost]
            public ActionResult Create(string fileTitle)
            {
                try
                {
                    HttpPostedFileBase file = Request.Files[0];
                    byte[] imageSize = new byte[file.ContentLength];
                    ***file.InputStream.Read(imageSize, 0, (int)file.ContentLength);***
                    Image image = new Image()
                    {
                        Name = file.FileName.Split('\\').Last(),
                        Size = file.ContentLength,
                        Title = fileTitle,
                        ID = 1,
                        Image1 = imageSize
                    };
                    db.Images.AddObject(image);
                    db.SaveChanges();
                    return RedirectToAction("Detail");
                }
                catch(Exception e)
                {
                    ModelState.AddModelError("uploadError", e);
                }
                return View();
            } 
```

# gnuplot - gnuplot：一个范围内的最大值和最小值

> ID：13580236
> 
> 赞同：20
> 
> 时间：2012-11-27T08:39:11.103
> 
> 标签：gnuplot

我正在绘制一些具有不同 X 范围的数据，我想根据当前 X 范围内数据的最大值和最小值来更改 yrange。当我使用 GPVAL_Y_MAX 和 GPVAL_Y_MIN 时，这些值对应于整个数据的最大值和最小值，而不仅仅是范围内的数据。

例如，我有以下数据：

```
1 3
2 5
3 8
4 20
5 30 
```

我使用以下脚本：

```
plot 'data.txt' u 1:2;
set xrange [1:3];
replot
set xrange [1:5];
replot 
```

在第一个图中，我想在 [3:8] 中设置 yrange，但在第二个图中，yrange 应该是 [3:30]。如果我使用类似的东西

```
set yrange [GPVAL_Y_MIN:GPVAL_Y_MAX] 
```

GPVAL_Y_MIN 和 GPVAL_Y_MAX 具有独立于 xrange 的相同值。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-27T11:52:49.767

您想要的变量是`GPVAL_DATA_Y_MIN`和`GPVAL_DATA_Y_MAX`，它们是在一定范围内绘制的数据的 y-min/max。 `GPVAL_Y_MIN`并且`GPVAL_Y_MAX`通常不太有用，因为它们会告诉您绘图边界的边缘在哪里（通常这些值会稍微超出`GPVAL_DATA...`变量，因为 gnuplot 在数据和绘图边缘之间留下了一点空间）。

要利用这些变量，您必须在 plot 命令中使用范围说明符：

```
plot [1:3] 'data.txt'
set yr [GPVAL_DATA_Y_MIN:GPVAL_DATA_Y_MAX]
replot
... 
```

顺便说一句，`u 1:2`除非您想提醒自己要绘制哪些列，否则规范是多余的，因为将前两列绘制为 x 和 y 是 gnuplot 的默认值。如果您不想重新绘制到相同的输出终端（这在某些终端（如 eps）中没有帮助，其中重新绘制会生成具有相同绘图的第二页），请使用以下命令序列：

```
set terminal unknown
plot [1:3] 'data.txt'
set terminal <actual output terminal here>
set output 'output.trm'
plot [1:3][GPVAL_DATA_Y_MIN:GPVAL_DATA_Y_MAX] 'data.txt' 
```

请注意再次使用范围说明符，这次指定了范围。这比使用指定要紧凑一些`set yrange`，但会产生更长的代码行。

如果您有 gnuplot 4.6.0 或更高版本，则可以利用该`stats`命令来避免重新绘制。该`stats`命令创建了一堆方便的变量

```
stats [1:3] 'data.txt'
plot [1:3][stats_min_y:stats_max_y] 'data.txt' 
```

稍有不同的命令，

```
stats [1:3] 'data.txt'
plot [stats_min_x:stats_max_x][stats_min_y:stats_max_y] 'data.txt' 
```

将根据实际数据所在的位置在 x 方向上填充绘图。例如，如果您在 {(1.1, 3), (2, 4), (2.9,5)} 有数据点，则 x 范围将设置为 [1.1:2.9]。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-03T13:50:30.077

将 yrange 设置为 GPVAL_DATA_Y_MIN:GPVAL_DATA_Y_MAX 的缺点是不使用 gnuplots 自动缩放功能，该功能会将范围扩展到下一个 tic。

因此，在自动绘图中，我更喜欢以下内容

```
f(x)=sin(x)>0.5? 1:-1 #example function

set ytics 0.2
plot  1.01*f(x) # dummy plot to set GPVAL_*
set yrange [GPVAL_Y_MIN:GPVAL_Y_MAX]

plot f(x) # actual plot 
```

当然，这也适用于数据图：

```
plot 'data.csv' u 1:(1.01*$2)
set yrange [GPVAL_Y_MIN:GPVAL_Y_MAX]
plot 'data.csv' u 1:2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-07T15:03:17.117

我用它来定义一个函数的 x 范围

```
plot [0:5] sin(10*x) + cos(3*x) 
```

此外，您可以在绘图之前设置范围

```
set xrange [0:5]
plot sin(10*x) + cos(3*x) 
```

[![在此处输入图像描述](../Images/ede2d20781f9ee08ff11526b1a0658d4.png)](https://i.stack.imgur.com/z1T5b.png)

# mysql - 我需要从 MySQL 表中选择特定的日期范围，忽略年份

> ID：13580241
> 
> 赞同：3
> 
> 时间：2012-11-27T08:39:35.800
> 
> 标签：mysql, algorithm, date, range

这是我的问题。我的系统以您通常的 DATETIME 格式存储日期和时间：

```
'YYYY-MM-DD HH:MM:SS' 
```

这是我遇到的麻烦：

我需要选择所有具有这种格式的日期字段的联系人：

```
'XXXX-12-02 23:59:59' and every other date 7 days leading up to it. 
```

例如，我需要获取所有这些带有这些日期的行作为响应：

```
1965-12-02
1985-11-28
1990-12-01 
```

这可能吗？如果可以，您可以给我任何帮助或提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:49:32.963

最简单的部分：要找到同一天和同一个月的任何日期：

```
SELECT .... FROM .... WHERE 
   month(timefield)=month('2012-12-02 23:59:59') 
   and day(timefield) = day('2012-12-02 23:59:59) 
```

一种混乱的方式，但它会（主要）工作是做一个

```
SELECT .... FROM .... WHERE 
   (month(timefield)=month('2012-12-02 23:59:59') 
   and day(timefield) = day('2012-12-02 23:59:59')) or
   (month(timefield)=month(date_sub('2012-12-02 23:59:59' interval 1)) 
   and day(timefield) = day(date_sub('2012-12-02 23:59:59') interval 1)) or
   (month(timefield)=month(date_sub('2012-12-02 23:59:59' interval 2)) 
   and day(timefield) = day(date_sub('2012-12-02 23:59:59') interval 2)) or 
```

等等...

然后问题来了：闰年怎么办...我对此没有任何好的解决方案...如果您的种子日期是 2012 年 3 月 5 日，那么您只会回到 2012 年 2 月 28 日，但我想您希望数据回到 2011 年 2 月 27 日... 一种可能的解决方案是确保您始终将日期标准化为闰年，取回 8 天的日期并丢弃您不想要的前端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:44:13.997

您可以`DATETIME`使用以下函数获取变量的特定部分。

*   `DAY(your_DATETIME_Variable)`--> 以整数形式获取日期
*   `MONTH(your_DATETIME_Variable)`--> 获取月份为整数
*   `YEAR(your_DATETIME_Variable)`--> 将年份作为整数

# c# - ASP.Net WebApi：如何在运行时加载其他控制器

> ID：13580243
> 
> 赞同：9
> 
> 时间：2012-11-27T08:39:46.580
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

在我的 Asp.Net MVC 4 WebApi 应用程序中，我想稍后动态加载其他 WebApiControllers（在 WebApi 初始化之后），它们位于单独的程序集中。此外，我想在运行时为这些控制器添加路由。

我想知道，这是否可行。

我的目标是构建一个网络应用程序，我可以在其中上传控制器（已编译的程序集），并且控制器将自动托管在此应用程序中。

我已经尝试通过实现自己的 AssemblyResolver 类来实现这一点，但是（据我所知），AssemblyResolver 在初始化阶段加载一次。

可能有一个“重新加载”所有控制器的选项。

任何帮助将不胜感激！

马吕斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:50:38.153

感谢您的回答。

我想通了，这是不可能的，因为所有的控制器都被加载一次并且一直被缓存。

[请参阅DefaultHttpControllerSelector](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/0c48eef64d80#src%2fSystem.Web.Http%2fDispatcher%2fDefaultHttpControllerSelector.cs)方法 InitializeControllerInfoCache(...)中的 HttpControllerTypeCache 。

为了进行类型缓存刷新，我必须实现一个自定义 HttpControllerSelector。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:59:03.147

您可以使用 Web API 依赖解析器：

```
public class WebApiApplication : System.Web.HttpApplication
{
    void ConfigureApi(HttpConfiguration config)
    {
        config.DependencyResolver = new MyDependencyResolver();
    }

    protected void Application_Start()
    {
        ConfigureApi(GlobalConfiguration.Configuration);

        // ...
    }
} 
```

[使用 Web API 依赖解析器](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T19:32:02.750

MEF 是要走的路。您将需要创建自己的控制器工厂来替换默认的控制器工厂。看看这个链接~~[http://www.fidelitydesign.net/?p=104](http://www.fidelitydesign.net/?p=104)~~

*编辑：死链接，见 Wayback* [https://web.archive.org/web/20130619191423/http://www.fidelitydesign.net/?p=104](https://web.archive.org/web/20130619191423/http://www.fidelitydesign.net/?p=104)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T08:51:31.327

我认为你需要看看这个 [http://haacked.com/archive/2010/01/17/editable-routes.aspx](http://haacked.com/archive/2010/01/17/editable-routes.aspx)作为起点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T14:11:15.107

例如，如果在 Global.asax 中您将所有程序集加载到特定文件夹中，然后查找实现特定接口的类，该怎么办？

void RegisterControllers(RouteCollection 路由);

创建一个实例，然后传入您的路由集合。然后，这将在网站启动期间注册其他路线。

# c# - 将值数组发送到 Oracle 过程以在 WHERE IN 子句中使用

> ID：13580245
> 
> 赞同：2
> 
> 时间：2012-11-27T08:39:48.017
> 
> 标签：c#, asp.net, oracle, csv, stringtokenizer

我在 Oracle 中有一个存储过程，如下所示：

```
CREATE PROCEDURE MY_TEST_PROC(
  CUR OUT SYS_REFCURSOR,
  PARAM_THAT_WILL_BE _USED_INSIDE_WHERE_IN
)
AS
BEGIN
  OPEN CUR FOR 
    SELECT * 
      FROM MY_TABLE 
     WHERE COL1 IN (here I want to put values received from C#)
END; 
```

在 ASP.NET 应用程序端，我有一个带有多个选项的选择元素。我想在我的 WHERE 子句中使用这些列表项。我知道我可以在我的存储过程中有一个 VARCHAR2 输入参数，从列表项中创建一个逗号分隔的字符串，然后将其发送到过程。这样做有两个问题：

1.  我让我的网站容易受到 SQL 注入的攻击
2.  在我的存储过程中，我必须使用我想避免的 EXECUTE ('SELECT ...') 模式。

如何将这些列表项发送到存储过程并在 WHERE IN 子句中使用它们？我正在使用 ODP.NET，听说过 UDT，但不知道如何使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T09:04:02.293

一种方法是使用 a`VARRAY`作为`PARAM_THAT_WILL_BE _USED_INSIDE_WHERE_IN` 参数并按照[此处](https://stackoverflow.com/a/8477193/1083652)
所述使用它 ，但我不确定如何从 c# 调用它。

另一种方法是使用 varchar2 和 csv，如您在问题中所述，但没有动态 sql，如下所示：

```
CREATE PROCEDURE MY_TEST_PROC(
  CUR OUT SYS_REFCURSOR,
  PARAM_THAT_WILL_BE varchar2)
AS
BEGIN
  OPEN CUR FOR 
    SELECT * 
      FROM MY_TABLE 
     WHERE COL1 IN (
        select regexp_substr(PARAM_THAT_WILL_BE, '[^,]+',1,level) p
          from dual t
       connect by level <= regexp_count(PARAM_THAT_WILL_BE, ',') + 1
)
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:18:12.623

您可以将此逗号分隔的输入参数添加为 varchar() 并使用以下 where 语句：

```
where (','||PARAM_THAT_WILL_BE||',' like '%,'||COL1||',%') 
```

例如，如果`PARAM_THAT_WILL_BE='2,3,4,5'`我们`col1=3`得到：

```
where (',2,3,4,5,' like '%,3,%') 
```

如果 COL1 值在此列表中，则为 TRUE。在这里，您不使用动态查询，因此您可以避免关注 1) 和 2)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-30T08:28:34.917

对于这种情况，我这样使用

`CREATE PROCEDURE MY_TEST_PROC(CUR OUT SYS_REFCURSOR,A in VARCHAR2 ) AS BEGIN OPEN CUR FOR SELECT * FROM MY_TABLE WHERE COL1 IN (SELECT REGEXP_SUBSTR(**A**,'[^,]+', 1, LEVEL) FROM DUAL CONNECT BY REGEXP_SUBSTR(**A**, '[^,]+', 1, LEVEL) IS NOT NULL) END;`

A 值应包含打开和关闭的 qutoes(')。例如：'512,456,4564' 如果它有一个值 '512' 像这样

# python - XML 到 csv(-like) 格式

> ID：13580246
> 
> 赞同：1
> 
> 时间：2012-11-27T08:39:50.660
> 
> 标签：python, xml, csv

我有一个 XML 文件，我想将其转换/导出为 csv(-like) 格式。

例子：

```
<root>
  <child>
    <Name>John</Name>
    <Surname>Doe</Surname>
    <Name>George</Name>
    <Surname>Washington</Surname>
  </child>
</root> 
```

ATM 我这样做（打印用于调试，尚未完成）：

```
#!/bin/python env

import xml.etree.ElementTree as etree

tree = etree.parse('./foobar.xml')
root = tree.getroot()

elements = ('Name', 'Surname')

for i in elements:
  for i in root.iter(i):
    print(i.text) 
```

**电流输出：**

```
John
George
Doe
Washington 
```

**我想得到的结果：**

```
John, Doe
George, Washington 
```

任何人都可以在这里帮我一把吗？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T08:56:19.057

使用 xpath 和 zip()。

```
#!python

import xml.etree.ElementTree as etree

root = etree.parse('./foobar.xml').getroot()

for a in zip(root.findall("child/Name"), root.findall("child/Surname")):
    print(", ".join([x.text for x in a])) 
```

如果您想使用元素名称调用灵活。

```
#!python

import xml.etree.ElementTree as etree

child = etree.parse('./foobar.xml').getroot().find('child')

elements = ('Name', 'Surname')

for a in zip(*[child.findall(x) for x in elements]):
  print(", ".join([x.text for x in a])) 
```

# html5-canvas - 圆形旋转矩形碰撞检测

> ID：13580249
> 
> 赞同：2
> 
> 时间：2012-11-27T08:39:55.153
> 
> 标签：html5-canvas, collision-detection

我正在尝试通过遵循此[http://www.migapro.com/circle-and-rotated-rectangle-collision-detection/来实现旋转矩形和圆形之间的碰撞检测](http://www.migapro.com/circle-and-rotated-rectangle-collision-detection/)

我在 jsfiddle 中添加了代码[http://jsfiddle.net/Z6KSX/2/](http://jsfiddle.net/Z6KSX/2/)。

我在这里想念什么？

 `````
function check_coll ( circle_x,circle_y, rect_x, rect_y, rect_width, rect_height, rect_angle) 
   {

    // Rotate circle's center point back
    var rect_centerX = rect_x /2 ;
    var rect_centerY = rect_y /2 ;

    var cx = (Math.cos(rect_angle) * (circle_x - rect_centerX)) - (Math.sin(rect_angle) * (circle_y - rect_centerY)) + rect_centerX;
    var cy = (Math.sin(rect_angle) * (circle_x - rect_centerX)) + (Math.cos(rect_angle) * (circle_y - rect_centerY)) + rect_centerY;

    // Closest point
    var x, y;

    // Find the unrotated closest x point from center of unrotated circle
    if (cx < rect_x) {
        x = rect_x;
    }
    else if (cx > rect_x + rect_width){
        x = rect_x + rect_width;
    }
    else{
        x = cx;
     }

    // Find the unrotated closest y point from center of unrotated circle
    if (cy < rect_y){
        y = rect_y;
    }
    else if (cy > rect_y + rect_height) {
        y = rect_y + rect_height;
    }
    else {
        y = cy;
     }
    // Determine collision
    var collision = false;

    var c_radius = 5;
    var distance = findDistance(cx, cy, x, y);

    if (distance < c_radius) {
        collision = true; // Collision
    }
    else {
        collision = false;
    }
     return collision;
}

function findDistance (x1, y1, x2, y2) {
       var a = Math.abs(x1 - x2);
       var b = Math.abs(y1 - y2);

       var c = Math.sqrt((a * a) + (b * b));
       return c;
} 
````  `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:19:30.423

呵呵，我觉得这很有趣，因为我最近花了很多时间走错路后自己解决了这个问题。

最后我想出了一个办法：

1.）只需将圆心的点旋转矩形旋转的负数。现在该点与矩形“对齐”（在矩形相对坐标空间中）。

2.) 求解圆形与 AABB。我解决它的方式在最接近圆心的矩形上给了我一个点。

3.) 将结果点从矩形旋转的正数旋转。像往常一样继续求解（检查该点与圆心之间的距离是否在圆的半径内）

快速浏览一下您的代码，似乎您正在做同样的事情，但错过了最后一步？我建议在第 2 步中的矩形上画出你的点，以准确查看它在哪里有助于调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:30:36.770

我能够弄清楚这一点。代码中的问题是，我使用了错误的半径并且错过了 rect_x 和 rect_y 的中心

```
 var rect_centerX = rect_x + (rect_width / 2);
   var rect_centerY = rect_y + (rect_height /2); 
```

在处理画布上的旋转时，我们需要将平移值添加到 createrect 中使用的相应 x 和 y 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-15T16:33:53.860

我也将此代码用于我的项目并且它正在工作。您唯一需要做的就是使用**-angle**而不是**angle**。

[这是我的代码链接](https://jsfiddle.net/Davit_Hakobyan2001/b8o73rau/1/)

```
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const rectX = 100;
const rectY = 100;
const rectWidth = 200;
const rectHeight = 100;
const circleRadius = 2;
const rectMidPointX = rectX + rectWidth / 2;
const rectMidPointY = rectY + rectHeight / 2;
const angle = Math.PI / 4;
let circleX;
let circleY;

canvas.addEventListener('mousemove', (e) => {
  circleX = e.clientX;
  circleY = e.clientY;

  ctx.save();
  ctx.beginPath();
  ctx.fillStyle = '#fff';
  ctx.arc(circleX, circleY, circleRadius, 0, 2 * Math.PI);
  ctx.fill();
  ctx.stroke();
  ctx.restore();
    calculateIntersection();
})

ctx.save();

//ctx.fillRect(100, 100, 100, 100);
ctx.strokeStyle = 'black';
ctx.translate(rectMidPointX, rectMidPointY);
ctx.rotate(angle);
ctx.translate(-rectMidPointX, -rectMidPointY);
ctx.strokeRect(rectX, rectY, rectWidth, rectHeight);
ctx.restore();

// Determine collision
let collision = false;

const findDistance = (fromX, fromY, toX, toY) => {
  const a = Math.abs(fromX - toX);
  const b = Math.abs(fromY - toY);

  return Math.sqrt((a * a) + (b * b));
};

function calculateIntersection() {
  // Rotate circle's center point back
  const unrotatedCircleX = Math.cos(-angle) * (circleX - rectMidPointX) -
    Math.sin(-angle) * (circleY - rectMidPointY) + rectMidPointX;
  const unrotatedCircleY = Math.sin(-angle) * (circleX - rectMidPointX) +
    Math.cos(-angle) * (circleY - rectMidPointY) + rectMidPointY;

  // Closest point in the rectangle to the center of circle rotated backwards(unrotated)
  let closestX, closestY;

  // Find the unrotated closest x point from center of unrotated circle
  if (unrotatedCircleX < rectX)
    closestX = rectX;
  else if (unrotatedCircleX > rectX + rectWidth)
    closestX = rectX + rectWidth;
  else
    closestX = unrotatedCircleX;

  // Find the unrotated closest y point from center of unrotated circle
  if (unrotatedCircleY < rectY)
    closestY = rectY;
  else if (unrotatedCircleY > rectY + rectHeight)
    closestY = rectY + rectHeight;
  else
    closestY = unrotatedCircleY;

  const distance = findDistance(unrotatedCircleX, unrotatedCircleY, closestX, closestY);
  if (distance < circleRadius)
    collision = true; // Collision
  else
    collision = false;

  console.log('collision', collision);
}
```

```
<canvas id="canvas" width="400px" height="400px" />
`````

# c# - 如何使用 asp.net 从客户端读取 ms-access 数据库文件

> ID：13580254
> 
> 赞同：0
> 
> 时间：2012-11-27T08:40:08.287
> 
> 标签：c#, asp.net, sql-server, ms-access

我正在创建一个网站（asp.net 和 C#），我需要从用户从他的电脑中选择的访问数据库（具有文件扩展名：.mdb 或 accdb）中读取一些数据，然后使用这些数据来更新 SQL 服务器数据库它。

那么如何在客户端从访问数据库中读取数据并选择其中的一些（在一些 if 语句下）来更新 SQL Server 数据库中的一些记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:07:41.340

出于安全原因，从 HTML/ASPX/ActiveX 级别访问客户端文件系统不是最佳实践。在我看来，创建一个客户端 Visual Studio Windows 窗体解决方案（而不是 HTML/ASPX 页面）可以检索记录并将它们提交到您的 web 应用程序中的 asp.net 服务 (WCF) 似乎是最好的选择。

如果你“真的”需要这个功能，你总是可以创建一个 ActiveX 组件并将它嵌入到你的 HTML/ASPX 页面中。但是，出于浏览器兼容性、浏览器安全设置、一般安全性等很多原因，我不会推荐这个。

*旁注：您也可以使用文件上传器组件上传您的数据库，然后在服务器端访问您的数据库，然后再次删除数据库文件。安全明智的解决方案不是雷鸣般的解决方案，您首先要上传“所有数据”，而不是像请求的那样首先上传几条记录。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:01:21.360

您在 page_load 事件中调用此方法

```
public void RemoveTemporaryFiles() {
        string pathTemp = "d:\\uploads\\";
        if ((pathTemp.Length > 0) && (Directory.Exists(pathTemp))) {
            foreach (string file in Directory.GetFiles(pathTemp)) {
                try {
                    FileInfo fi = new FileInfo(file);
                    if (fi.CreationTime < DateTime.Now.AddHours(-24)) {
                        File.Delete(file);
                    }
                } catch (Exception) { }
            }
        }
    } 
```

# android - android从后台线程更改UI - 为什么它工作？

> ID：13580258
> 
> 赞同：0
> 
> 时间：2012-11-27T08:40:16.383
> 
> 标签：android, views, background-process

如果视图的可见性已消失，是否会在后台线程中更改文本、背景资源并在其中膨胀某些视图的应用程序崩溃？我已经用两个按钮进行了一些测试，一个可见，一个消失，如果我在后台线程中更改可见的文本，它会崩溃，当我用 GONE 可见性更改按钮的文本时，它没有崩溃. 有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:52:35.183

好的，我有东西给你。

**事件处理和线程**

一个视图的基本循环如下：

1.  一个事件进来并被分派到适当的视图。视图处理事件并通知任何侦听器。

2.  如果在处理事件的过程中，视图的边界可能需要改变，视图会调用`requestLayout()`.

3.  同样，如果在处理事件的过程中可能需要更改视图的外观，视图将调用`invalidate()`.

4.  如果调用了其中一个`requestLayout()`，`invalidate()`框架将负责测量、布局和绘制适当的树。

**注意：**整个视图树是单线程的。在任何视图上调用任何方法时，您必须始终在 UI 线程上。如果您在其他线程上工作并希望从该线程更新视图的状态，则应该使用 Handler。

你可以在这里找到更多[http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)。

在您的情况下，您的视图已经消失，所以我认为它没有附加到视图树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:44:41.117

你必须创建一个处理程序！
在该处理程序中放置您的代码以更新您的 UI，并在线程中调用处理程序！
你永远不应该直接用任何语言从线程更新 UI！这是编程中的一个大错误！

创建处理程序的示例：

```
static Handler updater1 = new Handler() {
@Override
public void handleMessage(Message msg) {
   //your code to update the UI
   }
}; 
```

从线程调用处理程序的示例：

```
updater1.sendEmptyMessage(0); 
```

从线程中更改文本的行为在所有语言中都可能不同！但你永远不应该这样做，这是一个很大的错误！
也许当您尝试更新可见性为“GONE”的按钮上的文本时，它只是不起作用！但你看不到！

# javascript - 用于在文本框中允许多个电话号码的 Javascript 正则表达式

> ID：13580261
> 
> 赞同：0
> 
> 时间：2012-11-27T08:40:32.647
> 
> 标签：javascript, regex

我有一个文本框，我希望用户在其中提供多个手机号码，每个号码应该只有 10 位数字，并且应该用逗号分隔。除了逗号之外，任何特殊字符都不应被允许甚至空格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T08:44:54.113

我假设您可以弄清楚如何从文本框中获取值。

这是一个将进行数字验证的正则表达式：

```
/^(\d{10}(,\d{10})*)?$/ 
```

这将允许该字段为空白，但如果输入内容，则必须是一个或多个用逗号分隔的 10 位数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:48:07.853

与其为整个事物找到一个正则表达式，您可以将其拆分并为每个段测试一个表达式，丢弃坏的表达式并将事物重新缝合在一起。这样你理论上可以匹配数百个电话号码:)

```
var numbers = 'aaa,456,789'.split(',').filter(function(item) {
    return /^\d{10}$/.test(item)
});

if (numbers.length > 2) {
    // too many numbers?
} else if (!numbers.length) {
    // no numbers?
}

// this will give you back a comma separated list in a string
// numbers.join(',') 
```

请注意，这[`Array.filter()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)可能不适用于所有~~邪恶~~的浏览器，因此您必须为此找到[合适的替代方案](http://www.devcurry.com/2011/02/filter-array-using-javascript.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:42:07.243

你可以这样做

```
/^\d{10}(,\d{10})*$/ 
```

`\d{10}`匹配 10 位数字

`(,\d{10})*`匹配`,`和 10 位数字 0 到多次

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:01:40.907

与其他人类似，但无需重复该`\d{10}`部分

```
^(?:\d{10},?\b)+$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T09:14:34.473

您的电话号码的验证功能。如果该字段为空，则验证为真。

```
function validateNumbers( text ) {
    var numbers = text.split(",");

    for( var i = 0, len = numbers.length; i < len; i++ ) {
         if( !/^\d{10}$/.test( numbers[i] ) ) {
             return false;
         }
    }
    return true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T09:53:59.663

使用以下正则表达式模式之一：

*   `/^(\d{10}(,(?=.))?)+$/`

*   `/^(\d{10}(,(?=.)|$))+/`

*   `/^(\d{10}(,(?=.)|))+$/`

*   `/^\d{10}(,\d{10})*$/`

# silverlight - 如何使用下拉按钮宽度动态更改 ComboBox 下拉菜单宽度？

> ID：13580263
> 
> 赞同：1
> 
> 时间：2012-11-27T08:40:46.937
> 
> 标签：silverlight, combobox, itemspaneltemplate

我的组合框必须在整个窗口宽度上水平延伸。这也解释了组合框下拉按钮和下拉菜单！所以我将组合框的宽度设置为“自动”并将 ItemsPanelTemplate 宽度绑定到组合框宽度。我还为项目使用了文本修剪数据模板。

启动应用程序时，下拉菜单的宽度与组合框按钮的宽度相对应，并且文本修剪也正在工作。在运行时调整窗口大小会导致以下行为：

1.  调整窗口更宽 -> 下拉按钮和下拉菜单正确调整大小（它们在窗口宽度上保持完全拉伸）
2.  调整窗口更小 -> 下拉按钮正确调整大小，下拉菜单不会调整大小比最初更小。因此，当拖动窗口非常小时，下拉菜单被切断。

如何在运行时根据下拉菜单按钮更改下拉菜单宽度？

```
<UserControl.Resources>
    <DataTemplate x:Key="ComboBoxCustomTemplate">
        <TextBlock Text="{Binding Name}" TextTrimming="WordEllipsis"/>
    </DataTemplate>
    <ItemsPanelTemplate x:Key="ComboBoxItemsPanel">
        <VirtualizingStackPanel Orientation="Vertical" x:Name="iptCombo"
                                Width="{Binding ActualWidth, ElementName=radComboBox, Mode=OneWay}" HorizontalAlignment="Stretch" />
    </ItemsPanelTemplate>
</UserControl.Resources>

<Grid x:Name="ImageView" Margin="5">
    <telerik:RadComboBox x:Name="radComboBox" 
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Top" 
                         Width="Auto" 
                         IsEditable="False" 
                         ItemsSource="{Binding Items}"
                         ItemsPanel="{StaticResource ComboBoxItemsPanel}" 
                         ItemTemplate="{StaticResource ComboBoxCustomTemplate}"
                         SelectedIndex="0" >
    </telerik:RadComboBox>
</Grid> 
```

# mongodb - Microsoft 与 MongoDB 同步框架

> ID：13580264
> 
> 赞同：0
> 
> 时间：2012-11-27T08:40:49.713
> 
> 标签：mongodb, frameworks, synchronization, nosql

我们正在开发一个支持与 NoSQL 后端同步的多平台移动应用程序，我们正在研究是否可以使用 Microsoft Sync Framework 4.0 CTP 来解决使用非 Microsoft 后端的所有同步问题，

Sync Framework 4.0 允许任何平台上的多个设备通过公开 oData 服务来实现同步任务，这可以通过使用 Sync Framework Toolkit 来完成，但在服务端使用 SQL Server 或 SQL Azure 作为后端，

我们正在开发的应用程序应该在其服务器端使用 NoSQL 数据库服务器 (MongoDB)，我真的不知道 Microsoft Sync Framework 是否可以与这个 DBMS 一起使用以及应该如何完成，

如果有人通过自定义 Microsoft Sync Framework 提供程序实现了这一点，请分享您的经验、链接或任何有用的东西，

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:57:45.133

MongoDB 没有开箱即用的同步提供程序，因此您必须自己编写。

假设您可以自己编写，则必须修改 Sync Toolkit 服务器端组件以将 SqlSyncProvider 替换为您的自定义 MongoDB 提供程序。

我建议您也检查一下 Sync Framework Toolkit 的许可。如果我没记错的话，客户端组件使用 Apache 许可证，但服务器端使用 MSPL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T19:58:27.947

@Mrinal：

我开始编写一个 Microsoft Sync Framework MongoDB Provider，但后来我意识到我必须实现 Sync Framework 的一个很好的部分，所以我已经删除了 Sync Framework 和 Sync Framework Toolkit 之间的所有依赖项，以便仅使用 Sync Framework Toolkit 的基础架构部分，并且我在内部实现了我自己的同步逻辑，我还更新了客户端以使用我的 NoSQL To SQL ORM 在 Client-SQLite db 上存储数据。

如果你没有时间做所有这些任务，我建议你使用 SyncFoundation，Sync Foundation 是 Sync Framework 的轻量级版本，但如果你必须使用非 microsoft 后端更灵活，sync Foundation 的主页是（[https：/ /github.com/mschoneman/SyncFoundation](https://github.com/mschoneman/SyncFoundation)）。

# android - ImageView 被 GridView 回收

> ID：13580273
> 
> 赞同：2
> 
> 时间：2012-11-27T08:41:04.167
> 
> 标签：android, android-imageview, android-gridview, android-adapter

我有一个`GridView`其中包含一个`Adapter`扩展`ArrayAdapter<Album>`（专辑是从 LastFM API 获得的专辑信息）。

该`Album`信息带有图像的 URL。我异步下载这些图像并将它们`Adapter`与专辑名称一起放入。

但是，当我`GridView`向下和向上滚动时，行会被回收。当我再次给它们充气时，图像被交换了，我真的不知道发生了什么。

我试过将图像存储在一个`HashMap<String, Bitmap>`无济于事的地方。

这是我的代码`Adapter`

```
package com.gigtracker.adapter;

import java.text.DecimalFormat;
import java.util.Collection;
import java.util.HashMap;
import java.util.concurrent.CopyOnWriteArrayList;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.os.AsyncTask;
import android.util.TypedValue;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.garli.lastfmapi.Album;
import com.garli.lastfmapi.Artist;
import com.garli.lastfmapi.ImageSize;
import com.gigtracker.R;
import com.gigtracker.utils.ImageDownloader;

public class AlbumAdapter extends ArrayAdapter<Album> {

    private final ImageDownloader d;
    int playcount;

    @SuppressLint("UseSparseArrays")
    private final HashMap<Integer, View> map = new HashMap<Integer, View>();

    public AlbumAdapter(final Context ctx, final Artist artist) {
        super(ctx, 0);
        d = new ImageDownloader();
        new AsyncTask<Void, Void, Void>() {
            CopyOnWriteArrayList<Album> albums = new CopyOnWriteArrayList<Album>();

            @Override
            protected Void doInBackground(final Void... params) {
                final Collection<Album> albumCollection = Artist
                        .getTopAlbums(artist.getName());
                for (final Album album : albumCollection) {
                    if (playcount < album.getPlaycount()) {
                        playcount = album.getPlaycount();
                    }
                    albums.add(album);
                }

                return null;
            }

            @Override
            protected void onPostExecute(final Void result) {
                for (final Album album : albums) {
                    add(album);
                }
                notifyDataSetChanged();
            }

        }.execute();
    }

    @Override
    public View getView(final int position, View convertView,
            final ViewGroup parent) {
        final TextView tv, tv2;
        final ImageView iv;
        final Album album = getItem(position);
        if (map.get(Integer.valueOf(position)) == null) {
            if (convertView == null) {
                convertView = LayoutInflater.from(getContext()).inflate(
                        R.layout.grid_item, null);
                tv = (TextView) convertView.findViewById(R.id.textViewName);
                iv = (ImageView) convertView.findViewById(R.id.imageView1);
                tv2 = (TextView) convertView.findViewById(R.id.textViewRating);
                @SuppressWarnings("deprecation")
                int buttonDimension = ((Activity) getContext())
                .getWindowManager().getDefaultDisplay().getWidth() / 2;
                final int paddingTotal = (int) TypedValue.applyDimension(
                        TypedValue.COMPLEX_UNIT_DIP, 20, getContext()
                        .getResources().getDisplayMetrics());
                buttonDimension -= paddingTotal;
                iv.getLayoutParams().height = buttonDimension;
                iv.getLayoutParams().width = buttonDimension;
                new AsyncTask<Void, Void, Void>() {
                    Bitmap bmp;

                    @Override
                    protected Void doInBackground(final Void... params) {
                        bmp = d.downloadBitmap(album
                                .getImageURL(ImageSize.LARGE));
                        return null;
                    }

                    @Override
                    protected void onPostExecute(final Void result) {
                        iv.setImageBitmap(bmp);
                    }

                }.execute();

            } else {
                tv = (TextView) convertView.findViewById(R.id.textViewName);
                tv2 = (TextView) convertView.findViewById(R.id.textViewRating);
            }
        } else {
            convertView = map.get(Integer.valueOf(position));
            tv = (TextView) convertView.findViewById(R.id.textViewName);
            tv2 = (TextView) convertView.findViewById(R.id.textViewRating);
        }
        tv.setText(album.getName());
        final float percentage = 100 * (float) album.getPlaycount() / playcount;
        tv2.setText(new DecimalFormat("##0.00").format(percentage) + "%");
        if (percentage >= 90) {
            tv2.setTextColor(0xff99ff33);
        } else if (percentage >= 75) {
            tv2.setTextColor(0xffffff66);
        } else if (percentage >= 50) {
            tv2.setTextColor(0xffff9900);
        } else if (percentage >= 25) {
            tv2.setTextColor(0xffcc6600);
        } else {
            tv2.setTextColor(0xffcc0000);
        }
        return convertView;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:58:56.960

1.  您应该使用模式 ViewHolder：

    ```
    public class NewHolder {
        public ImageView ivIcon;
        public TextView tvTitle;
        public int position;
    } 
    ```

2.  ```
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        NewHolder holder = null;

        UBRNew item = data.get(position);

        if (convertView == null) {
            holder = new NewHolder();
            convertView = inflater.inflate(R.layout.item_new, null);
            holder.tvTitle = (TextView) convertView.findViewById(R.id.tvTitle);
            holder.ivIcon = (ImageView) convertView.findViewById(R.id.ivIcon);
            convertView.setTag(holder);
        } else {
            holder = (NewHolder) convertView.getTag();
        }

    holder.position = position;

    holder.tvTitle.setText(Tools.replaceCharactersInEllipsis(item.getTitle()));
    holder.ivIcon.setImageBitmap(((item.getIcon() == null) ? defaultIconForNew : item.getIcon()));

    if ((!isFling) && (!item.isDownloadedIcon())) {
        new LazyLoadImage(context, 
                          this, 
                          item, 
                          holder, 
                          position, 
                          64,
                          64).execute();
    }

        return convertView;
    } 
    ```

3.

公共类 LazyLoadImage 扩展 AsyncTask {

```
private final String TAG = "LazyLoadThumbnail";

private NewHolder holder = null;
private UBRNew ubrNew = null;
private int position = 0;
private AdapterUbrNews adapter = null;
private int widthIcon = 0;
private int heightIcon = 0;
private DBNews db = null;
private Context context = null;

public LazyLoadImage(Context context,
                     AdapterUbrNews adapter, 
                     UBRNew ubrNew, 
                     NewHolder holder, 
                     int position, 
                     int widthIcon, 
                     int heightIcon) {
    this.adapter = adapter;
    this.holder = holder;
    this.position = position;
    this.ubrNew = ubrNew;
    this.widthIcon = widthIcon;
    this.heightIcon = heightIcon;

    this.ubrNew.setDownloadedIcon(true);

    db = DBNews.getInstance(context);

    this.context = context;
}

@Override
protected Bitmap doInBackground(Void... voids) {
    Bitmap result = null;

    try {
        Bitmap temp = download(ubrNew.getUrlIcon()); 

        if (temp != null) {
            result = Bitmap.createScaledBitmap(temp, widthIcon, heightIcon, true);
        }
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

     return result;
}

@Override
protected void onPostExecute(Bitmap bitmap) {
    if (bitmap != null) {
        ubrNew.setIcon(bitmap);

        if (position == holder.position) {
            holder.ivIcon.setImageBitmap(bitmap);
        } else {
            adapter.notifyDataSetChanged();
        }
    } else {
        ubrNew.setDownloadedIcon(false);
    }
}

private Bitmap download(String urlString) throws MalformedURLException, IOException {
    if ((urlString == null) || (urlString.equals(""))) {
        return null;
    }

    DefaultHttpClient client = new DefaultHttpClient();
    HttpGet getRequest = new HttpGet(urlString);

    try {
        HttpResponse response = client.execute(getRequest);
        final int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode != HttpStatus.SC_OK) {  
            return null;
        }

        final HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream inputStream = null;
            try {
                inputStream = entity.getContent(); 
                return BitmapFactory.decodeStream(inputStream);
            } finally {
                if (inputStream != null) {
                    inputStream.close();  
                }
            }
        }
    } catch (Exception e) {}

    return null;
} 
```

}

片段中 LazyLoadImage 中的所有功能：

```
if (position == holder.position) {
            holder.ivIcon.setImageBitmap(bitmap);
        } else {
            adapter.notifyDataSetChanged();
        } 
```

# drupal - 搜索日志无法追踪 Drupal 7 查看搜索词的记录？

> ID：13580277
> 
> 赞同：2
> 
> 时间：2012-11-27T08:41:09.660
> 
> 标签：drupal, search, views

我正在使用模块-[搜索日志](http://drupal.org/project/search_log)，它很好地应用于默认搜索块，即/search/node/keyword。

但是，当我在视图中使用搜索词过滤器（并向用户公开）时。它无法追踪任何东西。我该如何使用它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:29:26.173

答案是你不能。视图从数据库接收一组结果，然后公开的过滤器允许您过滤这些结果。

# android - 在android中缩小图像

> ID：13580278
> 
> 赞同：0
> 
> 时间：2012-11-27T08:41:12.400
> 
> 标签：android, android-imageview

我正在实现一个应用程序，其中活动显示全屏图像视图。现在我在应用程序的文件目录中下载了一些图像。我想在我正在缩小较大图像的活动中将图像设置为图像视图。使用应用程序 10 到 15 分钟后出现 OutOfMemory 错误。错误在 BitmapFactory 的 decodeFile 中。这是我的代码：

```
public static int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;
}

public static Bitmap decodeSampledBitmapFromFile(String imagePath,
        int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(imagePath, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeFile(imagePath, options);

} 
```

**现在我给 reqHeight = 500 和 reqWidth = 500**

此代码在 Android 指南页面中给出。我有什么遗漏的吗，如果有，请帮助我。我尝试了很多东西，但没有得到任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:48:13.970

改变你 int inSampleSize = 1; int inSampleSize = 2 or 3 并再次测试应用程序，我希望这能解决您的问题。我还建议使用这种技术，尝试延迟加载所有图像下载，这样就不会出现位图和 outOfMemoryError。哟可以有延迟加载 - [https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:03:12.157

尝试使用这个

```
Bitmap resizedbitmap2 = Bitmap.createScaledBitmap(your_bitmap, width, height,
                        true); 
```

它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:50:16.463

如果您将 decodeSampledBitmapFromFile 返回的位图列表存储在某处，则您的应用程序中可能存在内存泄漏。尝试检查内存泄漏并使用[Bitmap.recycle()](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)回收位图并帮助 android 释放内存。

# vb.net - 对文本文件中的每一行做同样的事情

> ID：13580281
> 
> 赞同：0
> 
> 时间：2012-11-27T08:41:28.000
> 
> 标签：vb.net, cad

我正在为名为 Soplid Edge 的 3D CAD 程序制作控制台应用程序。有了这个应用程序，我让 Visul Basic 在 Solid Edge 中绘制曲线和线条。为了制作曲线，我计算点，将存储到数组中的内容使用 4 度方程。现在的问题。我从文本文件中读取数据。但是这个文本文件有不同曲线的多条线。我的代码读完了它们，最后一行包含了数据。我的问题：我怎样才能让我的代码读取第一行，计算点，制作曲线，然后对下一行的数据做同样的事情。

这是我想为文本文件中的每一行重复的代码：

```
 'Dmax(Array)
    Dim listofdata As New ArrayList
    For x = (0.2 * QT) To ((QFACTOR + 0.1) * QT) Step (0.1 * QT)
        listofdata.Add(x)
        y = (((x ^ 4) * C1) + ((x ^ 3) * C2) + ((x ^ 2) * C3) + (x * C4) + C5)
        listofdata.Add(y)
    Next
    Dim dataArray() As Double
    dataArray = DirectCast(listofdata.ToArray(GetType(Double)), Double())

            ' Creating a Curve2d object by using the above defined points
    objCurves.AddByPoints(PointCount:=14, Points:=dataArray) 
```

这就是我阅读文件的方式：

```
Console.Write("Path to file:")
Dim strFileName As String
strFileName = Console.ReadLine
Dim objFS As New FileStream(strFileName, FileMode.Open, FileAccess.Read)
Dim objSR As New StreamReader(objFS) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:14:45.570

使用 .Net Framework 4.x，您可以使用`ReadLines`
[http://msdn.microsoft.com/en-us/library/dd383503.aspx](http://msdn.microsoft.com/en-us/library/dd383503.aspx)

```
 For Each line In IO.File.ReadLines(filename)
        ' do something with the string
    Next 
```

ReadLines 是 String 的 IEnumerable，这意味着它将逐行读取。如果您使用的版本不可用，只需将其替换为 ReadAllLines。ReadAllLines 将一次将所有行读入一个数组，然后您将遍历该数组。如果您的文件*很小*，则两个版本之间没有太大区别，但是如果您使用较大的文件，则第一个文件的内存占用较小，并且在读取第一个文件后开始处理，而不是在读取所有行后开始处理。

# php - 限制 shell_exec 中的 CPU 使用率

> ID：13580282
> 
> 赞同：1
> 
> 时间：2012-11-27T08:41:29.840
> 
> 标签：php, cpu-usage, shell-exec

我需要限制以下命令的 CPU 使用率，因为它使用了 100% 的 CPU。

```
shell_exec("swfrender $swfFile -X 1600 -o $imageFile"); 
```

我发现我可以使用 CPULimit 和 Nice，但我不知道如何设置它们。

谁能给我一个简单的例子来说明如何限制上述 shell_exec 任务的 CPU 使用率？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T08:49:54.250

单看一下`nice`手册页就会发现，您可以使用该命令来启动其他设置了指定 nice 级别的推荐。所以在你的情况下，我建议你简单地试试这个：

```
shell_exec("nice -n 19 swfrender $swfFile -X 1600 -o $imageFile"); 
```

我建议您了解安装在每个类 unix 系统上的手册页。如何阅读它们以及如何在其中找到条目。首先阅读该`man`命令的手册页：`man man`:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:51:53.667

我认为`shell_exec`没有虚拟化功能，没有`shell_exec`选择做这样的事情。

如果你想使用[cpulimit](http://cpulimit.sourceforge.net/)，那没关系，但你需要在 PHP 中做一些技巧，并且你需要释放你的（例如，在你的下一个代码被 php 解释之前，你`shell_exec`不会等待执行结束`swfrender`）。

类似的东西（我假设你的 $swfFile 和 $imageFile 是`escapeshellarg`ized）：

```
$pid = exec("swfrender $swfFile -X 1600 -o $imageFile >/dev/null 2>&1 & echo \$!");
exec("cpulimit --pid $pid --limit 65"); // 65% 
```

# android - 是否有适用于 Android 应用程序的菜单生成器？

> ID：13580283
> 
> 赞同：-1
> 
> 时间：2012-11-27T08:41:43.390
> 
> 标签：android, menu, generator, android-menu

我觉得典型菜单的编码非常无聊和耗时。鉴于大部分工作都是机械的，我想知道那里是否有任何菜单脚手架生成器，我使用 eclipse，我觉得它并没有太多地简化这项工作。

我正在寻找的东西非常简单，一个简单的典型菜单生成器，首选项菜单......不多，XML，基本代码等等。

一个成熟的应用程序生成器可以解决问题，但到目前为止我发现的是粗糙的网络到应用程序生成器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-07T10:38:49.110

我想[这](http://www.menucool.com/drop-down-menu)可能会对你有所帮助。它也与移动设备兼容。

您可以下载基本版本，也可以从 torrent 下载。

# hadoop - 什么是最适合apache hadoop的开发框架？

> ID：13580286
> 
> 赞同：2
> 
> 时间：2012-11-27T08:41:52.027
> 
> 标签：hadoop, mapreduce, spring-data, bigdata

我想开始开发一些基于 apache hadoop 的大数据应用程序。我想知道新手开始开发hadoop的最佳方式是什么。除了 Apache hadoop 核心之外，还有哪些可用的开发框架和工具？

此外，在 Eclipse 上是否有关于 Spring hadoop 开发的好教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:23:38.820

Eclipse 非常适合 hadoop 开发。在我的经验中，您不需要任何特别的 Java 开发环境。当所有守护进程都在一个进程中运行时，Hadoop 具有非常好的本地模式，您可以轻松地调试 MapReduce 代码。在实践中，调试 99% 的问题通常就足够了。
也可以在 Windows 上使用 Eclipse 设置 Hadoop 开发环境。您将需要 cygwing，但除此之外很容易。

# ruby - 关于 Ruby 的简单问题

> ID：13580291
> 
> 赞同：-2
> 
> 时间：2012-11-27T08:42:10.627
> 
> 标签：ruby

我想知道它的作用：

```
File.open(filename,"r").each_file do |line|
  if (!line.strip.empty? and !line.starts_with?(" "))
   ....
   .....
  end 
end 
```

特别是什么`strip`？谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:45:58.320

Strip 从字符串中删除所有前导和尾随空格字符。本质上，您粘贴的代码检查字符串是否包含除空格之外的任何内容，并且第一个符号不是空格。

# jquery - 通过按钮移动选择列表

> ID：13580293
> 
> 赞同：0
> 
> 时间：2012-11-27T08:42:17.167
> 
> 标签：jquery, insert, html-table

此代码用于移动按钮。当我向上或向下按下按钮时，我想移动选定的列表。我只是从另一个站点复制了函数源。我认为这是用于选择框选项。我制作了数组来移动一个选择列表，但是当我调用索引时我无法获得一个值。如何将选择列表向上或向下移动？

```
 function op() {
                    $('div#selReporterList table tr:has(td)').click(function() {
                        $('.selected').removeClass('selected');
                        $('.selected').addClass('deselected');
                        $(this).addClass('selected'); 
                    });  
                };

function menuMove(id,mode) {
    var obj = document.getElementById(id);
        var idx = obj.selectedIndex;
        if (idx < 0) idx = obj.selectedIndex = 0;
        var opt = obj.options[obj.selectedIndex];

        switch (mode) {
            case 'up':
                if (idx > 0) obj.insertBefore(opt, obj.options[idx-1]);
                alert(obj.insertBefore(opt, obj.options[idx-1]).innerHTML);
                break;
            case 'down':
                if (idx < obj.options.length-1) obj.insertBefore(obj.options[idx+1], opt);
                break;
        }
    }

<div id="selReporterList" class="srList">
<div>
<table id="list" cellspacing="0" border="1" style="border-collapse: collapse;">
<tr disabled class="nameMail" bgcolor =#EAEAEA>
<td>reporter</td>
<td>email</td>
</tr>
<tr class="nameMail" onclick='op()'>
<td value='a'>a</td>
<td value='b'>b</td>
</tr>
<tr class="nameMail" onclick='op()'>
<td value='c'>c</td>
<td value='d'>d</td>
</tr>
<tr class="nameMail" onclick='op()'>
<td value='e'>e</td>
<td value='f'>f</td>
</tr>
</table>
<td>
<span class="bu_gray hand"><a href="javascript:menuMove('list','up')">▲&lt;/a></span>
<span class="bu_gray hand"><a href="javascript:menuMove('list','down')">▼&lt;/a></span>
</td>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:17:12.490

我对所有内容进行了一些更改以使其更清晰，我发现很多诸如 div 和 id 之类的东西在解释中令人困惑，无论如何我的示例将帮助您理解，您可以再次添加它们：

CSS：

```
.selected{background: #7f7;} 
```

javascript(jQuery) 我写的是完整的 jQuery，因为它更短、更简洁，而且我喜欢 jQuery：

```
$(document).ready(function(){
    var total = $('#selReporterList tr').size(); // Total rows of the table

    // With not(:first-child) you avoid selecting the table header, instead of having that row disabled, which looked weird.
    $('#selReporterList tr:not(:first-child)').click(function() {
        $('.selected').removeClass('selected');
        $(this).addClass('selected');
    });

    //We bind the click to the move buttons
    //Calling a script from the href is wrong and ugly
    //Normally it should be from onClick="javascript:...
    //But I like to bind it like this because it looks clearer/cleaner to me  
    $('.move').click(function(){
        var obj = $('.selected'); //We get the selected item
        var idx = $(obj).index(); //And its DOM index

        //This is the pretty part, look how easy it is with jQuery:
        if($(this).hasClass('up') && idx > 1) $(obj).prev().before(obj);

        if($(this).hasClass('down')) $(obj).next().after(obj);
    });
}); 
```

html：正如我所说，去掉了很多元素并稍微改变了你的结构，对我来说似乎更清楚，但你可以在理解逻辑后再次修改它。基本上我取出了 div，并将 Id 分配给了表本身，并在脚本中使用了它。并更改了按钮链接中的箭头，如果您保留“移动、向上和向下”类，就像我在脚本中使用它们一样，您可以根据需要使用链接。

```
<table id="selReporterList" cellspacing="0" cellpadding="5" border="1" style="border-collapse: collapse;">
    <tr class="nameMail" bgcolor="#EAEAEA"  >
        <td>reporter</td>
        <td>email</td>
    </tr>
    <tr class="nameMail">
        <td value='a'>a</td>
        <td value='b'>b</td>
    </tr>
    <tr class="nameMail">
        <td value='c'>c</td>
        <td value='d'>d</td>
    </tr>
    <tr class="nameMail">
        <td value='e'>e</td>
        <td value='f'>f</td>
    </tr>
    <tr class="nameMail">
        <td value='g'>g</td>
        <td value='h'>h</td>
    </tr>
    <tr class="nameMail">
        <td value='i'>i</td>
        <td value='j'>j</td>
    </tr>
    <tr class="nameMail">
        <td value='k'>k</td>
        <td value='l'>l</td>
    </tr>
    <tr class="nameMail">
        <td value='m'>m</td>
        <td value='n'>n</td>
    </tr>
    <tr class="nameMail">
        <td value='o'>o</td>
        <td value='p'>p</td>
    </tr>
    <tr class="nameMail">
        <td value='q'>q</td>
        <td value='r'>r</td>
    </tr>
</table>

<input type="button" class="move up" value="▲" />
<input type="button" class="move down" value="▼"/> 
```

# tfs - TFS_Warehouse 中分支的概念

> ID：13580299
> 
> 赞同：3
> 
> 时间：2012-11-27T08:42:41.653
> 
> 标签：tfs, reporting

我正在尝试增强以下查询，使其返回特定分支上的所有更改集。不幸的是，我似乎无法在仓库中找到分支的概念。

```
 SELECT [ChangesetSK]
         ,[ChangesetTitle]
         ,[LastUpdatedDateTime]
         ,[CheckedInBy__Name]
     FROM [Tfs_Warehouse].[dbo].[vDimChangesetOverlay]
     Where [LastUpdatedDateTime] > '2012-11-26 00:00:00' 
```

# javascript - 动态添加dijit日期文本框

> ID：13580309
> 
> 赞同：1
> 
> 时间：2012-11-27T08:43:47.607
> 
> 标签：javascript, jsp, dojo, dijit.form

```
<label for="date1">Drop down Date box:</label>
<input type="text" name="date1" id="date1" value="2005-12-30"
    data-dojo-type="dijit/form/DateTextBox"
    required="true" /> 
```

会发生什么：第三条语句对我不起作用，我得到的结果是一个简单的文本框。需要什么：我想获得大量的日期文本框。其中 x 是从数据库中检索的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:29:47.600

您混合了旧的 dojo 声明性语法和较新的 html5 兼容语法。“data-”片段用于较新的 html5 语法。

正如 OammieR 所指出的，您也不要在声明中使用“/”，它应该是“.”。例如，请参见下文。

```
<input id="date1" data-dojo-type="dijit.form.DateTextBox"
    data-dojo-props="required:true,name:'date1',value:'2005-12-30'" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:01:45.137

If you use the [new version(AMD)](http://dojotoolkit.org/documentation/tutorials/1.8/modern_dojo/). When *require* you have to use `xxx/xxx/xxxx`

but in `data-dojo-type` you have to use `xxx.xxx.xxx` instead.

[Here is an example.](http://jsfiddle.net/oamiamgod/vzbVf/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:30:50.127

试试下面的

```
<input type="text" 
                                   placeholder="Date of Birth"
                                   name="date" 
                                   dojoType="dijit.form.DateTextBox"
                                   required="true" 
                                   > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T04:18:16.687

我面临同样的问题并得到这个解决方案。在声明性中使用 AMD 语法之前，您必须需要用于创建小部件的模块，例如：-

在您的情况下，首先您必须需要小部件

```
require(["dojo/parser","dijit/form/DateTextBox"],function(parser,DateTextBox)
{
    parser.parse();
}); 
```

当您创建小部件声明时，您还必须解析您的代码。

在 HTML 中：-

```
<label for="date1">Drop down Date box:</label>
<input type="text" name="date1" id="date1" value="2005-12-30"
    data-dojo-type="dijit/form/DateTextBox"
    required="true" /> 
```

现在您可以免费使用 xxx/xxx/xxxx 或 xxx.xxx.xxxx。我希望这能帮到您...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-14T14:59:19.030

好吧，如果您使用的是 dojo AMD，那么下面是动态添加 dijit DateTextBox 的代码。

```
 require(["dijit/form/DateTextBox", "dojo/dom-construct",  "dojo/domReady!"],function(DateTextBox, domConstruct)
    {
        var parentNode = domConstruct.create("div", { "class": "container" }, mainContainer); // place this container in your main conatainer.
        var Date = new DateTextBox({
                name="date1",
                id="date1",
                value="2005-12-30"
              }, parentNode);          
        }); 
```

**注意：**如果您是在循环中创建它或一次创建多个日期纠察队，请注意**id**，因为 id 应该是唯一的并且不应重复。

希望对你有帮助 ：）

# java - 405错误获取资源

> ID：13580311
> 
> 赞同：0
> 
> 时间：2012-11-27T08:44:14.703
> 
> 标签：java, spring, resources, tomcat7, http-status-code-405

我有一个 Spring MVC 应用程序，每当我请求资源时都会收到 405 错误。

我的 servlet.xml 文件中有以下内容：

```
<context:component-scan base-package="com.xetius"/>

<mvc:annotation-driven/>

<mvc:resources mapping="/images/**" location="classpath:/images/"/>
<mvc:resources mapping="/thumbs/**" location="classpath:/thumbs/"/>
<mvc:resources mapping="/gallery/**" location="classpath:/gallery/"/>
<mvc:resources mapping="/style/**" location="classpath:/style/"/>
<mvc:resources mapping="/script/**" location="classpath:/script/"/>
<mvc:resources mapping="/downloads/**" location="classpath:/downloads/"/>

<bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping" />

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass">
        <value>org.springframework.web.servlet.view.tiles2.TilesView</value>
    </property>
</bean>

<bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/views/**/views.xml</value>
        </list>
    </property>
</bean> 
```

在我的 home.jsp 文件中，我有以下内容：

```
<img class="about" src="/images/about.jpg" alt="about" /> 
```

当我使用 Tomcat7 在 IntelliJ 中运行它时，所有资源都以 405 Method Not Allowed 的形式返回。以下是该请求的 HAR

```
{
  "startedDateTime": "2012-11-27T08:38:32.453Z",
  "time": 8,
  "request": {
    "method": "GET",
    "url": "http://localhost:8080/images/about.jpg",
    "httpVersion": "HTTP/1.1",
    "headers": [
      {
        "name": "Accept-Encoding",
        "value": "gzip,deflate,sdch"
      },
      {
        "name": "Accept-Language",
        "value": "en-GB,en-US;q=0.8,en;q=0.6"
      },
      {
        "name": "Cookie",
        "value": "JSESSIONID=0A0475B4404B037CD2FDD8876A02285A"
      },
      {
        "name": "Connection",
        "value": "keep-alive"
      },
      {
        "name": "Accept-Charset",
        "value": "ISO-8859-1,utf-8;q=0.7,*;q=0.3"
      },
      {
        "name": "Host",
        "value": "localhost:8080"
      },
      {
        "name": "User-Agent",
        "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11"
      },
      {
        "name": "Accept",
        "value": "*/*"
      },
      {
        "name": "Referer",
        "value": "http://localhost:8080/"
      }
    ],
    "queryString": [],
    "cookies": [
      {
        "name": "JSESSIONID",
        "value": "0A0475B4404B037CD2FDD8876A02285A",
        "expires": null,
        "httpOnly": false,
        "secure": false
      }
    ],
    "headersSize": 426,
    "bodySize": 0
  },
  "response": {
    "status": 405,
    "statusText": "Method Not Allowed",
    "httpVersion": "HTTP/1.1",
    "headers": [
      {
        "name": "Date",
        "value": "Tue, 27 Nov 2012 08:38:32 GMT"
      },
      {
        "name": "Content-Length",
        "value": "1045"
      },
      {
        "name": "Server",
        "value": "Apache-Coyote/1.1"
      },
      {
        "name": "Allow",
        "value": "POST"
      },
      {
        "name": "Content-Type",
        "value": "text/html;charset=utf-8"
      }
    ],
    "cookies": [],
    "content": {
      "size": 1045,
      "mimeType": "text/html",
      "compression": 0
    },
    "redirectURL": "",
    "headersSize": 173,
    "bodySize": 1045
  },
  "cache": {},
  "timings": {
    "blocked": 0,
    "dns": -1,
    "connect": -1,
    "send": 1,
    "wait": 6,
    "receive": 0,
    "ssl": -1
  },
  "pageref": "page_1"
} 
```

当我检查 WAR 文件时，特定文件位于 WEB-INF/classes/images 中。

我一定是错过了什么，但这让我发疯。有人有想法么？

**编辑-**

我在这里包含了我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>a-Form Catering</display-name>
    <description>a-Form Catering Web Site</description>

    <servlet>
        <servlet-name>a-form</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>a-form</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

我的 servlet 文件实际上是 a-form-servlet.xml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:54:38.680

可能是您在 url 中错过了应用程序的上下文

```
<img class="about" src="/WEBAPP_CONTEXT/images/about.jpg" alt="about" /> 
```

如果您没有任何明确的上下文配置，那么我假设它是您的 WAR 文件的名称，没有 .war 扩展名。

您还可以在 JSP 中使用 JSTL 核心 url 标记来引用资源。

```
 <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
   ..........................

 <img class="about" src="<c:url value="/images/about.jpg"/>" alt="about" /> 
```

在这种情况下，您不需要指定上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:11:42.767

你的里面会不会有什么可疑的东西`web.xml`？如果不是，我有一种预感，它可能会`UrlBasedViewResolver`劫持你的图像。您能否尝试添加一个`viewNames`属性来限制它解析的内容，例如：

```
<bean id="viewResolver" class="....UrlBasedViewResolver">
    ...
    <property name="viewNames" value=".jspwhatever" />
</bean> 
```

（或一致`prefix`和/或`suffix`性质）。

希望有帮助。

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T20:50:21.840

我确定这已解决，但以防其他人遇到同样的问题。`<url-pattern>`我通过更改以 * 结尾的 to 解决了类似的问题。这应该将 DispatcherServlet 映射到每个路径。见下文：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>a-Form Catering</display-name>
    <description>a-Form Catering Web Site</description>

    <servlet>
        <servlet-name>a-form</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>a-form</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

# objective-c - 将字符串更改为 double 返回一个

> ID：13580317
> 
> 赞同：2
> 
> 时间：2012-11-27T08:44:30.883
> 
> 标签：objective-c, ios, xcode, nsstring

我已将值 1/129600.0 作为字符串存储在 plist 中。我能够将其作为字符串检索，但是当我尝试将其转换为双精度时，我将其作为 1.0 得到。我也尝试过 CFString

```
NSString *value = [[self array]objectAtIndex:m];
double a = [value doubleValue];
NSLog(@"%@",value);
NSLog(@"%f",a); 
```

并且在日志中返回的值为 1/129600.0 和 1.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:50:58.157

我猜 1/129600.0 不是有效数字。

尝试创建一个表达式并从中创建一个 NSNumber：

```
NSString *equation = [[self array]objectAtIndex:m];
NSNumber *a = [[NSExpression expressionWithFormat:equation] expressionValueWithObject:nil context:nil];
double a = [result doubleValue];
NSLog(@"%f", a); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:15:28.233

此代码工作正常，我在 xCode 中尝试过：

```
NSString *equation = [[self array]objectAtIndex:m];
NSExpression *result = [NSExpression expressionWithFormat:equation];

NSNumber *a = [result expressionValueWithObject:nil context: nil];

NSLog(@"%@",result);
NSLog(@"%.10f",[a doubleValue]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T08:49:13.657

`1/129600.0`不是大多数编程语言（包括 ObjC）中数字的有效表示。您需要自己解析字符串并进行解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T08:59:06.220

试试这个

```
NSString *value = [[self array]objectAtIndex:m];
NSArray *arr = [value componentsSeparatedByString:@"/"];
double a;
if ([arr count] == 2)
{
   a = [arr objectAtIndex:0]/[arr objectAtIndex:1];
}
NSLog(@"%@",value);
NSLog(@"%f",a); 
```

# c# - Intellisense 停止为 Linq to Entity 工作

> ID：13580326
> 
> 赞同：1
> 
> 时间：2012-11-27T08:45:22.020
> 
> 标签：c#, linq, linq-to-entities, intellisense

我有这个简单的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.Linq;
using GadNameSpace;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        GadEntities db = new GadEntities();
        var images = db.Images.Where(x => x.isApproved == true).ToList();

        Repeater1.DataSource = images;
        Repeater1.DataBind();
    }
} 
```

现在，如果我试图编辑这一行：

```
var images = db.Images.  <--this is where intellisense is not working... 
```

它以前工作过。相同的文件，相同的项目，相同的解决方案。如果我手动编写代码并运行它，它工作正常。我尝试了 start > cmd > "devenv /ResetSettings" 我也尝试重新启动 pc。 **问题仅在于 Linq 智能感知！对于其他任何智能感知都可以正常工作**...

有什么好主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:16:19.933

`System.Data.Linq.dll`当模块中缺少对的引用时，通常会发生这种情况。

我敢打赌，您在另一个程序集中有您的数据上下文，其中引用设置正确（以便代码在您编译它时工作）但同时 Web 应用程序中缺少引用（因此 VS 不显示智能感知）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-06T15:56:29.320

有时，可能缺少 EntityFramework 的引用。请确保您正在处理的项目中存在相同的内容。

# jquery - jquery自动完成组合框，显示所有按钮未显示

> ID：13580331
> 
> 赞同：1
> 
> 时间：2012-11-27T08:45:54.563
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

我不确定我是否遗漏了什么，但是当我尝试使用`autocomplete`jQuery UI 中的组合框时，只会显示自动完成字段，而不是旁边的“显示全部”按钮。

jQueryUI 演示：http: [//jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)

有人知道问题可能是什么吗？

这是一个小提琴，代码直接取自演示页面：http: [//jsfiddle.net/kKGpy/](http://jsfiddle.net/kKGpy/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-07T17:37:06.297

为了他人的利益。

下载的自动完成组合没有，此时演示页面中显示的全部显示按钮。可能是来自 jquery 网站的错误，或者下载文件尚未正确更新。

我的解决方案是使用下载的组合框文件和图像。但是对于工作代码，我复制了 jquery 网站上提供的代码。

[http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)

然后点击页面底部的查看源代码。此代码具有演示中显示的查看所有功能，但在下载的自动完成组合中缺少

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:59:52.843

无需在小提琴上进行测试只需浏览此 URL

[jQuery 组合框](http://jqueryui.com/resources/demos/autocomplete/combobox.html)

查看源代码 --> 复制 --> SaveAs test.html 并在本地测试一切都对我有用。如果有任何问题，请告诉我。

# python - amazon s3 get_key成功后指定的key不存在

> ID：13580335
> 
> 赞同：9
> 
> 时间：2012-11-27T08:46:07.607
> 
> 标签：python, web-services, amazon-s3, amazon-web-services, boto

我正在使用 python 和 boto

这是我的代码：

```
key = bucket.get_key(key_name)
if not key:
    print 'error, key does not exist'
    return
data = key.get_contents_as_string() 
```

有时（随机出现）我得到这个异常：

> S3ResponseError: S3ResponseError: 404 未找到

注意：文件由一台服务器上传，然后另一台服务器（位于不同的大陆）立即运行上述代码。

回溯：

> Traceback（最近一次调用最后一次）：文件“/test.py”，第 222 行，在 _process_response
> 
> 数据 = key.get_contents_as_string() 文件“/usr/lib/python2.6/site-packages/boto-2.1.1-py2.6.egg/boto/s3/key.py”，
> 
> 第 1201 行，在 get_contents_as_string response_headers=response_headers) 文件“/usr/lib/python2.6/site-packages/boto-2.1.1-py2.6.egg/boto/s3/key.py”中，
> 
> 第 1093 行，在 get_contents_to_file response_headers=response_headers) 文件“/usr/lib/python2.6/site-packages/boto-2.1.1-py2.6.egg/boto/s3/key.py”中，
> 
> 第 996 行，在 get_file override_num_retries=override_num_retries) 文件“/usr/lib/python2.6/site-packages/boto-2.1.1-py2.6.egg/boto/s3/key.py”中，
> 
> 第 211 行，在打开的 override_num_retries=override_num_retries) 文件“/usr/lib/python2.6/site-packages/boto-2.1.1-py2.6.egg/boto/s3/key.py”中，
> 
> 第 165 行，在 open_read self.resp.reason，正文中）S3ResponseError: S3ResponseError: 404 Not Found
> 
> `NoSuchKey`指定的键不存在。key_nameidhost_id

所以我得到了密钥，但是当我尝试从中读取时，我得到“找不到”。任何的想法 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T09:39:55.577

根据[Amazon S3 开发人员指南](http://docs.amazonwebservices.com/AmazonS3/latest/dev/Introduction.html#ConsistencyMode)，这是预期行为：

> ... 但是，有关更改的信息可能不会立即在 Amazon S3 中复制，您可能会观察到以下行为： 进程将新对象写入 Amazon S3 并立即尝试读取它。在完全传播更改之前，Amazon S3 可能会报告“密钥不存在”。

# lucene - Lucene.net 返回文档中的所有字段

> ID：13580336
> 
> 赞同：0
> 
> 时间：2012-11-27T08:46:09.913
> 
> 标签：lucene, lucene.net

我在 lucene.Net 中存储数据我添加了一个包含多个字段的文档：

```
var doc = new Document();

doc.Add(new Field("CreationDate", dt, Field.Store.YES, Field.Index.ANALYZED));
doc.Add(new Field("FileName", path, Field.Store.YES, Field.Index.ANALYZED));
doc.Add(new Field("Directory", dtpath, Field.Store.YES, Field.Index.NOT_ANALYZED));
doc.Add(new Field("Text", text.ToString(), Field.Store.YES, Field.Index.ANALYZED));
...
writer.AddDocument(doc); 
```

我想浏览所有项目并为每个文档返回字段“CreationDate”和“Directory”。但是一个 Term 只能排除 1 个字段：

var termEnum = reader.Terms(new Term("CreationDate"));

我如何让它返回 2 个字段？？？

谢谢马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:58:02.987

当您遍历搜索结果时，读取文档并从中加载值：

```
int docId = hits[i].doc;  
Document doc = searcher.Doc(docId); 
String creationDate = doc.Get("CreationDate");
String directory = doc.get("Directory");
// ...and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:18:21.080

您可以通过以下方式枚举包含给定术语的所有文档：

```
var termDocEnum = reader.TermDocs(new Term("CreationDate")); 
```

您可以使用该枚举使用 docId 获取文档：

```
Document doc = searcher.doc(termDocEnum.doc); 
```

[这应该使使用Document API](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/document/Document.html)获取您正在寻找的信息变得足够容易。

请注意，如前所述，这只会获取给定术语具有指定值的文档！如果这是一个问题，您可以为每个相关参数调用一次 TermDocs 并根据需要合并集合（使用在 docId 上索引的哈希表或类似的东西很容易完成），或者不带参数调用 TermDocs，并使用[seek](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/index/TermDocs.html#seek%28org.apache.lucene.index.Term%29)找到适当的条款（如有必要，合并将再次手动完成）。

从“terms”方法传递的 TermEnum 不会给您一个 docId（我相信，您必须使用 termDocs 方法来获取枚举中的每个术语。）

# android - Android GCM：intent.getStringExtra(EXTRA_REGISTRATION_ID) 对于每台设备都是唯一的吗？

> ID：13580338
> 
> 赞同：1
> 
> 时间：2012-11-27T08:46:26.450
> 
> 标签：android, google-cloud-messaging

我只是好奇从 GCM 类 GCMBaseIntentService 中的 intent.getStringExtra(EXTRA_REGISTRATION_ID) 生成的字符串是否对于每个 android 设备都是唯一的？它是如何产生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:52:25.283

注册 ID 由 GCM 服务器创建，并且对于在特定设备上运行的特定应用程序是唯一的。

你可以在这里阅读更多：http: [//developer.android.com/guide/google/gcm/gs.html#android-app](http://developer.android.com/guide/google/gcm/gs.html#android-app)

> onRegistered(Context context, String regId)：在收到注册意图后调用，将**GCM 分配的注册 ID 作为参数传递给该设备/应用程序对。** 通常，您应该将 regid 发送到您的服务器，以便它可以使用它向此设备发送消息。

在这里：http: [//developer.android.com/guide/google/gcm/gcm.html#arch](http://developer.android.com/guide/google/gcm/gcm.html#arch)

**注册号**

> GCM 服务器发给 Android 应用程序的 ID，允许其接收消息。一旦 Android 应用程序拥有注册 ID，它就会将其发送到第 3 方应用程序服务器，该服务器使用它来识别已注册以接收给定 Android 应用程序消息的每个设备。**换句话说，注册 ID 与运行在特定设备上的特定 Android 应用程序相关联。**

此外，该字符串不是由您引用的代码生成的，而是在 GCM 服务器上生成并由该代码从意图中读取。

# struts2 - 用于测试 struts.xml 文件中常量名称的写入内容

> ID：13580340
> 
> 赞同：0
> 
> 时间：2012-11-27T08:46:28.387
> 
> 标签：struts2

我正在为我的项目使用 Struts 2 框架，对于我`<constant name="struts.devMode" value="true" />` 在 struts.xml 文件中使用的开发模式，所以我的开发已经完成，所以我需要给我的项目进行测试，所以在 Struts.xml 中更改常量名称以进行测试（ UIT），它不在生产中，它在开发和生产之间，请有任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:51:09.407

`devMode`只有通过提供有关流程的洞察力以及帮助您重新加载每个请求的配置来使开发人员的生活变得轻松，这样事情才能顺利进行。

我相信 QA 不会有任何变化，将开发模式放在那里没有任何意义。

你有2个选择

1.  从您的 XML 中注释掉该行
2.  如果您使用任何集成/构建工具，例如`Jenkins`您可以拥有基于配置文件的属性/配置文件

# haxe - 开始使用 Haxe

> ID：13580342
> 
> 赞同：0
> 
> 时间：2012-11-27T08:46:36.483
> 
> 标签：haxe

除了官方文档，你能推荐我关于 Haxe 的好文章和教程吗？

我正在寻找的资源不仅针对初学者，还针对有经验的 Java/Javascript 开发人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:41:03.657

[http://ralcr.com](http://ralcr.com) 看看这个家伙和他的库，我相信它对你有很好的来源。

# c++ - 预处理器错误 C++

> ID：13580348
> 
> 赞同：0
> 
> 时间：2012-11-27T08:46:51.927
> 
> 标签：c++, mingw, c-preprocessor, codeblocks, nui

我正在使用 Code::Blocks 和 MinGW 与 CL NUI 一起编译和运行 OpenCV，以便我可以将 Kinect-Data 导入 OpenCV。OpenCV 工作正常，但 CL NUI 不能，因为我遇到了一些与我不太熟悉的预处理器有关的 API 问题。

这是我在项目中包含[的 API 中的代码，我只收到此错误：](http://codelaboratories.com/forums/viewthread/442/)

> “C:\Program Files (x86)\Code Laboratories\CL NUI Platform\SDK\Include/CLNUIDevice.h:19:1: Fehler: das Einfügen von »)« und »int« ergibt kein gültiges Präprozessor-Token”

翻译：“...CLNUIDevice.h:19:1: 错误：添加 »)« 和 »int« 导致没有有效的预处理器令牌”

也许有预处理器知识的人可以帮助我？

[这是我的项目代码](http://pastebin.com/A2amk1in)，但我无法想象这会如何搞砸事情，但谁知道呢，因为我无法测试它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:27:46.593

在行

```
#define IMPORT(type) extern "C" __declspec(dllimport)## type __cdecl 
```

删除`##`，给你

```
#define IMPORT(type) extern "C" __declspec(dllimport) type __cdecl 
```

`##`是令牌粘贴运算符，`)`不能是令牌的一部分（它本身就是一个令牌）。我认为代码作者使用的预处理器如果接受它是不合格的，但我不知道他们为什么认为那里应该需要它。

# couchdb - CouchDB 设置差异/不在条件

> ID：13580352
> 
> 赞同：0
> 
> 时间：2012-11-27T08:47:11.413
> 
> 标签：couchdb, set-difference

我准备在我的项目中使用 CouchDB。但找不到一种方法来实现像 SQL 这样的视图`SELECT * FROM Employees WHERE LastName NOT IN (SELECT LastName FROM Managers)`。换句话说，我想从视图 A 中获取一个集合，但不在视图 B 中。问题：如何在 CouchDB 中实现 not-in 条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:37:28.730

让员工和经理列出不同的文档集是使用关系结构，而您的数据库不是关系。如果由于某种原因，您被迫这样做，则需要某种方法来区分 doc 的方案（它来自哪个表）。假设您正在使用 field 进行操作`scheme`：

```
{ _id: "EMPL_ID", scheme: "employee", ... }
{ _id: "MNGR_ID", scheme: "manager", employee: "EMPL_ID", ... } 
```

然后你可以使用地图：

```
function (doc) {
    if (!doc.scheme) return;
    if (doc.scheme != "manager") emit(doc.last_name, doc);
} 
```

如果由于某种奇怪的原因，您不能这样做，并且您在经理文档中只有对员工文档的引用，您可以发出两个文档：

```
function (doc) {
    if (some_test_for_being_employee_scheme(doc))
        emit([doc._id, 1], doc);
    if (doc.emp_id)
        emit([doc.emp_id, 0], null);
} 
```

您将获得带有键的员工列表`["employee_id", 1]`，并且每个经理前面都有标记为经理（键`[..., 0]`）的行。这将需要一些空间，但使用列表功能，您可以轻松过滤掉经理，客户端将仅从数据库接收非经理。

请记住，这只是不进行正确数据库设计的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:34:56.933

如果您更改模型以使其适合面向文档的数据库，这将很容易。我通常在我的所有文档中保留一个“类型”键，以保持不同类型的文档直截了当。如果你有一个单一的“person”类型并且用一个单独的key来装饰所有也是“manager”的“person”文档，你可以很容易地只为非管理人员发出查看键。如果您选择使用单独的“经理”类型，您可以类似地将发出的视图键限制为仅限非经理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:01:25.090

我认为答案很简单：您不能混合查看结果。视图是独立的。但是，有一种称为**视图整理**的策略可能会解决您的问题。我建议阅读以下内容：[http](http://wiki.apache.org/couchdb/View_collation) ://wiki.apache.org/couchdb/View_collat ​​ion 总结一下：您需要使用不同的文档类型，然后使用单个视图来整理结果。

# java - 捕获来自 Ekiga 软电话/Pulseaudio JACK 接收器的传入音频

> ID：13580365
> 
> 赞同：0
> 
> 时间：2012-11-27T08:48:23.813
> 
> 标签：java, voip, cmusphinx

我想使用 Sphinx 进行语音识别。

我正在寻找使用 Java 或 Python 捕获 Ekiga VOIP 软件电话的输出/传入音频并将其传递给 Sphinx。现在，输出指向 PulseAudio JACK Sink。

抱歉，如果我没有使用正确的术语，因为我对此很陌生。

如果您能指出我正确的方向，将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:46:36.557

您需要正确格式化您想要完成的任务并为此选择正确的工具。软件开发人员不会在他们的项目中使用像 Ekiga 这样的桌面应用程序。只是因为桌面应用程序是为用户编写的，而不是为软件开发人员编写的。您只能在源代码中修改像 Ekiga 这样的桌面应用程序，但那是完全不同的故事。

如果您想拥有一个 VOIP 端点并将其连接到语音识别服务，您需要查看 IVR 系统和类似的东西。IVR 系统是通过 VOIP 协议实现复杂交互的特定工具。一些例子是：

[自由开关](http://www.freeswitch.org/)

[星号](http://www.asterisk.org/)

[GNU Gatekeeper](https://sourceforge.net/projects/openh323gk/?source=recommended) - 一个项目建立在与 Ekiga 相同的 Opal 技术之上

您可以设置 freeswitch 以等待呼叫并将它们传递给 pcoketsphinx。你可以用 Asterisk 做同样的事情。有关更多详细信息，请参阅

[如何使用 Freeswitch 的 Pocketpshinx](http://wiki.freeswitch.org/wiki/Mod_pocketsphinx)

[如何使用 UniMRCP 项目将 Pocketsphinx 集成到 Asterisk 中](https://code.google.com/p/unimrcp/wiki/PocketSphinxPlugin)

# box-api - Box API v2 为具有权限的文件创建共享链接。下载配置返回 500 内部服务器错误

> ID：13580366
> 
> 赞同：1
> 
> 时间：2012-11-27T08:48:23.253
> 
> 标签：box-api

这是我与创建共享链接一起发送并得到“内部服务器错误”的参数

```
{"shared_link":{"access":"Collaborators","permissions":{"download": true}}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:14:15.777

这是（1）错误文档和（2）错误响应错误的情况。

您会看到一个错误，因为该`permissions`参数只能用于`Open`和`Company`访问类型*。

在 (1) 上，我们应该对此进行记录（我刚刚更新[了我们的文档](http://developers.box.com/docs/#files-create-a-shared-link-for-a-file)以反映这一点）。在 (2) 上，我们应该返回一个更具描述性的错误（例如 400 错误请求和“不适用于此访问类型的消息。这也在我们的开发管道中）”

*如果您真的很好奇，它不适用于该`Collaborators`类型，因为预计[协作](http://developers.box.com/docs/#collaborations)为每个用户设置的权限将定义他们的共享链接访问权限。我明白，这不是最直接的事情。

# android - 在 Android 中使用 Fragment 时延迟初始化

> ID：13580369
> 
> 赞同：2
> 
> 时间：2012-11-27T08:48:33.553
> 
> 标签：android, android-fragments, android-tabhost, android-tabs

当一个片段 A 更改为另一个片段 B 时，它会调用`onCreate()`和其他一些函数进行初始化。更改后`Fragment`，当前片段附近的片段也将被初始化。例如：我有5个片段A、B、C、D、E。当前的片段是A。当我更改为D时，D连同C和E将被初始化。我的问题是：

有些代码执行起来很慢，所以我想初始化部分数据而不是所有数据。也就是说，当片段可见时，会初始化一些数据。当它不是当前片段时，初始化将被延迟。这是一张照片：

![在此处输入图像描述](../Images/b8036d0e23adffe384a041e53a878227.png)

我使用这些类：

```
android.widget.TabHost
android.support.v4.app.Fragment
android.support.v4.app.FragmentActivity
android.support.v4.app.FragmentPagerAdapter
android.support.v4.view.ViewPager 
```

我阅读了 API，但是当片段可见时没有调用方法。所以，我想我可以用`onTabChanged`. 但我不知道如何通过`TabHost`. 如果可以的话，我会调用我自己的函数来进行初始化。

1.  我怎么知道片段是隐藏的还是当前的？或者
2.  我可以在 TabHost 中获取内容片段吗？或者
3.  其他延迟初始化的方法。

这是一些代码：

```
 public class TabsAdapter extends FragmentPagerAdapter
          implements TabHost.OnTabChangeListener,
                     ViewPager.OnPageChangeListener{
        private final Context mContext;
        private final TabHost mTabHost;
        private final ViewPager mViewPager;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        private static final class TabInfo {
            private final Class<?> mClss;
            private final Bundle mArgs;

            TabInfo(String _tag, Class<?> _class, Bundle _args) {
                mClss = _class;
                mArgs = _args;
            }
        }
        public TabsAdapter(FragmentActivity activity, TabHost tabHost,     ViewPager pager) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mTabHost = tabHost;
            mViewPager = pager;
            mTabHost.setOnTabChangedListener(this);
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        /** MainActivity call this func to add tabs */
        public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
            some code
        }

        public void onPageSelected(int position) {
            TabWidget widget = mTabHost.getTabWidget();
            int oldFocusability = widget.getDescendantFocusability();
            widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
            mTabHost.setCurrentTab(position);
            widget.setDescendantFocusability(oldFocusability);
            Log.i("demo tab","onPageSelected tab change to---------   " + position);
        }
    } 
```

MainActivity: /** 这些代码是创建片段 */

```
 FrameLayout tabContact = (FrameLayout) LayoutInflater.from(this).inflate(R.layout.tab_widget, null);
        ImageView imgBackContact = (ImageView) tabContact.findViewById(R.id.tab_widget_back_image);
        ImageView imgFrontContact = (ImageView) tabContact.findViewById(R.id.tab_widget_front_image);
        imgBackContact.setImageResource(R.drawable.ic_tab_contact_normal);
        imgFrontContact.setImageResource(R.drawable.ic_tab_contact_selected); 
```

/** 这些代码是把片段放入 TabHost */

```
mTabsAdapter.addTab(mTabHost.newTabSpec(XXX), A.class, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:30:52.653

> 我的问题是：有些代码非常慢，所以我想初始化部分数据而不是全部。

我希望您不要在主 UI 线程上执行繁重的操作。

> 我怎么知道片段是隐藏的还是当前的？或者我可以在 TabHost 中获取内容片段吗？或其他延迟初始化的方法。

你可以使用一个关于`FragmentPagerAdapter`. 在您的`onPageSelected`方法中，您可以找出当前`Fragment`的方法并在其上调用初始化方法：

```
public void onPageSelected(int position) {
    //...
    Fragment item = getSupportFragmentManager().findFragmentByTag("android:switcher:" + R.id.theIdOfTheViewPager + ":" + position);
    if (item != null && item.getView() != null) {
        item.initializeStuffForThisFragment();// you need to cast it to your Fragment class 
    }
} 
```

# iphone - 当应用程序在iphone中进入背景时如何计算任务

> ID：13580371
> 
> 赞同：2
> 
> 时间：2012-11-27T08:48:47.417
> 
> 标签：iphone, objective-c, ios5, ios4, ios6

即使应用程序在退出 iPhone (iOS) 中的活动状态时进入后台，我如何才能运行任务直到完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T08:51:24.013

首先我们需要检查设备是否支持多任务处理？？

```
if([UIDevice currentDevice]respondsToSelector:@selector(isMultitaskingSupported)){

  //  If the device supports Multitasking we can run the task as :-

    UIBackgroundTaskIdentifier bgTask;

    bgTask=[[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
        [[UIApplication sharedApplication] endBackgroundTask:bgTask];
    }];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul), ^{
        for(double i=0; i<99999; i++)
            NSLog(@"Backgroudn quee");

        [[UIApplication sharedApplication] endBackgroundTask:bgTask];
    });
} 
```

# c++ - 指向 char[] 类型成员的指针的模板签名

> ID：13580372
> 
> 赞同：2
> 
> 时间：2012-11-27T08:48:50.090
> 
> 标签：c++, templates

我编写了一个比较器来检查对象的成员是否等于输入。这就像一个魅力，除了一个成员是 char[];

我已经搜索了互联网，C++ ISO 标准并尝试了很多，但我无法弄清楚。

这是简化的代码：

```
/*
 * main.cpp
 *
 *  Created on: Nov 17, 2012
 *      Author: martijn
 */

#include <string.h>

class Data {
public:
    Data() {
        strcpy(Name, "MyCharArray");
    };
    virtual ~Data();

    char Name[12];
};

template <class ClassT, char (ClassT::*Name)[]> // What should be here?!
class Comparator {
public:
    Comparator() {};
    ~Comparator() {};
};

int main() {

    Comparator<Data, &Data::Name> comparatorArray;

    return 0;
} 
```

代码中指出了问题区域（至少我是这样做的）。当前代码不正确。编译器说：

错误：无法将模板参数 '&Data::Name' 转换为 'char (Data::*)[]'</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:54:03.157

您需要在模板参数类型中指定绑定的数组：

```
template <class ClassT, char (ClassT::*Name)[12]> 
```

或者可能：

```
template <class ClassT, std::size_t N, char (ClassT::*Name)[N]> 
```

并使用：

```
// Note, this is a declaration of a function, is this correct?
Comparator<Data, 12, &Data::Name> comparatorArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:55:35.373

回答此类问题的一种简单方法是使用编译器错误消息。

创建一个带有通用参数的模板函数，该参数在传递参数时公然无法编译。然后查看错误信息，它通常会告诉你 T 是什么。我传统的编译失败是一个大小为零的数组：如果你的编译器很聪明`int x[sizeof(T)-sizeof(expression with the same type as your test var)]`，但只有一个零可以在一些懒惰的编译器中工作。

# android - 如何在谷歌地图 Android 上显示多个标记？

> ID：13580374
> 
> 赞同：2
> 
> 时间：2012-11-27T08:49:03.113
> 
> 标签：android, mysql, google-maps, google-maps-markers

我的项目有问题，我不知道如何在谷歌地图上使用数据库 mySql 中的纬度和经度数据显示多个标记。

这里使用数组列表的代码：

```
private class SitesOverlay extends ItemizedOverlay<OverlayItem> {
    private List<OverlayItem> items=new ArrayList<OverlayItem>();

    public SitesOverlay(Drawable marker) {
      super(marker);

      boundCenterBottom(marker);

      //i want change this, calling the data from mysql automatically
      items.add(new OverlayItem(getPoint(40.748963847316034,
                                          -73.96807193756104),
                                "UN", "United Nations"));
      items.add(new OverlayItem(getPoint(40.76866299974387,
                                          -73.98268461227417),
                                "Lincoln Center",
                                "Home of Jazz at Lincoln Center"));
      items.add(new OverlayItem(getPoint(40.765136435316755,
                                          -73.97989511489868),
                                "Carnegie Hall",
              "Where you go with practice, practice, practice"));
      items.add(new OverlayItem(getPoint(40.70686417491799,
                                          -74.01572942733765),
                                "The Downtown Club",
                        "Original home of the Heisman Trophy"));

      populate();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:21:37.450

使用我喜欢的这个类：[https](https://github.com/jgilfelt/android-mapviewballoons) ://github.com/jgilfelt/android-mapviewballoons它有例子。

```
SimpleItemizedOverlay itemizedoverlay = new MyItemizedOverlay(drawable, this);
GeoPoint point = new GeoPoint((int)(37.878901f * 1e6),(int)(-4.779396 * 1e6));
OverlayItem overlayitem = new OverlayItem(point, "Hello, World!", "I'm in Spain!");
.
.
.
GeoPoint point = new GeoPoint((int)(37.878901f * 1e6),(int)(-4.779396 * 1e6));
OverlayItem overlayitem = new OverlayItem(point, "Hello, World!", "I'm in Spain!");

itemizedoverlay.addOverlay(overlayitem);
mapOverlays.add(itemizedoverlay); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:55:04.280

我认为您可以创建一个类作为 Positions 来获取属性

对于Position类，调用获取地理位置点的方法，实现以关键词为搜索位置的函数，返回地理位置

# jquery - jquery jqgrid list 提交后删除数据

> ID：13580375
> 
> 赞同：0
> 
> 时间：2012-11-27T08:49:04.180
> 
> 标签：jquery, jqgrid

我想问的是我有一个 jqgrid 列表，我想在屏幕上显示错误消息以防删除失败。这是我的代码：

```
<html>
<body>
<script type="text/javascript" charset="utf-8">
$(document).ready(function() {
    jQuery("#list").jqGrid({
        url:'../listeAjax',
        datatype: "json",
        colNames:['Id','Hizmet adı', 'Sektörler', 'Durum', 'Düzenle'], 
        colModel:[
            {name:'onto_data_id',index:'onto_data_id', width:55, editable: false},
            {name:'baslik',index:'baslik', editable:true, editrules:{required:true}, formoptions:{ elmprefix:"(*)"}},
            {name:'sektor_list',index:'sektor_list', editable:false},
            {name:'is_active',index:'is_active', align: 'center', editable:true, stype:'select', 
                editoptions:{value:":All;1:<?php echo lang('title_aktif')?>;0:<?php echo lang('title_pasif')?>", defaultValue:1},
                edittype:"select"   
            },
            {name:'duzenle',index:'duzenle', align: 'center', sortable:false, search: false, editable:false}        
        ],
        rowNum: <?php echo DEFAULT_GRID_ROWNUM; ?>,
        rowList:[100,200,400,800],
        pager: '#pager',
        sortname: 'onto_data_id',
        viewrecords: true,
        sortorder: "desc",
        multiselect: true,
        width: 800,
        height: "100%",
        editurl: '../islemAjax',
        caption: "Hizmetler",
        mtype: "GET",
        postData:{parent_id: '<?php echo $parent_id; ?>', parent_type: '<?php echo $parent_type; ?>'}
    });
    jQuery("#list").jqGrid('navGrid','#pager',
            {edit:true, add:true, del:true, search:false}, 
            {closeOnEscape:true, bottominfo:"<?php langValue('info_yildizlialanlar'); ?>",editData: {
                    parent_id: function() {
                    return '<?php echo $parent_id; ?>';
                },
                parent_type: function() {
                    return '<?php echo $parent_type; ?>';
                },
                tur: function() {
                    return '<?php echo ONTO_TYPE_HIZMET; ?>';
                }
            }}, 
            {
                beforeSubmit: function(postdata, formid){
                    var message;
                    $.ajax( {
                        type : 'POST',
                        dataType : 'json',
                        url : "<?php echo URL_YONETIMDATACONTROL; ?>",
                        data : 'baslik='+postdata.baslik + '&parent_id=' + <?php echo $parent_id; ?> + '&parent_type=' + <?php echo $parent_type; ?> + '&onto_type=' + <?php echo ONTO_TYPE_HIZMET  ; ?>,
                        async : false,
                        success : function(result) {
                            if(result.status == true) {                             
                                complete = true;
                            } else {
                                complete = false;
                            }
                            message = result.message;
                        },
                        error: function (data, status, e) {
                            complete = false;
                            message = e;
                        }

                    });

                    return [complete, message, ""];

                },

                closeOnEscape:true, bottominfo:"<?php langValue('info_yildizlialanlar'); ?>",editData: {
                    parent_id: function() {
                    return '<?php echo $parent_id; ?>';
                },
                parent_type: function() {
                    return '<?php echo $parent_type; ?>';
                },
                tur: function() {
                    return '<?php echo ONTO_TYPE_HIZMET; ?>';
                }
            }}, 
            {delData: {
                    parent_id: function() {
                        return '<?php echo $parent_id; ?>';
                    },
                    parent_type: function() {
                        return '<?php echo $parent_type; ?>';
                    }
            }}, 
            {} 
            );  
    jQuery("#list").jqGrid('filterToolbar');
} );
</script>

<h1>
<?php echo langValue('title_hizmetliste'); ?> 
<?php 
if(isset($sektor_baslik)) 
{
    echo '(' . $sektor_baslik . ')';
}
?>

<a href="<?php echo URL_YONETIMHIZMETEKLE; ?>" title="<?php echo langValue('form_ekle')?>" class="tooltip">
    <img src="<?php echo PATH_MEDIA_IMG_YONETIM; ?>icons/8_48x48.png" alt="" />
</a>
</h1>
<div class="pad20">
    <?php if(isset($info)) { ?>
    <div class="message success close">
        <h2><?php echo $info; ?></h2>
    </div>
    <?php } ?>
    <!-- Tabs -->
    <div id="tabs">
        <!-- First tab -->
        <div id="tabs-1">
            <table id="list"></table>
            <div id="pager"></div>
        </div>
    </div>
</div>
</body>
</html> 
```

我插入了 afterSubmit 但它什么也没返回。此外，当我在 afterSubmit 中提醒文本时，什么也没有发生。这是我尝试过的提交后代码：

```
afterSubmit : function(response, postdata) 
{
     alert("test");                  
     return [success,message,new_id] 
} 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:23:27.090

服务器响应的错误处理主要有两种情况：1）响应包含一些错误的 HTTP 代码，2）响应包含一些成功的 HTTP 代码。如果响应成功（从 HTTP 代码的角度来看），`afterSubmit`将执行回调。如果出现错误响应（从 HTTP 代码的角度来看），`errorTextFormat`将执行回调。所以你需要使用类似的东西

```
{
    delData: {
        parent_id: function() {
            return '<?php echo $parent_id; ?>';
        },
        parent_type: function() {
            return '<?php echo $parent_type; ?>';
        }
    },
    errorTextFormat: function (jqXHR) {
        alert(jqXHR.responseText);
        return "Error code: " + data.status + ", Description: " + jqXHR.responseText;
    }
} 
```

的确切代码`errorTextFormat`取决于`jqXHR.responseText`发生错误时的内容。在许多情况下，最好只使用的子集`jqXHR.responseText`来获得最易读的结果。见[答案](https://stackoverflow.com/a/6969114/315935)。

我建议您不仅要测试错误响应将由您的代码显式生成的情况，还要测试另外两种情况：1）常见的服务器错误（例如，如果您将使用不存在`url`的删除操作）2）客户端侧面错误，例如来自服务器的超时。

# c# - 四舍五入到某个小数位

> ID：13580378
> 
> 赞同：0
> 
> 时间：2012-11-27T08:49:14.507
> 
> 标签：c#, rounding

我正在计算一些值的平均值。一切正常。我想要做的是将双精度数舍入到小数点后第二位。

例如

我会将 0.833333333333333333 显示为 0.83

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T08:50:49.187

像这样围绕`double`自身：

```
Math.Round(0.83333, 2, MidpointRounding.AwayFromZero); 
```

（您应该定义 MidpointRounding.AwayAwayFromZero 以获得正确的结果。默认此函数使用银行家舍入。阅读有关银行家舍入的更多信息：http: [//www.xbeat.net/vbspeed/i_BankersRounding.htm](http://www.xbeat.net/vbspeed/i_BankersRounding.htm)以便您了解为什么这不会给你正确的结果）

或者只是两位小数的显示值：

```
myDouble.ToString("F"); 
```

或者对于由数量确定的任何小数`#`

```
myDouble.ToString("#.##") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:51:59.707

你说*显示为*- 所以这将是：

```
var d = value.ToString("f2"); 
```

请参阅[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

如果您确实想将值调整为 2dp，那么您可以按照@middelpat 的建议进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T08:52:57.913

利用

```
Math.Round(decimal d,int decimals); 
```

作为

```
Math.Round(0.833333333,2); 
```

这会给你结果`0.83`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T08:52:57.737

```
double d = 0.833333333333333333;
Math.Round(d, 2).ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T08:53:05.417

尝试

```
decimalVar = 0.833333333333333333;
decimalVar.ToString ("#.##"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-27T08:53:20.987

如果您想查看 `0.85781..`为`0.85`，最简单的方法是乘以`100`、转换为`int`和除以`100`。

```
int val = (int)(0.833333333333333333 * 100); 
var result = val /100; 
```

它应该会产生您正在寻找的结果。

# ruby-on-rails - 如何在系统重新引导时自动启动瘦服务器

> ID：13580379
> 
> 赞同：0
> 
> 时间：2012-11-27T08:49:29.680
> 
> 标签：ruby-on-rails, sysadmin

服务器重启时如何自动启动瘦服务器。

我有一个使用瘦服务器的 Rails 3 项目。我可以从终端手动控制瘦服务器。系统重新启动时是否可以将瘦服务器作为后台进程启动。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T12:21:11.030

我想你需要这样做：

`sudo thin install`#为thin创建init.d条目

`sudo /usr/sbin/update-rc.d -f thin defaults`# 设置它

`sudo thin config -C /etc/thin/<appname>.yml -c /var/rails/<appdir> --servers 4 -e production`# 为其生成配置文件。如果你已经有了配置文件，你可以把它复制到 /etc/thin/ 而不是创建。

如果你在你的服务器上使用 rvm - 浏览这个：[RVM and thin, root vs. local user](https://stackoverflow.com/questions/3230404/rvm-and-thin-root-vs-local-user)。

你也可以看看：[https ://github.com/opscode-cookbooks/runit](https://github.com/opscode-cookbooks/runit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:42:28.537

您可以使用计划任务。当计算机启动时，有一个特定的触发选项用于启动任务。

要在后台模式下启动进程，您可以使用命令的`-d`选项`rails`。

# android - 防止 asynctask 被多次执行

> ID：13580384
> 
> 赞同：5
> 
> 时间：2012-11-27T08:49:52.720
> 
> 标签：android, android-asynctask

我正在单击一个按钮从我的 UI 线程调用一个异步任务，该按钮执行一些 HTTP-Get 请求。

如果用户在当前任务完成之前再次单击按钮会发生什么？这是由 asynctask 在内部处理的，还是我需要自己处理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T08:59:01.640

有两种方法可以做到这一点。

1：显示进度对话框并阻止用户进一步输入。

2：在私有类范围内创建 AsyncTask 变量。那么这将永远不会运行超过一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T09:11:34.150

为什么不使用布尔标志并检查它的状态？我在我的永无止境的列表中使用了这个逻辑，它从来没有失败过。

切换标志`doInBackground()`

```
@Override
protected Void doInBackground(Void... params) {

    loadingData = true;
} 
```

然后又在`onPostExecute()`

```
@Override
protected void onPostExecute(Void result) {

    // CHANGE THE LOADINGMORE STATUS TO PERMIT FETCHING MORE DATA
    loadingData = false;
} 
```

而对于 Button 的点击监听器

```
your_btn.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        if (loadingData == false)    {
            // RUN THE ASYNCTASK AGAIN
        } else if (loadingData == true) {
            // SHOW A TOAST THAT YOU ARE ALREADY FETCHING DATA
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T08:56:53.403

您可以要求`getStatus()`您`AsyncTask`检查它是否已经在运行并在这种情况下忽略按钮单击。

为此，您绝对需要保存`AsyncTask`某处的实例并可以访问它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T09:03:48.780

将产生另一个 AsyncTask，这可能会给您带来困难 - 如果您要持久保存数据，则会出现竞争条件等。我建议在接收`onClick`事件时禁用按钮并显示一些描述的微调器，表明在背景。

我们通过放置在操作栏中的刷新按钮实现了类似的效果。请注意，我们的异步任务`app.Service`在配置更改期间运行（`hasStartedSync`重新初始化），我们依赖“isTheSyncServiceRunning”检查。

```
// on setting the selection buttons up
public void onPrepareOptionsMenu(final Menu menu) {
 super.onPrepareOptionsMenu(menu);
 final MenuItem refreshItem = menu.findItem(id.sync);
  if (isSynchronisationServiceRunning() || hasStartedSync) {
   refreshItem.setEnabled(false);
   if (Build.VERSION.SDK_INT > 10) {
     // Replace the refresh icon with an indeterminate spinner for > 10 API.
     final LayoutInflater inflater = (LayoutInflater)getSherlockActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
     refreshItem.setActionView(inflater.inflate(layout.actionbar_indeterminate_progress, null));
   }
 }  else {
   refreshItem.setEnabled(true);
   refreshItem.setActionView(null);
 }
}

// on selection.
public boolean onOptionsItemSelected(final MenuItem item) {
 boolean isSelected;
 switch (item.getItemId()) {
   case id.sync:
     // Fire request to start GET here.
     hasStartedSync = true;
     invalidateOptionsMenu();
     break;
   ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T09:06:34.503

两种方式：

1.  在`onPreExeccute()`AsyncTask 中显示一个 ProgressDialog 及其`setCancelable(false)`. 在ProgressDialog 上`onPostExecute()`的 AsyncTask 调用中。`dismiss()`这将显示一个阻止进度对话框。您还可以在此处显示一些消息或进度。

2.  在`onPreExeccute()`AsyncTask 中，调用`setEnabled(false)`Button。在Button 上`onPostExecute()`的 AsyncTask 调用中。`setEnabled(true)`只要任务正在运行，这将禁用该按钮。您还可以在这些点更改按钮文本。或者甚至暂时用进度微调器替换它（如在 ActionBar 中）。

此外，您可以在“运行”和“取消”行为之间切换按钮，就像现代 Web 浏览器中的刷新按钮一样。这将为用户提供更多控制权。

**注意事项**：将所有内容包装`onDoInBackground()`在 a 中`try-catch`，以便 AsyncTask 始终正常退出，并`onPostExecute()`始终被调用。可以通过 result 参数`onPostExecute(result)`判断 HTTP 请求是否得到任何东西。

**示例：**只需调用此方法即可`TextView`在单击 some 时将一些文本加载到从服务器中`Button`：

```
public static void runHTTP(final TextView targetView, final Button triggerBtn){

    //---new task----
    AsyncTask<Void,Void,String> task = new AsyncTask<Void, Void, String>(){
        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            //----disable button---
            triggerBtn.setEnabled(false);

            //---show message----
            targetView.setText("Loading...");
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);

            //----update result---
            targetView.setText(result);

            //----re-enable button---
            triggerBtn.setEnabled(true);
        }

        @Override
        protected String doInBackground(Void... voids) {

            //---default value--
            String result = "No Data";

            //--for safety--
            try{

            //-----do time consuming stuff here ---

            }catch (Exception e){

                //---error value--
                result = "Error fetching data";
            }

            return result;
        }
    };

    //----run task----
    task.execute();
} 
```

# iphone - iPhone横向问题

> ID：13580386
> 
> 赞同：0
> 
> 时间：2012-11-27T08:49:56.263
> 
> 标签：iphone, ipad, ios6, uiinterfaceorientation

xcode:4.5.2

我想在 iPad 上创建一个应用程序；

我将 info.plist 设置如下：

初始界面方向：横向（左主页按钮）

当我启动我的应用程序时，方向设备具有横向模式，但我的视图不会旋转到这个方向。

不知道是什么，谁能帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:33:54.213

在**ios6**中，您必须使用此方法`vieworientation`

```
-(BOOL)shouldAutorotate
{
    return YES;
}
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskAll;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:31:01.930

你是否实现了以下这些方法。

```
 -(BOOL)shouldAutomaticallyForwardAppearanceMethods{   
         // This method is called to determine whether to 
         // automatically forward appearance-related containment
         //  callbacks to child view controllers.
        return YES;

    }
    -(BOOL)shouldAutomaticallyForwardRotationMethods{
        // This method is called to determine whether to
        // automatically forward rotation-related containment 
        // callbacks to child view controllers.
       return YES;
    } 
```

# facebook - 我可以将 Facebook 数据用于我的数据挖掘项目吗

> ID：13580394
> 
> 赞同：0
> 
> 时间：2012-11-27T08:50:52.363
> 
> 标签：facebook, artificial-intelligence, data-mining

首先我会告诉我想在我的数据挖掘项目中实现什么，然后我会提出问题。

我正在考虑使用 facebook 从特定位置和特定社区查找特定用户。然后根据他们每天的墙贴和喜欢，不喜欢我想生成一份关于特定社区用户正在做什么或感兴趣的报告。

这合法吗，我的意思是我可以使用我的爬虫来获取那些用户的公共数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:03:03.770

阅读 Facebook**服务条款**。

这就是他们的目的，他们告诉你你可以在他们的网站上做什么，不可以做什么。

很可能您不允许使用蜘蛛访问该网站，并且 Facebook API 将通过速率控制等限制您的数据收集能力，但运行您的应用程序的用户除外（或者您为数据付费......）

# javascript - 如何使用 Facebook 帐户登录？

> ID：13580396
> 
> 赞同：6
> 
> 时间：2012-11-27T08:50:59.000
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-login

我已经通过[这个链接](https://developers.facebook.com/docs/howtos/login/getting-started/)并尝试了代码。

我也在做同样的事情，但 Facebook 没有回应。没有弹出窗口（未阻止）。我的代码如下：

```
<div id="fb-root"></div>
<script>

// Additional JS functions here

window.fbAsyncInit = function() {

FB.init({

      appId      : 'myappid', // App ID
      channelUrl : '//myurl/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

FB.getLoginStatus(function(response) {
alert("Response");
alert("getloginstatus");
    if (response.status === 'connected') {
        // connected
    } else if (response.status === 'not_authorized') {
        // not_authorized
        login();
    } else {
        // not_logged_in
        login();
    }
});

};

  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
     alert("Lodaed SDK");
   }(document));

function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
        alert("Good to see you, " + response.name + ".");
    });
}

function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
        } else {
            // cancelled
        }
    });
}

</script>
</div> 
```

请告诉我我做错了什么。我是的，我没有任何复选框

> 选择您的应用如何与 Facebook 集成。

在创建 Facebook 应用程序期间。如果我必须定义 url 那么我给出了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-09T08:01:44.083

```
 <script>
      // This is called with the results from from FB.getLoginStatus().
      function statusChangeCallback(response) {
        console.log(response);
        // The response object is returned with a status field that lets the
        // app know the current login status of the person.
        // Full docs on the response object can be found in the documentation
        // for FB.getLoginStatus().
        if (response.status === 'connected') {
          // Logged into your app and Facebook.
          testAPI();
        } else if (response.status === 'not_authorized') {
          // The person is logged into Facebook, but not your app.
          console.log("The person is logged into Facebook, but not your app.");
        } else {
          // The person is not logged into Facebook, so we're not sure if
          // they are logged into this app or not.
        }
      }

      // This function is called when someone finishes with the Login
      // Button.  See the onlogin handler attached to it in the sample
      // code below.
      function checkLoginState() {
        FB.getLoginStatus(function(response) {
          statusChangeCallback(response);
        });
      }

      window.fbAsyncInit = function() {
        FB.init({
          appId: '{Your App Id}',
          cookie: true, // enable cookies to allow the server to access 
          // the session
          xfbml: true, // parse social plugins on this page
          version: 'v2.2' // use version 2.2
        });

        // Now that we've initialized the JavaScript SDK, we call 
        // FB.getLoginStatus().  This function gets the state of the
        // person visiting this page and can return one of three states to
        // the callback you provide.  They can be:
        //
        // 1\. Logged into your app ('connected')
        // 2\. Logged into Facebook, but not your app ('not_authorized')
        // 3\. Not logged into Facebook and can't tell if they are logged into
        //    your app or not.
        //
        // These three cases are handled in the callback function.

        FB.getLoginStatus(function(response) {
          statusChangeCallback(response);
        });

      };

      // Load the SDK asynchronously
      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));

      // Here we run a very simple test of the Graph API after login is
      // successful.  See statusChangeCallback() for when this call is made.
      function testAPI() {
        console.log('Welcome!  Fetching your information.... ');
        FB.api('/me', function(response) {
          console.log("Fb response");
          console.log(response);
          console.log('Successful login for: ' + response.name);
          document.getElementById('status').innerHTML =
            'Thanks for logging in, ' + response.name + '!';
        });
      }
      </script> 
```

> 在 Body 中，使用：-

```
 <fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
  </fb:login-button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-16T06:36:00.820

```
<!DOCTYPE html>
<html>
     <head>
     <meta charset="utf-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <title></title>
     <link rel="stylesheet" type="text/css" href="">
</head>
<body>
  <script>

  window.fbAsyncInit = function() {
        FB.init({
            appId      : '1736082853383409',
            xfbml      : true,
            version    : 'v2.8'
        });
        FB.getLoginStatus(function(response){
            if(response.status === 'connected'){
                document.getElementById('status').innerHTML = 'we are connected';
            } else if(response.status === 'not_authorized') {
                 document.getElementById('status').innerHTML = 'we are not logged in.'
            } else {
                document.getElementById('status').innerHTML = 'you are not logged in to Facebook';
            }
        });
    // FB.AppEvents.logPageView();
    };

    (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    function login(){
        FB.login(function(response){
            if(response.status === 'connected'){
                document.getElementById('status').innerHTML = 'we are connected';
            } else if(response.status === 'not_authorized') {
                 document.getElementById('status').innerHTML = 'we are not logged in.'
            } else {
                document.getElementById('status').innerHTML = 'you are not logged in to Facebook';
            }

        });
    }
    // get user basic info

    function getInfo() {
        FB.api('/me', 'GET', {fields: 'first_name,last_name,name,id'}, function(response) {
            document.getElementById('status').innerHTML = response.id;
        });
    }

    function logout(){
        FB.logout(function(response) {
            document.location.reload();
        });
    }

</script>
<div id="status"></div>
<!-- <button onclick="getInfo()">Get Info</button> -->
<button onclick="login()">login</button>
<button onclick="logout()">logout</button>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-05T21:07:06.113

使用此代码或关注[https://github.com/radhey113/facebook_login/blob/master/index1.html](https://github.com/radhey113/facebook_login/blob/master/index1.html)

```
window.fbAsyncInit = function() {
        FB.init({
          appId      : '1557876490891744',
          appSecret  :  '302f28b9110351071840458316ce232f',
          xfbml      : true,
          version    : 'v2.5'
        });
        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                document.getElementById('status').innerHTML = 'We are connected.';
                document.getElementById('login').style.visibility = 'hidden';
            } else if (response.status === 'not_authorized') {
                document.getElementById('status').innerHTML = 'We are not logged in.'
            } else {
                document.getElementById('status').innerHTML = 'You are not logged into Facebook.';
            }
        });
    };
    (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    // login with facebook with extened publish_actions permission
    function login() {
        FB.login(function(response) {
            console.log(response);
            if (response.status === 'connected') {
                document.getElementById('status').innerHTML = 'We are connected.';
                document.getElementById('login').style.visibility = 'hidden';
            } else if (response.status === 'not_authorized') {
                document.getElementById('status').innerHTML = 'We are not logged in.'
            } else {
                document.getElementById('status').innerHTML = 'You are not logged into Facebook.';
            }
        }, {scope: 'publish_actions'});
    }
    // getting basic user info
    function getInfo() {
        FB.api('/me', 'GET', {fields: 'first_name,last_name,name,id'}, function(response) {
            document.getElementById('status').innerHTML = response.id;
        });
    }
    // uploading photo on user timeline
    function uploadPhoto() {
        FB.api('/me/feed', 'post', {source: 'http://lh3.googleusercontent.com/nYhPnY2I-e9rpqnid9u9aAODz4C04OycEGxqHG5vxFnA35OGmLMrrUmhM9eaHKJ7liB-=w300', message : "SHOWDOWN POST",link:'http://54.175.71.74:3000'}, function(response) {
            if (!response || response.error) {
                console.log(JSON.stringify(response));
                document.getElementById('status').innerHTML = "Error!";
            } else {
                console.log(JSON.stringify(response));
                document.getElementById('status').innerHTML = response.id;
            }
        });
    }

    function uploadFeed(imgUrl, des) {
        console.log("img Url-------- " + imgUrl);
        $scope.loaderOverlay = false;
        var linkPage = 'http://playshowdown.com/feed?categoryName='+vm.stateType.categoryName+'&id='+ vm.stateType._id +
            '&type='+vm.stateType.type + '&feedType='+vm.stateType.feedType;
        FB.ui({
                method: 'share_open_graph',
                action_type: 'og.shares',
                action_properties: JSON.stringify({
                    object: {
                        'og:url': linkPage,
                        'og:title': "Play Showdown",
                        'og:description': des,
                        'og:image': imgUrl
                    }
                })
            },
            function (response) {
            console.log(response);
                // if(response.post_id){
                if(response.error_code != 4201){
                    vm.areYouSure = false;
                    $timeout(function(){
                        $('.overlay').show();
                        $('#congract4').show();
                    },1000);
                    console.log("post response1: " + JSON.stringify(response));
                }
                // }
                // Action after response
            })

    }
    function readPermission() {
            FB.api(
                "/debug_token?input_token=EAAWI4WLX8eABAJHx3al6NIi2pLM7ZCZBXEgFUOp2gJQ3VOh7gRbLSdZBZAJgmjcuYcYT7jaqO4mrkOyUeCI2q8kuZBqZCzJajjEqPjsZAFzFnHJPhWWozOGqKRZCCvTARTOS67G04cUyeYi9RAZBSZCrZA1Jq6FOmiyksFnhSKkEaFHOQQbZB5siATE9AQCU7prTGv0ZD",
                function (response) {
                    console.log(response)
                    if (response && !response.error) {
                        /* handle the result */
                    }
                }
            );
    } 
```

# gwt - 如何使用 Selenium WebDriver 向 GWT FileUpload 提供输入？

> ID：13580404
> 
> 赞同：0
> 
> 时间：2012-11-27T08:51:15.523
> 
> 标签：gwt, selenium, webdriver, selenium-webdriver

我需要在 GWT **FileUpload**中提供一个输入文本文件并使用 Selenium Webdriver 对其进行测试。

我有上传小部件，因为我需要提供一个文本文件作为输入。然后单击上传按钮执行我的功能。

![在此处输入图像描述](../Images/5401adc2b7c2f173835c6fedee007f16.png)

我试过这个，

```
driver.findElement(By.id("uploadField")).sendKeys("C:/Desktop/Input.txt");
driver.findElement(By.id("uploadButton")).click(); 
```

但我无法为此上传字段提供输入。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:53:50.287

请参阅此代码对我有用请参阅：在 sendkeys 中使用正确的文件路径

```
 driver.get("http://www.freepdfconvert.com/");
     driver.findElement(By.id("UploadedFile")).sendKeys("C:\\Users\\username\\Downloads\\HP1.pdf");      
     try {
         Thread.sleep(4000);
        } 
         catch (Exception e) {}
     driver.findElement(By.name("pdfsubmit")).click();
        } 
```

或者

```
 driver.findElement(By.id("uploadField")).sendKeys("C:/xyz.txt");
  driver.findElement(By.name("uploadButton")).click(); 
```

使用 name 或 Xpath 然后检查 .

**编辑**

是的，它适用于所有浏览器，但对于 IE 和 chrome，您必须添加小代码。IE：

```
DesiredCapabilities ieCapabilities = DesiredCapabilities.internetExplorer(); 
           ieCapabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, true);
             WebDriver driver = new InternetExplorerDriver(ieCapabilities); 
```

铬合金

```
 File file = new File("E://chromedriver.exe");
    System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
    WebDriver driver = new InternetExplorerDriver();` 
```

# c# - C# ListBox.DrawMode 消失了

> ID：13580407
> 
> 赞同：0
> 
> 时间：2012-11-27T08:51:23.063
> 
> 标签：c#, visual-studio-2008, listbox-control

可能是一个简单的问题，但仍然是一个谜：

错误：“System.Windows.Forms.ListBox”不包含“DrawMode”的定义...

这怎么可能？昨天我修改了 DrawMode 并制作了一个很棒的列表框。现在在相同的Visual Studio 2008 环境下，但是不同的项目，这个错误。ListBox.SelectedItem 等可用，为什么不 .DrawMode ？？？我确实有'使用 System.Windows.Forms;' 在我的来源。

* * *

好的，这是我在[微软手册](http://msdn.microsoft.com/en-US/library/ms229679%28v=vs.80%29.aspx)中找到的：

.NET Compact Framework 不支持列表框和其他控件的 DrawMode、DrawItem 和其他绘图成员，但您可以对该功能进行编程。

我又开始编程了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:03:25.357

您可能会将`System.Windows.Forms.ListBox`windows 表单与 asp.net webforms`System.Web.UI.WebControls.ListBox`中的一种或 WPF 中的一种`System.Windows.Controls.ListBox`（两者都没有该属性）混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:03:59.917

您可能创建了错误类型的项目。

例如，[System.Windows.Controls.ListBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox_properties%28v=vs.95%29.aspx)不包含 DrawMode 属性。

# android - 我应该用什么来动画角色？

> ID：13580413
> 
> 赞同：4
> 
> 时间：2012-11-27T08:51:45.380
> 
> 标签：android, ios

我想制作应用程序（就像一本带有动画的书），其中将是一个能够执行简单动作的角色，例如：

1.  来回走动（左右）。
2.  伪 3D - 角色可以走到屏幕上并远离它。
3.  Сcharacter 可以处理某种对象并使用它执行任何操作。
4.  角色可以自己转身。
5.  它应该非常好看。

所有动作都是事先知道的，这不是游戏。我想在本机 SDK（android 和 iOS）中制作的应用程序的其余部分。问题是我应该用什么来达到目标​​。对我来说最好的方法（我认为，也许你认为不同）是使用跨平台游戏引擎，但我不知道什么引擎适合这个目的。Unity 3d 看起来太复杂了。果酱-据我所知-无法将其与本机 sdk 一起使用。我可以为此目的使用 cocos2d-x 吗？

我是游戏开发的新手，我不想花很多时间研究什么是无用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:52:49.727

跨平台方式是普通的opengl或3d引擎：

*   cocos2d 非常流行。
*   unity3D 这也是不错的 IMO

普通的opengl很麻烦，而且通常效率不高，所以我会使用引擎

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:38:24.373

1.  Cocos2D-x
2.  SIO2 也不错[http://sio2interactive.com/](http://sio2interactive.com/)
3.  Unity3D（30 天评估）
4.  Shiva3D

检查[此链接](http://webification.com/best-iosandroid-cross-platform-mobile-development-sdks)。给你一个详细的对比。

# javascript - 在 javascript 中显示/隐藏 html 内容

> ID：13580415
> 
> 赞同：0
> 
> 时间：2012-11-27T08:51:50.590
> 
> 标签：javascript, jquery

我有来自后端的响应。现在我想创建一些链接，如果我单击这些链接，它应该在该链接下方显示 html 内容，如果我再次单击该链接，那些 html 内容应该会消失。我知道 jquery hide() 和 show() 。但是在这里我使用 for 循环并且我无法找到 DOM 元素，如下所示，

```
var html = "<div id=finalDiv></div>";
$("#finalDiv").dialog();
var ht;
for(var i in response) {
  ht +="<table><tr><td><label>A:</label></td><td><a onclick=\"showOneLink('"+response[i].B+"','"+i+"')\" >'"+response[i].A+"'</a></td></tr>";
  ht += "<tr><td><div id=show'"+i+"'Link style='dislay:none;'></div></td></tr></table>";
}
$("#finalDiv").append(ht); 
```

现在，当我单击 showOneLink 时，应该会显示隐藏的 div，但不会创建该 div 的 DOM。作为 ，

```
function showOneLink(B,i) {
  var htm = "<b>log:'"+B+"'</b>";
  $("#show"+i+"Link").css('display','block');
  $("#show"+i+"Link").append(htm);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:57:34.397

问题是这个 id 属性：

```
id=show'"+i+"'Link 
```

这将产生无效的 HTML： `id=show'5'Link`

将其更改为：

```
ht += "<tr><td><div id='show"+i+"Link' style='dislay:none;'></div></td></tr></table>"; 
```

也使用`toggle()`代替`css()`：

```
 $("#show"+i+"Link").toggle(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:53:24.903

选择器是字符串，关闭“”

喜欢`$("#show"+i+"Link");`

或孔代码：

```
function showOneLink(B,i) {
  var htm = "<b>log:'"+B+"'</b>";
  $("#show"+i+"Link").css('display','block');
  $("#show"+i+"Link").append(ht);
} 
```

并更好地使用切换：

```
 $("#show"+i+"Link").append(ht);
    $("#show"+i+"Link").toggle(); 
```

# java - 除了 getResourceAsStream() 之外还有其他方法来检索文件 InputStream 吗？

> ID：13580419
> 
> 赞同：1
> 
> 时间：2012-11-27T08:52:28.677
> 
> 标签：java, embedded-resource

```
InputStream str = this.getClass()
                      .getClassLoader() 
                      .getResourceAsStream( "filename" ); 
```

该文件与类在同一个包中。
它每次都返回null。无论如何我们可以`getResourceAsStream(...)`用其他方法代替吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:57:05.693

`getClassLoader`如果您想从同一个包中加载东西，请不要使用。如果你这样做，你需要给出完整的路径。

[只是](https://stackoverflow.com/questions/3061235/why-getresourceasstream-method-is-in-class-class?rq=1)

```
 InputStream str = this.getClass().getResourceAsStream( "filename" ); 
```

# java - 在java中使用机器人和presskeyevent

> ID：13580423
> 
> 赞同：1
> 
> 时间：2012-11-27T08:52:35.340
> 
> 标签：java, awtrobot

我正在做一个项目。它使用android来控制游戏中的活动，尤其是在赛车游戏中。

我可以将设备与 PC 连接并发送 3 个元素 X、Y、Z 的传感器信息。它在 word 或文件资源管理器中非常好用（我用它来向上、向下、向左和向右移动光标）。但是，当我在游戏中使用它时（flash 游戏、污垢 2、道路皮疹……）它不起作用。

我认为原因是`Robot`我使用的类！当其他应用程序（如游戏）运行时，它不起作用。那么，无论如何可以模拟在我的情况下使用的键盘吗？

非常感谢你帮助我！最良好的问候！

# css - 在窗口中间使用 iScroll 滚动列表

> ID：13580430
> 
> 赞同：0
> 
> 时间：2012-11-27T08:52:58.617
> 
> 标签：css, html, jquery-mobile, iscroll4

我的页面中有一个列表，我希望列表可以滚动，只有列表没有页面的所有其余部分...我使用`iScroll`js 文件

这是我的代码：

```
<div id="ds">
            <div id="rtrt">
    <ul data-role="listview" id="a1"                
<li>
<a href="#">1</a>
</li>
<li>
<a href="#">2</a>
</li>
<li>
<a href="#">3</a>
</li>
.
.
.
.
         </ul>
            </div>
</div>

<script type="text/javascript">
 var myScroll;
        function loaded() {
                myScroll = new iScroll('rtrt');
            }

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false);
</script> 
```

但是滚动是在所有窗口上的列表上，所以我在整个屏幕上滚动，我怎样才能只滚动屏幕中间的列表（在移动设备中）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:05:30.733

使用 CSS 可以达到相同的结果：（300 px 的高度只是一个例子，让 div 尽可能高）：

```
.rtrt{
height: 300px;
overflow: scroll
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:06:04.943

您只能使用 html/css 并且没有 javascript 也可以正常工作 您必须制作两个部分 第一部分固定在此放置您不想滚动的内容，然后在第二部分放置您需要的内容滚动它应该是这样的

```
<style type="text/css">
#first-section {
    height:100px;
    position:fixed;
    top:0;
    left:0;
    right:0;
}
#second-section{
    position:absolute;
    top:100px;
    left:0;
    right:0;
    bottom:0;
    overflow:auto;
}
</style>
<div id="first-section"><!--put fixed content here--></div>
<div id="second-section"><!--put scrollable content here--></div> 
```

# java-me - j2me ContactList.commit() 错误

> ID：13580432
> 
> 赞同：0
> 
> 时间：2012-11-27T08:53:04.263
> 
> 标签：java-me, nokia, jsr75, pim

我有一个用于使用 ContactList.commit() 编写联系人的应用程序。我在两部不同的手机上使用这个应用程序，一部是诺基亚 X2-02，另一部是三星 DUOS E2252。当我在三星 DUOS 中使用此代码时，它进入*`if`*语句内部，这意味着它支持 and 的这些字段`Contact.TEL`，`Contact.ATTR_MOBILE`并且可能还执行`c.addString(...)`语句。但是当提交使用`c.commit()`它时会抛出`PIMException`并忽略整个联系人，而在诺基亚手机中使用相同的应用程序时它可以正常工作。不知道三星不支持`ATTR_MOBILE`字段，它应该简单地忽略该字段，而不是抛出异常并忽略整个联系人。我想要做的只是忽略该特定字段，如果它不添加或其他任何内容，而不是忽略联系人。我这部分的代码如下

```
if (clist.isSupportedField(Contact.TEL)) {
                if ((clist.isSupportedAttribute(Contact.TEL, Contact.ATTR_HOME)) && (contact.getPhoneHome() != null)) {
                    c.addString(Contact.TEL, Contact.ATTR_HOME, contact.getPhoneHome());
                }
                if ((clist.isSupportedAttribute(Contact.TEL, Contact.ATTR_PAGER)) && (contact.getPager() != null)) {
                    c.addString(Contact.TEL, Contact.ATTR_PAGER, contact.getPager());
                }
                if ((clist.isSupportedAttribute(Contact.TEL, Contact.ATTR_MOBILE)) && (contact.getPhoneMobile() != null)) {
                    c.addString(Contact.TEL, Contact.ATTR_MOBILE, contact.getPhoneMobile());
                }
      }   c.commit(); 
```

# ios - PhoneGap 通知（推送）

> ID：13580434
> 
> 赞同：0
> 
> 时间：2012-11-27T08:53:14.060
> 
> 标签：ios, cordova, push

我想向我的应用程序用户发送通知，如果他们在 12:00 之前没有使用该应用程序，他们应该会收到一条消息（“你应该启动应用程序...bla bla bla”） - iOS

如果用户在 12:00 之前启动了应用程序，他们应该不会收到任何消息。

我必须使用服务器推送吗？我可以使用本地推送吗？

真挚地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:23:50.900

你可以使用任何一个......但本地通知会有点hacky。理想情况下，您需要通过自己的服务器使用 APNS，这样您就可以准确跟踪用户何时运行您的应用程序并相应地发出警报。

当然，您还需要构建一个系统来处理这个问题，并将应用程序中的数据发送回您的服务器以进行记录和处理。这相对简单，但如果您之前没有做过任何后端服务器工作，您可能会觉得很困难。

我想您可以通过在接下来的 X 天安排下午 12 点的通知来使用本地通知，如果用户在中午之前打开应用程序，则每天取消通知。但这也不理想。

就个人而言，我不确定我是否喜欢使用不断提醒我使用它的应用程序，但这只是我的意见！

# c# - 如何在 EF5 整数列与 SQL Server 上执行“包含/喜欢”？例如 Name.Contains("Fred") 的整数版本

> ID：13580439
> 
> 赞同：0
> 
> 时间：2012-11-27T08:53:38.787
> 
> 标签：c#, sql-server, entity-framework

我查看了许多关于 SO 的帖子，并提出了许多不同的答案——没有一个似乎完全有效，或者基于代码版本等相互矛盾。

我宁愿避开“AsEnumerable()”修复，因为据我了解，这会在应用查询之前评估所有结果......我想先运行查询，以便结果中的数据尽可能小.

有关信息：我正在查询的表可以包含 +200 万行。

我的要求：

通过实体框架在 SQL Server（紧凑型或标准型）的整数列上的“包含”函数。这将允许用户输入要搜索的数字，而无需提供完整的数字。与其他谓词一起，这在减少返回的数据量方面变得非常强大。

例如 `f=>f.Id.ToString().Contains("202")<br/>`

这目前失败，因为“ToString()”无法转换为实体存储命令。

或作为 T-SQL 等价物

`cast(Id as varchar(9)) LIKE '%202%'`

版本：
EF5
.Net 4.0
SQL Server 2008 Standard 或 SQL Compact

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:02:03.563

您可以使用[SqlFunctions.StringConvert](http://msdn.microsoft.com/en-us/library/dd466166.aspx)

```
f=> SqlFunctions.StringConvert((double) f.Id).Contains("202") 
```

没有重载，`int`因此您必须将其转换`double`为`decimal`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:11:31.313

首先你可以尝试使用这个函数： [SqlFunctions.StringConvert](http://msdn.microsoft.com/en-us/library/dd487127.aspx)

```
f=>SqlFunctions.StringConvert((double)f.id)).Contains("202") 
```

int 没有重载，因此您必须将类型转换为加倍。该函数被翻译成数据库中的相应函数。

另一个解决方案创建一个存储过程并从 EF 调用它：

`objectContext.ExecuteSqlCommand("storedProcedureName", SqlParameters)`

或者

```
objectContext.ExecuteStoreQuery<ResultType>("storedProcedureName", SqlParameters) 
```

# ios - 在 UIImagePickercontroller 之后禁用 shouldAutorotateToInterfaceOrientation

> ID：13580447
> 
> 赞同：1
> 
> 时间：2012-11-27T08:54:16.087
> 
> 标签：ios, uinavigationcontroller, orientation, uiimagepickercontroller

目前我有一个关于 iOS 5 上的 shouldAutorotateToInterfaceOrientation 的特殊问题。简单地说，我的整个项目应该只处理肖像，除了应该处理 UIInterfaceOrientationMaskAllButUpsideDown 的图像查看器。

基本上，我把这段代码放在我所有的 viewControllers 中：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation*)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

然后，我有一个名为 PageViewController 的 ViewController。那里有一个调用 UIImapgePicker 控制器的按钮。一旦图像被选中，我就会关闭 ViewController（imagePicker），所以我回到 PageViewController 并推动 ImageViewController。

这使 ：

```
 3 
```

PageViewController -> ImageViewController

```
 1 |   A  2
     V   | 
```

谢谢你的帮助。

图像选择器控制器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:05:31.580

发现答案在其他地方。在我的 PageViewController 中，我使用的是`UIPageViewController`. 因此，当我拍照时，我会翻一页并使用`setViewControllers:direction:animated:completion`. 但是，我在调用之后立即展示了 ImageViewController，`setViewControllers:direction:animated:completion`而不是使用完成块。所以我只是将我`presentViewController:animated:completion:`的移动到完成块中，它工作得很好。

这里的例子：

```
[self.pageController setViewControllers:controllersArray direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:^(BOOL finished) {
   if (finished)
      [self presentViewController:imageController animated:NO completion:nil];
} 
```

希望这对其他人有帮助。

# c - 当我用 fork 运行两个进程时出现分段错误

> ID：13580448
> 
> 赞同：0
> 
> 时间：2012-11-27T08:54:20.610
> 
> 标签：c, segmentation-fault, fork

当我运行这个程序时：

```
#include <sys/types.h>
#include <pthread.h>
#include <sys/mman.h>
#include <stdio.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <unistd.h>
#include <sys/wait.h>
#include <stdlib.h>

int main () {

    int stat;

    pthread_mutex_t *mutex = (pthread_mutex_t*)mmap (0, sizeof (pthread_mutex_t) + sizeof (long),PROT_READ | PROT_WRITE,
                                                     MAP_SHARED ,-1, 0);

    long *data = (long*)(&mutex[1]); /* map 'data' after mutex */
    int pid;

    pthread_mutexattr_t attr;
    pthread_mutexattr_init (&attr);
    pthread_mutexattr_setpshared (&attr, PTHREAD_PROCESS_SHARED);
    pthread_mutex_init (mutex, &attr);

    *data = 0;

    pid = fork ();

    pthread_mutex_lock (mutex);
    (*data)++;
    pthread_mutex_unlock (mutex);

    if (!pid) /* child exits */
        exit (0);
    else
        waitpid (pid, &stat, 0);
    printf ("data is %ld\n", *data);

    return 0;
} 
```

我有`segmentation fault`！请问有什么问题？我能做些什么来解决这个错误？

调试后`valgrind`，我有这个消息：

```
==28660== Process terminating with default action of signal 11 (SIGSEGV)
==28660==  Access not within mapped region at address 0xF
==28660==    at 0x4E35C10: pthread_mutex_init (pthread_mutex_init.c:83)
==28660==    by 0x4008F0: main (in /home/program)
==28660==  If you believe this happened as a result of a stack
==28660==  overflow in your program's main thread (unlikely but
==28660==  possible), you can try to increase the size of the
==28660==  main thread stack using the --main-stacksize= flag.
==28660==  The main thread stack size used in this run was 8388608. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:17:31.830

如果您尝试在`mmap`没有文件描述符的情况下调用（不受文件或设备支持），则应设置该`MAP_ANONYMOUS`标志。没有`MAP_ANONYMOUS`，您将收到`EBADF`错误消息。

> `fd`不是有效的文件描述符（并且`MAP_ANONYMOUS`未设置）。

`MAP_SHARED | MAP_ANONYMOUS`如果没有文件或设备支持，请尝试用作标志。

IE：

```
pthread_mutex_t *mutex = (pthread_mutex_t*)mmap (0, sizeof (pthread_mutex_t) + sizeof (long),PROT_READ | PROT_WRITE,
                                                 MAP_SHARED | MAP_ANONYMOUS ,-1, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:12:09.363

你`mmap(void *start, size_t length, int prot , int flags, int fd, off_t offset);`用 fd -1 打电话。据我所知，使用 -1 调用 mmap 是无效的。

检查`if (mutex == MAP_FAILED)`mmap是否成功，如果失败，通过检查找出mmap产生了哪个错误`errno`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T11:31:04.400

我尝试编译并运行您的程序。即使我也面临同样的问题，分段错误。

解决方案：如果您传递值为“-1”的 fd，请养成使用“MAP_ANON”标志的习惯，例如（MAP_SHARED | MAP_ANON）。

希望这能解决你的问题:)

# php - Vtiger 客户门户设置问题

> ID：13580455
> 
> 赞同：0
> 
> 时间：2012-11-27T08:54:36.637
> 
> 标签：php, vtiger

这很愚蠢，但我不明白出了什么问题。我正在尝试设置[Vtiger 客户门户](http://prdownloads.sourceforge.net/vtigercrm/vtiger_Customer_Portal_4_2.zip?download)

我遵循了[用户指南](https://wiki.vtiger.com/archives/index.php/Vtiger_Customer_Portal_User_Guide#Installing_vtiger_Customer_Portal)

但是当我尝试访问`customerportal`Nothing的索引页面时，屏幕上似乎没有写入index.php文件。在萤火虫它显示一个错误：

`The character encoding of the HTML document was not declared. The document will render with garbled text in some browser configurations if the document contains characters from outside the US-ASCII range. The character encoding of the page must be declared in the document or in the transfer protocol.`

但这不应该是程序无法运行的原因。正确的 ？我怎样才能开始调试出了什么问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T11:56:51.460

你还有问题吗？您是否确保将客户门户的 URL 放在实际 vTiger 安装的 config.inc.php 中？

例如

```
$PORTAL_URL = 'http://mysite.co.uk/portal'; 
```

# java - 组件迭代和验证问题

> ID：13580457
> 
> 赞同：0
> 
> 时间：2012-11-27T08:54:39.100
> 
> 标签：java, swing, jtextfield, jcombobox, inputverifier

我有一种方法可以检查`JTextField`面板中的所有 s`JPanel`以查看它们是否为空，并遍历容器中的所有组件。在容器中，我有标签、文本字段和组合框。所以我可以验证前几个`JTextField`s，但是当我遇到第一个`JComboBox<?>`验证停止时，我似乎不明白为什么。以下是代码：-

```
private boolean validateInputFields(JPanel container) {
    for (Component comp : container.getComponents()) {

        if (comp instanceof JTextField) {
            JTextField temp = (JTextField) comp;
            if (temp.getText().trim().equals("")) {
                changeComponentProperties(temp);
                return true;
            } else{
                temp.setBackground(Color.WHITE);
                temp.setForeground(Color.BLACK);
            }
        }
    }

    return false;
} 
```

任何帮助将不胜感激。

另请注意，这是在单击按钮（例如保存按钮）时调用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:32:28.787

> 所以我可以验证前几个`JTextFields`，但是当我遇到第一个`JComboBox<?>`验证停止时，我似乎不明白为什么

我怀疑情况是否如此。我认为当您第一次遇到`JTextField`带有空字符串作为上下文的 a 时，您的循环会停止。在这种情况下，您输入以下内容`if`

```
if (temp.getText().trim().equals("")) {
  changeComponentProperties(temp);
  return true;
} 
```

并且该`return`语句使您退出循环。将其调整为以下应该可以解决问题

```
private boolean validateInputFields(JPanel container) {
   boolean result = false; 
   for (Component comp : container.getComponents()) {

        if (comp instanceof JTextField) {
            JTextField temp = (JTextField) comp;
            if (temp.getText().trim().equals("")) {
                changeComponentProperties(temp);
                result = true;
            } else{
                temp.setBackground(Color.WHITE);
                temp.setForeground(Color.BLACK);
            }
        }
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:13:48.707

```
private boolean validateInputFields(JPanel container) {
for (Component comp : container.getComponents()) {
if (!comp instanceof JTextField) {
continue;
}
else{
JTextField temp = (JTextField) comp;
if (temp.getText().trim().equals("")) {
changeComponentProperties(temp);
return true;
} else{
temp.setBackground(Color.WHITE);`enter code here`
temp.setForeground(Color.BLACK);
}
}
}
}
return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T00:56:15.280

非常感谢所有做出贡献的人，您提供的所有解决方案都是有效且可行的，但在我的情况下，我发现了问题 - 问题是某些组件在屏幕上不可见，并且在通过获取的组件进行迭代时，它们也不包括在内，所以我添加了一个条件来检查组件的可见性状态，即`comp.isVisible()`。

# ms-access - 查询表达式中的语法错误（缺少运算符）？

> ID：13580459
> 
> 赞同：2
> 
> 时间：2012-11-27T08:54:46.990
> 
> 标签：ms-access

我试图了解 COUNT(*)，因此我创建了一个测试查询：

```
 SELECT COUNT(*)
 WHERE COUNT(UITLENINGEN.LLNR) >= 30; 
```

当我单击执行时，我收到以下错误：

> 查询表达式 COUNT(*) WHERE COUNT(UITLENINGEN.LLNR) >= 30 中的语法错误（缺少运算符）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:58:40.823

尝试这个

```
SELECT COUNT(*) FROM UITLENINGEN GROUP BY LLNR HAVING COUNT(UITLENINGEN.LLNR) >= 30; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:20:57.387

我不明白你想做什么。下面的查询基于一个包含名为 的字段的表`category_id`。它用于`GROUP BY category_id`计算每个此类组中的行数。该`HAVING`子句将结果集限制为仅计数至少为 30 的那些组。

```
SELECT category_id, COUNT(*)
FROM YourTable
GROUP BY category_id
HAVING COUNT(*) >= 30; 
```

如果这与您想要完成的事情不同，请向我们提供更详细的信息，以便我们更好地了解您的情况。一组简短的样本数据以及基于该样本所需的输出将大有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:57:53.497

您尚未指定应从中检索数据的表。尝试以下

```
 SELECT COUNT(*) from tableName
    WHERE COUNT(UITLENINGEN.LLNR) >= 30; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T08:57:57.530

将您的表名添加到查询中。

```
SELECT COUNT(*) FROM UITLENINGEN WHERE COUNT(UITLENINGEN.LLNR) >= 30; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T09:14:44.463

请`having`在需要聚合函数的地方添加表名和使用语句。例如：

```
select count(*) 
from UITLENINGEN
having count(UITLENINGEN.LLNR) >= 30; 
```

# javascript - Kindle Fire 中的 Webview 浏览器

> ID：13580466
> 
> 赞同：0
> 
> 时间：2012-11-27T08:55:26.117
> 
> 标签：javascript, android, webview, amazon, kindle-fire

Kindle Fire中使用的webview浏览器和普通的Android webview一样吗？如果不是，有什么区别？具体来说，我对在为 Kindle Fire 调整网络应用程序时必须注意的性能问题或怪癖感兴趣。亚马逊不会向瑞典发送任何 Kindle Fire，所以我还不能自己测试它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:42:02.043

虽然 Kindle Fire 使用 Amazon Silk 作为其 Web 浏览器进行正常的 Web 浏览，但 Kindle Fire 上的 WebView 控件是通用 android 上的常规 WebView 控件。

事实上，Kindle Fire 7” HD 设备、Kindle Fire 7” HD 模拟器和通用 Android 设备（均运行 Android 4.0.3）上的 UserAgent 字符串都应该匹配并读取：

> Mozilla/5.0 (Linux; U; Android 4.0.3; **LOCALE** ; **MODEL** ) AppleWebKit/534.30 (KHTML, Like Gecko) 版本/4.0 Safari/534.30

**`LOCALE`**并且**`MODEL`**会因不同的设备和用户设置而异。不同的设备id应该对应`android.os.Build.MODEL`android系统属性；Kindle Fire 型号 ID 列表可在此处找到：[https ://developer.amazon.com/sdk/fire/specifications.html](https://developer.amazon.com/sdk/fire/specifications.html)

因此，在 Kindle Fire 设备和 Kindle Fire 模拟器上测试您的应用程序在这方面应该没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T20:31:30.940

Kindle Fire 和 iPad Kindle 应用程序处理通过应用程序访问的网站与通过电子书中的链接访问的网站似乎确实存在差异。在 iPad Kindle 阅读器上，Kindle 书籍中的链接都通过 webkit。浏览器地址行和其他典型的浏览器功能都没有。在 Kindle Fire 上，通过应用程序访问的网站使用 webview——没有浏览器 URL 地址窗口等。但是，电子书中的链接似乎会激活默认浏览器 Silk。您将获得完整的浏览器体验：URL 等。不确定是否有办法改变这种情况。我更喜欢 webkit/webview 方法，它使电子书更具连续性。回到书本也更容易，而在 KF 上使用 Silk，您必须找到后退按钮。

# java - 平面文件处理

> ID：13580468
> 
> 赞同：0
> 
> 时间：2012-11-27T08:55:30.390
> 
> 标签：java, regex, flat-file

我有一个包含固定长度数据的平面文件，是否有任何好的方法来解析数据并使用常规出现拆分行，即对于以“02”开头的每个出现都应该是一个新行，并且应该存储一些在哪里？我已经使用过使用 XML 的 Flatworm，如果要插入大量固定长度的数据，这将是一个漫长的过程？

注意：我已经使用 Flatworm 和 FFP 在 stackoverflow 中完成了一些平面文件解析示例，但不能成为标准示例，因为我正在尝试将其作为实用程序类进行。

文本文件似乎是这样的：

> 022010015450696611KR GERGIN MR vvvv 020100145078211PETRO EMILIAN MR vvv

# windows - 运行 .bat 文件时如何隐藏 ms-dos 窗口？

> ID：13580474
> 
> 赞同：7
> 
> 时间：2012-11-27T08:56:20.103
> 
> 标签：windows, windows-7, batch-processing, batch-file

我每分钟为我的脚本（Scheduled Tak (CronJob)）运行一个 .bat 文件。当它运行时，windows 命令提示符会出现一段虚构的时间。

我的批处理代码是这样的；

```
@ECHO OFF
C:\wamp\bin\php\php5.4.3\php.exe -f "C:\wamp\www\tst\index.php" 
```

运行时如何隐藏此窗口？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T09:07:26.490

使用 VBScript

```
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run("C:\yourbatch.bat"), 0, True 
```

运行将隐藏批处理文件的运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-12T05:01:16.470

我不喜欢 VBScript 解决方案。

下载[nircmd.exe](http://www.nirsoft.net/utils/nircmd.html)并将其复制到您的`%systemroot%\system32`文件夹，然后将此命令添加到批处理的第一行：

```
nircmd.exe win hide ititle "cmd.exe" 
```

或首先使用`title`命令自定义批处理标题以避免隐藏所有`cmd`窗口，如下所示：

```
title MyBatch
nircmd.exe win hide ititle "MyBatch" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-30T22:36:15.057

此 VBScript 在 %Temp% 中创建批处理文件的副本，静默执行，然后将其删除

```
Dim fso

Set fso = CreateObject("Scripting.FileSystemObject")

Dim tempfolder

Const TemporaryFolder = 2

Dim WshShell, strCurDir

Set WshShell = CreateObject("WScript.Shell")

strCurDir    = WshShell.CurrentDirectory

batch = "@ECHO OFF" & vbCrLf & _
        "C:\wamp\bin\php\php5.4.3\php.exe -f C:\wamp\www\tst\index.php"

Set tempfolder = fso.GetSpecialFolder(TemporaryFolder)

WshShell.CurrentDirectory = tempfolder

i=1

n=0

While n <> 1

If (fso.FileExists(i&".bat")) Then

  i = i + 1

Else
  n = 1

End If

Wend

Set File = fso.CreateTextFile(i&".bat",True)

File.Write batch

File.Close

Dim batchfile

batchfile = fso.GetAbsolutePathName(i&".bat")

WshShell.CurrentDirectory = strCurDir

WshShell.Run chr(34) & batchfile & Chr(34), 0, TRUE

fso.DeleteFile batchfile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-02T00:13:12.220

我知道这篇文章很旧，但这是我的解决方案，来自 dostips 的 AGerman 帮助我编写了这个脚本，它非常有用。

```
@echo off &setlocal EnableExtensions DisableDelayedExpansion

:: Change the working directory to the directory of the batch file.
:: If the first passed argument was ~e~ (that is, the batch file was called from the VBScript)
::  then shift the parameters by one and continue at label :elevated
cd /d "%~dp0"&if "%~1"=="~e~" (shift&goto :elevated)

:: Assign the passed arguments to variable param.
set "param=%*"

:: NET SESSION fails if the batch code doesn't run with elevated permissions.
::  Assign variable __verb to "open" if the batch file runs elevated or to "runas" if it doesn't run elevated
>nul 2>&1 net session &&(set "__verb=open")||(set "__verb=runas")

:: Assign the name of the VBScript to variable vbs.
:: Assign the full name of the batch file to variable me.
:: Enable delayed variable expansion.
set "vbs=%temp%\uac.vbs"&set "me=%~f0"&setlocal enabledelayedexpansion

:: If arguments were passed, prepare them to be passed from within the VBScript by doubling the quotation marks.
if defined param set "param=!param:"=""!"

:: Write the VBScript. The ShellExecute method will run the batch file in a cmd.exe process where ~e~ will be passed as
::  first argument followed by the original arguments (saved in param). The UAC will be invoked if __verb was set to "runas".
::  Elsewise the UAC will not be invoked. For further information about the ShellExecute method see:
::  https://msdn.microsoft.com/en-us/library/windows/desktop/gg537745(v=vs.85).aspx
>"!vbs!" echo CreateObject("Shell.Application").ShellExecute "!comspec!", "/c """"!me!"" ~e~ !param!""", "", "%__verb%", 0

:: Run the VBScript in a cscript.exe process.
:: Delete the VBScript file.
:: Quit the batch execution.
cscript //nologo "!vbs!"&del "!vbs!"&goto :eof

:elevated
::~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
:: Do your elevated stuff here... 
```

# c# - 单线程公寓问题

> ID：13580475
> 
> 赞同：8
> 
> 时间：2012-11-27T08:56:31.980
> 
> 标签：c#, winforms, multithreading, thread-safety

从我的主窗体中，我调用以下命令来打开一个新窗体

```
MyForm sth = new MyForm();
sth.show(); 
```

一切都很好，但是这个表单有一个组合框，当我将其 AutoCompleteMode 切换为建议和附加时，我在显示表单时遇到了这个异常：

*在进行 OLE 调用之前，必须将当前线程设置为单线程单元 (STA) 模式。确保您的 Main 函数上标记了 STAThreadAttribute。*

我已经按照异常的要求在我的主要功能上设置了这个属性：

```
[STAThread]
static void Main(string[] args)
{ ... 
```

我能否获得一些帮助以了解可能出现的问题。

示例代码：

```
private void mainFormButtonCLick (object sender, EventArgs e)
{
    // System.Threading.Thread.CurrentThread.SetApartmentState(ApartmentState.STA); ?
    MyForm form = new MyForm();
    form.show();
} 
```

设计师：

```
this.myCombo.AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.Suggest;
this.myCombo.AutoCompleteSource = System.Windows.Forms.AutoCompleteSource.ListItems;
this.myCombo.FormattingEnabled = true;
this.myCombo.Location = new System.Drawing.Point(20, 12);
this.myCombo.Margin = new System.Windows.Forms.Padding(4, 5, 4, 5);
this.myCombo.Name = "myCombo";
this.myCombo.Size = new System.Drawing.Size(430, 28);
this.myCombo.Sorted = true;
this.myCombo.TabIndex = 0; phrase"; 
```

设置数据源

```
public MyForm(List<string> elem)
{
    InitializeComponent();
    populateColorsComboBox();
    PopulateComboBox(elem);
}

public void PopulateComboBox(List<string> list )
{
    this.myCombo.DataSource = null;
    this.myCombo.DisplayMember = "text";
    this.myCombo.DataSource = list;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:55:00.973

Is `Main(string[] args)` really your entry point?

Maybe you have another Main() overload with no parameters. Or some other Main() in another class. Please open Project properties and look for the start object.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:32:57.027

Windows 窗体应用程序必须以 STA 方法运行。

见这里：[你能解释一下 STA 和 MTA 吗？](https://stackoverflow.com/questions/127188/could-you-explain-sta-and-mta)

并且 COM 开始发挥作用，因为 Windows 窗体开始发挥作用，因为控件本身使用本机 Windows 句柄，因此必须遵守 STA 模型。我确实相信您在这个特定位置收到错误的原因是 AutoCompletion 在内部创建/使用了第二个线程。

而且据我的经验，线程模型必须在 Main 中设置，以后更改它只能从 STA 到 MTA，但不能反过来

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:47:47.427

作为一个疯狂的想法：以第二种形式创建源列表的深层副本，并将组合框绑定到列表的副本而不是原始列表。

# macos - MAC-Xcode 不可用

> ID：13580479
> 
> 赞同：1
> 
> 时间：2012-11-27T08:56:51.543
> 
> 标签：macos

我正在使用 mac 10.7.3。我已经安装了 Xcode。当我重新启动或关闭 Xcode 不可用的系统时。我是 mac 新手。请有人帮忙解决这个问题

# git - 更新**不是**当前分支（在 Git 中）

> ID：13580484
> 
> 赞同：2
> 
> 时间：2012-11-27T08:57:10.420
> 
> 标签：git, branch, updates, pull, git-checkout

所以我在分支`feature`。我想用 branch 变基`master`。

```
git rebase master 
```

它说`feature`分支是最新的。当然这是因为分支没有改变——它和我从它创建分支的`master`那一刻一样。`feature`

实际上并非如此。我需要做的就是拉入`master`分支。

```
git checkout master
git pull
git checkout feature 
```

我的问题：我不能在没有`master`签出的情况下更新分支吗？

`feature`我从分支尝试过：

```
git pull origin master master 
```

...但它更新`feature`了分支（不是我想要的）并且它在其中“提交”了“in furure”。

感谢任何建议！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T09:04:28.387

如果您确定您没有`master`想要保留的任何内容，您可以执行以下操作：

```
git fetch
git update-ref refs/heads/master origin/master 
```

但是，如果您经常这样做，那么保留您的 master 分支确实没有意义。只需将远程跟踪分支 ( `origin/master`) 用于合并、差异、变基等，因为它由`git fetch`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:46:27.827

```
git push . origin/master:master 
```

点指的是当前存储库。这将阻止您进行非快进更新。如果您仍然想要这样做，您可以添加`-f`or`--force`选项。

# c++ - 制作 OpenCV 时出错

> ID：13580485
> 
> 赞同：12
> 
> 时间：2012-11-27T08:57:13.280
> 
> 标签：c++, opencv, makefile, cmake

我收到此错误：

> OpenCV-2.4.3/modules/features2d/src/freak.cpp:437：错误：无法在“GENERAL_REGS”类中找到要溢出的寄存器

做完之后：

```
tar xfj OpenCV-2.4.3.tar.bz2
cd OpenCV-2.4.3
mkdir release
cd release
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_NEW_PYTHON_SUPPORT=ON -D BUILD_EXAMPLES=ON ..
make 
```

相同的过程适用于另一台机器。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T06:00:58.250

您需要深入研究 Makefile 以删除freak.cpp 的-O。

更新：这正是人们应该做的（用 2.4.3 和 2.4.4 测试）。

你需要编辑

```
YOUR_BUILD_DIR/modules/features2d/CMakeFiles/opencv_features2d.dir/build.make 
```

搜索怪胎.cpp。您会发现三个块：构建 CXX...、预处理 CXX... 和编译 CX...。我只需要更改构建部分。该块的最后一行如下所示：

```
.... YOUR_COMPILER $(CXX_DEFINES) $(CXX_FLAGS) ... 
```

如果你检查你会发现 CXX_FLAGS 里面有一个 -O3 。如果您在 CXX_FLAGS 之后添加 -O0，它会抑制 O3。所以你的线条应该是这样的。

```
.... YOUR_COMPILER $(CXX_DEFINES) $(CXX_FLAGS) -O0 ... 
```

这至少在这里工作！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T18:24:27.213

我在 CentOS 5.x boxen 上也为此苦苦挣扎了好几个小时，这是我的解决方案。

很明显，您需要更新“gcc”，但需要通过 RPM 进行本地升级，或者只是随机获取 RPM，从而导致服务器上出现一些严重的配置管理问题。我现在也没有时间通过​​源代码编译 gcc/g++。在 repo 中放牧了一段时间后，我发现在基础 repo 中确实有一个 4.x 版本的 gcc。

执行此操作（或在 OP 无权访问的情况下使用“root”执行此操作）：

```
 # yum install gcc44 gcc44-c++ -y 
```

...CentOS/RHEL 已经捆绑了 gcc-4.4.6 的预览 RPM。

然后，当您执行“cmake”构建发布环境时，至少执行以下操作（您的 cmake 参数可能会有所不同）：

```
 # cd /path/to/OpenCV-2.4.3
  # mkdir release && cd release 
  # env CC=/usr/bin/gcc44 CXX=/usr/bin/g++44 cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/place/to/install/ -D BUILD_PYTHON_SUPPORT=ON /path/to/OpenCV-2.4.3/ 
```

这将为您提供使用 CenOS/RHEL 5.x 本地成功构建的 OpenCV-2.4.3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-02T10:20:56.160

遇到了同样的问题，并像 wisehippy 一样解决了它，只需稍作改动：

```
# yum install gcc44 gcc44-c++ -y
# mkdir release && cd release 
# cmake -D CMAKE_BUILD_TYPE=RELEASE -DCMAKE_CXX_COMPILER=/usr/bin/g++44 -DCMAKE_C_COMPILER=/usr/bin/gcc44 <OpenCV_Dir> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-11T20:35:02.810

一旦我更新我`c++`的指向`g++44`，而不是默认`g++`的 4.1，我发现问题得到解决。

在执行此步骤之前，以 root 身份验证文件是否相同，您可能不需要。

```
diff /usr/bin/c++ /usr/bin/g++ 
```

如果文件相同，则不应返回任何内容。如果是这种情况，请继续。备份您的旧文件。您也可以删除该文件，因为它与 相同`g++`，但我喜欢小心。

```
mv /usr/bin/c++ /usr/bin/c++4.1 
```

创建一个链接，以便`C++`指向您的`g++44`. 您也可以在此处使用符号链接。

```
ln /usr/bin/g++44 /usr/bin/c++ 
```

完毕。

# android - 文本区域/输入字段仅在 chrome / webview 中在 Samasung s3 上填写部分文本

> ID：13580486
> 
> 赞同：0
> 
> 时间：2012-11-27T08:57:14.410
> 
> 标签：android, input, webview, textarea

我们在三星 s3（运行 android 4.0.4）上观察到我们的应用程序存在一个非常奇怪的错误

在文本区域中输入文本时，只会填充每个单词的第一个字符，并且只有在您按下空格或从预测文本中选择一个单词之后。

键入“what the hell ..”将导致在文本区域中输入“wt h”

不同屏幕上的其他文本区域工作正常。

关闭预测文本也解决了这个问题。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:05:09.463

经过进一步调查，我们注意到有问题的文本区域在获得焦点时并没有改变外观 - 我们所有的工作文本字段在单击时都变成了带有橙色边框的方形角字段。

事实证明，android 做了一些奇怪的事情，并在它们获得焦点时用原生元素动态替换您的输入字段（因此无法使用橙色边框的方形位：（）。

踢球者 - 如果您的输入位于具有 css 绝对定位的元素内，则此操作失败，并且这似乎也弄乱了某些形式的键盘输入。将元素（和父元素）设置为使用位置静态解决了这个问题。

我们仅在启用预测文本时在 s3 上看到了这一点（这是默认设置..），但它可能在其他设备上。

将此归结为 Androids 浏览器仍然是一团糟..

请注意，使用这个 css hack 来阻止原生元素被替换：

```
 input:focus { -webkit-user-modify: read-write-plaintext-only; } 
```

导致我们所有的文本字段都有这个线程中概述的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T07:12:54.113

我也有这个问题很长一段时间，但发现停止这个故障的关键是每次遇到第一个字符输入问题时关闭键盘设置中的预测文本选项。就个人而言，我喜欢 99% 的时间都使用预测文本，但是某些网页（主要是电子邮件提供商）没有配置为使用预测文本，所以我保持预测文本打开并在遇到时将其关闭我遇到第一个字符输入唯一问题的网页。要打开/关闭它，只需点击键盘上的 cog 按钮，在它显示预测文本的地方，只需将滑块向左滑动到关闭位置。这将允许输入整个单词，而不是一次只输入 1 个字符。然后，一旦你完成输入，你可以再次点击齿轮并重新打开预测文本。

# java - Sonar 中的文件命名约定定义

> ID：13580490
> 
> 赞同：2
> 
> 时间：2012-11-27T08:57:21.220
> 
> 标签：java, sonarqube, checkstyle

我有一个有几层的java项目。我想为 Sonar 服务器中的文件命名约定定义一个规则，例如，包`app.name.dao`中的每个文件的名称都类似于`ClassNameDAO.java`.

使用 Sonar 使用的某些工具可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:04:54.403

除了创建一个专用的 Checkstyle 规则 (http://checkstyle.sourceforge.net/writingchecks.html) 之外，我没有看到任何其他选项，它将嵌入到您自己的 Sonar 插件中。

这是定义简单 Checkstyle 规则的此类 Sonar 插件的示例：[https ://github.com/SonarSource/sonar-examples/tree/master/plugins/sonar-checkstyle-extension-plugin](https://github.com/SonarSource/sonar-examples/tree/master/plugins/sonar-checkstyle-extension-plugin)

# macos - 如何在 Macbook Pro 上启用对 CPU 虚拟化的支持？

> ID：13580491
> 
> 赞同：48
> 
> 时间：2012-11-27T08:57:32.327
> 
> 标签：macos, cpu, virtualization

我在我的 Macbook Pro 上安装了 VirtualBox，我想在 VirtualBox 上安装一个 linux VM。当我启动新的虚拟机时，它提示“你的 CPU 不支持长模式。使用 32 位分发。”

搜索了这个问题，发现这个VM需要CPU虚拟化的支持。然后我检查了我的 Macbook，它的 CPU 是支持虚拟化的 i7。所以我猜这个问题与操作系统或 EFI 版本有关？

操作系统版本：10.6.8 / EFI 版本：最新（查看 apple.com）

有人知道我的 Macbook 有什么问题吗？如何启用对 CPU 虚拟化的支持？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-04-29T04:16:23.650

CPU 虚拟化在所有具有兼容 CPU（i7 兼容）的 MacBook 上默认启用。如果您认为[PRAM](https://support.apple.com/en-us/HT204063)以某种方式被禁用，您可以尝试重置它，但我对此表示怀疑。

我认为问题可能出在旧版本的操作系统中。如果您的 MacBook 是 i7，那么您最好将操作系统升级到更新的版本。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-27T01:42:32.500

这是一种检查固件是否启用或禁用虚拟化的方法，如parallels.com中 的此[链接所建议的那样。](http://kb.parallels.com/en/5653)

如何检查 CPU 是否支持 Intel VT-x：

1.  从应用程序/实用程序打开终端应用程序

2.  复制/粘贴命令如下

`sysctl -a | grep machdep.cpu.features`

3.  您可能会看到类似于以下内容的输出：

`Mac:~ user$ sysctl -a | grep machdep.cpu.features kern.exec: unknown type returned machdep.cpu.features: FPU VME DE PSE TSC MSR PAE MCE CX8 APIC SEP MTRR PGE MCA CMOV PAT CLFSH DS ACPI MMX FXSR SSE SSE2 SS HTT TM SSE3 MON VMX EST TM2 TPR PDCM`

如果您看到 VMX 条目，则 CPU 支持 Intel VT-x 功能，但它仍然可能被禁用。

请参阅 Apple.com 上的此[链接](https://support.apple.com/en-us/HT203296)以启用对虚拟化的硬件支持：

# sql - 如何在sql中获取开始日期和结束日期？

> ID：13580493
> 
> 赞同：1
> 
> 时间：2012-11-27T08:57:42.447
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, scd

我有一张看起来像这样的小桌子：

```
PLAN    YRMTH
A2BKG   197001
A2BKG   200205
A2BKG   200308
A2BKG   200806 
```

从这张表中，我如何获得如下表？

```
 PLAN STARTDATE   ENDDATE
    A2BKG   197001      200205
    A2BKG   200205      200308
    A2BKG   200308      200806
    A2BKG   200806      NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:05:26.940

尝试这个

```
;with cte as 
(select *, ROW_NUMBER() over (partition by [plan] order by yrmth) rn from yourtable)
    select 
        t1.[plan],
        t1.YRMTH as startdate,
        t2.YRMTH as enddate
    from cte t1
        left join cte t2 on t1.[plan]=t2.[plan]
            and t1.rn=t2.rn-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:09:11.590

这就是我在 oracle 中尝试过的，在 sql-server 2012 中也可以使用相同的方法......我的坏:(

```
select plan,yrmth,lead(yrmth) over (partition by lower(plan) order by rowid)  from tbl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:05:56.017

这样的事情可能会有所帮助：

```
SELECT  
[PLAN], 
YRMTH AS STARTDATE,
(SELECT MIN(YRMTH) FROM yourTable T 
WHERE T.[Plan] = yourTable.[Plan] AND T.YRMTH > Test1.YRMTH) AS  ENDDATE
FROM yourTable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:10:15.817

```
select t1.PLAN, t2.STARTDATE, 
 (select top 1 STARTDATE from table t2 where  t1.PLAN =t2.PLAN
                  and t1.STARTDATE<t2.STARTDATE) as ENDDATE
from table t1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T09:11:56.207

我的临时表解决方案。

```
-- Create a temp table, containing an extra column, ID
DECLARE @orderedPlans 
(
   ID int,
   Plan varchar(64),
   YrMth int
)

-- Use contents of your table, plus ROW_NUMBER, to populate
-- temp table.  ID is sorted on Plan and YrMth.
--
INSERT INTO 
  @orderedPlans
(
   ID,
   Plan,
   YrMth
)
SELECT ROW_NUMBER() OVER (ORDER BY Plan, YrMth) AS ID,
  Plan,
  YrMth
FROM 
  YourTable

-- Now join your temp table on itself
-- Because of the ROW_NUMBER(), we can use ID - 1 as a join
-- Also join on Plan, so that the query can handle multiple plans being
-- in the table
SELECT 
    p1.Plan,
    p1.YrMth AS StartDate,
    p2.YrMth AS EndDate
FROM
  @orderedPlans p1
LEFT JOIN
  @orderedPlans p2
ON
    p1.Plan = p2.Plan
AND p1.ID = p2.ID - 1 
```

# jquery - 是否使用 phonegap 捕获图像保存在 iPhone 的照片库中

> ID：13580495
> 
> 赞同：0
> 
> 时间：2012-11-27T08:57:50.057
> 
> 标签：jquery, iphone, cordova

我使用 phonegap 从设备捕获图像，现在我想将该图像保存在 iPhone 的 photogalary 中。请让我知道这是否可能？

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:17:15.620

```
navigator.camera.getPicture(onSuccessCapturePhoto, onFailCapturePhoto, {
                    quality : 50,
                    destinationType : navigator.camera.DestinationType.FILE_URI,
                                            saveToPhotoAlbum : true
            }); 
```

我使用 `saveToPhotoAlbum : true`，因为这些图像保存在相册中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:08:21.317

当您想将图像保存在图库中时，只需添加此行

```
 UIImageWriteToSavedPhotosAlbum(UIImage *image, id completionTarget, SEL completionSelector, void *contextInfo); 
```

如果要在图像保存完成时收到通知，则只需要 completionTarget、completionSelector 和 contextInfo，否则可以传入 nil。

例如..

```
UIImageWriteToSavedPhotosAlbum(yourImage,nil,nil,nil); 
```

# php - 创建在类别中单击时显示所有产品的菜单，php

> ID：13580496
> 
> 赞同：1
> 
> 时间：2012-11-27T08:57:51.033
> 
> 标签：php, categories

我有两张桌子：

```
category
id | name

products
id | cat_id | name.. 
```

就像标题一样，我想创建一个类别菜单，当我点击一个类别时，它将显示该类别中的所有产品。我尝试了几种方法，但都不行！这是我的 menu.php

```
 try { 

    $dbh = new PDO("mysql:host=$hostname;dbname=...", $username, $password);

    $sql = "select * from category";
    echo "<table>";
    echo "<tr><th>ID</th><th>Name</th></tr>";
    foreach ($dbh->query($sql) as $row)
        {
        $c_id=$row['c_id'];
        echo "<tr>";
        echo "<td>" . $row['c_id'] ."</td>";
        echo "<td><a href='deal_list.php?cat_id=$c_id'>" . $row['c_name'] . "</td>";

        echo "</tr>";
        }
    echo "</table>";

        $dbh = null;
    }
    catch(PDOException $e) { echo $e->getMessage(); }

?> 
```

这是我的产品清单

```
try { 
    $cat_id = $_GET['cat_id'];
    $dbh = new PDO("mysql:host=$hostname;dbname=..", $username, $password);

    $sql = "select id,name,description,price,groupbuy_price, CEIL((groupbuy_price/price)*100) AS saving,current_buyer,maximum_buyer,expired_time,status,sum_img,cat_id,c_name from groupbuy,category where c_id=cat_id";
    echo "<table border=2px>";
    echo "<tr><th>Name</th><th>Description</th><th>Price</th><th>Group buy price</th><th>Saving</th><th>Number of current buyer</th><th>Maximum Buyer</th><th>Expired Time</th><th>Status</th><th>Category</th><th>Sumary image</th></tr>";
    foreach ($dbh->query($sql) as $row)
        {
        $id=$row['id'];
        echo "<tr>";
        echo "<td>" . $row['name'] . "</td>";
        echo "<td>" . $row['description'] ."</td>";
        echo "<td>" . $row['price'] . "</td>";
        echo "<td>" . $row['groupbuy_price'] ."</td>";
        echo "<td>" . $row['saving'] .'%' ."</td>";
        echo "<td>" . $row['current_buyer'] ."</td>";
        echo "<td>" . $row['maximum_buyer'] ."</td>";   
        echo "<td>" . $row['expired_time'] ."</td>";
        echo "<td>" . $row['status'] ."</td>";
        echo "<td>" . $row['c_name'] . "</td>";

?>
        <td><img src="<?php echo $row['sum_img']?>" width="50px" /></td>
<?php
        echo "<td><a href='delete_deal.php?id=$id'>Delete</a></td>"; 
        echo "<td><a href='deal_detail.php?id=$id'>Detail</a></td>"; 
        echo "<td><a href='edit_deal.php?id=$id'>Edit</a></td>"; 

        echo "</tr>";
        }

    echo "</table>";

        $dbh = null;
    }
    catch(PDOException $e) { echo $e->getMessage(); }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:28:31.130

看起来你只需要更换

```
$sql = "select id,name,description,price,groupbuy_price, CEIL((groupbuy_price/price)*100) AS saving,current_buyer,maximum_buyer,expired_time,status,sum_img,cat_id,c_name from groupbuy,category where c_id=cat_id"; 
```

和

```
$sql = "select id,name,description,price,groupbuy_price, CEIL((groupbuy_price/price)*100) AS saving,current_buyer,maximum_buyer,expired_time,status,sum_img,cat_id,c_name from groupbuy,category where c_id={$cat_id}"; 
```

但出于安全原因，开始时也会发生变化

```
$cat_id = (int) $_GET['cat_id']; 
```

# php - 如何创建不应出现在数据库中的 Yii 表单字段

> ID：13580502
> 
> 赞同：0
> 
> 时间：2012-11-27T08:58:12.327
> 
> 标签：php, mongodb, yii, yii-components

我正在使用 Yii MongoDbSuite。我需要为密码重复验证创建表单字段，它不应该出现在 MongoDB 中。因为我使用的是 yii 表单，所以我想在视图中添加的所有字段都应该在我的模型中声明为 public。但是我的模型扩展了 MongoDocument，所以 save() 之后所有清除的公共字段都出现在 MongoDb 中。我如何声明字段，它会出现在模型中，但不会出现在 Mongo 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:26:21.590

不幸的是，由于 YiiMongoDBSuite 的工作方式，Nikos 的回答不会完全奏效。

YiiMongoDBSuite 通过将所有公共属性反映到数据库属性中，以一种奇怪的方式保存以适应 MongoDB 的无模式设计。

它开始（在`update`函数中）调用`toArray`：[https](https://github.com/canni/YiiMongoDbSuite/blob/master/EMongoDocument.php#L593) ://github.com/canni/YiiMongoDbSuite/blob/master/EMongoDocument.php#L593 ，然后`_toArrray`将所有公共属性设置为数据库属性：[https ://github.com /canni/YiiMongoDbSuite/blob/master/EMongoEmbeddedDocument.php#L304](https://github.com/canni/YiiMongoDbSuite/blob/master/EMongoEmbeddedDocument.php#L304)。

您可以做的是在模型中设置一些受保护的属性。这应该使它们不会进入数据库并被保存，即

```
class MyAwesomeModel{
    public $somedbvar;
    protected $somenotdbvar;
} 
```

然后，您可以像 Nikos 所展示的那样使用该受保护的财产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:01:36.667

在 CActiveRecord 模型中，您可以添加不是数据库列的属性。它将被视为与其他数据库支持的属性几乎相同。

```
public $new_password;
public $new_password_confirm;
...
return array(
    array('E_NAME, E_EMAIL, new_password, new_password_confirm', 'required'),
    array('new_password', 'compare', 'compareAttribute'=>'new_password_confirm'),
...
<div class="row">
    <?php echo $form->labelEx($model, 'new_password'); ?>
    <?php echo $form->passwordField($model, 'new_password'); ?>
    <?php echo $form->error($model,'new_password'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model, 'new_password_confirm'); ?>
    <?php echo $form->passwordField($model, 'new_password_confirm'); ?>
    <?php echo $form->error($model,'new_password_confirm'); ?>
</div> 
```

此外，CFormModel 模型是没有数据库支持属性的模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T11:06:39.243

为了改进@Sammaye 的答案，它是正确的，YMDS 确实从类变量中分配属性。

虽然这不是这里的问题。imo这里的问题是惰性编码。

我将如何解决问题的示例

用户模型（基于西装的例子）

```
class User extends EMongoDocument
{

    public $username;
    public $email;
    public $password;

    public function getCollectionName()
    {
        return 'users';
    }

    public function rules() {
        return array(
            array('username, email, password', 'required'),
        );
    }

    public function attributeLabels()
    {
        return array(
            'username'                   => 'UserName',
            'email'                      => 'Email',
            'password'                   => 'Password',
        );
    }

    public static function model($className = __CLASS__)
    {
        return parent::model($className);
    }

    public function getForm()
    {
        $form = new UserForm();
        $form->userid = $this->primaryKey();
        return $form;
    }
} 
```

表格型号：

```
<?php

class UserForm extends CFormModel
{
    public $userid; //something to refer back to your User model on save, you might need this as a hidden field
    public $username;
    public $email;
    public $password;
    public $password_again;

    public function rules()
    {
        return array(
            array('username, email, password, password_again', 'required'),
            array('password', 'compare', 'compareAttribute'=>'password_again', 'strict'=>true),
        );
    }

    public function attributeLabels()
    {
        return array(
            'password_again'=>'Re-type Password',
        );
    }

    public function save()
    {
        if($this->validate())
        {
            $user = User::findByPk($this->userid);
            $user->username = $this->username;
            $user->email = $this->email;
            $user->password = hash('sha512',$this->password);
            if($user->save())
            {
                //do stuff
            }
        }
    }

} 
```

在视图中：

```
<?php
$model = $model->form;
$form = $this->beginWidget('CActiveForm', array(
    'id'=>'user-form',
    'enableAjaxValidation'=>true,
    'enableClientValidation'=>true,
    'focus'=>array($model,'firstName'),
)); 
```

当然，这只是一个示例，说明如何解决您的问题而不会遇到一个又一个问题

（顺便说一句，一种可以工作的懒惰方式，就是简单地声明一个属性不安全并且永远不会被保存）

# mule - Mule ESB 与 Web 应用程序的集成

> ID：13580529
> 
> 赞同：2
> 
> 时间：2012-11-27T09:00:02.427
> 
> 标签：mule

我们有超过 5 个企业应用程序在不同的服务器上运行，这些应用程序之间的通信是点对点的。我们计划使用 Mule 将其迁移到 ESB。

我不太明白骡子是如何工作的，我几乎没有疑问，

1.  Mule 在不同的服务器上运行，我需要将我所有的 5 个应用程序部署到 mule 服务器中吗？

2.  我在tomcat服务器上部署了spring应用程序，该应用程序将如何通过mule接收消息，或者我需要在我的服务器或mule服务器中进行哪些配置更改。

任何建议或教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T05:02:57.457

您不需要在 Mule 服务器中部署所有 5 个应用程序。

您说您的所有应用程序当前都是点对点的（这意味着现在所有应用程序都通过 http 协议进行交谈/通信），同样您也可以使用 mule 的 http 端点与所有 5 个应用程序进行通信。

即，Spring 应用程序与另一个 Spring 应用程序对话可以修改为 Spring 应用程序与 Mule 对话，Mule 依次与另一个 Spring 应用程序对话。

您必须从文档中学习基础知识

[http://www.mulesoft.org/documentation/display/current/Mule+Fundamentals](http://www.mulesoft.org/documentation/display/current/Mule+Fundamentals) --> 浏览左侧的导航。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T15:59:47.083

Mule 是一个集成工具。您无需更改任何现有应用程序。您所需要的只是开发一个可以进行调解/编排的 mule 应用程序。

为了与您的 spring 应用程序连接，您无需更改任何配置，您需要在 mule 流中使用 http:outbound 连接器

只需通过[http://www.mulesoft.org/documentation/display/current/HTTP+Transport+Reference](http://www.mulesoft.org/documentation/display/current/HTTP+Transport+Reference)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-26T20:18:22.297

所以 mule 是基于 SOA 原则的，所以你的 5 个企业服务不必在一个系统中。因此，如果您想使用 5 个应用程序中的任何一个的服务/功能，请将这些服务公开为 Web 服务、云是肥皂或休息。你可以在你的 mule 中调用这些服务。因此在这种情况下，您只需创建 5 个连接，并且在需要时您可以在 mule 配置文件中引用这些连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-11T05:33:03.793

您需要做的就是根据 mule 服务器更改可配置的应用程序。

请参考下面的链接，这将有助于理解 mule，帮助您更好地协调所有人之间的通信。

[https://docs.mulesoft.com/](https://docs.mulesoft.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-27T02:07:09.517

@saravanan shanmugavel，您需要使用 Mule ESB 来协调这些应用程序之间的通信...ESB 出现在图片中以消除您的点对点通信...您可以为每个服务和一个流程创建一个代理服务，这将协调所有人之间的沟通...

# python - urllib2 对动态加载的内容行为不端

> ID：13580541
> 
> 赞同：1
> 
> 时间：2012-11-27T09:00:37.927
> 
> 标签：python, html, ajax, python-3.x, urllib2

**一些代码**

```
headers = {}
headers['user-agent'] = 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0'
headers['Accept'] = 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
headers['Accept-Language'] = 'en-gb,en;q=0.5'
#headers['Accept-Encoding'] = 'gzip, deflate'

request = urllib.request.Request(sURL, headers = headers)
try:
    response = urllib.request.urlopen(request)
except error.HTTPError as e:
    print('The server couldn\'t fulfill the request.')
    print('Error code: {0}'.format(e.code))
except error.URLError as e:
    print('We failed to reach a server.')
    print('Reason: {0}'.format(e.reason))
else:
    f = open('output/{0}.html'.format(sFileName),'w')
    f.write(response.read().decode('utf-8')) 
```

**一个网址**

[http://groupon.cl/descuentos/santiago-centro](http://groupon.cl/descuentos/santiago-centro)

**情况**

这是我所做的：

1.  在浏览器中启用 javascript
2.  打开上面的 url 并留意控制台
3.  禁用 javascript
4.  重复第 2 步（对于那些刚刚收听的人，javascript 现在已被禁用）
5.  使用 urllib2 抓取网页并将其保存到文件中
6.  启用 javascript
7.  用浏览器打开文件并观察控制台
8.  在关闭 javascript 的情况下重复 7

**结果**

*   在第 2 步中，我看到大量页面内容是使用 ajax 动态加载的。因此，到达的 HTML 是一种骨架，而 ajax 用于填补空白。这很好，一点也不奇怪

*   由于页面应该是 seo 友好的，它应该可以在没有 js 的情况下正常工作。在第 4 步中，控制台中什么也没有发生，并且骨架页面加载了预先填充的渲染 ajax 不必要的内容。这也完全没有混淆

*   在第 7 步中，进行了 ajax 调用但失败了。这也可以，因为他们使用的 url 不是本地的，因此调用会中断。页面看起来像骨架。这也很棒，也很值得期待。

*   在第 8 步中：不进行 ajax 调用，并且骨架只是一个骨架。我原以为这应该非常像第 4 步

**问题**

我想要做的是使用 urllib2 从步骤 4 中获取 html，但我不知道如何。我错过了什么，我怎么能做到这一点？

**转述**

如果我正在编写一个蜘蛛，我希望能够抓取纯 ol' HTML（如导致第 4 步的那样）。我根本不想执行 ajax 的东西或任何 javascript。我不想动态填充任何东西。我只想要HTML。

seo 友好网站希望我得到我想要的，因为这就是 seo 的全部意义所在。

鉴于我概述的情况，如何获得纯 HTML 内容？

要手动执行此操作，我会关闭 js，导航到页面，查看源代码，ctrl-a、ctrl-c、ctrl-v（有用的地方）。

为了得到一个脚本来为我做这件事，我会......？

**我试过的东西**

我使用wireshark查看数据包标头，并且在步骤2和4中从我的电脑发送的GET具有相同的标头。阅读有关 SEO 的内容让我认为这是很正常的，否则不会使用 hijax 等技术。

以下是我的浏览器发送的标头：

```
Host: groupon.cl
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-gb,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive 
```

这是我的脚本发送的标头：

```
Accept-Encoding: identity
Host: groupon.cl
Accept-Language: en-gb,en;q=0.5
Connection: close
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0 
```

区别在于：

*   我的脚本有 Connection = close 而不是 keep-alive。我看不出这将如何导致问题
*   我的脚本有 Accept-encoding = identity。这可能是问题的原因。我真的不明白为什么主机会使用这个字段来确定用户代理。如果我更改编码以匹配浏览器请求标头，那么我将无法解码它。我现在正在处理这个...

看这个空间，我会在新信息出现时更新问题

# c - 如何评估一系列数字

> ID：13580545
> 
> 赞同：0
> 
> 时间：2012-11-27T09:00:48.723
> 
> 标签：c

我有一个类似`-1,1.51,-2.525,3.456...`etc 值的字符串。

我需要将每个值（`string`）转换为`float`并添加所有值以产生结果。

我再次需要将结果浮点数转换为字符串，小数点后有两个数字。

例子 ：`-1+1.51-2.525+3.456 = 1.44.`

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:03:25.767

查找`[strtof()](http://linux.die.net/man/3/strtof)`功能，它非常适合做这样的事情。请注意，它解析一个浮点数，并返回一个指向第一个字符的指针，该字符*不*被视为数字的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:22:31.853

以下代码将帮助您使用`sscanf()`函数拆分字符串

要在小数点后显示 2 个数字的浮点数，请使用`"%.2f"`

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

char str[256]="-1,1.51,-2.525,3.456";

int main()
{
    float x, sum=0; int g;
    while (g=sscanf(str,"%f,%s",&x,str))
    {

        printf("x=%f\r\n",x);
        sum+=x;
        if (g==1) break;
    }
    printf(" the sum is %.2f\r\n",sum);
} 
```

**构建和执行：**

```
linux$ gcc -o test test.c -lpthread
linux$ ./test
x=-1.000000
x=1.510000
x=-2.525000
x=3.456000
 the sum is 1.44 
```

# php - FirePHP 在所需文件中不起作用

> ID：13580549
> 
> 赞同：1
> 
> 时间：2012-11-27T09:01:05.473
> 
> 标签：php, firephp

我的 firePHP 工作正常，除非我在类中使用它，有什么想法吗？

```
$firephp = FirePHP::getInstance(true);
$firephp->log('I'm logged from firePHP!!'); 
```

如果我将它粘贴在 index.php 中的某个位置，它将正常工作。但是如果我把它放在一个必需的文件中，它就不再起作用了。

# jquery - 使用ajax 将表单字段的特定部分发送到服务器？

> ID：13580550
> 
> 赞同：2
> 
> 时间：2012-11-27T09:01:11.963
> 
> 标签：jquery, ajax, forms, submit

应用程序包含不同的部分，在不同的部分中有许多表单字段。
我必须使用 ajax 分别更新每个部分。如何使用 ajax 提交特定部分字段？？？
这里所有的部分都是一个单一的形式..
如下..

```
<form>  
 Section A:   
  <some fields>  
   Section B:   
 <some fields>  
 .......   
</form> 
```

如果我使用 ajax 提交表单，它会发送所有表单字段.. 但我会立即保存特定部分.. 有
什么方法可以实现这个要求？？？
提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:11:10.467

您已经声明您可以使用 Ajax 提交整个表单，因此我假设您不需要帮助编写`$.ajax()`（`$.post()`或其他）本身，您只需要知道如何从某些获取值字段。

您可以使用多个表单，每组一个 - 对我来说，这似乎是最简单的方法，但如果您还需要能够一次提交所有字段（也许允许关闭 JS 的浏览器），它就行不通.

或者，您可以仅在特定部分的字段上使用该[`.serialize()`方法。](http://api.jquery.com/serialize/)给字段一个类，将它们标识为属于特定部分并使用`$(".sectionClass1").serialize()`或将字段放在其他类型的容器中，也许是 a `<fieldset id="section1">`，并相应地选择`$("#section1 :input").serialize()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:03:53.043

我可以建议的几种方法

*   使用 Dom 选择器分离出表单字段，然后将值序列化。

*   使用多个表单来序列化表单值。

[多种形式](https://gist.github.com/d27c268b55197600d04f)的示例要点

然后您可以使用常规 JQuery 来序列化和提交值

```
$("#form1").serialize()
$("#form2").serialize() 
```

# c# - 为什么后台线程不等待任务完成？

> ID：13580553
> 
> 赞同：4
> 
> 时间：2012-11-27T09:01:23.953
> 
> 标签：c#, async-await

我正在玩 C# 的异步等待功能。当我将它与 UI 线程一起使用时，事情会按预期工作。但是当我在非 UI 线程中使用它时，它不能按预期工作。考虑下面的代码

```
private void Click_Button(object sender, RoutedEventArgs e)
    {
        var bg = new BackgroundWorker();
        bg.DoWork += BgDoWork;
        bg.RunWorkerCompleted += BgOnRunWorkerCompleted;
        bg.RunWorkerAsync();
    }

    private void BgOnRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs runWorkerCompletedEventArgs)
    {
    }

    private async void BgDoWork(object sender, DoWorkEventArgs doWorkEventArgs)
    {
        await Method();
    }

    private static async Task Method()
    {
        for (int i = int.MinValue; i < int.MaxValue; i++)
        {
            var http = new HttpClient();
            var tsk = await http.GetAsync("http://www.ebay.com");
        }
    } 
```

当我执行此代码时，后台线程不会等待长时间运行的任务`Method`完成。相反，它会立即执行`BgOnRunWorkerCompleted`after call `Method`。为什么呢？我在这里想念什么？

PS：我对替代方法或正确方法不感兴趣。我想知道在这种情况下幕后实际发生了什么？为什么不等？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T09:19:59.940

因此，`BgDoWork`由后台线程调用`BackgroundWorker`

它调用`Method`，它启动循环并调用`http.GetAsync`

`GetAsync`返回 a`Task`并继续它在另一个线程上的工作。

你`await`的任务，因为`Task`没有完成，从`Method`

同样，await in`BgDoWork`返回另一个`Task`

所以，`BackgroundWorker`看到`BgDoWork`已经返回并假设它已经完成。

然后它提出`RunWorkerCompleted`

* * *

`BackgroundWorker`基本上，不要混用`async / await`！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:01:51.097

基本上，您的代码存在两个问题：

1.  `BackgroundWorker`未更新以使用`async`. 方法的全部意义`async`在于，它们实际上是在第一次返回`await`尚未完成的东西时返回，而不是阻塞。因此，当您的方法返回时（在 之后`await`），`BackgroundWorker`认为它已完成并 raise `RunWorkerCompleted`。
2.  `BgDoWork()`是一种`async void`方法。这样的方法是“一劳永逸”，你不能等待它们完成。因此，如果您使用可以理解的方法运行您的方法`async`，您还需要将其更改为`async Task`method.

您说您不是在寻找替代方案，但我认为如果我提供替代方案可能会帮助您理解问题。假设它`BgDoWork()`应该在后台线程上`BgOnRunWorkerCompleted()`运行并且应该在 UI 线程上运行，您可以使用如下代码：

```
private async void Click_Button(object sender, RoutedEventArgs e)
{
    await Task.Run((Func<Task>)BgDoWork);
    BgOnRunWorkerCompleted();
}

private void BgOnRunWorkerCompleted()
{
}

private async Task BgDoWork()
{
    await Method();
} 
```

在这里，`Task.Run()`作为`async`-aware 的替代方法`BackgroundWorker`（它在后台线程上运行该方法并返回`Task`可用于等待它实际完成的 a）。在`await`in之后`Click_Button()`，你又回到了 UI 线程，所以这就是`BgOnRunWorkerCompleted()`运行的地方。`Click_Button()`是一种`async void`方法，这几乎是您想要使用的唯一情况：在事件处理程序方法中，您不需要等待。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T09:11:35.943

我认为你需要一些理由让后台线程在等待`Method()`完成时保持活动状态。拥有一个未完成的延续不足以保持线程处于活动状态，因此您的后台工作人员在`Method()`完成之前终止。

您可以通过更改代码来向自己证明这一点，以便后台线程`Thread.Sleep`在`await Method()`. 这几乎肯定不是您想要的真实行为，但如果线程睡眠时间足够长，您会看到`Method()`完整的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T09:33:05.007

以下是[DoWork](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.dowork.aspx)是如何被提出和处理的。[（使用反射器](http://reflector.red-gate.com)工具检索的代码）。

```
private void WorkerThreadStart(object argument)
{
    object result = null;
    Exception error = null;
    bool cancelled = false;
    try
    {
        DoWorkEventArgs e = new DoWorkEventArgs(argument);
        this.OnDoWork(e);
        if (e.Cancel)
        {
            cancelled = true;
        }
        else
        {
            result = e.Result;
        }
    }
    catch (Exception exception2)
    {
        error = exception2;
    }
    RunWorkerCompletedEventArgs arg = new RunWorkerCompletedEventArgs(result, error, cancelled);
    this.asyncOperation.PostOperationCompleted(this.operationCompleted, arg);
}

protected virtual void OnDoWork(DoWorkEventArgs e)
{
    DoWorkEventHandler handler = (DoWorkEventHandler) base.Events[doWorkKey];
    if (handler != null)
    {
        handler(this, e);
    }
} 
```

等待异步方法没有特殊处理。（使用 async/await 关键字）。

要使其等待异步操作，需要进行以下更改。

```
async private void WorkerThreadStart(object argument)

    await this.OnDoWork(e);

async protected virtual void OnDoWork(DoWorkEventArgs e)

    await handler(this, e); 
```

但是，[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.80%29.aspx)是 .net 2.0 构造，而[async/await](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)是 .net 4.5。如果其中任何一个使用其他构造，它将是一个完整的圆圈。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T13:10:38.807

您不能等待事件处理程序，因为它不会返回任何等待等待的内容。从[async](http://msdn.microsoft.com/en-us/library/hh156513.aspx)关键字的文档中：

> void 返回类型主要用于定义需要 void 返回类型的事件处理程序。返回 void 的异步方法的调用者不能等待它，也不能捕获该方法抛出的异常。

通过将 async 关键字添加到 BgDoWork 事件处理程序，您可以指示 .NET 异步执行处理程序，并在遇到第一个让步操作时立即返回。在这种情况下，这发生在第一次调用 http.GetAsync 之后

# java - 我的手电筒应用程序中的错误

> ID：13580556
> 
> 赞同：0
> 
> 时间：2012-11-27T09:01:38.917
> 
> 标签：java, android, eclipse

我正在尝试创建一个用于在 android 上打开和关闭手电筒的应用程序，但遇到了一些我无法解决的错误。这些错误似乎只出现在 java 活动中，并且似乎与我所做的“cam”活动有关。当我悬停时，在我的 java cam.release 底部显示“添加演员表”。

感谢您在高级方面的帮助。

MainActivity.java

```
public class MainActivity extends Activity implements OnCheckedChangeListener {
    Camera cam;
    ToggleButton mTorch;
    Parameters camParams;
    private Context context;
    AlertDialog.Builder builder;
    AlertDialog alertDialog;
    private final int FLASH_NOT_SUPPORTED = 0;
    private final int FLASH_TORCH_NOT_SUPPORTED = 1;

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        context = MainActivity.this;
        if (context.getPackageManager().hasSystemFeature(
                PackageManager.FEATURE_CAMERA_FLASH)) {
            mTorch = (ToggleButton) findViewById(R.id.toggleButton1);
        } else {           
             showDialog(MainActivity.this,FLASH_NOT_SUPPORTED);
        }
    }

    private void showDialog(MainActivity mainActivity, int fLASH_NOT_SUPPORTED2) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

        mTorch.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @SuppressWarnings("deprecation")
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {

                try {
                    if (cam != null) {
                        cam = Camera.open();
                    }
                    camParams = cam.getParameters();
                    List<String> flashModes = camParams
                            .getSupportedFlashModes();
                    if (isChecked) {
                        if (flashModes.contains(Parameters.FLASH_MODE_TORCH)) {
                            camParams.setFlashMode(Parameters.FLASH_MODE_TORCH);
                        } else {           
                             showDialog(MainActivity.this,FLASH_NOT_SUPPORTED);
                        }
                    } else {
                        camParams.setFlashMode(Parameters.FLASH_MODE_OFF);
                    }
                    cam.setParameters(camParams);
                    cam.startPreview();
                } catch (Exception e) {
                    e.printStackTrace();
                    cam.stopPreview();
                    cam.release();
                }
            }
        });
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        if (cam == null) {
            cam = Camera.open();
        }
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        if (cam != null) {
            cam.release();
        }
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
        cam.release();

    }
} 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.t.torch"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.FLASHLIGHT" />

    <uses-feature
        android:name="android.hardware.Camera"
        android:required="true" >
    </uses-feature>
    <uses-feature
        android:name="android.hardware.camera.FLASHLIGHT"
        android:required="true" >
    </uses-feature>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.t.torch.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:padding="20dip"
        android:text="@string/app_name"
        android:textSize="25sp" />

    <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="20dip"
        android:text="ToggleButton" >
    </ToggleButton>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:21:49.887

你的主要问题是`cam`永远不会被设置。您可能会在与该变量相关的任何行上获得 NullPointerExceptions。

原因是：

```
if (cam != null) {
    cam = Camera.open();
} 
```

当然应该是：

```
if (cam == null) {
    cam = Camera.open();
} 
```

另请注意，`cam`在调用`onStop()`.

# c - 如何使用具有元素确切名称的变量访问结构的元素？

> ID：13580559
> 
> 赞同：2
> 
> 时间：2012-11-27T09:01:46.893
> 
> 标签：c, struct

我不确定这是否至少可行，但我想使用具有元素确切名称的变量从我的结构中访问元素。

我的程序对结构的成员进行操作，这取决于用户选择的列，但为了使其更简单（因为这不是重点），我将编写一些简单的行，所以它会是像这样的东西：

（假设我已经用另一个函数填写了列表，但这也不是重点，所以我不会说）

结构，将用于双向链表的每个节点（每个节点表示像具有两列的表中的一行）

```
typedef struct row {
    float A, B;
    struct row *prev, *next;
} _row; 
```

主要的

```
int main(){
    char column;
    printf("Which column would you like to see? (A or B):  ");
    scanf("%c",&column);
    show_column(column);
    system("PAUSE");
} 
```

和功能

```
void show_column(char column){
    _row *aux;
    aux=start;
    while(aux->next!=NULL){
        printf("\n %.2f",aux->column);
        aux=aux->next;
    }
    //this is because that cycle is not going to show the last node
    printf("\n %.2f",aux->column);
} 
```

“开始”也是一个 _row 。它被修改为在我插入节点的同一函数中指向列表的起点。

我想知道的是如何在函数中制作这部分：

```
printf("\n %.2f",aux->column); 
```

因为“列”不是结构中的成员，而是应该包含其中一个成员（A 或 B）的名称的变量。

我需要这个，所以我不必重复相同的代码，而是使用“if”并且只有一个字母 (B) 不同。

很抱歉，如果拼写和语法有问题，我的英语不是很好，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:09:38.443

C 不是解释型语言，而是编译型语言。据我所知，这是不可能的。您必须编写额外的代码。此外，对于一个简单的用户来说，知道您的结构字段的名称并不好 - 所以，不用担心 =)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:25:01.530

所以基本上用户给你'A'，你想要A列。
如果它只是单个字符的情况，那么你可以使用char后面的int
使你的浮点数成为这样的数组：

```
typedef struct row {
float col[2];    //A, B
struct row *prev, *next;
} _row; 
```

然后改变

```
printf("\n %.2f",aux->column); 
```

成为

```
printf("\n %.2f",aux->col[(int(toUpper(column) - 'A'))]); 
```

所以“A”将变为 0，
“B”将变为 1，等等。
这仅适用于单字符列名，因此如果您想要列“AA”，则无需进行一些修改就无法使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:10:31.777

你可以做到`printf("\n %.2f",(*(aux->column) == 'A' ? aux->A : aux->B));`我不明白你可以用 if 语句以外的另一种方式做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:32:23.290

也许你可以这样做：

```
typedef struct row {
    float col[2];
    struct row *prev, *next;
} _row;

int main(){
    char column;
    printf("Which column would you like to see? (A or B):  ");
    scanf("%c",&column);
    show_column(column);
    system("PAUSE");
}

void show_column(char column){
    _row *aux;
    aux=start;

    column = column - 'A';
    while(aux->next!=NULL){
        printf("\n %.2f",aux->col[column]);
        aux=aux->next;
    }
    //this is because that cycle is not going to show the last node
    printf("\n %.2f",aux->col[column]);
} 
```

# php - php字符串到时间问题

> ID：13580560
> 
> 赞同：0
> 
> 时间：2012-11-27T09:01:51.190
> 
> 标签：php, date

我有一个日期字符串，我想将其转换为数字。字符串看起来像

```
Dienstag, 30\. Oktober 2012 
```

以及我一直在尝试使用的代码

```
date('Y.m.d' , strtotime($str[4])); 
```

每次返回`1970.01.01`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:07:09.887

您可以通过更改当前*区域设置来实现这一点* [http://php.net/manual/bg/function.setlocale.php](http://php.net/manual/bg/function.setlocale.php) 如果您知道源日期格式，您也可以坚持使用[http://bg2.php.net/ date_create_from_format](http://bg2.php.net/date_create_from_format)

以下是有关使用不同语言的相同问题[strtotime 的更多详细信息？](https://stackoverflow.com/questions/6988536/strtotime-with-different-languages)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:03:30.650

`strtotime`采用英语字符串。查看可能的[日期/时间格式](http://www.php.net/manual/en/datetime.formats.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:11:11.433

使用 strtotime() 将日期转换为时间戳

$ts = strtotime('2007 年 12 月 21 日'); 回显日期（'Ymd'，$ts）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:13:35.790

```
<?php
setlocale(LC_ALL, 'fr_FR');
$str= 'Dienstag, 30\. Oktober 2012';

echo date('Y.m.d' , strtotime($str[4]));   
?> 
```

# sublimetext2 - Sublime text 2 - 更改侧边栏颜色

> ID：13580561
> 
> 赞同：25
> 
> 时间：2012-11-27T09:01:51.823
> 
> 标签：sublimetext2

改变侧边栏（文件浏览器）颜色的方法是什么？我需要在`.tmTheme`文件中添加什么来修改默认值？

使用深色主题，侧边栏可能对我的口味来说太亮了。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-27T12:41:04.493

你想进入你的

```
~/Library/Application Support/Sublime Text 2/Packages/Default/Default.sublime-theme 
```

（旧版本）或

```
~/Library/Application Support/Sublime Text 2/Packages/Theme-Default/Default.sublime-theme 
```

（新版本）并编辑这些东西：

*   `"class": "sidebar_container"`
*   `"class": "sidebar_tree"`
*   `"class": "sidebar_heading"`
*   `"class": "sidebar_label"`

您可以在其中更改 RGB 颜色，直到获得所需的颜色。

[这是一个更详细地讨论这个问题的线程。](http://sublimetext.userecho.com/topic/19274-theming-of-the-sidebar/)

编辑：添加了@Michael Tunnell 提供的正确位置

编辑：示例暗边栏配置。

[![带有深色侧边栏的图像](../Images/ce81b647112fa5509cc245a11e42c55b.png)](https://i.stack.imgur.com/9AZpm.png)

点击查看大图进行设置 [![点击查看大图进行设置](../Images/10af82ced71aa42e55367eee24d2f310.png)](https://i.stack.imgur.com/NSzsF.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T06:30:45.273

AGS 是对的，但他们最近更改了默认主题文件的位置。

截至目前，它位于**Packages/Theme - Default/Default.sublime-theme**

“Packages/Default”文件夹现在包含其他与主题无关的文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-27T09:11:49.373

尝试安装 Soda 主题。深色主题有一个不错的深色边栏。

[https://github.com/buymeasoda/soda-theme](https://github.com/buymeasoda/soda-theme)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-30T07:31:42.497

packagecontrol.io [DefaultPlus](https://packagecontrol.io/packages/Theme%20-%20DefaultPlus)用于快速简便 packagecontrol.io [Seti_UX](https://packagecontrol.io/packages/Seti_UX)用于调整侧边栏符号等想法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-29T12:45:46.710

尝试安装 Predawn 主题也许你喜欢它的主题的外观和感觉[https://github.com/jamiewilson/predawn](https://github.com/jamiewilson/predawn)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-10T20:35:51.643

**Sublime Text 2** Package Control ~ [Theme Soda SolarizedDark](https://packagecontrol.io/packages/Theme%20-%20Soda%20SolarizedDark)。这需要对首选项设置进行一些编辑。内置 Solarized (Dark).tmTheme 看起来不错。

Sublime 侧边栏现在很好地变暗了，但是您可能会发现侧边栏项目的选择太静音了。设置编辑？例如，要使 Solarized (Dark).tmTheme 代码窗格选择更加可见：

```
<dict>
<key>name</key>
<string>Solarized (dark)</string>
<key>settings</key>
<array>
    <dict>
        <key>settings</key>
        <dict> [edit/insert the following key-string lines]
            <key>selection</key>
                <string>#03151C</string>
            <key>selectionBorder</key>
                <string>#99ccff</string>
            <key>inactiveSelection</key>
                <string>#0099ff30</string> 
```

此代码窗格颜色设置稍微进一步使 Mac 上的侧栏颜色静音。不是 PC 问题，因为在我的 PC 主题 Soda SolarizedDark 上不起作用！但是 Solarized (Dark).tmTheme 的选择外观编辑使 PC 侧边栏略亮，与 Mac 相反。越野车？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-25T13:04:57.210

我发现转到 Preferences -> Theme 会调出主题的命令托盘。当更改为 Adaptive.sublime 主题时，侧栏变为黑色。

这也可以通过命令托盘访问。按 ctrl+shift+p 然后键入“主题”选择选项“UI：选择主题”，然后您可以再次选择自适应主题。

# python - 查询时间戳 Postgresql

> ID：13580562
> 
> 赞同：1
> 
> 时间：2012-11-27T09:01:52.840
> 
> 标签：python, postgresql

我正在尝试通过 API 执行包含日期的查询。日期应采用 **ISO_8601 日期格式(yyyy-MM-dd'T'HH:mm:ssZ)**。

例如，我表中的一个元组可能有日期：

```
2012-11-11T00:00:00+0000\. 
```

在 unicode 中查询如下：

```
2012-11-11T00%3A00%3A00%2B0000 
```

我自己检查日期是否有效，但我收到以下 SQL 异常：

```
SQL Exception: ERROR: operator does not exist: timestamp with time zone >= character varying 
```

我通过 API 执行查询的代码是用 python 编写的。我不确定异常是什么意思？不能用字符串查询时间戳吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:10:58.517

要指定时间戳文字，请使用以下格式：

```
where ts_column >= timestamp '2012-11-11 T00:00:00+0000' 
```

关键字`timestamp`对于定义时间戳文字很重要，否则它“仅”是一个字符值（这就是错误消息告诉您的内容）。该值必须符合 ISO 日期样式。

另一种选择是使用该`to_timestamp`功能：

```
where ts_column >= to_timestamp('2012-11-11 00:00:00', 'yyyy-mm-dd hh24:mi:ss'); 
```

这使您可以更好地控制文字的实际格式。

有关更多详细信息，请参阅手册：[http ://www.postgresql.org/docs/current/static/functions-formatting.html#FUNCTIONS-FORMATTING-DATETIME-TABLE](http://www.postgresql.org/docs/current/static/functions-formatting.html#FUNCTIONS-FORMATTING-DATETIME-TABLE)

# c# - 使用自动映射器更新 Linq？

> ID：13580564
> 
> 赞同：1
> 
> 时间：2012-11-27T09:02:03.537
> 
> 标签：c#, asp.net-mvc, linq, automapper, updates

```
[HttpPost]
public ActionResult _EditCustomer(CustomerViewModel CustomerViewModel)
{
    if (ModelState.IsValid)
    {
        try
        {
            Customers customer = entity.Customers.FirstOrDefault(x => x.sno == CustomerViewModel.sno);
            customer = AutoMapper.Mapper.Map<CustomerViewModel, Customers>(CustomerViewModel);
            entity.SaveChanges();

            return Content("<div class=\"success\">Müşteri düzenleme işlemi başarılı.</div>", "text/html");
        }
        catch (Exception e)
        {
            ModelState.AddModelError("", "Müşteri güncelleme hatası.");
        }
    }

    //Updating customer is failed!
    CustomerViewModel.Cities = entity.Cities;
    CustomerViewModel.PowerSuppliers = entity.PowerSuppliers;
    CustomerViewModel.Sectors = entity.Sectors;

    return PartialView(CustomerViewModel);
} 
```

我调试了代码，然后在运行时客户正在更新（自动映射器正在工作，我可以看到更改），但`entity.SaveChanges();`没有工作。

使用自动映射器时，还有其他方法可以更新记录吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:04:59.307

您的代码创建了新的客户实体，该实体未附加到上下文：

```
var newCustomer = Mapper.Map<CustomerViewModel, Customers>(CustomerViewModel); 
```

要更新现有实体，请使用以下`Map`自动映射器方法：

```
Mapper.Map(CustomerViewModel, customer); 
```

# c# - 如何通过 UDP 连接 C# 发送泛型？

> ID：13580567
> 
> 赞同：-1
> 
> 时间：2012-11-27T09:02:12.450
> 
> 标签：c#, udp, byte, converter, send

我想知道有没有办法发送某种泛型，例如`List <float> floatValues = new List<float>()`需要发送到 udp 客户端。我不知道该怎么做，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:55:19.560

你想要做的就是[序列化/反序列化](http://en.wikipedia.org/wiki/Serialization)

> 在计算机科学中，在数据存储和传输的上下文中，序列化是将数据结构或对象状态转换为可以存储的格式（例如，在文件或内存缓冲区中，或通过网络连接传输）的过程链接）并稍后在相同或另一个计算机环境中“复活”

我建议不要构建自己的序列化程序，而是使用现有的库之一，例如 [XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)、 [SoapFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.soap.soapformatter.aspx)、 [BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)、 [DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)、 [DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)、 [JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)、 [Json.Net](http://json.codeplex.com/)、 [ServiceStack](https://github.com/ServiceStack/ServiceStack.Text)、 [Protobuf.Net](http://code.google.com/p/protobuf-net/) ........

这是一个使用 Json 序列化的示例

```
//Sender
string jsonString = new JavaScriptSerializer().Serialize(floatValues);
byte[] bytesToSend = Encoding.UTF8.GetBytes(jsonString);

//Receiver
string receivedJson = Encoding.UTF8.GetString(bytesToSend);
List<float> floatValues2 = new JavaScriptSerializer()
                                         .Deserialize<List<float>>(receivedJson); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:09:52.313

您可以`floatValues`使用一些序列化工具（如[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)、[BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter%28v=vs.110%29.aspx)或[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)）进行序列化，然后将其反序列化。

或者您可以创建自己的“应用程序级协议”并放入流类型名称和序列化器类型，并在反序列化过程中使用此信息。

# stata - .ado 文件中的 Mata

> ID：13580571
> 
> 赞同：2
> 
> 时间：2012-11-27T09:02:18.087
> 
> 标签：stata

我目前正在.ado 文件中编写一个小的 Stata 程序。在这个 .ado 文件中，我想使用 Mata 来使用 optimize() 函数。当我键入`end`以退出 MATA 时，.ado 文件将其读取为程序的结尾（我认为）。我该怎么做？我对 Stata 和 Mata 都很陌生，尤其是同时使用它们。这是我的代码示例：

```
program define test
args epv prev0 prev1 sample_size bin_prev rep

local prevdiff=`prev1'-`prev0'
local t=-log(1-`prev0')
local eventprob=`epv'/`sample_size'
local lambda_c=0.5
local lambda_0=1
local lambda_1=-log(1-`prev0'-`prevdiff')/`t'

mata
mata clear

void cens_func(todo, x, y, g, H)
{
y = "some function of x and the locals"
}

S = optimize_init()
optimize_init_evaluator(S, &cens_func())
optimize_init_which(S, "min")
optimize_init_params(S, 1)
temp=optimize(S)
st_local("lambda_c",strofreal(temp))

end

some Stata code here

end 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:34:46.833

您应该将 Mata 代码放在最后的单独块中。

示意性地，

```
program 

end 

mata: 

end 
```

另外，不要使用 program name `test`，这是官方命令的名称。

另见

[http://www.stata.com/support/faqs/resources/statalist-faq/#spell](http://www.stata.com/support/faqs/resources/statalist-faq/#spell)

正确的拼写 Stata, Mata。

# android - Android GridView 垂直加载项目

> ID：13580573
> 
> 赞同：20
> 
> 时间：2012-11-27T09:02:19.507
> 
> 标签：android, gridview

是否可以在 GridView 中以垂直方向加载项目？我是说...

正常情况 - 3 列

![在此处输入图像描述](../Images/c106aa6e32a5cf67ed74502804a00e6a.png)

```
-----------------------------             
1      |  2      |    3
-----------------------------
4      |  5      |    6 
```

![在此处输入图像描述](../Images/9eec37f9f85f12ebc156c812f4aec8e8.png)

所需情况 - 3 列

```
-----------------------------              
1      |  3      |    5
-----------------------------
2      |  4      |    6 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-28T10:17:24.533

我认为这根本不可能。

**原因**::

*   由于我们想要垂直滚动项目，因此存在技术故障。而且屏幕上的渲染项目也是垂直方向的。这种情况下我们无法在GridView的onLayout和onMeasure方法中完成我们需要做的计算。
*   如果尝试另一种方式，即我们中的一些人建议将数据源作为 [1,5,2,6,3,7,4,8, ...] 进行嗅探，但在这种情况下，什么是随机算法？
*   当用户垂直投掷时，您如何计算我们需要垂直渲染多少项目以及何时切换到下一列以渲染其他项目。没有这样的数学公式。

我对此做了一些工作并得出了这个结论。希望这可以回答未回答的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-18T11:48:02.383

如果您将 GridLayoutManager 与 RecyclerView 一起使用，首先垂直填充数据的简单方法是：

```
GridLayoutManager lLayout_artist = new GridLayoutManager(getActivity(),3,GridLayoutManager.HORIZONTAL, false); 
```

您可以根据需要更改 GridLayoutManager 的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:40:37.670

请澄清，说你有一个像这样的网格

```
1  4  7
2  5  8
3  6  9 
```

现在如果你垂直向下滚动它，它基本上应该是这样的？？

```
2  5  8
3  6  9
4  7  10 
```

在这种情况下，

*   项目 4 和 7 没有被回收，实际上它们被移动到了一个新的位置
*   项目 1 将被回收
*   仅介绍第 10 项

显然，这不是普通 ListView/GridView 的工作方式，一次回收一行，AFAIK 您需要自定义 GridView 才能获得此功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T10:30:39.760

是否可以更改数据的顺序？在您的示例中，将数据更改为 [1,3,5,2,4,6, ...] 用于水平方向，[1,5,2,6,3,7,4,8, ...] 用于垂直方向。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-29T11:02:21.310

// 你用过 GridLayout[这个](http://developer.android.com/reference/android/widget/GridLayout.html)吗，试试这个：

```
File -> Import -> <sdk_folder>\extras\android\support\v7\gridlayout> 
```

// 将此项目添加为**库项目**

// xml 文件 - **activity_main.xml**

```
<android.support.v7.widget.GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/gridLayout"
    tools:context="com.example.gridlayoutdemo.MainActivity" >

</android.support.v7.widget.GridLayout> 
```

// Java 代码

**MainActivity.class**

```
import android.os.Bundle;
import android.support.v7.app.ActionBarActivity;
import android.support.v7.widget.GridLayout;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends ActionBarActivity {

    private GridLayout gridLayout;
    private TextView[] textViews;
    private int noOfItems;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        gridLayout = (GridLayout) findViewById(R.id.gridLayout);
        gridLayout.setOrientation(1);
        gridLayout.setColumnCount(3);
        gridLayout.setRowCount(3);

        textViews = new TextView[8];

        for (int i = 0; i < 8; i++) {
            textViews[i] = new TextView(MainActivity.this);
            textViews[i].setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT));
            textViews[i].setText(String.valueOf(i));
            textViews[i].setTextSize(25);
            textViews[i].setPadding(50, 25, 10, 25);
            gridLayout.addView(textViews[i]);
        }

        setContentView(gridLayout);

        for (noOfItems = 0; noOfItems < 8; noOfItems++) {
            textViews[noOfItems].setOnClickListener(new View.OnClickListener() {

                int pos = noOfItems;

                public void onClick(View v) {
                    Toast.makeText(getBaseContext(), pos + " Clicked",
                            Toast.LENGTH_SHORT).show();
                }
            });
        }
    }

} 
```

// 如果你想水平显示而不是这样做**gridLayout.setOrientation(0);**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-05T00:19:29.570

我认为您需要[https://github.com/ApmeM/android-flowlayout](https://github.com/ApmeM/android-flowlayout)。并将子重力设置为`Gravity.FILL_HORIZONTAL`

他们甚至有`vertical`或`horizontal`方向

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-27T12:54:12.940

我知道这个问题有点老了..但我没有找到任何相关的答案，所以我创建了一个算法。

在下面的代码`crossAxisCount`中，只有多少个网格水平对齐，即，在上图中的纵向视图中，我们有“2”个网格，而在横向视图中，我们有“4”个网格。 `arrayLength`表示我们必须提供的网格总数才能获得该布局。

```
 final int crossAxisCount = 2;
  final int arrayLength = 8;
  final List<int> output = [];

  var runiCheck = 0;
  for (var i = 0; i < (arrayLength/ crossAxisCount).ceil(); i++) {
    var runjCheck = -1;
    for(var j = i; j <= arrayLength; j+= (arrayLength / crossAxisCount).ceil()){
      runiCheck++;
       if((arrayLength % crossAxisCount != 0)){
         if(arrayLength < runiCheck) break;
           runjCheck++; 
        if(arrayLength % crossAxisCount < runjCheck){
          j--;         
        }            
      }else{
         runjCheck++;   
         if(runjCheck >= crossAxisCount) break;        
       }     
      output.add(j);    
    }    

  }
  print(output); 
```

输出：

```
[
0, 4,
1, 5, 
2, 6, 
3, 7
] 
```

如果我们更改`crossAxisCount`为`4`和更改`arrayLength`为`21`（只是一个随机数。）

```
 final int crossAxisCount = 4;
  final int arrayLength = 21;
  final List<int> output = []; 
```

输出将是：

```
[
0, 6, 11, 16, 
1, 7, 12, 17, 
2, 8, 13, 18, 
3, 9, 14, 19, 
4, 10, 15, 20, 
5
] 
```

我知道在很长的列表/数组中使用这个算法有点贵。但这是确切的解决方案。

我是 Stack Overflow 的新手，请投票给我的答案以获得动力。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-11-07T05:13:46.607

**您可以通过使用GridLayout**而不是 GridView来实现这一点。

```
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android" 
       android:layout_width="wrap_content"
       android:layout_height="match_parent"
       android:orientation="vertical"
       android:rowCount="2">
</GridLayout> 
```

# php - 如何在循环中发送多个 SOAP 请求：PHP？

> ID：13580574
> 
> 赞同：2
> 
> 时间：2012-11-27T09:02:19.763
> 
> 标签：php, xml, arrays, loops, soap

我正在使用 PHP curl 对 Web 服务执行 SOAP 请求，我有一个包含 500 多个项目的 ID 数组，对于每个 ID，我发送一个 SOAP 请求并获得一个 XML 响应，我测试一些参数并生成/存储在一个变量中. 不幸的是，我只能循环遍历数组的 9 个 ID，在 jquery 帖子上的 firebug 中我得到“500 服务器错误”。如何循环浏览所有这 500 个项目？可以通过并行连接或多线程来完成吗？如果是这样，你如何在 PHP curl 中使用它？

这是我的示例代码。

```
<?php 
$VehicleIDs = "153,106,128,149,121,123,125,133,130,115,124,116,102,100,101,103,144,113,...........";//over 500 items
$VehicleIDsArray = explode(",", $VehicleIDs);

for($i=0; $i <= count($massVehicleIDsArray); $i++){
            $soapUrl = "http://xxx.asmx";
            $xml_post_string = '<?xml version="1.0" encoding="utf-8"?>
                            <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
                              <soap:Body>
                                <GetInUseEventsForVehicleID>
                                  <VehicleID>'.$massVehicleIDsArray[$i].'</VehicleID>
                                </GetInUseEventsForVehicleID>
                              </soap:Body>
                            </soap:Envelope>';

        $headers = array(
                    "Content-type: text/xml;charset=\"utf-8\"",
                    "Accept: text/xml",
                    "Cache-Control: no-cache",
                    "Pragma: no-cache",
                    "SOAPAction: xxx", // your op URL
                    "Content-length: ".strlen($xml_post_string),
                );
        // PHP cURL  for https connection with auth
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt($ch, CURLOPT_URL, $soapUrl);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
        curl_setopt($ch, CURLOPT_TIMEOUT, 10);
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_post_string); // xml request
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

        // converting
        $response = curl_exec($ch); 
        curl_close($ch);

        // converting
        $response1 = str_replace("<soap:Body>","",$response);
        $response2 = str_replace("</soap:Body>","",$response1);

        // convertingc to XML
        $parser = simplexml_load_string($response2);   

        /*....................

        MORE CODE TO COMPARE EACH SOAP RESPONSE

        ...................*/
}
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:15:58.410

我认为基本问题是在低时间限制[http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)，是的 curl 支持并行执行[http://php.net /manual/ru/function.curl-multi-exec.php](http://php.net/manual/ru/function.curl-multi-exec.php)，有一些用于并行 curl 执行的开源库。

[http://www.phpclasses.org/package/4091-PHP-Retrieve-multiple-pages-simultaneously.html](http://www.phpclasses.org/package/4091-PHP-Retrieve-multiple-pages-simultaneously.html)

[https://github.com/Fivell/Utfy](https://github.com/Fivell/Utfy)

[https://github.com/jmathai/php-multi-curl](https://github.com/jmathai/php-multi-curl)

等等。但是您仍然可能会达到最大执行时间或内存限制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-16T17:34:02.743

另一种可能性是您在同一页面中多次调用 php 中的 wsdl 方法

在客户端连接之前创建，然后执行类似的操作

```
$params1 = array(xml nodes);
$client->WSDLMETHOD($params1);

echo $client->__getLastRequest();
echo $result = $client->__getLastResponse(); 

//reapeat this and you will do two soap request
$params2 = array(xml nodes);
$client->WSDLMETHOD($params2);
echo $client->__getLastRequest();
echo $result = $client->__getLastResponse(); 
```

# c - 堆栈实现有问题

> ID：13580575
> 
> 赞同：1
> 
> 时间：2012-11-27T09:02:23.480
> 
> 标签：c, stack

**完全披露：这是一个任务。我不是在寻找明确的答案，而是在寻找一些指导。**

我很难用 C 初始化我的堆栈。具体来说，我似乎无法让它正确地将新元素推送到堆栈上。我知道我的 push/pop/etc 功能是正确的（它们是提供的），但我担心我没有正确看待这个。

这是读取字符串并确定它是否“平衡”的基本尝试（所有括号、大括号和方括号都有伙伴并以正确的顺序出现。）据我所知，这不是我的问题逻辑，我相信语法是正确的，所以我有点不知所措......

这是我的实施尝试：

```
int isBalanced(char* s) {

struct DynArr *string;
string = newDynArr(50);

while (nextChar(s) != '\0') {
    if ((nextChar(s) == '(') || (nextChar(s) == '{') || (nextChar(s) == '[')) {
        pushDynArr(string, nextChar(s));
    }
    if (nextChar(s) == ')') {
        if (topDynArr(string) != '(') {
            return 0;
        } else popDynArr(string);
    }
    if (nextChar(s) == '}') {
        if (topDynArr(string) != '{') {
            return 0;
        } else popDynArr(string);
    }
    if (nextChar(s) == ']') {
        if (topDynArr(string) != '[') {
            return 0;
        } else popDynArr(string);
    }
}

if (isEmptyDynArr(string)) {
    printf("The stack is empty\n");
    return 1;
} else return 0;
} 
```

输出总是打印“堆栈为空”并返回 true，尽管我给了它不平衡的字符串。我可能已经看这个太久了，无法识别明显的东西。我将不胜感激您可以提供的任何帮助。我不需要明确的答案，但朝着正确的方向推动就足够了。

编辑：这是已请求的功能...

```
int isEmptyDynArr(DynArr *v) 
{
    if(v->size == 0) {
        return 1;
    }
    else return 0;
}

DynArr* newDynArr(int cap)
{
    assert(cap > 0);
    DynArr *r = (DynArr *)malloc(sizeof( DynArr));
    assert(r != 0);
    initDynArr(r,cap);
    return r;
}

void pushDynArr(DynArr *v, TYPE val)
{
    assert(v != 0);
    addDynArr(v, val);
}

void popDynArr(DynArr *v)
{
    assert(v != 0);
    assert(isEmptyDynArr(v) == 0);
    v->size--;
}

TYPE topDynArr(DynArr *v)
{
    assert(v != 0);
    assert(isEmptyDynArr(v) == 0);
    return v->data[v->size - 1];
}

char nextChar(char* s)
{
    static int i = -1;
    char c;
    ++i;
    c = *(s+i);
    if ( c == '\0' )
        return '\0';
    else
        return c;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:13:45.307

此行可能会从输入行中跳过 1 个或 2 个或 3 个字符：

```
nextChar(s) == '(') || (nextChar(s) == '{') || (nextChar(s) == '[' 
```

你绝对应该使用：

```
char ch = nextChar(s);
if( ch == '(' || ch == '{' || c == '[' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:14:23.217

你似乎没有在`s`任何地方增加。你的`nextChar`功能是做什么的？我只能猜测，但它似乎只会返回`*s`。如果是这种情况，您需要`++s`在每次迭代后递增 s ( )。如果它*确实*神奇（因为在纯 C 中确实没有一种明智的方法来做到这一点）无论如何都会增加 s，那么您应该每次迭代只调用一次并保存结果。我猜是前者，在这种情况下，例如对于这个字符串：“(())”，您将读取第一个 '(' 两次并返回 0。

更新：是的，显然您的 nextChar 函数*确实*使用了全局计数器。建议二适用，每次迭代只调用一次。或者更好的是，摆脱那个东西。该功能的设计方式，您可以在程序的整个生命周期中有效地使用它一次，并且该功能的整个功能都可以替换为 (*s ? *(s++) : *s)。或者只是 *(s++) （自己检查 0 ）。

# iphone - 如何使用 UIImagePickerController 只录制音频？

> ID：13580581
> 
> 赞同：0
> 
> 时间：2012-11-27T09:02:38.193
> 
> 标签：iphone, ios, cocoa-touch, uiimagepickercontroller, audio-recording

我正在IOS上进行媒体录制。我能够使用 UIImagePickerController 录制音频和视频。对于我的规范，我只想录制音频。UIImagePickerController 可以吗？还是我需要考虑其他方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:18:49.567

UIImagePickerController 不能用于录制音频。相反，您应该查看 Apple 的[SpeakHere](https://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007802)示例代码。

另请查看[音频队列 - 以压缩音频格式录制以](https://developer.apple.com/library/ios/#qa/qa1615/_index.html#//apple_ref/doc/uid/DTS40008016)了解如何录制为压缩音频格式并节省磁盘空间。

# android - Android：点击了哪个日期选择器

> ID：13580584
> 
> 赞同：1
> 
> 时间：2012-11-27T09:02:53.850
> 
> 标签：android, date, datepicker, back

我在***同一个活动中有******两个***日期选择器

 *当用户单击设备上的返回按钮时，系统假设知道用户更改了哪个日期选择器日期

并注意：

> 两个日期选择器已连接，当用户更改一个选择器日期时，另一个选择器日期也会以特定方式更改，具体取决于第一个选择器

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:16:57.727

我没有对此进行测试，但我认为这应该可行：

```
private DatePicker datePicker1;
private DatePicker datePicker2;
//...
OnDateChangedListener listener = new OnDateChangedListener() {
    @Override
    public void onDateChanged(DatePicker view, int year, int monthOfYear,int dayOfMonth) {

          if (datePicker1.equals(view)) {
               // Date of datePicker1 is changed
               // ...
          }
          else if (datePicker2.equals(view)) {
               // Date of datePicker2 is changed
               // ...
          }
}

datePicker1.init(2012, 11, 27, listener);
datePicker2.init(2012, 11, 27, listener); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:08:58.343

您需要做的是获取对 EditText 和 DatePicker 的引用：

```
EditText editText = (EditText) findViewById( R.id.dateSelectionEditText );
DatePicker datePicker = (DatePicker) findViewById( R.id.datePicker );
Then you need to create an OnDateChangedListener:

private class MyOnDateChangedListener implements OnDateChangedListener {
  @Override
  public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
     editText.setText( "" + dayOfMonth + "-" + (monthOfYear + 1) + "-" + year );
  }
}; 
```

剩下要做的就是初始化 DatePicker：

```
datePicker.init( year, monthOfYear, dayOfMonth, new MyOnDateChangedListener() ).

http://developer.android.com/guide/topics/ui/controls/pickers.html 
```

在您的活动中全局初始化这些变量，

```
private EditText zopenDate;
        Button calendar;

        private int mYear;
        private int mMonth;
        private int mDay;
        private DatePickerDialog.OnDateSetListener mDateSetListener; 
```

在您的实例内部

```
calendar=(Button)findViewById(R.id.datePicker);
zopenDate=(EditText)findViewById(R.id.dateSelectionEditText);
inside your instance use this listeners,

mDateSetListener =
            new DatePickerDialog.OnDateSetListener() {

                public void onDateSet(DatePicker view, int year, 
                                      int monthOfYear, int dayOfMonth) {
                    mYear = year;
                    mMonth = monthOfYear;
                    mDay = dayOfMonth;
                    updateDisplay();
                }
            };

calendar.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    showDialog(DATE_DIALOG_ID);
                }
            });

final Calendar c = Calendar.getInstance();
            mYear = c.get(Calendar.YEAR);
            mMonth = c.get(Calendar.MONTH);
            mDay = c.get(Calendar.DAY_OF_MONTH);

            // display the current date (this method is below)
            updateDisplay();
the funtion updatedisplay() outside createInstance(),

private void updateDisplay() {
        zopenDate.setText(
            new StringBuilder()
                    // Month is 0 based so add 1
                    .append(mMonth + 1).append("-")
                    .append(mDay).append("-")
                    .append(mYear).append(" "));
    } 
```*

# javascript - 放宽同源政策

> ID：13580588
> 
> 赞同：1
> 
> 时间：2012-11-27T09:02:58.270
> 
> 标签：javascript, cross-domain, cors, same-origin-policy

根据[这篇 Wikipedia article](http://en.wikipedia.org/wiki/Same_origin_policy)，放宽 SOP 的方法有 3 种。但是，本文没有讨论它们中的任何一个的优点或缺点。

1.  设置 document.domain 属性
2.  切换到跨域资源共享
3.  实现跨文档消息传递

我想知道该选哪一个。今天全部实施了吗？他们受支持吗？什么时候选哪个？使用它们时要注意什么？等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:17:45.933

1.  您不能`document.domain`直接设置属性（浏览器为您执行此操作）还是我遗漏了什么？这将是一个严重的安全问题。因此，这并不是跨域脚本的真正选择。
2.  如果您打算从一个 iframe 与不同的域进行通信（基本上是进行跨域 AJAX 调用），那么要走的路。
3.  这允许您在一页内的 iframe 之间进行通信。如果您只需要它，那么这是一种方法。另请阅读此内容以获取更多详细信息：[CORS 对跨域消息传递的好处](https://stackoverflow.com/questions/8186581/benefit-of-cors-over-cross-domain-messaging)

所有这些都在所有主要浏览器中实现。都支持。选哪一个？如果您可以访问服务器端，那么 CORS 是我的首选方式。归根结底，这完全取决于您想做什么。

# node.js - Mongoose 唯一验证错误类型

> ID：13580589
> 
> 赞同：28
> 
> 时间：2012-11-27T09:02:59.757
> 
> 标签：node.js, mongodb, mongoose

我正在使用`mongoose 3.0.3`来自 npm 的这个模式：

```
var schema = new Schema({

    _id: Schema.ObjectId,
    email: {type: String, required: true, unique: true}

}); 
```

如果我尝试保存已经在数据库中的电子邮件，我希望在省略字段的情况下得到一个`ValidationError`赞`required`。然而事实并非如此，我得到一个`MongoError: E11000 duplicate key error index`.

这不是验证错误（即使我删除了 unique:true 也会发生）。

知道为什么吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-02-27T22:30:06.010

我更喜欢把它放在路径验证机制中，比如

```
UserSchema.path('email').validate(function(value, done) {
    this.model('User').count({ email: value }, function(err, count) {
        if (err) {
            return done(err);
        } 
        // If `count` is greater than zero, "invalidate"
        done(!count);
    });
}, 'Email already exists'); 
```

然后它会被包裹起来`ValidationError`，并在您调用`validate`or时作为第一个参数返回`save`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-02-16T08:04:40.893

我对批准的答案有一些问题。即：

1.  `this.model('User')`对我不起作用。
2.  回调`done`无法正常工作。

我通过以下方式解决了这些问题：

```
 UserSchema.path('email').validate(async (value) => {
    const emailCount = await mongoose.models.User.countDocuments({email: value });
    return !emailCount;
  }, 'Email already exists'); 
```

我使用`async/await`的是个人偏好，因为它更整洁：[https](https://javascript.info/async-await) ://javascript.info/async-await 。

如果我有什么问题，请告诉我。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-27T10:14:36.737

这是预期的行为

这`unique: true`相当于在 mongodb 中设置索引，如下所示：

```
db.myCollection.ensureIndex( { "email": 1 }, { unique: true } ) 
```

要使用 Mongoose 进行这种类型的验证（Mongoose 称之为复杂的验证——例如，你不只是断言该值是一个数字），你需要连接到 pre-save 事件：

```
mySchema.pre("save",function(next, done) {
    var self = this;
    mongoose.models["User"].findOne({email : self.email},function(err, results) {
        if(err) {
            done(err);
        } else if(results) { //there was a result found, so the email address exists
            self.invalidate("email","email must be unique");
            done(new Error("email must be unique"));
        } else {
            done();
        }
    });
    next();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-19T09:56:27.043

简单响应json

```
try {
  let end_study_year = new EndStudyYear(req.body);
  await end_study_year.save();
   res.json({
    status: true,
    message: 'បានរក្សាទុក!'
   })
  }catch (e) {
   res.json({
   status: false,
   message: e.message.toString().includes('duplicate') ? 'ទិន្នន័យមានរួចហើយ' : e.message.split(':')[0] // check if duplicate message exist
  })
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-15T13:51:31.847

抱歉回答了一个老问题。经过测试，我感觉很好，找到了这些答案，所以我将给出我的经验。两个最佳答案都很好而且正确，请记住：

*   如果您的文档是新的，您可以验证计数是否高于 0，这是常见的情况；
*   如果您的文档不是新文档并且已修改该`unique`字段，则您也需要使用 0 进行验证；
*   如果您的文档不是新的并且没有被修改，请继续；

这是我在代码中所做的：

```
UserSchema.path('email').validate(async function validateDuplicatedEmail(value) {
    if (!this.isNew && !this.isModified('email')) return true;

    try {
        const User = mongoose.model("User");

        const count = await User.countDocuments({ email: value });
        if (count > 0) return false;

        return true;
    }
    catch (error) {
        return false;
    }
}, "Email already exists"); 
```

# javascript - 如何使用 Google Chrome 扩展程序为另一个域设置 cookie

> ID：13580592
> 
> 赞同：5
> 
> 时间：2012-11-27T09:03:15.663
> 
> 标签：javascript, google-chrome, cookies, google-chrome-extension

我正在开发 Google Chrome 扩展程序。之后应该可以为不属于我的域设置 cookie。

这怎么可能用javascript？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:08:40.157

这是 cookie 的示例实现，您可以使用它设置 cookie

![在此处输入图像描述](../Images/dc2ff86901e6ba0d907617a612ad6f64.png)

***清单.json***

```
{
  "name" : "Cookie API Demo",
  "version" : "1",
  "description" : "This is demonstration of Cookie API",
  "permissions": [ "cookies","<all_urls>"],
  "browser_action": {
    "default_icon": "screen.png",
    "default_popup":"popup.html"
  },
  "manifest_version": 2
} 
```

***popup.js***

```
function cookieinfo(){
    /*chrome.cookies.getAll({},function (cookie){
        console.log(cookie.length);
        for(i=0;i<cookie.length;i++){
            console.log(JSON.stringify(cookie[i]));
        }
    });
    chrome.cookies.getAllCookieStores(function (cookiestores){
        for(i=0;i<cookiestores.length;i++){
            console.log(JSON.stringify(cookiestores[i]));
        }
    });*/
    chrome.cookies.set({"name":"Sample1","url":"http://developer.chrome.com/extensions/cookies.html","value":"Dummy Data"},function (cookie){
        console.log(JSON.stringify(cookie));
        console.log(chrome.extension.lastError);
        console.log(chrome.runtime.lastError);
    });
    /*chrome.cookies.onChanged.addListener(function (changeInfo){
        console.log(JSON.stringify(changeInfo));
    });*/
}
window.onload=cookieinfo; 
```

***popup.html***

```
<html>
<head>
<script src="popup.js"></script>
</head>
<body>
</body>
</html> 
```

# c# - 如何知道进程是否正在使用网络接口？

> ID：13580602
> 
> 赞同：-1
> 
> 时间：2012-11-27T09:03:55.410
> 
> 标签：c#, .net, networking, network-interface

通过带有 C# 的 .NET，我知道在我的操作系统上运行的所有进程。但是如何知道他们是否正在使用任何网络接口？
我也有我的机器具有的网络接口列表，由 C# 编写。
任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:13:00.047

您可以使用此代码片段：

[www.timvw.b](http://www.timvw.be/2007/09/09/build-your-own-netstatexe-with-c/)

这就是您需要的方法：

```
ManagedIpHelper.GetExtendedTcpTable(true); 
```

在那里您将获得所有 PID，您可以将其解析为 ProcessNames。

# css - FF和Chrome中的css背景图像不同

> ID：13580610
> 
> 赞同：0
> 
> 时间：2012-11-27T09:04:15.227
> 
> 标签：css

我的情况很奇怪，我真的不明白为什么......以及如何克服它。所以我必须将背景图片放在大小为 1920x860 的网站上。图像以不同的方式结束 - 例如：如果它没有延伸到整个窗口，图像的角落看起来很奇怪。

当我在 FF 中对此进行测试时，它看起来并不好。我在 22 英寸显示器上进行了测试（因此分辨率为 1680x ..）。当我在 Chrome 中测试时，图像延伸良好，看不到图像的角落。

但是：我有两台显示器，第二台是 23 英寸，因此分辨率与第一台没有太大区别，如果我在 Crome 上测试此页面，也可以，在 FF 上也可以。

然后我使用了firebug工具并尝试获取窗口的innerWidth。22 英寸显示器的内部宽度为 2124 像素，23 英寸显示器的宽度为 1776 像素。

如果有人能告诉我，我将不胜感激 - 为什么会这样？如果有人可以知道如何放置此图像以使其在每台显示器上都很好地扩展……那就更好了。

关键是 - 我必须将图像从一个角落延伸到另一个角落，并且在我的显示器上进行测试时，我不能确定其他用户会看到我所看到的:(

谢谢。

我会在这里发表评论......因为你们所有人都很友善，我只是尝试了许多不同的解决方案。关键是图像没有覆盖整个背景 - 应该看到并且底部应该有一些颜色......现在我使用简单的背景：url（）不重复顶部中心......

如果我使用 -cover- 图像被扩展 - 但我只需要垂直扩展。我也使用了 JS，但无法正常工作，因为页脚是该 bg-image 的一部分......并且全部连接起来。

也许，我只会使用@media .. 为更大的屏幕设置更大的图像（当然会使用更大的图像），但这也只适用于更大的屏幕，如果不是，我认为设计会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:12:58.467

让我为您搜索一下（“css 窗口背景”的第一个结果）：

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

简而言之：

```
html { 
    background: url(bg.jpg) no-repeat center center fixed;
    background-size: cover;
} 
```

另见：[http ://caniuse.com/#search=background-size](http://caniuse.com/#search=background-size)

# c# - 如何在 ItextSharp 中为 PdfPCell 设置宽度

> ID：13580611
> 
> 赞同：22
> 
> 时间：2012-11-27T09:04:26.453
> 
> 标签：c#, itextsharp, pdfptable

我想在表格中为 PdfpCell 设置宽度，我想设计这个

![在此处输入图像描述](../Images/f4157e5982a67dee80ffb303442921d7.png)
我写这个代码

```
 PdfPCell cell;
            PdfGrid tableHeader;
            PdfGrid tmpTable;
            PdfGrid table = new PdfGrid(numColumns: 1) { WidthPercentage = 100, RunDirection = PdfWriter.RUN_DIRECTION_LTR, ExtendLastRow = false };

            string imagepath2 = HttpRuntime.AppDomainAppPath + "Header.JPG";
            cell = new PdfPCell() { Border = 0, RunDirection = PdfWriter.RUN_DIRECTION_RTL };
            cell.Image = iTextSharp.text.Image.GetInstance(imagepath2);
            table.AddCell(cell);

            tableHeader = new PdfGrid(numColumns: 10);
            tableHeader.RunDirection = PdfWriter.RUN_DIRECTION_LTR;

            tmpTable = new PdfGrid(numColumns: 1);
            tmpTable.TotalWidth = 10f;
            tmpTable.LockedWidth = true;
            cell = new PdfPCell() {Rotation =-90,VerticalAlignment =Element.ALIGN_MIDDLE, HorizontalAlignment =Element.ALIGN_CENTER, BorderWidth = 1};
            cell.Phrase = fontSelector.Process("SER. No");

            tmpTable.AddCell(cell);

            cell = new PdfPCell(tmpTable) { BorderWidth = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            tableHeader.AddCell(cell);

            ////////////////////////////////////////////////////////////
            tmpTable = new PdfGrid(numColumns: 1);
            cell = new PdfPCell() { Border = 0,  BorderWidthBottom = 1,VerticalAlignment =Element.ALIGN_MIDDLE, HorizontalAlignment =Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("TYPE OF SHIPPING");
            //
            tmpTable.AddCell(cell);

            cell = new PdfPCell() { Border = 0, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("AWB / BL NO.");
            tmpTable.AddCell(cell);

            cell = new PdfPCell(tmpTable) { BorderWidth = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            tableHeader.AddCell(cell);
            ///////////////////////////////////////////////////////////////

            tmpTable = new PdfGrid(numColumns: 1);
            cell = new PdfPCell() { Border = 0, BorderWidthBottom = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("ORDER NO.");
            tmpTable.AddCell(cell);

            cell = new PdfPCell() { Border = 0, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("COMPLEX NAME");
            tmpTable.AddCell(cell);

            cell = new PdfPCell(tmpTable) { BorderWidth = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            tableHeader.AddCell(cell);
            ///////////////////////////////////////////////////////////////

            tmpTable = new PdfGrid(numColumns: 1);
            cell = new PdfPCell() { Border = 0, BorderWidthBottom = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("QTY.");
            tmpTable.AddCell(cell);

            cell = new PdfPCell() { Border = 0, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("G.W Kgs.");
            tmpTable.AddCell(cell);

            cell = new PdfPCell(tmpTable) { BorderWidth = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            tableHeader.AddCell(cell);
            ///////////////////////////////////////////////////////////////
            tmpTable = new PdfGrid(numColumns: 1);
            cell = new PdfPCell() { Border = 0, BorderWidthBottom = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("DISCHARGE PPORT");
            tmpTable.AddCell(cell);

            cell = new PdfPCell() { Border = 0, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("DESTINATON");
            tmpTable.AddCell(cell);

            cell = new PdfPCell(tmpTable) { BorderWidth = 1 };
            tableHeader.AddCell(cell);
            ///////////////////////////////////////////////////////////////
            cell = new PdfPCell() { BorderWidth = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("DESCRIPTION OF GOODS");

            tableHeader.AddCell(cell);

            /////////////////////////////////////////////////////////////
            tmpTable = new PdfGrid(numColumns: 1);
            cell = new PdfPCell() { Border = 0, BorderWidthBottom = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("LINE DOC. RECI. DATE");
            tmpTable.AddCell(cell);

            cell = new PdfPCell(new Phrase("")) { Border = 0, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("OWNER DOC. RECI. DATE");
            tmpTable.AddCell(cell);

            cell = new PdfPCell(tmpTable) { BorderWidth = 1 };
            tableHeader.AddCell(cell);
            ///////////////////////////////////////////////////////////////
            cell = new PdfPCell() { BorderWidth = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("CLEARANCE DATE");

            tableHeader.AddCell(cell);

            ///////////////////////////////////////////////////////////

            cell = new PdfPCell() { BorderWidth = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("CUSTOM PERMIT NO.");

            tableHeader.AddCell(cell);

            ///////////////////////////////////////////////////////////
            cell = new PdfPCell() { BorderWidth = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
            cell.Phrase = fontSelector.Process("DISPATCH DATE");
            tableHeader.AddCell(cell);

            ///////////////////////////////////////////////////////////
            cell = new PdfPCell(tableHeader) { BorderWidth = 1, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };

            table.AddCell(cell);
            doc.Add(table);
            ///////////////////////////////////////////////////////////
            doc.Close(); 
```

但是这段代码创建了这个表 ![在此处输入图像描述](../Images/8a338a61541629db8abb300e299949c5.png)

我想调整宽度 SerNo 列但

但我不知道如何调整单元格的宽度，请帮助我。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-27T09:21:52.877

`PdfPTable`为什么不为此使用对象？创建一个固定宽度的表格，并使用一个浮点数组来设置列的宽度

```
PdfPTable table = new PdfPTable(10);
table.HorizontalAlignment = 0;
table.TotalWidth = 500f;
table.LockedWidth = true;
float[] widths = new float[] { 20f, 60f, 60f, 30f, 50f, 80f, 50f, 50f, 50f, 50f };
table.SetWidths(widths);

addCell(table, "SER.\nNO.", 2);

addCell(table, "TYPE OF SHIPPING", 1);
addCell(table, "ORDER NO.", 1);
addCell(table, "QTY.", 1);
addCell(table, "DISCHARGE PPORT", 1);

addCell(table, "DESCRIPTION OF GOODS", 2);

addCell(table, "LINE DOC. RECL DATE", 1);

addCell(table, "CLEARANCE DATE", 2);
addCell(table, "CUSTOM PERMIT NO.", 2);
addCell(table, "DISPATCH DATE", 2);

addCell(table, "AWB/BL NO.", 1);
addCell(table, "COMPLEX NAME", 1);
addCell(table, "G. W. Kgs.", 1);
addCell(table, "DESTINATION", 1);
addCell(table, "OWNER DOC. RECL DATE", 1);

....

private static void addCell(PdfPTable table, string text, int rowspan)
{
    BaseFont bfTimes = BaseFont.CreateFont(BaseFont.TIMES_ROMAN, BaseFont.CP1252, false);
    iTextSharp.text.Font times = new iTextSharp.text.Font(bfTimes, 6, iTextSharp.text.Font.NORMAL, iTextSharp.text.BaseColor.BLACK);

    PdfPCell cell = new PdfPCell(new Phrase(text, times));
    cell.Rowspan = rowspan;
    cell.HorizontalAlignment = PdfPCell.ALIGN_CENTER;
    cell.VerticalAlignment = PdfPCell.ALIGN_MIDDLE;
    table.AddCell(cell);
} 
```

也看看[这个教程](http://www.mikesdotnetting.com/Article/86/iTextSharp-Introducing-Tables)......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T10:14:00.560

尝试这样的事情

```
PdfPCell cell;
PdfPTable tableHeader;
PdfPTable tmpTable;
PdfPTable table = new PdfPTable(10) { WidthPercentage = 100, RunDirection = PdfWriter.RUN_DIRECTION_LTR, ExtendLastRow = false };

// row 1 / cell 1 (merge)
PdfPCell _c = new PdfPCell(new Phrase("SER. No")) { Rotation = -90, VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER, BorderWidth = 1 };
_c.Rowspan = 2;

table.AddCell(_c);

// row 1 / cell 2
_c = new PdfPCell(new Phrase("TYPE OF SHIPPING")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
table.AddCell(_c);

// row 1 / cell 3
_c = new PdfPCell(new Phrase("ORDER NO.")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
table.AddCell(_c);

// row 1 / cell 4
_c = new PdfPCell(new Phrase("QTY.")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
table.AddCell(_c);

// row 1 / cell 5
_c = new PdfPCell(new Phrase("DISCHARGE PPORT")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
table.AddCell(_c);

// row 1 / cell 6 (merge)
_c = new PdfPCell(new Phrase("DESCRIPTION OF GOODS")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
_c.Rowspan = 2;
table.AddCell(_c);

// row 1 / cell 7
_c = new PdfPCell(new Phrase("LINE DOC. RECI. DATE")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
table.AddCell(_c);

// row 1 / cell 8 (merge)
_c = new PdfPCell(new Phrase("OWNER DOC. RECI. DATE")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
_c.Rowspan = 2;
table.AddCell(_c);

// row 1 / cell 9 (merge)
_c = new PdfPCell(new Phrase("CLEARANCE DATE")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
_c.Rowspan = 2;
table.AddCell(_c);

// row 1 / cell 10 (merge)
_c = new PdfPCell(new Phrase("CUSTOM PERMIT NO.")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
_c.Rowspan = 2;
table.AddCell(_c);

// row 2 / cell 2
_c = new PdfPCell(new Phrase("AWB / BL NO.")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
table.AddCell(_c);

// row 2 / cell 3
_c = new PdfPCell(new Phrase("COMPLEX NAME")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
table.AddCell(_c);

// row 2 / cell 4
_c = new PdfPCell(new Phrase("G.W Kgs.")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
table.AddCell(_c);

// row 2 / cell 5
_c = new PdfPCell(new Phrase("DESTINATON")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
table.AddCell(_c);

// row 2 / cell 7
_c = new PdfPCell(new Phrase("OWNER DOC. RECI. DATE")) { VerticalAlignment = Element.ALIGN_MIDDLE, HorizontalAlignment = Element.ALIGN_CENTER };
table.AddCell(_c);

_doc.Add(table);
///////////////////////////////////////////////////////////
_doc.Close(); 
```

您可能需要稍微重新调整宽度和边框，但这是一次性的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-27T12:26:54.237

试试这个代码，我认为它更优化。

HeaderRow 用于自动为每个新页面重复表格的标题

```
 BaseFont bfTimes = BaseFont.CreateFont(BaseFont.TIMES_ROMAN, BaseFont.CP1252, false);
        iTextSharp.text.Font times = new iTextSharp.text.Font(bfTimes, 6, iTextSharp.text.Font.NORMAL, iTextSharp.text.BaseColor.BLACK);

        PdfPTable table = new PdfPTable(10) { HorizontalAlignment = Element.ALIGN_CENTER, WidthPercentage = 100, HeaderRows = 2 };
        table.SetWidths(new float[] { 2f, 6f, 6f, 3f, 5f, 8f, 5f, 5f, 5f, 5f });
        table.AddCell(new PdfPCell(new Phrase("SER.\nNO.", times)) { Rowspan = 2, GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("TYPE OF SHIPPING", times)) { GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("ORDER NO.", times)) { GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("QTY.", times)) { GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("DISCHARGE PPORT", times)) { GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("DESCRIPTION OF GOODS", times)) { Rowspan = 2, GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("LINE DOC. RECL DATE", times)) { GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("CLEARANCE DATE", times)) { Rowspan = 2, GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("CUSTOM PERMIT NO.", times)) { Rowspan = 2, GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("DISPATCH DATE", times)) { Rowspan = 2, GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("AWB/BL NO.", times)) { GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("COMPLEX NAME", times)) { GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("G. W. Kgs.", times)) { GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("DESTINATION", times)) { GrayFill = 0.95f });
        table.AddCell(new PdfPCell(new Phrase("OWNER DOC. RECL DATE", times)) { GrayFill = 0.95f }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T14:42:18.500

aca definis los anchos

```
 float[] anchoDeColumnas= new float[] {10f, 20f, 30f, 10f}; 
```

aca se los insertas a la tabla que tiene las columnas

```
table.setWidths(anchoDeColumnas); 
```

# mysqldump - cloudbees 数据库转储

> ID：13580614
> 
> 赞同：0
> 
> 时间：2012-11-27T09:04:34.520
> 
> 标签：mysqldump, cloudbees

[如何从cloudbees](http://www.cloudbees.Com)中导出 mysql 数据库？

我想使用[mysqldump](http://dev.mysql.com/doc/refman/5.0/en/mysqldump.html)或类似的命令，但是我的数据库是由 cloudbees 托管的，所以我无法通过 ssh 连接到 mysql 主机来运行这样的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:04:34.520

您可以从 Cloudbees 网络外部连接到您的数据库，使用可以从[https://run.cloudbees.com/a/{{accountId}}#db-manage](https://run.cloudbees.com/a/%7B%7BaccountId%7D%7D#db-manage)获取的 mysql 连接参数。

使用您最喜欢的 mysql 工具来导出和管理您的数据库，例如[mysql workbench](http://www.mysql.fr/products/workbench/)。

# java - 使用 IText5.0 从 PDF 中删除页脚

> ID：13580619
> 
> 赞同：3
> 
> 时间：2012-11-27T09:04:50.467
> 
> 标签：java, pdf-generation, itext

我需要能够添加此代码...我想修改此代码以从 PDF 中添加/编辑/删除页眉和页脚。

```
public void onEndPage(PdfWriter writer, Document document)
{
    PdfContentByte cb = writer.getDirectContent();
    if (document.getPageNumber() > 1)
    {
        ColumnText.showTextAligned(cb, Element.ALIGN_CENTER, header, (document.right() - document
                                   .left())
                                   / 2 + document.leftMargin(), document.top() + 10, 0);
    }
    footer.writeSelectedRows(0, -1, (document.right() - document.left() - 300) / 2
                             + document.leftMargin(), document.bottom() - 10, cb);
} 
```

请问有什么建议吗？

[特定页面的 iText Pdf 标题删除](https://stackoverflow.com/questions/10548660/itext-pdf-header-removal-for-particular-page)

此链接显示如何使用 HeaderFooter 类。请分享 Itext2.X.jar 文件

# asp.net-mvc-3 - 如何在 MVC3 中将数据从视图发送到控制器

> ID：13580621
> 
> 赞同：1
> 
> 时间：2012-11-27T09:04:59.903
> 
> 标签：asp.net-mvc-3

大家好，我想问一下如何将数据从视图发送到控制器？我想用我的控制器和视图描述我的问题，如下所示

这是登录动作控制器

```
[HttpPost]
public ActionResult Login(Panel model, string Username, string Password, string CaptchaValue, string InvisibleCaptchaValue)
{
    bool cv = CaptchaController.IsValidCaptchaValue(CaptchaValue.ToUpper());
    bool icv = InvisibleCaptchaValue == "";

    if (!cv || !icv)
    {
        ModelState.AddModelError(string.Empty, "The Captcha Code you entered is invalid.");
    }

    if (ModelState.IsValid)
    {
        if (model.Username == Username && model.Password == Password)
        {
            FormsAuthentication.SetAuthCookie(model.Username, false);
            return RedirectToAction("index", "Home");
        }
        else
        {
            ModelState.AddModelError("", "Check your name or password");
        }
    }
    return View();
} 
```

因此，当用户登录时，重定向到主页/索引视图。此时一切正常。

这是我的索引视图：

```
[Authorize]
public ActionResult index()
{
    return View();
} 
```

我的问题是如何保存用户的密码参数并从索引视图发送到不同的控制器以在控制器方法中使用此参数但是如何？例如，我想在 where 子句中的 index_test 控制器方法中使用密码参数，但首先我需要从 index.html 发送这些数据。

```
public ActionResult index_test()
{
    return View(db.contents.Where(x => x.test_parameter== password).ToList());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:48:59.980

您必须向您的操作方法添加一个参数：

```
public ActionResult index_test(string password) { ... 
```

在您的视图中，您可以通过标准链接将数据发送到操作：

```
@Html.ActionLink("Click me", "index_test", "Controller", 
                                  new { password = "StringOrVariable") 
```

或者通过做一个表格帖子：

```
@using(Html.BeginForm("index_test")) { 
    <input type="hidden" name="password" value="mypassword" />
    add some fields
    <input type="submit" value="Send" />
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:22:34.783

例如，在您的视图中，将表单发送回控制器

```
<form action = "yourcontroller/youraction" method = "POST" enctype = "multiparrt/form-data"> 
```

# ruby-on-rails - Elastic beanstalk Rails - 即使我设置了暂存环境，也默认为生产环境

> ID：13580624
> 
> 赞同：4
> 
> 时间：2012-11-27T09:05:12.367
> 
> 标签：ruby-on-rails, deployment, amazon-web-services, amazon-elastic-beanstalk

我正在尝试使用弹性豆茎提出一个轨道应用程序的暂存实例。我按照文档进行了以下操作：

```
eb init --environment staging
eb start --environment staging 
```

在此之后，我检查了 .elasticbeanstalk/optionsettings 仍然有“生产”作为环境。我手动将其更新为暂存，并尝试了 git aws.push 命令。

一段时间后，一切都已部署，但是，当我加载 URL 时，应用程序似乎仍在使用所有生产配置，而不是暂存。我错过了任何步骤吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T10:00:47.967

CLI 工具中的`--environment`开关`eb`不是指 Rails 环境，而是指您尝试启动的 Elastic Beanstalk 环境。Elastic Beanstalk 环境是一组用于已部署应用程序版本的预置资源。这与 Rails/Rack 环境不同，后者只是用户定义的上下文，供应用程序代码在单个机器上运行。

为了设置*Rails 环境*，您需要在文件中设置`RACK_ENV`（或`RAILS_ENV`）环境变量，然后调用以触发这些环境变量的更新。或者，您可以通过[Elastic Beanstalk 控制台编辑您的](https://console.aws.amazon.com/elasticbeanstalk)*Elastic Beanstalk 环境*配置；在正确的环境中点击“环境详细信息”，在概览中点击“编辑配置”，然后转到“容器”以调整环境变量（在这种情况下，您将编辑该字段）。`.elasticbeanstalk/optionsettings``eb start``eb update`*`RACK_ENV`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T19:21:28.957

虽然我使用的是[eb_deployer](https://github.com/ThoughtWorksStudios/eb_deployer)而不是`eb`命令行，但在尝试部署时`RAILS_ENV: development`我发现`db:migrate`etc 在开发环境中运行，但它仍然以生产模式启动服务器。为了解决这个问题，必须在 option_settings 中同时传入 RACK_ENV 和 RAILS_ENV：

```
[{
   namespace: 'aws:elasticbeanstalk:application:environment',
   option_name: 'RACK_ENV',
   value: "development"
 },
 {
   namespace: 'aws:elasticbeanstalk:application:environment',
   option_name: 'RAILS_ENV',
   value: "development"
 }] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-04T15:20:24.537

这是首次将应用程序部署到 elasticbeanstalk 的明确指南。

1) eb init --profile profile-name（配置文件名称将在 .aws > config 中）

2) 通过输入序列号，根据需要选择默认区域。

3) 通过输入序列号选择要使用的应用程序。

4) eb 列表

5) eb 使用（列表中的名称）

6) eb status (会给你状态) 就是这样你完成了初始化。现在，如果您想更改环境，只需使用以下命令。

*   eb setenv RACK_ENV=staging（需要一段时间）。

*   eb 部署（在 git 登台之后）。

你完了！！！！*

# objective-c - 如何将日期和时间与字符串分开解析？

> ID：13580626
> 
> 赞同：-2
> 
> 时间：2012-11-27T09:05:17.187
> 
> 标签：objective-c

我有一个格式为“ *3 Dec 2012 1:00PM* ”的字符串，我需要解析出日期和时间，以便我可以在单独的 s中获得“ *3 Dec 2012* ”和“ *1:00PM ”。*`NSString`我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:16:17.793

```
NSString *strInput = @"3 Dec 2012 1:00PM";
static NSString *format = @"dd MMM yyyy hh:mma";

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
[dateFormatter setDateFormat:format];
NSLocale *usLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
[dateFormatter setLocale:usLocale];
NSDate *date = [dateFormatter dateFromString:strInput];

static NSString *format1 = @"dd MMM yyyy";
[dateFormatter setDateFormat:format1];
NSString *strDatePart1 = [dateFormatter stringFromDate:date]; // gives 3 Dec 2012
static NSString *format2 = @"hh:mma";
[dateFormatter setDateFormat:format2];
NSString *strDatePart2 = [dateFormatter stringFromDate:date]; // gives 1:00PM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:14:03.323

解决此问题的最简单（也是最快）的方法是将其用作没有日期格式化程序的字符串：

```
NSArray* components = [fullDateTime componentsSeparatedByString:@" "];
NSString* date = [NSString stringWithFormat:@"%@%@%@", [components objectAtIndex:0], [components objectAtIndex:1], [components objectAtIndex:2]];
NSString* time =  [components objectAtIndex:3]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:15:11.557

试试这个...这可能会帮助你..

```
NSDateFormatter *formatOld = [[NSDateFormatter alloc] init];
[formatOld setDateFormat:@"dd MMM yyyy hh:mma"]; //3 Dec 2012 1:00PM
NSString *oldDate = @"3 Dec 2012 1:00PM";
NSDate *date = [formatOld dateFromString:oldDate];
NSDateFormatter *newFormate = [[NSDateFormatter alloc]init];
[newFormate setDateFormat:@"dd MMM yyyy 'and' hh:mm a"]; //3 Dec 2012" and "1:00PM
NSString *newdate =[newFormate stringFromDate:date];
NSLog(@"%@",newdate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:17:16.603

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd MMM YYYY"];
NSDate *date = [NSDate date];
//in your case you have a string in place of date. I have made it generalised. 
//if you have string 

NSString *onlyDate = [dateFormatter stringFromDate:date];
NSLog(@"Date: %@ ", onlyDate);

[dateFormatter setDateFormat:@"hh:mm a"];

NSString *onlyTime=[dateFormatter stringFromDate:date];
NSLog(@"Time: %@ ", onlyTime); 
```

输出

```
Date: 27 Nov 2012
Time: 02:43 PM 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-27T09:21:37.623

```
NSString* dateString =  @"3 Dec 2012 1:00PM";
- (int) indexOf:(NSString*)source of:(NSString *)text {
    NSRange range = [source rangeOfString:text];
    if ( range.length > 0 ) {
        return range.location;
    } else {
        return -1;
    }
}

-(void)dostrip{
   NSString* date = [dateString substringToIndex:[self indexOf:@":"]];
   NSLog(@"date: %@", date);
   NSString* hour = [dateString substringFromIndex:[self indexOf:@":"]];
   NSLog(@"hour: %@", hour);
}
` 
```

# java - 从 Java SE 应用程序编译 J2ME

> ID：13580628
> 
> 赞同：2
> 
> 时间：2012-11-27T09:05:22.710
> 
> 标签：java, java-me, compilation

我为一些 java 移动应用程序（J2ME jars）创建了一个包装器。包装器在启动后调用游戏文件。要包装一个特定的 jar 文件，我当然必须编译我的包装程序。

为了使打包过程自动化，我创建了一个 Java SE 应用程序，它获取 jar 文件的位置并用我的程序打包它们，使用 J2ME 库编译它们，然后将打包的 jar 文件放到另一个位置。

在设备或模拟器上运行时，此编译会产生“类版本不匹配”运行时错误。这个问题有什么解决办法吗？

我们如何从 Java SE 应用程序成功编译 J2ME 应用程序？

# ios - iPad 应用程序在 2 秒后关闭，内存问题？

> ID：13580630
> 
> 赞同：0
> 
> 时间：2012-11-27T09:05:27.140
> 
> 标签：ios, xcode, instruments

我制作了一个杂志 iPad 应用程序，因此您可以向左、向右、向下和向上滚动浏览不同的幻灯片。iTunes 应用商店已经准备好并接受了它。问题是，如果有人下载该应用程序，它会在加载 1 秒后直接关闭。

奇怪的部分是我通过 xCode 安装了应用程序并且所有工作都没有任何问题。我的猜测是该应用程序占用了太多内存。我做了记忆仪器的截图：

![记忆仪器](../Images/f9b87e83a7e666674c6ad19ff21fe9a9.png)

但是，如果必须一直加载 Srollview，我该如何发布它？

希望有人能把我推向正确的方向！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:36:58.150

我已经在装有 iOS 5.1.1 的 iPad2 上测试了您的应用程序，但它崩溃并显示以下消息：

```
OxygenEvents[97151] <Error>: *** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named NSLayoutConstraint'
    *** First throw call stack:
    (0x375c388f 0x31638259 0x375c3789 0x375c37ab 0x309de54d 0x309de6bb 0x309de423 0x3096f001 0x308dd3c7 0x307bac59 0x30730c17 0x10d5d5 0x30730c8b 0x109beb 0x30730c8b 0x3072f461 0x30721e87 0x307927d5 0x10960b 0x3072fcab 0x307297dd 0x306f7ac3 0x306f7567 0x306f6f3b 0x3771322b 0x37597523 0x375974c5 0x37596313 0x375194a5 0x3751936d 0x3072886b 0x30725cd5 0x10944f 0xf0050) 
```

这是因为您在 Interface Builder 文件（nib / xib 文件）中使用了“自动布局”，这是 iOS 6.0 独有的功能。

要解决此问题，请在所有 xib 文件中禁用自动布局，如下所示：

![取消选中自动布局](../Images/5fe67bee7091cbcdfa6fed3c979f8fe1.png)

或者只是通过将部署目标设置为 iOS 6.0 来使您的应用程序为 iOS 6.0

# java - 将文件从 JSP 发送到 Servlet

> ID：13580632
> 
> 赞同：0
> 
> 时间：2012-11-27T09:05:29.043
> 
> 标签：java, jsp, tomcat, servlets, netbeans

请看他下面的代码

**JSP**

```
<%-- 
    Document   : index
    Created on : Nov 27, 2012, 1:11:48 PM
    Author     : Yohan
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <div>
  <div>Content for New Div Tag Goes Here</div>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
<p>&nbsp;</p>
  <div>
      <form method="post" action="FileSelector" enctype="multipart/form-data">
      Select File: <input type="file" name="location"/></div>
        <br>
        <input type="submit" value="Submit"/>
</form>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>

</div>
    </body>
</html> 
```

**小服务程序**

```
package importWizard;

import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.*;
import javax.servlet.http.*;

public class FileSelector extends HttpServlet
{
    public void doGet(HttpServletRequest request, HttpServletResponse response)throws ServletException,IOException
    {
        doPost(request,response);
    }

    public void doPost(HttpServletRequest request, HttpServletResponse response)throws ServletException,IOException
    {
        PrintWriter pw = response.getWriter();

        File location = (File)request.getParameter("location");

        pw.write(location);
    }
} 
```

如您所见，我无法将文件从 JSP 发送到 Servlet。我不需要发送文件，但至少需要文件的完整位置（它只是发送文件名）。如何将文件或文件的完整位置从 JSP 发送到 servlet？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:29:42.667

> *我不需要发送文件，但至少需要文件的完整位置（它只是发送文件名）。如何将文件或文件的完整位置从 JSP 发送到 servlet？*

`<input type="file">`使用标准 HTML元素是不可能的。它仅发送整个文件内容以及文件名，因为这基本上是服务器获取文件内容的唯一方式。服务器即无法直接访问客户端的本地磁盘文件系统，因此客户端的绝对磁盘文件系统路径作为唯一信息将毫无用处。请注意，由于安全漏洞，MSIE 浏览器将发送完整的绝对客户端磁盘文件系统路径，而不仅仅是文件名，但这不是应该的工作方式。

如果你真的只需要客户端的绝对磁盘文件系统路径，那么最好的办法是创建一个（签名的）applet 或 webstart 应用程序，通过它获取它`JFileChooser`并最终将它嵌入到网页中。

### 也可以看看：

*   [如何从 Firefox 3 中的 HTML 输入表单中获取文件路径](https://stackoverflow.com/questions/81180/how-to-get-the-file-path-from-html-input-form-in-firefox-3/3374408#3374408)

# javascript - 支持和模拟 HTML5 在较旧的 IE 浏览器中

> ID：13580634
> 
> 赞同：0
> 
> 时间：2012-11-27T09:05:35.723
> 
> 标签：javascript, html5-canvas, excanvas, flashcanvas

我发现 excanvas 和 flashcanvas 是 Internet Explorer 中用于支持画布功能的常用库（低于 9）。但是它们都没有实现canvas的所有规范特性。

例如 drawImage() 函数只接受图像作为源。它不支持画布或视频。getImageData(),putImageData() 也没有可用的实现

哪个是支持 IE 浏览器中画布功能的最佳且正确的 JavaScript 库？我们是否有任何其他完全模仿原生画布功能的 IE 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:18:26.747

*FlashCanvas Pro*支持`getImageData()`和`putImageData()`： [http ://flashcanvas.net/docs/canvas-api](http://flashcanvas.net/docs/canvas-api)

但我建议你不要尝试在 ie<=9 上使用画布

如果你需要处理图形，你可以使用[http://raphaeljs.com/](http://raphaeljs.com/)，它使用现代浏览器的 SVG 和 6-8 的 VML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:08:22.930

你听说过[DOM SPITRES](http://buildnewgames.com/dom-sprites/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:34:06.507

无法获得对旧 IE 浏览器 (IE6 - IE8) 的完整画布支持

*   Javascript 引擎性能不足以模拟所有原生`<canvas>`操作

*   外部插件（如 Flash）在与页面元素（如`<img>`或其他）交互的方式上受到限制`<canvas>`

解决方案

*   [Google Chrome Frame](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started/chrome-frame-faq)提供单击，无需管理员权限，该插件将使旧的 Internet Explorer 在页面请求时使用 Google Chrome 渲染引擎。它将在内部打开 Internet Explorer Chrome，用户看不到差异。缺点是单击插件安装和下载时间。

*   不支持旧浏览器

*   `<canvas>`如果您需要支持旧浏览器，请勿使用

*   使用`<canvas>`适用于所有浏览器的仿真功能集 - 这是最痛苦的解决方案，我建议您根本不要尝试这样做，因为迟早您会遇到在`<canvas>`仿真器中不起作用的东西

# session - Node.js (Express JS 3.x 和 Socket.io 一起)

> ID：13580636
> 
> 赞同：1
> 
> 时间：2012-11-27T09:05:42.120
> 
> 标签：session, socket.io, express

我需要在套接字之间共享会话并表达 js。我试图让这个例子工作：[http](http://www.danielbaulig.de/socket-ioexpress/) ://www.danielbaulig.de/socket-ioexpress/没有成功。网页浏览器返回

> GET localhost:8000/socket.io/1/?t=1354005884872 500（内部服务器错误）

在会话开始时。我收到服务器端错误：

> warn - 握手错误 Error

**服务器端脚本：**

```
var express = require('express')
  , util = require('util')
  , connect = require('express/node_modules/connect')
  , parseCookie = connect.utils.parseCookie
  , MemoryStore = connect.middleware.session.MemoryStore
  , store;

  var app = express()
  , http = require('http')
  , server = http.createServer(app)
  , io = require('socket.io').listen(server);

  var connect = require('express/node_modules/connect')
  , util = require('util')
  , cookie = require('cookie')
  , parseCookie = cookie.parse
  , MemoryStore = connect.middleware.session.MemoryStore
  , store;

app.configure(function () {
    app.use(express.cookieParser());
    app.use(express.session({
      secret: 'secret'
    , key: 'express.sid'
    , store: store = new MemoryStore()
    }));
    app.use(function (req, res) {
        res.send('Hello, your session id is ' + req.sessionID);
    });
});

io.set('authorization', function (data, accept) {
  if (!data.headers.cookie) 
    return accept('No cookie transmitted.', false);

  data.cookie = parseCookie(data.headers.cookie);
  data.sessionID = data.cookie['express.sid'];

  store.load(data.sessionID, function (err, session) {
    if (err || !session) return accept('Error', false);

    data.session = session;
    return accept(null, true);
  });
}).sockets.on('connection', function (socket) {
  var sess = socket.handshake.session;
  socket.log.info(
      'a socket with sessionID'
    , socket.handshake.sessionID
    , 'connected'
  );
  socket.on('set value', function (val) {
    sess.reload(function () {
      sess.value = val;
      sess.touch().save();
    });
  });
});

app.use(count);

// custom middleware
function count(req, res) {
  req.session.count = req.session.count || 0;
  var n = req.session.count++;
  res.send('viewed ' + n + ' times\n');
}

server.listen(8000); 
```

**客户端脚本：**

```
<%= javascript_include_tag "http://localhost:8000/socket.io/socket.io.js" %>
var socket = io.connect('http://localhost:8000'); 
```

socket.io v0.9.11、express.js v3.0.3、connect v2.7.0、cookie v0.0.5

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:20:47.847

刚刚遇到一个可能有助于为您简化一切的项目。Express.io 结合了 express 和 socket.io，并包含了一堆易于使用的示例： [https ://github.com/techpines/express.io](https://github.com/techpines/express.io)

我自己只是玩弄了一点，但它看起来很有希望。希望这可以帮助。

# c - OpenMP 多个 for 循环

> ID：13580637
> 
> 赞同：1
> 
> 时间：2012-11-27T09:05:50.650
> 
> 标签：c, loops, openmp, nested-loops

我的代码看起来像这样：

```
for(i=0; i<max;i++){
   for(j=0; j<max2;j++)
     //stuff
}

for(i=0; i<max;i++){
   for(j=0; j<max2;j++)
     //other stuff
}

for(i=0; i<max;i++){
   for(j=0; j<max2;j++)
     //final stuff
} 
```

我想使用 OpenMP 将其并行化。最好的方法是什么？我尝试`#pragma omp parallel private(i)`在开始和`#pragma omp for`每个`j`循环之前进行。这就是我的意思：

```
 #pragma omp parallel private(i)
 {
 for(i=0; i<max;i++){
   #pragma omp for
   for (j=0; j<max2;j++){
   //and so on and so forth 
```

问题是，这没有给我任何性能提升。我怀疑这是因为 3 个`for`循环不是并行运行的……如果我能让这 3 个循环同时运行，我想我可以获得性能提升。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:41:22.760

一个快速的解决方法是制作一个迭代部分并将其并行：

```
#pragma omp for
for (k=0;k<3;k++){
  if (k==0) do_stuff();
  if (k==1) do_other_stuff();
  if (k==2) do_other_other_stuff();
} 
```

更好的解决方法是使用`omp sections`指令。（从[这里](https://stackoverflow.com/questions/2770911/how-does-the-sections-directive-in-openmp-distribute-work)采取的解决方案）

```
#pragma omp parallel sections
{
  #pragma omp section
  {
     /* Executes in thread 1 */
     do_stuff();
  } 
  #pragma omp section
  {
    /* Executes in thread 2 */ 
    do_other_stuff();   
  } 
  #pragma omp section
  {
    /* Executes in thread 3 */
    do_other_other_stuff();
  }   
} 
```

# c# - 可以将任何 ActiveX 组件用作 COM 对象吗？

> ID：13580643
> 
> 赞同：2
> 
> 时间：2012-11-27T09:06:11.637
> 
> 标签：c#, c++, com, activex

我不清楚`COM`和`ActiveX`术语之间的区别。所以我很困惑：我可以使用*任何*ActiveX 组件作为 COM 对象吗？

我有一个 ActiveX 组件，它也可以在浏览器中使用。但是我想将此组件用作 COM 对象（我有可以使用 COM 对象的库，但在库描述中没有写任何关于 ActiveX 的内容）？

# iphone - FPPopover 不显示 popover 查看 iOS 6

> ID：13580646
> 
> 赞同：1
> 
> 时间：2012-11-27T09:06:30.077
> 
> 标签：iphone, ios, ios5, ios6, popover

我正在尝试使用 FPPopover 打开通知视图，它在应用程序上的 iOS 5 上工作，但在 iOS 6 上不显示。但是，如果我将相同的代码用于不同的项目，它确实显示适用于 iOS 5 和 6

这就是我在两个项目中所做的。

```
- (IBAction)NotificationButtonPressed:(id)sender {
    [self openNotificationsPopOver:sender];
}

- (void)openNotificationsPopOver:(id)sender {
    [self setNotificationCount:0];

    NotificationViewController *vc = [[UIStoryboard storyboardWithName:@"Notification" bundle:[NSBundle mainBundle]] instantiateViewControllerWithIdentifier:@"NotificationViewController"];

//    NotificationViewController *vc = [[NotificationViewController alloc]init];
//    [vc setParentViewController:self];

    FPPopoverController *popover = [[FPPopoverController alloc] initWithViewController:vc];

    //sender is the UIButton view
    [popover presentPopoverFromView:sender];

    //popover.arrowDirection = FPPopoverArrowDirectionAny;
    popover.tint = FPPopoverDefaultTint;

    popover.contentSize = CGSizeMake(200, 250);

    popover.arrowDirection = FPPopoverArrowDirectionAny;
    NSLog(@"Present popover");
    //sender is the UIButton view
    [popover presentPopoverFromView:sender];
//    [popover presentPopoverFromPoint:CGPointMake(160, 0)];

//sender is the UIButton view
//    [popover presentPopoverFromView:self.navigationController.navigationBar];
} 
```

我也尝试使用为其注释掉的行...所有方法都适用于单独的项目（iOS 5 和 6），但在主项目上它仅适用于 iOS 5

还尝试删除框架并再次添加它们。用 xCode 4.3 开始这个项目（不知道是否重要）。

参考：[https ://github.com/50pixels/FPPopover](https://github.com/50pixels/FPPopover)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:36:53.453

您需要确保在分配之前实例化“窗口”并显示弹出框。

# java - 用java解析平面文件

> ID：13580647
> 
> 赞同：-1
> 
> 时间：2012-11-27T09:06:33.583
> 
> 标签：java, parsing, wmi

我想使用java将下面的wmi输出解析为键值对作为键值对。请给我建议..我的WMI输出包含2行多列，第一行是标题，第二行包含数据。我想要正则表达式或任何方法将标头与相应的数据分开作为哈希图的键值。

我不知道如何继续......

```
Caption                  Description              IdentifyingNumber  Name                   

Computer System Product  Computer System Product                     HP xw4600 Workstation 
```

解析输出应该像......

## **键=值**

标题 = 计算机系统产品

描述 = 计算机系统产品

识别号码 =

名称 = HP xw4600 工作站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:19:58.510

如果您的文件格式始终相同，您可以轻松使用解析器：

```
FileInputStream fis = new FileInputStream(filename);
InputStreamReader isr = new InputStreamReader(fis);
Reader in = new BufferedReader(isr);
String[] array = new String[2];
for(int i = 0; i < 2; i++)
{
    ((BufferedReader)in).readLine();
}
for(int i = 0; i < array.length; i++)
{
   array[i] = ((BufferedReader)in).readLine();
   if(array[i] == null)
   {
    array[i] = ""; //$NON-NLS-1$
   }
}
in.close();
String[] headers = array[0].split(Pattern.quote("\t")); //$NON-NLS-1$
String[] values = array[1].split(Pattern.quote("\t")); //$NON-NLS-1$ 
```

然后运行两者并填充hashmap

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:09:38.430

我将 wmi 输出格式化为列表，现在很容易格式化输出。

# vb.net - VB.net中使用Microsoft Access的未知表名？

> ID：13580652
> 
> 赞同：1
> 
> 时间：2012-11-27T09:06:54.117
> 
> 标签：vb.net

对不起，如果我的主题不够清楚，因为我不知道该怎么说。所以事情就是这样，我需要为酒店管理系统调试和测试一个 VB.NET windows 应用程序。我对 VB.NET 很陌生，所以有几行我没有得到的数据库查询。有几行，例如：

```
Com.CommandText = "Select * from QRoom Order by RoomNo" 
```

或者

```
Com.CommandText = "Select Floor from QRoom where RoomNo=" & cbo.Text & "" 
```

如您所见，表名有 Qroom，但是当我在 Access 数据库中检查时，没有表名 Qroom。但是，如果我将表名更改为我们在数据库中的表名（在我的情况下，它是 TblRoom），那么就会出现错误。所以我不明白为什么会这样。任何帮助表示赞赏。

p/s：写这段代码的人暂时无法联系到，所以我不能直接问他。:(

# java - 如何正确地将文件添加到 Maven 中的引导类路径？

> ID：13580659
> 
> 赞同：2
> 
> 时间：2012-11-27T09:07:17.580
> 
> 标签：java, maven-2, pom.xml, jsr166

我在 Java 1.6 中使用了一些[JSR166](http://g.oswego.edu/dl/concurrency-interest/)类，其中一些在`java.util.concurrent`. 我在 OSX 上，但我希望它最终能在 Linux 上运行。

如果我设置这个环境变量，我可以运行我的项目：

```
export MAVEN_OPTS=-Xbootclasspath/p:/Users/me/.m2/repository/org/codehaus/jsr166-mirror/jsr166/1.7.0/jsr166-1.7.0.jar 
```

我尝试按照[此处](http://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html)的说明进行操作，并将设置放入我的`pom.xml`：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-compiler-plugin</artifactId>
  <configuration>
    <version>3.0</version>
      <compilerArguments>
        <verbose/>
        <bootclasspath>/Users/me/.m2/repository/org/codehaus/jsr166-mirror/jsr166/1.7.0/jsr166-1.7.0.jar</bootclasspath>
      </compilerArguments>
    </configuration>
</plugin> 
```

不幸的是，这给出了一个关于无法找到的错误`java.lang`。如果我在中添加对`classes.jar`（显然是 OSX 的版本`rt.jar`）的引用，`bootclasspath`我可以修复该错误，但这只会让我回到我开始的地方：

```
java.lang.SecurityException: Prohibited package name: java.util.concurrent 
```

**我应该如何设置 maven 以正确使用此参数？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:45:19.493

您应该检查安全管理器。不幸的是，我不知道 OSX 的具体情况。默认情况下，JVM 使用在 JAVA_HOME/jre/lib/security 文件夹下的 java.security 和 java.policy 文件中定义的安全策略。还要检查 JVM 的 -Djava.security.manager 和 –Djava.security.policy 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T08:40:05.487

您不应该为此使用 extdir 而不是 bootclasspath 吗？

```
<project>
  [...]
  <build>
    [...]
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.3</version>
        <compilerArgs>
            <arg>-verbose</arg>
            <arg>-extdir /Users/me/.m2/repository/org/codehaus/jsr166-mirror/jsr166/1.7.0/</arg>
          </compilerArgs>
      </plugin>
    </plugins>
    [...]
  </build>
  [...]
</project> 
```

来自[http://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html](http://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html)

# ios - MKMapView iOS6上的多个MKPolyline

> ID：13580664
> 
> 赞同：0
> 
> 时间：2012-11-27T09:07:32.853
> 
> 标签：ios, mkmapview, polyline

我正在使用`MKMapView`绘制路线`MKPolyline`，我可以使用一组航点绘制单条路线。现在我想在例如 A blue from to和 A red from to上绘制多个`MKPolyline`s 。我怎样才能做到这一点？`MKMapView``MKPolyline``28.102021, 77.10129``28.20320, 77.3021``MKPolyline``28.50930, 77.89192``28.60291, 77.87328`

**代码：**

```
- (void)viewDidLoad
{
[super viewDidLoad];

locationManager = [[CLLocationManager alloc] init];
locationManager.desiredAccuracy = 6.0;
locationManager.distanceFilter = 1.0;
[locationManager startUpdatingLocation];
locationManager.delegate = self;
map.delegate = self;
[map setShowsUserLocation:YES];
[map setUserTrackingMode:MKUserTrackingModeFollow animated:YES];
wayPoints = [[NSMutableArray alloc] initWithCapacity:30];
newWayPoints = [[NSMutableArray alloc]initWithCapacity:10];
totalDistance = 0.0;

stopTime = [NSDate dateWithTimeIntervalSinceNow:100];
startTime = [NSDate date];

SEL sel = @selector(timerTargetMethod);
NSInvocation* inv = [NSInvocation invocationWithMethodSignature:
                     [self methodSignatureForSelector:sel]];
[inv setTarget:self];
[inv setSelector:sel];

stopTimer = [NSTimer scheduledTimerWithTimeInterval:5 invocation:inv repeats:true];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{
if(newLocation != nil && oldLocation != newLocation)
{
    tempNewLocation = newLocation;
    tempOldLocation = oldLocation;

}

}

- (void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views
{    
MKAnnotationView *annotationView = [views objectAtIndex:0];
id<MKAnnotation> mp = [annotationView annotation];
MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([mp coordinate] ,4000,4000);

[mv setRegion:region animated:YES];
}

// MKMapViewDelegate
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
MKOverlayView* overlayView = nil;
MKPolylineView  * routeLineView = [[MKPolylineView alloc] initWithPolyline:self.routeLine];
routeLineView.fillColor = [UIColor colorWithRed:0.0-1.0 green:0.0-1.0 blue:0.0-1.0 alpha:1.0f];
routeLineView.strokeColor = [UIColor colorWithRed:0.0-1.0 green:0.0-1.0 blue:0.0-1.0 alpha:1.0f];

routeLineView.lineWidth = 3;
routeLineView.lineCap = kCGLineCapSquare;
overlayView = routeLineView;
return overlayView;

}

//define the targetmethod
-(void) timerTargetMethod 
{

if([[NSDate date] timeIntervalSinceDate:startTime] >= 100)
{
    [stopTimer invalidate];
    [locationManager stopUpdatingLocation];
    NSLog(@"Time started at %@", startTime);
    NSLog(@"Time up at %@", stopTime);
}
else if (tempOldLocation.coordinate.latitude == tempNewLocation.coordinate.latitude   && tempNewLocation.coordinate.longitude == tempOldLocation.coordinate.longitude) 
{
    NSLog(@" Fix location found ");
}
else if( [[NSDate date] timeIntervalSinceDate:startTime] >= 19 )
{
    if(roundf([[NSDate date] timeIntervalSinceDate:startTime]) == 20)
    {
        NSLog(@"First Time Location Update");
        latitudeLongitude.text = [[ NSString alloc] initWithFormat:@"%g , %g", tempNewLocation.coordinate.latitude, tempNewLocation.coordinate.longitude];

        float interval = [[NSDate date] timeIntervalSinceDate:startTime];
        int okInterval = roundf(interval);
        NSLog(@"Interval 1 , %d", okInterval );
        time.text = [[ NSString alloc] initWithFormat:@"%d", okInterval  - 20];
        speed.text = @"0";
        totalDistance =  0;
        distance.text = @"0 meters";
    }
    else
    {
        latitudeLongitude.text = [[ NSString alloc] initWithFormat:@"%g , %g", tempNewLocation.coordinate.latitude, tempNewLocation.coordinate.longitude];

        float interval = [[NSDate date] timeIntervalSinceDate:startTime];
        int okInterval = roundf(interval);
        time.text = [[ NSString alloc] initWithFormat:@"%d", okInterval  - 20];
        NSLog(@"Interval 2 , %d , %f", okInterval , interval);
        if((tempNewLocation.coordinate.latitude == tempOldLocation.coordinate.latitude && tempNewLocation.coordinate.longitude == tempOldLocation.coordinate.longitude) || tempNewLocation.speed < 0)
            speed.text = @"0";
        else
            speed.text = [[ NSString alloc] initWithFormat:@"%g meters/sec", tempNewLocation.speed];

        if(tempNewLocation.coordinate.latitude == tempOldLocation.coordinate.latitude && tempNewLocation.coordinate.longitude == tempOldLocation.coordinate.longitude)
        {

        }
        else if ([tempNewLocation distanceFromLocation:tempOldLocation] - tempNewLocation.horizontalAccuracy >= 0) 
            totalDistance +=  [tempNewLocation distanceFromLocation:tempOldLocation] - (tempNewLocation.horizontalAccuracy / 2);
        else
            totalDistance +=  [tempNewLocation distanceFromLocation:tempOldLocation];

        if (totalDistance < 0) 
            distance.text = @"0 meters";
        else
            distance.text = [[ NSString alloc] initWithFormat:@"%g meters", totalDistance];
    }

    [wayPoints addObject:tempNewLocation];
    MKMapPoint * pointsArray =
    malloc(sizeof(CLLocationCoordinate2D)*2);

    pointsArray[0]= MKMapPointForCoordinate(tempOldLocation.coordinate); 
    pointsArray[1]= MKMapPointForCoordinate(tempNewLocation.coordinate);

    routeLine = [MKPolyline polylineWithPoints:pointsArray count:2];
    free(pointsArray);

    if (tempNewLocation.coordinate.latitude - tempOldLocation.coordinate.latitude < 1) {
        [map addOverlay:routeLine];

    }
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:30:54.390

你在那里展示了很多代码，唯一相关的是`viewForOverlay`. 在那里，您将获得一个符合`MKOverlay`协议的对象，如果您创建了自己的类来实现它，您可以添加一个变量，该变量可用于识别您当时正在处理的叠加层，从而调整您的颜色。再往下看你的代码，我看到你正在创建`MKPolyline`s，这些是传入的叠加层`viewForOverlay`，因为它们继承自`MKShape`它们拥有的`title`和`subTitle`你可以使用的属性。

因此，当您创建时，`MKPolyline`您可以将`title`, 可能设置为“typeA”和“typeB”，然后`viewForOverlay`您需要将叠加层投射到 MKPolyline 并检查它必须决定使用哪种颜色的标题：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    if([overlay class] == MKPolyline.class)
    {
        MKOverlayView* overlayView = nil;
        MKPolyline* polyline = (MKPolyline *)overlay;
        MKPolylineView  * routeLineView = [[MKPolylineView alloc] initWithPolyline:polyline];
        if([polyline.title isEqualToString:@"typeA"])
        {
            routeLineView.fillColor = [UIColor redColor];
            routeLineView.strokeColor = [UIColor redColor];
        } else {
            routeLineView.fillColor = [UIColor blueColor];
            routeLineView.strokeColor = [UIColor blueColor];

        }
        routeLineView.lineWidth = 3;
        routeLineView.lineCap = kCGLineCapSquare;
        overlayView = routeLineView;
        return overlayView;
    } else {
        return nil;
    }
} 
```

# cocos2d-x - 如何用 cocos2d-x 检测双击

> ID：13580668
> 
> 赞同：3
> 
> 时间：2012-11-27T09:07:52.230
> 
> 标签：cocos2d-x, double-click, multiplatform

如何将此 cocos2d-iphone 代码移植到 cocos2d-x？

```
(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event  {
 NSSet *allTouches = [event allTouches]; 
switch ([allTouches count])    {
case 1:  
    {
        UITouch *touch = [[allTouches allObjects] objectAtIndex:0];
        switch([touch tapCount]) 
        { 
             case 1:
                  // 单击!
                 break;
             case 2:
                //Double tap.
               // 双击! 
                break;
        } 
   break;    
   } 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T08:39:57.820

没有实现这个的函数，我们可以通过测试两次点击之间的tick来实现。一般来说，双击的时间间隔在250ms~300ms之间。用这个来获取系统当前的毫秒数

```
long millisecondNow()
{
    struct cc_timeval now;
    CCTime::gettimeofdayCocos2d(&now, NULL);
    return (now.tv_sec * 1000 + now.tv_sec / 1000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T17:09:10.000

在 MyScene.h 中，声明：

```
int tapCount;
Touch lastTouch;
void singleTap(float deltaTime); 
```

然后在 MyScene.cpp 中：

```
bool MyScene::onTouchBegan(Touch* touch, Event* event)
{
    ++tapCount;
    lastTouch = *touch;

    if (tapCount == 1) {
        this->schedule(schedule_selector(MyScene::singleTap), 0.25, 1, 0);
    }
    else {
        this->unschedule(schedule_selector(MyScene::singleTap));
        tapCount = 0;
        printf("\n\ndouble tap\n\n");
    }

    return true;
}

void MyScene::singleTap(float deltaTime)
{
    this->unschedule(schedule_selector(LevelScene::singleTap));
    tapCount = 0;
    printf("\n\nsingle tap\n\n");
} 
```

然后，您可以在 singleTap 或您的 doubleTap 方法中访问 lastTouch。如果你不需要 lastTouch 是一个 Touch 对象，你可以使用一个 Vec2 并设置坐标。请注意，计时器间隔 (0.25) 在设备上更准确。模拟器中存在延迟，因为间隔实际上不是挂钟时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-18T07:48:45.037

你可以这样做

```
void HelloWorld::callback1()
{
    _tapCount = 0;
}
void HelloWorld::menuCloseCallback(Ref* pSender)
{
    _tapCount = _tapCount + 1;
    if (_tapCount == 1)
    {
        DelayTime* delayAction = DelayTime::create(0.3);
        CallFunc*resetAction = CallFunc::create(CC_CALLBACK_0(HelloWorld::callback1, this));
        Sequence *seq = Sequence::create(delayAction, resetAction, NULL);
        this->runAction(seq);
    }
    else{
        log("double tap");
    };

} 
```

# android - 两个支持 nfc 的设备之间的数据传输，而不使用 android beam

> ID：13580670
> 
> 赞同：0
> 
> 时间：2012-11-27T09:08:07.193
> 
> 标签：android, nfc, android-beam

我正在开发一个应用程序，用于在两个支持 nfc 的设备之间传输电子卡。如果两个设备都有 android 光束，我就可以做到。我想知道是否可以将信息从 ICS 设备（具有 android 光束）传输到姜饼设备（没有 android 光束）...提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:47:13.607

Android 支持两种使用 NFC 操作的模式：

P2P -> Android Beam // 标签阅读器 -> “高级 NFC 框架”

如果我没记错的话，Gingerbread 也支持 Android Beak，因此您不必面对使用 Beam 在两个 Android NFC 设备之间交换数据的任何问题。

第二种方式，仅用于对标签进行操作。Android 官方不支持卡片模拟，所以这不适合您。

希望这对您有所帮助。

# ruby-on-rails - 在将项目保存到数据库之前添加列值

> ID：13580673
> 
> 赞同：1
> 
> 时间：2012-11-27T09:08:25.170
> 
> 标签：ruby-on-rails

假设用户提交了一个表单（在他的帐户中创建新项目）。

在它进入数据库之前 - 我想这样做：

```
params[:user] => current_user.id
# make a note of who is the owner of the item
# without people seing this or being able to change it themselves
# and only after that to save it to database 
```

最好的方法是什么？

我在控制器中看到的是：

```
def create
    @item = Item.new(params[:item])
    ...
end 
```

而且我不确定如何更改 params[:item] 下的值

（current_user.id 是设计变量）

试图这样做：

```
class Item < ActiveRecord::Base
    before_save :set_user

    protected

    def set_user
        self.user = current_user.id unless self.user
    end

end 
```

并得到一个错误：

```
undefined local variable or method `current_user' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:13:40.033

它应该很简单：

```
def create
    @item = Item.new(params[:item])
    @item.user = current_user
    #...
end 
```

您收到一个`undefined local variable or method current_user`错误，因为`current_user`在模型上下文中不可用，只有控制器和视图。

# css - 在 iPad 中使用 Position:fixed into radwindow

> ID：13580674
> 
> 赞同：1
> 
> 时间：2012-11-27T09:08:25.897
> 
> 标签：css, telerik

```
 <div class = "divwhole">
       <div class="divfixed">

       </div>
       <div class="divscoll">

       </div>
    </div> 
```

CSS

```
.divfixed{
position:fixed;
} 
```

我尝试位置：使用 radwindow 修复。它在计算机浏览器中工作，但在 IPad 中不起作用。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:34:22.903

RadWindow 与此有什么关系？我周围没看到。检查您的代码是否存在拼写错误或其他问题（例如存在另一个具有更高特异性的 CSS 规则）。

如果你想在屏幕上固定一个 RadWindow - 使用它的 Pin 行为。它的客户端 API 很有用 - isPinned() 和 togglePin() 方法更准确。

# jquery - div标签的位置中心，宽度未知 advanced

> ID：13580678
> 
> 赞同：1
> 
> 时间：2012-11-27T09:08:42.977
> 
> 标签：jquery, html, css, center

我有没有固定的 div。我希望这个 div 位置在屏幕的中心。

我知道如何用 jquery 来做这个，但是用纯 css，我没有找到任何解决方案。你如何用纯 CSS 实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:43:20.857

假设您要收缩包装 div 的内容（否则将其居中是一个毫无意义的练习，因为它的宽度将是容器的宽度）：

*   在 div 上设置`display: inline-block;`使其收缩包装
*   在 div 的父元素上设置`text-align: center;`以使 div 居中
*   在 div 上设置`text-align: left;`以覆盖其将从其父级继承的内联内容的居中。

# java - 使用 HTTPs 是否可以实现宁静的 Web 服务？

> ID：13580679
> 
> 赞同：1
> 
> 时间：2012-11-27T09:08:52.043
> 
> 标签：java, web-services, rest, https

我已经使用 Http（在 localhost 中）实现了 restful webservice。现在我对 https 使用相同的代码。（只提醒 url）它不起作用？有人可以帮助我做些什么改变。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:40:51.280

对于 HTTPS 的使用，您可以在[http://jersey.java.net/nonav/documentation/latest/client-api.html#d4e778上查看 jersey.java.net 中的文档](http://jersey.java.net/nonav/documentation/latest/client-api.html#d4e778)

=> 章节：使用 Http(s)URLConnection 的安全性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:52:05.293

可能是 https 配置问题。

确保您的应用服务器正确配置了 SSL 证书，并且所有其他网页都可以通过 https 访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:58:02.210

当然这是可能的，并且强烈建议避免中间人攻击。

Https只是加密的http，你可能有配置问题。

Twitter api 位于 https：https: [//api.twitter.com/1.1/statuses/mentions_timeline.json](https://api.twitter.com/1.1/statuses/mentions_timeline.json)

# c# - 查找项目属性列表

> ID：13580680
> 
> 赞同：0
> 
> 时间：2012-11-27T09:08:55.133
> 
> 标签：c#, arraylist

我有如下定义的类

```
class Employee
{
    public int EmpNo{get;set;}
    public string Name{get;set;}
    public string Designation{get;set;}
} 
```

我有一份员工名单

```
List<Employee> 
```

我可以使用 FindAll() 方法找到具有类似名称的员工列表。

但我想要一个 EmpNo 列表（或数组）而不是员工列表。我可以使用 for 循环来构造，但想要使用谓词得到不同的答案。我该怎么做？还是不可能？我认为之前已经为类似问题找到了解决方案，但现在没有得到它。

可能是 FindAll(...).ToArray() 之类的东西。

* * *

编辑

好的，我得到了答案。

```
FindAll(emp => emp.Designation.Equals("Executive")).Select(item => item.EmpNo).ToArray() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:30:24.013

另一种选择是；

```
employees
.Where(emp => emp.Designation.Equals("Executive"))
.Select(item => item.EmpNo).ToList() 
```

FindAll 和 Where 之间存在细微的性能差异，看看这个；

[FindAll vs Where 扩展方法](https://stackoverflow.com/questions/1531702/findall-vs-where-extension-method)

# smalltalk - 报告海边会议，例如到期时间

> ID：13580683
> 
> 赞同：3
> 
> 时间：2012-11-27T09:09:04.560
> 
> 标签：smalltalk, seaside, visual-age

如何显示一份报告，显示所有当前的海滨会议及其预期到期时间？

```
self session application sessionsDo: [:each | 
html text: 'Session For ',((each properties values at: 1) username),' Expires At: '.
html render: (Time now addSeconds: (each application cache expiryPolicy timeout)).
html break]. 
```

但是，这显示了错误的结果，因为它显示所有会话同时到期，即距现在时间 600 秒。我找不到另一种方法来获得“剩余时间”。

世界末日？（卢卡斯会做什么）？

KR 尘土飞扬

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T12:23:04.450

下面的代码应该做到这一点：

```
WAApplication allInstances do: [ :application |
   application keysAndHandlersDo: [ :key :session |
      | policy table |
      policy := application cache expiryPolicy.
      table := policy instVarNamed: 'lastAccessTable'.
      Transcript 
        show: session; show: ' expires in '; 
        show: policy timeout - (Time totalSeconds - (table at: key));
        show: ' seconds'; cr ] ] 
```

请注意，上述代码访问的内部数据结构将来可能会发生变化。此外，您可能需要添加额外的检查以使其适用于您的设置。

另请注意，您可能会得到负秒数。这意味着会话应该消失，但尚未收获。

# liferay - 在 Liferay 中获取具有特定结构的 Web 内容文章

> ID：13580686
> 
> 赞同：4
> 
> 时间：2012-11-27T09:09:07.877
> 
> 标签：liferay, structure, portlet, web-content

我已经开始使用 Liferay 开发 portlet，我想展示一篇（或多篇）具有指定结构的 Web 内容文章。

例如，假设我有一个结构“A”，那么我怎样才能获得使用该结构创建的最后一篇网络内容文章？

本文解释了如何获取带有 a但不带有 a 的[文章](http://www.liferay.contentoverflow.com/2012/04/find-article-by-tag-name.html "按标签名称查找文章")。`tag``structure`

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T08:02:16.747

The [Liferay API Docs](http://docs.liferay.com/portal/6.1/javadocs/) (this is for 6.1, as I don't know what version you're using) are your friend as is the Liferay source code.

In short you'll want to use one of the following API methods:

```
JournalArticleLocalServiceUtil.getStructureArticles(long groupId, String structureId);
JournalArticleLocalServiceUtil.getStructureArticles(long groupId, String structureId, int start, int end, OrderByComparator obc) 
```

These rely on knowing the ID of the structure from which your content was generated, if you don't know what it is then you can use the following API method to get a list of all of them for your current Community:

```
JournalStructureLocalServiceUtil.getStructures(long groupId) 
```

You can also use similar methods to find Journal Articles by the JournalTemplate that they use:

```
JournalTemplateLocalServiceUtil.getStructureTemplates(long groupId, String structureId); 

JournalArticleLocalServiceUtil.getTemplateArticles(long groupId, String templateId);
JournalArticleLocalServiceUtil.getTemplateArticles(long groupId, String templateId, int start, int end, OrderByComparator obc) 
```

Comment back if you have any questions, or if this answers your question please hit the "Accept answer" button tick! Thanks!

# kendo-ui - 打开/选择 KendoUI 面板栏

> ID：13580688
> 
> 赞同：0
> 
> 时间：2012-11-27T09:09:12.793
> 
> 标签：kendo-ui, panelbar

当我单击 PanelBar 的一个栏时，我同时选择了该选项并切换它（打开/关闭）。是否可以不打开它而只需选择**并**单击用于控制打开/关闭的图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:44:51.367

恐怕这不被支持。作为部分解决方法，您可以使 PanelBar 展开并仅通过单击展开箭头来选择，如下所示：

```
$('#panelbarName>li').on('click',function(e){
   if(!$(e.target).is('.k-icon')){
      e.stopPropagation(); 
   }       
}) 
```

不幸的是，要处理更多的逻辑来选择（突出显示项目）而不扩展它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T10:29:00.843

```
$("#panelbar>li").on("click", function (e) {
    if ($(e.target).is(".k-i-arrow-s")) {
        $("#panelbar").data("kendoPanelBar").expand($(e.target).closest("li"));
    }
    else if ($(e.target).is(".k-i-arrow-n")) {
        $("#panelbar").data("kendoPanelBar").collapse($(e.target).closest("li"));
    }
    else {
        $("#panelbar").data("kendoPanelBar").select($(e.target).closest("li"));
    }
    e.stopPropagation();
}) 
```

# iphone - 如何在 UINavigationBar 上设置 backgroundColor (tintColor)

> ID：13580690
> 
> 赞同：2
> 
> 时间：2012-11-27T09:09:17.710
> 
> 标签：iphone, xcode, uinavigationbar, tintcolor

我希望你能帮我设置导航栏的背景颜色。正如您在下面的第一张图片中看到的那样，该栏是浅蓝色/灰色，但我希望它像第二张图片“收藏夹”。

![在此处输入图像描述](../Images/60254a2e26a0050662fa63256c4ac2b4.png)

我的项目中有另一个viewController（参见第二张图片“Favoritter”）它可以工作。但是我看不到我在这里做错了什么，并且导航栏只会采用这种浅蓝色/灰色而不是黄色。

![在此处输入图像描述](../Images/eb500fe775cd099294911ffa36c24c7a.png)

我的代码是这样的：

------------------InstantCabAppDelegate.m 文件-----------开始-------

```
//InstantCabAppDelegate.m file

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Create tabBarController instance
    tabBarController = [[UITabBarController alloc] initWithNibName:nil bundle:nil];

    // Create instances of navigation controller and view controllers
    orderController = [[OrderController2 alloc] initWithNibName:@"Order2" bundle:nil];

    UINavigationController* firstnavigationController = [[UINavigationController alloc] initWithRootViewController:orderController];

    ICStatusViewController *statusController = [[ICStatusViewController alloc] initWithStatus];
    UINavigationController *statusNavController = [[UINavigationController alloc] initWithRootViewController:statusController];

    ICSettingsViewController *settingsController = [[ICSettingsViewController alloc] init];
    UINavigationController *settingsNavController = [[UINavigationController alloc] initWithRootViewController:settingsController];

    UIViewController *company_controller = nil;
    company_controller = [[ICCompaniesGridController alloc] initWithCompanies:[[NSArray alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Companies" ofType:@"plist"]]];   

    tabBarController.viewControllers = [NSArray arrayWithObjects:firstnavigationController, settingsNavController, statusNavController, company_controller, nil];

    [window setRootViewController:tabBarController];
    [window makeKeyAndVisible];
    return YES;
} 
```

------------------ICStatusViewController.m 文件-----------开始-------

```
//  ICStatusViewController.m file

#import "ICStatusViewController.h"
#import "LocalizationSystem.h"
#import "ICTemporaryStore.h"
#import "Debug.h"

@implementation ICStatusViewController

@synthesize doneCallbackBlock=_doneCallbackBlock, cancelCallbackBlock=_cancelCallbackBlock;
@synthesize myTableView, no_statuses, no_statuses_label, delegate;

- (id)initWithStatus
{
    if ((self = [super initWithNibName:@"StatusList" bundle:nil])) 
    {
        self.title = AMLocalizedString(@"kStatusTitle", @"");
        self.tabBarItem.image = [UIImage imageNamed:@"status_icon"];

        self.no_statuses = AMLocalizedString(@"kStatusListNoStatusList", @"");
        first_color = TABLE_VIEW_BACKGROUND_COLOR;
        second_color = first_color;
        self.doneCallbackBlock = nil;
        self.cancelCallbackBlock = nil;
    }
    return self;
}

- (void)viewDidLoad 
{  
    [super viewDidLoad];

    self.parentViewController.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background-nologo"]];
    self.view.backgroundColor = [UIColor clearColor];
    self.myTableView.backgroundColor = TABLE_VIEW_BACKGROUND_COLOR;

    if ([statusObjects count] == 0)
    {
        self.myTableView.hidden = YES;

        self.no_statuses_label.text = self.no_statuses;
        self.no_statuses_label.hidden = NO;
        no_status_background.hidden = NO;
    }

    [self.no_statuses_label setTextColor:[UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1.0]];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if ([statusObjects count] == 0)
    {
        self.myTableView.hidden = YES;
        self.no_statuses_label.text = self.no_statuses;
        self.no_statuses_label.hidden = NO;
        no_status_background.hidden = NO;
        self.navigationItem.rightBarButtonItem = nil;
    }
    else
    {
        self.myTableView.hidden = NO;
        self.no_statuses_label.hidden = YES;
        no_status_background.hidden = YES;
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSInteger retval = 0;
    for (int i=0; i<[statusObjects count]; i++)
    {
        StatusObj *add = [statusObjects getStatusAtIndex:i];
        if (add.status_id && [add.status_id length] > 0 && [add.status_type isEqualToString:@"STATUS_ORDER"]) 
        {
            retval++;
        }
    }
    return retval;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifierStatus = @"StatusCell";
    __unsafe_unretained NSString *CellIdentifier = CellIdentifierStatus;
    StatusCell* cell = (StatusCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[StatusCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        [[cell textLabel] setTextColor:TABLE_VIEW_TEXT_LABEL_COLOR];
        [[cell detailTextLabel] setTextColor:TABLE_VIEW_DETAIL_TEXT_LABEL_COLOR];
        [[cell detailTextLabel] setNumberOfLines:3];
    }    

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    dateString = [dateFormat stringFromDate:current_order.order.time];
    NSString *str = AMLocalizedString(@"kStatusListDetailsToDay", @"");
    textLabelString = [NSString stringWithFormat:@"%@ - %@", str, dateString];

    [cell.textLabel setText:textLabelString];

    [cell.detailTextLabel setText:detailTextString];

    [cell setBackgroundColor:[UIColor redColor]];

    [cell.dateLabel setBackgroundColor:[UIColor clearColor]];
    cell.accessoryType = UITableViewCellAccessoryNone;

    return cell;
} 
```

------------------ICStatusViewController.h 文件-----------开始-------

```
//  ICStatusViewController.h

#import <UIKit/UIKit.h>
#import "Status.h"
#import "StatusCell.h"
#import "StatusControllerDelegate.h"
#import "ICStatusDetailsController.h"

typedef void (^ICStatusViewControllerDoneCallbackBlock)(id userInfo);
typedef void (^ICStatusViewControllerCancelCallbackBlock)(void);

@interface ICStatusViewController : UIViewController <UITableViewDelegate, UITableViewDataSource, UIActionSheetDelegate, ICStatusDetailsControllerDelegate> {
    id<Statuses> statusObjects;
    NSString *no_statuses;
    NSOperationQueue *queue;
    NSTimer *statusTimer;
    __unsafe_unretained id<StatusControllerDelegate> delegate;

    UIColor *first_color;
    UIColor *second_color;

    IBOutlet __unsafe_unretained UITableView *myTableView;
    IBOutlet __unsafe_unretained UILabel *no_statuses_label;
    IBOutlet __unsafe_unretained UIImageView *no_status_background;

@private
    ICStatusViewControllerDoneCallbackBlock _doneCallbackBlock;
    ICStatusViewControllerCancelCallbackBlock _cancelCallbackBlock;
}

@property (nonatomic, unsafe_unretained) UITableView* myTableView;
@property (nonatomic, copy) NSString* no_statuses;
@property (nonatomic, unsafe_unretained) UILabel* no_statuses_label;
@property (nonatomic, unsafe_unretained) id <StatusControllerDelegate> delegate;
@property (nonatomic, copy) ICStatusViewControllerDoneCallbackBlock doneCallbackBlock;
@property (nonatomic, copy) ICStatusViewControllerCancelCallbackBlock cancelCallbackBlock;

- (id)initWithStatus;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:31:48.863

您可以设置导航栏的色调颜色或使用图像而不是导航栏并隐藏导航栏，使用：

```
navigationController.navigationBarHidden = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:31:34.000

你不是在谈论 a `UITableView`，而是关于`UINavigationBar`顶部的。我解决了你的问题以反映这一点。基本上有两种方法来设置它`tintColor`：

更简单的**选择**是使用**外观协议**（iOS 5 及更高版本），因为这将更改整个应用程序中的每个 NavigationBar：
`[[UINavigationBar appearance] setTintColor:[UIColor yellowColor]];`

或者你对`UINavigationBar`每个`UINavigationController`.
`[navigationController.navigationBar setTintColor:[UIColor yellowColor]];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:19:45.493

`viewDidLoad:`只需在类的方法中添加此行以将黄色设置为导航`ICStatusViewController`控制器..

```
[self.navigationController.navigationBar setTintColor:[UIColor yellowColor]]; 
```

还有像下面这样的图像..

```
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"yourImageName"] forBarMetrics:UIBarMetricsDefault];// write your image name like yellow image 
```

我希望这可以帮助你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:16:51.853

你的 tableView 的风格是什么？如果 tableView 的 style 是`UITableViewStyleGrouped`，你不能在 iOS 6 上改变 backgroundColor。尝试改变 tableView 的 backgroundView。

```
self.settingsTableView = [[UITableView alloc] initWithFrame:rect
                                                      style:UITableViewStyleGrouped];
UIView *view = [[UIView alloc] initWithFrame:settingsTableView.frame];
view.backgroundColor = [UIColor redColor];
settingsTableView.backgroundView = view; 
```

# ios - 带有许多图像的应用程序

> ID：13580691
> 
> 赞同：0
> 
> 时间：2012-11-27T09:09:18.390
> 
> 标签：ios, image, memory-management

我有一个包含很多图片（数百张）的应用程序，现在我将它们全部放在 Bundle 中，但现在该应用程序已经占用了将近 50MB。对于具有大量图像的应用程序，是否有其他方法可以不消耗过多内存？我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:11:49.143

当应用程序第一次运行时，从服务器下载额外的图像并将它们存储在磁盘上。更好的是（取决于您的应用程序），仅按需下载和缓存它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:13:23.247

我可以想到这两种方式：

1.  如果您的图像不需要透明度，请使用 jpeg 而不是 png，有损压缩会减少磁盘空间
2.  将您的图像托管在您自己的服务器上。该应用程序按需或在首次应用程序启动时下载它们。

# wpf - wpf 3D将自己的类添加到视口

> ID：13580692
> 
> 赞同：0
> 
> 时间：2012-11-27T09:09:34.777
> 
> 标签：wpf, vb.net, 3d

我想制作自己的形状并将它们添加到视口中。我想在自己的类中构建这些形状，并希望使其可点击。我不能从 modeluielement3D 继承，因为它是可继承的。有谁知道如何解决这个问题

```
public class myclass 
  inherist ...

public geometry
public handlers
and so on

viewport.childeren.add(myclass) 
```

我对 wpf 和 3D 很陌生，所以非常感谢一个清晰的解释。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:25:34.780

弄清楚了。让您的类从 modelvisual3D 继承。对于我用 visualtreehelper.hittest(viewport,mouselocation) 进行命中测试的事件，可以关闭主题。

# css - 沿 a 指定边的 CSS 旋转 元素

> ID：13580697
> 
> 赞同：3
> 
> 时间：2012-11-27T09:10:00.280
> 
> 标签：css, html

我有一个关于旋转`<div>`in html 页面的问题。我用过 -

```
-moz-transform: rotate(90deg) 
```

但是这个属性是`<div>`沿着某个轴旋转的。（无法理解）。但我想`<div>`沿着它的底部旋转。（在这里，我的 div 是一个方形框）。可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T09:17:51.333

听起来像[transform-origin](https://developer.mozilla.org/en-US/docs/CSS/transform-origin)是你正在寻找的。

> CSS 属性允许您修改元素转换的`transform-origin`原点。例如，rotate() 函数的变换原点是旋转中心。（此属性的应用方法是首先通过属性的否定值平移元素，然后应用元素的变换，然后通过属性值进行平移。）

所以你应该得到这样的结果：

```
transform: rotate(90deg);
transform-origin: center bottom;
/*transform-origin: 50% 100%;    alternative using percentages */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:43:06.567

你可以使用这个属性

```
transform: rotate(90deg);
transform-origin: center bottom; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-14T16:29:10.320

您可以将 X% 和 Y% 作为 transform-origin

例如，这将沿着`bottom-left`角落旋转 div

```
 transform: rotate(-10deg);
  transform-origin: 0% 100%; 
```

[![在此处输入图像描述](../Images/2971e6ffd705401b7fa44db6aadda0e6.png)](https://i.stack.imgur.com/wBoGe.png)

这个沿着右上角旋转

```
 transform: rotate(-10deg);
  transform-origin: 100% 0%; 
```

[![在此处输入图像描述](../Images/9a3e95ceb0e2ff6fe5c78bb44e759f88.png)](https://i.stack.imgur.com/t10tF.png)

这个沿着右下角旋转

```
 transform: rotate(-10deg);
  transform-origin: 100% 100%; 
```

[![在此处输入图像描述](../Images/029afe6afdfbc0db045c91c51cea6b91.png)](https://i.stack.imgur.com/bQv0m.png)

依此类推...默认为 50%,50%

```
 transform: rotate(-10deg);
  transform-origin: 50% 50%; 
```

[![在此处输入图像描述](../Images/9d2d7d42a5a0fa46086477882fe76966.png)](https://i.stack.imgur.com/kOfLH.png)

# sql - 避免不必要的表扫描

> ID：13580698
> 
> 赞同：1
> 
> 时间：2012-11-27T09:10:02.040
> 
> 标签：sql, oracle

```
Col 1,
col 2,
.....
.....
from 
table1,
table2
........
........
where
join conditions1
join conditions1
................
.................
and
table1.day_key >= (select key from date_dim where value='01-JAN-2011')
and table1.day_key <= (select key from date_dim where value='31-DEC-2011')
and 
table2.day_key >= (select key from date_dim where value='01-JAN-2011')
and table2.day_key <= (select key from date_dim where value='31-DEC-2011') 
```

在这里我可以看到 date_dim 表在 where 条件下进行扫描四，如何避免它。在 main from 子句中未选择 date_dim 表。不幸的是，我没有环境来测试这个。数据库是oracle 10g

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:11:50.280

显而易见的答案是在`date_dim(value)`. 在您这样做之前，请检查表中的行数。如果少于 100，则表扫描根本不是一件坏事。

您可以通过将其移动到 a 来避免两次包含相同的子查询`cross join`，例如：

```
from   ...
cross join
       (
       select  key 
       from    date_dim 
       where   value='01-JAN-2011'
       ) as dt1
....
where  table1.day_key >= dt1.key 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:13:36.347

use 可以使用 with 子句从 date_dim 中获取 key 的值，并在 where 子句中加入相同的值。这将加快您的查询获取速度，同时使用 with 子句将值存储在临时空间中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:35:02.033

正如我所说，我没有看到必要时扫描该表两次的性能问题。

查询的纯粹重写将是：

```
select 
  Col 1,
  col 2,
from 
  table1,
  table2,
  date_dim date_dim_start,
  date_dim date_dim_end
where
  join conditions1
  join conditions1 and
  table1.day_key >=  date_dim_start.key and
  table1.day_key <= date_dim_end.key and
  table2.day_key >= date_dim_start.key and
  table2.day_key <= date_dim_end.key and
  date_dim_start.value = '01-JAN-2011' and
  date_dim_end.value='31-DEC-2011'; 
```

但是您应该对其进行测试，以免性能受到影响。

# php - 在所需文件中定义的变量是否在外部不可用？

> ID：13580700
> 
> 赞同：0
> 
> 时间：2012-11-27T09:10:14.883
> 
> 标签：php, scope, global

在 requiredfile.php 我定义 $a = 5。在 index.php 我这样做：

```
require_once(requiredfile.php);
echo $a; 
```

但似乎 $a 没有定义。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:13:10.263

您需要在文件名周围加上引号：

```
require_once('requiredfile.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:13:31.760

通常，可以按照您的方式访问全局变量。

因此，我想到了两种可能性来解释您的问题：

1.  *您不在*全局范围内声明变量，而是在类或函数定义内声明。

2.  您的`require_once()`命令失败（日志文件中的任何错误？），因为您忘记了文件名周围的引号或因为在该位置找不到文件（检查路径！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:14:18.393

如果您导入它（需要/包含），则可以使用其他文件中定义的变量。

您确定您的文件已正确导入（没有错误...）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:21:40.733

通常，您可以访问包含文件中声明的变量。

请确保

1.  需要这样的文件 require_once('requiredfile.php');
2.  变量未在任何私有或受保护类中声明
3.  包含该文件（我认为这里包含该文件，因为您收到 $a 未定义的错误）
4.  确保变量名并确保它被声明。

# php - 复杂的 Righty 系统：ACL、RBAC 等等什么？

> ID：13580702
> 
> 赞同：8
> 
> 时间：2012-11-27T09:10:17.587
> 
> 标签：php, security, zend-framework2, acl, rbac

我们目前正在开发一个项目管理软件。而且我们在决定实施安全性的正确方法时遇到了麻烦。我们已经查看了 ACL 和 RBAC，并且已经非常确定出于特定原因我们至少需要两者的组合。但是有几个问题在这两个世界中都没有很好的解决方案。让我解释：

假设您有以下实体：

1.  **用户**，具有不同的角色，即
    *   *项目负责人*
    *   *工人*
    *   *行政*
2.  **项目**
3.  **分配的用户**
4.  **项目中的任务**

现在应该表达以下规则：具有角色*工作者的***用户**只被允许查看与他分配到的项目相关的**任务。**

 ***这导致**用户**只被允许查看整个列表中的一些**任务。**

我们将使用 RBAC 授予*Roles实际读取***Tasks**的权限。但由于涉及特定实体，因此不适用该条件。可以使用 ACL，但我们担心保持 ACL 条目与要求一致（**用户**可以更改，*角色*可以更改，可以引入新**任务**并且必须获得正确的条目，这同样复杂）。

当然，在查看特定项目时可能会有特定`WHERE project_id = 123`的**查询**（每一个条目。

以及如何确保诸如“获取当前用户允许查看的前 25 个任务”之类的事情，而无需从数据库加载所有任务，然后基于 ACL 进行过滤，即处理分页。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-30T16:44:35.633

您需要超越 ACL 和 RBAC 并考虑基于属性的访问控制（ABAC - 请参阅[此处](http://csrc.nist.gov/projects/abac/)的 NIST 指南）。Gartner 将此空间称为“外部化授权管理”。

使用 ABAC，您可以轻松表达任何规则，这些规则不仅考虑到用户是谁，还考虑到用户想要做什么、在哪里、何时、为什么以及如何做。使用属性来定义授权，您可以使用 XACML 来实施策略。[XACML](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=xacml)是一个 OASIS 标准（就像 SAML）。

使用 XACML，您可以获得一个 API，您可以在其中提出问题，例如：*Alice 可以查看此记录吗？*但在您的情况下，这还不够，因为您想从数据库中过滤掉记录。而且，正如您所描述的，您希望查询从一开始就是正确的，而不是在获得正确数量的授权记录之前来回访问数据库。这就是 XACML 变得特别有趣的地方，因为它是技术中立的。您可以将 XACML 应用于 Java、C# 和其他语言，例如 Python，但也可以将 XACML 应用于不同的层（表示、API 和...数据库）。可以通过反向查询方式查询 XACML 以生成 SQL 语句，然后您可以使用该语句在后端数据库中查询相关记录：

*   Alice 可以查看哪些记录？
*   Alice 可以查看加利福尼亚的记录，该记录产生“SELECT * FROM records WHERE location='CA'”

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:09:09.587

好吧，我使用带有漂亮 RBAC 层的[Yii 框架。](http://www.yiiframework.com/)我最近对 ​​ACL 不太熟悉，也不需要熟悉。

在 Yii RBAC 术语中，解决方案的关键是使用“业务规则”。Bizrules 是附加到“权限”或“角色”（Yii 术语中的“授权项”）的小代码片段。当需要确定对某个“权限”的访问时，此代码会动态运行（可以说，但它也可以附加到“角色”），并且它会收到“有问题的项目”（您的示例中的任务）和确定对特定任务的实际访问权与否。这是一个更详细的示例：

*   假设您需要具有以下权限：
    *   编辑任务（应该允许具有“任务管理员”角色的任何人）
    *   编辑自己的任务（应该允许提交*此*任务的人）。
*   现在，在“任务编辑”代码部分，您将首先检查“编辑任务”权限。如果可以 - 允许。
*   如果不允许，还要检查“编辑自己的任务”（使用 else-if 构造）。现在在最后提到的权限上应该附加一个 bizrule（=php 代码），它接受一个“任务”对象并将其“创建者 ID”与“当前检查的用户 ID”进行比较。如果相等，则返回 true，表示应授予访问权限。

简而言之。如果您对更多内容感兴趣，请参阅官方指南的[这一部分](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#role-based-access-control)。如果您需要，还有很多其他资源。***

# javascript - 如何在使用 JQuery 悬停该 HTML 元素时在元素内设置工具栏？

> ID：13580704
> 
> 赞同：0
> 
> 时间：2012-11-27T09:10:23.447
> 
> 标签：javascript, jquery, html, css

```
$('body').on('mouseover mouseout', '*:not(.printToolBar)', function (e) {
    if (this === e.target) {
        (e.type === 'mouseover' ? setMenuBox(e.target) : removeMenuBox(e.target));
    }
});

function setMenuBox (obj){
    $(obj).wrap('<div class="toolBarWrapper" style="position:relative;"/>');
    $(".toolBarWrapper").append($('.printToolBar'));
}

function removeMenuBox (obj){
    $(".toolBarWrapper").remove('.printToolBar');
    $(obj).unwrap();
}

function createToolBar(){
    var ul = $("<ul>").attr({
        'class': "printToolBar",
        style: "border: 1px solid #ff0000; position:absolute; top:0 ; right: 0;"
    });
    var li = $("<li>").attr({
        'className': "printToolBarList"
    }).text('Print');
    var printLi = li.clone().attr({
        id: "print"
    }).on('click',function(e){ 
        console.log(this);
    });     
    ul.append(printLi).appendTo("body");
};
createToolBar(); 
```

这就是我试图用每个 HTML 元素设置菜单栏的方法，但是我无法自行分离菜单栏上的事件，这会引发一些 JS 错误，是否有其他方法可以实现相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:30:05.913

要删除 ul 元素上的“悬停”行为，我认为您需要更新您的第一行代码：

```
$('body').on('mouseover mouseout', '*:not(.printToolBar), *:not(ul)', function (e) {
     if (this === e.target) {
        (e.type === 'mouseover' ? setMenuBox(e.target) : removeMenuBox(e.target));
     }
}); 
```

这样，您会将 mouseevent 附加到除 ul 和 .printToolbar 之外的所有元素

编辑 ：

要移除 UL 儿童的附件：

```
$('body').on('mouseover mouseout', '*:not(ul.printToolBar), *:not(ul.printToolBar >    *)', function (e) {
    if (this === e.target) {
       (e.type === 'mouseover' ? setMenuBox(e.target) : removeMenuBox(e.target));
    }
}); 
```

# f#-powerpack - 有人还保留 F# Powerpack v 1.9.9.9

> ID：13580705
> 
> 赞同：2
> 
> 时间：2012-11-27T09:10:24.930
> 
> 标签：f#-powerpack

我正在设法安装 YOGI (http://research.microsoft.com/en-us/projects/yogi/)，但是这个软件需要 F# Powerpack (1.9.9.9) 的确切版本，我找不到那个库，因为链接[http://fsharppowerpack.codeplex.com/releases/view/40168](http://fsharppowerpack.codeplex.com/releases/view/40168)不可用。如果有人仍然持有该图书馆的副本，请与我联系，我的电子邮件是 trucnguyenlam@gmail.com

P/S：此库的较新版本不起作用。必须遵循说明[http://research.microsoft.com/en-us/projects/yogi/readme.txt](http://research.microsoft.com/en-us/projects/yogi/readme.txt)

# c# - 图像流到文件导致部分灰色图像（有时）

> ID：13580710
> 
> 赞同：1
> 
> 时间：2012-11-27T09:10:56.337
> 
> 标签：c#, .net, windows-phone-7

我在将图像从流上传/发送到 ASP.NET 中的通用处理程序时遇到问题。我已经构建了一个 Windows Phone 应用程序，它可以拍摄图像并将其发送到我网站上的通用处理程序。

不幸的是，在某些情况下，图像变成（部分）灰色。我认为这可能与移动设备的互联网连接丢失/不良有关。这个问题每 50 张左右图像就会发生一次。

当发送有缺陷的图像时，我没有收到任何类型的错误。我正在寻找两种可能的解决方案。

1.  我如何防止 Windows 手机将部分灰色图像上传到通用处理程序。
2.  我如何检查服务器上的图像是否部分灰色，以便将错误消息发送回手机。

为了使这个问题更完整，我包含了通用处理程序的代码和示例图像。其次，我很好奇为什么会出现这种情况。TCPIP 有一个握手，所以上面的 isseu 应该是不可能的？

```
public class UploadImages : IHttpHandler
{
    private IWorkOrderRepository _workOrderRepository;
    private IDigitalFileRepository _digitalFileRepository;
    private IUserRepository _userRepository;

    public UploadImages()
    {
        _workOrderRepository = ((Global)HttpContext.Current.ApplicationInstance).Kernel.Get<IWorkOrderRepository>();
        _digitalFileRepository = ((Global)HttpContext.Current.ApplicationInstance).Kernel.Get<IDigitalFileRepository>();
        _userRepository = ((Global)HttpContext.Current.ApplicationInstance).Kernel.Get<IUserRepository>();
    }

    public void ProcessRequest(HttpContext context)
    {

        var cookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
        var user = (Domain.Users.User)HttpContext.Current.User;

        string WorkOrderId = context.Request.QueryString["workOrderId"];
        string latitude = context.Request.QueryString["LATITUDE"];
        string Longitude = context.Request.QueryString["LONGITUDE"];

        if (latitude != "0" && Longitude != "0")
        {
            string file = "Filename.jpg";
            string uploadPath = context.Server.MapPath("~/Temp/");
            using (var stream = new MemoryStream())
            {

                var image = ImageResizer.Resize(Image.FromStream(context.Request.InputStream), 700);
                image.Save(stream, ImageFormat.Jpeg);
                stream.Position = 0;
                var workOrder = _workOrderRepository.GetAll(x => x.Id == Convert.ToInt32(WorkOrderId)).FirstOrDefault();
                workOrder.AddPhoto(_workOrderRepository, _digitalFileRepository, new AuditInfo((Domain.Users.User)user), stream, file, "image/jpeg", Convert.ToDouble(latitude), Convert.ToDouble(Longitude));
            }
        }
        else
        {
            string file = "Filename.jpg";
            string uploadPath = context.Server.MapPath("~/Temp/");
            using (var stream = new MemoryStream())
            {

                var image = ImageResizer.Resize(Image.FromStream(context.Request.InputStream), 700);
                image.Save(stream, ImageFormat.Jpeg);
                stream.Position = 0;
                var workOrder = _workOrderRepository.GetAll(x => x.Id == Convert.ToInt32(WorkOrderId)).FirstOrDefault();
                workOrder.AddPhoto(_workOrderRepository, _digitalFileRepository, new AuditInfo((Domain.Users.User)user), stream, file, "image/jpeg");
            }
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

![示例图像部分灰色](../Images/335f4a0c888b3cf2fb0269d52cd7b93b.png)

![示例图像部分灰色](../Images/1ab6f4227670e5d8273f89457f63d697.png)

# c++ - 使用左移运算符将 F 转换为 FF

> ID：13580713
> 
> 赞同：2
> 
> 时间：2012-11-27T09:10:57.973
> 
> 标签：c++, bit-shift

我有 UINT64 变量。在开始时，它被初始化为 0xF。现在我希望根据一些输入在运行时改变它。它的价值将在运行时增加。但我想要的是它应该从 F 变为 FF，从 FF 变为 FFF，应该附加一个 F。

现在这是我的代码。

```
UINT64 mapFileSize = 0xF;
while (mapFileSize < someUserInput)
    // add one F to mapFileSize; 
```

我应该在那里写什么。我正在尝试左移运算符，但它不能正常工作。

```
mapFileSize <<= 1; 
```

我正在这样做，但这并没有给我想要的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T09:13:28.687

左移 mapFileSize 4 位

然后或带有 0xF 的 mapFileSize

```
 mapFileSize = mapFileSize  <<4;
 mapFileSize = mapFileSize  | 0xF; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T09:13:47.007

你所描述的不是单一转变的结果。A`<<`只是移动位，根据需要移入零，但您需要移入一个，这是 C 的左移运算符不做的事情。

您需要先移位，然后将最低四位设置为全1：

```
mapFileSize <<= 4;  /* Shift to the left one hexadecimal digit. */
mapFileSize |= 0xf; /* Make sure rightmost digit is f. */ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T09:14:55.010

一种更简洁的方法：

```
mapFileSize |= (mapFileSize << 4); 
```

或者如果你不能保证原始值总是以 0xf 结尾：

```
mapFileSize = (mapFileSize << 4) | 0x0f; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T09:13:25.943

$F$ 左移四位是 $0F0$，而不是 $FF$。所以你需要：

```
mapFileSize <<= 4 ;
mapFileSize += 0x0F ; 
```

# jquery - 使用 Jquery 获取 FileUpload 控制文件大小

> ID：13580714
> 
> 赞同：-2
> 
> 时间：2012-11-27T09:11:01.063
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我想使用 jquery 获取文件上传控制文件大小。我该怎么做..任何人都可以帮助我。我正在使用 MVC 3

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:11:57.853

至少在发布问题之前搜索该网站。但是，这是获取文件大小的一个很好的答案。 [通过Javascript确定图像文件大小+尺寸？](https://stackoverflow.com/questions/1310378/determining-image-file-size-dimensions-via-javascript/1310399#1310399)

但是，如果您希望文件的扩展名来验证用户输入，您可以尝试以下操作

```
 $(document).ready(function () {
    $("#uploadImage").live("change", function () {
    alert(this.files[0].size); // this line will return the file size 
        var file = $('#uploadImage').val().split('.').pop().toLowerCase();

        if ($.inArray(file, ['gif', 'png', 'jpg', 'jpeg', 'tif', 'bmp', 'doc', 'docx', 'pdf', 'xlsx', 'xls', 'txt']) == -1) {
            alert('Only file with extension ".jpg", ".jpeg" , ".png" , ".gif", ".tif", ".bmp",".doc",".docx",".pdf",".xlsx",".xls",".txt" are allowed');
        }
    });
}); 
```

注意：files[0].size 是一个 html 5 api 属性。所以它可能不适用于所有浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T16:06:44.887

我为这个东西做了一个插件。但请注意，它只是客户端的控件，您也应该检查服务器中的文件大小

无论如何，这是插件（需要 jquery）： [控制文件大小 v. 1.30](http://www.cambiamentico.altervista.org/PAGES/experiments/control_file_size/control_file_size.php)

# java - 64 位无符号散列函数

> ID：13580721
> 
> 赞同：1
> 
> 时间：2012-11-27T09:11:14.683
> 
> 标签：java, algorithm, math

我有 64 位无符号整数（范围从 0 到 2^63 - 1），我想将它们散列成 32 位无符号整数（0 到 2^31 - 1 范围）。

数据遵循[均匀分布](http://en.wikipedia.org/wiki/Uniform_distribution_%28discrete%29)。任何人都可以建议一个散列函数来为这个分布提供少量的冲突（可能有一定的冲突发生概率）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:17:11.400

如果 的分布真的很均匀，那么只取低位`n`（散列值的宽度）。这意味着，在最坏的情况下，您可以在一个桶中有 2 ^(N-n 个元素。)（这里`N`表示原数字的宽度）

**注意：**刚刚看到@JanDvorak 已经提出了这个建议（在我回答之前），使用模 2 ^n相当于取低位`n`......

如果这真的是大约**64 位无符号整数**被散列成**32 位无符号整数**，那么正确的范围将是**[0;2 ^(64) -1]**和**[0;2 ^(32) -1]**，一次最多有**2 ^(32 次)**冲突哈希。然而，在Java中，没有无符号整数......

如果这是关于分别使用带符号的 64 位和 32 位整数值的正半部分，那么您的范围值是正确的，在最坏的情况下您仍然会有**2 ^(32 次)**冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:20:42.690

对于这样一个简单的分布，任何合理的散列函数都适合。为了确保，只需尝试`(int)(longvalue+(longvalue>>32))`计算碰撞次数。如果您只想要 31 位，请制作`res&0x7fffffff`（为什么强调值是无符号的？31 位 int 和 63 位 long 适合有符号和无符号范围）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T09:34:40.440

如果您已经拥有正确的长度和均匀分布的位，为什么还要散列？我假设您有一些安全要求？请分享。

如果它是您正在寻找的标准哈希，请考虑 SHA-1：

```
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
//Some more imports

MessageDigest md = MessageDigest.getInstance("SHA-1");
md.update(data);
byte[] hash = md.digest()); 
```

# android - 单击提交按钮时如何将表单数据保存在数据库中？

> ID：13580723
> 
> 赞同：-4
> 
> 时间：2012-11-27T09:11:19.257
> 
> 标签：android, database, buttonclick

我正在创建一个 android 应用程序，在该应用程序中我使用一种表格进行查询。

单击查询按钮时，应用程序必须显示一个表单。在用户按下提交按钮时完成表单输入用户后，数据应保存在数据库中，表单详细信息必须通过邮件发送到管理员帐户。

我在谷歌搜索，但我没有得到我想要的确切信息。

这是我的代码

订单.java

```
package com.example.shaktitool;    
import android.app.Activity;
import android.os.Bundle;    
import android.view.View;    
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Order extends Activity{

    private SQLiteAdapterOrder mySQLiteAdapter;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.order);

        mySQLiteAdapter = new SQLiteAdapterOrder(this);    
        mySQLiteAdapter.openToWrite();
        mySQLiteAdapter.deleteAll();
        final MY_TABLE tb = new MY_TABLE(this);
        final EditText name   = (EditText)findViewById(R.id.username);
        final EditText mail   = (EditText)findViewById(R.id.email);
        final EditText phone   = (EditText)findViewById(R.id.phone);
        final EditText product   = (EditText)findViewById(R.id.product);
        final String _name = name.getText().toString();
        final String _mail = mail.getText().toString();
        final String _phone = phone.getText().toString();
        final String _product = product.getText().toString();

        System.out.println(_name);
        System.out.println(_mail);
        System.out.println(_phone);
        System.out.println(_product);

        Button email = (Button) findViewById(R.id.Button01);
        email.setOnClickListener(new View.OnClickListener(){    
                  public void onClick(View v) {
                      // TODO Auto-generated method stub
                      tb.open();
                      final String _name = name.getText().toString();    
                      final String _mail = mail.getText().toString();    
                      final String _phone = phone.getText().toString();    
                      final String _product = product.getText().toString();

                      System.out.println(name);
                      Toast.makeText(getBaseContext(), "Record Saved",Toast.LENGTH_LONG).show();    
                      System.out.println(mail);
                      System.out.println(phone);       
                      System.out.println(product);

                      tb.createorders(name, mail, phone, product);
                      tb.delete("12");
                      tb.close();

                  }
              }); 
    }
} 
```

谁能帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:16:55.947

```
 EditText fd1 = (EditText)findviewById(R.id.fd1);
 EditText fd2 = (EditText)findviewById(R.id.fd2);
 EditText fd3 = (EditText)findviewById(R.id.fd3);

 submitbtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) 
        {
            String field1 = fd1.getText.toString();
            String field2 = fd2.getText.toString();
            String field3 = fd3.getText.toString();
            dh.insert_values(field1, field2, field3);   
        }
    }); 
```

像这样将插入值提交到数据库中..

在你的 datahelper 类中

```
 public long insert_values(String fd1,String fd2,String fd3)
    {
       this.insertStmt.bindString(1, fd1);
       this.insertStmt.bindString(2, fd2);
       this.insertStmt.bindString(3, fd3);
       return this.insertStmt.executeInsert();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:01:16.770

通过以下链接。你会发现很好的例子：

1.  [http://saigeethamn.blogspot.in/2009/10/android-developer-tutorial-part-12.html](http://saigeethamn.blogspot.in/2009/10/android-developer-tutorial-part-12.html)
2.  [http://android-er.blogspot.in/2011/06/simple-example-using-androids-sqlite_02.html](http://android-er.blogspot.in/2011/06/simple-example-using-androids-sqlite_02.html)
3.  [http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)

对于好的 SQL 教程，请通过此链接： [http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

DBInsert 方法示例：

```
public Marks addMarks(Marks comment) {

        ContentValues values = new ContentValues();
        values.put(MarksDB.MARKS_StdNo, comment.getStdNo());
        values.put(MarksDB.MARKS_1, comment.getSub_1());
        values.put(MarksDB.MARKS_2, comment.getSub_2());
        values.put(MarksDB.MARKS_3, comment.getSub_3());
        values.put(MarksDB.MARKS_4, comment.getSub_4());
        values.put(MarksDB.MARKS_5, comment.getSub_5());

        long insertId = database.insert(MarksDB.TABLE_MARKS, null, values); 
```

在从数据库中插入和删除时，保持模态类从模态类中获取对象并设置属性。然后插入 Modal 类的当前对象。这对于 DBTransactions 来说是一种很好且不会令人困惑的方式。

# c# - 安装完成后 C# 附加或恢复数据库

> ID：13580729
> 
> 赞同：1
> 
> 时间：2012-11-27T09:11:33.290
> 
> 标签：c#, wpf, sql-server-2008

我是 wpf 的新手。

我有 WPF 应用程序。现在我想在完成我的应用程序安装后将我的数据库附加或恢复到 sql server 2008。

怎么做？

我必须将 mdf/ldf 文件或 BAK 文件放入项目中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:53:49.203

如何通过 C# 代码 [恢复 SQL Server 数据库：如何通过 C# 代码恢复 SQL Server 数据库](https://stackoverflow.com/questions/4218960/how-to-restore-sql-server-database-through-c-sharp-code)

以编程方式枚举、附加和分离 SQL Server 数据库 [http://justlikeamagic.com/2010/04/13/programmatically-enumerating-attaching-and-detaching-sql-server-databases/](http://justlikeamagic.com/2010/04/13/programmatically-enumerating-attaching-and-detaching-sql-server-databases/)

# php - PHP多维数组压缩

> ID：13580737
> 
> 赞同：1
> 
> 时间：2012-11-27T09:11:53.557
> 
> 标签：php, multidimensional-array

我正在使用这样的数组作为静态文件缓存：

```
[
  key => data => [
             key1 => data    => [...]
                  => expires => 123456
             key2 => data    => [...]
                  => expires => 123456
         ]
      => expires => 123456
] 
```

这可以是许多级别的深度（有时是 10-15 级别）。

我想做的是只返回数据的值，例如，像这样创建一个数组

```
[
    key => key1 => [...]
        => key2 => [...]
] 
```

我该怎么做？

编辑

`print_r`结构的

```
Array ( 
[key] => 
    Array (
    [data] => 
        Array (
        [key1] => 
            Array (
            [data] => Array ( ... )
            [expires] => 12345678)
        [key2] =>
            Array (
                [data] => Array ( ... )
                [expires] => 12345678
            )
        ) 
    [expires] => 12345678
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:36:10.663

您可以像这样使用递归函数：

```
function extractValues($array, &$result){

    foreach($array as $key1 => $val1){
        if($key1 == 'data' && is_array($val1)) {
            foreach($val1 as $key2 => $val2){

                if(is_array($val2)) {
                    $result[$key2] = array();
                    extractValues($val2, $result[$key2]);
                } else {
                    $result[$key2] = $val2;
                }
            }
        } else if(!in_array($key1, array('expires'))) {
            $result[$key1] = array();
            extractValues($val1, $result[$key1]);
        }

    }

    return $result;
} 
```

它将在这样的数组结构上工作：

```
$test = array(
    'key' => array(
        'data' => array(
            'key1' => array(
                'data' => array(
                    'key11' => 11,
                    'key12' => 12,
                ),
            ),
            'key2' => array(
                'data' => array(
                    'key21' => 21,
                    'key22' => 22,
                ),
            ),
        ),
        'expires' => 12345,
    ),
);

$result = array();
extractValues($test, $result);
var_dump($result); 
```

这是 var_dump() 希望满足您的要求的结果：

```
array(1) {
  ["key"]=>
  array(2) {
    ["key1"]=>
    array(2) {
      ["key11"]=>
      int(11)
      ["key12"]=>
      int(12)
    }
    ["key2"]=>
    array(2) {
      ["key21"]=>
      int(21)
      ["key22"]=>
      int(22)
    }
  }
} 
```

# postgresql - 在事务中包装 postgresql 命令：truncate vs delete 或 upsert/merge

> ID：13580741
> 
> 赞同：5
> 
> 时间：2012-11-27T09:12:03.637
> 
> 标签：postgresql, plpgsql, common-table-expression, truncate, plpython

我在 postgresql 9.1.3 中使用以下命令将数据从临时登台表移动到 webapp（地理服务器）中使用的表，所有这些都在同一个数据库中。然后删除临时表。

1.  截断表_富；

2.  插入到 table_foo

    选择 * FROM table_temp;

3.  删除表 table_temp;

我想将其包装在事务中以允许并发。数据集小于 2000 行，截断比删除快。

*   在事务中运行这些命令的最佳方式是什么？
*   是否建议在 CTE 中创建函数或编写 UPSERT/MERGE 等？
*   删除所有行然后从临时表中批量插入而不是 TRUNCATE 会更好吗？
*   在 postgres 中，哪个允许回滚 TRUNCATE 或 DELETE？
*   临时表每天通过在 arcpy 中编写的 ETL 交付，如何在 postgres 中自动执行截断/删除/批量插入部分？
*   我愿意使用 PL/pgsql、PL/python（或 postgres 推荐的 py）

目前，在将临时临时表导入我的数据库后，我正在手动执行 sql 命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:24:50.497

两者`truncate`都`delete`可以回滚（手册中有明确记录）。

`truncate`- 由于其性质 - 在能见度方面有一些奇怪之处。

有关详细信息，请参阅手册：[http](http://www.postgresql.org/docs/current/static/sql-truncate.html) ://www.postgresql.org/docs/current/static/sql-truncate.html （底部的警告）

如果您的应用程序可以忍受`table_foo`在该过程中“空”的事实，则截断可能更好（再次参见手册中的大红框以获取解释）。如果您不希望应用程序注意到，则需要使用`delete`

要在事务中运行这些语句，只需将它们合二为一：

```
begin transaction;
delete from table_foo;
insert into ....
drop table_temp;
commit; 
```

是否在函数中执行此操作取决于您。

`truncate`/`insert`将更快（比`delete`/ `insert`），因为这将生成的 WAL 数量降至最低。

# c# - 使用静态 ObservableCollection 作为 FallbackValue

> ID：13580742
> 
> 赞同：0
> 
> 时间：2012-11-27T09:12:05.893
> 
> 标签：c#, .net, wpf, observablecollection

我有一个简单的问题。

是否可以填充静态 ObservableCollection 并在设计时将其用作 FallbackValue，以便您可以查看结果的样子？

问题是，编译我的项目并导航到我的视图需要很多时间，所以我想在设计期间尽可能多地做。“FallbackValue”技巧适用于文本框等常见控件。当然，这有点滥用 FallbackValue，因为它的目的是在绑定失败时提供一些其他的占位数据。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:22:41.380

您所追求的称为设计时数据。请参阅this [question](https://stackoverflow.com/questions/1889966/what-approaches-are-available-to-dummy-design-time-data-in-wpf)关于如何实现它，并且有很多可用的文章。

# android - 如何在 Android XML 文件中设置多个值

> ID：13580748
> 
> 赞同：0
> 
> 时间：2012-11-27T09:12:15.783
> 
> 标签：android, android-imageview

在 Imageview 中，我需要为相同的属性（scaleType）使用两个值。

```
<ImageView 
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="0.70"
    android:background="#000000"
    android:scaleType="fitXY" /> 
```

在上面的图像视图中，`scaleType`我需要同时使用属性`fitXY`和`Matrix`.

*   `fitXY`- 将图像拉伸到整个图像视图
*   `Matrix` - 用于捏缩放。

可以这样使用还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:19:13.297

尝试使用这个[PhotoView 库](http://www.senab.co.uk/2012/10/12/photoview-v1-1/?utm_source=Android%20Weekly&utm_campaign=94ea5cc96d-Android_Weekly_42&utm_medium=email)。

根据[规范](http://developer.android.com/reference/android/widget/ImageView.html#attr_android%3ascaleType)scaleType 应该只包含一个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:40:42.807

对于某些属性，您可以在 xml 中使用多个值

> ' | ' . 示例- android:gravity="right|center_verticle"

如果支持，可以使用它。不确定此属性是否支持。

# rotation - 当我使用 THREE.OBJLoader 时如何围绕其中心旋转模型 .obj

> ID：13580750
> 
> 赞同：2
> 
> 时间：2012-11-27T09:12:25.540
> 
> 标签：rotation, three.js

我使用 THREE.OBJLoader 导入模型 obj 我使用来自[https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_obj.html#L75](https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_obj.html#L75)的代码 但是当我需要旋转模型时出现问题围绕其中心旋转。如果我需要它围绕它的中心旋转。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:39:45.530

你可以打电话

```
THREE.GeometryUtils.center( geometry ); 
```

这将平移几何，使其边界框以对象局部坐标系中的原点为中心。现在，当你旋转它时，它会围绕它的“中心”旋转。

# php - 如何使用每个字段旁边的编辑按钮来编辑 Zend 表单

> ID：13580751
> 
> 赞同：0
> 
> 时间：2012-11-27T09:12:30.390
> 
> 标签：php, zend-framework, zend-form

我有包含以下代码的文件（ProfileController.php）：

```
public function editAction() {

        if (Zend_Auth::getInstance()->hasIdentity()) {
        try {
            $form = new Application_Form_NewStory();
            $request = $this->getRequest();
            $story = new Application_Model_DbTable_Story();
            $result = $story->find($request->getParam('id'));

           // $values = array(
           //     'names' => $result->names,
           //     'password' => $result->password,
           // );

            if ($this->getRequest()->isPost()) {
                if ($form->isValid($request->getPost())) {
                    $data = array(
                        'names' => $form->getValue("names"),
                        'password' => $form->getValue("password"),
                    );
                    $form->populate($data->toArray());
                    $where = array(
                        'id' => $request->getParam('id'),
                    );
                    $story->update($data, $where);
                }
            }
            $this->view->form = $form;
            $this->view->titleS= $result->title;
            $this->view->storyS= $result->story;
        } catch (Exception $e) {
            echo $e;
        }
    } else {
        $this->_helper->redirector->goToRoute(array(
            'controller' => 'auth',
            'action' => 'index'
        ));
    }

    } 
```

和另一个包含以下代码的文件（edit.phtml）：

```
 <?php
        try
            {
                 $tmp = $this->form->setAction($this->url());

         //$tmp->titleS=$this->title;
         //$tmp->storyS=$this->story;

          //echo $tmp->title = "aaaaa";
            }
          catch(Exception $e)
            {
                 echo $e;
            }

    ?> 
```

我希望用户能够编辑他们的用户名和密码。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:08:21.067

首先：将 Zend_Auth 的东西移到 init() 或 preDispatch()，这样 Auth 将针对控制器中的任何或所有操作运行。

使多个提交按钮起作用的技巧是为按钮赋予不同的名称，以便 getParam('') 可以使用。

通常我只在删除时做这种事情，对于编辑或更新我只是将整个数组提交回数据库。我通常使用该`Zend_Db_Table_Row save()`方法而不是`Zend_Db_Table's` `insert()`这样`update()`的机制有点不同。

我只是使用一个简单的表单来执行更新，这里是控制器代码（视图只是回显的表单）：

```
//update album information
public function updatealbumAction()
    {   //get page number from session
        $session = new Zend_Session_Namespace('page');
        //get album id
        $id = $this->getRequest()->getParam('id');

        $model = new Music_Model_Mapper_Album();
        //fetch the album database record
        $album = $model->findById($id);

        $form = new Admin_Form_Album();
        //this form is used elsewhere so set the form action to this action
        $form->setAction('/admin/music/updatealbum/');

        if ($this->getRequest()->isPost()) {
            if ($form->isValid($this->getRequest()->getPost())) {
                $data = $form->getValues();//get valid and filtered form values

                $newAlbum = new Music_Model_Album($data);//create new entity object

                $update = $model->saveAlbum($newAlbum);//save/update album info

                $this->message->addMessage("Update of Album '$update->name' complete!");//generate flash message
                $this->getHelper('Redirector')->gotoSimple('update', null, null, array('page' => $session->page));//redirect back to the page the request came from
            }
        } else {
            $form->populate($album->toArray());
            $this->view->form = $form;
        }
    } 
```

这是一个非常常见的更新操作。

现在，您可以使用不同的请求参数对记录执行操作。我用它来删除数据库记录，但一切皆有可能。

```
public function deleteAction()
    {
        $session = new Zend_Session_Namespace('page');
        $request = $this->getRequest()->getParams();
        try {
            switch ($request) {
                //if 
                case isset($request['trackId']):
                    $id = $request['trackId'];
                    $model = new Music_Model_Mapper_Track();
                    $model->deleteTrack($id);
                    $this->message->addMessage("Track Deleted!");

                    break;
                case isset($request['albumId']):
                    $id = $request['albumId'];
                    $model = new Music_Model_Mapper_Album();
                    $model->deletealbum($id);
                    $this->message->addMessage("Album Deleted!");

                    break;
                case isset($request['artistId']):
                    $id = $request['artistId'];
                    $model = new Music_Model_Mapper_Artist();
                    $model->deleteArtist($id);
                    $this->message->addMessage("Artist Deleted!");

                    break;

                default:
                    break;
            }
            $this->getHelper('Redirector')->gotoSimple('update', null, null, array('page' => $session->page));
        } catch (Exception $e) {
            $this->message->addMessage($e->getMessage());
            $this->getHelper('Redirector')->gotoSimple('update', null, null, array('page' => $session->page));
        }
    } 
```

您可以将请求参数作为提交按钮标签或 url 或任何适合您的方式传递。

祝你好运！

# c++ - 为什么 bad_exception 不会自动抛出？

> ID：13580752
> 
> 赞同：0
> 
> 时间：2012-11-27T09:12:39.830
> 
> 标签：c++, exception

为什么这段代码不能正常运行？遇到意外异常时不`bad_exception`应该自动调用吗？还是有必要为它设置一个处理程序？

```
#include <iostream>
#include <exception>
using namespace std;
class C{};
void test() throw(bad_exception)
{
    throw C();
}
int main()
{
    try
    {
         test();
    } catch(bad_exception& e)
    {
        cout << "Caught ";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:31:36.830

**在 C++03 理论中：** 如果你抛出一个不在异常规范中的异常，`unexpected()`就会被调用。如果您没有通过`set_unexpected()`这种方式设置意外处理程序`terminate()`，则会调用您观察到的情况。如果您设置*了*一个不调用终止但抛出异常的意外处理程序，并且如果该异常未在您的异常规范中列出，它将被转换为 bad_exception。因此，为了获得预期的结果，`set_unexpected()`首先使用适当的处理程序进行调用。

**在 C++03 实践中：** 一些编译器根本不支持异常规范（除了`throw()`），其他编译器只是不评估/检查它们的正确性。正如[Herb Sutter 所指出的](http://www.gotw.ca/publications/mill22.htm)，异常规范创建了一个笨拙的“影子类型系统”，不容易正确处理（如果可能的话）。所以..

**... 在 C++11 中：***不推荐使用* 异常规范。你不应该使用它们。但是，有一个[`nothrow`](http://akrzemi1.wordpress.com/2011/06/10/using-noexcept/)运算符的功能与`throw()`

* * *

**PS：那么为什么在 C++03 中有 std::bad_exception 呢？** 您有三个不同的代码区域：

*   您正在为其编写异常规范的函数。
*   您从该函数调用的“外部”代码可能会或可能不会引发与您的规范不匹配的异常。
*   （可能也是未知的）意外处理程序可以是任何东西，应该终止/退出/中止程序或抛出任何东西。

因此，如果“外部”代码抛出了违反您的异常规范的异常，您可能会出现以下三种结果：

1.  处理程序终止程序。除非您在函数中设置自己的处理程序，否则您无能为力。
2.  处理程序抛出与您的异常规范匹配的异常。一切都很好。
3.  处理程序抛出其他东西。您希望运行时现在做什么？这就是 bad_exception 出现的地方：如果它在您的规范中，则“其他内容”会被转换为 bad_exception，然后程序继续。如果不是，则调用 terminate。

在函数中设置您自己的处理程序会禁用之前由只想使用您的函数的任何其他人设置的任何处理程序。他不会期望你禁用他的处理程序。此外，处理程序是一个*全局*的what-happens-if 策略，因此在单个函数实现中你不应该关心任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:15:33.210

这应该调用`std::unexpected`默认调用`std::terminate()`，因为抛出的异常不是异常规范的一部分。

（在 Linux 上使用 g++，在 Solaris 上使用~~Sun~~ Oracle CC，在 AIX BTW 上使用 IBM xlC）

如果你安装了一个意外的处理程序，它会像你期望的那样工作：

```
include <iostream>
#include <exception>
using namespace std;
class C{};

void myunexpected()
{
    throw std::bad_exception();
}

void test() throw(std::bad_exception)
{
    throw C();
}
int main()
{
    try
    {
        set_unexpected(myunexpected);
        test();
    } catch(std::bad_exception& e)
    {
        std::cout << "Caught ";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T09:24:17.893

根据 [except.unexpected]，当函数抛出未在其动态异常规范中列出的异常时，`std::unexpected()`将被调用。根据[unexpected.handler]，`std::unexpected()`简单调用的默认实现`std::terminate()`。

但是，程序可以安装自己的处理程序，它可以（重新）抛出异常。如果动态异常规范不允许由此引发的异常，则可以将其替换为何*时*`std::bad_exception`允许。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:14:53.917

您的 catch-block 只会捕获 type`bad_exception`或其子类型的异常。`C`不符合这个标准。

其实[这个问题](https://stackoverflow.com/questions/1410226/is-there-any-use-for-c-throw-decoration)和你的很相似。接受的[答案](https://stackoverflow.com/a/1410255/160206)解释说，如果您的函数抛出与规范不匹配的异常（如果有），则`std::unexpected`调用，默认情况下调用`std::terminate`.*

# iphone - MPMoviePlayerController rotating in full screen while the parent View Controller only supports portrait orientation

> ID：13580753
> 
> 赞同：12
> 
> 时间：2012-11-27T09:12:43.510
> 
> 标签：iphone, objective-c, ios, ios6, mpmovieplayercontroller

this question is only one part of my problem. I am implementing iOS6 rotation and orientation support for my existing application.

So I have a ViewController that contains a MPMoviePlayerController embedded in ViewController view ( my application requires it ). User can play the video and see it in the embedded view or click on full screen button using the default player controls and player goes to full screen mode.

Now I have restricted the view controller to only support portrait orientation using the new rotation APIs provided by iOS6\.

```
// New Autorotation support.
- (BOOL)shouldAutorotate;
{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

this works pretty well. the ViewController only supports portrait and user play the movie in embedded view.

Now the problem comes, when User goes into full screen mode. In full screen mode, the movie is keep on rotating, when i rotate the simulator/device. When i rotate the device while movie being played in full screen mode with breakpoints in `shouldAutorotate` and `supportedInterfaceOrientations` , it still comes in these both methods which return `NO` and `UIInterfaceOrientationMaskPortrait` respectively, but still the movie is rotating ...

Why is this happening? .... this is one part of my question ... the 2nd part is I want the movie to enter in landscape mode when the user goes to full-screen mode. and I want the movie player to lock in landscape mode until user presses the DONE button.

Please help ....

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-27T09:24:26.640

you can try below function in `AppDelegate`:

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{

} 
```

you can make condition here for both mode.

such as if media player is in full screen then

`return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;`

otherwise `return UIInterfaceOrientationMaskPortrait;`

i have not tried it but i think, it should work in your case.

thanks

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-20T10:30:50.670

For clarity, here is the complete code (it ALL goes inside your app delegate):

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(willExitFullscreen:)
                                                 name:MPMoviePlayerWillExitFullscreenNotification
                                               object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(willEnterFullscreen:)
                                             name:MPMoviePlayerWillEnterFullscreenNotification
                                           object:nil];
}

- (void)willEnterFullscreen:(NSNotification*)notification
{
    NSLog(@"willEnterFullscreen");
    isFullScreen = YES;
}

- (void)willExitFullscreen:(NSNotification*)notification
{
    NSLog(@"willExitFullscreen");
    isFullScreen = NO;
}

-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    if (isFullScreen)
        return UIInterfaceOrientationMaskLandscapeLeft;
    else
        return UIInterfaceOrientationMaskPortrait;
} 
```

isFullScreen is a BOOL to be declared in AppDelegate.h

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T09:32:26.010

I would suggest to use a `MPMoviePlayerViewController` instead. Subclass it and implement the `supportedInterfaceOrientations` method and return `UIInterfaceOrientationMaskLandscape`.

You might also have to implement the `shouldAutorotateToInterfaceOrientation:` method.

See the class reference: [MPMoviePlayerViewController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/mpmovieplayerviewcontroller_class/Reference/Reference.html)

**Edit:** You might also take a look at this post: [iphone - force MPMoviePlayerController to play video in landscape mode](https://stackoverflow.com/questions/4740732/iphone-force-mpmovieplayercontroller-to-play-video-in-landscape-mode)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-06T11:53:20.797

This consumed me for a while and I got so many different horrifying errors, but eventually I ended up not doing it through **MPMoviePlayerController** but **MPMoviePlayerViewController**. I just rotated the **self.playerView** which is a property, before presenting it. Also I added the **NSNotification** that will lead back to the main control and the main ViewController after the video finishes. Here's how I went about executing it:

```
 [[NSNotificationCenter defaultCenter] removeObserver:self.playerView
                                                        name:MPMoviePlayerPlaybackDidFinishNotification
                                                      object:self.playerView.moviePlayer];

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(movieFinishedCallback:)
                                                     name:MPMoviePlayerPlaybackDidFinishNotification
                                                   object:self.playerView.moviePlayer];

        self.playerView = [[MPMoviePlayerViewController alloc] initWithContentURL:docUrl];
        self.playerView.view.frame = CGRectMake(10, 10, self.frame.size.width-20, 180);
        [self.playerView.moviePlayer prepareToPlay];

        if(IS_IPHONE_6P)
        {
            [self.playerView.view setBounds:CGRectMake(0, 0, 736, 414)];
            [self.playerView.view setCenter:CGPointMake(212, 368)];
        }
        else if(IS_IPHONE_6)
        {
            [self.playerView.view setBounds:CGRectMake(0, 0, 375, 667)];
            [self.playerView.view setCenter:CGPointMake(187, 333)];
        }
        else if (IS_IPHONE_5)
        {
            [self.playerView.view setBounds:CGRectMake(0, 0, 736, 414)];
            [self.playerView.view setCenter:CGPointMake(160, 284)];
        }
        else
        {
            [self.playerView.view setBounds:CGRectMake(0, 0, 480, 320)];
            [self.playerView.view setCenter:CGPointMake(160, 240)];
        }

        [self.playerView.view setTransform:CGAffineTransformMakeRotation(M_PI / 2)];
        self.playerView.modalPresentationStyle = UIModalPresentationFormSheet;
        self.playerView.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

        [self presentViewController:self.playerView animated:YES completion:nil]; 
```

And the callback **movieFinishedCallback**: is as follows,

```
- (void)movieFinishedCallback:(NSNotification*)aNotification
{
    // Obtain the reason why the movie playback finished
    NSNumber *finishReason = [[aNotification userInfo] objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey];

    // Dismiss the view controller ONLY when the reason is not "playback ended"
    if ([finishReason intValue] != MPMovieFinishReasonPlaybackEnded)
    {
        MPMoviePlayerController *moviePlayer = [aNotification object];
        [[NSNotificationCenter defaultCenter] removeObserver:self
                                                        name:MPMoviePlayerPlaybackDidFinishNotification
                                                      object:moviePlayer];

        NSLog(@"Video Closed");
        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC), dispatch_get_main_queue(), ^
        {
            [self dismissViewControllerAnimated:NO completion:nil];
            self.playerView = nil;

        });
    }
} 
```

This worked for me. Hope it helps.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T09:36:11.787

in your project, select name project and right window select info tab. in custom ios target properties add key and select key: "Initial interface orientation" set value: Portrait (bottom home button)

*   rebuild your project -> ok

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T15:18:09.833

For iOS 6 you can [use this answer](https://stackoverflow.com/a/13580987/1278744).

But if you supports < iOS 6 need a different approach.

You must create custom navigation controller and to it add methods for creation with root controller and method for rotation.

It will look like: [m file](https://sourceforge.net/projects/mpmovieplayerco/files/MyNavigationController.m/download) and [h file](https://sourceforge.net/projects/mpmovieplayerco/files/MyNavigationController.h/download).

And in your AppDelegate must call method for init:

In h file:

```
#import "IORNavigationController.h" 
```

and

```
@property (nonatomic, retain) IORNavigationController*  navigationController; 
```

In m file:

```
self.navigationController = [[[MyNavigationController alloc] initWithRootViewController:start] autorelease]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-27T11:28:08.683

use this

```
moviePlayerController.view.transform = CGAffineTransformMakeRotation(M_PI/2); 
```

it work with ios 7

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-21T09:14:51.803

Just add this code to yours view controller

```
-(NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
} 
```

# mongodb - 根据条件计算 MapReduce 中的文档 - MongoDB

> ID：13580755
> 
> 赞同：0
> 
> 时间：2012-11-27T09:12:51.513
> 
> 标签：mongodb, mapreduce

我正在尝试使用 Map Reduce 根据每个日期的字段值之一来计算文档数量。首先，这是几个常规 find() 函数的结果：

```
db.errors.find({ "cDate" : ISODate("2012-11-20T00:00:00Z") }).count(); 
```

返回 579（即该日期有 579 个文档）

```
db.errors.find( { $and: [ { "cDate" : ISODate("2012-11-20T00:00:00Z") }, {"Type":"General"} ] } ).count() 
```

返回 443（即该日期有 443 个文档，其中 Type="General"）

以下是我的 MapReduce：

```
db.runCommand({ mapreduce: "errors", 
 map : function Map() {
    emit(
        this.cDate,//Holds a date value
        {
        count: 1,
        countGeneral: 1,
        Type: this.Type 
        }
    );
},

reduce : function Reduce(key, values) {
    var reduced = {count:0,countGeneral:0,Type:''};

    values.forEach(function(val) {
        reduced.count += val.count; 
        if (val.Type === 'General')
            reduced.countGeneral += val.countGeneral;
    });

return reduced; 
},

finalize : function Finalize(key, reduced) {
    return reduced;
},

query : { "cDate" : { "$gte" : ISODate("2012-11-20T00:00:00Z") } },

out : { inline : 1 }
}); 
```

对于日期 20-11-20，map reduce 返回：

```
count: 579

countGeneral: 60 (should be 443 according to the above find query) 
```

现在，我知道 Reduce 的循环方式是不可预测的，那么我应该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:42:57.833

我建议你仅仅因为你没有在你的 reduce 部分返回“General”而丢失你的其余值。

`map`对于部件中发出并从`reduce`函数返回的所有值，Reduce 运行不止一次。

例如，当 reduce 的第一次迭代运行时，您会得到包含以下内容的输出对象：

```
{count: 15, countGeneral: 3, Type: ''} 
```

而reduce的其他迭代收集这个对象和其他类似的对象，看不到`Type:'General'`那里，也不再增加`countGeneral`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:53:35.183

你的地图功能是错误的。你可以这样做：

```
function Map() {
    var cG=0;
    if (this.Type == 'General') { cG=1; }
    emit(
        this.cDate,//Holds a date value
        {
        count: 1,
        countGeneral: cG
        }
    );
} 
```

如果 Type 是“General”，则发出 countGeneral 1，否则发出 0。

然后你可以完全从你的 emit 函数中删除类型检查，因为你无论如何都会在你的 reduce 函数中破坏它。目前，您的 reduce clobbers 类型信息在 reduce 阶段从 emit 传递。

# xml - Oracle PLSQL XML 规范化即 C14N 生成

> ID：13580758
> 
> 赞同：2
> 
> 时间：2012-11-27T09:13:05.127
> 
> 标签：xml, plsql

您知道是否可以通过 Oracle PLSQL 生成被认为是规范化的 XML（即 XML [http://mcaf.ee/ufs3z](http://mcaf.ee/ufs3z)）？

我看到 Oracle 有一个 Java API C14NTransform 我认为这仅供私人使用 [http://docs.oracle.com/cd/E23549_01/apirefs.1111/e10680/oracle/security/xmlsec/transform/C14NTransform.html](http://docs.oracle.com/cd/E23549_01/apirefs.1111/e10680/oracle/security/xmlsec/transform/C14NTransform.html)

有人有这方面的经验吗？

达拉格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:33:29.810

让 oracle xml 功能为您完成工作......假设您定义了一个`l_xml_data`数据类型的变量`clob`来保存您的非规范化 xml：

```
 WITH xdata AS
     (
        SELECT xmltype ( l_xml_data )   xml
          from dual
     )
SELECT XMLSERIALIZE ( CONTENT extract(xml, '/rootelement') )  x
  FROM xdata
     ; 
```

请参阅以下 2 个小提琴进行说明。唯一的区别是 xml 的来源，它是一个简单的演示表。

请务必从运行 sql 按钮的下拉菜单中选择“降价输出”。

*   [非规范化](http://sqlfiddle.com/#!4/6b020/4/0)
*   [规范化](http://sqlfiddle.com/#!4/6b020/3/0)

我还没有详尽地测试结果是否符合 c14n 标准。但是，它应该可以帮助您入门。

然而，在 plsql 代码中使用这种方案已经过测试。

问候。

# java - 打开应用程序和服务器之间的连接

> ID：13580762
> 
> 赞同：0
> 
> 时间：2012-11-27T09:13:17.847
> 
> 标签：java, android, objective-c, ios

我想在应用程序（在移动设备中）和服务器之间创建连接。

此外，一次向应用发送一些信息会很棒，并且该服务器会知道该信息是否到达应用。

有没有人试过这个？

我将不胜感激任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:09:57.353

我已经为 iOS 尝试过，实际上它是一个需要通过网络同步多个设备的应用程序。

要实现您想要的，您需要使用套接字。有两种套接字：[TCP](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)和[UDP](http://en.wikipedia.org/wiki/User_Datagram_Protocol)。这些是在协议 OSI 层上运行的协议。[在此处](http://en.wikipedia.org/wiki/TCP/IP)阅读有关 TCP/IP 堆栈的更多信息。

当您阅读所有这些内容时，您将了解为什么需要使用套接字，特别是 TCP 套接字，它们可以确保交付。

对于 iOS，我建议使用[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)，这是一个第三方库，它充分利用了在低级别使用套接字的麻烦。对于 Android，我不能马上告诉你，但我过去曾成功使用过 java.net.socket，但我相信谷歌搜索会为你指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:05:50.607

对于安卓：

您可以使用[HttpUrlConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)或[HttpClient](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)。[更多在这里。](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)
要将信息从服务器发送到设备，请使用[GCM](http://developer.android.com/guide/google/gcm/index.html)

祝你好运！

# c# - 捕获应用程序的激活事件

> ID：13580763
> 
> 赞同：1
> 
> 时间：2012-11-27T09:13:20.463
> 
> 标签：c#, windows-8, microsoft-metro

我指的是[http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx#app_activation](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx#app_activation)

```
 // App is an Application
    public App()
    {
        this.InitializeComponent();

        // Doesn't compile
        //this.Activated += OnActivated;

        this.Suspending += OnSuspending;
    }

    protected override void OnActivated(IActivatedEventArgs args)
    {
        System.Diagnostics.Debug.WriteLine("OnActivated");
    }

    private void OnSuspending(object sender, SuspendingEventArgs e)
    {
        var deferral = e.SuspendingOperation.GetDeferral();
        deferral.Complete();
    } 
```

注意，`OnActivated`永远不会被触发。`OnSuspending`将在我退出应用程序大约 30 秒后触发。

如何捕获`Activated`事件？奇怪的是我没有在 中找到`Activated`事件`App`，尽管文档是这样说的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:37:13.990

激活有点混乱。看看这里的文档：

[http://msdn.microsoft.com/en-us/library/windows/apps/br242324.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br242324.aspx)

您会发现，当用户点击磁贴时，只会触发 OnLaunched 事件（请参阅此处的文档：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml .application.onactivated.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.onactivated.aspx) )

OnActivated 仅适用于普通启动之外的特殊情况。那将是以下任何一项：

OnFileActivated OnSearchActivated OnShareTargetActivated OnFileOpenPickerActivated OnFileSavePickerActivated OnCachedFileUpdaterActivated

因此，如果您真的想要在应用程序被激活时调用的东西，无论如何，我建议您制作自己的私有方法，然后从 OnLaunched 和 OnActivated 调用它。这应该适用于所有激活情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:24:19.510

也许问题是您正常启动应用程序，例如，通过点击应用程序磁贴（没有事实，我只是在猜测）。在这种情况下，仅调用 OnLaunched 方法。

[微软](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.onactivated)

# three.js - Ray intersectObject 与 Particlesystem（捕获鼠标点击 ParticleSystem）

> ID：13580776
> 
> 赞同：2
> 
> 时间：2012-11-27T09:13:52.170
> 
> 标签：three.js

有什么方法可以在 ParticleSystem 中捕获鼠标点击？使用 Mesh 和 Paticle 可以正常工作，但是如果我在 ParicleSystem 上调用 intersectObject，则相交长度始终为 0。

```
vector = new THREE.Vector3( mouse.x, mouse.y, 0.5 );
projector.unprojectVector( vector, camera );
ray.set(camera.position,vector.subSelf( camera.position ).normalize() );
intersects = ray.intersectObjects( particleSystem );
console.log(intersects.length); 
```

这是一个带有交互式粒子的示例：[https](https://dl.dropbox.com/u/4253186/three/examples/webgl_interactive_particles.html) : //dl.dropbox.com/u/4253186/three/examples/webgl_interactive_particles.html 但它不适用于最新版本的three.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:30:11.897

`Ray.intersectObjects()`当前版本的 three.js (r.53)中不支持`ParticleSystem`。

所以答案是“不”，除非您自己修改库。

# php - 在 php 中使用 str_replace 进行多次替换

> ID：13580777
> 
> 赞同：0
> 
> 时间：2012-11-27T09:13:53.120
> 
> 标签：php, codeigniter, str-replace

好的，问题来了：

我正在尝试为我的项目中的数据库类编写查询函数，我想让它更容易转义 sql 并检查它是否对数据库有害。

假设我有这样的查询：

```
INSERT INTO users (id,name,email,username,birthdate)
VALUES(1,'Josh','josh101@coolsite.com','josh101','1978-11-02') 
```

但如果我将它硬编码到函数中，它不会真正有帮助。所以假设我对我想要插入的所有值都使用了一个问号，然后将一个数组传递给包含我想要替换的实际值的函数，就像它在 codeigniter 中完成的方式一样。

这是一个示例：

```
//Here's the way the function appears in the class definition.
    public function query($sql,$params=array()){

     if (!empty($params) && is_string($sql)):
               //do some stuff here.

            elseif (empty($params) && is_string($sql)):
                //do some other stuff here.

            else:
                //bad sql argument.
                die("Mysql_database ERROR: The query submitted is not a string!");
            endif;

    }

//Here's where the function is applied.
 $sql="INSERT INTO users (id,name,email,username,birthdate)
        VALUES(?,?,?,?,?)";

$params=array(1,'Josh','josh101@coolsite.com','josh101','1978-11-02');

$db= new Mysql_database();

$response=$db->query($sql,$params); 
```

现在这就是我想要做的：

1.  如果未提供第二个参数，则按原样运行查询。
2.  否则检查为其类型提供的数组元素并正确转义它们，然后在提供的伪 sql 字符串中的适当位置替换它们。

问题是似乎所有的问号都被数组的第一个元素替换了：

这是代码：

```
/*assuming I already have a function called create_array that well,
basically creates an array with n elements 
specified in the first parameter and fills each element with the value provided in 
the second parameter.*/
    $toreplace = create_array(substr_count($sql, "?"),"?");
    $sqlComplete = str_replace($toreplace, $params, $sql); 
```

如果我回显 $sqlComplete 我得到这个：

```
INSERT INTO users (id,name,email,username,birthdate)
VALUES(1,1,1,1,1) 
```

我该怎么做才能将 $params 的每个元素放在 sql 字符串中的适当位置？

PS：请不要告诉我只使用codeigniter，因为我想通过从头开始构建一个项目来挑战自己，我不想总是依赖框架来完成工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:24:11.603

也许只使用[MySQL 准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:25:35.920

可以这样做：

```
$params=array(1,'Josh','josh101@coolsite.com','josh101','1978-11-02');

$sql="INSERT INTO users (id,name,email,username,birthdate)
    VALUES(?,?,?,?,?)";

foreach($params as $param)
{
    $pos = strpos($sql, '?');

    if($pos !== false)
    {
        $sql = substr_replace($sql,"'" . $param . "'",$pos,1);
    }
}

echo $sql; 
```

**输出**

```
INSERT INTO users (id,name,email,username,birthdate) VALUES('1','Josh','josh101@coolsite.com','josh101','1978-11-02') 
```

这不会进行任何转义，它只是填充查询中的值。您需要添加适合框架/数据库 API 的转义。

# jboss - 在 jboss 7.1 上部署 War 文件时出错

> ID：13580781
> 
> 赞同：0
> 
> 时间：2012-11-27T09:14:09.813
> 
> 标签：jboss, jboss7.x, war, java-7

我正在尝试使用 jboss 7.1 在 RHEL5 服务器上部署一个 war 文件，一旦将其放入部署文件夹就失败了，我检查了 server.log 并发现它在尝试部署时出现此错误：

> [org.jboss.modules]（MSC 服务线程 1-8）无法在服务模块加载器的模块“deployment.AppWeb.war:main”中定义类 tag.TagBean：java.lang.UnsupportedClassVersionError：tag/TagBean：不支持的专业.minor 版本 51.0

其中 tag 是 Web 项目 AppWeb 中的命名空间，而 TagBean 是类名。还有一件事，在 struts 文件中它是这样添加的：

```
<package name="tag" namespace="/tag" extends="struts-default">
         <action name="default" class="tag.TagBean">
             <result>myForm.submitpage.jsp</result>
         </action>
    </package> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:14:09.477

`tag.TagBean`您似乎正在尝试在较旧的 JVM 上运行使用 Java 7 编译的应用程序（至少是 class ）。将JVM[切换到 Java 7](https://community.jboss.org/message/742171)或使用 Java 6 重新编译。

# php - 不推荐使用：不推荐使用函数 ereg()

> ID：13580784
> 
> 赞同：5
> 
> 时间：2012-11-27T09:14:17.330
> 
> 标签：php, forms, deprecated, eregi, ereg

> **可能重复：**
> [如何在 PHP 中将 ereg 表达式转换为 preg？](https://stackoverflow.com/questions/6270004/how-can-i-convert-ereg-expressions-to-preg-in-php)

我的联系表格可以正常工作，但我不断收到以下错误：

> 已弃用：函数 ereg() 在 /home/..... 中已弃用

我真的迷路了，但我认为这是需要调整的部分。

```
 if ( empty($_REQUEST['name']) ) {
    $pass = 1;
    $alert .= $emptyname;
} elseif ( ereg( "[][{}()*+?.\\^$|]", $_REQUEST['name'] ) ) {    
    $pass = 1;
    $alert .= $alertname;
}
if ( empty($_REQUEST['email']) ) {
    $pass = 1;
    $alert .= $emptyemail;
} elseif ( !eregi("^[_a-z0-9-]+(.[_a-z0-9-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*(.[a-z]   {2,3})$", $_REQUEST['email']) ) {
    $pass = 1;
    $alert .= $alertemail;
}
if ( empty($_REQUEST['message']) ) {
    $pass = 1;
    $alert .= $emptymessage;
} elseif ( preg_match( "[][{}()*+?\\^$|]", $_REQUEST['message'] ) ) {
    $pass = 1;
    $alert .= $alertmessage;
} 
```

将不胜感激找到解决方案

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-27T09:18:52.967

您必须使用[`preg_match`](http://www.php.net/manual/en/function.preg-match.php)，而不是[`ereg`](http://php.net/manual/en/function.ereg.php)因为最后一个已弃用。

更换它不是什么大不了的事：

```
ereg( "[][{}()*+?.\\^$|]", $_REQUEST['name'] ) 
```

会变成：

```
preg_match( "/[][{}()*+?.\\^$|]/", $_REQUEST['name'] ) 
```

ps 在将旧项目移植到 PHP 5.3 时，我不得不修改一百多个文件，以避免手动修改，我使用以下脚本为我做这件事：

```
function replaceEregWithPregMatch($path) {
    $content = file_get_contents($path);
    $content = preg_replace('/ereg\(("|\')(.+)(\"|\'),/',
                            "preg_match('/$2/',",
                            $content);
    file_put_contents($path, $content);
} 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T09:17:02.157

该功能`ereg()`已弃用，不应再使用。该[文档](http://php.net/manual/en/function.ereg.php)告诉您该怎么做（改为使用`preg_match`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:46:07.450

就像你说的 - 没什么大不了的，它就像一个魅力：

```
if ( empty($_REQUEST['name']) ) {
    $pass = 1;
    $alert .= $emptyname;
} elseif ( preg_match( "/[][{}()*+?.\\^$|]/", $_REQUEST['name'] ) ) {  
    $pass = 1;
    $alert .= $alertname;
}
if ( empty($_REQUEST['email']) ) {
    $pass = 1;
    $alert .= $emptyemail;
} elseif ( !preg_match("#^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$#i", $_REQUEST['email']) ) {
    $pass = 1;
    $alert .= $alertemail;
}
if ( empty($_REQUEST['message']) ) {
    $pass = 1;
    $alert .= $emptymessage;
} elseif ( preg_match( "/[][{}()*+?\\^$|]/", $_REQUEST['message'] ) ) {
    $pass = 1;
    $alert .= $alertmessage;
} 
```

谢谢你们

# php - PHP SOAP：对象引用未设置为对象的实例

> ID：13580786
> 
> 赞同：5
> 
> 时间：2012-11-27T09:14:22.693
> 
> 标签：php, soap

我需要你的帮助

我必须使用 Web 服务 SOAP 中的 PHP 函数请求 XML 如下

```
<OTA_HotelDescriptiveInfoRQ xmlns="http://www.opentravel.org/OTA/2003/05" Version="1">
   <POS>
      <Source AgentSine="user" AgentDutyCode="pass" />
   </POS>
   <HotelDescriptiveInfos>
      <HotelDescriptiveInfo ChainCode="H4U" HotelCode="696"/>
   </HotelDescriptiveInfos>
</OTA_HotelDescriptiveInfoRQ> 
```

这是我的PHP代码：

```
$soapClient = new SoapClient("http://otatest.apixml.com/dispatcher.asmx?WSDL");
$header = new SOAPHeader('http://xmlota.wspan.com/webservice/', 'authentication', array('username' => 'user', 'password' => 'pass'));
$soapClient->__setSoapHeaders($header);

$param['POS']['Source']['AgentSine'] = 'user';
$param['POS']['Source']['AgentDutyCode'] = 'pass';
$param['HotelDescriptiveInfos']['HotelDescriptiveInfo']['ChainCode'] = 'H4U';
$param['HotelDescriptiveInfos']['HotelDescriptiveInfo']['HotelCode'] = '696';

$response = $soapClient->sendOTAHotelDescriptiveInfo($param); 
```

这是我尝试了几天但无法解决的错误

```
致命错误：未捕获的 SoapFault 异常：[soap:Server] System.Web.Services.Protocols.SoapException：服务器无法处理请求。
---> System.NullReferenceException：对象引用未设置为对象的实例。在 H4U.Webservices.OTA.SoapDispatcher.sendOTAHotelDescriptiveInfo(OTA_HotelDescriptiveInfoRQ OTA_HotelDescriptiveInfoRQ)
--- 内部异常堆栈跟踪结束 ---
在 /home/dimavoya/public_html/soap/soap.php:43

堆栈跟踪：
#0 /home/dimavoya/public_html/soap/soap.php(43): SoapClient->__call('sendOTAHotelDes...', 数组)
#1 /home/dimavoya/public_html/soap/soap.php(43): SoapClient->sendOTAHotelDescriptiveInfo(Object(SoapVar))
#2 {main} 投入

```

我随时为您服务以获取更多信息

先感谢您

# greedy - 贪心算法实现

> ID：13580789
> 
> 赞同：1
> 
> 时间：2012-11-27T09:14:28.863
> 
> 标签：greedy

因此，我对使用尽可能少的教室安排可能重叠的 n 个活动的问题的解决方案有一些疑问。解决方案如下：

> 找到最少数量的教室来安排一组活动 S。为此，根据开始和结束时间有效地完成活动。维护两个教室列表：时间 t 繁忙的房间和时间 t 空闲的房间。当 t 是某个活动的开始时间时，将此活动安排到空闲房间并将房间移动到忙碌列表。同样，当活动停止时，将房间移动到空闲列表。最初从零房间开始。如果空闲列表中没有房间，则创建一个新房间。
> 
> 该算法可以通过对活动进行排序来实现。在每个开始或结束时间，我们可以安排活动并在恒定时间内在列表之间移动房间。因此，总时间受排序支配，因此为 O(n lg n)。

我的问题是

1）首先，你如何同时开始和结束时间来完成活动？

2）我不太明白如何在恒定时间内在列表之间移动房间。如果您想将房间从忙碌列表移动到空闲列表，您是否不必遍历忙碌列表中的所有房间并查看哪些房间的结束时间已经过去？

3）在执行此操作以使其正常工作时，是否需要跟踪任何“状态”变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:57:57.743

1.  该算法的工作方式是，您需要创建一个列表，其中包含每个开始时间的元素和每个结束时间的元素（如果有 n 个活动，则总共有 2n 个元素）。对这个列表进行排序。当结束时间和开始时间相等时，首先对结束时间进行排序——这将导致大厅的背靠背预订工作。
2.  如果您使用链表来保存空闲和预订的大厅，您可以让您在步骤 1 中创建的元素保存指向活动结构的指针，并且该结构可以保存指向包含该活动所分配的大厅的列表元素的指针到。这最初为 NULL，并且当该大厅用于该活动时将采用一个值。然后，当该活动结束时，可以通过跟随来自活动结束元素的两个指针（首先到活动对象，然后从那里到大厅元素）在恒定时间内查找其大厅。
3.  希望从上面的描述中可以清楚地看到这一点。

# svg - Graphael 饼图图例重叠

> ID：13580790
> 
> 赞同：3
> 
> 时间：2012-11-27T09:14:31.963
> 
> 标签：svg, graphael

几周以来，我一直在使用[gRaphaël图表，但时不时会遇到一些奇怪的问题。](http://g.raphaeljs.com/)一个反复出现的主题是饼图图例标签都在错误的地方挤在一起。图片 > 文字：

![在此处输入图像描述](../Images/d6232c81f3873f6a23529da53969d13a.png)

图表按照您的预期创建，在本例中：

```
var r = Raphael(domNode, 300, 120);

this.chart = r.piechart(55, 55, 50, [75, 25],
    {
        colors: [
            "000-#d00-#900",
            "000-#3a3-#070"
        ],
        legend: ["Building", "Tertiary Education"],
        legendpos: "east"
    }); 
```

然后我做一些更基本的造型，但关闭它并没有帮助。问题在`<svg>`节点中清晰可见（文本和圆形节点共享重叠位置），但我不知道它来自哪里或为什么，它只是有时会发生；其他图表工作得很好。论坛或问题跟踪器上也没有任何内容，尽管我刚刚意识到我可能也应该在那里问。

使用`Raphaël 2.1.0`和`g.Raphael 0.51`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-18T05:08:12.930

我发现以下[博客文章](http://www.shanison.com/2010/07/18/raphael-pie-chart-legend-stacked-line-problem/)处理了这个确切的问题。如果饼图在最初隐藏的元素中呈现，则 gRaphael 无法正确计算位置，从而导致此堆叠图例：

> 所以解决方案是先渲染部分面部，在显示面部之后，然后执行 Raphael Javascript。换句话说，请确保在图表容器存在且未隐藏时生成图表！

我已经通过将创建饼图函数从 jQuery 文档就绪指令移动到使隐藏元素可见的单击事件来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:32:34.107

尝试将您的图例定义如下

```
{ legend: ["Building", "Tertiary Education"] , legendpos: "east"} 
```

这是我能在你和[我的工作 jsfiddle之间找到的唯一区别](http://jsfiddle.net/vedmack/kqSEw/29/)

# c++ - Visual C++ 使用 Directory::GetDirectories 遍历目录

> ID：13580792
> 
> 赞同：1
> 
> 时间：2012-11-27T09:14:34.353
> 
> 标签：c++, visual-studio-2010

我有以下代码，基于[http://msdn.microsoft.com/en-us/library/07wt70x2.aspx的示例](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)

```
void ProcessDirectory( String^ targetDirectory )
{

  if (Directory::Exists( targetDirectory )) {

    printf("Directory : %s\n", targetDirectory);

       // Recurse into subdirectories of this directory. 
       array<String^>^subdirectoryEntries = Directory::GetDirectories( targetDirectory );
       IEnumerator^ dirs = subdirectoryEntries->GetEnumerator();
       while ( dirs->MoveNext() )
       {
          String^ subdirectory = safe_cast<String^>(dirs->Current);
          ProcessDirectory( subdirectory );
       }
   }
}

int main(int argc, char **argv)
{

ProcessDirectory( "C:\\" );

} 
```

这应该是（我认为）通过我的硬盘驱动器上的目录进行的简单递归迭代，但它一直在说路径太长而崩溃。

它们看起来太长的原因是当它到达应用程序数据时，它开始重复应用程序数据目录名称。错误如下，非常感谢任何帮助，因为我被卡住了:(:

```
目录：C:\Documents and Settings\All Users\Application Data\Application Dat
a\应用程序数据\应用程序数据\应用程序数据\应用程序数据\应用程序
n 数据\应用程序数据\应用程序数据\应用程序数据\Adobe\CameraRaw\Camera
配置文件\相机\佳能 EOS 1000D

未处理的异常：System.IO.PathTooLongException：指定的路径，文件名
我，或者两者都太长了。完全限定的文件名必须小于 260 ch
aracters，并且目录名称必须少于 248 个字符。
在 System.IO.Path.NormalizePath（字符串路径，布尔 fullCheck，Int32 maxPath
长度）
在 System.IO.Path.GetDirectoryName（字符串路径）
在 System.IO.FileSystemEnumerableIterator`1..ctor(String path, String origina
lUserPath, String searchPattern, SearchOption searchOption, SearchResultHandler`
1 个结果处理程序）

```

# html - Css3 媒体查询仅在标签内工作

> ID：13580793
> 
> 赞同：2
> 
> 时间：2012-11-27T09:14:36.063
> 
> 标签：html, css, media-queries

我已经用谷歌搜索了两天但找不到答案....问题仅在 IE8 中所有其他浏览器都很好......我正在使用以下 Js 文件来支持 IE8 中的媒体查询：

```
css3-mediaqueries.js
html5.js 
```

问题是媒体查询在外部样式表中不起作用，但是当我将它们放在 html 文件的头部部分时，它们开始正常工作。该网站是Wordpress。任何帮助都会很棒。

我的媒体查询代码是：

```
@media only screen and (min-width: 769px) and (max-width:1075px) {
    #wrap {
        width:100%;
        max-width:98%;
    }
}
@media \0screen {
    img { 
        width: auto; /* for ie 8 */
    }
}
@media only screen and (min-width: 600px) and (max-width:768px) {
    #wrap {width: 100%;}
    .grid {padding: 0;}
    #contentleft {width: 100%;}
    .grid > aside {float: none; margin: 0; width: auto; }
    #contentright {float: none;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:17:12.020

尝试在您的 head 标签中设置一个空的样式标签。

```
 <style></style> 
```

我在链接 rel 样式表中声明的媒体查询有问题，这为我解决了问题。

# iphone - 在 iAd 中使用 Autolayout 的问题

> ID：13580797
> 
> 赞同：4
> 
> 时间：2012-11-27T09:14:49.153
> 
> 标签：iphone, ios, ios6, iad, uistoryboard

我正在构建一个支持纵向和横向方向的应用程序，并使用自动布局来简化流程。我在底部放置了一个`AdBannerView`并将底部空间固定到superview。这是我的纵向和横向屏幕：

**肖像：**

![人像模式](../Images/45bb2be6ff2ba87168068accacbbc433.png)

**景观：**

![横向模式](../Images/78a125dd2119f24ef869a8d8735257ca.png)

该行为在纵向模式下与预期的一样。但是，在横向模式下，我在 AdBannerView 下方得到了一些空白。这是什么原因，我该如何摆脱它？我需要编写额外的代码来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:51:25.447

对于 IOS 6，无需担心 iAd 方向检查此链接。

> [http://developer.apple.com/library/ios/#samplecode/iAdSuite/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/iAdSuite/Introduction/Intro.html)

```
if ([ADBannerView instancesRespondToSelector:@selector(initWithAdType:)]) {
        _bannerView = [[ADBannerView alloc] initWithAdType:ADAdTypeBanner];
    } else {
        _bannerView = [[ADBannerView alloc] init];
    } 
```

# extjs - 在 extjs 4 的网格面板单元格中显示图像图标

> ID：13580803
> 
> 赞同：4
> 
> 时间：2012-11-27T09:14:57.110
> 
> 标签：extjs, extjs4

我想在我的网格中显示一个图标，列名是状态。图标是 web-inf/images/iconname.png 但我做不到。谁能帮我解决这个问题？我的代码如下：

```
Ext.define('Ext4Example.view.attendence.Datagrid', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.datagrid',
    layout: 'fit',
    border: true,
    viewConfig: {
        stripeRows: true,
        forceFit: true,
        emptyText: 'No Records to display'
    },
    hideHeaders: false,
    initComponent: function () {

        this.store = 'Attendences';
        this.width = 429;
        this.columns = [{
            text: 'Status',
            width: 40,
            align: 'center',
            renderer: function (value, metaData, record, row, col, store, gridView) {
                var intime = record.get('intime');
                var outtime = record.get('outtime');
                var a = this.checkUncheck(intime, outtime);
                if (a >= 2) {
                    return '<img src="images/TIC01001.png" />';
                } else {
                    return 'something';
                }
            }
        }, {
            text: 'Approval',
            flex: 1,
            align: 'left',
            renderer: function (value, metaData, record, row, col, store, gridView) {
                var intime = record.get('intime');
                var outtime = record.get('outtime');
                var a = this.checkUncheck(intime, outtime);
                if (a >= 2) {
                    return '<input type="checkbox" checked="true" />';

                } else {
                    return '<input type="checkbox" />';
                }
            },
        }];

        this.callParent(arguments);
    },
    checkUncheck: function (intime, outtime) {
        var count = 0;
        var inhour = intime.getHours() * 60 * 60 * 1000;
        var inminute = intime.getMinutes() * 60 * 1000;
        var insecond = intime.getSeconds() * 1000;
        var inmillisec = inhour + inminute + insecond;

        var nine = 9 * 60 * 60 * 1000;
        var five = 5 * 60 * 1000;
        var checkin = nine + five;
        if (checkin >= inmillisec) {
            count += 1;
        }
        var outhour = outtime.getHours() * 60 * 60 * 1000;
        var outminute = outtime.getMinutes() * 60 * 1000;
        var outsecond = outtime.getSeconds() * 1000;
        var outmillisec = outhour + outminute + outsecond;

        var six = 18 * 60 * 60 * 1000;
        if (outmillisec >= six) {
            count += 1;
        }
        return count;
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:37:13.443

就这么简单。我只是像这样更改了资源链接，它可以工作。解决了。这是代码

```
 Ext.define('Ext4Example.view.attendence.Datagrid' ,{
    extend: 'Ext.grid.Panel',
    alias : 'widget.datagrid',
    layout: 'fit',
    border: true,
    viewConfig: {
        stripeRows: true,
        forceFit: true,
        emptyText:'No Records to display'
    },   
    hideHeaders: false,
    initComponent: function() {

        this.store = 'Attendences';
        this.width = 429;      
        this.columns = [

        {
            text: 'Status',
            width: 40,
            align: 'center',
            renderer: function(value, metaData, record, row, col, store, gridView){
                            var intime = record.get('intime');
                            var outtime = record.get('outtime');
                            var a = this.checkUncheck(intime, outtime);
                            if(a >= 2)
                               { //change the resource below :
                                    return '<img src="${resource(dir: 'images', file: 'TIC01001.png')}" />';
                            }else{
                                return '<img src="${resource(dir: 'images', file: 'DEL01005.png')}" />';
                            }
                        }
        },{
            text: 'Approval',
            flex: 1,
            align: 'left',
            renderer: function(value, metaData, record, row, col, store, gridView){
                            var intime = record.get('intime');
                            var outtime = record.get('outtime');
                            var a = this.checkUncheck(intime, outtime);
                            if(a >= 2)
                               {
                                     return '<input type="checkbox" checked="true" />';

                            }else{
                                return '<input type="checkbox" />';
                            }
                        },    
            }
        ];

        this.callParent(arguments);
    },
    checkUncheck: function(intime, outtime){
        var count = 0;
        var inhour = intime.getHours() * 60 *60 * 1000;
        var inminute = intime.getMinutes() * 60 * 1000;
        var insecond = intime.getSeconds() * 1000;
        var inmillisec = inhour + inminute + insecond;

        var nine = 9 * 60 * 60 * 1000;
        var five = 5 * 60 * 1000;
        var checkin = nine + five;
        if(checkin >= inmillisec){
            count+=1;
        }
        var outhour = outtime.getHours() * 60 * 60 * 1000;
        var outminute = outtime.getMinutes() * 60 * 1000;
        var outsecond = outtime.getSeconds() * 1000;
        var outmillisec = outhour + outminute + outsecond;

        var six = 18 * 60 * 60 * 1000;
        if(outmillisec >= six){
            count+=1;
        }
        return count;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:35:01.440

我认为你的`this`变量的范围在你的渲染器函数中是错误的。

```
var a = this.checkUncheck(intime, outtime); //<---this line
if(a >= 2) {
       return '<img src="images/TIC01001.png" />';
}
else {
       return 'something';
} 
```

你确定它来自 checkUncheck 功能吗？你可以做的是：

```
initComponent: function() {
    var me = this;

//rest of code...

//renderer function:
var a = me.checkUncheck(intime, outtime); 
```

我认为这是你的问题。

# android - 如何将存储在本地存储中的文件（例如应用程序数据库文件夹）附加到 gmail

> ID：13580805
> 
> 赞同：0
> 
> 时间：2012-11-27T09:14:58.973
> 
> 标签：android, android-sdcard

我无法将存储在数据库中的文件附加到 gmail。使用 sdcard 可以正常工作，但我不想将这些文件存储在 sdcard 中。

我已经看到建议使用内容提供程序的链接，但它仅适用于 gmail，不适用于任何其他客户端。 [http://stephendnicholas.com/archives/974](http://stephendnicholas.com/archives/974)

那么任何人都可以让我知道是否有任何解决方案可以将文件附加到gmail，电子邮件客户端而不将这些文件存储在sdcard中。

谢谢和问候， 阿杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:15:55.943

[这是您在http://stephendnicholas.com/archives/974](http://stephendnicholas.com/archives/974)的评论部分中发布的问题的解决方案。

根据缓存文件创建另一个文件。

*

```
File shareFile = new File(getCacheDir() + File.separator + zip_filename);
shareFile.setReadable(true, false);
shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(shareFile)); 
```

*

# css - 如何显示内联数 浏览器大小更改时宽度为 100%？

> ID：13580810
> 
> 赞同：0
> 
> 时间：2012-11-27T09:15:16.087
> 
> 标签：css

我想以 100% 的视口大小显示 li 元素。我从[这里的问题](https://stackoverflow.com/questions/2434270/how-to-display-inline-several-li-with-100-width)中找到了解决方案，但这还不足以满足我的需要，也就是说，**即使浏览器大小发生变化**，我也希望 li 元素保持 100% 的宽度。是否可以只使用纯css？还是我需要使用额外的 javascript 代码？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:24:14.127

我把另一个帖子放在一个小提琴中检查，它对我来说工作正常，你确定你使用了所有正确的参数吗？

```
div {overflow:auto;width:100%;}
ul {margin:0;padding:0;white-space:nowrap;}
li {width:100%;display:inline-block;} 
```

[http://jsfiddle.net/PDVEM/1/](http://jsfiddle.net/PDVEM/1/)

编辑：要回答您的评论，我不确定是否可以将滚动条位置和窗口大小与纯 css 同步（可能使用一些 text-align:center; 技巧），但可以使用 javascript：

```
//store the current scroll value
div.scroll(function(){
    currentScrollPos = div.scrollLeft();
    currentLi = (currentScrollPos/divWidth);
})

//on resize re-positions the scrollbar        
$(window).resize(function(){
     divWidth = parseInt(div.css('width'));
     newScrollPos = currentLi*divWidth;
     div.scrollLeft(newScrollPos);
}) 
```

有关完整示例，请参见此小提琴：

[http://jsfiddle.net/PDVEM/3/](http://jsfiddle.net/PDVEM/3/)

# javascript - 1点击html后禁用href？

> ID：13580815
> 
> 赞同：14
> 
> 时间：2012-11-27T09:15:53.497
> 
> 标签：javascript, jquery, html

我希望`href`单击 1 次后禁用，可以使用 javascript 或 jquery 完成吗？

请帮忙。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns ="http://www.w3.org 1999 xhtml" xml :lang="en">
  <head>
    <style>

     a:link{
       color:#1DAAA1;
     }

     a:visited{
       color:green;
     }

     a:hover{
       background: #ff0000;
       color: #FFF;
     }

    </style>
  </head>
  <body>
    <table width="500" align="center" border="5px solid">
      <tr align="center" >
        <td><a href="http://www.google.com.my/" onclick="return false"> Google </a></td>
        <td><a href="http://www.yahoo.com/"> Yahoo </a></td>
        <td><a href="http://www.bing.com/"> Bing </a></td>
        <td><a href="http://en.wikipedia.org/wiki/Main_Page"> Wikipedia </a></td>
        <td><a href="https://www.facebook.com/"> Facebook </a></td>                         
     </tr>
    </table>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-01-29T20:50:40.473

纯javascript解决方案：

```
<script> 
   function clickAndDisable(link) {
     // disable subsequent clicks
     link.onclick = function(event) {
        event.preventDefault();
     }
   }   
</script>
<a href="target.html" onclick="clickAndDisable(this);">Click here</a> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-03T10:13:49.477

这是使用*jQuery*的更简单的方法，可以防止链接双击：没有`onclick`属性，`id`不需要，没有`href`删除。

```
$("a").click(function (event) {
    if ($(this).hasClass("disabled")) {
        event.preventDefault();
    }
    $(this).addClass("disabled");
}); 
```

**提示：**您可以使用任何选择器（如`button`、`input[type='submit']`等），它会起作用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-27T09:19:12.033

试试这个....

```
a:visited {
 color:green;
 pointer-events: none;
 cursor: default; 
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-13T20:09:38.837

纯 JavaScript 解决方案，允许用户只关注 URL 一次：

```
<a id="elementId" 
   href="www.example.com" 
   onclick="setTimeout(function(){document.getElementById('elementId').removeAttribute('href');}, 1);"
   >Clik and forget</a> 
```

单击后，这将删除 href 属性（等待 1 毫秒以允许原始操作开始），使链接静默。与 Dineshkani 建议的类似，但最初的答案导致在某些浏览器上根本无法启动操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T10:19:01.960

这次我用 Javascript 尝试了它...希望它会帮助你:) 只需在所需的 href 标签的“onclick()”中调用以下函数...

```
​function check(link) {
    if (link.className != "visited") {
       //alert("new");
       link.className = "visited";
       return true;     
    }
    //alert("old");
    return false;
}​​ 
```

比如​<code><a href="#" onclick="return check(this);">link here</a>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ ​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​</code>并[在此处](http://jsfiddle.net/p5BRT/)查看演示

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T13:02:06.363

你可以用jquery做

```
<a href='http://somepage.com' id='get' onlick='$("#"+this.id).attr("href","")'>Something to be go </a> 
```

或者使用 javascript

```
<a href='http://somepage.com' id='get' onlick='document.getElementById(this.id).removeAttribute("href");'>Something to be go </a> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-10T01:24:27.490

根据 Ayyappan Sekar 的回答，我刚刚使用 jQuery 做了一些非常相似的事情：

```
$('#yourId').click(function (e) {
    if(!$(this).hasClass('visited'))
    {
        $(this).addClass('visited')
        return true;
    }
    else
    {
        $(this).removeAttr("href"); // optional
        // some other code here
        return false;
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-29T21:42:36.833

在 html 和 css 中复制相同的 div，复制的必须低于原始 div，使用：z-index=-1 或/和 position:absolute。

使原始 div onclick="HideMe(this)"

```
JS:
<script type="text/javascript">
function HideMe(element){
element.style.display='none';
}
</script> 
```

这可能不是最好的方法，但可以实现 100% 的目标。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-07T19:52:24.587

我想在这里留下一个适用于 IFrame 的 Knockout.js 的示例，但由于 IFrame 不适用于本地文件，因此我使用 div 制作了这个示例。当您单击链接时，该函数被调用，正如您在`alert()`里面的注释中看到的那样，但是当您在输入对话框中拨一些东西并再次单击该链接时，只有当您单击时，Knockout.js 才不会更新 div调用相同函数但参数不同的另一个链接。

```
<html>
    <head>
        <script type="text/javascript" src="http://knockoutjs.com/downloads/knockout-3.2.0.js"></script>
    </head>
    <body>
        <div>
            <a href="javascript:fAlter(2)">Page 2</a>
        </div>
        <div>
            <a href="javascript:fAlter(3)">Page 3</a>
        </div>
        <div data-bind="bindHTML: dados"></div>
        <script type="text/javascript">
           function myPage2(nPage) {
               var cPage = '<div>Pagina 2</div>';
               if (nPage == 3) { cPage = '<div>Pagina 3</div>' }
               cPage += '<input type="text" id="fname" name="fname">';
               //alert('clicked!');
               return cPage
           }
           var viewModel =  {
                dados : ko.observable()
           }
           ko.bindingHandlers.bindHTML = {
                init: function () {
                     // Prevent binding on the dynamically-injected HTML (as developers are unlikely to expect that, and it has security implications)
                     return { 'controlsDescendantBindings': true };
           },
                update: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
                     // setHtml will unwrap the value if needed
                     ko.utils.setHtml(element, valueAccessor());
                     var elementsToAdd = element.children;
                     for (var i = 0; i < elementsToAdd.length; i++) {
                          ko.cleanNode(elementsToAdd[i]); //Clean node from Knockout bindings
                          ko.applyBindings(bindingContext, elementsToAdd[i]);
                     }
                }
           };
           ko.applyBindings(viewModel);
           viewModel.dados(myPage2(2));
           function fAlter(nPage) {
               viewModel.dados(myPage2(nPage));
           }
       </script>
    </body>
</html> 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-11-27T10:43:40.983

**jQuery解决方案：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns ="http://www.w3.org 1999 xhtml" xml :lang="en">
<html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>        
        <script type="text/javascript">
            function check(link) {
                $(link).replaceWith($(link).text());
            }
        </script>
        <style>

            a:link{
                color:#1DAAA1;

            }
            a:visited{
                color:green;
            }
            a:hover{
                background: #ff0000;
                color: #FFF;
            }

        </style>

    </head>
    <body>

        <table width="500" align="center" border="5px solid">
            <tr align="center" >
                <td><a href="http://www.google.com" target="_blank" onclick="return check(this);"> Google </a></td>
                <td><a href="http://www.yahoo.com" target="_blank" onclick="return check(this);"> Yahoo </a></td>
                <td><a href="http://www.bing.com" target="_blank" onclick="return check(this);"> Bing </a></td>
                <td><a href="http://en.wikipedia.org" target="_blank" onclick="return check(this);"> Wikipedia </a></td>
            </tr>

        </table>
    </body>
</html> 
```

# c++ - 访问 unordered_map 时的 SIGFPE

> ID：13580823
> 
> 赞同：14
> 
> 时间：2012-11-27T09:16:25.307
> 
> 标签：c++, gcc, clang, libstdc++

我有一个`unordered_map<Block, int>`with Block 是一个简单的结构，定义如下：

```
struct Block {
    size_t start;
    size_t end;

    bool operator==(const Block& b) const {
        return start == b.start && end == b.end;
    }
};

namespace std {
template<>
struct hash<Block> {
    size_t operator()(const Block& b) const {
        return b.start;
    }
};
} 
```

尝试访问地图时，我确实在 gdb 中收到以下错误消息（g++ 4.7.1 和 clang++ 3.1 都相同）：

```
Program received signal SIGFPE, Arithmetic exception.
0x0000000000401e0b in std::__detail::_Mod_range_hashing::operator() (this=0x7fffffffd8e0, __num=0, __den=0)
    at /usr/include/c++/4.7/bits/hashtable_policy.h:245
245     { return __num % __den; } 
```

我的 libstdc++ 版本是 3.4.17（即来自 GCC 4.7 的版本）

相关回溯：

```
#0  0x0000000000401e0b in std::__detail::_Mod_range_hashing::operator() (this=0x7fffffffd8e0, __num=0, __den=0)
    at /usr/include/c++/4.7/bits/hashtable_policy.h:245
#1  0x0000000000407199 in std::__detail::_Hash_code_base<Block, std::pair<Block const, int>, std::_Select1st<std::pair<Block const, int> >, std::hash<Block>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, true>::_M_bucket_index (this=0x7fffffffd8e0, __c=0, __n=0) at /usr/include/c++/4.7/bits/hashtable_policy.h:787
#2  0x0000000000405230 in std::_Hashtable<Block, std::pair<Block const, int>, std::allocator<std::pair<Block const, int> >, std::_Select1st<std::pair<Block const, int> >, std::equal_to<Block>, std::hash<Block>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, true, false, true>::_M_bucket_index
    (this=0x7fffffffd8e0, __k=..., __c=0) at /usr/include/c++/4.7/bits/hashtable.h:466
#3  0x00000000004038de in std::__detail::_Map_base<Block, std::pair<Block const, int>, std::_Select1st<std::pair<Block const, int> >, true, std::_Hashtable<Block, std::pair<Block const, int>, std::allocator<std::pair<Block const, int> >, std::_Select1st<std::pair<Block const, int> >, std::equal_to<Block>, std::hash<Block>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, true, false, true> >::at (
    this=0x7fffffffd8e0, __k=...) at /usr/include/c++/4.7/bits/hashtable_policy.h:474
#4  0x0000000000403001 in SplicedAlignment::FindOptimalEndBlock() const::{lambda(Block const&)#1}::operator()(Block const&) const (__closure=0x7fffffffd990, block=...) at splicing.cpp:151
#5  0x00000000004040b3 in std::for_each<__gnu_cxx::__normal_iterator<Block const*, std::vector<Block, std::allocator<Block> > >, SplicedAlignment::FindOptimalEndBlock() const::{lambda(Block const&)#1}>(__gnu_cxx::__normal_iterator<Block const*, std::vector<Block, std::allocator<Block> > >, SplicedAlignment::FindOptimalEndBlock() const::{lambda(Block const&)#1}, SplicedAlignment::FindOptimalEndBlock() const::{lambda(Block const&)#1}) (__first=..., __last=..., __f=...)
    at /usr/include/c++/4.7/bits/stl_algo.h:4442 
```

编辑：只要我给它相同的参数，我认为调用函数实际上不会有什么不同*，但显然它确实如此：*

```
std::for_each(blocks.begin(), blocks.end(), [&](const Block& block) {
   map.at(block);
} 
```

导致错误，而只有：

```
const Block& block = blocks[0];
map.at(block); 
```

工作得很好（`blocks`很简单`vector<Block>&`）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T17:42:45.610

*另外：如果你的哈希函数不能抛出，那么给它一个`noexcept`异常规范是非常重要的，否则哈希表需要将每个元素的哈希码与元素本身一起存储（这会增加内存使用并影响性能），以便容器操作必须不抛出不必重新计算哈希码。*

SIGFPE 意味着除以零，并且从回溯中它发生在这里：

```
 { return __num % __den; } 
```

这可能意味着`__den`为零。该值来自哈希映射的存储桶计数，不应为零。

你能确认它崩溃`m._M_bucket_count`的时间为零吗？

如果是这样，则表明您已经以某种方式损坏了地图（您是否尝试过编译`-D_GLIBCXX_DEBUG`以打开 libstdc++ 调试模式检查？您是否尝试过在 下运行`valgrind`？）或者 libstdc++ 代码中存在错误（这是可能的，但不太可能）。

下面的一些其他答案给出了地图如何被破坏的例子，例如为它分配存储空间`malloc`但实际上没有在该存储空间中构造一个对象，或者用 覆盖该对象`memset`。

另一种可能性是您的哈希映射是一个全局变量，并且您正在从另一个全局变量的构造函数访问它，该变量运行到[Static Initialization Order Fiasco](https://en.cppreference.com/w/cpp/language/siof)。如果地图在其构造函数运行之前使用，则存储桶计数将为零。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-04T15:27:30.330

在我的情况下，由于静态初始化失败而发生了同样的问题。从一个目标文件中，我为第二个目标文件中定义的静态 std::unordered_map 调用了 emplace() 。由于开始时数据位于 BSS，桶计数的值为零 => SIGFPE。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-19T06:31:58.530

我有完全相同的问题。它是由 memset 意外应用于容器数据引起的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-31T02:30:14.730

*还将在 STL 代码中发布我的 FPE 情况。*

代码使用 malloc() 来分配 std::unordered_map。这当然不会调用构造函数，导致异常状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-20T10:34:30.213

*按照其他用户报告他们自己在 STL 代码中导致 FPE 的情况的传统，这里是我的：*

自从我们升级编译器以来，我们的代码非常好，在 std::map 中开始因 SIGFPE 而死。**结果，我在 c++11 模式下用 gcc 4.8.5**编译了 gcc 9.2 ，这不是正常的事情——正常的 gcc 编译总是在 gnu++98 模式下执行。

这导致 4.8.5 gcc（对 c++11 的支持不完整/非官方）产生了错误的 9.2 gcc，偶尔会产生会出现各种不相关故障的二进制文件。例如，尝试调试上述 SIGFPE 会导致使用 编译时 std::basic_string 析构函数中出现 SIGSEGV `-D_GLIBCXX_DEBUG`，并且使用 检测到不相关的内存损坏`-fsanitize=address`。

这里的教训有两个：

1.  不要修改 gcc 构建系统，除非你非常清楚自己在做什么。
2.  有时错误可能出在编译器中（但话又说回来，错误最终出现在编译器的任何人身上......）。

# php - MySQL now() 和更新时间之间的时间差

> ID：13580824
> 
> 赞同：0
> 
> 时间：2012-11-27T09:16:25.720
> 
> 标签：php, mysql, datetime

我的代码看起来像这样

```
$checksql= "SELECT Body, ( NOW() - Updated ) as Age FROM ".$wpdb->prefix."amazoncache WHERE URL = '" . $keyurl . "' AND NOT( Body LIKE '%AccountLimitExceeded%') AND NOT( Body LIKE '%SignatureDoesNotMatch%') AND NOT( Body LIKE '%InvalidParameterValue%');";
        $result = $wpdb->get_results($checksql);

        if (count($result) > 0){
            if ($result[0]->Age <= 6001 && $result[0]->Body != ''){ //that would be 60 min 1 seconds on MYSQL value
                $pxml = GetXMLTree($result[0]->Body);
                return $pxml;
            }} 
```

我想将值更改`6001`为`1 week`. 谁能告诉我如何计算价值`1 week, 2 weeks and 1 month`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:20:10.430

所以像这样。。

```
$var = 3601; // (60 * 60) + 1
$oneWeek = $var+strtotime("+1 week");
$twoWeek = $var+strtotime("+2 week");
$oneMonth = $var+strtotime("+1 month"); 
```

我在球场上吗？

# c++ - 为什么指针类型的内置关系运算符不在 C++ 中生成总顺序？

> ID：13580825
> 
> 赞同：7
> 
> 时间：2012-11-27T09:16:27.133
> 
> 标签：c++, pointers, comparison

我知道指针的关系运算符仅在有限的情况下提供可靠的结果，并且不能保证它们会生成总顺序。但是，这些运算符的标准函数对象确实具有生成总顺序的特化。

那么是什么阻止了同样的规则适用于内置运算符呢？这似乎并没有简化任何事情，因为这些函数对象仍然需要可靠的比较（通过一些特定于实现的方法）才能工作。

此外，是否可以仅使用内置运算符对指针进行可靠比较？虽然看起来不可能，但我想在这里确认一下。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T09:21:20.100

并不是他们不生成一个总订单，而只是*他们不能保证这样做*。在实践中，它们通常会服从大多数现代硬件的总排序。只是标准不能保证。

当然，一个实现总是可以强迫他们这样做，但它归结为 C++ 指导原则，“你不用为你不使用的东西付费”。在某些 CPU 上，这样做可能会更昂贵。

假设您的 CPU 具有更复杂的地址模型，例如分段地址空间。在这种情况下，确定一个指针是否“大于”另一个指针就不再那么简单了。所以 C++ 标准允许两者：“通常的”弱指针比较规则只保证某些有限情况下的总排序（基本上，当指针指向同一个数组时，它保证是线性和顺序的，并且可以非常有效地实现)，以及诸如`std::less`在某些 CPU 上可能更昂贵的包装函数，但它们确实保证了所有指针的总排序。

# sql - PostgreSQL - 从 LIMIT OFFSET 重复行

> ID：13580826
> 
> 赞同：44
> 
> 时间：2012-11-27T09:16:27.243
> 
> 标签：sql, postgresql, sql-order-by, limit, offset

我注意到分页记录集中有一些重复的行。

当我运行此查询时：

```
SELECT "students".* 
FROM "students" 
ORDER BY "students"."status" asc 
LIMIT 3 OFFSET 0 
```

我得到：

```
 | id | name  | status |
    | 1  | foo   | active |
    | 12 | alice | active |
    | 4  | bob   | active | 
```

下一个查询：

```
SELECT "students".* 
FROM "students" 
ORDER BY "students"."status" asc 
LIMIT 3 OFFSET 3 
```

我得到：

```
 | id | name  | status |
    | 1  | foo   | active |
    | 6  | cindy | active |
    | 2  | dylan | active | 
```

为什么“foo”出现在两个查询中？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-27T09:19:38.527

> *为什么“foo”出现在两个查询中？*

因为返回的所有行都具有相同的`status`列值。在这种情况下，数据库可以自由地以它想要的任何顺序返回行。

如果您想要可重现的排序，则需要在 order by 语句中添加第二列以使其一致。例如 ID 列：

```
SELECT students.* 
FROM students 
ORDER BY students.status asc, 
         students.id asc 
```

如果两行的状态列具有相同的值，它们将按 id 排序。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-06-11T09:13:57.517

有关 PostgreSQL 文档 ( [http://www.postgresql.org/docs/8.3/static/queries-limit.html](http://www.postgresql.org/docs/8.3/static/queries-limit.html) ) 的更多详细信息：

使用 LIMIT 时，***使用 ORDER BY 子句将结果行约束为唯一顺序***很重要。**否则，您将获得查询行的不可预测的子集。**您可能要求第 10 到第 20 行，但第 10 到第 20 行的顺序是什么？排序是未知的，除非您指定了 ORDER BY。

查询优化器在生成查询计划时会考虑 LIMIT，因此根据您为 LIMIT 和 OFFSET 提供的内容，您很可能会获得不同的计划（产生不同的行顺序）。因此，使用不同的 LIMIT/OFFSET 值来选择查询结果的不同子集将产生不一致的结果，除非您使用 ORDER BY 强制执行可预测的结果排序。***这不是错误；这是 SQL 不承诺以任何特定顺序提供查询结果的事实的固有结果，除非使用 ORDER BY 来约束顺序。***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-29T08:40:13.767

```
select * from(
    Select "students".* 
    from "students" 
    order by "students"."status" asc 
    limit 6
) as temp limit 3 offset 0; 
```

```
select * from(
    Select "students".* 
    from "students" 
    order by "students"."status" asc 
    limit 6
) as temp limit 3 offset 3; 
```

其中 6 是正在检查的记录总数。

# php - MySQL 存储过程在 10 秒以上终止连接

> ID：13580829
> 
> 赞同：0
> 
> 时间：2012-11-27T09:16:40.610
> 
> 标签：php, mysql, stored-procedures

如何使用 MySQL 和 PHP 关闭（杀死）执行时间过长的连接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:16:40.610

解决方案是编写一个存储过程，在一段时间内杀死所有连接：

```
DELIMITER //
DROP PROCEDURE IF EXISTS ClearDB//
CREATE PROCEDURE ClearDB()
BEGIN
    DECLARE nID, bCursor INT;
    DECLARE cursorQuery CURSOR FOR 
        SELECT ID
        FROM information_schema.processlist
        WHERE `TIME` > 10;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET bCursor = 1;

    OPEN cursorQuery;
    SET bCursor = 0;

    WHILE bCursor = 0 DO
        FETCH cursorQuery INTO nID;
        KILL nID;
    END WHILE;

    CLOSE cursorQuery;
END //
DELIMITER ; 
```

该过程非常简单：获取 TIME 大于 10 的所有连接 ID，遍历结果并终止它们

您可以创建一个 cron 任务来调用 ClearDB() 过程，或者您可以在每次打开这样的新连接时调用它：

```
$pDB = new mysqli('localhost', 'user', 'pass', 'database');
if ($pDB->connect_error) 
{
    // Handle the error
}
$pDB->query('CALL ClearDB()'); 
```

希望它会帮助某人:)

# javascript - 如何使用jQuery删除数组中和数组之间的重复值

> ID：13580832
> 
> 赞同：0
> 
> 时间：2012-11-27T09:16:53.183
> 
> 标签：javascript, jquery

在我的代码中，我需要找到重复的值并使用 jQuery 发出警报。下面是示例数组和我的要求。请帮忙。

```
 a1 = {1,2,3,4,5,6,4}
            a2= {9,8,7},
            a3= {a,b,c,d,e,7} 
```

在上面的数组中，我需要获取值 4 并发出警报，因为它在数组“a1”中重复，我需要获取值 7，因为它在数组“a2”和“a3”中重复。
我修复的第一个问题如下。需要修复第二个。

```
 for (var $i = 0; $i<= $last; $i++)
        {
        var hours = [];
        var minutes = [];
        var activeTime = [];    
        $.each($('.hour'+$i),function() {
       hours.push($(this).val());    
         });
       $.each($('.hour'+$i).next('select'),function(){
        minutes.push($(this).val());
       });
       for ( var i = 0; i < hours.length; i++ ) {
          activeTime.push(hours[ i ]+":"+minutes[ i ]+":"+"00");
         }
         for ( var i = 0; i <= hours.length; i++ ) {
          if ( hours[ i ] === "" )
           {
          $("#timeValidate"+$i).css("display", "block");
           return false;
           }
            else
             {
            $("#timeValidate"+$i).css("display", "none");
            }
            }
          for(var i=0; i< activeTime.length; i++)
          {
           for(var j = 0; j< activeTime.length; j++)
           {
          if( i != j)
             {
           if(activeTime[j] == activeTime[i])
              {
            $("#timeValidate"+$i).text("");
            $("#timeValidate"+$i).text("active time"+activeTime[j]+" is repeating");
             $("#timeValidate"+$i).css("display", "block");
            return false;
            }
            }
             }
            }
           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:37:56.070

```
function getDuplicatesFromArrays() {
    var allItems = Array.prototype.concat.apply([], arguments);
    var duplicates = [];
    var hash = {};

    allItems.forEach(function(x) {
        if(hash.hasOwnProperty(x)) duplicates.push(x);
        hash[x] = 1;
    });

    return duplicates;
} 
```

上面的函数接受任意数量的数组，并产生副本：

```
getDuplicatesFromArrays(a1,a2,a3) // [4, 7] 
```

[演示](http://jsfiddle.net/ZL64c/)

它作为一种反向哈希筛工作；仅当项目已经在哈希中时才添加到重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:36:56.933

干得好：

```
var original = [].concat(a,b,c),
    dupes = [];
for (var c = 0; c < original.length; c++) {
    if (original.filter(function(v) {
        return v == original[c];
    }).length > 1) {
        dupes.push(original[c]);
    }
}
alert($.grep(dupes, function(v, k){return $.inArray(v , dupes) === k;})); 
```

这是一个演示：http: [//jsfiddle.net/q2c42/](http://jsfiddle.net/q2c42/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:38:09.023

试试[sugar.js](http://sugarjs.com/api)，它具有用于数组（和其他）的高级功能。例如，您可以使用 unique() 和 subtract() 的组合来获取仅包含重复元素的数组。然后你可以解析它并为每一个发出警报。

# javascript - 如何找出网页上发生特定事件后运行的 Javascript 代码？

> ID：13580842
> 
> 赞同：2
> 
> 时间：2012-11-27T09:17:15.180
> 
> 标签：javascript, dom-events, firebug

我想为这个网站写一个书签。为此，我需要找出单击某些链接时运行的 Javascript 代码。链接格式为`<a href="#" class="i-am-special">Do something</a>`，因此我没有`onclick`属性可以查看运行的代码。

那么我该如何实现这个目标呢？我想我需要使用像 Firefox 中的 Firebug 或 Chrome 中的开发者工具这样的浏览器插件。

对不起，如果这已经回答过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:39:29.760

您可以使用 Firebug for Firefox 或 Chrome 的内置 DOM/JavaScript 控制台来查找事件侦听器。它会给你函数调用/名称，搜索这个名称的代码......

# jquery - Python Spynner - jQuery 调用失败

> ID：13580847
> 
> 赞同：0
> 
> 时间：2012-11-27T09:17:32.577
> 
> 标签：jquery, python, code-injection, spynner

编辑：虽然解决了原始问题，但代码实际上并没有做任何事情。在 Chrome 中测试，它会在密码框中插入“hi”。在 Spynner 中，它只是加载页面。

我正在尝试使用 Spynner 来抓取我学校用来提供在线时间表的网站。出于某种原因，我总是收到以下错误：

```
Run Javascript code: jq("[class^=login-text-box]").val("hi")
Javascript console: ReferenceError: Can't find variable: jq 
```

这是由以下代码引起的：

```
import spynner

browser = spynner.Browser()
browser.debug_level = 3;
browser.show()
browser.load("http://web.edval.com.au/#publicaccess")
browser.runjs('_jQuery("[class^=login-text-box]").val("hi")')
browser.close() 
```

我也试过：

```
import spynner

browser = spynner.Browser()
browser.debug_level = 3;
browser.jslib = 'jq'
browser.show()
browser.load("http://web.edval.com.au/#publicaccess")
browser.runjs('jq("[class^=login-text-box]").val("hi")')
browser.close() 
```

同样缺乏成功。将 JavaScript 命令粘贴到 Chrome 的 JS 控制台（在我注入 jQuery 之后）效果很好。

请问有人可以提供一些帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:31:25.737

没关系，尽管文档说 jQuery 将作为 _jQuery 加载，但它实际上是作为 $ 加载的。我通过将代码更改为：

```
import spynner

browser = spynner.Browser()
browser.load_jquery(True)
browser.debug_level = 3;
browser.show()
browser.load("http://web.edval.com.au/#publicaccess")
browser.runjs(browser.jslib+'("[class^=login-text-box]").val("hi")')
browser.close() 
```

请注意，runjs 现在实际上检查 browser.jslib。

# c# - 正则表达式重复组

> ID：13580848
> 
> 赞同：4
> 
> 时间：2012-11-27T09:17:36.607
> 
> 标签：c#, regex

捕获重复组总是返回最后一个元素，但这并不是很有帮助。例如：

```
var regex = new RegEx("^(?<somea>a)+$");
var match = regex.Match("aaa");
match.Group["somea"]; // return "a" 
```

我想要一个匹配元素的集合而不是最后一个匹配项。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T09:19:19.070

# 捕获集合

您可以使用`CaptureCollection`which 表示`captures`由单个捕获组制作的集合。

如果 a`quantifier`未应用于捕获组，则`CaptureCollection`包含一个`Capture`对象，该对象表示与 Group 对象相同的捕获子字符串。

如果将 a`quantifier`应用于捕获组，则`CaptureCollection`每个捕获的子字符串都包含一个 Capture 对象，并且该`Group`对象仅提供有关**最后**捕获的子字符串的信息。

所以你可以这样做

```
var regex = new Regex("^(?<somea>a)+$");
var match = regex.Match("aaa");
List<string> aCaptures=match.Groups["somea"]
                            .Captures.Cast<Capture>()
                            .Select(x=>x.Value)
                            .ToList<string>();

//aCaptures would now contain a list of a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:22:06.580

看看`Captures`集合：

```
match.Groups["somea"].Captures 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:20:42.350

如果您量化将创建与匹配项一样多的组的组，则必须将量词 + 用于要匹配的事物，而不是组。

因此`(a)+`，`aaa`将创建 1 个组并将匹配替换为新出现的匹配，`(a+)`并将创建 1 个组`aaa`

所以你知道如何处理你的问题，只需在捕获组内移动 + 即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:22:58.233

您也可以尝试这样的事情：

```
var regex = new RegEx("^(?<somea>a)+$");
var matches = regex.Matches("aaa");
foreach(Match _match in matches){
    match.Group["somea"]; // return "a"
} 
```

这只是一个示例，但它应该是一个好的开始。虽然我没有检查你的正则表达式的有效性

# scope - Java 脚本中的变量范围

> ID：13580850
> 
> 赞同：1
> 
> 时间：2012-11-27T09:17:38.957
> 
> 标签：scope, global-variables

Arrow_onmouseover 与对象的“onmouseover”事件相关联。当 onmouseover 事件发生时，我收到“未定义时间线”JS 错误。我知道这与变量范围有关。我该如何纠正这一点。

```
function startloop()
{
    var changer = setInterval("changecontents();", 2000);
    var timeline = setInterval("change();", 2000);  
}

window.onload = startloop();

function arrow_onmouseover()
{ 
window.clearInterval(timeline);
window.clearInterval(changer);
} 
```

另外，称为 Function(); 的函数有什么区别？和功能；. 我相信这在这里也可能是相关的，因为它极大地影响了变量的范围。

即有什么区别

```
onclick="js();" and onclick="js;" or onclick="js" 
```

其中 JS 是一个已定义的 Java Script 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:25:20.447

像这样更改您的代码。

```
var timeline,changer;
function startloop()
{
    changer = setInterval("changecontents();", 2000);
    timeline = setInterval("change();", 2000);  
}

window.onload = startloop();

function arrow_onmouseover()
{ 
window.clearInterval(timeline);
window.clearInterval(changer);
} 
```

和...之间的不同

> onclick="js();" 和 onclick="js;" 或 onclick="js"

如果您的 js 函数没有任何要接收的参数，您可以简单地避免 ()，例如如果您想获取日期，您可以调用 new Date(); 但您可以简单地调用新日期；

# nosql - 何时使用什么数据库？ie 选择要使用的数据库时应该看哪些参数？

> ID：13580851
> 
> 赞同：2
> 
> 时间：2012-11-27T09:17:40.350
> 
> 标签：nosql, bigdata, graph-databases, key-value-store, document-database

我正在开发一个具有多个模块的系统，

1.  社交媒体用户人口统计 - （文档） - 姓名、地点、兴趣、工作、教育
2.  社交媒体用户连接 - （图表） - 朋友
3.  CRM - （行和列） - 电信 + 银行等

仅举几例。我很确定我已经在每一项中都跨越了数百万条记录。

当我寻找可供选择的 NoSql 数据库时，每个类别中至少有 10 个。对于 Document 数据库，我有一个从`MongoDB`到的数组列表`DjonDB`。当我寻找图形数据库时，情况也是如此，依此类推。我还在[http://nosql-database.org/](http://nosql-database.org/)看到了其他键值存储数据库、列式数据库等。

所以我想知道在这些数据库中选择时是否应该遵循任何通用的拇指规则，当列式数据库被优化时，键值存储最适合哪种类型的数据等等。

对于什么类型的数据，最适合的数据库是什么？为什么？最重要的是，对于什么类型的数据最不适合的数据库是什么？为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T23:27:03.570

这是一个非常开放的问题，但我会试一试。

需要记住的一些事项：

1.  选择一个围绕它有一个很棒（不是很好，很棒）社区的数据库。您可能会发现 FooDB，它声称可以做您想做的一切，但没有人为它做出贡献，那么您将围绕一项死技术构建您的应用程序。您需要积极的贡献，大量的客户进行生产部署，理想情况下，它的第一个版本中没有。

2.  尝试找到可以很好地协同工作的技术。例如，Elastic Search、MongoDB、CouchDB、Couchbase 或多或少都使用 JSON。这应该可以帮助您缩小对技术的选择范围。

3.  我不会试图让自己太瘦。每种类型的数据库（图形、文档、行/列、键值对）都有自己的学习曲线。学习如何以非规范化方式对数据建模需要相当长的时间。您拥有的种类越多，维护所有这些不同的数据库就越困难。

4.  我不知道为什么我很少将此视为建议，但我会选择您真正喜欢开发的东西。查询语法是否看起来直观且有趣？如果没有，你会讨厌在其中发展。这不是最重要的因素，但我认为应该考虑。

# java - 弹簧属性优先级

> ID：13580858
> 
> 赞同：2
> 
> 时间：2012-11-27T09:17:58.833
> 
> 标签：java, spring, properties, intellij-idea

我有标准的 Maven 文件夹结构：

```
src/main/java  
src/main/resources  
src/test/java  
src/test/resources 
```

我的 appicationContext 包含以下内容：

```
<!-- load properties files -->
<context:property-placeholder location="classpath*:*.properties"/> 
```

我已经定义了 2 个`hibernate.properties`文件 - 一个`src/main/resources`用于`src/ test/resources`. 我曾预计，当我运行测试时，我的测试`hibernate.properties`将覆盖生产`hibernate.properties`。而不是加载两个文件并使用生产版本：

```
Loading properties file from file [D:\projects\video_crawler_v3\out\test\core\hibernate.properties]
Loading properties file from file [D:\projects\video_crawler_v3\out\production\core\hibernate.properties] 
```

如何正确设置我的属性文件？我正在使用 Intellij IDEA 编译和运行测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:31:01.357

选项之一是 Spring Profiles [http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)

在您的 context.xml 中放置两个“属性”版本，例如：

```
<beans>

   ... your beans

    <beans profile="prod">
        <context:property-placeholder location="classpath:/hibernate.properties" />
    </beans>

    <beans profile="test">
        <context:property-placeholder location="classpath:/test-hibernate.properties" />
    </beans>
</beans> 
```

使用 -Dspring.profiles.active=test 激活所需的配置文件。

注意：使用 www.springframework.org/schema/beans/spring-beans-3.1.xsd

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:44:16.283

src/main/resources 中的文件总是添加到类路径中，即使在运行单元测试时也是如此。请参阅：[为不同环境定义 Spring bean 时的常用策略](https://stackoverflow.com/questions/3484591/common-strategies-when-defining-spring-beans-for-different-environments)

# java - 在java中注销后如何删除特定用户的完整会话？

> ID：13580863
> 
> 赞同：1
> 
> 时间：2012-11-27T09:18:18.693
> 
> 标签：java, ajax

> **可能重复：**
> [注销后用户也在执行操作，我必须编写什么代码来防止该注销用户？](https://stackoverflow.com/questions/13620809/after-logout-also-user-is-performing-operations-what-code-i-have-to-write-to-pr)

如何删除特定用户的完整会话，在他注销后，在java中？。我的意思是用户不能在该网站上执行任何操作而无需再次登录。每当用户点击“注销”时，他应该被视为欢迎页面和后退按钮不应该工作。任何人都可以帮助......？

# stanford-nlp - 从 jar 文件加载分类器时出错 - 斯坦福 NER

> ID：13580864
> 
> 赞同：4
> 
> 时间：2012-11-27T09:18:22.423
> 
> 标签：stanford-nlp

我正在尝试从斯坦福 NER 项目运行加载分类器/模型（english.muc.7class.dissim.crf.ser）。此文件在项目的分类器文件夹中为 RAR 格式。但出现以下错误：

> 从 jar 文件加载分类器时出错（很可能您没有从 jar 文件运行此代码，或者命名的分类器未存储在 jar 文件中）

我已经检查了路径。它是正确的。还检查了 gz 扩展名。但没有得到结果。几个月前我在 jdk 1.6 中运行了相同的代码。现在正在使用 jdk 1.5 编译相同的代码。分类器存储在文件夹中，也没有运行 JAR 文件中的代码。还尝试提取并给出该文件名。但仍然是同样的错误。请指导我。

# php - 卷曲多次

> ID：13580867
> 
> 赞同：0
> 
> 时间：2012-11-27T09:18:26.773
> 
> 标签：php, curl, cron

```
$hotel_query = "select hotel_id,hotel_name,trip_url,automatic_status from hotels where automatic_status='0'";
$hotel_result = mysql_query($hotel_query) or die(mysql_error());
while($hotel_row = mysql_fetch_object($hotel_result))
{
     $url=$hotel_row->trip_url;
     $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $result = curl_exec($ch);
    curl_close($ch);
    echo curl_error($ch);
    echo $result;
} 
```

上面的代码是通过 php 中的 cron 作业运行的。hotels 中有 5 个 trip_url `table`。这意味着 curl 应该执行 5 次并从服务器返回 5 次结果，但是当我运行它时，只打印一个结果并停止执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:40:22.390

试试这个：

```
<?php

function curl_download($Url){

    // is cURL installed yet?
    if (!function_exists('curl_init')){
        die('Sorry cURL is not installed!');
    }    
    // OK cool - then let's create a new cURL resource handle
    $ch = curl_init();    
    // Now set some options (most are optional)    
    // Set URL to download
    curl_setopt($ch, CURLOPT_URL, $Url);    
    // Set a referer
    curl_setopt($ch, CURLOPT_REFERER, "http://www.example.org/yay.htm");    
    // User agent
    curl_setopt($ch, CURLOPT_USERAGENT, "MozillaXYZ/1.0");    
    // Include header in result? (0 = yes, 1 = no)
    curl_setopt($ch, CURLOPT_HEADER, 0);    
    // Should cURL return or print out the data? (true = return, false = print)
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);    
    // Timeout in seconds
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);    
    // Download the given URL, and return output
    $output = curl_exec($ch);    
    // Close the cURL resource, and free system resources
    curl_close($ch);    
    return $output;
}

$loop_counter = 1;
$hotel_query = "select hotel_id,hotel_name,trip_url,automatic_status from hotels where automatic_status='0'";
$hotel_result = mysql_query($hotel_query) or die(mysql_error());
while($hotel_row = mysql_fetch_object($hotel_result)){
     $url=$hotel_row->trip_url;
    echo "Loop no.".$loop_counter."<br />";
    echo curl_download($url);
    $loop_counter++;
}

?> 
```

CURL 代码来自[这里](http://www.jonasjohn.de/snippets/php/curl-example.htm)

# java - 更改 Web 应用程序的 URL 以进行部署

> ID：13580868
> 
> 赞同：1
> 
> 时间：2012-11-27T09:18:34.267
> 
> 标签：java, struts

我已经使用 STRUTS 2.0 开发了一个基于 Web 的应用程序，我想部署它。我想部署两个或多个不同的实例，一个用于用户测试，一个用于生产等。我想添加命名空间，例如我的 URL 必须是

http:\mysitename\abc\development\login.jsp 用于开发环境 http:\mysitename\abc\testing\login.jsp 用于测试环境。

我正在考虑为我的项目创建一个单独的副本，一个用于测试，一个用于开发等等。

但是我可以做一些事情，比如在 URL 中添加开发或测试等名称，以便可以轻松识别正在运行的环境。并且我不需要更改项目中的图像路径和 css 文件路径。

像编辑我的 struts.xml 或 web.xml

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:25:31.520

> 我想添加命名空间，例如我的 URL 必须是 http:\mysitename\abc\development\login.jsp 用于开发环境 http:\mysitename\abc\testing\login.jsp 用于测试环境。

您可以改为部署不同的应用程序上下文。喜欢`http://host/dev`并`http://host/test/`为此您不需要在配置文件中做任何特别的事情。您可以使用名称 dev.war 或 test.war（或重命名）生成战争，然后部署它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:27:30.033

如果你做得正确并且你没有在你的 web 应用程序代码中硬编码你的上下文路径，那么就没有这样的努力。

这是我用来做的事情：

1 - 编写在所有 jps 中导入的 JSP。让我们调用它`taglibs.jsp`并定义一个包含动态获取的上下文路径的变量。

```
...
<c:set var="ctx" value="${pageContext.request.contextPath}"/>
... 
```

`taglibs.jsp`2 -在你想使用它的jsp中导入，这样你就可以使用变量：

```
<%@ include file="/taglibs.jsp"%> 
```

3 - use `ctx` variable:

The same for images, javascript and whatever.

So, doing this, your application will not depend on the context path and for having to different versions you just need to change the war name.

# java - App Engine Java blob 删除已超过截止日期

> ID：13580872
> 
> 赞同：0
> 
> 时间：2012-11-27T09:18:58.273
> 
> 标签：java, google-app-engine, blobstore

我们有一个相当精细的 App Engine Java 应用程序，它与 blob 商店大量工作。出于某种原因，一位用户（这是为其他用户工作的）在上传代码时遇到超时错误（这会删除一些旧的 blob）。它不会删除很多 blob（不超过 10 个），所以我不确定发生了什么，但他能够多次重复此问题，直到问题突然自行解决...

我担心它会在未来开始为其他用户出现，我宁愿不清理 blob 而不是失败。

将来我可能会更改我们的架构，只使用后台 cron 作业来查找未被任何人引用的 blob 并删除它们，但如果有人能阐明这个问题，我会很高兴。

```
Uncaught exception from servlet
com.google.apphosting.api.DeadlineExceededException: This request (7e6f710cb810ed92) started at 2012/11/27 08:59:54.585 UTC and was still executing at 2012/11/27 09:00:54.028 UTC.
    at sun.misc.Unsafe.park(Native Method)
    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1037)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1326)
    at com.google.common.util.concurrent.AbstractFuture$Sync.get(AbstractFuture.java:275)
    at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:96)
    at com.google.appengine.tools.development.TimedFuture.get(TimedFuture.java:55)
    at com.google.common.util.concurrent.ForwardingFuture.get(ForwardingFuture.java:69)
    at com.google.apphosting.runtime.ApiProxyImpl.doSyncCall(ApiProxyImpl.java:212)
    at com.google.apphosting.runtime.ApiProxyImpl.access$000(ApiProxyImpl.java:66)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:183)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:180)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:180)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:66)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:107)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:56)
    at com.google.appengine.api.blobstore.BlobstoreServiceImpl.delete(BlobstoreServiceImpl.java:125) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:25:33.087

您面临的例外是`DeadlineExceededException`. 您似乎已经通过 HTTP 请求或在 Google App Engine 上托管的 Web 应用程序内部调用了您的代码。

所有 HTTP 请求都限制在 60 秒内完成工作并返回。如果不是，App Engine 会引发此异常。简而言之，当一个应用程序被调用来服务一个 Web 请求时，它必须在 60 秒内发出响应。

Cron Jobs 的情况并非如此，它们在收到`DeadlineExceededException`.

因此，您所面临的行为是正常的，并且由 App Engine 控制。我建议您通过将这项工作转移到 Cron Jobs 来解决这个问题，因为：

*   您将有 10 分钟的时间来完成您的工作
*   万一 10 分钟还不够，您可能想要捕获`DeadlineExceededException`并重新创建另一个任务，并使用一个参数指示 Cron 作业从上次的位置起飞。

如果以上都不符合您的条件，请尝试在 AppEngine 中探索没有限制的[后端。](https://developers.google.com/appengine/docs/java/backends/overview)

# macos - 添加 vhosts 定义后 xamppfiles/htdocs 在 http 上不可见，但仍可通过 https 访问

> ID：13580874
> 
> 赞同：0
> 
> 时间：2012-11-27T09:19:04.357
> 
> 标签：macos, apache, vhosts

我有这样的虚拟主机：

```
NameVirtualHost *:80
<VirtualHost *:80>        
    ServerName  local.testing.com    
     DocumentRoot "/Users/myname/Sites/myapp"  
    DirectoryIndex index.html
     <Directory /Users/myname/Sites/myapp>   
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Order Allow,Deny
        Allow From All
    </Directory>    
</VirtualHost> 
```

***热点文件***

```
127.0.0.1   localhost
127.0.0.1   local.testing.com
::1             localhost 
```

启用此虚拟主机后，我无法通过 http 访问 xampp/htdocs 下的任何站点。但它们可以通过 https 访问

当我访问 localhost 它显示目录列表：`"/Users/myname/Sites"`

请帮我解决这个问题，

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:22:56.627

所以问题是我们需要一个用于**localhost** e的**虚拟主机。**g[喜欢这个 SOQ](https://stackoverflow.com/questions/10981174/apache-virtualhost-and-localhost)

 **```
<VirtualHost *:80>
   DocumentRoot "/Applications/XAMPP/xamppfiles/htdocs"
   ServerAlias localhost
   ServerName localhost
</VirtualHost> 
```**

# python - 时间序列数据的运行平均值/频率？

> ID：13580875
> 
> 赞同：2
> 
> 时间：2012-11-27T09:19:07.823
> 
> 标签：python, algorithm, numpy, pandas, average

给定一个数据集，例如：

```
[2, 3, 4, 5, 6, 7, 8, 9, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 65, 75, 85, 86, 87, 88] 
```

这些值总是在增加（实际上是时间），我想找出这些值之间的运行平均距离。我实际上是在尝试确定数据何时从“每秒 1”变为“每 5 秒 1”（或任何其他值）。

我在 Python 中实现这个，但任何语言的解决方案都是最受欢迎的。

我正在寻找上面的示例输入的输出将类似于：

```
[(2, 1), (10, 5), (55, 10), (85, 1) ] 
```

其中，“2”表示值之间的距离从“1”开始的位置，“10”表示距离变为“5”的位置。（它必须*准确地*存在，如果稍后检测到转移，那没关系。）

我正在寻找值之间的平均距离何时发生变化。我意识到在算法的稳定性和对输入变化的敏感性之间会有某种权衡。

[（顺便说一句， [Pandas](http://pandas.pydata.org/)或[NumPy](http://numpy.scipy.org/)有用吗？）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:13:10.030

您可以像这样使用 numpy 或 pandas（“pandas 版本”）：

```
In [256]: s = pd.Series([2, 3, 4, 5, 6, 7, 8, 9, 10, 15, 20, 25, 30, 35,
                             40, 45, 50, 55, 65, 75, 85, 86, 87, 88])

In [257]: df = pd.DataFrame({'time': s,
                             'time_diff': s.diff().shift(-1)}).set_index('time')

In [258]: df[df.time_diff - df.time_diff.shift(1) != 0].dropna()
Out[258]: 
      time_diff
time           
2             1
10            5
55           10
85            1 
```

如果您只想查看每个时间步的第一次出现，您还可以使用：

```
In [259]: df.drop_duplicates().dropna() # set take_last=True if you want the last
Out[259]: 
      time_diff
time           
2             1
10            5
55           10 
```

但是对于 pandas，您通常会使用 a`DatetimeIndex`来使用内置的时间序列功能：

```
In [44]: a = [2, 3, 4, 5, 6, 7, 8, 9, 10, 15, 20, 25, 30, 35,
              40, 45, 50, 55, 65, 75, 85, 86, 87, 88]

In [45]: start_time = datetime.datetime.now()

In [46]: times = [start_time + datetime.timedelta(seconds=int(x)) for x in a]

In [47]: idx = pd.DatetimeIndex(times)

In [48]: df = pd.DataFrame({'data1': np.random.rand(idx.size), 
                            'data2': np.random.rand(idx.size)},
                           index=idx)

In [49]: df.resample('5S') # resample to 5 Seconds
Out[49]: 
                        data1     data2
2012-11-28 07:36:35  0.417282  0.477837
2012-11-28 07:36:40  0.536367  0.451494
2012-11-28 07:36:45  0.902018  0.457873
2012-11-28 07:36:50  0.452151  0.625526
2012-11-28 07:36:55  0.816028  0.170319
2012-11-28 07:37:00  0.169264  0.723092
2012-11-28 07:37:05  0.809279  0.794459
2012-11-28 07:37:10  0.652836  0.615056
2012-11-28 07:37:15  0.508318  0.147178
2012-11-28 07:37:20  0.261157  0.509014
2012-11-28 07:37:25  0.609685  0.324375
2012-11-28 07:37:30       NaN       NaN
2012-11-28 07:37:35  0.736370  0.551477
2012-11-28 07:37:40       NaN       NaN
2012-11-28 07:37:45  0.839960  0.118619
2012-11-28 07:37:50       NaN       NaN
2012-11-28 07:37:55  0.697292  0.394946
2012-11-28 07:38:00  0.351824  0.420454 
```

从我的角度来看，对于时间序列，Pandas 是迄今为止 Python 生态系统中可用的最好的库。不知道你真的想做什么，但我会试试 pandas。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:24:32.463

在 Python 中：

```
a = [2, 3, 4, 5, 6, 7, 8, 9, 10, 15, 20, 25, 30, 34, 40, 45, 46, 50, 55]
# zip() creates tuples of two consecutive values 
# (it zips lists of different length by truncating longer list(s))
# then tuples with first value and difference are placed in 'diff' list
diff = [(x, y-x) for x, y in zip(a, a[1:])]
# now pick only elements with changed difference 
result = []
for pair in diff:
    if not len(result) or result[-1][1]!=pair[1]: # -1 to take last element
        result.append(pair) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T10:03:44.907

```
a = [2, 3, 4, 5, 6, 7, 8, 9, 10, 15, 20, 25, 30, 34, 40, 45, 46, 50, 55]

ans = [(a[0], a[1]-a[0])]
for i in range(1, len(a)-1):
    if a[i+1] - a[i] - a[i] + a[i-1] is not 0:
        ans.append((a[i], a[i+1]-a[i]))

print ans 
```

输出：

```
[(2, 1), (10, 5), (30, 4), (34, 6), (40, 5), (45, 1), (46, 4), (50, 5)] 
```

是你想要的吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T10:06:26.303

这个生成器怎么样：

```
L = [2, 3, 4, 5, 6, 7, 8, 9, 10, 15, 20, 25, 30, 34, 40, 45, 46, 50, 55]

def differences_gen(L, differences):
    previous = L[0]
    differences = iter(differences + [None])
    next_diff = next(differences)
    for i, n in enumerate(L[1:]):
        current_diff = n - previous
        while next_diff is not None and current_diff >= next_diff:
            yield (previous, next_diff)
            next_diff = next(differences)
        previous = n

list(differences_gen(L, [1,5]))
# [(2, 1), (10, 5)] 
```

*可能有一种更简洁的方法来迭代分区，但是使用生成器应该可以让它在更长的时间内保持高效，`L`并且`differences`.*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-27T11:14:09.903

我喜欢通过 使用窗口函数`islice`，它非常有用，我发现自己经常重复使用它：

```
from itertools import islice

def window(seq, n=2):
    """
    Returns a sliding window (of width n) over data from the iterable
    s -> (s0,s1,...s[n-1]), (s1,s2,...,sn), ...                   
    """
    it = iter(seq)
    result = tuple(islice(it, n))
    if len(result) == n:
        yield result
    for elem in it:
        result = result[1:] + (elem,)
        yield result

# Main code:
last_diff = None
results = []
for v1, v2 in window(a):
    diff = abs(v1 - v2)
    if diff != last_diff:
        results.append((v1, diff))
    last_diff = diff 
```

结果：

```
[(2, 1), (10, 5), (30, 4), (34, 6), (40, 5), (45, 1), (46, 4), (50, 5)] 
```

# css - 浮动 IMG 调整大小百分比

> ID：13580876
> 
> 赞同：0
> 
> 时间：2012-11-27T09:19:09.053
> 
> 标签：css, image-resizing

我正在尝试与容器成比例地调整 img 的大小。IMG 向左浮动，周围有一个段落。

HTML：

```
<div>
<img src="picture.png">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla vestibulum venenatis      libero, eu egestas elit laoreet nec. Donec in nunc dictum nunc luctus eleifend sagittis id augue.</p>
</div>​ 
```

CSS：

```
div {
    width: 80%;
}
img {
    max-width: 100%;
    float: left;
    margin: 0 10px 10px 0;
} 
```

​只有当左 div 边框碰到图像并且段落完全低于 img 时，图像才会调整大小。我想在 div 调整大小后立即调整 img 的大小。我知道我可以将 img 放在一个包装 div 中并给它一个百分比宽度，但如果可能的话，我想要一个更清洁的解决方案。

JSFiddle：http: [//jsfiddle.net/989uX/](http://jsfiddle.net/989uX/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:35:03.390

'max-width' CSS 属性设置 IMG 元素的最大内容宽度。换句话说，即使你设置了更大的宽度，这个元素也永远不会变宽。如果你想重新调整元素的大小，你应该使用'width'属性而不是'max-width'。该属性还接受百分比值（如上面提到的 Passerby）。请注意，元素的百分比值是指包含块的宽度。

# python - 水平和垂直标记化

> ID：13580881
> 
> 赞同：1
> 
> 时间：2012-11-27T09:19:22.080
> 
> 标签：python, nlp, context-free-grammar

我有一个句子以及树形的语法。我需要从中训练一个概率上下文无关语法，以便我可以为它提供最好的解析。我正在使用 Viterbi CKY 算法来获得最佳解析。句子的树形格式如下： NP（明天NN））））））（PUNC。））

我已经建立了一个系统，它从 Penn Treebank 的 ATIS 部分学习了概率语法，现在可以为上述句子提供可能的解析输出。

我阅读了水平和垂直马尔科夫化技术，这些技术可以通过使用注释来帮助提高准确性。我对它们的工作方式有点困惑。有人可以指导我一些解释性示例或说明它们如何工作以及它们如何影响准确性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:10:51.690

值得一看的是 Klein 和 Manning 的这篇论文：

[http://nlp.stanford.edu/~manning/papers/unlexicalized-parsing.pdf](http://nlp.stanford.edu/~manning/papers/unlexicalized-parsing.pdf)

垂直马尔可夫化是一种为给定规则提供上下文的技术。从上面的论文：

> 例如，主语 NP 扩展与宾语 NP 扩展非常不同：主语 NP 仅作为代词扩展的可能性是宾语 NP 的 8.7 倍。对主语和宾语 NP 使用单独的符号可以捕获这种变化并用于改进解析评分。捕获这种外部上下文的一种方法是使用父注释，如 Johnson (1998) 所述。例如，具有 S 父母（如主体）的 NP 将被标记为 NP^S，而具有 VP 父母（如客体）的 NP 将被标记为 NP^VP。

通过使用此附加父注释重写这些规则，我们正在添加有关您正在重写的规则的位置的信息，并且此附加信息提供了特定规则重写的更准确概率。

这个实现非常简单。使用训练数据，从底部的非终结符开始（这些是重写为 DT、NNP、NN、VB 等终结符的规则），并在其父非终结符后附加一个 ^。在您的示例中，第一次重写将是 NP^S，依此类推。继续上树，直到到达 TOP（您不会重写）。在您的情况下，最终的重写将是 S^TOP。剥离输出中的标签将为您提供最终的解析树。

至于水平马尔可夫化，请参阅此线程以获得很好的讨论： [水平马尔可夫化](https://stackoverflow.com/questions/12884411/horizontal-markovization)。

# ios - 如何清除不指向自己代码的废弃内存？

> ID：13580883
> 
> 赞同：2
> 
> 时间：2012-11-27T09:19:27.183
> 
> 标签：ios, instruments, abandoned-memory

似乎我的应用程序正在放弃内存，因为记录的堆的持久内存不会降至零，并且当连续重复同一组操作时堆继续增长： ![在此处输入图像描述](../Images/e1d74aa93fffbf7870a13dcd5900b0b2.png)

为了找出问题，很多人建议[比尔的网站](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)对我没有用，因为我使用的是 ARC，而他指出了参考问题。然后，我关注了[Apple 文档](http://developer.apple.com/library/ios/#recipes/instruments_help-memory-allocations-help/Finding_Abandoned_Memory/07_Finding_Abandoned_Memory.html)并观看了一些与 WWDC 废弃内存相关的视频。他们都说工具将有助于指出可能导致问题的代码行。因此，我查看了每个对象，但没有看到与我的代码相关的任何内容：

![在此处输入图像描述](../Images/63612759f65bfdf8e85d1762306bc06e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:25:10.663

我认为您需要明确查找保留周期。当在层次结构中，您有一个具有相关对象并且都具有强类型属性的父对象对象时，它们将永远不会从内存中释放。

快速示例：

```
@interface Parent : NSObject
@property (strong) Child *child;
@end
@interface Child : NSObject
@property (strong) Parent *parent;
@end 
```

默认情况下，属性是强的，所以如果你根本不声明它也是一样的。

它应该是这样的：

```
@interface Parent : NSObject
@property (strong) Child *child;
@end
@interface Child : NSObject
@property (weak) Parent *parent;
@end 
```

我还发现了 Instruments 可以向您显示保留周期的信息（而且看起来不错）。更多详细信息[如何在 ARC 下的 Instruments 中激活 Cycles 报告？](https://stackoverflow.com/questions/8852451/how-to-activate-cycles-reporting-in-instruments-under-arc)但是我不知道它是否适用于 ARC，评论可能表明它不适用。作为一种繁琐的方式，我建议您注释掉一些您认为可能负责的代码，然后检查图片。

* * *

这就是保留周期。您应该寻找的另一件事是当您分配 ARC 无法返回的内存时。这些调用看起来像 C 函数，并且按照惯例，名称中有一个单词 Create。每次你做出这样的指针时，你也应该自己清理。只是给你一些例子：

*   CGColorCreate - CGColorRelease
*   CGColorSpaceCreateWithName - CGColorSpaceRelease
*   CGBitmapContextCreate - CGContextRelease

正如你所看到的，每个函数都有它对应的发布函数，通常你应该能够在文档中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:07:45.957

似乎**使用 dSYM 文件将****Build Settings\Build Options\Debug Information Format**从**DWARF**更改为DWARF将解决问题。

 **![在此处输入图像描述](../Images/4dcd7af9bd2799cc32025b61eb01b017.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:36:54.833

或者您正在打开 Zombies 进行测试（编辑方案 - 诊断）。如果僵尸被打开，它们永远不会被删除，因此内存总是会增长。**

# mysql - 每行的Mysql子查询

> ID：13580885
> 
> 赞同：0
> 
> 时间：2012-11-27T09:19:29.307
> 
> 标签：mysql

我正在尝试显示一个矩阵表，其中包含某个类别中供应商的结果。喜欢：

```
+-----------+-------------+-------------+------+
|           | Category 1  | Category 2  | ...  |
+-----------+-------------+-------------+------+
| Vendor 1  |       8900  |          0  | ...  |
| Vendor 2  |      56890  |       4000  | ...  |
|      ...  |        ...  |        ...  | ...  |
+-----------+-------------+-------------+------+ 
```

我已经查询了一个供应商：

```
SELECT ut.unit_name, IFNULL(SUM(commission_fix_out),0)
FROM transaction t
JOIN office_per_transaction opt
ON t.id = opt.transaction_id
JOIN_vendor_per_transaction ppt
ON t.id = ppt.transaction_id
AND ppt.vendor_id = 2
RIGHT JOIN unit_type ut
ON t.unit_type_id = ut.id
AND transaction_end_week BETWEEN 0 AND 14
AND YEAR(transaction_end_date) = 2012
GROUP BY ut.id 
```

这给了我以下结果：

```
+-------------+---------+
| Category    | Result  |
+-------------+---------+
| Category 1  |  56890  |
| Category 2  |   4000  |
|        ...  |    ...  |
+-------------+---------+ 
```

现在我想查看给定办公室中每个供应商的此查询的串联。

首先，我尝试替换`AND ppt.vendor_id = 2`为，`AND ppt.vendor_id IN (SELECT id FROM vendor WHERE office_id = 1)`但这给了我该办公室所有供应商的总结果。

其次，我尝试使用子查询。但这给了我一个错误，说明**unknown column**。

我想要实现的是一个结果集，例如：

```
+-----------+--------- -------+
| Vendor    | Results         |
+-----------+-----------------+
| Vendor 1  | 8900,0,...      |
| Vendor 2  | 56890,4000,...  |
| ...       | ...,...,...     |
+-----------+-----------------+ 
```

我是否正在尝试一些不切实际的事情，我是否应该对每个供应商执行上述查询。或者我在这里错过了什么？

@SashiKant我最近几天尝试了很多查询，但它是这样的：

```
SELECT v.id, GROUP_CONCAT(r.result) FROM vendor v, 
   ( SELECT ut.unit_name, IFNULL(SUM(commission_fix_out),0) as result 
     FROM transaction t JOIN office_per_transaction opt ON t.id = opt.transaction_id 
     JOIN vendor_per_transaction ppt ON t.id = ppt.transaction_id 
     AND ppt.vendor_id = p.id 
     RIGHT JOIN unit_type ut ON unit_type_id = ut.id 
     AND transaction_end_week BETWEEN 0 AND 14 
     AND YEAR(transaction_end_date) = 2012 GROUP BY ut.id) as r 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:36:34.853

您可能需要加入供应商表以获取您想要的供应商（而不是单个供应商）。此外，您需要在 GROUP BY 中使用更多子句（并且您确实应该在 GROUP BY 子句中使用 SELECT 中的所有非聚合列 - mysql 不反对，但如果您错过了一些，大多数 SQL 都会反对）。

像这样的东西（未经测试，所以请原谅任何错别字）

```
SELECT vendor_id, ut.id, ut.unit_name, IFNULL(SUM(commission_fix_out),0)
FROM transaction t
INNER JOIN office_per_transaction opt
ON t.id = opt.transaction_id
INNER JOIN_vendor_per_transaction ppt
ON t.id = ppt.transaction_id
INNER JOIN vendor ve
ON ve.id = ppt.vendor_id 
RIGHT JOIN unit_type ut
ON t.unit_type_id = ut.id
AND transaction_end_week BETWEEN 0 AND 14
AND YEAR(transaction_end_date) = 2012
WHERE ve.office_id = 1
GROUP BY vendor_id, ut.id, ut.unit_name
ORDER BY vendor_id, ut.id, ut.unit_name 
```

如果您希望每个供应商有一行，并且该供应商的所有金额只有一列，那么就像这样。

```
SELECT vendor_id, GROUP_CONCAT(CommisionAmount)
FROM (
SELECT vendor_id, ut.id, ut.unit_name, IFNULL(SUM(commission_fix_out),0) AS CommisionAmount
FROM transaction t
INNER JOIN office_per_transaction opt
ON t.id = opt.transaction_id
INNER JOIN_vendor_per_transaction ppt
ON t.id = ppt.transaction_id
INNER JOIN vendor ve
ON ve.id = ppt.vendor_id 
RIGHT JOIN unit_type ut
ON t.unit_type_id = ut.id
AND transaction_end_week BETWEEN 0 AND 14
AND YEAR(transaction_end_date) = 2012
WHERE ve.office_id = 1
GROUP BY vendor_id, ut.id, ut.unit_name
ORDER BY vendor_id, ut.id, ut.unit_name) Sub1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:37:38.217

您可以使用[`group_concat`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat).

伪 SQL：

```
select vendor, group_concat(result)
from mytable
group by vendor 
```

您可以通过创建视图来“简化”它。由于我不知道您的表结构，这只是猜测

```
create view commissions as
    SELECT ppt.vendor_id as vendor, ut.unit_name as category,
           IFNULL(SUM(commission_fix_out),0) as commission
    FROM transaction t
    JOIN office_per_transaction opt
    ON t.id = opt.transaction_id
    JOIN_vendor_per_transaction ppt
    ON t.id = ppt.transaction_id
    RIGHT JOIN unit_type ut
    ON t.unit_type_id = ut.id
    AND transaction_end_week BETWEEN 0 AND 14
    AND YEAR(transaction_end_date) = 2012
    GROUP BY ppt.vendor_id, ut.id; 
```

然后选择

```
select vendor, group_concat(commission)
from commissions
group by vendor; 
```

# java - Tomcat6 似乎没有加载我的 LogFormatter 类

> ID：13580889
> 
> 赞同：4
> 
> 时间：2012-11-27T09:19:33.547
> 
> 标签：java, logging, tomcat6, classloader, java.util.logging

我想在 Tomcat6 中自定义我的日志消息，并创建了一个类“MyFormatter”，如下所示：

```
public class LogFormatter extends Formatter {

@Override
public String format(LogRecord record) {
    StringBuilder sb = new StringBuilder();

    sb.append("LOLCAT--")
            .append(new Date(record.getMillis()))
            .append(" \t")
            .append(record.getThreadID())
            .append(" \t")
            .append(record.getSourceMethodName())
            .append(" \t")
            .append(record.getSourceClassName())
            .append(" \t")
            .append(record.getLevel().getLocalizedName())
            .append(": ")
            .append(formatMessage(record))
            .append(System.getProperty("line.separator"));

    return sb.toString();
    }
} 
```

我已经把它打包成一个 .jar 并放在 ${catalina.home}/lib 中。

在我的 logging.properties 文件中，我添加了以下内容：

```
1catalina.org.apache.juli.FileHandler.level = FINE
1catalina.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
1catalina.org.apache.juli.FileHandler.prefix = lolcat.
1catalina.org.apache.juli.FileHandler.formatter = my.package.LogFormatter 
```

在多次尝试不同的包装、不同的配置之后，我决定尝试内置的“org.apache.juli.OneLineFormatter”——这非常有效。所以配置应该没问题。

问题仍然存在，为什么 Tomcat6 不加载我的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T11:13:07.500

我找到了解决方案。

在阅读了 Tomcat 和 Class Loading 之后，我发现 Tomcat 遵循一个顺序。它是这样的；

引导程序 (/jre/lib/ext) -> 系统 (/catalina-home/bin/) -> 通用 (/catalina-home/lib) -> Webapps。

包含日志内容的 tomcat-juli.jar 是通过“系统”步骤加载的，因此当您将其他日志内容放在一起时，它会忽略它，因为它已经加载了。

然后解决方案是在 tomcat-juli.jar 加载之前放置 .jar，也就是 /jre/lib/ext.´

编辑：将它保存在 jre 文件夹中并不总是一个好主意，所以我发现最好的解决方案是将它放在一个认可的目录中。

```
-Djava.endorsed.dirs=${catalina_home}/endorsed 
```

这个认可的目录将在**系统**类加载之前运行。

# ios - IOS：HTTPRequest下载pdf文件

> ID：13580890
> 
> 赞同：0
> 
> 时间：2012-11-27T09:19:37.757
> 
> 标签：ios, asihttprequest, home-directory

我的应用程序有问题。

我正在使用 ASIHttpRequest 下载包含以下代码的 pdf 文件：

```
- (void) downloadPdf{
AppDelegate *appDelegate = (AppDelegate*) [UIApplication sharedApplication].delegate;
if (currentDownload) {

    [currentDownload clearDelegatesAndCancel];
    currentDownload = nil;
    totalWorker = 0;
    [workers release]; workers = nil;
    progressView.progress = 0.0;

} else {

    [self removeFile];

    appDelegate.alertGlobal   = [[UIAlertView alloc] initWithTitle: @"Download file..."
                                                 message: @""
                                                delegate: self
                                       cancelButtonTitle: @"Annul"
                                       otherButtonTitles: nil];

    progressView = [[UIProgressView alloc] initWithFrame:
                    CGRectMake(30.0f, 43.0f, 225.0f, 10.0f)];
    [appDelegate.alertGlobal addSubview:progressView];
    [progressView setProgressViewStyle: UIProgressViewStyleBar];

    [appDelegate.alertGlobal show];

    NSString *tmp = @"http://192.168.0.13:8888/file.pdf";

    currentDownload = [[HappyDownload alloc] initWithURL:[NSURL URLWithString:tmp]];
    currentDownload.numberOfWorkers = totalWorker;
    currentDownload.totalChunk = 1;
    currentDownload.delegate = self;
    currentDownload.downloadProgressDelegate = self;
    currentDownload.allowResumeForFileDownloads = YES;

    documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];

    [currentDownload setDownloadDestinationPath:[documentsDirectory stringByAppendingPathComponent:@"file.pdf"]];

    [workers removeAllObjects];

    [currentDownload startAsynchronous];

    start = [NSDate new];
}
}

- (void) removeFile{

    NSString *pathTemp = [NSHomeDirectory()stringByAppendingPathComponent:@"Documents"];
    //NSString *path = [pathTemp stringByAppendingPathComponent:@"file.pdf"];

    NSFileManager* fm = [[[NSFileManager alloc] init] autorelease];
    NSDirectoryEnumerator* en = [fm enumeratorAtPath:pathTemp];
    NSError* err = nil;
    BOOL res;

    NSString* file;
    while (file = [en nextObject]) {
        res = [fm removeItemAtPath:[pathTemp stringByAppendingPathComponent:file] error:&err];
        if (!res && err) {
            NSLog(@"error: %@", err);
        }
    }

}

-(void)requestFinished:(ASIHTTPRequest *)request{
    NSDateComponents *comps = [[NSCalendar currentCalendar] components:NSSecondCalendarUnit
                                                              fromDate:start
                                                                toDate:[[NSDate new] autorelease]
                                                               options:0];
    int duration  = [comps second];

    NSLog(@"request finished, duration:%d", duration);

    AppDelegate *appDelegate = (AppDelegate*)[UIApplication sharedApplication].delegate;
    appDelegate.downloaded = TRUE;

    [currentDownload clearDelegatesAndCancel];
    currentDownload = nil;
    totalWorker = 0;
    [workers release]; workers = nil;
    progressView.progress = 0.0;

    [appDelegate.alertGlobal dismissWithClickedButtonIndex:0 animated:YES];
    [appDelegate.alertGlobal release];

    downloadedFirstTime = TRUE;

    NSError *error;
    NSString *pathTemp = [NSHomeDirectory()stringByAppendingPathComponent:@"Documents"];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSLog(@"Documents directory: %@", [fileManager contentsOfDirectoryAtPath:pathTemp error:&error]);

    [self openFile];

}

- (void) requestFailed:(ASIHTTPRequest *)request{
    AppDelegate *appDelegate = (AppDelegate*) [UIApplication sharedApplication].delegate;
    [currentDownload clearDelegatesAndCancel];
    currentDownload = nil;
    totalWorker = 0;
    [workers release]; workers = nil;
    progressView.progress = 0.0;

    [appDelegate.alertGlobal dismissWithClickedButtonIndex:0 animated:YES];
    [appDelegate.alertGlobal release];

    NSLog(@"request failed");
    NSLog(@"Error %@", [request error]);
    int statusCode = [request responseStatusCode];
    NSString *statusMessage = [request responseStatusMessage];
    NSLog(@"statuscode:%d", statusCode);
    NSLog(@"statusmessage:%@", statusMessage);
} 
```

好的，我以这种方式正确下载了一个pdf文件，然后用这个控件以这种方式打开它：

[https://github.com/vfr/Reader](https://github.com/vfr/Reader)

在 iPhone 中打开 pdf 文件的经典控制器，我使用这种方法：

```
- (void) openFile{

    AppDelegate *appDelegate = (AppDelegate*)[UIApplication sharedApplication].delegate;

    NSString *phrase = nil; // Document password (for unlocking most encrypted PDF files)

    NSString *pathTemp = [NSHomeDirectory()stringByAppendingPathComponent:@"Documents"];
    NSString *path = [pathTemp stringByAppendingPathComponent:@"file.pdf"];

    assert(path != nil); // Path to last PDF file

    ReaderDocument *document = [ReaderDocument withDocumentFilePath:path password:phrase];

    if (document != nil) // Must have a valid ReaderDocument object in order to proceed
    {
        readerViewController = [[ReaderViewController alloc] initWithReaderDocument:document];

        readerViewController.delegate = self; // Set the ReaderViewController delegate to self

        //mainWindow.rootViewController = readerViewController; // Set the root view controller
    }

    [self presentModalViewController:readerViewController animated:YES];

    [readerViewController release];
} 
```

它在第一个时间工作正常，我打开第一个文件 pdf 没有问题，但是当我下载我在服务器上上传的第二个不同的 pdf 时，我遇到了一个大问题......在里面我看到两个 pdf 文件，一个在其他，但我不明白问题是 ASIHttpRequest 还是 readerViewController。如您所见，我删除了 HomeDirectory 中的文件，但我不明白问题所在，您能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:35:54.003

在您的删除方法中，您是否检查过路径（带有文件名）是否正确？另外，在删除文件的地方再尝试一件事，然后检查该文件是否存在。

可能会给一些想法。

# c# - 我想在数字和字母数字字符之间添加空格

> ID：13580891
> 
> 赞同：2
> 
> 时间：2012-11-27T09:19:37.450
> 
> 标签：c#

当文本框更改时，我想在数字和字母数字字符之间添加一个空格。

例如

```
34 YT 567 *Allowed*
22 KL 2345 *Allowed*
22KL 2345 *Not Allowed*
22KL2345 *Not Allowed*
22 KL2345 *Not Allowed* 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:35:36.947

这将通过在必要时插入空格来修复不正确的值：

```
var correctedValue = Regex.Replace(
    incorrectValue,
    "(?<=[0-9])(?=[A-Za-z])|(?<=[A-Za-z])(?=[0-9])",
    " "); 
```

`Regex.IsMatch`如果您想警告用户而不是自动修复它，您可以使用相同的模式来检测不正确的值。

编辑：

```
Regex.IsMatch(MyTextBox.Text,
    "(?<=[0-9])(?=[A-Za-z])|(?<=[A-Za-z])(?=[0-9])|[^a-zA-Z0-9 ]") 
```

`true`如果用户在字母旁边输入数字，或输入任何非字母数字（和非空格）字符，将返回。

如果要*删除*非字母数字字符并*插入*空格，则需要分两步完成；首先`Regex.Replace`是 pattern `[^a-zA-Z0-9 ]`，然后是`Regex.Replace`上面的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:30:22.403

您可以使用 RegEx 轻松找到错误的输入。

```
Regex rgx = new RegEx("([0-9]+[a-z]|[A-Z]+)||([a-z]|[A-Z]+[0-9]+)");
if (rgx.IsMatch(MyTextBox.Text)
{
     //bad input
}
else
    //input was good. 
```

正则表达式匹配一个或多个数字，直接后跟一个或多个字母或相反（字母然后数字）。

# android - 没有 ListActivity 的 simpleCursorAdapter？

> ID：13580894
> 
> 赞同：0
> 
> 时间：2012-11-27T09:19:45.387
> 
> 标签：android, database, eclipse, sqlite, simplecursoradapter

请给我一些提示，告诉我如何在没有 ListActivity 的情况下使用 simpleCursorAdapter？我的意思是，我想开发一个使用 simpleCursorAdapter 而没有 listActivity 的应用程序，坦率地说，如果我不使用 ListActivity，我应该如何设置 simpleCursorAdapter 项目，例如

* * *

ListAdapter 适配器 = new SimpleCursorAdapter(this,android.R.layout.two_line_list_item,cursor,from, **to** ); 或者可能

* * *

或者可能

ListAdapter 适配器 = new SimpleCursorAdapter(this,.R.layout.mypage,cursor,from, **to** );

* * *

我的问题是“**到**”项目，因为我在此页面（XML 文件）中没有任何 TextView，我有要在 listView 中显示的树字段，我在 XML 文件中将其定义为“mylist”，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:26:05.710

在你的活动中

```
private String [] project = {ContactsContract.CommonDataKinds.Phone._ID,
            ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME, 
            ContactsContract.CommonDataKinds.Phone.NUMBER};

...

    Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                        project, null, null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
    startManagingCursor(phones);
    ContactCursorAdapter adapter = new ContactCursorAdapter(this, phones);
    ListView contactLV = (ListView) findViewById(R.id.contactLV);
    contactLV.setAdapter(adapter);
... 
```

你自己的光标适配器类

```
 public class ContactCursorAdapter extends CursorAdapter {

        public ContactCursorAdapter(Context context, Cursor c) {
            super(context, c);
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {
            TextView nameTV = (TextView)view.findViewById(R.id.nameTV);
            nameTV.setText(cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)));
            TextView phoneTV = (TextView)view.findViewById(R.id.phoneTV);
            phoneTV.setText(cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));
        }

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {
            LayoutInflater inflater = LayoutInflater.from(context);
            View v = inflater.inflate(R.layout.contact_for_lv, parent, false);
            bindView(v, context, cursor);
            return v;
        }

} 
```

列表视图的 XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="5dp" >

    <TextView
        android:id="@+id/nameTV"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:textSize="18sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/phoneTV"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:textSize="14sp" />

</LinearLayout> 
```

# css - joomla 网站在 Firefox 中运行不佳

> ID：13580897
> 
> 赞同：0
> 
> 时间：2012-11-27T09:19:53.550
> 
> 标签：css, firefox, joomla2.5

我使用这个 joomla 2.5 模板[http://www.linelab.org/demo-templates-joomla/index.php?template=orangelab](http://www.linelab.org/demo-templates-joomla/index.php?template=orangelab)，修改它后，它不适用于 Firefox，我在 chrome 中对其进行了测试工作得很好，我检查了css文件；它位于标题的最后一行之前。

```
<link media="screen,projection" type="text/css" href="/templates/orangelab/css/styles.css" rel="stylesheet"> 
```

我检查过

```
<div id="socialinks> 
```

在萤火虫中，尽管我在/templates/orangelab/css/styles.css 中有#sociallinks，但我在右侧的样式选项卡中找不到社交链接

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:27:25.223

`<div id="socialinks>` 您在Use`<div id="socialinks">`中有错字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:33:18.020

修复了它，这是 CSS 文件中的一个错误，阻止了其他 CSS 属性的加载。

# nhibernate - NHibernate 版本控制

> ID：13580901
> 
> 赞同：0
> 
> 时间：2012-11-27T09:19:58.867
> 
> 标签：nhibernate, nhibernate-mapping

我目前对为具有版本字段的实体创建映射很感兴趣。但是，我对如何在 Web 环境中使用版本控制感到困惑。在大多数示例中，我看到一个实体在立即发生的 using 语句中更新。

在 Web 示例中，实体在 HTTP GET 中获取，并且在客户端调用 HTTP POST 之前不会更新。我通常在帖子中做的是再次获取实体，更新数据并存储它。但是该实体可能在我的 GET 和 POST 之间发生了变化。我应该在保存之前自己检查版本字段还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:38:15.757

是的，我认为您需要自己检查一下。您可以这样做的一种方法是，当您在初始获取中检索实体并将其发送回调用方时，在响应中包含版本号。发帖时，请附上版本号。在服务器端，当您重新读取附加的 nHibernate 实体时，从中获取*当前*版本号。如果您的版本号已过期，请停止更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:50:40.040

版本 1) 可以手动检查或 2) 依赖于 NHibernate 内置的版本控制功能和 DB 中的时间戳类型。*（SQL Server 支持它 - 但很可能其他 DB 也以某种方式做）*。在第二种情况下，我们必须处理`exception`.

[在 NHibernate http://ayende.com/blog/3946/nhibernate-mapping-concurrency](http://ayende.com/blog/3946/nhibernate-mapping-concurrency)中有详细的解释如何处理并发

如果您正在使用 SQL Server，您可以创建列

```
CREATE TABLE [dbo].[MyTable](
 ...
 [Version] [rowversion] NOT NULL -- new keyword for deprecated [timestamp]
 ... 
```

然后调整版本映射：

```
<version name="Version" generated="always" unsaved-value="null" type="BinaryBlob">
  <column name="Version" not-null="false" sql-type="timestamp" />
</version> 
```

而且您还应该/需要将*版本*号传递给客户端并将其绑定到 POST 以及（例如`base64`）

每当您尝试使用`session.Update(entity)`DB 中较旧的 Version 值时，NHibernate 都会抛出**`NHibernate.StaleObjectStateException`**. 只有在这种情况下，您才能处理它。如果版本匹配，则一切都将正常工作，并且 UPDATE 语句将成功。

# authentication - 在 openam/opensso 中使用持久性 cookie 时，SSO cookie 不起作用

> ID：13580906
> 
> 赞同：1
> 
> 时间：2012-11-27T09:20:20.163
> 
> 标签：authentication, cookies, persistence, openam, opensso

我已经开始维护一些网站，这些网站都使用 openam SSO 进行了身份验证。但是，当我们的一位用户设置持久性 cookie (DProPCookie) 时，它并不总是有效。

重现场景是：

1.  登录到 openam，设置持久 cookie
2.  重启浏览器（清除会话 cookie）
3.  转到站点 A，由于持久 cookie，用户自动登录
4.  转到站点 B，用户会看到一个登录页面（他们应该自动登录）。

在第 3 步之后，如果我从浏览器中删除 iPlanetDirectoryPro cookie，我可以很好地登录到站点 B（使用持久性 cookie）。似乎在设置 DProPCookie 时从站点 A 生成的 iPlanetDirectoryPro cookie 在站点 B 上不起作用。

请注意，我尝试了站点 A 和 B 的各种排列，并且每种情况下的场景都是相同的。

我对 openam 很陌生，所以关于如何调试它的任何提示都会很棒，或者如果我遗漏了一些明显出错的东西，请告诉我。

提前致谢。

编辑：

我随后发现使用 DProPCookie 进行身份验证时返回的 iPlanetDirectoryPro cookie 不起作用。因此因此与跨域无关。

1.  登录到 openam，设置持久 cookie
2.  重启浏览器（清除会话 cookie）
3.  转到站点 A，由于持久 cookie，用户自动登录
4.  删除除 iPlanetDirectoryPro cookie 之外的所有 cookie
5.  刷新页面 - 要求登录

如果我重复测试但使用正常登录生成的 iPlanetDirectoryPro cookie，那么当我刷新页面时，我会自动获得身份验证。（我已更改问题的标题以反映这一点）。

进一步编辑：

打开调试 - 我在日志中看到这个异常：

```
IdName is :null
amAuth:11/28/2012 05:11:25:750 PM GMT: Thread[TP-Processor2,5,main]
orgName is :xxx
amAuth:11/28/2012 05:11:25:750 PM GMT: Thread[TP-Processor2,5,main]
AuthD.getIdentity() from IdUtils Name: null Org: xxx
amAuth:11/28/2012 05:11:25:750 PM GMT: Thread[TP-Processor2,5,main]
AuthD.getIdentity: Got IdRepoException while getting Identity from IdUtils: Illegal universal identifier null.
amAuth:11/28/2012 05:11:25:750 PM GMT: Thread[TP-Processor2,5,main]
isLockedOut:Exception :
java.lang.NullPointerException
        at com.sun.identity.idm.server.IdCachedServicesImpl.search(IdCachedServicesImpl.java:585)
        at com.sun.identity.idm.AMIdentityRepository.searchIdentities(AMIdentityRepository.java:296)
        at com.sun.identity.authentication.service.AuthD.getIdentity(AuthD.java:1453)
        at com.sun.identity.authentication.service.AMAccountLockout.isMemoryLockout(AMAccountLockout.java:297)
        at com.sun.identity.authentication.service.AMAccountLockout.isLockedOut(AMAccountLockout.java:281)
        at com.sun.identity.authentication.service.AMAccountLockout.isLockedOut(AMAccountLockout.java:264)
        at com.sun.identity.authentication.service.AMLoginContext.processPCookieMode(AMLoginContext.java:1919)
        at com.sun.identity.authentication.service.AMLoginContext.processIndexType(AMLoginContext.java:1846) 
```

快速浏览 openam 代码 - 我们似乎没有在 AMAccountLockout.java:264 中获得用户名：

```
 public boolean isLockedOut() {

       // has this user been locked out.

       String userDN = loginState.getUserToken();

       return isLockedOut(userDN);

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:48:43.223

OpenAM 中的 Persistent Cookie 模式已更改……实际上不再使用 DProCookie。

可能您正在运行“受限令牌模式”AKA“cookie 反劫持模式”并且 CDCServlet 没有发出正确的身份验证断言

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:35:35.743

可能是您遇到了[https://bugster.forgerock.org/jira/browse/OPENAM-1002](https://bugster.forgerock.org/jira/browse/OPENAM-1002)吗？也可能是您的 cookie 域有问题，也许站点 B 重定向到 DProPCookie 不可见的不同域？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:59:08.207

最终我们发现问题在于持久 cookie 生成的 SSO cookie 没有身份验证模块 - 因此身份验证级别设置为 Integer.MIN_VALUE;。

在我们的情况下，我们做了一个稍微hacky的修复来强制它为0，从而解决了这个问题。

我认为正确的做法是为持久 cookie 登录使用单独的身份验证模块，或者将身份验证模块存储在由持久 cookie 生成的 SSO cookie 中。

# java - java可以在Android中做printIn吗？

> ID：13580907
> 
> 赞同：1
> 
> 时间：2012-11-27T09:20:20.863
> 
> 标签：java, android, button, println

我有一个 EditText，当单击按钮时，我希望文本显示在屏幕上。并且可以再次使用 EditText 来添加其他文本等等。谢谢！

就像是：

![在此处输入图像描述](../Images/ef93e4b1888463109b91875544671f22.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:23:13.033

```
 EditText et = (EditText)findviewById(R.id.et1);
  TextView display = (TextView)findviewById(R.id.tv1);
  plusBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) 
        {
            tv1.setText(tv.getText().toString()+"\n"+et.getText().toString());
             //prints the text from edittext and concatinates it to the textview previous text
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:25:48.713

请使用以下代码，它将解决您的问题。

```
EditText editText1 = (EditText)findviewById(R.id.editText1);
TextView textView1 = (TextView)findviewById(R.id.textView1);
plusBtn.setOnClickListener(new OnClickListener() {

    public void onClick(View v) 
    {
        textView1.append("\n"+editText1.getText().toString());
                         // OR
        textView1.setText(textView1.getText().toString()+"\n"+editText1.getText().toString());
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:24:46.457

您可以使用其 addView() 方法将视图添加到您的布局中。因此，您可以在每次单击按钮时添加一个包含 TextField 内容的 TextView。

# background - 我们如何将工具提示添加到用作 SSRS 图表中的背景图像的徽标中

> ID：13580910
> 
> 赞同：1
> 
> 时间：2012-11-27T09:20:31.007
> 
> 标签：background

我正在使用 SSRS 并在报告的每个图表中使用我的徽标作为背景图像。我已将源设置为嵌入并剪切了图像并将其位置设置为右下角。现在我需要添加一个工具提示和一个超链接到这个标志。有没有办法做到这一点。

谢谢

# c# - 俄罗斯增值税号验证

> ID：13580911
> 
> 赞同：1
> 
> 时间：2012-11-27T09:20:33.360
> 
> 标签：c#, .net, algorithm, validation

有没有人有验证俄罗斯税务登记号 (VAT) 的代码。C# 代码会很棒，但如果有人有其他语言，它也会有所帮助。

**格式（俄罗斯增值税号 = "税号" = "Идентификационный номер налогоплательщика"）：**

> 10位（法人）或12位（人），前两位为出生地或公司注册地（外国公司，前导99后两位） MOD 11-10
> 
> 第二次两次检查（2004年之前，它改变了，现在保持不变）。
> 
> 对于法人资格，使用可变第二代码 (KPP)，通常前 4 位相同（不适用 99 区域规则），通常默认为 XXXX01001。
> 
> KPP 也是计数器（最后 3 位）
> 
> KPP 的数量仅限于除 77 和 50 之外的地区的税务检查次数（每个地区仅 1 次）加上最大公司的代码。

**来源：** [http ://en.wikipedia.org/wiki/VAT_identification_number#VAT_numbers_of_non-EU_countries](http://en.wikipedia.org/wiki/VAT_identification_number#VAT_numbers_of_non-EU_countries)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:51:53.110

这是一个用于验证俄罗斯个人和公司增值税号的 C# 程序。请考虑应进行进一步的输入验证（验证传递的增值税号是否仅包含数字，它们是否具有所需的长度等）：

```
using System;
using System.Linq;

namespace ConsoleApplication1
{
    class Program
    {
        class VatNumber
        {
            private int[] _numericVatNumber;
            public int[] NumericVatNumber { get { return _numericVatNumber; } }

            public VatNumber(string vatNumber)
            {
                _numericVatNumber = vatNumber.ToCharArray().Select(i => int.Parse(i.ToString())).ToArray();
            }

            public virtual bool IsValid(){return false;}
        }

        class PersonalVatNumber : VatNumber
        {
            public override bool IsValid()
            {
                var n10 = ((2 * NumericVatNumber[0] +
                            4 * NumericVatNumber[1] +
                            10 * NumericVatNumber[2] +
                            3 * NumericVatNumber[3] +
                            5 * NumericVatNumber[4] +
                            9 * NumericVatNumber[5] +
                            4 * NumericVatNumber[6] +
                            6 * NumericVatNumber[7] +
                            8 * NumericVatNumber[8]) % 11) % 10;
                if (n10 == NumericVatNumber.Last())
                    return true;
                return false;
            }

            public PersonalVatNumber(string vatNumber)
                : base(vatNumber)
            {

            }
        }

        class CompanyVatNumber : VatNumber
        {
            public override bool IsValid()
            {
                var n11 = ((7 * NumericVatNumber[0] +
                            2 * NumericVatNumber[1] +
                            4 * NumericVatNumber[2] +
                            10 * NumericVatNumber[3] +
                            3 * NumericVatNumber[4] +
                            5 * NumericVatNumber[5] +
                            9 * NumericVatNumber[6] +
                            4 * NumericVatNumber[7] +
                            6 * NumericVatNumber[8] +
                            8 * NumericVatNumber[9]
                            ) % 11) % 10;
                                if (n11 != NumericVatNumber[10])
                    return false;
                var n12 = ((3 * NumericVatNumber[0] +
                            7 * NumericVatNumber[1] +
                            2 * NumericVatNumber[2] +
                            4 * NumericVatNumber[3] +
                            10 * NumericVatNumber[4] +
                            3 * NumericVatNumber[5] +
                            5 * NumericVatNumber[6] +
                            9 * NumericVatNumber[7] +
                            4 * NumericVatNumber[8] +
                            6 * NumericVatNumber[9] +
                            8 * NumericVatNumber[10]
                            ) % 11) % 10;

                if (n12 == NumericVatNumber.Last())
                    return true;
                return false;
            }

            public CompanyVatNumber(string vatNumber)
                : base(vatNumber)
            {

            }
        }

        static void Main(string[] args)
        {
            var companyVat = new CompanyVatNumber("123456789047");
            Console.WriteLine(companyVat.IsValid());

            var personalVat = new PersonalVatNumber("1234567894");
            Console.WriteLine(personalVat.IsValid());

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T20:33:59.963

如果它是您的选择，您可以使用 js lib（我的也是如此）：

[https://github.com/se-panfilov/jsvat](https://github.com/se-panfilov/jsvat)

它支持欧盟（以及俄罗斯人）增值税号码。

（jsvat 检查增值税号两次 - 使用正则表达式和数学计算）

# visual-studio-2012 - 为 webapi Visual Studio 2012 启用测试客户端

> ID：13580914
> 
> 赞同：0
> 
> 时间：2012-11-27T09:20:40.483
> 
> 标签：visual-studio-2012

我有一个工作 webapi。但我不想使用提琴手，而是想使用“测试客户端”来测试 api 是否真的像他们在 Visual Studio 2012 的预览版中那样工作。

一个网页说，这是一个api，这个api有这些方法，“按”试试。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T09:52:01.803

Visual Studio 2012 有一个 asp.net webapi 模板，如果你使用它，它在右上角有一个 API 菜单，其中描述了每个 API 是什么以及如何调用和测试它。

如果您是编码人员，请查看由 Asp.Net MVC 自动生成的 helpcontroller，您可以对其进行调整/增强以提供测试工具

# android - 持有后可以滚动吗？

> ID：13580917
> 
> 赞同：0
> 
> 时间：2012-11-27T09:20:53.823
> 
> 标签：android, android-layout, android-ui

我在片段中使用滚动视图，滚动视图包含一个`ListView`

我的代码：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroller"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" 
    android:orientation="horizontal">
        <ListView
            android:id="@+id/menu_list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:choiceMode="singleChoice"
            android:divider="#FFFFFFFF"
            android:dividerHeight="0dp"
            android:listSelector="@drawable/menu_listview_item_selector"
            android:paddingBottom="0dp"
            android:paddingLeft="10dp"
            android:paddingRight="11dp"
            android:paddingTop="0dp" />
</ScrollView> 
```

我在滚动内容时遇到问题。ListView 以编程方式填充了来自RelativeLayout 和TextView 的项目。这些项目处于活动状态并调用其他操作。当我尝试滚动这些项目时，只有在列表视图中的某个项目上按住手指后才有可能。

![在此处输入图像描述](../Images/b82a093ad7ea718fbd1d5564e7d8328d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:32:12.373

a`ListView`包含`ScrollView`它自己的 a ，因此您不必将其放入另一个中。只需删除`ScrollView`.

# java - 正则表达式删除字符串中的最后一个单词

> ID：13580918
> 
> 赞同：1
> 
> 时间：2012-11-27T09:21:04.597
> 
> 标签：java

我有一个这样的字符串：“87 CAMBRIDGE PARK DR”。我使用下面的正则表达式删除了最后一个单词“DR”，但它也删除了单词“PARK”......

下面是我的代码...

```
String regex = "[ ](?:dr|vi|tes)\\b\\.?"; /* Regular expression format */

String inputString ="87 CAMBRIDGE PARK DR"; /* Input string */

Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);
Matcher matcher = pattern.matcher(inputString);
inputString = matcher.replaceAll(""); 
```

现在输出是“87 CAMBRIDGE”..

但我需要输出为“87 CAMBRIDGE PARK”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:25:22.393

试试下面的正则表达式：

```
String inputString ="87 CAMBRIDGE PARK DR";
System.out.println(inputString.replaceAll("\\w+$", "")); 
```

输出：

87 剑桥公园

**分解上面的正则表达式：**

```
"\\w+$" 
```

- 检查行尾是否后跟几个单词字符。

此外，如果您确定您的*最后一个*词只能是大写（大写）字母。

```
System.out.println(inputString.replaceAll("[A-Z]+$", "")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:25:20.360

您可以按如下方式实现：

```
String inputString ="87 CAMBRIDGE PARK DR"; /* Input string */
System.out.println(inputString.replaceFirst("\\s+\\w+$", "")); 
```

正则表达式理解

```
\s+  : one or more white space characters

\w+  : one or more alpha-numerics

$    : the end of the input 
```

另一种方法如下：

```
String inputString ="87 CAMBRIDGE PARK DR"; /* Input string */
inputString = inputString.substring(0, inputString.lastIndexOf(" ")) + ""; 
```

# windows - 通过 Windows 安装程序更新 gac 中的 dll

> ID：13580920
> 
> 赞同：1
> 
> 时间：2012-11-27T09:21:16.120
> 
> 标签：windows, dll, gac

如何通过 Windows 安装程序替换 GAC 中的强命名 DLL？

我有两个安装程序，它们共享来自 GAC 的一些常见 DLL。

假设任何常见的 DLL 有任何变化，那么使用最新的 DLL 运行任何一个安装程序都不会替换现有的 DLL。

从一些旧帖子中，建议更改文件程序集版本将替换 DLL。这种方法行不通。除此之外还有什么需要做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T07:04:52.843

如果您仅更改程序集文件版本，Windows Installer 将不会更新 GAC 中的程序集，除非您的安装创作工具还在新 MSI 的 MsiAssemblyName 表中为程序集设置了 fileVersion 属性。

Aaron Stebner 在他的 [博客文章中解决了这个问题。](http://blogs.msdn.com/b/astebner/archive/2008/08/10/8847259.aspx)

我知道这在使用 WiX 时有效，因为我已经在几个安装程序中这样做了。我不知道如何在其他创作工具中做到这一点。

# c# - 向 Unity 容器注册递归结构

> ID：13580922
> 
> 赞同：5
> 
> 时间：2012-11-27T09:21:20.727
> 
> 标签：c#, dependency-injection, unity-container, circular-dependency

是否可以向统一容器注册以下递归结构：

```
public interface IFoo
{
    IBar[] Bars { get; set; }
}

public interface IBar
{
    IFoo[] Foos { get; set; }
} 
```

假设每个接口存在多个命名实例：

```
public class Foo1 : IFoo 
{
    public IBar[] Bars { get; set; }
}

public class Foo2 : IFoo
{
    public IBar[] Bars { get; set; }
}

public class Bar1 : IBar
{
    public IFoo[] Foos { get; set; }
}

public class Bar2 : IBar
{
    public IFoo[] Foos { get; set; }
} 
```

和注册：

```
var container = new UnityContainer();

container.RegisterType<IFoo, Foo1>("foo1");
container.RegisterType<IFoo, Foo2>("foo2");
container.RegisterType<IBar, Bar1>("bar1");
container.RegisterType<IBar, Bar2>("bar2");

var instanceOfBar = container.Resolve<IBar>("bar1"); 
```

如何配置 Unity 容器以便自动注入集合属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T09:33:36.680

有一种方法可以将属性[注释](http://msdn.microsoft.com/en-us/library/ff649447.aspx)为依赖项。但是在您的情况下，由于解决过程的无限性，这将不起作用。简单地说，你会得到 stackoverflow 异常。为了实现这样的结构，我使用惰性模式，所以我只在需要时才解析这样的集合：

```
 Func<IFoo[]> resolver;
 IFoo[] value;
 public IFoo[] Foos { get{
      if(value == null) value = resolver();
         return value;
     } 
 } 
```

要从容器中`Func<IFoo[]>`解析，请添加：

```
 container.RegisterInstance<Func<IFoo[]>>(e => e.Resolve<IFoo[]>()); 
```

数组或元素的分辨率是开箱即用的，它只是简单地映射到`ResolveAll`.

`Func<IFoo[]>`然后只需通过您的构造函数注入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T09:56:30.897

您的问题的简单答案是否定的。如果通过解析 Foo 实例化了一个或多个 Bar 对象，而后者又实例化了一些 Foo 对象，Unity 会将其视为循环引用。

循环引用是 Unity 的一个问题：[循环引用](http://msdn.microsoft.com/en-us/library/ff660897%28v=pandp.20%29.aspx)

# c# - 数据网格中的超链接在 Firefox 中没有被禁用

> ID：13580923
> 
> 赞同：0
> 
> 时间：2012-11-27T09:21:21.320
> 
> 标签：c#, asp.net

我在数据网格中添加了一个超链接列。在 Rowdatabound 事件中，基于某些条件想要使超链接启用或禁用。

这在 IE 中运行良好。

但是在 Firefox 中，超链接显示已禁用，但是当我单击它时，会打开一个空白弹出窗口。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:39:34.173

您可以为您的超链接添加属性

```
 href="javascript:void(0)"

 Hlnk.Attributes.Add("href","javascript:void(0)"); 
```

# javascript - 在打开 alert() 时创建异步 AJAX

> ID：13580926
> 
> 赞同：3
> 
> 时间：2012-11-27T09:21:25.110
> 
> 标签：javascript, ajax, alert

我的浏览器每 20 秒使用`window.setTimeout()`. 问题：当`alert()`弹出时，AJAX 调用被暂停。如果用户在关闭弹出窗口之前等待一段时间 - 服务器将（错误地）关闭登录会话。

我们习惯`alert()`弹出错误消息，我不能使用其他方法，因为这是产品定义。

有什么办法可以解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:24:21.040

`alert()`以及`prompt()`所有阻塞 UI 线程，这意味着所有其他操作都被暂停。

我建议您改用模态窗口，例如[jQueryUI 中的那些](http://jqueryui.com/dialog/#modal)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T09:27:30.753

正如@JosephtheDreamer 在他的回答中提到的那样`alert`，`prompt`和`confirm`都会阻止用户界面。

如果你真的想使用`alert`，那么你可以使用 WebWorkers。它们在单独的线程中运行，因此不受 UI 阻塞的影响。他们有[不错的支持](http://caniuse.com/#search=webworkers)，但像往常一样在 IE < 10 中不起作用。

这实际上非常复杂，所以我建议遵循@JosephtheDreamer 的建议并使用模态窗口。它们并不难做到，而且会更简单地解决问题。

有关 WebWorker 的更多信息，请参阅[mdn](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:24:37.433

对不起，为什么你不能使用除了警报之外的东西？警报不是很有吸引力或用户友好。一个简单的模态窗口（例如[jQuery UI](http://jqueryui.com/dialog/)）要好得多……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:52:35.057

尝试替换默认警报行为

```
window.alert = function(message) {
// put your dialog box launching code here. 
```

}

或这个

```
alert = function(foo) {
// some functionality 
```

};

# matlab - Matlab 函数签名更改

> ID：13580930
> 
> 赞同：2
> 
> 时间：2012-11-27T09:21:41.590
> 
> 标签：matlab

假设我有一个 Matlab 函数，我更改了它的签名（即添加参数）。由于 Matlab 不“编译”，因此有一种简单的方法可以确定哪些其他函数不使用正确的签名（即提交附加参数）。我不想在运行时确定这一点（即收到错误消息）或必须进行文本搜索。希望这是有道理的。任何反馈将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:40:47.920

如果我理解正确，您想更改函数的签名并找到以“旧”方式调用它的所有函数/脚本/类，并将其更改为“新”方式。

您还表示您不想在运行时执行此操作，也不想进行文本搜索，但是无法在“解析时”检测到“不正确”的调用，所以恐怕这些要求根本没有选择检测旧的函数调用...

在这种情况下，我会临时在新函数中添加几行：

```
function myFunc(param1, param2, newParam) % <-- the NEW signature

    if nargin == 2
        clc, error('old call detected.'); end 
```

然后运行主脚本/函数/该函数所在的任何内容。每次错误调用函数时，您都会收到一个错误，以及 Matlab 命令窗口中的错误堆栈。

然后只需单击错误堆栈底部的链接，更正函数调用，然后从顶部重复直到不再发生错误。

完成后不要忘记删除这些行，或者更好的是，将单词替换为`error`just`warning`以捕获任何遗漏的内容。

更好的是：如果你在 linux 上，文本搜索将是一个问题

```
$ grep -l 'myFunc(.*,.*); *.m' 
```

这将列出所有具有“不正确”调用的文件。我想说这并不太难……您可能可以使用标准的 Windows 搜索做类似的事情，但我现在无法测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:33:17.737

这或多或少是发明[依赖报告](http://blogs.mathworks.com/community/2008/02/04/exposing-your-dependencies/)的目的。使用该工具，您可以找到哪些函数/脚本调用您更改的函数。那么这只是一个手动检查每个事件的问题。

但是，我建议您对函数签名进行更改，以保持向后兼容性。您可以通过为新参数指定默认值和/或`warning`在这些情况下发出 a 来做到这一点。这样，您的代码将运行，并且您将获得已弃用代码的运行时提示（这在解释/动态语言中或多或少是必要的邪恶）。

对于许多动态语言（特别是 MATLAB），如果没有解释器执行代码，通常不可能完全检查代码。想象一下下面的代码：

```
x = magic(10); 
```

通常，您会说该`magic`函数已被调用。但是，`magic`可以映射到完全不同的功能。这可以通过静态分析工具（例如依赖性报告）不可见的方式完成：例如`eval('magic = 1:100;');`.

唯一的方法是检查整个代码库，或者手动检查每个出现（可以通过文本搜索轻松找到），或者运行完全覆盖代码库的测试。

**编辑**：但是有一种方法可以访问 MATLAB 解析器的中间输出。这可以使用未记录和不受支持的`mtree`函数访问（可以这样调用：`t = mtree(file, '-file');`对于代码库中的每个文件）。使用生成的结构，您可能能够找到带有一定数量参数的调用。

# android - 结合 ActionbarSherlock 和 Facebook API Graph

> ID：13580936
> 
> 赞同：3
> 
> 时间：2012-11-27T09:21:57.483
> 
> 标签：android, facebook, actionbarsherlock

这可能是一个新手问题，但这里有：我目前正在开发一个 Android 应用程序，在该应用程序中我需要 Facebook 库和 Action Bar Support 库。

当我尝试将 ABS 库（例如将项目编译为库）和 Facebook 库（例如将 Android 的 Facebook SDK 集成为一个项目并将其编译为库）时，我遇到了以下问题： ABS 和 Facebook 使用的 2 个支持库是不同的。当我尝试用 ABS 使用的较新的支持库替换 Facebook 中的支持库时，我遇到了 Facebook SDK 中的编译错误。那么最好的方法是什么？如何在不牺牲支持库功能的情况下将两者结合起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:26:39.417

删除其中一个中的支持库，并将其替换为另一个的版本。

如果您使用 maven，只需删除 ABS libs 文件夹中的库，并更改 pom 中的版本以匹配 facebook 使用的支持库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:32:01.630

我遇到了类似的困难，不过，我的困难是 ABS 和 ViewPager 库。我在我的情况下所做的是：

1.  *从ViewPager*中删除支持库`jar`文件。
**   *将ABS*作为参考库添加到*ViewPager*库*   在我的项目中，我只引用了*ViewPager*。*

 *在您的情况下，您可以尝试这样做：

1.  `jar`从*Facebook SDK*中删除支持库。
2.  将*ABS*作为参考库添加到*Facebook SDK*。
3.  在您的应用程序项目中，将*Facebook SDK*添加为唯一引用的库。*

# android - 我们如何在 android 模拟器中为 Google Cloud Messaging 找到设备令牌

> ID：13580937
> 
> 赞同：2
> 
> 时间：2012-11-27T09:21:57.323
> 
> 标签：android, google-cloud-messaging

我正在尝试使用模拟器来实现谷歌云消息传递。但在服务器端设备令牌是需要的。我怎样才能得到这个令牌。我怎样才能得到变量“设备”

```
import com.google.android.gcm.server.*;

Sender sender = new Sender(myApiKey);
Message message = new Message.Builder().build();
MulticastResult result = sender.send(message, devices, 5); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:33:29.853

您可以像这样获取设备ID

```
import android.provider.Settings.Secure;
String android_id=Secure.getString(getContext().getContentResolver(),Secure.ANDROID_ID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:39:32.553

它向 GCM 注册应用程序。作为回报，它将提供一个字母数字字符串，该字符串将发送到我们的服务器以进行通知。要为您的项目获取 GCM id，请遵循 [开发者页面]：http: [//developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

```
 public String registerGCM(Context context)
 {
        String TAG = "GCM Already register";
        String SENDER_ID =<Your Gcm ID>;

        GCMRegistrar.checkDevice(context);
        GCMRegistrar.checkManifest(context);

        String gcmRegId = GCMRegistrar.getRegistrationId(context);
        System.out.println("GCM Reg id is ======>"+gcmRegId);

        if (gcmRegId.equals("")) 
        {
          GCMRegistrar.register(context, SENDER_ID);
          System.out.println("GCM Reg id is ======>blank");
          String gcmregID = GCMRegistrar.getRegistrationId(context);
          System.out.println("GCM Reg id is ======>"+gcmregID);
          return gcmregID;
        } 
        else 
        {
          Log.v(TAG, "Already registered");
        }
        return gcmRegId;
 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-01T11:30:20.677

获取设备ID

```
import android.provider.Settings.Secure;
String android_id=Secure.getString(getContext().getContentResolver(),Secure.ANDROID_ID); 
```

# c# - Parameters.AddWithValue 没有用实际值替换占位符文本

> ID：13580941
> 
> 赞同：4
> 
> 时间：2012-11-27T09:22:19.040
> 
> 标签：c#, .net, mysql, parameter-passing

我正在尝试将参数化查询与 MySQL 一起使用。这个理论看起来很简单，你创建一个**MySqlCommand**类的新实例，如下所示：

```
MySqlCommand command = new MySqlCommand(); 
```

**将此对象的CommandText**属性设置为带有占位符的 MySQL 查询，如下所示：

```
command.CommandText = "INSERT INTO `myTable` (`myField`) VALUES('@bar'); 
```

使用**AddWithValue**方法将占位符文本替换为实际值：

```
command.Parameters.AddWithValue("@bar", "HelloWorld"); 
```

这就是我认为它的工作方式，但实际上“@bar”这个词最终被附加，而不是“HelloWorld”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T09:29:01.833

尝试不用单引号

```
command.CommandText = "INSERT INTO `myTable` (`myField`) VALUES(@bar); 
```

# opengl-es - Adreno GPU - 片段着色器：函数中的纹理 2D 导致 glLinkProgram 崩溃

> ID：13580944
> 
> 赞同：4
> 
> 时间：2012-11-27T09:22:31.540
> 
> 标签：opengl-es, opengl-es-2.0, glsl, samsung-mobile, fragment-shader

我们有一个奇怪的问题。直接使用`texture2D`时调用有效，但在具有返回值的函数中使用时调用无效。

该设备是三星 S3、SPH-L710、Android 4.0.4、Adreno 225。

我们正在使用的代码适用于 Tegra、PowerVR、Mali 等。但不适用于 Adreno。

示例代码：

```
vec4 myTex2D(sampler2D s, vec2 uv)
{
   return texture2D(s, uv);
}

void ShaderRun()
{
  IShaderNode_SetOutputColor0(myTex2D(s, IShaderNode_GetInputTexcoord0().xy));
}

void main(void)
{
  glFragColor = IShaderNode_GetOutputColor0();
} 
```

这里没什么特别的。这些`IShaderNode_*`函数是我们基于节点的着色器系统的访问器。这也是我们在函数中进行此调用的原因。

问题是，这段代码在 Adreno Profiler 的 Shader Analyzer 中没有显示任何错误，也没有`glCompileShader`返回任何错误。

但是我们在`glLinkProgram`使用这个着色器时发生了崩溃：

```
11-27 09:10:10.599: I/faktum(24249): Check: Clockspeed: 1512
11-27 09:10:10.599: I/faktum(24249): Check: Manufactor: 0
11-27 09:10:10.599: I/faktum(24249): Check: Sys Code To File: 1512
11-27 09:10:10.599: I/faktum(24249): SV: Save: Calculated CRC: 114273795
11-27 09:10:10.599: I/faktum(24249): SV: Save: Size: 7917
11-27 09:10:10.760: I/DEBUG(24198): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
11-27 09:10:10.760: I/DEBUG(24198): Build fingerprint: 'samsung/d2spr/d2spr:4.0.4/IMM76D/L710VPALI3:user/release-keys'
11-27 09:10:10.760: I/DEBUG(24198): pid: 24249, tid: 24279 >>> com.vivamedia.cmGGTHD <<<
11-27 09:10:10.760: I/DEBUG(24198): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000018
11-27 09:10:10.760: I/DEBUG(24198): r0 00000000 r1 00000001 r2 00000000 r3 015f39d8
11-27 09:10:10.760: I/DEBUG(24198): r4 015ed4c0 r5 014c6510 r6 60961e50 r7 015f3528
11-27 09:10:10.760: I/DEBUG(24198): r8 0000000a r9 00000000 10 015f3618 fp 60961e54
11-27 09:10:10.760: I/DEBUG(24198): ip 00000004 sp 60961d98 lr 5d148a2b pc 5d14b0a4 cpsr 08000030
11-27 09:10:10.760: I/DEBUG(24198): d0 0084001200000047 d1 0084000000000055
11-27 09:10:10.760: I/DEBUG(24198): d2 0000004700003210 d3 000000550084000e
11-27 09:10:10.760: I/DEBUG(24198): d4 0000321000840012 d5 0000003200000053
11-27 09:10:10.760: I/DEBUG(24198): d6 0000004700000003 d7 0000005500840013
11-27 09:10:10.760: I/DEBUG(24198): d8 0000000000000000 d9 0000000000000000
11-27 09:10:10.760: I/DEBUG(24198): d10 0000000000000000 d11 0000000000000000
11-27 09:10:10.760: I/DEBUG(24198): d12 0000000000000000 d13 0000000000000000
11-27 09:10:10.760: I/DEBUG(24198): d14 0000000000000000 d15 0000000000000000
11-27 09:10:10.760: I/DEBUG(24198): d16 3feffead00000000 d17 3dbebd9ffead0000
11-27 09:10:10.760: I/DEBUG(24198): d18 3fe0000000000000 d19 3fe000000003d7b4
11-27 09:10:10.760: I/DEBUG(24198): d20 3fa55553e1053a42 d21 3f6941845904b7dd
11-27 09:10:10.760: I/DEBUG(24198): d22 3ff0000000000000 d23 3ef99342e0ee5069
11-27 09:10:10.760: I/DEBUG(24198): d24 3ef99342e0ee5069 d25 3fdbeaaaa0000000
11-27 09:10:10.760: I/DEBUG(24198): d26 4068200000000000 d27 3ef99342e0ee5069
11-27 09:10:10.760: I/DEBUG(24198): d28 c00005c02b53cb8a d29 bf66fdec79316df6
11-27 09:10:10.760: I/DEBUG(24198): d30 bc0a42cc192d5632 d31 be23e4f5df600000
11-27 09:10:10.760: I/DEBUG(24198): scr 60000010
11-27 09:10:11.040: I/DEBUG(24198): #00 pc 000690a4 /system/lib/libsc-a2xx.so (_ZN6Symbol7SetILIDEj)
11-27 09:10:11.040: I/DEBUG(24198): #01 pc 00066a26 /system/lib/libsc-a2xx.so (_Z9PatchCodeRSt6vectorIP11ATIFunctionSaIS1_EERKS3_RS_IjSaIjEERS_IiSaIiEESC_SC_S9_iiRSt3mapISsP6SymbolSt4lessISsESaISt4pairIKSsSF_EEERS_I9ConstDeclSaISO_EERS_I8ConstUseSaISS_EE10ShaderTypeb)
11-27 09:10:11.040: I/DEBUG(24198): #02 pc 00067304 /system/lib/libsc-a2xx.so (_ZN10TATILinker17generateFinalCodeERSt6vectorIjSaIjEERKS0_IP11ATIFunctionSaIS5_EEiRS0_IiSaIiEESC_SC_10ShaderTypeS3_S3_RSt3mapISsP6SymbolSt4lessISsESaISt4pairIKSsSG_EEEbSO_SO_RSE_IiSG_SH_IiESaISJ_IKiSG_EEESO_SO_PSN_SG_Pc)
11-27 09:10:11.040: I/DEBUG(24198): #03 pc 00068d8a /system/lib/libsc-a2xx.so (_ZN10TATILinker4linkER7TVectorIP9TCompilerER13LinkerOptions)
11-27 09:10:11.040: I/DEBUG(24198): #04 pc 0008bd02 /system/lib/libsc-a2xx.so (ShLink)
11-27 09:10:11.040: I/DEBUG(24198): #05 pc 0009e7d6 /system/lib/libsc-a2xx.so (_ZN8sclState4linkEPK18sclInputShaderPairRK17sclCompilerParams)
11-27 09:10:11.040: I/DEBUG(24198): #06 pc 0009ecca /system/lib/libsc-a2xx.so (_Z7sclLinkP16sclHandleTypeRecPK18sclInputShaderPairRK17sclCompilerParams)
11-27 09:10:11.040: I/DEBUG(24198): #07 pc 0009d7ce /system/lib/libsc-a2xx.so (__link_shaders)
11-27 09:10:11.040: I/DEBUG(24198): #08 pc 0002dd3a /system/lib/egl/libGLESv2_adreno200.so (qgl2DrvAPI_glLinkProgram)
11-27 09:10:11.040: I/DEBUG(24198): #09 pc 0001cbe6 /system/lib/egl/libGLESv2_adreno200.so (glLinkProgram)
11-27 09:10:11.040: I/DEBUG(24198): code around pc:
11-27 09:10:11.040: I/DEBUG(24198): 5d14b084 4770b280 47706001 28036800 2000bf8c ..pG.`pG.h.(... 
11-27 09:10:11.040: I/DEBUG(24198): 5d14b094 47702001 4770301c 47706b40 47706181 . pG.0pG@kpG.apG
11-27 09:10:11.040: I/DEBUG(24198): 5d14b0a4 47706980 477063c1 47706bc0 0040f890 .ipG.cpG.kpG..@.
11-27 09:10:11.050: I/DEBUG(24198): 5d14b0b4 bf004770 64826441 477064c3 47706441 pG..Ad.d.dpGAdpG
11-27 09:10:11.050: I/DEBUG(24198): 5d14b0c4 47706c40 47706cc0 47706c80 41f0e92d @lpG.lpG.lpG-..A
11-27 09:10:11.050: I/DEBUG(24198): code around lr:
11-27 09:10:11.050: I/DEBUG(24198): 5d148a08 9b35e06a 1164f8d3 00e4f8d3 2021f850 j.5...d.....P.! 
11-27 09:10:11.050: I/DEBUG(24198): 5d148a18 f8d3922f 1c481164 0164f8c3 f002982f /...d.H...d./...
11-27 09:10:11.050: I/DEBUG(24198): 5d148a28 9a0dfb3d 5853991d 4218681b 982fd00c =.....SX.h.B../.
11-27 09:10:11.050: I/DEBUG(24198): 5d148a38 f002930a 990afb33 0c01ea20 f8d09835 ....3... ...5...
11-27 09:10:11.050: I/DEBUG(24198): 5d148a48 f85220f0 932f302c 46594650 fd4cf7ea . R.,0/.PFYF..L.
11-27 09:10:11.050: I/DEBUG(24198): stack:
11-27 09:10:11.050: I/DEBUG(24198): 60961d58 60961f54 
11-27 09:10:11.050: I/DEBUG(24198): 60961d5c 5d132e21 /system/lib/libsc-a2xx.so
11-27 09:10:11.050: I/DEBUG(24198): 60961d60 60961f54 
11-27 09:10:11.050: I/DEBUG(24198): 60961d64 5d147b05 /system/lib/libsc-a2xx.so
11-27 09:10:11.050: I/DEBUG(24198): 60961d68 60961f54 
11-27 09:10:11.050: I/DEBUG(24198): 60961d6c 00000008 
11-27 09:10:11.050: I/DEBUG(24198): 60961d70 60961e6c 
11-27 09:10:11.050: I/DEBUG(24198): 60961d74 015ed480 [heap]
11-27 09:10:11.050: I/DEBUG(24198): 60961d78 014c6510 [heap]
11-27 09:10:11.050: I/DEBUG(24198): 60961d7c 015ed4b4 [heap]
11-27 09:10:11.050: I/DEBUG(24198): 60961d80 015ed4b8 [heap]
11-27 09:10:11.050: I/DEBUG(24198): 60961d84 014c6510 [heap]
11-27 09:10:11.050: I/DEBUG(24198): 60961d88 60961e50 
```

..... 等等

**现在是奇怪的部分。**

以这种方式替换 myTex2D 调用时...

```
vec4 myTex2D(sampler2D s, vec2 uv)
{
  return texture2D(s, uv);
}

void ShaderRun()
{
  IShaderNode_SetOutputColor0(texture2D(s, IShaderNode_GetInputTexcoord0().xy));
}

void main(void)
{
  glFragColor = IShaderNode_GetOutputColor0();
} 
```

...通过直接调用`texture2D`. 有用！

有人可以解释一下吗？我们尝试了不同的精度，存储参数等。没有任何帮助。

在 Adreno GPU 的着色器中使用具有返回值的函数时，有什么特别需要考虑的吗？

我们不知道在这里做什么。看来这是驱动程序问题。

编辑 2012 年 11 月 30 日：
我们通过使用定义而不是包含函数的 texture2D 的子函数得到了解决方法。

# c# - 如何使用 C# 选择具有 XML 命名空间的 XML 节点

> ID：13580945
> 
> 赞同：0
> 
> 时间：2012-11-27T09:22:32.307
> 
> 标签：c#, xml, namespaces

我必须使用 C# 分析具有特殊命名空间的 XML 文档，我从[这篇文章](https://stackoverflow.com/questions/4633127/how-to-select-xml-nodes-with-xml-namespaces-from-an-xmldocument)中得到了一些想法。但是我的代码未能得到预期的 XML 节点，因为 XML 结构非常特殊......

XML的根节点中有一个命名空间

```
<MDOC xmlns="urn:schemas-microsoft-com/PSS/PSS_Survey01"> 
```

这是我获取此根节点的代码

```
 XmlDocument doc = new XmlDocument();
        doc.Load(path);

        XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);
        nsmgr.AddNamespace("urn", "schemas-microsoft-com/PSS/PSS_Survey01");

        XmlNode root = doc.SelectSingleNode("MDOC", nsmgr); 
```

帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:35:37.850

我不确定您的 XML 结构有什么特别之处。

我会以不同的方式编写代码

```
string xmlNamespace = String.Empty;
XmlNamespaceManager nsmgr;
XmlNodeList nodeInfo = FABRequestXML.GetElementsByTagName("RootNodeName");
xmlNamespace = Convert.ToString(nodeInfo[0].Attributes["xmlns"].Value);
nsmgr = new XmlNamespaceManager(MyXml.NameTable);
nsmgr.AddNamespace("AB", xmlNamespace);

XmlNode myNode = MyXml.DocumentElement.SelectSingleNode("AB:NodeName", nsmgr); 
```

希望有帮助

# javascript - 如何避免在 GWT cache.js 文件中生成 document.write

> ID：13580947
> 
> 赞同：2
> 
> 时间：2012-11-27T09:22:32.540
> 
> 标签：javascript, gwt, client-side

我正在使用 Gwt 2.4。编译我的项目后，我得到了一些`mymodle.chache.js`最奇怪的 document.write 行。

所以我想知道在我的 GWT 代码中产生这些行的地方，并发现了一些代码行，比如

`element.setInnerHtml("blah ..blah..")`;

和

`doc.write("blah..blah ..")`;

所以我删除了那行代码并再次编译，仍然得到一些`(ex:document.write(df+er+t))`行。

任何人都建议一种方法来找到从我的 GWT 产生这些行的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:22:05.167

（假设您谈论的是`*.nocache.js`文件而不是`*.cache.*`文件，因为`*.cache.*`不包含对 的调用`document.write`，除非您使用的是蹩脚的第三方库）

该`*.nocache.js`文件由主链接器生成，因此其内容独立于您的代码。它包含对各种事情的调用`document.write()`：确定您的*模块基本 URL*（作为最后的手段，当它无法从其他地方推断它时），注入从您的`*.gwt.xml`文件引用的脚本和样式表，最后注入 GWT 应用程序代码本身（使用标准链接器, 这将是一个`<iframe>`, 使用较新的`xsiframe`链接器它将是`<script>`)。
如果您真的担心它，可以通过扩展`CrossSiteIframeLinker`（`xsiframe`链接器）并提供不同的代码片段来轻松定制它。

提示：compile with`-style PRETTY`使生成的代码可读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:27:00.193

您不应该手动编辑/修改 mymodel.cache.js。该文件再次从 GWT 编译器生成。您想通过手动编辑解决什么问题？

# c - C中的局部变量和静态变量

> ID：13580950
> 
> 赞同：18
> 
> 时间：2012-11-27T09:22:38.120
> 
> 标签：c, assembly, static

编译时：

```
// external definitions
int value1 = 0;
static int value2 = 0; 
```

gcc 编译器生成以下程序集：

```
.globl value1
        .bss
        .align 4
        .type   value1, @object
        .size   value1, 4
value1:
        .zero   4
        .local  value2
        .comm   value2,4,4 
```

但是，当我将变量初始化为非零值时，例如：

```
// external definitions
int value1 = 1;
static int value2 = 1; 
```

gcc 编译器生成以下内容：

```
.globl value1
        .data
        .align 4
        .type   value1, @object
        .size   value1, 4
value1:
        .long   1
        .align 4
        .type   value2, @object
        .size   value2, 4
value2:
        .long   1 
```

我的问题是：

1.  为什么在第一种情况下，值是在 bss 段中分配的，而在第二种情况下是在数据段中分配的。
2.  为什么 value2 变量在第一种情况下被定义为 .local 和 .comm ，而在第二种情况下没有。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T09:33:45.937

一般来说，`bss`节包含未初始化的值，`data`节包含已初始化的值。但是，gcc 将初始化为零的值放入`bss`部分而不是`data`部分，因为`bss`无论如何该部分在运行时都被清零，在该部分中存储零没有多大意义`data`，这可以节省一些磁盘空间，来自 man海湾合作委员会：

> -fno-zero-initialized-in-bss 如果目标支持 BSS 部分，**GCC 默认将初始化为零的变量放入 BSS。这可以节省结果代码中的空间。**此选项会关闭此行为，因为某些程序显式依赖于进入数据部分的变量

我不确定为什么`.comm`要与目标文件本地的*静态*存储一起使用，它通常用于声明公共符号，如果*未定义*/初始化，则应由链接器将其与具有相同名称的符号与其他符号合并目标文件，这就是为什么在第二个示例中未使用它的原因，因为变量已初始化，来自`as` [手册](http://sourceware.org/binutils/docs-2.20/as/Comm.html#Comm)

> .comm 声明了一个名为 symbol 的通用符号。链接时，一个目标文件中的通用符号可以与另一个目标文件中已定义或同名的通用符号合并

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T09:55:25.753

第一种情况是因为您将值初始化为零。这是[C 标准](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)（第 6.7.8 节）的一部分，如果未指定全局整数，则将其初始化为 0。因此，文件格式通过在以下位置放置一个特殊部分来保持二进制文件更小：`bss`. 如果您查看一些[ELF 规范](http://refspecs.linuxbase.org/elf/elf.pdf)（第 I-15 页），您会发现：

> .bss 此部分保存有助于程序内存映像的未初始化数据。根据定义，系统在程序开始运行时用零初始化数据。该节不占用文件空间，如节类型 SHT_NOBITS 所示。

在第一种情况下，编译器进行了优化。它不需要在实际二进制文件中占用空间来存储初始化程序，因为它可以使用`bss`段并免费获得您想要的段。

现在，您有一个来自外部源的静态数据这一事实有点有趣（通常不会这样做）。但是，在正在编译的模块中，它不应该与其他模块共享，并且应该用`.local`. 我怀疑它这样做是因为没有为初始化程序存储实际值。

在第二个示例中，因为您给出了一个非零初始化器，它知道它位于已初始化的数据段`data`中。 `value1`看起来很相似，但是对于`value2`，编译器需要为初始化器预留空间。在这种情况下，它不需要标记为，`.local`因为它可以只设置值并完成它。它不是全球性的，因为没有`.globl`针对它的声明。

顺便说一句，[http:](http://refspecs.linuxbase.org/) //refspecs.linuxbase.org/是访问有关二进制格式等的一些低级详细信息的好地方。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T09:36:45.920

[BSS](http://en.wikipedia.org/wiki/.bss)是包含在*运行时*初始化的数据的段，而数据段包含在*程序二进制*中初始化的数据。

现在静态变量总是被初始化，无论是否在程序中显式完成。但是有两个单独的类别，初始化（DS）和未初始化（BSS）静态。

BSS 中存在的所有值都是未在程序代码中初始化的值，因此在运行时加载程序时初始化为 0（如果是整数），指针为 null 等。

*因此，当您使用 0 进行初始化时，该值将转到 BSS，因为分配的任何其他值都将在数据段中分配变量。*

一个有趣的结果是，*在 BSS 中初始化的数据大小不会包含在程序二进制文件中，而数据段中的数据大小会包含在内。*

尝试分配一个大的静态数组并在程序中使用它。查看未在代码中显式初始化时的可执行文件大小。然后用非零值初始化它，比如

```
static int arr[1000] = {2}; 
```

在后一种情况下，可执行文件的大小将明显更大

# php - 如何在 FCK 编辑器中添加泰米尔语

> ID：13580957
> 
> 赞同：1
> 
> 时间：2012-11-27T09:23:10.397
> 
> 标签：php, fckeditor, multilingual, tamil

我在我的网站管理员中使用 FCK 编辑器。我的编辑器中有一些语言支持，例如（英语、德语、法语等）。现在我需要将泰米尔语支持添加到我的 FCK 编辑器中。如果有任何熟悉此 FCK 编辑器语言支持功能的人。尽快让我知道。

注意：我正在使用这个 FCK 编辑器开发 PHP 网站。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:44:22.790

[CKEditor 支持语言选择（请参阅此处](http://ckeditor.com/demo)的多语言支持）。泰米尔语不是官方支持的语言，但您可以实现自己的泰米尔语支持。有很多关于如何做到这一点的指南，例如参见[http://theholyjava.wordpress.com/2011/04/04/how-to-customize-ckeditor-with-your-own-plugins-skins-configurations/](http://theholyjava.wordpress.com/2011/04/04/how-to-customize-ckeditor-with-your-own-plugins-skins-configurations/) (自定义语言部分）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:08:09.797

我通过以下步骤得到了答案，

**步骤1：**为泰米尔字体创建一个“tn.js”文件（从“en.js”[fckeditor/editor/lang/]中复制一份并用名称为“tn.js”的泰米尔字体替换）并上传进入“fckeditor/editor/lang/”目录。

**第 2 步：**在“fcklanguagemanager.js”、“fckeditorcode_gecko.js”和“fckeditorcode_ie.js”文件中包含语言代码和语言标题。

这些文件正在下，

(1)。*fcklanguagemanager.js* ---> fckeditor/editor/_source/internals/

搜索单词“AvailableLanguages：”并在可用语言数组中添加泰米尔语代码和标题（tn：'泰米尔语'）。

(2)。fckeditorcode_gecko.js ---> fckeditor/editor/js/

搜索单词“AvailableLanguages：”并在可用语言数组中添加泰米尔语代码和标题（tn：'泰米尔语'）。

(3)。fckeditorcode_ie.js ---> fckeditor/editor/js/

搜索单词“AvailableLanguages：”并在可用语言数组中添加泰米尔语代码和标题（tn：'泰米尔语'）。

**例子 ：**

```
var FCKLanguageManager=FCK.Language={AvailableLanguages:{af:'Afrikaans',ar:'Arabic',bg:'Bulgarian',bn:'Bengali/Bangla',bs:'Bosnian',ca:'Catalan',cs:'Czech',da:'Danish',de:'German',el:'Greek',en:'English','en-au':'English (Australia)','en-ca':'English (Canadian)','en-uk':'English (United Kingdom)',eo:'Esperanto',es:'Spanish',et:'Estonian',eu:'Basque',fa:'Persian',fi:'Finnish',fo:'Faroese',fr:'French','fr-ca':'French (Canada)',gl:'Galician',gu:'Gujarati',he:'Hebrew',hi:'Hindi',hr:'Croatian',hu:'Hungarian',is:'Icelandic',it:'Italian',ja:'Japanese',km:'Khmer',ko:'Korean',lt:'Lithuanian',lv:'Latvian',mn:'Mongolian',ms:'Malay',nb:'Norwegian Bokmal',nl:'Dutch',no:'Norwegian',pl:'Polish',pt:'Portuguese (Portugal)','pt-br':'Portuguese (Brazil)',ro:'Romanian',ru:'Russian',sk:'Slovak',sl:'Slovenian',sr:'Serbian (Cyrillic)','sr-latn':'Serbian (Latin)',sv:'Swedish',th:'Thai',tn:'Tamil',tr:'Turkish',uk:'Ukrainian',vi:'Vietnamese',zh:'Chinese Traditional','zh-cn':'Chinese Simplified'} 
```

**第 3 步：**为您的编辑器设置默认语言，例如，

如果您在 html 网页页面中使用 JavaScript，则只需嵌入如下所示。

```
<script type="text/javascript">
oFCKeditor.Config["AutoDetectLanguage"] = false ;
oFCKeditor.Config["DefaultLanguage"]    = 'tn' ;
</script> 
```

如果您在您的网页页面中使用 PHP 意味着只需像下面这样嵌入，

```
<?php 
$oFCKeditor->Config['AutoDetectLanguage']   = false ;
$oFCKeditor->Config['DefaultLanguage']  = 'en' ;
?> 
```

**第 4 步：**运行您的网页以查看它的实际效果。

# jquery - jQuery悬停问题错误

> ID：13580960
> 
> 赞同：0
> 
> 时间：2012-11-27T09:23:11.987
> 
> 标签：jquery, css

[小提琴](http://jsfiddle.net/p9m9k/2/)

要重现错误：

1.  将鼠标悬停在 bbb111 上快速几次（快速我的意思是每秒几次） - 我认为最好的方法是自上而下移动鼠标（不是侧面/侧面）
2.  然后将鼠标悬停在 bbb111 上并将其子菜单悬停在 ccc222 上。
3.  ccc222 有另一个子菜单，它不会按应有的方式显示。（主菜单不会向下移动，子菜单将不可见（将在主菜单下 - 如果您设置`overflow:visible`它是可见的但它在主菜单下并且主菜单仍然不会向下移动以腾出另一个子菜单的位置。

在 Mozilla、Opera 和 Chrome 上转载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:51:30.447

好的，我找到了解决方案。问题是 jQuery 将内联样式 attr 应用于元素，如果 stop() 被触发，这些样式在动画中间保持“原样”，溢出：隐藏的东西等。解决方案是“重置”菜单状态 - 添加到 mouseIn动画回调函数`$(this).removeAttr('style');`

# php - 带有 mysql 和 php 的 HTML

> ID：13580961
> 
> 赞同：1
> 
> 时间：2012-11-27T09:23:15.660
> 
> 标签：php, sql

我在 mysql 中存储了一些带有 html 代码的记录，它也存储它们，但是当我想更改它们时，它会强制我进入数据库然后更改，但我希望我创建一个可以浏览 html 页面的 php 文件存储在 mysql 中，现在我有更新功能，但是当我更改一些文本或添加一些东西时

它显示错误“您的 SQL 语法有错误；请检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '= '' WHERE BookId = '25'' 附近使用正确的语法”

这是我的代码：

```
mysql_query("UPDATE inhweb SET homepage ='$homepage', services = '$services', departments = '$departments', $contacts = '$contacts' WHERE BookId = '$id'")
            or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:25:11.083

尝试这个：

```
mysql_query("UPDATE inhweb SET homepage ='$homepage', services = '$services', departments = '$departments', contacts = '$contacts' WHERE BookId = '$id'")
        or die(mysql_error()); 
```

我不认为你的 MySQL`contacts`列名应该在`$`那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:26:43.093

您的查询中有一个`$`符号和您的字段名称`contacts``$contacts ='$contacts'`

# objective-c - 将 audioUnit 或只是另一个类设置为不在主线程上

> ID：13580964
> 
> 赞同：0
> 
> 时间：2012-11-27T09:23:21.573
> 
> 标签：objective-c, cocoa, core-audio

我有一个在应用程序启动时打开的主视图（或 cocos2d 中的场景）。从那里我调用 audioUnit 来收听来自麦克风的输入音频。它工作得很好（audioUnit 上的回调总是被调用并做一些事情），但我可以看到它占用了主线程——这是我不想要的，因为主场景`UILabel`和其他需要成为主线程的东西才能被改变。

在`main scene`我开始时：

```
remoteIns=[[remoteIO alloc]init]; //turn on the callback function on class remoteIO .
[remoteIns StartListeningWithFrequency]; // this function takes the main thread 
```

然后当我`main scene`稍后签入时：

```
NSLog(@"isMainThread%d",[NSThread isMainThread]); 
```

我可以看到它不是主线程，因此我无法更改`UILabels`它。

我需要启动audioUnit函数（另一个类）并将其设置在另一个线程中，保持主场景为主线程，并让`audioUnit`工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T00:14:26.247

在主线程上运行某些东西的一种更简单的方法是使用块。这样，您可以执行多个操作，并且看起来像“正常”代码。调用带有两个以上参数的例程也简单**得多：**

```
dispatch_sync(dispatch_get_main_queue(), ^{
    // Any code that you put in here will be run on the main thread.
    // However, MAKE SURE that you do not actually call this from the main thread or
    // your program will hang!

    // i.e.:
    self.label.text = @"New text";       
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:31:41.380

音频单元不在主线程中。但是主场景也不在主线程中。

为了改变主场景上的 UILabel ，它主要是主线程，所以我用这个来改变它的文本：（它在场景观察者中被调用来调用一个改变文本的函数：

```
[self performSelectorOnMainThread: @selector( updateText: ) withObject: bits waitUntilDone: YES]; 
```

并在`updateText:`我更改文本。效果很好。

# javascript - jQuery 函数 .change()

> ID：13580970
> 
> 赞同：0
> 
> 时间：2012-11-27T09:23:49.243
> 
> 标签：javascript, jquery

我需要一些帮助。

我的jsp中有这段代码，用于使用Jquery捕获事件onchange。

```
jQ("#idExp").change(function() { 
        onchangeExp();
    });

function onchangeExp(){
    alert("onchangeExp");
    if(jQ("#idExp").val()!="-1"){
        recuperarDatosAF();
    }else{
        jQ("#comboAF").attr('disabled',true);
        jQ("#comboAF").val("-1");
    }
} 
```

我用这个填充组合：

```
 jQ("#idExp").html("");
 jQ("#idExp").append("<option value='-1'>"+""+"</option>");
 jQ.each(expedientes, function(i,value){
     jQ("#idExp").append("<option value='"+i+"'>"+value.codExpediente+" </option>"); 
 }); 
```

i 的值为 [0,1,2..]

问题是，当我从值为“-1”的组合中选择空白选项时，不启动 onchange 函数运行，而是当我从组合中选择任何其他选项时，onchange 函数运行。

你不能把组合选项的负值？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:27:01.983

您的选择框的默认值是您的第一个选项的值，因此选择框的值不会更改并且不会触发更改事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:31:47.697

尝试添加一个实整数作为这样的值

```
jQ(function() {
    var j = jQ('#idExp');
    j.append(jQ('<option/>').attr('value', -1));
    j.change(function() {
        if(j.val() == -1) {
            jQ("#comboAF")
                .attr('disabled',true)
                .val("-1");
        }
        else {
            recuperarDatosAF();
        } 
    }).trigger('change');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:40:30.450

您可以在附加选项时触发更改事件：

```
jQ("#idExp").append("<option value='-1'>"+""+"</option>").change(); 
```

# html - CSS - 带有盒子阴影插图的角半径，丑陋的角落

> ID：13580974
> 
> 赞同：2
> 
> 时间：2012-11-27T09:23:56.963
> 
> 标签：html, css

当我尝试将框阴影应用于具有 3px 边框半径的元素时，我会得到带有元素背景像素的丑角。

HTML

```
<div id="wrapper">

</div> 
```

CSS

```
body {
    background: #fff;
}

#wrapper {
    background: black;
    width: 300px;
    height: 300px;
    margin: 40px auto;
    border-radius: 3px;
    -moz-box-shadow: inset 0 0 5px 4px yellow;
    -webkit-box-shadow: inset 0 0 5px 4px yellow;
    box-shadow: inset 0 0 5px 4px yellow;
} 
```

JSFIDDLE [http://jsfiddle.net/PCzFC/1/](http://jsfiddle.net/PCzFC/1/)

如果你看小提琴，你会发现黑色背景在角落里。它应该是这样的还是一个错误？我使用火狐。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:07:22.930

这是 Google Chrome 中的一个已知错误，也许它也存在于 Firefox 中。 [http://code.google.com/p/chromium/issues/detail?id=29427](http://code.google.com/p/chromium/issues/detail?id=29427)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T00:56:27.433

您可以在没有插图的情况下创建相同的效果。在它周围做一个黄色的包装纸。

```
body {
    background: #fff;
}

#wrapper {
    background: black;
    width: 290px;
    height: 290px;
    border-radius: 3px;
    -moz-box-shadow: 0 0 5px 1px black;
    -webkit-box-shadow: 0 0 5px 1px black;
    box-shadow: 0 0 5px 1px black;
    margin: 5px;
}
.yellow {
    background: yellow;
    border-radius: 6px;
    overflow: hidden;
    width: 300px;
    height: 300px;
    margin: 40px auto;
}​

<div class="yellow">
<div id="wrapper">

</div>
</div> 
```

[http://jsfiddle.net/PCzFC/65/](http://jsfiddle.net/PCzFC/65/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:33:36.503

shadow: inset 的作用是在框内添加阴影。如果删除所有盒子阴影上的插图，阴影将移动到盒子的外部。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-27T09:43:17.673

这不是一个错误，因为您使用了插入阴影效果，如果您能理解 css，那么插入的含义就在里面，所以如果您从代码中删除插入是正常的，那么它应该看起来不错，或者如果您需要框内的阴影效果那么您必须选择颜色并将其与框颜色匹配，或者您可以从代码中删除边框半径，那么它应该看起来不错

```
#wrapper {
    background: black;
    width: 300px;
    height: 300px;
    margin: 40px auto;
    -moz-box-shadow: inset 0 0 5px 4px yellow;
    -webkit-box-shadow: inset 0 0 5px 4px yellow;
    box-shadow: inset 0 0 5px 4px yellow;
} 
```

# iphone - AppDelegate 类中 DidFinishLoading 之前的 Delalloc 调用

> ID：13580979
> 
> 赞同：0
> 
> 时间：2012-11-27T09:24:13.743
> 
> 标签：iphone, dealloc

在我的应用程序中，当我使用 xcode 4.2 运行它时，它运行良好，但是当我使用 xcode 4.5 运行它时，我发现那里出现严重错误。我发现`Dealloc`ApplicationDelegate的方法首先调用，甚至它先调用然后`DidFinishLaunching`再调用。

自从上次 bud 没有得到任何解决方案以来，我一直在寻找这些东西。

提前致谢！

# .net - 如何偷偷保存使用计数器？

> ID：13580982
> 
> 赞同：-1
> 
> 时间：2012-11-27T09:24:17.730
> 
> 标签：.net, windows, registry

我正在为 Windows 7/8/2003/2008/XP 开发一个 .NET 应用程序，我必须在其中存储一个使用计数器。我不希望用户找到并更改它（或者至少我希望它很难找到和更改它）。这是我为大型企业商店的技术用户提供的免费版本。我想让他们每天使用 10 次或完全使用 30 次。

我想将它加密保存到 Windows 注册表中，但是我刚刚发现如果应用程序是由非本地管理员用户安装的，我无法保存到其他任何本地用户。

我确实想让非本地管理员用户安装它，我该怎么办？我考虑将它保存到文件中`%appdata%`- 你会这样做吗？

期待听到任何建议...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:31:32.060

我认为在您的情况下，您将它保存在哪里并不重要，而是您如何保存它。
**[加密](https://stackoverflow.com/a/2150863/1379664)**计数器的数据并将*加密*的数据添加到注册表（或将其保存为应用程序目录中的文件）。
如果数据被修改或删除，请阻止您的应用程序运行。

# windows-phone-7 - 如何检查蜂窝网络的信号质量

> ID：13580984
> 
> 赞同：-1
> 
> 时间：2012-11-27T09:24:19.337
> 
> 标签：windows-phone-7

挑战在于我需要接收网络可用性的状态，如果信号非常低，请执行一些操作。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:37:34.187

您可以尝试[MSDN How To: Detect Network Changes for Windows Phone](http://msdn.microsoft.com/en-US/library/hh487166%28v=vs.92%29.aspx#BMK_NETDET_REGISTERING)。它至少可以为您指明正确的方向。

# db2 - 有什么办法可以避免在 DB2 查询中出现“情况”以提高性能

> ID：13580992
> 
> 赞同：-1
> 
> 时间：2012-11-27T09:24:38.073
> 
> 标签：db2, query-optimization

请找到以下查询并建议我避免大小写并重写以下查询。

```
select A.ID, CASE B.ID IS NOT NULL THEN B.ABID
             ELSE B.XYID  END AS ABXYID
FROM Table_A A, Table_B B
WHERE A.PK = B.PK 
```

请重新编写上述查询以获得更好的性能。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:00:01.410

不完全是您要查找的内容，但[COALESCE](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000780.html)函数返回其第一个不为空的参数。

如果 B.ID 为 NULL 时 B.ABID 也为 NULL，那么您可以按如下方式重写代码：

```
select A.ID,
COALESCE(B.ABID, B.XYID) AS ABXYID
FROM
Table_A A,
Table_B B
Where
A.PK=B.PK 
```

哦，你真的应该使用正确的内部连接：

```
select A.ID,
COALESCE(B.ABID, B.XYID) AS ABXYID
FROM
Table_A A
INNER JOIN Table_B B
ON A.PK=B.PK 
```

# c# - MySqlCommand Command.Parameters.Add 已过时

> ID：13580993
> 
> 赞同：23
> 
> 时间：2012-11-27T09:24:39.513
> 
> 标签：c#, mysql, parameters, deprecated, sqlcommand

我正在 Visual Studio 2010 中制作 C# Windows 窗体应用程序。

该应用程序正在连接到 mysql 数据库，我想在其中插入数据。

现在我有这部分代码：

```
MySqlConnection connection;
string cs = @"server=server ip;userid=username;password=userpass;database=databse";
connection = new MySqlConnection(cs);
connection.Open();

MySqlCommand command = new MySqlCommand();
string SQL = "INSERT INTO `twMCUserDB` (`mc_userName`, `mc_userPass`, `tw_userName`, `tw_userPass`) VALUES ('@mcUserName', '@mcUserPass', '@twUserName', '@twUserPass')";
command.CommandText = SQL;
command.Parameters.Add("@mcUserName", mcUserNameNew);
command.Parameters.Add("@mcUserPass", mcUserPassNew);
command.Parameters.Add("@twUserName", twUserNameNew);
command.Parameters.Add("@twUserPass", twUserPassNew);
command.Connection = connection;
command.ExecuteNonQuery();
connection.Close(); 
```

连接很好。这样可行。

我[在这里](https://stackoverflow.com/questions/7174792/does-using-parameterized-sqlcommand-make-my-program-immune-to-sql-injection)读到，我现在拥有的方式是进行查询的一种保存方式。还是这样吗？

现在是真正的问题。使用上面的代码，我在 Visual Studio 中收到以下警告：

```
'MySql.Data.MySqlClient.MySqlParameterCollection.Add(string, object)' is obsolete: '"Add(String parameterName, Object value) has been deprecated.  Use AddWithValue(String parameterName, Object value)"' 
```

该警告适用于每个参数。添加

它甚至不起作用，因为插入的值是@mcUserName、@mcUserPass 等等，而不是变量 mcUserNameNew 等持有的值......

所以我的问题是，我做错了什么，sql注入保存查询的新方法是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-27T09:27:51.237

尝试`AddWithValue`

```
command.Parameters.AddWithValue("@mcUserName", mcUserNameNew);
command.Parameters.AddWithValue("@mcUserPass", mcUserPassNew);
command.Parameters.AddWithValue("@twUserName", twUserNameNew);
command.Parameters.AddWithValue("@twUserPass", twUserPassNew); 
```

并且不要用单引号包裹占位符。

```
string SQL = "INSERT INTO `twMCUserDB` (`mc_userName`, `mc_userPass`, `tw_userName`, `tw_userPass`) VALUES (@mcUserName, @mcUserPass, @twUserName, @twUserPass)"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-07T06:31:54.597

**编辑：** 正如 Bradley Grainger 指出的，在 MySQL 中使用是安全的`AddWithValue`。如果您偶然来到这里并使用 Microsoft SQL，我会保留我的答案。

* * *

请阅读这篇文章，建议您不要使用`AddWithValue`：

[https://blogs.msmvps.com/jcoehoorn/blog/2014/05/12/can-we-stop-using-addwithvalue-already/](https://blogs.msmvps.com/jcoehoorn/blog/2014/05/12/can-we-stop-using-addwithvalue-already/)

它基本上说`AddWithValue`有时可能会错误地推断出正确的类型。改为使用`Add`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-01T05:48:39.040

只需编辑/删除这部分中的一些代码

```
('@mcUserName', '@mcUserPass', '@twUserName', '@twUserPass') 
```

到

```
(@mcUserName, @mcUserPass, @twUserName, @twUserPass) 
```

和 Add( 到 AddWithValue(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-17T21:44:32.923

@mcUserName 必须匹配查询中的 mc_userName ..

所以你的参数应该是@mc_userName

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-05T20:55:51.903

这是VB代码...

```
cmd.Parameters.AddWithValue("@number", 1) 'set @number as numeric
cmd.Parameters.AddWithValue("@text", "this will be a text variable") 

cmd.Parameters("@number").Value = 321  'now @number has a value
cmd.Parameters("@text").Value = "A string value" 'now @text has a value

cmd.ExecuteNonQuery() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-19T09:55:48.203

应该这样使用以防止任何错误正确设置 dbtype 然后分配

```
cmd.Parameters.Add("@ID", MySqlDbType.Int32); 
```

设置的正确方法`MySqlDBType`

```
cmd.Parameters["@ID"].Value = 1; 
```

现在设置值

# createobject - VB 脚本中的 CreateObject 失败且没有错误消息

> ID：13580996
> 
> 赞同：2
> 
> 时间：2012-11-27T09:24:47.503
> 
> 标签：createobject

我部署了一个 64 位 COM+ 应用程序，在尝试通过脚本创建它的实例时，它失败了，没有错误消息和一个负错误代码 (-2146233036)。

剧本：

```
 dim myObj on error resume next set myObj = CreateObject("TestApp.1") 

 if (Err.number <> 0) 
     then MsgBox Err.Number & " " & Err.Message 
 end if 

 if (myObj is nothing) 
     then MsgBox "Null" else   MsgBox "Not Null" 
 end if 
```

本质上，我试图解决 CoCreateInstanceEx 失败的原因。我如何找出幕后发生的事情？它在哪一步失败？

# jquery - 用jquery推出广告效果

> ID：13580998
> 
> 赞同：0
> 
> 时间：2012-11-27T09:24:59.463
> 
> 标签：jquery

我想在我的网站上做一个广告。以前我看到一个解决方案，当用户访问一个网站时，广告会从右向左推出漏洞页面。是否可以使其与jquery一起使用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:32:15.027

您可以为此使用动画：

[转到 Jquery 动画](http://docs.jquery.com/Effects/animate)

运行演示以查看动画