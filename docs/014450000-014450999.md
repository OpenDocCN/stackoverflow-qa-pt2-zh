# StackOverflow 问答 14450000-14450999

# mercurial - 如何在 TortoiseHg 中验证和克隆远程存储库

> ID：14450000
> 
> 赞同：0
> 
> 时间：2013-01-22T01:10:54.003
> 
> 标签：mercurial, tortoisehg

我正在尝试将远程 Ubuntu 服务器上的存储库克隆到我的本地 Windows 文件系统。以前从未这样做过。我有 TortoiseHg 0.9.3。我右键单击并清空文件夹，然后在 TortoiseHg 弹出菜单中选择“克隆”。我输入`ssh://myusername@mydomain.org/test`作为源路径（那是我的仓库所在的位置），当前位置作为目标路径。然后我点击“克隆”。

TortoiseHg 说：

```
running ""C:\Program Files\TortoiseHg\TortoisePlink.exe" -ssh -2
myuser@mydomain.org "hg -R test serve --stdio"" ... no suitable
response from remote hg  [command interrupted] 
```

然后我从 PuTTY 弹出一个窗口：“网络错误：连接超时”。

我哪里做错了？我从来没有被要求输入密码。我在哪里输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:26:08.750

通过将 TortoiseHg 从 0.9.3 升级到 2.6.x 解决了这个问题

# javascript - 将 touchevents 动态更改为单击事件

> ID：14450001
> 
> 赞同：2
> 
> 时间：2013-01-22T01:11:12.620
> 
> 标签：javascript, touch

我正在开发一个移动应用程序，并且有很多关于各种元素的触摸事件。不幸的是，我无法在我的电脑浏览器上测试我的应用程序，因为它不支持触摸事件。如果我在电脑上运行（当然通过检查用户代理），有什么方法可以将所有触摸事件更改为动态单击事件？

感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:11:52.723

您可以在 chrome web 开发者工具中模拟触摸事件：

![在此处输入图像描述](../Images/0634a9e6984b84f6c04c19ebef6a189c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:15:01.223

Chrome 开发者工具支持触摸模拟。但使用起来并不那么舒服。所以我只是为触摸事件仿真做了一个 chrome 扩展。它将 mousedown、mousemove、mouseup 事件转换为 touchstart、touchmove、touchend。它实际上模拟了iphone5，所以用户代理也改变了。

[https://chrome.google.com/webstore/detail/touchphone-simulator/jijkpkhmnpbecppjhicgegndbbgfnngf](https://chrome.google.com/webstore/detail/touchphone-simulator/jijkpkhmnpbecppjhicgegndbbgfnngf)

# windows-phone-7 - 如何使用 Windows 7 Phone SDK 发出此请求

> ID：14450007
> 
> 赞同：0
> 
> 时间：2013-01-22T01:11:51.807
> 
> 标签：windows-phone-7, networking

您好我有以下 jQuery.post 示例，需要知道如何使用 Windows 7 手机 SDK 发出相同的请求。

任何建议或指针都会被应用。

```
jQuery.post('http://URL',{
      'key':'4ec6975151b8ea0d768f8599541e2ee30fb20a93',
      'function':'getGroupMembers',
      'parameters':{    
        "group":{
            'group_id':'44',
            'user_id':'100003167624583'
        }
    }      
  },
function(res){
   console.log(res);   
},'json'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:32:02.967

[`WebClient.UploadStringAsync`](http://msdn.microsoft.com/en-us/library/ms144240%28v=vs.95%29.aspx)将发布一个字符串并返回结果。您可以使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)（通过 NuGet 或手动下载）来序列化/反序列化：

```
WebClient client = new WebClient();

client.UploadStringCompleted += (s,e) =>
{
    var children = JToken.Parse(e.Result)["some_json_property"].Children();
    // continue here (but remember this is all asynchronous)
};

client.UploadStringAsync(
    new Uri("http://URI"),
    "POST",
    JsonConvert.SerializeObject(new
    {
        key = "4ec6975151b8ea0d768f8599541e2ee30fb20a93",
        function = "getGroupMembers",
        parameters = new {    
            group = {
                group_id = "44",
                user_id = "100003167624583"
            }
        }
    })); 
```

# php - 检查远程图像是否受热链接保护

> ID：14450009
> 
> 赞同：1
> 
> 时间：2013-01-22T01:11:57.683
> 
> 标签：php, javascript, hotlinking

我想检查远程图像是否受热链接保护。

*   如果图像不受盗链保护，我想显示图像。（别担心，我会给源添加一个可见的超链接，并且我会给合法所有者删除图像的可能性。）
*   如果图像受到保护，我什么也不做。

是否有可能（使用 PHP 和/或 Javascript）区分受热链接保护的图像和“可热链接”图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T01:16:21.830

是的，你绝对可以从 PHP 中做到这一点。当您想要热链接文件时，请创建一个 HTTP 连接并在请求中设置Referer 标头到您的站点。如果您收到带有图像数据的 200 响应，则它不受热链接保护。如果您收到 301 转发响应，则它是受热链接保护的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:13:46.653

这样做可能是最简单的：

```
<img src="http://example.com/image.png" onerror="alert('Image not found or protected');" /> 
```

当然，有可能找出答案，但这需要发出 HTTP 请求，这可能会很昂贵——尤其是在远程主机速度慢或负载不足的情况下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-17T17:28:02.050

这是你在 Ruby 中的做法

```
class CheckImageHotlinkStatus
  require 'net/http'
  require 'uri'
  def self.call(image_url)
    uri = URI(image_url)
    req = Net::HTTP::Get.new(uri)
    req['Referer'] = 'http://your-site-here.com'
    response = Net::HTTP.start(uri.hostname, uri.port) do |http|
      http.request(req)
    end
    # Net::HTTPForbidden ...download & embed
    # Net::HTTPOK ...fine to hotlink
    # ...everything else 
    puts response.class
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-27T19:27:00.460

您无法使用客户端 JavaScript 轻松检测每个 URL，但您可以使用[hotlink.js](https://eligrey.com/demos/hotlink.js/)完全规避热链接保护。

# backbone.js - 搜索集合和检索模型backbonejs

> ID：14450011
> 
> 赞同：3
> 
> 时间：2013-01-22T01:12:13.163
> 
> 标签：backbone.js, collections, models

我正在尝试在集合中搜索模型属性，然后抓取并返回整个模型？

```
var myModel = Backbone.Model.extend({
  defaults: {
      a: '',
      b: '',
      c: '',
      d: '',
      e: ''
  }
}); 
```

我的收藏有大约 100 个 myModel。

我正在尝试搜索集合`a`，找到它然后返回整个集合`myModel`，`a`以便我可以访问其他属性？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T01:22:15.823

如果我正确理解您的问题，您想`where`在文档中使用 Backbone 集合的方法：

[http://backbonejs.org/#Collection-where](http://backbonejs.org/#Collection-where)

因此，给定一个名为 myCollection 的 MyCollection 实例，其中包含 MyModels，您可以说：

```
var foundModels = myCollection.where({a:'some value'}); 
```

并将`foundModels`包含您寻找的模型数组

顺便说一句，如果您要进行更复杂的搜索，请改用该`filter`方法，将函数作为第一个参数传递，该参数在所需匹配时返回 true：

```
var modelsWhoseAStartsWithA = myCollection.filter(function(anyModel) {
    var startsWithA = new RegExp(/^[aA]/);
    return startsWithA.test(anyModel.get('a'));
}); 
```

# java - 使用 PrinterJob 打印图像 (Graphics2D)

> ID：14450012
> 
> 赞同：2
> 
> 时间：2013-01-22T01:12:28.823
> 
> 标签：java, graphics, printing, export, awt

有没有办法可以在 Java 中安装 PrinterJob 以不实际打印到打印机，以便我可以获得每个页面的图形对象？我尝试将 PrintService 设置为 null，但 Java 不允许这样做。

这样我就可以为文档检索准确的打印预览，而无需在不同的上下文中从头开始重新构建 PrinterJobs 函数。

这是我程序中打印功能的代码：

```
public int print(Graphics graphics, PageFormat pageFormat, int page) throws PrinterException {

    deepCopyString = string;

    FontMetrics metrics = graphics.getFontMetrics(font);
    int lineHeight = metrics.getHeight();

    arrangePage(graphics, pageFormat, metrics);

    if (page > pageBreaks.length){
        return NO_SUCH_PAGE;
    }

    Graphics2D g = (Graphics2D) graphics;

    g.translate(pageFormat.getImageableX(), pageFormat.getImageableY());
    g.setFont(font);

    int begin = (page == 0) ? 0 : pageBreaks[page-1];
    int end = (page == pageBreaks.length) ? lines.length : pageBreaks[page];

    int y = 0;
    int x = 0;

    for (int line = begin; line < end; line++){
        x = 0;
        y += lineHeight;

        checkSyntax(line);

        String l = lines[line];

        for (int c = 0; c < l.length(); c++){
            applySyntax(c, line);

            metrics = graphics.getFontMetrics(font);
            String ch = Character.toString(l.charAt(c));

            g.setFont(font);
            g.drawString(ch, x, y);

            x += metrics.charWidth(l.charAt(c));
            //System.out.println(c + "/"+l.length());
        }

        //g.drawString(lines[line], 0, y);
    }

    reset();

    records.add(g);

    return PAGE_EXISTS;
} 
```

您已经可以看到 Graphics 对象已被记录，因此我可以在另一个组件中绘制它们，但是看到它会继续并将它们发送到我的打印机，然后才能完成记录，所以它是没有用的。

一般来说，这可能是一个坏主意，而且我对打印还很陌生。如果这真的是一个糟糕的解决方法，请随时将我引导到一个可以解释更好方法的来源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T01:50:06.547

基本上，你想创建你自己的`Graphics`上下文，你可以绘制。您还需要构造一个`PageFormat`可以传递给该方法的`print`方法。

![在此处输入图像描述](../Images/9a114a272f1f96b4c7c62cd1fb649b4e.png)

```
public class TestPrint implements Printable  {

    private BufferedImage background;
    public static final float DPI = 72;

    public static void main(String[] args) {
        new TestPrint();
    }

    public TestPrint() {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                try {
                    background = ImageIO.read(new File("C:/Users/shane/Dropbox/MegaTokyo/MgkGrl_Yuki_by_fredrin.jpg"));
                } catch (IOException ex) {
                    ex.printStackTrace();
                }

                float width = cmToPixel(21f, DPI);
                float height = cmToPixel(29.7f, DPI);

                Paper paper = new Paper();
                float margin = cmToPixel(1, DPI);
                paper.setImageableArea(margin, margin, width - (margin * 2), height - (margin * 2));
                PageFormat pf = new PageFormat();
                pf.setPaper(paper);

                BufferedImage img = new BufferedImage(Math.round(width), Math.round(height), BufferedImage.TYPE_INT_RGB);
                Graphics2D g2d = img.createGraphics();
                g2d.setColor(Color.WHITE);
                g2d.fill(new Rectangle2D.Float(0, 0, width, height));
                try {
                    g2d.setClip(new Rectangle2D.Double(pf.getImageableX(), pf.getImageableY(), pf.getImageableWidth(), pf.getImageableHeight()));
                    print(g2d, pf, 0);
                } catch (PrinterException ex) {
                    ex.printStackTrace();
                }
                g2d.dispose();

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new JLabel(new ImageIcon(img)));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });

    }

    public float cmToPixel(float cm, float dpi) {

        return (dpi / 2.54f) * cm;

    }

    public int print(Graphics graphics, PageFormat pageFormat, int page) throws PrinterException {

        if (page > 0) {
            return NO_SUCH_PAGE;
        }

        Graphics2D g = (Graphics2D) graphics;

        g.translate(pageFormat.getImageableX(), pageFormat.getImageableY());
        if (background != null) {

            int x = (int)Math.round((pageFormat.getImageableWidth() - background.getWidth()) / 2f);
            int y = (int)Math.round((pageFormat.getImageableHeight() - background.getHeight()) / 2f);

            g.drawImage(background, x, y, null);

        }

        g.setColor(Color.BLACK);
        g.draw(new Rectangle2D.Double(0, 0, pageFormat.getImageableWidth() - 1, pageFormat.getImageableHeight() - 1));

        return PAGE_EXISTS;
    }
} 
```

现在，很明显，打印到屏幕的内容和打印到打印机的内容会有所不同，因为我们实际上并没有使用相同的硬件设备，但基本概念适用

# python - 熊猫数据框操作中不支持的操作数

> ID：14450020
> 
> 赞同：4
> 
> 时间：2013-01-22T01:13:46.207
> 
> 标签：python, pandas

我有熊猫数据框。我想根据涉及另外两列的条件从一列中获取单个值。我正在寻找来自 column3 的值，它是 column1 和 2 中的最大距离。

我构建了一个有效的简单示例：

```
d = pd.DataFrame({'c1':[.1,3,11.3],'c2':[3,6,.6],'c3':[8,.8,10.9]})
print'data d=\n%s\n' % d                                               
x = float(d.c3[abs(d.c1-d.c2)==max(abs(d.c1-d.c2))].values)
print 'the value of x= \n%s\n' % x 
```

此示例的输出与我预期的一样：

```
 c1   c2    c3
0   0.1  3.0   8.0
1   3.0  6.0   0.8
2  11.3  0.6  10.9

the value of x= 
10.9 
```

我尝试将完全相同的逻辑应用于类中大型数据框的原始问题。代码是：

```
yInit = float(self.DenFrame.Depth[abs(self.DenFrame.Hper-self.DenFrame.Vper)==max(abs(self.DenFrame.Hper-self.DenFrame.Vper))].values) 
```

但是这段代码会产生错误：

```
...
  File "C:\Python27\lib\site-packages\pandas-0.9.0-py2.7-win32.egg\pandas\core\series.py", line 73, in wrapper
return Series(na_op(self.values, other.values),
  File "C:\Python27\lib\site-packages\pandas-0.9.0-py2.7-win32.egg\pandas\core\series.py", line 59, in na_op
result[mask] = op(x[mask], y[mask])
TypeError: unsupported operand type(s) for -: 'str' and 'str' 
```

我在[这里](https://stackoverflow.com/questions/14408122/unsupported-operand-types-for-numpy-ndarray-and-numpy-float64)发现列的类型可能存在问题，但深度是类型`numpy.float64`Hper 是类型`float`Vper 是类型`float`，所以我了解它如何适用于我的问题。

从这一点来看，我不知道该怎么做，因为我知道相同的代码在一种情况下有效，但在另一种情况下无效，我无法发现问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T01:50:48.653

您的`DenFrame.Hper`and中有一些字符串`DenFrame.Vper`。

您可以通过检查`dtype`每个元素的 or 类型来看到这一点：

```
In [11]: df.Hper.dtype
Out[11]: dtype('object') 
```

意味着numpy数组可以包含各种类型，我们可以看看这些类型是什么：

```
In [12]: DenFrame.Hper.map(type).unique()
Out[12]: [<type 'float'> <type 'str'>] 
```

您可以检查哪些条目是字符串：

```
DenFrame[DenFrame.Hper.map(type) == str] 
```

也许只包括那些是浮动的是有意义的：

```
DenFrame_floats = DenFrame[(DenFrame.Hper.map(type) == float) & 
                           (DenFrame.Vper.map(type) == float)] 
```

或者您可以（如果可能）将它们转换为浮点数：

```
DenFrame.Hper = DenFrame.Hper.apply(float) 
```

# algorithm - 按顺序找到 k 个最大的元素

> ID：14450024
> 
> 赞同：6
> 
> 时间：2013-01-22T01:14:08.410
> 
> 标签：algorithm, sorting, selection

按顺序查找数组中 k 个最大元素的最快方法是什么（即从最大元素开始到第 k 个最大元素）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T01:16:45.550

一种选择如下：

1.  使用线性时间[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)，如中位数或 introsort，找到第 k 个最大的元素并重新排列元素，使第 k 个元素向前的所有元素都大于第 k 个元素。

2.  使用快速排序算法（如堆排序或快速排序）对第 k 个向前的所有元素进行排序。

步骤 (1) 花费时间 O(n)，步骤 (2) 花费时间 O(k log k)。总体而言，该算法运行时间为 O(n + k log k)，非常非常快。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:26:39.470

C++还提供了partial_sort算法，解决了选择最小k个元素（排序）的问题，时间复杂度为O(n log k)。没有提供用于选择最大 k 个元素的算法，因为这应该通过反转排序谓词来完成。

对于 Perl，CPAN 提供的模块 Sort::Key::Top 提供了一组函数，用于使用多个排序和自定义键提取过程从列表中选择前 n 个元素。此外，Statistics::CaseResampling 模块提供了使用快速选择计算分位数的功能。

Python 的标准库（从 2.4 开始）包括 heapq.nsmallest() 和 nlargest()，返回排序列表，前者在 O(n + k log n) 时间内，后者在 O(n log k) 时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-03T05:49:01.650

基数排序解决方案：

*   对数组进行降序排序，使用基数排序；
*   打印前 K 个元素。

时间复杂度：O(N*L)，其中 L = 最大元素的长度，可以假设 L = O(1)。使用的空间：O(N) 用于基数排序。

但是，我认为基数排序的开销很大，这使得它的线性时间复杂度不那么有吸引力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-21T17:53:52.967

1) 在 O(n) 中构建一个 Max Heap 树
2) 使用 Extract Max k 次从 Max Heap O(klogn) 中获取 k 个最大元素

时间复杂度：O(n + klogn)

下面给出了使用 STL 的 C++ 实现：

```
#include <iostream>
#include<bits/stdc++.h>

using namespace std;

int main() {

  int arr[] = {4,3,7,12,23,1,8,5,9,2}; 

  //Lets extract 3 maximum elements
    int k = 3;  

    //First convert the array to a vector to use STL
    vector<int> vec;
    for(int i=0;i<10;i++){
        vec.push_back(arr[i]);
    }

  //Build heap in O(n)
  make_heap(vec.begin(), vec.end());

  //Extract max k times
  for(int i=0;i<k;i++){
      cout<<vec.front()<<" ";
      pop_heap(vec.begin(),vec.end());
      vec.pop_back();
  }
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T01:25:01.680

@templatetypedef 的解决方案可能是最快的，假设您可以修改或复制输入。

或者，您可以使用堆或 BST（`set`在 C++ 中）在给定时刻存储 k 个最大元素，然后一个一个地读取数组的元素。虽然这是 O(n lg k)，但它不会修改输入，只使用 O(k) 额外内存。它也适用于流（当您从一开始就不知道所有数据时）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-13T01:02:32.320

这是一个`O(N + k lg k)`复杂的解决方案。

```
int[] kLargest_Dremio(int[] A, int k) {
  int[] result = new int[k];
  shouldGetIndex = true;
  int q = AreIndicesValid(0, A.Length - 1) ? RandomizedSelet(0, A.Length-1,
    A.Length-k+1) : -1;
  Array.Copy(A, q, result, 0, k);
  Array.Sort(result, (a, b) => { return a>b; });
  return result;
} 
```

`AreIndicesValid`并`RandomizedSelet`在[此 github 源文件](https://github.com/atiq-cs/Problem-Solving/blob/master/demos/algo/OrderStat.cs)中定义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-19T14:09:23.390

*有一个关于性能和受限资源的问题。*

为前 3 个值创建一个值类。使用这样的累加器来减少并行流。根据上下文（内存、功率）限制并行度。

```
class BronzeSilverGold {
    int[] values = new int[] {Integer.MIN_VALUE, Integer.MIN_VALUE, Integer.MIN_VALUE};

    // For reduction
    void add(int x) {
        ...
    }

     // For combining two results of two threads.
    void merge(BronzeSilverGold other) {
        ...
    }
} 
```

必须在您的星座中限制并行性，因此在以下位置指定 N_THREADS：

```
try {
    ForkJoinPool threadPool = new ForkJoinPool(N_THREADS);
    threadPool.submit(() -> {
        BronzeSilverGold result = IntStream.of(...).parallel().collect(
            BronzeSilverGold::new,
            (bsg, n) -> BronzeSilverGold::add,
            (bsg1, bsg2) -> bsg1.merge(bsg2));
        ...
    });
} catch (InterruptedException | ExecutionException e) {
    prrtl();
} 
```

# android - 扩展Activity类时如何使用Application类共享变量

> ID：14450025
> 
> 赞同：2
> 
> 时间：2013-01-22T01:14:19.407
> 
> 标签：android, class, variables, global

我在共享需要跨多个活动保留的全局变量时遇到问题。此变量在 TextPlay 类中创建并复制到 DailyDataEntry 类中。我已经使用 Intent 在两个活动之间共享变量进行了一些研究，但我希望将该变量共享给多个类。我想我将不得不扩展 Application 但我所有的其他类已经在扩展 Activity 了。我应该如何在扩展 Activity 的同时扩展 Application？太感谢了

///TextPlay 类///

```
package com.armstrong.y.android.app;

import java.util.Random;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.text.InputType;
import android.view.Gravity;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.ToggleButton;

public class TextPlay extends Activity implements View.OnClickListener {

Button chkCmd;
ToggleButton passTog;
EditText input;
TextView display;

EditText etUserId;
Button btnUserId;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.text);

    baconAndEggs();
    passTog.setOnClickListener(this);
    chkCmd.setOnClickListener(this);

    // Share variables between classes controls
    etUserId = (EditText) findViewById(R.id.etUserId);
    btnUserId = (Button) findViewById(R.id.btnUserId);

}

private void baconAndEggs() {
    // TODO Auto-generated method stub
    chkCmd = (Button) findViewById(R.id.bResults);
    passTog = (ToggleButton) findViewById(R.id.tbPassword);
    input = (EditText) findViewById(R.id.etCommands);
    display = (TextView) findViewById(R.id.tvResults);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bResults:
        // get the text from the command box then convert it to string
        String check = input.getText().toString();
        display.setText(check);
        if (check.contentEquals("left")) {
            display.setGravity(Gravity.LEFT);
        } else if (check.contentEquals("center")) {
            display.setGravity(Gravity.CENTER);
        } else if (check.contentEquals("right")) {
            display.setGravity(Gravity.RIGHT);
        } else if (check.contentEquals("blue")) {
            display.setTextColor(Color.BLUE);
            display.setText("blue");
        } else if (check.contains("hellow")) {
            Random crazy = new Random();
            display.setText("hello!!!!");
            display.setTextSize(crazy.nextInt(75));
            display.setTextColor(Color.rgb(crazy.nextInt(255),
                    crazy.nextInt(255), crazy.nextInt(255)));
            switch (crazy.nextInt(3)) {
            case 0:
                display.setGravity(Gravity.LEFT);
                break;
            case 1:
                display.setGravity(Gravity.CENTER);
                break;
            case 2:
                display.setGravity(Gravity.RIGHT);
                break;
            }
        } else {
            display.setText("invalid");
            display.setGravity(Gravity.CENTER);
            display.setTextColor(Color.BLACK);
        }
        break;
    case R.id.tbPassword:
        // If toggle button is set to ON, password will be ***
        if (passTog.isChecked()) {
            input.setInputType(InputType.TYPE_CLASS_TEXT
                    | InputType.TYPE_TEXT_VARIATION_PASSWORD);
        } else {
            // if toggle is off, its going be plain text
            input.setInputType(InputType.TYPE_CLASS_TEXT);
        }
        break;
    }
}
} 
```

///DailyDataEntry 类///

```
package com.armstrong.y.android.app;

import java.text.SimpleDateFormat;
import java.util.Calendar;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class DailyDataEntry extends Activity {
String strdate;
EditText etGetDate;
Calendar calendarDateToday = Calendar.getInstance();
Calendar calendarDateNext = Calendar.getInstance();
Calendar calendarDatePrevious = Calendar.getInstance();
int counterNext = 0;
int counterPrevious = 0;
Button btnTodayDate;
Button btnPreviousDate;
Button btnGetNextDate;

EditText etDailyCaloriesIn;
EditText etDailyCaloriesOut;

EditText etDailyAnxietyLevel;
EditText etDailySleepQuality;
TextView tvUserId;
Button btnSubmit;
Button btnReset;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.daily_data_entry);

    // Toast Message Warning
    Toast.makeText(getApplicationContext(),
            "DO NOT LEAVE FIELD BLANK OR CRASH IS ON YOU!",
            Toast.LENGTH_LONG).show();

    btnTodayDate = (Button) findViewById(R.id.btnGetTodayDate);
    btnPreviousDate = (Button) findViewById(R.id.btnGetPreviousDate);
    btnGetNextDate = (Button) findViewById(R.id.btnGetNextDate);
    etGetDate = (EditText) findViewById(R.id.etGetDate);
    btnSubmit = (Button) findViewById(R.id.btnSubmit);
    btnReset = (Button) findViewById(R.id.btnReset);

    etDailyCaloriesIn = (EditText) findViewById(R.id.etDailyCaloriesIn);
    etDailyCaloriesOut = (EditText) findViewById(R.id.etDailyCaloriesOut);

    etDailyAnxietyLevel = (EditText) findViewById(R.id.etDailyAnxietyLevel);
    etDailySleepQuality = (EditText) findViewById(R.id.etDailySleepQuality);

    tvUserId = (TextView) findViewById(R.id.tvUserId);

    // When Submit Button is clicked
    btnSubmit.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Grab User Input from EditText and Convert input String to
            // Integer
            int check1 = Integer.parseInt(etDailyCaloriesIn.getText()
                    .toString());
            int check2 = Integer.parseInt(etDailyCaloriesOut.getText()
                    .toString());

            int check4 = Integer.parseInt(etDailyAnxietyLevel.getText()
                    .toString());
            int check5 = Integer.parseInt(etDailySleepQuality.getText()
                    .toString());

            strdate = etGetDate.getText().toString();

            // Run Legal Value Integrity Check
            if (strdate.length() != 8) {
                etGetDate.setText("Please enter in the correct format.");
            } else if (strdate.equals("")) {
                etGetDate.setText("Please enter a date.");
            } else if (check1 > 10 || check1 < 1) {
                etDailyCaloriesIn.setText("Incorrect Value!");
            } else if (check2 > 10 || check2 < 1) {
                etDailyCaloriesOut.setText("Incorrect Value!");
            } else if (check4 > 10 || check4 < 1) {
                etDailyAnxietyLevel.setText("Incorrect Value!");
            } else if (check5 > 10 || check5 < 1) {
                etDailySleepQuality.setText("Incorrect Value!");
            } else {
                etGetDate.setText("Submited!");
                etDailyCaloriesIn.setText("Submited!");
                etDailyCaloriesOut.setText("Submited!");

                etDailyAnxietyLevel.setText("Submited!");
                etDailySleepQuality.setText("Submited!");
            }
        }
    });

    // When Reset Button is Clicked
    btnReset.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            String empty = "";
            etDailyCaloriesIn.setText(empty);
            etDailyCaloriesOut.setText(empty);

            etDailyAnxietyLevel.setText(empty);
            etDailySleepQuality.setText(empty);
            etGetDate.setText(empty);
        }
    });

    // Capture Today's Date
    btnTodayDate.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            SimpleDateFormat sdf = new SimpleDateFormat("MMddyyyy");
            strdate = sdf.format(calendarDateToday.getTime());
            etGetDate.setText(strdate);
        }
    });

    // Capture Previous's Date
    btnPreviousDate.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            SimpleDateFormat sdf = new SimpleDateFormat("MMddyyyy");

            if (counterPrevious == 0) {
                calendarDatePrevious.add(Calendar.DATE, -1);
            }
            strdate = sdf.format(calendarDatePrevious.getTime());

            etGetDate.setText(strdate);

            counterPrevious++;
        }
    });

    // Capture Next's Date
    btnGetNextDate.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            SimpleDateFormat sdf = new SimpleDateFormat("MMddyyyy");

            if (counterNext == 0) {
                calendarDateNext.add(Calendar.DATE, +1);
            }

            strdate = sdf.format(calendarDateNext.getTime());
            etGetDate.setText(strdate);
            counterNext++;
        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:10:30.613

创建将`Application`在需要时以下列方式扩展并使用它的类：

```
MyApplication myAppHelper = (MyApplication) context.getApplication();
myAppHelper.setWhatever(whatever);
Whatever whatever = myAppHelper.getWhatever(); 
```

# c# - 从 amazon.com 获取文本的问题

> ID：14450028
> 
> 赞同：0
> 
> 时间：2013-01-22T01:14:33.163
> 
> 标签：c#, web-scraping, amazon

我正在从 amazon.com 收到发货文本，如下图所示：

![在此处输入图像描述](../Images/9e1ad12220f23d6a5c39838cd9cddf45.png)

但问题是即使它显示在网站上，我也无法获取此文本，不确定它的示例是这个链接有什么问题。

[示例链接 1](https://rads.stackoverflow.com/amzn/click/com/B00AZD9YCC)

不确定其中有什么问题，如果您看到它不会包含在其中的页面源并且仍然显示在页面上，这让我感到困惑，因为其他这工作正常并且还有更多类似这个示例的页面。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:12:04.260

上面的帖子是对的，它是在页面之后加载的，所以你真正需要的链接是：

```
GET http://www.amazon.com/gp/twister/ajax/prefetch/184-8017667-8054405?json=1&sid=184-8017667-8054405&rid=0EY8R4VSQH90CGG2B8WB&parentAsin=B00AZD9YO0&qid=&sr=&asinList=B00AZD9YCC,B00AZD9YO0&productGroupID=health_and_beauty_display_on_website&merchantID=&smid=null&PowerBar=0&pfWrapFeatures=0&rps=0&_=1358853427426 HTTP/1.1
Host: www.amazon.com
Connection: keep-alive
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
Accept: application/json, text/javascript, */*
Referer: http://www.amazon.com/dp/B00AZD9YCC/?tag=stackoverfl08-20
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-GB,en-US;q=0.8,en;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: x-wl-uid=12Rt0TTSfvFFeeEo/b9iO7gAvvtsw+sHdWjU1SmtKe3jzgy3Bnf5YM/gC+Zm2ZMG5bJiGZ2xkab0=; session-token=QMx3+akd/XUQe2V8GVUQ3fioq2STsxGQWCTw5AUILjVp5itgNLqGYps7hrRzzq2v0LoD8e0VjoC0EH+c8aZE0ybkSB4VNhfnGPLWyC/5s0yDboyQr9bsxEcuJzpSH5lS0xj9bvd6Rz6u195/PCt7G8W/9bPscFcGCOOczEh46FoQ0wM8/I+IZL/tsTtlCoS7WtomqeKvqgUxrqYqFrB0+cNbH0L2vg3Z3zLX45qER4i9LByiil/UeOeNtqtKnN0A; ubid-main=181-8869220-9587219; session-id-time=2082787201l; session-id=184-8017667-8054405; UserPref=ZQYGYZ6aqj9V1WCTNQfIBVHwrxWUiRBbtjYgpE662zHEbrcpva4uwDzapqUVUnEAv7+ZRaU6VjPKllub9eBfBEVyz+RPxbaEmIS3D9nkpoNciDxQuq8F4WFNYy8WKy4AzYftKT9qYMugJLXI2w7L9Jt6780u982A54mduTieZ7XvtM991yXd8WzHgADBGM6vnfjtkwaFeRcJ6jkFysNFob24qESWn1sN2mZT3YVgjfWBqb1X8Z3FZbNmZt4qp8ZEtjl0wXNhZRHlP6OZ3+HbabTWQKGoG1kRzJJ9YQAv4QMKP2zyQnI2/MJp/VohCMF+1kfimtGK8+azjZQClkezqjBdRTYQ6PFuOPB6sVJS1EIY0GGRZ4ugjr/ynWLQrxvO3LUOYDByWeF2GtH+WlscSpdZUaRrxGipc/Ze1nwhz+KyVBv4vnf4kJx93WjpbJbMu6PdOC1fiXg=; csm-hit=3949.77| 
```

您必须使用我相信的 ASIN 编号构建 Get 请求并解析响应以获取您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:18:37.337

它存在，但它可能在页面本身加载后异步加载，因此它不一定通过您正在查看源的任何方法可见。

```
<span class="plusShippingText">
    &nbsp;+&nbsp;$4.02&nbsp;shipping
</span> 
```

# arrays - cudaArray 与设备指针

> ID：14450029
> 
> 赞同：13
> 
> 时间：2013-01-22T01:14:33.827
> 
> 标签：arrays, cuda, textures

`cudaArray`我对设备指针和结构的预期用途之间的区别感到困惑。有人可以解释为什么我会使用一个而不是另一个吗？我的基本问题是，在查看文档并阅读“CUDA by Example”一书后，我不明白 API 设计者的意图。

从我所见，似乎`cudaArray`应该用于纹理和指针应该用于直接访问内存。似乎也只能使用`cudaArray`. 是否应该使用 分配所有纹理`cudaArray`？许多例子似乎没有。另外，为什么有一个函数`cudaMallocArray`and `cudaMallocArray3D`，但没有等价的`cudaMallocArray2D`？相反，有一个`cudaBindTexture`and `cudaBindTexture2D`，但没有`cudaBindTexture3D`?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-22T03:27:02.850

`cudaArray`是一个不透明的内存块，针对绑定到纹理进行了优化。纹理可以使用存储在[空间填充曲线](http://en.wikipedia.org/wiki/Space-filling_curve)中的内存，由于更好的 2D 空间局部性，这允许更好的纹理缓存命中率。将数据复制到 a`cudaArray`会导致它被格式化为这样的曲线。

因此，将数据存储在 a`cudaArray`中是一种优化技术，可以产生更好的纹理缓存命中率。在早期的 CUDA 架构上，`cudaArray`内核也无法访问。但是，计算能力 >= 2.0 的架构可以通过 CUDA 表面访问阵列。

确定是否应该`cudaArray`在全局内存中使用缓冲区或常规缓冲区归结为内存的预​​期使用和访问模式。这将是特定于项目的。

`cudaMallocArray()`实际上分配了一个二维数组，所以我认为问题只是命名不一致。也许这样称呼它更合乎逻辑`cudaMallocArray2D()`。

我没有使用 3D 纹理。希望有人能回答并让我们知道为什么不需要`cudaBindTexture3D()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-18T10:50:17.967

您可以使用 cudaBindTextureToArray，它适用于 2D 和 3D。

# javascript - JQPlot 隐藏线从图例单击

> ID：14450030
> 
> 赞同：3
> 
> 时间：2013-01-22T01:14:46.000
> 
> 标签：javascript, graph, show-hide, jqplot, legend

> **可能重复：**
> [动态 Flot 图表 - 通过单击图例文本或图表上的框显示隐藏系列](https://stackoverflow.com/questions/14201911/dynamic-flot-graph-show-hide-series-by-clicking-on-legend-text-or-box-on-graph)

我正在使用 JQPlot，如果在图例中单击它们，我有一个关于隐藏线的问题。

这是我的代码：

```
 var plotCustomerSurveyGraph = $.jqplot('CustomerSurveyLineGraph', [[0,1,3,2,3,0,1,3,1,2,3,1,2], [1,2,3,1,1,2,2,3,3,1,2,1,2], [1,2,3,4,4,3,2,2,1,4,3,2,2], [0,1,3,3,1,2,2,1,1,0,0,1,2],[2,2,3,3,4,4,0,2,0,1,1,3,3], [2,2,3,3,1,1,0,1,0,2,3,3,1], [1,3,1,4,3,3,1,2,3,4,1,2,1], [2,1,3,2,1,2,0,1,2,4,2,1,0]], 
{ 
            axes:
            {
                xaxis:
                {
                      label: "Date (Week)",
                      ticks: ['1','2','3','4','5','6','7','8','9','10','11','12','13']
                },
                yaxis:
                {
                    label: 'Rating',
                    labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                    ticks: ['0','1','2','3']
                }
            },
    title:'Customer Survey (Last 3 Months)',
            width: 480, height: 480,
            legend:{show:true, location: 'e', placement: 'outsideGrid'},
    seriesDefaults: 
    {
                rendererOptions: {smooth: true}
    },
    series:[ 
                {
                    lineWidth:1, 
                    label:'Staff Appearance',
                    markerOptions: { size:7, style:'dimaond' }
                }, 
                {
                    lineWidth:1, 
                    label:'Staff Product Knowledge',
                    markerOptions: { size: 7, style:"dimaond" }
                }, 
                {
                    lineWidth:1, 
                    label:'Staff Friendliness',
                    markerOptions: { size:7, style:"filledSquare" }
                }, 
                {
                    lineWidth:1, 
                    label:'Staff Wait Time Acceptable',
                    markerOptions: { size:7, style:"filledSquare" }
                }, 
                {
                    lineWidth:1, 
                    label:'Food Value For Money',
                    markerOptions: { size:7, style:"filledSquare" }
                }, 
                {
                    lineWidth:1, 
                    label:'Overall Quality of Meal',
                    markerOptions: { size:7, style:"filledSquare" }
                }, 
                {
                    lineWidth:1, 
                    label:'Cleanliness of the Premises',
                    markerOptions: { size:7, style:"filledSquare" }
                }, 
                {
                    lineWidth:1, 
                    label:'Ambience and Atmosphere of the Premises',
                    markerOptions: { size:7, style:"filledSquare" }
                }
                ]
    }
); 
```

这是图表的图像：

![在此处输入图像描述](../Images/14be70160213ff2f6bcee741dafdbf08.png)

是否可以根据是否在图例中单击它们来启用隐藏/显示线条的功能？如果是这样，我可以请一些帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T03:05:23.523

尝试这个

添加`renderer: $.jqplot.EnhancedLegendRenderer`你的代码

```
legend:{
                renderer: $.jqplot.EnhancedLegendRenderer,
                show:true,
                location: 'e', 
                showSwatches: true,
                placement: 'outsideGrid'
            } 
```

示例：http: [//jsfiddle.net/JWhmQ/1379/](http://jsfiddle.net/JWhmQ/1379/)

# c# - 通过代理上传文件到 FTPS

> ID：14450038
> 
> 赞同：0
> 
> 时间：2013-01-22T01:15:53.827
> 
> 标签：c#, .net, proxy, ftps

我需要通过代理将文件上传到 FTPS（以获得 FTPS 服务器允许的静态 IP）。

我可以使用 .NET 内置类吗？也许是一个代码示例，我没有找到任何可以与代理一起使用的好示例。还是我需要第 3 方组件？

我可以使用 HTTP 代理服务器，还是需要一些特殊的服务器？

# r - 在 R 中释放内存

> ID：14450039
> 
> 赞同：6
> 
> 时间：2013-01-22T01:15:58.880
> 
> 标签：r, garbage-collection

在 R 中，我试图将几组时间序列数据组合并转换为来自[http://www.truefx.com/?page=downloads](http://www.truefx.com/?page=downloads)的 xts但是，文件很大并且有很多文件，所以这导致了我的问题我的笔记本电脑。它们存储为 csv 文件，该文件已压缩为 zip 文件。

下载它们并解压缩它们很容易（尽管占用了硬盘驱动器上的大量空间）。

`fread()`使用包中的新功能将 350MB+ 的文件加载到 R 中是相当简单的一个月的数据`data.table`。

完成了一些数据表转换（在函数内部），以便可以轻松读取时间戳并生成中间列。然后将数据表保存为硬盘驱动器上的 RData 文件，并且所有对数据表对象的引用都从工作区中删除，并且`gc()`在删除后运行...但是在我的活动监视器中查看 R 会话时（运行来自Mac）......它看起来仍然占用了近1GB的RAM......而且事情似乎有点滞后......我打算同时加载几年的csv文件，转换它们到可用的数据表，将它们组合起来，然后创建一个 xts 对象，如果仅仅一个月使用 1GB 的 RAM，这似乎是不可行的。

我知道我可以按顺序下载每个文件，转换它，保存它关闭 R 并重复，直到我有一堆 RData 文件，我可以加载和绑定，但希望可能有更有效的方式来做到这一点删除对数据表的所有引用后，您返回的不是“正常”或 RAM 使用的启动级别。有没有更好的清除内存的方法`gc()`？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T00:33:38.927

在我的项目中，我不得不处理许多大文件。我按照以下原则组织了例程：

1.  `R`在单独的脚本中隔离需要大量内存的操作。
2.  在执行后销毁的新进程中运行每个脚本。因此系统将使用过的内存归还。
3.  通过文本文件将参数传递给脚本。

考虑下面的玩具示例。

数据生成：

```
setwd("/path/to")
write.table(matrix(1:5e7, ncol=10), "temp.csv") # 465.2 Mb file 
```

**slave.R** - 内存消耗部分

```
setwd("/path/to")
library(data.table)

# simple processing
f <- function(dt){
  dt <- dt[1:nrow(dt),]
  dt[,new.row:=1]
  return (dt)
}

# reads parameters from file
csv <- read.table("io.csv")
infile  <- as.character(csv[1,1])
outfile <- as.character(csv[2,1])

# memory-hungry operations
dt <- as.data.table(read.csv(infile))
dt <- f(dt)
write.table(dt, outfile) 
```

**master.R** - 在单独的进程中执行从属

```
setwd("/path/to")

# 3 files processing
for(i in 1:3){
  # sets iteration-specific parameters
  csv <- c("temp.csv", paste("temp", i, ".csv", sep=""))
  write.table(csv, "io.csv")

  # executes slave process
  system("R -f slave.R")
} 
```

# php - MySQL：WHERE 值大于 Min 且小于 Max

> ID：14450040
> 
> 赞同：2
> 
> 时间：2013-01-22T01:16:03.017
> 
> 标签：php, mysql, sql, wordpress

这是我的查询：

```
SELECT wp_posts.ID, wp_posts.post_title, lat.meta_value AS latitude, lng.meta_value AS longitude, info1.meta_value AS street_no, info2.meta_value AS street, info3.meta_value AS street_suffix, price.meta_value AS price,
        ( 3959 * acos( cos( radians( '{$latitude}' ) ) * cos( radians( lat.meta_value ) ) * cos( radians( lng.meta_value ) - radians( '{$longitude}' ) ) + sin( radians( '{$latitude}' ) ) * sin( radians( lat.meta_value ) ) ) ) AS distance

        FROM wp_posts

        LEFT JOIN wp_postmeta AS lat 
            ON lat.post_id = wp_posts.ID 
                AND lat.meta_key = 'property_lat'

        LEFT JOIN wp_postmeta AS lng 
            ON lng.post_id = wp_posts.ID 
                AND lng.meta_key = 'property_long'

        LEFT JOIN wp_postmeta AS info1 
            ON info1.post_id = wp_posts.ID 
                AND info1.meta_key = 'street_no'

        LEFT JOIN wp_postmeta AS info2 
            ON info2.post_id = wp_posts.ID 
                AND info2.meta_key = 'street'

        LEFT JOIN wp_postmeta AS info3 
            ON info3.post_id = wp_posts.ID 
                AND info3.meta_key = 'street_suffix'

        LEFT JOIN wp_postmeta AS price 
            ON price.post_id = wp_posts.ID 
                AND price.meta_key = 'price_current'

        WHERE lat.meta_key IS NOT NULL

        HAVING distance < 30

        LIMIT 0, 20 
```

我需要更新`WHERE`statemtent以考虑`price_min`和`price_max`价值观......只返回结果`WHERE price is >= {$price_min} AND <= {$price_max}`

我希望这是有道理的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:27:13.463

假设您每个 id 只得到一行，我建议您将查询重写为聚合：

```
select p.*,
       ( 3959 * acos( cos( radians( '{$latitude}' ) ) * cos( radians( latitude ) ) * cos( radians( longitude ) - radians( '{$longitude}' ) ) + sin( radians( '{$latitude}' ) ) * sin( radians( latitude ) ) ) ) AS distance
from (select p.id,
             max(case when meta_key = 'property_lat' then meta_value end) as latitude,
             max(case when meta_key = 'property_long' then meta_value end) as longitude,
             max(case when meta_key = 'street_no' then meta_value end) as street_no,
             max(case when meta_key = 'street' then meta_value end) as street,
             max(case when meta_key = 'street_suffix' then meta_value end) as street_suffix,
             max(case when meta_key = 'price_current' then meta_value end) as price_current
      from wp_posts p
      group by p.id
    ) p
WHERE latitude IS NOT NULL and distance < 30
LIMIT 0, 20 
```

此查询未经测试，因此可能存在语法错误。

使用此结构，您只需添加：

```
price_current is >= {$price_min} AND <= {$price_max} 
```

到外部查询。我假设您的意思是 price_current，因为价格不在原始查询中。

# android - 如何从网络服务向我的 android 应用程序发送消息

> ID：14450046
> 
> 赞同：0
> 
> 时间：2013-01-22T01:16:41.070
> 
> 标签：android, web-services

我有网络服务 Java(Netbeans)、MySql 和 2 个 android 应用程序。我需要在更新数据库时向可以帮助我的应用程序发送任何消息（通知）。

谁能帮助我或给我一些教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:22:15.220

你需要[谷歌云消息](http://developer.android.com/google/gcm/index.html)。这可能是最简单的通知解决方案。

以下关键字可以进一步帮助您。要从数据库通知您的 Web 服务，您可以使用[查询通知](http://msdn.microsoft.com/en-us/library/t9x04ed2.aspx)或轮询您的数据库。如果 GCM 不适合您，您可以实现一种称为长轮询的技术。

# python - Scrapy 中的项目缓存

> ID：14450049
> 
> 赞同：1
> 
> 时间：2013-01-22T01:17:01.250
> 
> 标签：python, caching, web-scraping, scrapy, web-crawler

我正在抓取一个结构如下的网站：

```
Archive
    Article 1
        Authors
            Author 1
            Author 2
        Title
        Body
        Comments
            Comment 1
            Comment 2
    ... 
```

每个作者`Authors`都有自己的个人资料页面。问题是作者写了多篇文章，所以当我的蜘蛛抓取网站时，我最终会一遍又一遍地抓取相同作者的个人资料。

我将如何使用 Scrapy 缓存作者个人资料？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:24:36.520

我认为您需要实施新的缓存策略。[看这里](http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#std%3asetting-HTTPCACHE_POLICY)

[还要看](http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#scrapy.contrib.downloadermiddleware.httpcache.HttpCacheMiddleware)HttpcacheMiddleware

我仍然很困惑为什么它会再次访问访问页面。他们的文档说这是默认策略

> 此策略不了解任何 HTTP Cache-Control 指令。每个请求及其相应的响应都会被缓存。当再次看到相同的请求时，将返回响应而不从 Internet 传输任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T03:32:29.037

您应该像以下示例一样添加重复过滤器：

```
from scrapy import signals
from scrapy.exceptions import DropItem

class DuplicatesPipeline(object):

    def __init__(self):
        self.author_ids_seen = set()

    def process_item(self, item, spider):
        if item['author_id'] in self.author_ids_seen:
            raise DropItem("Duplicate item found: %s" % item)
        else:
            self.ids_seen.add(item['author_id'])
            return item 
```

并激活 ITEM_PIPELINES 列表中的 DuplicatesPipeline，

```
ITEM_PIPELINES = [
    'myproject.pipeline.DuplicatesPipeline',
] 
```

# java - LinearLayout 中的多个 TableLayouts - Android

> ID：14450052
> 
> 赞同：1
> 
> 时间：2013-01-22T01:17:51.027
> 
> 标签：java, android, scrollview, android-linearlayout, tablelayout

我正在尝试将多个`TableLayout`s 放在一个`LinearLayout`. 当我实现代码并运行它时，显示的是我的背景图像，上面没有显示任何内容。不知道发生了什么。

在我尝试这样做之前，我的所有内容都正确显示，但文本太多，必须非常小才能使所有内容都适合。为了解决这个问题，我想做 3`TableLayout`秒，中间的一个是 a `ScrollView`（我会担心`ScrollView`在我解决手头的问题之后实施）。

我的问题是如何使所有 3 `TableLayout`s 可见，每个 s 都是屏幕的特定百分比。

以下是此 XML 文件的 100% 代码。

```
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/tableLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="1"
    android:shrinkColumns="0"
    android:orientation="vertical"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:paddingTop="70dp"
    android:paddingBottom="70dp"
    android:background="@drawable/scroll" >    

    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="15" >

        <TableRow
            android:id="@+id/header"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <TextView
                android:id="@+id/category"
                android:layout_height="wrap_content"
                android:layout_width="0px"
                android:layout_weight="1"
                android:textStyle="bold"
                android:textSize="15sp"
                android:paddingTop="10dp"
                android:gravity="center_horizontal" />

            <TableLayout
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TableRow
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:layout_weight="1" >

                    <TextView
                        android:id="@+id/points"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".25"
                        android:textSize="7sp"
                        android:gravity="left" 
                        android:textStyle="bold" />
                </TableRow>

                <TableRow
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:layout_weight="1" >

                    <TextView
                        android:id="@+id/percentage"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".3"
                        android:textSize="7sp"
                        android:gravity="left"
                        android:textStyle="bold" />
                </TableRow>

                <TableRow
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:layout_weight="1" >

                    <TextView
                        android:id="@+id/total_score"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".45"
                        android:textSize="7sp"
                        android:gravity="left"
                        android:textStyle="bold" />
                </TableRow>
            </TableLayout>
        </TableRow>

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#000001" />

        <TableRow
            android:id="@+id/row3"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <TextView
                android:id="@+id/imageColumn"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="0" />

            <TextView
                android:id="@+id/questionColumn"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".45"
                android:textSize="10sp"
                android:textStyle="bold|italic"
                android:gravity="center_vertical" />

            <TextView
                android:id="@+id/answerColumn"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:textSize="10sp"
                android:textStyle="bold|italic"
                android:gravity="center_vertical" />

            <TextView
                android:id="@+id/verseColumn"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".25"
                android:textSize="10sp"
                android:textStyle="bold|italic"
                android:gravity="center_vertical" />
        </TableRow>
    </TableLayout>

    <ScrollView
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="70" >

    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TableRow
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <ImageView
                android:id="@+id/q1Image"
                android:layout_width="10dp"
                android:layout_height="10dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q1Question"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".45"
                android:textSize="7sp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q1Answer"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q1Verse"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".25"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />
        </TableRow>

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#C2BEBF" />

        <TableRow
            android:id="@+id/row5"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1,2,3"
            android:layout_weight="1" >

            <ImageView
                android:id="@+id/q2Image"
                android:layout_width="10dp"
                android:layout_height="10dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q2Question"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".45"
                android:textSize="7sp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q2Answer"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q2Verse"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".25"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />
        </TableRow>

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#C2BEBF" />

        <TableRow
            android:id="@+id/row6"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1,2,3"
            android:layout_weight="1" >

            <ImageView
                android:id="@+id/q3Image"
                android:layout_width="10dp"
                android:layout_height="10dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q3Question"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".45"
                android:textSize="7sp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q3Answer"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q3Verse"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".25"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />
        </TableRow>

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#C2BEBF" />

        <TableRow
            android:id="@+id/row7"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1,2,3"
            android:layout_weight="1" >

            <ImageView
                android:id="@+id/q4Image"
                android:layout_width="10dp"
                android:layout_height="10dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q4Question"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".45"
                android:textSize="7sp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q4Answer"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q4Verse"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".25"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />
        </TableRow>

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#C2BEBF" />

        <TableRow
            android:id="@+id/row8"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1,2,3"
            android:layout_weight="1" >

            <ImageView
                android:id="@+id/q5Image"
                android:layout_width="10dp"
                android:layout_height="10dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q5Question"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".45"
                android:textSize="7sp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q5Answer"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q5Verse"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".25"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />
        </TableRow>

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#C2BEBF" />

        <TableRow
            android:id="@+id/row9"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1,2,3"
            android:layout_weight="1" >

            <ImageView
                android:id="@+id/q6Image"
                android:layout_width="10dp"
                android:layout_height="10dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q6Question"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".45"
                android:textSize="7sp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q6Answer"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q6Verse"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".25"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />
        </TableRow>

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#C2BEBF" />

        <TableRow
            android:id="@+id/row10"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1,2,3"
            android:layout_weight="1" >

            <ImageView
                android:id="@+id/q7Image"
                android:layout_width="10dp"
                android:layout_height="10dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q7Question"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".45"
                android:textSize="7sp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q7Answer"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q7Verse"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".25"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />
        </TableRow>

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#C2BEBF" />

        <TableRow
            android:id="@+id/row11"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1,2,3"
            android:layout_weight="1" >

            <ImageView
                android:id="@+id/q8Image"
                android:layout_width="10dp"
                android:layout_height="10dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q8Question"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".45"
                android:textSize="7sp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q8Answer"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q8Verse"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".25"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />
        </TableRow>

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#C2BEBF" />

        <TableRow
            android:id="@+id/row12"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1,2,3"
            android:layout_weight="1" >

            <ImageView
                android:id="@+id/q9Image"
                android:layout_width="10dp"
                android:layout_height="10dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q9Question"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".45"
                android:textSize="7sp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q9Answer"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q9Verse"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".25"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />
        </TableRow>

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#C2BEBF" />

        <TableRow
            android:id="@+id/row13"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1,2,3"
            android:layout_weight="1" >

            <ImageView
                android:id="@+id/q10Image"
                android:layout_width="10dp"
                android:layout_height="10dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q10Question"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".45"
                android:textSize="7sp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q10Answer"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />

            <TextView
                android:id="@+id/q10Verse"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".25"
                android:textSize="7sp"
                android:layout_gravity="center_vertical" />
        </TableRow>
    </TableLayout>
    </ScrollView>

    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="15" >

        <TableRow
            android:id="@+id/row14"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1"
            android:layout_weight="1" >

            <Button 
                android:id="@+id/mainmenuBtn"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".33"
                android:textSize="7sp" />

            <Button 
                android:id="@+id/highscoresBtn"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".33"
                android:textSize="7sp" />
            <Button 
                android:id="@+id/playBtn"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".34"
                android:textSize="7sp" />
        </TableRow>
    </TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:01:25.413

您希望桌子并排，还是叠放在一起？您现在将 LinearLayout 的方向设置为“垂直”，但每个表格的宽度设置为“0dip”。我想你希望它们并排，这意味着 LinearLayout 的方向应该是“水平的”，并保持你的表格宽度为“0dip”。如果您确实希望它们彼此重叠，请将每个表格的宽度更改为“wrap_content”或“match_parent”，将高度更改为“0dip”。

**垂直示例**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="15" >
    </TableLayout>

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="70" >
    </TableLayout>

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="15" >
    </TableLayout>

</LinearLayout> 
```

**水平示例**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <TableLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </TableLayout>

    <TableLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </TableLayout>

    <TableLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </TableLayout>

</LinearLayout> 
```

**底表编辑**

```
 <TableLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="15" >

        <TableRow
            android:id="@+id/row14"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1" >

            <Button 
                android:id="@+id/mainmenuBtn"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:textSize="7sp" />

            <Button 
                android:id="@+id/highscoresBtn"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:textSize="7sp" />
            <Button 
                android:id="@+id/playBtn"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:textSize="7sp" />
        </TableRow>
    </TableLayout> 
```

# php - PHP“如果设置了这些选项中的任何一个，则显示它

> ID：14450054
> 
> 赞同：0
> 
> 时间：2013-01-22T01:18:02.783
> 
> 标签：php

所以我在这个项目中使用了 WordPress，我不太确定如何进行这个**整洁干净**的 .

我一共有8个选项。如果其中任何一个被设置，我需要**一些事情**发生。我还需要为每一组执行它。

让我们使用两个，现在

```
if( (genesis_get_option('setting_one', 'settings') || genesis_get_option('setting_two', 'settings')) !== '')
    { // print() each one that is set } 
```

您可以看到以这种方式处理 8 个选项会很快变得非常难看。我所有的设置都有一个相同的前缀：( `setting_a`, `setting_b`, `setting_one`, `setting_two`)

我在*想*类似的东西

```
$settings = array_fill(1, 8, 'setting_');
$labels = array(1 => 'a', 'b', 'c', 'd', 'one', 'two', 'three', 'four'); 
```

....但后来我不知道从那里去哪里。

必须有某种干净的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:25:14.840

一种更简洁的方法是：

```
$settings = array("setting_one","setting_two","setting_a");
$has_setting = false;
foreach($settings as $setting){
    if(genesis_get_option($setting, 'settings') !== ''){
        $has_setting = true;
        break;
    }
}
if($has_setting){
    //Do stuff
} 
```

更好的办法是将检查放入一种保持代码整洁的方法中。

编辑：刚刚意识到您需要为每个设置采取行动。在这种情况下，您可以在循环内执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:28:42.157

```
if(false !== array_search(true,
  array_map(
    'genesis_get_option',
    array('setting_one', 'setting_to' /* ... */ ),
    array('value_one', 'value_two' /* ... */)
  )
)) { /* ... */ } 
```

# qt - 没有这样的信号 bb::cascades::QmlListView::triggered(QVariantList indexPath)

> ID：14450058
> 
> 赞同：0
> 
> 时间：2013-01-22T01:18:38.120
> 
> 标签：qt, qml, signals-slots, blackberry-10

我试图在我的 .qml 文件中捕获 ListView 的信号，所以我正在这样做：

```
ListView *userList = root->findChild<ListView*>("userList");
Q_ASSERT(userList); 
```

它获取列表，以及当我尝试时：

```
Q_ASSERT(connect(userList, SIGNAL(triggered(QVariantList indexPath)), this, SLOT(onUserListTriggered(QVariantList indexPath)))); 
```

我收到此错误：

```
Object::connect: No such signal bb::cascades::QmlListView::triggered(QVariantList indexPath)
Object::connect:  (sender name:   'userList')
ASSERT: "connect(userList, SIGNAL(triggered(QVariantList indexPath)), this, SLOT(onUserListTriggered(QVariantList indexPath)))" 
```

这没有道理。[ListView](https://developer.blackberry.com/cascades/reference/bb__cascades__listview.html#triggered)的文档告诉类发出这个信号，我可以在标题 listview.h 中看到它

```
Q_SIGNALS:
/*!
        * @brief Emitted when a list item is triggered by the user.
        *
        * Typically, this signal is emitted when an item is tapped by the user 
        * with the intention to execute some action associated with it. 
        * This signal is, for example, not emitted when items are tapped 
        * during multiple selection, where the intention is to select the 
        * tapped item and not trigger an action associated with it.
        *
        * @param indexPath Index path to the triggered item.
        */
        void triggered(QVariantList indexPath); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:45:51.747

将信号连接到插槽时仅指定参数的数据类型。用下面提到的语句替换连接调用语句。

```
bool ok = connect(userList, SIGNAL(triggered(QVariantList)), 
  this, SLOT(onUserListTriggered(QVariantList)));
// Q_ASSERT the bool so that the connect will be included in Release code
Q_ASSERT(ok); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:06:23.100

我还发现有必要放置完整的命名空间。对于您的示例，这不是必需的，但例如我必须这样做：

```
if (!connect(root, SIGNAL(popTransitionEnded(bb::cascades::Page*)), this,
    SLOT(navPagePopped(bb::cascades::Page*)))) {
    qDebug() << "UNABLE to connect popTransitionEnded to navPagePopped";
} 
```

我猜 Qt 框架在创建信号表时使用了完整的参数命名空间。

# javascript - 访问用户的播放列表？

> ID：14450059
> 
> 赞同：0
> 
> 时间：2013-01-22T01:18:43.320
> 
> 标签：javascript, spotify

我一直在阅读一些 spotify 应用程序 javascript API 文档。我不清楚我是否能够访问用户的播放列表。`Toplist`不是我要找的。我希望能够迭代用户的播放列表并允许他们对他们执行操作而无需拖放它们。根据[`User`](http://www.hackerden.org/spotify/preview/docs/User.html)文档，我认为这不是您可以自由访问的东西，无论用户是否允许您通过 Facebook/Twitter 连接到他们。那正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:42:33.617

目前无法检索用户的播放列表（请参阅[Spotify Apps API：Library-class won't return users Playlists](https://stackoverflow.com/questions/8627627/spotify-apps-api-library-class-wont-return-users-playlists)）。[`Library`](https://developer.spotify.com/technologies/apps/docs/dcdebc652c.html)通过使用该对象，您确实可以访问用户订阅的艺术家和曲目。

如果您仍然需要处理用户的播放列表，那么您将需要使用拖放操作。

# c++ - 无法退出，因为析构函数错误导致 main() 的执行在退出时停止

> ID：14450060
> 
> 赞同：1
> 
> 时间：2013-01-22T01:18:46.767
> 
> 标签：c++

我已将问题缩小到将 2 个对象（包含指针数据成员）传递给一个简单的 void 函数。该函数返回干净，但是当 main() 尝试退出时，它无法回收 2 个对象中的第一个。这是显示问题的示例代码 - 以及用于显示对象在构造、传递和销毁时的地址的打印语句。

如果我只调用“print1” - 程序运行良好。但是，如果我调用“printboth”，则无法释放对象“myNumbers”。我还可以通过删除析构函数语句使错误消失：

```
 delete [] number; 
```

但我认为这不是一个好主意。

有人有想法么？

```
class dummy
{
public:
    dummy() {
        number = new int[1];
        currentPos = -1;
        std::cout<<"default constructor called for "<<this<<std::endl;

    }
    dummy(int len) {
        number = new int[len];
        currentPos = -1;
        std::cout<<"parameterized constructor called for "<<this<<std::endl;

    }
    ~dummy() {
        cout<<"Calling destructor for "<<this<<endl;
        delete [] number;
    }
    int getNextNumber() {
        currentPos++;
        return number[currentPos];
    }
    void setNumbers(int position, int value) {
        number[position] = value;
    }
private:
    int* number;
    int currentPos;
};

void print1(dummy);
void printboth(dummy, dummy);

int main() {
dummy myNumbers(3);
myNumbers.setNumbers(0,0);
myNumbers.setNumbers(1,1);

dummy myOtherNumbers(3);
myOtherNumbers.setNumbers(0,4);
myOtherNumbers.setNumbers(1,5);

cout<<"Address of myNumbers is      "<<&myNumbers<<endl;
cout<<"Address of myOtherNumbers is "<<&myOtherNumbers<<endl;

print1(myNumbers);
printboth(myNumbers, myOtherNumbers);

system("PAUSE");
return 0;
}

void print1(dummy num) {
cout<<"Address of num is      "<<&num<<endl;
for (int i=0;i<4;i++)
    cout<<"Dummy number1 is "<<num.getNextNumber()<<endl;
return;
}
void printboth(dummy num1, dummy num2) {
cout<<"Address of num1 is      "<<&num1<<endl;
cout<<"Address of num2 is      "<<&num2<<endl;
for (int i=0;i<4;i++) {
    cout<<"Dummy number1 is "<<num1.getNextNumber()<<endl;
    cout<<"Dummy number2 is "<<num2.getNextNumber()<<endl;
    }
return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:21:43.683

你没有遵守[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

问题是当您调用 print1 或 printboth 时，编译器会调用默认的复制构造函数（因为您没有提供）。该复制构造函数将副本的 number 成员变量设置为与原始值相同的值。当在副本上调用析构函数时，内存被释放。您的原始对象现在指向已释放的内存，因此当调用其析构函数时，您会崩溃（Nik Bougalis）。

```
void print1(dummy);
void printboth(dummy, dummy); 
```

您可以通过 const 引用传递 dummy 以避免不必要的复制，但强烈建议您遵循[三规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

```
void print1(const dummy& );
void printboth(const dummy&, const dummy&); 
```

注意：您只创建了`size =1`根本不需要的数组，只需`int number;`用作成员即可。如果 number 包含动态分配的数组，请尝试使用`std::vector<int>`.

getNextNumber 是有缺陷的，当它被多次调用时，`number[currentPos];`访问边界超出数字，这是未定义的行为。

```
int getNextNumber() {
        currentPos++;
        return number[currentPos];
    } 
```

这意味着建议：

```
int getNextNumber() const {
      return number[currentPos];
   } 
```

# ruby-on-rails - Rails简单形式的日期选择器如何添加数据行为

> ID：14450066
> 
> 赞同：1
> 
> 时间：2013-01-22T01:19:01.600
> 
> 标签：ruby-on-rails, jquery-ui

我有一个使用 jquery-ui datePicker 的 Rails 应用程序。

在 simple_form 内部，我有两个字段。第一个只是一个测试场。第一个有 datePicker 工作。我正在尝试将“数据行为”放入 simple_form f.input 行。但是，我的语法错误。

```
<input type="text" data-behaviour='datepicker' >
<%= f.input :exp_date, :data-behaviour => 'datepicker', :as => :string, :label => 'Date', :input_html => {:value => Date.today.to_s} %> 
```

这是我的jQuery：

```
$(document).on "focus", "[data-behaviour~='datepicker']", (e) ->
  $(this).datepicker
    format: "yyyy-mm-dd"
    weekStart: 1
    autoclose: true 
```

如何将 data-behavior='datepicker' 放入 f.input 行？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:44:06.160

尝试类似的东西

```
#old hash syntax
:data => { :behavior => "datepicker" }
#new syntax
data: { behavior: "datepicker" } 
```

# datagrid - 从datagrid c#保存数据

> ID：14450068
> 
> 赞同：0
> 
> 时间：2013-01-22T01:19:20.417
> 
> 标签：datagrid, save, editing

大家好，我是 C# 新手，我正在使用数据网格视图制作文本编辑器程序。问题是当我打开一个文本文件到我的数据网格时，当我按下保存时，我收到错误消息“索引超出了数组的范围”。我在下面包含了我的代码。任何建议都可以对我有很大帮助。我在下面包含了我的代码。

```
 // edit file button
                dataGridView1.Columns.Add("colname", "Question");
                dataGridView1.Columns.Add("colname", "Answer 1");
                dataGridView1.Columns.Add("colname", "Answer 2");
                dataGridView1.Columns.Add("colname", "Answer 3");
                dataGridView1.Columns.Add("colname", "Answer 4");
                dataGridView1.Columns.Add("colname", "Correct Answer");
                dataGridView1.Columns[5].ReadOnly = true;
                dataGridView1.Columns[5].DefaultCellStyle.BackColor = Color.DimGray;
                dataGridView1.AllowUserToAddRows = true;

                StreamReader sr = new StreamReader(fName);
                string Contents = sr.ReadToEnd();
                string[] strArray = { Contents };

                for (int r = 0; r <= dataGridView1.Rows.Count - 1; r++)
                {
                    for (int c = 0; c <= dataGridView1.Columns.Count - 1; c++)
                    {

                        dataGridView1.Rows.Add(strArray[r].Split('|')); //getting the error here
                    }

                }

      //save button
    private void button2_Click(object sender, EventArgs e)
    {
        //dataGridView1.AllowUserToAddRows = false;
        if (dataGridView1.Visible)
        {

            string fName = "C:\\Documents and Settings\\" + txtFileName.Text + ".txt";                
            System.IO.StreamWriter file = new System.IO.StreamWriter(fName);
            string sLine = "";

            for (int r = 0; r <= dataGridView1.Rows.Count - 1; r++)
            {
                for (int c = 0; c <= dataGridView1.Columns.Count - 1; c++)
                {
                    sLine = sLine + dataGridView1.Rows[r].Cells[c].Value;
                    if (c != dataGridView1.Columns.Count - 1)
                    {
                        sLine = sLine + "|";
                    }
                }
                file.WriteLine(sLine);
                sLine = "";
            }
            file.Close();
            System.Windows.Forms.MessageBox.Show("Save Complete.", "Program Info", MessageBoxButtons.OK, MessageBoxIcon.Information);
            dataGridView1.DataSource = "";
            dataGridView1.Visible = false;
        }
        else
        {
            string cap = "Confirmation";
            string message = "Nothing to save";
            MessageBoxButtons Btn2 = MessageBoxButtons.OK;    
            MessageBox.Show(message, cap, Btn2);
        }            
    } 
```

再次感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:51:15.737

最初有一个 dataGridView1.Rows.Count

在循环中你执行这个 dataGridView1.Rows.Add，它每次将 dataGridView1.Rows.Count 增加 1

所以它在处理后回到循环中

```
try declaring int gridRowcount = dataGridView1.Rows.Count;

and then replace (int r = 0; r <= dataGridView1.Rows.Count - 1; r++)
for (int r = 0; r <= gridRowcount - 1; r++) and try 
```

只是猜测

# scala - 如何在 Dispatch 中将正文附加到删除？

> ID：14450070
> 
> 赞同：2
> 
> 时间：2013-01-22T01:19:52.587
> 
> 标签：scala, scala-dispatch

我有一个需要有主体的[Dispatch 0.8 DELETE 处理程序。](http://dispatch.databinder.net/Dispatch.html)

所以我有一个正常的 DELETE 可以正常工作：

```
def delete = request.DELETE  ># identity 
```

我试过这个：

```
def delete(body: String) = request.DELETE <<< body ># identity 
```

但由于 <<< 运算符，它将请求变成了 PUT。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:03:01.360

改用 setBody：“如果您希望提供字符串而不是文件，请使用 RequestBuilder 类的 setBody 方法。它的变体支持多种输入类型，并不暗示特定的 HTTP 方法。” 来自[http://dispatch.databinder.net/HTTP+methods+and+parameters.html](http://dispatch.databinder.net/HTTP+methods+and+parameters.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:04:32.437

为了使用 Dispatch 0.8 做到这一点，我使用了一种 hacky 解决方案：

```
def delete(body: String) = (request << body).DELETE ># identity 
```

# php - 忽略 PhpStorm 中的文件夹

> ID：14450071
> 
> 赞同：22
> 
> 时间：2013-01-22T01:19:59.607
> 
> 标签：php, phpstorm

如何告诉[**`PhpStorm`**](http://www.jetbrains.com/phpstorm/)忽略*项目*中的文件夹？

***例如：***我想永远忽略这些文件夹而不删除它们。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-22T01:27:43.213

有什么问题：

> 右键单击目录 -> 将目录标记为 -> 排除

# java - 扫描文件中的重复字符串

> ID：14450073
> 
> 赞同：4
> 
> 时间：2013-01-22T01:20:15.993
> 
> 标签：java, eclipse, file

我的代码逻辑的下一步一直有问题。基本上我应该检查文件的每一行，在同一行上寻找连续的标记，并打印重复的标记以及它连续出现的次数。不打印不重复的标记。这是一个示例文件

```
/*
 * sometext.txt
 * hello how how are you you you you
I I I am Jack's Jack's smirking smirking smirking smirking revenge
bow wow wow yippee yippee yo yippee yippee yay yay yay
one fish two fish red fish blue fish
It's the Muppet Show, wakka wakka wakka
 */ 
```

这是我写的一些代码。

```
package chapter6;
import java.util.*;
import java.io.*;
public class OutputDuplicates {
    public static void main (String[] args) throws FileNotFoundException {
        for (;;) {
            Scanner scan = new Scanner(System.in);
            prompt(scan);
        }
    }
    public static void prompt(Scanner scan) throws FileNotFoundException {
        System.out.println("What is the name of the file?");
        String name = scan.next();
        File inputFile = new File(name);
        if (inputFile.exists()) {
            Scanner read = new Scanner(inputFile);
            while (read.hasNext()) {
                String line = read.nextLine();
                Scanner oneLine = new Scanner (line);
                while (oneLine.hasNext()) {
                    String word = oneLine.next();
                    System.out.println(word);
                }
            }
        } else if (!inputFile.exists()) {
            prompt(scan);
        }
    }
} 
```

从这里开始对逻辑的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:29:14.017

pseudocode:

```
for each line in the file
{
 lastword = ""
 numtimes = 1
 for each word in the line
 {
  if word == lastword
  {
   numtimes++
  }
  else
  {
   if numtimes > 1
   {
    print (/*print lastword and numtimes here*/)
   }
   lastword = word
   numtimes = 1
  }
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:42:40.650

给你，伙计，它应该对你有用

```
public Map<String, Long> scan(File file) throws Exception {

        Map<String, Long> map = new HashMap<>();
        Scanner read = new Scanner(file);
        while (read.hasNext()) {
            String line = read.nextLine();
            if(map.containsKey(line)) {
                map.put(line, map.get(line).longValue() + 1);
            } else {
                map.put(line, 1L);
            }
        }

        return map;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T01:29:41.590

You want to make a symbol frequency table:

```
Map<String, Integer> symbolFrequencies = new HashMap<String, int>(); 
```

Then for each symbol, do this:

```
Integer countForSymbol = symbolFrequencies.get(symbol);
if (countForSymbol==null){
    symbolFrequencies.put(symbol, 1);
} else {
    countForSymbol = new Integer(countForSymbol.intValue + 1);
} 
```

and that's it. You will now have counts for all the symbols you have parsed.

# java - 用于渲染未知行数的 JTable

> ID：14450074
> 
> 赞同：3
> 
> 时间：2013-01-22T01:20:21.353
> 
> 标签：java, swing, jdbc, jtable, rendering

我有一个返回大量行的数据库查询。`JDBC`没有告诉你有多少行回来了，在我将它显示在`JTable`.

所以我正在使用的模型是一个`Iterable<R>`，但不幸的是，`TableRowModel`必须预先知道行数。

我可以想象一些可能有效的策略：

*   加载所有行，但在后台执行并将它们批量添加到模型中。
*   以某种方式检测呈现较低行的请求（通过我猜的模型）并在发生这种情况时动态加载更多行。
*   在屏幕上有一个按钮来显式加载更多行。
*   某种`non-JTable`支持渲染行而不事先知道行数的组件（理想，但我找不到。）

我想知道是否有一种“正常”的方式来做到这一点，因为我在 UI 中并不经常看到这种事情。我检查过的几个`JDBC`工具（我认为这些是最好的选择）似乎要么急切地加载结果，要么分页（作为用户，我真的不喜欢 GUI 应用程序中的分页，所以我想避免这种情况。）

不过，像“查找”这样的操作在理想情况下应该以“可理解”的方式工作......所以看起来这不会太容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:59:44.223

[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)在您的实现中使用[`AbstractTableModel`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data). 让工作人员对查询进行分区，以便及时获得合理数量的记录，而其余的则在后台读取。使用 a`PropertyChangeListener`显示进度并实现取消按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T07:47:16.610

你有两种可能性：

1.  编写查询，返回行数，然后实现表模型，如果表要显示不在模型中的行，则尝试从数据库中加载行。在这种情况下，您需要第三个查询，它可以基于索引加载行（这些查询在 MS-SQL 和 Oracle 中是可能的）。例如：您加载前 100 行，以及结果的数量。如果表模型要求从位置 100 到 199 的行，您将进行新查询，加载这些行间隔（如果您的数据库可能），或者您尝试迭代您的结果集，并加载下一个数据批次。但是，如果用户按下“结束”键，您肯定需要基于索引的加载（或者您需要遍历完整的结果集）。
2.  您编写模型，显示第一批（例如 100 行）。如果用户滚动查看最后一行 (model.getValueAt(row, col) -> col == 99)，您只需询问下一批的结果集并将新行添加到模型中。

第一个变体对用户更好（因为用户可以看到表有多大并且可以直接滚动到最后一行），但第二个更容易实现，因为它不需要基于索引的行加载。

# c - 编写程序以在 C 中根据需要创建变量

> ID：14450076
> 
> 赞同：0
> 
> 时间：2013-01-22T01:20:26.537
> 
> 标签：c, variables, bioinformatics

我正在用 C 编写一个程序来从 FASTA 文件中读取文本，并且对于每个名称（例如 >COTV-SPAn232-096）我希望我的程序能够识别“>”，然后在 \n 之前使用以下文本用作变量的名称。

对变量进行硬编码的问题在于，该程序需要尽可能动态，因为它可以读取任意数量的不同数据集。例如，我的测试集有 15 个不同的序列，看起来像这样：

> COTV-SPAn232-096 MKILNSYNDFIISFINFILFPTIQNVSISKLNILGYILSFIRIISISMDFDILKFSNIIQDYGLIFPDDIKKIQNEKFLVLERGLSGKLYAIHIYDFMARFDNETIFGIAKFLYRNNTKILDVLFINKDLFDKTDILYPKSTITLSSYSDEYIDYTYKTIKLIFLNLFNSFRFSKIDSKLSYLYLPLRKDINNVIL

该计划以序列的名称读取，将该名称设置为动态数组的变量，并使用 malloc/realloc 来处理存储实际序列，以便以后比较所有不同的序列。我可以处理除变量变量名之外的所有内容。

简单地四处寻找答案，似乎它不能在 C 中完成，但可以在 python 和其他一些语言中完成。我真的希望这不是实际情况，但如果是这样的话，有没有人有其他建议来处理这个问题？是的，这是生物信息学，我可能应该使用 python、perl、java 或其他语言，但我宁愿继续在 C 中解决这个问题，以便进一步精通 C。

提前感谢我可能收到的任何答案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T01:24:34.143

这在 C 中是不可能的，但从来没有理由创建具有动态名称的变量（事实上，即使您在 C 中创建了这样的变量，您将如何使用它们？）

相反，使用[哈希表](http://en.wikipedia.org/wiki/Hash_table)- 这是一种从键映射到值的数据结构。在您的情况下，您希望它从字符串（您的序列名称）映射到字符串（您的序列）。

在线哈希表的 C 库示例比比皆是：这个[StackOverflow 问题](https://stackoverflow.com/questions/1138742/looking-for-a-good-hash-table-implementation-in-c)提供了一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T01:29:48.977

> The plan is read in the name of the sequence, set that name as the variable for a dynamic array and use malloc/realloc to handle storing the actual sequence for a later comparison of all the different sequences. I can handle everything except the variable variable names.

Instead of naming the variable with the sequence header/name, create a `struct` that holds the sequence header/name and the sequence, e.g.:

```
typedef struct {
    char *header;
    char *sequence;
} fasta_t; 
```

Then create a list of `fasta_t` pointers ("pointer to pointers"):

```
fasta_t **fasta_elements = NULL; 
```

Use `malloc()` to allocate space for `N` elements of type `fasta_t *`, *e.g.*:

```
fasta_elements = malloc(N * sizeof(fasta_t *)); 
```

It's a good idea to check if you actually got the memory you asked for:

```
if (!fasta_elements) {
    /* i.e., if fasta_elements is still NULL */
    fprintf(stderr, "ERROR: Could not allocate space for FASTA element list!\n");
    return EXIT_FAILURE;
} 
```

(You should get into the habit of doing this with every pointer you `malloc()`, in my opinion.)

Now that space has been allocated, read in `N` elements (use `realloc()` if we need to make the list bigger, but let's assume `N` elements for now). Within a loop, allocate space for an individual `fasta_t` pointer, as well as space for header and sequence `char *`s within the `fasta_t` pointer:

```
#define MAX_HEADER_LENGTH 256
#define MAX_SEQUENCE_LENGTH 4096

/* ... */

size_t idx;
char current_header[MAX_HEADER_LENGTH] = {0};
char current_sequence[MAX_SEQUENCE_LENGTH] = {0};

for (idx = 0U; idx < N; idx++) 
{
    /* set up space for the fasta_t struct members (the header and sequence pointers) */
    fasta_elements[idx] = malloc(sizeof(fasta_t));

    /* parse current_header and current_sequence out of FASTA input */
    /* ... */

    /* validate input -- does current_header start with a '>' character, for instance? */
    /* data in bioinformatics is messy -- validate input where you can */

    /* set up space for the header and sequence pointers */
    /* sizeof(char) is redundant in C, because sizeof(char) is always 1, but I'm putting it here for completeness */
    fasta_elements[idx]->header = malloc((strlen(current_header) + 1) * sizeof(char)); 
    fasta_elements[idx]->sequence = malloc((strlen(current_sequence) + 1) * sizeof(char));

    /* copy each string to the list pointer, for which we just allocated space */
    strncpy(fasta_elements[idx]->header, current_header, strlen(current_header) + 1);
    strncpy(fasta_elements[idx]->sequence, current_sequence, strlen(current_sequence) + 1);
} 
```

To print out the `i+1`'th element's header, for example:

```
fprintf(stdout, "%s\n", fasta_elements[i]->header); 
```

(Remember that indexing is 0-based in C — the 10th element has index 9, for instance.)

When finished, be sure to `free()` individual pointers within a `fasta_t *` pointer, the `fasta_t *` pointer itself, and then the `fasta_t **` pointer to pointers:

```
for (idx = 0U; idx < N; idx++) 
{
    free(fasta_elements[i]->header), fasta_elements[i]->header = NULL;
    free(fasta_elements[i]->sequence), fasta_elements[i]->sequence = NULL;
    free(fasta_elements[i]), fasta_elements[i] = NULL;
}
free(fasta_elements), fasta_elements = NULL; 
```

For convenience, once you get the hang of dealing with `struct`s and memory management, you'll want to write wrapper functions that set up, access, edit and break down a `fasta_t *` element, as well as wrapper functions that do the same for a list of `fasta_t *` elements.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T01:26:22.233

坏消息是它不能在 C 中完成，因为 C 变量是一个编译时概念。变量充当包含数据的内存区域的“标签”；一旦编译器完成，大多数变量的名称都会被丢弃。它们可能会被写入调试器的单独文件，但这对人类来说很方便。

好消息是您不需要将新变量命名为新名称。您所需要的只是包含名称的第二个变量。一对变量 - 一个用于 the`name`和一个用于 the`value`就是您所需要的。

# asp.net - 如何为 JuiceUI 配置 jQuery 脚本依赖项？

> ID：14450081
> 
> 赞同：0
> 
> 时间：2013-01-22T01:20:52.150
> 
> 标签：asp.net, .net-4.0, visual-studio-2012, juice-ui

刚刚开始使用 JuiceUI，使用 VS2012、.net40 和 ASP.net。我一直试图让一个基本的例子工作（可拖动）；看起来很多其他人都遇到过类似的问题，即[无法让 Juice UI 工作](https://stackoverflow.com/questions/13873629/cant-get-juice-ui-to-work?rq=1)

我不确定 JuiceUI 最近是否有变化，但我通过包管理器控制台下载了我的 2 个包，我认为它们是最新的：

安装包 JuiceUI 安装包 AspNet.ScriptManager.jQuery.UI.Combined

第二个包是获取必要的 DLL 以使用 VS2012。

作为我的示例，我在我的 aspx 文件中添加了以下内容：

```
<juice:Draggable ID="Draggable1" runat="server" TargetControlID="Button1" /> 
```

具有 Button1 id 的控件确实存在。web.config 由 JuiceUI 安装程序自动配置。

JuiceUI 包下载 jQuery 1.8.3 和 jQuery.UI.Combined 1.9.2 的依赖项。但是，当我尝试运行示例并检查 Chrome 中的 JavaScript 控制台时，我收到以下错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found) 
http://localhost:51569/Scripts/jquery-1.8.2.js
http://localhost:51569/Scripts/jquery-ui-1.9.0.js 
```

只有当我有 Draggable 元素存在时才会出现错误 - 如果我只删除该元素，其他一切都可以。这些脚本文件没有下载到我的脚本目录中——我有上面指定的更高版本。我尝试使用 ASP ScriptManager 指向我的 JS 文件，即

```
 <asp:ScriptReference Name="jquery" Path="~/Scripts/jquery-1.8.3.js"/>
 <asp:ScriptReference Name="jquery.ui.combined"  Path="~/Scripts/jquery-ui-1.9.2.js" 
```

但是，它似乎仍在寻找旧版本。这是 JuiceUI DLL 的问题，还是我可以修复的配置中的问题？

在此先感谢您的任何指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:33:55.220

查看源存储库中的 JuiceApp.cs 文件以获取有关如何执行此操作的示例，但您可以覆盖 Global.asax.cs 文件中的脚本定义以指向脚本的新版本。那应该可以解决问题。

你也可以考虑使用一个名为[Brew的新分支](http://shellscape.org/#brew)

# javascript - 无论如何要更改“名称”或“发起者”，或在 Chrome 开发工具的网络视图中添加新标签？

> ID：14450082
> 
> 赞同：1
> 
> 时间：2013-01-22T01:20:56.183
> 
> 标签：javascript, ajax, google-chrome, post, google-chrome-devtools

我想知道是否有任何方法可以更改 Chrome 开发工具中网络选项卡中的名称或启动器列。

问题是，目前我正在制作一个网络应用程序，它使用 jQuery 进行了大量的 POST 调用。这一切都很好而且很花哨，但是，当我有 10 多个电话时，显然“网络”选项卡会被 POST 电话淹没。

所有调用都针对同一个 PHP 脚本，因此 Name 列都是相同的。另外，由于我使用的是 jQuery，所以启动器设置为 jQuery。我想知道是否有任何方法可以自定义此视图，以便我知道什么脚本正在调用 POST，而无需打开每个调用并查看它的属性。

看到在列表视图中发送的值的截断版本甚至会很高兴。这样我就可以查看每个调用并确切地知道调用它的函数或脚本，或者至少有一个更好的主意，而不是 10 多个名称条目：“xxx.php”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-31T20:38:48.877

You can add custom columns that show you the values of response headers by right clicking on the table header and selecting Response Headers > Manage Header Columns:

[![manage header columns](../Images/3a57425ccebc0b379375f550c5b5e708.png)](https://i.stack.imgur.com/p8WPb.png)

You can also hide columns via this right-click menu.

# javascript - 从变量函数中获取属性？

> ID：14450083
> 
> 赞同：0
> 
> 时间：2013-01-22T01:21:19.053
> 
> 标签：javascript, function, object, properties

我有这个代码：

```
var rect2 = new drawRect({
        h: 100,
        w: 100,
        x: 280,
        y: 20,
        colour: '8CB5CF',
        name: 'Office 2'
} 
```

是否可以读取我传递给 drawRect 的属性？我的第一个想法是：

```
alert(rect2.h) 
```

但这导致`undefined`，没想到它真的会起作用，但我不知道如何解决这个问题。

我对javascript相当陌生。谢谢。

编辑：对不起这里是drawRect：

```
 function drawRect(rectOptions){
        var ctx = document.getElementById('canvas').getContext('2d');
        ctx.fillStyle = rectOptions.colour;
        ctx.fillRect(rectOptions.x,rectOptions.y,rectOptions.h,rectOptions.w);
        ctx.font = '12px sans-serif';
        ctx.fillText(rectOptions.name, rectOptions.w + rectOptions.x, rectOptions.h     + rectOptions.y);
    } 
```

这是完整代码：[完整代码](http://pastebin.com/LMAECVT7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:54:05.957

在`drawRect`函数内部，您可以添加一行以将`option`属性添加到由`drawRect`.

```
function drawRect(rectOptions) {
  this.options  = rectOptions;
  //...
} 
```

然后你可以做

```
var rect2 = new drawRect({ /* ... */ });
alert(rect2.options.h); 
```

或者，您可以`drawRect`返回传递给它的选项。

```
function drawRect(rectOptions) {
  //...
  return rectOptions;
} 
```

然后你可以做，就像你最初尝试的那样，

```
alert(rect2.h); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:55:22.000

```
var rect2 = new drawRect({
        h: 100,
        w: 100,
        x: 280,
        y: 20,
        colour: '8CB5CF',
        name: 'Office 2'
})
 function drawRect(rectOptions){
        //your code
        return rectOptions;//you have to return the value 
    }

alert(rect2.h);//alerts 100 
```

[链接到 jsfiddle](http://jsfiddle.net/jAb2z/)

# ruby-on-rails - Rails：有很多关系 - 从方法中确定哪个相关对象

> ID：14450089
> 
> 赞同：0
> 
> 时间：2013-01-22T01:22:03.637
> 
> 标签：ruby-on-rails, ruby, has-many, relationships

我有两个具有以下关系/方法的类：

```
class Bar
  has_many :foos

  def bar_method
    #puts the specific foo that called it
  end
end

class Foo
  belongs_to :bar

  def foo_method
    bar.bar_method
  end
end 
```

在 Foo 的实例上调用 foo_method 时，我如何知道是哪个 Foo 从 bar_method 中调用了它？这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:39:02.163

是的！这是一个简单的方法;）

```
class Bar
  has_many :foos

  def bar_method foo
    puts foo
  end
end

class Foo
  belongs_to :bar

  def foo_method
    bar.bar_method self
  end
end 
```

# asp.net - 在 Response.RedirectToRoute 之后跳过页面执行的正确方法

> ID：14450094
> 
> 赞同：8
> 
> 时间：2013-01-22T01:22:22.593
> 
> 标签：asp.net, vb.net, webforms, user-experience, response.redirect

我正在使用新的路由功能编写一个 asp.net 4.5 应用程序。我有一个页面显示有关项目的一些信息。如果`Page_Load`我检查了路线数据（项目 ID）和用户权限，如果有什么不对劲的地方（例如，该 ID 用于已删除的项目），我会使用`Response.RedirectToRoute`它们将其打包，直接返回主页。不要通过 GO，不要收取 200 美元。

直到我尝试访问已删除的项目并且我得到一个错误页面而不是主页，这才完全有意义。我做了一些挖掘，发现即使在我使用之后`RedirectToRoute`（与标准`Redirect`方法不同），其余的页面代码也会[继续执行](http://msdn.microsoft.com/en-us/library/dd783087.aspx)，这至少看起来很浪费（因为我只是要扔掉结果）并抛出错误当必要的数据不存在时。

我做了更多的 SO 挖掘，发现了令人难以置信的[*邪恶*](https://stackoverflow.com/questions/1087777/is-response-end-considered-harmful/3917180#3917180)`Response.End()`。它可以满足我的需要，但即使是 MSDN[页面](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.end.aspx)也告诉我这`Response.End`是一种古老的被诅咒语言的私生子，不适合看到光明。主要的反对意见似乎是 Response.End 抛出异常，这对性能不利。我不是最有经验的开发人员，所以我不完全理解这个问题，但我很难相信抛出异常比加载整个网页更昂贵。对于如此简单的任务，[变通方法](https://stackoverflow.com/a/3917180/1812515)似乎相当复杂和过度，特别是因为大多数页面都需要某种有效性检查。

在这种情况下我该怎么办？为我的无礼而使用`Response.End`并乞求宽恕？拼凑一些丑陋的解决方法？还是我对这个问题的看法一开始就错了？我真的很想知道。

更新：现在我已经考虑了更多，我想知道我是否对这个问题有错误的看法。也许立即重定向并不是用户体验的最佳响应。将所有控件包装在面板中并使用类似的东西会更好吗？

```
Private Sub Page_Init(sender As Object, e As EventArgs) Handles Me.Init
    'Validation Code
    If notValid Then
        ControlsPanel.Visible = false
        ErrorPanel.Visible = true
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T05:37:09.997

[RedirectToRoute](http://msdn.microsoft.com/en-us/library/dd783087.aspx)实际上包装了[Response.Redirect](http://msdn.microsoft.com/en-us/library/a8wa7sdt.aspx)传递`false`以结束请求 - 因此，请求继续。您可以使用[HttpApplication.CompleteRequest](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.completerequest.aspx)作为立即调用来终止请求，以便不会调用下一个应用程序事件。

`Response.End`（和其他重定向变体）抛出`ThreadAbortException`以中止请求处理线程，这确实是停止请求处理的*不好方法。*在 .NET 世界中，异常处理总是被认为是昂贵的，因为 CLR 然后需要一直向上搜索堆栈以查找异常处理块、创建堆栈跟踪等。IMO`CompleteRequest`在 .NET 1.1 中被引入以避免实际依赖的相同在 ASP.NET 基础结构代码中设置标志以跳过除`EndRequest`事件之外的进一步处理。

另一种（更好的）方法是使用[Server.Transfer](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.transfer.aspx)并避免客户端往返以一起设置重定向。唯一的问题是客户端不会在浏览器地址栏中看到重定向的 URL。我通常更喜欢这种方法。

**EDIT**
`CompleteRequest`永远不会在页面情况下工作，因为 page 是一个处理程序，后续页面事件仍将被调用，它的所有事件都发生在单个（和当前）应用程序事件中`ProcessRequest`。因此，唯一的方法似乎是设置一个标志并在诸如 , 等覆盖中检查`Render`该`PreRender`标志`RaisePostBackEvent`。

从维护的角度来看，在基页面类中具有这样的功能是有意义的（即维护标志、为`CompleteRequest`子类提供方法和覆盖生命周期事件方法）。例如，

```
internal class PageBase: System.Web.UI.Page
{
    bool _requestCompleted;

    protected void CompleteRequest()
    {
       Context.ApplicationInstance.CompleteRequest();
       _requestCompleted = true;
    }

    protected override void RaisePostBackEvent(IPostBackEventHandler sourceControl,
    string eventArgument)
    {
       if (_requestCompleted) return;
       base.RaisePostBackEvent(sourceControl, eventArgument);
    }

    protected internal override void Render(HtmlTextWriter writer)
    {
       if (_requestCompleted) return;
       base.Render(writer);   
    }

    protected internal override void OnPreRender(EventArgs e)
    {
       if (_requestCompleted) return;
       base.OnPreRender(e);   
    }

    ... and so on
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-14T16:45:01.983

我可能会因为不直接回答问题而陷入困境，但我喜欢看到你关于用户体验的更新。我更喜欢你建议的方法。

我喜欢为无效的 id 提供 410 错误，并使用（从 C# 翻译）对其进行扩展：

```
Protected Sub ItemDoesNotExist()
'item does not exist, serve up error page
ControlsPanel.Visible = False
ErrorPanel.Visible = True

'add meta tags for noindex
Dim mymeta As New HtmlMeta()
mymeta.Name = "robots"
mymeta.Content = "noindex"
Page.Header.Controls.Add(mymeta)

'RESPOND WITH A 410
Response.StatusCode = 410
Response.Status = "410 Gone"
Response.StatusDescription = "Gone"
Response.TrySkipIisCustomErrors = True
'important for IIS7, otherwise the Custom error page for 404 shows.
Page.Title = "item gone"
End Sub 
```

# curl - cURL 上传到 YouTube，不起作用（通过 curl.exe/DOS）- YT 服务器返回“来自服务器的空回复”

> ID：14450098
> 
> 赞同：0
> 
> 时间：2013-01-22T01:22:35.520
> 
> 标签：curl, youtube-api

我尝试通过 cURL 将 flv 的一小部分上传到 YouTube，但没有运气。

这是跟踪的一部分：

== 信息：即将 connect() 到 gdata.youtube.com 端口 80 (#0)
== 信息：正在尝试 74.125.228.69...
== 信息：已连接
== 信息：已连接到gdata.youtube.com (74.125.228.69) 端口 80 (#0)
=> 发送标头，658 字节 (0x292)
0000：POST /action/GetUploadToken HTTP/1.1
0026：用户代理：curl/7.28.1
003f：接受: */*
004c: 主机: uploads.gdata.youtube.com
006d: 授权: Bearer=ACCESS-TOKEN
0190: GData-Version: 2
01a2: X-GData-Key: key=DEVELOPER-KEY
0217: Slug: test2.flv
0228：内容类型：多部分/相关；边界=“a1b2c3d4e5f6g7h8i9”
0268：内容长度：8192
027e：连接：关闭
0290：
=>发送数据，7832字节（0x1e98）
0000：
0002：
0004：
0006：--a1b2c3d4e5f6g7h8i9
001c： 0022 ：
002：0类型：应用程序/原子+xml；charset=UTF-8 0055: 0057: 0059: 005b:009b:m"" xmlns:media=""http://search.yahoo.com/mrss/"" xmlns:yt=""htt 00db:p:/ /gdata.youtube.com/schemas/2007""> 011b: ype=""plain"">Eucharist Promo 015b: pe=""plain"">EWTN 电视节目 Eucharist 019b 促销: > 01db: 类别。

0250：--a1b2c3d4e5f6g7h8i9
0266：
0268：内容类型：视频/x-flv
0283 ：0285
：内容传输编码：二进制
02a8：
02aa：
02ac：.ftypmp42 mp42mp41 Fpmoov lmvhd .8T..8T。. *. )^ 。
02ec：。. . @
032c：。'.trak \tkhd ..8T..8T。. )JP
036c: . . @ .@ 。$edts .elst
03ac: . ）J.P .. 。'tmdia mdhd .8T..8T。u0 ..p.. D
03ec: hdlr vide Mainconcept MP4 Video Media Handler

++++++++++++++++++更多二进制代码在这里++++++++++++++

1dec: .. .v .@ .. . 。 .. 。F 。* .v .. .y *T .. .. .. ..
1e2c: ., .{ .S .G .. .d .. .r .{ .. .. .2 .. .. .. ..
1e6c: .. ..
1e78:
1e7a:
1e7c: --a1b2c3d4e5f6g7h8i9--
1e94:
1e96:
== 信息：上传已完全发送：7832 个字节中的 7832 个
== 信息：来自服务器的空回复
== 信息：连接 #0托管 gdata.youtube.com 保持不变
== 信息：关闭连接 #0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:11:05.533

您尝试使用的[基于浏览器的上传流程](https://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading)并不适合从命令行上传。

[直接上传流程](https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading)更合适。

更好的是，尝试使用受支持的[客户端库](https://developers.google.com/youtube/code)之一，并避免在 cURL 中手动执行此操作（除非您真的想要）。

# java - 垃圾收集器是否会收集不再可访问但仍指向树的树的叶子

> ID：14450103
> 
> 赞同：2
> 
> 时间：2013-01-22T01:23:28.723
> 
> 标签：java, tree, garbage-collection, binary-search-tree

在这种情况下会发生什么？即使它仍然有对树的引用，它会被收集吗？

```
class BinarySearchTree {
    TreeNode root;
    /* constructor  including assigning the root*/
    /* other methods of the tree */
    public void example() {
        root = null; /* assume the root already has children */
                         /* we haven't set the parent of the child of the root*/
                          /*to null*/
    }
}

class TreeNode {
    private TreeNode left;
    private TreeNode right;
    private TreeNode parent;

    /* set and get methods */
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T01:41:14.820

垃圾收集器从“根”开始。这些将是由 JVM 锚定的几个表以及所有线程的所有堆栈帧中的所有引用。每个“根”引用都被“跟踪”到它所寻址的任何对象，并且该对象被添加到可访问但未跟踪的对象列表中。

在跟踪根之后，一次检查一个可达但未跟踪的对象列表，并且这些对象中的引用被“跟踪”到其他对象，这些对象又被添加到列表中。

一旦对象被跟踪，就会从列表中删除。在跟随参考时到达并且结果已经被触摸的对象不会添加到列表中。

最终，可到达但未跟踪的对象列表变为空，此时“标记”阶段完成。然后是“扫描”阶段——所有对象都被扫描，任何没有到达的都被丢弃。

当然，这是一个过度简化的 GC 版本，但它几乎涵盖了所有内容。如上所述无法“到达”的对象将被“收集”并将其空间返回到可用空间池。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T01:28:27.900

垃圾收集器将收集任何无法访问的对象。IOW，没有任何迹象表明它。它指向自己的内容无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T01:28:57.597

它将被删除垃圾收集器收集每个没有引用它的对象，这意味着你根本无法访问它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T01:29:40.990

在没有看到您实际如何填充树的情况下，答案是“视情况而定”。作为一般规则，如果将来无法访问该变量，则将其称为对象并且 gc 会处理它。但是，如果您的树以您以后可以引用子节点的方式设置（例如，如果它们具有实际的变量名称），那么 gc 将无济于事。

# python - 在 Mac OS x 10.7.5 中运行 Scrapy 所需的文件，使用 Python 2.7.3 IEPD_free（32 位）

> ID：14450109
> 
> 赞同：2
> 
> 时间：2013-01-22T01:24:23.293
> 
> 标签：python, macos, lxml, scrapy

我是第一次测试scrapy，在使用命令安装它之后：

```
sudo easy_install -U scrapy 
```

一切似乎运行正常。但是，当我运行时：

```
scrapy startproject tutorial 
```

我得到以下信息：

```
luismacbookpro:~ luis$ scrapy startproject tutorial
Traceback (most recent call last): File "/Library/Frameworks/Python.framework/Versions/Current/bin/scrapy", line 4, in <module>
import pkg_resources
File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/pkg_resources.py", line 2711, in <module>
working_set.require(__requires__)
File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/pkg_resources.py", line 690, in require
needed = self.resolve(parse_requirements(requirements))
File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/pkg_resources.py", line 588, in resolve
raise DistributionNotFound(req)
pkg_resources.DistributionNotFound: lxml 
```

知道发生了什么吗？如您所知，我对 OSX 一点也不精通，而且我仍在尝试从 Windows 的“心态”转移到 OSX，所以我不知道在哪里添加路径、修改设置、依赖项等。甚至没有确定如何执行干净卸载并重新开始。

感谢您提供任何反馈，甚至您建议使用可以执行与 scrapy 相同功能的替代 python 库。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T00:25:55.680

我认为这将解决您看到的错误消息：

```
sudo easy_install --upgrade lxml 
```

`pip`当您使用安装某些软件包和安装其他软件包时，Mac 上可能会出现此问题`easy_install`。

让我们知道你的进展:)

# ruby-on-rails-3 - 使用 Coffeescript 更新 has_many, :through 表中的额外列

> ID：14450111
> 
> 赞同：0
> 
> 时间：2013-01-22T01:24:24.573
> 
> 标签：ruby-on-rails-3, coffeescript, jquery-ui-sortable, has-many-through

我在这里有一个相当简单的设置：一个`Doc`模型、一个`Publication`模型和一个`Article`模型。

**文档.rb**

```
class Doc < ActiveRecord::Base
  attr_accessible :article_ids,:created_at, :updated_at, :title
  has_many :publications, dependent: :destroy
  has_many :articles, :through => :publications, :order => 'publications.position'
  accepts_nested_attributes_for :articles, allow_destroy: false
  accepts_nested_attributes_for :publications, allow_destroy: true
end 
```

**出版物.rb**

```
class Publication < ActiveRecord::Base
  attr_accessible :doc_id, :article_id, :position
  belongs_to :doc
  belongs_to :article
  acts_as_list
end 
```

**文章.rb**

```
class Article < ActiveRecord::Base
  attr_accessible :body, :issue, :name, :page, :image, :article_print, :video, :id
  has_many :publications
  has_many :docs, :through => :publications
end 
```

该`Doc`表单允许用户选择和订购许多文章：

```
...
<% @articles.each do |article| %>
    <span class="handle">[drag]</span> 
    <%= check_box_tag("doc[article_ids][]", article.id, @doc.articles.include?(article), :class => "article_chooser" ) %> 
    <a id="<%= article.id %>" class="name"><%= article.name %></a>
<% end %>
... 
```

这个 Coffeescript 保存了拖动的顺序：

```
jQuery ->
  $('#sort_articles').sortable(
    axis: 'y'
    handle: '.handle'
    update: ->
      $.post($(this).data('update-url'), $(this).sortable('serialize'))
  ); 
```

这是**docs_controller.rb**中的排序方法：

```
def sort
  Article.all.each_with_index do |id, index|
    Publication.update_all({position: index + 1}, {id: id})
  end
render nothing: true
end 
```

我遵循了 Rails cast 的[这个](http://railscasts.com/episodes/147-sortable-lists-revised)可排序列表，在我更新记录之前一切正常，`Doc`因为更新时不会保存重新排序。我得出的结论是，这是因为我的可排序字段位于关联表（即`publications`）上，但由于应用程序的工作方式，它必须如此。

我一直在这里做一些研究，发现[这个](https://stackoverflow.com/questions/9174513/rails-has-many-through-form-with-checkboxes-and-extra-field-in-the-join-model)问题的答案很接近，但是因为我有一个 Coffeescript 操作首先保存了记录，所以它不起作用。

任何帮助都会非常好，我真的被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:05:10.430

因为我为此苦苦挣扎了很长时间，所以我将我愚蠢的简单解决方案放在这里。希望它可以帮助别人。

`update`就像在保存更改之前删除旧的连接表记录一样简单，即：

**docs_controller.rb**

```
def update
  @doc = Doc.find(params[:id])
  @doc.publications.destroy_all
  respond_to do |format|
    if @doc.update_attributes(params[:doc])
      format.html { redirect_to share_url(@doc) }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @doc.errors, status: :unprocessable_entity }
    end
  end
end 
```

繁荣。

# c - 拆分一个字符串并合并 2 个字符串 - C

> ID：14450112
> 
> 赞同：1
> 
> 时间：2013-01-22T01:24:30.090
> 
> 标签：c, string, gcc

我正在尝试拆分一个字符串，然后在拆分点将另一个字符串插入到第一个字符串中。

例子：

```
int main(int argc, char **argv)
{
    char src1[4]= "foo";
    char src2[4]= "bar";

} 
```

我想拆分`src1`as`f`并`oo`插入`src2`，以便得到一个字符串`fbaroo`。在 C 中最好的方法是什么？

我尝试使用`snprintf`，但我无法达到同样的效果。以下是代码：

```
snprintf(result, 1,"%s",src1[0]);
snprintf(result, strlen(src2), "%s",src2);
snprintf(result, strlen(src1)-1, "%s", **how do i get remaining characters**); 
```

当然，我可以将它最初拆分以稍后组合，但我试图找到是否有更好的解决方案，即使用库函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:34:51.347

代码中的`snprintf`s 都从一开始就覆盖了缓冲区。

这是一次通话的一种方法

```
snprintf(result, sizeof(result), "%c%s%s", src1[0], src2, &src1[1]); 
```

`&src1[1]`展示了如何获取“字符串的其余部分” 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:37:28.047

首先，您需要一个具有足够空间的新字符串：

```
char finalString[7]; 
```

然后你需要将 X 的第一个字符复制`src1`到我们的新字符串中，你可以通过[memcpy](http://www.manpagez.com/man/3/memcpy/)或[stcpy](http://www.manpagez.com/man/3/strcpy/)来实现，我会用后面的。因此，如果您只想复制第一个字符，`src1`您应该这样做：

```
strcpy(finalString, src1, 1); 
```

现在只需使用[strcat](http://www.manpagez.com/man/3/strcat/)`src2`将字符串复制到它上面

```
strcat(finalString, src2); 
```

并附加字符串的其余部分`src1`，从第一个未复制的字符开始：

```
strcat(finalString, &src1[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T01:39:33.387

我会去`sprintf()`：

```
# include <stdio.h>

int main(int argc, char **argv) {

    char src1[4] = "foo";
    char src2[4] = "bar";
    char result[8] = {'\0'};

    sprintf(result, "%c%s%s", src1[0], src2, &src1[1]);
    printf("Result: [%s];\n", result);

} 
```

输出：

```
$ ./a.out 
Result: [fbaroo]; 
```

# objective-c - uitableviewcell 内的异步加载图像

> ID：14450114
> 
> 赞同：0
> 
> 时间：2013-01-22T01:24:34.917
> 
> 标签：objective-c, asynchronous, uitableview, loading-image

您好，我正在尝试在我制作的 CustomTableViewCell 中使用 EGOImageView 来自定义单元格。这是我使用 EGOImageView 的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { static NSString* simpleTableIdentifier = @"Albums";

CustomTableCell* cell = (CustomTableCell*)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

if (!cell)
{
   cell = [[CustomTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];

    NSLog(@"Show once or more times");
}

NSDictionary* dictionary = (NSDictionary*)[self.albumCollection objectAtIndex:indexPath.row];

cell.label.text = [dictionary valueForKey:@"name"];

EGOImageView* imageView = [[EGOImageView alloc] initWithPlaceholderImage:[UIImage imageWithContentsOfFile:@""]];
[imageView setImageURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/picture?type=small&access_token=%@", (NSString*)[dictionary valueForKey:@"id"], [[FBSession activeSession] accessToken]]]];
[imageView setFrame:CGRectMake(0.0f,0.0f,78.0f,78.0f )];

[cell.iView addSubview:imageView];
[imageView release]; 
```

每个单元格上的图像加载相同的图像。会不会是因为它在加载图像时重用了单元格。

我发现了一个问题，我想不出问题发生的原因。我使用图形 api 来获取图像[https://graph.facebook.com/%@/picture?type=small&access_token=%@](https://graph.facebook.com/%@/picture?type=small&access_token=%@)其中第一个参数是专辑 ID。

为了让自己更容易看到问题，我只在单元格上使用了一张相册，无论我使用什么相册，同一张照片都出现了。但是当我将链接复制到浏览器时，地址栏上显示的实际照片 url 显示了图像，并且显示了正确的照片。

有谁知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:17:38.837

这是示例。它在后台从某个服务器加载用户图片并更新单元格图像。请注意， imageView.image 在开始时设置为 nil。这是用于单元重用情况的圆顶，因此在下载时您将没有图像而不是错误的图像。

要添加的另一件事是，拥有一个缓存也很好，这样它就不会一直下​​载图像。另一件好事是不要在边缘网络中下载图像。

```
- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"TransactionCell";
        NSMutableArray *data = searching ? searchResult : dataSource;
        NSDictionary *object = [data objectAtIndex:[indexPath row]];

        UITableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
                cell = [[[UITableViewCell alloc] initWithIdentifier:CellIdentifier] autorelease];
        }
        cell.imageView.image = nil;
        cell.textLabel.text = @"Your cell text";
        NSString *contact = @"foo@gmail.com";
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                        NSData *imgData = [appDelegate addUserPic:contact];
                        if (imgData == nil && netStatus == ReachableViaWiFi) {
                                NSString *url = [NSString stringWithFormat:@"http://somehost.com/userpic/%@", contact];
                                imgData = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];
                        }
                        dispatch_async(dispatch_get_main_queue(), ^{
                                UITableViewCell *updateCell = [self.tableView cellForRowAtIndexPath:indexPath];
                                if (updateCell) {
                                        if (imgData) {
                                                [appDelegate setUserPic:contact imgData:imgData];
                                                updateCell.imageView.image = [UIImage imageWithData:imgData];
                                        } else {
                                                updateCell.imageView.image = nil;
                                        }
                                        /* This forces the cell to show image as now
                                           it has normal bounds */
                                        [updateCell setNeedsLayout];
                                }
                        });
                });
        return cell;
} 
```

# c# - 是否可以在 C# 中重用数组变量？

> ID：14450116
> 
> 赞同：0
> 
> 时间：2013-01-22T01:24:45.987
> 
> 标签：c#, selenium, webdriver

我是 c# 的新手，我想知道是否可以在 c# 中重用数组变量？例如，我有以下代码，

```
string[] contactAddress = { "123 abc street", "xyz road", "Sydenham", "Christchurch", "Canterbury", "8023", "New Zealand" };
driver.AddContactAddress(contactAddress); 
```

我想要这个的原因是重用`contactAddress`但具有不同的值。这个想法是`AddContactAddress()`用不同的值调用。希望这是有道理的。

我检查了其他问题，但它似乎没有回答我的问题。

这用于表单测试。所以有些表格有很多值因为有很多值，我想创建一个传递值的数组，而不是传递每个变量/值。这是个坏主意吗？

我正在使用 c# 和 selenium webdriver。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T01:28:56.503

是的。用不同的值初始化它，如下所示：

```
contactAddress = new []{"xxx","yyy"}; 
```

# c# - XNA 4.0 安全摄像头功能

> ID：14450119
> 
> 赞同：1
> 
> 时间：2013-01-22T01:25:08.780
> 
> 标签：c#, xna-4.0

我正在寻找在我想要设计的游戏中制作安全摄像头类型的功能。我的想法是在游戏中将有一个类似于电视屏幕的指定矩形，我希望能够在该矩形区域中显示相机在特定房间中看到的内容。

所以要设置一个特定的场景，假设我们有房间 A 和房间 B。我希望房间 B 成为一个电视屏幕，显示房间 A 中当前显示的内容。我知道这一定是可能的，如何使用 XNA 摄像头功能，我真的不确定如何输出相机在该区域看到的内容，然后将其显示在房间 B 的指定精灵矩形中。

希望这是有道理的或可能的：D

TK，谢恩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:46:32.930

您需要将您的安全摄像头场景渲染为自定义`RenderTarget2D`，然后您可以像使用`Texture2D`.

5个基本步骤是：

*   创建自定义`RenderTarget2D`
*   告诉你`GraphicsDevice`渲染到这个新目标
*   渲染你的“屏幕”场景
*   重置渲染目标
*   使用渲染目标创建的纹理纹理您的屏幕多边形

有关详细信息，请参阅[Riemer 的 XNA 教程](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series3/Render_to_texture.php)。

# php - 从网络更新我的android应用程序数据的最简单方法是什么

> ID：14450121
> 
> 赞同：0
> 
> 时间：2013-01-22T01:25:16.117
> 
> 标签：php, android, mysql

我想要做的是找出一种从网络检索新数据的方法，而不必每次添加新数据时都从市场上更新应用程序。数据将检索“标题”、“描述”和“网站 url”的列表。例如：

```
"title1", "description 1", "url1"
"title2", "description 2", "url2"
"title3", "description 3", "url3"
"title4", "description 4", "url4"
"title5", "description 5", "url5"
"title6", "description 6", "url6" 
```

我希望这是安全和高效的。

我在考虑可能有一个连接到具有 4 列（id、title、description、url）的 mySQL 数据库的 php 页面，然后应用程序可以转到 php 页面，例如[http://www.website.com/database .php?getData&id=1](http://www.website.com/database.php?getData&id=1)其中“1”是数据库中行的 ID。所以[http://www.website.com/database.php?getData&id=1](http://www.website.com/database.php?getData&id=1)会在 php 页面 title1*description1*url1 中显示这个字符串。然后，android 应用程序会将字符串从“*”中拆分出来，以将标题、描述和 url 保存在一个数组中。并且“ [http://www.website.com/database.php?getData&id=2](http://www.website.com/database.php?getData&id=2) ”会做同样的事情，但对于数据库中的第二行。

现在我不确定这是否有效。我想知道这样做的最佳方法是什么。我希望我是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:29:59.413

Write php script that will query your database. Convert each row of the result into JSON format, echo it, collect the response JSON from your application, use some JSON libraries to manipulate the JSON output.

All you need is:

1.  php script - for querying your database (server side)

2.  Asynchronous approach from the client, use your own async implementation or use `AsyncTask` or `Service`

3.  Use `JSON` libraries (Google for them) to convert the `JSON` output to JSON objects for easier manipulation. Each database column will be presented as key in the JSON object.

4.  Display the data per your needs.

Cheers, I guess this gave you the glimpse.

# c - C - 指向矩阵的指针

> ID：14450123
> 
> 赞同：3
> 
> 时间：2013-01-22T01:25:31.920
> 
> 标签：c, pointers, matrix

我正在尝试通过引用将矩阵传递给函数。`A[i][j]`该函数将用 替换矩阵的每个元素`-A[i][j]`。我首先创建矩阵：

```
float a[3][4] =
{
    {1.0f, 0.0f, 0.0f, 0.0f},
    {0.0f, 1.0f, 0.0f, 0.0f},
    {1.0f, 1.0f, 0.0f, 0.0f},
}; 
```

然后，我获得指向该矩阵的指针：

```
float*** pa = &a; 
```

然后，我介绍以下功能：

```
void process(float ***matrix, int nRows, int nCols){
 short i;
 short j;
 for (i=0 ; i<nRows; i++){
   for (j=0 ; j<nCols ; j++){
     (*matrix)[i][j] *= -1;
   }
 }
} 
```

我称之为：

```
process(pa,3,4); 
```

我的程序无法执行并返回：

```
Segmentation fault: 11 
```

有任何想法吗？

**答案摘要：**基于此问题收到的问题的一些注释：

I. 可以使用上述函数，前提是`a`它的初始化稍有不同，以便成为`float**`. 尤其：

```
int numberOfRows = 3;
int numberOfColumns = 4;
float **a = (float **) malloc(sizeof (float *) * numberOfRows);
for (i = 0; i < numberOfRows; ++i) {
    a[i] = (float *) malloc(sizeof (float) * numberOfColumns);
} 
```

然后，它作为 传递给`process`函数`process(&a, 3,4);`。

二、或者，可以使用以下功能：

```
void multi_by_minus(float *matrix, int nRows, int nCols) {
  short i,j;
  for (i = 0; i < nRows; i++) {
      for (j = 0; j < nCols; j++) {
          matrix[i * nCols + j] *= -1;
      }
  }
} 
```

它将矩阵视为一维数组。在这种情况下，我们只需将其调用为`multi_by_minus(&a, 3, 4);`

三、最后，我们可以使用以下方法：

```
void process2(int nRows, int nCols, float (*matrix)[nCols]) {
  short i, j;
  for (i = 0; i < nRows; i++) {
    for (j = 0; j < nCols; j++) {
        matrix[i][j] *= -1;
    }
  }
} 
```

我们提供一个指向它的指针`a`，即我们像调用它一样调用它`process2(3,4,&a);`。通过这种方式，我们获得了对二维矩阵元素的访问权限。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T01:31:02.447

由于您已经在提供内存，因此不需要三重指针。如果要在 de 函数内分配内存，您将使用它。

如果不提供至少 1 维的大小，则无法索引 2 维矩阵。原因是编译器需要生成代码来访问正确的偏移量，同时考虑到这两个维度。在这种特殊情况下，我建议将一个简单的指针和索引作为一维数组传递，如下所示：

```
void process(float *matrix, int nRows, int nCols){
 short i;
 short j;
 for (i=0 ; i<nRows; i++){
   for (j=0 ; j<nCols ; j++){
     matrix[i * nCols + j] *= -1;
   }
 }
} 
```

然后你可以这样称呼它：

```
process((float*)a,3,4); 
```

这样您就可以手动索引缓冲区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T01:39:09.510

您必须将函数的签名更改为：

```
void process(float (*matrix)[3][4], int nRows, int nCols){ 
```

调用该函数时，请使用以下命令：

```
process(&a, 3, 4); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T01:57:22.563

如果将参数放在`nCols`参数之前`matrix`，则可以传递二维矩阵并以自然的方式使用它，无需额外的`*`运算符或索引运算：

```
void process(int nRows, int nCols, float (*matrix)[nCols])
{
    for (short i = 0 ; i < nRows; i++)
    {
        for (short j = 0; j < nCols; j++)
        {
            matrix[i][j] *= -1;
        }
     }
} 
```

然后你`process`这样调用：

```
process(3, 4, matrix); 
```

顺便：

*   除非有特殊原因，否则`i`应`j` `short`申报`int`。`int`被定义为目标平台上整数的“自然”大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-18T03:13:24.733

很简单，如果你有一个矩阵：

```
int m[2][2]={{1,0},{0,1}}; 
```

并且你想定义一个指向 m 的指针，所以你必须声明：

```
int (*mptr)[2][2];
mprt=m; // or mptr=&m;  is the same. 
```

你可以用它来指向矩阵 m 的元素。

```
(*mptr)[i][j].... 
```

# objective-c - 将一个用 NSStrings 填充的 NSArray 转换为 UTF8String 向量

> ID：14450126
> 
> 赞同：0
> 
> 时间：2013-01-22T01:26:14.620
> 
> 标签：objective-c, c, nsstring, nsarray

所以我想知道，是否有一些快速的方法可以将一个充满 NSStrings 的 NSArray 转换为等效的 UTF8string 值？

我想将一些参数配置存储在 NSArray 中，然后在以 (int argv, const char *argv[]) 作为参数的函数中使用它们。

我以一种复杂的方式实现了这一点

```
int argc = [gameParameters count];
const char **argv = (const char **)malloc(sizeof(const char*)*argc);
for (int i = 0; i < argc; i++) {
    argv[i] = (const char *)malloc(sizeof(char)*[[gameParameters objectAtIndex:i] length]+1);
    strncpy((void *)argv[i], [[gameParameters objectAtIndex:i] UTF8String], [[gameParameters objectAtIndex:i] length]+1);
} 
```

但我不太满意，清理内存很乏味。

您知道实现此结果的更好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:07:26.187

如果字符串包含非 ASCII 字符，则您当前的实现不正确。例如，字符串@"é"（带尖音的小写字母 E）的长度为 1，但 UTF-8 序列“C3 A9”有 2 个字节。您的代码不会为该字符串分配足够的内存。

（换句话说：`[string length]`返回字符串中的 Unicode 字符数，而不是 UTF-8 表示的字节数。）

`strdup()`正如 Kevin Ballard 所建议的，使用可以解决这个问题：

```
argv[i] = strdup([[gameParameters objectAtIndex:i] UTF8String]); 
```

但是您还应该检查是否有必要复制字符串。如果您在当前自动释放上下文中调用该函数，则以下内容就足够了：

```
int argc = [gameParameters count];
const char **argv = (const char **)malloc(sizeof(const char*)*argc);
for (int i = 0; i < argc; i++) {
    argv[i] = [[gameParameters objectAtIndex:i] UTF8String];
}
yourFunction(argc, argv);
free(argv); 
```

# java - 需要 MenuBar 的 MouseOutEvent 来检测点击：GWT

> ID：14450129
> 
> 赞同：1
> 
> 时间：2013-01-22T01:26:30.767
> 
> 标签：java, events, gwt, menubar

我是使用`GWT`. 我有一个`menubar`我想保留在屏幕上的内容，即使鼠标不在它上面。但是，当鼠标不在`menubar`并单击屏幕上的某个位置时，我希望菜单栏消失。我尝试使用，`MouseOutEvent`但我需要它仅在单击鼠标时才触发，而不仅仅是退出。任何帮助，将不胜感激。

```
this.menu.addDomHandler(menuHoverOutHandler, MouseOutEvent.getType());

 MouseOutHandler menuHoverOutHandler = new MouseOutHandler() {
       public void onMouseOut(MouseOutEvent event) {
            Window.alert("I am outside the region");
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-02T01:27:48.020

**以下是从我的实时应用程序中获取的完整工作答案：**

我解决鼠标退出菜单关闭的方法是在构造函数的顶部运行一个布尔变量“isMouseOut”来跟踪，然后以更OO友好的方式分配MouseListener来跟踪多个MouseIn-MouseOut事件当用户与菜单交互时。它调用了一个单独的 menuClear 方法，作用于布尔“isMouseOut”的状态。该类实现 MouseListener。这就是它的完成方式。

首先创建一个 ArrayList，将所有菜单项添加到该数组中。像这样：

```
 Font menuFont = new Font("Arial", Font.PLAIN, 12);
    JMenuBar menuBar = new JMenuBar();
    getContentPane().add(menuBar, BorderLayout.NORTH); 

// Array of MenuItems
    ArrayList<JMenuItem> aMenuItms = new ArrayList<JMenuItem>();
    JMenuItem mntmRefresh = new JMenuItem("Refresh");
    JMenuItem mntmNew = new JMenuItem("New");
    JMenuItem mntmNormal = new JMenuItem("Normal");
    JMenuItem mntmMax = new JMenuItem("Max");
    JMenuItem mntmStatus = new JMenuItem("Status");
    JMenuItem mntmFeedback = new JMenuItem("Send Feedback");
    JMenuItem mntmEtsyTWebsite = new JMenuItem("EtsyT website");
    JMenuItem mntmAbout = new JMenuItem("About");

    aMenuItms.add(mntmRefresh);
    aMenuItms.add(mntmNew);
    aMenuItms.add(mntmNormal);
    aMenuItms.add(mntmMax);
    aMenuItms.add(mntmStatus);
    aMenuItms.add(mntmFeedback);
    aMenuItms.add(mntmEtsyTWebsite);
    aMenuItms.add(mntmAbout); 
```

然后在此阶段迭代 arrayList，使用 for() 循环添加 MouseListener：

```
 for (Component c : aMenuItms) {
        if (c instanceof JMenuItem) {
            c.addMouseListener(ml);
        }
    } 
```

现在为 MenuBar 设置 JMenu 父级：

```
// Now set JMenu parents on MenuBar
    final JMenu mnFile = new JMenu("File");
    menuBar.add(mnFile).setFont(menuFont);
    final JMenu mnView = new JMenu("View");
    menuBar.add(mnView).setFont(menuFont);
    final JMenu mnHelp = new JMenu("Help");
    menuBar.add(mnHelp).setFont(menuFont); 
```

然后将下拉 menuItems 子项添加到 JMenu 父项：

```
// Now set menuItems as children of JMenu parents
    mnFile.add(mntmRefresh).setFont(menuFont);
    mnFile.add(mntmNew).setFont(menuFont);
    mnView.add(mntmNormal).setFont(menuFont);
    mnView.add(mntmMax).setFont(menuFont);
    mnHelp.add(mntmStatus).setFont(menuFont);
    mnHelp.add(mntmFeedback).setFont(menuFont);
    mnHelp.add(mntmEtsyTWebsite).setFont(menuFont);
    mnHelp.add(mntmAbout).setFont(menuFont); 
```

将 mouseListeners 作为单独的步骤添加到 JMenu 父级：

```
 for (Component c : menuBar.getComponents()) {
        if (c instanceof JMenu) {
            c.addMouseListener(ml);
        }
    } 
```

现在，子 menuItem 元素都有自己的侦听器，这些侦听器与父 JMenu 元素和 MenuBar 本身是分开的 - 在 MouseListener() 实例化中识别对象类型很重要，这样您就可以在鼠标悬停时自动打开菜单（在这个例子是 3x JMenu 父母）但也避免了子异常错误，并允许在不尝试监视鼠标位置的情况下干净地识别菜单结构的 mouseOUT。鼠标监听器如下：

```
MouseListener ml = new MouseListener() {
        public void mouseClicked(MouseEvent e) {
        }

        public void mousePressed(MouseEvent e) {
        }

        public void mouseReleased(MouseEvent e) {
        }

        public void mouseExited(MouseEvent e) {
            isMouseOut = true;
            timerMenuClear();
        }

        public void mouseEntered(MouseEvent e) {
            isMouseOut = false;
            Object eSource = e.getSource();
            if(eSource == mnHelp || eSource == mnView || eSource == mnFile){
                ((JMenu) eSource).doClick();
            }
        }
    }; 
```

以上仅模拟鼠标单击 JMenu 'parents'（本例中为 3x），因为它们是子菜单下拉菜单的触发器。timerMenuClear() 方法调用 MenuSelectionManager 以清空在真正 mouseOUT 时处于活动状态的任何选定路径点：

```
public void timerMenuClear(){
    ActionListener task = new ActionListener() {
      public void actionPerformed(ActionEvent e) {
          if(isMouseOut == true){
              System.out.println("Timer");
          MenuSelectionManager.defaultManager().clearSelectedPath();
          }
      }
  };        
    //Delay timer half a second to ensure real mouseOUT
  Timer timer = new Timer(1000, task); 
  timer.setInitialDelay(500);        
  timer.setRepeats(false);
  timer.start();
} 
```

我花了一些时间进行测试，监控在开发过程中我可以在 JVM 中访问哪些值 - 但它确实是一种享受！即使有嵌套菜单 :) 我希望很多人发现这个完整的例子非常有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T02:52:04.593

使用小部件的模糊处理程序。它检测小部件何时失去焦点。

# linux-kernel - SLAB 内存管理

> ID：14450133
> 
> 赞同：11
> 
> 时间：2013-01-22T01:27:03.810
> 
> 标签：linux-kernel

我对[SLAB 内存管理机制](http://en.wikipedia.org/wiki/Slab_allocation)的结构感到困惑。

我知道有多个特定于常用数据对象的“缓存”，但为什么每个缓存都包含多个“平板”？

缓存中的每个slab有什么区别？为什么不简单地用数据对象本身填充缓存呢？为什么需要这个额外的层？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T19:18:26.903

平板分配器是一个抽象层，可以更轻松地分配大量相同类型的对象。接口提供功能

```
struct kmem_cache * kmem_cache_create(const char *name,
    size_t size, size_t align, unsigned long flags,
    void (*ctor)(void*)); 
```

这个函数创建一个新的slab分配器，它将能够处理`size`-bytes长对象的分配。如果创建成功，您将获得指向相关`struct kmem_cache`. 该结构包含有关其管理的*板块的信息。*

正如 Wikipedia 描述中所暗示的那样，这种额外层的目的是防止以简单直观的方式进行内存分配时可能发生的内存碎片问题。为此，它通过以下数据结构引入了*平板的概念：*

```
struct slab {
    struct list_head list; /* embedded list structure */
    unsigned long colouroff;
    void *s_mem; /* first object in the slab */
    unsigned int inuse; /* allocated objects in the slab */
    kmem_bufctl_t free; /* first free object (if any) */
}; 
```

因此，该`kmem_cache`对象包含 3 个它的*slab*列表，以 3 种风格收集：

*   空板：这些板不包含使用中的对象。
*   部分slab：这些slab包含当前使用的对象，但仍有可以容纳新对象的内存区域。
*   完整的slabs：这些slabs包含正在使用的对象并且不能承载新的对象（完整的......）。

当通过slab分配器请求一个对象时，它会尝试在部分slab中获取所需的内存区域，如果不能，它将从一个空slab中获取。

如果你渴望收集更多关于这方面的信息，你应该看看 Robert Love 的[*Linux Kernel Development*](https://rads.stackoverflow.com/amzn/click/com/0672329468)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-04T04:36:23.727

我可能来不及回答这个问题，但这也可能对其他人有所帮助。正如我从[Understanding Linux Virtual Memory Manager](https://www.kernel.org/doc/gorman/pdf/understand.pdf)中看到的，拥有slab 具有三个主要好处。

1.  **减少好友系统造成的**内部碎片化。**因为我们有最适合较小对象的缓存。**
***   **更好的硬件缓存使用**——通过对齐对象以在不同的平板中以不同的偏移量开始，这样可以减少缓存行之间的干扰。这是基于我们有物理索引缓存的假设。*   一个slab是缓存中的主要单元，它被立即获取/放弃。这也会**减少外部碎片**。**

 **[请参阅The Slab Allocator: An Object Caching Kernel memory Allocator](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.29.4759) (1994) 中的第 3.2 节。**

# entity-framework - 我的工作单元实施会导致内存泄漏吗？

> ID：14450138
> 
> 赞同：0
> 
> 时间：2013-01-22T01:27:30.437
> 
> 标签：entity-framework

我通过以下方式实现了我的存储库模式和工作单元：

*   [如何创建一个简单的数据访问层](http://bizvise.com/2012/11/28/how-to-create-a-simple-data-access-layer-using-repository-pattern-with-entity-framework/)
*   [如何创建工作单元](http://bizvise.com/2012/11/28/how-to-create-a-simple-data-access-layer-unit-of-work-pattern-with-entity-framework/)

我被问到创建我的数据库的多个实例（这是工作单元）是否会导致**内存泄漏**？这种实施的**缺点是**什么？或者实施是否正确？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:31:48.993

您应该担心的是创建，`DbContext`因为这很昂贵。我通常`DbContext`每个请求都使用一个，而不是到处创建多个`DbContext`实例。

我将它存储在`HttpContext`对象中并在请求结束时将其处理掉。

你可以在[这里找到更多信息](http://www.hibernatingrhinos.com/products/efprof/learn/alert/multiplesessionsinthesamerequest)

在下面找到我修改后的实现。（原件来自上面的链接并使用了 ObjectContext）。

我的上下文类

```
using System.Data.Entity;
using System.Data.Objects;
using System.Web;
using Fot.Admin.Models;

namespace Context
{
    public static class ContextManager
    {
        internal const string DB = "MY_DB_CONTEXT";

        /// <summary>
        /// Get an instance that lives for the life time of the request per user and automatically disposes.
        /// </summary>
        /// <returns>Model</returns>  
        public static T AsSingleton<T>() where T : DbContext, new()
        {
            HttpContext.Current.Items[DB] = (T)HttpContext.Current.Items[DB] ?? new T();
            return (T)HttpContext.Current.Items[DB];
        }

    }
} 
```

我的上下文模块

```
using System;
using System.Data.Entity;
using System.Data.Objects;
using System.Web;

namespace Context
{
    /// <summary>
    /// Entity Module used to control an Entities DB Context over the lifetime of a request per user.
    /// </summary>
    public class ContextModule : IHttpModule
    {
        private const string DB = ContextManager.DB;

        void context_EndRequest(object sender, EventArgs e)
        {
            Dispose();
        }

        #region IHttpModule Members

        public void Dispose()
        {
            if(HttpContext.Current != null)
            {
                if (HttpContext.Current.Items[DB] != null)
                {
                    var entitiesContext = (DbContext) HttpContext.Current.Items[DB];

                    entitiesContext.Dispose();
                    HttpContext.Current.Items.Remove(DB);

                }

            }
        }

        public void Init(HttpApplication context)
        {
            context.EndRequest += new EventHandler(context_EndRequest); 
        }

        #endregion

    }
} 
```

在我的 web.config 下，`<httpModules>`我在下面添加了这个。

```
<add name="ContextModule" type="Context.ContextModule" /> 
```

这可确保在每次请求后调用 end_Request，以便您可以正确处理上下文。

当您需要 DbContext 时，用法如下。

```
 var Context = ContextManager.AsSingleton<MyDBContext>(); 
```

# asp.net - 更新 gridview 行不保存数据

> ID：14450141
> 
> 赞同：1
> 
> 时间：2013-01-22T01:27:41.240
> 
> 标签：asp.net

我在更新 gridview 时遇到问题！一切似乎都在工作。但是当我点击完成编辑时，数据将无法保存！

但是当我单击编辑时，正确的字段提示我输入新值，但它不会保存！

这是我的asp

```
<asp:GridView ID="GridView1" runat="server" CssClass="report" 
    AutoGenerateColumns="False" onrowediting="GridView1_RowEditing" 
    DataKeyNames="TimeID" onrowupdating="GridView1_RowUpdating" 
    onrowcommand="GridView1_RowCommand" 
    onrowcancelingedit="GridView1_RowCancelingEdit">

    <Columns> 

        <asp:BoundField DataField="date" Visible="true" ReadOnly="true" HeaderText="Date" />
        <asp:BoundField DataField="Description" HeaderText="Stage Description" ReadOnly="True" />

       <asp:TemplateField HeaderText="Start Time">
            <ItemTemplate>
                <asp:Label ID="Label7" runat="server"  Text='<%# ConvertToShotTime(Eval("StartTime")) %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtStartTime" ValidationGroup="1" Width="90px"  class="TimeEntry" runat="server"  Text='<%# ConvertToShotTime(Eval("StartTime")) %>'></asp:TextBox>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator6" ControlToValidate="txtStartTime" runat="server" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
           </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="End Time">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server"  Text='<%# ConvertToShotTime(Eval("EndTime")) %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtEndTime" class="TimeEntry"  ValidationGroup="1" Width="90px" runat="server"  Text='<%# ConvertToShotTime(Eval("EndTime")) %>'></asp:TextBox>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator66" ControlToValidate="txtEndTime" runat="server" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:BoundField DataField="TimeInHours" HeaderText="Time Time (Hours)" ReadOnly="True" />

        <asp:CommandField ShowEditButton="true" ShowCancelButton="true" 
            ButtonType="Image" EditImageUrl="~/images/edit_record.jpg" 
            CancelImageUrl="~/images/edit_no.jpg" 
            UpdateImageUrl="~/images/update_record.jpg" />

        <asp:TemplateField ShowHeader="False">
            <ItemTemplate>
              <asp:ImageButton ID="lnbCopy" runat="server" AlternateText="Delete" 
                    CommandName="DeleteRecord"  CommandArgument='<%# Bind("TimeID") %>'  OnClientClick="return confirm('Are you sure you want to delete this row?');"  ImageUrl="~/images/delete_record.jpg" />
            </ItemTemplate>

           <EditItemTemplate>
                <asp:Label ID="lblTimeID" runat="server" Text='<%# Eval("TimeID") %>'></asp:Label>
            </EditItemTemplate>
        </asp:TemplateField>

    </Columns>

</asp:GridView> 
```

这是我在代码后面所做的

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e) {
    GridView1.EditIndex = e.NewEditIndex;
    loadTable();
}

protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e) {
    GridView1.EditIndex = -1;
    loadTable();
}

protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e) {

    GridViewRow row = GridView1.Rows[e.RowIndex] as GridViewRow;

    var StartTime = row.FindControl("txtStartTime") as TextBox;
    var EndTime = row.FindControl("txtEndTime") as TextBox;
    var id = row.FindControl("lblTimeID") as Label;

    SqlConnection conn = new SqlConnection(conStr.GetConnectionString("myServer1"));

    SqlCommand comm = new SqlCommand();

    comm.CommandText = "UPDATE CDSTimeSheet SET StartTime = @StartTime, EndTime = @EndTime ,timeElapsed = datediff(minute,@startTime , @EndTime), timeInSeconds = datediff(second,@startTime , @EndTime) WHERE TimeID = @id";
    comm.Connection = conn;

    comm.Parameters.AddWithValue("@id", id.Text);
    comm.Parameters.AddWithValue("@StartTime", StartTime.Text);
    comm.Parameters.AddWithValue("@EndTime", EndTime.Text);

    conn.Open();
    comm.ExecuteNonQuery();
    conn.Close();
    GridView1.EditIndex = -1;
    loadTable();
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:59:36.693

这听起来很像您`DataBind`在更新基础数据后没有调用您的网格。执行更新后（可能在`loadTable`我看到的上面引用的方法中），调用

```
GridView1.DataBind(); 
```

那应该刷新网格中的数据。

* * *

在您发表评论后，我看到您没有使用参数中的`NewValues`集合`GridViewUpdateEventArgs`来获取实际传入的更新字段值。尝试这个：

```
String StartTime = e.NewValues["StartTime"].ToString();
String EndTime = e.NewValues["EndTime"].ToString();
String id = e.Keys[0].ToString(); 
```

请注意，这些变量现在是字符串，而不是`TextBox`s，因此您在将它们添加为参数时不需要在它们上添加“.Text”。

# javascript - 使用 fontawesome 图标并删除 icon-spinner icon-spin

> ID：14450145
> 
> 赞同：0
> 
> 时间：2013-01-22T01:28:15.537
> 
> 标签：javascript, jquery, twitter-bootstrap, fonts

`icon-spin`我对 fontawesome 有疑问，一旦有类，我就无法删除附加的图标

```
<h1>This is the title</h1>

<script>
  function updateByAjax() {
    $h1 = $('h1').append('<i class="icon-spinner icon-spin"></i>')
    $.get('/url', function(resp) { 
      $h1.html(resp.title).find('.icon-spinner').remove()
    })
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:28:15.537

解决这个问题的方法是将微调器包裹在另一个标签中

```
<h1>This is the title</h1>

<script>
  function updateByAjax() {
    $h1 = $('h1').append('<span class='ajax-wait'><i class="icon-spinner icon-spin"></i></span>')
    $.get('/url', function() { 
      $h1.html(resp.html).find('.ajax-wait').text('').remove() 
    })
  }
</script> 
```

# html - 样式化主页网格

> ID：14450147
> 
> 赞同：0
> 
> 时间：2013-01-22T01:28:27.253
> 
> 标签：html, css, wordpress, styling

我在尝试为我正在处理的主页设置样式时遇到了问题。这是我正在做的非常简单的版本。[http://cdpn.io/kgLzD](http://cdpn.io/kgLzD)
我正在使用 wordpress 并在一个 div 中有 the_loop，它输出 8 个带有“post”类的帖子。我遇到的问题是每个帖子的样式如下图所示，因为它们是 div 并且无法控制选择要设置哪个“帖子”的样式？如果我使用的是列表，那么我可以选择要设置样式的项目。对于实现以下样式的任何帮助/提示/建议将不胜感激。

![网格样式](../Images/637cd08ae4f768f22eb6b891bfc560a9.png)

![在此处输入图像描述](../Images/af1f339a13c50d0979f6ba9baa394729.png) 这就是我目前所在的位置，正如您所看到的，我基本上需要的只是边界。您将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:55:32.747

您可以使用 css nth-of-type() 选择器 - 因为您是向左浮动并且 div 的两个向上，所以使用 nth-of-type(2n) 会选择右侧列中的所有 div：（请参见此处的 codepen ：[http](http://cdpn.io/Iacvk) ://cdpn.io/Iacvk ）

```
section.home-grid {
   width:440px; 
}
.post {
  border-top:1px solid #777;
  width: 200px;
  float:left;
  padding: 10px;  
}
.post p {
  padding:.5em 1em;
  width:90%;
  margin:0 auto;
  text-align:justify;
}
.post:nth-of-type(2n) p {
  border-left:2px dotted #777;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:43:53.653

不完全确定您在寻找什么，但也许在帖子上使用 nth-child css 选择器会有所帮助。

[http://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

# php - XMLHttpRequest across Domains to read COOKIE

> ID：14450150
> 
> 赞同：1
> 
> 时间：2013-01-22T01:28:31.960
> 
> 标签：php, javascript, cross-domain

Dear all i have a strange problem .

My target is : Site **abc.com** will send ajax '**POST/GET**' request to site **xyz.com**

**xyz.com** will create a **COOKIE** via PHP and print it out :

```
print $_COOKIE["rand_user_id"]; 
```

so the site **abc.com** will read the printed TEXT via "**xhr.responseText**".

PS: even if Page has been refreshed , the xhr.responseText will print same TEXT.

**Problem :** All the provisos description is works just fine

**But JavaScript want able to print out the Content TEXT !**

and the **xhr.status** return 0 !!!!

when i sniff the response via HTTPAnalyze i can see the TEXT in the content of the responseText. and the response code is 200 in the HTTPAnalyze program.

Please advice

* * *

My code is :

## **Client side**

```
 <script>
window.onload = function(){
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "http://www.adriper.com/setcookie.php", true);
    xhr.onreadystatechange = function(){
        if ( xhr.readyState == 4 ) {
            if ( xhr.status == 200 ) {
                document.body.innerHTML = "Random code  is: " + xhr.responseText;
            } else {
                document.body.innerHTML = "ERROR Number :"+xhr.status;
            }
        }
    };

    xhr.withCredentials = true; 
    xhr.send(null);
};
</script> 
```

## **Server side is :**

**PHP**

```
<?
if(!isset($_COOKIE["rand_user_id"]))
{
   $val = md5(rand(111,999));   
   setcookie("rand_user_id", $val , time()+60*60*24*30, '/');
   print $_COOKIE["rand_user_id"];
}else{
    print $_COOKIE["rand_user_id"];
    }
?> 
```

**.htaccess**

```
Header add Access-Control-Allow-Origin "*"
Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type ,accept"
Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"
Header add Access-Control-Allow-Credentials: true 
```

**HTTP Response**

```
GET /setcookie.php HTTP/1.1
Host: www.adriper.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:18.0) Gecko/20100101 Firefox/18.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Referer: http://localhost/mouse/Untitled-1.html?w
Origin: http://localhost
Cookie: rand_user_id=m3zwy_pomRVe1FovfsOXBLJvUyw_lnA6MWMjot1lSGtXB3MwGXJlR0d2afbxwBWe
Connection: keep-alive 
```

**Options**

```
HTTP/1.1 200 OK
Server: nginx
Date: Tue, 22 Jan 2013 00:55:30 GMT
Content-Type: text/html
Connection: keep-alive
X-Powered-By: PHP/5.2.17
Access-Control-Allow-Origin: *
Access-Control-Allow-Headers: origin, x-requested-with, content-type ,accept
Access-Control-Allow-Methods: PUT, GET, POST, DELETE, OPTIONS
Access-Control-Allow-Credentials: true
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 52 
```

# java - Java web services to allow large file streaming

> ID：14450151
> 
> 赞同：1
> 
> 时间：2013-01-22T01:28:33.960
> 
> 标签：java, web-services, servlets, web-applications

I am building a java web services server that needs to scale and to be highly available. User can upload large file (~20M) through the services. SOAP is preferred.

My question are: is there any such a web service framework which support large file streaming? Any building blocks that I should consider? Any good practices?

Any thoughts would be appreciated. Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:14:56.647

如果你需要高性能，webservices 不是很好。

您可以尝试（流式 SOAP 附件）：

*   [http://docs.oracle.com/cd/E12840_01/wls/docs103/webserv_adv/mtom.html](http://docs.oracle.com/cd/E12840_01/wls/docs103/webserv_adv/mtom.html)
*   例如 [http://www.mkyong.com/webservices/jax-ws/jax-ws-attachment-with-mtom/](http://www.mkyong.com/webservices/jax-ws/jax-ws-attachment-with-mtom/)

File : ImageServer.java //服务端点接口

```
package com.mkyong.ws;     
import java.awt.Image; 
import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import javax.jws.soap.SOAPBinding.Style;

@WebService
@SOAPBinding(style = Style.RPC)
public interface ImageServer{

    //download a image from server
    @WebMethod Image downloadImage(String name);

    //update image to server
    @WebMethod String uploadImage(Image data);

}

//File : ImageServerImpl.java
package com.mkyong.ws;

import java.awt.Image;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.jws.WebService;
import javax.xml.ws.WebServiceException;
import javax.xml.ws.soap.MTOM;

//Service Implementation Bean
@MTOM
@WebService(endpointInterface = "com.mkyong.ws.ImageServer")
public class ImageServerImpl implements ImageServer{

    @Override
    public Image downloadImage(String name) {

        try {

            File image = new File("c:\\images\\" + name);
            return ImageIO.read(image);

        } catch (IOException e) {

            e.printStackTrace();
            return null; 

        }
    }

    @Override
    public String uploadImage(Image data) {

        if(data!=null){
            //store somewhere
            return "Upload Successful";
        }

        throw new WebServiceException("Upload Failed!");

    }

} 
```

# ios - Get location using Cell-tower signal

> ID：14450152
> 
> 赞同：0
> 
> 时间：2013-01-22T01:28:34.463
> 
> 标签：ios, geolocation

I am making an iOS application and need to get the location of a user. I just need to get the state/province of the user and so a cell-tower signal will serve the purpose. Is there an iOS API that will allow me to do this ?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:40:22.833

正如 Jake 建议的那样，Core location 将是您最好的选择，请尝试使用一些示例代码 [How to find your current location with CoreLocation](https://stackoverflow.com/questions/6516967/how-to-find-your-current-location-with-corelocation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:40:35.570

查看[位置感知编程指南中的“](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html)[获取用户位置](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)”

# c++ - 创建和读取数据的速度

> ID：14450158
> 
> 赞同：0
> 
> 时间：2013-01-22T01:28:59.690
> 
> 标签：c++, c, performance, memory

我对在 C/C++ 中创建和读取数据的速度有一些小问题：

=> 如果我需要在任何类型的数组中填充数据（考虑一个 2048*2048 数组），使用循环并填充每个单元格比从文件加载更快吗？（不包括打开和关闭文件所花费的时间）。

=> 如果在单独的文件中有数据并读取它，从原始文件读取它需要相同的时间？（假设我需要填充一个数组，最好在主程序中填充这个数组，或者我可以从外部文件中无损读取？（不包括打开和关闭文件的时间））

=> 如果我需要复制大量数据，Memcpy 仍然很快吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T01:31:25.023

文件操作将比内存操作慢很多很多倍。

memcpy 取决于编译器，但是是的，一般来说，它会更快地完成它，或者与你一样，而无需求助于汇编。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:43:10.180

```
If I need to fill data in a array of any type (think about a 2048*2048 array), using a loop and fill each cell is faster then loading it from a file? (excluding time spent to open and close the file). 
```

当您不从文件中读取数据时，您要在哪里填写数据？但总的来说，从文件读取非常慢。当在主内存上读取几乎是原子的时，对文件的相同操作慢于 1000 倍或更多。在实践中，如果没有必要，总是要防止从文件中读取。

> 如果我需要复制大量数据，Memcpy 仍然很快吗？

是的。通常它更快，取决于编译器和您的硬件。因为`memcpy`使用一些特殊的 CPU 指令，例如`SIMD`（单指令 - 乘数据）来提高性能，也许你的 CPU 没有它。编译器还是有这个功能可以比较的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T02:00:01.627

内存中的操作比 FILE IO 操作快很多命令，但是您也许可以利用中途的房子。

[内存映射文件](http://en.wikipedia.org/wiki/Memory-mapped_file)使用操作系统技术将文件的内容直接映射到内存，而无需读取和复制每个字节。然后，您可以正常读取/写入内存。它是许多架构中虚拟内存的基础，因此是高度优化和高性能的。

# mysql - 如果..其他值为空，则将某些值设置为 NULL

> ID：14450165
> 
> 赞同：0
> 
> 时间：2013-01-22T01:29:35.060
> 
> 标签：mysql

我有这个中等规模的查询，但在获取某些字段时遇到了一些问题。

```
SELECT DISTINCT 
  enc.id, enc.cus_id, enc.createdon, enc.status, 
  enc.segment, enc.currentstep, enc.groupid, enc.fdprotocol, 
  enc_task.linkfile, cus.fname, cus.lname, login.first_name, 
  login.last_name, login.username, login.user_code, fp.protocol 
FROM
  mob_encounters_task enc_task, mob_encounters enc, 
  mob_customer cus, mob_login login, mob_protocol_type fp 
WHERE 
  enc.id=enc_task.encounterid 
AND 
  cus.id=enc_task.cus_id 
AND 
  login.id=enc.createdby 
GROUP BY enc.id 
```

**fp.protocol**是一个字符串，在**fp**表上最多有 5 或 6 个“协议”。

我想做的是如果**enc.fdprotocol**为空，则**fp.protocol**应该为空，否则获取与**fp.id** = **enc.fdprotocol**关联的**fp.protocol**

 ****如果这听起来令人困惑，请告诉我，我已经坚持了一段时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:34:35.440

我发现使用实际的 JOIN 语法使查询更具可读性和可维护性。在这种情况下，您需要使用 a`LEFT JOIN`并且您必须为此更改语法：

```
SELECT enc.id, enc.cus_id, enc.createdon, enc.status, enc.segment, 
enc.currentstep, enc.groupid, enc.fdprotocol, enc_task.linkfile, cus.fname, 
cus.lname, login.first_name, login.last_name, login.username, login.user_code, 
fp.protocol 
    FROM mob_encounters_task enc_task
    JOIN mob_encounters enc ON enc.id=enc_task.encounterid
    JOIN mob_customer cus ON cus.id=enc_task.cus_id
    JOIN mob_login login ON login.id=enc.createdby 
    LEFT JOIN mob_protocol_type fp ON fp.id = enc.fdprotocol 
```

我也不相信你需要`DISTINCT`****

# c++ - query on mark pieter article on pe_coff spec

> ID：14450166
> 
> 赞同：-2
> 
> 时间：2013-01-22T01:29:40.610
> 
> 标签：c++, c, assembly

In first 2 pages, layout diagram of PE executable and COFF format is given.

So, my question is,

I assume windows object files and executables are in COFF format, SO WHAT IS PE EXECUTABLE FORMAT?

Sham

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:14:31.943

[Microsoft PE 和 COFF 规范](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463119.aspx)：

> 本规范描述了 Windows 系列操作系统下的可执行（映像）文件和目标文件的结构。这些文件分别称为可移植可执行文件 (PE) 和通用对象文件格式 (COFF) 文件。

# java - 使用 Py4j 将 Python 对象发送到 Java

> ID：14450173
> 
> 赞同：6
> 
> 时间：2013-01-22T01:30:19.203
> 
> 标签：java, python, py4j

我正在尝试通过将 Python 对象发送到 Java来扩展[本教程中的示例。](http://py4j.sourceforge.net/getting_started.html)虽然在 Python 和 Java 之间交换字符串对象的示例代码工作正常，但当我尝试用我自己的 Python 对象（事件）替换它时，会显示有关 object_id 的错误。

蟒蛇代码：

```
class Event(object):
   #some content here

stack = gateway.entry_point.getStack()
event = Event()

stack.push(event) 
```

错误：

```
Traceback (most recent call last):
  File "/home/******/src/py4jSample.py", line 19, in <module>
   stack.push(event)
  File "/usr/local/lib/python2.7/dist-packages/py4j-0.7-py2.7.egg/py4j/java_gateway.py", line 423, in __call__
    [get_command_part(arg, self.pool) for arg in new_args])
  File "/usr/local/lib/python2.7/dist-packages/py4j-0.7-py2.7.egg/py4j/protocol.py", line 241, in get_command_part
    command_part = REFERENCE_TYPE + parameter._get_object_id()
AttributeError: 'Event' object has no attribute '_get_object_id' 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T10:00:21.580

问题是您不能将纯 Python 对象发送到 Java 端（在这种情况下，调用 push 实际上会调用 Java 方法“Stack.push”）。您只能发送 (1) 可以自动转换为 Java 对象的对象（原语，例如 int、字节数组、字符串），(2) 从 Java 接收的对象，例如“stack”，或 (3)[实现 Java 的 Python 对象界面](http://py4j.sourceforge.net/advanced_topics.html#implementing-java-interfaces-from-python-callback)：

```
class Event(object):
    def myMethod(param1, param2):
        return "foo"

    class Java:
        implements = ['yourpackage.IEvent'] 
```

如果要发送实现 Java 接口的 Python 对象，则需要接受来自 Python 解释器的传入连接（如果调用 Python 方法，JVM 将回调 Python 解释器）：

```
gateway = JavaGateway(start_callback_server=True)
stack = gateway.entry_point.getStack()
event = Event()
stack.push(event) 
```

# ajax - codeigniter ajax internet explorer

> ID：14450176
> 
> 赞同：0
> 
> 时间：2013-01-22T01:30:42.270
> 
> 标签：ajax, internet-explorer, codeigniter

the following code works fine in FF, opera and chrome but fails in IE

```
function get_modelo(modelo) {
        var selState = modelo;
        alert (selState);
        console.log(selState);
        $.ajax({    
            url: "site/ajax_call", //The url where the server req would we made.
            async: false, 
            type: "POST", //The type which you want to use: GET/POST
            data: "state="+selState, //The variables which are going.
            dataType: "HTML", //Return data type (what we expect).

            //This is the function which will be called if ajax call is successful.
            success: function(data) {
                //data is the html of the page where the request is made.
                $('#city').html(data);
            }
        })
    } 
```

Can't understand the problem.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:33:41.023

IE 中的 console.log 不起作用或导致问题。

请参阅此处： [IE8 中的 console.log 发生了什么？](https://stackoverflow.com/questions/690251/what-happened-to-console-log-in-ie8)

在这里： [在 IE 中测试 console.log 语句](https://stackoverflow.com/questions/7585351/testing-for-console-log-statements-in-ie)

在这里： http: [//paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/](http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/)

或者只是谷歌搜索IE控制台日志

您代码中的其他所有内容看起来都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:17:11.200

尝试这个。下面将在 IE8 中工作：P

```
$.ajax({    
        url: "site/ajax_call", //The url where the server req would we made.
        async: false, 
        type: "POST", //The type which you want to use: GET/POST
        data: { state: selState }, //The variables which are going.
        dataType: "html", //Return data type (what we expect).

        //This is the function which will be called if ajax call is successful.
        success: function(data) {
            var newDiv = $('<div></div>');
            newDiv.html(data);
            newDiv.appendTo("#city");
        }
    }); 
```

# asp.net - 如何逃避 Uri 路径和查询？

> ID：14450178
> 
> 赞同：0
> 
> 时间：2013-01-22T01:30:51.857
> 
> 标签：asp.net, asp.net-mvc, escaping

我正在做一些重定向和返回网址的事情，我注意到一些时髦的东西。我在 Visual Studio 的即时窗口中运行了这行代码。

```
Uri.EscapeUriString("/z?x=y&w="+Uri.EscapeUriString("/a?b=c&d=e"))
"/z?x=y&w=/a?b=c&d=e" 
```

好的，这看起来像是错误的逃脱。我的应用程序到底是如何知道 d 是查询字符串的一部分还是我想稍后重定向到的 url 的字符串的一部分。所以我尝试了 UnescapeDataString 并用谷歌搜索以防万一。

```
Uri.UnescapeDataString(Uri.EscapeDataString("a b+c"))
"a b+c" 
```

事实证明我不应该使用它，因为它不会像它应该的那样将“+”解码到空间中

```
Uri.UnescapeDataString("ab+c")
"ab+c" 
```

如果 UnescapeDataString 和 EscapeUriString 都不正确，那么我想怎么逃避 uri 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:41:37.367

您可能想`HttpUtility.UrlEncode`尝试`HttpUtility.UrlDecode`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:54:34.223

是的，[HttpUtility.UrlEncode](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx)是要走的路。

这是一个例子。代码：

```
using System;
using System.Web;

namespace SO14450178
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(Uri.EscapeUriString("/z?x=y&w="+Uri.EscapeUriString("/a?b=c&d=e")));
            string encoded = HttpUtility.UrlEncode("/z?x=y&w=" + HttpUtility.UrlEncode("/a?b=c&d=e"));
            Console.WriteLine(encoded);
            Console.WriteLine(HttpUtility.UrlDecode(encoded));
        }
    }
} 
```

输出：

```
/z?x=y&w=/a?b=c&d=e
%2fz%3fx%3dy%26w%3d%252fa%253fb%253dc%2526d%253de
/z?x=y&w=%2fa%3fb%3dc%26d%3de 
```

请注意，正如您所期望的那样，单个 Decode 仅解码两个 Encode 中的一个。

# nsstring - Access UIButton using NSString

> ID：14450179
> 
> 赞同：0
> 
> 时间：2013-01-22T01:30:58.283
> 
> 标签：nsstring, uibutton

I have a view with 10 buttons each named Q1, Q2... Q10.

In another method I want to change the background image on the buttons however I am creating the button names from a string as such:

```
NSString *Q = [NSString stringWithFormat:@"Q%d", i]; 
```

i is a integer which changes, is there any way I can access the UIButtons using the string Q so that I can then change the background image.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:01:47.283

我设法通过创建一个标签数组来找到[这个问题的解决方案，如下所示：](https://stackoverflow.com/questions/9597026/dynamically-name-labels-in-objective-c)

```
NSMutableArray *buttons = [NSMutableArray arrayWithObjects: Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, Q9, Q10, Q11, Q12, Q13, Q14, Q15, Q16, Q17, Q18, Q19, Q20, nil]; 
```

然后通过索引访问数组中的按钮：

```
[[buttons objectAtIndex:i] setBackgroundImage:image forState:UIControlStateNormal]; 
```

# ios - iOS Button Handler, segue based on button choice

> ID：14450183
> 
> 赞同：1
> 
> 时间：2013-01-22T01:31:16.007
> 
> 标签：ios, objective-c, uitableview, uibutton, uistoryboardsegue

The kind of design that I'm trying to accomplish in my app currently consists of a navigation controller that is the root controller for another View controller known as Test. Test consists of a UITableView in the top half and an UIImageView in the bottom half. THe navigation bar on the top (which is there as a result of the navigation controller) contains two buttons. The image at the link below ( I don't have the reputation points to post an image directly) should make it very clear.

[http://i.imgur.com/GM5eH.png?1](http://i.imgur.com/GM5eH.png?1)

I want my design to be in such a way that depending on which button is pressed the image in the imageview is changed while, though the the text in the table view remains the same, they will transition to completely different screens going forward. To give an example, regardless of which button is tapped my table view will consist of : Option 1, Option 2 and Option 3\. However, Option 1 for button A is different from Option B and so on.And, this is where the challenge is for me. I have been able to swap out the images based on the pressing of the button succefully. I did this by using an IBActionNavBarButonPressed and then swapping out the images based on the sender tag. Unfortunately, I don't know how to proceed from here. So for example I have my next couple of screens here. But, how do I set up the segues/transitions in such a way that only Option 1 of choice A goes to a certain screen and so on. From my understanding, I'm looking at a combination of prepareforSegue and the navBarbuttonPress IBAction but I'm still not sure how this would work.

Guys, I'm fairly certain as to what I'm trying to but since I'm new to objective C, I'm not completely sure of how to do it. Essentially, I want the logic to be something like, if(element.selected==0) && (IBActionProvider==1) { performSegueWithIdentifier:@"blah" sender.self]; My issue is whether to put this in the IBAction navBarButtonPressedMethod or to put it in the didSelectRowAtIndexPath method.

Thanks and sorry for the long question!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:56:00.383

首先，您为其他故事板视图命名。它包含左侧面板（故事板标识符:)。

您应该为所有按钮创建 segue 并为其提供标识符。

那么你应该`prepareforSegue`像这样使用

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ToContacts"])
    {    
        // Get reference to the destination view controller
        ContactVC *targetVC = [segue destinationViewController];
        // Pass any objects to the view controller here, like...
        targetVC.CompanyNme = selectedRowValue;
    }
    if ([[segue identifier] isEqualToString:@"ViewCompany"])
    {
        ContactVC *targetVC = [segue destinationViewController];
        targetVC.CompanyNme = selectedRowValue;
    }
}

@"ToContacts" means your storyboard identifier. 
```

# algorithm - Eigenvector Centrality Algorithm/Pseudocode

> ID：14450185
> 
> 赞同：2
> 
> 时间：2013-01-22T01:31:37.863
> 
> 标签：algorithm, social-networking, pseudocode, eigenvector

I was wondering if anybody could point me in the direction of some eigenvector centrality pseudocode, or an algorithm (for social network analysis). I've already bounced around Wikipedia and Googled for some information, but I can't find any description of a generalized algorithm or pseudocode.

Thanks!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T02:06:54.040

图 G 中顶点 v 的特征向量中心性似乎是 G 的邻接矩阵 A 的主要特征向量的第 v 个条目，按该特征向量的条目之和缩放。

[幂迭代](http://en.wikipedia.org/wiki/Power_iteration)，从任何严格的正向量开始，将趋向于 A 的主要特征向量。

请注意，幂迭代需要做的唯一操作是重复地将 A 乘以一个向量。这很容易做到；Av 的第 i 个条目只是与顶点 i 连接的顶点 j 对应的 v 的条目的总和。

幂次迭代的收敛速度与最大特征值与绝对值第二大的特征值之比呈线性关系。也就是说，如果最大特征值是 lambda [max]并且第二大绝对值特征值是 lambda [2]，则特征值估计中的误差会减少 lambda [max] / |lambda [2] | 的因子。

[实践中出现的图（例如社交网络图）通常在 lambda max]和 lambda [2]之间有很大的差距，因此幂迭代通常会以可接受的速度快速收敛；在几十次迭代中，几乎不管起点如何，您都会得到一个在 10 ^(-9)范围内的特征值估计。

所以，考虑到这个理论，这里有一些伪代码：

```
Let v = [1, 1, 1, 1, ... 1].
Repeat 100 times {
  Let w = [0, 0, 0, 0, ... 0].
  For each person i in the social network
    For each friend j of i
      Set w[j] = w[j] + v[i].
  Set v = w.
}
Let S be the sum of the entries of v.
Divide each entry of v by S. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-16T17:00:01.067

我只知道一点点。这是我在课堂上学到的伪代码。

```
input: a diagonalizable matrix A
   output: a scalar number h, which is the greatest(in absolute value) eigenvalue of A, and a nonzero vector v, the corresponding eigenvector of h, such that Av=hv
    begin
        initialization: initialize a vector b0, which may be an approximation to the dominant eigenvector or a random vector, and let k=0
         while k is smaller than the maximum iteration
            calculate bk+1 = A*bk/(|A*bk|)
            set k=k+1
end 
```

# android - Having trouble with Japanese character "〜" in Android

> ID：14450187
> 
> 赞同：5
> 
> 时间：2013-01-22T01:31:42.120
> 
> 标签：android

I don't know how to read Japanese - I don't know what this character means.

We are using encoding UTF-8 in our XML file and can see all other Japanese characters in our app except for "〜", which shows up as a box. "〜" shows up in Eclipse, tried replacing it with a tilde (~), but the tilde is smaller and looks slightly different (〜 vs ~) in our app.

On Google Translate, it interprets the character as a tilde [http://translate.google.com/#ja/en/%E3%80%9C](http://translate.google.com/#ja/en/%E3%80%9C)

In Android, we have used &#12316; and \u301C but they both show up as boxes.

An example of how the character is used "気分が悪いよ〜！"

* * *

My question: This is the only character that's missing for us (we have an American Android phones and changed the language to Japanese). How do we make this character show up?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:52:13.753

问题是 Unicode 中有两个相似的字符。首先，我们有`U+301C WAVE DASH`，[描述在这里](http://codepoints.net/U+301C)，然后我们有`U+FF5E FULLWIDTH TILDE`，[描述在这里](http://codepoints.net/U+FF5E)。其中第一个是[CJK_Symbols](http://codepoints.net/search?blk=CJK_Symbols)块，它似乎并不存在于所有 Unicode 字体中，例如在 Android 上。然而，第二个是在[Half_And_Full_Forms](http://codepoints.net/search?blk=Half_And_Full_Forms)块中，它似乎确实存在，并且使用标准日语 IME 在我的 Android 手机上进行快速测试确认`U+FF5E FULLWIDTH TILDE`使用了它。

现在，您提到您正在编码 UTF-8 - 您正在使用的转换表中可能有错误？我建议您只是默默地替换`U+301C WAVE DASH`with的所有实例`U+FF5E FULLWIDTH TILDE`。

**更新**：您提到了您的翻译器-也许他们使用的是 Mac，这似乎更喜欢`U+301C WAVE DASH`? 此外，这里有[一个 WordPress 插件](http://wordpress.org/extend/plugins/force-wave-dash/)，它建议了更多应该测试的字符，尽管我怀疑波浪号/波浪破折号将是唯一的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T01:47:43.290

这些框表示字体集没有该字符。那〜是年轻的日本人如何写chouon（元音加倍“ー”）。よ是哟。如果 o 的声音应该保持一个额外的节拍，那么正式地你会写 よー。

如果 chouon 在字体中，您可以为它们更正。

我现在在 Linux 上，当我切换到日语时，它给了我 〜 的波浪号。

**编辑** 突然意识到我可以使用字符图来找到那是什么。它是 U+301C 波浪形破折号。

这是来自我的 Nexus 7。よ~！

那是一个普通的波浪号。祝你好运。希望我能得到更多帮助。

# html - 样式“可见性：隐藏”对元素意味着什么？

> ID：14450188
> 
> 赞同：16
> 
> 时间：2013-01-22T01:31:45.023
> 
> 标签：html, css

样式`visibility:hidden`应用于`html`元素时会做什么？它与滚动条有什么关系，尤其是。关于IE7？

背景：Oracle Apex 生成此代码，我正在尝试确定它是否会导致 IE7 中间歇性隐藏的水平滚动条出现问题：

```
<style> html {visibility:hidden;} </style> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T02:25:55.547

## 规格

[根据规范](http://www.w3.org/TR/CSS21/visufx.html#visibility)，该`visibility`属性仍应影响布局。这对我来说意味着如果元素最终导致滚动行为，它不应该影响滚动。此外，任何设置为的子级`visible`都应该在`hidden`元素中可见。

* * *

## 观察到的行为

使用[这个小提琴](http://jsfiddle.net/fMrn3/)...

**火狐、IE 8-10、Opera**

使元素不渲染（应该如此），但仍然显示自身的一些渲染，`visibility: hidden`因为它显示. 正如 BoltClock 在他的评论中指出的那样，这实际上是可以预料的，因为（根据[规范](http://www.w3.org/TR/css3-background/#special-backgrounds)）将成为......`html``body``html``background-color``background``html`

> “画布的背景及其背景绘画区域延伸到覆盖整个画布。”

这些浏览器还允许设置回`visible`内部的元素显示为指定的规范`visibility`，因此`div`显示并且可以滚动。

**Chrome 和 Safari**

它不会在`background-color`上呈现`html`，但它确实允许`div`显示并显示滚动条。所以 Chrome 没有将`background`属性传播到画布，大概是因为它`visibility`被设置为`hidden`.

**IE7**

元素的不会渲染（如 Chrome），但内部元素也`background-color`没有*显示滚动*条。这似乎表明它没有按照规范正确保留在布局中。`html`*`div`*

 ** * *

因此，`visibility: hidden`财产可能是您问题的*一部分*。显然，背景点与您的滚动问题完全无关，但确实解决了您关于属性如何影响`html`元素的整体问题的要点。

在我看来，Chrome 和 Safari 渲染似乎是最直观的（我作为设计师所期望的），因为我不希望`background-color`渲染（因为元素是`hidden`），但同时，如果我设置一个孩子`visible`，那么我希望浏览器让我代表那个孩子滚动，即使`html`包装器设置为`visibility: hidden`. *然而*，webkit 浏览器或其他浏览器是否最接近规范是有争议的，因为正如 BoltClock 在他的评论中指出的那样，规范似乎没有指出元素`visibility`上是否`html`应该或不应该影响`background`属性的传播）。*

# python - 复制大文件时 os.stat 不更新

> ID：14450190
> 
> 赞同：2
> 
> 时间：2013-01-22T01:31:55.867
> 
> 标签：python, windows, file

我正在使用 stat 检查文件是否仍在传输，但它不起作用。如果我通过网络复制一个大文件（说数百 GB，它们可能需要几分钟）然后我运行脚本

```
from os import stat
from time import sleep
While True:
    stat("thefile.foo")
    sleep(2) 
```

我希望看到时间或大小发生变化，但它保持不变。还有什么我可以用来检查文件是否仍在传输的吗？不幸的是，这是在 Windows 服务器上。

![统计数据未更新的屏幕截图](../Images/a0c42251e9ccc51de1dccaa355a90dcc.png)

我尝试了这个脚本，以实际读取文件：

```
import sys
finished=False
oldgb=0
while not finished:
f=open(thefile,"rb")
samp=f.read(1)
gb=0
while samp!= b'':
    sys.stdout.flush()
    gb+=1000000000
    f.seek(gb)
    samp=f.read(1)
    print(gb/1000000000,samp)       
f.close()
print(oldgb, gb)
if gb>oldgb:
    oldgb=gb
else:
    finished=True 
```

并注意到，在复制文件时，尚未复制的字节被初始化为零，因此文件大小没有更新。我可能会使用校验和来检查文件是否已更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:22:48.537

好的，这是 hackalicious 解决方案：首先我安装了[sysinternals handle.exe](http://technet.microsoft.com/en-US/sysinternals/bb896655%28en-us%29.aspx)。我用它来查看文件是否有任何打开的句柄，因此：

```
import subprocess
from time import sleep
filename="file.foo"
finished = False
while not finished:
    handlesactive=subprocess.check_output("handle.exe")
    activehandles=str(handlesactive).count(filename)
    if activehandles == 0: finished = True
    print("still busy")
    sleep(2) 
```

编辑：这适用于在机器本身上传输的文件 - 例如从一个本地文件复制到另一个，但是如果文件正在由外部机器传输，则不会创建文件句柄。但是，在这种情况下，文件的 mtime*会*发生变化（幸运的是）。

因此，对于我的使用 - 在脚本中扫描文件夹并检查新文件 - 我最终使用了检查句柄（对于本地文件）和检查 mtime 和大小（对于外部文件）的组合。

# javascript - JS 函数内的函数内的函数，依此类推

> ID：14450191
> 
> 赞同：1
> 
> 时间：2013-01-22T01:31:56.800
> 
> 标签：javascript, function, nested, depth

好的，在过去的 3 个小时里，我一直在努力寻找解决方案……

我希望能够创建自己的库、函数内可访问的函数等。

这就是我想做的...

```
var outer=function()
{
    this.inner=function()
    {
        this.innermost=function()
        {
        alert("innermost");
        }
    }   
}
var outer=new outer;

function start()
{   
//I want to call it like this but fails!
outer.inner.innermost();    
} 
```

现在，当我尝试调用最里面时，这会失败。但如果我只是在一个函数中有一个函数，它就可以工作。例如：

```
var outer=function()
{
    this.inner=function()
    {
    alert("inner");
    }   
}
var outer=new outer; 

function start()
{   
// this works
outer.inner();  
} 
```

我发现的所有示例都只显示了函数中的函数。

我希望能够创建自己的函数库。通过一种简单的方式访问它们，例如：

```
MyLib.SubLib.SubLib2.function
MyLib.SubLib.SubLib2.property 
```

任何有关此事的帮助将不胜感激。我必须学习和使用原型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:34:47.723

首先，这是你如何做到的：

```
var outer = function() {
    this.inner = {
        innermost: function() {
            alert("innermost");
        }
    }
}
var outer = new outer;
outer.inner.innermost(); 
```

它没有按照您的方式工作的原因是因为您定义了一个函数`inner`-一个函数`outer.inner`也是如此。你可以做`var inner = new (outer.inner)();`然后打电话`inner.innermost();`，但这显然是丑陋的，而不是你想要的。

# maven - 如何将 Maven 模块添加到 IntelliJ？

> ID：14450195
> 
> 赞同：6
> 
> 时间：2013-01-22T01:32:10.820
> 
> 标签：maven, intellij-idea

即使我将 jar 依赖项添加到 pom.xml 中，IntelliJ 也无法在 Maven 模块中找到类。

我创建了一个 Maven 模块： test-intellij 。然后我创建了一个类`TestApp`并使其实现`ApplicationContextAware`如下：

```
public class TestApp implements  ApplicationContextAware{
} 
```

IntelliJ 告诉我：“找不到类 ApplicationContextAware”。所以我按下“alt + enter”，然后从弹出提示中选择“添加 maven 依赖项”。

经过这个操作，pom.xml中添加了下面的依赖成功：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency> 
```

但是当我尝试导入 ApplicationContextAware 类时，IntelliJ 仍然找不到要导入的 ApplicationContextAware 类。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T07:59:57.797

Try to **Reimport** the Maven project using the corresponding button in IntelliJ IDEA `Maven Projects` tool window. Wait until the dependency is downloaded and indexing is complete. `File` | `Invalidate Caches` may also help.

Also check that you are using the latest IDEA version (12.0.2 at the moment). You should be able to browse inside the downloaded dependency jar in the `Project View`, `External Libraries` node.

# css - Drupal 6 - “将此字段链接到节点”第一个列表项没有斜体

> ID：14450198
> 
> 赞同：0
> 
> 时间：2013-01-22T01:32:51.290
> 
> 标签：css, drupal, view, cck

使用 CCK 和视图，我有一个显示我最近的内容文章中的 3 个字段的块。第一个字段是“节点：标题”，我选中了“将此字段链接到其节点”的复选框。该块显示正确的内容，并为标题字段创建到节点的链接，但是顶部项目标题节点链接在浏览器中没有斜体。剩下的链接是。我想不通。任何建议。

如果您想查看，它发生在首页上的sunsetflipshow.com 的“最近新闻”块中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:24:39.703

问题不在于 CSS。您有一些`<i>`导致问题的未关闭标签。第一个`<li>`是错过了聚会，而其余的则完全被单个包裹`<i>`（并且还包含自己的嵌套包裹）。

这是最近新闻列表的渲染 dom 的屏幕截图。如果您仍然无法弄清楚，请尝试发布您的模板代码。

![截屏](../Images/b2c85ccebda0fc3ca839037f34bbc845.png)

# javascript - 在 Javascript 中非破坏性地反转数组

> ID：14450201
> 
> 赞同：14
> 
> 时间：2013-01-22T01:33:11.823
> 
> 标签：javascript

说我有一个功能：

```
function linesReverser(lines) {
  var localLines = lines.slice(); 
  localLines[1].reverse(); 
  return _.flatten(localLines);
} 
```

并像这样使用它：

```
var input = [["Hello"],["Hello", "World"]["Attention", "Please"]];
var output1 = linesReverser(input); //["Hello", "World", "Hello", "Attention", "Please"]
var output2 = linesReverser(input); //["Hello", "Hello", "World", "Attention", "Please"] 
```

注意对象引用是如何被共享的。我是 JS 新手，但我认为复制值会缓解这个问题（`line.slice()`），但它似乎不起作用。这是因为嵌套数组吗？

我怎样才能非破坏性/不变地执行反向操作？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2020-02-13T17:20:40.350

您可以使用 ES6 的扩展运算符复制数组，然后破坏性地反转副本：

```
const arr1 = [1,2,3];
const arr2 = [...arr1].reverse();
// arr1 => [1,2,3]
// arr2 => [3,2,1] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T01:36:23.273

您正在制作`lines`数组的浅拷贝。要复制嵌套数组，您需要对每个数组进行切片。

```
var localLines = lines.map(function(arr) {
    return arr.slice();
}); 
```

该`.map`方法将返回一个新的返回值数组，它是每个嵌套数组的一个切片。

* * *

FWIW，这是一个适用于现代浏览器的较短版本，尽管我可能会坚持使用第一个。

```
var localLines = lines.map(Array.apply.bind(Array, null)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-21T22:01:53.493

> 一种在 Javascript 中反转数组的非破坏性方法

**ES6**

```
var array = [1,2,3];
array.reduce((ary, ele) => {ary.unshift(ele); return ary}, []);
// => [3,2,1];
// array => [1,2,3]; 
```

**ES5**

```
array.reduce(function(obj, ele){
  obj.unshift(ele);
  return obj;
},[]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-29T09:50:36.920

您可以使用 JSON.parse 和 JSON.stringify 安全地（深度）复制嵌套数组，因此不共享引用。然后破坏性地反转副本：

```
let array1 = [[1, 3], [50, 1]];
let arrayCopy = JSON.parse(JSON.stringify(array1));
arrayCopy.reverse(); //[[50,1],[1,3]] 
```

结帐[克隆阵列](https://www.freecodecamp.org/news/how-to-clone-an-array-in-javascript-1d3183468f6a/)以获取更多信息

# java - 使用 Hibernate 将原始布尔值映射到字符 Y/N

> ID：14450202
> 
> 赞同：1
> 
> 时间：2013-01-22T01:33:17.017
> 
> 标签：java, hibernate, hibernate-mapping

> **可能重复：**
> [配置休眠（使用 JPA）以存储布尔类型的 Y/N 而不是 0/1](https://stackoverflow.com/questions/1154833/configure-hibernate-using-jpa-to-store-y-n-for-type-boolean-instead-of-0-1)

是否可以使用休眠将原始布尔值映射到 Y/N 字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:03:55.313

您可以创建自定义[UserType](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/usertype/UserType.html)

使用 UserType，您可以创建所需的任何类型的映射。

# javascript - filepicker.io 在 Meteor 应用程序中上传到 S3 时轰炸

> ID：14450207
> 
> 赞同：3
> 
> 时间：2013-01-22T01:33:51.590
> 
> 标签：javascript, amazon-s3, meteor, filepicker.io

我正在为我的应用程序开发一个文件上传器，我选择了 Filepicker.io。一切正常，除了一件事。当我将图像上传到 S3 时，我只能上传 Filepicker 返回的 URL（而不是图像本身）。

下面是成功的，但是

```
Template.new_aphorism.events({
'change #attachment': function(event){  

    var savedFile = JSON.stringify(event.fpfile);
    var parsedJSON = eval('('+savedFile+')');
    var url=parsedJSON.url;
    $('input[name=new_aphorism_image]').val(url);
    console.log("saved file is:" + savedFile);
    console.log(url);

    filepicker.store(url, {location: 'S3'}, function(fpfile){
           output.html('Uploaded: '+fpfile.filename+'');
    }, function(fperror){
        output.text(fperror.toString());
    }, function(progress){
        output.text("Uploading... ("+progress+"%)");
    });
 }
}); 
```

我回来作为我的信息：

```
File stored in S3 at VnAa2YsOS6wOECNMWpwn_temp.txt and available at https://www.filepicker.io/api/file/vVtWTOl7QqOJ7gPmXkHQ 
```

我已经尝试传递`this`并`event.fpfile`进入我的 filepicker.store 函数，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:34:40.813

解决了。

在同一个函数中：

```
var file = event.fpfile;
filepicker.store(file, {location: 'S3'}, function(fpfile){ 
```

# android - Intellij IDEA CE 12 Android XML 代码完成不起作用

> ID：14450209
> 
> 赞同：6
> 
> 时间：2013-01-22T01:34:17.443
> 
> 标签：android, xml, intellij-idea, code-completion

我刚开始学习用于 Android 开发的 IntelliJ IDEA CE 12，作为 Eclipse 的替代品。

IDEA 很快，我开始喜欢它。
但是，当我尝试编辑 Android XML 文件时，代码完成永远不会出现。在我的办公室里，我使用的是 MacBook Air（64 位），当我尝试 Mac 版本时，它运行良好。
在我的家里，我使用的是 Vista（32 位版本），我的笔记本电脑规格不太好。（这就是为什么我选择从 Eclipse 改为 IDEA 的原因……）

安装后我没有更改任何设置。是否有任何选项可以为 Android XML 编辑器启用代码完成？还是只是机器性能的问题？

我知道这是一个垃圾问题，但我真的需要帮助。
先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T07:50:49.233

请检查项目配置是否正确，并且您的模块在依赖项中有[Android facet](http://www.jetbrains.com/idea/webhelp/android-facet-page.html)和 Android SDK Platform。

IntelliJ IDEA 会在您第一次打开 JSDK、Android 平台和您的项目时对其进行索引。您需要等待索引过程完成（进度显示在底部的状态栏中）。

索引完成后，您应该获得所有可用的代码完成选项。如果由于某种原因它仍然不起作用，请尝试`File`| `Invalidate Caches`并重新启动 IDEA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-26T21:21:16.370

浮士德，

我遇到了同样的问题，这是我找到的解决方案：

1.  转到`File->Power Save Mode`并禁用它。
2.  去`Preferences->Editor->Code Completion`检查`Autopopup code completion`
3.  转到`File->Invalidate Caches`并重新启动。

禁用省电模式是为我解决的问题！

# windows-8 - 触摸时 FlipView 崩溃

> ID：14450210
> 
> 赞同：4
> 
> 时间：2013-01-22T01:34:18.960
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-xaml, windows-store-apps

在 Windows 应用商店应用中

XAML

```
<Page
    x:Class="FunctionTest.BlankPage1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FunctionTest"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Page.Resources>
        <Storyboard x:Name="FloatingFlipOver">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.GlobalOffsetZ)" Storyboard.TargetName="FloatingRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="-2000"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.8" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuarticEase/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationY)" Storyboard.TargetName="FloatingRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="180"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.8" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuarticEase/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="FloatingRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </Page.Resources>

    <Grid>        
        <Grid x:Name="FloatingRoot" Visibility="Collapsed" Width="500" Height="300">
            <Grid.Projection>
                <PlaneProjection  CenterOfRotationX="0.5" CenterOfRotationY="0.5"/>
            </Grid.Projection>
            <Rectangle x:Name="FloatingBackground" Fill="SkyBlue" />
            <FlipView>
                <Grid x:Name="FloatingContainer" Width="300" Height="300">

                </Grid>
            </FlipView>
        </Grid>
        <Button Content="Test" HorizontalAlignment="Left" Margin="46,36,0,0" VerticalAlignment="Top" Click="Test_Click"/>
    </Grid>
</Page> 
```

代码

```
private void Test_Click(object sender, RoutedEventArgs e)
{
    Button msiBtn = new Button();
    msiBtn.Content = "addBtn";
    msiBtn.Width = 100; msiBtn.Height = 50;
    msiBtn.Tapped += msiBtn_Tapped;
    FloatingContainer.Children.Add(msiBtn);
    FloatingRoot.Opacity = 0;
    FloatingRoot.Visibility = Visibility.Visible;
    FloatingFlipOver.Begin();
}

void msiBtn_Tapped(object sender, TappedRoutedEventArgs e)
{
    FloatingRoot.Visibility = Visibility.Collapsed;
    FloatingContainer.Children.Clear();
} 
```

这在与鼠标一起使用时有效，但是当我触摸添加到 FloatingContainer 中的按钮时它会崩溃，有时，即使我触摸 FloatingContainer（不是按钮），它也会崩溃。它是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:47:42.187

我想你的意思是崩溃，而不是崩溃，对吧？因为这就是我所看到的。

有一个与 ScrollViewers 和投影相关的已知错误。我不确定它是否被公开讨论过，但是我在 WinRT XAML 工具包（在 FlipAnimation 中）中听说的一种解决方法对我有用，因为 FlipView 有一个 ScrollViewer 作为其模板的一部分，因此似乎也适用于您的情况。基本上，您需要将 ScrollViewer 的 ZoomMode 更改为其他内容并返回，然后它可以正常工作而不会崩溃。为了修复代码片段中的代码，我引用了 WinRT XAML Toolkit 以使用 VisualTreeHelperExtensions 来帮助提取 ScrollViewer 并在动画完成后来回更改 ZoomMode，如下所示：

```
using WinRTXamlToolkit.Controls.Extensions;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Input;

namespace App96
{
    public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
        }

        private void Test_Click(object sender, RoutedEventArgs e)
        {
            Button msiBtn = new Button();
            msiBtn.Content = "addBtn";
            msiBtn.Width = 100; msiBtn.Height = 50;
            msiBtn.Tapped += msiBtn_Tapped;
            FloatingContainer.Children.Add(msiBtn);
            FloatingRoot.Opacity = 0;
            FloatingRoot.Visibility = Visibility.Visible;
            FloatingFlipOver.Begin();
            FloatingFlipOver.Completed -= FloatingFlipOver_Completed;
            FloatingFlipOver.Completed += FloatingFlipOver_Completed;
        }

        void FloatingFlipOver_Completed(object sender, object e)
        {
            foreach (var sv in FloatingRoot.GetDescendantsOfType<ScrollViewer>())
            {
                sv.ZoomMode = (ZoomMode)(((int)sv.ZoomMode + 1) % 2);
                sv.ZoomMode = (ZoomMode)(((int)sv.ZoomMode + 1) % 2);
            }
        }

        void msiBtn_Tapped(object sender, TappedRoutedEventArgs e)
        {
            FloatingRoot.Visibility = Visibility.Collapsed;
            FloatingContainer.Children.Clear();
        }
    }
} 
```

如果您不想要整个 Toolkit，可以使用相关的 VisualTreeHelperExtensions 位：

```
public static class VisualTreeHelperExtensions
{
    public static IEnumerable<T> GetDescendantsOfType<T>(this DependencyObject start) where T : DependencyObject
    {
        return start.GetDescendants().OfType<T>();
    }

    public static IEnumerable<DependencyObject> GetDescendants(this DependencyObject start)
    {
        var queue = new Queue<DependencyObject>();
        var count = VisualTreeHelper.GetChildrenCount(start);

        for (int i = 0; i < count; i++)
        {
            var child = VisualTreeHelper.GetChild(start, i);
            yield return child;
            queue.Enqueue(child);
        }

        while (queue.Count > 0)
        {
            var parent = queue.Dequeue();
            var count2 = VisualTreeHelper.GetChildrenCount(parent);

            for (int i = 0; i < count2; i++)
            {
                var child = VisualTreeHelper.GetChild(parent, i);
                yield return child;
                queue.Enqueue(child);
            }
        }
    }
} 
```

# c# - 使用 .ToArray() 将字符串列表转换为数组

> ID：14450213
> 
> 赞同：1
> 
> 时间：2013-01-22T01:34:35.127
> 
> 标签：c#, toarray, iqueryable.toarray

使用该`.ToArray()`函数时，是否有必要隐式定义数组的大小以保存要转换的列表中的字符？

```
String [] array = List.ToArray(); 
```

我尝试这样做是因为我需要使用`.GetValue()`数组的功能，但是，数组保持大小为 1 并且不保存列表中的材料。我是否试图`.ToArray()`错误地使用？

```
colAndDelimiter = new List<string>();
colAndDelimiter.Add(text);

String [] cd = colAndDelimiter.ToArray(); 
```

这是我拥有的所有影响数组的代码。当我`Console.WriteLine()`列出清单时，它给了我整个文本。我可能对列表的工作方式感到困惑。是否将所有内容都存储为单个项目，这就是数组只显示一个位置的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T01:48:44.187

您无需将其转换为数组即可获取特定字符。

只需使用`text[index]`即可获得所需的字符。

如果你真的需要它作为一个数组，使用[`String.ToCharArray()`](http://msdn.microsoft.com/en-us/library/ezftk57x.aspx)- 你想要一个数组而`char`不是`string`.

编辑：

> 是否将所有内容都存储为单个项目，这就是数组只显示一个位置的原因？

是的，是的。您正在制作一个`string`s 列表，其中包含一个`string`： 的全部内容`text`- 您似乎想要的是逐个字母地拆分它，这就是上述方法将实现的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T01:38:13.530

它应该可以正常工作，但请尝试`var`操作员确定。

```
var array = List.ToArray(); 
```

是否有理由使用而不是本身 EG`Array.GetValue`的内置功能：`List<T>`

```
 string value = List.ElementAt(1);
 var values = List.GetRange(0, 5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T01:50:33.930

你在做什么很好..但是可以说你不确定的大小 `string[] cd`然后你可以做类似下面的事情

```
var colAndDelimiter = new List<string>();
colAndDelimiter.Add(text);
String[] cd = { }; 
cd =  colAndDelimiter.ToArray(); 
```

找到数据在 cd string value = cd[0] 中的位置；

更新：如果您想根据存储在一行中的值来执行此操作，那么您可以执行此操作而无需将`cd`变量声明为 `string[] cd;`

```
var colAndDelimiter = new List<string>();
colAndDelimiter.Add("Hello, World, Week, Tuesday");
var cd = colAndDelimiter[0].Split(','); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T01:38:57.093

只要您的`List`对象是其中包含项目的一些 IEnumerable（或类似），这确实应该将您的列表转换为数组。

请注意，创建此数组后，将元素添加到 List 不会同时将其添加到 Array

# javascript - NodeJS 作为学习 JavaScript 的途径

> ID：14450224
> 
> 赞同：-1
> 
> 时间：2013-01-22T01:36:40.600
> 
> 标签：javascript, python, node.js

我是一名主要使用 Python 工作的后端程序员。我可能永远都不想成为一名全职的前端开发人员，但为了提高我的技能，我希望至少能勉强精通 JavaScript。它似乎是一种如今戴着很多帽子的语言，如果不出意外，当我与前端人员一起工作时，我想对“他们的世界”有更多的了解。

我们在我的公司使用 NodeJS 进行一些服务器端工作，我对此很好奇。我找到了一些很好的教程，看起来很有趣。似乎这可能是让自己熟悉 JavaScript 的好方法，因为它是从我理解的一个角度来处理的——服务器端编程。

但我也有点担心，如果我同时学习两者，我将无法跟踪什么是“Stock JavaScript”与 NodeJS 特有的功能。

你们有什么感想？通过学习 NodeJS 来引导自己熟悉 JavaScript 是个好主意吗？或者，如果我在对 JavaScript 基础知识没有扎实了解的情况下跳入 Node，我会不会感到困惑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:40:15.947

在 node 中学习 Javascript 更容易，因为您不需要处理 HTML、DOM 等，并且可以将其视为“只是另一种语言”——这就是我所做的。除非您使用 CommonJS 模块，否则 Node 不会向 JS “添加”太多东西，但这更像是一个库和约定，而不是语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:39:12.617

如果有的话，潜在的问题将是相反的：NodeJS 更接近“真正的”JavaScript（如 ECMAScript 5 中），而不是您在客户端进行合理编程，必须避免和重新实现许多本机 JavaScript 功能与图书馆。

# matlab - Matlab中的图像变形

> ID：14450225
> 
> 赞同：3
> 
> 时间：2013-01-22T01:36:46.860
> 
> 标签：matlab, image-processing, edge-detection

我想在 MATLAB 中使用数学形态学函数来找到 can.png 图像的边界。输入图像为：

![在此处输入图像描述](../Images/9c1954dbbe41c89acb8d425e87ec0bd4.png)

我想得到一个边界，例如：

![在此处输入图像描述](../Images/29515bf4d75c7f6e8f7d83e778f71ffd.png)

我尝试使用 strel、imerode、imdilate 使用不同的组合和参数，但结果不够好（与预期相去甚远）

我的试用代码之一是：

```
a = imread ('can.png');
b = im2bw(a);

SE = strel('rectangle', [10 50 ]) ;
i2 = imdilate(b,SE);

figure(1); imshow(i2);

p = ones(4);
c = b - imerode(b,p);

figure(2); imshow(c); 
```

输出是：

![在此处输入图像描述](../Images/7c9d03f1fb69775e41ca123aaebb4411.png)

任何人都可以帮助我，如何创建预期的图像（罐头的黑色背景和细边框？非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T02:07:02.827

对其形态梯度进行二值化，然后使用基本 SE 进行膨胀，填充孔并最终获得其边界（对于当前图像来说很简单）。这不需要任何神奇的任意阈值。

![在此处输入图像描述](../Images/db3ab97efc1ef052621a9b4b1fc3a383.png) ![在此处输入图像描述](../Images/4b278905dbad09d542b5bc32c7c374a9.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T02:06:25.377

```
im = imread('can.png');

% turn image to BW
imb = (im < 220);

% fill the holes in the image
imf = imfill(imb, 'holes');

% find the edge
ed = edge(imf); 
```

结果图像：

![在此处输入图像描述](../Images/4fd8f589d2a891d3fbe34cd95dbfbcc5.png)

# ruby-on-rails - Rails 失败 rspec

> ID：14450226
> 
> 赞同：0
> 
> 时间：2013-01-22T01:37:02.677
> 
> 标签：ruby-on-rails

我正在尝试检查页面的标题，但它失败了：

```
rspec ./spec/controllers/pages_controller_spec.rb:13 # PagesController GET 'home' should have the right title 
```

这是 pages_controller_spec.erb 的样子：

```
render_views

describe "GET 'home'" do
    it "returns http success" do
      get 'home'
      response.should be_success
    end

    it "should have the right title" do
      get 'home'
      response.should have_selector("title",:content => "Home")
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:03:00.017

据此，我认为您`:text`不需要`:content`：

[http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders#all-instance_method](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders#all-instance_method)

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:18:55.103

根据 house9 所说的，您应该在其他地方测试视图的标题，而不是在控制器规范中。例如，您可以在您的规范目录中创建一个“请求”目录并在那里测试页面功能。有关请求规格的更多信息：

[http://railscasts.com/episodes/257-request-specs-and-capybara?view=asciicast](http://railscasts.com/episodes/257-request-specs-and-capybara?view=asciicast)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:15:47.460

rspec 控制器测试存根视图，以便您可以单独测试控制器

*   [https://www.relishapp.com/rspec/rspec-rails/v/2-12-2/docs/controller-specs/views-are-stubbed-by-default](https://www.relishapp.com/rspec/rspec-rails/v/2-12-2/docs/controller-specs/views-are-stubbed-by-default)

如果您检查响应对象，它可能包含一个空白字符串

你应该测试的想法

*   如果呈现了正确的模板
*   如果控制器正确重定向
*   如果控制器调用了正确的模型等...

话虽如此，如果您希望测试呈现视图，`render_views`请在描述块中使用

*   [https://www.relishapp.com/rspec/rspec-rails/v/2-2/docs/controller-specs/render-views](https://www.relishapp.com/rspec/rspec-rails/v/2-2/docs/controller-specs/render-views)

# batch-file - 批处理命令在脚本中不起作用

> ID：14450227
> 
> 赞同：1
> 
> 时间：2013-01-22T01:37:06.003
> 
> 标签：batch-file, command

我对批处理脚本还是比较陌生。我正在尝试编写一个脚本来执行一些 matlab 命令，本质上是在 Windows 7 的 32 位版本和 64 位版本上运行 matlab 脚本。

当我在 DOS 提示符下运行命令时，一切正常，但是当它们作为脚本运行时，我收到一条错误消息，提示系统找不到指定的路径

脚本.bat

```
@echo off

set RESTORE=restoredefaultpath
set HOMEDIRECTORY=P:\ISARLAB\IsarLab-Dev
set SCRIPTNAME=packageScript
set MATLABCOMMAND="%RESTORE%; cd %HOMEDIRECTORY%; %SCRIPTNAME%"

echo launching Matlab 32 bit ...

::32 bit Matlab on Windows
set MATLAB32BIT="C:\Prorgram Files\MATLAB\R2012b-32bit\bin\matlab.exe"
echo %MATLAB32BIT% -r %MATLABCOMMAND%
%MATLAB32BIT% -r %MATLABCOMMAND%

@echo on 
```

脚本的输出：

```
launching Matlab 32 bit ...
"C:\Prorgram Files\MATLAB\R2012b-32bit\bin\matlab.exe" -r "restoredefaultpath; cd P:\ISARLAB\IsarLab-Dev; packageScript"
The system cannot find the path specified. 
```

我已确认指定的路径是正确的，并且在执行此 .exe 时启动了正确版本的 Matlab。

命令在 dos 提示符下运行（有效）：

```
set RESTORE=restoredefaultpath
set HOMEDIRECTORY=P:\ISARLAB\IsarLab-Dev
set SCRIPTNAME=packageScript
set MATLABCOMMAND="%RESTORE%; cd %HOMEDIRECTORY%; %SCRIPTNAME%"
set MATLAB32BIT="C:\Prorgram Files\MATLAB\R2012b-32bit\bin\matlab.exe"
%MATLAB32BIT% -r %MATLABCOMMAND% 
```

有人可以解释为什么这些命令在 dos 提示符下有效，但在脚本中无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:03:05.507

下面的行有一个错误：

```
set MATLAB32BIT="C:\Prorgram Files\MATLAB\R2012b-32bit\bin\matlab.exe" 
```

应该是“程序”，而不是“程序”。

**EDIT:** Oops! I did not read Ken White's comment before posting my answer! I apologize...

# java - 带有 maskFormatter 的 JFormattedTextField 抛出 NumberFormatException

> ID：14450230
> 
> 赞同：1
> 
> 时间：2013-01-22T01:37:52.600
> 
> 标签：java, swing, parsing, input, integer

我有一个使用以下掩码格式化程序的 JFormattedTextField：

```
 private MaskFormatter maskForInput;
    maskForInput=new MaskFormatter("####"); // I have tried using stars (*) too.
    maskForInput.setValidCharacters("0123456789");

    javax.swing.JFormattedTextField playerRaiseField=new javax.swing.JFormattedTextField(maskForInput); 
```

这应该允许用户输入最多 4 位数字作为输入。但是，当我尝试从`Integer.parseInt(playerRaiseField.getText())`该`String`字段返回时，我总是得到一个`NumberFormatException`可能是由于用户输入上留下的空白。要清除它：

例如，如果用户输入`560`后面有一个尾随空格，那么我正在阅读的字符串是`560( )`，并且在尝试将其解析`String`为`int`this 异常时抛出。任何解决方法？如何修改掩码格式化程序以接受 1 到 4 位数字*而不*总是固定的 4 位数字？

**注意：**奇怪的是使用`trim()`返回`String`的仍然没有删除额外的空白字符......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:17:38.647

您的期望有很多问题...

首先，您似乎相信格式化字段可以包含任意数量的字符。这不是真的（虽然您可以获得文本，但该字段仍处于它认为无效的状态）。格式化字段要求必须填写掩码的所有位置。

其次，您应该使用该`JFormattedTextField#getValue`方法返回字段的值，而不是`getText`

第三，返回的文本用掩码的占位符 ( `MaskFormatter#getPlaceholder`) 填充，它可能是也可能不是空格，所以`String#trim`可能不会有帮助......

如果您希望用户只能输入一个可能由 0-n 个字符组成的数值，那么您真的应该考虑使用`DocumentFilter`应用于普通`JTextField`

```
public class TestField {

    public static void main(String[] args) {
        new TestField();
    }

    public TestField() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class NumericDocumentFilter extends DocumentFilter {

        private int maxChars;

        public NumericDocumentFilter(int maxChars) {
            this.maxChars = maxChars;
        }

        @Override
        public void insertString(DocumentFilter.FilterBypass fb, int offset,
                String text, AttributeSet attr)
                throws BadLocationException {

            StringBuilder buffer = new StringBuilder(text);
            for (int i = buffer.length() - 1; i >= 0; i--) {
                char ch = buffer.charAt(i);
                if (!Character.isDigit(ch)) {
                    buffer.deleteCharAt(i);
                }
            }

            text = buffer.toString();
            if (fb.getDocument().getLength() + text.length() > maxChars) {
                int remaining = maxChars - fb.getDocument().getLength();
                text = text.substring(0, remaining);
            }

            if (text.length() > 0) {
                super.insertString(fb, offset, text, attr);
            }
        }

        @Override
        public void replace(DocumentFilter.FilterBypass fb,
                int offset, int length, String string, AttributeSet attr) throws BadLocationException {
            if (length > 0) {
                fb.remove(offset, length);
            }
            insertString(fb, offset, string, attr);
        }
    }

    public class TestPane extends JPanel {

        private JTextField field;

        public TestPane() {

            setLayout(new GridBagLayout());

            field = new JTextField(4);
            ((AbstractDocument) field.getDocument()).setDocumentFilter(new NumericDocumentFilter(4));
            add(field);
            field.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println(field.getText());
                }
            });
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:51:17.173

由于我不确定您是如何使用修剪的，我建议您尝试以下代码行来删除空格：正如所讨论的，以下代码应该可以工作：

```
String playerBet=playerRaiseField.getText();
// if playerBet is not null
String playerBetWithoutSpaces=playerBet.trim();

Integer.parseInt(playerBetWithoutSpaces); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T02:09:31.127

## [Java 文档](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/MaskFormatter.html#setMask%28java.lang.String%29)

1

```
public void setMask(String mask)
             throws ParseException 
```

* * *

2 你说你有 4 个空格。这意味着没有设置默认值，并且您没有使用无效字符。查阅上面的文档。

3 为了使其可扩展（1-4），您必须确定输入的长度，然后通过带有 IF 的适当掩码运行它。您还可以使用默认值填充剩余的掩码，请参阅文档。

编辑：看到你在下面发布了更多代码。您不对现有字符串执行 getText 。您可以使用它从字段中获取输入。你必须以另一种方式来做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T02:12:11.127

您的格式“####”仅允许 4 位数字。对于可变长度，您必须编写一个自定义类。[这](http://windowkit.googlecode.com/svn/trunk/src/org/windowkit/toolkit/widget/text/PhoneNumberMaskFormatter.java)是一个示例类。

我使用你的代码实现了一些东西，只有在填写了所有 4 个数字时它才对我有用：

```
import javax.swing.*;
import javax.swing.text.*;
import java.awt.event.*;
import java.awt.*;
public class tes implements ActionListener
{
  public static JFormattedTextField playerRaiseField;
public static void main(String[] args) throws Exception{
JFrame j=new JFrame();
    j.setSize(400,400);
    j.setLayout(new GridLayout(2,1));

MaskFormatter maskForInput;
    maskForInput=new MaskFormatter("####"); // I have tried using stars (*) too.
    maskForInput.setValidCharacters("0123456789");

    playerRaiseField=new javax.swing.JFormattedTextField(maskForInput);
j.getContentPane().add(playerRaiseField);
JButton jb=new JButton("Print out the above value");
j.getContentPane().add(jb);
jb.addActionListener(new tes());
j.setVisible(true);
}
public void actionPerformed(ActionEvent e) throws Exception{
    System.out.println("\""+Integer.parseInt(playerRaiseField.getText())+"\"");
}
} 
```

# objective-c - 用 NSDictionary 对象初始化 NSString？

> ID：14450231
> 
> 赞同：0
> 
> 时间：2013-01-22T01:37:53.303
> 
> 标签：objective-c, nsstring

我将如何使用 NSDictionary 对象初始化 NSString？目前，我正在使用这个：（
已经声明了字符串）
string = [NSString stringWithFormat:@"%@", [attributeDict objectForKey:@"id"]];

这很好用，因为我可以 NSLog 它和所有内容，但是，由于某种原因，我不能将它传递给另一个方法。我试过用这样一个名为控制器的类来做这件事：
[控制器 externalEchoString:string] 在控制器中有一个名为 externalEchoString 的方法：

```
-(void) externalEchoString:(NSString *) test{
NSLog(@"%@", test);
} 
```

由于某种原因，它无法 NSLog 字符串....有什么想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T01:58:43.150

解决方法：调用方法如下：

```
[ClassName methodName:[NSString stringWithFormat:@"%@", [dicthere objectForKey:@"id"]]]; 
```

# maven - 使用 mvn cobertura 插件时权限被拒绝

> ID：14450233
> 
> 赞同：1
> 
> 时间：2013-01-22T01:37:55.513
> 
> 标签：maven, permissions, cobertura

我正在使用 maven 来构建我的项目，并使用 cobertura 来收集 UT 代码覆盖率。我的问题是当我尝试构建项目时，我遇到了下面的错误，最后我在发出命令时发现失败是由cobertura插件引起的：`mvn cobertura:instrument`。

```
[INFO] Unable to obtain CommandsFile location.
Embedded error: Permission denied 
```

我试图通过目录，我认为我有权限。有人见过失败吗？如何调试它？

```
$ mvn cobertura:instrument
[INFO] Scanning for projects...
[INFO] Reactor build order: 
[INFO]   MyProject
[INFO] ------------------------------------------------------------------------
[INFO] Building XXXXXX
[INFO]    task-segment: [cobertura:instrument]
[INFO] ------------------------------------------------------------------------
[INFO] [cobertura:instrument]
[INFO] Skipping cobertura mojo for project with packaging type 'pom'
[INFO] ------------------------------------------------------------------------
[INFO] Building ato-client
[INFO]    task-segment: [cobertura:instrument]
[INFO] ------------------------------------------------------------------------
[INFO] [cobertura:instrument]
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Unable to obtain CommandsFile location.

Embedded error: Permission denied
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Unable to obtain CommandsFile location.
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:703)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:553)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:523)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:371)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:332)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:181)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:356)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:356)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: Unable to obtain CommandsFile location.
    at org.codehaus.mojo.cobertura.tasks.AbstractTask.executeJava(AbstractTask.java:195)
    at org.codehaus.mojo.cobertura.tasks.InstrumentTask.execute(InstrumentTask.java:131)
    at org.codehaus.mojo.cobertura.CoberturaInstrumentMojo.execute(CoberturaInstrumentMojo.java:145)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:483)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:678)
    ... 16 more
Caused by: java.io.IOException: Permission denied
    at java.io.UnixFileSystem.createFileExclusively(Native Method)
    at java.io.File.checkAndCreate(File.java:1704)
    at java.io.File.createTempFile(File.java:1792)
    at java.io.File.createTempFile(File.java:1828)
    at net.sourceforge.cobertura.util.CommandLineBuilder.<init>(CommandLineBuilder.java:96)
    at org.codehaus.mojo.cobertura.tasks.CommandLineArguments.getCommandsFile(CommandLineArguments.java:82)
    at org.codehaus.mojo.cobertura.tasks.AbstractTask.executeJava(AbstractTask.java:191)
    ... 20 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2 seconds
[INFO] Finished at: Tue Jan 22 09:30:25 CST 2013
[INFO] Final Memory: 22M/241M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:01:55.217

我认为您当前的用户没有对临时文件夹的写入权限（检查`java.io.tmpdir`系统属性值）：

```
Caused by: java.io.IOException: Permission denied 
at java.io.UnixFileSystem.createFileExclusively(Native Method) 
at java.io.File.checkAndCreate(File.java:1704) 
at java.io.File.createTempFile(File.java:1792) 
at java.io.File.createTempFile(File.java:1828) 
at net.sourceforge.cobertura.util.CommandLineBuilder.(CommandLineBuilder.java:96) 
at enter code here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:30:39.410

该错误表示 java 进程的用户对临时目录 (/tmp) 没有写权限。

Java 进程会将 pid 写入临时目录中的文件。

jps/jstat 可以使用这个 pid 文件来获取 jvm 信息。

也可以看看：

*   [jstat](http://www.oracle.com/technetwork/java/jvmstat-142257.html)
*   [如何防止 Java 创建 hsperfdata 文件](https://stackoverflow.com/questions/76327/how-can-i-prevent-java-from-creating-hsperfdata-files)
*   [JP](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jps.html#hostidentifier)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T01:57:18.827

您是否检查过用户是否有权写入 java 配置提供的标准临时文件目录？

# perl - 在 Perl 中发布到带有请求标头的网页

> ID：14450242
> 
> 赞同：1
> 
> 时间：2013-01-22T01:39:37.610
> 
> 标签：perl, http-headers, user-agent

我正在尝试使用 Perl 将数据发布到页面，但该页面还需要标题。我将如何发布标头和发送标头（cookie、用户代理等）？

我尝试使用[LWP::UserAgent](http://search.cpan.org/perldoc?LWP%3a%3aUserAgent)，但我无法弄清楚如何发送标题，即使我可以发布到页面。

关于这个话题的另一件事。当我在该页面上发布并打印响应内容时，我可以看到除了应该显示的数字之外的 html。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T01:46:10.630

尝试这样做：

```
use LWP::UserAgent;
use HTTP::Request;

my $userAgent = LWP::UserAgent->new();
my $request = HTTP::Request->new(
    POST => "http://domain.tld/path"
);
$request->content("stuff=foobar");
$request->content_type("application/x-www-form-urlencoded");
my $response = $userAgent->request($request);

if ($response->code == 200) {
    print $response->as_string;
}
else {
   die $response->status_line;
} 
```

# java - 我应该使用什么数组复制方法？

> ID：14450243
> 
> 赞同：1
> 
> 时间：2013-01-22T01:39:39.863
> 
> 标签：java, arrays, copy

> **可能重复：**
> [如何在java中有效地复制数组？](https://stackoverflow.com/questions/2589741/how-to-effectively-copy-an-array-in-java)

使用`Arrays.copyOf()`or有什么好处`System.arraycopy()`吗？为什么我应该使用其中一种，在哪里使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:44:04.050

你应该看看这两个链接：

**[备份](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)**

**[数组复制](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html)**

正如上面 vulcan 所建议的，这很好地解释了它：[什么更有效：System.arraycopy vs Arrays.copyOf？](https://stackoverflow.com/questions/2589741/how-to-effectively-copy-an-array-in-java)

# javascript - D3，添加新组元素和行时遇到问题

> ID：14450244
> 
> 赞同：0
> 
> 时间：2013-01-22T01:39:52.987
> 
> 标签：javascript, svg, d3.js

我正在可视化链接列表。只是为了好玩和学习 d3.js。我能够为圆圈（代表一个节点）创建组元素。但我不明白为什么在那之后没有添加新的组元素。我希望这个新组包含线/箭头（.next 参考表示）。我通过 CDT 调试了代码正在执行但没有添加到 DOM 中。

```
var g = svg.selectAll("g")
        .data(dataArr)
    .enter().append("g")
        .attr("transform", function() {
            if (addMethod === "headAdd") {
                return "translate(" + 50 + " ," + y + ")";
            } else {
                return "translate(" + x + " ," + y + ")";
            }
        })
        .attr("class", "nodes")
        .attr("id", function(d) { return d.getData(); });

    // Create a circle representing the node.
    g.append("circle")
        .attr("r", 40)
        .style("fill", "#7DC24B")
        .style("stroke", "#122A0A")
        .style("stroke-width", 5)
        .style("opacity", 0)
        .style("stroke-opacity", 0.8)
        .transition().duration(1000).style("opacity", 1);

    // Add data to the node.
    g.append("text")
        .attr("dy", ".35em")
        .attr("text-anchor", "middle")
        .style("fill", "#ffffff")
        .text(function(d) { return d.getData(); });

    // Create the "next" arrow.
    // l is the line group that will enclose the line
    // and the text.

    // This doesn't seem to be working from here below.
    var l = svg.selectAll("g")
        .data(["1"])
    .enter().append("g")
        .attr("class", "lines")
        .attr("transform", "translate(" + (x + 40) + ", " + y + ")");

    l.append("line")
        .attr("x1", x + 40)
        .attr("y1", y)
        .attr("x2", x + 100)
        .attr("y2", y)
        .style("stroke", "#8EBD99")
        .style("stroke-width", 30); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:37:47.437

这 ...

```
var l = svg.selectAll("g")
        .data(["1"]) 
```

... 选择现有的组元素（即您刚刚创建的那个）并与这些元素执行数据连接。enter() 选择将为空，因为您选择的元素已经存在于 DOM 中。因此后面的部分`.enter()`将不会被执行，`l`选择将为空。

您必须使选择器更具体，例如：

```
var l = svg.selectAll(".lines")
        .data(["1"]) 
```

[Thinking with Joins](http://bost.ocks.org/mike/join/)文章很好地解释了数据连接的概念。另请参阅[通用更新模式（I、II、III）](http://bl.ocks.org/3808218)以获取有关在数据连接期间将遇到的不同类型选择的更多详细信息。

# ruby-on-rails - 回形针不生成缩略图，静默失败

> ID：14450246
> 
> 赞同：3
> 
> 时间：2013-01-22T01:40:02.587
> 
> 标签：ruby-on-rails, imagemagick, paperclip

我在这里拉头发......我不知道为什么这不起作用。

我正在使用 ruby​​ 1.8.7、rails 3.0.19、回形针 2.7.4。

我的模型：

```
has_attached_file :photo,  :styles => {
:logo => "60x20",
:widget => "60x40",
:thumb=> "100x100",
:small  => "150x150>" },
:url  => "/images/companies/:id/:style/:basename.:extension",
:path => ":rails_root/public/images/companies/:id/:style/:basename.:extension",
:default_url => "/images/bb_noimage.png"

#validates_attachment_presence :photo
validates_attachment_size :photo, :less_than => 3.megabytes
validates_attachment_content_type :photo, :content_type => ['image/jpeg', 'image/png','image/gif','image/jpg'] 
```

在视图中：

```
<%= image_tag "#{get_image_url(company.id,company.photo_file_name,"small")}"%> 
```

问题是某些文件夹将具有“大”和“拇指”大小，但不会有“小”和“徽标”大小 - 我在很长一段时间没有使用该站点后重新访问该站点。我希望生成缺少的样式。我尝试了这些命令，第一个显示没有错误，但第二个显示下面的错误。Niether 生成所需的缩略图。谢谢您的帮助！

```
bundle exec rake paperclip:refresh:thumbnails CLASS=Company
bundle exec rake paperclip:refresh:missing_styles --trace

** Execute paperclip:refresh:thumbnails
rake aborted!
No such file or directory - /Users/q/Sites/baiabase-old/public/system/paperclip_attachments.yml
/Users/q/.rvm/gems/ruby-1.8.7-p302@baia-old/gems/paperclip-2.7.4/lib/paperclip/missing_attachment_styles.rb:25:in `initialize' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:25:20.217

**添加到您的模型**

```
 attr_accessible :photo, :photo_file_name

    has_attached_file :photo,  :styles => {.....
....your code... 
```

并在视图中

```
<%= image_tag @company.photo.url(:small) %> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T00:11:15.063

**更多作为礼物送给你，它是**

对于原始 512x512 像素的照片会更好，会占用更少的服务器硬盘空间

将所有附加照片的样式添加 `:original => "512x512",` 到此分辨率的最大值，从而节省硬盘空间。

`:less_than => 3.megabytes` 更改为`:less_than => 5.megabytes` 如果用户尝试附加大于 3 MB 的照片，则不会执行此操作，请将其更改为 5 MB

用户可以添加分辨率为 3000 x 3000 或更高（<= 5 mb）的照片，但所有平滑的照片将转换为 512 x 512 像素，重量不超过 20 KB。

如果你想将所有附加的照片转换为 jpg（格式）试试这个 `:thumb => {:geometry => '100x100#', :format => :jpg},`

并注意纵横比 4:3`'100x100#'`和纵横比 16:9 `'100x100>'`。

# mysql - MySQL REPLACE INTO 在多个键上？

> ID：14450249
> 
> 赞同：4
> 
> 时间：2013-01-22T01:40:16.603
> 
> 标签：mysql

我正在使用 MySQL 中的伪会话表。该表目前如下所示：

```
id   |   key   |   value   |   metadata 
```

id 是会话所属的用户，元数据是用户的 IP 地址。这背后的想法是每个用户可以从不同的 IP 地址多次登录。我想知道是否`REPLACE INTO`只能在 id = userid、key = key 和 metadata = ip_address 的情况下替换值，所以理想情况下我们可以得到这样的结果：

```
id   |   key   |   value   |   metadata
 1       test      avalue       127001
 1       test      bvalue       19216801
 1       test      cvalue       19215810 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T01:43:42.090

如果您有`UNIQUE`索引或`PRIMARY KEY`在这三列中定义，那么是的，您可以`REPLACE INTO`。如果您还没有索引，请添加它：

```
ALTER TABLE session_table ADD PRIMARY KEY (`id`, `key`, `metadata`); 
```

如果您已经定义了 PK，请`UNIQUE`跨这些列创建复合索引：

```
CREATE INDEX `idx_id_key_metadata` ON session_table (`id`, `key`, `metadata`); 
```

[更多关于 MySQL`CREATE INDEX`语法](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

[这里有一个小示范](http://sqlfiddle.com/#!2/a6503/1)。

# javascript - 点击java脚本重定向到另一个页面

> ID：14450251
> 
> 赞同：0
> 
> 时间：2013-01-22T01:40:23.097
> 
> 标签：javascript, jquery

现在在js中单击多维数据集图像后如何将多维数据集图像重定向到另一个链接它重定向到google.com但它在另一个窗口中打开但我希望它显示在同一个窗口中

```
<div class="row">
                <div class="span10">
                    <div class="melonhtml5_gallery">
                        **<div onclick="window.open('http://www.google.com', '_blank');" data-caption="Fans" data-image="http://www.defie.co/designerImages/thumbnails/inventory.png"></div>**
                        <div data-caption="Paul Scholes" data-image="http://www.defie.co/designerImages/thumbnails/search.png"></div>
                        <div data-caption="Wayne Rooney" data-image="http://www.defie.co/designerImages/thumbnails/yourFile.png"></div>
                        <div data-caption="Sir Alex Ferguson" data-image="http://www.defie.co/designerImages/thumbnails/shareFiles.png"></div>
                        <div data-caption="Champ" data-image="http://www.defie.co/designerImages/thumbnails/custFile.png"></div>
                        <div data-caption="Group" data-image="http://www.defie.co/designerImages/thumbnails/custQuote.png"></div>
                        <div data-caption="Ryan Giggs" data-image="http://www.defie.co/designerImages/thumbnails/saleOrders.png"></div>
                        <div data-caption="David Beckham" data-image="http://www.defie.co/designerImages/thumbnails/custInvoice.png"></div>
                        <div data-caption="Champ" data-image="http://www.defie.co/designerImages/thumbnails/vendorProfile.png"></div>
                        <div data-caption="Group" data-image="http://www.defie.co/designerImages/thumbnails/vendorQuote.png"></div>
                        <div data-caption="Ryan Giggs" data-image="http://www.defie.co/designerImages/thumbnails/buyOrders.png"></div>
                        <div data-caption="David Beckham" data-image="http://www.defie.co/designerImages/thumbnails/vendorInvoice.png"></div>
                        <div data-caption="Champ" data-image="http://www.defie.co/designerImages/thumbnails/accountsReceivable.png"></div>
                        <div data-caption="Group" data-image="http://www.defie.co/designerImages/thumbnails/customerRMA.png"></div>
                        <div data-caption="Ryan Giggs" data-image="http://www.defie.co/designerImages/thumbnails/production.png"></div>
                        <div data-caption="David Beckham" data-image="http://www.defie.co/designerImages/thumbnails/CRM.png"></div>
                    </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:41:53.440

更改`_blank`为`_self`。这将使目标从新窗口变为当前窗口

jQuery：

一般来说，我避免将事件附加到 div，并使用链接或按钮来使用点击事件，但无论如何......

```
$('.melonhtml5_gallery').find('div').click(function(){
  window.open($(this).attr('data-image'), '_self')
  //you can refer to attributes using the following:
  //$(this).attr('data-caption')
}) 
```

# contact-form - 提交后如何使php联系表变灰？

> ID：14450255
> 
> 赞同：0
> 
> 时间：2013-01-22T01:40:41.900
> 
> 标签：contact-form

我有一个 PHP 联系表格，带有一个简单的提交按钮。我想要做的是，一旦用户单击提交，添加一个使表单中的所有文本框变灰的功能。

或者表格完全消失了，所以我可以在页面上放置一个标签来说明它已经完成。在不使用 javascript 或 jquery 的情况下有没有办法解决这个问题？

目前提交按钮的代码是：

```
<input type="submit" value=" Continue " style="width:200px;height:40px"> 
```

它使用 PHP post 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:55:15.640

提交后，值应发布到 PHP 脚本。然后，您可以实现一种方法来检查用户的值是否已被接受。

在代码的顶部，实现用于保存输入的方法：

```
<?php
     $form_submit_success = false;
     //Your input processing code here.
     $form_submit_success = true; //Set this variable to true if form data was accepted.

     if($form_submit_success) {
         //Message to inform the user that form submission was a success.
     } else {
?>
<!-- HTML Form Code here -->
<?php
     }
?> 
```

# node.js - Heroku Node.js 示例 facebook 应用程序在 Google Chrome 中不起作用

> ID：14450256
> 
> 赞同：4
> 
> 时间：2013-01-22T01:40:42.887
> 
> 标签：node.js, google-chrome, facebook-graph-api, heroku, express

我正在尝试使用的 Heroku 应用程序（此处的代码）： [https ://github.com/heroku/facebook-template-nodejs](https://github.com/heroku/facebook-template-nodejs)

当页面以 chrome 加载时，会出现“不安全的 Javascript 尝试使用 URL 访问框架”错误。

登录按钮将您带到 facebook，但实际上并未将您登录到应用程序并给出相同的错误。

有没有人让这个应用程序在 Chrome 上运行，或者任何人都可以建议如何修补它？

PS它似乎在Mozilla上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T16:11:52.570

如上所述，几乎可以肯定这是一个跨域策略问题。一般来说，您只需要在响应中添加正确的标头信息即可。

> 访问控制允许来源：*

在 Node 中，我认为只需将其添加为响应中的另一个标头，使用

> response.writeHead

请参阅[http://nodejs.org/api/http.html#http_response_writehead_statuscode_reasonphrase_headers](http://nodejs.org/api/http.html#http_response_writehead_statuscode_reasonphrase_headers)

哦，如果您使用 Express，则有明确的说明说明如何操作。我看不出它为什么不能使用普通的旧节点。

[http://enable-cors.org/server_expressjs.html](http://enable-cors.org/server_expressjs.html)

因此，我查看了您的链接，在您的情况下，我认为您只需要在使用任何其他快速应用程序方法之前输入标题信息即可。

至于为什么它在 Firefox 而不是 Chrome 中工作，不确定。两者都支持 CORS 许多版本。也许您有一些干扰的 Chrome 扩展程序。

# rally - API：使用项目范围查询 TestCaseResults？

> ID：14450258
> 
> 赞同：2
> 
> 时间：2013-01-22T01:40:54.420
> 
> 标签：rally

是否可以使用项目范围查询测试用例结果？

TestCaseResult 对象不包含项目范围，并且对 testcaseresults 的查询似乎忽略了项目范围。

那么有没有办法，例如，查询过去 14 天内在特定项目及其子项目范围内的所有测试用例结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:02:44.920

在标准 WSAPI 中，您可以执行以下操作：

`((TestCase.Project.Name = "My Project") AND (CreationDate > "2013-01-07"))`

或者

`((TestCase.Project.ObjectID = "12345678910") AND (CreationDate > "2013-01-07"))`

在 TestCaseResults 上，它应该为您提供项目范围的 TCR。

如果您需要子项目，则需要运行多个查询，或者执行一些复杂的 AND'ing。

# ruby-on-rails - 如何在 RoR 中显示 twitter 引导图标？

> ID：14450259
> 
> 赞同：1
> 
> 时间：2013-01-22T01:41:00.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

如果我尝试使用引导程序的图标类，它不会正确显示。
有谁知道如何显示它？

```
<%= f.submit nil, :class => 'btn btn-primary', :value => sanitize('<i class="icon-plus icon-white"></i> ') +  'Create!' if @community.new_record? %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:55:14.220

`glyphicon-halflings-white.png`（对于白色图标）必须在 Rails 应用程序的`app/assets/images`目录中。然后添加`<i class="icon-plus icon-white"></i>`到您想要的视图。

要将图标用作表单提交按钮，请将块传递给`button_tag`：

```
<%= button_tag(type: 'submit', class: "btn btn-primary") do %>
  <i class="icon-ok icon-white"></i>
<% end %> 
```

资料来源：

*   [“将 HTML 标记添加到提交按钮文本”](https://stackoverflow.com/questions/11604304/add-html-tags-to-a-submit-button-text)
*   [“带有 simple_form 的按钮内的 HTML 代码”](https://stackoverflow.com/questions/10858582/html-code-inside-buttons-with-simple-form)

# vector - 如果Prolog中有虚数，如何计算向量积？

> ID：14450260
> 
> 赞同：0
> 
> 时间：2013-01-22T01:41:06.410
> 
> 标签：vector, prolog

我试图在 Prolog 中将两个向量相乘，但是如果这些向量包含虚数，我就无法让它工作。到目前为止我的代码：

```
vector_product([X|Xs],[Y|Ys],OP) :-
    inner(Xs,Ys,OP1),
    OP is X*Y+OP1.
vector_product([],[],0). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:18:06.050

看看能不能帮到你...

[来自维基百科](http://en.wikipedia.org/wiki/Complex_number)的公式：

```
% (a+bi) + (c+di) = (a+c) + (b+d)i
c_sum((A,B), (C,D), (E,F)) :- E is A+C, F is B+D.

% (a+bi) (c+di) = (ac-bd) + (bc+ad)i
c_mul((A,B), (C,D), (E,F)) :- E is A*C - B*D, F is B*C + A*D. 
```

数字表示为`(Real, Imaginary)`。

```
vector_product([X|Xs], [Y|Ys], OP) :-
    vector_product(Xs, Ys, OP1),
    c_mul(X, Y, M),
    c_sum(M, OP1, OP).
vector_product([], [], (0,0)). 
```

# events - wxPython：将动态创建的微调器绑定到事件

> ID：14450265
> 
> 赞同：1
> 
> 时间：2013-01-22T01:41:39.073
> 
> 标签：events, wxpython

我使用下面的代码创建了几个带有 for 循环的微调器。

现在，我不知道如何绑定事件，以便知道正在修改哪个微调器，以便可以将微调器值放入正确的变量中。

如果我能弄清楚哪个微调器正在调用处理程序，我可以将它映射到正确的变量。

有什么想法吗？这甚至可能吗？

提前致谢！

* * *

```
 import wx

class spinnerFrame(wx.Frame):
    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent,id, "Spinner Frame", size = (300,200))

        #constants
        spnr_sz = (50,-1)
        names = ('name1','name2','name3','name4','name5','name6')

        sizer = wx.GridBagSizer(5, 5)
        # TEXT FONT EXAMPLE
        # m_text = wx.StaticText(panel, -1, "Hello World!")
        # m_text.SetFont(wx.Font(14, wx.SWISS, wx.NORMAL, wx.BOLD))
        # m_text.SetSize(m_text.GetBestSize())

        #temp
        sizer = wx.GridBagSizer(5, 5)
        row = 0
        for n in names:
            row += 1
            my_label = wx.StaticText(self, -1, n)
            spinner = wx.SpinCtrl(self, -1, size = spnr_sz, min = 0, initial = 10 )
            self.Bind(wx.EVT_SPINCTRL, self.OnCompute, spinner)
            sizer.Add(my_label, (row,0))
            sizer.Add(spinner, (row,1))

        sizer.AddGrowableRow(7)
        sizer.AddGrowableCol(4)

        self.SetSizerAndFit(sizer)
        self.Centre()

    def OnCompute(self,event):
        # a = spinner.GetValue()
        # ????

if __name__=='__main__':
    app = wx.App(True) # was False
    frame = wx.Frame(None)
    frame = spinnerFrame (parent=None, id = -1)
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:42:07.093

是的，这是可能的。我知道的最简单的方法是将您的唯一名称与对 Bind 的每次调用相关联，方法是给微调器一个名称或使用部分函数（或 lambdas，但 lambdas 最终会变得混乱），然后在处理程序中检查名称. [这个](https://stackoverflow.com/questions/976395/best-way-to-get-the-name-of-a-button-that-called-an-event)先前的 SO question中给出了如何使用该名称的示例。

# javascript - AJAX 从 Cordova 应用程序访问内部存储？

> ID：14450269
> 
> 赞同：0
> 
> 时间：2013-01-22T01:42:47.833
> 
> 标签：javascript, android, cordova

有没有办法从 Java 端保存文件，以便可以通过 Web 请求（AJAX、img/script src、链接 href 等）访问它？

我可以通过 写入文件`openFileOutput`，该目录可以通过 JS 应用程序访问吗？

我知道我可以将文件写入外部媒体并通过 File api 访问这些文件，但这不是我想要的（尽管必要时必须恢复）。

用法是通过插件将图像写入缓存，然后通过普通的 img src 加载这些图像，尽管希望将其用于其他用途。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:59:53.420

是的，PhoneGap 应用程序可以访问此目录。该目录的路径是：

```
file:///data/data/{package name}/{file name} 
```

# c++ - 有什么方法可以验证 STL 容器的迭代器吗？

> ID：14450274
> 
> 赞同：0
> 
> 时间：2013-01-22T01:43:33.870
> 
> 标签：c++, stl

> **可能重复：**
> [C++ 检查迭代器是否有效的最佳方法](https://stackoverflow.com/questions/2062956/c-best-way-to-check-if-an-iterator-is-valid)

假设我有一个函数，它将迭代器作为其唯一参数，如下所示。

```
void DoSomethingWithIterator(std::vector<int>::iterator iter)
{
   // Check the pre-condition
   assert( /* how to validate iter here? */ )

   // Operate on iter afterwards
   ..
} 
```

我怎么知道是否`iter`有效。通过有效，我的意思是它指向向量内的现有元素，例如 from `m_intVector.begin()`to `m_intVector.end()`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T01:45:02.463

一般来说，你不能这样做。C++ 类型旨在最大限度地提高效率，并且不包含此类附加信息。

例如，vector 的迭代器很可能等价于指向元素的指针（在我的机器上就是这种情况，使用 g++ 4.7.2）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:15:34.453

> 我的意思是它指向向量内的现有元素，例如 from `m_intVector.begin()`to `m_intVector.end()`。

当然。只需遍历 的内容`m_vector`，并将每个迭代器与`iter`.

```
for ( std::vector<int>::iterator it = m_intVector.begin (); it != m_intVector.end (); ++it )
    if ( it == iter ) return true;
return false; 
```

但我怀疑你不会想为那种支票付钱。

# sql - 如何进行 2 个 sql 查询 1

> ID：14450275
> 
> 赞同：1
> 
> 时间：2013-01-22T01:43:41.040
> 
> 标签：sql, sql-server, tsql

我有 2 个相当简单的查询需要做一个。我今天只是大脑一片空白。

```
SELECT max(StatusReportID) 
  FROM dbo_VehicleStatusReport 
```

和

```
SELECT StatusReportID, StatusReportTime, CarNumber, VehicleID, 
       DriverNumber, DriverID, VehicleStatus, LocationX, LocationY, 
       Speed, Direction, InvalidGPS 
  FROM dbo_VehicleStatusReport 
 WHERE StatusReportID > " & MaxStatusReportID2 & " 
```

其中 & MaxStatusReportID2 & 是第一个查询的结果减去 3000 (-3000)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T01:45:19.527

只需将其包装在子查询中，

```
SELECT StatusReportID, 
       StatusReportTime, 
       CarNumber, 
       VehicleID, 
       DriverNumber, 
       DriverID, 
       VehicleStatus, 
       LocationX, 
       LocationY, 
       Speed, 
       Direction, 
       InvalidGPS 
FROM   dbo_VehicleStatusReport 
WHERE  StatusReportID > 
       ((SELECT max(StatusReportID) FROM dbo_VehicleStatusReport) - 3000) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T01:52:41.717

```
;WITH x AS 
(
  SELECT MaxSRID = MAX(StatusReportID) - 3000 
  FROM dbo_VehicleStatusReport
)
SELECT v.StatusReportID, v.StatusReportTime, ... 
FROM dbo_VehicleStatusReport AS v
INNER JOIN x
ON v.StatusReportID > x.MaxSRID; 
```

如果目标是找到最新的 2999 个条目，那么以下内容更简单、更可靠：

```
SELECT TOP (2999) StatusReportID, StatusReportTime, ...
FROM dbo_VehicleStatusReport
ORDER BY StatusReportTime DESC; 
```

这是因为：

1.  `IDENTITY`值可能会因删除和回滚而丢失，因此所依赖的查询`MAX - 3000`不一定会产生 2999 行。
2.  `IDENTITY`列可以重新播种并且值可以被覆盖，因此假设值增加意味着稍后可能会出现问题。

# c# - Lambda 和 Foreach

> ID：14450277
> 
> 赞同：2
> 
> 时间：2013-01-22T01:43:42.507
> 
> 标签：c#, .net

我有这个方法：

```
public Wrapper(Action<string> codeBlock)
{
   //Code code code

        Parallel.ForEach<Computer>(Computers, computer =>
        {
                //CODE CODE 
               codeblock();

               //More code

        );
    //more code

 } 
```

我使用它将代码块放入包装器中，为我的应用程序制作重要的东西。

我使用类似的东西调用它

```
Wrapper((s) => {

//My Code block
//code
//More code

}); 
```

我想在我的代码块中使用在包装器的 foreach 中创建的计算机集合的对象计算机。所以如果我做了这样的事情：

```
Wrapper((s) => {

//My Code block
 AFunction(computer);
//More code

}); 
```

它显然失败了，因为“计算机”在我调用包装器的上下文中不存在，只存在于包装器的 foreach 中。

那么我怎么能做到这一点呢？也许我有一个错误设计？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T01:47:40.863

利用

```
public Wrapper(Action<Computer> codeBlock)
{
    //...
    Parallel.ForEach<Computer>(Computers, computer =>
    {
           //...
           codeblock(computer);
           //...
    );
} 
```

反而。

```
Wrapper((s) => {    // s is of type Computer here now
    //...
    AFunction(s);
    //...
}); 
```

当然，如果您需要两者并在您的代码块内，您可以使用`Action<T1,T2>`（即具有必要数量参数的相关委托） 。Lambda 表达式将相应更改：`Computer``string``(s, comp) => { /*...*/ }`

# zend-form - zend framwwork 2 inArray 元素验证器无聊

> ID：14450285
> 
> 赞同：0
> 
> 时间：2013-01-22T01:44:40.617
> 
> 标签：zend-form, zend-framework2

如何禁用 Zend\Element\Select 的 inArray 验证器？我无法删除此标准验证器选择元素。

**编辑：**

我想要做的是用 ajax 填充一个如此动态的选择元素。这样 inArray 就会丢失参考字段值。

有谁知道用ajax填充这个元素的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T13:32:50.663

从 2.2 版开始，Zend Framework 提供了**禁用 inArray 验证器**调用的功能：

```
$element->setDisableInArrayValidator(false); 
```

或将**选项**传递给元素：

```
'disable_inarray_validator' => false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:43:36.933

实际上，此时似乎无法禁用验证器；但是，您可以覆盖 select 元素，以便能够删除此特定情况的验证器：

```
use Zend\Form\Element\Select;

class MySelect extends Select {
    public function getValidator() {
        return $this->validator;
    }
} 
```

基本上，当前选择元素的关键问题是，如果验证器不存在；它会创建它。您在这里的另一个选择是手动设置验证器；您可能应该做的是手动创建一个 InArrayValidator 并使用来自您的 AJAX 调用的潜在选项填充它。在这种情况下，您需要在上面添加一个 setter。

# c - 在 yacc 中连接字符串

> ID：14450288
> 
> 赞同：2
> 
> 时间：2013-01-22T01:45:09.960
> 
> 标签：c, bison, yacc, flex-lexer

我似乎无法弄清楚如何在 yacc 中连接两个字符串。

这是 lex 代码

```
%{
#include <stdio.h>
#include "y.tab.h"
%}
%%
[0-9]+ {yylval.intval=atoi(yytext); return NR;}
[a-zA-Z]+ {yylval.strval=yytext; return STR;}
"0exit" {return 0;}
[ \t] ;
\n {return 0;}
. {return yytext[0];} 
```

在这里我有添加两个字符串的基础知识

```
%{
#include <stdio.h>
#include <string.h>
%}
%union {
int intval;
char* strval;
}
%token STR NR
%type <intval>NR
%type <strval>STR
%type <strval>operatie
%left '+' '-'
%right '='
%start S
%%
S   : S operatie        {}
    | operatie          {printf("%s\n",$<strval>$);}
    ;

operatie    :   STR '+' STR {   char* s=malloc(sizeof(char)*(strlen($1)+strlen($3)+1));
                                strcpy(s,$1); strcat(s,$3);
                                $$=s;}
            ;
%%
int main(){
 yyparse();
} 
```

代码有效，问题是输出是这样的：如果我输入

> aaaa + bbbb

我得到输出

> aaaa + bbbbbbbb

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:59:24.370

问题在这里：

```
yylval.strval = yytext; 
```

yytext 随每个标记和每个缓冲区而变化。将其更改为

```
yylval.strval = strdup(yytext); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:56:20.993

`yytext`仅在词法分析器开始寻找下一个标记之前有效。因此，如果您想将字符串令牌从 (f)lex 传递给 yacc/bison，则需要`strdup`它，并且解析器代码需要释放副本。

请参阅[野牛常见问题解答](http://www.gnu.org/software/bison/manual/html_node/Strings-are-Destroyed.html#Strings-are-Destroyed)。

# php - 我应该将页面数据存储在 json 中吗？

> ID：14450292
> 
> 赞同：1
> 
> 时间：2013-01-22T01:45:39.983
> 
> 标签：php, json, codeigniter, content-management-system

我正在顶部 codeigniter 上用 php 5.3 编写一个 cms 系统。数据的内容，我已经确定，它的大小和形式都非常好，我想知道在 MySQL 中以 JSON 格式存储数据是否是一个不错的选择。我需要能够以结构化的方式存储数据，但它的结构化方式，字幕的数量会非常多，有时可能需要使用列表、表格或其他元素。

我想最终创建一个工具库来创建不同类型的站点，使该库非常模块化，以便您可以将其剥离到每个站点的最小占用空间。

JSON 是正确的选择，还是处理器密集型的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T01:48:43.547

MySQL中的JSON？不，不要那样做。

数组和结构很容易从 SQL 查询的结果构建，并且在需要时很容易转换为 JSON 格式（[json_encode()](http://us2.php.net/manual/en/function.json-encode.php)），这并不多，除非在创建 JavaScript 时。

另一个方向也很简单：将 JSON 转换为 PHP 数组/哈希表 ( [json_decode()](http://us2.php.net/manual/en/function.json-decode.php) ) 并使用它来创建 SQL 查询以更新或插入一组表。

# iphone - 使用 iphone 相机检测和识别数字

> ID：14450293
> 
> 赞同：0
> 
> 时间：2013-01-22T01:45:48.993
> 
> 标签：iphone, ios

是否可以让 iPhone 相机检测数字并将其转换为我可以在应用程序计算中使用的有效数字？

我确实看到了这个开源项目“Tesseract-iPhone-Demo-master”，但它不能正常工作。请问有什么提示可以帮助我解决这个想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:23:08.363

Tesseract 库只会为您提供图像上存在的文本。这个库不像你说的那么准确。对于 150 dpi 以上的高 dpi 图像，Tesseract 将为您提供最佳效果。之后，数字的所有验证都应由您自己完成，例如： NSString *originalString = @"This is my string. #1234";

```
NSString *numberString;
NSScanner *scanner = [NSScanner scannerWithString:yourString];
NSCharacterSet *numbers = [NSCharacterSet characterSetWithCharactersInString:@"0123456789"];
[scanner scanCharactersFromSet:numbers intoString:&numberString];
int number = [numberString integerValue]; 
```

# objective-c - 无法在类别中实现核心数据验证

> ID：14450294
> 
> 赞同：0
> 
> 时间：2013-01-22T01:45:52.253
> 
> 标签：objective-c, core-data

我正在核心数据中实现验证功能，如下所示：

```
- (BOOL)validateMovementId:(id)value error:(NSError **)error {

NSString * idValue = (NSString *) value;
Movement * m = [Movement loadMovement:idValue context:self.managedObjectContext];

if(m != nil)
    return NO;

return YES;  } 
```

我在底层核心数据模型类上使用了一个类别，这样我就可以使用 XCode 自动重写这些类，而不会丢失我的添加。这适用于除上述方法之外的所有方法，当我保存托管上下文时，它会在方法本身上给我一个 EXC_BAD_ACCESS。

事情是这样的：将此函数移出类别并移入基类可以解决问题。我猜这是因为当 Core Data 去保存上下文时，它不是使用我的类别而是使用基类，因此指针无效。有没有办法使用类别来实现验证，或者是否有必要对自动生成的对象进行子类化才能做到这一点，并且仍然保留使用 XCode 自动重写它们的能力？

# c# - 标记扩展和对象创建

> ID：14450295
> 
> 赞同：0
> 
> 时间：2013-01-22T01:45:59.323
> 
> 标签：c#, wpf, markup-extensions

目前我有这样的标记

```
<TextBlock>
  <TextBlock.Text>
    <Binding Path="Value" ElementName="window" ConverterParameter="M">
      <Binding.Converter>
        <local:DatePartValueConverter />
      </Binding.Converter>
     </Binding>
  </TextBlock.Text>
</TextBlock> 
```

我想把它缩短成这样

```
<TextBlock Text="{Binding Path=Value,ElementName=window,
  ConverterParameter=M,Converter={local:DatePartValueConverter}}" /> 
```

但是编译器会出错，因为 DatePartValueConverter 不是从 MarkupExtension 派生的。没有其他方法可以获取短格式标记来创建 DatePartValueConverter 的实例吗？

顺便说一句，我尝试从 MarkupExtension 派生，它确实解决了问题。我的 ProvideValue 实现看起来像这样

```
public override object ProvideValue(IServiceProvider serviceProvider)
{
  return new DatePartValueConverter();
} 
```

它有效，但我仍然不清楚它的起源和性质，`serviceProvider`以及人们可能会用它做什么。

有趣的是，当我在使用此标记扩展的绑定上使用 Visual Studio 2012 绑定编辑器时，它立即再次扩展它，使整个标记扩展支持变得毫无意义。

我可能应该提到，我需要为每个绑定提供一个私有实例，因为它维护内部状态 - 它需要知道整个 DateTime 值来设置某些方面，就像这样

```
public object ConvertBack(object value, Type targetType, 
  object parameter, System.Globalization.CultureInfo culture)
{
  culture = System.Globalization.CultureInfo.CurrentCulture;
  var strValue = value as string;
  int y = _value.Year, M = _value.Month, d = _value.Day,
    H = _value.Hour, m = _value.Minute, s = _value.Second;
  if (strValue == null)
    return null;
  else
  {
    string p = parameter as string;
    switch (p)
    {
      case "yyyy":
        y = int.Parse(strValue); break;
      case "yy":
        y = (strValue.Length == 4) ?
          int.Parse(strValue) :
          int.Parse(DateTime.Now.Year.ToString().Substring(0, 2) + strValue);
        break;
      case "M":
      case "MM":
        M = int.Parse(strValue); break;
      ...
    }
  }
  return new DateTime(y, M, d, H, m, s);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:51:12.033

您可以创建一个实例`DatePartValueConverter`作为资源，然后使用它。

```
<Window.Resources>
  <local:DatePartValueConverter x:Key="datePartValueConverter" />
</Window.Resources>

<TextBlock Text="{Binding Path=Value, ElementName=window,
  ConverterParameter=M, Converter={StaticResource datePartValueConverter}}" /> 
```

*编辑*如果您确实想制作转换器，`MarkupExtension`那么您可以这样做。您可以返回一个新实例，`ProvideValue`也可以返回当前实例`return this;`

通过返回当前实例，您可以在转换器中拥有属性，并允许您执行此类操作。

```
public class DatePartValueConverter : MarkupExtension, IValueConverter {
    public string ParseType { get; set; }
    // other methods
}

<TextBlock Text="{Binding Path=Value, ElementName=window,
  Converter={local:DatePartValueConverter ParseType=M}}" /> 
```

至于`IServiceProvider`看[MarkupExtension.ProvideValue — IServiceProvider 是否实际使用？](https://stackoverflow.com/questions/7423511/markupextension-providevalue-is-the-iserviceprovider-actually-used)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:55:50.110

除了从我知道的派生您的转换器之外的唯一方法`MarkupExtension`是创建您自己的自定义绑定类（看看[`DelayBinding`](http://www.paulstovell.com/wpf-delaybinding)）。

# algorithm - 如何用未知的加密算法解密字符串？

> ID：14450298
> 
> 赞同：4
> 
> 时间：2013-01-22T01:46:21.790
> 
> 标签：algorithm, encryption

如何用未知的加密算法解密字符串？

有一个字符串：

5aaC5p6c5L2g5a + 55oiR5Lus5Zyo5YGa55qE5LqL5oOF5pyJ5YW06Laj77yM5bm25LiU5a + 5cmFpbHMv5YmN56uv5byA5Y + R5pyJ6Ieq5L + h77yM5qyi6L + O5Y + R6YCB6YKu5Lu25YiwZ2hvc3RtNTVAZ2l0Y2FmZS5jb23pooTnuqbkuqTmtYHml7bpl7TvvIznoa7lrprkuYvlkI7lj6 / ku6Xnm7TmjqXmnaXliLDmiJHku6znmoTlt6XkvZzlrqTlj4Lop4LkuqTmtYHvvIzosKLosKIK

我不知道加密算法。如何解密？

要分析和解决这个问题，我应该学习什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T01:47:58.757

它不是加密算法，它是base64。您可以通过 +s 来判断。

[http://www.opinionatedgeek.com/dotnet/tools/base64decode/](http://www.opinionatedgeek.com/dotnet/tools/base64decode/)

尝试通过这个页面运行它，它会变成这样：

如果你对在做的有兴趣的事情，并且对rails/之后我们开发有信心，欢迎发送邮件到ghostm55@gitfe.com 预约交流时间，确定可以直接参加我们的工作室参观交流，谢谢

注意：如果它实际上是加密的，而你实际上不知道它是用什么加密的，你会被搞砸的，因为任何好的加密算法都会将输出变成毫无意义的乱码，没有密钥就无法使用。Base64 没有密钥，你可以每次都用同样的方式反转它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:48:03.340

此字符串似乎是 Base64 编码的字符串。

解码后的值为：如果你对在做的事情有兴趣，并且对rails/前端我们有信心，欢迎发送邮件到hostm55@gitcafe.com 预约交流时间，确定之后可以直接的工作室参观交流，谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T01:49:32.547

好吧，字符串很可能是 Base64 编码的。如果你解码它，你应该得到一个有效的随机二进制数据，如果它被加密（编辑：正如其他人所展示的，它没有被加密，但如果是的话，以下内容仍然适用）

通过检查长度，您可以确定密码的块大小。如果它不是一个偶数块大小，它可能是流密码（或在流模式下操作的块密码）。

然而，任何更多的信息都需要从其他来源获得——因为良好加密的重点是使数据真正不透明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-20T09:58:55.917

其Base 64加密。以上代码翻译为：

如果你对在做的有兴趣的事情，并且对rails/之后我们开发有信心，欢迎发送邮件到ghostm55@gitfe.com 预约交流时间，确定可以直接参加我们的工作室参观交流，谢谢

“如果你做我们感兴趣的事情，并且对rails/前端开发者有信心，请发邮件沟通ghostm55@gitcafe.com预约时间，确定后直接来我们工作室交流参观，谢谢你”

# android - 使用共享首选项在列表视图中显示特定项目

> ID：14450310
> 
> 赞同：3
> 
> 时间：2013-01-22T01:48:02.663
> 
> 标签：android, listview, xml-parsing, sharedpreferences

我有一个 Rss 提要，我正在将其解析为列表视图。我试图用它做的是当用户第一次加载应用程序时，它会保存日期或类似的东西，然后只显示列表的第一天。然后，当用户在第二天登录时，它会从偏好中记住该日期并添加一个，并在列表视图中显示第一天和第二天，依此类推。此外，如果用户有几天没有打开应用程序，它还需要显示用户错过的日期。例如，用户在第一天和第二天打开应用程序并看到这些文章，然后直到第 5 天才打开应用程序，他们仍然需要查看列表中的第 1-5 天。我认为我可以使用共享偏好来完成所有这些工作，但是我没有使用任何共享偏好并且没有 没有找到任何可以涵盖我在这里尝试做的任何事情的教程。我将在这里列出我正在使用的代码。如果有人愿意和我一起解决这个问题，我将不胜感激。

xml 解析活动和列表视图

```
public class AndroidXMLParsingActivity extends ListActivity {

// All static variables
static final String URL = "http://www.cpcofc.org/devoapp.xml";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "item";
static final String KEY_NAME = "title";
static final String KEY_COST = "description";
static final String KEY_DESC = "description";
static final String KEY_GUID = "guid";
static final String KEY_LINK = "link";

ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_COST, parser.getValue(e, KEY_COST));
        map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
        map.put(KEY_GUID, parser.getValue(e, KEY_GUID));
        map.put(KEY_LINK, parser.getValue(e,KEY_LINK));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_DESC, KEY_NAME, KEY_COST, KEY_GUID}, new int[] {
                    R.id.desciption, R.id.name, R.id.cost});

    setListAdapter(adapter);

    Collections.reverse(menuItems);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();
            Uri uriUrl = Uri.parse(menuItems.get(position).get(KEY_GUID));

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_COST, cost);

            // **NEED TO PASS STRING OBJECT NOT URI OBJECT**
            in.putExtra(KEY_GUID, uriUrl.toString());
            startActivity(in);

        }
    });
}
} 
```

这是现在的样子

![在此处输入图像描述](../Images/6f4c0abf660da38ad40d125119c1eb13.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:28:52.983

检查 SharedPreferences 的文档，[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)，我认为在这种情况下您需要的只是将值获取/放入 SharedPreferences，例如

```
public static String getPreference(Application application, String key) {
    try {
        SharedPreferences preference = PreferenceManager.getDefaultSharedPreferences(application);
        return preference.getString(key, "");
    } catch (Exception e) {
        return ""
    }
}

public static void putPreference(Application application, String key, String value) {
    try {
        SharedPreferences preference = PreferenceManager.getDefaultSharedPreferences(application);
        preference.edit().putString(key, value).commit();
    } catch (Exception e) {
        Log.d("...", e.getMessage());
    }
} 
```

操作 SharedPreference 很简单，但要实现您的需求，您需要考虑如何设计 SharedPreferences 的键。

一个快速的想法是key可以形成为'post-20130101'，'post-20130102'等。在这种情况下，你可以将日期字符串放入key中，当你想在一个时期内获取rss数据时，你然后可以构建相应的密钥。您可以尝试 SharedPreferences.getAll() 来获取所有数据，然后根据内存中的日期进行过滤。

但是，我认为另一种选择是使用 sqlite 数据库。在我看来，使用 sql 过滤日期列更适合这种需求。

# image - 将图像从文件夹重定向到文件夹

> ID：14450314
> 
> 赞同：1
> 
> 时间：2013-01-22T01:48:22.840
> 
> 标签：image, .htaccess, mod-rewrite, redirect, directory

我有一个包含 15000 张图像的文件夹，我决定将它们放在 10 个文件夹中。

我拥有 15000 张图片的初始文件夹网址是：

```
www.mysite.com/images/games/ 
```

新文件夹的网址是：

```
www.mysite.com/images/games/1/  
www.mysite.com/images/games/2/  
www.mysite.com/images/games/3/  
www.mysite.com/images/games/4/  
www.mysite.com/images/games/5/  
www.mysite.com/images/games/6/  
www.mysite.com/images/games/7/  
www.mysite.com/images/games/8/  
www.mysite.com/images/games/9/  
www.mysite.com/images/games/10/ 
```

如何重定向我的图像以匹配其正确的文件夹以消除 404 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:04:35.033

就像我喜欢引用[When Not To Use Rewrite](http://wiki.apache.org/httpd/WhenNotToUseRewrite)一样，这实际上是一种需要的情况`mod_rewrite`。

**你没有说你是如何在十个新目录之间分配你的图像的**，但我假设图像是编号的（例如`00001.png`，，`00002.png`... `15000.png`）。然后你用最后一个数字来确定哪个图像进入哪个文件夹，即`00001.png`进入`1`目录，一直到`15000.png`哪个进入`10`目录（我想 - 你为什么不命名它`0`？）这就是你所做的，对吧?

**你没有提到你在这个网站上使用的是什么服务器**，所以我假设你使用的是 Apache，对吧？在这种情况下，您将编辑适当的配置文件（我开始尝试假设哪一个，但老实说，它可能是我能想到的四个中的任何一个，这取决于您是否拥有对 vhost 配置的编辑权限，或者在服务器，或者如果您使用的是 Debian 风格或 Red-Hat 风格的发行版，那么您*使用的是*Linux，对吗？**您没有说**。）您会确保`RewriteEngine On`某处有 a，然后您会这样做像这样的东西：

```
RewriteRule ^/images/games/(\d+)(\d)\.png$ /images/games/$2/$1$2.png 
```

...除了您将目录命名为`10`而不是`0`，因此所有以结尾的目录`0`都会被误导。也许我们应该试试这个？

```
RewriteRule ^/images/games/(\d+0)\.png$ /images/games/10/$1.png [L]
RewriteRule ^/images/games/(\d+)([1-9])\.png$ /images/games/$2/$1$2.png [L] 
```

...并首先捕捉 0，然后是其他所有内容。

我会检查这个答案，但你没有给我们足够的信息来知道如何做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T03:19:12.793

鉴于您在上述评论中的扩展：

> 我知道哪些图像放在哪个文件夹，但它是一个很大的列表

我建议将该列表放在一个文本文件中，并使用查找和替换（或`awk`？）将该列表转换为`mod_redirect`规则，例如

```
Redirect /images/games/oldname /images/games/8/oldname 
```

然后将它们粘贴到配置文件中。如果没有实际的算法来确定这些是如何分类到目录中的，那么就没有可以重定向请求的程序，因为它需要一个公式来工作。

# python - 例外。从一个类的子类继承？

> ID：14450322
> 
> 赞同：-2
> 
> 时间：2013-01-22T01:49:25.550
> 
> 标签：python, python-3.x

我收到此错误：

> builtins.TypeError：不允许捕获不继承自 BaseException 的类

```
class a(object):
      pass
class b(a):
      pass
class c(b):
      pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:17:35.510

我相信这可以按预期工作：

```
class a(Exception):
      pass
class b(a):
      pass
class c(b):
      pass

raise c("my c is bad!") 
```

印刷：`__main__.c: my c is bad!`

您可以通过这种方式获取异常的字符串：

```
>>> try:
...    raise c('This is C talking to you')
... except c as s:
...    print(s)
... 
This is C talking to you 
```

**编辑** *根据您的问题和评论中的少量内容*，这是一种可以使用多个类/子类的方法`Exception`：

```
>>> x=1
>>> try:
...    if x==1: raise b('x is 1!!!')
...    else: raise c('I guess x is not 1')
... except (b,c) as s:
...    print(s)
... 
x is 1!!! 
```

但是，您也可能将一个类的不同*实例*与一个类的子类混为一谈。你也可以尝试这样的事情：

```
class MyException(Exception):
    def __init__(self,value):
        self.value=value

    def __str__(self):
        return repr(self.value)

# INSTANCES of MyException class:
e1=MyException(1)           # the int argument becomes the error
e2=MyException('22')        # another instance with a string
e3=MyException({1:33})      # third instance with a dictionary as the result

def f(e):
    try:
        raise MyException, e
    except MyException as s:
        return s    

for e in (e1,e2,e3): 
    print(f(e)) 
```

印刷：

```
1
'22'
{1: 33} 
```

请注意 e1、e2 和 e3 以及 MyException 类的不同实例。`raise`支持调用一个类和该类的实例作为异常。

如果您真的在寻找分层错误类（一旦出现子类错误），[这里是](http://docs.python.org/3/tutorial/errors.html#user-defined-exceptions)Python 文档中的主题。我认为你不是。

# android - How to set the path to the assets folder in Android NDK using Irrlicht Engine?

> ID：14450326
> 
> 赞同：1
> 
> 时间：2013-01-22T01:49:56.027
> 
> 标签：android, path, android-ndk, assets, irrlicht

I want to know what is the path for the assets folder. I'm using Irrlicht Engine for render the graphics, and as you can see in the following code, I add a Folder File Archive to use the assets in the folder MyGameAssets that is located in the sd card directory.

```
//Create the irrlichtDevice
device = irr::createDevice(irr::video::EDT_OGLES1,
            irr::core::dimension2d<irr::u32>(screenWidth, screenHeight), 32,
            false, false, false, 0);

//With this path my Game can use the assets in the folder that is on SD card
device->getFileSystem()->addFolderFileArchive("/sdcard/myGameAssetsFolder/"); 
```

Whith those lines of code my Android Game works fine, but as I said before, I don't want to use the sdcard/MyGameAssetsFolder/. I want to use the Assets Folder of the Android Project. What could be the possible path? Is there any other solution in order to not to use the sdcard path?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:08:31.503

I'm guessing you're following "Android NDK Beginner's Guide" Book tutorial. I am too! and I'm having the same issue you are having.

Seems there's no way pure Native C++ can access the asset folder inside the apk. You have to make your app JNI so with Java you can pass the asset folder path to C++.

But, it seems there's also a way to use the AAssetManager inside android native glue library but I don't know how because there is no documentation about, not even inside the docs folder inside NDK folder.

# cpu-usage - 石墨图 CPU 使用率

> ID：14450327
> 
> 赞同：0
> 
> 时间：2013-01-22T01:49:59.210
> 
> 标签：cpu-usage, graphite

这有点棘手。我正在尝试以特定时间点的使用百分比来绘制 CPU 使用率。为此，我从中获取样本`/proc/stat`- 这些是绝对样本，它们看起来像这样：

```
app01.cpu.total.user    45997117    1358816118
app01.cpu.total.nice    165511          1358816118
app01.cpu.total.system  36679893    1358816118
app01.cpu.total.idle    3519926642  1358816118
app01.cpu.total.iowait  3854916         1358816118
app01.cpu.total.irq 2553            1358816118
app01.cpu.total.softirq 189828          1358816118
app01.cpu.total.steal   4497297         1358816118
app01.cpu.total.guest   0           1358816118 
```

我用来显示这些的功能是：

```
scale(divideSeries(stats.app01.cpu.total.user,sumSeries(stats.app01.cpu.total.*)), 100) 
```

基本上应该以百分比显示结果。我注意到当我绘制这样的图表时，我得到了相同的结果：

```
asPercent(stats.app01.cpu.total.user,sumSeries(stats.app01.cpu.total.*)) 
```

我的问题是，我注意到曲线在不断增长 - 只是很小的一部分，但它正在增长 - 我无法真正理解为什么。事实上，它应该是相当平坦的，并且根据采样时的 CPU 使用情况而下降和增长。我当然不会期望有增长的趋势。但我可能会遗漏一些东西，因此我转向这里寻求帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:29:37.370

报告的值`/proc/stat`是自系统首次启动以来在每个工作类别中花费的 CPU 时间总量的度量。为了测量某个时间点的 CPU 活动，您需要对这些值进行导数。

```
asPercent(derivative(stats.app01.cpu.total.user),
          sumSeries(derivative(stats.app01.cpu.total.*))) 
```

# javascript - Bootstrap Carousel Next/Prev 不起作用

> ID：14450328
> 
> 赞同：2
> 
> 时间：2013-01-22T01:50:01.277
> 
> 标签：javascript, twitter-bootstrap, carousel

我正在使用 Twitter Bootstrap Carousel，虽然我对 .js 不是很熟悉，但不知怎的，我的工作正常。

唯一的问题是下一个/上一个按钮的工作方式很奇怪。

这是我的临时网站： [http ://tokyo-flaneur.com/dl/donner/contents/menu.html](http://tokyo-flaneur.com/dl/donner/contents/menu.html)

虽然我有 10 张图片，但我无法通过单击下一步按钮到达第 10 位。在第三张图片之后，当我点击下一个按钮时，图片又回到了第二张。

此外，无论我在看哪个图像，当我单击上一个按钮时，它会一直返回到 No.1。

任何人都可以帮助我或指导我正确的方向吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:52:49.880

您使用自己的处理程序处理滑块的下一个/上一个按钮，因此它会滑动到第二个元素第一个，而不是尝试制作`next()`

代替：

```
$("#myCarousel a").click(function(e){ 
    var index = $(this).index(); 
    //when hitting NEXT button index always 2, for PREV - 0
    slider.carousel(index); 
    e.preventDefault(); 
}); 
```

和

```
$("#myCarousel .slider-pager a").click(function(e){ 
    var index = $(this).index(); 
    slider.carousel(index); 
    e.preventDefault(); 
}); 
```

在您的页面脚本中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-12T01:43:53.773

对于这个问题的未来访客：

使用属性`data-interval="false"`（引导 3.3.5）：

```
<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="false"> 
```

以下是 Bootstrap 3 中其他支持的轮播选项：

[http://getbootstrap.com/javascript/#carousel-usage](http://getbootstrap.com/javascript/#carousel-usage)

* * *

早期版本：

`[**jsFiddle Example**](http://jsfiddle.net/yv80533m/)`

```
<div id="myCarousel" class="carousel slide text-center" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item active">
            <h4>A mind-bending lecture on applied philosophy by Oxford lecturer Ravi Zacharias.</h4>
            <br>
            <span class="font-normal">youtube/watch?v=3ZZaoavCsYE</span>
        </div>
        <div class="item">
            <h4>Director of the Human Genome Project discusses the greatest mystery of life</h4>
            <br>
            <span class="font-normal">youtube/watch?v=EGu_VtbpWhE</span>
        </div>
    </div>

    <a href="" class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a href="" class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div><!-- #myCarousel -->

<script>
    $(function(){

        $('.carousel-control').click(function(e){
            e.preventDefault();
            $('#myCarousel').carousel( $(this).data() );
        });

    });//END document.ready
</script> 
```

* * *

*注意：此答案需要 jQuery，因此请确保已加载库。当然，bootstrap 需要 jQuery，所以你应该已经引用了它。*

# c# - 具有非唯一索引的列表

> ID：14450332
> 
> 赞同：2
> 
> 时间：2013-01-22T01:50:31.633
> 
> 标签：c#

我一直认为 any 索引应该是唯一的，但我认为至少对于 SQL Server 而言并非如此，如下面的帖子所示：

[聚集索引必须是唯一的吗？](https://stackoverflow.com/questions/4332982/do-clustered-indexes-have-to-be-unique)

最近我不得不在一个集合中存储大量数据，并考虑使用字典，因为它是通过索引获取对象的最快集合。但是我的收藏必须允许重复的键。但实际上重复的键不会成为问题，因为返回的任何对象都会满足要求（对象并不完全唯一，但键会）。

更多的研究使我发表了以下文章：

[C# Hashset 包含非唯一对象](https://stackoverflow.com/questions/4598826/c-sharp-hashset-contains-non-unique-objects)

这显示了一种使用“重复键”获取 HashSet 的方法。他的问题将是我的解决方案，但我想知道是否有任何其他方式可以让我拥有一个包含重复键的列表，这使我可以非常快速地搜索，而无需采取任何解决方法来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:10:35.017

> “重复的索引不会成为问题，因为它们中的任何一个都符合要求”

如果这样，您的意思是在按索引检索项目时，获取针对相同索引值存储的任何项目会让您满意，那么简单`Dictionary`就足够了。

例如

```
Dictionary<int, string> myData = new Dictionary<int, string>();

myData[1] = "foo";
myData[2] = "bar";
myData[2] = "baz"; // overwrites "bar"

var myDatum = myData[2]; // retrievs "baz" not "bar", but this is satisfactory. 
```

# javascript - 显示隐藏脚本在 JQuery 中不起作用？

> ID：14450335
> 
> 赞同：0
> 
> 时间：2013-01-22T01:50:39.987
> 
> 标签：javascript, jquery, html

我知道有很多方法可以在 jquery 中进行显示隐藏，但我只是想知道为什么下面不起作用。我在尝试调试时收到 [object Object] 作为警报

```
alert($("div.$(this).attr('class')")) 
```

我的脚本如下所示：

```
$(".blocks").hide(); 
$("div.$(this).attr('class')").show(); 
```

任何想法，如何解决这个问题，或者确保 `alert($("div.$(this).attr('class')"))`返回类名而不是对象对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T01:53:12.233

你拥有它的方式，`$(this).attr('class')`实际上就是它所说的。这只是一个字符串。

您需要将其连接起来：

```
$("div." + $(this).attr('class')).show(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T01:53:13.157

你不能像这样嵌套`$(this)`在你的选择器中。

```
$("div." + $(this).attr('class')).show(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T01:53:23.483

您应该连接字符串：

```
$("div." + $(this).attr('class')).show(); 
```

或者：

```
$("div." + this.className).show(); 
```

请注意，对象的`alert()`返回值，请改用。`[Object object]``console.log()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T01:54:48.967

只是为了与众不同...

```
$("div." + this.className).show(); 
```

如果你没有 jQuery...

```
[].forEach.call(document.querySelectorAll("div." + className), function(element) {
     element.style.display = "";
}); 
```

如果你被困在旧的浏览器领域......

```
var div = document.getElementsByTagName("div");

for (var i = 0, len = div.length; i < div; i++) {
    if (div[i].className == className) {
         div[i].style.display = "";
    }
} 
```

将`display`属性设置为空字符串使其使用该元素的默认值。

# android - “未找到兼容的目标”eclipse adt 插件错误

> ID：14450342
> 
> 赞同：0
> 
> 时间：2013-01-22T01:51:58.800
> 
> 标签：android, eclipse, android-version

我不明白...在我的办公室里，我安装了 Eclipse + Android SDK (API 16) + ADT 插件来开发我自己的应用程序。当我将它安装在我的 Galaxy Tab 和 Galaxy Nexus 上时，什么也没发生，而且运行良好。但是当我在我家的笔记本电脑上安装所有这些并导入 eclipse 项目以在我的设备上再次安装它时，ADT 显示消息：“未找到兼容的目标”。尽管它是同一个项目，但我没有改变任何东西，软件也是一样的......

什么可能导致此问题？有任何想法吗？

我在这个星期三开会开始销售该应用程序，如果有人能在那天之前回答我，那就太好了！xD

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:18:59.473

手机的 ADB 驱动程序是否工作/安装在笔记本电脑上？

如果您使用 Windows 检查设备管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:23:03.393

听起来您的 Eclipse 上没有安装正确版本的 SDK。您需要确保您已使用“SDK 管理器”安装正确的 Android 版本，您的构建正在编译为您所期望的（在 AndroidManifest.xml 中设置），并且您的模拟器或设备以该版本为目标您期望的操作系统。

我的问题是您没有下载正确的 Android SDK。

# vb.net - 如何比较 RectangleF 列表？

> ID：14450343
> 
> 赞同：0
> 
> 时间：2013-01-22T01:52:00.430
> 
> 标签：vb.net, list, overriding, comparable, rectangles

我想以某种方式对 List(Of RectangleF) 进行排序。

它会很大，所以我宁愿不必创建一个单独的类来实现 Comparable -

是否有可能以某种方式覆盖 RectangleF 本身，添加一个 Comparable，并覆盖一个 CompareTo 以通过 X 进行比较？

我正在使用 VB.NET，但我也将不胜感激 C# 建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:07:54.043

您可以使用 LINQ 的`OrderBy`方法进行排序，但您可以选择。

例如，如果你想按 X 对列表进行排序，你可以这样做：

```
Dim orderedByX = theList.OrderBy(Function(rect) rect.X) 
```

# ruby-on-rails - Mongoid 最小聚合返回不正确的值

> ID：14450345
> 
> 赞同：0
> 
> 时间：2013-01-22T01:52:32.953
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我有一个名为数据的集合。每个文档看起来像这样：

```
x: {"value"=>1358747699.6922424}, y: {"value"=>17.9} 
```

此外，我在 x.value 和 y.value 上有索引。使用内置的 mongoid 聚合 .min，我想获得最小的 y 值。我试过这样做：

```
data.min(:'y.value') 
```

它返回 16.2，我知道这是不正确的，它应该是 14.4，我可以证明：

```
data.map{|d| d['y']d['value']}.sort.first 
```

返回 14.4

或者：

```
data.order_by([:'y.value', :asc]).limit(1).first['y']['value'] 
```

也返回 14.4

所以我无法弄清楚为什么 .min 似乎无法正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:05:53.770

**简答**

在您的情况下，只需忽略`min`Mongoid 提供的功能。改用你想出的那个：

```
data.order_by([:'y.value', :asc]).limit(1).first['y']['value'] 
```

**解释**

我深入研究了 Mongoid 聚合是如何实现的。原来他们使用`map_reduce`运行整个集合的 a 。[[1]](https://github.com/mongoid/mongoid/blob/master/lib/mongoid/contextual/aggregable/mongo.rb)

您编写的查询应该更有效率，因为它可以使用您构建的索引`y.value`。这意味着 1 索引查找与整个集合（更不用说它实际上有效......）。

检查 MongoDB 分析器以确保您的索引实际上正在被使用。[[2]](http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/)

**你实际问的问题**

至于`min`失败的确切原因，我不知所措。`map_reduce`如果没有看到您的数据，我看不出底层证券失败的任何原因。也许它与嵌入字段有关，或者可能`this.y.value`没有为某些对象定义。

这是一个回馈开源的机会。尝试发布到[Mongoid 问题板](https://github.com/mongoid/mongoid/issues)。如果你这样做，一定要交联。我想看看这个解决方案。

# php - 在纯 mysql 而不是 php 中批量更新？

> ID：14450346
> 
> 赞同：0
> 
> 时间：2013-01-22T01:52:41.460
> 
> 标签：php, mysql

我正在使用以下 php 代码将产品的最低价格从“价格”表放置到“产品”表中。

我有大约 10.000 种产品，每个产品的价格超过 500 个，因此任务相当艰巨。

是否可以在没有任何 php 代码的单个 mysql 查询中执行此操作？

```
 $last_year_date = date("Y-m-d",strtotime('first day of last year'));

 for ($i=1; $i<=10000; $i++){ 

 $query_min_p = "SELECT min(price) as min FROM prices WHERE (product_id = {$i} AND price > 0 AND price_date >= '".$last_year_date."' )";
 $result_min_p = mysql_query($query_min_p);

        while($row = mysql_fetch_array($result_min_p)){
             if ($row['min'] > 0 ){
                $query = "UPDATE products SET min_p = '".$row['min']."' WHERE (product_id = {$i})";
                $result = mysql_query($query);                 
             }
        }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:55:31.337

您可以在 中包含子查询`update`，如下所示：

```
update products
    set min_p = (select min(price) from prices where prices.product_id = product.product_id) 
```

如果您有价格索引（product_id，价格），这将运行得更快。

# jquery - TinyMCE - 从其他文本区域加载 Html

> ID：14450363
> 
> 赞同：1
> 
> 时间：2013-01-22T01:55:46.153
> 
> 标签：jquery, tinymce

我将 html 加载到一系列 textareas 中，我给出了 display:none; 的样式。然后我有一个不错的下拉菜单，其中包含保存每个 textarea 的 ID 属性值的选项。

我让 jquery 监听下拉列表的变化，当检测到 ID 时，我使用可爱的 TinyMCE 插件将相应文本区域的值加载到主文本区域中。

没有 TinyMCE，一切正常。但是编辑器不会显示动态加载的 html 文本。

谁能看到我做错了什么？

代码：

```
<textarea id="template1"><div>Some html <b>inside this textarea</b><br>And more</textarea>
<textarea id="template2"><div>More html <b>inside this textarea</b><br>And more</textarea>

<select name="templateid" id="templateid"> 
  <option value="0">-------------</option>
  <option value="1">Load Template 1</option>
  <option value="2">Load Template 2</option>
</select>

<textarea id="maintemplate"></textarea>

<script language="javascript" type="text/javascript">
$(document).ready(function(){

$("#templateid").change(function(){ 
    var templateid = $(this).val();
    if(templateid == 0){ $("#templatetext").val(""); return false; }
    var html = $("#template"+templateid).val();
    $("#maintemplate").val(html); // this is ignored?
    return false;   
});

$("textarea#maintemplate").tinymce({
    script_url : '/includes/modules/tiny_mce/tiny_mce.js',// Location of TinyMCE script
    // General options
    theme : "advanced",
    plugins : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",
    force_p_newlines : false,
    force_br_newlines : true,
    /*forced_root_block : '',*/
    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleprops,forecolor,backcolor,|,link,unlink,image,|,bullist,numlist,removeformat,code,|,cleanup,preview",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_buttons4 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,
});

});
</script> 
```

你会看到：`$("#maintemplate").val(html);`是我加载其他文本区域的值的地方。但是编辑器只是没有显示它。（没有编辑器，它可以工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:32:08.947

**谁能看到我做错了什么？**

这是您的代码的工作[演示](http://fiddle.tinymce.com/69caab/1)（按原样粘贴）....

我唯一能指出的是你没有加载

```
<script type="text/javascript" src="../jscripts/tiny_mce/jquery.tinymce.js"></script> 
```

希望能帮助到你！！！

# c++ - Link2019：调用对话框 qt 的未解析外部符号

> ID：14450365
> 
> 赞同：2
> 
> 时间：2013-01-22T01:56:05.390
> 
> 标签：c++, qt

我对 QT 编程有点陌生，当我试图让程序打开一个我通过按下按钮创建的新对话框时，我遇到了这个奇怪的错误。

我正在尝试通过按下按钮打开`table.ui`、`robotdance.ui`和`graph.ui`from 。`scouting.ui`在`scouting.cpp`：

```
table *teamtable = new table(this); teamtable->show(); 
```

我已将 .ui 的头文件包含在 .ui 中`scouting.cpp`，但它给了我这个错误：

> 侦察.obj:-1:
> 
> 错误：LNK2019：未解析的外部符号“public：__thiscall graph::graph(class QWidget *)”(??0graph@@QAE@PAVQWidget@@@Z) 在函数“private:void __thiscall Scouting::on_actionGraphs_triggered(void) " (?on_actionGraphs_triggered@Scouting@@AAEXXZ)

显示了另外两个与此类似的错误。

为什么会这样？我按照这个人的教程做了他所做的，但他似乎没有遇到任何错误。

```
scouting.cpp: 
```

[http://pastebin.com/NEEu9jmM](http://pastebin.com/NEEu9jmM)

```
table.h: 
```

[http://pastebin.com/BMDCkcwJ](http://pastebin.com/BMDCkcwJ)

```
table.cpp 
```

在附加评论部分，因为我不能发布超过 2 个链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T11:24:51.993

我相信您正在 Windows 上构建您的应用程序。我怀疑 Visual Studio 项目文件未使用添加的文件进行更新，这导致了问题。只需删除 Visual Studio 构建文件夹，然后重新构建。它会正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:10:44.617

通常有两个可能的原因：

* * *

A）您没有将`graph.cpp`（和其他`.cpp`文件）添加到您的`.pro`文件中

* * *

B）你的头文件看起来有点像这样

```
class graph : public QWidget
{
public:
    graph( QWidget* parent );
    ~graph();

    ...
} 
```

但您的源文件 (.cpp) 不包含以下内容：

```
#include "graph.h"

graph::graph( QWidget* parent ) :
    QWidget( parent )
{
    ...
}

graph::~graph()
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T15:46:56.123

这是来自无法将所有目标文件链接在一起的链接器的错误。

*   您的头文件和源文件添加到您的项目？
*   如果您在 Qt 中使用任何库，您可以将它们添加到您的项目`.pro`文件中（例如`QT += core gui webkitwidgets network`：）
*   添加您在代码中使用的所有类的库指令。（如`#include <QDialog>`）
*   不要忘记从项目路径中删除所有编译器生成的输出目录，注意**不要**删除项目的源目录，删除项目的输出目录后首先右键单击您的项目，然后单击`Run qmake`然后构建您的项目。

# r - R 中的 Predict.lm 无法识别新数据

> ID：14450366
> 
> 赞同：1
> 
> 时间：2013-01-22T01:56:11.707
> 
> 标签：r, lm, predict

我正在运行线性回归，其中预测变量按另一个值分类，并且无法为新数据生成建模响应。

首先，我为预测变量和误差项生成一些随机值。然后我构建响应。请注意，预测变量的系数取决于分类变量的值。我根据预测变量及其类别组成了一个设计矩阵。

```
set.seed(1)

category = c(rep("red", 5), rep("blue",5))
x1 = rnorm(10, mean = 1, sd = 1)
err = rnorm(10, mean = 0, sd = 1)

y = ifelse(category == "red", x1 * 2, x1 * 3)
y = y + err

df = data.frame(x1 = x1, category = category)

dm = as.data.frame(model.matrix(~ category + 0, data = df))
dm = dm * df$x1

fit = lm(y ~ as.matrix(dm) + 0, data = df)

# This line will not produce a warning
predictOne = predict.lm(fit, newdata = dm)

# This line WILL produce a warning
predictTwo = predict.lm(fit, newdata = dm[1:5,]) 
```

警告是：

> 'newdata' 有 5 行，但发现的变量有 10 行

除非我错了，否则我不应该对变量名有任何问题。（在这个板上有一个或两个讨论暗示了这个问题。）请注意，第一个预测运行良好，但第二个没有。唯一的变化是第二个预测只使用了设计矩阵的前五行。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T02:42:10.617

我不是 100% 确定您要做什么，但我认为对公式如何工作的简短演练将为您解决问题。

基本思想很简单：你传递两个东西，一个公式和一个数据框。公式中的术语都应该**是**数据框中变量的名称。

现在，您可以`lm`在不完全遵循该准则的情况下开始工作，但您只是要求出现问题。所以停下来看看你的模型规格，想想 R 在哪里寻找东西。

当您调用时`lm`，您的公式中的任何名称实际上都不会在数据框中找到`df`。所以我怀疑它`df`根本没有被使用。

然后，如果你打电话`model.frame(fit)`，你会看到 R 认为你的变量应该被调用。注意到有什么奇怪的吗？

```
model.frame(fit)
            y as.matrix(dm).categoryblue as.matrix(dm).categoryred
1   2.2588735                  0.0000000                 0.3735462
2   2.7571299                  0.0000000                 1.1836433
3  -0.2924978                  0.0000000                 0.1643714
4   2.9758617                  0.0000000                 2.5952808
5   3.7839465                  0.0000000                 1.3295078
6   0.4936612                  0.1795316                 0.0000000
7   4.4460969                  1.4874291                 0.0000000
8   6.1588103                  1.7383247                 0.0000000
9   5.5485653                  1.5757814                 0.0000000
10  2.6777362                  0.6946116                 0.0000000 
```

有什么叫`as.matrix(dm).categoryblue`进来的`dm`吗？是的，我不这么认为。

我怀疑（但不确定）你打算做更多这样的事情：

```
df$y <- y
fit <- lm(y~category - 1,data = df) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:07:30.797

乔兰走在正确的轨道上。该问题与列名有关。我想做的是创建我自己的设计矩阵，而这恰好是我不需要做的。如果使用以下代码行运行模型，则一帆风顺：

```
fit = lm(y ~ x1:category + 0, data = df) 
```

该公式指定将取代设计矩阵的手动构建。

使用我自己的设计矩阵是我过去做过的事情，拟合参数和诊断就像他们应该做的那样。我没有使用 predict 函数，所以从不知道 R 正在丢弃“data =”参数。警告会很酷。R是一个严厉的情妇。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-01T10:54:45.733

这可能会有所帮助。将新数据转换为`data.frame`，例如：

```
x = 1:5
y = c(2,4,6,8,10)

fit = lm(y ~ x)

# PREDICTION
newx = c(3,5,7)

predict(fit, data.frame(x=newx)) 
```

# java - 以前运行的程序，现在给出ArrayIndexOutOfBounds Exception？

> ID：14450368
> 
> 赞同：1
> 
> 时间：2013-01-22T01:56:21.210
> 
> 标签：java, buffer, image, indexoutofboundsexception

我正在尝试运行我的老师在网上发布的代码。它将图像作为输入`(BufferedImage img = ImageIO.read(new File(args[0]));`

我第一次运行它时它运行良好，现在它`ArrayIndexOutOfBounds`在上面的行中给了我异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:58:17.150

也许你没有传递任何命令行参数？然后 args 的长度为 0 并且 [0] 会导致数组索引越界异常。

# javascript - 使用 CSS/Javascript 将侧边栏 div 与另一个 div 切换

> ID：14450369
> 
> 赞同：3
> 
> 时间：2013-01-22T01:56:24.643
> 
> 标签：javascript, css, toggle

这是我的情况：

所以我试图通过单击另一个 div 来切换侧边栏。它是一个 100% 高度的侧边栏，固定在视口的右侧。本质上，我试图在 50px 宽的切换 div 和 250px 宽的侧边栏 div 周围包裹一个 300px 的 div，并且我想使用负边距右像素值隐藏侧边栏部分。使用 .toggle:active 选择器（因此在单击切换 div 时会发生这种情况），我想通过将边距右像素值设置回 0px 来显示侧边栏部分。

到目前为止的代码：

```
<div class="wrapper">
  <a href="#">
    <div class="toggle">Toggle</div>
  </a>
  <div class="cart">Cart</div>
</div> 
```

到目前为止的CSS：

```
.wrapper {
  position:fixed;
  width:300px;
  height:100%;
  background-color:orange;
  top:0;
  right:0;
  margin-right:-250px;
}
.toggle {
  position:relative;
  display:block;
  width:50px;
  height:100%;
  background-color:grey;
  float:left;
}
.toggle:active .wrapper {
  margin-right:0px;
}
.cart {
  position: relative;
  width:250px;
  height:100%;
  background-color:red;
  float:right;
} 
```

[这是jsfiddle！](http://jsfiddle.net/yJYJC/)

这是我的问题：

当 .toggle:active 使用时，如何定位 .wrapper 来更改 CSS 属性？另外，如何指定侧边栏何时可见，何时不可见？

我是 Javascript 新手，但由于回调函数，我似乎需要它来执行此操作。如果 CSS-only 是可能的，我会倾向于那个解决方案。请注意，我想使用 margin-right 以便稍后我可以选择使用 CSS 过渡来动画我的元素左右滑动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T02:57:28.803

## 仅 CSS 解决方案

演示：http: [//jsfiddle.net/Victornpb/yJYJC/30/](http://jsfiddle.net/Victornpb/yJYJC/30/)

只需使用这个：

```
/* Closed */
.wrapper{
    margin-right:-250px; 
}

/* Opened */
.wrapper:hover{
    margin-right:0px;
} 
```

## Javascript 解决方案

演示：http: [//jsfiddle.net/Victornpb/yJYJC/6/](http://jsfiddle.net/Victornpb/yJYJC/6/)

JS：

```
var wrapper = document.getElementsByClassName('wrapper')[0];
var toggle = document.getElementsByClassName('toggle')[0];

window.onload=function(){

    toggle.onclick=function(){
        wrapper.classList.toggle('opened'); 
    }

} 
```

CSS：

```
.wrapper{
    position:fixed;
    width:300px;
    height:100%;
    background-color:orange;
    top:0;
    right:0;
    margin-right:-250px;
}
.wrapper.opened{
    margin-right:0px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T02:39:26.743

仅 CSS 的解决方案（**[DEMO](http://jsfiddle.net/3MxRD/)**）：

```
<div class="wrapper">    
  <label for="toggle">
     Toggle
  </label>    
  <input id="toggle" type="checkbox" />
  <div class="cart">Cart</div>
</div> 
```

（隐藏的复选框用于确定切换状态）

```
#toggle {    
  display:none; /* hide checkbox */
}

/* the label associated with the checkbox (trigger) */
label{
  display:block;
}

/* move the div adjacent to the input (.cart) inside the visible area */
/* when the input is checked */
#toggle:checked ~ .cart{
  right:0;
}

/* the div that's being toggled */
.cart {
  position: absolute;
  width: 250px;
  height: 100%;
  right: -250px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T03:14:38.303

`:active`仅适用于链接（即`<a>`标签），因此不能用于`.toggle`，因为它是`<div>`. 即使你把它放在链接上，我认为它不会做你想做的事，也没有办法“瞄准”父母。有这样的`<a>`环境`<div>`也很奇怪，你不应该需要它。

所以，你需要javascript，是的。但是您不能真正针对 javascript 中的类。你有两个解决方案：

1.  如果您可以`id`向包装器添加一个，您可以在 javascript 中创建一个函数来切换侧边栏的状态：

    ```
    <div class="wrapper" id="myId">
        <a href="#">
            <div class="toggle"
                 onclick="document.getElementById('myId').style.marginRight = (document.getElementById('myId').style.marginRight == '0') ? '-250px' : '0';">Toggle</div>
        </a>
        <div class="cart">Cart</div>
    </div> 
    ```

    注意：该部分`(document.getElementById('myId').style.marginRight == '0') ? '-250px' : '0'`测试是否`margin-right`为 0，如果是，则将其更改为 -250px，反之亦然。我在这里所做的可能不是最好的方法，但我想把它限制在简短的范围内，这样你就可以这样使用它，如果你不太了解 javascript。当您更好地了解它时，您将能够改进它。此外，您必须将 div 放在您拥有的`onclick`每个`.toggle`div 上...您可以使用事件处理程序，但我很确定您不知道那是什么意思，简单地复制粘贴可能不是一个好主意. 你总是可以使用第二点，因为它使事情相对容易理解。

2.  如果你真的想要`class`（或需要重复这个很多），你将不得不使用[jQuery，一个 javascript 库](http://jquery.com/)，通过添加这个（最好在 中`<head>`）：

    ```
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.min.js"></script> 
    ```

    然后你可以添加这个（最好仍然是头部）：

    ```
    <script type="text/javascript">
        $(document).ready( function()
        {
            var cart_visible = false;

            $('.toggle').on('click', function()
            {
                if ( cart_visible )
                    $('.wrapper').css('margin-right', '-250px');
                else
                    $('.wrapper').css('margin-right', '0');

                cart_visible = !cart_visible;
            });
        });
    </script> 
    ```

    这次我使用了一个布尔值（将`true`or`false`作为值）来检查购物车是否可见，并在每次点击时同时更改值`margin-right`。这和以前做的一样，只是在 -250px 和 0 之间切换，但你不需要把它放在你可能创建的每个 .toggle 中，它适用于一个类。它让你使用 jQuery（虽然我认为这不是一个真正的问题）

我真的不明白你为什么要改变`margin-right`......如果你只是想让它消失，你可以使用`display: none;`，或者如果你真的想改变位置，你可以使用`right`（在这种情况下）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-18T19:20:22.837

# 仅 CSS，两个具有不同行为的侧边栏

有**两种**不同的*仅 CSS*动画侧边栏：

0.  灵感来自[@vitim.us](https://stackoverflow.com/a/14450850/1765658)，使用**悬停**显示/隐藏
1.  受[@niceass](https://stackoverflow.com/a/14450700/1765658)启发，使用隐藏的复选框**单击***显示*/隐藏

特征：

*   流畅的动画
*   侧边栏上的垂直文本（打开时旋转）
*   显示侧边栏时调整正文大小
*   车身和侧边栏清洁盒
*   可滚动的侧边栏内容（显示他的滚动条）。

### `hover`（来自[@vitim.us 的回答](https://stackoverflow.com/a/14450850/1765658)）有一些改进

如果没有完全确定，有一些方法可以

*   写*`Open cart`*/*`Your cart`*垂直
*   通过在 CSS 中使用*不可破坏的空间*来抑制*Open/Your*和*cart*之间的*换行符。*
****   动态调整主要内容的大小，同时显示侧栏。***

 ***```
body {
    font-family: sans;
    font-weight: normal;
    font-size: 10pt;
}
.main {
    width: calc( 100% - 3em );
    transition: width ease 1300ms;
}
.wrapper:hover ~ .main {
    width: calc( 100% - 17em );
}
h1 {
    font-weight: bold;
    font-size: 1.3 em;
}
h2 {
    font-weight: bold;
    font-size: 1.15 em;
}
.wrapper{
    position:fixed;
    width: 16em;
    height:100%;
    background-color:orange;
    top:0;
    right:0;
    margin-right:-14em;
    /* Makes opening smoothly */
    transition: margin-right ease 1300ms;
    -moz-transition: margin-right ease 1300ms;
    -webkit-transition: margin-right ease 1300ms;
    -o-transition: margin-right ease 1300ms;
}
.inner {
    position: relative;
    width: 100%;
    float: left;
    display: inline-block;
    transform: rotate(90deg)  translate(-3em,0em);
    transition: transform ease 1300ms;
}

/* opened */
.wrapper.opened,
.wrapper:hover{
    margin-right:0px;
}

.toggle {
  position:relative;
    display:block;
    width:2em;
    height:100%;
    background-color:#CCC;
    float:left;
    font-weight: bold;
    text-align: center;
    padding-top: 50%;
    transition: background-color ease 1300ms;
    transition: color ease 1300ms;
}

/* toggle style when wrapper is hovered */
.wrapper:hover .toggle{
    background-color: #555;
    color: white;
}
.wrapper:hover .toggle .inner{
    transform: rotate(270deg);
}
/* Warn: there is NBSP, not spaces, after Open/Your */
.wrapper:not(:hover) .toggle .inner:before{
    content:"Open";
}
.wrapper:hover .toggle .inner:before{
    content:"Your";
}

.cart {
    position: relative;
    width:13.5em;
    height:100%;
    background-color:rgba(255,255,255,.4);
    float:right;
    padding: .2em;
    overflow: scroll;
}
```

```
<div class="wrapper">
    <div class="toggle"><div class="inner">&nbsp;cart</div></div>
    <div class="cart">
        <h2>Cart</h2>
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.
       </p>
    </div>
</div>
<div class="main">
<h1>Little <i>no-js</i> css side-bar demo</h1>
<p>This little demo let you see how a side-bar could be done without being using javascript...</p>
 <h2>Lorem Ipsum</h2>   <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p>
<p>Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.
   </p>

</div>
```

### `toggle:checked`（来自[@niceass 的回答](https://stackoverflow.com/a/14450700/1765658)）

相同的改进，但使用了*不可见的复选框*，因此您必须单击侧边栏的（文本）才能打开它们。

（此答案链接到[HTML 标记中的“for”属性是做什么的？](https://stackoverflow.com/a/65879711/1765658)）

```
body {
    font-family: sans;
    font-weight: normal;
    font-size: 10pt;
}
#toggle { display:none; }
.main {
    width: calc( 100% - 3em );
    transition: width ease 1300ms;
}
#toggle:checked ~ .main {
    width: calc( 100% - 17em );
}
h1 {
    font-weight: bold;
    font-size: 1.3 em;
}
h2 {
    font-weight: bold;
    font-size: 1.15 em;
}
.wrapper{
    position:fixed;
    width: 16em;
    height:100%;
    background-color:orange;
    top:0;
    right:0;
    margin-right:-14em;
    /* Makes opening smoothly */
    transition: margin-right ease 1300ms;
    -moz-transition: margin-right ease 1300ms;
    -webkit-transition: margin-right ease 1300ms;
    -o-transition: margin-right ease 1300ms;
}
#toggle:checked ~ .wrapper {
    margin-right: 0pt;
}
#but {
    position: relative;
    width: 100%;
    float: left;
    display: inline-block;
    transform: rotate(270deg)  translate(-3em,0em);
    transition: transform ease 1300ms;
}
/* opened */
#zone {
  position:relative;
    display:block;
    width:2em;
    height:100%;
    background-color:#CCC;
    float:left;
    font-weight: bold;
    text-align: center;
    padding-top: 50%;
    transition: background-color ease 1300ms;
    transition: color ease 1300ms;
}

/* toggle style when wrapper is hovered */
#toggle:checked ~ .wrapper #zone {
    background-color: #555;
    color: white;
}
#toggle:checked ~ .wrapper #zone #but {
    color: white;
    transform: rotate(90deg);
}
#toggle:not(checked) ~ .wrapper #zone #but:before {
    content:"Open ";    /* non break space &#160; */
}
#toggle:checked ~ .wrapper #zone #but:before{
    content:"☒ Your ";
}
#toggle:not(checked) ~ .wrapper #zone #but:after {
    content:" ☐";        /* figure space &#8199; */
}
#toggle:checked ~ .wrapper #zone #but:after {
    content:"";
}
.cart {
    position: relative;
    width:13.5em;
    height:100%;
    background-color:rgba(255,255,255,.4);
    float:right;
    padding: .2em;
    overflow: scroll;
}
```

```
<input id="toggle" type="checkbox" />  
<div class="wrapper">
    <div id="zone"><label for="toggle" id="but">chart</label></div>
    <div class="cart">
        <h2>Cart</h2>
      <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.
       </p>
    </div>
</div>
<div class="main">
<h1>Little <i>no-js</i> css side-bar demo</h1>
<p>This little demo let you see how a side-bar could be done without being using javascript...</p>
 <h2>Lorem Ipsum</h2>   <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p>
<p>Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.
   </p>

</div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T02:06:49.950

我建议为此使用 jQuery。它很简单，出错的机会也更少。

```
$('.toggle').click(function() {
    $('.cart').toggle();
}); 
```

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)***

# php - 仅从 youtube 调整 iframe src

> ID：14450370
> 
> 赞同：0
> 
> 时间：2013-01-22T01:56:36.257
> 
> 标签：php, javascript, jquery

如何调整所有只有 youtube 链接的 iframe 的宽度和高度

```
<iframe width="420" height="315" frameborder="0" allowfullscreen="" src="http://www.youtube.com/embed/xbGv2T456dfg3"> 
```

因为我也有一些使用 iframe，但我只需要调整所有具有 youtube 链接的 iframe。

css

```
iframe {width:560px;height:316px;} 
```

在这方面需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:57:14.160

使用属性选择器：

```
iframe[src^=http://www.youtube.com] {
    width:560px;
    height:316px;
} 
```

如果链接可能是 https 或其他一些变体，您可以使用更自由的`*=`选择器：

```
iframe[src*=.youtu] {
    width:560px;
    height:316px;
} 
```

# chef-infra - 从 Databags 动态获取信息 -Chef

> ID：14450379
> 
> 赞同：1
> 
> 时间：2013-01-22T01:57:34.340
> 
> 标签：chef-infra

我正在使用厨师版 [厨师：10.14.4]。我想创建几个配方，它们可以在数据包中读取和写入有关在不同服务器上运行的不同服务的动态信息。

这是一个例子：

1.  我在 server1、server2 和 server3 上运行 apache 服务。
2.  现在，在我的 server1 配方中，我想启动/执行 Web 服务，但在此之前我需要确保 server1、server2 和 server3 正在运行 apache 服务。

问题是：

*   如何为 apache 服务设计一个配方来动态更新数据包？
*   如何设计 Web 服务配方以从数据包中获取动态更新的信息？

或者，有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:29:27.453

您不必使用数据包让一台服务器了解另一台服务器。使用[搜索](http://wiki.opscode.com/display/chef/Search)。您可以按属性、配方、标签等搜索节点。在您的情况下，您可以搜索在运行列表中具有您的 apache 服务的节点。如果您通过搜索获得所有 3 个节点，那么希望它们运行 apache。

如果您仍然想要/需要从您的配方更新数据包，请参阅在[数据袋帮助](http://wiki.opscode.com/display/chef/Data+Bags)**中的配方中创建和编辑数据包**。

# sql - 我应该使用哪种方法来保存多行数据？

> ID：14450380
> 
> 赞同：0
> 
> 时间：2013-01-22T01:57:46.527
> 
> 标签：sql, sql-server-2008, ef-code-first, entity-framework-5

首先，我将 ASP.NET MVC 与使用 SQL Server 的 Entity Framework Code First 5.0 结合使用。我有一个应用程序，要求我在一周中的每一天每隔半小时保存一次状态（工作/休假）。`id, day, time, status, user_id`如果您对每个用户（可能是数千个用户）进行数学运算，则只有 ( ) 的 336 行。

我想知道就存储大小和应用程序的性能（在您看来）而言，这些场景中的哪一个更适合。

1.  将这些存储为每个状态 1 行 ( `id, day, time, status, user_id`)，因此每个用户有 336 行。
2.  将其全部保存在数据库中的逗号分隔字段中（一个非常大的行）并使用 C# 将它们解析出来。
3.  有没有更好的方法我没有研究或没有考虑过？

我目前倾向于选项1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:05:10.323

这些是单独的数据片段，因此您绝对不应将它们作为逗号分隔值组合在一起。这使得搜索、报告和其他事情变得非常痛苦。

[表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx)是将多行传递给 SQL Server 的最有效方式。但是，我不知道 EF 是否会将您逼入绝境——我听说您可以在 SQL Server 中执行许多 EF/CF 仍然无法执行的正常操作*。*

它是如何工作的，你创建一个表类型（我必须在这里猜测数据类型）：

```
CREATE TYPE dbo.StatusData AS TABLE
(
  [day] DATE,
  [time] TIME,
  [status] VARCHAR(32),
  [user_id] INT
); 
```

这应该与您计划存储此信息的表的结构相匹配（同样，不，您不应该在同一列中存储单独的事实）。

现在您可以将其作为参数添加到您的存储过程中：

```
CREATE PROCEDURE dbo.SaveStatus
  @s AS dbo.StatusData READONLY
AS
BEGIN
  SET NOCOUNT ON;

  INSERT dbo.BaseTable([Day], [Time], [Status], [user_id])
    SELECT [Day], [Time], [Status], [user_id]
    FROM @s;
END
GO 
```

现在，您可以将`DataTable`C# 中的一个或其他值集合传递到单个存储过程参数（使用`SqlDbType.Structured`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:05:12.760

如果要将数据保存在数据库中，请将结果存储在表中。我认为您已将此描述为选项（1）。

这使您免于进行额外的处理。按照数据库标准，数据量很小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T02:23:28.153

我认为这取决于您需要报告的内容。就像所有当前具有特定状态的用户一样。用户在一定时期内的状态。特定用户在给定时间段内具有特定状态的时间。

状态应该是外键，日期和时间可以是从纪元开始的毫秒数，四舍五入到半小时并计算为（如果用户使用 UTC），这需要在插入之前进行更多编程，但随着数据的增长，它将有利于您的检索性能它。

将索引放在毫秒、用户 ID 和状态 ID 上。

我曾经编写将数据库内容作为 com+ 组件的类，因为如果我没记错的话，它会提高性能（池化、线程化）。

# r - 创建两个日期之间所有日期的向量

> ID：14450384
> 
> 赞同：81
> 
> 时间：2013-01-22T01:58:48.747
> 
> 标签：r, lubridate

R 中是否有一种简单的方法可以逐项列出两个指定日期之间发生的所有有效日期？例如，我想要以下输入：

```
itemizeDates(startDate="12-30-11", endDate="1-4-12") 
```

生成以下日期：

```
"12-30-11" "12-31-11", "1-1-12", "1-2-12", "1-3-12", "1-4-12" 
```

我对日期的课程和格式很灵活，我只需要一个概念的实现。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-01-22T02:02:56.017

您正在寻找`seq`

```
> seq(as.Date("2011-12-30"), as.Date("2012-01-04"), by="days")
[1] "2011-12-30" "2011-12-31" "2012-01-01" "2012-01-02" "2012-01-03"
[6] "2012-01-04" 
```

* * *

或者，您可以使用`:`

```
> as.Date(as.Date("2011-12-30"):as.Date("2012-01-04"), origin="1970-01-01")
[1] "2011-12-30" "2011-12-31" "2012-01-01" "2012-01-02" "2012-01-03"
[6] "2012-01-04" 
```

* * *

这是满足您特定要求的功能

```
itemizeDates <- function(startDate="12-30-11", endDate="1-4-12", 
                         format="%m-%d-%y") {
  out <- seq(as.Date(startDate, format=format), 
             as.Date(endDate, format=format), by="days")  
  format(out, format)
}

> itemizeDates(startDate="12-30-11", endDate="1-4-12")
[1] "12-30-11" "12-31-11" "01-01-12" "01-02-12" "01-03-12" "01-04-12" 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-02-03T22:28:45.157

我更喜欢使用 lubridate 包来解决日期时间问题。一旦你知道它就更直观，更容易理解和使用。

```
library(lubridate)
#mdy() in lubridate package means "month-day-year", which is used to convert
#the string to date object
>start_date <- mdy("12-30-11")
>end_date <- mdy("1-4-12")
#calculate how many days in this time interval
>n_days <- interval(start_date,end_date)/days(1)
>start_date + days(0:n_days)
[1]"2011-12-30" "2011-12-31" "2012-01-01" "2012-01-02" "2012-01-03" "2012-01-04"
#convert to original format
format(start_date + days(0:n_days), format="%m-%d-%y")
[1] "12-30-11" "12-31-11" "01-01-12" "01-02-12" "01-03-12" "01-04-12" 
```

参考： [使用 lubridate 轻松实现日期和时间](http://vita.had.co.nz/papers/lubridate.pdf)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-09-18T17:22:47.657

2个类似的实现`lubridate`：

```
library(lubridate)

as_date(mdy("12-30-11"):mdy("1-4-12"))

# OR

seq(mdy("12-30-11"), mdy("1-4-12"), by = "days") 
```

这些不会将您的日期格式化为月-日-年，但您可以根据需要修复格式。但是在分析时，年-月-日有点容易处理。

# angularjs - 稍后添加控制器

> ID：14450387
> 
> 赞同：1
> 
> 时间：2013-01-22T01:59:20.467
> 
> 标签：angularjs, socketstream

我正在尝试创建一个可以动态启用/禁用部分的 NG 应用程序。这个想法是有一个“管理”页面，可以启用或禁用应用程序的某些部分，然后看到新功能以页面顶部调整菜单的形式出现，并匹配路由、控制器等加载到应用程序中（我正在使用带有 NG 的 SocketStream）。

第一步是动态添加/删除路由，为此我在[https://stackoverflow.com/a/13173667](https://stackoverflow.com/a/13173667)找到了一个解决方案- 据我所知，效果很好。

接下来，将项目添加到菜单栏 - 在 ul/li 项目上使用 ng-repeat 很容易。

因此应用程序调整其菜单并识别相应的路线。到目前为止，一切都很好。

问题来自注册控制器。我`myApp.controller('SandboxCtrl',[...])`使用正确的参数调用（与启动时静态初始化时的工作相同），但控制器似乎没有正确加载或初始化。导航到新添加的路由会产生错误，例如：

```
Error: Argument 'SandboxCtrl' is not a function, got undefined
assertArg@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:973
assertArgFn@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:984
@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:4638
update@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:14007
$broadcast@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:8098
@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:7258
wrappedCallback@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:6658
wrappedCallback@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:6658
@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:6695
$eval@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:7848
$digest@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:7713
$apply@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:7934
@http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js:5433 
```

我目前不知道如何进行。我一直无法在网上找到解决方案。该应用程序太大而无法放入 jsFiddle，但如果需要，我可以在 GitHub 上提交最后的更改。

问题：这可行吗？我该怎么做才能调试这个？有什么我可以看的例子吗？

编辑：代码现在位于[https://github.com/jcw/housemon](https://github.com/jcw/housemon)（需要 node/npm/redis）。重现问题很容易：使用“npm start”启动，浏览到 localhost:3333，进入管理选项卡，单击“jcw-sandbox”，然后单击“安装”。顶部菜单将更新为新的“沙盒”条目。单击该条目会生成上面显示的错误。

哦，差点忘了：相关代码在 client/code/app/main.coffee 和 client/code/modules/routes.coffee ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:14:58.483

答案原来是两方面的：

*   NG 调用是通过 SocketStream RPC 回调进行的，并且必须包含在 $scope.$apply 调用中——我的错，不知道这种 SS/NG 交互
*   @matys84pl 概述了解决方案的其余部分 - 尽早获取 $controllerProvider（和 $filterProvider），以便稍后调用它们而不是普通的“app.controller”和“app.filter”成员，其中以后似乎不再工作了

GitHub 中的示例代码，我将链接到特定的提交，以便此答案保持有效：

[https://github.com/jcw/housemon/commit/f199ff70e3000dbf57836f0cbcbb3306c31279de](https://github.com/jcw/housemon/commit/f199ff70e3000dbf57836f0cbcbb3306c31279de)

# android - 在不丢失 SeekBar 焦点的情况下更新 ListView 行

> ID：14450389
> 
> 赞同：1
> 
> 时间：2013-01-22T01:59:24.473
> 
> 标签：android, android-listview, focus, seekbar

我有`ListView`一行项目，其中每行包含一个`SeekBar`和`TextView`。每当我移动任何`SeekBar`'s 时，我都需要将所有`TextView`'s`ListView`更新到实时状态，而不会失去对`SeekBar`.

我试过

*   呼叫`notifyDataSetChanged()`，`ListView`但 `SeekBar`失去焦点。

*   循环`ListView`使用以下代码：

```
for (int i = 0; i < listView.getChildCount(); i++)
{
TextView tv = (TextView) listView.getChildAt(i).findViewById(R.id.textView1);
String value = getData();
tv.setText(value);
} 
```

但是，上面的代码并没有对 进行持久更新`ListView`，如果用户滚动，这是一个问题。

任何建议如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:23:18.073

> 每当我移动任何 SeekBar 时，我都需要实时更新 ListView 中的所有 TextView，而不会失去对 SeekBar 的关注。

您要做的是在不调用的情况下更新适配器的数据列表，`notifyDataSetChanged()`然后`TextViews`从当前可见的行中更新。

```
//...
@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    // found is a reference to the ListView    
    int firstVisible = found.getFirstVisiblePosition();
    // first update the mData which backs the adapter               
    for (int i = 0; i < mData.size(); i++) {
          // update update update   
    }
    // update the visible rows
    for (int j = 0; j < found.getChildCount(); j++) {
           final View row = found.getChildAt(j);
           // get the position from the mData by offseting j with the firstVisible position
       ((TextView) row.findViewById(R.id.theIdOfTheTextView)).setText(mData.get(firstVisible + j));
    }
}
//... 
```

这应该为您提供平稳的更新。

# jquery - .ajaxStart() 是否仅在 jQuery 发起的 Ajax 查询或任何 Ajax 上触发？

> ID：14450391
> 
> 赞同：1
> 
> 时间：2013-01-22T01:59:29.473
> 
> 标签：jquery, ajax

当我访问 9gag 或 YouTube 等网站时，打开控制台（我的控制台中包含 jQuery 源代码）并输入 jQuery 命令：

```
$(document).ajaxStart(function() {
  alert('ajax');
}); 
```

我什么也没得到，即使我确定当 9gag 到达页面末尾并加载新内容或在 YouTube 页面上加载新评论时触发了 ajax ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:17:47.493

`$.ajaxStart`是[jQuery Ajax Event](http://api.jquery.com/Ajax_Events/)的一种。它们在`$.ajax`函数上实现并从那里触发。请参阅[GitHub 上](https://github.com/jquery/jquery/blob/master/src/ajax.js#L468)的相关源代码行。

因此，`$.ajaxStart`只会触发由 jQuery 实现`$.ajax`或其派生实现`$.get`等触发的事件。

# php - PHP 会话获取功能不起作用

> ID：14450395
> 
> 赞同：0
> 
> 时间：2013-01-22T01:59:50.177
> 
> 标签：php, session

我有一个小问题，`login.php`注册 myusername 和 mypassword.. 并重定向到`index.php?bolum=panel`（控制面板）

登录.php：

```
session_start();
$_SESSION['myusername'] = $myusername; 
$_SESSION['mypassword'] = $mypassword;
if(session_is_registered(myusername))
{
    echo "<script> window.location.replace('index.php?bolum=panel') </script>";
} 
```

和控制面板=> panel.php

```
 <?php session_start(); ?>
    Username: <?php echo $_SESSION['myusername']; ?> <br/>
    Password: <?php echo $_SESSION['mypassword']; ?> 
```

为什么它不起作用，我无法在`panel.php`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:03:13.130

`session_start`必须在任何输出发送到浏览器之前调用。这包括开始前的空白字符`<?php`。删除它们。此外，对于开发，激活错误报告：

```
<?php
ini_set('display_errors', 'on');
error_reporting(-1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:56:40.307

首先 - `login.php`：

```
<?php
session_start();
$_SESSION['myusername'] = $myusername; 
$_SESSION['mypassword'] = $mypassword;
if(isset($_SESSION['myusername'])){
   header('Location: index.php?bolum=panel');
}
?> 
```

你究竟是如何从**index.php?bolum=panel**到**panel.php 的**？

# php - 如何从文件名中删除目录字符串

> ID：14450403
> 
> 赞同：1
> 
> 时间：2013-01-22T02:00:38.980
> 
> 标签：php, html

> **可能重复：**
> [如何使用 PHP 从完整路径中获取文件名？](https://stackoverflow.com/questions/1418193/how-to-get-file-name-from-full-path-with-php)

```
echo '<td width="11%" class="imagetd">'. ( ( empty ($arrImageFile[$key]) ) ? "&nbsp;" : htmlspecialchars( is_array( $arrImageFile[$key] ) ? implode(",", $arrImageFile[$key]) : $arrImageFile[$key] ) ). '</td>' . PHP_EOL;
echo '<td width="11%" class="videotd">'. ( ( empty ($arrVideoFile[$key]) ) ? "&nbsp;" : htmlspecialchars( is_array( $arrVideoFile[$key] ) ? implode(",", $arrVideoFile[$key]) : $arrVideoFile[$key] ) ). '</td>' . PHP_EOL;
echo '<td width="11%" class="audiotd">'. ( ( empty ($arrAudioFile[$key]) ) ? "&nbsp;" : htmlspecialchars( is_array( $arrAudioFile[$key] ) ? implode(",", $arrAudioFile[$key]) : $arrAudioFile[$key] ) ). '</td>' . PHP_EOL; 
```

在上面的代码中，我有 2 个表格列，这取决于表格单元格中是否有内容显示信息。现在您可以看到三列是`Image`和。现在这些列在其表格单元格中显示相关文件名。以下是它们的显示方式：`Video``Audio`

*   所有图像文件都包含文件名前的字符串`ImageFiles/`，例如`ImageFiles/Lighthouse.png`
*   所有视频文件都包含文件名前的字符串`VideoFiles/`，例如`VideoFiles/sample_mpeg.mp4`
*   所有音频文件都包含`AudioFiles/`文件名前的字符串，例如`AudioFiles/Music.mp3`

如您所见，每个文件都包含文件名之前的目录字符串。但我想要做的是，对于每一列和每个文件，删除相对目录字符串或换句话说 remove `ImageFiles/`，`AudioFiles/`并`VideoFiles/`从每个文件名的整个字符串中删除，因为我不希望用户知道目录的名称。但这怎么能做到呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T02:05:11.930

PHP 有一个功能：[`basename`](http://php.net/manual/en/function.basename)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T02:05:21.343

采用[`basename()`](http://php.net/manual/en/function.basename)

```
echo basename($arrImageFile[$key]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T02:01:52.753

搜索 / 的最后一个索引并执行一个子字符串来提取它之后的所有内容。

# iphone - 通过 UIWebView 播放电影，然后通过 Airplay 输出到 AppleTV 时，关闭 iPhone 屏幕会停止播放。为什么？

> ID：14450405
> 
> 赞同：1
> 
> 时间：2013-01-22T02:00:57.343
> 
> 标签：iphone, ios, cocoa-touch, uiwebview, airplay

通过 a 播放电影`UIWebView`，然后通过 Airplay 输出到 AppleTV 时，关闭 iPhone 屏幕会停止播放。为什么？

任何人都知道如何解决这个问题，以便当我的应用程序关闭屏幕时 AirPlay 会继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:13:32.827

做这两件事为我解决了它：

1.  [使用 AVPlayer 进行音频的 Airplay 在后台不起作用](https://stackoverflow.com/questions/8807914/airplay-of-audio-using-avplayer-does-not-work-in-the-background)（将键“audio”作为属性列表的 XML 中的键）

2.  [UIWebView：当应用程序进入后台时，iOS 6 中的 HTML5 音频暂停](https://stackoverflow.com/questions/11616001/uiwebview-html5-audio-pauses-in-ios-6-when-app-enters-background/12414719)

看起来它也适用于视频！

# c++ - 多个文件组合在一个静态库中

> ID：14450406
> 
> 赞同：-1
> 
> 时间：2013-01-22T02:01:03.443
> 
> 标签：c++

所以我想知道是否可以有一个包含多个文件的静态库？现在我可以在其他程序中使用附加到特定 .h 和相应 .cpp 的静态库。但是，当我尝试向静态库添加额外的 .h 和 .cpps 时，我尝试使用它们的其他程序返回错误 LNK2019。只是想在搜索更多之前知道它是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:04:50.490

> 我想知道是否可以有一个包含多个文件的静态库？

是的。这就是库的全部意义——成为一组预构建目标文件的单一可再分发文件。

# twitter-bootstrap - 将引导程序与凉亭一起使用

> ID：14450408
> 
> 赞同：135
> 
> 时间：2013-01-22T02:01:17.727
> 
> 标签：twitter-bootstrap, bower

我正在尝试将 bootstrap 与 bower 一起使用，但由于它克隆了整个 repo，因此没有 CSS 和其他东西。

这是否意味着我需要在自己的构建过程中包含构建 Bootstrap？或者如果我错了，正确的工作流程是什么？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-25T09:38:55.193

~~我终于结束了使用以下内容： `bower install --save http://twitter.github.com/bootstrap/assets/bootstrap.zip`~~

对我来说似乎更干净，因为它不会克隆整个回购，它只会解压缩所需的资产。

这样做的缺点是它打破了凉亭哲学，因为 a`bower update`不会更新引导程序。

但我认为它仍然比`bower install bootstrap`在您的工作流程中使用然后构建引导程序更干净。

~~我想这是一个选择问题。~~

**更新：**似乎他们现在对 dist 文件夹进行了版本化（参见：[https](https://github.com/twbs/bootstrap/pull/6342) ://github.com/twbs/bootstrap/pull/6342 ），所以只需使用`bower install bootstrap`并指向`dist`文件夹中的资产

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-07-04T17:33:27.583

有一个名为 bootstrap-css 的预构建 bootstrap bower 包。我认为这是您（和我）希望找到的。

```
bower install bootstrap-css 
```

谢谢尼科。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-01-23T11:53:42.213

~~css 和 js 文件位于包中：`bootstrap/docs/assets/`~~

**更新：**

从 v3`dist`开始，包中有一个文件夹，其中包含所有 css、js 和字体。

* * *

另一种选择（如果您只想获取单个文件）可能是：[pulldown](https://github.com/jackfranklin/pulldown)。配置非常简单，您可以轻松地将自己的文件/url 添加到列表中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-20T20:45:50.183

假设你已经安装了 npm 并在全局安装了 bower

1.  导航到您的项目
2.  `bower init` （这将在您的目录中生成 bower.json 文件）
3.  （然后继续单击是）...
4.  设置 bootstrap 的安装路径：在 bower.json 文件旁边
    手动创建一个`.bowerrc`文件并将以下内容添加到其中：

    {“目录”：“公共/组件”}

5.  `bower install bootstrap --save`

注意：要安装其他组件：

```
 bower search {component-name-here} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-30T18:10:38.330

我最终使用了一个 shell 脚本，当你第一次签出一个项目时你应该只需要运行一次

```
#!/usr/bin/env bash

mkdir -p webroot/js
mkdir -p webroot/css
mkdir -p webroot/css-min
mkdir -p webroot/img
mkdir -p webroot/font

npm i
bower i

# boostrap
pushd components/bootstrap
npm i
make bootstrap
popd
cp components/bootstrap/bootstrap/css/*.min.css webroot/css-min/
cp components/bootstrap/bootstrap/js/bootstrap.js src/js/deps/
cp components/bootstrap/bootstrap/img/* webroot/img/

# fontawesome
cp components/font-awesome/css/*.min.css webroot/css-min/
cp components/font-awesome/font/* webroot/font/ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-04T08:27:54.463

还请记住，使用如下命令：

`bower search twitter`

你会得到一个包含与 twitter 相关的任何包的列表的结果。这样您就可以了解有关 Twitter 和 Bower 的所有信息，例如了解是否有全新的 bower 组件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-08T11:54:35.210

您已在系统上安装*nodeJs*以执行`npm`命令。一旦`npm`正常工作，您可以访问`bower.io`。在那里，您将找到有关此主题的完整文档。你会发现一个命令`$ npm install bower`。这将在您的机器上安装*凉亭。*安装*bower*后，您可以轻松安装 Bootstrap。

[这是一个视频教程](https://www.youtube.com/watch?v=fms7cJ_eHDA&feature=youtu.be)

# android - 更改同一文本视图中多个文本字符串的文本颜色

> ID：14450409
> 
> 赞同：0
> 
> 时间：2013-01-22T02:01:23.827
> 
> 标签：android, fonts, textview

是否可以同时更改多个文本字符串的文本颜色`TextView`？使用`Html.fromHtml`不起作用：

```
textViewPrevChat.append("\n"+Html.fromHtml("<b>Bold string </b>")+somestringhere); 
```

它以粗体打印整个内容。此外，其中的颜色属性`<p>`不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T02:10:24.537

您应该为此使用 SpannableString。这是实现此功能的示例方法：

- 这个例子改变了一半字符串的颜色，并调整了另一部分字符串的大小：

```
public static SpannableString categoryText(String label, String text, int colorIn) {
        String strIn = label + " " + text;
        SpannableString ss = new SpannableString(strIn);        
        ss.setSpan(new ForegroundColorSpan(colorIn), 0, label.length(), SpannableString.SPAN_EXCLUSIVE_EXCLUSIVE);
        ss.setSpan(new RelativeSizeSpan(.80f), 0, label.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

        return ss;
    } 
```

# c - 释放动态分配的内存

> ID：14450414
> 
> 赞同：3
> 
> 时间：2013-01-22T02:02:15.720
> 
> 标签：c, free

```
int i;
char *s = (char*)malloc(sizeof(char)*10);
for(i = 0; i <= 4; ++i)
    s[i] = 'a';
s[5] = '\0';
printf("%s\n", s);
free(s). 
```

上面的代码会不会有内存泄漏的问题？“free”函数如何知道需要释放多少内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T02:04:27.133

您的代码中没有内存泄漏。至于你的第二个问题，当你打电话时`malloc`，会发生更多的事情，而不仅仅是向你返回记忆。C 库保留一些空间来放置它自己的标题和簿记信息，以便在调用`free`它时可以做正确的事情。

关于您的代码的一些编辑说明：

*   您不需要`malloc()`在 C 程序中转换返回值。`void *`（返回）和其他指针类型之间的转换`malloc()`在 C 中是隐式的。

*   `sizeof(char)`是`1`，何必写出来呢？

*   您的循环将三个字符写入`s`.，然后您的程序`s[4]`在添加`\0`. 这有点奇怪。你的意思是`i <= 4`在你的循环中使用，还是`s[4] = '\0'`在它之后使用？

*   你有一个`.`而不是`;`你的`free()`电话。我想这只是一个错字，而不是在您的程序中，因为它不会以这种方式编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T02:04:57.163

它不会泄漏。该库知道要释放多少，因为它在内部跟踪每个块的分配大小。它这样做的确切方式是一个实现细节，它可能会从一个版本`malloc`到另一个版本发生变化`malloc`，你不应该关心它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T02:04:39.073

不，你最后释放了 s 并且你使用的不超过 s。我会说你没事。

# sql-server - 为什么这些 Datetime 值返回相同的 Checksum 和 Checksum_Agg？我怎样才能让它更独特？

> ID：14450415
> 
> 赞同：2
> 
> 时间：2013-01-22T02:02:19.900
> 
> 标签：sql-server, hash, checksum

我试图快速确定两组时间表是否相同，并生成一个可以引用这些独特时间表的密钥。我最初尝试使用 HASHBYTES，但很快发现您只能散列 8000 个字符，而且我有大量的日期时间，当它们连接时超过 8000。

因此，我尝试使用 Checksum 和 Checksum_Agg，因为它们似乎是为这类事情设计的。我知道校验和更有可能生成非唯一值。但是我需要将它们相互比较的范围/上下文太窄了，我想我可以侥幸逃脱。

不幸的是，经过一点点测试后，我了解到我可以在 4 行日期时间数据中找到校验和“冲突”！我觉得这有点奇怪，并发现了碰撞的模式。

下面是一个演示该问题的示例脚本：

```
声明@Rows 表
(
    [GroupId] 整数，
    [开始日期] 日期时间，
    [结束日期] DATETIME
)

--Group1
插入@Rows 值（1、'2013-01-20 01:00:00.000'、'2013-01-20 01:20:00.000'）
插入@Rows 值（1，'2013-01-20 01:20:00.000'，'2013-01-20 01:40:00.000'）
--INSERT INTO @Rows 值 (1, '2013-01-20 01:40:00.000', '2013-01-20 02:00:00.000')
--INSERT INTO @Rows 值 (1, '2013-01-20 02:00:00.000', '2013-01-20 02:20:00.000')
--INSERT INTO @Rows 值 (1, '2013-01-20 02:20:00.000', '2013-01-20 02:40:00.000')
--INSERT INTO @Rows 值 (1, '2013-01-20 02:40:00.000', '2013-01-20 03:00:00.000')

--Group2
插入@Rows 值（2、'2013-01-21 01:00:00.000'、'2013-01-21 01:20:00.000'）
插入@Rows 值（2、'2013-01-21 01:20:00.000'、'2013-01-21 01:40:00.000'）
--INSERT INTO @Rows 值 (2, '2013-01-21 01:40:00.000', '2013-01-21 02:00:00.000')
--INSERT INTO @Rows 值 (2, '2013-01-21 02:00:00.000', '2013-01-21 02:20:00.000')
--INSERT INTO @Rows 值 (2, '2013-01-21 02:20:00.000', '2013-01-21 02:40:00.000')
--INSERT INTO @Rows 值 (2, '2013-01-21 02:40:00.000', '2013-01-21 03:00:00.000')

选择 [ChecksumAgg1] = CHECKSUM_AGG([CheckSum])
从
(
    选择 [校验和] = 校验和（[开始日期]，[结束日期]）
    来自@Rows
    其中 GroupId = 1
) G1

选择 [ChecksumAgg2] = CHECKSUM_AGG([CheckSum])
从
(
    选择 [校验和] = 校验和（[开始日期]，[结束日期]）
    来自@Rows
    其中 GroupId = 2
) G2

```

结果是：

校验和Agg1：**5681728**

校验和Agg2：**5681728**

这两个日期系列之间的唯一区别是它们相隔 1 天。但是它们会生成相同的校验和！但仅当行**数为偶数**时。如果您取消注释 Group 1 中的 INSERT 和 Group 2 中的一个 INSERT，您将获得两个不同的校验和。但是然后取消评论另一对，您将获得另一场比赛！

* * *

最后我有两个问题。我很想更多地了解它是如何工作的，以及为什么这种模式似乎会影响一个相当可预测的校验和值。更重要的是，我想知道是否有更好的方法来创建大量数据的“指纹”。我知道我不能保证这个哈希是全球唯一的，但我显然需要比校验和更好的东西。

我能够欺骗校验和计算的一种方法是在 Datetime 上执行 HASHBYTES，然后将其提供给 Checksum 函数。通过这种方式，校验和被提供的值比一组具有相似外观差异的日期看起来更随机。但这足够了吗？

* * *

**编辑-这里只是更多的上下文。**

基本上我有一个系统，它有大量的时间表数据和一个单独的系统，它在特定时间对这些时间表感兴趣。例如，多个用户可能会看到这个复杂时间表的某个部分的特定版本，并希望添加一些元数据（可能是他们的批准状态、注释或其他内容）。如果某些外部来源对任何单个日期时间进行了更改，则需要断开此链接，因为它不再是相同的时间表！

有许多不同的系统可以对核心调度数据进行更改，这就是为什么我很难将这种担忧提升到代码级别，以便以某种方式管理并将其“规范化”为以某种方式表示每个快照的实体。我必须在一百万个地方安装挂钩来监听变化，然后清理任何指向时间表的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:17:07.123

你认为所有这些校验和的东西——考虑到你还必须做些什么来确保唯一性——值得麻烦吗？就我个人而言，我认为只需直接比较列而不是尝试减少工作并仅比较一个值，您将获得更好的性能（并且复杂性更低）。

另请记住，当您深入了解日期时间值时，它只是成对的整数，因此将校验和应用于两个值的组合可能会导致相同的值，这并不奇怪。例如：

```
SELECT CHECKSUM_AGG(x)
FROM
(
  SELECT CHECKSUM(1,2)
  UNION ALL 
  SELECT CHECKSUM(2,3)
) AS y(x);

SELECT CHECKSUM_AGG(x)
FROM
(
  SELECT CHECKSUM(2,2)
  UNION ALL 
  SELECT CHECKSUM(1,3)
) AS y(x); 
```

结果：

```
----
49

----
49 
```

所以我建议只是放一个索引`StartDate, EndDate`并完成它。你正试图让已经非常高效的东西变得更有效率，我认为你正在完成相反的事情。

至于键，只需使用一`IDENTITY`列或其他一些代理。我认为嵌套`CHECKSUM_AGG(CHECKSUM(HASHBYTES(col1),HASHBYTES(col2)))`来模拟唯一性没有任何优势......

**编辑**

或者考虑到新的要求，[`ROWVERSION`](http://msdn.microsoft.com/en-us/library/ms182776.aspx)如果您想确保数据与上次读取时的数据相同，只需使用一列。我看不出跟踪数百万校验和结果与跟踪 rowversion 或其他计算值有何不同。当已经有内置的东西可以做你想做的事情时，你的工作太辛苦了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T02:08:36.250

从此页面上的评论：

[http://msdn.microsoft.com/en-us/library/ms188920.aspx](http://msdn.microsoft.com/en-us/library/ms188920.aspx)

看来 Checksum_Agg 是使用 XOR 构建的。关于 XOR 的问题是，它们往往很容易通过包含两次相同的数字来逆转。这就解释了为什么你只在它均匀时才注意到它。

只要您知道 XOR 问题并以混合所有位的方式预先打乱您提供给它的内容，您就应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T08:39:00.000

我也面临这个问题。当您在列中的所有值都相同时，就会出现这种情况。在计算总和时，它可能不占用此列。

# ruby-on-rails - Rails 解决方案记录每个用户操作，以便以后查询

> ID：14450416
> 
> 赞同：1
> 
> 时间：2013-01-22T02:02:23.800
> 
> 标签：ruby-on-rails, ruby, logging, redis

我正在寻找一种通常执行以下操作的解决方案：

*   记录每个用户的操作。如果可能，以控制器名称、动作和参数的形式
*   此外，仅记录实际更改为模型对象的内容。例如，控制器可能会获得一长串参数，但实际上只有两个参数保存到模型对象中——我想知道哪些属性发生了变化。
*   可以查询此数据 - 例如，查找用户在 CRM 应用程序上的操作历史记录

我们为多个应用程序（都访问同一个数据库）设置了一个共享模型，因此我们能够记录数据来自哪个应用程序。这就是我们希望在我们的应用程序通用的中心位置实现类似的东西的地方。

这样做的原因是因为我们在事后进行了大量取证 - 我们被要求检查谁将某些内容更改为记录，因此我们经常不得不去生产日志并在那里搜索该信息。如果可能的话，我们希望能够使用标准 SQL 来查询它。

这样做的另一个原因是因为不同的开发人员拥有不同的应用程序，有时某些应用程序的行为不应该如此。如果我能够查找哪个应用程序将特定值保存到模型对象中，那会有所帮助。

对于我们要查看的控制器名称/操作没有任何模式 - 我们在某些模型上添加了审计逻辑，但随后我们会被要求检查我们尚未设置审计的不同模型的某些内容为了。

如果有意义的话，我们愿意为此目的使用 Redis 之类的东西。我使用 Redis 的经验很少，不确定 Redis 是否能够处理这样的事情。

这是一个现实的期望 - 能够记录每个用户操作吗？我粗略估计我们每小时可能有来自各种应用程序的 300 到 500 个用户操作。或者我应该停止探索这种可能性，而是跳出框框思考我应该如何跟踪用户的一般行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:25:51.677

它的现实。人们将 Redis 用于一般缓存目的，因此仅跟踪用户使用情况应该不是问题。

使用 redis 对象 gem [https://github.com/nateware/redis-objects](https://github.com/nateware/redis-objects)

为每个操作创建一个 redis 哈希。

每个散列将包含每个用户的密钥（他们的 ID 将起作用）。每个键都会导致该用户执行该操作的次数。

在进行计数时，您甚至可以使用 incr 方法来提高速度。

此外，如果您想格外小心，您可以将其设置为在 X 递增后您可以将信息保存回数据库中的用户行。这当然会消耗一些资源，但如果它对你来说是值得的，它对你来说是值得的。

编辑：我想我应该提供一个示例控制器

```
class BlogController < OneForMyBabyController

   def show
     #Your Code Here
     #---------------
     if logged_in
       #When you create a new Redis::HashKey its first look to redis
       #if the object already exists it just gets it, other wise it
       #'creates it'*.
       blog_show_user_tracking = Redis::HashKey.new("BlogShowUserTracking")
       blog_show_user_tracking.incr(@user.id)
       #This is about how would deal with updating after a number of incr
       #This would require a separate look up from the incr above.
       #x here is the number of incr before you update the SQL DB
       if blog_show_user_tracking[@user.id] % x == 0
          #Update User To Reflect New Tracking
       end
     end
   end

end 
```

编辑：显示只有用户登录时如何使用它。

# c - 没有从输入文件中打印正确的值

> ID：14450418
> 
> 赞同：0
> 
> 时间：2013-01-22T02:02:36.607
> 
> 标签：c

有人可以告诉我我要去哪里错了吗？基本上我已经编写了一些代码，这些代码应该从文件中获取值，然后将文件中的第一个值与文件中的值的数量一起打印为输出。

尽管我得到了正确数量的值，但输出中打印的第一个值与文件中的第一个值不同。这是代码：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    const char Project_Data[] = "filedata.dat";
    FILE *input = fopen(Project_Data, "r");

    int t = 0;
    int N = 0;
    float *a;

    a = (float*)malloc(N*sizeof(float));

    if(input != (FILE*) NULL)
    {
        while(fscanf(input, "%e", &a[t]) == 1)
        {
            N++;
            if(a[t] == EOF)
                break;
        }

        printf("first value in file: %e\n",a[0]);
        printf("number of values in file: %d\n", N);
    }
    else
        printf("coudlnt read input file.\n");

    return(0);
} 
```

我觉得这与我如何使用 malloc 函数有关。如果是这样，我该如何正确使用它？我想将文件中的值读入一个大小为 N 的数组，但是如果我事先不知道 N 的值，我该怎么做呢？

* * *

编辑：

这是文件中的一些值。这些值一个接一个地排序，它们之间有一个空格。因为值的数量非常大，它们在页面上形成了几条对角线（如果你以前有过的话）。

```
 9.0100000e+00   8.9663752e-01
   9.0200000e+00   1.5041077e+00
   9.0300000e+00   2.5992505e+00
   9.0400000e+00   1.5242828e+00
   9.0500000e+00   3.6815660e-01
   9.0600000e+00   5.4889676e-01
   9.0700000e+00   1.2371257e+00
   9.0800000e+00   1.2163317e+00
   9.0900000e+00   5.4318479e-01
   9.1000000e+00   1.5906641e+00
   9.1100000e+00   2.6775285e+00
   9.1200000e+00   1.1608307e+00
   9.1300000e+00   1.2084299e+00
   9.1400000e+00  -7.8752191e-01
   9.1500000e+00   6.4048690e-01
   9.1600000e+00   2.2727416e-02
   9.1700000e+00   1.0307653e+00
   9.1800000e+00   1.9435864e+00
   9.1900000e+00   2.9422693e+00
   9.2000000e+00   3.2184945e+00
   9.2100000e+00   1.3041157e+00
   9.2200000e+00   1.1018038e+00 
```

左边的值不是订单；它们是真正的价值，只是其他数据意味着我认为数据中的“噪音”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T02:05:47.550

a = (float*)malloc(N*sizeof(float));

由于 N 设置为 0，因此您分配了 0 个字节？这似乎很麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:58:25.607

为什么不首先将数组分配给一个大的任意数字，例如 1024，然后如果您确实需要节省空间，在您知道将收到多少输入后重新分配？如果您确实获得超过 1024 个条目，您重新分配到 2048 并继续保存值？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:05:11.260

您可以首先分配一个包含 10 个元素的数组。读取文件时，请记住增加索引变量（在您的示例中为 t）。如果 t 大于分配的大小，请使用 realloc 将数组大小加倍。据我所知，这就是大多数动态向量实现的工作方式。

像这样的东西：

```
int capacity = 10;
float* a = (float*)malloc(capacity*sizeof(float));
int t = 0;    

while(fscanf(input, "%e", &a[t]) == 1) {
   t++;
   if (t >= capacity) {
      capacity *= 2;
      void* temp = realloc(a, capacity*sizeof(float));
      if (temp == 0) exit(1); // or handle allocation failure properly, a is still valid
      a = (float*)temp;
   }
} 
```

此时`a`应包含您的项目和`t`阅读的项目数。

# asp.net - 为什么自我窗口在新窗口中打开？

> ID：14450420
> 
> 赞同：0
> 
> 时间：2013-01-22T02:02:50.380
> 
> 标签：asp.net

我有一个包含这样的按钮的超链接：

```
<asp:HyperLink runat="server" ID="LinkDownload" Target="_self"><asp:Button ID="Button_Send" Visible="false" runat="server" Text="Download" /></asp:HyperLink> 
```

验证后，按钮可见。为什么当我点击它时，即使超链接是_self，也会打开一个新窗口。

我怎样才能让它在同一个窗口中打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:22:00.257

包裹在侧面超链接中的按钮对我来说看起来不太好。您可以尝试将 url 设置为超链接，我认为应该可以。

备选方案：

只需添加按钮并在其单击处理程序中不使用超链接：

```
Response.Redirect("blah.aspx"); 
```

或者，您可以编写一行 javascript：

```
<input type="button" value="Text" onclick="location='blah.aspx'" /> 
```

# django - Google 应用引擎和 django 模板：将实体 ID 传递给模板引擎

> ID：14450422
> 
> 赞同：1
> 
> 时间：2013-01-22T02:03:02.320
> 
> 标签：django, google-app-engine

我有以下模型：

```
class Messages(db.Model):
    name: db.StringProperty()
    ... 
```

它使用 Google App Engine 的数据存储区提供的 id 字段作为唯一键，可以通过以下方式获取：

```
message = Message()
...
message.put()
...
id = message.key().id() 
```

现在我想使用 Django 模板系统列出消息：

```
messages = db.Messages.all()
self.response.out.write(template.render('page.html', 'messages': messages)) 
```

在“page.html”中：

```
{% for message in messages %}
   {{message.name}}
   {{message.id}}
   ....
{% endfor %} 
```

但是，在上述循环中，“message.id”始终为空。如何将实体 ID 传递给模板系统，以便我可以在网页中使用它们？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:04:47.187

模板代码没有什么不同，因为您仍然需要访问key[的`id`实例方法](https://developers.google.com/appengine/docs/python/datastore/keyclass#Key_id)。

请尝试：

```
{% for message in messages %}
   {{ message.name }}
   {{ message.key.id }}
   <!-------- ^^^ -->
{% endfor %} 
```

* * *

如果您使用 Jinja2 模板（而不是 Django 模板），语法将是：

```
{% for message in messages %}
   {{ message.name }}
   {{ message.key().id() }}
   <!-------- ^^^^^ -->
{% endfor %} 
```

# jscript - 相当于 JScript Runtime 中的 window

> ID：14450424
> 
> 赞同：2
> 
> 时间：2013-01-22T02:03:08.577
> 
> 标签：jscript, wsh

在正常的浏览器 javascript 环境中，您总是可以`window`依赖全局对象，但是是否有 Microsoft JScript 运行时的默认可访问全局对象，或者至少有一种检查方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:02:50.287

根据[MSDN](http://msdn.microsoft.com/en-us/library/52f50e9t%28v=vs.84%29.aspx)，有一个`Global`对象，但是快速测试表明它不能直接访问：

```
WScript.Echo(Global.escape('hello world')); // Error: 'Global' is undefined 
```

但是，您可以做的是利用`this`在全局上下文中引用全局对象并将引用保存到变量的事实：

```
var __global__ = this;
WScript.Echo(__global__.escape('hello world')); // happy times 
```

# ios - iOS 创建可重用视图的问题

> ID：14450426
> 
> 赞同：4
> 
> 时间：2013-01-22T02:03:14.660
> 
> 标签：ios, view, storyboard, reusability

我正在尝试使用 nib 和附带的 .h/.m 文件创建自定义视图，然后通过 IB 创建该视图的多个实例，并将它们用作另一个视图的子视图。

1.  我创建了 .h/.m 文件
2.  我创建了xib。
3.  对于 xib，我在 IB 中指定类名。
4.  向 xib 添加一些标签（其值将以编程方式更改）
5.  我将情节提要中的一个简单视图拖到我的容器视图中。
6.  我将拖动视图的类设置为我为 xib 指定的类。

我多次执行第 5 步和第 6 步，每个我想要的视图一次。最终，我会将这些视图连接到父视图类上的 IBOutlets。

显然我做错了什么，因为我没有在自定义视图中看到我的标签。我怀疑我需要将笔尖与视图直接关联起来，就像您对集合/表格视图所做的那样，但我还没有找到在哪里执行此操作。

这样做的正确方法是什么？我想我可以以编程方式添加视图，但是如何处理各种设备的布局（例如 iphone 4 vs 5）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T13:06:18.923

我在下面概述的内容似乎有效

1) 为您的自定义视图创建 xib 和 .h/.m 文件。
1a) 假设您需要 IBOutlets 来查看您想要控制的元素，请在身份检查器中为**文件所有者提供在您的 .h 文件中定义的类名。**

2) 在 .h 文件中定义一个属性

`@property (nonatomic, retain) IBOutlet UIView *contentView;`

2a) 为您希望以编程方式访问的 xib 中的所有子视图定义出口。

3）在.m文件中合成属性并执行

```
- (void)awakeFromNib
{
    NSLog(@"awake from nib");
    [[NSBundle mainBundle] loadNibNamed:@"yourNibName" owner:self options:nil];
    [self addSubview:self.contentView];
} 
```

4) 将空视图从调色板拖到故事板中的容器中。将这些视图的类更改为 .h 文件中定义的类名。

当您运行您的应用程序时，您应该在子视图中看到 xib 的内容。

5) 您现在可以在容器视图的 .h 文件中定义自定义子视图实例的出口，并像往常一样在情节提要中连接它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T02:16:01.673

您不能在 xib 中创建视图并在情节提要中使用它。如果您已经在 xib 文件中创建了它，则可以将其复制并粘贴到情节提要中。如果您希望它成为控制器的根视图，请删除您使用控制器获得的视图，然后从 xib 中粘贴该视图。然后，您可以将这些视图的类更改为您的自定义类。

我不确定您所说的“另一个视图的子视图”是什么意思——视图没有父子关系，它是视图子视图关系。此外，您通常不会（曾经？）将视图拖到容器视图中。容器视图包含一个视图控制器，当您将容器视图添加到另一个视图时，您会自动获得该控制器。该控制器是其视图中包含容器视图的控制器的子级。如果您希望您的自定义视图出现在该容器视图所在的位置，那么您可以将该视图添加到子控制器的视图中（或将该视图替换为您的视图）。

# php - Nginx - 总是传递查询字符串

> ID：14450428
> 
> 赞同：0
> 
> 时间：2013-01-21T13:23:27.727
> 
> 标签：php, nginx

我正在运行一个使用查询参数来识别不同附属公司的网站，我需要将这些参数传递到我的整个网站。

我试图避免写类似的东西：

```
<a href="somepage.php?<?php echo $_SERVER['QUERY_STRING']; ?>">link</a> 
```

对于我网站上的每个链接。是否有可能通过 nginx 甚至 php 将其“添加”到所有内部和外部链接？

谢谢

# php - 从文件中获取新闻并将其发布在主页上的功能

> ID：14450432
> 
> 赞同：0
> 
> 时间：2013-01-22T02:04:08.900
> 
> 标签：php, file, function, include, indexing

我必须在我的主页上打印这些新闻。在我设置的 index.php 文件中，在下面包含此文件，但没有返回任何内容...错误在哪里？该脚本从文件中获取消息。然后它将每个新闻设置为一个字符串。然后该函数为每个新闻创建一个“标准”回显然后打印新闻。

但是什么都没有打印...

谢谢大家！

```
<?php
if (file_exists("./public/ita/news/news.txt")) {
$getnews1 = "./public/ita/news/news.txt";
$news1 = file($getnews1); //file in to an array
}

if (file_exists("./public/ita/news/news2.txt")) {
$getnews2 = "./public/ita/news/news2.txt";
$news2 = file($getnews2); //file in to an array
}

if (file_exists("./public/ita/news/news3.txt")) {
$getnews3 = "./public/ita/news/news3.txt";
$news3 = file($getnews3); //file in to an array
}

if (file_exists("./public/ita/news/news4.txt")) {
$getnews4 = "./public/ita/news/news4.txt";
$news4 = file($getnews4); //file in to an array
}

if (file_exists("./public/ita/news/news5.txt")) {
$getnews5 = "./public/ita/news/news5.txt";
$news5 = file($getnews5); //file in to an array
}

function post_news()
    {
        echo '<div align="left" class="newstitle">';
        echo $news[0];
        echo '</div>';

        echo '<div align="left" class="news">';
        echo '<p></p>';
        echo $news[1];
        echo $news[2];
        echo $news[3];
        echo $news[4];
        echo $news[5];
        echo $news[6];
        echo $news[7];
        echo $news[8];
        echo $news[9];
        echo $news[10];
        echo $news[11];
        echo '</div>';
    }

if($news1 != NULL) {
    $news = $news1;
    post_news();
}

if($news2 != NULL) {
    $news = $news2;
    post_news();
}

if($news3 != NULL) {
    $news = $news3;
    post_news();
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:11:39.570

这里有很多错误。

1 -**你不是在创建一个`$news`数组**。`$news`在顶部创建一个数组并填充它：

```
$news = array();
$news[0]=file(...) 
```

2 -在任何情况下**`$news`都不是全局**的，所以函数看不到它。修改函数以允许您传入变量：

```
function post_news($news){... 
```

然后用

```
post_news($news); 
```

或者使新闻数组全局化。您可以通过创建`$news`一个全局数组 ( `$GLOBALS['news']=array()`) 然后在函数中从全局数组中访问它，或者`global $news`在函数的开头调用它来做到这一点。

3 -**了解`isset()`**. 您尝试只打印出每个新闻项目`$news[0], etc`而不检查该键是否存在元素。尝试使用`foreach()`循环。

4 - 假设您将新闻项目设置为一个数组，获得正确的变量范围，并使用 foreach 循环，**然后您尝试`echo`一个数组**......这是您无法做到的。更改对每个新闻项目的每个元素的`file()`调用或循环并打印字符串。`file_get_contents()`

## 总体而言，您需要了解有关范围、数组和循环的更多信息。

看看这段代码。我试图解释我在每一步都在做什么以及为什么它是一种更好的方法：

```
<?php
//Create an array with all the possible news items
$possible_files = array(
    "./public/ita/news/news.txt",
    "./public/ita/news/news2.txt",
    "./public/ita/news/news3.txt",
    "./public/ita/news/news4.txt",
    "./public/ita/news/news5.txt"
);

//Now loop through these files, check if they exist, and then pass the lines into your function
foreach($possible_files as $possible_file){
    if (file_exists($possible_file)){
         /*why create an array and then loop through it?
           Do everything here... grab the lines and then
           have it echeod out via post_news() in one step */
        $lines_of_news_items = file($possible_file);    
        //PASS this array into the function!
        post_news($lines_of_news_items); 
    }
}

function post_news($news_item_lines){
    //watch out for align='left'... it's an antiquated attribute
    echo '<div align="left" class="newstitle">';
    //print the first line here
    echo $news_item_lines[0]; 
    echo '</div>';
    echo '<div align="left" class="news">';
    //btw, this <p></p> is bad practice... if you're trying to create space use css
    echo '<p></p>'; 
    //now loop though each line, starting with the second line ([1])
    for($i=1;$i<count($news_item_lines);$i++){ 
        echo $news_item_lines[$i];
    }
    echo '</div>';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:07:28.730

问题是你的函数：你在`$news`那里使用但你没有将它声明为全局变量，也没有将它传递给函数。

所以`$news`在你的函数中是未定义的。

你应该用你的函数调用`post_news($news);`和你的函数定义替换`function post_news($news)`它才能工作（全局变量是坏的......）。

# ruby-on-rails - 我可以将参数传递给 rake db:seed 吗？

> ID：14450434
> 
> 赞同：34
> 
> 时间：2013-01-22T02:04:23.987
> 
> 标签：ruby-on-rails, rake, rakefile, seeding

我的一部分`seeds.rb`将大量数据加载到数据库中。我希望能够有选择地加载这些数据。例如

```
$ rake db:seed 
```

或者

```
$rake db:seed[0] 
```

只会加载运行网站所需的数据，而

```
$ rake db:seed[1] 
```

也会将我的大数据文件加载到数据库中。这可能吗？我怎样才能做到这一点？如果没有，谁能想到一种方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-22T02:08:37.950

不幸的是，Rake 参数传递起来很痛苦（[`db:seed`](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/railties/databases.rake#L185)无论如何都不会传递它的参数）。

你最好的选择是使用环境变量来传递你的额外参数：

```
rake db:seed minimal=yes 
```

和

```
unless ENV["minimal"]
  # do stuff 
```

ETC

# c# - MonoGame 加载 png 文件

> ID：14450449
> 
> 赞同：1
> 
> 时间：2013-01-22T02:05:21.797
> 
> 标签：c#, xna, monogame

我正在尝试在我的代码中引用 png 文件。在 Visual Studio 的解决方案资源管理器中，我将该项目添加到名为“Content”的文件夹中，该文件夹位于默认的“MonoGameWindowsApplication1”文件夹中。

我试过了：

```
Texture2D background = Content.Load<Texture2D>("background"); 
```

和

```
Texture2D background = Content.Load<Texture2D>("Content/background"); 
```

但他们都回来为空。如何获得对图像的引用？

如果有帮助，这是 Visual Studio 的屏幕截图：http: [//imgur.com/NBcoBjT](http://imgur.com/NBcoBjT)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:28:50.983

可以在**[此处](http://monogame.codeplex.com/discussions/360681)**找到看起来与您的问题相关的解决方案。您需要更改`Content/background`为 24 或 32 位颜色格式。

# c# - C# 中的 XML 注释有什么用？

> ID：14450455
> 
> 赞同：4
> 
> 时间：2013-01-22T02:06:54.447
> 
> 标签：c#, xml, xml-comments

> **可能重复：**
> [在 .NET 中使用 XML 注释有什么好处？](https://stackoverflow.com/questions/2584901/what-are-the-virtues-of-using-xml-comments-in-net)

```
/// <summary>
///  Set error message for multilingual language.
/// </summary> 
```

像上面那样在 C# 中使用 XML 注释有什么用，我什么时候使用它们.. XML 注释带有 3 个引号，对于像 /* ... */ 这样的 XML 注释是否有块注释过程

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T02:09:01.050

XML 注释是一种记录代码中类型和成员的结构化方式。如果您使用它，编译器将为您的类型和成员生成 XML 文档，然后可以通过[Sandcastle](http://sandcastle.codeplex.com/)之类的工具对其进行处理以自动构建帮助。Visual Studio 也使用生成的 XML 文件中的信息（以提供智能感知）。

您可以通过以下方式使用[多行分隔符](http://msdn.microsoft.com/en-us/library/5fz4y783.aspx)：

```
/** <summary>
Your info here
*/ 
```

尽管工具不会以这种形式生成它。

有关详细信息，请参阅MSDN 上的[XML 文档注释](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T02:10:27.510

它是一种记录代码的方法。这是一个参考

[http://msdn.microsoft.com/en-us/magazine/dd722812.aspx](http://msdn.microsoft.com/en-us/magazine/dd722812.aspx)

# android - 在android中监控正在运行的应用程序

> ID：14450457
> 
> 赞同：2
> 
> 时间：2013-01-22T02:07:05.963
> 
> 标签：android, service, monitoring, process-monitoring

我正在尝试为 android 设备制作一个 kiosk 类型的应用程序，并且我想确保该应用程序始终在运行，并在它崩溃时重新启动它。

我最初的想法是创建一个服务，固定在前台，它会定期检查（使用系统`Handler`）以查看 Activity（带有 UI 的主应用程序）是否正在运行。如果它没有运行，那么服务应该通过使用以下方式启动一个意图来重新启动 Activity：

```
Intent intent = new Intent("android.intent.action.MAIN");
intent.setComponent(ComponentName.unflattenFromString("com.blah.blah.MyApp"));
intent.addCategory("android.intent.category.LAUNCHER");
startActivity(intent); 
```

是否可以查看特定应用程序是否正在运行？而对于额外的互联网点 - 我可以判断该应用程序是否在前台（并使用服务将活动保持在前台）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:57:04.380

您可以检查在顶部运行的当前应用程序（任何应用程序）包名称 `String packageName= getSystemService(Context.ACTIVITY_SERVICE).getRunningTasks(1).get(0)).topActivity.getPackageName();`

在您的后台服务中循环运行此代码并检查您的应用程序。

# r - R：在ggplot调用中使用变量的分配值而不是变量名

> ID：14450460
> 
> 赞同：0
> 
> 时间：2013-01-22T02:07:14.743
> 
> 标签：r, ggplot2

我有一个`ggplot`使用分面和手动颜色分配的图表。我想在调用本身之外定义变量，这样我就不必去挖掘`scale_colour_manual`和其他区域来更改使用的值`breaks`或`values`调用`scale_colour_manual`.

假设这些是变量。

```
var1 <- 'series.a'
var1.label <- "Series A result"
var2 <- 'series.b'
var2.label <- "Series B result" 
```

在`values`or`breaks`我可以使用这样的东西：

```
c('Series A result' = alpha("blue", 0.5),'Series B result' = alpha("red",0.5)) 
```

这很好，因为上面的代码生成以下输出：

```
Series A result Series B result 
    "#0000FF80"     "#FF000080" 
```

而这段代码：

```
c(var1.label = alpha("blue", 0.5), var2.label = alpha("red",0.5)) 
```

不绘图是因为它产生了这个，其中元素的名称与我们用于颜色的值不匹配，即“A 系列结果”和“B 系列结果”：

```
 var1.label  var2.label 
"#0000FF80" "#FF000080" 
```

**所以问题似乎是：我如何才能`c()`使用变量的值而不是它们的名称？**

我看过`eval`，`parse`甚至`force`但他们似乎没有做我想做的事。我怀疑这是 R 的一个非常简单的部分，但这不是我遇到的问题。如果需要，示例代码如下。

```
require(ggplot2)
require(reshape)
require(scales)

# Create data
set.seed(78910)
mydf <- data.frame(
                   mydate = seq(as.Date('2013-01-01'), 
                       as.Date('2013-01-10'), by = 'day'),
                   series.a = runif(10, 100, 200),
                   series.b = runif(10, 2000, 3000))
tail(mydf)
mymelt <- melt(mydf, id.var = 'mydate')

# Define user variables
var1 <- 'series.a'
var1.label <- "Series A result"
var2 <- 'series.b'
var2.label <- "Series B result"

# Which makes creating labels for the faceting easier
mymelt$label.col <- ifelse(mymelt$variable == var1, var1.label, var2.label)
tail(mymelt)

# Plots without problems
ggplot(mymelt, aes(y = value, x = mydate)) +
    geom_line(aes(colour = label.col)) +
    scale_colour_manual("",
                        breaks = c('Series A result','Series B result'),
                        values = c('Series A result' = alpha("blue", 0.5),
                        'Series B result' = alpha("red",0.5))) +
    facet_wrap(~ label.col, ncol = 1, scale = "free_y")

# Does not plot
ggplot(mymelt, aes(y = value, x = mydate)) +
    geom_line(aes(colour = label.col)) +
    scale_colour_manual("",
                        breaks = c(var1.label, var2.label),
                        values = c(var1.label = alpha("blue", 0.5),
                        var2.label = alpha("red",0.5))) +
    facet_wrap(~ label.col, ncol = 1, scale = "free_y")

# Not plotting because names in second case are not correct
c('Series A result' = alpha("blue", 0.5),'Series B result' = alpha("red",0.5))
c(var1.label = alpha("blue", 0.5), var2.label = alpha("red",0.5)) 
```

期望的结果是这种图像：

![截屏](../Images/7043a80b012b0e5bde6f2358e797f6b7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:16:43.590

```
v <- c(alpha("blue", 0.5), alpha("red",0.5))
names(v) <- c(var1.label, var2.label)

> v
## Series A result Series B result 
##     "#0000FF80"     "#FF000080" 
```

然后`values = v`在代码中使用。

# javascript - 文件替代？DOM？

> ID：14450464
> 
> 赞同：0
> 
> 时间：2013-01-22T02:07:43.843
> 
> 标签：javascript, jquery, dom-manipulation

所以最近有人建议我不要使用 document.write。但我似乎无法弄清楚如何使用 DOM 操作使其文档打印在屏幕上。此功能的作用是让您按下按钮输入汽车行驶的里程数并获得碳足迹。只有使用 document.write 它才会在您单击按钮后覆盖整个页面。我试过 getElementbyId 但它似乎没有打印任何东西所以我知道我可能没有正确使用它。关于在不覆盖页面的情况下完成功能的替代方案的任何想法都会很有帮助>

下面是我只使用 document.write 的代码，它覆盖了整个页面：

```
<script>

    $(document).ready(function() {
        $(".button").click(function() {

            var myNumber = 19.2;
            var myAnswer = prompt ("How many miles did you travel?");
            document.write( " Your Carbon Foot print is:" + myAnswer * myNumber + "lbs" );

          });
      });
      </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:09:51.677

DOM 操作涉及创建文档元素并将它们插入到文档树中。如果您想使用 JS 进行大量工作，这应该成为您的第二天性：

```
- document.write(...
+ $("<span>").text(' Your Carbon Foot print ...').appendTo("body"); 
```

您可能希望将文本附加到其他内容，但上述内容应该具有类似的效果，并且不会覆盖整个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:45:30.900

听起来您对 JQuery 还很陌生 - 欢迎！

一旦你有了 JQuery，你很少（如果有的话）需要回到 document.write 或其他低级 DOM 工具（尽管不时了解它们仍然很重要）

因此，从 HTML 开始。你可能会选择类似的东西：

```
<button id="calcbutton">Calculate Footprint</button>
<div id="carbonresult"></div> 
```

在您的示例中，我使用 id 来标识按钮而不是类（请记住 id 应该是唯一的，类可以应用于多个元素），但您的方式仍然有效。

然后对于脚本：

```
$(document).ready(function(){
    $("#calcbutton").click(function(){
        var convFactor = 19.2;
        var milesTravelled = prompt("How many miles did you travel?");
        var resultMsg = " Your Carbon Footprint is: " + milesTravelled * convFactor
        $("#carbonresult").text(resultMsg);
    });
}); 
```

通过使用 JQuery 将结果放置在使用 .text()、.html() 或 append() 选择的元素中，您可以获得更多控制权。

# iphone - 如何在没有科学计数法或小数的情况下格式化数字

> ID：14450466
> 
> 赞同：2
> 
> 时间：2013-01-22T02:07:57.773
> 
> 标签：iphone, objective-c, nsstring, stringwithformat

我的目标是为 iPhone 创建一个客户计算器应用程序，并使用 Xcode 编写我的应用程序。我找不到解决方案的问题是如何在不使用科学计数法或一组小数的情况下格式化数字。

我试过了...

```
buttonScreen.text = [NSString stringWithFormat:@"%f",currentNumber];

buttonScreen.text = [NSString stringWithFormat:@"%g",currentNumber]; 
```

`%f`格式化总是在小数点后打印 6 位数字，所以如果用户输入“5”，它会显示 5.000000。

`%g`格式化在 6 位后跳转到科学计数法，因此 1000000 在显示时变为 1e+06。

**我希望能够在没有无意义的小数或科学记数法的情况下显示以下数字：**

```
123,456,789;
1.23456789;
12345.6789;
-123,456,789;
-1.23456789;
-12345.6789; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:16:26.427

对于浮点数格式，您可以使用 %f，并且您必须指定最小字段宽度和字符精度。如果使用 %4.2f，则表示最小宽度为 4 个字符（如果使用少于 4 个，将在左侧用空格填充）和 2 个字符以表示精度。如果您想要 10 个字符的最小宽度和 0 个小数精度，请使用 %10.0f 。

在您的特定情况下，您应该使用 %.0f 来表示没有十进制精度的数字。

```
buttonScreen.text = [NSString stringWithFormat:@"%.0f",currentNumber]; 
```

[您可以在此处](http://en.cppreference.com/w/cpp/io/c/fprintf)找到快速参考。不是objective-c 文档，而是等价的。

为了完整起见，您可以找到 NSString 格式化遵循的规范文档：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html)

和这里：

[http://pubs.opengroup.org/onlinepubs/009695399/functions/printf.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/printf.html)

## 编辑截断：

```
buttonScreen.text = [NSString stringWithFormat:@"%d",(int)currentNumber]; 
```

但是，您应该阅读一些关于浮动表示、精度和强制转换的内容，以了解可能的不良行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T02:17:43.240

看看[`NSNumberFormatter`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003705)。

配置正确，它可以在适当的时候添加逗号。您还需要告诉它要使用多少有效数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T02:14:28.667

您与 Xcode 和 Objective-c 的交互并不像您在这里怀疑的那样多，底层实现是[printf](http://www.cplusplus.com/reference/cstdio/printf/)。查看[本教程，了解如何使用 printf 格式说明符](http://www.codingunit.com/printf-format-specifiers-format-conversions-and-formatted-output)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T02:15:42.230

那么你希望它看起来像什么？stringWithFormat 格式是旧 C sprintf 的超集。那么您是否尝试过使用 d 和变体来满足您的喜好？

# javascript - 如何写“鉴于班级中至少有 1 个孩子是真/假，那么……”的条件？

> ID：14450467
> 
> 赞同：1
> 
> 时间：2013-01-22T02:08:04.500
> 
> 标签：javascript, jquery, class

```
if( $('.adv').css('display') != 'none' )
{
    Navigation.closePopUp();
} 
```

问题是这个班级有几个孩子，如果这个班级的 display css**中至少有一个孩子**不等于 none ，那就做点什么……

有可能有这个条件吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:11:00.313

您可以使用`visible`选择器和`length`属性。

```
if ( $('.adv:visible').length ) 
```

# java - 从文本文件读取时检查字符串中的第一个字符会导致异常：应该快速/简单:)

> ID：14450474
> 
> 赞同：0
> 
> 时间：2013-01-22T02:08:46.470
> 
> 标签：java, string, exception, text, input

**对于更有经验的程序员来说，这应该是一个相对快速的解决方案……我只是想输入一个文本文件，并在不以“>”或“+”开头的每一行前面放置一个“#”。问题是我遇到了一个异常， .charAt(0) 超出了字符串的范围。但是在控制台执行该行之前，应该从文本文件中读取字符串——我错过了什么？我是否需要插入一行内容以使前面声明的 lineFromFile String 不为空？我不知道该怎么办...**

导入java.io.*；

公共类 FirstTry {

```
/**
 * @param args
 */
public static void main(String[] args) throws Exception{
    // Declare variables corresponding to names of i/o files
    String oldFilename = "";
    String newFilename = "";

    // Console input of i/o filenames
    BufferedReader cin;
    cin = new BufferedReader(new InputStreamReader(System.in));

    System.out.println("What is the input text? Include path and .txt extension) ");
    oldFilename = cin.readLine();
    System.out.print(oldFilename);

    System.out.println("What is the output text? Include path and .txt extension) ");
    newFilename = cin.readLine();
    System.out.print(newFilename);

    cin.close();

    // Read text from old file,     
    BufferedReader fin;
    fin = new BufferedReader(new FileReader(oldFilename));

    while (fin.ready())
    {
      String lineFromFile;
      lineFromFile = fin.readLine();
      System.out.println(lineFromFile);

      if (lineFromFile.charAt(0) != '>' || lineFromFile.charAt(0) != '+')
      {

        PrintWriter fout;
        fout = new PrintWriter(new FileWriter(newFilename));
        fout.println('#' + lineFromFile);
        fout.close();
      }
    } // while

    fin.close();

    System.out.print("Text processing complete.");

}//main 
```

}//公开课

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:23:31.017

正如@Patashu 提到的，行可能有 0 个字符。这将导致`lineFromFile`位置 0 没有字符，因为它是一个空字符串。我会将`while`循环的一部分更改为：

```
String lineFromFile;
lineFromFile = fin.readLine();
System.out.println(lineFromFile);

if (lineFromFile.length() == 0) continue;

if (lineFromFile.charAt(0) != '>' || lineFromFile.charAt(0) != '+') {... 
```

我插入的那一行检查该行是否为空白。如果是，跳到循环的下一次迭代，从文件中读取下一行。

作为一个完整的旁注，您可能需要重新考虑`PrintWriter`为（可能）输入文件中的每一行创建和关闭一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:10:18.453

如果文件的第一行有 0 个字符怎么办？

我认为java中的语法是lineFromFile.Length == 0。如果这是真的，你知道这一行是空的，并且想以不同的方式处理它（让它成为一个单一的#我想）

# javascript - 使用向上和向下箭头键选择（突出显示）表格行

> ID：14450478
> 
> 赞同：1
> 
> 时间：2013-01-22T02:09:02.803
> 
> 标签：javascript, dom

在这个问题上我需要专家的帮助。我的问题是，如何修改下面的 javascript 编码，以允许用户手动导航（使用向上和向下箭头键）以选择和突出显示表格行。

为用户添加此功能将非常有用。

非常感谢和感谢您的所有帮助和支持

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#mstrTable {
     border: 1px solid black
}
#mstrTable td, th {
     border: 1px solid black
}

#mstrTable tr.normal td {
    color: black;
    background-color: white;
}
#mstrTable tr.highlighted td {
    color: white;
    background-color: gray;
}
</style>
</head>
<body>
  <table id="mstrTable">
     <thead>
      <tr>
        <th>File Number</th>
        <th>Date1</th>
        <th>Date2</th>
        <th>Status</th>
        <th>Num.</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>KABC</td>
        <td>09/12/2002</td>
        <td>09/12/2002</td>
        <td>Submitted</td>
        <td>0</td>

      </tr>
      <tr>
        <td>KCBS</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Approved</td>
        <td>1&nbsp;</td>
      </tr>

      <tr>
        <td>WFLA</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Submitted</td>
        <td>2</td>
      </tr>
      <tr>
        <td>WTSP</td>
        <td>09/15/2002</td>
        <td>09/15/2002</td>
        <td>In-Progress</td>
        <td>3</td>
      </tr>
    </tbody>
  </table>

  <br>
<input type="button" name="" value="GoTo 0" onmouseup="GoTo('mstrTable',0);" />
<input type="button" name="" value="GoTo 1" onmouseup="GoTo('mstrTable',1);" />
<input type="button" name="" value="GoTo 2" onmouseup="GoTo('mstrTable',2);" />
<input type="button" name="" value="GoTo 3" onmouseup="GoTo('mstrTable',3);" />

<script type="text/javascript">

var table = document.getElementById("mstrTable");
var thead = table.getElementsByTagName("thead")[0];
var tbody = table.getElementsByTagName("tbody")[0];
var ishigh;

tbody.onclick = function (e) {
  e = e || window.event;
  var td = e.target || e.srcElement; //assumes there are no other elements inside the td
  var row = td.parentNode;
  if (ishigh&&ishigh!=row){
    ishigh.className='';
  }
  row.className = row.className==="highlighted" ? "" : "highlighted";
  ishigh=row;
}

thead.onclick = function (e) {
  e = e || window.event;
  var th = e.target || e.srcElement;  //assumes there are no other elements in the th
  //alert(th.innerHTML);  ### FOR LATER (DB BACK END USE) ###
}

function GoTo(id,nu){
  var obj=document.getElementById(id),
      trs=obj.getElementsByTagName('TR');
  nu = nu + 1;
  if (trs[nu]){
    if (ishigh&&ishigh!=trs[nu]){
      ishigh.className='';
    }
    trs[nu].className = trs[nu].className=="highlighted" ? "" : "highlighted";
    ishigh=trs[nu];
   }
}
</script>

</body>
</html> 
```

# c# - 跟踪 ActivityId 在 WCF 错误处理程序中重置

> ID：14450483
> 
> 赞同：0
> 
> 时间：2013-01-22T02:09:47.687
> 
> 标签：c#, wcf, trace, ierrorhandler

我有一个带有 IErrorHandler 实现的 WCF 服务。在其 HandleError 方法中，我使用 TraceSource 记录异常：

```
public bool HandleError(Exception error)
{
    tracer.TraceEvent(TraceEventType.Error, 0, error.ToString());
    return true;
} 
```

但是，当输入此方法时，Trace.CorrelationManager.ActivityId 已从我在服务方法开始时设置的更改。所以我得到一个带有一些随机活动 ID 的日志条目，这会破坏活动跟踪。

WCF 是这样做的吗？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:10:43.040

我认为由于 WCF，您需要做一些额外的工作。

看看这个链接是否有帮助：

[为 WCF 中的异常处理扩展/自定义 FaultContractExceptionHandler](http://entlib.codeplex.com/discussions/400959)

# java - 并行列表与具有多个变量的类列表

> ID：14450492
> 
> 赞同：0
> 
> 时间：2013-01-22T02:10:36.277
> 
> 标签：java, android

我正在创建一个用于跟踪位置的 x,y 值列表。进行android优化非常重要，所以我想知道从资源使用的角度来看哪种方法更好。

方法 1：创建一个包含 x 和 y 的 int 的类（Position），然后创建一个列表：positions。

方法 2：创建并行列表：positionsX 和 positionY。

我之所以问，是因为方法 1 似乎对 OO 编码是最用户友好的，但我对 Java 或 android 的内部工作原理知之甚少，而且我担心额外类的开销会抵消任何好处。

或者它们是否足够接近以至于它并不重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:15:02.167

两种解决方案之间的性能差异可以忽略不计。根据更详细的细节，例如什么类型的列表（数组、列表、映射等）以及您访问数据的方式，将确定哪个更快，可以忽略不计。

但是，从可读性、OO 和可维护性的角度来看，方法 1 以压倒性优势获胜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:14:50.073

Android 上的 Java 垃圾收集速度很慢。如果您创建和丢弃大量 Position 对象，当 GC 启动时，您的应用程序可能会出现明显的暂停。如果您使用类解决方案，您可以在类中创建对象缓存以缓解此问题。

如果您使用数组，请注意迭代器和 foreach 循环：上次我检查时，它们为每个元素创建了一个新对象。

无论如何，只有当您创建大量（例如每秒数千个）这些对象时，性能差异才会可见。

# asp.net-mvc - 我可以告诉 asp.net mvc 在 xyz/ 中获取内容吗？

> ID：14450494
> 
> 赞同：2
> 
> 时间：2013-01-22T02:11:12.613
> 
> 标签：asp.net-mvc

我的根文件夹中有一个`file.css`多数民众赞成。有没有办法可以将它放在一个名为的文件夹中，`/content`或者`/root/`它不会弄乱我的主项目根文件夹？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T02:20:05.823

是的你可以。要在您的视图文件中引用它，您可以执行以下操作：（MVC4 / Razor v2）

```
 <link href="~/content/file.css" rel="stylesheet" type="text/css" /> 
```

对于 MVC3

```
<link href="@Url.Content("~/content/file.css")" rel="stylesheet" type="text/css" /> 
```

# c# - 在 C# 中创建 openFileDialog 方法

> ID：14450495
> 
> 赞同：1
> 
> 时间：2013-01-22T02:11:30.763
> 
> 标签：c#, methods, openfiledialog

我的 .NET Windows 应用程序有多个能够打开和查看文本文件的实例。当我通过我的代码创建单独的 openFileDialogs 时，我没有问题让它工作。在尝试清理我的代码时，我创建了一个方法，但我还很新，并且得到了一个红色的波浪线。有人可以看看这个并告诉我我做错了什么吗？谢谢。

我正在尝试调用如下所示的方法：

```
textBox_ViewFile.Text = LoadFromFile(); 
```

那么我的方法如下：

```
static string[] LoadFromFile()
    {
        OpenFileDialog openFileDialog1 = new OpenFileDialog();
        openFileDialog1.InitialDirectory = "c:\\";
        openFileDialog1.Filter = "Text files (*.txt)|*.txt|All files (*.*)|*.*";
        openFileDialog1.RestoreDirectory = false;
        openFileDialog1.ShowHelp = true;

        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            try
            {
                if (openFileDialog1.OpenFile() != null)
                {
                    return (File.ReadAllLines(openFileDialog1.FileName));
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
            }
        }
    } 
```

在这种情况下，我在 VS2010 中的“LoadFromFile()”下遇到语法错误

```
static string[] LoadFromFile()" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:18:17.300

`return`如果您的任何一个陈述是，您就错过了一个`if`陈述`false`

```
 if (openFileDialog1.ShowDialog() == DialogResult.OK)
    {
        try
        {
            if (openFileDialog1.OpenFile() != null)
            {
                return (File.ReadAllLines(openFileDialog1.FileName));
            }
            // missing
            return null;
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
            // missing
            return null;
        }
    }
    // missing
    return null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T02:16:21.543

`textBox_ViewFile.Text`是一个`string`。您的函数返回一个数组 ( `string[]`)。您需要使函数返回单个`string`.

```
return string.Join('\n', File.ReadAllLines(openFileDialog1.FileName)); 
```

或者：

```
return File.ReadAllText(openFileDialog1.FileName); 
```

# microsoft-metro - 如何在 Windows 8 磁贴上使用字体字形？

> ID：14450504
> 
> 赞同：0
> 
> 时间：2013-01-22T02:12:51.907
> 
> 标签：microsoft-metro, windows-store-apps, live-tile

我试图弄清楚如何使用复选框之类的字体字形，并在此页面中检查 Windows 8 磁贴示例中使用的字体：底部“任务列表”示例下的[磁贴模板目录。](http://msdn.microsoft.com/en-us/library/windows/apps/Hh761491.aspx)

我找不到太多关于如何让它工作的信息，因为在磁贴中设置字体类型似乎存在限制。

在[Segoe UI 符号图标列表](http://msdn.microsoft.com/en-us/library/windows/apps/jj841126.aspx)页面上，它说：“如果您正在使用拼贴，则不能使用这些字形，因为您无法指定拼贴字体，并且 PUA 字形无法通过 font-fallback 获得。”。

但我只是想知道为什么在磁贴模板目录页面上会有一个带有字体字形的示例？

有没有办法在 tile xml 中设置字体类型？或者有哪些替代方案可能会得到相同的结果？

![带有字形的应用程序磁贴](../Images/5af3dc6d4b9d8695274941abd82a07d3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:38:49.770

在私人使用区域之外有很多 Unicode 符号字形可以正确回退。例如，您可以通过 Windows 中的 charmap.exe 小程序找到它们。喜欢 ✓ 和 ☐（U+2713 和 U+2610）

# javascript - 显示具有事件目标的对象的属性

> ID：14450508
> 
> 赞同：0
> 
> 时间：2013-01-22T02:13:46.763
> 
> 标签：javascript, events, object, attributes

我已经编写了基于表单中的用户输入创建框的代码。我使用构造函数为这些框提供这些值；名称、颜色、ID 和编号。我应该这样做，以便当用户单击页面中的框时，会出现一个警告框，说明该单个框的这些值是什么。我无法弄清楚如何正确显示大多数这些属性。

这是我为框分配属性值并将它们添加到页面的函数：

```
function addBox(newbox) {  
   for (var i = 0; i < newbox.number; i++) { 
   counter++;                         
   var scene = document.getElementById("scene");              
   var div = document.createElement("div"); 
   div.setAttribute("id", counter);                  
   div.className += " " + "box"; 
   div.innerHTML += newbox.name; 
   div.style.backgroundColor = newbox.color; 
   var x = Math.floor(Math.random() * (scene.offsetWidth-101));
   var y = Math.floor(Math.random() * (scene.offsetHeight-101));
   div.style.left = x + "px";
   div.style.top = y + "px"; 
   scene.appendChild(div); 
   div.onclick = display;           
    }                      
  } 
```

这是我用于显示有关框的信息的功能：

```
function display(e) {
   var a = e.target.attributes;
   var b = e.target;
   console.log(b.name);     //shows "undefined"
   alert("id:" + "" + a[0].value); 
  } 
```

我的警报消息正常工作，它根据计数器的值为每个框显示一个单独的数字。我不明白为什么我不能让 e.target 工作以显示名称、颜色或数字。我是初学者，所以任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:20:29.617

您需要使用`.getAttribute()`您设置的属性。

```
function display(e) {
    var element = e.target || window.event.target;

    console.log(element.getAttribute('name'));   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:39:55.253

如果您希望它在 IE 中工作：

```
function display(e) {
   b = e ? e.target : window.event.srcElement,
   ret=[];
   console.log(b.getAttribute("name")); 
   // all attributes:
   for(att in b){
      ret.push(att+b[att]);
   }
   alert(ret.join("\n"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T04:31:22.137

在 IE 中工作

```
$(document).click(function (e) {
    	var element = e.target || window.event.target;
        console.log(element.getAttribute('id')+":"+element.getAttribute('name'));  
    });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

# yii - SOA 和 RESTful 架构中的授权（不是身份验证）

> ID：14450509
> 
> 赞同：0
> 
> 时间：2013-01-22T02:13:46.830
> 
> 标签：yii, soa, restful-architecture

我正在开发一个小型网络应用程序。它使一个会计流程自动化。

我起草了一个业务需求和一个SOA结构，但是由于我的限制，我不能更进一步，尤其是授权部分。

让我感到困惑的一件事是我应该使用 RESTful API 进行授权（而不是身份验证）吗？还是我应该在后端进行授权（用户-> 角色-> 允许的操作），而不暴露此授权服务？

SOA + RESTful API 处理授权的最佳实践是什么？

真诚的，尼古拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:15:25.240

REST API 的问题是您无法使用`session`例如登录用户。每次用户尝试访问受保护的资源时，他都需要在请求中发送一个标识他的令牌（我们使用令牌不在请求中发送密码）。

因此，即使用户调用该方法`/authorize/{...}`，您也需要在调用其他方法时再次检查其凭据，因为没有登录状态。

所以对我来说，最好的方法是：

1.  用户使用其用户名和令牌作为参数发送请求
2.  在服务器端检查令牌是否有效（与用户名匹配且未过期）
3.  如果令牌有效，那么用户就是他所说的那个人，所以你可以检查它的权利（如果他有权访问资源）
4.  如果他有权访问，那么您继续请求
5.  否则，您会响应（未经授权）`HTTP`之类的错误`401`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:00:06.663

如果我没有误解你的问题，我认为正确的事情是服务器的每个服务请求都可能返回访问错误（或无权访问资源的错误）或请求的结果。

在 JSON 中，服务器返回类似这样的内容

```
{
"status": "ko",
"error": {
    "number": "xx",
    "msg" ; "error you dont have right to access"
 } 
```

}

如果没问题

```
{
"status": "ok",
"result": {
    ...
 } 
```

}

# windows-8 - 如何在打开时阻止 AppBar 捕获触摸活动？

> ID：14450512
> 
> 赞同：1
> 
> 时间：2013-01-22T02:14:22.317
> 
> 标签：windows-8, winrt-xaml

我提前道歉，这个很难解释。

我有一个 GridView，里面装满了可选择的图块。进行选择时，通过将 IsOpen 和 IsSticky 设置为 true，将显示底部 AppBar。这工作正常。

但是，当 AppBar 在第一次选择后出现时，它会捕获任何触摸活动，然后在对 AppBar 外部区域进行任何触摸后将其释放，但该触摸手势会被吸收。我最终触摸屏幕两次以执行第二次选择。

在 Windows 8 的开始画面中，您可以无缝选择多个磁贴。出现的底部栏不会干扰后续的触摸手势。但是在我的应用程序中，该栏捕获了第一个手势，我最终选择了第二个图块两次。这让我的应用感觉反应迟钝。

我该如何解决？

**要复制这个：**

1) 在 Visual Studio 2012 的 Windows Store 下启动一个新的“Grid App (XAML)”。

2) 在 GroupedItemsPage.xaml 中，将以下 XAML 添加到其中：

```
<Page.BottomAppBar>
    <AppBar>
        <Button Content="X"/>
    </AppBar>
</Page.BottomAppBar> 
```

3) 找到 x:Name="itemGridView" 的 GridView 并设置其**SelectionMode="Extended"**和**IsSwipeEnabled="true"**

```
<GridView
    x:Name="itemGridView"
    AutomationProperties.AutomationId="ItemGridView"
    AutomationProperties.Name="Grouped Items"
    Grid.RowSpan="2"
    Padding="116,137,40,46"
    ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
    SelectionMode="Extended"
    IsSwipeEnabled="true"
    IsItemClickEnabled="True"
    ItemClick="ItemView_ItemClick"> 
```

4) 在代码隐藏文件中添加以下代码：

```
public GroupedItemsPage()
    {
        this.InitializeComponent();

        itemGridView.SelectionChanged += ItemGridViewOnSelectionChanged;
    }

    private void ItemGridViewOnSelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (itemGridView.SelectedItems.Count > 0)
        {
            this.BottomAppBar.IsOpen = true;
            this.BottomAppBar.IsSticky = true;
        }
        else
        {
            this.BottomAppBar.IsSticky = false;
            this.BottomAppBar.IsOpen = false;
        }
    } 
```

5）运行它并注意在第一次选择之后出现应用栏，但随后您选择第二个图块的第二个手势被吸收了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:45:34.917

信不信由你，解决方案真的很简单。您必须更改设置`BottomAppBar.IsOpen`和的顺序`BottomAppBar.IsSticky`：

```
private void ItemGridViewOnSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (itemGridView.SelectedItems.Count > 0)
    {
        //this.BottomAppBar.IsOpen = true;
        //this.BottomAppBar.IsSticky = true;

        // must be done in this order for the app bar to work correctly
        this.BottomAppBar.IsSticky = true;
        this.BottomAppBar.IsOpen = true;
    }
    else
    {
        //this.BottomAppBar.IsSticky = false;
        //this.BottomAppBar.IsOpen = false;

        // I have a note in my code to use the following order,
        // but ordering for this doesn't seem to matter.
        this.BottomAppBar.IsOpen = false;
        this.BottomAppBar.IsSticky = false;
    }
} 
```

我不确定为什么排序很重要，但确实如此。

# android - Android 模拟器方向

> ID：14450515
> 
> 赞同：1
> 
> 时间：2013-01-22T02:14:33.947
> 
> 标签：android, orientation, emulation

我是移动开发领域的新手。我已经完成了为 iPhone 平台构建的应用程序，现在我正在开发该应用程序的 Android 版本。在 Xcode 中，当 UIViewController 的方向切换为横向时，模拟器在到达应用程序的那个部分时会自动翻转到该方向。在 Eclipse for Android 中并非如此。我已将我的 Android 活动的方向切换为横向，但在模拟器上运行时，视图不会切换。我了解到按 ctrl+fn+F11 会激活开关，但这是我的问题：

是否可以像在 Xcode 中那样以自动提示模拟器切换到横向的方式以编程方式设置应用程序？

谢谢（你的）信息！

# c++ - 指针是如何比较的？

> ID：14450523
> 
> 赞同：2
> 
> 时间：2013-01-22T02:15:28.557
> 
> 标签：c++, c, pointers

```
int palindrome(char * str){
char * pt1 = str;
char * pt2 = str;
    if(pt1==NULL){
        std::cout<<"\n invalid string";
        return -1;
    }
    while(*pt2 != '\0')
        pt2++;
    pt2--;
    while(pt1 < pt2){ // why does this work correctly ?
        if(*pt1 != *pt2){
            std::cout<<"\n not palindrome";
            return 0;
        }
        else{
        pt1++;
        pt2--;
        }
    }
std::cout<<"\n yes palindrome";
return 1;
} 
```

你好
，这是一个检查传递的 char* 是否指向回文的函数。
这里有两个指针
pt1 - 从开始移动 fwds
pt2 - 从结束开始向后移动
现在我不希望它们在中间相遇时继续..
所以我检查是否总是 pt1 为什么？我不是在比较 *pt1 和 *pt2。
它比较什么值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T02:17:29.667

指针指向内存中的一个位置。因此，指针的值是内存地址。对于给定的内存分配，其中的每个字节都是连续的，并且分配给它的下一个更高的地址（0x0000、0x0001、0x0002 等）因此，当一个指针大于另一个指针**并且两个指针属于相同的内存分配时**，它在所述分配中更进一步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T03:08:23.000

以下是导致此代码块正确执行的三个概念：

1.  您的指针在连续的内存块（输入字符串）上运行
2.  指针“值”是地址（基本上只是在运行时分配的任意数字）
3.  C 以定义明确的递增方式为连续内存分配地址

由于指针实际上只是整数（例如 0x000001、0x000002 等），因此您可以对它们使用比较运算符。

最后，由于字符串的内存将是连续且不断增加的，因此您可以进行一定程度的抽象：内存中***更远*****的指针将评估为大于内存中*更早*的地址。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T02:18:42.260

指针模型内存地址。因为第一个指针在第二个之前指向内存中的某个位置，所以小于比较成功。

他们在中间相遇时不会继续，因为 when `a == b`, then`a < b`一定是假的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T02:19:17.763

您在代码中使用了两种比较，`pt1 < pt2`和`*pt1 != *pt2`. 在第一种情况下，您比较*内存地址*，即您现在在字符串中的哪个位置。一旦`pt1 >= pt2`，您的指针正在交叉或将要交叉。在第二种情况下，您使用 -operator*取消引用*指针`*`并比较这些指针指向的*值。*

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-22T02:19:41.627

指针是地址。当您比较两个指针时，它正在比较它们的地址，这对您的使用是错误的。您需要维护一个偏移量或其他整数类型的变量来确定位置何时相遇。**

# php - 如何将自签名证书与 XAMPP 一起用于使用 cURL 的 HTTPS 请求？

> ID：14450530
> 
> 赞同：2
> 
> 时间：2013-01-22T02:16:23.040
> 
> 标签：php, curl, https, xampp, ssl-certificate

我安装了 XAMPP，我需要测试一些 HTTPS 请求。首先，我尝试配置 XAMPP，以便可以使用 HTTPS 请求。

这就是我所做的：

1) 在 php.ini 文件中，我取消了`openssl module`.

2) 在 httpd.conf 文件中，我取消了注释`LoadModule ssl_module modules/mod_ssl.so`

3）在 httpd-ssl.conf 文件中，我重定向了

`SSLCertificateFile "conf/ssl.crt/ipm.crt"`和

`SSLCertificateKeyFile "conf/ssl.key/ipm.key`" 到我的 .crt 和 .key 文件。

4) 我将我的 ipm.crt 和 ipm.key 文件放在 apache 文件夹`ssl.crt`和`ssl.key`XAMPP 中。

5）我通过执行以下操作创建了我的自签名证书：

```
openssl req -config openssl.cnf -new -out ipm.csr -keyout ipm.pem

openssl rsa -in ipm.pem -out ipm.key

openssl x509 -in ipm.csr -out ipm.crt -req -signkey ipm.key -days 365 
```

现在我正在使用一个脚本来发送一个 XML 文件。我正在使用 cURL，我的代码是：

```
<?php
  /*
   * XML Sender/Client.
   */
  // Get our XML. You can declare it here or even load a file.

  $xml = file_get_contents("data.xml");

  // We send XML via CURL using POST with a http header of text/xml.
  $ch = curl_init();

  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
  curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);

  curl_setopt($ch, CURLOPT_CAINFO,  getcwd().'/cert/ipm.crt');
  curl_setopt($ch, CURLOPT_SSLCERT, getcwd().'/cert/ipm.pem');
  curl_setopt($ch, CURLOPT_SSLCERTPASSWD,'password');

  //I use this line only for debugging through fiddler. Must delete after done with debugging.
  curl_setopt($ch, CURLOPT_PROXY, '127.0.0.1:8888');

  // set URL and other appropriate options
  curl_setopt($ch, CURLOPT_URL, "https://ipv4.fiddler/iPM/receiver.php");
  curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
  curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_POST, 1);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $xml);
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
  curl_setopt($ch, CURLOPT_REFERER, 'https://ipv4.fiddler/iPM/receiver.php');
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  $ch_result = curl_exec($ch);
  echo "Result = ".$ch_result;

  echo 'Curl error: ' . curl_error($ch);

  curl_close($ch);
  // Print CURL result.
?> 
```

但我得到了这个错误：`Curl error: unable to use client certificate (no key found or wrong pass phrase?)`

但是，当我创建证书时，我确实将以下短语作为密码：`password`

对此事有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:18:52.053

我相信您还需要指定`CURLOPT_SSLKEYPASSWD`：

```
curl_setopt($ch, CURLOPT_SSLCERTPASSWD, 'password');
curl_setopt($ch, CURLOPT_SSLKEYPASSWD, 'password'); 
```

# nhibernate - 使用 FluentNHibernate 的相同实体关系

> ID：14450533
> 
> 赞同：3
> 
> 时间：2013-01-22T02:16:32.860
> 
> 标签：nhibernate, asp.net-mvc-4, fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试使用 FluentNHibernate 创建与同一实体的关系，但不知道如何。有人成功了吗？你能帮助我吗？

这是我的实体类：

```
public class Menu
{
    public virtual Guid MenuId { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual string Controller { get; set; }
    public virtual int Order { get; set; }
    public virtual Menu ParentMenu { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:58:52.037

映射可能是这样的

```
public class MenuMap : ClassMap<Menu>
{
  public MenuMap()
  {
      Table("MenuTable");
      Id(x => x.MenuId)
      ...

      // parent
      References(x => x.ParentMenu).Column("ParentId");

      // children, see note below
      HasMany(x => x.ChildMenus)
      .Inverse()
      .KeyColumn("ParentId")
      .Cascade.AllDeleteOrphan()
  }
} 
```

注意：因为*Menu*实例可以有*parent*，它也可以有*children*。我使用子集合扩展了映射，应该像这样声明：

```
public class Menu
{
    ...
    public virtual Menu ParentMenu { get; set; }
    public virtual IList<Menu> ChildMenus { get; set; }
} 
```

# ruby-on-rails - 自指关联

> ID：14450537
> 
> 赞同：0
> 
> 时间：2013-01-22T02:17:10.950
> 
> 标签：ruby-on-rails, model-associations, rails-activerecord

这是一个后续问题[。](https://stackoverflow.com/questions/14391962/ruby-on-rails-model-association-with-multiple-foreign-keys)

这是我目前建立师生关系的设置。

*用户模型*

```
 has_many :teacher_links, :foreign_key => :student_id, :dependent => :destroy, :class_name => "TeacherStudentLink"
  has_many :student_links, :foreign_key => :teacher_id, :dependent => :destroy, :class_name => "TeacherStudentLink"
  has_many :students, :through => :student_links
  has_many :teachers, :through => :teacher_links 
```

*教师学生链接模型*

```
class TeacherStudentLink < ActiveRecord::Base
  attr_accessible :user_id, :student_id, :teacher_id

  belongs_to :user
  belongs_to :student, :class_name => "User"
  belongs_to :teacher, :class_name => "User"
end 
```

这对我来说似乎很尴尬，因为teacher_student_links 表有三列：用户、学生、教师。用户可以有很多老师，也可以有很多学生。如果我没有教师栏，只是假装“用户”是“教师”，那么一切都会完美。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:04:30.260

cheeseweasel 在评论中所说的，你的链接不应该有 user_id

```
class TeacherStudentLink < ActiveRecord::Base
  attr_accessible :student_id, :teacher_id

  belongs_to :student, :class_name => "User", :foreign_key => :student_id
  belongs_to :teacher, :class_name => "User", :foreign_key => :teacher_id
end 
```

*   belongs_to foreign_key 指定当前表的外键（链接）
*   has_many foreign_key 指定另一个表上的外键（链接）

# java - 使用 Java 的 ReferenceQueue

> ID：14450538
> 
> 赞同：27
> 
> 时间：2013-01-22T02:17:20.027
> 
> 标签：java, memory, garbage-collection, weak-references, soft-references

`SoftReference`确实只有`WeakReference`在创建为实例变量时才有帮助？在方法范围内使用它们有什么好处吗？

另一大部分是`ReferenceQueue`。除了能够跟踪哪些引用被确定为垃圾之外，还`Reference.enqueue()`可以用来强制注册一个对象进行垃圾回收吗？

例如，是否值得创建一个在对象中占用大量内存资源（由强引用持有）并创建引用以将它们排入队列的方法？

```
Object bigObject;
public void dispose() {
    ReferenceQueue<Object> queue = new ReferenceQueue<Object>();
    WeakReference<Object> ref = new WeakReference<Object>(bigObject, queue);
    bigObject = null;
    ref.enqueue();
} 
```

（想象一下，在这种情况下，Object 代表一个使用大量内存的对象类型……比如`BufferedImage`什么）

这有什么现实效果吗？或者这只是浪费代码？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-22T02:38:49.473

引用队列的一个常见习惯用法是，例如子类`WeakReference`化以附加清理事物所需的信息，然后轮询 a`ReferenceQueue`以获取清理任务。

```
ReferenceQueue<Foo> fooQueue = new ReferenceQueue<Foo>();

class ReferenceWithCleanup extends WeakReference<Foo> {
  Bar bar;
  ReferenceWithCleanup(Foo foo, Bar bar) {
    super(foo, fooQueue);
    this.bar = bar;
  }
  public void cleanUp() {
    bar.cleanUp();
  }
}

public Thread cleanupThread = new Thread() {
  public void run() {
    while(true) {
      ReferenceWithCleanup ref = (ReferenceWithCleanup)fooQueue.remove();
      ref.cleanUp();
    }
  }
}

public void doStuff() {
  cleanupThread.start();
  Foo foo = new Foo();
  Bar bar = new Bar();
  ReferenceWithCleanup ref = new ReferenceWithCleanup(foo, bar);
  ... // From now on, once you release all non-weak references to foo,
      // then at some indeterminate point in the future, bar.cleanUp() will
      // be run. You can force it by calling ref.enqueue().
} 
```

例如，`CacheBuilder`当`weakKeys`被选中时，Guava 实现的内部[使用](http://google.github.io/guava/releases/19.0/api/docs/com/google/common/cache/CacheBuilder.html#weakKeys())这种方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T02:24:32.473

如果一个对象只有`WeakReference`s （或没有任何引用！）指向它，那么只要 Java 需要在内存中腾出更多空间，它就可以被垃圾收集。所以，`WeakReference`只要你希望一个对象保留在内存中，你就可以使用 s，但你不需要它保持那么糟糕（例如，如果 Java 需要垃圾收集它，没问题，你可以同时以某种方式取回它Java有更好的性能）

排队 a`WeakReference`允许您迭代`ReferenceQueue`并确定哪些引用已被垃圾收集，哪些没有。仅此而已 - 所以只有在您需要知道这一点时才这样做。

阅读更多： [http ://weblogs.java.net/blog/2006/05/04/understanding-weak-references](http://weblogs.java.net/blog/2006/05/04/understanding-weak-references)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-26T13:43:24.363

一件常见的事情是创建软引用的映射。

```
Map<String, SoftReference<BigThing>> cache = new HashMap<>();
Set<String> thingsIAmCurrentlyGetting = new HashSet<String>();
Object mutex = new Object();

BigThing getThing(String key) {
  synchronized(mutex) {
    while(thingsIAmCurrentlyGetting.contains(key)) {
      mutex.wait();
    }
    SoftReference<BigThing> ref = cache.get(key);
    BigThing bigThing = ref == null ? null : ref.get();
    if(bigThing != null) return bigThing;
    thingsIAmCurrentlyGetting.add(key);
  }

  BigThing bigThing = getBigThing(key); // this may take a while to run.

  synchronized(mutex) {
    cache.put(key, bigThing);
    thingsIAmCurrentlyGetting.remove(key);
    mutex.notifyAll();
  }

  return bigThing;
} 
```

我在这里展示我的老学校——新的 java 包可能有更简洁的方法来做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-25T10:23:38.797

不知道这里的问题是什么，但是：

1) soft ref 尽量保持引用，直到 jvm 真的真的需要内存。非常适合缓存，尤其是 LRU 缓存。看看 Guava 中的许多例子。

2）weak ref 不要试图阻止 gc 释放对象。如果您想知道该对象是否仍在某处使用，则使用它们。例如，它们用于存储有关线程和类的信息，因此当不再使用线程或类时，我们可以丢弃与之相关的元信息。

3) phantom ref 很弱，但不允许您引用实际对象。通过这种方式，您可以确保传递幻影无法恢复实际对象（这是弱参考的风险）。幻影参考也阻止要收集的对象，直到您清除参考。

ReferenceQueue：你不会在里面排队。gc 会为你做的。它们使您可以知道某些参考文献何时发布，而无需一一检查。

# php - codeigniter 中的双数据库

> ID：14450542
> 
> 赞同：0
> 
> 时间：2013-01-22T02:17:40.917
> 
> 标签：php, mysql, database, codeigniter

我在 Codeigniter 中有一个大门户，用户可以在其中注册，他们可以评论每个产品，他们可以创建他们的个人资料，连接到这个的论坛（定制）等等......

另外公司的主要产品也存储在同一个数据库中。

要求是由于产品表比用户更重要，现在备份起来有些困难，我的意思是我们必须将数据库一分为二。即一个用于用户及其活动，另一个用于主要产品。

我对在单个 codeigniter 中连接 2 个 db 感到有点困惑，因为我们必须在视图/模型中从两个 db 调用/获取数据

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:22:12.983

从这里：

[http://ellislab.com/codeigniter/user-guide/general/models.html#loading](http://ellislab.com/codeigniter/user-guide/general/models.html#loading)

* * *

## 连接到您的数据库

加载模型时，它不会自动连接到您的数据库。您可以使用以下连接选项：

您可以从 Controller 类或 Model 类中使用此处描述的标准数据库方法进行连接。您可以通过第三个参数传递 TRUE（布尔值）来告诉模型加载函数自动连接，并且将使用数据库配置文件中定义的连接设置：

```
$this->load->model('Model_name', '', TRUE); 
```

**您可以通过第三个参数手动传递数据库连接设置：**

```
$config['hostname'] = "localhost";
$config['username'] = "myusername";
$config['password'] = "mypassword";
$config['database'] = "mydatabase";
$config['dbdriver'] = "mysql";
$config['dbprefix'] = "";
$config['pconnect'] = FALSE;
$config['db_debug'] = TRUE;

$this->load->model('Model_name', '', $config); 
```

* * *

您还可以在 config 中将其设置为 db2 参数，并在控制器中用作数据库设置的短链接。

# javascript - Google App Script 中的 OnClose 或 OnExit 函数

> ID：14450544
> 
> 赞同：2
> 
> 时间：2013-01-22T02:17:48.250
> 
> 标签：javascript, google-apps-script

我试图在一张主表中获取超过 50 个 Google 电子表格的“当前查看者”的动态列表。到目前为止，我已经运行了使用 onOpen 函数插入新行的代码（只是记录：用户电子邮件、查看文档、进入日期、进入时间等的行），我还得到了退出时删除条目的代码 - 我无法在退出时触发代码！

这就是为什么我正在寻找一个`OnClose()`或`OnExit()`功能 - 就像那个`onOpen`。有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T06:14:41.060

Apps 脚本中没有 onClose/onExit 功能。

# java - 将游戏移植到 Android 时出现 NullPointerException

> ID：14450545
> 
> 赞同：1
> 
> 时间：2013-01-22T02:17:56.180
> 
> 标签：java, android

我正在将 Java Maze 应用程序移植到 Android 中。这意味着我正在使用给我的 Java 代码（我没有编写这部分），重写了一些类（即，将 Java 图形更改为 Android 图形以便它在 Android 上工作，我创建了 Android UI 活动（我已经完成了）。

当我运行我的程序时，我得到一个 NullPointerException，它抱怨以下行是异常的原因：

```
maze.newMaze(root, cells, dists, startx, starty); 
```

这是错误：

```
01-19 19:22:53.157: E/AndroidRuntime(638): FATAL EXCEPTION: Thread-79
01-19 19:22:53.157: E/AndroidRuntime(638): java.lang.NullPointerException
01-19 19:22:53.157: E/AndroidRuntime(638):  at falstad.MazeBuilder.run(MazeBuilder.java:729)
01-19 19:22:53.157: E/AndroidRuntime(638):  at java.lang.Thread.run(Thread.java:856) 
```

错误线显然在 MazeBuilder 的 run 方法中，我发现“迷宫”为空并且参数有效。我还发现在 Mazebuilder 的构建方法中将 maze 设置为 null ...它通过 Maze 对象并设置 maze = mz (maze)。

所以我在 Maze.java 中找到了 mazebuilder.build(...) 被调用的地方，它位于底部的方法 maze.build() 中，参数为“this”：

```
 /**
 * Method obtains a new Mazebuilder and has it compute new maze, 
 * it is only used in keyDown()
 * @param skill level determines the width, height and number of rooms for the new maze
 */
private void build(int skill) {
    // switch screen
    state = STATE_GENERATING;
    redraw();
    // select generation method
    switch(method){
    case 1 : mazebuilder = new MazeBuilderPrim(); // generate with Prim's algorithm
    break ;
    case 0: // generate with Falstad's original algorithm (0 and default), note the missing break statement
    default : mazebuilder = new MazeBuilder(); 
    break ;
    }
    // adjust settings and launch generation in a separate thread
    mazew = skill_x[skill];
    mazeh = skill_y[skill];
    int roomcount = skill_rooms[skill];
    mazebuilder.build(this, mazew, mazeh, roomcount, skill_partct[skill]);
    // mazebuilder calls back by calling newMaze() to return newly generated maze
} 
```

读到这个告诉我参数'this'是空的。我已经阅读了java中的“this”函数并且仍然不理解它，所以我不确定它为什么为空。我也猜测问题的一部分是因为我有

```
mazebuilder = new MazeBuilder() 
```

并不是

```
mazebuilder = new MazeBuilder(this) 
```

当我尝试添加“this”参数（如上面的代码行）时，它向我抱怨构造函数 MazeBuilder(Maze) 未定义。但是我的 GeneratingActivity GA 与 Maze maze 是不同的类型......所以很明显我不能创建一个设置 GA = maze 的构造函数......我很困惑。

再次，我非常感谢任何帮助和耐心。这对新手来说是一场噩梦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:22:20.660

您需要为`newMazeBuilder`类创建一个参数化构造函数，以将当前活动上下文传递为：

```
 public class newMazeBuilder{
    public Context context;

    public newMazeBuilder(Context context){
      this.context=context;
    }

    ///now we context instead of this for passing Context to other components 

    private void build(int skill) {
         // your code here....
        mazebuilder.build(context, mazew, mazeh, roomcount, skill_partct[skill]);

    }

} 
```

在 Activity 中创建`newMazeBuilder`类对象为：

```
newMazeBuilder mazebuilder = new newMazeBuilder(Your_Current_Activity.this); 
```

# c# - 在 XNA 中，如何从另一个类修改主游戏类中的某些内容？

> ID：14450546
> 
> 赞同：0
> 
> 时间：2013-01-22T02:17:55.823
> 
> 标签：c#, xna

好的，默认情况下，`Game`XNA PC 游戏的类有一个名为 的公共 bool 属性`IsMouseVisible`，当设置时启用/禁用鼠标可见。我有另一个类`Configs`，它监视被按下的特定键。现在我要做的是设置它，以便当我按下特定键时，它会改变`IsMouseVisible`. 这就是我卡住的地方，因为我不知道如何更改另一个类的值。

我知道我可以在`Configs`类中创建一个 bool 值并使其在按下键时更改，然后使其在主`Game`类更新时将值设置为`IsMouseVisible`Configs 类值，但问题是，我可能想要创建多个不同的值（不仅仅是`IsMouseVisible`），这些值可以`Game`从另一个类在主类中设置。

还有我的问题，我怎么能在`Game`另一个类的主类中设置一些东西？（无需为我希望访问的每个值创建多个更新。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:21:03.427

在主类的构造函数中创建对象“Configs”。执行此操作时，为 Config 对象提供对主类的引用。现在 Configs 可以访问主类的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:26:55.547

您需要将游戏类的引用传递给 Configs 类。在 Configs 的类构造函数中，为游戏类的实例设置一个私有成员变量。从那里你可以操纵游戏。见下文：

游戏课

```
public class Game1 : Game
{
    Configs configs; 

    GraphicsDeviceManager _graphics;
    SpriteBatch _spriteBatch;

    public Game1()
    {
        _graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {
        // Pass THIS game instance to the Configs class constructor.
        configs = new Configs(this);
        base.Initialize();
    }

    protected override void LoadContent()
    {
        _spriteBatch = new SpriteBatch(GraphicsDevice);
    }

    protected override void UnloadContent()
    {
    }

    protected override void Update(GameTime gameTime)
    {
        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);
        base.Draw(gameTime);
    }
} 
```

配置类

```
public class Configs
{
    // Reference to the main game class.
    private Game _game;

    public Configs(Game game)
    {
       // Store the game reference to a local variable.
        _game = game;
    }

    public void SetMouseVisible()
    {
        // This is a reference to you main game class that was 
        // passed to the Configs class constructor.
        _game.IsMouseVisible = true;
    }
} 
```

这基本上是其他人一直在说的。但是，您似乎很难在没有看到一些代码的情况下理解这些概念。因此，我提供了它。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:12:16.187

三件事，它们都与您对@Patashu 答案的评论有关：

首先，如果将`Game`对象传递给构造函数，则不需要将其设置为 ref 类型参数，因为它是通过引用自动传递的（由于是对象）。

其次，您的`GameComponent`子类需要`Game`在其默认构造函数中引用该对象的原因......是它已经有一个`Game`内置的引用。在您的`Configs`班级中，调用`this.Game` That is the main `Game`instance。

第三，如果你的构造函数已经接收到一个对象的一个​​参数，它就不需要同一个对象的同一个实例的另一个参数。

[阅读文档。](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gamecomponent.game.aspx) 这很有用。

# c - FIFO 上的多个读取器/写入器（命名管道）

> ID：14450547
> 
> 赞同：0
> 
> 时间：2013-01-22T02:18:02.507
> 
> 标签：c, linux, cygwin, pipe, mkfifo

我使用 mkfifo 创建了一个命名管道，并在其上打开了读取器和写入器。然后我继续在同一个 fifo 上打开第二个读取器/写入器，但打开返回的是 ENXIO。

```
std::string n = "/tmp/test";
int err;
err = mkfifo(n.c_str(), 0666);
if (err == -1)
    return NULL;

int pipefd[2];
pipefd[0] = open(n.c_str(), O_RDONLY | O_NONBLOCK);
pipefd[1] = open(n.c_str(), O_WRONLY | O_NONBLOCK);
open(n.c_str(), O_RDONLY | O_NONBLOCK); // fails - ENXIO
open(n.c_str(), O_WDONLY | O_NONBLOCK); // fails - ENXIO 
```

打开管道时是否需要设置任何特定标志以允许多次打开它？我已经阅读了文档，但没有找到关于为什么上面会失败的解释（到目前为止我只在 Cygwin 上测试过）。如此处[所述](http://linux.about.com/library/cmd/blcmdl4_fifo.htm)，在 fifo 上打开多个读取器/写入器是完全有效的。

我将使用它来复制 WinAPI 的 OpenEvent 功能，该功能需要由单独的项目使用。

编辑：在 Debian 和 Ubuntu 上对此进行了测试——两​​者都符合 POSIX 并允许多个编写者（因此上面的代码没有出现任何问题）。Cygwin 的实现被破坏（即不符合 POSIX）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:39:39.217

管道只有一个读取进程和写入进程。在 POSIX 中，管道是单向的。

请改用套接字文件。它是全双工的，允许多进程通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T07:34:24.927

尝试删除 O_NONBLOCK

并且第四次调用 open 函数时必须使用 O_WRONLY。

# ruby-on-rails - 为什么“按钮标签”不会显示确认对话框？

> ID：14450560
> 
> 赞同：3
> 
> 时间：2013-01-22T02:19:36.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我的代码。
尽管它已确认，但单击时不会显示任何对话框。
为什么？

看法

```
<%= button_tag( :name => 'destroy', :class => "btn btn-danger", :confirm => 'Are you sure?') do %>
Remove
<% end %> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T02:40:43.803

你需要`:data => { :confirm => ... }`

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T02:49:41.507

您使用的是什么版本的导轨？

弃用选项 [https://github.com/rails/rails/commit/fc092a9cba5fceec38358072e50e09250cf58840](https://github.com/rails/rails/commit/fc092a9cba5fceec38358072e50e09250cf58840)`:confirm` _`:data => { :confirm => 'Text' }`

```
# I am using 3.2.11 and this works 
<%= button_tag(:name => 'destroy', :class => "btn btn-danger", :data => {:confirm => 'Are you sure?'}) do %>
Remove
<% end %>

# this will output <button name="destroy" confirm="Are you sure?" class="btn btn-danger">Remove</button>
# notice confirm is a tag attribute, which won't be picked up by javascript
<%= button_tag(:name => 'destroy', :class => "btn btn-danger", :confirm => 'Are you sure?') do %>
Remove
<% end %> 
```

如果您不使用 firebug，我强烈建议您使用它。
[https://addons.mozilla.org/en-US/firefox/addon/firebug/](https://addons.mozilla.org/en-US/firefox/addon/firebug/)

在深入研究 ruby​​ 之前，请务必检查输出 HTML。

# bash - 比较两个文件的行，打印第一个文件独有的行

> ID：14450562
> 
> 赞同：16
> 
> 时间：2013-01-22T02:19:44.143
> 
> 标签：bash

我有两个包含唯一排序单词列表的文本文件：

文件 1：

```
a
b
c
d 
```

文件 2：

```
b
c 
```

我需要一个仅包含文件 1 中无关行的新文件，因此结果将是

```
a
d 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T02:35:19.390

这[`comm`](http://pubs.opengroup.org/onlinepubs/009604599/utilities/comm.html)是为了：

> **comm** -- 选择或拒绝两个文件共有的行

你要

```
comm -23 "File 1" "File 2" 
```

这将抑制*仅在文件 2 中的行和两个文件中的行的*输出*，*只在文件 1 中留下*行。*[Greg Wooledge 的 wiki 上的](http://mywiki.wooledge.org/BashFAQ/036) 更多答案

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T02:21:07.107

您可以使用`grep`：

```
grep -f file1.txt -vFx file2.txt 
```

请注意标志`F, --fixed-strings`和`x, --line-regexp`, 的使用，以强制执行考虑整行的比较。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-30T14:46:20.587

试试这个

`$ join file1.txt file2.txt -v 1`

`$ man join`

```
-a FILENUM
   print unpairable lines coming from file FILENUM, where FILENUM is 1 or 2, corresponding to FILE1 or FILE2
-v FILENUM
   like -a FILENUM, but suppress joined output lines 
```

# c# - 使用 MVVM 模式处理 MediaOpened、BufferingStarted 等 MediaElement 事件？

> ID：14450567
> 
> 赞同：1
> 
> 时间：2013-01-22T02:20:08.127
> 
> 标签：c#, wpf, mvvm, mediaelement

我进行了很多搜索，但找不到有关如何执行此操作的示例。

目标是在视图模型中处理这些事件，同时避免视图后面代码中的代码。示例代码和 XAML 将不胜感激。如果您的解决方案需要使用外部 DLL，请提供源代码。

视图模型应该独立于任何视图的存在进行编译。

实际上，我不确定这是否可以做到。欢迎对此问题的任何见解。

到目前为止，请参阅有关进度的示例代码。

[http://database.hugetiger.com/dbExplore/MVVMCode.aspx](http://database.hugetiger.com/dbExplore/MVVMCode.aspx)

目前 mediaopend 事件 msgbox 来自后面的代码。如何修改它以使 msgbox 来自 MyViewModel 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:14:57.690

听起来`System.Windows.Interactivity`和`Microsoft.Expression.Interactions`组合将非常适合您的需求。

在此示例中，我们使用`System.Windows.Interactivity` `EventTrigger`事件`MediaElement` `BufferingStarted`来更改属性并使用方法调用模型上的`Microsoft.Expression.Interactions`方法

```
<Window x:Class="WpfApplication14.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Height="350" Width="525"
            xmlns:expint="http://schemas.microsoft.com/expression/2010/interactions"
            xmlns:sysint="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity">
        <Grid>
            <MediaElement >
                <sysint:Interaction.Triggers>
                    <sysint:EventTrigger EventName="BufferingStarted" >
                        <expint:ChangePropertyAction PropertyName="MyProperty" Value="NeValue" />
                        <expint:CallMethodAction  MethodName="MyModelMethod"/>
                    </sysint:EventTrigger>
                </sysint:Interaction.Triggers>
            </MediaElement>
        </Grid>
    </Window> 
```

Yuo 将不得不添加对`System.Windows.Interactivity`dll`Microsoft.Expression.Interactions`的引用。这`Microsoft.Expression.Interactions`是[ExpressionBlend SDK的一部分](http://www.microsoft.com/en-us/download/details.aspx?id=10801)

希望这会有所帮助，因为我发现这个组合对于 WPF 开发来说非常棒。

快乐编码:)

# c# - 将字符串写入（更新）到 IsolatedStorage 不起作用

> ID：14450569
> 
> 赞同：0
> 
> 时间：2013-01-22T02:20:32.453
> 
> 标签：c#, windows-phone-7, isolatedstorage

当应用程序启动时，会执行文本文件的更新检查。如果远程文件的版本号高于本地版本，则将远程文件保存到隔离存储并替换当前文件。不幸的是，它没有按预期工作。旧文件还在存储中。

```
 public static bool WriteFileToIsolatedStorage(String content, String fileName)
    {
        bool result = false;

        MessageBox.Show(Leser.GetVersionInfo(content));

        IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication();
        StreamWriter writer = new StreamWriter(new IsolatedStorageFileStream(fileName, FileMode.Truncate, store));

        try
        {
            writer.Write(content);
            writer.Flush();
            writer.Close();

            result = true;
        }
        catch
        {
            result = false;
        }

        return result;
    } 
```

我尝试了几个 FileMode 参数，如“Create”或“Truncate”，但是当应用程序重新启动时，总​​是有可用的更新。写入存储时没有错误，但版本号表明它无法正常工作。

我的项目资源管理器中有一个文本文件，其中包含应如上所述更新的数据。一开始我会检查这个文件的存储空间，如果没有找到，它将被写入。这按预期工作。但是更新的版本没有写，我不知道为什么不写。

解决方案：写作工作正常 :) 问题是我读取了资源文件而不是保存到隔离存储的文件

```
 public static String ReadFileContents(String file)
    {
        String content = String.Empty;

        var ResourceStream = Application.GetResourceStream(new Uri(file, UriKind.Relative));
        if (ResourceStream != null)
        {
            Stream myFileStream = ResourceStream.Stream;
            if (myFileStream.CanRead)
            {
                StreamReader myStreamReader = new StreamReader(myFileStream);
                content = myStreamReader.ReadToEnd();
            }
        }

        return content;
    } 
```

对不起大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:35:40.210

这是我用来创建文件并替换它的代码....只需更改关键字即可`Truncate to Create`帮助您。

```
public static bool WriteFileToIsolatedStorage(String content, String fileName)
    {
        bool result = false;

        //MessageBox.Show(Leser.GetVersionInfo(content));

        IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication();

        StreamWriter writer = new StreamWriter(new IsolatedStorageFileStream(fileName, FileMode.Create, store));

        try
        {
            writer.Write(content);
            writer.Flush();
            writer.Close();

            result = true;
        }
        catch
        {
            result = false;
        }

        StreamReader reader = new StreamReader(new IsolatedStorageFileStream(fileName, FileMode.Open, store));
        string rawData = reader.ReadToEnd();
        reader.Close();

        return result;
    } 
```

我使用流阅读器只是为了验证它是否被替换:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:45:07.550

我看不出您的代码有任何明显错误，但试试这个：

```
 public static bool WriteFileToIsolatedStorage(String content, String fileName)
    {
        bool result = false;

        MessageBox.Show(Leser.GetVersionInfo(content));
        try
        {
            using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
            using (IsolatedStorageFileStream stream = new IsolatedStorageFileStream(fileName, FileMode.Truncate, store))
            using (StreamWriter writer = new StreamWriter(stream))
            {
                writer.Write(content);

                result = true;
            }
        }
        catch
        {
            result = false;
        }

        return result;
    } 
```

处理你实例化的任何东西不仅是一个好主意，它还应该确保所有东西都被刷新和关闭（即使这可能在 StreamWriter 中隐式发生，所以这有点在黑暗中拍摄）

# vector - 从离散向量场中提取积分曲线（Mathematica）

> ID：14450570
> 
> 赞同：2
> 
> 时间：2013-01-22T02:20:35.517
> 
> 标签：vector, wolfram-mathematica, field, curve, integral

我正在尝试编写一个 Mathematica 脚本，可以将离散向量场插入到连续向量场。然后我想从连续矢量场中提取积分曲线（场线）。

我知道Mathematica的`ListStreamPlot`函数可以直观地呈现积分曲线；但是，我需要包含它们的实际点。

我考虑过编写一种蛮力方法来达到以下效果：似乎可以递归地确定积分曲线。如果在列表中选择了一个点，那么积分曲线中的“下一个”点将是具有最近斜率的点。（每个“点”实际上是一个向量，因此每个都有自己的斜率。）“下一个”点只有 4 个候选点——当前点的上、下、左或右。然后“下一个”点将成为新的起点，并且该过程将递归直到到达网格的边缘。

但是，我想知道是否有更简单的方法使用 Mathematica 的高级函数。（我也不知道我的方法在概念上是否正确。）

我非常感谢您对这项任务的任何想法或建议。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T03:35:59.010

仅供参考： http: [//mathematica.stackexchange.com](http://mathematica.stackexchange.com)

补一些数据：

```
data = Table[{-1 - x^2 + y, 1 + x - y^2}, {x, -3, 3, 0.2}, {y, -3, 3, 0.2}]; 
```

建造一个`ListStreamPlot`

```
plot = ListStreamPlot[data, 
          StreamStyle -> "Line", Frame -> False, PlotRangePadding -> 0] 
```

![在此处输入图像描述](../Images/5dcab1fa379ddd9fa63e0ed1294818d5.png)

在 Mathematica 中，一切都是一个**表达式**- 所以即使这个图基本上也是图形基元的可视化代码。您可以通过各种方式提取这些原语 - 包括您需要的线条。例如 - 只需选择部分表达式，您就可以找到包含此图的所有点：

```
points = plot[[1, 2, 1]]; 
```

如果您需要查看整个表达式评估`plot//InputForm`。现在您还可以进行模式匹配以查看内部表达式。让我们找到包含所有行的所有索引：

```
indexes = Cases[plot, Line[index_] -> index, Infinity]; 
```

现在，您可以分析、绘制和设置线条样式了。例如 - 设计一个突出显示原始图中特定行的应用程序：

```
Animate[Show[
  plot,
  Graphics[{Red, Opacity[.5], , Thickness[.02], 
    Line[points[[indexes[[k]]]]]}]]
 , {{k, 1, "lines"}, 1, Length[indexes], 1}, FrameMargins -> 0] 
```

![在此处输入图像描述](../Images/2accd4daae203dbacfa176736a78a47d.png)

# django - django - 如何将表单选择排列成多列

> ID：14450571
> 
> 赞同：1
> 
> 时间：2013-01-22T02:20:42.070
> 
> 标签：django, templates

下边是

表格.py：

```
GRADE_CHOICE=(
               ('1','Grade 1'),
               ('2','Grade 2'),
               ('3','Grade 3'),
               ('4','Grade 4'),
               ('5','Grade 5'),
               ('6','Grade 6') )

grades=forms.MultipleChoiceField(
               choices=GRADE_CHOICE,
               required=True, 
               widget=CheckboxSelectMultiple()) 
```

模板.html：

```
< divclass="controls">
{{ form.grades }}
< /div> 
```

上面的代码工作正常，模板显示正确的数据。但是，它仅以一列或逐行显示数据。

```
<ul>
    <li><label for="id_grades_0"><input type="checkbox" name="grades" value="1" id="id_grades_0" /> Grade 1</label></li>
    <li><label for="id_grades_1"><input type="checkbox" name="grades" value="2" id="id_grades_1" /> Grade 2</label></li>
    <li><label for="id_grades_2"><input type="checkbox" name="grades" value="3" id="id_grades_2" /> Grade 3</label></li>
    <li><label for="id_grades_3"><input type="checkbox" name="grades" value="4" id="id_grades_3" /> Grade 4</label></li>
    <li><label for="id_grades_4"><input type="checkbox" name="grades" value="5" id="id_grades_4" /> Grade 5</label></li>
    <li><label for="id_grades_5"><input type="checkbox" name="grades" value="6" id="id_grades_5" /> Grade 6</label></li>
</ul> 
```

有没有办法改变它，让它在一行中显示 3 条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:36:58.137

你可以用风格来做，这是一个简单的例子，它可以通过多种方式完成。

风格：

```
li.three  { width:33.333%;float:left;display:inline } 
```

标记：

```
<ul>
     <li class='three'>A</li>
     <li class='three'>B</li>
     <li class='three'>C</li>
     <li class='three'>D</li>
     <li class='three'>E</li>
     <li class='three'>F</li>
     <li class='three'>G</li>
     <li class='three'>H</li>
</ul>

#to add the style use the "attrs" kwarg.
grades=forms.MultipleChoiceField(
           choices=GRADE_CHOICE,
           required=True, 
           widget=CheckboxSelectMultiple(attrs={'class': 'three'})) 
```

或者，您可以自定义`render`功能，但样式更简单，可以完成工作。

我无法忍受在每个 li 和 ul 上都有类的标记。 [您还可以自定义渲染函数以允许将样式放在 ul 与 li 上](https://stackoverflow.com/questions/6448102/django-how-to-pass-css-to-form-as-ul)。

# jquery - 必须单击两次才能通过 Bootstrap 按钮插件运行功能

> ID：14450576
> 
> 赞同：2
> 
> 时间：2013-01-22T02:21:26.127
> 
> 标签：jquery, twitter-bootstrap

为什么我必须单击两次才能运行使用`active`Bootstrap 按钮插件添加的类的功能？

```
var monthly = $("input[name='montly_total']");
var once = $("input[name='once_total']");

$(".button-selector").click(function () {
 $(".button-selector.monthly.active").sum("click", monthly);
 $(".button-selector.once.active").sum("click", once)
}); 
```

现场示例：http: [//jsfiddle.net/ynts/3Z6sm/](http://jsfiddle.net/ynts/3Z6sm/)。输入仅在第二次单击按钮时更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:55:03.827

这些按钮[使用起来很痛苦](https://github.com/twitter/bootstrap/issues/2380)，因为它们不会触发您可以将功能挂钩的任何自定义事件。

也就是说，这是一个丑陋的`setTimeout()`解决方法：

```
$(".button-selector").click(function () {
    // break out of click handler chain
    setTimeout(function() {
        // by the time this runs, the active state will have been updated
        $(".button-selector.monthly.active").sum("click", monthly);
        $(".button-selector.once.active").sum("click", once)
    }, 0);
}); 
```

# http - 网站开发人员能否判断我是否使用 Webbrowse 控件来浏览他们的网站？

> ID：14450577
> 
> 赞同：1
> 
> 时间：2013-01-22T02:21:35.310
> 
> 标签：http, webbrowser-control, user-agent

网站开发人员能否判断我是否使用 Webbrowse 控件来浏览他们的网站？以及如何使 Webbrowse 控件看起来像网站的 Web 浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:25:14.837

看看这里：[http](http://www.useragentstring.com/) ://www.useragentstring.com/ ，它向您展示了已知浏览器和其他 Web 客户端正在使用哪些用户代理字符串。您可以将已知（其他）浏览器的用户代理字符串发送到服务器，以将您自己标识为该浏览器。

你也会发现这很有帮助，我认为：http: [//blogs.msdn.com/b/ieinternals/archive/2009/10/08/extending-the-user-agent-string-problems-and-alternatives.aspx](http://blogs.msdn.com/b/ieinternals/archive/2009/10/08/extending-the-user-agent-string-problems-and-alternatives.aspx) . 这是负责 IE 用户代理字符串的 Microsoft 人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:23:17.520

更改您的用户代理以报告桌面浏览器。

编辑：

在该`WebBrowser.Navigate`方法上，您可以使用 UserAgent 传递一个字符串。

# python - 是否可以将 Pygame 作为 cronjob 运行？

> ID：14450581
> 
> 赞同：7
> 
> 时间：2013-01-22T02:22:44.123
> 
> 标签：python, pygame

我希望这个问题本质上不是荒谬的。

我正在开发一个游戏。我已经从图形组件中分离出底层游戏引擎（在 Python 中）。我有一个脚本可以模糊一些参数，使用游戏引擎模拟游戏的一部分，然后使用 Pygame 将其可视化。

我想自动化以下过程：

1.  作为 cronjob 运行模拟
2.  使用 Pygame 可视化它（无头）
3.  将可视化另存为短（约 10 秒）视频文件
4.  以编程方式将视频上传到 Youtube

理想情况下，我希望每天执行几次，以便团队中的非技术成员可以观看视频并就游戏的视觉方面提供反馈。

我想使用 Pygame，因为我已经准备好代码了。但我怀疑我可能应该使用 PIL 之类的东西来创建一系列图像文件并从那里开始。

Pygame可以做到这一点吗？我应该只使用 PIL 吗？完成这样的事情还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T03:43:01.367

假设您在 linux 上运行，并且您的图形引擎在 X 中工作，您可以使用 Xvfb（X 虚拟帧缓冲区）无头运行任何您想要的应用程序。您可以运行虚拟（无头）帧缓冲会话的视频编码器。有几个实用程序可以使这项任务更容易：

*   [https://github.com/leonid-shevtsov/headless](https://github.com/leonid-shevtsov/headless)
*   [https://github.com/lightsofapollo/x-recorder](https://github.com/lightsofapollo/x-recorder)

您想要制作一个顶级脚本，它将：

*   启动 Xvfb
*   启动视频编码器（即 ffmpeg）
*   在 Xvfb 中运行您的游戏。您不需要以任何方式修改您的游戏，假设它可以在没有用户输入的情况下运行，只需将 DISPLAY 环境变量设置为正确的值。
*   结束视频编码
*   将视频上传到 youtube

Xvfb 和 ffmpeg 绝对是无头录制游戏的方式，这确保您可以按原样录制游戏而无需修改。它应该是可行的，但不一定容易。上述脚本应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T05:03:09.247

[Anton 的回答](https://stackoverflow.com/a/14451236/1093087)激发了我对这个问题的深入挖掘。令人高兴的是，我发现可以[无头运行 Pygame](http://www.pygame.org/wiki/HeadlessNoWindowsNeeded)，使我能够比 Anton 的方法更简单地完成我想做的事情。

基本工作流程如下：

1.  设置 pygame 以无头运行
2.  [运行我的游戏，使用Pygame](http://www.pygame.org/docs/ref/image.html)为每一帧保存一个屏幕图像
3.  [使用ffmpeg](http://ffmpeg.org/)从图像文件创建视频
4.  使用[youtube-upload 将视频上传到 Youtube](http://code.google.com/p/youtube-upload/)

示例代码（我自己的代码的简化版本，因此尚未经过严格测试）：

```
# imports
import os
import subprocess
import pygame
import mygame

# setup pygame to run headlessly
os.environ['SDL_VIDEODRIVER'] = 'dummy'
pygame.display.set_mode((1,1))

# can't use display surface to capture images for some reason, so I set up
# my own screen using a pygame rect
width, height = 400, 400
black = (0,0,0)
flags = pygame.SRCALPHA
depth = 32
screen = pygame.Surface((width, height), flags, depth)
pygame.draw.rect(screen, black, (0, 0, width, height), 0)

# my game object: screen becomes attribute of game object: game.screen
game = mygame.MyGame(screen)

# need this file format for saving images and encoding video with ffmpeg
image_file_f = 'frame_%03d.png'

# run game, saving images of each screen
game.init()
while game.is_running:
    game.update()   # updates screen
    image_path = image_file_f % (game.frame_num)
    pygame.image.save(game.screen, image_path)

# create video of images using ffmpeg
output_path = '/tmp/mygame_clip_for_youtube.mp4'

ffmpeg_command = (
    'ffmpeg',
    '-r', str(game.fps),
    '-sameq',
    '-y',
    '-i', image_file_f,
    output_path
)

subprocess.check_call(ffmpeg_command)
print "video file created:", output_path

# upload video to Youtube using youtube-upload
gmail_address='your.name@gmail.com'
gmail_password='test123'

upload_command = (
    'youtube-upload',
    '--unlisted',
    '--email=%s' % (gmail_address),
    '--password=%s' % (gmail_password),
    '--title="Sample Game Clip"',
    '--description="See https://stackoverflow.com/q/14450581/1093087"',
    '--category=Games',
    output_path
)

proc = subprocess.Popen(
    upload_command,
    stdout=subprocess.PIPE,
    stderr=subprocess.PIPE
)
out, err = proc.communicate()

print "youtube link: %s" % (out) 
```

创建视频后，您可能希望删除所有图像文件。

我确实在无头捕获屏幕截图时遇到了一点麻烦，我按照这里的描述解决了这个问题：[在 Pygame 中，如何以无头模式保存屏幕图像？](https://stackoverflow.com/q/14472781/1093087)

我能够安排我的脚本作为 cronjob 运行而没有问题。

# iphone - xcode，如何添加根据我在相机胶卷中选择的内容更改图像的图像视图？

> ID：14450582
> 
> 赞同：0
> 
> 时间：2013-01-22T02:22:45.717
> 
> 标签：iphone, ios, objective-c, xcode, camera

没有视图控制器或任何界面构建器，我只想用代码构建它。我有方法设置，您可以单击按钮转到相机胶卷，但现在我不知道下一步该做什么。我需要一种选择图像的方法，它允许我将图像添加到图像视图中。任何关于做什么的提示将不胜感激。

```
 - (void)viewDidLoad {
   UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 100, 50)];
[self.view addSubview: imgView];

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self
           action:@selector(aMethod)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[self.view addSubview:button];
}

-(void)aMethod{

UIImagePickerController* picker = [[UIImagePickerController alloc] init];
picker.sourceType =UIImagePickerControllerSourceTypePhotoLibrary;
picker.delegate = self;
picker.allowsImageEditing = YES;
[[self navigationController] presentModalViewController:picker animated:YES];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:28:34.860

我认为这可能会有所帮助：-

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

作为代表`imagePickerController`

您可以通过**信息**键获取图像：-

```
UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"]; 
```

有关更多信息，请参阅此[链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html)。

**info**是一个`dictionary`包含**原始图像**和**编辑后的图像**，如果选择了图像；或电影的文件系统**URL**（如果选择了电影）。还包含任何相关的`dictionary`编辑信息。**编辑信息键**`dictionary`中列出了此键。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:28:28.670

以前的答案是正确的......但这是另一种看待它的方式......

只要您的代码调用您的相册，您将需要的下一步是：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
[picker dismissModalViewControllerAnimated:YES];
imageView.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
} 
```

这会将返回的信息放入您选择的 imageView .....

您发布的代码中的内容是打开您的照片库....净步骤是说好的....我已经完成了选择我的媒体....我将如何处理它？**

# ruby-on-rails - 灯箱动态内容不起作用

> ID：14450585
> 
> 赞同：1
> 
> 时间：2013-01-22T02:23:22.067
> 
> 标签：ruby-on-rails, twitter-bootstrap

我有一个使用 Twitter Bootstrap 和 bootstrap-lightbox 的 Rails 3.2 应用程序。

数据库中的每条记录（人）都有一个名为“地图”的字段。此字段包含我需要为该记录显示的 PNG 文件。

灯箱已生成，当我查看源代码时的 HTML 显示正在加载正确的 PNG 文件。但是，当您查看图像（或右键单击它们以保存它们）时，很明显只有第一张图像正在由灯箱呈现。每条记录都会显示灯箱中的第一张图片。这是我的代码：

```
<td><!--  lightbox code -->
            <a data-toggle="lightbox" href="#demoLightbox"><%= image_tag "map_icon1.png", :width => '32' %> </a>
            <div id="demoLightbox" class="lightbox hide fade"  tabindex="-1" role="dialog" aria-hidden="true">
                <div class='lightbox-header'>
                    <button type="button" class="close" data-dismiss="lightbox" aria-hidden="true">&times;</button>
                </div>
                <div class='lightbox-content'>
                    <%=image_tag person.map %>
                </div>
            </div>
            <!-- end lightbox code -->
        </td> 
```

以下是页面生成的内容： ×

```
<td><!--  lightbox code -->
            <a data-toggle="lightbox" href="#demoLightbox"><img alt="Map_icon1" src="/assets/map_icon1.png" width="32" /> </a>
                <div id="demoLightbox" class="lightbox hide fade"  tabindex="-1" role="dialog" aria-hidden="true">
                    <div class='lightbox-header'>
                        <button type="button" class="close" data-dismiss="lightbox" aria-hidden="true">&times;</button>
                    </div>
                    <div class='lightbox-content'>
                        <img alt="G2" src="/assets/g2.png" />
                    </div>
                </div>
                <!-- end lightbox code --> 
```

我知道这段代码不是最干净的，我几乎把它破解了。但是如果 HTML 显示每个文件正在被渲染，为什么灯箱只显示第一个 png 并为每条记录使用它？

图像 g2.png 是每条记录在灯箱中显示的内容。即使代码显示正在渲染 i2.png 等。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:18:16.767

嗯，这证明有时候你只需要一夜好眠。

问题是我没有 HREF 和 DIV ID 的唯一值。

一旦我更改了代码以根据记录 ID 创建唯一值，一切正常。这是我的最终代码。

```
<td><!--  lightbox code -->
            <a data-toggle="lightbox" href="#<%= person.id %>Lightbox"><%= image_tag "map_icon1.png", :width => '32' %> </a>
            <div id="<%= person.id %>Lightbox" class="lightbox hide fade"  tabindex="-1" role="dialog" aria-hidden="true">
                <div class='lightbox-header'>
                    <button type="button" class="close" data-dismiss="lightbox" aria-hidden="true">&times;</button>
                </div>
                <div class='lightbox-content'>
                    <%=image_tag person.map %>
                </div>
            </div>
            <!-- end lightbox code --> 
```

# c# - 如何使用正则表达式 c# 更改字符串中的文件名

> ID：14450588
> 
> 赞同：0
> 
> 时间：2013-01-22T02:23:37.350
> 
> 标签：c#, xml, regex, string, replace

我正确地将 xml 文件上传到字符串变量

我的 xml 文件的形式是

```
<Asset>01.xmf</Asset>
<Index>0</Index>
</Mesh>
</BodyPart0>
<BodyPart1>
<BodyPartId>1</BodyPartId>
<Material>
<TextureMap0>
<Asset>chkn_xrf_bd7580097080fe4f10fbf857ed5c27b8.xrf</Asset>
<Index>-1</Index>
</TextureMap0>
</Material>
<Mesh>
<Asset>02.xmf</Asset>
<Index>1</Index>
</Mesh>
</BodyPart1>
<BodyPart10>
<BodyPartId>10</BodyPartId>
<Material>
<TextureMap0>
<Asset>chkn_xrf_3b5aa82b4c3e67599e4091f0fcefa2a8.xrf</Asset>
<Index>-1</Index>
</TextureMap0>
</Material>
<Mesh>
<Asset>11.xmf</Asset> 
```

我想替换所有文件扩展名。XMF 已由另一个名称定义。

例如**01.xmf**到**newNAME.xmf**

但是当我运行以下代码时，结果并不一致，我认为这是因为文件名（**01.xmf**）**包含特殊字符“。” （点）**

```
stringINDEX string = GetXmlString (indexXML);/ / Load xml file in stringINDEX

string pattern = lbString1; / / lbString1 = "01.xmf" 
Rgx = new Regex Regex (pattern);

stringINDEX = rgx.Replace (stringINDEX, lbString2);/ / lbString2 = "newNAME.xmf" 
```

如何使用正则表达式解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:29:52.047

只需使用 String.Replace() 而不是 Regex.Replace()...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:30:17.770

. 是正则表达式中的元字符。这意味着您需要通过在其前面加上反斜杠来逃避它，以便正则表达式查找文字 . 而不是元字符。这意味着“任何角色之一”。

所以你想做\。但请稍等——根据您制作正则表达式的内容，反斜杠可能被认为很重要，甚至在它到达正则表达式解析引擎之前就被转义了。您可能需要 \\. （所以 \\ 变成了 \ 其中 . 变成了 . 文字）

在此处阅读正则表达式中的所有元字符：[http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

编辑：为了证明我的观点 - 我不得不编辑这篇文章并将我所有的反斜杠加倍，这样你就会看到正确的数量:)

# json - 将 REST、SOAP 或 JSON 与 Google OpenID 或 OAuth 结合使用

> ID：14450589
> 
> 赞同：0
> 
> 时间：2013-01-22T02:24:03.947
> 
> 标签：json, web-services, rest, google-openid, google-oauth

有什么方法可以使用 REST、SOAP 或 JSON 对使用 Google OpenID 或 Google OAuth 的用户进行身份验证？我需要使用的服务器与 PHP 非常不兼容（使 PHP 的现有 OpenID 和 OAuth 库变得无用），我认为安装 PHP 并确保它可以验证用户使用的麻烦是不值得的php。我宁愿让用户为我的网站创建他们自己的帐户，也不愿使用 PHP 来验证他们的 Google 帐户（因为这个项目将是我公司的内部项目）。

是否有任何网络服务允许我使用 REST、SOAP 或 JSON 来验证使用 Google OpenID 或 OAuth 的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:27:07.793

Google 的 OAuth 2.0 实现是 RESTful 并在请求/响应正文中使用 JSON。OAuth 流程和所有参数的文档可以在[https://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer)找到。通过身份验证后，您的应用程序将具有访问令牌和刷新令牌作为 JSON 参数。访问令牌作为授权标头发送以访问最终资源，刷新令牌用于请求正文中以刷新访问令牌。

# php - 如何使用图形 API 更改 Facebook 粉丝专页的名称？

> ID：14450595
> 
> 赞同：0
> 
> 时间：2013-01-22T02:24:43.117
> 
> 标签：php, facebook, facebook-graph-api, facebook-page

我想知道，您如何使用 Facebook API 更改粉丝专页的标题/名称？

一个人告诉我他很容易通过 api 更改了他的粉丝页面的名称。但他只在他的网站上提供了一个链接到这里：[https ://developers.facebook.com/docs/reference/api/page/#page_access_tokens](https://developers.facebook.com/docs/reference/api/page/#page_access_tokens)

它没有提到如何更改粉丝专页的名称。我个人尝试通过使用带有发布请求的[https://graph.facebook.com](https://graph.facebook.com)来更改粉丝页面的其他属性，但这似乎不起作用，只是重定向到 facebook 主页。也许是因为它需要通过 PHP 代码来完成？

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:54:30.387

您无法使用图形 api 更改粉丝页面名称...您只能更改字段：

*   关于
*   描述
*   基本信息
*   网站
*   电话
*   主页资料照片
*   封面照片
*   管理发布

为此，您需要使用页面访问令牌，您可以获得一个，访问路径“/USER_ID/accounts”：

[https://developers.facebook.com/tools/explorer?method=GET&path=100000903983008%2Faccounts](https://developers.facebook.com/tools/explorer?method=GET&path=100000903983008%2Faccounts)

# gcc - gcc.exe 错误创建过程没有这样的文件或目录

> ID：14450601
> 
> 赞同：0
> 
> 时间：2013-01-22T02:26:15.937
> 
> 标签：gcc

```
wblg@WBL /c/MinGW/Test

$ gcc a.c

gcc.exe: error: CreateProcess: No such file or directory 
```

我在 Windows 7 上使用 MinGW，我遇到了这个问题。我什至在我的计算机上设置并重新启动了环境，唯一的解决方法是在我的 ac 相同的文件夹下复制（gcc.exe、libgmp-10.dll、libmpc-2.dll、libmpfr-1.dll）

请指教。

# eclipse - 从 Java 调用 Clojure，他们说，这很容易，他们说

> ID：14450607
> 
> 赞同：4
> 
> 时间：2013-01-22T02:26:58.157
> 
> 标签：eclipse, clojure, clojure-java-interop, counterclockwise

我是一个初出茅庐的 Clojure 程序员，在 Eclipse 中使用过直接的 Java。我正在尝试让我的 Java 程序调用从[http://dev.clojure.org/display/doc/Getting+Started+with+Eclipse+and+逆时针](http://dev.clojure.org/display/doc/Getting+Started+with+Eclipse+and+Counterclockwise)文章创建的简单“hello”函数。hello 函数在通过逆时针插件启动的 Clojure REPL 中运行良好。当我尝试从 Java 类执行 hello 函数时出现问题。

谷歌搜索发现基本上有两种方法可以做到这一点：clojure.lang.RT 可以加载 Clojure 源并将其作为脚本执行，或者直接在 Clojure 源编译成 JAR 时执行。

clojure.lang.RT 变体工作没有问题，但我完全不知道如何让直接调用变体工作。在 Java 文件中，编译器无法解析“myproject.core”。

Clojure 源代码是 core.clj，如下所示，并且通过 REPL 像冠军一样工作：

```
(ns myproject.core
  (:gen-class
    :name myproject.core
    :methods [#^{:static true} [hello [String] String]]))

(defn -main
  "I don't do a whole lot."
  [& args]
  (println "Hello, World!"))

(defn hello [who] (str "Hello " who " !")) 
```

然而，Java 源代码不会编译：

```
import java.io.*;
import clojure.lang.*;
public class HelloJava {
    public static void main( String[] args ) {
        loadResourceVariant();
        directVariant();
    }

    public static void directVariant() {
        myproject.core.hello( "Bob" );
    }

    public static void loadResourceVariant() {
        try {
            RT.loadResourceScript( "myproject/core.clj" );
            // Get a reference to the hello function.
            Var hello = RT.var( "myproject.core", "hello" );
            // Invoke the hello function
            Object result = hello.invoke( "Robert" );
            System.out.println( result );
        } catch ( IOException e ) {
            e.printStackTrace();
        }
    }
} 
```

编译器错误是...

```
myproject.core cannot be resolved to a type HelloJava.java  /myproject/src  line 11 Java Problem 
```

如何配置我的逆时针项目以将 core.clj 的 .class 表示放入 classes 目录，以便可以直接从 Java 引用它？

这必须在不使用 Maven 等的情况下成为可能。不？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T13:46:24.170

我从 java 调用 clojure 的方式是创建一个 api 命名空间，通常与实现命名空间分开：

```
(ns test.api
  (:use [test.impl :only [f1 f2]])
  (:gen-class
    :methods [#^{:static true} [exportedF1 [String] int]
              #^{:static true} [exportedF2 [String String] void]]))

(defn -exportedF1 [^String query ^String file] (f1 query file))
(defn -exportedF2 [^String query] (f2 query)) 
```

然后我确保**AOT 那个命名空间**，并 uberjar 它。

现在只需将该 jar 包含在您的 java 类路径中，就可以开始使用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-20T22:54:23.490

我认为用户 clartaq 在这里回答了您的问题：[Calling clojure from java](https://stackoverflow.com/questions/2181774/calling-clojure-from-java)。

总结一下 - 如果您想将 Clojure 函数导出到 Java，请按照以下步骤操作：

1.  使用完全限定名称创建项目；例如，`lein new com.example.stuff`而不仅仅是 of `lein new stuff`。
2.  编写一个“包装函数”；例如`-foo`，如果您的函数被调用`foo`。
3.  扩展`(ns ...)`文件顶部的表单以导出函数
4.  编辑您的`project.clj`文件以触发 AOT 编译
5.  构建一个 uberjar 文件。

如果您想了解我是如何应用这种方法的，请查看我的[GitHub 页面。](https://codingzorro.github.io/interop.html)

# c++ - 使用多语句 lambda 的返回类型推导

> ID：14450608
> 
> 赞同：8
> 
> 时间：2013-01-22T02:27:01.657
> 
> 标签：c++, c++11, lambda, g++, trailing-return-type

我一直在编写代码，最近发现 g++ 不会警告我某类问题：根据 C++11 5.1.2.4，如果您的 lambda 不是单个返回语句，则返回类型必须声明为尾随返回类型或无效。

尽管如果 g++ 足够有意义，则允许编译无效代码，但有没有办法关闭此行为（`-fpedantic`在 g++-4.7 中允许）或至少对此发出警告？

示例代码：

```
[]() { return 0; } //is fine
[&a]() { a++; return 0; } //is not fine but g++ doesn't warn me
[&a]() -> int {a++; return 0; } //is fine again 
```

C++11 5.1.2.4

> 实现不应将右值引用类型的成员添加到闭包类型。如果 lambda-expression 不包含 lambda-declarator，就好像 lambda-declarator 是 ()。如果 lambda 表达式不包含 trailing-return-type，就好像 trailing-return-type 表示以下类型：
> 
> — 如果复合语句的形式为
> { attribute-specifier-seq(opt) return expression ;
> 左值到右值转换（4.1）、数组到指针转换（4.2）和函数到指针转换（4.3）后返回表达式的类型；
> 
> ——否则，无效。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T02:35:37.410

那是因为它是标准中的缺陷，并且将被更改（参见[DR 975](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#975)）：

> 975 对 lambda 的返回类型推导的限制
> 
> 似乎没有任何技术困难需要当前限制，即只有当 lambda 的主体由单个 return 语句组成时才能推断出 lambda 的返回类型。特别是，如果它们都返回相同的类型，则可以允许多个返回语句。

我怀疑是否有办法关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T09:19:11.670

GCC 4.8.1（可能更早）和 clang 3.3 已经实现了它；修复 DR975。

现在有一个提案（[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3386.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3386.html)）将其纳入 C++1y

# php - 仅对 youtube iframe 进行宽度和高度调整

> ID：14450612
> 
> 赞同：0
> 
> 时间：2013-01-22T02:27:48.440
> 
> 标签：php, javascript, jquery, wordpress

如何仅对所有 youtube 嵌入的宽度和高度进行调整，因为使用了一些 iframe，主要是 youtube

```
<iframe width="420" height="315" frameborder="0" allowfullscreen="" src="http://www.youtube.com/embed/xbGv2T456dfg3"> 
```

此代码嵌入在我的 wordpress 帖子中，我只想调整 youtube iframe 而不是所有 iframe 的宽度和高度，我可以手动调整，但是当涉及到许多视频时，它会很长。

例如 * 所有 youtube iframe 将是 560x316 * 并且所有其他 iframe 将是其默认尺寸。

可以在php中完成吗？对不起我是新人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:47:58.233

[您可以在主题函数 PHP 中的the_content 上](http://codex.wordpress.org/Plugin_API/Filter_Reference/the_content)创建一个新过滤器，该过滤器调用一个搜索和替换 Youtube iframe 的函数，如下所示：

```
function my_youtube_resizer($content) {
   $dom=new DOMDocument();
   $dom->loadHTML($content);
   $iframess = $dom->getElementsByTagName("iframe");       
   foreach ($iframes as $iframe) {
     $src = $iframe->getAttribute('src');
     if (strpos('youtube.com', $src)) {  //You may have to also deal with the short URL youtu.be
        $iframe->setAttribute('width', '560');
        $iframe->setAttribute('height', '316');
     }
   }
   $content = $dom->saveHTML();
   return $content;
 } 
```

如果您使用其他插件来创建这些 iframe 链接（例如 Jetpack），请确保您的过滤器具有较低的优先级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T02:44:25.750

您可以尝试使用[css 属性选择器](http://reference.sitepoint.com/css/css3attributeselectors)`youtube.com`在 src 属性中选择 iframe ：

```
iframe[src*="youtube.com"], 
iframe[src*="youtu.be"] {
    width: 560px !important;
    height: 316px !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:03:01.170

谢谢大家的帮助

我只是给了jquery一个机会，它奏效了

```
 $(document).ready(function(){
    $('iframe[src*="youtube.com"]').css({"width":"560px","height":"316px"});
    }); 
```

# safari - Safari Youtube 不在 Fancybox 中

> ID：14450613
> 
> 赞同：0
> 
> 时间：2013-01-22T02:27:54.043
> 
> 标签：safari, youtube, fancybox, width, flexslider

在 www.armstrongvisuals.com/tester.php 上精简了测试页面（卷轴链接）

我的 youtube 视频的 fancybox2 实现仅在 Safari 中显示 Fancybox 中心，页面中有一个 flexslider 幻灯片。Fancybox 覆盖窗口的大小和位置都正确，但 youtube 内容在垂直和水平方向都超出了 fancybox 覆盖的一半。Safari 似乎依赖于不正确的窗口宽度和高度。当您调整窗口大小时，视频会与幻想框分开移动。我在页面中有一个 Flexslider 幻灯片，我知道 Flexslider 存在溢出问题。一直在我的本地服务器上进行故障排除。更新 Flexslider 并没有解决问题。现在，我正在尝试改进fancybox.js 以依赖innerheight 和innerwidth，但希望得到一些帮助。希望这个问题对于了解 Fancybox 的人来说听起来很熟悉。该链接在 chrome、firefox、ie7、ie8、ie9 中测试良好。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>tester</title>
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<!--/*css reset*/-->
    <link rel="stylesheet" type="text/css" href="./css/reset.css"/>
<!--/*fancybox*/-->
    <script type="text/javascript" src="./js/jquery-1.9.0.min.js"></script>
    <script type="text/javascript" src="./js/jquery.fancybox.js"></script>
    <link rel="stylesheet" type="text/css" href="./css/jquery.fancybox.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="./css/jquery.fancybox-buttons.css"/>
        <link rel="stylesheet" type="text/css" href="./css/jquery.fancybox-thumbs.css"/>
        <script type="text/javascript" src="./js/jquery.fancybox-thumbs.js"></script>
        <script type="text/javascript" src="./js/jquery.fancybox-media.js"></script>
        <script type="text/javascript" src="./js/jquery.fancyboxGO.js"></script>
<!--/*stylesheets*/-->
    <link rel="stylesheet" type="text/css" href="./css/fonts.css"/>
        <!--[if!IE]><!-->
    <link rel="stylesheet" type="text/css" href="./css/avstyle.css"/>
    <link rel="stylesheet" type="text/css" href="./css/flexslider.css" />
    <!--<![endif]-->
<!--/*javascripts*/-->
    <script type="text/javascript" src="./js/flexslider.js"></script>
    <script type="text/javascript" src="./js/flexsliderGO.js"></script>
</head>
<body>
    <div class="hider">
    <a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-necktest-Bbw.jpg" href="http://www.youtube.com/v/iHrx9wU2t-U" title="test title"></a>
    <a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-necktest-Bmix.jpg" href="http://www.youtube.com/v/aE6t1jERznw" title="test title"></a>
    <a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-broquard.jpg" href="http://www.youtube.com/v/MgQngKUuFS4" title="test title"></a>
    <a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-cleg.jpg" href="http://www.youtube.com/v/A6DyzGStzLE" title="test title"></a>
    <a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-cactoons.jpg" href="http://www.youtube.com/v/BPJBRMEnbGM" title="test title"></a>
    </div>

<a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-reel.jpg" href="http://www.youtube.com/v/oDVTf4g5cj8" title="test title">reel</a>

    <div class="hider">
    <a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-speechtest.jpg" href="http://www.youtube.com/v/5JagAzTMGL0" title="test title"></a>
    <a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-necktest.jpg" href="http://www.youtube.com/v/U-jkKFOdN_Y" title="test title"></a>
    <a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-mugger.jpg" href="http://www.youtube.com/v/cTbe0m3_ZYc" title="test title"></a>
    <a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-necktest-B.jpg" href="http://www.youtube.com/v/49ZMoplNEoM" title="test title"></a>
    <a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-necktest-Bcolor.jpg" href="http://www.youtube.com/v/mTQgA-uItHU" title="test title"></a>
    </div>
<br /><br />

<!--/*slideshow*/-->
<div id="sshow">
    <?php include('includes/slideshow.php'); ?>
</div>
<!--/*end slideshow*/-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:35:06.460

弄清楚了。首先，我确定我在 html youtube 超链接中使用了 embed 和 iframe

```
<div class="hider">
<a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-cactoons.jpg" href="http://www.youtube.com/embed/BPJBRMEnbGM?autoplay=1" title="test title"></a>
</div>

<a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-reel.jpg" href="http://www.youtube.com/embed/oDVTf4g5cj8?autoplay=1" title="test title">reel</a>

<div class="hider">
<a class="fancybox-media" rel="myvids" data-thumbnail="/images/thmb-necktest-Bcolor.jpg" href="http://www.youtube.com/embed/mTQgA-uItHU?autoplay=1" title="test title"></a>
</div 
```

然后将*“type”：“iframe”*添加到我的 js jQuery 调用中，并删除了媒体助手。我使用*jQuery*而不是*$*，因为我在网站上也有一些 mootools kwicks。我还使用缩略图助手并缩放缩略图以适应初始窗口宽度。

```
jQuery(document).ready(function() {
    jQuery('.fancybox-media').fancybox({
        openEffect  : 'none',
        closeEffect : 'none',
        prevEffect  : 'none',
        nextEffect  : 'none',
        nextClick   : false,
        "type"      : "iframe",
        helpers     : {
            title : {
                type: 'inside'
            },
            thumbs : {
                width : (window.innerWidth*.09),
                height : (window.innerWidth*.050943396),
                        source  : function(current) {
                            return jQuery(current.element).data('thumbnail');
                        }
            }
        }
    });
}); 
```

发布它以防其他人滑入此裂缝。我的 jQuery 没有在我的原始帖子中显示，因为我从外部引用了我的页面的链接和 php 包含的部分。对于那个很抱歉。感谢 JFK 对fancybox 的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:52:42.890

附录：现在很明显，我在我的 fancybox 组中将内联与 iframe 混合在一起，在我的页面中使用“fancybox-media”作为这个 fancybox 实例的类会导致问题，破坏我的 html 代码中的 iframe 调用。以下更新的代码可与 flexslider 一起使用，并且在 safari 中不会出现故障。（我从一个链接激活了一个fancybox组，其他链接隐藏）：

```
<div class="hider">
<a class="fancybox" rel="myvidsB" data-thumbnail="/images/thmb-maxscripts.jpg" href="#maxscripter"></a>
</div>
<a class="fancybox fancybox.iframe" rel="myvidsB" data-thumbnail="/images/thmb-reel.jpg" href="http://www.youtube.com/embed/oDVTf4g5cj8?autoplay=1" title="title caption">reelB</a>
<div class="hider">
<a class="fancybox fancybox.iframe" rel="myvidsB" data-thumbnail="images/thmb-cactoons.jpg" href="http://www.youtube.com/embed/BPJBRMEnbGM?autoplay=1" title="title caption"></a>
</div> 
```

用 jQuery

```
jQuery(document).ready(function() {
    jQuery('.fancybox').fancybox({
        openEffect  : 'none',
        closeEffect : 'none',
        prevEffect  : 'none',
        nextEffect  : 'none',
        nextClick   : false,
        arrows  :  true,
        margin  :  [20, 60, 20, 60],
        helpers     : {
            title : {
                type: 'inside'
            },
            thumbs : {
                width : thmbWa,
                height : thmbHa,
                        source  : function(current) {
                            return jQuery(current.element).data('thumbnail');
                        }               
            }
        }
    });
}); 
```

其中*thmbWa*和*thmbHa*是由其他代码指定的变量，用于缩放我的缩略图。

# jquery - 音频标签在 IE9 上不起作用

> ID：14450616
> 
> 赞同：-1
> 
> 时间：2013-01-22T02:28:24.563
> 
> 标签：jquery, html

我有生成音频标签的 jquery 代码。生成的代码在 FF 和 Chrome 中运行良好，但在 IE9 中运行良好。下面是代码

```
$(document).ready(function () {
    var source = "/TTS.aspx?tts=" + $('.sound_hidden_field').text();
    $('body').append("<audio style='display:block' src='" + source + "' controls autoplay type='audio/wav'></audio>");
}); 
```

我也试过

```
var s = "/TTS.aspx?tts=" + $('.sound_hidden_field').text();
var audioInterview = new Audio(s);
audioInterview.play(); 
```

但是代码只是不能在 IE 中工作。出现一个黑色矩形，中心带有十字。就像找不到图像时的图像标记一样。

生成的 html 正在由 w3c 验证器传递。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:35:17.957

IE9 不*支持*HTML5 音频`.wav`格式。`.mp3`只要。有关兼容性表，请参见[http://www.w3schools.com/html/html5_audio.asp](http://www.w3schools.com/html/html5_audio.asp)。

# pdf - 如何“屏蔽” PDF 文档中的某些文本

> ID：14450626
> 
> 赞同：0
> 
> 时间：2013-01-22T02:30:04.337
> 
> 标签：pdf

我有一个 PDF 文档，我想屏蔽某些文本块。我之所以要这样做，是因为我不希望此文本被索引，也不希望通过选择和复制此文本块来轻松访问此信息。

正确的方法应该是什么？
我想将文本转换为光栅是个坏主意，我不知道是否有一些工具可以只制作具有特殊权限的文本部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:43:18.227

您将需要一个可以将字体转换为一系列形状的程序。

Illustrator 可能具有您想要的功能：请参见[此处](http://www.graphic-design-employment.com/adobe-illustrator-how-to-convert.html)和[此处](http://www.justskins.com/forums/convert-text-to-path-32587.html)。

# jasper-reports - JasperReports 中的分组记录

> ID：14450634
> 
> 赞同：12
> 
> 时间：2013-01-22T02:31:37.570
> 
> 标签：jasper-reports, grouping

我对 JasperReports 有疑问。我想根据一个特定列的值对记录进行分组。

例如输入数据：

```
Name--email--PledgeType--amount
aaa--aa@yahoo.com--1--20.00
bbb--bb@yahoo.com--2--30.00
ccc--cc@gmai.com--1--35.00
ddd--dd@gmai.com--2-- 40.00 
```

输出报告将按“PledgeType”值（1、2、...数字）分组：

```
Total for group one: 55.00
Name email         amount
aaa  aa@yahoo.com 20.00
ccc  cc@gmai.com  35.00
------------------------------------
Total for group two: 70.00
Name email         amount
bbb  bb@yahoo.com  30.00
ddd  dd@gmai.com   40.00 
```

JasperReports 可以解决这个问题吗？如何？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-22T09:39:20.077

您可以在 JasperReports 中定义分组。JasperReports 为您计算总数，有一种添加组和总数的舒适方式。这里概述了您需要在 iReport 中执行的操作。

**添加组**

*   将您的查询修改为按承诺类型排序 - JasperReports 需要根据您的分组排序的数据。
*   右键单击报告检查器中的报告并选择*Add Report Group*。
*   按照向导，设置为组名称*PledgeType*并选择*Group by the following report object*您选择字段*PledgeType*。点击下一步。选中*Add the group header*并单击*Finish*。

**添加总数**

*   右键单击报告检查器中的变量并选择*Add Variable*。
*   在属性面板中选择此配置：变量类：BigDecimal，计算：Sum，ResetType：Group，ResetGroup *PledgeType*，变量表达式：`$F{amount}`。
*   将变量拖放到报表设计器中的组标题中。单击字段并更改：文本字段表达式：`"Total for group " + $F{PledgeType} + ": " + $V{totalPledge}`，表达式类：`java.lang.String`。评估时间：小组。评估组：PledgeType。

信息：评估时间决定了何时评估变量，即何时显示计算的总和。如果将其设置为组，则意味着“一旦组处理完成”。

附上生成的报告和 JRXML。

![报告输出](../Images/02a59d1c11700482e5f08616d66d7944.png)

JRXML 是使用 iReport 5.0 创建的 - 但是，如果您按照上述步骤操作，它应该适用于 JR v 2+

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report2" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="ce08fe1c-1543-4460-8613-7f03b200082b">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString>
        <![CDATA[select * from
(select 'aaa' as Name, 'aa@yahoo.com' as email, 1 as PledgeType, 20.00 as amount
union select 'bbb', 'bb@yahoo.com' ,2, 30.00
union select 'ccc', 'cc@gmai.com' ,1, 35.00
union select 'ddd', 'dd@gmai.com' ,2, 40.00) tbl
order by PledgeType]]>
    </queryString>
    <field name="Name" class="java.lang.String"/>
    <field name="email" class="java.lang.String"/>
    <field name="PledgeType" class="java.lang.Long"/>
    <field name="amount" class="java.math.BigDecimal"/>
    <variable name="totalPledge" class="java.math.BigDecimal" resetType="Group" resetGroup="PledgeType" calculation="Sum">
        <variableExpression><![CDATA[$F{amount}]]></variableExpression>
    </variable>
    <group name="PledgeType">
        <groupExpression><![CDATA[$F{PledgeType}]]></groupExpression>
        <groupHeader>
            <band height="61">
                <textField evaluationTime="Group" evaluationGroup="PledgeType">
                    <reportElement uuid="401c7b3b-af73-4d40-8982-9c1692eb7085" x="0" y="21" width="555" height="20"/>
                    <textElement/>
                    <textFieldExpression><![CDATA["Total for group " + $F{PledgeType} + ": " + $V{totalPledge}]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement uuid="87cd0d21-014d-4e6c-a54a-006165a38414" x="0" y="41" width="185" height="20"/>
                    <textElement/>
                    <text><![CDATA[Name]]></text>
                </staticText>
                <staticText>
                    <reportElement uuid="bd0fc2f5-4963-4c9d-a9be-3659be06e436" x="185" y="41" width="185" height="20"/>
                    <textElement/>
                    <text><![CDATA[email]]></text>
                </staticText>
                <staticText>
                    <reportElement uuid="5d5d7ce1-5353-4f83-91b4-57725b0c922b" x="370" y="41" width="185" height="20"/>
                    <textElement/>
                    <text><![CDATA[amount]]></text>
                </staticText>
            </band>
        </groupHeader>
    </group>
    <detail>
        <band height="20">
            <textField>
                <reportElement uuid="5b325da6-7c56-4357-8808-911dad16ec53" x="0" y="0" width="185" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{Name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="0bc06b28-7b8c-4af9-997a-714d1599def1" x="185" y="0" width="185" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{email}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="e5504bb9-c3c0-4135-94c6-7ea935f97cb6" x="370" y="0" width="185" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{amount}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

# sql - 排序包含数字的字符串

> ID：14450640
> 
> 赞同：0
> 
> 时间：2013-01-22T02:32:56.053
> 
> 标签：sql, sql-server

我有一个名为`MR`varchar 的列。当我使用 an 运行查询时，`ORDER BY`它似乎没有正确排序。

```
select MR, LName, FName from users 
  where MR between 'MR20001' and 'MR20002' 
  order by MR 
```

结果：

```
MR20001   | LINA  | MARY
MR200011  | TEST  | CASE
MR20002   | KO    | MIKE 
```

为什么`MR200011`之前显示`MR20002`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T02:37:25.910

因为`MR`是一个字符串，并且 - 例如 -`24`排序低于`3`因为它不关心数值。这就像之前的排序`Smith`一样，`Azlea`因为`z`> `m`。

如果您只想将数字视为数字，那么也许不要存储`MR`前缀。根据列名，这似乎是完全多余的。为什么不将数字部分单独存储为 an`INT`并创建一个`'MR'`在运行时附加的视图？您可以轻松地做到这一点而不会真正影响应用程序（如果您无法通过存储过程控制插入/更新操作，请添加一个代替触发器）：

```
CREATE VIEW dbo.users_appended
AS
    SELECT MR = 'MR' + CONVERT(VARCHAR(25), MR), 
        MRSort = MR --, ... other columns ...
      FROM dbo.users;
GO

SELECT MR, other columns
  FROM dbo.users_appended
  ORDER BY MRSort; 
```

如果您无法更改架构，您可以说：

```
ORDER BY CONVERT(BIGINT, SUBSTRING(MR, 3, 25)); 
```

但我真的认为你根本不应该`MR`存储在那里。如果您无法更改此设置，则可以考虑使用视图或计算列来提取字符串的数字部分。如果您通常只在一个方向上排序，您甚至可以索引计算列。

```
ALTER TABLE dbo.users ADD MRNumber
  AS (CONVERT(BIGINT, SUBSTRING(MR, 3, 25))) PERSISTED;

CREATE INDEX ix_mrnumber ON dbo.users(MRNumber); 
```

您将必须测试维护计算列和索引所需的工作是否可以通过这对查询产生的差异来证明。

视图将是相似的，但您不会从索引中获得任何效率：

```
CREATE VIEW dbo.users_extended
AS
  SELECT MR, ..., MRNumber = CONVERT(BIGINT, SUBSTRING(MR, 3, 25));
GO

SELECT MR, ... 
  FROM dbo.users_extended
  ORDER BY MRNumber; 
```

* * *

至于`LEN`改用，要小心。虽然它是更简单的代码，但不一定更有效。在我的系统上，我创建了两个值分布广泛的表：

```
SELECT 'MR'+RTRIM(ABS(object_id)) AS MR 
  INTO dbo.flab 
  FROM sys.all_objects -- 2096 rows

SELECT 'MR'+RTRIM(ABS(s1.object_id)) AS MR 
  INTO dbo.mort 
  FROM sys.all_objects AS s1
  CROSS JOIN sys.all_objects AS s2; -- 4397409 rows 
```

现在，测试这样的简单查询：

```
SELECT * FROM dbo.flab ORDER BY LEN(MR), MR;
SELECT * FROM dbo.flab ORDER BY CONVERT(BIGINT, SUBSTRING(MR, 3, 25));
SELECT * FROM dbo.mort ORDER BY LEN(MR), MR;
SELECT * FROM dbo.mort ORDER BY CONVERT(BIGINT, SUBSTRING(MR, 3, 25)); 
```

堆上的结果（密切关注持续时间和 CPU，尽管 SQL Server 在估计成本方面吐出废话）：

![在此处输入图像描述](../Images/6e4b0baa1c6fe1005bcd9814ee2b44a2.png)

并在 上使用聚集索引`MR`：

![在此处输入图像描述](../Images/cdacefb84eb0ed707b1cc16c4b6d6c75.png)

我还更改了所有计算，`BIGINT`以避免子字符串超过 12 个字符的任何潜在危险（并且仍然避免昂贵的 - 是的，昂贵的 - `LEN()`）。`INT`请注意，估计成本为 50/50，如果使用而不是`BIGINT`（假设使用安全`INT`- 我认为这是一个安全的假设，因为如果有任何更大的接受的答案将失败），则持续时间差异大致相同值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T02:34:19.803

试试投吧

```
select MR, LName, FName 
from users 
where MR between 'MR20001' and 'MR20002' 
order by CAST(REPLACE(MR, 'MR', '') AS INT) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/ae729/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T02:49:59.883

为了避免所有昂贵的铸造和更换，您可以使用它作为替代方案：

```
select MR, LName, FName 
from Table1 
order by LEN(MR),MR 
```

[http://www.sqlfiddle.com/#!3/ae729/6](http://www.sqlfiddle.com/#!3/ae729/6)

# java - Sams 在 24 小时内自学 Java 第 6 版。章。20 ConfigWriter.java 错误

> ID：14450641
> 
> 赞同：1
> 
> 时间：2013-01-22T02:32:59.057
> 
> 标签：java, file-io, runtime-error

Sams 在 24 小时内自学 Java 第六版，Rogers Cadenhead 第 20 章`ConfigWriter.java`错误

我是Java初学者。我正在阅读这篇文章标题中列出的 Java 书籍。我对这怎么行不通感到非常困惑。该代码应该创建一个名为的文件`program.properties`并将文本放入其中的第 10 行到第 12 行。

```
import java.io.*;

class ConfigWriter {
String newline = System.getProperty("line.separator");

ConfigWriter() {
    try {
        File file = new File("program.properties");
        FileOutputStream fileStream = new FileOutputStream(file);
        write(fileStream, "username=max");
        write(fileStream, "score=12550");
        write(fileStream, "level=5");
    } catch (IOException ioe) {
        System.out.println("Could not write file");
    }
}

void write(FileOutputStream stream, String output)
    throws IOException {

    output = output + newline;
    byte[] data = output.getBytes();
    stream.write(data, 0, data.length);
}

public static void main(String[] arguments) {
    ConfigWriter cw = new ConfigWriter();
} 
```

}

相反，它绝对什么都不做。它完全空白。对于此错误，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:44:29.527

您的代码中没有错误或异常。该片段实际上创建了文件。尝试通过提供测试路径来测试 src。

```
File file = new File("C:\\Test\\test.txt"); 
```

上述修改正确地创建了文件。如前所述，您也可以使用`fileStream.flush();`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:10:24.880

最可能的问题是您对文件的写入位置感到困惑。

如果您使用相对路径名（如“program.properties”）写入文件，Java 将尝试在应用程序的“当前目录”中打开/创建文件。

*   如果您直接从命令提示符/shell 运行代码，则当前目录将是 shell 的当前目录……在您运行程序时。

*   如果您使用包装脚本启动，则该脚本*可能会*在启动程序之前更改当前目录。

*   如果从 IDE 启动，则 IDE 将确定当前目录。

*   等等。

要避免此问题，请使用绝对路径名。

弄清楚该文件的实际写入位置也是有益的。在 Windows 上，您可以尝试使用搜索工具。在 Linux 上，该`find`命令是一个不错的选择；例如

```
 $ sudo find / -name properties.properties | less 
```

...然后等待。

* * *

请注意，在此特定示例中不需要冲洗和关闭。您正在使用`FileOutputStream`未缓冲的。但是，如果您想这样做，您的代码需要如下所示：

```
File file = new File("program.properties");
try (FileOutputStream fileStream = new FileOutputStream(file)) {
    write(fileStream, "username=max");
    write(fileStream, "score=12550");
    write(fileStream, "level=5");
    fileStream.flush();
} catch (IOException ioe) {
    System.out.println("Could not write file");
} 
```

请注意，这`fileStream`是隐式关闭的，因为我们在`try`

# c - 如何检查下一个输入是否为空？

> ID：14450642
> 
> 赞同：2
> 
> 时间：2013-01-22T02:33:06.213
> 
> 标签：c, input, io, stream

我正在尝试将文件重定向为标准输入（要求之一）。我不知道如何检查下一个输入是否为空或是否已完成。

像这样的东西

```
./a.out program < file.txt 
```

所以这就是我想要做的。

```
char string[10];

while ( the input is NOT empty)
{
    scanf("%s",&string);
    printf("%s",string);
} 
```

给定的文件看起来像这样

```
abc
abcd
abcde
abcdef 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:38:48.873

如果您执行以下操作，它只会在`scanf`无法读取其他内容时停止。

```
while( scanf("%s", string) != EOF ){
    printf("%s", string);

} 
```

**顺便说一句**，我们不能使用扫描字符串，`&`因为它已经是一个指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T02:40:19.120

您可以致电[`feof`](http://pubs.opengroup.org/onlinepubs/009695299/functions/feof.html)：`stdin`

```
while (!feof(stdin)) {
    scanf("%s", string); // You do not need & for strings
    printf("%s",string);
} 
```

# c++ - 从线程内获取本机句柄？

> ID：14450643
> 
> 赞同：2
> 
> 时间：2013-01-22T02:33:21.087
> 
> 标签：c++, windows, multithreading, winapi, c++11

我正在使用 VS2012，我想从正在运行的线程中设置线程优先级。目标是初始化具有最高优先级状态的所有线程。为此，我想获得一个`HANDLE`线程。

我在访问与`thread`对象对应的指针时遇到了一些问题。

这可能吗？

从调用主线程，指针是有效的，从 C++11 线程它被设置为`CCCCCCCC`. 可以预见地取消引用一些无意义的内存位置会导致崩溃。

下面的代码是显示问题的简化版本。

```
#include "stdafx.h"
#include <Windows.h>
#include <thread>
#include <mutex>
#include <condition_variable>
#include <iostream>
#include <atomic>
using namespace std;
class threadContainer
    {
    thread* mT;
    condition_variable* con;
    void lockMe()
        {
        mutex m;
        unique_lock<std::mutex> lock(m);
        con->wait(lock);//waits for host thread
        cout << mT << endl;//CCCCCCCC
        auto h = mT->native_handle();//causes a crash
        con->wait(lock);//locks forever
        }
    public:
        void run()
            {
            con = new condition_variable();
            mT = new thread(&threadContainer::lockMe,*this);
            cout << mT << endl; //00326420
            con->notify_one();// Without this line everything locks as expected
            mT->join();
            }
    };
int _tmain(int argc, _TCHAR* argv[])
    {
    threadContainer mContainer;
    mContainer.run();
    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:27:23.570

```
#include <mutex>
#include <condition_variable>
#include <iostream>
#include <atomic>
#include <thread>

class threadContainer {
   std::thread* mT;
  std::mutex m;
  void lockMe() {
    // wait for mT to be assigned:
    {
      std::unique_lock<std::mutex> lock(m);
    }
    std::cout << "lockMe():" << mT << "\n";
    auto h = mT->native_handle();//causes a crash
    std::cout << "Done lockMe!\n";
  }
  public:
    void run() {
      // release lock only after mT assigned:
      {
        std::unique_lock<std::mutex> lock(m);
        mT = new std::thread( [&](){ this->lockMe(); } );
      }
      std::cout << "run():" << mT << "\n"; //00326420
      mT->join();
    }
};

int main() {
  threadContainer mContainer;
  mContainer.run();
  return 0;
} 
```

试试看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T02:53:10.807

0xcccccccc 表示“变量未初始化”。您的代码中有线程竞争错误。线程在分配“mT”变量之前开始运行。您将需要额外的同步来阻塞线程，直到分配完成，以便您可以安全地使用 mT。这也将确保新线程可以*看到*mT 的更新值，在多核机器上需要内存屏障。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T10:55:11.883

`condition_variable` *这是一个带有和* 的示例代码`mutex`。

```
class threadContainer
{
    std::thread* mT;
    std::mutex m;
    std::condition_variable cv;
    bool flag;
    void lockMe() {
        // 1\. you must acquire lock of mutex.
        unique_lock<std::mutex> lk(m);
        // 2\. and wait on `cv` for `flag==true`
        cv.wait(lk, [&]{ return flag; });
        cout << mT << endl;
        auto h = mT->native_handle();
    }
public:
    void run()
    {
        flag = false;
        mT = new std::thread( [&](){ this->lockMe(); } );
        {
            // 3\. set `flag` and signal `cv`
            lock_guard<decltype(m)> lk(m);
            cout << mT << endl;
            flag = true;
            cv.notify_one();
        }
        mT->join();
    }
}; 
```

如果你真正想做的是“初始化所有具有最高优先级状态的线程”，那么这个简化的代码呢？无论如何，更改线程优先级取决于平台并且不属于 C++ 标准库。

```
class threadContainer
{
    std::thread thd;
    void work() {
        // (1) change thread priority itself
        ::SetThreadPriority(::GetCurrentThread(), THREAD_PRIORITY_HIGHEST);
        // do something...
    }
public:
    void run()
    {
        thd = std::thread( [&](){ this->work(); } );
        // (2) or change thread priority from outside
        ::SetThreadPriority(thd.native_handle(), THREAD_PRIORITY_HIGHEST);
        thd.join();
    }
}; 
```

# git - .gitignore 在 github for mac 程序中不起作用

> ID：14450644
> 
> 赞同：11
> 
> 时间：2013-01-22T02:33:21.023
> 
> 标签：git, github, github-for-mac

我四处搜索，找到了一些解释解决问题的教程，不幸的是它们没有奏效。

基本上发生的事情是我在 .gitignore 中有我正在使用的 github for mac 程序试图提交的文件，尽管它们被忽略了。我在 stackoverflow 上发现了一些博客甚至其他帖子，说您可以使用命令行修复它，并给出解释。不幸的是，我完全没有使用命令行的经验，而且我按照他们的指示进行的尝试都未能解决问题。

有没有办法在不使用命令行的情况下解决这个问题？如果没有，有人可以告诉我如何使用在其他地方找到[的命令行黑客：](http://www.randallkent.com/development/gitignore-not-working)

```
git rm -r --cached .
git add .
git commit -m "fixing .gitignore" 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T03:01:59.897

这些文件是否已被跟踪，并且 Mac 版 GitHub 正在尝试提交修改？`.gitignore`只防止*未跟踪*的文件被 git 添加/提交。一旦文件被跟踪，`.gitignore`就停止查阅。

您链接的“hack”实际上只是要求 git 删除 repo 中的所有文件，然后将其全部重新添加。这是有效的，因为`.gitignore`在重新添加文件时会参考它（因为它会在索引中没有的任何文件被参考，并且`git rm -r --cached .`删除了整个索引）。

# python - 什么时候应该在 Django 模板中使用 URL 标签？

> ID：14450645
> 
> 赞同：0
> 
> 时间：2013-01-22T02:33:30.187
> 
> 标签：python, django, django-templates

我读完了（[内置](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#std:templatetag-url)[*模板标签和过滤器中的*](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#std:templatetag-url)[*url*](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#std:templatetag-url)*）。*

 *URL标签什么时候有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:46:19.920

当您想要链接到视图时使用 URL 标记。您不希望将视图 URL 硬编码到模板中 - 因此您使用 URL 标记。这样，如果您更改视图的 URL，则无需梳理每个模板并确保该视图的硬编码 URL 也已更改。

您还可以为您在模板标签中链接的视图传递变量，如下所述。

假设您有一个名为 section 的视图，如下所示：

```
def section(request):
    code.... 
```

在`section`模板中，您希望将参数传递给不同的视图`people`：

```
def people(request, section_id):
     code.... 
```

请注意，它`people`需要一个参数，`section_id`。因此，在您的`section`模板中，您可以在链接中使用 url 标记，传递`section_id`，如下所示：

```
<a href="{% url views.people section_id %}">Link to People View - Passing Section_ID </a> 
```

在`people`模板中，您可以链接回`section`视图 - 这不需要任何参数：

```
<a href="{% url views.section %}">Link to Section View - No parameters needed </a> 
```

编辑：看起来从 Django 1.5 开始，第一个参数视图必须像这样用引号括起来：

`{% url 'views.section' %}`.

由于 1.5 仍处于开发阶段，我将保留上述 1.4 样式。*

# c# - 如何使合同对象模型等同于我需要响应 XML 在 WCF 中的样子？

> ID：14450648
> 
> 赞同：0
> 
> 时间：2013-01-22T02:33:42.870
> 
> 标签：c#, wcf, api, datacontract

我觉得我已经这样做了很多次，但似乎我必须跳过太多的箍，我想知道是否有更简单的方法。

我正在使用 WCF 构建 API（REST 和 SOAP 端点）。我正在从我的一个调用中构建我希望 XML 响应看起来像的样子，并且我想知道获取其等效对象模型（数据契约）的最简单方法。

这是一个示例 XML 请求，其中 GetSectionInvitesResponse 是应从 API 调用返回的顶级合同。

```
<GetSectionInvitesResponse>
 <UserID></UserID>
     <OrganizationInvites>
            <SectionInvites>
        <SectionSubscriber>
            <Section>
                <ID></ID>
                <Name></Name>
                <Description></Description>
                <Descriptor></Descriptor>
                <ParentID></ParentID>
            </Section>
            <SectionSubscriberID>
        </SectionSubscriber>
        <SectionSubscriber>
            <Section>
                <ID></ID>
                <Name></Name>
                <Description></Description>
                <Descriptor></Descriptor>
                <ParentID></ParentID>
            </Section>
            <SectionSubscriberID>
        </SectionSubscriber>
    </SectionInvites>
 </OrganizationInvites>
 <OrganizationInvites>
            <SectionInvites>
        <SectionSubscriber>
            <Section>
                <ID></ID>
                <Name></Name>
                <Description></Description>
                <Descriptor></Descriptor>
                <ParentID></ParentID>
            </Section>
            <SectionSubscriberID>
        </SectionSubscriber>
        <SectionSubscriber>
            <Section>
                <ID></ID>
                <Name></Name>
                <Description></Description>
                <Descriptor></Descriptor>
                <ParentID></ParentID>
            </Section>
            <SectionSubscriberID>
        </SectionSubscriber>
        <SectionSubscriber>
            <Section>
                <ID></ID>
                <Name></Name>
                <Description></Description>
                <Descriptor></Descriptor>
                <ParentID></ParentID>
            </Section>
            <SectionSubscriberID>
        </SectionSubscriber>
    </SectionInvites>
 </OrganizationInvites>
</GetSectionInvitesResponse> 
```

**编辑** 因为我在最初的帖子中不够清楚，所以我想更清楚地说明我打算从这个问题中获得什么。

我想知道通过 SOAP 和 REST 以最少的重复代码公开此内容的最佳方法，同时遵循与上所示相同的 XML 模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:47:55.907

理论上你可以：

1.  将示例 xml 粘贴到您最喜欢的 xml 编辑器中
2.  让编辑器自动为您生成 xml 架构。在 Visual Studio 中，它的 XML->Generate Schema。例如`InvitesResponse.xsd`.
3.  从命令提示符运行`svcutil /dconly InvitesResponse.xsd /language:C#`以创建 DataContract 文件。

出于好奇，我经历了这些步骤并发现：

1.  `<SectionSubscriberID>`在您的 xml 中未正确关闭。
2.  DataContractSerializer 不允许按照您当前定义的方式进行节点序列。

svcutil 输出：

> 错误：无法导入命名空间“”中的“GetSectionInvitesResponse”。元素“OrganizationInvites”上的“maxOccurs”必须为 1。要么更改架构，以便类型可以映射到数据协定类型，要么使用 ImportXmlType 或使用不同的序列化程序。

所以我发现[DataContract Schema Reference](http://msdn.microsoft.com/en-us/library/ms733112.aspx)指出在复杂类型中必须有 maxOccurs = 1。

如果您想保留 DataContract 序列化程序而不是切换到 XmlSerializer，您可能必须更改您的架构......如果您刚开始编码，您也会发现。

正是在这一点上，@John Sanders 的智慧开始发挥作用，我停了下来。

# php - Google Openid：这是一种可接受的注销方式吗？

> ID：14450652
> 
> 赞同：3
> 
> 时间：2013-01-22T02:34:01.153
> 
> 标签：php, login, openid

我在我的网站上使用 google open id 作为登录系统。我在注销用户时遇到了一些麻烦。破坏网站上的会话显然不会将它们从谷歌帐户中注销，并且在下次登录时，用户会自动使用浏览器登录的任何谷歌帐户登录。

看了这里的几个问题，我发现我可以向 [https://www.google.com/accounts/Logout提出请求](https://www.google.com/accounts/Logout)

我尝试使用

```
<script type="text/javascript">
    $.ajax({ url: "https://www.google.com/accounts/Logout" });
</script> 
```

但它没有用，我不知道为什么。然而，这工作得很好

```
<img src="https://www.google.com/accounts/Logout" /> 
```

谁能向我解释为什么ajax请求不起作用？

编辑：

更重要的是，发送请求的最佳方式是什么？img 标签似乎不是一个好的解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:45:06.660

您不能使用 jQuery 发出跨域请求`$.ajax`，请参阅[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，这就是您的第一个解决方案不起作用的原因。

**编辑：**我不熟悉 Google 的 OpenID 的工作原理，但作为用户，当我想退出应用程序时，我不会使用让我退出 Google 的应用程序；这是一个糟糕的用户体验。

# c++ - 警告：'int main(int, char***)' 的第二个参数应该是 'char **' [-Wmain]（GNU C++ 编译器；Ubuntu 12.10）

> ID：14450653
> 
> 赞同：1
> 
> 时间：2013-01-22T02:34:04.337
> 
> 标签：c++, gcc, ubuntu-12.10

尝试使用 C++ 克隆“yes”命令作为一个小实验（这是在 Ubuntu 12.10 上），这里有一个小问题：

```
#include <iostream>
#include <cstring>
#include <cstdio>
#include <cmath>
#include <cstdlib>

using namespace std;

void yes (char* cmd[]) {
  if ( cmd != NULL ) {
    while (true) {
      cout << cmd[1] << endl;
    }
  } else {
    while (true) {
      cout << "y" << endl;
    }
  }
}

int main(int argc, char** argv[]) {
  yes(argv[1]);
  return 0;
} 
```

如果我保持原样，我会收到标题中描述的警告。如果我删除 argv 上的一个星号，则会收到关于将“char*”转换为“char**”的错误。并删除额外的功能（即把它全部放在 main 中，像这样）：

```
int main(int argc, char** argv) {
  if ( argv != NULL ) {
    while (true) {
      cout << argv[1] << endl;
    }
  } else {
    while (true) {
      cout << "y" << endl;
    }
  }
  return 0;
} 
```

警告没有区别。

先谢谢了...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T02:38:06.807

你可以写`char **argv`或`char *argv[]`但不能同时写双星和双括号。

> ### ISO/IEC 14882:2011 §3.6.1 主要功能
> 
> 实现不应预定义`main`功能。该功能不得重载。它的返回类型应该是 type `int`，否则它的类型是实现定义的。所有实现都应允许以下两种 main 定义：
> 
> ```
> int main() { /* ... */ } 
> ```
> 
> 和
> 
> ```
> int main(int argc, char* argv[]) { /* ... */ } 
> ```
> 
> 后一种形式`argc`是从程序运行的环境传递给程序的参数数量。如果`argc`不为零，则这些参数应作为指向以空结尾的多字节字符串 (NTMBS) (17.5.2.1.4.2) 的初始字符`argv[0]` 的`argv[argc-1]`指针提供，并且 argv[0] 应是指向表示的 ntmbs 的初始字符的指针用于调用程序的名称或`""`. argc 的值应为非负数。的值`argv[argc]` 应为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T02:38:57.487

`argv`从on删除括号`main`：

```
int main(int argc, char** argv) { 
```

**并且**从`cmd`_`yes`

```
void yes (char* cmd) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T02:37:54.097

main 的第二个参数是一个 C-String 数组，包含你传入的选项，所以它应该是`char*argv[]`or `char **`。

看看[liveworkspace 片段](http://liveworkspace.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T03:09:49.700

似乎第一个答案钉了它。长话短说，这不是删除“yes”函数（以及随后将其代码合并到main）或删除一个星号（即“char* argv”而不是“char** argv”） ，但是两者的组合删除了警告（只需删除一个星号而函数仍然存在会导致转换错误）。

再次感谢！

# ios - 跟踪通过我的应用发送和接收的数据的使用情况

> ID：14450656
> 
> 赞同：5
> 
> 时间：2013-01-22T02:34:39.290
> 
> 标签：ios, ios6

如何跟踪通过我的应用发送和接收的数据的使用情况？

我只想记录我的应用程序运行时发送和接收的字节数。如果我能获得 Wifi 和蜂窝网络的单独信息，那会很棒，但不是优先事项。

我知道如何找到设备的总使用量 - [https://stackoverflow.com/a/8014012/427969](https://stackoverflow.com/a/8014012/427969)

另外，我知道我可以使用 Instruments 来收集网络活动数据，但我想在我的应用程序中记录这些数据，因此需要一种编程方式来做到这一点。

我试图搜索这个，但我发现的只是设备的网络使用情况，而不是特定应用程序的使用情况。

以下是 Whatsapp 的设置 -> 使用页面的屏幕截图，可以更好地了解我想要做什么：

![在此处输入图像描述](../Images/fdd9a22a3e31b5a2a2d6027130eef5e8.png)

我`AFNetworking`用于 HTTP 请求和响应如下：

```
NSData* requestData = [NSJSONSerialization dataWithJSONObject:info options: NSJSONWritingPrettyPrinted error:&error];
if(error != nil) {
    NSLog(@"Error: converting JSON: %@, %@", error, error.userInfo);
}

[request setHTTPMethod:@"POST"];
[request setValue:@"application/x-www-form-urlencoded; charset=UTF-8" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody: requestData];

/*
    ################### ----------------- ###################
    WILL [requestData length] BE THE NUMBER OF BYTES SEND ???
    ################### ----------------- ###################
*/
NSLog(@"data bytes: %d", [requestData length]); 

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL .....];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest: request                                                                                 
    success: ^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

    } failure: ^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {

}];
[operation start]; 
```

我已经更新了我的问题。

有人可以回答：`[requestData length]`一个请求的发送字节数是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:41:16.120

有几种方法取决于您使用哪个类来下载`AFNetworking`

`AFHTTPRequestOperation`例如有以下方法：

```
setDownloadProgressBlock:^(NSInteger bytesRead, NSInteger totalBytesRead, NSInteger totalBytesExpectedToRead) 
```

反过来，有这样的方法：

```
setUploadProgressBlock:^(NSInteger bytesWritten,long long totalBytesWritten,long long totalBytesExpectedToWrite) 
```

使用这种方法，您应该尝试跟踪所有上传和下载的数据。

`AFJSONRequestOperation`是 的子类`AFHTTPRequestOperation`，因此这些方法应该在任一类中都有效。

请注意，仅向网络服务器发送“json 请求”并不意味着您没有下载。当然，您必须获取内容 - json - 这将是您下载的数据。

此外，您询问是否`[requestData length]`告诉您发送到服务器的正确大小。这不是确切的大小，因为在您的 requestData 中您没有 HTTP 请求的附加标头，因此您的大小将比发送的原始字节小一点。

每次执行上述方法之一时，您应该将读取的字节结果添加到执行此方法之前读取的字节中。例如，您必须将当前的 bytesRead 永久保存在 coredata 或任何其他持久性存储中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:14:03.657

我使用亚历山大提到的方法如下：

```
AFJSONRequestOperation *operation = [[AFJSONRequestOperation alloc] initWithRequest: request];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    // success
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    // failure
}];

[operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
    // bytes received - saved bytesRead variable to NSUserDefaults
}];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    // bytes sent - saved bytesWritten variable to NSUserDefaults
}];
[operation start]; 
```

# mysql - 选择行直到在列中达到总金额（mysql）

> ID：14450660
> 
> 赞同：3
> 
> 时间：2013-01-22T02:35:10.823
> 
> 标签：mysql, sql, conditional

我在 SF 中看到过这个问题，但我是一个菜鸟，我无法让我的大脑在他们周围出现问题。因此，如果这感觉像是重复，请原谅我。

我的样品表

```
--------------------------
身份证 | 供应商 | 数量
--------------------------
1 1 2
2 1 2
3 2 5
4 3 2
5 1 3
6 2 4

```

我需要获取行“直到”，对于特定供应商 ID，“数量”的累积总数等于或大于 5，按降序排列。

在此示例中，对于供应商 1，它将是 ID 为 5 和 2 的行。

```
    Id - 唯一主键
    供应商 - 外键，供应商信息还有另一个表。
    数量 - 双

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:54:56.717

它并不漂亮，但我认为它可以做到，也许它可以成为不那么麻烦的东西的基础。请注意，我使用“假”INNER JOIN 只是为了第一次初始化一些变量——它没有其他作用。

```
SELECT ID,
       supplier,
       qty,
       cumulative_qty
FROM
(
    SELECT
        ID,
        supplier,
        qty,
        -- next line keeps a running total quantity by supplier id
        @cumulative_quantity := if (@sup <> supplier, qty, @cumulative_quantity + qty) as cumulative_qty,
        -- next is 0 for running total < 5 by supplier, 1 the first time >= 5, and ++ after
        @reached_five := if (@cumulative_quantity < 5, 0, if (@sup <> supplier, 1, @reached_five + 1)) as reached_five,
        -- next takes note of changes in supplier being processed
        @sup := if(@sup <> supplier, supplier, @sup) as sup
    FROM
    (
        --this subquery is key for getting things in supplier order, by descending id
        SELECT *
        FROM `sample_table`
        ORDER BY supplier, ID DESC
     ) reverse_order_by_id
    INNER JOIN
    (
        -- initialize the variables used to their first ever values
        SELECT @cumulative_quantity := 0, @sup := 0, @reached_five := 0
    ) only_here_to_initialize_variables
) t_alias
where reached_five <= 1 -- only get things up through the time we first get to 5 or above. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:38:31.447

标准 SQL 没有“我要达到什么行号”的概念，因此只能使用称为游标的东西来实现。使用游标编写代码类似于在其他语言中使用 for 循环编写代码。

如何使用游标的示例如下：

[http://dev.mysql.com/doc/refman/5.0/en/cursors.html](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T02:58:25.330

这个怎么样？使用两个变量。

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/9d57a/27)

询问：

```
set @tot:=0;
set @sup:=0;

select x.id, x.supplier, x.ctot
from (
select id, supplier, qty,
@tot:= (case when @sup = supplier then
@tot + qty else qty end) as ctot,
@sup:=supplier
from demo
order by supplier asc, id desc) x
where x.ctot >=5
;

| ID | SUPPLIER | CTOT |
------------------------
|  2 |        1 |    5 |
|  1 |        1 |    7 |
|  3 |        2 |    5 | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T03:06:05.883

这是一个关于光标的粗略演示，可能会有所帮助。

```
CREATE TABLE #t
(
    ID       INT IDENTITY,
    Supplier INT,
    QTY      INT
);

TRUNCATE TABLE #t;

INSERT  INTO #t (Supplier, QTY)
VALUES         (1, 2),
(1, 2),
(2, 5),
(3, 2),
(1, 3);

DECLARE @sum AS INT;

DECLARE @qty AS INT;

DECLARE @totalRows AS INT;

DECLARE curSelectQTY CURSOR
    FOR SELECT   QTY
        FROM     #t
        ORDER BY QTY DESC;

OPEN curSelectQTY;

SET @sum = 0;

SET @totalRows = 0;

FETCH NEXT FROM curSelectQTY INTO @qty;

WHILE @@FETCH_STATUS = 0
    BEGIN
        SET @sum = @sum + @qty;
        SET @totalRows = @totalRows + 1;
        IF @sum >= 5
            BREAK;
    END

SELECT   TOP (@totalRows) *
FROM     #t
ORDER BY QTY DESC;

CLOSE curSelectQTY;

DEALLOCATE curSelectQTY; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T04:02:51.517

```
SELECT x.* 
  FROM supplier_stock x 
  JOIN supplier_stock y  
    ON y.supplier = x.supplier 
   AND y.id >= x.id 
 GROUP 
    BY supplier
     , id 
HAVING SUM(y.qty) <=5; 
```

# java - 什么是 Business Objects Enterprise Java SDK？

> ID：14450662
> 
> 赞同：2
> 
> 时间：2013-01-22T02:35:26.613
> 
> 标签：java, spring, jakarta-ee, business-objects-sdk

首先，如果我的问题似乎是一个菜鸟问题，我很抱歉。我正在调查我们的 lib 文件夹中的罐子，发现了这些罐子：

*   `jrcerom.jar`
*   `rasapp.jar`
*   `rascore.jar`
*   `ReportTemplate.jar`
*   `Serialization.jar`
*   `webreporting-core.jar`

经过研究，这些 jar 似乎来自他们所谓的**Business Objects Enterprise Java SDK**。

*   什么是**Business Objects Enterprise Java SDK**？
*   它不是普通 Java SDK 发行版的一部分吗？
*   它有什么作用？

我还在一些网站上看到，使用 Crystal Report 似乎需要这些罐子。但是我们的 Web 应用程序上没有任何 Crystal Report。知道它是干什么用的吗？

一些我不确定是否有用的信息：*我们正在将 Spring3 用于我们的 Web 应用程序，并且我们正在 Tomcat 上运行它。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:46:34.707

看看这个论坛主题，特别是从顶部开始的第 3 篇文章（列出了 Business Objects 的 JAR 的文章）：

[http://www.forumtopics.com/busobj/viewtopic.php?p=417793](http://www.forumtopics.com/busobj/viewtopic.php?p=417793)

另请查看 SAP / Crystal Reports 业务对象：

[http://devlibrary.businessobjects.com/BusinessObjectsXIR2SP2/en/devsuite.htm](http://devlibrary.businessobjects.com/BusinessObjectsXIR2SP2/en/devsuite.htm)

# html - 负边距在 chrome 中的行为不正确

> ID：14450665
> 
> 赞同：1
> 
> 时间：2013-01-22T02:35:37.670
> 
> 标签：html, css, google-chrome, margin

大家好，我正在尝试使用另一个 div 裁剪图像。Margin -left,-top,-bottom 工作，但由于某种原因，margin-right 似乎不适用于我在 chrome 上。有什么想法我应该做什么？我一直在努力解决这个问题好几个小时：c

[http://knowmad.herokuapp.com/sunapp/10/](http://knowmad.herokuapp.com/sunapp/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:52:09.663

我不太确定为什么 margin-right 不起作用，但你考虑过使用 clip 属性吗？

[http://webdesignerwall.com/tutorials/5-simple-but-useful-css-properties](http://webdesignerwall.com/tutorials/5-simple-but-useful-css-properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T14:41:13.480

使用右边距中的像素而不是百分比。IE`margin-right:20px`

# ruby-on-rails - 编写 Rails 集成测试/规范时如何存根外部 JavaScript 库？

> ID：14450667
> 
> 赞同：5
> 
> 时间：2013-01-22T02:35:51.673
> 
> 标签：ruby-on-rails, rspec, shared-libraries, geocoding, vcr

我的应用程序与谷歌地图接口进行地理编码和条纹支付。使用[VCR](https://github.com/vcr/vcr)，我模拟了对这些服务的所有请求，效果很好。但是两者的库仍在`javascript_include_tag`s 中加载。处理这个问题的最佳方法是什么，以便集成测试可以完全脱离互联网运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:26:08.983

如果你想存根 javascript，那么为什么首先记录交互呢？我错过了什么吗？

我很确定测试中的地理编码违反了谷歌地图服务条款。我认为您想要做的是存根地理编码本身。

从未使用过Stripe，但我可能会采用这种方法：在规范助手中添加一个方法来在本地缓存Stripe javascript，即，当连接可用时，下载Stripe javascript。然后在您看来，如果 Rails.env.test? 在本地加载 javascript？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-19T22:10:11.803

对于这些天寻找解决方案的人来说，有一个很好的宝石叫做[Puffing Billy](https://github.com/oesmith/puffing-billy)。

[与VCR](https://github.com/vcr/vcr)允许您记录和重放服务器代码发出的外部请求的方式类似，该库允许您对客户端代码发出的外部请求执行相同的操作。

# android - Android：将我的 SQLlite 表的一部分导出到文件并将其上传到不同手机上同一应用程序的数据库

> ID：14450668
> 
> 赞同：0
> 
> 时间：2013-01-22T02:36:10.493
> 
> 标签：android, sqlite

我试图弄清楚如何将我的数据库的特定部分导出到文件中，然后将文件发送给朋友以在他的手机上打开它，并自动将该文件中的值插入到他在同一应用程序中的数据库中。

所以这个想法是能够共享我的数据库的特定部分。这样我就可以选择通过消息传递、电子邮件等方式发送文件...... 这也将使我有机会根据用户请求备份用户数据。我不知道我需要什么，我该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:42:14.837

你可以这样做：

**Step1** :
加载您要分享的数据。

**Step2** :
将其转换为 SQL 查询。

**第三步**：
使用网络服务将其发送到其他设备。

**Step4** :
在其他设备上运行 SQL 查询。

# javascript - 如何向 Windows API 提供 HMAC 哈希盐？

> ID：14450670
> 
> 赞同：0
> 
> 时间：2013-01-22T02:36:15.573
> 
> 标签：javascript, windows-8, windows-store-apps

我正在使用 HMAC 哈希来保护数据。我在客户端散列数据，在服务器上重建散列，然后进行比较。服务器上的散列（web api）使用特定的盐来加密数据。我现在需要为我的 Windows 8 应用程序使用相同的盐（使用 JavaScript API）。我有执行散列的代码，但是如何提供盐来生成散列，以便我可以在 JavaScript 客户端和服务器上重新创建相同的散列？

这不是服务器问题，而是特定于客户端 JavaScript windows 8 应用程序。这是我用于散列的代码。但是，我在 API 中找不到任何可以让我更改盐的东西......

```
var provider = Windows.Security.Cryptography.Core.HashAlgorithmProvider.openAlgorithm(
    Windows.Security.Cryptography.Core.HashAlgorithmNames.sha1);
var hash = provider.createHash();
var binary = Windows.Security.Cryptography.CryptographicBuffer.convertStringToBinary(myData, 
         Windows.Security.Cryptography.BinaryStringEncoding.utf8);
hash.append(binary);

var outputHashBinary = hash.getValueAndReset();
var base64Ticket = Windows.Security.Cryptography.CryptographicBuffer.encodeToBase64String(outputHashBinary); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:34:12.420

您应该使用 MacAlgorithmProvider 而不是 HashAlgorithmProvider。

这是关于 MacAlgorithmProvider 的 MSDN 文章，其中包含 JavaScript 语言示例 [http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.macalgorithmprovider.aspx?cs-save-lang= 1&cs-lang=javascript#code-snippet-1](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.macalgorithmprovider.aspx?cs-save-lang=1&cs-lang=javascript#code-snippet-1)

该示例尝试根据需要创建 HMAC

# mongodb - 我应该如何在 Meteor Mongodb 中插入一堆数据？

> ID：14450676
> 
> 赞同：0
> 
> 时间：2013-01-22T02:37:01.050
> 
> 标签：mongodb, meteor

在 MongoDB 中保存 500 多个 Facebook 朋友需要很长时间，我认为我做错了。我将粘贴我如何进行插入：

模型.js：

```
Friends = new Meteor.Collection('friends');
Friend = {
set : function(owner, friend) {
    var user_id = get_user_by_uid(friend['uid']);
    return Friends.update({uid: friend['uid'], owner: owner}, {$set:{
        name : friend['name'],
        pic_square : 'https://graph.facebook.com/'+friend['uid']+'/picture?width=150&height=150',
        pic_cover : friend['pic_cover'],
        uid : friend['uid'],
        likes_count : friend['likes_count'],
        friend_count : friend['friend_count'],
        wall_count : friend['wall_count'],
        age : get_age(friend['birthday_date']),
        mutual_friend_count : friend['mutual_friend_count'],
        owner : owner,
        user_id : user_id ? user_id['_id'] : undefined
    }}, {upsert: true});
}
} 
```

server.js：

```
// First get facebook list of friends   
friends = friends['data']['data'];

_.each(friends, function(friend){
    Friend.set(user_id, friend);
}); 
```

超过 2 个用户的负载很高，并且需要很长时间才能插入数据库。我应该在这里改变什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:20:33.537

我认为性能不好有两个原因。

首先，您在客户端上体验的是`minimongo`性能，而不是`mongodb`性能。`minimongo`不能索引，所以`upsert`很昂贵——`O(n^2)`数据库大小很昂贵。只需`if (Meteor.isSimulation) return;`在数据库更新之前将语句添加到模型中即可。

查看一些示例代码以了解如何组织您的代码，因为`Friend.set(user_id, friend)`应该发生在方法调用中，通常在您的`model.js`. 然后，如果检测到它是模拟调用的客户端，而不是执行它的服务器，它应该逃逸。

其次，您正在使用`uid`和`owner`喜欢一把钥匙，但没有把它们变成钥匙。在您的服务器启动代码中，添加`Friends._ensureIndex({uid:1, owner:1})`.

如果这些都不起作用，那么您对 ​​Facebook 的查询可能会以某种方式受到速率限制。

查看[https://stackoverflow.com/a/8805436/1757994](https://stackoverflow.com/a/8805436/1757994)以讨论如果您受到速率限制，您将收到的错误消息。

他们几乎肯定不希望您按照自己的方式复制图表。您可能要考虑根本不复制图表，而仅在使用的基础上获取数据，因为无论如何它很快就会变得陈旧。

# jquery-ui - 将单击侦听器附加到按钮集中的 jQueryUI 按钮

> ID：14450678
> 
> 赞同：0
> 
> 时间：2013-01-22T02:37:08.280
> 
> 标签：jquery-ui, javascript-events

尝试将点击侦听器附加到按钮集中的所有按钮：

这是HTML：

```
<div id="options">
  <input class="optionCtrl" type="radio" name="radio" id="radio1" value="Yes" />
  <label for="radio1"> True </label>
  <input class="optionCtrl" type="radio" name="radio" id="radio2" value="No" />
  <label for="radio2"> False </label>
  <input class="optionCtrl" type="radio" name="radio" id="radio3" value="Maybe" />
  <label for="radio3"> Don’t know </label>
</div> 
```

这是JS：

```
$("#options").buttonset();
$('.optionCtrl').click(function() {
  alert($(this).val());
}); 
```

但没有骰子。使用 Chrome 开发者控制台，看起来 jQueryUI 正在用元素和元素替换`input`元素`label`-`span`将点击附加到标签也不起作用。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:10:17.813

该问题与相关按钮集位于 Goole Maps 信息窗口中的事实有关。我需要将点击侦听器切换为使用[.on()](http://api.jquery.com/on/)以便在创建信息窗口并添加按钮内容时，点击侦听器工作。

# python - Linux：如何模拟接口上的传入数据包？

> ID：14450680
> 
> 赞同：0
> 
> 时间：2013-01-22T02:37:27.673
> 
> 标签：python, c, linux, network-programming, tun

如何在特定软件界面上模拟一些传入流量？这种需要的原因是我们在以太层和 IP 层之间有几个软件接口，它们将沿着网络堆栈解析我们自己的 L2.5 标头，即

```
eth header -> virt_dev1 -> virt_dev2 -> IP -> TCP 
```

我在看 TAP，看起来它可以提供帮助。但我不明白如何将此 TAP 接口链接到我们自己的软件接口，以便数据包将通过预期的网络堆栈？也许我对TAP的理解不正确？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:41:35.143

该`tap`接口充当网络堆栈的第 2 层端口 - 从设备节点读取和写入将从网络层摄取/检索数据包。这些数据包在该点之后的去向取决于网络配置（转发、桥接等）。

# asp.net - 如何在不更改页面布局的情况下将 HTML 页面转换为 .ASPX 页面并向其添加/删除控件

> ID：14450688
> 
> 赞同：6
> 
> 时间：2013-01-22T02:38:15.863
> 
> 标签：asp.net, vb.net, visual-web-developer-2010

您好，我是 ASP.NET 的新手

我有一个从另一个程序设计的 html 页面，我想使用可视化 Web 开发人员将 html 转换为 asp.net aspx Web 表单。

我已经正常打开了页面，但是布局页面中的控件很难移动或替换，例如当我移动一个按钮时，页面的设计就会崩溃。如何在 Visual web Developer 2010 上将按钮或文本框插入到 aspx/html 中而不更改页面布局？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T06:27:34.613

要将 html 页面转换为 aspx 页面，

```
1\. Create a new web form in visual web developer.
2\. Copy the content from body of the html file , paste it in body of the aspx page.
3\. Similarly copy the script, meta tags from head section of html , paste it in head    section of aspx page.
4.if any external style sheet,Images included with html file, add them appropriately in a folder of your asp.net application.
5.Now try to run the page and check if everything appears well, if not appearing well check the stylesheet and make some small changes.
6.Check at the top of the page asp.net , <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> it is necessary. 
```

练习将使您在 css、样式和 HTML 方面达到完美。

-------一切都应该很好--------------

如果在后面的代码中没有找到任何控件，请在标记中添加 [runat="server"] 属性。并且是一个html控件并且是服务器控件。

* * *

# tableau-api - 将表格从 HTML 文件直接导入 Tableau

> ID：14450696
> 
> 赞同：0
> 
> 时间：2013-01-22T02:39:04.833
> 
> 标签：tableau-api

我记得看到将 Wikipedia HTML 文档中的表格直接导入到 tableau 中。Tableau 的网站有一个方法涉及使用 Google doc HTML 导入功能

```
=ImportHtml("http://en.wikipedia.org/wiki/List_of_bank_failures_in_the_United_States_(2008%E2%80%93present)","table",2) 
```

首先将表格导入 Google 电子表格，然后下载可链接到 Tableau 的电子表格。

有没有办法将维基百科表格或任何其他 HTML 文档直接导入 Tableau？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:22:20.530

Tableau 允许您将任何使用 csv 分隔文本的应用程序的数据粘贴到剪贴板上（并非所有应用程序都这样做）。这是一篇基于知识的文章。 [http://onlinehelp.tableausoftware.com/current/pro/online/en-us/clipboard_datasource.html](http://onlinehelp.tableausoftware.com/current/pro/online/en-us/clipboard_datasource.html)

不幸的是，它似乎不适用于您在示例中指出的表格，也许 HTML 太复杂了。但是，如果您可以以某种方式将表格导出为 CSV，则可以将其加载到 Tableau 中。

Tableau 版本 8 即将发布，并且有几个不同的新 API 可用，它们应该有助于连接到来自各种来源的数据。

# ruby - Awestruct 导航：按类别对页面进行排序

> ID：14450699
> 
> 赞同：2
> 
> 时间：2013-01-22T02:39:22.117
> 
> 标签：ruby, haml, jekyll, awestruct

我要打印的是一个`ul`s `li`，每个包含具有给定标签的所有页面（在元数据中设置）

如果不熟悉Awestruct，它类似于Jekyll，页面元数据可以访问为`page.property`，页面在一个`site`对象中，并且可以迭代`site.pages.each`

我想要实现的是如下所示：

```
Category
    Page
    Page
Category
    Page
    Page 
```

这是我到目前为止所拥有的，我只能打印页面标题。

```
- site.pages.each do |page|
            %li
              %a{ :href => page.url}= page.title 
```

我缺少一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:10:18.913

如果我理解你想要什么，这样的事情应该可以工作：

```
%ul
  -site.pages.group_by(&:category).each do |category, pages|
    %li
      = category
      %ul
        -pages.each do |page|
          %li
            %a{href: page.url}= page.title 
```

这用于[`group_by`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by)创建以类别属性为键的页面数组的哈希，并生成每个页面中所有页面的嵌套列表。

这将包括*所有*页面，包括没有类别的页面，因此您可能需要先过滤 pages 数组[`reject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reject)：

```
-site.pages.reject{|p| p.category.nil?}.group_by(&:category).each do |category, pages|
  ... 
```

# php - 如何在 MySQL 中链接两个表

> ID：14450704
> 
> 赞同：1
> 
> 时间：2013-01-22T02:39:53.973
> 
> 标签：php, mysql

我有两个表如下：

**表1-联系人
-id（主键，AUTO_INCREMENT）
-firstname（varchar）
-lastname（varchar）
-email（varchar）** 

**Table-2-comments
-id（主键，AUTO_INCREMENT）
-fullname（varchar）
-email（varchar）
-comment（text）
-date（varchar）**

我想编写 php 和 MySQL 查询来获取和编写将连接到联系人的评论。我想得到如下输出：

**url-contact.php?id=1
name-contact1
comment-contact1 很棒。** 

**url-contact.php?id=2
name-contact2
comment-contact2 没问题。**

我怎样才能做到这一点？首先，我需要编写评论，当从该联系人页面进入时，这些评论将连接到每个联系人。其次，当访问该联系人时，我需要获取该联系人的所有评论。

我很感激你现在的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:43:53.003

您应该设计您的数据库模式，以便这两个表具有自然连接。例如，每条评论都应该有一个contact_id，它是发布它的联系人的id。然后你可以做类似的事情

select * from comment where comment.contact_id = (在此处插入contact_id)

您不能使用联系人姓名，因为如果两个联系人的姓名相同怎么办？（例如，这在 Facebook 上经常发生）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T02:50:24.473

假设您的表中已经有数据，我能想象的最好的做法是根据电子邮件选择它。

为了完成此操作，请执行 SELECT email FROM contacts WHERE id='id'。然后使用返回的结果，然后 SELECT * FROM comments WHERE email='email' 以检索所有相关的评论。

您唯一需要注意的是空电子邮件值，在这种情况下，您很可能需要使用 Patashu 建议的答案重新设计您的方法。

# .class-file - 如何编辑类文件？

> ID：14450706
> 
> 赞同：-2
> 
> 时间：2013-01-22T02:40:10.293
> 
> 标签：.class-file

我正在尝试为 Markus Persson 的游戏 MiniCraft 编辑一个点类文件，以向游戏添加一个保存按钮。但我不知道如何编辑类文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:42:05.877

.class 是一个“编译的”Java 文件。您不编辑该文件，您将需要 Java 源代码。

# php - 尝试根据“chapter.Order”和“page.Order”对 PHP 中的“章节”和“页面”进行排序

> ID：14450709
> 
> 赞同：0
> 
> 时间：2013-01-22T02:40:24.083
> 
> 标签：php, mysql, foreach

章节表

```
CHID | Name | Active | Order
 1     Ch2      Y        2
 2     Ch5      N        10
 3     Ch1      Y        1 
```

页表

```
PID | Name  | Active | CHID | Order
 1    Ch1P1     Y       1       1
 2    Ch1P2     Y       1       2
 3    Ch2P2     Y       3       2
 4    Ch2P1     Y       3       1
 5    Ch5P1     N       2       1 
```

当前结果列出了每一章，但也列出了每一章下的每一页。我将当前脚本的“foreach”部分与一些 Dreamweaver 构建的 PHP 合并。

我在找：

```
Ch1
    Ch1P1
    Ch1P2
Ch2
    Ch2P1
    Ch2P2 
```

我当前的 php/mysql 脚本。

```
 $myarray = array();
    mysql_select_db($database, $connection);
    $query_GetModuleChaptersPages = sprintf("SELECT chapters.CHID, chapters.Chapter_Name AS ChapterName, chapters.MID, chapters.`Order` AS ChapterOrder, pages.PID, pages.Page_Name AS PageName, pages.CHID, pages.Is_Active, pages.`Order` AS PageOrder FROM chapters, pages WHERE chapters.MID = 1"));
    $GetModuleChaptersPages = mysql_query($query_GetModuleChaptersPages, $connection) or die(mysql_error());
    $row_GetModuleChaptersPages = mysql_fetch_assoc($GetModuleChaptersPages);
    $totalRows_GetModuleChaptersPages = mysql_num_rows($GetModuleChaptersPages);

    while ($row = mysql_fetch_array($GetModuleChaptersPages, MYSQL_ASSOC)) { $myarray[$row['ChapterName'] ][]  = $row['PageName']; }

    print "<ul>";
    foreach ($myarray as $key => $val) {
        print "<li><h5>";
        print $key;
        print "</h5><ul>";
        for($i=0;$i<count($val);$i++){
            print "<li>";
            print $val[$i];
            print "</li>";
        }
        print "</ul></li>";
    }
    print "</ul>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:18:09.763

一种蛮力的方式。

```
//get all the chapters we want, add criteria as needed
$chapterQuery = "SELECT * FROM `chapters` ORDER BY `order`";
$chapterResult = mysql_query($chapterQuery);
while ($row = mysql_fetch_assoc($chapterResult)) {
    $chapters[] = $row;
}

//get all the pages we want, add criteria as needed
$pagesQuery = "SELECT * FROM `pages` ORDER BY `order`";
$pagesResult = mysql_query($pagesQuery);
while ($row = mysql_fetch_assoc($pagesResult)) {
    $pages[$row['CHID']][$row['order']] = $row;
}

echo "<ul>";
foreach ($chapters as $chapter) {
    echo "<li><h5>" . $chapter['Name'] . "</h5><ul>";
    foreach ($pages[$chapter['CHID']] as $page) {
        echo "<li>".$page['Name']."</li>";
    }
    echo "</ul></li>";
}
echo "</ul>"; 
```

这里的关键是将页面添加到页面数组中，使用章节 id 作为第一个键，第二个键在我按顺序放置的页面中，但您可以只使用 [] 而不是 [$row['order']]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:34:18.313

如果您不介意在输出之前将它们存储（缓存）在数组中：

```
$data=array();
$result=$mysqli->query("SELECT chapters.chid,chapters.name as cname,pages.pid,pages.name as pname FROM chapters LEFT JOIN pages ON (chapters.chid=pages.chid) WHERE chapters.active='Y' and pages.active='Y' ORDER BY chapters.order ASC,pages.order ASC");
while($row=$result->fetch_assoc())
{
    if(empty($data[$row["chid"]))
        $data[$row["chid"]]=array("name"=>$row["cname"],"pages"=>array());
    $data[$row["chid"]]["pages"][$row["pid"]=$row["pname"];
}
echo "<ul>";
foreach($data as $chid=>$chapter)
{
    echo "<li><h5>".htmlentities($chapter["name"],ENT_COMPAT,"UTF-8")."</h5><ul>";
    foreach($chapter["pages"] as $page)
    {
        echo "<li>".htmlentities($page,ENT_COMPAT,"UTF-8")."</li>";
    }
    echo "</ul></li>";
}
echo "</ul>"; 
```

如果要*在*获取它们时输出它们：

```
$ch=$mysqli->query("SELECT chid,name FROM chapters WHERE active='Y' ORDER BY `order` ASC");
$pg=$mysqli->prepare("SELECT pid,name FROM pages WHERE active='Y' AND chid=? ORDER BY `order` ASC");
$pg->bind_param("i",$chid);
echo "<ul>";
while($row=$ch->fetch_assoc())
{
    echo "<li><h5>".htmlentities($row["name"],ENT_COMPAT,"UTF-8")."</h5><ul>";
    $chid=intval($row["chid"]);
    $pg->execute();
    $pgrst=$pg->get_result();
    while($pages=$pgrst->fetch_assoc())
    {
        echo "<li>".htmlentites($pages["name"],ENT_COMPAT,"UTF-8")."</li>";
    }
    echo "</ul></li>";
}
echo "</ul>"; 
```

请注意，这未经测试，因此不要期望它“开箱即用”；但它应该指向一个工作轨道。

# ruby-on-rails - Rails 3 ':reject_if => lambda' 阻止验证？

> ID：14450711
> 
> 赞同：0
> 
> 时间：2013-01-22T02:40:29.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

遵循[此 RailsCast](http://railscasts.com/episodes/196-nested-model-form-part-1)嵌套模型表单：

```
class Survey < ActiveRecord::Base
  has_many :questions, :dependent => :destroy
  accepts_nested_attributes_for :questions, :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true
end 
```

和

```
class Question < ActiveRecord::Base
  belongs_to :survey
  has_many :answers, :dependent => :destroy
  accepts_nested_attributes_for :answers, :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true
  validates_presence_of :content
end 
```

和

```
class Answer < ActiveRecord::Base
  belongs_to :question
  validates_presence_of :content
end 
```

这些用于创建包含所有 3 个模型的嵌套表单。

问题是：我可以创建一个新调查，给调查命名，将问题内容留空，添加答案并单击提交。

调查已创建。由于 lambda，空白问题字段以及非空白答案字段被丢弃。

当存在答案但不是问题时，我可以做些什么来使验证捕获，从而允许用户删除答案或提供问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:41:43.817

一种方法是`:reject_if`在指定嵌套属性时删除 。

或者如果你需要更多的灵活性，你可以更新 lambda 来做更多的事情，例如：如果问题和答案都是空的，则拒绝。

也看看github中[修改过的源码，很有帮助](https://github.com/railscasts/196-nested-model-form-part-1/tree/master/revised)

# android - 如何从 Project.properties 或 local.properties 中读取属性？

> ID：14450714
> 
> 赞同：1
> 
> 时间：2013-01-22T02:41:12.713
> 
> 标签：android, properties

很抱歉问这样一个基本问题，但我没有找到这些信息。我想从 Android 项目属性文件（project.properties 或 local.properties）中读取设置，但我没有运气。System.getProperty 好像没什么用，总是返回null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:58:25.900

1 在您的 android 项目的 assets 文件夹中创建一个名为 subtype.properties 的文件

2 编辑键值文件 -

```
 key=value
 url=www.xyz.com
 ..... 
```

现在在您的活动中调用它 -

```
 Properties prop = new Properties(); 
 try {
    prop = loadPropties();
 } catch (IOException e) {
    Log.e(TAG, "Exception", e);
 }

 Log.d(TAG,"The value in prop file is " + prop.getProperty("key"));

//Write this function in your activity -

private Properties loadPropties() throws IOException {
    String[] fileList = { "subtype.properties" };
    Properties prop = new Properties();
    for (int i = fileList.length - 1; i >= 0; i--) {
    String file = fileList[i];
    try {
      InputStream fileStream = getAssets().open(file);
      prop.load(fileStream);
      fileStream.close();
      }  catch (FileNotFoundException e) {
        Log.e(TAG , "Got exception " + e);
     }
  }
  return prop;
 } 
```

# android - 使用 haxe nme 拖放

> ID：14450715
> 
> 赞同：0
> 
> 时间：2013-01-22T02:41:23.427
> 
> 标签：android, ios, drag-and-drop, touch, haxe

我正在尝试在针对触摸设备的 haxe NME 中进行简单的拖放，但我做不到。

我尝试了 startDrag()，mouseDown、mouseUp 和 mouseMove 的组合，TouchEvent.TOUCH_BEGIN、TouchEvent.TOUCH_END、TouchEvent.TOUCH_MOVE 和 startDragTouch() 等的组合。但在前 3 种情况下，应用程序在 Androin 中崩溃，在最后一个中，我得到：

```
 nme.display.Sprite has no field startTouchDrag 
```

在编译的那一刻。

任何人都知道在 haxe NME 中为触摸设备提供拖放支持的方法吗？任何提示如何实现这一点？

非常感谢

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:01:34.013

好的，最后，使用 MouseEvent.MOUSE_DOWN、MouseEvent.MOUSE_UP 和 MouseEvent.MOUSE_MOVE 的自定义实现工作，但我需要使用来自传递元素的协调来获取 StageX 和 StageY，而不是直接从“舞台”获取它们. 这样，就不会崩溃。

问候。

# json - 使用 net.sf.json-lib，如何添加“[0]”作为 JSONObject 字符串元素？

> ID：14450717
> 
> 赞同：0
> 
> 时间：2013-01-22T02:41:45.193
> 
> 标签：json, json.net

我正在使用 net.sf.json-lib，当我尝试添加值为“[0]”的字符串元素时，它会自动变成一个数组！如何将“[0]”保留为字符串，而不是数组？

```
JOSNObject json = new JSONObject();
// I want the value alway be string
// even if the value is "[0]"
json.element("name", "[0]");
// here it will become an array!!! 
```

我应该怎么做才能停止这种自动转换？

谢谢

# java - 如何在 EMF 生态模型中创建 LinkedHashMap？

> ID：14450720
> 
> 赞同：0
> 
> 时间：2013-01-22T02:41:53.973
> 
> 标签：java, eclipse-plugin, eclipse-rcp, eclipse-emf, eclipse-emf-ecore

我正在寻找根据插入顺序保持我的条目在地图中的顺序。所以基本上我正在寻找在我的ecore模型中创建一个LinkedHashMap。

我需要保留这张地图，因此我想使用 EMap 的序列化和代理解析功能。我试图将 LinkedHashMap 转换为 EcoreEmap ， `((EMap.InternalMapView)myLinkedHashMap).eMap();`但这没有用。

我可以考虑将列表和地图放在一起，并保持列表中的顺序，但我真的很想避免重复引用，因为这两者可能会不同步。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:45:42.727

如果我们使用 EMF EMap 类，插入顺序将被保留，我们不需要 LinkeHashMap。更多细节在这里讨论：

[http://www.eclipse.org/forums/index.php/mv/tree/451092/1003801/](http://www.eclipse.org/forums/index.php/mv/tree/451092/1003801/)

# debian - VirtualBox 中 Debian 上的主要/默认用户不是 sudo 用户

> ID：14450724
> 
> 赞同：1
> 
> 时间：2013-01-22T02:42:36.657
> 
> 标签：debian, virtualbox, sudo

希望标题不会太混乱，但我正在使用 Debian 运行 VirtualBox。我刚刚创建了它，默认/主要用户由于某种奇怪的原因没有任何 sudo 权限。我一直在网上寻求帮助，但无济于事，因为大多数建议都包括使用 Live CD。不确定我是否能够应用该方法。对 Ubuntu 发行版的其他建议包括恢复模式，但我不记得在启动时看到它

有没有办法将我的主要用户添加到 sudoers 文件中？

我在 Debian 或任何其他 Linux 发行版方面都没有太多经验，所以“简化”的解释会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:48:13.820

默认情况下，Debian 没有 sudo。相反，您必须`su`使用 root 用户并以这种方式运行命令。

安装须藤

## 以 root 身份 Su up

`$ su`

## 安装须藤

`$ apt-get install sudo`

## 编辑 sudoers 文件

`$ visudo`

在*用户权限规范*标题下添加 `MyUSER ALL=(ALL:ALL) ALL`，将 MyUSER 替换为您想要的用户名。

# c++ - c++构造函数的麻烦

> ID：14450725
> 
> 赞同：-1
> 
> 时间：2013-01-22T02:42:38.457
> 
> 标签：c++, constructor, linker

在使用其他语言几年后，我最近开始使用 c++，并且在获取代码以使用构造函数编译时遇到了麻烦。我知道问题出在构造函数上，因为如果我将其注释掉，一切正常。我直接从一本 c++ 书中复制了一些代码，但仍然出现错误。我正在使用 g++ 在命令行中编译。编译器错误：

```
Undefined symbols for architecture x86_64:
  "GradeBook::GradeBook(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)", referenced from:
      _main in ccoPO1iA.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

任何帮助将不胜感激

GradeBookTest.cpp

```
#include <iostream>
#include "GradeBook.h"

using namespace std;

int main()
{
GradeBook book1("newClass");
} 
```

成绩簿.h

```
#include <string>

using namespace std;

class GradeBook
{
public:
GradeBook(string);
void setCourseName(string);
string getCourseName();
void displayMessage();

private:
string courseName;
}; 
```

成绩册.cpp

```
#include <iostream>
#include "GradeBook.h"

using namespace std;

GradeBook::GradeBook(string name)
{
setCourseName(name);
}

void GradeBook::setCourseName( string name )
{
courseName = name;
}

string GradeBook::getCourseName()
{
return courseName;
}

void GradeBook::displayMessage()
{
cout << "this is the gradebook for\n" << getCourseName() << endl;
} 
```

当我将代码复制到浏览器中时，缩进以某种方式搞砸了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:46:14.050

您还需要`GradeBook.cpp`与`gradeBookTest.cpp`. 发生这种情况是因为编译器可以在`.h`链接时看到构造函数，但看不到该构造函数的函数定义。

```
g++ -o test GradeBookTest.cpp GradeBook.cpp 
```

# java - 如何在 gwttestcase 中使用 junit 测试 gwt requestbuilder？

> ID：14450726
> 
> 赞同：3
> 
> 时间：2013-01-22T02:42:38.937
> 
> 标签：java, gwt, junit, xmlhttprequest

我的 GWT 应用程序包含必须从客户端的 xml 文件中读取的数据。为此，我正在使用 RequestBuilder。

```
RequestBuilder builder = new RequestBuilder(RequestBuilder.GET,GWT.getHostPageBaseURL()+"myFile.xml"); 
```

尝试{ builder.sendRequest(null, new RequestCallback() { @Override public void onResponseReceived(Request request,Response response) {

```
 // read out data and put into to a list

   } 
```

}); …………

数据将被读出并将其放入列表中，然后从该列表中将数据放入视图中。如何测试这个？当我在 GWTTestCase 类中使用 onResponseReceived 中的一些 assertEquals 方法尝试此操作时，我收到以下错误消息：

> [警告] 404 - GET /com.test.app.appName.JUnit/myFile.xml (192.168.2.102) 1466 字节请求标头主机：192.168.2.102:51731 用户代理：Mozilla/5.0（Windows；U；Windows NT 5.1; en-US; rv:1.9.0.19) Gecko/2010031422 Firefox/3.0.19 Accept-Language: en-us Accept: */* Connection: Keep-Alive Referer: ht t_p://192.168.2.102:51731/com。 test.app.appName.JUnit/junit-standards.html?gwt.codesvr=192.168.2.102:51727 内容类型：文本/纯文本；charset=utf-8 响应头 Content-Type: text/html; charset=iso-8859-1 内容长度：1466

我做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:30:18.450

您应该跟进其源代码中提供的 RequestBuilder 的 GWT 测试代码。您可以搜索为[RequestBuilder](http://code.google.com/p/google-web-toolkit/source/search?q=RequestBuilderTest&origq=RequestBuilderTest&btnG=Search+Trunk)测试用例。

同样在您的情况下，您最好只使用模拟来避免减慢测试用例的速度。

# ios - 我可以让按钮在 iOS 中进行 NSDate 比较吗？

> ID：14450727
> 
> 赞同：0
> 
> 时间：2013-01-22T02:42:41.567
> 
> 标签：ios, xcode, nsdate

是否可以通过按钮执行操作 a) 在点击时执行 NSDate 存储，然后 b) 让该方法与 if 语句进行日期比较？

那么，例如，如果存储的 NSDate 小于 12 小时前，用户就不能再次按下按钮？

从我的研究中没有遇到过这方面的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:49:59.060

当然。您可以通过代码获取当前日期

```
[NSDate date] 
```

然后将他保存到[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

并在按下按钮时使用保存的日期检查当前日期。

如何

```
 if ( [[NSDate date] timeIntervalSinceDate: savedDate] >= 12*60*60) // 12 hours
{    
// do your steps
} 
```

# c - 释放二维字符数组

> ID：14450728
> 
> 赞同：-1
> 
> 时间：2013-01-22T02:42:58.477
> 
> 标签：c, malloc

使用此函数分配二维数组后：

```
char** make_matrix(int M, int N)
{
    char** MAT = (char**)malloc(M * sizeof(char));
    for (int i = 0; i < M; i++)
    {
        MAT[i] = (char*)malloc(N * sizeof(char));
    }
    return MAT;
} 
```

我发现试图`free(M[0])`导致断言失败。我能找到的所有与释放二维数组相关的内容都使用`int`而不是`char`. 然而，`char`用`int`上面的替换每个，断言失败就消失了。为什么会这样，然后我怎样才能释放整个二维数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T02:44:42.717

您为 分配的内存太少`MAT`。将相关行更改为：

```
char** MAT = (char**)malloc(M * sizeof(char*)); 
```

这是因为 MAT 是指针数组，而不是字符数组。由于您的代码没有分配足够的内存，它很可能是在数组边界之外写入并破坏了内存。

它可以与整数一起使用，因为它们更大，所以运气好的话，你可能已经分配了足够的内存（至少在 32 位机器上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T02:45:34.973

第一个 malloc 调用是 M * sizeof(char) 而不是 sizeof(char *)。sizeof(char) 为 1 个字节，char* 的大小可能为 4 个字节。

编辑：我看到有人打了我一拳。接受对方的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T02:46:38.547

您应该遍历矩阵的所有行并首先释放它们，然后是 MAT

像这样的东西：

```
void free_matrix(int M)
{
    for (in i = 0; i < M; i++)
    {
        free(MAT[i]);
    }
    free(MAT);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T02:49:43.273

要释放空间（假设它已正确分配），您需要一个`free()`对应于每个调用的调用`malloc()`。

```
void destroy_matrix(char **MAT, int M)
{
    for (int i = 0; i < M; i++)
        free(MAT[i]);
    free(MAT);
} 
```

当您在（32 位）系统上替换`char`为`int`because时，您的代码可以工作。`sizeof(int) == sizeof(int *)`这在很大程度上是巧合。在 64 位系统上你又会遇到麻烦。

# javascript - 素数在每+30 7之后总是有相同的模式吗

> ID：14450730
> 
> 赞同：1
> 
> 时间：2013-01-22T02:43:26.797
> 
> 标签：javascript, primes

[我从http://www.javascripter.net/faq/numberisprime.htm](http://www.javascripter.net/faq/numberisprime.htm)看到下面的代码

```
leastFactor = function(n){
 if (isNaN(n) || !isFinite(n)) return NaN;  
 if (n==0) return 0;  
 if (n%1 || n*n<2) return 1;
 if (n%2==0) return 2;  
 if (n%3==0) return 3;  
 if (n%5==0) return 5;  
 var m = Math.sqrt(n);
 for (var i=7;i<=m;i+=30) {
  if (n%i==0)      return i;
  if (n%(i+4)==0)  return i+4;
  if (n%(i+6)==0)  return i+6;
  if (n%(i+10)==0) return i+10;
  if (n%(i+12)==0) return i+12;
  if (n%(i+16)==0) return i+16;
  if (n%(i+22)==0) return i+22;
  if (n%(i+24)==0) return i+24;
 }
 return n;
} 
```

这是否意味着质数在数字 7 之后每 30 次总是具有相同的模式？

这是否意味着从 7 开始，当你加 30 时，那个数字的结果是素数，那个数字 +4 是素数，那个数字 +6 总是素数，依此类推，直到 +24，之间就不会再有素数了他们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:58:38.213

不，但是此代码有效，因为它只是检查所有值（有点）。你知道，如果一个数字是偶数，它是 2 的倍数，而不是质数。同样，如果它最右边的数字是 5，你就知道它可以被 5 整除而不是素数。使用许多这样的规则，我们可以消除检查满足这些参数之一的许多不同值。

因此，脚本检查 2，发现 2 不是输入的倍数，并且知道它永远不需要再次检查偶数，依此类推。

for 循环不仅仅生成素数。它可以生成 187，这不是素数，但在实践中，它永远不会，因为一旦函数检查 11，它就会返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T03:01:56.360

它基本上只是避免重新检查不可能的除数，因为它们是已经检查过的 2,3 或 5 的倍数。这是仍然可能除数的重复模式，因为 2,3 和 5 的乘积是 30。

根本没有发现质数遵循非常可预测的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T02:48:39.930

该代码所做的是高度优化的——它本质上与“3 是否均匀划分为 n？4是否均分n？5 是否均分为 n？但它使用重要的知识，例如“在 2 之后，没有偶数是素数”来跳过检查所有偶数因子（注意它会做 7 + 偶数、37 + 偶数、67 + 偶数等等 - 所以从来没有偶数）。同样，它会跳过每六个因数，因为它是 3 的倍数。

# javascript - 为什么 JavaScript 原型属性未在新对象上定义？

> ID：14450731
> 
> 赞同：67
> 
> 时间：2013-01-22T02:43:32.383
> 
> 标签：javascript, prototype

我对 JavaScript 原型概念的概念相当陌生。

考虑以下代码：

```
var x = function func(){
}

x.prototype.log = function() {
  console.log("1");
}

var b = new x(); 
```

据我了解，`b.log()`应该返回 1 因为`x`是它的原型。但是为什么属性`b.prototype`未定义？

不`b.prototype`应该返回对`x`函数的引用吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-22T02:47:22.290

只有构造函数有原型。既然`x`是构造函数，`x`就有原型。

`b`不是构造函数。因此，它没有原型。

如果您想获得对构造函数的引用`b`（在本例中为`x`），您可以使用

```
b.constructor 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-22T02:49:12.833

`.prototype`当函数作为构造函数被调用时，函数的属性只是为了在新对象上设置继承。

创建新对象时，它会将其内部*`[[Prototype]]`*属性设置为函数`.prototype`属性指向的对象。

对象本身没有`.prototype`属性。它与对象的关系完全是内部的。

这就是它起作用的原因`b.log()`。当 JS 引擎看到`b`对象本身没有`log`属性时，它会尝试在 objects 内部*`[[Prototype]]`*对象上查找它，并成功找到它。

需要明确的是，该*`[[Prototype]]`*属性不可直接访问。它是一个内部属性，只能通过 JS 引擎提供的其他构造间接可变。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-02-08T23:57:00.913

JavaScript 中的所有普通对象都有一个内部原型槽（注意：这里的原型不是指原型属性）。ECMAScript 标准 ( [http://www.ecma-international.org/ecma-262/6.0/index.html](http://www.ecma-international.org/ecma-262/6.0/index.html) ) 指定此插槽称为 [[Prototype]]。您可以通过 __proto__ 属性访问此插槽。

__proto__ 可能无法跨浏览器可靠地使用。__proto__ 成为 ECMAScript 6 中的官方属性

然而，原型属性是构造函数上的一个属性，它设置构造对象上的 __proto__ 属性。

您可以访问某些类型的原型属性，例如核心 JavaScript 类型（日期、数组等）。还有一个 JavaScript 函数（可以看作是一个构造函数）有一个公共的原型属性。但是，函数的实例没有原型属性。

在你的情况下`var b = new x();`，b 是函数 x 的一个实例。因此 b.prototype 是未定义的。但是，b 确实有一个内部 [[Prototype]] 插槽。如果您`b.__proto__`在 Google Chrome 中输出，例如版本 63.0.3239.132，或在 Firefox 中输出，例如版本 43.0.4

```
console.log(b.__proto__); 
```

您将看到它的 [[Prototype]] 插槽，如下所示：

```
{log: ƒ, constructor: ƒ} 
```

而已。

* * *

仅供参考，整个代码片段如下：

```
var x = function() {
};
x.prototype.log = function() {
  console.log("1");
}

var b = new x();
b.log();  // 1

console.log(b.prototype); // undefined
console.log(b.__proto__); // {log: ƒ, constructor: ƒ}
console.log(x.prototype); // {log: ƒ, constructor: ƒ} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-09-15T15:21:41.297

在浏览您的代码之前，我想确保了解您的代码行为所需的原型概念。

1.  `[[prototype]]`是 JavaScript 对象的隐藏属性。这个隐藏属性只不过是一个链接`Object.prototype`（如果由对象字面量创建）。没有标准方法可以访问此`[[prototype]]`属性。
2.  JavaScript中的函数是对象，所以它们也有`[[prototype]]`属性。在这里，如果是函数，这个隐藏的属性是一个链接`Function.prototype`。也没有标准的方法来访问这个`[[prototype]]`属性。
3.  除了这个隐藏链接之外`[[prototype]]`，每当创建一个函数对象时，都会在其中创建一个`prototype`属性，该属性与隐藏属性是分开的`[[prototype]]`。

现在来到你的代码：

> var x = 函数 func(){}

执行此行时，将`x`创建一个带有两个链接的函数对象：

*   Function.prototype（不可访问），
*   x.prototype（可访问）。

> x.prototype.log = function() { console.log("1"); }

正如我们现在知道的那样，它`x`是一个函数对象，因此`x.prototype`可以访问，因此您可以在此处包含 log 方法。

> var b = 新 x();

`b`是一个对象，但不是函数对象。它有那个隐藏的链接`[[prototype]]`，但它是不可访问的。因此，当您尝试访问时，`b.prototype`它会给出`undefined`结果。如果您想检查原型，`b`则可以看到`(x.prototype).isPrototypeOf(b);`它将返回`true`。所以你可以说隐藏链接被引用`x.prototype`。

以下是有关原型的一些事实：

1.  如果对象`O`是用`O = new func(){}`然后 O[[prototype]] 创建的`Function.prototype`。
2.  如果对象`O`是用`O = {}`然后 O[[prototype]] 创建的`Object.prototype`。
3.  如果对象`O`是用`O = Object.create(obj)`然后 O[[prototype]] 创建的`obj`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T02:46:33.380

因为`prototype`是函数（实际上是构造函数）的属性，因为它定义了此类对象（从该原型所属的构造函数创建的对象）的属性/方法。看看[这个链接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype)

# restful-architecture - 用于授权、计划功能控制的 RESTful API

> ID：14450732
> 
> 赞同：1
> 
> 时间：2013-01-22T02:43:33.117
> 
> 标签：restful-architecture

我正在开发一个网络应用程序。前端仅通过 RESTful API（称为 SOA 架构）与后端交互，后端仅以 JSON 格式向前端发送数据。

我的问题是：1）通过RESTful API设计授权是最佳实践吗？或者最好在后端代码中检查授权（用户->角色->特权）？例如：在执行其他 API 之前，我们是否每次都询问用户 /checkPrivilege/{...} ？

2) 通常如何在 RESTful API 中实现 3 个具有不同功能和 UI 的计划？例如：我们是否使用 api 来限制此计划的 5 个用户？还是我们在后端代码中做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T06:48:38.403

这是一个老问题，但无论如何我都会回答这个问题，以防万一有人查到。

简短的回答是您通过后端进行操作。您请求的 URI 不应包含有关用户的任何信息。任何会话/标识数据都应在 HTTP 标头中发送。

您的 RESTful API 总是会通过 index.php 之类的前端控制器加载。在这里，您需要引导一个授权工具，以在执行其余代码之前检查每个页面的凭据请求。

这些凭据至少应包含发出请求的用户的唯一授权令牌，并且该令牌需要在每个请求中发送（同样，我建议通过 HTTP 标头）。如果您授予将过期的临时访问令牌，则会获得奖励积分，以防止以后未经授权的访问。

但为简单起见，假设您只是为每个用户使用一个永久唯一令牌。然后，您将将此令牌与有关用户的所有其他数据一起存储，其他数据应包括该用户所属帐户的 account_id。

因此，对于每个请求，您将：

1.  从 HTTP 标头中获取用户令牌
2.  根据该令牌查找用户。
3.  如果找到用户，则使用他们的 account_id 查找与他们的个人帐户关联的主帐户
4.  如果匹配，则授予他们访问权限

但请记住，您的 URL 无论如何都不应包含此信息。RESTful URL 是无状态的。

# asp.net - 通过 button.click 处理程序使用时变量失去作用域

> ID：14450733
> 
> 赞同：0
> 
> 时间：2013-01-22T02:43:38.960
> 
> 标签：asp.net, vb.net, scope

当我调用我的函数时`Me.Load`一切正常，但是当我仅在按钮单击事件上触发我的函数时，里面的所有变量都会丢失它们的设定值。我刚开始使用 VB.NET，所以我不完全了解这里的范围性质。

**这是我的代码：**

```
Public Class WorkflowForward
    Inherits FileBound.Web.FBBasePage

    ' Private decalrations
    Private cfile_id As String = ""                             ' Current files ID
    Private FBProject As Project = Nothing                      ' FileBound Project object
    Private cmd As String = ""                                  ' SQL query string
    Private FBFile As FileBound.File = Nothing                  ' Filebound file holder
    Private FBRoutes As RouteCollection = Nothing               ' FileBound route collection holder

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        ' Set SqlDataSource connection string
        FBSqlDataSource.ConnectionString = ConfigurationManager.ConnectionStrings("FB_0371tcc").ConnectionString

        If Not Me.IsPostBack Then
            ' Set values to variables
            Page_setup() ' Here I set values to variabels
            setRoute_debug("Admin1 Test")

        End If

    End Sub

    Protected Sub sendEmail_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles sendEmail.Click
        ' CAN I HAZ SOME TEST????
        'setRoute_debug(emailTo.SelectedValue.ToString)

        Response.Write("<script>" & Me.FBRoutes.TotalCount.ToString & "</script>")

    End Sub

    Private Sub setRoute_debug(ByVal route_to As String)

        ' IF WE HAZ SOME ITEMS FINISH THEM MUHUHAHHAHAHA
        If FBBusiness.LoggedInUser.RoutedItems.TotalCount > 0 Then
            For Each item As RoutedItem In FBBusiness.LoggedInUser.RoutedItems
                item.Complete("Completed!")
            Next
        End If

        ' DEBUG MODE #YOLO
        ' I'VE DONE IT I CAN HAZ ROUTEZ
        For Each r As Route In Me.FBRoutes
            If r.Name = route_to Then
                For Each doc As FileBound.Document In FBFile.Documents
                    doc.Route(r.ID)
                Next

            End If
        Next

    End Sub

    Private Sub Page_setup()
    ' Some code that sets values
    End Sub
End Class 
```

当我单击按钮时，它会引发此错误：

```
Object reference not set to an instance of an object. 
Line 46:         Response.Write("<script>" & Me.FBRoutes.TotalCount.ToString & "</script>") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:54:12.280

单击 asp.net 页面的按钮将作为`PostBack`.

您正在设置页面仅在

```
If Not Me.IsPostBack 
```

这对于 asp.net 控件来说很好，因为它们使用`ViewState`.

当点击一个按钮时，服务器会收到一个新的请求，并创建一个新的 Page 对象。您的变量没有为此对象设置。

在每个 PostBack 上设置您的页面级别变量，如下所示

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    ' Set SqlDataSource connection string
    FBSqlDataSource.ConnectionString = ConfigurationManager.ConnectionStrings("FB_0371tcc").ConnectionString

    Page_setup() ' Here I set values to variables

    If Not Me.IsPostBack Then
        'Set Page level control values like TextBox values
    End If
End Sub 
```

# mysql - SQL：连接系列

> ID：14450745
> 
> 赞同：0
> 
> 时间：2013-01-22T02:45:10.260
> 
> 标签：mysql, sql, join

我试图找出页面所有者（管理员）提出的问题中有多少评论。

tblQuestion：（问题表）

```
queID
queUserID
queCompanyID (the owner of the page where questions are asked) 
```

tblReplies：（保存问题中的评论）

```
repQuestionID (queID = parent ID)
repUserID (the user ID who made the comment) 
```

tblUsers：（存储用户的位置）

```
uID (user ID, autoincrement)
uCompanyID (if this id is the same as a company id, the user is admin of that page) 
```

所以，我想知道公司所有者（使用 uCompanyID 回复帖子的父公司 ID - queCompanyID 的用户）发布了多少回复帖子。

我尝试这样做以获取页面管理员发布的帖子数量，但似乎不起作用：

```
SELECT COUNT(*) tblReplies.repID
FROM tblReplies
JOIN 
    tblQuestions ON tblQuestions.queID = tblReplies.repQuestionID
JOIN 
    tblUsers ON tblQuestions.queCompanyID = tblUsers.uCompanyID
WHERE tblQuestions.queID = 68 AND tblUsers.uCompanyID = 1 
```

我真的希望那里有一个忍者可以帮助我，我已经花了几个小时但仍然一无所获。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:51:30.947

这应该可以工作（假设桌子`userID`上有一个。：`tblUsers`

```
SELECT 
    count(*), 
    tblReplies.repID
FROM 
    tblReplies, 
    tblQuestions, 
    tblUsers
WHERE
    tblQuestions.queID = tblReplies.repQuestionID AND
    tblQuestions.queCompanyID = tblUsers.uCompanyID AND
    tblUser.uID = tblReplies.repUserID AND
    tblUsers.uCompanyID = 1 AND 
    tblQuestions.queID = 68 

GROUP BY tblReplies.repID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:11:52.680

这应该有效。

```
SELECT  count(*) as num_of_comments
FROM tblQuestion a
INNER JOIN tblReplies  b
    on a.queID = b.repQuestionID
INNER JOIN tblUsers c
    on b.queCompanyID = c.uCompanyID 
where a.queID = 68
    and c.uCompanyID = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:42:22.120

```
SELECT COUNT(*) AS total 
FROM tblReplies 
WHERE repQuestionID =68 AND repUserID =1 
```

# c++ - 为什么 SFML 不能在我的计算机上运行？

> ID：14450749
> 
> 赞同：0
> 
> 时间：2013-01-22T02:45:57.773
> 
> 标签：c++, windows, sfml

好的，我的程序可以在我的笔记本电脑、旧台式机和学校的电脑上运行。但是我遇到了一个问题，它无法在我的新计算机上运行。程序可以编译，但是当我运行它时什么也没有发生……只弹出一个终端窗口。它甚至不运行 main() 循环（或者，更确切地说，它不打印我在主循环开始时告诉它的内容）。我在笔记本电脑上运行它，效果很好。我的电脑是否可能与 SFML 不兼容？否则我的电脑似乎运行良好......
有谁知道可能出了什么问题？

代码：

```
int main()
{
    cout<<"Meow"<<endl;
    GameLoad();
    cout<<"Loaded"<<endl;
    while (Window.IsOpen())
    {
        Animate();
        Window.Clear();
        Display();
        Window.Display();
    }
} 
```

# azure - 将我的 Breeze 应用程序部署到 Azure 网站，元数据查询失败

> ID：14450752
> 
> 赞同：2
> 
> 时间：2013-01-22T02:46:23.013
> 
> 标签：azure, breeze

刚从 Breeze 和 Azure 开始。我下载了示例应用程序并添加了我自己的控制器。在我的本地机器上它工作得很好。当我部署到我的 Azure 站点时，我在页面的日志记录部分中不断收到以下错误：*查询失败：元数据查询失败：api/CoreData/Metadata; 发生了错误。*

我有一个名为 Products 的控制器，它只返回一个视图。该视图包含对我的 CoreData ApiController 的 js 调用。跟随样本。

服务器上唯一记录的内容如下： ![500](../Images/5dc8a6cfc8268e35c65acde878f74f51.png)

起初我使用 EF 来访问数据，但已更改为仅创建一个内存对象并返回它以消除数据库问题。

URL 是[http://acapella.azurewebsites.net/products](http://acapella.azurewebsites.net/products)。我花了很多时间尝试诊断和研究，但觉得我忽略了一些简单的事情。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:56:23.763

Azure 网站是部署 Breeze 应用程序的一种免费且相对简单的方法，您可以在其中在各种移动设备上对其进行测试并体验应用程序的响应能力（或缺乏响应能力）。

我在将 Breeze 应用程序推送到 Azure 网站上取得了很大的成功，但有很多失误，包括一些看起来像你的失误。

两个想法。首先，您需要在 Web.config 中关闭“自定义错误”。

```
<配置>
    <system.web>
        <customErrors mode="关闭"/>
    </system.web>
</配置>

```

我的第二个建议：查看[John Papa 关于将 MVC Web API 应用程序部署到 Azure 网站的帖子](http://www.johnpapa.net/publishing-a-web-app-to-windows-azure/)。它非常好。我知道它有效。

我希望很快有一个关于这个过程的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T16:16:27.640

您可以做的第一件事是返回异常。在您的 Breeze 控制器中执行以下操作：

```
[HttpGet]
public string Metadata()
{
    try
    {
        return _contextProvider.Metadata();
    }
    catch (Exception e)
    {
        return e.Message + Environment.NewLine + Environment.NewLine + e.StackTrace;
    }
} 
```

这让我很清楚我的连接字符串有问题。我得到的例外是：

```
Format of the initialization string does not conform to specification starting at index 0. 
```

我的本地连接字符串似乎没问题，但问题出在 Azure 上。我的 web.release.config 有一个正确的转换，但是在发布时，Visual Studio 会添加另一个连接字符串。您可以通过 FTP 连接到您的 Azure 站点并查看您的 web.config 来检查这一点。我通过在发布时选择正确的连接字符串来修复它：

![发布到 Azure](../Images/50e3ed397438377075798e5d64e90638.png)

在那之后，我上传的 web.config 中似乎还有两个连接字符串，但至少它可以工作。

# twitter - 如何使用 Twitter Stream API 跟踪 400 多个关键字？

> ID：14450753
> 
> 赞同：1
> 
> 时间：2013-01-22T02:46:27.620
> 
> 标签：twitter, twitter-streaming-api

问题只是标题。

请不要告诉我去找像 Gnip 或 Datasift 这样的 Twitter 数据经销商，因为它们太贵了。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T07:30:59.370

运行多个推特流，没有其他方法可以解决此问题。要运行多个流媒体，基本上您需要一个专用的 Twitter 用户、IP 地址和每个流媒体的注册应用程序。

# ruby-on-rails - Ruby/Rails 使用正则表达式从一个标签扫描/匹配到另一个文本外

> ID：14450755
> 
> 赞同：1
> 
> 时间：2013-01-22T02:46:28.450
> 
> 标签：ruby-on-rails, ruby, regex

在以下内容示例中，我将行换行以使其在 Stackoverflow 上更易于阅读（因此您不必向右滚动即可查看示例）。

内容一：

```
"Lorem Ipsum\r\n
[img]http://example.org/first.jpg[/img]\r\n
[img]http://example.org/second.jpg[/img]\r\n
more lorem ipsum ..." 
```

内容 B：

```
"Lorem Ipsum\r\n
[img caption="Sample caption"]http://example.org/third.jpg[/img]
[img]http://example.org/fourth.jpg[/img]" 
```

内容 C：

```
"Lorem Ipsum [img]http://example.org/fifth.jpg[/img]\r\n
more lorem ipsum\r\n\r\n
[img caption="Some other caption"]http://example.org[/img]" 
```

我试过的：

```
content.match(/\[img\]([^<>]*)\[\/img\]/imu)
return example: "[img]...[/img]\r\n[img]...[/img]
content.scan(/\[img\]([^<>]*)\[\/img\]/imu)
return example: "...[/img]\r\n[img]..." 
```

在上述 3 个内容示例上运行扫描/匹配/正则表达式解决方案时，我想要完成的是获取每次出现的`[img]...[/img]`并将`[img caption="?"]...[/img]`其放入数组中以供以后使用。

```
Array
  1 : A : [img]http://example.org/first.jpg[/img]
  2 : A : [img]http://example.org/second.jpg[/img]
  3 : B : [img caption="Sample caption"]http://example.org/third.jpg[/img]
  4 : B : [img]http://example.org/fourth.jpg[/img]
  5 : C : [img]http://example.org/fifth.jpg[/img]
  6 : C : [img caption="Some other caption"]http://example.org[/img] 
```

将“剥离的内容”限制在只有打开和关闭标记的地方也很有帮助，这意味着当有`[img]`/`[img caption="?"]`和之后丢失`[/img]`时，忽略它。

我已经阅读了[http://www.ruby-doc.org/core-1.9.3/String.html](http://www.ruby-doc.org/core-1.9.3/String.html)上下但找不到任何似乎对此有用的东西。

更新：

所以我认为这是：

```
\[img([^<>]*)\]([^<>]*)\[\/img\] 
```

会发现：

```
[img]something[/img] 
```

和：

```
[img caption="something"]something[/img] 
```

现在我只需要知道如何捕捉不同内容中的每一次出现。我总是可以从第一个到最后一个 [img][/img] 标签中获取它，所以当中间有其他 Lorem Ipsum 时，它也会被抓取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:49:49.343

您可以使用[`/\[img(?:\s+caption=".+")?\].+?\[\/img\]/`](http://rubular.com/r/aQKZviwOzG)扫描文档：

```
regex = /\[img(?:\s+caption=".+")?\].+?\[\/img\]/

text = <<EOT
Lorem Ipsum
[img]http://example.org/first.jpg[/img]
[img]http://example.org/second.jpg[/img]
more lorem ipsum ...

Content B:

Lorem Ipsum
[img caption="Sample caption"]http://example.org/third.jpg[/img]
[img]http://example.org/fourth.jpg[/img]

Content C:

Lorem Ipsum [img]http://example.org/fifth.jpg[/img]
more lorem ipsum

[img caption="Some other caption"]http://example.org[/img]
EOT

array = text.scan(regex)
puts array 
```

生成：

```
[img]http://example.org/first.jpg[/img]
[img]http://example.org/second.jpg[/img]
[img caption="示例标题"]http://example.org/third.jpg[/img]
[img]http://example.org/fourth.jpg[/img]
[img]http://example.org/fifth.jpg[/img]
[img 标题="其他标题"]http://example.org[/img]

```

如果您想忽略标签而只抓取内容，请将正则表达式更改为：

```
regex = /\[img(?:\s+caption=".+")?\](.+?)\[\/img\]/ 
```

使用该更改再次运行返回：

```
http://example.org/first.jpg
http://example.org/second.jpg
http://example.org/third.jpg
http://example.org/fourth.jpg
http://example.org/fifth.jpg
http://example.org 
```

（[红色证明](http://rubular.com/r/iBYvvzCoLW)）

如果您需要查找不同的标签，您可以轻松生成“OR”列表：

```
Regexp.union(%w[foo img bar])
=> /foo|img|bar/ 
```

如果您需要确保预先转义“魔术”字符：

```
Regexp.union(%w[foo img bar].map{ |s| Regexp.escape(s) }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:23:44.377

幸运的是，我已经在自己的应用程序中解决了这个问题！

鉴于这`@tags`是一个标签数组（如`["img"]`）：

```
regex = /\[(#{@tags.join("|")})\s*(.*?)?\/?\](?:(.*?)\[\/\1\])?/
matches = content.scan(regex) 
```

完整示例：

```
require 'pp'

@tags = %w(img)
regex = /\[(#{@tags.join("|")})\s*(.*?)?\/?\](?:(.*?)\[\/\1\])?/

content = <<-EOF
  Lorem Ipsum\r\n
  [img]http://example.org/first.jpg[/img]\r\n
  [img]http://example.org/second.jpg[/img]\r\n
  more lorem ipsum ..."
  Content B:

  "Lorem Ipsum\r\n
  [img caption="Sample caption"]http://example.org/third.jpg[/img]
  [img]http://example.org/fourth.jpg[/img]"
  Content C:

  "Lorem Ipsum [img]http://example.org/fifth.jpg[/img]\r\n
  more lorem ipsum\r\n\r\n
  [img caption="Some other caption"]http://example.org[/img]"
EOF

matches = content.scan(regex)
pp matches 
```

并输出：

```
[["img", "", "http://example.org/first.jpg"],
 ["img", "", "http://example.org/second.jpg"],
 ["img", "caption=\"Sample caption\"", "http://example.org/third.jpg"],
 ["img", "", "http://example.org/fourth.jpg"],
 ["img", "", "http://example.org/fifth.jpg"],
 ["img", "caption=\"Some other caption\"", "http://example.org"]] 
```

# twitter-bootstrap - Bootstrap——轮播不工作 10

> ID：14450765
> 
> 赞同：0
> 
> 时间：2013-01-22T02:47:13.020
> 
> 标签：twitter-bootstrap, carousel

我正在为一个朋友开发一个网站，而轮播并没有这样做：

[http://flibayarea.tk](http://flibayarea.tk)

所有文件都在正确的位置，所以任何人都可以帮助我并告诉我出了什么问题吗？非常感激。

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>FLi &middot; Bay Area</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The website for FLi Bay Area">
    <meta name="author" content="Utkash V. Dubey: http://utkashd.tk, utkash2@gmail.com">
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap-transition.js"></script>
    <script src="js/bootstrap-alert.js"></script>
    <script src="js/bootstrap-modal.js"></script>
    <script src="js/bootstrap-dropdown.js"></script>
    <script src="js/bootstrap-scrollspy.js"></script>
    <script src="js/bootstrap-tab.js"></script>
    <script src="js/bootstrap-tooltip.js"></script>
    <script src="js/bootstrap-popover.js"></script>
    <script src="js/bootstrap-button.js"></script>
    <script src="js/bootstrap-collapse.js"></script>
    <script src="js/bootstrap-carousel.js"></script>
    <script src="js/bootstrap-typeahead.js"></script>
    <script>
      !function ($) {
        $(function(){
          $('#myCarousel').carousel()
        })
      }(window.jQuery)
    </script>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <style>

    /* GLOBAL STYLES
    -------------------------------------------------- */
    /* Padding below the footer and lighter body text */

    body {
      padding-bottom: 40px;
      color: #5a5a5a;
    }

    /* CUSTOMIZE THE NAVBAR
    -------------------------------------------------- */

    /* Special class on .container surrounding .navbar, used for positioning it into place. */
    .navbar-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      z-index: 10;
      margin-top: 20px;
      margin-bottom: -90px; /* Negative margin to pull up carousel. 90px is roughly margins and height of navbar. */
    }
    .navbar-wrapper .navbar {

    }

    /* Remove border and change up box shadow for more contrast */
    .navbar .navbar-inner {
      border: 0;
      -webkit-box-shadow: 0 2px 10px rgba(0,0,0,.25);
         -moz-box-shadow: 0 2px 10px rgba(0,0,0,.25);
              box-shadow: 0 2px 10px rgba(0,0,0,.25);
    }

    /* Downsize the brand/project name a bit */
    .navbar .brand {
      padding: 14px 20px 16px; /* Increase vertical padding to match navbar links */
      font-size: 16px;
      font-weight: bold;
      text-shadow: 0 -1px 0 rgba(0,0,0,.5);
    }

    /* Navbar links: increase padding for taller navbar */
    .navbar .nav > li > a {
      padding: 15px 20px;
    }

    /* Offset the responsive button for proper vertical alignment */
    .navbar .btn-navbar {
      margin-top: 10px;
    }

    /* CUSTOMIZE THE NAVBAR
    -------------------------------------------------- */

    /* Carousel base class */
    .carousel {
      margin-bottom: 60px;
    }

    .carousel .container {
      position: relative;
      z-index: 9;
    }

    .carousel-control {
      height: 80px;
      margin-top: 0;
      font-size: 120px;
      text-shadow: 0 1px 1px rgba(0,0,0,.4);
      background-color: transparent;
      border: 0;
    }

    .carousel .item {
      height: 500px;
    }
    .carousel img {
      position: absolute;
      top: 0;
      left: 0;
      min-width: 100%;
      height: 500px;
    }

    .carousel-caption {
      background-color: transparent;
      position: static;
      max-width: 550px;
      padding: 0 20px;
      margin-top: 200px;
    }
    .carousel-caption h1,
    .carousel-caption .lead {
      margin: 0;
      line-height: 1.25;
      color: #fff;
      text-shadow: 0 1px 1px rgba(0,0,0,.4);
    }
    .carousel-caption .btn {
      margin-top: 10px;
    }

    /* MARKETING CONTENT
    -------------------------------------------------- */

    /* Center align the text within the three columns below the carousel */
    .marketing .span4 {
      text-align: center;
    }
    .marketing h2 {
      font-weight: normal;
    }
    .marketing .span4 p {
      margin-left: 10px;
      margin-right: 10px;
    }

    /* Featurettes
    ------------------------- */

    .featurette-divider {
      margin: 80px 0; /* Space out the Bootstrap <hr> more */
    }
    .featurette {
      padding-top: 120px; /* Vertically center images part 1: add padding above and below text. */
      overflow: hidden; /* Vertically center images part 2: clear their floats. */
    }
    .featurette-image {
      margin-top: -120px; /* Vertically center images part 3: negative margin up the image the same amount of the padding to center it. */
    }

    /* Give some space on the sides of the floated elements so text doesn't run right into it. */
    .featurette-image.pull-left {
      margin-right: 40px;
    }
    .featurette-image.pull-right {
      margin-left: 40px;
    }

    /* Thin out the marketing headings */
    .featurette-heading {
      font-size: 50px;
      font-weight: 300;
      line-height: 1;
      letter-spacing: -1px;
    }

    /* RESPONSIVE CSS
    -------------------------------------------------- */

    @media (max-width: 979px) {

      .container.navbar-wrapper {
        margin-bottom: 0;
        width: auto;
      }
      .navbar-inner {
        border-radius: 0;
        margin: -20px 0;
      }

      .carousel .item {
        height: 500px;
      }
      .carousel img {
        width: auto;
        height: 500px;
      }

      .featurette {
        height: auto;
        padding: 0;
      }
      .featurette-image.pull-left,
      .featurette-image.pull-right {
        display: block;
        float: none;
        max-width: 40%;
        margin: 0 auto 20px;
      }
    }

    @media (max-width: 767px) {

      .navbar-inner {
        margin: -20px;
      }

      .carousel {
        margin-left: -20px;
        margin-right: -20px;
      }
      .carousel .container {

      }
      .carousel .item {
        height: 300px;
      }
      .carousel img {
        height: 300px;
      }
      .carousel-caption {
        width: 65%;
        padding: 0 70px;
        margin-top: 100px;
      }
      .carousel-caption h1 {
        font-size: 30px;
      }
      .carousel-caption .lead,
      .carousel-caption .btn {
        font-size: 18px;
      }

      .marketing .span4 + .span4 {
        margin-top: 40px;
      }

      .featurette-heading {
        font-size: 30px;
      }
      .featurette .lead {
        font-size: 18px;
        line-height: 1.5;
      }

    }
    </style>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!--    <!-- Fav and touch icons>
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="../assets/ico/favicon.png"> -->
  </head>

  <body>

    <!-- NAVBAR
    ================================================== -->
    <div class="navbar-wrapper">
      <!-- Wrap the .navbar in .container to center it within the absolutely positioned parent. -->
      <div class="container">

        <div class="navbar navbar-inverse">
          <div class="navbar-inner">
            <!-- Responsive Navbar Part 1: Button for triggering responsive navbar (not covered in tutorial). Include responsive CSS to utilize. -->
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
            <a class="brand" href="../FLI_Bay_Area/index.html">FLi Bay Area</a>
            <!-- Responsive Navbar Part 2: Place all navbar contents you want collapsed withing .navbar-collapse.collapse. -->
            <div class="nav-collapse collapse">
              <ul class="nav"> <!-- home, about us, future events, our team, contact -->
                <li class="active"><a href="../FLI_Bay_Area/index.html">Home</a></li>
                <li><a href="about/index.html">About Us</a></li>
                <li><a href="future/index.html">Future Events</a></li>
                <li><a href="team/index.html">Our Team</a></li>
                <li><a href="contact/index.html">Contact Us</a></li>
                <!-- Read about Bootstrap dropdowns at http://twitter.github.com/bootstrap/javascript.html#dropdowns -->
                <!-- <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li class="divider"></li>
                    <li class="nav-header">Nav header</li>
                    <li><a href="#">Separated link</a></li>
                    <li><a href="#">One more separated link</a></li>
                  </ul>
                </li>-->
              </ul>
            </div><!--/.nav-collapse -->
          </div><!-- /.navbar-inner -->
        </div><!-- /.navbar -->

      </div> <!-- /.container -->
    </div><!-- /.navbar-wrapper -->

    <!-- Carousel
    ================================================== -->
    <div id="myCarousel" class="carousel slide">
      <div class="carousel-inner">
        <div class="item active">
          <img src="img/future_reversed.jpg" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>Coming up...</h1>
              <p class="lead"></p>
              <a class="btn btn-large btn-primary" href="#">Click to see upcoming events</a>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="img/contact_volunteer.gif" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>One more for good measure.</h1>
              <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <a class="btn btn-large btn-primary" href="#">Browse gallery</a>
            </div>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
      <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div><!-- /.carousel -->

    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->

    <div class="container marketing">

      <!-- Three columns of text below the carousel -->
      <div class="row">
        <div class="span4">
          <!-- <img class="img-circle" data-src="holder.js/140x140"> -->
          <h2>Heading</h2>
          <p>Donec sed odio dui. Etiam porta sem malesuada magna mollis euismod. Nullam id dolor id nibh ultricies vehicula ut id elit. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Praesent commodo cursus magna, vel scelerisque nisl consectetur et.</p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div><!-- /.span4 -->
        <div class="span4">
          <!-- <img class="img-circle" data-src="holder.js/140x140"> -->
          <h2>Heading</h2>
          <p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Cras mattis consectetur purus sit amet fermentum. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div><!-- /.span4 -->
        <div class="span4">
          <!-- <img class="img-circle" data-src="holder.js/140x140"> -->
          <h2>Heading</h2>
          <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div><!-- /.span4 -->
      </div><!-- /.row -->

      <!-- START THE FEATURETTES -->

      <hr class="featurette-divider">

      <div class="featurette">
        <img class="featurette-image pull-right" src="../assets/img/examples/browser-icon-chrome.png">
        <h2 class="featurette-heading">First featurette headling. <span class="muted">It'll blow your mind.</span></h2>
        <p class="lead">Donec ullamcorper nulla non metus auctor fringilla. Vestibulum id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.</p>
      </div>

      <hr class="featurette-divider">

      <div class="featurette">
        <img class="featurette-image pull-left" src="../assets/img/examples/browser-icon-firefox.png">
        <h2 class="featurette-heading">Oh yeah, it's that good. <span class="muted">See for yourself.</span></h2>
        <p class="lead">Donec ullamcorper nulla non metus auctor fringilla. Vestibulum id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.</p>
      </div>

      <hr class="featurette-divider">

      <div class="featurette">
        <img class="featurette-image pull-right" src="../assets/img/examples/browser-icon-safari.png">
        <h2 class="featurette-heading">And lastly, this one. <span class="muted">Checkmate.</span></h2>
        <p class="lead">Donec ullamcorper nulla non metus auctor fringilla. Vestibulum id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.</p>
      </div>

      <hr class="featurette-divider">

      <!-- /END THE FEATURETTES -->

      <!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p>&copy; 2012 Company, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
      </footer>

    </div><!-- /.container -->   
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:48:00.877

我认为您链接到的 jQuery 文件可能有问题 - 可能值得获得一个新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T04:07:04.550

据我所见，您的 Jquery 文件没有正确链接。从响应式菜单下拉的东西不起作用这一事实可以明显看出。

> 升级到最新版本：**Bootstrap 3.1** [https://github.com/twbs/bootstrap/releases/download/v3.1.0/bootstrap-3.1.0-dist.zip](https://github.com/twbs/bootstrap/releases/download/v3.1.0/bootstrap-3.1.0-dist.zip)（编译版本）或源代码版本[https:// github.com/twbs/bootstrap/archive/v3.1.0.zip](https://github.com/twbs/bootstrap/archive/v3.1.0.zip)
> 
> 如果你不熟悉或者你想坚持流行的。你可以看看这个[http://getbootstrap.com/2.3.2/assets/bootstrap.zip](http://getbootstrap.com/2.3.2/assets/bootstrap.zip)（那是2.3.2）

这是示例代码

> [http://bootply.com/112047](http://bootply.com/112047)

**请注意：**在添加 bootstrap.js（或最小版本）之前添加 jquery.js（或最小版本）

# c - 试图让这个 for 循环工作？

> ID：14450771
> 
> 赞同：0
> 
> 时间：2013-01-22T02:47:48.357
> 
> 标签：c, for-loop

我刚开始学习 C，所以答案可能非常明显，但是当我运行这段代码时，数字 0 只是在无限循环中不断重复。我正在尝试以 0.05 的增量将 x 从 0 打印到 1。

```
#include <stdio.h>
int main()
{
double x;

for( x = 0; x <= 1; x+.05 )
{

   printf("%d\n", x );
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T02:49:39.883

```
for( x = 0; x <= 1; x += .05 ) 
```

似乎您没有将更改后的 x 值写入 x .....如果您知道我的意思：D
`x++`与`x+=1`
`x+.05`不修改 x 的值相同，因此 x 将始终为 0 并导致无限循环...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T02:50:54.250

我想这就是你要找的：

```
for( x = 0; x <= 1; x+=0.05 )
{
   printf("%f\n", x );
} 
```

您需要更改为**+=**符号并将**d**更改为**f**。

*   **d**用于十进制整数
*   **f**用于浮点数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:00:06.153

将 for 循环中的行更改为
`for( x = 0; x <= 1; x += .05 )`

请注意，
`x += .05`
这相当于键入
`x = x + .05`
您真正想要的内容，因为目标是更新 x 的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T02:50:36.920

您需要加法和赋值复合运算符，`+=`而不仅仅是`+`.

```
for( x = 0; x <= 1; x+=.05 ) 
```

目前你的表达式的结果是`x + 5`，并且它的结果没有被使用，导致你的循环的条件永远不会是假的。

# sharepoint - CQWP 显示来自多个博客站点的帖子 - NumComments 不显示

> ID：14450779
> 
> 赞同：2
> 
> 时间：2013-01-22T02:49:00.683
> 
> 标签：sharepoint, sharepoint-2010, blogs, cqwp

我们刚刚将 SharePoint 从 2007 升级到 2010。

我编辑了一个指向包含多个博客子站点的站点的 CQWP，它从这些站点获取最新帖子，并在我的主页上显示最新的 5 个。

我可以显示所有字段，除了@NumComments - 这令人沮丧，因为我发现它非常有用。

如果您指向一个单独的“帖子”列表，它可以正常工作，但当您指向整个站点并选择帖子的内容类型时，它就不行了。

我也用 OOTB CQWP 试过这个，我得到了同样的结果。

到目前为止我已经尝试过：

1.  将 NumComments 添加到 CQWP 中的 DataMappings 属性中。
2.  将 NumComments 字段添加到 CommonViewFields 属性，然后在 Item.xsl 中显示它。
3.  创建# Comments 列的查找列并尝试获取该数据。

在不使用 Designer（我无权访问）的情况下，大致就是这样。

这是 SharePoint 的一个已知问题吗？它曾经在 2007 年完美运行，但在升级后停止了。

我几乎没有想法，所以任何建议都将不胜感激。

# c++ - 将 Qt 程序移植到 Windows

> ID：14450781
> 
> 赞同：0
> 
> 时间：2013-01-22T02:49:22.337
> 
> 标签：c++, qt-creator, linker-errors, porting, qt5

我正在尝试将 Qt 应用程序从 Linux 移植到 Windows。我在 Linux 中只使用终端和 .pro 文件中的 qmake 进行开发。

当我将项目导入 QtCreator 时，它会询问放置调试和发布输出的路径。这样做的目的是什么？我可以配置我的 .pro 文件以立即提供此信息吗？

我的第二个问题是当项目被导入时，QtCreator 会创建另一个名为 project.pro.user 的文件。这样做的目的是什么？

第三个问题是，一旦我成功导入项目并开始编译，我会收到以下链接错误“LNK1104：无法打开文件“C:\Qt\Qt5.0.0\5.0\msvc2010\lib\Qt5Widgets500.lib”。我已经检查过，它之后的文件不存在，但有一个“Qt5Widgets”库文件。

我正在使用 Qt 5 在 Windows XP 上运行它。

提前致谢。

时钟.pro

```
CONFIG = qt \
         debug

QT += widgets

include(include/headers.pro)
include(src/sources.pro)

DEPENDPATH += include
INCLUDEPATH += include
VPATH += src
DESTDIR = bin
MOC_DIR = tmp
OBJECTS_DIR = tmp
QMAKE_DISTCLEAN = -r bin tmp

TEMPLATE = app

TARGET = Clock 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:25:23.677

对于第一个问题：在像 QtCreator 这样的 IDE 中，您可以有多种配置（使用不同的编译器选项）。默认配置是调试和发布。每个配置都编译到一个单独的目录中。

对于第二个问题：有一些（个人/本地）项目设置通常想为自己保留并且不想与他人共享，例如一个人当前的调试设置，如启动程序的命令行参数。这些设置保存在单独的项目文件中，通常不会提交给版本控制系统。

对于第三个问题：这可能是 Qt5 的错误/错误配置。我还没有这方面的经验。

# core-data - GoogleAnalytics 2.0b4 无效 GAIuncaughtExceptionHandler？

> ID：14450789
> 
> 赞同：0
> 
> 时间：2013-01-22T02:50:28.260
> 
> 标签：core-data, google-analytics, google-analytics-api

当我从数据库中删除 NSManagedObjects 时发生了什么。

GoogleAnalytics 2.0b4 void GAIuncaughtExceptionHandler(NSException *) (GAIUncaughtExceptionHandler.m:41)：未捕获的异常：CoreData 无法满足“0xe0dd380”libc++abi.dylib 的错误：处理程序抛出异常

这是最新的 Google Analytics SDK。任何想法？

# javascript - 某些 url 名称的正则表达式

> ID：14450793
> 
> 赞同：-5
> 
> 时间：2013-01-22T02:50:56.627
> 
> 标签：javascript, regex, url

我需要 javascript 中的正则表达式来匹配某些指定的 url（例如 facebook.com），如下所示：

`http://www.facebook.com ; https://www.facebook.com ; www.facebook.com`

但不是

`www.something.com/test/redirect?=www.facebook.com`

任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:57:42.767

具体你要求什么：

```
^(http(s)?://)?www.facebook.com 
```

这将匹配相同，添加`http://facebook.com`and `https://facebook.com`：

```
^((http(s)?://(www.)?)|www.)facebook.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:53:47.167

如果以下任何正则表达式匹配，则满足规则：

^http://www\.facebook\.com.*

^https://www\.facebook\.com.*

^www\.facebook\.com$

^www\.facebook\.com/.*

^ 匹配字符串的开头， $ 匹配结尾。因此，您可以使用它来强制匹配位于字符串中的某个点。

# java - JAVA中的线程池示例

> ID：14450796
> 
> 赞同：0
> 
> 时间：2013-01-22T02:51:06.170
> 
> 标签：java, threadpool

谁能给我一个简单的例子，我们创建了自己的线程池类来更好地感受线程。我不想使用 java 中可用的 Executor Service。我的意思是线程池的任何内置类。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T03:14:36.717

这似乎是您正在寻找的。 [http://java.dzone.com/news/java-concurrency-thread-pools](http://java.dzone.com/news/java-concurrency-thread-pools)

```
public class ThreadPool {

  private BlockingQueue taskQueue = null;
  private List<PoolThread> threads = new ArrayList<PoolThread>();
  private boolean isStopped = false;

  public ThreadPool(int noOfThreads, int maxNoOfTasks){
    taskQueue = new BlockingQueue(maxNoOfTasks);

    for(int i=0; i<noOfThreads; i++){
      threads.add(new PoolThread(taskQueue));
    }
    for(PoolThread thread : threads){
      thread.start();
    }
  }

  public void synchronized execute(Runnable task){
    if(this.isStopped) throw
      new IllegalStateException("ThreadPool is stopped");

    this.taskQueue.enqueue(task);
  }

  public synchronized void stop(){
    this.isStopped = true;
    for(PoolThread thread : threads){
      thread.stop();
    }
  }

}

public class PoolThread extends Thread {

  private BlockingQueue taskQueue = null;
  private boolean       isStopped = false;

  public PoolThread(BlockingQueue queue){
    taskQueue = queue;
  }

  public void run(){
    while(!isStopped()){
      try{
        Runnable runnable = (Runnable) taskQueue.dequeue();
        runnable.run();
      } catch(Exception e){
        //log or otherwise report exception,
        //but keep pool thread alive.
      }
    }
  }

  public synchronized void stop(){
    isStopped = true;
    this.interrupt(); //break pool thread out of dequeue() call.
  }

  public synchronized void isStopped(){
    return isStopped;
  }
} 
```

# c# - 文本框属性

> ID：14450800
> 
> 赞同：2
> 
> 时间：2013-01-22T02:51:28.560
> 
> 标签：c#, asp.net, .net

我正在使用 C# 编写一个 .net 程序。我想问我如何让用户调整文本框的大小，以便他可以放大或缩小文本框

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:33:24.390

这在 Winforms 中很容易做到，只需要几行代码。Windows 中的每个窗口都具有由用户调整大小的先天能力。这通常只适用于顶级窗口（表单），但它同样适用于任何客户端窗口。

关键是响应 WM_NCHITTEST 消息。这是当您单击窗口时 Windows 发送到窗口的消息。它本质上是在问“什么被击中了？” 您可以简单地说“角落被击中”，然后 Windows 从那里拿走它。它会更改光标以指示可以拖动角。并在用户移动鼠标时自动调整窗口大小。

向您的项目添加一个新类并粘贴如下所示的代码。编译。将新控件从工具箱顶部拖放到窗体上，并将其 Multiline 属性设置为 true。按 F5 并拖动文本框的右下角以查看它是否有效。

```
using System;
using System.Drawing;
using System.Windows.Forms;

class SizeableTextBox : TextBox {
    protected override void WndProc(ref Message m) {
        base.WndProc(ref m);
        // Intercept WM_NCHITTEST
        if (m.Msg == 0x84 && this.Multiline) {
            // Find out where the cursor is located
            var pos = PointToClient(new Point(m.LParam.ToInt32()));
            // Return HTBOTTOMRIGHT if in the lower-right corner
            if (pos.X >= this.Width - 12 && pos.Y >= this.Height - 12) m.Result = (IntPtr)17;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:53:28.787

文本框没有允许您手动调整它们大小的本机属性。您*可以*做的是设置`dock`or`anchor`属性，以便当用户调整表单大小时，它会调整文本框的大小。

# cocos2d-iphone - 我们应该使用哪些 API 来将 spritesheets 和 sprites 添加到 cocos2d 游戏中？

> ID：14450802
> 
> 赞同：0
> 
> 时间：2013-01-22T02:51:34.390
> 
> 标签：cocos2d-iphone, sprite-sheet

在创建 cocos2d iOS 游戏时，有几种添加 spritesheets 的选项 - CCTextureCache::addImageAsync、CCSpriteFrameCache::addSpriteFramesWithFile 等 - 使用这些不同的方式添加 spritesheet 有什么区别？

类似地，要加载一个精灵，我们可以调用 CCSprite::spriteWithSpriteFrameName 或 CCSprite::spriteWithFile 或 CCSpriteBatchNode::batchNodeWithTexture 等。使用这些技术有什么区别？

谢谢

阿南德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:08:30.513

加载精灵帧，这也会加载纹理：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"file.plist"]; 
```

使用精灵帧：

```
CCSprite* sprite = [CCSprite spriteWithSpriteFrameName:@"frame.png"]; 
```

将精灵添加到批处理节点：

```
CCSpriteBatchNode* batchNode = [CCSpriteBatchNode batchNodeWithTexture:sprite.texture];
[batchNode addChild:sprite]; 
```

如果您使用精灵的相同图像文件，batchNodeWithFile 也可以工作。如果 sprite 是用 spriteframe 初始化的，它将是纹理图集图像（即“file.png”）。

仅当您想在另一个线程上加载纹理时才需要 addImageAsync，通常是为加载屏幕设置动画。之后您仍然需要添加精灵帧。

CCSprite spriteWithFile 从单个图像文件创建一个精灵。这些也可以批量处理，但最好使用带有精灵帧的纹理图集。

# android - Service 和 IntentService，哪个更好地运行从服务器轮询数据库值的服务？

> ID：14450804
> 
> 赞同：2
> 
> 时间：2013-01-22T02:51:51.053
> 
> 标签：android, android-service, alarmmanager, intentservice, timertask

我已经阅读了很多关于`Service`and的资源`IntentService`。但是，在做出决定时，我没有足够的信心选择使用哪种类型来创建一个后台服务，该服务将在一段时间内从数据库中轮询数据，并在我得到我想要的数据时停止它，因为数据代表请求的状态，例如。订购药品确认状态（待定、已完成、进行中）。我需要检测状态何时设置为“已完成”并发送通知以提醒用户订单已完成。之后，该服务将自动停止。请多多指教。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:22:06.487

意向服务——

*   在工作线程中工作，而不是在主线程中。

*   打算执行它们的操作是单独的线程，然后被关闭。

*   他们确实执行他们的操作并停止。

*   非常适合执行诸如 htp get 之类的操作，不需要与服务器保持连接。

服务 -

*   在主线程中运行。

*   理想的情况是需要与服务器保持连接（即永久 tcp 连接），您可以采用的方式是拥有一个服务（不是意图服务），该服务使用 asynctask 或更经典的线程在服务中托管

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-25T10:29:23.730

没什么区别。使用任何你觉得更容易的东西。这个问题不值得花任何时间担心。只需确保您了解哪些代码需要在主（UI）线程上运行以及哪些代码需要在后台（工作）线程上运行。在`IntentService`“长时间运行的操作”需要运行的情况下，`onHandleIntent()`如果您使用的是`Service`in，`onStartCommand()`您将启动自己的后台线程并对其执行“长时间运行的操作”。

# python - 应用程序外的 django 测试文件夹

> ID：14450805
> 
> 赞同：0
> 
> 时间：2013-01-22T02:51:59.857
> 
> 标签：python, django

在 django 我建立了一个应用程序，

目前文件结构如下所示：

*   文档
    *   文档在这里
*   应用程序
    *   测试
    *   管理员.py
    *   ...

为了匹配公司用于其他非 django 项目的布局，我想这样制作结构：

*   文档
    *   文档在这里
*   应用程序
    *   管理员.py
    *   ...
*   测试

最好我希望命令 ./manage.py test [app] 运行这些测试 谁能给我一个想法，我该如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:22:57.783

你绝对可以用 django-nose 做到这一点：

[https://github.com/jbalogh/django-nose](https://github.com/jbalogh/django-nose)

# java - Documentum：ORDER_BY r_modify_date 耗时过长

> ID：14450808
> 
> 赞同：1
> 
> 时间：2013-01-22T02:52:09.473
> 
> 标签：java, dql, documentum

我是 Documentum 的新手，遇到一个简单的问题，我正在尝试根据上次修改的内容检索所有记录。

基本上我有一个包含 1000 条记录的数据表。

目前我们使用

```
Select * from docfolder enabled (FETCH_ALL_RESULTS 1000) 
```

上述语句的问题有时是新创建的报告或修改后的报告将超出 1000 范围，我们的用户会抱怨找不到报告 * 有效的抱怨 *

实际上最后修改的记录甚至不需要是列表中的第一个，它只需要出现即可。

我尝试使用

```
Select * from docfolder order by r_modify_date enabled (FETCH_ALL_RESULTS 1000) 
```

但这需要太长时间（永远不会完成）。我尝试用 a、b、c、d（字段）替换 *，但它也不起作用。

我可以知道我的问题是否有其他解决方案？

我正在考虑 documentum "ENABLE (RETURN_TOP 10)" 提示，但我怀疑它是否适用于 Oracle 11g 以及 documentum 如何定义前 1000 名？

更新：似乎通过 toad 使用数据链接比使用 DQL 更快，但由于遗留问题，我需要一个 DQL 解决方案。

Documentum 6.0 和 Oracle 11g。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:26:39.303

您使用的是哪个版本的 Documentum？

确保 r_object_id 上有索引。您可能还想为 r_modify_date 添加索引。

此外，在添加字段 a、b、c、d 时 - 确保这些字段是“不重复的”。这样，Documentum 将不需要加入 _r 表，从而使整体查询更快。

此外，在 DA 中，如果您执行查询，您实际上可以看到传递给 Oracle 的 SQL 查询。获取此查询并在 Toad 中运行它并寻找优化。您也可以注册 _s 表，以便您可以直接 DQL 查询 _s 表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:59:53.707

我设法通过查询oracle数据库中的底层表来解决这个问题。

性能慢的原因是因为table begin join落后于获取结果。

将来，如果您已经用尽所有方法来优化您的 DQL，只需退回到查询 oracle 数据库。

我已推荐所有表视图和搜索通过 oracle 进行查询。

只有个别报告是通过documentum检索的，有时我质疑拥有documentum的目的。

# google-app-engine - jinja2 表单渲染不允许包含“-”的属性

> ID：14450812
> 
> 赞同：2
> 
> 时间：2013-01-22T02:52:17.360
> 
> 标签：google-app-engine, django-forms, jinja2

我正在尝试根据[本教程](http://kay-docs.shehas.net/forms-usage.html#customizing-the-form-template)自定义表单模板。据我了解，`render()`只需向标签添加一些属性。例如，我添加`placeholder = "abc"`并且效果很好。

```
{% call inserttourbus(id = "formAddNewRow" )  %}

     <div class="fieldWrapper">
         {% if inserttourbus['bustype'].label() %}Bus Type{% endif %}
         {{ inserttourbus['bustype'].render(placeholder="abc")|safe }}
         {% if inserttourbus['bustype'].errors() %}Not filled yet!{% endif %}      
     </div>
{% endcall %} 
```

这是我的问题： - 我`bootstrap typeahead`用于我的模板，所以我需要将以下属性添加到`inserttourbus`文本框

```
data-provide="typeahead" data-items="4" data-source='["Alabama","Alaska"]' 
```

所以会变成

```
{{ inserttourbus['bustype'].render(placeholder="abc", data-provide="typeahead", data-items="4", data-source='["Alabama","Alaska"]')|safe }} 
```

但是 jinja2 引擎似乎不接受`data-provide`, `data-items`, 等等，因为它包含`"-"`字符。如果我改为`data-provide`，`dataprovide`jinja2 引擎可以很好地渲染代码。

但是，在`bootstrap typeahead`javascript 中，所有变量都定义为`data-provide`, `data-items`。如果我将它们更改为`dataprovide`, `dataitems`，javascipt 将停止工作。

请给我一个解决方案： - 如何让 jinja2 接受具有“-”的属性 - 其他解决方案，建议

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T19:18:40.333

查看[此代码段](http://flask.pocoo.org/snippets/107/)以在 Flask 中执行此操作。我想它对 Django 也是一样的。在临时字典中使用无效的 Jinja2 (Python) 语法传递 HTML 属性：

```
{{ inserttourbus['bustype'].render(placeholder="abc", 
       **{'data-provide':'typeahead',
          'data-items':'4',
          'data-source':'["Alabama","Alaska"]'}) }} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:15:59.267

连字符用作 Python 中的减法运算符。所以不要在名字中使用它。您当然可以在字符串中使用它。

# jquery - 在 JQuery 中处理丢失的图像

> ID：14450813
> 
> 赞同：0
> 
> 时间：2013-01-22T02:52:25.873
> 
> 标签：jquery, image

在 JQuery 中，以前可以使用 fn.error() 处理丢失的图像

```
var photo = $('#photo');
photo.find('.photo-wrapper')
    .error(function() { $(this).attr('src' , '/images/nosuchphoto.png'); })
    .attr( 'src', '/images/photoserver/photo.png' ); 
```

但这在 JQuery 1.8 中已被弃用。

现在 1.9 已经发布，处理丢失图像的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:53:50.367

改为使用`on("error")`。

```
var photo = $('#photo');
photo.find('.photo-wrapper')
    .on('error', function() { $(this).attr('src' , '/images/nosuchphoto.png'); })
    .attr( 'src', '/images/photoserver/photo.png' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T08:48:49.427

对于可能存在的图像，我发现最优雅的解决方案是使用 $ajax，例如：

```
$.ajax({
    url: 'your_image.jpg',
    type: "POST",
    dataType: "image",
    success: function() {
        /* function if image exists (setting it in div or smthg.)*/
    },
    error: function(){
       /* function if image doesn't exist like hideing div*/
    } 
}); 
```

但是有些人喜欢使用加载后显示自己的隐藏图像，例如：

```
<img src="your_image.jpg" onload="loadImage()"> 
```

两种解决方案都有效，使用最适合您问题的解决方案

# performance - 谷歌应用脚 本超时 ~ 5 分钟？

> ID：14450819
> 
> 赞同：39
> 
> 时间：2013-01-22T02:53:10.497
> 
> 标签：performance, google-apps-script, optimization, google-drive-api

我的谷歌应用程序脚本正在遍历用户的谷歌驱动器文件并将文件复制并有时将文件移动到其他文件夹。脚本总是在 5 分钟后停止，日志中没有错误消息。

我在一次运行中对数十甚至数千个文件进行排序。

是否有任何设置或解决方法？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2011-12-22T18:36:29.057

您可以做的一件事（这当然取决于您要完成的工作）是：

1.  将必要的信息（例如循环计数器）存储在电子表格或另一个永久存储（即 ScriptProperties）中。
2.  让您的脚本每五分钟左右终止一次。
3.  设置时间驱动触发器以每五分钟运行一次脚本（或使用[脚本服务](https://developers.google.com/apps-script/service_script)以编程方式创建触发器）。
4.  在每次运行时，从您使用过的永久存储中读取保存的数据，然后从停止的地方继续运行脚本。

这不是一个万能的解决方案，如果您发布代码，人们将能够更好地为您提供帮助。

这是我每天使用的脚本的简化代码摘录：

```
function runMe() {
  var startTime= (new Date()).getTime();

  //do some work here

  var scriptProperties = PropertiesService.getScriptProperties();
  var startRow= scriptProperties.getProperty('start_row');
  for(var ii = startRow; ii <= size; ii++) {
    var currTime = (new Date()).getTime();
    if(currTime - startTime >= MAX_RUNNING_TIME) {
      scriptProperties.setProperty("start_row", ii);
      ScriptApp.newTrigger("runMe")
               .timeBased()
               .at(new Date(currTime+REASONABLE_TIME_TO_WAIT))
               .create();
      break;
    } else {
      doSomeWork();
    }
  }

  //do some more work here

} 
```

注意#1：该变量`REASONABLE_TIME_TO_WAIT`应该足够大以触发新触发器。（我将其设置为 5 分钟，但我认为它可能会少于此）。

注意#2：`doSomeWork()`必须是一个执行相对较快的函数（我会说不到 1 分钟）。

注意#3：Google 已弃用[`Script Properties`](https://developers.google.com/apps-script/reference/properties/script-properties)，并[`Properties Service`](https://developers.google.com/apps-script/reference/properties/properties-service)取而代之。该功能已相应修改。

注意#4：第二次调用该函数时，它将 for 循环的第 i 个值作为字符串。所以你必须把它转换成整数

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-04-22T14:29:19.293

### 配额

> 单个脚本的最长执行时间为 6 分钟/执行
> - [https://developers.google.com/apps-script/guides/services/quotas](https://developers.google.com/apps-script/guides/services/quotas)

但是还有其他限制要熟悉。例如，您只允许每天 1 小时的总触发运行时间，因此您不能将一个长函数分解为 12 个不同的 5 分钟块。

### 优化

也就是说，你真的需要花六分钟来执行的原因很少。JavaScript 在几秒钟内对数千行数据进行排序应该没有问题。可能会损害您的性能的是对 Google Apps 本身的服务调用。

> 您可以编写脚本以最大限度地利用内置缓存，最大限度地减少读取和写入次数。交替读取和写入命令很慢。为了加快脚本的速度，用一个命令将所有数据读入数组，对数组中的数据执行任何操作，然后用一个命令写出数据。
> - [https://developers.google.com/apps-script/best_practices](https://developers.google.com/apps-script/best_practices)

### 配料

您可以做的最好的事情是减少服务调用的数量。谷歌通过允许大部分 API 调用的批处理版本来实现这一点。

作为一个简单的例子，**而不是这个**：

```
for (var i = 1; i <= 100; i++) {
  SpreadsheetApp.getActiveSheet().deleteRow(i);
} 
```

**这样做**：

```
SpreadsheetApp.getActiveSheet().deleteRows(i, 100); 
```

在第一个循环中，您不仅需要在工作表上调用 100 次 deleteRow，而且还需要获取活动工作表 100 次。第二种变体的性能应该比第一种好几个数量级。

### 交织读取和写入

此外，您还应该非常小心，不要在阅读和写作之间频繁地来回走动。您不仅会失去批处理操作的潜在收益，而且 Google 将无法使用其内置缓存。

> 每次读取时，我们必须先清空（提交）写入缓存以确保您正在读取最新数据（您可以通过调用强制写入缓存`SpreadsheetApp.flush()`）。同样，每次您进行写入时，我们都必须丢弃读取缓存，因为它不再有效。因此，如果您可以避免交叉读取和写入，您将充分利用缓存。
> - [http://googleappsscript.blogspot.com/2010/06/optimizing-spreadsheet-operations.html](http://googleappsscript.blogspot.com/2010/06/optimizing-spreadsheet-operations.html)

**例如，而不是这个**：

```
sheet.getRange("A1").setValue(1);
sheet.getRange("B1").setValue(2);
sheet.getRange("C1").setValue(3);
sheet.getRange("D1").setValue(4); 
```

**这样做**：

```
sheet.getRange("A1:D1").setValues([[1,2,3,4]]); 
```

### 链接函数调用

作为最后的手段，如果您的函数确实无法在六分钟内完成，您可以将调用链接在一起或分解您的函数以处理较小的数据段。

您可以将数据存储在[缓存服务](https://developers.google.com/apps-script/reference/cache/)（临时）或[属性服务](https://developers.google.com/apps-script/reference/properties/)（永久）存储桶中，以便跨执行检索（因为 Google Apps 脚本具有无状态执行）。

[如果您想启动另一个事件，您可以使用Trigger Builder 类](https://developers.google.com/apps-script/reference/script/trigger-builder)创建自己的触发器，或者在紧迫的时间表上设置重复触发器。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-01-02T16:28:12.557

另外，尽量减少对谷歌服务的调用量。例如，如果您想更改电子表格中的一系列单元格，请不要读取每个单元格，对其进行变异并将其存储回来。而是将整个范围（使用[Range.getValues()](https://developers.google.com/apps-script/reference/spreadsheet/range#getValues%28%29)）读入内存，对其进行变异并一次存储所有内容（使用[Range.setValues()](https://developers.google.com/apps-script/reference/spreadsheet/range#setValues%28Object%29)）。

这应该可以为您节省大量的执行时间。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-11-26T11:09:35.187

[Anton Soradoi 的回答](https://stackoverflow.com/a/8608327/3829407)似乎还可以，但**考虑使用[缓存服务](https://developers.google.com/apps-script/reference/cache/)**而不是将数据存储到临时工作表中。

```
 function getRssFeed() {
   var cache = CacheService.getPublicCache();
   var cached = cache.get("rss-feed-contents");
   if (cached != null) {
     return cached;
   }
   var result = UrlFetchApp.fetch("http://example.com/my-slow-rss-feed.xml"); // takes 20 seconds
   var contents = result.getContentText();
   cache.put("rss-feed-contents", contents, 1500); // cache for 25 minutes
   return contents;
 } 
```

另请注意，截至 2014 年 4 月[，脚本运行时间的限制](https://developers.google.com/apps-script/guides/services/quotas#current_limitations) **为 6 分钟**。

* * *

**G Suite 商务版/企业版/教育版和抢先体验用户：**

截至 2018 年 8 月，这些用户的最大脚本运行时间现在设置为 30 分钟。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-01-22T03:25:33.360

找出一种方法来拆分你的工作，这样它需要不到 6 分钟，因为这是任何脚本的限制。在第一次通过时，您可以迭代并将文件和文件夹列表存储在电子表格中，并为第 2 部分添加时间驱动的触发器。

在第 2 部分中，在处理列表时删除列表中的每个条目。当列表中没有项目时，删除触发器。

这就是我如何处理一张大约 1500 行的表格，这些表格分布到大约十几个不同的电子表格中。由于对电子表格的调用次数过多，它会超时，但会在触发器再次运行时继续。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-11-15T15:49:41.743

如果您使用的是 G Suite 商务版或企业版。启用 App Maker 后，您可以[注册 App Maker 的早期访问权限，](https://gsuite.google.com/campaigns/index__appmakereap.html)您的脚本运行时会将运行时间**从 6 分钟增加到 30 分钟**:)

有关应用程序制造商的更多详细信息，请[单击此处](https://developers.google.com/appmaker/)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-07-27T20:28:48.277

我使用 ScriptDB 来保存我的位置，同时在循环中处理大量信息。该脚本可以/确实超过 5 分钟的限制。通过在每次运行期间更新 ScriptDb，脚本可以从数据库中读取状态并从中断处继续，直到所有处理完成。试试这个策略，我想你会对结果感到满意。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-24T18:37:41.547

这是一种非常基于[Dmitry Kostyuk 关于该主题的绝对优秀文章](https://medium.com/geekculture/bypassing-the-maximum-script-runtime-in-google-apps-script-e510aa9ae6da?sk=ca2b3c4d2fa429e02ba5f81a94d0c780)的方法。

它的不同之处在于它不会尝试计时执行并优雅地退出。相反，它故意每分钟生成一个新线程，并让它们运行直到它们被 Google 超时。这绕过了最大执行时间限制，并通过在多个线程中并行运行处理来加快处理速度。（即使您没有达到执行时间限制，这也会加快速度。）

它在脚本属性中跟踪任务状态，加上一个信号量以确保没有两个线程在任何时候编辑任务状态。（它使用了几个属性，因为每个属性限制为 9k。）

我试图模仿 Google Apps Script `iterator.next()`API，但不能使用`iterator.hasNext()`，因为那不是线程安全的（请参阅[TOCTOU](https://en.wikipedia.org/wiki/Time-of-check_to_time-of-use)）。它在底部使用了几个外观类。

我将非常感谢任何建议。这对我来说效果很好，通过生成三个并行线程来运行文档目录，将处理时间减半。您可以在配额内生成 20 个，但这对于我的用例来说已经足够了。

该类被设计为插入式，无需修改即可用于任何目的。用户唯一必须做的就是在处理文件时，删除之前超时尝试的任何输出。如果处理任务在完成之前被 Google 超时，迭代器将`fileId`多次返回给定值。

为了使日志静音，这一切都通过`log()`底部的功能进行。

这是你如何使用它：

```
const main = () => {
  const srcFolder = DriveApp.getFoldersByName('source folder',).next()
  const processingMessage = processDocuments(srcFolder, 'spawnConverter')
  log('main() finished with message', processingMessage)
}

const spawnConverter = e => {
  const processingMessage = processDocuments()
  log('spawnConverter() finished with message', processingMessage)
}

const processDocuments = (folder = null, spawnFunction = null) => {
  // folder and spawnFunction are only passed the first time we trigger this function,
  // threads spawned by triggers pass nothing.
  // 10,000 is the maximum number of milliseconds a file can take to process.
  const pfi = new ParallelFileIterator(10000, MimeType.GOOGLE_DOCS, folder, spawnFunction)
  let fileId = pfi.nextId()
  const doneDocs = []
  while (fileId) {
    const fileRelativePath = pfi.getFileRelativePath(fileId)
    const doc = DocumentApp.openById(fileId)
    const mc = MarkupConverter(doc)

    // This is my time-consuming task:
    const mdContent = mc.asMarkdown(doc)

    pfi.completed(fileId)
    doneDocs.push([...fileRelativePath, doc.getName() + '.md'].join('/'))
    fileId = pfi.nextId()
  }
  return ('This thread did:\r' + doneDocs.join('\r'))
} 
```

这是代码：

```
const ParallelFileIterator = (function() {
  /**
  * Scans a folder, depth first, and returns a file at a time of the given mimeType.
  * Uses ScriptProperties so that this class can be used to process files by many threads in parallel.
  * It is the responsibility of the caller to tidy up artifacts left behind by processing threads that were timed out before completion.
  * This class will repeatedly dispatch a file until .completed(fileId) is called.
  * It will wait maxDurationOneFileMs before re-dispatching a file.
  * Note that Google Apps kills scripts after 6 mins, or 30 mins if you're using a Workspace account, or 45 seconds for a simple trigger, and permits max 30  
  * scripts in parallel, 20 triggers per script, and 90 mins or 6hrs of total trigger runtime depending if you're using a Workspace account.
  * Ref: https://developers.google.com/apps-script/guides/services/quotas
  maxDurationOneFileMs, mimeType, parentFolder=null, spawnFunction=null
  * @param {Number} maxDurationOneFileMs A generous estimate of the longest a file can take to process.
  * @param {string} mimeType The mimeType of the files required.
  * @param {Folder} parentFolder The top folder containing all the files to process. Only passed in by the first thread. Later spawned threads pass null (the files have already been listed and stored in properties).
  * @param {string} spawnFunction The name of the function that will spawn new processing threads. Only passed in by the first thread. Later spawned threads pass null (a trigger can't create a trigger).
  */
  class ParallelFileIterator {
    constructor(
      maxDurationOneFileMs,
      mimeType,
      parentFolder = null,
      spawnFunction = null,
    ) {
      log(
        'Enter ParallelFileIterator constructor',
        maxDurationOneFileMs,
        mimeType,
        spawnFunction,
        parentFolder ? parentFolder.getName() : null,
      )

      // singleton
      if (ParallelFileIterator.instance) return ParallelFileIterator.instance

      if (parentFolder) {
        _cleanUp()
        const t0 = Now.asTimestamp()
        _getPropsLock(maxDurationOneFileMs)
        const t1 = Now.asTimestamp()
        const { fileIds, fileRelativePaths } = _catalogFiles(
          parentFolder,
          mimeType,
        )
        const t2 = Now.asTimestamp()
        _setQueues(fileIds, [])
        const t3 = Now.asTimestamp()
        this.fileRelativePaths = fileRelativePaths
        ScriptProps.setAsJson(_propsKeyFileRelativePaths, fileRelativePaths)
        const t4 = Now.asTimestamp()
        _releasePropsLock()
        const t5 = Now.asTimestamp()
        if (spawnFunction) {
          // only triggered on the first thread
          const trigger = Trigger.create(spawnFunction, 1)
          log(
            `Trigger once per minute: UniqueId: ${trigger.getUniqueId()}, EventType: ${trigger.getEventType()}, HandlerFunction: ${trigger.getHandlerFunction()}, TriggerSource: ${trigger.getTriggerSource()}, TriggerSourceId: ${trigger.getTriggerSourceId()}.`,
          )
        }
        log(
          `PFI instantiated for the first time, has found ${
            fileIds.length
          } documents to process. getPropsLock took ${t1 -
            t0}ms, _catalogFiles took ${t2 - t1}ms, setQueues took ${t3 -
            t2}ms, setAsJson took ${t4 - t3}ms, releasePropsLock took ${t5 -
            t4}ms, trigger creation took ${Now.asTimestamp() - t5}ms.`,
        )
      } else {
        const t0 = Now.asTimestamp()
        // wait for first thread to set up Properties
        while (!ScriptProps.getJson(_propsKeyFileRelativePaths)) {
          Utilities.sleep(250)
        }
        this.fileRelativePaths = ScriptProps.getJson(_propsKeyFileRelativePaths)
        const t1 = Now.asTimestamp()
        log(
          `PFI instantiated again to run in parallel. getJson(paths) took ${t1 -
            t0}ms`,
        )
        spawnFunction
      }

      _internals.set(this, { maxDurationOneFileMs: maxDurationOneFileMs })
      // to get: _internal(this, 'maxDurationOneFileMs')

      ParallelFileIterator.instance = this
      return ParallelFileIterator.instance
    }

    nextId() {
      // returns false if there are no more documents

      const maxDurationOneFileMs = _internals.get(this).maxDurationOneFileMs
      _getPropsLock(maxDurationOneFileMs)
      let { pending, dispatched } = _getQueues()
      log(
        `PFI.nextId: ${pending.length} files pending, ${
          dispatched.length
        } dispatched, ${Object.keys(this.fileRelativePaths).length -
          pending.length -
          dispatched.length} completed.`,
      )
      if (pending.length) {
        // get first pending Id, (ie, deepest first)
        const nextId = pending.shift()
        dispatched.push([nextId, Now.asTimestamp()])
        _setQueues(pending, dispatched)
        _releasePropsLock()
        return nextId
      } else if (dispatched.length) {
        log(`PFI.nextId: Get first dispatched Id, (ie, oldest first)`)
        let startTime = dispatched[0][1]
        let timeToTimeout = startTime + maxDurationOneFileMs - Now.asTimestamp()
        while (dispatched.length && timeToTimeout > 0) {
          log(
            `PFI.nextId: None are pending, and the oldest dispatched one hasn't yet timed out, so wait ${timeToTimeout}ms to see if it will`,
          )
          _releasePropsLock()
          Utilities.sleep(timeToTimeout + 500)
          _getPropsLock(maxDurationOneFileMs)
          ;({ pending, dispatched } = _getQueues())
          if (pending && dispatched) {
            if (dispatched.length) {
              startTime = dispatched[0][1]
              timeToTimeout =
                startTime + maxDurationOneFileMs - Now.asTimestamp()
            }
          }
        }
        // We currently still have the PropsLock
        if (dispatched.length) {
          const nextId = dispatched.shift()[0]
          log(
            `PFI.nextId: Document id ${nextId} has timed out; reset start time, move to back of queue, and re-dispatch`,
          )
          dispatched.push([nextId, Now.asTimestamp()])
          _setQueues(pending, dispatched)
          _releasePropsLock()
          return nextId
        }
      }
      log(`PFI.nextId: Both queues empty, all done!`)
      ;({ pending, dispatched } = _getQueues())
      if (pending.length || dispatched.length) {
        log(
          "ERROR: All documents should be completed, but they're not. Giving up.",
          pending,
          dispatched,
        )
      }
      _cleanUp()
      return false
    }

    completed(fileId) {
      _getPropsLock(_internals.get(this).maxDurationOneFileMs)
      const { pending, dispatched } = _getQueues()
      const newDispatched = dispatched.filter(el => el[0] !== fileId)
      if (dispatched.length !== newDispatched.length + 1) {
        log(
          'ERROR: A document was completed, but not found in the dispatched list.',
          fileId,
          pending,
          dispatched,
        )
      }
      if (pending.length || newDispatched.length) {
        _setQueues(pending, newDispatched)
        _releasePropsLock()
      } else {
        log(`PFI.completed: Both queues empty, all done!`)
        _cleanUp()
      }
    }

    getFileRelativePath(fileId) {
      return this.fileRelativePaths[fileId]
    }
  }

  // ============= PRIVATE MEMBERS ============= //

  const _propsKeyLock = 'PropertiesLock'
  const _propsKeyDispatched = 'Dispatched'
  const _propsKeyPending = 'Pending'
  const _propsKeyFileRelativePaths = 'FileRelativePaths'

  // Not really necessary for a singleton, but in case code is changed later
  var _internals = new WeakMap()

  const _cleanUp = (exceptProp = null) => {
    log('Enter _cleanUp', exceptProp)
    Trigger.deleteAll()
    if (exceptProp) {
      ScriptProps.deleteAllExcept(exceptProp)
    } else {
      ScriptProps.deleteAll()
    }
  }

  const _catalogFiles = (folder, mimeType, relativePath = []) => {
    // returns IDs of all matching files in folder, depth first
    log(
      'Enter _catalogFiles',
      folder.getName(),
      mimeType,
      relativePath.join('/'),
    )
    let fileIds = []
    let fileRelativePaths = {}
    const folders = folder.getFolders()
    let subFolder
    while (folders.hasNext()) {
      subFolder = folders.next()
      const results = _catalogFiles(subFolder, mimeType, [
        ...relativePath,
        subFolder.getName(),
      ])
      fileIds = fileIds.concat(results.fileIds)
      fileRelativePaths = { ...fileRelativePaths, ...results.fileRelativePaths }
    }
    const files = folder.getFilesByType(mimeType)
    while (files.hasNext()) {
      const fileId = files.next().getId()
      fileIds.push(fileId)
      fileRelativePaths[fileId] = relativePath
    }
    return { fileIds: fileIds, fileRelativePaths: fileRelativePaths }
  }

  const _getQueues = () => {
    const pending = ScriptProps.getJson(_propsKeyPending)
    const dispatched = ScriptProps.getJson(_propsKeyDispatched)
    log('Exit _getQueues', pending, dispatched)
    // Note: Empty lists in Javascript are truthy, but if Properties have been deleted by another thread they'll be null here, which are falsey
    return { pending: pending || [], dispatched: dispatched || [] }
  }
  const _setQueues = (pending, dispatched) => {
    log('Enter _setQueues', pending, dispatched)
    ScriptProps.setAsJson(_propsKeyPending, pending)
    ScriptProps.setAsJson(_propsKeyDispatched, dispatched)
  }

  const _getPropsLock = maxDurationOneFileMs => {
    // will block until lock available or lock times out (because a script may be killed while holding a lock)
    const t0 = Now.asTimestamp()
    while (
      ScriptProps.getNum(_propsKeyLock) + maxDurationOneFileMs >
      Now.asTimestamp()
    ) {
      Utilities.sleep(2000)
    }
    ScriptProps.set(_propsKeyLock, Now.asTimestamp())
    log(`Exit _getPropsLock: took ${Now.asTimestamp() - t0}ms`)
  }
  const _releasePropsLock = () => {
    ScriptProps.delete(_propsKeyLock)
    log('Exit _releasePropsLock')
  }

  return ParallelFileIterator
})()

const log = (...args) => {
  // easier to turn off, json harder to read but easier to hack with
  console.log(args.map(arg => JSON.stringify(arg)).join(';'))
}

class Trigger {
  // Script triggering facade

  static create(functionName, everyMinutes) {
    return ScriptApp.newTrigger(functionName)
      .timeBased()
      .everyMinutes(everyMinutes)
      .create()
  }
  static delete(e) {
    if (typeof e !== 'object') return log(`${e} is not an event object`)
    if (!e.triggerUid)
      return log(`${JSON.stringify(e)} doesn't have a triggerUid`)
    ScriptApp.getProjectTriggers().forEach(trigger => {
      if (trigger.getUniqueId() === e.triggerUid) {
        log('deleting trigger', e.triggerUid)
        return ScriptApp.delete(trigger)
      }
    })
  }
  static deleteAll() {
    // Deletes all triggers in the current project.
    var triggers = ScriptApp.getProjectTriggers()
    for (var i = 0; i < triggers.length; i++) {
      ScriptApp.deleteTrigger(triggers[i])
    }
  }
}

class ScriptProps {
  // properties facade
  static set(key, value) {
    if (value === null || value === undefined) {
      ScriptProps.delete(key)
    } else {
      PropertiesService.getScriptProperties().setProperty(key, value)
    }
  }
  static getStr(key) {
    return PropertiesService.getScriptProperties().getProperty(key)
  }
  static getNum(key) {
    // missing key returns Number(null), ie, 0
    return Number(ScriptProps.getStr(key))
  }
  static setAsJson(key, value) {
    return ScriptProps.set(key, JSON.stringify(value))
  }
  static getJson(key) {
    return JSON.parse(ScriptProps.getStr(key))
  }
  static delete(key) {
    PropertiesService.getScriptProperties().deleteProperty(key)
  }
  static deleteAll() {
    PropertiesService.getScriptProperties().deleteAllProperties()
  }
  static deleteAllExcept(key) {
    PropertiesService.getScriptProperties()
      .getKeys()
      .forEach(curKey => {
        if (curKey !== key) ScriptProps.delete(key)
      })
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-11T16:39:16.823

如果您是企业客户，现在可以注册抢先体验[App Maker](https://developers.google.com/apps-script/guides/apps-script-eap)，其中包括[灵活配额](https://developers.google.com/apps-script/guides/services/quotas#flexible_quotas_early_access)。

> 在灵活的配额制度下，这种硬配额限制被取消了。脚本在达到配额限制时不会停止。相反，它们会延迟到配额可用，此时脚本执行会恢复。一旦开始使用配额，它们就会以固定速率重新填充。为了合理使用，脚本延迟很少见。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-28T02:34:03.043

如果您将 G Suite 作为**Business、Enterprise 或 EDU**客户使用，则运行脚本的执行时间设置为：

**30 分钟 / 执行**

请参阅：[https ://developers.google.com/apps-script/guides/services/quotas](https://developers.google.com/apps-script/guides/services/quotas)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-18T21:46:30.377

这个想法是从脚本中优雅地退出，保存您的进度，创建一个触发器以从您离开的地方重新开始，根据需要重复多次，然后在完成后清理触发器和任何临时文件。

这是关于这个主题[的详细文章。](https://medium.com/geekculture/bypassing-the-maximum-script-runtime-in-google-apps-script-e510aa9ae6da?sk=ca2b3c4d2fa429e02ba5f81a94d0c780)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-12T06:07:46.717

正如许多人提到的，此问题的通用解决方案是跨多个会话执行您的方法。我发现这是一个常见问题，我需要循环进行大量迭代，并且我不希望编写/维护[创建新会话的样板文件](https://stackoverflow.com/a/8608327/35690)的麻烦。

因此，我创建了一个通用解决方案：

```
/**
 * Executes the given function across multiple sessions to ensure there are no timeouts.
 *
 * See https://stackoverflow.com/a/71089403.
 * 
 * @param {Int} items - The items to iterate over.
 * @param {function(Int)} fn - The function to execute each time. Takes in an item from `items`.
 * @param {String} resumeFunctionName - The name of the function (without arguments) to run between sessions. Typically this is the same name of the function that called this method.
 * @param {Int} maxRunningTimeInSecs - The maximum number of seconds a script should be able to run. After this amount, it will start a new session. Note: This must be set to less than the actual timeout as defined in https://developers.google.com/apps-script/guides/services/quotas (e.g. 6 minutes), otherwise it can't set up the next call.
 * @param {Int} timeBetweenIterationsInSeconds - The amount of time between iterations of sessions. Note that Google Apps Script won't honor this 100%, as if you choose a 1 second delay, it may actually take a minute or two before it actually executes.
 */
function iterateAcrossSessions(items, fn, resumeFunctionName, maxRunningTimeInSeconds = 5 * 60, timeBetweenIterationsInSeconds = 1) {
  const PROPERTY_NAME = 'iterateAcrossSessions_index';
  let scriptProperties = PropertiesService.getScriptProperties();
  let startTime = (new Date()).getTime();

  let startIndex = parseInt(scriptProperties.getProperty(PROPERTY_NAME));
  if (Number.isNaN(startIndex)) {
    startIndex = 0;
  }

  for (let i = startIndex; i < items.length; i++) {
    console.info(`[iterateAcrossSessions] Executing for i = ${i}.`)
    fn(items[i]);

    let currentTime = (new Date()).getTime();
    let elapsedTime = currentTime - startTime;
    let maxRunningTimeInMilliseconds = maxRunningTimeInSeconds * 1000;
    if (maxRunningTimeInMilliseconds <= elapsedTime) {
      let newTime = new Date(currentTime + timeBetweenIterationsInSeconds * 1000);
      console.info(`[iterateAcrossSessions] Creating new session for i = ${i+1} at ${newTime}, since elapsed time was ${elapsedTime}.`);
      scriptProperties.setProperty(PROPERTY_NAME, i+1);
      ScriptApp.newTrigger(resumeFunctionName).timeBased().at(newTime).create();
      return;
    }
  }

  console.log(`[iterateAcrossSessions] Done iterating over items.`);
  // Reset the property here to ensure that the execution loop could be restarted.
  scriptProperties.deleteProperty(PROPERTY_NAME);
} 
```

您现在可以很容易地使用它，如下所示：

```
let ITEMS = ['A', 'B', 'C'];

function execute() {
  iterateAcrossSessions(
    ITEMS,
    (item) => {
      console.log(`Hello world ${item}`);
    }, 
    "execute");
} 
```

它会自动为 ITEMS 中的每个值执行内部 lambda，并根据需要在会话中无缝传播。

例如，如果您使用 0 秒的 maxRunningTime，它将跨 4 个会话运行，并具有以下输出：

```
[iterateAcrossSessions] Executing for i = 0.
Hello world A
[iterateAcrossSessions] Creating new session for i = 1. 
```

```
[iterateAcrossSessions] Executing for i = 1.
Hello world B
[iterateAcrossSessions] Creating new session for i = 2. 
```

```
[iterateAcrossSessions] Executing for i = 2.
Hello world C
[iterateAcrossSessions] Creating new session for i = 3. 
```

```
[iterateAcrossSessions] Done iterating over items. 
```

# haskell - 如何使用函数依赖和存在量化来为我的类型删除不必要的参数

> ID：14450822
> 
> 赞同：8
> 
> 时间：2013-01-22T02:53:24.513
> 
> 标签：haskell, types, existential-type, gadt

在我正在研究的 HLearn 库中，我有一些容器数据类型，如下所示：

```
data (Model params model) => Container' params model = Container'
    { baseparams :: params
    , basemodel  :: model
    } 
```

问题是这种类型使用起来很尴尬，因为`params`并且`model`两者都是彼此唯一确定的：

```
class Model params model | params -> model, model -> params 
```

所以如果我在指定类型时不必同时指定它们会更方便。编译器*应该*能够自动为我完成。

我解决这个问题的想法是创建一个使用存在量化的类型别名：

```
type Container model = forall params . (Model params model) => Container' params model 
```

但这不起作用。如果我像平常一样创建一个`Container'`实例，一切正常：

```
data ContainerParams params = ContainerParams params

instance (Model params model) => Model (ContainerParams params) (Container' params model) 
```

但是当我使用我的`Container`类型时：

```
instance (Model params model) => Model (ContainerParams params) (Container model) 
```

ghc 爆炸：

> 非法多态或限定类型：容器模型在“模型（ContainerParams params）（容器模型）”的实例声明中

我不知道这个错误信息是什么意思。是否有可能以某种方式修复我的解决方案以创建一种`Container`无需指定参数的类型？

* * *

编辑：我应该注意，将`forall`语句移动到`Container'`声明中似乎需要一堆`unsafeCoerce`s，所以这似乎是一个糟糕的解决方案。

此外，我可以更改`type Container`为`data Container`并让事情正常工作，但这需要我重新声明`Conatiner'`属于其中的所有实例，我不想这样做。我有许多遵循这种模式的不同类型，因此似乎应该有一种通用的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T03:50:54.943

我不确定您是否想要普遍或存在量化。无论哪种方式，最好将其包装成新鲜的类型。

强烈建议：不要对普通数据类型使用约束头。他们会让你的生活更艰难，而不是更轻松。他们没有完成任何有用的事情。

## 存在的

```
{-# LANGUAGE GADTs #-}
data Container' params model = Container'
{ baseparams :: params
, basemodel  :: model
}
data Container p m where
  Container :: Model params model => Container' params model -> Container params model 
```

## 普遍的

```
{-# LANGUAGE Rank2Types #-}
data Container' params model = Container'
{ baseparams :: params
, basemodel  :: model
}
newtype Container model = Container (forall params . Model params model => Container' params model) 
```

类型类实例中不能有通用类型或限定类型。所以

```
instance Model (ContainerParams params) (Container model) 
```

不允许，因为类型同义词扩展为

```
instance Model (ContainerParams params) (forall ...) 
```

在我的 GADT 解决方案中，我将`param`和都`model`视为参数。这是因为要知道一些重要的事情：函数依赖不是汇合的！而且，为了类型检查，编译器不会假定它们是汇合的。函数依赖仅在指导约束求解器时有用（在某种程度上它们类似于序言中的“切割”等额外的逻辑结构）。如果您想要汇合，请使用`TypeFamilies`.

```
class Model model where
  type Param model
  ... 
```

或者做它的真棒方式

```
class (model ~ (TheModel param),param ~ (TheParam model)) => Model model param where
    type TheModel param
    type TheParam model 
```

它与fundep具有相同的双向性。而且，这将让您将您的存在实例编写为

```
data Container model where
   Container :: Model model param => Container' model param -> Container model 
```

然后你可以做一些事情，比如组合两个具有相同`model`类型的容器，知道存在量化的`params`将匹配。使用它，您可以定义

```
data HasParam model where
   HasParam :: Model model param => HasParam model

data GADTContainer model where
   GADTContainer :: Model model param => Container' model param -> GADTContainer model

newtype NewContainer model 
   = NewContainer (forall param. Model model param => Container' model param) 
```

然后元组`(HasParam model, NewContainer model)`可证明是同构的，`GADTContainer model`这也解释了这些类型之间的关系

无论如何，一旦你处理好了，你就可以使用适当的包装类型来定义你的实例。

# django - 在基于类的视图中使用 mixins - Django

> ID：14450827
> 
> 赞同：5
> 
> 时间：2013-01-22T02:53:56.323
> 
> 标签：django, django-class-based-views

所以我开始使用基于通用类的视图，我得说，它们确实节省了时间。但我想知道是否可以使用 mixins 来提供通用 impl 而不必在每个视图中编写代码。例如，我有一个`ListView`and `DetailView`。为了限制列表和编辑，我可以覆盖`get_queryset()`并由登录用户过滤它。但正如你猜到的，我必须在每个视图中都这样做，

```
class JediListView(ListView):
    def get_queryset(self):
        q = <call super>.filter(user=request.user) #assume i have 'login_required' in the urls

class JediDetailView(DetailView):
    def get_queryset(self):
        q = <call super>.filter(user=request.user) #assume i have 'login_required' in the urls 
```

我可以为每个视图创建一个新的父类，但我仍然会重复代码。

```
class RepublicListView(ListView):
     # override get_queryset code as above

class JediListView(RepublicListView):

# repeat fot DetailView, DeleteView, UpdateView 
```

我想知道 mixins，我完全确定 mixins 是如何工作的 [来自 java 背景，所以我同时感到敬畏和恐惧]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T12:30:01.583

您实际上几乎自己找到了答案。您可以编写以下 Mixin：

```
class UserFilterMixin:
    def get_queryset(self):
        return <call super>.filter(user=self.request.user) 
```

然后在这样的类中使用它：

```
class RepublicListView(LoginRequiredMixin, UserFilterMixin, ListView): 
```

以此类推其他类...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T05:01:11.850

您可以使用`LoginRequiredMixin`django [-braces](http://django-braces.readthedocs.org/en/latest/index.html)。

```
from django.views.generic import ListView, DetailView

from braces.views import LoginRequiredMixin

class JediListView(LoginRequiredMixin, ListView):
    model = JediModel

class JediDetailView(LoginRequiredMixin, Detail):
    model = JediModel 
```

根据[DJANGO 的](http://django.2scoops.org/)`Chapter-8: Best Practices for Class-Based Views`两勺，

> **第三方包：** CBVs + django-braces 一起很棒 我们觉得 django-braces 是 Django CBVs 缺少的组件。它提供了一组清晰编码的 mixin，使 Django CBV 更容易和更快地实现。!e 下几章将在各种代码示例中演示它的 mixin。

# sql-server - “找不到请求的 .Net Framework 数据提供程序。它可能未安装。”

> ID：14450830
> 
> 赞同：4
> 
> 时间：2013-01-22T02:54:11.823
> 
> 标签：sql-server, asp.net-mvc, dataprovider

我知道有很多关于这个错误的其他帖子，但没有一个能够对我的问题提供任何帮助或帮助。我正在使用与 SqlExpress 的直接连接，因此没有特殊的 Oracle 或 MySQL 数据库或任何东西。看起来这应该像手套一样合身。

所以场景是这样的，我创建了一个由几个项目组成的解决方案；存储库、数据 (EF5.0)、实用程序、测试项目和 MVC Web 应用程序。目标是通过使用 EF5 的存储库项目中的存储库以及来自测试项目和 MVC 应用程序的一些存储库，通过数据类简单地访问底层 SQL Express 数据库。

测试项目可以正常工作，并且能够毫无问题地访问和更新数据库。

然而，MVC Web 项目正在抛出“无法找到请求的 .Net Framework 数据提供程序。它可能没有安装。” 错误，我不明白，因为它使用与测试项目相同的连接字符串。

```
[ArgumentException: Unable to find the requested .Net Framework Data Provider.  It may not be installed.]
   System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) +1426271
   WebMatrix.Data.DbProviderFactoryWrapper.CreateConnection(String connectionString) +64
   WebMatrix.Data.<>c__DisplayClass15.<OpenConnectionStringInternal>b__14() +16
   WebMatrix.Data.Database.get_Connection() +19
   WebMatrix.Data.Database.EnsureConnectionOpen() +12
   WebMatrix.Data.Database.QueryValue(String commandText, Object[] args) +63
   WebMatrix.WebData.DatabaseWrapper.QueryValue(String commandText, Object[] parameters) +14
   WebMatrix.WebData.SimpleMembershipProvider.GetUserId(IDatabase db, String userTableName, String userNameColumn, String userIdColumn, String userName) +232
   WebMatrix.WebData.SimpleMembershipProvider.ValidateUserTable() +85 
```

我有 ...

1.  在 web.config 中注册了 System.Data.SqlClient。
2.  [根据本文](http://zeeshanumardotnet.blogspot.com/2011/11/unable-to-find-requested-net-framework.html)验证 GAC 中存在 System.Data 的注册版本 (2.0.0.0)
3.  确保连接字符串中没有拼写错误。

这是我在 web.config 中的内容...

```
 <connectionStrings>
    <add name="DBCatalogContext" 
         connectionString="metadata=res://*/DBCatalog.csdl|
                                    res://*/DBCatalog.ssdl|
                                    res://*/DBCatalog.msl;
                                    provider=System.Data.SqlClient;
                                    provider connection string=&quot;data source=.\SQLEXPRESS;
                                                                     initial catalog=DBCatalog;
                                                                     integrated security=True;
                                                                     multipleactiveresultsets=True;
                                                                     App=EntityFramework&quot;" 
         providerName="System.Data.EntityClient" />
  </connectionStrings>

  <system.data>
    <DbProviderFactories>
      <add name="SqlClient Data Provider" 
           invariant="System.Data.SqlClient" 
           description=".Net Framework Data Provider for SqlServer" 
           type="System.Data.SqlClient.SqlClientFactory, 
                 System.Data, 
                 Version=2.0.0.0, 
                 Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
    </DbProviderFactories>
  </system.data> 
```

我看到的唯一对我没有意义的是，当我选择“References”文件夹下的“System.Data”引用并查看它说它是版本 4.0.0.0 的属性时，但是当我更改配置站点的“DbProviderFactories”部分中的版本我仍然收到错误消息。此外，我什至没有在有效的测试项目中看到对该库的引用。

我相信这是一个疏忽，或者我缺少一些配置设置，但我不知道在这一点上还能看到哪里，所以任何帮助都将不胜感激。

谢谢，G

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T05:41:05.433

当我最初发布时，我显然遗漏了一些最终相关的信息。这包括会员服务抛出错误的事实；特别是 ... SimpleMembershipInitializer ... 最初这个类指定了连接字符串 ... "DefaultConnection" 在 web.config 中定义，在初始化数据库连接时使用。

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "Users", "UserId", "UserName", autoCreateTables: false); 
```

我已将其更改为使用添加到 web.config 中的“DBCatalogContext”连接字符串，并认为我会使用这个单一的连接字符串。当然，问题在于我添加的新连接字符串是一个实体框架连接字符串，会员服务无法识别它，从而导致数据提供程序错误。

除了实体框架连接字符串之外，我只是添加了原始的常规连接字符串，现在一切正常。那么与**这个**问题有关的一切......

```
<connectionStrings>
    <add name="DBCatalogContext" 
         connectionString="metadata=res://*/DBCatalog.csdl|
                                    res://*/DBCatalog.ssdl|
                                    res://*/DBCatalog.msl;
                                    provider=System.Data.SqlClient;
                                    provider connection string=&quot;data source=.\SQLEXPRESS;
                                                                     initial catalog=DBCatalog;
                                                                     integrated security=True;
                                                                     multipleactiveresultsets=True;
                                                                     App=EntityFramework&quot;" 
         providerName="System.Data.EntityClient" />

    <add name="DefaultConnection" 
         providerName="System.Data.SqlClient" 
         connectionString="data source=.\SQLEXPRESS;initial catalog=DBCatalog;integrated security=True;multipleactiveresultsets=True;App=EntityFramework" />

  </connectionStrings> 
```

我希望其他人可以发现这很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T09:04:54.157

我有完全相同的问题。我正在执行以下操作：我将`UserProfile`模型扩展为具有新属性`Email`.

我虽然还必须将此`Email`列添加到此调用中：

```
WebSecurity.InitializeDatabaseConnection("AgileBoardDB", "UserProfile", "UserId", "UserName", "Email", autoCreateTables: true); 
```

这从来没有奏效，我总是得到“......找不到提供者”。我尝试了一切都没有运气。

我发现 EF 足够智能并自动创建`Email`列，因此我从中删除了额外的`Email`参数，`WebSecurity.InitializeDatabaseConnection`现在一切正常。

PS：我使用相同的 EF 连接字符串连接到我的数据库。

# wordpress - 如何从 wp_get_post_terms 返回的数组中提取单个值

> ID：14450832
> 
> 赞同：1
> 
> 时间：2013-01-22T02:54:21.573
> 
> 标签：wordpress, return-value, taxonomy, term

在 Wordpress 中，我想在分类“章节”中显示附加到帖子的术语]。我可以使用获取帖子的分类信息

```
$sectiondata = wp_get_post_terms($post->ID, 'chapters', array("fields" => "all")); 
```

然后使用

```
print_r $sectiondata; 
```

我可以显示返回的值数组。

但是，如何将术语“名称”的值回显到页面？我认为这应该是这样的：

```
echo $sectiondata->name; 
```

但这什么也没返回，所以我显然不明白如何从数组中提取这个值。我四处搜索了示例，但没有看到任何解释如何在页面上显示值的内容，或者更好地说明了如何从数组中提取值。我试过使用普通的php方法

```
print($sectiondata['name']); 
```

但这也不会返回任何东西。

我在哪里可以找到有关如何从数组中提取值的说明。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:48:01.033

问题是您没有遍历返回的数组。在我向您展示如何使用 wp_get_post_terms 执行此操作之前，您是否尝试过使用 get_terms 函数？我相信这对你来说可能是一个更好的方法：

```
$terms = get_terms('chapters');
echo '<ul>';
foreach ($terms as $term) {
    echo '<li><a href="'.get_term_link($term->slug, 'species').'">'.$term->name.'</a></li>';
}
echo '</ul>'; 
```

资料来源：[http ://codex.wordpress.org/Function_Reference/get_terms](http://codex.wordpress.org/Function_Reference/get_terms)

...

如果这对您不起作用，请查看如何使用 wp_get_post_terms 做几乎相同的事情：

```
echo "<ul>";
$terms = wp_get_post_terms( $post->ID, 'chapters');
foreach($terms as $term) {
    echo "<li><a href='".get_term_link($term)."' title='".$term->name."'>".$term->name."</a></li>";
}
echo "</ul>"; 
```

[http://codex.wordpress.org/Function_Reference/wp_get_post_terms](http://codex.wordpress.org/Function_Reference/wp_get_post_terms)

我希望这可以帮助你！如果上面的代码示例有任何问题，请告诉我。

# c++ - CGridListCtrlEx 网格控制器中设置的密码列

> ID：14450837
> 
> 赞同：0
> 
> 时间：2013-01-22T02:55:24.910
> 
> 标签：c++, mfc

我正在为 MFC 应用程序使用[CGridListCtrlEx控制器。](http://www.codeproject.com/Articles/29064/CGridListCtrlEx-Grid-Control-Based-on-CListCtrl)我需要在网格一侧设置一个可编辑的密码列。我已经设法在网格中创建了一个可编辑的列，但需要一些帮助才能使它像密码字段（否则单元格就像一个文本字段，通过典型字符而不是'*'显示文本）。这是我当前的代码。

```
CGridListCtrlEx dirListView;
CGridColumnTrait* pTrait = new CGridColumnTraitEdit;    
dirListView.InsertColumnTrait(1, _T("Password"), LVCFMT_LEFT, 150, 0, pTrait);
dirListView.SetItem(0, 1, LVIF_TEXT, _T("something"), -1, 0, 0, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:36:50.603

为什么不直接在codeproject上问作者呢？

查看代码，我发现这很容易。在您创建`pTrait`使用`SetStyle()`方法后直接设置 ES_PASSWORD 样式，如下所示：

```
((CGridColumnTraitEdit*)pTrait)->SetStyle(((CGridColumnTraitEdit*)pTrait)->GetStyle() | ES_PASSWORD); 
```

# android - 在 manifest.xml 文件中使用权限与 android 权限的权限

> ID：14450839
> 
> 赞同：56
> 
> 时间：2013-01-22T02:55:40.650
> 
> 标签：android, permissions, manifest

我注意到清单文件中有两种类型的权限，“permission”和“uses-permission”，如下图所示；

```
 <permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS" />

 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

对于以下 4 个权限，当我将它们放入 manifest.xml 文件时，我应该使用哪些权限？`uses-permissions`还是`permissions`？

```
android.permission.ACCESS_NETWORK_STATE

android.permission.ACCESS_WIFI_STATE

android.permission.INTERNET

android.permission.CHANGE_WIFI_MULTICAST_STATE 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-22T02:57:17.807

为了

```
<permission> 
```

该[文档](http://developer.android.com/guide/topics/manifest/manifest-intro.html)指出：

> 声明可用于限制访问此应用程序或其他应用程序的特定组件或功能的安全权限。

因此，由于您正在访问 Android 的权限，因此您需要`uses-permission`。此元素的文档指出：

> 请求必须授予应用程序以使其正确运行的权限。

`<permission>`通常在进行自定义权限时使用（例如，在创建其他应用程序可以绑定的应用程序时，必须限制访问权限），并且`<uses-permission>`在您的应用程序实际上需要它通常没有的权限时使用。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-04-19T20:52:55.543

让我们从“uses-permission...”开始：假设您想在应用程序中使用 GoogleMap 作为示例来查找任何办公室（如银行或任何其他办公室）的最近位置。你需要互联网。因此，您需要授予您的 android 设备访问 INTERNET 的权限。这是通过使用名为 .

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

现在来到“permission..”：它的作用是声明一个安全权限，可用于限制对该应用程序或其他应用程序的特定组件或功能的访问。如果您的应用程序需要其他应用程序的某些资源或某些功能，您可以通过给出特定的类或包来使用。

```
 <permission android:name="com.example.project.DEBIT_ACCT" . . . /> 
```

谢谢。有关更多信息，您可以阅读
[http://developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-02T03:38:04.990

简而言之，您需要的是使用许可声明。

[Androird Document](http://developer.android.com/guide/topics/security/permissions.html)现在有一个专门的页面来讨论这两种用法。

在*使用权限*部分，它解释说

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.app.myapp" >
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    ...
</manifest> 
```

用于声明您要使用的权限。

在*定义和执行权限*时，您可以看到

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.me.app.myapp" >
    <permission android:name="com.me.app.myapp.permission.DEADLY_ACTIVITY"
        android:label="@string/permlab_deadlyActivity"
        android:description="@string/permdesc_deadlyActivity"
        android:permissionGroup="android.permission-group.COST_MONEY"
        android:protectionLevel="dangerous" />
    ...
</manifest> 
```

用于定义您自己的权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-28T09:57:58.887

用外行的话来说，

`<uses-permission>`指定您的应用程序需要访问某个组件的权限，该权限受作为该组件所有者的另一个应用程序的限制。

`<permission>`指定您对组件施加的限制是组件所有者。

# javascript - 为什么当我使用 XMLHttpRequest 发送 GET 请求时，我得到两个 readyState 1？

> ID：14450840
> 
> 赞同：4
> 
> 时间：2013-01-22T02:55:54.420
> 
> 标签：javascript, ajax, xmlhttprequest

```
<div id="myDiv"></div>
<script>                    
    var xmlhttp = new XMLHttpRequest();
    document.getElementById("myDiv").innerHTML += xmlhttp.readyState + "<br/>";
    xmlhttp.onreadystatechange = function() {
        document.getElementById("myDiv").innerHTML += xmlhttp.readyState + "<br/>";
    }
    xmlhttp.open("GET", "example.com", true);
    xmlhttp.send();
</script> 
```

我得到这个显示：

```
0
1
1
2
3
4 
```

为什么有两个1？

我的浏览器是firefox 17.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:48:54.133

为 XML HTTP 对象定义了就绪状态：[https](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#Properties) ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#Properties 。

但是每个浏览器的就绪状态序列似乎都不同，因此您不能依赖代码中的特定状态序列。

```
FF 19: 0, 1, 1, 2, 3, 4

Chrome 24: 0, 1, 2, 3, 4

Opera 12.12: 0, 1, 2, 3, 4

Safari 5.1: 0, 1, 2, 3, 4

IE 9: 0, 1, 1, 2, 3, 4 
```

您可以[**在这里**](http://jsfiddle.net/S55vq/1/?run)测试您的浏览器。

# c# - OpenAuth :: 我需要将数据库中的 OpenAuth 用户表复制到我自己的数据库吗

> ID：14450841
> 
> 赞同：1
> 
> 时间：2013-01-22T02:55:58.527
> 
> 标签：c#, entity-framework, oauth, dotnetopenauth

这是 OpenAuth 登录机制。提供程序在 web.config 中列出。

```
protected void RegisterUser_CreatedUser(object sender, EventArgs e)
    {
        FormsAuthentication.SetAuthCookie(RegisterUser.UserName, createPersistentCookie: false);

        string continueUrl = RegisterUser.ContinueDestinationPageUrl;
        if (!OpenAuth.IsLocalUrl(continueUrl))
        {
            continueUrl = "~/";
        }
        Response.Redirect(continueUrl);
    } 
```

我的问题是关于在我的代码中加入用户参与的语句示例是

```
select * from ResourcesAvailablePerUser,Users
where resourceid = @resourceid
and Users.userid = @userid
and Users.userid = ResourcesAvailablePerUser.userid 
```

由于 OpenAuth 数据库与我的数据库不同，因此我的数据库中没有用户表。

所以我的进一步问题是我是否必须通过将复制代码添加到开放代码并在我自己的数据库中维护一个复制的用户表来修改上面的代码..基本上我不明白为什么我的用户表应该在我自己的数据库之外维护如果我是对的。

> 这是验证用户的 OpenAuth 代码

```
 protected void RegisterUser_CreatedUser(object sender, EventArgs e)
        {
            FormsAuthentication.SetAuthCookie(RegisterUser.UserName, createPersistentCookie: false);

`//DO I HAVE TO ADD CODE HERE TO REPLICATE THE TABLE OF USERS IN MY OWN DB.`

            string continueUrl = RegisterUser.ContinueDestinationPageUrl;
            if (!OpenAuth.IsLocalUrl(continueUrl))
            {
                continueUrl = "~/";
            }
            Response.Redirect(continueUrl);
        } 
```

# algorithm - 什么算法可以用备选方案分析依赖关系？

> ID：14450846
> 
> 赞同：1
> 
> 时间：2013-01-22T02:56:33.707
> 
> 标签：algorithm, dependencies, graph-theory, graph-algorithm

我有一组相互依赖的元素。这些依赖关系可能是严格的，例如。`a`取决于`b`和`c`; 或者某些元素可能有替代品，例如。`s`取决于`t`或`u`。没有循环依赖。

我正在尝试对依赖信息做两件事：

1.  确定给定的一组元素是否已解决所有依赖关系
2.  列出所有可能的完全解析的元素集

（事实上​​ 2 在给定 1 的情况下是微不足道的，因为我可以在资源允许的情况下生成所有排列并检查它们。不过可能有更好的算法。）

是否有适用于具有替代依赖项的元素的算法？我发现很多只考虑严格依赖关系，但我不知道足够的术语来缩小我的搜索范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:17:59.487

假设您的元素列在**L**中。**然后，对于L**中的每个元素**e**，您验证所有*直接*依赖关系都已解决。要验证每个元素**e**，您可以遍历**e的依赖项列表****D**并确保**D**中的所有元素**d**都在L**中**找到。为了解决替代方案的情况，现在将每个**d**视为其自身的替代依赖项列表。

 *******```
for each d in e.D 
    d_ok = false
    for each alt_d in d
        if alt_d in L: d_ok = true, break
    if not d_ok: return false
return true 
```

要列出满足您的依赖关系的所有可能集合，您可以使用排列索引以所有可能的不同顺序遍历所有`alt_d`s。**您可以预先生成这些索引，因为您知道L**的每个元素的备选数量。您可以在 MATLAB 中签出`ndgrid`，如以下代码所示，假设元素**a**具有三个依赖项，而**b**具有两个：

```
[idx_a, idx_b] = ndgrid(1:3, 1:2);
idx = [idx_a(:), idx_b(:)]; 
```

有关如何使用此类预计算索引的参考，与您要实现的语言无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:27:26.950

对于非严格依赖，如果它只有两个选择，例如。s 取决于 t 或 u（不再），您可以将其视为[2SAT-problem](http://en.wikipedia.org/wiki/2SAT)并解决它。*******

# javascript - 无法在 jquery 中选择不透明度？

> ID：14450847
> 
> 赞同：0
> 
> 时间：2013-01-22T02:56:37.320
> 
> 标签：javascript, jquery, css

当容器 div（在本例中为 #header）的不透明度为 0.5 时，我想在链接列表上覆盖我的 CSS 悬停操作。我很难过。

这是我的 jQuery：

```
 jQuery(window).scroll(function() {
    if(jQuery(window).scrollTop() > 200) {
        jQuery("#header").css('opacity', '0.5');
    } else {
        jQuery("#header").css('opacity','1');
    }
  });

  if(jQuery("#header").css("opacity") != 1){
      jQuery("#nav li a").hover(function(){
        jQuery(this).css("color","rgba(63, 131, 202, 1)");
      });
  } 
```

这是我的 CSS：

```
#nav li a {
    color:rgba(63, 131, 202, 1);
    transition: color 1s;
    -webkit-transition: color 1s;
    -o-transition: color 1s;
    -moz-transition: color 1s;
}

#nav li a:hover {
    color:rgba(63, 131, 202, 0.7);
    transition: color 1s;
    -webkit-transition: color 1s;
    -o-transition: color 1s;
    -moz-transition: color 1s;
} 
```

我也尝试过在 jQuery 中用 none 覆盖每个转换，但它不起作用。我怎么能这样做？当不透明度不是 1 时，我应该尝试覆盖所有非悬停属性，然后像上面那样覆盖悬停属性吗？不知道该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:06:09.293

作为一种解决方法，您可以通过以下方式获得更大的成功：

```
jQuery("#header").fadeTo(0, 0.5); 
```

代替：

```
jQuery("#header").css('opacity', '0.5'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:06:29.350

在这种情况下，在调试器中单步调试代码很有用。在这个特定场景中，您会发现 jQuery.fn.css() 会返回一个字符串，即使您正在查询一个数字 css 属性，所以您需要 parseFloat() 结果。

```
if(parseFloat(jQuery("#header").css("opacity")) != 1) 
```

话虽如此，我强烈建议完全放弃对样式属性的查询，而是使用类来管理您的状态。演示不是信息！作为奖励，您的链接悬停可能只是基于类名的基于 css 的覆盖，而不是基于 javascript 的悬停。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T03:10:04.413

我建议在 CSS 中保留尽可能多的样式，并简单地修改 a`class`在需要更改的元素上（或者在层次结构中更高的元素上，例如`body`，如果它要更改几个元素）。这是一个例子：

**Javascript：**

```
jQuery(window).scroll(function() {
    jQuery(document.body).toggleClass("scrolledDown", jQuery(window).scrollTop() > 200)
}); 
```

**CSS**

```
#nav li a {
    color:rgba(63, 131, 202, 1);
    transition: color 1s;
    -webkit-transition: color 1s;
    -o-transition: color 1s;
    -moz-transition: color 1s;
}

#nav li a:hover {
    color:rgba(63, 131, 202, 0.7);
    transition: color 1s;
    -webkit-transition: color 1s;
    -o-transition: color 1s;
    -moz-transition: color 1s;
}

#header {
    opacity: 1;
}

body.scrolledDown #header {
    opacity: 0.5;
}

body.scrolledDown #nav li a:hover {
    color: rgba(63, 131, 202, 1);
} 
```

这将自动管理您的状态并将您的样式和 javascript 分开，这总是很好的。您不必将 添加`class`到`body`元素中，但我在这里这样做是为了一个简单的示例并且对您的 DOM 结构的其余部分缺乏了解。

# git - git merge 更新源分支上未更改的文件

> ID：14450852
> 
> 赞同：7
> 
> 时间：2013-01-22T02:57:46.360
> 
> 标签：git, git-merge

我正在努力理解以下行为如何在 git 中是一件好事。请参阅下面的示例，以帮助说明我的问题。很多时候，我的团队和我自己都在将更改/提交进入我们不想去那里的分支。

```
> git init sandbox && cd sandbox
> echo "data a" > a.txt && echo "data b" > b.txt
> git add -A && git commit -a -m "initial population"
[master (root-commit) d7eb6af] initial population
 2 files changed, 2 insertions(+)
 create mode 100644 a.txt
 create mode 100644 b.txt
> git branch branch1
> echo "more data a" >> a.txt && git commit -a -m "changed a.txt on master"
[master 11eb82a] changed a.txt on master
 1 file changed, 1 insertion(+)
> git branch branch2 && git checkout branch2
Switched to branch 'branch2'
> echo "more data b" >> b.txt && git commit -a -m "changed b.txt on branch2"
[branch2 25b38db] changed b.txt on branch2
 1 file changed, 1 insertion(+)
> git checkout branch1
Switched to branch 'branch1'
> git merge branch2
Updating d7eb6af..25b38db
Fast-forward
 a.txt | 1 +
 b.txt | 1 +
 2 files changed, 2 insertions(+) 
```

请注意，在上面，a.txt 在合并中更新，即使它在 branch2 上没有被触及/修改。在上述场景中，我希望 git 能够智能地识别出分支 2 上的 a.txt 没有更改，因此在将更新应用于分支 1 时，不要进行这些更改。

有什么我做错了吗？是的，我可以挑选，对于这个简单的例子，我知道我做了什么，但在实际情况下是不现实的，因为变化要大得多，你不知道可能会受到什么影响。

需要明确的是，我不希望 git 出现这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:06:54.703

如果上面的命令输入完整且正确，那么 git 是正确的。这是你所做的：

1.  创建了一个仓库（默认为分支“master”）
2.  向“master”添加了一个变更集（2 个新文件）
3.  创建了一个分支（“branch1”）但没有改变它
4.  在“master”上添加了一个变更集（更改了 a.txt）
5.  创建了一个分支（“branch2”）并更改为它（此分支包含修改的 a.txt）
6.  在“branch2”上添加了一个 chageset（更改为 b.txt）
7.  切换到“branch1”（包含两个未更改的原始文件）
8.  与“branch2”合并（快进）（应用了两个更改：a.txt 和 b.txt）

这正是您所描述的，也正是应该发生的事情。您可能出错的地方是认为您正在**更改“branch1”上的 a.txt，而**实际上您在创建“branch2”之前**在“master”上更改了它，**从而产生了在合并时从“master”神奇地出现在“branch1”上的错觉使用“branch2”，但实际上变化来自“branch2”。

如果您重复您的测试**，但在第 3 步切换到“branch1”**（`git checkout -b branch1`）而不是将 a.txt 的更改提交到“master”，我认为您会得到您期望的合并。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T04:37:51.280

'branch1' 和 'branch2' 只不过是提交指针。它们是特定时刻提交历史的状态。因此，当将“branch2”合并到“branch1”时，git 所做的只是建立一个共同的祖先并尝试将两棵树的更改一起应用。

来一张简单的图：

```
 branch1       E <- branch2
    |         /
    v        /
A - B - C - D <- master 
```

在上面的例子中，'branch1' 指向 commit`B`和 'branch2' 指向 commit `E`。这或多或少地描述了您在上面输入的操作顺序。如果您将 'branch2' 合并到 'branch1' 中，git 会在其中找到一个共同的祖先，`B`然后将存在于`B`和之间的所有历史记录应用`E`到 'branch1'，特别是提交`C`、`D`和`E`。

然而，你想要的只是`E`. 正如您已经确定的那样，一种（不好的）解决方案是挑选樱桃。一个更好的解决方案是将 'branch2' 重新定位到 'branch1' 上，从而重写 'branch2' 的历史记录以仅包含`E`过去 'branch1' 的提交：

```
git rebase --onto branch1 master branch2 
```

这正是您所寻求的结果，并读作“将最初基于 master 的分支 2 重新设置为分支 1”。`E`请注意，为简单起见，我将 'branch1' 指针排除在此图中，`E'`因为它的提交哈希已更改（这些图的常见约定）：

```
 E' <- branch2
      /
     /
A - B - C - D <- master 
```

您可以使用 获得类似的效果，然后从交互式 rebase 会话中`git checkout branch2 && git rebase -i B`删除提交。`C``D`

在我的上一份工作中，我们经常遇到孤立的功能分支的问题。在不同的时间从同一个生产分支中剪切，如果在没有变基的情况下合并，它们会拉动不需要的变化。作为一名集成经理，我经常将他们的历史重写到过去的一个共同点（最后一个生产版本），从而允许从头到尾进行干净的合并。这是许多可能的工作流程之一。最佳答案很大程度上取决于您的团队如何移动代码。例如，在 CI 环境中，有时并不那么重要，`C`并且`D`像您描述的那样与合并一起被拉动。

最后，请注意，如果`E`依赖于`C`or中的任何代码，当将“branch1”（现在包含更改集）`D`合并回“master”时，此解决方案将对您的历史记录造成严重破坏。`E'`如果您的工作流程是增量的，并且“branch1”和“branch2”涉及类似的功能和文件，那么合并冲突自然会出现。在这种情况下，可能需要仔细查看您团队的工作流程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T04:06:33.160

> a.txt 在合并中更新，即使它没有在 branch2 上被触及/修改

但它是先生，它是。运行所有命令但`git merge branch2`, 然后

```
$ cat a.txt
data a

$ git checkout branch2
Switched to branch 'branch2'

$ cat a.txt
data a
more data a 
```

> 我知道它在 branch2 中，但是在我分支后我没有修改/触摸它。

你承诺`more data a`. `master`然后，您`branch2`从`master`. 因此`branch2`也将包含`more data a`。

# php - php中的html2canvas自定义代理

> ID：14450854
> 
> 赞同：0
> 
> 时间：2013-01-22T02:58:23.480
> 
> 标签：php, proxy, html2canvas

这是我在这里的第一个问题，所以很好......

我正在尝试使用[html2canvas](http://html2canvas.hertzen.com/screenshots.html)最终获取远程站点的屏幕截图（用户提交的 url）。

问题是跨域安全功能。我无法从画布上读取，因为它被场外资产锁定。

解决方案是使用库中内置的代理功能。

有一些带有[python](https://github.com/niklasvh/html2canvas-proxy)和 node.js 版本的 github 项目，但我需要在 php 中完成。

关于如何实现该功能以及如何使其工作的主题有很多，但没有一个真正解释如何制作自己的代理。

我的问题有两个方面，PHP 中有没有现有的解决方案？如果没有，我有几个关于自己制作的问题：1.）代理的输出格式是什么？json对象？渲染的图像？base64 编码的数据字符串？2.) 这些文件是否需要保留在服务器上，或者它们是否可以被渲染然后消失（覆盖）？

这大致是我的想法：

```
$img_url = urldecode($_GET['url']);
$img_data = base64_encode(file_get_contents($img_url));
//shouldn't need it since it's not cross domain now, but a CORS header could be inserted
header('content-type: application/json; charset=utf-8');
json_encode("{$_GET['callback']}($img_data)"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:41:57.073

我找到了我的问题的答案。代理功能接受带有代理图像 url 的 jsonp 元素。它们确实需要保存在服务器上，同时

这是原始的，我稍后会更新它，但这是一个适用于 html2canvas 的 PHP 代理脚本

```
session_start();
//parse the url sent by the proxy function
//TODO: scrub the input
$img_url = urldecode($_GET['url']);

//test file type
//TODO: test for other cases that don't have a '.'
$pos = strrpos($img_url, '.', -1);
$ext = substr($img_url, $pos);

//set a dir for this request
function randomNumber()
{
    return substr(sha1(rand()), 0, 15);
}

if (!isset($_COOKIE["img_path"]))
{
    do{
        $random = randomNumber();
    }while (is_dir('images/' . $random));

    setcookie("img_path", $random, time()+3600);

} else {
    $random = $_COOKIE["img_path"];
}

is_dir('images/' . $random) ? '' : mkdir('images/' . $random, 0755);

//TODO:catch cases where a filename isn't the last element
$basename = basename($img_url);

$file = 'images/' . $random . '/' .  $basename;

//save the image
copy($img_url, $file);

//TODO: don't hardcode the url
$test_location = "http://osc.test/html2canvas2/" . $file;

header('Content-Type: application/javascript');

echo  "{$_GET['callback']}(" . json_encode($test_location) . ")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T16:56:10.583

如果其他人正在寻找一个简单的 PHP 代理，这里有一个链接到一个不错的“牛仔”Ben Alman：

[简单的 PHP 代理](http://benalman.com/code/projects/php-simple-proxy/examples/simple/)

# input - Ember.js 输入字段

> ID：14450862
> 
> 赞同：4
> 
> 时间：2013-01-22T02:58:56.493
> 
> 标签：input, ember.js

是否可以在 Ember.js 视图中使用标准 HTML5 输入字段，或者您是否被迫使用有限的内置字段选择，例如 Ember.TextField、Ember.CheckBox、Ember.TextArea 和 Ember.select？如果不使用内置视图，我似乎无法弄清楚如何将输入值绑定到视图：

```
Input: {{view Ember.TextField valueBinding="objectValue" }} 
```

具体来说，我需要一个数字字段。有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-22T03:06:06.813

**编辑：**这现在已经过时了，您可以通过以下方式实现上述所有目标：

`{{input value=objectValue type="number" min="2"}}`

* * *

### 过时的答案

您只需指定 TextField 的类型

```
Input: {{view Ember.TextField valueBinding="objectValue" type="number"}} 
```

如果你想访问数字字段的额外属性，你可以子类化`Ember.TextField`。

```
App.NumberField = Ember.TextField.extend({
  type: 'number',
  attributeBindings: ['min', 'max', 'step']
})

Input: {{view App.NumberField valueBinding="objectValue" min="1"}} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T15:20:02.653

@Bradley Priest 上面的回答是正确的，添加 type=number 确实有效。但是，我发现如果您需要输入十进制数字或想要指定最小/最大输入值，则需要向 Ember.TextField 对象添加一些属性。我只是扩展了 Ember.TextField 以向该字段添加一些属性：

```
//Add a number field
App.NumberField = Ember.TextField.extend({
    attributeBindings: ['name', 'min', 'max', 'step']
}); 
```

在模板中：

```
{{view App.NumberField type="number" valueBinding="view.myValue" min="0.0" max="1.0" step="0.01" }} 
```

et voile！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-23T02:36:33.623

这是我对它的正确输入：

```
 App.NumberField = Ember.TextField.extend({
        type: 'number',
        attributeBindings: ['min', 'max', 'step'],
        numericValue: function (key, v) {
            if (arguments.length === 1)
                return parseFloat(this.get('value'));
            else
                this.set('value', v !== undefined ? v+'' : '');
        }.property('value')
    }); 
```

我这样使用它：

```
{{view App.NumberField type="number" numericValueBinding="prop" min="0.0" max="1.0" step="0.01" }} 
```

将字符串传播到数字类型字段的其他系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-01T08:58:03.777

这就是我现在（目前是 Ember 1.6-beta5）使用组件（使用来自 @nraynaud 和 @nont 的想法）的方式：

```
App.NumberFieldComponent = Ember.TextField.extend
  tagName: "input"
  type: "number"

  numericValue: ((key, value) ->
    if arguments.length is 1
      parseFloat @get "value"
    else
      @set "value", (if value isnt undefined then "#{value}" else "")
  ).property "value"

  didInsertElement: ->
    @$().keypress (key) ->
      false  if (key.charCode isnt 46) and (key.charCode isnt 45) and (key.charCode < 48 or key.charCode > 57) 
```

然后，将其包含在模板中：

```
number-field numericValue=someProperty 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-05T20:58:49.610

您可能还希望阻止人们在那里输入任何旧字母：

```
App.NumberField = App.TextField.extend({
  type: 'number',
  attributeBindings: ['min', 'max', 'step'],
  numbericValue : function (key,v) {
    if (arguments.length === 1)
      return parseFloat(this.get('value'));
    else
      this.set('value', v !== undefined ? v+'' : '');
  }.property('value'),
  didInsertElement: function() {
    this.$().keypress(function(key) {
      if((key.charCode!=46)&&(key.charCode!=45)&&(key.charCode < 48 || key.charCode > 57)) return false;
    })  
  }
}) 
```

应得的信用：我扩展了nraynaud的答案

# r - 在 R 中使用 ggplot faceting 函数时出现绘图错误

> ID：14450864
> 
> 赞同：0
> 
> 时间：2013-01-22T02:59:23.500
> 
> 标签：r, plot, ggplot2

我正在尝试比较两个站的观察和建模数据集。一个站被称为站“红色”，另一个站被称为“蓝色”。我能够创建构面，但是当我尝试在一个构面中添加两个系列时，只有一个构面得到更新，而其他构面没有。

这意味着对于蓝色仅绘制一个系列，而对于红色则绘制两个系列。

我使用的代码如下：

```
 # install.packages("RCurl", dependencies = TRUE)
require(RCurl)
out <- postForm("https://dl.dropbox.com/s/ainioj2nn47sis4/watersurf1.csv?dl=1", format="csv")
watersurf <-  read.csv(textConnection(out))
watersurf[1:100,]

watersurf$coupleid <- factor(rep(unlist(by(watersurf$id,watersurf$group1,
                                           function(x) {ave(as.numeric(unique(x)),FUN=seq_along)}
                                           )),each=6239))

p <- ggplot(data=watersurf,aes(x=time,y=data,group=id))+geom_line(aes(linetype=group1),size=1)+facet_wrap(~coupleid)
p 
```

是否也可以在图中添加第三个系列但长度不等（即不同的间隔）？

输出是![在此处输入图像描述](../Images/9cf69414ae5e271de946f258167a3fea.png) 我按照此页面上的示例创建图表。 [http://www.ats.ucla.edu/stat/r/faq/growth.htm](http://www.ats.ucla.edu/stat/r/faq/growth.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:08:40.700

这是你想要的，

```
ggplot(data = watersurf, aes( x = time, y = data))
       + geom_line(aes(linetype = group1, colour = group1), size = 0.2) 
       + facet_wrap(~ id) 
```

# linux - 使用 crontab -l 搜索 cronjob

> ID：14450866
> 
> 赞同：22
> 
> 时间：2013-01-22T02:59:31.127
> 
> 标签：linux, bash, grep, cron

我试图找到一个创建的 cronjob，以确保脚本不会复制相同的完全相同的 cronjob。

我一直在尝试使用这些方面的东西，但运气不佳：

```
if ! crontab -l | xargs grep -l '/var/www/arix/update.php'; then
  echo "Cronjob already exists"
else
  echo "Cronjob doesn't exist"
fi 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-22T03:36:57.540

`/var/spool/cron/crontabs`是 crontab 文件的常用父目录。那里有一些文件，其中包含用户名——例如，root 是根 crontab。系统上的每个用户都有可能使用 crontab -e 并创建了他/她自己的 crontab。

作为 root，您可以：

```
cd /var/spool/cron/crontabs
grep  'search string' * 
```

这个命令（作为 root）会告诉你哪个用户的 crontab 有这个字符串。如果它存在。

如果您不确定 crontab 中的内容，您可以这样做。 `crontab -l`只提供您的 crontab 中的内容，即当前登录的用户。如果您确定这是检查的最佳位置：

```
crontab -l | grep -q 'search string'  && echo 'entry exists' || echo 'entry does not exist' 
```

# android - 根据他们选择共享的方法来分支 Android Share Intent 附加功能

> ID：14450867
> 
> 赞同：14
> 
> 时间：2013-01-22T02:59:36.337
> 
> 标签：android, facebook, android-intent, facebook-sharer

只是想分享一个动态文本字符串 + 应用程序的 URL。原生 Android 共享意图设置正确，并且与 Twitter、Gmail 等完美配合。但是，正如许多人猜测的那样，它不适用于 Facebook。显然是因为 Facebook 不接受该`intent.EXTRA_TEXT`字段中的文本，只接受一个 URL。

好吧，我对你们所有人的问题是：有没有办法根据他们选择共享的方法来分支共享意图附加内容？例如，如果他们通过 gmail 或 Twitter 分享，请使用现有的`String + URL`（所需选项）`EXTRA_TEXT`，但如果他们选择通过 Facebook 分享，则仅使用 URL 作为`EXTRA_TEXT`.

并不是真的想为这样一个内置在 Android 中的简单任务实现 Facebook Android SDK。

感谢您的时间和建议。

尝试过这样的事情，但它显然失败了，因为它只检查共享选项是否存在（当共享弹出时，而不是在他们单击共享方法之后），当他们选择一种方法时它没有响应。

```
 String shareBody = "app string text " + act_txt + " more text! Get the app at http://www.appurl.com";

 PackageManager pm = view.getContext().getPackageManager();
    List<ResolveInfo> activityList = pm.queryIntentActivities(sharingIntent, 0);
    for(final ResolveInfo app : activityList) {
         Log.i(TAG, "app.actinfo.name: " + app.activityInfo.name);
        //if((app.activityInfo.name).contains("facebook")) {
              if("com.facebook.katana.ShareLinkActivity".equals(app.activityInfo.name)) {

            sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, "http://www.appurl.com");
            startActivity(Intent.createChooser(sharingIntent, "Share idea"));
            break;
        } else {
            sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "app name");
            sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);
            startActivity(Intent.createChooser(sharingIntent, "Share"));
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T00:56:14.587

找到了一个解决方案，在这个 SO 问题上要求别的东西：[https ://stackoverflow.com/a/8550043/1938669](https://stackoverflow.com/a/8550043/1938669)

尝试在这里发布我的原始问题很接近。在可能的 shareIntent 列表的循环中，您需要针对特定​​的共享选择（如 facebook 或 twitter）创建一个新的共享意图

这是一个最终的工作解决方案，如果选择了 facebook，则仅共享一个 URL，否则共享完整的文本字符串 + url：

```
public void shareIt(View view){
    //sharing implementation
    List<Intent> targetedShareIntents = new ArrayList<Intent>();
    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
    sharingIntent.setType("text/plain");
    String shareBody = "string of text " + txt_var + " more text! Get the app at http://someapp.com";

    PackageManager pm = view.getContext().getPackageManager();
    List<ResolveInfo> activityList = pm.queryIntentActivities(sharingIntent, 0);
    for(final ResolveInfo app : activityList) {

         String packageName = app.activityInfo.packageName;
         Intent targetedShareIntent = new Intent(android.content.Intent.ACTION_SEND);
         targetedShareIntent.setType("text/plain");
         targetedShareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "share");
         if(TextUtils.equals(packageName, "com.facebook.katana")){
             targetedShareIntent.putExtra(android.content.Intent.EXTRA_TEXT, "http://someurl.com");
         } else {
             targetedShareIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);
         }

         targetedShareIntent.setPackage(packageName);
         targetedShareIntents.add(targetedShareIntent);

    }

    Intent chooserIntent = Intent.createChooser(targetedShareIntents.remove(0), "Share Idea");

    chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedShareIntents.toArray(new Parcelable[]{}));
    startActivity(chooserIntent);

} 
```

# javascript - 已部署的图像共享

> ID：14450868
> 
> 赞同：4
> 
> 时间：2013-01-22T02:59:38.787
> 
> 标签：javascript, mongodb, deployd

我最近开始尝试[Deployd](http://www.deployd.com)。它（有点）类似于[流星](http://meteor.com)。

这可能是一个业余问题，但如果我的收藏包含图像会发生什么？

我将如何将其上传到 MongoDB @已部署仪表板？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-11T11:20:01.063

我创建了一个模块用于部署以上传文件（包括图像）。
[https://github.com/NicolasRitouet/dpd-fileupload](https://github.com/NicolasRitouet/dpd-fileupload)
它允许您将文件存储在本地文件夹和集合中以查询它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T04:42:19.740

现在使用集合资源类型执行此操作的唯一真正方法是对图像进行 base64 编码并将其存储为字符串属性。但是，base64 图像存在一些限制和性能问题。或者，@dallonf 创建了一个 Amazon S3 资源，以便轻松地将已部署的应用程序与 S3 集成。[http://docs.deployd.com/docs/using-modules/official/s3.md](http://docs.deployd.com/docs/using-modules/official/s3.md)

有很多将二进制文件存储在集合中的请求，希望有人（核心提交者或其他人）可以在即将发布的发布版本（包括对模块 API 的重大改进）之后处理此问题。这个 Github 问题值得关注：[https ://github.com/deployd/deployd/issues/106](https://github.com/deployd/deployd/issues/106)

# html - 检查是全屏的网络应用程序

> ID：14450869
> 
> 赞同：0
> 
> 时间：2013-01-22T02:59:42.420
> 
> 标签：html, ios, safari, meta-tags, iphone-standalone-web-app

我正在使用元标记在 iPad 上全屏显示 Web 应用程序

```
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

有没有办法让我可以全屏检查应用程序？

主要原因是如果应用程序处于全屏模式，则增加包装器高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:21:25.507

您可以在 iOS 设备上使用以下 Javascript 来确定。

```
if(!!window.navigator.standalone){
  //browser
}else{
  //full screen
} 
```

使用该函数将确定当前状态并执行相应的代码。

# javascript - 我们可以直接将 Windows Azure 移动服务与 BLOB 存储连接吗？

> ID：14450870
> 
> 赞同：4
> 
> 时间：2013-01-22T02:59:47.557
> 
> 标签：javascript, azure, windows-8, azure-storage, azure-mobile-services

我有一个关于如何使用 Windows 8 应用程序 (Javascript) 实现 Windows Azure 和 Blob 存储的问题。我们可以直接将 Windows Azure 移动服务与 BLOB 存储连接吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:18:59.480

是的，您可以通过 Windows Azure 移动服务访问 Blob 存储。本质上，您将通过服务器脚本使用 blob 存储。您将使用 Windows Azure SDK for Node.js 中的“azure”模块。

如果您将以下内容复制到脚本中，您将获得对 Windows Azure blob 的引用，之后您可以对其进行查询或向其插入数据。

```
var azure = require('azure');
var blobService = azure.createBlobService("<< account name >>",
                                            "<< access key >>"); 
```

你可以在这里查看 Scott Guthrie 的帖子：[http ://weblogs.asp.net/scottgu/archive/2012/10/16/windows-azure-mobile-services-new-support-for-ios-apps-facebook -twitter-google-identity-emails-sms-blob-service-bus-and-more.aspx](http://weblogs.asp.net/scottgu/archive/2012/10/16/windows-azure-mobile-services-new-support-for-ios-apps-facebook-twitter-google-identity-emails-sms-blobs-service-bus-and-more.aspx)。

这是一篇详细介绍如何使用调度程序运行将数据备份到 blob 存储的计划脚本的帖子：[http ://www.thejoyofcode.com/Using_the_scheduler_to_backup_your_Mobile_Service_database.aspx](http://www.thejoyofcode.com/Using_the_scheduler_to_backup_your_Mobile_Service_database.aspx)

这是一篇介绍如何从移动服务将图像上传到 blob 存储的帖子：http: [//www.nickharris.net/2012/11/how-to-upload-an-image-to-windows-azure-storage-使用移动服务/](http://www.nickharris.net/2012/11/how-to-upload-an-image-to-windows-azure-storage-using-mobile-services/)

这里有更多关于使用 blob 的信息：http: [//www.windowsazure.com/en-us/develop/nodejs/how-to-guides/blob-storage/](http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/blob-storage/)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:30:39.383

我个人没有尝试过，但使用 Windows 8 的 Windows Azure 存储客户端库应该是可能的。您可以通过两种方式访问​​ Blob 存储：

1.  **使用存储帐户名称和密钥**：对于客户端应用程序，**不建议**这样做，因为您需要共享存储帐户名称和密钥，这是一个很大的安全风险，因为拥有密钥的任何人本质上都是该存储帐户的管理员。
2.  **使用共享访问签名 (SAS)**：这是一种推荐做法，因为您为 Blob 存储提供有限且有时间限制的权限。具有 SAS URL 的用户只能执行您允许他们执行的操作（例如，您可以限制用户删除 blob 容器中的 blob，并且只允许他们在此处列出 blob 或上传文件。

请查看以下代码示例，其中使用移动服务生成 SAS URL 并将其传递给 Windows 8 应用程序，应用程序使用该应用程序直接与 Windows Azure Blob 存储交互：[http ://code.msdn.microsoft.com/ windowsapps/Upload-File-to-Windows-c9169190](http://code.msdn.microsoft.com/windowsapps/Upload-File-to-Windows-c9169190)。

# javascript - chrome和firefox之间的window.innerWidth不同？

> ID：14450874
> 
> 赞同：1
> 
> 时间：2013-01-22T03:00:37.740
> 
> 标签：javascript, html, css, width

```
html, body { 
     position:absolute; 
     width:100%; 
     height:100%; 
     margin: 0; 
     padding: 0; 
     overflow: hidden; 
} 
```

`window.innerWidth`从 FX 和 chrome FX 返回不同的数字，而 Chrome 返回 1159 ，为什么会有差异以及如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:49:21.407

这是因为文档的使用取决于有多少视口可用于应用程序主体。

这将取决于应用程序边框的厚度、任何其他处于活动状态的插件等。

[演示在这里](http://jsfiddle.net/arunpjohny/KZhjc/2/)。这将提醒浏览器的宽度，对我来说，chrome 给出 677，而 firefox 给出 674

```
var body = $('body')
alert(body.width() + ' - ' + body.innerWidth()) 
```

# jquery - 如何使用下拉菜单选择创建总计？

> ID：14450875
> 
> 赞同：1
> 
> 时间：2013-01-22T03:00:40.693
> 
> 标签：jquery, drop-down-menu

I am having difficulty creating drop down menu's that when selected multiply for total. 由于某种原因，总数没有出现？这是我到目前为止所拥有的：

```
<div id="cid_7" class="form-input">
      <select class="form-dropdown validate[required]" class="DropChange" style="width:150px" id="input_7" name="q7_ticketOptions">
        <option>  </option>
        <option value="300"> VIP Floor Seats - $300.00 </option>
        <option value="40"> Section 101 Upper Level - $40.00 </option>
        <option value="60"> Section 101 Mid Level - $60.00 </option>
        <option value="150"> Section 101 Lower Level - $150.00 </option>
        <option value="40"> Section 102 Upper Level - $40.00 </option>
        <option value="60"> Section 102 Mid Level - $60.00 </option>
        <option value="150"> Section 102 Lower Level - $150.00 </option>
        <option value="40"> Section 103 Upper Level - $40.00 </option>
        <option value="60"> Section 103 Mid Level - $60.00 </option>
        <option value="150"> Section 103 Lower Level - $150.00 </option>
        <option value="20"> Section 104 Upper Level - $20.00 </option>
        <option value="60"> Section 104 Mid Level - $60.00 </option>
        <option value="20"> Section 107 Upper Level - $20.00 </option>
        <option value="60"> Section 107 Mid Level - $60.00 </option>
        <option value="40"> Section 108 Upper Level - $40.00 </option>
        <option value="60"> Section 108 Mid Level - $60.00 </option>
        <option value="150"> Section 108 Lower Level - $150.00 </option>
        <option value="40"> Section 109 Upper Level - $40.00 </option>
        <option value="60"> Section 109 Mid Level - $60.00 </option>
        <option value="150"> Section 109 Lower Level - $150.00 </option>
        <option value="40"> Section 110 Upper Level - $40.00 </option>
        <option value="60"> Section 110 Mid Level - $60.00 </option>
        <option value="150"> Section 110 Lower Level - $150.00 </option>
        <option value="40"> Section 111 Upper Level - $40.00 </option>
        <option value="60"> Section 111 Mid Level - $60.00 </option>
        <option value="150"> Section 111 Lower Level - $150.00 </option>
        <option value="40"> Section 112 Upper Level - $40.00 </option>
        <option value="60"> Section 112 Mid Level - $60.00 </option>
        <option value="150"> Section 112 Lower Level - $150.00 </option>
        <option value="20"> Section 113 Upper Level - $20.00 </option>
        <option value="60"> Section 113 Mid Level - $60.00 </option>
        <option value="40"> Section 114 Upper Level - $40.00 </option>
        <option value="60"> Section 114 Mid Level - $60.00 </option>
        <option value="40"> Section 115 Upper Level - $40.00 </option>
        <option value="60"> Section 115 Mid Level - $60.00 </option>
        <option value="20"> Section 116 Upper Level - $20.00 </option>
        <option value="60"> Section 116 Mid Level - $60.00 </option>
        <option value="40"> Section 117 Upper Level - $40.00 </option>
        <option value="60"> Section 117 Mid Level - $60.00 </option>
        <option value="150"> Section 117 Lower Level - $150.00 </option>
        <option value="40"> Section 118 Upper Level - $40.00 </option>
        <option value="60"> Section 118 Mid Level - $60.00 </option>
        <option value="150"> Section 118 Lower Level - $150.00 </option>
      </select>
    </div>
  </li>
  <li class="form-line" id="id_23">
    <label class="form-label-left" id="label_23" for="input_23"> Quantity<span class="form-required">*</span></label>
    <div id="cid_23" class="form-input">
      <select class="form-dropdown validate[required]" class="DropChange" style="width:150px" id="input_23" name="q23_quantity">
        <option>  </option>
        <option value="1"> 1 </option>
        <option value="2"> 2 </option>
        <option value="3"> 3 </option>
        <option value="4"> 4 </option>
        <option value="5"> 5 </option>
        <option value="6"> 6 </option>
        <option value="7"> 7 </option>
        <option value="8"> 8 </option>
        <option value="9"> 9 </option>
        <option value="10"> 10 </option>
      </select>
    </div>
  </li>
  <li class="form-line" id="id_22">
    <label class="form-label-right" id="label_22" for="total">Total      $</label>
    <div id="cid_22" class="form-input">
      <span id="total" name="q22_total"></span>
    </div>
  </li> 
```

并且使用的jquery：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript">
$(function() {
   $(".DropChange").change(function(){
     var  valone = $('#input_7').val();
     var  valtwo = $('#input_23').val();
     var total = ((valone * 1) * (valtwo * 1));
   $('#total').text(total);
  });
 });
</script> 
```

[jsfiddle 示例](http://jsfiddle.net/CC5P6/28/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:06:01.263

在对文本值执行数学运算之前，您需要将文本值解析为整数（或浮点）值。

```
var valone = parseInt($('#input_7').val(), 10);
var valtwo = parseInt($('#input_23').val(), 10);
var total = valone * valtwo;
$('#total').text(total); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T17:08:27.407

只需更改此行并添加 onchange="opConfig.reloadprice () 如下，就可以了。

```
<select class="form-dropdown validate[required]" class="DropChange" style="width:150px"   id="input_7" name="q7_ticketOptions"onchange="opConfig.reloadPrice ()"> 
```

# git - 如何“git add”指定类型的文件？

> ID：14450876
> 
> 赞同：2
> 
> 时间：2013-01-22T03:00:51.747
> 
> 标签：git

通常我们添加如下新文件：

```
git add . 
```

这将添加所有文件。但我只想添加指定类型的文件，例如*.c、*.cpp、*.h...所以我会这样做：

```
git add "*.c"
git add "*.h"
git add "*.cpp" 
```

但这似乎不方便，您有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T03:54:56.410

.gitignore：

```
*
!*/
!*.c
!*.h
!*.cpp 
```

这也适用于子目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:48:41.670

也许你可以做一个别名

```
git config alias.accept "!find|egrep '\.(c|h|cpp)$'|xargs git add" 
```

然后像这样运行

```
git accept 
```

[`ref`](http://gitready.com/intermediate/2009/02/06/helpful-command-aliases)

# ios - 架构、业务对象、iOS 的干净实现

> ID：14450877
> 
> 赞同：0
> 
> 时间：2013-01-22T03:01:00.757
> 
> 标签：ios, objective-c

我在目标 C 中有一个类，它代表一个通用业务对象（为了我的问题，假设它是一个银行帐户）。我有 java C# 背景（仅供参考）。现在这个 bankAccount 有一个 enum 属性定义它是什么类型，加上一个 NSURl 属性

```
 //this is in the bankAccount.h file
        typedef enum {Checking, Savings, Investor} AccountType;
        -(NSURL *)url; 
```

现在用户可以创建一个新的银行账户并将枚举设置为相关类型。在分配他们的新银行帐户对象后，他们可能需要访问 url 属性，因此我必须为该属性实现一个 getter，它将正确初始化它。我的问题是，为了正确初始化 url 属性，我如何知道调用类为我的银行帐户创建了哪种类型的银行帐户？

就像现在这就是我在 bankaccount.m 文件中实现 url 的方式：

```
 -(NSURL *)url {   
       if (url != NULL) {
       return url;
       }
  NSString *filePath;
  // figure out the file path base on account type
  switch (AccountType) {
  }

  return url; 
```

}

请记住，这是在 Bankaccount.m 文件中，它在调用类中确实不知道正在创建的实例是什么。也许我很困惑，也许这是一个简单的答案，但我无法理解这个概念。

感谢帮助的家伙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:01:20.633

我认为您忘记了不能将信息完全保存在枚举中。将枚举的值保存在某个变量中。您不一定必须像这样设置您的代码，但也许这更符合您的要求。

```
// BankAccount.h
#import <Foundation/Foundation.h>
typedef enum {
    Checking = 1,
    Savings = 2,
    Investor = 3
} AccountType;

@interface BankAccount : NSObject
-(void)setAccountType:(AccountType)theType; //Setter
-(NSURL *)url;
@end

// BankAccount.m
#import "BankAccount.h"
@implementation BankAccount

-(void)setAccountType:(AccountType)theType {
    self.bankAccountType = theType;
}

-(NSURL *)url {
    NSURL *someUrl;
    switch (self.bankAccountType) {
        case Checking:
            someUrl = [NSURL URLWithString:@"http://xzyChecking"];
            break;
        case Savings:
            someUrl = [NSURL URLWithString:@"http://xzySavings"];
            break;
        case Investor:
            someUrl = [NSURL URLWithString:@"http://xzyInvestor"];
            break;
        default:
            someUrl = [NSURL URLWithString:@"http://xzyError"];
            break;
    }
    return someUrl;
}

@end 
```

# javascript - Javascript onchange 事件。选择/选项 html 下拉输入

> ID：14450879
> 
> 赞同：2
> 
> 时间：2013-01-22T03:01:15.570
> 
> 标签：javascript, forms, addeventlistener

```
var inputDrop = document.createElement('select');
inputDrop.setAttribute("onchange", function test(){alert("test");});
form.appendChild(inputDrop);

var inputOpt1 = document.createElement('option');
inputOpt1.value="1";
inputOpt1.innerHTML="1";
inputDrop.appendChild(inputOpt1);

var inputOpt2 = document.createElement('option');
inputOpt2.value="2";
inputOpt2.innerHTML="2";
inputDrop.appendChild(inputOpt2);

form.appendChild(inputDrop); 
```

我需要分配某种事件处理程序来**选择**带有多个选项的下拉输入字段。I need to execute a function whenever a different option is selected. 以上不起作用，**inputDrop.onchange="alert('test')";也不起作用** 不知道我在这里做错了什么，请有人建议？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T03:20:10.060

皮特。你正在寻找的是类似的东西

```
inputDrop.addEventListener('change', function() {
    alert("PETE'S TEST"); }); 
```

我整理了一个 jsFiddle 来演示这个工作：http: [//jsfiddle.net/pbaXP/1/](http://jsfiddle.net/pbaXP/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:25:01.110

这似乎工作

```
inputDrop.onchange = function test(){alert("test");}; 
```

[工作演示在这里](http://jsfiddle.net/arunpjohny/C2c6e/)

# wordpress - WordPress - 根据网站时区显示当前日期和时间

> ID：14450880
> 
> 赞同：3
> 
> 时间：2013-01-22T03:01:22.850
> 
> 标签：wordpress

我正在尝试在我的 WordPress 网站上显示当前日期和时间。我希望日期和时间反映在 WordPress 管理区域中设置的时区。

我在 options-general.php 中找到了这段代码：

```
<tr>
<th scope="row"><?php _e('Date Format') ?></th>
<td>
    <fieldset><legend class="screen-reader-text"><span><?php _e('Date Format') ?></span></legend>
<?php

    $date_formats = array_unique( apply_filters( 'date_formats', array(
        __('F j, Y'),
        'Y/m/d',
        'm/d/Y',
        'd/m/Y',
    ) ) );

    $custom = true;

    foreach ( $date_formats as $format ) {
        echo "\t<label title='" . esc_attr($format) . "'><input type='radio' name='date_format' value='" . esc_attr($format) . "'";
        if ( get_option('date_format') === $format ) { // checked() uses "==" rather than "==="
            echo " checked='checked'";
            $custom = false;
        }
        echo ' /> <span>' . date_i18n( $format ) . "</span></label><br />\n";
    }

    echo '  <label><input type="radio" name="date_format" id="date_format_custom_radio" value="\c\u\s\t\o\m"';
    checked( $custom );
    echo '/> ' . __('Custom:') . ' </label><input type="text" name="date_format_custom" value="' . esc_attr( get_option('date_format') ) . '" class="small-text" /> <span class="example"> ' . date_i18n( get_option('date_format') ) . "</span> <span class='spinner'></span>\n";

    echo "\t<p>" . __('<a href="http://codex.wordpress.org/Formatting_Date_and_Time">Documentation on date and time formatting</a>.') . "</p>\n";
?>
    </fieldset>
</td>
</tr> 
```

我尝试添加：

```
<?php m/d/Y ?> 
```

到我的网站代码输出当前日期，但它不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T03:11:05.040

尝试：

```
$format = get_option('date_format') . ' ' . get_option('time_format');

print date_i18n($format, current_time('timestamp')); 
```

WordPress 具有[`current_time()`](http://codex.wordpress.org/Function_Reference/current_time)返回博客时间的功能，如果您在博客设置中选择了不同的时区，该时间可能与服务器时间不同...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T03:03:38.363

我认为你必须这样做

```
 <?php echo date_i18n( 'm/d/Y' ) ?> 
```

# wordpress - 简化包含 wordpress 中帖子代码的 while 循环

> ID：14450882
> 
> 赞同：0
> 
> 时间：2013-01-22T03:01:47.750
> 
> 标签：wordpress, post

下面的代码应该显示页面的内容，然后是某些页面内容。

```
 <!-- Section -->
    <section>
    <?php if (have_posts()): while (have_posts()) : the_post(); ?>

        <!-- Article -->
        <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>

            <!-- Posts for homepage -->
            <?php
                if ( is_front_page() ) { ?>
                    <?php the_content(); ?>

                    <!-- Show page content according to page ID -->
                    <div class="title-home clearfix">
                        <div class="four title-home-text">Services Spotlight</div>
                        <div class="four title-home-text" style="margin-left: 115px;">Industry Expertise</div>
                        <div class="four title-home-text" style="margin-left: 125px;">Features &amp; Benefits</div>
                    </div>
                    <div class="four-wrapper clearfix">
                    <div class="four-container">
                        <div class="four-col line"> 
                         <?php
                            query_posts('page_id=40');
                            while (have_posts()): the_post();
                               the_content();
                            endwhile;
                        ?>
                        </div>
                        <a href="" class="read-morebtn"> read more </a>
                    </div>

                    <div class="four-container">    
                        <div class="four-col line"> 
                         <?php
                            query_posts('page_id=41');
                            while (have_posts()): the_post();
                               the_content();
                            endwhile;
                        ?>
                        </div>
                        <a href="" class="read-morebtn"> read more </a>
                    </div>

                    <div class="four-container">    
                    <div class="four-col line"> 
                     <?php
                        query_posts('page_id=42');
                        while (have_posts()): the_post();
                           the_content();
                        endwhile;
                    ?>
                    </div>
                    <a href="" class="read-morebtn"> read more </a>
                    </div>

                    <div class="four-container">    
                        <div class="four-col line"> 
                            <?php if(!function_exists('dynamic_sidebar') || !dynamic_sidebar('widget-area-3')) ?>
                        </div>
                    </div>

                    </div>

                <?php
                } 
                else {
                ?>
                    <h1><?php the_title(); ?> </h1>
                    <?php  the_content(); ?>
                <?php } ?>
            <!-- end post homepage -->

            <br class="clear">

            <?php edit_post_link(); ?>

        </article>
        <!-- /Article -->

        <?php endwhile; ?>

        <?php else: ?>

        <!-- Article -->
        <article>
            <h2><?php _e( 'Sorry, nothing to display.', 'html5blank' ); ?></h2>
        </article>
        <!-- /Article -->

    <?php endif; ?>

    </section>

    <!-- /Section -->

<?php get_footer(); ?> 
```

但是，它将最后一个查询显示为循环。

输出代码：

```
<article id="post-6" class="post-6 page type-page status-publish hentry">
<article id="post-42" class="post-42 page type-page status-publish hentry"> 
```

`post-42`不应在文章中显示。

另外，我知道代码没有为使用 while 循环而简化。我想解决`article`问题并简化此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:20:09.797

根据[Codex Query Posts Page ，法典建议不要将 query_posts 用于二级循环](http://codex.wordpress.org/Function_Reference/query_posts)

看起来您正在踩主循环（文章），因为 query_posts 改变了主循环。如果您想使用 query_posts，建议您在完成后调用 wp_reset_query()。首选方法是使用 WP_query()。

# apache - Apache mod_rewrite 永远不会重写现有目录，除非目录是某个目录？

> ID：14450883
> 
> 赞同：2
> 
> 时间：2013-01-22T03:01:51.030
> 
> 标签：apache, mod-rewrite, apache2

网站[http://www.example.com/](http://www.example.com/)在 CMS 上运行，一切都通过 .htaccess 中设置的规则进行。访问[http://www.example.com/](http://www.example.com/)时，根据用户的语言设置将用户重定向到以下路径之一：

```
http://www.example.com/en/
http://www.example.com/fr/ 
```

和目录实际上并不存在，它们由 CMS 处理`/en/`。`/fr/`

我正在向`investors/`站点添加一个新部分 ( )，但现在不希望它通过 CMS，但我不希望用户注意到它。

原始 .htaccess 文件有以下几行：

```
# never rewrite for existing files, directories and links
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
# rewrite everything else to index.php
RewriteRule .* index.php [L] 
```

`/en/investors/`如果请求的路径以or开头，我设法使它不通过 CMS `/fr/investors/`：

```
# never rewrite for existing files, directories and links
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
# rewrite everything else to index.php
# except investors' section
RewriteRule ^(?!\/en\/investors|\/fr\/investors).+ index.php [L] 
```

我将我的`/en/investors/`and`/fr/investors/`目录上传到服务器上，它们工作正常，但现在主页已损坏，因为`/en/`and`/fr/`目录现在存在。如何向该规则添加例外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T13:19:42.603

简单地添加另一个规则来覆盖 2 个目录，例如

```
RewriteRule ^(en|fr)/?$ index.php [L] 
```

# javascript - jQuery.InArray() 返回 -1 的问题

> ID：14450884
> 
> 赞同：3
> 
> 时间：2013-01-22T03:01:54.010
> 
> 标签：javascript, jquery, arrays

我有一个问题，`jQuery.InArray()`当我运行一个函数时返回 -1，但我知道我正在测试的值肯定在数组中。

我知道它们在数组中，因为如果我在运行之前 console.log 数组`jQuery.inArray()`的值存在并显示。这是我正在使用的示例：

```
/* -- In page.php -- */
images = [8, 13, 21, 32, 40, 56]; 

/* -- In script.js -- */
console.log('images->', images); 
//output  images-> [8, 13, 21, 32, 40, 56]

var testingValue = 13;

console.log('inArray->', jQuery.inArray(testingValue, images)); //Should return 1
//output inArray-> -1

console.log('inArray->', jQuery.inArray(13, images)); //Should return 1
//output inArray-> -1

console.log('inArray->', jQuery.inArray("13", images)); //Should return -1
//output inArray-> -1

console.log('inArray->', jQuery.inArray('13', images)); //Should return -1 
//output inArray-> -1 
```

所有这些都返回`-1`，即使前两个应该返回`1`。奇怪的是，如果我`jQuery.inArray(testingValue, images)`在控制台中手动测试，我得到的值是 1。

**需要注意的一点：** 该变量`images`是在包含 js 文件的 php 页面中创建的。这应该不是问题。

**附加说明：**是的，在这部分脚本运行之前就包含了 jQuery。在此之前，许多其他 jQuery 函数都已成功运行。

我想知道这个功能是否有任何问题。我过去曾成功使用过它，但我的代码看不到任何会阻止它返回正确值的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T17:12:23.573

经过一夜好眠后，我能够围成一圈重新审视这个问题。该变量`testingValue = 13;`被显式转换为整数。问题是我通过 jQuery 动态获取该值`$.each(arrayName, function(index,value){})`。尽管数据显示它`index`确实是一个整数，但由于某种原因`$.inArray()`，它并没有像 int/float 一样对待它，因此没有在数值数组中找到值。在检查它是否为 inArray 之前，我将代码修改为`parseInt()`变量。`index`

## 长话短说

如果您在尝试将 jQuery.inArray() 与整数或浮点数数组一起使用时遇到问题，请尝试分别使用`parseInt()`or`parseFloat()`来确保函数接收到正确的数据类型。

```
if( jQuery.inArray(parseInt(yourVariable), yourArray) > -1)
{
    return true;
} 
```

# bash - 管道在makefile中不起作用

> ID：14450888
> 
> 赞同：3
> 
> 时间：2013-01-22T03:02:07.317
> 
> 标签：bash, makefile, grep

我已经删除了重要的行：

```
SHELL := /bin/bash

leaks: build_eagle_test
    grep EagleMemory_Allocate -r eagle | perl -nle 'm/"(.*)"/; print $1' | sort | uniq > leaks.alloc.tmp
    grep "EagleMemory_Mock(" -r eagle_test | perl -nle 'm/"(.*)"/; print $1' | sort | uniq > leaks.alloc_test.tmp 
```

当我在 bash 中运行这些行时没问题。但是从 make 文件中它只将管道输入`grep`到输出文件中（实际上忽略了中间的阶段......）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T03:05:36.183

`$`需要引用为，`$$`例如，

```
SHELL := /bin/bash

leaks:
    grep EagleMemory_Allocate -r eagle | perl -nle 'm/"(.*)"/; print $$1' | sort | uniq > leaks.alloc.tmp
    grep "EagleMemory_Mock(" -r eagle_test | perl -nle 'm/"(.*)"/; print $$1' | sort | uniq > leaks.alloc_test.tmp 
```

问题是 Make 对 bash 语法一无所知，并且忽略`'"`了命令行上的所有引用。它将 解释`$1`为 Make 上下文中变量的值`1`——但没有这样的变量，所以它变成了空白。

当它回显从原始 Makefile 运行的命令时，您可以在 Make 的输出中看到这一点：

```
$ make
grep EagleMemory_Allocate -r eagle | perl -nle 'm/"(.*)"/; print ' | sort | uniq > leaks.alloc.tmp
grep "EagleMemory_Mock(" -r eagle_test | perl -nle 'm/"(.*)"/; print ' | sort | uniq > leaks.alloc_test.tmp 
```

注意`$1`消失了。

# jquery - 通过电子邮件表单的 jquery 电子邮件站点 url

> ID：14450902
> 
> 赞同：0
> 
> 时间：2013-01-22T03:03:51.670
> 
> 标签：jquery, forms, email

有没有办法用 jquery 制作一个非常简单的表单，一个人可以输入一个人的电子邮件地址，输入他们的姓名，然后它会向他们输入的电子邮件地址发送一封电子邮件，其中包含一条简单的消息，例如“Blank Though你会对此链接感兴趣”和页面的链接？我一直很难找到这方面的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:23:56.123

您不能“仅”使用 jquery 发送电子邮件，您必须考虑 php 等。但由于您只想使用 jquery，因此有一个非常简单的解决方案。

```
<form action="mailto:someone@example.com" method="post" enctype="text/plain">
      <p>Name:
      <input type="text" name="name">
      </p>
      <p>Email:
      <input type="text" name="email">
      </p>
      <p>Content:
      <input type="text" name="comment">
      </p>

      <input type="submit" value="Send" class='submit'>
</form> 
```

然后使用 jquery 更改操作字段，

```
$(document).ready(function() {
    $('form').on('click', '.submit', function() {
        var mail = $("input[name='email']").val();
        $('form').attr('action',"mailto:" + mail);
    });
}) 
```

# mysql - 计数（*）与连接

> ID：14450903
> 
> 赞同：2
> 
> 时间：2013-01-22T03:03:57.543
> 
> 标签：mysql, sql, database, select

这可能很简单，但由于某种原因，我对此一无所知..

我想连接两个表并在另一个表中的一个表中获取列的总出现次数。表格1

```
id | company
------------
 1 | companyA
 2 | companyB
 3 | companyC

Table2

id | company_id
------------
 1 |  2
 2 |  2
 3 |  1
 4 |  2
 5 |  3 
```

结果应该是：

```
company | count(*)
------------------
companyA| 1
companyB| 3
companyC| 1 
```

我似乎无法正确计算计数部分。我在想它会是这样的：

```
SELECT Table1.company, count(*)
FROM Table1 JOIN Table2 ON
Table1.id = Table2.company_id
GROUP BY Table1.company; 
```

修改：问题实际上是companyA和companyB正确出现，但它没有显示companyC。我仔细检查了companyC的字段中是否存在匹配项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:04:53.627

应该是`Table2.company_id`你加入而**不是** `Table2.id`

```
SELECT  Table1.company, count(*)
FROM    Table1 
        INNER JOIN Table2 
           ON Table1.id = Table2.company_id  -- <<== here
GROUP   BY Table1.company; 
```

您必须在of 列上定义一个`INDEX`（*可能是 UNIQUE*）以获得更快的性能，因为您将它与`company``table``company`

**更新 1**

```
SELECT  Table1.company, count(Table2.company_id)
FROM    Table1 
        LEFT JOIN Table2 
           ON Table1.id = Table2.company_id  -- <<== here
GROUP   BY Table1.company; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/04ef2/1)

# ruby-on-rails - 从 AJAX 渲染 Rails Partial 并从 AJAX 传入局部变量

> ID：14450909
> 
> 赞同：1
> 
> 时间：2013-01-22T03:05:08.697
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我正在尝试使用此链接中的 AJAX 请求呈现 Rails 部分（并将局部变量传递给呈现的部分）：

[http://isotope11.com/blog/render-partials-with-ajax-requests](http://isotope11.com/blog/render-partials-with-ajax-requests)

他正在做的是使用 .get 对呈现部分的控制器进行 ajax 调用：

```
 $.get("/ean_hotels/"+ id, params, function(data){
  $('#hotelModalContent').html(data);
  }, "html");

  $('#hotelModal').reveal(); 
```

在hotels_controller.rb 中他的控制器动作结束时的“渲染”：

```
render partial: 'hotel_modal_content', locals: { hotel: @hotel, hotel_review_widget: hotel_review_widget }, layout: false 
```

您可以看到控制器代码为要渲染的部分设置了局部变量（即hotel 和hotel_review_widget）。

我不明白如何从原始 .get AJAX 调用中传递这些局部变量。

我也不确定使用 .get 进行 AJAX 调用时的参数是什么

我希望能够将局部变量从javascript传递到hotels_controller.rb，它将局部变量映射到部分变量。

我很感激这里的任何帮助。

编辑：

添加部分代码

_hotel_model_content.html.erb

```
<h3><%= hotel %></h3> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:17:29.587

**客户**

根据[$.get](http://api.jquery.com/jQuery.get/)和[$.ajax](http://api.jquery.com/jQuery.ajax/)文档，`params`将进入 URL 的查询字符串部分：

```
// request to /somethings?a=abc&b=2
$.get('/somethings', {a: 'abc', b: 2}) 
```

**服务器**

查询字符串参数可以通过 Rails 操作通过名为`params`. [[1]](http://guides.rubyonrails.org/action_controller_overview.html#parameters)

```
class SomethingsController < ApplicationController
  def index
    puts params[:a] # if URL was /somethings?a=123, will print 123
  end
end 
```

**把它放在一起**

让我们用一个部分来做一个完整的例子。

这是客户端代码：

```
// client call to /somethings?name=Something+123
$.get('/somethings', {name: 'Something 123'}, function(data){
  $('#target').html(data);
}); 
```

这是服务器：

```
class SomethingsController < ApplicationController
  def index
    # bind controller variable @name
    @name = params[:name]
  end
end 
```

视图内部`app/views/somethings/index.html.erb`：

```
<%= render :partial => 'some_partial', :locals => {:name => @name} %> 
```

我已将部分渲染移至视图中。我认为从视图渲染局部比直接从控制器渲染局部更标准。

# spring - 春天有什么等价物吗？

> ID：14450912
> 
> 赞同：1
> 
> 时间：2013-01-22T03:05:28.430
> 
> 标签：spring, dependency-injection, inversion-of-control, unity-container, ioc-container

“BuildUp”是指不创建对象，而是根据“Required”等注解将依赖项注入到现有对象中。期望它会自动为这些依赖项找到合适的 bean。

# javascript - 自定义块javascript？

> ID：14450915
> 
> 赞同：1
> 
> 时间：2013-01-22T03:05:46.387
> 
> 标签：javascript, function, block

我知道这是一个有点愚蠢的问题。是否可以在javascript中制作自定义块？这是一个块：

```
if(a==2){
    "block!"
} 
```

这是一个块：

```
for(;;){
    "block!"
} 
```

可能吗？我从来没有见过任何关于这个主题的东西。这有可能在 es6 中实现吗？

这对回调来说很棒，它可以让你这样做：

```
foo{
    ...
} 
```

而不是这个：

```
foo(function(){
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:07:45.303

我想你会喜欢鲁比的。

但是不，在 JavaScript 中没有办法做到这一点，而且我还没有听说过任何类似的 es6 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:09:24.257

您可以使用标签在 JavaScript 中创建块，但它们只有在您想使用它们时才有用，`break`因为 afaik[您不能对它们做任何其他事情](http://james.padolsey.com/javascript/labelled-blocks-useful/)并且它们没有自己的范围（除了[`let`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/let)）。

```
foo: {
   // this is a block
   console.log(1);
   break foo;
   console.log(2); // never logged
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:13:09.233

据我所知，JavaScript只有函数作用域、全局作用域，没有像C那样的块作用域。所以目前你不能这样做。如果你想要一个块，你必须将它包装在一个函数中，你已经列出了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T04:36:52.460

我已经看到了这个技巧，它使用 try/catch 为您提供了一个具有自己的变量范围的块：

```
try {
  throw 0;
} catch(variable) {
  //variable only exists in this block
  variable = 'my value';
  console.log(variable);
  //i can return from parent function here
}
//variable does not exist outside of the block
console.log(typeof variable); 
```

使用 try/catch 有性能考虑，但它很有用，因为它仍然允许使用`return`或者`break`如果块在函数或循环内。

# php - 从数据库值循环复选框 PHP

> ID：14450919
> 
> 赞同：0
> 
> 时间：2013-01-22T03:06:03.257
> 
> 标签：php, mysql

处理某事并遇到一些代码问题。场景是一个项目应该有多个类别。我的解决方案是循环创建复选框，以便用户可以简单地单击项目应具有的类别这是我拥有的代码。

```
<?php
$result = mysql_query("SELECT * FROM tbl_category order by name ");
while($row = mysql_fetch_array($result))
    echo '<label>'.$row['name']. '</labe>' 
    '<input type="checkbox" name="categories" value='.$row['category_id'].' >';

?> 
```

不知何故它不工作将不胜感激任何帮助。

另外，如果有人可以告诉我如何存储值，例如**ITEM APPLE**具有A、G、Y*值*，我将如何将其存储在数据库中以及如何显示它。因为我将使用**SELECT ELEMENT**过滤器来搜索它们。

编辑：错误提示

> 解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING，期待 ',' 或 ';' 在第 25 行的 C:\xampp\htdocs\nota\add2.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:16:52.613

```
 echo '<label>'.$row['name']. '</labe>'.'<input type="checkbox" name="categories" value='.$row['category_id'].' >'; 
```

您在 echo 语句中缺少字符串连接运算符`.`。我假设您的查询是正确的，并且您的数据库中有一些数据。

关于存储`ITEM APPLE has values of A,G,Y` ，您可以使用查找表，其中的`id`of`ITEM APPLE` 和值作为 A，然后是相同的 id，但值作为 G，然后是 y..etc a

如果一个项目可以有多个值，则此模式最适合。

[链接到数据库模式](http://sqlfiddle.com/#!2/72cb7b/2)

# jquery - 如何使用 jQuery 将查询字符串参数附加到超链接 URL

> ID：14450922
> 
> 赞同：3
> 
> 时间：2013-01-22T03:06:07.940
> 
> 标签：jquery

我有一个完整的 jQuery 代码来选择与指定域匹配的 URL：

```
jQuery( document ).ready( function( $ ) {
    $('a').each(function() {

        var href = $(this).attr('href');

        if(this.hostname && this.hostname == 'example.com') 
        {                   
            $(this)
                .removeAttr('target')
                .attr('rel', 'nofollow')                
                .attr('title', href)
       }
    });
}); 
```

如您所见，它将删除目标属性，添加 rel nofollow 并将标题设置为 URL 值。现在我遇到了关于如何修改上述代码以添加另一个功能以将查询字符串附加到 URL 值（href 值）的问题。假设我想附加以下查询字符串参数/值：

```
argument1='test1'
argument2='test2' 
```

这样最终的 URL 将如下所示：

```
http://example.com/?argument1=test1&argument2=test2 
```

或示例域的任何页面，例如

```
http://example.com/any_page/?argument1=test1&argument2=test2 
```

有没有不使用 jQuery 插件的简单方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:13:03.693

检查[`jQuery.param()`](http://api.jquery.com/jQuery.param/)对象和数组

或[`.serialize()`](http://api.jquery.com/serialize/)用于表单数据

示例：http: [//jsfiddle.net/DqXYn/](http://jsfiddle.net/DqXYn/)

# java - 构造函数重载

> ID：14450925
> 
> 赞同：0
> 
> 时间：2013-01-22T03:06:12.560
> 
> 标签：java, overloading

我有同一个类的不同构造函数，我想用同一个对象调用它们。可能吗？

如：

```
class Calcy
{
  int a,b,d;
  double c;

  Calcy()
  {
    c=a+b;
    System.out.println("Ans -> "+c);
  }

  Calcy(int a,int b)
  {
    c=a/b;
    d=a%b;
    System.out.println("Ans -> "+c+d);
  }   

  Calcy(double a,double b)
  {
    c=a*b;
    System.out.println("Ans -> "+c);
  }

  public static void main(String[] args)
  {
    Calcy **cal** = new Calcy(7,6);
    Calcy **cal** = new Calcy(5.3,6.1);
    Calcy **cal** = new Calcy();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:08:12.977

一个对象只能构造一次。但是，构造函数可以调用其他方法，包括其他构造函数。但是，一旦构造函数返回，就是这样。如果这是一个问题，也许您将代码放在应该在方法中或“初始化”方法中的构造函数中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:11:11.010

您可以根据`Calcy`需要创建任意数量的对象：

```
public static void main(String[] args)
{
Calcy cal = new Calcy(7,6);
cal = new Calcy(5.3,6.1);
cal = new Calcy(); // What does this mean to calculate nothing?
} 
```

如果要保留之前计算的状态，只需存储多个实例即可。

如果您想将一个 Calcy 提供给下一个对象，只需扩展您的构造函数以将 Calcy 作为输入，即：

```
 Calcy(Calcy a,int b)
  {
    c=a.getC() / b;
    d=a.getD() % b; // Guessing this is what you want? 
    System.out.println("Ans -> "+c+d);
  } 
```

请注意，您需要为 c 和 d 创建访问器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:26:16.637

构造函数的目的是变量初始化。当然，同一个类中可以有多个构造函数。每次调用构造函数时都会创建一个不同的对象。但是如果你想对变量执行一些操作，最好使用方法。即使方法可以被重载，你可以在同一个对象上调用它们。例如，

```
int add(int x,int y){
   return (x+y);
}

float add(float x,float y){
   return (x+y);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T03:29:13.967

您不能创建重复的对象：

```
Calcy **cal** = new Calcy(7,6);
Calcy **cal** = new Calcy(5.3,6.1);
Calcy **cal** = new Calcy(); 
```

但是您可以使用其他构造函数创建许多对象或使用以下构造函数对对象进行签名：

```
Calcy **cal1** = new Calcy(7,6);
Calcy **cal2** = new Calcy(5.3,6.1);
Calcy **cal3** = new Calcy(); 
```

或 Calcy **cal** = new Calcy(7,6); **cal** = new Calcy(5.3,6.1); **cal** = 新 Calcy();

构造函数：

```
 Calcy()
  {
    c=a+b;
    System.out.println("Ans -> "+c);
  } 
```

不正确，您需要初始值。

# actionscript-3 - Actionscript 3对象碰撞以防止字符重叠

> ID：14450927
> 
> 赞同：0
> 
> 时间：2013-01-22T03:06:17.253
> 
> 标签：actionscript-3, flash, object, collision

我和我的朋友正在尝试制作一款 rpg 风格的游戏，您可以从上面看到您的角色，但我们遇到了一些物体碰撞问题。可能值得一提的是，我们在 Flash CS6 中的一个面向对象的 AS3 项目中这样做。

很抱歉，如果这个问题已经被问了一百万次，但我们整天都在寻找解决方案，到目前为止我们发现的要么是对我们来说有点太先进的东西，比如 box2d/nape，要么只是简单的碰撞检测我们已经知道了。

我们遇到的问题是我们想要一种方便的方法来检测碰撞并防止主角与场景中的对象重叠，而不会让它冻结或卡住。到目前为止，我们已经放弃了解决问题的所有尝试，但这里是其余代码，以帮助您了解我们所处的位置（抱歉，如果难以阅读）。任何形式的建议或参考相关教程表示赞赏。

主要班

```
package {

import flash.display.Stage;
import flash.display.MovieClip;
import flash.events.Event;

public class Engine extends MovieClip
{
    private var hero:Hero;
    private var box1:Box1;

    public function Engine()
    {
        box1 = new Box1();
        stage.addChild(box1);
        box1.x = stage.stageWidth / 4;
        box1.y = stage.stageHeight / 2;

        hero = new Hero(stage, box1);
        stage.addChild(hero);
        hero.x = stage.stageWidth / 2;
        hero.y = stage.stageHeight / 2;
    }

}
} 
```

人物类

```
package 
{

import flash.display.MovieClip;
import flash.events.Event;
import flash.display.Stage;

public class Hero extends MovieClip
{
    private var box1:Box1;
    private var stageRef:Stage;
    private var vy:Number = 0;
    private var vx:Number = 0;
    private var limit:Number = 30;
    private var rad:Number;
    private var bounce:Number = 0.125;
    private var _max:Number = 8;

    public function Hero(stageRef:Stage, box1:Box1)
    {
        //box variable was used in previous experiments with hit tests
        this.box1 = box1;
        this.stageRef = stageRef;
        Input.initialize(stageRef);
        stageRef.addEventListener(Event.ENTER_FRAME, moveHero);
    }
    private function moveHero(e:Event):void
    {
        if (Input.kd("W","UP"))
        {
            vy = vy < 1 - _max ? _max * -1:vy - 1;
        }
        if (Input.kd("S","DOWN"))
        {
            vy = vy > _max - 1 ? _max:vy + 1;
        }
        else if (!Input.kd("W", "UP", "S", "DOWN"))
        {
            if (vy > 1)
            {
                vy = vy < 1 ? 0:vy - 1;
            }
            else
            {
                vy = vy > -1 ? 0:vy + 1;
            }

        }
        if (Input.kd("A","LEFT"))
        {
            vx = vx < 1 - _max ? _max * -1:vx - 1;
        }
        if (Input.kd("D","RIGHT"))
        {
            vx = vx > _max - 1 ? _max:vx + 1;
        }
        else if (!Input.kd("A", "LEFT", "D", "RIGHT"))
        {
            if (vx > 1)
            {
                vx = vx < 1 ? 0:vx - 1;
            }
            else
            {
                vx = vx > -1 ? 0:vx + 1;
            }

        }
        if (x < limit)
        {
            x = limit;
            vx *=   -  bounce;
        }
        if (x > stage.stageWidth - limit)
        {
            x = stage.stageWidth - limit;
            vx *=   -  bounce;
        }
        if (y < limit)
        {
            y = limit;
            vy *=   -  bounce;
        }
        if (y > stage.stageHeight - limit)
        {
            y = stage.stageHeight - limit;
            vy *=   -  bounce;
        }

        x +=  vx;
        y +=  vy;
        rad = (Math.atan2(stage.mouseY - y,stage.mouseX - x)) * 180 / Math.PI;
        this.rotation = rad;

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:20:11.537

进行碰撞检测的一种简单方法是：

1) 尝试将对象 X 移动到新位置

2) 对于游戏 Y 中的每个其他对象，计算 Y 和 X 是否重叠（将对圆中的矩形、矩形中的矩形、圆中的圆等使用不同的算法）

3）如果它们确实重叠，请返回步骤 1，但尝试将其移动一半。或者：如果你碰撞的物体是圆形的，改变运动的角度使其与它相切，同时根据你旋转它的程度使其变小（角度变化的余弦，所以 0x 表示 90 度变化，（sqrt2 /2)x 表示 45 度变化，1x 表示 0 度变化，这在我看来是有道理的。）

4）如果你的移动成功了，保持它。如果运动长度变得非常小并且仍然被拒绝，假设您处于休息状态并放弃。

更复杂的算法会将您从碰撞的中心弹出，因此您将通过走进弯曲的物体等方式绕着弯曲的物体弯曲，但是您必须小心弹射不会与第三个物体发生碰撞对象 Z，它可能会变得很棘手。（您是否考虑过使用物理库？它们被编码是有充分理由的——物理很难做到正确。）

# javascript - 通过 javascript 连接到 Maya

> ID：14450928
> 
> 赞同：1
> 
> 时间：2013-01-22T03:06:28.523
> 
> 标签：javascript, python, web-applications, maya

我正在开发一个向 Maya 发送命令的应用程序，就像 iOS 应用程序[CameraMan](http://the3dninja.com/blog/?p=1223)一样。但是，我正在寻找一种方法来使这个基于网络，而不是构建一个原生应用程序。我相信这是可以做到的，但我被困在如何建立初始联系上。Maya 创建一个可通过特定 IP 地址访问的命令端口：端口号。例如，我可以从 Eclipse 发送命令，甚至可以发送简短的 python 脚本。我已经在本机应用程序中看到了这一点，但是如何通过 Javascript 做到这一点？

Maya 确实提供了一个浏览器插件来执行此操作，但它当然是一个插件，不能在移动浏览器上运行，我也不能针对我正在尝试制作的确切应用程序自定义它。

作为背景，我具备 Javascript、Python 和 MEL 脚本的基本知识。

更新：我应该指定我不希望通过 Internet 控制 Maya。相反，我正在寻找一种通过本地网络建立连接的方法，我知道 IP 地址，就像我上面引用的 CameraMan 应用程序（只是不是作为本机应用程序）。

更新 2：不幸的是，这个项目在这一点上有点不可行。我没有意识到，为了在 Maya“服务器”上启用 websockets，我需要实现一些第三方库。适合个人使用，但如果我试图为其他人发布工具则不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:45:02.227

一切皆有可能，可能不切实际，或者在这种情况下，Autodesk 的许可可能是一个小问题。首先让我们更好地定义 JavaScript，看看 JavaScript 是一种编程语言，而 Web 浏览器嵌入的 JavaScript 是由浏览器绑定的。它不是关于 JavaScript 的普遍事物，并非所有 JavaScript 都在浏览器中运行。Web浏览器内部的JavaScript受浏览器和浏览器的安全规则约束，一般不能仅与网页内部的数据和服务器进行通信。因此，为了让浏览器中的 java 脚本与 Maya 对话，您需要一个服务器连接。

将 Maya 包装为 Web 服务器是可能的，我过去曾使用 mel。用python做会更容易。[您可以在CreativeCrash](http://www.creativecrash.com/forums/mel/topics/online-control-of-maya-via-webpage#discussion_post_263927)上找到现有的演示代码，这更像是一个概念证明，而不是其他任何东西。除了反省开放场景外，您对演示无能为力。与某些帖子所说的相反，代码应该按原样工作。很难远程调试人们的防火墙，因为除非另有说明，否则大多数防火墙软件都会阻止服务器，许多用户通过覆盖将整个 Maya 与外界隔离，因此请务必仔细检查这些内容。

或者，您可以只使用现有的 java 脚本 telnet 工具和 telnet 到未过滤的 Maya 命令端口，然后直接在 Maya 中调用 mel/python。像[anyterm](http://anyterm.org/index.html)这样的东西会符合要求。我之前已经成功地将 Maya 与电话 ssh 应用程序一起使用，以修复我假期中的脚本错误。如果您只需要编程访问，这可能是一个更容易的攻击媒介。

当您执行此类操作时，请确保您了解这涉及到一个**很大的安全问题。**Maya 拥有对系统的完全用户访问权限，通常是完全管理员访问权限。Maya 可以在用户级别调用计算机上的所有内容，因此没有什么能阻止攻击者远程接管整个计算机。

*PS：*老实说，通过私有虚拟网络使用远程桌面或 VNC 可能是*更好的*选择。

# parent - RavenDB：你如何更新子实体？

> ID：14450930
> 
> 赞同：0
> 
> 时间：2013-01-22T03:06:35.473
> 
> 标签：parent, ravendb

我一直在玩 RavenDB。我不得不说我印象深刻，但我很难理解如何更新子对象。例如，假设我们有以下内容：

```
public class Course
{
    public int Id { get; set; }
    public string Title { get; set; }
}

public class Student
{
    public Student()
    { 
        Courses = new Collection<Course>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public ICollection<Course> Courses { get; set; }
} 
```

我可以在数据库中保存一个学生和两个与学生相关的课程。我也可以毫无问题地为学生加载两门课程。但是当我尝试修改课程时，例如 student.Courses.Add(new Course { Id = 5, Title = "Accounting 101"})，我希望它能够在数据库中的内容与当前的内容之间进行同步学生。课程。基本上，我希望它删除数据库中的课程，并且只在 student.Courses 中有课程。这可能是我对 RavenDB 工作原理的误解。我找不到这样的例子。处理这种情况的最佳实践方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:13:18.577

不，它不会做你描述的任何事情。您对其建模的方式，数据库中有两个单独的文档：

```
Course
{
  Id : "courses/1",
  Title : "Algebra"
}

Student
{
  Id : "students/1",
  Name : "John",
  Courses :
    [
      {
        Id : "courses/1",
        Title : "Algebra"
      }
    ]
} 
```

`Course`非规范化的好处是您在查看信息以获得课程标题时`Student`不必加载`Course`文档。`Student`

`Course`不利的一面是必须对两个文档进行任何更改。如果您只是将课程添加到学生文档，则它指的`Course`是不存在的文档。Raven 不会阻止你这样做。文档数据库中没有参照完整性约束。

在现实世界中，您可能会在将课程添加到学生之前添加课程，并且从课程中删除所有学生并不意味着没有课程。所以真的，只有像重命名课程这样的操作必须同时触及课程文档和所有具有关系的学生文档。

通常您只想使用`IList<string> CourseIds`. 不需要非规范化。查看[此文档](http://ravendb.net/docs/client-api/querying/handling-document-relationships)以获取更多详细信息。

# php - 如何按图像宽度排序/交替图像阵列？

> ID：14450933
> 
> 赞同：0
> 
> 时间：2013-01-22T03:06:47.893
> 
> 标签：php, sorting

在 MVC 应用程序中工作并获取图像数组：

## 控制器

```
<?php
// model
$this->load->model('catalog/manufacturer');
// data array
$this->data['manufacturers'] = array();
// database data
$results = $this->model_catalog_manufacturer->getManufacturers();
// populating array
foreach ($results as $result)
  {
  $this->data['manufacturers'][] = array(
    // HTTP_IMAGE is where images are stored
    'thumb' => HTTP_IMAGE . $result['image'],
    'href'  => $this->url->link('product/manufacturer/product', 'manufacturer_id=' . $result['manufacturer_id'])
  );
  }
// view
$this->render();
?> 
```

图像具有不同的比例大小（平方、垂直和水平）。

如何订购阵列（在渲染之前）交替一个窄图像和一个宽图像？（客户的请愿书比想象的更奇怪）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:10:58.547

做这样的事情怎么样：

1）获取每张图片，按长宽比对列表进行排序

2）将列表分为前半部分和后半部分

3）根据某种算法交替使用前半部分和后半部分的图像（从左取，从右取或随机取每一半，所以已经有 9 种可能性）

# java - 使用递归替换字符串序列

> ID：14450938
> 
> 赞同：0
> 
> 时间：2013-01-22T03:07:45.957
> 
> 标签：java, string, recursion, replace

Java 有 replace() 和 replaceAll() 方法可以用给定的新模式替换字符串的部分/序列。该函数的内部是如何工作的？如果我必须编写一个函数来输入字符串、OldPattern、NewPattern 并在不使用 RegEx的情况下**递归地**用NewPattern 替换每次出现的 OldPattern怎么办？我已经使用 String 输入的迭代完成了以下代码，它似乎可以工作。如果输入是字符数组而不是字符串怎么办？

```
 public String replaceOld(String aInput, String aOldPattern, String aNewPattern)
        {
             if ( aOldPattern.equals("") ) {
                throw new IllegalArgumentException("Old pattern must have content.");
             }

             final StringBuffer result = new StringBuffer();
             int startIdx = 0;
             int idxOld = 0;
             while ((idxOld = aInput.indexOf(aOldPattern, startIdx)) >= 0) {
               result.append( aInput.substring(startIdx, idxOld) );
               result.append( aNewPattern );

               //reset the startIdx to just after the current match, to see
               //if there are any further matches
               startIdx = idxOld + aOldPattern.length();
             }
             //the final chunk will go to the end of aInput
             result.append( aInput.substring(startIdx) );
             return result.toString();
          } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:26:45.953

> Java 有 replace() 和 replaceAll() 方法可以用给定的新模式替换字符串的部分/序列。

准确地说，这些方法创建了替换相关字符的新字符串。Java 字符串是不可变的。

> 该函数的内部是如何工作的？

这太复杂了，无法在这里详细解释。（并且细节实际上可能因一种实现而异）。最好的办法是自己阅读相关库类的源代码。（源代码作为 JDK 的一部分分发，您的 Java IDE 应该能够向您展示它。或者，谷歌搜索会在网络上为您找到它。）

> 如果我必须编写一个函数来输入字符串、OldPattern、NewPattern 并在不使用 RegEx 的情况下递归地用 NewPattern 替换每次出现的 OldPattern 怎么办？

好吧，如果您正在谈论在不使用`Pattern`该类的情况下进行模式匹配/替换，那么是的，这*将*很棘手……更不用说毫无意义了。

（递归解决方案可能很危险。考虑这个问题：“递归地用“a”中的“ba”替换“a”的所有实例。结果应该是什么？你甚至应该尝试这样做吗？）

* * *

假设参数是简单的字符串（不是您描述的模式），那么这里是一个递归解决方案（未经测试）：

```
public String replace1(String in, String target, String replacement) {
    if (target.isEmpty()) {
        return in;
    }
    int pos = in.indexOf(target);
    if (pos < 0) {
        return in;
    }
    String updated = in.substring(0, pos) + replacement + 
                     in.substring(pos + target.length());
    return replace1(updated, target, replacement);
} 
```

这解决了¹您希望替换为递归的问题版本；即您要替换`target`由替换过程插入的实例的位置。如果您不想这样做，那么：

```
public String replace2(String in, String target, String replacement) {
    if (target.isEmpty()) {
        return in;
    }
    int pos = in.indexOf(target);
    if (pos < 0) {
        return in;
    }
    return in.substring(0, pos) + replacement + 
                     replace2(in.substring(pos + target.length()),
                             target, replacement);
} 
```

请注意，这些很可能*比*您最初的迭代解决方案效率低。甚至忽略正在进行的所有字符串复制。Java 不进行尾调用优化。

* * *

^(1 - 如果你`replace1`用病态参数调用，你会得到堆栈溢出。例如`replace1("ab", "b", "b")`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:27:21.100

尝试

```
public static String replaceOld(String aInput, String aOldPattern, String aNewPattern, int i) {
    i = aInput.indexOf(aOldPattern, i);
    if (i == -1) {
        return aInput;
    }
    aInput = aInput.substring(0, i) + aNewPattern + aInput.substring(i + aOldPattern.length());
    return replaceOld(aInput, aOldPattern, aNewPattern, i + aNewPattern.length());
} 
```

请注意，param`i`用于优化，因此 indexOf 不会每次都从 pos 0 开始扫描。它还解决了“a”问题中“递归地用“ba”替换“a”的所有实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:36:04.600

也许这种方法会回答你的问题。

```
 static int indexOf(char[] string, char[] pattern, int startIndex) {
     int index = startIndex;
     while(true) {
         while(index < string.length && string[index] != pattern[0]) index++;
         if(index >= string.length || index+pattern.length > string.length) return -1;
         boolean match = true;
         for(int i = 1; i < pattern.length; i++) {
             if(string[index+i] != pattern[i]) {
                 match = false;
                 break;
             }
         }
         if(match) return index;
         else index += 1;
     }
  } 
```

如果你想要一个递归替换方法，使用这个

```
static String replace(String string, String pattern, String replacement) {
  int index = string.indexOf(pattern);
  if(index < 0) return string;
  int endIndex = index+pattern.length();
  return string.substring(0, index) + replacement +
      replace(string.substring(endIndex), pattern, replacement);
} 
```

# php - 在 PostgreSQL 数据库调用中保留引号

> ID：14450948
> 
> 赞同：0
> 
> 时间：2013-01-22T03:09:22.313
> 
> 标签：php, sql, postgresql

我有一个表，其中包含带引号和不带引号的列名，例如：`username`和`"phoneNumber"`. 当我查询数据库时，这些列都显示为不带引号。目前，我正在使用：

```
$array = pg_fetch_all(pg_query($db, $query)); 
```

当我从数据库中查询行时，有什么方法可以保留引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:45:15.337

你基本上有两个选择。传统的建议是“不要使用带引号的标识符，只需小写所有内容。” 这很好，而且更可取，因为它减少了错误地对错误的表或列运行查询的情况。

另一种选择是一直引用所有内容。这样您就不必担心保留引用，因为它始终存在。

在 LedgerSMB 中，我们实际上两者都做。引用主要是为了避免 SQL 注入（我们通过返回引用字符串的函数运行标识符）。但是，我们还对小写名称进行了标准化，以便在 psql 等中运行查询时引用不会引起问题。所以我的建议是`pg_escape_identifier`一致地使用小写标识符并标准化。

# c# - 从单个基于线程的任务中收集来自多个基于 IO 的任务的数据

> ID：14450957
> 
> 赞同：1
> 
> 时间：2013-01-22T03:10:33.943
> 
> 标签：c#, io, task-parallel-library, tpl-dataflow

使用 TPL，我如何从多个 IO 源（“无线程”任务）收集结果并将它们合并到一个序列中，因为它们从各自的源进来，而不为每个源生成一个基于线程的任务来监视它们？从一个线程轮询源是否安全？

```
while (true)
{
    try
    {
        IEnumerable<UdpClient> readyChannels = 
            from channel in channels
            where channel.Available > 0
            select channel;

        foreach( UdpClient channel in readyChannels)
        {
           var result = await channel.ReceiveAsync();
           //do something with result like post to dataflow block.
        }
    }
    catch (Exception e)
    {
        throw (e);
    }
    ... 
```

那样的事情怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:50:09.170

我在这里看到几个选项：

如果您想启动对 的调用`ReceiveAsync()`，请将它们设置为对结果执行某些操作（例如，如您所说，发送到数据流块）然后忘记它们，您可以使用`ContinueWith()`：

```
foreach (var channel in readyChannels)
{
   channel.ReceiveAsync().ContinueWith(task => 
   {
       var result = task.Result;
       //do something with result like post to dataflow block.
   }
} 
```

这样做的一个缺点是您需要在每个延续中处理异常。

可能更好的方法是使用[`OrderByCompletion()`](http://nitoasyncex.codeplex.com/wikipage?title=TaskExtensions&referringTitle=Documentation)Stephen Cleary 的 AsyncEx。这样，您可以一次开始所有读取并在它们完成时对其进行处理：

```
var tasks = readyChannels.Select(c => c.ReceiveAsync()).OrderByCompletion();

foreach (var task in tasks)
{
   var result = await task;
   //do something with result like post to dataflow block.
} 
```

如果您想限制并行性，另一个有用的选项是使用`TransformBlock`：

```
var receiveBlock = new TransformBlock<UdpClient, UdpReceiveResult>(
    c => c.ReceiveAsync(),
    new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = degreeOfParallelism });
foreach (var channel in readyChannels)
    receiveBlock.Post(channel);
receiveBlock.Complete();

// set up processing here

await receiveBlock.Completion; 
```

如果您想将结果发送到另一个块，那么上面评论中提到的处理包括简单地将它们链接在一起：

```
receiveBlock.LinkTo(anotherBlock); 
```

* * *

在上述所有情况下，从来没有线程阻塞来监视任何东西。但是要调用`ReceiveAsync()`然后处理结果的代码必须在*某处*执行。

# css - 将多个 div 对齐到父 div 的底部

> ID：14450958
> 
> 赞同：7
> 
> 时间：2013-01-22T03:10:34.387
> 
> 标签：css, html, styles

我在父 div 中有多个子 div。使用**CSS**，是否可以将所有子 div 垂直对齐到父容器的底部，以便显示如下内容：

![在此处输入图像描述](../Images/c83decb1797ad956de4270141cf628af.png)

子 div 的高度将是未知的（动态的）。

```
<p>Top of page</p>
<div id="container">
<div class="message">Message 4</div>
<div class="message">Message 3</div>
<div class="message">Message 2</div>
<div class="message">Message 1</div>
</div>
<p>Bottom of page</p> 
```

下面的样式：

```
#container {

    height: 500px;

    } 
```

[问题演示](http://jsfiddle.net/arunpjohny/49RqX/)。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T03:16:24.513

您可以对容器使用以下样式

```
display: table-cell;
vertical-align: bottom; 
```

[解决方案演示在这里](http://jsfiddle.net/arunpjohny/49RqX/1/)。

# python - Python：遍历列表项 x 次？

> ID：14450966
> 
> 赞同：7
> 
> 时间：2013-01-22T03:11:17.123
> 
> 标签：python, python-2.7

我正在使用 Python2.7，我想循环一个列表 x 次。

```
a=['string1','string2','string3','string4','string5']
for item in a:
  print item 
```

上面的代码将打印列表中的所有五个项目，如果我只想打印前 3 个项目怎么办？我在互联网上搜索但找不到答案，似乎 xrange() 可以解决问题，但我不知道怎么做。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T03:18:36.767

[序列切片](http://docs.python.org/release/2.3.5/whatsnew/section-slices.html)是您正在寻找的。在这种情况下，您需要将序列分割为前三个元素以打印它们。

```
a=['string1','string2','string3','string4','string5']
for item in a[:3]:
      print item 
```

甚至，您不需要遍历序列，只需[将](http://docs.python.org/2/library/stdtypes.html#str.join)其与换行符连接并打印即可

```
print '\n'.join(a[:3]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T03:20:21.417

我认为这将被视为*pythonic*：

```
for item in a[:3]:
    print item 
```

**编辑**：由于几秒钟的时间使这个答案变得多余，我将尝试提供一些背景信息：

**数组切片**允许在字符串列表等序列中快速选择。一维序列的子序列可以由左右端点的索引指定：

```
>>> [1,2,3,4,5][:3] # every item with an index position < 3
[1, 2, 3]
>>> [1,2,3,4,5][3:] # every item with an index position >= 3
[4, 5]
>>> [1,2,3,4,5][2:3] # every item with an index position within the interval [2,3)
[3] 
```

请注意，左端[点包括在内](http://en.wikipedia.org/wiki/Interval_%28mathematics%29)，右端点不包括在内。您可以添加第三个参数以仅选择`n`序列的每个 th 元素：

```
>>> [1,2,3,4,5][::2] # select every second item from list
[1, 3, 5]
>>> [1,2,3,4,5][::-1] # select every single item in reverse order
[5,4,3,2,1]
>>> [1,2,3,4,5][1:4:2] # every second item from subsequence [1,4) = [2,3,4]
[2, 4] 
```

通过将列表转换为[numpy](http://www.numpy.org/)数组，甚至可以执行多维切片：

```
>>> numpy.array([[1,2,3,4,5], [1,2,3,4,5]])[:, ::2]
array([[1, 3, 5],
       [1, 3, 5]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:18:04.453

```
a=['string1','string2','string3','string4','string5']
for i in xrange(3):
    print a[i] 
```

# python - 用于估计实数、正方形、非负矩阵的 Perron-Frobenius 特征值的 Python 包

> ID：14450969
> 
> 赞同：7
> 
> 时间：2013-01-22T03:11:43.427
> 
> 标签：python, numpy, scipy, sparse-matrix

是否有优化的包或方法来估计实数、方形、非负矩阵的 Perron-Frobenius 特征值？这可能比精确计算快得多（尤其是对于大型和/或稀疏矩阵）——因为可以通过迭代矩阵来获得 Perron-Frobenius 特征值。我希望存在一个优化的包来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T06:08:21.740

在`scipy.sparse.linalg`您拥有[`eigs`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.eigs.html)使用[`eigsh`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.eigsh.html)ARPACK[库](http://www.caam.rice.edu/software/ARPACK/)的功能。您可以在[本教程](http://docs.scipy.org/doc/scipy/reference/tutorial/arpack.html)中阅读更多内容，但如果`a`是方阵，可能是稀疏格式，则可以得到其最大量级特征值，即其 Perron-Frobenius 特征值，对应的特征向量为：

```
val, vec = scipy.sparse.linalg.eigs(a, k=1, which='LM') 
```

# jsf-2 - 素面。绑定数据模型不起作用。ListDataModel.getWrappedData() 返回 null

> ID：14450971
> 
> 赞同：0
> 
> 时间：2013-01-22T03:11:48.660
> 
> 标签：jsf-2, primefaces

我在 Tomcat 7.0.23 上尝试这个[例子。](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)单击一行时不会填充对话框“dialog”和“multiDialog”，因为 getWrappedData() 返回 null。这是`List<Car> cars = (List<Car>) getWrappedData();`CarDataModel 的方法 getRowData 中的一行。 ![在此处输入图像描述](../Images/77dae40588a73992cf2496b962bcbbfe.png)

如果我使用 rowKey 属性而不是绑定，它可以工作。

```
<p:dataTable id="cars" var="car" value="#{tableBean.cars}" paginator="true" rows="10"  
                 selection="#{tableBean.selectedCar}"
                 rowKey="#{car.model}"> 
```

问题是什么？

这是我的 pom.xml 中的一个片段

```
<dependency>
    <groupId>org.primefaces</groupId>
    <artifactId>primefaces</artifactId>
    <version>3.4</version>
</dependency>
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-api</artifactId>
    <version>2.1.13</version>
    <scope>compile</scope>
</dependency>
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-impl</artifactId>
    <version>2.1.13</version>
    <scope>compile</scope>
</dependency> 
```

我的汽车数据模型

```
package data;
import java.io.Serializable;
import java.util.List;
import javax.faces.model.ListDataModel;
import org.primefaces.model.SelectableDataModel;

public class CarDataModel extends ListDataModel<Car> implements SelectableDataModel<Car>, Serializable{    
    private static final long serialVersionUID = -6094333899604122284L;

    public CarDataModel() {
    }  

    public CarDataModel(List<Car> data) {
        super(data);  
    }

    @Override  
    @SuppressWarnings("unchecked")
    public Car getRowData(String rowKey) {
        //In a real app, a more efficient way like a query by rowKey should be implemented to deal with huge data  
        List<Car> cars = (List<Car>) getWrappedData();
        for (Car car : cars) {
            if (car.getModel().equals(rowKey))
                return car;
        }
        return null; 
    }

    @Override  
    public Object getRowKey(Car car) {
        return car.getModel();  
    }  
} 
```

我的 TableBean

```
package data;
import java.io.Serializable;  
import java.util.ArrayList;  
import java.util.List;  
import java.util.UUID;  
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class TableBean implements Serializable {
    private static final long serialVersionUID = 2213388781051004157L;

    private final static String[] colors;  

    private final static String[] manufacturers;  

    static {  
        colors = new String[10];  
        colors[0] = "Black";  
        colors[1] = "White";  
        colors[2] = "Green";  
        colors[3] = "Red";  
        colors[4] = "Blue";  
        colors[5] = "Orange";  
        colors[6] = "Silver";  
        colors[7] = "Yellow";  
        colors[8] = "Brown";  
        colors[9] = "Maroon";  

        manufacturers = new String[10];  
        manufacturers[0] = "Mercedes";  
        manufacturers[1] = "BMW";  
        manufacturers[2] = "Volvo";  
        manufacturers[3] = "Audi";  
        manufacturers[4] = "Renault";  
        manufacturers[5] = "Opel";  
        manufacturers[6] = "Volkswagen";  
        manufacturers[7] = "Chrysler";  
        manufacturers[8] = "Ferrari";  
        manufacturers[9] = "Ford";  
    }  

    private List<Car> cars;  

    private Car selectedCar;  

    private Car[] selectedCars;  

    private CarDataModel mediumCarsModel;  

    public TableBean() {  
        cars = new ArrayList<Car>();  

        populateRandomCars(cars, 50);  

        mediumCarsModel = new CarDataModel(cars);  
    }  

    public Car[] getSelectedCars() {  
        return selectedCars;  
    }  
    public void setSelectedCars(Car[] selectedCars) {  
        this.selectedCars = selectedCars;  
    }  

    public Car getSelectedCar() {  
        return selectedCar;  
    }  

    public void setSelectedCar(Car selectedCar) {  
        this.selectedCar = selectedCar;  
    }  

    private void populateRandomCars(List<Car> list, int size) {  
        for(int i = 0 ; i < size ; i++)  
            list.add(new Car(getRandomModel(), getRandomYear(), getRandomManufacturer(), getRandomColor()));  
    }  

    private int getRandomYear() {  
        return (int) (Math.random() * 50 + 1960);  
    }  

    private String getRandomColor() {  
        return colors[(int) (Math.random() * 10)];  
    }  

    private String getRandomManufacturer() {  
        return manufacturers[(int) (Math.random() * 10)];  
    }  

    private String getRandomModel() {  
        return UUID.randomUUID().toString().substring(0, 8);  
    }  

    public CarDataModel getMediumCarsModel() {  
        return mediumCarsModel;  
    }  

    public List<Car> getCars() {
        return cars;
    }
} 
```

我的 datatableRowSelectionRadioCheckbox.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    template="/WEB-INF/templates/template.xhtml">
    <ui:define name="title">DataTable - RadioCheckbox</ui:define> 
    <ui:define name="content">
        <h:form id="form">

            <p:dataTable id="cars" var="car" value="#{TableBean.mediumCarsModel}" paginator="true" rows="10"  
                 selection="#{TableBean.selectedCar}"> 

                <f:facet name="header">
                    RadioButton Based Selection  
                </f:facet>

                <p:column selectionMode="single" style="width:18px" />

                <p:column headerText="Model">
                    #{car.model}  
                </p:column>

                <p:column headerText="Year">
                    #{car.year}  
                </p:column>

                <p:column headerText="Manufacturer" >
                    #{car.manufacturer}  
                </p:column>  

                <p:column headerText="Color">
                    #{car.color}  
                </p:column>

                <f:facet name="footer">
                    <p:commandButton id="viewCommand" value="View" icon="ui-icon-search"  
                                     update=":form:displaySingle" oncomplete="singleCarDialog.show()"/>  
                </f:facet>  
            </p:dataTable>  

            <p:dataTable id="multiCars" var="car" value="#{TableBean.mediumCarsModel}" paginator="true" rows="10"  
                 selection="#{TableBean.selectedCars}">  

                <f:facet name="header">  
                    Checkbox Based Selection  
                </f:facet>  

                <p:column selectionMode="multiple" style="width:18px" />  

                <p:column headerText="Model">  
                    #{car.model}  
                </p:column>  

                <p:column headerText="Year">  
                    #{car.year}  
                </p:column>  

                <p:column headerText="Manufacturer" >  
                    #{car.manufacturer}  
                </p:column>  

                <p:column headerText="Color">  
                    #{car.color}  
                </p:column>  

                <f:facet name="footer">  
                    <p:commandButton id="multiViewButton" value="View" icon="ui-icon-search"  
                                     update=":form:displayMulti" oncomplete="multiCarDialog.show()"/>  
                </f:facet>  
            </p:dataTable>  

            <p:dialog id="dialog" header="Car Detail" widgetVar="singleCarDialog" resizable="false"  
                      showEffect="fade" hideEffect="explode">  

                <h:panelGrid id="displaySingle" columns="2" cellpadding="4">  

                    <f:facet name="header">  
                        <ui:param name="resourceName" value="images:cars/#{TableBean.selectedCar.manufacturer}.jpg"/>
                        <p:graphicImage value="#{resource[resourceName]}"/>  
                    </f:facet>  

                    <h:outputText value="Model:" />  
                    <h:outputText value="#{TableBean.selectedCar.model}" />  

                    <h:outputText value="Year:" />  
                    <h:outputText value="#{TableBean.selectedCar.year}" />  

                    <h:outputText value="Manufacturer:" />  
                    <h:outputText value="#{TableBean.selectedCar.manufacturer}" />  

                    <h:outputText value="Color:" />  
                    <h:outputText value="#{TableBean.selectedCar.color}" />  
                </h:panelGrid>  
            </p:dialog>  

            <p:dialog id="multiDialog" header="Car Detail" widgetVar="multiCarDialog"  
                      height="300" showEffect="fade" hideEffect="explode">  

                <p:dataList id="displayMulti"  
                        value="#{TableBean.selectedCars}" var="selectedCar">  
                    Model: #{selectedCar.model}, Year: #{selectedCar.year}  
                </p:dataList>  

            </p:dialog>  

        </h:form>
    </ui:define>
</ui:composition> 
```

我的模板.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
[
    <!ENTITY nbsp "&#160;"> 
]>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:insert name="metadata"/>
<h:head>
    <title>My Primefaces</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <h:outputStylesheet name="css/default.css" />
    <h:outputStylesheet name="css/primefaces.css" />
    <h:outputStylesheet name="css/syntaxhighlighter.css" />
    <h:outputStylesheet name="css/theme.css" />
</h:head>
<h:body>
    <div id="header" class="ui-widget ui-widget-header">
            <div id="logo">
                <img src="#{resource['images:logo.png']}" alt="Logo" />
            </div>
    </div>
    <div id="page" class="ui-widget">
        <ui:include src="/sidebar/mainmenu.xhtml"/>

        <div id="content">
            <div class="post">
                <h1 class="title ui-widget-header ui-corner-all"><ui:insert name="title">Title</ui:insert></h1>
                <div class="entry" style="line-height:200%">
                    <ui:insert name="content">Main Content</ui:insert>

                </div>
            </div>
        </div>
        <div style="clear: both;">&nbsp;</div>
    </div>

    <div id="footer" class="ui-widget ui-widget-header ui-corner-all">
        <p class="copyright">My test of PrimeFaces-3.4</p>
    </div>
</h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:57:20.930

它是由上下文参数 STATE_SAVING_METHOD = client 引起的。它必须是“服务器”。

# java - 将 2 个微调器与 onItemSelected 一起使用

> ID：14450973
> 
> 赞同：1
> 
> 时间：2013-01-22T03:12:00.953
> 
> 标签：java, android

我查看了几个线程，其中提出的任何建议似乎都无法解决我遇到的问题。我在同一活动中有 2 个旋转器。我从一个微调器中选择的值用于填充另一个微调器，然后我想从第二个微调器中选择一个值。它一直有效，直到我在动态填充后单击第二个微调器，然后应用程序崩溃。我不确定还能做什么。我将发布我拥有的相关代码以及我收到的错误消息。

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bodyregionandpart_layout);
    bodyRegion = (Spinner) findViewById(R.id.bodyregion);
    // Create an ArrayAdapter using the string array and a default spinner layout
    bodyRegionAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, bodyregion);
    // Specify the layout to use when the list of choices appears
    bodyRegionAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Apply the adapter to the spinner
    bodyRegion.setAdapter(bodyRegionAdapter);
    //Sets the spinner to listen when an item is selected
    bodyRegion.setOnItemSelectedListener(this);
}

public void onItemSelected(AdapterView<?> parent, View view, 
        int pos, long id) 
{
     if(parent.getId() == R.id.bodyregion)
     {
         switch(pos)
            {
            case 1:
                FillSpinner(Head);
                Log.d("bodyregion", "This is Head");
                break;
            }                    
     }
     else if(parent.getId() == R.id.bodypart)
     {
         Log.d("bodypart", "This is body part: " + (String) parent.getItemAtPosition(pos));
     }
}

public void onNothingSelected(AdapterView<?> parent) 

{
    // Another interface callback
}

public void FillSpinner(String[] a)
{
    //Fills array with contents of a
    for(int i = 0; i < a.length; i++)
    {
        array[i] = a[i];
    }
    bodyPart = (Spinner) findViewById(R.id.bodypart);
    // Create an ArrayAdapter using the string array and a default spinner layout
    bodyPartAdapter = new ArrayAdapter<String>(this, 
            android.R.layout.simple_spinner_item, array);
    // Specify the layout to use when the list of choices appears
    bodyPartAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Apply the adapter to the spinner
    bodyPart.setAdapter(bodyPartAdapter);
    bodyPart.setOnItemSelectedListener(this);
} 
```

然后这是我收到的错误消息：

```
01-21 22:10:29.616: D/bodyregion(2855): This is Head
01-21 22:10:29.715: D/bodypart(2855): This is body part: Choose Body Part
01-21 22:10:31.385: D/AndroidRuntime(2855): Shutting down VM
01-21 22:10:31.385: W/dalvikvm(2855): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-21 22:10:31.415: E/AndroidRuntime(2855): FATAL EXCEPTION: main
01-21 22:10:31.415: E/AndroidRuntime(2855): java.lang.NullPointerException
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.widget.ArrayAdapter.getDropDownView(ArrayAdapter.java:415)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.widget.Spinner$DropDownAdapter.getDropDownView(Spinner.java:725)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.widget.Spinner$DropDownAdapter.getView(Spinner.java:721)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.widget.Spinner.measureContentWidth(Spinner.java:669)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.widget.Spinner$DropdownPopup.show(Spinner.java:948)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.widget.Spinner.performClick(Spinner.java:597)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.view.View$PerformClick.run(View.java:16966)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.os.Handler.handleCallback(Handler.java:615)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.os.Looper.loop(Looper.java:137)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at java.lang.reflect.Method.invokeNative(Native Method)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at java.lang.reflect.Method.invoke(Method.java:511)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-21 22:10:31.415: E/AndroidRuntime(2855):     at dalvik.system.NativeStart.main(Native Method) 
```

第二条日志消息仅显示微调器创建时的第一个选择。一旦我单击它以选择其他内容，它就会崩溃。任何帮助/建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:20:49.867

做小的改变..检查数组的长度是否大于`0`然后只将适配器设置为第二个微调器

```
public void FillSpinner(String[] a)
    {
        //Fills array with contents of a
        for(int i = 0; i < a.length; i++)
        {
            array[i] = a[i];
        }
        if(array.length>0)
        {
            bodyPart = (Spinner) findViewById(R.id.bodypart);
            // Create an ArrayAdapter using the string array and a default spinner layout
            bodyPartAdapter = new ArrayAdapter<String>(this, 
                    android.R.layout.simple_spinner_item, array);
            // Specify the layout to use when the list of choices appears
            bodyPartAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            // Apply the adapter to the spinner
            bodyPart.setAdapter(bodyPartAdapter);
            bodyPart.setOnItemSelectedListener(this);
        }

    } 
```

# ruby-on-rails - 如何在rails中做一个简单的下拉列表

> ID：14450974
> 
> 赞同：0
> 
> 时间：2013-01-22T03:12:15.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-ui

我希望将我们公司的网站改写为 ROR。我们有典型的一排下拉菜单项（例如“产品和服务”、“关于我们”、“联系方式”等）。

Rails 是否提供了构建这些菜单的快捷方式？

谢谢，

磷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:13:49.853

不在 Rails 本身中。[在Twitter Bootstrap](http://twitter.github.com/bootstrap/)上阅读；它为所有这些东西提供了一个主干结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:35:32.353

```
<%= f.select :page, options_for_select(%w[Services About\ Us Contact]) %> 
```

（其中 page 是字段名称），应该可以，请检查[如何在 rails 表单中有一个下拉 <select> 字段？](https://stackoverflow.com/q/14113057/692622)也为了更好的说明和例子

# ios - UI 不显示来自初始化程序的值

> ID：14450976
> 
> 赞同：0
> 
> 时间：2013-01-22T03:12:21.713
> 
> 标签：ios, objective-c, initialization

试图将默认值传递给 ViewController 对象的实例。代码在没有警告的情况下编译，我逐步查看设置的值，但是，当应用程序启动时，UI 上的值又归零。就好像我正在创建两个不同的实例，但对于我的一生来说，我无法理解为什么初始化值不是已启动应用程序的一部分。这是实现和 main.m 代码。任何帮助表示赞赏。

```
#import "AppDelegate.h"
#import <UIKit/UIKit.h>
#import "ViewController.h"
int main(int argc, char *argv[]) {
//NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    @autoreleasepool {
        ViewController *viewController;
        viewController = [[ViewController alloc]initWithBinauralFrequencyLeft:82.4
                                                        binauralFreqRight:82.4 
                                                              octaveValue:1
                                                         baseScaleSetting:82.4
                                                       binauralBaseVolume:800
                                                      globalBaseSongCount:0];
        int retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));

        //[pool release];
        return retVal;
    }
}

-(id)initWithBinauralFrequencyLeft:(double)binauralFreqL
             binauralFreqRight:(double)binauralFreqR
                   octaveValue:(double)octaveVal
              baseScaleSetting:(double)baseScaleSet
            binauralBaseVolume:(int)binauralVolume
           globalBaseSongCount:(int)globalSongCount;
{
    self = [super init];
    if (self){
    [self setBinauralFreqL:82.4];
    [self setBinauralFreqR:82.4];
    [self setOctaveVal:1];
    [self setBaseScaleSet:82.4];
    [self setBinauralVolume:800];
    [self setGlobalSongCount:0];   
}
return self;
}

-(id)init
{
   return [self initWithBinauralFrequencyLeft:82.4 binauralFreqRight:82.4 octaveValue:1              baseScaleSetting:82.4 binauralBaseVolume:800 globalBaseSongCount:0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:24:53.257

ViewController 很可能实际上是从您的 AppDelegate.m 文件中实例化的 - 在那里检查。它可能只是发送标准的初始化消息，而不是您自定义的消息。

我认为不应在调用 UIApplicationMain 之前创建 ViewController。

# javascript - 无法弄清楚如何设置对象文字 JS 组织

> ID：14450978
> 
> 赞同：0
> 
> 时间：2013-01-22T03:13:03.850
> 
> 标签：javascript, object, object-literal

我刚刚阅读了本教程： [http ://rmurphey.com/blog/2009/10/15/using-objects-to-organize-your-code/](http://rmurphey.com/blog/2009/10/15/using-objects-to-organize-your-code/)

我试图以对象文字格式设置一个函数（通用且可重用）。但我似乎无法让它工作？有人看到我的代码有问题吗？

```
 // Generic Email Signup via Bronto
var emailSignup = {
    'config' : {
        // Configurable Options
        'container' : $('#email-signup'),
        'emailButton' : $('#email-submit'),
        'emailErrorContainer' : $('#email-error'),
        'emailInput' : $('#mail-signup-input'),
        'brontoDirectAddURL' : 'http://app.bronto.com/public/?q=direct_add&fn=Public_DirectAddForm&id=cczmcguxestyqabxqmbvwznavplrbom&email=',
        'brontoListID' : '0bbc03ec000000000000000000000003287b',

        // configurable function for getting
        // a URL for loading item content

    },
    'init' : function(config) {
        // stays the same
        // provide for custom configuration via init()
        if (config && typeof(config) == 'object') {
            $.extend(emailSignup.config, config);
        }

        // create and/or cache some DOM elements
        // we'll want to use throughout the code
        emailSignup.$container = emailSignup.config.container;
        emailSignup.$errorContainer = emailSignup.config.emailErrorContainer;
        emailSignup.$button = emailSignup.config.emailButton;
        emailSignup.$input = emailSignup.config.emailInput;

        // Add email track to drop image pixel into for submission
        emailSignup.$errorContainer.append('<div class="track"></div>');

        // Call getEmail
        emailSignup.getEmail(emailSignup.$button);

        // make a note that the initialization
        // is complete; we don't strictly need this
        // for this iteration, but it can come in handy
        emailSignup.initialized = true;

    },
    'getEmail' : function($button) { 

        // click event
        emailSignup.$button.click(function(){
            console.log('test click');
        });   

    },
    'validateEmail' : function() { 

        var $emailRegEx = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var $emailVal = emailSignup.$input.val();

    },
    'submitEmail' : function($emailVal) {
            $(".track").html('<img src="http://app.bronto.com/public/?q=direct_add&fn=Public_DirectAddForm&id=cczmcguxestyqabxqmbvwznavplrbom&email=' +  email + '&list1=0bbc03ec000000000000000000000003287b" width="0" height="0" border="0" alt=""/>');
     },
};

$(document).ready(function() {
    emailSignup.init({ 'emailInput' : '#email-input' });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:59:28.827

没关系，它似乎工作正常。

# html - 镜像 HTML 元素，可能使用 shadow DOM

> ID：14450982
> 
> 赞同：10
> 
> 时间：2013-01-22T03:13:50.410
> 
> 标签：html, dom, shadow-dom

我希望在页面的多个位置呈现“相同”的 HTML 元素。这个元素是脚本/动画的，各种渲染需要保持同步。

我考虑过的解决方案包括：

1.  将元素的副本放在多个位置并更新所有位置。这是我试图避免的。
2.  将元素的副本放在多个位置。更新其中一个副本，并使用突变事件来捕获这些更改并针对其他副本重放它们。似乎工作量很大。
3.  使用影子 DOM。我对这个替代方案寄予厚望，它最初似乎是可能的，使用“插入点”，它允许这里的 DOM 子树虚拟地放置在那里的 DOM 子树中。

我还没有测试过[Chrome 25 中提供的](http://blog.chromium.org/2013/01/content-security-policy-and-shadow-dom.html)最后一个替代方案。[W3C 规范](https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/shadow/)说：

> 值得特别考虑的一种情况是插入点是另一个影子主机的子节点的情况......**一个节点被分布到多个插入点**的效果称为重投影。

但是之后...

> 尽管在重投影期间被分配到多个插入点，但由于重投影发生的约束，**节点仍然只渲染一次**：由于插入点仅在它们是影子主机的子节点时才受到重投影，因此它们是从未渲染。相反，阴影树被渲染在他们的位置。

影子 DOM 似乎有可能做我想做的事情并且值得测试，还是有其他推荐的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T13:29:59.113

Shadow DOM 重投影不能满足您的要求。

我是在 Chrome 中实现 Shadow DOM 的团队的一员。规范中的评论是正确的——Shadow DOM 中的内容最多渲染一次。

以下是一些可能有用的想法，具体取决于您要实现的目标：

Firefox 有一个实验性功能，[可以将元素用作背景。](https://developer.mozilla.org/en-US/docs/CSS/element "-moz 元素文档")这是在 CSS 中使用的`background: -moz-element(#foo);`，其中*foo*是您要复制的元素的 ID。图像是“活的”；元素的变化会反映在它用作背景的任何地方。

Using`-moz-element`有一些潜在的缺点： 它只在某些版本的 Firefox 中实现；它是实验性的，这意味着该功能可能会在某个时候改变或消失；并且副本不是交互式的——你不能点击那里的按钮，将鼠标悬停在副本上不会触发`:hover`样式，等等。

如果您希望所有副本都是交互式的，请使用 Mutation Observers。有[一个名为 Mutation Summary 的库](https://code.google.com/p/mutation-summary/ "突变摘要项目页面")，它包装了 Mutation Observers 并包含[一个示例 Chrome 扩展](https://code.google.com/p/mutation-summary/source/browse/#git%2Fexamples%2Fpagemirror_extension%253Fstate%253Dclosed)，它反映了整个页面。您可以调整它以镜像 DOM 的子树。根据您的应用程序，您还可以使用 Mutation Observers 来双向镜像 DOM。

# android - 适合所有屏幕尺寸的 Appwidget 最大宽度

> ID：14450983
> 
> 赞同：6
> 
> 时间：2013-01-22T03:13:54.270
> 
> 标签：android, width, screen, android-appwidget

我目前正在开发一个 appwidget，不幸的是它不适合屏幕尺寸更大的手机。如何确保 appwidget 对所有类型的手机都具有全宽？

起初我认为这可以通过使用来完成，`width="fill_parent"`但它不起作用..小部件没有填充手机的宽度（我不确定它是否基于 xml 文件夹下的 minWidth ）

我也尝试过添加`layout-sw480dp,layout-sw600dp,layout-sw720dp`，但它仍然无法正常工作...... appwidget 只是不会填满手机的整个宽度......

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-07T11:57:29.780

App Widget 的大小四舍五入到最接近的网格大小，因此将 minWidth 设置为较大的值可能是个好主意。不幸的是，它不会起作用。如果您尝试它，您的小部件将不会显示在要添加到主屏幕的小部件列表中。

您只需通过 docs: 中的公式计算 4 个单元格的宽度`70 * cells - 30`，因此它将是 250dp。问题是，在更大的屏幕上，密度很大，主屏幕的宽度超过 4 个单元格。我认为您可以创建多个具有不同宽度的小部件，或者只是使您的小部件可调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-27T06:13:02.550

您可以将 android:minWidth="" 设置为最大值，例如 70 * 5 - 30 ，5 是手机水平布局的最大图标数。

# java - VM 初始化期间发生错误无法为对象堆保留足够的空间

> ID：14450985
> 
> 赞同：2
> 
> 时间：2013-01-22T03:14:15.963
> 
> 标签：java, jvm, loadrunner

我有带有 3Giga Ram 内存的虚拟机。我正在 Loadrunner 上使用 Java 协议。我正在尝试将附加 VM 参数设置为超过 256M，但总是出现此错误。我试过 :-Xms512 -Xmx512 没有成功。请尽快回复 - 我在过去 2 天里一直被这个问题困扰。

谢谢..（我正在使用 jdk 1.6.0，一旦尝试运行流程，我就有 2000MB 的可用内存）

通知：发现 jdk 版本：1.6.0。通知：classpath=D:\seamlessServerPerfTest\SSCallAV\;c:\program files\hp\loadrunner\classes\srv;c:\program files\hp\loadrunner\classes;D:\seamlessServerPerfTest\lib\SSCallAV_8leg.jar;D :\seamlessServerPerfTest\lib\json-lib-2.4-jdk15.jar;D:\seamlessServerPerfTest\lib\todejolt.jar;D:\seamlessServerPerfTest\lib\protobuf-java-2.4.1.jar;D:\jython2.5.2 \Lib\site-packages\trilead-ssh2-build213.jar;D:\jython2.5.2\Lib\site-packages\amessagehandler.jar;D:\jython2.5.2\Lib\site-packages\dblibrary-1.0.jar ;D:\jython2.5.2\Lib\site-packages\jolt.jar;D:\jython2.5.2\Lib\site-packages\ojdbc14.jar;D:\postgreSql\postgresql-9.1-901.jdbc4.jar; ;; 通知：路径=C:\Program Files\Java\jdk1.6.0_12\jre\bin\client;C:\PROGRA~1\HP\LOADRU~1\bin;C:\PROGRA~1\HP\LOADRU~1 \bin\tulip\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;D: **通知：VM 参数：-Xms512m -Xmx512m。通知：VM 初始化期间发生错误通知：无法为对象堆保留足够的空间**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:47:29.100

So, just for clarity...you are engaging in double virtualization. You have a JAVA Virtual machine on top of an OS virtual machine so any call for resources has to thunk through two layers of arbitration before it gets to a physical resource like RAM or CPU, right?

So, have you tried this on a host with only a single layer of arbitration, such as Windows workstation ( for less than 2GB allotments) or Windows server instance (for greater than 2GB allotments) not running inside of a virtual machine? I am trying to remove complexity and moving parts to get to the simplest model which demonstrates the error to elinate the possibility that one of the complexities is the cause.

If you could share some of the end goal this might be helpful as well. Are you experiencing errors related to memory on your virtual users which are driving you to mod the default parameters for the JAVA virtual user machine execution?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T04:07:45.067

真的可能是这样。JVM 可能真的无法保留所需的内存。

如果可行，您可以尝试以下方法

首先，运行`java -XX:MaxHeapSize=512m Test1`. 然后运行`java -Xms512m - Xmx512m Test1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T09:04:21.187

金星

我可以知道您是否使用“Executable\Batch”选项开始记录吗？如果是，请尝试从批处理文件中删除分配堆命令“-Xms512m -Xmx512m”并记录。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-14T07:35:44.857

Your jvm virtual machine ask too much memory in your computer, you could check out wheather your computer memory is enough.

**Solution:** In gradle.properties file, change `org.gradle.jvmargs=-Xmx2048m` into `org.gradle.jvmargs=-Xmx1024m` or less.

![enter image description here](../Images/2d89fe223cf9479fe23019c09059226e.png)

# c# - 根据文本框值更新数据库表

> ID：14450991
> 
> 赞同：2
> 
> 时间：2013-01-22T03:14:55.043
> 
> 标签：c#, asp.net, sql-server-2008, ado.net

我正在尝试根据文本框值更新数据库表。但我无法在数据库中获取新的修改值。

这是我的代码，它在来自数据库的文本框中显示信息

```
protected void Info()
{
    string sID = Request.QueryString["ID"];
    string sSql = "select * from [fn_Items]('"+sID+"')";
    DataTable tbl1 = new DataTable();
    string sEr = myClass.FillupTable(sSql, ref tbl1);
    if (tbl1.Rows.Count > 0)
    {
        DataRow rd = tbl1.Rows[0];
        txtName.Text = rd["Name"].ToString();
        txtCategory.Text = rd["Category"].ToString();
        DateTime mStart;
        DateTime mFinish;
        Boolean b = false;

        b = DateTime.TryParse(rd["start"].ToString(), out mStart);
        b = DateTime.TryParse(rd["end"].ToString(), out mFinish);
        txtStart.Text = mStart.ToString("dd-MMM-yyyy");
        txtend.Text = mFinish.ToString("dd-MMM-yyyy");
        txtDescription.Text = rd["Description"].ToString();

    }
} 
```

现在，当用户修改文本框数据并单击保存时，数据库中的数据应该会发生变化。这是我的click_event：

```
protected void btnSave_Click(object sender, EventArgs e)
{
    using (SqlConnection sqlConn = new 
        SqlConnection("Data Source=MSSQLSERVER2008;Initial Catalog=Items_2;Persist Security Info=True;User ID=sa;Password=password"))
    {

        string query = "UPDATE tbl_Items SET Name = @Name,Category=@Category,start = @start, end = @End,Description = @Description where ID = @ID ";
        SqlCommand cmd = new SqlCommand(query, sqlConn);
        cmd.Parameters.AddWithValue("@ID",txtID.Text);
        cmd.Parameters.AddWithValue("@Name", txtName.Text);
        cmd.Parameters.AddWithValue("@Category", Category.Text);
        cmd.Parameters.AddWithValue("@start", txtStart.Text);
        cmd.Parameters.AddWithValue("@end",txtend.Text);
        cmd.Parameters.AddWithValue("@Description", txtDescription.Text);
        cmd.Connection.Open();
        try
        {
            cmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            throw new Exception("Error " + ex.Message);
        }

    } 
```

在更新时，在文本框中，我正在获取数据库中存在的值，我需要在其中获取修改后的值。如何获取修改后的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T03:41:22.983

在触发 btnSave 的 Click 事件之前首先触发页面加载事件。使用[IsPostBack](http://msdn.microsoft.com/en-us/library/vstudio/system.web.ui.page.ispostback%28v=vs.100%29.aspx)可以消除这个问题。

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!IsPostBack)
   {
     Info();
   }
} 
```

# ruby-on-rails - 重构模型以删除 rails 3 升级的 proxy_options

> ID：14450993
> 
> 赞同：0
> 
> 时间：2013-01-22T03:15:17.850
> 
> 标签：ruby-on-rails, scope, rails-activerecord

我目前正在将 Rails 应用程序从 2.x 升级到 3.1。

想知道是否有人可以帮助重构它以删除 proxy_option 代码（在 rails 3 中不再可用）：

```
scope = Product.scoped({})
scope = scope.scoped( Product.allowed(options[:current_user]).proxy_options )
scope = scope.scoped( Product.for_country(options[:country_ids]).proxy_options ) if options[:country_ids] 
```

范围方法之一的示例包括：

```
 def allowed(user)
    where(:id => user.access_to(self.name))
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:51:57.780

这可能是一个可能的解决方案：[`proxy_options` 现在是否有替代方案，因为它已被删除？导轨](https://stackoverflow.com/questions/4654191/is-there-an-alternative-for-proxy-options-now-that-its-been-removed-rails)

似乎代码正在构建一个 SQL 查询，而不是替换方法，您可能必须通过弄清楚每行试图做什么并使用 Rails 3 范围或 Arel 来获得相同的结果来替换概念。

也许从 Rails 2.x 复制输出 SQL 并将其放入测试中，并确保您的 Rails 3 代码生成具有相同参数的相同 SQL 查询。

# android - Facebook SDK 3 使用 Activity 登录

> ID：14450997
> 
> 赞同：2
> 
> 时间：2013-01-22T03:15:58.333
> 
> 标签：android, facebook, facebook-authentication, facebook-android-sdk

我已阅读[https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#step3](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#step3)上的教程。但是，本教程将登录按钮放在一个片段中。我想将登录按钮小部件直接放在我现有的活动布局中。例如，

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <!-- other layout for my activity -->
    <com.facebook.widget.LoginButton
        android:id="@+id/authButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="30dp"
        />
</LinearLayout> 
```

我试图这样做但徒劳无功（登录按钮上的崩溃或登录状态不正确）。或者是否可以将片段放在我的活动布局中？

# python - 带有 MrJob 的 EMR 上的随机 java.io.FileNotFoundException jobcache 错误

> ID：14450999
> 
> 赞同：1
> 
> 时间：2013-01-22T03:16:00.743
> 
> 标签：python, hadoop, emr, mrjob

我正在使用 MrJob 并尝试在 Elastic Map Reduce 上运行 Hadoop 作业，该作业不断随机崩溃。

数据如下所示（制表符分隔）：

```
279391888       261151291       107.303163      35.468534
279391888       261115099       108.511726      35.503008
279391888       261151290       104.881560      35.278487
279391888       261151292       109.732004      35.659141
279391888       261266862       108.507754      35.434581
279391888       1687590146      59.118796       19.931201
279391888       269450882       58.909985       19.914108 
```

而且底层的 MapReduce 非常简单：

```
from mrjob.job import MRJob
import numpy as np

class CitypathsSummarize(MRJob):
  def mapper(self, _, line):
    orig, dest, minutes, dist = line.split()
    minutes = float(minutes)
    dist = float(dist)
    if minutes < .001:
      yield "crap", 1
    else:
      yield orig, dist/minutes

  def reducer(self, orig, speeds):
    speeds = list(speeds)
    mean = np.mean(speeds)
    yield orig, mean

if __name__ == "__main__":
  CitypathsSummarize.run() 
```

当我运行它时，我使用以下命令，使用默认的 mrjob.conf（我的密钥是在环境中设置的）：

```
$ python summarize.py -r emr --ec2-instance-type c1.xlarge --num-ec2-instances 4 s3://citypaths/chicago-v4/ > chicago-v4-output.txt 
```

当我在小型数据集上运行它时，它完成得很好。当我在整个数据语料库（价值约 10GiB）上运行它时，我会收到这样的错误（但不是每次都在同一点！）：

```
Probable cause of failure (from s3://mrjob-093c9ef589d9f262/tmp/logs/j-KCPTKZR5OX6D/task-attempts/attempt_201301211911_0001_m_000151_3/syslog):
java.io.FileNotFoundException: /mnt2/var/lib/hadoop/mapred/taskTracker/jobcache/job_201301211911_0001/attempt_201301211911_0001_m_000018_4/output/spill0.out
(while reading from s3://citypaths/chicago-v4/1613640660)
Terminating job flow: j-KCPTKZR5OX6D
Traceback (most recent call last):
  File "summarize.py", line 32, in <module>
    CitypathsSummarize.run()
  File "/usr/local/lib/python2.7/dist-packages/mrjob/job.py", line 545, in run
    mr_job.execute()
  File "/usr/local/lib/python2.7/dist-packages/mrjob/job.py", line 561, in execute
    self.run_job()
  File "/usr/local/lib/python2.7/dist-packages/mrjob/job.py", line 631, in run_job
    runner.run()
  File "/usr/local/lib/python2.7/dist-packages/mrjob/runner.py", line 490, in run
    self._run()
  File "/usr/local/lib/python2.7/dist-packages/mrjob/emr.py", line 1048, in _run
    self._wait_for_job_to_complete()
  File "/usr/local/lib/python2.7/dist-packages/mrjob/emr.py", line 1830, in _wait_for_job_to_complete
    raise Exception(msg)
Exception: Job on job flow j-KCPTKZR5OX6D failed with status SHUTTING_DOWN: Shut down as step failed
Probable cause of failure (from s3://mrjob-093c9ef589d9f262/tmp/logs/j-KCPTKZR5OX6D/task-attempts/attempt_201301211911_0001_m_000151_3/syslog):
java.io.FileNotFoundException: /mnt2/var/lib/hadoop/mapred/taskTracker/jobcache/job_201301211911_0001/attempt_201301211911_0001_m_000018_4/output/spill0.out
(while reading from s3://citypaths/chicago-v4/1613640660) 
```

我已经运行了两次；第一次在 45 分钟后死亡，这次在 4 小时后死亡。它两次都死在不同的文件上。我检查了它死掉的两个文件，都没有任何问题。

不知何故，它无法找到它写入的溢出文件，这让我感到困惑。

编辑：

我再次运行该工作，几个小时后它又死了，这次出现了不同的错误消息。

```
Probable cause of failure (from s3://mrjob-093c9ef589d9f262/tmp/logs/j-3GGW2TSIKKW5R/task-attempts/attempt_201301310511_0001_m_001810_0/syslog):
Status Code: 403, AWS Request ID: 9E9E748A55BC6A58, AWS Error Code: RequestTimeTooSkewed, AWS Error Message: The difference between the request time and the current time is too large., S3 Extended Request ID: Ky+HVYZ8RsC3l5f9N3LTwyorY9bbqEnc4tRD/r/xfAHYP/eiQrjjcpmIDNY2eoDo
(while reading from s3://citypaths/chicago-v4/1439606131) 
```