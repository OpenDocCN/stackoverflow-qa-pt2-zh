# StackOverflow 问答 15818000-15818999

# hyperlink - 将 z-index 放置在另一个 div 上方时，div 中的链接将变为非活动状态

> ID：15818001
> 
> 赞同：0
> 
> 时间：2013-04-04T17:39:33.730
> 
> 标签：hyperlink, z-index

我制作了一个 3D 立方体，当您单击立方体上的某个元素时，立方体顶部会显示一个 div（大于立方体）。在这个 div 中有一些链接——问题是，恰好在立方体上方的链接部分不起作用。不在立方体上方的链接部分（它们在右侧或左侧更远）作为链接工作得非常好。我正在使用 z-index 来定位图层，但我根本不知道出了什么问题。如果有人有建议，我将不胜感激。

我在下面添加了我的代码 - 它非常广泛，所以我试图省略不应该与问题相关的元素。我也不认为脚本应该是问题，但我添加了与元素相关的代码以防万一。

谢谢

HTML：

```
<ul id="cube">
        <li class='face' id="facecubeone"></li>
        <li class='face' id="facecubetwo"></li>
        <li class='face' id="facecubethree"></li>
        <li class='face' id="facecubefour">
            <ul class="cube2 low oneleft" id="cubefour1">
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
            </ul>
            <ul class="cube2 high twoleft" id="cubefour2">
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
            </ul>
            <ul class="cube2 high threeleft activefour active" id="cubefour3">
                <li><a href="#" class='square' style="padding-top: 0px;"><img id="mig" src="img/cvbillede.jpg" width="100%" height="100%" alt="ABOUT ME"></img></a></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
            </ul>
            <ul class="cube2 high fourleft activefour active" id="cubefour4">
                <li><a href="#" class='square'>Choko-app<img class="smallpic" id="" src="img/choko.jpg" width="100" alt="picturesoftheapp"></a></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
            </ul>
            <ul class="cube2 high fiveleft" id="cubefour5">
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
            </ul>
            <ul class="cube2 low sixleft" id="cubefour6">
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
            </ul>
            <ul class="cube2 low sevenleft" id="cubefour7">
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
            </ul>
            <ul class="cube2 high eightleft" id="cubefour8">
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
            </ul>
            <ul class="cube2 high nineleft activefour active" id="cubefour9">
                <li><a href="#" class='square'>Visualization <img class="smallpic" id="" src="img/visual.jpg" width="100" alt="pictureofthesite"></a></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
                <li class='square'></li>
            </ul>
        </li>
        <li class='face'></li>
        <li class='face'></li>
    </ul>

<div id="myprojects">

      <div class="projects" id="projectme">
            <a href="#"><img class="exit" src="img/exit.png" alt="exit"></img></a>
            <div class="projecttext">
                <p class="titles">About me</p>
                <p class="descriptions" id="">
                TEXT
                </p>
                <div class="links" id=""><a href="DOCUMENT.pdf" target="_blank">LINK TO RESUME - only part of it works</a><br><a href="#" target="_blank">LINK TO LINKEDIN PROFILE</a></div>    
            </div>
            <img class="projectimages" id="" src="img/cvbillede.jpg" width="310px" height="310px" alt="pictureofme"></img>
        </div>
  </div> 
```

CSS：

```
#cube {
position: fixed;
clear: both;
z-index: 900;
padding: 0;
width: 350px; height: 350px;
list-style: none;

/* centering */
top: 0;
bottom: 0;
left: 0;
right: 0;
margin: auto;

-webkit-transform: rotate3d(-10, 30, -4, 47.5deg);
-webkit-transform-style: preserve-3d;
-webkit-animation: ani 8s infinite linear; }

.cube2 {
position: relative;
/*z-index: 901;*/
float: left;
margin: 0px;
padding: 0;
width: 116.63px; height: 116.63px; 
list-style: none;}

.face, #face {
box-sizing: border-box;
position: absolute;
top: 50%; left: 50%;
margin: -175px;
width: 350px; height: 350px;
background: black; }

.square {
box-sizing: border-box;
position: absolute;
margin-top: 0px;
margin-left: 0px;
padding: 0em;
width: 116.63px; height: 116.63px;
padding-top: 2.5px;
background-color: black;}

#myprojects {
clear: both;
position: absolute;
z-index: 9990;
width: 700px;
height: 400px;
    top: 0;
bottom: 0;
left: 0;
right: 0;
margin: auto;
display: none;}

.projects {
position: relative;
z-index: 9991;
width: 680px;
height: 380px;
padding: 10px;
display: none;

border: 2px solid black;
background: rgb(68,68,68); /* Old browsers */}

.exit { 
width: 20px;
height: 20px;
float: right;}

.projecttext {
clear: both;
position: relative;
z-index: 9992;
margin-top: 0px;
float: left;
height: 350px;
width: 370px;}

.titles {
margin-top: 0px;}

.descriptions {
margin-right: 10px;
height: 220px;
text-align: justify;}

.links a{
position: relative;
line-height: 26px;
z-index: 9999;}

.links a:hover {
}

.projectimages {
margin-top: 43px;
float: right;
width: 310px;} 
```

脚本：

```
 $(function(){       

var visible = false;    

    $('.exit').click(function(){
        $('#myprojects').fadeOut(1500);
        $('.projects').fadeOut(1500);           
        $('.square').attr('href', '#');                         
        $(".activenone").addClass('active');
        $(".active").removeClass('activenone'); 
        visible = false;
    });

        $('#cubefour3').click(function(){
        if (visible == false) {
            $('#myprojects').fadeIn(1500);
            $('#projectme').fadeIn(1500);
            $('.square').removeAttr("href");
            $(".active").addClass('activenone');
            $(".activenone").removeClass('active'); 
            visible = true;
        }
    });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:36:00.387

所以我终于让它工作了:)

我对立方体中的 6 个面中的每一个都应用了变换，使其看起来像 3d，例如：

```
.face:nth-child(6) { 
    -webkit-transform: rotateX(-90deg) translateZ(175px); 
    -moz-transform: rotateY(-90deg) translateZ(175px);
    -ms-transform: rotateY(-90deg) translateZ(175px);
    -o-transform: rotateY(-90deg) translateZ(175px);
    transform: rotateY(-90deg) translateZ(175px);
} 
```

translateZ 以某种方式推翻了我放在它上面的 div，因此链接不起作用。（虽然我对此没有任何解释）。然后我对新的 div 应用了转换，如下所示：

```
.projects {
    -webkit-transform: translateZ(275px); 
    -moz-transform: translateZ(275px);
    -ms-transform: translateZ(275px);
    -o-transform:translateZ(275px);
    transform: translateZ(275px);
} 
```

令人惊讶的是，它现在似乎正在工作:)

# apache - .htaccess - 从子域根目录重定向到子域的文件夹 (mod_rewrite/mod_proxy)

> ID：15818003
> 
> 赞同：0
> 
> 时间：2013-04-04T17:39:37.370
> 
> 标签：apache, mod-rewrite, subdomain, mod-proxy

**问题**

我正在尝试从子域的根文件夹重定向到子域`sub.example.com`的子目录，并将子域保留在地址栏中，例如`sub.example.com/subdir1`。

这不是我第一次使用`mod_rewrite`，但我不是专家。我以前没有使用`mod_proxy`过，但我相信这个任务需要它。

**背景**

这是我正在处理的项目的一部分，其中网络主机是私有的，但服务器无法修改。我需要使用他们的工具指定所有子域，而不是自己创建重写。这个问题与用作开发站点的子域有关，该子域最终将在不成为子域的情况下上线，例如在上线时`sub.example.com`将`sub.com`变为。我不能简单地将子域的根文件夹设置为我要重定向到的目录的原因是项目的代码库严重依赖于`DOCUMENT_ROOT`内部链接管理，而目标文件夹`sub.example.com/subdir1`不是地点。

**我做了什么**

*我首先要说我已经超出了我分配的时间来解决这个问题，主要是出于兴趣。*

我做了很多研究，并试图从我看过的资料中提取点点滴滴。但是，除了我查看的来源[之一](https://stackoverflow.com/questions/8481005/how-to-redirect-from-a-subdomain-to-a-subfolder-using-htaccess)之外，所有来源都只有从子域重定向到站点根目录的子目录的信息，例如`sub.example.com`-> `example.com/root-subdir`。事实上，上述页面确实包含与我的问题相关的信息的唯一原因是因为提出问题的用户不小心做了我目前正在尝试做的事情。不幸的是，他所做的仍然对我不起作用。这是我现在正在尝试的（但给了我“310 - 重定向太多”错误）：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^sub\.example\.com
RewriteRule ^ /subdir1/ [R=301,L] 
```

如前所述，我认为我可能需要使用`mod_proxy`它，但我不知道它会是什么样子。

您可以提供的任何帮助将不胜感激。感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:48:59.803

现在，如果您只想重定向`sub.example.com`到`sub.example.com/subdir1`，请尝试一下：

```
RewriteCond %{HTTP_HOST} ^sub.example.com
RewriteRule ^/?$ /subdir1 [R=301] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T19:07:52.697

@faa 在评论中给出的解决方案并没有完全解决我的问题，因为我真正的错误是忘记匹配子域的根，并且只匹配根。@faa 做到了，但是让我回到了正确的轨道，并回答了我关于防止循环的问题。我从使用他的代码片段中获得的信息让我意识到我需要什么，我在[这个](https://serverfault.com/a/58787/130028)ServerFault 问题的解决方案中找到了这些信息。

我的最终解决方案如下：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^sub\.example\.com [NC]
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^(.*)$ /subdir1/ [R=301,L] 
```

感谢大家的帮助！

# c++ - 为对象分配 boost::lambda::bind 的返回值？

> ID：15818005
> 
> 赞同：2
> 
> 时间：2013-04-04T17:39:47.410
> 
> 标签：c++, boost-lambda

我认为存储一个绑定的 lambda 函数以供以后使用可能很有用，但我还没有看到任何关于将`boost::lambda::bind`函数的返回值分配给该返回类型的对象的示例。有没有办法干净地做到这一点，还是没有理由这样做？

例子：

```
boost::lambda::lambda_functor<?> lf = boost::lambda::bind(boost::lambda::constructor<Foo>(), x); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:46:52.443

使用 boost.Function 存储函数对象：

```
boost::function<Foo()> lf = boost::lambda::bind(boost::lambda::constructor<Foo>(), x); 
```

# javascript - 有什么好方法可以只更新网页的一部分吗？

> ID：15818006
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:39:54.367
> 
> 标签：javascript, html, real-time, webpage

网页设计新手，我正在做一些有限体积分析来进行流量模拟。我有一个日志文件，随着时间的推移记录残差。我想在我的网页上显示实时残差。我想知道在不更新整个网页的情况下更新网页上的数字或图片的方法是什么？谢谢

谁能给我一个简单的链接和一个我可以遵循的简单教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:41:18.530

> 我想知道在不更新整个网页的情况下更新网页上的数字或图片的方法是什么？

就在这里。将 JavaScript 与[AJAX](https://en.wikipedia.org/wiki/Ajax_%28programming%29)结合使用。

使用 AJAX，您可以调用服务器来获取数据或整个 HTML 片段，并使用 JavaScript 替换页面的某些部分。

# ms-access - MS Access 2003 报告串联

> ID：15818012
> 
> 赞同：1
> 
> 时间：2013-04-04T17:40:13.557
> 
> 标签：ms-access, ms-access-2003

我目前正在为 MS Access 2003 编写一份报告，其中包含三个字段，包括 [Lease Start] Date、[Lease End] Date 和 [Financial Notes] String。管理层希望在报告的财务注释下将所有三项合并。我已将串联设置为：

```
=CVar([Lease Start]) & " - " & CVar([Lease Ends]) & " " & [Financial Notes] 
```

然而，当我运行报告时，我得到了一个#Error。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:08:33.953

查看该表达式在报告记录源的查询中返回的内容。

```
SELECT
    CVar([Lease Start]) & " - "
        & CVar([Lease Ends])
        & " " & [Financial Notes]
        AS report_expression
FROM YourTableOrQuery; 
```

我不知道这是否重要，但我很困惑你为什么在`CVar()`那里使用。当您给它一个日期/时间值时，它会返回一个日期/时间值。访问*应该*通过在连接时将其转换为字符串来实现，但对于没有`CVar`. 我不明白为什么`CVar`在那里有用。

由于您正在构建字符串，因此我倾向于使用`Format()`.

```
SELECT
    Format([Lease Start], "m/d/yyyy") & " - "
        & Format([Lease Ends], "m/d/yyyy")
        & " " & [Financial Notes]
        AS report_expression
FROM YourTableOrQuery; 
```

但是，正如我承认的那样，我不知道这是否是一个重大问题。

# php - 如何清除 Symfony2 中的配置缓存？

> ID：15818015
> 
> 赞同：0
> 
> 时间：2013-04-04T17:40:19.137
> 
> 标签：php, symfony

我正在使用 Symfony2。我有一个`config.yml`与用户设置。在我的开发环境中，如果我更改用户列表并刷新浏览器，我会立即看到更改。在生产中，即使我尝试清除缓存，我也看不到更改。我需要做什么才能看到生产中的配置更改？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T18:05:43.977

尝试使用以下命令清除生产缓存：

```
php app/console cache:clear --env=prod --no-debug 
```

它不起作用，清除缓存文件夹的内容。

# javascript - 交互式网站建设选项

> ID：15818017
> 
> 赞同：0
> 
> 时间：2013-04-04T17:40:34.203
> 
> 标签：javascript, jquery, html, web-applications

我对 Web 应用程序领域相当陌生，这是我的问题：

假设我想建立一个交互式网站，我可以在其中编辑包含节点和分支的一维图。节点上将有一个可以交互编辑的名称。此外，用户可以交互地添加或删除节点，这意味着至少应该重新绘制图形的一部分。

最有效的方法是什么？

1.  将添加/删除节点命令从前端（浏览器）传递到后端（服务器）并在后端级别进行所有数据库更新，然后将命令发送回前端关于应该重绘的内容？对于与服务器的所有连接的用户来说，这个过程会很长吗？

2.  在前端（浏览器）级别对应该重绘的内容进行所有处理，这意味着应该在两个级别维护相同的数据库：前端和后端

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:47:50.930

我认为这取决于您希望您的用户体验拥有什么以及您对网站的真正意图是什么。如果它是出于教育目的来显示如何添加/删除节点和分支，这将向每个用户显示相同的内容，我认为只需在前端执行此操作就可以了，您可以使用会话、cookie、GET 维护数据/POST 变量等

如果您要访问数据、拥有帐户并跟踪人们在节点中更新的内容、正在删除的节点等，那么这似乎需要更加重视后端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:53:12.113

我实际上正在做一些非常相似的事情。我的建议是你应该看看 ASP.NET MVC4 [http://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)

我们需要对强类型数据源进行大量动态前端操作。MVC 允许我创建一个丰富的 jQuery 运行的类似网格的前端，具有无尽的交互性和动画（HTML/CSS/jQ 的所有功能），同时安全可靠地将信息异步传递给模型并有效地更新应用程序数据库。时间。

肯定有一个学习曲线，但如果你给它时间，它真的可以得到回报。

# mysql - 每个组中满足条件的一个条目的 sql

> ID：15818021
> 
> 赞同：0
> 
> 时间：2013-04-04T17:40:44.107
> 
> 标签：mysql, sql, database

我有一个查询

```
SELECT ckt, setpt, clock FROM progs 
WHERE feed = "80302" AND day=4 AND clock<"12:15:00" 
ORDER BY ckt, clock DESC 
```

这让我明白了：

```
ckt setpt clock
0 69  06:06:00
0 62  00:30:00
1 57  10:30:00
1 67  04:30:00
1 57  01:30:00
2 69  11:00:00
2 62  00:30:00 
```

我如何修改这个查询来给我每个 CKT 的 MAX(clock)

总计：每个`ckt`和`day`有多个`setpt`和`clock` `entries`。我正在寻找（1 或无）`clock`记录 < some_time for each `ckt`and `day`。IE

```
0 69  06:06:00
1 67  10:30:00
2 69  11:00:00 
```

在mysql中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:43:15.163

像这样的东西？

```
SELECT ckt, MAX(setpt), MAX(clock)
FROM progs 
WHERE feed = "80302" AND day=4 AND clock<"12:15:00" 
GROUP BY ckt
ORDER BY ckt, clock DESC 
```

**结果**

```
| CKT | 最大值（设定点） | MAX(时钟) |
-------------------------------------------------- ---
| 0 | 69 | 1970 年 1 月 1 日 06:06:00+0000 |
| 1 | 67 | 1970 年 1 月 1 日 10:30:00+0000 |
| 2 | 69 | 1970 年 1 月 1 日 11:00:00+0000 |
```

[查看演示](http://sqlfiddle.com/#!2/01b4ee/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T17:46:41.887

听起来你需要自己`JOIN`的桌子，加入`MAX(clock)`：

```
SELECT p.ckt, p.setpt, p.clock 
FROM progs p
    JOIN (
        SELECT MAX(clock) maxClock, ckt
        FROM progs 
        WHERE feed = "80302" 
            AND day=4 
            AND clock<"12:15:00" 
        GROUP BY ckt
    ) p2 on p.ckt = p2.ckt AND p.clock = p2.maxclock
ORDER BY p.ckt, p.clock DESC 
```

[SQL Fiddle Demo](http://sqlfiddle.com/#!2/01b4ee/9)（借自其他帖子）

生产：

```
0   69  January, 01 1970 06:06:00+0000
1   57  January, 01 1970 10:30:00+0000
2   69  January, 01 1970 11:00:00+0000 
```

请注意，id 为 1 的行与您想要的结果不同，但与您的问题想要的结果相匹配...

# c#-4.0 - 在后台打开控制台应用程序，但允许它在需要时重新出现

> ID：15818025
> 
> 赞同：0
> 
> 时间：2013-04-04T17:40:54.500
> 
> 标签：c#-4.0, process, background, console-application, show-hide

我有另一个应用程序启动的控制台应用程序。这就是我正在玩的开始它：

```
 ProcessStartInfo processStartInfo = new ProcessStartInfo();
        processStartInfo.FileName = @"C:\...\MyApp.exe";

        processStartInfo.Arguments = "a, a, \\n, d, c";
        processStartInfo.CreateNoWindow = true;
        processStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        processStartInfo.UseShellExecute = false;
        processStartInfo.ErrorDialog = false;

        processStartInfo.RedirectStandardError = true;
        processStartInfo.RedirectStandardInput = true;
        processStartInfo.RedirectStandardOutput = true;
        Process process = Process.Start(processStartInfo); 
```

这个控制台应用程序背后的想法是，在运行这些参数之后，用户唯一可见的是他们可以与之交互的 SysTray 图标。选项之一是显示控制台的能力。这是一个双重问题：

1.  由于控制台应用程序是在后台启动的，我如何让它不再在后台？最初我使用一些 COM 和 P/Invoke 的 ShowWindow/HideWindow 方法，但这似乎有所不同。
2.  运行此流程代码时，控制台应用程序会短暂闪烁，然后进入后台。如何抑制控制台的这种闪烁？这看起来一点都不专业。

# android - 添加剧目 res/layout-large

> ID：15818026
> 
> 赞同：0
> 
> 时间：2013-04-04T17:40:54.960
> 
> 标签：android, layout

如何使用 Eclipse 添加目录 res/layout-large ？

我找不到方法，所以如果有人有解决方案:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:42:28.113

`layout-large/`您只需在资源文件夹中创建一个名为的文件夹。

我想这是`File > New > Folder`

您也可以复制并粘贴现有的布局文件夹，并在 Eclipse 对话框弹出时插入新名称。

通常，当您第一次创建项目时，eclipse 会自动为您生成它。也许，您最初是在较旧的 api 级别创建项目。

# iphone - 如何确定应用程序是从电话返回还是从后台恢复？

> ID：15818029
> 
> 赞同：3
> 
> 时间：2013-04-04T17:41:00.640
> 
> 标签：iphone, ios, objective-c

我使用以下应用程序拨打电话：

`[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"telprompt://XXXXXXXXXX"]];`

当用户结束通话时，Apple 提供的默认电话应用程序进入后台，我的应用程序恢复焦点。这会自动发生。

现在这就是我想要的：**我想每次（并且仅在）用户从调用中返回时调用一个方法。**

我尝试从`applicationWillEnterForeground:`或调用此方法，`applicationDidBecomeActive:`但是当应用程序从后台状态（我不想要）启动时，这些回调在其他时间被触发。

我想确定我的应用程序是从后台状态启动还是从电话返回，所以我只能在前一种情况下而不是后一种情况下执行某个任务。有任何想法吗？

- - 编辑 - -

这是我最终做到的方式：

请参阅：[CallStateDisconnected 仅检测到来电，而不是从我的应用程序发出的呼叫](https://stackoverflow.com/questions/13553635/callstatedisconnected-only-detected-for-incoming-calls-not-for-calls-made-from?lq=1)

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    [self listenForCalls];
}

- (void)listenForCalls {

    self.callCenter = [[CTCallCenter alloc] init];
    self.callCenter.callEventHandler = ^(CTCall* myCall) {
        NSString *call = myCall.callState;
        if([call isEqualToString:CTCallStateDialing]) {
              //do ur stuff
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:10:05.560

您可以使用电话框架，它为您提供呼叫状态来确定电话的状态。您可以从这里找到详细信息：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTCall/Reference/Reference.html#//apple_ref/doc/uid/TP40009590](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTCall/Reference/Reference.html#//apple_ref/doc/uid/TP40009590)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:57:23.063

为什么不保存一个标志，表明您的应用程序已将用户发送到电话。当您的应用程序变为活动状态时，如果设置了标志，请执行从电话呼叫方法返回。

前任。

```
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"DidStartPhoneCall"];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"telprompt://XXXXXXXXXX"]]; 
```

然后像，

```
-(void)applicationDidBecomeActive {
    BOOL activeFromCall = [[NSUserDefaults standardUserDefaults] objectForKey:"DidStartPhoneCall"]
    if(activeFromCall && [activeFromCall boolValue] == YES) {
     // do your method 
    }
    [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"DidStartPhoneCall"]; // reste flag
} 
```

# ruby-on-rails - 捆绑的 Gem 不会使用 rails 2.3.18 中的 require 参数加载 libxml

> ID：15818030
> 
> 赞同：1
> 
> 时间：2013-04-04T17:41:06.667
> 
> 标签：ruby-on-rails, bundler, ruby-on-rails-2

我目前正在将一个站点移动到捆绑程序上，以使 gem 需求更易于管理、帮助部署并加快开发人员设置。我遇到了一个我似乎无法从 environment.rb 文件中删除的 gem。

在环境.rb

`config.gem 'libxml-ruby', :version => '1.1.4', :lib => 'libxml'`

在 Gemfile

```
gem 'libxml-ruby', '1.1.4', :require => 'libxml' 
```

如果我将参考留在 environment.rb 文件中，一切正常。不过，我不想离开那条线。

注意：如果我不将它留在 environment.rb 中，我得到的错误是

```
activesupport-2.3.18/lib/active_support/dependencies.rb:131:in `const_missing': uninitialized constant BaseSaxParser::XML (NameError) 
```

查看堆栈跟踪，似乎一个插件“activemq_xml_parser.rb”在加载之前正在寻找它。对此有什么想法吗？

非常感谢您的帮助！

注意：我知道在 Gemfile 中指定确切的版本并不是最好的主意。我的想法是让它工作，然后调整以清理。

# tomcat - 如何配置 tomcat-users.xml 以保护 tomcat 中的页面？

> ID：15818038
> 
> 赞同：3
> 
> 时间：2013-04-04T17:41:33.310
> 
> 标签：tomcat, login, admin

我正在尝试使用 tomcat 保护我的管理页面，`web.xml`但`tomcat-users.xml`它不起作用。出现登录表单但无法连接

这是`web.xml`我的 web/WEB_INF 文件夹中的：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Admin</web-resource-name>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint>
<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>Admin</realm-name>
</login-config> 
```

在`tomcat-users.xml`server/tomcat/conf/ 文件夹中：

```
<tomcat-users>
   <role rolename="manager"/>
   <role rolename="tomcat"/>
   <role rolename="admin"/>
   <role rolename="role1"/>
   <user username="manager" password="manager" roles="manager"/>
   <user username="both" password="tomcat" roles="tomcat,role1"/>
   <user username="tomcat" password="tomcat" roles="tomcat"/>
   <user username="role1" password="tomcat" roles="role1"/>
   <user username="admin" password="admin" roles="admin"/>
</tomcat-users> 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-17T11:20:36.777

可能回答迟了，但无论如何你在 web.xml 中缺少角色，也不必提及领域，因此你的 web.xml 应该如下所示

```
<security-constraint>
   <web-resource-collection>
      <web-resource-name>Admin</web-resource-name>
      <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>admin</role-name>
    </auth-constraint>
 </security-constraint>
 <login-config>
       <auth-method>BASIC</auth-method>
      <!-- Please note following line .. its commented -->
      <!-- <realm-name>Admin</realm-name> -->
 </login-config>
 <!-- Following section was missing -->
 <security-role>
     <role-name>admin</role-name>
</security-role> 
```

# sql - 访问前端 GUI

> ID：15818045
> 
> 赞同：0
> 
> 时间：2013-04-04T17:42:16.783
> 
> 标签：sql, user-interface, frontend

我有一个小型 SQL 数据库，我想为它制作一个前端 GUI。非常基本的东西，基本上只允许用户将数据输入到 GUI 中，基本上只是将数据从 SQL 数据库中插入到表中。我已将 SQL 数据库加载到 Access 中。我拆分了我认为应该做的数据库？不确定如果我错了，请告诉我。

我想我需要使用 Visual Basic 来制作页面？我尝试修补，但我似乎无法在网上找到正确的说明。我基本上只是想用一个 GUI 制作一个 Access 前端，它有几个文本框，用户将输入数据，然后将数据保存到后端 SQL 中。

任何人有任何方向，然后可以帮助指出我？或者如果我这样做是完全错误的，那也很高兴知道大声笑我只是以为我在某处看到过这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:12:44.873

首先，您在 Access 中链接到 SQLServer 的链接表应该有如下图所示的地球图标：
![链接表图片](https://i.stack.imgur.com/GiMKl.png)
这意味着它们链接到服务器，而不是作为数据副本导入。确保表也有主键；如果它们是堆表（即没有聚集唯一索引），那么链接表将是只读的，因为 Access 不知道如何向 SQLServer 发送更新查询。您可以通过打开其中一个链接表并尝试更改数据来进行测试；如果它是只读表，您的光标将不会做任何事情。
要创建链接到表格的超级基本输入表单，请单击插入>表单，然后右键单击表单左上角的小方块，然后单击属性，如下所示：
![访问表格](https://i.stack.imgur.com/URjgC.png)
在 RecordSource 属性中选择您希望此表单对其进行编辑的表，如下所示。您可以单击“...”进行查询而不是单个表进行编辑，例如如果您需要连接表，但这会变得更加复杂，因为 Access 会特别关注哪些查询仍然可编辑并经常处理查询如果您不满足所有要求，则为只读（例如，联合查询将是只读的）：
![询问](https://i.stack.imgur.com/cHPgm.png)
设置 RecordSource 后，单击查看>字段列表，您将看到表中的字段，如下所示：
![字段](https://i.stack.imgur.com/wrzss.png)
突出显示这些字段并将它们拖到这样的表单中（像 ProductID 这样的唯一键字段通常应该是不可见的，特别是如果它们是自动编号字段，b/c 数据库将设置这些，而不是用户）：
![拖](https://i.stack.imgur.com/7uOnG.png)
单击视图>表单视图，您就得到了一个输入表单。使用底部的左右箭头移动记录，使用星号按钮创建新记录。
![报名表](https://i.stack.imgur.com/UVrAL.png)

# c# - 在 C# 中有效地找到二维数组 T[][] 中的唯一元素

> ID：15818046
> 
> 赞同：2
> 
> 时间：2013-04-04T17:42:25.053
> 
> 标签：c#, multidimensional-array, unique, distinct-values

提取唯一值的一种解决方案是应用于`Array[i].Distinct()`每一行，然后形成每行中所有唯一元素的列表。然后我们可以重复这个列表`List.Distinct()`。

但是有没有更有效的方法来创建`T[] UniqueValues`呢`T[][] Data`？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:47:05.843

```
var distinct = array.SelectMany(a => a).Distinct().ToArray(); 
```

这只是将嵌套数组展平为一个序列并调用`Distinct`以查找不同的元素。`ToArray`由于事先不知道不同序列的长度，因此调用可能会有些低效。如果只有少量不同的元素，这不太可能成为问题。

如果你有一个大的输入数组，复制元素可能会更快，将元素复制到一个新数组中，执行基数排序，然后遍历排序后的数组，同时跳过相等的元素。

# spring - Spring：web.xml 中的命名空间与 contextConfigLocation 初始化参数

> ID：15818047
> 
> 赞同：59
> 
> 时间：2013-04-04T17:42:27.627
> 
> 标签：spring, spring-mvc, dependency-injection

我正在阅读 Spring MVC 的文档，并且对 init 参数有疑问。如果重要的话，我正在使用 Spring 3.2。contextConfigLocation 和命名空间有什么区别？contextConfigLocation 是否仅用于指定上下文类可以找到 XML 定义的文件夹，而命名空间属性用于指定文件名？

```
<servlet>
        <servlet-name>AppServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>WEB-INF</param-value>
        </init-param>
        <init-param>
            <param-name>namespace</param-name>
            <param-value>application-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet> 
```

它是否正确？它应该使用 /WEB-INF/application-context.xml 吗？你应该指定路径吗？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-04-05T03:04:12.220

# TL;博士

`contextConfigLocation`只要您需要指定自定义配置文件，只需设置值即可。这样，您将指定配置文件名及其位置。

**这`namespace`本质上是一种**告诉 Spring 容器上下文加载器类使用什么配置文件的替代方法。我从不打扰它，只是`contextConfigLocation`在需要配置自定义配置文件时使用。

这是我之前的一个 Spring 项目中的一个示例（为简洁起见，省略了一些配置）：

*web.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                            http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <display-name>Spring Web Application example</display-name>

    <!-- Configurations for the root application context (parent context) -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring/jdbc/spring-jdbc.xml
            /WEB-INF/spring/security/spring-security-context.xml
        </param-value>
    </context-param>

    <!-- Configurations for the DispatcherServlet application context (child context) -->
    <servlet>
        <servlet-name>spring-mvc</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
                /WEB-INF/spring/mvc/spring-mvc-servlet.xml
            </param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring-mvc</servlet-name>
        <url-pattern>/admin/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

* * *

# 长答案

好的，首先让我们弄清楚一些重要的时刻。我们正在处理两种类型的上下文：

1.  **根上下文**（父）
2.  **单个 servlet 上下文**（子）

引用[WebApplicationContext](http://docs.spring.io/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/web/context/WebApplicationContext.html)的 Spring Framework API（撰写本文时为 3.2.2 版） （强调我的）：

> 与通用应用程序上下文一样，Web 应用程序上下文是分层的。**每个应用程序有一个根上下文，而应用程序中的每个 servlet（包括 MVC 框架中的调度程序 servlet）都有自己的子上下文**。

也在这里：[上下文层次结构](http://docs.spring.io/spring/docs/3.2.2.RELEASE/spring-framework-reference/html/testing.html#testcontext-ctx-management-ctx-hierarchies)：

> 例如，如果您正在开发 Spring MVC Web 应用程序，您通常会**通过 Spring 的 ContextLoaderListener 加载一个根 WebApplicationContext ，并****通过 Spring 的 DispatcherServlet 加载**一个子 WebApplicationContext 。这导致了父子上下文层次结构，其中共享组件和基础架构配置在根上下文中声明，并由特定于 Web 的组件在子上下文中使用。

在这里：[17.2 DispatcherServlet](http://docs.spring.io/spring/docs/3.2.2.RELEASE/spring-framework-reference/html/mvc.html#mvc-servlet)：

> Spring 中的 ApplicationContext 实例可以是作用域的。在 Web MVC 框架中，**每个 DispatcherServlet 都有自己的 WebApplicationContext，它继承了根 WebApplicationContext 中已经定义的所有 bean**。这些继承的 bean 可以在特定于 servlet 的范围内被覆盖，并且您可以在给定的 Servlet 实例本地定义新的特定于范围的 bean。

现在让我们看看**根应用程序上下文**配置。这是一个示例：
*web.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                            http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring/daoContext.xml
            /WEB-INF/spring/applicationContext.xml
        </param-value>
    </context-param>
</web-app> 
```

来自官方 Spring 文档（重点是我的）：
[5.14.4 方便的 Web 应用程序 ApplicationContext 实例化](http://docs.spring.io/spring/docs/3.2.2.RELEASE/spring-framework-reference/html/beans.html#context-create)：

> **您可以使用例如 ContextLoader 以**声明方式创建 ApplicationContext 实例。**当然，您也可以使用 ApplicationContext 实现之一以编程方式创建 ApplicationContext 实例。**
> 
>  **您可以**使用 ContextLoaderListener 注册 ApplicationContext** （参见上面的示例）
> 
> 侦听器检查 contextConfigLocation 参数。**如果参数不存在，则监听器使用 /WEB-INF/applicationContext.xml 作为默认值**。当参数确实存在时，侦听器使用预定义的分隔符（逗号、分号和空格）分隔字符串，并将值用作将搜索应用程序上下文的位置。也支持 Ant 样式的路径模式。示例是 /WEB-INF/*Context.xml 用于名称以“Context.xml”结尾的所有文件，位于“WEB-INF”目录中，/WEB-INF/**/*Context.xml 用于所有此类文件位于“WEB-INF”的任何子目录中。**

 **Spring 配置经常被拆分为多个文件。它更符合逻辑和方便，尤其是在大型项目中。在我们的示例中，我们在自定义位置显式定义了两个配置 XML 文件： *daoContext.xml*和*applicationContext.xml*`/WEB-INF/spring/`：。同样，如果我们没有定义*contextConfigLocation*，*ContextLoaderListener*将尝试定位默认配置文件：*`/WEB-INF/applicationContext.xml`*.

注意：
根**上下文是可选**的。另请参阅此答案：[https ://stackoverflow.com/a/7451389/814702](https://stackoverflow.com/a/7451389/814702)

因此，如果默认*`/WEB-INF/applicationContext.xml`*配置文件不适合您的需求，请使用*ContextLoaderListener*和`<context-param>` *contextConfigLocation*，您可以在其中定义自定义配置文件**来定义根应用程序上下文**。

接下来让我们看看**单个（子）应用程序上下文**。来自官方 Spring 文档（重点是我的）：
[17.2 The DispatcherServlet](http://docs.spring.io/spring/docs/3.2.2.RELEASE/spring-framework-reference/html/mvc.html#mvc-servlet)

> **在初始化 DispatcherServlet 时，Spring MVC 在您的 Web 应用程序的 WEB-INF 目录中查找名为
> [servlet-name]-servlet.xml 的**文件并创建在那里定义的 bean，覆盖任何同名定义的 bean 的定义在全球范围内。
> 
> 考虑以下 DispatcherServlet Servlet 配置（在 web.xml 文件中）：

```
<web-app>

    <servlet>
        <servlet-name>golfing</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>golfing</servlet-name>
        <url-pattern>/golfing/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

## 关于 contextConfigLocation 和命名空间

从文档（强调我的）：

> 有了上述 Servlet 配置，您将需要
> `/WEB-INF/golfing-servlet.xml`在应用程序中调用一个文件；此文件将包含所有 Spring Web MVC 特定组件（bean）。您可以通过 Servlet 初始化参数更改此配置文件的确切位置（详见下文）。
> ...您可以通过将 Servlet 初始化参数（init-param 元素）添加到 web.xml 文件中的 Servlet 声明来自
> **定义各个 DispatcherServlet 实例。**有关支持的参数列表，请参见下表。
> 
> *   ***contextClass***：实现 WebApplicationContext 的类，它实例化此 Servlet 使用的上下文。默认情况下，使用 XmlWebApplicationContext。
>     
>     
> *   ***contextConfigLocation***：传递给上下文实例的字符串（由 contextClass 指定）以指示可以找到上下文的位置。该字符串可能包含多个字符串（使用逗号作为分隔符）以支持多个上下文。如果多个上下文位置具有两次定义的 bean，则最新位置优先。
>     
>     
> *   ***namespace***：WebApplicationContext 的命名空间。默认为 [servlet-name]-servlet。

现在让我们研究一下相关类的 API 文档。[*DispatcherServlet*](http://docs.spring.io/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/web/servlet/DispatcherServlet.html)类扩展了抽象类[*FrameworkServlet*](http://docs.spring.io/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/web/servlet/FrameworkServlet.html)。从*FrameworkServlet* API 文档（强调我的）：

> 将“contextConfigLocation”servlet init-param 传递给上下文实例，将其解析为可能的多个文件路径，这些路径可以用任意数量的逗号和空格分隔，例如
> “test-servlet.xml，myServlet.xml”。**如果没有明确指定，上下文实现应该从 servlet 的命名空间构建一个默认位置**。
> 
> 默认命名空间是“'servlet-name'-servlet”，例如“test-servlet”表示servlet-name“test”（导致带有XmlWebApplicationContext 的“/WEB-INF/test-servlet.xml”默认位置）。**命名空间也可以通过“命名空间”servlet init-param 显式设置**。

*这是FrameworkServlet*源代码的摘录：
[*FrameworkServlet.java*](https://web.archive.org/web/20180311141859/http://grepcode.com/file/repository.springsource.com/org.springframework/org.springframework.web.servlet/3.2.2/org/springframework/web/servlet/FrameworkServlet.java#FrameworkServlet.0DEFAULT_NAMESPACE_SUFFIX)

```
....
/**
* Suffix for WebApplicationContext namespaces. If a servlet of this class is
* given the name "test" in a context, the namespace used by the servlet will
* resolve to "test-servlet".
*/
public static final String DEFAULT_NAMESPACE_SUFFIX = "-servlet";
.... 
```

*FrameworkServlet* 的默认上下文类是[*XmlWebApplicationContext*](http://docs.spring.io/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/web/context/support/XmlWebApplicationContext.html)。来自*XmlWebApplicationContext* API 文档（重点是我的）：

> 默认情况下，配置将从“/WEB-INF/applicationContext.xml”获取根上下文，从“/WEB-INF/test-servlet.xml”获取具有命名空间“test-servlet”的上下文（如对于具有 servlet 名称“test”的 DispatcherServlet 实例）。
> 
> **配置位置默认值可以通过 ContextLoader 的“contextConfigLocation”上下文参数和 FrameworkServlet 的 servlet init-param 覆盖**。配置位置可以表示具体文件，如“/WEB-INF/context.xml”或 Ant 样式模式，如“/WEB-INF/*-context.xml”（有关模式详细信息，请参阅 PathMatcher javadoc）。

覆盖默认配置位置使用`contextConfigLocation`与上面的根应用程序上下文示例相同。

至于**覆盖默认命名空间**，有一些重要的时刻。当你设置一个新的命名空间时，**不要在它前面加上也`/WEB-INF`不要附加`.xml`到它**。*如果我们查看XmlWebApplicationContext*类的源文件，可以发现其原因：
[*XmlWebApplicationContext.java*](https://web.archive.org/web/20170709235533/http://grepcode.com/file/repository.springsource.com/org.springframework/org.springframework.web/3.2.2/org/springframework/web/context/support/XmlWebApplicationContext.java)

```
...

/** Default config location for the root context */
public static final String DEFAULT_CONFIG_LOCATION = "/WEB-INF/applicationContext.xml";

/** Default prefix for building a config location for a namespace */
public static final String DEFAULT_CONFIG_LOCATION_PREFIX = "/WEB-INF/";

/** Default suffix for building a config location for a namespace */
public static final String DEFAULT_CONFIG_LOCATION_SUFFIX = ".xml";

...

/**
* The default location for the root context is "/WEB-INF/applicationContext.xml",
* and "/WEB-INF/test-servlet.xml" for a context with the namespace "test-servlet"
* (like for a DispatcherServlet instance with the servlet-name "test").
*/
@Override
protected String[] getDefaultConfigLocations() {
    if (getNamespace() != null) {
        return new String[] {DEFAULT_CONFIG_LOCATION_PREFIX + getNamespace() + DEFAULT_CONFIG_LOCATION_SUFFIX};
    }
    else {
        return new String[] {DEFAULT_CONFIG_LOCATION};
    }
} 
```

如您所见，源代码说明了一切。

## 指定自定义命名空间的示例

*web.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                            http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <!-- Configurations for the DispatcherServlet application context (child context) -->
    <servlet>
        <servlet-name>spring-mvc</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>namespace</param-name>
            <param-value>spring/mvc/spring-mvc</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring-mvc</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

结果是，不是使用默认命名空间来构造配置文件的路径，否则`/WEB-INF/spring-mvc-servlet.xml`容器将查找`/WEB-INF/spring/mvc/spring-mvc.xml`.

注意：
以上关于设置自定义命名空间的解释是针对默认的[*XmlWebApplicationContext*](http://docs.spring.io/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/web/context/support/XmlWebApplicationContext.html)上下文类的。可以指定一个替代类，例如[*AnnotationConfigWebApplicationContext*](http://docs.spring.io/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/web/context/support/AnnotationConfigWebApplicationContext.html)，因此会有一些特殊的时刻。

* * *

## 结论

（恕我直言）使用参数来定义自定义配置文件要容易得多`contextConfigLocation`，无论是针对根应用程序上下文还是单个上下文。唯一的区别是，对于您**`<context-param>`**在`<web-app>`元素中使用的根应用程序上下文，而不是在特定的 servlet 中使用（也不要忘记侦听器类）。对于子上下文，您使用**`<init-param>`**嵌套在**每个特定 servlet**`<servlet>`的元素内。请参阅本文开头的示例配置 ( *web.xml* )。

 ***其他资源（好像以上还不够:-)）：

*   [Spring 框架参考文档](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/)
*   [Spring中applicationContext.xml和spring-servlet.xml的区别](https://stackoverflow.com/a/3652125/814702)
*   [Spring MVC 中的 ApplicationContext 和 WebApplicationContext 有什么区别？](https://stackoverflow.com/a/11709272/814702)
*   [Spring-MVC：什么是“上下文”和“命名空间”？](https://stackoverflow.com/a/7451389/814702)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-14T20:05:12.230

我认为 LuckyLuke 的答案有很多有用的信息，但它没有回答这个问题。特别是“namespace”和“contextConfigLocation”参数如何协同工作？

我唯一能找到具体答案的地方是源代码：

*   **命名空间**参数设置用于构建**默认**上下文配置位置的自定义命名空间
*   **contextConfigLocation**参数显式设置上下文配置位置，而不是依赖于从命名空间构建的默认位置

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T18:45:43.477

**contextConfigLocation 和命名空间有什么区别？** contextConfigLocation 用于指定 spring 配置文件的路径，这意味着它们将被初始化。namespace 用于指定 Spring MVC 的 DispatcherServlet 的路径和名称。默认是`[Dispatcher_name]-servlet.xml`，这里是一个例子：

```
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>namespace</param-name>
        <param-value>config/spring-mvc</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

Spring 将通过路径搜索要用作 mvc 配置的文件`/WEB-INF/config/spring-mvc.xml`。
**contextConfigLocation 是否仅用于指定上下文类可以找到 XML 定义的文件夹**

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/config/app-*.xml</param-value>
</context-param> 
```

上面的代码表明，当应用程序启动时，Spring 将加载 WEB-INF/config 目录中所有名称以 'app-' 开头并以 '.xml' 结尾的文件。

**它应该使用 /WEB-INF/application-context.xml 吗？你应该指定路径吗？**
通过上面的例子我们可以知道，在配置Spring的时候我们需要指定完整路径和通用文件名，而只有SpringMVC的时候我们应该指定路径（如果它位于一个目录中，不包括WEB-INF目录）和名称（不包括扩展名）。
希望能帮到你：）*****

# sass - 媒体查询中的 Sass @extend

> ID：15818049
> 
> 赞同：4
> 
> 时间：2013-04-04T17:42:33.460
> 
> 标签：sass, media, extend

现在没有错误，但是 Sass 向我抛出了一个弃用警告，因为我在我的一个媒体查询中使用了 @extend。我有这样的事情：

```
.root{
    color: red;
}
@media (max-width: 900px) {
    .root{
        color: blue;
    }
    .extending{
        @extend .root;
    }
} 
```

之所以设置警告，是因为我有`.root`外媒的声明。在@media 之外，它用于正常布局，然后在同一选择器内部用于更改页面布局。但是这里的目标是只有在is`.extending`时才将其颜色设置为蓝色，否则我不希望对其进行任何设置。`max-width``900px`

所以问题是如何在我的媒体查询中使用 @extend 而不会 sass 给我一个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:02:41.603

您可以尝试使用@mixin 规则而不是@extend。

你真的知道生成的 CSS 会是什么样子吗？@extend 是选择器的聚合器，这可能会导致非常混乱的 CSS 代码。

我对@extend 规则的建议：避免使用@extending 常规规则，而是使用 %placeholder 规则。

# c# - 布尔 LINQ 问题

> ID：15818052
> 
> 赞同：2
> 
> 时间：2013-04-04T17:42:34.737
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我的数据库表中有一个字段`IsActive`，可以是`True`或`False`. 但是，当我查询数据库时，我的查询也会返回非活动行：

**这是我的 LINQ 查询：**

```
var j = from x in db.DashboardMenus 
        where x.ParentID == c.SiteMenuID && c.IsActive == true 
        orderby x.SortOrder ascending 
        select x; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T17:51:43.210

您的查询中有错字。您在`c.IsActive`应该使用时使用`x.IsActive`，因为那是您要查询的表对象。`x`否则，只要处于活动状态，它将返回 ParentID 和 SiteMenuID 匹配的所有对象`c`（这似乎是您的问题）。

```
var j = from x in db.DashboardMenus 
        where x.ParentID == c.SiteMenuID && x.IsActive
        orderby x.SortOrder ascending 
        select x; 
```

将来，您可能会得到更好的服务，即拥有更多描述性（和更长）的变量名称（即使对于 LINQ 查询也是如此），以更好地确保您不会再次遇到此问题。

# java - 添加基本 身份验证时遇到问题

> ID：15818057
> 
> 赞同：1
> 
> 时间：2013-04-04T17:42:58.963
> 
> 标签：java, jsp, authentication, tomcat, basic-authentication

我正在运行 tomcat 6 并使用 jsp ，试图在我的网站上有一个使用 tomcat BASIC 的登录页面，我遵循了这个和其他教程[http://www.jguru.com/faq/view.jsp?EID=239670](http://www.jguru.com/faq/view.jsp?EID=239670)但是仍然没有运气....有人能明确地告诉我该怎么做吗？我知道基于表单更好，但我必须使用基本，谢谢

抛出的状态500错误如下

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

```
 javax.servlet.ServletException: 

    java.lang.NoClassDefFoundError:org/apache/jasper/compiler/ErrorDispatcher
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:268)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

根本原因

```
 java.lang.NoClassDefFoundError: org/apache/jasper/compiler/ErrorDispatcher
org.apache.jasper.compiler.Compiler.compile(Compiler.java:350)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:321)
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

note Apache Tomcat/6.0.35 日志中提供了根本原因的完整堆栈跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:56:52.710

在您的 web.xml 中，您至少需要：

```
 <security-role><role-name>member</role-name></security-role>
   <security-role><role-name>admin</role-name></security-role>

   <login-config>
    <auth-method>BASIC</auth-method>
   </login-config>

   <security-constraint>
    <web-resource-collection>
        <web-resource-name>For Members and Admin Only</web-resource-name>
        <description>This Description is Optional</description>
        <url-pattern>/Examples/protected/*</url-pattern>
    </web-resource-collection>

    <auth-constraint>
        <role-name>admin</role-name>
        <role-name>member</role-name>
    </auth-constraint>

   </security-constraint> 
```

在您的 tomcat-users.xml 中，您需要以下内容：

```
 <role rolename="member"/>
  <role rolename="admin"/>
  <user username="ricky" password="rrrrr" roles="admin,member"/> 
```

# javascript - 如何将操作传递给 javascript 函数

> ID：15818059
> 
> 赞同：2
> 
> 时间：2013-04-04T17:42:59.550
> 
> 标签：javascript

我可以解释我的问题，但演示它可能更容易......

如果你看看[http://jsfiddle.net/XxT2B/](http://jsfiddle.net/XxT2B/)你会看到我的问题。我无法弄清楚如何将动作传递给函数。你会明白我的意思。

**请注意，根据调用函数的内容，操作可能会有所不同。该动作可能是按时发出警报，而下一次发出不同的警报。**

这是我的代码...

```
function abc(action)
{
    //Do a bunch of stuff first and then do the action sent to this function
    alert('This function is named "abc"');

    //This is the part I do not know how to do.
    //The action might be an alert or something totally different so I can't just pass text
    //I need to know how to execute the action passed.
    action;
}

abc('alert("I like pizza")'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:44:37.897

您可以将一个函数作为参数传递给另一个函数。

```
function abc(action)
{
    //Do a bunch of stuff first and then do the action sent to this function
    alert('This function is named "abc"');

    action();
}

abc(function(){
    alert("I like pizza");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:11:42.787

您可以将函数传递给`abc()`，但一定要清理

```
function abc(action)
{
    alert('This function is named "abc"');

    if(typeof(action) == "function") { //sanitize
        action();
    }
}

abc('alert("I like pizza")'); //will execute without a problem
abc(50); //will not run, since 50 is not a function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T17:43:57.417

你只需要实例化一个函数：

```
abc(function() { alert("I like pizza"); }); 
```

*编辑*然后调用它，你使用参数的值就像它是一个函数名一样（因为，它是！）：

```
 action(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T17:46:01.630

好办法：

将其作为函数传递：

```
function abc(action)
{
    //Do a bunch of stuff first and then do the action sent to this function
    alert('This function is named "abc"');

    action();
}

abc(function(){alert("I like pizza")}); 
```

不好的方式（如果您的操作需要是字符串）：

```
function abc(action)
{
    //Do a bunch of stuff first and then do the action sent to this function
    alert('This function is named "abc"');

    eval(action);
}

abc('alert("I like pizza")'); 
```

不建议使用第二种方法，因为 eval 会导致问题。它可以运行可能导致意外副作用的任意代码，阻止编译器优化，并导致调试困难（因为它可以根据您传递的内容执行任何操作）。[更多关于为什么 eval 在这里不好。](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)

但它会像您要求的那样将任意字符串作为 javascript 代码运行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-04T17:46:00.230

您可以使用以下`eval`方法：

```
function abc(action)
{
    //Do a bunch of stuff first and then do the action sent to this function
    alert('This function is named "abc"');

    eval(action);
}

abc('alert("I like pizza")'); 
```

就是这样。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-09-30T11:24:47.563

不知道哪个 JavaScript 版本支持这种语法，但您也可以尝试：

```
function abc(action) {
if (typeof(action) != 'function')
            return;
    action();

}

abc(() => console.log('A B C')); 
```

# jquery - Bootstrap - 暂停轮播

> ID：15818064
> 
> 赞同：1
> 
> 时间：2013-04-04T17:43:16.137
> 
> 标签：jquery, twitter-bootstrap, carousel

我想要做的是将鼠标悬停在另一个 div 上时暂停我的轮播。我尝试为此使用 jQuery 和 .hover：

```
$('#running-box, #bg-car').carousel({})

    $("#running-box").hover(function(){
        $("bg-car").carousel({interval: false});
    }); 
```

但它不起作用。我使用 interval:false 的原因是这里的另一篇文章，这也行不通：

```
$('#running-box, #bg-car').carousel({})

    $("#running-box").hover(function(){
        $("bg-car").carousel('pause');
    }); 
```

我掌握了所有引导程序的东西，褪色的过渡，贴上我的菜单，但这根本行不通。现场演示： http: [//mentsik.eu/kerek/](http://mentsik.eu/kerek/)

这只是一个测试 Bootstrap 的测试站点。我的 Javascript 就像在示例中一样，在自己的 applications.js 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:20:05.390

假设`#running-box`您要用作悬停目标的元素并且`#bg-car`是带有轮播的元素，则以下内容将起作用：

```
 $("#running-box").hover(
    function(){
        $("#bg-car").carousel('pause');
     },
    function() {
      $("#bg-car").carousel('cycle');
    }
  ); 
```

请注意，您的示例`bg-car`没有句点或 #。

# highstock - Highstock 1.2.5 重大更改 - 当“showInLegend”为 false 时工具提示不显示

> ID：15818067
> 
> 赞同：0
> 
> 时间：2013-04-04T17:43:30.850
> 
> 标签：highstock

我们最近从 Highstock 1.2.4 升级到 1.2.5。

我们有一系列“注释”，它们只是在不同时间点显示图标。我们已指定不在图例中显示此系列。使用旧版本（1.2.4），我们可以将鼠标悬停在图标上并查看工具提示。切换到 1.2.5 后，我们不再看到工具提示。是否有可以更改为再次允许我们查看此系列的工具提示的配置？

谢谢！

# git - 从 SVN/FishEye 迁移到 Git - 同步不起作用

> ID：15818074
> 
> 赞同：0
> 
> 时间：2013-04-04T17:43:54.327
> 
> 标签：git, svn, migration, jira, bitbucket

所以我不希望任何人阅读整个迁移指南，但我被困在一个点上，现在 Jira 对我的问题反应迟钝。这是指南[http://go-dvcs.atlassian.com/display/aod/Migrating+from+Subversion+to+Git+on+Bitbucket](http://go-dvcs.atlassian.com/display/aod/Migrating+from+Subversion+to+Git+on+Bitbucket)

我正在将我们的 Jira/SVN 迁移到 BitBucket/Git，Jira 提供了迁移指南。我被困在“同步”部分。基本上，如果您不想阅读指南，则过程是：

1.  下载 SVN 转储文件
2.  构建它的 git 克隆
3.  将新的 SVN 提交同步到克隆，直到您准备好上传。（获取/变基）
4.  将项目上传到 Git (Bitbucket)

我下载了转储文件并进行了克隆，但指南说要运行`git svn fetch`. 当我在制作转储文件后对我知道肯定有提交的项目执行此操作时，据我所知，没有任何事情发生。`fetch`在或期间没有输出，`rebase`并且没有新文件添加到我的物理本地 git 存储库中，所以看起来 fetch 没有得到任何东西。

我知道其中一些是基于 Jira 的 migration.jar 文件，所以可能在幕后发生了一些神奇的事情，但 fetch 根本没有得到任何东西。

我无知的想法是，它是从`svn://localhost/repos`哪里获取初始克隆的来源。这也是本质上提取转储的文件夹。迁移指南没有这么说，但我觉得我需要以某种方式告诉它从我在 Jira 服务器上的远程仓库中获取。我在 .jar 文件中以某种方式认为它表明要这样做，但据我所知，它什么也没得到。

另请注意，我必须`svnserve`运行才能运行提取。如果我在不`svnserve`运行的情况下进行提取，则会出现错误。这让我相信它在本地查看我过时的转储，并远程记录云服务器上的实际新提交。

关于从哪里开始的任何想法？有没有其他人幸运地完成了这个过程。我在 Windows 上。此外，我知道我的回购是旧的并且没有新的提交已成功上传到 Bitbucket，所以我认为在大多数情况下我做的一切都是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:36:05.847

因此，出于直觉，我编辑了 .git 文件夹中的配置文件，并将 svn://localhost/ 更改为我的远程 URL，一切似乎都正常了。奇怪，我在迁移指南中没有看到这一点。

# python - 为什么 boto 不返回写入 S3 的字节数？

> ID：15818076
> 
> 赞同：3
> 
> 时间：2013-04-04T17:43:58.520
> 
> 标签：python, boto

我在 python 脚本中使用 boto。完成所有设置后，我试图通过比较磁盘上文件的大小与实际写入 S3 的字节数来查看上传到 S3 是否成功。

（顺便说一句，如果有更好的方法来确认上传成功，我很乐意知道。）

我下降到 Python 命令行并重新产生了我的问题。连接到 S3 等后，我这样做了：

```
>>> bytes = os.path.getsize('file.zip')
>>> key = bucket.new_key('file.zip')
>>> bytesWritten = key.set_contents_from_filename('file.zip')
>>> bytesWritten is None
True 
```

[文档说](http://boto.readthedocs.org/en/latest/ref/s3.html#boto.s3.key.Key.set_contents_from_filename)该`set_contents_from_filename()`函数应该返回写入 S3 的字节数。为什么呢`None`？

（我使用的是 boto 2.8.0，是的，该文件存在并且`bytes`超过 200k ......我检查了。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:16:01.063

我目前不确定为什么`set_contents_from_filename`返回 None 值。快速查看代码表明它至少试图返回写入的字节数。我将不得不进行一些测试，看看我是否可以重现它。

但是，如果检查字节的目的是尝试验证对 S3 的写入操作是否成功完成，那么 boto 中已经内置了更强大的完整性检查。在上传文件之前，会计算 MD5 校验和。这作为请求中的`Content-MD5`标头发送。作为响应，S3 发送一个`ETag`标头，其中包含在服务端为上传内容计算的 MD5 校验和。Boto 对它们进行比较，如果它们不匹配，则引发异常。

# java - Java - 带连字符的 String.format

> ID：15818077
> 
> 赞同：1
> 
> 时间：2013-04-04T17:43:59.853
> 
> 标签：java

编写我的第一个真正的 Java 代码，我正在努力弄清楚这一点。

我需要生成一个设置格式的字符串：

```
code:100-100-100 
```

我正在使用 String.format 尝试生成它：

```
String templateFormat = "code:%1$-%2$s-100";
String code = String.format(templateFormat, "100", "100", "100"); 
```

但是连字符对格式化程序有特殊含义，我该如何转义呢？

试图用“\”转义连字符，但 Eclipse 正确地告诉我：

无效的转义序列（有效的是 \b \t \n \f \r \" \' \ ）

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:47:15.203

问题不在于您的连字符，而在于您的模板格式：

你有...`String templateFormat = "code:%1$-%2$s-100";`

你需要的地方...`String templateFormat = "code:%1$s-%2$s-100";`

注意零件`s`中的缺失`%1$`

# g-wan - 如何在 G-WAN 网络服务器中创建虚拟目录

> ID：15818082
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:44:17.700
> 
> 标签：g-wan, virtual-hosts

我安装了 G-WAN 网络服务器，并创建了虚拟主机，在 G-WAN 中我们必须为虚拟主机创建文件夹，现在我想创建虚拟目录

我的安装路径是：

```
/home/gwan/ 
```

我的文件在

```
/home/user/ 
```

那么如何为虚拟主机创建虚拟目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:51:11.897

当我们创建 G-WAN 时，我们努力消除任何可能的配置问题，*不*使用您必须告诉服务器该做什么的文件。

使用位于下面的文件的最简单方法`/home/user/`是将 G-WAN 可执行文件复制到那里或复制`www files`到`/home/gwan`文件夹下。

如果你真的想使用 G-WAN，你应该考虑阅读它的文档或至少阅读它的常见问题解答，它们都解释[了如何设置主机](http://gwan.ch/faq#listener)。

# c# - 如何在鼠标事件中隐藏面板及其内容

> ID：15818085
> 
> 赞同：0
> 
> 时间：2013-04-04T17:44:24.027
> 
> 标签：c#, winforms

在我的表格中，我有一个`panel`带有图片的框。当鼠标悬停在`panel`应该显示的图片框上时。当鼠标离开时，图片框应该隐藏起来。

一开始我试过

```
panel1.visible = true; 
```

和

```
panel1.visible = false; 
```

我以为这会做，但它不起作用。然后我尝试了以下方法

```
namespace Drawing_Program
{
    public partial class Form1 : Form
    {

        PictureBox[] Boxes = new PictureBox[12];

        public Form1()
        {           
            InitializeComponent();
            int i = 0;
            foreach (var pb in Controls.OfType<PictureBox>())
            {
                Boxes[i] = pb;                
                i++;
            }           

        }

        private void panel1_MouseHover(object sender, EventArgs e)
        {
            for (int i = 0; i < Boxes.Length; i++) {
                this.Boxes[i].Visible = true;  // error gives here
            }

        }

        private void panel1_MouseLeave(object sender, EventArgs e)
        {
            for (int i = 0; i < Boxes.Length; i++)
            {
                this.Boxes[i].Visible = false;
            }

        } 
```

但我收到以下错误：

> nullreferenceException 未处理：对象引用未设置为对象的实例。

请告诉我出了什么问题或如何正确执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:10:28.103

您`Form`不是`PictureBox`控件的直接父级。所以我打赌你的`Boxes`数组是`{ null, null, null,... }`. 如果`panel1`是所有`PictureBox`控件的直接父级，您应该能够`Boxes`按如下方式填充您的数组：

```
Boxes = panel1.Controls.OfType<PictureBox>().ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:50:24.067

可能其中之一`Boxes[i]`是空的。使用调试器检查这一点，并查看[此线程](https://stackoverflow.com/questions/4660142/what-is-a-nullreferenceexception-in-net)。

我的猜测是您的图片框少于 12 个，并且并非所有数组元素都是对其中之一的引用，而是保持未初始化（空）。

您的`foreach`-loop 只会像您拥有图片框一样频繁地运行。如果您只有 11 个（或更少），`Boxes[11]`则为空。

当更改可见性并且 i 达到 11 时，`Boxes[i].Visible`您正在取消引用`null`，这可能会导致您的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:02:52.137

试试这个
把你的控件放在一个面板 say(panel2) 中并将它的可见性设置为 false 。将此面板放在另一个面板中说（panel1）并在面板1的鼠标事件上尝试此代码

```
 private void panel1_MouseHover(object sender, EventArgs e)
        {
            panel2.Visible = true;
        }

   private void panel1_MouseLeave(object sender, EventArgs e)
       {
            panel2.Visible = false;
       } 
```

我试过这个它正在工作。

# android - 隐藏软输入时框架布局卡住（Android）

> ID：15818087
> 
> 赞同：0
> 
> 时间：2013-04-04T17:44:27.383
> 
> 标签：android, samsung-mobile

我有一个 Android 应用程序（全屏、横向），我有两个视图，一个是`FrameLayout`始终可见的，一个是`LinearLayout`. 我立即将可见性设置`LinearLayout`为`View.GONE`。当用户点击 上的按钮时，我在to`FrameLayout`上设置了可见性，并使用来在中的 an 上显示软输入。这导致两个视图都向上移动，使得 EditText 位于键盘上方的屏幕上。这一切都很好。`LinearLayout``view.VISIBLE``InputMethodManager``EditText``LinearLayout`

当我关闭软输入时出现问题。在同一个回调中，我将`LinearLayout`（使用`EditText`）的可见性设置为`View.GONE`，而我看到的是 FrameLayout 卡在屏幕顶部（它不会向下移动）。如果我不 GONE-ize `LinearLayout`，两个视图都可以向下移动。

我可以通过在将可见性设置为 之前启动计时器等待来解决此问题`GONE`，但我不应该这样做；应该有一些我可以持续收到的通知，表明我什么时候可以隐藏`LinearLayout`.

我尝试过的事情：`hideSoftInputFromWindow`使用`ResultReceiver`（结果接收器回调立即被很好地调用（即在键盘实际消失之前），视图 GONEd 太快，同样的问题），覆盖 onLayout `LinearLayout`（当软输入时不会被调用上下移动视图），覆盖其他`View`“开”。

另一个真正令人讨厌的事情是这个问题*似乎*是我的手机独有的 - 运行 Android 4.0.4 的 AT&T 三星 Galaxy SII Skyrocket（可能带有一些三星修改）。我无法在 4.0.3 模拟器上进行复制，其他任何人也无法在具有其他 Android 版本的其他设备上进行复制。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-24T16:48:20.873

您将不得不编写自己的触摸事件处理程序。这是一个示例，当软输入被隐藏时，将向下滑动整个 frameLayout 视图。如您所见，调用超级处理程序并将我们的代码包装在 textEdit 小部件的测试中是很重要的。如果您想查看计算结果，请取消注释调试记录器代码。

```
 @Override
public boolean dispatchTouchEvent(MotionEvent event) {

    View v = getCurrentFocus();
    boolean ret = super.dispatchTouchEvent(event);

    if (v instanceof EditText) {
        View w = getCurrentFocus();

        int scrcoords[] = new int[2];
        w.getLocationOnScreen(scrcoords);
        float x = event.getRawX() + w.getLeft() - scrcoords[0];
        float y = event.getRawY() + w.getTop() - scrcoords[1];

        // Log.d("Activity",
        // "Touch event "+event.getRawX()+","+event.getRawY()+" "+x+","+y+" rect "+w.getLeft()+","+w.getTop()+","+w.getRight()+","+w.getBottom()+" coords "+scrcoords[0]+","+scrcoords[1]);
        if (event.getAction() == MotionEvent.ACTION_UP
                && (x < w.getLeft() || x >= w.getRight() || y < w.getTop() || y > w
                        .getBottom())) {

            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(getWindow().getCurrentFocus()
                    .getWindowToken(), 0);
        }
    }

    return ret;

} 
```

# eclipse - Eclipse STS Hibernate 错误：“正在获取数据库的子项”。org.slf4j.spi.LocationAwareLogger.log

> ID：15818089
> 
> 赞同：2
> 
> 时间：2013-04-04T17:44:28.900
> 
> 标签：eclipse, hibernate, maven, logging, slf4j

我已经查看并尝试了处理 SLF4J 相关问题的各种解决方案，但没有任何效果。我要做的就是在 STS 中使用 Hibernate 插件。我只需单击 Hibernate 透视图，然后单击我的项目上的向下箭头和数据库上的向下箭头，就会发生此异常。

我在 Hibernate 控制台的属性中看到有一个 Eclipse 日志文件 dir 到 logback。我是否必须在某个地方的 pom 中设置 logback？

我使用了我在网上找到的 eclipse 教程中的设置。唯一的区别是我使用的是特定的 STS 版本和更新版本的 Spring 和 Hibernate。我已经设置了休眠配置和控制台配置。

任何帮助让这个 Hibernate 插件与使用 Maven 的 Logging 一起正常工作将不胜感激。提前致谢！！

以下是我的设置：

STS v3.2，MySQL DB，vFabric Server（STS自带），使用Maven

POM 版本：

```
 <java-version>1.6</java-version>
    <spring.version>3.2.2.RELEASE</spring.version>
    <spring.security.version>3.1.3.RELEASE</spring.security.version>
    <org.aspectj-version>1.6.10</org.aspectj-version>
    <org.slf4j-version>1.7.2</org.slf4j-version>
    <org.apache.tiles>2.2.2</org.apache.tiles>      
    <mysql>5.1.24</mysql>               
    <hibernate.version>4.1.5.Final</hibernate.version>
    <junit.version>4.11</junit.version> 
```

Spring、Hibernate 和 Logging 部分：

```
 <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
             </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Hibernate -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${hibernate.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.version}</version>
    </dependency>               
   <!-- Saw this fix online and was trying - doesn't work, temp commented out
   <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>           
        <version>4.3.1.Final</version>
        <exclusions>
            Exclude SLF4j to avoid version conflicts (we have 1.6.2, this drags in 1.6.1)
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.hibernate.common</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <version>4.0.1.Final</version>
        <classifier>tests</classifier>
    </dependency>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
    </dependency> 
    END Saw this fix online and was trying - doesn't work, temp commented out -->

    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
        <scope>provided</scope>
    </dependency>     

<!-- Logging -->        
    <dependency>
        <groupId>org.jboss.logging</groupId>
        <artifactId>jboss-logging</artifactId>
        <version>3.1.0.CR2</version>
    </dependency>       
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency> 
```

下面是堆栈跟踪：

```
java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
    at org.apache.commons.logging.impl.SLF4JLocationAwareLog.debug(SLF4JLocationAwareLog.java:133)
    at org.hibernate.cfg.reveng.dialect.JDBCMetaDataDialect.getTables(JDBCMetaDataDialect.java:26)
    at org.hibernate.cfg.reveng.JDBCReader.processTables(JDBCReader.java:476)
    at org.hibernate.cfg.reveng.JDBCReader.readDatabaseSchema(JDBCReader.java:74)
    at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter$2.execute(LazyDatabaseSchemaWorkbenchAdapter.java:126)
    at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)
    at org.hibernate.console.ConsoleConfiguration.execute(ConsoleConfiguration.java:107)
    at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter.readDatabaseSchema(LazyDatabaseSchemaWorkbenchAdapter.java:115)
    at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter.getChildren(LazyDatabaseSchemaWorkbenchAdapter.java:65)
    at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.fetchDeferredChildren(BasicWorkbenchAdapter.java:106)
    at org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:235)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

* * *

谢谢！实际上，当我让 Hibernate reveng 工具完成它的工作时，我实际上只是在几分钟内注释掉了日志记录。根据这个帖子 forum.hibernate.org/viewtopic.php?p=2441023 然后我阅读了它们，一切都很好！:D-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:03:12.393

带有 6 个参数的`NoSuchMethodError`on`LocationAwareLogger.log()`方法是 slf4j 在类路径上与 1.6 之前的版本绑定的症状。'mvn dependency:tree' 应该表明同样多，即你有一个较旧的绑定，比如说`slf4j-log4j-1.5.jar`。

# css - GWT 水平强制小部件并具有滚动条

> ID：15818094
> 
> 赞同：0
> 
> 时间：2013-04-04T17:44:39.293
> 
> 标签：css, gwt, flowpanel

我在 ScrollPanel 内的 GWT 中有一个带有 Float Left 的 FlowPanel。我想强制执行，而不是将新内容包装到下一行，而是将其水平添加到 FlowPanel 中并出现滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:13:33.640

相反，你可以做

```
Verticalpanel v= new verticalpanel;

v.add(flowpanel);//styles on flow panel

v.add(morecontent);

scrollpanel.setWidget(v); 
```

# c# - 在 WPF c# 中关闭该线程上的窗口后如何终止线程？

> ID：15818095
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:44:48.623
> 
> 标签：c#, wpf, multithreading

我是多线程的新手。我正在使用 wpf 做一个项目。

我的项目简介：

1.  一个主窗口
2.  mainwindow 中的一个方法创建另一个线程，该线程创建另一个窗口，称为窗口 2。
3.  每当窗口 2 可见时，主窗口就会被挂起（所以我使用`join()`了挂起主线程的方法）

问题是每当我关闭窗口 2 时，新线程都不会终止。所以主线程永远挂起。那么如何解决这个问题。

下面的代码是我在 MainWindow 类中为窗口 2 创建一个新线程的地方：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        Thread addThread = new Thread(CreateCourseWindow);
        addThread.SetApartmentState(ApartmentState.STA);
        addThread.Start();
        Thread.Sleep(TimeSpan.FromSeconds(1));
        addThread.Join();
        if (addcourse.Saved) CreateCourseButton(myCourses.Count(), myCourses.Last());
    } 
```

以下代码是新线程的入口函数

```
private void CreateCourseWindow()
    {
        addcourse = new AddCourse();
        addcourse.Activate();
        addcourse.Show();
        addcourse.Topmost = true;
        System.Windows.Threading.Dispatcher.Run();
    } 
```

以下代码是我要终止线程的地方

```
private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        this.Close();
    } 
```

AddCourse 是窗口 2 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:47:29.500

首先，不要创建多个 UI 线程。它造成了一个*非常*难以处理的真正混乱。除非你*确定*你需要更多，并且你真的知道你在做什么，否则你的应用程序中只会有 UI 线程。

至于这种特定情况，您无需担心异步、多线程或其中任何一种：

```
ChildWindow child = new ChildWindow();
this.Hide();
child.ShowDialog();
this.Show(); 
```

通过使用`ShowDialog`而不是`Show`你删除所有讨厌的异步问题。

如果您希望父窗口可见但未启用，您可以删除显示/隐藏但保留`ShowDialog`，这将确保父窗口被禁用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:49:15.147

1.  不建议通过挂起线程来挂起窗口。你得到的是一个完全无响应的窗口，它根本不处理任何 Windows 事件。例如，它不会对移动事件、设置光标事件或其他您认为即使是禁用的窗口也会有的事情做出反应。此外，如果此线程上有任何 COM STA 对象，它们将挂起（有时即使您没有明确创建它们，也可能存在此类对象）。

2.  你如何从第二个线程打开窗口？听起来这个线程正在运行一个循环，当窗口关闭时不会终止。如果您发布一些代码，它会有所帮助。

# javascript - 有没有办法禁用设备睡眠？

> ID：15818099
> 
> 赞同：2
> 
> 时间：2013-04-04T17:44:55.217
> 
> 标签：javascript, html, trigger.io

现在正在开发需要某种计时器的应用程序，该计时器将从 5:00 分钟倒计时到 0:00。有没有办法如何禁用设备睡眠，这会在用户定义的睡眠时间后打破这个？有什么技巧可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:58:44.523

您应该能够为 Android 和 iOS 编写本机插件来禁用设备睡眠。以下是有用的链接，可以帮助您走上正确的道路：

[Trigger.io 原生插件](http://docs.trigger.io/en/latest/modules/native/index.html)

[iOS：如何停止设备待机计时器？](https://stackoverflow.com/questions/5064332/ios-how-to-stop-the-device-standby-timer)

[停止 android 设备休眠](https://stackoverflow.com/questions/6075125/stop-android-device-from-sleeping)

# java - 使用服务内的广播接收器检测通话结束

> ID：15818104
> 
> 赞同：1
> 
> 时间：2013-04-04T17:45:07.740
> 
> 标签：java, android, broadcastreceiver, android-service

我正在编写一个Android应用程序，我需要在服务中运行广播接收器，接收器检测何时有来电以及何时结束或接听电话，服务将手机置于静音模式，接收器检测何时有来电，如果有来电，接收器将振铃模式设置为正常振铃和振动，当来电被接听或结束时，接收器再次将振铃器设置为静音模式。

这是我的接收器：

```
private final BroadcastReceiver CallReceiver = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
        AudioManager amanager=(AudioManager)getSystemService(Context.AUDIO_SERVICE);
        amanager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);

        String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
        if (TelephonyManager.EXTRA_STATE_RINGING.equals(state))
        {
            amanager.setRingerMode(2);  //Ringer ON
        }
        if (TelephonyManager.EXTRA_STATE_IDLE.equals(state))
        {
            amanager.setRingerMode(0);  //Ringer Silent
        }
        if (TelephonyManager.EXTRA_STATE_OFFHOOK.equals(state))
        {
            amanager.setRingerMode(0);  ////Ringer Silent
        }
    }
       }; 
```

在我的服务中的 onStartCommand 方法中：

```
 IntentFilter filter = new IntentFilter();
      filter.addAction(TelephonyManager.ACTION_PHONE_STATE_CHANGED);
      registerReceiver(CallReceiver, filter); 
```

该服务正在成功运行，并且接收器检测到何时有来电但应用程序随后崩溃，任何想法为什么会发生这种情况？感谢您的帮助！

编辑：我解决了这个问题，原来我在清单中写了错误的操作，更改后它不会崩溃。

但是现在接收器只检测到来电，但没有检测到电话何时接听或结束，它确实检测到了几次，但大多数时候它没有检测到，通话结束后铃声仍然打开！有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T00:24:22.840

终于找到出路了！我在将铃声模式设置为静音之前添加了一秒钟的延迟，我不知道这个解决方案是如何工作的，但确实如此！

```
private final BroadcastReceiver CallReceiver = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
        AudioManager amanager=(AudioManager)getSystemService(Context.AUDIO_SERVICE);
        amanager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);

        String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);

        if (TelephonyManager.EXTRA_STATE_IDLE.equals(state))
        {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            amanager.setRingerMode(0);  //Ringer Silent
        }
        if (TelephonyManager.EXTRA_STATE_OFFHOOK.equals(state))
        {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            amanager.setRingerMode(0);  ////Ringer Silent
        }
        if (TelephonyManager.EXTRA_STATE_RINGING.equals(state))
        {
            amanager.setRingerMode(2);  //Ringer ON
        }
    }
       }; 
```

# html - 如何使用 :hover 与多个类

> ID：15818107
> 
> 赞同：8
> 
> 时间：2013-04-04T17:45:26.923
> 
> 标签：html, css, css-selectors

我有一个 CSS 按钮样式和一些预定义的颜色样式。我使用颜色类将事物着色为相同的颜色，并使用按钮样式使按钮变圆。

如何为我的按钮添加悬停样式以将颜色更改为较浅的阴影？我认为它就像 .class class2:hover {etc} 一样简单，但由于某种原因它不起作用。

这是我准备演示的小提琴：http: [//jsfiddle.net/7n4Wy/](http://jsfiddle.net/7n4Wy/)

HTML

```
<p class="red button">Test</p>
<p class="blue button">Test</p>
<p class="red"> Not a button </p> 
```

CSS

```
.red {
    background: red;
}

.blue {
    background: blue;    
}

.button {
    border-radius: 6px;
}

.button:hover .red:hover {
    background: pink;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T17:47:39.337

`.red:hover`您所拥有的是试图匹配*inside* `.button:hover`，这意味着您的标记中有一个嵌套元素。

由于您选择的是相同的元素，因此您需要将两个类与单个`:hover`:

```
.red.button:hover {
    background: pink;
} 
```

[更新的小提琴](http://jsfiddle.net/BoltClock/7n4Wy/1)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T17:47:36.773

您可以将 CSS 规则应用于多个选择器（类如 «.button»，或状态如 «:hover»），方法是用逗号分隔它们。

因此只需添加一个逗号：

```
.button:hover, .red:hover {
    background: pink;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T17:47:26.050

使用以下代码[JSFIDDLE](http://jsfiddle.net/7n4Wy/2/)

```
.button.red:hover {
    background: pink;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T21:17:48.093

要应用多个类，不要添加空格（只需使用另一个句点）：

CSS

```
p.button {
    border-radius: 6px;
}

p.red {
    background: 6px;
}

p.button.red:hover {
    background: pink;
} 
```

HTML

```
<p class="button red">Hover Here</p> 
```

空格用于表示子元素。iepbutton red:hover 会影响所有在悬停时具有红色类的元素，这些元素完全包含在具有类按钮的父段落中。

# java - 关键字“this”和“toString”究竟是什么意思和作用？

> ID：15818109
> 
> 赞同：1
> 
> 时间：2013-04-04T17:45:28.860
> 
> 标签：java, this, tostring

我目前正在学习 Java，我已经尽我所能尝试理解这两件事的含义和作用，但我根本不明白。我做了很多谷歌搜索，还检查了网站上过去的问题，但我仍然不明白。到目前为止，我知道“this”以某种方式指代某种方法/变量/对象，但我只是不明白它如何引用这些中的任何一个，而没有（在我看到的示例中）实际指定要引用的内容到，他们只是使用关键字“this.something or this(532);”，这是没有意义的。与 toString 的故事相同，在我得到的这两个中它们是没有逻辑的。无论如何，谁能用简单的方式向我解释这两个关键字，并告诉我它们如何在任何程序中都非常有用。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:54:13.973

`this.something`引用当前类中的**对象** `something`。

`this.method()`引用当前类的**方法**

`this()`指当前类的**构造函数**

`toString()`是一种用于创建`String`对象表示的方法。由于Java中的每个类都是一个子类`Object`并且`Object`有`toString()`方法，所以每个类都有一个默认`toString()`方法。通常，您需要覆盖默认值`toString()`才能获得有意义的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:50:25.767

`this`关键字是指类的实例。

*   `this(512)`指以 int 作为参数的类的构造函数
*   `this.field`引用类的一个字段
*   `this.method()`引用类的方法

该`toString()`方法是从 Object 继承的，但可以在子类中重写以获得更有意义的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:53:02.230

`this`关键字是指类的当前实例（参见http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html [）](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)。

`toString()`关键字不是关键字：它是方法名称。它在`Object`类中定义并且可以被覆盖。它所做的是创建类的文本表示（参见[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString())）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:55:11.930

例如，如果您的课程如下所示： public class Database { public Database (int port){ } }

然后引用这个类的对象，你可以这样使用：this(3306); 因此，此关键字用于引用类

# git - 在没有部署密钥的情况下克隆私有 github 存储库？

> ID：15818110
> 
> 赞同：1
> 
> 时间：2013-04-04T17:45:31.810
> 
> 标签：git, github, cloning

我正在尝试构建一个可以克隆一个人的私人仓库（经许可）并对其进行分析的应用程序，类似于 codeclimate 所做的。我想在不使用部署密钥或弄乱 ssh 的情况下做到这一点。我注意到 codeclimate 使用 github 的 Oauth 并且只需单击一下，但我在我的应用程序上进行了测试，我遇到了我在这个问题中概述的问题：[Oauth Cloning on github not working (fatal: Authentication failed)](https://stackoverflow.com/questions/15817709/oauth-cloning-on-github-not-working-fatal-authentication-failed)

那么，在获得许可且用户无需使用我的 github 应用程序创建部署密钥的情况下，我可以使用什么方法来克隆私有 git 存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T11:51:30.247

1.  在 github 中定义您的应用程序：[https ://github.com/settings/applications](https://github.com/settings/applications)
2.  添加部署（公共）密钥：http: [//developer.github.com/v3/repos/keys/#create](http://developer.github.com/v3/repos/keys/#create)
3.  调整您的 ssh 设置以使用此关联的私钥 [为 Github 私有存储库验证 Jenkins CI](https://stackoverflow.com/questions/5212304/authenticate-jenkins-ci-for-github-private-repository)
4.  具有特定 uri 的 git clone

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T20:32:01.217

首先看一下github api：

[http://developer.github.com/v3](http://developer.github.com/v3)

通过身份验证后，您可以查看用户存储库：http: [//developer.github.com/v3/repos/](http://developer.github.com/v3/repos/)

一旦选择了 repo，您​​也可以从 api 执行“git”调用：http: [//developer.github.com/v3/git/](http://developer.github.com/v3/git/)

你可以阅读提交、blob、树、分支、标签、引用......几乎所有内容。

# regex - perl中正则表达式匹配的奇怪问题，替代尝试匹配

> ID：15818111
> 
> 赞同：6
> 
> 时间：2013-04-04T17:45:32.867
> 
> 标签：regex, perl

考虑以下 perl 脚本：

```
 #!/usr/bin/perl

 my $str = 'not-found=1,total-found=63,ignored=2';

 print "1\. matched using regex\n" if ($str =~ m/total-found=(\d+)/g);
 print "2\. matched using regex\n" if ($str =~ m/total-found=(\d+)/g);
 print "3\. matched using regex\n" if ($str =~ m/total-found=(\d+)/g);
 print "4\. matched using regex\n" if ($str =~ m/total-found=(\d+)/g);

 print "Bye!\n"; 
```

运行后的输出是：

```
1\. matched using regex
3\. matched using regex
Bye! 
```

相同的正则表达式匹配一次，之后不会立即匹配。知道为什么在 perl 中使用相同正则表达式匹配相同字符串的替代尝试失败了吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T20:37:06.907

这是您的代码不起作用的详细*解释。*

修饰符将`/g`正则表达式的行为更改为“全局匹配”。这将匹配字符串中所有出现的模式。但是，如何进行这种匹配取决于*context*。Perl 中的两个（主要）上下文是*列表上下文*（复数）和*标量上下文*（单数）。

在**list context 中**，全局正则表达式匹配返回所有匹配子字符串的列表，或所有匹配捕获的平面列表：

```
my $_ = "foobaa";
my $regex = qr/[aeiou]/;

my @matches = /$regex/g; # match all vowels
say "@matches"; # "o o a a" 
```

在**标量上下文中**，匹配*似乎*返回一个 perl 布尔值，描述正则表达式是否匹配：

```
my $match = /$regex/g;
say $match; # "1" (on failure: the empty string) 
```

但是，正则表达式变成了*迭代器*。每次执行正则表达式匹配时，正则表达式都会从字符串中的当前位置开始，并尝试匹配。如果匹配，则返回 true。如果匹配失败，那么

*   匹配返回 false，并且
*   字符串中的当前位置设置为开始。

因为字符串中的位置被重置，下一次匹配将再次成功。

```
my $match;
say $match while $match = /$regex/g;
say "The match returned false, or the while loop would have go on forever";
say "But we can match again" if /$regex/g; 
```

第二个效果 - 重置位置 - 可以使用附加`/c`标志取消。

可以使用`pos`函数访问字符串中的位置：`pos($string)`返回当前位置，可以设置为`pos($string) = 0`.

正则表达式也可以`\G`在当前位置使用断言锚定，就像`^`在字符串开头锚定正则表达式一样。

这种`m//gc`风格的匹配使得编写分词器变得容易：

```
my @tokens;
my $_ = "1, abc, 2 ";
TOKEN: while(pos($_) < length($_)) {
  /\G\s+/gc and next; # skip whitespace
  # if one of the following matches fails, the next token is tried
  if    (/\G(\d+)/gc) { push @tokens, [NUM => $1]}
  elsif (/\G,/gc    ) { push @tokens, ['COMMA'  ]}
  elsif (/\G(\w+)/gc) { push @tokens, [STR => $1]}
  else { last TOKEN } # break the loop only if nothing matched at this position.
}
say "[@$_]" for @tokens; 
```

输出：

```
[NUM 1]
[COMMA]
[STR abc]
[COMMA]
[NUM 2] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T17:51:33.327

摆脱`m`并`g`作为正则表达式的修饰符，它们没有做你想做的事。

```
print "1\. matched using regex\n" if ($str =~ /total-found=(\d+)/);
print "2\. matched using regex\n" if ($str =~ /total-found=(\d+)/);
print "3\. matched using regex\n" if ($str =~ /total-found=(\d+)/);
print "4\. matched using regex\n" if ($str =~ /total-found=(\d+)/); 
```

具体来说，`m`is optional 在这种情况下`m/foo/`与 完全相同`/foo/`。真正的问题是`g`在这种情况下会做很多你不想要的事情。有关详细信息，请参阅[perlretut](http://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-22T12:18:41.223

```
 my $str = 'not-found=1,total-found=63,ignored=2';

 print "1\. matched using regex\n" if ($str =~ m/total-found=(\d+)/g); 
```

匹配`total-found=63`和`pos($str)`下一次匹配尝试设置为偏移量 26。

```
 print "2\. matched using regex\n" if ($str =~ m/total-found=(\d+)/g); 
```

匹配`nothing`，因此`pos($str)`重置为偏移量 0。

这就是为什么

```
 print "3\. matched using regex\n" if ($str =~ m/total-found=(\d+)/g); 
```

再次匹配`total-found=63`，`pos($str)`下一次匹配尝试再次设置为偏移 26，这就是为什么

```
 print "4\. matched using regex\n" if ($str =~ m/total-found=(\d+)/g); 
```

像第二个一样再次失败，重新设置`pos($str)`为偏移量 0。

```
 print "Bye!\n"; 
```

# c# - 从 listview 访问标签控件

> ID：15818121
> 
> 赞同：0
> 
> 时间：2013-04-04T17:46:20.580
> 
> 标签：c#, asp.net

我无法从列表视图访问标签。我一直在阅读所有帖子，但似乎没有任何效果。这是我的代码。

```
for (int i = 0; i < ListView1.Items.Count; i++)
                {
                    Label someLabel = (Label) ListView1.Items[i].FindControl("nItemsId");
                    if (someLabel != null)
                        someLabel.Text = "100";
                }

 <asp:ListView runat="server" ID="ListView1" DataKeyNames="ProductId" DataSourceID="GameTable" OnItemCommand="On_Select_Item" >
      <LayoutTemplate>
           <table runat="server" id="gametable" cellspacing="0" cellpadding="1" border="0">
              <tr style="height: 20px; font-size: 20px; color: Red">
             <th>
                <asp:Label runat="server" Text="5" ID="nItemsId" cssClass="cart">        
                 </asp:Label>
              </th>
              </tr>

......................................
------------------------------
</asp.ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:54:19.080

LayoutTemplate 内的标签控件，因此它不是任何`ListView`项目的一部分。试试：

```
ListView.FindControl("nItemsId") 
```

如果标签是其中的一部分，您所拥有的将起作用`ItemTemplate`

有关此主题的更多信息：[访问 ListView 的 LayoutTemplate 内的控件](https://stackoverflow.com/questions/433846/access-a-control-inside-a-the-layouttemplate-of-a-listview)

# c# - 如何在 Visual Basic 中循环客户端对象数组？

> ID：15818122
> 
> 赞同：0
> 
> 时间：2013-04-04T17:46:23.570
> 
> 标签：c#, asp.net, vb.net, json, object

我在客户端创建了一个 JSON 对象，然后将它传递给`asp:HiddenField`

这是其中的一部分`Object`

```
"[{"value":"0","column":"lngTask"},{"value":"End Checklist","column":"strTask"},
  {"value":"0","column":"lngChecklistRevision"},
  {"value":"","column":"lngManagedTask"}......]" 
```

然后我想在我正在使用的代码中使用它`Visual Basic`

所以我用`JavaScriptSerializer()`这样的：

```
Dim jss As New JavaScriptSerializer()
Dim lstReport As List(Of Object) = jss.Deserialize(Of List(Of Object))
    (hfObjSqlGridRow.Value) 
```

这是我的`lstReport`样子：

![在此处输入图像描述](https://i.stack.imgur.com/FqV9o.png)

*我的问题*是我怎样才能遍历这个对象

我试过这样的事情：

```
lsReport(0)(0)
lsReport(0).(0).value
lsReport(0).value 
```

没有任何效果我得到这个错误=**字典中不存在给定的键。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:05:20.857

此代码使用 C# 编写，但应该很容易转换为 VB.NET。基本前提是使用动态 JSON 序列化程序，它允许在运行时访问属性，就像 JavaScript 中的 JSON 对象一样。您必须使用 .NET 4.0 来支持动态对象。

[将 JSON 反序列化为 C# 动态对象？](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:05:34.413

你不能只使用`For Each`循环吗？

```
For Each item In lsReport
    ' Do whatever you need with item.value
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-07T10:48:36.087

试试这个：

```
dim JSObject as String =
[
  {"00ID": "PTDA_000ParentCat_000Cat_000SubCat_000_ParentCatTxt", "00Val": "Page"}, 
  {"00ID": "PTDA_000ParentCat_000Cat_000SubCat_001_CatTxt", "00Val": "Inherite Parent"}, 
  {"00ID": "PTDA_000ParentCat_000Cat_000SubCat_002_SubCatTxt", "00Val": "Inherite Parent"}, 
  {"00ID": "PTDA_000ParentCat_000Cat_000SubCat_010_UCI", "00UCItype" : "UCItf", "00Val": "false", "01Txt": "Include related containers", "02Tip": "include related containers"}
]

            Dim serializer As JavaScriptSerializer = New JavaScriptSerializer()
            Dim obj As Object = serializer.Deserialize(Of Object)(JSObject)

    s = GetProp(obj, "PTDA_000ParentCat_000Cat_000SubCat_000_ParentCatTxt.00Val")
            SetProp(obj, "PTDA_000ParentCat_000Cat_000SubCat_000_ParentCatTxt.00Val", "NEwVal")
            s = GetProp(obj, "PTDA_000ParentCat_000Cat_000SubCat_000_ParentCatTxt.00Val")
            s = ""

Public Function GetProp(objf As Object, propPath As String) As String
    Dim propVal As String = ""
    Dim propPathAr As Array = Split(propPath, ".")
    'http://stackoverflow.com/questions/8118019/vb-net-json-deserialize
    For Each item In objf
        If item("00ID") = propPathAr(0) Then
            propVal = item(propPathAr(1))
            Exit For
        End If
    Next
    Return propVal
End Function
Public Sub SetProp(ByRef objf As Object, propPath As String, val As String)
    Dim propPathAr As Array = Split(propPath, ".")
    For Each item In objf
        If item("00ID") = propPathAr(0) Then
            item(propPathAr(1)) = val
            Exit Sub
        End If
    Next
End Sub 
```

# android - Android Webview 进行冗长的 Jquery AJAX 调用

> ID：15818124
> 
> 赞同：0
> 
> 时间：2013-04-04T17:46:30.417
> 
> 标签：android, jquery, ajax, webview

我有一个 android 混合应用程序，我从主要活动加载 html 文件：

```
super.loadUrl("file:///android_asset/www/myapp/myPage.html"); 
```

从这个 html 中，我加载了一个 javascript，它对 Dev 服务器上的 REST API 进行 jquery ajax 发布调用。根据我在 ajax 调用中发送的数据量，服务器可能需要大量时间来处理数据并返回响应。当服务器响应缓慢时，我几乎总是从 ajax 调用中得到一个错误，其 textStatus 只是“错误”。较小的数据调用总是成功的。Logcat 说：

```
httpFailure() ******* java.net.UnknownHostException 
```

是否有某种超时 Android 使用可能会关闭与服务器的连接？

此外，诸如此类的 ajax 请求是否在 Android 的 UI 线程上运行？

我发现服务器端处理实际上没有错误地完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:52:57.510

`java.net.UnknownHostException`**没有互联网连接**时抛出。

 **确保您的设备/模拟器有 互联网**连接**并且您已经放弃`permission``AndroidManifest.xml`

`<uses-permission android:name="android.permission.INTERNET" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:41:11.980

我从来没有找到解决这个问题的好方法。我决定让 jquery ajax 调用的异步特性来处理这种情况，而不是在应用程序等待响应时占用用户。**

# node.js - 无法在 node.js 的 ejs 模板中呈现

> ID：15818126
> 
> 赞同：0
> 
> 时间：2013-04-04T17:46:32.547
> 
> 标签：node.js, ejs

我在 node.js ejs 模板中遇到了一个问题。这是快递代码。

```
app.get('/course',function(req,res){
     var locals = {};
     locals.course = {
            title: 'data.title',
            city: 'data.city',
            desc: 'data.desc',
            id: 'data._id'
     };         
     res.render('course_description',locals );
}); 
```

这是模板代码

```
<div >
  <article>
    <% if(locals.course) { %>           
            <div><% locals.course.title %></div>
            <div><% locals.course.city %></div>
            <div><% course.city %></div>
            <div><% course.title %></div>   
    <% } %>
  </article>    
</div> 
```

当 res.render('course_description',locals ); 被触发时，本地数据应该传递给模板，但由于某些未知原因，它不适用于本示例。

我得到的只有 4 个空的

```
<div >
  <article>         
            <div></div>
            <div></div>
            <div></div>
            <div></div> 
  </article>    
</div> 
```

以前有没有人遇到过这个问题，我很困惑，我以前做过一些工作示例，但是当我将其与其他工作示例进行比较时，我仍然找不到原因。

注意，我使用的是最新的 ejs 和 express

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:52:14.093

`<% ... %>`用于代码构造，而不是用于输出。

试试这个：

```
<div>
  <article>
    <% if (locals.course) { %>
      <div><%= locals.course.title %></div>
      <div><%= locals.course.city %></div>
      <div><%= course.city %></div>
      <div><%= course.title %></div>
    <% } %>
  </article>
</div> 
```

# javascript - 单击div时如何执行代码？

> ID：15818127
> 
> 赞同：1
> 
> 时间：2013-04-04T17:46:36.393
> 
> 标签：javascript, iframe, onclick, execute

我花了最后几个小时试图找到这个问题的答案，但似乎没有任何工作......

单击 div（或其中的任何内容；包括 iframe 内容）时，我需要执行一段代码。下面的代码应该这样做（当添加到 div 标签中时），但它似乎不起作用。

```
onclick="if(typeof(_vis_opt_top_initialize) =='function'){ _vis_opt_goal_conversion(200); _vis_opt_pause(500);}" 
```

目的是执行自定义转换目标：

```
<script type="text/javascript">
   if(typeof(_vis_opt_top_initialize) == "function") {
   _vis_opt_goal_conversion(200);
   }
</script> 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:55:59.570

我讨厌使用内联js……讨厌它……

如果你需要考虑 IE (<8)，那么你不能使用 addEventListener，所以你可以这样做：

```
function bindListener(el,eventName,eventHandler) {
    if (el.addEventListener) { // Anything but IE <8
        el.addEventListener(eventName,eventHandler,false);
    } else if (el.attachEvent) { // For IE <8
        el.attachEvent('on'+eventName,eventHandler);
    }
} 
```

然后您可以使用以下方式调用它：

```
var ele = document.getElementById('idOfElement');

bindListener(ele, 'click', functionToCall); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:49:39.383

尝试使用 addEventListener。[链接在这里](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)。该页面上的[示例](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener#Example)正是您所要求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:51:52.147

我为你写一个简单的例子：（j 查询答案）

**html代码**

```
<div class="test">Click</div> 
```

**JavaScript 代码**

```
$('div.test').click(function(){
    alert("some");
}); 
```

[演示](http://jsfiddle.net/xD8Xq/)

**已编辑**

JavaScript 示例

```
<html >
<script type="text/javascript">
function AttachAllDivEvents()
{
var divCollection = document.getElementsByTagName("div");
for (var i=0; i<divCollection.length; i++)
{
AttachDivClickEvent(divCollection[i]);
}
}
function AttachDivClickEvent(divObj)
{
divObj.onclick = function()
{
document.getElementById("count").innerHTML = parseInt(document.getElementById("count").innerHTML) + 1;
};
}
window.onload = AttachAllDivEvents;
</script>

<body>
<div>click</div>
<p id="count" style="font:bold 20px Times;color:red;text-indent:20px">1</p>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:52:31.353

首先给你`div`一个唯一的ID

```
<div id="yourDivID"></div> 
```

然后在中设置onclick函数`window.onload`

```
var yourDiv = document.getElementById("yourDivID");

yourDiv.onclick = function() {
       if(typeof(_vis_opt_top_initialize) == "function") {
           _vis_opt_goal_conversion(200);
       }
   }
} 
```

# widget - loadrunner 小部件 - 它们如何匹配？

> ID：15818133
> 
> 赞同：0
> 
> 时间：2013-04-04T17:46:42.293
> 
> 标签：widget, loadrunner

我将加载测试一个使用 wickets 框架构建的应用程序，该应用程序由主应用程序中的几个小部件/小应用程序组成。Loadrunner 是否以任何方式支持这种应用程序基础架构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:41:05.377

不熟悉检票口。通常 LoadRunner 会拦截网络流量并生成脚本，除非您使用基于浏览器的协议，如 truclient、GUI 等。如果您知道该框架中使用的网络协议，LoadRunner 应该可以工作。

# javascript - D3 中多个折线图的工具提示

> ID：15818136
> 
> 赞同：2
> 
> 时间：2013-04-04T17:46:53.390
> 
> 标签：javascript, d3.js, tooltip

我是 D3 的新手，我的要求是获取多个折线图并为它们提供工具提示。

我可以让多个折线图出现，但我在获得多个工具提示点时出错了。

我也是 javascript 新手。因此，任何帮助将不胜感激。

这是我的代码。

```
<script>

 function showData(obj, d) {
 var coord = d3.mouse(obj);
 var infobox = d3.select(".infobox");
 // now we just position the infobox roughly where our mouse is
 infobox.style("left", (coord[0] + 200) + "px" );
 infobox.style("top", (coord[1] - 130) + "px");
 $(".infobox").html(d);
 $(".infobox").show();
 }

 function hideData() {
 $(".infobox").hide();
 }

    var xx,yy;
    function xx(e) { 
    return x(e.date); };
    function yy(e) { 
    return y(e.returns); };

 var draw = function()  {   

        var margin = {top:100,left:200,right:200,bottom:100},
        width = 1150 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

        var parseDate = d3.time.format("%Y-%m-%d").parse;

         x = d3.time.scale().range([0,width]);

         y = d3.scale.linear().range([height,0]);

        //values of the axis is plotted here
        var xAxis = d3.svg.axis().scale(x).orient("bottom");

        var yAxis = d3.svg.axis().scale(y).orient("left");

        var svg = d3.select("#chart").append("svg")
                  .attr("width" , width + margin.left + margin.right)
                  .attr("height" , height + margin.top + margin.bottom)
                  .attr("pointer-events" , "all")
                 .append("g")
                  //this is the line that positions the graph
                 .attr("transform" , "translate(" + margin.left + "," + margin.top +") ");      

        var activeReturns = new Array();
        var passiveReturns = new Array();
        var D3Obj = new Array();

        var line = d3.svg.line()
                .interpolate("basis")
                .x(function(d) { return x(d.date); })
                .y(function(d) { return y(d.returns);});

        d3.json("d3.v3/sample1.json",function(error,result) {
        result.data.forEach(function(d){

            var arObj = new Object();
            arObj.date = parseDate(d.date);
            arObj.returns = +d.returns;

            var prObj = new Object();
            prObj.date = parseDate(d.date);
            prObj.returns = +d.ticker_performance;

            activeReturns.push(arObj);
            passiveReturns.push(prObj);

        });

        D3Obj.push(activeReturns);
        D3Obj.push(passiveReturns);

        // this is where i tell that the line graph to be done

    x.domain(d3.extent(D3Obj[0], function(d) {return d.date ;} ));
    y.domain(d3.extent(D3Obj[0], function(d) {return d.returns ;} ));

    svg.append("g")
        .attr("class" , "x axis")
        .call(xAxis)
        .attr("transform","translate(0 ,"+ height + ")")

    svg.append("g")
        .attr("class" , "y axis")
        //this is where yaxis line is added
        .call(yAxis)
    .append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", ".71em")
        .style("text-anchor", "end")
        .text("Price ($)");

   svg.selectAll(".line")
   .data(D3Obj)
   .enter().append("path")
   .attr("class","line")
   .attr("d",line)

//this is where i am adding the tooltips
 //tooltip for 1st line
svg.selectAll("circle")
 .data(D3Obj[0])
 .enter().append("circle")
 .attr("fill", "red")
 .attr("r", 2)
  .attr("cx", xx)
 .attr("cy", yy)
 .on("mouseover", function(d) { showData(this, d.returns);})
 .on("mouseout", function(){ hideData();});

 //tooltip for 2nd line - this is where i think i am going wrong.
 svg.selectAll("circle")
 .data(D3Obj[1])
 .enter().append("circle")
 .attr("fill", "steelblue")
 .attr("r", 2)
  .attr("cx", xx)
 .attr("cy", yy)
 .on("mouseover", function(d) { showData(this, d.returns);})
 .on("mouseout", function(){ hideData();});

});

 $("#chart").append("<div class='infobox' style='display:none;'>Test</div>");

};
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:54:51.270

当您创建第二个点时，实际上什么都没有发生。该`.data()`函数将尝试将您传递的数据元素与您选择的数据元素相匹配（在本例中为一个圆圈），并将在此处成功。这意味着您的输入选择是空的，并且没有任何反应。

d3 方法是一次性传入您要用于创建元素的*所有*数据，并在函数中进行相应处理以设置属性等。也就是说，您的代码应该类似于

```
svg.selectAll("circle")
   .data(D3Obj)
   .enter().append("circle")
   .attr("fill", function(d, i) { if(i == 0) { return "red"; } else { return "steelblue"; } })
   .attr("r", 2)
   .attr("cx", xx)
   .attr("cy", yy)
   .on("mouseover", function(d) { showData(this, d.returns);})
   .on("mouseout", function(){ hideData();}); 
```

这将创建两个圆圈并将相应的侦听器附加到它们。

# django-templates - 分解大型 django 模板：当 {% include %} 和 {% ssi %} 没有足够的上下文时

> ID：15818138
> 
> 赞同：3
> 
> 时间：2013-04-04T17:46:55.603
> 
> 标签：django-templates

Django 的[{% include %}](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#std:templatetag-include)和[{% ssi %}](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#std:templatetag-ssi)可以渲染或合并模板。但它们旨在处理模板并返回 HTML。正如文档所说*，“这意味着包含的模板之间没有共享状态——每个包含都是一个完全独立的渲染过程。”*

但是如果我想要共享上下文怎么办？如果我`{% include 'extra/map.html' %}`需要在该`<head>`部分添加一个块怎么办？我怎样才能最好地将一个大模板分解成多个部分，并保留上下文？{% include %} 机制似乎比扩展基础更清晰，但上下文问题阻碍了。

另请参阅[在其他模板中包含 django 模板，以便实际解析它们](https://stackoverflow.com/questions/9340406/including-django-templates-in-other-templates-so-they-are-actually-parsed)

# java - 返回随机文本字段输入

> ID：15818142
> 
> 赞同：1
> 
> 时间：2013-04-04T17:47:18.307
> 
> 标签：java, netbeans-7.3

我对编码很陌生，我正在尝试使用 NetBeans 7.3 在 java 中制作一个程序（不确定它是否真的很重要，但更安全，然后抱歉）从一个文本字段中获取输入，用户可以在其中输入任何内容并有一个按钮将结果返回到另一个文本字段。我总共有 10 个文本字段（如果使事情变得复杂，可以并且会降低）和 3 个按钮，一个用于清除文本字段（已经工作），一个用于退出（工作），最后一个用于获得随机结果这就是我遇到的麻烦。搜索一段时间只会导致获得随机数。那么是否可以使用用户输入的文本来获取随机结果，或者更容易用数字标记每个文本字段，然后让它调用一个随机数字呢？我愿意接受建议和改进！很抱歉造成混乱，但这应该澄清一些事情。我试图让按钮“随机选择将出现在顶部”以获​​取其中一个 jTextField 并将用户输入文本传输到 jTextField11。这是GUI的图像[http://oi50.tinypic.com/2a5aud4.jpg](http://oi50.tinypic.com/2a5aud4.jpg)这是我已经拥有的代码

```
*
* To change this template, choose Tools | Templates
* and open the template in the editor.
*/
package my.michelleschoices;

/**
*
* @author Antonio
*/
public class Michelleschoices extends javax.swing.JFrame {

/**
 * Creates new form Michelleschoices
 */
public Michelleschoices() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    jPanel1 = new javax.swing.JPanel();
    jPanel2 = new javax.swing.JPanel();
    jTextField1 = new javax.swing.JTextField();
    jTextField2 = new javax.swing.JTextField();
    jTextField3 = new javax.swing.JTextField();
    jTextField4 = new javax.swing.JTextField();
    jTextField5 = new javax.swing.JTextField();
    jTextField6 = new javax.swing.JTextField();
    jTextField7 = new javax.swing.JTextField();
    jTextField8 = new javax.swing.JTextField();
    jTextField9 = new javax.swing.JTextField();
    jTextField10 = new javax.swing.JTextField();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jButton3 = new javax.swing.JButton();
    jTextField11 = new javax.swing.JTextField();

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 100, Short.MAX_VALUE)
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 100, Short.MAX_VALUE)
    );

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Michelle's Choices", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Comic Sans MS", 0, 18))); // NOI18N

    jTextField1.setText("jTextField1");

    jTextField2.setText("jTextField2");

    jTextField3.setText("jTextField3");

    jTextField4.setText("jTextField4");

    jTextField5.setText("jTextField5");

    jTextField6.setText("jTextField6");

    jTextField7.setText("jTextField7");

    jTextField8.setText("jTextField8");

    jTextField9.setText("jTextField9");

    jTextField10.setText("jTextField10");

    jButton1.setText("Clear out all the choices");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    jButton2.setText("Random choice will appear at the top");
    jButton2.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton2ActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
    jPanel2.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel2Layout.createSequentialGroup()
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel2Layout.createSequentialGroup()
                    .addContainerGap()
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(jTextField1, javax.swing.GroupLayout.DEFAULT_SIZE, 176, Short.MAX_VALUE)
                        .addComponent(jTextField3)
                        .addComponent(jTextField4)
                        .addComponent(jTextField5)
                        .addComponent(jTextField6))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jTextField2)
                        .addComponent(jTextField10)
                        .addComponent(jTextField9)
                        .addComponent(jTextField8)
                        .addComponent(jTextField7)))
                .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jButton2, javax.swing.GroupLayout.DEFAULT_SIZE, 358, Short.MAX_VALUE))
            .addContainerGap())
    );
    jPanel2Layout.setVerticalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel2Layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jTextField4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jTextField5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField9, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jTextField6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField10, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jButton2)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jButton1))
    );

    jButton3.setText("Exit");
    jButton3.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton3ActionPerformed(evt);
        }
    });

    jTextField11.setText("jTextField11");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jTextField11)
                    .addGap(18, 18, 18)
                    .addComponent(jButton3)))
            .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jButton3)
                .addComponent(jTextField11, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addContainerGap())
    );

    pack();
}// </editor-fold>                        

private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    System.exit(0);
}                                        

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    jTextField1.setText("");
    jTextField2.setText("");
    jTextField3.setText("");
    jTextField4.setText("");
    jTextField5.setText("");
    jTextField6.setText("");
    jTextField7.setText("");
    jTextField8.setText("");
    jTextField9.setText("");
    jTextField10.setText("");
    jTextField11.setText("");
}                                        

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         

}                                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(Michelleschoices.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(Michelleschoices.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(Michelleschoices.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(Michelleschoices.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new Michelleschoices().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JButton jButton3;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private javax.swing.JTextField jTextField1;
private javax.swing.JTextField jTextField10;
private javax.swing.JTextField jTextField11;
private javax.swing.JTextField jTextField2;
private javax.swing.JTextField jTextField3;
private javax.swing.JTextField jTextField4;
private javax.swing.JTextField jTextField5;
private javax.swing.JTextField jTextField6;
private javax.swing.JTextField jTextField7;
private javax.swing.JTextField jTextField8;
private javax.swing.JTextField jTextField9;
// End of variables declaration 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:02:35.323

生成一个随机数，但应在文本字段数的范围内。

现在切换生成的值（我没有在我的切换中使用默认值，因为我知道这种情况永远不会发生）并根据随机数分配文本字段的值。

![在此处输入图像描述](https://i.stack.imgur.com/jSV3U.png)

**编辑：（这就是你要找的）**

```
import java.util.Random;

public class Michelleschoices extends javax.swing.JFrame {

/**
 * Creates new form Michelleschoices
 */
public Michelleschoices() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jPanel1 = new javax.swing.JPanel();
    jPanel2 = new javax.swing.JPanel();
    jTextField1 = new javax.swing.JTextField();
    jTextField2 = new javax.swing.JTextField();
    jTextField3 = new javax.swing.JTextField();
    jTextField4 = new javax.swing.JTextField();
    jTextField5 = new javax.swing.JTextField();
    jTextField6 = new javax.swing.JTextField();
    jTextField7 = new javax.swing.JTextField();
    jTextField8 = new javax.swing.JTextField();
    jTextField9 = new javax.swing.JTextField();
    jTextField10 = new javax.swing.JTextField();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jButton3 = new javax.swing.JButton();
    jTextField11 = new javax.swing.JTextField();

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 100, Short.MAX_VALUE)
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 100, Short.MAX_VALUE)
    );

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Michelle's Choices", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Comic Sans MS", 0, 18))); // NOI18N

    jTextField1.setText("jTextField1");

    jTextField2.setText("jTextField2");

    jTextField3.setText("jTextField3");

    jTextField4.setText("jTextField4");

    jTextField5.setText("jTextField5");

    jTextField6.setText("jTextField6");

    jTextField7.setText("jTextField7");

    jTextField8.setText("jTextField8");

    jTextField9.setText("jTextField9");

    jTextField10.setText("jTextField10");

    jButton1.setText("Clear out all the choices");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    jButton2.setText("Random choice will appear at the top");
    jButton2.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton2ActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
    jPanel2.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel2Layout.createSequentialGroup()
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel2Layout.createSequentialGroup()
                    .addContainerGap()
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(jTextField1, javax.swing.GroupLayout.DEFAULT_SIZE, 176, Short.MAX_VALUE)
                        .addComponent(jTextField3)
                        .addComponent(jTextField4)
                        .addComponent(jTextField5)
                        .addComponent(jTextField6))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jTextField2)
                        .addComponent(jTextField10)
                        .addComponent(jTextField9)
                        .addComponent(jTextField8)
                        .addComponent(jTextField7)))
                .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jButton2, javax.swing.GroupLayout.DEFAULT_SIZE, 358, Short.MAX_VALUE))
            .addContainerGap())
    );
    jPanel2Layout.setVerticalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel2Layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jTextField4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jTextField5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField9, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jTextField6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField10, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jButton2)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jButton1))
    );

    jButton3.setText("Exit");
    jButton3.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton3ActionPerformed(evt);
        }
    });

    jTextField11.setText("jTextField11");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jTextField11)
                    .addGap(18, 18, 18)
                    .addComponent(jButton3)))
            .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jButton3)
                .addComponent(jTextField11, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addContainerGap())
    );

    pack();
}// </editor-fold>

private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {
    System.exit(0);
}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    jTextField1.setText("");
    jTextField2.setText("");
    jTextField3.setText("");
    jTextField4.setText("");
    jTextField5.setText("");
    jTextField6.setText("");
    jTextField7.setText("");
    jTextField8.setText("");
    jTextField9.setText("");
    jTextField10.setText("");
    jTextField11.setText("");
}

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    Random randomGenerator = new Random();

int randomInt = randomGenerator.nextInt(10);
    System.out.println(randomInt);
    jTextField11.setText("field "+" selected");

    switch (randomInt)
    {
        case 0:
            jTextField11.setText("field  "+jTextField1.getText()+" selected");
            break;
            case 1:
            jTextField11.setText("field "+jTextField2.getText()+" selected");
            break;
            case 2:
            jTextField11.setText("field "+jTextField3.getText()+" selected");
            break;
            case 3:
            jTextField11.setText("field "+jTextField4.getText()+" selected");
            break;
            case 4:
           jTextField11.setText("field " +jTextField5.getText()+" selected");
            break;
            case 5:
            jTextField11.setText("field "+jTextField6.getText()+" selected");
            break;
            case 6:
           jTextField11.setText("field "+jTextField7.getText()+" selected");
            break;
            case 7:
            jTextField11.setText("field "+jTextField8.getText()+" selected");
            break;
            case 8:
           jTextField11.setText("field "+jTextField9.getText()+" selected");
            break;
            case 9:
            jTextField11.setText("field "+jTextField10.getText()+" selected");
            break;

    }
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(Michelleschoices.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(Michelleschoices.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(Michelleschoices.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(Michelleschoices.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new Michelleschoices().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JButton jButton3;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private javax.swing.JTextField jTextField1;
private javax.swing.JTextField jTextField10;
private javax.swing.JTextField jTextField11;
private javax.swing.JTextField jTextField2;
private javax.swing.JTextField jTextField3;
private javax.swing.JTextField jTextField4;
private javax.swing.JTextField jTextField5;
private javax.swing.JTextField jTextField6;
private javax.swing.JTextField jTextField7;
private javax.swing.JTextField jTextField8;
private javax.swing.JTextField jTextField9;
// End of variables declaration
 } 
```

# ios - 如何从二进制访问 App Delegate？

> ID：15818152
> 
> 赞同：-2
> 
> 时间：2013-04-04T17:47:42.003
> 
> 标签：ios, objective-c, binary, uiapplicationdelegate, appdelegate

我想在 iPhone 应用程序中访问应用程序委托。我可以从代码中做到这一点

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *) 
```

或者

```
NSObject <UIApplicationDelegate> *appDelegate = (NSObject <UIApplicationDelegate> *)[[UIApplication sharedApplication] delegate]; 
```

有没有办法从应用程序的二进制文件而不是使用 Objective-C 源代码访问 App Delegate？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:23:21.347

> 当我没有源代码而只有应用程序的二进制文件时，我需要这个。所以我的问题是，如果我只有应用程序的二进制文件，是否可以访问应用程序委托对象？

# 不

## 你不能。

# magento - Magento 获得符合应用优惠券标准的产品

> ID：15818155
> 
> 赞同：1
> 
> 时间：2013-04-04T17:47:55.810
> 
> 标签：magento, coupon

谁能帮我在当前购物车中找到符合应用优惠券标准的产品？

实际上，我需要为任何一种匹配产品设置自定义折扣（最高 50%）金额，默认情况下，Magento 在购买的所有匹配产品中应用 50% 折扣，我只需要对一件商品应用折扣。

我做了一些谷歌并在[https://stackoverflow.com/](https://stackoverflow.com/questions/9546410/magento-how-do-i-find-out-if-a-sales-rule-coupon-exists-for-a-product-item)和[http://www.magentocommerce.com/](http://www.magentocommerce.com/boards/viewthread/201516/#t303924)上获得了一些链接，但无法获得任何解决方案或建议。

任何帮助将不胜感激。

**[编辑]**

例如，在符合优惠券标准的这两个项目中，我在购物车中有四个项目（无论我们在条件中设置了什么），所以默认情况下 Magento 对这两个项目应用 50% 折扣（在优惠券中设置），但我想给予折扣仅在这 2 个中的一个（最高价格）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:12:53.270

您是否尝试在“操作”选项卡中选择所需的产品？您可以在此处仅选择要为其应用折扣的这些产品。

您还可以在那里找到“最大数量折扣适用于”配置选项。

# python - 我可以将 xmpp python 库添加到我的谷歌应用引擎服务器吗

> ID：15818157
> 
> 赞同：3
> 
> 时间：2013-04-04T17:47:59.287
> 
> 标签：python, google-app-engine, xmpp, xmpppy

我正在尝试使用 gogle 应用引擎作为服务器在 xmmp 客户端之间发送消息，因此我更喜欢将 xmpp 库用于 python (xmpppy) 而不是 google 应用引擎 API 的 xmpp 库。我可以将 xmpp python 库添加到我的服务器吗？我的意思是我可以使用这个库而不是谷歌应用引擎的 xmpp 库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:53:31.087

我不知道，但您的两个最大限制将是无法使用本机库，以及 GAE 仅支持 HTTP 请求，无法访问底层套接字这一事实。

如果您的库使用本机代码，或者依赖于使用套接字进行通信，您将无法使用它。如果它是纯 python 并且可以使用基于 HTTP 的传输，你应该没问题。

# php - 使用 HTTP-AUTH 重定向？

> ID：15818159
> 
> 赞同：5
> 
> 时间：2013-04-04T17:48:04.537
> 
> 标签：php, http, curl

有没有办法让 PHP 重定向到新页面，并传递 HTTP-AUTH？

我一直在使用 cURL，作为这里的第二个示例： [Sending basic authentication information via form](https://stackoverflow.com/questions/4460543/sending-basic-authentication-information-via-form#)

不幸的是，当我这样做时，实际的 URL（显示在浏览器 URL 栏中）仍然是原始 PHP 的 URL，而不是我正在浏览的目标。

这是我到目前为止所得到的：

```
<?php

$user = "xyz";
$pass = "abc";
$userpass = $user . ":" . $pass;

$url = "http://website/directory/";
$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_USERPWD, $userpass);
$result = curl_exec($ch);
$httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

if($httpcode == 200){
    header("Authorization: Basic " . base64_encode($userpass));
    echo $result;
}else{
    header("Location: http://website/login.php");
}

?> 
```

我也试过替换上面的尾端：

```
if($httpcode == 200){
    header("Authorization: Basic " . base64_encode($userpass));
    header("Location: http://website/directory/");
}else{
    header("Location: http://website/login.php");
} 
```

但这失败了；它重定向到[http://website.xyz/directory](http://website.xyz/directory)，但它没有传入用户/密码，并且在到达时我会看到来自服务器的登录信息。

从技术上讲，以下工作。但是，与在 HREF 中传递用户/密码相比，我更喜欢更优雅的解决方案：

```
header("Location: http://" . $userpass . "website/directory/"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:15:58.520

尝试将身份验证与 url 一起传递。像这样：

```
header('Location: http://username:password@website/directory/'); 
```

由于 base64 与纯文本一样不安全，因此不应构成额外的安全风险。浏览器不会在地址栏中显示用户：传递 url 的相关部分。但是浏览器会显示一个消息框（或其他内容），让您确认您即将使用用户名登录该站点：yourusername

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T20:25:26.210

您遇到的问题的解释：`Authorization`标头仅在 HTTP 请求中有效。它在 HTTP 响应中没有任何意义，就像你把它放在哪里一样，因此浏览器会忽略它。

您得到的解决方案（在 URL 中传递用户名和密码）与您将获得的一样好。没有其他选择。

# dotnetnuke - 如何找到我在 DotNetNuke 中添加的页面？

> ID：15818165
> 
> 赞同：0
> 
> 时间：2013-04-04T17:48:51.433
> 
> 标签：dotnetnuke

我是第一次使用 DotNetNuke，但我无法找到我添加的页面的 URL。

我尝试用谷歌搜索它并单击每个链接以查找在某处列出的 URL，但我没有运气。如何找到这些页面？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:30:29.097

如果您转到管理/页面页面（可能称为页面管理），您可以找到您网站上所有页面的列表。您可以右键单击页面并选择“查看”以查看该页面，然后从浏览器中复制 URL

# php - php preg_match 如何

> ID：15818167
> 
> 赞同：0
> 
> 时间：2013-04-04T17:48:55.647
> 
> 标签：php, preg-match

我正在尝试从 html 中获取“参考代码”，但当标签为 P 时只是“参考”

例如：031-0132-806-02

如何使用 preg_match 做到这一点？？？

如何使用 preg_match 获取此信息？

```
{
label: 'P',
available: false, 
ref: '031-0132-806-02'
},
{
label: 'M',
available: false, 
ref: '031-0132-806-03'
}] 
} 
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:56:41.513

如果数字始终采用相同的模式，您可以这样做：

```
<?php
    $string = "{
    label: 'P',
    available: false, 
    ref: '031-0132-806-02'
    },
    {
    label: 'M',
    available: false, 
    ref: '031-0132-806-03'
    }] 
    } 
    },";

    preg_match_all('![0-9]{3}\-[0-9]{4}\-[0-9]{3}\-[0-9]{2}!',$string,$matches);

    print_r($matches);

?> 
```

**更新**假设这是一个数据爬虫。

```
<?php

$url = 'http://www.urltocapture...';

function crawlSite($url){
    $refIDs = array();
        $string = file_get_contents($url);

        preg_match_all('!\items: +?\[[^]]+\]!s',$string,$sets);
        foreach($sets as $items){
            foreach($items as $item){

                $cleanupPattern = array('!\t+!','! +!','!(\r\n|\n|\r)+!','! +!');
                $cleanupReplacements = array(' ',' ',""," ",);
              $item = preg_replace($cleanupPattern,$cleanupReplacements,$item);
              //echo $item."\n";    

            preg_match_all('!label: \'P\'[^\}]+([0-9]{3}\-[0-9]{4}\-[0-9]{3}\-[0-9]{2})[^\}]+}!',$item,$item_match);

                if(!empty($item_match[1][0])){
                    $refIDs[] = $item_match[1][0];
                }
            }
        }
        return $refIDs;

}

$refIDs = crawlSite($url);
print_r($refIDs);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:11:02.903

使用 foreach 循环：

```
$string = <<<WUT
{
label: 'P',
available: false, 
ref: '031-0132-806-02'
},
{
label: 'M',
available: false, 
ref: '031-0132-806-03'
}] 
} 
},
WUT;

$ref = array();

preg_match_all('/(?P<labels>{\s*label:.*?})/s', $string, $m);

foreach($m['labels'] as $code){
    if(strpos($code, "label: 'P'")){
        preg_match('/ref: \'(.*?)\'/', $code, $n);
        $ref[] = $n[1];
    }
}

print_r($ref); 
```

# java - 如何使用输入文件中的文本填充 ArrayList？

> ID：15818174
> 
> 赞同：0
> 
> 时间：2013-04-04T17:49:06.743
> 
> 标签：java, file, arraylist

我将一些 ArrayList 保存到一个文件中，它具有以下格式：

```
[hotel1, hotel2, hotel3]               // ArrayList 1 contents
[hotel5, hotel6]                       // ArrayList 2 contents 
```

当我阅读时，我想分配一个 ArrayList myList，我想将hotel1、hotel2 和hotel3 添加到myList。有什么办法可以直接做到吗？目前我有一个读取下一行的字符串值，它保存括号。正在寻找另一种方法，以便我可以将每一行分配给 ArrayList < String > 对象。

```
public class MyClass1 {
   ArrayList<String> myList = new ArrayList<String>();
    ... // some other code

private void loadUp() throws IOException{
    JFileChooser chooser = new JFileChooser();
        chooser.setDialogTitle("Choose a file to open...");
        checker = chooser.showOpenDialog(null);

    // if open is clicked
    if (checker == JFileChooser.APPROVE_OPTION) {
        File inFile = chooser.getSelectedFile();
        Scanner in = new Scanner(inFile);
        while (in.hasNextLine()) {
            // Here want to assign next line to myList
        }
        in.close();
}
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:03:58.750

用这个：

```
Scanner file = new Scanner(myFile);
ArrayList<Scanner> lines = new ArrayList<>();
while(file.hasNextLine())
    lines.add(new Scanner(file.nextLine()));
ArrayList<ArrayList<String>> lists = new ArrayList<>(lines.size());
for(Scanner s : lines)
    s.useDelimeter("[, ]" + System.lineSeparator());
for(int i = 0; i < lines.size(); ++i)
{
    while(lines.get(i).hasNext())
    {
        lists.add(new ArrayList<String>());
        lists.get(i).add(lines.get(i).next());
    }
} 
```

然后你会得到一个包含值的字符串列表列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:23:03.067

尝试下面的代码来阅读每一行

```
 BufferedReader br = new BufferedReader(new FileReader(file));
    String line;
    while ((line = br.readLine()) != null) {
       // process the line.
    }
    br.close(); 
```

# c# - 如何处理数字文件c#

> ID：15818175
> 
> 赞同：1
> 
> 时间：2013-04-04T17:49:08.563
> 
> 标签：c#, arrays, file

我有文件包含像这样的数字 123.4 23.7 89.2 ... 45.8
...

8 列和 1024 行，我想逐行读取此文件并将每一行放入 double 数组中以从该行中获取最小数，并将此最小数放入大小为 1024 的数组中。

我在c#中尝试了这段代码......

```
 static void Main(string[] args)
    {
        string line;
        double[] row = new double[8];
        double[] minimum = new double[1024];
        // Read the file and display it line by line.
        System.IO.StreamReader file =
           new System.IO.StreamReader("c:\\test.txt");

        for (int k = 0; k < 1024; k++)
        {
            while ((line = file.ReadLine()) != null )
            {

                string[] numbers = new string[8];
                int numCount = 0;
                for (int i = 0; i < line.Length; i++)
                {
                    if (line[i] != ' ')
                    {
                        numbers[numCount] = "";
                        while (line[i] != ' ')
                        {
                            numbers[numCount] += line[i];
                            i++;

                        }
                        numCount++;

                    }
                }
                for (int i = 0; i < 8; i++)
                {
                    row[i] = Convert.ToDouble(numbers[i]);
                }

                double min = row[0];
                for (int j = 0; j < 8; j++)
                {
                    if (row[j] <= min)
                        min = row[j];

                }
                minimum[k] = min;

            }

        }
        Console.WriteLine("The array contain:");
        for (int i = 0; i < 1024; i++)
            Console.WriteLine(minimum[i]);

           file.Close();

        // Suspend the screen.
        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:59:03.343

有几种方法可以简化您的代码 - [File.ReadLines](http://msdn.microsoft.com/en-us/library/dd383503.aspx)、[String.Split](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)和 LINQ Select。生成的代码可能类似于：

```
var listOfArraysOfDouble = File.ReadLines(fileName)
    .Select(row => 
         row.Split((string[]) null, StringSplitOptions.RemoveEmptyEntries)
           .Select(columnValue => double.Parse(columnValue))
           .ToArray()
     ); 
```

# c# - 来自 Extended Wpf Toolkit 的 TimePicker 无法使用 tabIndex 正确地制表符

> ID：15818177
> 
> 赞同：1
> 
> 时间：2013-04-04T17:49:15.097
> 
> 标签：c#, wpf, xaml, wpftoolkit, timepicker

我使用来自最新扩展 Wpf Toolkit 构建的 TimePicker 控件。我在 XAML 中设置了一个 tabindex。我的问题是光标永远不会继续这个控制:(

**这是我的 xaml 片段：**

```
<Grid Margin="0,0,0,0" VerticalAlignment="Center" Height="28">
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="147*"/>
    <ColumnDefinition Width="162*"/>
    <ColumnDefinition Width="191*"/>
  </Grid.ColumnDefinitions>
  <Label Grid.Column="0" Content="Date" HorizontalAlignment="Left" Margin="0,1" VerticalAlignment="Center" Height="26" Width="35"/>
  <DatePicker x:Name="DateTimePicker_Date" TabIndex="3" Grid.Column="1" HorizontalAlignment="Left" VerticalAlignment="Center" Height="22" Padding="2,1" Margin="0,3" Width="149" />
  <xctk:TimePicker Grid.Column="2" x:Name="TimePicker_Heure" TabIndex="4" VerticalAlignment="Center" Height="20" Margin="102,4,10,4"/>
  <Label Grid.Column="2" Content="Heure" HorizontalAlignment="Left" Margin="43,1,0,1" VerticalAlignment="Center" Height="26" Width="44"/>
</Grid> 
```

请问你有什么想法吗？

非常感谢 ：）

此致，

尼克修斯

# highcharts - Highcharts：图表底部y轴的最小值

> ID：15818179
> 
> 赞同：12
> 
> 时间：2013-04-04T17:49:15.923
> 
> 标签：highcharts

我想要这张图表的帮助。如果系列值不是 0.0，则图表的最小值为 0，并且正确位于[图表底部](http://jsfiddle.net/andrea75/NF7sF/1/)：

但如果值都等于 0.0，则 y 轴线显示在[图表中间](http://jsfiddle.net/andrea75/NF7sF/)：

我尝试设置

```
 {min: 0,} 
```

在 y 轴上，但它不起作用。显然我无法设置最大值，因为我有一个动态数据。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-05T07:24:25.120

如果无法设置最大值，则可以设置 minRange

```
yAxis: [{ // Primary yAxis
            min: 0,
            minRange: 0.1, 
```

[http://jsfiddle.net/tZayD/](http://jsfiddle.net/tZayD/)

# javascript - Chrome 中的 RotateY 无法正常工作？

> ID：15818181
> 
> 赞同：0
> 
> 时间：2013-04-04T17:49:22.693
> 
> 标签：javascript, html, google-chrome, css, rotation

我正在为自己建立一个投资组合网页。我不是专业人士，我这样做是因为这对我来说很有趣。

这是我的页面：[http ://szifla.van.hu/keret.cgi?/23d/portfolio/index.html](http://szifla.van.hu/keret.cgi?/23d/portfolio/index.html)

如果您在 Firefox 中打开它，这些图片和文本框会根据我的需要使用 css3 3d 移动和旋转它们。但它在 Chrome 中不起作用，因为我添加了`-webkit-perspective`等。

问题可能出在我写的脚本中

```
.style.transform = "rotateY(" + amount + "deg)"; 
```

我认为这不起作用，但我不知道如何以另一种方式做到这一点：

```
.style.-webkit-transform = "rotateY(" + amount + "deg)"; 
```

在 IE 中都不起作用，但我不在乎。首先，我想让它在 FF、Chrome、Safari、Opera 中运行...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:58:29.140

如果您使用 jQuery 进行 CSS3 转换，我推荐[Transit](http://ricostacruz.com/jquery.transit/)，这样您就可以避免前缀地狱。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T17:57:12.543

我看到您的网站上已经有 jQuery。为什么不用它来旋转？

```
$('.d1').rotate(amount); 
```

# xpath - XPath 仅在直接子节点中选择一种类型的节点

> ID：15818191
> 
> 赞同：13
> 
> 时间：2013-04-04T17:49:53.557
> 
> 标签：xpath

也许有人可以帮助我找到解决问题的方法。我需要在下面的 xml 中执行一个 XPath 查询，它只提取作为直接子节点的“字段”节点。在下面的示例中，查询应提取字段 E1F1、E1F2 和 E1F3。到目前为止，我正在运行查询：`//Field`，但我得到了所有字段（包括我不想要的属于 E1_1 的字段）。

```
<Entity id="E1">
  <Field id="E1F1"></Field>
  <Field id="E1F2"></Field>
  <Field id="E1F3"></Field>
  <Entity id="E1_1">
    <Field id="E1_1F1"></Field>
    <Field id="E1_1F2"></Field>
    <Field id="E1_1F3"></Field>
  </Entity> 
```

谢谢！！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-04T17:54:14.283

使用绝对 XPath：

```
/Entity/Field 
```

`//`将匹配任何地方。如果您使用单个正斜杠，则匹配必须准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-30T03:46:13.660

在我的情况下，想要的节点远离根元素（/html），所以接受的答案不是我需要的，经过一些搜索工作，我找到了`child` [轴](https://www.w3schools.com/xml/xpath_axes.asp)而不是`descendant`，我希望这可以帮助正在使用的人`scrapy`从 html 获取一些信息。

# ember.js - Ember js如何使用BasicAdapter

> ID：15818193
> 
> 赞同：3
> 
> 时间：2013-04-04T17:49:57.983
> 
> 标签：ember.js

我正在寻找可以帮助我了解 ember 中的同步模型的指南。我尝试在最新版本上使用 RestAdapter，但出现错误。所以我决定在ember js网站上使用基于[稳定ember数据](http://emberjs.com/blog/2013/03/22/stabilizing-ember-data.html)的BasicAdapter 。

这是我的模型：

```
App.Accounts = DS.Model.extend({
 name:DS.attr('string')
,date:DS.attr('date')
}) 
```

这是我为模型声明同步函数的地方。

```
App.Accounts.sync = {
list: function() {
    $.ajax({
        type: 'POST',
        cache: false,
        url: contextPath + 'account/list',
        success: function(data) {
            this.load()
        },
        error: function(jqXHR, textStatus, errorThrown) {
        },
        async: false
    });
}
} 
```

我在设置控制器中调用列表函数：

```
App.TestRoute = Ember.Route.extend({
setupController:function(){
    App.Accounts.list()
}
}) 
```

该函数不执行。在 ember 应用程序中调用同步函数的正确方法是什么？另外，我可以使用有关此主题的博客/文章。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T19:05:04.767

您是否检查过[Ember 模型](https://github.com/ebryn/ember-model)，它为您提供了一个基本适配器，而无需使用 EmberData。

Erik 在 embercasts.com 上有一个教程，您可能需要注册成为 beta 用户。

```
var attr = Ember.attr;

App.User = Ember.Model.extend({
  id: attr(),
  name: attr()
});

App.User.url = "/users";
App.User.adapter = Ember.RESTAdapter.create();

var newUser = App.User.create({name: "Erik"});
newUser.save(); // POST to /users.json

var existingUser = App.User.find(1); // GET /users/1.json
existingUser.set('name', 'Kris');
existingUser.get('isDirty'); // => true
existingUser.save(); // PUT /users/1.json 
```

干杯

# java - 如何在 ArrayList 中搜索包含多个单词的字符串？

> ID：15818196
> 
> 赞同：0
> 
> 时间：2013-04-04T17:50:01.403
> 
> 标签：java, arraylist

我的搜索方法适用于一个单词字符串，但不适用于两个或更多单词。

我应该检查 titleToFind 是否与

```
ArrayList<DVD>DVDlist 
```

我的搜索方法：

```
public DVD search(String titleToFind) {
    for (DVD dvdEntry : DVDlist) {
        if (dvdEntry.GetTitle().equalsIgnoreCase(titleToFind)) {
            return dvdEntry;
        }
    }
    return null;
} 
```

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:53:03.400

您的主要问题是您在第一次匹配时停止搜索（循环中的 return 语句）。下面是一个返回包含所有匹配项的列表的示例。

如果不允许使用列表，则可以返回 int（匹配数）或 csv 匹配。

```
public List<DVD> search(String titleToFind) {
    List<DVD> matches = new ArrayList<DVD>();    
    for (DVD dvdEntry : DVDlist) {
        if (dvdEntry.GetTitle().equalsIgnoreCase(titleToFind)) {
            matches.add(dvdEntry);
        }
    }

    return matches;
} 
```

# octopus-deploy - OctoPackPackageVersion 变量未在同一解决方案中的多个项目中的单个项目中的 TeamCity 中选取

> ID：15818197
> 
> 赞同：1
> 
> 时间：2013-04-04T17:50:03.487
> 
> 标签：octopus-deploy

（Windows 2008 R2 上的 TeamCity 版本 7.1.3，对控制台应用程序使用 Octopack NuGet 包 2.0.20。）

这里有一些奇怪的问题：与其重复整个线程，我希望我能让一些接受者阅读我的链接帖子（简短），并可能提供一些见解。

基本问题在这篇文章的标题中说明。

[http://help.octopusdeploy.com/discussions/problems/6435-octopackpackageversion-variable-not-usedpicked-up-in-teamcity](http://help.octopusdeploy.com/discussions/problems/6435-octopackpackageversion-variable-not-usedpicked-up-in-teamcity)

我一直在尝试确定为什么在同一解决方案中的一个特定项目中为什么没有通过 Octopack 将 OctoPackPackageVersion 变量传递给 nuget，而解决方案中的所有其他项目的行为都应该从 TeamCity 获取正确的版本系统变量定义为：

![系统属性](https://i.stack.imgur.com/NiLAa.png)

![在此处输入图像描述](https://i.stack.imgur.com/tvugV.png)

```
...nuget\NuGet.exe" pack "bin\Release\NuGet-temp\CaptiveAire.Core.SocketServers.ServiceHost.nuspec" -OutputDirectory "bin\Release" -basePath "bin\Release\NuGet-temp" -Version "1.0.0.0" -NoPackageAnalysis 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:19:21.090

好的，这归结为拥有混合版本的 OctoPack 支持文件：msbuild 的目标和更新的 C# 目标 DLL。

请参阅原始问题中的链接支持页面。

希望这可能对其他人有所帮助。

# php - 安卓 + php + mysql

> ID：15818198
> 
> 赞同：1
> 
> 时间：2013-04-04T17:50:05.087
> 
> 标签：php, android, mysql, error-handling

我正在为登录过程创建一个简单的测试应用程序，但是当我在模拟器中使用浏览器并尝试使用它的 url 时我得到的错误给我 **的网页不可用** 我使用了 localhost 127.0.0.2 但它给了我相同的味精，我使用了我的电脑的 IP 相同的味精任何人都可以帮助我吗？？

# 爪哇代码

```
package com.sencide;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HTTP;
import org.apache.http.util.EntityUtils;

import android.os.Bundle;
import android.os.StrictMode;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AndroidLogin extends Activity implements OnClickListener {

     Button ok,back,exit;
     TextView result;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

     // Login button clicked
        ok = (Button)findViewById(R.id.btn_login);
        ok.setOnClickListener(this);

        result = (TextView)findViewById(R.id.lbl_result);

    }

    public void postLoginData() {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
         Log.e("Responce-->","after httpclient");
        /* login.php returns true if username and password is equal to saranga */
        HttpPost httppost = new HttpPost("http://192.168.1.70/login.php");
        Log.e("Responce-->","after httppost");
        try {
            // Add user name and password
         EditText uname = (EditText)findViewById(R.id.txt_username);
         String username = uname.getText().toString();

         EditText pword = (EditText)findViewById(R.id.txt_password);
         String password = pword.getText().toString();

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("username", username));
            nameValuePairs.add(new BasicNameValuePair("password", password));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            Log.e("Responce-->","after using the list name pair");

            // Execute HTTP Post Request
            Log.w("SENCIDE", "Execute HTTP Post Request");
            HttpResponse response = httpclient.execute(httppost);
            Log.e("Responce-->","after execute the http response");
          //  String str = inputStreamToString(response.getEntity().getContent()).toString();
            String str = EntityUtils.toString(response.getEntity(), HTTP.UTF_8);
            //Log.w("SENCIDE", str);

            Log.e("Responce-->",""+str);

            if(str.toString().equalsIgnoreCase("true"))
            {
             Log.w("SENCIDE", "TRUE");
             result.setText("Login successful");  
            }else
            {
             Log.w("SENCIDE", "FALSE");
             result.setText(str);            
            }

        } catch (ClientProtocolException e) {
         e.printStackTrace();
        } catch (IOException e) {
         e.printStackTrace();
        }
    } 

    private StringBuilder inputStreamToString(InputStream is) {
        String line = "";
        StringBuilder total = new StringBuilder();
        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        // Read response until the end
        try {
         while ((line = rd.readLine()) != null) {
           total.append(line);
         }
        } catch (IOException e) {
         e.printStackTrace();
        }
        // Return full string
        return total;
       }

        /* login.php returns true if username and password is equal to saranga */

    @Override
    public void onClick(View view) {
        // TODO Auto-generated method stub
        if(view == ok){
             Thread t = new Thread(){
                    public void run(){
                        postLoginData();
                    }
                };
                t.start();

          }
    }

} 
```

# php代码

```
<?php
$host="localhost"; // Host name
$username="root"; // Mysql username
$password="root"; // Mysql password
$db_name="testlogin"; // Database name
$tbl_name="members"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form
$myusername=$_POST['username'];
$mypassword=$_POST['password'];

// To protect MySQL injection
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){
echo "true";
}
else {
echo "Login Failed";
}
?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T18:05:46.993

尝试使用 curl（如果您使用的是 unix 操作系统）通过来自您的 php 服务器的请求来访问 php，或者制作一个简单的网页来使用。确保它给你一个有效的 (200) 响应。

```
<html>
  <head>
  </head>
  <body>
    <form action="http://localhost/{{ your-php-script }}" method="POST">
      <input type="text" name="username">
      <input type="text" name="password">
      <input type="submit" value="submit">
    </form>
  </body>
</html> 
```

此外，[主机 pc 应该是 10.0.2.2](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)，而不是 127.0.0.2 （或 127.0.0.1）

# java - 如何在 JTabbedPane JComponent 面板中创建新行？

> ID：15818201
> 
> 赞同：1
> 
> 时间：2013-04-04T17:50:14.150
> 
> 标签：java, string, swing, user-interface, jtabbedpane

我正在创建一个涉及来宾和选项卡式窗格的简短程序。我想对 JTabbedPane 进行编程，因此当我单击某个选项卡时，将使用 JComponent makeTextPanel 函数显示来宾的信息。但是，它在运行时似乎忽略了 '\n' （新行）。有没有什么办法解决这一问题？

这是我的图形用户界面：

```
JTabbedPane overview= new JTabbedPane();
        JComponent accountinfo= makeTextPanel (guest.toString());
        overview.addTab ("Account Overview", accountinfo);
        overview.setMnemonicAt(0, KeyEvent.VK_1);

JFrame tabbed= new JFrame("AIR Reservation");  
        tabbed.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        tabbed.add(overview);
        tabbed.setSize(500,300);
        tabbed.setLocationRelativeTo(null);
        tabbed.setVisible(true); 
```

这是我的 Customer 类的 toString 方法：

```
public String toString()
{ 
    customerstring= "Name: " + getName();
    customerstring+= "\nGender: " + getGender();
    customerstring+= "\nDate of Birth: " + getBirthDate();
    customerstring+= "\nPassport number: " +  getPassportNumber();
    customerstring+= "\nBalance: " + getMoney();
    return customerstring;

} 
```

谢谢您的帮助！编辑：这是 makeTextPanel 方法：

```
protected JComponent makeTextPanel(String text) 
{
    JPanel panel = new JPanel(false);
    JLabel filler = new JLabel(text);
    filler.setHorizontalAlignment(JLabel.CENTER);
    panel.setLayout(new GridLayout(1, 1));
    panel.add(filler);
    return panel;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:56:54.560

您的面板包含一个文本，其中包含您作为参数`JLabel`传入的文本。`makeTextPanel`如果文本是 html 格式，则A`JLabel`可以有多行。

所以你的文本应该封装在里面`<html></html>`，行分隔符应该是`<br>`.

其他选择是使用 a`JTextArea`或 a`JEditorPane`而不是`JLabel`. 如果需要，您可以将它们设置为不可编辑。

# java - arrays.toString() 自定义格式

> ID：15818208
> 
> 赞同：2
> 
> 时间：2013-04-04T17:50:41.720
> 
> 标签：java, arrays, tostring

如何更改输出

```
[ua, disclaimer, ok, ua, navigation, fault, ua, fault, previous, ua, fault, previous] 
```

对此

```
ua, disclaimer, ok ---> ua, navigation, fault ---> ua, fault, previous ---> ua, fault, previous 
```

通过改变这个打印语句

```
System.out.println(Arrays.toString(arr)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:05:01.663

通过编写自己的打印方法。像这样的东西：

```
 public static String fancyPrint(Object... array) {
        StringBuilder output = new StringBuilder();
        int total = 0;
        for (Object o : array) {
            output.append(o.toString());
            total+=1;
            if (total%3==0) {
                output.append(" ---> ");
            } else {
                output.append(", ");
            }
        }
        //remove last ", " or " ---> " printed
        if (total%3==0) {
            output.delete(output.length()-" ---> ".length(), output.length());
        } else {
            output.delete(output.length()-", ".length(), output.length());
        }
        return output.toString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:56:53.847

您可以先按元素数量修剪数组，然后再将其转换为字符串。所以你会在数组片段上运行 toString() 。现在使用这些较小的字符串并按需要的顺序打印它们。如果你想修剪，你必须形成新的子数组，这会浪费内存，你也可以一次打印出一个成员的数组。

# java - 单击时按钮不起作用，代码正确

> ID：15818210
> 
> 赞同：0
> 
> 时间：2013-04-04T17:50:48.110
> 
> 标签：java, android, eclipse, button

我尝试了 HelloWorld 和倒数计时器之类的测试文件。我的应用程序上的两个按钮似乎都不起作用。这些代码段是我从互联网上下载的，据报道它们可以工作。我不知道可能是什么问题。我也是非常新的 eclipse 和 android 应用程序编程。

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:textColor="#FF0000"
    android:background="#000000"
    android:layout_height="fill_parent"

    >
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#FF0000"
    android:text="CountDown Timer Demo"
    />
<Button
    android:text="Seizure Detected"
    android:id="@+id/start"
    android:textColor="#FF0000"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
</Button>
<Button
    android:text="Override"
    android:id="@+id/stop"
    android:textColor="#FF0000"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
</Button>

<Button
    android:text="click me"
    android:id="@+id/Button01"
    android:textColor="#FF0000"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
</Button>
<TextView
    android:id="@+id/tv"
    android:textColor="#FF0000"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="sexy"/>

</LinearLayout> 
```

CountDownTest.java >在src文件夹中

```
package com.example.epilepsytestapp;

import android.app.Activity;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class CountDownTest extends Activity {
    Button start, stop;
    TextView tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        start = (Button)this.findViewById(R.id.start);
        stop = (Button)this.findViewById(R.id.stop);
        tv  = (TextView)this.findViewById(R.id.tv);
        tv.setText("10"); // startting from 10.

        final MyCounter timer = new MyCounter(10000,1000);
        start.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                timer.start();
            }
        });
        stop.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                timer.cancel();
            }
        });
    }

    public class MyCounter extends CountDownTimer{

        public MyCounter(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {
            System.out.println("Timer Completed.");
            tv.setText("Timer Completed.");
        }

        @Override
        public void onTick(long millisUntilFinished) {
            tv.setText((millisUntilFinished/1000)+"");
            System.out.println("Timer  : " + (millisUntilFinished/1000));
        }
    }
} 
```

这是Helloworld.java

```
package com.example.epilepsytestapp;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class HelloWorld extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button button = (Button) this.findViewById(R.id.Button01);
        button.setOnClickListener(new OnClickListener() {
           //@Override
           public void onClick(View v) {
            Toast.makeText(HelloWorld.this, "Hello World", Toast.LENGTH_SHORT).show();
           }
         });        
    }
} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.epilepsytestapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity android:name=".CountDownTest"/>
        <activity
            android:name="com.example.epilepsytestapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" 
                    android:name=".CountDownTest"/>

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:36:32.507

试试这个。你的 hello world 代码

```
package com.example.epilepsytestapp;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button button = (Button) findViewById(R.id.Button01);
        button.setOnClickListener(new OnClickListener() {
           @Override
           public void onClick(View v) {
            Toast.makeText(this, "Hello World", Toast.LENGTH_SHORT).show();
           }
         });        
    }
} 
```

# ruby - rails 方法链接上下文

> ID：15818211
> 
> 赞同：0
> 
> 时间：2013-04-04T17:50:48.047
> 
> 标签：ruby, ruby-on-rails-3, eventmachine, chaining

我有可能是一个基本的 Q，但它在设置中看起来很复杂。我有一个包含一些类的模块。一个类包含 API 调用的方法。其他类描述服务器。例如 Dev 有它的属性。服务器类继承包含所有 API 调用的类。我使用服务器类的一个实例来使用这些方法之一，然后对其应用 EventMachine 方法。这是服务器类的子集：

```
 class PulseDev < ApiMethods
   def base_uri
    "http://myserver.com/api"
   end
 end 
```

以及方法类中的一个动作：

```
 Class ApiMethods
   def get_json_api_post_response(url, post_obj={})
     http = EM::Synchrony.sync EventMachine::HttpRequest.new(self.base_uri+"#{url}").post(:body => post_obj)
     process_response self.class.post(url, :body => post_obj).body
   end

       def process_response(result)
         response = ActiveSupport::JSON.decode(result)
           if response["code"].to_i == 200
             ToolResult.new(true, response["result"], 200)
           else
             ToolResult.new(false, response["result"], response["code"])
           end
         end
        end

 Class ToolResult < Struct.new(:success, :result, :code)
 end 
```

我在控制器中调用它：

```
 http = ApiMethods::Dev.new.get_json_api_post_response('/handshake', @j) 
```

好的，我的错误是**ApiMethods::PulseDev:Class 的未定义方法“post”** ，它指向我的 get_json_api_post_response 方法中的帖子。

我的问题是：我知道它在 ApiMethods::Dev 的上下文中，这就是 self.base_uri 工作的原因，但我应该如何处理该 process_response 方法中的帖子，以便它与 EventMachine 相关联？有没有关于我没有看到的方法链接的东西？在错误输出中，我可以验证 http 正在显示 EventMachine 对象，因此新方法似乎正在工作。谢谢你的时间，山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:28:46.993

答案是更仔细地查看错误消息。process_response 方法是实际调用 EventMachine 方法并处理其 :body 的方法。所以它是用一个不需要的调用编写的。

# d3.js - D3焦点/上下文图：刷平移同步

> ID：15818217
> 
> 赞同：3
> 
> 时间：2013-04-04T17:51:14.677
> 
> 标签：d3.js, pan, brush

我有一个 d3 焦点/上下文图表，我希望能够在刷过上下文后平移焦点部分，并且我希望上下文区域的刷过部分与焦点区域的平移同步移动。但是，当我在上下文图表中选择一个区域后单击焦点部分时，焦点比例会发生变化，并且点不再显示在正确的坐标处。以下代码在[jsfiddle](http://jsfiddle.net/sNPKX/2)上也可用：

```
<html>
   <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <title> - jsFiddle demo</title>
      <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
      <link rel="stylesheet" type="text/css" href="/css/result-light.css">
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <style type="text/css">
         circle {
         -webkit-transition: fill-opacity 250ms linear;
         }
         .selecting circle {
         fill-opacity: .5;
         }
         .selecting circle.selected {
         stroke: #f00;
         }
         .brush .extent {
         stroke: #B8C6D0;
         fill-opacity: .125;
         shape-rendering: crispEdges;
         }
         #context .axis path.domain {
         stroke: lightsteelblue;
         stroke-width: 5px;
         }
         #context .tick {
         stroke:black;
         stroke-width: 1px;
         }
         #context .x .tick {
         stroke:black;
         stroke-width: 2px;
         }
         .axis path, .axis line {
         fill: none;
         stroke: #ddd;
         stroke-width: 1px;
         shape-rendering: crispEdges;
         }
         .axis path {
         stroke: #999;
         stroke-width: 2px;
         }
      </style>
      <script type="text/javascript">//<![CDATA[ 
    var data = [{
        Id: "1",
        Year: 1950,
        Relevance: 55,
        Category: "Cat1",
        SpecFreq: 5,
        GenFreq: 10
    }, {
        Id: "2",
        Year: 1975,
        Relevance: 25,
        Category: "Cat1",
        SpecFreq: 2,
        GenFreq: 31
    }, {
        Id: "3",
        Year: 1990,
        Relevance: 75,
        Category: "Cat1",
        SpecFreq: 8,
        GenFreq: 23
    }, {
        Id: "4",
        Year: 1970,
        Relevance: 45,
        Category: "Cat1",
        SpecFreq: 17,
        GenFreq: 60
    }, {
        Id: "5",
        Year: 1985,
        Relevance: 90,
        Category: "Cat1",
        SpecFreq: 17,
        GenFreq: 25
    }];

    $(function () {
        //dimensions
        var margin = {
            top: 5.5,
            right: 19.5,
            bottom: 39.5,
            left: 39.5
        };

        //data domain extents
        var extentX = d3.extent(data, function (d) {
            return d.Year;
        });
        var extentY = d3.extent(data, function (d) {
            return d.Relevance;
        });

        var focusAxisOptions = {
            x: {
                ticks: {
                    format: d3.format("d"),
                    size: -1* (500 - margin.top - margin.bottom),
                    ticks: 10
                },
                showLabel: true
            },
            y: {
                ticks: {
                    format: d3.format(""),
                    size: -1 * (800 - margin.left - margin.right),
                    ticks: 10
                },
                showLabel: true
            }
        };

        var contextAxisOptions = {
            x: {
                ticks: {
                    format: d3.format("d"),
                    size: -1 * (100 - margin.top - margin.bottom),
                    ticks: 10
                },
                showLabel: true
            },
            y: {
                ticks: {
                    format: "",
                    size: 0,
                    ticks: 0
                },
                showLabel: false
            }
        };

        var focus = DrawChart(data, margin, 800 - margin.left - margin.right, 500 - margin.top - margin.bottom, extentX, extentY, focusAxisOptions);
        var context = DrawChart(data, margin, 800 - margin.left - margin.right, 100 - margin.top - margin.bottom, extentX, extentY, contextAxisOptions);

        MakeContextBrushable(context, focus);

        MakeFocusZoomable(focus);
    });

    function DrawChart(data, margin, width, height, extentX, extentY, axisOptions) {

        //pad extents to provide some extra "blank" areas around edge of graph
        var paddedExtentX = [extentX[0] - 5, extentX[1] +5];
        var paddedExtentY = [extentY[0] - 5, extentY[1] +5];

        //scales
        var x = d3.scale.linear().domain(paddedExtentX).range([0, width]);
        var y = d3.scale.linear().domain(paddedExtentY).range([height, 0]);
        var radiusMax = .025 * width;
        var radius = d3.scale.sqrt().domain([0, 100]).range([0, radiusMax]);
        var color = d3.scale.ordinal().domain(["Cat1", "Cat2", "Cat3"]).range(["#b7b8a0", "#898a72", "#878772"]);

        //axes
        var xAxis = d3.svg.axis().scale(x).orient("bottom").tickFormat(axisOptions.x.ticks.format).tickSize(axisOptions.x.ticks.size).ticks(axisOptions.x.ticks.ticks);
        var yAxis = d3.svg.axis().scale(y).orient("left").tickFormat(axisOptions.y.ticks.format).tickSize(axisOptions.y.ticks.size).ticks(axisOptions.y.ticks.ticks);

        //create and size svg element
        var svg = d3.select("#chart").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .style("float", "left")
            .style("clear", "left");

        var g = svg
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")"); ;

        // Add the x-axis.
        g.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis)
            .selectAll("text")
            .style("font-size", "10px")
            .attr("dy", "1.5em");

        // Add the y-axis.
        g.append("g")
            .attr("class", "y axis")
            .call(yAxis)
            .selectAll("text")
            .style("font-size", "10px")
            .attr("dx", "-1em");

        // Add the x-axis label.
        if (axisOptions.x.showLabel) {
            g.append("text")
            .attr("class", "x label")
            .attr("text-anchor", "end")
            .attr("x", width / 2)
            .attr("y", height + 35)
            .text(" Year");
        }

        // Add the y-axis label.
        if (axisOptions.y.showLabel) {
            g.append("text")
            .attr("class", "y label")
            .attr("text-anchor", "end")
            .attr("x", -1 * height / 2)
            .attr("y", -40)
            .attr("dy", ".75em")
            .attr("transform", "rotate(-90)")
            .text("Relevance");
        }

        //plot genFreq
        var gGenerally = g.append("g").selectAll("circle")
            .data(data)
            .enter().append("circle")
            .style("fill", function (d) {
                return color(d.Category);
            })
            .attr("cx", function (d) {
                return x(d.Year);
            })
            .attr("cy", function (d) {
                return y(d.Relevance);
            })
            .attr("r", function (d) {
                return radius(d.GenFreq);
            })
            .append("title")
            .text(function (d) {
                return "(" + d.Year + ", " + d.Relevance + ", " + d.GenFreq + ", " + d.SpecFreq + ")";
            });

        //plot specFreq
        var gWithin = g.append("g").selectAll("circle")
            .data(data)
            .enter().append("circle")
            .style("fill", function (d) {
                return "#d6d487";
            })
            .attr("cx", function (d) {
                return x(d.Year);
            })
            .attr("cy", function (d) {
                return y(d.Relevance);
            })
            .attr("r", function (d) {
                return radius(d.SpecFreq);
            })
            .append("title")
            .text(function (d) {
                return "(" + d.Year + ", " + d.Relevance + ", " + d.GenFreq + ", " + d.SpecFreq + ")";
            });

        var chart = {
            svg: svg,
            g: g,
            x: x,
            y: y,
            xAxis: xAxis,
            yAxis: yAxis
        }
        return chart;
    }

    function MakeContextBrushable(context, focus) {
        var brush = d3.svg.brush().x(context.x).y(context.y)
        .on("brushstart", brushstart)
        .on("brush", brushmove)
        .on("brushend", brushend);

        context.g.append("g")
        .attr("class", "brush")
        .call(brush);

        function brushstart() {
            context.svg.classed("selecting", true);
        }

        function brushmove() {
            var e = d3.event.target.extent();
            var circle = context.svg.selectAll("circle");
            circle.classed("selected", function (d) {
                return e[0][0] <= d["DecisionYear"] && d["DecisionYear"] <= e[1][0]
            && e[0][1] <= d["Relevance"] && d["Relevance"] <= e[1][1];
            });
        }

        function brushend() {
            context.svg.classed("selecting", !d3.event.target.empty());
            if (!d3.event.target.empty()) {
                var e = d3.event.target.extent();
                focus.x.domain([e[0][0], e[1][0]]);
                focus.y.domain([e[0][1], e[1][1]]);

                focus.g.select(".x.axis").call(focus.xAxis)
                    .selectAll("text")
                    .style("font-size", "10px")
                    .attr("dx", "-1em");
                focus.g.select(".y.axis").call(focus.yAxis)
                    .selectAll("text")
                    .style("font-size", "10px")
                    .attr("dx", "-1em");
                var circle = focus.svg.selectAll("circle").attr("cx", function (d) { return focus.x(d.Year); })
                .attr("cy", function (d) { return focus.y(d.Relevance); })
                console.log("BrushEnd Domain: [" + focus.x.domain()[0] + ", " + focus.x.domain()[1] + "]");
            }
            else {
                focus.x.domain(context.x.domain());
                focus.y.domain(context.y.domain());
                focus.g.select(".x.axis").call(focus.xAxis)
                    .selectAll("text")
                    .style("font-size", "10px")
                    .attr("dx", "-1em");
                focus.g.select(".y.axis").call(focus.yAxis)
                    .selectAll("text")
                    .style("font-size", "10px")
                    .attr("dx", "-1em");
                var circle = focus.g.selectAll("circle").attr("cx", function (d) { return focus.x(d.Year); })
                .attr("cy", function (d) { return focus.y(d.Relevance); })
            }
        }
    }

    function MakeFocusZoomable(focus) {
        focus.svg.call(d3.behavior.zoom().x(focus.x).y(focus.y).on("zoom", Zoom));

        function Zoom() {
            focus.svg.select(".x.axis").call(focus.xAxis).selectAll("text")
                        .style("font-size", "10px")
                        .attr("dy", "1.5em");

            focus.svg.select(".y.axis").call(focus.yAxis).selectAll("text")
                        .style("font-size", "10px")
                        .attr("dx", "-1em");

            focus.svg.selectAll("circle").attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")");
        }
    }
      </script>
   </head>
   <body>
      <div id="chart">
      </div>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-04T20:34:29.640

要在平移后重置刷牙，您需要重新设置并再次调用 Brush.extent：

```
//Find extent of zoomed area, for example the edges of graphed region
var brushExtent = [x.invert(0), x.invert(width)];
context.select(".brush").call(brush.extent(brushExtent)); 
```

这是折线图上焦点/上下文刷平移同步的示例：http: [//jsfiddle.net/MtXvx/8/](http://jsfiddle.net/MtXvx/8/)

希望有帮助！

# maven - 从 Maven 检索番石榴库失败

> ID：15818219
> 
> 赞同：0
> 
> 时间：2013-04-04T17:51:29.113
> 
> 标签：maven, clojure, guava, mahout, leiningen

我正在使用 leiningin 创建和编译 Mahout in Action 在推荐系统上的第一个示例。我正在尝试构建依赖项，但 Guava 失败了。我怎样才能解决这个问题？

```
$ lein deps
Retrieving com/google/guava/guava/r03/guava-r03.pom from central
Retrieving com/google/guava/guava/r03/guava-r03.pom from central
Could not transfer artifact com.google.guava:guava:pom:r03 from/to central (http://repo1.maven.org/maven2/):      
Checksum validation failed, expected 1cbd6fab2460050ff7147b6d8536f39c8f535067 but is    
7a37041386ee39a1fbb3efd3c4c6932809cb5887
This could be due to a typo in :dependencies or network issues. 
```

我的 project.clj 文件：

```
(defproject recommend "0.1.0-SNAPSHOT"
  :description "Recommendation examples from Mahout in Action"
  :dependencies [
    [org.clojure/clojure "1.5.1"]
    [org.apache.mahout/mahout-core "0.5"]
    [org.apache.mahout/mahout-math "0.5"]
    [org.apache.mahout/mahout-utils "0.5"]]
  :main recommend.core) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T21:17:40.413

这看起来像是下载失败或数据错误时会出现的错误。在登录本地网络网络捕获登录页面之前，我在一家咖啡店运行 lein deps 时发生过这种情况。

如果问题仍然存在，请先尝试运行

```
lein clean && lein deps 
```

然后，如果您仍然遇到问题，请尝试将您的本地 maven 存储库 (~/.m2/repository/) 移开，然后重试。

# java - 将矢量图像添加到 Google Maps Android API v2

> ID：15818221
> 
> 赞同：0
> 
> 时间：2013-04-04T17:51:32.363
> 
> 标签：java, android, image, google-maps, vector

**如何根据多个 LatLng 值精确地将图像添加到我的 Google 地图？**

这是我的代码：

```
private GoogleMap googleMap;

...

googleMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.MainActivity)).getMap();

... 
```

例如，我有一个停车场的蓝图图像。我想将此图像添加到我的 Google 地图中。研究似乎建议将图像转换为矢量图形；但是下一部分是我感到困惑的地方。

然而，目的与导航有关，因此图像放置必须准确。停车场是长方形的，因此有四个角落。每个角落都收集了各自的坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:06:10.727

尝试使用[GroundOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/GroundOverlay)。

V2 API 不允许您向地图添加矢量图形（目前）。

# c# - ASP.NET C#：找不到 JavascriptSerializer

> ID：15818225
> 
> 赞同：7
> 
> 时间：2013-04-04T17:51:51.113
> 
> 标签：c#, asp.net, javascriptserializer

我正在尝试将 ASP.NET v4.0 中的 JavascriptSerializer 对象与 C# 一起使用。我没有使用 Visual Studio——这是在一个实时的 IIS7 服务器上。我可以在同一个 Web 服务器上使用 VB 很好地访问这个对象，所以我知道必要的 DLL 存在并正确配置。

但是当我尝试在 C# 中使用这个对象时，我得到了这个错误：`The type or namespace name 'JavascriptSerializer' could not be found`

在我的类文件中，我有这个：

```
using System.Web;
using System.Web.Script;
using System.Web.Script.Serialization; 
```

在 web.config 中，我有这个：

```
<assemblies>
    <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
</assemblies> 
```

在我的 default.aspx.cs 文件中，我有这个：

```
JavaScriptSerializer obj_serializer = new JavascriptSerializer(); 
```

正是这最后一行代码导致了上述错误。

帮助？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T17:56:17.583

您需要在应用程序中添加对[System.Web.Extensions.dll的引用。](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)System.Web.Extensions 是包含 JavaScriptSerializer 类的命名空间。然后添加一个 using 指令来使用命名空间 System.Web.Extensions，如下所示：

```
using System.Web.Extensions; 
```

你也可以像这样声明你的 JavaScriptSerializer：

```
var serializer = new System.Web.Extensions.JavaScriptSerializer(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-19T08:21:07.013

解决问题 -> 参考 Step->BY->Step

1.-> 转到`Reference`您的项目文件。

2.->右键单击然后转到`Add Reference`

3.->转到`Framework`

4.-> 然后参考--->`System.Web.Extensions`

5.-> 问题已解决。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T17:58:25.880

我不知道您是否只是错误地键入了该行，但它是 JavaScriptSerializer，而不是 JavascriptSerializer（脚本中的大写字母 S）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-13T16:43:51.733

相反，您可能需要：

```
using System.Web.Script.Serialization; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T17:53:41.367

> 所以我知道必要的 DLL 存在并正确配置。

它们可能被 bin 部署到该项目。您是否尝试在 VS 中的引用属性中将 CopyLocal 设置为 true 并重新部署？

# ruby-on-rails - 生成 CSV 创建问题，因为我在数据中有引号或逗号

> ID：15818227
> 
> 赞同：1
> 
> 时间：2013-04-04T17:51:51.677
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, csv

在我的 result.csv.erb 中，我在创建 csv 时遇到了问题，因为在结果的某些列中，我得到了数据溢出。

我有一个名为 title 的列，其格式可以是`Son's of fortune`, 或`Love,Fear,Hatred`. 在第一种情况下，由于某种原因，我的结果中得到了 " 。另一方面，数据被 分割，默认 :col_sep 是 ,。

```
<%- @results.each do |result| -%>
    <%- row = result.values -%>
    <%= CSV.generate_line row, :row_sep => nil, :quote_char => "'" %>
<%end%> 
```

例如-：标题是`Gas Shoe (Grey, Chestnut)`，结果溢出到其他列

```
title - &quot;Gas Shoe (Grey
seller -  Chestnut)&quot; 
```

如果绝对必要，我愿意在插入之前编辑数据。那么有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T18:31:06.113

默认情况下，rails3 中的所有字符串都是不安全的，因此您需要在行上调用#html_safe。从[这个答案](https://stackoverflow.com/questions/7358509/rails3-csv-putting-quotquot-instead-of-actual-quotes)：

```
<%=
response.content_type = 'application/octet-stream'
CSV.generate do |csv|
  @persons.each do |person|
    csv << [ person[:name], person[:nickname] ]
  end
end .html_safe
%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T19:25:36.813

我会遵循[https://en.wikipedia.org/wiki/Comma-separated_values](https://en.wikipedia.org/wiki/Comma-separated_values)上的建议。没有标准的 CSV 格式，但“走向标准化”部分提供了一些很好的建议。适用于您的部分是：

*   应引用包含换行符、双引号和/或逗号的字段。（如果不是，则文件可能无法正确处理）。

*   字段中的（双）引号字符必须由两个（双）引号字符表示。

因此，如果该字段有逗号，请用双引号括起来。如果该字段有双引号，请将其替换为两个双引号。带单引号的字段应该用双引号括起来，否则不需要修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:58:33.980

您可以使用从结果中删除它`YOUR_STRING.gsub("&quot","")`

# callback - 带有 IVR 调查的星号回调

> ID：15818237
> 
> 赞同：0
> 
> 时间：2013-04-04T17:52:20.617
> 
> 标签：callback, asterisk, survey, ivr

我现在对所有这些 Asterisk-thingy 都很满意，我想知道，有没有办法在用户结束（挂断）电话后从星号回电并给他一个 IVR 调查，然后将结果保存在某处（以音频的形式记录或 DTMF 输入） ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:15:28.057

当然有很多方法可以做到这一点。但所有这些都需要了解星号的工作原理。

1.  挂断事件可以通过类似这样的“h”扩展来检测

    > exten => h,1,System(/etc/asterisk/create_callback.sh)

2.  之后，您为回调创建脚本，请参阅

    [http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out](http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out)

3.  您需要在您的拨号计划中创建 IVR [http://www.voip-info.org/wiki/view/Asterisk+Dialplan+Introduction](http://www.voip-info.org/wiki/view/Asterisk+Dialplan+Introduction)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T00:08:08.213

如果您有编程经验，您可以使用 AMI（Asterisk Manager Interface）根据任何逻辑生成从 Asterisk 到您的客户的调用。一旦客户接听电话，您所要做的就是将其重定向到您的 IVR 上下文。

对于 IVR（调查）部分，您可能需要使用 AGI（Asterisk 网关接口）。您几乎可以使用任何编程语言访问这两个 API。看看以下内容：

*   [粘连](http://adhearsion.com/)（红宝石）
*   [Asterisk-Java](https://blogs.reucon.com/asterisk-java/)或[Astive Toolkit](http://astivetoolkit.org) (Java)
*   [PHPAGI](http://phpagi.sourceforge.net/) (PHP)

祝你好运。

# forum - 重播时获取论坛电子邮件通知

> ID：15818239
> 
> 赞同：0
> 
> 时间：2013-04-04T17:52:23.833
> 
> 标签：forum

我正在关注几个难以跟踪回复的论坛，我正在寻找一种在发布重播时向我发送电子邮件通知的方法，最好是如果我可以为特定用户的重播指定警报，

谢谢大家，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:25:12.353

*   大多数论坛软件都允许您订阅主题。（即使是您未在其中发布的主题。）

*   您可以查看检测网页更改的网络服务。 [http://www.changedetection.com/](http://www.changedetection.com/)是我通过 Google 找到的一个示例，但我不确定它是否适合您的情况，或者它是否适用于论坛页面，因为同一线程可能会更改数百次。

*   除了这些选项之外，自定义屏幕抓取工具/爬虫也可以工作，但这似乎需要做很多工作。

# jquery - 尝试根据选择的单选按钮显示一种形状

> ID：15818240
> 
> 赞同：0
> 
> 时间：2013-04-04T17:52:24.113
> 
> 标签：jquery, raphael

我正在使用 raphael.js 根据选择的单选按钮绘制形状，但我只想一次显示一个形状。当我单击单选按钮时，我会一次获得所有形状，当我单击另一个单选按钮时，形状会重新绘制。非常感谢任何帮助。

HTML：

```
 <input name="shapes" id="square" type="radio">
    <label for="square">Square</label>
    <input name="shapes" id="rectangle" type="radio">
    <label for="rectangle">Rectangle</label>
    <input name="shapes" id="circle" type="radio">
    <label for="circle">Circle</label> 
```

拉斐尔/jQuery

```
 $(':radio[name="shapes"]').on('click', function(){
       var shapeName = $(this).attr('id');

       var square = p.rect(10,10,40,40);
       var rectangle = p.rect(20,20,50,80);
       var circle = p.circle(40,40,10);

       console.log(shapeName);
       return shapeName;

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:04:09.577

```
$(':radio[name="shapes"]').on('click', function(){
   var shapeName = $(this).attr('id');
   if(shapeName == "square")
       p.rect(10,10,40,40);
   else if(shapeName == "rectangle")
       p.rect(20,20,50,80);
   else if(shapeName == "circle")
       p.circle(40,40,10);

   console.log(shapeName);
   return shapeName;

}); 
```

# c++ - QT 项目文件 - 字段含义

> ID：15818244
> 
> 赞同：0
> 
> 时间：2013-04-04T17:52:33.510
> 
> 标签：c++, qt

我很想知道标准 QT 应用程序项目文件中的某些字段是什么意思？这是一个例子

```
#-------------------------------------------------
#
# Project created by QtCreator 2013-04-02T11:06:19
#
#-------------------------------------------------

QT       += core gui xml

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = AV_Command
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp \
    case.cpp \
    interview.cpp \
    parsexml.cpp

HEADERS  += mainwindow.h \
    case.h \
    interview.h \
    parsexml.h

FORMS    += mainwindow.ui 
```

我了解其中的大部分内容，除了这两行。

```
QT       += core gui xml

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:56:32.350

`QT += core gui xml`意味着构建过程应该会为您的项目找到并包含 QtCore、QtGUI 和 QtXML 库。如果您不使用任何 XML（尤其是不使用 XML 标头），您可以`xml`从该列表中删除。

另一方面......如果你想添加 Qt 的 SQL 东西，你需要添加`sql`到列表中，否则你会得到链接器错误，抱怨缺少定义。

`greaterThan()`比较。_ `QT_MAJOR_VERSION`_ `4`如果为真，那么它将添加`widgets`到所需 QT 库的列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:56:18.587

```
QT       += core gui xml 
```

指定您正在使用的 Qt 库的哪些组件。第二个包括小部件，具体取决于 Qt 的版本

# data-structures - Clojure 地图卷起

> ID：15818246
> 
> 赞同：2
> 
> 时间：2013-04-04T17:52:41.977
> 
> 标签：data-structures, clojure

我有一个看起来类似于的数据结构

```
[{:Gender "Boy" :Cat1 "Foo" :Cat2 "Bar" :SKU 111}
 {:Gender "Boy"  :Cat1 "Foo" :Cat2 "Bar" :SKU 222}
 {:Gender "Girl" :Cat1 "Foo" :Cat2 "Bar" :SKU 333}
 {:Gender "Boy" :Cat1 "Foo" :Cat2 "Woo" :SKU 444}] 
```

我想建立一个看起来像的数据结构

```
 [{:Name "Boy" 
      :Children
       { :Name "Foo"
         :Children
          {:Name "Bar"
           :Children
             {:SKU 111}
             {:SKU 222}
          }
          {:Name "Woo"
           :Children
             {:SKU 444}
          }
      }
    {:Name "Girl"
      :Children
       {:Name "Foo"
        :Children
         {:Name "Bar"
          :Children
            {:SKU 333}
         }
        }            
       }] 
```

我对 Clojure 相当陌生，所以如果答案很明显，请原谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:18:24.553

不完全是您想要的，但可能很接近：

```
user=> (def foo  [{:Gender "Boy" :Cat1 "Foo" :Cat2 "Bar" :SKU 111}
  #_=>      {:Gender "Boy"  :Cat1 "Foo" :Cat2 "Bar" :SKU 222}
  #_=>      {:Gender "Girl" :Cat1 "Foo" :Cat2 "Bar" :SKU 333}
  #_=>      {:Gender "Boy" :Cat1 "Foo" :Cat2 "Woo" :SKU 444}])
#'user/foo

user=> (group-by (juxt :Gender :Cat1 :Cat2) foo)
    {["Boy" "Foo" "Bar"] [{:Gender "Boy", :Cat2 "Bar", :Cat1 "Foo", :SKU 111} 
     {:Gender "Boy", :Cat2 "Bar", :Cat1 "Foo", :SKU 222}], 
     ["Girl" "Foo" "Bar"] [{:Gender "Girl", :Cat2 "Bar", :Cat1 "Foo", :SKU 333}], 
     ["Boy" "Foo" "Woo"] [{:Gender "Boy", :Cat2 "Woo", :Cat1 "Foo", :SKU 444}]}

user=> (def foo2 (group-by (juxt :Gender :Cat1 :Cat2) foo))
#'user/foo2

user=>  (zipmap (keys foo2) (map #(map :SKU %) (vals foo2)))
{["Boy" "Foo" "Woo"] (444), ["Girl" "Foo" "Bar"] (333), ["Boy" "Foo" "Bar"] (111 222)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:25:30.000

以下是解决方案（注意：`:Children`应该是地图列表）

```
(def data [{:Gender "Boy" :Cat1 "Foo" :Cat2 "Bar" :SKU 111}
           {:Gender "Boy"  :Cat1 "Foo" :Cat2 "Bar" :SKU 222}
           {:Gender "Girl" :Cat1 "Foo" :Cat2 "Bar" :SKU 333}
           {:Gender "Boy" :Cat1 "Foo" :Cat2 "Woo" :SKU 444}])

(defn gp-by [data key]
  (->> (group-by key data)
       (map (fn [[k v]] {:Name k
                        :Children (map #(dissoc % key) v)}))))

(map (fn [m] (assoc m :Children
                   (map (fn [n] (assoc n :Children (gp-by (n :Children) :Cat2)))
                        (gp-by (m :Children) :Cat1)))) (gp-by data :Gender)) 
```

# php - 设置 xdebug - 不出现在 phpinfo() 上；

> ID：15818247
> 
> 赞同：1
> 
> 时间：2013-04-04T17:52:45.633
> 
> 标签：php, mamp, xdebug

MAC OS X 10.7.5 MAMP PRO 2.0.5

如果我做：

```
php --ini 
```

我得到：

```
Configuration File (php.ini) Path: /Applications/MAMP/bin/php/php5.3.6/conf
Loaded Configuration File:         /Applications/MAMP/bin/php/php5.3.6/conf/php.ini
Scan for additional .ini files in: (none)
Additional .ini files parsed:      (none) 
```

在：

```
/Applications/MAMP/bin/php/php5.3.6/conf/php.ini 
```

我有：

```
[xdebug] 
zend_extension="/Applications/MAMP/bin/php/php5.3.6/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"
xdebug.default_enable=1
xdebug.remote_host=localhost
xdebug.remote_port=9001
xdebug.remote_autostart=1
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.idekey="netbeans-xdebug"
xdebug.remote_log="/Applications/MAMP/logs/xdebug.log" 
```

然后我看到 phpinfo()，我得到的信息根本没有 xdebug 信息。

xdebug.so 在此路径上。

我确实重新启动了 apache 服务器（使用 MAMP）；

任何人都可以在这里给我一个线索吗？

更新：

请注意，在 phpinfo 我有：

```
Configuration File (php.ini) Path   
/Applications/MAMP/bin/php/php5.3.6/conf

Loaded Configuration File   
/Library/Application Support/appsolute/MAMP PRO/conf/php.ini 
```

我不明白他到底在看哪一个。无论如何，两者都改变​​了。没运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:03:52.050

显然，根据Xdebug官方信息应该编辑的文件是：

```
/Library/Application Support/appsolute/MAMP PRO/conf/php.ini 
```

显然，为了更改该文件，您应该使用 MAMP PRO 选项，否则，该文件将始终恢复到之前的状态。

因此，要解决这些问题，我必须：

```
MAMP PRO > File > Edit Template > PHP > PHP 5.3.6 php.ini 
```

然后删除以下注释 (;)：

```
[xdebug]
zend_extension="/Applications/MAMP/bin/php/php5.3.6/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so" 
```

我现在可以在 phpinfo() 上看到 xdebug；

# android - Cocos2dx 资产被默认 HelloWorld 包取代

> ID：15818248
> 
> 赞同：1
> 
> 时间：2013-04-04T17:52:47.877
> 
> 标签：android, cocos2d-x

所以我已经开始在 Cocos2dx 中编码，但在我的第一个应用程序中，只有资产被默认的 HelloWorld 资产取代。

我只修改了 HelloWorld.cpp 文件中的 init 方法。

任何人都知道这是一个错误吗？

注意：我在 Windows 7 64 位上使用 andorid-ndk-r8b,cocos2dx-2.0.1 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T10:16:01.690

使用 Windows 资源管理器将您的资产移动到资源文件夹中..然后再次构建您的应用程序..希望这会有所帮助！

# ios - 同时添加核心数据输入和segue

> ID：15818249
> 
> 赞同：1
> 
> 时间：2013-04-04T17:52:52.307
> 
> 标签：ios, core-data, uistoryboardsegue

在我的 tableView 中，导航栏上有一个按钮，用于添加新的核心数据条目。这工作正常，新条目被添加到核心数据和 tableView 的顶部。然后，如果我在 tableView 中选择条目（或任何条目），我就会有一个序列转换到一个新的视图控制器，显示该核心数据项的详细信息。这也很好。

但我想更改添加条目的方式。我想在导航栏中按下相同的按钮，我仍然希望将新条目添加到表格中。但同时我想转换到详细视图控制器并显示刚刚为我刚刚创建的条目创建的值。

正如您从下面的代码中看到的那样，查看游戏详细信息的序列只是抓取选定的行并将其传递给详细视图控制器。在我的 prepareForAddGameDetailSegue 中，我试图通过将插入新条目的新创建条目的 indexPath 设置为 0 来作弊。这不起作用，我有一种感觉，这是因为我的 fetchedResultsController 在转换之前没有更新。

因此，当细节视图控制器加载新创建的游戏的值时为空。但是如果我回到 tableView 然后选择刚刚插入新游戏的行，它会很好地转换并且细节都会显示出来。

任何人帮助我做错了哪一步？谢谢！

以下是 segue 处理程序：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showGameDetails"]) {
        [self prepareForGameDetailSegue:(UIStoryboardSegue *)segue sender:(id)sender];
        return;
    }

    if ([[segue identifier] isEqualToString:@"addGameDetails"]) {
        [self prepareForAddGameDetailSegue:(UIStoryboardSegue *)segue sender:(id)sender];
        return;
    }
}

- (void)prepareForGameDetailSegue:(UIStoryboardSegue*)segue sender:(id)sender {
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    Game *SelectedGame = (Game *)[[self fetchedResultsController] objectAtIndexPath:indexPath];

        //pass the selected game to the new view controller
    GameDetailViewController *detailViewController = (GameDetailViewController *)[segue destinationViewController];
    detailViewController.title = [NSString stringWithFormat:@"Game Details"];
    detailViewController.game = SelectedGame;
    [detailViewController updateInterface];
}

- (void)prepareForAddGameDetailSegue:(UIStoryboardSegue*)segue sender:(id)sender {

    [self addGame];

    Game *newGame = (Game *)[[self fetchedResultsController] objectAtIndexPath:0];

    GameDetailViewController *detailViewController = (GameDetailViewController *)[segue destinationViewController];
    detailViewController.title = [NSString stringWithFormat:@"New Game"];
    detailViewController.game = newGame;
    [detailViewController updateInterface];

} 
```

这是 addGame 方法：

```
-(void)addGame {

    Game *newGame = (Game *)[NSEntityDescription insertNewObjectForEntityForName:@"Game"
                                                          inManagedObjectContext:_managedObjectContext];

    NSDate *today = [NSDate date];
    newGame.gameDate = today;
    newGame.points = 600;
    newGame.seconds = [NSNumber numberWithInt:10];

    NSError *error = nil;
    if (![_managedObjectContext save:&error]) {
        NSLog(@"Error in adding a new game %@, %@", error, [error userInfo]);
        abort();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:25:20.273

`-(void)addGame`更改to的签名`-(Game*)addGame`并返回新保存的游戏。使用返回的对象来加载您的详细视图。
稍后，在返回 segue 中，找到新插入对象的索引并选择它。
您可以使用：`- (NSIndexPath *)indexPathForObject:`FRC 的方法来获取 IndexPath。

# c - 分配一个二维字符数组

> ID：15818253
> 
> 赞同：0
> 
> 时间：2013-04-04T17:52:59.850
> 
> 标签：c

我正在制作一个程序来分配一个 20x20 的字符数组。这是我所做的：

```
#include<stdio.h>
#include<stdlib.h>
int main()
{
char *a=(char*) calloc(20,sizeof(char[20]));
a[0]="abcd";
printf("%s\n",a[0]);
return 0;
} 
```

[链接到 ideone](http://ideone.com/lKE5sa)。

上述代码的输出是`(null)`. 有人可以解释一下吗？据我说，我分配了一个指针`a`20 个空间，每个空间大小为 20。所以`a[0]`从技术上讲有足够的内存来存储“abcd”，但输出是`null`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:53:54.410

您拥有的变量类型`a`不正确：应该是`char (*a)[20]`（是的，带括号）。

此行也不正确：

```
a[0]="abcd"; 
```

你不能像这样分配 C 字符串，因为`a[0]`它不是指针：它是一个 20 个字符的数组，所以你需要使用`strcpy`：

```
#include<stdio.h>
#include<stdlib.h>
int main()
{
    char (*a)[20]=calloc(20, sizeof(char[20]));
    strcpy(a[0], "abcd");
    strcpy(a[1], "wxyz");
    printf("%s\n",a[0]);
    printf("%s\n",a[1]);
    return 0;
} 
```

[请参阅此处](http://ideone.com/xHx3Di)运行的更正程序。

注意：与 C++ 不同，C 不需要`void`指针的类型转换。C 程序通常会省略从`malloc`、`calloc`和中返回的结果转换`realloc`，因为类型已经从被分配的变量的类型中得知。

# sql-server - 带有 SubSelect 和 Join 的 T-SQL 语句 - 不明确的列名错误

> ID：15818259
> 
> 赞同：3
> 
> 时间：2013-04-04T17:53:16.787
> 
> 标签：sql-server, tsql, calculated-columns, ambiguous

我花了几个小时研究应该是一个非常简单的 T-SQL 语句的答案。
这是情况。我很想通过帮助台数据库进行报告。我有一个表（calllog），其中包含有关故障单的基本非重复信息和另一个事务表（Asgnmnt），其中包含对不同人员的各种分配以解决问题。我只是试图确定 Asgnmnt 表中的最后一个分配，将其与呼叫日志文件链接，并在外部选择中使用该数据来进行更多数据报告。Asgnmnt 表包含一个名为 HEATSeq 的字段。给定 CallID 的最高 HEATSeq 将是最后一个分配。这是我的 T-SQL 语句和错误。

```
SELECT
Callid,
Priority,
RecvdDate,
RecvdTime,
ClosedDate,
ClosedTime,
CustID,
CallType,
CallDesc,
HeatSEQ#
FROM
      (Select 
      a.Callid, 
      a.Priority,
      a.RecvdDate,
      a.RecvdTime,
      a.ClosedDate,
      a.ClosedTime,
      a.CustID,
      a.CallType,
      a.CallDesc,
      (select TOP 1 HEATSeq from Asgnmnt f
      WHERE  a.CallID = f.CallID
      ORDER BY HEATSeq desc) as HeatSeq#
      FROM dbo.CallLog a 
      where a.CallID = '00520308') as z
LEFT OUTER JOIN dbo.Asgnmnt c on z.Callid=c.CallID and z.HeatSeq# = c.HEATSeq 
```

这是[错误]

```
Msg 209, Level 16, State 1, Line 2
Ambiguous column name 'Callid'.
Msg 209, Level 16, State 1, Line 9
Ambiguous column name 'CallType' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T17:58:47.780

您可能在 z 和 c 中都有 Callid 和 CallType（至少）。至少为外部查询中的那些列使用表别名：

```
SELECT
z.Callid, -- No longer ambiguous
z.Priority,
z.RecvdDate,
z.RecvdTime,
z.ClosedDate,
z.ClosedTime,
z.CustID,
z.CallType,
z.CallDesc,
z.HeatSEQ#
FROM
      (Select 
      a.Callid, 
      a.Priority,
      a.RecvdDate,
      a.RecvdTime,
      a.ClosedDate,
      a.ClosedTime,
      a.CustID,
      a.CallType,
      a.CallDesc,
      (select TOP 1 HEATSeq from Asgnmnt f
      WHERE  a.CallID = f.CallID
      ORDER BY HEATSeq desc) as HeatSeq#
      FROM dbo.CallLog a 
      where a.CallID = '00520308') as z
LEFT OUTER JOIN dbo.Asgnmnt c on z.Callid=c.CallID and z.HeatSeq# = c.HEATSeq 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:04:52.970

您应该使用 FROM 子句中的适当表别名，例如 zCallid 或 c.Callid 来完全限定外部 SELECT 中的所有列名。由于您留在 Callid 上，因此结果集中可能存在 z.Callid 不为空但 c.Callid 为空的行。CallType 也是如此。

# ruby - 适用于 iOS 应用程序的 Ruby TCPSocket

> ID：15818269
> 
> 赞同：1
> 
> 时间：2013-04-04T17:53:57.013
> 
> 标签：ruby, http, tcpsocket

我正在开发一个需要 iPhone 应用程序和服务器之间通信的项目。出于我的目的，我使用 Amazon Web Services 启动了一个 EC2 服务器。我正在尝试启用服务器和 iPhone 之间的 HTTP 通信，以便发出可以通过电话处理的请求。现在我正在服务器端使用 ruby​​ 客户端和 ruby​​ 代码进行测试。我的服务器端代码如下所示：

```
#!/usr/bin/env ruby
require 'rubygems'
require 'aws-sdk'
require 'socket'
require 'net/http'

server = TCPServer.open(2000)

loop {
  Thread.start(server.accept) do |client|
    puts 'Time requested on client side'
    lines = []
    while line = client.gets and line !~/^\s*$/
      lines << line.chomp
      for line in lines
        puts line
      end
    end

    #socket.print(Time.now.ctime)
    client.puts(Time.now.ctime)
    client.puts 'Closing connection'
    client.close
  end
} 
```

该代码可以打印从客户端发送的数据，但是当尝试以其他方式发送数据时，客户端和服务器都会挂断。通信通道是否需要在重新打开之前关闭才能以另一种方式发送数据。我已经在谷歌上搜索了大约一个小时并且没有得到任何地方，即使是从这里的类似问题。另一方面，这是进行请求的最佳方式还是我应该使用其他东西？

# java - 在 Android Facebook 注销时出现错误 101，“应用程序 ID 无效”

> ID：15818273
> 
> 赞同：2
> 
> 时间：2013-04-04T17:54:16.157
> 
> 标签：java, android, facebook

我有一个扩展类`ListFragment`。我的`loginToFacebook()`方法（见下文）有效。但是一旦我想注销并打电话`logoutFromFacebook()`，我就会收到以下错误：

```
{"error_code":101,"error_msg":"Invalid application ID.","request_args":[{"key":"method","value":"auth.expireSession"},{"key":"format","value":"json"}]} 
```

这是我的方法：

```
public void loginToFacebook() {

        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);

        if (access_token != null) {
            facebook.setAccessToken(access_token);

            btnFbLogin.setVisibility(View.INVISIBLE);

            // Making get profile button visible
            btnFbGetProfile.setVisibility(View.VISIBLE);

            // Making post to wall visible
            btnPostToWall.setVisibility(View.VISIBLE);

            // Making show access tokens button visible
            btnShowAccessTokens.setVisibility(View.VISIBLE);

            btnLogout.setVisibility(View.VISIBLE);

            Log.d("FB Sessions", "" + facebook.isSessionValid());
        }

        if (expires != 0) {
            facebook.setAccessExpires(expires);
        }

        if (!facebook.isSessionValid()) {
            facebook.authorize(getActivity(),
                    new String[] { "email", "publish_stream" },
                    new DialogListener() {

                        @Override
                        public void onCancel() {
                            // Function to handle cancel event
                        }

                        @Override
                        public void onComplete(Bundle values) {
                            // Function to handle complete event
                            // Edit Preferences and update facebook acess_token
                            SharedPreferences.Editor editor = mPrefs.edit();
                            editor.putString("access_token",
                                    facebook.getAccessToken());
                            editor.putLong("access_expires",
                                    facebook.getAccessExpires());
                            editor.commit();

                            // Making Login button invisible
                            btnFbLogin.setVisibility(View.INVISIBLE);

                            // Making logout Button visible
                            btnFbGetProfile.setVisibility(View.VISIBLE);

                            // Making post to wall visible
                            btnPostToWall.setVisibility(View.VISIBLE);

                            // Making show access tokens button visible
                            btnShowAccessTokens.setVisibility(View.VISIBLE);

                            btnLogout.setVisibility(View.VISIBLE);
                        }

                        @Override
                        public void onError(DialogError error) {
                            // Function to handle error

                        }

                        @Override
                        public void onFacebookError(FacebookError fberror) {
                            // Function to handle Facebook errors

                        }

                    });
        }
    } 
```

//---------------------------//

```
public void logoutFromFacebook() {
        mAsyncRunner.logout(getActivity(), new RequestListener() {
            @Override
            public void onComplete(String response, Object state) {
                Log.d("Logout from Facebook", response);
                if (Boolean.parseBoolean(response) == true) {
                    runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                            // make Login button visible
                            btnFbLogin.setVisibility(View.VISIBLE);

                            // making all remaining buttons invisible
                            btnFbGetProfile.setVisibility(View.INVISIBLE);
                            btnPostToWall.setVisibility(View.INVISIBLE);
                            btnShowAccessTokens.setVisibility(View.INVISIBLE);
                            btnLogout.setVisibility(View.INVISIBLE);
                        }

                    });

                }
            }

            @Override
            public void onIOException(IOException e, Object state) {
            }

            @Override
            public void onFileNotFoundException(FileNotFoundException e,
                    Object state) {
            }

            @Override
            public void onMalformedURLException(MalformedURLException e,
                    Object state) {
            }

            @Override
            public void onFacebookError(FacebookError e, Object state) {
            }
        });
    } 
```

我只是想知道问题的原因是否是`extends ListFragment`，因为当我尝试使用时`extends Activity`，它运行良好。

有人会帮我解决这个问题吗？任何帮助将不胜感激。

谢谢

# iphone - 在同一个包中创建一个 iOSOpenDev 应用程序和一个调整

> ID：15818275
> 
> 赞同：2
> 
> 时间：2013-04-04T17:54:18.637
> 
> 标签：iphone, ios, jailbreak, theos

我花了三天时间研究如何创建（使用 iOSOpenDev）一个包含应用程序和调整的包（.deb），但我找不到任何东西。

有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:15:33.797

您可以做的是在 xcode 项目中，创建两个目标（一个调整和一个应用程序），都使用 iOS 开放开发，然后将它们打包在同一个 deb 中。将它们打包的方式是在同一个 deb 文件夹中创建应用程序文件夹 (/Applications/YourApp.app) 的正确路径和调整所在的路径 (/Library/MobileSubstrate/DynamicLibraies)，然后构建通过在终端中键入此文件夹

```
sudo dpkg-deb -b YourDebFolder 
```

文件夹应如下所示 ![在此处输入图像描述](https://i.stack.imgur.com/SV0h5.png) 其中`DEBIAN`包含控制文件，`Library`包含名为 的子文件夹`MobileSubstrate`，然后包含另一个子文件夹`DynamicLibraries`，其中包含调整，`Applications`文件夹包含`YourApp.app`文件。

# html - 水平 html 列表垂直

> ID：15818278
> 
> 赞同：0
> 
> 时间：2013-04-04T17:54:22.543
> 
> 标签：html, css

所以，我一直在尝试为我的网站创建一个水平导航栏。我继续，在 Chrome、Firefox 和 Safari 中对其进行了测试——效果很好。然后我的朋友继续在 Internet Explorer 中对其进行了测试，这发生了 - [http://api.browsershots.org/png/original/d8/d84069e1bba73593afc0764935a2aa6d.png](http://api.browsershots.org/png/original/d8/d84069e1bba73593afc0764935a2aa6d.png)

（是的，我知道这不是 IE，但它与发生在他身上的事情 100% 相同）

导航栏上的链接被下推到一个垂直列表中。为什么是这样？\

CSS -

```
div#menu
{
    background-repeat: repeat-x;
    width: 100%;
    height: 50px;
    left: 0px;
    top:0px;
    position: fixed;
    z-index: 1000;
    background: url("../Images/NavBar.png");
}

div#navBar
{
    width:1000px;
    height:50px;
    position:fixed;
    zindex:1001;
    left:50%;
    margin-left: -500px;
}

ul#menuItems
{
    background:none;
    height:50px;
    width:1000px;
    margin:0;
    padding:0;
}

ul#menuItems li
{
    display:inline-block;
    list-style:none;
    margin-left:auto;
    margin-right:auto;
    top:0px;
    height:50px;
    padding-right:10px;
    min-width:65px;
} 
```

HTML -

```
<div id="menu">
    <div id="navBar">
        <ul id="menuItems">
            <li>
              <a href="index.php">Home</a>
            </li>
            <li>
                <a href="index.php">DJ Profiles</a>
            </li>
            <li>
                <a href="#">Chat Room</a>
            </li>
            <li>
              <input name="searchField" type="text" value="Search Users" size="60" maxlength="150" id="SearchBox"/>
            </li>
            <li>
                <a href="#">Login to S4NR</a>
            </li>
<!--            <li id="userInfo">
                <p align="center" style="font-size:11px;">Welcome, Username.</p>
            </li>-->
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:03:53.580

如上所述，inline-block 可能是旧 IE 的问题，但这并不是问题的全部，老实说，取决于你在哪里，你不必担心 IE5、6，甚至可能是 7 .

```
ul#menuItems li
{
    display:inline-block;
    list-style:none;
    margin-left:auto;
    margin-right:auto;
    top:0px;
    height:50px;
    padding-right:10px;
    min-width:65px;
} 
```

大多数浏览器都会与上面的灵活边距和灵活宽度的组合发生冲突。几乎总是你最终会得到接近 100% 的导航栏宽度的元素。如果您确定您将拥有多少列表项，我建议给它们一个固定或基于百分比的宽度，删除边距属性，并将内部链接居中，`text-align: center;` 这将为您带来相同的效果，而头痛则少得多。

如果您决定尝试修复较旧的 IE，请添加`float: left; position: relative;`

# c++ - 分析模板元程序编译时间

> ID：15818281
> 
> 赞同：24
> 
> 时间：2013-04-04T17:54:34.317
> 
> 标签：c++, profiling, instantiation, template-meta-programming

我正在开发一个具有大量编译时计算的 C++ 项目。长的编译时间让我们慢了下来。我如何找出模板元程序中最慢的部分以便优化它们？（当我们的运行时计算速度很慢时，我有很多分析器可供选择，例如 valgrind 的`callgrind`工具。所以我尝试构建一个调试 GCC 并分析它来编译我们的代码，但我并没有从中学到很多东西。）

我使用 GCC 和 Clang，但欢迎提出任何建议。

我`profile_templates`在 Boost 的网站上找到了，但它的文档似乎很少，并且需要 jam/bjam 构建系统。如果您展示如何在非堵塞项目¹上使用它，我会支持您。[https://svn.boost.org/svn/boost/sandbox/tools/profile_templates/](https://svn.boost.org/svn/boost/sandbox/tools/profile_templates/)似乎计算了实例的数量，而计算时间是理想的。

¹ [我们的项目使用 CMake，并且足够小，可以接受将 Jamfile 组合在一起仅用于模板分析是可以接受的。]

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-02-08T22:17:15.177

我知道这是一个老问题，但我想给出一个更新的答案。

有一组基于 clang 的项目针对这个特定问题。第一个组件是对 clang 编译器的检测，它生成对编译期间发生的所有模板实例化的完整跟踪，包括时序值和可选的内存使用计数。该工具称为 Templight，可在此处访问（当前需要针对已修补的 clang 源代码树进行编译）：

[https://github.com/mikael-s-persson/templight](https://github.com/mikael-s-persson/templight)

第二个组件是一个转换工具，它允许您将 templight 跟踪转换为其他格式，例如易于解析的基于文本的格式（yaml、xml、文本等）以及更易于可视化的格式，例如 graphviz /graphML，更重要的是可以加载到 KCacheGrind 中的 callgrind 输出，以可视化和检查模板实例化的元调用图及其编译时成本，例如这段代码的模板实例化配置文件的截图创建 a`boost::container::vector`并使用 对其进行排序`std::sort`：

![在此处输入图像描述](https://i.stack.imgur.com/agGkK.png)

在这里查看：

[https://github.com/mikael-s-persson/templight-tools](https://github.com/mikael-s-persson/templight-tools)

最后，还有另一个相关项目，它创建了一个交互式 shell 和调试器，以便能够交互式地在模板实例化图上上下移动：

[https://github.com/sabel83/metashell](https://github.com/sabel83/metashell)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-04T18:19:27.530

自 2008 年以来，我一直在研究一个大量使用模板元编程的库。确实需要更好的工具或方法来了解什么消耗最多的编译时间。

我知道的唯一技术是分而治之的方法，要么将代码分成不同的文件，注释掉模板定义的主体，要么将模板实例包装在#define 宏中并临时重新定义这些宏以不做任何事情。然后，您可以使用和不使用各种实例化重新编译项目并缩小范围。

顺便说一句，将相同的代码分成更多、更小的文件可能会使其编译速度更快。我不仅仅是在谈论并行编译的机会——即使是串行的，我观察到它仍然更快。我在编译库时和编译 Boost Spirit 解析器时都在 gcc 中观察到了这种效果。我的理论是，gcc 中的某些符号解析、重载解析、SFINAE 或类型推断代码在类型定义或符号数量方面具有 O(n log n) 甚至 O(n^2) 复杂性在执行单元中。

最终，您需要做的是仔细检查您的模板并将真正依赖于类型信息的内容与不依赖于类型信息的内容区分开来，并在实际上不需要模板类型的代码部分尽可能使用类型擦除和虚函数。**如果**可以移动这部分代码，则需要将内容从标头中取出并放入 cpp 文件中。在一个完美的世界中，编译器应该能够自己解决这个问题——你不应该手动移动这段代码来照看它——但这是我们今天拥有的编译器的最新技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T18:15:06.590

经典书籍[C++ Template Metaprogramming: Concepts, Tools, and Techniques from Boost and Beyond](https://rads.stackoverflow.com/amzn/click/com/0321227255)附带一个 20 页的关于分析编译时成本的附录。它有一张附带的 CD，其中包含生成该附录中的图表的代码。

另一篇论文是[http://aszt.inf.elte.hu/~gsd/s/cikkek/profiling/profile.pdf](http://aszt.inf.elte.hu/~gsd/s/cikkek/profiling/profile.pdf)，也许这对你有用。

另一种但更费力的方法是从编译器输出中计算每个类[的实例化数量。](https://stackoverflow.com/a/11404168/819272)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-04T18:09:27.957

[http://www.cs.uoregon.edu/research/tau/about.php](http://www.cs.uoregon.edu/research/tau/about.php)可能是您对模板实体感兴趣的东西，它显示了每个实例化所花费的时间分解。其他数据包括每个函数被调用了多少次，每个函数调用了多少分析函数，以及每次调用的平均包含时间是多少

# r - 如何计算向量在列表中出现的次数？在 R 中

> ID：15818284
> 
> 赞同：0
> 
> 时间：2013-04-04T17:54:45.040
> 
> 标签：r, list, vector

我有一个包含 10,000 个向量的列表，每个向量可能有不同的元素和不同的长度。我想知道我有多少个唯一向量以及每个唯一向量出现在列表中的频率。

我想要走的路是函数“唯一”，但我不知道如何使用它来获取每个向量重复的次数。

所以我想得到的是这样的：

“a” “b” “c” d” 301

“一个” 277

"b" c" 49

作为字母、每个唯一向量的内容和数字，重复的频率。

我真的很感激任何可能的帮助。

非常感谢你。

蒂娜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:06:46.037

也许你应该看看`table`：

一些样本数据：

```
myList <- list(A = c("A", "B"),
               B = c("A", "B"),
               C = c("B", "A"),
               D = c("A", "B", "B", "C"),
               E = c("A", "B", "B", "C"),
               F = c("A", "C", "B", "B")) 
```

将您的向量粘贴在一起并将它们制成表格。

```
table(sapply(myList, paste, collapse = ","))
# 
#     A,B A,B,B,C A,C,B,B     B,A 
#       2       2       1       1 
```

您没有指定顺序是否重要（即 A、B 是否与 B、A 相同）。如果是这样，您可以尝试以下操作：

```
table(sapply(myList, function(x) paste(sort(x), collapse = ",")))
# 
#     A,B A,B,B,C 
#       3       3 
```

将其包装`data.frame`为垂直输出而不是水平输出，这可能更易于阅读。

* * *

另外，请务必阅读[如何制作一个出色的 R 可重现示例？](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)正如已经向您建议的那样。

事实上，我只是在*猜测*你想要做什么。

# asp.net - 如何更新 Kentico Aspx 模板页面？

> ID：15818287
> 
> 赞同：0
> 
> 时间：2013-04-04T17:54:52.333
> 
> 标签：asp.net, kentico

我创建了一个模板页面，以及一个在 Kentico 中使用该模板的页面。所以我编辑了 aspx 模板文件，但是在 CMS 中查看页面时，更改并没有更新。我关闭了缓存和所有内容，但我无法查看我的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:33:46.593

如果您使用 Web 应用程序（您的解决方案中有 .designer.cs 文件），您必须重新构建应用程序。或者您可以尝试在您的 aspx 标记中将 Codebehind 更改为 CodeFile。（不是真正干净的方法，但会确保文件像在网站下那样动态构建）。

如果您使用网站并尝试删除缓存（CMS 站点管理器-> 管理-> 系统-> 清除缓存），那么您做错了，相信我。

作为最后的手段，您可以尝试清除 asp.net 临时文件（C:\Windows\Microsoft.NET\Framework64\your version\Temporary ASP.NET Files）。这将需要重新启动 IIS。

Web 应用程序之间的差异。和网站在[这里](http://msdn.microsoft.com/en-us/library/dd547590.aspx)描述。

# git - 仅获取单个分支的头部并推送到 Git 上的空仓库

> ID：15818289
> 
> 赞同：0
> 
> 时间：2013-04-04T17:54:53.410
> 
> 标签：git

我的代码库有一个 repo，每个项目都继承了这个代码库。它上面有子模块，一切正常。

当我从头开始一个新项目时，应该如何克隆这个 repo（只有 master 分支）和只有 HEAD（因为我不希望每个项目都有很多基础提交）。

我试过：

```
 git init
    git remote add -t origin URLtoProjectRepo
    git remote add -t codebase URLtoMainCodeBase
    git pull codebase master --depth=1 
```

当我尝试将此推送到项目存储库时，我得到：

```
 [remote rejected] master -> master (missing necessary objects)
    error: failed to push some refs to 'ProjectURL' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:22:23.727

您不能推送不完整的历史记录，但进行无历史记录提交很容易：

```
git fetch --depth=1 git://wherever master
git checkout -B master $(git cat-file -p FETCH_HEAD|git commit-tree FETCH_HEAD^{tree}) 
```

会给你一个相当丑陋的提交信息，其中包括原始历史链接作为文本；在那里扑通扑通`|sed 1,/^$/d`甚至会剥夺与过去的纪录片链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:11:23.280

我有一个类似的问题要解决。我有一个基本存储库，它本质上是许多其他项目的核心代码。其他项目首先拉取核心存储库，然后将其签入新的项目存储库。通过这样做，任何时候对核心存储库进行更改，我们都可以轻松地将更改合并到我们的项目中。作为 git 的新手，这是我在研究时学到的结果。我把它从我用来自动化这个过程的 perl 脚本中取出来。这对我很有效。希望它可以帮助你。

```
git init
git remote add origin new_repo
git add .
git commit -m 'initial commit'
git push origin master
git remote add base base_repo
git checkout -b base
git pull base master
git checkout master
git merge base
git push origin master
git branch -d base 
```

# php - jquery，DOM操作后无法选择TR

> ID：15818298
> 
> 赞同：0
> 
> 时间：2013-04-04T17:55:16.440
> 
> 标签：php, jquery, ajax, dom

我希望有人可以在这里帮助我，因为我无法弄清楚这一点。我有一张显示用户名的表格。当我单击 TR 行时，它通过 ajax 请求将信息获取到 PHP 页面，该页面从 SQL 获取内容并将其传递给表单。

当表单被更新并保存时，会发生相反的情况，通过 ajax 发送到 PHP 页面，女巫会更新 SQL。

然后，当更新完成后，我希望列表自行更新而不刷新页面。我得到了这个工作。它通过 ajax/php 从数据库中获取新保存的内容，然后使用 .append 填充表。

但问题是当表格更新时，无法再在表格中选择 TR。

这可能是令人困惑的解释..

我检查了更改前后 DOM 的外观（使用 Coda/DOM 树），至少在我看来它们是相似的：

**操作前：**

```
<table id="brukere" cellpadding="8"> 
<thead>
    <tr><td>Brukernavn</td></tr></thead>
<tbody> 
<tr id="1" onmouseover="changebgcolor(this)" onmouseout="restorebgcolor(this)"     style="background-color: white; ">
    <td>Name 1</td>
</tr>
<tr id="2" onmouseover="changebgcolor(this)" onmouseout="restorebgcolor(this)" style="background-color: white; ">
    <td>Name 2</td>
</tr>    
</tbody> 
</table> 
```

**操作后：**

```
<table id="brukere" cellpadding="8"> 
<thead>
    <tr><td>Brukernavn</td></tr></thead>
<tbody> 
<tr id="1" onmouseover="changebgcolor(this)" onmouseout="restorebgcolor(this)">
    <td>Name 1</td> 
</tr>
<tr id="2" onmouseover="changebgcolor(this)" onmouseout="restorebgcolor(this)">
    <td>Name 2</td> 
</tr>
</tbody> 
</table> 
```

在操作 DOM 以选择 TR 之前，我正在使用该工作的代码是：

```
$("#brukere tr")
      .click(function() { 
```

要刷新表格，我首先清除 TR：

```
$("#brukere").find("tr:gt(0)").remove(); 
```

然后追加，新的内容（数据）来自 PHP 文件中的 HTML：

```
$("table tbody").append(data), 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:58:15.723

好吧，当你这样做的时候

```
$("#brukere").find("tr:gt(0)").remove(); 
```

您删除`tr`, 连同它的点击处理程序。因此，您要么需要在之后附加一个新的单击处理程序（到新插入的元素），要么需要在未删除的元素上使用委托，例如：

```
$("#brukere").on('click', 'tr', function() {...}); 
```

这会将`click`处理程序附加到`#brukere`表。但是，只有当点击来自 child 时，才会执行匿名函数`tr`。而且由于您永远不会删除表格本身，因此该单击处理程序永远不会被删除。

# c# - C# 如何创建一个行为类似于 Nullable 的类

> ID：15818300
> 
> 赞同：1
> 
> 时间：2013-04-04T17:55:20.747
> 
> 标签：c#, class, type-conversion, implicit-conversion, conversion-operator

给定代码：

```
public class Filter<T>
{
    private bool selected = false;
    public bool Selected { get { return selected; } }

    private T value;
    public T Value { get{ return this.value; } set { this.value = value; selected = true; }
}     

public class Test
{
    public void filter()
    {
        DateTime a= new DateTime();
        Nullable<DateTime> b = new DateTime(); //Work Like a Charm
        Filter<DateTime> c = new DateTime(); //Dosent Work
    }
} 
```

在`Nullable<T>`中`new DateTime()`可以直接赋值给变量。在我的课堂上，它不起作用。我想了解我错过了什么。

我认为这很简单。但我无法用语言来找到答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T17:57:30.520

您必须实现[隐式运算符](http://msdn.microsoft.com/en-us/library/z5z9kes2%28v=vs.110%29.aspx)：

```
public static implicit operator Filter<T>(T value)
{
    return new Filter<T>() { Value = value };
} 
```

隐式运算符将允许您在不显式写入`Filter<T> filter = (Filter<T>)value;`（显式转换）的情况下转换类型，而只是`Filter<T> filter = value;`（隐式转换）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T17:56:59.030

您需要使用隐式转换运算符：

请参阅：[隐式强制转换运算符和相等运算符](https://stackoverflow.com/questions/9837160/implicit-cast-operator-and-the-equality-operator)

这允许您编写代码以从另一种类型构造您的自定义类型。

# php - 在php中使用callable

> ID：15818301
> 
> 赞同：4
> 
> 时间：2013-04-04T17:55:24.643
> 
> 标签：php, callable

我试图在下面的实现中模仿 php 的内置 usort 函数定义：

```
class heapSort {
    static function hsort(array &$array, callable $cmp_function){
       // logic
    }
}

class utility{
    static function mycomparator(){
        // logic
    }
}

$array = array(5,3,8,1);
$callback = array('utility','mycomparator');
heapSort::hsort($array, $callback); 
```

虽然变量`$callback`是“可调用的”，但为什么我会遇到致命错误？

> 传递给 heapSort::hsort() 的参数 2 必须是可调用的实例。

更具体地说，我如何制作/类型转换`$variable`为可调用的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T18:03:55.107

`callable`仅支持`PHP 5.4`尝试`is_callable`使用

```
static function hsort(array &$array, $cmp_function) {
    if (! is_callable($cmp_function))
        throw new InvalidArgumentException("Function not callable");
} 
```

# mobile - 果园 CMS 移动网站

> ID：15818303
> 
> 赞同：0
> 
> 时间：2013-04-04T17:55:28.417
> 
> 标签：mobile, orchardcms

我在 Visual Studio 中使用 SPA 模板创建了一个 ASP.net MVC4 移动网站，我想从 Orchard CMS 检索视图以在移动设备上显示。是否有示例可以在不使用主题的情况下在移动设备上显示来自 Orchard CMS 的响应式设计视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T17:49:46.500

看起来您想避免通过 Orchard 的布局/主题进行渲染，并拥有自己的布局和视图页面。有一个类似的问题与一些富有成果的讨论[here](https://stackoverflow.com/questions/15347551/is-it-possible-to-use-razor-layouts-with-orchard-cms-and-bypass-the-theming/15818398#comment25060823_15818398)

# sql - INSERT INTO 中的 vb.net 代码错误

> ID：15818305
> 
> 赞同：0
> 
> 时间：2013-04-04T17:55:33.023
> 
> 标签：sql, vb.net

当我尝试在这三个字段中插入数据时，在 INSERT INTO 语句中出现错误提示。但是，当仅在第一个字段 sname 中保存时，它会被添加，但是当添加其他两个时会出现此错误，我在 INSERT INTO 语句中遇到异常，请检查以下任何建议？

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Try
        Dim dbprovider As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Taher\Documents\Visual Studio 2010\Projects\WindowsApplication1\WindowsApplication1\Database1.accdb;Persist Security Info=False;"
        Me.con = New OleDb.OleDbConnection()
        con.ConnectionString = dbprovider
        con.Open()

        Dim sqlquery As String = "INSERT INTO admin (sname,username,password)" + "VALUES ('" & txtname.Text & "','" & txtuser.Text & "','" & txtpass.Text & "');"
        Dim sqlcommand As New OleDb.OleDbCommand(sqlquery)
        With sqlcommand
            .CommandText = sqlquery
            .Connection = con
            .ExecuteNonQuery()
            con.Close()
        End With
        MsgBox("User Registered")
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T17:58:50.303

PASSWORD 这个词是 JET-SQL 中 Microsoft Access 的保留关键字。如果您有一个具有该名称的列，则应使用方括号将其封装

```
"INSERT INTO admin (sname,username,[password])" &% _
"VALUES ('" & txtname.Text & "','" & txtuser.Text & _
"','" & txtpass.Text & "');" 
```

这就是语法错误的原因，但是让我告诉你，构建连接字符串的 sql 命令是一种非常糟糕的做法。当您的值包含单引号时，您将遇到问题，最糟糕的是，您的代码可能用于 sql 注入攻击

所以你的代码应该以这种方式改变

```
Dim sqlquery As String = "INSERT INTO admin (sname,username,password)" & _
    "VALUES (?, ?, ?)"
Dim sqlcommand As New OleDb.OleDbCommand(sqlquery)
With sqlcommand
    .CommandText = sqlquery
    .Connection = con
    .Parameters.AddWithValue("@p1", txtname.Text)
    .Parameters.AddWithValue("@p2", txtuser.Text)
    .Parameters.AddWithValue("@p3", txtpass.Text)
    .ExecuteNonQuery()
    con.Close()
End With 
```

您对对象 OleDbConnection 的使用也没有遵循良好的模式。如果出现异常，您不会关闭连接，这可能是在后续调用中重用连接的问题。您应该尝试使用[Using 语句](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)

```
Using connection = New OleDb.OleDbConnection()
    connection.ConnectionString = dbprovider
    connection.Open()
    .....
    ' rest of command code here '
    ' No need to close the connection 
End Using 
```

这样，如果您遇到异常，OleDbConnection 也将被关闭并处理，而不会影响系统资源的使用。

# xml - sed 正则表达式不匹配

> ID：15818317
> 
> 赞同：0
> 
> 时间：2013-04-04T17:56:17.213
> 
> 标签：xml, regex, bash, sed

我有一个如下所示的 XML 文件：

```
<Group>
    <Name>Awesome Group</Name>
    <Notes />
    <Date>2013-04-04</Date>
    <Expires>False</Expires>
    <Icon>7</Icon>
    <Tags />
</Group> 
```

我正在尝试使用此命令打印所有`<Notes />`内容`</Icon>`：

```
$ sed -n '/\<Notes \/\>/ p' file.xml 
```

请注意，我正在转义左括号和右括号以及右括号之前的正斜杠。这不会返回任何匹配项，我觉得这很奇怪。

更奇怪的是这个命令有效：

```
$ sed -n '/<Notes \/>/ p' file.xml 
```

为什么这个命令有效，因为我没有转义左括号和右括号？

**编辑**

ruakh 很有帮助地指出 sed 有不同的实现，并且不需要转义左括号和右括号（我认为 sed 使用 Perl 语法进行正则表达式）。我发现另一个关于 Unix 和 Linux 的帖子也很有帮助：[https ://unix.stackexchange.com/questions/32907/what-c​​haracters-do-i-need-to-escape-when-using-sed-in-a -sh脚本](https://unix.stackexchange.com/questions/32907/what-characters-do-i-need-to-escape-when-using-sed-in-a-sh-script)

现在我在匹配多行正则表达式时遇到问题。这怎么行不通？

```
$ sed -n -r '/^<Notes \/>[\S\s]*?<\/Icon>$/ p' file.xml 
```

我尝试过使用和不使用`-r`（扩展模式），使用和不使用`^`and `$`，使用`.*`而不是`[\S\s]*`，所有都没有匹配

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:01:21.033

在 sed 中，`<`并`>`没有特殊含义，但`\<`有时`\>`会：在某些*实现*中，它们表示“单词开头”和“单词结尾”。例如，这个 Bash 命令：

```
{ echo a ; echo ba ; echo b a ; } | sed -n '/\<a/ p' 
```

在某些系统上，将打印`a`and `b a`（在`a`单词的开头有一个），但不是`ba`（没有）。

（从你选择的标签来看，你可能已经习惯了 Perl？Perl 做了一个面向未来的保证`\`，当它在一个非单词字符之前时，总是会转义它。例如，`<`没有特殊含义，`\<`但是保证`<`无论如何都意味着。但并非所有正则表达式引擎都采用这种方法。）

* * *

**编辑**已编辑的问题：

Sed 一次处理一行——这是使其成为“流编辑器”的部分原因——因此多行正则表达式基本上注定要失败。但是，在您的情况下，您实际上并不需要多行正则表达式；您只想找到包含的行`<Notes />`和包含的（不同的）行`</Icon>`，并打印两者之间的所有行（包括）。为此，您可以使用地址*范围*，指定起始地址`/<Notes \/>/`和结束地址`/<\/Icon>/`：

```
sed -n '/<Notes \/>/,/<\/Icon>/ p' 
```

（参见[GNU sed 用户手册中的第](http://www.gnu.org/software/sed/manual/html_node/Addresses.html)[3.2 节“使用”选择行`sed`](http://www.gnu.org/software/sed/manual/html_node/Addresses.html)。。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:14:07.847

sed 是用于在单行上进行简单替换的出色工具，对于任何其他文本操作，您都应该使用 awk。这是一个 GNU awk 解决方案：

```
$ gawk -v RS='\0' '{print gensub(/.*(<Notes \/>.*<\/Icon>).*/,"\\1","")}' file
<Notes />
    <Date>2013-04-04</Date>
    <Expires>False</Expires>
    <Icon>7</Icon> 
```

请注意，上面仅在您要求的符号之间打印，而不是符号出现的整行。

# python - Django 对象没有使用 get_or_create() 保存用户名

> ID：15818323
> 
> 赞同：0
> 
> 时间：2013-04-04T17:56:29.243
> 
> 标签：python, django, django-models, django-forms, django-views

我正在尝试保存我的 TagStatus 对象。现在它正在保存，但它没有保存用户名，也没有保存标签外键。

它现在的节省是这样的：

```
user : __________ (empty) 
status : Status 2 
tag : _________ (empty) 
```

**我究竟做错了什么？为什么不保存用户名或标签？**提前谢谢你的帮助。

**该模型：**

```
class TagStatus(models.Model):
    user = models.ForeignKey(User, null=True, unique=True)
    status = models.CharField(max_length=2, choices=tag_statuses)
    tag = models.ForeignKey(Tag, null=True, blank=True)

    def __unicode__(self):
        return self.status

    def save(self, *args, **kwargs):
        super(TagStatus, self).save(*args, **kwargs) 
```

**我的观点：**

```
@login_required
def tags(request):
    all_tags = Tag.objects.all()
    context = base_context(request)
    if request.method == 'POST':
        if 'status_check' in request.POST:
            status = int(request.POST['select'])
            tag = request.POST['tag']
            user = request.user
            try:
                tag_status = TagStatus.objects.get_or_create(status=status, tag__slug=tag, user__username=user.username)
            except TagStatus.DoesNotExist:
                tag_status = None
            response = simplejson.dumps({"status": "Successfully changed status"})
        else:
            response = simplejson.dumps({"status": "Error"})
            return HttpResponse (response, mimetype='application/json')
    status_form = TagStatusForm()
    context['all_tags'] = all_tags
    return render_to_response('tags/tags.html', context, context_instance=RequestContext(request)) 
```

模板：

```
<form class="nice" id="status-form" method="POST" action="">
     {% csrf_token %}
     <input type="hidden" name="status_check" />
     <input type='hidden' name="tag" value="{{ tag.slug }}" />
     <select name="select" id="positionSelect" class="input-text category" onchange="this.form.submit()">
          <option name="all" value="0">Your Status</option>
          <option name="investing" value="1">Status 1</option>
          <option name="selling" value="2">Status 2</option>
          <option name="interested" value="3">Status 3</option>
     </select>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:03:02.060

您需要这样做： 更改：

```
tag_status = TagStatus.objects.get_or_create(status=status, tag__slug=tag, user__username=user.username) 
```

到：

```
tag_status, _ = TagStatus.objects.get_or_create(status=status, tag=tag, user=user, defaults={'user': user, 'tag': tag})
tag_status.save() 
```

此外，`tag`应该`Tag`例如，您可以执行以下操作：

```
tag, _ = Tag.objects.get_or_create(slug=request.POST['tag']) 
```

`slugify(request.POST['tag'])` 如果 slug是slug_field，您可以`get_or_create`返回 2 个参数 - 一个是对象，另一个是`created = True/False`描述是否创建了新对象

此外，`TagStatus.DoesNotExist`因为您正在使用，所以永远不会发生`get_or_create`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T19:13:53.490

我不知道你为什么`get_or_create`在添加新标签时使用。`get_or_create`如果您同时进行查询或保存，则必须使用。我在您的观点中看到的是您只是添加它，没有查询。那么，如果你能把它说出来，为什么你让它变得困难，

```
new_tag = Tag.object.create(slug=tag)
TagStatus.objects.create(status=status, tag=new_tag, user=user) 
```

这将解决你的问题。

```
@login_required
def tags(request):
    all_tags = Tag.objects.all()
    context = base_context(request)
    if request.method == 'POST':
        if 'status_check' in request.POST:
            status = int(request.POST['select'])
            tag = request.POST['tag']
            user = request.user

            new_tag = Tag.object.create(slug=tag)
            TagStatus.objects.create(status=status, tag=new_tag, user=user)

            response = simplejson.dumps({"status": "Successfully changed status"})
        else:
            response = simplejson.dumps({"status": "Error"})
            return HttpResponse (response, mimetype='application/json')
    status_form = TagStatusForm()
    context['all_tags'] = all_tags
    return render_to_response('tags/tags.html', context, context_instance=RequestContext(request)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:00:30.007

我不确定你的代码到底有什么问题，但这不是你应该做的。Django 表单会自动为您处理所有这些事情——表单的创建、从 post 数据到 python 数据的转换，以及保存模型。他们还做了大量的验证，这些验证真的很有帮助，你永远不会弄清楚如何去做。

请参阅 Django 表单文档：[https ://docs.djangoproject.com/en/dev/topics/forms/](https://docs.djangoproject.com/en/dev/topics/forms/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T18:12:22.783

从@user2246087 答案扩展只需添加以下内容：

```
tag.slug = request.POST['tag']
tag.save() 
```

进而

```
tag_status, created = TagStatus.objects.get_or_create(status=status, tag=tag, user=user, defaults={'user': user, 'tag': tag}) 
```

您不需要添加 TagStatus.save()

# sql - Oracle where 子句的性能不佳

> ID：15818327
> 
> 赞同：4
> 
> 时间：2013-04-04T17:56:46.653
> 
> 标签：sql, database, performance, oracle, oracle11g

我有以下 Oracle 表：

```
create table my_table(
   start int,
   end int
);

insert into my_table values(1, 3);
insert into my_table values(5, 7);
insert into my_table values(11, 200);
insert into my_table values(311, 5000);
insert into my_table values(60004, 60024);
insert into my_table values(123213, 12312312); 
```

该表有 1M 行并存储数字范围（'start'，'end'），所有数字都是唯一的，它没有重复的范围，任何数字只能在此表中的一个范围内，我有以下查询通过变量 my_number 来标识范围的“开始”。

```
 execute immediate 
    'select start from my_table where :1 between start and end' using my_number 
```

我已经在这两个字段上建立了组合索引。问题是当my_number 小时，查询性能很好，但是当my_number 增加时，查询时间不断增加。如果 my_number 大得多，则需要相当长的时间才能完成。有人有办法改进这个查询吗？方法可以包括重新设计 my_table。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:02:04.963

如果您将架构更改为此：

```
create table my_table(
   start int,
   range_size int
);

insert into my_table values(1, 2);
insert into my_table values(5, 2);
insert into my_table values(11, 189);
insert into my_table values(311, 4689);
insert into my_table values(60004, 20);
insert into my_table values(123213, 12300001); 
```

然后你可以只在`start`列上建立索引。

```
execute immediate 
    'select start from (select start, range_size from my_table where start < :1 order by start asc limit 1) tmp where :1 < start+range_size' using my_number 
```

这可能会有一些性能提升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:03:35.220

你这样做了吗？

```
create table my_table(
start int,
end int
constraint PK_comp primary key (start, end)
) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T04:58:48.950

为每一列创建一个索引并使用这个查询：

```
select start_num
from my_table
where
    start_num =
    (
        --Last start <= number
        select start_num
        from
        (
            select start_num
            from my_table
            where :1 >= start_num
            order by start_num desc
        )
        where rownum = 1
    ) and
    end_num =
    (
        --First end >= number
        select end_num
        from
        (
            select end_num
            from my_table
            where :1 <= end_num
            order by end_num
        )
        where rownum = 1
    ); 
```

呸。可能有更好的方法来写这个。或者您可能希望将其包装在一个函数中。

**问题**

测试数据（带有非保留字列名）：

```
drop table my_table;
create table my_table(
   start_num int,
   end_num int
);
insert into my_table select level*2,level*2+1 from dual connect by level <= 1000000;
commit;
create index my_table_index on my_table(start_num, end_num);
begin
    dbms_stats.gather_table_stats(user, 'MY_TABLE', no_invalidate => false);
end;
/ 
```

低数字几乎是瞬时的 - 0.015 秒

```
select start_num from my_table where 2 between start_num and end_num; 
```

数字越大越慢 - 0.125 秒

```
select start_num from my_table where 1000000 between start_num and end_num; 
```

范围扫描和全表扫描之间只有一个点。

```
explain plan for select start_num from my_table where 402741 between start_num and end_num;
select * from table(dbms_xplan.display);

Plan hash value: 3804444429

------------------------------------------------------------------------------
| Id  | Operation         | Name     | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |          |   160K|  1570K|   622   (2)| 00:00:08 |
|*  1 |  TABLE ACCESS FULL| MY_TABLE |   160K|  1570K|   622   (2)| 00:00:08 |
------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("START_NUM"<=402742 AND "END_NUM">=402742)

explain plan for select start_num from my_table where 402742 between start_num and end_num;
select * from table(dbms_xplan.display);

Plan hash value: 3804444429

------------------------------------------------------------------------------
| Id  | Operation         | Name     | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |          |   160K|  1570K|   622   (2)| 00:00:08 |
|*  1 |  TABLE ACCESS FULL| MY_TABLE |   160K|  1570K|   622   (2)| 00:00:08 |
------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("START_NUM"<=402742 AND "END_NUM">=402742) 
```

但问题不在于 Oracle 不使用索引。以幼稚的方式使用索引并没有帮助。事实上，这甚至更慢，为 0.172 秒：

```
select /*+ index(my_table my_table_index) */ start_num
from my_table
where 1000000 between start_num and end_num; 
```

**解决方案**

创建新索引：

```
drop index my_table_index;
create index my_table_index1 on my_table(start_num);
create index my_table_index2 on my_table(end_num);
begin
    dbms_stats.gather_table_stats(user, 'MY_TABLE', no_invalidate => false);
end;
/ 
```

对于任何数字，结果都是即时的：

```
select start_num
from my_table
where
    start_num =
    (
        --Last start <= number
        select start_num
        from
        (
            select start_num
            from my_table
            where 1000000 >= start_num
            order by start_num desc
        )
        where rownum = 1
    ) and
    end_num =
    (
        --First end >= number
        select end_num
        from
        (
            select end_num
            from my_table
            where 1000000 <= end_num
            order by end_num
        )
        where rownum = 1
    ); 
```

该计划看起来很棒 - 这可能是您可以获得的最佳性能。

```
Plan hash value: 522166032

--------------------------------------------------------------------------------------------------
| Id  | Operation                      | Name            | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT               |                 |     1 |    10 |    10   (0)| 00:00:01 |
|*  1 |  TABLE ACCESS BY INDEX ROWID   | MY_TABLE        |     1 |    10 |     4   (0)| 00:00:01 |
|*  2 |   INDEX RANGE SCAN             | MY_TABLE_INDEX2 |     1 |       |     3   (0)| 00:00:01 |
|*  3 |    COUNT STOPKEY               |                 |       |       |            |          |
|   4 |     VIEW                       |                 |     3 |    39 |     3   (0)| 00:00:01 |
|*  5 |      INDEX RANGE SCAN          | MY_TABLE_INDEX2 |     3 |    18 |     3   (0)| 00:00:01 |
|*  6 |   COUNT STOPKEY                |                 |       |       |            |          |
|   7 |    VIEW                        |                 |     2 |    26 |     3   (0)| 00:00:01 |
|*  8 |     INDEX RANGE SCAN DESCENDING| MY_TABLE_INDEX1 |   500K|  2929K|     3   (0)| 00:00:01 |
--------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("START_NUM"= (SELECT "START_NUM" FROM  (SELECT "START_NUM" "START_NUM" FROM 
              "MY_TABLE" "MY_TABLE" WHERE "START_NUM"<=1000000 ORDER BY "START_NUM" DESC) 
              "from$_subquery$_002" WHERE ROWNUM=1))
   2 - access("END_NUM"= (SELECT "END_NUM" FROM  (SELECT "END_NUM" "END_NUM" FROM 
              "MY_TABLE" "MY_TABLE" WHERE "END_NUM">=1000000 ORDER BY "END_NUM") "from$_subquery$_004" 
              WHERE ROWNUM=1))
   3 - filter(ROWNUM=1)
   5 - access("END_NUM">=1000000)
   6 - filter(ROWNUM=1)
   8 - access("START_NUM"<=1000000) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T05:15:02.887

这是一个试图欺骗甲骨文使其表现得像其竞争对手一样的案例，而我只是猜测无法访问甲骨文。也许自我加入可以做到这一点？*分别*在每列上使用索引，

```
SELECT t1.start
FROM my_table t1 JOIN my_table t2
ON t1.start=t2.start AND t2."end"=t1."end"
AND t1.start <= :1
AND t2.end >= :1 
```

这看起来很傻，但直接的解决方案是 Joe Frambach 的。它愚弄了我确实拥有的 Postgres，只进行索引搜索。

`end`顺便说一句，Postgres 对作为列名非常不满意。我希望你的真实表不在那里使用保留字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T19:31:55.940

我认为您应该创建 2 个索引，一个在开始列上，一个在结束列上。然后不要选择 between 选项，而是选择大于然后开始和小于然后结束的位置。然后，您将为每个 where 子句使用一个索引。

我希望这有助于提高性能。

# python - Python：如何使用 Paramiko 从我的本地 pc 远程到 remoteA 到 remoteb 到远程 c

> ID：15818328
> 
> 赞同：0
> 
> 时间：2013-04-04T17:56:51.017
> 
> 标签：python, paramiko

我想知道如何使用 paramiko 从一个远程服务器跳转到另一个远程服务器。我想从我的本地电脑 ssh 到远程 A，然后从远程 A 到远程 B，从远程 B 到远程 C。

```
import paramiko
def connect(ip, usr, psw):
 client = paramiko.SSHClient()
 client.load_host_keys('/home/dgomez/.ssh/known_hosts')
 client.connect(ip, username=usr, password=psw)
 return client

host1 = connect('192.168.1.2', 'username', 'password')
# Here I'm connect to remote-A 
```

现在我想知道如何从 Remote-A 连接到 Remote-B。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:59:31.850

用于 pexpect 模块，它对您非常有用[http://www.noah.org/wiki/pexpect](http://www.noah.org/wiki/pexpect) 并且在 pxssh 模块中简化的 pexpect 模块非常适合远程登录[http://dsnra.jpl.nasa.gov/software /Python/site-packages/Contrib/pxssh.html](http://dsnra.jpl.nasa.gov/software/Python/site-packages/Contrib/pxssh.html) 简单代码：

```
import pxssh
host = pxssh.pxssh
host.login('hostname','username','password')
host.sendline('command')#'ls'
print host.before 
```

# ios - 使用自动布局将 UIView 连接到 UIToolbar

> ID：15818332
> 
> 赞同：0
> 
> 时间：2013-04-04T17:56:58.397
> 
> 标签：ios, ios5, ios6, autolayout

我试图将 UIView 与容器视图（UIScroolView）的底部和工具栏上方对齐。它在设计到 iphone 3.5 显示器时完美运行，但是当我的布局更改为 4.0 显示器时，我的视图不会对齐到底部，而是保持在与 UIToolbar 有间隙的相同位置。

![iPhone 3.5 显示屏](https://i.stack.imgur.com/tbMfo.png)

![iPhone 4.0 显示屏](https://i.stack.imgur.com/HoHKz.png)

我检查了一下，我意识到我有一个带有常量的垂直空间约束，我认为这就是为什么我的视图总是停留在同一个地方，问题是我无法摆脱这个约束，我想知道是否有人可以帮我解决这个问题。

![约束](https://i.stack.imgur.com/zueL5.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:11:41.673

I think you need to add a height constraint to the toolbar. If you have that and a zero length vertical spacing constraint between the toolbar and scroll view, you should be able to delete that constraint to the top of the super view.

# c++ - 由于对 RegOpenKeyEx 的调用而导致的一长串依赖项正常吗？

> ID：15818336
> 
> 赞同：3
> 
> 时间：2013-04-04T17:57:07.410
> 
> 标签：c++, winapi, dll, dependencies

我已经编写了一个小驱动程序 DLL，我希望将其部署在很多 XP 机器上，其中一些机器肯定会缺少 dll 等。直到今天我的 Dll 只依赖于 KERNAL32.DLL，我很高兴。我刚刚添加了对 RegOpenKeyEx 的调用，因为我需要知道注册表 kex 存在并且突然 Dependency walker 列出了对 ADVAPI32.DLL 的依赖关系，而 ADVAPI32.DLL 又依赖于许多 dll。

这是否让我担心我现在依赖 100 多个 DLL，或者这只会在系统损坏到无法运行的情况下导致问题？

有没有办法以较少的依赖项读取注册表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:59:18.400

`advapi32.dll`它的所有依赖项都内置在 Windows 中。

您无需担心；如果这些 DLL 丢失，什么都不会起作用。

（请注意，您不得尝试安装任何这些 DLL - 这会*导致*问题，而不是解决问题！）

# css - 在 IE9 中溢出-y hidden 删除所有滚动条

> ID：15818337
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:57:09.517
> 
> 标签：css, internet-explorer-9, overflow

是否有任何已知原因 overflow-y: hidden 会删除 IE9 中的所有滚动条？

我把它放在一个只有 IE9 的样式表中，如下所示：

```
body,html {
    overflow-x: auto !important;
    overflow-y: hidden !important;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T15:02:14.467

我是个天才，我的 x 和 y 互换了。对于看到这一点的未来开发人员。睡吧，真的很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:03:26.423

overflow:hidden 属性将隐藏任何将流出元素框模型的正常边界的内容。在这种情况下，您将其设置为 html，因此任何溢出的内容都会隐藏而不是滚动条。试一试，看看它是如何工作的：

```
html, body {
    overflow-x: auto;
    overflow-y: scroll;
} 
```

这是一篇关于所有可用溢出属性及其工作原理的精彩文章：http: [//css-tricks.com/the-css-overflow-property/](http://css-tricks.com/the-css-overflow-property/)

# php - jQuery .post() 在 Cake PHP 中刷新页面 PHP 变量而不会出现白化

> ID：15818338
> 
> 赞同：0
> 
> 时间：2013-04-04T17:57:09.280
> 
> 标签：php, jquery, cakephp

我遇到了一个问题，我即将伤害 MVC 范式，所以我宁愿问你该怎么做。我得到了一个使用 jQuery .post() 方法每 10 秒刷新一次的页面。

```
setInterval(function() {
    $.post("http://XYZ.de<?php echo $this->webroot."Posts/index"; ?>", { liveUpdate: "true" },
        function(response) {
            $('#loadingContent').html(response);
        }
    );
}, 10000); 
```

现在，放置“帖子/索引”的位置我必须调用 Cake 的 PostsController.php，它允许我重置变量。

但它不是那样工作的，响应中充满了正常页面调用的所有 html，但我只想更新纯 PHP 变量，而不将 html 附加到该 div。

我究竟做错了什么？提前感谢您的耐心等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:07:47.533

由于您的数组是复杂的多级数组并且您不想解析 JSON，因此我认为这样做的唯一方法是使用 jQuery load()。

```
setInterval(function() {
  jQuery("#RefreshMeOnPage")
    .load("http://XYZ.de<?php echo $this->webroot."Posts/index"; ?> #RefreshMeInResults > *", {liveUpdate: "true"});
  }, 10000); 
```

它将向服务器发出 post 请求，并用`RefreshMeOnPage`新收到的 id 元素的内容替换现有元素的内容 id `RefreshMeInResults`。文档[http://api.jquery.com/load/](http://api.jquery.com/load/)。

注意：仍然刷新率为 10 秒，我认为您应该研究 ajax comet 解决方案[http://cometdaily.com/maturity.html](http://cometdaily.com/maturity.html)。它只会在发生变化时接收数据，尽管它需要一些配置。

# c - 帕斯卡三角

> ID：15818341
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:57:23.670
> 
> 标签：c

我正在尝试编写用于打印帕斯卡三角形的代码。我编写了以下程序，但输出格式与我想要完成的不同。

**代码清单**

* * *

```
void main(){
    int a[15][15],row,num=25,i,j,k;
    clrscr();
    printf("Enter Num of rows");
    scanf("%d",&row);
    for(i=0;i<row;i++){
        for(k=num-2*i;k>=0;k--)
            printf("");

        for(j=0;j<=i;j++){
            if(j==0||i==j){
                a[i][j]=1;
            }else{
                a[i][j]=a[i-1][j-1]+a[i-1][j];
            }
            printf("%6d",a[i][j]);

        }
        printf("\n");
    }
    getch();
} 
```

**样本输出**

* * *

```
1
1 1
1 2 1
1 3 3 1 
```

上面的输出不是我想要的。我正在尝试实现以下结果：

```
 1
    1   1
  1   2   1
1   3   3   1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:07:37.393

问题在于你的`printf("");`陈述

通过`printf(" ");`添加空格来实现。

您的原始`printf("");`语句不会对输出格式进行任何更改。

as`printf(" ");`在循环的每次迭代中打印一个空格，

```
for(k=num-2*i;k>=0;k--) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:07:10.280

尝试替换`printf("");`为`printf(" ");`

（区别是引号之间的空格）

# java - 图像未显示在 Jar 中

> ID：15818348
> 
> 赞同：0
> 
> 时间：2013-04-04T17:57:51.420
> 
> 标签：java, eclipse, jar, packages, embedded-resource

我的程序在 Eclipse 中完美运行，但是当我导出它时，图像不显示。

我的设置看起来像

```
src
..gui
....Main.java
....menus
......MenuMain.java
res
...Logo.png 
```

我从 MenuMain.java 引用 Logo.png，我尝试了很多方法；

*   `res/Logo.png`
*   `/res/Logo.png`
*   `.res/Logo.png`
*   `../../Logo.png`
*   ++++

前 3 个在 Eclipse 中工作，但在 Jar 中均不工作。我检查了 Jar 文件，res 文件夹在那里，所有的图像也在那里。我还尝试编辑 MANIFEST.MF 并添加了 Class-Path：

但它仍然不起作用。运行 Jar 时我没有收到任何错误，其他所有内容都显示文件（按钮、标签、++）

编辑：我使用这是带有 GridBagLayout 的 JPanel，我将 ImageIcon 添加到 JLabel 以便能够将其添加到 JPanel。最初我使用了类似的东西：

```
JLabel logo = new JLabel(new ImageIcon("res/Logo.png")); 
```

但我也尝试了其他变体，例如：

```
JLabel logo = new JLabel(new ImageIcon(MenuMain.class.getClassLoader().getResource("/res/Logo.png"))); 
```

并且还通过`getResourceAsStream()`

只有第一个在 Eclipse 中有效，但没有出现在 Jar 中。其他人只是崩溃（NullPointer）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:59:59.747

您需要在 jar 中包含 Logo.png，并使用从类路径加载资源[`ClassLoader.getResourceAsStream()`](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)

一般模式是：

```
...
InputStream resource = className.class.getResourceAsStream("/res/Logo.png");
Image image = ImageIO.read(resource);
// do your display stuff here...
... 
```

# c# - 使用 Web 控件进行阴暗练习

> ID：15818353
> 
> 赞同：0
> 
> 时间：2013-04-04T17:58:14.473
> 
> 标签：c#, asp.net, sharepoint-2010, web-controls

我创建了一个自定义 Web 控件，我必须将其嵌入到 SharePoint 内的页面布局中。基本上，页面布局将仅由内部带有网络表单的页面使用，并且控件充当一种导航菜单来跟踪表单页面的进度。

现在，我知道该控件将始终只声明一次，并且它必须可由表单页面访问。我没有从表单页面中查找父级的控件集合，而是这样做了。

```
 public static QuickNavigation Self
    {
        get
        {
            return System.Web.HttpContext.Current.Items["QuickNavigation"] as QuickNavigation;
        }
        private set
        {
            System.Web.HttpContext.Current.Items["QuickNavigation"] = value;
        }
    }

    public QuickNavigation()
    {
        Self = this;
    } 
```

为了从表单页面访问控件实例，我调用了类的唯一静态属性。你怎么看，有没有更好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:26:43.653

它可以工作，但在我看来，需要一个控件的引用才能在其他控件中有一些业务逻辑，这似乎很奇怪。

您是否考虑过将代码与业务控制器和单独的 UI 视图等服务分离。在这种情况下，您将所有 UI 视图插入到业务控制器中，并且不需要任何控件来控制引用。在这种情况下，分享您的状态的最佳位置是 Items 集合，以便您可以保留这种做法。

# java - 使用 PowerMock 抑制同一类中的 void 静态方法和静态方法

> ID：15818359
> 
> 赞同：0
> 
> 时间：2013-04-04T17:58:36.320
> 
> 标签：java, junit, mocking, powermock

我目前正在尝试使用 PowerMock 1.4.10 对一些遗留代码进行一些单元测试，并且我正在尝试测试一种同时具有静态 void 调用和静态非 void 调用的方法。有没有办法在抑制静态 void 调用的同时模拟静态非 void 调用？

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(ClassUnderTest.class)
public class TestClass {

    @Test
    public void test() {
        MemberModifier.suppress(StaticClass.class.getDeclaredMethod("logRandom"));

        PowerMock.mockStatic(StaticClass.class);
        expect(StaticClass.isLogOn()).andReturn(true);
        PowerMock.replay(StaticClass.class);

        ClassUnderTest test = new ClassUnderTest();
        test.methodToTest();

        assertTrue(test.tested);

        PowerMock.verify(StaticClass.class);
    }
}

public class ClassUnderTest {
    public boolean tested = false;

    public void methodToTest() {
        if (StaticClass.isLogOn()) {
            StaticClass.logRandom();
        }
    }

}

public class StaticClass {

    public static void logRandom() {
        System.out.println("Do something");
    }

    public static boolean isLogOn() {
        return (Math.random() > .5);
    }
} 
```

但是当我尝试这样做时，我得到以下 stackTrace：

```
java.lang.IllegalStateException: no last call on a mock available
    at org.easymock.EasyMock.getControlForLastCall(EasyMock.java:521)
    at org.easymock.EasyMock.expect(EasyMock.java:499)
    at TestClass.test(TestClass.java:20)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:307)
    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:88)
    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:96)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:294)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:282)
    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:86)
    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:207)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:146)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:120)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:33)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:45)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:118)
    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:102)
    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

有没有人对如何处理这个问题有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:53:07.220

我使用 PowerMock 和 Mockito 的组合（称为 PowerMockito）成功地测试了静力学。`PowerMockito.mockStatic`您将使用而不是版本来模拟您的静态调用`PowerMock`。完成后，您可以打电话`Mockito.when`来处理电话。

```
PowerMockito.mockStatic(StaticClass.class);
Mockito.when(StaticClass.isLogOn()).thenReturn(true); 
```

当测试运行时，当它到达测试执行时`if (StaticClass.isLogOn()) {`，模拟应该介入并返回 true，这将进入调用`logRandom`. 从这里，您可以尝试使用`spy`让它调用实际代码，或者您可以`logRandom`根据需要模拟该调用。您可以`spy`在[PowerMocktio 页面](http://code.google.com/p/powermock/wiki/MockitoUsage13)下找到有关使用模拟的更多信息`Partial Mocking`。

# php - 如何在页面加载后继续检查 PHP 条件

> ID：15818360
> 
> 赞同：1
> 
> 时间：2013-04-04T17:58:37.227
> 
> 标签：php, html

我有一个搜索框，当用户在加载结果页面时点击提交按钮后，我想显示某种进度指示器。我能找到的最简单的是：

```
while ( $something == true ) {
  // Echo an extra dot, and flush the buffers
  // to ensure it gets displayed.
  echo ' .';
  flush();

  // Now sleep for 1 second and check again:
  sleep(1);
} 
```

我想 $something 应该只是用户是否已经提交了搜索表单。问题在于上面的 PHP 代码不会知道这一点，因为页面已经完成加载。

只有在用户提交搜索表单后，我才能让 PHP 执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:00:43.347

你不能。您需要为此使用 JavaScript（可能还有 AJAX 与服务器端代码交互）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:05:55.027

PHP 是一种服务器端语言，因此它无法看到浏览器中发生了什么。我只会响应浏览器发出的请求。有两种方法可以实现我认为你所追求的。

**ajax 方式：**
要获得某种实时反馈，您将需要一种客户端语言，即 Javascript。我建议你看看[jQuery](http://jquery.com/)，一个相当容易理解的 javascript 库。更具体地说，您可能需要[`$.ajax`](http://api.jquery.com/jQuery.ajax/)方法和[`.submit`](http://api.jquery.com/submit/)事件

**PHP方式：**
您也可以让您的表单提交到搜索表单所在的同一php页面，然后通过检查表单变量是否存在来检测表单是否已提交。像这样的东西：

```
if (array_key_exists('search', $_REQUEST) {
 // the form has been submitted
}
else  {
 // the form is not yet submitted
} 
```

那是假设您表单中的搜索框的名称为“搜索”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:08:29.770

使用 jQuery：

```
$('#submit').click(function(e)){
    e.preventDefault();
    $.ajax({
        type: "POST",
        url: "path/to/php/action",
        dataType: "json"
    }).done(function(data){
         while(data.action == 'waiting'){
             $('.somePageClass').html('<p>...</p>');
         }else{
             $('.somePageClass').html('your results');
         }
    });
}); 
```

类似使用 ajax 调用 php 函数的东西，您的 php 函数将必须检查您的等待或完成并返回 data.action。

这可能不完全正确，但这是一种尝试（至少在正确的方向上）。

# android - Android - 启动画面，无需为主 UI 创建另一个线程

> ID：15818361
> 
> 赞同：0
> 
> 时间：2013-04-04T17:58:42.817
> 
> 标签：android, multithreading, screen, splash-screen

这是我的第一个问题，我还是一个 Android 菜鸟（希望如此），所以如果我问愚蠢的问题，请尽量原谅我。

我正在开发一个 Android 应用程序，我必须制作一个启动画面。我用这个答案做了一个：[如何制作启动画面？](https://stackoverflow.com/questions/5486789/how-do-i-make-a-splash-screen-in-android). 它工作得很好，但是......这个解决方案为应用程序的其余部分创建了另一个大线程，我试图避免这种情况 - 我认为它会减慢整个应用程序（另一个应用程序线程）。我对吗？

我试图反转整个过程 - 我正在调用 MainMenu 活动，然后为启动创建另一个线程：

```
public class MainMenu extends Activity implements OnItemClickListener { 

private GridView gridView;
private AlertDialog.Builder dialog;
private Intent intent;
private ApplicationPreferences prefs;

@Override
protected void onCreate(Bundle savedInstanceState) {
    prefs = new ApplicationPreferences(this);
    setTheme(prefs.GetApplitacionTheme());
    SQLDatabase.onCreate();

    if (prefs.SplashScreenEnabled()) {
        new Runnable() {

            @Override
            public void run() {
                startActivity(new Intent(MainMenu.this, SplashScreen.class));                   
            }
        }.run();
    }

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_menu);
    gridView = (GridView)findViewById(R.id.gridView);
    gridView.setAdapter(new AdapterMainMenu(this));
    gridView.setOnItemClickListener(this);
} 
```

然后在我的 SplashScreen 活动中：

```
public class SplashScreen extends Activity {

private Locale locale;
private Configuration config;
private ApplicationPreferences prefs;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash_screen);
}

@Override
protected void onResume() {
    try {
        Thread.sleep(2500);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    finish();               
} 
```

在 onCreate() Android 调用 onResume() 之后，我决定在这里暂停线程并在完成活动之后。

当应用程序回到主线程时它崩溃了，我不知道为什么。我究竟做错了什么？

提前致谢！安吉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:06:40.730

您不想调用`Thread.sleep()`，`onResume()`因为这会阻塞 UI 线程。您首先尝试的解决方案`Handler.postDelayed()`绝对是首选方式。为什么你认为它会创建一个“大”线程？`Runnable.run()`实际上是使用该解决方案在主 UI 线程中调用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:15:07.173

您可以使用计时器和处理程序，如下所示

```
public class SplashScreen extends Activity{

Timer splashTimer;
SplashTimerHandler splashTimerHandler;

private boolean applicationPaused=false;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.main);

    this.setSplash();

}

private void setSplash() 
{
    this.splashTimerHandler=new SplashTimerHandler();
    this.splashTimer=new Timer();

    this.splashTimer.schedule(this.splashTimerHandler, 0, 1000);

}

@Override
public void onPause()
{
    super.onPause();
    this.applicationPaused=true;
    this.closeSplashTimer();
}

@Override
public void onResume()
{
    super.onResume();

    if(this.applicationPaused)
    {
        this.applicationPaused=false;
        this.closeSplashTimer();
        this.setSplash();
    }
}

public class SplashTimerHandler extends TimerTask{

    int splashTimerCounter=0;
    @Override
    public void run()
    {
        splashTimerCounter++;
        if(splashTimerCounter>2)
        {
            runOnUiThread(splashTimeOver);
        }       
    }

    private Runnable splashTimeOver=new Runnable() {

        @Override
        public void run()
        {
            closeSplashTimer();
            startHomeScreen();
        }
    };      
}

protected void closeSplashTimer() 
{
    if(this.splashTimer!=null)
    {
        this.splashTimer.cancel();
        this.splashTimer=null;
    }

}

private void startHomeScreen() 
{
    this.closeSplashScreen();
    startActivity(new Intent("com.example.MainActivity"));

}

private void closeSplashScreen()
{
    this.closeSplashTimer();
    this.finish();

}

@Override
public boolean onKeyDown(int keycode, KeyEvent event)
{
    if(keycode==KeyEvent.KEYCODE_BACK)
    {
        this.closeSplashScreen();
    }
    return true;
}

} 
```

# jquery - 广告创意库中心缩略图

> ID：15818362
> 
> 赞同：0
> 
> 时间：2013-04-04T17:58:43.523
> 
> 标签：jquery, html-lists, gallery, center

我正在为我的图片库使用 jquery 广告库。我想知道是否有办法使胶片或缩略图居中？例如，只有一张图像，它应该出现在中心，而不是左侧。提前致谢！:) 插件 Jquery 页面[http://coffeescripter.com/2009/07/ad-gallery-a-jquery-gallery-plugin/](http://coffeescripter.com/2009/07/ad-gallery-a-jquery-gallery-plugin/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T23:08:00.343

更改 jquery.ad-gallery.css 中的以下两个类：

```
 .ad-gallery .ad-thumbs .ad-thumb-list {
    /*float:left;*/
    width: 9000px;
    list-style: none;
    text-align:center;
  }
    .ad-gallery .ad-thumbs li {
       display:inline-block;
       /*float:left;*/
       padding-right: 5px;
    } 
```

# iis - VS 2012 基于错误路径启动应用程序

> ID：15818364
> 
> 赞同：21
> 
> 时间：2013-04-04T17:58:47.930
> 
> 标签：iis, version-control, visual-studio-2012, iis-express

我在 c:\Dev\MyApp\Main 上有一个受源代码控制（TFS 2012 也是）的应用程序。

因为我正在开发一个新功能，所以我决定在 c:\Dev\MyApp\BranchNewFeature 上开设一个分支。

我开发了，当我决定是时候测试它就像我根本没有做任何改变一样。我按 F5 并看到了应用程序的基线版本...查看它我注意到一个非常奇怪的事实：当我检查 IIS Express 时，应用程序的“启动路径”是旧的（c:\Dev\MyApp\主要的）。

谁能帮我让 IIS Express 指向新路径？(C:\Dev\MyApp\BranchNewFeature)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-18T00:47:35.560

我遇到了同样的问题。为了修复它，我使用了[cheesemacfly](https://stackoverflow.com/users/1443490/cheesemacfly)的建议来更新`C:\Users\%USERNAME%\Documents\IISExpress\config\applicationhost.config`以指向新目录。

此解决方案的明显缺点是，如果您计划经常在新分支之间切换，则需要重复执行此操作。似乎是VS2012中的一个错误......

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-18T15:35:34.160

重新启动 VS 似乎可以解决此问题。这只是一种替代解决方案，就像所有 Windows 产品的规范一样 - 关闭并重新启动，然后繁荣它会工作！

事情是这样的：在我使用 VS2013 在一个分支中处理一个 Web 项目后，我遇到了同样的问题。正如上面提到的 Chris Gillum，我在重新启动 VS 时打开了 applicationhost.config，并且该文件使用正确的路径自动刷新。所以，这绝对是 Visual Studio 中的一个错误。

**更新：**

自从我发布这个答案以来，我已经多次看到这个问题。而且我找到了重新启动VS的替代方法。这是我现在要做的：

1.  右键单击 IISExpress 图标，然后单击“显示所有应用程序”
2.  从列表中选择站点名称
3.  单击（并打开）配置文件
4.  在以下部分中搜索并修复工作区的物理路径：

    ```
    <sites>
        <site name="MyWebSite" id="XXX">
            <virtualDirectory path="/" physicalPath="FIX_THIS_PATH" />
        </site>
    <sites> 
    ```

IISExpress会自动刷新站点，不需要重启VS。希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-17T18:54:08.733

如果您在 Visual Studio 2015 中搜索相同的问题，applicationhost.config 文件已移至隐藏文件夹：$SolutionDirectory/.vs/config。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-02T13:23:43.813

当您打开包含 IISExpress Web 项目的 Visual Studio 解决方案时，applicationHost.config`<site>`元素配置会更新。如果您随后为单独的分支打开解决方案，则`<site>`配置可能会被覆盖以指向该单独的分支。

例如，假设您有一个解决方案的两个分支，其中包含一个配置为在端口 4000 上使用 IISExpress 的 Web 项目。当您打开 Branch1 的解决方案时，applicationHost.config 将使用`<site>`在 localhost:4000 指向的注册站点的元素进行更新到 Branch1 的文件夹。当您“开始调试”您的解决方案时，您的浏览器会打开 localhost:4000 并且一切正常。

如果您随后打开 Branch2 的解决方案，将再次修改 applicationHost.config，覆盖该`<site>`元素，以便 localhost:4000 现在指向 Branch2。现在，如果您在打开的 Branch1 解决方案或打开的 Branch2 解决方案中“开始调试”，则 localhost:4000 将指向 Branch2，因为这就是 applicationHost.config 文件中的内容。

要解决此问题，请将两个分支配置为使用不同的端口，然后 Visual Studio 将管理两个单独的 applicationHost.config`<site>`元素，每个分支一个。每次创建新分支时，您都需要记住配置一个新的端口号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-12T10:27:34.407

我有类似的情况，我复制了一个项目。运行项目后，它会在浏览器中显示原始项目，而不是我复制、编辑的版本。我的解决方案是从配置文件中删除所有受影响的站点：

`C:\Users\%USERNAME%\Documents\IISExpress\config\applicationhost.config`

然后我不得不右键单击 Visual Studio 中的项目，单击`Properties`然后单击`Web`选项卡，在此选项卡上我更改了指定的端口`Project Url`并保存。Visual Studio 然后询问我是否要将项目添加回应用程序主机配置文件。我单击是并运行该项目，突然一切都很好。

我的特殊问题不是 Visual Studio 中的错误，而是配置不匹配。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-24T17:47:46.790

当我找到这篇文章时，我遇到了类似的情况，并且正在寻找答案。我考虑过应用这个修复，但觉得每次需要再次分支或合并时都要付出很多努力。

我做了更多的挖掘，我相信我找到了一个更简单的解决方法。我发现在 Visual Studio 2013 中，如果您打开项目的属性，然后单击 Web 选项，您将看到一个带有“创建虚拟目录”按钮的服务器部分。

如果你点击这个按钮，它会提示你一个关于它指向一个不同的目录然后项目所在的问题，想要修复它。当您单击是时，它会为您进行修复，并且当您现在调试时，它将从正确的位置拉出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-14T13:15:40.090

在 VS 2015 中，我不必直接编辑配置文件。我打开了分支项目并转到项目下的属性页面。转到 Web 选项卡并编辑服务器 > 项目 URL。

# c# - WPF将FlowDocumentScrollViewer中的当前选择获取到CommandParameter中

> ID：15818369
> 
> 赞同：0
> 
> 时间：2013-04-04T17:58:51.117
> 
> 标签：c#, wpf, mvvm, contextmenu, commandparameter

尝试将流查看器中的选定文本作为参数获取到命令

```
 <FlowDocumentScrollViewer Name="_OutputBox">
    <FlowDocument>
       <FlowDocument.ContextMenu >
           <ContextMenu>
               <MenuItem Header="New"
                  Command="{Binding AddDefaultTriggerCommand}" 
                  CommandParameter="{Binding ElementName=_OutputBox, Path=Selection}">
               </MenuItem>
           </ContextMenu>
       </FlowDocument.ContextMenu>
    </FlowDocument>
 </FlowDocumentScrollViewer> 
```

在模型类中：

```
 private RelayCommand<System.Windows.Documents.TextSelection> _AddDefaultTriggerCommand;

 public ICommand AddDefaultTriggerCommand
 {
     get
     {
         ...
         this._AddDefaultTriggerCommand = new RelayCommand<TextSelection>(
                     AddDefaultTriggerCommandExecuted,...)
         ...
     }
 } 
```

问题是传递给处理程序的参数**始终为 null**：

```
 private void AddDefaultTriggerCommandExecuted(System.Windows.Documents.TextSelection parameter)... 
```

我错过了什么吗？标准的 windows Copy 命令如何获取选定的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:25:01.990

是的，因为你没有传递参数。添加一个 lambda 表达式，它应该可以工作：

```
this._AddDefaultTriggerCommand = new RelayCommand<TextSelection>(
                 param => AddDefaultTriggerCommandExecuted(param)) 
```

# javascript - JS：如果地址中的 url 相等，则发布到 MULTIPLE div

> ID：15818370
> 
> 赞同：1
> 
> 时间：2013-04-04T17:58:57.953
> 
> 标签：javascript, url, html

我又回来了，因为一个实际的问题而火了（所以我不会再被激怒了）。我刚刚发布了一个关于我需要什么的抽象概念，我得到了一些很棒的即时帮助。现在，是时候把它归结起来了。

此代码有效，但是，**它不适用于多个页面**，我不确定为什么。

```
 $(document).ready(function() {
    var url = window.location.href;
    if(url == "http://www.promilitarybusinessnetwork.com/continueSearch.asp?categoryID=108") {
        $('#website').html('<p>This is the Apartments Category page</p>');
    } else {
        $('#website').empty();
    }});

    $(document).ready(function() {
    var url = window.location.href;
    if(url == "http://www.promilitarybusinessnetwork.com/continueSearch.asp?categoryID=13") {
        $('#website').html('<p>This is the Business Category page</p>');
    } else {
        $('#website').empty();
    }}); 
```

当多个实例发生时，上面的代码不起作用。因此，如果我删除了 BUSINESS 类别代码，而只是离开了 APARTMENTS 类别，那么公寓就可以使用。业务代码反之亦然。

**就目前而言，当我将它们都放在一边时，如上所示，业务类别是唯一显示的类别。**

你可以在这里看到我想要完成的事情：

[http://www.promilitarybusinessnetwork.com/](http://www.promilitarybusinessnetwork.com/)

我正在修改和更新我接管的这个网站。“容器”与标题一起是实心的，但页面需要帮助。这就是我想要做的，但我需要让它 100% 工作，然后才能深入设计它。网站使用的是 ASP，所以很棘手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:08:56.193

使用`if`/ `else if`/ `else`：

```
$(document).ready(function() {
    var url = window.location.href;
    if (url === "http://www.promilitarybusinessnetwork.com/continueSearch.asp?categoryID=108") {
        $("#website").html("<p>This is the Apartments Category page</p>");
    } else if (url === "http://www.promilitarybusinessnetwork.com/continueSearch.asp?categoryID=13") {
        $("#website").html("<p>This is the Business Category page</p>");
    } else {
        $("#website").empty();
    }
}); 
```

这使得每个选项相互排斥。如果其中之一是`true`，它会执行，但其他人都不执行。

# ruby - 无法安装 eventmachine，错误构建 gem 原生扩展

> ID：15818375
> 
> 赞同：1
> 
> 时间：2013-04-04T17:59:09.460
> 
> 标签：ruby, rubygems, gem, eventmachine

我正在尝试安装[helios](http://helios.io)，但在尝试编译 eventmachine 的本机扩展时出现错误。

我在 OS X 10.8.2、Ruby 2.0.0、Xcode 4.6.1 和更新的命令行工具上。

错误太长，所以我[在 gist 中](https://gist.github.com/marcopompei/5312559)发布了它，但我想这是最相关的部分：

```
binder.cpp: In static member function ‘static long unsigned int Bindable_t::CreateBinding()’:
binder.cpp:35: warning: suggest a space before ‘;’ or explicit braces around empty body in ‘while’ statement
make: *** [binder.o] Error 1 
```

# css - Div 上的滚动条出现 IE10 问题

> ID：15818376
> 
> 赞同：16
> 
> 时间：2013-04-04T17:59:12.353
> 
> 标签：css, html, scrollbar, overflow, internet-explorer-10

我在 div 上使用滚动条，它似乎在 IE10 中存在渲染问题。

当您将 div 一直滚动到底部，然后返回顶部时，顶部的内容会丢失。

不知道有没有IE10的解决方案？

链接： http: [//landpros.com/propsearch.php](http://landpros.com/propsearch.php)

这是 div 上的 CSS：

```
.prop-search-content-wrapper{
    margin: 0 0 30px 0;
    padding: 0;
    height: 980px;
    overflow-x:hidden;
    overflow:scroll;
} 
```

谢谢！

![在此处输入图像描述](https://i.stack.imgur.com/JqYhq.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-21T16:37:52.510

我确实设法重现了这一点-查看问题的原因（我认为）关闭`overflow-x: hidden`指令。如果内容丢失，它会回来，你会得到一个垂直滚动条。正在发生的事情导致 IE10 认为它需要隐藏整个顶行。

修复应该是重新调整包含类的任何内容的宽度，`content-wrapper`以匹配父级，并且从一开始就不需要`overflow-x: hidden;`。

*注意：我一直在努力重现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-24T14:23:26.807

我无法重现我的 IE 11 使用开发人员工具模拟 IE 10 的问题。但我同意马修的观点，这很可能是由`overflow-x: hidden`环境引起的。

您可以轻松避免它！

查看您的foundation.css 文件（在第233 和235 行）：

```
.row .row { width: auto; max-width: none; min-width: 0; margin: 0 -10px; } 
```

除了规则存在两次之外，您的“麻烦”还来自负的左右边距。你不需要它们，所以只需删除它们！

通过这样做，不再需要`overflow-x: hidden`设置。顺便说一句：如果您不希望元素水平溢出其父级，
为什么要将 设置`max-width`为`none`，而不是？`100%`

因此，请尝试并告诉我们，如果这可以解决（避免）您的问题 - 谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-02T16:01:54.290

您是否尝试过使用 -ms-overflow-style 属性？

-ms-溢出样式：自动 | 没有 | 滚动条 | -ms-自动隐藏滚动条

[https://msdn.microsoft.com/en-us/library/hh771902(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/hh771902(v=vs.85).aspx)

# ldap - 在 OpenLDAP 中选择什么类型的组来对用户进行分组

> ID：15818382
> 
> 赞同：9
> 
> 时间：2013-04-04T17:59:43.300
> 
> 标签：ldap, openldap

我需要知道我应该使用哪种组来对 LDAP 中的用户进行分组。

我基本上需要函数 MemberOf，以根据组成员身份获得一些权限。

例子：

*   用户
    *   用户 1
    *   用户 2
    *   用户 3
*   团体
    *   第 1 组
    *   第 2 组

用户 1 是组 1 和组 2 的成员。

这些组需要是动态的，例如 Active Directory。

问题来了，因为我有这些可供选择：

`Samba: Group Mapping`

`User Group`

`Generic: Posix Group`

用户也是如此，我应该选择哪一个？

`Generic: User Account`

`Samba: Account`

我找不到显示差异的好网站，任何链接都将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-04T23:22:11.760

LDAP/X.500 只定义了具有*成员属性的**组对象*，用户对象在 OpenLDAP 中具有*memberof*属性的反向关系可以通过[覆盖](http://www.openldap.org/doc/admin24/overlays.html#Reverse%20Group%20Membership%20Maintenance)来实现。NDS/eDir 和 AD 神奇地实现了这一点。LDAP 本身没有定义动态双向成员/组对象/属性。与该叠加层相关的是[refint](http://www.openldap.org/doc/admin24/overlays.html#Referential%20Integrity)叠加层，它有助于完成错觉（并且还解决了始终需要至少一个成员的组的轻度刺激性问题）。**[`memberof`](http://www.openldap.org/doc/admin24/overlays.html#Reverse%20Group%20Membership%20Maintenance)**

 **通常有两种有趣的组类型可供选择，`groupOfNames`或者`groupOfUniqueNames`，第一种`GroupOfNames`适用于大多数目的。后者`groupOfUniqueNames`有一个稍微深奥的特性：它允许成员[DN 包含一个数字 UID 后缀](https://www.rfc-editor.org/rfc/rfc2252#section-6.21)，以便在将 DN 重新分配给不同实体时保持成员的唯一性。这两种形式都不强制在成员列表中使用唯一的 DN。

其他类型的组有不同的目的（由模式和应用程序定义）。一个不太常见的组类型对象是[RFC 2256](http://www.rfc-editor.org/rfc/rfc2256.txt) *角色*（`organizationalRole`类型，带`roleOccupant`属性），它隐式用于基于角色的访问控制，但在其他方面类似于其他组类型（感谢[EJP](https://stackoverflow.com/users/207421/ejp)的提示）。

该`posixGroup`类型表示传统的 unix 组，由 a`gidNUmber`和列表`memberUid'`s 标识。它不是 DIT 中的通用组对象，它取决于应用程序（即 LDAP 客户端层）来实现/观察它。

对于用户帐户，不应将帐户对象类型视为排他性的，每种类型通常以兼容的方式向用户对象添加属性（尽管如果它是*结构性的，则*`objectClass` *可以*是排他性的，这不是您经常拥有的一般担心）。**

# wordpress - 分配给帖子时，类别显示顺序错误

> ID：15818383
> 
> 赞同：0
> 
> 时间：2013-04-04T17:59:43.497
> 
> 标签：wordpress, categories

我已经在屏幕截图中的类别中设置了这个层次结构，例如

男士 > 配饰 > 领带

[http://i48.tinypic.com/apjs3s.jpg](http://i48.tinypic.com/apjs3s.jpg)

但是，当我将帖子分配为“男士”>“配饰”>“领带”类别时，它会以错误的顺序显示，并且其他帖子和类别也会出现这种情况。例如这里的顺序是配饰 > 男士 > 领带。这是一个问题，因为它在面包屑中也是如此。快把我逼疯了，求救！

[http://i49.tinypic.com/2w4woqw.jpg](http://i49.tinypic.com/2w4woqw.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:52:31.820

据我所知，默认情况下，后端的类别按 ASCending 模式下的 slug 按字母顺序显示。

我在您的图像中看到您用于 slug :subcat-cat。将其更改为 cat-subcat ... 或者通常以您命名 slug 的方式为类别创建相同的层次结构

或者在你的functions.php中添加一个类似上面的函数，这将改变类别（和子类别）在后端的显示方式。

例如，要以 DESCending 方式按 slug 顺序在仪表板管理中显示类别：

```
add_filter( 'get_terms_args', 'wpse_53094_sort_get_terms_args', 10, 2 );
function wpse_53094_sort_get_terms_args( $args, $taxonomies ) 
{
    global $pagenow;
    if( !is_admin() || ('post.php' != $pagenow && 'post-new.php' != $pagenow) ) 
        return $args;

    $args['orderby'] = 'slug';
    $args['order'] = 'DESC';

    return $args;
} 
```

# sql - 为什么使用 string.Format() 会破坏我的 sql？

> ID：15818384
> 
> 赞同：0
> 
> 时间：2013-04-04T17:59:47.863
> 
> 标签：sql, sql-server-ce, string-formatting, string.format

这有效：

```
dynSQL = "SELECT * FROM inventory WHERE vendor_item = '" + VendorItem + "' "; 
```

...但这不是：

```
dynSQL = string.Format("SELECT * FROM inventory WHERE vendor_item = {0}", VendorItem); 
```

后者导致“找不到表 0”

这是另一个尝试美化代码的例子，它把我从马鞍上撞到了硬盘上。

将 where 子句 arg 包含在由外部单引号标记的双引号中真的是要走的路吗？必须有更好的方法（比我的“更好的方法”（这很好，除了它不起作用））。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:01:52.290

有一个更好的办法。无论您使用哪种语言（您没有指定——该`string.Format`部分），无疑都支持参数化 SQL 执行。停止连接，而是使用参数。

例如，[在 C# Entity Framework 中](http://msdn.microsoft.com/en-us/library/bb738684.aspx)，您将执行以下操作：

```
string esqlQuery = @"SELECT * FROM inventory WHERE vendor_item = @vendoritem";

using (EntityCommand cmd = new EntityCommand(esqlQuery, conn)) {
   EntityParameter vendoritem = new EntityParameter();
   vendoritem.ParameterName = "vendoritem";
   vendoritem.Value = VendorItem;

   cmd.Parameters.Add(vendoritem);
   // go on to execute it as shown in the above link
} 
```

通过创建一个命令并执行它，一切都会为您完成：参数放置和格式化，包括用单引号包裹字符串和转义单引号或使用“NULL”代替“'NULL'”。

另一个注意事项是，您的第二个代码片段在令牌周围没有单引号。但即使你让它“工作”了，你仍然容易受到 SQL 注入的影响。最佳实践是改用参数化 SQL。

# android - Monodroid：更改edittext样式（红色边框）并恢复默认样式

> ID：15818388
> 
> 赞同：0
> 
> 时间：2013-04-04T18:00:01.413
> 
> 标签：android, xamarin.android

我在某些条件下（使用形状）将红色边框添加到编辑文本，并且在我想回到默认的 android 样式编辑文本之后。

我试过这样：

```
EditText lastName = FindViewById<EditText>(Resource.Id.lastName);
lastName.SetBackgroundResource(Android.Resource.Drawable.EditBoxBackgroundNormal); 
```

它显示长白条而不是默认样式的edittext（黑色背景和灰色线条）。

如何获得这种默认样式的 edittext ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:56:00.770

您如何设置“错误”标志？我不会删除背景，而是`Drawable`将其设置为：

```
myEditText.SetCompoundDrawablesWithIntrinsicBounds(0 , 0, Resource.Drawable.MyErrorIcon, 0); 
```

Where `myEditText`is an instance of `EditText`and `Resource.Drawable.MyErrorIcon`is a`Drawable`您要显示的图标。

您可以使用以下方法将其删除：

```
myEditText.SetCompoundDrawablesWithIntrinsicBounds(0 , 0, 0, 0); 
```

通过设置，`CompoundDrawables`您将永远不需要触摸`EditText`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:29:16.347

Android 使用属性将正确的可绘制对象映射到 api 级别、应用程序主题、设备配置等。试试下面的代码行。

```
lastName.SetBackgroundResource(Android.Resource.Attribute.EditTextBackground); 
```

# java - 管道 Java 输出到调用脚本

> ID：15818389
> 
> 赞同：0
> 
> 时间：2013-04-04T18:00:12.687
> 
> 标签：java, apache, servlets, batch-file

我的目标是在 apache 网络服务器上运行 CGI。我的 CGI 是用 Java 编写的。我正在使用一个批处理文件（以后可能是一个 perl 脚本）来启动执行所有业务的 java CGI。

批处理文件工作并启动 Java CGI。java程序本身就可以工作。但是没有任何东西从我的 java 代码发送回浏览器。我正在做简单的 System.out.println 将内容发送到浏览器。我用[这个](http://www.javaworld.com/jw-01-1997/jw-01-cgiscripts.html?page=1)作为参考

## 我的批处理文件

```
 echo Content-Type: text/html
    echo.
    echo ^<html^>^<head^>^</head^>^<body^>
    echo Hello world!!!
    java -cp My.jar MyClass
    echo ^</body^>^</html^> 
```

## 我的 Java 文件

```
 new File("C:\\wamp\\www\\cgi-bin\\" + new Date().getTime()).mkdir();
    System.out.println("<b>Hello world from Java</b>"); 
```

旁注 - 我这样做是因为（不使用 servlet 容器等）我的任务是 2 到 3 分钟，我不想阻止 servlet。同时，我需要向用户更新任务的进度。这是非公开的，我不想让它太复杂，通过使用 JMS、ajax 等在容器内运行它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:24:19.607

我想知道，
如果`java -cp My.jar MyClass`显示它应该作为一个单独的命令，但在批处理中不起作用，也许会有一个解决方法`for /f`......

```
@echo off
  rem  This works in Wampserver's Apache cgi-bin...
  rem     http://localhost/cgi-bin/testbat.bat
echo Content-Type: text/html
echo.
echo ^<html^>^<head^>^</head^>^<body^>
echo ^<H1^>Hello world!!!^</H1^>
echo ^<PRE^>
FOR /F "usebackq delims==" %%i IN (`dir`) do echo %%i
echo ^</PRE^>
echo ^</body^>^</html^> 
```

无论如何，很高兴你解决了这个问题:) 干杯

# c# - 以这种特定方式随机排列数组？

> ID：15818390
> 
> 赞同：2
> 
> 时间：2013-04-04T18:00:16.657
> 
> 标签：c#, arrays, random, shuffle

我想做的是每次加载控制台应用程序时都对下面的数组进行洗牌。例如，batman 可能每次都在 'name[0]' 旁边`name[1]`，`name[2]`或者`name[3]`代替 'name[0]'。

```
 heroes[] names = new heroes[4];

            names[0] = batman;              
            names[1] = ironman;             
            names[2] = hulk;
            names[3] = flash; 
```

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:04:40.267

使用列表和此扩展方法：

```
public static class ListExtensions
{
    /// <summary>
    /// Shuffle algorithm as seen on page 32 in the book "Algorithms" (4th edition) by Robert Sedgewick
    /// </summary>
    public static void Shuffle<T>(this IList<T> source)
    {
        var n = source.Count;
        for (var i = 0; i < n; i++)
        {
            // Exchange a[i] with random element in a[i..n-1]
            var r = i + RandomProvider.Instance.Next(0, n - i);
            var temp = source[i];
            source[i] = source[r];
            source[r] = temp;
        }
    }
}

public static class RandomProvider
{
    [ThreadStatic]
    public static readonly Random Instance;

    static RandomProvider()
    {
        Instance = new Random();
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-04T18:02:21.977

```
 heroes[] names = new heroes[4];
        names[0] = batman;
        names[1] = ironman;
        names[2] = hulk;
        names[3] = flash;

        var rnd = new Random(DateTime.Now.Second);
        for (int i = 0; i < heroes.Length; i++)
        {
            names[i] = heroes[rnd.Next(0, heroes.Length - 1)];
        } 
```

那应该为您指明正确的方向。

# jquery - jQuery 背景图像闪烁和边距问题

> ID：15818396
> 
> 赞同：0
> 
> 时间：2013-04-04T18:00:30.157
> 
> 标签：jquery, background-image, margin, flicker

我正在尝试从头开始重建我的个人作品集网站，主要用于 jQuery 练习，而我才刚刚开始，但遇到了 2 个问题。

首先，这是我到目前为止的预览链接：[http ://www.forrestmckinney.com/portfolio-preview/](http://www.forrestmckinney.com/portfolio-preview/)

基本上我的想法是拥有带有 div 的大背景图像，在每次其他导航点击时滚动到视图中。随着 div 滚动，背景图像发生变化。但是，我还希望通过我遇到问题的 break_size 函数动态调整 div 的大小。该函数非常适合设置每个 div 的大小，即使在调整大小时也是如此，但由于某种原因，间距是关闭的。第一个显示得很好，然后每一个都太高了：

```
function break_size() {
    var windowY = $(window).height();   
    var breakHeight =(94 * windowY) / 100;

    var marginY = ((windowY - breakHeight)/2);

    $('.break').css('height', breakHeight);
    $('.break').css('margin-top', marginY + windowY);
    $('.break').css('margin-bottom', marginY);
} 
```

因此，除非我遗漏了什么，否则这段代码应该将每个 .break div 的高度设置为窗口高度的 94%，将 marginY 变量设置为（窗口高度 - 中断高度）/2（一半用于顶部，一半用于为底部），然后将下边距设置为 marginY，将上边距设置为 marginY 加上窗口的高度（有效地将每个 div 间隔一个窗口高度，允许完整的背景图像显示在 div 之间）。

我遇到的另一个问题是图像之间的闪烁。我添加了 e.preventDefaults()，但没有运气。

有谁知道那里发生了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:39:59.683

`var image_url = 'url(images/image1.jpg';`

第 15 行的错字，缺少括号。

您的数学是准确的，但是某些内容不适用于 css。元素没有正确定位。看起来每个元素的下边距都没有影响它下面的边距。我不知道为什么会这样，但我找到了一种解决方法，将底部边距添加到其他元素的顶部：

```
$('.break').css('height', breakHeight);
//remove bottom margin, use extra top margin instead
$('.break').css('margin-top', marginY + marginY + windowY); 
//normal margin for first child
$('.break:first-child').css('margin-top', marginY + windowY); 
```

从理论上讲，这可以在您的设置中使用，但我没有对其进行测试。

至于闪烁，我也可能是错的，所以让我知道，但看起来你在按下按钮时正在更改背景图像。单独更改背景图像会导致这种情况，但每次单击按钮时也不需要更改它。相反，您应该堆叠图像并更改堆叠图像的可见性，这样它们就会被预加载。然后，仅在需要时交换图像。

# javascript - Kendo Grid 自定义按钮调用 Javascript 函数

> ID：15818397
> 
> 赞同：0
> 
> 时间：2013-04-04T18:00:30.327
> 
> 标签：javascript, model-view-controller, kendo-ui, kendo-grid

如何将自定义按钮绑定到 JavaScript 函数？我在网格中的每一行上都看到了按钮，但是单击按钮会刷新页面，并在当前 URL 后附加一个“/0”。它不调用 JavaScript 函数“RedirectCreateReport”。这是我的剑道网格：

```
 @(Html.Kendo().Grid(Model)
                  .Name("MyGrid")
                  .Columns(columns =>
                               {
                                   columns.Bound(p => p.Name).Title("Name");
                                   columns.Bound(p => p.Description).Title("Description");
                                   columns.Command(command =>
                                       {
                                           command.Custom("CreateReport").Text("Submit Report").Click("RedirectCreateReport");
                                       }).Title("Actions");
                               })
                  ...
                  .ColumnMenu()
                  .Groupable())

@section scripts {
    <script type="text/javascript">
        $(document).ready(function () {
            $(".RedirectCreateReport").click(function () {
                alert("a");
                var item = $("#MyGrid").data("kendoGrid").dataItem($(this).closest("tr"));
                window.location.href = "/Report/Create?P=" + item;
            });
        });
    </script>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:56:23.090

我找到了问题的答案：放弃自定义按钮。使用 ActionLink，样式为按钮：

```
 columns.Template(
   p => @Html.ActionLink(
     "New Report", 
     "Create", 
     "Report", 
     new { ID = p.Id.ToString() }, 
     htmlAttributes: 
     new { @class = "k-button k-button-icontext k-grid-NewReport" }
     ).ToHtmlString()
   ); 
```

此代码替换行 columns.Command(command => ...).Title("Actions"); 不需要 JavaScript。

# php - HightChart 基本线不显示线

> ID：15818399
> 
> 赞同：1
> 
> 时间：2013-04-04T18:00:34.063
> 
> 标签：php, jquery, mysql

我需要创建一个基本折线图，其中存储在 mysql db 和 php 中的数据用于数据提取，但不在图表上显示线条。

我包括以下代码：

## js代码

```
$(document).ready(function() {

var options = {
  chart: {
          renderTo: 'chartPersonale',
          type: 'line',
          shadow: true,
          marginRight: 130,
          marginBottom: 25,
          backgroundColor: {
            linearGradient: [0, 0, 500, 500],
            stops: [
                [0, '#E0C6A5'],
                [1, '#FDEBC4']
            ]
          },
          plotBackgroundColor: null,
          plotShadow: true, 
        },
  title: {
      text: 'Performance Staff',
      x: -20 //center
  },
  subtitle: {
      text: '',
      x: -20
  },
  xAxis: {
     categories: ['Gen','Feb','Mar','Apr','Mag','Giu','Lug','Ago','Set','Ott','Nov','Dic']
  },
  yAxis: {
      title: {
          text: 'Appuntamenti (%)'
      },
      plotLines: [{
          value: 0,
          width: 1,
          color: '#808080'
      }]
  },
  tooltip: {
      valueSuffix: ' %'
  },
  legend: {
      layout: 'vertical',
      align: 'right',
      verticalAlign: 'top',
      x: -10,
      y: 100,
      borderWidth: 0
  },
  series: []
};

$.ajax({ url: "Model/lineChartPersonale.php",
      type: "POST",
      data:  "",
      success: function(data) {
         $.each(data, function(key,value) {
            var series = { data: []};
            $.each(value, function(key,val) {
                if (key == 'name') {
                    series.name = val;
                }
                else
                {
                    series.data = val
                }
            });
        options.series.push(series);
        });
        console.log(options.series);
         var chart = new Highcharts.Chart(options);
          }, 
      error: function(response, error) {
          //
      }
  });
}); 
```

## php代码

```
<?php
  include('../Include/classi.inc.php');
  header("content-type: application/json");
  $output = array(); 
  $db= new cDB();
  $db->query("select name from staff");
  while($rec=$db->record()){
  $arr = array("name"=>$rec['name'],"data"=>"[".rand(0,50).",     ".rand(0,50).", ".rand(0,50).", ".rand(0,50).", ".rand(0,50).", ".rand(0,50).", ".rand(0,50).", ".rand(0,50).", ".rand(0,50).", ".rand(0,50).", ".rand(0,50).", ".rand(0,50)."]");
  array_push($output, json_encode($arr)); 
}
echo "[";
  foreach($output as $val){
  if(empty($val)) continue;
  echo $val;
  if($val != end($output)) echo ",\n";
  }
echo "]";

?> 
```

## 输出 PHP

```
[{"name":"FRANCESCA ","data":"[40, 30, 31, 29, 32, 35, 24, 32, 18, 41, 42, 6]"},
{"name":"LUIZA ","data":"[28, 34, 1, 26, 16, 24, 45, 40, 13, 48, 40, 20]"},
{"name":"ANTONELLA ","data":"[22, 16, 27, 16, 24, 14, 25, 1, 23, 4, 26, 24]"},
{"name":"CHIARA ","data":"[49, 22, 47, 7, 5, 27, 29, 50, 24, 6, 41, 25]"},
{"name":"EMILIA","data":"[8, 21, 24, 32, 39, 6, 46, 43, 19, 24, 49, 6]"},
{"name":"MARISA","data":"[29, 9, 49, 48, 24, 23, 40, 12, 33, 2, 37, 26]"}] 
```

## 和 HTML

```
 <div class="ui-grid-solo">
     <div class="ui-block-a">
      <div id="chartPersonale" style="min-width: 350px; height: 400px; margin: 0 auto">  </div>
     </div>
    </div> 
```

我哪里错了？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:53:55.213

the problem seems to be a matter of quotes on data values for example: "[1,2,3...]" instead of [1,2,3...]. I tried to parse the string, but without result. if I pass the value manually, it works!

```
$.ajax({ url: "Model/lineChartPersonale.php",
      type: "POST",
      data:  "",
      success: function(data) {
         $.each(data, function(key,value) {
            var series = { data: []};
            $.each(value, function(key,val) {
                if (key == 'name') {
                    series.name = val;
                }
                else
                {                       

                   > series.data = [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3,18.3, 13.9, 9.6];

                }
            });
        options.series.push(series);
        });
         var chart = new Highcharts.Chart(options);
          }, 
      error: function(response, error) {
          //
      }
  }); 
```

Sorry for my english.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:59:24.110

您可以通过以下方式解析它：

```
JSON.parse(obj.data); 
```

例子：

```
JSON.parse("[40, 30, 31, 29, 32, 35, 24, 32, 18, 41, 42, 6]")
[40, 30, 31, 29, 32, 35, 24, 32, 18, 41, 42, 6] 
```

# javascript - 如何以加密形式存储用户数据？

> ID：15818403
> 
> 赞同：0
> 
> 时间：2013-04-04T18:00:46.447
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在制作一个需要保留用户个人资料的扩展程序，以便在用户登录时可以从各种服务器中提取正确的信息。

所以我找到了这篇文章：[Google Chrome 扩展中的密码存储](https://stackoverflow.com/questions/3265348/storage-of-passwords-in-google-chrome-extension)。我不觉得它太有帮助。

我相信，如果我可以存储用户登录密码的哈希值（对于我的扩展程序来说是唯一的），我就可以使用密码作为密钥来加密他们的所有个人信息。我担心我引用的帖子中的评论，说他们可以阅读扩展的源代码并计算出哈希值。

我的想法可行吗？如果是这样，我应该使用什么？或者其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:05:09.223

这有点取决于密码的用途。例如，如果它们是银行账户，那么坏人可能值得花时间查看您的 javascript 并弄清楚如何解密文件。这就是查看加密内容所需要的。

如果内容是一些不太有价值的东西的密码，你可以做这种事情。

如果内容有价值，您需要在某处的服务器上进行加密，而不是在客户端使用 javascript。这样做几乎总是需要您也存储它们，尽管可以通过在服务器上进行加密并将数据存储在客户端上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:09:50.667

您不应将个人信息或密码存储在 localStorage 中，因为任何有权访问计算机的人都可以轻松访问此信息。即使它是加密的，也可以通过检查源代码轻松解密（任何人都可以轻松查看扩展的源代码）。

一种解决方案是将信息存储在服务器上并使用第三方登录（谷歌、Facebook）而不是密码来验证用户身份。

# python - 如何使用笔记本中的组合框以 python 形式进行计算？

> ID：15818406
> 
> 赞同：2
> 
> 时间：2013-04-04T18:00:55.360
> 
> 标签：python, forms, combobox, tkinter

很抱歉再次因我在 Python 中遇到的新手问题而打扰您。我正在尝试使用组合框在 python 中进行简单的计算（乘法），但我不知道如何。下面你会发现我到目前为止所做的一切都没有成功。希望你能帮我！

非常感谢您提前

这是我的代码：

```
import Tkinter

root = Tk()
root.title("Model A")
root.minsize(400, 220)
root.maxsize(410, 240)

# start of Notebook (multiple tabs)
notebook = ttk.Notebook(root)
notebook.pack(fill='both', expand='yes')
notebook.pressed_index = None

# child frames
frameOne = Tkinter.Frame(notebook, bg='white',width=560, height=100)

frameOne.pack(fill='both', expand=True)
# pages
notebook.add(frameOne, text='Simple calculation')

#Close Application Button
def quit(root):
    root.destroy()
tk.Button(root, text="Close Application", command=lambda root=root:quit(root)).pack()

## Calculation
def defocus(event):
    event.widget.master.focus_set()
def multiply(*args):
    try:
        product.config(round(float(Num_One.get())*float(Num_Two.get())))
    except ValueError:
        pass

## variables
Num_One = StringVar()
Num_Two = StringVar()
product = DoubleVar()
#Number One
ttk.Label(frameOne, text="Select First Number:").grid(column =3, row = 0)
NumOne_Select = Combobox(frameOne, values=("1", "2", "3","4", "5"),textvariable=Num_One)
NumOne_Select.grid(column=4, row=0, columnspan="5", sticky="nswe")
NumOne_Select.bind('<KeyPress>', multiply)
NumOne_Select.bind('<KeyRelease>', multiply)

#Number two
ttk.Label(frameOne, text="Select Second Number:").grid(column =3, row = 6 )
NumTwo_Select = Combobox(frameOne, values=("1", "2", "3","4", "5"),textvariable=Num_Two)
NumTwo_Select.grid(column=4, row=6, columnspan="5", sticky="nswe")
NumTwo_Select.bind('<KeyPress>', multiply)
NumTwo_Select.bind('<KeyRelease>', multiply)

# display results
ttk.Label(frameOne, text = "Product:").grid(column = 3, row = 8)
ttk.Label(frameOne, textvariable=product).grid(column = 4, row = 8)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:20:47.503

由于您的代码实际上并没有运行，我无法告诉您它的所有问题......但我可以很容易地发现两个。

首先，在 中`multiply`，您正在做`product.config`. 那不是你的价值`DoubleVar`。你几乎肯定想要`product.set`这里。

其次，你试图用`<KeyRelease>`. 例如，如果您使用鼠标从剪贴板粘贴，或使用下拉菜单更改值，则不会更新任何内容，因为没有按键释放事件。

`<KeyPress>`由于某种原因，您也具有约束力。在正常使用中，这意味着每次按键都`Product`用旧值更新，然后立即用新值再次更新。如果有人一直按住一个键直到它重复，你会不断更新，但总是落后一个重复。

如果您想尝试以这种方式做事，我相信您至少需要绑定这些事件：

*   `<KeyRelease>`（而不是`<KeyPress>`）
*   `<<ComboboxSelected>>`
*   `<<Clear>>`
*   `<<Cut>>`
*   `<<Paste>>`

那么，还有什么其他方法可以做到呢？好吧，有一些，我真的不确定哪个是最 Pythonic（或 Tk-ish？）；Tk 是 TOOWTDI 不支持的少数 Python 领域之一。但我想我会通过挂钩 each 的更新来做到这一点`StringVar`，而不是 each `Combobox`。只需扔掉`bind`电话，而是这样做：

```
Num_One.trace("w", multiply)
Num_Two.trace("w", multiply) 
```

# ajax - CakePHP Ajax 分页问题

> ID：15818409
> 
> 赞同：0
> 
> 时间：2013-04-04T18:01:11.080
> 
> 标签：ajax, cakephp, pagination

我正在使用 cakephp 2.2.2，我想创建一个简单的 ajax 分页。我正在关注这个（[http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html#ajax-pagination](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html#ajax-pagination)），我似乎无法让它正常工作。当我加载页面时有时它使用 ajax 有时它不使用，在 IE 10 中我也得到了一些奇怪的东西，比如整个菜单折叠到设置为更新的 div 中。

这是我所做的：

1.  放入我`echo $this->Html->script('jquery');`的`<head>`布局文件中。
2.  在我的控制器中包含 RequestHandler 组件和 Js 助手。
3.  把它放在我的视图文件的开头：

    $this->Paginator->options(array('update' => '#content', 'evalScripts' => true ));

4.  把它放在布局文件的底部之前`</body>`： `echo $this->Js->writeBuffer();`

5.  然后我通常像这样使用分页器：

    echo $this->Paginator->sort('id');

有人可以告诉我我是否遗漏了什么或出了什么问题，因为我真的无法弄清楚我做错了什么。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:54:32.863

我在分页中也遇到了同样的问题。

我找到了一个临时解决方案。在控制器函数中，添加以下代码来设置标志变量。

```
 if($this->request->is('ajax')){
        $this->set('paginate',true);
    } 
```

然后在视图中，您需要隐藏#content div 下以外的部分。

```
<?php if(!isset($paginate)):
    // Code above # content div including the start of div
endif:?>

Pagination code inside the content div

<?php if(!isset($paginate)):
    // Code below # content div including content of div
endif:?> 
```

PS 逻辑是当分页完成后，其他部分不会显示在分页视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T11:34:03.593

只需将此代码从您的`view`文件移动到您的`layout`：

```
$this->Paginator->options(array( 'update' => '#content', 'evalScripts' => true )); 
```

# .net - TimeOfDay 给出的时间不正确

> ID：15818412
> 
> 赞同：0
> 
> 时间：2013-04-04T18:01:14.973
> 
> 标签：.net, vb.net, timer, toolstripstatuslabel, timeofday

我制作了一个每 1000 毫秒刷新一次的计时器，我将代码设置为：

```
Private Sub RealTimeTMR_Tick(sender As Object, e As EventArgs) Handles RealTimeTMR.Tick
    TimeLBL.Text = TimeOfDay.ToLocalTime.ToString
End Sub 
```

有人会怀疑这是完美而简单的，但是当我启动程序时，我得到标签的值：01/01/0001 18:59:36

如果它对格式或我住在爱尔兰的任何东西有任何影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:13:13.993

这是因为[`TimeOfDay`](http://msdn.microsoft.com/en-us/library/8hhbhw4c%28v=vs.90%29.aspx)只有时间组件并将其日期组件设置为全 1。

您可以使用类似[`DateTime.Now`](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)的方法来获取此信息 - 它应该返回执行它的机器的当前本地日期和时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T18:20:05.783

如果您只想要时间，请使用：

```
TimeLBL.Text = DateTime.Now.TimeOfDay.ToString("g") 
```

有关格式化的更多信息，请参阅[标准 TimeSpan 格式字符串](http://msdn.microsoft.com/en-us/library/ee372286.aspx)和[自定义 TimeSpan 格式字符串](http://msdn.microsoft.com/en-us/library/ee372287.aspx)。

# delphi - 在 Delphi XE 中删除 TBitmap 上的矩形

> ID：15818417
> 
> 赞同：2
> 
> 时间：2013-04-04T18:01:36.217
> 
> 标签：delphi, delphi-xe3

```
 bmp := TBitmap.Create;
  bmp.SetSize(Screen.Width,Screen.Height);

  bmp.canvas.Brush.Style := bsClear; 
  bmp.Canvas.Pen.Color := clLime;
  bmp.Canvas.Rectangle(startPos.X,startPos.Y,stopPos.X,stopPos.Y); <-draw rectangle 
```

有没有一种简单的方法可以在不刷新整个图像的情况下删除旧矩形？

我想选择这个图像的一个区域，就像他们在 grafic 程序中所做的那样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:37:51.647

简单的方法是使用`TShape`选择，完成选择后隐藏它并通过
此 TShape 的坐标绘制形状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:08:49.530

您不能从光栅图像中删除内容。每个像素都必须有一个值。你所能做的就是在已经存在的东西上画一些别的东西。

所以如果你想恢复以前的东西，你必须记住它是什么，然后重新绘制它。

绘图程序维护图层，并将这些图层合并为单个图像以进行渲染。您也可以这样做，但您必须自己使用多个位图，每层一个。

如果要绘制选择矩形，则无需在底层位图上绘制。当您需要绘制时，将位图绘制到屏幕上，然后在顶部绘制矩形。这样你就不会让选择矩形破坏实际图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T20:56:05.590

我假设您要绘制一个通常由鼠标移动绑定的*选择矩形，从而**删除*先前绘制的矩形并在当前鼠标位置绘制一个新矩形。这可以通过在 XOR 模式下使用笔绘图来完成：

```
function NegativeColor(AColor: TColor): TColor;
begin
  Result := RGB(255 - GetRValue(AColor), 255 - GetGValue(AColor),
    255 - GetBValue(AColor));
end;

procedure TForm1.Button14Click(Sender: TObject);
var
  Bmp: TBitmap;
begin
  Bmp := TBitmap.Create;
  try
    Bmp.SetSize(100, 100);
    Bmp.Canvas.Brush.Style := bsClear;
    Bmp.Canvas.Pen.Color := NegativeColor(clLime);
    Bmp.Canvas.Pen.Mode := pmXor;
    Bmp.Canvas.Rectangle(10, 10, 50, 50);
    Canvas.Draw(0, 0, Bmp);
    Bmp.Canvas.Rectangle(10, 10, 50, 50); // "Erase" previous rectangle
    Bmp.Canvas.Rectangle(10, 10, 90, 90); // Draw new rectangle
    Canvas.Draw(0, 100, Bmp);
  finally
    Bmp.Free;
  end;
end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-29T13:47:10.367

如果你使用**Delphi XE**和**FireMonkey**，你不需要关心它，只需使用一个**TSelection**组件，它允许你显示一个区域，修改并从该区域获取信息......

# inno-setup - Inno setup，仅在文件内容更改时才确认覆盖

> ID：15818419
> 
> 赞同：1
> 
> 时间：2013-04-04T18:01:43.380
> 
> 标签：inno-setup

如何使 Inno Setup 仅在文件内容更改时确认是否应覆盖文件？使用设置文件，我想确认覆盖用户系统上的现有文件。但是，如果该文件实际上与设置中的新文件没有什么不同，那么我不想打扰用户！

confirmoverwrite 不检查内容是否不同。我不能使用时间戳（由于构建系统）。这些文件是文本文件，因此它们没有“版本”，这是 Inno setup 通常进行检查的方式。

# cryptoapi - 每次从相同的明文中获取相同的密文

> ID：15818420
> 
> 赞同：2
> 
> 时间：2013-04-04T18:01:50.993
> 
> 标签：cryptoapi

我正在使用 Microsoft CryptoAPI 来加密密码。使用来自 Microsoft Enhanced Cryptographic Provider 的 3DES。我注意到的是，我似乎每次都从相同的明文中得到完全相同的密文。据我所知，这不应该发生在 CBC 模式下，根据 MSDN，CALG_3DES 正在其中运行。我知道 3DES 很旧，我应该改用 AES，但这是一个遗留代码，我想避免更改算法。难道我做错了什么？我想我可能需要提供 IV，但我看不出如何使用 CryptoAPI 为 3DES 完成它。没有 MSDN 示例显示它。下面是显示 CryptoAPI 调用序列的编辑代码片段。

到目前为止，这是我的代码：

```
CryptAcquireContext(&hProvider, NULL,  MS_ENH_RSA_AES_PROV, PROV_RSA_AES, CRYPT_VERIFYCONTEXT);

/// key acquired by some means and stored in pszTempData

CryptCreateHash( hProvider, CALG_SHA_256, 0, 0, &hHash );

CryptHashData( hHash, (BYTE *)pszTempData, wcslen(pszTempData), 0 );

CryptDeriveKey( hProvider, CALG_3DES, hHash,  CRYPT_EXPORTABLE, &hDecEncKey );

// some buffer manipulation to ensure buffer size is of correct size

CryptEncrypt( hDecEncKey, 0, TRUE, 0, pbBuffer, &dwCount, dwBufferLen );

CryptBinaryToString(pbBuffer, dwCount, CRYPT_STRING_BINARY, wsTempOut, &dwStrLen); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T02:35:17.000

这个问题从来没有得到充分的回答。对于支持 IV 的任何加密算法，您可以以相同的方式设置 IV。Microsoft CryptoAPI 处理调用`HCRYPTKEY`与密钥交互的变量。HCRYPTKEY 没有什么特别之处，它只是一个包含作为键句柄的数值的变量。当您使用此 HCRYPTKEY 句柄时，加密服务提供程序 (CSP) 可以查找密钥并与之交互。在您的情况下，请致电`CryptSetKeyParam(hDecEncKey, KP_IV, the_IV_Bytes, 0);`. 有关文档，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380272%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T09:09:49.070

而不是以下行：

```
CryptAcquireContext(&hProvider, NULL,  MS_ENH_RSA_AES_PROV, PROV_RSA_AES,     CRYPT_VERIFYCONTEXT); 
```

使用以下代码行：（相应地更改您的参数）

```
if(CryptAcquireContext(&hCryptProv, NULL, NULL, PROV_RSA_FULL, 0)==0){
    //Prateek 12-10-13
    printf("\n crytpAcquireContext failed..%x.\n",GetLastError());
    if(GetLastError()==NTE_BAD_KEYSET){
            if(CryptAcquireContext(&hCryptProv, NULL, NULL, PROV_RSA_FULL,   CRYPT_NEWKEYSET)==0){

                    printf("\n crytpAcquireContext again failed..%x.\n",GetLastError());
            }
    } 
```

}

# android - 确定服务在作为自己的进程启动时是否正在运行？

> ID：15818422
> 
> 赞同：0
> 
> 时间：2013-04-04T18:01:53.880
> 
> 标签：android, service, android-lifecycle

只要android设备打开，我就想在后台运行服务。我已经有一个广播接收器正在监听`BOOT_COMPLETED`以确保它在应该启动的时候启动，并且确实如此。但是当主要活动开始时，我想确保服务仍在运行，如果没有，则重新启动它。我对服务一开始还很陌生，所以我不确定我做得对。

在清单中，服务定义为

```
<service
    android:name="MyService"
    android:icon="@drawable/myicon"
    android:label="MyServiceLabel"
    android:process=":my_process">
</service> 
```

它是从 BroadcastReceiver 开始使用的

```
public void onReceive(Context context, Intent intent) {
    Intent service = new Intent(context, OgLogService.class);
    context.startService(service);
} 
```

我服务的重点是

```
public int onStartCommand(Intent intent, int flags, int startId) {
    Timer t = new Timer();
    t.scheduleAtFixedRate(new TimerTask() {
        synchronized public void run() {
            // call web service, do stuff
        }
    }, 0, 1000 * 60);
    return Service.START_STICKY;
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
} 
```

这项服务会无限期地保持下去还是操作系统会关闭它？如果它已关闭，我的活动如何判断？如果我的活动确实需要重新启动服务，我是否需要以一种特殊的方式来确保它是一个独立的进程，不会在主要活动死亡时死亡？很抱歉有这么多问题，我只是对自己流程中的服务（以及一般服务）感到有点误导。我读到的一切都是关于服务的，而不是在他们自己的过程中。

我问是因为有一次我相信我的服务运行了多次。服务和活动不直接交互。服务写入活动读取的同一数据库。有一次，数据库中的信息似乎重复了，我认为这是由同时运行的多个服务实例引起的。

我尝试使用[此答案](https://stackoverflow.com/a/5921190/160527)中的代码，但它似乎不适用于在不同进程中运行的服务。在系统设置 > 应用程序 > 运行中，它显示我的应用程序正在运行 1 个进程和 1 个服务（由广播接收器启动），但该`isMyServiceRunning`方法返回 false 并且单步执行它似乎没有列出我的服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:19:17.770

无法保证您的服务将继续存在。基本上，您必须期望被杀死，然后重新启动或永远被杀死。另一件事，除非您是音频播放器，否则您不需要一直熬夜。如果您需要一直持续工作，那么您可能忘记了移动环境（电池等）有多么有限。如果您需要执行一些重复性任务，那么我建议您`AlarmManager`在给定的时间或间隔触发工作人员并用于`IntentService`实际完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:29:44.757

这是一个安排您的活动的链接 [http://android-er.blogspot.in/2011/05/using-alarmmanager-to-start-scheduled.html](http://android-er.blogspot.in/2011/05/using-alarmmanager-to-start-scheduled.html)这是一个 很好的例子，您可以随时取消待处理的意图取消您的服务。

# php - 检查mysql集合中是否存在值，如果存在，打印它

> ID：15818426
> 
> 赞同：-3
> 
> 时间：2013-04-04T18:02:17.743
> 
> 标签：php, mysql, set

我将如何尝试检查 mysql 集中是否存在某个值？我有这个代码：

我正在试验的（我怀疑它会起作用）它抛出了这个错误：

```
$result = mysql_query("SELECT * FROM posts ORDER BY time DESC");
while ($row = mysql_fetch_array($result)) {
    $result1 = mysql_query("SELECT * FROM friends WHERE friends = $row{'name'}");
    $row1 = mysql_fetch_array($result1);
    if ($row == 1) {
        echo "<b style='color: #D55292;'>".$row{'name'}."</b> says <br>".$row{'cont'}."<br><b style='color: #A1A1A1';>Posted on ".$row{'time'}."</b><br><br>";
    }
 } 
```

我收到这些错误：

```
Notice: Array to string conversion in C:\xampp\htdocs\index.php on line 44

Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in        C:\xampp\htdocs\index.php on line 45

Notice: Array to string conversion in C:\xampp\htdocs\index.php on line 44

Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C:\xampp\htdocs\index.php on line 45

Notice: Array to string conversion in C:\xampp\htdocs\index.php on line 44

Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C:\xampp\htdocs\index.php on line 45 
```

你们能给我一些关于我将如何去做的指示吗？提前致谢！

我只是觉得这个问题可能不够清楚：

我有一套将你所有的“朋友”存储在我的“朋友”表中。我还有一个表格，其中存储了所有“帖子”，其中包含您的姓名、内容、时间以及可以查看的人的值。我正在尝试获取这些帖子（我已经成功完成了）并打印它们。我能做到。我只是想这样做，这样您就只能看到“名称”值等于“朋友”集中的字符串的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:06:25.233

在这一行：

```
$result1 = mysql_query("SELECT * FROM friends WHERE friends = $row{'name'}"); 
```

替换`$row{'name'}`为`{$row['name']}`：

```
$result1 = mysql_query("SELECT * FROM friends WHERE friends = {$row['name']}"); 
```

或者看起来你可能只是这样做：

```
$result1 = mysql_query("SELECT * FROM friends WHERE friends = {$row{'name'}}"); 
```

此外，你有非常不寻常的按指数取值的风格。通常括号`[`和`]`用于那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:06:52.623

一些 PHP 错误：AFAIR 不是`$row{'name'}`，但是`$row['name']`您应该在字符串之外启动变量。同样的事情`$row{'cont'}`

```
$result = mysql_query("SELECT * FROM posts ORDER BY time DESC");
while ($row = mysql_fetch_array($result)) {
    $name = $row['name'];
    $result1 = mysql_query("SELECT * FROM friends WHERE friends = '$name'");
    $row1 = mysql_fetch_array($result1);
    if ($row == 1) {
        echo "<b style='color: #D55292;'>".$row['name']."</b> says <br>".$row['cont']."<br><b style='color: #A1A1A1';>Posted on ".$row['time']."</b><br><br>";
    }
 } 
```

我不确定，既然你不在代码中使用它们，为什么你需要`$result1`分别。`$row1`更好的解决方案是，如果您加入这两个表，这样您就不需要为每个帖子执行的第二个查询：

```
 $sql = "SELECT post.time, friends.name, ... 
           FROM post 
           JOIN friends on post.name = friends.name 
       ORDER BY post.time DESC"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:06:19.020

您的第二个查询需要如下所示：`$row['name']`

```
$result1 = mysql_query("SELECT * FROM friends WHERE friends = '" . $row['name'] . "'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T18:08:17.893

mysql_fetch_array() 返回一个字符串数组。你不能写：-

```
$row1 = mysql_fetch_array($result1); 
```

这就是为什么它给出这个警告： -

注意：第 44 行 C:\xampp\htdocs\index.php 中的数组到字符串转换

第二件事：-

`$row{'name'}`-< 这个语法是错误的。改为使用`$row['name']`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T18:09:17.453

我不知道您是如何编码的，但这就是我将如何实现您的代码正在尝试做的事情，我认为它正在尝试做的事情。

```
 $result = mysql_query("SELECT * FROM posts ORDER BY time DESC");

//use mysql_fetch_assoc instead of mysql_fetch_array. Makes more sense to me

while ($row = mysql_fetch_assoc($result)) {

    //Then instead or $row{'name'}, you use $row['name']
    $result1 = mysql_query("SELECT * FROM friends WHERE friends = $row{'name'}");
    $row1 = mysql_fetch_array($result1);
    if ($row == 1) {
        echo "".$row{'name'}." says 
".$row{'cont'}."
Posted on ".$row{'time'}."

";
    }
 } 
```

希望能帮助到你。

# python - 为什么这个 Python 脚本会崩溃？

> ID：15818427
> 
> 赞同：1
> 
> 时间：2013-04-04T18:02:19.470
> 
> 标签：python, python-2.7

这个 Python 脚本运行了好几天然后崩溃了，你知道为什么会发生这种情况或如何调试它吗？它连接到一个 Arduino，当它通过串行接收到“1”时，它会发送一个高电平引脚。该脚本在计算机启动时启动，并且应该永远运行。但是，如果它确实崩溃了，我无法重新启动脚本，因为计算机位于远程位置。

```
import json
import urllib
from pprint import pprint
import time
import serial

#to collect the first tweet without telling the arduino
countTweet = 0
tweet= 0
noTweet= 0

#the infinate loop
while True:
    #the connection to the arduino
    ser = serial.Serial('COM3',9600)
    #not connected to arduino before connection is made
    connected = False

    #loop until the arduino is connected
    while not connected:
        serin = ser.read()
        connected = True
    #debug arduino connection
    if connected == True:
        pprint('connected to arduino')

    #j contains the JSON
    j =json.loads(urllib.urlopen('http://search.twitter.com/search.json?q=%23workrestandplayground&result_type=recent&rpp=1&filter:retweets').read())

    #Debug JSON from twitter (for faults on the Twitter end or possible GET limit id below 15 seconds per request)
    pprint(j)

    #find the text and the tweet id
    if j['results']:
        text = j['results'][0]['text']
        id = j['results'][0]['id']
        #how many times the Json is correct
        tweet+= 1
    else:
        #How many times the Json is false
        noTweet += 1

    #print the text and id to the screen
#    pprint(text)
#    pprint(id)

    #to isolate the first loop, if the first ID has been stored already (count == 1)
    if countTweet != 0:
        pprint ("new loop")
        #if lastID is not equal to ID
        if lastID != id:
        #Tell Arduino to Vend
            ser.write('1')
            #ser.write('0')
            #loop until the arduino tells us it is done vending
            while ser.read() == '1':
                ser.read()
            #Debug
            pprint(text)
            pprint(id)
            #Make lastID equal to ID
            lastID = id
            pprint ('lastID updated')
        #if no new tweets, print     
        else:
            pprint ('no new tweets')
    #If it's the first loop, confirm by printing to the screen
    else:
        pprint("First loop complete")
        lastID = id
        pprint(lastID)

    #make count not equal to 0 after first loop
    countTweet += 1

    pprint ('closing arduino connection')
    ser.close()

    #wait
    pprint('waiting 15 seconds')
    pprint ('Number of Tweets')
    pprint (countTweet)
    pprint('Working JSON')
    pprint(tweet)
    pprint('Broken JSON')
    pprint(noTweet)
    time.sleep(15) 
```

错误信息如下

```
 Traceback (most recent call last):
  File "C:\Users\3d Exposure\Desktop\M001.py", line 19, in <module>
    ser = serial.Serial('COM3',9600)
  File "C:\Python27\lib\site-packages\serial\serialwin32.py", line 31, in __init__
    SerialBase.__init__(self, *args, **kwargs)
  File "C:\Python27\lib\site-packages\serial\serialutil.py", line 261, in __init__
    self.open()
  File "C:\Python27\lib\site-packages\serial\serialwin32.py", line 71, in open
    self._reconfigurePort()
  File "C:\Python27\lib\site-packages\serial\serialwin32.py", line 186, in _reconfigurePort
    raise ValueError("Cannot configure port, some setting was wrong. Original message: %s" % ctypes.WinError())
ValueError: Cannot configure port, some setting was wrong. Original message: [Error 31] A device attached to the system is not functioning. 
```

我认为这是该声明的问题

```
while ser.read() == '1':
    ser.read() 
```

我被告知这将省略所有其他串行数据。我怎样才能写这个，这样它就不会遗漏任何东西？将要

```
while ser.read() == '0':
   break 
```

工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T18:22:00.723

我没有看到任何错误处理。因此，出现任何问题都会导致脚本退出。例如，如果 Internet 连接或 Twitter 出现故障，`urlopen`呼叫将失败，整个脚本将停止工作。这是添加错误处理最明显的地方，但是如果断开串行端口会发生什么？

添加错误处理来处理潜在的错误，否则 Python 会处理错误，而你不会喜欢它这样做的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:26:10.740

您可以`urllib.urlopen`使用以下命令保护呼叫`try...except`：

```
try:
   response = urllib.urlopen('http://search.twitter.com/search.json?q=%23workrestandplayground&result_type=recent&rpp=1&filter:retweets')
except IOError:
   # This includes urllib.ContentTooShortError
   time.sleep(60)
   continue
j =json.loads(response.read()) 
```

# java - 如何在不使用 Java 中的静态或任何静态方法的情况下打印返回方法的结果

> ID：15818428
> 
> 赞同：0
> 
> 时间：2013-04-04T18:02:21.180
> 
> 标签：java, static

我目前是 Java 新手，需要帮助。所以我想在不使用“静态”的情况下为我的排序代码创建三种方法。我想使用的三种方法是 myRandom，创建一个随机数数组，mySort，从最高到最低排序数组，以及 printArray，打印数组。问题是我不知道如何在排序后打印数组。打印方法不起作用吗？到目前为止，这是我的代码：

```
import java.util.Arrays;
import java.util.Random;

public class SortAnimate6
{ 
    public static void main(String args[])
    {
        int numbers[] = new int[10];

        System.out.println("The array original:");

        System.out.println("The array generated:");

    }

    public int [] myRandom (int[] numbers)
    {
       Random random = new Random();
       for(int i=0; i<numbers.length; i++)
           numbers[i] = random.nextInt(20); 
       return numbers;
    }

    public  void printArray(int[] list)
    {
         for (int counter = 0; counter < list.length; counter++)
             System.out.print(list[counter] + " ");
         System.out.println();
    }

    public int[] mySort (int[] numbers)
    {
        for(int i=0; i<numbers.length; i++)
        {
            for(int j=0; j<numbers.length; j++)
            {
                if(numbers[i] < numbers[j])
                {
                    int temp = numbers[i];
                    numbers[i] = numbers[j];
                    numbers[j] = temp;
                }
            }
        }
        return numbers;
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:10:35.107

查看您的代码后，您似乎需要调用您想要使用的方法。例如，如果你想调用我的排序，你需要通过键入将 int 数组传递给方法

```
mySort(myPassedIntArrayVariable); 
```

您还可以使用您所在的 return 语句在 Main 方法中设置新变量。例如，您可以将排序存储在一个新变量中，例如

```
int[] storageArray = mySort(myPassedIntArrayVariable); 
```

希望这可以帮助。如果这对您的问题没有帮助，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:08:37.130

方法 printArray 和 mySort 不是静态的，因此它们属于该类。

我给你部分答案......

```
SortAnimate6 me = new SortAnimate6();
System.out.println("The array original:");
me.printArray(numbers); 
```

希望这会给你一些尝试，并继续前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:34:28.373

如果您不严格使用您提到的 3 种方法，那么您应该使用这个简单的代码

将数组转换为列表

```
Arrays.asList(yourArray);

Now simple use collections.sort(resultList)

Lastly iterate on list to print each number with sysout . Thats it 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T00:09:29.900

如果不创建 SortAnimate6 的实例来调用它们，就不能调用这些方法中的任何一个。

# angularjs - 如何从父范围检查包含 ng 的表单的有效性？

> ID：15818431
> 
> 赞同：28
> 
> 时间：2013-04-04T18:02:26.117
> 
> 标签：angularjs, angularjs-scope

我有一个在我的应用程序中的多个视图之间共享的子表单。在一个视图中，此子表单单独显示，底部有一个后退/继续按钮，可将用户引导至下一个子表单。在另一个视图中，子表单与其他子表单（基本上是一个长表单）显示在同一页面上。

由于子表单的 html 在两个视图中都是 100% 相同的，因此我将它分成一个部分并`ng-include`用于渲染它。在仅显示带有后退/继续按钮的子表单的视图中，我在父 HTML 中呈现后退/继续按钮。

从视觉上看，一切正常，我可以访问在表单 ( `user.email, user.password, user.etc...`) 中输入的所有数据。

问题是我根据用户是否正确完成表单来启用/禁用“继续”按钮，这在“仅子表单”变体中不起作用，因为父范围似乎没有能够访问表单的状态。如果我将按钮粘贴在部分中，它可以工作，但我不想这样做，因为在使用此部分的每个实例中按钮都不属于那里。

[JSFiddle 示例](http://jsfiddle.net/BLVcG/1/)

请注意，在我的示例中，红色边框内的提交按钮被禁用，直到在框中键入内容并且“表单无效？” 值更新，而蓝色边框内的按钮始终处于启用状态并且“表单无效？” 值为空白。

如何`myForm.$invalid`从父范围访问值？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-05-16T17:32:43.337

使用 ng-include 时创建的子作用域对父作用隐藏了表单函数。

除了使用指令之外，您还可以在父级中添加一个对象，但是将表单的名称设置为具有如下属性的对象很重要：

```
<form name="myFormHolder.myForm"> 
```

并在父控制器中

```
$scope.myFormHolder = {}; 
```

那么以下应该工作：

```
$scope.myFormHolder.myForm.$pristine 
```

这样，在评估表单时， myForm.$valid 将在父级上设置。我相信我问过同样的问题：[为什么在检查 $pristine 或 $setDirty() 时在 ng-include 中形成 undefined？](https://stackoverflow.com/questions/23686831/why-form-undefined-inside-ng-include-when-checking-pristine-or-setdirty/23687917?noredirect=1#23687917)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-09T09:16:56.457

如果它是子表单，您只需将表单标签从子表单移动到主表单：[更新的 JSFiddle](http://jsfiddle.net/rn3nV/)

您还可以使用[ngForm-directive](http://docs.angularjs.org/api/ng.directive:ngForm)嵌套表单：

> 在角度形式可以嵌套。这意味着当所有子表单都有效时，外部表单也有效。但是浏览器不允许嵌套元素，因此 Angular 提供了 ngForm 别名，它的行为与表单嵌套相同，但允许表单嵌套。

结果有点混乱。我宁愿创建一个具有新范围的“myForm”指令以避免使用 $parent - 例如：

```
myApp.directive('myForm',function(){
    return{ 
        restrict:'E',
        scope:{model:'='},
        templateUrl:'/form.html',
        replace:true
    }
}); 
```

- 看这个[JSFiddle 例子](http://jsfiddle.net/9AFzS/)

# linux - 提取压缩的 tar 文件时是否需要指定压缩级别？

> ID：15818433
> 
> 赞同：1
> 
> 时间：2013-04-04T18:02:29.997
> 
> 标签：linux, macos, gzip, tar, bzip2

从我目前在 OSX 10.8 和 CentOS 5.5 上的测试来看，它看起来像是`tar`自动推断出存档的压缩类型，即我可以做`tar -xf <compressed archive>`而不是做`tar -jxf <bzip2 compressed archive>`or `tar -zxf <gzip compressed archive>`。

我想知道我是否可以依赖 tar 的这个自动压缩检测功能，还是这个功能是新的？

这些是我玩过的 tar 版本。

OSX 10.8——bsdtar 2.8.3——libarchive 2.8.3

CentOs 5.5 -- 焦油 (GNU 焦油) 1.15.1

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:09:57.403

[如此处](https://askubuntu.com/a/107976/39599)所述，现代 gnu-tar 似乎能够自动检测所有压缩类型。所以要回答你的问题，不，你不必指定类型，yes`tar -xf`总是可以正常工作。

# java - 当索引以数组大小为模时，是否可以使索引越界？

> ID：15818436
> 
> 赞同：-1
> 
> 时间：2013-04-04T18:02:40.807
> 
> 标签：java

我有以下代码，但有时我会`java.lang.ArrayIndexOutOfBoundsException`使用`subject.gets`. 我不知道这怎么可能发生，但它确实发生了。我有一些多线程正在进行，但这个数组是函数本地的，不能从其他任何地方访问。

```
// Within onCreate
Random random = new Random();

// some where else
List<Subject> subjects = new ArrayList<Subject>();

// There is SOME CODE HERE TO ADD ELEMENTS.
// There is SOME CODE HERE TO ADD ELEMENTS.
// There is SOME CODE HERE TO ADD ELEMENTS.
// There is SOME CODE HERE TO ADD ELEMENTS.
// There is SOME CODE HERE TO ADD ELEMENTS.

subjects.get(random.nextInt() % subjects.size()) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T18:04:44.143

如果 random.nextInt() 返回一个负整数，则 mod 操作的结果将为负数。

有关可能的解决方案，请参阅评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:09:20.067

从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt%28%29)：

**`nextInt()`**操作将返回您

> 所有 2 ^(32 个)可能的 int 值

这也包括**负值**，这就是导致您索引超出范围的原因

你可以做些什么来解决这个问题是使用`nextInt(int n)`

**`nextInt(int n)`**操作将返回您：

> 返回一个伪随机、均匀分布的 int 值，介于 0（包括）和指定值（不包括）之间，取自该随机数生成器的序列。

这将**保证**您随机数是**正值**。

# ios - 在 appdelegate 中定义 UIabel

> ID：15818439
> 
> 赞同：0
> 
> 时间：2013-04-04T18:02:51.280
> 
> 标签：ios, objective-c, xcode

所以，在这个项目的最后阶段，我决定我想要通知。问题是，我`UILabel`在我的 MainViewController 中有一个设置，它从那里的输入中获取它的值，我需要将这些值用于我的通知设置中的时间间隔，当应用程序进入后台时会调用它。（代码位于`Appdelegate.m`）

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
NSDate *alertTime = [[NSDate date]
                     dateByAddingTimeInterval:[self.labelone.text intValue] * 60];
UIApplication* app = [UIApplication sharedApplication];
UILocalNotification* notifyAlarm = [[UILocalNotification alloc]
                                    init];
if (notifyAlarm)
{
    notifyAlarm.fireDate = alertTime;
    notifyAlarm.timeZone = [NSTimeZone defaultTimeZone];
    notifyAlarm.repeatInterval = 0;
    notifyAlarm.soundName = UILocalNotificationDefaultSoundName;
    notifyAlarm.alertBody = @"Staff meeting in 30 minutes";
    [app scheduleLocalNotification:notifyAlarm];
    }
} 
```

我已经尝试普遍添加`UILabel`( `self.labelone`) ，但无论我尝试什么，它都会引发错误。任何帮助或提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:13:36.727

在你的内部`AppDelegate`，创建一个`UILabel`名为`timeIntervalLabel`.

然后 inside简单`MainViewController`地`viewDidLoad`做：

```
AppDelegate *d = [UIApplication sharedApplication].delegate;
d.timeIntervalLabel = self.labelone 
```

最后，在你的内部`applicationDidEnterBackground`你可以使用`self.timeIntervalLabel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:14:37.450

您可以在 MainViewController 的 viewDidLoad 方法中通过 NSNotificationCenter 注册通知来监听 MainViewController 中的后台通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willEnterBackground:) name:UIApplicationDidEnterBackgroundNotification object:nil]; 
```

当应用程序进入后台时，您的 MainViewController 将调用选择器 willEnterBackground:，因此您需要进行设置：

```
- (void)willEnterBackground:(NSNotification *)notification {
    ...you can now access self.labelone
} 
```

在 MainViewController viewDidUnload 方法中，移除该通知的观察者：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidEnterBackgroundNotification object:nil]; 
```

# php - preg_match 文本后的 ID 号

> ID：15818442
> 
> 赞同：1
> 
> 时间：2013-04-04T18:03:02.343
> 
> 标签：php

我试图从 $_POST 中检索 id，但它从未进入`preg_match`if。

我试过的：

```
echo "<b>Image: </b><input type='text' name='image_" . $row['id'] . "' value='";

...
    foreach ($_POST as $key => $value)
        {
        if (preg_match('^image_(\d*)$', $key, $matches))
            {
            $id = $matches[1];
            if (isset($_POST['title_' . $id]))
                {
                mysql_query("UPDATE table SET title='" . $_POST['title_' . $id] . "' where id='$id'");
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:05:15.180

您缺少[分隔符](http://www.php.net/manual/en/regexp.reference.delimiters.php)：

```
'^image_(\d*)$' 
```

应该是（例如）：

```
'/^image_(\d*)$/' 
```

# soapui - 如何在 SOAPUI 的命令行中指定 HttpSettings@socket_timeout

> ID：15818443
> 
> 赞同：2
> 
> 时间：2013-04-04T18:03:04.103
> 
> 标签：soapui

我正在使用 SoapUI 并想知道是否可以在命令行中指定 HttpSettings@socket_timeout ..？

m 使用 ant 目标来执行我的测试用例，例如

```
<exec executable="cmd">
         <arg value="/c"/>
         <arg value="testrunner.bat"/>
         <arg value="-e${test.server}"/>
         <arg value="-s${test.suite}"/>
         <arg value="-r"/>
         <arg value="-a"/>
         <arg value="-j"/>         
         <arg value="-f${test.report}"/>
         <arg value="${soapui.project.file}/>               
</exec> 
```

我可以添加类似的内容吗：`<arg value="-GHttpSettings.socket_timeout=2000"/>` 我相信 -g 用于具有 property.name=value 的全局设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T18:19:19.710

您是正确的， -G 是通过命令行设置全局参数值的语法，但我没有成功让命令行接受新的 socket_timeout 值。当然，我通过在 Jenkins 作业中调用 testrunner.bat 来执行测试，但命令行参数语法应该相同。

以下都不适合我：

*   -GHttpSettings.socket_timeout=2000
*   -GHttpSettings@socket_timeout=2000
*   -Gsocket_timeout=2000

我可以让命令行 SoapUI 接受套接字超时的自定义值的唯一方法是在 soapui-settings.xml 中为正在执行测试的用户设置该值。在基于 Windows 的测试环境中，此文件位于 C:\Users\MyUserName\soapui-settings.xml。这是我的文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-settings xmlns:con="http://eviware.com/soapui/config">
<con:setting id="HttpSettings@socket_timeout">2000</con:setting>
</con:soapui-settings> 
```

如果在您的情况下使用soapui-settings.xml 文件是一种合理的方法，那么这应该适合您。

# ruby-on-rails - 活动管理员 Ruby on rails 仪表板控制器错误

> ID：15818446
> 
> 赞同：19
> 
> 时间：2013-04-04T18:03:12.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, activeadmin

突然间，我的应用似乎出现了路由错误`uninitialized constant DashboardController`

我正在使用 ActiveAdmin (0.6.0) 运行 Rails 3.2.0，直到今天一切似乎都运行良好。

日志报告尝试运行 localhost:3000 时发生的以下错误：

```
Started GET "/" for 127.0.0.1 at 2013-04-04 18:59:21 +0100

ActionController::RoutingError (uninitialized constant DashboardController):
  activesupport (3.2.0) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (3.2.0) lib/active_support/inflector/methods.rb:225:in `each'
  activesupport (3.2.0) lib/active_support/inflector/methods.rb:225:in `constantize'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:62:in `controller_reference'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:47:in `controller'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:26:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:570:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.0) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `_run__972453933__call__19086187__callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.0) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  thin (1.5.1) lib/thin/connection.rb:81:in `block in pre_process'
  thin (1.5.1) lib/thin/connection.rb:79:in `catch'
  thin (1.5.1) lib/thin/connection.rb:79:in `pre_process'
  thin (1.5.1) lib/thin/connection.rb:54:in `process'
  thin (1.5.1) lib/thin/connection.rb:39:in `receive_data'
  eventmachine-1.0.3-x86 (mingw32) lib/eventmachine.rb:187:in `run_machine'
  eventmachine-1.0.3-x86 (mingw32) lib/eventmachine.rb:187:in `run'
  thin (1.5.1) lib/thin/backends/base.rb:63:in `start'
  thin (1.5.1) lib/thin/server.rb:159:in `start'
  rack (1.4.5) lib/rack/handler/thin.rb:13:in `run'
  rack (1.4.5) lib/rack/server.rb:268:in `start'
  railties (3.2.0) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.0) lib/rails/commands.rb:55:in `block in <top (required)>'
  railties (3.2.0) lib/rails/commands.rb:50:in `tap'
  railties (3.2.0) lib/rails/commands.rb:50:in `<top (required)>'
  script/rails:6:in `require'
  script/rails:6:in `<main>'

  Rendered C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (234.0ms) 
```

有没有其他人有这个错误？人们可以提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-04T19:54:09.633

将根 :to => yourController#index 移到 ActiveAdmin.routes(self) 上方

当你运行时，`bundle exec rake routes`你会在dashboard#index 上方看到你的Controller#index。

出现该问题是因为它有 2 条通往 root 的路由（1 条来自您，1 条来自 Active Admin）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-27T15:20:39.117

我缺少文件 app/admin/dashboards.rb ，请参阅[https://github.com/gregbell/active_admin#upgrading](https://github.com/gregbell/active_admin#upgrading)和[https://raw.github.com/gregbell/active_admin/master/lib/generators/active_admin/install /模板/仪表板.rb](https://raw.github.com/gregbell/active_admin/master/lib/generators/active_admin/install/templates/dashboard.rb)

# r - 在没有连续相同数字的情况下在 r 中采样

> ID：15818449
> 
> 赞同：8
> 
> 时间：2013-04-04T18:03:29.780
> 
> 标签：r

我对 R 很陌生，但是我进行了很多搜索，但没有找到我的问题的答案。

我有一个多次重复 8 位数字的向量：

```
allNum <- c(rep(1, 70), rep(2, 70), rep(3, 35), rep(4, 35), 
            rep(5, 70), rep(6, 70), rep(7, 35), rep(8, 35)) 
```

现在我想对此进行排列（大概使用`sample(allNum, 420, replace=FALSE)`），但我不想要任何连续的相同数字 - 例如：1 2 2 8

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T19:32:21.597

您有一个问题，即有可能随机选择元素而不是受限于您的选择。特别是，如果您必须选择的元素数量超过 $2n-1$，其中 $n$ 是最频繁出现的元素的次数，您可以选择一个随机元素（与前面的约束一致）。但是，如果这些数字相等，那么对于序列的其余部分，最频繁的值必须位于每隔一个位置（并且可以随机分配之间的值）。识别此约束允许单次通过（随机选择不超过原始向量中的元素）。

```
permute.nonconsec <- function(allNum) {
  fully.constrained <- function(x) {
    2*max(table(x)) - 1 == length(x)
  }
  permuted <- numeric(length(allNum))
  permuted[1] <- sample(allNum, 1)
  allNum <- allNum[-min(which(allNum==permuted[1]))]
  for (i in seq_along(allNum)+1) {
    if(fully.constrained(allNum)) {
      # switch to deterministic algorithm
      # determine which value is the constraining one
      r <- rle(sort(allNum))
      limiter <- r$values[r$lengths==max(r$lengths)]
      permuted[seq(i, length(permuted), by=2)] <- limiter
      remaining <- allNum[allNum != limiter]
      if (length(remaining)>0) {
        permuted[seq(i+1, length(permuted), by=2)] <- 
          remaining[sample.int(length(remaining))]
      }
      break;
    }
    available <- allNum[allNum != permuted[i-1]]
    permuted[i] <- available[sample.int(length(available), 1)]
    allNum <- allNum[-min(which(allNum==permuted[i]))]
  }
  permuted
} 
```

如果没有可能的安排：这将失败`length(x) < 2 * max(table(x)) - 1`，但如果需要，可以添加初始检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:48:59.450

这是一个简单的算法：

```
N = 420
i = as.integer(runif(1, 1, length(allNum)))
result = allNum[i]
allNum = allNum[-i]
while (N != 1) {
  N = N - 1

  # pick a random value that's different from last chosen one
  last = result[length(result)]
  i = as.integer(runif(1, 1, sum(allNum != last)))
  result = c(result, allNum[allNum != last][i])

  # remove any (doesn't matter which) element of allNum that's
  # equal to last choice, to sample without replacement
  last = result[length(result)]
  allNum = allNum[-which(allNum == last)[1]]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:28:48.820

借用[先前的答案](https://stackoverflow.com/a/14696912/697568)，一种方法是蛮力并继续采样，直到获得具有所需特征的排列。

```
nonconsec.permute <- function(pop,size) {
  while(!exists("x",inherits=FALSE) || 0 %in% diff(x)) {
    x <- sample(pop, size, replace=F)
  }
} 
```

但是，以下命令需要很长时间，因为在您提供的示例中，相同的连续数字非常常见。所以这种方法在你的具体情况下是不可行的。

```
nonconsec.permute(allNum,420) 
```

# java - 如何获得不匹配的模式：正则表达式后面没有另一个正则表达式

> ID：15818450
> 
> 赞同：1
> 
> 时间：2013-04-04T18:03:32.880
> 
> 标签：java, regex, regex-negation, lookahead, negative-lookahead

这显然是一个简化的情况，但需要的是一个不匹配`aabb|bbaa`但可以正常工作的正则表达式`aabb`（不跟随`|...`）。

像这样的正则表达式`[ab]+(?!\|[ab]+)*`非常接近，但它仍然匹配`aabb`from ，而在这种情况下`aabb|bbaa`我想*根本不匹配。*

不允许使用字符串开头 ( `^`) 和字符串结尾 ( ) 锚点。`$`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:20:52.377

你实际上确实需要在你的前瞻中锚定，一种或另一种

```
 [ab]+(?=[^ab]*\z) 
```

更一般地说，在哪里`a`和`b`是任意子表达式，您需要：

```
 (?:a|b)+(?=(?s:(?!a)(?!b).)*\z) 
```

为了易读性和可维护性，应***始终以`/x`模式编写：***

```
 (?x)           # enable white space and comments

 (?: a          # any a
   | b          # or b
 ) +            # repeated once or more, preferring more

 # now a lookahead assertion
 (?=
     (?s: (?!a)  # not a coming right up at this point
          (?!b)  # nor b coming  right up at this point
          .      # any single code point
     ) *         # repeated zero or more times
     \z          # anchored to the end of the string
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:19:51.300

没有规定必须用一个正则表达式表达所有内容。它还使代码不可读。我会建议像

```
not (matches "aabb\|bbaa") and (matches "aabb") 
```

如果你坚持，你可以使用

```
([ab]+)(\|[ab]+)* 
```

如果第二组不为空，则丢弃匹配项。

# java - 从几何组合的矩形创建直线多边形

> ID：15818451
> 
> 赞同：3
> 
> 时间：2013-04-04T18:03:33.890
> 
> 标签：java, geometry, slick2d, polygons

我到处搜索，我似乎无法弄清楚。我发现很多关于直线/正交多边形分解的文章，但没有关于如何构造一个的文章。

我正在使用 Slick2D，并且我有一个平铺地图。我想通过从任何接触的矩形中制作单个多边形（即并排组合）来最小化我必须计算的碰撞量。

示例：[https ://www.dropbox.com/s/2kf8olw5701e1xn/rectilinear_polygon.png](https://www.dropbox.com/s/2kf8olw5701e1xn/rectilinear_polygon.png)

我正在使用的是矩形的二维数组。我可以遍历并找出哪些是感人的等等，但由于某种原因，我无法弄清楚为什么 .union() 不起作用（或者我可能不完全理解它？）。在 slick2D 中，它返回一个 Shape[]，而在 awt 中，似乎有一个方法 .createUnion()，我在我的程序之外尝试过，但无论出于何种原因它都不起作用。不过，出于兼容性的明显原因，我宁愿坚持使用 slick2D 类。

Slick2D 矩形类 - [http://www.slick2d.org/javadoc/org/newdawn/slick/geom/Rectangle.html](http://www.slick2d.org/javadoc/org/newdawn/slick/geom/Rectangle.html)

我现在的方法很简单。只需使用两个方块进行测试，一旦我通过循环遍历它们，它就会完全展开。

```
Polygon p = new Polygon();

//Calculate polygons
public void calcPoly(){
    //The blocking array is all rectangles, [0,0] and [1,0] are known to be touching.
    p = RectangleToPolygon(blocking[0][0]);
    p.union(RectangleToPolygon(blocking[1][0]));
} 
```

而且我也有一个矩形到多边形的方法，以确保我一直在使用多边形。

```
public Polygon RectangleToPolygon(Rectangle rect) {
    Polygon result = new Polygon();
    result.addPoint(rect.getX(), rect.getY());
    result.addPoint(rect.getX() + rect.getWidth(), rect.getY());
    result.addPoint(rect.getX() + rect.getWidth(), rect.getY() + rect.getHeight());
    result.addPoint(rect.getX(), rect.getY() + rect.getHeight());
    return result;
} 
```

这并不是说我遇到了错误。事实上，我没有得到任何改变。没有输出，没有错误，没有统一。这看似简单的事情，然而，它不想让步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:32:56.490

我找到了我想要完成的事情的答案（部分；我仍然得到一些奇怪的结果，但总的来说，它返回了我想要的一般意义上的东西）。

Slick2D 库中有一个 Geom Utility 类，它也有一个 .union() 方法。如果联合有效，则返回大小为 1 的 Shape 数组，如果形状保持分离，则返回 2。这与 Rectangle 和 Shape 类中的 .union() 不同（出于某种奇怪的原因......）

# .htaccess - 带有 QSA 的 htaccess 查询字符串

> ID：15818464
> 
> 赞同：0
> 
> 时间：2013-04-04T18:04:00.737
> 
> 标签：.htaccess, mod-rewrite, query-string, qsa

我正在尝试在 htaccess 中设置通用规则，以使用不同的查询字符串删除 .php 扩展名和链接，例如

`domainname.com/welcome.php?user=normal&type=free&uid=100`
`domainname.com/welcome.php?user=normal`
`domainname.com/welcome.php?log=new&theme=red`

和预期的链接，如

`domainname.com/welcome?user=normal&type=free&uid=100`
`domainname.com/welcome?user=normal`
`domainname.com/welcome?log=new&theme=red`

htaccess 文件中的规则集，如：

```
RewriteCond %{QUERY_STRING} ^(.*)$
RewriteRule ^(.*)/welcome/$ $1/welcome.php? [QSA,NC,L] 
```

但有些怎么行不通。难道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:22:35.927

在根目录的 .htaccess 文件中试试这个：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  !welcome\.php [NC]
RewriteRule ^welcome/?  /welcome.php      [NC,L] 
```

查询字符串将自动传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:07:40.707

您的答案和评论中的规则集是无序的。如果你想用查询字符串`/$dynamic`重写`/$dynamic.php`，你必须试试这个代码：

```
Options+ FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)/?$
RewriteRule ^(.*) /%1.php [QSA] 
```

甚至`/index1`, `/index2`, `/index3`,`/etc`也会被重写。

# jquery - jQuery 使用类查找正确的选项卡

> ID：15818465
> 
> 赞同：0
> 
> 时间：2013-04-04T18:04:02.210
> 
> 标签：jquery, class, tabs, closest

这是我的问题，我有 jquery UI，我也有一个选项卡内发生的错误，但我希望我的客户无需查看每个选项卡即可找到错误。我的代码应该做的是，如果validationerror可见，它将使用类tabs-panel查找最接近的LI，然后找到附加到该li tabs-1等的ID。然后将其放在它对应的Href旁边因为我发现了错误存在于哪个 div。是的，很疯狂。appendTo 在 URL 的末尾添加了一个感叹号，所以我知道这是问题选项卡，一旦我能做到这一点，我会在稍后添加一条消息，我做得很好。谢谢！

```
$(document).ready(function(){
 var finderror = $('.validationError:visible').closest('div[class^="ui-tabs-panel"]').attr('id');
    if($('.validationError').is(':visible')) {
        $('li a[@href*=' + finderror + ']').appendTo('!');
    };

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:18:17.683

可能是 ui-tabs-panel 类不是类属性值的第一部分。我认为选择器在 IMO 中过于具体，我会将其更改为：

```
closest('div.ui-tabs-panel') 
```

顺便说一句，您应该使用 prop，而不是 attr。

希望这可以帮助。

PS 并且 Floremin 是正确的，应该是 Append，而不是 AppendTo。

进一步编辑：您可能有多个验证错误，因此您实际上需要对它们执行每个操作，如下所示：

```
$(document).ready(function(){
    $('.validationError:visible').each(function(i, e) {
        var finderror = $(e).closest('div.ui-tabs-panel').prop('id');
        $('li a[@href*=' + finderror + ']').removeClass("validationError").addClass("validationError");
    });
}); 
```

而不是感叹，我会用一堂课来做。

* * *

工作代码！

```
 $('.validationError:visible').each(function(i, e) {
         var finderror = $(e).closest('div#tabs > div').prop('id');
    var errorInf = $('li a[href=#' + finderror + ']');
       $(errorInf).append('<span style="color: red; padding: 2px; font-size: 16px;">!</span>');
    });
}); 
```

# c# - WPF 在启动此线程时与 Windows 窗体有何不同？

> ID：15818472
> 
> 赞同：1
> 
> 时间：2013-04-04T18:04:15.783
> 
> 标签：c#, wpf, windows, forms

我有一个最初为 Windows 窗体编写的 DLL。它创建了 2 个窗口形式，一个用于查看来自 BlackMagics 卡的实时视频源，一个用于从视频捕获的静态图像。

DLL 都是静态类，通过包含对 dll 的引用（VideoCapture.dll）来调用，并且在程序中我通过调用来启动捕获屏幕

`VideoCapture.RSVideoControler.Start();`

在 Windows 窗体测试程序中，我有一个仅调用此命令的按钮。视频窗口打开，并让主窗口正常运行。CPU 使用率约为（任务管理器 50）并按预期显示视频源。关闭主程序可以顺利关闭所有内容。

现在启动相同的 DLL 和代码，但放入 WPF 应用程序。在按下按钮之前，应用程序以 0 CPU（任务管理器）运行，您可以正常移动窗口。但在运行启动命令后，应用程序以 99 CPU（任务管理器）运行并且变得无响应。

WPF 在启动此线程时与 Windows 窗体有何不同？

预计到达时间：RSVidoControler

```
using System;
using System.Drawing;
using System.Drawing.Imaging;
using System.Runtime.InteropServices;
using System.Threading;
using System.Windows.Forms;
using VideoCapture.Classes;

namespace VideoCapture
{
    public class RSVideoControler
    {
        public static Bitmap LastImage = new Bitmap(1920, 1080,     PixelFormat.Format16bppRgb565);
        private static VidCardGlobal VideoInterface;
    private static IntPtr m_ip = IntPtr.Zero;
    //[STAThread]
    public static void Start() {VideoInterface = new VidCardGlobal();}
    public static Bitmap GrabFrame()
    {
        if (m_ip != IntPtr.Zero)
        {
            Marshal.FreeCoTaskMem(m_ip);
            m_ip = IntPtr.Zero;
        }
        m_ip = VideoInterface.Click();
        using (Bitmap b = new Bitmap(VideoInterface.Width, VideoInterface.Height, VideoInterface.Stride, PixelFormat.Format16bppRgb565, m_ip))
        {
            if (b != null)
            {
                b.RotateFlip(RotateFlipType.RotateNoneFlipY);
                LastImage.Dispose();
                LastImage = new Bitmap(b);
                b.Dispose();
            }
        }
        return LastImage;
    }
    public static void VideoVisable(bool Visibility)
    {
        VidCardGlobal.VideoViewer.Visible = Visibility;
    }
    public static void ShutDownVideo()
    {
        VideoInterface.Dispose();       // Shuts down Image Capturing interface
        VidCardGlobal.MediaControl.Stop(); // Shuts down Video Viewing Screen
    }
}
} 
```

VidCard全球

```
using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;
using System.Runtime.InteropServices.ComTypes;
using System.Threading;
using System.Windows.Forms;
using DirectShowLib;
using VideoCapture.Forms;

namespace VideoCapture.Classes
{
internal class VidCardGlobal : ISampleGrabberCB, IDisposable
{
    //private object syncLock = new object();
    #region Varables for SingleFrameCapture
    private ManualResetEvent m_PictureReady = null;
    private bool m_WantOne = false;
    private int m_videoWidth;
    private int m_videoHeight;
    private int m_stride;
    private IntPtr m_ipBuffer = IntPtr.Zero;
    private IAMVideoControl m_VidControl = null;
    private IPin m_pinStill = null;
    #endregion
    public int Width { get { return m_videoWidth; } }
    public int Height { get { return m_videoHeight; } }
    public int Stride { get { return m_stride; } }
    public static VideoFeed VideoViewer = new VideoFeed();
    #region DirectShow Stuff
    public MemoryStream stream { get; private set; }
    public static IGraphBuilder graph;
    public static IVMRWindowlessControl9 WindowlessControl = null;
    public static IBaseFilter pinfilter;
    public static bool VideoHandlersAdded = false;
    public static IMediaControl MediaControl;
    public static ISampleGrabber SampleGrabberFilter;

    //public static AMMediaType DefaultMediaType = new AMMediaType();
    //private static IMediaControl mediaControl = null;
    public int SampleCB(double Unknown1, IMediaSample MySample) { return 0; }
    public int BufferCB(double SampleTime, IntPtr pBuffer, int BufferLen)
    {
        Debug.Assert(BufferLen == Math.Abs(m_stride) * m_videoHeight, "Incorrect buffer length");
        if (m_WantOne)
        {
            m_WantOne = false;
            Debug.Assert(m_ipBuffer != IntPtr.Zero, "Unitialized buffer");
            CopyMemory(m_ipBuffer, pBuffer, BufferLen);
            m_PictureReady.Set();
        }

        return 0;
    }
    #region IDisposable
    public void Dispose(bool disposing)
    {
        if (disposing)
        {
            //if (stream != null)
            {
                //stream.Dispose();
                //stream = null;
            }
        }
    }
    public void Dispose()
    {
        Dispose(true);
    }
    #endregion
    public static IBaseFilter CreateFilterbyName(string filterName, Guid category)
    {
        int hr = 0;
        DsDevice[] Devices = DsDevice.GetDevicesOfCat(category);
        foreach (DsDevice dev in Devices)
            if (dev.Name == filterName)
            {
                IBaseFilter filter = null;
                IBindCtx bindCtx = null;
                try
                {
                    hr = CreateBindCtx(0, out bindCtx);
                    DsError.ThrowExceptionForHR(hr);
                    Guid guid = typeof(IBaseFilter).GUID;
                    object obj;
                    dev.Mon.BindToObject(bindCtx, null, ref guid, out obj);
                    filter = (IBaseFilter)obj;
                }
                finally
                {
                    if (bindCtx != null) Marshal.ReleaseComObject(bindCtx);
                }
                return filter;
            }
        return null;
    }
    [DllImport("ole32.dll")]
    public static extern int CreateBindCtx(int reserved, out IBindCtx ppcb);
    [DllImport("Kernel32.dll", EntryPoint = "RtlMoveMemory")]
    private static extern void CopyMemory(IntPtr Destination, IntPtr Source, [MarshalAs(UnmanagedType.U4)] int Length);

    private static IPin GetPin(IBaseFilter filter, string pinname)
    {
        IEnumPins epins;
        bool FoundPin = false;
        IPin ValidPin = null;
        int hr = filter.EnumPins(out epins);
        checkHR(hr, "Can't enumerate pins");
        IntPtr Fetched = Marshal.AllocCoTaskMem(4);
        IPin[] Pins = new IPin[1];
        while (epins.Next(1, Pins, Fetched) == 0)
        {
            PinInfo pinfo;
            Pins[0].QueryPinInfo(out pinfo);
            pinfilter = pinfo.filter;
            bool found = (pinfo.name == pinname);
            DsUtils.FreePinInfo(pinfo);
            if (found)
            {
                ValidPin = Pins[0];
                FoundPin = true;
            }
            //return Pins[0];
        }
        if (!FoundPin) checkHR(-1, "Pin not found");
        return ValidPin;
    }
    private static IPin GetVPin(IBaseFilter filter, string pinname)
    {
        IEnumPins epins;
        bool FoundPin = false;
        IPin ValidPin = null;
        int hr = filter.EnumPins(out epins);
        checkHR(hr, "Can't enumerate pins");
        IntPtr Fetched = Marshal.AllocCoTaskMem(4);
        IPin[] Pins = new IPin[1];
        while (epins.Next(1, Pins, Fetched) == 0)
        {
            PinInfo pinfo;
            Pins[0].QueryPinInfo(out pinfo);
            pinfilter = pinfo.filter;
            bool found = (pinfo.name == pinname);
            DsUtils.FreePinInfo(pinfo);
            if (found)
            {
                ValidPin = Pins[0];
                FoundPin = true;
            }
            //return Pins[0];
        }
        if (!FoundPin) checkHR(-1, "Pin not found");

        return ValidPin;
    }
    private static IPin FindPinIterface(IBaseFilter filter, Guid pFormat, PinDirection PinDir, IIPDVDec riid)
    {
        IPin FoundPin = null;
        //hr = GetPin(pFilter, pFormat, PinDir, &FoundPin);
        return FoundPin;
    }
    #endregion
    public VidCardGlobal()
    {

        graph = (IGraphBuilder)new FilterGraph();
        SampleGrabberFilter = (ISampleGrabber)new SampleGrabber();
        MediaControl = (IMediaControl)graph;
        BuildGraph(graph);  //Builds Graph And Connects camera, ect to graph
        m_PictureReady = new ManualResetEvent(false);
        MediaControl.Run();
        VideoViewer.VideoFeed_ResizeMove(null, null);
    }
    ~VidCardGlobal()
    {
        Dispose();
    }
    private static void checkHR(int HR, string ErrorMessage)
    {
        if (HR < 0)
        {
            MessageBox.Show(ErrorMessage, "CheckER Error", MessageBoxButtons.OK, MessageBoxIcon.Warning);
            try
            {
                DsError.ThrowExceptionForHR(HR);
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message);
                //DsError.ThrowExceptionForHR(HR);
            }

        }
    }
    public void BuildGraph(IGraphBuilder pGraph)
    {

        int hr = 0;
        int DVC = 0;
        int DVCi = 0;
        #region Find Video Capture Card
        DsDevice[] CardFinder = DsDevice.GetDevicesOfCat(FilterCategory.VideoInputDevice);
        foreach (DsDevice Check in CardFinder)
        {
            if (Check.Name == "Decklink Video Capture") DVC = DVCi;
            DVCi++;
        }
        // Magics Card should be CardFinder[0]
        // graph builder
        ICaptureGraphBuilder2 pBuilder = (ICaptureGraphBuilder2)new CaptureGraphBuilder2();
        hr = pBuilder.SetFiltergraph(pGraph);
        checkHR(hr, "Can't SetFiltergraph");
        #endregion
        #region Create Connection to Capture Card
        //Guid HDYC = new Guid(0x43594448, 0x0000, 0x0010, 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71);

        IBaseFilter pDecklinkVideoCature;// = CreateFilterbyName(@"Decklink Video Capture", CLSID_VideoCaptureSource);
        IFilterGraph2 TempFilter = (IFilterGraph2)new FilterGraph();
        hr = TempFilter.AddSourceFilterForMoniker(CardFinder[DVC].Mon, null, CardFinder[DVC].Name, out pDecklinkVideoCature);
        checkHR(hr, "Can't Find Camera");
        hr = pGraph.AddFilter(pDecklinkVideoCature, "Decklink Video Capture");
        checkHR(hr, "Can't add Decklink video Capture to graph");
        // Configure pDecklinkVideoCature for 1080i @ 59.94fps somehow
        IPin VideoOutPin = GetVPin(pDecklinkVideoCature, "Capture");
        //AMMediaType VidMed = new AMMediaType();
        //VidMed.majorType = MediaType.Video;
        //VidMed.formatType = FormatType.VideoInfo;
        //VidMed.subType = MediaSubType.RGB24;
        //hr = VideoOutPin.ConnectionMediaType(VidMed);
        IAMStreamConfig streamConfig = (IAMStreamConfig)VideoOutPin;
        AMMediaType searchmedia;
        AMMediaType CorectvidFormat = new AMMediaType();
        IntPtr ptr;

        int piCount, piSize;
        hr = streamConfig.GetNumberOfCapabilities(out piCount, out piSize);
        ptr = Marshal.AllocCoTaskMem(piSize);
        for (int i = 0; i < piCount; i++)
        {
            hr = streamConfig.GetStreamCaps(i, out searchmedia, ptr);
            VideoInfoHeader v = new VideoInfoHeader();
            Marshal.PtrToStructure(searchmedia.formatPtr, v);
            VideoInfoHeader TestInfoHeader = (VideoInfoHeader)Marshal.PtrToStructure(searchmedia.formatPtr, typeof(VideoInfoHeader));
            int TestWidth = TestInfoHeader.BmiHeader.Width;
            int TestHeight = TestInfoHeader.BmiHeader.Height;
            int TestCompression = TestInfoHeader.BmiHeader.Compression;
            long TestTime = TestInfoHeader.AvgTimePerFrame;
            int TestError = TestInfoHeader.BitErrorRate;
            if ((TestWidth == 1920) & (TestHeight == 1080) & (TestTime == 333667))
            {
                CorectvidFormat = searchmedia;
            }
        }
        VideoInfoHeader videoInfoHeader = (VideoInfoHeader)Marshal.PtrToStructure(CorectvidFormat.formatPtr, typeof(VideoInfoHeader));
        m_videoWidth = videoInfoHeader.BmiHeader.Width;
        m_videoHeight = videoInfoHeader.BmiHeader.Height;
        m_stride = m_videoWidth * (videoInfoHeader.BmiHeader.BitCount / 8);

        hr = streamConfig.SetFormat(CorectvidFormat);
        checkHR(hr, "Can't Get Pin Query");
        #endregion
        #region Create Color Space Converter filter for Sample Grabber (I Hope)
        IBaseFilter pAVIDecompressor2 = (IBaseFilter)new AVIDec();
        hr = pGraph.AddFilter(pAVIDecompressor2, "AVI Decompressor");
        checkHR(hr, "Can't add AVI Decompressor to graph");
        // No Configuration needed for the AVI Decompresser that I know of
        IPin AVIDecompressor2OutPin = GetPin(pAVIDecompressor2, "XForm Out");
        IPin AVIDecompressor2InPin = GetPin(pAVIDecompressor2, "XForm In");

        //IBaseFilter ColorSpaceConverterFilter = new IBaseFilter;
        //hr = pGraph.AddFilter(ColorSpaceConverterFilter, "Color Space Converter");
        //checkHR(hr, "Can't Create Color Space Converter");
        //IPin CSCFIn = GetPin(ColorSpaceConverterFilter, "Input0");
        #endregion

        #region Create Sample Grabber
        AMMediaType SampleMediaType = new AMMediaType();
        SampleMediaType.majorType = MediaType.Video;
        SampleMediaType.subType = MediaSubType.RGB565;
        //SampleMediaType.subType = MediaSubType.UYVY;
        SampleMediaType.formatType = FormatType.VideoInfo;

        //hr = SampleGrabberFilter.SetMediaType(CorectvidFormat);
        hr = SampleGrabberFilter.SetMediaType(SampleMediaType);
        checkHR(hr, "Can't Set Sample Grabber Media Type");
        //ISampleGrabberCB pcallback;
        SampleGrabberFilter.SetCallback(this, 1);
        hr = SampleGrabberFilter.SetBufferSamples(false);
        hr = SampleGrabberFilter.SetOneShot(false);
        hr = pGraph.AddFilter((IBaseFilter)SampleGrabberFilter, "Sample Grabber");
        checkHR(hr, "Can't Add Sample Grabber");
        IPin SGFIn = GetPin((IBaseFilter)SampleGrabberFilter, "Input");
        IPin SGFOut = GetPin((IBaseFilter)SampleGrabberFilter, "Output");
        #endregion
        #region Create Null Renderer
        IBaseFilter VideoNullRenderer = (IBaseFilter)new NullRenderer();
        hr = pGraph.AddFilter(VideoNullRenderer, "Null Renderer");
        checkHR(hr, "Can't Create Null Renderer");
        IPin NullIn = GetPin(VideoNullRenderer, "In");
        #endregion
        #region Create Infinite Pin Tree Filter
        IBaseFilter InfinitePinTreeFilter = (IBaseFilter)new InfTee();
        hr = pGraph.AddFilter(InfinitePinTreeFilter, "Infinite Pin Tee");
        checkHR(hr, "Can't Add Pin Tee");
        IPin IPTIn = GetPin(InfinitePinTreeFilter, "Input");
        IPin IPTOut1 = GetPin(InfinitePinTreeFilter, "Output1");
        #region Connect IPTOut -> Sample Grabber -> Null renderer
        //hr = pGraph.ConnectDirect(VideoOutPin, IPTIn, CorectvidFormat);
        hr = pGraph.Connect(VideoOutPin, IPTIn);
        checkHR(hr, "Can't Connect Camera to Infinite Pin Tee");
        //hr = pGraph.ConnectDirect(IPTOut1, AVIDecompressor2InPin, CorectvidFormat);
        //checkHR(hr, "Can't IPT1 to AVIDecompressor 2");
        //hr = pGraph.ConnectDirect(AVIDecompressor2OutPin, SGFIn, SampleMediaType);
        //checkHR(hr, "Can't AVIDecompressor 2 to Sample In");
        hr = pGraph.Connect(IPTOut1, SGFIn);
        checkHR(hr, "Can't IPTOut1 to Sample In");
        hr = pGraph.Connect(SGFOut, NullIn);
        checkHR(hr, "Can't Sample Out To Null In");
        #endregion
        IPin IPTOut2 = GetPin(InfinitePinTreeFilter, "Output2");
        #endregion
        #region Add Video Mixing Renderer9
        //IBaseFilter pVideoMixingRenderer9 = (IBaseFilter)Activator.CreateInstance(Type.GetTypeFromCLSID(CLSID_VideoMixingRenderer9));
        IBaseFilter pVideoMixingRenderer9 = (IBaseFilter)new VideoMixingRenderer9();
        // Setup Video Renderer to go to Windows Form at this Point??
        #region Setup WindowlessMode
        IVMRFilterConfig9 MixingRendererFilterConfig = (IVMRFilterConfig9)pVideoMixingRenderer9;
        hr = MixingRendererFilterConfig.SetNumberOfStreams(1);
        checkHR(hr, "Problem Setting Streams to 1");

        hr = MixingRendererFilterConfig.SetRenderingMode(VMR9Mode.Windowless);
        checkHR(hr, "Can't Set Mode to Windowed"); // Doesn't work Windowless?

        WindowlessControl = (IVMRWindowlessControl9)pVideoMixingRenderer9;
        hr = WindowlessControl.SetVideoClippingWindow(VideoViewer.VideoPanel.Handle);
        checkHR(hr, "Problem Setting Clipping Window to VideoPanel");

        hr = WindowlessControl.SetAspectRatioMode(VMR9AspectRatioMode.LetterBox);
        checkHR(hr, "Problem Setting Aspect Ration");
        VideoViewer.AddHandlers();
        VideoViewer.Visible = true;

        #endregion
        hr = pGraph.AddFilter(pVideoMixingRenderer9, "Video Mixing Renderer 9");
        checkHR(hr, "Can't Create Video Mixing Renderer 9");
        IPin VideoFormPin = GetPin(pVideoMixingRenderer9, "VMR Input0");
        #endregion
        #region Create AVI Decompressor
        IBaseFilter pAVIDecompressor = (IBaseFilter)new AVIDec();
        AMMediaType AVIInMedia = new AMMediaType();
        AMMediaType AVIOutMedia = new AMMediaType();
        AVIOutMedia.majorType = MediaType.Video;
        AVIOutMedia.subType = MediaSubType.UYVY;
        hr = pGraph.AddFilter(pAVIDecompressor, "AVI Decompressor");
        checkHR(hr, "Can't add AVI Decompressor to graph");
        // No Configuration needed for the AVI Decompresser that I know of
        IPin AVIDecompressorOutPin = GetPin(pAVIDecompressor, "XForm Out");
        IPin AVIDecompressorInPin = GetPin(pAVIDecompressor, "XForm In");
        #endregion
        #region Connect Infinite Pin Out2 to Input of AVI Decompressor
        //hr = pGraph.ConnectDirect(IPTOut2, AVIDecompressorInPin, null);
        hr = pGraph.Connect(IPTOut2, AVIDecompressorInPin);
        checkHR(hr, "Can't Connect Infinite Pin 2 to AVI Decompressor");
        #endregion
        #region Connect Output of AVI Decompressor to Video Mixing Renderer9
        //hr = pGraph.ConnectDirect(AVIDecompressorOutPin, VideoFormPin, null);
        hr = pGraph.Connect(AVIDecompressorOutPin, VideoFormPin);
        checkHR(hr, "Can't Connect AVI Out to Renderer");
        #endregion
        DsUtils.FreeAMMediaType(SampleMediaType);
        DsUtils.FreeAMMediaType(CorectvidFormat);
        SampleMediaType = null;
        CorectvidFormat = null;
        VideoViewer.Activate();
    }
    public IntPtr Click()
    {
        int hr;
        // get ready to wait for new image
        m_PictureReady.Reset();
        m_ipBuffer = Marshal.AllocCoTaskMem(Math.Abs(m_stride) * m_videoHeight);
        try
        {
            m_WantOne = true;
            // If we are using a still pin, ask for a picture
            if (m_VidControl != null)
            {
                // Tell the camera to send an image
                hr = m_VidControl.SetMode(m_pinStill, VideoControlFlags.Trigger);
                checkHR(hr, "Can't SetMode");
                DsError.ThrowExceptionForHR(hr);
            }

            // Start waiting
            if (!m_PictureReady.WaitOne(9000, false))
            {
                throw new Exception("Timeout waiting to get picture");
            }
        }
        catch
        {
            Marshal.FreeCoTaskMem(m_ipBuffer);
            m_ipBuffer = IntPtr.Zero;
            throw;
        }

        // Got one
        return m_ipBuffer;
    }
}
} 
```

VideoFeed（Windows 窗体）

```
using System;
using System.Windows.Forms;
using DirectShowLib;
using Microsoft.Win32;
using VideoCapture.Classes;

namespace VideoCapture.Forms
{
public partial class VideoFeed : Form
{
    public VideoFeed()
    {
        InitializeComponent();
        this.Visible = true;
    }
    public void AddHandlers()
    {
        this.Paint += new PaintEventHandler(VideoFeed_Paint);
        this.Resize += new EventHandler(VideoFeed_ResizeMove);
        this.Move += new EventHandler(VideoFeed_ResizeMove);
        SystemEvents.DisplaySettingsChanged += new EventHandler(SystemEvents_DisplaySettingsChanged);
        VidCardGlobal.VideoHandlersAdded = true;
    }
    public void RemoveHandlers()
    {
        this.Paint -= new PaintEventHandler(VideoFeed_Paint);
        this.Resize -= new EventHandler(VideoFeed_ResizeMove);
        this.Move -= new EventHandler(VideoFeed_ResizeMove);
        SystemEvents.DisplaySettingsChanged -= new EventHandler(SystemEvents_DisplaySettingsChanged);
        VidCardGlobal.VideoHandlersAdded = false;
    }
    public void VideoFeed_ResizeMove(object sender, EventArgs e)
    {
        if (VidCardGlobal.WindowlessControl != null)
        {
            int hr = VidCardGlobal.WindowlessControl.SetVideoPosition(null, DsRect.FromRectangle(this.VideoPanel.ClientRectangle));
        }
    }
    private void VideoFeed_Paint(object sender, PaintEventArgs e)
    {
        if (VidCardGlobal.WindowlessControl != null)
        {
            IntPtr hdc = e.Graphics.GetHdc();
            int hr = VidCardGlobal.WindowlessControl.RepaintVideo(this.VideoPanel.Handle, hdc);
            e.Graphics.ReleaseHdc(hdc);
        }
    }
    private void SystemEvents_DisplaySettingsChanged(object sender, EventArgs e)
    {
        if (VidCardGlobal.WindowlessControl != null)
        {
            int hr = VidCardGlobal.WindowlessControl.DisplayModeChanged();
        }
    }
}
} 
```

ETA：FilterGraph 定义

```
using System;
using System.Runtime.InteropServices;

namespace DirectShowLib
{
// CODE SNIPPED
#region COM Class Objects
/// <summary>
/// CLSID_FilterGraph
/// </summary>
[ComImport, Guid("e436ebb3-524f-11ce-9f53-0020af0ba770")]
public class FilterGraph
{
}
} 
```

# android - android中txtview.settext中的未知错误

> ID：15818479
> 
> 赞同：1
> 
> 时间：2013-04-04T18:04:36.737
> 
> 标签：android, textview

我想从查询中设置文本视图的 txt，但我得到“索引 -1 请求大小为 1 错误..有人可以帮助我吗？

```
 Cursor information = db.rawQuery("select id as _id,description from poet where _id="+Peot_ID_for_db,null);
    TextView poet_info=(TextView)findViewById(R.id.Poet_info);
    poet_info.setText(information.getString(information.getColumnIndex("_id")));
//  poet_info.append(information.getString(information.getColumnIndex("description"))); 
```

我搜索了这个错误，但在 google 中没有找到任何东西..我希望你能帮助我..我的表中只有一行与这个查询匹配，所以我认为我需要任何循环或类似的东西来获取所有行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:07:53.503

您还没有将光标移动到该行..它会为您抛出该错误

尝试使用这个

```
if(information.moveToFirst())
{
do{

//Write your code here
}
while(information.moveToNext())

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T18:06:21.057

确保从使用 moveTo 函数开始。

在您这样做之前，它不会为您排好队。

例子：

[http://developer.android.com/reference/android/database/Cursor.html#moveToNext()](http://developer.android.com/reference/android/database/Cursor.html#moveToNext())

片段：

```
StringBuilder sb = new StringBuilder();

while(information.moveToNext()) {
    sb.append(information.getString(information.getColumnIndex("_id"))+" ");
}

poet_info.setText(sb.toString()); 
```

# javascript - 方法调用模式不起作用？

> ID：15818486
> 
> 赞同：0
> 
> 时间：2013-04-04T18:04:48.690
> 
> 标签：javascript

我只是在学习 JavaScript，它有一些叫做方法的东西：

像这样的示例我希望它可以工作，但我在 FireFox 中编写了它，但它什么也没做：

```
var myObject = {
 value: 0,
 increment: function (inc) {
   this.value += inc;
   }
};

console.writeln(myObject.value);
var x = myObject.increment(2);
console.writeln(x); 
```

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T18:06:52.950

1）使用`console.log`而不是`console.writeln`

2) 你必须从函数中返回。如果你不这样做，获得价值的唯一方法是通过请求价值

```
var myObject = {
    value: 0,
    increment: function (inc) {
        return this.value += inc;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:11:03.660

您必须返回一个值：

```
var myObject = {
    value: 0,
    increment: function (inc) {
        this.value += inc;
        return this.value;
    }
}; 
```

`console.log`你也不想`console.writeln`

这是一个工作示例：http: [//jsfiddle.net/AS9BH/](http://jsfiddle.net/AS9BH/)

# c++ - 在 C 中使用 char * 时出现错误“调试断言失败”

> ID：15818493
> 
> 赞同：0
> 
> 时间：2013-04-04T18:05:02.940
> 
> 标签：c++, char, heap-memory

运行以下代码时出现的错误是“Debug Assertation Failed... Expression _BLOCK_TYPE_IS_VALID(pHead->nBlockUse)”。

我的 readTXT 方法需要传递一个 char* 对象，但我想允许用户选择为自己输入值。

```
char * mapName;
int main()
    {
        //load map
        int mapSelection;
        cout << "select a map";
        cin >> mapSelection;

        switch (mapSelection)
        {
        case 1:
            mapName = "walls1.txt";
            break;
        case 2:
           mapName = "walls2.txt";
           break;
        case 3:
            mapName = "maze1.txt";
            break;
        case 4:
           mapName = "maze2.txt";
           break;
        }

        map = readTXT(mapName, 8, 11);
        delete mapName;
    ... 
```

这是 readTXT 方法的代码

```
double* readTXT(char *fileName, int sizeR, int sizeC)
{
  double* data = new double[sizeR*sizeC];
  int i=0;
  ifstream myfile (fileName);
  if (myfile.is_open())
  {

    while ( myfile.good())
    {
       if (i>sizeR*sizeC-1) break;
         myfile >> *(data+i);
         cout << *(data+i) << ' '; // This line display the converted data on the screen, you may comment it out. 
         if (i == 10 || i == 21 || i == 32 || i == 43 || i == 54 || i == 65 || i == 76)
         {
             cout << "\n";
         }
         i++;
    }
    myfile.close();
  }

  else cout << "Unable to open file"; 
  //cout << i;

  return data;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:07:12.127

你不应该这样做：

```
delete mapName; 
```

因为`mapName`来自一个字符串常量。只有`delete`您分配的内存`new`。

字符串常量内置在您的程序中，不需要删除。当您使用 a 引用一个时`char*`，您不是在制作副本，因此不会引入任何删除的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:07:15.990

不要删除你没有得到的内存`new`：

```
delete mapName; 
```

删除上面的行。

# html - 发送使用 Angular 作为电子邮件的网页

> ID：15818499
> 
> 赞同：0
> 
> 时间：2013-04-04T18:05:22.477
> 
> 标签：html, node.js, angularjs, nodemailer

我有一个网页（使用 Angular 和一些 javascript）从服务器请求数据并显示为表格。

我想通过电子邮件发送此网页的副本（使用 node 和 nodemailer）。

我使用 http.get 来获取网页的 html，但自然这只会让我得到 HTML。我想将浏览器中显示的页面（加载完成后）放入电子邮件中。

我将如何做到这一点？

这是我自己的尝试，自然只适用于纯 html 页面，因此缺少 javascript 和 angular 的东西。请注意，这使用的是咖啡脚本。

```
nodemailer = require("nodemailer")
http = require 'http'

sendmail = (html)->
  transport = nodemailer.createTransport("SMTP",{
    service: "Gmail"
    auth:
      user: u
      pass: p
  })

  mailOptions =
    from: f
    to: t
    subject: s
    html: html

  transport.sendMail mailOptions, (err,res)->
    console.log err if err?
    do transport.close

http.get 'http://localhost:3000/something', (res) ->
  res.on 'data', (data) ->
    sendmail data.toString() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:39:58.440

[PhantomJS](http://phantomjs.org/)可能是您正在寻找的解决方案。它是一个无头 Webkit 浏览器，可以将服务器上的页面呈现为可以邮寄的形式。其主要应用是为单页应用程序 (SPA) 启用 SEO。这里有更多信息：[“单页”JS 网站和 SEO](https://stackoverflow.com/questions/7549306/single-page-js-websites-and-seo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:12:25.823

您不能将 Javascript 添加到 HTML 电子邮件中。你也不应该这样做。那将是一个巨大的安全问题。

最好的方法可能是发送一封基本的 HTML 电子邮件，其中包含指向网页的链接，该网页可以执行您希望电子邮件执行的操作。

# c# - 如何在asp.net中显示警告框

> ID：15818501
> 
> 赞同：3
> 
> 时间：2013-04-04T17:41:34.097
> 
> 标签：c#, asp.net

我有一个带有提交按钮的注册页面。

我想在“用户单击提交按钮”之后显示一个警报框，然后“用户输入的数据被插入到数据库中”。

```
int i = obj.IU_SubscriberMaster(0, txtFirstname.Text, txtLastname.Text, txtEmail.Text, txtPassword.Text);

        if (i > 0)
        {
            Call ErrorTrap("errormsg");
        } 
```

这是我要显示警报的地方。我用了

```
 function alerts(str) {
    return false;
} 
```

而不是通过创建一个函数错误陷阱

```
public void ErrorTrap(string str)
{
    if (!ClientScript.IsStartupScriptRegistered("alert"))
    {
        Page.ClientScript.RegisterStartupScript(this.GetType(), "alert", "alerts('" + str + "');", true);
    }
} 
```

但它没有用

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T19:09:55.390

## 常规页面

```
public void ErrorTrap(string str)
{
   Page.ClientScript.RegisterStartupScript(this.GetType(), "alert" + UniqueID, 
     "alert('" + str + "');", true);
} 
```

## 阿贾克斯页面

如果使用 ajax，则需要使用 ScriptManager。

```
public void ErrorTrap(string str)
{
   ScriptManager.RegisterStartupScript(Page, Page.GetType(), "alert" + UniqueID, 
      "alert('" + str + "');", true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:10:24.760

`alerts`：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "alert", "alerts('" + str + "');", true); 
```

需要`alert`：

```
 Page.ClientScript.RegisterStartupScript(this.GetType(), "alert", "alert('" + str + "');", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:13:00.330

你的意思是 javascript 是`"alerts("+ str + "');"`不是`"alert(" + str + "');"`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-02T06:44:18.073

`alerts`应该是`alert`。如果您使用 ajax，最好使用 ScriptManager。

# java - 使用 JAXWS 进行 rpc/编码

> ID：15818511
> 
> 赞同：0
> 
> 时间：2013-04-04T18:05:52.180
> 
> 标签：java, web-services, jax-ws, axis

**我的环境的前提：**我在 Spring 3 上运行，使用 spring-ws 来处理所有 SOAP 需求。我已经与不同的供应商进行了多次集成，没有这方面的问题。

**问题：**这个最近的集成有一个供应商运行非常古老的东西，他们的 WSDL 使用 rpc 绑定样式。不用说，JAXWS 并不完全支持 rpc（这是正确的，因为它是互操作的对立面）。

**可能的解决方案 #1：**我仍然可以尝试使用 Axis 1 在他们的 WSDL 上生成存根。事实上我已经这样做了，但是我非常不愿意将 Axis 依赖项引入我的 pom.xml 中。我很确定会有大量的库冲突，可能会破坏目前非常稳定的环境。

**可能的解决方案#2：**我可以尝试将他们的 WSDL 重写为 JAXWS 能够解析的文档/文字。遇到一些实际重写 WSDL 的问题（Getting "Schema descriptor {xxx}xxx in message part "xxx" is not defined and could not be bound to Java"）。此外，如果他们的端点专门检查 rpc，无论如何我都搞砸了。

**可能的解决方案#3：**我可以部署一个全新的盒子，专门运行 Axis 和这个服务客户端。即主项目对该框进行 REST 调用，该框发出 SOAP 请求并解析响应。这样做似乎是一种非常非常愚蠢的方式（并且对于应该很简单的事情进行了大量的工作）。

我错过了任何解决方案吗？此外，我一直在为此搜索谷歌，虽然有些人在#1 方面取得了成功，但没有人真正谈论过之后的后果。（即处理 Axis 的遗留依赖项，尝试让 Axis 在 Spring 3 中发挥出色，等等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:17:46.433

**#1**

使#1 更稳定的一种方法是让自己获得 Axis 源的本地副本，您将使用它来构建自己的 Axis jar 副本。但是你改变了整个东西的包装。例如，而不是 org.apache.axis，它变成了 com.mycompany.org.apache.axis，翻译变得非常机械。

然后，Axis1 的任何依赖项（可能像旧版本的 commons-beanutils）都会得到相同的处理。加载他们的罐子。用您自己的定制包装构建他们的罐子。（如果他们使用 Maven 构建，确定依赖关系会更容易一些。）

这样做确实牺牲了将更新和修复合并到原始 Axis 代码的能力。任何已发布的更新都会变成一组更改，您必须弄清楚如何将其合并到本地副本中，其中每个 .java 文件都对`package`and`imports`行进行了更改。

**#2**

不知道#2。它是掷骰子，不是吗。

**#3**

您在#3 中所做的是 ESB 真正擅长的。3 号是您编写自己的迷你翻译器的地方。我已经做到了，它工作得很好。

但是您实际上可以在同一个盒子上构建第 3 步。你不需要另一个盒子。您将小翻译应用程序部署为在主端口上运行的单独应用程序。您将应用程序部署在不同的端口或作为不同的 URL/路径。翻译器应用程序使用 Axis1 并翻译传入的消息，将其传递并翻译回响应。

这个解决方案的一个好处是它处理负载平衡就像你有一个应用程序一样。翻译器应用程序和主应用程序的负载一起上升，耗尽了它们共享的 CPU 周期桶。如果您需要更多，请添加更多设置完全相同的服务器。

# iphone - CMMotionManager - 仅使用 CMMotionManager 获取航向

> ID：15818527
> 
> 赞同：1
> 
> 时间：2013-04-04T18:06:46.057
> 
> 标签：iphone, ios, ipad, cmmotionmanager

我已经设法使用 CLLocationManager 获得指南针航向，但因为我的应用程序已经使用了 CMMotionManager，所以我想只使用 CMMotionManager 来测量航向。

像所有 Apple 模糊文档一样，您必须猜测如何使用他们的 API。

我试图用它来测量航向

```
[self.motionManager setMagnetometerUpdateInterval:1.0/30.0]; //30 Hz

[self.motionManager startMagnetometerUpdatesToQueue:[NSOperationQueue currentQueue] withHandler:^(CMMagnetometerData *magnetometerData, NSError *error) {
    CMMagneticField compass = magnetometerData.magneticField;
    NSLog(@"x: %f  y:%f  z:%f", compass.x, compass.y, compass.z);
}]; 
```

问题是这个块只运行了几秒钟然后停止运行。

是否有任何示例说明如何专门使用 CMMotionManager 测量航向？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:25:35.853

显然，最好的方法是使用 CoreLocation，直到 Apple 创建体面的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:17:37.777

我建议你*不要*打电话`start...UpdatesToQueue:withHandler:`。这需要使用后台线程，并且管理起来非常棘手。你可能只是在主线程上把所有东西都搞砸了。这是一种先进的技术，你不需要它。

相反，只需`start`然后使用 NSTimer 或类似方法重复轮询 CMMotionManager。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T19:12:24.580

在没有实际尝试的情况下，我建议使用`[NSOperationQueue mainQueue]`而不是 currentQueue。通常，您仅在操作中调用 currentQueue 以获得对启动它的队列的引用。

# c# - 单击时无法编辑 DataGridView 内容（即使 ReadOnly = false）？

> ID：15818536
> 
> 赞同：3
> 
> 时间：2013-04-04T18:07:09.003
> 
> 标签：c#, datagridview

这里的上下文是我为 DataGridView 使用了一种特殊的 DataSource，它是一种匿名类型，可以按如下方式创建：

```
var data = new[] { new { A = "A", B = 1 }, new { A = "B", B = 2 }, new { A = "C", B = 3 }}; 
```

问题是如果我将上述数据源用于 DataGridView，我无法通过单击其单元格开始编辑 DataGridView 的内容。

```
myDataGridView.DataSource = data; 
```

您能否向我解释一下为什么以及如何使其可编辑？或者只是我们不能让它这样工作？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T18:22:54.947

因为`var data`是[匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)。并且匿名类型属性是[只读的](https://stackoverflow.com/questions/1089406/why-are-the-properties-of-anonymous-types-in-c-sharp-read-only)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:25:10.027

我对此不是 100% 确定，但我认为您无法编辑网格，因为您正在绑定匿名类型。匿名类型不能更改。

# lex - 无法识别的规则错误

> ID：15818541
> 
> 赞同：0
> 
> 时间：2013-04-04T18:07:25.187
> 
> 标签：lex, flex-lexer

```
 %option lex-compat
    %option noyywrap
    %option yylineno
    %{
    #include<stdio.h>
    #include<conio.h>
    #include<stdlib.h>
    #include<string.h>
    %}
    %{
    int INDENT=0,DEDENT=0,line=0;
    %}
    HASH    "#"
    NEWL    [\n]
    SPACE   " "
    MULTS   """
    COMP    "e^"
    LETTER  ([a-zA-Z])
    HEXL    ([a-fA-F1-9])
    ZERO    "0"
    EXP     "10^"
    COLON   ":"
    DOT     "."
    LPAREN  "("
    RPAREN  ")"
    PLUS    "+"
    MINUS   "-"
    SIGN    ({PLUS}|{MINUS})
    MULT    "*"
    DIV     "/"
    ASSIGN  "="
    EQUAL   "=="
    MORE_THAN ">"
    LESS_THAN "<"
    OR      "or"
    AND     "and"
    NOT     "not"
    IF      "if"
    ELSE    "else"
    LAMBDA  "lambda"
    FOR     "for"
    PASS    "pass"
    H       ({"h"|"H"})
    WHITESPACE  {[\t\n]}
    NUM_NZ      [1-9]
    NUM         [0-9]
    INTEGER     ({SIGN}?({ZERO}|({ZERO}+/({NUM_NZ}+))))
    REAL        ({INTEGER}{DOT}{NUM}|{INTEGER}{DOT}{NUM}{EXP}{INTEGER})
    HEX         ({PLUS}?(ZERO}|{HEXL}+{H}))
    COMPLEX     ({PLUS}?{REAL}+{COMP}{SIGN}?(({REAL}/"i")|"i"))
    ID          ("'"{.}+/{LETTER}+"'")
    STRING      ("'"{.}+"'")
    MULTISTRING ({MULTS}({.}+)|{NEWL}+{MULTS})
    COMMENT     ({.}+/{HASH})
    %%
   {SPACE}      {INDENT++; };
   {NEWL}   
    {
     if(INDENT>DEDENT) printf("Line %d: Found token %s (lexeme:       '%s').\n",yylineno,"INDENT",yytext);  
     if(INDENT<DEDENT)  printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"DEDENT",yytext);   
     DEDENT=INDENT; line++;};
    {INTEGER}       printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"INTEGER",yytext);
   {REAL}           printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"REAL",yytext);
    {HEX}           printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"HEX",yytext);
    {COMPLEX}       printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"COMPLEX",yytext);
    {STRING}        printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"STRING",yytext);
    {MULTISTRING}   printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"MULTISTRING",yytext);
    {IF}            printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"IF",yytext);
    {ELSE}          printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"ELSE",yytext);
    LAMBDA}     printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"LAMBDA",yytext);
    {FOR}           printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"FOR",yytext);
    {PASS}          printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"PASS",yytext);
    {ID}            printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"ID",yytext);
    {COLON}         printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"COLON",yytext);
    {LPAREN}        printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"LPAREN",yytext);
    {RAREN}         printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"RPAREN",yytext);
    {ARITH_OP}      printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"ARITH_OP",yytext);
    {REL_OP}        printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"REL_OP",yytext);
    {LOGIC_OP}      printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"LOGIC_OP",yytext);
    {NOT}           printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"NOT",yytext);
    {ASSIGN}        printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"ASSIGN",yytext);
    .       printf("Line %d: Invalid token  ('%s').\n",yylineno,yytext);
    %%
    int main(int argc,char* argv[])
    {
yylex();
    } 
```

我在第 102 行有一个无法识别的规则，其中包含 `yylex();`. 我做错了什么，错误在哪里？我找不到它了。

```
hw1.text , line 102: unrecognized rule 
```

当我尝试编译它时，我得到了这个错误。我正在写`flex hw1.text`，文件和文件`flex`在同一个文件夹中。

* * *

### 根据已删除的未回答添加的评论

我做了你让我做的事，出于某种原因，我收到了“printf”行的错误。

我已经添加 ：

```
ARITH_OP   ({PLUS}|{MINUS}|{DIV}|{MULT})
REL_OP     ({MORE_THAN}|{LESS_THAN}|{EQUAL})
LOGIC_OP   ({AND}|{OR}) 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T21:36:14.823

我看到了很多问题：

1.  之后的动作`{NEWL}`应该与`{NEWL}`.

    ```
    {NEWL}
    {
    if(INDENT>DEDENT) printf("Line %d: Found token %s (lexeme:       '%s').\n",yylineno,"INDENT",yytext);
    if(INDENT<DEDENT)  printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"DEDENT",yytext);
    DEDENT=INDENT; line++;}; 
    ```

    这应该是这样的：

    ```
    {NEWL} {
              if(INDENT>DEDENT) printf("Line %d: Found token %s (lexeme:       '%s').\n",yylineno,"INDENT",yytext);
              if(INDENT<DEDENT)  printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"DEDENT",yytext);
              DEDENT=INDENT; line++;
           }; 
    ```

2.  另一个问题是缺少`{`规则`{LAMBDA}`：

    ```
    {ELSE}          printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"ELSE",yytext);
    LAMBDA}     printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"LAMBDA",yytext);
    {FOR}           printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"FOR",yytext); 
    ```

3.  您使用`{RAREN}`而不是`{RPAREN}`.

4.  您尚未定义`{ARITH_OP}`、`{REL_OP}`或`{LOGIC_OP}`。

5.  我认为 MULTS 的规则应该是这样的（但我可能错了）：

    ```
    MULTS "\"" 
    ```

6.  为了获得干净的编译，我将以下规则移动到扫描仪规则部分之后的注释中：

    ```
    {MULTISTRING}   printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"MULTISTRING",yytext);
    {ID}            printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"ID",yytext);
    {STRING}        printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"STRING",yytext);
    {HEX}           printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"HEX",yytext);
    {COMPLEX}       printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"COMPLEX",yytext);
    {INTEGER}       printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"INTEGER",yytext);
    {REAL}          printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"REAL",yytext);
    {ARITH_OP}      printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"ARITH_OP",yytext);
    {REL_OP}        printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"REL_OP",yytext);
    {LOGIC_OP}      printf("Line %d: Found token %s (lexeme: '%s').\n",yylineno,"LOGIC_OP",yytext); 
    ```

显然，您还需要一个函数来代替重复的`printf()`语句。

* * *

### “工作”代码

此代码编译并运行。规则仍然存在很多问题（例如，实数只能在小数点后有一位数，标识符必须用单引号括起来）。它使用一个`print_token()`函数来使扫描仪动作可读。

```
%option lex-compat
%option noyywrap
%option yylineno

%{
#include <stdio.h>
/*#include <conio.h>*/
#include <stdlib.h>
#include <string.h>
%}

%{
int INDENT=0, DEDENT=0, line=0;
static void print_token(const char *token);

/*
Original rules moved out of the way:

MULTISTRING ({MULTS}({.}+)|{NEWL}+{MULTS})
STRING      ("'"{.}+"'")
INTEGER     ({SIGN}?({ZERO}|({ZERO}+/({NUM_NZ}+))))
ID          ("'"{.}+/{LETTER}+"'")
H           ({"h"|"H"})
COMPLEX     ({PLUS}?{REAL}+{COMP}{SIGN}?(({REAL}/"i")|"i"))
MULTISTRING ({MULTS}({.}+)|{NEWL}+{MULTS})
*/

/*
Examples of patterns matched:

INTEGER: 1 +1 -2 0 99 999 987654321092344
REAL:    1.2 -2.1 3.14159
ID:      'ThisIsAnId'
HEX:     +0 DeadBeefH
*/
%}

HASH        "#"
NEWL        [\n]
SPACE       " "
MULTS       "\""
COMP        "e^"
LETTER      ([a-zA-Z])
HEXL        ([a-fA-F1-9])
ZERO        "0"
EXP         "10^"
COLON       ":"
DOT         "."
LPAREN      "("
RPAREN      ")"
PLUS        "+"
MINUS       "-"
SIGN        ({PLUS}|{MINUS})
MULT        "*"
DIV         "/"
ASSIGN      "="
EQUAL       "=="
MORE_THAN   ">"
LESS_THAN   "<"
OR          "or"
AND         "and"
NOT         "not"
IF          "if"
ELSE        "else"
LAMBDA      "lambda"
FOR         "for"
PASS        "pass"
H           ("h"|"H")
WHITESPACE  {[\t\n]}
NUM_NZ      [1-9]
NUM         [0-9]

INTEGER     ({SIGN}?{NUM_NZ}+)

REAL        ({INTEGER}{DOT}{NUM}|{INTEGER}{DOT}{NUM}{EXP}{INTEGER})
HEX         ({PLUS}?({ZERO}|{HEXL}+{H}))
COMPLEX     ({PLUS}?{REAL}+{COMP}{SIGN}?(({REAL}"i")|"i"))

ID          ("'"{LETTER}+"'")
STRING      ("'"[^']+"'")
MULTISTRING ({MULTS}([^"]+)|{NEWL}+{MULTS})
COMMENT     ({.}+/{HASH})
ARITH_OP    ({PLUS}|{MINUS}|{DIV}|{MULT})
REL_OP      ({MORE_THAN}|{LESS_THAN}|{EQUAL})
LOGIC_OP    ({AND}|{OR})

%%

{SPACE}         { INDENT++; };
{NEWL}          {
                    if (INDENT > DEDENT) print_token("INDENT");  
                    if (INDENT < DEDENT) print_token("DEDENT");   
                    DEDENT = INDENT;
                    line++;
                }
{MULTISTRING}   print_token("MULTISTRING");
{STRING}        print_token("STRING");
{HEX}           print_token("HEX");
{ID}            print_token("ID");
{INTEGER}       print_token("INTEGER");
{COMPLEX}       print_token("COMPLEX");
{REAL}          print_token("REAL");
{IF}            print_token("IF");
{ELSE}          print_token("ELSE");
{LAMBDA}        print_token("LAMBDA");
{FOR}           print_token("FOR");
{PASS}          print_token("PASS");
{COLON}         print_token("COLON");
{LPAREN}        print_token("LPAREN");
{RPAREN}        print_token("RPAREN");
{ARITH_OP}      print_token("ARITH_OP");
{REL_OP}        print_token("REL_OP");
{LOGIC_OP}      print_token("LOGIC_OP");
{NOT}           print_token("NOT");
{ASSIGN}        print_token("ASSIGN");
.               printf("Line %d: Invalid token ('%s').\n", yylineno, yytext);

%%

static void print_token(const char *token)
{
    printf("Line %d: Found token %s (lexeme: '%s').\n", yylineno, token, yytext);
}

int main(void)
{
    yylex();
} 
```

问题之一是`/`在规则中的使用。在 Lex 和 Flex 中，IIRC 引入了尾随上下文。我并不清楚它在使用它的规则中打算做什么。至少有一个`ZERO}`你需要的地方`{ZERO}`。您似乎试图将`{.}+`其用作`[.]+`或可能的同义词`.+`（我通常将其更改为`[^"]+`或`[^']+`无论如何。

COMMENT 的规则仍然包含一个斜线。似乎哈希标记了评论的结束（但不是评论的一部分），而不是评论的开始；作为评论约定，这有点不寻常（我认为它实际上是不可用的）。

至于我是如何完成这项工作的，我一次只做了一点。

我将导致编译错误的部分移到了注释中。当我得到编译的东西时，我测试了它（在它自己的源代码上）。然后我收集了一条被破坏的规则，记录下来，这样我就知道原来的规则是什么，然后修改它，让它对我有意义。冲洗，重复，一次一步。我在进行过程中使用了 VCS（实际上是`git`），所以我知道如果我犯了一个严重的错误，我可以恢复一个“工作”版本。你确实使用VCS，不是吗？

# ruby-on-rails - Rails 正则表达式语法

> ID：15818557
> 
> 赞同：1
> 
> 时间：2013-04-04T18:08:31.847
> 
> 标签：ruby-on-rails, regex

那里有任何正则表达式大师吗？我有一个 position_id 是一个字符串，可以有以下格式。位数可以非常多，但有点像这样。所有数字或数字和一个破折号“-”。

```
123456  or
123456-123 
```

我需要一个正则表达式，如果 position_id 不是那种/那些格式，则抛出一个标志。我以为我有以下内容，但它似乎不起作用。也许我的语法是错误的。

```
if !params[:position_id] =~ /^\d+-?\d+$/
  flash[:error] = "error message here"
end 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:13:43.317

只要您至少有 2 位数字，它就应该可以工作。我猜你是用 1 位数字来测试它吗？

如果是这样，应该这样做：

```
flash[:error] = "error message here" unless params[:position_id] =~ /^\d+(-\d+)?$/ 
```

我们在`-123`那里使整个可选

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:16:33.040

这是一个简单的：

```
^([0-9]*)(\-[0-9]*)?$ 
```

[http://rubular.com/r/2qSTHIPeo9](http://rubular.com/r/2qSTHIPEo9)

如果您希望数字范围为一定长度，只需将其更改为：

```
^([0-9]{6})(\-[0-9]{3,4})?$ 
```

用文字说：

*   “任何 6 位数长的数字”
*   “如果有连字符，则第二个数字必须在 3 到 4 位之间”

[http://rubular.com/r/5SHiJ1GKiK](http://rubular.com/r/5SHiJ1GKiK)

**编辑：** - 回答下面的评论

```
if !params[:position_id].match(/^([0-9]{6})(\-[0-9]{3,4})?$/)
    flash[:error] = "not valid"
end 
```

[http://ruby-doc.org/core-2.0/String.html#method-i-match](http://ruby-doc.org/core-2.0/String.html#method-i-match)

# php - MySQL：检查整列是否有任何行具有值

> ID：15818562
> 
> 赞同：5
> 
> 时间：2013-04-04T18:08:40.580
> 
> 标签：php, mysql

如果列的所有行都为空，我想有条件地切换`audio`。我尝试过使用 GROUP BY 类型但不起作用。

```
 SELECT postid, title, has_audio, audio, type 
  FROM qa_posts 
  WHERE parentid=1 
```

![在此处输入图像描述](https://i.stack.imgur.com/vdD60.jpg)

因此，如果该父 id 的整个列存在音频，则执行代码 A 如果不是代码 B

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T18:12:04.427

你可以只是`count`所有的行`audio`不是`NULL`。但是，如果您的表更大并且包含大量行等，那么这种方法的真正问题是这种查询对于 DB 来说可能很昂贵，并且至少比它可能要慢。当然，过早的优化是坏事，但事实并非如此——我们将优化方法，而不是代码 :)

> 如果音频列的所有行都为空，想要有条件地切换

首先，最好认为这个问题`are all rows' audio column empty?`真的是正确的。和不。不是 :) 事实上，你不需要知道`how many of rows are not null`，也`are all rows' audio column empty?`因为如果有 5 个、10 个或 100000 个，它与你的情况**完全**无关。您应该做的是“翻转”问题并寻找问题的答案，例如`if there's any row that is NOT null?`. 甚至这两个问题乍一看都很相似，我们使用数据库来获取答案，所以这实际上是整个游戏规则的改变者。

按照逻辑，要回答这个`if there's any row that is NOT null?`问题，只要找出是否**至少有**一行`audio`存在就足够了`NOT NULL`。“至少”这件事允许我们对查询应用一些约束，因为`1`很好地满足“至少一个”条件，我们将使用 SQL `LIMIT 1`，这将使数据库停止并在找到与查询匹配的第一条记录后立即返回结果，无需通过整张桌子。这应该更快，资源消耗更少。

一旦执行，我们的查询可以返回两个结果。要么我们什么都没有（返回零行），这意味着所有`audio`' 都是`NULL`，或者相反，我们得到一些东西（单行，不管哪一个），这意味着问题的答案`if there's any row that is NOT null?`是'是的，它是'（因为至少返回的是）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:12:14.667

`select count(*)`使用for执行 select 语句`WHERE audio != null`。然后根据收到的数字做一个条件语句。确保音频已编入索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T18:21:38.603

您可以简单地检查`NOT NULL`行，例如

```
SELECT * FROM `table` WHERE column IS NOT NULL AND column <> '' 
```

# d3.js - .ticks() 工作需要什么？

> ID：15818565
> 
> 赞同：14
> 
> 时间：2013-04-04T18:08:47.100
> 
> 标签：d3.js

.ticks() 似乎不适用于我的条形图。有人可以看看吗？

[这是小提琴](http://jsfiddle.net/samselikoff/9tfD2/1/)。我在对象开头附近的 x 轴上设置了刻度：

```
xAxis = d3.svg.axis().scale(xScale).orient("bottom").ticks(3), 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-01-06T15:47:35.967

我没有足够的声誉给第一篇文章添加评论，但我认为存在误解。

轴上的标签必须是 2、5 或 10 的倍数。 ticks 函数可以采用任何数字，但它会修改该数字以确保轴是 2、5 或 10 的倍数。

例如，如果域是 0-100 并且您想要 4 个刻度（0、33.33、66.66、100），它将向上舍入到 6 以给您“漂亮”的数字（0、20、40、60、80、100） . 但是，如果您将刻度设置为 3，它将尊重这一点，您将拥有 0、50 和 100。

[这](https://stackoverflow.com/a/13102118/5354766)是 Mike 对这种行为的解释的帖子。

我仍然不清楚如果您将刻度设置为 5，为什么它不会计算 0、25、50、75、100，但我想我会尝试至少消除一些混乱。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-05T09:05:12.587

ticks 只能取 2,5,10 的倍数，而不是任何数字。这就是为什么你可能会遇到问题。请查看此答案以获取自定义刻度。[关联](https://stackoverflow.com/questions/13100314/change-the-ticks-on-x-axis)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-07T22:40:12.273

您可以使用*过滤器*来决定显示哪些刻度：

```
var xAxis = d3.svg.axis()
    .scale(x)
    .tickValues(x.domain().filter(function(d, idx) { return idx%2==0 }))
    .orient("bottom"); 
```

上面的片段来自[这个例子](https://bl.ocks.org/mbostock/3212294)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-12T19:40:19.660

执行此操作的 css 方法是隐藏您不想要的第 n 个轴元素。对我来说，d3 滴答声总是很烦人。

```
.tick:nth-of-type(6) > text {
    display: none;
  }
  .tick:nth-of-type(7) > text {
    display: none;
  }
  .tick:nth-of-type(8) > text {
    display: none;
  } 
```

# javascript - 使用struts打开弹出窗口并将信息保存在父页面中

> ID：15818572
> 
> 赞同：0
> 
> 时间：2013-04-04T18:09:02.760
> 
> 标签：javascript, popup, struts-1

我是 struts 的新手，在 struts 1.3 中开发 Java EE 应用程序我有一个要求，我有一个带有按钮“弹出”的父页面，它打开一个包含表单（输入字段）的弹出窗口。并且子窗口在保存时包含一个按钮“保存”

2）关闭子窗口 3）在父页面中以表格形式显示数据 你能给我任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:03:17.207

**您的子 jsp 应如下所示：**

```
<script type="text/javascript">
    function saveInParent(){
        window.close();
        window.opener.location.href="parentAction.do";
    }
</script>

<html:form onsubmit="return saveInParent();">
    <html:text property="name"></html:text>
    <input type="submit">Save </input>
</html:form> 
```

**你父母的jsp：**

```
<html:form action="/parentAction">
    <html:text property="name"></html:text>
</html:form> 
```

确保您对子窗口和父窗口使用相同的操作类。这样，您可以在子窗口中设置“名称”属性的值并将其显示在父窗口中。

# c - 用什么来描述 C 中的指针是一个很好的现实世界隐喻？

> ID：15818579
> 
> 赞同：4
> 
> 时间：2013-04-04T18:09:22.620
> 
> 标签：c, pointers

我发现我通过现实世界的比较隐喻学得最好。例如，在 java 中，帮助我很好地理解 Accessors 和 Mutators 概念的一种方法是通过中间人的概念来思考它（私有变量不喜欢直接与他们的客户打交道，他们更喜欢中间人（访问器和突变器）处理它们）

C 中指针的概念对我来说仍然有点棘手。用什么比喻来描述它们是如何工作的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T18:20:27.420

我一直喜欢指针就像你的手指的类比。如果我带你去停车场并让你给我找一辆红色汽车，你伸出一根手指（你的选择；））并指向一辆红色汽车。

你的手指不是答案。你的手指什么也没告诉我，但如果我看看你手指指向的地方，我就能找到我要找的东西。

现在我可以让你找到一辆蓝色的汽车，你可以将你的手指重新分配（重新分配）到一辆新车上。现在您的指针（与以前相同）正在向我显示相同类型的新数据。指针没有改变，只是它指向的东西。

这也适用于多个指针。我可以问一下指向蓝色汽车的指针在哪里，您可以用另一只手用手指指向第一根手指。现在，如果我想知道蓝色汽车在哪里，我可以按照第一根手指的方向找到第二根手指，再到汽车（数据）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:17:53.883

你可以想象一下，就像现实世界的地址一样，它们只是告诉你在内存中的哪里可以找到东西，增加一个指针（我在这里指的是[指针算术](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html)）就像搬到隔壁的房子一样，看看这个[答案](https://stackoverflow.com/questions/15533877/making-two-struct-pointers-equal/15534142#15534142)另一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:13:23.797

你可以把它们想象成电话号码，它告诉你如何联系某人。

拨打电话号码就像取消引用指针。

电话可能会断开连接。也许已经很久了，现在别人有了电话号码。这就像一个悬空指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T18:20:13.310

假设一个电子表格的场景，您的数据分散在各处，但是当您可以使用行号和列号调用特定数据时，您会得到正确的数据。

行和列是指针。

现在您可以将这些行号和列号存储到另一个电子表格中，供您参考。而且这个电子表格现在也有行号和列号来确定数据，这是对原始电子表格的实际数据的引用。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-04T18:17:25.923

不需要比喻。指针是保存内存地址的变量。时期。

# visual-studio-2010 - Visual Studio 创建额外的行

> ID：15818583
> 
> 赞同：0
> 
> 时间：2013-04-04T18:09:41.260
> 
> 标签：visual-studio-2010, text, ide, formatting

我在 stackoverflow 和其他地方查看了几个线程，但我似乎无法选中正确的框来解决这个格式问题。开发团队中的其他所有人格式如下：

```
<Setter TargetName="Header" Property="Padding" Value="0" /> 
```

当我使用**Edit >>Advanced >>Format Document**时（或者通常在我创建新代码时），它的格式如下：

```
<Setter TargetName="Header" 
Property="Padding" 
Value="0" /> 
```

我相信大多数人都能理解每个人的编码看起来相似的重要性，尤其是在需要集成的时候。在某些情况下，我的代码更易于阅读，但它会将代码拉长到无法忍受的程度。有人知道我用什么设置来解决这个问题吗？昨晚我已经在**工具>>选项>>文本编辑器>>C＃>>格式化**中玩了半个多小时。我很乐意将其设置回原始设置...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T22:41:46.893

您必须确保您位于选项的正确部分：**Tools >>Options >>Text Editor >>XAML >>Formatting>>Spacing**。 *将每个属性定位在单独的行上*，并将*第一个属性定位在与开始标记设置相同的行上*都有助于解决此问题。感谢@oded 为我指明了正确的方向。其他人会注意，这样你就不会犯同样的错误。

# apache - WAMP - mod_rewrite 失败，本地路径不完整

> ID：15818599
> 
> 赞同：1
> 
> 时间：2013-04-04T18:10:46.017
> 
> 标签：apache, mod-rewrite, wamp, local

我正在尝试在 Windows 和 WAMP 上设置我的 PHP 项目，但我遇到了一个非常奇怪的障碍。

在我的 .htaccess 中，我有以下包罗万象的重定向：

```
RewriteRule ^(.*)$ index.php?$1 [PT,L] 
```

在 Linux 和 Apache 上，这可以正常工作，例如：/some_alias/items 成功重定向到我的 index.php 文件，该文件从该文件开始处理页面请求。

但是，对于 Windows，我在访问[http://xx.xx.xx.xx/some_alias/index时得到以下信息](http://xx.xx.xx.xx/some_alias/index)

```
Not Found

The requested URL /Users/username/workspace/project/some_alias/index.php was not found on this server. 
```

我的别名文件如下：

```
Alias /some_alias/ "c:/users/username/workspace/project/some_alias/" 
<Directory "c:/users/username/workspace/project/some_alias/">

AllowOverride all
Order allow,deny
Allow from all
</Directory> 
```

这是怎么回事？

# android - 使用 SQL 数据库自动完成 TextView

> ID：15818602
> 
> 赞同：2
> 
> 时间：2013-04-04T18:10:59.313
> 
> 标签：android, database, android-sqlite

嗨，大家好。我使用 SQL 数据库为我创建了个人字典。所以，现在我想添加一个“自动完成文本视图”作为搜索字段，从我的应用程序更新主要活动中的“列表视图”（搜索插入数据库的特定数据）。如您所见，主要活动显示了表中的单词列表（第一列）......我不知道如何使用 SQL 数据库创建像 textwatcher 这样的搜索框或类似的东西。有人可以帮助我吗？我是新手！！

源代码：

RepositorioPalavra.JAVA

```
public class RepositorioPalavra {
private static final String CATEGORIA = "dados";

// Nome do banco
private static final String NOME_BANCO = "dados_android";
// Nome da tabela
public static final String NOME_TABELA = "palavra";

protected SQLiteDatabase db;

public RepositorioPalavra(Context ctx) {
    // Abre o banco de dados já existente
    db = ctx.openOrCreateDatabase(NOME_BANCO, Context.MODE_PRIVATE, null);
}

protected RepositorioPalavra() {
    // Apenas para criar uma subclasse...
}

// Salva o carro, insere um novo ou atualiza
public long salvar(Palavra palavra) {
    long id = palavra.id;

    if (id != 0) {
        atualizar(palavra);
    } else {
        // Insere novo
        id = inserir(palavra);
    }

    return id;
}

// Insere um novo carro
public long inserir(Palavra palavra) {
    ContentValues values = new ContentValues();
    values.put(Palavras.WORD, palavra.word);
    values.put(Palavras.DEFINITION, palavra.definition);
    values.put(Palavras.EXAMPLE, palavra.example);

    long id = inserir(values);
    return id;
}

// Insere um novo carro
public long inserir(ContentValues valores) {
    long id = db.insert(NOME_TABELA, "", valores);
    return id;
}

// Atualiza o carro no banco. O id do carro é utilizado.
public int atualizar(Palavra palavra) {
    ContentValues values = new ContentValues();
    values.put(Palavras.WORD, palavra.word);
    values.put(Palavras.DEFINITION, palavra.definition);
    values.put(Palavras.EXAMPLE, palavra.example);

    String _id = String.valueOf(palavra.id);

    String where = Palavras._ID + "=?";
    String[] whereArgs = new String[] { _id };

    int count = atualizar(values, where, whereArgs);

    return count;
}

// Atualiza o carro com os valores abaixo
// A cláusula where é utilizada para identificar o carro a ser atualizado
public int atualizar(ContentValues valores, String where, String[] whereArgs) {
    int count = db.update(NOME_TABELA, valores, where, whereArgs);
    Log.i(CATEGORIA, "Atualizou [" + count + "] registros");
    return count;
}

// Deleta o carro com o id fornecido
public int deletar(long id) {
    String where = Palavras._ID + "=?";

    String _id = String.valueOf(id);
    String[] whereArgs = new String[] { _id };

    int count = deletar(where, whereArgs);

    return count;
}

// Deleta o carro com os argumentos fornecidos
public int deletar(String where, String[] whereArgs) {
    int count = db.delete(NOME_TABELA, where, whereArgs);
    Log.i(CATEGORIA, "Deletou [" + count + "] registros");
    return count;
}

// Busca o carro pelo id
public Palavra buscarPalavra(long id) {
    // select * from carro where _id=?
    Cursor c = db.query(true, NOME_TABELA, Palavra.colunas, Palavras._ID + "=" + id, null, null, null, null, null);

    if (c.getCount() > 0) {

        // Posicinoa no primeiro elemento do cursor
        c.moveToFirst();

        Palavra palavra = new Palavra();

        // Lê os dados
        palavra.id = c.getLong(0);
        palavra.word = c.getString(1);
        palavra.definition = c.getString(2);
        palavra.example = c.getString(3);

        return palavra;
    }

    return null;
}

// Retorna um cursor com todos os carros
public Cursor getCursor() {
    try {
        // select * from carros
        return db.query(NOME_TABELA, Palavra.colunas, null, null, null, null, Palavras.WORD);
    } catch (SQLException e) {
        Log.e(CATEGORIA, "Erro ao buscar as expressões: " + e.toString());
        return null;
    }
}

// Retorna uma lista com todos os carros
public List<Palavra> listarPalavras() {
    Cursor c = getCursor();

    List<Palavra> palavras = new ArrayList<Palavra>();

    if (c.moveToFirst()) {

        // Recupera os índices das colunas
        int idxId = c.getColumnIndex(Palavras._ID);
        int idxNome = c.getColumnIndex(Palavras.WORD);
        int idxPlaca = c.getColumnIndex(Palavras.DEFINITION);
        int idxAno = c.getColumnIndex(Palavras.EXAMPLE);

        // Loop até o final
        do {
            Palavra palavra = new Palavra();
            palavras.add(palavra);

            // recupera os atributos de carro
            palavra.id = c.getLong(idxId);
            palavra.word = c.getString(idxNome);
            palavra.definition = c.getString(idxPlaca);
            palavra.example = c.getString(idxAno);

        } while (c.moveToNext());
    }

    return palavras;
}

// Busca o carro pelo nome "select * from carro where nome=?"
public Palavra buscarPalavraPorNome(String word) {
    Palavra palavra = null;

    try {
        // Idem a: SELECT _id,nome,placa,ano from CARRO where nome = ?
        Cursor c = db.query(NOME_TABELA, Palavra.colunas, Palavras.WORD + "='" + word + "'", null, null, null, null);

        // Se encontrou...
        if (c.moveToNext()) {

            palavra = new Palavra();

            // utiliza os métodos getLong(), getString(), getInt(), etc para recuperar os valores
            palavra.id = c.getLong(0);
            palavra.word = c.getString(1);
            palavra.definition = c.getString(2);
            palavra.example = c.getString(3);
        }
    } catch (SQLException e) {
        Log.e(CATEGORIA, "Erro ao buscar a expressão pelo nome: " + e.toString());
        return null;
    }

    return palavra;
}

// Busca um carro utilizando as configurações definidas no
// SQLiteQueryBuilder
// Utilizado pelo Content Provider de carro
public Cursor query(SQLiteQueryBuilder queryBuilder, String[] projection, String selection, String[] selectionArgs,
        String groupBy, String having, String orderBy) {
    Cursor c = queryBuilder.query(this.db, projection, selection, selectionArgs, groupBy, having, orderBy);
    return c;
}

// Fecha o banco
public void fechar() {
    // fecha o banco de dados
    if (db != null) {
        db.close();
    }
}
} 
```

帕拉夫拉.Java

```
public class Palavra {

public static String[] colunas = new String[] { Palavras._ID, Palavras.WORD, Palavras.DEFINITION, Palavras.EXAMPLE };

/**
 * Pacote do Content Provider. Precisa ser único.
 */
public static final String AUTHORITY = "br.dicionario.provider.palavra";

public long id;
public String word;
public String definition;
public String example;

public Palavra() {
}

public Palavra(String word, String definition, String example) {
    super();
    this.word = word;
    this.definition = definition;
    this.example = example;
}

public Palavra(long id, String word, String definition, String example) {
    super();
    this.id = id;
    this.word = word;
    this.definition = definition;
    this.example = example;
}

/**
 * Classe interna para representar as colunas e ser utilizada por um Content
 * Provider
 * 
 * Filha de BaseColumns que já define (_id e _count), para seguir o padrão
 * Android
 */
public static final class Palavras implements BaseColumns {

    // Não pode instanciar esta Classe
    private Palavras() {
    }

    // content://br.livro.android.provider.carro/carros
    public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY + "/palavras");

    // Mime Type para todos os carros
    public static final String CONTENT_TYPE = "vnd.android.cursor.dir/vnd.google.palavras";

    // Mime Type para um único carro
    public static final String CONTENT_ITEM_TYPE = "vnd.android.cursor.item/vnd.google.palavras";

    // Ordenação default para inserir no order by
    public static final String DEFAULT_SORT_ORDER = "_id ASC";

    public static final String WORD = "word";
    public static final String DEFINITION = "definition";
    public static final String EXAMPLE = "example";

    // Método que constrói uma Uri para um Carro específico, com o seu id
    // A Uri é no formato "content://br.livro.android.provider.carro/carros/id"
    public static Uri getUriId(long id) {
        // Adiciona o id na URI default do /carros
        Uri uriPalavra = ContentUris.withAppendedId(Palavras.CONTENT_URI, id);
        return uriPalavra;
    }
}

@Override
public String toString() {
    return "Word: " + word + ", Definition: " + definition + ", Example: " + example;
} 
```

}

CadastroPalavras.Java

```
public class CadastroPalavras extends ListActivity {
protected static final int INSERIR_EDITAR = 1;
protected static final int BUSCAR = 2;
protected static final int EDITAR = 3;

public static RepositorioPalavra repositorio;

private List<Palavra> palavras;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    repositorio = new RepositorioPalavraScript(this);
    atualizarLista();
}

protected void atualizarLista() {
    // Pega a lista de carros e exibe na tela
    palavras = repositorio.listarPalavras();

    // Adaptador de lista customizado para cada linha de um carro
    setListAdapter(new PalavraListAdapter(this, palavras));
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    menu.add(0, INSERIR_EDITAR, 0, "Adicionar").setIcon(R.drawable.novo);
    menu.add(0, BUSCAR, 0, "Buscar").setIcon(R.drawable.pesquisar);
    menu.add(0, EDITAR, 0, "Editar").setIcon(R.drawable.novo);
    return true;
}

@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    // Clicou no menu
    switch (item.getItemId()) {
    case INSERIR_EDITAR:
        // Abre a tela com o formulário para adicionar
        startActivityForResult(new Intent(this, Adicionar.class), INSERIR_EDITAR);
        break;
    case BUSCAR:
        // Abre a tela para buscar o carro pelo nome
        startActivity(new Intent(this, BuscarPalavra.class));
        break;
    case EDITAR:
        // Abre a tela para buscar o carro pelo nome
        startActivity(new Intent(this, Editar.class));
        break;
    }
    return true;
}

@Override
protected void onListItemClick(ListView l, View v, int posicao, long id) {
    super.onListItemClick(l, v, posicao, id);
    editarPalavra(posicao);
}

// Recupera o id do carro, e abre a tela de edição
protected void editarPalavra(int posicao) {
    // Usuário clicou em algum carro da lista
    // Recupera o carro selecionado
    Palavra palavra = palavras.get(posicao);
    // Cria a intent para abrir a tela de editar
    Intent it = new Intent(this, DetalhePalavra.class);
    // Passa o id do carro como parâmetro
    it.putExtra(Palavras._ID, palavra.id);
    // Abre a tela de edição
    startActivityForResult(it, INSERIR_EDITAR);
}

@Override
protected void onActivityResult(int codigo, int codigoRetorno, Intent it) {
    super.onActivityResult(codigo, codigoRetorno, it);

    // Quando a activity EditarCarro retornar, seja se foi para adicionar vamos atualizar a lista
    if (codigoRetorno == RESULT_OK) {
        // atualiza a lista na tela
        atualizarLista();
    }
}

@Override
protected void onDestroy() {
    super.onDestroy();

    // Fecha o banco
    repositorio.fechar();
}
} 
```

PalavraListAdapter.Java

```
public class PalavraListAdapter extends BaseAdapter {
private Context context;
private List<Palavra> lista;

public PalavraListAdapter(Context context, List<Palavra> lista) {
    this.context = context;
    this.lista = lista;
}

public int getCount() {
    return lista.size();
}

public Object getItem(int position) {
    return lista.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    // Recupera o Carro da posição atual
    Palavra c = lista.get(position);

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.palavra_linha_tabela, null);

    // Atualiza o valor do TextView 
    TextView word = (TextView) view.findViewById(R.id.word);
    word.setText(c.word);

    return view;
} 
```

}

编辑器Palavra.Java

```
public class EditarPalavra extends Activity {
static final int RESULT_SALVAR = 1;
static final int RESULT_EXCLUIR = 2;
static final int RESULT_APAGAR = 3;

// Campos texto
private EditText campoWord;
private EditText campoDefinition;
private EditText campoExample;
private Long id;

@Override
protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.form_editar_palavra);

    campoWord = (EditText) findViewById(R.id.campoWord);
    campoDefinition = (EditText) findViewById(R.id.campoDefinition);
    campoExample = (EditText) findViewById(R.id.campoExample);

    id = null;

    Bundle extras = getIntent().getExtras();
    // Se for para Editar, recuperar os valores ...
    if (extras != null) {
        id = extras.getLong(Palavras._ID);

        if (id != null) {
            // é uma edição, busca o carro...
            Palavra c = buscarPalavra(id);
            campoWord.setText(c.word);
            campoDefinition.setText(c.definition);
            campoExample.setText(String.valueOf(c.example));
        }
    }

    ImageButton btCancelar = (ImageButton) findViewById(R.id.btCancelar);
    btCancelar.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            setResult(RESULT_CANCELED);
            // Fecha a tela
            finish();
        }
    });

    // Listener para salvar o carro
    ImageButton btSalvar = (ImageButton) findViewById(R.id.btSalvar);
    btSalvar.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            salvar();
        }
    });

    ImageButton btExcluir = (ImageButton) findViewById(R.id.btExcluir);

    if (id == null) {
        // Se id está nulo, não pode excluir
        btExcluir.setVisibility(View.INVISIBLE);
    } else {
        // Listener para excluir o carro
        btExcluir.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                excluir();
            }
        });

    }
}

@Override
protected void onPause() {
    super.onPause();
    // Cancela para não ficar nada na tela pendente
    setResult(RESULT_CANCELED);

    // Fecha a tela
    finish();
}

public void salvar() {

    Palavra palavra = new Palavra();
    if (id != null) {
        // É uma atualização
        palavra.id = id;
    }
    palavra.word = campoWord.getText().toString();
    palavra.definition = campoDefinition.getText().toString();
    palavra.example = campoExample.getText().toString();

    // Salvar
    salvarPalavra(palavra);

    // OK
    setResult(RESULT_OK, new Intent());

    // Fecha a tela
    finish();
}

public void excluir() {
    if (id != null) {
        excluirPalavra(id);
    }

    // OK
    setResult(RESULT_OK, new Intent());

    // Fecha a tela
    finish();
}

// Buscar o carro pelo id
protected Palavra buscarPalavra(long id) {
    return CadastroPalavras.repositorio.buscarPalavra(id);
}

// Salvar o carro
protected void salvarPalavra(Palavra palavra) {
    CadastroPalavras.repositorio.salvar(palavra);
}

// Excluir o carro
protected void excluirPalavra(long id) {
    CadastroPalavras.repositorio.deletar(id);
}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:18:22.850

你看过这个吗？[http://developer.android.com/guide/topics/search/adding-custom-suggestions.html](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html) 我认为这可能是你想要的。

# c++ - 在 C++ 中分离流

> ID：15818603
> 
> 赞同：0
> 
> 时间：2013-04-04T18:11:00.797
> 
> 标签：c++, sorting, input, vector

```
 int n = 1; 

    //Lines 14 to (vertices+13) read
    while (i<(vertices+14))
    {
        //First three numbers on each line put into "v1"
        if (n < 4)
        {
            copy(istream_iterator<float>(input), 
            istream_iterator<float>(), 
            back_inserter(v1));

            n++;
        }

        //Last three numbers on each line put into "v2"
        else
        {
            copy(istream_iterator<float>(input), 
            istream_iterator<float>(), 
            back_inserter(v2));
            n++;

            if (n > 6)
            {
                i++;    
                n=1;    
            }
        } 
```

这应该将一行上的前三个数字排序到一个向量中，将后三个数字排序到另一个向量中。然而，由于我怀疑流工作的性质，所有数字都进入向量 v1，没有一个进入 v2。输入是一个 ifstream。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:14:45.483

问题在于如何[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)工作。

第二个参数标记停止复制的位置，以及您的参数

```
istream_iterator<float>() 
```

表示“流的*结束*”。第**一个**调用`copy`是读取整个流。

改用[`std::copy_n`](http://en.cppreference.com/w/cpp/algorithm/copy_n)复制一定数量。

*来自评论：*

> 还有没有办法使用copy的第二个参数来获取三个数字？

这正是它的用途。对于某个数字*n*，如果要复制*n*值，请使用`std::copy_n`.

# sql - SQL Query按时间对项目进行分组，但只有彼此靠近？

> ID：15818604
> 
> 赞同：3
> 
> 时间：2013-04-04T18:11:01.797
> 
> 标签：sql, sql-server, sql-server-2012, gaps-and-islands

我正在尝试制作一个 SQL 语句来从数据库中提取样本值。该表包含与 CNC 机床中的刀具更换有关的值。我当前的语句正确地提取了值，但前提是给定程序中出现了一次该工具。如果工具出现多次，则时间值对应于从第一次加载到最后一次加载。只有一个 TIME 列，通过查找它的第一次和最后一次出现，我可以确定工具进/出时间。

基本示例：

```
Raw Data:
Tool_Number    TIME    
100            12:00
100            12:01
100            12:02
100            12:03

Current Query Returns: 
Tool_Number    TIME_IN     TIME_OUT    
100            12:00       12:03 
```

但是，当该工具多次出现时，事情会变得很棘手，因为我不能再使用 TOP 和 DISTINCT 规则。

```
Raw Data:
Tool_Number    TIME    
100            12:00
100            12:01
100            12:02
100            12:03
200            12:04
200            12:05
100            12:06
100            12:07

Current Query Returns: 
Tool_Number    TIME_IN     TIME_OUT    
100            12:00       12:07
200            12:04       12:05

Ideal Query Returns:
Tool_Number    TIME_IN     TIME_OUT    
100            12:00       12:03
200            12:04       12:05
100            12:06       12:07 
```

我们正在做时间分析，当然这严重影响了总时间值。当前查询是：

```
SELECT * FROM (SELECT DISTINCT SPINDLE_POT FROM TBL_SPINDLE_DATA_M1 
WHERE TIME BETWEEN '4/3/20131:24:13 PM' AND '4/3/2013 3:07:33 PM') AS A 

CROSS APPLY

((SELECT TOP 1 TIME FROM TBL_SPINDLE_DATA_M1 B WHERE B.SPINDLE_POT = A.SPINDLE_POT AND
TIME BETWEEN '4/3/2013 1:24:13 PM' AND '4/3/2013 3:07:33 PM') AS NEWTABLE1

JOIN

(SELECT TOP 1 TIME FROM TBL_SPINDLE_DATA_M1 B WHERE B.SPINDLE_POT = A.SPINDLE_POT 
AND TIME BETWEEN '4/3/2013 1:24:13 PM' AND '4/3/2013 3:07:33 PM' ORDER BY TIME DESC) 
AS NEWTABLE2 ON (0=0)) 
```

我绝不是任何一种 SQL 查询专家！上面的查询可能非常错误，但它确实返回了我需要的内容。有没有办法对类似的项目进行分组，但如果它们的索引不相互接触，就不要对它们进行分组吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T18:31:11.357

这被称为“岛屿问题”，我认为这是一种解决方案（信用 Itzik Ben Gan）

```
select  tool_number,
        min(time) 'in',
        max(time) 'out',
        count(*)
from    (
    select  tool_number,
            time,
            ROW_NUMBER() OVER (ORDER BY time) - ROW_NUMBER() OVER (PARTITION BY Tool_Number ORDER BY time) AS Grp
    from    #temp
    ) as a
group by grp, tool_number
order by min(time) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T18:58:52.483

这是另一种使用方法`LAG/LEAD`：

```
DECLARE @rawdata TABLE(Tool_Number INT, [Time] TIME(0));

INSERT @rawdata VALUES
(100,'12:00'), (100,'12:01'), (100,'12:02'), (100,'12:03'),
(200,'12:04'), (200,'12:05'),
(100,'12:06'), (100,'12:07');

;WITH x AS
(
  SELECT Tool_Number, [Time], 
    s = CASE Tool_number WHEN LAG(Tool_number,1) OVER (ORDER BY [Time]) 
        THEN 0 ELSE 1 END,
    e = CASE Tool_number WHEN LEAD(Tool_number,1) OVER (ORDER BY [Time]) 
        THEN 0 ELSE 1 END
  FROM @rawdata
),
y AS 
(
  SELECT Tool_Number, s, [Time], e = LEAD([Time],1) OVER (ORDER BY [Time]) 
  FROM x WHERE 1 IN (s,e)
)
SELECT Tool_number, TIME_IN = [Time], TIME_OUT = e 
FROM y 
WHERE s = 1
ORDER BY TIME_IN; 
```

结果：

```
Tool_number  TIME_IN   TIME_OUT
-----------  --------  --------
100          12:00:00  12:03:00
200          12:04:00  12:05:00
100          12:06:00  12:07:00 
```

# python - 如何在来自 Python 的 imaplib 的 Gmail IMAP 搜索中包含聊天？

> ID：15818608
> 
> 赞同：3
> 
> 时间：2013-04-04T18:11:26.413
> 
> 标签：python, gmail-imap, imaplib

我很高兴使用 imaplib 来获取特定标签中的消息 ID：

```
connection.select("MyLabel")
connection.uid('SEARCH', None, 'ALL')) 
```

但是如果我在该标签中有一些聊天，它们不会被返回，所以它们对 IMAP 是不可见的。我已经阅读[了 Accessing Chat Folder in Python Using Imaplib](https://stackoverflow.com/questions/8146970/accessing-chat-folder-in-python-using-imaplib)，尽管这是用于在 Chats 标签中搜索，而不是在另一个标签中查找聊天，并且似乎无法使这种情况起作用。

我也许可以在“聊天”中对标记为“MyLabel”的消息进行第二次搜索，但这是一个额外的查询，并且要求我的应用程序用户进行相当多的设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T08:43:07.623

Gmail**标签**显示为顶级**邮箱**，而不是相反。要搜索多个邮箱，您需要执行多个查询，从而`select()`在适当的邮箱上执行然后执行`search`命令（或`uid`在您的情况下）。

## 配置您的 gmail 帐户以通过 IMAP 访问聊天：

您提供的链接：[使用 Imaplib 在 Python 中访问聊天文件夹](https://stackoverflow.com/questions/8146970/accessing-chat-folder-in-python-using-imaplib)仍然非常重要，因为用户需要允许 IMAP 访问他们的聊天日志。您还可以查看[Gmail 使用的 imap 扩展](https://developers.google.com/gmail/imap_extensions)`X-GM-RAW`，以及 和的描述`X-GM-LABELS`。

如果您将 Gmail 用于企业，我不确定它是否有效（我没有要验证的帐户），但此链接：[https](https://developers.google.com/gmail/imap_extensions#checking_for_the_presence_of_extensions) ://developers.google.com/gmail/imap_extensions#checking_for_the_presence_of_extensions可能会帮助您查看如果存在扩展。

## 修改后的 utf-7 编码：

大多数 imap 服务器将邮箱名称和标签存储在`utf-7`. 除非您使用的是 plain ，否则您不能使用像 gmail 这样的直接标签`us-ascii`。[`IMAPClient`](http://imapclient.freshfoo.com/)知道如何使用大多数 IMAP 服务器使用的修改后的 utf7 编码进行编码/解码。有[一个针对 imaplib 的错误打开，](http://bugs.python.org/issue5305)因此您可能希望使用`imapclient.imap_utf7`模块对邮箱名称和/或标签进行编码，直到开始自行`imaplib`支持修改后的编码。`utf-7`我在网上找到的另一件事：虽然您可能能够`STORE`使用特定编码成功标记，但除非您使用经过修改的编码，否则您[会惨遭失败`SEARCH`](http://productforums.google.com/d/topic/gmail/WS0itaDK19E/discussion)（同样在[涉及 xoauth](https://groups.google.com/d/msg/google-mail-xoauth-tools/SdBlWDrfBxM/HtD98dsLOh4J)[时）](http://productforums.google.com/d/topic/gmail/WS0itaDK19E/discussion)`utf-7`编码或指示字符集。其他项目已经为 gmail 完成了大部分工作，例如带有 imap-utf7 支持的BaGoMa（[备份 google 邮件）。](https://github.com/gburca/BaGoMa)到目前为止，我已经能够通过带有`latin-1`字符的 UI 创建一个标签，并`SEARCH`使用`utf-8`字符集为它创建一个标签。

以下是如何对标签进行编码：

```
from imapclient import imap_utf7
label = imap_utf7.encode(u'yourlabel') 
```

另请参阅此问题：[Python 的 IMAP 文件夹路径编码 (IMAP UTF-7)](https://stackoverflow.com/questions/12776679/imap-folder-path-encoding-imap-utf-7-for-python)

您可以使用以下方法检查标签：

```
>>>> sock.select("[Gmail]/Chats", True)
>>>> sock.uid('FETCH', '1:*', 'X-GM-LABELS') 
```

这对于检查您拥有的标签和调试编码问题很有用。

## 例子：

```
import imaplib
import getpass
import atexit
from imapclient import imap_utf7

def find_messages(sock, label):
    mailbox = imap_utf7.encode(label)
    label = imap_utf7.encode(label.encode('utf-8'))
    try:
        # process regular mailbox
        sock.select(mailbox)
    except sock.error:
        pass
    else:
        resp, data = sock.uid('SEARCH', None, '(ALL)')
        assert resp == 'OK'
        for uid in data[0].split():
            # because we do select, this uid will be valid.
            yield uid   
    try:
        # now process chats with that label
        sock.select("[Gmail]/Chats", True)
    except sock.error:
        # access to chats via IMAP is disabled most likely
        pass
    else:
        # resp, data = sock.uid('SEARCH', 'X-GM-RAW', 'label:%s' % label)
        sock.literal = label
        resp, data = sock.uid('SEARCH', 'CHARSET', 'UTF-8', 'X-GM-LABELS')
        assert resp == 'OK'
        for uid in data[0].split():
            # because we do select, this uid will be valid.
            yield uid

def test():
    email = "XXXXXXXX@gmail.com"
    label = u"français" # oui oui merci beaucoup.
    sock = imaplib.IMAP4_SSL("imap.gmail.com", 993)
    sock.login(email, getpass.getpass())
    for uid in find_messages(sock, label):
        # e.g.
        print sock.uid('FETCH', uid, '(BODY[HEADER])')
    sock.close()
    sock.logout() 
```

在我的机器上测试过！

```
>>> test()
Password: 
('OK', [('1 (UID 14 BODY[HEADER] {398}', 'MIME-Version: 1.0\r\nReceived: by 10.XXX.XXX.XXX with HTTP; Thu, 11 Jul 2013 09:54:32 -0700 (PDT)\r\nDate: Thu, 11 Jul 2013 09:54:32 -0700\r\nDelivered-To: XXXXXXXX@gmail.com\r\nMessage-ID: <XXXXXXXX@mail.gmail.com>\r\nSubject: test email\r\nFrom: Damien <XXXXXXXX@gmail.com>\r\nTo: Damien <XXXXXXXX@gmail.com>\r\nContent-Type: text/plain; charset=ISO-8859-1\r\n\r\n'), ')'])
('OK', [('1 (UID 1 BODY[HEADER] {47}', 'From: Damien XXXXXXXX <XXXXXXXX@gmail.com>\r\n\r\n'), ')'])
('OK', [('2 (UID 2 BODY[HEADER] {46}', 'From: Vincent XXXXXXXX <XXXXXXXX@gmail.com>\r\n\r\n'), ')']) 
```

## 未记录的接口：

`imaplib`能够使用**文字**，这在使用不同的编码时特别有用。这可以通过`IMAP4.literal`在运行命令之前设置属性来实现。

```
sock.literal = label
resp, data = sock.uid('SEARCH', 'CHARSET', 'UTF-8', 'X-GM-LABELS') 
```

# html - 使用 addthis.com 的社交插件

> ID：15818609
> 
> 赞同：0
> 
> 时间：2013-04-04T18:11:27.703
> 
> 标签：html, facebook-like

我正在尝试使用 3rd 方[addthis.com](http://addthis.com)将社交插件添加到我自己的网站。我从他们的网站获得了我的代码，当我将此代码放入我的 html 文档时，它的功能和界面与我想要的相同。**但是，我无法将它与我的社交网站帐户/页面相关联**

```
<code><body>
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_floating_style addthis_counter_style" style="left:50px;top:50px;">
<a class="addthis_button_facebook_like" fb:like:layout="box_count"></a>
<a class="addthis_button_tweet" tw:count="vertical"></a>
<a class="addthis_button_google_plusone" g:plusone:size="tall"></a>
<a class="addthis_counter"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-515b2dbc1a232bc9"></script>
<!-- AddThis Button END -->
</body></code> 
```

请帮助我将其与我的社交页面链接。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:17:28.677

如果我没有错，您将需要使用不同的代码，因为该代码只是“全局共享”，这意味着它只会共享页面而不是特定页面。您可以直接从您使用的 URL 中找到更多信息。

你可能想看看这个页面：

[https://www.addthis.com/get/follow#.UV3Dy6KG2rI](https://www.addthis.com/get/follow#.UV3Dy6KG2rI)

问候， Mee

# javascript - 为什么这段代码不会在 JavaScript 中抛出错误？

> ID：15818613
> 
> 赞同：0
> 
> 时间：2013-04-04T18:11:39.160
> 
> 标签：javascript, firebug, web-inspector

当它停止工作时，我花了一段时间才在我的代码中发现这个问题。

```
console.log('before var');
var lastReview = ''
    newReview;
console.log('after var'); 
```

我认为没有逗号之后`lastReview = ''`是语法错误，但是 Chrome 检查器和 Firebug 在控制台中都没有报告任何内容。以下代码`console.log`根本不会执行。

如果您直接在控制台中运行代码段，Chrome 实际上会报告错误......但在实际页面运行时不会。Firefox 在任何情况下都不会报告错误。

为什么开发工具不报告这些简单的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:13:11.070

没有（语法）错误 - 此代码是有效的 javascript。按照[规则](http://es5.github.com/#x7.9.1)，JS插入分号：

```
console.log('before var');
var lastReview = ''; <-- here
    newReview;
console.log('after var'); 
```

所以这`newReview;`成为一个有效的，虽然是荒谬的，陈述。

尽管没有语法错误，但由于未定义变量（假设`newReview`之前未声明），此代码仍会引发运行时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:13:08.720

因为如果缺少分号，无论如何都会自动插入分号 - 所以代码中没有语法错误。

在 ECMAScript 语言规范[的自动分号插入规则](http://bclary.com/2004/11/07/#a-7.9.1)部分阅读有关此内容的更多信息。

在您的示例中，这是：

```
var lastReview = '' 
```

变成：

```
var lastReview = ''; 
```

# codeigniter - codeigniter 返回对象

> ID：15818615
> 
> 赞同：0
> 
> 时间：2013-04-04T18:11:40.970
> 
> 标签：codeigniter, codeigniter-2

我正在从数据库中进行选择，并且数据成功返回。我只是不确定如何访问数组的元素，例如用户名或名称等。这是输出：

> Array ( [0] => stdClass Object ( [id] => 9 [fullname] => Ø®Ø§Ù„Ø¯ Ø§Ù„ØºØ§Ù...Ø¯ÙŠ [membership] => free [username] = > kkkkk [密码] => 16d7a4fca7442dda3ad93c9a726597e4 [电子邮件] => someone@gmail.com [关于] => [城市] => 利雅得 [profilepic] => /home2/sdds/public_html/uploads/Red_velvet_cupcakes_with_roses.jpgRed_velvet_cupcakes_with_roses.jpg [mobile ] => [电话] => [地址] => [画廊链接] => ) )

这是模型中返回上述内容的代码：

```
public function login()
{
    $this->db->select('*');
    $this->db->from('members');
    $this->db->where('username', $this->input->post('username'));
    $this->db->where('password', md5($this->input->post('password')));
    $query = $this->db->get();
    return $query->result();
} 
```

那么在这里做什么呢？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:20:44.233

请检查：

```
//model function in your model    
public function login()
    {
        $this->db->select('*');
        $this->db->from('members');
        $this->db->where('username', $this->input->post('username'));
        $this->db->where('password', md5($this->input->post('password')));
        $query = $this->db->get();
        return $query->row();
    }
   // in controller  
    $logindata = $this->YOUR_MODEL_NAME->login();
// access like this

    echo $logindata->fullname; 
```

参考：[https ://www.codeigniter.com/user_guide/database/results.html](https://www.codeigniter.com/user_guide/database/results.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T00:04:35.910

堆积——还要确保检查你的模型方法中是否真的有任何东西

```
 // check how many records returned with num_rows()
 if ($query->num_rows() == 1) {

       // since there is just one record, use row()
       // when 2 or more records, use result() 
       return $query->row();
    }
    else
    { return false; } 
```

这样在您的控制器中，您会立即知道是否有任何返回，并且您可以显示适当的视图。

```
 if(! $logindata = $this->login_model->login() ) { 
   // NO login data came back 
   //  show appropriate view

  else {
 // pass to data if you need it in the view 
  $data['logindata'] = $logindata ;
   // call and show the view  

 } 
```

# mongodb - Spring Data - MongoDB 索引 DBRef

> ID：15818619
> 
> 赞同：10
> 
> 时间：2013-04-04T18:11:57.003
> 
> 标签：mongodb, indexing, spring-data-mongodb, dbref

我正在使用 spring-data-mongodb-1.2.0.RELEASE。我有两个类 A 和 B，其中 B 引用了 A，并用 @DBRef 进行了注释。

A类：

```
@Document(collection = "a")
public class A {
@Id
public String id;

/** The TicketGrantingTicket this is associated with. */
@Field
public String name;

public A(String id, String name) {
    this.id = id;
    this.name = name;
}
} 
```

B类：

```
@Document(collection = "b")
public class B {

@Id
public String id;

@Field
public String name;

@DBRef
@Indexed
public A a;

public B(String id, String name, A a) {
    super();
    this.id = id;
    this.name = name;
    this.a = a;
}
} 
```

因为我正在查询所有引用某个 A 的 B 实例：

```
B fromDB = mongoOperations.findOne(Query.query(Criteria.where("a.$id").is(a1.id)), B.class); 
```

我需要它被索引。

在第一次将 B 实例插入 MongoDB 之后，应该创建一个索引。如下所示，它没有： ![](https://i.stack.imgur.com/58AHR.png)

有谁知道如何创建这样的索引？

此外，看起来 DBRef 文件（如 mongo shell 所见）与 [MongoDB 文档](http://docs.mongodb.org/manual/applications/database-references/#format)中定义的格式不匹配。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T20:22:16.167

您可以使用 mongo shell 创建索引，但是如果您想通过代码来创建索引，并且由于您使用的是 spring-data-mongodb，请使用以下命令：

`mongoTemplate.indexOps(B.class).ensureIndex(new Index().on("a", Order.ASCENDING));`

如果您的类名称不匹配，您还可以指定集合的​​名称：

```
mongoTemplate.indexOps("b").ensureIndex(new Index().on("a", Order.ASCENDING)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T18:36:39.367

我认为这会起作用： `@CompoundIndex(name = "b_ref_to_a", def = "{'a.id' : 1}") @Document(collection = "b") public class B {...}`

如果没有，您可以调用`mongoTemplate.indexOps("b").ensureIndex(...)`带有`@PostConstruct`或注释的方法

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-28T16:13:07.420

我遇到了同样的问题，对我来说，orid 的解决方案有效，但我必须将 @CompoundIndex 包装在 @CompoundIndexes 内，否则它不起作用（我使用的是 Spring Roo）。

```
@CompoundIndexes({
    @CompoundIndex(name = "b_ref_to_a", def = "{'a.id' : 1}")
})
@Document(collection = "b")
public class B {...} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-02T09:28:37.817

```
DBObject indexOptions = new BasicDBObject();
indexOptions.put("a", 1);
indexOptions.put("b", 1);
indexOptions.put("c.d", 1);
indexOptions.put("e.f", 1);
CompoundIndexDefinition indexDefinition =
            new CompoundIndexDefinition(indexOptions);
mongoTemplate.indexOps(.class).ensureIndex(indexDefinition);

for unique index you can add mongoTemplate.indexOps(.class).ensureIndex(indexDefinition).unique(); 
```

# c++ - 在示例代码中运行仿射变换时出错。”

> ID：15818620
> 
> 赞同：-1
> 
> 时间：2013-04-04T18:12:03.740
> 
> 标签：c++, itk

我从 Wiki Example 下载了 AffineTranformation 并将其修改为仿射两个 DICOM 文件。我成功构建它。但是当我运行它时。它有一个错误信使：

```
terminate called after throwing an instance of 'itk::ExceptionObject'
  what():  /usr/local/include/ITK-4.4/itkImageFileWriter.hxx:123:
itk::ERROR: ImageFileWriter(0x9808fd8): No filename was specified
Aborted (core dumped) 
```

这是我的编辑代码。请帮我编辑它。我正在使用适用于 Linux 的 ITK 最新版本 4.3.1

```
 #include "itkCastImageFilter.h"``
#include "itkEllipseSpatialObject.h"
#include "itkImage.h"
#include "itkImageRegistrationMethod.h"
#include "itkLinearInterpolateImageFunction.h"
#include "itkImageFileReader.h"
#include "itkImageFileWriter.h"
#include "itkMeanSquaresImageToImageMetric.h"
#include "itkRegularStepGradientDescentOptimizer.h"
#include "itkResampleImageFilter.h"
#include "itkRescaleIntensityImageFilter.h"
#include "itkSpatialObjectToImageFilter.h"
#include "itkAffineTransform.h"
#include "itkGDCMImageIO.h"
// Software Guide : EndCodeSnippet
#include <list>
#include <fstream>
const    unsigned int    Dimension = 2;
typedef  unsigned char           PixelType;

typedef itk::Image< PixelType, Dimension >  ImageType;

static void CreateEllipseImage(ImageType::Pointer image);
static void CreateSphereImage(ImageType::Pointer image);

int main(int, char *[] )
{
  //  The transform that will map the fixed image into the moving image.
  typedef itk::AffineTransform< double, Dimension > TransformType;

  //  An optimizer is required to explore the parameter space of the transform
  //  in search of optimal values of the metric.
  typedef itk::RegularStepGradientDescentOptimizer       OptimizerType;

  //  The metric will compare how well the two images match each other. Metric
  //  types are usually parameterized by the image types as it can be seen in
  //  the following type declaration.
  typedef itk::MeanSquaresImageToImageMetric<
      ImageType,
      ImageType >    MetricType;

  //  Finally, the type of the interpolator is declared. The interpolator will
  //  evaluate the intensities of the moving image at non-grid positions.
  typedef itk:: LinearInterpolateImageFunction<
      ImageType,
      double          >    InterpolatorType;
      //  The registration method type is instantiated using the types of the
  //  fixed and moving images. This class is responsible for interconnecting
  //  all the components that we have described so far.
  typedef itk::ImageRegistrationMethod<
      ImageType,
      ImageType >    RegistrationType;
      // Create components
  MetricType::Pointer         metric        = MetricType::New();
  TransformType::Pointer      transform     = TransformType::New();
  OptimizerType::Pointer      optimizer     = OptimizerType::New();
  InterpolatorType::Pointer   interpolator  = InterpolatorType::New();
  RegistrationType::Pointer   registration  = RegistrationType::New();

  // Each component is now connected to the instance of the registration method.
  registration->SetMetric(        metric        );
  registration->SetOptimizer(     optimizer     );
  registration->SetTransform(     transform     );
  registration->SetInterpolator(  interpolator  );

  // Write the two synthetic inputs

  typedef itk::Image< PixelType, Dimension >  FixedImageType;
  typedef itk::Image< PixelType, Dimension >  MovingImageType;
  // Software Guide : EndCodeSnippet

 // Set up the file readers
  typedef itk::ImageFileReader< FixedImageType  > FixedImageReaderType;
  typedef itk::ImageFileReader< MovingImageType > MovingImageReaderType;

   FixedImageReaderType::Pointer fixedImageReader   = FixedImageReaderType::New();
   MovingImageReaderType::Pointer movingImageReader = MovingImageReaderType::New();

    fixedImageReader->SetFileName("fix.dcm" );
    movingImageReader->SetFileName( "mov.dcm" );

  typedef itk::ImageFileWriter< ImageType >  WriterType;

  WriterType::Pointer      fixedWriter =  WriterType::New();
  //ixedWriter->SetFileName("fixed.png");
  fixedWriter->SetInput( fixedImageReader->GetOutput());
  fixedWriter->Update();

  WriterType::Pointer      movingWriter =  WriterType::New();
// movingWriter->SetFileName("moving.png");
  movingWriter->SetInput( movingImageReader->GetOutput());
  movingWriter->Update();

  // Set the registration inputs
  registration->SetFixedImage(fixedImageReader->GetOutput());
  registration->SetMovingImage(movingImageReader->GetOutput());

  registration->SetFixedImageRegion(
    fixedImageReader->GetOutput()->GetLargestPossibleRegion() );

  //  Initialize the transform
  typedef RegistrationType::ParametersType ParametersType;
  ParametersType initialParameters( transform->GetNumberOfParameters() );

  // rotation matrix
  initialParameters[0] = 1.0;  // R(0,0)
  initialParameters[1] = 0.0;  // R(0,1)
  initialParameters[2] = 0.0;  // R(1,0)
  initialParameters[3] = 1.0;  // R(1,1)

  // translation vector
  initialParameters[4] = 0.0;
  initialParameters[5] = 0.0;
 registration->SetInitialTransformParameters( initialParameters );

  optimizer->SetMaximumStepLength( .1 ); // If this is set too high, you will get a
  //"itk::ERROR: MeanSquaresImageToImageMetric(0xa27ce70): Too many samples map outside moving image buffer: 1818 / 10000" error

  optimizer->SetMinimumStepLength( 0.01 );

  // Set a stopping criterion
  optimizer->SetNumberOfIterations( 200 );

  // Connect an observer
  //CommandIterationUpdate::Pointer observer = CommandIterationUpdate::New();
  //optimizer->AddObserver( itk::IterationEvent(), observer );

  try
  {
    registration->Update();
  }
  catch( itk::ExceptionObject & err )
  {
    std::cerr << "ExceptionObject caught !" << std::endl;
    std::cerr << err << std::endl;
    return EXIT_FAILURE;
  }
  //  The result of the registration process is an array of parameters that
  //  defines the spatial transformation in an unique way. This final result is
  //  obtained using the \code{GetLastTransformParameters()} method.

  ParametersType finalParameters = registration->GetLastTransformParameters();
  std::cout << "Final parameters: " << finalParameters << std::endl;

  //  The value of the image metric corresponding to the last set of parameters
  //  can be obtained with the \code{GetValue()} method of the optimizer.

  const double bestValue = optimizer->GetValue();

  // Print out results
  //
  std::cout << "Result = " << std::endl;
  std::cout << " Metric value  = " << bestValue          << std::endl;

  //  It is common, as the last step of a registration task, to use the
  //  resulting transform to map the moving image into the fixed image space.
  //  This is easily done with the \doxygen{ResampleImageFilter}.

  typedef itk::ResampleImageFilter<
      ImageType,
      ImageType >    ResampleFilterType;

  ResampleFilterType::Pointer resampler = ResampleFilterType::New();
  resampler->SetInput( movingImageReader->GetOutput());

  //  The Transform that is produced as output of the Registration method is
  //  also passed as input to the resampling filter. Note the use of the
  //  methods \code{GetOutput()} and \code{Get()}. This combination is needed
  //  here because the registration method acts as a filter whose output is a
  //  transform decorated in the form of a \doxygen{DataObject}. For details in
  //  this construction you may want to read the documentation of the
  //  \doxygen{DataObjectDecorator}.

  resampler->SetTransform( registration->GetOutput()->Get() );

  //  As described in Section \ref{sec:ResampleImageFilter}, the
  //  ResampleImageFilter requires additional parameters to be specified, in
  //  particular, the spacing, origin and size of the output image. The default
  //  pixel value is also set to a distinct gray level in order to highlight
  //  the regions that are mapped outside of the moving image.

  resampler->SetSize( fixedImageReader->GetOutput()->GetLargestPossibleRegion().GetSize() );
  resampler->SetOutputOrigin(  fixedImageReader->GetOutput()->GetOrigin() );
  resampler->SetOutputSpacing( fixedImageReader->GetOutput()->GetSpacing() );
  resampler->SetOutputDirection( fixedImageReader->GetOutput()->GetDirection() );
 resampler->SetDefaultPixelValue( 100 );

  //  The output of the filter is passed to a writer that will store the
  //  image in a file. An \doxygen{CastImageFilter} is used to convert the
  //  pixel type of the resampled image to the final type used by the
  //  writer. The cast and writer filters are instantiated below.

  typedef unsigned char OutputPixelType;
  typedef itk::Image< OutputPixelType, Dimension > OutputImageType;
  typedef itk::CastImageFilter<
      ImageType,
      ImageType > CastFilterType;

  WriterType::Pointer      writer =  WriterType::New();
  CastFilterType::Pointer  caster =  CastFilterType::New();
  writer->SetFileName("output.png");
  caster->SetInput( resampler->GetOutput() );
  writer->SetInput( caster->GetOutput()   );
  writer->Update();
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:48:27.253

您根本无法像读取工厂的“.nrrd”等其他文件格式那样读取dicom文件。ITK 使用 GDCM 来处理 dicom IO。看看这个[http://www.itk.org/Wiki/ITK/Examples/DICOM/ResampleDICOM](http://www.itk.org/Wiki/ITK/Examples/DICOM/ResampleDICOM)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:14:30.267

错误消息实际上是已注释掉`No filename was specified`的调用：`SetFileName()`

```
 WriterType::Pointer      fixedWriter =  WriterType::New();
  // fixedWriter->SetFileName("fixed.png");

  WriterType::Pointer      movingWriter =  WriterType::New();
  // movingWriter->SetFileName("moving.png"); 
```

# c# - 如何在实体框架 4 中映射枚举属性

> ID：15818622
> 
> 赞同：4
> 
> 时间：2013-04-04T18:12:11.993
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

我的模型有一个枚举属性：

```
Sql server column "user_status" is a int NOT NULL.

[Column("User_Status")]
public UserStatus UserStatus { get; set; }

public enum UserStatus
{
    Pending  = 1,
    Member = 2,
    Banned   = 3
} 
```

目前，当我保存实体时出现错误，因为它说 user_status 列不能为空。

如何让实体框架在保存/更新时将此属性转换为 Int，并在加载实体时将其转换为枚举。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T18:17:34.940

Entity Framework 4 不支持使用枚举作为列类型。如果您想获得对枚举的本机支持，则需要升级到 Entity Framework 5。

如果您绝对必须使用 EF 4（因为已经在其中实施了一个项目），那么我建议您这样绕过它：

```
[Column("User_Status")]
public int UserStatusAsInt { get; set; }

[NotMapped]
public UserStatus UserStatus
{
  get { return (UserStatus) this.UserStatusAsInt; }
  set { this.UserStatusAsInt = (int)value; }
} 
```

这不是一个很好的解决方案，但它是解决问题的可靠解决方案，您仍然可以在页面上绑定它并将其视为其他代码中的枚举本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T23:07:05.550

有时可能需要映射值`string`而不是. 你可以这样做：`int``enum`

```
public enum DwellingType { Apartment, Cottage, House }

public DwellingType DwellingType { get; set; } // This wont be mapped in EF4 as it's an enum

public virtual string DwellingTypeString       // This will be mapped
{
    get { return DwellingType.ToString(); }
    set
    {
        DwellingType stringValue;
        if(Enum.TryParse(value, out stringValue))
        { DwellingType = stringValue; }
    }
} 
```

这实际上不是我的工作，我是在尝试`enums`使用 EF4 进行映射时遇到的。不幸的是，我不记得我在哪里找到了它，但仍然可能对其他人有用。

# sql - 在 SQL Server 2008 的 tablevalue 函数中使用动态 SQL 语句

> ID：15818635
> 
> 赞同：1
> 
> 时间：2013-04-04T18:13:01.240
> 
> 标签：sql, sql-server-2008, tsql, user-defined-functions, table-valued-parameters

有没有办法创建一个自定义函数，该函数使用动态创建的 SQL 语句返回一个表？

到目前为止，我尝试过类似的事情

```
ALTER function [dbo].[Test2] (@Mandant smallint)
RETURNS
@Ergebnis TABLE ([Kundennummer] int,[Suchbegriff] nvarchar(20))
AS
BEGIN
    DECLARE @curTable cursor
    DECLARE @str nvarchar(1024)
    DECLARE @Kundennummer int;
    DECLARE @Suchbegriff nvarchar(20);
    SET @str = 'set @curTable = CURSOR FOR SELECT KdNr, Match FROM ADR_030 where KdNr <> 0; OPEN @curTable' 
    EXEC sp_executesql @str, N'@curTable cursor OUTPUT', @curTable OUTPUT 
    fetch next from @curTable into @Kundennummer, @Suchbegriff;
    WHILE @@FETCH_STATUS = 0
    BEGIN
        insert into @Ergebnis values (@Kundennummer, @Suchbegriff)
        FETCH NEXT FROM @curTable into @Kundennummer, @Suchbegriff;
    END;
    close @curTable;
    deallocate @curTable;   
return
end 
```

但只是在执行函数时出错。

希望有人可以在这里帮助我。

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:20:17.070

您可以为此使用 CLR。但是，在纯 T-SQL 中无法做到这一点。

# css - 有没有类似 CSS 的源映射的东西？

> ID：15818636
> 
> 赞同：10
> 
> 时间：2013-04-04T18:13:06.270
> 
> 标签：css, google-chrome, webkit, source-maps

我正在使用 jQuery 向页面动态添加 CSS 标记：

```
$('<style type="text/css"/>').text(css).appendTo(document.head); 
```

在 Chrome 开发者工具中查看时，所有 CSS 都显示为“localhost”，这并不总是有帮助：

![在此处输入图像描述](https://i.stack.imgur.com/9ZPgk.png)

有没有像 CSS 的 Source Maps 这样的东西可以让我向调试器识别 CSS 的来源？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-15T20:17:50.643

在添加时将 sourceURL 添加到内联样式标记。

```
/*@ sourceURL=mystyles.css */ 
```

这将为该内联样式标签提供一个临时名称，该名称将在 DevTools 内部用于导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T00:51:36.417

它正在识别 CSS 的来源。它只显示为 localhost，因为样式的来源来自 localhost 主页上的内部 javascript。如果您单击指向规则位置的链接，它仍应将您带到动态设置样式的内联 javascript。

至于源地图，您是否尝试过展开“Computed Style”部分，然后展开您想要查看继承层次结构的特定样式？

# c++ - 使用 C++ 读取原始图像文件

> ID：15818641
> 
> 赞同：0
> 
> 时间：2013-04-04T18:13:16.753
> 
> 标签：c++, image

我有两个相同的 C++ 代码，每个代码都读取相同的 .raw 图像文件，如下所示：

```
this->file_variable = fopen(filename, "r") 
```

他们这样处理其中的信息：

```
status = fread ((void *)this->img1,
  sizeof(float),
  (this->width * this->height),
  this->file_variable)
) 
```

两个代码之间的唯一区别是它们是在不同的盒子上编译的，但是我从 img1 数组中得到了完全不同的结果。我完全不知道如何开始调试它。谁能指出我正确的方向？

编辑：我正在慢慢获得有关文件的更多信息。它们是（宽 x 高）1800 x 1728 像素，1 通道，8 位深度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:17:41.467

听起来文件是用二进制格式编写的，所以你需要同样打开它：

```
this->file_variable = fopen(filename, "rb") 
```

如果没有“b”，它将被读取为 ASCII。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:14:35.377

现在我看到了你的问题。您的数据存储在大端，您正在小端系统上读取它。您只需通过反转字节顺序来转换每个浮点数。使用这样的函数（取自其他地方的类似答案）：

```
float ReverseFloat( const float inFloat )
{
float retVal;
char *floatToConvert = ( char* ) & inFloat;
char *returnFloat = ( char* ) & retVal;

// swap the bytes into a temporary buffer
returnFloat[0] = floatToConvert[3];
returnFloat[1] = floatToConvert[2];
returnFloat[2] = floatToConvert[1];
returnFloat[3] = floatToConvert[0];

return retVal;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T23:11:00.460

不能保证值的二进制 (!) 格式在不同的机器上是相同的。其他`this->`价值从何而来？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T00:34:28.110

这是一个翻转任何变量字节顺序的好功能，可以很容易地用来改变字节顺序。

```
void byteFlip(void* original, size_t numberOfBytes)
{
    char* reversed = (char*) malloc(numberOfBytes);
    for (int i = 0; i < numberOfBytes; i++)
    {
        reversed[i] = ((char*)original)[numberOfBytes - i - 1];
    }
    memcpy(original, reversed, numberOfBytes);
    free(reversed);
} 
```

这将翻转“原始”参数中使用的变量的字节顺序。例子：

```
short a = 512;
//AAAAAAAA BBBBBBBB - 00000010 00000000
cout << a << endl; //outputs 512
byteFlip(&a, sizeof(short)); //flip byte order of 'a'
//BBBBBBBB AAAAAAAA - 00000000 00000010
cout << a << endl; //outputs 2 
```

说明：此函数接受一个指向任何类型变量的指针，以及该变量的字节大小。由于我们正在反转字节顺序，并且 1 个字符 = 1 个字节，因此我们可以像反转字符串一样对待它。我们创建一个与变量大小相同的新字符串来保存反转的数据。现在我们使用 for 循环将每个字节作为 char 以相反的顺序复制到反转字符数组变量中。循环完成后，我们可以将反转字符串的内存复制到原始指针中。最后，我们释放了反向字符串变量的内存，因为它已被复制到原始指针中，因此不再需要。

# python - 将几个单独的字典变成 PYTHON 中的字典列表

> ID：15818642
> 
> 赞同：0
> 
> 时间：2013-04-04T18:13:18.670
> 
> 标签：python, list, dictionary

我编写了一个代码以字典的形式返回信息，如下所示：

```
{'Mean Temp': '-0.1', 'Total Rain': '45', 'Month': '12', 'Year': '2003', 'Total Snow': '19.2', 'Max Temp': '-10.8', 'Min Temp': '9'}

{'Mean Temp': '-5.9', 'Total Rain': '34.3', 'Month': '1', 'Year': '1974', 'Total Snow': '35.6', 'Max Temp': '-20', 'Min Temp': '8.9'}

{'Mean Temp': '22.4', 'Total Rain': '20.8', 'Month': '8', 'Year': '2007', 'Total Snow': '0', 'Max Temp': '9.7', 'Min Temp': '34.8'}

{'Mean Temp': '21.7', 'Total Rain': '87.7', 'Month': '7', 'Year': '1993', 'Total Snow': '0', 'Max Temp': '11', 'Min Temp': '32.5'}

{'Mean Temp': '15.2', 'Total Rain': '112.5', 'Month': '6', 'Year': '1982', 'Total Snow': '0', 'Max Temp': '4', 'Min Temp': '25.4'} 
```

我需要知道如何将这些单独的字典变成一个单独的列表，用逗号分隔它们。到目前为止我的代码：

```
 listData = weatherData.split("\n")
    i = 0
    for listData[i] in listData :
        newList = listData[i].split(",")
        i = i + 1
        newDict = dict({'Year': newList[0], 'Month': newList[1], 'Mean Temp': 
                        newList[2], 'Min Temp':newList[3], 'Max Temp':newList[4], 
                        'Total Rain': newList[5], 'Total Snow': newList[6]})
        temp = []
        dictList = []
        i = 0
        for i in newDict :
            temp = [i]
            i = i + 1
            dictList = dictList.append(temp)
            print(dictList) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:17:15.320

你快到了；您需要移出`dictList = []` *外*循环`for`，并且不应将结果分配给`dictlist.append`to `dictlist`，因为这会将变量设置为`None`.

您确实使您的代码过于复杂，但可以将其简化为：

```
dictList = []

for entry in weatherData.splitlines():
    newList = entry.split(",")
    newDict = {'Year': newList[0], 'Month': newList[1], 'Mean Temp': 
                    newList[2], 'Min Temp':newList[3], 'Max Temp':newList[4], 
                    'Total Rain': newList[5], 'Total Snow': newList[6]}
    dictList.append(newDict) 
```

甚至：

```
dictList = []
fields = ('Year', 'Month', 'Mean Temp', 'Min Temp', 'Max Temp', 'Total Rain', 'Total Snow')

for entry in weatherData.splitlines():
    newList = entry.split(",")
    newDict = dict(zip(fields, newList))
    dictList.append(newDict) 
```

我怀疑您的输入文件是 CSV 文件，在这种情况下，您可能希望使用该`csv`模块：

```
import csv

fields = ('Year', 'Month', 'Mean Temp', 'Min Temp', 'Max Temp', 'Total Rain', 'Total Snow')

with open(yourweatherdatafile, 'rb') as weather:
    reader = csv.DictReader(weather, fields=fields)
    dictList = list(reader) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:15:23.530

`ast.literal_eval`是你的朋友：

```
weatherData = """
{'Mean Temp': '-0.1', 'Total Rain': '45', 'Month': '12', 'Year': '2003', 'Total Snow': '19.2', 'Max Temp': '-10.8', 'Min Temp': '9'}

{'Mean Temp': '-5.9', 'Total Rain': '34.3', 'Month': '1', 'Year': '1974', 'Total Snow': '35.6', 'Max Temp': '-20', 'Min Temp': '8.9'}

{'Mean Temp': '22.4', 'Total Rain': '20.8', 'Month': '8', 'Year': '2007', 'Total Snow': '0', 'Max Temp': '9.7', 'Min Temp': '34.8'}

{'Mean Temp': '21.7', 'Total Rain': '87.7', 'Month': '7', 'Year': '1993', 'Total Snow': '0', 'Max Temp': '11', 'Min Temp': '32.5'}

{'Mean Temp': '15.2', 'Total Rain': '112.5', 'Month': '6', 'Year': '1982', 'Total Snow': '0', 'Max Temp': '4', 'Min Temp': '25.4'}

 """
import ast
list_data = weatherData.splitlines()
list_of_dict = [ast.literal_eval(line) for line in list_data if line.strip()] 
```

如果您更喜欢，您也可以使用`json.loads(line)`而不是。`ast.literal_eval(line)`

# json - 信号器在 ie10 中停止工作

> ID：15818648
> 
> 赞同：4
> 
> 时间：2013-04-04T18:13:45.950
> 
> 标签：json, signalr

我正在尝试学习 signalR，并且我进行了一些测试。它适用于 IE 9 和 chrome，但是当我尝试在 ie10 上运行它时，我得到了

> 如果您需要支持没有客户端的客户端，请确保在 SignalR.js 文件之前引用 json2.js

在搜索此错误时，它指向 ie 8 之前的浏览器。希望有人能帮助我指出正确的方向。我尝试在信号器之前添加一个 json2.js 文件，但仍然出现错误。

谢谢香农

这是所要求的完整错误。

> SCRIPT5022：SignalR：未找到 JSON 解析器。如果您需要支持没有原生 JSON 解析支持的客户端，例如 IE<8，请确保在 SignalR.js 文件之前引用 json2.js。

你的建议似乎解决了我的问题。谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-04T18:55:53.653

你应该尝试添加

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
```

到您的 HTML 页面以强制 IE 符合标准。另外，您可以发布完整的错误。

# android - 安卓; 切换标签时片段重叠

> ID：15818653
> 
> 赞同：7
> 
> 时间：2013-04-04T18:14:24.060
> 
> 标签：android, tabs, android-fragments

首先，感谢大家对这个伟大的社区。

我正在尝试遵循支持演示示例代码来实现选项卡式片段界面。

顶级，我正在尝试实现两个选项卡，将单个片段与每个选项卡相关联，并在相应地选择每个选项卡时显示片段。

目前，我有两个问题（但我确信它们是相关的......）

1)**每个选项卡的片段相互重叠。**这可能与不正确的片段附加/分离有关。

2）**第三个神秘片段正在某个地方创建，并且与其他片段重叠**

* * *

## 在模拟器（和物理设备）上，您可以看到选择任一选项卡时有两个片段重叠

**选择 tab1 时，**片段 1 和未知片段重叠。

**选择TAB2时，**片段1和片段2是重叠的。

* * *

**截图链接（没有足够的声望上传照片......）**

（tab1 重叠）[http://s8.postimg.org/kv81yz745/tab1_overlapping.png](http://s8.postimg.org/kv81yz745/tab1_overlapping.png)

（tab2 重叠）[http://s8.postimg.org/3tf7wvs91/tab2_overlapping.png](http://s8.postimg.org/3tf7wvs91/tab2_overlapping.png)

* * *

**在这里，为了演示/清晰的目的，我将每个片段中的文本分开。**

**这些屏幕截图的链接在我的评论/回复中。（没有足够的声誉上传超过 2 个链接......）**

## 活动布局（fragment_tabs.xml）

```
<TabHost
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent">

<LinearLayout
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TabWidget
        android:id="@android:id/tabs"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"/>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0"/>

    <FrameLayout
        android:id="@+id/realtabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>

</LinearLayout>
</TabHost> 
```

## 源代码

```
public class TabbedInfoHome extends SherlockFragmentActivity {

TabHost mTabHost;
TabManager mTabManager;

static String tag1name = "simple1";
static String tag2name = "simple2";

static String tab1string = "You are looking at fragment 1";
static String tab2string = "You are looking at fragment 2";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_tabs); 

    if (savedInstanceState == null) {
        // Do first time initialization -- add initial fragment.
        Fragment frag1 = CountingFragment.newInstance(tab1string);
        Fragment frag2 = CountingFragment.newInstance(tab2string);
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

        ft.add(R.id.realtabcontent, frag1, tag1name);
        ft.add(R.id.realtabcontent, frag2, tag2name);

        ft.commit();
    } 
    else {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
    }    

    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();

    mTabManager = new TabManager(this, mTabHost, R.id.realtabcontent);

    mTabManager.addTab(mTabHost.newTabSpec(tag1name)
                .setIndicator(tag1name),
                TabbedInfoHome.CountingFragment.class,
                null);

    mTabManager.addTab(mTabHost.newTabSpec(tag2name)
                .setIndicator(tag2name),
                TabbedInfoHome.CountingFragment.class, 
                null);
}   

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("tab", mTabHost.getCurrentTabTag());
}

public static class CountingFragment extends SherlockFragment {
    String displayString;
    String FRAGMENT_TAG = this.getClass().getSimpleName();

    /**
     * Create a new instance of CountingFragment, providing "num"
     * as an argument.
     */
    static CountingFragment newInstance(String toDisplay) {
        CountingFragment f = new CountingFragment();

        Bundle args = new Bundle();
        args.putString("string", toDisplay);
        f.setArguments(args);
        return f;
    }

     /* When creating, retrieve this instance's number from its arguments. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);         
        displayString = getArguments() != null ? getArguments().getString("string") : "no string was passed in!";
    }

    /* The Fragment's UI is just a simple text view showing its
     * instance number. */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.hello_world, container, false);
        View tv = v.findViewById(R.id.text);

        boolean separateStrings = false;

        /* the overlapping is hard to decipher, so
         *  lets illustrate how both fragments are appearing */
        if(separateStrings) {

            String temp;

            /* b/c I only created TWO instances of the CountingFragments object, 
             *  there should only be TWO "displayStrings" to consider...
             */
            if( (displayString.compareTo(tab1string) == 0) ) {
                /* user clicked tab 1 */
                temp = "\n\n\n\n" + displayString;
            }
            else if( (displayString.compareTo(tab2string) == 0) ) {
                /* user clicked tab2 */
                temp = "\n\n\n\n\n\n\n" + displayString;
            }
            else {
                /* unknown CountingFragment instance */
                temp = "What am I doing here..??? ";
            }

            ((TextView)tv).setText(temp);

        }
        else {
            /* normal case of the fragment being shown; (but they overlap!) */
            ((TextView)tv).setText(displayString);
        }

        return v;
    }
}

/**
 * This is a helper class that implements a generic mechanism for
 * associating fragments with the tabs in a tab host.  It relies on a
 * trick.  Normally a tab host has a simple API for supplying a View or
 * Intent that each tab will show.  This is not sufficient for switching
 * between fragments.  So instead we make the content part of the tab host
 * 0dp high (it is not shown) and the TabManager supplies its own dummy
 * view to show as the tab content.  It listens to changes in tabs, and takes
 * care of switch to the correct fragment shown in a separate content area
 * whenever the selected tab changes.
 */
public static class TabManager implements TabHost.OnTabChangeListener {
    private final FragmentActivity mActivity;
    private final TabHost mTabHost;
    private final int mContainerId;
    private final HashMap<String, TabInfo> mTabs = new HashMap<String, TabInfo>();
    TabInfo mLastTab;

    static final class TabInfo {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;
        private Fragment fragment;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        @Override
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabManager(FragmentActivity activity, TabHost tabHost, int containerId) {
        mActivity = activity;
        mTabHost = tabHost;
        mContainerId = containerId;
        mTabHost.setOnTabChangedListener(this);
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {

        tabSpec.setContent(new DummyTabFactory(mActivity));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state.  If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        info.fragment = mActivity.getSupportFragmentManager().findFragmentByTag(tag);

        if (info.fragment != null ) {  // && !info.fragment.isDetached()) {
            Log.d("addingTab", "we already have a fragment for this tab. tabInfo.fragment.id: " + info.fragment.getId());
            FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
            ft.detach(info.fragment);
            ft.commit();
            mActivity.getSupportFragmentManager().executePendingTransactions();
        }

        // associate the tabSpec tag with a particular TabInfo object
        mTabs.put(tag, info);
        mTabHost.addTab(tabSpec);
    }

    @Override
    public void onTabChanged(String tabId) {
        TabInfo newTab = mTabs.get(tabId);

        if (mLastTab != newTab) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }

            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(mActivity,
                            newTab.clss.getName(), newTab.args);

                    ft.add(mContainerId, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            mActivity.getSupportFragmentManager().executePendingTransactions();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T14:26:53.653

经过几天的实验，我让它正常工作。

在`onCreate`我的`TabbedInfoHome`类的方法中，当第一次（`savedInstanceState == null`）创建片段的新实例时，我强制执行 FragmentTransaction 中的待处理事务，使用`this.getSupportFragmentManager().executePendingTransactions()`

此解释基于以下文档：http: [//developer.android.com/reference/android/app/FragmentManager.html#executePendingTransactions()](http://developer.android.com/reference/android/app/FragmentManager.html#executePendingTransactions())

> *在 a`FragmentTransaction`提交后`FragmentTransaction.commit()`，它被安排在进程的主线程上**异步执行。**如果您想立即执行任何此类挂起的操作，可以调用此函数。*

我仍然有一个悬而未决的问题是，缺乏立即挂起的交易执行如何体现在原始问题中的行为中。

**换句话说... *LACK* of如何`this.getSupportFragmentManager().executePendingTransactions()`解释重叠片段？**

* * *

## **编辑后的代码如下；一行加法**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

setContentView(R.layout.fragment_tabs); 

if (savedInstanceState == null) {
    // Do first time initialization -- add initial fragment.
    Fragment frag1 = CountingFragment.newInstance(tab1string);
    Fragment frag2 = CountingFragment.newInstance(tab2string);
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

    ft.add(R.id.realtabcontent, frag1, tag1name);
    ft.add(R.id.realtabcontent, frag2, tag2name);

    ft.commit();
    this.getSupportFragmentManager().executePendingTransactions();      // <----- This is the key 
} 
else {
    mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
}    

mTabHost = (TabHost)findViewById(android.R.id.tabhost);
mTabHost.setup();

mTabManager = new TabManager(this, mTabHost, R.id.realtabcontent);

mTabManager.addTab(mTabHost.newTabSpec(tag1name)
            .setIndicator(tag1name),
            TabbedInfoHome.CountingFragment.class,
            null);

mTabManager.addTab(mTabHost.newTabSpec(tag2name)
            .setIndicator(tag2name),
            TabbedInfoHome.CountingFragment.class, 
            null);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T07:49:11.543

我在 Nexus 5 上也遇到了这个问题。

我认为我们有比使用这种方式删除解决方案更好的解决方案。

在`all your xml files`，应该为它定义背景颜色，它会解决问题：

将此添加`android:background="@android:color/black"`到您定义的 View 标记中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T17:27:12.227

我正在尝试做同样的事情，今天早上遇到了同样的问题。我使用从另一个类似问题中获得的信息来解决它们。

就我而言，我没有使用 SherlockActionBar，但该解决方案必须对您有用。

在您检查是否有为我使用的选项卡膨胀的片段的部分：

```
 // in order to avoid fragment 
     Fragment prevFragment;
        FragmentManager fm = mActivity.getFragmentManager();
        prevFragment = fm.findFragmentByTag(mTag); 
        if (prevFragment != null) { 
            mFragment = prevFragment; 
        } // \previous Fragment management 
```

我想如果你对 SherlockActionBar 命令（因为我在其中阅读了他们与 SherlockActionBar 一起使用的信息）充分利用它，这必须对你有用。

希望对你有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-20T04:46:40.613

已经给出了许多解决方案，但由于一个愚蠢的错误，我无法解决问题。问题是，在默认情况下，在新 SDK 中，Activity 扩展为“ActionbarActivity”，其中片段被创建但它们重叠。要解决它，请将您的活动扩展到“FragmentActivity”

# reporting-services - “对聚合函数无效的范围参数”是什么意思？

> ID：15818657
> 
> 赞同：3
> 
> 时间：2013-04-04T18:14:40.883
> 
> 标签：reporting-services

表达方式

`=FormatNumber(Avg(CInt(Code.FirstSplit(Fields!AvgLOSC4.Value)), 0), 0)`

当我尝试在 SSRS 管理器中更新我的报告时，会导致以下错误消息。

“文本框‘textbox16’的值表达式具有对聚合函数无效的范围参数。范围参数必须设置为字符串常量，该常量等于包含组的名称、包含组的名称数据区域，或数据集的名称。（rsInvalidAggregateScope）。

如何解决问题以消除此消息？我搜索了该消息，但由于某种原因，搜索结果对我来说没有意义。

更新 #1 上面的表达式是这样的

```
=FormatNumber(Avg(CInt(Fields!AvgLOSC4.Value.Split("|"c)(0))), 0) 
```

在我更改它以解决不同的问题之前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-24T17:01:26.010

**什么：**

聚合函数在指定范围内计算它们的值。因此，当您使用 Sum 函数时，这回答了您得到哪一组字段的总和的问题。范围可以是整个数据集，也可以是 Tablix 中的组之一。这就是为什么您可以`=Sum(Fields!Quantity.Value)`在表格的总计行以及可能存在的任何小计行中使用函数的原因。

聚合函数的第二个参数允许您显式指定您希望它在哪个作用域上运行。因此，在小计中，您可以使用它`=Sum(Fields!Quantity.Value, "DataSet1")`来检索总计，通常用于百分比计算之类的事情。如果不使用第二个参数，聚合函数将使用该单元格的默认范围。

有一篇 MSDN 文章详细概述了表达式范围：[https ://msdn.microsoft.com/en-us/library/dd255256.aspx#Anchor_1](https://msdn.microsoft.com/en-us/library/dd255256.aspx#Anchor_1)

当您使用第二个参数使聚合函数使用无效范围时，会出现错误消息“对聚合函数无效的范围参数”。SSRS 的引擎不知道要对哪一组字段进行操作，因此无法继续。

**为什么：**

这就是错误消息的含义。至于它为什么会出现在这里以及如何在这种特定情况下修复它，错开表达式并查看正在使用的参数可能会很有用：

```
=FormatNumber
(
    Avg
    (
        CInt(Code.FirstSplit(Fields!AvgLOSC4.Value))
!!      , 0
     )
    , 0
) 
```

此表达式使用 0 作为 Avg 聚合函数的第二个参数。0 不是有效范围，因此该函数会产生错误。解决这个问题很简单：删除此参数或将其替换为有效值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:26:43.497

这对我来说很好：

```
=FormatNumber(Avg(CInt(Code.FirstSplit(Fields!AvgLOSC4.Value))), 0, 0) 
```

甚至：

```
=FormatNumber(Avg(CInt(Code.FirstSplit(Fields!AvgLOSC4.Value))), 0) 
```

仅取决于您的格式要求是什么。

您还可以使用`Format`属性在文本框级别设置格式，而不是尝试使用表达式。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-08-23T08:11:25.400

分组“页面”的隐藏表达式具有对聚合函数无效的范围参数。范围参数必须设置为字符串常量，该常量等于包含组的名称、包含数据区域的名称或数据集的名称。

# jakarta-ee - EJB 中的声明式事务管理

> ID：15818660
> 
> 赞同：0
> 
> 时间：2013-04-04T18:14:55.613
> 
> 标签：jakarta-ee, transactions, ejb, cdi

我知道引用链接的问题不是这个伟大网站的用户最喜欢的问题，但我无法以不同的方式提出我的问题。我正在尝试深入研究 EJB 和 CDI 以及它们如何在真正的 Web 应用程序中正确使用。我已经阅读了在 JBoss 应用服务器上开发的这个[示例。](http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/guide/GreeterQuickstart/)接近尾声时，它创建了类`ManagedBeanUserDao`，然后创建了替代方案`EJBUserDao`，以使自己免于手动处理事务管理。不过，我无法理解他是如何做到这一点的，因为在 beans.xml 文件和替代类中都没有对事务的引用`EJBUserDao`。

我的一般问题是我们如何以典型的方式避免事务管理，以及是否有详细解释它的链接。我查看了 JavaEE 教程，但在示例中，它似乎并没有完全遵循教程所述的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:20:00.133

默认情况下，EJB 是事务性的。调用他们的任何方法会自动启动一个事务，该事务在方法返回后提交（或在运行时异常的情况下回滚）。

# batch-file - 从文本文件中读取并执行您找到的内容

> ID：15818666
> 
> 赞同：0
> 
> 时间：2013-04-04T18:15:08.147
> 
> 标签：batch-file, execute

我无法弄清楚如何做它在标题中所说的。我有一个文本文件 apple.txt，其中包含：

```
set apple=7 
```

和一个保存为批处理的文件

```
findstr /v "zzzzzzzzzzz" apple.txt 
```

当我运行批处理文件时，它显示“set apple = 7”，而不是实际将变量 apple 设置为 7。我假设在每行之前`findstr`添加一个`echo`，但我不知道。我用 CMD 和 findstr /? 但我无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:17:56.133

```
FOR /f "delims=" %%i IN (apple.txt) DO %%i 
```

应该这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:20:05.947

我不确定你在用 find 字符串做什么。但是，如果您有一个名为 out.txt 的文件，其代码如下：

```
dir 
```

并从命令行键入：

```
cmd < out.txt 
```

文件的内容通过管道传送到命令行处理器。

# c# - 24GB tar.gz 使用 sharpziplib 解压

> ID：15818667
> 
> 赞同：1
> 
> 时间：2013-04-04T18:15:08.297
> 
> 标签：c#, .net, sharpziplib

我有一个提取 tar.gz 的当前进程，但当前进程无法处理超过 4gb ......我想知道我做错了什么导致我使用Sharpzip库出错它说参数长度不能少那个零....所有被注释掉的代码都是当前进程

请查看下面的代码并给我指导

```
public static void ExtractTarGZFiles(string strExtractionPath, string strInboundFolder)
    {
        List<string> files = new List<string>();
        string strFile = Path.GetFullPath(ConfigurationManager.AppSettings["InboundFolderPath"].ToString());
        if (mblnRunForFile)
        {
            System.IO.FileInfo ioInfo = new FileInfo(mstrFilename);
            strFile = ioInfo.DirectoryName;
            files.Add(ioInfo.Name);

        }
        else
        {
            files = System.IO.Directory.GetFiles(ConfigurationManager.AppSettings["InboundFolderPath"], "*.gz").ToList();
        }

        foreach (string file in files)
        {
            try
            {
            //string stFilePath = file;
            //string testingthisdamnthing = strInboundFolder + mstrFilename;
            //FileStream xstream = new FileStream(stFilePath, FileMode.Open, FileAccess.Read, FileShare.None);
            //xstream.Close();
            //string strTemp = ConfigurationManager.AppSettings["ExtractTempFolderPath"];
            //TarArchive objTA = TarArchive.CreateInputTarArchive(new GZipStream(new FileStream(stFilePath, FileMode.Open, FileAccess.Read), CompressionMode.Decompress));
            //objTA.ProgressMessageEvent += ExtractTarNotifier;
             //objTA.ExtractContents(strTemp);

            //DirectoryInfo dirtemp = new DirectoryInfo(strTemp);
            DirectoryInfo dirExtract = new DirectoryInfo(strExtractionPath);

            Stream inStream = File.OpenRead(stFilePath);
            Stream gzipStream = new GZipInputStream(inStream);

            TarArchive tarArchive = TarArchive.CreateInputTarArchive(gzipStream);
            tarArchive.ExtractContents(ConfigurationManager.AppSettings["ExtractFolderPath"]);
            tarArchive.Close();

            gzipStream.Close();
            inStream.Close();
            //while (IsFileExistsinTempPath(dirtemp, dirExtract))
            //{
            //    //Do nothing
            //}
            //CopyFilesFromTempToExtract(dirtemp, dirExtract);
            //objTA.Close();
            //Logger.Write(" Tar.Gz files Decompressed Successfully");
            MonthLog.Log("Tar.Gz files Decompressed Successfully", "Month", 3, 2, System.Diagnostics.TraceEventType.Information, mstrFilename);
            System.IO.File.Copy(stFilePath, ConfigurationManager.AppSettings["ArchiveFolderPath"] + new FileInfo(stFilePath).Name, true);
            File.Delete(stFilePath);
            //Logger.Write(" Tar.GZ files Moved to Archive Folder");
            MonthlyGreenPackageLog.Log("Tar.Gz files Moved to Archive Folder", "Month", 3, 2, System.Diagnostics.TraceEventType.Information, mstrFilename);

            }
                catch (System.IO.IOException ex)
                {
                    //go to next file
                    //Logger.Write("Unable to open compressed file");
                    MonthLog.Log("Unable to open compressed file", "Month", 1, 1, System.Diagnostics.TraceEventType.Error, mstrFilename);
                    Email objEmail1 = new Email();
                    objEmail1.IsBodyHTML = true;
                    objEmail1.FromAddress = ConfigurationManager.AppSettings["FromAddress"];
                    string[] strToAddresses = ConfigurationManager.AppSettings["ExceptionAddress"].Split(',');
                    objEmail1.SetToAddress(strToAddresses);
                    objEmail1.Subject = "The Month  File  " + mstrFilename + " Failed to Decompress ";
                    objEmail1.Body = " Exception " + ex.Message + " occured while decompressing file";
                    //objEmail.AddAttachment("Exception occured while processingfiles");
                    objEmail1.SendEmail();
                    //Logger.Write("Sent a mail to all the Address");
                    throw ex;
                }
                catch (Exception ex)
                {
                    //Logger.Write("Exception " + ex.Message + " occured while decompressing file");
                    MonthlyGreenPackageLog.Log("Exception " + ex.Message + " occured while decompressing file", "Monthl", 1, 1, System.Diagnostics.TraceEventType.Error, mstrFilename);
                    Email objEmail = new Email();
                    objEmail.IsBodyHTML = true;
                    objEmail.FromAddress = ConfigurationManager.AppSettings["FromAddress"];
                    string[] strToAddresses = ConfigurationManager.AppSettings["ExceptionAddress"].Split(',');
                    objEmail.SetToAddress(strToAddresses);
                    objEmail.Subject = "The tar.gz Month File  " + mstrFilename + " Failed to Decompress ";
                    objEmail.Body = " Exception " + ex.Message + " occured while decompressing file";
                    //objEmail.AddAttachment("Exception occured while processing ADX files");
                    objEmail.SendEmail();
                    //Logger.Write("Sent a mail to all the Address");
                    throw ex;
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:18:09.540

如果您的应用程序是 x86，那么每个进程只能有 4GB 的内存。将其编译为 x64 以使用更多资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:28:29.073

这来自您正在使用的 ZipLibrary。您需要将应用程序编译为 x64 程序并在 64 位环境中运行。

```
 // To permit the zip to be unpacked by built-in extractor in WinXP and Server2003, WinZip 8, Java, and other older code,
    // you need to do one of the following: Specify UseZip64.Off, or set the Size.
    // If the file may be bigger than 4GB, or you do not need WinXP built-in compatibility, you do not need either,
    // but the zip will be in Zip64 format which not all utilities can understand. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:36:58.533

我为您提供了三种潜在的解决方案，但我无法告诉您其中任何一种是否真的有效。

1.  使用[Unzip from Stream](https://github.com/icsharpcode/SharpZipLib/wiki/Zip-Samples#wiki-anchorUnpackZIS)示例将其流式传输到内存中，因此您永远不需要加载整个内容（这就是它现在失败的原因）。
2.  切换到使用[DotNetZip](http://dotnetzip.codeplex.com/)，它可能有更多选项可以在 x86 机器上处理大文件。
3.  找到一个可以编写脚本或可以监视目录的常规解压缩应用程序，并在它到达您的应用程序之前将其解压缩。

# php - 上传文件时出错

> ID：15818668
> 
> 赞同：0
> 
> 时间：2013-04-04T18:15:08.310
> 
> 标签：php, jquery, html, onchange, image-uploading

`ERROR: Please browse for a file before clicking the upload button.`选择要上传的图像文件时，我不断收到。我试图实现上传文件 onchange 而不必单击提交以获得更用户友好的体验。

HTML

```
 <div id="profilephoto" class="profilephoto" data-coupling="#content2"><img src="<?php echo $avatar ?>"></div>
    <div id="content2" style="display: none;" class="uploadbutton" data-coupling="#content2">
        <form id="imguploadin" method="POST" action="image_upload_script.php">
            <label class="cabinet"> <i class="icon-upload-alt"></i> Choose Photo
                <input type="file" name="uploaded_file" class="file" onchange="handleFiles(this.files)"/>
            </label>
        </form>
    </div> 
```

jQuery/JavaScript

```
function handleFiles(files) {
    for (var i = 0; i < files.length; i++) {
        var file = files[i];
        var imageType = /image.*/;

        if (!file.type.match(imageType)) {
            continue;
        }

        var img = document.createElement("img");
        img.classList.add("newphoto");
        img.file = file;
        profilephoto.appendChild(img);

        var reader = new FileReader();
        reader.onload = (function(aImg) { return function(e) { aImg.src = e.target.result; }; })(img);
        reader.readAsDataURL(file);
        var eventt = jQuery.Event("submit");

        $("#imguploadin").trigger(eventt);
    }
} 
```

PHP (image_upload_script.php)

```
<?php
session_start();
// Access the $_FILES global variable for this specific file being uploaded
// and create local PHP variables from the $_FILES array of information
$username = $_SESSION["username"];
$fileName = $_FILES["uploaded_file"]["name"]; // The file name
$fileTmpLoc = $_FILES["uploaded_file"]["tmp_name"]; // File in the PHP tmp folder
$fileType = $_FILES["uploaded_file"]["type"]; // The type of file it is
$fileSize = $_FILES["uploaded_file"]["size"]; // File size in bytes
$fileErrorMsg = $_FILES["uploaded_file"]["error"]; // 0 for false... and 1 for true
$kaboom = explode(".", $fileName); // Split file name into an array using the dot
$fileExt = end($kaboom); // Now target the last array element to get the file extension
// START PHP Image Upload Error Handling --------------------------------------------------
if (!$fileTmpLoc) { // if file not chosen
    echo "ERROR: Please browse for a file before clicking the upload button.";
    exit();
} else if ($fileSize > 1242880) { // if file size is larger than 5 Megabytes
    echo "ERROR: Your file was larger than 5 Megabytes in size.";
    unlink($fileTmpLoc); // Remove the uploaded file from the PHP temp folder
    exit();
} else if (!preg_match("/.(gif|jpg|png)$/i", $fileName)) {
    // This condition is only if you wish to allow uploading of specific file types
    echo "ERROR: Your image was not .gif, .jpg, or .png.";
    unlink($fileTmpLoc); // Remove the uploaded file from the PHP temp folder
    exit();
} else if ($fileErrorMsg == 1) { // if file upload error key is equal to 1
    echo "ERROR: An error occured while processing the file. Try again.";
    exit();
}
// END PHP Image Upload Error Handling ----------------------------------------------------
// Place it into your "uploads" folder mow using the move_uploaded_file() function
$moveResult = move_uploaded_file($fileTmpLoc, "images/users/$username.$fileExt");
// Check to make sure the move result is true before continuing
if (!$moveResult) {
    echo "ERROR: File not uploaded. Try again.";
    unlink($fileTmpLoc); // Remove the uploaded file from the PHP temp folder
    exit();
}
// ---------- Include Adams Universal Image Resizing Function --------
include_once("ak_php_img_lib_1.0.php");
$target_file = "images/users/$username.$fileExt";
$resized_file = "images/users/resized_$username.$fileExt";
$wmax = 200;
$hmax = 150;
ak_img_resize($target_file, $resized_file, $wmax, $hmax, $fileExt);
$thumbnail = "images/users/thumb_$username.$fileExt";
$wthumb = 150;
$hthumb = 150;
ak_img_thumb($target_file, $thumbnail, $wthumb, $hthumb, $fileExt);
// ----------- Write Image File path to the server ---------------------------------
$sql_user = "myuser";
$sql_pass = "mypassword";
$sql_ip = "localhost";
$sql_DB = "mydb";
if ($moveResult != true)
    echo("couldnt write file path to database due to unsuccesfull upload");
    else {
    $mysqli = new mysqli($sql_ip, $sql_user, $sql_pass, $sql_DB);
    if ($stmt = $mysqli->prepare("UPDATE users SET avatar=? WHERE username=?")) {
        $user = $_SESSION['username'];
        $avatar = $resized_file;
        $stmt->bind_param('ss', $avatar, $user);
        $stmt->execute();
        $stmt->close();
        //header('location: profile.html');
        return true;
    }
    $mysqli->close();
    }

// ----------- End Adams Universal Image Resizing Function -----------
// Display things to the page so you can see what is happening for testing purposes
echo "The file named <strong>$username.$fileExt</strong> uploaded successfuly.<br /><br />";
echo "It is <strong>$fileSize</strong> bytes in size.<br /><br />";
echo "It is an <strong>$fileType</strong> type of file.<br /><br />";
echo "The file extension is <strong>$fileExt</strong><br /><br />";
echo "The Error Message output for this upload is: $fileErrorMsg";
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:20:09.237

您的表单缺少上传文件所需的`enctype="multipart/form-data"`属性。

# javascript - 如何通过其中一个属性找到 XML 元素，并检索其另一个属性的值？

> ID：15818670
> 
> 赞同：0
> 
> 时间：2013-04-04T18:15:21.143
> 
> 标签：javascript, jquery, xml-parsing

例如，我在 XML 文件中有以下内容：

```
<decisionPoint fileName="5">
<choice label="ARIN, RIPE, APNIC" goTo="5aa"/>
<choice label="Whois.org, Network Solutions" goTo="5aa"/>
<choice label="Google, Bing, Yahoo" goTo="5c"/>
</decisionPoint> 
```

我有 value `fileName=5`，我有`label`value `Whois.org, Network Solutions`，我需要检索具有该标签值的`goTo`on 的值。`<choice>`我怎样才能用 jquery 来做这件事？

我需要制作整个 xml 文件的数组吗？如果是这样，那之后呢？我了解通过名称查找元素，但我不确定要找到具有 X 属性的元素，然后检索 Y 属性的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:18:03.430

jQuery 允许您发出查询以在已解析的 XML 片段中进行搜索：

```
var xml = '<decisionPoint fileName="5">\
<choice label="ARIN, RIPE, APNIC" goTo="5aa"/>\
<choice label="Whois.org, Network Solutions" goTo="5aa"/>\
<choice label="Google, Bing, Yahoo" goTo="5c"/>\
</decisionPoint>';
var $xml = $(xml); 
```

然后

```
var gt = $xml.find('choice[label="Whois.org, Network Solutions"]').attr('goTo'); 
```

找到具有确切属性值的元素并检索 的值`goTo`。

或者通过部分属性找到：

```
var gt = $xml.find('choice[label*="Whois.org"]').attr('goTo'); 
```

[演示](http://jsbin.com/obecid/1/edit)（打开控制台）

# php - PHP&MySQL 更新表不起作用

> ID：15818674
> 
> 赞同：0
> 
> 时间：2013-04-04T18:15:36.703
> 
> 标签：php, mysql, database

所以我试图做一个简单的 MySQL 数据库/表更新，但有些东西不起作用，我不知道是什么。我会放代码：
morepoints.php（处理加分）：

```
 <?php
if(!isset($_COOKIE["name"]))
{
    echo "<a href='index.php'>Username/points cookie not existent! Please login!</a>";
}
$con=mysql_connect("sqlserverip","name","password");
if(!$con)
{
    echo "Error while connecting to the MySQL server: " . mysql_error();
}
mysql_select_db("gendb1",$con);
$name=$_COOKIE["name"];
$pts=$_COOKIE["points"];
mysql_query("UPDATE  \"users\"  SET  \"pts\" =\"" . $pts . "\" WHERE name=\"" . $name . "\"");
echo "<div id='wrapper'>Updated database...checking if values match...</div>";
$result=mysql_query("SELECT * FROM users");
 while($row=mysql_fetch_array($result)
 {
            if($row["name"]==$name)
            {
                if($row["pts"]==$pts)
                {
                    echo "<a href=\"index.php\">Points awarded! Please login again.</a>";
                    mysql_close($con);
                }
            }
  } 
    ?> 
```

如果你想要设置 cookie 的登录页面，这里是

```
 <?php
$con=mysql_connect("mysqlserverip","name","password");
if(!$con)
{
    echo "Connection to the MySQL server failed successfuly! " . mysql_error();
}
mysql_select_db("gendb1",$con);

$result=mysql_query("SELECT * FROM users");

//Getting Login Form Data
$name=$_POST['u'];
$pass=$_POST['p']; 
$points;
//$valid=1;
if($name=="" or $pass=="")
{
    echo "<div id=\"wrapper\">Name/pass cannot be blank. <a href=\"javascript:history.go(-1)\">Try again</a></div>";
}
while($row=mysql_fetch_array($result))
{
    if($row['name']==$name and $row['pass']==$pass)
    {
        setcookie("name",$row['name'],time()+300);
        setcookie("points",$row['pts'],time()+300);
        echo "<div id=\"wrapper\">Login successful! <a href=\"user.php\">Go to your page</a></div>";
        goto done;
        break;
    }
}
echo "<script>history.go(-1);</script>";
done:
    ?> 
```

已解决：我得到的是 HTTP 错误 500.0 - 带有错误代码的内部服务器错误：0x00000000 我通常会在由于我的脚本中的一些错误而无法解释（或其他）PHP 代码时得到它：数据库/表没有更新（当我运行脚本时没有抛出错误，但数据库似乎没有更新）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:28:54.407

*   使用反引号（`）而不是引号（“）来指定数据库/表/列名称。我之前在这个线程中看到过这个答案，但它被删除了。虽然它是一个正确的答案。

*   还要转义您的输入以防止 sql 注入。并检查查询是否运行良好。

*   最后检查查询是否执行正常。

所以改变

```
mysql_query("UPDATE  \"users\"  SET  \"pts\" =\"" . $pts . "\" WHERE name=\"" . $name . "\""); 
```

进入

```
mysql_query("UPDATE  `users`  SET  `pts` =\"" . mysql_real_escape_string($pts) . "\" WHERE `name`=\"" . mysql_real_escape_string($name) . "\"")
    or die ("Update failed: " . mysql_error() ); 
```

如果查询失败，最后一部分将输出错误消息。（请注意，我删除了第一行末尾的分号 (;)，因此“or die”是同一个句子的一部分。

*   **编辑** 你真的在提高 $pts / $points 吗？看来你根本不增加它。您所说的只是`$pts=$_COOKIE["points"];`在一个脚本中，而只是`$points;`在另一个脚本中。不应该至少`$pts++;`在第一个脚本中的某个地方吗？？？（设置 $pts 之后和运行更新查询之前。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:31:00.027

在第一个脚本中，您缺少 ")" 结束**while**语句：

$result=mysql_query("SELECT * FROM users"));
而($row=mysql_fetch_array($result){

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:21:33.350

发生了什么错误/问题？在处理 MYSQL 更新时，尝试回显 MYSQL 调用总是一个好主意，例如：

```
$test_call = "UPDATE  \"users\"  SET  \"pts\" =\"" . $pts . "\" WHERE name=\"" . $name . "\"");

echo $test_call; 
```

这样您就可以准确地看到发送到 MYSQL 的内容，并可以在 phpMyAdmin 或 MYSQL 查询浏览器之类的工具中试用结果。将有助于缩小问题范围。

此外，您可以使用单引号使相同的更新更容易一些，如下所示：

```
$pts = mysql_real_escape_string($pts);
$name = mysql_real_escape_string($name);
"UPDATE `users`  SET  `pts` = '$pts' WHERE `name` = '$name'" 
```

# objective-c - 不兼容的指针类型警告（在 Objective-C 中）

> ID：15818675
> 
> 赞同：3
> 
> 时间：2013-04-04T18:15:42.150
> 
> 标签：objective-c, types, variable-assignment, compiler-warnings

我在 iOS 开发中仍然有点绿色，并且不断收到我不确定的警告。

我在表格视图中使用自定义单元格，并将其类设置为 UITableViewCell 的子类，称为 SiteCell。在我的“didSelectRowAtIndexPath”方法中，当我将所选单元格声明为 SiteCell 类型时，我收到以下警告：

> 使用 UITableViewCell 类型的表达式初始化 SiteCell __strong 的不兼容指针类型

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    SiteCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    NSString *rowIdentity = [NSString stringWithFormat:@"%d", indexPath.row];
    [selectedRows setObject:[cell.siteTitleLabel text] forKey:rowIdentity];

    if(cell.accessoryType == UITableViewCellAccessoryCheckmark){
        cell.accessoryType = UITableViewCellAccessoryNone;
    }else{
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
} 
```

任何人都可以阐明如何摆脱这个警告吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-04T18:21:15.237

假设 cellForRowAtIndexPath 编码正确，并且已知总是返回 a `SiteCell`，您只需转换为`SiteCell*`：

```
SiteCell *cell = (SiteCell*)[tableView cellForRowAtIndexPath:indexPath]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T18:16:45.380

您的代码应该是这样，因为您必须将其`UITableViewCell`转换为您的子类`SiteCell`

```
SiteCell *cell = (SiteCell *)[tableView cellForRowAtIndexPath:indexPath]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T15:54:36.493

正确的方法。你需要`NSIndexPath`

```
SiteCell *cell = (SiteCell *) [self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:row inSection:section]]; 
```

# wordpress - WordPress 翻译

> ID：15818676
> 
> 赞同：0
> 
> 时间：2013-04-04T18:15:42.610
> 
> 标签：wordpress

我们经常看到这样的代码：

```
 __( 'Daily Archives: %s', 'twentyeleven' ), 
```

第一个参数是要翻译的字符串，第二个是使用的域。
这样做的目的是什么？为什么需要翻译？翻译的结果是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:19:29.637

这个答案真的应该/可以是评论；您需要的有关 WordPress 翻译的所有信息都可以在[此处](http://codex.wordpress.org/Translating_WordPress)的 codex 中找到。

**这样做的目的是什么？**

> 国际化和本地化是用于描述为来自不同地区、使用不同方言和当地偏好的人们提供英语以外的其他语言的努力的术语。

**为什么需要翻译，翻译的结果是什么？**
阅读法典和上述段落（来自法典）也会回答这个问题。

但是没有*必要*翻译它，它只是增加了用户可以使用翻译/本地化的好处，因为不是每个人都说同一种语言。
许多主题创建者将开发准备本地化的主题作为标准做法，因为这不仅为他们的主题增加了额外的价值，而且（相对而言）不需要做太多额外的工作。

* * *

另一个好处是您可以轻松更改网站上的措辞，而无需添加或编辑代码。或者，您可以轻松地在全国海盗日使用“海盗”语言制作您的网站。或者在 4 月 1 日通过删除所有元音或类似的东西来恶作剧。- 所有这些都只是翻译的“创造性”（不一定是有意的）用途。

# keyboard-shortcuts - tortoisehg 提交对话框专注于键盘上的文件

> ID：15818677
> 
> 赞同：1
> 
> 时间：2013-04-04T18:15:43.783
> 
> 标签：keyboard-shortcuts, tortoisehg

当我启动提交对话框（thg commit）时，焦点是提交消息。这可能是最常见的地方。就我而言，我通常想查看我已更改的文件，并确保我正在提交我认为我正在提交的内容，而不是我不打算提交的任何内容。我发现进入文件列表以便能够使用 ctrl+d 查看视觉差异的唯一方法是使用鼠标。制表符不起作用，因为在提交消息输入控件中，它只是创建制表符。

有没有办法使用键盘并完全避免鼠标将焦点移动到文件列表？

谢谢你的尽心帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:00:12.163

我快速浏览了源代码，还查看了[wiki](https://bitbucket.org/tortoisehg/thg/wiki/KeySequences)，似乎没有快速的“官方”方法可以做到这一点。

我发现的一种方法，涉及大量的制表符，是以下序列：

```
$ thg commit 
```

当窗口出现时，执行`CTRL`+ `F`，这会使您进入“正则表达式搜索”框。然后按*很多*`TAB`次（我刚试的时候按了10次，但会有所不同），直到进入文件选择框。不是很好，但它有点工作......我想知道伸手去拿鼠标是否会更快，虽然':)

# javascript - 使用来自 CamanJS API 的预设过滤器

> ID：15818680
> 
> 赞同：4
> 
> 时间：2013-04-04T18:16:02.467
> 
> 标签：javascript, html, api, web, camanjs

我正在使用 CamanJS 插件对图像应用效果，我想知道如何应用[此处](http://camanjs.com/examples/)找到的 lomo、sin city、cross process 等预设效果。CamanJS 的文档没有详细说明这一点。

我尝试了下面的代码来应用晕影效果，但没有成功。

```
Caman("#effects", function () {

        this.resize({width: 650,height: 400
         });
         this.vignette();
        this.render();

            }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T19:03:19.550

晕影过滤器需要一个尺寸才能工作。它可以是绝对数字或百分比。

```
this.vignette(400);
this.vignette("10%"); 
```

它还接受一个可选的强度参数，其范围为 0-100。

```
this.vignette("10%", 40); 
```

你是对的，所有的过滤器都应该有更好的文档记录。

# android - Android Google Maps API V2 未缩放到位置

> ID：15818688
> 
> 赞同：0
> 
> 时间：2013-04-04T18:16:27.720
> 
> 标签：android, google-maps, zooming

我不确定出了什么问题，但我试图让我的谷歌地图片段在开始时放大到特定位置。由于某种原因，它无法正常工作，并且默认情况下仍会放大到非洲。这是我的代码。

```
public class OutbreakMap extends Activity implements LocationListener {
    double lat=50;
    double longi=50;
    private LocationManager locationManager;
    private String provider;
    private MapFragment mMapFragment;
    private GoogleMap googleMap;

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.location);

        // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
        boolean enabled = service.isProviderEnabled(LocationManager.GPS_PROVIDER);

         // Check if enabled and if not send user to the GSP settings
         // Better solution would be to display a dialog and suggesting to
        // go to the settings
        if (!enabled) {
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);

            // set title
            alertDialogBuilder.setTitle("Turn On Your GPS");

            // set dialog message
            alertDialogBuilder
                    .setMessage("Please turn on your GPS to track sickness in your area!")
                    .setCancelable(false)
                    .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, close
                            // current activity
                            OutbreakMap.this.finish();
                            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                            startActivity(intent);
                        }
                    })
                    .setNegativeButton("No",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, just close
                            // the dialog box and do nothing
                            dialog.cancel();
                        }
                    });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();

        }
        // Define the criteria how to select the locatioin provider -> use
        // default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);

        // Initialize the location fields
        if (location != null) {
            System.out.println("Provider " + provider + " has been selected.");
            onLocationChanged(location);
        } else {
            Toast.makeText(getApplicationContext(),"Location not found",Toast.LENGTH_SHORT);
        }

        mMapFragment = MapFragment.newInstance();
        FragmentTransaction fragmentTransaction =
                getFragmentManager().beginTransaction();
        fragmentTransaction.add(R.id.map, mMapFragment);
        fragmentTransaction.commit();
        googleMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                .getMap();
        setUpMapIfNeeded();
        googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
        if(location != null)  {
            lat=location.getLatitude();
            longi=location.getLongitude();
        }

        CameraPosition cameraPosition = new CameraPosition.Builder()
                    .target(new LatLng(lat,longi))      // Sets the center of the map to Mountain View
                    .zoom(17)                   // Sets the zoom
                  // Sets the tilt of the camera to 30 degrees
                    .build();                   // Creates a CameraPosition from the builder
        googleMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));

        UiSettings uiSettings=googleMap.getUiSettings();
        uiSettings.setAllGesturesEnabled(false);
        // Initialize the location fields
        if (location != null) {
            System.out.println("Provider " + provider + " has been selected.");
            onLocationChanged(location);
        } else {
        Toast.makeText(getApplicationContext(),"Couldn't Find Location",Toast.LENGTH_SHORT);
        }

        ParseGeoPoint userLoc= new ParseGeoPoint(lat,longi);
        ParseQuery query= new ParseQuery("Outbreak");
        query.whereWithinMiles("location",userLoc,1);
        query.findInBackground(new FindCallback() {
            public void done(List<ParseObject> objects, ParseException e) {
                if (e == null) {
                GetOutbreaks.getOutBreaksNearMe(googleMap,lat,longi,objects);
                Toast.makeText(getApplicationContext(),"Recieved Outbreak Data",Toast.LENGTH_SHORT);
                } else {
                    e.printStackTrace();
                    Toast.makeText(getApplicationContext(),"Could Not Download    Data",Toast.LENGTH_SHORT);
                }
            }

        });

//        moveToPrescription();
//        moveToPrescription();
    }

    /* Request updates at startup */
    @Override
    protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 400, 1, this);
    }

    /* Remove the locationlistener updates when Activity is paused */
    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
    }

    @Override
    public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude());
        int lng = (int) (location.getLongitude());
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
                Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
                Toast.LENGTH_SHORT).show();
    }

    public void moveToPrescription(){
        Intent intent = new Intent(this,Prescription.class);
        startActivity(intent);

    }

    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (googleMap == null) {
            googleMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                    .getMap();
            // Check if we were successful in obtaining the map.
            if (googleMap != null) {
                // The Map is verified. It is now safe to manipulate the map.

            }
        }
    }

} 
```

另外，这是我的地图片段活动的 xml 布局

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                  android:layout_width="match_parent"
                  android:layout_height="match_parent"
                  android:orientation="vertical" >

        <fragment xmlns:android="http://schemas.android.com/apk/res/android"
                  android:id="@+id/map"
                  android:layout_width="match_parent"
                  android:layout_height="match_parent"
                  android:name="com.google.android.gms.maps.MapFragment"/>

    </LinearLayout> 
```

还有我的 Android 清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.parse.starter"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="15"/>
    <permission
            android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
            android:protectionLevel="signature"/>
    <uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <!-- The following two permissions are not required to use
         Google Maps Android API v2, but are recommended. -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>

    <application
        android:name="ParseApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".ParseStarterProjectActivity"

            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".Register"/>
        <activity android:name=".Login"/>
        <activity android:name=".Home"/>
        <activity android:name=".OutbreakMap"/>
        <activity android:name=".Prescription"/>
        <activity android:name=".MyPrescriptions"/>
        <receiver android:name=".AlarmManagerBroadcastReceiver"></receiver>

        <uses-library android:name="com.google.android.maps"/>
        <meta-data
                android:name="com.google.android.maps.v2.API_KEY"
                android:value="My Maps API Key is Here"/>
    </application>
    <uses-feature android:glEsVersion="0x00020000" android:required="true" />

</manifest> 
```

LogCat 没有显示任何错误。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:02:20.417

您将在代码中添加第二个 SupportMapFragment 在与 GoogleMap 交互的 Fragment 之上。只需删除不必要的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:31:09.480

使用 SupportMapFragment

```
 <fragment  
      android:id="@+id/map"
      android:name="com.google.android.gms.maps.SupportMapFragment"
      /> 
```

谷歌地图通用；

gm = ((SupportMapFragment(getSupportFragmentManager().findFragmentById(R.id.map))).getMap();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T06:53:23.497

注释掉以下代码行

```
mMapFragment = MapFragment.newInstance();
    FragmentTransaction fragmentTransaction =
            getFragmentManager().beginTransaction();
    fragmentTransaction.add(R.id.map, mMapFragment);
    fragmentTransaction.commit(); 
```

它会像魅力一样发挥作用。

# c# - 指定的演员表无效

> ID：15818693
> 
> 赞同：1
> 
> 时间：2013-04-04T18:16:33.190
> 
> 标签：c#, sql, linq, entity-framework

我会很感激一些帮助调试这个请。我有一个如下定义的存储过程

```
ALTER PROCEDURE [dbo].[usp_ProcessBoxNumberPaymentInfo_Test]
    -- Add the parameters for the stored procedure here
     @boxNumber int, 
     @ProcessDate DateTime,
     @BoxType Varchar(50),
     @PaymentProcessDate DateTime,
     @Identity int OUTPUT  

BEGIN 
    Declare @NewID as int 
  -- INSERT CODE GOES HERE

   Set @NewID = SCOPE_IDENTITY()
  -- ANOTHER INSERT CODE GOES HERE
       SELECT @Identity = SCOPE_IDENTITY()  

END 
```

在代码方面，我的 DataContext 类中有以下方法来执行我的存储过程，传递指定的有效值。

```
 [global::System.Data.Linq.Mapping.FunctionAttribute(Name = "dbo.usp_ProcessBoxNumberPaymentInfo_Test")]
        public int GetValidPaymentBoxNumberLogID_Test(
            [global::System.Data.Linq.Mapping.ParameterAttribute(Name = "boxNumber", DbType = "Int")] string boxNumber,
            [global::System.Data.Linq.Mapping.ParameterAttribute(Name = "ProcessDate", DbType = "DateTime")] DateTime ProcessDate,
            [global::System.Data.Linq.Mapping.ParameterAttribute(Name = "BoxType", DbType = "VarChar(50)")] string BoxType,
            [global::System.Data.Linq.Mapping.ParameterAttribute(Name = "PaymentProcessDate", DbType = "DateTime")] DateTime PaymentProcessDate,
            [global::System.Data.Linq.Mapping.ParameterAttribute(Name = "Identity", DbType = "Int")] ref System.Nullable<int> identity)
        {
            IExecuteResult result = this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())), boxNumber, ProcessDate, BoxType, PaymentProcessDate, identity);
            identity = ((System.Nullable<int>)(result.GetParameterValue(4)));
            return ((int)(result.ReturnValue));
        } 
```

我遇到的问题是当我运行代码时，出现以下异常

**指定的演员表无效**

此错误在行**返回时引发 ((int)(result.ReturnValue));** 我不完全确定缺少什么类型以及在哪里。真的，任何解决这个问题的帮助都将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:22:05.217

`(Name = "boxNumber", DbType = "Int")] string boxNumber`

看起来您正在尝试将字符串转换为 int？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:47:29.750

你不能在这里使用拆箱：

```
return ((int)(result.ReturnValue)); 
```

见 [http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)

应该是

```
return ((Int32.Parse(result.ReturnValue)); 
```

但是如果 result.ReturnValue 为 null 它也会抛出异常。

更安全

```
int a=0;
Int32.TryParse(result.ReturnValue, out a);
return a; 
```

或明确检查 null 的 result.ReturnValue

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T13:34:19.003

当您调用存储过程时，请尝试以下操作：

```
ObjectResult<Nullable<int>> tmp;

tmp = GetValidPaymentBoxNumberLogID_Test (...

int identity = Convert.ToInt32(tmp.FirstOrDefault()); 
```

要不就

```
int identity = Convert.ToInt32(GetValidPaymentBoxNumberLogID_Test (...).FirstOrDefault()); 
```

# php - .htaccess 不重定向到 404.php 而是显示页面名称

> ID：15818694
> 
> 赞同：13
> 
> 时间：2013-04-04T18:16:36.933
> 
> 标签：php, .htaccess, http-status-code-404

我正在尝试为我的网站制作自定义 404 页面，并且`.htaccess`在使用此规则的根目录中有文件

`ErrorDocument 404 404.php //I want to redirect to 404`

因此，当我更改有效的文件名`home.php`时，`home1.php`它不会重定向我，而是`404.php`在该页面上回显

旁注：`404.php`仅在根目录中

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-04T18:20:28.407

这应该这样做

```
RewriteEngine on
ErrorDocument 404 http://www.yoursite.com/404.php 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-04T18:22:22.930

在您的`.htaccess`文件中，您应该能够使用：

```
RewriteEngine on
ErrorDocument 404 /404.php 
```

您可以使用此方法设置其他错误文档，但我会将它们放在单独的错误目录中：

```
ErrorDocument 400 /errors/400.php
ErrorDocument 401 /errors/401.php
ErrorDocument 403 /errors/403.php
ErrorDocument 404 /errors/404.php
ErrorDocument 500 /errors/500.php 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-04T18:24:30.277

您可以使用 htaccess 对 404 个旧页面执行以下操作

```
RewriteEngine on
ErrorDocument 404 /404.php 
```

但我个人会推荐

```
RewriteEngine on
RewriteRule home.php /home1.php [R=301,L] 
```

因为这会执行从旧页面名称到新页面名称的 301 重定向，所以任何缓存的搜索引擎结果仍然会出现在正确的页面上，而不是命中 404

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-24T15:28:00.647

在我的情况下，使用 Ubuntu 发行版，如果该指令位于in目录或其他位置，则该指令`ErrorDocument`无效：事实证明，它应该放在指令内的正确文件中（例如，如果网站提供 https页面，在指令内）。`.htaccess``htdocs``/etc/apache/sites-enabled/*.conf``<VirtualServer>``<VirtualHost *:443>`

# android - Android：MotionEvent 的 x 和 y 像素不会转换为图像坐标

> ID：15818698
> 
> 赞同：0
> 
> 时间：2013-04-04T18:16:42.177
> 
> 标签：android, camera, touch, coordinates, motionevent

我在 MotionEvent 中使用 getX() 和 getY() 函数来获取用户触摸屏幕的 x 和 y 位置。我也在使用安卓相机拍摄图像。这些图像是 480x640。我的意图是让用户绘制一个框并获取开始和结束 x,y 位置并使用它们创建一个框并裁剪图像。不幸的是，即使用户使用 android 屏幕（显示来自摄像头的视频）将正确的区域框起来，来自 MotionEvent 的坐标也与图像上的正确位置完全不相关。有时我从 MotionEvent 获得的 x,y 坐标实际上超过 480 或 640。android 屏幕的尺寸与图像的尺寸不同吗？或者 MotionEvent 中的 x,y 位置是否对应于其他东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:28:03.930

返回的坐标取决于正在使用的指针，但通常在屏幕坐标中，因此要从视图获取相对坐标，您需要偏移视图位置。

看：

[http://developer.android.com/reference/android/view/MotionEvent.html#AXIS_X](http://developer.android.com/reference/android/view/MotionEvent.html#AXIS_X)

对于视图的偏移，请使用：

[https://developer.android.com/reference/android/view/View.html#getLeft()](https://developer.android.com/reference/android/view/View.html#getLeft()) [https://developer.android.com/reference/android/view/View.html#getTop()](https://developer.android.com/reference/android/view/View.html#getTop())

# java - RMI - 在同一台机器上工作，而不是在局域网中

> ID：15818699
> 
> 赞同：0
> 
> 时间：2013-04-04T18:16:42.973
> 
> 标签：java, networking, rmi, lan, rmiregistry

我正在尝试在一台服务器和两个客户端之间建立双向通信。当所有程序都在同一台机器上运行时，这非常有效，但当我尝试使用 LAN 网络时它不起作用。我得到了错误：

```
java.rmi.ConnectException: Connection refused to host: 192.168.1.24; nested exception is: 
java.net.ConnectException: Connection timed out: connect 
```

这是服务器代码：

```
public class Server{
private Game partie; // The class Game extends UnicastRemoteObject and implements ServerInterface

public Server() throws RemoteException {
    System.setProperty("java.rmi.server.hostname", "192.168.1.24");
    partie = new Game();
    LocateRegistry.createRegistry(1099);
    try{
        Naming.rebind("Server", partie);
    }
    catch(Exception e){
        e.printStackTrace();
    }
}
public static void main(String argv[]) throws RemoteException{
    new Server();
}
} 
```

这是客户端代码的构造函数：

```
public Client(String aName, String aServerAdress) throws RemoteException {
    super();
    name = aName;
    ServerAdress = aServerAdress; //  = "192.168.1.24"
    theRegistry = LocateRegistry.getRegistry(ServerAdress);

    try {
        serverInterface = (ServerInterface) theRegistry.lookup("Server");
    } catch (NotBoundException e1) {
        e1.printStackTrace();
    }

    try {
        theRegistry.bind(name, this); // For two-way communication
    } catch (AlreadyBoundException e) {
        e.printStackTrace();
    }

    serverInterface.registerClient(name);
} 
```

其中 registerClient(String name) 代码大约是（在 Game 类中）：

```
cd_client = (ClientInterface) Naming.lookup("rmi://127.0.0.1/" + name); 
```

所有防火墙都被禁用。

我已经在这个问题上工作了好几个小时，但我仍然没有发现问题所在。如果您能帮我一点忙，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:24:06.827

将所有出现的 127.0.0.1（注册表绑定除外）更改为您的 LAN IP 地址（在您的情况下为 192.168.1.24）

127.0.0.1 是一个[环回](http://en.wikipedia.org/wiki/Loopback)地址：

> “环回 (loop-back) 描述了将电子信号、数字数据流或项目流从其原始设施路由回源的接收端而无需有意处理或修改的方法。这主要是一种测试传输或交通基础设施。” ——来自维基百科

# jenkins - 使用 jenkins 启动 Selenium 测试用例

> ID：15818700
> 
> 赞同：0
> 
> 时间：2013-04-04T18:16:43.580
> 
> 标签：jenkins, webdriver, selenium-webdriver, remotewebdriver

我已经使用 selenium webdriver 准备了一个测试用例，我使用 MSTEST 在本地运行，它工作正常，现在我想将我的测试用例移动到 JENKINS，当我从 JENKINS 运行时，它说它`Starting execution...`超过 15 mnts 并且仍然相同状态，所以我必须手动停止它。

这是我的控制台输出：

```
Started by user anonymous
Started by user anonymous
Building in workspace D:\Jenkins\jobs\Selenium_Script\workspace
[workspace] $ cmd /c call C:\Users\XXXXXXX\AppData\Local\Temp\hudson4765437871038045571.bat

D:\Jenkins\jobs\SelScript\workspace>call "D:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\mstest" /testcontainer:D:\Sel\EmployeeTest\test.emp.admin.dll 
Microsoft (R) Test Execution Command Line Tool Version 10.0.30319.1
Copyright (c) Microsoft Corporation. All rights reserved.

Loading D:\Sel\EmployeeTest\test.emp.admin.dll...
Starting execution...

Build was aborted
Finished: ABORTED 
```

我想在 Jenkins 上执行测试用例并检查执行结果

这是我正在使用的代码以防万一。

这是我用来实例化驱动程序的东西，我必须使用`RemoteDriver`吗？

```
public static IWebDriver GetDriver()
        {
            string _url = new Uri(Common.Url).DnsSafeHost.ToString(); 

            switch (Common.BrowserSelected)
            {
                case "ff":
                    FirefoxProfile profile = new FirefoxProfile();
                    profile.SetPreference("network.http.phishy-userpass-length", 255);
                    profile.SetPreference("network.automatic-ntlm-auth.trusted-uris", _url);
                    drv = new FirefoxDriver(profile);
                    break;
                case "ie":
                    var options = new InternetExplorerOptions();
                    options.IntroduceInstabilityByIgnoringProtectedModeSettings = true;
                    DesiredCapabilities capabilities = new DesiredCapabilities();
                    capabilities.SetCapability(CapabilityType.AcceptSslCertificates, true);
                    drv = new InternetExplorerDriver(options);
                    break;
                case "chrome":
                    //_driver = new ChromeDriver();
                    break;
            }
            return drv;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:24:50.953

`Build`您可以在Jenkins 部分运行您的 Selenium 脚本。

单击`Add Build Step`并选择`Execute Shell`，在那里您可以像在 Linux 环境中键入一样直接运行命令。

所有这一切都假设您正在运行 Linux 环境的 Jenkins。

@我必须使用`RemoteDriver`吗？取决于您是否安装了 xvfb 以在无头模式下运行测试？如果不是，那么可以，您可以将测试重定向到在 windows/mac 机器上远程运行。

**更新**

如果你有一台windows机器，你不需要xvfb。所以忘了那个吧。

用于构建项目的 Shell 脚本（默认为 sh，但这是可配置的）。该脚本将以工作区作为当前目录运行。输入你的 shell 脚本的内容。如果您的 shell 脚本没有像 #!/bin/sh 这样的标题行，那么将使用系统范围内配置的 shell，但您也可以使用标题行以另一种语言编写脚本（例如 #!/bin/perl ) 或控制 shell 使用的选项。默认情况下，将使用“-ex”选项调用 shell。因此，所有命令在执行之前都会打印出来，如果任何命令以非零退出代码退出，则认为构建失败。同样，添加 #!/bin/... 行以更改此行为。

作为最佳实践，尽量不要在此处放置长的 shell 脚本。相反，考虑在 SCM 中添加 shell 脚本，然后简单地从 Jenkins 调用该 shell 脚本（通过 bash -ex myscript.sh 或类似的东西），以便您可以跟踪 shell 脚本中的更改。

例子 -

您可以像这样运行 ruby​​ 命令

```
ruby testscripts.rb 
```

或像这样的shell脚本

```
./testscripts.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:08:55.433

詹金斯超级简单。只需这样做：

```
 1\.  Allow Jenkins to check-out your code into the Jenkins workspace.
  2\.  Navigate to that workspace on your Windows computer and manually run
      the tests by executing the script that starts them. 
```

通过这样做，詹金斯暂时不在画面中，因此不再是您的问题的原因。然后，您可以专注于真正的实际问题是什么。解决问题后，将更改检查到源代码存储库中，然后再次运行 Jenkins 构建并尝试再次手动运行。如果这也有效，那么最后，您可以清楚地在 Jenkins 中设置构建任务来运行您的测试。

# android - 是否可以通过蓝牙将语音从 PC 发送/接收到 Android 设备

> ID：15818704
> 
> 赞同：4
> 
> 时间：2013-04-04T18:17:03.883
> 
> 标签：android, bluetooth, voice

我有一台 PC（运行 java 程序）、蓝牙加密狗（支持 A2DP）和 Android 设备（2.3.6，也支持 A2DP）。

我想要：

1.  通过蓝牙将实时语音数据从 PC 的麦克风发送到 android 设备
2.  通过蓝牙将实时语音数据从 Android 设备的麦克风发送到 PC

我发现[了这个问题](https://stackoverflow.com/questions/5623699/how-to-create-programmatically-an-a2dp-connection-or-how-can-i-emulate-an-androi/5625223#5625223)，丹尼斯说“电话通常只是源设备（可以流式传输到接收器设备的流的源），接收器是耳机或蓝牙扬声器。”。所以似乎有可能实现案例2？或不？那么案例1，是不是不可能实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:23:29.950

确实，Android 手机是唯一的`A2DP` *源*设备。

遗憾的是，如果您决定依赖配置文件来传输音频，那么您的第一种情况是不可能实现的，因为当远程设备想要将音频流式传输到您的手机时`A2DP`，Android 没有实现处理[BlueZ广告所需的回调。](http://en.wikipedia.org/wiki/Bluetooth_stack#BlueZ)

第二个用例是*可能的*，因为您有一台支持蓝牙的 PC 和一些很棒的应用程序，这些应用程序将解码蓝牙堆栈中的声音并将其路由到扬声器。我曾经设法使用`PulseAudio`and `pulseaudio-module-bluetooth`on重现这个用例`Ubuntu 12.10`。

[这](https://gist.github.com/joergschiller/1673341)是一个工作示例，展示了一旦​​连接的 BT 设备开始流式传输，如何管理声音的路由。[这](https://askubuntu.com/questions/145733/a2dp-connection-not-shown-in-pulseaudio)是另一个。它们都发生在 Linux 上，但我从未在 Windows 上这样做过。

为了完整起见，[这](https://stackoverflow.com/questions/15557933/receive-audio-via-bluetooth-in-android/15559902#15559902)是我写的另一个 SO 答案，详细介绍了如何在 Android 上实现接收`A2DP` *器功能。*

**编辑 ：**

没有什么可以阻止您在 Android 设备上通过蓝牙实现自己的音频流协议，这将起作用，但由于它不是标准，它永远不会符合系统内置的蓝牙配置文件（A2DP、HFP ... ）。

# image-processing - 如何使用二维图像查找对象的尺寸

> ID：15818708
> 
> 赞同：-1
> 
> 时间：2013-04-04T18:17:23.917
> 
> 标签：image-processing, graphics, machine-learning

给定一个物体的图像，比如说一个尺寸为（l，b，h）的盒子

我可以只使用图像来查找 lb 和 h ... 如果不是所有三个维度，我可以找到我拍摄的图像的边的维度（即 l、b 或 h 中的任何两个）。

另外，如果我从同一物体的不同距离拍摄图像，我每次都能获得相同的尺寸吗？（鉴于拍摄图像的距离有限制，即相机与物体之间的距离永远不会超过 200 厘米）。

我们可以使用机器学习吗？或者我们可以使用图形算法找到图像中物体的尺寸，然后根据拍摄图像的距离，我们可以有一些因素来计算物体的尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:37:53.860

图形对几何体（加上相机等）进行描述并生成它的图像。计算机视觉处理您正在谈论的那种问题：从图像中恢复几何、位置、方向等。

我要对你说的第一件事是视觉算法是一个活跃的研究领域，所以这不是一个 stackoverflow 问题。

但是，请阅读以下术语以开始使用：图像分割、边缘检测、霍夫变换。

希望有帮助！

# python - 使用 pymongo 将自定义 python 对象编码为 BSON

> ID：15818712
> 
> 赞同：7
> 
> 时间：2013-04-04T18:17:28.080
> 
> 标签：python, numpy, pymongo, bson

有没有办法告诉 pymongo 使用自定义编码器将 python 对象转换为 BSON？

具体来说，我需要将 numpy 数组转换为 BSON。我知道我可以手动确保每个 numpy 数组在发送到 pymongo 之前都被转换为原生 python 数组。但这是重复且容易出错的。我宁愿有一种方法来设置我的 pymongo 连接以自动执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:02:31.970

你需要写一个`SONManipulator`. 从[文档](http://api.mongodb.org/python/current/examples/custom_type.html#automatic-encoding-and-decoding)：

SONManipulator 实例允许您指定 PyMongo 自动应用的转换。

```
from pymongo.son_manipulator import SONManipulator

class Transform(SONManipulator):
  def transform_incoming(self, son, collection):
    for (key, value) in son.items():
      if isinstance(value, Custom):
        son[key] = encode_custom(value)
      elif isinstance(value, dict): # Make sure we recurse into sub-docs
        son[key] = self.transform_incoming(value, collection)
    return son
  def transform_outgoing(self, son, collection):
    for (key, value) in son.items():
      if isinstance(value, dict):
        if "_type" in value and value["_type"] == "custom":
          son[key] = decode_custom(value)
        else: # Again, make sure to recurse into sub-docs
          son[key] = self.transform_outgoing(value, collection)
    return son 
```

然后将其添加到您的 pymongo 数据库对象：

```
db.add_son_manipulator(Transform()) 
```

`_type`请注意，如果您想以静默方式将 numpy 数组转换为 python 数组，则不必添加该字段。

# javascript - 在javascript中循环遍历动态数组

> ID：15818714
> 
> 赞同：-3
> 
> 时间：2013-04-04T18:17:30.350
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

```
 var arrPropertiesAndChannels = null, arrPrrp = null, arrLeftProp = null, arrMiddleDefault = null, arrRightProp = null;
        $(document).ready(function () {
            arrPropertiesAndChannels = { "props": [{ "prid": "61494", "prname": "Park Plaza Hotel Gurgaon", "pos": "1", "pinned": false, "display": true }, { "prid": "62998", "prname": "Lemon Tree City Center", "pos": "2", "pinned": false, "display": true }, { "prid": "62999", "prname": "Lemon Tree Hotel Udyog Vihar", "pos": "3", "pinned": false, "display": true }, { "prid": "78097", "prname": "Royal Retreat", "pos": "4", "pinned": false, "display": false }, { "prid": "78098", "prname": "SkRetreat", "pos": "5", "pinned": false, "display": false }, { "prid": "78099", "prname": "VBkRetreat", "pos": "6", "pinned": false, "display": false}], "chans": [{ "chid": "1", "chname": "FACEBOOK", "pos": "1" }, { "chid": "2", "chname": "TWITTER", "pos": "2" }, { "chid": "3", "chname": "NEWSLETTER", "pos": "3"}] };
            arrPrrp = arrPropertiesAndChannels.props;
            arrLeftProp = arrPrrp.slice(0, 0);
            arrMiddleDefault = arrPrrp.slice(0, 3);
            arrRightProp = arrPrrp.slice(3, 8);

        });

function navigRight() {
    var tempprid = '';

    $.each(arrMiddleDefault, function (i, data) {
        console.log(data.prid);
        if (data.pinned == false) {
            arrLeftProp.push(data);
            tempprid = data.prid;
            //console.log(tempprid);
            //break;
        }
    });

arrMiddleDefault = arrMiddleDefault.filter(function (el) {
        return el.prid !== tempprid;
    });

    arrMiddleDefault.push(arrRightProp.slice(0, 1));
    //console.log(arrMiddleDefault);
    //console.log(arrLeftProp);

    arrRightProp = arrRightProp.filter(function (el) {
        return el.prid !== arrRightProp.slice(0, 1)[0].prid;
    });

}

<div>
        <input type="button" value="<<" onclick="navigLeft()">
        <div id="dvTest">
        </div>
        <input type="button" value=">>" onclick="navigRight()">
    </div> 
```

我有 json 数据变量

```
arrPropertiesAndChannels ={ "props": [{ "prid": "61494", "prname": "Park Plaza Hotel Gurgaon", "pos": "1", "pinned": false, "display": true }, { "prid": "62998", "prname": "Lemon Tree City Center", "pos": "2", "pinned": false, "display": true }, { "prid": "62999", "prname": "Lemon Tree Hotel Udyog Vihar", "pos": "3", "pinned": false, "display": true }, { "prid": "78097", "prname": "Royal Retreat", "pos": "4", "pinned": false, "display": false }, { "prid": "78098", "prname": "SkRetreat", "pos": "5", "pinned": false, "display": false }, { "prid": "78099", "prname": "VBkRetreat", "pos": "6", "pinned": false, "display": false}], "chans": [{ "chid": "1", "chname": "FACEBOOK", "pos": "1" }, { "chid": "2", "chname": "TWITTER", "pos": "2" }, { "chid": "3", "chname": "NEWSLETTER", "pos": "3"}] }; 
```

我们有

```
arrPrrp = arrPropertiesAndChannels.props;
arrLeftProp = arrPrrp.slice(0, 0);
console.log(arrLeftProp);
arrMiddleDefault = arrPrrp.slice(0, 3);
console.log(arrMiddleDefault);
arrRightProp = arrPrrp.slice(3, 8);
console.log(arrRightProp); 
```

我有一个按钮值是“>>”。单击此按钮时，javascript navigRight() 函数调用...其中 arrMiddleDefault 的第一项被推入 arrLeftProp 数组。这次从 arrMiddleDefault 数组中删除第一项，并将 arrRightProp 的第一项插入到 arrMiddleDefault 数组中。第一次单击按钮“>>”console.log(data.prid) 在 navigRight() 函数中给出 61494,62998,62999。第二次 console.log(data.prid) 给出 61494,62998,undefined, 第三次 console.log(data.prid) 给出 61494,undefined,undefined, 第四次 console.log(data.prid) 给出 undefined,undefined,undefined

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:07:15.210

问题是当你打电话时：

```
arrMiddleDefault.push(arrRightProp.slice(0, 1)); 
```

`arrMiddleDefault`当您真的想将第一个元素推入数组时，您正在将数组推入`arrMiddleDefault`数组。

你可以改用这个：

```
arrMiddleDefault.push(arrRightProp.slice(0, 1)[0]); 
```

但它也可以缩短为：

```
arrMiddleDefault.push(arrRightProp[0]); 
```

同样，您有以下内容：

```
 return el.prid !== arrRightProp.slice(0, 1)[0].prid; 
```

您可以将其缩短为：

```
 return el.prid !== arrRightProp[0].prid; 
```

# highcharts - Highstock 数据点自动连接

> ID：15818730
> 
> 赞同：0
> 
> 时间：2013-04-04T18:18:21.493
> 
> 标签：highcharts, highstock

我用 3 个系列创建了 Highstock 图表，其中一些系列在某个时间间隔内缺少数据。Highstock 所做的是“完成”或“连接”这些点，但我希望它在这些间隔内不绘制任何数据。

我怎样才能做到这一点？我试图设置 xAxis 间隔，但它不起作用。这是网站上的一些基本示例。

[来自 highchars.com 的示例](http://goo.gl/ep6Dd)

在这个例子中，它做了我想要的 - 你可以看到有些点没有连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:21:24.807

查看“connectNulls”属性：

[http://api.highcharts.com/highstock#plotOptions.series.connectNulls](http://api.highcharts.com/highstock#plotOptions.series.connectNulls)

# sql - 使用 EXCEPT 的 SQL DB2 查询

> ID：15818732
> 
> 赞同：1
> 
> 时间：2013-04-04T18:18:27.963
> 
> 标签：sql, db2

以下是“列出拥有所有可用颜色项目的客户的查询。也就是说，对于每种可用颜色，客户拥有该颜色的一些项目。” 项目是客户购买的项目表

```
select cust#, cname
    from Customer
except
select C.cust#, C.cname
    from ( select D.cust#, A.colour
        from Customer D,
            Avail_Colours A
        except
        select I.cust#, I.colour
        from Item I
    ) as M,
    Customer C
where C.cust# = M.cust#; 
```

如果我想将问题改写为：“列出拥有某种可用颜色的所有商品的客户”，即列出可用颜色以及客户拥有该颜色的所有商品的客户，该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:37:14.343

*(The following assumes that you are looking for a solution using EXCEPT.)*

Take the cross product of all available items with all available customers and all available colours. Now take away from that set all the existing items, with their actual owners and colours. Apparently, if a customer has all items in some colour, the resulting set will lack the corresponding colour(s) for that customer. You can get the list of all such customers and their "full-set" colours if you take away this resulting set from the cross product of all customers and colours.

Translating the above into EXCEPT SQL, here's what you can get:

```
SELECT D.cust#,
       D.name,
       C.colour
FROM   Customer D,
       Avail_Colours C
EXCEPT
SELECT D.cust#,
       D.name,
       S.colour
FROM   (
        SELECT D.cust#,
               I.item#,
               C.colour
        FROM   Items I,
               Customer D,
               Avail_Colours C
        EXCEPT
        SELECT I.cust#,
               I.item#,
               I.colour
        FROM   Items I
       ) S
JOIN   Customer D
ON     D.cust# = S.cust#
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:51:15.837

以下版本假设颜色都可用：

```
select i.cust#, i.colour, COUNT(distinct i.item#) as numItems
from items i join
     (select i.cust# , COUNT(distinct i.item#) as numItems
      from items i
      group by i.cust#
     ) isum
     on isum.cust# = i.cust#
group by i.cust#, i.colour
having i.numItems = max(isum.numItems) 
```

它返回所有商品的客户编号和颜色（如果有）。

要获得可用的颜色，您只需将以下`where`子句添加到子查询和外部查询：

```
where colour in (select colour from Avail_Colours) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:41:35.170

我无权访问 DB2，因此无法对其进行测试。请认为这只是一个想法，而不是一个现成的解决方案。我使用标准 SQL。

```
SELECT c.cust#, MAX(c.cname), a.colour 
FROM Customer c 
JOIN Items i ON c.cust# = i.cust#
JOIN Avail_Colors a ON a.colour=i.colour
GROUP BY c.cust#, i.colour
HAVING COUNT(*)=(SELECT COUNT(*) FROM Item WHERE i.colour = a.colour) 
ORDER BY c.cust# 
```

# c++ - 使用 pugixml 将现有的 xml_node 附加到另一个

> ID：15818734
> 
> 赞同：3
> 
> 时间：2013-04-04T18:18:37.500
> 
> 标签：c++, xml-serialization, pugixml

如何`pugi::xml_node`使用 pugixml 将现有附加到另一个？我知道的唯一功能是：

```
pugi::xml_node node = root.append_child("child"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:14:25.183

You should use cloning functions described here:

[http://pugixml.org/docs/manual.html#modify.clone](http://pugixml.org/docs/manual.html#modify.clone)

Note that cloning functions can't clone the entire document - i.e. if you have a document that's loaded from this data:

```
<node><child /></node> 
```

Then if you want to clone this data into <child> node, you should do:

```
doc.child("node").child("child").append_copy(doc.child("node")); 
```

This will yield the following document:

```
<node><child><node><child /></node></child></node> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:25:59.733

我也找到了这种方法： http: [//pugixml.googlecode.com/svn/tags/release-0.9/docs/manual/modify.html](http://pugixml.googlecode.com/svn/tags/release-0.9/docs/manual/modify.html)

```
xml_node xml_node::append_child(xml_node_type type = node_element);
xml_node xml_node::insert_child_after(xml_node_type type, const xml_node& node);
xml_node xml_node::insert_child_before(xml_node_type type, const xml_node& node); 
```

> insert_child_after 和 insert_child_before 在指定节点/属性之前或之后添加（现有）节点。

# bash - 删除当前目录下所有特定类型文件的最后n行，递归

> ID：15818736
> 
> 赞同：1
> 
> 时间：2013-04-04T18:18:39.993
> 
> 标签：bash

我有以下 bash 脚本。

```
for i in **/*.h; do head $i -n -2 > $i.tmp && mv $i.tmp $i -f; done 
```

目的是遍历当前目录中的每个 .h 文件，并从该文件中删除最后两行。

但是，这仅对直接位于当前目录的子文件夹中的文件按预期工作，但它不会处理子文件夹的子文件夹等中的文件，因此 ./foo/foobar.h 得到处理，但 ./foo /bar/foobar.h 或 for/bar/foobar/.foobar.h 不要。

因此，我这样尝试过：

```
for i in 'find -name *.h'; do head $i -n -2 > $i.tmp && mv $i.tmp $i -f; done 
```

这失败了，因为 > $i.tmp 不明确

我的脚本应该如何处理目录中的所有头文件，无论它们嵌套在子文件夹中的深度如何？

编辑：如果原始文件在 eof 之前没有直接换行，则上面的第一个工作脚本（以及答案中的 sed 替代）将添加一个，因此如果不需要 eof 之前的换行，它必须之后被删除：

```
for i in **/*.h; do head $i -n -2 > $i.tmp && mv $i.tmp $i -f && truncate --size=-2 $i; done 
```

CRLF（Windows 样式）换行符的大小应为 -2，CR（旧 MacOS 样式）和 LF（unix 样式）均应为 -1，行尾

当然，这种方法也会在 eof 之前删除一个换行符，它之前已经存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:22:15.373

如果您有[bash4](/questions/tagged/bash4 "显示标记为“bash4”的问题")和

```
shopt -s globstar 
```

启用。

> 全球星
> 
> 如果设置，文件名扩展上下文中使用的模式 '**' 将匹配所有文件以及零个或多个目录和子目录。如果模式后跟“/”，则只有目录和子目录匹配。

见[http://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html](http://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:29:36.103

```
find -name '*.h' -exec sed -i 'N;$!P;$!D;$d' '{}' ';' 
```

这将从所有 .h 文件中删除最后两行，并消除对重定向和临时文件的需要，因为它会就地编辑文件。它也适用于包含空格的文件名和路径。

# java - 为了在 Netty 中重用客户端连接（获取“对等连接重置”），我需要监听哪些事件？

> ID：15818767
> 
> 赞同：2
> 
> 时间：2013-04-04T18:20:42.220
> 
> 标签：java, netty

当我尝试在 Netty 中重用客户端连接时，我得到`java.io.IOException: Connection reset by peer`了（如果我发送一个请求，这不会发生，但如果我发送两个请求，即使是从单个线程，每次都会发生）。我目前的方法涉及以下实现一个简单的 ChannelPool ，其代码如下。请注意，key 方法从`freeChannels`成员那里获得一个免费频道，如果没有可用频道，则创建一个新频道。该方法`returnChannel()`是在我们完成请求后负责释放通道的方法。它在我们处理响应后在管道内部调用（参见下面代码中的`messageReceived()`方法`ResponseHandler`）。有谁看到我做错了什么，为什么我会遇到异常？

频道池代码（注意使用`freeChannels.pollFirst()`获取已通过调用返回的免费频道`returnChannel()`）：

```
public class ChannelPool {

private final ClientBootstrap cb;
private Deque<Channel> freeChannels = new ArrayDeque<Channel>();
private static Map<Channel, Channel> proxyToClient = new ConcurrentHashMap<Channel, Channel>();

public ChannelPool(InetSocketAddress address, ChannelPipelineFactory pipelineFactory) {
    ChannelFactory clientFactory =
            new NioClientSocketChannelFactory(
                    Executors.newCachedThreadPool(),
                    Executors.newCachedThreadPool());
    cb = new ClientBootstrap(clientFactory);
    cb.setPipelineFactory(pipelineFactory);
}

private void writeToNewChannel(final Object writable, Channel clientChannel) {
    ChannelFuture cf;
    synchronized (cb) {
        cf = cb.connect(new InetSocketAddress("localhost", 18080));
    }
    final Channel ch = cf.getChannel();
    proxyToClient.put(ch, clientChannel);
    cf.addListener(new ChannelFutureListener() {

        @Override
        public void operationComplete(ChannelFuture arg0) throws Exception {
            System.out.println("channel open, writing: " + ch);
            ch.write(writable);
        }
    });
}

public void executeWrite(Object writable, Channel clientChannel) {
    synchronized (freeChannels) {
        while (!freeChannels.isEmpty()) {
            Channel ch = freeChannels.pollFirst();
            System.out.println("trying to reuse channel: " + ch + " " + ch.isOpen());
            if (ch.isOpen()) {
                proxyToClient.put(ch, clientChannel);
                ch.write(writable).addListener(new ChannelFutureListener() {

                    @Override
                    public void operationComplete(ChannelFuture cf) throws Exception {
                        System.out.println("write from reused channel complete, success? " + cf.isSuccess());
                    }
                });
                // EDIT: I needed a return here
            }
        }
    }
    writeToNewChannel(writable, clientChannel);
}

public void returnChannel(Channel ch) {
    synchronized (freeChannels) {
        freeChannels.addLast(ch);
    }
}

public Channel getClientChannel(Channel proxyChannel) {
    return proxyToClient.get(proxyChannel);
}
} 
```

Netty 管道代码（请注意，`RequestHandler`调用`executeWrite()`使用新通道或旧通道，并在收到响应并在对客户端的响应中设置内容后`ResponseHandler`调用）：`returnChannel()`

```
public class NettyExample {

private static ChannelPool pool;

public static void main(String[] args) throws Exception {

    pool = new ChannelPool(
            new InetSocketAddress("localhost", 18080),
            new ChannelPipelineFactory() {
                public ChannelPipeline getPipeline() {
                    return Channels.pipeline(
                            new HttpRequestEncoder(),
                            new HttpResponseDecoder(),
                            new ResponseHandler());
                }
            });
    ChannelFactory factory =
            new NioServerSocketChannelFactory(
                    Executors.newCachedThreadPool(),
                    Executors.newCachedThreadPool());
    ServerBootstrap sb = new ServerBootstrap(factory);

    sb.setPipelineFactory(new ChannelPipelineFactory() {
        public ChannelPipeline getPipeline() {
            return Channels.pipeline(
                    new HttpRequestDecoder(),
                    new HttpResponseEncoder(),
                    new RequestHandler());
        }
    });

    sb.setOption("child.tcpNoDelay", true);
    sb.setOption("child.keepAlive", true);

    sb.bind(new InetSocketAddress(2080));
}

private static class ResponseHandler extends SimpleChannelHandler {

    @Override
    public void messageReceived(ChannelHandlerContext ctx, final MessageEvent e) {
        final HttpResponse proxyResponse = (HttpResponse) e.getMessage();
        final Channel proxyChannel = e.getChannel();
        Channel clientChannel = pool.getClientChannel(proxyChannel);
        HttpResponse clientResponse = new DefaultHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK);
        clientResponse.setHeader(HttpHeaders.Names.CONTENT_TYPE, "text/html; charset=UTF-8");
        HttpHeaders.setContentLength(clientResponse, proxyResponse.getContent().readableBytes());
        clientResponse.setContent(proxyResponse.getContent());
        pool.returnChannel(proxyChannel);
        clientChannel.write(clientResponse);
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {
        e.getCause().printStackTrace();
        Channel ch = e.getChannel();
        ch.close();
    }
}

private static class RequestHandler extends SimpleChannelHandler {

    @Override
    public void messageReceived(ChannelHandlerContext ctx, final MessageEvent e) {
        final HttpRequest request = (HttpRequest) e.getMessage();
        pool.executeWrite(request, e.getChannel());
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {
        e.getCause().printStackTrace();
        Channel ch = e.getChannel();
        ch.close();
    }
}
} 
```

编辑：为了提供更多细节，我已经写了代理连接上发生的事情的踪迹。请注意，以下涉及由同步 apache commons 客户端执行的两个串行请求。第一个请求使用了一个新的通道并正常完成，第二个请求尝试重用相同的通道，该通道是开放且可写的，但莫名其妙地失败（除了注意到从工作线程）。显然，第二个请求在重试时成功完成。两个请求完成后很多秒，两个连接最终都关闭（即，即使连接被对等方关闭，我截获的任何事件都不会反映这一点）：

```
channel open: [id: 0x6e6fbedf]
channel connect requested: [id: 0x6e6fbedf]
channel open, writing: [id: 0x6e6fbedf, /127.0.0.1:47031 => localhost/127.0.0.1:18080]
channel connected: [id: 0x6e6fbedf, /127.0.0.1:47031 => localhost/127.0.0.1:18080]
trying to reuse channel: [id: 0x6e6fbedf, /127.0.0.1:47031 => localhost/127.0.0.1:18080] true
channel open: [id: 0x3999abd1]
channel connect requested: [id: 0x3999abd1]
channel open, writing: [id: 0x3999abd1, /127.0.0.1:47032 => localhost/127.0.0.1:18080]
channel connected: [id: 0x3999abd1, /127.0.0.1:47032 => localhost/127.0.0.1:18080]
java.io.IOException: Connection reset by peer
    at sun.nio.ch.FileDispatcherImpl.read0(Native Method)
    at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)
    at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:218)
    at sun.nio.ch.IOUtil.read(IOUtil.java:186)
    at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:359)
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:63)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:373)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:247)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:07:03.203

最后，想通了。有两个问题导致连接重置。首先，我没有从向代理发送请求`releaseConnection()`的 apache commons调用（请参阅[后续问题](https://stackoverflow.com/questions/15844657/keep-client-from-closing-connection-to-a-netty-server-is-there-something-i-need)）。其次，在连接被重用的情况下，两次向代理服务器发出相同的调用。我需要在第一次写入后返回，而不是继续 while 循环。这个双重代理调用的结果是我向原始客户端发出了重复的响应，破坏了与客户端的连接。`HttpClient``executeWrite`

# c - 在eclipse CDT中监视函数内的静态变量

> ID：15818772
> 
> 赞同：0
> 
> 时间：2013-04-04T18:20:59.820
> 
> 标签：c, debugging, eclipse-cdt

在c中，当一个变量在函数中定义为静态时，该变量的值一直保持不变。所以很可能，它存储在 bss 或数据部分。

但是，在 Eclipse CDT 调试中，当尝试检查该变量时，在表达式窗格中键入变量名只会在堆栈帧在函数中时显示该变量，如局部变量。

它是eclipse中的错误吗？

编辑：在 IAR Embedded Workbench 中，函数中的静态变量可以在函数之外在调试时观察，所以这是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:33:26.547

虽然变量实际上存储在堆中......但变量的**范围**仍然是函数的本地。它的值在该函数之外没有任何意义，并且在函数之外它永远不应该改变......除非您将指针传递给它，在这种情况下，您可以在任何可以访问该指针的函数中查看它。

所以......不......这不是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:37:43.950

您需要使用函数限定静态变量以确定范围，例如`foo::myvar`是否`myvar`在函数中定义`foo`。

# javascript - Swipe.js - 用户滚动方向的简单检测（后退还是前进？）

> ID：15818773
> 
> 赞同：0
> 
> 时间：2013-04-04T18:21:03.960
> 
> 标签：javascript, jquery, mobile

这很简单，我敢肯定，但目前对我来说太复杂了。

Swipe.js，一个移动滑块，在每张幻灯片上都提供了很多很好的信息，以及可以在幻灯片期间和结束时执行的两个功能，但是我很难编写一些简单的逻辑来检测是否用户正在滚动到下一张幻灯片或上一张：

**Swipe.js：** [https ://github.com/bradbirdsall/Swipe](https://github.com/bradbirdsall/Swipe)

**可用功能：**

```
window.mySwipe = new Swipe(document.getElementById('slider'), {
  callback: function(index, elem) {},
  transitionEnd: function(index, elem) {}
}); 
```

**Swipe 的简单 API**

```
Swipe API
Swipe exposes a few functions that can be useful for script control of your slider.

prev() slide to prev

next() slide to next

getPos() returns current slide index position

getNumSlides() returns the total amount of slides

slide(index, duration) slide to set index position (duration: speed of transition in milliseconds) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:43:22.280

像这样的东西可以让你到达那里。您只想在生产中的一个回调函数中执行此操作，但我不确定哪个确切给出了您刚刚转换到的幻灯片的索引，所以我为您输入了两个。

```
var sliderIndex = 0;
window.mySwipe = new Swipe(document.getElementById('slider'), {
  callback: function(index, elem) {
      if (index < sliderIndex) {
         //backwards 
      }else{
         //forwards
      }
      sliderIndex = index;
  },
  transitionEnd: function(index, elem) {
      if (index < sliderIndex) {
         //backwards 
      }else{
         //forwards
      }
      sliderIndex = index;
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-27T00:26:18.367

检查 slideNextTransitionStart、slideNextTransitionEnd、slidePrevTransitionStart、slidePrevTransitionEnd 的 API 文档

# asp-classic - 如何将网站上的 PayPay Standard 链接到 PayPal 账户？

> ID：15818774
> 
> 赞同：-2
> 
> 时间：2013-04-04T18:21:08.293
> 
> 标签：asp-classic

我已安装 Cube Cart V5 并已激活 PayPal Standard 作为付款方式。在测试销售中，PayPal 屏幕出现并询问 1) 登录到您的 PayPal 帐户，2) 使用您的信用卡。如何将此链接到我的 PayPal 帐户，以便将购买注册到我的 PayPal 帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T04:44:56.843

I'm not sure what you're asking. Paypal works this way, by connecting you directly to paypal and allowing you to sign in and make your payment on their website. When your customer makes a payment, the money goes into your paypal account which you entered into cube during the setup process.

If you prefer to use paypal's api key, you can learn more about it at this link: [https://developer.paypal.com/docs/classic/express-checkout/integration-guide/ECAPICredentials/](https://developer.paypal.com/docs/classic/express-checkout/integration-guide/ECAPICredentials/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:05:25.023

我对 Cube Cart 不熟悉，但在最基本的方式中，作为贝宝商家，您会获得一个代表您的商家用户名和密码，并且在您的购物车管理工具中，您可以在其中剪切和粘贴这些值，以便处理交易。

初始化付款时，它通常通过 URL 字符串传递值。您的商家信息将在该字符串中，因此它可以匹配一个帐户来收款。

Paypal 有集成文档，但支持购物车的人应该能够更有效地帮助您。如果您没有获得直接支持，请查看他们是否有论坛。

# visual-studio-2010 - Visual Studio 2010 建模项目错误

> ID：15818778
> 
> 赞同：2
> 
> 时间：2013-04-04T18:21:15.910
> 
> 标签：visual-studio-2010, visual-studio, uml

我在 Visual Studio 2010 中创建的建模项目存在严重问题。今天我正在重命名我的项目和解决方案名称和路径。现在，当我希望打开任何图表时，它会引发某种错误。然后我将一切都恢复到第一个设置，但还是一样。

错误：

> 无法加载
> 
> 'C:\Users\Klemen\Trgovina\Knjiznica\UMLUseCaseDiagram1.
> 
> usecasediagram'：您必须在 Visual 中打开此 UML 图
> 
> 用于创建它的工作室建模项目。

有谁知道，如何让我的项目再次工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-21T16:49:21.200

你有任何附加/插件吗？我有一个冲突的插件，删除它后，它又可以工作了。

# c - C程序中的尴尬错误

> ID：15818781
> 
> 赞同：0
> 
> 时间：2013-04-04T18:21:20.197
> 
> 标签：c, eclipse-cdt

```
Console* initConsole(Controller* ctrl){
    if (ctrl == NULL)
        return NULL;
    Console* c = (Console*)malloc(sizeof(Console));
    c->ctrl = ctrl;
    return c;
} 
```

*'{' 标记之前应为 '='、','、';'、'asm' 或 ' **attribute '***

这个错误出现在我的一个模块中。对于某些函数，“{”与函数的标题不在同一行，所以我按下了退格键，保存并调试。模块是干净的，但错误转到另一个模块而且我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:23:15.107

如果我忘记在前向声明后放置分号（可能在包含的标题中），我通常会得到这个

# java - 如何在 Java 中使用 .cer 文件验证证书

> ID：15818782
> 
> 赞同：3
> 
> 时间：2013-04-04T18:21:21.393
> 
> 标签：java, security, jakarta-ee, x509certificate, public-key-encryption

我正在尝试以以下方式验证使用 Java 提供给我的证书

```
 try{
        FileInputStream fr = new FileInputStream(pathtoCertificate);
        CertificateFactory cf =   CertificateFactory.getInstance("X509");
        X509Certificate c = (X509Certificate) 
                            cf.generateCertificate(fr);
        System.out.println("++++Certificate Verification++++++++");
        PublicKey pk = c.getPublicKey();
        c.verify(pk);....//63
System.out.println("++This certificate is VALID++");
    .....

    }
    catch(CertificateException e){
                e.printStackTrace();
                System.out.println("Certificate is Invalid");
            } 
```

但是，我不断收到以下错误

```
java.security.SignatureException: Signature does not match.
    at sun.security.x509.X509CertImpl.verify(Unknown Source)
    at sun.security.x509.X509CertImpl.verify(Unknown Source)
    at Main.printCertificate(Main.java:63)
    at Main.main(Main.java:41) 
```

我只获得了一个证书文件（我需要验证）、一个私钥（对应于上述文件）和来自 CA 的证书。我对 Java 安全性很陌生。因此，任何关于如何验证证书文件的想法都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:54:58.793

好吧，我终于想通了。对于将来可能到达这里的人。引发错误的原因是我的证书不是`self signed`. 因此，我只需要使用 CA 颁发的证书（如我的 Q 中所述）来验证公钥。其余的保持不变。

# ios - 由于取消引用垃圾指针导致应用程序崩溃

> ID：15818783
> 
> 赞同：3
> 
> 时间：2013-04-04T18:21:21.773
> 
> 标签：ios, debugging, crash, exc-bad-access

我在我的 iPod 应用程序中看到一些随机崩溃，并且在所有崩溃报告中都有以下常见消息（尽管它们具有不同的线程跟踪）。崩溃是不可重现的 - 它非常随机地发生。

**试图取消引用垃圾指针**

我还附上了一个示例崩溃报告。请建议如何调试此类问题。

**崩溃报告：**

CrashReporter 密钥：6e6f41fdb678cf746d1c4561b2d7bc2b3f6772ad 硬件型号：iPod4,1 进程：TestApplication [3154] 路径：/var/mobile/Applications/E5ED253B-A27A-4014-885A-030D19C7CB2C/TestApplication.app/TestApplicationTestApplication 版本标识符：com.domain.retail. ：1.0.0 代码类型：ARM 父进程：launchd [1]

```
Date/Time:       2013-04-02 10:37:29.000 +0530
OS Version:      iPhone OS 6.1.3 (10B329)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x000000cc
Crashed Thread:  10

Thread 0 name:  Dispatch queue: com.domain.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x3a7bceb4 mach_msg_trap + 20
1   CoreFoundation                  0x32626040 0x3258f000 + 618560
2   CoreFoundation                  0x32624d58 0x3258f000 + 613720
3   CoreFoundation                  0x32597eb8 CFRunLoopRunSpecific + 352
4   CoreFoundation                  0x32597d48 CFRunLoopRunInMode + 104
5   GraphicsServices                0x3614a2e8 GSEventRunModal + 72
6   UIKit                           0x344ad300 UIApplicationMain + 1120
7   TestApplication                          0x000a54d0 main + 44

Thread 1 name:  Dispatch queue: com.domain.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x3a7bd648 kevent64 + 24
1   libdispatch.dylib               0x3a6e8df8 0x3a6e5000 + 15864

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x3a7bceb4 mach_msg_trap + 20
1   CoreFoundation                  0x32626040 0x3258f000 + 618560
2   CoreFoundation                  0x32624da0 0x3258f000 + 613792
3   CoreFoundation                  0x32597eb8 CFRunLoopRunSpecific + 352
4   CoreFoundation                  0x32597d48 CFRunLoopRunInMode + 104
5   WebCore                         0x38585500 0x3857b000 + 42240
6   libsystem_c.dylib               0x3a726310 0x3a715000 + 70416

Thread 3:
0   libsystem_kernel.dylib          0x3a7cd6a4 __semwait_signal + 24
1   Foundation                      0x32f0ac60 0x32eb7000 + 343136
2   TestApplication                          0x0031c9c0 -[KSCrashDeadlockMonitor runMonitor] + 244
3   Foundation                      0x32f67e80 0x32eb7000 + 724608
4   libsystem_c.dylib               0x3a726310 0x3a715000 + 70416

Thread 4 name:  KSCrash Exception Handler (Secondary)
Thread 4:
0   libsystem_kernel.dylib          0x3a7bceb4 mach_msg_trap + 20
1   TestApplication                          0x00318b50 ksmachexc_i_handleExceptions + 124
2   libsystem_c.dylib               0x3a726310 0x3a715000 + 70416

Thread 5 name:  KSCrash Exception Handler (Primary)
Thread 5:

Thread 6 name:  com.domain.NSURLConnectionLoader
Thread 6:
0   libsystem_kernel.dylib          0x3a7bceb4 mach_msg_trap + 20
1   CoreFoundation                  0x32626040 0x3258f000 + 618560
2   CoreFoundation                  0x32624da0 0x3258f000 + 613792
3   CoreFoundation                  0x32597eb8 CFRunLoopRunSpecific + 352
4   CoreFoundation                  0x32597d48 CFRunLoopRunInMode + 104
5   Foundation                      0x32ee43d0 0x32eb7000 + 185296
6   Foundation                      0x32f67e80 0x32eb7000 + 724608
7   libsystem_c.dylib               0x3a726310 0x3a715000 + 70416

Thread 7 name:  com.domain.CFSocket.private
Thread 7:
0   libsystem_kernel.dylib          0x3a7cd594 select$DARWIN_EXTSN + 20
1   libsystem_c.dylib               0x3a726310 0x3a715000 + 70416

Thread 8 name:  JavaScriptCore::BlockFree
Thread 8:
0   libsystem_kernel.dylib          0x3a7cd08c __psynch_cvwait + 24
1   libsystem_c.dylib               0x3a71eaa0 pthread_cond_timedwait + 40
2   JavaScriptCore                  0x36540c70 _ZN3WTF15ThreadCondition9timedWaitERNS_5MutexEd + 104
3   JavaScriptCore                  0x36652550 0x364e5000 + 1496400
4   JavaScriptCore                  0x36664fa8 0x364e5000 + 1572776
5   libsystem_c.dylib               0x3a726310 0x3a715000 + 70416

Thread 9:
0   libsystem_kernel.dylib          0x3a7cdd98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a71ba10 0x3a715000 + 27152

Thread 10 name:  Dispatch queue: com.domain.root.high-priority
Thread 10 Crashed:
0   libicucore.A.dylib              0x39e5e570 ucol_getVersion + 0
1   TextInput                       0x37d741b0 _ZN2KB8WordTrie4loadERKNS_6StringE + 280
2   TextInput                       0x37d6d698 0x37d35000 + 231064
3   TextInput                       0x380de2f8 0x37d35000 + 3838712
4   TextInput                       0x380de298 0x37d35000 + 3838616
5   TextInput                       0x37d65170 _ZN14TIInputManager17load_dictionariesERKN2KB6StringES3_b + 20
6   TextInput                       0x37d761c8 0x37d35000 + 266696
7   TextInput                       0x37d75e08 0x37d35000 + 265736
8   UIKit                           0x3454ffd0 0x34456000 + 1023952
9   UIKit                           0x3454f018 0x34456000 + 1019928
10  UIKit                           0x3454ec28 0x34456000 + 1018920
11  UIKit                           0x3454d500 0x34456000 + 1012992
12  UIKit                           0x3454d1f0 0x34456000 + 1012208
13  UIKit                           0x345afa48 0x34456000 + 1415752
14  UIKit                           0x345ac918 0x34456000 + 1403160
15  UIKit                           0x345ac618 0x34456000 + 1402392
16  UIKit                           0x345ab018 0x34456000 + 1396760
17  UIKit                           0x345aae40 0x34456000 + 1396288
18  UIKit                           0x345aa780 0x34456000 + 1394560
19  TestApplication                          0x00155e90 -[TestApplicationRequestInfoController showScanAlertForErrorType:Barcode:] + 2380
20  TestApplication                          0x00151c48 -[TestApplicationRequestInfoController showAlertForErrorType:Barcode:] + 72
21  TestApplication                          0x001fe090 -[TestApplicationBOPISOrdersScanningController processFirstNonSerialNumberScan:] + 3788
22  TestApplication                          0x0020dd38 -[TestApplicationScanController processScanInfo] + 3512
23  TestApplication                          0x0020cf38 __39-[TestApplicationScanController startScanThread]_block_invoke + 44
24  libdispatch.dylib               0x3a6e7118 0x3a6e5000 + 8472
25  libdispatch.dylib               0x3a6f5258 0x3a6e5000 + 66136
26  libdispatch.dylib               0x3a6f53b8 0x3a6e5000 + 66488
27  libsystem_c.dylib               0x3a71ba10 0x3a715000 + 27152

Thread 11:
0   libsystem_kernel.dylib          0x3a7bceb4 mach_msg_trap + 20
1   CoreFoundation                  0x32626040 0x3258f000 + 618560
2   CoreFoundation                  0x32624da0 0x3258f000 + 613792
3   CoreFoundation                  0x32597eb8 CFRunLoopRunSpecific + 352
4   CoreFoundation                  0x32597d48 CFRunLoopRunInMode + 104
5   Foundation                      0x32ebaf90 0x32eb7000 + 16272
6   Foundation                      0x32ec3d50 0x32eb7000 + 52560
7   TestApplication                          0x002cc288 -[CommStream runLoopThread:] + 704
8   Foundation                      0x32f67e80 0x32eb7000 + 724608
9   libsystem_c.dylib               0x3a726310 0x3a715000 + 70416

Thread 12:
0   libsystem_kernel.dylib          0x3a7cd594 select$DARWIN_EXTSN + 20
1   Foundation                      0x32f67e80 0x32eb7000 + 724608
2   libsystem_c.dylib               0x3a726310 0x3a715000 + 70416

Thread 13:
0   libsystem_kernel.dylib          0x3a7bceb4 mach_msg_trap + 20
1   CoreFoundation                  0x32626040 0x3258f000 + 618560
2   CoreFoundation                  0x32624da0 0x3258f000 + 613792
3   CoreFoundation                  0x32597eb8 CFRunLoopRunSpecific + 352
4   CoreFoundation                  0x32597d48 CFRunLoopRunInMode + 104
5   Foundation                      0x32ebaf90 0x32eb7000 + 16272
6   Foundation                      0x32ec3d50 0x32eb7000 + 52560
7   TestApplication                          0x002cc288 -[CommStream runLoopThread:] + 704
8   Foundation                      0x32f67e80 0x32eb7000 + 724608
9   libsystem_c.dylib               0x3a726310 0x3a715000 + 70416

Thread 14:
0   libsystem_kernel.dylib          0x3a7cd594 select$DARWIN_EXTSN + 20
1   Foundation                      0x32f67e80 0x32eb7000 + 724608
2   libsystem_c.dylib               0x3a726310 0x3a715000 + 70416

Thread 15:
0   libsystem_kernel.dylib          0x3a7cdd98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a71ba10 0x3a715000 + 27152

Thread 10 crashed with ARM Thread State:
    r0: 0x00000000     r1: 0x05fe1320     r2: 0x00000001     r3: 0x00000001 
    r4: 0x03000000     r5: 0x07000000     r6: 0x05a1c000     r7: 0x05fe1394 
    r8: 0x05fe14d8     r9: 0x00000000    r10: 0x37d5f865    r11: 0x05fe14c8 
    ip: 0x3be8e2bc     sp: 0x05fe1300     lr: 0x37d74427     pc: 0x39e5e570 
  cpsr: 0x20000030 

CrashDoctor Diagnosis: Attempted to dereference garbage pointer 0xcc.
Originated at or in a subcall of -[TestApplicationRequestInfoController showScanAlertForErrorType:Barcode:] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:42:00.167

看看线程 10：

这些功能之一可能会出现问题：

```
19  TestApplication                          0x00155e90 -[TestApplicationRequestInfoController showScanAlertForErrorType:Barcode:] + 2380
20  TestApplication                          0x00151c48 -[TestApplicationRequestInfoController showAlertForErrorType:Barcode:] + 72
21  TestApplication                          0x001fe090 -[TestApplicationBOPISOrdersScanningController processFirstNonSerialNumberScan:] + 3788
22  TestApplication                          0x0020dd38 -[TestApplicationScanController processScanInfo] + 3512
23  TestApplication                          0x0020cf38 __39-[TestApplicationScanController startScanThread]_block_invoke + 44 
```

仔细检查它们。或者在它们处设置断点，然后重新运行程序，看看程序执行这些函数时会发生什么..

希望这会有所帮助......只是一个开始......

请记住，没有随机崩溃。这些崩溃是由于代码中的错误造成的。

# sql-server - SSMS 中 DoubleClick 的 SSMS 键盘快捷键

> ID：15818784
> 
> 赞同：0
> 
> 时间：2013-04-04T18:21:23.510
> 
> 标签：sql-server, ssms

是否有相当于双击鼠标的键盘快捷键，它仅突出显示括号或引号等中的单词（例如： (TestColumn) 并突出显示 SSMS 中的 TestColumn ）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:29:16.390

没有“双击”快捷方式。然而，有一些东西会让你接近：`[Ctrl]-[Arrow Left]`让你到当前单词的开头。`[Ctrl]-[Shift]-[Arrow Right]`然后突出显示当前单词。

有两个警告：

1.  如果从第一个字母`[Ctrl]-[Arrow Left]`开始会跳到前一个单词的开头
2.  如果单词后面的第一个字符是空格，它也会被选中。

# ios - iOS 自定义字体显示在模拟器上，但不显示在设备上

> ID：15818785
> 
> 赞同：4
> 
> 时间：2013-04-04T18:21:24.323
> 
> 标签：ios, xcode, xcode4

我在我的 iOS 应用程序中使用自定义字体

```
//Label which will display the current message
currentMessageLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 75, 300, 30)];
[currentMessageLabel setBackgroundColor:[UIColor clearColor]];
currentMessageLabel.font = [UIFont fontWithName:@"Baroque Script" size:24];
currentMessageLabel.textColor = [UIColor redColor];
currentMessageLabel.textAlignment = UITextAlignmentCenter;
[self.view addSubivew:currentMessageLabel]; 
```

我已将字体名称添加到 Info.plist 文件中，手动将文件复制到捆绑资源中。它可以在模拟器上运行，但是当我在 iPhone 5 上运行该应用程序时，它根本不显示。我该如何解决 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:36:12.557

尝试更改名称

```
@"Baroque Script" 
```

到

```
@"BaroqueScript" 
```

（没有空格）。

我有类似的问题，并通过这样做解决了。可能或可能不会为您工作。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T20:06:14.593

这可能是因为您的字体没有被复制到您的项目中（而是被引用）。因此，当您通过设备运行时，它无法找到计算机上某处的字体。

执行以下步骤 1) 从项目中删除您的字体。2）拖放到您的项目并检查复制项目并添加到目标。

如果你不能理解上面的过程。查看[http://www.codigator.com/tutorials/using-custom-fonts-in-ios-application/](http://www.codigator.com/tutorials/using-custom-fonts-in-ios-application/)并查看将字体添加到您的项目部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T13:38:23.777

伙计，这将打印所有字体名称，你只需要复制确切的字体名称

NSArray *familyNames = [[NSArray alloc] initWithArray:[UIFont familyNames]];

```
NSArray *fontNames;
NSInteger indFamily, indFont;
for (indFamily=0; indFamily<[familyNames count]; ++indFamily)
{
    NSLog(@"Family name: %@", [familyNames objectAtIndex:indFamily]);
    fontNames = [[NSArray alloc] initWithArray:
                 [UIFont fontNamesForFamilyName:
                  [familyNames objectAtIndex:indFamily]]];
    for (indFont=0; indFont<[fontNames count]; ++indFont)
    {
        NSLog(@"    Font name: %@", [fontNames objectAtIndex:indFont]);
    }
} 
```

# node.js - 未定义的猫鼬查询

> ID：15818789
> 
> 赞同：2
> 
> 时间：2013-04-04T18:21:36.110
> 
> 标签：node.js, mongoose

我正在尝试使用 mongoose 构造一个与此 SQL 等效的查询：

```
select * from problems where tutorialNumber is not null 
```

我试过了：

```
 var q = Problem.find().where('tutorialNumber').ne(undefined);
    q.exec(callback); 
```

它返回一个错误： CastError: Cast to string failed for value "undefined" at path "tutorialNumber"

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T21:58:28.860

感谢您的回复。我找到了另一种方法：

```
var q = Problem.find().exists('tutorialNumber', true);
q.exec(callback); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:32:24.097

有几个语法选项。我相信你的代码是好的，除了你应该使用`null`而不是`undefined`. 我更喜欢更接近普通 mongo shell 的风格：

```
Problem.find({tutorialNumber: {$ne: null}}, callback); 
```

或者你可以做

```
Problem.find().ne('tutorialNumber', null).exec(callback); 
```

但我相信你使用的方式`where`也是`ne`正确的。

但是，这`CastError`可能意味着您的架构中存在问题（可能是尝试嵌套模型而不是嵌套架构）。

# dll - 与特定的 COM DLL 交互

> ID：15818794
> 
> 赞同：0
> 
> 时间：2013-04-04T18:21:56.060
> 
> 标签：dll, com

我正在尝试与 .dll 进行交互，这将允许我从各种设备（具体为 Eye Gaze）接收信息。.dll 称为 ETUDriver，可在[http://www.sis.uta.fi/~csolsp/projects.php](http://www.sis.uta.fi/~csolsp/projects.php)找到，但它没有随附的 .h 文件。

我正在努力从 .dll 实际加载、交互和调用函数。提供了手册，但对于实际设置代码以启动它没有任何帮助。随附三个示例应用程序（带有源代码），但其中只有两个可以工作，其中一个是 C# 中的，因此没有帮助。但是，可以通过 MFC 加载 .dll 的那个，这对于我的代码来说不是一个可行的选项（它旨在与许多其他项目一起使用，因此不能强制执行 MFC 或任何其他不作为标准的库到项目）。

本质上，.dll 中有一系列类，我需要在我的代码中创建这些类并调用该类的相关函数。

我尝试过使用，`HRESULT hr = CoInitialize(NULL); hr = CoCreateInstance(__uuidof(ETUDSink), NULL, CLSCTX_INPROC, __uuidof(IETUDSink), (LPVOID*)&pETUDSink); if(pETUDSink) { pETUDSink->Start(); }`但是它总是返回一个错误，说明该类未注册。我不能使用 MFC 来调用相关的 .rgs 文件，并且完全不知道如何让它工作。

是否有一种我不知道的给定格式，并且有没有人有使用 ETUDriver 的经验（或者能够在不使用 MFC 的情况下使其在 C++ 中工作）？

感谢您在此主题上提供的任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:40:26.843

我不熟悉有问题的特定 DLL，但听起来你没有在目标机器上注册 DLL。您可以通过运行[regsvr32.exe](http://technet.microsoft.com/en-us/library/bb490985.aspx)或调用 DLL 的导出[DllRegisterServer](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682162%28v=vs.85%29.aspx)函数或使用[并行程序集](http://msdn.microsoft.com/en-us/library/ms229072%28v=vs.80%29.aspx)来完成此操作。您需要在每台需要利用其中的 COM 功能的机器上注册 DLL，因此当您分发应用程序时，如果您使用 regsvr32.exe 路由，请确保安装程序注册 DLL。

您可以使用 Microsoft Visual C++ 中的[#import 指令](http://msdn.microsoft.com/en-us/library/8etzzkb6%28v=vs.80%29.aspx)来加载包含在 DLL 中的信息，而无需使用头文件或根据文档自行重写。

# datagridviewtextboxcell - 在c#中如何在运行时保存动态添加的文本框？

> ID：15818796
> 
> 赞同：0
> 
> 时间：2013-04-04T18:22:02.453
> 
> 标签：datagridviewtextboxcell

如何在运行时在项目中保存动态添加的文本框？

我添加了这样的文本框，我想将它们保存到我的项目中。

```
int x = 10;
        int y = 20;
        for (int i = 1; i <= 5; i++)
        {
            TextBox a = new TextBox();
            a.Location = new Point(x, y);
            y += 30;
            a.Name = "1";
            a.Text = "2";
            this.Controls.Add(a);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:26:39.487

我不知道您是否可以将它们保存在您的“项目”中，但您可以将动态信息序列化为任何类型的数据存储（XML、数据库等），并每次使用该信息初始化您的应用程序开始。抱歉，如果这不能回答您的问题。

# java - Java按位运算

> ID：15818800
> 
> 赞同：6
> 
> 时间：2013-04-04T18:22:15.927
> 
> 标签：java

我有这行代码

```
int b1 = 0xffff & (content[12]<<8 | 0xff & content[11]); 
```

我有一个小端字节数组（内容 []），需要重新创建一个 2 字节值。这段代码可以很好地完成工作，但在测试之前我已经这样写了

```
int b1 = 0xffff & (content[12]<<8 | content[11]); 
```

结果不对。我的问题是为什么在这种情况下需要 0xff ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T18:26:11.267

这`0xff`是必要的，因为有两个因素的汇合：

1.  Java 中的所有整数类型都是有符号的
2.  所有位运算符在执行之前将其参数提升为`int`（或`long`，如果需要）。

结果是，如果 的高位`content[11]`被设置，它将被符号扩展为负值`int`。然后，您需要将`&`其`0xff`返回为（正）字节值。否则，当您`|`使用 的结果时`content[12]<<8`，高位字节将全为 1。

# vba - 在访问子表单中显示来自选定列表框的查询

> ID：15818803
> 
> 赞同：3
> 
> 时间：2013-04-04T18:22:32.930
> 
> 标签：vba, ms-access, ms-access-2010

在 Access 2010 中，我试图让表单在子表单中显示一个查询`QueriesSubForm`，当从列表框中选择该查询时`QueryListBox`，然后单击按钮`runbtn`。它应该在链接的子表单中显示查询，并在您从列表框中选择的不同选项再次执行整个步骤时更改并单击按钮。

目前我只能让它工作，如果我希望它在新的任务窗口中显示查询，当这样编程时：

QueriesListBox 列表框 - SQL 视图

```
SELECT MSysObjects.[Name]
FROM MSysObjects
WHERE (((MSysObjects.[Type])=5) AND ((Left([Name],1))<>"~"))
ORDER BY MSysObjects.[Name]; 
```

runbtn 按钮 - VBA 视图

```
Private Sub runbtn_Click()
DoCmd.OpenQuery QueryListBox, acViewNormal
End Sub 
```

它可以工作并且似乎只是从查询列表中打开一个查询并将其显示给我，这是我不想要的。

这可能是一件容易的事情，但我看不出它是如何使用 SQL、VBA 或宏完成的，我猜这需要它才能工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T21:22:24.167

好的，这是一种方法。首先确保您的子表单设置为没有源对象。然后像这样设置你的按钮点击：

```
Private Sub runbtn_Click()
    Me.QueriesSubForm.SourceObject = "Query." & QueryListBox.Value
End Sub 
```

这应该会给你你正在寻找的结果。或者，如果您希望您的表单在打开时显示某个查询，您可以将子表单的源对象设置为该查询。使用属性窗口找到源对象下拉列表并找到您要在表单打开时显示的查询。

# java - 在迷宫游戏中添加时间限制

> ID：15818804
> 
> 赞同：0
> 
> 时间：2013-04-04T18:22:35.337
> 
> 标签：java

我正在用 Java 制作迷宫游戏。我做了一个迷宫板，一个起点和一个终点。当我到达终点时，它退出并显示获胜信息。但我不能添加时间限制。假设玩家必须在 30 秒内到达终点，否则他输掉比赛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:42:30.213

开始游戏时获取当前系统时间：
`long startTime = System.currentTimeMillis();`

每次您的刻度/更新方法发生时都会检查经过了多少时间：
`long elapsedTime = System.currentTimeMillis() - startTime;`

elapsedTime 以毫秒为单位保存经过的时间，以秒为单位获得经过的时间，只需将其除以 1000：
`elapsedTime\= 1000;`

现在您可以查看自游戏开始以来经过了多少时间，
例如： `if(elapsedTime >= 30) running = false;`

请记住，这是最简单的实现，只是为了让您了解如何在 Java 中完成它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:32:54.397

`System.currentTimeMillis();`// 以毫秒为单位返回当前时间...

//在游戏开始时保存时间，将保存的时间与当前时间进行比较...当 x 时间过去...做某事...

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#currentTimeMillis()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#currentTimeMillis())

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T18:38:37.257

您基本上必须创建一个单独的线程来处理时间计数器。要查看如何创建线程，您可以参考

[http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)

在此之后，您需要在单独的线程上运行游戏并在另一个线程上计数器。要制作时间计数器，您可以从上一篇文章中获得帮助。

[如何计算在 Java 中完成一个函数所需的时间？](https://stackoverflow.com/questions/692569/how-can-i-count-the-time-it-takes-a-function-to-complete-in-java)

# ios - 使用 Xcode 构建应用程序时，如何从头开始构建它？

> ID：15818807
> 
> 赞同：0
> 
> 时间：2013-04-04T18:22:50.730
> 
> 标签：ios, xcode, compilation

我想从头开始构建我的应用程序。我想出如何做到这一点的唯一方法是从 iPhone/iPad 本身中删除它，但这似乎相当可行。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:25:37.870

清理项目（Shift + command + k）或重置模拟器设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:24:12.830

在管理器中，单击项目->您的项目，然后删除派生数据。或者，您可以清理项目（shift+command+k）。这摆脱了构建的产品，下次构建或运行它时，Xcode 会重新编译它。

# spell-checking - 谷歌拼写检查

> ID：15818816
> 
> 赞同：0
> 
> 时间：2013-04-04T18:23:24.497
> 
> 标签：spell-checking, spelling

我无法访问位于此地址的 Google 拼写检查服务：

[https://www.google.com/tbproxy/spell](https://www.google.com/tbproxy/spell)

还有其他人有这个问题吗？当我尝试连接时，我不断收到“坏网关”。我很确定该服务已离线。

有什么消息吗？我知道谷歌云端硬盘几周前出现了同样的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:28:02.953

我也有这个问题。我得到一个`503 Server Error`. 问题肯定在谷歌的一端。（注意我在 Safari 6.0.3 上）

在具体...

```
503\. That's an error.  

The service you requested is not available at this time.

Service error -27\. That’s all we know. 
```

谷歌似乎在他们的服务上遇到了一些问题。希望他们尽快修复它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T17:46:59.683

您可以在 Java 代码下方尝试此操作。这不需要任何 API 密钥。但请注意，如果您经常运行它，它将停止工作，因为 google 会阻止 IP 地址进行未来的调用。您可以在小型数据集上使用它。不是理想的解决方案，但如果它是一些在一段时间内运行的批处理作业的一部分，那么这种方法可能对您来说是可以接受的。

```
public static String getSpellCheckedText(String Text) throws Exception {
    String google = "http://www.google.com/complete/search?output=toolbar&q=";
    String search = Text;
    String charset = "UTF-8";

    String spellCheckedText = Text;
    URL url = new URL(google + URLEncoder.encode(search, charset));
    Reader reader = new InputStreamReader(url.openStream(), charset);
    BufferedReader bufReader = new BufferedReader(reader);
    String line = bufReader.readLine();
    StringBuffer sBuffer = new StringBuffer();
    while (line != null) {
        sBuffer.append(line).append("\n");
        line = bufReader.readLine();
    }
    String content = sBuffer.toString();

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    InputSource is = new InputSource(new StringReader(content));
    Document document = builder.parse(is);
    NodeList nodeList = document.getElementsByTagName("suggestion");
    if (nodeList != null && nodeList.getLength() > 0) {
        org.w3c.dom.Node elm = nodeList.item(0);
        if (elm.getNodeType() == Node.ELEMENT_NODE) {
            Element suggestionElement = (Element)elm;
            String suggestedString = suggestionElement.getAttribute("data");
            if (suggestedString != null && suggestedString.trim().length() != 0) {
                spellCheckedText = suggestedString.trim();
                System.out.println(Text + " => "+ spellCheckedText);
            }
        }
    }
    return spellCheckedText;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T21:22:22.313

同上，这里。我真的依靠它来检查文本框中的拼写。它显示“无法连接到 Google 拼写服务器。请检查您的互联网连接并重试”

# mysql - 将字符串插入到没有“”的准备好的语句中

> ID：15818819
> 
> 赞同：6
> 
> 时间：2013-04-04T18:23:34.053
> 
> 标签：mysql, sql, prepared-statement

我有以下 sql 语句：

```
Select i.imageID, theImage, translationRating
From images i
inner join translationchains  t
on t.imageId = i.imageid
where i.userID=(someUserID) And i.translated =0 
and t.targetLang in (select targetLang from translationChains) 
```

我想让它成为一个准备好的语句，以便在我的 java 代码中使用：

```
Select i.imageID, theImage, translationRating
From images i
inner join translationchains  t
on t.imageId = i.imageid
where i.userID=? And i.translated =0 
and t.targetLang in (select ? from translationChains) 
```

第一个输入？是一个用户 ID（整数），它工作正常。

第二个输入是一个包含 languageId 的字符串 - 它是一个包含表示语言的数字的字符串，或者是列名称的字符串“targetLang”（=所有语言）

在我的java代码中，我做了以下事情：

```
Image.setInt(1, userID);
Image.setString(2, langID);
Image.executeQuery() 
```

我的问题是，当我将字符串“targetLang”作为第二个参数发送时，准备好的语句将其插入为“targetLang”（带有“之前和之后”），使用数字这不是问题，因为 3='3'，但是使用字符串，它给了我与我需要的不同的结果——我总是得到一个空的结果集，因为没有什么等于'targetLang'。我需要将此字符串插入到没有 '. 是否有可能或者我需要使用与准备好的语句不同的东西？

我知道我可以构建一个包含所有这些查询的字符串，但我正在寻找更优雅的 tnx

* * *

*编辑：*

这是创建表翻译链：

```
Create Table if not exists TranslationChains (
  ImageID int (10) NOT NULL,  
  SourceLang int NOT NULL,
  TargetLang int NOT NULL,
  Translated tinyint default 0,
  Translation text,
  Translator varchar (30),
  CONSTRAINT translate_image PRIMARY KEY (ImageID,SourceLang, TargetLang),
  FOREIGN KEY (ImageID) REFERENCES Images(ImageID) ON DELETE CASCADE,
  FOREIGN KEY (SourceLang) REFERENCES Languages(languageID) ON DELETE CASCADE,
  FOREIGN KEY (TargetLang) REFERENCES Languages(languageID) ON DELETE CASCADE) 
```

如您所见，我正在尝试根据作为 int 列的“targetLang”列拍摄图像。每个数字代表一种语言。

现在我有两个选项可以从该表中选择图像：

*   选择一种特定的语言，即给出一个数字作为第二个输入。
*   选择所有语言，即将第二个输入设置为列名“targetLang”。

所以我不比较固定字符串“targetLang”。我想为此列选择所有可能的值（从 translationChains 中选择 targetLang）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:54:29.907

查询参数只能代替文字值——即通常放置带引号的字符串文字、带引号的日期文字或数字文字的位置。因此，字符串值将*始终*被解释为字符串文字，就好像您已使用单引号将其放入查询中一样。

对于列名、表名、SQL 表达式、SQL 关键字等，您必须在调用 prepare() 之前将这些值插入到 SQL 查询中。

为了安全起见，请使用*白名单*，这样用户输入就不会被逐字插入 SQL 查询中。始终在查询中使用用户输入（或任何其他内容）之前对其进行验证。

在构建 SQL 查询时，我[编写了许多](https://stackoverflow.com/search?q=user:20860%20whitelist)白名单示例。

您还可以在我的演示文稿[SQL Injection Myths and Fallacies](http://www.slideshare.net/billkarwin/sql-injection-myths-and-fallacies)和我的书[SQL Antipatterns: Avoiding the Pitfalls of Database Programming](http://pragprog.com/book/bksqla/sql-antipatterns)中看到示例。

* * *

回复您的评论：

我不确定你在做什么。听起来您要么想`t.targetLang`等于一个文字数字，要么等于一个固定的字符串`'targetLang'`。如果是这样，我根本不知道您为什么要进行子查询-您应该只使用查询参数作为值：

```
where i.userID = ? And i.translated = 0 
and t.targetLang = ?

Image.setString(2, langID); // either '3' or 'targetLang' 
```

但我不确定我是否完全理解你的描述。该数字是否代表您要比较的列的位置？与 t.targetLang 在同一行？如果是这样，我仍然认为您不需要子查询。您可以使用如下表达式：

```
where i.userID = ? And i.translated = 0 
and FIELD(t.targetLang, t.targetLang, t.column2, t.column3, t.column4) = ?

Image.setString(2, '1'); // for the case where you allow all langs
Image.setString(2, '3'); // for the case where you want to match a specific column. 
```

[请参阅 MySQL 中FIELD()](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_elt)函数的手册，该函数在表达式列表中搜索第一个参数。它返回匹配字段的整数位置。

使用此方法，您可以传递您希望 t.targetLang 匹配的位置，这允许您将动态部分作为值而不是列名传递。它还允许您避免子查询。

如果我仍然错了并且不理解您的问题，请编辑您的原始问题并提供更多详细信息。 `SHOW CREATE TABLE translationChains`有助于。您还可以回答我必须做出假设的一些事情，例如，您是否尝试将 t.targetLang 与*同一行*另一列中的值进行匹配？

* * *

好的，现在我更好地理解了你的目标。这是一个执行您想要的查询的查询：

SELECT i.imageID, theImage, translationRating FROM Images i INNER JOIN TranslationChains t ON t.imageId = i.imageid WHERE i.userID = ? AND i.translated = 0 AND ? IN (t.targetLang, 'targetLang')

您可以将整数作为第二个参数传递以匹配 t.targetLang，或者将文本字符串 'targetLang'`'targetLang`与谓词中的值 ' 匹配。

不过，我不能推荐这个解决方案，因为它可能不会很好地使用索引，它可能必须通过将字符串参数与整数列进行比较来执行类型转换。

当您想要匹配所有语言时，更好的做法是在 WHERE 子句中*不带*最后一项的情况下执行查询。也就是说，在您的应用程序中，有条件地附加该术语，仅当您希望查询获取特定语言时。否则，省略该术语并跳过`Image.setString()`.

```
String sql = "SELECT i.imageID, theImage, translationRating
FROM Images i
INNER JOIN TranslationChains t
  ON t.imageId = i.imageid
WHERE i.userID = ? AND i.translated = 0 ";

if (langId) {
  sql += " AND ? IN (t.targetLang, 'targetLang')";
}

. . .

Image.setInt(1, userID);
if (langId) {
  Image.setString(2, langID);
}
Image.executeQuery() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:15:59.347

你可以改变：

> 和 t.targetLang in (select ? from translationChains)

到：

```
and (
        (
            ? = 'targetLang' and
            t.targetLang in (
                                    select
                                        targetLang
                                    from
                                        translationChains
                            )
        )
        or
        ? = t.targetLang
    ) 
```

并设置setString(3,langId)，即使第三个参数与第二个相同。无论如何，据我所知，这更优雅或更有效，但应该可行！

# requirejs - 在 Durandal 中加载 jwplayer

> ID：15818823
> 
> 赞同：1
> 
> 时间：2013-04-04T18:23:39.450
> 
> 标签：requirejs, jwplayer, durandal

我想在使用[Durandal](http://durandaljs.com/)框架构建的单页应用程序上使用 jwplayer。这个想法是创建一个不受应用程序导航影响的持久音频播放器。但我无法在 Durandal 中加载 jwplayer。

我已经[使用 Require.js 在一个简单的 html 文件中成功加载了 jwplayer](https://stackoverflow.com/questions/15713887/loading-jwplayer-js-using-require-js)。但是这种方法似乎不适用于 Durandal（也使用 Require.js）。

这是我在**shell.js**上的代码：

```
define(['jwplayer/jwplayer','durandal/plugins/router','durandal/app'], function (jwplayer,router,app) {

  jwplayer.api('player').setup({
    width: '320',
    height: '40',
    sources: [{
        file: "rtmp://127.0.0.1:1935/vod/mp3:sample_1.mp3"
    },{
        file: "http://127.0.0.1:1935/vod/sample_1.mp3/playlist.m3u8"
    }]
  });

  return {
    router: router,
    activate: function () {
        ...
    }
  }; 
}); 
```

在**shell.html**里面我有这个代码：`<div id="player">loading player...</div>`

这是我收到的错误消息：

```
Uncaught TypeError: Cannot read property 'id' of null jwplayer.js:37 
```

似乎该`player`元素在 Durandal 模块中无法识别。是什么导致了这个问题？如何在 Durandal 模块中添加 jwplayer？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:50:05.170

正如您已经发现的那样，在执行代码时似乎无法识别播放器元素。当模块第一次加载时，DOM 肯定还没有准备好。在 activate() 回调函数期间，它甚至可能还没有准备好。设置 jwplayer 的正确时间可能在 viewAttached() 回调中。

您可以在“组合回调”部分中阅读有关 viewAttached 回调的更多信息：http: [//durandaljs.com/documentation/Hooking-Lifecycle-Callbacks/](http://durandaljs.com/documentation/Hooking-Lifecycle-Callbacks/)

像这样的东西：

```
define(['jwplayer/jwplayer','durandal/plugins/router','durandal/app'], function (jwplayer,router,app) {

  return {
    router: router,
    activate: function () {
        ...
    },
    viewAttached: function(){
      jwplayer.api('player').setup({
        width: '320',
        height: '40',
        sources: [{
            file: "rtmp://127.0.0.1:1935/vod/mp3:sample_1.mp3"
        },{
            file: "http://127.0.0.1:1935/vod/sample_1.mp3/playlist.m3u8"
        }]
      });
    }
  }; 
}); 
```

# css - 如何修复IE（9）和Chrome之间的垂直溢出

> ID：15818826
> 
> 赞同：0
> 
> 时间：2013-04-04T18:24:05.657
> 
> 标签：css, html, overflow

完整的小提琴：http: [//jsfiddle.net/kenyu73/TqLH4/3/](http://jsfiddle.net/kenyu73/TqLH4/3/)

我经历了很多溢出帖子，似乎与浏览器版本和浏览器版本一样多的解决方案！

我试过使用 Height:100%; 溢出：隐藏；在所有父元素上。（， ， ETC）

如果我设置我的 (row4 > td) = 75% 左右，溢出显然消失了。

想法、建议？

谢谢！

```
#row0,#row1,#row2,#row3{
    height: 1%;
}
#row4{
}
#row4 > td{
    height: 100%; /*** UGH, todo...***/
    overflow: hidden;
}

#divContainer{
    height: 100%; /*** UGH, todo...***/
    border: 1px solid #C8C8C8;
    margin: 2px;
    overflow: auto;
} 
```

.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

.

```
<tr id="row4">
    <td>
        <div id="divContainer">
            <div class="results" id="div_search_results"></div>
            <div class="results" id="div_content_results"></div>
            <div class="results" id="div_top_results"></div>
        </div>
    </td>
    <td>
        <div id="divContainer">
            <div id="div_contents"></div>
        </div>
    </td>
</tr> 
```

IE9 - Blah --> 获取“浏览器”滚动条，因为正文离开页面！

![IE9 溢出：隐藏不工作](https://i.stack.imgur.com/Smo4W.jpg)

铬 - 完美！

![铬溢出确定](https://i.stack.imgur.com/cpz9J.jpg)

# javascript - 你如何命名一个函数以便你可以内省它？

> ID：15818830
> 
> 赞同：1
> 
> 时间：2013-04-04T18:24:17.553
> 
> 标签：javascript

我想编写一个例程，在调用时将函数的名称附加到#trace：

```
;(function($, window, undefined) {
    var dom = {};
    var myObject = {};
    myObject.myFunction = {
        trace('myObject.myFunction');
        // function logic goes here
    }

    dom.trace = $('#trace');
    var trace = function(value) {
        dom.trace.append(value + '<br>'));
    }

    $(document).on('click','#Save',myObject.myFunction)
})(jQuery, window); 
```

在我汇总的这个小小的概念验证中，我知道我可能做错了 12 件事。

但这是我的问题的重点：

问：你如何命名一个函数以便它可以自省？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T14:32:13.573

来自[http://www.learnjquery.org/tutorials/](http://www.learnjquery.org/tutorials/)：

```
function show_props(a,b,c,d,e)
{
   var msg = "function name = " + arguments.callee.name + "\n";
   msg += "called from = " + show_props.caller.name + "\n";
   msg += "arguments.length = " + arguments.length + " argument(s) were passed.\n"
   msg += "show_props.length (arity) = " + show_props.length + " argument(s) are defined total.\n";
   msg += "arguments = " + arguments +  "\n";
   for (var i = 0; i < arguments.length; i++)
       msg += "arguments[" + i + "] = " + arguments[i] + "\n";

   msg += "And arguments.callee.toString() is the function's literal body in string format = \n" + arguments.callee.toString() + "\n";

   alert(msg);
}

function parent()
{
   show_props(1,2,3);
}

parent();

The result is shown below:

function name = show_props
called from = parent
arguments.length = 3 argument(s) were passed.
show_props.length (arity) = 5 argument(s) are defined total.
arguments = [object Arguments]
arguments[0] = 1
arguments[1] = 2
arguments[2] = 3
And arguments.callee.toString() is the function's literal body in string format = 
function show_props(a,b,c,d,e)
{
   var msg = "function name = " + arguments.callee.name + "\n";
   msg += "called from = " + show_props.caller.name + "\n";
   msg += "arguments.length = " + arguments.length + " argument(s) were passed.\n"
   msg += "show_props.length (arity) = " + show_props.length + " argument(s) are defined total.\n";
   msg += "arguments = " + arguments +  "\n";
   for (var i = 0; i < arguments.length; i++)
       msg += "arguments[" + i + "] = " + arguments[i] + "\n";

   msg += "And arguments.callee.toString() is the function's literal body in string format = \n" + arguments.callee.toString() + "\n";

   alert("msg"); 
```

# excel - What does =++C5 mean in excel?

> ID：15818836
> 
> 赞同：2
> 
> 时间：2013-04-04T18:24:49.807
> 
> 标签：excel, excel-formula

I am looking at a template spreadsheet which, among other things has

```
=++C5*EXP(-C7*C6) 
```

as a formula. What does the `++` in `++C5` do?

If it doesn't do anything, can you think of a reason where it *would* do something? I would be very surprised if the template has mistakes/redundancies.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:29:21.210

It doesn't mean anything. It's exactly the same than to write `=C5*EXP(-C7*C6)`

# java - @Value annotation doesn't return a value

> ID：15818839
> 
> 赞同：2
> 
> 时间：2013-04-04T18:25:00.253
> 
> 标签：java, spring, spring-annotations

I have a class `FichierCommunRetriever` that use the `@Value` annotation of `Spring`. But I am struggling to make it work.

So in my `application.properties` I have :

```
application.donneeCommuneDossier=C\:\\test
application.destinationDonneeCommuneDossier=C\:\\dev\\repertoireDonneeCommune\\Cobol 
```

My class `FichierCommunRetriever` is using those entries with the following code :

```
public class FichierCommunRetriever implements Runnable {

    @Value("${application.donneeCommuneDossier}")
    private String fichierCommunDossierPath;

    @Value("${application.destinationDonneeCommuneDossier}")
    private String destinationFichierCommunDossierPath;
} 
```

We are loading `application.properties` with the following code in the class `ApplicationConfig`:

```
@ImportResource("classpath:/com/folder/folder/folder/folder/folder/applicationContext.xml") 
```

In `ApplicationConfig`, I am defining a `bean` that use `FichierCommunRetriever` in a new thread like that :

```
Thread threadToExecuteTask = new Thread(new FichierCommunRetriever());
threadToExecuteTask.start(); 
```

I suppose that my problem is, since `FichierCommunRetriever` is running in a separate thread, the class can't reach the `applicationContext` and is not able to give a value.

I'm wondering if the annotation would work or I must change the way I'm getting those values?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:37:25.950

In your applicationConfig you should define your bean this way:

```
@Configuration
public class AppConfig {

    @Bean
    public FichierCommunRetriever fichierCommunRetriever() {
        return new FichierCommunRetriever();
    }

} 
```

Then, after Spring loads, you can access you bean via the application context

```
FichierCommunRetriever f = applicationContext.getBean(FichierCommunRetriever.class);
Thread threadToExecuteTask = new Thread(f);
threadToExecuteTask.start(); 
```

Now you are sure that your bean lives inside Spring context and that it is initialized. In addition, in your Spring XML, you have to load the properties (this example uses the context namespace):

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd">

...

<context:property-placeholder location="classpath:application.properties" />

...

</beans> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:37:32.430

You create an instance of FichierCommunRetriever using `new`, instead of asking Spring to return a bean instance. So Spring isn't controlling the creation and injection of this instance.

You should have the following method in your config class, and call it to get the bean instance:

```
@Bean
public FichierCommunRetriever fichierCommunRetriever() {
    return new FichierCommunRetriever();
}

...
     Thread threadToExecuteTask = new Thread(fichierCommunRetriever()); 
```

# php - 如何解决权限错误

> ID：15818841
> 
> 赞同：0
> 
> 时间：2013-04-04T18:25:07.073
> 
> 标签：php, mysql, wamp, config, google-code

我已经[从 google code 下载了 minbill 项目](http://code.google.com/p/minibill/downloads/detail?name=minibill-20080707.zip&can=2&q=)，并尝试在我的 wamp 服务器中运行。但它的 index.php 文件显示错误为，

![在此处输入图像描述](https://i.stack.imgur.com/9GIum.jpg)

项目**config.php**，有

```
/* Path Information */
//session_save_path:Make sure this is read and writable by the webserver user
$config['session_save_path']    = '/tmp';

//template_cache_dir:Make sure this is read and writable by the webserver user
$config['template_cache_dir']   = '/tmp'; 
```

**在 win-7 中无法取消选中：**

另一个问题是，当我取消选中 Window 7 Ultimate 中的只读按钮时，它会发生变化，但当我重新打开属性对话框时，属性仍然保持为蓝色框（如图所示）。但默认属性是蓝框本身。因此，我不认为这是错误的。

服务器：我正在使用 Wamp 服务器。（在那个 MySQL 中）

而且，我有一个名为 /tmp 的目录。 ![在此处输入图像描述](https://i.stack.imgur.com/V9i8C.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:40:32.167

尝试为您的`/tmp`文件夹编写完整路径。

我看到你在 Windows 中所以这应该看起来像`C:\your_project\tmp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:58:08.030

启动 wamp 安装的 FTP 服务器，通过 ftp 客户端连接到它，导航到 /tmp 文件夹并为 /tmp 和子目录授予文件夹权限 777。

# tags - 将项目添加到 DotNetNuke 中的标签类别？

> ID：15818842
> 
> 赞同：0
> 
> 时间：2013-04-04T18:25:08.720
> 
> 标签：tags, dotnetnuke, taxonomy

我知道最近 DNN 中的标签存储在分类表（类别）和 Folksonomy（用户标签）中，好吧，我知道如何从管理设置中添加标签类别，但是我在哪里添加标签本身呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:15:17.400

admin -> taxonomy -> {单击要为其添加术语的词汇表上的编辑铅笔} -> {单击添加术语按钮}

# svn - TortoiseSVN 和 TortoiseHg 服务器：不支持的 OPTIONS 方法

> ID：15818846
> 
> 赞同：1
> 
> 时间：2013-04-04T18:25:21.007
> 
> 标签：svn, tortoisesvn, tortoisehg

我不确定为什么我无法连接到局域网（或本地主机）上的 repo 服务器

我已经让服务器运行，我可以通过浏览器连接到它，但我在客户端上收到此错误：

`Unable to connect to a repository at URL 'http://192.168.1.10:8000' OPTIONS of 'http://192.168.1.10:8000': Error reading response headers: An existing connection was forcibly closed by the remote host.`

和服务器上的这个错误： 我找不到任何信息。
`"OPTIONS / HTTP/1.1" 501 -
code 501, message Unsupported method ('OPTIONS')`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:10:40.047

*   TortoiseSVN （显然）是**Subversion 存储库的客户端**
*   嵌入到 TortoiseHG 服务器允许 http 访问**Mercurial 存储库**

虽然两个 SCM 都可以使用相同的访问层（http:// 协议），但它们通常“使用不同的语言”

简历：您**必须**使用 HG 客户端才能阅读 HG repo

# c# - 组合框选择的值显示系统。数据行无法转换错误

> ID：15818852
> 
> 赞同：0
> 
> 时间：2013-04-04T18:25:40.990
> 
> 标签：c#, winforms, sql-server-2008, combobox

我将 Combobox1 displaymember 中的所有用户名作为用户名，并将 Id 作为值成员。

现在，当我在 Combobox1 中选择一个项目时，我启用了一个具有文本框、3 组合框和更新按钮的组合框。考虑到组合框 1 的值成员获取特定用户并尝试在组框中显示这些详细信息（文本框包含用户名，3 个组合框具有部门名称角色详细信息）。我的数据库表具有外键（部门、名称和角色）。它只返回 3 个组合框值成员而不是显示成员（文本）。我如何链接这些拖链，以便在 Combobox1 中选择用户名时，相应的值应该出现在文本框以及 3 个组合框中。

这是我的代码：

```
 private void cmbBoxUpdateEmployee_SelectedIndexChanged_1(object sender, EventArgs e)
    {
          changecmbBoxValue();

    }     panelupdateEmployee.Visible = true;

    public void changecmbBoxValue()
    {

        try
        {
            textBoxUpdateEmployee.Enabled = true;
            cmbBoxUpdateEmpRoleID.Enabled = true;
            cmbBoxUpdateEmpDepartment.Enabled = true;
            cmbBoxUpdateEmpDesignation.Enabled = true;
            dbobj.Open();
            DataSet ds = new DataSet();
            if (!string.IsNullOrEmpty(cmbBoxUpdateEmployee.SelectedValue.ToString()))
            {
                string cmd = "select Name,RoleId,DepartmentId,DesignationId from tblEmployee where Name='" + cmbBoxUpdateEmployee.SelectedValue+ "'";

      //I get system.Datarow conversion not done error.
                ds = dbobj.ExecuteDataset(cmd);
                if ((ds.Tables[0].Rows.Count) > 0)
                {
                    textBoxUpdateEmployee.Text = Convert.ToString(ds.Tables[0].Rows[0][0].ToString());
                    cmbBoxUpdateEmpRoleID.SelectedIndex = Convert.ToInt32(ds.Tables[0].Rows[0][1].ToString());
                    cmbBoxUpdateEmpDepartment.SelectedIndex = Convert.ToInt32(ds.Tables[0].Rows[0][2].ToString());
                    cmbBoxUpdateEmpDesignation.SelectedIndex = Convert.ToInt32(ds.Tables[0].Rows[0][3].ToString());
                    lblupdatedelete.Text = " Update Successfully";
                    EmployeeUpdateInfo();
                    textBoxUpdateEmployee.Clear();
                }
            }              

        }
        catch (Exception ex)
        {
            MessageBox.Show("Error!!" + ex.Message);
        }
        finally
        {
            dbobj.Close();
        }

    }
  public void RoleData()
    {
        DataSet ds = new DataSet();
        string query = "select [Id],[Name] from tbl where IsDeleted=0";
        ds = dbobj.ExecuteDataset(query);
        cmbBoxUpdateRole.DataSource = ds.Tables["tablename"];
        cmbBoxUpdateRole.DisplayMember = "Name";
        cmbBoxUpdateRole.ValueMember = "Id";
        cmbBoxDeleteRole.DataSource = ds.Tables["tablename"];
        cmbBoxDeleteRole.DisplayMember = "Name";
        cmbBoxDeleteRole.ValueMember = "Id";

     }//role combobox..for department,designation also i did the same way to display in 3 comboboxes 
```

我怎样才能做到这一点？任何的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:16:20.443

我解决了我自己的问题。我`selectedIndex`改为`selectedValue`

```
cmbBoxUpdateEmpRoleID.SelectedValue = 
                             Convert.ToInt32(ds.Tables[0].Rows[0][1].ToString());
cmbBoxUpdateEmpDepartment.SelectedValue = 
                             Convert.ToInt32(ds.Tables[0].Rows[0][2].ToString());
cmbBoxUpdateEmpDesignation.SelectedValue = 
                             Convert.ToInt32(ds.Tables[0].Rows[o][3].Tostring()); 
```

我只需要`changecmbvalue()`在`selectedValuechanged`事件中调用该方法。它按预期工作。

# cakephp - 自定义组件不会返回值

> ID：15818862
> 
> 赞同：0
> 
> 时间：2013-04-04T18:26:13.590
> 
> 标签：cakephp, cakephp-2.0, custom-component

好的，情况就是这样。在我的`beforeSave`函数中，我想操作一些`$this->request->data`条目。

这是我的组件：

```
<?php
App::uses('Component', 'Controller');
class GetStationComponent extends Component {
    public function getStationId ($station) { 
        $stationInstance = ClassRegistry::init('Station');

        $conditions = array('OR' => array(
            array('Station.code LIKE' => $station),
            array('Station.naam LIKE' => $station),
            array('Station.naam_overig LIKE' => $station)
            ));

        $result = $stationInstance->find('list', array('conditions'=>$conditions));

        $value = array_values($result);
        $value = $value[0];

        return $value;
    }
}
?> 
```

这是我的控制器中的 beforeSave 函数：

```
public function beforeSave($options = array()) {
        if (!empty($this->request->data['Experience']['vertrekstation']) && !empty($this->request->data['Experience']['aankomststation'])) {
            $this->request->data['Experience']['vertrekstation'] = $this->GetStation->getStationId($this->request->data['Experience']['vertrekstation']);
            $this->request->data['Experience']['aankomststation'] = $this->GetStation->getStationId($this->request->data['Experience']['aankomststation']);
        }
        return true;
    } 
```

它应该返回站点名称的 ID。但在数据库中，存储的是名称本身（由用户填写）而不是 ID。我需要在我的组件中更改什么（我猜......）才能返回正确的值？

（PS组件中的查询本身返回一个ID，因为起初我将'beforeSave'直接放入保存数据的函数中，但后来我的验证错误说它不是正确的值。这是正确的...)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:00:37.897

补充其他答案；要仅获取单个字段的值，请使用[`Model::field()`](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#model-field)

```
return $stationInstance->field('id', $conditions); 
```

最好在此语句中添加排序顺序，以确保始终以相同的顺序返回结果：

```
return $stationInstance->field('id', $conditions, 'code ASC'); 
```

由于您只对模型执行一次查询，之后不执行任何操作，因此您甚至不需要中间`$stationInstance`变量。您的代码可以进一步简化为：

```
return ClassRegistry::init('Station')->field('id', $conditions, 'code ASC'); 
```

## 一些观察

*   由于电台名称的“模糊”匹配，第一个结果可能并不总是用户*想要*的电台，最好在前端提供“自动完成”功能并让用户选择*正确*的电台（例如，为了防止`Den Haag`在用户*想要* `Den Haag HS`的时候选择）
*   如果电台与电台不*完全*匹配，您应该发出未找到电台的警告
*   `%`对于查询，您没有围绕您的搜索词`LIKE`。如果您打算搜索 'name *"contains"*，您应该使用`'%' . $station . '%'`. 对于*“开始于”*使用`$station . '%'`
*   正如@mark 所建议的那样；`beforeSave()`是*模型*的回调，应该位于那里。还; `beforeSave()`在验证发生后触发，因此可能为时已晚。`beforeValidate()`是最好的回调
*   如果`Experience`模型已经附加到`Station`模型上，则不需要使用组件，因为您可以直接访问`Station`模型。最好将 search-method 放在`Station`模型中；

## 将其全部移动到右侧（*）位置

*) 其他选项总是可能的，这只是*一种可能的*方法

将“搜索”方法添加到 Station-model；

应用程序/模型/Station.php

```
public function getStationIdByName($name)
{
    $name = trim($name);

    if (empty($name)) {
        return null;
    }

    $name = '%' . $name . '%';

    $conditions = array(
        'OR' => array(
            array($this->alias . '.code LIKE' => $name),
            array($this->alias . '.naam LIKE' => $name),
            array($this->alias . '.naam_overig LIKE' => $name),
        )
    );

    return $this->field('id', $conditions, 'code ASC');
} 
```

..并在体验模型中使用它

应用程序/模型/Experience.php

```
public function beforeValidate(array $options = array())
{
    if (
        !empty($this->data[$this->alias]['vertrekstation'])
        && !empty($this->data[$this->alias]['aankomststation'])
    ) {
        // Directly access the Station-model from within the Experience Model
        $this->data[$this->alias]['vertrekstation'] 
            = $this->Station->getStationIdByName($this->data[$this->alias]['vertrekstation']);
        $this->data[$this->alias]['aankomststation']
            = $this->Station->getStationIdByName($this->data[$this->alias]['aankomststation']);
    }

    // Call parent-callback after setting the values
    return parent::beforeValidate($options);
} 
```

## [更新] 使用约定，防止不必要的行为

写完前面的例子后，我注意到你当前的设置有一些缺陷；

1.  如果*vertrekstation*和*aankomststation*应该持有站点的“外键”（站点**ID**），则它们不是根据[CakePHP 模型和数据库约定命名的](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions)
2.  因为`1)`通过把这段代码放在里面，***更新***现有记录`beforeValidate()`时也会触发。因为您使用*aankomststation*和*vertrekstation*字段来保存电台的*名称*（在表单内）和*id （在数据库内），所以模型将在更新时尝试通过**id*查找 station-id 。请注意，**在*****表单***中，您仍将使用*vertrekstation*和*aankomstation*作为字段名称。这些字段名称*不是***********存在于您的数据库中，因此将无法直接更新数据库中的数据，这就是`beforeValidate()`回调的用途**********
****   因为`Experience`模型需要与模型的*两个*关系`Station`（一次为`departure station`( *'vertrekstation'* )，一次为`arrival station`( *'aankomststation'* )），所以您需要 Station-model 的*别名*。请参阅：[与同一模型的多个关系](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#multiple-relations-to-the-same-model)***

 **应用程序/模型/Experience.php

```
class Experience extends AppModel {
    /**
     * Station will be associated to the 'Experience' Model TWICE
     * For clarity, using an 'alias' for both associations
     *
     * The associated Models will be accessible via;
     * $this->DepartureStation
     * $this->ArrivalStation
     *
     * To stick to the CakePHP conventions, name the foreign keys
     * accordingly
     */
    public $belongsTo = array(
        'DepartureStation' => array(
            'className'  => 'Station',
            'foreignKey' => 'departure_station_id',
        ),
        'ArrivalStation' => array(
            'className'  => 'Station',
            'foreignKey' => 'arrival_station_id',
        )
    );

    public function beforeValidate(array $options = array())
    {
        // vertrekstation and aankomststation hold the 'names' of the
        // stations and will only be present if the form has been submitted
        if (
            !empty($this->data[$this->alias]['vertrekstation'])
            && !empty($this->data[$this->alias]['aankomststation'])
        ) {
            // Directly access the Station-model from within the Experience Model
            // using the *aliases*
            $this->data[$this->alias]['departure_station_id'] 
                = $this->DepartureStation->getStationIdByName($this->data[$this->alias]['vertrekstation']);
            $this->data[$this->alias]['arrival_station_id']
                = $this->ArrivalStation->getStationIdByName($this->data[$this->alias]['aankomststation']);

            // Invalidate the vertrekstation and aankomststation fields if lookup failed
            if (empty($this->data[$this->alias]['departure_station_id'])) {
                // Unable to find a station. Mark the Form-field invalid
                $this->invalidate('vertrekstation', __('A station with this name was not found'));
            }
            if (empty($this->data[$this->alias]['arrival_station_id'])) {
                // Unable to find a station. Mark the Form-field invalid
                $this->invalidate('aankomststation', __('A station with this name was not found'));
            }

        }

        // Call parent-callback after setting the values
        return parent::beforeValidate($options);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:09:31.027

Cake 的 find('list') 选项返回一个数组，如

```
array( 1 => 'name1',
       3 => 'name2',
       //etc...
) 
```

其中 index 是 id，value 是您在模型上设置的*显示字段。*因此，当您这样做时`$value = array_values($result);`，您将提取数组的值（即显示字段）。我假设您没有使用 id 作为 displayField，所以这就是它返回名称而不是 id 的原因。

我不确定您为什么使用 find('list') 而不是 find('first') 或其他替代方法，但是如果您出于某种原因不想修改它，则应该返回第一个 id 的修复搜索得到的是

```
reset($result);  //possibly not needed, but just in case
$value = key($result ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T19:19:22.193

首先，您必须了解 Cake 的工作原理`$this->request`。您的模型中没有。它是控制器的一部分。在您的模型中，您传递的数据将`$this->data`直接存在。

```
public function beforeSave($options = array()) {
    parent::beforeSave($options); // you also forgot the parent call

    if (!empty($this->data[$this->alias]['vertrekstation']) && ...)) {
        $this->data[$this->alias]['vertrekstation'] = ...;
    }
    return true;
} 
```

你的 find 电话看起来也很糟糕。我不知道你想做什么。但我强烈建议您使用 debug() 等来找出返回的内容并相应地更正您的代码。如果您只对单个值感兴趣，则可能需要 find(first) 。**

# java - 我尝试运行的每个小程序都返回 ClassNotFoundException

> ID：15818863
> 
> 赞同：1
> 
> 时间：2013-04-04T18:26:20.690
> 
> 标签：java, classnotfoundexception

我正在尝试使用 Java 小程序（任何 Java 小程序），但我总是收到一条消息说“错误。单击以获取详细信息”。

当我这样做时，弹出窗口说：

```
Application Error

ClassNotFoundException

jreVerification.class 
```

当我单击“详细信息”按钮时，我看到的只有以下内容：

```
Java Plug-in 10.7.2.10
Using JRE version 1.7.0_07-b10 Java HotSpot(TM) Client VM
User home directory = C:\Users\Beth
----------------------------------------------------
c:   clear console window

f:   finalize objects on finalization queue

g:   garbage collect

h:   display this help message

l:   dump classloader list

m:   print memory usage

o:   trigger logging

q:   hide console

r:   reload policy configuration

s:   dump system and deployment properties

t:   dump thread list

v:   dump thread stack

x:   clear classloader cache

0-5: set trace level to <n>

---------------------------------------------------- 
```

我正在运行 Windows 7 Professional，并且正在更新补丁。

无论我运行的是什么 Java Applet，Google Chrome、Mozilla Firefox 和 Internet Explorer 都会出现此问题。

我上面引用的错误来自这里：http: [//java.com/en/download/installed.jsp ?detect=jre](http://java.com/en/download/installed.jsp?detect=jre)

但它仍然没有运行。

我尝试了以下方法来纠正这个问题：

*   卸载并重新安装 Java
*   卸载 Java，重新启动，安装 Java
*   卸载 Java，删除所有注册表项，重新启动，安装 Java

此外，我运行了恶意软件和病毒扫描，但都没有显示任何相关性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:29:32.980

在我看来，这听起来像是一个可怕的不设置`%JAVA_HOME%`,`PATH`或`CLASSPATH`环境变量。除此之外，您可能在代码中遗漏了一些东西。请在您编写的代码中进行编辑，它可能有助于我们发现问题。

变量：

PATH：在这个变量的末尾，确保它以分号结尾，然后写：

`C:\Java\jdk1.7.0_03\bin;`

假设您已将 java 安装到 C:\ 驱动器上名为 java 的目录中。使用您的 jdk 的 bin 目录的路径编辑上面的行。

JAVA_HOME：如果不存在则创建一个新变量，调用它`JAVA_HOME`。该值应该是您的 jdk 目录的路径。确保以分号结束该值。

编辑：

编译是您必须对所有 java 文件执行的操作才能运行它们。编译所做的是将您的 java 代码（例如`public class example{`等）转换为计算机可以读取的称为机器代码的东西。您收到的错误是因为 Web 浏览器正在搜索`.class`文件 - 因为这些文件是您的程序的机器代码版本。这就是为什么需要 JDK。在 JDK 中有一个名为`javac.exe`. 该文件是 java 编译器 - 创建`.class`文件的程序。目前，听起来好像您正在尝试将`.java`文件作为可执行文件运行，这是不可能的。编译你的程序：

1.  打开命令提示符。（转到文件资源管理器，导航到`C:Windows\system32\`并打开名为`cmd.exe`.
2.  在命令行中，键入`cd PATH_TO_JAVA_FILE`，将 PATH_TO_JAVA_FILE 替换为您的 java 文件的路径。
3.  键入`javac yourfile.java`，将 yourfile.java 替换为您的 java 文件的名称。
4.  如果成功，您将在与您的文件相同的目录中发现一个新文件`.java`- 一个与您的文件名称相同`.java`但带有`.class`扩展名的文件。这是可执行文件。

[在此处](http://www.oracle.com/technetwork/java/compile-136656.html)阅读有关编译和运行简单 Java 程序的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:33:14.460

请检查并确保您的系统路径上安装的 jre 不超过一个。一些应用程序安装自己的 jre，然后将该 jre 插入到路径变量中。

检查 PATH & CLASSPATH 并查找其中带有“jre”的条目。或者只是在您的程序文件中搜索 java.exe（如果没有记错的话）。

编辑您的路径以仅引用您自己安装的 jre。

# php - 将变量从 javascript 发送到 php 以进行检查并返回 javascript

> ID：15818864
> 
> 赞同：0
> 
> 时间：2013-04-04T18:26:31.923
> 
> 标签：php, javascript, validation

我正在使用 JavaScript 来验证我的表单。这是基本的验证。我遇到问题的步骤是将 synum 变量通过 post 从 java 脚本发送到我的 php 页面 valid_synum.php 在那里我进行 pdo 查找以检查该 synum 是否存在然后我回显基于 1 或 0结果。我希望 java 脚本获取该结果并发送警报错误，或者如果可以允许表单提交。这是我拥有的javascript。据我所知，POST 电话

> $.post("valid_synum.php", { synum: synum },

永远不会被调用。我在 php 页面中放置了一个测试，并且测试永远不会从脚本中激活。如果我直接在浏览器中加载 php，它工作正常。

任何帮助将不胜感激。

```
<script> 
function isNumber(input)
{

return (input - 0) == input && (input+'').replace(/^\s+|\s+$/g, "").length > 0;
}

function checkForm(f)
{
     if (f.elements['worknum'].value != "") 
    { 
     if ((isNumber(f.elements['worknum'].value)) == false)
        {
        alert("The Work Order Number is not valid")
        return false;
        }
        var chars = 6;
    if((f.elements['worknum'].value).length != 6)   
        {
        alert("The Work Order Number is not 6 digits")
        return false;
        }
    }

    if (f.elements['synum'].value == "") 
    {
        alert("Please Enter the Store Number");
        return false;
    }
     if (f.elements['worknum'].value == "") 
    {
        alert("Please Enter the Work Order Number");
        return false;
    }

    if (f.elements['synum'].value != "")
        {
        //get the username  
        var synum = (f.elements['synum'].value);  

        $.post("valid_synum.php", { synum: synum },  
            function(result){  

                     //if the result is 1  
                if(result == 1){  
                    //do nothing valid synum 
                    alert("Good") 
                    return false; 
                }else{  
                    //show that the username is NOT available  
                    alert("The store number is NOT valid. Please Enter full store number") 
                    return false; 
                }  
        }); 

    }   

    else
    {
        f.submit();
        return false;
    }

}

</script> 
```

这是我的php页面代码：

```
$id=$_POST['synum'];

try{
$conn = new PDO( "sqlsrv:Server= $eautoserver ; Database = $eautodb ", $eautouser,    $eautopwd);
   $conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

$stmt = $conn->prepare('SELECT * FROM vw_DCR_Web_Customer_Query WHERE CustomerNumber= :id');
 $stmt->execute(array('id' => $id));
$row = $stmt->fetch();

} catch(PDOException $e) {
echo 'ERROR: ' . $e->getMessage();
}

if ($row){
echo 1;
$email_body="1";
}else{
echo 0;
$email_body="0";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:00:23.340

我应该检查打开/关闭方括号是否可以知道为什么您的代码没有以所需的条件输入。

顺便说一句，您可以测试字符串是否为数字并以更简洁的方式验证它是否为空。

```
function isNumber(number){ 
    return !isNaN(+number) && number !== ""
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:42:42.810

我更改了设置代码的方式并删除了

```
$(document).ready(function(){
$("#synum").change(function() {      
$.post("valid_synum.php", { synum: synum },  
        function(result){  

                 //if the result is 1  
            if(result == 1){  
                //do nothing valid synum 
                alert("Good") 
                return false; 
            }else{  
                //show that the username is NOT available  
                alert("The store number is NOT valid. Please Enter full store number") 
                return false; 
            }  
    }); 
```

从我的 checkform 函数中，一旦它是一个单独的函数，它就开始正确运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:37:40.113

也许这篇博客文章会对您有所帮助：http: [//blog.secull.org/php-functions-in-javascript/](http://blog.secull.org/php-functions-in-javascript/) 有一个类似的问题，并显示了如何解决它。

伴侣

# php - 在 dompdf 生成的 PDF 上设置边距

> ID：15818865
> 
> 赞同：0
> 
> 时间：2013-04-04T18:26:36.253
> 
> 标签：php, pdf, dompdf

我正在使用 dompdf 用 php 生成一个 pdf 文件。我想完全摆脱 PDF 上的边距。我执行的所有搜索都提供了设置正文元素的边距或设置@page 的边距的解决方案。

所以这是我用来演示我的问题的简化的 html 位：

```
<!DOCTYPE HTML>
<html>
<head>
    <style>
        @page{ margin:0px; }

        body{ 
                margin:0px;
                background-color:yellow;
            }
    </style>
</head>

<body>
abc
</body>
</html> 
```

我仍然在生成的 PDF 中获得边距，如下所示。

![在此处输入图像描述](https://i.stack.imgur.com/tfoGl.png)

# php - php if 和 else if 来自 sql 值的语句

> ID：15818866
> 
> 赞同：0
> 
> 时间：2013-04-04T18:26:36.347
> 
> 标签：php, sql

我有一个这样的查询：

```
if ($auto_hold = sql::value("select a.code, a.primcode, b.secondary_auto_hold from ev.do.nt_dg_li() a
                         left outer join eve.do.nce_data b on a.seccode = b.CODE_
                         where primcode like 'INSM%%' and secondary_auto_hold = 1 and code='$patient_id'")) 
```

如果我的变量与该查询匹配，那么我想回显一个警报，如果它不匹配，那么它应该什么都不做。

简单的问题，但我正在绘制空白自动取款机。任何帮助将不胜感激。谢谢你。

我尝试了各种赋值运算符，即。==，=== 但什么都没有。

我敢肯定我也可以删除变量，然后说 if(sql::value etc)

我想到了：

```
if ($patient_id == $auto_hold) echo "<div class='patient_alert_red'>Auto hold on deductible for this patient.</div>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:42:21.443

我的回答如下：

```
if ($patient_id == $auto_hold) echo "<div class='patient_alert_red'>Auto hold on deductible for this patient.</div>"; 
```

我使用 == / Equal 运算符来验证它们是否相同。

更多在这里：

[http://www.w3schools.com/php/php_operators.asp](http://www.w3schools.com/php/php_operators.asp)

# php - 如何将php变量值传递给javascript

> ID：15818870
> 
> 赞同：0
> 
> 时间：2013-04-04T18:26:45.177
> 
> 标签：php, javascript

我需要有关此代码的帮助。

我想要完成的是通过 onclick 事件插入一个带有名称值的文本区域，该名称值是从数据库（未显示）中检索的。我应该有一个 php 代码，其中有一个按钮，当我单击此按钮时，我调用一个函数，该函数将这个 textarea 插入到一个由该名称标识的位置给出的位置。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="pragma" content="no-cache" />
<title>Example</title>
<SCRIPT language="javascript"> 

    function add_comments($name) {
     var element = document.createElement("textarea");
     var docplace = document.getElementById($name);

     docplace.innerHTML = docplace.innerHTML ;
     element.setAttribute("name", $name);
     element.setAttribute("cols",50);
     element.setAttribute("rows",5);
     element.setAttribute("value", $name);

    docplace.appendChild(element);
    docplace.innerHTML = docplace.innerHTML + "<br/>";
}

</SCRIPT>
</head>
<?php

echo "<br>";
$TempTask = 'thistask';
echo '<form>';
echo "<br>";
echo $TempTask;
echo "<br>";

?>
<input type="button" value="Text Area" onclick="add_comments('$TempTask');">
<?php

echo '<div id=$TempTask>Right here!</div>';
echo '</form>';
?>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:29:16.373

只需使用内联 PHP 标记，然后回显它：

```
onclick="add_comments('<?php echo $TempTask ?>');" 
```

或者回显整个事情，让 PHP 插入值：

```
echo "<input type=\"button\" value=\"Text Area\" onclick=\"add_comments('$TempTask');\">"; 
```

请注意，如果您的变量包含引号、换行符等，它可能会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:01:17.627

找到了一种将值从 PHP 传递到 Javascript 的方法。我刚刚打破了 php，插入了 javascript 并继续。

```
?>
<script type="text/javascript">
var anyname = "<?php echo $TempTask; ?>";
</script>
<?php 
```

因此，这个 anyname 变量是一个 javascript 全局变量，可用于 javascript 函数。

# android - 提醒用户时间敏感事件

> ID：15818871
> 
> 赞同：0
> 
> 时间：2013-04-04T18:27:06.630
> 
> 标签：android, user-interface, alarmmanager, android-notifications

首先让我先说我不是普通的 Android 用户。我们的产品适用于 iOS 和 Android，我在 iOS 方面有更多经验。我正在寻找有关某个功能的适当“Android 体验”以及如何实现它的建议。

我们有一个应用程序，它会向用户呈现全天都会发生的许多“事件”。用户可以要求在这些事件中的一个或多个发生前几分钟收到通知。我需要关于如何将这些通知呈现给用户的建议。

我想我了解如何使用 AlertManager 在事件即将发生时通知 Activity 或 BroadcastReceiver 。问题是接下来应该发生什么。

然后我们可以使用 Android 的通知系统（使用 NotificationCompat.Builder）将通知输入到系统中。问题是我认为它太微妙了。这些是时间敏感事件，当这种情况发生时，用户需要将注意力吸引到设备上。

另一种可能性是在事件即将发生时向用户显示警报对话框（可能还有声音）。当我们的应用程序在前台时，我有这个工作。但是，当应用程序处于后台（或可能已停止）时，理想情况下，我希望将警报放在任何现有活动的活动上。这似乎无法正常工作。相反，我的应用程序的主要活动似乎被带到了前面，然后警报活动显示在其顶部，但背景为黑色（尽管我为警报活动使用了透明主题）。

这是一些代码：

```
private void createAlarm( )
{
    Intent intent = new Intent( getApplicationContext(), AlarmDisplayer.class );
    PendingIntent pendingIntent = PendingIntent.getActivity( getApplicationContext(), 3333, intent, 0 );

    //getting current time and add 5 seconds in it
    Calendar cal = Calendar.getInstance();
    cal.add( Calendar.SECOND, 10 );
    //registering our pending intent with alarmmanager
    AlarmManager alarmMgr = (AlarmManager) getSystemService( ALARM_SERVICE );
    alarmMgr.set( AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent );
}

public class AlarmDisplayer extends Activity implements OnClickListener
{
    @Override
    protected void onCreate( Bundle savedInstanceState )
    {
        super.onCreate( savedInstanceState );

        AlertDialog.Builder builder = new AlertDialog.Builder( this );
        builder.setMessage( "Alert received xxx" );
        builder.setNeutralButton( "OK", this );
        AlertDialog dialog = builder.create();
        dialog.show();
    }

    public void onClick( DialogInterface dialog, int which )
    {
        this.finish();
    }
} 
```

从清单：

```
 <activity
        android:name="com.southernstars.skysafari.AlarmDisplayer"
        android:theme="@style/Theme.Transparent"
        android:configChanges="orientation"
        android:label="" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

或者也许我们应该在 Android 上以其他方式执行此操作。一种模型可能是时钟应用程序中的闹钟。当闹铃响起时，整个屏幕都被闹铃占据。这可能有点笨拙，但有可能。

关于我们应该做什么以及如何做的任何想法？

账单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:02:24.450

我会通过显示一个对话框来解决这个问题（这样你就不会完全阻止用户查看，而只是一条需要立即注意的消息）理想情况下，对话框应该填充当前正在发出的警报的相应信息。基本上，当计时器关闭时，向广播接收器发送消息，然后显示您的对话框。您的对话框应该有 2 个按钮：

1.  转到您的主要活动以显示更多信息
2.  暂停/忽略/取消。

还要确保您收到您的消息...将您的广播接收器设置为以最强大的方式注册，而不是以**编程**方式注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T01:21:22.947

我会使用通知系统并使用文本到语音来提醒用户有新事件，他们可以从通知栏中获得更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T08:50:59.477

我认为您可以将 AlertDialog 与属于控制您的广播的服务的上下文一起使用。这在架构视图中也可能很干净。

# iphone - 我的图像框架在单元格中不起作用

> ID：15818873
> 
> 赞同：-2
> 
> 时间：2013-04-04T18:27:10.150
> 
> 标签：iphone, image, uitableview

我在单元格表视图的每个单元格中添加了图像。我不能设置我的图像框架请帮助我这样做。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
      UIImageView *myImageView = [[UIImageView alloc] initWithFrame:CGRectMake(10,   lblzip.frame.size.height+lblzip.frame.origin.y+2,30,30)];
                        myImageView.tag = 120;

                        myImageView.image = [UIImage imageNamed:@"call.png"];

                        [cell.imageView setContentMode:UIViewContentModeScaleAspectFit];

     cell.imageView.image=myImageView.image;                            

                        cell.imageView.userInteractionEnabled=YES;

                        UITapGestureRecognizer *tapped = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageSelectedInTable:)];

                        [cell.imageView addGestureRecognizer:tapped];
                        [tapped release];

  } 
```

但我的图像宽度和高度不是 30。它像资源文件中的图像。

我的研究给了我一个使用布局子视图的想法。如何调用和使用它们

```
 -(void)layoutsubviews
     {
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:34:30.013

你的代码没有意义。

1.  您指的是`cell`但没有变量称为`cell`. 您忘记调用`dequeue`和创建单元格

2.  您有两种不同的图像视图：

    ```
    UIImageView *myImageView = ... 
    ```

    和

    ```
    cell.imageView 
    ```

这不可能是您的真实代码。它永远不会编译。如果您不显示您的*真实*代码，没有人可以帮助您。

就您现在的代码而言，您的问题的答案是：您正在`myImageView`使用大小进行创建，`30,30`但您甚至从未将其放入您的单元格中，因此它是无关紧要的。你有一个不同的东西`cell.imageView`，那就是你看到的图像视图。

编辑：现在您已经更改了代码。但是您仍然在设置错误图像视图的框架。您正在将`cell.imageView`'*图像*设置为`myImageView`'*图像*。但这与图像的大小或图像视图的框架无关。我所说的仍然是正确的：你正在创造`myImageView`尺寸`30,30`，但你甚至从未将它放入你的细胞中，所以它是无关紧要的。

# android - android应用程序意外终止

> ID：15818874
> 
> 赞同：0
> 
> 时间：2013-04-04T18:27:20.310
> 
> 标签：android

我正在运行一个 web 服务 android 并正确插入，但是当应用程序意外终止时结束。

有谁知道为什么？

这是代码...

```
 protected Void doInBackground(final Void... unused) {

   Opdblevantamiento info = new Opdblevantamiento(SyndatlevwsAsyncTask.this);
    info.Abrir();
    Cursor c = info.recibirLevantamiento();
    //-----------------------------------
    int fila;
    String cc02="",cc03="",cc04="",cc05="";
    String cc06="",cc07="",cc08="", cc09="",cc10="";
    String cc11="",cc12="",cc13="", cc14="";

    //-----------------------------------

    int c01=c.getColumnIndex(ID_FILA);
    int c02=c.getColumnIndex(NCTA);
    int c03=c.getColumnIndex(NOMBREPROP);
    int c04=c.getColumnIndex(COLONIA);
    int c05=c.getColumnIndex(CALLE);
    int c06=c.getColumnIndex(DAT_A);
    int c07=c.getColumnIndex(DAT_B);
    int c08=c.getColumnIndex(DAT_C);
    int c09=c.getColumnIndex(DAT_D);
    int c10=c.getColumnIndex(DAT_E);
    int c11=c.getColumnIndex(INFRAESTRUCTURA);
    int c12=c.getColumnIndex(NOMBREPRED);
    int c13=c.getColumnIndex(FECHA);
    int c14=c.getColumnIndex(HORA);     

    //String resultado2="Cuentas No Generadas: \n";
    //String resultado = "Cuentas Generadas con Éxito: \n";
    String datWs=null;

    for(c.moveToFirst();!c.isAfterLast();c.moveToNext())
    {
        fila=Integer.parseInt(c.getString(c01));
        cc02=c.getString(c02).toString();
        cc03=c.getString(c03).toString();
        cc04=c.getString(c04).toString();
        cc05=c.getString(c05).toString();
        cc06=c.getString(c06).toString();
        cc07=c.getString(c07).toString();
        cc08=c.getString(c08).toString();
        cc09=c.getString(c09).toString();
        cc10=c.getString(c10).toString();
        cc11=c.getString(c11).toString();
        cc12=c.getString(c12).toString();
        cc13=c.getString(c13).toString();
        cc14=c.getString(c14).toString();

        datWs=consumiendoWsLevantamiento(cc02,cc03,cc04,cc05,cc06,cc07,cc08,cc09,cc10,cc11,cc12,cc13,cc14);
         Log.i("wsInicio", datWs);
        if(datWs != null)
        {
            long datUpd=info.updatelev(fila);
            if(datUpd>0)
            {
                //Toast.makeText(this, "Registro registrado exitosamente: " + cc02 , Toast.LENGTH_SHORT).show();
                //resultado=resultado+"::"+cc02+"::  \n";
                System.out.println("Folio Insertado: [" + datWs + "]");
                publishProgress("Cuenta Registrada: " + cc02);

                //this.dialog.setMessage("Folio Insertado: [" + datWs + "]");
                //onProgressUpdate(Integer.parseInt(datWs)); // Invokes onProgressUpdate()
                // this.dialog.show();
            }                   

        }
        else
        {
            System.out.println("Error ws: " + datWs);
            publishProgress("Error de conexión no se pudo registrar la cuenta: " + cc02);
            LevantamientoTask.this.cancel(true);
        }
            //resultado2=resultado2+"||"+cc02+"||"+" ."+datWs + ". \n";

    }

    info.cerrar();

    //resultado = resultado + resultado2;

    //txtdat.setText(String.valueOf(resultado));
    //txtdat2.setText(String.valueOf(resultado2));

   //String auth=doLogin(t_id,password);
   //System.out.println(auth);

   return null; // don't interact with the ui! 
```

}

和错误控制台.....

```
04-04 18:11:14.828: D/dalvikvm(32008): GC_CONCURRENT freed 316K, 6% free 7676K/8135K, paused 14ms+6ms
04-04 18:11:26.977: D/dalvikvm(32008): GC_CONCURRENT freed 434K, 7% free 7696K/8263K, paused 3ms+5ms
04-04 18:11:38.048: I/dalvikvm(32008): Jit: resizing JitTable from 512 to 1024
04-04 18:11:44.318: D/dalvikvm(32008): GC_CONCURRENT freed 437K, 7% free 7706K/8263K, paused 10ms+22ms
04-04 18:11:55.588: D/dalvikvm(32008): GC_CONCURRENT freed 418K, 7% free 7694K/8263K, paused 4ms+4ms
04-04 18:11:59.208: D/dalvikvm(32008): GREF has increased to 201
04-04 18:11:59.718: D/dalvikvm(32008): GC_CONCURRENT freed 346K, 7% free 7799K/8327K, paused 13ms+12ms
04-04 18:12:20.328: D/dalvikvm(32008): GC_CONCURRENT freed 502K, 8% free 7738K/8391K, paused 12ms+35ms
04-04 18:12:26.318: I/dalvikvm(32008): Jit: resizing JitTable from 1024 to 2048
04-04 18:12:32.997: D/dalvikvm(32008): GC_CONCURRENT freed 400K, 8% free 7733K/8391K, paused 12ms+4ms
04-04 18:12:43.168: D/dalvikvm(32008): GC_CONCURRENT freed 399K, 8% free 7734K/8391K, paused 10ms+4ms
04-04 18:12:53.278: D/dalvikvm(32008): GC_CONCURRENT freed 400K, 8% free 7739K/8391K, paused 4ms+5ms
04-04 18:13:05.487: D/dalvikvm(32008): GC_CONCURRENT freed 408K, 8% free 7742K/8391K, paused 12ms+5ms
04-04 18:13:15.358: D/dalvikvm(32008): GC_CONCURRENT freed 337K, 7% free 7808K/8391K, paused 9ms+11ms
04-04 18:13:18.118: I/System.out(32008): NuevoLevantamiento{c1=55555; c2=kkkkk; c3=kkkk; c4=kkkkk; c5=|01|09|07|2009|10|; c6=; c7=; c8=; c9=; c10=|true|false|true|false|true|; c11=hhhh; c12=04/04/2013; c13=18:11:59S; }
04-04 18:13:18.618: I/levantemiento(32008): 35
04-04 18:13:18.618: I/System.out(32008): response35
04-04 18:13:18.618: I/System.out(32008): 35
04-04 18:13:18.618: I/wsInicio(32008): 35
04-04 18:13:18.651: I/System.out(32008): Folio Insertado: [35]
04-04 18:13:18.670: I/System.out(32008): NuevoLevantamiento{c1=5555; c2=rrrrr; c3=xc; c4=xa; c5=|02|00|00|2007|480|; c6=; c7=; c8=; c9=; c10=|true|false|true|false|true|; c11=yyy; c12=04/04/2013; c13=18:13:08S; }
04-04 18:13:18.877: I/levantemiento(32008): 36
04-04 18:13:18.877: I/System.out(32008): response36
04-04 18:13:18.877: I/System.out(32008): 36
04-04 18:13:18.877: I/wsInicio(32008): 36
04-04 18:13:18.908: I/System.out(32008): Folio Insertado: [36]
04-04 18:13:18.928: D/AndroidRuntime(32008): Shutting down VM
04-04 18:13:18.928: W/dalvikvm(32008): threadid=1: thread exiting with uncaught exception (group=0x40014760)
04-04 18:13:18.928: E/AndroidRuntime(32008): FATAL EXCEPTION: main
04-04 18:13:18.928: E/AndroidRuntime(32008): java.lang.NullPointerException
04-04 18:13:18.928: E/AndroidRuntime(32008):    at jmatias.levantamiento.SyndatlevwsAsyncTask$LevantamientoTask.onPostExecute(SyndatlevwsAsyncTask.java:280)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at jmatias.levantamiento.SyndatlevwsAsyncTask$LevantamientoTask.onPostExecute(SyndatlevwsAsyncTask.java:1)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at android.os.AsyncTask.finish(AsyncTask.java:590)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at android.os.AsyncTask.access$600(AsyncTask.java:149)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:603)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at android.os.Looper.loop(Looper.java:126)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at android.app.ActivityThread.main(ActivityThread.java:3997)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at java.lang.reflect.Method.invokeNative(Native Method)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at java.lang.reflect.Method.invoke(Method.java:491)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-04 18:13:18.928: E/AndroidRuntime(32008):    at dalvik.system.NativeStart.main(Native Method)
04-04 18:18:18.988: I/Process(32008): Sending signal. PID: 32008 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:32:09.963

错误出现在您未发布代码的 AsyncTask 的 onPostExecute() 部分中。如果您查看堆栈跟踪，它会告诉您错误在该方法的第 280 行。您正在对该行中为 NULL 的内容调用方法。

# java - 在 IntelliJ IDEA 中禁用 Java 自动装箱

> ID：15818875
> 
> 赞同：4
> 
> 时间：2013-04-04T18:27:28.150
> 
> 标签：java, intellij-idea, autoboxing

有没有办法在 IntelliJ IDEA 中禁用 Java 5 和 6 的自动装箱，以不允许开发人员在 IDE 中使用此功能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T18:37:49.723

我不认为你可以在保持目标编译版本的同时完全禁用自动装箱——这是特定 Java 版本的一个特性。

您*可以*在 IntelliJ 中做的是将 Auto-boxing 的检查级别更改为“错误”。要做到这一点：

*   转到设置 > 检查，然后在搜索栏中输入“装箱”。
*   点击“自动装箱”。
*   将严重性设置为“错误”。这将导致检查测试将任何发生的自动装箱报告为错误。您也应该对自动拆箱执行相同的操作。

再往下，您可以添加在测试代码（PMD、FindBugs、Cobertura 等）时​​运行的代码检查，如果自动装箱或自动拆箱，构建将失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T18:38:33.173

如果不让你的 Java 成为“非 Java”的形式，你就不能真正禁用自动装箱；但是，您可以减少一些最严重的自动装箱问题的影响。

[FindBugs](http://findbugs.sourceforge.net/)是一个代码分析器，它有一些特定的自动装箱规则，以避免出现自动装箱问题的情况。

它们都以“Bx:”标识符开头：

1.  Bx：原始值被装箱然后立即拆箱（BX_BOXING_IMMEDIATELY_UNBOXED）
2.  Bx：原始值被装箱然后拆箱以执行原始强制（BX_BOXING_IMMEDIATELY_UNBOXED_TO_PERFORM_COERCION）
3.  Bx：装箱的值被拆箱，然后立即重新装箱（BX_UNBOXING_IMMEDIATELY_REBOXED）
4.  Bx：方法分配一个装箱的原语只是为了调用 toString (DM_BOXED_PRIMITIVE_TOSTRING)
5.  Bx：方法调用低效的浮点数构造函数；改用静态 valueOf (DM_FP_NUMBER_CTOR)
6.  Bx：方法调用低效的 Number 构造函数；改用静态 valueOf (DM_NUMBER_CTOR)

您可以将 Findbug 报告集成到您的构建中，并且根据您使用的构建系统，甚至根据 FindBugs 发现的问题的存在来让构建抱怨或失败。

# php - 如何连接android上传PHP数据和MySQL数据库？

> ID：15818878
> 
> 赞同：0
> 
> 时间：2013-04-04T18:27:37.787
> 
> 标签：php, android, mysql

我创建了一个 android 应用程序，用于将数据上传到我的网络服务器到 PHP 文件中并将数据输出到`.txt`文件中。我升级了我的服务器，现在我支持数据库。

如何转换/更新以下 php 代码以连接 MySQL 数据库？在 android 端使用 HTTP POST 到 url mysite/location.php 我想将记录纬度，经度添加到我的数据库...mysql查询...需要代码示例...

```
<?php
$lat = $_POST["lat"]; // Declares the upload data from client as a variable
$lon = $_POST["lon"];

$textfile = "location.txt"; // Declares the name and location of the .txt file

$fileLocation = "$textfile";
$fh = fopen($fileLocation, 'w   ') or die("Something went wrong!"); // Opens up the     .txt file for writing and replaces any previous content

$stringToWrite = " $lat\n $lon\n "; // Write location

fwrite($fh, $stringToWrite); // Writes it to the .txt file
fclose($fh);

//header("Location: index.html"); // Return to frontend (index.html)
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:31:52.033

如果您希望在创建后能够管理和维护您的代码，您需要自己学习如何做到这一点。从 PHP 连接到 MySQL（在撰写本文时）最好使用[PDO](http://www.php.net/manual/en/book.pdo.php)完成。

编辑：

这是使用 PDO 的示例代码的链接：

[https://stackoverflow.com/a/4559320/1183321](https://stackoverflow.com/a/4559320/1183321)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T19:09:26.307

这是一个相当广泛的问题。简而言之，我会这样做：

*   您需要 Java/Android 端的 HTTP 库来连接到 PHP 服务器，并检索字符串响应。
*   [然后您的 PHP 代码将需要通过MySQL/PDO](http://www.php.net/manual/en/book.pdo.php)或[MySQLi](http://www.php.net/manual/en/book.mysqli.php)将数据保存到数据库中。
*   为您的 PHP 端添加一些安全性，以便只有您的 Android 应用程序可以保存数据。您将使用每个用户的用户名和密码，还是在安装时生成 GUID？确定您需要的安全级别，并在用户便利的情况下进行权衡。
*   服务器端需要指定一个响应，可能使用 JSON（参见手册中的[json_encode](http://www.php.net/manual/en/function.json-encode.php)）
*   JSON 字符串需要在 Java 端进行解码。
*   您将不得不处理互联网连接问题，要么向用户报告错误，要么安排在其他时间重试。

一般来说，我建议不要为诸如此类的特定设计问题“寻找教程”，因为您想要的特定解决方案以前可能没有完成。但是，它的组件有；因此，如果您*将问题分解*，您会发现每一点都更易于管理。

因此，首先，在这个站点上搜索“ [HTTP library POST Android](https://stackoverflow.com/search?q=HTTP+library+POST+Android) ”，这肯定会返回许多代码示例。实施它，并让自己确信它是有效的，并且从广义上讲，你理解它。接下来，在搜索引擎中尝试“ [PHP MySQL PDO insert](https://stackoverflow.com/search?q=PHP+MySQL+PDO+insert) ”，然后让它工作，然后重复这个过程，直到你的项目完成。

# mysql - 如何从一列中分离多个数据？

> ID：15818880
> 
> 赞同：1
> 
> 时间：2013-04-04T18:27:44.343
> 
> 标签：mysql, database, string

我遇到了一个问题 - 我需要将数据从 Column3 列（分隔符“|”）中分离出来。

```
Column1 Column2 Column3
7        23      567|568|85|532|296|581|300|265|577|330|563|423|55|442
8         0      242
9         0      242
10       23      567|568|85|532|296|581|300|265|577|330|563|423|55|442
14        4      330|563|423|134|242 
```

Column1 是 ID，Column2 是 '|' 每行计数，第 3 列是应该在新行中分开的数据。

我的输出应如下所示：

```
Column1 Column4
7       567
8       242
9       242
10      567
14      330
7       568
10      568
14      563 
```

我像下面这样写了联合，但我不想重复它 60 次......

```
select 
    Column1,
    substring_index(substring_index(Column2,'|',1),'|',-1) as Column2
from Table1
union
select
    Column1,
    substring_index(substring_index(Column2,'|',2),'|',-1) as Column2
from Table1 
```

你能帮我找到更好的解决方案吗？

BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:17:38.720

您可以使用数字列表来执行此操作。这是一个例子：

```
select Column1,
       substring_index(substring_index(Column2,'|', nums.n),'|',-1) as Column2
from Table1 t1 cross join
      (select (n1.n - 1) * 12 + (n2.n - 1)*3 + n3.n as n
       from  (select 1 as n union all select 2 union all select 3 union all select 4 union all select 5
             ) n1 cross join
             (select 1 as n union all select 2 union all select 3 union all select 4 
             ) n2 cross join
             (select 1 as n union all select 2 union all select 3 
             ) n3
      ) nums 
```

# asp.net - 当执行搜索但未找到数据时，我们单击重置按钮并得到“对象引用未设置为对象的实例”。任何想法为什么？

> ID：15818890
> 
> 赞同：0
> 
> 时间：2013-04-04T18:28:11.317
> 
> 标签：asp.net, vb.net

我们在搜索框中输入文字，点击搜索按钮。

如果找到数据并单击重置按钮，您将优雅地返回搜索屏幕。

如果未找到数据并且您单击重置按钮，则应用程序会中断并显示以下错误消息：

```
Object reference not set to an instance of an object. 
```

此错误指向此行：

```
Dim getAll As CheckBox = DirectCast(gridview1.HeaderRow _
 .Cells(0).FindControl("getAll"), CheckBox) 
```

这是标记：

```
<HeaderTemplate>
 <asp:CheckBox ID="getAll" runat="server" onclick="getAllOf(this);CheckBox_getAll();" />
</HeaderTemplate> 
```

代码隐藏中的重置按钮：

```
Protected Sub btnReset_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnReset.Click
    ' Simple clean up text to return the Gridview to it's default state
    searchBox.Text = ""
    SearchString = ""
    BindData()
End Sub 
```

任何想法如何解决这一问题？

这是我们最明显的应用程序之一

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:32:43.470

尝试设置[`GridView.ShowHeaderWhenEmpty`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.showheaderwhenempty.aspx)为真。

听起来，当您的数据控件为空时，您的标题不会显示。因此，您的代码尝试访问标题行，并由于对象尚未初始化而引发错误。

* * *

那，或者你可以防止 HeaderRow 不存在的可能性：

```
Dim getAll As CheckBox

If gridview1.HeaderRow IsNot Nothing Then
    getAll = DirectCast(gridview1.HeaderRow.Cells(0).FindControl("getAll"), CheckBox)
End If 
```

# certificate - 在代码中创建 .cer [DER 编码]

> ID：15818891
> 
> 赞同：0
> 
> 时间：2013-04-04T18:28:13.430
> 
> 标签：certificate, cryptoapi

我有一个工作解决方案，可以创建有效的 .pfx 文件（基于包装在 C# 中的 CryptoAPI）。我可以将它导入到我的私人撕裂中，然后将其导出到 .cer

但是（不是总是有一个但是？）我不能做的是从代码生成适当的 .cer 文件。OpenSSL（或任何其他第三方元素）不是此环境的选项，也不是任何需要手动/GUI 类型操作的东西......

我确信该函数存在于 API 中（CertMgr.msc 在发挥作用时必须调用“Something”......但是两天的搜索没有产生任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:41:10.503

一个可怜的男人回答（我会非常低水平）

// 创建 pfx 字节流... byte[] selfSigned = CertificateCreator.CreateSelfSignCertificatePfx(distinguishedName, new DateTime(2013, 4, 1), new DateTime(2013, 12, 31), insecurePassword);

// 创建一个证书实例 X509Certificate2 cert = new X509Certificate2(selfSigned, insecurePassword);

// 导出为 .cer [DER] selfSigned = cert.Export(X509ContentType.Cert);

// 写入文件.. System.IO.File.WriteAllBytes(certificateFilename+".cer"), selfSigned);

# javascript - Chrome, Javascript, window.open in new tab

> ID：15818892
> 
> 赞同：116
> 
> 时间：2013-04-04T18:28:15.397
> 
> 标签：javascript, window.open

在 chrome 中，这会在新选项卡中打开：

```
<button onclick="window.open('newpage.html', '_blank')" /> 
```

这将在一个新窗口中打开（但我也希望它在新选项卡中打开：

```
<script language="javascript">
  window.open('newpage.html', '_blank');
</script> 
```

这可行吗？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-04-04T18:32:26.287

您无法直接控制它，因为它是由 Internet Explorer 用户控制的选项。

使用具有不同窗口名称的 Window.open 打开页面将在新的浏览器窗口中打开，如弹出窗口，或者在新选项卡中打开，如果用户配置浏览器这样做。

**编辑：**

更详细的解释：

**1.**在现代浏览器中，window.open 将在新选项卡中打开，而不是在弹出窗口中打开。

**2.**您可以通过在第三个参数中指定选项来强制浏览器使用新窗口（'popup'）

**3.**如果 window.open 调用不是用户发起的事件的一部分，它将在新窗口中打开。

**4.** “用户发起的事件”不必来自同一个函数调用——但它必须源自用户点击调用的函数

**5.**如果用户发起的事件委托或延迟函数调用（在事件监听器或委托未绑定到点击事件，或使用 setTimeout 例如），它失去其“用户发起”的状态</p>

**6.**一些弹出窗口拦截器将允许从用户发起的事件中打开窗口，但不允许以其他方式打开的窗口。

**7.**如果任何弹出窗口被阻止，那些通常由阻止程序（通过用户发起的事件）允许的窗口有时也会被阻止。一些例子……</p>

强制在新浏览器实例中打开窗口，而不是在新选项卡中打开：

```
window.open('page.php', '', 'width=1000'); 
```

以下事件符合用户发起的事件，即使它调用了另一个函数：

```
function o(){
  window.open('page.php');
}
$('button').addEvent('click', o); 
```

以下不属于用户发起的事件，因为 setTimeout 推迟了它：

```
function g(){
  setTimeout(o, 1);
}
function o(){
  window.open('page.php');
}
$('button').addEvent('click', g); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-11-07T21:45:23.047

如果用户喜欢，强制使用选项卡有时很有用。正如上面 Prakash 所说，这有时是由使用非用户发起的事件决定的，但有一些方法可以解决这个问题。

例如：

```
$("#theButton").button().click( function(event) {
   $.post( url, data )
   .always( function( response ) {
      window.open( newurl + response, '_blank' );
   } );
} ); 
```

将始终在新的浏览器窗口中打开“newurl”，因为“always”功能不被认为是用户启动的。但是，如果我们这样做：

```
$("#theButton").button().click( function(event) {
   var newtab = window.open( '', '_blank' );
   $.post( url, data )
   .always( function( response ) {
      newtab.location = newurl + response;
   } );
} ); 
```

我们打开新的浏览器窗口或创建新的选项卡，这取决于用户在按钮单击中的偏好，这是用户启动的。然后我们只需在从 AJAX 帖子返回后将位置设置为所需的 URL。瞧，如果用户喜欢，我们会强制使用选项卡。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-05-29T05:28:54.067

如果您使用`window.open(url, '_blank')`，它将在 Chrome、Firefox 等上被阻止（弹出窗口阻止程序）

试试这个，

```
$('#myButton').click(function () {
    var redirectWindow = window.open('http://google.com', '_blank');
    redirectWindow.location;
}); 
```

[为这个http://jsfiddle.net/safeeronline/70kdacL4/2/](http://jsfiddle.net/safeeronline/70kdacL4/2/)工作的js小提琴

为ajax窗口工作的js小提琴打开[http://jsfiddle.net/safeeronline/70kdacL4/1/](http://jsfiddle.net/safeeronline/70kdacL4/1/)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-10-13T10:45:06.243

目前（Chrome 39）我使用此代码打开一个新标签：

```
window.open('http://www.stackoverflow.com', '_blank', 'toolbar=yes, location=yes, status=yes, menubar=yes, scrollbars=yes');
```

当然，这可能会在 Chrome 的未来版本中发生变化。

如果您无法控制用户正在使用的浏览器，那么使用它是个坏主意。它可能不适用于未来的版本或不同的设置。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-19T12:07:11.567

这将在 Chrome 和 Firefox 的新选项卡中打开链接，可能还有更多我没有测试过的浏览器：

```
var popup  = $window.open("about:blank", "_blank"); // the about:blank is to please Chrome, and _blank to please Firefox
popup.location = 'newpage.html'; 
```

它基本上会打开一个新的空选项卡，然后设置该空选项卡的位置。请注意，这是一种 hack，因为浏览器选项卡/窗口行为实际上是浏览器和用户的域、责任和选择。

第二行可以在回调中调用（例如，在您完成一些 AJAX 请求之后），但是浏览器不会将其识别为用户发起的点击事件，并且可能会阻止弹出窗口。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-12-19T10:37:05.930

清晰的迷你解决方案`$('<form action="http://samedomainurl.com/" target="_blank"></form>').submit()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-11T11:54:20.350

您可以使用此代码在新选项卡中打开..

```
function openWindow( url )
{
  window.open(url, '_blank');
  window.focus();
} 
```

我从[stackoverflow](https://stackoverflow.com/a/7924248/763747) ..

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-12-25T23:51:12.087

**我使用的最佳方式：**

1-将链接添加到您的html：

```
<a id="linkDynamic" target="_blank" href="#"></a> 
```

2-添加JS功能：

```
function OpenNewTab(href)
{
    document.getElementById('linkDynamic').href = href;
    document.getElementById('linkDynamic').click();
} 
```

3-只需使用您想要的链接调用 OpenNewTab 函数

# javascript - 如何连接输入和选择选项？

> ID：15818894
> 
> 赞同：0
> 
> 时间：2013-04-04T18:28:23.943
> 
> 标签：javascript, html

我有这样的输入：

```
<input name="men" id="men" type="text" size="10" maxlength="2"/> 
```

并选择

```
<select id="menlist" name="menlist">
  <option value="1">Sausis</option>
  <option value="2">Vasaris</option>
  <option value="3">Kovas</option>
  <option value="4">Balandis</option>
</select> 
```

我如何连接`input id men`和`select id menlist`使用 javascrip？例如：如果用户写入输入字段 2 -> 选择选项值更改为 2；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:32:57.640

在文本框 keyup 事件中调用一个函数，该函数将 menlist 的选定值设置为输入的值。

```
<input name="men" id="men" onkeyUp="func1()" type="text" size="10" maxlength="2"/>

function func1()
{
var txtval = parseInt(document.getElementById("men").value);
document.getElementById("menlist").selectedIndex= txtval;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:35:41.103

```
<script>
function change_select(val)
{
  document.getElementById('menlist').selectedIndex = val;
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:38:44.463

从您的问题中不清楚是否可以使用 jQuery。如果是，那么你可以做

```
$(function(){
    $("#men").keyup(function(){
        var value=$(this).val();
        $("#menlist option[selected]").removeAttr("selected");
        $("#menlist option[value=" + value + "]").attr("selected", "selected");
    });
    $("#menlist").change(function(){
        $("#men").val($(this).val());
    });
}); 
```

**这是一个[jsFiddle](http://jsfiddle.net/pmatseykanets/8sJNR/)**

*这样，您可以按任何顺序为选项设置任何值。只要确保它们是独一无二的。例如，您可以在选择中对名称进行排序。*

**更新**添加了一个处理程序以在选择更改时更改输入值。

# windows-phone-7 - 将项目添加到列表框时有些奇怪

> ID：15818899
> 
> 赞同：0
> 
> 时间：2013-04-04T18:28:49.033
> 
> 标签：windows-phone-7, windows-phone-8

当我获得新列表时，我将其设置为

```
Items = new List<SingleItem>(listOfItems) 
```

这很好用。

但是当我通过添加到列表中时

```
foreach (var item in listOfItemsSecondPart)
        {
            Items.Add(item);
        } 
```

我得到了一些奇怪的东西。调试器显示，所有项目都已成功添加。滚动框会减小它的规模，就像列表增长时一样。但问题是该列表仍然非常相同。它不能向下滚动，所以滚动框停在中间的某个地方。

有人遇到过吗？可能是在上次 Windows 8 更新后开始的（设备是 Lumia 920），但我不太确定。

编辑：好的，我做了一些调查：如果列表是空的，并且我正在添加带有“foreach”的项目，它仍然是空的。看起来通知没有上升，因为调试器显示该列表已填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:59:53.573

请改用[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)。

UI 没有机会知道`List<T>`已更新，但`ObservableCollection<T>`在修改时会发出 UI 可以接收的事件。

# javascript - 在处理 Javascript 时关闭从 iframe 启动的 ie9 弹出窗口 (res://ieframe.dll/acr_error.htm#,)

> ID：15818900
> 
> 赞同：2
> 
> 时间：2013-04-04T18:28:49.143
> 
> 标签：javascript, iframe, crash, popup, internet-explorer-9

我已经完成了所有工作，但我无法让 ie9 在弹出窗口中关闭我正在访问的应用程序后幸存下来。我已经重新安装了 ie，我有所有最新的 Windows 更新，我已经将 JQuery 从 1.6.4 更新到 1.9.1，我尝试强制 ie7、ie8 模式（取出“边缘”设置等），确保我的启动应用程序/父窗口设置为完全相同的版本，我已重置即设置，我已禁用所有附加组件。网站就像 Chrome 中的魅力一样（尽管 Chrome 也有一定的缺点，为此，它可以工作）。我必须使用 ie - 别无选择。（...出于绝望，我还建议将 Java 更新为我发现的一个线程）。此外，启动应用程序和弹出应用程序都在同一台机器上提供服务。

我有一个父应用程序，除其他外，它提供了一个菜单，我想从中启动我的其他应用程序。这个其他应用程序将大量数据加载到一个相当复杂、健壮且功能强大的 gui 中。但是，有时当我关闭窗口时，我会收到此错误：res://ieframe.dll/acr_error.htm#，最初我怀疑我的 AJAX 正在加载...在加载时关闭等。

这并不是说。问题不在于子窗口有错误......谁在乎，我正在关闭它......我的问题是父窗口爆炸了。

我已经隔离了这个问题 - 每次都能根据命令让它发生。如果 Javascript（在子应用程序中）正在处理 - 任何东西......我关闭窗口，*使*父窗口中断并尝试重新加载。（我启动子应用程序的菜单*位于*iframe 中。这*应该*没关系，但我可能不得不接受一些现实）

我已将所有内容缩减为一个处理循环，该循环使用返回的大量数据来处理和准备 gui。我已经在一定程度上引入了间隔，即一次只执行大型例程中的一个命令，通过增加 PC 给浏览器一个喘息的机会，并设置另一个间隔以返回直到事情完成。在我的“主要”程序之前，我已经对所有例程进行了此操作。

我有一个微调器，当浏览器（ie9）忙于使用 Javascript（本机或通过 JQuery，似乎无关紧要）时，它显然会停止......当微调器暂停时，我关闭窗口：繁荣，父崩溃。（如果我在微调器运行时单击关闭，并且浏览器正在呼吸，则触发卸载事件，并且一切正常关闭..虽然仍然不如 Chrome 流畅，但是..）

认为这是我的 AJAX 加载，我尝试了关闭窗口的清理程序。但是，当它崩溃时，它甚至永远不会被解雇。

我觉得这一切都非常疯狂......亲爱的，窗户正在关闭......任何感知到的问题都应该在那里实现，你不应该炸毁父母。同样，Chrome 可以毫无问题地处理该场景。

在 Windows 7 上运行浏览器。

编辑：

* * *

我继续前进，但这里有一个例子。这是使用以下命令从 iframe 启动的：window.open(url, '', 'width=1280,height=730,top=0,left=0,scrollbars=yes,titlebar=no,resizable=yes', '');

在“这里...”警报后关闭窗口。繁荣。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Test.aspx.cs" Inherits="Nunyabusiness.Test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>

<meta http-equiv="CACHE-CONTROL" content="NO-CACHE" />
<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" />

<style type="text/css">

</style>

<script src="http://Nunyabusiness/Javascript/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="http://Nunyabusiness/Javascript/jquery-ui-1.10.2.custom.min.js" type="text/javascript"></script>

<script type="text/javascript" language="javascript">

    function doStuff() {

        // NOTE: I have included a while loop only for demonstration purposes. In my code I have 
        //       broken processing up in to very granular bits to let the browser breath, but the
        //       fact is, there is going to be *some* point where js is busy doing stuff...
        //       This loop just lets me blow it up, every time, without, err.. fail :|

        while (1) { // close the window, ie go boom

            // yes I can do this by setting an interval, and it prevents the crash, but that's not
            // a feasible solution... might as well write my own browser/scripting engine if this thing can *never* 
            // be busy...
        }
    }

    $(document).ready(function () {

        alert('here...');

        doStuff();
    });

</script>

</head>
<body>
<form id="form1" runat="server">

<div id="divBusy">&nbsp;
</div>    

<div>

</div>
</form>
</body>
</html> 
```

# c++ - 来自重载 << 运算符的奇怪链接器错误 - C++

> ID：15818901
> 
> 赞同：1
> 
> 时间：2013-04-04T18:28:50.543
> 
> 标签：c++, debugging, linker

我写了一个小的 Timer 类来检查我的代码的性能。源代码可以在这里找到[http://pastebin.com/i1PX2VPN](http://pastebin.com/i1PX2VPN)（稍后我将在此处突出显示重要部分）

现在我遇到了一个非常奇怪的错误：上面链接的代码在 Timer.hpp 文件中。我在我的 main.cpp 中使用了这个文件，它工作得很好。但是，我也想在另一个源文件中使用它，然后，只要我添加一个

```
 #include <Timer.hpp> 
```

进入下一个源文件，我得到以下链接器错误：

```
 ld: duplicate symbol operator<<(std::basic_ostream<char, std::char_traits<char> >&, Timer const&) in /var/folders/XZ/XZ93KWBqG0SR1aCVpTCVQE+++TI/-Tmp-//ccyaHyyU.o and /var/folders/XZ/XZ93KWBqG0SR1aCVpTCVQE+++TI/-Tmp-//ccETAaTw.o
  collect2: ld return 1 as exit status
  make: *** [debugd] Error 1 
```

功能是

```
 std::ostream& operator<<(std::ostream& os, const Timer& t) {
         return os << std::scientific << std::setw(8)  << std::setprecision(3)
                            << t.timeTotal_ << " \t " << t.timeMin_ << " \t " <<          t.timeMax_;
   } 
```

没什么太花哨的......再次：只要它只包含在我的 main.cpp 中，它就可以工作

显然，这似乎是运算符的多个定义（？）的问题。但我不明白为什么或如何解决它。我使用 include-guards 来避免它被多次包含。

我已经检查过我从未听说过的 C++ 库中的其他任何地方是否还有另一个 Timer 类，这显然不是这种情况（重命名该类无论如何都不会改变任何东西）......

在 Timer.hpp 中，还定义了另一个类，也有自己的 operator<< 重载。我不知道这是否重要，我只是觉得我应该提一下

所以...我期待着您的想法，谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T18:30:15.690

您应该将您的函数标记为`inline`，因为它是一个全局函数，其定义包含在多个翻译单元中。

```
 inline std::ostream& operator<<(std::ostream& os, const Timer& t) {
//  ^^^^^^
         return os << std::scientific << std::setw(8)  << std::setprecision(3)
               << t.timeTotal_ << " \t " << t.timeMin_ << " \t " 
               << t.timeMax_;
    } 
```

或者，您可以将函数的声明留在标题中，并将定义放在一个`.cpp`文件中。

如果您想知道为什么包含保护不能将您从多个符号定义中解救出来，您可能会发现**[StackOverflow 上的这个问答](https://stackoverflow.com/questions/14909997/why-arent-my-include-guards-preventing-recursive-inclusion-and-multiple-symbol)**很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T18:30:06.820

包含守卫只防止文件被多次包含*在同一个翻译单元*中。如果您将它包含在`.cpp`单独编译的两个不同文件中（`.cpp`通常是哪些文件），则您有多个定义。

把它放在一个实现文件中，只在头文件中留下一个声明。

# java - Struts ActionProxy：如何设置方法？

> ID：15818902
> 
> 赞同：2
> 
> 时间：2013-04-04T18:28:52.450
> 
> 标签：java, struts2, junit, struts, opensymphony

我正在使用 openSymphony 2.1.2，并且我有一些为旧版本的 openSymphony 编写的旧代码。

如您所见，它告诉我`ActionProxy`没有方法`setMethod(String)`。它可能[曾经有](http://www.opensymphony.com/xwork/api/com/opensymphony/xwork2/ActionProxy.html#setMethod%28java.lang.String%29)。但[现在不是了](http://www.jarvana.com/jarvana/view/com/opensymphony/xwork/2.1.2/xwork-2.1.2-javadoc.jar!/com/opensymphony/xwork2/ActionProxy.html)。

但它还是有方法的`String getMethod()`。那么如何有一个方法变量我可以得到，但不能设置？如何在新 API 中设置方法？

```
import com.opensymphony.xwork2.ActionProxy;

protected ActionProxy proxy = null;

//used to work with older versions of openSymphony, now there's a compilation error here:
//The method setMethod(String) is undefined for the type ActionProxy
proxy.setMethod(methodName); 
```

**更新：**

我正在开发一个使用 openSymphony 2.1 的系统（不是我编写的）。和 Struts 2.3.8。

在该系统上，我正在尝试应用以下代码：

[使用 Struts 2.0 进行动作单元测试。第2部分](http://www.lischke-online.de/index.php/java/action-unit-testing-with-struts-2-0-part-2)

该代码因我的项目使用的 openSymphony 和 Struts 版本而失败。所以我正在尝试将该代码升级到较新版本的 openSymphony 和 Struts。

我需要它以便能够在基于不同框架的系统中模拟从我的系统运行 struts 操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:48:20.327

`DefaultActionProxy`正在实施`ActionProxy`。要设置属性，您应该通过您的实现`method`扩展`DefaultActionProxy`和设置超级保护属性。`setMethod`

然后你应该扩展和`DefaultActionProxyFactory`替换`DefaultActionProxy`.`createActionProxy()`

之后修改`struts.xml`和覆盖

```
<bean type="com.opensymphony.xwork2.ActionProxyFactory" name="xwork" ... /> 
```

与您自己的工厂。

但最好在带有`method:`前缀的参数中设置方法，或者`setMethod`在您可以从 获得的`ActionMapping`类中使用，`ActionContext`或者您可以扩展`DefaultActionMapper`以获得所需的映射。请参阅[文档](https://struts.apache.org/core-developers/action-mapper.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:19:45.247

只需使用作为参数之一的适当`createActionProxy`方法即可。`ActionProxyFactory``methodName`

```
public ActionProxy createActionProxy(String namespace, String actionName,
    String methodName, Map<String, Object> extraContext, boolean executeResult,
    boolean cleanupContext); 
```

或者

```
public ActionProxy createActionProxy(String namespace, String actionName,
    String methodName, Map<String, Object> extraContext); 
```

或者

```
public ActionProxy createActionProxy(ActionInvocation actionInvocation,
    String namespace, String actionName, String methodName,
    boolean executeResult, boolean cleanupContext); 
```

参见： http: [//svn.apache.org/viewvc/struts/struts2/tags/STRUTS_2_3_8/xwork-core/src/main/java/com/opensymphony/xwork2/ActionProxyFactory.java ?view=markup](http://svn.apache.org/viewvc/struts/struts2/tags/STRUTS_2_3_8/xwork-core/src/main/java/com/opensymphony/xwork2/ActionProxyFactory.java?view=markup)

# c - 这个指针转换是否打破了严格的别名规则？

> ID：15818906
> 
> 赞同：9
> 
> 时间：2013-04-04T18:29:11.210
> 
> 标签：c, pointers, casting, c99, strict-aliasing

这是来自 Quake III Arena 的快速反平方根实现：

```
float Q_rsqrt( float number )
{
        long i;
        float x2, y;
        const float threehalfs = 1.5F;

        x2 = number * 0.5F;
        y  = number;
        i  = * ( long * ) &y;                       // evil floating point bit level hacking
        i  = 0x5f3759df - ( i >> 1 );               // what?
        y  = * ( float * ) &i;
        y  = y * ( threehalfs - ( x2 * y * y ) );   // 1st iteration
//      y  = y * ( threehalfs - ( x2 * y * y ) );   // 2nd iteration, this can be removed

        return y;
} 
```

我注意到**long int在** **float**的地址（转换为 a ）`i`处获取取消引用的值。然后，代码在将取消引用的值存储在into的地址（转换为 a ）之前执行操作。`long *` **`y``i``float *``i``y`**

 **这是否会破坏严格的别名规则，因为`i`与 不是同一类型`y`？

我认为也许它不会因为值被取消引用和*复制*；所以操作是在副本而不是原件上执行的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T18:40:05.617

是的，这段代码被严重破坏并调用了未定义的行为。特别要注意这两行：

```
 y  = number;
    i  = * ( long * ) &y;                       // evil floating point bit level hacking 
```

由于对象`*(long *)&y`具有类型`long`，编译器可以自由地假设它不能为类型对象设置别名`float`；因此，编译器可以相互重新排序这两个操作。

要修复它，应该使用联合。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T19:11:23.543

是的，它打破了别名规则。

在现代 C 中，您可以更改`i = * (long *) &y;`为：

```
i = (union { float f; long l; }) {y} .l; 
```

并`y = * (float *) &i;`：

```
y = (union { long l; float f; }) {i} .f; 
```

如果您有保证，在使用的 C 实现中，`long`并且`float`具有合适的大小和表示，则行为由 C 标准定义：一种类型的对象的字节将被重新解释为另一种类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T21:52:55.630

是的，它打破了别名规则。

最干净的解决方法`i = * ( long * ) &y;`是：

```
 memcpy(&i, &y, sizeof(i)); // assuming sizeof(i) == sizeof(y) 
```

它避免了对齐和混叠问题。`memcpy()`在启用优化的情况下，通常应该只用几条指令替换对的调用。

就像建议的任何其他方法一样，这种方法不能解决与陷阱表示相关的任何问题。然而，在大多数平台上，整数中没有陷阱表示，如果您知道浮点格式，则可以避免浮点格式陷阱表示（如果有的话）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T18:39:46.123

`i = * ( long * ) &y;`

这打破了别名规则，因此调用了未定义的行为。

您正在访问`y`类型不同于 的对象`float`，或者是 的有符号/无符号变体`char`。

`y = * ( float * ) &i;`

上面的这个语句也打破了别名规则。**

# wpf - 如何为文本框创建依赖属性

> ID：15818912
> 
> 赞同：0
> 
> 时间：2013-04-04T18:29:17.270
> 
> 标签：wpf, textbox, dependency-properties

我对 wpf 以及依赖属性非常陌生。我们如何为 TextBox 创建一个依赖属性，该属性从解决方案中的任何其他类设置 TextBox 的文本属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:36:08.507

你不需要一个`DependencyProperty`。

`DependencyProperties`通常在您创建[自定义控件](https://stackoverflow.com/a/11248415/643085)时使用，这不是您在这里所做的。

在您的情况下，您需要使用[Data Binding](http://msdn.microsoft.com/en-us/library/ms752347.aspx)，这是 WPF 的一项功能，它允许您将 UI 元素的大多数属性的值“链接”或更精确地“绑定”到某些其他类的某些属性中的值。例如：

XAML：

```
<TextBox Text="{Binding LastName}"/> 
```

班级：

```
public class Person
{
    public string LastName {get;set;}
} 
```

[我建议您阅读WPFTutorial.net](http://www.wpftutorial.net/)中的基本 WPF 概念

# facebook - 从不同的 url 获取自定义 iFrame 以显示在 Facebook 页面选项卡中

> ID：15818914
> 
> 赞同：1
> 
> 时间：2013-04-04T18:29:23.913
> 
> 标签：facebook

我正在尝试获取 iframe 内的小部件以安装为 facebook 页面选项卡。现在设置的方式是用户可以自定义小部件，然后当他们完成后，会出现一个按钮，将他们定向到“添加页面选项卡”页面。他们自定义的小部件的小部件 url 添加到 url 的末尾，因此：

```
 https://www.facebook.com/dialog/pagetab?app_id=MY_APP_ID&next=CUSTOMIZED_WIDGET_URL 
```

我遇到的问题是：一旦用户单击“添加页面选项卡”，它只会转到该小部件 url，而不是转到该 iframe 中显示 url 内容的页面选项卡。页面选项卡已添加到我拥有的测试页面，但它没有显示我想要的内容，我稍后会介绍。我查看了其他一些执行我想要的操作的小部件，它们从该“添加页面选项卡”页面重定向到实际页面选项卡，其中的 iframe 中有自定义小部件。

考虑到小部件的 url 会因用户而异，我也不确定应该在我的应用程序设置中将 Page Tab url 设置为什么。如果我将页面选项卡设置为特定的 url，它当然会在我完成“添加页面选项卡”后在 iframe 中显示该 url，并且不会显示我的小部件。

我曾尝试寻找有关此的教程，但似乎找不到任何教程。如果我需要澄清这些，请告诉我。非常感谢任何建议。

# python - 替换子字符串的最简单方法

> ID：15818915
> 
> 赞同：0
> 
> 时间：2013-04-04T18:29:27.753
> 
> 标签：python

当我不知道我正在寻找的确切子字符串并且只知道分隔字符串时，替换字符串中的子字符串的最简单方法是什么？例如，如果我有以下内容：

```
mystr = 'wordone wordtwo "In quotes"."Another word"' 
```

我基本上想删除第一个引用的单词（包括引号）和后面的句点（。）所以结果字符串是：

```
'wordone wordtwo "Another word"' 
```

基本上我想删除第一个引用的单词和引号以及接下来的句号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:31:16.767

您正在这里寻找正则表达式，使用[`re`模块](http://docs.python.org/2/library/re.html)：

```
import re

quoted_plus_fullstop = re.compile(r'"[^"]+"\.')
result = quoted_plus_fullstop.sub('', mystr) 
```

该模式匹配文字引号，后跟 1 个或多个非引号字符，然后是另一个引号和句号。

演示：

```
>>> import re
>>> mystr = 'wordone wordtwo "In quotes"."Another word"'
>>> quoted_plus_fullstop = re.compile(r'"[^"]+"\.')
>>> quoted_plus_fullstop.sub('', mystr)
'wordone wordtwo "Another word"' 
```

# java - 将 Double 截断到小数点后 2 位？

> ID：15818919
> 
> 赞同：4
> 
> 时间：2013-04-04T18:29:41.530
> 
> 标签：java, math, double

我知道这个问题重复了很多次，但请先看一下声明，然后标记它已经回答:)

为了将双精度值截断 2 位小数，我使用了两种在各处都提到的方法。它们在下面给出

```
 //this one
    DecimalFormat dtime = new DecimalFormat("#.##"); 
    return Double.valueOf(dtime.format(val));
    //or the one below
    BigDecimal bd = new BigDecimal(val);
    BigDecimal rounded = bd.setScale(2, BigDecimal.ROUND_HALF_UP);
    return rounded.doubleValue(); 
```

问题在于，对于这两种方式，我大多在数据集中获得正确的舍入值。但奇怪的是，我同时得到了 2.00000000000005 或 19.97999999999 之类的值。

我没有得到的问题是为什么只有几个值没有四舍五入。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:03:32.190

> 为了将双精度值截断 2 位小数，我使用了两种在各处都提到的方法。

他们都错了，因为他们正在尝试不可能的事情。没有将双精度数截断到小数点后两位的*事情，因为双精度数**没有*小数位。他们有二进制的地方。请在此处查看[我的答案](https://stackoverflow.com/questions/153724/how-to-round-a-number-to-n-decimal-places-in-java)以获取证据。如果你想要小数位，你必须使用十进制基数，即`BigDecimal`或`DecimalFormat`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:32:04.770

问题是，考虑到底层表示，浮点数本质上是近似的。因此，您将希望在近似值好的地方使用它们，并避免在近似值不好的地方（例如财务）使用它们。

调用`rounded.doubleValue()`仍然返回一个浮点数，因此它仍然受到表示限制的影响。

看

[http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-24T06:01:20.547

以下代码帮助我限制双精度值的小数位数（截断）。

```
public static Double truncate (double valueToTruncate, int numberOfDecimalPlaces) {

    if (valueToTruncate > 0) {
        return new BigDecimal(String.valueOf(valueToTruncate)).setScale(numberOfDecimalPlaces, BigDecimal.ROUND_FLOOR).doubleValue();
    } else {
        return new BigDecimal(String.valueOf(valueToTruncate)).setScale(numberOfDecimalPlaces, BigDecimal.ROUND_CEILING).doubleValue();
    }
} 
```

希望这可以帮助某人:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-29T20:22:51.590

我对此很陌生，但是将所有东西都放在我面前，我是这样做的。现在请注意，这是数学上的截断，除了在每行之后的调试中，我不会转换为字符串。

它并不优雅，但似乎有效。这纯粹是一个解决问题的框架。

反正;

```
import java.util.Scanner;
public class TestConstructs 
 {
private static double w;
private static int w1;
private static double w2;
private static double w3;
private static int w4;
private static double w5;
private static double w6;

public static void main(String[] args) 
{
    // TODO Auto-generated method stub
    TestConstructs foo = new TestConstructs();
    foo.setWage(w);

}

public void setWage(double w)
{

    Scanner input = new Scanner(System.in);
    System.out.println("Enter Wage: "); //enter something longish like 30987.978654 or w/e
    w = input.nextDouble();
    w1 = (int)w;
    System.out.printf("%d w1\n",w1);
    w2 = w - w1;
    System.out.printf("%.3f w2\n",w2);
    w3 = w2*100;
    System.out.printf("%.3f w3\n",w3);
    w4 = (int)w3;
    System.out.printf("%d w4\n",w4);
    w5 = (double)w4;
    System.out.printf("%.3f w5\n",w5);
    w6 = 0 + w5/100;
    System.out.printf("%.3f w6\n",w6);
    w = w1 + w6;

    System.out.printf("%.3f final value\n",w); //.3 to show zero 
    input.close();
}

} 
```

我最后得到的输入工资： 30987.978654 30987 w1 0.979 w2 97.865 w3 97 w4 97.000 w5 0.970 w6 30987.970 最终值

# c# - 不带参数的 DbContext ExecuteSQLCommand

> ID：15818922
> 
> 赞同：2
> 
> 时间：2013-04-04T18:30:00.320
> 
> 标签：c#, .net, sql-server, entity-framework

我正在尝试传入一个 SQL 字符串来删除一些记录。我正在使用 DbContext.Database.ExecuteSqlCommand 函数，但是除了 SQL 字符串之外，它还需要以下形式的参数列表：params Object[] 参数

由于我不需要发送任何参数，因此我尝试传递 null ，但这会生成一个错误，指出 null 不是有效参数。我找不到该方法的重载。如何发送不需要附加参数的 SQL 命令？这是我的代码示例：

```
db.Database.ExecuteSqlCommand("DELETE FROM SignoffCommentAttachment 
WHERE SignoffCommentAttachment.SignoffCommentID 
IN (SELECT [SignoffCommentID] FROM [SignoffComments] 
WHERE SignoffID = " + signOffID.ToString() + ")", null); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T18:43:35.420

parameters 是 params 参数，因此您可以将 0 传递给许多对象。这应该工作

```
db.Database.ExecuteSqlCommand("DELETE FROM SignoffCommentAttachment WHERE SignoffCommentAttachment.SignoffCommentID IN (SELECT [SignoffCommentID] FROM [SignoffComments] WHERE SignoffID = " + signOffID.ToString() + ")"); 
```

不过，您确实应该参数化 signOffID 。就像是

```
db.Database.ExecuteSqlCommand("DELETE FROM SignoffCommentAttachment WHERE SignoffCommentAttachment.SignoffCommentID IN (SELECT [SignoffCommentID] FROM [SignoffComments] WHERE SignoffID = {0})", signOffID); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T18:55:26.697

为了获得一点 SQL 注入保护，您应该在此处使用参数。你有一个参数。您可能还应该使用存储过程，但这是另一个问题。

我会这样编码......

```
var parms = new ParameterCollection();

parms.Add("signOffId", signOffID);

db.Database.ExecuteSqlCommand("DELETE FROM SignoffCommentAttachment 
WHERE SignoffCommentAttachment.SignoffCommentID 
IN (SELECT [SignoffCommentID] FROM [SignoffComments] 
WHERE SignoffID = @signOffID)", parms); 
```

我没有在那里检查我的语法，但这就是我要使用的方法。只有我会使用存储过程。

# variables - WooCommerce 可变产品样本被禁用，不知道为什么

> ID：15818926
> 
> 赞同：1
> 
> 时间：2013-04-04T18:30:07.080
> 
> 标签：variables, product, woocommerce

我最近一直在使用 WooCommerce 和官方 Woocommerce 可变产品样本插件开发一个新的 Wordpress 网站。

我的问题是产品变体样本已停止自行工作。这是一个示例页面：http: [//butterlane.com/butterlanedev/product/cupcake/](http://butterlane.com/butterlanedev/product/cupcake/)

沿顶部排列的图像样本应在单击时切换产品图像。之前一切正常，但现在样本变灰了，我可以在 CSS 中看到它们已切换到 .disabled 类

我已经尝试创建具有全新变体的全新产品，但页面仍然不允许我单击任何样本。我真的不知道这怎么可能会自行停止工作。希望有使用 WooCommerce 可变产品样本插件经验的人可以帮助我弄清楚发生了什么。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:18:29.887

我相信新的 Woocommerce (2.05) 和插件的最新版本在选择了其他变体图像后与其他变体图像的关系存在冲突。我猜变体插件在它的 javascript 中使用了与 WooCommerce 选择使用的其他东西相同的触发器 ID 之一（这些东西只有这么多的逻辑名称）。

在这个时候，它基本上扼杀了购买任何具有变化的产品的能力......这“不太有用”，目前我建议关闭插件并使用默认选择列表，虽然丑陋至少允许选择.

等待自己解决这个问题......而且由于 WooThemes 决定托管在地球上最慢的服务器上，我实际上无法查看他们的网站来检查插件的最新版本。

我想我会在推特上联系他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T04:55:38.360

尝试关闭您的色板插件，并查看在单个产品视图页面中您的变体的选择下拉列表中是否仍有“禁用”类。如果该类仍然存在，那么插件将按应有的方式工作。

如果库存中没有更多库存或无法购买，则这些变体将被禁用。检查您的可变产品在每个变体中的库存数量和价格。

# android - 我如何在 Android 中使用 lxml？

> ID：15818931
> 
> 赞同：0
> 
> 时间：2013-04-04T18:30:31.817
> 
> 标签：android, python, for-loop, lxml, recipe

适用于 Android 的 Python 支持 lxml。但是如何导入呢？在谷歌网站上，recipe.sh 文件中有一个模块。但我无法通过那里的外壳运行它。我收到一些错误：

```
app_122@android:/mnt/sdcard $ sh recipe.sh
: nor found]
recipe.sh[6]: get_directory: not found
: not found]
recipe.sh[9]: syntax error: '{^M' expected
1 app_122@android:/mnt/sdcard 
```

我不能只获取一些 .py 文件并将其简单地导入我的程序吗？

我使用了这段代码： [https ://github.com/kivy/python-for-android/blob/master/recipes/lxml/recipe.sh](https://github.com/kivy/python-for-android/blob/master/recipes/lxml/recipe.sh)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:42:30.913

我想你可能会混淆[py4a](http://code.google.com/p/python-for-android/)是[SL4A](http://code.google.com/p/android-scripting/)（Android 脚本层）的姊妹项目和[https://github.com/kivy/python-for-android](https://github.com/kivy/python-for-android)这是[Kivy的姊妹项目](http://kivy.org)

两者都是具有不同目标的不同项目。您应该清楚要使用哪个项目。阅读文档以更加熟悉。

kivy/python-for-android[文档](http://python-for-android.readthedocs.org/en/latest/)

[讨论组](https://groups.google.com/forum/#!forum/python-android)

py4a[文档](http://code.google.com/p/python-for-android/)

[讨论组](http://groups.google.com/group/python-for-android)

# c - 空白窗口应用程序不显示？

> ID：15818934
> 
> 赞同：1
> 
> 时间：2013-04-04T18:30:52.490
> 
> 标签：c, winapi, window

当我输入这个时，我的计算机上没有显示空白窗口：

```
#define WIN32_LEAN_AND_MEAN

#include<Windows.h>

bool InitMainWindow(HINSTANCE, int);
LRESULT CALLBACK MsgProc(HWND, UINT, WPARAM, LPARAM);
const int WIDTH=800;
const int HEIGHT=600;

HWND hwnd=NULL;

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdline,       int mCmdShow)
{
    if(!InitMainWindow(hInstance,mCmdShow))
        return 1;
    MSG msg={0};

    while(WM_QUIT!=msg.message)
    {
        if(PeekMessage(&msg,0,0,0,PM_REMOVE))

        {  
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }
    return static_cast<int>(msg.wParam);

}

bool InitMainWindow( HINSTANCE hInstance, int mCmdShow)
{
    WNDCLASSEX wcex;

    wcex.cbSize=sizeof(wcex);
    wcex.style=CS_HREDRAW|CS_VREDRAW;
    wcex.cbClsExtra=0;
    wcex.cbWndExtra=0;
    wcex.lpfnWndProc=MsgProc;
    wcex.hInstance=hInstance;
    wcex.hIcon=LoadIcon(NULL,IDI_APPLICATION);
    wcex.hCursor=LoadCursor(NULL,IDC_ARROW);
    wcex.hbrBackground=(HBRUSH)GetStockObject(BLACK_BRUSH);
    wcex.lpszClassName = (LPCWSTR)"tutorialClass";

    wcex.lpszMenuName=NULL;
    wcex.hIconSm=LoadIcon(NULL,IDI_WINLOGO);

    if(!RegisterClassEx(&wcex))
        return false;

    hwnd=CreateWindow((LPCWSTR)"tutorial class",
            (LPCWSTR)"tutorial window",
            WS_OVERLAPPED | WS_SYSMENU |WS_CAPTION,
            GetSystemMetrics(SM_CXSCREEN)/2-WIDTH/2,
            GetSystemMetrics(SM_CYSCREEN)/2-HEIGHT/2,
            WIDTH,
            HEIGHT,
            (HWND)NULL,
            NULL,
            hInstance,
            (LPVOID*)NULL);

    if(!hwnd)
        return false;

    ShowWindow(hwnd, mCmdShow);

    return true;

}

LRESULT CALLBACK MsgProc(HWND hwnd, UINT msg,WPARAM wParam,LPARAM lParam)
{
    switch(msg)
    {
        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;
        case WM_CHAR:
            switch(wParam)
            {
                case VK_ESCAPE:
                    PostQuitMessage(0);
                    return 0;
            }
            return 0;
    }
    return DefWindowProc(hwnd, msg ,wParam,lParam);
} 
```

在**Visual Studio 2010 Express Edition**中，我收到以下错误和警告：

```
'WindowBlank.exe': Loaded 'C:\Users\ramapriya\Documents\Visual Studio 2010\Projects\WindowBlank\Debug\WindowBlank.exe', Symbols loaded.
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\user32.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\gdi32.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\lpk.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\usp10.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\msvcrt.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\advapi32.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\sechost.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\rpcrt4.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\sspicli.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\cryptbase.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\msvcr100d.dll', Symbols loaded.
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\imm32.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\msctf.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\ProgramData\Browser Manager\2.6.1125.80\{16cdff19-861d-48e3-a751-d99a27784753}\browsemngr.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\shell32.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\shlwapi.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\ole32.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\oleaut32.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\version.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\imagehlp.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\psapi.dll', Cannot find or open the PDB file
'WindowBlank.exe': Loaded 'C:\Windows\SysWOW64\uxtheme.dll', Cannot find or open the PDB file
The program '[7792] WindowBlank.exe: Native' has exited with code 1 (0x1). 
```

有时在我的电脑上编译需要很长时间，因为它很慢。我不明白代码中有什么问题。我刚开始学习，我尝试更改参数，顺序，重新输入所有内容，创建一个新项目，但似乎没有出现一个空白窗口。这是为什么？

我不知道这段代码有什么问题。或者可能缺少一些图书馆？我有 Windows 7 64 位家庭版，还安装了 Directx 11 SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:17:39.650

您还可以使用`LPCTSTR`更安全的方式，例如：

```
wcex.lpszClassName = (LPCTSTR)_T("tutorialClass"); 
```

在调用`CreateWindow()`函数时也做同样的事情。

此外，只需从 Visual Studio 的 Build 菜单中选择 Rebuild Solution 一次即可。

或者先选择清洁解决方案，然后选择构建解决方案，看看这是否能解决您的问题。

您可以做的另一件事是删除 .ncb、.sdf、.opt、.aps 文件（如果它们在您的解决方案目录中），然后再次重建解决方案并检查。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-26T10:12:19.793

我知道你的班级名称不同`wcex.lpszClassName = (LPCWSTR)"tutorialClass"`；和 `hwnd=CreateWindow((LPCWSTR)`“辅导班”，

# mysql - 如何正确地将 sql 数据导出到 .csv

> ID：15818938
> 
> 赞同：1
> 
> 时间：2013-04-04T18:31:00.573
> 
> 标签：mysql, sql

我正在尝试将非常大的数据从 mysql 导出到 .csv 并使用 .csv 将 .csv 导入另一个相同的表

```
into outfile 
```

在 phpmyadmin 中。但是当我查看excel文件时，它搞砸了。似乎 mysql 无法确定 longtext 格式，所以它转到另一行，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/FzF1w.jpg)

因此，当我尝试将其导入到相同的表中时，一切都搞砸了。这是我到其他表的导入代码：

```
LOAD DATA INFILE 'final.csv'
INTO TABLE oldforum_nodewithusers
FIELDS TERMINATED BY ',' 
ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\r\n' 
```

顺便说一句，我手动输入了表格的标题，因为我也不知道如何将标题放入导出代码中。这是我的导出代码：

```
SELECT 'some table columns'
into outfile 'final.csv'
FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\r\n' 
```

那么如何解决这个问题呢？它在出口部分吗？还是进口部分？

**我现在知道问题了，图片中下一行的文字超出了 Excel 中某个单元格的文字限制**

因此，当我将其导入另一个表时，该表会将“下一行”文本视为另一行。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:30:47.213

天哪，我太笨了。答案很简单，我没有将其导出为 .csv 文件，而是将其导出为 .sql。LOL 非常简单易行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:38:49.827

我会使用命令行方法（对我来说效果很好）。在 Linux（和其他 Unix 系统）上：

```
$ mysql [connection parameters] yourDB -e"select..." | sed 's/\t/,/g' > yourOutput.csv 
```

* * *

**解释**

*   该`[connection parameters]`部分必须包括：（`-h YourHost`其中`YourHost`必须是有效的 IP 地址或服务器名称，或`localhost`），`-u YourUser`和`-pYourPassword`（请注意，您不能在`-p`和之间留空格`YourPassword`）
*   `mysql ... -e"select..."`将查询结果输出到标准输出（您的控制台），用制表符 ( `\t`) 分隔字段。
*   `| sed 's/\t/,/g'``\t`用逗号替换所有制表符 ( )。它接受上一个命令的输出进行处理，并将结果输出到标准输出
*   `> yourOutput.csv`将前一个命令的输出重定向到文件而不是控制台

* * *

**一个窗口选项**

据我所知，`sed`在 Windows 中没有“本机”替代品。但是您可以安装 Cygwin，它具有“与 Windows 命令行兼容”的功能，可以复制大部分 Linux 功能。此外，您可能想看看 GnuWin32，它具有`sed`（除其他外）的实现

我还在[cmd.exe 是否有类似 sed 的实用程序？](https://stackoverflow.com/questions/127318/is-there-any-sed-like-utility-for-cmd-exe)要创建类似于 的 VBScript `sed`，您可能需要检查一下。

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T19:03:17.153

尝试执行此技巧来获取标题：

```
select col1, col2 . . . -- export columns go here
into outfile . . .
from ((select 1 as isheader, 'Col1' as col1, 'Col2' as col2, . . .    -- headers go here
      ) union all
      (select 0 as isheader, col1, col2, . . . . -- data goes here
      )
     ) t
order by isheader desc 
```

在实践中，删除`order by`遗嘱可能也有效：

```
select *
into outfile . . .
from ((select 'Col1' as col1, 'Col2' as col2, . . .    -- headers go here
      ) union all
      (select col1, col2, . . . . -- data goes here
      )
     ) t 
```

MySQL 不保证 headers 将首先出现，但在实践中确实如此。

此外，为此，请确保您的列已正确转换为所需的字符串格式。

# javascript - 在 JavaScript 表单 Ajax 中检查“真实”响应

> ID：15818942
> 
> 赞同：-1
> 
> 时间：2013-04-04T18:31:15.990
> 
> 标签：javascript, ajax

为了响应 Ajax 请求，我的 php 文件要么`echo true`要么`echo false`. 在我的 JavaScript 文件中，我想根据响应调用两个函数之一。我显示的内容`xmlhttp.responseText`并发现它是 1 所以我尝试了

```
if(xmlhttp.responseText == 1)
{
  funcA()
}
else
{
  funcB()
} 
```

和

```
if(xmlhttp.responseText === 1)
{
  funcA()
}
else
{
  funcB()
} 
```

但`funcB()`总是被调用。如果我想`funcA()`在响应为 true 时被调用，我应该在 JavaScript if 语句中检查什么？

好的，一个答案说将整数转换为字符串，另一个答案说将字符串解析为整数。我试过了，两种方法都有效，一种方法比另一种方法快吗？

**有时我坚信问题不应该被否决，这就是其中之一。**我没有看到的一个缺点是，如果我尝试在我的 PHP 页面中输出某些内容（例如`echo()`或`var_dump()`），那么这个 JavaScript 将始终评估为真。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:33:21.830

当您`responseText`将成为字符串时，您正在执行完全匹配。您可以将 responseText 类型转换为整数（通过`parseInt()`）或进行松散检查（将 === 替换为 ==）。任何一种解决方案都可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:37:18.737

如果 php 回显一个布尔值，您应该能够像这样检查条件下的响应：

```
if (xmlhttp.responseText) {
    funcA();
else {
    funcB();
} 
```

条件会自动为您转换为布尔值。

# android - 为什么我不能使用字符串 ID android.R.string.share？

> ID：15818944
> 
> 赞同：3
> 
> 时间：2013-04-04T18:31:26.700
> 
> 标签：android, android-resources

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:31:43.880

您正在为哪个 SDK 版本编译？请检查相同SDK版本的strings.xml ..我认为目标SDK版本和strings.xml有一些不匹配（你指的是，“share”存在的地方）

但是，我建议在应用程序 strings.xml 中添加您自己的“共享”字符串，以避免由于 Android Fragmented 性质而导致的不必要的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:45:55.770

它们只是资源文件夹下的资源。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="share">hello</string>
</resources> 
```

上述资源在您的包名下的 R.java 文件中有一个条目。您可以打开 R.java 并查看它。

```
 public static final int share=0x7f040000; 
```

您可以将 Strings.xml 中的字符串称为

```
 R.String.share 
```

R.strin.share 是一个整数。

你也可以得到字符串

```
 String s= getResources().getString(R.string.share); 
```

编辑：

[http://developer.android.com/guide/topics/resources/accessing-resources.html#PlatformResources](http://developer.android.com/guide/topics/resources/accessing-resources.html#PlatformResources)。

检查上面链接中标题**访问平台资源下的主题**

Android 包含许多标准资源，例如样式、主题和布局。要访问这些资源，请使用 android 包名称限定您的资源引用。

有关所有资源的列表，请查看链接

[http://developer.android.com/reference/android/R.html](http://developer.android.com/reference/android/R.html)

来自[http://developer.android.com/reference/android/R.string.html的列表](http://developer.android.com/reference/android/R.string.html)

![在此处输入图像描述](https://i.stack.imgur.com/37ysG.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:34:43.187

android.R 是系统的R

您的 R 只是您自己的包名称中的 R。因此，只需调用它`R.string.share`而不是`android.R.string.share`引用它时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-25T10:39:56.657

这是因为它不是在android.R.string 中定义的，而是在com.android.internal.R$string 中定义的。如果没有一些“黑客”，您将无法访问它。

```
 public static int getReflactField(String className,String fieldName){
       int result = 0;
       try {
           Class<?> clz = Class.forName(className);
           Field field = clz.getField(fieldName);
           field.setAccessible(true);
           result = field.getInt(null); 
       } catch (Exception e) {
           e.printStackTrace();
       }
       return result;
   }
   ...
   int share_id=getReflactField("com.android.internal.R$string", "share");
   if(share_id!=0)
       Toast.makeText(getContext(), ""+getResources().getString(share_id),0).show(); 
```

这适用于我的 android 4.4 和 8.0 设备

或者干脆使用 `getResources().getString(Resources.getSystem().getIdentifier("share","string", "android"))`

# c++ - C++ similar behavior to java.lang.Enum

> ID：15818948
> 
> 赞同：3
> 
> 时间：2013-04-04T18:31:38.137
> 
> 标签：c++, enumeration

Does c++ or the STL support the function [valueOf](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html) within `java.lang.Enum<e>` such that it enables

```
elements = Syntax.valueOf(temp);

switch(elements) {} 
```

and whereby `elements` is of type `enum` and `temp` is of type String?

# php - OOP PHP - Returning $connection from functions (please see code)

> ID：15818949
> 
> 赞同：0
> 
> 时间：2013-04-04T18:31:40.687
> 
> 标签：php

Procedural PHP works for me, but when I try to code like I do in objective C I cannot seem to get the functions to work. I think it has something to do with my variable scope and the functions not returning any values. Where am I going wrong with my code here?

```
 <?php 

      require_once("constants.php");

      class Main {

public $menu;
public $connection;

function connectToDatabase() {
    //connect to database & check connection
    $connection = mysqli_connect(DB_SERVER, DB_USER, DB_PASS, DB_NAME);
    if (mysqli_connect_errno()) { echo "Failed to connect to MySQL: " .      mysqli_connect_error(); }
}

function queryDatabase($select, $from) {
    $result = mysqli_query($connection,"SELECT $select FROM $from");
}

function closeDatabaseConnection() {
    mysqli_close($connection);
}

function displayMenu() {

    //connect to database & check connection
    connectToDatabase();

    //get menu data
    queryDatabase(*, pages);

    //construct menu data
    echo '<ul class="mainNavigation">';
    while($row = mysqli_fetch_array($result))
        {
            echo '<li><a href="' . $row['filename'] . '.php">';
            echo $row['menu_name'];
            echo '</a></li>';
        }
    echo '</ul>';

    //close connection
    closeDatabaseConnection();
}

function displayFooter() {

}

function getUser() {

}

function userLogIn() {

}

  } 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:37:41.817

你应该使用 $this->connection 而不是使用 $connection，并像这样运行它：

```
$Db = new Main();

$Db->connectToDatabase(); 
```

如果要访问方法内的属性，请确保使用 引用它`$this->prop`，而不仅仅是 $prop。如果方法是静态的，请`self::prop`改用。

`$this`指类的当前实例化。`::`如果方法/属性是静态的 ( `DBConnection::connection` `DBConnection::connectToDatabase()`)/ ，您将使用范围解析运算符 ( )

另外，我将类“Main”重命名为 DBConnection 之类的其他名称（PHP 不像 C 那样使用主要方法），然后：

```
$Db = new DBConnection();
$Db->connectToDatabase(); 
```

因为在 PHP 中，虽然您可以在一个名为 connection.php 的 PHP 文件中拥有一个类，但具有一个 Main 类，如果您有另一个遵循相同模式的类，那么您将有两个 Main 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:37:49.420

如果你想在它自己的类中使用方法或变量，你必须放在`$this->`它前面。例如，这`connectToDatabase();`将成为这个`$this->connectToDatabase();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T22:06:42.543

这是我经常使用的 mysqli 连接类。它可能无法回答您的问题，但您可以研究它，它应该可以帮助您更好地理解这个概念。无论如何，它对我有用。

```
class DBConnection  
{       
    protected $mysqli;
    private  $db_host='localhost';
    private  $db_name='';
    private  $db_username='';
    private  $db_password='';

    public function __construct() {
        $this->mysqli = new mysqli($this->db_host,$this->db_username,
        $this->db_password, $this->db_name) or die($this->mysqli->error);

        return $this->mysqli;
    }

    public function getLink() {
        return $this->mysqli;
    }

    public function query($query) {
        return $this->mysqli->query($query);
     }

    public function real_escape_string($str) {
        return $this->mysqli->real_escape_string($str);
    }

    function __destruct(){
        $this->mysqli->close();
    }
} 
```

然后当您需要连接到另一个类中的数据库时，请在构造函数中调用它，如下所示：

```
public function __construct(DBConnection $mysqli) {
    $this->mysqli = $mysqli->getLink();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T18:39:48.733

这门课有各种各样的问题，所以我将重点关注几个关键点，也许你可以从那里修复它，而无需我们完全重写

首先，考虑一下：

```
public $connection;

function connectToDatabase() {
    //connect to database & check connection
    $connection = mysqli_connect(DB_SERVER, DB_USER, DB_PASS, DB_NAME);
    if (mysqli_connect_errno()) { echo "Failed to connect to MySQL: " .      mysqli_connect_error(); }
} 
```

你声明一个类变量$connection，没关系。但是在您的函数中，您分配了一个局部变量而不是访问类变量。在一个类中，您可以使用 $this 调用所有类成员。所以函数应该是：

```
function connectToDatabase() {
    //connect to database & check connection
    $this->connection = mysqli_connect(DB_SERVER, DB_USER, DB_PASS, DB_NAME);
    if (mysqli_connect_errno()) { echo "Failed to connect to MySQL: " .      mysqli_connect_error(); }
} 
```

现在，其他方法尝试调用函数，但它们需要做同样的事情：

```
function displayMenu() {

    //connect to database & check connection
    // this should just check to see if $connection is populated. if not then call this method
    $this->connectToDatabase(); 
```

并且此方法不访问类 var 进行连接：

```
function queryDatabase($select, $from) {
    $result = mysqli_query($this->connection,"SELECT $select FROM $from");
} 
```

这几个例子应该给你访问类方法和变量的基本概念。您可以提出具体问题，我们可能会更新，但现在这应该让您继续前进。

# scikit-learn - SVM for Text Mining using scikit

> ID：15818951
> 
> 赞同：2
> 
> 时间：2013-04-04T18:31:47.130
> 
> 标签：scikit-learn, svm, text-mining

Can someone share a code snippet that shows how to use SVM for text mining using scikit. I have seen an example of SVM on numerical data but not quite sure how to deal with text. I looked at [http://scikit-learn.org/stable/auto_examples/document_classification_20newsgroups.html](http://scikit-learn.org/stable/auto_examples/document_classification_20newsgroups.html) but couldn't find SVM.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T10:33:50.620

在文本挖掘问题中，文本由数值表示。每个特征代表一个单词，值是二进制数。这给出了一个包含很多零和几个 1 的矩阵，这意味着相应的单词存在于文本中。单词可以根据它们的频率或其他标准赋予一些权重。然后你得到一些实数而不是 0 和 1。

将数据集转换为数值后，您可以使用以下示例：[http ://scikit-learn.org/dev/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC](http://scikit-learn.org/dev/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC)

# c# - 当我有外键和唯一约束时，如何在 LINQ to SQL 中插入？

> ID：15818952
> 
> 赞同：4
> 
> 时间：2013-04-04T18:31:49.703
> 
> 标签：c#, .net, linq-to-sql, foreign-keys, unique-constraint

假设我有一个简单的数据库模式，其中包含一个客户和订单表，其中包含从订单到客户的外键，以及客户名称的唯一键。

```
Customers
-----------
[CustomerID] INT NOT NULL
[Name] VARCHAR(50) NOT NULL    

Orders
-----------
[OrderID] INT NOT NULL
[CustomerID] INT NOT NULL

+------------+------+    +---------+------------+
| CustomerID | Name |    | OrderID | CustomerID |
|------------+------+    +---------+------------+
|          1 | John |    |       1 |          1 |
+------------+------+    +---------+------------+ 
```

我以显而易见的方式设置了 LINQ to SQL 实体，其中包含一个`Customer`实体和一个具有从to`Order`的一对多关联的实体。`Customer``Order`

当我想使用我的 LINQ 实体为 John 输入新订单时，我遇到了这个问题。我认为这样做的方法是`Customer`为 John 获取实体并将其分配给我的`Order`实体，然后提交，但它不起作用。这是我执行此操作的 C# 代码。

```
using (var db = new DataClassesDataContext())
{
    Order order = new Order();
    Customer existingCustomer = db.Customers.FirstOrDefault(c => c.Name == "John");

    if (existingCustomer == default(Customer))
    {
         Customer customer = new Customer();
         customer.Name = "John";
         order.Customer = customer;
    }
    else
    {
        order.Customer = existingCustomer;
    }

    db.Orders.InsertOnSubmit(order);
    db.SubmitChanges();
} 
```

我已经验证我确实在提交之前分配`existingCustomer`给我`Order`，但尽管如此，当我尝试提交时我仍然收到唯一键约束错误。

我对 LINQ to SQL 很陌生，所以我认为我只是在错误地处理这个问题。我应该如何实现我的代码来解决唯一约束？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T19:00:47.223

线

```
db.Orders.InsertOnSubmit(order); 
```

将整个对象图标记为插入。因此，如果您将该行移至正下方`Order order = new Order();`，则仅将订单标记为插入。这意味着对于新客户，您也必须致电`InsertOnSubmit`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:56:56.313

我认为你的代码应该没问题。不知何故，它试图插入一个新客户，但这不应该发生。

你能试试吗

```
 Customer existingCustomer = db.Customers.Single(c => c.Name == "John"); 
```

看看你有没有例外？在这种情况下，客户表的 DBML 可能有问题。

不能帮助您解决问题，但由于您对名称有唯一约束，因此`Single / SingleOrDefault`优于`First/FirstOrDefault`.

# angularjs - 未调用 Angular Bootstrap Prettyprint 指令

> ID：15818954
> 
> 赞同：1
> 
> 时间：2013-04-04T18:31:53.560
> 
> 标签：angularjs, pretty-print

有没有人有使用 angular-bootstrap-prettify.js prettyprint 指令的经验？我在让它工作时遇到问题。这是我的示例：http: [//jsfiddle.net/mjxNV/](http://jsfiddle.net/mjxNV/)

```
<div ng-app>
    <div ng-controller="Ctrl1">
        <pre class="prettyprint linenums">
            <code class="lang-html">
                &lt;div class=&quot;container&quot;&gt;
                    &lt;div class=&quot;left_column&quot;&gt;
                        &lt;span&gt;Small Text&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;r_ightcolumn2&quot;&gt;
                        &lt;span&gt;Small Text&lt;/span&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            </code>
        </pre>
    </div>
</div> 
```

我的代码已显示，但它从未通过 prettyprint 标记化。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T21:20:58.837

我找到了一个示例并修改为您的示例：

```
angular.module('app', [])
    .controller('ctrl', function($scope) { });

ap.directive('prettyprint', function() {
    return {
    restrict: 'C',
        link: function postLink(scope, element, attrs) {
            element.html(prettyPrintOne(element.html(),'',true));
        }
    };
}); 
```

[http://jsfiddle.net/yAv4f/210/](http://jsfiddle.net/yAv4f/210/)

# c++ - 在内存空间中打开文件

> ID：15818961
> 
> 赞同：3
> 
> 时间：2013-04-04T18:32:27.340
> 
> 标签：c++, c, linux

[linux 3.2] 我想知道是否可以找出在程序中打开的文件的内存位置。假设我在 a.cpp 中有以下代码，它编译为 a.out：

```
FILE *f = fopen("myfile", "r"); 
```

内容会映射到a.out的内存空间吗？如果是这样，我怎么能找到它（页面？范围？）？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:34:18.910

FILE* 指向的结构包含有关文件状态的一些信息。内容没有映射​​到程序的内存空间。

如果要将文件内容映射到内存空间，则必须使用 mmap() 函数。这将为您提供指向进程逻辑内存空间中的内存区域的指针。该内存区域将保存文件的内容。

# javascript - 画布中的抗锯齿大文本

> ID：15818962
> 
> 赞同：6
> 
> 时间：2013-04-04T18:32:30.193
> 
> 标签：javascript, html, internet-explorer, google-chrome, canvas

如何让 Chrome（左侧）使用 IE 10（右侧）等抗锯齿功能？

到目前为止，我使用[了此代码。](http://jsbin.com/axezeh/1/)我需要使用细笔划吗？

![Chrome 中没有消除锯齿的大文本](https://i.stack.imgur.com/ZUwxw.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T02:17:24.797

简短的回答是您无法控制抗锯齿。

好消息是它在 Chrome 27.0.1453.12 dev-m 中看起来好多了：

![在此处输入图像描述](https://i.stack.imgur.com/FgkZi.png)

不幸的是，您要么必须“等待”，要么使用图像而不是 fillText。

Canvas 规范的文本部分是在大多数浏览器中最后实现的，*它显示了。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T18:30:50.460

您可能需要等待更长的时间。Chrome canary v28 仍然有不好的抗锯齿[小提琴](http://jsfiddle.net/e3zVC/5/)。

```
ctx.font = '72pt Arial';
ctx.fillText('Iowa 6', 0, 50); 
```

![chrome v28.0.1501.0 中的抗锯齿效果不佳](https://i.stack.imgur.com/INQBG.png)

# jquery - 使用 jquery 的响应式导航栏

> ID：15818963
> 
> 赞同：0
> 
> 时间：2013-04-04T18:32:30.887
> 
> 标签：jquery, html, css, responsive-design

我有一个导航栏，我想做出响应...当用户调整窗口大小并且宽度小于特定值时，`<a>`标签的填充应相应更改以适应`<li>`当前窗口宽度内的所有元素...这里是在我的示例中，我的[jsfiddle](http://jsfiddle.net/5kNgy/1/) 如果我们使寡妇的宽度小于 390 像素，那么最后一个元素会下降......我想要这样当用户在窗口宽度小于 390 像素时调整窗口宽度时，元素应该开始变小，可能是通过改变他们的左右填充......所以它会变得响应......我正在使用jQuery....我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:41:30.677

```
@media (max-width: 390px) 
{
    .hor-menu ul li a { padding: 0 0 0 0 !important; }
} 
```

我想这就是你想要做的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:40:05.617

在 CSS 中使用媒体查询，在这种情况下不需要 jQuery：

[http://jsfiddle.net/5kNgy/2/](http://jsfiddle.net/5kNgy/2/)

```
@media only screen and (min-width:0px) and (max-width:390px) {        
    .hor-menu ul li a {padding:2px;}
} 
```

# jquery - jQuery Mobile 1.3.0 - 对话框窗口不会在通过 AJAX 加载的页面上打开

> ID：15818964
> 
> 赞同：0
> 
> 时间：2013-04-04T18:32:30.870
> 
> 标签：jquery, html, css, ajax, mobile

在 jQuery Mobile 中通过 AJAX 从链接加载页面时，对话框窗口在您刷新页面之前不会触发。如果我尝试将对话框添加到任何其他页面，就会发生这种情况。如果我要在对话框页面所在页面的链接中添加**data-ajax="false" ，那么对话框就可以正常工作。**我们想使用 jQuery 移动功能和转换，所以 ajax false 是不可能的。

我们所有的标题信息在每个页面上都是相同的，并且所有对话框都被正确调用。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mobile Demos</title>
    <link rel="stylesheet" href="css/jquery.mobile-1.3.0.css">
    <script src="js/jquery.js"></script>
    <script src="js/jquery.mobile-1.3.0.js"></script>
</head>
<div data-role="page" data-theme="a" id="dialogpage">
    <a href="#foo2" data-rel="dialog" data-role="button" data-inline="true" data-theme="c">Open Basic Dialog</a>
</div>
<div data-role="dialog" id="foo2" data-close-btn="right">
    <div data-role="header" data-theme="d">
        <h1>lorum ipsum header</h1>
    </div>
    <div data-role="content">
        <p>lorum ipsum</p>
        <a href="#" data-rel="back" data-role="button" data-inline="true" data-theme="b">Ok, I get it</a>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:43:08.840

尝试在文档底部加载 JavaScript。

就在`</body>`标签上方。这是优化加载时间和其他原因的最佳实践方法。例如在某些浏览器的某些情况下（可能在撰写本文时最多。JavaScript 通常只能在加载之前找到加载的内容。如果您的脚本在您要显示的元素之前加载，则 JavaScript 正在运行在元素本身被渲染之前它的“就绪”功能。由于缓存，它可能会在刷新时触发。但由于脚本无法找到它，其余时间全部失败

# flask - psycopg2 与烧瓶，何时关闭连接

> ID：15818966
> 
> 赞同：9
> 
> 时间：2013-04-04T18:32:34.970
> 
> 标签：flask, psycopg2

我正在尝试构建一个简单的 Web 应用程序，它将查询 postgres 数据库并插入/删除数据。因为它是一个非常简单的应用程序，所以我没有使用像 sqlalchemy 这样的 ORM 层。相反，我想直接使用 psycopg。现在，我想知道，什么时候是关闭游标和连接的最佳时间？我无法更全面地了解连接在访问 Web 应用程序时何时处于空闲状态。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T18:35:12.167

也许[官方文档](https://flask.palletsprojects.com/en/1.1.x/tutorial/database/)可能有用

```
@app.before_request
def before_request():
   g.db = connect_db()

@app.teardown_request
def teardown_request(exception):
    g.db.close() 
```

# java - 从单词中删除开始的标点符号

> ID：15818970
> 
> 赞同：6
> 
> 时间：2013-04-04T18:32:45.783
> 
> 标签：java, regex

我在这里看到了一些与我在这里提出的问题相匹配的线程。但没有一个是具体的。如果我有一个类似的字符串`"New Delhi"`，我希望我的代码能够提取`New Delhi`。所以这里的引号被去掉了。我想去掉任何标点符号，一般在开始和结束时。

到目前为止，这有助于去除末尾的标点符号：

`String replacedString = replaceable_string.replaceAll("\\p{Punct}*([a-z]+)\\p{Punct}*", "$1");`

我在这里做错了什么？我的输出 `"New Delhi` 仍然存在开头的报价。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T18:42:59.947

以下将从`String`对象的开头和结尾删除标点符号（如果存在）：

```
String s = "\"New, Delhi\"";

// Output: New, Delhi
System.out.println(s.replaceAll("^\\p{Punct}|\\p{Punct}$", "")); 
```

Regex的`^`部分表示文本的开头，并`$`表示文本的结尾。因此，`^\p{Punct}`将匹配作为第一个字符`\p{Punct}$`的标点符号，并将匹配作为最后一个字符的标点符号。我使用`|`(OR) 来匹配第一个表达式或第二个表达式，结果是`^\p{Punct}|\p{Punct}$`.

如果要删除`String`对象开头和结尾的所有标点符号，可以使用以下命令：

```
String s = "\"[{New, Delhi}]\"";

// Output: New, Delhi
System.out.println(s.replaceAll("^\\p{Punct}+|\\p{Punct}+$", "")); 
```

我只是`+`在每个`\p{Punct}`. 该`+`符号表示“一个或多个”，因此如果它们出现在文本的开头或结尾，它将匹配许多标点符号。

希望这就是你要找的:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T19:02:30.780

```
class SO {
    public static void main(String[] args) {
        String input = "\"New Delhi\"";
        String output = "";

        try {
            output = input.replaceAll("(^\\p{P}+)(.+)(\\p{P}+$)", "($1)($2)($3)");
        } catch (IndexOutOfBoundsException e) {
        }

        System.out.println("Input: " + input);
        System.out.println("Output: " + output);
    }
} 
```

结果：

```
Input: "New Delhi"
Output: (")(New Delhi)(") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:35:43.827

```
String replacedString = replacable_string.replaceAll("^\"|\"$", ""); 
```

或者

```
String replacedString = replace_string.replace("\"", ""); 
```

也应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T18:37:06.517

尝试使用这个：

```
String data = "\"New Delhi\"";
    Pattern pattern = Pattern.compile("[^\\w\\s]*([\\w\\s]+)[^\\w\\s]*");

    Matcher matcher = pattern.matcher(data);
    while (matcher.find()) {
        // Indicates match is found. Do further processing
        System.out.println(matcher.group(1));
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T18:38:24.493

尝试

```
String s = "\"New Deli\"".replaceAll("\\p{Punct}*(\\P{Punct}+)\\p{Punct}*", "$1"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-04T18:38:29.230

你的 [az] 只会捕获小写字母，没有空格。试试（[a-zA-Z]）

# jquery - 将 Flexslider 导航按钮移到外部

> ID：15818971
> 
> 赞同：9
> 
> 时间：2013-04-04T18:32:46.200
> 
> 标签：jquery, flexslider

是否有设置将**prev**和**next**导航按钮**移到 flexslider**之外并且始终可见？

那些按钮过去位于外面；不知何故，新版本改变了布局。

![在此处输入图像描述](https://i.stack.imgur.com/1sLyR.jpg)

我在滑块之外发现了一个老问题[flexslider-controling div](https://stackoverflow.com/questions/10986022/flexslider-controling-div-outside-of-slider)。我想知道这是我在实施它之前的唯一选择。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T17:22:50.760

这是我找到的解决方案。它适用于 FlexSlider v2.1。

它基本上将导航按钮移到了滑块图像之外。

```
.flex-direction-nav .flex-next { right: 0 !important; margin-right: -30px; 
   opacity: 1 !important; }

.flex-direction-nav .flex-prev { left: 0 !important; opacity: 1 !important; 
   margin-left: -30px; }

.flexslider { width: 90%; margin: 0 auto; } 
```

***归功于 box86rowh。***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T18:54:51.487

为什么不直接使用 css 来定位它们呢？找出他们的班级或id，然后用css设置左右位置，将他们移动到想要的位置。

# ios - 放大UIButton的hitest area for button with background image, imageView and label in it

> ID：15818972
> 
> 赞同：0
> 
> 时间：2013-04-04T18:32:50.657
> 
> 标签：ios, uibutton

它可能看起来像重复，但我实际上找不到任何关于我的具体情况的好的答案。我有一些带有背景图像（1pt 宽，拉伸）的按钮，里面有类似图标的图像以及文本标签。它的高度是 33pt，我需要使它的命中区域高 44pt。我看到了两种解决方案，但它们都不适合我。

第一个解决方案是放大框架并调整图像，使其有一些填充。但这对我来说是不可接受的，因为按钮内有背景图像和图像。

第二种解决方案是继承 UIButton （这是绝对可以接受的）和 override `- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event`。我这样做了，当我在此方法中放置一些断点并尝试在所需区域点击时，什么也没发生（在按钮框架内点击时断点有效）。

还有其他解决方案吗？第二种解决方案可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:16:55.087

如果您以编程方式创建视图，则可以实例化一个 44px 高的 UIView，向其添加轻击手势识别器，并将您的 UIButton 作为子视图添加到该视图中：

```
CGRect bigFrame = CGRectMake(0,0,100,44);
UIView *big = [[UIView alloc] initWithFrame:bigFrame];

UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(doPress)];
[big addGestureRecognizer:tapRecognizer];

UIButton *yourButton = ...
[big addSubview:yourButton];
[self.view addSubview:big]; 
```

然后将选择器实现为：

```
- (void)doPress {
   [yourButton sendActionsForControlEvents:UIControlEventTouchUpInside];
} 
```

这样，外部视图点击将被解释为您的按钮按下按钮。

# php - 在 php 中运行 exec 命令不起作用

> ID：15818974
> 
> 赞同：0
> 
> 时间：2013-04-04T18:32:52.477
> 
> 标签：php, exec

我在 php 的 exec 命令中运行此命令时遇到问题：

更新的工作代码：

```
$results = exec('curl --dump-header - -H "Content-Type: application/json" -X PUT --data @data.json https://website.url --insecure', $output);
if ($results) {
    echo "yay!";
    var_dump($output);
    echo $results;
} else {
    var_dump($output);
    echo "screw you";   
} 
```

最初脚本在 linux 中一起工作，但在 php exec 内部，内部单引号与 php 的 exec 引号冲突。以前的脚本：

```
curl --dump-header - -H "Content-Type: application/json" -X PUT --data '{"data": "foo", "data2": "bar"}' https://website.url 
```

我想知道什么可以解决这个引号问题，我认为`escapeshellarg()`可能会这样做但无济于事。

**更新：**

来自错误页面的错误

> PHP 警告：escapeshellarg() 只需要 1 个参数，给定 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:38:15.020

这是一个错字。使用`[]`来访问`$_POST`数组而不是`()`。否则 name 和 pass 将为空，这将破坏命令行。此外**，您必须先转义传入的帖子，然后才能在 shell 命令中使用它**。否则代码容易受到 shell cmd 注入的攻击（什么是致命的）：

```
$postname = escapeshellarg($_POST['name']);
$postpass = esacpeshellarg($_POST['pass']); 
```

此外，您还缺少 json 数据前后的空格。将其更改为：

```
$results = exec('curl --dump-header - -H "Content-Type: application/json" -X PUT --data '.escapeshellarg($jsondata). ' https://website.url'); 
```

更改之后，该示例对我有用。但是您应该注意[php curl 扩展](http://www.php.net/manual/en/book.curl.php)。我会使用它而不是通过调用 curl`exec()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:44:30.157

尝试这个：

```
$jsondata = '{"data":"'.$_POST['name'].'", "data2":"'.$_POST['pass'].'"}';
$command  = "curl --dump-header - -H \"Content-Type: application/json\" -X PUT --data '$jsondata' https://website.url";
$results = exec($command); 
```

# c# - 让 c# 和 c++ 一起玩得很好

> ID：15818978
> 
> 赞同：1
> 
> 时间：2013-04-04T18:33:00.477
> 
> 标签：c#, c++, .net, windows-installer

我有通过 COM 访问 c++ 项目的 ac# 解决方案。该项目必须针对特定的处理器，在本例中为 x64。我正在使用 Windows 安装程序来安装应用程序。

我遇到的第一个问题是安装时没有正确注册c++ dll，程序无法访问它。我通过将 c++ 项目添加到解决方案中解决了这个问题。

有一段时间这有效，并且一切都正确安装，但是当我尝试构建时开始收到以下警告：

> 项目中 .NET Framework 的目标版本与 .NET Framework 启动条件版本“.NET Framework 3.5”不匹配。在高级编译选项对话框 (VB) 或应用程序页面（C#、F#）中更新 .NET Framework 启动条件的版本以匹配 .NET Framework 的目标版本。

如果我尝试忽略警告，安装程序将无法安装。经过一番搜索，我发现 c++ 项目是在 .NET 4.0 中构建的，而我的解决方案使用的是 .NET 3.5。我尝试将我的解决方案更改为 4.0，但由于某种原因它停止工作，所以我将 c++ 更改为 3.5。

这适用于几个构建，但后来我开始收到以下错误：

```
Error: LNK1104 cannot open file 'mfc90.dll'. 
```

我将文件添加到附加依赖项部分，但随后出现另一个链接错误（mfcs90.dll），添加该文件时，我遇到了 x86 x64 冲突。

我不确定为什么这些解决方案工作了一段时间然后停止了，而且我似乎无法在任何可行的步骤中找到解决方案。如果有人看到过类似的东西，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:41:48.487

为了包含 Microsoft 运行时 dll，您不应简单地将 dll 包含在应用程序目录中。当 dll 具有各种依赖项并且您可能会遇到不同的冲突和版本控制问题时，这将无济于事。

我建议为您的应用程序安装运行时 dll 的方式是在您的 MSI 中包含官方合并模块。

有关重新分发运行时库的选项，请参见以下链接：

[http://msdn.microsoft.com/en-us/library/ms235316(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms235316(v=vs.90).aspx)

# r - R按向量和日期重复行

> ID：15818979
> 
> 赞同：1
> 
> 时间：2013-04-04T18:33:02.693
> 
> 标签：r

我有一个包含 275 个不同站点和 43 年季节性数据（10 月到次年 4 月，不需要 5 月到 9 月的数据）和 6 个变量的数据框，这是一个只有一个名为 value 的变量的数据框的小示例：

```
data <- data.frame(station=rep(1,6), year=rep(1969,6), month=c(10,10,10,10,11,11),day=c(1,8,16,24,1,9),value=c(1:6)) 
```

我需要的是用每日日期（例如：1:8）和每行的值填充 8 天的平均值，它看起来像：

```
data1 <- data.frame(station=rep(1,40), year=rep(1969,40), month=c(rep(10,31),rep(11,9)),day=c(1:31,1:9),value=rep(c(1/7,2/8,3/8,4/8,5/8,6/8),c(7,8,8,8,8,1))) 
```

我写了一些糟糕的代码并在网站上搜索，但不幸的是没有成功，请帮助或更好的想法将不胜感激。

```
station.date <- as.Date(with(data, paste(year, month, day, sep="-")))
for (i in 1:length(station.date)){
  days <- as.numeric(station.date[i+1]-station.date[i])   #not working
  data <- within(data, days <- c(days,1))  
} 
rows <- rep(1:nrow(data), times=data[ ,data$days])
rows <- ifelse(rows > 10, 0, rows)     #get rid of month May to Sept
data <- data[rows, ] 
data <- within(data, value1 <- value/days)       
data <- within(data, dd <- ?)    #don't know to change the repeated days to real days 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:42:00.373

我编写了一些与您的示例执行相同操作的代码，但可能您必须修改它才能处理整个数据集。我不确定如何处理最后一次观察。最后我为它做了一个特殊的案例。如果它应该除以不同的数字，你只需要用那个数字替换`8`里面。`values <- c(values, tail(data$value, 1) / 8)` 此外，如果您将所有`275`站点都放在一个 data.frame 中，我认为最好的办法是将其拆分、单独转换，而不是 cbind。

```
data <- data.frame(station=rep(1,6), year=rep(1969,6), month=c(10,10,10,10,11,11),day=c(1,8,16,24,1,9),value=c(1:6)) 

station.date <- as.Date(with(data, paste(year, month, day, sep="-")))
d <- as.numeric(diff(station.date))
range <- sum(d) + 1

# create dates
dates <- seq(station.date[1], by = "day", length = range)

# create values
values <- unlist(sapply(1:length(d), function(i){
   rep(data$value[i] / d[i] , d[i])
}))
# adding last observation
values <- c(values, tail(data$value, 1) / 8)

# create new data frame
data2 <- data.frame(station = rep(1, range), 
                    year = as.numeric(format(dates, "%Y")),
                    month = as.numeric(format(dates, "%m")),
                    day = as.numeric(format(dates, "%d")),
                    value = values) 
```

它可能会以某种方式进行优化，但我希望它也有帮助。请注意我如何从日期中提取年、月和日。

# ajax - 如何处理从 $.getJSON 异步返回的数据

> ID：15818985
> 
> 赞同：0
> 
> 时间：2013-04-04T18:33:37.783
> 
> 标签：ajax, getjson

我一直在使用[mockJSON](http://experiments.mennovanslooten.nl/2010/mockjson/)库测试代码来模拟数据加载。

我的代码在客户端/消费者级别看起来像这样：

```
 var jsonDataFeed= new DataLoader_EUJP();
            jsonDataFeed.grabJson(0);
            var someVariable = jsonDataFeed.Data;
.... 
```

该`grabJson()`方法是什么调用`$.getJSON`

只要是 mockJSON 为我提供数据，它就可以正常工作，但现在它当然是一个异步调用，我不能确定我的数据在`someVariable`设置时是否存在。我习惯了立即返回数据，并没有三思而后行。

在使用该数据之前确保完成异步数据加载的建议是什么？

# class - phpstorm中的自动完成构造函数

> ID：15818987
> 
> 赞同：4
> 
> 时间：2013-04-04T18:33:47.770
> 
> 标签：class, autocomplete, phpstorm

有没有办法让 PhpStorm 在我开始新课程后立即自动完成构造函数？（例如，我看过一个可以在 Netbeans 中完成的视频）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:41:10.363

你打赌！只需点击链接...

[http://devnet.jetbrains.com/thread/443455](http://devnet.jetbrains.com/thread/443455)

# javascript - 如果 div-b 中的内容等于此，则更改 div-a 的图像

> ID：15818994
> 
> 赞同：-2
> 
> 时间：2013-04-04T18:34:29.240
> 
> 标签：javascript, jquery

我对 Javascript 和 Jquery 了解不多，这就是我想做的。

我有这个概念，即拥有 2 个 div 和

如果 div-a = Canada 的内部 html 则将 div-b 中的图像更改为 image1

否则，如果 div-a = USA 的内部 html 则将 div-b 中的图像更改为 image2

否则隐藏 div-b

并且当 div-a 更改时，该功能应该在 document.load 和 onclick 上工作。

我在这里先向您的帮助表示感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:04:54.057

这是你想要的？

[小提琴](http://jsfiddle.net/63UK2/2/)

html

```
<div class="div-a">Canada</div>
<div class="div-b"><img src=""></div>

<a class="link" href="#">USA</a>
<a class="link" href="#">Canada</a>
<a class="link" href="#">Wohoo</a> 
```

JS

```
function loadImg(str) {
    switch(str) {
        case 'Canada':
             $('.div-b img').show().attr('src', 'http://ec.europa.eu/education/images/flags/canada.gif');
             break;
        case 'USA': 
             $('.div-b img').show().attr('src', 'http://ec.europa.eu/education/images/flags/usa.gif');
             break;
        default: 
            $('.div-b img').hide();
    }
}

$(document).ready(function(){

    loadImg($('.div-a').text());

    $('.link').click(function() {
          $('.div-a').text($(this).text());
          loadImg($(this).text());
    });
}); 
```

# php - PHP 从 5.1.6 版本升级

> ID：15818996
> 
> 赞同：-7
> 
> 时间：2013-04-04T18:34:30.827
> 
> 标签：php

我有一个在 PHP 5.1.6 上运行的相当大的网站。如果我尝试升级到最新版本，我应该有什么顾虑？差异是否很大？我是否应该从 5.1 迁移到 5.2 和 5.2 到 5.3 以尽量减少可能出现的不兼容问题？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:51:49.917

当您升级 php 时，您从头开始安装整个包，即不会增量应用新版本。

所以，你不需要从 5.1 到 5.2 再到 5.3，直接升级到想要的版本（我推荐使用 php 5.4）。

php.net 站点在升级时也很有帮助，您可以看到新功能和破坏版本之间兼容性的更改。

看看以下链接：

[http://www.php.net/manual/en/migration52.php](http://www.php.net/manual/en/migration52.php)

[http://www.php.net/manual/en/migration53.php](http://www.php.net/manual/en/migration53.php)

[http://www.php.net/manual/en/migration54.php](http://www.php.net/manual/en/migration54.php)

根据我的经验，为 php 5.1 创建的代码在 5.4 上运行顺畅。

最好的方法是审查更改，在开发环境中设置站点，进行彻底的测试，如果一切正常，在生产中升级。确保在生产模式下启用和监控服务器日志，以便在出现问题时及时发现问题。

# jmx - 如何将 JMXClient 包装在 JavaAgent 中

> ID：15818997
> 
> 赞同：1
> 
> 时间：2013-04-04T18:34:40.467
> 
> 标签：jmx, mbeans, javaagents

我想通过将客户端包装在 javaagent 包中并在本地查询 MBean 来将自定义 JMX 客户端加载到 JVM 中。我的意图是 JMX 客户端将定期查询主机应用程序的 MBean 或接收通知。但是，由于 javaagent 在主 jar 之前加载（通过 premain），所以宿主应用程序的 MBean 尚不可用。我应该如何处理这个“先有鸡”的问题？线程适合这个吗？还是有其他一些首选的 JMX 机制？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:07:33.433

开始一个循环并在其中休眠，直到您成功获取目标 MBeanServer。如果这是平台 MBeanServer，您应该立即使用[ManagementFactory.getPlatformMBeanServer()](http://docs.oracle.com/javase/6/docs/api/java/lang/management/ManagementFactory.html#getPlatformMBeanServer%28%29)获取它。然后使用定义为[MBeanServerDelegate.DELEGATE_NAME](http://docs.oracle.com/javase/6/docs/api/javax/management/MBeanServerDelegate.html#DELEGATE_NAME)的 ObjectName注册一个[通知侦听](http://docs.oracle.com/javase/6/docs/api/javax/management/NotificationListener.html)器。过滤[MBeanServerNotification](http://docs.oracle.com/javase/6/docs/api/javax/management/MBeanServerNotification.html)类的通知，通知类型为[MBeanServerNotification.REGISTRATION_NOTIFICATION](http://docs.oracle.com/javase/6/docs/api/javax/management/MBeanServerNotification.html#REGISTRATION_NOTIFICATION)。每次在目标 MBeanServer 中注册新的 MBean 时，您的通知侦听器都会收到回调。