# StackOverflow 问答 15565000-15565999

# php - PHP - 如何从包含 XML 结构的变量中删除某些特定元素？

> ID：15565000
> 
> 赞同：0
> 
> 时间：2013-03-22T07:28:16.947
> 
> 标签：php, xml

我有一个`$xml`包含一些 XML 值的字段。首先我必须提到元素不是在新行（行）中分开，而是它们像没有新行的字符串一样绑定在一起。

我将首先展示 XML 结构看起来如何易于“阅读”。

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv=" http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <p:queryBillingAccountResponse xmlns:p=" http://www.ibm.com">
            <ns0:customerAccount xmlns:ns0=" http://www.ibm.com/xmlns/">
                <AccountStatus>Paid</AccountStatus>
                <ComponentCustomerAccount>
                    <Name>ADSL 4</Name>
                    <CharacteristicValue>
                        <Characteristic>
                            <Name>Balance</Name>
                        </Characteristic>
                        <Value>0.0</Value>
                    </CharacteristicValue>
                    <AccountStatus>Paid</AccountStatus>
                </ComponentCustomerAccount>
            </ns0:customerAccount>
        </p:queryBillingAccountResponse>
    </soapenv:Body>
</soapenv:Envelope>
<AccountStatus>Paid</AccountStatus>
</ComponentCustomerAccount>
</ns0:customerAccount>
</p:queryBillingAccountResponse>
</soapenv:Body>
</soapenv:Envelope> 
```

但我再次必须提到 $xml 字段中的实际值并不那么容易阅读。例如，它看起来像这样

```
<?xml version="1.0" encoding="utf-8"?><soapenv:Envelope xmlns:soapenv=" http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><p:queryBillingAccountResponse xmlns:p=" http://www.ibm.com">....... 
```

我想删除元素 :`?xmlversion` `soapenv:Envelope` 以及 `soapenv:Body`它们的属性。我想在 xml 值的开头和结尾删除它们。其他一切都保持原样1 如何实现这一目标？所以我在 php 字段中的新值应该从`queryBillingAccountResponse`元素开始。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:05:36.050

对于有效的 XML，您可以使用`SimpeXML`或`DOMDocument`查询 body 元素的子节点。

```
$xml = '<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <p:queryBillingAccountResponse xmlns:p="http://www.ibm.com">
            <ns0:customerAccount xmlns:ns0="http://www.ibm.com/xmlns/">
                <AccountStatus>Paid</AccountStatus>
                <ComponentCustomerAccount>
                    <Name>ADSL 4</Name>
                    <CharacteristicValue>
                        <Characteristic>
                            <Name>Balance</Name>
                        </Characteristic>
                        <Value>0.0</Value>
                    </CharacteristicValue>
                    <AccountStatus>Paid</AccountStatus>
                </ComponentCustomerAccount>
            </ns0:customerAccount>
        </p:queryBillingAccountResponse>
    </soapenv:Body>
</soapenv:Envelope>';

$xml = simplexml_load_string($xml);
$xml = $xml->xpath('//soapenv:Body/child::*')[0];
echo $xml->asXML(); 
```

结果是：

```
<p:queryBillingAccountResponse xmlns:p="http://www.ibm.com">
    <ns0:customerAccount xmlns:ns0="http://www.ibm.com/xmlns/">
        <AccountStatus>Paid</AccountStatus>
        <ComponentCustomerAccount>
            <Name>ADSL 4</Name>
            <CharacteristicValue>
                <Characteristic>
                    <Name>Balance</Name>
                </Characteristic>
                <Value>0.0</Value>
            </CharacteristicValue>
            <AccountStatus>Paid</AccountStatus>
        </ComponentCustomerAccount>
    </ns0:customerAccount>
</p:queryBillingAccountResponse> 
```

但问题是您的 XML 无效，我不知道这是否是复制和粘贴错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:46:15.613

这是使用 XSLT 最简单和最简单的方法：

```
function extract_body_stripns($xmlstring) {
    static $xsl = NULL;
    if ($xsl === NULL) {
        $xsl_soap_body_nons = <<<'EOT'
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0"
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output encoding="UTF-8" method="xml" />

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*[namespace-uri()]" priority="1">
    <xsl:element name="{local-name()}">
      <xsl:apply-templates select="@*|node()"/>
    </xsl:element>
  </xsl:template>

  <xsl:template match="@*[namespace-uri()]" priority="1">
    <xsl:attribute name="{local-name()}">
      <xsl:value-of select="."/>
    </xsl:attribute>
  </xsl:template>

  <xsl:template match="/">
    <xsl:apply-templates select="/soapenv:Envelope/soapenv:Body/*"/>
  </xsl:template>
</xsl:stylesheet>
EOT;

        $style = new DOMDocument();
        $style->loadXML($xsl_soap_body_nons, LIBXML_COMPACT | LIBXML_NOBLANKS | LIBXML_NONET);
        $xsl = new XSLTProcessor();
        $xsl->importStylesheet($style);
        unset($style);
    }
    $d = new DOMDocument();
    $d->loadXML($xmlstring, LIBXML_COMPACT | LIBXML_NONET);
    $newd = $xsl->transformToDoc($d);
    unset($d);
    return $newd->saveXML($newd->documentElement);
} 
```

使用此功能：

```
echo extract_body_stripns($xmlString); 
```

结果是：

```
<queryBillingAccountResponse>
        <customerAccount>
            <ComponentCustomerAccount>
                <Name>ADSL 4</Name>
                <CharacteristicValue>
                    <Characteristic>
                        <Name>Balance</Name>
                    </Characteristic>
                    <Value>0.0</Value>
                </CharacteristicValue>
                <AccountStatus>Paid</AccountStatus>
            </ComponentCustomerAccount>
        </customerAccount>
    </queryBillingAccountResponse> 
```

请注意，如果您的源文档中有命名空间属性，那么剥离命名空间的过程可能会导致您丢失其中的一些属性。例如，使用 element `<myelement ns:myattrib="a" myattrib="b"/>`，您的一个属性将丢失，您将丢失哪个属性并不一致！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T08:04:00.677

您可以使用 ereg_replace [http://php.net/manual/en/function.ereg-replace.php](http://php.net/manual/en/function.ereg-replace.php)

使用正则表达式来识别要删除的元素。

# windows - MS Dynamics 编程环境

> ID：15565001
> 
> 赞同：1
> 
> 时间：2013-03-22T07:28:18.297
> 
> 标签：windows, dynamics-crm-2011, dynamics-crm

是否可以在单台 PC 上免费设置 MS Dynamics 编程/开发环境用于自学目的？如何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:47:17.040

您可以将 CRM Dynamics Online 的试用版设置为 30 天。[在这里](http://www.microsoft.com/en-us/dynamics/crm.aspx)检查。设置试用版后下载[训练包](http://www.microsoft.com/en-us/download/details.aspx?id=23416)和[sdk](http://www.microsoft.com/en-us/download/details.aspx?id=24004)进行学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T15:07:39.627

是的，但严格来说，产品本身就是它自己的开发环境。安装信息可在 Microsoft Dynamics 网站上找到： [https ://www.microsoft.com/en-gb/dynamics/crm-free-trial-overview.aspx](https://www.microsoft.com/en-gb/dynamics/crm-free-trial-overview.aspx)

# wordpress - 冒号在wordpress中http://的href链接中消失

> ID：15565018
> 
> 赞同：0
> 
> 时间：2013-03-22T07:29:11.497
> 
> 标签：wordpress

我创建了 wordpress 示例插件。这是我挣扎的一些代码。

```
<?php 
        for($i=1;$i<=get_option('ptechsolcopy_times');$i++)
        {
            $find='http://';
            $pos=strpos(get_option('ptechsolcopy_link'.$i),$find);

            ?>
             <a href="<?php if($pos==0) { echo "http://".get_option('ptechsolcopy_link'.$i); } else {echo get_option('ptechsolcopy_link'.$i); } ?>" rel="<?php echo get_option('ptechsolcopy_follower'.$i); ?>"> <?php echo get_option('ptechsolcopy_name'.$i);  ?></a>
        <?php }
                ?> 
```

我想知道将`http://`前缀添加到 href 链接，但它只显示`http//` See this is the one that I created![在此处输入图像描述](../Images/8031eb692eac0b164271cf35dbd97415.png)

如果我已经在文本框中使用了[http://google.com](http://google.com)`http//google.com` ，它会在我使用 google.com 时显示，http:// 添加完美.. 我不知道我做了什么任何建议都会很棒。我做了什么条件错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:32:49.127

我相信在您的代码片段中，您验证了链接是否以 http:// 开头，然后将链接连接到锚标记中的另一个 http://。(`echo "http://".get_option('ptechsolcopy_link'.$i);`

查看您页面的源代码，您可能会发现您的链接如下所示：`http://http://google.com`在浏览器中显示为`http//google.com`

# c# - StreamWriter 在写入文本文件时截断文本

> ID：15565023
> 
> 赞同：3
> 
> 时间：2013-03-22T07:29:28.640
> 
> 标签：c#, asp.net

我在字符串变量中有大量内容，我想使用流编写器将该内容写入文本文件。但是流编写器正在截断文本，而不是将整个内容写入文件。为什么？

```
using (StreamWriter sw = new StreamWriter(completeFilePath))
{
    sw.Write(txt);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T07:34:11.063

写入后，使用 Flush 方法清除缓冲区。

```
sw.Write(Html);
sw.Flush(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:36:25.207

你为什么不使用

```
File.WriteAllText(completeFilePath, txt); 
```

[File.WriteAllText 的 MSDN 文档](http://msdn.microsoft.com/de-de/library/system.io.file.writealltext.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T07:42:17.960

如果尺寸太大，

```
 using (StreamWriter sw = new StreamWriter(completeFilePath))
{
    sw.Write(txt);
    //just to make sure the stream writer flushes the command
    sw.Flush();
} 
```

如果大小不是那么大，我建议使用 File.WriteAllText 方法

```
//no need to Open or Close anything
File.WriteAllText(Path, txt); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T07:33:17.183

假设`txt`是一个包含 HTML 的字符串变量，尝试调用[`sw.Flush()`](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.flush.aspx)after `sw.Write()`。这应该强制流编写器将字符串的其余部分写入文件。如果文件仍被截断，请确保`txt`字符串包含预期的完整输出。

# python - 金字塔：ACL 中的 ACE 顺序

> ID：15565024
> 
> 赞同：1
> 
> 时间：2013-03-22T07:29:31.750
> 
> 标签：python, pyramid

我想允许未经身份验证的用户的权限，但拒绝经过身份验证的用户。

```
# works
__acl__ = [
    (Deny, Authenticated, 'something'),
    (Allow, Everyone, 'something'),
]

# order changed -- DOES NOT WORK
__acl__ = [
    (Allow, Everyone, 'something'),
    (Deny, Authenticated, 'something'),
] 
```

我的问题是：这是从经过身份验证的用户中过滤掉未经身份验证的用户的正确方法。在 Pyramid 中是否有*更明确*的方法来做到这一点？如何通过说`NonAuthenticated`（即`Everyone - Authenticated`）来描述未经身份验证的用户。

一个更普遍的问题是：我们应该如何过滤在一个组中但不在另一个组中的用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T09:15:27.117

`Authenticated`并且`Everyone`是主体（实际上，它们只是字符串）。每个用户都有一个委托人列表（默认情况下`[username, Authenticated, Everyone]`，对于经过身份验证的用户，`[Everyone]`对于其他用户）。您不能对主体执行集成操作，因此无法定义`NonAuthenticated`计算 from`Everyone`和`Authenticated`。

您可以做的是使用 ACL 的顺序来说明您想要什么。[文档](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/security.html#elements-of-an-acl)中提到 ACL 是按顺序处理的，第一个匹配用户主体的就是 user。因此，如果您想授予 A 组中的用户访问权限，除非他们在 B 组中（如何拥有主体“组：A”，但没有“组：B”），您可以编写。

```
__acl__ = [
    (Deny, 'group:B', 'something'),   # If user in B, deny
    (Allow, 'group:A', 'something'),  # Else (=if user not in B), if user in A, allow
    (Deny, Everyone, 'something'),    # Else, Deny
] 
```

# xml - DBUS 返回值

> ID：15565025
> 
> 赞同：1
> 
> 时间：2013-03-22T07:29:42.623
> 
> 标签：xml, dbus

在文件`DBUS`中，`XML`如果我给出下面的代码，为什么会`proxy`生成一个`void`返回类型的函数？

```
 <method name="getLocalTime">
        <arg type="s" name="timeString" direction="out" />
        <arg type="s" name="dateString" direction="out" />
    </method>

virtual void getMyTime(std::string& time, std::string& date) = 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:31:28.987

在 DBus 中，方法调用的输出是通过参数列表传递的，而不是经典的 C 函数返回机制。此外，如果该方法不是异步的，则只允许返回单个真/假布尔结果（以经典 C 函数返回样式返回）。在您的反省中，您必须将此方法注释为异步，因为它返回多个字符串值。您的代理方法调用将传递指向两个字符串变量的指针以接收结果。

如果我以 dbus-glib 为例...

```
<method name="getLocalTime">
    <arg type="s" name="timeString" direction="out" />
    <arg type="s" name="dateString" direction="out" />
    <annotate name="org.freedesktop.DBus.GLib.Async" />
</method> 
```

然后在我实施该方法时...

```
void 
dbus_service_get_local_time( 
    MyGObject* self, 
    DBusGMethodInvocation* context 
)
{
    char* timeString;
    char* dateString;

    // do stuff to create your two strings...

    dbus_g_method_return( context, timeString, dateString );

    // clean up allocated memory, etc...
} 
```

从调用者的角度来看，代理方法调用看起来像这样......

```
gboolean 
dbus_supplicant_get_local_time( 
    DBusProxy* proxy, 
    char* OUT_timeString, 
    char* OUT_dateString, 
    GError** error 
); 
```

请注意，在代理方法中，gboolean 结果是是否可以进行 D-Bus 调用，而不是调用方法的结果。

# android - Android 模拟器无法启动

> ID：15565028
> 
> 赞同：30
> 
> 时间：2013-03-22T07:30:11.163
> 
> 标签：android, android-emulator

我正在尝试安装 android sdk 并在我的 PC（Win7 64 位）上运行我的第一个应用程序。我从一开始就按照 http://developer.android.com 上的说明操作到[http://developer.android.com/training/basics/firstapp/running-app.html](http://developer.android.com)[当](http://developer.android.com/training/basics/firstapp/running-app.html)我尝试启动模拟器时（如最后所述url) 根本没有出现。

```
5 - Select the new AVD from the Android Virtual Device Manager and click Start. 
```

它不显示任何错误消息。启动 AVD 后，任务管理器上会出现一个名为 adb.exe 的进程。

下面是尝试从 Eclipse 运行我的空白应用程序时的 Eclipse 控制台输出。在配置上，我设置了不同的目标设备并手动选择了启动活动。同样的问题还在继续。

**当 AVD 从 eclipse** ( `\sdk\platform-tools>android avd`) 外部启动时：

```
[2013-03-22 08:50:48 - 1st] ------------------------------
[2013-03-22 08:50:48 - 1st] Android Launch!
[2013-03-22 08:50:48 - 1st] adb is running normally.
[2013-03-22 08:50:48 - 1st] Performing com.example.st.MainActivity activity launch
[2013-03-22 08:50:49 - 1st] Automatic Target Mode: launching new emulator with compatible AVD 'AvdTest'
[2013-03-22 08:50:49 - 1st] Launching a new emulator with Virtual Device 'AvdTest' 
```

**从 eclipse 启动 AVD 时**：

```
[2013-03-22 09:22:44 - 1st] ------------------------------
[2013-03-22 09:22:44 - 1st] Android Launch!
[2013-03-22 09:22:44 - 1st] adb is running normally.
[2013-03-22 09:22:44 - 1st] Performing com.example.st.MainActivity activity launch
[2013-03-22 09:22:44 - 1st] Automatic Target Mode: Preferred AVD 'AvdTest' is not available. Launching new emulator.
[2013-03-22 09:22:44 - 1st] Launching a new emulator with Virtual Device 'AvdTest' 
```

我也只下载了 sdk 并安装了 eclipse 插件，但结果是一样的。

也尝试使用 logcat。启动它然后启动 AVD，但 logcat 什么也没显示。当我从任务管理器中杀死 adb.exe 时，它​​也会杀死 logcat。

```
\sdk\platform-tools>adb -e logcat
- waiting for device -

\sdk\platform-tools> 
```

重新安装 IDE/SDK 几次后，我决定在这里问它。我还能做什么？

编辑：**伙计们，我有一个虚拟设备。**请停止建议添加虚拟设备。

![虚拟设备管理器](../Images/64178d156fb5f2f0056b86105788d5d7.png)

![SDK](../Images/36a1240f2b1d051ae8e3f5b905816df4.png)

![蚀](../Images/cb6f4be524520abf94c310bc494044d0.png)

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2016-11-10T13:23:07.843

我在 OSX 上遇到了类似的问题。我的模拟器工作正常，但经过一些运行后它不会启动。我已经通过以下方式解决了这个问题：

1.  转到`.android`目录（在我的情况下是`Users/<username>/.android`
2.  转到`avd`文件夹
3.  找到不会启动的模拟器（目录名将与模拟器相同）
4.  从那里删除所有`.img`文件。***不要删除*** `.ini`文件。
5.  尝试再次运行模拟器。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T13:01:57.757

我找到了。在事件查看器（控制面板\所有控制面板项\管理工具\事件查看器）中单击左侧菜单上的 Windows 日志>应用程序并读取错误日志。

![事件簿](../Images/4896149ad13e9c7933622e0476bb18bb.png)

我搜索了日志（）中提到`aticfx32.dll`的 dll 文件，发现该 dll 文件属于 ATI 显卡。我的电脑有一块英特尔显卡。在搜索解决方案时，我还找到[了这个](http://bugs.mysql.com/bug.php?id=64407)网页并应用了他们使用的解决方案。它就像一个魅力。

脚步：

1.  从英特尔网站下载您的显卡驱动程序
2.  在某处提取zip，位置无关紧要
3.  进入设备管理器，（在 Windows 搜索栏中输入设备管理器）
4.  单击显示适配器和英特尔核芯显卡。
5.  转到标有“驱动程序”的标签
6.  单击“更新驱动程序”和“浏览我的计算机以查找驱动程序”
7.  单击“让我从驱动程序列表中选择”
8.  单击从磁盘安装按钮，
9.  导航到您提取的驱动程序所在的位置，然后进入标有“图形”的目录
10.  选择名为“igdlh64.INF”的文件
11.  单击确定按钮，然后单击下一步，驱动程序应安装
12.  之后您需要重新启动，并且在重新启动后应该更新您的驱动程序

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-26T14:01:04.210

在我的情况下，我必须从我的 avd 设备文件夹（C:\Users\User_Name.android\avd\Device_Name.avd）中删除文件***cache.img.qcow2 。***

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-02-29T05:08:52.703

我来这里是因为我有同样的问题，使用 Android Studio 3.6 和 win 10 OS

我通过以下步骤解决了这个问题：

1.  转到 AVD 管理器
2.  击中`Virtual device configuration`（铅笔图标）
3.  打`show advance setting`
4.  向下滚动到启动选项
5.  选择`Cold boot`
6.  打`finish`

如果问题依旧，

1.  点击`drop down`附近`pencil`图标
2.  `Wipe data`
3.  `refresh button`在问号按钮附近点击右下角

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-31T12:46:51.457

每次我尝试开始一个新项目时，我至少会遇到一次这个问题，可能是来自共享设备的项目。在以下文件夹中：

C:\Users\.android\avd\（例如 Nexus_5_API_23.avd）

我不得不删除以下图片中的文件。我尝试删除`.qcow2`一位用户提到的文件，但没有运气。请注意，所有删除的文件都是最新修改的文​​件/文件夹（请参阅修改日期列），而不是`.ini`文件`.conf`。

[![在此处输入图像描述](../Images/195d5deb6b23ecac61b31a69a854fad1.png)](https://i.stack.imgur.com/oplz7.jpg)

**更新：**如果我只删除`snapshots`目录（如上图所示），似乎也可以解决问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-22T08:00:20.403

您是否安装了任何“目标”API？您是否配置了任何“虚拟设备”？

日志告诉您它找不到“avdTest”设备，这可能是因为您没有配置它，或者只是它不存在。

尝试在 Eclipse 的“虚拟设备管理器”中设置设备，然后，从此菜单（AVD 设备 -> 开始...）启动虚拟设备，如果它有效，然后在其上运行您的代码。

我不建议您第一次使用命令行。此外，我建议您首先尝试使用 Android 2.3.3 (API 10)，因为启动模拟器所需的时间更少。

# jquery - 子元素中的拖放工作很奇怪

> ID：15565029
> 
> 赞同：0
> 
> 时间：2013-03-22T07:30:14.197
> 
> 标签：jquery, html

我已经构建了一个这样的拖放系统：这是一个可以拖放到可编辑 Div 中的列表：列表代码是这样的：

```
<li class='file'>test<li>
$("li.file").bind("dragstart",function(e){
e.originalEvent.dataTransfer.effectAllow='move';
e.originalEvent.dataTransfer.setData('text',$(this).text());
});` 
```

然后我有一个 Div 来获取拖动项：

```
<div id='editor'><div>
$("#editor").bind('dragover',function(e){
e.originalEvent.dataTransfer.dropEffect="move";
if(e.preventDefault){
e.preventDefault();
});
$("#editor").bind('drop',function(e){
    if (e.target==$('#editor')[0]){
#add a sub <div class="editorcontent"> under the <div id='editor'>
} 
```

这些代码工作正常。现在我想在 'div.editorcontent 上添加一个新的拖放事件，以允许两个不同的 editorcontent div 切换它们的位置：

```
$("div.editorcontent").bind("dragstart",function(e){
e.originalEvent.dataTransfer.effectAllow='move';
});
$("div.editorcontent").bind("dragover",function(e){
e.originalEvent.dataTransfer.dropEffect="move";
if(e.preventDefault){
e.preventDefault();
}

});
$("div.editorcontent").bind("drop",function(e){
    alert(e.target);
}); 
```

但是这些代码不起作用。我在 chrome 上设置了断点，似乎只有#editor 的拖放事件在使用中。每当我拖动 div.editorcontent 时，都不会发生任何事件。当我将 div.editorcontent 元素放在另一个 div.editorcontent 上时。chrome进入#editor的drop事件。那么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:53:56.610

问题是，当 $.ready 新添加的 div 不存在时，这些 div 的新处理程序不会绑定在这些 div 上。

# image - KineticJS 鼠标悬停在图像上

> ID：15565031
> 
> 赞同：2
> 
> 时间：2013-03-22T07:30:17.913
> 
> 标签：image, mouseover, kineticjs

我正在尝试更改鼠标悬停在图像上的鼠标指针，这是我的脚本：

```
 var sc = new Kinetic.Layer();
                var sCircle = new Image();
                var sCircleImage;
                sCircle.onload = function () {
                    sCircleImage = new Kinetic.Image({
                        x: 186.183,
                        y: 185.89,
                        width: 142.114,
                        height: 140.22,
                        image: sCircle
                    });
                    sc.add(sCircleImage);
                    sc.draw();
                };
                sCircle.src = '../../Content/images/arrow_circle.png';

                sCircleImage.on('mouseover', function () {
                document.body.style.cursor = 'pointer';
                });
                sCircleImage.on('mouseout', function () {
                document.body.style.cursor = 'default';
                }); 
```

我收到以下错误：无法获取未定义或空引用的属性“on”。我会很感激你的建议。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:02:29.707

在图像加载函数中使用 mouseover 和 mouseout 函数。试试下面的代码

```
<!DOCTYPE HTML>
<html>
<head>
    <style>
        body
        {
            margin: 0px;
            padding: 0px;
        }
    </style>
</head>
<body>
    <div id="container">
    </div>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>
    <script>
        var stage = new Kinetic.Stage({
            container: 'container',
            width: 578,
            height: 200
        });
        var sc = new Kinetic.Layer();
        var sCircle = new Image();
        var sCircleImage;
        sCircle.onload = function() {
            sCircleImage = new Kinetic.Image({
                x: 186.183,
                y: 185.89,
                width: 142.114,
                height: 140.22,
                image: sCircle
            });
            sc.add(sCircleImage);
            sc.draw();
            stage.add(sc);
            sCircleImage.on('mouseover', function() {
                document.body.style.cursor = 'pointer';
            });
            sCircleImage.on('mouseout', function() {
                document.body.style.cursor = 'default';
            });
        };
        sCircle.src = '../../Content/images/arrow_circle.png';
    </script>
</body>
</html> 
```

# jquery - 在 Struts 2 中使用 jQuery JSON 格式时无法呈现响应

> ID：15565035
> 
> 赞同：2
> 
> 时间：2013-03-22T07:30:55.583
> 
> 标签：jquery, jsp, struts2, struts2-jquery, struts2-json-plugin

我在加载对`select`标签的响应时遇到问题。我正在尝试根据第一个更改选择框。

为此，我使用带有 jQ​​uery Ajax 标签的 Struts 2。我想我有所有必需的东西，但响应没有标记到选项，但能够在浏览器的视图源的 JS 中看到结果。

下面是我用 JSP 编写的代码。

这是我的第一个选择框：

```
<div class="type-text">
  <s:url id="remoteurl" action="getGlobalManufacturerJquery.action?mainId=title&subId=Add Title&selectedManufacturer=strUser&gameFileID=%{gameFileID}&gameFileName=%{gameFileName}&titleName=%{titleName}&titleID=%{titleID}"/>
                <sj:select 
                    href="%{remoteurl}" 
                    formIds="TitleGameHandsetsForm"
                    id="manufacturerName%{titleGameFilemappingID}" 
                    onChangeTopics="reloadsecondlist" 
                     name="manufacturerName%{titleGameFilemappingID}"
                    list="%{manufacturers}" 
                     listKey="%{globalManufacturer}"

                    listValue="%{globalManufacturer}" 
                    emptyOption="true" 
                    headerKey="-1" 
                    headerValue="Select Global Manufacturer" 
                />
          </div> 
```

下面是我的第二个选择框，它应该在第一个值上

```
 <div class="type-text">        
                 <s:url id="remoteurl" action="getGlobalModelJquery.action?mainId=title&subId=Add Title&selectedManufacturer=strUser&gameFileID=%{gameFileID}&gameFileName=%{gameFileName}&titleName=%{titleName}&titleID=%{titleID}"/>
                <sj:select 

                    id="globalModel%{titleGameFilemappingID}" 
                    formIds="TitleGameHandsetsForm" 
                    reloadTopics="reloadsecondlist" 
                    name="modelFromSelect" 
                    list="%{modelList}" 
                    emptyOption="true" 
                    headerKey="-1" 
                    headerValue="Select Global Model"
                />
                </div> 
```

在 JSP 中没有可用的列表。但是服务器代码正在获得结果，我可以在 JS 的源代码中看到它无法附加到选择框的 JSP 中。

```
<select name="manufacturerName77" id="manufacturerName77">
<option value=""></option>
</select>
<script type='text/javascript'>
jQuery(document).ready(function () {
    var options_manufacturerName77 = {};
    options_manufacturerName77.datatype = "json";
    options_manufacturerName77.type = 'select';
    options_manufacturerName77.emptyoption = true;
    options_manufacturerName77.headerkey = "-1";
    options_manufacturerName77.headervalue = "Select Global Manufacturer";
    **options_manufacturerName77.list = "[Acer, A Panda]";**
    options_manufacturerName77.listkey = "Acer";
    options_manufacturerName77.listvalue = "Acer";
    options_manufacturerName77.jqueryaction = "select";
    options_manufacturerName77.id = "manufacturerName77";
    options_manufacturerName77.name = "manufacturerName77";
    options_manufacturerName77.oncha = "reloadsecondlist";
    options_manufacturerName77.href = "/ci/getGlobalManufacturerJquery.action";
    options_manufacturerName77.hrefparameter = "mainId=title&subId=Add Title&selectedManufacturer=strUser&gameFileID=3&gameFileName=dcdscd&titleName=Bubble boom chalenge&titleID=11";
    options_manufacturerName77.formids = "TitleGameHandsetsForm";

jQuery.struts2_jquery.bind(jQuery('#manufacturerName77'),options_manufacturerName77);

 });
</script>
          </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:39:32.460

如果 URL 写入不正确，则应返回列表的 JSON 数据的操作不会返回任何内容。你应该像这样写网址

```
<s:url var="remoteurl" action="getGlobalManufacturerJquery">
  <s:param name="mainId" value="title"/>
  <s:param name="subId" value="Add Title"/>
  <s:param name="selectedManufacturer" value="strUser"/>
  <s:param name="gameFileID" value="%{gameFileID}"/>
  <s:param name="gameFileName" value="%{gameFileName}"/>
  <s:param name="titleName" value="%{titleName}"/>
  <s:param name="titleID" value="%{titleID}"/>
</s:url> 
```

# c++ - 排序帮助 - 插入排序

> ID：15565038
> 
> 赞同：1
> 
> 时间：2013-03-22T07:31:05.320
> 
> 标签：c++, sorting

我一直在关注 Alex Alllain 的书，以便对 C++ 有一个很好的理解。我已经了解了一些基础知识，但是我像往常一样在数组和排序算法上遇到了困难。无论如何，他提出的问题之一是检查数组是否已排序。如果不是，请对其进行排序...这是代码：

```
#include <iostream>
#include <string>
#include <cstdlib>
#include <ctime>
using namespace std;
void swap(int array[], int firstindex, int secondindex);
int findsmallel(int array[], int size, int index)
{
    int indexofsmall=index;
    for(int i=index+1; i<size; i++)
    {
        if(array[i]<array[indexofsmall])
            {
                indexofsmall=i;
            }
    }
    return indexofsmall;
}
int findhigh(int array[], int size, int index)
{
    int indexofhigh=index;
    for(int i=index+1; i<size; i++)
    {
        if(array[i]>array[indexofhigh])
            {
                indexofhigh=i;
            }
    }
    return indexofhigh;
}
void sortlow(int array[], int size)
{
    for (int i=0; i<size; i++)
    {
        int index=findsmallel(array, size, i);
        swap(array, index, i);
    }
}
void sorthigh(int array[], int size)
{
    for (int i=0; i<size; i++)
    {
        int index=findhigh(array, size, i);
        swap(array, index, i);
    }
}
void swap(int array[], int firstindex, int secondindex)
{
    int temp=array[firstindex];
    array[firstindex]=array[secondindex];
    array[secondindex]=temp;
}
void displayarray(int array[], int size)
{
    cout<<"{ ";
    for(int i=0; i<size;i++)
    {
        if(i!=0)
        {
        cout<<", ";
        }
    cout<<array[i];
    }
    cout<<" }";
}
int main()
{
    int inputedarray[5];
    cin>>inputedarray[];
    if(inputedarray[4] != sortlow || inputedarray[4] != sorthigh)
    {
        sortlow(inputedarray, 5);
        displayarray(inputedarray, 5);
    }
    else
        cout<<"Array is already sorted."<<endl;
    return 0;
} 
```

检查条件时出现两个关于指针和整数比较的错误。任何帮助将不胜感激！编辑：我得到的错误是： C:\Code Block Projects\Alex Alllains Book\Chapter 1\main.cpp|84|error: ISO C++ forbids comparison between pointer and integer [-fpermissive]|

有什么方法可以检查数组是否已排序？请？:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T07:54:03.433

我认为它的第三行`main`是在做一个比较：检查数组的最后一个元素是否是最小/最大的，以确定数组是否已排序。虽然这不是正确的方法，但让我们假设它正在这样做。更改您的代码

```
 if(inputedarray[4] != sortlow || inputedarray[4] != sorthigh) 
```

到

```
 if(inputedarray[4] != findsmallel(inputedarray,5,0) ||
        inputedarray[4] != findhigh(inputedarray,5,0)) 
```

然后你应该能够编译你的代码。

让您的代码正常工作。修改 main 如下：

```
int main()
{
    int inputedarray[5];
    for( int i=0; i<5; i++)
    {
        cin>>inputedarray[i];
    }

    if(inputedarray[4] != findsmallel(inputedarray,5,0) ||
       inputedarray[4] != findhigh(inputedarray,5,0))
    {
        sortlow(inputedarray, 5);
        displayarray(inputedarray, 5);
    }
    else
        cout<<"Array is already sorted."<<endl;
    return 0;
} 
```

然后你应该像这样输入你的整数

```
2 3 5 1 4 
```

除非您将最大/最小整数作为最后一个输入数字，否则它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:38:26.127

您得到的“错误”是因为您正在将值与函数指针进行比较。您不*调用*这些函数。

正如 kma 所指出的，您不能在表达式中使用这些函数调用，因为它们 return `void`，即根本不返回值。

即使*确实*返回了某些内容，第一次调用也可以重新排列数组，因此在下一次比较中，数组索引 4 处的先前内容将不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T07:36:25.043

主程序中的 sortlow 和 sorthigh 不是声明的 int 变量，而是函数名。C++ 将此作为函数的指针（地址）。但是您将它们与数组中的整数进行比较。

编辑：如何检查数组是否已排序？想象一下，您面前有一组 5 张卡片（来自普通的一副卡片），正面朝下。你一次只能翻两张牌，比较它们，然后把它们面朝下放回去。你如何确定这5张牌是否有序？写下你采取的步骤。一旦你弄清楚了那个算法，你就可以开始考虑如何用 C++ 代码来表达它。

# visual-studio-2010 - 使用 TFS 在调试模式下进行 Web 配置转换

> ID：15565041
> 
> 赞同：0
> 
> 时间：2013-03-22T07:31:16.630
> 
> 标签：visual-studio-2010, tfs, web-config

我已经使用本[教程](http://www.kongsli.net/nblog/2012/01/13/enabling-web-transforms-when-debugging-asp-net-apps/)成功地将 Web Config 和 App Config 转换为调试模式 。文件 Web.config 将根据当前的构建配置而改变。

我的问题是，这个功能在 TFS 中是否可行？

在我当前的项目中，有几个开发人员并且我们正在使用 TFS，因此任何被某人更改的文件都将被设置为“签出”并阻止其他人“签入”（或“签出”，具体取决于锁定类型） . 我的目标是让其他开发人员根据他们当前的构建配置自动更改他们的 web.config。

那么，如果每次构建时都会自动更改 Web.config，这是否会阻碍其他人使用该 Lock 机制？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:31:11.237

经过几天的试验，我发现如果我们在 Visual Studio 环境之外编辑文件，则 TFS 不会签出该项目。基于这种行为，我得出结论，使用 TFS 进行转换是安全的，这正是我的问题的确切解决方案。现在我们的团队可以根据他们当前选择的配置自由地切换他们的连接字符串，而无需签出然后签入他们的 Web.Config。

# telerik - 您可以从子明细表中更新主表而不使主表崩溃吗？

> ID：15565048
> 
> 赞同：0
> 
> 时间：2013-03-22T07:31:32.147
> 
> 标签：telerik, kendo-ui, telerik-grid, kendo-grid

您可以从子明细表中更新主表而不使主表崩溃吗？

我正在运行这段代码：

```
update: {
   url: "/engine.php?q=updateProjectDetails",
   dataType: "json",
   complete: function(e){
     var parentRow = $('tr').closest(".k-detail-row").prev();
     var grid = parentRow.closest("[data-role='grid']").data("kendoGrid");
     var parentDataItem = grid.dataItem(parentRow);
     parentDataItem.set("tscore", JSON.parse(e.responseText).d[0].tscore);
   }
} 
```

当它从子表运行集合时，主表折叠其所有子元素，仅更新主表（数据源）中的 1 列。

有没有办法解决这种行为，基本上，只留下扩展表，只更新那个 1 字段。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:32:25.163

似乎这并不容易：

1.  当你这样做时`set`，它会更新导致刷新的主网格，然后所有行都被折叠。
2.  在之后扩展行（使用`expandRow`）`set`并非易事：使用`parentRow`用于调用`grid.expandRow(parentRow);`不起作用，因为当它刷新主控时，HTML 似乎发生了变化，然后不再有效。

因此，*似乎*可行的是保存该`uid`行并使用它再次查找`parentRow`和扩展它。就像是：

```
click: function (e) {
    var parentRow = $(e.target).closest(".k-detail-row").prev();
    //find parent grid
    var grid = parentRow.closest("[data-role='grid']").data("kendoGrid");
    //get the parent grid row DataItem
    var parentDataItem = grid.dataItem(parentRow);
    var uid = parentDataItem.uid;
    parentDataItem.set("FirstName", "OnaBai");
    grid.expandRow(grid.tbody.find("tr[data-uid='" + uid + "']"));
} 
```

但这并不能阻止重新加载内部网格......

# c# - 如何以 DateTime 格式 (HH:mm:ss) 显示双精度？

> ID：15565054
> 
> 赞同：1
> 
> 时间：2013-03-22T07:31:57.973
> 
> 标签：c#, winforms, datetime, double

又是关于双重和时间格式（HH：mm：ss）的问题。

我正在尝试从现在开始每隔 5 分钟进行一次时间间隔分段。

为了做到这一点，我执行这样的计算：

```
private string Get_now(int minus)
{
   DateTime n = DateTime.Now.AddMinutes( 0 - minus);

   double now = ((n.Hour > 12) ? n.Hour - 12 : n.Hour) * 10000
                        + ((n.Minute > 60) ? n.Minute - 60 : n.Minute) * 100
                                + ((n.Second > 60) ? n.Second - 60 : n.Second);

   string string_now = Convert.ToString(now);

   return string_now;
} 
```

计算结果会给我双数，例如，如果现在时间是 03:50:00，如果我输入 Get_now(0)，“现在”将为 35000；如果我输入 Get_now(5)，“现在”将是 345000。

这就是我将“现在”打印到文本框的方式。

```
textBox1.Text = Get_now(0);
textBox2.Text = Get_now(5);
textBox3.Text = Get_now(10);
textBox4.Text = Get_now(15);
textBox5.Text = Get_now(20); 
```

这是我在获胜表格中的结果：

![在此处输入图像描述](../Images/51799c16c54c433e31c32bafa36dc014.png)

如您所见，所有 Get_now 结果都显示为双精度值。

我想要的是以时间格式显示为 00:00:00

这意味着，结果必须如下所示：

```
42352 --> 04:23:52
41852 --> 04:18:52
41352 --> 04:08:52
40852 --> 04:08:52
40352 --> 04:03:52 
```

否则，如果您有更好的方法来减去每 5 分钟的时间（固定时间间隔）并将其显示为字符串格式，请随时在此处发表您的评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T07:43:41.043

为什么将时间转换为双倍？可能会很简单吗？

```
 private static string Get_now(int minus)
    {
        return DateTime.Now.AddMinutes(-minus)
            .ToString("HH:mm:ss");
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T07:35:22.063

使用此语句转换`double`为`string`您的`Get_now`方法内部

```
string string_now = now.ToString("0#:##:##", CultureInfo.InvariantCulture); 
```

`09:21:24`将返回`Get_now(15)`通话

`InvariantCulture`是可选的，但它可以保护您免受特定文化环境的影响

# c - 在 c 的新窗口中打印线程的输出

> ID：15565055
> 
> 赞同：-1
> 
> 时间：2013-03-22T07:32:03.903
> 
> 标签：c, pthreads

我想在新窗口中打印每个线程的输出。其中作为主要功能输出到第一个终端。我的代码是c语言的。请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:57:14.073

简短的回答是：你不能。

很长的答案是，你可以，但这是很多工作。基本上你必须以某种方式打开一个窗口并将一个伪终端附加到它，但一个没有外壳的。

一个更短的解决方案是使用进程而不是线程。然后，您可以将您的程序拆分为两个或多个程序，一个用于创建进程，一个或多个用于执行您之前拥有线程的工作。在主程序中`fork`，然后`exec`是工作程序。

如果您必须使用线程，最简单的解决方案是使用`ncurses`将当前终端窗口拆分为每个线程的单独“窗口”。

# c# - 在c#中确定文件扩展名

> ID：15565061
> 
> 赞同：0
> 
> 时间：2013-03-22T07:32:18.470
> 
> 标签：c#, .net

现在我将文件作为字符串获取，我需要遍历每个已知的 ex。案例来获取它的文件扩展名。

如何使用 c# 在运行时确定文件扩展名而不进行预期迭代？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T07:33:10.967

使用框架提供的[Path.GetExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getextension%28v=vs.110%29.aspx)方法。

> 指定路径的扩展名**（包括句点“.”）**，或者null，或者String.Empty。如果 path 为 null，GetExtension 返回 null。如果 path 没有扩展信息，GetExtension 返回 String.Empty。

```
string extension = Path.GetExtension(@"C:\mydir\file.exe"); 
```

你会得到`.exe`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T07:33:36.430

您是否尝试过使用类似的东西

[Path.GetExtension()](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)

> 指定路径的扩展名（包括句点“.”），或者null，或者String.Empty。如果 path 为 null，GetExtension 返回 null。如果 path 没有扩展信息，GetExtension 返回 String.Empty。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T07:33:59.833

你可以使用[`Path.GetExtension()`](http://msdn.microsoft.com/en-us/library/system.io.path.getextension%28v=vs.110%29.aspx)方法。

> 指定路径的扩展名（**包括句点“.”**），或 `null`，或`String.Empty`。如果路径是`null`，则`GetExtension`返回`null`。如果 path 没有扩展信息，则`GetExtension`返回 `String.Empty`。

```
string p = @"C:\Users\Sam\Documents\Test.txt";

string e = Path.GetExtension(p);
if (e == ".txt")
{
    Console.WriteLine(e);
} 
```

`Path.GetExtension`检查整个路径是否有无效字符。如果您已经知道您的路径是有效的，例如当您从`Directory.GetFile`s 收到它时，此步骤是多余的。它寻找一个分隔符。实现检查`DirectorySeparatorChar`、`AltDirectorySeparatorChar`和`VolumeSeparatorChar`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T07:34:04.197

使用[`Path.GetExtension`](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)：

```
string extension = Path.GetExtension(@"C:\myfile.txt"); 
```

或者，您的意思是要搜索具有给定基本名称和任何扩展名的文件？您可以使用[`Directory.GetFiles`](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)：

```
string[] files = Directory.GetFiles(@"C:\", "myfile.*") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T07:38:20.990

找到它的另一种方法..

```
var file = new FileInfo("myPath");
var extension = file.Extension; 
```

因此，例如，如果我们想从目录中获取所有 txt 文件，我们可以这样做：

```
var directory = new DirectoryInfo("myFolder");
var filesWithTxtExtension = directory.GetFiles().Where(file => file.Extension == ".txt"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T07:38:41.220

您可以使用[System.IO.FileInfo 类](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)。
它有一个名为[Extension](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.extension.aspx)的属性，它为您提供一个包含文件名扩展部分的字符串。

```
FileInfo file = new FileInfo("myfile.txt")
string fileExtension = file.Extension; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T07:33:22.160

使用`Path.GetExtension(path)`它可能会有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-22T07:35:15.333

```
string getFileExtension (string Path)
{
return Path.GetExtension(Path);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-22T07:36:05.190

```
string path = Path.GetExtension(filePath); 
```

来自[MSDN - Path.GetExtension 方法](http://www.http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)

# function - 是否可以使用 matlab 函数来自动比较函数之间的局部变量的值？

> ID：15565066
> 
> 赞同：1
> 
> 时间：2013-03-22T07:32:42.553
> 
> 标签：function, matlab, macros

这与[如何检索局部变量有关？](https://stackoverflow.com/questions/12003739/how-to-retrieve-local-variables)，但范围更广。

场景看起来像这样。假设我有两个功能

```
function [OutA OutB OutC] = F1 (x,y,z)
   local1 = x + y - z %some arbitrary computation
   local2 = x - y + z %other computation
end

function [OutA OutB OutC] = F2 (x,y,z)
   local1 = x+ y %some computation
   local2 = x - y %other computation
end 
```

我想编写一个将`F1 F2 x y z "local1" "local2"`作为输入的函数，`1`如果在每个 with inputs 执行期间in与`local1`in`F1`匹配，则返回。`local2``F2``x y z`

是否有可能在 Matlab 中做到这一点，理想情况下不修改原始函数？我想与此相关的是函数是否是 Matlab 中的一流对象的问题，我试图谷歌但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:26:47.730

因为函数的内部变量是私有的（除非您将它们设置为全局变量或返回变量），所以如果不更改函数或将它们放入更大的函数中，这是不可能的。

正确的方法是将它们设置为返回变量（因为你如何使用它们，这些局部变量*实际上*是定义的返回变量）：

```
function retval = compareLocals(x,y,z)
    [~, ~, ~, local1a, ~] = F1 (x,y,z);
    [~, ~, ~, ~, local2b] = F2 (x,y,z);
    retval = double(local1a=local2b);
end

function [OutA, OutB, OutC, local1, local2] = F1 (x,y,z)
    local1 = x + y - z %some arbitrary computation
    local2 = x - y + z %other computation
end
function [OutA, OutB, OutC, local1, local2] = F2 (x,y,z)
    local1 = x+ y %some computation
    local2 = x - y %other computation
end 
```

或者嵌套函数也是一种选择（但已经 hack-ish imo）：

```
function retval = compareLocals(x,y,z)
    F1 (x,y,z);
    F2 (x,y,z);
    retval = double(local1a=local2b);

    function [OutA OutB OutC] = F1 (x,y,z)
        local1a = x + y - z %some arbitrary computation
        local2a = x - y + z %other computation
    end

    function [OutA OutB OutC] = F2 (x,y,z)
        local1b = x+ y %some computation
        local2b = x - y %other computation
    end
end 
```

并且为此目的使用全局变量似乎是错误的（但话说回来，[全局变量的整个想法通常是不好的做法](http://en.wikipedia.org/wiki/Global_variable)）。

# php - 从 PHP 中的 JSON 数组中提取特定键值

> ID：15565067
> 
> 赞同：0
> 
> 时间：2013-03-22T07:32:43.610
> 
> 标签：php, json

我从支付网关 (JSON) 收到以下响应：

```
 {
  "response": {
    "token": "ch_lfUYEBK14zotCTykezJkfg",
    "success": true,
    "amount": 400,
    "currency": null,
    "description": "test charge",
    "email": "user@user.com",
    "ip_address": "203.192.1.172",
    "created_at": "2012-06-20T03:10:49Z",
    "status_message": "Success!",
    "error_message": null,
    "card": {
      "token": "card_nytGw7koRg23EEp9NTmz9w",
      "display_number": "XXXX-XXXX-XXXX-0000",
      "scheme": "master",
      "address_line1": "42 Sevenoaks St",
      "address_line2": null,
      "address_city": "Lathlain",
      "address_postcode": "6454",
      "address_state": "WA",
      "address_country": "Australia"
    },
    "transfer": null
  }
} 
```

我正在尝试`success => true`在 if 语句中获取部分，如下所示：

```
<?php
    if($response['success'] == true) {
     // continue transaction
    }
?> 
```

没有任何运气，所以我正在寻求有关如何实现这一目标的帮助。能够提取其他键值也会很有用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T07:35:42.473

**更新**

你`$response`已经是一个对象，因此这个表达式应该可以工作：

```
if ($response->response->success == true) {
    // etc
} 
```

您是否只是在寻找解码字符串表示的代码？如果是这样：

```
$response = <<<'EOM'
{
  "response": {
    "token": "ch_lfUYEBK14zotCTykezJkfg",
    "success": true,
    "amount": 400,
    "currency": null,
    "description": "test charge",
    "email": "user@user.com",
    "ip_address": "203.192.1.172",
    "created_at": "2012-06-20T03:10:49Z",
    "status_message": "Success!",
    "error_message": null,
    "card": {
      "token": "card_nytGw7koRg23EEp9NTmz9w",
      "display_number": "XXXX-XXXX-XXXX-0000",
      "scheme": "master",
      "address_line1": "42 Sevenoaks St",
      "address_line2": null,
      "address_city": "Lathlain",
      "address_postcode": "6454",
      "address_state": "WA",
      "address_country": "Australia"
    },
    "transfer": null
  }
}
EOM;

$responseData = json_decode($responseText, true);

if ($responseData['response']['success'] == true) {
 // continue transaction
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T09:00:46.617

您无法做到的原因`json_decode($response)`是因为`$response`它是一个对象，而不是 JSON 字符串。

Pin-PHP 库将根据[https://github.com/noetix/pin-php/blob/master/src/Pin/Handler.php#L87自动为您解码所有请求](https://github.com/noetix/pin-php/blob/master/src/Pin/Handler.php#L87)

要查看响应是否成功，请将**响应对象**用作对象：

```
if ($response->response->success) {
    echo "Success!";
} else {
    echo "Failed :(";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T07:50:08.780

为什么不直接使用 json 对象，例如：

```
$jsonobject = json_encode($responseText);
$response = $jsonobject->response->success;
if($response === true) {
    // code here
} 
```

# php - 将图像从一台服务器下载到另一台服务器到我的专用路径

> ID：15565068
> 
> 赞同：-1
> 
> 时间：2013-03-22T07:32:43.860
> 
> 标签：php, codeigniter, download

我想将图像从其源下载到我的服务器（专用路径）作为后台处理。（对使用我的 Web 应用程序的用户没有消息框。）实际上我所做的只是从社交网站（Fb、twitter、 gmail 等）。并在该特定用户图库中显示它们。是否可以在不通知浏览器/用户的情况下下载作为后台处理，以保存该图像并将其存储在给定路径中，然后在用户图库中显示。代码点火器下载库可以用作后台处理还是有其他方法可以这样做？

我正在使用 Win OS、Xampp 和代码点火器 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:11:40.447

使用 AJAX 在 BG 中运行以下命令：

```
//Get the file
$content = file_get_contents("http://www.google.co.in/intl/en_com/images/srpr/logo1w.png");
//Store in the filesystem.
$fp = fopen("/location/to/save/image.jpg", "w");
fwrite($fp, $content);
fclose($fp); 
```

来自这篇 SO 帖子：[PHP - 直接从 URL 将图像复制到我的服务器](https://stackoverflow.com/questions/6306935/php-copy-image-to-my-server-direct-from-url)

# c# - 在基于.NET Framework 2.0的项目中使用.NET Framework 3.5库添加LINQ To XML功能

> ID：15565081
> 
> 赞同：2
> 
> 时间：2013-03-22T07:33:51.767
> 
> 标签：c#, .net, licensing, linq-to-xml, distribution

我的项目从 .NET Framework 的 4.0 版本降级到 2.0 版本。但它包含大量使用 LINQ To Objects 和 LINQ To XML 的代码（我使用了很多 XElement 对象）。当我将.NET Framework 3.5 中的**System.Core.dll**和**System.Xml.Linq.dll库包含到我的项目中时，这会添加必要的功能并解决问题。**

但是有两个问题：

1.  这种解决方案有什么缺点吗？
2.  我可以使用 .NET Framework 3.5 中包含的两个库以商业方式分发我的程序吗？如果我违反任何使用和分发 .NET Framework 的许可怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:00:23.360

我认为使用`System.Core`可能意味着你遇到了一些麻烦（如果只是从技术的角度来看 - IANAL 所以不会评论任何类型的分发问题）....

作为一个例子（我没有具体的证据，只是提出假设）你有 System.Core 的 .NET 3.5 版本，并且有一个 .NET 2.0 程序集，它使用 System.Core 中的一个类，但它有一个不稳定，因为它不是.NET 2.0 附带的 System.Core 程序集，其行为方式可能不同......或者相反，3.5 System.Core 中的某些东西期望在 .NET 3.5 中修改的另一个程序集以某种方式或提供一定的功能，但 .NET 2.0 版本的程序集没有；这听起来像是您可能会花费大量时间调试/故障排除/诊断/头部撞击的那种情况。

话虽这么说，似乎人们已经[在这里](https://stackoverflow.com/questions/140239/targeting-net-framework-3-5-using-net-2-0-runtime-caveats)[和](http://abdullin.com/journal/2008/12/23/how-to-use-net-35-features-and-c-30-syntax-in-net-20.html)这里[工作](https://stackoverflow.com/questions/823024/can-i-add-a-reference-to-system-core-dll-net-3-5-to-a-net-2-0-application-an)了一些以前的 SO 问题。这些链接中可能还有一些有用的评论可以帮助您。还有一些更多的链接，人们似乎受到同一事物的激励（在 .NET 2.0 上使用 LINQ）[here](https://stackoverflow.com/questions/2138/linq-on-the-net-2-0-runtime)和[here](http://weblogs.asp.net/fmarguerie/archive/2007/09/05/linq-support-on-net-2-0.aspx)。还有某种使用来自 Mono [here的程序集的实现](http://linq4you.codeplex.com/)

如果您只是想将组件放入其中，那么其中之一就是您想要（仅我认为）投入大量时间进行测试，以减少您在出现不可预测的结果方面的风险足迹。

正如您所指出的，2.0 和 3.5 之间没有单独的运行时（与 2.0 -> 4.0 不同），因此使用这个事实，您可以在您的应用程序将部署到的每台目标机器上安装最新的 3.5（桌面用于一个 WinForms/WPF 应用程序或服务器上的基于 Web 的东西，我猜）并且在 Visual Studio 中开发时只[将](http://msdn.microsoft.com/en-us/library/vstudio/bb398202.aspx)3.5 作为您的 .NET 版本？我认为这会让事情变得更安全一些，因为你实际上将框架版本作为开发工作的一部分，而不是仅仅换入/换出一组程序集。

# codeigniter - CodeIgniter 空白页

> ID：15565083
> 
> 赞同：1
> 
> 时间：2013-03-22T07:33:59.427
> 
> 标签：codeigniter

n00b 在这里。在搜索论坛后，我还没有遇到这个问题，因为我正在经历它。

我有一个 CI 站点直到大约三天前才正常工作。我的问题如下：

单击按钮时 - 页面加载正确。

在 Enter 按下 - CI 死亡空白页加载。

例如：当我登录时，在登录过程运行后，它必须将我重新路由到仪表板，除非我仍然有一个临时密码，我首先被重新路由到“更改密码”屏幕，然后再到仪表板。

只要我使用按钮并单击它们，一切正常。

在 ENTER PRESS 上，我得到了死机的空白屏幕。但是，在 TAB 到 BUTTON 然后 ENTER 上它可以工作。

然而问题并不一致。我有一些没有附加视图的进程，它们都不会运行 - 点击 ENTER 并获得空白。他们都在ENTER PRESS上失败了。

我慢慢地离开我的手推车。日志记录已开启，缓存和日志目录为 775。我的日志中没有显示任何内容...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T07:39:38.777

首先尝试激活错误处理程序以显示错误以获取附加信息，以便在此处发布发生了什么错误。

```
 // change settings for error handler to show errors
        // $this setup is used for checking errors for development to be shown.... 
        ini_set('display_errors', 1);
        error_reporting(E_ALL); 
```

顺便说一句，如果您使用 CI 版本 2 更高，您可以在其 index.php 文件中看到它也用于显示错误的配置。

```
define('ENVIRONMENT', 'development'); //just set up environtment to development 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-25T18:13:52.147

即使有公认的答案，我也想添加一种对我有用的方法来解决这个问题。

通常，“空白页”表示代码中某处的 PHP 解析错误。对我来说奇怪的是，在我本地基于 MAMP 的测试服务器上，代码运行良好。我将它通过 FTP 传输到我的托管服务器，然后突然空白页。

即使我有错误，记录错误，显示错误，任何日志文件中都不会出现任何内容。

我能够通过一个有趣的小技巧找到错误。我在系统/核心的 CodeIgniter.php 中添加了一条回显线。显然，破解内核并不是一个好主意，但我想做的只是看看它在加载过程中的进展情况。

当我尝试在远程托管服务器上加载页面后出现我的回声时，它还显示了派生控制器中的解析问题！不知道为什么没有添加“回声”就不会出现错误。但是添加它似乎会触发一些输出，即附加了我的回显行和 PHP 解析错误。

不确定这是否会对任何人有所帮助，但事实证明这是一种查找仅在远程服务器上显示的错误的好方法。

显然，不要忘记将核心文件恢复到没有回显的原始状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T07:49:40.493

安装 php5-pgsql 对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T15:08:29.647

我的问题是 Apache 因为 ...Skype 而停止工作！Skype 实际上在相同的 443 上工作，而 Apache 没有启动！我讨厌这个Skype！给我带来一段时间的坚果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-27T09:52:55.850

INCLUDE login.php 中可能有错误

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T10:16:15.283

通过将应用程序复制到全新的 CI 2.3 安装中来解决此问题。

我不知道究竟是什么导致了这种“不稳定”的行为。

每当单击按钮时，应用程序按设计正常工作，但在按下 ENTER 时出现空白死亡屏幕。

这种不一致的行为让我感到震惊。我的日志（CI 和 APACHE）也没有显示任何内容这一事实也很奇怪。如果这是一个解析错误，那么“Click”和“Enter Press”上的行为肯定应该是相同的。

我用于各种临时管理作业的非视图控制器现在也可以正常工作，这是以前没有的，因为它们使用“Enter Press”（没有“单击”按钮）。

我仍然会邀请最好的猜测来解释为什么这种行为会以这种方式发生。

肯定有人（Phil Sturgeon 等人）具有丰富的 CI 经验，遇到过这种不一致的空白屏幕行为，并且知道是什么原因造成的。

感谢所有花时间和精力帮助我的人！！！

大涨！！！堆栈溢出！！！

# animation - 将动画 3D 模型转换为 Quake 2 的模型

> ID：15565085
> 
> 赞同：2
> 
> 时间：2013-03-22T07:34:01.963
> 
> 标签：animation, 3d, opengl-es-2.0, augmented-reality, quake

我即将创建一个增强现实应用程序，它需要用动画渲染 3d 模型。将模型导出为旧地震 (.md2) 格式的最佳方式/插件或软件是什么？

我想使用流行的建模软件，如 3Ds MAX、Maya 或 Blender。我在整个互联网上进行了搜索，但我只找到了一些我难以使用的插件。

有什么商业工具吗？我需要一个很好的支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:00:42.947

嗯……我最喜欢的问题。

这在很大程度上取决于您愿意导出哪种动画。

**3Ds Max**
里面 有`3Ds Max`一个很棒的插件，叫做[QTip](http://qtipplugin.com/)。它只花费几美元，但每一分钱都值得。

**Maya**
还有另一个导出插件 ( [MD2Export](https://github.com/arifken/MD2Export) ) 用于`Maya`. 我没有取得太大的成功，但值得一试。

**Blender**
还有一些`Blender`为我编写的脚本，但没有一个对我有用。但我认为`Blender 2.46`有*MD2*的本地出口。

**独立软件**
很少有轻量级应用程序支持导出*MD2*：

*   [fragMOTION](http://www.fragmosoft.com/) : 可以导入/导出多种格式，并支持*MD2*和*MD3*
*   [MilkShape 3D](http://www.milkshape3d.com/)：与此相同，`fragMOTION`但它也有一个 MD2 查看器，有时会派上用场。
*   [Quake2 Modeller](http://www.quake2.com/modeling/q2modeller/files/q2mdlr83.zip)：太老了，我没有亲自尝试过。

注意 1：正如我所说，这在很大程度上取决于您的动画。如果您有`Vertex`动画，那么`QTip`是您的黄金选择。`fragMOTION`并且`MilkShape`不支持顶点动画。但是如果你制作`Bone`动画，你可以使用你选择的建模软件，将其导入`fragMOTION`或`MilkShape`导出到MD2。

[注 2：我认为您可以在此处](http://www.quake2.com/modeling/)找到有关 MD2 的更多信息

# ios - xcode 3.1.2 的缺点

> ID：15565087
> 
> 赞同：-5
> 
> 时间：2013-03-22T07:34:07.260
> 
> 标签：ios, xcode

并在ios开发中。我目前正在开发 xcode 3.1.2，我的问题是如果我在 xcode 3.1.2 中开发 IOS 应用程序有什么区别，我使用它有什么缺点，因为它是旧版本的 xcode。？是否支持所有平台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:40:18.463

主要缺点是你不能使用最新的 SDK，所以你不能将应用程序发送到应用商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:37:14.353

您可以在此处找到自 Xcode 4.0 以来所有添加/删除的功能：[Xcode Release Notes](http://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/index.html)。检查它们并了解您是否想要更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T07:40:09.680

有许多方法会随着软件的较新版本而贬值。因此，xcode 3.1.2 也是如此。在 xcode 3.1.2 中创建的项目可能在更高的平台上工作，但您无法获得所有功能。我有一个例子，设备方向。更高版本不支持 xcode 3.1.2 定向方法（方法在更高版本中更新）。这是唯一的一个例子。如果没有使用旧版本的具体原因，您应该选择最新版本。

# java - 根据第一个下拉菜单的选择设置第二个框的下拉值

> ID：15565091
> 
> 赞同：0
> 
> 时间：2013-03-22T07:34:19.803
> 
> 标签：java, jquery, html

我有 2 个下拉列表声明如下：

```
 <label for="select-choice-1" class="select">Customer Product Name</label>
    <select name="select-choice-1" id="select-choice-1" onchange="selectTransport(this.value)">
        <option value="a">Polyvinyl Chloride</option>
        <option value="b">Thermosetting</option>
        <option value="c">Thermoplastic</option>
    </select>
    <label for="select-choice-2" class="select">SABIC Product ID</label>
    <select name="select-choice-2" id="select-choice-2">
        <option value="A">1731-Black</option>
        <option value="B">1731-Brown</option>
        <option value="C">2345-Blue</option>
    </select>
       //js function
function selectTransport(value){
    if(value==="Thermoplastic")
    {

       var theText = "2345-Blue";
$("#select-choice-2 option:contains(" + theText + ")").attr('selected', 'selected');

    }} 
```

不知何故，没有使用这个选择第二个下拉列表。如何使用 jquery 函数在选择第一个下拉值后自动选择第二个下拉列表中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:41:24.093

尝试

```
 $(function(){
   $('#select-choice-1').change(function(){
      var sel = $(this).val();
      $('#select-choice-2').val(sel.toUpperCase());
   });
 }); 
```

**更新**

**[演示](http://jsfiddle.net/pintu31/uHmqu/)**

```
function selectTransport(value){
//value return a,b,c
var val = $('#select-choice-1 [value="'+value+'"]').html();//.text()
  if(val==="Thermoplastic"){alert('test');
    var theText = "2345-Blue";
    $("#select-choice-2 option:contains(" + theText + ")").attr('selected', 'selected');
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T10:11:47.983

通过使用 jquery，您可以轻松完成任务，以下是代码：

```
 var ddlArray= new Array();
var ddl = document.getElementById('tierFormulaBase');
for (i = 0; i < ddl.options.length; i++) {
   ddlArray[i] = ddl .options[i].text;
}

$("#tierChangeType").change(function (e) {
    var e = document.getElementById("tierChangeType");
    var selectedValue = e.options[e.selectedIndex].value;
    var selectedText = e.options[e.selectedIndex].text;

    document.getElementById('tierFormulaBase').innerHTML = "";
    var src = document.getElementById('tierFormulaBase');
    var opt = document.createElement("option");
    if(selectedValue == 1)
    {
         opt.text = ddlArray[0];
        opt.value = selectedValue;
    }else if (selectedValue == 2)
    {
         opt.text = ddlArray[1];
        opt.value = selectedValue;
    }
    else if (selectedValue == 3)
    {
         opt.text = ddlArray[2];
        opt.value = selectedValue;
    }
    src.add(opt);
 }); 
```

有关现场演示和更多信息，请访问此链接：[单击此处查看代码](http://www.jkstack.com/2013/07/how-to-change-second-dropdownlist-value.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:20:02.840

```
function selectTransport(value){
 if(value==="Thermoplastic")
 {

    var theText = "2345-Blue";
 $("#select-choice-2 option:contains(" + theText + ")").attr('selected', 'selected'); 
```

in above function value would be either a,b,c not **Thermoplastic**

so

```
function selectTransport(value){
 if(value==="c")
 {
  ....
} 
```

# c# - 如何设置安装时间 SQL 查询

> ID：15565101
> 
> 赞同：0
> 
> 时间：2013-03-22T07:35:10.043
> 
> 标签：c#, sql, sql-server, installation, windows-installer

好吧，这可能是一个微不足道的问题，但我找不到有关标题的任何信息。我为一个商店制作了这个应用程序，它使用了一个名为 Store 的数据库，其中包含一些名为 Dealers、Orders、Sales 的表和一个名为DetailedRecord 的视图。我想要的是，当这个应用程序安装在客户端机器上时，相关的 SQL 查询会运行以在客户端机器上创建这些表和视图。我需要一步一步的方法来做到这一点，任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:04:06.753

安装 SQL Server 后，您可以使用 SQLCMD.EXE 在命令行上运行还原。以下是一些示例： http: [//www.howtogeek.com/50295/backup-your-sql-server-database-from-the-command-line/](http://www.howtogeek.com/50295/backup-your-sql-server-database-from-the-command-line/)

因此，如果您可以从安装程序调用命令行，那就是您所做的。

我敢说只运行对象创建脚本可能比恢复备份更简单（并且更模块化）。SQL Server 有许多版本，此链接中的一个可能有用：

[http://msdn.microsoft.com/en-us/evalcenter/hh230763.aspx](http://msdn.microsoft.com/en-us/evalcenter/hh230763.aspx)

# javascript - 使用fancybox插件制作图片库不起作用

> ID：15565102
> 
> 赞同：0
> 
> 时间：2013-03-22T07:35:11.917
> 
> 标签：javascript, jquery, html

下面给出的脚本顺序有什么问题？我使用 fancybox 在我的网站上查看图像，但它不起作用。会不会是脚本顺序不对或者有冲突？我想用 fanybox 插件制作一个图片库。

这是我得到的错误：

`Timestamp: 3/22/2013 2:25:05 PM Error: ReferenceError: jQuery is not defined Source File: file:///G:/LBC-FIRM/example.com/js/jquery.fancybox.js Line: 1985`

这是我的脚本引用的顺序：

```
 <script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
    <script type="text/javascript" src="js/jquery.fancybox.js"></script>
    <script type="text/javascript" src="js/tooltip.js"></script>
    <script type="text/javascript" src="js/image_groups.js"></script>
    <script type="text/javascript" src="js/thumbnail-slider.js"></script>
    <script type="text/javascript">
        $.noConflict();
    </script> 
```

我的 HTML：

```
<script type="text/javascript">
    $(function(){
      $("#royal_place").click(function(){
    $.fancybox.open([
        {href : '../object/royal_palace/1.jpg'},
    {href : '../object/royal_palace/2.jpg'}, 
    {href : '../object/royal_palace/3.jpg'},
    {href : '../object/royal_palace/4.jpg'}, 
    {href : '../object/royal_palace/5.jpg'},
    {href : '../object/royal_palace/6.jpg'},
    {href : '../object/royal_palace/7.jpg'}, 
    {href : '../object/royal_palace/8.jpg'},
    {href : '../object/royal_palace/9.jpg'},
    {href : '../object/royal_palace/10.jpg'}
     ]);
      });           
   });
</script>

<a id="royal_place" href="javascript:;" >
    <img src="img/pic_tuk_tuk_1.png" alt="Tuk Tuk picture One" onmouseover="tooltip.pop(this, 'Tuk Tuk one')"/>
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:50:40.757

尝试这个

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script> 
```

# scons - 如何使用瑞萨编译器更改 scons 中的构建目录

> ID：15565103
> 
> 赞同：1
> 
> 时间：2013-03-22T07:35:12.750
> 
> 标签：scons

我正在使用 scons 脚本通过使用 VC10 和 Renesas 编译器来编译我的代码。

我正在使用 VC10 在变体目录中成功构建我的源代码，但是如果我为瑞萨编译器使用相同的脚本，它不会在变体目录中构建 obj 文件。谁能告诉我该怎么做。

我正在使用瑞萨电子 rx600 系列控制器。

我的示例树看起来像

```
src1
    -main.c
   sconscript
   sconstruct
   subdirA
      fileA.c
      sconscript
   subdirB
      fileB.c
      sconscript 
```

src1/sconstruct 包含

```
import os

env = Environment()
tmp_obj_list = []

env = Environment(ENV = {'PATH' : os.environ['PATH']})

env['LINKFLAGS'] = "/nologo /subsystem:console /pdb:project.pdb"
env['CCFLAGS'] = "/nologo /wd4355 /GR- /EHs-c- /MT /c /W3 /WX /Zi /FD"
env['ENV']['TMP'] = os.environ['TMP']
env['ENV']['TEMP'] = os.environ['TEMP']

Export('env')

env.SConscript('d://src1//subdirA//SConscript',
               variant_dir = 'd://build1//subdirA', 
               duplicate = 0, exports = 'env')
tmp_obj_list.append(Glob('d://build1//subdirA' + '/*.lib'))
env.SConscript('d://src1//subdirB//SConscript',
               variant_dir = 'd://build1//subdirB',
               duplicate = 0, exports = 'env')
tmp_obj_list.append(Glob('d://build1//subdirB' + '/*.lib'))

env.SConscript('d://src1//SConscript')
env.Append(LIBS = tmp_obj_list) 
```

src1/sconscript 包含

```
Import('env')

env.Program('program',Glob('*.c'))
env.Clean('program','d://build1') 
```

src1/subdirA & src1/subdirB sconscript 包含

```
Import('env')
l = env.Library(target='subdirB', source='fileB.c')

Return('l') 
```

# php - 页面上的分享和点赞按钮的技术问题

> ID：15565111
> 
> 赞同：1
> 
> 时间：2013-03-22T07:35:50.260
> 
> 标签：php, facebook-like, share

我创建了自己的网页，还在 Facebook 上创建了一个粉丝专页。在我的网页上，我添加了一个指向粉丝页面的“赞”按钮，一切正常。另外，我在人物帖子下做了一个分享按钮和点赞按钮。

问题是：当有人喜欢任何帖子时，它可以正常工作，但他们首先需要确认喜欢，然后他可以将其发布在他的墙上，但这个功能不起作用......我正在使用这个代码作为喜欢按钮：

```
 <div class="fb">    
        <fb:share-button href="'.$rewrite->img("#ID#", "#REWRITE-TITLE#").' " type="button_count"></fb:share-button>
        </div> 
```

共享的另一个问题是：当有人想在他的墙上发布图像时一切都很好，但是当我作为 fangpage 登录时，这不起作用。我将此代码用于共享按钮：

```
 <div class="fb">
        <div class="fb-like" data-href="'.$rewrite->img("#ID#", "#REWRITE-TITLE#").'" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false"></div>
        </div> 
```

我的网页是[http://www.najslodsze.pl](http://www.najslodsze.pl)我的 Facebook 粉丝页面是[http://www.facebook.com/Najslodszepl](http://www.facebook.com/Najslodszepl)

# magento - 如何使用类别 ID 过滤购物车页面中的产品？

> ID：15565113
> 
> 赞同：-1
> 
> 时间：2013-03-22T07:36:01.043
> 
> 标签：magento, filter, shopping-cart, categories, product

我需要使用类别 ID 过滤购物车页面中的产品。在购物车页面中，我使用 $this->getItems()。我不知道如何过滤。如果您有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:19:54.223

为此，您必须编辑购物车控制器中的产品集合，然后您可以使用这样的类别 ID 过滤购物车产品

**`$this->addFilter('category_id',array('1,2,3'));`**
或 或
**`$this->addAttributeToFilter('category_id',array('1,2,3'));`**

**`$this->addFieldToFilter('category_id',array('1,2,3'));`**

试试这个然后回复我

# jquery - Uncaught SyntaxError: Unexpected token : in jQuery 定义？

> ID：15565117
> 
> 赞同：-2
> 
> 时间：2013-03-22T07:36:05.677
> 
> 标签：jquery

我以前从未见过这样的：

![在此处输入图像描述](../Images/573a806160a8f14697ab15b97938e424.png)

```
<script type="text/javascript">
  $(document).ready(function() { 
    $('#js-news').ticker(
      speed: 0.10,           // The speed of the reveal
      ajaxFeed: false,       // Populate jQuery News Ticker via a feed
      feedUrl: false,        // The URL of the feed
                       // MUST BE ON THE SAME DOMAIN AS THE TICKER
      feedType: 'xml',       // Currently only XML
      htmlFeed: true,        // Populate jQuery News Ticker via HTML
      debugMode: true,       // Show some helpful errors in the console or as alerts
                         // SHOULD BE SET TO FALSE FOR PRODUCTION SITES!
      controls: true,        // Whether or not to show the jQuery News Ticker controls
      titleText: 'Latest',   // To remove the title set this to an empty String
      displayType: 'reveal', // Animation type - current options are 'reveal' or 'fade'
      direction: 'ltr'       // Ticker direction - current options are 'ltr' or 'rtl'
      pauseOnItems: 2000,    // The pause on a news item before being replaced
      fadeInSpeed: 600,      // Speed of fade in animation
      fadeOutSpeed: 300      // Speed of fade out animation
    );
  });
</script> 
```

那个代码是正确的`</head>`。并且`jQuery`被包括在内。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T07:39:29.697

股票代码中可能缺少`{}`：

```
<script type="text/javascript">
  $(document).ready(function() { 
    $('#js-news').ticker({
          speed: 0.10,           // The speed of the reveal
          ajaxFeed: false,       // Populate jQuery News Ticker via a feed
          direction: 'ltr'
           ...........//--^-------missing ','
          fadeOutSpeed: 300      // Speed of fade out animation
     });
   });
</script> 
```

也正如其他答案所暗示的`,`那样`direction: 'ltr'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:38:41.493

你错过了`,`之后`direction: 'ltr'`

# mysql - 如何根据三列编写此自联接

> ID：15565119
> 
> 赞同：1
> 
> 时间：2013-03-22T07:36:19.353
> 
> 标签：mysql, join, inner-join

你好，我有一个下表

```
------------------------------------------
| id | language | parentid | no_daughter |
------------------------------------------
| 1  |     1    |    0     |      2      |
------------------------------------------
| 1  |     1    |    0     |      2      |
------------------------------------------
| 2  |     1    |    1     |      1      |
------------------------------------------
| 2  |     2    |    1     |      1      |
------------------------------------------
| 3  |     1    |    1     |      0      |
------------------------------------------
| 3  |     2    |    1     |      0      |    
------------------------------------------
| 4  |     1    |    2     |      0      |
------------------------------------------
| 4  |     2    |    2     |      0      |
------------------------------------------
| 5  |     1    |    2     |      0      |
------------------------------------------
| 5  |     2    |    2     |      1      |
-----------------------------------------
| 5  |     1    |    4     |      1      |
------------------------------------------
| 5  |     2    |    4     |      1      |
------------------------------------------ 
```

**设想**

每条记录在表中都有多个具有不同`language`ID 的行。`parentid`告诉谁是该记录的父级。`no_daughter`columns 告诉每条记录一条记录有多少个子记录。理想情况下的意思 如果`no_daughter`值为`2`，`id = 1`则表示`1`应该是`parentid`同一张表中的 2 条记录。**但是，如果一个记录在语言方面有多个存在，它将被视为一个记录**。

**我的问题**

我需要找出那些`no_daughter`值不正确的记录。这意味着如果`no_daughter`为 2，则必须有两条记录谁`parentid`具有该 id。在上述情况下，记录`id = 1`是有效的。但是有记录`id = 2`是无效的，因为`no_daughter = 1`这个记录的实际女儿是 2。同样的情况是`id=4`

任何人都可以告诉我如何找到这些错误的记录吗？

**回答后更新**

Ken Clark 和 shola 给出了返回相同结果的答案，例如 shola 查询是

```
SELECT DISTINCT 
id 
FROM
tbl_info t 
INNER JOIN 
  (SELECT 
    parentid,
    COUNT(DISTINCT id) AS childs 
  FROM
    tbl_info 
  GROUP BY parentid) AS parentchildrelation 
  ON t.id = parentchildrelation.parentid 
  AND t.no_daughters != parentchildrelation.childs 
```

此查询返回那些已`parentid`在表中用作某处但具有错误`no_daughter`值的 id。`no_daugter`但不返回在列中具有值但未用作`parentid`表中任何位置的id 。例如`id = 5`有`no_daughter = 1`但它没有像`parentid`表中那样使用。所以这也是一个错误的记录。但是上面的查询没有捕获这样的记录。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:44:35.150

试试这个：

```
SELECT DISTINCT 
      id 
FROM
   tbl_info t 
Left JOIN 
   (SELECT 
       parentid,
       COUNT(DISTINCT id) AS childs 
   FROM
       tbl_info 
   GROUP BY parentid) AS parentchildrelation 
   ON t.id = parentchildrelation.parentid 
  Where t.no_daughters != parentchildrelation.childs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:44:04.053

试试这个：

```
SELECT id FROM tinfo t inner join
(SELECT parentid, COUNT(distinct language ) as childs FROM tinfo group by parentid) as     summary
on t.id=summary.parentid and t.no_daughters!= summary.childs 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T08:08:55.040

试试这个

```
 Select Distinct * From tablename t
 Left Join
 (
   Select COUNT(t1.Id) Doughter,t1.parentid,t1.language From tablename  t1 Group By t1.parentid,t1.language
 )tbl
 On t.id=tbl.parentid And tbl.language=t.language And t.no_daughter<>tbl.Doughter 
```

# html - 未在框架中查看时重定向

> ID：15565124
> 
> 赞同：-2
> 
> 时间：2013-03-22T07:36:39.603
> 
> 标签：html, redirect

我有一个 wc.html，我有 index.html 和代码：

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>My title</title>
    </head>
    <frameset rows="*">
        <frame src="wc.html">
    </frameset>
    <noframes></noframes>
    <body>
    </body>
</html> 
```

我希望当 wc.html 单独查看而不是在索引中时，它会重定向到索引页面。

我怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:13:25.760

你可以试试这个：

```
var location = window.location.href;
    if(location.indexOf('wc') != -1 || location == undefined){
        window.location.href = "index.html";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:42:00.783

尝试这个，

```
if(window.parent.location.href==undefined){
   window.location="index.html";
} 
```

# linux - 我可以找到一个从 linux 操作系统绝对增加的值吗？

> ID：15565125
> 
> 赞同：-3
> 
> 时间：2013-03-22T07:36:41.057
> 
> 标签：linux, timestamp

我知道这很奇怪，但它会有所帮助。我找到了两种方法：

1.  UNIX时间戳，它可以保持绝对增量，除非系统（linux）的日期时间没有被意外修改。

2.  手动维护一个值，例如在 file/sqlite/mysql 中。但在我的情况下很难做到这一点。

linux os中是否有一些价值或一些方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:09:37.473

对不起，我和朋友讨论过这个问题。他们认为这可能是一个哲学问题：）

# html - 如何使用html使文本框不可点击

> ID：15565132
> 
> 赞同：3
> 
> 时间：2013-03-22T07:37:15.280
> 
> 标签：html, textbox, safari

我想使用 html 使 textarea 不可编辑和不可点击。我为标签提供了“readonly=true”；但是，它仍然是可点击的，但不可编辑。只读文本区域在 Safari 浏览器中被选中。请帮忙。我不希望选择文本区域和文本框。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T08:01:47.450

在元素上使用`readonly`属性意味着该元素不可编辑，但是在提交表单时会提交字段的值。

虽然`disabled`元素不可编辑，`readonly`但它的值不会在表单提交时提交。

因此，如果要提交字段的值，请使用：

```
<input type="text" name="textbox1" readonly /> 
```

别的

```
<input type="text" name="textbox1" disabled="disabled" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T07:40:28.260

试试`disabled="disabled"`。这将禁用文本框/文本区域，因此不会被选中。此外，该值不会在表单提交时提交。

对于文本框：

```
<input type="text" name="textbox1" disabled="disabled" /> 
```

对于文本区域：

```
<textarea name="textarea1" disabled="disabled" /></textarea> 
```

在 HTML5 中，只有`disabled`属性也可以工作。该值不是强制性的。但是，对于 XHTML Strict，您将需要`key & value`pair。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T07:38:52.037

```
<textarea disabled="disabled"></textarea> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T07:39:45.683

试试这个，我希望它有效，

```
<input type="text" name="country" value="anytext" readonly> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T07:39:22.197

你为什么不试试

```
disabled="disabled" 
```

# cakephp - 如何在 CakePHP 模型中使用带有 '<' 和 '>' 的表达式

> ID：15565133
> 
> 赞同：0
> 
> 时间：2013-03-22T07:37:28.340
> 
> 标签：cakephp

如何从 CakePHP 正确生成此语句？

```
DELETE FROM table as Table WHERE Table.expire < NOW(); 
```

我已经尝试过了，但这不起作用：

```
$this->deleteAll(array(
    'Table.expire <' => $this->getDataSource()->expression('NOW()')
));

//It complains:
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Table.expire <' in 'where clause'

SQL Query: 
SELECT `Table`.`id` FROM `database`.`table` AS `Table`   WHERE `Table.expire <` = NOW() 
```

现在使它工作的唯一方法是将整个条件作为字符串：

```
$this->deleteAll('Table.expire < NOW()');
:: OR ::
$this->deleteAll(array('Table.expire < NOW()')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:59:35.953

试试这个

```
$this->delete("all", array('conditions'=>array(
    'Table.expire < ' => $this->getDataSource()->expression('NOW()')))
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:17:16.187

我已经测试了你的情况，因为我有点惊讶 CakePHP 没有正确地“引用”

```
Table.expire < 
```

到

```
`Table`.`expire` < 
```

（它通常会这样做）。

这*可能*与`$this->getDataSource()->expression('NOW()')`Returns a `stdObject`with 'NOW()' as a 'value' 属性有关。也许这是 CakePHP 逻辑中的一个“特殊”情况，我不太确定。

## 数组表示法假定“文字”值，而不是“表达式”

无论如何，*一般来说*，“数组表示法”会将传递的值视为“文字”值，而不是表达式，因此引用它，例如

```
'conditions' => array('Table.expire <' => 'some value')
'conditions' => array('Table.expire < ?' => 'another value')
'conditions' => array('Table.expire <' => 'NOW()') 
```

都将被视为'literal'值，从而产生这些SQL条件；

```
WHERE `Table`.`expire` < 'some value'
WHERE `Table`.`expire` < 'another value'
WHERE `Table`.`expire` < 'NOW()' 
```

因此，这些值被视为*字符串*，数据库不会将“NOW()”视为“当前日期/时间”。

## 选项

这将为您提供一些选择；

## 将条件指定为字符串，而不是键/值数组

您已经在问题中提供了此选项：

```
'conditions' => array('Table.expire < NOW()') 
```

此解决方案在您的情况下应该是安全的（语句中不包含用户输入），但是，*如果*用户输入将包含在此类语句中，则应该对其进行适当的清理。此外，`NOW()`可能不是有效的跨数据库（ANSI SQL`CURRENT_TIMESTAMP`用于当前日期/时间）

## 将当前日期/时间指定为 ISO 日期，而不是“表达式”

这是我通常使用的方法；如果您更喜欢数组表示法，您可以考虑为条件提供“文字”日期，最好是 ISO 日期，大多数数据库都可以正确处理该日期；

```
'conditions' => array('Table.expire <' => date('Y-m-d H:i:s'))

// or

'conditions' => array('Table.expire < ?' => date('Y-m-d H:i:s')) 
```

**请注意**，我创建了所有示例以用作 a 的“条件”键`find()`，但是，这同样适用于 a`deleteAll()`

希望这可以帮助！

# c# - c#搜索功能查询/代码

> ID：15565135
> 
> 赞同：0
> 
> 时间：2013-03-22T07:37:51.413
> 
> 标签：c#, .net, database

我正在开发 Windows 应用程序。

我那个，我正在实现搜索功能。

我有 5 个过滤器 [搜索类别]。

Partycode ， branchId ， Symbol ，BuySell ， TerminalId。

如果所有文本框都为空，那么它应该显示所有数据。

如果填写了 Partycode，那么它应该只显示特定派对代码的数据。

如果填写了party code 和 branchId 文本框，那么它应该为具有特定终端 ID 的 particode 提供数据。...并且条件适用于所有排列和组合。

我正在写不同的 if else 语句。这些正在成为许多 If-Else 语句。

有没有针对这种情况编写查询的特殊方法？或者.NET 是否提供任何功能来处理它？

或者我正朝着正确的方向前进[有很多 If-Else 语句]？

我试过了>>

```
 private void btnRefresh_Click_1(object sender, EventArgs e)
        {
            string SQL = "";
            if ((txtSearchPartyCode.Text == "") && (txtSearchBranchId.Text == "") && (txtSearchSymbol.Text == "") && (txtSearchTerminalId.Text == "")&&(cmbBuySell.Text==""))
            {

                SQL = "select Party_Code,TradeNo,Scrip_Code,Inst_Type,Expirydate,Strike_price,Option_type,TerminalId,Branch_Id,Buy_Sell,Trade_Qty,Market_Rate,Sauda_Date,OrderNo from tradeFile";

            }
            else
                if ((txtSearchPartyCode.Text != "") && (txtSearchBranchId.Text == "") && (txtSearchSymbol.Text == "") && (txtSearchTerminalId.Text == "")&&(cmbBuySell.Text==""))    
                {

                        SQL="select Party_Code,TradeNo,Scrip_Code,Inst_Type,Expirydate,Strike_price,Option_type,TerminalId,Branch_Id,Buy_Sell,Trade_Qty,Market_Rate,Sauda_Date,OrderNo from tradeFile where Party_Code='"+txtSearchPartyCode.Text+"'";

                }
                else
                    if ((txtSearchPartyCode.Text == "") && (txtSearchBranchId.Text != "") && (txtSearchSymbol.Text == "") && (txtSearchTerminalId.Text == "")&&(cmbBuySell.Text==""))
                    {
                        SQL="select Party_Code,TradeNo,Scrip_Code,Inst_Type,Expirydate,Strike_price,Option_type,TerminalId,Branch_Id,Buy_Sell,Trade_Qty,Market_Rate,Sauda_Date,OrderNo from tradeFile where Branch_Id='"+txtSearchBranchId.Text+"'";
                    }
            else
                        if ((txtSearchPartyCode.Text == "") && (txtSearchBranchId.Text == "") && (txtSearchSymbol.Text != "") && (txtSearchTerminalId.Text == "")&&(cmbBuySell.Text==""))
                        {
                            SQL="select Party_Code,TradeNo,Scrip_Code,Inst_Type,Expirydate,Strike_price,Option_type,TerminalId,Branch_Id,Buy_Sell,Trade_Qty,Market_Rate,Sauda_Date,OrderNo from tradeFile where Scrip_Code='"+txtSearchSymbol.Text+"'";
                        }
            else
                        if ((txtSearchPartyCode.Text == "") && (txtSearchBranchId.Text == "") && (txtSearchSymbol.Text == "") && (txtSearchTerminalId.Text != "")&&(cmbBuySell.Text==""))
                        {
                            SQL="select Party_Code,TradeNo,Scrip_Code,Inst_Type,Expirydate,Strike_price,Option_type,TerminalId,Branch_Id,Buy_Sell,Trade_Qty,Market_Rate,Sauda_Date,OrderNo from tradeFile where TerminalId='"+txtSearchTerminalId.Text+"'";
                        }
            else
                            if((txtSearchPartyCode.Text == "") && (txtSearchBranchId.Text == "") && (txtSearchSymbol.Text == "") && (txtSearchTerminalId.Text == "")&&(cmbBuySell.Text!=""))
                            {
                                float buy_Sell=0;
                                if(cmbBuySell.Text=="Buy")
                                    buy_Sell=1;
                                else
                                    if(cmbBuySell.Text=="Sell")
                                        buy_Sell=2;
                                SQL="select Party_Code,TradeNo,Scrip_Code,Inst_Type,Expirydate,Strike_price,Option_type,TerminalId,Branch_Id,Buy_Sell,Trade_Qty,Market_Rate,Sauda_Date,OrderNo from tradeFile where Buy_Sell='"+buy_Sell+"'";
                            }

                   try
                   {
                    da = new SqlDataAdapter(SQL, con);
                    DataSet ds = new DataSet();
                    da.Fill(ds);
                    gvTradeFile.DataSource = ds.Tables[0];
                   }
                   catch(Exception ex)
                   {
                       MessageBox.Show(ex.Message);
                   }
        } 
```

请把我拉出来！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T07:49:28.683

首先，直接回答您的问题：

```
private void btnRefresh_Click_1(object sender, EventArgs e)
{
    var sb = new StringBuilder("select Party_Code,TradeNo,Scrip_Code,Inst_Type,Expirydate,Strike_price,Option_type,TerminalId,Branch_Id,Buy_Sell,Trade_Qty,Market_Rate,Sauda_Date,OrderNo from tradeFile");
    if (!string.IsNullOrEmpty(txtSearchPartyCode.Text))
        sb.AppendFormat(" where Party_Code='{0}'", txtSearchPartyCode.Text);
    if (!string.IsNullOrEmpty(txtSearchBranchId.Text))
        sb.AppendFormat(" where Branch_Id='{0}'", txtSearchBrandId.Text);
    // ...and so on...
    sb.Append(";");
    try
    {
        da = new SqlDataAdapter(sb.ToString(), con);
        DataSet ds = new DataSet();
        da.Fill(ds);
        gvTradeFile.DataSource = ds.Tables[0];
    }
    catch(Exception ex)
    {
       MessageBox.Show(ex.Message);
    }
} 
```

将您的代码更改为这样的代码，您的生活可能会更轻松一些。

其次，一些建议。您的代码表明您是一个新手，花一些时间阅读有关使用数据库的更好方法可能是值得的。有数据库包装器，你可以使用它们，像这样直接查询数据库可能不是最好的主意。你还需要清理你的用户输入，你的代码容易受到 SQL 注入的影响（一个好的数据库包装器会为你做这件事）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:45:33.140

制作一行代码来调用您的 sql 语句来构建，然后将 if not blank 添加到 sql 语句中。`Partycode , branchId , Symbol ,BuySell , TerminalId`. 还将您的搜索功能更改为 like 语句，因此它不是那么二进制。

```
select Party_Code,TradeNo,Scrip_Code,Inst_Type,Expirydate,Strike_price,Option_type,
TerminalId,Branch_Id,Buy_Sell,Trade_Qty,Market_Rate,Sauda_Date,OrderNo 
from tradeFile 
where Party_Code like '&"+txtSearchPartyCode.Text+"&'";** 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T07:45:55.170

首先，尝试至少为数据访问重构您的代码。你现在的班级做得很多。

1-至少将您的数据访问代码重构为一些帮助程序类

2-尝试将SQL创建的责任转移到其他一些帮助类中。

3- 创建一个包含所有搜索参数的参数类，将此参数对象传递给 SQL 创建类。

4- 阅读[建造者模式](http://www.dofactory.com/Patterns/PatternBuilder.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T07:47:03.740

动态创建查询

```
Select * from TableName where "+ColumnName+"="'"+txtSearch.Text+"'" // Example 
```

从 txtSearch 文本框名称中识别您的 ColumnName

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T08:31:54.253

您可能想尝试这样的事情：

```
private void btnRefresh_Click_1(object sender, EventArgs e)
    {
        string WHERE_STATEMENT = null;
        string SEARCH = null;
        string SQL = null;
        int i = 1;

        switch (i)
        {
            case 1:
                WHERE_STATEMENT = "Party_Code";
                SEARCH = "";
            case 2:
                WHERE_STATEMENT = "Branch_Id";
                SEARCH = "";
            case 3:
                WHERE_STATEMENT = "Scrip_Code";
                SEARCH = "";
            case 4:
                WHERE_STATEMENT = "TerminalId";
                SEARCH = "";
            case 5:
                WHERE_STATEMENT = "BUY_SELL";
                SEARCH = "";
            case 6:
                WHERE_STATEMENT = "";
                SEARCH = "";
        }

        try 
            {           
                SQL = "select Party_Code,TradeNo,Scrip_Code,Inst_Type,Expirydate,Strike_price,Option_type,TerminalId,Branch_Id,Buy_Sell,Trade_Qty,Market_Rate,Sauda_Date,OrderNo from tradeFile where " + WHERE_STATEMENT + " like '%" + SEARCH + "%'";
                da = new SqlDataAdapter(SQL, con);
                DataSet ds = new DataSet();
                da.Fill(ds);
                gvTradeFile.DataSource = ds.Tables[0];
            }
       catch (Exception)
            {
                MessageBox.Show(ex.Message);
                throw;
            }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-31T04:54:28.883

`Select * from TableName where "+ColumnName+"="'"+txtSearch.Text+"'"`// 例子

# mysql - MySQL：删除没有孩子的父记录

> ID：15565136
> 
> 赞同：4
> 
> 时间：2013-03-22T07:37:54.293
> 
> 标签：mysql

如何编写从不存在子表的父表中删除记录的查询？

我有一个表`resume`和一个表`personal_skill`，其中包含一个`resume_id`引用简历表的字段。我需要删除简历表中没有`personal_skill`具有此类 resume_id 记录的所有记录。

我试着这样做：

```
 DELETE
    FROM
      resume
    WHERE
      version = 0
      AND NOT EXISTS (SELECT NULL
                      FROM
                        personal_skill x
                      WHERE
                        x.resume_id = id) 
```

但是这个查询失败了，因为我不能使用我在 SELECT 部分中删除的表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T07:50:36.437

您的尝试在这里显然有效：

```
 DELETE 
 FROM resume     
 WHERE version = 0
   AND NOT EXISTS (
     SELECT id                       
     FROM personal_skill x
     WHERE x.resume_id = resume.id
  ); 
```

如果没有，`id`那么问题可能很简单（personal_skill 有`personal_skill.id`专栏吗？）。

另一种选择是：

```
 DELETE resume  
 FROM resume 
 LEFT JOIN personal_skill 
    ON personal_skill.resume_id=resume.id 
 WHERE personal_skill.id IS NULL; -- or any non-NULLable column from personal_skill 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T07:44:18.773

做这个：

```
DELETE FROM  resume
WHERE version = 0
AND (SELECT COUNT(*) FROM personal_skill x WHERE x.resume_id = id)=0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T07:48:50.000

试试这个：

```
DELETE resume FROM
resume LEFT OUTER JOIN personal_skill
ON resume.resume_id = personal_skill.resume_id
WHERE personal_skill.resume_id IS NULL 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T07:50:15.093

尝试 LEFT JOIN 语法：

```
DELETE R 
FROM resume R
LEFT JOIN personal_skill PS ON PS.resume_id = R.id
WHERE PS.id IS NULL AND R.version = 0 
```

# jquery - ajax 发布新排序的 jquery 数据列表以获取新解决的行的位置 asp.net

> ID：15565138
> 
> 赞同：-3
> 
> 时间：2013-03-22T07:38:01.030
> 
> 标签：jquery, asp.net, row, jquery-ui-sortable, datalistitem

```
$(window).load(function () {
   $("table").sortable({
     items: "div",
     opacity: 0.6,
     cursor: 'move',
     update: function (event, ui) {
       var order = $('#form1').serialize();
       $.ajax({
         type: "POST",
         url: "Default7.aspx/Update",
         data: "{'NewOrder': '" + order + "'}",
         dataType: "json",
         contentType: "application/json"
       });
     }
   });
 }); 

[System.Web.Services.WebMethod]
public static void Update(string NewOrder)
{
} 
```

我如何提醒新排序的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:45:10.420

试试这个：

```
$(document).ready(function () {
    $("table").sortable({ items: "div", opacity: 0.6, cursor: 'move', update: function (event, ui) {
         var order = $('#form1').serialize();
         $.ajax({
             type: "POST",
             url: "Default7.aspx/Update",
             data: {"NewOrder" : order },
             dataType: "json",
             contentType: "application/json",
             success:function(){// add success callback function to sort row
                // add you code to sort the table
                // or call $('table').sortable() again
             }
         });
       }
   });
}); 
```

# ios - 带有隐藏超链接的 iOS 图像

> ID：15565147
> 
> 赞同：0
> 
> 时间：2013-03-22T07:38:27.310
> 
> 标签：ios, objective-c

我刚刚收到了这些要求，但想检查一下进行此操作的最佳方法是什么？

有一个大的图像文件需要在 iPad 上显示，它应该是可缩放/可平移的（这很容易）。

现在这张图片有几个需要点击的“项目”——即每次点击项目时，我都需要生成一个带有关于该项目的附加信息的 UIPopoverview。

最好的方法是什么？

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:52:42.443

嵌套在 imageView 中的按钮成功了！请参阅@HermannKlecker 以前的帖子

# sql - 获取每月第二个星期二的日期

> ID：15565151
> 
> 赞同：5
> 
> 时间：2013-03-22T07:38:35.533
> 
> 标签：sql, tsql

有没有办法使用 T-SQL 语法找出每月第二个星期二的日期？

例如，3 月是 12 日，4 月是 9 日。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T07:42:41.140

在不知道实际所需的输入和输出是什么的情况下，我现在只能给您一个用于将日期标识为该月的第二个星期二的谓词：

```
DATEPART(day,@Date) between 8 and 14 and --Find the second one in the month
DATEPART(weekday,@Date) = DATEPART(weekday,'20130319') --Make sure its a Tuesday 
```

（我使用固定的，已知的星期二，以避免[`DATEFIRST`](http://msdn.microsoft.com/en-gb/library/ms181598.aspx)在查询运行时必须知道哪些设置有效）

* * *

这会找到当月的适当星期二，但显然`@Date`可以设置为任何感兴趣的日期：

```
declare @Date datetime
set @Date =  CURRENT_TIMESTAMP

;with Numbers as (select n from (values (0),(1),(2),(3),(4),(5),(6)) t(n)),
PotentialDates as (select DATEADD(day,n,DATEADD(month,DATEDIFF(month,'20010101',@Date),'20010108')) as Date
from Numbers
)
select * from PotentialDates where DATEPART(weekday,Date) = DATEPART(weekday,'20130319') 
```

（而且，希望也很明显，查询可以是更大查询的一部分，`@Date`而不是列值，因此这可以构成整个工作的基于集合的方法的一部分）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T08:54:40.077

这就是您如何找到 2013 年所有“第二个星期二”的方法。

```
select 
dateadd(day, 8, datediff(day, 1, dateadd(month, n, '2013-01-07')) / 7 * 7) date
from 
(values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11)) t(n) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-17T06:37:14.157

此代码将在每月的第 1 和第 3 个星期日为您提供。

```
declare @dt datetime
select @dt = '12/01/2014'

select dateadd(mm,datediff(mm,'',@dt),'') - datepart(dw,dateadd(mm,datediff(mm,'',@dt),'')+0)+ 8
select dateadd(mm,datediff(mm,'',@dt),'') - datepart(dw,dateadd(mm,datediff(mm,'',@dt),'')+0)+ 22 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-04T18:00:18.927

从星期日开始的几个月内，以前的答案都不起作用（它指向第二个星期日）。

```
SELECT @dt AS input_date,

    DATEADD(mm, DATEDIFF(mm, 0, @dt), 0) --truncate date to month start

    -- DATEPART(@month_start) returns month start's weekday, with Sunday starting 1;
    -- Since Sunday starts at 1, we need to perform proper adjustment - move date 6 days forward (7 week days - 1 for sunday) forward and find its datepart, which will be 7
    -- Result: month starting sunday, datepart returns 7; month starting Mon we return 1 (datepart of Mon + 6 days = Sunday, which is 1), month starting tue, we return 2
    -- Effectivelly, datepart offset will always point last Sunday of previous month
    - DATEPART(dw, 
            6
            + DATEADD(mm,datediff(mm,0,@dt),0) --truncate date to month start
        ) 

    -- Since we found last Sunday of previous month, we need to add 7
    + 7 AS CORRECT,

    dateadd(mm,datediff(mm,'',@dt),'') - datepart(dw,dateadd(mm,datediff(mm,'',@dt),'')+0)+ 8 AS sometimes_correct 
```

显示相对于 Pravin Pandit 答案的正确答案的图像：

![1](../Images/3a6ae10435b534ec3e774338174353c9.png)

我们可以扩展查找本月第一个星期二的基本原理，并创建一个执行此操作的函数，因此对于任何输入日期，它都会找到该月的第一个星期二：

```
ALTER FUNCTION dbo.f_time_floor_1st_tue(@date DATETIME2(3))
RETURNS DATETIME
AS
BEGIN
    RETURN 

            DATEADD(mm, DATEDIFF(mm, 0, @date), 0) --truncate date to month start

        -- DATEPART(@month_start) returns month start's weekday, with Sunday starting 1;
        -- Since Sunday starts at 1, we need to perform proper adjustment - move date 6 days forward (7 week days - 1 for sunday) forward and find its datepart, which will be 7
        -- Result: month starting sunday, datepart returns 7; month starting Mon we return 1 (datepart of Mon + 6 days = Sunday, which is 1), month starting tue, we return 2
        -- Effectivelly, datepart offset will always point last Sunday of previous month
        -- Extending this logic for finding first Tuesday, Tuesday should always return 7 we need to move Tue datepart (3) by 4  ( which is 7 days in the week minus 3 
        - DATEPART(dw, 
                4 -- 4 is adjustment so that DATEPART returns 7 for all months starting Tue
                + DATEADD(mm,datediff(mm,0,@date),0) --truncate date to month start
            ) 

        -- Since we found last weekday of previous month, we need to add 7
        + 7

    ;
END;
GO 
```

# css - 在 Twitter Bootstrap Grid 系统中垂直居中内容

> ID：15565159
> 
> 赞同：1
> 
> 时间：2013-03-22T07:39:13.033
> 
> 标签：css, twitter-bootstrap, vertical-alignment

我找不到在 Twitter Bootstrap Grid 系统中垂直居中内容的方法。[http://twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

例如

```
<div class="row">
  <div class="span4" style="height:50px;min-height: 50px;">My centered object vertically</div>
</div> 
```

span4 div 中的对象将始终位于 div 的顶部。我试图穿上`vertical-align: middle;`父母和孩子的Div，但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:12:27.757

使用 line-height 或 padding ......

像这样的行高，

```
.line-height { line-height:30px; }

<div class="row">
  <div class="span4 line-height">My centered object vertically</div>
</div> 
```

像这样用于填充，对于 50px 高度减去填充意味着***paddingtop+height+paddingbottom = 50px***，

```
.padding { height:30px; padding:10px 0; }

<div class="row">
  <div class="span4 padding">My centered object vertically</div>
</div> 
```

# java - JPA + GAE -> 插入不立即更新数据存储

> ID：15565170
> 
> 赞同：1
> 
> 时间：2013-03-22T07:40:01.960
> 
> 标签：java, google-app-engine, jpa, google-cloud-datastore

我尝试使用：

```
Google App Engine
Data Store 
JPA 
Spring Framework 
```

我做了一个页面来列出客户。在该列表下方，我制作了一个表格来插入新客户。

```
Customer List 
<table>
    <c:forEach items="${listCustomer}" var="customer" varStatus="status">
        <tr>
            <td>${customer.id}</td>
            <td>${customer.name}</td>
            <td>${customer.desc}</td>

        </tr>
    </c:forEach>
</table>
New Customer    
<form:form action="add" commandName="customer"
    methodParam="POST">
    <form:input path="name"/>
    <form:input path="desc"/>
    <input type="submit" value="Add" />
</form:form> 
```

控制器 ：

```
@RequestMapping(value="/list", method = RequestMethod.GET)
public String list( ModelMap model) {
    List<Customer> list=CustomerDAO.INSTANCE.listCustomers();
    model.addAttribute("listCustomer",list);
    return "customer";

}

@RequestMapping(value="/add", method = RequestMethod.POST)
public String add( ModelMap model, Customer form) {
    CustomerDAO.INSTANCE.add(form.getName(),form.getDesc());
    List<Customer> list=CustomerDAO.INSTANCE.listCustomers();
    model.addAttribute("listCustomer",list);
    model.addAttribute("customer",new Customer());
    return "customer";
} 
```

客户DAO

```
public enum CustomerDAO {
INSTANCE;

  public List<Customer> listCustomers() {
    EntityManager em = EMFService.get().createEntityManager();
    // Read the existing entries
    Query q = em.createQuery("select c from Customer c");
    List<Customer> customers = q.getResultList();
    System.out.println("size : "+customers.size());
    return customers;
  }

  public void add( String name, String desc) {
    synchronized (this) {
      System.out.println("CUSTOMERDAO::add");   
      EntityManager em = EMFService.get().createEntityManager();
      Customer customer = new Customer();
      //customer.setId(new Key());
      customer.setName(name);
      customer.setDesc(desc);
      em.persist(customer);
      System.out.println("name "+ name +" desc "+desc+" created");
      em.close();
    }
  }
//another function
} 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">

<persistence-unit name="transactions-daniel">
    <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
    <properties>
        <property name="datanucleus.NontransactionalRead" value="true"/>
        <property name="datanucleus.NontransactionalWrite" value="true"/>
        <property name="datanucleus.ConnectionURL" value="appengine"/>
    </properties>
</persistence-unit> 
```

它实际上工作正常，但问题有时（间歇性）当我插入新客户时，它不会立即更新客户列表，我需要刷新页面以确保我的新记录是否成功插入。我检查了我的数据存储管理页面并在那里获得了我的新记录。

--更新我每次调用 listCustomers 时都会尝试打印大小，这证明它没有立即插入：

```
CUSTOMERDAO::add
name 4 desc 44 created
size : 4
CUSTOMERDAO::add
name 5 desc 5 created
size : 4
CUSTOMERDAO::add
name 6 desc 6 created
size : 6 
```

照顾名称 5 desc 5 创建后，列表大小仍为 4（应为 5 行）。当我插入另一行时，它再次正常工作（6行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:24:09.397

这是因为高复制数据存储的最终一致性。请阅读这篇文章： [https ://developers.google.com/appengine/docs/python/datastore/structuring_for_strong_consistency](https://developers.google.com/appengine/docs/python/datastore/structuring_for_strong_consistency)

解决方法是在 Customer 对象上有父键并使用该祖先键进行查询，或者传递新添加对象的信息并显示它。

# php - Symfony 1.4 表单使用 Propel Object ' ' 未找到

> ID：15565180
> 
> 赞同：0
> 
> 时间：2013-03-22T07:40:31.467
> 
> 标签：php, forms, widget, symfony-1.4, propel

从这个页面：

```
main_dev.php/player/new 
```

到（当我点击提交时）：

```
main_dev.php/player/edit/player_id/(no id) 
```

如果我在这里放一个 id 它显示得很好。

当我单击提交按钮（以某种方式保存）但显示以下内容时：

> 404 | 未找到 | sfError404Exception
> 
> 对象播放器不存在（）。

这是我的基本形式：

```
$this->setWidgets(array(
  'player_id'      => new sfWidgetFormInputHidden(), //primary key auto increment()
  'player_name'    => new sfWidgetFormInputText(),
  'player_gold'    => new sfWidgetFormInputText(),
  'chara_id'       => new sfWidgetFormInputText(),
  'open_social_id' => new sfWidgetFormInputText(), 
)); 
```

我怀疑这里的问题是 player_id 没有显示并且是自动递增的。这意味着当我提交表单时 player_id 留空，并且由于 symfony 无法找到从哪里获取 id 以显示记录的引用，它会变为 404，有什么解决方法吗？

我的 action.class 是默认的（我生成它时的实例）所以我认为这不是问题

这是保存表单的代码：

```
 protected function processForm(sfWebRequest $request, sfForm $form)
  {
    $form->bind($request->getParameter($form->getName()), $request->getFiles($form->getName()));
    if ($form->isValid())
    {
      $Player = $form->save();
      $this->redirect('player/edit?player_id='.$Player->getPlayerId());
    }
  } 
```

当然对于新的页面控制器：

```
public function executeNew(sfWebRequest $request)
{
    $this->form = new PlayerForm();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:26:08.867

如果 POST 请求保存了一个新的 Player 对象（在数据库中），则它不是您的 BasePlayerForm.class，也不是提交 url。

如果您的路由在手动输入时有效，而不是在操作类中调用时无效，那么您的 routing.yml 可能不是问题。

如果您没有覆盖`configure()`BasePlayerForm.class.php（在 PlayerForm.class.php 或其他任何地方），那么它不在您的 lib/form/ 类中。

要么这个答案没用（对不起），要么你实际上并不意味着该操作将对象“保存”到数据库中 - 在这种情况下，请检查来自 newSuccess 模板的提交 url/请求；还要验证您的路由：

您的 newSuccess.php 表单标记操作应该 POST 到 main_dev.php/player： `<form method="post" action="/main_dev.php/player">` [并将 html 中呈现的 id 传递为`<input type="hidden" name="player[player_id]" id="player_id" />`.] 最后，url 中的编辑路由通常会匹配`player/:player_id/edit`- 检查您是否真的有一个自动创建的“id " 除了“player_id”之外，您的架构/数据库中的列可能确实是造成这种情况的原因。

# iphone - NSFileManager：复制文件不成功

> ID：15565182
> 
> 赞同：0
> 
> 时间：2013-03-22T07:40:50.013
> 
> 标签：iphone, jailbreak, nsfilemanager

我想将位于`/Library`文件夹中的文件复制到`/User/Library/AddressBook/Sample/`，我使用了：

```
[[NSFileManager defaultManager] copyItemAtPath: @"/Library/MyFile.mp3" 
                                        toPath: @"/User/Library/AddressBook/Sample/MyFile.mp3" 
                                         error: &error]; 
```

但是我遇到了一个错误，提示“无法完成操作。没有这样的文件或

目录`

**我正在使用越狱的 iPhone。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:15:57.230

目录：

```
/User/Library/AddressBook/Sample/ 
```

手机上一般不存在。`Sample`在尝试将 mp3 文件复制到其中之前，您是否添加了子目录？

使用这些`NSFileManager`方法，我还建议使用错误对象来帮助您调试：

```
NSError* error;
[[NSFileManager defaultManager] copyItemAtPath:@"/Library//MyFile.mp3" toPath: @"/User/Library/AddressBook/Sample/MyFile.mp3" error:&error];

if (error != nil) {
    NSLog(@"Error message is %@", [error localizedDescription]);
} 
```

此外，您的拼写似乎有错误`copyItemAtPath`，但可能只是在您的**问题**中，而不是在您的**代码**中？无论如何，请仔细检查。

而且，您的路径中也有一个双斜杠 ( `//`)，但我认为这不会伤害您。把它拿出来，打字时要小心:)

## 更新

如果您只是正常运行此应用程序*，*但在越狱手机上，您的应用程序将无法访问这些目录。在越狱手机上正常安装的应用程序仍然是*沙盒*。越狱不会删除手机上的所有规则。如果您将应用程序安装在 中`/Applications`，就像真正的越狱应用程序一样，那么该代码应该适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:50:46.057

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *libraryDirectory = [paths objectAtIndex:0];
NSLog(@"%@",libraryDirectory); // Library path
NSString *AddressBookPath = [libraryDirectory stringByAppendingPathComponent:@"AddressBook"];

if (![[NSFileManager defaultManager] fileExistsAtPath:AddressBookPath])
{        
    NSError* error;
    // Create "AddressBook Dir"
    if([[NSFileManager defaultManager] createDirectoryAtPath:AddressBookPath withIntermediateDirectories:NO attributes:nil error:&error])
    {
        // Create "Sample Dir"
        NSString *samplePath = [AddressBookPath stringByAppendingPathComponent:@"Sample"];
        if (![[NSFileManager defaultManager] fileExistsAtPath:AddressBookPath])
        {                
            NSError* error;
            if([[NSFileManager defaultManager] createDirectoryAtPath:AddressBookPath withIntermediateDirectories:NO attributes:nil error:&error])
            {
                // Copy Files Now
                NSError* error;
                NSString *fromPath = [libraryDirectory stringByAppendingPathComponent:@"MyFile.mp3"];
                NSString *toPath = [samplePath stringByAppendingPathComponent:@"MyFile.mp3"];
                [[NSFileManager defaultManager] copyItemAtPath:fromPath toPath:toPath error:&error];

                if (error != nil)
                {
                    NSLog(@"Error message is %@", [error localizedDescription]);
                }
            }
        }
    }
    else
    {
        NSLog(@"[%@] ERROR: attempting to write create MyFolder directory", [self class]);
        NSAssert( FALSE, @"Failed to create directory maybe out of disk space?");
    }
} 
```

# javascript - 在java脚本的下拉列表中获取所选项目的文本

> ID：15565185
> 
> 赞同：3
> 
> 时间：2013-03-22T07:41:02.917
> 
> 标签：javascript, asp.net

我想在下拉列表中获取所选项目的文本。我尝试了以下代码

```
var e = document.getElementById("ddlTime.ClientID");  
var selectedTime = e.options[e.selectedIndex].text; 
```

但它给了我“无法获取属性'选项'的值：对象为空或未定义”

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:09:57.713

你应该做：

```
var e = document.getElementById("<%= ddlTime.ClientID%>"); 
```

不是：

```
var e = document.getElementById("ddlTime.ClientID"); 
```

我的小样本[jsfiddle](http://jsfiddle.net/aHxdS/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T07:42:47.987

您必须指定`<%= %>`

```
var e = document.getElementById("<%= ddlTime.ClientID%>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T05:35:20.983

JavaScript

```
 function WeekChange() {
        var Week = window.document.getElementById("ddWeek").value;
        if (Week != "--Select--") {
            window.document.getElementById("txtDetect").value = "Every " + Week;
        }
        else {
            window.document.getElementById("txtDetect").value = " ";
        }
    }

<asp:DropDownList ID="ddWeek" runat="server" onchange="javascript:WeekChange();"> 
```

# javascript - 从 Google Direction Service 清除标记

> ID：15565186
> 
> 赞同：0
> 
> 时间：2013-03-22T07:41:09.330
> 
> 标签：javascript, google-maps, google-maps-markers

我正在使用 Google Direction Service 检索路线的 lat+lng，然后将 latlon 传递给 php 文件并通过 xml 文件返回标记。

这一切都很好，除了我在请求新路线时无法清除旧标记。下面的代码显示了我如何使用 jQuery 从 xml 文件中获取标记。下面的代码显示了我试图用来清除路线（有效）和旧标记（无效！）

非常感谢您的帮助。

```
//RETURN DATA FOR PLACE MARKERS
jQuery.get("MYXMLFILE", function(data) {
    jQuery(data).find("marker").each(function() {
        var eachMarker = jQuery(this);
        var markerCoords = new google.maps.LatLng(
            parseFloat(eachMarker.find("Lat").text()),
            parseFloat(eachMarker.find("Lng").text())
        );
        var header  = eachMarker.find("title").text();
        var content = eachMarker.find("Content").text();
        var wxicon  = eachMarker.find("icon").text();
        //---------------------------------------------
        var marker = new google.maps.Marker({
            position: markerCoords,
            map: map,
            icon: wxicon,
            animation: google.maps.Animation.DROP,
            title: header,
        });
        gmarkers.push(marker); // store the reference
    });
});

//CLEAR OLD ROUTE + CLEAR MARKERS

function deleteOverlays() {
    directionsDisplay.setDirections({routes: []});
    gmarker.setMap(null);
    gmarkers = [];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:52:18.330

```
var markersArray = []; 
```

每次创建标记时将其添加到`markerArray`

```
for (i = 0; i < locations.length; i++) {

   marker[i] = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            icon: icoImg,
            map: map,
            shadow: flagIcon_shadow,
            title: locations[i][0]
    });
    markersArray.push(marker[i]);
} 
```

调用 deleteOverlays() 从地图中删除所有制造商后。

```
 // Deletes all markers in the array by removing references to them
   function deleteOverlays() {
       if (markersArray) {
           for (i in markersArray) {
              markersArray[i].setMap(null);
           }
           markersArray.length = 0;
        }
    } 
```

在你的情况下使用这个

```
function deleteOverlays() {
   if (gmarkers) {
           for (i in gmarkers) {
               gmarkers[i].setMap(null);
           }
       gmarkers.length = 0;
   }
} 
```

# php - 执行简单的 PHP 循环程序时出现 500 内部服务器错误？

> ID：15565187
> 
> 赞同：0
> 
> 时间：2013-03-22T07:41:21.153
> 
> 标签：php, loops, while-loop

```
<?php
set_time_limit(600);
while (1){
usleep(30000000);
}
?> 
```

上面的 php 程序导致 500 内部服务器错误。问题是，我将时间限制设置为 600 -> 10 分钟。我预计它将运行 10 分钟，每次运行 30 秒，它将运行一个 while 循环 1 次，并将活动保持在 10 分钟。但是，它在 2 分钟内返回 500 内部服务器错误。根本原因是什么/如何解决问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:40:11.857

我在我自己的基于 Linux 的网络服务器上编写了您的代码。我使用 Linux 服务器而不是 IIS 只是因为我认为它会给我更多的调试信息。你的代码对我来说工作得很好。它不会超时。然后我不得不说 IIS 有一些特定的东西。我会检查事件日志。500 错误应该有一些有趣的东西。要访问事件日志 ( [http://msdn.microsoft.com/en-us/library/ms524984(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524984(v=vs.90).aspx) )：

*   从“开始”菜单中，单击“运行”。在打开框中，键入`eventvwr`。单击确定。
*   事件查看器列在系统工具节点下。

我建议，如果你需要这个程序等待 10 分钟，要么进入你的 PHP.ini 文件（如果这是问题所在），然后将 max_execution_time 提高很多，或者作为替代方案，让页面等待 10 秒然后然后重新加载相同的页面`header()`。这种方法的优点是您不会通过旋转和锁定所有内容来杀死额外的 CPU 周期。相反，您只是重新查询您的服务器并使用持久性 cookie：

```
<?php
echo "Time Slept: ".$_COOKIE['total_time_slept']; //persistent variable you can use to measure how much time has elapsed
if($_COOKIE['total_time_slept'] < 1000) //if less than 10 minutes
{     
    $page = $_SERVER['PHP_SELF'];
    $sec = 10;        
    setcookie('total_time_slept', $_COOKIE['total_time_slept']+$sec); //append that time to the counter
    header("Refresh: $sec; url=$page"); //reload this page every 10 seconds
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T09:49:32.027

我在 PHP 在**安全模式下**运行的 LAMP 安装中遇到了类似的**usleep**问题。

 **所以我的建议是检查你的 PHP 是否在**safe-mode**上运行。如果是这种情况，请尝试使用**sleep**功能（尽管如果您想循环每个 0.001 秒，这将无济于事）。

另请注意，在 PHP 5 之前， **usleep**无法在 PHP Windows 平台上运行。

我知道这个线程很旧，但我希望这个检查能帮助其他人。**

# linux - 如何使用bash脚本检查“{”是否在java文件的单独行中开始

> ID：15565188
> 
> 赞同：1
> 
> 时间：2013-03-22T07:41:21.580
> 
> 标签：linux, bash, shell

我在一个目录中有一组`.java`文件。现在我想检查`{`（左大括号）是否开始新行。

例如，

```
class Name{
  public static void main(String args[])
  {
    System.out.println("Hello");
  }
} 
```

脚本必须检查有多少`{`开始新行，有多少不是，并进行计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:08:11.560

用于`grep -c '^\s*{' <filename>`获取在其行中前面没有任何其他内容的左大括号“{”的数量。然而，这也会计算一些文本跟在大括号后面的行。因此，您可能想要使用`grep -c '^\s*{\s*$'`，它计算仅包含大括号（由任意空格包围）的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:44:50.747

> 我想检查“{”（括号）是否从单独的行开始。

目前尚不清楚您的意思，但如果您只是想知道“{”字符是否出现在一行的第一个位置，那么 grep 或 egrep 中的“^”匹配“以”开头。所以 grep ^{ *.java 会找到这些行。如果这不是您的意思，请将您的问题文本更改为具体。

# c# - Pinvoke 命令长度不正确

> ID：15565191
> 
> 赞同：0
> 
> 时间：2013-03-22T07:41:29.280
> 
> 标签：c#, c++, pinvoke

我正在尝试使用该函数获取**FILE_ID_BOTH_DIR_INFO 。**`GetFileInformationByHandle`调用后我的所有值都设置为零。
我收到 win32 错误消息：
**ERROR_BAD_LENGTH 程序发出命令但命令长度不正确。**

```
IntPtr handle = CreateFile(dir, EFileAccess.GenericRead, EFileShare.Read, IntPtr.Zero, ECreationDisposition.OpenExisting, EFileAttributes.BackupSemantics | EFileAttributes.Normal, IntPtr.Zero);
FILE_ID_BOTH_DIR_INFO fileStruct = new FILE_ID_BOTH_DIR_INFO();
GetFileInformationByHandleEx(handle, FILE_INFO_BY_HANDLE_CLASS.FileIdBothDirectoryInfo, out fileStruct, (uint)Marshal.SizeOf(fileStruct)); 
```

FILE_ID_BOTH_DIR_INFO 结构

```
 typedef struct _FILE_ID_BOTH_DIR_INFO {
    DWORD         NextEntryOffset;
    DWORD         FileIndex;
    LARGE_INTEGER CreationTime;
    LARGE_INTEGER LastAccessTime;
    LARGE_INTEGER LastWriteTime;
    LARGE_INTEGER ChangeTime;
    LARGE_INTEGER EndOfFile;
    LARGE_INTEGER AllocationSize;
    DWORD         FileAttributes;
    DWORD         FileNameLength;
    DWORD         EaSize;
    CCHAR         ShortNameLength;
    WCHAR         ShortName[12];
    LARGE_INTEGER FileId;
    WCHAR         FileName[1];
    } FILE_ID_BOTH_DIR_INFO, *PFILE_ID_BOTH_DIR_INFO 
```

在 C# 中

```
 public struct FILE_ID_BOTH_DIR_INFO
    {
        uint NextEntryOffset;
        uint FileIndex;
        LARGE_INTEGER CreationTime;
        LARGE_INTEGER LastAccessTime;
        LARGE_INTEGER LastWriteTime;
        LARGE_INTEGER ChangeTime;
        LARGE_INTEGER EndOfFile;
        LARGE_INTEGER AllocationSize;
        uint FileAttributes;
        uint FileNameLength;
        uint EaSize;
        char ShortNameLength;
        [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst = 12)]
        string ShortName;
        LARGE_INTEGER FileId;
        [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst = 1)]
        string FileName;
    }

    [StructLayout(LayoutKind.Explicit, Size = 8)]
    struct LARGE_INTEGER
    {
        [FieldOffset(0)]
        public Int64 QuadPart;
        [FieldOffset(0)]
        public UInt32 LowPart;
        [FieldOffset(4)]
        public Int32 HighPart;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T07:57:25.943

ByValTStr 的字符集由 StructLayout 属性的 CharSet 参数确定。由于您没有指定，因此使用默认的 8 位 ANSI。如果您将 CharSet 指定为 CharSet.Unicode 那么应该可以解决问题。将此属性添加到您的结构中：

```
[StructLayout(LayoutKind.Sequential, 
    CharSet=CharSet.Unicode)] 
```

为了调试的目的，编写一个输出结构大小的 C++ 程序。确保您的 C# 程序与该值匹配。

# android - 如何在 Android 中以编程方式启用动画

> ID：15565195
> 
> 赞同：1
> 
> 时间：2013-03-22T07:41:48.303
> 
> 标签：android

当我过去`overridePendingTransition`从一个活动转换到另一个活动时，它在`AllAnimations`启用时工作正常`DisplaySettings`。`AllAnimations`但是这个动画在禁用时不起作用。如何`AllAnimations`启用`DisplaySettings`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:44:33.090

你不能，但你可以简单地提示人们启动设置应用程序，以便他们可以更改它。

我认为人们不会真的希望您的应用程序告诉他们他们自己选择的设置。把动画留给那些真正想要它们的人，不要打扰那些不想要的人。

# c# - 如何从对象拆箱到它包含的类型，在编译时不知道该类型？

> ID：15565196
> 
> 赞同：29
> 
> 时间：2013-03-22T07:41:49.017
> 
> 标签：c#, unboxing

在运行时，我得到某种类型的盒装实例。如何将其拆箱为基础类型？

```
Object obj;
String variable = "Some text";

obj = variable // boxing;

// explicit unboxing, because we know the type of variable at compile time.

var x = (String)obj     

// Now let's pretend that we don't know the type of underlying object at compile time. 

Type desiredType = obj.GetType(); // But we can figure out.

//And now the question. 
//How to express something like this:

var y = (desiredType)obj; //Need to get unboxed instance of initial variable here; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-22T07:47:58.987

If you don't know the type *at compile time*, then you can't unbox because you have **nowhere to put it** - all you can do is store it in an `object`, which is: boxed.

The same also applies to reference-types like `string`: you can't cast it to the right type if you don't know the type at compile time: you have *nowhere to put it*.

You *can* special-case a few types, for example:

```
if(obj is int) {
    int i = (int)obj;
    ...
} ... 
```

Another trick that is *sometimes* (not often) helpful is to switch into *generics*; then instead of talking in terms of `object` you are talking in terms of `T`. This has... limited use though. The easiest way to do that is via *dynamic*, for example:

```
dynamic obj = ...
Foo(obj);
...
Foo<T>(T val) { ... code with T ... } 
```

you can also add special cases to that appreach:

```
Foo(string val) { ... code with string ...}
Foo(int val) { ... code with int ...} 
```

However, frankly I suggest it may be better to look hard at what you are trying to do.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-22T07:45:30.787

现在让我们假设，真正的拳击发生了：

```
int v = 5;

object o = v; //boxed 

Type type = o.GetType(); //will return typeof(int)

int convertedBack = (int)Convert.ChangeType(o, type);

Console.WriteLine (convertedBack); //prints 5 
```

备注，如果你替换：

```
object convertedBack = Convert.ChangeType(o, type);

Console.WriteLine (convertedBack); //it still prints 5
Console.WriteLine (o); //it even print 5 here 
```

原因是底层对象仍然是`int`. 我刚刚用这个例子向你展示了，拳击在这里是无关紧要的。你需要在你的操作中依赖一些抽象，如果你想`int`动态转换，你想使用什么引用类型。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-22T08:31:19.313

在这种情况下，我将使用以下策略模式`Dictionary<Type, Action<object>>`：

```
internal class Program
{
    private static void Main(string[] args)
    {
        var something = new Something();

        something.ComputeValue(13);
        something.ComputeValue(DateTime.Now);
        something.ComputeValue(DayOfWeek.Monday);

        Console.ReadKey();
    }
}

internal class Something
{
    private static Dictionary<Type, Action<object>> _Strategies;

    static Something()
    {
        // Prepare all available strategies.
        _Strategies = new Dictionary<Type, Action<object>>();
        _Strategies.Add(typeof(int), ComputeInteger);
        _Strategies.Add(typeof(DateTime), ComputeDateTime);
    }

    public void ComputeValue(object value)
    {
        Action<object> action;

        // Check if we have a matching strategy.
        if (!_Strategies.TryGetValue(value.GetType(), out action))
        {
            // If not, log error, throw exception, whatever.
            action = LogUnknownType;
        }

        // Perform the matching strategy on the given value.
        action(value);
    }

    private static void ComputeDateTime(object source)
    {
        // We get an object, but we are sure that it will always be an DateTime.
        var value = (DateTime)source;
        Console.WriteLine("We've got an date time: " + value);
    }

    private static void ComputeInteger(object source)
    {
        // We get an object, but we are sure that it will always be an int.
        var value = (int)source;
        Console.WriteLine("We've got an integer: " + value);
    }

    private static void LogUnknownType(object source)
    {
        // What should we do with the drunken sailor?
        var unknownType = source.GetType();
        Console.WriteLine("Don't know how to handle " + unknownType.FullName);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-16T15:36:18.970

以下是您为什么要这样做的一个示例：

```
class MyClass
{
   public int Id {get;set;}
   public string Name {get;set;}
   public decimal Val {get;set;}
}
int i = 0;
var myClassImp = new MyClass();
foreach (var val in new [object]{"10", "My name", "100.21"} // Could be read from some data source, such as an excel spreadsheet
{
   var prop = typeof(MyClass).GetProperties().ElementAt(i++);
   // !!!!!! THROWS EXCEPTION  !!!!!!!
   prop.SetValue(myClassImp, System.Convert.ChangeType(val, prop.PropertyType), null);
} 
```

这样做的原因是因为该值是一个装箱的对象......在运行时你不知道类型，所以你必须取消装箱到 prop.PropertyType

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-08T08:18:08.000

使用表达式：

var y = DynamicCast(obj, desiredType);

```
static object DynamicCast(object source, Type type)
{
    var parameter = Expression.Parameter(typeof(object), "input");

    var cast = Expression.TypeAs(Expression.Convert(parameter, type), typeof(object));

    var lambda = Expression.Lambda<Func<object, object>>(cast, parameter);

    var func = lambda.Compile();

    return func(source);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-22T10:53:07.807

务实的解决方案；尝试直接使用 TypeConverter，如果失败，则转换为字符串并再次返回：-

```
private static T GetValueOfType<T>(this ManagementBaseObject MBO, String FieldName) {
    T lResult;

    try {
        Object lObj = MBO[FieldName];

        var lSrcType = lObj.GetType();
        var lDestType = typeof(T);

        if (lDestType.IsValueType && lDestType.IsAssignableFrom(lSrcType)) {
            lResult = (T)lObj;
            return lResult;
        }

        var lDestTC = TypeDescriptor.GetConverter(typeof(T));
        if (lDestTC.CanConvertFrom(lSrcType)) {
            lResult = (T)lDestTC.ConvertFrom(lObj);
        } else {
            var lSrcTC = TypeDescriptor.GetConverter(lSrcType);
            String lTmp = lSrcTC.ConvertToInvariantString(lObj);
            lResult = (T)lDestTC.ConvertFromInvariantString(lTmp);
        }
    } catch {
        lResult = default(T);
    }
    return lResult;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-24T07:45:26.340

```
public static string GetType(object data)
{
    Type type = data.GetType();
    return Convert.ChangeType(data, type).GetType().Name;
} 
```

您好，此方法接收对象数据并返回对象的字符串类型名称。希望这是你需要的。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-22T08:01:11.470

您可以尝试使用动态运行时

```
 [Test]
    public void Test_UnboxingAtRuntime()
    {
        object boxed = "Hello";

        //this line is commented out as it does not compile
        // OverloadedMethod(boxed);

        var result = CallCorrectMethod(boxed);
        Assert.That(result, Is.EqualTo("string"));

        boxed = 1;
        result = CallCorrectMethod(boxed);
        Assert.That(result, Is.EqualTo("int"));
    }

    public string CallCorrectMethod(dynamic t)
    {
        return OverloadedMethod(t);
    }

    public string OverloadedMethod(string s)
    {
        return "string";
    }

    public string OverloadedMethod(int s)
    {
        return "int";
    } 
```

# vb6 - 编译错误“预期：vb6 中的语句结束”

> ID：15565202
> 
> 赞同：1
> 
> 时间：2013-03-22T07:42:02.047
> 
> 标签：vb6

当我定义一个初始化变量时，我得到编译时错误为“预期：语句结束”。代码是：

```
Dim i as integer=1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T13:55:28.610

VB6 编译器不允许您在一行中声明和初始化变量（就像在 VB.NET 中一样）。

所以你必须在一行上声明它并在另一行上初始化它：

```
Dim i As Integer
i = 1 
```

如果你想让这两个语句在同一行，你可以使用冒号：

```
Dim i As Integer : i = 1 
```

但是您只能在过程中执行此操作，而不能在模块、表单或类声明中执行此操作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T07:47:41.520

```
dim i as integer
i=1 
```

You need to split declaring a variable and assigning its value.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T14:09:19.850

您不能为您在 VB6 中声明的变量赋值，除非它是一个常量

```
' BAD
Dim i as Integer = 1

' GOOD
Dim i As Integer
Const i As Integer = 1 
```

# ajax - Jquery 中的 Ajax.updater 等价物是什么？

> ID：15565203
> 
> 赞同：10
> 
> 时间：2013-03-22T07:42:04.080
> 
> 标签：ajax, ruby-on-rails-3, jquery

请让我知道 Jquery 中以下原型代码的等价物。

```
var myAjax = new Ajax.Updater('abc', '/billing/add_bill_detail', {
      method: 'get',
      parameters: pars,
      insertion: Insertion.Bottom
}); 
```

我想使用 Jquery 执行相同的操作。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T07:46:38.370

在 jQuery 中，Ajax 将使用如下：

```
$.ajax({
   url: "/billing/add_bill_detail",
   type: "get",
   dataType: "html",
   data: {"pars" : "abc"},
   success: function(returnData){
     $("#abc").html(returnData);
   },
   error: function(e){
     alert(e);
   }
}); 
```

如果 abc 是 div 的 id，则使用 #abc；如果 abc 是类，则使用 .abc。

您可以将 returnData 放在您的 HTML 中您想要的位置，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T08:13:25.013

除了这个之外，还有一些使用 ajax 的方法`jQuery.ajax({...}) or $.ajax({...})`，还有一些简化版本，比如：

1.  `$.get()`或者`jQuery.get()`
2.  `$.post()`或者`jQuery.post()`
3.  `$.getJSON()`或者`jQuery.getJSON()`
4.  `$.getScript()`或者`jQuery.getScript()`

`$ = jQuery`两者都是一样的。

当您使用`method : 'get',`时，我建议您使用`$.ajax({...})`或`$.get()`但记得在此脚本上方包含 jQuery，否则 ajax 函数将无法工作**尝试将脚本包含在`$(function(){})`doc 就绪处理程序**中。

*`'abc'`如果你能解释一下*

尝试添加这个`$.ajax()`：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
   $(function(){
      $.ajax({
        type: "GET",
        url: "/billing/add_bill_detail",
        data: pars,
        dataType: 'html'
        success: function(data){
           $('#abc').html(data); //<---this replaces content.
        },
        error: function(err){
           console.log(err);
        }
      });
   });
</script> 
```

或与`$.get()`：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
   $(function(){
      $.get("/billing/add_bill_detail", {data: pars}, function(data) {
          $('#abc').html(data); //<---this replaces content.
      }, "html");
   });
</script> 
```

或更简单地使用以下`.load()`方法：

```
$('#abc').load('/billing/add_bill_detail'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T08:03:15.857

您可以使用 .load() 方法

> 从服务器加载数据并将返回的 HTML 放入匹配的元素中。

阅读文档：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T08:33:14.820

```
 $(function(){
      $.ajax({
        type: "GET",
        url: "abc/billing/add_bill_detail",
        data: data,
        success: function(data){
            alert(data);
        }

      });

   }); 
```

# ember.js - 有条件地防止在转换回路线时重新加载控制器模式

> ID：15565204
> 
> 赞同：3
> 
> 时间：2013-03-22T07:42:10.923
> 
> 标签：ember.js

假设我有一个帖子和评论路线。我想从帖子中添加评论，然后导航回帖子。如果我使用默认行为，当导航回帖子时，帖子将重新加载模型并覆盖更改。

我想出的最好的方法是在控制器中添加路由器可以评估的属性：

```
model:function(params){
    var c = this.controllerFor("post");     
    if (this.controller && this.controller.get("noReload"))
        return;

    Ember.run.next(function(){
        c.set("title","Hello");
    });
} 
```

但这感觉不对。实现这种行为的最佳/余烬方式是什么？

小提琴：http: [//jsfiddle.net/AyKarsi/KVh3M/3/](http://jsfiddle.net/AyKarsi/KVh3M/3/)

# windows - 无法将 FOR 循环的输出分配给批处理文件中的另一个变量

> ID：15565210
> 
> 赞同：1
> 
> 时间：2013-03-22T07:42:33.160
> 
> 标签：windows, for-loop, batch-file

我曾经`FOR /F`在批处理文件中访问文件“last_bkp_date.txt”中的值。

的结果`%%a`还可以，但我无法为`v_abc`.

我`set v_abc =`在循环之前使用过`for`特别删除/删除对该变量所做的任何过去分配。

有人可以帮我吗？

```
@SETLOCAL EnableDelayedExpansion
@echo off

set v_abc =

FOR  /F "tokens=1 usebackq" %%a IN (last_bkp_date.txt) DO (  
  set v_abc =%%a
  echo value of a: %%a
  echo value of abc: !v_abc!
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T07:50:08.493

语法是`SET variable=value`. 您的问题是变量名称和`=`符号之间的空格。

试试这个

```
set v_abc=%%a 
```

瞧！

原因是在 Windows 环境变量名称中可以包含空格。但不建议这样做，因此作为您问题的替代解决方案，您可以通过这种方式访问​​包括空格在内的变量

```
echo value of abc: !v_abc ! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T07:52:15.400

在变量名 ( `set v_abc =%%a`) 后添加空格的简单新手错误。

您可以通过以下任一方式修复它

1.  更改`set v_abc =%%a`为`set v_abc=%%a`

    **或者**

2.  更改`echo Value of abc: !v_abc!`为`echo Value of abc: !v_abc !`.

简单的。

# gem - 安装/构建 Caldecott 时出错

> ID：15565216
> 
> 赞同：0
> 
> 时间：2013-03-22T07:42:56.300
> 
> 标签：gem, appfog, vmc

我的环境：

*   视窗 8 x64
*   Ruby安装程序：
*   红宝石 1.9.3-p392
*   DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe

（注意：之前尝试过 Ruby 2.0 和相关的开发工具包并得到编译错误。然后看到 1.9.2 req 并单独安装，注意不要混合它们。）

脚步：

1.  更新了 PATH，按照说明安装了 DevKit。
2.  宝石更新--系统
3.  gem install af（使用 CloudFoundry 合作伙伴 AppFog）

然后，从[gem 指令](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)中，我运行：

宝石安装 caldecott --no-rdoc --no-ri

```
ERROR:  While executing gem ... (NoMethodError)
    undefined method `size' for nil:NilClass 
```

知道我为什么会这样吗？作为后续，我遵循了[DevKit 说明](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)中的测试程序：

*   宝石安装 json --platform=ruby
*   ruby -rubygems -e "需要 'json';puts JSON.load('[42]').inspect"

结果如预期一样，所以这似乎只适用于凯迪克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:02:18.483

好吧，我有同样的经历，我试图通过删除 C:\Ruby200\lib\ruby\gems\2.0.0\cache 中的所有文件来清理我的 geb 缓存，它可以工作^^

# java - 即使文件扩展名已更改，如何识别文件类型？

> ID：15565221
> 
> 赞同：2
> 
> 时间：2013-03-22T03:09:59.387
> 
> 标签：java, filesystems, file-extension, magic-numbers

文件按文件扩展名分类。所以我的问题是，即使文件扩展名已更改，如何识别文件类型。

例如，我有一个名为 的视频文件`myVideo.mp4`，我已将其更改为`myVideo.txt`. 因此，如果我双击它，首选文本编辑器将打开文件，而不会打开确切的内容。但是，如果我`myVideo.txt`在视频播放器中播放，视频将毫无问题地播放。

我只是想开发一个应用程序来确定文件的类型，而不检查文件扩展名并建议打开文件的软件。我想用Java开发应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:03:38.380

执行此操作的最佳库之一是[Apache Tika](https://tika.apache.org/)。它不仅可以读取文件的标题，还可以执行内容分析以检测文件类型。使用 Tika 非常简单，下面是一个检测文件类型的示例：

```
import java.net.URL;
import org.apache.tika.Tika; //Including Tika

public class TestTika {

    public static void main(String[] args) {
        Tika tika = new Tika();
        String fileType = tika.detect(new URL("http://example.com/someFile.jpg"));
        System.out.println(fileType);
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T11:09:33.017

结构、幻数、元数据、字符串和正则表达式、启发式和统计分析......该工具将与它背后的规则数据库一样好。

尝试使用 DROID（**[数字记录对象识别工具](http://www.nationalarchives.gov.uk/information-management/projects-and-work/droid.htm "Nat'l Archives InfoMgmt 项目 DROID")**）来识别文件类型；Java，Net BSD 许可。它是英国国家档案馆的一个免费项目，与 Android 无关。源代码在 Github 和 Sourceforge 上可用。**[DROID 文档](http://www.nationalarchives.gov.uk/information-management/our-services/dc-file-profiling-tool.htm "数字格式分析工具")**很好。

另请参见**[Darwinsys 文件](http://darwinsys.com/file/)**和**[libmagic](http://sourceforge.net/projects/libmagic/ "Sourceforge libmagic")**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T03:50:11.930

有一个名为[TrID](http://mark0.net/soft-trid-e.html)的工具可以满足您的需求 - 它目前支持 5033 种不同的文件类型 - 并且可以[训练](http://mark0.net/soft-tridscan-e.html)添加新类型。在 *nix 系统上，也有[`file`](http://en.wikipedia.org/wiki/File_%28command%29)类似的命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T07:50:34.760

好吧，这就像拥有一个您想要阅读的文件格式数据库，而无需在您的应用程序中查找扩展名。就像 Linux 一样。所以每当你打开一个文件时，你需要检查它属于哪个类型的文件格式数据库。虽然不确定它如何适用于不同的文件类型，但大多数文件都有固定的标题格式，无论是 zip、pdf、mpg、avi、png 等。所以这种方法应该有效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T08:20:09.867

您可以尝试[MimeUtil2](http://sourceforge.net/projects/mime-util/)，但它已经很老了，虽然不是 up2date。最好的方法仍然是文件扩展名。

但亚当的解决方案并没有你想象的那么糟糕。您可以使用围绕命令行调用的包装器构建独立于平台的解决方案。我认为使用这种方法你会得到更好的结果。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-03-22T08:32:46.530

以下代码片段检索有关文件类型的信息

```
final File file = new File("file.txt");
System.out.println("File type is: " + new MimetypesFileTypeMap().getContentType(file)); 
```

希望它可以帮助你

# ssl - jBoss AS 7 上的基于 SSL 的 JMS

> ID：15565226
> 
> 赞同：1
> 
> 时间：2013-03-22T07:43:41.203
> 
> 标签：ssl, jboss, jms, netty, jboss-eap-6

我试图让我的 jms 客户端通过 ssl 工作，但是在配置 jboss 之后我有一个异常

> log4j:WARN 找不到记录器 (org.jboss.logging) 的附加程序。log4j:WARN 请正确初始化 log4j 系统。log4j:WARN 见 [http://logging.apache.org/log4j/1.2/faq.html#noconfig](http://logging.apache.org/log4j/1.2/faq.html#noconfig)了解更多信息。2013 年 3 月 21 日下午 4:20:26 cz.bleble.DummyJMS 主要信息：尝试获取连接工厂“jms/RemoteConnectionFactory” 2013 年 3 月 21 日下午 4:20:27 cz.bleble.DummyJMS 主要信息：找到连接工厂“ JNDI 中的 jms/RemoteConnectionFactory” 2013 年 3 月 21 日下午 4:20:27 cz.bleble.DummyJMS 主要信息：尝试获取目标“jms/queue/Online” 2013 年 3 月 21 日下午 4:20:27 cz.bleble.DummyJMS主要信息：在 JNDI 中找到目标“jms/queue/Online” 2013 年 3 月 21 日下午 4:20:27 cz.bleble.DummyJMS 主要严重：无法创建会话工厂 15:20:27,908 信息 [org.jboss.as.命名]（远程处理“esekilx5066”任务 3）JBAS011806：收到通道结束通知，关闭远程连接 5c0673b4 到 /192.168.4.25 的通道通道 ID 12d4350a（入站）：63316 线程“主”javax.jms.JMSException 中的异常：无法在 org.hornetq.jms.client.HornetQConnectionFactory.createConnection（ HornetQConnectionFactory.java:119) 在 cz.bleble.DummyJMS.main(DummyJMS.java:94) 原因：HornetQException[errorCode=2 message=无法连接到服务器。尝试使用所有可用的服务器。] 在 org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:775) 在 org.hornetq.jms.client.HornetQConnectionFactory.createConnectionInternal(HornetQConnectionFactory.java:601) ...还有 2 个 无法在 cz.bleble.DummyJMS 的 org.hornetq.jms.client.HornetQConnectionFactory.createConnection(HornetQConnectionFactory.java:119) 的 org.hornetq.jms.client.HornetQConnectionFactory.createConnectionInternal(HornetQConnectionFactory.java:605) 创建会话工厂。 main(DummyJMS.java:94) 原因：HornetQException[errorCode=2 message=无法连接到服务器。尝试使用所有可用的服务器。] 在 org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:775) 在 org.hornetq.jms.client.HornetQConnectionFactory.createConnectionInternal(HornetQConnectionFactory.java:601) ...还有 2 个 无法在 cz.bleble.DummyJMS 的 org.hornetq.jms.client.HornetQConnectionFactory.createConnection(HornetQConnectionFactory.java:119) 的 org.hornetq.jms.client.HornetQConnectionFactory.createConnectionInternal(HornetQConnectionFactory.java:605) 创建会话工厂。 main(DummyJMS.java:94) 原因：HornetQException[errorCode=2 message=无法连接到服务器。尝试使用所有可用的服务器。] 在 org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:775) 在 org.hornetq.jms.client.HornetQConnectionFactory.createConnectionInternal(HornetQConnectionFactory.java:601) ...还有 2 个 createConnection(HornetQConnectionFactory.java:119) at cz.bleble.DummyJMS.main(DummyJMS.java:94) 原因：HornetQException[errorCode=2 message=无法连接到服务器。尝试使用所有可用的服务器。] 在 org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:775) 在 org.hornetq.jms.client.HornetQConnectionFactory.createConnectionInternal(HornetQConnectionFactory.java:601) ...还有 2 个 createConnection(HornetQConnectionFactory.java:119) at cz.bleble.DummyJMS.main(DummyJMS.java:94) 原因：HornetQException[errorCode=2 message=无法连接到服务器。尝试使用所有可用的服务器。] 在 org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:775) 在 org.hornetq.jms.client.HornetQConnectionFactory.createConnectionInternal(HornetQConnectionFactory.java:601) ...还有 2 个

这是我的客户：

```
package cz.bleble;

import java.util.logging.Logger;
import java.util.Properties;

import javax.jms.Connection;
import javax.jms.ConnectionFactory;
import javax.jms.Destination;
import javax.jms.MessageConsumer;
import javax.jms.MessageProducer;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.naming.Context;
import javax.naming.InitialContext;

public final class DummyJMS {
    private static final Logger LOG = Logger.getLogger(DummyJMS.class.getName());

    private static final String DEFAULT_MESSAGE = "Hello, World!";
    private static final String DEFAULT_CONNECTION_FACTORY = "jms/RemoteConnectionFactory";
    private static final String DEFAULT_DESTINATION = "jms/queue/Online";
    private static final String DEFAULT_MESSAGE_COUNT = "1";
    private static final String DEFAULT_USERNAME = "user";
    private static final String DEFAULT_PASSWORD = "pass";
    private static final String INITIAL_CONTEXT_FACTORY = "org.jboss.naming.remote.client.InitialContextFactory";
    private static final String PROVIDER_URL = "remote://192.168.4.25:4447";

    public static void main(final String[] args) throws Exception {

        ConnectionFactory connectionFactory = null;
        Connection connection = null;
        Session session = null;
        MessageProducer producer = null;
        MessageConsumer consumer = null;
        Destination destination = null;
        TextMessage message = null;
        Context context = null;

        try {
            // Set up the context for the JNDI lookup
            final Properties env = new Properties();
            env.put(Context.INITIAL_CONTEXT_FACTORY, INITIAL_CONTEXT_FACTORY);
            env.put("remote.connectionprovider.create.options.org.xnio.Options.SSL_ENABLED", "true");
            env.put(Context.PROVIDER_URL, System.getProperty(Context.PROVIDER_URL, PROVIDER_URL));
            env.put(Context.SECURITY_PRINCIPAL, System.getProperty("username", DEFAULT_USERNAME));
            env.put(Context.SECURITY_CREDENTIALS, System.getProperty("password", DEFAULT_PASSWORD));
            env.put("jboss.naming.client.ejb.context", true);
            context = new InitialContext(env);

            // Perform the JNDI lookups
            String connectionFactoryString = System.getProperty("connection.factory", DEFAULT_CONNECTION_FACTORY);
            LOG.info("Attempting to acquire connection factory \"" + connectionFactoryString + "\"");
            connectionFactory = (ConnectionFactory) context.lookup(connectionFactoryString);
            LOG.info("Found connection factory \"" + connectionFactoryString + "\" in JNDI");

            String destinationString = System.getProperty("destination", DEFAULT_DESTINATION);
            LOG.info("Attempting to acquire destination \"" + destinationString + "\"");
            destination = (Destination) context.lookup(destinationString);
            LOG.info("Found destination \"" + destinationString + "\" in JNDI");

            // Create the JMS connection, session, producer, and consumer
            connection = connectionFactory.createConnection(System.getProperty("username", DEFAULT_USERNAME), System.getProperty("password", DEFAULT_PASSWORD));
            session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
            producer = session.createProducer(destination);
            consumer = session.createConsumer(destination);
            connection.start();

            int count = Integer.parseInt(System.getProperty("message.count", DEFAULT_MESSAGE_COUNT));
            String content = System.getProperty("message.content", DEFAULT_MESSAGE);

            LOG.info("Sending " + count + " messages with content: " + content);

            // Send the specified number of messages
            for (int i = 0; i < count; i++) {
                message = session.createTextMessage(content);
                producer.send(message);
            }

            // Then receive the same number of messages that were sent
            for (int i = 0; i < count; i++) {
                message = (TextMessage) consumer.receive(5000);
                LOG.info("Received message with content " + message.getText());
            }
        } catch (Exception e) {
            LOG.severe(e.getMessage());
            throw e;
        } finally {
            // closing the connection takes care of the session, producer, and consumer
            if (connection != null) {
                connection.close();
            }
            if (context != null) {
              context.close();
            }
        }
    }
} 
```

这是我来自 jboss 的standalone.xml 的平安

```
<server xmlns="urn:jboss:domain:1.3">

    <extensions>
        ...
        <extension module="org.jboss.as.messaging"/>
        ...
    </extensions>

    ...

    <profile>
        ...
        <subsystem xmlns="urn:jboss:domain:messaging:1.2">
            <hornetq-server>
                <persistence-enabled>true</persistence-enabled>
                <security-enabled>true</security-enabled>
                <journal-type>NIO</journal-type>
                <journal-file-size>102400</journal-file-size>
                <journal-min-files>2</journal-min-files>

                <connectors>
                    <netty-connector name="netty-throughput" socket-binding="messaging-throughput">
                        <param key="batch-delay" value="50"/>
                    </netty-connector>
                    <in-vm-connector name="in-vm" server-id="0"/>
                    <netty-connector name="netty" socket-binding="messaging">
                      <param key="ssl-enabled" value="true"/>
                      <param key="key-store-path" value="/keystore"/>
                      <param key="key-store-password" value="changeme"/>
                    </netty-connector>    
                </connectors>

                <acceptors>
                    <netty-acceptor name="netty-throughput" socket-binding="messaging-throughput">
                        <param key="batch-delay" value="50"/>
                        <param key="direct-deliver" value="false"/>
                    </netty-acceptor>
                    <in-vm-acceptor name="in-vm" server-id="0"/>
                    <netty-acceptor name="netty" socket-binding="messaging">
                      <param key="ssl-enabled" value="true"/>
                      <param key="key-store-path" value="/keystore"/>
                      <param key="key-store-password" value="changeme"/>
                      <param key="trust-store-path" value="/truststore"/>
                        <param key="trust-store-password" value="changeme"/>
                      </netty-acceptor>
                </acceptors>

                <security-settings>
                    <security-setting match="#">
                        <permission type="send" roles="user"/>
                        <permission type="consume" roles="user"/>
                        <permission type="createDurableQueue" roles="user"/>
                        <permission type="deleteDurableQueue" roles="user"/>
                        <permission type="createNonDurableQueue" roles="user"/>
                        <permission type="deleteNonDurableQueue" roles="user"/>
                    </security-setting>
                </security-settings>

                <address-settings>
                    <address-setting match="#">
                        <dead-letter-address>jms.queue.DLQ</dead-letter-address>
                        <expiry-address>jms.queue.ExpiryQueue</expiry-address>
                        <redelivery-delay>0</redelivery-delay>
                        <max-size-bytes>10485760</max-size-bytes>
                        <address-full-policy>BLOCK</address-full-policy>
                        <message-counter-history-day-limit>10</message-counter-history-day-limit>
                    </address-setting>
                </address-settings>

                <jms-connection-factories>
                    <connection-factory name="InVmConnectionFactory">
                        <connectors>
                            <connector-ref connector-name="in-vm"/>
                        </connectors>
                        <entries>
                            <entry name="java:/ConnectionFactory"/>
                            <entry name="java:/XAConnectionFactory"/>
                        </entries>
                    </connection-factory>
                    <connection-factory name="RemoteConnectionFactory">
                        <connectors>
                            <connector-ref connector-name="netty"/>
                        </connectors>
                        <entries>
                            <entry name="java:jboss/exported/jms/RemoteConnectionFactory"/>         
                        </entries>
                    </connection-factory>  
                    <pooled-connection-factory name="hornetq-ra">
                        <transaction mode="xa"/>
                        <connectors>
                            <connector-ref connector-name="in-vm"/>
                        </connectors>
                        <entries>
                            <entry name="java:/JmsXA"/>
                        </entries>
                    </pooled-connection-factory>
                </jms-connection-factories>

                <jms-destinations>
                    <jms-queue name="Online">
                        <entry name="java:jboss/exported/jms/queue/Online"/>
                    </jms-queue>
                </jms-destinations>
            </hornetq-server>
        </subsystem>
        ...
    </profile>
    ...
    <socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}">
        ...
        <socket-binding name="messaging" port="5445"/>
        <socket-binding name="messaging-group" port="0" multicast-address="${jboss.messaging.group.address:231.7.7.7}" multicast-port="${jboss.messaging.group.port:9876}"/>
        <socket-binding name="messaging-throughput" port="5455"/>
        <socket-binding name="osgi-http" interface="management" port="8090"/>
        <socket-binding name="remoting" port="4447"/>
        ...
    </socket-binding-group>

</server> 
```

有人知道我做错了什么吗？我找不到 jboss as7 over ssl 的 jms 配置和客户端的任何工作示例...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:10:53.013

嗯，不确定我是否熟悉端口 4447。我相信 HornetQ 在端口 5545 上侦听 SSL。

# python - neo4j 使用 python rest 客户端查询节点

> ID：15565228
> 
> 赞同：1
> 
> 时间：2013-03-22T07:44:03.460
> 
> 标签：python, nosql, neo4j

我在索引中有具有以下属性的节点：

```
{'user_id': u'00050714572570434939', 'hosts': [u'http://shyjive.blogspot.com/'], 'follows': ['null']} 
```

现在我有索引，我正在尝试简单的查询来索引以获取节点：

```
index = gdb.nodes.indexes.create('blogger2')
uid = gdb.nodes.create()
uid["hosts"] = ['http://shyjive.blogspot.com/']
uid["user_id"] = "00050714572570434939"
uid["follows"] = ['null']
print index["user_id"]["00050714572570434939"][:] 
```

这**返回 []**，这里有什么问题！

我在neo4j组的开发人员建议的python中使用列表的原因是我想将多个属性值存储到节点，所以我在这里使用列表而不是数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:52:53.910

您首先需要索引节点。如果您不使用[自动索引](http://docs.neo4j.org/chunked/stable/rest-api-configurable-auto-indexes.html)，则[neo4j-rest-client](https://neo4j-rest-client.readthedocs.org/en/latest/indices.html)的代码将是：

```
index["user_id"]["00050714572570434939"] = uid 
```

现在你有：

```
>>> index["user_id"]["00050714572570434939"][:]
[<Neo4j Node: http://localhost:7474/db/data/node/38>] 
```

# java - 如何使用 Flamingo 和 Insubstantial？

> ID：15565236
> 
> 赞同：0
> 
> 时间：2013-03-22T07:44:39.807
> 
> 标签：java, swing, ribbon, look-and-feel, radiance-flamingo

到目前为止，我只使用 Swing 来设计一些不合标准的 GUI。

我打算用它`Flamingo`来获得 MS Word 的功能区外观。我被引导到 Insubstantial 的网站。[http://shemnon.com/speling/2011/04/insubstantial-62-release.html](http://shemnon.com/speling/2011/04/insubstantial-62-release.html)

我想问一下：**是不是只需要下载jar文件并将其添加到我在Eclipse中的构建路径中？**或者还有什么我需要做的吗？

# php - PHP：mail() 在邮件包含 :// 时返回 1 但不发送邮件

> ID：15565240
> 
> 赞同：0
> 
> 时间：2013-03-22T07:44:51.560
> 
> 标签：php, email

我正在解决一个奇怪的问题。我想发送一封 utf-8 编码的文本/html 电子邮件。mail() 函数返回 1 但系统不发送邮件。

当我替换包含链接中的所有“：//”时，我发现这不会发生。届时将发送邮件。

我在同一台服务器上有另一个脚本，在同一个目录中，也包括链接，这个工作正常。

有谁知道这个问题的根源是什么？

* * *

我从数据库（utf-8）中获取链接。（只是普通链接，例如“ [http://www.example.com/blah](http://www.example.com/blah) ”）

将不会使用此代码发送电子邮件：

```
while($line = mysql_fetch_array($data)){
  $url = $line['url'];
  $mailtext.= "<td><a href=\"". $url ."\">". substr($url, 0, 150)."</a></td>";  
} 
```

这有效：

```
while($line = mysql_fetch_array($data)){
  $url = $line['url'];
  $strpos = strpos($url, "://");
  $urlpart1 = substr($url, 0, $strpos);
  $urlpart2 = substr($url, $strpos+3);
  $url = $urlpart1."---".$urlpart2;
  $mailtext.= "<td><a href=\"". $url ."\">". substr($url, 0, 150)."</a></td>";

} 
```

这就是我发送邮件的方式：

```
function mailInform($subject, $text){

    $mail = "mymail@example.com";

    if(get_magic_quotes_gpc())
    {
        $text = stripslashes($text);
    }

    $header = "From: something <something@myurl.org>\n";
    $header .= "Content-type: text/html; charset=UTF-8\n";
    $header .= "Content-Transfer-encoding: 8bit\n";
    $header .= "MIME-Version: 1.0\n";

    $subject = "=?UTF-8?B?".base64_encode($subject)."?=";
    return mail($mail, $subject, $text, $header);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:26:31.710

如果您将其作为 UTF-8 发送，则将标头更改为：

```
$header .= "Content-type: text/html; charset=UTF-8\n";
$header .= "Content-Transfer-encoding: 8bit\n"; 
```

至：

```
$header .= " Content-type: text/plain; charset=UTF-8\r\n"; 
```

并在 html 中添加 html 元标记：

```
<meta http-equiv="Content-Type" content="text/html charset=UTF-8" /> 
```

# android - 未调用 Oncreateoptions 菜单

> ID：15565241
> 
> 赞同：0
> 
> 时间：2013-03-22T07:44:56.610
> 
> 标签：android, android-activity, menu, oncreateoptionsmenu

嗨，我有一个奇怪的场景，当我运行程序时 onCreateOptionsmenu 没有被调用，但是当我保持一个断点时，它被调用为一个设备 < 3 (Android OS) FOR Android OS > 3 fones 它被调用。下面是我的代码

```
public boolean onCreateOptionsMenu(Menu menu) 
    {
        android.util.Log.e("mmmmmmmmmmmmm", "Coming insside oncreateoptions menu");
        super.onCreateOptionsMenu(menu);
        if (FoneclayUtility.m_bIsLoggedIn == true)
        {
            android.util.Log.e("mmmmmmmmmmmmmmm", "Setting logout menu");
            getSupportMenuInflater().inflate(R.menu.menu_logout, menu);
        }
        else
        {
            getSupportMenuInflater().inflate(R.menu.menu_login, menu);
        }
        return true;
} 
```

# scala - 使用scala检索与给定节点相关的neo4j节点

> ID：15565246
> 
> 赞同：2
> 
> 时间：2013-03-22T07:45:08.113
> 
> 标签：scala, neo4j

我有 2 个名为 User_node 和 Article_node 的节点，它们由关系相关

> article_node --> "Written_By" --> user_node

如何获取给定用户节点写入的所有文章节点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T08:35:20.873

我假设您使用的是嵌入式 neo4j，因此有一个 type 的对象`org.neo4j.graphdb.Node`。`Node`具有`getRelationships`具有多个重载的方法，但是采用可变参数的方法`RelationshipType`应该适合您。要将所有`Node`对象连接到您的起始节点，您必须编写如下内容（未经测试）：

```
// we use scala, so let's make our code pretty ;-)
import collection.JavaConverters._

val author = db.getNodeById(nodeId)

// getRelationships returns an Iterable[Relationship]
val rels = author.getRelationships(DynamicRelationshipType.withName("Written_By"))

// get the article node from the Relationship object
val articles = rels.asScala.map(_.getOtherNode(author)) 
```

# php - NOT IN 运算符不适用于 mysql 中的非主键值

> ID：15565253
> 
> 赞同：7
> 
> 时间：2013-03-22T07:45:35.740
> 
> 标签：php, mysql

我已经阅读了很多关于 NOT IN 运算符的问答，即 [如果我使用 IN 运算符过滤 NULL 值和空格它不起作用为什么？](https://stackoverflow.com/questions/13740648/if-i-use-in-operator-to-filter-null-values-and-white-spaces-it-is-not-working-wh) 还有很多其他的，但问题是当我们对非主键使用 not in 运算符时，它不会返回响应。

```
SELECT * FROM temp_customers WHERE temp_customers.fk_my_id NOT IN (SELECT fk_my_id FROM customers) 
```

其中 fk_my_id 是非主键并且可能是一个字符串。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T07:47:41.450

在这里用逗号`group_concat`分隔`fk_my_id`

```
SELECT * FROM temp_customers WHERE temp_customers.fk_my_id NOT IN 
(SELECT GROUP_CONCAT(fk_my_id) FROM customers)   
# when fk_my_id is INTEGER output (1,2)

SELECT * FROM temp_customers WHERE temp_customers.fk_my_id NOT IN 
(SELECT GROUP_CONCAT("'",fk_my_id,"'") FROM customers)   
# when fk_my_id is VARCHAR output ('1','2') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:50:41.970

我猜你在查询中使用了错误的列：`(SELECT fk_my_id FROM customers)`。它应该是您的客户表的 pkId

```
SELECT * FROM temp_customers 
WHERE temp_customers.fk_my_id 
NOT IN (SELECT pk_my_id FROM customers) 
```

# c# - 如何访问 Word2010 加载项中的标签/关键字属性

> ID：15565262
> 
> 赞同：1
> 
> 时间：2013-03-22T07:46:01.467
> 
> 标签：c#, properties, ms-word, add-in, document

我正在使用 VS2012 和 C# 开发 Word 2010 加载项。此加载项的目的是增强某些文档属性，例如“标签”、“关键字”、“类别”等。

我认为必须有一种相当简单的方法可以使用 Document 对象模型与这些交互，但到目前为止，我还没有找到正确的属性来获取/设置。

如果有人能指出我正确的方向，我会很高兴...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:51:15.020

您可以访问该`BuiltInDocumentProperties`集合以访问这些属性：

```
foreach (DocumentProperty property in 
    Globals.ThisDocument.Application.ActiveDocument.BuiltInDocumentProperties)
{
    Trace.TraceInformation("Name: {0}\tValue: {1}\tType{2}", 
        property.Name, property.Value, property.Type);
} 
```

也可以通过名称访问特定属性：

```
DocumentProperty keywords = Globals.ThisDocument.Application
    .ActiveDocument.BuiltInDocumentProperties["Keywords"];
Trace.TraceInformation("Name: {0}\tValue: {1}\tType{2}", 
    keywords.Name, keywords.Value, keywords.Type); 
```

# javascript - How to remove cookie using javascript

> ID：15565269
> 
> 赞同：1
> 
> 时间：2013-03-22T07:46:40.340
> 
> 标签：javascript

Hi am trying to delete cookie in my application. The code i wrote here is works everything fine in chrome.The problem i'm getting is in Opera browser its removing cookie, but the application is restarting. plz help me....... Code:

-------------------------------imports------------------

```
<html>
<head>
    <title> Report Generation</title>
</head>
<script>     
    window.onload=function(){checkCookie();}
    function close(){ formName.close();}

    function checkCookie()
    {
    <%
        PracticeDBHandler practiceDBHandler1 = new PracticeDBHandler();
        ArrayList<PracticeBean> listPractice1 = practiceDBHandler1.getPracticeList(WFDBPool);

        for (PracticeBean practiceBean1 : listPractice1) {
            int pr_id1 = practiceBean1.getPr_id();
            String pr_name1 = practiceBean1.getPracticeName();
    %> 

            var cookiename=getCookie(<%=pr_id1%>);

            if (cookiename!=null && cookiename!="")
            {
                document.getElementById(<%=pr_id1%>).checked=true;
            }
            else 
            {
                document.getElementById(<%=pr_id1%>).checked=false;

            }
    <% }%>
        }

        function getCookie(c_name)
        {
            var i,x,y,ARRcookies=document.cookie.split(";");
            for (i=0;i<ARRcookies.length;i++)
            {
                x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
                y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
                x=x.replace(/^\s+|\s+$/g,"");
                if (x==c_name)
                {
                    return unescape(y);
                }
            }
        }

        function checkBoxes(){
            var result, vals = [], checkBoxName =  document.forms['formName']['checkBoxName[]'];
            for(var i=0,elm;elm = checkBoxName[i];i++) {
                if(elm.checked) {                 
                    document.cookie=elm.value + "=" + "Value";
                }
                else if(!elm.checked){
                    var exp=new Date();
                     exp.setTime(exp.getTime()-1);
                  document.cookie = elm.value + "=" +"Value" + ";expires=" + exp.toGMTString();

                }
            }
            result = vals.join(', ');
        }
</script>
<body>
    <form name="formName">
               <%
            PracticeDBHandler practiceDBHandler = new PracticeDBHandler();
            ArrayList<PracticeBean> listPractice = practiceDBHandler.getPracticeList(WFDBPool);

            for (PracticeBean practiceBean : listPractice) {
                int pr_id = practiceBean.getPr_id();
                String pr_name = practiceBean.getPracticeName();

        %>                    
        <input type="checkbox" name="checkBoxName[]" value="<%=pr_id%>" id="<%=pr_id%>"/> <%=pr_name%> (<%=pr_id%>)<br>
        <% }%><br>
        <input type="button" onclick="checkBoxes()" value="Save"/>
         </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T09:18:00.367

以下功能将为您完成工作：

```
function deleteCookie(name)
{
  document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
} 
```

# bash - 在文件中找到一个键并输出对应的值

> ID：15565271
> 
> 赞同：0
> 
> 时间：2013-03-22T07:46:51.393
> 
> 标签：bash

我有一个`file1.txt`包含以下内容的文件

```
P0000021=Result of string 21
P0000022=Result of string 22
P0000023=Result of string 23
P0000024=Result of string 24
P0000025=Result of string 25
P0000026=Result of string 26
P0000027=Result of string 27
T1000028=Result of string 28 
```

并想使用一些命令来查找任意键并获取相应的值。例如，如果我搜索`P0000024`输出应该是

```
Result of string 24 
```

我试过`grep`这样使用：

```
grep '"P0000024"=' file1.txt | cut -d'=' -f2 > result.txt 
```

但是，它没有给出预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:03:48.903

使用 awk：

```
awk -F= -v x="P0000024" '$1==x{print $2}' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:46:54.153

使用`sed`：

```
sed -n '/P0000024=/{s///;p;q}' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T07:51:21.067

从 grep 表达式中删除双引号

```
grep 'P0000024=' file1.txt | cut -d'=' -f2 > result.txt 
```

# qt - qt5 简单应用程序无法在 Windows 7 中运行

> ID：15565286
> 
> 赞同：2
> 
> 时间：2013-03-22T07:47:56.990
> 
> 标签：qt, dll, deployment, qt5, qwidget

我在 W7 中使用 Qt 5.0.1 和 Qt Creator 2.6.2。我试图从仅包含一个窗口的示例中运行一个简单的应用程序（“小部件教程 - 创建一个窗口”）。当我在 Qt Creator 中运行它时，它可以工作。但是当我将它作为独立应用程序（Release）运行时，它不会。我用它询问的每个 dll 填充了文件夹（26 MB 的 dll，而应用程序是 10KB ！！！）。现在它不要求任何文件，它根本不运行，没有任何解释。

我尝试添加一些文件，因为在[使用 QT5 库部署的应用程序中建议不会在 Windows 7 上启动，](https://stackoverflow.com/questions/14144075/application-deployed-with-qt5-libraries-does-not-start-on-windows-7) 但没有运气。在 [Windows 7 和 XP 中使用 QtQuick 2.0 部署 HelloWorld 时](https://stackoverflow.com/questions/15040736/helloworld-deployment-with-qtquick-2-0-in-windows-7-and-xp) ，w7 中没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:43:03.820

可能这是一个依赖问题，这些链接描述了它：

[Qt 5.0 程序在 QtCreator 中运行，但不在外部](https://stackoverflow.com/questions/15566037/qt-5-0-program-runs-in-qtcreator-but-not-outside/15569097#15569097)

[如何在不依赖 MSVCx80.dll 的情况下构建 QTcore4.dll？](https://stackoverflow.com/questions/1050530/how-to-build-qtcore4-dll-without-dependency-to-msvcx80-dll/14989583#14989583)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T23:52:44.863

**platform/qwindows.dll**是运行 Qt5 应用程序所需的“非必需” **DLL 。***在发布*模式下构建您的应用程序并从 Qt Creator 的文件夹中窃取 DLL（或在 Qt 的*bin/platforms*文件夹中找到它）

# c - 串行数据解析

> ID：15565289
> 
> 赞同：0
> 
> 时间：2013-03-22T07:48:21.993
> 
> 标签：c, serial-port

我有一个可能很简单的问题，我似乎无法理解。

我正在为发送串行流的数据记录器创建一个串行解析器。在产品的文档中说明了计算，我不明白。

```
Lateral = Data1 And 0x7F + Data2 / 0x100
If (Data1 And 0x80)=0 Then Lateral = -Lateral 
```

`Data1`和是什么`0x7f`意思？我知道那`7F`是`127`，但除此之外我不明白与 And 语句的组合。

真正的公式会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:54:29.357

*按位与 - 当且仅当在两个*输入中都设置了相应的位时，才会设置输出中的位。

由于您的标签表明您正在使用 C 语言，您可以使用 & 运算符执行按位与。

（注意 0x7F 是 01111111 和 0x80 是 10000000 在二进制中，所以与它们分别对应于提取一个字节的低七位和提取高位。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:08:23.430

第一句话 `Lateral = Data1 And(&) 0x7f + Data2/ 0x100`

表示取`Data1`(Data 和 0x7f) 的大小，并加上`Data2/256`

第二句检查符号 od`Data1`并将其分配给`Lateral`。

# camera - IP Camera Test Addresses

> ID：15565292
> 
> 赞同：2
> 
> 时间：2013-03-22T07:48:36.600
> 
> 标签：camera, ip

I have an odd request. I recently downloaded iSpy v4.8.4.0 to begin setting up a home security network. I have yet to purchase any IP cameras because I want to start with webcams until I find better software. I want to test iSpys IP camera functions. Does anyone know where I may find IP camera addresses? Such as public places like parks, monuments, etc? Any camera to just test the programs I try.

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T07:53:49.637

[这](http://www.webcamxp.com/publicipcams.aspx)是公共 IP 摄像机的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:53:56.197

这些公共场所的摄像头都在专用网络中工作，因此您无法在线访问它们。唯一的方法是访问服务器或网络设备（交换机、路由器等）

您可以在线搜索以找到出于某些目的打开他/她的相机的人（掠夺我有一个美妙的景象等..）

# linux - how to configure phpmyadmin after "sudo yum install phpMyAdmin" ? on amazon ec2 linux ami

> ID：15565302
> 
> 赞同：3
> 
> 时间：2013-03-22T07:49:34.030
> 
> 标签：linux, amazon-ec2, phpmyadmin

after I install phpmyadmin by "sudo yum install phpMyAdmin", it installed successfully.

However, when I type [http://example.com/phpmyadmin](http://example.com/phpmyadmin) always get "The requested URL /phpmyadmin was not found on this server."

So my question is how to configure phpmyadmin after install it, I searched online for lots post and none of them solves my problem so far, any suggestions? (I restarted apache after install phpmyadmin and it didnt work)

Background: using amazon ec2 linux ami, php/apache/mysql up and running. (and where can I find apache installed directory and phpmyadmin configure file? I tried /etc/apache, but apache is not there)

Thanks a lot for your help!

# android - 我如何将值从基本适配器传递给活动

> ID：15565310
> 
> 赞同：0
> 
> 时间：2013-03-22T07:50:10.470
> 
> 标签：android, android-activity, baseadapter

我正在一个应用程序中工作，我需要将值从基本适配器类传递给活动

这是代码段：

```
public View getView(int position, View convertView, ViewGroup parent) {

            vi=convertView;

            if(convertView==null){
                vi = LayoutInflater.from(parent.getContext()).inflate(R.layout.screen, null);

               position_pin = position;

              Holder.images=(ImageView) vi.findViewById(R.id.image);
              Holder.textview=(TextView) vi.findViewById(R.id.name);

             Holder.images.setImageResource(imageIds[position]);
           Holder.text.setText(name);//here name is String 

             vi.setTag(Holder);   

            }

                        return vi;
            } 
```

在这里，我得到图像 id 位置：

```
 Holder.images.setImageResource(imageIds[position]); 
```

**我怎么能将 imageIds 位置传递给活动**谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T09:29:32.707

你可以在你的活动中使用下面的代码

```
 for(int i=0;i<list.getCount();i++)
  {
   //here u can add i values to an array for storing positions or do anything else u want
  } 
```

# java - Struts2 jQuery struts-plugin.xml 无效

> ID：15565320
> 
> 赞同：1
> 
> 时间：2013-03-22T07:50:50.627
> 
> 标签：java, struts2, apache-commons, struts2-jquery, struts2-jquery-plugin

我已经建立了一个项目，它是 Struts2 + Springs + JPA 的组合。

我最近遇到了[Struts2-Jquery 插件](http://code.google.com/p/struts2-jquery/)

在我的项目中使用这个插件（struts2-jquery-plugin-3.5.1.jar）我得到了一个错误

```
Unable to load jar:file:/H:/My%20Project/phase1/build/web/WEB-INF/lib/struts2-jquery-plugin-3.5.1.jar!/struts-plugin.xml - Class: java.net.PlainSocketImpl
File: PlainSocketImpl.java
Method: connect
Line: 195 - java/net/PlainSocketImpl.java:195:-1
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:909)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:154)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:121)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:179)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
    ... 48 more

 Caused by: java.net.UnknownHostException: struts.apache.org
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:195)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:529)
        at java.net.Socket.connect(Socket.java:478)
        at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
        at sun.net.www.http.HttpClient.openServer(HttpClient.java:394)
        at sun.net.www.http.HttpClient.openServer(HttpClient.java:529)
        at sun.net.www.http.HttpClient.<init>(HttpClient.java:233)
        at sun.net.www.http.HttpClient.New(HttpClient.java:306)
        at sun.net.www.http.HttpClient.New(HttpClient.java:323)
        at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:970)
        at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:911)
        at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:836)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1172)
        at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:677)
        at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(XMLEntityManager.java:1315)
        at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startDTDEntity(XMLEntityManager.java:1282)
        at com.sun.org.apache.xerces.internal.impl.XMLDTDScannerImpl.setInputSource(XMLDTDScannerImpl.java:283)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.dispatch(XMLDocumentScannerImpl.java:1194)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.next(XMLDocumentScannerImpl.java:1090)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1003)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
        at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
        at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:113)
        ... 53 more 
```

此特定错误的解决方案在[此处](https://code.google.com/p/struts2-jquery/issues/detail?id=800)作为 Struts2 DTD 问题给出。

执行上述链接中给出的解决方案.. 更新了我的 webapp lib 文件夹中的三个库：

*   Struts2-core-2.3.4.1
*   struts2-spring-plugin-2.3.4.1
*   xwork-core-2.3.4.1

在此更新后尝试部署时，我得到了这个堆栈跟踪

```
SEVERE: Exception starting filter struts2
java.lang.NoClassDefFoundError: org/apache/commons/lang3/StringUtils
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.register(XmlConfigurationProvider.java:209)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.register(StrutsXmlConfigurationProvider.java:102)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:210)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:437)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4649)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5305)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:899)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:875)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:531)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1468)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:856)
    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:353)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.lang3.StringUtils
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 52 more 
```

谁能给我一个指示我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:50:36.383

您需要将 添加`commons-lang3-3.x.jar`到您的类路径以运行过滤器。

您必须确保您没有多个版本`commons-lang3-x.x.jar`。

`commons-lang3-x.x.jar`而是`commons-lang-x.x.jar`可以在同一个类路径中共存，因为`package`它们是不同的（他们是故意这样做的；）

* * *

这可以知道，因为*NoClassDefFoundError*：

> java.lang.NoClassDefFoundError：org/apache/commons/lang3/StringUtils。

这主要发生在两种情况下：

*   在运行时，您没有库，
*   或者你有两个版本的库，因此类加载器不知道选择哪个，并引发异常。

包中的 lang3 表示缺少的 StringUtils 类是 from `common-lang3-*.jar`，而不是 from `common-lang-*.jar`。

# ios - 在最后一个单元格的底部添加行

> ID：15565322
> 
> 赞同：0
> 
> 时间：2013-03-22T07:51:11.657
> 
> 标签：ios, objective-c, xcode

我有 UiTableView。其上的单元格通过单击更改自身高度。我需要添加自定义分隔线。我总是添加到单元格的顶部。所以一切正常，但最后一个单元格底部没有分隔线，用户看不到 tableview 的结尾。我尝试添加下一个代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

然后尝试使用它

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

我在开始新的 UIImageView 中创建

```
@implementation MovieSessionsVC 
...
    UIImageView *seporatorView;
} 
```

这是我的代码：

```
[seporatorView removeFromSuperview];
if (indexPath.row == self.sessions.count - 1) {
    seporatorView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"seporator.png"]];
    if([self cellIsSelected:indexPath])
        seporatorView.frame = CGRectMake(0, 106, cell.width, 0.5);
    else
        seporatorView.frame = CGRectMake(0, 63, cell.width, 0.5);
    [cell addSubview:seporatorView];
} 
```

我使用 self.sessions.count 作为行数，选择时我的单元格的高度为 64 和 107

所以线出现并且工作正常，但是当我最大程度地拿起我的表格视图时它消失了

![在此处输入图像描述](../Images/a1148de42e44937ed881ece937ea20bd.png) ![在此处输入图像描述](../Images/a7352a792a205865ead920c145bcac10.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:12:36.267

如果它只是您要添加内容的最后一个单元格，在您的情况下是一条线，那么在页脚视图顶部绘制这条线可能是最容易的。您可以创建 a`UIView`并将其分配给 的`tableFooterView`属性`UITableView`。该页脚可能只有 1.0 的高度并填充有颜色。您当然可以在该页脚视图中画一条线`drawInRect`。为此，您将需要子类化`UIView`. 但我认为一些`UIView`具有背景颜色和高度为 1.0 的标准就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:06:46.140

只需将分隔图像的 resize 属性设置为与下图相同

![在此处输入图像描述](../Images/63e0da7ce8129070a4fc18ea2ed31995.png)

任何单元格调整大小时位于底部的分隔符图像..确保单元格调整大小属性全部选中..

# android - 无法停止 LocationListener 服务

> ID：15565324
> 
> 赞同：0
> 
> 时间：2013-03-22T07:51:27.590
> 
> 标签：android, service, locationlistener

在 a`Splash Activity`中`onResume()`，我以这种方式启动服务

```
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
Intent i = new Intent(this, LocationService.class);
PendingIntent pi = PendingIntent.getService(this, 0, i,
            PendingIntent.FLAG_UPDATE_CURRENT);
am.cancel(pi);
am.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                        ystemClock.elapsedRealtime() + 20000, 60000, pi); 
```

并且`onStop()`，我以这种方式停止服务

```
stopService(new Intent(this, LocationService.class)); 
```

服务**等级**是：

```
public class LocationService extends Service implements LocationListener {

    private LocationManager mgr;

    @Override
    public IBinder onBind(Intent arg0) {

        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        mgr = (LocationManager) getSystemService(LOCATION_SERVICE);
        //get Location details
        mgr.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                10 * 60 * 1000, 50, this);

        return START_NOT_STICKY;

    }

    private void dumpLocation(Location l) {
    }

    @Override
    public void onLocationChanged(Location location) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public void onDestroy() {

        super.onDestroy();
        mgr.removeUpdates(this);
    }
} 
```

一旦我在`Splash Activity`'s中停止服务`onStop()`，就会触发 （这意味着服务已停止？），但仍然在服务中指定的一分钟后运行。`onDestroy()``LocationService``AlarmManager`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:56:11.743

将警报的未决意图存储在变量中。服务结束时调用取消。

# java - 将 JPanel 保存为 .jpg/.png 图像

> ID：15565328
> 
> 赞同：1
> 
> 时间：2013-03-22T07:52:02.460
> 
> 标签：java, swing, jpanel, bufferedimage, paintcomponent

我制作了一个 Java Applet，可以将用户在 JPanel 中绘制的内容保存在图像上。当我保存在输出图像上时，我只有 JPanel 的背景，用户绘制的线条消失了。有什么提示可以解决吗？在此代码行中已由程序绘制，但错误仍然存​​在。

```
import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JPanel;

public class MarkPen extends Applet implements ActionListener, AdjustmentListener, MouseListener, MouseMotionListener {

     private int x = 0;
     private int y = 0;
     private int prevx  = 0;
     private int prevy  = 0;

     private JPanel drawPanel = new JPanel();
     private JButton saveButton = new JButton("SaveImage");

     public void init()
     {

        setLayout(new BorderLayout());

        drawPanel.setBackground(Color.red);
        drawPanel.addMouseMotionListener(this);
        drawPanel.addMouseListener(this);
        drawPanel.add(new Comp());
        drawPanel.setDoubleBuffered(true);
        add(drawPanel, "Center");

        saveButton.addActionListener(new ActionListener(){
             public void actionPerformed(ActionEvent e)
                {
                 BufferedImage image = new BufferedImage(drawPanel.getWidth(), drawPanel.getHeight(), BufferedImage.TYPE_INT_RGB);
                 Graphics2D graphics2D = image.createGraphics(); 

                 drawPanel.paint(graphics2D);
                 try{
                     ImageIO.write(image,"jpeg", new File("C:/.../Example.jpeg"));
                     }
                 catch(Exception ex){
                      ex.printStackTrace();
                     }
                 }
        });

        add(saveButton, "South");

     }

    public void setGraphicalDefaults(MouseEvent e){}

    public class Comp extends JComponent{
        public void paintComponent(Graphics g) {
            g  = drawPanel.getGraphics();
            g.setColor(Color.black);
            g.drawLine(0,0,100,100);
        }
     }

     public void mouseDragged(MouseEvent e){}
     public void mousePressed(MouseEvent e){}
     public void actionPerformed(ActionEvent e){}   
     public void mouseReleased(MouseEvent e){}
     public void mouseEntered(MouseEvent e){}
     public void mouseExited(MouseEvent e){}
     public void mouseMoved(MouseEvent e){}
     public void mouseClicked(MouseEvent e){}
     public void adjustmentValueChanged(AdjustmentEvent arg0){}

} 
```

感谢您的帮助，我解决了它，我在下面发布了工作代码。

工作代码：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JPanel;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.lang.reflect.InvocationTargetException;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JApplet;
import javax.swing.SwingUtilities;

public class MarkPen extends JApplet {

    private static final long serialVersionUID = 1L;

    public static class DrawPanel extends JPanel {

        private static final long serialVersionUID = 1L;
        private List<Point> points = new ArrayList<Point>();

        public DrawPanel() {
            setBackground(Color.WHITE);

            addMouseMotionListener(new MouseAdapter() {

                @Override
                public void mouseDragged(MouseEvent e) {
                    points.add(e.getPoint());
                    repaint();
                }
            });

            addMouseListener(new MouseAdapter(){

                @Override
                public void mousePressed(MouseEvent e){
                    Point p = null;
                    points.add(p);
             }
            });

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(300, 300);
        }

        @Override
        protected void paintComponent(java.awt.Graphics g) {
            super.paintComponent(g);
            Point p1 = null;
            Point p2 = null;
            g.setColor(Color.black);
            for (Point p : points) {
                p2 = p1;
                p1 = p;
                if (p1 != null && p2 != null) {
                    g.drawLine(p1.x, p1.y, p2.x, p2.y);
                }
            }
        }
    }

    protected void initUI() {
        setLayout(new BorderLayout());

        JButton saveButton = new JButton("SaveImage");
        JButton clearButton = new JButton("Clear");
        final DrawPanel drawPanel = new DrawPanel();
        JPanel buttonsPanel = new JPanel();

        buttonsPanel.setLayout(new BorderLayout());
        setSize(1000, 305);
        add(drawPanel, "Center");

        saveButton.addActionListener(new ActionListener(){
             public void actionPerformed(ActionEvent e)
                {
                 BufferedImage image = new BufferedImage(drawPanel.getWidth(), drawPanel.getHeight(), BufferedImage.TYPE_INT_RGB);
                 Graphics2D graphics2D = image.createGraphics(); 

                 drawPanel.paint(graphics2D);
                 try{
                     ImageIO.write(image,"png", new File("C:/.../Desktop/Example.png"));
                     }
                 catch(Exception ex){
                      ex.printStackTrace();
                     }
                 }
        });

       clearButton.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                drawPanel.points.clear();
                repaint();
            }
        });

        buttonsPanel.add(clearButton, BorderLayout.WEST);
        buttonsPanel.add(saveButton, BorderLayout.EAST);
        add(buttonsPanel, BorderLayout.SOUTH);

        validate();
    }

    @Override
    public void init() {
        super.init();
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    initUI();
                }
            });
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:03:28.240

*   您的问题是使用`drawPanel.getGraphics();`,

*   此方法可以创建临时对象，而不是用于`Save JPanel into Image`显示`Image``JPanel`

*   覆盖`getPreferredSize`_`public class Comp extends JComponent{`

*   `drawImage`里面`paintComponent`

*   `super.paintComponent`在要替换当前绘画的情况下使用

例如

```
class Comp extends JComponent {

    private static final long serialVersionUID = 1L;

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(bi, 0, 0, this);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:02:36.223

> 这是我第一次使用 BufferedImage，但我很难理解它是如何工作的

请参阅[自定义绘画方法](http://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/)。该`DrawOnImage`示例是使用 BufferedImage 的示例，尽管理解另一个示例也没有什么坏处。

# jquery - 如何检查 jquery UI 选项卡是否处于非活动状态

> ID：15565329
> 
> 赞同：2
> 
> 时间：2013-03-22T07:52:09.883
> 
> 标签：jquery, jquery-ui

我目前正在使用 jquery UI 选项卡我想检查一个选项卡当前是否处于非活动状态我检查了 wiki，我看到有启用和禁用选项，但那不起作用有什么我可以做的解决方法吗？

```
 <script type='text/javascript'>
     if($("#Tabs").inactive){
        // do something
         }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:01:53.933

尝试

```
 <script type="text/javascript">
  $(document).ready(function() {
      $( "#tabs" ).tabs( "option", "disabled", 2);
  });
</script> 
```

或多重禁用

```
 <script type="text/javascript">
  $(document).ready(function() {
      $( "#tabs" ).tabs('option','disabled', [1, 2, 3, 4]);
  });
</script> 
```

代替

```
<script type="text/javascript">
  $(document).ready(function() {
      $( "#tabs" ).tabs( "option", "disabled", [2]);
  });
</script> 
```

启用选项卡并移动以使用

```
 $( "#tabs" ).tabs( "enable" , 1 )
  $( "#tabs" ).tabs( "select" , 1 ) 
```

*计数从0开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:03:13.300

来自jQuery UI；

初始化后获取或设置活动选项：

```
// getter
var active = $( ".selector" ).tabs( "option", "active" );

// setter
$( ".selector" ).tabs( "option", "active", 1 ); 
```

我希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:24:46.457

jquery UI 没有该方法，但您可以实现自己的方法。像这样的东西：

disabled 选项返回禁用选项卡的索引数组，因此检查是否禁用的函数如下所示：

```
function isDisabled(index) {
  return $.inArray(index, $("#tabs").tabs("option", "disabled")) > -1;
} 
```

有关更多信息，请参阅下面的链接： [如何知道是否在 jQuery 选项卡上启用了选项卡？](https://stackoverflow.com/questions/3625198/how-to-know-if-a-tab-is-enabled-on-jquery-tabs)

# jquery - next() 没有帮助 scrollTop() 上的第三个元素

> ID：15565333
> 
> 赞同：1
> 
> 时间：2013-03-22T07:53:01.737
> 
> 标签：jquery

我有 3 个 DIV，我想要做的是，如果用户*一个接一个*地滚动底部这些 DIV，如果他滚动顶部，它们就会消失。前 2 个 DIV 工作正常，但第 3 个不是。

这是我尝试过的：

```
$(window).scroll(function () {
    if ($(window).scrollTop() > 100) {
        $("#one").fadeIn(5000);
        $('#two').next().fadeIn(5000);
        $('#three').next().fadeIn(5000); 
    }
});
$(window).scroll(function () {
    if ($(window).scrollTop() < 100) {
        $("#one").fadeOut(10);
        $('#two').next().fadeOut(10);
        $('#three').next().fadeOut(10);
    }
}); 
```

这是示例[。](http://jsfiddle.net/EqYsy/15/)

有什么更正或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:56:51.583

`next()`正在选择下一个而不是您想要的那个`div`，因此实际上您是在说`one`淡入，`three`淡入以及`three`淡入之后的内容。与 out 相同。删除所有的`.next()`，看看它是否符合您的要求。

编辑：您说您希望它们在滚动到它们时出现，您可以尝试使用[jQuery Waypoints](http://imakewebthings.com/jquery-waypoints/)。一个例子是[http://jsfiddle.net/EqYsy/28/](http://jsfiddle.net/EqYsy/28/)

```
$('.fadeClass').waypoint(function(direction){
  if(direction == "down")
    $(this).animate({opacity:1}, 5000);
  else if(direction == "up")
    $(this).animate({opacity:0}, 1000);
},{offset:500}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:16:11.447

试试[这个](http://jsfiddle.net/EqYsy/21/)：

```
$(window).scroll(function () {
    if ($(window).scrollTop() > 100) {
        $("#one").fadeIn(5000).next().fadeIn(5000).next().fadeIn(5000); 
    }
});
$(window).scroll(function () {
    if ($(window).scrollTop() < 100) {
        $("#one").fadeOut(10).next().fadeOut(10).next().fadeOut(10);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T08:24:32.537

除了问题之外`.next()`，我会像这样重写您的代码：

```
$(window).scroll(function () {

    if ($(window).scrollTop() > 100) {

        $('#test').animate({opacity:1}, 5000);

    } else {

        $('#test').stop(true, false).css({'opacity':0});
    } 
}); 
```

我认为它看起来更容易理解。对于 HTML，我会添加一个包装器（这里称为测试）只是为了减少代码大小。jsFiddle 在[这里](http://jsfiddle.net/EqYsy/26/)

# javascript - 更新了javascript中的表单验证错误

> ID：15565334
> 
> 赞同：0
> 
> 时间：2013-03-22T07:53:03.403
> 
> 标签：javascript

从下面的编码中，如果某些数据有误，它会提示错误。如果确认的密码与密码不同，则可以正常工作。但是，如果 loginID 检查似乎有一些问题。它分别警告 true789 false false123 false456。为什么结果不是 false123 false456 false789 false？因为json的延迟？如何解决？

```
var result = "true";

$('#test').click(function(){
    validation();
    alert(result);  
});

function validation(){  
    result = "true";
    var loginID = $("#loginID").val();
    var role = $("#role").text();

    // check Login Name
    if (loginID == "" || loginID == null){
        $('#errorID').empty();
        $('#errorID').append(
            '<h6>' + "The Login Name cannot be empty" + '</h6>'
        );
        $("#errorID").show();
        result="false";
    } else {
        $.ajax({
            type: "GET",
            dataType: "jsonp",
            jsonpCallback: "jsoncallback",
            data: {
                ID: loginID,
                role: role          
            },
            url: "http://mydomain.com/checkID.php?jsoncallback=?",

            success: function(data){
                if (data[0].data.user_name!=""){    
                    result="false";
                    alert(result+"123");
                    $('#errorID').empty();
                    $('#errorID').append(
                        '<h6>' + "The Login Name " + data[0].data.user_name + 
                        " is used." + '</h6>'
                    );
                    $("#errorID").show();
                    alert(result+"456");
                }
            },
            error: function(jqXHR, textStatus, errorThrown){
                alert("Request failed: " + textStatus + errorThrown);
                result="false";
            }
        }); //end of ajax
    }
    alert(result+"789");            
    return result;
} // end of #validation 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:12:52.063

ajax 调用是异步完成的。它进入 ajax() 函数然后继续，当结果最终出现时，警报或事件处理程序中的任何内容都会触发。您可以添加一个`async : false`到您的 ajax 调用，这将改变事情的运行方式。789 警报只会在 ajax 调用完成并响应后运行。此外，如果您的 ajax 调用是对您的域进行的，那么您不需要 jsonpCallback 并且如果响应的标头是，`application/json`那么您也应该删除 dataType 并将其留给 jQuery 以正确处理它

# ios - 用于 UIImageView 的 resizableImage

> ID：15565335
> 
> 赞同：0
> 
> 时间：2013-03-22T07:53:19.963
> 
> 标签：ios, ios5

我正在为 IOS 5.0 作为 minTarget 工作

我有一个 UIImageView ，我想为其分配一个可调整大小的图像，这样该图像就不会从角落拉伸。

我尝试将 UIImageView 的内容模式设置为 UIViewContentModeScaleToFill。但图像显示为平铺。

这是代码

```
UIImage *bgImage = [[UIImage imageNamed:@"ImgViewBg"] resizableImageWithCapInsets:UIEdgeInsetsMake(2, 2, 2, 2)];

imgView.contentMode = UIViewContentModeScaleToFill;
imgView.image = bgImage; 
```

我正在寻找与 android 中的 9patch 图像相同的效果

这是我正在尝试的图像 ![图像视图Bg](../Images/47d8dea80ea914760cfb3d1357a99f05.png)

我刚刚又看了 resizeableImageWithCapInsets 的文档。它说它平铺了不在帽下的区域。我认为这是导致平铺图案的原因。有什么解决方法可以让我拥有 9Patch 风格的图像吗？

# 编辑

根据 Apple Docs
upto IOS 5.0 以下适用于我的请求。
[[UIImage imageNamed:@"textViewBg"] stretchableImageWithLeftCapWidth:6 topCapHeight:6]; （如 Dipen Panchasara 所述）

IOS6.0 及更高版本适用于我的请求。
- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets resizingMode:(UIImageResizingMode)resizingMode

IOS 5.0 及更高版本（我需要）
- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets
上面的函数在我的情况下不起作用，因为它平铺的图像不在上限之下。

所以对于 IOS 5.0 到 IOS 6.0，我找不到任何可以解决我要求的东西。

现在我开始使用 Dipen Panchasara 解决方案，我希望它保持稳定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:31:49.910

```
// Use following code to make stretchableBackground
UIImage *bgImage = [[UIImage imageNamed:@"ImgViewBg"] stretchableImageWithLeftCapWidth:13 topCapHeight:13];
[imgView setImage:bgImage]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:06:33.537

ScaleToFill 将拉伸图像以填充整个图像视图。如果您不想拉伸图像并保持其纵横比，请使用 UIViewContentModeScaleAspectFit 或 UIViewContentModeScaleAspectFill。

[您可以在此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)找到有关这些常量的更多信息。

# javascript - 揭示模块模式方法 echo undefined

> ID：15565337
> 
> 赞同：0
> 
> 时间：2013-03-22T07:53:27.383
> 
> 标签：javascript, design-patterns, module

我将此函数编写为显示模块模式，但是当我在控制台中调用该`get`方法时，`metadataModule.get();`它会`undefined`在控制台中回显。

```
var metadataModule = function () {
    var metadataurl = 'http://farskids326.com/data.json';

    function getMetadata() {
        console.log("Metadata Function Called")
        $.ajax({
            url: metadataurl,
            dataType: "json",
            success: function (data) {
                console.log(data);
            }
        });
    }
    return {
        get: getMetadata,
    };
}(); 
```

我在这段代码中哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:11:31.800

当您在控制台中工作时，最后一个表达式的返回值会在任何命令之后回显。您使用的方法没有明确的返回值。所以，这可能就是你看到的原因`undefined`。

这可能意味着您的 ajax 调用遇到错误。尝试在成功或错误发生时将其更改为日志，如下所示：

```
$.ajax({ 
  url: metadataurl , 
  dataType: "json", 
  success: function(data){
    console.log('called success!');
  },
  error: function(jqXHR, textStatus, errorThrown){
    console.log('called error!');
  }
}); 
```

然后，当您运行代码时，您应该确切地看到正在执行的回调。希望这将为您提供调试问题的良好起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:18:00.187

getMetadata 函数什么都不返回，所以是的，它将输出未定义的。要让它响应 JSON 的内容，您需要使 ajax 调用同步并返回您获得的值。

```
var metadataModule = function () {
   var metadataurl = 'http://farskids326.com/data.json';

   function getMetadata() {
       console.log("Metadata Function Called")
       var content = {}
       $.ajax({
           url: metadataurl,
           async : false,
           dataType: "json",
           success: function (data) {
               content = data;
           }
       });
       return content
   }
   return {
       get: getMetadata,
   };
}(); 
```

# php - .htaccess 文件在 Linux 上不起作用

> ID：15565342
> 
> 赞同：0
> 
> 时间：2013-03-22T07:53:44.730
> 
> 标签：php, .htaccess, mod-rewrite, apache, httpd.conf

我已经配置了 Amazon EC2 实例`Amazon Linux AMI 64 bit`

我已经上传了我的网站，整个代码都在工作，但是有问题`.htaccess`

`RewriteRule`不工作。我已经对`httpd.conf`文件进行了所有更改，但我认为这可能是权限问题。

请帮助我解决这个问题。

这是我的`htaccess`代码

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^friosworld\.com$ [NC]
RewriteRule ^(.*)$ http://www.friosworld.com/$1 [R=301,L] 
```

我通过谷歌搜索发现的另一件事

`httpd.conf`文件代码

```
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory> 
```

我认为问题出在这段代码中。但我不知道是什么问题！

我也改成`AllowOverride None`但`AllowOverride All`还是不行！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:04:57.503

得到了解决方案。谢谢你的时间。

```
<Directory />
    Options FollowSymLinks
    AllowOverride All  # AllowOverride None to AllowOverride All
</Directory> 
```

**和**

```
DocumentRoot "/home/mydirectory/website"  //change this default path to my path 
```

现在它工作正常

谢谢你们

# module - Play framework 2.1 不能使用自定义模块

> ID：15565344
> 
> 赞同：0
> 
> 时间：2013-03-22T07:53:51.120
> 
> 标签：module, dependencies, playframework-2.1

我无法使用自己创建的模块。我做的一切都像下面的描述：

[http://java.dzone.com/articles/writing-modules-play-2-get](http://java.dzone.com/articles/writing-modules-play-2-get)

但是有一些变化不应该对功能产生任何影响：我不更改项目结构，而是在不同的文件夹中创建单独的项目。我想我应该描述我使用和创建自己的模块的步骤，也许有人会看到我的错误：

我用 play new testapp (workspace/testapp) 创建了一个项目。然后我用 play new testmodul (workspace/testmodul) 创建了另一个项目。然后我去 testmodul 并删除路由文件和 application.conf 的内容。然后我用方法 test 创建了一个名为“Tester”的类。（一个简单的system.out）之后，我在testmodul-文件夹中执行“clean”、“compile”和“publish-local”。

据我了解，在 play 的本地存储库中发布的模块，每个想要使用该模块的应用程序都可以访问该模块的本地存储库版本。

现在我去 testapp 并在 Build.scala 中创建依赖项。之后，我转到 default-Application.class 并添加“Tester.test();”行。然后我执行依赖命令并尝试编译。

之后我得到错误，“找不到符号”。似乎 testapp 不知道 Tester.class ，这意味着 testapp 不知道模块。但我不知道为什么。

有人有想法吗？

编辑：也许我应该显示我的 testapp 的依赖配置：

```
val appDependencies = Seq(
    // Add your project dependencies here,
    javaCore
    ,javaJdbc
    ,javaEbean
    ,"testmodul" % "testmodul_2.10" % "1.0-SNAPSHOT"
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    // Add your own project settings here   
    resolvers += "Local Play Repository" at "file://C:/play-2.1.0/repository/local"   
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T22:25:54.910

更改此行

```
resolvers += "Local Play Repository" at "file://C:/play-2.1.0/repository/local" 
```

至

```
resolvers += "Local Play Repository" at "file://play-2.1.0/repository/local" 
```

只需删除 C:/ 。它对我有用。检查这个[http://www.objectify.be/wordpress/?p=363](http://www.objectify.be/wordpress/?p=363)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:14:50.423

我不确定为什么上面的解决方案不正确，但我找到了解决方案。我发现在名为“子项目”的播放框架“模块”的文档中，我发现了如何包含模块。（[http://www.playframework.com/documentation/2.1.0/SBTSubProjects](http://www.playframework.com/documentation/2.1.0/SBTSubProjects)）但我认为“全局”模块的其他方式也应该是可能的。

# javascript - couchdb 用户管理器 GUI

> ID：15565353
> 
> 赞同：1
> 
> 时间：2013-03-22T07:54:29.720
> 
> 标签：javascript, couchdb, cloudant

我目前正在使用托管在[cloudant](https://cloudant.com/)上的 couchdb （感谢 cloudant 的家伙！你们太棒了！）。我的数据库中有很多用户（在[这里](http://epos-couch.cloudant.com/epos-couch/_design/epos-couch/index.html)），现在我管理他们：我的 linux 机器上有一个脚本，它生成用户/传递 json 对象，就像这样

```
{
    "_id": "org.couchdb.user:MY_USER",
    "_rev": "1-7aXXXXXXXXXXXXXXXXXXXXXXXXXX2783",
    "name": "MY_USER",
    "type": "user",
    "roles": ["admin"],
    "password_sha": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    "salt": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
} 
```

（当然删除了真正的字符串并用“XXX ...”代替）。

然后我将此对象粘贴到 _user 数据库中，一切正常。

但是，由于经常删除、更新用户信息，我在徘徊是否有人为用户管理创建了 couchdb GUI。一些非常简单的东西，比如 phpmyadmin GUI：

![mysql GUI 用户管理器页面](../Images/42bd7ec9be727bec4bbc37abdb964268.png)

我用谷歌搜索并在 stackoverflow 周围搜索类似的东西，但一无所获。

类似的东西已经存在了吗？

（如果没有，你认为有什么特殊原因吗？Couchdb 很普遍，我认为我不是第一个不得不面对这个问题的人......）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:21:03.010

目前编辑和维护用户信息的最简单和常用的方法是使用名为 futon 的 couchdb admin gui。您可以访问它

`http://localhost:5984/_utils/database.html?_users`

虽然它不是一个理想的用户管理工具，但它可以完成工作。

我还没有看到一个很好的用户管理界面。这是个好主意。我们目前正在为 couchdb 开发下一个名为“fauxton”的管理 gui，我们将尝试使其更加用户友好。

# android - 在后退按钮上杀死 android 应用程序

> ID：15565358
> 
> 赞同：0
> 
> 时间：2013-03-22T07:55:04.980
> 
> 标签：android, android-tabhost, android-view, back-button

我在我的应用程序中使用标签。标签工作正常。一旦我点击选项卡，特定的活动就会出现在选项卡下。其中一个选项卡具有菜单功能，当我单击菜单选项卡时，菜单列表出现在选项卡下方。当我单击菜单列表时，我使用 View 在选项卡下显示活动。问题从这里开始，当我单击菜单列表并且活动出现后，我无法使用手机中的后退按钮。当我单击后退按钮时，它会杀死应用程序而不是返回菜单列表。下面是我的代码。

**选项卡活动**

```
public class NfcSurveyActivity extends TabActivity {

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        mAdapter.enableForegroundDispatch(this, mPendingIntent, mFilters,
                mTechLists);

        int profileCount = db.getContactsCount();
        if (profileCount <= 0) {
            Intent intent = new Intent(getApplicationContext(),
                    LoginActivity.class);
            startActivity(intent);
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        int profileCount = db.getContactsCount();
        if (profileCount <= 0) {
            Intent intent1 = new Intent(getApplicationContext(),
                    LoginActivity.class);
            startActivity(intent1);
        }

        Bundle extras = getIntent().getExtras();
        if (extras != null) {
            tabToDisplay = extras.getString("tab");
            if (tabToDisplay.equals("CAMERA")) {
                barcodeData = extras.getString("barcodeData");
            }
            extras.clear();
        }

        TabHost tabHost = getTabHost();

        // Home
        TabSpec tbspecHome = tabHost.newTabSpec("Home");
        tbspecHome.setIndicator("",
                getResources().getDrawable(R.drawable.tab_account_style));

        Intent iHome = new Intent(this, HomeActivity.class);
        tbspecHome.setContent(iHome);
        tabHost.addTab(tbspecHome);

        // History
        tabHost.addTab(tabHost
                .newTabSpec("Fun")
                .setIndicator("",
                        getResources().getDrawable(R.drawable.tab_fun_style))
                .setContent(
                        new Intent(this, NfcSurveyActivity.class)
                                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        if (tabToDisplay != null && tabToDisplay.equals("REDEEM")) {
            if (barcodeData != null && barcodeData.length() > 0) {

                tabHost.addTab(tabHost
                        .newTabSpec("Camera")
                        .setIndicator(
                                "",
                                getResources().getDrawable(
                                        R.drawable.tab_redeem_style))
                        .setContent(
                                new Intent(this, NfcSurveyActivity.class)
                                        .addFlags(
                                                Intent.FLAG_ACTIVITY_CLEAR_TOP)
                                        .putExtra("autoLoadBarcodeData",
                                                barcodeData)));

            }

            else {
                tabHost.addTab(tabHost
                        .newTabSpec("Camera")
                        .setIndicator(
                                "",
                                getResources().getDrawable(
                                        R.drawable.tab_redeem_style))
                        .setContent(
                                new Intent(this, NfcSurveyActivity.class)
                                        .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

            }

        } else {
            tabHost.addTab(tabHost
                    .newTabSpec("Camera")
                    .setIndicator(
                            "",
                            getResources().getDrawable(
                                    R.drawable.tab_redeem_style))
                    .setContent(
                            new Intent(this, NfcSurveyActivity.class)
                                    .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));
        }

        // tabHost.setCurrentTab(2);

        tabHost.getTabWidget().getChildAt(2).getLayoutParams().height = tabHost
                .getTabWidget().getChildAt(2).getLayoutParams().height + 19;

        // Search
        TabSpec tbspecSearch = tabHost.newTabSpec("Finder");
        tbspecSearch.setIndicator("",
                getResources().getDrawable(R.drawable.tab_finder_style));

        Intent iSearch = new Intent(this, NfcSurveyActivity.class);
        tbspecSearch.setContent(iSearch);
        tabHost.addTab(tbspecSearch);

        // Profile
        TabSpec tbspecProfile = tabHost.newTabSpec("Quit");
        tbspecProfile.setIndicator("",
                getResources().getDrawable(R.drawable.tab_quit_style));

        Intent iProfile = new Intent(this, NfcSurveyActivity.class);
        tbspecProfile.setContent(iProfile);

        tabHost.addTab(tbspecProfile);

        for (int i = 0; i <= 4; i++) {
            tabHost.getTabWidget()
                    .getChildTabViewAt(i)
                    .setBackgroundColor(
                            getResources()
                                    .getColor(android.R.color.transparent));

            if (i == 2) {
                tabHost.getTabWidget()
                        .getChildTabViewAt(i)
                        .setPadding(
                                tabHost.getTabWidget().getChildTabViewAt(i)
                                        .getPaddingLeft(),
                                tabHost.getTabWidget().getChildTabViewAt(i)
                                        .getPaddingTop(),
                                tabHost.getTabWidget().getChildTabViewAt(i)
                                        .getPaddingRight(), 20);
            }

        }

        if (tabToDisplay != null && tabToDisplay.length() > 0) {
            if (tabToDisplay.equals("CAMERA")) {
                tabHost.setCurrentTab(2);

            } else if (tabToDisplay.equals("HISTORY")) {
                tabHost.setCurrentTab(1);

            }

        }

        tabHost.setOnTabChangedListener(new OnTabChangeListener() {
            public void onTabChanged(String tabId) {
                NfcSurveyConfiguration.SelectedTab = tabId;
            }
        });
    }

} 
```

**菜单活动**

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.listview_item_row);

initList();

// We get the ListView component from the layout
ListView lv = (ListView) findViewById(R.id.listView);
simpleAdpt = new SimpleAdapter(this, planetsList,
        android.R.layout.simple_list_item_1, new String[] { "planet" },
        new int[] { android.R.id.text1 });

lv.setAdapter(simpleAdpt);
// React to user clicks on item
lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

    public void onItemClick(AdapterView<?> parentAdapter, View view,
            int position, long id) {

        TextView clickedView = (TextView) view;
        String menu = clickedView.getText().toString();
        if (menu.equalsIgnoreCase("Point History")) {
            View view1 = getLocalActivityManager().startActivity(
                    "ReferenceName",
                    new Intent(getApplicationContext(),
                            PointsHistory.class)
                            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                    .getDecorView();
            setContentView(view1);
        }
        else
        {
            View view1 = getLocalActivityManager().startActivity(
                    "ReferenceName",
                    new Intent(getApplicationContext(),
                            LoginActivity.class)
                            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                    .getDecorView();
            setContentView(view1);
        }

    }
});

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:15:58.117

您可以尝试添加 onkeydown 方法，然后尝试做您想做的事情

```
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    //Handle the back button
    if( keyCode == KeyEvent.KEYCODE_BACK && isTaskRoot()) 
    {
//ur code here to do the required step either to exit the app or stay in there
}

return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:49:59.113

尝试使用包含您调用的活动列表的 ActivityGroup，您需要 [在 TabActivity 中处理多个活动](http://nanostuffs.com/Blog/?p=607)。另请阅读[选项卡组活动](http://androidmaterial.blogspot.in/2011/04/how-to-us-tab-group-activity-in-android.html)

或者

您可以覆盖后退按钮并完成活动维护一个打开的活动列表，然后在背面按下使用开始活动打开活动，当列表结束时完成您的选项卡活动

也读过[这个](http://ericharlow.blogspot.in/2010/09/experience-multiple-android-activities.html)和[这个](http://www.gamma-point.com/content/android-how-have-multiple-activities-under-single-tab-tabactivity)链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:26:21.893

你可以用这种方式

```
public void onBackPressed() {

    }; 
```

当活动检测到用户按下返回键时调用。默认实现只是完成当前活动，但您可以覆盖它来做任何您想做的事情。

检查这个：[https ://stackoverflow.com/a/12171478/1168654](https://stackoverflow.com/a/12171478/1168654)

# sql - 如何检查字符串的某些部分是否与sql表中的列数据匹配

> ID：15565359
> 
> 赞同：1
> 
> 时间：2013-03-22T07:55:08.113
> 
> 标签：sql, .net, contains, sql-like

我想编写一个查询来检查用户提供的输入与我的表的列数据。我尝试使用 LIKE 和 CONTAINS 但它对我不起作用。例如，我的表格数据包含“Bar BQ Tonight”，如果用户输入“BBQ Tonight”，如何处理？我也为我的表启用了全文索引。我正在 Visual Studio 中使用 sql server 2005。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:03:26.637

一种处理方法是在您的表上创建单独的列，其中将包含**流行的搜索标签或关键字**，基于此您可以向用户显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:22:46.687

同义词和首字母缩略词是信息检索系统 (IR) 的挑战。或许实现一个小型的**首字母缩写词扩展系统**。首字母缩略词和扩展术语。

当用户输入此类单词时，您需要提供一些建议或扩展术语。就像在 Google 中做建议一样，或者您可以显示几个相似的术语作为查询的回报，让用户决定哪个是相关的。

正如我所设想的那样，您至少需要三个表，但取决于上下文。

1.  一个表包含停用词，因此您可以解析输入短语中的每个单词并删除所有停用词。
2.  然后在首字母缩略词表中搜索单个术语，如果首字母缩略词有多个定义，您可以将首字母缩略词替换为每个定义并将其传递回用户询问哪个是相关的。如果这是网络环境，则表示超链接列表。

# cascading - 级联（缓冲区）实现

> ID：15565366
> 
> 赞同：0
> 
> 时间：2013-03-22T07:55:25.470
> 
> 标签：cascading

我需要在级联 hadoop 中创建一个缓冲区。

假设我有字段：

> member_id,amountpaid,diadnosis_id,diagnosis_description,superGrouper_id,superGrouper_description,grouperId,grouperDescription

我需要

1.  `member_id`对来自和的字段进行分组`superGrouper_id`
2.  使用每个管道将这些信息发送到缓冲区
3.  缓冲区输出应该是：`member_id`，最高支付排序`superGrouper`，最高支付排序`grouperId`，最高支付`diagnosis_id`，以及它们的描述......

请帮我创建一个缓冲区。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:31:12.777

您不需要自定义缓冲区。使用 Cascading 的内置 Max 聚合器。[级联文档](http://docs.cascading.org/cascading/2.1/javadoc/cascading/operation/aggregator/Max.html)

然后你只需要在 GroupBy 之后运行 Max。

```
pipe = new GroupBy(pipe, new Fields("member_id", "superGrouper_id");
pipe = new Every(pipe, new Fields("amountpaid"), new Max(new Fields("max_paid")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T11:21:48.087

您可以执行以下操作：

```
pipe = new GroupBy(pipe, new Fields("member_id", "superGrouper_id"), new Fields("superGrouper", "grouperId", "")); 
pipe = new Every(pipe, FirstNBuffer(int n)); 
```

如果我错了，我很抱歉。你的问题不是很清楚。

# android - 与原生 android 和 html5 共享数据库（sqlite 错误没有这样的表）

> ID：15565367
> 
> 赞同：3
> 
> 时间：2013-03-22T07:55:25.637
> 
> 标签：android, html, database, sqlite, android-webview

我正在尝试创建一个与本机 android 和 html 共享数据库的应用程序。我初始化以下代码并为我的 webview 页面启用数据库。但是在 webview 页面上，当我更新数据库时，我没有得到这样的表（hybrid_user）。我不确定我在这里错过了什么。

**数据库**

```
public class DBHelper extends SQLiteOpenHelper{

private SQLiteDatabase helper;
private static final String DATABASE_NAME="hybrid_db";
private static final int SCHEMA_VERSION=1;
private static final String TAG = "DBHelper";

public DBHelper(Context context){
    super(context, DATABASE_NAME, null, SCHEMA_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    Log.i(TAG, "DBHelper");
    db.execSQL("CREATE TABLE hybrid_user (" +
            "tableid INTEGER PRIMARY KEY AUTOINCREMENT, " +
            "userid TEXT," +
            "password TEXT," +
            "mobile TEXT," +
            "createdate TIMESTAMP default current_timestamp);");
} 
```

**活动**

```
 webView = (WebView)findViewById(R.id.webView);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("file:///android_asset/www/index.html");
    webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    webView.getSettings().setDatabaseEnabled(true);
    webView.getSettings().setDatabasePath("/data/data/com.example.hybrid/hybrid_db");
    webView.getSettings().setDomStorageEnabled(true);
    webView.setWebViewClient(new WebViewClient(){

        @Override
        public void onPageFinished(WebView view, String url){
            webView.loadUrl("javascript:callFromActivity(\""+userid+"\")");
        }
    });

    webView.setWebChromeClient(new WebChromeClient(){

        public void onExceededDatabaseQuota(String url, String databaseIdentifier, 
                long currentQuota, long estimatedSize, long totalUsedQuota,
                WebStorage.QuotaUpdater quotaUpdater){
            quotaUpdater.updateQuota(204801);
        }
    }); 
```

**索引.html**

```
<script>
var hybrid_user = null;
    function errorHandler(transaction, error){
        alert('Error:'+error.message+' (Code '+error.code+')');
        return true;
    }
    window.onerror = errorHandler;
    try{
        if(window.openDatabase){
            var shortName = 'hybrid_db';
            var version = '1.0';
            var displayName = 'Hybrid Database';
            var maxSize = 204801;
            hybrid_user = openDatabase(shortName, version, displayName, maxSize);
            alert("alert: "+hybrid_user);
        }
        else{
            alert("Database is not supported");
        }           
    }
    catch(e){
        if(e == 2){
            alert("Invalid database version.");
        }
        else{
            alert("Unknown error "+e+".");
        }
        return;
    }

    function updateRecord(){
        hybrid_user.transaction(
                function(transaction){
                    transaction.executeSql("UPDATE hybrid_user SET mobile=? WHERE userid ='"+document.getElementById("userid")+"'", [mobileNum]);
                    alert("mobileNum:" +mobileNum);
                    alert("userid:" +document.getElementById("userid"));
        });
    }
</script>

<body>
<form>
    <fieldset>
        <legend>Hybrid Application</legend>
        <p>

            <label>UserName: </label> <p id="userid"></p>
        <p>
            <label>Mobile Number :</label>
            <input type = "text"
                        id = "mobileNum" />
        </p>
            <button type="button" 
            onclick="updateRecord()">Submit</button>    
                <div id="output"></div> 
    </fieldset>
</form>
</body> 
```

我`alert:[object Database]`从`alert("alert:" +hybrid_user);`. 但是我仍然收到 sqlite 错误，没有这样的表。`sqlite returned: error code = 1, msg = no such table:hybrid_user`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:52:42.033

你能试试这个： -

```
 webView.getSettings().getDatabasePath();

getDatabasePath() 
```

会给你默认的数据库路径

基本上它的`/data/data/package_name/databases/db_name`

并检查您的查询相关的东西，即打开数据库或更新

**更新**`index.html`：-我确定在您的资产文件夹中读取错误。

尝试这样的事情： -

```
web_view.loadDataWithBaseURL("file:///android_asset/", index.html, "text/html", "UTF-8",null); 
```

或者

```
wv.loadUrl("file:///android_asset/index.html"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:53:20.497

db 的路径不正确，您缺少“数据库”目录。
它应该是：`/data/data/com.example.hybrid/databases/hybrid_db`，
而不是：`/data/data/com.example.hybrid/hybrid_db`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T09:38:30.860

从 API 级别 19 开始，不推荐使用 WebSettings.setDatabasePath，这意味着不再有保证可以找到由 WebView 创建的数据库文件的方法。

我通常在 /data/data/PACKAGE_NAME/app_database/hybrid_db.db 中找到 db 文件

# android - 位图图像导致 OutOfMemoryError

> ID：15565370
> 
> 赞同：0
> 
> 时间：2013-03-22T07:55:32.240
> 
> 标签：android

从 android.below 中的 url 获取图像时出现 OutOfMemoryError 我提到了我的代码和异常。

```
ByteArrayOutputStream bais = new ByteArrayOutputStream();
 InputStream is = null; 
URL url = null; 
try { 
url = new URL(image); 
is = url.openStream (); 
byte[] byteChunk = new byte[4096]; // Or whatever size you want to read in at a time. 
int n; 
while ( (n = is.read(byteChunk)) > 0 )
 {
 bais.write(byteChunk, 0, n);
 } 
is.close(); 
bais.flush(); 
} catch (Exception e) { 
System.err.printf ("Failed while reading bytes from %s: %s", url.toExternalForm(), e.getMessage());
 e.printStackTrace ();
 bais = null; // Perform any other exception handling that's appropriate.
 } 
```

> 异常日志：为上述代码生成

```
 03-22 13:04:44.858: E/dalvikvm-heap(1528): Out of memory on a 13131140-byte allocation. 03-22 13:04:44.858: I/dalvikvm(1528):
> "Thread-180" prio=5 tid=25 RUNNABLE 03-22 13:04:44.858:
> I/dalvikvm(1528):|group="main" sCount=0 dsCount=0
> obj=0x415deed8self=0x378150 03-22 13:04:44.858: I/dalvikvm(1528): |
> sysTid=1572 nice=0 sched=0/0 cgrp=[fopen-error:2]handle=1723384 03-22
> 13:04:44.858: I/dalvikvm(1528): | schedstat=( 765401358 258475984 4706
> ) utm=41 stm=35 core=0 03-22 13:04:44.858: I/dalvikvm(1528): at
> java.io.ByteArrayOutputStream.expand(ByteArrayOutputStream.java:~91)
> 03-22 13:04:44.858: I/dalvikvm(1528): at
> java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:201)
> 03-22 13:04:44.858: I/dalvikvm(1528): at
> com.lukup.util.FetchImage.run(FetchImage.java:46) 03-22 13:04:44.858:
> W/dalvikvm(1528): threadid=25: thread exiting with uncaught
> exception(group=0x409df1f8) 03-22 13:04:44.868:
> E/AndroidRuntime(1528): FATAL EXCEPTION: Thread-180 03-22
> 13:04:44.868: E/AndroidRuntime(1528): java.lang.OutOfMemoryError 03-22
> 13:04:44.868: E/AndroidRuntime(1528): at
> java.io.ByteArrayOutputStream.expand(ByteArrayOutputStream.java:91)
> 03-22 13:04:44.868: E/AndroidRuntime(1528): at `enter code
> here`java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:201)
> 03-22 13:04:44.868: E/AndroidRuntime(1528): at
> com.lukup.util.FetchImage.run(FetchImage.java:46)
>   -- 
```

以上是异常日志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:00:05.617

您正在尝试分配 13 MB。有些手机不会让应用程序使用那么多内存，忘记 1 分配 - 即使是许多新手机也会失败。尝试更频繁地刷新输出流，这可能是因为它很愚蠢并且为整个输出保留内存直到它被刷新。

# javascript - datatables.net 中的复杂标头

> ID：15565371
> 
> 赞同：2
> 
> 时间：2013-03-22T07:55:40.643
> 
> 标签：javascript, jquery, html, datatables

我正在使用 datatables.net 的表插件。我遇到了复杂标题列的问题，并且在使用它时出现以下错误。

> 未捕获的类型错误：无法在 jquery.dataTables.js 第 820 行调用未定义的方法“fnSetData”

这个 html 代码（实际上这是一个模板）

```
 <!-- BEGIN:main -->
<table id='myTable' style='width: 100%'>
    <thead>
        <tr>
            <th rowspan="2"></th>
            <th colspan="4">Contract Details</th>
            <th colspan="4">Delivery</th>
            <th rowspan="2">Basis Terminal Month</th>
            <th colspan="5">Fixed</th>
            <th colspan="4">Unfixed</th>
            <th colspan="3">Trigger</th>
            <th colspan="2">Payment</th>
            <th colspan="2" rowspan="2"></th>
        </tr>
        <tr>
            <th>Contract Ref</th>
            <th>Supplier/Buyer</th>
            <th>Grade</th>
            <th>Days Pending</th>
            <th>Tons</th>
            <th>Delivered</th>
            <th>Balance</th>
            <th>Status</th>
            <th>Tons</th>
            <th>Contract Price</th>
            <th>Contract FOB Price</th>
            <th>Mark To Market Price</th>
            <th>Outright Exposure FOB</th>
            <th>Tons</th>
            <th>Contract FOB Diff</th>
            <th>Mark To Market FOB Diff</th>
            <th>Differential Exposure FOB</th>
            <th>Strike Price</th>
            <th>Variance</th>
            <th>Days</th>
            <th>Due Date</th>
            <th>Days Late</th>
        </tr>
    </thead>
    <tbody>
        <!-- BEGIN:row -->
        <tr id="row_{id}">
            <td>{count}</td>
            <td>{ref_number}</td>
            <td>{supplier}</td>
            <td>{grade}</td>
            <td class="formatNumber alignRight">{pending_day}</td>
            <td class="formatNumber alignRight">{contract_tons}</td>
            <td  class="formatNumber alignRight">{delivered_tons}</td>
            <td  class="formatNumber alignRight">{pending_tons}</td>
            <td><input type="checkbox" id="rd_{id1}" value="{delivery_status}" {checked}/></td>
            <td class="alignCenter">{terminal_month}</td>
            <td  class="formatNumber alignRight">{fixed_tons}</td>
            <td  class="formatNumber alignRight">{contract_price}</td>
            <td  class="formatNumber alignRight">{contract_fob_price}</td>
            <td  class="formatNumber alignRight">{market_price}</td>
            <td  class="formatNumber alignRight">{outright_fob}</td>
            <td  class="formatNumber alignRight">{unfixed_tons}</td>
            <td  class="formatNumber alignRight">{contract_fob_diff}</td>
            <td  class="formatNumber alignRight">{market_fob_diff}</td>
            <td  class="formatNumber alignRight">{differential_fob}</td>
            <td  class="formatNumber alignRight">{strike_price}</td>
            <td  class="formatNumber alignRight">{variance}</td>
            <td  class="formatNumber alignRight">{trigger_days}</td>
            <td>{payment_due_date}</td>
            <td  class="formatNumber alignRight">{payment_days_late}</td>
            <td><input type="button" value="Detail" onclick="ContractDetail('{id2}')"/></td>
            <td><input type="button" value="Traffic" onclick="trafficMovement('{id3}')"/></td>
        </tr>
        <!-- END:row -->
    </tbody>
</table>
<input type="hidden" id="action" name="action" value=""/>
<input type="hidden" id="contract_id" name="contract_id" value=""/>
<!-- END:main --> 
```

这是我调用数据表的javascript

```
$(document).ready(function() {
    $("#myTable").dataTable();
}); 
```

我不知道是什么问题，我在 datatables.net 中看到他们说它通过调用 datatable() 支持复杂的标题列。我认为我的问题来自 html 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T19:12:51.337

问题出在您为按钮添加的最后两列的标题中。您将其声明为`rowspan="2"`and`colspan="2"`并且 DataTables 将其解释为单列。

只需更改

```
<th colspan="2" rowspan="2"></th> 
```

成为：

```
<th rowspan="2"></th>
<th rowspan="2"></th> 
```

你会很高兴去的。

# wpf - WPF 控件集类型作为依赖属性

> ID：15565372
> 
> 赞同：-1
> 
> 时间：2013-03-22T07:55:55.923
> 
> 标签：wpf

有一些代码：

```
<DataTemplate>
     <StackPanel Orientation="Horizontal">
          <Rectangle Fill="Blue"></Rectangle>
          <TextBlock Text="test"></TextBlock>
     </StackPanel>
</DataTemplate> 
```

我希望能够设置任何类型的形状，而不是矩形，例如椭圆。

想要类似的东西：

```
<DataTemplate>
     <StackPanel Orientation="Horizontal">
          <Shape Fill="Blue" ShapeType={Binding DefaultShapeType}></Shape>
          <TextBlock Text="test"></TextBlock>
     </StackPanel>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:33:00.337

您通常会使用[Path](http://msdn.microsoft.com/en-us/library/system.windows.shapes.path%28v=vs.110%29.aspx)并通过视图模型属性为其[Data](http://msdn.microsoft.com/en-us/library/system.windows.shapes.path.data.aspx)属性提供[Geometry ：](http://msdn.microsoft.com/en-us/library/system.windows.media.geometry.aspx)

```
<DataTemplate>
    <StackPanel Orientation="Horizontal">
        <Path Fill="Blue" Data="{Binding SomeGeometry}" />
        <TextBlock Text="test" />
    </StackPanel>
</DataTemplate> 
```

有一些基本的几何图形，如 LineGeometry、RectangleGeometry 和 EllipseGeometry，还有一些复杂的几何图形，如 StreamGeometry 或 PathGeometry，可以让您绘制几乎任何类型的形状。

椭圆或矩形等特殊形状也使用这些几何图形来定义它们的视觉外观。

# python - python文本小部件获取方法

> ID：15565384
> 
> 赞同：1
> 
> 时间：2013-03-22T07:56:53.210
> 
> 标签：python, text, widget, tkinter

我的 python Tkinter 脚本中有一个文本小部件，我正在尝试获取用户输入的值。我的目的是将文本小部件中的数据与脚本中的其他值（即 x、y、z）一起写入 txt 文件（faultlog.txt），作为单行，以半列分隔。这是我尝试过的。

```
...
text=Text(width=30,height=1)
text.place(x=15,y=75)
data=text.get(1.0,END)

lines=[]
lines.append('{};{};{};{} \n'.format(data,x,y,z))
faultlog=open("faultlog","a")
faultlog.writelines(lines)
faultlog.close()
... 
```

python没有在文本文件中给我单行输出，而是将其写入txt文件（假设用户输入的数据是“abcdefgh”）

```
abcdefgh
;x;y;z 
```

只是为了说清楚，这就是我想要的

```
abcdefgh;x;y;z 
```

我做错什么了？我希望问题足够清楚，我是初学者，所以请让答案简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:25:27.507

当您获得小部件的所有文本时，最后还会包含一个“\n”。您可以像这样删除最后一个字符：

```
data=text.get(1.0,END)[:-1] 
```

请注意，这始终独立于文本长度的长度：

```
>>> "\n"[:-1]
''
>>> ""[:-1]
'' 
```

# cocos2d-iphone - cocos2d中hud层中的CCControlButton

> ID：15565385
> 
> 赞同：0
> 
> 时间：2013-03-22T07:56:53.007
> 
> 标签：cocos2d-iphone, hud

从我的角度来看，这可能是一个使用错误，但我无法让 CCControlButton 在 hud 层内捕捉任何触摸。我以这种方式实现 HUD 层：[http](http://www.raywenderlich.com/4666/how-to-create-a-hud-layer-with-cocos2d) : //www.raywenderlich.com/4666/how-to-create-a-hud-layer-with-cocos2d 在主游戏层中，启用了触摸（self.touchEnabled = YES; )

在 hudlayer.m 本身中，我只是添加了一个新的 CCControlButton 作为子项。像这样的东西：

```
CCLabelTTF* titleRight = [CCLabelTTF labelWithString:@"→" fontName:@"Helvetica" fontSize:FONTSIZE];
titleRight.color = ccRED;
CCControlButton* buttonRight = [CCControlButton buttonWithLabel:titleRight backgroundSprite:[CCScale9Sprite spriteWithFile:@"switch-mask.png"]];
buttonRight.position = ccp(ORIGIN.x + SIZE.width, ORIGIN.y);
buttonRight.userObject = [NSValue valueWithCGPoint:ccp(1, 0)];
[buttonRight addTarget:self action:@selector(actionPan:) forControlEvents:CCControlEventTouchUpInside];
[self addChild:buttonRight]; 
```

使用用 CCMenu 创建的按钮是可行的。

# android - ActivityNotFoundException，图像捕获？

> ID：15565390
> 
> 赞同：0
> 
> 时间：2013-03-22T07:57:26.327
> 
> 标签：android, android-camera, activitynotfoundexception

我发布了一个应用程序，用户可以在其中拍照。我这样做是为了拍照：

```
File file = new File( _path );
Uri outputFileUri = Uri.fromFile( file );   
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );      
startActivityForResult( intent, 0 ); 
```

我还添加了这个权限来显示：

```
<uses-permission android:name="android.permission.CAMERA" /> 
```

`Android2.3.5`我在and上测试了我的应用程序`Android3.0`，它工作正常。但是当我在 上运行我的应用程序时`Android4.0.3`，它崩溃了：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.media.action.IMAGE_CAPTURE (has extras) } 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T08:08:48.217

有几件事可能发生

1.  设备中可能没有任何摄像头
2.  设备中没有 sd 卡

您的情况是否符合上述任何一项？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T08:18:44.267

检查您的

1.平板电脑有摄像头（如果您使用平板电脑）。2.手机有摄像头 3.没有安装SD卡。

将以下内容添加到清单中。

```
 <uses-feature android:name="android.hardware.camera" /> 
```

将阻止从 google play 下载应用程序。 [http://developer.android.com/google/play/filters.html](http://developer.android.com/google/play/filters.html)

还要检查[http://developer.android.com/guide/topics/manifest/uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

检查您的设备是否有摄像头。

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.main);

    Context context = this;
    PackageManager packageManager = context.getPackageManager();

    // if device support camera?
    if (packageManager.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        //yes
        Log.i("camera", "This device has camera!");
    }else{
        //no
        Log.i("camera", "This device has no camera!");
    }

}
} 
```

# matlab - 是否可以有一个工作区变量在清除调用中持续存在？

> ID：15565396
> 
> 赞同：14
> 
> 时间：2013-03-22T07:57:51.730
> 
> 标签：matlab

假设我运行一个脚本`X.m`，它创建了一堆变量，我想保存一个名为 的变量`Z`，所以我写了`myVar = Z`.

然后我`clear`在提示符下输入，然后运行`Y.m`​​.

有没有办法让`myVar`我在调用时不会与所有其他变量一起消失`clear`？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-22T08:02:09.317

您可以使用[`clearvars`](http://www.mathworks.com/help/matlab/ref/clearvars.html)从工作区清除除特定变量之外的所有变量。从`clearvars`文档：

> clearvars -except v1 v2 ... 清除所有变量，除了 -except 标志后面指定的变量。在变量名称中使用通配符“ *”以排除与模式匹配的变量被清除。clearvars -except X*清除当前工作空间中的所有变量，例如以 X 开头的变量除外。使用 clearvars -except 保留您想要的变量并删除所有其他变量。

所以，你需要输入

```
clearvars -except myVars 
```

而不是`clear`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T08:28:33.127

在 MATLAB 文件交换中有[Keep](http://www.mathworks.co.uk/matlabcentral/fileexchange/7129-keep4 "保持")，它可以让您清除除您希望保留的某些变量之外的所有内容。

# visual-studio-2010 - Visual Studios Express - 更改调试输出目录

> ID：15565397
> 
> 赞同：4
> 
> 时间：2013-03-22T07:58:09.657
> 
> 标签：visual-studio-2010, visual-studio

有没有办法让 VS 项目将调试 EXE 构建到 bin/debug 以外的目录？

我发现了这个：http: [//msdn.microsoft.com/en-us/library/ms165410%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms165410%28v=vs.80%29.aspx)

但是，这仅适用于 RELEASE，不适用于调试。

更新：

我没有提到这是针对 Express 版本，而不是完整版本。

对于其他想要做同样事情的人，方法如下：

*   打开你的“.csproj”文件。
*   查找定义调试构建过程的元素“PropertyGroup”。
*   然后，在里面你会发现另一个名为“OutputPath”的元素。只需将其文本的值更改为您希望调试输出到的目录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T08:00:55.387

要更改构建输出目录：

```
On the Project menu, click Properties.
Click the Build tab.
Click the Browse button next to the Output path box and select a new build output directory. 
```

[MSDN：更改构建输出目录](http://msdn.microsoft.com/en-IN/library/ms165410)

![更改调试目录](../Images/e16f67fc897d12144875eae51917a24c.png).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:41:51.960

The Output path is stored in the .cproj file. One for each configuration.

Open ur *project_Name.csproj* in any editor (say notepad)

**For Debug:**

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
    .....
    <OutputPath>myOutput\</OutputPath>

</PropertyGroup> 
```

**Similarly For Release:**

```
 <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
    ...
     <OutputPath>bin\Release\</OutputPath>
</PropertyGroup> 
```

You could try manually editing the OutputPath.

The Output Path can take both Relative and Absolute paths.

**Note**: The *Relative* OutputPath should be *relative to your project directory* (project_Name.csproj) .

# c++ - 通用 C++ 库，无异常和 RTTI

> ID：15565400
> 
> 赞同：0
> 
> 时间：2013-03-22T07:58:33.773
> 
> 标签：c++

你们中的任何人都可以推荐一个通用 C++ 库，该库旨在无异常和 RTTI 工作。

我希望该库包含标准库中存在的许多相同功能，并且对容器、算法和流特别感兴趣。

我确实知道 boost 和标准库都具有使它们无异常编译的功能，但是它们的设计并不是为了在这种环境中正常工作。我相信这两个库都会断言而不是抛出异常。

该库应该在 Linux 上运行，并且可以移植到任何 posix 平台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:00:59.550

标准库实现在没有 RTTI 和异常支持的情况下也应该能很好地工作。我至少可以确认 GCC 4.x 实现确实如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:05:31.103

如果您的标准库实现在没有 RTTI 或异常的情况下无法工作，请获取不同的实现。

否则，QtCore 以自己的方式实现标准库中的几乎所有内容，以及 C++03/C++11 标准库中没有的一堆其他东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T09:17:09.900

也许[uCLibc++](http://cxx.uclibc.org/index.html)是一种替代方案，至少它的特点之一是缺乏异常/RTTI。

[编辑：抱歉，嵌入式 C++](http://www.caravan.net/ec2plus/)似乎更适合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:17:52.520

推荐以下项目

对于通用库
[Poco 库](http://pocoproject.org/) // 确实使用异常
[COID C++ 对象服务网络库](https://code.google.com/p/coid/)// 确实使用异常
[COID 文档](http://coid.sourceforge.net/)

对于 UI 和框架（开源）
[Qt](http://qt.digia.com/)
[WxWidgets](http://www.wxwidgets.org/)

# javascript - 在 kendo dataviz 图表本地数据绑定中，JSON 数据值被泄露？

> ID：15565403
> 
> 赞同：-1
> 
> 时间：2013-03-22T07:58:48.637
> 
> 标签：javascript, kendo-ui, kendo-dataviz

我使用 Kendo ui dataviz 创建了一个柱形图。在我的程序中，我要将本地 Javascript 数组变量数据绑定到图表数据源。JSON 数据像“3”“9”“6”一样被“396”分割。我不知道为什么会这样。我的源代码受到打击。请检查并请给出解决方案。

**资源：**

```
/**************Variable Declaration**********************************/
var eligibilityData = new Array();
eligibilityData = {
    mem_status: {
        a: 396, b: "56", c: "1125", d: "8423"
    }
};

/**************Create Chart**********************************/
function createBarChart(eligibilityData) {
    /****** Issue: A value is 396 but it spilted into "3","9","6"************/
    $("#Chart1").kendoChart({
        theme         : $(document).data("kendoSkin") || "default",
        dataSource    : {
            data: JSON.stringify(eligibilityData.mem_status.a),
        },
        seriesDefaults: { type: "column", },
        series        : [
            { field: "a", name : "A" }
        ],
        tooltip       : { visible: true, },
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:36:18.887

本地数据应作为数组传递。无需调用 JSON.stringify

```
data: [eligibilityData.mem_status] 
```

请参阅：[http ://docs.kendoui.c​​om/api/framework/datasource#configuration-data-Array](http://docs.kendoui.com/api/framework/datasource#configuration-data-Array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:45:00.337

`JSON.stringify`不符合您的预期。你这句话真正做的是：

1.  它获取`number`396 并将其转换为`string`.
2.  将 a`string`转换为每个元素一个字符的 an `array`。

不确定您定义的方式`DataSource`（为什么您想要 a`DataSource`只有一个元素）但如果这确实是您想要的，您可以尝试：

```
dataSource    : {
    data: [eligibilityData.mem_status.a]
}, 
```

或者

```
dataSource    : {
    data: [eligibilityData.mem_status]
}, 
```

# jsf - JSF portlet 为不同的环境生成不同的 Id

> ID：15565404
> 
> 赞同：0
> 
> 时间：2013-03-22T07:59:00.030
> 
> 标签：jsf, primefaces, liferay-6

我正在创建一个动态表单，它根据单选按钮的选择隐藏/取消隐藏字段。我正在使用下面给出的普通 javascript 函数，该函数在我的门户环境中运行良好（id 是我通过查看源获得的 JSF id）。

```
 function printHiddenValue(){
         alert("hello");
       alert(document.getElementById('A1938:j_idt4:create-ticket:hiddenId').value); 
       if(document.getElementById('A1938:j_idt4:create-ticket:j_idt19:0').checked){
           alert("incident sellected")
       } else
           {
           alert("change sellected")

           }

    } 
```

但是当我在不同的环境中部署战争时失败，因为门户环境生成了不同的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:06:40.987

您不应该依赖动态 id，不仅是 id 的一部分，而且如果您更改页面的结构，`A1938`也可能会发生变化。`j_idt4`您应该将 id 分配给 component `j_idt4`，并且对于第一部分，您可以使用 EL`#{facesContext.externalContext.response.namespace}`来获取 portlet 的命名空间：

```
document.getElementById('#{facesContext.externalContext.response.namespace}:j_idt4:create-ticket:hiddenId') 
```

# jquery - XMLHTTPRequest 和 HTTP“Content-Location”标头

> ID：15565406
> 
> 赞同：0
> 
> 时间：2013-03-22T07:59:07.113
> 
> 标签：jquery, http-headers, xmlhttprequest

我异步运行 XMLHTTPRequest (true) 以下载一些大图像，并基于 Content-Location 信息，即图像文件名，我的脚本知道它应该放置哪个 < IMG > 标签。

如果我没有在 url 中指定文件扩展名，这将有效。如果我将完整的文件名 + 图像的扩展名放在 url GET 中，Web 服务器将不会回复 Content-Location。

如何强制 Web 服务器始终向我返回 Content-Location？

谢谢哈洛曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:07:38.543

> 如何强制 Web 服务器始终向我返回 Content-Location？

你没有。如果服务器不发送该标头，则内容在请求的 URL 上可用。

# android - 如何正确删除保留的实例片段

> ID：15565408
> 
> 赞同：9
> 
> 时间：2013-03-22T07:59:25.473
> 
> 标签：android

目前，我想在配置更改期间保留昂贵的数据结构。我选择不使用`Bundle`来处理它，因为昂贵的数据结构不可打包。

因此，我使用一个非 UI 片段（称为**RetainInstanceFragment**），用它`setRetainInstance(true)`来保存数据结构。

```
public class RetainInstanceFragment extends Fragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Creating expensive data structure
        expensiveDataStructure = CreateExpensiveDataStructure();

        // Tell the framework to try to keep this fragment around
        // during a configuration change.
        setRetainInstance(true);
    }

    public ExpensiveDataStructure expensiveDataStructure = null;
} 
```

UI Fragment（称为**UIFragment**）将从`RetainInstanceFragment`. 每当在 上发生配置更改时，`UIFragment`总是`UIFragment`会在决定创建新的.`RetainInstanceFragment``FragmentManager``RetainInstanceFragment`

示例代码如下。

```
public class UIFragment extends SherlockListFragment
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        FragmentManager fm = getFragmentManager();

        // Check to see if we have retained the worker fragment.
        retainInstanceFragment = (RetainInstanceFragment)fm.findFragmentByTag("data");

        // If not retained (or first time running), we need to create it.
        if (retainInstanceFragment == null) {
            retainInstanceFragment = new RetainInstanceFragment();
            fm.beginTransaction().add(watchlistArrayFragment, "data").commit();
        } else {
            // We can re-use retainInstanceFragment.expensiveDataStructure even
            // after configuration change.
        }
    }
} 
```

但是，有一个问题。每当我销毁旧`UIFragment`的并用新的替换它时`UIFragment`，**我希望旧的`RetainInstanceFragment`也会被销毁。**这是我如何破坏和创造新的`UIFragment`

```
public class MyFragmentActivity extends SlidingFragmentActivity    
    // Being triggered when there is different menu item in sliding menu being
    // selected.
    public void selectActiveContent(Country country) {
        Fragment fragment = new UIFragment(country);
        getSupportFragmentManager().beginTransaction().replace(R.id.content, fragment).commitAllowingStateLoss();
    } 
```

**但旧`RetainInstanceFragment`的永远不会被摧毁。**

我的猜测是，也许我忘记在`UIFragment`. 因此，我添加以下代码

## UIFragment

```
@Override
public void onDetach() {
    super.onDetach();
    // To differentiate whether this is a configuration changes, or we are
    // removing away this fragment?
    if (this.isRemoving()) {
        FragmentManager fm = getFragmentManager();
        fm.beginTransaction().remove(retainInstanceFragment).commit();
    }
} 
```

但是，它并不总是有效。我执行了几次滑动菜单点击。

```
1\. selectActiveContent() -> Create new UIFragment and new RetainInstanceFragment
2\. selectActiveContent() -> Create new UIFragment, but re-use previous RetainInstanceFragment. (Wrong behavior)
3\. selectActiveContent() -> Create new UIFragment, and new RetainInstanceFragment.
4\. selectActiveContent() -> Create new UIFragment, but re-use previous RetainInstanceFragment. (Wrong behavior) 
```

知道如何正确删除保留的实例片段吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T09:28:47.583

正如@Luksprog 所建议的，以下方法有效。**但是，它仍然没有解释为什么之前的清理工作`onDetach`不起作用。**如果有人能解释为什么这个解决方案有效而以前没有，我将非常感激。:)

## UIFragment

```
@Override
public void onDetach() {
    super.onDetach();
}

public void cleanupRetainInstanceFragment() {
    FragmentManager fm = getFragmentManager();
    fm.beginTransaction().remove(this.retainInstanceFragment).commit();
} 
```

## 我的片段活动

```
public class MyFragmentActivity extends SlidingFragmentActivity    
    // Being triggered when there is different menu item in sliding menu being
    // selected.
    public void selectActiveContent(Country country) {

        // *******************************************
        // Solution suggested by @Luksprog. It works!
        // But I have no idea why it works and previous doesn't work...
        // *******************************************
        Fragment oldFragment = getSupportFragmentManager().findFragmentById(R.id.content);
        if (oldFragment instanceof UIFragment) {
            ((UIFragment)oldFragment).cleanupRetainInstanceFragment();
        }

        Fragment fragment = new UIFragment(country);
        getSupportFragmentManager().beginTransaction().replace(R.id.content, fragment).commitAllowingStateLoss();
    } 
```

* * *

## （已编辑）@Luksprog 的有用评论

> 片段交易不会立即进行。我的假设是在 onDetach() 回调中执行该事务不会在 UI 片段的替换事务完成之前删除保留片段实例，因此您的新 UI 片段仍将看到保留片段实例仍然可用，因此它不会创建新的一。您之前的方法不符合 Fragments 框架的精神，其中 Fragment 不知道其他 Fragment，并且 Activity 管理所有这些 Fragment，因为它对整体应用程序状态了解更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T07:38:02.967

我认为您可以从片段事务中删除片段。

```
 if (mWorkFragment != null) {
              fm.beginTransaction().remove(mWorkFragment).commitAllowingStateLoss();
            } 
```

# android - 如何让我的 JSON 进入 android listview？

> ID：15565410
> 
> 赞同：1
> 
> 时间：2013-03-22T07:59:28.630
> 
> 标签：android, json, parsing, listview

我是一名新程序员，我正在制作一个应用程序，它可以将数据从 MYSQL 获取到 php，然后在 android 上显示。我一直在努力寻找解决方案，但到目前为止我所看到的教程似乎都不适合我，我只设法将 json 中的一个对象放入单个 textview 中。但我真正需要的是让数据显示在列表视图的各个行上。

这是我的 JSON 输出，

```
 [{"id":"1","name":"darrel","password":"pass1234"},{"id":"2","name":"garrett","password":"important"},{"id":"3","name":"neoys","password":"yseniopass"},{"id":"4","name":"john","password":"mikel123"},{"id":"5","name":"owen","password":"mike4l"}] 
```

和我的 java 代码，它只让一个用户显示在 textview 上。

```
 package com.darre.jsonreader;

import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.app.Activity;
import android.app.ListActivity;
import android.os.Build;
import android.os.Bundle;
import android.os.StrictMode;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

@TargetApi(Build.VERSION_CODES.GINGERBREAD)
public class Users extends ListActivity {

    /** Called when the activity is first created. */

    @TargetApi(Build.VERSION_CODES.GINGERBREAD)
    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //listView.setOnItemClickListener(new OnItemClickListener() {
        //  public void onItemClick(AdapterView<?> parent, View view,
        //          int position, long id) {
                // When clicked, show a toast with the TextView text
        //      Toast.makeText(getApplicationContext(),
            //  ((TextView) view).getText(), Toast.LENGTH_SHORT).show();

        if (android.os.Build.VERSION.SDK_INT > 9) {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);

        }
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://172.30.54.153/databases/");
        TextView textView = (TextView)findViewById(R.id.textView1);

        ListView listview = (ListView)findViewById(R.id.listView1);
  try {

   HttpResponse response = httpclient.execute(httppost);
   String jsonResult = inputStreamToString(response.getEntity().getContent()).toString();
   JSONArray mArray = new JSONArray(jsonResult);
   for (int i = 0; i < mArray.length(); i++) {
       JSONObject object = mArray.getJSONObject(i);

      String name = object.getString("name");
     String password = object.getString("password");
      textView.setText(name + " - " + password);

  }
   } 
  catch (JSONException e) {
   e.printStackTrace();
  } 
  catch (ClientProtocolException e) {
   e.printStackTrace();
  } 
  catch (IOException e) {
   e.printStackTrace();
  }

       } 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:02:35.347

如果你想使用 a `ListView`... 那么你应该将你`JSON`的文件解析成某种数据结构，比如 List 或 an `ArrayList`，然后 n 使用适配器来填充`ListView`数据。

**这是`ListView`适配器的示例：**

```
 private class MySecondAdapter extends ArrayAdapter<MiniTask>
{   
    private ArrayList<MiniTask> list;

    public MySecondAdapter(Context context, int textViewResourceId, ArrayList<MiniTask> miniTaskList) 
    {
        super(context, textViewResourceId, miniTaskList);
         this.list = new ArrayList<MiniTask>();
         this.list.addAll(miniTaskList);
    }

    public View getView(final int position, View convertView, ViewGroup parent)
    {
        miniTask = miniTaskList.get(position);
        ViewHolder holder = new ViewHolder();
        {
            LayoutInflater inflator = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflator.inflate(R.layout.check_list_item_new, null);

            holder.title = (TextView) convertView.findViewById(R.id.tvItemTitle);
            holder.commentsPicturesButton = (ImageView) convertView.findViewById(R.id.iAddCommetOrPicture);
            holder.commentsPicturesButton.setTag(position);
            holder.commentsPicturesButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) 
                {
                     Intent intent = new Intent(getApplicationContext(), PicturesAndCommentsActivity.class);
                     intent.putExtra(TasksListActivity.KEY_ID, task.getId());
                     intent.putExtra("mini_task_text", miniTask.getTitle());
                     startActivity(intent);
                }
            });
            holder.selected = (CheckBox) convertView.findViewById(R.id.cbCheckListItem);
            holder.selected.setTag(position);
            holder.selected.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v)
                {    
                    {                               
                        Log.d(TAG, "pressed the checkbox: " + v.getId() + " in position: " + position + " tag: " +v.getTag() +" and item from array: " + miniTaskList.get(position) );
                        CheckBox checkbox = (CheckBox) v;
                        miniTaskList.get(position).setSelected(checkbox.isChecked());   
                        numOfCheckedMiniTasks = 0;
                        for(int i=0;i<miniTaskList.size();i++)
                        {
                             miniTask = miniTaskList.get(i);
                             if(miniTask.isSelected())
                             {
                                numOfCheckedMiniTasks ++;
                             }
                        }
                        int percent = (int)(numOfCheckedMiniTasks * 100.0f) / miniTaskList.size();
                        Log.d(TAG, "the percentage is: " +percent);
                        tasksRepository.get(tasksRepository.indexOf(task)).setMiniTasksPercentageComplete(percent);
                    }
                }
            });
        }

        holder.title.setText(miniTask.getTitle());
        holder.selected.setChecked(miniTask.isSelected());
        return convertView;
    }
} 
```

查看本教程以获取更多信息：

[http://cyrilmottier.com/2012/02/16/listview-tips-tricks-5-enlarged-touchable-areas/](http://cyrilmottier.com/2012/02/16/listview-tips-tricks-5-enlarged-touchable-areas/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:06:10.613

**您必须创建 ListView 适配器：**

把它放在你的代码中：

```
private String[] listArr;
public ArrayList<String> ary_name = new ArrayList<String>();

try {

   HttpResponse response = httpclient.execute(httppost);
   String jsonResult = inputStreamToString(response.getEntity().getContent()).toString();
   JSONArray mArray = new JSONArray(jsonResult);
   for (int i = 0; i < mArray.length(); i++) {
       JSONObject object = mArray.getJSONObject(i);

      String name = object.getString("name");
     String password = object.getString("password");
      textView.setText(name + " - " + password);

    ary_name.add(name);

  }

    listArr = new String[ary_name.size()];
    listArr = ary_name.toArray(listArr);

MyArrayAdapter adapter = new MyArrayAdapter(this, listArr);
        listView.setAdapter(adapter);

public class MyArrayAdapter extends ArrayAdapter<String> {

        Activity context;
        String[] listArr;

        private TextView btnchkout;

        // private final integer[] image;

        public MyArrayAdapter(Activity context, String[] objects) {
            super(context, R.layout.custmlayout, objects);
            // TODO Auto-generated constructor stub
            this.context = context;
            listArr = objects;

        }

        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub

            LayoutInflater inflater = (LayoutInflater) getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
            View view = inflater.inflate(R.layout.custmlayout, null, true);

            TextView textView = (TextView) view.findViewById(R.id.txtTicketNo);
            textView.setText(listArr[position]);

            return view;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:11:19.647

您可以阅读本教程，它解释了实现它的方法，第一个是“直接”列表适配器，第二个是自定义列表的方法。

[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

此外，您不应该使用 JSON 数据，首先，您必须为每个项目创建一个对象，然后将其与某种列表（例如 ArrayList）分组。

# javascript - 如何在 jquery cookie 的帮助下在下拉选择框中选择一个值

> ID：15565411
> 
> 赞同：0
> 
> 时间：2013-03-22T07:59:35.707
> 
> 标签：javascript, jquery, cookies

我正在尝试将选择框值存储在我的 cookie 中。

用户点击“默认链接”，然后应在 cookie 中设置所选值。当他们打开我的 URL 时，默认选择的值应该显示它们。

为此，我编写了以下代码。但我不知道如何检索提交的名为“语言”的 cookie。

**我的疑问**：如何在我的下拉列表中将当前提交的 cookie 值显示为默认选择值？

请帮忙。

```
 <html>
        <head> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>

    <script>
        $(document).ready(function(){ 
            $('#continue').click(function() {
                 var singleValues = $("#select_letter").val();
                $.cookie("language", singleValues);
            })
        });
    </script>  
        </head>
        <body> 
            <select id='select_letter'>
                <option>Java</option>
                <option>C</option>
                <option>php</option>
                <option>python</option>
                <option>c sharp</option> 
            </select> 
            <a href='/PhtestProject/index.php' id='continue'>Save as default value</a>
                   <!-- On click of this link the current page will load -->
        </body>
    </html> 
```

**更新**：

```
<script>
        $(document).ready(function(){  
            $('#continue').click(function() {
                 var singleValues = $("#select_letter").val(); 
                $.cookie("language", singleValues); 
            }) 

         alert($.cookie('language')); //getting the correct value which are set in cookie
         $('#select_letter option[value="'+$.cookie('language')+'"]').attr('selected', 'selected');  //This is not working,Not setting the cookie value as selected

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:04:04.790

如果你在你的选择上坚持一些价值观：

```
<select id='select_letter'>
    <option value="java">Java</option>
    <option value="c">C</option>
    <option value="php">php</option>
    <option value="python">python</option>
    <option value="c#">c sharp</option> 
</select> 
```

然后将选择的值存储到您的 cookie 中。当你拿回来时，只需使用：

```
var languageCookieValue = $.cookie('language');
$('#select_letter option[value="' + languageCookieValue + '"]').attr('selected', 'selected'); 
```

上面的代码将选择 Java 选项。

# io - 如何通过内存页在简单的文件系统内核模块中实现输入/输出？

> ID：15565412
> 
> 赞同：1
> 
> 时间：2013-03-22T07:59:35.770
> 
> 标签：io, filesystems, paging, kernel-module, kernel

我正在尝试实现一个非常简单的文件系统驱动程序内核模块。它所要做的就是在挂载文件夹中创建一个文件，并为其提供对挂载设备的读/写访问权限。让我们有一个循环设备，它连接到某个文件。然后，如果该设备使用新的文件系统类型安装到某个目录，用户将能够使用单个文件系统文件作为一种接口读取/写入/修改连接到循环的文件。应该使用内存页面机制来实现对文件的访问。

到目前为止，我已经成功创建了一个 FS 单个文件。我有根目录的 inode 和 dentries 以及根文件夹中的一个文件。现在我需要提供文件访问的操作。所以，我创建了一个`file_operations`类型结构来用作我的文件`inode->f_ops`。它有`read/write/aio_read/aio_write`函数，但`read`函数只是调用`do_sync_read`并且`aio_read`是一个`generic_file_aio_read`. 写作也是如此。

```
static struct file_operations fs_file_ops = {
    .read       = do_sync_read,
    .aio_read   = generic_file_aio_read,
    .write      = do_sync_write,
    .aio_write  = generic_file_aio_write,
} 
```

另外，我创建了一个`address_space_operations`结构来用作`inode->i_mapping->a_ops`. 它具有`readpage`和`writepage`功能。我的`readpage`实现调用`mpage_readpage`标准函数。`mpage_readpage`用`readpage` `page`参数和`get_block`函数调用。

```
static struct address_space_operations fs_aops = {
    .readpage = fs_readpage,
    .writepage = fs_writepage 
};

static int fs_readpage(struct file *file, struct page *page)
{
     return mpage_readpage(page, fs_get_block);
} 
```

`get_block`函数将超级块映射到缓冲区并为内存页面处理提供块，它以以下方式实现：

```
static int fs_get_block(struct inode *inode, sector_t block, struct buffer_head *bh, int create)
{
    map_bh(bh, inode->i_sb, block);
    size_t i_b_size = bh->b_size >> inode->i_blkbits;
    size_t r_b_size = i_size_read(inode) >> inode->i_blkbits - block;
    bh->b_size = min(i_b_size, r_b_size) << inode->i_blkbits;
    return 0;
} 
```

因此，当用户试图从文件中读取某些内容时，`do_sync_read`会调用它，它使用`generic_file_aio_read`. 它调用`readpage`函数，`readpage`函数调用`mpage_readpage`，它`fs_get_block`作为一个参数，为页面提供一个块。这个函数应该实现逐页读取文件。

问题是，目前我还没有设法从 FS 文件中获得所需的输出。那么，我的实施有什么问题？如果它不完整，那么我还应该在我的模块中实现哪些功能以使其工作？或者，也许问题出在我的`get_block`?

# java - 为什么“InputStream 流”总是返回 null？（爪哇）

> ID：15565419
> 
> 赞同：-3
> 
> 时间：2013-03-22T08:00:08.250
> 
> 标签：java, image, resources

我想将图像从我的 .jar 复制到一个文件夹。我做的第一件事是：

```
InputStream stream = this.getClass().getResourceAsStream("/resources/images/i.gif");
if (stream == null) {
    System.out.println("ERROR!!!");
} 
```

有了这个，流总是空的。在我的罐子里，我有一个文件夹“resources/images”，里面有一个图像“i.gif”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T08:03:40.077

从[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)：

> getResourceAsStream()**如果没有找到同名的资源，则返回 InputStream 对象或 null**

它找不到指定的资源。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T08:02:31.440

请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)，它说：`getResourceAsStream(name)`如果没有找到具有此名称的资源，则方法返回 InputStream 对象或 null。

所以`getResourceAsStream(name)`找不到资源`/resources/images/i.gif`，它返回null。

# asp.net - 我可以单步调试 IIS 7 部署的 MVC 应用程序的源代码吗？

> ID：15565423
> 
> 赞同：1
> 
> 时间：2013-03-22T08:00:19.360
> 
> 标签：asp.net, asp.net-mvc, debugging, iis, visual-studio-debugging

我想逐步了解我刚刚在 IIS 7 服务器上本地部署的 MVC 应用程序的源代码。是否可以？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:08:27.297

在 Visual Studio 中打开您的项目。将包含所有调试文件的应用程序发布到 IIS。之后，转到“调试”菜单，单击“附加”以进行处理。找到你的IIS站点的进程并附上。

也可以在谷歌搜索远程调试器。它是 Microsoft 用于此类目的的工具。我不确定你是否需要 Ultimate

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:09:00.703

是的。

在 VS 2010 中，转到 -`Solution Explorer->Right Click Your Application->Go to Properties->Select Web Tab`

并选择**Use Local IIS Webserver**并指定 Project Url。

![在此处输入图像描述](../Images/27ad9c2bb3dc945a7296c0609a399ec8.png)

# eclipse - Eclipse Juno for OS X Content Assist 从键盘选择菜单项

> ID：15565426
> 
> 赞同：1
> 
> 时间：2013-03-22T08:00:31.537
> 
> 标签：eclipse

从 Indigo 到 Juno 发生了一些变化，这让我的效率大大降低：

*   内容辅助菜单项不能再使用“Line Down”快捷方式循环

*我能做些什么*来恢复工作行为吗？

设置：

*   OSX 山狮 (v10.8.3)
*   Eclipse（v4.2.2，内部版本：M20130204-1200）
*   命令：“Line Down”，绑定到：`CTRL-N`，当：在 Windows 中
*   调用 Content Assist 的快捷方式: `OPTION-/`, when: In Dialogs and Windows

笔记：

完全相同的配置，仅将 Eclipse 更改为 Indigo (Version: 3.7.2; Build id: M20120208-0800) 可以*完美*运行。如果我不能解决这个问题，我有很多肌肉记忆要撤消...... `:(`！

报酬：

**我想设置一个赏金来解决这个问题，但它说我必须等待 2 天才能这样做..**

参考链接：

*   [在 Eclipse 中导航内容辅助列表](https://stackoverflow.com/questions/2615305/navigating-the-content-assist-list-in-eclipse)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:50:32.130

你可以做的一件事就是去

```
Window->Preferences->General->Keys 
```

从那里您可以更改要使用的命令的绑定。从复制和粘贴到运行测试和重构，它们都在那里。因此，如果您分配几个`Ctrl+N`，您将获得一个列表，其中包含您绑定的所有命令，并且可以单击您想要的一个。

这有点像你的想法吗？

# php - PHP：不能在函数中分配常量？

> ID：15565427
> 
> 赞同：0
> 
> 时间：2013-03-22T08:00:33.367
> 
> 标签：php

我有一个名为 getSources() 的函数；在这个函数中，我想轻松地将数字分配给常量。我认为这会起作用：

```
const A = 1;
const B = 2;
const C = 3;
const D = 4; 
```

我可以这样做：

```
$someValue = A; 
```

但它不起作用。我错过了什么？我不希望在此函数范围之外使用这些变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:01:40.010

改用定义。

```
define('A', 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:03:27.710

尝试

```
define('myname', 'myvalue');
echo myname; 
```

// 输出

```
myvalue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:01:48.607

您需要使用范围解析运算符 ( `::`) 来访问它们（如果它们是`const`为类设置的）。

否则，您需要使用`define()`which 使标识符成为全局的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:10:15.927

你可以这样做

```
function getSources()
{
    define(A,1);
    define(B,2);
    ....
 } 
```

像这样你可以解决它

# ssas - MDX 层次结构级别 AVG

> ID：15565434
> 
> 赞同：1
> 
> 时间：2013-03-22T08:01:01.790
> 
> 标签：ssas, mdx

我有一个维度层次结构：

```
B - C - D - E 
```

和一项措施：

```
measures.eur 
```

如果我让计算成员：

```
AVG([hierarchy].[All],[Measures].[eur]) 
```

*我可以从层次结构顶层*的所有层次结构成员中获得单一平均值。但是我希望从层次结构的*每个级别*计算出不同的平均值。

So that when selecting hierarchy member C it shows the AVG of all the C's in the hierarchy, when selecting B it's AVG of all B's and so forth..

我试过：

```
 AVG(
 [HIERARCHY].PARENT,
[Measures].[eur]      
) 
```

但这并没有给出层次结构级别*所有成员*的平均值，但它非常接近我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:35:56.017

您可以使用 level 函数尝试以下表达式：

```
AVG ( [selected-member-of-c].level.members, [Measures].[eur] ) 
```

# ios - 当我尝试在设备上部署 PhoneGAP 应用程序时，xCode 返回“等待应用程序启动超时”错误

> ID：15565444
> 
> 赞同：5
> 
> 时间：2013-03-22T08:01:45.140
> 
> 标签：ios, iphone, xcode, cordova

我尝试在设备上部署 PhoneGAP HelloWorld 测试应用程序。我正在使用 XCode 4.6/iOS 6.1 SDK，我想在 iOS 5.1.1 设备上部署应用程序。项目处于调试模式。当我尝试它时，xCode 返回`timed out waiting for app to launch`错误。

为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-22T17:10:23.437

更改标准开发/团队配置的 AdHoc 配置对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T11:50:01.930

我有同样的问题。我正在使用临时配置文件进行调试。尝试使用开发配置文件，它将起作用。Ad hoc 意外地用于调试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T08:05:35.847

您可能需要关闭临时配置文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T08:16:04.063

签入您的代码，也许您在调试模式下使用 Adhoc 配置文件。如果你的问题

没有解决然后重新启动您的设备。有时会看到这种类型的行为。

# c# - Windows 服务未读取 app.config

> ID：15565453
> 
> 赞同：3
> 
> 时间：2013-03-22T08:02:10.133
> 
> 标签：c#, iis, service

我知道这可能是重复的，但是到目前为止所有的帖子都无法解决我的问题。

我有一个 Windows 服务，我希望这个服务从 web.config 中读取。但是，它一直从 machine.config 中读取。我已经尝试了许多来自包括 SO 在内的许多网站的设置建议，例如`<appSettings file="location of web.config"`.

每次更改 app.config 后是否需要重新安装？我在 service.exe 所在的文件夹中有 service.exe.config。还有什么我可能错过的？

另请注意，我在 IIS 中有 2 个网站。如何确保窗口服务采用我想要的 web.config？

这里有一些代码来展示我是如何做到的：

```
private string uDir = ConfigurationManager.AppSettings["dir1"] + "\\dir1";
private string fDir= ConfigurationManager.AppSettings["dir2"] + "\\dir2";
private static string cs= ConfigurationManager.ConnectionStrings["cSqlServer"].ConnectionString.ToString();
private SqlConnection con = null; 
```

所有 ConfigurationManager 都没有返回任何内容，除了 ConnectionStrings 从 machine.config 返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:16:57.733

尝试在服务上重新运行[Installutil](http://msdn.microsoft.com/en-us/library/50614e95%28v=vs.80%29.aspx)工具。

除非您的服务定期检查 app.exe.config 文件中的更改，否则在重新安装服务之前它不会重新加载配置文件。

如果您替换安装位置中已安装的 app.exe.config 文件并重新启动服务，它也应该会选择新版本。

# php - 从 PHP 查询 SQL Server

> ID：15565457
> 
> 赞同：6
> 
> 时间：2013-03-22T08:02:34.087
> 
> 标签：php, sql-server, collation

我一直在搜索这个主题，但没有找到任何解决方案；有一个类似的问题，但没有解决：[Working with characters with accents in sql query and table name](https://stackoverflow.com/questions/10910354/working-with-characters-with-accents-in-sql-query-and-table-name)

我正在使用 Modern_Spanish_CI_AS 作为排序规则的 SQL Server 2005 上的数据库。我正在使用 PHP 开发 Web 前端，但遇到了口音问题。

有一个表（比如说“Objetos”），其字段是： ID 名称**描述**

由于口音，我无法查询此表。如果我构建我的查询`"Select a.ID, a.Name FROM Objetos"`，它会完美运行，但如果更改为`"Select a.ID, a.Descripción FROM Objetos"`它返回零行。

我无法更改数据库的排序规则，所以我在发送查询之前一直在解码它们`$ssql = utf8_decode($ssql);`......这很奇怪，使用这种解决方法我可以做到`INSERT`，但不能`SELECT`。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:04:47.723

尝试用“`”字符包围列。如果它不起作用，请尝试删除“a”。列名的前缀。

# objective-c - OuthShare Kit 在linkedin分享一次

> ID：15565460
> 
> 赞同：-2
> 
> 时间：2013-03-22T08:02:55.107
> 
> 标签：objective-c

OuthShare Kit每天在linkedin中分享一天。但我需要为单个用户在linkedin中持续分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:13:55.717

在帖子更新功能中更改这些行，您可以多次共享............

```
 NSDictionary *update = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"sharing text", @"comment",
                            [[NSDictionary alloc] 
                             initWithObjectsAndKeys:
                             @"nwme project",@"title",@"any title",@"submitted-url",@"image url",@"submitted-image-url",nil], @"content",
                            [[NSDictionary alloc] 
                             initWithObjectsAndKeys:
                             @"anyone",@"code",nil],@"visibility",nil]; 
```

# angularjs - AngularJS - AlertFactory 打开对话框行为

> ID：15565462
> 
> 赞同：1
> 
> 时间：2013-03-22T08:03:13.350
> 
> 标签：angularjs, angularjs-scope, angularjs-service

我正在创建一个 AlertFactory，因为 ui.bootstrap.dialog 在我的应用程序中不起作用。

所以我输入以下代码：http: [//jsfiddle.net/Premier/BHqKB/17/](http://jsfiddle.net/Premier/BHqKB/17/)

```
enter code here 
```

如果您单击“打开对话框”按钮，它会非常有效：屏幕上会出现一个包含我的消息的对话框。

我还在 keydown 上注册了一个监听器：监听器触发一个广播事件，在该事件上注册了一个范围相关的函数。该函数调用 openDialog 来显示对话框。通过这种方式，角度不会插入参数，并且警报会显示为 {{title}} 占位符。

我的代码有什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:37:57.370

您需要`$apply`调用摘要循环。

```
ng.element(document).on('keydown', function(e){
  //alert('keydown');
  //openDialog();
  $rootScope.$broadcast('openDialog');
  $rootScope.$apply();
}); 
```

# java - Android：启动应用程序并截屏

> ID：15565474
> 
> 赞同：0
> 
> 时间：2013-03-22T08:03:33.183
> 
> 标签：java, android, eclipse, screenshot

我的应用程序可能会在某个应用程序 (app-xyz) 启动时启动。并在 app-xyz 中的每次点击时截屏。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:04:31.163

不，这是为了安全起见——如果你能做到这一点，你可以截取人们输入密码的屏幕截图。如果您不是活动活动，则截取屏幕截图的唯一方法是使用 adb 或类似工具。

# ascii - 字符串中奇怪的空格字符，那不是空格？

> ID：15565479
> 
> 赞同：7
> 
> 时间：2013-03-22T08:03:49.943
> 
> 标签：ascii

我一直在使用 Capistrano 脚本时遇到问题，或者实际上是导致我的脚本失败的 bash 命令。我不断从脚本中得到错误说：

> 没有相应的文件和目录

所以这是脚本位。

```
run "sudo ln -s #{shared_path}/readme.txt  #{shared_path}/readme-symlink.txt" 
```

仔细检查后发现 readme.txt 和 readme-symlink.txt 位之间有两个空格。偶然发现一个是空格，另一个只是一个奇怪的字符，看起来像一个空格，其实不是。下面是它在 Sublime Text 中的样子，配置为显示空白：

![奇怪的空白字符](../Images/d288c7ed94a134321f2e74971f70c9be.png)

请注意，在上图中，readme.txt 之后只有一个点，然后是另一个“*空格*”

所以这是我的问题，这个字符到底是什么，我只是很困惑有人如何通过在普通键盘上打字来获得它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T08:19:44.643

所以我将字符串粘贴到[http://www.asciivalue.com/index.php](http://www.asciivalue.com/index.php)，第二个空格的 ASCII 值为 160。根据[http://www.ascii-code.com/](http://www.ascii-code.com/)这是一个空格，但是这是一个不间断的空间，我相信命令行对此不太满意。

![在此处输入图像描述](../Images/ca3dff1f725184461f6694514ea666cf.png)

删除 nbsp 修复了我的脚本，我可以重新开始我的生活。

我只是对创建文件的人如何首先获得一个 nbsp 感到困惑。

# php - 保护用于批量电子邮件的 PHP 脚本文件

> ID：15565492
> 
> 赞同：-1
> 
> 时间：2013-03-22T08:04:53.357
> 
> 标签：php

希望你能帮我解决这个问题。我有一份时事通讯，我会每月更新并通过电子邮件将其发送给客户。此电子邮件集成在批量邮件 php 脚本中。该脚本查询 SQL 数据库以获取电子邮件地址。

我担心的是任何人都可以访问这个脚本并执行它。例如通过访问此页面：www.domain.com.au/newsletter/bulk_email.php

如何保护此脚本，以便只有我可以访问/执行它而不是公众？是否有密码保护，或者最好的方法是什么？

谢谢，

D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:11:17.343

将此添加到脚本的顶部。

```
if (!isset($_SERVER['PHP_AUTH_USER']) || $_SERVER['PHP_AUTH_USER'] != 'YOUR_USER_NAME' || $_SERVER['PHP_AUTH_PW'] != 'YOUR_PASSWORD') {
  header('WWW-Authenticate: Basic realm="TEST"');
  header('HTTP/1.0 401 Unauthorized');
  echo 'Not authorized';
  exit;
}

echo 'Continue script'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:11:37.033

有两种方法可以保护 php 文件不被直接访问：

# 方式一

将文件添加到 .htaccess 中，并使用规则拒绝所有人。但是这条规则有时会阻止你做某些事情。

# 方式二

使用 post 选项创建一个带有用户名和密码的简单表单，当输入用户名和密码时，它将重定向到您的批量电子邮件脚本并匹配用户名和密码，如果匹配则执行命令，否则不执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:12:14.777

您在这里阅读了本教程：

[http://www.kavoir.com/2009/01/htaccess-deny-from-all-restrict-directory-access.html](http://www.kavoir.com/2009/01/htaccess-deny-from-all-restrict-directory-access.html)

```
order deny, allow
deny from all 
```

# facebook-graph-api - FQL：对具有共同字段的结果进行分组

> ID：15565500
> 
> 赞同：0
> 
> 时间：2013-03-22T08:05:36.540
> 
> 标签：facebook-graph-api, facebook-fql

我正在开发一个基于 facebook 签到的应用程序。我正在寻找一种方法来对结果进行分组，我收到请求用户签到的请求，通过 page_id 和单个 FQL 查询。通常我会尝试使用 SQL 语言的 GROUP 子句，但我读到 FQL 不支持该子句。

提前致谢，

卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:21:46.710

正如您所说，由于没有可用的 GROUP BY，因此通过单个 FQL 查询是不可能的。

您的选择是在处理收到的数据时自己执行此操作，方法是循环处理接收到的数据并将其传输到所需的数据结构中，或者*如果您事先知道涉及哪些页面*，则通过执行多个查询，包括对每个 page_id 的单个查询。

# android - api v10 和 api v14 上的 AvoidXfermode

> ID：15565510
> 
> 赞同：0
> 
> 时间：2013-03-22T08:06:25.083
> 
> 标签：android, android-canvas, xfermode

在地图活动中，我创建了叠加层，在其上`Cnavas`绘制形状使用`Paint`

形状由点和线组成

```
linePaint = new Paint();
    linePaint.setColor(mContext.getResources().getColor(R.color.Line));
    linePaint.setStyle(Paint.Style.STROKE);
    linePaint.setStrokeWidth(strokeWidth);
    linePaint.setXfermode(avoidXfermode);
    linePaint.setFlags(Paint.ANTI_ALIAS_FLAG);

    mPointPaint = new Paint();
    mPointPaint.setColor(pointColor);
    mPointPaint.setFlags(Paint.ANTI_ALIAS_FLAG); 
```

我还定义`AvoidXfermode`以避免点与线重叠（点必须在“顶部”）

```
avoidXfermode = new AvoidXfermode(pointColor, 255, Mode.AVOID); 
```

以 32b 格式在资源中定义的颜色

```
<color name="Point">#FFFF0000</color>
<color name="Line">#FF4169E1</color> 
```

问题是：它在使用 api 10 的设备上运行良好，但在使用 api v14 的 Nexus 下根本无法运行（有任何容差）

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:37:47.983

硬件加速不支持 AvoidXfermode。

您可以使用 View.isHardwareAccelerated() 确定并使用 View.setLayerType(LAYER_TYPE_*) 进行设置。尽管您可能需要寻找替代方案。

你可以在这里阅读[http://developer.android.com/guide/topics/graphics/hardware-accel.html#unsupported](http://developer.android.com/guide/topics/graphics/hardware-accel.html#unsupported)

# sql - 数据库和 Toad Data Modeller 交互？

> ID：15565516
> 
> 赞同：1
> 
> 时间：2013-03-22T08:06:47.557
> 
> 标签：sql, database, toad

我可以将 Toad Data Modeller 与 SQL Developer 连接并加载表，但每当我使用 SQL-D 更改表并打开 TDM 之后，TDM 不会显示更改。TDM 中是否有任何选项？

提前感谢乔治

# jquery - 将值从一个选择发送到另一个

> ID：15565519
> 
> 赞同：1
> 
> 时间：2013-03-22T08:07:03.540
> 
> 标签：jquery, html, css

我有以下脚本：

```
$(document).ready(function(){
        $('#the-selector div.jqTransformSelectWrapper ul li a').click(function(){
           var countrySect = $('#the-selector div.jqTransformSelectWrapper span').text(); 

        });
    }); 
```

因此，您注意到 var "countrySect" 返回选择输入中的值。问题是我还有一个与这个类似的，但有另一个类。我正在尝试在第一个中选择值并将其设置为第二个。这是我的完整代码：

```
$(document).ready(function(){
        $('#the-selector div.jqTransformSelectWrapper ul li a').click(function(){
           var countrySect = $('#the-selector div.jqTransformSelectWrapper span').text(); 
           $('.register-state div.jqTransformSelectWrapper span').val(countrySect);
           return true;
        });
    }); 
```

但是什么也没发生……我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:08:39.640

采用`.html()`

```
$('.register-state div.jqTransformSelectWrapper span').html(countrySect); 
```

因为要在 span 内设置值，您需要使用`.text()`or `.html()`。

# javascript - 使用画布在三角形中画一个圆圈

> ID：15565521
> 
> 赞同：3
> 
> 时间：2013-03-22T08:07:26.827
> 
> 标签：javascript, html5-canvas

我正在创建“使用画布在三角形中画一个圆圈”。但是面临很多问题。好吧，我尝试在画布中间绘制和三角形，尽管它已创建，但我想知道从哪里开始绘制一个对我来说可能完美的圆圈。

相对于数学我知道画圆，但是当涉及到 java 脚本时我被卡住了。

请帮助我。

谢谢。

我尝试使用以下代码在画布中心绘制训练：-

```
var c=document.getElementById("myCanvas");
var context =c.getContext("2d");

check(ctx, 100, c.width/2, c.height/2);

function check(ctx, side, cx, cy){

    var h = side * (Math.sqrt(3)/2);

    ctx.strokeStyle = "black";
    ctx.save();
    ctx.translate(cx, cy);
    ctx.beginPath();
    ctx.moveTo(0,-h/2);
    ctx.lineTo(-side/2, h / 2);  // line a
    ctx.lineTo(side /2, h / 2); // line b
    ctx.lineTo(0,-h /2);            // line c
    ctx.stroke();
    ctx.closePath();
    ctx.save();

} 
```

![在此处输入图像描述](../Images/65d5d64f098d13a4f8acf3924ad500b9.png)

像这样我想要..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:50:33.807

好的，检查一下..[等边三角形的现场演示](http://jsfiddle.net/sXrJ5/)

> 等边三角形内接圆的半径 = Sqrt(3)/6 * 三角形的边；

```
window.onload = function()
{
var c=document.getElementById("myCanvas");
var context =c.getContext("2d");

check(context,100,c.width/2,c.height/2);
circle(context,100,c.width/2,c.height/2);
}

function check(ctx, side, cx, cy){

    var h = side * (Math.sqrt(3)/2);

    ctx.strokeStyle = "black";
    ctx.save();
    ctx.translate(cx, cy);
    ctx.beginPath();
    ctx.moveTo(0,-h/2);
    ctx.lineTo(-side/2, h / 2);  // line a
    ctx.lineTo(side /2, h / 2); // line b
    ctx.lineTo(0,-h /2);            // line c
    ctx.stroke();
    ctx.closePath();
    ctx.restore();

}

function circle(ctx,side,cx,cy)
{
    var h = side * (Math.sqrt(3)/2);
    var radius = Math.sqrt(3)/6 * side; // Radius of the circle
    cy = cy + h/2 - radius;       // Center Y of circle
    ctx.beginPath();
    ctx.arc(cx,cy,radius,0,Math.PI * 2,false);
    ctx.stroke();
    ctx.closePath();
} 
```

[检查所有公式以在此处](http://www.ajdesigner.com/phptriangle/equilateral_triangle_inscribed_circle_radius_r.php)找到不同三角形内接圆的半径

# php - 如何防止用户一次多次打开同一个页面

> ID：15565522
> 
> 赞同：1
> 
> 时间：2013-03-22T08:07:28.637
> 
> 标签：php, mysql, web

在我的网站上，人们通过查看页面来赚取积分。他们保持页面打开的每一秒（页面不断旋转广告）获得 1 分。

有些人已经开始通过多次打开该页面来利用这一点，因此获得了更多积分！例如，如果用户打开页面 10 次，那么他每秒获得 10 分。我不希望他们每秒赚取超过 1 分。

**如何防止用户同时打开该页面多次？**

提前致谢。注意：我的网站是基于 php 的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:26:06.607

我想到了简单但不可靠的方式：

设置一个像

```
$_SESSION['user_already_on_page'] = true; 
```

现在你可以检查这个变量并返回一个错误页面或类似的东西。

```
if($_SESSION['user_already_on_page'])
{
    //maybe the user has left unexpected. to workaround this we have to check
    //for the last db entry. Examplecode:
    $query = mysql_query($_db,'SELECT LastUpdated FROM Pointstable WHERE U_Id = $uid');
    $row = mysql_fetch_array($query);
    if((time()-$row['LastUpdated']) < 5)
    {
        die("You are already on this page!");  
    }
    //$_SESSION['user_already_on_page'] is set but the last update is older than 5 sec
    //it seems, that he unexpectedly lost connection or something like that.
} 
```

要取消设置此变量，您可以在 pageclose 上触发取消设置此变量的 AJAX 脚本。所以你的*unsetonpage.ajax.php*可能看起来像这样：

```
<?php $_SESSION['user_already_on_page'] = false;?> 
```

还有你的 JS 部分（使用 jquery）：

```
$(window).bind('beforeunload', function(eventObject) {
    $.ajax({url:'./ajax/unsetonpage.ajax.php',type:'GET'});
}); 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:19:05.550

将页面打开的时间添加到数据库中。每当打开页面时，检查该时间和当前时间的黑白差异是否小于 xx 秒，然后重定向用户。如果差异超过 xx 秒，则更新该时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-12T15:36:42.940

```
//--- You make session in startup called (my_form)
if (!empty($_SESSION['my_form'])) 
{
    if ($_SESSION['my_form']== basename($_SERVER['PHP_SELF']))
    {
        header("Location:index.php");
        exit();
    } else {
        $_SESSION['my_form']= basename($_SERVER['PHP_SELF']);
    }
} else {
    $_SESSION['my_form']= basename($_SERVER['PHP_SELF']);
} 
```

# node.js - 无法执行 child_process.exec("node child.js")

> ID：15565524
> 
> 赞同：1
> 
> 时间：2013-03-22T08:07:34.453
> 
> 标签：node.js

我在一个名为“app.js”和“child.js”的文件夹下有两个文件。该节点在 Windows 操作系统上运行。app.js 文件：

```
;(function() {
    var http = require("http"),
    child_process = require("child_process"),
    exec = child_process.exec;

    http.createServer(function(request, response) {
        response.writeHead(200, {"content-type": "text/plain"});
        exec('node child.js', {env: {number: 1234}}, function(error, stdout, stderror) {
            if(error) throw error;
            console.log(stdout);
            console.log(stderror);
        });
        response.write("Hello world!!!");
        response.end();
    }).listen(8000);
    console.log("The server has started listening to the port: 8000");
})(); 
```

child.js 文件：

```
;(function() {
    var envVar = process.env.envVar;
    console.log("Type of envVar: " + typeof envVar);
    console.log("The value of envVar is: " + parseInt(envVar, 10));
})(); 
```

我正在尝试通过“exec”方法执行外部命令。
但是当我运行时：

```
node app.js 
```

我收到错误：

```
Command failed: 'node' is not recognized as an internal or external command, operable program or batch file. 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:05:11.343

所以如果你想要`exec`一个命令，试试这个：

```
var http = require("http"),
    child_process = require("child_process"),
    exec = child_process.exec;
    http.createServer(function(request, response) {
        response.writeHead(200, {"content-type": "text/plain"});
        exec( '"' + process.execPath + '" child.js', {env: {number: 1234}}, function(error, stdout, stderror) {
            if(error) throw error;
            console.log(stdout);
            console.log(stderror);
        });
        response.write("Hello world!!!");
        response.end();
    }).listen(8000);
    console.log("The server has started listening to the port: 8000"); 
```

`process.execPath`包含 node.exe 的完整路径，应该`"`在那里，因为目录名称可以包含空格，如`Program files`.

子进程是一样的，我只是改成`process.env.envVar`，`process.env.number`因为你在`exec`options中设置了。

```
var envVar = process.env.number;
    console.log("Type of envVar: " + typeof envVar);
    console.log("The value of envVar is: " + parseInt(envVar, 10)); 
```

# mysql - sql 查询不适用于 concat 和 astext

> ID：15565527
> 
> 赞同：0
> 
> 时间：2013-03-22T08:07:52.320
> 
> 标签：mysql, sql

```
SELECT LATITUDE,
       LONGITUDE, 
       AsText(concat(LATITUDE,',' ,LONGITUDE)) AS point 
FROM incident_google 
```

查询不适用于 AsText

它显示结果为`NULL`。

如何获取 astext 值。

如果问题出在 concat 或 AStext 上。

我需要这个查询的结果。

现在结果为，

```
38.8994816000000014 -76.9785097000000036    NULL
38.9445079999999990 -77.0045459999999906    NULL 
```

我需要结果

```
38.8994816000000014 -76.9785097000000036    38.899481600000001476.9785097000000036 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:16:19.463

`AsText()`是用于处理该`geometry`类型列的特殊函数。

对我来说，纬度和经度似乎不是几何类型；他们只是花车。如果您省略它应该可以正常工作`AsText()`：

```
SELECT LATITUDE,LONGITUDE, concat(LATITUDE,',' ,LONGITUDE) AS point 
    FROM incident_google 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/af901/3)。

注意：另一方面，如果您使用的是地理空间扩展，则需要指定您*正在*使用的类型以及您正在尝试执行的操作。这是一个比较专业的领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:15:43.477

在连接或使用之前尝试使用`Text`而不是`Astext`先使用`CONCAT`？

```
SELECT LATITUDE,LONGITUDE,concat(Text(LATITUDE),',' ,Text(LONGITUDE)) AS point FROM incident_google 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-07T13:46:47.500

[正如这里](https://itnext.io/playing-with-geometry-spatial-data-type-in-mysql-645b83880331)提到的，其中一些功能已被弃用。[在此处](https://mysqlserverteam.com/detecting-incompatible-use-of-spatial-functions-before-upgrading-to-mysql-8-0/)查看新版本名称。

> 在较新版本的 MySQL (8.0+) 中，GeomFromText、AsText 等旧空间函数已被弃用，不再有效。如果您遇到未定义函数名称的问题，请务必从此处开始关注此列表。

# mysql - sql查询中的数学计算

> ID：15565529
> 
> 赞同：1
> 
> 时间：2013-03-22T08:07:56.247
> 
> 标签：mysql, sql, aggregate-functions, mathematical-expressions

在我的项目中，我有以下数据库表：

```
Course
-------
1.Course Id 
2.Course Name
3.Term Name

Subject
-------
1.Subject Id
2.Subject Name
3.Term Name

Term
-----
1.Term Id
2.Term Name
3.Total Working Days

Working Day
-------------
1.Work day Id
2.Term Id

Staff_work
-----------
1.Staff Id
2.Work day Id
3.Staff Working hour per day

Period
-------
1.Period Id
2.period Name 
```

如果我选择 Term Id 和 Course Id 表将生成

```
Periods Day 1   Day 2           Day 3           Day 4           Day 5   
period 1    Subject name    Subject name    Subject name    Subject name        
Period 2    Subject name    Subject name    Subject name    Subject name 
```

它匹配员工每天的工作时间，总工作日在 SQL 中可以计算吗？

# tomcat - 解释 tomcat 线程转储并诊断死锁

> ID：15565533
> 
> 赞同：1
> 
> 时间：2013-03-22T08:08:21.320
> 
> 标签：tomcat, spring-mvc, deadlock, thread-dump

我有以下线程转储（见下文），我不确定我是否有死锁。

有人可以请教吗？

```
2013-03-22 08:52:59
Full thread dump Java HotSpot(TM) 64-Bit Server VM (23.7-b01 mixed mode):

"Attach Listener" daemon prio=10 tid=0x00007f68e8001000 nid=0x41bd waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"http-bio-8080-exec-10" daemon prio=10 tid=0x00007f68840a2800 nid=0x41b5 in Object.wait() [0x00007f690cc57000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007e8fc4650> (a org.apache.commons.pool.impl.GenericObjectPool$Latch)
    at java.lang.Object.wait(Object.java:503)
    at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1115)
    - locked <0x00000007e8fc4650> (a org.apache.commons.pool.impl.GenericObjectPool$Latch)
    at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)
    at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
    at org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider.getConnection(InjectedDataSourceConnectionProvider.java:70)
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:292)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
    at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1395)
    at org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:59)
    at org.springframework.orm.jpa.DefaultJpaDialect.beginTransaction(DefaultJpaDialect.java:71)
    at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:378)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:273)
    at org.springframework.transaction.aspectj.AbstractTransactionAspect.ajc$before$org_springframework_transaction_aspectj_AbstractTransactionAspect$1$2a73e96c(AbstractTransactionAspect.aj:63)
    at com.bignibou.service.MemberServiceImpl.retrieveCurrentMember(MemberServiceImpl.java:15)
    at com.bignibou.controller.MessageController.getMessages(MessageController.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:745)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:686)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:920)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:816)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:801)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:180)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    - locked <0x00000007d9c6f578> (a org.apache.tomcat.util.net.SocketWrapper)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - <0x00000007d79a5758> (a java.util.concurrent.ThreadPoolExecutor$Worker)

"http-bio-8080-exec-9" daemon prio=10 tid=0x00007f68c8426000 nid=0x41b4 waiting on condition [0x00007f690cd5b000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007f7241b98> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:104)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:32)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"http-bio-8080-exec-8" daemon prio=10 tid=0x00007f68b800c000 nid=0x41b3 waiting on condition [0x00007f690cf5e000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007f7241b98> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:104)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:32)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"http-bio-8080-exec-7" daemon prio=10 tid=0x00007f68b800a000 nid=0x41b2 waiting on condition [0x00007f690d05f000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007f7241b98> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:104)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:32)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"http-bio-8080-exec-6" daemon prio=10 tid=0x00007f68b8008000 nid=0x41b1 waiting on condition [0x00007f690d65a000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007f7241b98> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:104)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:32)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"http-bio-8080-exec-5" daemon prio=10 tid=0x00007f68b8006800 nid=0x41b0 waiting on condition [0x00007f690d75b000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007f7241b98> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:104)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:32)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"http-bio-8080-exec-4" daemon prio=10 tid=0x00007f68b8005000 nid=0x41af waiting on condition [0x00007f690d85c000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007f7241b98> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:104)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:32)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"http-bio-8080-exec-3" daemon prio=10 tid=0x00007f68b8004000 nid=0x41ae waiting on condition [0x00007f690db5f000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007f7241b98> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:104)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:32)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"http-bio-8080-exec-2" daemon prio=10 tid=0x00007f68b000e000 nid=0x41ab waiting on condition [0x00007f690d95d000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007f7241b98> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:104)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:32)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"ajp-bio-8009-AsyncTimeout" daemon prio=10 tid=0x00007f69184a5000 nid=0x41aa waiting on condition [0x00007f690d160000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at org.apache.tomcat.util.net.JIoEndpoint$AsyncTimeout.run(JIoEndpoint.java:148)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"ajp-bio-8009-Acceptor-0" daemon prio=10 tid=0x00007f69184a3000 nid=0x41a9 runnable [0x00007f690d261000]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
    at java.net.ServerSocket.implAccept(ServerSocket.java:522)
    at java.net.ServerSocket.accept(ServerSocket.java:490)
    at org.apache.tomcat.util.net.DefaultServerSocketFactory.acceptSocket(DefaultServerSocketFactory.java:60)
    at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:216)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"http-bio-8080-exec-1" daemon prio=10 tid=0x00007f68b8002000 nid=0x41a8 waiting on condition [0x00007f690d362000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007f7241b98> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:104)
    at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:32)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"http-bio-8080-AsyncTimeout" daemon prio=10 tid=0x00007f69184a1800 nid=0x41a7 waiting on condition [0x00007f690d463000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at org.apache.tomcat.util.net.JIoEndpoint$AsyncTimeout.run(JIoEndpoint.java:148)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"http-bio-8080-Acceptor-0" daemon prio=10 tid=0x00007f691849f800 nid=0x41a6 runnable [0x00007f690e2db000]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
    at java.net.ServerSocket.implAccept(ServerSocket.java:522)
    at java.net.ServerSocket.accept(ServerSocket.java:490)
    at org.apache.tomcat.util.net.DefaultServerSocketFactory.acceptSocket(DefaultServerSocketFactory.java:60)
    at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:216)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"ContainerBackgroundProcessor[StandardEngine[Catalina]]" daemon prio=10 tid=0x00007f691875c800 nid=0x41a5 waiting on condition [0x00007f690e3dc000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1508)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - None

"Timer-0" daemon prio=10 tid=0x00007f68c4a93800 nid=0x41a4 in Object.wait() [0x00007f690da5e000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007f7abdda0> (a java.util.TaskQueue)
    at java.util.TimerThread.mainLoop(Timer.java:552)
    - locked <0x00000007f7abdda0> (a java.util.TaskQueue)
    at java.util.TimerThread.run(Timer.java:505)

   Locked ownable synchronizers:
    - None

"GC Daemon" daemon prio=10 tid=0x00007f691866b000 nid=0x419e in Object.wait() [0x00007f690eb3c000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007836c8508> (a sun.misc.GC$LatencyLock)
    at sun.misc.GC$Daemon.run(GC.java:117)
    - locked <0x00000007836c8508> (a sun.misc.GC$LatencyLock)

   Locked ownable synchronizers:
    - None

"Service Thread" daemon prio=10 tid=0x00007f69180f0800 nid=0x419b runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"C2 CompilerThread1" daemon prio=10 tid=0x00007f69180ee800 nid=0x419a waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"C2 CompilerThread0" daemon prio=10 tid=0x00007f69180eb800 nid=0x4199 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"Signal Dispatcher" daemon prio=10 tid=0x00007f69180e9000 nid=0x4198 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"Finalizer" daemon prio=10 tid=0x00007f691809c000 nid=0x4197 in Object.wait() [0x00007f690fefd000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x0000000785b731f8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:135)
    - locked <0x0000000785b731f8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:151)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)

   Locked ownable synchronizers:
    - None

"Reference Handler" daemon prio=10 tid=0x00007f691809a000 nid=0x4196 in Object.wait() [0x00007f690fffe000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x0000000785b72da8> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:503)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
    - locked <0x0000000785b72da8> (a java.lang.ref.Reference$Lock)

   Locked ownable synchronizers:
    - None

"main" prio=10 tid=0x00007f6918009000 nid=0x4190 runnable [0x00007f6920b89000]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
    at java.net.ServerSocket.implAccept(ServerSocket.java:522)
    at java.net.ServerSocket.accept(ServerSocket.java:490)
    at org.apache.catalina.core.StandardServer.await(StandardServer.java:452)
    at org.apache.catalina.startup.Catalina.await(Catalina.java:766)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:712)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)

   Locked ownable synchronizers:
    - None

"VM Thread" prio=10 tid=0x00007f6918092800 nid=0x4195 runnable 

"GC task thread#0 (ParallelGC)" prio=10 tid=0x00007f6918017000 nid=0x4191 runnable 

"GC task thread#1 (ParallelGC)" prio=10 tid=0x00007f6918019000 nid=0x4192 runnable 

"GC task thread#2 (ParallelGC)" prio=10 tid=0x00007f691801a800 nid=0x4193 runnable 

"GC task thread#3 (ParallelGC)" prio=10 tid=0x00007f691801c800 nid=0x4194 runnable 

"VM Periodic Task Thread" prio=10 tid=0x00007f69180fb000 nid=0x419c waiting on condition 

JNI global references: 439 
```

我已经在进程上运行 jstack 并且它没有检测到任何死锁。但是，当我运行我的 web 应用程序时，Tomcat 无限期挂起，并且执行了 9 次以下代码：

```
@RequestMapping(value = "getMessages", method = RequestMethod.GET, produces = "application/json")
    @ResponseBody
    public DeferredResult<List<Message>> getMessages(@RequestParam final Long senderId) {
        final Long recipientId = memberService.retrieveCurrentMember().getId();
        final String messageRequestKey = new StringBuilder().append(senderId).append(":").append(recipientId).toString();
        final DeferredResult<List<Message>> deferredResult = new DeferredResult<List<Message>>(null, Collections.emptyList());
        messageRequests.put(messageRequestKey, deferredResult);

        deferredResult.onCompletion(new Runnable() {
            @Override
            public void run() {
                messageRequests.remove(messageRequestKey);
            }
        });

        List<Message> unReadMessages = messageService.findUnreadMessages(senderId, recipientId);
        if (!unReadMessages.isEmpty()) {
            deferredResult.setResult(unReadMessages);
        }
        return deferredResult;
    } 
```

如果不是死锁，还能是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:04:02.640

您有连接泄漏，并且您的数据库连接池已用完连接。打开废弃的连接日志以查找泄漏。

# jquery - Jquery如何检查两者之间的复选框

> ID：15565537
> 
> 赞同：0
> 
> 时间：2013-03-22T08:08:46.220
> 
> 标签：jquery

![在此处输入图像描述](../Images/e09190c7013b8c431e0a68013dddcd6c.png)

如何勾选代码 6000，它会自动选中 7000 之间的复选框？如果选中 7000，这也会在 7000 和 7004 之间

```
 $('.mGrid tr').each(function () {
    if (!this.rowIndex) return;
    if ($(this).find("td:eq(2)").text() =='S') {
        $(this).css({
            'font-weight': '800',
            'background-color': '#DBFF94',
            'border' : '2px solid black'
        });

    }
});
<table class="mGrid" cellspacing="0" rules="rows" border="1" id="GridView1" style="border-collapse:collapse;">
            <tr align="left">
                <th scope="col">
                                <span class="chkHeader"><input id="GridView1_chkAll" type="checkbox" name="ctl00$MainContent$nnn$GridView1$ctl01$chkAll" /></span>
                            </th><th scope="col">Code</th><th scope="col">Sub Code</th><th scope="col">Title</th><th scope="col">Description</th><th class="HiddenColumn" scope="col">&nbsp;</th>
            </tr><tr>
                <td>
                                <span class="chkItem"><input id="GridView1_chkCheck_0" type="checkbox" name="ctl00$MainContent$nnn$GridView1$ctl02$chkCheck" /></span>
                            </td><td>1000</td><td>S</td><td>Main</td><td>Summary of everything </td><td class="HiddenColumn"><a href="javascript:__doPostBack(&#39;ctl00$MainContent$nnn$GridView1&#39;,&#39;Select$0&#39;)">Select</a></td>
            </tr><tr class="alt">
                <td>
                                <span class="chkItem"><input id="GridView1_chkCheck_1" type="checkbox" name="ctl00$MainContent$nnn$GridView1$ctl03$chkCheck" /></span>
                            </td><td>6000</td><td>S</td><td>Report</td><td>All Reports</td><td class="HiddenColumn"><a href="javascript:__doPostBack(&#39;ctl00$MainContent$nnn$GridView1&#39;,&#39;Select$1&#39;)">Select</a></td>
            </tr>
        </table> 
```

添加了html部分，有点乱

＃＃＃＃更新

如果我想在两者之间选择 1，例如，选中 6001-6005，代码 6000 复选框将自动选中，我该怎么做？$(this).closest('tr').prevUntil('tr.lights').css('background-color','black'); 我尝试 prevUntil，但它几乎突出显示了所有 prev $(this).closest('tr').prev('tr.lights').css('background-color','black'); 这只能在靠近绿色行时突出显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:53:51.140

查看工作版本[http://jsbin.com/edamuh/3/edit](http://jsbin.com/edamuh/3/edit)

如果您有以下 HTML（请注意输入是同级的）

```
 1<input type="checkbox"/>
  2<input type="checkbox"/>
  3<input type="checkbox"/>
  4<input type="checkbox"/>
  5<input type="checkbox"/>
  6<input type="checkbox"/>
  7<input type="checkbox"/>
  8<input type="checkbox"/>
  9<input type="checkbox"/>
  0<input type="checkbox"/> 
```

您可以使用以下代码段来检查复选框，直到下一个选中

```
 $('input').click(function(){
    var $t = $(this);
    var unchkds = $t.nextUntil('input:checked', 'input[type="checkbox"]');
    var allInputsAfterN = $t.nextAll('input').length;
    if(unchkds.length > 0 && unchkds.length != allInputsAfterN) {
       console.log(unchkds.length + " unchecked after. " + allInputsAfterN + " total after");
      unchkds.prop('checked', true);
    }
  }); 
```

您必须执行类似的操作才能向后检查复选框（使用 prevUntil 和 prevAll）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:38:45.387

如果您的内容是动态创建的，您可以向分组元素添加自定义属性，例如`data-group="6000"`，您可以执行以下操作：

```
$('[data-group]').click(function(){
$("[data-group='"+this.attr('data-group')+"']").attr('checked','checked');
}); 
```

# android - 相机中使用的Android模糊surfaceview

> ID：15565538
> 
> 赞同：18
> 
> 时间：2013-03-22T08:08:46.683
> 
> 标签：android, android-camera, surfaceview, blur

我的 android 应用程序中有一个相机预览。大家可能都知道它是由`surfaceview`android 中的 a 实现的。

在我的允许用户拍照的照片应用程序中，如果用户尚未登录，我想模糊相机预览（表面视图）如果用户已登录，我将显示正常预览（不模糊）

像这样模糊

![在此处输入图像描述](../Images/3abefcb8bdbf2c7945b9bcb8547317ed.png)

但是好像没有办法

想到几件事，但我不知道如何实现它

1.  使用模糊叠加并将其放置在表面视图的顶部，但是您如何创建这样的模糊叠加？
2.  另一种方法是更改​​窗口的属性，但我不能这样做`surfaceview`，

    ```
     getWindow().addFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND); 
    ```

那么我们可以创建一个覆盖surfaceview的窗口并像这样设置标志吗？我不这么认为

有人可以告诉我如何模糊相机预览，这是一个表面视图

注意：我正在尝试模糊作为相机预览输出的区域，所以它不像我在模糊静态图像，模糊区域会根据您将手机相机指向的位置而改变

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T15:30:35.380

尽管您的第二个选项在更高版本的 Android 操作系统中失去了支持，但它可能是一个不错的选择。我想在您的 FRONT 前面带一个窗口`surfaceview`，并使用您现在新的 IN FRONT 窗口的 blur_behind 属性。

Android API 文档“ **此常量在 API 级别 14 中已弃用。** 不再支持模糊。

窗口标志：模糊此窗口后面的所有内容。

常数值：4 (0x00000004)"

我不得不承认，我不是 100% 肯定这会奏效，但它绝对值得一试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-06T15:16:51.440

执行此操作的最佳方法是截取控件的屏幕截图，对其应用模糊处理，然后将该图像显示在原始控件的顶部。这就是雅虎天气应用程序的工作方式以及谷歌建议您执行此类操作的方式。

渲染脚本会快速模糊。我也有一些代码，但目前还没有。

这些可能会有所帮助：

[http://blog.neteril.org/blog/2013/08/12/blurring-images-on-android](http://blog.neteril.org/blog/2013/08/12/blurring-images-on-android) [http://docs.xamarin.com/recipes/android/other_ux/drawing/blur_an_image_with_renderscript/](http://docs.xamarin.com/recipes/android/other_ux/drawing/blur_an_image_with_renderscript/)

我还读到 Android 内置了一些方法可以做到这一点，但是 API 不是公开的，所以我们不能使用它......这很糟糕。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2014-03-07T06:40:51.790

您必须更改相机参数；在这种情况下与`Camera.Parameters.setPictureSize()`.

这里的基本工作流程是：

```
Camera.Parameters cp = mCamera.getParameters(); // get the current params
cp.set...(); // change something
mCamera.setParameters(cp); // write the params back 
```

确保支持您通过此功能设置的每个分辨率。您可以通过 获取设备支持的分辨率列表`Camera.Parameters.getSupportedPictureSizes()`。并检查此[相机](http://developer.android.com/reference/android/hardware/Camera.html)文档。

# html - 目标/覆盖来自外部 css 的内联 css

> ID：15565540
> 
> 赞同：0
> 
> 时间：2013-03-22T08:08:50.333
> 
> 标签：html, css

我的编码知识非常有限`html/css`，但是我有一个问题让我想了解更多。无论如何，我想更改嵌套在页面代码内部的`font-size`a 。`<span>`完整的代码片段如下所示：

```
<span style="font-size: 11px;">Buy</span> 
```

我想将其更改为`font-size:14px;`. 但是，由于没有类/ID，只有一个`<span>`，我不明白如何更改它。正如我所说，它在文档的深处，至少有 20 个 div 或一些围绕它。

有没有办法瞄准那个跨度，也许得到“路径”。我一直在摆弄 Chrome 中的开发人员工具，但我真的不明白 XPath 可以如何帮助我？

总结一下 - 我如何从外部 css 覆盖内联 css（没有类或 ID）？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:13:13.247

抱歉，如果您已经尝试过，但是您的 css 声明中的 !important 将覆盖任何 css 声明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:13:15.300

您可以将属性声明为 final（用我的话），如下所示。
在外部试试这个：
selector {
font-size: 14px !important;
}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:11:10.550

向它添加一个类，然后定位 `<span class="target">Buy</span>`

添加“新”课程不会受到伤害

你不能直接在没有类的情况下定位它。也许父 div 有一个类

```
<div class="parent">
   <span style="font-size: 11px;">Buy</span>
</div>

.parent span{
  font-size: 18px !important;
} 
```

您将不得不使用`!important`来覆盖内联 css .. 还要记住，这将影响`span`div 类中的所有内容`parent`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:13:02.750

您需要有一个 id 才能更改该特定跨度的字体大小。如果您更改跨度，它将影响文档中的所有跨度。或者，如果跨度有一个父元素，您可以选择它

```
.parent span {
font-size:14;
} 
```

**更新**

需要有 !important 来覆盖内联规则。

但无论如何谁使用内联规则。你不应该。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-16T10:15:37.230

```
<div style="background: red;">
    The inline styles for this div should make it red.
</div> 
```

我们可以用这个来解决这个问题：

```
div[style] {
   background: yellow !important;
} 
```

当然，只需在 [style] 之前的 div 中添加一个类，即可使用您添加的类更改 div。例子：

```
div.myclass[style] 
```

# objective-c - 了解 Json 和 NSData

> ID：15565545
> 
> 赞同：1
> 
> 时间：2013-03-22T08:09:11.817
> 
> 标签：objective-c

我们必须创建一个 Jason 文件以发送到服务器。我发现这样做的方法是：

```
NSDictionary* dic = @{@"Username" :userName,
                          @"Firstname" :firstName,
                          @"Lastname" : lastName,
                          @"Email" : email,
                          @"Password" : pass,
      };
     NSData* json = [NSJSONSerialization dataWithJSONObject:dic options:0 error:nil]; 
```

我真的不明白为什么在创建`dic`已经是 Json 文件的 之后，我必须`NSJSONSerialization`在创建`NSData`? ，为什么不把 设置`dic`为`NSData`？这个序列化到底是做什么的？另外，为什么不创建一个`NSString`包含这个结构的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:21:27.580

`dic`是一个 Objective-C 字典（键值对的集合），与 JSON 无关。打印字典可能看起来类似于 JSON，但事实并非如此。

`NSJSONSerialization`从字典创建 JSON 数据。JSON 是一种文本格式，并记录在此处，例如：http: [//www.json.org](http://www.json.org)。字典的 JSON 数据如下所示：

```
{"Firstname":"John","Email":"jon@apple.com","Username":"john","Lastname":"Doe","Password":"topsecret"} 
```

这`NSJSONSerialization`创造`NSData`而不是`NSString`只是该类作者的设计决定。您可以将数据转换为字符串

```
NSString *jsonString = [[NSString alloc] initWithData:json encoding:NSUTF8StringEncoding]; 
```

# ext.net - ext.net 中的组合框侦听器

> ID：15565552
> 
> 赞同：0
> 
> 时间：2013-03-22T08:10:05.687
> 
> 标签：ext.net

我有一个 Ext.Net.ComboBox。它已通过使用 sql 查询填充。

现在我需要根据输入的文本过滤组合框的元素。

例如。组合框包含以下值。

```
Test1  
Test2  
MyTest  
ComboTest 
```

因此，当我在组合框中输入值“Com”时，它应该过滤并仅显示 ComboTest。但是，如果我输入 Test，则应该显示 Test1、Test2 和 ComboTest。

请帮帮我。提前致谢。

编辑：参考[这个](http://forums.ext.net/showthread.php?16466-CLOSED-combobox-search-pattern)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:27:46.223

根据此线程尝试以下操作：[http ://forums.ext.net/showthread.php?16466-CLOSED-combobox-search-pattern](http://forums.ext.net/showthread.php?16466-CLOSED-combobox-search-pattern)

```
<%@ Page Language="C#" %>

<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!X.IsAjaxRequest)
        {
            Store store = this.ComboBox1.GetStore();
            store.DataSource = new object[] 
            { 
                new object[] { "1", "ab" },
                new object[] { "2", "ac" },
                new object[] { "3", "ba" },
                new object[] { "4", "bc" },
                new object[] { "5", "ca" },
                new object[] { "6", "cb" }
            };
            store.DataBind();
        }
    }
</script>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Ext.Net Example</title>
</head>
<body>
    <form runat="server">
        <ext:ResourceManager runat="server" />
        <ext:ComboBox 
            ID="ComboBox1" 
            runat="server" 
            MinChars="1"
            Mode="Local">
            <Store>
                <ext:Store runat="server">
                    <Reader>
                        <ext:ArrayReader>
                            <Fields>
                                <ext:RecordField Name="value" />
                                <ext:RecordField Name="text" />
                            </Fields>
                        </ext:ArrayReader>
                    </Reader>
                </ext:Store>
            </Store>
            <Listeners>
                <BeforeQuery Handler="var q = queryEvent.query;
                                      queryEvent.query = new RegExp(q);
                                      queryEvent.query.length = q.length;" />
            </Listeners>
        </ext:ComboBox>
    </form>
</body>
</html> 
```

# maven - 如何将文档部署到 Maven 站点？

> ID：15565555
> 
> 赞同：1
> 
> 时间：2013-03-22T08:10:20.507
> 
> 标签：maven, docbook

我正在使用[docbkx-tools](https://code.google.com/p/docbkx-tools/)通过使用 Maven 创建 DocBook。目前我可以制作各种格式的书。我还通过 WebDav 使用 Wagon 将我的 Maven 站点部署到 Web 服务器。

我想通过使用类似`mvn clean install site:deploy`. 你能帮忙解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:38:22.963

您只需将生成的 pdf/rtf/html 复制到正确的位置，它将与 maven-site 一起部署，或者您可以直接生成到站点的目标位置，如下所示：

```
 <plugin>
    <groupId>com.agilejava.docbkx</groupId>
    <artifactId>docbkx-maven-plugin</artifactId>
    <version>2.0.14</version>
    <dependencies>
      <dependency>
        <groupId>docbook</groupId>
        <artifactId>docbook-xml</artifactId>
        <version>4.4</version>
      </dependency>
    </dependencies>
    <executions>
      <execution>
        <goals>
          <goal>generate-pdf</goal>
        </goals>
        <phase>pre-site</phase>
        <configuration>
          <sourceDirectory>${basedir}/src/docbkx</sourceDirectory>
          <xincludeSupported>true</xincludeSupported>
          <includes>maui.xml</includes>
          <foCustomization>src/docbkx/fopdf.xsl</foCustomization>
          <targetDirectory>${project.build.directory}/site/</targetDirectory>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

您不应该使用 site:deploy 您应该使用**mvn site**和**mvn site-deploy**来运行站点[生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:48:07.357

您可以使用此属性控制 docbook 输出目录：（[`<targetDirectory>`](http://docbkx-tools.sourceforge.net/docbkx-maven-plugin/generate-pdf-mojo.html#targetDirectory)默认为`${basedir}/target/docbkx/<something dependending on the output format>`.

另一方面，`maven-site-plugin`它将获取创建到站点下的所有文件[`<inputDirectory>`](http://maven.apache.org/plugins/maven-site-plugin/deploy-mojo.html#inputDirectory)（全局，它与目录中的所有内容制作一个 zip）。默认为`project.reporting.outputDirectory`

因此，如果您将 docbook 插件更改为`<targetDirectory>`以下`maven-site-plugin <inputDirectory>`内容： docbook 输出将包含在生成的站点 zip 中。

Additionally, to be sure that your docbook plugin will be run before the site get deployed, you need to bind the docbook plugin the some phase in the `site lifecycle` before the `site-deploy`. So one of those phase is OK : `pre-site` `site` `post-site` Here is more details about [binding a plugin to a phase](http://maven.apache.org/guides/mini/guide-configuring-plugins.html#Configuring_Build_Plugins)

# java - XML 不会显示保存的 TimePicker 数据 (CurrentHour)

> ID：15565556
> 
> 赞同：1
> 
> 时间：2013-03-22T08:10:27.627
> 
> 标签：java, android, xml

我有以下 XML 文件给我一个不匹配的标签错误。任何建议都非常感谢！

（我正在尝试从 TimePicker 查看数据）

AddEditCountry java

```
import android.app.Activity; 
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener; 
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;

public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;
 private TimePicker timeEt;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.nameEdit);
      capEt = (EditText) findViewById(R.id.capEdit);
      codeEt = (EditText) findViewById(R.id.codeEdit);
      timeEt = (TimePicker) findViewById(R.id.timeEdit);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         timeEt.setCurrentHour(extras.getInt("time"));  
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  timeEt.getCurrentHour().toString(),
                  codeEt.getText().toString());
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(),
            timeEt.getCurrentHour().toString(),
            codeEt.getText().toString());
      }
   }
} 
```

add_country xml（首先将导致崩溃的 TimePicker 数据输入到系统中）

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" android:layout_weight="1">

<LinearLayout android:id="@+id/linearLayout"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" 
  android:padding="5dp">

  <EditText android:id="@+id/nameEdit"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/name_hint"
     android:inputType="textPersonName|textCapWords"/>

  <EditText android:id="@+id/capEdit"
     android:layout_width="fill_parent" 
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/cap_hint"
     android:inputType="textPersonName|textCapWords"/>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Data Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10MB" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="right"
        android:textColor="#ffffff"
        android:text="Unlimited Data" />
</LinearLayout>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Bandwidth Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10kbs" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:textColor="#ffffff"
        android:gravity="right"
        android:text="Unlimited Bandwidth" />
</LinearLayout>

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textAppearance="?android:textAppearanceSmall" />

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="WiFi Time Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<TimePicker
    android:id="@+id/timeEdit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:layout_weight="1.0" />

<EditText
    android:id="@+id/codeEdit"
    android:inputType="textUri"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:lines="1"
    android:hint="@string/code_hint"
    android:imeOptions="actionNext" />

  <Button android:id="@+id/saveBtn" 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginTop="15dp"
     android:layout_gravity="center_horizontal"
     android:text="@string/save_btn"/>
</LinearLayout>
</ScrollView> 
```

view_country xml

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content"
android:stretchColumns="1" 
android:layout_margin="5dp">

<TableRow>         
<TextView 
style="@style/StyleLabel"
android:text="@string/name_lbl"/>
<TextView 
android:id="@+id/nameText" 
style="@style/StyleText"/>         
</TableRow>

<TableRow>         
<TextView 
style="@style/StyleLabel"
android:text="@string/cap_lbl"/>         
<TextView 
android:id="@+id/capText"
style="@style/StyleText"/>         
</TableRow>

<TableRow>       
<TextView 
style="@style/StyleLabel"
android:text="@string/code_lbl"/>                    
 <TextView 
android:id="@+id/codeText"
style="@style/StyleText"/>         
</TableRow>
<TableRow>         
<TextView 
style="@style/StyleLabel"
android:text="Linked Users"/>         
<TextView 

style="@style/StyleText"/>         
</TableRow>
<TableRow>         
<TextView 
style="@style/StyleLabel"
android:text="Time Limit"/>         
<TextView 
android:id="@+id/timeEdit"
style="@style/StyleText"/>  

</TableRow>
</TableLayout>  

ViewCountry java 

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;
import android.widget.TimePicker;

public class ViewCountry extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 
   private TimePicker timeTv; 

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       timeTv = (TimePicker) findViewById(R.id.timeEdit);
       codeTv = (TextView) findViewById(R.id.codeText);
   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");
         int timeIndex = result.getColumnIndex("time");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         timeTv.setCurrentHour(result.getInt(timeIndex));
         codeTv.setText(result.getString(codeIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());
            addEditContact.putExtra("time", timeTv.getCurrentHour());
            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
}

Database Connector

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DatabaseConnector {

private static final String DB_NAME = "WorldCountries";
private SQLiteDatabase database;
private DatabaseOpenHelper dbOpenHelper;

public DatabaseConnector(Context context) {
    dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
}

   public void open() throws SQLException 
   {
      //open database in reading/writing mode
      database = dbOpenHelper.getWritableDatabase();
   } 

   public void close() 
   {
      if (database != null)
         database.close();
   }       

   public void insertContact(String name, String cap, String code, String time) 
           {
              ContentValues newCon = new ContentValues();
              newCon.put("name", name);
              newCon.put("cap", cap);
              newCon.put("time", time);
              newCon.put("code", code);

              open();
              database.insert("country", null, newCon);
              close();
           }

           public void updateContact(long id, String name, String cap,String code,  String time) 
           {
              ContentValues editCon = new ContentValues();
              editCon.put("name", name);
              editCon.put("cap", cap);
              editCon.put("time", time);
              editCon.put("code", code);

              open();
              database.update("country", editCon, "_id=" + id, null);
              close();
           }

           public Cursor getAllContacts() 
           {
              return database.query("country", new String[] {"_id", "name"}, 
                 null, null, null, null, "name");
           }

           public Cursor getOneContact(long id) 
           {
              return database.query("country", null, "_id=" + id, null, null, null, null);
           }

           public void deleteContact(long id) 
           {
              open(); 
              database.delete("country", "_id=" + id, null);
              close();
           }
} 
```

日志猫：

```
03-22 04:40:09.319: D/Activity(2206): Activity.onPause(), editTextTapSensorList size: 0
03-22 04:40:09.479: I/Adreno200-EGLSUB(2206): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-22 04:40:09.479: D/memalloc(2206): ion: Mapped buffer base:0x5d00d000 size:614400 offset:0 fd:69
03-22 04:40:09.569: D/memalloc(2206): ion: Mapped buffer base:0x5d997000 size:614400 offset:0 fd:75
03-22 04:40:09.599: D/memalloc(2206): ion: Mapped buffer base:0x5da3d000 size:614400 offset:0 fd:78
03-22 04:40:09.599: D/memalloc(2206): ion: Unmapping buffer  base:0x5c989000 size:614400
03-22 04:40:09.599: D/memalloc(2206): ion: Unmapping buffer  base:0x5ca41000 size:614400
03-22 04:40:09.599: D/memalloc(2206): ion: Unmapping buffer  base:0x5cf66000 size:614400 
03-22 04:40:15.376: D/Activity(2206): Activity.onPause(), editTextTapSensorList size: 0
03-22 04:40:15.416: I/Adreno200-EGLSUB(2206): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-22 04:40:15.426: D/memalloc(2206): ion: Mapped buffer base:0x5cf06000 size:614400 offset:0 fd:56
03-22 04:40:15.496: D/memalloc(2206): ion: Mapped buffer base:0x5ddd3000 size:614400 offset:0 fd:60
03-22 04:40:15.516: D/memalloc(2206): ion: Unmapping buffer  base:0x5d00d000 size:614400
03-22 04:40:15.516: D/memalloc(2206): ion: Unmapping buffer  base:0x5d997000 size:614400
03-22 04:40:15.526: D/memalloc(2206): ion: Unmapping buffer  base:0x5da3d000 size:614400
03-22 04:40:15.556: D/memalloc(2206): ion: Mapped buffer base:0x5d00d000 size:614400 offset:0  fd:63
03-22 04:40:18.409: D/Activity(2206): Activity.onPause(), editTextTapSensorList size: 0
03-22 04:40:18.469: W/dalvikvm(2206): threadid=1: thread exiting with uncaught exception  (group=0x410889d8)
03-22 04:40:18.469: E/AndroidRuntime(2206): FATAL EXCEPTION: main
03-22 04:40:18.469: E/AndroidRuntime(2206): java.lang.RuntimeException: Unable to start activity  ComponentInfo{com.nfc.linkingmanager/com.nfc.linkingmanager.ViewCountry}:  java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.TimePicker
03-22 04:40:18.469: E/AndroidRuntime(2206):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1960)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at   android.os.Handler.dispatchMessage(Handler.java:99)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at android.os.Looper.loop(Looper.java:137)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at  android.app.ActivityThread.main(ActivityThread.java:4477)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at  java.lang.reflect.Method.invokeNative(Native Method)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at  java.lang.reflect.Method.invoke(Method.java:511)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at dalvik.system.NativeStart.main(Native Method)
03-22 04:40:18.469: E/AndroidRuntime(2206): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.TimePicker
03-22 04:40:18.469: E/AndroidRuntime(2206):     at com.nfc.linkingmanager.ViewCountry.setUpViews(ViewCountry.java:38)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at com.nfc.linkingmanager.ViewCountry.onCreate(ViewCountry.java:30)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at android.app.Activity.performCreate(Activity.java:4701)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1051)
03-22 04:40:18.469: E/AndroidRuntime(2206):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1924)
03-22 04:40:18.469: E/AndroidRuntime(2206):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T08:12:39.843

这就是问题所在 - 底线，我已经分成多行：

```
<TableRow>
  <TextView style="@style/StyleLabel" android:text="Time Limit"/>
  <TimePicker android:id="@+id/timeEdit" style="@style/StyleText"/> </TimePicker>
</TableLayout> 
```

`TableRow`在关闭元素之前您还没有关闭`TableLayout`元素。

（请注意，如果您以“自然缩进”样式而不是在底部有一条长线来布置 XML，那么您自己可能会更容易看到这一点。）

我还希望您使用任何编辑器来编辑 XML 以非常清楚地显示错误，例如通过在`</TableLayout>`.

# visual-studio-2010 - 并排安装 VS 2012 后无法在 VS 2010 中构建 Windows Azure Cloud 项目

> ID：15565557
> 
> 赞同：0
> 
> 时间：2013-03-22T08:10:29.803
> 
> 标签：visual-studio-2010, visual-studio-2012, side-by-side, azure-sdk-.net

根据 Microsoft 的说法，支持并行安装**Visual Studio 2010**和**2012** ( [http://msdn.microsoft.com/en-us/library/ms246609.aspx](http://msdn.microsoft.com/en-us/library/ms246609.aspx) )。

我的系统上已经安装了 VS 2010（**Windows 7 框**) 以及 Windows Azure 工具 1.5。我使用此配置创建了一个托管在 Azure 上的云项目。几天前，我决定将 VS 2012 也安装到我的系统上，但以并行方式进行，而不是升级（或卸载）VS 2010。我不想卸载 VS 2010 的原因是我已经为它配置了一些附加组件，用于脚本和 css 缩小和聚合。我听说 VS 2012 内置了这个功能，但我不想碰我已经使用旧方法创建的几十个脚本。所以我想让我的 VS 2010 环境保持在一个原始的工作状态，以防出现紧急情况，我不得不为我已经托管的应用程序发布一个补丁。我会在未来的所有新项目中使用 VS 2012。

但是，在我将 VS 2012 放在我的盒子上之后，它也降低了 1.8 版本的 Azure SDK。结果，我无法再成功构建我的 VS 2010 解决方案。在该解决方案中，我有一个工人角色和一个网络角色。如果我单独构建它们中的每一个，则构建成功。但是，如果我随后尝试构建整个解决方案或将其打包，它将失败，并且日志中没有任何消息。它只是在 VS 状态栏中显示“构建失败”。

由于我在状态栏中没有收到任何错误，因此我决定在 VS 2010 中使用 Windows Azure Cloud 项目模板从头开始创建一个只有一个 Web 角色的“Hello World”应用程序，以期获得更好的错误消息。事实上，当我尝试构建整个解决方案时，我得到了一个错误：

**错误 102 WAT080：未能找到 Windows Azure SDK。请确保已安装 Windows Azure SDK v1.5。C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Windows Azure Tools\1.5\Microsoft.WindowsAzure.targets**

显然，VS 2012 和 Azure SDK 1.8 的安装损坏了旧版本。理想情况下，我希望 VS 2010 + Azure SDK 1.5 与 VS 2012 + Azure SDK 1.8 真正并排。有没有办法做到这一点？如果没有，那么我该如何解决上面的错误？换句话说，如何修复 VS 2010 以使用 Azure SDK 1.8？

非常感谢您提供的所有帮助。

问候， 阿基尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:49:58.310

我通过访问 Microsoft 站点并安装适用于 .NET 的 Windows Azure SDK - 2012 年 10 月 (1.8) 解决了这个问题。

[http://www.microsoft.com/en-us/download/details.aspx?id=35448](http://www.microsoft.com/en-us/download/details.aspx?id=35448)

最初我有点害怕，人们说它不起作用，他们鼓励进行手动的一对一安装。但是，我决定使用上面页面中的 Web Platform Installed 链接：

[http://go.microsoft.com/fwlink/?LinkId=254269](http://go.microsoft.com/fwlink/?LinkId=254269)

总而言之，事情进展得很顺利。

# android - 获取带有音频文件的图像

> ID：15565559
> 
> 赞同：0
> 
> 时间：2013-03-22T08:10:40.907
> 
> 标签：android, media-player, media

我要播放媒体文件我得到了大部分音频文件的内容。我想要媒体文件的图像。我使用以下代码片段来获取音频文件内容。我无法使用媒体文件获取图像。所以请帮助我获取音频文件专辑图像。

```
String[] proj = { MediaStore.Audio.Media._ID,
                          MediaStore.Audio.Media.DATA,
                          MediaStore.Audio.Media.DISPLAY_NAME,
                          MediaStore.Audio.Media.SIZE,
                          MediaStore.Audio.Media.TITLE,
                          MediaStore.Audio.Media.ARTIST,
                          MediaStore.Audio.Media.COMPOSER,
                          MediaStore.Audio.Media.DURATION                              

                         }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T08:16:40.603

在这里我可以附加一个从媒体商店返回专辑封面的功能。在函数中，我们只需要传递从 Media store 获得的 album_id 。

```
 public Bitmap getAlbumart(Long album_id) 
 {
    Bitmap bm = null;
    try 
    {
        final Uri sArtworkUri = Uri
            .parse("content://media/external/audio/albumart");

        Uri uri = ContentUris.withAppendedId(sArtworkUri, album_id);

        ParcelFileDescriptor pfd = context.getContentResolver()
            .openFileDescriptor(uri, "r");

        if (pfd != null) 
        {
            FileDescriptor fd = pfd.getFileDescriptor();
            bm = BitmapFactory.decodeFileDescriptor(fd);
        }
} catch (Exception e) {
}
return bm;
} 
```

# xcode - 在 Xcode 4.6 中禁用本地 git 存储库

> ID：15565564
> 
> 赞同：3
> 
> 时间：2013-03-22T08:11:10.693
> 
> 标签：xcode, git, version-control

在以前的 Xcode 版本中，在创建新项目时曾经有一个复选框，可以切换创建本地 git 存储库。

这似乎在最新版本中消失了。我正在运行 4.6.1，尽管它可能已在 4.6 中删除。

我使用另一个源代码控制（Subversion），所以所有这些额外的 git 文件可能会很烦人。我知道如何删除 .git 文件夹并删除 git 存储库，但是有什么方法可以防止 Xcode 首先自动创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:17:55.550

该复选框存在于 Xcode 4.6.1 中。它位于为新项目选择名称*后出现的**选择路径*对话框的底部。

 *标签上写着：

```
Source Control: Create local git repository for this project
                Xcode will place your project under version control 
```*

# encoding - 如何使用 WSO2 ESB 将 ¿ 编码为 ISO-8859

> ID：15565568
> 
> 赞同：0
> 
> 时间：2013-03-22T08:11:21.480
> 
> 标签：encoding, jms, wso2, wso2esb

在评估样本数据的过程中，我发现了以下问题。当 JMS 中的内容包含“颠倒的问号”`<test>Inverted¿QuestionMark</test>`时，代理会崩溃 - 实际上**会挂起，CPU 会上升到 100%**。这里的代理代码很容易重现：

只需添加`<test>Inverted¿QuestionMark</test>`到名为“test_qEncoding”的队列中，然后查看 CPU 启动情况和代理挂起情况。

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse" name="test_encoding_crash_jms" transports="jms" startOnLoad="true" trace="disable">
    <parameter name="transport.jms.Destination">test_qEncoding</parameter>
    <parameter name="transport.jms.ConnectionFactory">myQueueConnectionFactory</parameter>
    <parameter name="transport.jms.DestinationType">queue</parameter>
    <parameter name="transport.jms.ContentType">
        <rules>
            <jmsProperty>contentType</jmsProperty>
            <default>application/xml;charset="iso-8859-15"</default>
        </rules>
    </parameter>
    <target>
        <inSequence>        
            <log level="custom">
                <property name="Context" value="Proxy test_encoding_crash_jms called"/>
            </log>
            <log level="full"/>
        </inSequence>
    </target>
</proxy> 
```

当我使用 vfs 代理并读取为 ISO-8859 时，它可以工作。当我没有指定`;charset="iso-8859-15"`时，它也可以工作，但是内容对于我的输出来说不是正确的结尾。

**当我想将它作为 ISO-8859 发送时，我应该如何从 JMS 获取消息？**

**为什么上述代理会挂起并阻塞整个 WSO2 ESB？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:04:29.007

这在某个时候被报道过[1]。似乎是一个存在的问题。有关详细信息，请参阅 JIRA。此外，如果您可以始终如一地复制它，请提及这一点，以便我们提高优先级。

[1] [https://wso2.org/jira/browse/ESBJAVA-1751](https://wso2.org/jira/browse/ESBJAVA-1751)

# iphone - MKMapView 无法按位置设置中心

> ID：15565569
> 
> 赞同：1
> 
> 时间：2013-03-22T08:11:23.157
> 
> 标签：iphone, ios, mkmapview, cllocationmanager, mkannotation

我想在 MKMapView 上获取当前位置并动画到这个坐标。我得到了当前位置，但我没有在 MKMapView 上对这个位置进行动画处理。如何使用蓝点动画到当前位置？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    locationManager = [[CLLocationManager alloc] init];

    self.mapView.delegate = self;
    [self.mapView setShowsUserLocation:YES];

    locationManager.delegate=self;
    locationManager.desiredAccuracy=kCLLocationAccuracyBest;
    locationManager.distanceFilter=kCLDistanceFilterNone;

    [locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{

    location = [locationManager location];

    CLLocationCoordinate2D coord;
    coord.longitude = location.coordinate.longitude;
    coord.latitude = location.coordinate.latitude;
    lat = coord.latitude;
    longt = coord.longitude;

    [self.mapView setCenterCoordinate:coord animated:TRUE];
}

- (void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views

{
    MKAnnotationView *annotationView = [views objectAtIndex:0];
    id<MKAnnotation> mp = [annotationView annotation];
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([mp coordinate] ,250,250);
    [mv setRegion:region animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:41:55.897

```
self.mapView.userTrackingMode = MKUserTrackingModeFollow 
```

这将使用蓝点跟随用户位置，这似乎是您想要实现的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:51:53.937

您必须注册 MKMapView 的 userLocation.location 属性的 KVO 通知。

为此，请将此代码放在 ViewController 的 viewDidLoad: 中或初始化地图视图的任何位置。

```
[self.mapView.userLocation addObserver:self forKeyPath:@"location"  
           options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld)   context:NULL]; 
```

然后实现这个方法来接收KVO通知

```
- (void)observeValueForKeyPath:(NSString *)keyPath  ofObject:(id)object  change:(NSDictionary *)change  context:(void *)context
 {  

    if ([self.mapView showsUserLocation])
    {  
        [self moveOrZoomOrAnythingElse];
    }
} 
```

# android - 是否有必要在市场上发布应用程序以实现 android 的深度链接

> ID：15565575
> 
> 赞同：1
> 
> 时间：2013-03-22T08:11:40.113
> 
> 标签：android, facebook, google-play, tap, deep-linking

我想在我的应用程序中实现深度链接，但我的应用程序现在没有在市场上发布。我可以成功地从我的应用程序发送消息。当我点击消息时，它不会打开我的设备上安装的应用程序。我还在我的设备上安装了 facebook 默认应用程序。如果我的应用程序已安装，它应该在我的设备上点击我在 fb 墙上的帖子时打开我的应用程序，否则它应该使用浏览器。

我跟着这个链接： -

[https://developers.facebook.com/docs/mobile/android/deep_linking/#deeplink](https://developers.facebook.com/docs/mobile/android/deep_linking/#deeplink)

但我没有得到 Android Market App 的字段来将市场 url 放入文档中。据说这个字段是自动生成的。在市场上发布应用程序以实现深度链接也是必要的。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:22:12.780

不，不需要发布深度链接即可工作。深度链接会先尝试访问你的应用，如果你的应用不在设备上，它会使用 android market url 引导用户安装你的应用。如果您正在测试，只需在您的设备上安装该应用程序就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:11:49.483

它没有必要发布应用程序。您可以通过在设备上安装应用程序来检查它。但如果您要发送额外的信息请求。那么根据您的 requestId 接收该信息应该有问题。因为在我的情况下，当我的手机上安装了应用程序时，我收到了信息。但是当我的手机上没有安装应用程序并且通知带我去玩商店安装应用程序时，我无法收到带有信息的 requestId。必须面对这样的问题？

# c++ - Caesar Cipher C++（使用 char 指针和 shift 作为参数）

> ID：15565577
> 
> 赞同：1
> 
> 时间：2013-03-22T08:11:51.857
> 
> 标签：c++, pointers, char, encryption

我正在寻找这样的方法（它使用用户输入的 Caesar Cipher 加密消息并显示它）：

```
void encrypt(char *message, int shift); 
```

我的代码：

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <string.h>

char num(char c)
{
    const char upper_alph[26] = {'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'};
    const char lower_alph[26] = {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};

    if(isupper(c)) {
        for(int i = 0; i < 26; i++)
            if(upper_alph[i] == c)
                return i;
    } else {
        for(int i = 0; i < 26; i++)
            if(lower_alph[i] == c)
                return i;
    }
    return 0;
}

void encrypt(char *message, int shift)
{
    int i = 0;
    const char upper_alph[26] = {'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'};
    const char lower_alph[26] = {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};
    while(message[i] != NULL)
    {
        if(isalpha(message[i]))
        {
            if(isupper(message[i])) {
                printf("%c", upper_alph[(num(message[i])+shift)%26]);
            } else {
                printf("%c", lower_alph[(num(message[i])+shift)%26]);
            }
        } else {
            printf("%c", message[i]);
        }
            i++;
    }
}

#define OK       0
#define NO_INPUT 1
#define TOO_LONG 2

static int getLine (char *prmpt, char *buff, size_t sz) {
    int ch, extra;

    // Get line with buffer overrun protection.
    if (prmpt != NULL) {
        printf ("%s", prmpt);
        fflush (stdout);
    }
    if (fgets (buff, sz, stdin) == NULL)
        return NO_INPUT;

    // If it was too long, there'll be no newline. In that case, we flush
    // to end of line so that excess doesn't affect the next call.
    if (buff[strlen(buff)-1] != '\n') {
        extra = 0;
        while (((ch = getchar()) != '\n') && (ch != EOF))
            extra = 1;
        return (extra == 1) ? TOO_LONG : OK;
    }

    // Otherwise remove newline and give string back to caller.
    buff[strlen(buff)-1] = '\0';
    return OK;
}

int main()
{
    //reverse();
    //printf("\n\n");
    int rc;
    char mes[1024];
    int sh = 0;
    rc = getLine ("Enter message to be encrypted: ", mes, sizeof(mes));
    if (rc == NO_INPUT) {
        // Extra NL since my system doesn't output that on EOF.
        printf ("\nNo input\n");
        return 1;
    }
    if (rc == TOO_LONG) {
        printf ("Input too long [%s]\n", mes);
        return 1;
    }
    encrypt(mes, 1);
    fflush(stdin);
    getchar();
    return 0;
} 
```

感谢任何帮助或试图提供帮助的人。

:)

编辑：做了很多更正。还是行不通 ：/

EDIT2：做了更多的更正。获取访问冲突@ "while(*message != '\0')"

EDIT3：将上面的代码更新为工作代码。谢谢你们每一个人的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:15:52.023

它不起作用，因为您没有为以下内容分配内存`mes`：

```
char mes[512]; // Enough space! 
```

* * *

使用`std::string`更简单：

```
string mes;
int sh = 0;
cout << "Enter message to be encrypted: " << endl;
getline(cin, mes);
cout << "Enter a shift amount (1-25): " << endl;
cin >> sh;
encrypt(mes, sh); 
```

并将`encrypt`功能更改为：

```
void encrypt(const string &message, int shift) 
```

* * *

并将您的角色保持在范围内：

```
 upper_alph[(num(message[i])+shift)%26]
 lower_alph[(num(message[i])+shift)%26] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:15:52.127

一个问题是你永远不会环绕。考虑一下，如果您通过任何正位移传递了诸如“Z”或“z”之类的东西，那么您只会在数组之外递增。

您需要执行以下操作：

```
upper_alph[(num(message[i])+shift)%26]
    and
lower_alph[(num(message[i])+shift)%26] 
```

您还需要为以下内容分配内存`mes`：

```
char mes[1024]; 
```

我相信你`scanf`也是不正确的（`c`是一个字符，`s`是一个字符串）：

```
scanf("%s", mes); 
```

但是，使用`%s`只会读取直到它得到空白，更好的选择可能是使用[`getline()`](https://stackoverflow.com/a/12607449/1711796).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T08:16:24.777

您将在以下几行中收到“索引超出范围”错误：

```
 if(isupper(message[i])) {
            printf("%c", upper_alph[num(message[i])+shift]);
        } else {
            printf("%c", lower_alph[num(message[i])+shift]);
        } 
```

您需要提前计算索引并确保它在 0 到 25 之间：

```
int shiftedIndex = (num(message[i]) + shift) % 26; 
```

您是否知道您的代码仅适用于英语作为输入语言？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T09:09:51.503

这里有一个基本问题，OP 不理解。也就是说，对于计算机来说，字母只是数字。是我们人类为这些数字赋予意义，我们甚至无法决定哪些数字意味着什么（参见关于 ASCII、EBDIC 和 Unicode 问题的评论）。

[下表](http://www.asciitable.com/)显示了 ASCII 标准如何将数字映射到字母。

请注意，字符“a”是 97，“b”是 98，“c”是 99，依此类推。大写字符从 65 开始并从那里向上。另请注意，字母“a”和“A”在同一行！这意味着大写字母和小写字母的低 5 位的位模式相同。最后，由于计算机只将字符视为数字，因此它可以对它们进行数字运算：-

```
'd' - 'a' == 3
100 - 97 
```

要注意的第二件事是，从数学上讲，Caeser 密码只是模数的加法：-

```
encoded character = (plain text character + shift) mod 26 
```

所以现在代码可以更有效地编写：-

```
void Encode (char *message, int shift)
{
  while (*message)
  {
    char c = *message;

    if (isalpha (c)) // check c is a letter
    {
      // get the letter index: this maps 'A' to 0, 'B' to 1, etc
      // it also maps 'a' to 32 (97 - 65), 'b' to 33, etc
      c -= 'A'; 

      // this is 32 for lower case characters and 0 for upper case
      char case_of_c = c & 32; 

      // map 'a' to 'A', 'b' to 'B'
      c &= 31; 

      // the caeser shift!
      c = (c + shift) % 26; 

      // restore the case of the letter
      c |= case_of_c; 

      // remap the character back into the ASCII value
      c += 'A'; 

      // save the result of the shift
      *message = c; 
    }

    ++message;
  }
} 
```

# jquery - CSS Display:none - 它仍然加载 DOM 中的所有内容吗？

> ID：15565586
> 
> 赞同：4
> 
> 时间：2013-03-22T08:12:32.383
> 
> 标签：jquery, css, browser, pageload

再会

问题：在给予财产时

```
display: none; 
```

到一个 div，浏览器还会加载它的所有内容吗？还是只显示一次？

我想要实现的是将许多网页合并为一个，而不是每次都将用户引导到一个新页面，我只显示与他单击的项目相关的 div（在页面加载时隐藏）..

现在我的问题是，当所有这些隐藏的 div 以前是单独的网页上的内容时，它会减慢整个初始页面加载还是不会影响它，因为 div 是隐藏的，只有在调用时才**加载**和显示?

* * *

我的下意识反应是浏览器加载服务器提供的所有内容，然后在收到 css 规则时隐藏 div ......加载已经完成

在这种情况下，您如何有效地让用户停留在一个页面上，同时由于所有内容而最大限度地减少加载时间？

**更新**：所以我可以使用 Ajax 或只使用 jQuery 添加我不想加载的内容，对吗？但是如果我使用 jQuery，内容仍然需要在 jQuery 函数中定义，并且最初也会加载......？

这是一个场景：

HTML（初始）

```
<div>
inital content that I want loaded initially
<a>Action to call hidden content I don't want loaded initially<a/>
</div> 
```

jQuery：

```
$('div a').click(function(){
   $('div').append('<div>new content that I don;t want loaded initially....</div>');
}); 
```

但是，上面的新内容仍然会被加载，因为它是在 jQuery 模型中......

我在这里错了吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:15:06.810

在 html 页面的情况下，整个页面在发出请求时由服务器提供，然后在呈现浏览器时简单地隐藏它。

如果您想要延迟加载，您可能需要查看[AJAX 技术](https://developer.mozilla.org/en/docs/AJAX)。

使用 ajax，您可以在需要时加载内容，然后将其添加到 dom。

除了使用浏览器提供的原始 AJAX API，您还可以查看像[jQuery](http://jquery.com/)这样的库，它提供跨平台支持表单进行[ajax 调用](http://api.jquery.com/jQuery.ajax/)和[dom 操作](http://api.jquery.com/category/manipulation/)

前任：

```
$.ajax({
    url: 'my-content-url',
    method: 'GET'
}).done(function(html){
    $('#my-container').html(html)
}) 
```

此示例对 ajax 进行调用，`my-content-url`并在成功完成后，将返回的 html 添加到具有 id 的元素中`my-container`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:17:26.643

对于您的问题，是的，`CSS Display:none`加载 DOM 中的所有内容。尽量减少加载时间的更好办法是使用 AJAX。最初，不应加载隐藏的内容。当用户请求查看隐藏内容时，通过使用 ajax（我更喜欢 jQuery AJAX），应该加载内容。这将减少页面加载。但是，由于 AJAX 请求，可能会有一些加载延迟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T08:14:46.893

浏览器仍会下载所有隐藏的 HTML。您所做的正常模式是通过 AJAX 加载其他内容，然后显示它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T08:17:01.013

当您的页面加载所有 HTML 内容时，即使它是 hide 。它只是隐藏未删除。

所以最好通过 Ajax 加载内容并将其显示在您想要显示的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T08:18:05.693

浏览器会加载所有显示或不显示的 div。如果您想快速加载您的网站，请删除不需要的 div 或从内容中隐藏 div

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-13T10:08:15.883

CSS 不能改变 dom。以下是浏览器流程

*   从 html构造**dom**
*   从 css构造**cssom**（css 对象模型）
*   **从dom**和**cssom**构造渲染树

 **因此 css 只能更改将显示在浏览器上的渲染树。**

# c# - 更改 DevExpress TreeList 的底层 IVirtualTreeList 数据源的结构

> ID：15565588
> 
> 赞同：1
> 
> 时间：2013-03-22T08:12:38.460
> 
> 标签：c#, devexpress, xtratreelist

我有显示我的业务对象层次结构的 TreeList，它的所有部分都实现了 IVirtualTreeListData。但是，在某些时候我想进行更改：删除一些数据，可能添加一些数据或将叶子移动到另一个包含节点。我可以对底层业务对象进行更改，但显示的树不受影响。

我认为原因在于 TreeList 遍历 IVirtualTreeListData 的层次结构一次（它对应于节点的第一次扩展），然后只使用存储在途中检索到的节点中的数据。那么，如何将数据源的变化传播到视图中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:52:34.940

要启用 XtraTreeList 节点层次结构与底层业务对象的自动同步，请为您作为[VirtualTreeGetChildNodesInfo.Children](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraTreeListVirtualTreeGetChildNodesInfo_Childrentopic)属性提供的子对象集合实现[IBindingList接口。](http://msdn.microsoft.com/en-us/library/system.componentmodel.ibindinglist.aspx) 完成此任务的最简单方法是在 BusinessObject 中创建一个实例来存储所有子对象并将其分配给方法实现中的属性。在这种情况下，当您的对象被更改或删除时，TreeList 将自动刷新相应的节点。
`BindingList<YourBusinessObject>()``info.Children``IVirtualTreeListData.VirtualTreeGetChildNodes()`

# lambda - Scheme 编写返回函数的函数

> ID：15565590
> 
> 赞同：0
> 
> 时间：2013-03-22T08:12:42.060
> 
> 标签：lambda, scheme

我无法定义一个函数，根据给定的参数“标志”，在 Scheme 中返回一个函数：

```
 (define con-func
  (lambda(f a flag)
    (cond (= flag 0) (lambda (x) (f (+ x a)))
          (= flag 1) (lambda (x) (f (- x a)))
          (= flag 2) (lambda (x) (f (* x a)))
          (= flag 3) (lambda (x) (f (/ x a)))
          (else (lambda (x) f x))))) 
```

我收到一个错误：`lambda: bad syntax in: lambda <br />` 我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:12:54.787

不，您添加的括号在错误的位置。`cond`子句的形式是`(test result ...)`，因此括号中的第一个表达式应该是您的测试，然后是结果。

```
(define (con-func f a flag)
  (cond ((= flag 0) (lambda (x) (f (+ x a))))
        ((= flag 1) (lambda (x) (f (- x a))))
        ((= flag 2) (lambda (x) (f (* x a))))
        ((= flag 3) (lambda (x) (f (/ x a))))
        (else f))) 
```

当然，在这种情况下，由于您要针对一堆常量测试相同的值，您可以简化为使用 a `case`：

```
(define (con-func f a flag)
  (case flag
    ((0) (lambda (x) (f (+ x a))))
    ((1) (lambda (x) (f (- x a))))
    ((2) (lambda (x) (f (* x a))))
    ((3) (lambda (x) (f (/ x a))))
    (else f))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:35:27.997

您返回的 lambda 已经“关闭”了`f`and的值`a`。为什么不关闭的价值`operator`为好。像这样：

```
(define (con-func f a flag)
  (let ((operator 
         (case flag
          ((0) +)
          ((1) -)
          ((2) *)
          ((3) /)
          (else (lambda (a b) a)))))
    (lambda (x) (f (operator x a))))) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T08:33:12.487

我少了一个括号。。

正确的语法是：

```
 (define con-func
  (lambda(f a flag)
    (cond (= flag 0) ((lambda (x) (f (+ x a))))
          (= flag 1) ((lambda (x) (f (- x a))))
          (= flag 2) ((lambda (x) (f (* x a))))
          (= flag 3) ((lambda (x) (f (/ x a))))
          (else (lambda (x) f x))))) 
```

# regex - 批处理文件以删除具有特殊名称的文件夹

> ID：15565599
> 
> 赞同：0
> 
> 时间：2013-03-22T08:13:21.510
> 
> 标签：regex, batch-file, cmd

我想删除所有只有数字名称的文件夹。所以我使用正则表达式编写了一个批处理文件：

```
@echo off

D:
cd D:\Install\Work

for /d %%i in (*|findstr "^[0-9]*$") do (
      rd /s /q %%i
)

echo [all the folders under work are deleted!]

pause 
```

但它不起作用。错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:25:08.900

```
@ECHO OFF
SETLOCAL
FOR /f %%x IN (
 'dir /ad /b * ^|FINDSTR "^[0-9]*$" '
 ) DO ECHO %%x 
```

`FOR /F`从文件/命令输出读取行到元变量。

`for /d`只需将目录名应用于元变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:46:04.037

试试这个：

```
@echo off

for /r D:\Install\Work %%d in (.) do (
  echo %%~nxd|findstr "^[0-9]*$" >nul && rd /s /q "%%~fd"
) 
```

请注意，这将删除所有数字文件夹，即使它们包含名称不仅由数字组成的其他文件夹！

*   `%%~nxd``%%d`：从( )中删除封闭的双引号并仅`~`扩展名称 ( `n`) 和扩展名 ( `x`)
*   `>nul`: 抑制 STDOUT 上的输出
*   `%%~fd``%%d`：从( )中删除封闭的双引号`~`并扩展完整路径 ( `f`)

# bash - bash printf 换行

> ID：15565605
> 
> 赞同：19
> 
> 时间：2013-03-22T08:13:45.987
> 
> 标签：bash, printf

我对在 bash 中打印包含换行符的变量有点困惑。

```
var="Age:\n20\ncolor:\nred"
echo -e $var
Age:
20
color:
red 
```

这是可行的，但是很多人说带有选项的 echo[不可移植](http://www.in-ulm.de/%7Emascheck/various/echo+printf/)，[最好使用 printf](https://unix.stackexchange.com/questions/65803/why-is-printf-better-than-echo)。

我从来没有用过prinf。根据手册发出 echo 命令：

```
printf '%s\n' "$var"
Age:\n20\ncoloe:\nred 
```

但这不会解析 \n 内部变量。手册通常有这个例子：

```
printf "Surname: %s\nName: %s\n" "$SURNAME" "$LASTNAME" 
```

但这不是我的情况，从我的角度来看，它使用起来不舒服。我只需键入即可发现我可以使用它：

```
printf "$var\n" 
```

它是便携式的吗？如果我然后将 $var 传递给邮件命令，它会保存新的换行符吗？

```
printf "$var\n" | mail -s subj email@domain.com 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-22T08:43:55.900

`printf`的`%b`格式说明符专门用于替换（实际上，默认情况下需要对参数进行特殊解释的`echo -e`XSI 扩展名。从未指定过，POSIX 不允许这样做。），并且几乎在所有方面都是相同的，包括与和格式字符串参数。`echo``-e``$'...'``printf`

```
 $ ( var='Age:\n20\ncolor:\nred'; printf '%b\n' "$var" )
Age:
20
color:
red 
```

您通常应该避免将变量扩展为格式字符串，除非您的程序控制了确切的值并且它专门用作格式字符串。`printf`由于'`-v`选项，您的最后一个示例在 Bash 中可能非常危险。

```
# Bad!
var='-v_[$(echo "oops, arbitrary code execution" >&2)0]'
printf "$var" foo 
```

`%b`除非您有特殊的可移植性要求，否则通常避免这种做法是一种好习惯。将转义码存储在变量中而不是文字数据中违反了代码和数据分离的原则。在某些情况下这是可以的，但通常最好使用`$'...'`引用来分配值，这是为 POSIX 的下一版本指定的，并且长期以来在 Bash 和大多数 ksh 风格中都可用。

```
x=$'foo\nbar'; printf '%s\n' "$x"    # Good
x=(foo bar); printf '%s\n' "${x[@]}" # Also good (depending on the goal)
x='foo\nbar'; printf '%b\n' "$x"     # Ok, especially for compatibility
x='foo\nbar'; printf -- "$x"         # Avoid if possible, without specific reason 
```

*   [http://wiki.bash-hackers.org/commands/builtin/printf](http://wiki.bash-hackers.org/commands/builtin/printf)

# php - jquery/javascript 中是否有任何 onDownloadComplete 事件？

> ID：15565606
> 
> 赞同：-1
> 
> 时间：2013-03-22T08:13:48.700
> 
> 标签：php, javascript, jquery, html, javascript-events

我想跟踪特定文件的下载时间。所以我在找有没有

```
$(window).downloadComplete(function()
{....
}); 
```

如果没有，是否可以通过 PHP/javascript 跟踪文件的下载使用时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:18:35.500

您可以使用该`onload`事件来捕获加载某些内容（例如图像）的时间，或者您可以使用带有成功回调的 AJAX 请求：

```
$.get('somefile.txt', function () {
    // executes when somefile.txt has been retrieved
}); 
```

这是一个图像的加载示例，它甚至不使用 jQuery：

```
var myImage = new Image();
myImage.onload = function () {
    // executes when the image is loaded
};
myImage.src = 'myimage.png'; 
```

如果您对当前页面的加载时间感兴趣，您可以使用两个事件。

文件准备好（HTML 已全部下载）

```
$(function () { 
    // the DOM is ready (so the HTML is downloaded, but images etc may not be)
}); 
```

onload（下载文档和所有资源和图像）

```
window.onload = function () {
    // the DOM and all images etc are downloaded
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:19:29.443

你的意思是在页面上完全加载？
很简单：
`$`(document).onload(){
//do something
}

# javascript - Adding a grid on canvas bring some lag, optimisations?

> ID：15565612
> 
> 赞同：-1
> 
> 时间：2013-03-22T08:13:55.653
> 
> 标签：javascript, canvas

That's the code: [http://jsfiddle.net/Mgq79/3/](http://jsfiddle.net/Mgq79/3/)

```
 for (var xgrid = 0; xgrid < (canvasWidth / grid_step); xgrid++)
  {
    ctx.moveTo(xgrid * grid_step, 0);
    ctx.lineTo(xgrid * grid_step, canvasHeight);
  }
  for (var ygrid = 0; ygrid < (canvasHeight / grid_step); ygrid++)
  {
    ctx.moveTo(0, ygrid * grid_step);
    ctx.lineTo(canvasWidth, ygrid * grid_step);
  } 
```

Long story short - after adding the grid, noticed some lag while rendering at small velocity values (<=150m/s) while it was almost smooth near upper 1000m/s limit. So how to optimise this part?

Thanks

ps link updated Also note that lag is very noticeable when trajectories are 3 or more

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:40:04.380

For me works about the same. It's only 1 ms difference which I'm sure you can't really notice.

I for one would really want to skip drawing that grid over and over and I would make the canvas transparent and have the grid as a repeating background image of the canvas container.

Or draw it once on a temp canvas and then use drawimage and just move it over to your canvas if redrawing it is necessary for some reason.

Also, you should use a path to draw the graph and not 1x1 rectangles. The path can be finished after all the points are there. Drawing and filling a rectangle at every iteration is bound to be slow.

# javascript - 如何在多选组合框中动态选择值 - LovCombo ExtJS 3.2

> ID：15565619
> 
> 赞同：0
> 
> 时间：2013-03-22T08:14:27.063
> 
> 标签：javascript, extjs, combobox

我在 ExtJS 3.2 中使用 lovcombo。我为组合框的初始加载获取数据，并且我得到了正确的数据。但是现在我有一个要求，假设最初我在组合框中有 10 个条目（选项），我现在需要动态选择 5 个选项。实际上我正在使用它来显示依赖实体映射。意味着一个实体依赖于许多其他实体，因此在多选组合框中显示它们。当我获得根实体时，我需要为我的根实体获取依赖实体，因此我将在组合框中动态选择这些条目。这是我的代码 -

```
{
    xtype: 'lovcombo',
    fieldLabel: 'data Requirement ',
    store: dep_req_store,
    displayField: 'text',
    valueField: 'value',
    mode: 'local',
    emptyText: 'Select Requirement...',
    triggerAction: 'all',
    name: 'data_id',
    id: 'data_id' + idSuf,
    hiddenName: 'reqIdHid3',
    width: 200,
    forceSelection: true,
    editable: true,
    hideOnSelect: false,
    beforeBlur: Ext.emptyFn,
} 
```

我将在加载后遍历此组合的每个元素，并选择必要的选项：

```
Ext.getCmp('data_id' + idSuf).getStore().data.items.each(function(record) {
    record.dirty = true; //I tried this but no success.
}); 
```

此外，我没有找到任何可以帮助我选择以下选项的属性：

```
record.selected = true 
```

所以，请帮助我。是否可以使用 lovcombo 实现这一目标？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:51:09.337

在记录的字段定义中，您可以创建一个名为 的新字段`checked`，该字段默认情况下由 lovcombo 用于存储记录的检查状态

```
fields: [
    ...
    {name: 'checked',  type: 'boolean'},
    ....
] 
```

当你想在加载后检查任何记录时

```
record.set('checked', true); 
```

[参考：](http://lovcombo.extjs.eu/source.php?file=js/Ext.ux.form.LovCombo.js)

# java - Arraylist Java 绑定错误

> ID：15565623
> 
> 赞同：-2
> 
> 时间：2013-03-22T08:15:03.003
> 
> 标签：java, arraylist

我需要为学校项目创建自己的注册表。

我想拥有

```
1
room, room
2
room, room
hall, hall
3
room, room
hall, hall
dorm, dorm 
```

但我得到的只是

```
1
room,room
2
room,hall
hall,hall
3
room,dorm
hall,dorm
dorm,dorm 
```

所以不知何故，设施参考在某处发生了变化，但我不知道如何解决这个问题。任何人都可以帮忙吗？

这些是我的代码。

```
public class registry {
static List<registryRecord> register = new ArrayList<registryRecord>();
public static boolean bind(String name, facility ref){
    for(registryRecord r:register){
        if(r.name.equals(name)) //check if the name is already binded
            return false;
    }
    registryRecord newRecord = new registryRecord(name, ref);
    register.add(newRecord);
    for (registryRecord r:register){
        System.out.println(r.name +","+ r.ref.name);
    }
    return true;
}

public class registryRecord {
String name;
facility ref;
public registryRecord(String name, facility ref){
    this.name = name;
    this.ref = ref;
}

public class server {
public static void main(String args[]) throws Exception{  
    facility room = new facility("room");
    System.out.println(1);
    boolean test = registry.bind("room", room);
    facility hall = new facility("hall");
    System.out.println(2);
    boolean test2 = registry.bind("hall", hall);
    facility dorm = new facility("dorm");
    System.out.println(3);
    registry.bind("dorm", dorm);
}
public class facility {
    public static String name;
    static List<booking> bookings;

    public facility(String name){
        this.name=name;
        this.bookings = new ArrayList<booking>();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:21:03.323

正如我所怀疑的，因为`name`is `static`in `facility`，它在所有实例之间共享。这意味着每次创建新实例时都会覆盖它。

只需`static`从您的两个字段中删除，您的程序应该可以正常工作。

# javascript - JQuery 数据表标题下方的附加滚动条

> ID：15565632
> 
> 赞同：3
> 
> 时间：2013-03-22T08:15:20.520
> 
> 标签：javascript, jquery, jquery-datatables

我正在使用数据表（Jquery）。

使用代码，我在表格的页脚上方获得了一个水平滚动条，如[链接](http://www.datatables.net/examples/basic_init/scroll_x.html)中所示：

```
 "sScrollX": "100%",
 "sScrollXInner": "120%",
 "bScrollCollapse": true, 
```

现在我还想在标题下方获得另一个滚动条。帮帮我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-01-20T21:08:11.247

将以下代码添加到 Datatable 初始化中：

```
"fnInitComplete": function(){

    // Enable THEAD scroll bars
    $('.dataTables_scrollHead').css('overflow', 'auto');

    // Sync THEAD scrolling with TBODY
    $('.dataTables_scrollHead').on('scroll', function () {
        $('.dataTables_scrollBody').scrollLeft($(this).scrollLeft());
    });                    
}, 
```

参考：[DataTables 插件 - 在 tfoot 标签下方显示滚动条？](https://stackoverflow.com/questions/30843811/datatables-plug-in-display-scrollbar-below-tfoot-tag)

jsFiddle：http: [//jsfiddle.net/3xvpznd3/](http://jsfiddle.net/3xvpznd3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:21:54.033

为此，您必须添加另一个`container`具有`fixed width like 1000px`with `overflow auto`。如果内容`overflows`到`1000px`那时你将能够显示`scroller`在`container`

像：

**CSS**

`.newcontainer{width:1000px;overflow:auto;}`

**HTML**

```
<div class="newcontainer">
    <!-- Your div having the datatable-->
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-16T20:52:40.657

Joseph 对上述代码稍作更新：

当您添加 Thead 滚动条并在滚动事件中更改其位置时，它会在一分钟内被调用数千次，这将使您的浏览器响应缓慢，从而导致 X 水平条滚动缓慢。为了避免这种情况，添加如下所示的节流阀，基本上可以确保函数在 100 毫秒内执行一次。

```
"fnInitComplete": function(){

                        // Enable THEAD scroll bars
                        $('.dataTables_scrollHead').css('overflow', 'auto');

                        // Sync THEAD scrolling with TBODY
                        $('.dataTables_scrollHead').on('scroll', $.throttle( 100,function () {
                            $('.dataTables_scrollBody').scrollLeft($(this).scrollLeft());
                        }));                    
                    } 
```

# c++ - 客户端无法接收数据 - 客户端中的 socket.async_receive 异常

> ID：15565633
> 
> 赞同：0
> 
> 时间：2013-03-22T08:15:29.640
> 
> 标签：c++, boost-asio

我有一个使用 boost asio 的简单版本的客户端。假设客户端在发送数据后会收到来自服务器的响应。这是客户端的代码

```
void RunClient()
    {
        try
        {
            boost::asio::io_service io_service;
            boost::asio::ip::tcp::resolver resolver(io_service);
            boost::asio::ip::tcp::resolver::query query( "127.0.0.1", boost::lexical_cast< std::string >( 7777 )); //9100
            boost::asio::ip::tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);
            boost::asio::ip::tcp::socket socket(io_service);
            socket.async_receive(boost::asio::buffer(buf_client, 3000), 0, ClientReceiveEvent);

            boost::asio::connect(socket, endpoint_iterator);

            boost::system::error_code ignored_error;
            std::cout << "Sending message \n";
            boost::asio::write(socket, boost::asio::buffer("Data to send"), ignored_error);
            io_service.run();
        }
        catch (std::exception & ex)
        {
            std::cout << "[" << boost::this_thread::get_id()<< "] Exception: " << ex.what() << std::endl;   
        }
    } 
```

这是我的 ClientReceiveEvent

```
void ClientReceiveEvent(const boost::system::error_code& error, std::size_t bytes_transferred)
    {
        if(!error)
        {
            std::cout << "Message: " << buf_client.data() << std::endl;

        }
        else
        {
            std::cout << "Error occurred." << error.message() << std::endl;
        }
    } 
```

我从上述传入数据的方法中收到错误

```
Error occurred.The file handle supplied is not valid 
```

有什么建议我在客户端做错了吗？

**更新：**

我得到了代码，但是我对为什么声明感到困惑

```
socket->async_receive(boost::asio::buffer(buf_client, 3000), 0, ClientReceiveEvent); 
```

需要连接后放置。以及为什么声明

```
io_service->run(); 
```

需要放在最后。我认为这会启动异步过程。

我还想知道如何将数据重新发送到服务器。我可以成功发送一次。如何再次重新发送命令？

工作代码是：

```
boost::shared_ptr< boost::asio::io_service > io_service(new boost::asio::io_service);
            boost::shared_ptr< boost::asio::ip::tcp::socket > socket(   new boost::asio::ip::tcp::socket( *io_service ) );
            boost::asio::ip::tcp::resolver resolver(*io_service);
            boost::asio::ip::tcp::resolver::query query( "127.0.0.1", boost::lexical_cast< std::string >( 7777 )); //9100
            boost::asio::ip::tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);
            socket->connect(endpoint_iterator->endpoint());
            socket->async_receive(boost::asio::buffer(buf_client, 3000), 0, ClientReceiveEvent);
            boost::system::error_code ignored_error;
            std::cout << "Sending message \n";
            boost::asio::write(*socket, boost::asio::buffer("some data"), ignored_error);           
            io_service->run(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:44:28.533

尽管`async_receive`安排了在代码调用之后执行的读取操作`run()`，但在您调用`async_receive`函数本身时它仍然需要一个连接的套接字。这是因为在内部，`async_receive`实现如下：

```
this->get_service().async_receive(this->get_implementation(),buffers, 0, BOOST_ASIO_MOVE_CAST(ReadHandler)(handler)); 
```

该表达式返回当时的内部套接字句柄*的*`this->get_implementation()`副本，在您的情况下未连接。

 *换句话说，在异步读取被安排之后，它不会帮助连接套接字，因为读取将被安排在一个未连接的套接字上。*

# performance - 执行时间，高级与低级编程语言

> ID：15565634
> 
> 赞同：0
> 
> 时间：2013-03-22T08:15:30.563
> 
> 标签：performance, programming-languages, theory, low-level, high-level

在谈论高级和低级编程语言之间的执行时间时，我经常听到低级语言的性能比高级语言好一点。

当然，取决于程序员和算法，低级别的性能可能比高级别差。但是，如果我们使用执行不同任务所需的极少代码。由于不同语言的抽象级别，执行时间是否经常存在差异？

还有，有没有人知道关于这类主题的好书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:27:27.630

首先，低级与高级不是明确定义的语言属性。它倾向于用于指代原始机器功能的可访问性，指语言提供的抽象设施，并再次描述可用库的特定抽象级别。虽然这些方面可以说是相关的，但它们并不可靠——它们中的任何一个都不是另一个所必需的。

缺乏对机器原语的访问自然会降低通用性能编程的灵活性，但是没有这种访问权限的语言可以通过使用专门用于该领域的库和/或运行时来实现特定领域的高性能（例如，NumPy 和 Matlab 性能与线性代数）。

糟糕的抽象设施使设计、开发、使用、重用和维护变得更加困难。这不一定会直接影响*潜在*的性能——但实际上，在机制上所做的努力并没有被用来提高性能。同样，缺少高级库并不一定会直接影响性能，但是对基本设施的糟糕构建的重新实现可能会产生相同的效果。

* * *

因此，回答您的问题：语言“水平”通常不会决定性能。但是，总有一个“但是”...

此外，诸如 C++ 之类的“广谱”语言也有成本，它将对原始功能的访问与良好的抽象设施和广泛的库相结合：复杂性和认知负荷，这（恕我直言）是上述不同方面之间相关性的驱动因素语言“水平”。

# javascript - 在异步调用之前在 Javascript 中保存“this”

> ID：15565650
> 
> 赞同：2
> 
> 时间：2013-03-22T08:16:22.743
> 
> 标签：javascript

我刚开始使用 Javascript、backbone 和 jquery。我的同事试图在 Javascript 中解释这个概念和上下文。他是说这种模式很常见，但可能有更好的方法来做到这一点。我想知道它是否实际上是“标准”模式，或者是否有更好的方法。

基本上，模式是，当我在课堂上处理屏幕上正在查看的内容时（对我们来说，它是 MVC 和骨干网的组合），我需要获取我的数据来填充页面。但在我们获取之前，我们做

```
var _this = this; 
```

由于我们所做的 ajax 调用是异步的，他说如果在我们的成功处理程序中，如果我们这样做了

```
this.model.property = // set some property from the callback 
```

这不是我们想要的，我们需要做的

```
_this.model.property = // something 
```

我想我想知道这是否很标准。我觉得在使用 Javascript 一周后，我每次从服务器获取数据时都会这样做，有时在我尝试用下划线的 _.each 格式化我的页面之前，因为我猜我的 _.each 块中的“this”发生了变化也是。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:23:10.870

Scope 是 javascript 中最棘手的部分之一，基本上，这就是你朋友所描述的。完全理解范围是精通 javascript 的关键。查看其中一些链接，以全面了解正在发生的事情：

1.  [Mozilla 关于函数和范围的文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)
2.  [又一篇好文章](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)

无论如何，我希望你喜欢 javascript，它是我个人最喜欢的语言，尤其是在 node.js 进入我的生活之后 :)

编辑：

实际回答您的问题：正在发生的事情是上下文在异步模式下丢失，因此`this`更改范围。保存它可以让您稍后引用它。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:34:41.863

您可以将函数绑定到上下文，因此在异步调用期间您不必使用烦人的

```
var _this = this
//or
var self = this; 
```

您可以使用 underscore.js 绑定功能：

```
//this - current context
var func = function ({ this.doSomething(); });
var bindedFunction = _.bind(func, this); 
```

因此，当您调用 bindedFunction 时，它将绑定到 currentContext。

如果您使用的是主干，通常我会绑定回调函数，因此它们会绑定到对象：

```
var MyView = Backbone.View.extend({
        initialize: function (args) {
            _.bindAll(this, 'onDataFetched'); 
        },
        fetchData: function () {
            $.ajax({
            //... some code
                success: this.onDataFetched
            });
        },
        onDataFetched: function(result) {
            //Do something usefull here
            //this = MyView instance
        }
}); 
```

# python - 编写一个程序，输入一个三位数字以在一行上输出数字

> ID：15565656
> 
> 赞同：0
> 
> 时间：2013-03-22T08:16:53.123
> 
> 标签：python

我正在 python 上编写一个程序，该程序将允许用户输入任何三位数字并将该数字作为单独的数字输出。

这就是我现在所拥有的

```
val = int(raw_input ("Type your three digit number please:"))

print 'The first digit is {}' .format (val // 100)
print 'The second digit is {}'.format (val % 100)
print 'The third digit is {}'.format (val % 10)` 
```

但是，对于第二个数字，我不确定如何检索它。我知道这个数字不应该是 100，因为它会将最后两位数字返回给我。

有人可以帮帮我吗？

还有谁知道我将如何继续添加数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:19:47.880

最简单的解决方案是不将 is 视为`int`，我认为：

```
digits = raw_input("Type your three digit number please")
print(list(digits)) # will print ['1', '2', '3'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:43:00.027

这个怎么样？

```
val = raw_input("Type your three digit number please: ")

print 'The first digit is {}'.format(val[0])
print 'The second digit is {}'.format(val[1])
print 'The third digit is {}'.format(val[2]) 
```

将输入从 更改`str`为`int`将使数字无法分开，如果您仍希望输入为整数，则可以将 a 包裹`int()`在`val[]`, 如`int(val[0])`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:27:51.307

试试这个代码

```
val = raw_input ("Type your three digit number please:")#you must type 12 13 14
val=val+" "
list=[]
s=""
for i in val:
    if i!=" ":
        s=s+i
    else:
        list.append(int(s))
        s=""
print list 
```

输出是

```
[12,13,14] 
```

# string - linux 发现 prune

> ID：15565660
> 
> 赞同：1
> 
> 时间：2013-03-22T08:17:02.300
> 
> 标签：string, search

我正在尝试排除两个目录；vntvdone 和下载，但由于某种原因，我的命令仍然在那里并在其中输出文件：

```
find -name '*.avi' -o -name '*.mkv' -o -name '*.mp4' -o -name '*.VOB' -o -path './downloading' -prune -o -path './vntvdone' -prune 
```

我也遇到了问题，如果其中包含 .mp4 的文件夹/目录，它也被视为文件......我们如何才能只搜索文件而不搜索文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:52:09.913

我发现它更容易使用！比使用`prune`. 我假设 find 的起始路径是“。” 该示例省略了它。

```
find . \( -type d -a ! -name 'downloading' -a ! -name 'vntdone' -a ! -name '.' \) -o -name \*.avi -o -name \*.mkv -o -name \*.mp4 -o -name \*.VOB 
```

# arduino - 将数据从 Xbee Arduino 发送到 PC

> ID：15565664
> 
> 赞同：1
> 
> 时间：2013-03-22T08:17:12.527
> 
> 标签：arduino, xbee

我有一个应用程序，我使用 MCP3421 18 位 ADC 读取模拟数据。设置为 Xbee+Xbee Sheild+Arduino + MCP3421 作为发射器。我正在读取并传输到带有 LCD 的远程 xbee+arduino 模块。数据在 LCD 上显示良好。但是我想在串口上接收数据。当我尝试 tp 做一个 Serial.println(s); 在接收代码上，我在串口上获得的数据是乱码。将不胜感激任何帮助

这是我的代码

传输

```
#include  <Wire.h>
#include <LiquidCrystal.h>
#define TRUE 1
#define FALSE 0
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);
void setup(void)
{
  Serial.begin(9600);
  Wire.begin();
  delay(100);
  Serial.println(">>>>>>>>>>>>>>>>>>>>>>>>");  // just to be sure things are working
  lcd.begin(16, 2);
}

void loop(void)
{

  byte address, Hi, Lo, Config;
  int ADVal;

  while(1)
  {
    address = 0x68;
    Wire.beginTransmission(address);
    Wire.write(0x88);   // config register %1000 1000
    // /RDY = 1, One Conversion, 15 samples per, PGA = X1

    Wire.endTransmission();

    delay(1);
    Wire.requestFrom((int)address, (int) 3);
    Hi = Wire.read();
    Lo = Wire.read();
    Config = Wire.read();
    Wire.endTransmission();

    ADVal = Hi;
    ADVal = ADVal * 256 + Lo;

    //  Serial.print(ADVal, DEC);
    //Serial.print("  ");
    //Serial.println(Config, DEC);
    Serial.print("<");
    Serial.print(ADVal);
    Serial.print(">");

    //lcd.setCursor(0,0);
    //lcd.print(ADVal);
    lcd.setCursor(0,1);
    //float val = ADVal * 0.00006244087;
    //lcd.print(val,3); 
    delay(1);
  }
} 
```

这是接收代码

```
#include <LiquidCrystal.h>
LiquidCrystal lcd(12, 11, 5, 4, 3, 2); // initialize the library with the numbers of the interface pins
bool started = false;
bool ended= false;
char inData[10]; // Leave plenty of room
byte index;
float i;

//char inData[24]; // Or whatever size you need
//byte index = 0;

void setup(){
  // set up the LCD's number of columns and rows: 
  lcd.begin(16, 2);
  // initialize the serial communications:
  Serial.begin(9600);
}

void loop()
{
  //Serial.println(s);
  while(Serial.available() > 0)
  {
    char aChar = Serial.read();
    if(aChar == '<')
    {
      // Start of packet marker read
      index = 0;
      inData[index] = '\0'; // Throw away any incomplete packet
      started = true;
      ended = false;
    }
    else if(aChar == '>')
    {
      // End of packet marker read
      ended = true;
      break; // Done reading serial data for now
    }
    else
    {
      if(index < 10) // Make sure there is room
      {
        inData[index] = aChar; // Add char to array

        index++;
        inData[index] = '\0'; // Add NULL to end

      }
    }
  }

  // When we get here, there is no more serial data to read,
  // or we have read an end-of-packet marker
  if(started && ended)
  {
    // We've seen both markers - do something with the data here
    lcd.setCursor(0,0);
    i = atoi (inData);
    float s = (i * 0.3051851); //multiplying with calibration factor
    float value = ( s / 1000 );

    lcd.setCursor(1,0);
    lcd.print(value,3); // print value after multiplying with calibration factor to LCD

    lcd.setCursor(0,1 );
    lcd.print(i); // Print raw ADC counts as recieved from transmitter

    index = 0;
    inData[index] = '\0';
    started = false;
    ended = false;

  }
} 
```

接收 arduino 确实通过 Xbee 获取数据，并在 LCD 上完美显示值（附加 PIC）。我还需要通过其 USB/串行端口在连接到接收 arduino 的 PC 上接收数据。

当我尝试使用串行监视器时，LCD 上的显示消失并且串行监视器显示乱码值。我认为 Serial.print(s) 正在将数据发送回 XBEE，因为 XBEE SHIELD 上的 DO 和 DI LED 都开始闪烁。

# sql-server - 如何审核 SQL Server 架构更新

> ID：15565668
> 
> 赞同：1
> 
> 时间：2013-03-22T08:17:38.463
> 
> 标签：sql-server, ddl-trigger

有没有办法查看谁更新了哪个数据库对象以及何时更新？我希望能够查看历史上哪个开发人员对某个表或存储过程（或任何其他对象）进行了更改。

我知道我们可以实现 DDL 触发器并从此时开始捕获这些信息，但是有没有办法查看历史数据。数据库在 SQL Server 2008 R2 标准版上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:25:05.130

没有标准的方式来查看这些数据，但可以使用 3rd 方工具。如果您的数据库处于完全恢复模式，那么您可以尝试使用[ApexSQL Log](http://www.apexsql.com/sql_tools_log.aspx)或[Quest Toad](http://www.quest.com/toad-for-sql-server/)等 3rd 方阅读器读取事务日志。ApexSQL Log 专门用于日志读取，并为此提供更多选项，而 Toad 类似于 SSMS，并具有许多其他用于常规数据库管理的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:42:04.157

原生工具确实不提供这样的选项，至于 3rd 方工具，我建议你看看NetWrix 的[SQL Server Change Reporter](http://www.netwrix.com/sql_server_auditing.html) （披露：我为他们工作）。它既有免费软件版本，也有免费试用版。该产品显示对对象进行了哪些更改、更改的人员和时间。这应该是您正在寻找的解决方案。

# authentication - tomcat基本认证的用户名/密码是什么？

> ID：15565671
> 
> 赞同：2
> 
> 时间：2013-03-22T08:17:40.843
> 
> 标签：authentication, tomcat

我已经在互联网上挖掘了有关如何设置 tomcat 身份验证的指南，是的，它确实有一个弹出窗口，允许我输入用户名/密码，但似乎我的用户名/密码错误。我在这里添加了我的 tomcat-user.xml 的一部分：

```
enter code here
<!--
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>
--> 
```

和 web.xml 的一部分在这里：

```
enter code here
<auth-constraint>
  <role-name>tomcat</role-name>
  <role-name>both</role-name>
  <role-name>role1</role-name>
</auth-constraint> 
```

所有这些“tomcat/tomcat,both/tomcat,role1/tomcat”都不起作用。什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:25:21.563

根据您的 tomcat 版本，这应该可以工作：

```
<role rolename="manager"/>
<role rolename="admin"/>
<user username="admin" password="admin" roles="admin,manager"/> 
```

编辑：请阅读此内容 ;-) [Tomcat 中的默认用户名和密码是什么？](https://stackoverflow.com/questions/3829513/what-is-the-default-username-and-password-in-tomcat)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T08:27:39.010

鲁军

更新后的文件应该是这样的

```
<?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
<!--
<role rolename="tomcat"/>
<role rolename="role1"/>
<user username="tomcat" password="tomcat" roles="tomcat"/>
<user username="both" password="tomcat" roles="tomcat,role1"/>
<user username="role1" password="tomcat" roles="role1"/>
-->
<role rolename="manager"/>
<role rolename="admin"/>
<user username="admin" password="admin" roles="admin,manager"/>
</tomcat-users> 
```

重启tomcat并使用admin/admin

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-26T20:58:58.830

您需要更改文件“tomcat-users.xml”

文件路径`C:\Users\suman\Documents\Software\apache-tomcat-7.0.55\conf`

文件名`tomcat-users.xml`

```
<tomcat-users>
<!--
<role rolename="tomcat"/>
<role rolename="role1"/>
<user username="tomcat" password="tomcat" roles="tomcat"/>
<user username="both" password="tomcat" roles="tomcat,role1"/>
<user username="role1" password="tomcat" roles="role1"/>
-->
<role rolename="manager"/>
<role rolename="admin"/>
<role rolename="manager-gui"/>
<role rolename="admin-gui"/>
<role rolename="manager-script"/>
<role rolename="admin-script"/>
<user username="admin" password="admin" roles="admin,manager,manager-gui"/>
</tomcat-users> 
```

# algorithm - 有效细分和计算余额的算法

> ID：15565678
> 
> 赞同：1
> 
> 时间：2013-03-22T08:17:57.637
> 
> 标签：algorithm, mapreduce, sum, aggregate-functions

假设您有大量交易随着时间的推移流入/流出账户。每次有新交易进入时，您都需要重新计算余额以显示给用户。每次有新交易进入（想象有太多交易）时，重新计算总余额（总结所有交易的行）是低效的。

显然，您可以增加或减少余额。但是假设不能保证动作会自动发生，例如 - 在保存事务和增量之间，您的数据库可能会重新启动，从而丢失增量。

我想知道有哪些算法/方法可以解决这个问题。看起来你可以：

*   执行递增/递减方法，并定期更正它（它仍然会显示不正确的平衡，虽然定期，不是很好）
*   做一个 map/reduce，尽管如果新事务频繁出现，这仍然是矫枉过正（它会超过 100% 的旧数据，即使只有一小部分发生了变化）
*   随着时间的推移保存某种标记，所以一旦你总结了一段时间，你可以在以后重用它，也许在某种层次结构中，这样你就可以总结一天的总数，一周的总数，月，年等，所以它总是很快获取当前余额（今天的交易加上前几天、几周、几个月、几年等）

这似乎是以前发明的。我应该寻找什么？谢谢！

# c++ - C++：复制结构数组并返回结构数组

> ID：15565680
> 
> 赞同：2
> 
> 时间：2013-03-22T08:18:05.263
> 
> 标签：c++, arrays, qt, structure

我正在使用 Qt Creator 开发应用程序。

我不是一个好的 C++ 程序员，所以可能存在概念错误等。

我在复制结构数组并返回结构时遇到问题。

有很多与类似标题相关的解决方案，但无法解决我的问题。

这是我的代码：

**ABC.h**

```
typedef struct command_packet_struct
{
    QString ItemDataName;
    DATA_TYPE ItemDataType;
    int ItemDataLength;
} COMMAND_PACKET_STRUCT;

class ABC 
{
private:

    COMMAND_PACKET_STRUCT* getHeaderTitle(int index);
    COMMAND_PACKET_STRUCT *_packetStruct ;
}; 
```

**ABC.cpp**

```
COMMAND_PACKET_STRUCT _OA_Packet [] = {
    {"ERROR\nMAIN CODE" ,       DATA_TYPE_NUM,          5 },
    {"ERROR\nSUB CODE"  ,       DATA_TYPE_NUM,          4 },
    {"SCALE VERSION"    ,       DATA_TYPE_ASCII,        8 },
    {"E-PRE VERSION"    ,       DATA_TYPE_ASCII,        8 }
};

COMMAND_PACKET_STRUCT* PCU_SIM_ORDER_TASK::getHeaderTitle(int index)
{
    int maxSize;

    if (_packetStruct != NULL)
    {
        _packetStruct = 0;
    }

    _packetStruct = new COMMAND_PACKET_STRUCT(*_OA_Packet);
    maxSize = ((sizeof(_OA_Packet)/sizeof(COMMAND_PACKET_STRUCT)) - 1);
    memcpy(_packetStruct, _OA_Packet, maxSize) ;

    qDebug() << sizeof(COMMAND_PACKET_STRUCT);       // return 12
    qDebug() << sizeof(_packetStruct);               // return 4
    qDebug() << sizeof(_OA_Packet);                  // return 48

    return _packetStruct;
} 
```

上面的代码显示了我为结构数组所做的实现。

我需要复制结构数组

```
 _OA_Packet 
```

到

```
 _packetStruct 
```

但是当我尝试获取**_packetStruct**的大小时，它给出了**4**而**_OA_Packet**的大小给出了**48**

因此，当尝试显示结构的内容时，它会返回**“segmentation fault error”**

任何想法，建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:09:07.223

1.  您的 struct COMMAND_PACKET_STRUCT 应该在 C++ 中这样定义

    ```
    struct COMMAND_PACKET_STRUCT 
    {
     QString ItemDataName;
     DATA_TYPE ItemDataType;
     int ItemDataLength;
    }; 
    ```

2.  使用您的默认构造函数来分配空间。

    ```
    maxSize = ((sizeof(_OA_Packet)/sizeof(COMMAND_PACKET_STRUCT)));   
    _packetStruct = new COMMAND_PACKET_STRUCT[maxSize]; 
    ```

3.  复制内容。

    ```
    std::copy(_OA_Packet,_OA_Packet+maxSize,_packetStruct); 
    ```

4.  _packetStruct 是指针，您可能想检查它指向的数据大小。

    ```
    qDebug() << sizeof(*_packetStruct);               // return 4 -->will be 12 
    ```

# iphone - UITableView：将表视图连接到数据源后出错

> ID：15565681
> 
> 赞同：0
> 
> 时间：2013-03-22T08:18:05.380
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试在我当前的项目中创建一个简单的 TableView。但是在 IB 中连接数据源并运行 iOS 模拟器后出现此错误。

```
2013-03-22 14:58:32.372 M[1875:c07] -[ViewController tableView:numberOfRowsInSection:]:      
unrecognized selector sent to instance 0x88191f0
2013-03-22 14:58:32.374 M[1875:c07] *** Terminating app due to uncaught exception
'NSInvalidArgumentException', reason: '-[ViewController tableView:numberOfRowsInSection:]:        
unrecognized selector sent to instance 0x88191f0' 
```

，但是当我在一个空项目中使用相同的代码创建一个简单的 TableView 时，它正在工作。

这是我的代码“MCEventActivityViewController.h”

```
#import <UIKit/UIKit.h>

@interface MCEventActivityViewController : UIViewController <UITableViewDelegate,   UITableViewDataSource>

@end 
```

“MCEventActivityViewController.m”

```
#import "MCEventActivityViewController.h"

@interface MCEventActivityViewController ()

@end

@implementation MCEventActivityViewController
{
    NSArray *tableData;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    tableData = [NSArray arrayWithObjects:@"1", @"2", @"3", nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpleTableItem";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
return cell;
}

@end 
```

谁能帮我弄清楚为什么会出现这个错误？

屏幕截图在这里。 ![在此处输入图像描述](../Images/151586c497f460a4a2c1cc2a868e7276.png)

![在此处输入图像描述](../Images/6a025b88361b945e902339139bdbed2c.png)

**编辑：** ![在此处输入图像描述](../Images/46829a3c5acffcfd3b5801f12e2f666f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:43:46.027

确保，

1.TableView与XIB中的FileOwner连接。

2.@interface Controller : UIViewController UITableViewDelegate,UITableViewDataSource 包括在内。

3\. `Delegate`&`DataSource`都与 FileOwner 连接。

4.`numberOfSections`返回 1。

5.`numberOfRowsInSection`退货【必填】。

6\. `cellForRowAtIndexPath` {数据在这里...}

编辑：

创建，@property (nonatomic,strong) IBOutlet UITabelView * tableView;

并将 Xib 中的这个 Outlet 与 Fileowner 连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:26:05.313

将`numberOfSectionsInTableView`方法添加到您的代码中

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
} 
```

添加`NSArray *tableData;`到`MCEventActivityViewController.h`

`@property`并正确设置它`@synthesize`。

和写

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.tableData = [[NSArray alloc] initWithObjects:@"1", @"2", @"3", nil];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-30T03:35:17.000

您应该将（数据源**和委托**）从 Outlets 链接到**视图控制器**而不是查看！像这些图片：

![在此处输入图像描述](../Images/5c526bf66825eb9e12cd23182c779804.png)

![在此处输入图像描述](../Images/3229cda5b4718060e7307fe6eeac2d72.png)

![在此处输入图像描述](../Images/411113a7227c44597ad85cff01b4cf39.png)

# java - 如何在没有 JNDI 的情况下使用 DataSource 检索数据库连接？

> ID：15565689
> 
> 赞同：3
> 
> 时间：2013-03-22T08:18:30.500
> 
> 标签：java, jdbc, jndi

我们想要我们自己的db连接配置而不是使用JNDI，但同时我们也想使用DataSource而不是使用DriverManager，怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T08:32:37.053

您使用像[c3p0](http://www.mchange.com/projects/c3p0/)或[commons dbcp](https://commons.apache.org/proper/commons-dbcp/)这样的连接池库。

C3P0

```
ComboPooledDataSource cpds = new ComboPooledDataSource();
cpds.setDriverClass( "org.postgresql.Driver" ); //loads the jdbc driver            
cpds.setJdbcUrl( "jdbc:postgresql://localhost/testdb" );
cpds.setUser("dbuser");                                  
cpds.setPassword("dbpassword");

Connection connection = cpds.getConnection(); 
```

DBCP

```
BasicDataSource ds= new BasicDataSource();
ds.setDriverClassName("org.postgresql.Driver");
ds.setUrl("jdbc:postgresql://localhost/testdb");
ds.setUsername("dbuser");
ds.setPassword("dbpassword");

Connection connection = ds.getConnection(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T08:26:34.250

您可以使用`org.apache.commons.dbcp.BasicDataSource`

```
BasicDataSource ds= new BasicDataSource();
ds.setDriverClassName("oracle.jdbc.driver.OracleDriver");
ds.setUrl("jdbc:oracle:thin:@dburl:port:sid");
ds.setUsername("uname");
ds.setPassword("pass"); 
```

# wcf - Windows 窗体应用程序中的 WCF 服务

> ID：15565692
> 
> 赞同：0
> 
> 时间：2013-03-22T08:18:36.893
> 
> 标签：wcf, iis, self-hosting

我是 WCF 的新手。我有一些问题需要回答。

**我可以使用 WCF 制作从客户端到客户端的简单聊天应用程序（通过 WCF 服务）吗？**

我试过很多例子，但我遇到了问题。**我认为使用 WCF Selft Hosted 时不需要安装 IIS，对吗？**

对不起我的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:21:58.547

自托管 WCF 服务不需要 IIS。查看[ServiceHost](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehost%28v=vs.85%29.aspx)类。

是的，您可以使用“中间”服务制作聊天应用程序（客户端到客户端）。客户端必须向服务注册，然后[回调合约](http://idunno.org/archive/2008/05/29/wcf-callbacks-a-beginners-guide.aspx)才能完成这项工作。

# blackberry - 在黑莓的每一行中获取按钮单击

> ID：15565693
> 
> 赞同：1
> 
> 时间：2013-03-22T08:18:37.830
> 
> 标签：blackberry

我想在每一行中获取按钮单击事件。如何得到它？如果每行只有一个按钮，我尝试了此[**链接**](https://stackoverflow.com/questions/13664810/how-to-make-a-screen-like-this-on-blackberry/13669417)及其工作。但就我而言，每一行都有多个按钮。10,20 和 11,21 是我的按钮。

![在此处输入图像描述](../Images/607cc634fc6b7f5d8a8b4889fe558078.png)

在上面链接的 RowManager 类中，我添加了以下代码 -

```
button = new ButtonField("1" + index, ButtonField.CONSUME_CLICK);
button.setCookie(new Integer(index));
button.setFont(textFont);
add(button);

button1 = new ButtonField("2" + index, ButtonField.CONSUME_CLICK);
button1.setCookie(new Integer(index));
button1.setFont(textFont);
add(button1); 
```

现在在 StackScreen 类上，public void fieldChanged(Field field, int context)，我如何获得点击按钮的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:55:01.030

由我自己解决 -

```
public static int v=0;
button = new ButtonField("1" + index, ButtonField.CONSUME_CLICK);
button.setCookie(new Integer(v+1));  //set cookie
button.setFont(textFont);
add(button);
v=v+1; //increment the value of v

button1 = new ButtonField("2" + index, ButtonField.CONSUME_CLICK);
button1.setCookie(new Integer(v+1));
button1.setFont(textFont);
add(button1);
v=v+1; 
```

和 -

```
 public void setChangeListener(FieldChangeListener listener) {
     // only the button field supports change listeners
     button.setChangeListener(listener);
     button1.setChangeListener(listener);
  } 
```

然后在 StackScreen 类 -

```
public void fieldChanged(Field field, int context) {
       Object f=field.getCookie();
       Dialog.alert("Button " +f);
 } 
```

# python - python 2.7：知道它是列表列表还是列表列表

> ID：15565695
> 
> 赞同：2
> 
> 时间：2013-03-22T08:18:53.430
> 
> 标签：python, python-2.7

一个脚本正在为我提供列表列表或列表列表。我打算做的就是称之为

```
test = myList[0][0][0] 
```

如果出现异常，我会知道它是一个列表列表。

有没有更好/正确的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:25:47.183

我不确定它是否更好/合适，但您也可以测试某些东西是否是带有[`isinstance`](http://docs.python.org/2/library/functions.html#isinstance)或[`type`](http://docs.python.org/2/library/functions.html#type)功能的列表。

例如

```
a = [1,2,3]
b = (1,2,3) # Not a list

type(a) == type([])   # True
type(b) == type([])   # False

type(a) is list       # True
type(b) is list       # False

isinstance(a, list)   # True
isinstance(b, list)   # False 
```

第一种方法可能并不理想，如果您使用第二种方法可能会更好`type`，但我认为普遍的共识是`isinstance`通常更好。

编辑：[关于这两种方法之间的区别的一些讨论](https://stackoverflow.com/questions/1549801/differences-between-isinstance-and-type-in-python)

所以，我猜你的代码看起来像：

```
if(isinstance(myList[0][0], list)):
    # Use myList[0][0][0]
else:
    # Use myList[0][0] 
```

# c++ - 找出 QTableWidget 中选择了哪一列

> ID：15565698
> 
> 赞同：3
> 
> 时间：2013-03-22T08:19:06.297
> 
> 标签：c++, qt, qtablewidget

我有一个 QTableWidget`SelectionMode`设置为`SingleSelection`，并`SelectionBehavior`设置为`SelectColumns`。这意味着**只能选择一列**。

但后来我需要找出选择了哪一列，我唯一可以使用的函数是`selectedIndexes()`or `selectedItems()`，这两个函数都返回整个列表，**这很浪费**。

有没有办法更有效地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:28:21.240

您使用 selectedItems() 的方法是正确的。由于 QT 无法知道您已将小部件设置为单行/列选择，因此它提供了这些功能以返回`QList<>`.

在您的情况下，您可以使用`.first()`.

尽管我建议使用信号`currentColumnChanged()`在您的应用程序中做出反应

（[http://harmattan-dev.nokia.com/docs/library/html/qt4/qitemselectionmodel.html#currentColumnChanged](http://harmattan-dev.nokia.com/docs/library/html/qt4/qitemselectionmodel.html#currentColumnChanged)）

您始终可以通过以下方式遍历所选行的所有列`selectionModel()->isColumnSelected()`

（[http://qt-project.org/doc/qt-4.8/qitemselectionmodel.html#isColumnSelected](http://qt-project.org/doc/qt-4.8/qitemselectionmodel.html#isColumnSelected)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:31:06.210

```
connect(tableWidget, SIGNAL(currentCellChanged(int,int,int,int), this, SLOT(onCellChanged(int,int,int,int)));

void Class::onCellChanged(int curRow, int curCol, int preRow, int preCol)
{
    current_Col = curCol;
    // curRow, preRow and preCol are unused
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:09:39.343

```
connect(tableWidget->selectionModel()
        , SIGNAL(currentColumnChanged(QModelIndex,QModelIndex))
        , SLOT(onColumnChanged(QModelIndex)));

...

void Class::onColumnChanged(const QModelIndex &index)
{
    int col = index.column();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:42:03.683

似乎函数[selectedRanges()](http://qt-project.org/doc/qt-4.8/qtablewidget.html#selectedRanges)可以满足我的需要。它返回所选范围的列表，但由于它是单列，因此该列表将只有一个项目（因此它很有效，不需要创建大列表）。

```
int column = ui->tableWidget->selectedRanges().front().leftColumn(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-19T18:35:53.327

currentColumn() 返回当前选定列的 int。

# ios - 将 NSData 始终保存到同一个文件

> ID：15565700
> 
> 赞同：2
> 
> 时间：2013-03-22T08:19:28.160
> 
> 标签：ios, objective-c, cocoa-touch, nsdata

我想将每个`NSData`对象保存到 iOS 中的临时目录中，并且我希望每个新对象都覆盖旧对象。

对象将具有不同的格式和不同的大小。

我知道你如何获得路径，但是每次添加新文件时，`NSTemporaryDirectory`你怎么能覆盖那里的旧文件？`NSData`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T08:25:42.773

获取文件。

将其从`NSTemporaryDirectory`.

```
[[NSFileManager defaultManager] removeItemAtPath:filePath error:&error]; 
```

创建一个具有相同名称的新文件并将其保存在那里。

```
[[NSData data] writeToFile:filePath options:NSDataWritingAtomic error:nil]; 
```

* * *

或者您可以简单地覆盖文件。

```
NSData *data = <all data>;
[data writeToFile:targetPath atomically:YES]; 
```

# javascript - 无法让 getElementsByTagName 正常工作

> ID：15565701
> 
> 赞同：2
> 
> 时间：2013-03-22T08:19:28.117
> 
> 标签：javascript, dom

我正在尝试制作一个在多个表中交替显示每一行颜色的 JavaScript。问题是有些表根本不会改变。所以，我正在尝试使用此代码来获取表的行：

```
function alternateRows(myTable)
  var rows = document.getElementsByTagName("table").getElementsByClassName(myTable).getElementsByTagName("tr"); 
```

并且，在 HTML 中：

```
<body onload="alternateRows('myTable')";>
  <table class="myTable"> 
```

如果我使用 id 属性并将 JavaScript 更改为：

```
var rows = document.getElementById(myTable).getElementsByTagName("tr"); 
```

任何建议都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:23:29.207

`getElementsByTagName`返回一个[NodeList](https://developer.mozilla.org/en-US/docs/DOM/NodeList)，这就是为什么它调用 getElements 而不是 getElement。NodeList 没有定义“getElementsByClassName”方法，这是您应该看到的错误。

您需要使用循环。还知道您可以为此使用 CSS 选择器，所有现代浏览器都支持这一点，除了 IE 8 和更低版本。

适用于现代浏览器的 CSS（或 IE8-，例如带有帮助程序库，如[ie9.js](https://code.google.com/p/ie7-js/)）

```
table.mytable tr:nth-child(odd) {
    background-color: black;
}
table.mytable tr:nth-child(even) {
    background-color: white;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:26:11.400

有两种 DOM 方法：

1.  返回对单个节点的引用的方法。例如[`getElementById`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)和[`querySelector`](https://developer.mozilla.org/en-US/docs/DOM/document.querySelector)。

2.  返回节点**列表的方法。**例如，[`getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)，[`getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)，[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)。

那些返回节点列表的方法通常会返回一个[`NodeList` *^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/NodeList)对象，它的接口非常有限。你所能做的就是访问列表中的单个元素，就像数组一样，它没有**与**DOM 节点（或元素）相同的接口。

如果您想在列表中的元素上调用更多的 DOM 方法或 DOM 属性，您可以使用其索引直接访问特定节点，或者*遍历*列表并为每个元素执行此操作：

```
var elements = document.getElementsByTagName('div');

for(var i = 0, l = elements.length; i < l; i++) {
    // do something with elements[i]
} 
```

请注意，`NodeList`s 通常是*live*，这意味着对 DOM 的任何更改（例如删除`div`元素）都会自动更新列表。

* * *

在您的特定情况下，您必须选择：

1.  用于`querySelectorAll`选择所有行：

    ```
    var rows = document.querySelectorAll('table.' + myTable + '  tr'); 
    ```

2.  或迭代选定的元素：

    ```
    var rows = [];
    var tables  = document.getElementsByTagName("table");
    for (var i = 0, l = tables.length; i < l; i++) {
        // check whether it is a table with class in the variable `myTable`
        if ((' ' + tables[i].className + ' ').indexOf(' ' + myTable + ' ') > -1) {
            rows = rows.concat(tables[i].getElementsByTagName('tr'));
        }
    } 
    ```

    您可以直接使用而不是通过标签名称选择元素然后测试它们的类，`getElementsByClassName`但它不像`querySelectorAll`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:24:43.350

试试这个：

您只能按`getElementsByTagName`或按`getElementsByClassName` 赞使用：

```
var rows = document.getElementsByTagName("table")[0].getElementsByTagName("tr"); 
```

或者

```
var rows = document.getElementsByClassName('myTable')[0].getElementsByTagName("tr"); 
```

或使用`querySelectorAll`

**句法：**

`var matches = document.querySelectorAll("div.note, div.alert");`

在您的**示例中：**

```
var rows = document.querySelectorAll("table."+myTable).getElementsByTagName("tr"); 
```

`getElementsByTagName`给出数组，所以你应该将它与`zero index` Same for一起使用`getElementsByClassName`

阅读[https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName) 和 [https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:29:42.543

如果必须以相同的方式修改所有表，则可以使用以下代码：

```
var tables = document.getElementByTagName("table");
for (var i in tables)
{
    var rows = tables[i].getElementByTagName("tr");
    //Alternating code here
} 
```

# magento - 致命错误：在第 80 行的 app/code/core/Mage/Adminhtml/Block/Page/Menu.php 中的非对象上调用成员函数 getId()

> ID：15565703
> 
> 赞同：1
> 
> 时间：2013-03-22T08:19:38.700
> 
> 标签：magento

我为管理员安装了一个主题。刷新缓存，看起来很棒。我去注销并重新登录并收到以下错误：

```
 Fatal error: Call to a member function getId() on a non-object in app/code/core/Mage/Adminhtml/Block/Page/Menu.php on line 80 
```

第 65-89 行：

```
public function getCacheLifetime()
{
    return 86400;
}

/**
 * Get Key pieces for caching block content
 *
 * @return array
 */
public function getCacheKeyInfo()
{
    $cacheKeyInfo = array(
        'admin_top_nav',
        $this->getActive(),
        Mage::getSingleton('admin/session')->getUser()->getId(),
        Mage::app()->getLocale()->getLocaleCode()
    );
    // Add additional key parameters if needed /
    $additionalCacheKeyInfo = $this->getAdditionalCacheKeyInfo();
    if (is_array($additionalCacheKeyInfo) && !empty($additionalCacheKeyInfo)) {
        $cacheKeyInfo = array_merge($cacheKeyInfo, $additionalCacheKeyInfo);
    }
    return $cacheKeyInfo;
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T18:24:48.967

试试`Mage::getSingleton('admin/session')->getUser()->getUserId()`吧。

# android - 是否可以在未安装谷歌语音搜索的设备中使用语音识别？

> ID：15565706
> 
> 赞同：0
> 
> 时间：2013-03-22T08:19:53.927
> 
> 标签：android, voice-recognition

我尝试使用 RecognizerIntent 在我的 android 应用程序中使用语音识别。但是目标设备没有安装谷歌语音搜索。有没有其他方法可以在未安装 Google Voice 的 Android 设备中使用语音识别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:29:47.823

您可以尝试使用其他库，看看下一篇文章[Can CMU Sphinx be set up to identify ~200 words](https://stackoverflow.com/questions/9073856/android-speech-to-text-speech-recognition)。我想这也许是你正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:24:11.507

您可能首先应该检测用户是否在其智能手机上安装了语音搜索。如果没有，则将其重定向到 Google Play 进行[下载](https://play.google.com/store/apps/details?id=com.google.android.voicesearch)。

# asp.net - Razor 递归树形菜单结构

> ID：15565709
> 
> 赞同：4
> 
> 时间：2013-03-22T08:20:20.953
> 
> 标签：asp.net, razor, recursion, umbraco

我想我需要一点帮助来使用 Razor 视图引擎在 Umbraco 中渲染递归树形菜单结构。

我需要渲染以下树形菜单结构：

```
Page 1
     Page 2
         Page 3
         Page 4
              Page 5
     Page 6
     Page 7 
```

因此，当我在时，`Page 5`我需要`"open"`在父节点上使用 CSS 类：`Page 4`，`Page 2`以及我所站立的节点上`Page 1`的 CSS 类。`"active"`

单击菜单中的链接时，我已经获得了呈现正确节点的结构，但我根本不知道如何应用正确的类:-(

我的代码如下：

```
@{
        DynamicNode current = Model;
        var nodes = Model.AncestorOrSelf(2).Children.Where("Visible");        
        if(nodes.Any())
        {
            <ul class="side-nav-list">
                @foreach(var node in nodes)
                {
                    bool isDescendantOrSelf = current.IsDescendantOrSelf(node);
                    <li>
                        <a href="@node.Url">@node.Name</a>
                        @if(isDescendantOrSelf)
                        {
                            @RenderSubMenuRecursive(node)
                        }
                    </li>
                }
            </ul>
        }
    }

@helper RenderSubMenuRecursive(DynamicNode node)
{
    if(node.Children.Any(x => x.GetPropertyValue("umbracoNaviHide").Equals("0") && Model.IsDescendantOrSelf(node)))
    {        
         var childNodes = node.Children.Where(x => x.GetPropertyValue("umbracoNaviHide").Equals("0"));
         string css = node.IsAncestor(Model) ? "open" : "";
         <ul>

            @foreach(var childNode in childNodes)
            {
                <li class="@css">                    
                    <a href="@childNode.Url">@childNode.Name</a>
                    @if (childNode.IsDescendantOrSelf(node))
                    {
                        @RenderSubMenuRecursive(childNode)
                    }
                </li>
            }
        </ul>
    }
} 
```

非常感谢您对此的任何帮助/提示！：-） 提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T08:56:31.837

通过移动一些代码等自己解决了这个问题。最终解决方案：

```
 @{
        DynamicNode current = Model;
        var nodes = Model.AncestorOrSelf(2).Children.Where("Visible");        
        if(nodes.Any())
        {
            <ul class="side-nav-list">
                @foreach(var node in nodes)
                {                        
                    @RenderSubMenuRecursive(node)                                           
                }
            </ul>
        }
    }

@helper RenderSubMenuRecursive(DynamicNode node)
{    
    var childNodes = node.Children.Where(x => x.GetPropertyValue("umbracoNaviHide").Equals("0"));
string css = node.IsAncestor(Model) ? "open" : "";

if(node.Id == Model.Id)
{
    css = "active";
}

<li class="@css">
    <a href="@node.Url">@node.Name</a>

    <ul>            
        @foreach (var childNode in childNodes.Where(childNode => Model.IsDescendantOrSelf(node)))
        {
            @RenderSubMenuRecursive(childNode)
        }
    </ul>
</li>    
} 
```

# jquery - .data 在第一次点击时没有返回值

> ID：15565717
> 
> 赞同：0
> 
> 时间：2013-03-22T08:21:22.870
> 
> 标签：jquery

我将值存储在 .data 方法中。它不适用于第一次点击，但适用于第二次点击。

```
<script type="text/javascript">
$(function(){
$('a').click(function(){
var value=  $('div').data('key');
var txt= $(this).text();
$('div').data('key',txt)
$('span').text(value)
})})
</script> 
```

// html

```
<div></div>
<a href="#">My text</a>
<span></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:25:35.950

*这应该工作*-[**演示**](http://jsfiddle.net/Qtk5F/)

*在第一次单击时，您要在设置数据之前访问数据。*

```
<script type="text/javascript">
$(function(){
    $('a').click(function(){
        var txt= $(this).text();
        $('div').data('key',txt)
        $('span').text($('div').data('key'))
    })
})
</script> 
```

**html**

```
<div></div>
 <a href="#">My text</a>
<span></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:24:15.617

您在存储它之前检索它。尝试移动`var value=...`到下面`$('div').data(...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:24:59.073

您在实际设置之前访问数据值

```
$(function(){
  $('a').click(function(){
    var value=  $('div').data('key'); // accessing data
    var txt= $(this).text();
    $('div').data('key',txt) // setting data
    $('span').text(value)
  })
}) 
```

# java - 在运行时控制对 JAVA 类的加载的访问

> ID：15565720
> 
> 赞同：2
> 
> 时间：2013-03-22T08:21:35.557
> 
> 标签：java, access-control, code-access-security

我需要在运行时限制对 JAVA 应用程序特定类的加载的访问。只是想知道这是否可以使用带有安全策略的 JAVA 安全管理器。另外，如果这是可能的，我想知道权限配置在 JAVA 安全策略中的样子。我对此进行了一些研究，但还没有真正找到任何有用的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:50:50.907

这两个：

java.security.Permission java.io.FilePermission

并且如果您需要在没有它的情况下继续以某种方式运行应用程序，则您需要使用 java.lang.ClassLoader 和 loadClass 方法加载类，以便能够将其放入 if-else 以在不涉及简单实例化的情况下潜在地绕过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T18:55:05.773

我设法提出了一个扩展 java.security.RuntimePermission 类的自定义权限实现并满足了我的要求。与引入自定义权限的方法相关的唯一开销（这是不可避免的）是，您需要侵入所有类加载实现并添加额外的检查来评估您的自定义权限。

# javascript - JS字符串到处理值

> ID：15565721
> 
> 赞同：1
> 
> 时间：2013-03-22T08:21:36.750
> 
> 标签：javascript, jquery, date

我收到“Date.UTC(2013,1,26)”作为来自 ajax 响应的值。我想处理它并将它的值传递给一个变量。我该怎么做？

我的 JSON 响应如下：

```
{
"data": [
    [
        "Date.UTC(2013,1,26)",
        1
    ],
    [
        "Date.UTC(2013,1,27)",
        1
    ],
    [
        "Date.UTC(2013,1,27)",
        1
    ],
    [
        "Date.UTC(2013,1,28)",
        1
    ],
    [
        "Date.UTC(2013,2,20)",
        1
    ],
    [
        "Date.UTC(2013,2,20)",
        1
    ]
] 
```

}

所以在程序中，我尝试获取这个值并将值保存为日期

$.each（数据，函数（id，值）{

// 我可以得到 val[0] 作为 Date.UTC(2013,1,26)

// 我想将值保存为时间戳

});

谢谢 PSJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:28:09.570

你可以试试这个：

```
$.map(data, function(value) {
    return [Date.UTC.apply(null, value[0].replace(/[^(]+\(([^)]+)\)/g, '$1').split(',')),
            value[1]];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:46:12.213

您可以尝试响应

```
var response = {
    "data": [
        [
            "Date.UTC(2013,1,26)",
            1
        ]
        // here goes other values..
     ]
}
var date_string = response.data[0][0],
    arg = date_string
          .replace(/Date.UTC\((.*?)\)/, '$1')
          .split(',');

var timestamp = Date.UTC.apply( null , arg ) ,
    date      = new Date( timestamp  ); 
```

并在控制台中打印日期结果

```
console.log( date.getFullYear(), date.getMonth(), date.getDate() ) 
```

哪个打印 `2013` `1` `26`

# c# - 从 X 值获取跨 .NET 图表系列的 Y 值

> ID：15565722
> 
> 赞同：5
> 
> 时间：2013-03-22T08:21:38.730
> 
> 标签：c#, .net, tooltip, mschart

使用带有 .NET 图表的 C#。

我正在尝试绘制几个波形，我希望将鼠标移过图表区域，并让我的工具提示在此 X 值位置显示图表中每个系列的 Y 值。

```
|      at xValue 12    |                                     |
|      _ = 3           |                                     |
|      * = 2           |                                * *  |
|              ________|______________________________*_____ |
|             /        |                             *       |
| __________*/*********|*****************************        |
|        *             |                                     |
|       *              |                                     |
|______________________|_____________________________________| 
```

有点像上面这张图。以下是我的代码的一个版本：

```
void chart1_MouseMove(object sender, MouseEventArgs e)
        {
            var pos = e.Location;
            _point.X = e.Location.X;
            _point.Y = e.Location.Y;

            try
            {
                if ((chart1.ChartAreas[0].AxisX.PixelPositionToValue(e.X) >= 0) && (chart1.ChartAreas[0].AxisX.PixelPositionToValue(e.X) <= max))
                {
                    //Crossair
                    chart1.ChartAreas[0].CursorX.SetCursorPixelPosition(_point, true);

                    //Tooltips
                    double xValue = chart1.ChartAreas[0].AxisX.PixelPositionToValue(e.X);
                    double yValue = chart1.ChartAreas[0].AxisY.PixelPositionToValue(e.Y);
                    string all_Data_Values = "";

                    foreach (var series in chart1.Series)
                    {
                        all_Data_Values = all_Data_Values + Environment.NewLine + series.Name + ": " + yValue;
                    }

                    tooltip.Show("At " + Math.Truncate(xValue * 1000) / 1000 + all_Data_Values, this.chart1, pos.X - 40, pos.Y - 20);
                }
            }
            catch (Exception exception)
            {
               //
            }
        } 
```

这就是我所拥有的，现在它只显示我的鼠标光标位置的 Y 值。我尝试了其他代码，试图以某种方式将 x 值映射到 chart1.Series[] 但它也不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T09:17:17.773

（这是对代码请求的响应，以在给定像素坐标的情况下查找最接近的值。）

我做的和你有点不同，因为我实际上是在用户移动鼠标时设置图表的“光标”，但希望这会给你足够的信息让你适应你的需要......

以下是我计算客户端 X 坐标的 X 轴坐标的方法：

```
private double calcCursorGraphX(int clientX)
{
    var xAxis = _chart.ChartAreas[CHART_INDEX].AxisX;
    int xRight = (int) xAxis.ValueToPixelPosition(xAxis.Maximum) - 1;
    int xLeft = (int) xAxis.ValueToPixelPosition(xAxis.Minimum);

    if (clientX > xRight)
    {
        return xAxis.Maximum;
    }
    else if (clientX < xLeft)
    {
        return xAxis.Minimum;
    }
    else
    {
        return xAxis.PixelPositionToValue(clientX);
    }
} 
```

给定从上述方法返回的 X 值，我们可以查找最近的前一个值：

```
private int nearestPreceedingValue(double x)
{
    var bpData  = _chart.Series[SERIES_INDEX].Points;
    int bpIndex = bpData.BinarySearch(x, (xVal, point) => Math.Sign(x - point.XValue));

    if (bpIndex < 0)
    {
        bpIndex = ~bpIndex;                // BinarySearch() returns the index of the next element LARGER than the target.
        bpIndex = Math.Max(0, bpIndex-1);  // We want the value of the previous element, so we must decrement the returned index.
    }                                      // If this is before the start of the graph, use the first valid data point.

    return bpIndex;
} 
```

然后你有一个索引，你可以用它来查找值`_chart.Series[SERIES_INDEX].Points`

我不确定这是否符合您的数据在图表中的存储方式，但我就是这样做的。

[编辑] 这是缺少的 BinarySearch 扩展方法。将其添加到可访问的静态类中。如果您不使用代码合同，请用您自己的错误处理替换“合同”内容。

```
/// <summary>
/// Searches the entire sorted IList{T} for an element using the specified comparer 
/// and returns the zero-based index of the element.
/// </summary>
/// <typeparam name="TItem">The type of the item.</typeparam>
/// <typeparam name="TSearch">The type of the searched item.</typeparam>
/// <param name="list">The list to be searched.</param>
/// <param name="value">The value to search for.</param>
/// <param name="comparer">The comparer that is used to compare the value with the list items.</param>
/// <returns>
/// The zero-based index of item in the sorted IList{T}, if item is found; 
/// otherwise, a negative number that is the bitwise complement of the index of the next element that is larger than item,
/// or - if there is no larger element - the bitwise complement of Count.
/// </returns>

public static int BinarySearch<TItem, TSearch>(this IList<TItem> list, TSearch value, Func<TSearch, TItem, int> comparer)
{
    Contract.Requires(list != null);
    Contract.Requires(comparer != null);

    int lower = 0;
    int upper = list.Count - 1;

    while (lower <= upper)
    {
        int middle = lower + (upper - lower) / 2;
        int comparisonResult = comparer(value, list[middle]);

        if (comparisonResult < 0)
        {
            upper = middle - 1;
        }
        else if (comparisonResult > 0)
        {
            lower = middle + 1;
        }
        else
        {
            return middle;
        }
    }

    return ~lower;
} 
```

# c# - XAML 宽度设置为百分比

> ID：15565728
> 
> 赞同：0
> 
> 时间：2013-03-22T08:21:58.913
> 
> 标签：c#, xaml, width

我有以下代码。

```
<Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100*" />
                    <ColumnDefinition Width="100*" />
                    <ColumnDefinition Width="100*" />
                    <ColumnDefinition Width="100*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="100*" />
                    <RowDefinition Height="100*" />
                    <RowDefinition Height="100*" />
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Grid.Column="0" Width="30*">
                    ...
                </StackPanel>
     </Grid> 
```

我正在尝试将 Stackpanel 宽度设置为单元格的 30%。我已经提到了[WPF: Setting the Width (and Height) as a Percentage Value](https://stackoverflow.com/questions/717299/wpf-setting-the-width-and-height-as-a-percentage-value)的帖子。根据帖子，它的宽度应该是 30*，就像在网格中一样。但它显示错误“30 * 字符串无法转换为长度”。所以我想纠正错误，或者我只想找到一种方法来设置宽度为单元格 30% 的堆栈面板。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T08:46:35.437

堆栈面板的宽度只能是两倍。网格宽度也可以采用 * 和 auto （如果未指定，* 为默认值）

另请注意，无论内容需要什么，StackPanel 都不会占用更多宽度。Horizo​​ntalAlignment="Stretch" 无效。

我建议你改为这样做。

```
 <Grid Grid.Row="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100*" />
            <ColumnDefinition Width="100*" />
            <ColumnDefinition Width="100*" />
            <ColumnDefinition Width="100*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="100*" />
            <RowDefinition Height="100*" />
            <RowDefinition Height="100*" />
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Grid.Column="0" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <StackPanel>
            </StackPanel>

        </Grid>
    </Grid> 
```

# android - 如何使用自定义 ArrayAdapter 跟踪自定义 ListView 中的项目检查？

> ID：15565733
> 
> 赞同：2
> 
> 时间：2013-03-22T08:22:36.123
> 
> 标签：android, checkbox, android-listview, android-arrayadapter

我的堆栈真的溢出了，我的意思是目前我的大脑想不出解决以下问题的方法（尽管我经历了很多天的反复试验）。我想做的只是一个用于删除目的的屏幕，例如（[http://asset0.cbsistatic.com/cnwk.1d/i/tim/2010/11/18/Foreman_11654166_1073_com.probosoft.masscontactsdelete0_257x386.png](http://asset0.cbsistatic.com/cnwk.1d/i/tim/2010/11/18/Foreman_11654166_1073_com.probosoft.masscontactsdelete0_257x386.png)）

我有一个这样的列表视图项目的布局（log_view.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp" >

    <TextView
        android:id="@+id/date_view"
        android:gravity="top|left"
        android:textStyle="bold"

        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true" />

    <TextView
        android:id="@+id/value_view"
        android:gravity="top|left"
        android:layout_width="match_parent"
        android:layout_height="match_parent"

        android:layout_below="@+id/date_view"
        android:layout_alignParentLeft="true" />

     <CheckBox 
        android:id="@+id/del_box"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="5dp"
        android:visibility="gone"

        android:focusable="false"
    android:focusableInTouchMode="false" />

</RelativeLayout> 
```

这是我的自定义适配器：

```
class LogViewAdapter extends ArrayAdapter<Log>  {   
    public ArrayList<Boolean> checkList;
    private int layoutResourceId;
    private List<Log> logList;

    Context context;

    public LogViewAdapter(Context context, int layoutResourceId, List<Log> data) {
        super(context, R.layout.log_view, data);

        this.layoutResourceId = layoutResourceId;
        this.logList = data;
        this.context = context;

        checkList = new ArrayList<Boolean>();
        for (int i = 0; i < logList.size(); i ++)   {
            checkList.add(false);
        }
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        LogHolder logholder = null;

        // Unidentified view            
        if(convertView == null) {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            convertView = inflater.inflate(layoutResourceId, parent, false);

            // Create a new holder
            logholder = new LogHolder();

            logholder.del_box = (CheckBox)convertView.findViewById(R.id.del_box);
            logholder.del_box.setChecked(false);

            final int iFinal = position;
            logholder.del_box.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    checkList.set(iFinal, buttonView.isChecked());
                }
            });

            logholder.date_view = (TextView)convertView.findViewById(R.id.date_view);
            logholder.value_view = (TextView)convertView.findViewById(R.id.value_view);

            convertView.setTag(logholder);
        }

        // Identified view
        else    {
            logholder = (LogHolder) convertView.getTag();
        }

        if (null != logList)    {
            if (null == checkList.get(position))    {
                android.util.Log.e("getView", "Checklist null at " + position);
            }

            //logholder.del_box.setChecked((boolean)checkList.get(position));
            logholder.date_view.setText(logList.get(position).date);
            logholder.value_view.setText(logList.get(position).value);
        }

        android.util.Log.e("getView", " at " + position + ", value = " + logholder.value_view.getText().toString());
        return convertView;
    }

    static class LogHolder  {
        TextView date_view;
        TextView value_view;
        CheckBox del_box;
    }
} 
```

这是我的活动：

```
public class LoggingActivity extends Activity   {

    //private EditText edt_name;
    //private EditText edt_value;
    private List<Log> logList;
    private LogViewAdapter lw_adapter;
    private ListView listView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.log_list);
        //setContentView(android.R.layout.simple_list_item_multiple_choice);

        logList = loadLog();
        listView = (ListView)findViewById(R.id.log_list);

        lw_adapter = new LogViewAdapter(this, R.layout.log_view, logList);
        //lw_adapter = new LogViewAdapter(this, android.R.layout.simple_list_item_multiple_choice, logList);

        listView.setAdapter(lw_adapter);
    }

    /** implements for the MENU soft-key. Android 2.3.x */
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.layout.log_menu, menu);

        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // IMPORTANT: listView.getChildAt(index) will only return the
        // VISIBLE views in our current screen
        if (null == listView)   {
            android.util.Log.e("onOptionsItemSelected", "list view null");
            return true;
        }

        for (int i = 0; i < listView.getChildCount(); i++) {
            if (null == listView.getChildAt(i)) continue;

            CheckBox cb = (CheckBox) listView.getChildAt(i).findViewById(R.id.del_box);
            if (null == cb) {
                android.util.Log.e("CB", "CheckBox at i = " + i + " null");
                return true;
            }

            final int iFinal = i + listView.getFirstVisiblePosition();
            cb.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    listView.setItemChecked(iFinal, buttonView.isChecked());
                    lw_adapter.checkList.set(iFinal, buttonView.isChecked());
                }
            });

            SparseBooleanArray selectedItems = listView.getCheckedItemPositions();

            for (int j = 0; j < selectedItems.size(); j++) {
                if (selectedItems.get(j)) {
                    android.util.Log.e("CHECKED", "Row "+ j + ", value = " + logList.get(j).value);
                }

                else    {
                    android.util.Log.e("CHECKED", "Row "+ j + " not checked");
                }
            }

            cb.setVisibility(View.VISIBLE);
            cb.setEnabled(true);
        }

        File folder = new File(Environment.getExternalStorageDirectory(), "50802566/logs");

        // Handle item selection
        switch (item.getItemId()) {
            case R.id.log_sort:
                Collections.sort(logList, Log.COMPARE_BY_VALUE);
                lw_adapter.notifyDataSetChanged();

                return true;
            case R.id.log_del:
                for (int i = 0; i < logList.size(); i++) {
                    if (null == lw_adapter.checkList.get(i))    {
                        android.util.Log.e("DEL", "checklist["+ i + "] = null");
                        continue;
                    }

                    if (true == lw_adapter.checkList.get(i)) {
                        // Delete correlative xml file
                        Date date = null;
                        try {
                            date = new SimpleDateFormat("dd/MM/yyyy - HH:mm:ss").parse(logList.get(i).date);
                        } catch (ParseException e) {
                            e.printStackTrace();
                        }

                        String filename = new SimpleDateFormat("dd_MM_yyyy - HH_mm_ss").format(date) + ".xml";
                        File toDelete = new File(folder, filename);
                        if (!toDelete.delete()) {
                            android.util.Log.e("DEL", "File " + filename + ": not deleted or not existed");
                        }

                        // Update the UI
                        //lw_adapter.remove(logList.get(i));
                        //lw_adapter.checkList.remove(i);

                        logList.set(i, null);
                        lw_adapter.checkList.set(i, null);
                        android.util.Log.e("DEL", "Deleted " + i + ", size now = " + logList.size());
                    }  
                }

                for (int i = 0; i < logList.size(); i ++)   {
                    if (null == logList.get(i)) {
                        logList.remove(i);
                        lw_adapter.checkList.remove(i);
                    }
                }

                lw_adapter.notifyDataSetChanged();

                // Refresh the checklist
                for (int i = 0; i < lw_adapter.checkList.size(); i ++)  {
                    lw_adapter.checkList.set(i, false);
                }

                for (int i = 0; i < listView.getChildCount(); i++) {
                    if (null == listView.getChildAt(i)) continue;
                    CheckBox cb = (CheckBox) listView.getChildAt(i).findViewById(R.id.del_box);
                    cb.setChecked(false);
                }

                return true;

            default:
                return super.onOptionsItemSelected(item);
        }
    }

    private ArrayList<Log> loadLog()    {
        /** Access folder "my_logs" in external memory */
        File baseDir = new File(Environment.getExternalStorageDirectory().getAbsolutePath() +
                                File.separator +
                                "50802566/logs");
        if (!baseDir.exists())  {   baseDir.mkdirs();   }
        File[] list_file = baseDir.listFiles();

        /** For internal memory */
        //File[] list_file = this.getFilesDir().listFiles();

        for (int i = 0; i < list_file.length; i ++) {
            //android.util.Log.e("PRINTLN", list_file[i].getPath());
        }

        int l = list_file.length;

        ArrayList<Log> list = new ArrayList<Log>();

        while (l-- > 0) {
            File file = list_file[l];

            FileInputStream fin = null;
            LogReader logr = new LogReader();

            try {
                fin = new FileInputStream(file);
                list.add(list_file.length - l - 1, logr.read(fin));
                fin.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        return list;
    }
} 
```

问题是：

1.  我无法跟踪每个 CheckBox 的布尔值。例如，如果我对 logList（我的数据库）进行排序，然后将“notifyDataSetChanged”添加到 listView，但我的 checkList（包含 CheckBox 的布尔值）仍然相同，并且会发生奇怪的事情。如何将一个列表的所有排序操作完全应用于另一个列表？（IMO，“同步排序”或类似的东西......）

2.  如您所见，我尝试通过从其行中获取 del_box（我的 CheckBox id）来解决＃1，然后将其“OnCheckedChangeListener”设置为进行分配（一旦检查，它将更新布尔列表中的相对值“清单”）。但是奇怪的事情又发生了：

    *   当检查一行并向下滚动时，我看到另一个已检查。
    *   向后滚动时，前一个选中的...未选中（当然是自动的）。

也许适配器正在重新使用错误的视图/值，但我不知道如何让它做正确的事情......>“<

您的帮助和指导很棒。你的示例代码对我来说非常完美......（我现在真的很累>“<）

**更新：**

我找到了一种方法来（以某种方式）解决它，但也许它违反了 Android 的 API 行为......如果你有更安全的解决方案，请告诉我^^

正如我在第二条评论中提到的，这里是代码：

```
@Override
    public void onCheckedChanged(CompoundButton cb, boolean isChecked) {
        int graphicalPos = -1;

        // This is top view on the screen for sure
        if (((View)cb.getParent()).getTop() < 0)    {
            graphicalPos = 0;
        }

        else if (((View)cb.getParent()).getTop() == 0)  {
            graphicalPos = (int) (((View)cb.getParent()).getTop() / ((View)cb.getParent()).getHeight());
        }

        else if (((View)cb.getParent()).getTop() > 0)   {
            graphicalPos = (int) (((View)cb.getParent()).getTop() / ((View)cb.getParent()).getHeight());
            if (listView.getChildAt(0).getTop() < 0)    {
                graphicalPos = graphicalPos + 1;
            }

            else    {
                android.util.Log.e("NOT PLUS", "First Top = " + listView.getChildAt(0).getTop());
            }
        }

        int dataPos = graphicalPos + listView.getFirstVisiblePosition();

        lw_adapter.checkList.set(dataPos, isChecked);
        android.util.Log.e("onCheckedChanged", "Checked row " + dataPos + ", graphicalPos = " + graphicalPos + ", top = " + ((View)cb.getParent()).getTop() + ", firstVisible = " + listView.getFirstVisiblePosition());
    } 
```

# c# - 使用不同长度的掩码 gridmaskedcolumn

> ID：15565734
> 
> 赞同：0
> 
> 时间：2013-03-22T08:22:40.063
> 
> 标签：c#, asp.net, telerik, radgrid

我将如何在 gridmaskedcolumn 中输入可变长度。对于这种情况，网格是一个密码，必须至少有 4 个字符，但可以长于 4 个字符，并且这些字符只能是数字。也不能显示字符。

```
<telerik:GridMaskedColumn DataField="Pin" UniqueName="Pin" HeaderText="Pin" Visible="false" Mask="<0..9>" DisplayMask="******" >
            </telerik:GridMaskedColumn> 
```

我尝试在线阅读解决方案，但似乎没有关于可变加长输入的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:41:13.760

From what I have been reading, GridMaskedColumn is not designed for variable-length input and therefore passwords are not ideal for GridMaskedColumns.

An alternative would be to use a normal GridBoundColumn and set the column mode to password.

```
if (e.Item is GridDataItem && e.Item.IsInEditMode)
{
    GridDataItem edititem = (GridDataItem)e.Item;
    TextBox txtpwd = (TextBox)edititem["Pin"].Controls[0];
    txtpwd.TextMode = TextBoxMode.Password;
    txtpwd.Visible = true;
} 
```

# java - 在 Java 中将方法作为参数传递以将侦听器分配给多个按钮

> ID：15565737
> 
> 赞同：0
> 
> 时间：2013-03-22T08:23:00.653
> 
> 标签：java, android

我是 Java 新手（来自 Python），我正在尝试将方法作为参数传递以转换此代码：

```
Button button1;
Button button2;
...
Button buttonN;

button1 = (Button) findViewById(R.id.button1);
button1.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        onClick_button1(v);
    }
});

button2 = (Button) findViewById(R.id.button2);
button2.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        onClick_button2(v);
    }
});

(...)

buttonN = (...) 
```

类似于：

```
public AssignListener( integer tButton, Method tMethod )
{
  button_view = (Button) findViewById(tButton);

  button_view.setOnClickListener( new View.OnClickListener() {
      @Override
      public void onClick(View view) {
          tMethod(view);
      }
  }
}

(...)

AssignListener( R.id.button1, onClick_button1 );
AssignListener( R.id.button2, onClick_button2 );
(...)
AssignListener( R.id.buttonN, onClick_buttonN ); 
```

我读过你不能将方法传递给函数，以及一些建议使用 Runnable 包装我的函数来实现这一点。

我不清楚该怎么做。关于如何轻松做到这一点的任何想法？:?

谢谢。

编辑：我应该将“AssignListener”包装在它自己的类中并传递类本身吗？:?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:37:56.543

您可以在 onCreate 方法中调用 findViewById() 和 seOnClickListener，在 onCreate 之外调用 OnClickListenet。

```
Button button1 = (Button)findViewById(R.id.button1);

or

findViewById(R.id.button1).seOnClickListener(mClickListener);
findViewById(R.id.button2).seOnClickListener(mClickListener);
findViewById(R.id.button3).seOnClickListener(mClickListener);
findViewById(R.id.button4).seOnClickListener(mClickListener);

private OnClickListener mClickListener = new View.OnClickListener(
    public void onClick(View view){
        switch(view.getId()){
            case R.id.button1:
            //button1 click handle here...
            break;
            case R.id.button2:
            //button2 click handle here...
            break;
            case R.id.button3:
            //button3 click handle here...
            break;
            case R.id.button4:
            //button4 click handle here...
            break;
        }
    }); 
```

试试看，希望对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:33:38.660

您可以像这样定义并传递一个 onClickListener：

```
public AssignListener( integer tButton, OnClickListener listener ){

tButton.setOnClickListener(listener);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T13:01:10.943

```
public class MyClass implements OnClickListener, OnLongClickListener {
    Button button1;
    Button button2;
    ...
    Button buttonN;

    . . . 
    setButtonsListener(findViewById(<your top view id>));
    . . .

    void setButtonsListener(ViewGroup vg) {
            int count = vg.getChildCount();
            Button btn;
            View v;
            for(int i=0; i < count ; i++) {
                v = vg.getChildAt(i);
                if( v instanceof Button ) {
                    btn = (Button)v; 
                    btn.setOnClickListener(this);
                    btn.setOnLongClickListener(this);
                } else if( v instanceof ViewGroup ) {
                    setButtonsListener((ViewGroup) v);
                }
            }
    }

    @Override
    public boolean onLongClick(View v) {
            // TODO Auto-generated method stub
            return false;
    }

    @Override
    public void onClick(View v) {
            // TODO Auto-generated method stub

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:31:13.467

最简单的方法是为每个按钮创建侦听器实现，如您的第一个片段中所写。

我认为拥有像 AssignListener() 这样的通用方法没有任何合理的好处。不要重新发明自行车，使用现有的 setOnClickListener() 方法并传递特定于按钮的侦听器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T08:31:34.900

一个简单的解决方案是创建一个名为 tMethod 的函数，该函数接受一个按钮 id，并具有一个 switch 语句，允许对给定的按钮 id 执行特定操作。这将在 onClick 函数中调用，如 tMethod(view.getId())。

顺便说一句，Python 有方法。Java有函数。学徒模式关闭！

# jquery - Jquery 在内容完成加载之前执行

> ID：15565738
> 
> 赞同：0
> 
> 时间：2013-03-22T08:23:04.063
> 
> 标签：jquery

我使用 load() 将某些内容加载到名为“contents”的 div 中，并在开始加载之前将其隐藏。我希望 div 仅在内容完全加载后才会淡入，但似乎 div 'contents' 会在加载完成之前淡入。我使用以下脚本：

```
$("#menu").click(function(){
        $("#contents").hide().load(loadUrl, function(){
            $(this).fadeIn(1000);});
    }); 
```

有人可以帮我解决这个问题吗？我目前正在本地服务器上对其进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:26:05.013

如下使用它，

```
$("#contents").hide().load(loadUrl, function(){ }).fadeIn(1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:39:19.790

看起来像浏览器重绘问题，在调用 fadeIn 之前给出超时应该可以解决问题

```
$("#menu").click(function(){
    $("#contents").hide().load(loadUrl, function(){
        var el = $(this);
        setTimeout(function(){
            el.fadeIn(1000);
        }, 100)
    });
}); 
```

您也可以尝试使用[延迟](http://api.jquery.com/delay/)功能

```
$("#menu").click(function(){
    $("#contents").hide().load(loadUrl, function(){
        $(this).delay(10).fadeIn(1000);
    });
}); 
```

# c# - 确定 PDF 文档的纸张大小

> ID：15565740
> 
> 赞同：1
> 
> 时间：2013-03-22T08:23:11.070
> 
> 标签：c#, pdf

有没有办法在 C# 中确定 PDF 文档的纸张大小。我找到了一个名为[PdfPrintNet](http://www.pdfprinting.net/?gclid=CLSnsY_l_rUCFUTItAodRX4A3Q)的 dll ，它允许我指定纸张大小，但它没有任何方法来确定当前纸张大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:25:17.233

[iTextSharp](http://itextpdf.com/)应该能够在这里为您提供帮助。

```
public float GetPageHeight(string PathToPDF)
{
    var reader = new PdfReader(PathToPDF);

    // A post script point is 0.352777778mm
    const float postScriptPoints = (float)0.352777778;

    // The height is returned in post script points from iTextSharp
    float height = reader.GetPageSizeWithRotation(1).Height * postScriptPoints;

    reader.Close();

    return height;

}

public float GetPageWidth(string PathToPDF)
{        
    var reader = new PdfReader(PathToPDF);

    // A post script point is 0.352777778mm
    const float postScriptPoints = (float)0.352777778;

    // The height is returned in post script points from iTextSharp
    float width = reader.GetPageSizeWithRotation(1).Width * postScriptPoints;   

    reader.Close();

    return width;

} 
```

从[如何使用 iTextSharp 检查 PDF 页面大小修改的代码](http://rory.streetfamily.info/PermaLink,guid,ddfebc2e-9b52-48e4-945d-9401c90d4c55.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:25:26.750

```
PdfReader reader = new PdfReader(m);
PdfImportedPage page = writer.GetImportedPage(reader, i);
//size information
int wid=page.PageSize.Width
int heigh=page.PageSize.Height 
```

通过这个。可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T08:35:02.737

如果您正在使用[PdfPrintNet](http://www.pdfprinting.net/?gclid=CLSnsY_l_rUCFUTItAodRX4A3Q) dll，则可以使用[`PdfPrint.PaperSize`](http://www.pdfprinting.net/help/)Property 获取 pdf 文档的 parer-size。

希望能帮助到你 ：）

# python - 在 2013 年，我需要使用 nose1 还是 nose2 ？鼻子的未来在哪里？

> ID：15565742
> 
> 赞同：7
> 
> 时间：2013-03-22T08:23:11.903
> 
> 标签：python, testing, nose

我想知道 2013 年我需要使用什么鼻子版本？
我想知道鼻子的未来是什么：鼻子1 还是鼻子2？

我在nose1 github 上看到比nose2 github 存储库更多的活动。

几个月以来，我一直尝试使用nose2，但我看到我一个人，每个人都在我周围使用nose1。

你对nose2有何评论？

最好的问候，
斯蒂芬

# algorithm - 有没有一种有效的方法来计算节点图上的热图之类的东西？

> ID：15565747
> 
> 赞同：4
> 
> 时间：2013-03-22T08:23:43.333
> 
> 标签：algorithm, graph, graph-algorithm, heatmap

我正在编写一个简单的游戏模拟，其中有一些计算机控制的生物在节点图上移动。他们想朝着目标前进（想想，比如说，狼想要朝着兔子前进）。

我已经实现了简单的寻路，因此生物可以直接找到通往给定目标节点的最快路线，但是在多个目标（多个节点上有很多食物）的情况下，我想我想生成类似热图梯度的东西图表，这样狼就可以查询邻居节点并前往最热的邻居。

有人知道在图表上生成热图的有效方法吗？我能想到的最快方法是进行 N 次全图遍历（N=食物节点数），每次从每个食物节点开始进行 BFS（或最近/最热未访问节点优先遍历），计算图表中每个节点上该食物节点的热量，然后在一个收集过程中将每种食物的所有热量相加。我不喜欢这样，因为，好吧，如果我有一个大图和大量食物节点，我可能必须做很多完整的图遍历，每个都有很多节点。

我正在考虑做一种 BFS，从所有食物节点的开放集合开始，然后从那里向外移动，但我只会计算到最近的食物节点的距离；食物节点集群不会产生非常热的位置，因为我无法返回以增加先前遍历的节点中的热量（如果我允许这样做，我基本上就像我之前的示例一样访问每个节点 N 次） . 例如，如果我开始：

```
F-O-O-O-O-O-O-O-O
| | | | | | | | |
F-O-O-O-O-O-O-O-F 
```

其中 F 是食物，O 是空节点，假设食物节点的热量为 5，每个节点的衰减为 1，我希望我的热图看起来像

```
9-7-5-3-1-1-2-3-4
| | | | | | | | |
9-7-5-3-2-2-3-4-5 
```

但是 BFS 风格的遍历（任何节点只能访问一次）看起来像：

```
5-4-3-2-1-1-2-3-4
| | | | | | | | |
5-4-3-2-2-2-3-4-5 
```

有人有更聪明的方法来做到这一点吗？最坏的情况也许我可以进行多次 N 次图遍历，但是按照时间表，所以我每 X 秒只进行一次食物节点遍历......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:25:36.453

为什么不模拟图形周围的热量流动？也就是说，如果节点*i*在时间*t*的温度为 T [*i*]  ( *t* )，则设置：

> T[*我*] ( *T* + 1) = α F[*我*] ( *T* ) + (1 - β) T[*我*] ( *T* ) + γ Σ [*j* ∈ n(*我*)] T [*j*]  ( *T* )

其中 F [*i*]  ( *t ) 是节点**i*在时间*t*上的食物量，n( *i* ) 是节点*i*的邻居集，α、β 和 γ 是模拟的参数。α 是热量进入系统的速率，β 是热量离开系统的速率，γ 是热量从一个节点流向其相邻节点的速率。所有这些都应该是很小的数字：您必须通过实验为它们找到合适的值。

使用这个方程，需要 O(|nodes| + |edges|) 来更新每个节点的温度，因此您应该能够定期计算它（理想情况下是每一帧）。

上面的等式用于离散模拟（具有恒定时间步长）。如果您有可变时间步长 δt，请尝试：

> T[*我*] ( *T* + δt) = δt α F[*我*] ( *T* ) + (1 - β) ^(δt) T[*我*] ( *T* ) + δt γ Σ [*j* ∈ n(*我*)] T [*j*]  ( *T* )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:59:43.017

您的一般方法很好，但我认为您被热图概念蒙蔽了双眼。本质上，您想要计算所有目标的加权平均位置，并让您的猎人前往该点。我将按如下方式实现：

1.  如果有比N更近的目标，则跟踪最近的目标；别的
2.  计算比 Max 更近的所有目标的加权平均位置，权重函数 = D^2（只是猜测，但计算速度很快，因为不需要平方根）。猎人在每次迭代中都会前往该位置。
3.  从 1 开始重复。

# grails - 在 Grails 中防止特定异常登录

> ID：15565748
> 
> 赞同：4
> 
> 时间：2013-03-22T08:23:58.850
> 
> 标签：grails, log4j

在 grails 中，我想停止记录控制器中发生的一些特定异常。

我已使用 urlmapping 管理此异常以呈现客户警告页面

es 我的 url 映射

```
"500"(controller:'error', action:'excOne', exception: MyExceptionOne)       
"500"(controller:'error', action:'excTwo', exception: MyExceptionTwo) 
```

但是这个异常继续被 log4j 记录。如何将它们排除在日志记录之外？

这是我的 log4j 配置：

```
log4j = {
      error  'org.codehaus.groovy.grails.web.servlet',  //  controllers
        'org.codehaus.groovy.grails.web.pages', //  GSP
        'org.codehaus.groovy.grails.web.sitemesh', //  layouts
        'org.codehaus.groovy.grails.commons', // core / classloading
        'org.codehaus.groovy.grails.plugins', // plugins
        'org.codehaus.groovy.grails.orm.hibernate', // hibernate integration
        'org.springframework',
        'org.hibernate',
        'net.sf.ehcache.hibernate',
        'grails.app.services.org.grails.plugin.resource',
        'grails.app.taglib.org.grails.plugin.resource',
        'grails.app.resourceMappers.org.grails.plugin.resource',
        'grails.app.services.NavigationService'

    warn   'org.mortbay.log'    
    debug  "com.myproject.*"

    debug  "grails.app"
    debug  "com.myproject.*"

appenders {
console name:'stdout', layout:pattern(conversionPattern: '[%r] %c{2} %m%n')
}

root {
error 'stdout'
warn 'stdout'
additivity = true
} 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-02T15:55:08.773

我没有设法删除日志中*所有*提到的异常，但我所做的是我阻止了堆栈跟踪使日志混乱：

创建一个按照您想要的方式运行的 StackTracePrinter 实现。

```
package com.myStuff
import org.codehaus.groovy.grails.exceptions.DefaultStackTracePrinter

class MyStackTracePrinter extends DefaultStackTracePrinter {

  String prettyPrint(Throwable throwable) {
    if (throwable instanceof MyException) return "<stack trace suppressed>"
    return super.prettyPrint(throwable)
  }
} 
```

然后，在`Config.groovy`：

```
grails.logging.stackTracePrinterClass = 'com.myStuff.MyStackTracePrinter' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T07:44:36.553

尝试：

```
off "your.class.file" 
```

在代码行之后：

```
debug  "com.myproject.*" 
```

只要确保您提供正确的类路径，如果这不起作用，请告诉我类文件路径？

# eclipse - 查看 OSGi 包

> ID：15565751
> 
> 赞同：1
> 
> 时间：2013-03-22T08:24:13.443
> 
> 标签：eclipse, cmd, osgi, bundle, equinox

我有 Eclipse 3.8.1，我想查看启动了哪些 OSGi 包，所以我在eclipse/plugins 目录的**cmd中编写：**

```
java -jar org.eclipse.osgi_3.8.1.v20120830-144521.jar -console 
```

但什么也没发生，只有空行

我必须安装一些东西才能看到它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:29:22.650

如果您已经运行了 Eclipse，那么您可以从**控制台**视图访问**主机 OSGI 控制台**

 **![主机 OSGI 控制台](../Images/5b5867f6017d5654e62534fd28e2b8c4.png)

**更新** 我认为[这](http://devblog.virtage.com/2012/08/osgi-with-equinox-for-beginners-overview/#update-for-equinox-3.8-console-.28part-of-eclipse-4.2-.28juno.29.29)就是你要找的

```
$ java -Dosgi.bundles=org.eclipse.equinox.console_1.0.0.v20120522-1841.jar@start,org.apache.felix.gogo.command_0.8.0.v201108120515.jar@start,org.apache.felix.gogo.runtime_0.8.0.v201108120515.jar@start,org.apache.felix.gogo.shell_0.8.0.v201110170705.jar@start -jar org.eclipse.osgi_3.8.1.v20120830-144521.jar -console 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:54:46.670

有两种选择。这些如下：

1.  创建一个配置文件夹并放置一个 config.ini 文件。在 config.ini 文件中设置以下内容：

osgi.console.enable.builtin=true

这将使用默认控制台启动 Equinox 框架。

1.  或采取以下步骤。有关详细信息检查：[http ://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fconsole_shell.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fconsole_shell.htm)

将必要的捆绑包放在一个文件夹中。捆绑包是：

```
org.apache.felix.gogo.command_0.8.0v<version>.jar
org.apache.felix.gogo.runtime_0.8.0v<version>.jar
org.apache.felix.gogo.shell_0.8.0v<version>.jar
org.eclipse.equinox.console_1.0.0v<version>.jar
org.eclipse.osgi.jar 
```

在其中创建一个配置子文件夹和一个 config.ini 文件。在 config.ini 文件中添加以下条目：

```
osgi.bundles=./org.apache.felix.gogo.runtime_0.8.0v<version>.jar@start,\
./org.apache.felix.gogo.command_0.8.0v<version>.jar@start,\
./org.apache.felix.gogo.shell_0.8.0v<version>.jar@start,\
./org.eclipse.equinox.console.jar@start,\
osgi.console.enable.builtin=false
osgi.console=<port> 
```

使用以下命令行启动 Equinox 框架：java -jar org.eclipse.osgi.jar**

# html - 如何实现固定侧边栏？

> ID：15565754
> 
> 赞同：3
> 
> 时间：2013-03-22T08:24:17.970
> 
> 标签：html, css, css-position

我有这样的情况：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>test</title>
    </head>
    <style>
        #wrapper { width: 1100px; margin: 0px auto; }
        #wrapper #stream { width: 790px; float: left; border: 1px solid red;  }
        #wrapper aside { width: 270px; float: left;  border: 1px solid red; }
    </style>
    <body>
        <section id="wrapper">
            <section id="stream">
                some text...
            </section>
            <aside>
                <ul>    
                    <li>something</li>
                    <li>something</li>
                    <li>something</li>
                    <li>something</li>
                </ul>
            </aside>
        </section>
    </body>
</html> 
```

即使页面向下滚动，我也不希望侧边栏移动。

我尝试将侧面的位置设置为固定，但无法正确设置与左侧的距离。

我找到了一个 jQuery 的解决方案：

```
$(document).ready(function () {
    $(window).scroll(function () {
        $("aside").css('top', $(window).scrollTop()+'px');
    });
}) 
```

但是对于 Chrome 和 Safari，旁边的滚动是分段的。

有什么帮助吗？

=========================

**解决方案：**

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>test</title>
    </head>
    <style>
    #wrapper {

        width: 1100px;
        margin: 0px auto;
    }
    #stream {
      width: 800px;
      background: #ccc;
      float: left;
    }
    #sidebar {
    float: left;
      border: 1px solid red;
      width: 200px;
    }
    aside {
      position: fixed;
      top: 20px;
      border: 1px solid red;
    }
    </style>
    <body>
    <section id="wrapper">
        <section id="stream">
                some text...
        </section>
        <section id="sidebar">
          <aside>
                <ul>    
                    <li>something</li>
                    <li>something</li>
                    <li>something</li>
                    <li>something</li>
                </ul>
          </aside>
        </section>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:27:32.743

为了使用`top`、或属性`right`，您必须将对象的属性设置为、或。`bottom``left``display``absolute``relative``fixed`

无论哪种方式，通过设置`position: fixed;`滚动时它都不会移动。

# ios - xcode中的iphonesimulator（未找到SDK）错误

> ID：15565765
> 
> 赞同：10
> 
> 时间：2013-03-22T08:25:07.373
> 
> 标签：ios, xcode, ios-simulator, unity3d, linker-errors

我一直在尝试解决这个问题一段时间。我尝试为模拟器构建的原因是为了在 appstore 中现在需要的 4 英寸视网膜显示屏上获取屏幕截图。我正在制作一个统一的应用程序，我从论坛中看到人们成功地制作了模拟器版本。

在为 iphone/ipad 进行常规构建时，我没有任何错误，但是打开我的项目（统一标记为模拟器）并尝试将其构建到模拟器失败并出现链接器错误（见下文）。很明显`"iphonesimulator (SDK not found)" message in Architecture -> Base SDK selection list`。尽管在检查首选项 -> 下载时，所有模拟器都已安装。我可以手动启动模拟器

我是 iphone/ipad 开发的初学者，特别是在 Xcode 中，我在论坛中搜索这个问题，但没有找到任何可以解决我的问题的东西。谁能指出我正确的方向？我应该尝试什么，我应该在哪里寻找错误？

谢谢！

```
ld: warning: directory not found for option '-L"/Users/mirko/Dropbox/Unity'
ld: warning: directory not found for option '-LProjects/Project3D'
ld: warning: directory not found for option '-LProject/Project3D/Builds/iOS/S3D"'
ld: warning: directory not found for option '-L"/Users/mirko/Dropbox/Unity'
ld: warning: directory not found for option '-LProjects/Project3D'
ld: warning: directory not found for option '-LProject/Project3D/Builds/iOS/S3D/Libraries"'
0  0x10a87b098  __assert_rtn + 144
1  0x10a87e431  mach_o::relocatable::Section<x86>::addRelocFixup(mach_o::relocatable::Parser<x86>&, macho_relocation_info<Pointer32<LittleEndian> > const*) + 1781
2  0x10a88e636  mach_o::relocatable::Section<x86>::makeFixups(mach_o::relocatable::Parser<x86>&, mach_o::relocatable::Parser<x86>::CFI_CU_InfoArrays const&) + 90
3  0x10a88aaad  mach_o::relocatable::Parser<x86>::parse(mach_o::relocatable::ParserOptions const&) + 1433
4  0x10a8820c3  mach_o::relocatable::Parser<x86>::parse(unsigned char const*, unsigned long long, char const*, long, ld::File::Ordinal, mach_o::relocatable::ParserOptions const&) + 313
5  0x10a87faa1  mach_o::relocatable::parse(unsigned char const*, unsigned long long, char const*, long, ld::File::Ordinal, mach_o::relocatable::ParserOptions const&) + 149
6  0x10a8a033a  archive::File<x86>::makeObjectFileForMember(archive::File<x86>::Entry const*) const + 794
7  0x10a89fb50  archive::File<x86>::forEachAtom(ld::File::AtomHandler&) const + 198
8  0x10a8b176c  ld::tool::InputFiles::forEachInitialAtom(ld::File::AtomHandler&) + 420
9  0x10a8ba884  ld::tool::Resolver::resolve() + 44
10  0x10a87b380  main + 370
11  0x10a86ccd4  start + 52
A linker snapshot was created at:
    /tmp/Project3DSystem-2013-02-20-134511.ld-snapshot
ld: Assertion failed: (src.atom != NULL), function addRelocFixup, file /SourceCache/ld64/ld64-136/src/ld/parsers/macho_relocatable_file.cpp, line 5468. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T13:06:18.557

Check you deployment target and set it to 4.3 or higher. Also see Objective C/C++ compiler and set it Apple LLVm Compiler 5.0 (xcode 5) .

After this check you base SDK in build settings and change make sure it is set iOS Latest 7.0 or whatever latest SDk you have.

You have to check deployment target both in target and project icon in prject settings pane.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T00:47:11.663

我的项目中有类似的问题，但我没有使用 Unity3D。我找到了一些与此相关的材料：

> 是的，我第一次在模拟器上运行游戏时遇到了这个问题。最后我发现SDK版本必须是一样的。如果你在unity3d中选择了4.1，那么你必须在4.1版本的模拟器上运行它。它给你任何帮助吗？

原文链接：[iphonesimulator (SDK not found)](http://forum.unity3d.com/threads/161985-iphonesimulator-%28SDK-not-found%29)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-10T23:27:03.620

除非您已经这样做，否则请尝试重新安装 xcode。

# spring - Spring Security 身份验证问题

> ID：15565766
> 
> 赞同：0
> 
> 时间：2013-03-22T08:25:07.967
> 
> 标签：spring, spring-security

我们需要有关使用 Spring Security 进行身份验证的帮助。当我们尝试为我们的应用程序输入登录凭据并单击提交时，我们收到了无效凭据错误。

我们已经检查了数据库，并且我们用于登录的身份验证详细信息似乎是正确的。但仍然得到以下异常

```
[DEBUG,LdapAuthenticationProvider,http-localhost%2F127.0.0.1-8080-1] Processing         authentication request for user: admin
[DEBUG,FilterBasedLdapUserSearch,http-localhost%2F127.0.0.1-8080-1] Searching for user    'admin', with user search [ searchFilter: 'sAMAccountName={0}', searchBase:    'DC=ad,DC=infosys,DC=com', scope: subtree, searchTimeLimit: 0, derefLinkFlag: true ]
[INFO,SpringSecurityLdapTemplate,http-localhost%2F127.0.0.1-8080-1] Ignoring PartialResultException
[WARN,LoggerListener,http-localhost%2F127.0.0.1-8080-1] Authentication event AuthenticationFailureBadCredentialsEvent: admin; details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: DEC9042719AA53736897C4383DCF8FE8; exception: Bad credentials
[DEBUG,UsernamePasswordAuthenticationFilter,http-localhost%2F127.0.0.1-8080-1] Authentication request failed: org.springframework.security.authentication.BadCredentialsException: Bad credentials 
```

我正在尝试连接到 sqlserver2008 数据库并尝试登录。下面是我们正在使用的 security.xml 文件

```
<http auto-config='false' realm="MaskIT Realm" access-denied-page="/403.jsp">
        <intercept-url pattern="/*.htm" access="ROLE_ADMIN,ROLE_REQUESTOR,ROLE_APPROVER" />
        <intercept-url pattern="/login.jsp" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <form-login login-page="/login.jsp"
              authentication-failure-url="/login.jsp?login_error=1"
              default-target-url="/redirect.jsp" />
        <http-basic />
        <intercept-url pattern="/securityService" access="IS_AUTHENTICATED_ANONYMOUSLY"
              requires-channel="http" />
        <logout logout-success-url="/login.jsp" />
  </http>
  <b:bean id="myAuthenticationProvider"
      class="com.infosys.setl.himi.maskit.security.SwitchingAuthenticationProvider">
    <b:constructor-arg ref="paramManager" />
    <b:property name="providers">
        <b:list>
            <b:ref local="daoAuthenticationProvider" />
            <b:ref local="ldapProvider" />

        </b:list>
    </b:property>
</b:bean>

<b:bean id="daoAuthenticationProvider"
        class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
        <b:property name="userDetailsService" ref="userDetailsService" />
        <!--  <b:property name="passwordEncoder" ref="passwordEncoder" /> -->
  </b:bean>

  <b:bean id="userDetailsService"
        class="org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl">
        <b:property name="dataSource" ref="dataSourceMSSQL" />
        <b:property name="usersByUsernameQuery">
              <b:value>SELECT user_id ,password,active FROM sec_users
                    WHERE
                    user_id=?</b:value>
        </b:property>
        <b:property name="authoritiesByUsernameQuery">
          <b:value>SELECT a.user_id AS user_id,b.roleName AS roleName FROM
                    sec_users a, emaskit_roles b
                    WHERE a.roleID = b.roleID AND
                    a.user_id=?</b:value>
        </b:property>
  </b:bean> 
```

我想知道如何以及何时执行 sql 查询以检查身份验证。它是调用任何 java 类（以便我可以调试代码并检查失败的地方）来执行检查还是由 Spring 框架在内部完成。

请协助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:48:54.327

~~我的兄弟是，您的日志文件显示您尝试使用 Ldap 进行身份验证（`LdapAuthenticationProvider`），但您的 xml 文件显示您尝试使用`DaoAuthenticationProvider`.~~

~~我真的认为您已经大量部署了，要么您查看/部署了错误的服务器，要么您根本没有部署（实际版本）应用程序。~~

此外，您的配置中有一个错误：您必须告诉 spring security 使用您的`daoAuthenticationProvider`：

添加这个：

```
<authentication-manager alias="authenticationManager">
    <authentication-provider ref="daoAuthenticationProvider"/>
</authentication-manager> 
```

# asp.net-mvc - 使用父/子表的层次面包屑

> ID：15565773
> 
> 赞同：0
> 
> 时间：2013-03-22T08:25:21.243
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, code-first

我正在尝试构建一个诊断工具，因此您从列表中选择一个项目，它会显示另一个列表，您选择另一个，依此类推-因此可以根据需要将诊断问题隐藏得尽可能深，例如：

从中挑选：

```
Software - Microsoft - Outlook - How do I?
                               - Errors 
                     - Word    - How do I?
                               - Errors
                     - Excel   - How do I?
                               - Errors

         -Lotus 

Hardware -PC
         -Laptop 

Network  -Firewall 
```

这些将在表中定义为：

```
id  parent_id Title
1   0         Software
2   0         Hardware
3   0         Network
4   1         Microsoft
5   1         Lotus
6   4         Outlook
7   4         Word
8   4         Excel
9   5         How do I?
10  5         Errors
...etc 
```

我已经看到了对 MVCSiteMap 的引用——我以类似的方式使用了 webforms 站点地图——但这需要是动态的，以便面包屑显示以下链接：

```
Software > Microsoft > Excel > How do I? > Freeze panes 
```

我的表模型是：

```
public class Forum
{
    public int id { get; set; }
    public int parent_id { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
} 
```

我的控制器中的代码是：

```
 var bc = db.Fora.FirstOrDefault(i => i.id == id);
        var cbh = new List<Forum>();
        if (bc != null)
        {
            var parent = bc.parent_id;
            while (parent != null)
            {
                cbh.Insert(0, parent);
                parent = parent.Parent;
            }
        } 
```

我要做的是建立一个新的论坛列表，然后我可以列出并从中生成面包屑。我遇到困难的地方是：

```
 cbh.Insert(0, parent);
 parent = parent.Parent; 
```

我怀疑我的控制器代码在这两行中有错误，或者我的论坛模型需要从**parent_id**到**id**的引用来创建层次结构。

谁能帮我完成我的最后一块拼图？

谢谢，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:03:41.213

在你的代码`cbh`中是一个 Forum 类型的通用列表，但是`parent`如果是 int 类型，你会在你的时候得到一个类型错误`cbh.Insert(0, parent);`，你应该做的更像是这样：

```
var bc = db.Fora.FirstOrDefault(i => i.id == id);
var cbh = new List<Forum>(); 
while (bc != null) 
{
    cbh.Insert(0, bc);
    bc = db.Fora.FirstOrDefault(i => i.id == bc.parent_id);
} 
```

祝你好运。

# java - 有谁知道如何提取我的日期字符串并更改格式？

> ID：15565774
> 
> 赞同：1
> 
> 时间：2013-03-22T08:25:23.453
> 
> 标签：java, regex

我的字符串中有一个有效日期，如下所示：

```
String strDate = "Available on 03292013"; 
```

我想从`strDate`字符串中提取日期并将其更改为`Available on 03/05/2015`

有谁知道我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:26:55.640

您可以通过执行以下步骤来实现此目的：

*   首先，使用正则表达式“ `[^0-9]`”从字符串中提取日期。
*   接下来，使用 SimpleDateFormat 将提取日期的格式从“MMddyyyy”更改为“MM/dd/yyyy”
*   最后，您必须将格式化的日期字符串值附加到字符串“Available on”。

请找到下面的代码以更清楚地了解实现。

```
package com.stackoverflow.works;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

/**
 * @author sarath_sivan
 */

public class DateFormatHelper {

    private static final String DD_MM_YYYY = "MMddyyyy";
    private static final String DD_SLASH_MM_SLASH_YYYY = "MM/dd/yyyy";

    public static void main(String[] args) {
        DateFormatHelper  dateFormatHelper = new DateFormatHelper();
        dateFormatHelper.run();
    }

    public void run() {
        String strDate = "Available on 03292013";
        System.out.println("Input Date: " + strDate);
        strDate = DateFormatHelper.getDate(strDate); 
        strDate = "Available on " + DateFormatHelper.formatDate(strDate);
        System.out.println("Formatted Date: " + strDate);
    }

    public static String formatDate(String strDate) {
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(DD_MM_YYYY);
        Date date;
        try {   
            date = simpleDateFormat.parse(strDate);
            simpleDateFormat = new SimpleDateFormat(DD_SLASH_MM_SLASH_YYYY);
            strDate = simpleDateFormat.format(date);
         } catch (ParseException parseException) {
             parseException.printStackTrace();
         }

        return strDate;
    }

    public static String getDate(String strDate) {
        return strDate.replaceAll("[^0-9]", "");
    }

} 
```

**输出：**

```
Input Date: Available on 03292013
Formatted Date: Available on 03/29/2013 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:31:29.107

试试这个简单而优雅的方法。

```
DateFormat dateParser = new SimpleDateFormat("'Available on 'MMddyyyy");
DateFormat dateFormatter = new SimpleDateFormat("'Available on 'dd/MM/yyyy");
String strDate = "Available on 03292013";
Date date = dateParser.parse(strDate);
System.out.println(dateFormatter.format(date)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:34:55.357

这应该做你想要的。请注意，我只是在操作它，`String`而不考虑它实际包含的内容（在这种情况下为日期）。

```
String strDate = "Available on 03292013";
String newStr = strDate.substring(0, 15) + "/"
        + strDate.substring(15, 17) + "/" + strDate.substring(17);
System.out.println(newStr); 
```

结果：

```
Available on 03/29/2013 
```

# forms - Moodle moodleform::validation()

> ID：15565782
> 
> 赞同：1
> 
> 时间：2013-03-22T08:26:00.557
> 
> 标签：forms, moodle, custom-validators

在我的自定义插件中，我只使用了三个下拉菜单和一个文本框。当我提交表单并`validation($data)`调用方法时，我只会得到下拉状态的值以及文本框的值。

不返回其他两个下拉列表的值。我不确定我错过了什么。

这是我的代码：

```
if (!defined('MOODLE_INTERNAL')) {
    die('Direct access to this script is forbidden.');    ///  It must be included from a Moodle page
}
require_once($CFG->libdir.'/formslib.php');

class ohio_addconfiguration_form extends moodleform {

// Define the form
function definition() {

    $id = optional_param('id', 0, PARAM_INT);

    $countries = array();
    $states = array();
    $counties = array();
    $cities = array();

    $mform =& $this->_form;

    // Creating hidden variable id
    $mform->addElement('hidden', 'id');
    $mform->setType('id', PARAM_INT);

    // Creating header "Configuration"
    $mform->addElement('header', 'configuration', get_string('ohio', 'local_ohio'));

    /* Listing States */
    $states_result = $this->get_states("", "1", "id, state_name", "state_name ASC");    
    if($states_result) {
        foreach($states_result as $key=>$state){
        $states[$state->id] =  $state->state_name;
        }           
    }       
    $states= count($states)?array(''=>get_string('select_state', 'local_ohio').'...') + $states :array(''=>get_string('select_state', 'local_ohio').'...');
    $mform->addElement('select', 'state_id', get_string('select_state', 'local_ohio'), $states);
    $mform->addRule('state_id', get_string('required'), 'required', null, 'client');
    $mform->setType('state_id', PARAM_INT);

    /* Listing Counties */
    $counties= array(''=>get_string('select_county', 'local_ohio').'...');
    $mform->addElement('select', 'county_id', get_string('select_county', 'local_ohio'), $counties);
    $mform->addRule('county_id', get_string('required'), 'required', null, 'client');
    $mform->setType('county_id', PARAM_INT);

    /* Listing Cities */
    $cities= array(''=>get_string('select_city', 'local_ohio').'...');
    $mform->addElement('select', 'city_id', get_string('select_city', 'local_ohio'), $cities);
    $mform->addRule('city_id', get_string('required'), 'required', null, 'client');
    $mform->setType('city_id', PARAM_INT);

    // Creating text box for School
    $mform->addElement('text', 'school_name', get_string('school_name', 'local_ohio'), 'size="25"');
    $mform->setType('school_name', PARAM_TEXT);
    $mform->addRule('school_name', get_string('required'), 'required', null, 'client');
    $mform->addRule('school_name', get_string('maximumchars', '', 100), 'maxlength', 100, 'client');

    $this->add_action_buttons();
}

function validation($data) {
    global $DB;
    echo "<pre>";
    print_r($data);
    exit;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:00:59.710

我不确定您到底在寻找什么，表单验证或数据检索，但我假设您对数据检索感兴趣，并且您上面提供的代码是用“filename_form.php”编写的。

validation() 方法用于验证服务器端字段中输入的数据，而不是获取字段的值。

要获取字段的值，您需要创建另一个名为“filename.php”的文件，并在其中包含“filename_form.php”以显示表单。您可以参考[这里](http://docs.moodle.org/dev/lib/formslib.php_Usage)使用 Formslib。

# sublimetext2 - 从 git 缓存中删除文件

> ID：15565783
> 
> 赞同：0
> 
> 时间：2013-03-22T08:26:01.107
> 
> 标签：sublimetext2

当我在 sublime text 2 中手动删除文件时，如何从 Git 缓存中自动删除文件？有没有插件可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:34:30.340

**`git cache`这是您可以手动删除文件/文件夹的方式。**

删除文件/文件夹的跟踪 - 但将它们保留在磁盘上 - 使用

```
$ git rm --cached 
```

现在它们不会显示为“已更改”，但仍显示为未跟踪的文件

```
$ git status -u 
```

将它们添加到 `.gitignore`

采用

```
$ git config --global core.editor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-09T06:09:22.893

删除您要忽略的确定文件，而不是删除缓存中的所有文件，这将降低风险。

1.  添加到`.gitignore`;
2.  删除文件/文件`git rm cached <file>`

# cloud-foundry - 服务器启动时来自 org.cloudfoundry.runtime.env.CloudEnvironment.getServiceInfo 的 NullPointerException

> ID：15565786
> 
> 赞同：1
> 
> 时间：2013-03-22T08:26:06.373
> 
> 标签：cloud-foundry

我正在尝试基于博客[http://blog.cloudfoundry.org/2012/06/18/deploying-tomcat-7-using-the-standalone-framework/](http://blog.cloudfoundry.org/2012/06/18/deploying-tomcat-7-using-the-standalone-framework/) 将tomcat 7.0 Web 应用程序部署为独立应用程序-sql 服务。虽然此应用程序在没有服务的情况下运行良好，但当我将 MySQL 服务绑定到该应用程序时，服务器无法启动。以下是我在服务器启动时遇到的异常：

```
 Mar 22, 2013 8:03:49 AM org.apache.catalina.core.ApplicationContext log
 INFO: ContextListener: contextInitialized()
 Mar 22, 2013 8:03:49 AM org.apache.catalina.core.ApplicationContext log
 INFO: SessionListener: contextInitialized()
 Mar 22, 2013 8:03:49 AM org.apache.catalina.core.ApplicationContext log
 INFO: ContextListener: attributeAdded('org.apache.jasper.compiler.TldLocationsCa
 che', 'org.apache.jasper.compiler.TldLocationsCache@2fe6e305')
 Mar 22, 2013 8:03:49 AM org.apache.catalina.core.ApplicationContext log
 INFO: Set web app root system property: 'webapp.root' = [/var/vcap/data/dea/apps
 /log-app-0-0466f9837a2ada3db95aef1b77a78787/app/webapps/ROOT/]
 Mar 22, 2013 8:03:49 AM org.apache.catalina.core.ApplicationContext log
 INFO: Initializing Spring root WebApplicationContext
 Mar 22, 2013 8:03:50 AM org.apache.catalina.core.StandardContext listenerStart
 SEVERE: Exception sending context initialized event to listener instance of clas
 s org.springframework.web.context.ContextLoaderListener
 org.springframework.beans.factory.BeanCreationException: Error creating bean wit
 h name 'mysql1': Invocation of init method failed; nested exception is java.lang
 .NullPointerException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBean
 Factory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBean
 Factory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBean
 Factory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb
 ject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr
 y.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBe
 an(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean
 (AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.
 preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    at org.springframework.context.support.AbstractApplicationContext.finish
 BeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refres
 h(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationCon
 text(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationConte
 xt(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitiali
 zed(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContex
 t.java:4797)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContex
 t.java:5291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase
 .java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:87
 7)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)

    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.jav
 a:1114)
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig
 .java:1673)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:44
1)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
 utor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
 .java:908)
    at java.lang.Thread.run(Thread.java:662)
 **Caused by: java.lang.NullPointerException
    at org.cloudfoundry.runtime.env.CloudEnvironment.getServiceInfo(CloudEnv
 ironment.java:150)**
    at org.cloudfoundry.runtime.service.AbstractCloudServiceFactory.createIn
 stance(AbstractCloudServiceFactory.java:54)
    at org.springframework.beans.factory.config.AbstractFactoryBean.afterPro
 pertiesSet(AbstractFactoryBean.java:130)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBean
 Factory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBean
 Factory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 26 more
 Mar 22, 2013 8:03:50 AM org.apache.catalina.core.ApplicationContext log
 INFO: Closing Spring root WebApplicationContext
 Mar 22, 2013 8:03:50 AM org.apache.catalina.core.ApplicationContext log
 INFO: Shutting down log4j 
```

这是使用获取的 localhost 日志

```
 vmc files log-app app/logs/localhost.2013-03-22.log 
```

非常感谢有关此问题的任何帮助和见解。

另外，我想补充一点，我在推送期间将服务绑定到应用程序。这是 vmc app log-app 命令的结果：

C:\Users\kinjal.doshi\apache-tomcat-7.0.35>vmc app log-app log-app: running platform: Standalone on java usage: 256M x 1 instance urls: log-app.cloudfoundry.com services: mysql -2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:00:28.413

我已经能够解决这个问题。只需将mysql连接器jar添加到tomcat 7.0 lib文件夹

# c - 改变变量值（C程序）

> ID：15565790
> 
> 赞同：-4
> 
> 时间：2013-03-22T08:26:14.590
> 
> 标签：c

```
int main(void)
{
  int a=5;
  fun();
  printf("%d",a);
  return 0;
} 
```

我需要编写函数体*fun()*以便 printf 将打印**15**。我不能改变*fun()*的原型，即不能**传递**任何东西，也不能修改`main()`函数中的任何东西

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T08:44:04.550

警告 - 可怕的黑客入侵：

```
void fun()
{
    int b;
    int *a = &b;
    while(*a != 5)
    {
        a++;
    }
    *a = 15;
} 
```

这会在堆栈中搜索我们希望修改的变量的值，假设它与本地声明的 int 具有相同的对齐方式。它还假设变量实际上会在堆栈中（它可以被优化掉），并且我们不会找到具有相关数字的任何其他位置。这些自然是危险的假设。如果假设被证明是不正确的，那么很可能会发生不好的事情。对于导致使用此类黑客的任何伤害、肢体丧失或死亡，我概不负责。

或者，更安全一些：

```
void fun()
{
    printf("1");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:32:43.507

你的问题只是被标记了`[c]`。**您所要求的不能使用正确的、可移植的 C 来完成，除非`a`定义`fun()`不同。**

如果这个问题是关于堆栈粉碎攻击的，那么如果没有：

*   知道这就是问题所在；
*   了解目标硬件架构和操作系统的全部细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T08:29:35.197

* * *

如果您无法更改的原型，`fun()`则将其设为宏；-)

```
#define fun() (a = 15)

int main(void)
{
  int a=5;
  fun();
  printf("%d",a);
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:44:44.657

```
#include <stdio.h>
void fun();

int main(void)
{
  int a=5;
  fun();
  printf("%d", a); 
  return 0;
}

void fun() {
  int p[1];
  p[11] = 15; 
  printf("%d\n", p[11]);
} 
```

# vb.net - 使用 Visual Studio 查找特定异常

> ID：15565792
> 
> 赞同：2
> 
> 时间：2013-03-22T08:26:22.140
> 
> 标签：vb.net, visual-studio-2010

我正在使用`VS 2010 Express`for`VB.net`并想知道是否有一种简单的方法可以发现使用 IDE 可能遇到的异常？

例如，如果我有以下内容：

```
If Me.saveQueryDialog.ShowDialog() = Windows.Forms.DialogResult.OK Then
    Try
        sqlTextBox.SaveFile(saveQueryDialog.FileName)
    Catch ex As Exception
        MessageBox.Show(String.Format("Save was unsuccessful encountered: {0}", ex.Message))
    End Try
End If 
```

我可以使用 IDE 以某种方式发现在这种情况下我会遇到的通常异常是`...ex As IO.IOException`

或在以下内容中：

```
If Me.openQueryDialog.ShowDialog = Windows.Forms.DialogResult.OK Then
    Try
        sqlTextBox.LoadFile(openQueryDialog.FileName)
    Catch ex As Exception
        MessageBox.Show(String.Format("Open was unsuccessful encountered: {0}", ex.Message))
    End Try
End If 
```

..我会遇到的最常见的例外是`...ex As IO.FileLoadException`

还是我只需要尝试记住这些特定的例外情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:50:50.643

您可以查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/e4a710b1.aspx)以了解您正在使用的每种方法，以查看它们可能引发的任何异常。

![可能的异常示例](../Images/1351e3d55b90057ffeef821817cbd4fa.png)

例如，这是`.SaveFile()`方法的可能例外。

# c# - DevExpress XtraGrid 中的红十字会

> ID：15565794
> 
> 赞同：3
> 
> 时间：2013-03-22T08:26:26.797
> 
> 标签：c#, devexpress

有时 XtraGrid 得到一个红十字而不是数据。（[http://www.devexpress.com/Support/Center/p/CB4246.aspx、http://www.devexpress.com/Support/Center/p/A884.aspx](http://www.devexpress.com/Support/Center/p/CB4246.aspx)等）[_](http://www.devexpress.com/Support/Center/p/A884.aspx)

我已启用中断异常（Ctrl+D、E、选择所有异常）-但不确定是否会发生其他任何事情以致出现红线。

如果您处于“XtraGrid 显示红色 X”状态，是否有一种简单的方法可以让 XtraGrid 再次工作（据我所知，仅关闭表单并重新打开它有帮助）。

我正在寻找类似的东西

```
 GridView gridView = this. GridViewXYZ(objectview);
 // objectView is refreshed
 gridView.RefreshData(); // <- this can thorw an exception that data is not available / UI will get an red cross
 // ??? do something to reset the gridView in a workig condition 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:06:58.497

您可以尝试调用`BeginInvoke`网格。

```
Action a = () => gridView.RefreshData();
gridView.GridControl.BeginInvoke(a); 
```

每当摆弄数据源时，您都可以尝试将其包装在这样的语句中。

我已经过期了一些类似的东西，你会惊讶于这样的东西的工作频率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:59:07.913

根据我之前的 GDI 经验，一旦你处于这种状态，你就会陷入困境。你做了一些在 GDI 中引起问题的事情，但它没有设法抛出异常/从中恢复。

关闭/重新打开表单的行为会导致释放和重新创建非托管 GDI 对象，因此 GDI 再次完全可操作，直到发生相同的错误情况。如果你不能防止这个错误，你可以看看尝试为表单/控件重新创建一个新的 GDI 对象，但我不确定你会如何去做。

这确实是 DevExpress 团队应该解决的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T05:35:00.993

> 如果您处于“XtraGrid 显示红色 X”状态，是否有一种简单的方法可以让 XtraGrid 再次开始工作

是的，如果您从一开始就没有进入错误状态。否则通过关闭/重新打开来解决它。

您链接到的文章包含有关导致[“死亡红十字会”](http://www.devexpress.com/Support/Center/p/A884.aspx)出现的原因的信息，或者在绘画期间发生未处理的异常，您处理控件的 CustomDraw 事件并且发生异常或正在异步调用方法。

如果您难以确定问题的原因，请尝试在示例项目中重新创建问题并将其发送给 DevExpress 支持团队。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T10:46:49.597

在显示引用对话框时，有时与 Visusa Studio 扩展 CodeRush（也由 devExpress 提供）有同样的问题。所以这似乎是一个内部问题。希望下一个版本的 devexpress 能解决这个问题。

# html - 带有字母快速滚动的Phonegap联系人列表？

> ID：15565795
> 
> 赞同：3
> 
> 时间：2013-03-22T08:26:28.500
> 
> 标签：html, css, cordova

我正在 Phonegap iOS 应用程序中实现联系人列表，想知道如何最好地实现按字母顺序快速滚动？谢谢！（见下方截图右侧）

![iosscroll](../Images/bfa7b341bba40fb4e67141255a396a37.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:12:27.843

Apple 将此功能称为 iOS UITableView [1] 的“部分索引导航”。

下面是一些 CSS/HTML/JS 实现：
-SenchaTouch 有一个非常好的实现。在“分组”列表下的 [2] 演示。
-一些 jsfiddles 发布以回应另一个 SO 问题 [3]。
-另一种实现（尽管演示似乎不起作用）[4]。

[[1]](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html) [[2]](http://cdn.sencha.io/touch/sencha-touch-2.1.0/examples/kitchensink/index.html#demo/list) [[3]](https://stackoverflow.com/questions/7933063/is-there-an-existing-alphabetized-list-widget-for-jquery-mobile) [[4]](http://cubiq.org/contact-list-on-webkit-for-iphone)

# css - 2 个 CSS 文本 - 1 个电子邮件地址 - 我如何将它们并排对齐？

> ID：15565796
> 
> 赞同：0
> 
> 时间：2013-03-22T08:26:29.047
> 
> 标签：css, alignment, text-alignment

我是具有基本 CSS 技能的目录网站的网站管理员，在 Joomla 基础上使用 SobiPro。目录条目在顶部显示 2 张图像 - 一张外部照片和一张内部照片。有时，只有一个或另一个（有时两者都没有）可用；所以，我有一个行条目，要求任何可以提供丢失图片的人通过电子邮件将其/他们发送给我。在我们最新的升级之前，这不是问题，但现在是。无法使两个 div 对齐。[你可以在这里](http://www.byzcath.org/new/index.php/find-a-parish-mainmenu-111?pid=141&sid=674%3aNY-Brooklyn-3-Williamsburg)看到一个例子！

这是 CSS 模板当前的样子：

```
div.field_photos
{
    border-style: none;
    font-weight: bold;  
    font-size: 12px;
    color: #000000;
    padding-left: 5px;
    margin-top: 360px;  
    margin-left: 5px;
}
div.field_addy1
{
    border-style: none;
    font-color: #000000;
    font-weight: bold;
    font-size: 12px;  
    margin-top: 0px; /* position it horizontally */
    margin-left: 5px;
    margin-right: 5px;  
} 
```

其中 field_photos 是介绍行（选择列表选择“内部”或“外部”文本），field_addy1 是受机器人保护的电子邮件地址。我试过花车，但文字试图在图片上换行。尝试将其制作为单个 div，使用介绍文本和“目录网站管理员”组合到单个超链接中，但这并没有成功。

字段宽度分别为 150 像素和 200 像素，标题长度和 URL 长度设置为最大 200 像素。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:57:37.913

您在这里的边距定位有点疯狂。我不完全确定这是怎么回事。要快速解决此问题：

首先，`margin-top`从您的`.field_photos`分隔线中删除并`float:left`从您的主图像中删除属性：

```
<img class="spFieldsData field_sobi2_icon" src="..." alt="">

.field_sobi2_icon {
    float:none;
} 
```

然后更改`display`要彼此对齐的两个字段中的 ：

```
<div class="field_photos">...</div>
<div class="spField newClass2">...</div>

.field_photos, newClass2 {
    display: inline;
} 
```

# css - 在 HTML 中为电子邮件使用居中对齐

> ID：15565798
> 
> 赞同：1
> 
> 时间：2013-03-22T08:26:33.580
> 
> 标签：css, html, alignment, center

我开始使用表格为电子邮件编写 html。现在，我第一次尝试使用`div`s 编写，但这导致了一个问题：我无法将过去能够居中的所有内容居中对齐。

也许我写的不正确，但这是我发现的唯一方法，可以在写完后将所有内容从浏览器复制到 Gmail。

有人可以告诉我如何在此代码中居中对齐吗？

如果有人也可以告诉我是否有更好的方法来编写此代码，我将很高兴收到批评和有用的信息。

PS：我尝试了填充、定位、边距、放置高度和宽度，但是在大多数结果中使用这些选项时，我的一半免费或背景完全消失了。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Untitled Document</title>

 <style type="text/css">
div#Container {
width: 895px;
height: 525px;
position: absolute;
left: 9px;
top: 15px;
}

div#Room {
padding-left: 245px;
padding-top: 80px;
width: 625px;
}

#Room span {
font-family: Times New Roman, Times, serif;
font-weight: bold;
font-size: 23px;
color: #522405;
}

#D { padding-left: 70px;
}

#GD { padding-left: 103px;
}

#GPV { padding-left: 53px;
}

div#Content {
padding-left: 245px;
padding-top: 10px;
width: 625px;
}

#Right {
position: absolute;
left: 872px;
top: 222px;
}

img.Spacer {
margin-left: 10px;
}

div.content {
font-family: Arial, Helvetica, sans-serif;
color: black;
font-size: 17px;
font-weight: bold;
}

.BP {
vertical-align: text-top;
margin-top: 10px;
margin-left: 245px;
}

.table {
vertical-align: text-top;
font-family: Arial, Helvetica, sans-serif;
font-size: 20px;
text-align: center;
color: #002b55;
margin-left:245px;
}

.TD {
margin-left: 30px;
}

.adress {
    font-family: Times New Roman, Times, serif;
font-size: 10px;
text-align: center;
font-weight: bold;
color: #100073; 
}

.OOT {
font-family: Arial, Helvetica, sans-serif;
font-size: 13px;
font-weight: bold;
color: #100073;
text-align:center;
}

.res {
vertical-align: top;
padding-left: 25px;
}

</style>

</head>

<body>

<div>

<img style="position: relative;" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/BK_zpsa93ab347.png" alt="Background" />

</div>

<div id="Container">

<div id="Room" >

    <a href="http://bit.ly/XSyPG5" title="Deluxe" target="_blank" >

    <img src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/D_zpsf4ea5de8.jpg" border="0px" alt="Deluxe" />

    </a>

    <a href="http://bit.ly/XSyPG5" title="Grand Deluxe" target="_blank" >

    <img class="Spacer" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/GD_zpse78278b7.jpg" border="0px" alt="Grand Deluxe" />

    </a>

    <a href="http://bit.ly/XSyPG5" title="Grand Pool Villa" target="_blank" >

    <img class="Spacer" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/GPV_zpsb381cd33.jpg" border="0px" alt="Grand Pool Villa" />

    </a>

    <br />

    <a href="http://bit.ly/XSyPG5" title="Deluxe" target="_blank" style="text-decoration: none;"><span id="D">Deluxe</span></a>
    <a href="http://bit.ly/XSyPG5" title="Grand Deluxe" target="_blank" style="text-decoration: none;"><span id="GD">Grand Deluxe</span></a> 
    <a href="http://bit.ly/XSyPG5" title="Grand Pool Villa" target="_blank" style="text-decoration: none;"><span id="GPV">Grand Pool Villa</span></a>
  </div>

  <div id="Content" class="content">Situated on a hill, Ayara Kamala offers a beautiful garden and ocean view rooms. The place of the hotel provides quiet, calm and romantic holiday away from all other hotels on Kamala Beach.
<br />
<br />

Big size of rooms, king size beds and impressive bathrooms, are making Ayara Kamala            perfect selection for couples who are looking for privacy and relaxing holiday.
 </div>

<table class="table" style="border-collapse: separate; border-spacing: 1px;" width="625" border="0">
 <tr>
  <td align="right" style="padding-left: 20px;" width="302"><a href="http://bit.ly/XSyPG5" title="Book Now !"><img src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/BP_zps15c948a1.png" border="0px" alt="Best Rate"/></a></td>
 <td width="321" valign="top"><table class="TD" style="border-collapse: separate; border-spacing: 0px;" border="0px">
 <tr>
 <td height="30" class="res" align="center"><a href="http://bit.ly/XSyPG5" title="B2B Online Booking"><span>www.b2b.onlyonetour.com</span></a></td>
 </tr>
 <tr>
 <td class="res" height="30" align="center"><span>Tel : (66) 02 - 688 - 8883 </span>      </td>
</tr>
<tr>
<td class="res" height="30" align="center"><a href="mailto:rsvn@onlyonetour.com" title="E-mail Reservation"><span>rsvn@onlyonetour.com</span></a></td>
</tr></table>
</td>
</tr>
</table>

<div align="center" id="Right"><a style="text-decoration: none;" href="http://bit.ly/XSyPG5" title="Only One Tour &amp; Travel Group Co., Ltd." target="_blank"><img width="149px" height="90px" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/logoOOT_zps24c21653.png" border="0px" alt="Logo" /></a>
<a style="text-decoration: none;" href="http://bit.ly/XSyPG5" title="Only One Tour &amp; Travel Group Co., Ltd." target="_blank"><span class="OOT">Only One Tour &amp; Travel<br />Group Co., Ltd.</span></a><br /><br />
<a style="text-decoration: none;" href="http://on.fb.me/XXqq56" title="Only One Tour Facebook Page" target="_blank"> <img src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/facebook-logo-png-format-i18_zps83b6a9aa.png" width="145px" height="50px" border="0px" alt="FB"/></a><br /><br />
 <span class="adress">2128/9-11 Charoenkung Rd.,</span><br />
 <span class="adress">Watprayakrai, Bangkorleam,</span><br />
 <span class="adress">10120 Bangkok, Thailand.</span><br />
<a class="adress"  href="http://bit.ly/XSyPG5" target="_blank">www.b2b.onlyonetour.com</a><br />
<a class="adress" href="http://on.fb.me/XXqq56" target="_blank">www.onlyonetour.com (offline)</a>
 </div>

</div>

</body> 

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:41:51.110

现在`<div align="center"></div>`只添加`newsletter`

**像这样**

```
<div align="center">

<img style="position: relative;" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/BK_zpsa93ab347.png" alt="Background" />

</div>

<div id="Container" align="center">

// your code
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:29:14.967

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Untitled Document</title>
 <style type="text/css">
body{
    background: url(http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/BK_zpsa93ab347.png) no-repeat top#FFF;

}
#wrapper
{
    width:950px;
    margin:0px auto;
    padding:0px;
}

div#Container {
width: 895px;
height: 525px;
position: absolute;
left: 9px;
top: 15px;
}

div#Room {
padding-left: 410px;
padding-top: 80px;
width: 625px;
}

#Room span {
font-family: Times New Roman, Times, serif;
font-weight: bold;
font-size: 23px;
color: #522405;
}

#D { padding-left: 70px;
}

#GD { padding-left: 103px;
}

#GPV { padding-left: 53px;
}

div#Content {
padding-left: 410px;
padding-top: 10px;
width: 625px;
}

#Right {
position: absolute;
left:1030px;
top: 222px;
}

img.Spacer {
margin-left: 10px;
}

div.content {
font-family: Arial, Helvetica, sans-serif;
color: black;
font-size: 17px;
font-weight: bold;
}

.BP {
vertical-align: text-top;
margin-top: 10px;
padding-left: 410px;
}

.table {
vertical-align: text-top;
font-family: Arial, Helvetica, sans-serif;
font-size: 20px;
text-align: center;
color: #002b55;
padding-left: 410px;
}

.TD {
margin-left: 30px;
}

.adress {
    font-family: Times New Roman, Times, serif;
font-size: 10px;
text-align: center;
font-weight: bold;
color: #100073; 
}

.OOT {
font-family: Arial, Helvetica, sans-serif;
font-size: 13px;
font-weight: bold;
color: #100073;
text-align:center;
}

.res {
vertical-align: top;
padding-left: 25px;
}

</style>

</head>

<body>
<div id="wrapper">
<div id="Container">

<div id="Room" >

    <a href="http://bit.ly/XSyPG5" title="Deluxe" target="_blank" >

    <img src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/D_zpsf4ea5de8.jpg" border="0px" alt="Deluxe" />

    </a>

    <a href="http://bit.ly/XSyPG5" title="Grand Deluxe" target="_blank" >

    <img class="Spacer" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/GD_zpse78278b7.jpg" border="0px" alt="Grand Deluxe" />

    </a>

    <a href="http://bit.ly/XSyPG5" title="Grand Pool Villa" target="_blank" >

    <img class="Spacer" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/GPV_zpsb381cd33.jpg" border="0px" alt="Grand Pool Villa" />

    </a>

    <br />

    <a href="http://bit.ly/XSyPG5" title="Deluxe" target="_blank" style="text-decoration: none;"><span id="D">Deluxe</span></a>
    <a href="http://bit.ly/XSyPG5" title="Grand Deluxe" target="_blank" style="text-decoration: none;"><span id="GD">Grand Deluxe</span></a> 
    <a href="http://bit.ly/XSyPG5" title="Grand Pool Villa" target="_blank" style="text-decoration: none;"><span id="GPV">Grand Pool Villa</span></a>
  </div>

  <div id="Content" class="content">Situated on a hill, Ayara Kamala offers a beautiful garden and ocean view rooms. The place of the hotel provides quiet, calm and romantic holiday away from all other hotels on Kamala Beach.
<br />
<br />

Big size of rooms, king size beds and impressive bathrooms, are making Ayara Kamala            perfect selection for couples who are looking for privacy and relaxing holiday.
 </div>

<table class="table" style="border-collapse: separate; border-spacing: 1px;" width="625" border="0">
 <tr>
  <td align="right" style="padding-left: 20px;" width="302"><a href="http://bit.ly/XSyPG5" title="Book Now !"><img src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/BP_zps15c948a1.png" border="0px" alt="Best Rate"/></a></td>
 <td width="321" valign="top"><table class="TD" style="border-collapse: separate; border-spacing: 0px;" border="0px">
 <tr>
 <td height="30" class="res" align="center"><a href="http://bit.ly/XSyPG5" title="B2B Online Booking"><span>www.b2b.onlyonetour.com</span></a></td>
 </tr>
 <tr>
 <td class="res" height="30" align="center"><span>Tel : (66) 02 - 688 - 8883 </span>      </td>
</tr>
<tr>
<td class="res" height="30" align="center"><a href="mailto:rsvn@onlyonetour.com" title="E-mail Reservation"><span>rsvn@onlyonetour.com</span></a></td>
</tr></table>
</td>
</tr>
</table>

<div align="center" id="Right"><a style="text-decoration: none;" href="http://bit.ly/XSyPG5" title="Only One Tour &amp; Travel Group Co., Ltd." target="_blank"><img width="149px" height="90px" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/logoOOT_zps24c21653.png" border="0px" alt="Logo" /></a>
<a style="text-decoration: none;" href="http://bit.ly/XSyPG5" title="Only One Tour &amp; Travel Group Co., Ltd." target="_blank"><span class="OOT">Only One Tour &amp; Travel<br />Group Co., Ltd.</span></a><br /><br />
<a style="text-decoration: none;" href="http://on.fb.me/XXqq56" title="Only One Tour Facebook Page" target="_blank"> <img src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/facebook-logo-png-format-i18_zps83b6a9aa.png" width="145px" height="50px" border="0px" alt="FB"/></a><br /><br />
 <span class="adress">2128/9-11 Charoenkung Rd.,</span><br />
 <span class="adress">Watprayakrai, Bangkorleam,</span><br />
 <span class="adress">10120 Bangkok, Thailand.</span><br />
<a class="adress"  href="http://bit.ly/XSyPG5" target="_blank">www.b2b.onlyonetour.com</a><br />
<a class="adress" href="http://on.fb.me/XXqq56" target="_blank">www.onlyonetour.com (offline)</a>
 </div>

</div>
</div>
</body> 

</html> 
```

我更改了您的代码并使其居中对齐。首先使用 div 设置主 id（名为 warapper 的 div）并将边距设置为 margin:0px auto; 它会自动将您的页面中心与所有浏览器对齐

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:33:21.270

通过设置为容器提供页面的整个宽度`width: 100%;`，然后将要居中的 div 的边距设置为自动：

```
margin-left: auto;
margin-right: auto; 
```

# jquery-waypoints - 在视图中淡入，仅在底部可见时淡出

> ID：15565801
> 
> 赞同：1
> 
> 时间：2013-03-22T08:26:39.077
> 
> 标签：jquery-waypoints

我正在使用航点插件，但对其他人开放。到目前为止，当我向下滚动并达到 30% 时，我已经设法让 div 淡入淡出：

```
element.waypoint(function(){            
    $(this).animate({ opacity: 1 }, 500);          
},{
    offset: '30%'
}); 
```

但是当它再次消失时，我无法让它再次消失。

谢谢您的帮助。

对于强大的stackoverflow来说，这是一个太难的问题吗？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:22:01.547

`direction`当您使用传递给函数的参数越过该航路点触发点时，您可以根据滚动的方向执行不同的操作：

```
element.waypont(function(direction) {
  if (direction === 'down') { ... }
  else { ... }
}, { offset: '30%' }); 
```

您还可以创建具有不同偏移量的多个航点，这样您就可以对碰到页面不同部分的元素做出反应：

```
element
  .waypoint(function(direction) {
    $(this).toggleClass('visible');
  }, { offset: '10%' })
  .waypoint(function(direction) {
    $(this).toggleClass('visible');
  }, { offset: '90%' }); 
```

# tsql - 如何在某些日期参数之间选择第一条和最后一条记录？

> ID：15565803
> 
> 赞同：-2
> 
> 时间：2013-03-22T08:26:41.750
> 
> 标签：tsql

我需要一个查询来仅在日期参数之间提取第一个实例和最后一个实例。
我有一个记录财务信息的表格，其中的财务年度结束日期字段`Company`通过链接到表格`companyID`。每个公司还链接到`programme`表，可以有多个程序。我有一份报告可以在某些程序上提取每家公司的财务状况，我已将其调整为仅提取第一个和最后一个实例（使用 MIN 和 MAX），但是我需要第一个实例。在某个日期参数之后和某个日期参数之前的最后一个实例。

**示例**：ALoggs 公司有 1999,2000,2001,2004,2006,2007,2009 的财务，但该程序从 2001 年到 2007 年运行，所以我只想要这些年份之间的第一个财务记录和最后一个财务记录，即 2001 年和 2007 年的记录。任何帮助表示赞赏。目前我正在使用 2 个查询，因为我急需数据，但我需要在 1 个查询中使用它，并且仅在财政年度结束日期在参数之间且仅在公司至少有 2 条 GVA 记录的情况下才需要它。

***查询1***：

```
SELECT 
    gva.ccx_companyname, 
    gva.ccx_depreciation, 
    gva.ccx_exportturnover, 
    gva.ccx_financialyearenddate, 
    gva.ccx_netprofitbeforetax, 
    gva.ccx_totalturnover, 
    gva.ccx_totalwages, 
    gva.ccx_statusname, 
    gva.ccx_status, 
    gva.ccx_company, 
    gva.ccx_totalwages + gva.ccx_netprofitbeforetax + gva.ccx_depreciation AS GVA, 
    gva.ccx_nofulltimeequivalentemployees
FROM 
    (
        SELECT
            ccx_companyname, 
            MAX(ccx_financialyearenddate) AS LatestDate
        FROM Filteredccx_gva AS Filteredccx_gva_1
        GROUP BY ccx_companyname
    ) AS min_1 
INNER JOIN Filteredccx_gva AS gva 
    ON min_1.ccx_companyname = gva.ccx_companyname AND 
       min_1.LatestDate = gva.ccx_financialyearenddate
WHERE (gva.ccx_status = ACTUAL) 
```

***查询2：***

```
SELECT 
    gva.ccx_companyname, 
    gva.ccx_depreciation, 
    gva.ccx_exportturnover,
    gva.ccx_financialyearenddate, 
    gva.ccx_netprofitbeforetax, 
    gva.ccx_totalturnover,
    gva.ccx_totalwages, 
    gva.ccx_statusname, 
    gva.ccx_status, 
    gva.ccx_company, 
    gva.ccx_totalwages + gva.ccx_netprofitbeforetax + gva.ccx_depreciation AS GVA, 
    gva.ccx_nofulltimeequivalentemployees
FROM 
    (
         SELECT
             ccx_companyname, 
             MIN(ccx_financialyearenddate) AS FirstDate
         FROM Filteredccx_gva AS Filteredccx_gva_1
         GROUP BY ccx_companyname
    ) AS MAX_1 
INNER JOIN Filteredccx_gva AS gva 
    ON MAX_1.ccx_companyname = gva.ccx_companyname AND 
       MAX_1.FirstDate = gva.ccx_financialyearenddate
WHERE (gva.ccx_status = ACTUAL) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:26:25.840

你不能只使用第一个和最后一个日期参数添加一个 where 子句。像这样的东西：

```
SELECT <companyId>, MIN(<date>), MAX(<date>)
FROM <table>
WHERE <date> BETWEEN @firstDate AND @lastDate
GROUP BY <companyId> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:06:50.043

```
declare @programme table (ccx_companyname varchar(max), start_year int, end_year int);
insert @programme values
('ABloggs', 2001, 2007);

declare @companies table (ccx_companyname varchar(max), ccx_financialyearenddate int);
insert @companies values
 ('ABloggs', 1999)
,('ABloggs', 2000)
,('ABloggs', 2001)
,('ABloggs', 2004)
,('ABloggs', 2006)
,('ABloggs', 2007)
,('ABloggs', 2009);

select c.ccx_companyname, min(ccx_financialyearenddate), max(ccx_financialyearenddate)
from @companies c
join @programme p on c.ccx_companyname = p.ccx_companyname
where c.ccx_financialyearenddate >= p.start_year and c.ccx_financialyearenddate <= p.end_year
group by c.ccx_companyname
having count(*) > 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:07:19.047

通过在虚拟表的同一个 GROUP BY 查询中包含 MIN 和 MAX 聚合，您可以将两个原始查询组合成一个查询。还包括 COUNT( *) 和 HAVING COUNT(* ) > 1 确保公司必须至少有 2 个日期。所以查询应该是这样的：

```
SELECT 
    gva.ccx_companyname, 
    gva.ccx_depreciation, 
    gva.ccx_exportturnover,
    gva.ccx_financialyearenddate, 
    gva.ccx_netprofitbeforetax, 
    gva.ccx_totalturnover,
    gva.ccx_totalwages, 
    gva.ccx_statusname, 
    gva.ccx_status, 
    gva.ccx_company, 
    gva.ccx_totalwages + gva.ccx_netprofitbeforetax + gva.ccx_depreciation AS GVA, 
    gva.ccx_nofulltimeequivalentemployees
FROM 
    (SELECT
         ccx_companyname,
         ccx_status,
         MIN(ccx_financialyearenddate) AS FirstDate,
         MAX(ccx_financialyearenddate) AS LastDate,
         COUNT(*) AS NumDates
     FROM Filteredccx_gva AS Filteredccx_gva_1
     WHERE (ccx_status = ACTUAL)
     GROUP BY ccx_companyname, ccx_status
     HAVING COUNT(*) > 1
    ) AS MinMax
INNER JOIN Filteredccx_gva AS gva 
      ON MinMax.ccx_companyname = gva.ccx_companyname AND 
         (MinMax.FirstDate = gva.ccx_financialyearenddate OR
          MinMax.LastDate = gva.ccx_financialyearenddate)
WHERE (gva.ccx_status = MinMax.ccx_status)
ORDER BY gva.ccx_companyname, gva.ccx_financialyearenddate 
```

# python - 如何在tkinter python gui中找到鼠标点击附近的标签

> ID：15565809
> 
> 赞同：3
> 
> 时间：2013-03-22T08:27:07.450
> 
> 标签：python, user-interface, tkinter

我如何识别鼠标点击附近的标签。这里我的定义“识别”应该识别非常接近鼠标点击的标签。

```
from Tkinter import *
root = Tk()
f=Frame(root)
f.grid()
w=Canvas(f)
line1=w.create_line(50,50,150,150, width=5, tags="line1")
line2=w.create_line(100,100,100,350, width=3, tags="line2")
line3=w.create_line(150,150,150,450, width=3, tags="lines")
w.grid(row=0, column=0)
w.bind("<Button-1>", identify)
def identify(event): ## this should identify the tag near to click

u=Frame(f)
u.grid(row=0, column=1)
root.mainloop() 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T09:08:54.603

使用[`find_closest`](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.find_closest-method)和[`gettags`](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.gettags-method)：

```
def identify(event):
    item = w.find_closest(event.x, event.y)[0]
    tags = w.gettags(item)
    print tags 
```

顺便说一句，您必须在将函数绑定到事件之前定义它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T09:07:56.720

Canvas 提供了一堆[find_*](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.find_above-method)方法。在这里，`find_closest`满足您的需求。

```
def identify(event):
    closest = w.find_closest(event.x,event.y)[0] 
```

请注意，如果您更改画布的视口（平移、缩放...），则必须将事件坐标转换为画布坐标

```
def callback(event):
    canvas = event.widget
    x = canvas.canvasx(event.x)
    y = canvas.canvasy(event.y)
    print canvas.find_closest(x, y) 
```

^(（从 [effbot.org](http://effbot.org/tkinterbook/canvas.htm#coordinate-systems)复制）)

# c# - 同一单元格上的文本后的 DataGridView 图像；

> ID：15565810
> 
> 赞同：1
> 
> 时间：2013-03-22T08:27:08.457
> 
> 标签：c#, .net, datagridview

用途：.NET 2.0+；与 2005 年相比；

我有我的以下自定义 DataGridView；下面提到的代码。

在这个，我有一个TextandImageCell，但插图总是在一个单元格中的图像之后的文本顺序

（图片|文字）

但是我的要求是以相反的方式将它放在像这样的单元格中

（文字 | 图片）

有什么解决方法吗？

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows.Forms;
using System.Drawing;

namespace MyWindowsApplication
{
    public class DataGridViewRadioButtonColumn : DataGridViewCheckBoxColumn
    {
        internal const int radioButtonSize = 14;

        public DataGridViewRadioButtonColumn()
            : base()
        {
            this.ReadOnly = true;
        }

        internal static void Paint(Graphics g, Rectangle cellBounds, bool state)
        {
            cellBounds.Inflate(-1, -1);

            Brush drawBrsh = new SolidBrush(SystemColors.Control);

            g.FillRectangle(drawBrsh, cellBounds);

            cellBounds.Inflate(0, -((cellBounds.Height - radioButtonSize) / 2));

            ControlPaint.DrawRadioButton(g, cellBounds, (state) ? ButtonState.Checked : ButtonState.Normal);

            drawBrsh.Dispose();
        }
    }

    public class DataGridViewRadioButtonCell : DataGridViewCheckBoxCell
    {

    }

    public class TextAndImageColumn : DataGridViewTextBoxColumn
    {
        private Image imageValue;
        private Size imageSize;

        public TextAndImageColumn()
        {
            this.CellTemplate = new TextAndImageCell();
        }

        public override object Clone()
        {
            TextAndImageColumn c = base.Clone() as TextAndImageColumn;

            c.imageValue = this.imageValue;
            c.imageSize = this.imageSize;

            return c;
        }

        public Image Image
        {
            get { return this.imageValue; }

            set
            {
                if (this.Image != value)
                {
                    this.imageValue = value;
                    this.imageSize = value.Size;

                    if (this.InheritedStyle != null)
                    {
                        Padding inheritedPadding = this.InheritedStyle.Padding;

                        this.DefaultCellStyle.Padding = new Padding(imageSize.Width,
                                                                    inheritedPadding.Top, inheritedPadding.Right,
                                                                    inheritedPadding.Bottom);

                    }

                }

            }

        }

        private TextAndImageCell TextAndImageCellTemplate
        {
            get { return this.CellTemplate as TextAndImageCell; }
        }

        internal Size ImageSize
        {
            get { return imageSize; }
        }

    }

    public class TextAndImageCell : DataGridViewTextBoxCell
    {
        private Image imageValue;
        private Size imageSize;

        public override object Clone()
        {
            TextAndImageCell c = base.Clone() as TextAndImageCell;

            c.imageValue = this.imageValue;
            c.imageSize = this.imageSize;

            return c;
        }

        public Image Image
        {
            get
            {
                if (this.OwningColumn == null || this.OwningTextAndImageColumn == null)
                {
                    return imageValue;
                }
                else if (this.imageValue != null)
                {
                    return this.imageValue;
                }
                else
                {
                    return this.OwningTextAndImageColumn.Image;
                }
            }

            set
            {
                if (this.imageValue != value)
                {
                    this.imageValue = value;
                    this.imageSize = value.Size;

                    Padding inheritedPadding = this.InheritedStyle.Padding;

                    this.Style.Padding = new Padding(imageSize.Width,
                    inheritedPadding.Top, inheritedPadding.Right,
                    inheritedPadding.Bottom);
                }
            }
        }

        protected override void Paint(Graphics graphics, Rectangle clipBounds,
                                        Rectangle cellBounds, int rowIndex, DataGridViewElementStates cellState,
                                        object value, object formattedValue, string errorText,
                                        DataGridViewCellStyle cellStyle,
                                        DataGridViewAdvancedBorderStyle advancedBorderStyle,
                                        DataGridViewPaintParts paintParts)
        {
            // Paint the base content
            base.Paint(graphics, clipBounds, cellBounds, rowIndex, cellState,
                        value, formattedValue, errorText, cellStyle,
                        advancedBorderStyle, paintParts);

            if (this.Image != null)
            {
                // Draw the image clipped to the cell.
                System.Drawing.Drawing2D.GraphicsContainer container =   graphics.BeginContainer();
                graphics.SetClip(cellBounds);
                graphics.DrawImageUnscaled(this.Image, cellBounds.Location);
                graphics.EndContainer(container);
            }
        }

        private TextAndImageColumn OwningTextAndImageColumn
        {
            get { return this.OwningColumn as TextAndImageColumn; }
        }
    }

    public class LinkAndImageColumn : DataGridViewLinkColumn
    {
        private Image imageValue;
        private Size imageSize;

        public LinkAndImageColumn()
        {
            this.CellTemplate = new LinkAndImageCell();
        }

        public override object Clone()
        {
            LinkAndImageColumn c = base.Clone() as LinkAndImageColumn;

            c.imageValue = this.imageValue;
            c.imageSize = this.imageSize;

            return c;
        }

        public Image Image
        {
            get { return this.imageValue; }
            set
            {
                if (this.Image != value)
                {
                    this.imageValue = value;
                    this.imageSize = value.Size;

                    if (this.InheritedStyle != null)
                    {
                        Padding inheritedPadding = this.InheritedStyle.Padding;
                        this.DefaultCellStyle.Padding = new Padding(imageSize.Width,
                                                                    inheritedPadding.Top, inheritedPadding.Right,
                                                                    inheritedPadding.Bottom);

                    }
                }
            }
        }

        private LinkAndImageCell LinkAndImageCellTemplate
        {
            get { return this.CellTemplate as LinkAndImageCell; }
        }

        internal Size ImageSize
        {
            get { return imageSize; }
        }
    }

    public class LinkAndImageCell : DataGridViewLinkCell
    {
        private Image imageValue;
        private Size imageSize;

        public override object Clone()
        {
            LinkAndImageCell c = base.Clone() as LinkAndImageCell;

            c.imageValue = this.imageValue;
            c.imageSize = this.imageSize;

            return c;
        }

        public Image Image
        {
            get
            {
                if (this.OwningColumn == null ||  this.OwningLinkAndImageColumn == null)
                {
                    return imageValue;
                }
                else if (this.imageValue != null)
                {
                    return this.imageValue;
                }
                else
                {
                    return this.OwningLinkAndImageColumn.Image;
                }
            }

            set
            {
                if (this.imageValue != value)
                {
                    this.imageValue = value;
                    this.imageSize = value.Size;

                    Padding inheritedPadding = this.InheritedStyle.Padding;

                    this.Style.Padding = new Padding(imageSize.Width,
                    inheritedPadding.Top, inheritedPadding.Right,
                    inheritedPadding.Bottom);
                }
            }
        }

        protected override void Paint(Graphics graphics, Rectangle clipBounds,
                                        Rectangle cellBounds, int rowIndex, DataGridViewElementStates cellState,
                                        object value, object formattedValue, string errorText,DataGridViewCellStyle cellStyle,
                                        DataGridViewAdvancedBorderStyle advancedBorderStyle,
                                        DataGridViewPaintParts paintParts)
        {
            // Paint the base content
            base.Paint(graphics, clipBounds, cellBounds, rowIndex, cellState,
                        value, formattedValue, errorText, cellStyle,
                        advancedBorderStyle, paintParts);

            if (this.Image != null)
            {
                // Draw the image clipped to the cell.
                System.Drawing.Drawing2D.GraphicsContainer container =
                graphics.BeginContainer();
                graphics.SetClip(cellBounds);
                graphics.DrawImageUnscaled(this.Image, cellBounds.Location);
                graphics.EndContainer(container);
            }
        }

        private LinkAndImageColumn OwningLinkAndImageColumn
        {
            get { return this.OwningColumn as LinkAndImageColumn; }
        }

    }

    public class CustomDataGridView : DataGridView
    {
        private DataGridViewRow _currentSelectedRow = null;

        public DataGridViewRow CurrentSelectedRow
        {
            get { return _currentSelectedRow; }
            set { _currentSelectedRow = value; }
        }

        protected override void OnCellClick(DataGridViewCellEventArgs e)
        {
            bool b = false;

            if (e.RowIndex > -1)
            {
                DataGridViewCell cell = this[e.ColumnIndex, e.RowIndex];
                if (cell.OwningColumn is DataGridViewCheckBoxColumn)
                {
                    if (cell.FormattedValue != null)
                    {
                        for (int i = 0; i < this.RowCount; i++)
                        {
                            this[e.ColumnIndex, i].Value = false;
                        }
                        cell.Value = true;
                    }
                }
            }
            base.OnCellClick(e);
        }

        protected override void OnCellPainting(DataGridViewCellPaintingEventArgs e)
        {
            bool b = false;

            if ((e.RowIndex > -1) && (e.ColumnIndex > -1) && (this.Columns[e.ColumnIndex] is DataGridViewRadioButtonColumn))
            {
                e.PaintBackground(e.CellBounds, true);

                if (e.Value != null)
                {
                    if (e.Value.ToString() == "1")
                    {
                        b = true;
                    }
                    else b = false;
                }

                DataGridViewRadioButtonColumn.Paint(e.Graphics, e.CellBounds, b);

                e.Handled = true;
            }
            base.OnCellPainting(e);
        }

        protected override void OnCellMouseDown(DataGridViewCellMouseEventArgs e)
        {
            if (e.RowIndex >= 0)
            {
                this.CurrentSelectedRow = this.Rows[e.RowIndex];
                this.CurrentCell = this[0, e.RowIndex];
                this.Rows[e.RowIndex].DefaultCellStyle.SelectionBackColor = Color.Gold;
            }
            base.OnCellMouseDown(e);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T16:20:44.547

要在文本之后显示图像，您应该将此代码添加/更新到类的`Paint`方法中`LinkAndImageCell`

```
if (this.Image != null)
        {
            Size textSize = TextRenderer.MeasureText(value.ToString(), cellStyle.Font, cellBounds.Size);
            int imageXLocation = cellBounds.Location.X + textSize.Width;
            int imageYLocation = cellBounds.Location.Y + textSize.Height / 2 ;
            Point imageLocation = new Point(imageXLocation, imageYLocation);
            GraphicsContainer container = graphics.BeginContainer();
            graphics.SetClip(cellBounds);
            graphics.DrawImageUnscaled(Image, imageLocation);
            graphics.EndContainer(container);
        } 
```

# java - 如何仅获取 JSpinner 的小时和分钟？

> ID：15565812
> 
> 赞同：2
> 
> 时间：2013-03-22T08:27:17.237
> 
> 标签：java, swing, simpledateformat, jspinner

我有一个 JSpinner。当我使用`spinner.getValue()`它时，它给了我`Sun Mar 24 01:11:41 PDT 2013` ，但我只想拥有`Hour and Minute in 24 hour format`

```
Date date = new Date();
        SpinnerDateModel sm = new SpinnerDateModel(date, null, null, Calendar.MINUTE);

        JSpinner spinner = new JSpinner(sm);
        JSpinner.DateEditor de = new JSpinner.DateEditor(spinner, "hh:mm a");
        spinner.setEditor(de);
        if ( spinner.getEditor() instanceof JSpinner.DefaultEditor ) 
        {
                  JSpinner.DefaultEditor editor = ( JSpinner.DefaultEditor ) spinner.getEditor();
                  editor.getTextField().setEnabled( true );
                  editor.getTextField().setEditable( false );
        }

        System.out.println("Spinner:      "+spinner.getValue()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T10:35:07.337

从@mKorbel 的回答中提取肉：

System.out 使用它的 toString 方法打印值对象，如果你想打印它格式化你需要使用格式化程序，fi 由编辑器在你的代码中使用的那个：

```
Date date = new Date();
SpinnerDateModel sm = new SpinnerDateModel(date, null, null, Calendar.MINUTE);

JSpinner spinner = new JSpinner(sm);
JSpinner.DateEditor de = new JSpinner.DateEditor(spinner, "hh:mm a");
de.getTextField().setEditable( false );
spinner.setEditor(de);

System.out.println("Spinner:      "+de.getFormat().format(spinner.getValue())); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T08:35:45.847

*   必须对 Formatter 使用 SimpleDateFormat

![在此处输入图像描述](../Images/8a45b7a4cc87af1518066ac4d9ad002a.png)

例如

```
import java.awt.*;
import java.text.SimpleDateFormat;
import java.util.*;
import javax.swing.*;
import javax.swing.event.*;

public class TimeZoneSpinners {

    private final String[] zones = {"Asia/Tokyo", "Asia/Hong_Kong",
        "Asia/Calcutta", "Europe/Paris", "Europe/London",
        "America/New_York", "America/Los_Angeles"
    };
    private final JLabel[] labels = new JLabel[zones.length];
    private final SimpleDateFormat[] formats = new SimpleDateFormat[zones.length];
    private JSpinner spinner;
    private SpinnerDateModel model;
    private SimpleDateFormat format;
    private JPanel panel;
    private JFrame frame = new JFrame();

    public void makeUI() {
        Calendar cal = Calendar.getInstance();
        Date date = cal.getTime();
        model = new SpinnerDateModel();
        model.setValue(date);
        spinner = new JSpinner(model);
        spinner.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                Date date = (Date) ((JSpinner) e.getSource()).getValue();
                for (int i = 0; i < labels.length; i++) {
                    labels[i].setText(formats[i].format(date));
                }
            }
        });
        format = ((JSpinner.DateEditor) spinner.getEditor()).getFormat();
        format.setTimeZone(TimeZone.getTimeZone(zones[0]));
        format.applyPattern("yyyy-MM-dd HH:mm:ss");
        format.applyPattern("HH:mm:ss");
        panel = new JPanel(new GridLayout(zones.length, 2, 10, 10));
        for (int i = 0; i < zones.length; i++) {
            formats[i] = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss");
            formats[i] = new SimpleDateFormat("HH:mm:ss");
            formats[i].setTimeZone(TimeZone.getTimeZone(zones[i]));
            JLabel label = new JLabel(zones[i]);
            labels[i] = new JLabel(formats[i].format(date));
            labels[i].setHorizontalAlignment(JLabel.RIGHT);
            panel.add(label);
            panel.add(labels[i]);
        }
        frame.setLayout(new BorderLayout(10, 10));
        frame.add(spinner, BorderLayout.NORTH);
        frame.add(panel, BorderLayout.CENTER);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TimeZoneSpinners().makeUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T10:34:35.600

```
public static String convertTo12Hour(String Time){ //20:00:00
   String input = Time;
  //Format of the date defined in the input String
  DateFormat df = new SimpleDateFormat("HH:mm:ss");
  //Desired format: 24 hour format: Change the pattern as per the need
  DateFormat outputformat = new SimpleDateFormat("hh:mm:ss aa");
  Date date = null;
  String output = null;
  try {
    date= df.parse(input);
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
    //Changing the format of date and storing it in String
    output = outputformat.format(date);
    return output;  //8:00:00 
```

}

# sql - 如何以简短的方式插入多行并检查重复行

> ID：15565813
> 
> 赞同：0
> 
> 时间：2013-03-22T08:27:20.837
> 
> 标签：sql, sql-server-2008, bulkinsert

我正在尝试在一个表（比如 MyTable）中插入多条记录（~250），并且仅当它不存在时才想插入一个新行。

我正在使用 SQL Server 2008 R2 并从其他线程（如[SQL 条件插入如果行不存在](https://stackoverflow.com/questions/2290792/sql-conditional-insert-if-row-doesnt-already-exist)）获得帮助。

虽然我可以通过以下剥离脚本来实现这一点，但我想知道是否有更好（短）的方法来做到这一点，因为我必须对插入的每一行重复此检查。由于我们只需要在 DB 部署期间执行一次此脚本，因此我不太担心性能。

```
INSERT INTO MyTable([Description], [CreatedDate], [CreatedBy], [ModifiedDate], [ModifiedBy], [IsActive], [IsDeleted]) 

SELECT N'ababab', GETDATE(), 1, NULL, NULL, 1, 0
WHERE NOT EXISTS(SELECT * FROM MyTable WITH (ROWLOCK, HOLDLOCK, UPDLOCK)
   WHERE
      ([InstanceId] IS NULL OR  [InstanceId] = 1)
      AND [ChannelPartnerId] IS NULL
      AND [CreatedBy] = 1) 
UNION ALL

SELECT N'xyz', 1, GETDATE(), 1, NULL, NULL, 1, 0 
WHERE NOT EXISTS(SELECT * FROM [dbo].[TemplateQualifierCategoryMyTest] WITH (ROWLOCK, HOLDLOCK, UPDLOCK)
   WHERE
      ([InstanceId] IS NULL OR  [InstanceId] = 1)
      AND [ChannelPartnerId] IS NULL
      AND [CreatedBy] = 1)

-- More SELECT statements goes here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:25:47.167

您可以使用您的描述创建一个临时表，然后使用选择将它们全部插入 MyTable 中，该选择将检查临时表中尚未出现在您的目标中的行，（此技巧由 LEFT OUTER JOIN 结合实现WHERE-Clause 中 MyTable.Description 部分的 IS NULL）：

```
DECLARE @Descriptions TABLE ([Description] VARCHAR(200) NOT NULL )

INSERT INTO @Descriptions ( Description )VALUES  ( 'ababab' )
INSERT INTO @Descriptions ( Description )VALUES  ( 'xyz' )

INSERT INTO dbo.MyTable
        ( Description ,
          CreatedDate ,
          CreatedBy ,
          ModifiedDate ,
          ModifiedBy ,
          IsActive ,
          IsDeleted
        )

SELECT d.Description, GETDATE(), 1, NULL, NULL, 1, 0
FROM @Descriptions d
LEFT OUTER JOIN dbo.MyTable mt ON d.Description = mt.Description
WHERE mt.Description IS NULL 
```

# php - PHP - 最佳登录系统方法

> ID：15565817
> 
> 赞同：0
> 
> 时间：2013-03-22T08:27:59.820
> 
> 标签：php, mysql

我想问你，用 php 创建登录系统的最佳方法是什么：

1.  将 DATA 存储到`$_SESSION`变量和数据库中以进行身份​​验证
2.  或者将 DATA 存储到`$_COOKIE`变量中？

哪种方法最好？

我要它`Remember my password feature`！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:30:03.683

如果您需要`Remember me`便利，则必须将信息存储在浏览器的 cookie 中。

密码必须是加密的。

# asp.net - ASP.NET 4 应用程序在什么 Windows 帐户下运行？

> ID：15565826
> 
> 赞同：3
> 
> 时间：2013-03-22T08:29:00.820
> 
> 标签：asp.net, asp.net-mvc, windows, iis, iis-7.5

ASP.NET MVC 4 应用程序在什么 Windows 用户帐户下运行？

当我将 MVC 应用程序部署到 IIS 7 时，它不会将异常写入日志文件。我在部署应用程序时进入了源代码，发现它没有写入日志文件的权限/所需的权限。

所以，我想为应用程序运行的帐户授予更多权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T08:42:47.247

去：

IIS > 应用程序池 >（右键单击）应用程序池 > 高级设置... >（在进程模型下）标识。

如果你愿意，你可以改变它。它应该是 ApplicationPoolIdentity。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:39:39.607

这仅取决于您要编写的路径是什么。例如，如果您正在部署您的 asp.net 网站，使用默认的“网络服务”帐户，您应该授予它正确的权限。

要获取您当前使用的帐户，您可以检查您网站的应用程序池的身份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-08T14:57:17.187

使用 IIS 8.5？

ApplicationPoolIdentity 是 IIS_IUSRS 组的成员。如果您需要让应用程序直接访问文件系统，请为 IIS_IUSRS 设置 ACL。

**但是**，将文件系统暴露给 Web 需要非常仔细的考虑。

# java - 来自 android 应用程序的 dJango POST 请求

> ID：15565831
> 
> 赞同：0
> 
> 时间：2013-03-22T08:29:22.877
> 
> 标签：java, android, django

我已经尝试了这些方法但没有成功

*   方法 1 [来自 Android 中 Django 的 JSON 响应](https://stackoverflow.com/questions/15497833/json-response-from-django-in-android)

*   方法 2 [读取 JSON 响应](https://stackoverflow.com/questions/15564452/read-json-response)

从基于 android app tp python 的 Web 服务发送 POST 请求，但我无法获得所需的结果。请为相同或任何修改分享一个好的教程片段，以便我的任何一个代码都可以工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:39:59.167

在这里快速猜测一下，但 POST 看起来更像是**w3c.org 的“MIME”**邮件请求。您在单独的行（CRLF）上发送标题添加到一行中，因为该字符串的出现类似于获取请求的条件下的“字符串”与标题不同的是 URL 编码，就像取自 HTML 表单并类似于 JSON 表示法.

因此，请查看 android 是否导入`java.net.URLConnection`或有自己的`java.net.URLConnection`.

服务器端脚本语言 Python 的行为类似于大多数新的 Web 服务器端脚本语言，并且应该具有可以使用表单字段名称“命名”的服务器环境变量，以从服务器平台脚本线程中检索。例如 PHP `$_POST{"emailfield"}` 在哪里

```
<input type="text" name="emailfield" id="emailfield" value="" /> 
```

# python - libsvm - mac 上的 python 警报 malloc 错误

> ID：15565832
> 
> 赞同：1
> 
> 时间：2013-03-22T08:29:26.430
> 
> 标签：python, svm, libsvm

我用它来制作分类器。

当我让做 svm_predict 时，

这提醒

```
准确度 = 0% (0/1)（分类）
[2.0]
(0.0, 4.0, 南)
[[0.12612545919459253，0.43547967330944765，0.05800756627730365，0.036116536312615084，0.16190484785290027，0.09137947289650544，0.09098644415663576]]
Python(4682) malloc: 对象 0x5 的 *** 错误: 被释放的指针未被分配
*** 在 malloc_error_break 中设置断点进行调试

```

我发送的参数大约有 200 行，比如

```
data = { 1:5, 2:5, 3:5, ~, 200: 5 }
a, b, c = svm_predict([0]*len([data]), [data], model) 
```

我可以做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T07:39:09.830

我不知道这与上述问题有关。

但在此之后，所有问题都得到了彻底解决。

方式是操作`A`：`Train`with `garbage value`（不相关）。

并且很重要的一点是使用不是你`A`的模型，而是`B`你已经制作的模型。

最后，解决方案是`Train`作为`flag`.

# iphone - 从一个导航控制器切换到另一个导航视图控制器

> ID：15565835
> 
> 赞同：1
> 
> 时间：2013-03-22T08:29:43.827
> 
> 标签：iphone, uiviewcontroller, uinavigationcontroller

我正在开发一个应用程序，其中我使用两个导航控制器和 uilocalNotification

第一个 NavigationViewController N1 有两个 ViewControllers v1 和 v2 第二个 NavigationViewController N2 有两个 ViewControllers v3 和 v4

此外，当应用程序处于后台时，如果 UILocalNotification 出现并且如果我单击它，应用程序应该检测显示哪个导航控制器和哪个视图控制器，然后切换到另一个导航控制器的视图控制器。

例如：- 如果显示 N1 中的 v2，则单击通知后，将显示切换到 N2 中的 v3

这该怎么做 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:43:05.580

只需将此波纹管方法粘贴到您的`AppDelegate.m`文件中，并在您想要更改时调用特定方法`UINavigationController`...

例如：如果你在`v2`并且`N1`通知改变了然后调用波纹管方法像波纹管......

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate setRootViewControllerN2]; 
```

使用下面的方法来切换带有动画的导航控制器..

**1\. setRootViewControllerN1** : 这是用于设置 RootViewController 和 N1 导航控制器。

```
-(void)setRootViewControllerN1{
    self.window.rootViewController = N1;

    [self.window makeKeyAndVisible];
    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFade];
    [animation setDuration:0.5];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.window layer] addAnimation:animation forKey:kAnimationKey];
} 
```

**2\. setRootViewControllerN2** : 这是用于设置 RootViewController 和 N2 导航控制器。

```
-(void)setRootViewControllerN2{
    self.window.rootViewController = N2;

    [self.window makeKeyAndVisible];
    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFade];
    [animation setDuration:0.5];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.window layer] addAnimation:animation forKey:kAnimationKey];
} 
```

# android - 开始添加新的联系人活动并传递结构化数据

> ID：15565837
> 
> 赞同：1
> 
> 时间：2013-03-22T08:29:45.403
> 
> 标签：android, android-contacts

可以启动默认人员/联系人活动并传递结构化数据，例如分开的名字和姓氏、电话类型、城市、邮政编码和类似数据。我使用以下类似的代码：

```
Intent addContactIntent = new Intent(Intent.ACTION_INSERT); 
addContactIntent.setType(ContactsContract.Contacts.CONTENT_TYPE);              
addContactIntent.putExtra(ContactsContract.Intents.Insert.POSTAL, "abc 2343");      
startActivity(addContactIntent ); 
```

这工作正常，但我无法指定哪个是例如邮政编码，以及什么是城市或地点。[我在这里](https://stackoverflow.com/questions/4744187/how-to-add-new-contacts-in-android)找到了这样的示例，但我之前无法开始添加新的联系人意图，因此用户在保存联系人之前无法编辑某些内容。代码无需用户交互即可立即保存联系人。

任何帮助都是不言而喻的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:58:04.873

至于您的信息，您可以使用 ContactsContract.Intents.Insert.DATA ，它旨在插入多个数据项。如地址字段的城市、州等。但真正的问题是它在 API 11 之前不可用。

这是它的工作原理。

```
 ArrayList<ContentValues> data = new ArrayList<ContentValues>();
  //Email
  ContentValues row1 = new ContentValues();
  row1.put(Data.MIMETYPE, Email.CONTENT_ITEM_TYPE);
  row1.put(Email.ADDRESS, "ADDRESSme");
  data.add(row1);

  //Website
  ContentValues row2 = new ContentValues();
  row2.put(Data.MIMETYPE, Website.CONTENT_ITEM_TYPE);
  row2.put(Website.URL, "URLme");
  data.add(row2);
   //Address
   ContentValues row4 = new ContentValues();
   row4.put(Data.MIMETYPE, StructuredPostal.CONTENT_ITEM_TYPE);
   row4.put(StructuredPostal.CITY, "CityMe");//Pre populating  city
   row4.put(StructuredPostal.COUNTRY, "COUNTRYme");//Pre populating  country
   row4.put(StructuredPostal.STREET, "STREETme");////Pre populating  street
   row4.put(StructuredPostal.POSTCODE, "POSTCODEme");//
   data.add(row4);

  Intent i = new Intent(Intent.ACTION_INSERT, Contacts.CONTENT_URI);
  i.putParcelableArrayListExtra(Insert.DATA, data); 
```

# eclipse - 无法在eclipse中安装svn插件

> ID：15565845
> 
> 赞同：0
> 
> 时间：2013-03-22T08:30:04.120
> 
> 标签：eclipse, svn, eclipse-plugin

我想用 Eclipse 安装 svn 插件。我发现这个网站是为了指导

[http://www.eclipse.org/subversive/documentation/gettingStarted/aboutSubversive/install.php](http://www.eclipse.org/subversive/documentation/gettingStarted/aboutSubversive/install.php)

我在“帮助--安装新软件”选项中提供以下下载链接

[http://download.eclipse.org/technology/subversive/1.0/update-site-1.0.1/](http://download.eclipse.org/technology/subversive/1.0/update-site-1.0.1/)

但是当我尝试下载插件时，eclipse给我以下错误

![在此处输入图像描述](../Images/538c1e5b447a86d2a0e5819d8d46e053.png)

我不为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:02:40.877

引用您的教程：

```
On the 'Add Repository' form enter the URL to the Subversive update site. 
The proper URL can be found on http://www.eclipse.org/subversive/downloads.php. 
Also the update-site for Subversive integration plug-ins can be added in 
the same way. 
```

上面提供的链接**不是**更新存储库，它只是一个信息页面，您可以在其中找到最新的存储库 URL。

试试这个：

```
http://download.eclipse.org/technology/subversive/1.0/update-site-1.0.1/ 
```

希望这会有所帮助，玩得开心！

# ruby-on-rails - 显示来自另一个控制器的模板/布局

> ID：15565846
> 
> 赞同：0
> 
> 时间：2013-03-22T08:30:10.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有以下关联

```
 Group:
   has_many :group_links, :dependent => :destroy

 GroupLink:
    belongs_to :group 
```

我想在布局中显示属于特定组的所有组链接，其中包括在 GroupLInks 视图中不可见的其他对象。所以我想从 GroupController 呈现一个模板，如下所示：

```
 def group_links
          @group_links = @group.group_links.all
          render :template => 'group_links/group_links', :layout => 
                              '/layouts/sponsored_group_manage_sub_menu'
     end 
```

但我收到以下错误：

```
 The action 'index' could not be found for GroupLinksController 
```

如果我为 GroupLinks 创建一个“索引”视图并尝试在包含其他对象的布局中显示它，则会引发错误

```
 "You have a nil object" 
```

我有以下方法在我的组控制器中进行初始化：

```
 def init_group
      @group = Group.find_by_id(params[:id])
      @group_blog_tags=@group.blog.blog_posts.tag_counts
      @booth_links = @group.group_links.all
      max_id = Group.count_by_sql("select min(profile_id) from (select profile_id from 
               group_memberships where group_id = #{@group.id} order by profile_id desc 
               limit 200) as x")
      @booth_members = @group.members.all(:conditions => "profiles.id >= #
      {rand(max_id)+1}", :limit => 20).to_a.sort! { |a,b| rand(3)-1 }
    redirect_to groups_explorations_path unless @group
   end 
```

这些其他对象在组布局中用于显示其他对象。问题是我能够显示 GroupsController 中的另一个对象，而无需在该对象控制器中进行任何索引操作。我对 GroupLinks 也有完全相同的设置，但在这种情况下它不起作用......请你帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:54:01.817

事实证明，我没有在我的布局中放置此方法的正确路径。路线很好，但对这个方法的调用不是 - 我不得不打破我的头找到它:(...感谢您的时间@Mosin和@RubyMan，感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:48:50.170

我认为问题在于您的控制器方法 group_links 中的 @group 为零。您可以尝试这样制作：

```
def group_links
    @group = Group.find(params[:id])  
    @group_links = @group.group_links.all
    render :template => 'group_links/group_links', :layout => 
                      '/layouts/sponsored_group_manage_sub_menu'
end 
```

但我不确定这是否能正常工作：

```
render :template => 'group_links/group_links', :layout => 
                      '/layouts/sponsored_group_manage_sub_menu' 
```

您可以尝试将模板放在名称为“group_links”的正确视图文件夹中，并在您的 routes.rb 文件中匹配。

# php - 如何在 Windows 上安排 PHP 脚本的执行

> ID：15565849
> 
> 赞同：0
> 
> 时间：2013-03-22T08:30:35.903
> 
> 标签：php, windows, email, scheduled-tasks

*对于我的提醒系统应用程序，我需要在活动*前一天发送电子邮件。`date`数据库用, `time`,来存储提醒`user_id`。有什么办法可以安排在活动发生前一天自动发送的电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:05:13.407

**1）创建一个将运行脚本的批处理文件**

打开记事本，添加这个命令，使用你自己的属性：

```
"PATH_TO_PHP.EXE" -f "SCRIPT_TO_RUN.PHP" 
```

所以它可能看起来像这样：

```
"C:\Program Files (x86)\PHP\v5.3\php.exe" -f "C:\tasks\task.php") 
```

将此文件另存为`.bat`文件（批处理文件）。

（好吧，所以创建批处理文件并不是完全必要的，但是如果你想扩展这个任务怎么办？对吧？）

**2）让任务调度程序运行任务**

打开*任务计划程序*（您可以在*Accessories > System Tools*中找到它，或者只搜索“taskschd.msc”）

创建一个任务。

给它一个名字，为指定的日期创建一个[**触发器。**](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa383619%28v=vs.85%29.aspx)

现在转到“操作”选项卡，点击“新建”，默认情况下应该显示“启动程序”。

浏览到您刚刚制作的批处理文件，单击“确定”，您就完成了。

# c# - 如何从表中选择唯一值并将其插入到 firebird 中的另一个表中？

> ID：15565851
> 
> 赞同：-1
> 
> 时间：2013-03-22T08:31:02.883
> 
> 标签：c#, stored-procedures, firebird

我在 firebird 中有 2 张表，其中一张表包含重复的 ID，而另一张表只有唯一的。所以，我想使用一个过程从重复表中选择唯一 ID 并将它们插入到唯一表中。但是，我真的不知道怎么做，有人可以帮助我吗？

编辑：这是一个例子：

有2张桌子

```
 ## GASFLESSEN ##            
ID CODE SUCCESS TARE_WEIGHT FILLING_NOZZLE      //< Column "CODE" contains those unique ID's.

           ## READINGS ##
      ID CODE_ID READING_TIME                   //< Column "CODE_ID" contains the duplicate ID's 
```

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:06:11.743

如果您想在有重复项的表中获取“唯一”ID-s 列表，请使用`DISTINCT`，即

```
SELECT DISTINCT id FROM d 
```

现在，如果您想进一步将结果集限制为`id`“唯一表”中尚未包含的记录，请加入表或使用`NOT EXISTS`ie

```
SELECT DISTINCT id FROM d WHERE NOT EXISTS(SELECT 1 FROM u WHERE u.id = d.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:07:31.150

```
procedure CopyUniqueFromData;
declare var_id integer;
  for 
    select distinct id from d into :var_id 
  do begin
    insert into u (id) values (:var_id);
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:10:11.013

有几种方法可以做到这一点。除了[ain 的答案](https://stackoverflow.com/a/15566414/466862)之外，还可以使用[`MERGE`](https://www.firebirdsql.org/file/documentation/html/en/refdocs/fblangref25/firebird-25-language-reference.html#fblangref25-dml-merge)：

```
MERGE INTO table_unique
    USING (SELECT DISTINCT id FROM table_duplicates) src
    ON table_unique.id = src.id
    WHEN NOT MATCHED THEN 
        INSERT (id) values (src.id); 
```

# php - 如何将数组从php动态复制到javascript？

> ID：15565854
> 
> 赞同：1
> 
> 时间：2013-03-22T08:31:12.997
> 
> 标签：php, javascript, arrays

我正在为 GPS 跟踪系统的服务器端编码编写 PHP 和 HTML 代码。PHP 代码将从数据库中访问 GPS 的坐标。我找到了在地图上显示这些坐标的 HTML 代码（作为折线）。在数据库中，几乎每分钟都会添加一个新元组，因此我们无法事先指定数组中有多少元素。

如何动态地将数组从 php 复制到 javascript？

[这](http://www.w3schools.com/googleAPI/google_maps_overlays.asp)是带有绘制折线代码的网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:34:45.823

> 如何动态地将数组从 php 复制到 javascript？

您根本无法“复制”它，因为 PHP 和 JavaScript 是两个完全不同的世界。

您可以做的是以*文本*形式传输它——例如，通过在 PHP 脚本中将其编码为 JSON，将其作为 JS 代码回显（或通过 JSONP/AJAX 在新的 HTTP 请求中从服务器请求它），以及将其解析回 JavaScript 对象或数组结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:42:34.570

试试这样的东西：

```
<?php
$arr = array('cat', 'dog', 'mouse');
?>

<body>
    <script>
        var jsArr = <?php echo json_encode($arr); ?>;
        console.log(jsArr);
    </script>
</body> 
```

应该输出

```
["cat", "dog", "mouse"] 
```

在控制台中

# r - R中的日期变量

> ID：15565856
> 
> 赞同：0
> 
> 时间：2013-03-22T08:31:15.660
> 
> 标签：r, date, xts

我有一个 xts 变量`os`和另一个名为`date`.

```
head(os[,1])
        ab1   ab2
2007-07-20 103.02 96.60
2007-07-20 103.00 96.25
2007-07-20 102.70 96.25
2007-07-20 102.70 96.15
2007-07-20 102.75 96.20
2007-07-20 102.50 95.80 
```

和

```
head(date)
date
2007-07-20
2007-07-21 
```

如果我使用：

```
sum(index(os)[1]==date). 
```

答案是1，这是正确的。只是比较的第一个日期`os`。

如果我比较`os`类似的日期：

```
sum(index(os)==date) 
```

答案是0。

这怎么可能？

# windows-phone-7 - 如何在window phone 8中保存和查看图像

> ID：15565859
> 
> 赞同：0
> 
> 时间：2013-03-22T08:31:19.803
> 
> 标签：windows-phone-7, windows-phone-8

我正在开发一个简单的窗口电话应用程序。其中我有两个归档名称和图像。

我想保存这个项目并想查看所有保存的数据。

现在我的查询如何选择要保存的图像？以及如何保存图像并获取要查看的图像。

我也使用了 PhotoChooserTask 但如何保存选定的图像以及如何获取保存的图像？我知道如何将图像文件保存在独立存储中。但是如何保存选定的图像并获取所有数据？

谢谢，海特什。

* * *

感谢您的回复。我知道 photoChooserTask。我还将图像文件保存在独立存储中。但我不知道在数据库中保存图像路径的图像路径是什么以及如何在数据网格中显示所有这些图像。我有一个表，其中包含 ID、名称和图像路径等字段。如果我将图像保存在隔离存储中以及如何在 datagrid 中显示所有数据，我不知道在 imagepath 文件中保存什么。我使用以下代码将数据保存到数据库中。如果我错了，请在下面的代码中更正图像路径。

```
CategoryVO newCategory = new CategoryVO()
    {
        Name = txtCategoryName.Text,
        ImagePath = txtCategoryName.Text.Trim() + ".jpg"
    };
    Expdb.Category.InsertOnSubmit(newCategory);
    Expdb.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:21:42.137

使用 PhotoChooserTask，您实际上可以启动照片选择器应用程序并处理选定的图像。如果您想将此集成到您的应用程序中，请创建 PhotoChooserTask 的实例并调用 Show() 方法。如果要处理用户的选择，请注册 Completed 事件，该事件将为您提供所选照片的​​句柄。

```
var photoChooserTask = new PhotoChooserTask();
photoChooserTask.Completed += PhotoChooserTaskCompleted;
photoChooserTask.Show(); 
```

在完成的事件实现中，您可以将选择的图像作为 PhotoResult 并将图像设置到您的 Image 控件或可以在其他地方使用它。

```
void PhotoChooserTaskCompleted(object sender, PhotoResult e)
{
    switch (e.TaskResult)
    {
        case TaskResult.OK:
            imageChooser.Source = new BitmapImage(new Uri(e.OriginalFileName));
            break;
    }
} 
```

来源： http: [//www.codeproject.com/Articles/350126/How-to-use-the-PhotoChooserTask-to-Launch-the-Medi](http://www.codeproject.com/Articles/350126/How-to-use-the-PhotoChooserTask-to-Launch-the-Medi)

# java - 将json对象解析为字符串

> ID：15565862
> 
> 赞同：6
> 
> 时间：2013-03-22T08:31:32.267
> 
> 标签：java, json, jaxb, jackson, resteasy

我有一个关于我正在构建的 Web 应用程序的问题，我有一个接收 json 字符串的 REST 服务。

Json 字符串类似于：

```
{
    "string" : "value",
    "string" : "value", 
    "object" : {
                 "string" : "value",
                 "string" : "value",
                 ....
                }
} 
```

我正在使用resteasy来解析下面使用jackson的json字符串。我有一个 jaxb 注释类，我想将“对象”完全解析为一个字符串变量。我想这样做的原因是以后能够使用正确的解析器解析 json（这取决于发送请求的应用程序，因此无法提前知道）。

我的 jaxb 注释类如下所示：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.PROPERTY)
public class Test{

@XmlElement(type = String.class)
private String object;

//getter and setter
...
} 
```

当我执行其余调用并让杰克逊解析这段代码时，我得到一个

```
Can not deserialize instance of java.lang.String out of START_OBJECT token 
```

错误。所以实际上我正在尝试将一段 json 字符串（它是一个 json 对象）解析为一个字符串。我似乎找不到有类似问题的人。

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T16:02:49.980

@KwintenP 尝试使用[json 智能库](https://code.google.com/p/json-smart/)。

然后，您可以先使用以下方法简单地检索 JSON 对象：

```
JSONObject test = (JSONObject) JSONValue.parse(yourJSONObject);
String TestString = test.toString(); 
```

更重要的是，您可以检索 JSON 对象中的特定对象，可能是另一个对象、数组并将其转换为字符串或以您想要的方式操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T08:19:08.803

如果我理解这个问题，您只需要一种机制，将 Java-Object 转换为 JSON-String，反之亦然。

我也需要这个，而我正在使用传递 JSON 字符串的 WebSocket 客户端-服务器通信。

为此，我使用了 GSON（请参阅[GSON](https://code.google.com/p/google-gson/)）。在那里你可以创建一个完整的 JSON 字符串。这里有一些例子：

```
// Converts a object into a JSON-String
public String convertMyClassObjectToJsonFormat() {
  MyClass myObject = new MyClass();
  Gson gson = new Gson();

  return gson.toJson(myObject);
}

//Converts a JSON-String into a Java-Class-Object
public MyClass convertJsonToMyClassObject(
            CharBuffer jsonMessage) {
  Gson gson = new Gson();

  return gson.fromJson(jsonMessage.toString(),
                MyClass.class);
} 
```

您需要的是，您的 Class-Attributes-setter 和 JSON-Attribute-names 是等效的。例如

```
{
   "info":[
      {
         "name": "Adam",
         "address": "Park Street"
      }
    ]
} 
```

你的班级应该是这样的：

```
public class Info{
 private String name;
 private String address;

 public void setName(String name){
  this.name = name;
 }
 public void setAddress(String address){
  this.address = address;
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T14:47:02.277

你也可以做这样的事情；

```
public class LeaderboardView
{
     @NotEmpty
     @JsonProperty
     private String appId;

     @NotEmpty
     @JsonProperty
     private String userId;

     @JsonProperty
     private String name = "";

     @JsonProperty
     private String imagePath = "";

     @NotEmpty
     @JsonIgnore
     private String rank = "";

     @NotEmpty
     @JsonProperty
     private String score;

     public LeaderboardView()
     {
        // Jackson deserialization
     } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T09:40:29.377

```
java.lang.String out of START_OBJECT token 
```

这意味着后面的预期字符`"object"`是引号`"`，而不是括号`{`。

**预期的 json**

```
"object" : "my object" 
```

**实际的json**

```
"object" : { ... 
```

**=======**
如果您想像示例中那样解析 json，请更改您的课程。例如

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.PROPERTY)
public class Test{

   @XmlElement
   private InnerTest object;

   //getter and setter
...
}  

@XmlAccessorType(XmlAccessType.PROPERTY)
public class InnerTest{

   @XmlElement
   private String string;

   //getter and setter
...
} 
```

# android - ActionBarSherlock：OnOptionsItemSelected 无法识别 R.id.home

> ID：15565864
> 
> 赞同：10
> 
> 时间：2013-03-22T08:31:35.137
> 
> 标签：android, android-activity, actionbarsherlock

我正在使用 ActionBarSherlock 库，并按照[此处](https://stackoverflow.com/questions/11617399/enable-home-button-actionbarsherlock-sherlockfragment,)和[此处](https://stackoverflow.com/questions/14488229/using-icon-in-top-left-of-actionbarsherlock-to-navigate)建议的确切步骤来启用导航到上一个屏幕。

我的代码如下所示：

`getSupportActionBar().setDisplayHomeAsUpEnabled(true);`

和

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // This callback is used only when mSoloFragment == true (see
    // onActivityCreated above)
    switch (item.getItemId()) {
    case android.R.id.home:
        // App icon in Action Bar clicked; go up
        Intent intent = new Intent(this, MainActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); // Reuse the
                                                            // existing
                                                            // instance
        startActivity(intent);

        return true;
    default:
        return super.onOptionsItemSelected(item);
    } 
```

但是 R.id.home 无法识别，并且 home 显示为红色。:-/ 如果我使用本机操作栏，主页声明会将我带到 ids.xml 文件。但是，当我使用 ActionBarSherlock Activity 时，这里没有找到声明。我错过了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T08:50:36.173

只是替换这个

```
android.R.id.home 
```

到

```
R.id.home 
```

并检查您的代码...运行它

因为

`R.layout.*`是您提供的布局（例如在 res/layout 中）。

`android.R.layout.*`是 Android SDK 附带的布局。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-20T08:29:12.827

我知道这是一个老问题，但我相信缺少正确的答案。

应该是`android.R.id.home`因为是平台资源，所以你的代码没问题。

确保您的 minSdkVersion 为 11 或更高，因为`home`在 11 中引入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T08:47:48.647

我记得遇到了这个问题，显然它非常频繁，快速谷歌或通过堆栈溢出搜索应该会给你一些洞察力无论如何检查这个线程[R 无法解决 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error) 我很确定你遇到了同样的问题

# php - 您如何可靠地生成连续数字？

> ID：15565865
> 
> 赞同：2
> 
> 时间：2013-03-22T08:31:40.890
> 
> 标签：php, symfony

我正在开发一个项目（使用 Symfony 2 用 PHP 编写的 Web 应用程序），其中需要记录各种与安全相关的事件。还要求日志文件中的事件连续编号（我想这不是那么容易删除项目）。

我将使用[Monolog](https://github.com/Seldaek/monolog)（包含在 Symfony 中）进行日志记录，并且我知道我可以使用处理器将数字添加到记录中。

然而，我不知道如何真正可靠地生成连续数字。我所说的“可靠”是指：没有间隙，也没有重复的数字。

我能想到的唯一解决方案是让数据库（通过 Doctrine 的 MySQL）通过使用具有自动增量 ID 的虚拟表来生成数字，但这似乎有点用于日志记录的开销。

对此还有哪些其他策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:13:41.170

您可以使用包含最后一个 id 的单个文件来模拟自动增量 id。锁可以防止竞争条件：

```
$fp = fopen('/path/to/id.file', 'r+');
flock($fp, LOCK_EX);
$lastId = fgets($fp);
$currentId = $lastId + 1;
fseek($fp, 0);
fputs($currentId);

// place logging here...

flock($fp, LOCK_UN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:11:31.190

如果您想写入文件，我想唯一可靠的是在写入新记录之前从该文件中读取最大数量 - 并在执行此操作时使用文件锁定以避免[TOCTTOU](http://en.wikipedia.org/wiki/Time_of_check_to_time_of_use)问题。所以基本上是数据库*事务*为你做的事情，但是文件:-)

也许你不需要每次都锁定和读取整个日志文件——只将最后一个数字记录到一个单独的“计数器”文件中就足够了，并在读取最后一个数字时锁定它，写入日志文件并更新计数器文件中的数字。

# jquery - jqplot 不更新图表

> ID：15565866
> 
> 赞同：1
> 
> 时间：2013-03-22T08:31:49.580
> 
> 标签：jquery, jqplot

几天来，我一直在为我的代码苦苦挣扎。我研究了互联网并阅读了文档。我已经尝试了我可以在其他人在类似问题的答案中提供的代码中找到的内容。

这是我的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <!--[if lt IE 9]><script language="javascript" type="text/javascript" src="jqplot/excanvas.min.js"></script><![endif]-->
    <link rel="stylesheet" type="text/css" href="jqplot/jquery.jqplot.min.css" />
    <script type="text/javascript">if (typeof jQuery == "undefined"){document.write("<script src='jqplot/jquery.min.js' language='javascript' type='text/javascript'><\/script>");}</script>
    <script type="text/javascript" src="jqplot/jquery.jqplot.min.js"></script>
    <script type="text/javascript" src="jqplot/plugins/jqplot.cursor.min.js"></script>
    <script type="text/javascript" src="jqplot/plugins/jqplot.dateAxisRenderer.min.js"></script>
    <script type="text/javascript" src="jqplot/plugins/jqplot.canvasTextRenderer.min.js"></script>
    <script type="text/javascript" src="jqplot/plugins/jqplot.canvasAxisTickRenderer.min.js"></script>

<script language=javascript>

        $(document).ready(function(){

        var plot1 = null;
        var line1=[['2008-09-30 4:00PM',4], ['2008-10-30 4:00PM',6.5], ['2008-11-30 4:00PM',5.7], ['2008-12-30 4:00PM',9], ['2009-01-30 4:00PM',8.2]];
        var line2=[['2008-09-30 4:00PM',8], ['2008-11-05 4:00PM',3], ['2008-11-30 4:00PM',7], ['2008-12-30 4:00PM',9], ['2009-01-30 4:00PM',8.2]];

        plot1 = $.jqplot('chartdiv', [line1], {
                    title: "AJAX JSON Data Renderer",
            axes: {
              xaxis: {
                 renderer: $.jqplot.DateAxisRenderer,

              },
              yaxis: {
              }
            },
            highlighter: {
              show:true
            },
            cursor:{
              show:true,
              zoom:true
            } 

          });

        alert("wait");

        plot1.series[0].data=[line2];
        plot1.replot();

        }); 
</script>
</head>

<body>
<div id="chartdiv"></div>
</body>

</html> 
```

我只想将图表从 line1 中的数据更新为 line2 中的数据。结果是一个空图表。

本练习的目的是稍后更改代码以通过从服务器获取的 json 数据来更新图形。那部分正在工作。最后，我想绘制一个包含 1500 个点的数据集。

非常感谢您的帮助。

莱昂

# arrays - 计数排序错误消息

> ID：15565868
> 
> 赞同：0
> 
> 时间：2013-03-22T08:31:52.813
> 
> 标签：arrays, segmentation-fault, malloc

我正在尝试使用 C 实现计数排序算法，但在测试一百万个整数期间我不断遇到分段错误。请问有什么帮助吗？我的代码如下（“type.h”为 unsigned int 数据类型提供 typedef “unit”）：

```
#include <stdlib.h>
#include "csort.h"
#include <stdio.h>
#include "type.h"

unsigned int*
countingSort(unsigned int *A, int n) {
        uint i, j, l = 0, k = 0;
        uint *C;
        for (i = 0; i < n; i++)
            if (A[i] > k)
                    k = A[i];
        C = (uint*)malloc((sizeof(uint))*(k+1));
        for (i = 0; i <= k; i++)
            C[i] = 0;
        for (i = 0; i < n; i++)
            C[A[i]]++;
        for (i = 1; i < k; i++)
            for (j = 0; j < C[i]; j++)
                    A[l++] = i;
        free(C);
        return A;
} 
```

我正在处理的输入是大数字，因此 k 很大。n 是输入数组中的整数个数（一百万）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:02:09.907

所有整数的最大值是多少？如果它非常大（例如`2*10^9`），那么您可能会遇到分配问题，`2*10^9 * sizeof(int)`这可能会导致分段错误。

# php - 为日历字段赋值

> ID：15565871
> 
> 赞同：0
> 
> 时间：2013-03-22T08:31:57.423
> 
> 标签：php, joomla, joomla3.0

我正在使用 joomla 3.0。我只是面临简单应用程序的问题。我有一个视图。所以我在模型文件夹下设计了一个 xml 文件。在 view.php 中检索。应该有一个日历字段。我需要将当前日期分配给该字段。我如何通过 php 执行此操作？表单.xml：

```
<field name="expired" type="calendar" label="Date"
description="Date" format="%Y-%m-%d %H:%M:%S"
required="true" class="readonly" /> 
```

视图.html：

```
$form = $this->get('Form');
$this->form = $form; 
```

默认.php：

```
<div class="control-group">
<div class="control-label"><?php echo ''Current Date; ?></div>
<div class="controls"><?php echo $this->form->getInput('created'); ?></div>
</div> 
```

我怎样才能应用这个领域的当前日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:44:48.213

在您的模型（应该扩展 JModelForm）中，您需要覆盖方法 loadFormData()，类似于（在需要时进行调整）：

```
 // Method to get the data that should be injected in the form.
protected function loadFormData() 
{
    // Check the session for previously entered form data.
    $data = JFactory::getApplication()->getUserState('com_YOURCOMPONENT.edit.YOURVIEW.data', array());
    if (empty($data)) 
    {
        $data = $this->getItem();
    }
    return $data;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:00:00.937

您可以`$this->form->setValue('created', '', date('Y-m-d H:i:s');`在 view.html.php 文件中使用。文档在这里：[http ://docs.joomla.org/JForm::setValue/11.1](http://docs.joomla.org/JForm::setValue/11.1)

要获取当前日期，您还可以使用`JHtml::Date`( [http://docs.joomla.org/JHtml::date/11.1](http://docs.joomla.org/JHtml::date/11.1) ) 而不是`date()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T09:07:39.643

尝试将您的 xml 中的字段更改为以下内容：

```
<field name="expired" 
    type="calendar" 
    label="Date"
    description="Date" 
    format="%Y-%m-%d %H:%M:%S"
    required="true"
    filter="user_utc"
    default="now" 
    class="readonly" /> 
```

添加默认的“现在”将加载当前日期。附加过滤器会将日期设置为用户时间。

# javascript - 输入价格格式化javascript，哪里错了

> ID：15565873
> 
> 赞同：0
> 
> 时间：2013-03-22T08:32:08.370
> 
> 标签：javascript, jquery, regex

在你说它的重复之前，我不是在问如何实际格式化价格。但是问我哪里做错了，或者我应该怎么做才能以我想要的方式实现它。

我做了价格格式化（实际上是从某处复制代码） [http://jsfiddle.net/qwY24/](http://jsfiddle.net/qwY24/)

喜欢**价格 1**

但现在我想在输入字段本身（**价格 2**）中格式化价格，它可以正常工作到 6 位，但之后它就搞砸了。它有两个问题

1.  **6位后**格式混乱
***   **当按返回键（删除号码）时，价格仅在 6 位数后**不会重新格式化**

 ****代码

```
$(".price1").on("keyup",function(){
   var price = $(this).val();
   $(".formatted1").text(price.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
});

$(".price2").on("keyup",function(){
   var price = $(this).val();
   price = price.replace(",","");
   $(".price2").val(price.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
   $(".formatted2").text(price.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
}); 
```

> ```
> <label>Price 1</label>
> <input type="text" class="price1" /><br />
> <label><b>Price 1 Formatted:</b></label>
> <span class="formatted1"></span><br /><br /><br />
> 
> <label>Price 2</label>
> <input type="text" class="price2" /><br />
> <label><b>Price 2 Formatted</b></label>
> <span class="formatted2" ></span><br /><br /><br /> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:08:36.650

`price.replace(",","")`仅替换逗号的*第一个*实例，而不是全部替换。将其替换为

```
price = price.replace(/,/g,""); 
```

（另外，`.toString()`下一行的部分是不必要的，因为变量已经是一个字符串。）

演示：http: [//jsfiddle.net/qwY24/3/](http://jsfiddle.net/qwY24/3/)****

# java - 将一对 @ManyToOne 相关属性标记为唯一。可能的？

> ID：15565876
> 
> 赞同：1
> 
> 时间：2013-03-22T08:32:16.033
> 
> 标签：java, jpa, playframework-2.0, playframework-1.x

我有一个典型的例子，一个帖子有很多标签，一个标签有很多帖子。我没有使用典型的`@ManyToMany`，而是在中间使用了一个名为 TAGPOST 的域对象，它还允许我在其中拥有有用的数据，例如何时使用给定标签标记帖子等。每个 POST 和 TAG 对应，`@OneToMany`与 TAGPOST有关系。

具体要求是一个帖子不能包含两次相同的标签，因此 TAGPOST.post 和 TAGPOST.tag 对必须始终是唯一的。通常，我会在表中创建一个复合主键对，负责存储 TAGPOST 对象。

AFAIK，没有办法表达这种独特的约束。我已标记`jpa.ddl=update`，这意味着每次我将应用程序移动到新环境时，我都必须在数据库中手动修复它。这非常不方便，而且容易出错，尤其是在单元测试时，因为在每次迭代中都会或多或少地创建和删除数据库。

我什至在考虑手动进行检查`@PrePersist`，甚至将检查移动到业务层中，比如创建一个 PostService。

我该怎么办？我错过了 Play 默认拥有的东西吗？一些巧妙的注释来表达`@ManyToOne`TAGPOST 类的属性的唯一性？

仅供参考：我正在使用 Play 1.2.5

编辑： TAGPOST 类如下所示：

```
@Entity
public class TagPost extends Model {

    @ManyToOne
    public Tag tag;

    @ManyToOne
    public Post post;

    public Date dateAdded;

    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:37:00.727

`Check`我为数据库唯一性编写了一个自定义。也许你应该定制它。

**DBUnique.java**

```
package models.check;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import net.sf.oval.configuration.annotation.Constraint;
import play.db.jpa.GenericModel;

@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.FIELD, ElementType.PARAMETER })
@Constraint(checkWith = DbUniqueCheck.class)
public @interface DBUnique {
    String message() default DbUniqueCheck.mes;

    Class<? extends GenericModel> modelClass();

    String field() default ""; // field name will be used
} 
```

**DbUniqueCheck.java**

```
package models.check;

import net.sf.oval.Validator;
import net.sf.oval.configuration.annotation.AbstractAnnotationCheck;
import net.sf.oval.context.FieldContext;
import net.sf.oval.context.OValContext;

import org.apache.commons.lang.StringUtils;

import play.db.jpa.GenericModel.JPAQuery;

@SuppressWarnings("serial")
public class DbUniqueCheck extends AbstractAnnotationCheck<DBUnique> {

final static String mes = "validation.dbunique";
DBUnique dbUnique;

@Override
public void configure(DBUnique dBUnique) {
    this.dbUnique = dBUnique;
    setMessage(dBUnique.message());
}

public boolean isSatisfied(Object validatedObject, Object value, OValContext context, Validator validator) {
    try {
        String field = dbUnique.field();
        if (field == null || field.isEmpty()) {
            field = ((FieldContext) context).getField().getName();
        }
        JPAQuery q = (JPAQuery) dbUnique.modelClass().getMethod("find", String.class, Object[].class)
                .invoke(null, "by" + StringUtils.capitalize(field), new Object[] { value });
        return q.first() == null;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return false;
}

} 
```

用法：[链接到要点](https://gist.github.com/hgo/5227028)

它只是检查给定实例的给`field`定`class`实例在 db 中是否唯一。也许你应该做这样的东西..

# java - Activity UI 修改不起作用？

> ID：15565878
> 
> 赞同：0
> 
> 时间：2013-03-22T08:32:20.467
> 
> 标签：java, android

我有一个类控制器。这个类是一个公共接口，包含我可以从我的 Activity 执行的所有方法。以下是我的控制器类：

```
 public class Controller {
    private Activity activity;
    private TextView parentView;

    public Controller(Activity activity,Textview view) {
            this.activity = activity;
            this.parentView=view;

}

public void initialize(String app, String rel) {
    this.app = app;
    this.rel = rel;
    Controller.controller = new LibraryController(activity,
                this);
    Controller.controller.initialize(app, rel);
}

public void libraryInitialised() {

parentView.setText("in library initiliase");

} 
```

}

在库控制器中有一个 Asynctask 解析 Web 服务和 Asynctask 的后执行执行控制器类的库初始化方法。

我从我的android项目中调用控制器类：

```
 Textview view=(TextView)FindViewbyId(someid);

  Controller controller=new Controller(viewCallingActivity.this,view);

  controller.initialize("appname","3.4.0"); 
```

现在的问题是，如果我在我的设备上从 eclipse 运行这个小应用程序，它工作得很好，并在设备中给我一条消息“在库初始化中”但是当我从启动器图标打开它时，它没有给我消息“在库中”初始化”

我不知道具体是什么问题？

任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:35:25.963

尝试通过设备上的应用程序管理器（强制停止）关闭已安装的应用程序，然后再次启动它。您的方法可能不会被调用，因为当您`Activity`通过“后退按钮”关闭时，应用程序的 Dalvik 进程仍在后台徘徊，以供 Android 重用。如果这是一个原因，我建议您阅读此问题并回答
[如何杀死我自己的活动 - 艰难的方式](https://stackoverflow.com/questions/3241322/how-to-kill-my-own-activity-the-hard-way)

# excel - 对二维数组的两个列进行冒泡排序，队列输出未转移到范围

> ID：15565885
> 
> 赞同：0
> 
> 时间：2013-03-22T08:32:43.370
> 
> 标签：excel, vba

我创建的函数有 2 个问题。首先是二维数组上 2 列的冒泡排序（降序排序 - 首先是第 2 列，然后是第 1 列）。我相信我已经正确地实施了这一点，但结果往往不同。

> 输入
> COL 1 COL 2
> 35.484％38.296％
> 1.075％0.112％
> 1.075％0.056％
> 48.387％0.124％
> 1.075％0.005％ 2.151
> ％0.051％
> 2.151％0.006％
> 2.151％0.002％
> 3.226％0.003％
> 1.075％0.032％
> 1.075％0.184％
> 1.075 % 0.263%
> 
> 输出
> 35.484％38.296％
> 48.387％0.124％
> 1.075％0.112％ 2.151
> ％0.051％
> 2.151％0.006％
> 1.075％0.056％
> 3.226％0.003％
> 1.075％0.005％
> 1.075％0.032％
> 1.075％0.184％
> 2.151％0.002％
> 1.075％0.263％

您可以立即看到，输出的最后一行应该位于更高阶的某个位置。

而且我无法将整个数组输出到一个范围。没有显示错误，函数简单地退出。我很感激这方面的任何帮助。代码如下所示，再次感谢。

```
 Function larger(range1 As Range, range2 As Range)

    Dim Q() As Variant
    Dim x As Range, y As Range
    Dim i As Integer, j As Integer
    Dim varTemp(1 To 2) As Variant

    Q = Range(range1.address, range2.address)
    ReDim Q(1 To UBound(Q, 1), 1 To UBound(Q, 2))

    j = 1
    i = 1
    While i < UBound(Q, 1)
        For Each x In range1
            While j < UBound(Q, 2)
                Q(i, j) = x
                j = j + 1
                Q(i, j) = range2(i)
            Wend

            i = i + 1
            j = 1
        Next
    Wend

 ' Bubble sort  - first with the 2nd col and then the 1st col

 '2nd col
    For i = LBound(Q) To UBound(Q) - 1

            If Q(i, 2) < Q(i + 1, 2) Then

                For j = 1 To 2
                    varTemp(j) = Q(i, j)
                    Q(i, j) = Q(i + 1, j)
                    Q(i + 1, j) = varTemp(j)
                Next j
            End If
        Next

   '1st col
    For i = LBound(Q) To UBound(Q) - 1
          If Q(i, 1) < Q(i + 1, 1) Then
            For j = 1 To 2

                varTemp(j) = Q(i, j)
                Q(i, j) = Q(i + 1, j)
                Q(i + 1, j) = varTemp(j)
            Next j
            End If
        Next

  j = 1
 For i = LBound(Q, 1) To UBound(Q, 1)
    MsgBox (Q(i, j) & " " & Q(i, j + 1))

 Next
    MsgBox ("end")

Range("P3:Q14") = Q         'Not writing entire queue into specified range

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:43:22.063

首先，要对范围进行排序，最简单的方法是使用 Excel 内置的 Sort 方法！因此，试试这个方法：

```
Sub SortRange(rng As Range)
    rng.Sort rng.Resize(, 1).Offset(, 1), xlAscending, rng.Resize(, 1)
End Sub 
```

你可以这样称呼它：`SortRange Range("A1:B12")`

如果您想自己对它进行排序以迎合某些专业，这里是冒泡排序：

```
Sub Sort(rng As Range)
    Dim varValues As Variant
    Dim i As Long, j As Long

    varValues = rng.Cells

    For i = 1 To UBound(varValues, 1)
        For j = i + 1 To UBound(varValues, 1)
            Select Case varValues(i, 2)
                Case Is > varValues(j, 2): subSwap varValues, i, j
                Case varValues(j, 2):
                    If varValues(i, 1) > varValues(j, 1) Then subSwap varValues, i, j
            End Select
        Next j
    Next i

    rng.Cells = varValues
End Sub

Private Sub subSwap(varValues As Variant, i As Long, j As Long)
    Dim varTemp As Variant
    Dim k As Long

    For k = 1 To UBound(varValues, 2)
        varTemp = varValues(i, k)
        varValues(i, k) = varValues(j, k)
        varValues(j, k) = varTemp
    Next
End Sub 
```

查看您的代码，我注意到了一些事情（这就是为什么我从头开始重新制作而不是“修复”您的代码）：

*   而不是`Range(range1.address, range2.address)`你可以使用`Range(range1, range2)`，或者事件更好，将其声明为一个完整的范围（例如 Range("A1:B12")` 直接。此外，使用 range1.Resize(,2) 将调整大小为两列范围
*   您的整个第一个循环似乎有点多余并且可能是错误的（至少您总是将 range1 中的值分配给所有列）。通常，您可以使用`varArray = YourRange.Cells`. 无需重新调整。
*   在冒泡排序中，您需要在第一个循环中嵌套要检查的列的检查。否则，当首先要检查的列有更多具有相同值的 2 行时，您可能会得到错误的结果
*   将数组分配回范围时，最好分配给`Range.Cells`. 此外，请确保范围具有相同的维度。
*   最后但并非最不重要的一点是，您使您的子灵活，即允许任何参数 - 但然后将结果分配给硬编码范围。当您使用其他范围调用它时，这将失败 - 或者您的工作簿结构发生变化！也更好地灵活处理（例如使用 `Range("NamedRangeName").Resize(UBound(Q, 1), UBound(Q,2)).Cells = Q

# asp.net-mvc - Signalr 1.0.1 跨域 404 错误

> ID：15565887
> 
> 赞同：2
> 
> 时间：2013-03-22T08:32:48.740
> 
> 标签：asp.net-mvc, asp.net-mvc-4, cross-domain, signalr, signalr-hub

我对 Signalr 跨域使用有疑问。我在一个解决方案中有三个不同的项目（应用程序），并使用信号器在它们之间启用聊天功能。我有与其他三个应用程序分开的聊天项目。

*这是其中的代码：*

**中心**

```
[HubName("ChatHub")]
public class ChatHub : Hub
 {
    public void Send(PorukaViewModel message)
     {
        ..do some code

        Clients.All.addMessage(
           ... // returns feedback to clients
        );
     }
 } 
```

**全球ASAX**

```
protected void Application_Start()
        {
            RouteTable.Routes.MapHubs(new HubConfiguration() { EnableCrossDomain = true });
        } 
```

*这是来自我的客户应用程序的代码，*

**控制器**

```
string chatUrl = System.Configuration.ConfigurationManager.AppSettings["ChatUrl"] + "/signalr/hubs";

var connection = new HubConnection(chatUrl, useDefaultUrl: false);
IHubProxy myHub = connection.CreateHubProxy("ChatHub");

connection.Start().ContinueWith(task =>
{
  if (task.IsFaulted)
  {
    //... I log error and stop connection
    connection.Stop();
  }

  message = "some message";
  myHub.Invoke("Send", message).Wait();
    connection.Stop();
}); 
```

这一切在我的本地主机上运行良好，但是当我在 IIS 上部署它时，出现以下错误`connection.Start()`：

> System.Net.WebException：远程服务器返回错误：（404）未找到。在 System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 在 Microsoft.AspNet.SignalR.Client.Http.HttpHelper.<>c__DisplayClass2.b__0(IAsyncResult ar) 在 System.Threading.Tasks.TaskFactory `1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction，操作`1 endAction, Task`1 承诺，布尔需要同步）

我浏览了 stackoverflow 上的所有问题和答案，但找不到任何对我有帮助的问题。

我究竟做错了什么？

***笔记**

使用 jQuery，我修改了 hubs.js 并更改了以下代码：

```
var signalrUrl = $("#chatUrl").val() + '/signalr';
...
signalR.hub = $.hubConnection(signalrUrl, { useDefaultPath: false }); 
```

并在我的通信视图中使用它，这在 localhost 和 IIS 上都可以正常工作。

也许问题出在这条线上？

> signalR.hub = $.hubConnection(signalrUrl, { useDefaultPath: false });

在原来的 /signalr/hubs 中是这样的：

> signalR.hub = $.hubConnection("/signalr", { useDefaultPath: false });

我怎样才能从控制器做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:07:24.183

此代码不正确：

`string chatUrl = System.Configuration.ConfigurationManager.AppSettings["ChatUrl"] + "/signalr/hubs";`

/SignalR/Hubs 指向 Javascript 代理。

/signalr 是连接端点，所以代码应该是：

`string chatUrl = System.Configuration.ConfigurationManager.AppSettings["ChatUrl"];`

由于 .NET 客户端会自动附加默认的 /signalr URL。

更多关于这里的文档[https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs#hubconnection-api](https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs#hubconnection-api)

# jquery - 通过 MVC3 上的 Ajax 请求调用 jqgrid 时出错：错误 80020101

> ID：15565888
> 
> 赞同：0
> 
> 时间：2013-03-22T08:32:51.687
> 
> 标签：jquery, asp.net-mvc-3

以下代码抛出错误，例如“由于错误 80020101 无法完成操作”

在文件上`jquery-1.8.3.js`：

```
<script language="javascript" type="text/javascript">

    $(document).ready(function () {
        var Details = '@Url.Content("~/Controller/ActionResult1?id=")';

        var id= $("#id").val();
        $('#pager').hide();

        Details = Details + id;

        alert(PropertyDetails);
        $("#list").jqGrid({

            url: Details,
            datatype: 'xml',
            cache: false,
            mtype: 'GET',
            width: 600,
            height: 234,
            colNames: ['Name', 'Address', 'Type'],
            colModel: [
            { name: 'Name', index: 'Name', width: 20, xmlmap: 'Name' },
            { name: 'Address', index: 'Address', width: 20, xmlmap: 'Address' },
            { name: 'Type', index: 'Type', width: 20, xmlmap: 'Type' },
            ],

            xmlReader: { repeatitems: false },
            pager: '#pager',
            rowNum: 10,
            sortname: 'invid',
            sortorder: 'desc',
            viewrecords: true,
            gridview: true,
            loadonce: true,
            shrinkToFit: true,
            scroll: false,
            altRows: true,
            loadComplete: function () {
                if ($('#list').getGridParam('records') > 10) {
                    $('#pager').show();
                }
            }

        });

    });

    </script>

<table id="list"><tr><td/></tr></table> 
<div id="pager"></div>  

my controller side.

 public ActionResult ActionResult1(string id)
        {
// code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:43:36.033

像这样修改脚本：

```
<script language="javascript" type="text/javascript">

    $(document).ready(function () {
         var Details = '@Url.Content("~/Controller/ActionResult1?id=';

         var id= $("#id").val();
         $('#pager').hide();

         Details = Details + id+'")';

        alert(PropertyDetails);
        $("#list").jqGrid({

            url: Details,
            datatype: 'xml',
            cache: false,
            mtype: 'GET',
            width: 600,
            height: 234,
            colNames: ['Name', 'Address', 'Type'],
            colModel: [
            { name: 'Name', index: 'Name', width: 20, xmlmap: 'Name' },
            { name: 'Address', index: 'Address', width: 20, xmlmap: 'Address' },
            { name: 'Type', index: 'Type', width: 20, xmlmap: 'Type' },
            ],

            xmlReader: { repeatitems: false },
            pager: '#pager',
            rowNum: 10,
            sortname: 'invid',
            sortorder: 'desc',
            viewrecords: true,
            gridview: true,
            loadonce: true,
            shrinkToFit: true,
            scroll: false,
            altRows: true,
            loadComplete: function () {
                if ($('#list').getGridParam('records') > 10) {
                    $('#pager').show();
                }
            }

        });

    });

    </script> 
```

# python - Python，将一个文件添加到另一个文件中

> ID：15565894
> 
> 赞同：-3
> 
> 时间：2013-03-22T08:33:40.870
> 
> 标签：python, overwrite

我必须定义一个函数：`save_file(filename, new_list)`它接受一个文件名和一个新列表，并以正确的格式将该列表写入文件。

所以，例如，

```
save_file(’file.txt’, load_file(’file.txt’)) 
```

（`load_file`是打开和读取文件的预定义函数）

应该用完全相同的内容覆盖新列表。

我不知道该怎么做，有什么想法吗？

load_file 函数似乎可以工作，但似乎无法使 save_file 函数正常工作。

这是我到目前为止所拥有的：

到目前为止我有这个：

```
def load_file(filename):
f = open(filename, 'Ur')
 for line in f:
    print line

f.close()

def save_file(filename, new_list):
with open(new_list, 'Ur') as f1:
    with open(filename, 'w') as f2:
        f2.write(f1.read()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:29:28.203

由于`new_list`显然是行列表，而不是文件名，因此您不需要`open`ing 和`read`ing 它的所有内容。而且您也不能保存在单个`write`.

但你*几乎*可以这么简单地做到这一点。

您没有指定其中的行是否`new_list`仍有换行符。让我们首先假设他们这样做。所以，你所要做的就是：

```
def save_file(filename, new_list):
    with open(filename, 'w') as f:
        f.write(''.join(new_list)) 
```

… 或者 …：

```
def save_file(filename, new_list):
    with open(filename, 'w') as f:
        f.writelines(new_list) 
```

但是你的老师可能期待这样的事情：

```
def save_file(filename, new_list):
    with open(filename, 'w') as f:
        for line in new_list:
            f.write(line) 
```

如果换行符被去掉了，所以我们必须把它们加回来怎么办？那么前两种方法有点复杂，但第三种方法仍然很容易：

```
def save_file(filename, new_list):
    with open(filename, 'w') as f:
        f.write('\n'.join(new_list) + '\n')

def save_file(filename, new_list):
    with open(filename, 'w') as f:
        f.writelines(line + '\n' for line in new_list)

def save_file(filename, new_list):
    with open(filename, 'w') as f:
        for line in new_list:
            f.write(line + '\n') 
```

* * *

与此同时，你还*没有*开始`load_file`工作。它应该返回一个行列表，但它不返回任何东西（或者，更确切地说，它返回`None`）。`print`ing 有些东西只是打印出来供用户查看，它不存储任何东西以供以后使用。

你想要这样的东西：

```
def load_file(filename):
    lines = []
    with open(filename, 'Ur') as f:
        for line in f:
            lines.append(line)
    return lines 
```

但是，有一种更简单的方法来编写它。如果你能做到`for line in f:`，那么`f`就是某种可迭代的。它与列表几乎是一样的——如果你想把它变成一个实际的列表，那很简单：

```
def load_file(filename):
    with open(filename, 'Ur') as f:
        return list(f) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:15:16.280

```
def save_file(filename, new_list):
    with open(new_list, 'r') as a:
        with open(filename, 'w') as b:
            b.write(a.read()) 
```

只是对 SaltChicken 的回答稍作调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:16:25.740

使用`print >>`使其简单：

```
>>> with open('/src/file', 'r') as f1, open('/dst/file', 'w') as f2:
...      print >> f2, f1.read() 
```

灵感来自[此代码的含义：“print >> sys.stderr”](https://stackoverflow.com/questions/1987626/what-does-this-code-mean-print-sys-stderr)。

# c# - DataGridView 问题

> ID：15565895
> 
> 赞同：0
> 
> 时间：2013-03-22T08:33:47.183
> 
> 标签：c#, .net, winforms, datagridview

我有一个带有自定义列、单元格和编辑控件的网格视图。

问题出在我的编辑控件上。它不会触发返回键，但会找到其他键。

我注意到编辑单元格的默认提交操作是输入。

即使我处于 EditOnEnter 模式，它仍然不会触发。

```
switch (keyData & Keys.KeyCode)
        {
            case Keys.Enter:
                return true;
                break;
            default:
                return !dataGridViewWantsInputKey;
        } 
```

我需要使用回车，因为我需要在编辑模式单元格中弹出搜索不存在的项目。

# c# - ObjectListView 显示图标

> ID：15565899
> 
> 赞同：4
> 
> 时间：2013-03-22T08:34:01.527
> 
> 标签：c#, icons, objectlistview

试图在 ObjectListview 中放置图标，这是我应该放置图标的代码：

```
objectListView1.SmallImageList = imageList1;

        deleteColumn.IsEditable = true;
        deleteColumn.ImageGetter = delegate
        {
            return 0;
        };
        deleteColumn.AspectGetter = delegate
        {
            return "Delete";
        }; 
```

imageList1 已经有一个图像，这段代码应该在“删除”旁边放了一个图标，但它根本没有出现，翻遍了食谱和谷歌，我仍然不知道。谁能帮我？

如果需要，这是完整的表单代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Security.Cryptography;
using System.IO;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
    public Form1()
    {
        InitializeComponent();
        objectListView1.AllowDrop = true;
        objectListView1.DragEnter += new DragEventHandler(objectListView1_DragEnter);
        objectListView1.DragDrop += new DragEventHandler(objectListView1_DragDrop);
        objectListView1.CellEditActivation = BrightIdeasSoftware.ObjectListView.CellEditActivateMode.SingleClick;
        objectListView1.CellEditStarting += deleteItems;
        objectListView1.SmallImageList = imageList1;

        deleteColumn.IsEditable = true;
        deleteColumn.ImageGetter = delegate
        {
            return 0;
        };
        deleteColumn.AspectGetter = delegate
        {
            return "Delete";
        };
    }

    private void objectListView1_DragEnter(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(DataFormats.FileDrop))
        {
            e.Effect = DragDropEffects.Copy;
        }
        else
        {
            e.Effect = DragDropEffects.None;
        }
    }

    private void objectListView1_DragDrop(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(DataFormats.FileDrop, true))
        {
            string[] droppedFiles = (string[]) e.Data.GetData(DataFormats.FileDrop);
            foreach (string path in droppedFiles)
            {
                if (File.Exists(path))
                {
                    FileObject fo = new FileObject(path, "added later"); 
                    objectListView1.AddObject(fo);
                }
            }
        }
    }

    private void deleteItems(object sender, BrightIdeasSoftware.CellEditEventArgs e)
    {
        if(e.Column == deleteColumn)
        {
            e.Cancel = true;
            objectListView1.RemoveObject(e.RowObject);
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T08:53:09.793

为了使图像出现在列中的文本旁边，您必须：

1.  连接`ObjectListView`到一个`ImageList`（使用`SmallImageList`属性）；
2.  `ImageGetter`为必须显示图像的列安装委托；
3.  确保`ImageList`.

完成此操作后，将出现图像（我刚刚测试过）。

不过，有一个问题。根据您的问题，我怀疑“删除”列可能不是`ObjectListView`. 上述步骤仅允许您在第一列中显示图像。对于后续列，您必须将`ShowImagesOnSubItems`属性设置为 True。会是这样吗？

# serialization - 如何在 Jackson 中使用自定义 id 序列化程序？

> ID：15565900
> 
> 赞同：2
> 
> 时间：2013-03-22T08:34:02.117
> 
> 标签：serialization, jackson

我正在使用 Jackson 2.1.4 并希望序列化扩展 Event 类的对象集合，并且 JSON 必须包含用于多态目的的类名。我在 Event 上放了一个@JsonTypeInfo 注释，但不幸的是我不能使用 CLASS 作为策略，因为我的对象实例化模式是“new FooEvent(){{bar=someValue;}}”，它将创建匿名内部类。我想将“FooEvent”作为 JSON 中的类型，而不是匿名内部类。

看来我需要这样做：

```
@JsonTypeInfo(use= JsonTypeInfo.Id.CUSTOM, include= JsonTypeInfo.As.PROPERTY, property="type") 
```

但是如何注册我自己的自定义 id 序列化器来输出类的名称呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:46:55.140

想出了如何解决这个问题：基本上在与@JsonTypeInfo 相同的类上添加一个@JsonTypeIdResolver 注释，然后实现一个它可以引用的解析器。[这](https://github.com/rickardoberg/stuff/blob/master/src/main/java/com/github/rickardoberg/cqrs/memory/CustomClassIdResolver.java)是我的样子。它本质上只是删除匿名内部类（如果存在）。

# php - 如何在 CakePHP 中存储请求特定的“全局”变量

> ID：15565902
> 
> 赞同：0
> 
> 时间：2013-03-22T08:34:19.447
> 
> 标签：php, cakephp, global-variables

我想设置一个可在 CakePHP 应用程序中访问的全局变量（在控制器、模型和视图中）。对于进入应用程序的每个请求，变量值可能不同。设置它的最佳方法是什么？

我想到的一些选择：

1.  在 bootstrap.php 中使用 Configure::write 来设置这个变量，并在任何地方使用 Configure::read 来读取值。我不确定这是否是最佳选择，因为我找不到任何关于 Configure 数组范围的明确文档。看来 Configure 通常用于站点范围/应用程序范围的变量，因此不确定每个 HTTP 请求是否都有自己的 Configure 数组。

2.  将此值写入 bootstrap.php 中的 $GLOBALS 数组。这是一个好主意吗？想不出任何缺点，但似乎不鼓励使用 $GLOBALS。

3.  以某种方式从 bootstrap.php 导出或设置一个全局变量，该变量的范围是请求和线程安全的，并且在该请求的应用程序中可用。不知道如何/如果这是可能的。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:56:33.790

在这里配置是你的朋友：

在 AppController 中：

```
public function beforeFilter() {

    parent::beforeFilter();
    Configure::write('you_variable', 'your_value');

} 
```

您可以在应用程序（控制器、模型、视图）中的任何位置读取值

```
Configure::read('your_variable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:49:54.417

您可以在 AppController 中有公共变量，并在 beforeFilter() 函数中为其赋值。像这样的东西

```
class AppController extends Controller {

    /**
     * The dependency components needed
     * @var array An array of component names
     */
    public $components = array(
        'Cookie',
        'Session',
        'Auth',
    );

    /**
     * The dependency Models needed
     * @var array An array of model names
    */
    public $uses = array(
        'User'
        );

    /**
     * Your variable
    */
    public $yourVariable = null;

    public function beforeFilter() {
        parent::beforeFilter();
        $this->yourVariable = 'Your request specific data';            
    } 
```

# matlab - matlab gui中回调函数的结果

> ID：15565909
> 
> 赞同：1
> 
> 时间：2013-03-22T08:34:46.923
> 
> 标签：matlab, user-interface

我在 matlab 中创建了一个带有几个按钮的 GUI。单击时，每个按钮执行特定的功能。现在我想显示函数中正在执行的计算，以显示在 GUI 的静态文本框中。那可能吗？我可以通过删除语句末尾的分号 (;) 在命令窗口中显示它，但我希望它像日志一样显示在 GUI 中。

现在，当我单击“匹配”按钮时，会调用以下函数，我想在 GUI 的文本框中显示它是否匹配。那可能吗？

```
function matchin
[image1, pathname]= uigetfile('*.bmp','Open An image');
Directory = fullfile ('F:','matlab','bin');
D = dir(fullfile(Directory,'*.bmp'));
%imcell = {D.name}';
for i = 1:numel(D)
   if strcmp(image1,D(i).name)
       disp('matched');
   else
       disp('not matched');
   end
end; 
```

我用答案中指定的代码替换了代码。在不使用文本框的情况下，当我选择第二个文件时，matlab 命令窗口中的输出是

```
not matched
matched
not matched
not matched 
not matched 
```

但是，如果我使用静态文本框，则只显示最后一行。如何完全显示所有 5 行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:00:35.340

是的，你可以这么做。

一个好的做法是使用函数 guidata 保存一个包含所有 GUI 元素句柄的结构。有关这方面的更多信息，请参阅[此链接](http://www.mathworks.se/help/matlab/ref/guidata.html)。

然后在您的回调中，您可以检索此结构，例如：

```
handles = guidata(gcbo); 
```

然后你可以通过替换来设置你想要的文本框的值

```
if strcmp(image1,D(i).name)
   disp('matched');
else
   disp('not matched');
end 
```

和：

```
if strcmp(image1,D(i).name)
   set(handles.handle_of_textbox,'String','matched');
else
   set(handles.handle_of_textbox,'String','not matched');
end 
```

# ios6 - Xcode 4.6 中的 AePub 阅读器错误

> ID：15565910
> 
> 赞同：1
> 
> 时间：2013-03-22T08:34:53.807
> 
> 标签：ios6, epub, xcode4.6, libxml2

我下载了一个名为 AePubReader 的开源 epub 阅读器，它工作正常。但是当我尝试在 xcode 4.6 中与我的应用程序集成时，由于 ARC，它显示了很多错误。所以我选择了这些文件并设置了“-fno-objc-arc”标志。但是在那之后它显示像`#include <libxml/tree.h> not found![this is the error i got ][1]`
$(SDK_DIR)"/usr/include/libxml2 这样的错误我添加了这一行然后这个问题就解决了，但是之后它显示了像 "Apple Mach-O Linker Error" 这样的 "43 Errors" 大多数它们与 xml 文件有关

我的错误信息

架构 i386 的未定义符号：“_htmlParseDoc”，引用自：-[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o

"_htmlReadMemory"，引用自：-[CXHTMLDocument initWithXHTMLData:encoding:options:error:] in CXHTMLDocument.o "_xmlAddChild"，引用自：-[CXMLDocument(CXMLDocument_CreationExtensions) addChild:] in CXMLDocument_CreationExtensions.o -[CXMLElement(CXMLElement_CreationExtensions) addChild :] 在 CXMLElement_CreationExtensions.o -[CXMLElement(CXMLElement_CreationExtensions) setStringValue:] 在 CXMLElement_CreationExtensions.o "_xmlAddPrevSibling"，引用自：-[CXMLDocument(CXMLDocument_CreationExtensions) insertChild:atIndex:] 在 CXMLDocument_CreationExtensions.o "_xmlCopyNode"，引用自：-[ CXMLNode copyWithZone:] 在 CXMLNode.o

```
"_xmlDocDumpFormatMemory", referenced from:
  -[CXMLDocument description] in CXMLDocument.o 
```

"_xmlDocDumpMemory"，引用自：-[CXMLDocument XMLDataWithOptions:] in CXMLDocument.o "_xmlDocGetRootElement"，引用自：-[CXMLDocument initWithData:encoding:options:error:] in CXMLDocument.o -[CXMLDocument rootElement] in CXMLDocument.o" _xmlDocSetRootElement"，引用自：+[CXMLNode(CXMLNode_CreationExtensions) documentWithRootElement:] in CXMLNode_CreationExtensions.o -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o "_xmlFree"，引用自：-[CXMLDocument XMLDataWithOptions:] in CXMLDocument.o -CXMLDocument.o“_xmlFreeDoc”中的[CXMLDocument description]，引用自：-CXMLDocument.o“_xmlFreeNode”中的[CXMLDocument dealloc]，引用自：CXMLNode 中的-[CXMLNode dealloc]。o "_xmlGetCharEncodingName"，引用自：-[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o "_xmlGetLastError"，引用自：-[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o -[CXMLDocument initWithXMLString:options:错误：] 在 CXMLDocument.o -[CXMLDocument initWithData:encoding:options:error:] 在 CXMLDocument.o

```
"_xmlNewDoc", referenced from:
  +[CXMLNode(CXMLNode_CreationExtensions) document] in CXMLNode_CreationExtensions.o
  +[CXMLNode(CXMLNode_CreationExtensions) documentWithRootElement:] in CXMLNode_CreationExtensions.o 
```

“_xmlNewNode”，引用自：+[CXMLNode(CXMLNode_CreationExtensions) elementWithName:] in CXMLNode_CreationExtensions.o +[CXMLNode(CXMLNode_CreationExtensions) elementWithName:URI:] in CXMLNode_CreationExtensions.o +[CXMLNode(CXMLNode_CreationExtensions) elementWithName:stringValue:] in CXMLNode_CreationExtensions.o "_xmlNewNs"，引用自：+[CXMLNode(CXMLNode_CreationExtensions) elementWithName:URI:] in CXMLNode_CreationExtensions.o "_xmlNewPI"，引用自：+[CXMLNode(CXMLNode_CreationExtensions) processingInstructionWithName:stringValue:] in CXMLNode_CreationExtensions.o "_xmlNewText"，引用自: -[CXMLElement(CXMLElement_CreationExtensions) setStringValue:] in CXMLElement_CreationExtensions.o "_xmlNodeDumpOutput"，引用自：-[CXMLNode XMLStringWithOptions:] in CXMLNode.o "_xmlNodeSetContent"，引用自：-[CXMLNode(CXMLNode_CreationExtensions) setStringValue:] in CXMLNode_CreationExtensions.o "_xmlOutputBufferClose"，引用自：-[CXMLNode XMLStringWithOptions:] in CXMLNode.o "_xmlOutputBufferCreateIO" ，引用自：-[CXMLNode XMLStringWithOptions:] in CXMLNode.o "_xmlOutputBufferFlush"，引用自：-[CXMLNode XMLStringWithOptions:] in CXMLNode.o "_xmlParseDoc"，引用自：-[CXMLDocument initWithXMLString:options:error:] in CXMLDocument .o "_xmlReadMemory"，引用自：-[CXMLDocument initWithData:encoding:options:error:] in CXMLDocument.o "_xmlResetLastError"，引用自：-[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o -[CXMLDocument initWithXMLString:options:error:] in CXMLDocument.o -[CXMLDocument initWithData:encoding:options:error:] in CXMLDocument.o "_xmlSetNs"，引用自: -[CXMLElement(CXMLElement_CreationExtensions) addNamespace:] in CXMLElement_CreationExtensions.o "_xmlStrcmp"，引用自： -[CXMLElement elementsForName:] in CXMLElement.o -[CXMLElement elementsForLocalName:URI:] in CXMLElement.o -[CXMLElement attributeForName:] in CXMLElement.o -[CXMLElement attributeForLocalName:URI:] in CXMLElement.o -[CXMLElement namespaceForPrefix:] in CXMLElement.o -[CXMLElement resolvePrefixForNamespaceURI:] in CXMLElement.o "_xmlXPathEvalExpression"，引用自：-[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o -[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] in CXMLNode_XPathExtensions.o -[CXMLNode nodesForXPath:error:] in CXMLNode.o "_xmlXPathFreeContext"，引用自： -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o -[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] in CXMLNode_XPathExtensions.o -[CXMLNode nodesForXPath:error:] in CXMLNode.o "_xmlXPathFreeObject"，引用自： -[CXHTMLDocument initWithXHTMLString:options:error:] 在 CXHTMLDocument.o -[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] 在 CXMLNode_XPathExtensions.o -[CXMLNode nodesForXPath:error:] 在 CXMLNode。o “_xmlXPathNewContext”，引用自： -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o -[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] in CXMLNode_XPathExtensions.o -[CXMLNode nodesForXPath:error:] in CXMLNode。 o “_xmlXPathRegisterNs”，引用自：-[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] in CXMLNode_XPathExtensions.o ld：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 - v 查看调用）o -[CXMLNode nodesForXPath:error:] in CXMLNode.o "_xmlXPathRegisterNs"，引用自：-[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] in CXMLNode_XPathExtensions.o ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）o -[CXMLNode nodesForXPath:error:] in CXMLNode.o "_xmlXPathRegisterNs"，引用自：-[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] in CXMLNode_XPathExtensions.o ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

“_htmlParseDoc”，引用自：

```
 -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o 
```

“_htmlReadMemory”，引用自：

```
 -[CXHTMLDocument initWithXHTMLData:encoding:options:error:] in CXHTMLDocument.o 
```

“_xmlAddChild”，引用自：

```
 -[CXMLDocument(CXMLDocument_CreationExtensions) addChild:] in CXMLDocument_CreationExtensions.o

  -[CXMLElement(CXMLElement_CreationExtensions) addChild:] in CXMLElement_CreationExtensions.o

  -[CXMLElement(CXMLElement_CreationExtensions) setStringValue:] in CXMLElement_CreationExtensions.o 
```

“_xmlAddPrevSibling”，引用自：

```
 -[CXMLDocument(CXMLDocument_CreationExtensions) insertChild:atIndex:] in CXMLDocument_CreationExtensions.o 
```

“_xmlCopyNode”，引用自：

```
 -[CXMLNode copyWithZone:] in CXMLNode.o 
```

“_xmlDocDumpFormatMemory”，引用自：

```
 -[CXMLDocument description] in CXMLDocument.o 
```

“_xmlDocDumpMemory”，引用自：

```
 -[CXMLDocument XMLDataWithOptions:] in CXMLDocument.o 
```

“_xmlDocGetRootElement”，引用自：

```
 -[CXMLDocument initWithData:encoding:options:error:] in CXMLDocument.o

  -[CXMLDocument rootElement] in CXMLDocument.o 
```

“_xmlDocSetRootElement”，引用自：

```
 +[CXMLNode(CXMLNode_CreationExtensions) documentWithRootElement:] in CXMLNode_CreationExtensions.o

  -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o 
```

“_xmlFree”，引用自：

```
 -[CXMLDocument XMLDataWithOptions:] in CXMLDocument.o

  -[CXMLDocument description] in CXMLDocument.o 
```

“_xmlFreeDoc”，引用自：

```
 -[CXMLDocument dealloc] in CXMLDocument.o 
```

“_xmlFreeNode”，引用自：

```
 -[CXMLNode dealloc] in CXMLNode.o 
```

“_xmlGetCharEncodingName”，引用自：

```
 -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o 
```

“_xmlGetLastError”，引用自：

```
 -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o

  -[CXMLDocument initWithXMLString:options:error:] in CXMLDocument.o

  -[CXMLDocument initWithData:encoding:options:error:] in CXMLDocument.o 
```

“_xmlNewDoc”，引用自：

```
 +[CXMLNode(CXMLNode_CreationExtensions) document] in CXMLNode_CreationExtensions.o

  +[CXMLNode(CXMLNode_CreationExtensions) documentWithRootElement:] in CXMLNode_CreationExtensions.o 
```

“_xmlNewNode”，引用自：

```
 +[CXMLNode(CXMLNode_CreationExtensions) elementWithName:] in CXMLNode_CreationExtensions.o

  +[CXMLNode(CXMLNode_CreationExtensions) elementWithName:URI:] in CXMLNode_CreationExtensions.o

  +[CXMLNode(CXMLNode_CreationExtensions) elementWithName:stringValue:] in CXMLNode_CreationExtensions.o 
```

“_xmlNewNs”，引用自：

```
 +[CXMLNode(CXMLNode_CreationExtensions) elementWithName:URI:] in CXMLNode_CreationExtensions.o 
```

“_xmlNewPI”，引用自：

```
 +[CXMLNode(CXMLNode_CreationExtensions) processingInstructionWithName:stringValue:] in CXMLNode_CreationExtensions.o 
```

“_xmlNewText”，引用自：

```
 -[CXMLElement(CXMLElement_CreationExtensions) setStringValue:] in CXMLElement_CreationExtensions.o 
```

“_xmlNodeDumpOutput”，引用自：

```
 -[CXMLNode XMLStringWithOptions:] in CXMLNode.o 
```

“_xmlNodeSetContent”，引用自：

```
 -[CXMLNode(CXMLNode_CreationExtensions) setStringValue:] in CXMLNode_CreationExtensions.o 
```

“_xmlOutputBufferClose”，引用自：

```
 -[CXMLNode XMLStringWithOptions:] in CXMLNode.o 
```

“_xmlOutputBufferCreateIO”，引用自：

```
 -[CXMLNode XMLStringWithOptions:] in CXMLNode.o 
```

“_xmlOutputBufferFlush”，引用自：

```
 -[CXMLNode XMLStringWithOptions:] in CXMLNode.o 
```

“_xmlParseDoc”，引用自：

```
 -[CXMLDocument initWithXMLString:options:error:] in CXMLDocument.o 
```

“_xmlReadMemory”，引用自：

```
 -[CXMLDocument initWithData:encoding:options:error:] in CXMLDocument.o 
```

“_xmlResetLastError”，引用自：

```
 -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o

  -[CXMLDocument initWithXMLString:options:error:] in CXMLDocument.o

  -[CXMLDocument initWithData:encoding:options:error:] in CXMLDocument.o 
```

“_xmlSetNs”，引用自：

```
 -[CXMLElement(CXMLElement_CreationExtensions) addNamespace:] in CXMLElement_CreationExtensions.o 
```

“_xmlStrcmp”，引用自：

```
 -[CXMLElement elementsForName:] in CXMLElement.o

  -[CXMLElement elementsForLocalName:URI:] in CXMLElement.o

  -[CXMLElement attributeForName:] in CXMLElement.o

  -[CXMLElement attributeForLocalName:URI:] in CXMLElement.o

  -[CXMLElement namespaceForPrefix:] in CXMLElement.o

  -[CXMLElement resolvePrefixForNamespaceURI:] in CXMLElement.o 
```

“_xmlXPathEvalExpression”，引用自：

```
 -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o

  -[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] in CXMLNode_XPathExtensions.o

  -[CXMLNode nodesForXPath:error:] in CXMLNode.o 
```

“_xmlXPathFreeContext”，引用自：

```
 -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o

  -[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] in CXMLNode_XPathExtensions.o

  -[CXMLNode nodesForXPath:error:] in CXMLNode.o 
```

“_xmlXPathFreeObject”，引用自：

```
 -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o

  -[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] in CXMLNode_XPathExtensions.o

  -[CXMLNode nodesForXPath:error:] in CXMLNode.o 
```

“_xmlXPathNewContext”，引用自：

```
 -[CXHTMLDocument initWithXHTMLString:options:error:] in CXHTMLDocument.o

  -[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] in CXMLNode_XPathExtensions.o

  -[CXMLNode nodesForXPath:error:] in CXMLNode.o 
```

“_xmlXPathRegisterNs”，引用自：

```
 -[CXMLNode(CXMLNode_NamespaceExtensions) nodesForXPath:namespaceMappings:error:] in CXMLNode_XPathExtensions.o 
```

ld：未找到体系结构 i386 的符号

clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T08:58:21.150

您必须将“libz.dylib”和“libxml2.dylib”添加到目标“Build Phases”中的“Link Binary With Libraries”项中。

# ubuntu - 在 Glassfish 3 上进行维护时如何临时重定向

> ID：15565913
> 
> 赞同：0
> 
> 时间：2013-03-22T08:34:56.830
> 
> 标签：ubuntu, glassfish, webserver, java-ee-6

当我对运行在 Glassfish 服务器上的应用程序进行维护时，我想将用户重定向到一个临时 URL。我不想仅仅为此更改我的服务器提供商的 DNS 配置，它必须更简单。当我重新部署或捣乱时，我可以从 Glassfish 3.1 内部控制的东西。

当 Glassfish 实例仍在运行时我可以做些什么来重定向，当我的 Glassfish 实例停止但 Ubuntu 服务器仍在运行时我可以做些什么。

在使用 Glassfish 和 Web 服务器进行维护时，重定向用户的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:24:30.490

如果您使用 Apache Web 服务器进行经典设置，其中 mod_jk / mod_proxy 与您的 Glassfish 服务器通信，那么一个简单的解决方案可能是将 503 HTTP 错误代码重定向到由您的 Apache Web 服务器提供的静态 HTML 文件。

# vba - 由于长数据类型导致的 VBA-Excel 溢出错误

> ID：15565915
> 
> 赞同：5
> 
> 时间：2013-03-22T08:34:59.203
> 
> 标签：vba, excel

这似乎太容易了，但我很绝望。

我需要做的是获取“D”列的**最后一个值**

**大量的数字**，例如。987654321，如果值只有两位数，代码就可以了。我只是无法确定问题所在。

```
Dim lastRow As Long
lastRow = Cells(Rows.Count, "D").End(xlUp).Value
Sheets("Sheet1").TxtBox1.Value = lastRow 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T08:54:08.130

就像我在评论中提到的那样，对于这么大的数字，您必须将其声明为双精度。

```
Dim lastRow As Double 
```

或者，由于您想将其存储在文本框中，您可以做两件事

1.  将其声明为字符串
2.  将其直接存储在文本框中。

    ```
    Option Explicit

    Sub Sample1()
        Dim lastRow As String

        With Sheets("Sheet1")
            lastRow = .Cells(.Rows.Count, "D").End(xlUp).Value
            .TextBox1.Value = lastRow
        End With
    End Sub

    Sub Sample2()
        With Sheets("Sheet1")
            .TextBox1.Value = .Cells(.Rows.Count, "D").End(xlUp).Value
        End With
    End Sub 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T08:49:28.393

Long 只能处理高达 2.1B 的值！对于任何更大的值，最好使用`Double`而不是`Long`

# android - ObjLoader.loadObj 不将输入流作为参数

> ID：15565917
> 
> 赞同：0
> 
> 时间：2013-03-22T08:35:04.623
> 
> 标签：android, libgdx

我正在使用 libgdx 0.9.8 并尝试将 .obj 文件加载为 Mesh。但是正如各种教程和文档中所指定的那样，它不`Stream`作为参数，而是要求 FileHandle。应该通过什么是因为版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:17:42.260

我目前正在使用此代码，但我仍在为纹理加载而苦苦挣扎：

```
 ObjLoader model = new ObjLoader();
     meshCar = model.loadObj(
             Gdx.files.internal("data/car_white.obj"), 
             Gdx.files.internal("data/car_white"),
             true
             ); 
```

# android - google play 如何从我们的手机捕获异常？

> ID：15565926
> 
> 赞同：2
> 
> 时间：2013-03-22T08:35:51.093
> 
> 标签：android, performance, google-play

我想知道 Google play 如何能够捕获它拥有的应用程序中发生的错误列表并将其显示给开发人员？

**背景：** 我们正在尝试复制像谷歌商店这样的应用程序？我们应该通过我们的应用程序维护一个企业应用程序的列表。我们想通过我们的应用程序实现一个异常捕获框架，该框架能够通过我们的应用程序列表捕获异常并将其显示和存储在后端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:50:06.570

我假设 Android 应用程序与 Google Play 市场相关联，因此当发生异常时，会将崩溃报告发送给它们。

一种可能的解决方案是让您的用户实现某种库，以便在您的市场上发布应用程序。该库应该只捕获异常并将崩溃报告发送到您的服务器（类似于 ACRA）。

虽然，作为开发人员，我认为这种方法不是一个好方法，除非你为开发人员提供了一些非常有前途的东西（比如应用可见性、推广等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:10:07.133

我不知道 Google Play 是如何做到的，但为了我的需要，我创建了自己的`java.lang.Thread.UncaughtExceptionHandler`：

```
class MyUncaughtExceptionHandler implements UncaughtExceptionHandler {
    private UncaughtExceptionHandler mDefaultUncaughtExceptionHandler;

    MyUncaughtExceptionHandler() {
        mDefaultUncaughtExceptionHandler = Thread.getDefaultUncaughtExceptionHandler();
    }

    @Override
    public void uncaughtException(Thread aThread, Throwable aThrowable) {
        // do your stuff
        mDefaultUncaughtExceptionHandler.uncaughtException(aThread, aThrowable);
    }
} 
```

并将其注册在`android.app.Application#onCreate`.

```
@Override
public void onCreate() {
    super.onCreate();
    Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler());
} 
```

# android - 将图像作为json条目发送android

> ID：15565928
> 
> 赞同：1
> 
> 时间：2013-03-22T08:36:04.783
> 
> 标签：android, json, imageview

我有一个要求，我将一个 json 文件发送到服务器，并且解析发生在服务器端。我已经创建了 json 文件的条目，现在我想将存储在 imageview 中的图像存储为 json 文件的条目。搜索了几个以前的帖子，但找不到确切的内容。任何指针对于以 json 格式存储图像以通过服务器发送都会有很大帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T08:41:53.823

如果您想将 Image 包含在您将在请求中发送的 JSON 对象中，**请将 Image 转换为 Base64 字符串**并将此字符串放入 JSON 对象中。

例如：

```
String encodedImage = Base64.encodeToString(byteArrayImage, Base64.DEFAULT); 
```

查看：

*   [如何将图像转换为 Base64 字符串？](https://stackoverflow.com/questions/4830711/how-to-convert-a-image-into-base64-string)
*   [在 Android 中将 png 或 jpg 图像转换为 Base64 字符串](https://stackoverflow.com/questions/3531408/convert-png-or-jpg-image-to-base64-string-in-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:40:26.800

尝试对图像进行 base64 编码（如下所示，Uri 是您的图像 - 但请注意：ImageView 没有用于 ImageUri 的 Getter，因此您必须自己存储它！）：

```
Uri uri = (Uri) extras.getParcelable(Intent.EXTRA_STREAM);

ContentResolver cr = getContentResolver();
InputStream is = cr.openInputStream(uri);

byte[] data = getBytesFromFile(is);

byte[] encoded_data = Base64.encodeBase64(data);
data_string = new String(encoded_data); 
```

现在您有了一个 base64 编码的字符串`data_string`，您可以将它与您的 JSON 请求一起发送。在服务器端，您只需解码字符串并保存图片。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T08:40:19.403

嗯，这是一种实验性的方法，但是您可以从位图中创建一个字节数组，然后使用该字节数组创建一个新字符串，然后将其发送到服务器。

但是，为什么不直接发送一个 POST 请求来保存图像，而不进行任何实验处理或解析呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-31T06:07:27.810

你有一个 ImageView

```
<ImageView
      android:layout_width = "300dp"
      android:layout_height = "300dp"
      android:id = "@+id/Plaatjeid"
      android:scaleType = "centerCrop"
    android:text = "@string/BerttxtPlaatje"
    android:layout_alignParentEnd="true"
/> 
```

在代码隐藏中

```
String plaatje="";
ImageView iv1 = (ImageView)findViewById(R.id.Plaatjeid);
    iv1.buildDrawingCache();
    Bitmap bitmap = iv1.getDrawingCache();
    ByteArrayOutputStream stream=new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.PNG, 90, stream);
    byte[] image=stream.toByteArray();
    plaatje = Base64.encodeToString(image, 0); 
```

然后你创建你的 Json 字符串

```
String mailMessage;
mailMessage="<?xml version='1.0'?>";
mailMessage=mailMessage + "<RiscNotification xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'";
mailMessage=mailMessage + "xmlns:xsd='htp://www.w3.org/2001/XMLSchema'>";
mailMessage = mailMessage + "        <mail To>"  + Mailto() + "</mail To>" ;//server7
mailMessage = mailMessage + "</RiskNotification>"; 
```

我有一个单独的类，我在其中发送它 将变量附加到类

```
GetMethodDemo JsonConnect = new GetMethodDemo();
JsonConnect.MailTo=  Mailto();
JsonConnect.Picture=plaatje;
JsonConnect.bertactivity=this;
JsonConnect.execute();//staat in AANHET BEGIN 
```

和我的班级

```
 package nl.yentel.finekinney;
    import java.io.BufferedReader;
    import java.io.InputStreamReader;
    import java.io.OutputStream;
    import java.net.HttpURLConnection;
    import java.net.URL;

    import android.app.Activity;
    import android.graphics.Bitmap;
    import android.os.AsyncTask;
    import android.view.Gravity;
    import android.widget.Toast;

    public class GetMethodDemo extends AsyncTask<String, Void, String> {
    String MailTo;
    String Picture;
    Activity bertactivity;
    Bitmap bm;

     public void BitMapFoto(Bitmap bitmap) {
        bm = bitmap;
    }

    //@Override
    protected String doInBackground(String... strings) {

          //http://geekonjava.blogspot.com/2014/03/upload-image-on-server-in-android-using.html

        String dBresultaat = "start";
        try {
            URL url = new URL("http://10.0.2.2:64489/Risico/Risico.asmx/sendMail");

            HttpURLConnection con = (HttpURLConnection) url.openConnection();
            con.setRequestMethod("POST");
            con.setRequestProperty("Content-Type", "application/json");
            con.setRequestProperty("Accept", "application/json");
            con.setDoOutput(true);
            String jsonInputString = "";
            jsonInputString = "{";
             jsonInputString = jsonInputString + "\"MailTo\": \"" + MailTo.toString() + "\",";
            jsonInputString = jsonInputString + "\"Picture\": \"" + Picture.toString() + "\""; 
             //if you take the Picture.toString in debug mode and put it in https://base64.guru/converter/decode/image you see the picture
              jsonInputString = jsonInputString + "}";

            try (OutputStream os = con.getOutputStream()) {
                byte[] input = jsonInputString.getBytes("utf-8");
                os.write(input, 0, input.length);
                int code = con.getResponseCode();
                System.out.println(code);

                try (BufferedReader br = new BufferedReader(new InputStreamReader(con.getInputStream(), "utf-8"))) {
                    StringBuilder response = new StringBuilder();
                    String responseLine = null;
                    while ((responseLine = br.readLine()) != null) {
                        response.append(responseLine.trim());
                    }
                    System.out.println(response.toString());
                    return response.toString();
                }

            } catch (Exception e) {
                e.printStackTrace();
                return "catch twee";
            }
        } catch (Exception e) {
            e.printStackTrace();
            return "catch";
        }
    }

    @Override
    protected void onPreExecute() {
    }

    @Override
    protected void onPostExecute(String s) {
        // super.onPostExecute(s);
        Activity activity = new Bert().activity;
        Toast toast = Toast.makeText(bertactivity, s, Toast.LENGTH_LONG);
        toast.setGravity(Gravity.TOP | Gravity.CENTER_HORIZONTAL, 0, 0);
        toast.show();
    }
    } 
```

你应该在 Framework 4.0 中有你的 web 服务。框架 3.5 不起作用

和 web.config 显示

```
<configuration>

  <system.web.extensions>
    <scripting>
      <webServices>
        <jsonSerialization maxJsonLength="50000000"/>
      </webServices>
    </scripting>
  </system.web.extensions>  
 <system.web> 
```

我的网络方法看起来像这样

```
[WebMethod()]
public string sendMail(sstring MailTo, string Picture)
{      
    string Resultstring = "";
    int i;
    MailMessage theMessage;
    theMessage = new MailMessage();
    // look if there is an attempt to hack the server
    if ((MailBody.ToUpper()).IndexOf("SELECT") > 0 | (MailBody.ToUpper()).IndexOf("UPDATE") > 0)
    {
        Resultstring = "illegal string";
    }
    else
    {
        theMessage.From = new System.Net.Mail.MailAddress(ConfigurationManager.AppSettings["sender"]); // '"no-reply@taakmonitor.nl")
        try
        {
            theMessage.To.Add(new MailAddress(MailFrom)); // also send a mail to the sender
        }
        catch (Exception ex)
        {
            Resultstring = "Mail address "+ MailFrom + " not ok "; //ex.Message; // als het formaat van het mail adres niet goed is
            theMessage = null;
        }
        String FransGetsCopy = WebConfigurationManager.AppSettings["FransGetsCopy"];

        String[] ToWhom = NullSafeString(MailTo).Split(',');
        for (i = 0; i <= ToWhom.Length - 1; i++)
        {
            try
                {
                   theMessage.To.Add(new MailAddress(ToWhom[i]));
                }
            catch (Exception ex)
                {
                    Resultstring = Resultstring + " mail address " + ToWhom[i] + " not ok "; //ex.Message; // als het formaat van het mail adres niet goed is
                    theMessage = null;
                 }                
        }

        // there should also be a stylesheet
          string StyleText="";
        try
        {
            StyleText = "";
            var data = File.ReadAllText(Server.MapPath("~/App_Data/TextFile.txt"));
            StyleText = data.ToString();   
        }
        catch (Exception)
        {
            Resultstring = Resultstring + " No StyleText available. ";
        }
        theMessage.Subject = MailSubject;
        theMessage.IsBodyHtml = true;
        //the message is created in HTML with the style in the <head> and the MailBody in the body
        theMessage.Body = "<html>" + StyleText + "<body>" + MailBody + "</body></html>";

        // code copied from
        // https://www.codeproject.com/Tips/569532/Submit-Images-to-Web-Service-and-Get-Them-Back
        //in this piece of code I convert the Json picture data to a picture and attach it to the mail
        try
        {
            byte[] data = Convert.FromBase64String(Picture);
            var stream = new MemoryStream(data, 0, data.Length);
            System.Drawing.Image img = System.Drawing.Image.FromStream(stream);
            stream.Seek(0L, SeekOrigin.Begin);
            theMessage.Attachments.Add(new Attachment(stream, "Picture.png"));
            Resultstring = Resultstring +  " image OK";
        }
        catch (Exception ex)
        {
            Resultstring = Resultstring +  " image not OK";
        } 
        SmtpClient MessageObject = new SmtpClient();
        MessageObject.Host = ConfigurationManager.AppSettings["Host"];
        MessageObject.Port = Int32.Parse(ConfigurationManager.AppSettings["Port"]);
        MessageObject.EnableSsl = false;
        MessageObject.Credentials = new System.Net.NetworkCredential(ConfigurationManager.AppSettings["Username"], ConfigurationManager.AppSettings["Password"]);
        try
        {
            MessageObject.Send(theMessage);
            Resultstring = Resultstring +  " mail has been send.";
        }
        catch (Exception ex)
        {
            Resultstring = Resultstring +  " mail has NOT been send.";
        }
        MessageObject = null;
        theMessage = null;
    }
    return Resultstring;
} 
```

最后我在附加的 App_data 文件夹中有一个样式表 TestFile.txt

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-=1">
    <meta content="text/html; charset=us-ascii">
    <style>
        h1{color:blue;}

        .EditText{
            background:#ff0000;/*rood*/
            height:100;
            font-size:10px;
            color:#0000ff;/*blauw*/
        }
        .EditTextVervolg{
            background:#00cc00;/*groen*/
            font-size:20px;
            color:#ffff00;/*geel*/
        }
    </style>
</head> 
```

玩得开心

# c++ - FFT：如何修改该算法以返回系数表示？

> ID：15565934
> 
> 赞同：0
> 
> 时间：2013-03-22T08:36:29.467
> 
> 标签：c++, fft, dft

以下是 Cooley-Tukey FFT 算法的 base-2 实现（可在 Rosetta Code 上找到）。运行一次 FFT 后，数据数组将从系数变为点值表示。你如何转换回系数？

```
#include <complex>
#include <iostream>
#include <valarray>

const double PI = 3.141592653589793238460;

typedef std::complex<double> Complex;
typedef std::valarray<Complex> CArray;

// Cooley–Tukey FFT (in-place)
void fft(CArray& x)
{
    const size_t N = x.size();
    if (N <= 1) return;

    // divide
    CArray even = x[std::slice(0, N/2, 2)];
    CArray  odd = x[std::slice(1, N/2, 2)];

    // conquer
    fft(even);
    fft(odd);

    // combine
    for (size_t k = 0; k < N/2; ++k)
    {
        Complex t = std::polar(1.0, -2 * PI * k / N) * odd[k];
        x[k    ] = even[k] + t;
        x[k+N/2] = even[k] - t;
    }
}

int main()
{
    const Complex test[] = { 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0 };
    CArray data(test, 8);

    fft(data);

    for (int i = 0; i < 8; ++i)
    {
        std::cout << data[i] << "\n";
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:40:16.023

计算逆 FFT

改变

```
-2 * PI * k / N 
```

到

```
2 * PI * k / N 
```

在进行逆 FFT 之后，将输出缩放 1/N

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T00:24:03.973

添加到罗塞塔代码

```
// inverse fft (in-place)
void ifft(CArray& x)
{
    // conjugate the complex numbers
    std::transform(&x[0], &x[x.size()], &x[0], std::conj<double>);

    // forward fft
    fft( x );

    // conjugate the complex numbers again
    std::transform(&x[0], &x[x.size()], &x[0], std::conj<double>);

    // scale the numbers
    x /= x.size();
} 
```

# php - 使用 DOm 和 PHP 将节点添加到现有 XML 文档

> ID：15565940
> 
> 赞同：1
> 
> 时间：2013-03-22T08:37:31.623
> 
> 标签：php, xml, dom, xmlnode, nsxmlelement

我希望有人能提供帮助，因为这让我发疯。

我需要使用 PHP 更新现有的 XML 文件。如果其中一个节点中的值等于某个值，那么我想添加一个新的子元素，其中包含一些文本。

以下是 XML 文件的示例：

```
<properties>
  <property>
    <address>
      <street>Example Road</street>
      <locality>Fitzrovia</locality>
      <town>London</town>
      <postcode>NW1</postcode>
    </address>
  </property>
  <property>
    <address>
      <street>Default Street</street>
      <locality>Sample</locality>
      <town>London</town>
      <postcode>EC1</postcode>
    </address>
  </property>
</properties> 
```

我目前拥有的PHP：

```
$dom = new DOMDocument();
$dom->load('http://example.com/example.xml');
$xpath = new DOMXPath($dom);

$postcode = $xpath->query('property/address/postcode');
foreach($postcode as $region)
{
    $r = $region->nodeValue;
    if (preg_match('/^nw(?=[0-9]*)/i', $r)) {
        $region->nodeValue = 'North West London';
    }
    else if (preg_match('/^n(?=[0-9]*)/i', $r)) {
        $region->nodeValue = 'North London';
    }
    else if (preg_match('/^e(?=[0-9]*)/i', $r)) {
        $region->nodeValue = 'East London';
    }
    else if (preg_match('/^se(?=[0-9]*)/i', $r)) {
        $region->nodeValue = 'South East London';
    }
    else if (preg_match('/^sw(?=[0-9]*)/i', $r)) {
        $region->nodeValue = 'South West London';
    }
    else if (preg_match('/^w(?=[0-9]*)/i', $r)) {
        $region->nodeValue = 'West London';
    }
    else if (preg_match('/^ec(?=[0-9]*)/i', $r)) {
        $region->nodeValue = 'East Central London';
    }
    else if (preg_match('/^wc(?=[0-9]*)/i', $r)) {
        $region->nodeValue = 'West Central London';
    }
    else {
        $region->nodeValue = 'Outer London';
    }
}

$dom->save('export.xml'); 
```

我想要做的是，如果邮政编码等于特定值，那么一个新的子节点将被添加到带有一些文本的“地址”节点。

我遇到了一些问题，我可以在其中生成一个新的子节点，但它会在 XML 文件的一部分中添加很多子节点，而不是在每个“属性”节点中添加一个实例。

我希望这是有道理的，因为我真的可以在一些帮助下做到这一点。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:50:26.960

You should use [DOMDocument::createElement](http://www.php.net/manual/en/domdocument.createelement.php) to create a new node and [DOMNode::appendChild](http://www.php.net/manual/en/domnode.appendchild.php) to append the new node.

Example:

```
if (preg_match('/^nw(?=[0-9]*)/i', $r)) {
    $element = $dom->createElement('your_node_name', 'North West London');
    $region->parentNode->appendChild($element);
} 
```

# php - PHP & MySql - 数组 foreach

> ID：15565942
> 
> 赞同：0
> 
> 时间：2013-03-22T08:37:47.533
> 
> 标签：php, mysql, foreach, while-loop

我想从数据库运行一个 foreach 循环，但我不知道如何开始。我有一个从while循环生成的数组：

```
 /* mysql query for geting leave_type ID */

    $leaveType = mysql_query("
    SELECT `leave`.leave_type_id_leave_type,
      `leave`.staff_leave_application_staff_id_staff,
      `leave`.date,
      `leave`.date_updated,
      `leave`.active
    FROM `leave`
    WHERE `leave`.staff_leave_application_staff_id_staff = $iid
    GROUP BY `leave`.leave_type_id_leave_type   
    ");

    /* Now put all leave Type ID in an array */

   echo "<table>";
   $types = array();
    while($leaveFW = mysql_fetch_array( $leaveType )){
        $types[] = $leaveFW['leave_type_id_leave_type'];
    }
print_r($types); 
```

现在我想运行一个 foreach 循环，它将在下面的代码中查询数组中的每个 ID。：

```
$leaveQ = mysql_query("SELECT Count(*) as total, monthname(date) as 
month FROM `leave`
WHERE `leave`.staff_leave_application_staff_id_staff = $iid 
and `leave`.leave_type_id_leave_type = $type"); 
```

我想在 foreach 循环中显示`$leaveQ['month']`和。`$leaveQ['total']`

可能是我的 foreach 这样，但如何获得`$type['month']`和`$type['total']`：

```
foreach ($types as $type)
{
    $leaveQ = mysql_query("SELECT Count(*) as total, monthname(date) as month
    FROM `leave` WHERE `leave`.staff_leave_application_staff_id_staff = $iid 
    and `leave`.leave_type_id_leave_type = $type");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:48:11.127

可能你想要这样的东西

```
foreach($types as $result)
{
    $iid  = $result['staff_leave_application_staff_id_staff'];
    $type = $result['leave_type_id_leave_type'];

    $leaveQ = mysql_query("SELECT Count(*) as total, monthname(date) as 
    month FROM `leave`
        WHERE `leave`.staff_leave_application_staff_id_staff = $iid 
     and `leave`.leave_type_id_leave_type = '".$leaveFW['leave_type_id_leave_type']."'");

    while($row = mysql_fetch_assoc($leaveQ))
    {
       echo $row['month']."<br>";
       echo $row['total']."<br>";
    }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:48:54.030

不要这样做！

*   mysql_ 函数自 PHP 5.5 起已弃用！
*   这样做（获取一个查询，然后在 foreach 循环中为每一行运行另一个查询）是一种不好的方法，这在很多代码中常见于“网络...
*   另外，我认为您想获得每个月的计数；在这种情况下，您必须为此使用 GROUP BY 子句

执行此操作的正确方法是使用 JOIN 操作，而不是对每一行进行查询，只需一个查询即可获取所有数据。

盲目地遵循该建议，不要改变太多，只需合并两个查询，您的查询应该如下所示：

```
SELECT Count(*) as total, monthname(date) as month, types.leave_type_id_leave_type
FROM `leave`
JOIN (SELECT DISTINCT `leave`.leave_type_id_leave_type
    FROM `leave`
    WHERE `leave`.staff_leave_application_staff_id_staff = $iid) as types 
  ON leave.leave_type_id_leave_type = types.leave_type_id_leave_type
WHERE `leave`.staff_leave_application_staff_id_staff = $iid 
GROUP BY monthname(date), types.leave_type_id_leave_type 
```

您的方法的不同之处：

*   内部查询与您的第一个查询几乎相同，但是
    *   而不是 GROUP BY，我使用了 DISTINCT - 在这种情况下，它是相同的，但我认为这更容易阅读 - 这是一个重要方面！
    *   我只为它选择了相关的列（leave_type_id_leave_type）
*   我对外部查询进行了更多修改
    *   JOIN 代替了“foreach”方法
    *   只有那些行被“计算在内”（在这种情况下，*字面意思是*:)），它们适用于内部查询
*   这将返回每个月和每种类型的计数。

为了更好地做到这一点：

*   使用正确参数化的准备好的语句：更好的性能，并且习惯它可以避免在适用的情况下进行 SQL 注入......
    *   您可以为此使用 PDO，它不被弃用...
*   查看生成的查询，很容易看出这可以进一步简化，并且不需要内部查询，也摆脱了 $iid 上的一个过滤器

```
SELECT Count(*) as total, monthname(date) as month, leave_type_id_leave_type
FROM `leave`
WHERE `leave`.staff_leave_application_staff_id_staff = $iid
GROUP BY monthname(date), leave_type_id_leave_type 
```

现在的区别：

*   巨大的性能飞跃...
*   少了很多，并且有很多可读的代码

**编辑**

[这是 SQL 小提琴，看看它是如何工作的](http://sqlfiddle.com/#!2/1d108/10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:48:39.883

```
 foreach($types as $type){
    $leaveQ = mysql_query("SELECT Count(*) as total, monthname(date) as 
    month FROM `leave`
    WHERE `leave`.staff_leave_application_staff_id_staff = $iid 
    and `leave`.leave_type_id_leave_type = $type"); 
    while($leave = mysql_fetch_assoc($leaveQ)){
    var_dump($leave['total'] , $leave['month']);
    }
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:49:34.450

如果我理解正确，您想遍历从代码块中找到的类型，然后发出更多数据库查询并提取更多数据。

您基本上可以再次重用您的第一个代码块，并用 foreach 循环包装：

```
foreach($types as $type){
    $query = mysql_query("YOUR_SQL_USING_$TYPE");

    while($row = mysql_fetch_array( $query )){
        print_r($row);
        // or print($row['COLUMN_NAME']);...
    }    
} 
```

# java - 从资源文件夹加载图像

> ID：15565945
> 
> 赞同：2
> 
> 时间：2013-03-22T08:38:07.537
> 
> 标签：java

我用来加载图像的代码是：

```
 ImageIO.read(SpriteSheet.class.getResource(path)); 
```

路径是资源的路径。但它会与`IllegalArgumentException`. 我想知道可能是什么原因造成的，并得出结论，应该将资源添加到与类相同的路径中。

是否可以从另一个文件夹加载图像，例如 bin 文件夹之外的 res 文件夹？（保存已编译类的文件夹）

编辑：所以我搞砸了一些事情，并找到了解决方案。但现在我有另一个问题。这是我的代码

```
 File sheet = new File(SpriteSheet.class.getProtectionDomain().getCodeSource().getLocation().getPath());
URI uri = sheet.toURI();
    BufferedImage image = ImageIO.read(uri.toURL()); 
```

当我尝试运行它时，它给了我一个`IIOException: Can't read Input File` 这意味着我永远无法真正让它工作。我尝试通过将 URL 打印到控制台来进行调试，这就是 URL。 `C:\Users\Amma\Abhijeet\Eclipse%20Workspace1\Test%20Game\bin` 出现`%20`在中间。这意味着该文件是并且永远不能被访问。无论如何我可以解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:57:28.480

`Class.getResource`如果找不到资源或调用者没有足够的权限来获取资源，将返回 null。如果它们收到空输入 ，所有的变体`ImageIO.read`都会抛出一个。`IllegalArgumentException`

[查看getResource](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)的文档以了解如何从给定的资源中构造绝对资源名称以及搜索资源的规则是什么。

只要您有权限，您就可以从任何位置读取图像，ImageIO.read 方法接受文件、URL 或 InputStream，因此您有很多选择。

# java - .c 代码的 java 包装器

> ID：15565947
> 
> 赞同：4
> 
> 时间：2013-03-22T08:38:18.403
> 
> 标签：java, c, java-native-interface, swig

我有以下c代码：

测试.c

```
#include <stdio.h>
#include <math.h>

int add (int a, int b)
{
    a=4;
    b=4;
    return a+b;
}

int add_pointer (int *a, int *b)
{
    printf("values of a,b: %d,%d \n",*a,*b);
return ((*a)+(*b));
}

char* print_hello()
{
    return "hello_world";
} 
```

测试.h

```
#ifndef TEST_H_
#define TEST_H_

int add(int a, int b);
int add_pointer (int *a, int *b);
char *print_hello();

#endif 
```

主程序

```
#include "test.h"
#include <stdio.h>
#include <math.h>

int main()
{
    int a,b,c,d;
    char* rez;

    a=5;
    b=2;

    //int *r=&a;
    c= add(a,b);
    d=add_pointer(&a,&b);
    rez=print_hello();

    printf("sum is: %d and : %s %d \n",c,rez,d);
    return 0;
} 
```

test_app.i

```
%module test_app

%{
#include "test.h"
%}

%include "test.h" 
```

我想为这个 .c 代码创建一个 java 包装器。我想稍后在 android 演示中使用这个包装器。

我做了以下事情：

```
$: swig -java test_app.i 
```

**给：**

```
test_app_wrapper.c
test_app.java
test_appJNI.java
SWIGTYPE_p_int.java 

$: gcc -fpic -c test.c test_app_wrap.c -I /usr/lib/jvm/java-7-openjdk-amd64/include -I /usr/lib/jvm/java-7-openjdk-amd64/include/linux
$: gcc -shared test.o test_app_wrap.o -o libtest_app_wrap.so 
```

更新：

HelloWorld.java

```
 public class HelloWorld {
    native String print_hello(); /* (1) */
    static {
        System.loadLibrary("test_app_wrap"); /* (2) */
    }
    static public void main(String argv[]) {
        HelloWorld helloWorld = new HelloWorld();
        helloWorld.print_hello(); /* (3) */
    }
} 
```

运行时：

```
$: javac HelloWorld.java 
$ java HelloWorld 
```

我有：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no test_app_wrap in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1856)
    at java.lang.Runtime.loadLibrary0(Runtime.java:845)
    at java.lang.System.loadLibrary(System.java:1084)
    at HelloWorld.<clinit>(HelloWorld.java:4) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:45:25.130

看来您不了解 jni 的工作原理，请查看本教程：

[使用 JNI 从 Java 调用 C 代码](http://stuf.ro/calling-c-code-from-java-using-jni/)

您`test_app_wrap`不存在，要使用 JNI，您必须为 C 函数分配一个特定名称，然后使用本机方法创建一个 Java 类来调用它们，即

```
native String print_hello(); 
```

并且，在 Java 类中，加载本机库。

然后您将创建一个 YourClass Java 对象并调用本`print_hello()`机方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:52:50.723

当您执行`swig -java test_app.i`时，它会创建一些 Java 粘合类，您必须将它们包含在您的 Java 项目中。生成的主界面命名`test_app.java`如下：

```
public class test_app {
  public static int add(int a, int b) {
    return test_appJNI.add(a, b);
  }

  public static int add_pointer(SWIGTYPE_p_int a, SWIGTYPE_p_int b) {
    return test_appJNI.add_pointer(SWIGTYPE_p_int.getCPtr(a), SWIGTYPE_p_int.getCPtr(b));
  }

  public static String print_hello() {
    return test_appJNI.print_hello();
  }

} 
```

如您所见，它将所有调用委托给`test_appJNI`，这也是自动生成的，并充当本机代码的粘合剂（使用`native`方法）：

```
public class test_appJNI {
  public final static native int add(int jarg1, int jarg2);
  public final static native int add_pointer(long jarg1, long jarg2);
  public final static native String print_hello();
} 
```

所以，你应该：

*   在项目中包含两个生成`.java`的文件
*   确保您加载`.so`库`System.loadLibrary("test_app_wrap");`- 您已经这样做了
*   只需调用`test_app.print_hello()`

另外，推荐阅读： SWIG 手册中的[21 SWIG 和 Java](http://www.swig.org/Doc1.3/Java.html)部分。*Preliminaries*和A tour of basic C / *C++ wrapping*部分很好地解释了所有基础知识。

您收到的错误表明 JVM 无法加载该`.so`库。我的第一个问题是它是否正确编译和链接。如果你确定你有`libtest_app_wrap.so`，它可能不在 JVM 寻找它的路径上（检查这个 - [http://www.chilkatsoft.com/p/p_499.asp](http://www.chilkatsoft.com/p/p_499.asp)）。例如，对我来说，有必要添加`-Djava.library.path=.`到 Java 命令行：

```
java -Djava.library.path=. HelloWorld 
```

供参考 - 我已经修改了您的`HelloWorld.java`文件：

```
public class HelloWorld {
    static {
        System.loadLibrary("test_app_wrap"); 
    }
    static public void main(String argv[]) {
        test_app.print_hello();
    }
} 
```

希望有帮助:)

# jquery - 表格中的 jQuery 表单中断

> ID：15565950
> 
> 赞同：1
> 
> 时间：2013-03-22T08:38:22.343
> 
> 标签：jquery, html-table

我创建了一个表格，可以根据某些选定的标准计算价格，作为一个独立的程序，它工作得很好，不幸的是，由于某种原因，一旦我将代码放入表格的单独单元格中，它就不再工作了，这是我能得到的唯一方法最终结果是当我刷新浏览器时.....任何解决此问题的想法，请参见下面的代码：

取出`<td>`& `</td>`，它工作正常

```
<!DOCTYPE html>
<head>
<TITLE>test</TITLE>
<script src="javascript/jquery-2.0.0b1.js"></script>
<link rel="stylesheet" href="css/domain-name-price-guide-table.css" />
</head>
<body>
<div class="datagrid">
<form id="buy">
<table>
<thead>
</thead>
<tbody>
<tr>
<td>
    <select name="years">
        <option value="4.49">1 Year</option>
        <option value="6.49">2 Years</option>
        <option value="9.47">3 Years</option>
        <option value="12.47">4 Years</option>
        <option value="15.45">5 Years</option>
        <option value="18.44">6 Years</option>
        <option value="21.43">7 Years</option>
        <option value="24.42">8 Years</option>
        <option value="27.41">9 Years</option>
        <option value="30.40">10 Years</option>
    </select>
</td>
<td>
    <select name="names">
        <option value="1">1 domain name</option>
        <option value="2">2 domain names</option>
        <option value="3">3 domain names</option>
        <option value="4">4 domain names</option>
        <option value="5">5 domain names</option>
        <option value="6">6 domain names</option>
        <option value="7">7 domain names</option>
        <option value="8">8 domain names</option>
        <option value="9">9 domain names</option>
        <option value="10">10 domain names</option>
        <option value="11">11 domain names</option>
    </select>
</td>
<td>
    <select name="transfer">
        <option value="0">No</option>
        <option value="4.50">Yes</option>
    </select>
</td>
<td>
    &pound;
        <input type="text" id="total" readonly />
</td>
</tr>
</tbody>
</table>
</form>
<script>
function setPrice () {
    var years = $('#buy').find('[name="years"]').val();
    var names = $('#buy').find('[name="names"]').val();
    var transfer = $('#buy').find('[name="transfer"]').val();
    var result = parseFloat(years * names + names * transfer, 10).toString().split('.');
    if (result[1] === void 0) {
        result[1] = '';
    }
    while (result[1].length < 2) {
        result[1] += '0';
    }
    result = result[0] + '.' + result[1].substr(0,2);
    $('#total').val(result);
}
$('form>select').change(setPrice);
setPrice();
</script>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:40:20.950

在里面包装代码`document.ready`

```
$(document).ready(function(){
$('form>select').change(setPrice);
setPrice();
}); 
```

还

```
var result = parseFloat((years * names) + (names * transfer), 10) 
```

**代替**

```
$('form>select').change(setPrice); 
```

**和**

```
$('form select').change(setPrice); 
```

因为`$('form>select').change(setPrice);`这将选择直接子代而不是后代。

`[***`DEMO`***](http://jsfiddle.net/mEgHK/1/)`

# .net - 如何在行编辑期间使页脚行可见为假，当我在 Gridview 中取消或保存记录时如何使页脚行可见

> ID：15565952
> 
> 赞同：-1
> 
> 时间：2013-03-22T08:38:23.373
> 
> 标签：.net, gridview

如何在行编辑期间使**页脚行**可见为*假*，并在我取消或保存**Gridview中的记录时显示为***真*，c#？最初我设置了gridview showfooter="true"

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:45:53.830

在行编辑集中：

```
GridID.FooterRow.Visible = false; 
```

在取消或保存中：

```
GridID.FooterRow.Visible = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T16:02:03.203

使用 GridView 的 PreRender 事件

```
protected void gvPrerender(object sender, EventArgs e)
        {
           if( Gridview1.EditIndex!=-1 )
            Gridview1.FooterRow.Visible = false;
           else
               Gridview1.FooterRow.Visible = true;
        } 
```**

# c# - 可以使用 Linq 解决 AND/OR 场景吗？

> ID：15565954
> 
> 赞同：0
> 
> 时间：2013-03-22T08:38:39.097
> 
> 标签：c#, linq

我有一个想要使用 LINQ 解决的特定场景，但我被卡住了。我希望有人能给我一个例子或一些关于如何解决这个问题的指示。我对 LINQ 相当陌生。

我有两个包含相同类型对象的集合（对于示例来说，什么样的对象并不重要）。

集合 A 包含“A11”和“A12”。

集合 B 包含“B11”和“B12”。

根据以下规则，我有第三个集合应该包含上述元素的子集：

```
(1 element of B AND (A11 OR A12)) 
```

因此，如果我写出所有可能性，这将变成：

```
(B11 AND (A11 OR A12))

(B12 AND (A11 OR A12)) 
```

当然，在我的场景中，这些集合可能会变得更大。

根据特定的 AND/OR 规则，我将如何在 LINQ 中解决这个问题，以查看我的集合 C 是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:46:31.320

您可以将它分成两个单独的 linq 查询并将它们组合起来

```
if(collectionC.Intersect(collectionA).Any() && collectionC.Intersect(collectionB).Any()) 
```

当 collectionC 至少包含一个来自 collectionA 和至少一个来自 collectionB 时，这将是正确的

如果您想更多地控制计数，您可以替换

```
.Any() 
```

在每个集合上

```
Count() > 0 
```

有关相交操作的更多信息 [http://code.msdn.microsoft.com/LINQ-Set-Operators-374f34fe#intersect1](http://code.msdn.microsoft.com/LINQ-Set-Operators-374f34fe#intersect1)

# web - 如何删除大网站？

> ID：15565960
> 
> 赞同：-1
> 
> 时间：2013-03-22T08:38:57.977
> 
> 标签：web, ftp, hosting

我有一个大型网站，我想从我的托管帐户中删除。最快的方法是什么？如果我使用 FTP 客户端并选择整个根目录 > 删除，则可能需要一个小时或更长时间。

有人有好的建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:45:55.937

如果您将此托管在托管公司上，最好的方法是

提交支持请求，要求他们为您删除它。

你为他们付钱，所以为什么不问他们。？

# java - GroovyScriptEngine：从子文件夹加载 groovy 脚本

> ID：15565961
> 
> 赞同：0
> 
> 时间：2013-03-22T08:39:06.620
> 
> 标签：java, groovy

我有一个这样的目录结构：

> *   .../GroovyScriptsRoot
>     *   SubfolderName1/script/ScriptName1.groovy
>     *   SubfolderName2/script/ScriptName2.groovy
>     *   SubfolderName3/script/ScriptName3.groovy
>     *   SubfolderName4/script/ScriptName4.groovy
>     *   ...

所以我基本上想做这样的事情：

> GroovyScriptEngine engine = new GroovyScriptEngine(new String[]{".../GroovyScriptsRoot"});

我自己尝试过，但脚本没有加载。脚本的完整路径是必需的，这不是很好。有某种解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:25:11.437

嗯，好的，我发现了发生了什么。自然，问题出在我身上。

GroovyScriptEngine 通过它们的包名正确加载脚本 - 实际上不必与它们所在的包相对应。

我试图仅使用它们的名称来加载脚本。愚蠢的。

# svn - 如何将分支部分重新整合到主干？

> ID：15565969
> 
> 赞同：1
> 
> 时间：2013-03-22T08:39:59.423
> 
> 标签：svn, branching-and-merging, cherry-pick

我对这个主题进行了很多搜索，但没有找到令人信服的答案。

我有一个分支 B，用于功能 F1、F2 和 F3。提交混合功能（例如，F1 提交，F2 提交，F1 提交）。功能 F1 现已完成，应该重新集成到主干，但 F2 和 F3 没有。

据我了解，重新集成到主干（使用 --reintegrate）与普通的 svn merge 不同，因此 svn merge 在这种情况下不可用（对吗？）。svnbook 提到了像樱桃采摘这样的选择性合并，但仅限于从主干/分支到分支。但是， --reintegrate 也会将 F2 和 F3 带到主干。

我如何（如果可能的话）将选定的修订从分支 B 重新集成到主干，然后继续完成分支 B 中的其他功能？

我发现一些答案提到 svn 将修订合并到主干，然后使用 --record-only 在分支中阻止这些修订。但是，由于 svn merge 和 svn merge --reintegrate 的根本区别，我不确定这是否是好的做法。svn 从一个分支合并到另一个主干不会复制主干中先前同步到分支的变更集吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:31:50.507

这里看不出*有什么*问题。

只需从分支到主干执行cherry-pick合并（合并范围或修订），下一次合并**将不会**再次在合并的变更集中看到（如果服务器支持mergeinfo）

# javascript - 如何排序 s（升序和降序）并识别它们的状态？

> ID：15565975
> 
> 赞同：3
> 
> 时间：2013-03-22T08:40:18.233
> 
> 标签：javascript

我正在使用 Javascript 对`<div>`由子元素拆分为 s 的表进行排序。代码以一种方式成功排序，但**我需要添加升序和降序排序的功能。**

我尝试将调用者添加到表示单击哪个表头的排序属性。我设置了默认设置为 1 的全局变量，然后它们使用 if 语句在 1 和 2 之间翻转以表示升序或降序。

该表只会升序和降序排序一次，并且似乎依赖于在移动下一个表头之前移动其他表头。

[JSFiddle的问题在这里](http://jsfiddle.net/zdCT6/1/)

```
 var OrderAuthor = 1;

function sortUsingNestedText(parent, childSelector, keySelector, caller)
{
        var items = parent.children(childSelector).sort(function(a, b)
        {
                var vA = $(keySelector, a).text();
                var vB = $(keySelector, b).text();
                if (caller.data('order_by') == 'author')
                {
                        if (OrderAuthor == 1)
                        {
                                OrderAuthor = 2;
                                OrderSubject = 1;
                                OrderDate = 1;
                                return (vA < vB) ? -1 : (vA > vB) ? 1 : 0;
                        }
                        else
                        {
                                OrderAuthor = 1;
                                return (vA > vB) ? -1 : (vA < vB) ? 1 : 0;
                        }
                }
        });
        parent.append(items);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:03:46.387

我会这样做[http://jsfiddle.net/zdCT6/5/](http://jsfiddle.net/zdCT6/5/)

```
var sortBy = ""
var asc = true

function sortUsingNestedText(parent, childSelector, keySelector) {
     if (sortBy == keySelector) { asc = !asc } else { asc = true }
     sortBy = keySelector
     var items = parent.children(childSelector).sort(function(a, b) {
        var vA = $.trim($(keySelector, a).text());
        var vB = $.trim($(keySelector, b).text());        
        return ((vA < vB) ? -1 : (vA > vB) ? 1 : 0) * (asc ? 1 : -1);           
    });

    parent.append(items);
 } 
```

方式更简单，您不需要每次都在那里重置这些标志，而且如果分支则相当少

还要注意 trim() 调用。您的 text() 正在返回带有前导空格 chr 的项目，该项目将首先自动移动该项目/

# symfony - Symfony2 Querybuilder - 多对多关系

> ID：15565976
> 
> 赞同：0
> 
> 时间：2013-03-22T08:40:19.270
> 
> 标签：symfony, doctrine, many-to-many, query-builder

我在查询生成器上有点挣扎。我有具有多对多关系的实体类别和预算。用户应该能够创建具有给定类别的新预算。创建新预算时，我想检查是否存在包含给定类别的预算。
为了更好地解释，假设我有类别：食品、旅行、电子产品，并且已经为旅行和食品创建了预算，然后用户想要为旅行和食品创建另一个预算，他当然不应该这样做。
我尝试使用 IN 但它只需要单个值而不是数组：

```
$budgets = $this->createQueryBuilder('bud');
$budgets->where('bud.user = :user')
->andWhere($budgets->expr()->in('bud.tags', array(10, 11, 12)))
->setParameter('user', $budget->getUser())
->getQuery()->getResult(); 
```

这当然会引发异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:44:43.747

部分答案是：

```
// Example - $qb->expr()->in('u.id', array(1, 2, 3))
// Make sure that you do NOT use something similar to $qb->expr()->in('value', array('stringvalue')) as this will cause Doctrine to throw an Exception.
// Instead, use $qb->expr()->in('value', array('?1')) and bind your parameter to ?1 (see section above)
public function in($x, $y); // Returns Expr\Func instance 
```

我[在这里](http://guidella.free.fr/General/symfony2QueryBuilder.html)看到了。

**编辑**
有一个 SQL 语句允许您过滤只检查所有给定值的行。是`ALL`声明。

对于[MySQL](http://dev.mysql.com/doc/refman/5.0/en/all-subqueries.html)
对于[SQL Server](http://msdn.microsoft.com/en-us//library/ms173270%28v=sql.100%29.aspx)
对于[ORACLE](http://www.oracle-base.com/articles/misc/all-any-some-comparison-conditions-in-sql.php)

使用教义（从[这里](http://guidella.free.fr/General/symfony2QueryBuilder.html)）

```
// Example - $qb->expr()->all($qb2->getDql())
public function all($subquery); // Returns Expr\Func instance 
```

`$subquery`应该在哪里：

```
SELECT id_categorie FROM budget_categorie WHERE id_budget = '$idBudget' 
```

# jquery - 将 .data 中的值存储为数组并对其进行操作

> ID：15565984
> 
> 赞同：0
> 
> 时间：2013-03-22T08:40:36.780
> 
> 标签：jquery

我必须将 .data 方法中的数据存储为数组，并以大于 3 的跨度打印它们。

我写了代码，但它正在给`'object object'` [**DEMO**](http://jsfiddle.net/ZzSJf/)

```
<script type="text/javascript">
    $(function(){
        $('a').click(function(){
            var value = $('div').data('key',[]);
            var txt= $(this).text();
            $('div').data('key').push(txt)
            $('span').text(value)
        });
    });
</script> 
```

// html

```
<div></div>
<a href="#">1</a>
<a href="#">2</a>
<a href="#">3</a>
<a href="#">4</a>
<a href="#">5</a>
<a href="#">6</a>
<a href="#">7</a>
<a href="#">8</a>
<span></span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:44:49.793

```
$('div').data('key', []); // init the array

$('a').click(function () {
    var value = $('div').data('key'); //pulls the current array value.
    var txt = $(this).text();
    value.push(txt); 
    $('span').text(value);
}); 
```

[**固定演示**](http://jsfiddle.net/ZzSJf/3/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T08:53:06.443

问题是这条线。

```
var value=  $('div').data('key',[]); 
```

您将 的返回值分配`.data()`给 value，与大多数其他 jQuery 函数一样，它返回 jQuery 对象本身。您稍后将该对象用作跨度的文本。这就是错误的来源。为了解决这个问题，首先在点击之外初始化 data 属性，并`var value`在 gdoron 中单独设置。

# android - Android：从服务器获取数据

> ID：15565985
> 
> 赞同：1
> 
> 时间：2013-03-22T08:40:39.530
> 
> 标签：android, url, android-parser

我想开发一个应用程序。在哪个用户在运行时输入 URL。XML 放置在服务器上。那么如何点击或获取该 XML 的数据，以便我可以解析数据并使用它。我知道的解析。但是如何直接获取数据我不知道。

所以请建议我如何在没有网络服务的情况下点击 url 并获取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:51:23.847

一般来说

要向服务器发出请求，您可以使用 Asynctask 或服务。

对于长时间运行的后台操作，请使用服务。

Asynctask 的替代方案是 Robospice。[https://www.google.co.in/search?q=robospice&oq=robospice&aqs=chrome.0.57j59l2j60j62l2.2501&sourceid=chrome&ie=UTF-8](https://www.google.co.in/search?q=robospice&oq=robospice&aqs=chrome.0.57j59l2j60j62l2.2501&sourceid=chrome&ie=UTF-8)。

提出肥皂请求。 [http://www.youtube.com/watch?v=v9EowBVgwSo](http://www.youtube.com/watch?v=v9EowBVgwSo)。

[如果必须使用 AsynxTasc 但我仍然无法工作，请在 android 4.0.3 中使用教程的](https://stackoverflow.com/questions/15521740/to-use-the-tutorial-in-android-4-0-3-if-had-to-work-with-asynxtasc-but-i-still-d/15521935#comment22060397_15521935)屏幕截图示例代码？.

发出 http 请求并获得响应。

[http://www.androidhive.info/2011/10/android-making-http-requests/](http://www.androidhive.info/2011/10/android-making-http-requests/)

[http://www.vogella.com/articles/AndroidNetworking/article.html](http://www.vogella.com/articles/AndroidNetworking/article.html)。

如果您的响应是 xml，请解析 xml 文件

[http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)。使用 domparser 解析。

[http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)。使用 sax 解析器进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:43:25.807

使用 JSON、SOAP 等 Web 服务

我更喜欢 JSON

[JSON](http://json.org/)

如何创建[JSON 响应：](http://www.stevencharlesrobinson.com/sites/scrobinson.nsf/docs/Building%20a%20Simple%20RESTful%20Web%20Service%20to%20produce%20JSON%20using%20Jersey)

Android 包含 JSON 类，例如 JSONArray、JSONObject，可用于解释 Web 服务将返回的响应。查看更多：[链接](http://developer.android.com/reference/org/json/JSONObject.html)

# java - 奇怪的“输出”变量，System.out.println()

> ID：15565993
> 
> 赞同：6
> 
> 时间：2013-03-22T08:41:14.203
> 
> 标签：java, nullpointerexception

以下是 java.lang.System 类的代码（JDK 1.6 版）

```
public final static PrintStream out = nullPrintStream(); //out is set to 'null'

private static PrintStream nullPrintStream() throws NullPointerException {
    if (currentTimeMillis() > 0) {
        return null;
    }
    throw new NullPointerException();
} 
```

当我们`System.out.println("Something");`在我们的代码中编写时，为什么即使“out”设置为“null”，我们也不会得到 NullPointerException

无论如何`out`将通过`setOut`System 类中的以下方法设置

```
public static void setOut(PrintStream out) {
     checkIO();
     setOut0(out);
 } 
```

他们为什么 JLS 需要`nullPrintStream`方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T08:46:32.677

看一下`private static void initializeSystemClass()`——这个方法被调用来启动东西，它调用了`setOut0()`哪个`native`方法。这与`Stream`它应该在的地方联系在一起。

因此，即使该字段*看起来* `public static final`实际上不是，`native`代码也会更改它。

**编辑**

OP问*那为什么JLS需要nullPrintStream方法？*

`static final`这与 java 编译器有关 -如果在编译时将它们分配给常量，它将“内联”字段，例如`null`. 编译器实际上会将对该字段的每个引用替换为常量。

这将破坏初始化，因为对象将不再持有对的引用，`Stream`而是对`null`. 将流分配给方法的返回可以防止内联。

有些人可能会称其为肮脏的黑客行为。错误地引用俾斯麦“JDK 就像香肠，最好不要看到它被制造出来”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:42:52.773

这就是 System.out 类的初始化方式。

还有一种方法：

```
 private static native void setOut0(PrintStream out); 
```

在以下方法中调用：

```
private static void initializeSystemClass() { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T08:47:47.203

System.in、out 和 err 由 JVM 从本机代码管理。nullPrintStream() 的全部魔力是为了防止 javac 内联这些字段。从 java 7 开始，它看起来像

```
public final static PrintStream out = null; 
```

# c - InternetQueryOption、INTERNET_PER_CONN_OPTION 和 INTERNET_PER_CONN_FLAGS_UI 标志

> ID：15565997
> 
> 赞同：0
> 
> 时间：2013-03-22T08:41:33.987
> 
> 标签：c, windows, winapi, wininet

我正在编写一个使用 InternetQueryOption API 查询代理设置的程序。

查看`INTERNET_PER_CONN_OPTION` [http://msdn.microsoft.com/en-us/library/windows/desktop/aa385145%28v=vs.85%29.aspx的 Windows 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385145%28v=vs.85%29.aspx)

文档中有注释

> **Windows 7 及更高版本：**
> 支持 Internet Explorer 8 的客户端应使用 INTERNET_PER_CONN_FLAGS_UI 查询连接类型。如果此查询失败，则系统正在运行以前版本的 Internet Explorer，客户端应使用 INTERNET_PER_CONN_FLAGS 再次查询。
> 
> 无论 Internet Explorer 的版本如何，都使用 INTERNET_PER_CONN_FLAGS 恢复连接类型。

我已经在运行 IE9 的 Win7 64 位机器上进行了测试`INTERNET_PER_CONN_FLAGS`，`INTERNET_PER_CONN_FLAGS_UI`一切似乎都运行良好。

和功能的文档`INTERNET_PER_CONN_FLAGS`也`INTERNET_PER_CONN_FLAGS_UI`似乎相同。

那么使用的原因是什么`INTERNET_PER_CONN_FLAGS_UI`呢？注释是否表明它仅适用于 IE8 或 IE8 及更高版本。

我的程序需要支持从运行 IE6 的 WinXP 到当前 Win7 机器的所有内容。所以我不清楚我应该使用什么。

这是我的代码

```
INTERNET_PER_CONN_OPTION_LIST    List;
INTERNET_PER_CONN_OPTION         Option[1];
unsigned long                    nSize = sizeof(INTERNET_PER_CONN_OPTION_LIST);

Option[0].dwOption = INTERNET_PER_CONN_FLAGS;

List.dwSize = sizeof(INTERNET_PER_CONN_OPTION_LIST);
List.pszConnection = 0;
List.dwOptionCount = sizeof(Option)/sizeof(Option[0]);
List.dwOptionError = 0;

Option[0].Value.pszValue = 0;

List.pOptions = Option;

InternetQueryOption(NULL, INTERNET_OPTION_PER_CONNECTION_OPTION, &List, &nSize); 
```

1.  如果失败，我应该更改`INTERNET_PER_CONN_FLAGS`为`INTERNET_PER_CONN_FLAGS_UI`& 然后再次调用 with吗？`INTERNET_PER_CONN_FLAGS``INTERNET_PER_CONN_FLAGS_UI`

2.  这究竟是什么意思

    > 无论 Internet Explorer 的版本如何，都使用 INTERNET_PER_CONN_FLAGS 恢复连接类型。

这是否意味着`INTERNET_PER_CONN_FLAGS_UI`仅与`InternetQueryOption`和相关`InternetSetOption`，我应该始终使用`INTERNET_PER_CONN_FLAGS`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-19T19:56:03.647

INTERNET_PER_CONN_FLAGS_UI 返回代理设置，如工具 > Internet 选项 > 连接 > LAN 设置中所示。

这些设置可能与 INTERNET_PER_CONN_FLAGS 返回的设置不同，如果 WinINET 认为当前网络不使用 WPAD，它将“隐藏”“自动检测”设置。这是一项性能优化，有关详细信息，请参阅[https://stackoverflow.com/a/5138232/126229](https://stackoverflow.com/a/5138232/126229)。

一般来说，您应该只在向用户显示设置时使用 INTERNET_PER_CONN_FLAGS_UI；如果您的目标是确定应该使用什么代理，请使用 INTERNET_PER_CONN_FLAGS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:06:38.860

根据您引用的文档和您想要实现的目标的描述，在我看来，您的问题 1 和 2 的答案是`Yes`and `Yes`。

但是，与所有 MS 文档一样，它可能不清楚、过时或完全错误。因此，我建议您从问题中概述的假设开始，并使用 VM 在 WinXP/IE6、Win8/IE10 等平台的各种组合上测试代码原型。凭经验进行操作可能会让您更好地了解真实事实与文档的区别，并且还将为您提供一些测试环境以供进一步工作。