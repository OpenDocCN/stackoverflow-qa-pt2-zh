# StackOverflow 问答 15451000-15451999

# data-structures - 在clojure中反转哈希映射

> ID：15451000
> 
> 赞同：3
> 
> 时间：2013-03-16T15:23:24.943
> 
> 标签：data-structures, clojure, hashmap

我在clojure中有哈希图：

```
{"key1" "value1"} {"key2" "value2"} {"key3" "value1"} 
```

我需要将其转换为

```
{"value1" {"key1" "key3"}} {"value2" {"key2"}} 
```

任何clojure方法可以做到这一点？

clojure.set/map-invert 不会像覆盖重复值一样工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T17:01:52.657

```
(def m {"key1" "value1" "key2" "value2" "key3" "value1"})

(let [g (group-by val m)
      vals (map #(map first %) (vals g))]
  (zipmap (keys g) vals))
;;=> {"value2" ("key2"), "value1" ("key1" "key3")} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T17:21:01.897

试试这个：

```
(def m {"key1" "value1" "key2" "value2" "key3" "value1"})

(reduce (fn [a x] (assoc a (second x) (conj (a (second x)) (first x)))) {} m)
=> {"value2" ("key2"), "value1" ("key3" "key1")} 
```

请注意，（可能）重复的值最终出现在列表中。或者，正如@A.Webb 在评论中所建议的那样，上面的内容可以简洁地写成这样：

```
(reduce (fn [a [k v]] (update-in a [v] conj k)) {} m)
=> {"value2" ("key2"), "value1" ("key3" "key1")} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T15:51:16.047

尝试以下，我没有 REPL 来测试，它可能与原始答案略有不同，但是，你可以用它来得到你想要的。

```
(group-by #(val (first %)) {"key1" "value1"} {"key2" "value2"} {"key3" "value1"}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T15:55:46.540

你的问题真的很混乱。首先你说你有哈希图，你实际上有很多哈希图，或者如果你真的是指一个哈希图，那么你的例子应该是不正确的`{"key1" "value1" "key2" "value2" "key3" "value1"}`。其次，所需的输出很奇怪，因为哈希映射中的值本身表示为映射，但最后一个值只是哈希映射中的单个值，这显然是不可能的，所以我猜你的意思是值被设置（不是地图）为 `{"value1" #{"key1" "key3"}} {"value2" #{"key2"}}`

基于所有这些假设，一种可能的解决方案是：

```
(->> {"key1" "value1" "key2" "value2" "key3" "value1"}
     (group-by second)
     (map #(-> [(%1 0) (into #{} (map first (%1 1)))]))
     (into {})) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T16:47:42.113

这是另一种选择：

```
(def maps [{"key1" "value1"} {"key2" "value2"} {"key3" "value1"}])

(into {} 
  (for [[k v] (group-by #(val (first %)) maps)] 
    [k (apply concat (map keys v))]))

;=> {"value1" ("key1" "key3"), "value2" ("key2")} 
```

# c# - 在 LINQ 上使用 DataTable 的位置

> ID：15451001
> 
> 赞同：1
> 
> 时间：2013-03-16T15:23:27.157
> 
> 标签：c#, linq, c#-4.0, datatable

```
var results = from myRow in dsPac.AsEnumerable()
              where myRow.Field<string>("Package_Name").Equals(lblPackageName.Text)
              select myRow; 
```

`dsPac`包含_

![在此处输入图像描述](../Images/5e689e2bf03286a0a3c24124730df5cb.png)

我想选择与`Package1712200466`ie对应的数据

![在此处输入图像描述](../Images/1d98bf82ee12eec594c20ec22770d27d.png)

当我绑定到 GridView 时，出现以下错误

```
DataBinding: 'System.Data.DataRow' does not contain a property
with the name 'Holiday_ID'. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T15:31:34.040

过去，当我希望将数据行绑定到 GridView 中时，我会创建一个对象来执行此操作。在这种情况下，您可能会使用 Linq 查询来创建一个匿名对象来解决问题。

```
 var results = from myRow in dsPac.AsEnumerable()
               where myRow.Field<string>("Package_Name").Equals(lblPackageName.Text)
               select new { Holiday_ID = myRow["Holiday_ID"],
                            Holiday_Description = myRow["Holiday_Description"],
                            Holiday_Date = myRow["Holiday_Date"] }; 
```

我不相信直接竞标该行会起作用-请参阅异常文本。通过 Item[] 索引器访问行列，因此您需要编写一个 WPF 转换器来实现相同的效果。总之，这是浪费时间，因为 Linq 查询会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T15:47:47.237

或者，您可以使用[AsDataView()](http://msdn.microsoft.com/en-us/library/bb908061.aspx)将行集合转换回 GridView 将能够绑定到的 DataView。

```
var results = (from myRow in dsPac.AsEnumerable()
              where myRow.Field<string>("Package_Name").Equals(lblPackageName.Text)
              select myRow).AsDataView(); 
```

# java - 如何使用 CGLib 调用原始方法？

> ID：15451003
> 
> 赞同：0
> 
> 时间：2013-03-16T15:23:52.197
> 
> 标签：java, cglib, luaj

我正在使用 CGLib 动态更改 TileEntity (Minecraft)。在 InvocationHandler 中，我为接口调用 Lua 函数，但我希望在 Java 中调用已经存在的方法。这是我的调用方法：

```
 public Object invoke(Object arg0, Method arg1, Object[] arg2)
            throws Throwable {
        for (Method m : BaseTileEntity.class.getMethods()) {
            if (m.equals(arg1)) {
                return m.invoke(arg0, arg2);
            }
        }
        return ((BaseTileEntity)arg0).file.call(arg1.getName(), arg2).arg(1);
    } 
```

问题是调用该方法将调用相同的方法而不是原始方法。有没有办法调用原始方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:13:35.720

了解如何调用原始方法：实现 MethodInterceptor 而不是 InvocationHandler。MethodInterceptor 的方法有一个额外的参数，可以使用 .invokeSuper(arg0, arg2) 调用原始方法。

# php - 如何在 REST API 方法中不传递任何参数的情况下获取函数结果？

> ID：15451004
> 
> 赞同：0
> 
> 时间：2013-03-16T15:23:53.450
> 
> 标签：php, function, rest

我的功能

```
public static function getArtistCount()
{
    global $DB;
    $sql =  "SELECT COUNT(*) AS Count FROM tbl_artists";

    if (!$DB->Query($sql)) {
        return false;
    }

    if (!$rows = $DB->RecordsArray(1)) {
        return false;
    }

    $count= $rows[0]['Count'];
        return $count;
    } 
```

我也有结果变量来调用休息和存储数据

```
$result = Utility_API::callREST($params , 'Artist/get') 
```

我的 REST 服务是

```
public function get()
{
    $status = false;
    $result = array();

    if ($result = Data_Artist::getArtistCount()) {
        $status = true;
        $data = $result->toArray();
    }

    return $this->generateReturn($status, $data);
} 
```

我需要知道如何获取计数，还需要知道在不需要或不传递参数时如何获取函数结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:31:41.823

不发送参数：

如果您的 REST 服务可以简单地处理它，您可以传入空。`$params`通常，它将是一个数组（同样，取决于 API）。

```
$result = Utility_API::callREST(array() , 'Artist/get') 
```

计数：

取决于`$this->generateReturn($status, $data)`它返回的输出？这将被捕获在`$result`.

尝试 echo`var_dump($result)`看看你从那个电话中得到了什么。

还尝试尽可能放置 echo 语句以查看发生了什么，例如：

```
if ($result = Data_Artist::getArtistCount()) {
        $status = true;
        echo "I am here and the result is :";
        echo var_dump($result);
        $data = $result->toArray();
        echo "This is my data!" . var_dump($result);
    } 
```

祝你好运！

# iptables - 使用 iptables 敲击端口

> ID：15451009
> 
> 赞同：0
> 
> 时间：2013-03-16T15:24:25.137
> 
> 标签：iptables

我正在使用以下 iptables 规则进行端口敲击。一切正常，但我想通过能够从 HOST_1 敲门来改进它，从而打开 HOST_2 的 SSH 端口。有人可以建议是否/如何做到这一点？一种可能性是在端口敲门时伪造源 IP (hping3 -p 100 -a $HOST_2 11.22.33.44)。这行得通，但我更愿意使用 iptables 来实现它。

```
-A INPUT -p icmp -j ACCEPT
-A INPUT -i lo -s 127.0.0.0/8 -j ACCEPT
-A INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT

-A INPUT -m recent --rcheck --seconds 5 --name KNOCK3 --rsource -j STATE3
-A INPUT -m recent --rcheck --seconds 5 --name KNOCK2 --rsource -j STATE2
-A INPUT -m recent --rcheck --seconds 5 --name KNOCK1 --rsource -j STATE1

-A INPUT -j STATE0

-A STATE0 -m recent --remove --name KNOCK1,KNOCK2,KNOCK3 --rsource
-A STATE0 -p tcp -m tcp --dport 100 -m recent --set --name KNOCK1 --rsource -j DROP
-A STATE0 -j DROP

-A STATE1 -m recent --remove --name KNOCK1,KNOCK2,KNOCK3 --rsource
-A STATE1 -p tcp -m tcp --dport 200 -m recent --set --name KNOCK2 --rsource -j DROP
-A STATE1 -j DROP

-A STATE2 -m recent --remove --name KNOCK1,KNOCK2,KNOCK3 --rsource
-A STATE2 -p tcp -m tcp --dport 300 -m recent --set --name KNOCK3 --rsource -j DROP
-A STATE2 -j DROP

-A STATE3 -m recent --remove --name KNOCK1,KNOCK2,KNOCK3 --rsource
-A STATE3 -p tcp -m tcp --dport 22 -j ACCEPT
-A STATE3 -j DROP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T15:06:58.257

如果您的两台主机是固定 IP 地址，您只需在上面设置敲击名称的适当规则中添加源 IP 选项 (-s)。例如。将下面的 HOST_1 和 HOST_2 值替换为有效 IP：

```
-A STATE0 -s HOST_1 -p tcp -m tcp --dport 100 -m recent --set --name KNOCK1 --rsource -j DROP

-A STATE1 -s HOST_1 -p tcp -m tcp --dport 200 -m recent --set --name KNOCK2 --rsource -j DROP

-A STATE2 -s HOST_1 -p tcp -m tcp --dport 300 -m recent --set --name KNOCK3 --rsource -j DROP

-A STATE3 -s HOST_2 -p tcp -m tcp --dport 22 -j ACCEPT 
```

如果您的 IP 是动态的（例如，从任何给定的 IP 敲门打开访问下一个更高的 IP），我不知道仅使用 iptables 的方法。

# c# - 在运行时更改 DllImportAttribute 的 CharSet 字段

> ID：15451017
> 
> 赞同：1
> 
> 时间：2013-03-16T15:25:14.230
> 
> 标签：c#, reflection, unicode, pinvoke, dllimport

我想要做的是能够在托管代码中使用相同的方法针对本机 DLL 的两个版本进行编译。

例如，这将是我的本机方法签名：

```
__declspec(dllexport) void MyClass::NativeFoo(const TCHAR* txt) 
```

它编译为接受`char*`一个构建和`wchar*`另一个构建。

pInvoke 签名如下所示：

```
[DllImport("Native.dll")]
private static extern void NativeFoo(string txt); 
```

为了能够控制`CharSet`pInvoke 调用使用的，我使用以下方法：

```
internal static void SetUnicodeMode(bool state)
{
    MethodInfo m = typeof(ManagedFoo).GetMethod("NativeFoo", BindingFlags.NonPublic | BindingFlags.Static);
    object[] atts = m.GetCustomAttributes(typeof(DllImportAttribute), false);
    DllImportAttribute dllatt = (atts[0] as DllImportAttribute);
    dllatt.CharSet = state ? CharSet.Unicode : CharSet.Ansi;
} 
```

我在托管程序集启动时调用此方法（此时我知道是否需要使用 unicode 或 mbcs）。

该方法不会引发异常，但也不会更改`CharSet`pInvoke 调用使用的方法。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:16:21.900

这是行不通的。CLR 将创建自己的 [DllAttribute] 实例，它不会使用您的实例。用于属性构造函数参数的值存储在程序集元数据中，您无法更改该数据。

继续前进的唯一合理方法是使用*两个*具有不同名称的声明。使用属性的 EntryPoint 属性将它们映射到相同的导出函数。否则非常不清楚您将使用什么触发器来选择另一个触发器，实际的 DLL 当然也必须有所不同。这是非常不寻常的，当您使用不同的编译器设置重建 DLL 时，TCHAR 只是一种不同类型的字符。特别是 UNICODE 和 _UNICODE #defines。没有任何可以想象的理由仍然使用 8 位字符或 TCHAR，那是上个世纪。此处高度指示进行完整性检查。

# python - Overwriting list in python

> ID：15451018
> 
> 赞同：-2
> 
> 时间：2013-03-16T15:25:29.283
> 
> 标签：python, list, overwrite

I use a list in the argument of the following function:

```
def myFunct(myList):
  print(myList) # display [0,1]
  myModifiedList = list(myList)
  myModifiedList[0]=-1
  print(myList) # display [-1,1]
  return myModifiedList 
```

Of course, I'd like to display [0,1] at my second print in my function myList. I can't find out what's wrong here, I know that everything in python works by reference. However, my function array_copy should help me to avoid the problem I'm having.

Edit: I deleted the "weird" method, but still having the problem.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:32:12.337

首先，您的代码打印了`[0, 1]`两次，并且`[0, 1]`后面没有`[-1, 1]`. 这并不是说它完美无瑕。

一个错误是：

```
for i in array:
   copy.append(array[i]) 
```

`i`迭代列表*元素*，而不是*索引*。因此，`array[i]`应该阅读`i`。

事实上，整个`array_copy()`函数是不必要的。您可以更换：

```
myModifiedList = array_copy(myList) 
```

和

```
myModifiedList = myList[:] 
```

制作列表的（浅）副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T15:32:06.457

我无法使用复制列表的健全方法重现此行为：

```
>>> mylist = [0, 1]
>>> modified = list(mylist)
>>> modified[0] = -1
>>> print(mylist)
[0, 1] 
```

您是否实际运行了问题中的代码？正如 NPE 指出的那样，您的复制功能本质上是有缺陷的。与往常一样，最好的答案是不要重新发明轮子，而是使用内置的方法来做这件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T21:28:52.233

```
>>> a=[0,1]
>>> print a
[0, 1]
>>> b=a
>>> b[0]=-1
>>> print a
[-1, 1]
>>> c=list(a)
>>> c[0]=3
>>> print a
[-1, 1]
>>> print c
[3, 1]
>>> print b
[-1, 1]
>>> 
```

# c++ - Can I override only one method in inheritence?

> ID：15451020
> 
> 赞同：6
> 
> 时间：2013-03-16T15:25:30.877
> 
> 标签：c++, inheritance, overriding

My `C++` code is as follows:

```
#include<iostream>
using namespace std;

class A
{
    public:
        virtual void f(int i)
        {
            cout << "A's f(int)!" << endl;
        }
        void f(int i, int j)
        {
            cout << "A's f(int, int)!" << endl;
        }
};

class B : public A
{
    public:
        virtual void f(int i)
        {
            cout << "B's f(int)!" << endl;
        }
};

int main()
{
    B b;
    b.f(1,2);
    return 0;
} 
```

during compilation I get:

```
g++ -std=c++11 file.cpp 
file.cpp: In function ‘int main()’:
file.cpp:29:9: error: no matching function for call to ‘B::f(int, int)’
file.cpp:29:9: note: candidate is:
file.cpp:20:16: note: virtual void B::f(int)
file.cpp:20:16: note:   candidate expects 1 argument, 2 provided 
```

When I tried to use override after B's f(int), I got the same error.

Is it possible in C++ to override only 1 method? I've been searching for a code example using `override` that will compile on my machine and haven't found one yet.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T15:28:23.353

The problem is that your virtual function `f()` in class `B` **hides** `A`'s non-virtual overload with an identical name. You can use a `using` declaration to bring it into scope:

```
class B : public A
{
    public:
        using A::f;
    //  ^^^^^^^^^^^

        virtual void f(int i)
        {
            cout << "B's f(int)!" << endl;
        }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-16T15:30:19.077

您将名称“f”覆盖为方法名称。因此，任何重载也将被覆盖。

您可以使用`using`关键字，只是告诉编译器也查看基类：

```
class B : public A
{
    public:
        using A::f;
        virtual void f(int i)
        {
            cout << "B's f(int)!" << endl;
        }
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-16T15:32:05.547

您被 C++ 中名称查找的工作方式所困扰。编译器搜索连续的范围，直到找到一个范围内至少有一个名称匹配的项目。

假设 item 是一个函数，然后它会在它在该范围内找到的具有该名称的函数之间进行重载解析。如果这些都不起作用，它就不会*继续*搜索更多范围以找到更合适的范围。

但是，在这种情况下，您可以让它搜索父类：

```
class B : public A
{
    public:
        using A::f;
        virtual void f(int i)
        {
            cout << "B's f(int)!" << endl;
        }
}; 
```

乍一看，该`using`声明可能会产生歧义。例如，`using A::f;`现在有*两个* 函数在的范围内`f(int)`可见（和）。C++ 也有一些规则来涵盖这一点，所以如果你添加（例如）在（就地）你仍然不会有歧义——它会像你期望的那样调用。`B``A::f(int)``B::f(int)``b.f(3);``main``using A::f;``b::f(int)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T15:27:41.853

The function `f` defined in derived class hides the base class functions by the name `f`.
To bring the hidden function in scope of derived class you need to add:

```
using A::f; 
```

to your base class definition.

**Good Read:**

**[What's the meaning of, Warning: Derived::f(char) hides Base::f(double)?](http://www.parashift.com/c++-faq/hiding-rule.html)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T15:29:18.710

是的，可以只覆盖一个类的一个方法，使其成为虚拟方法。在继承类中声明时，非 virtual 将被遮蔽。

# c# - MVC EF5 Table column updated by trigger but value not returning

> ID：15451025
> 
> 赞同：0
> 
> 时间：2013-03-16T15:26:03.083
> 
> 标签：c#, entity-framework-5

I have defined a column in a SQL Server Table and set its value using an After Insert Trigger. This value is computed based on recently inserted identity. However, I am unable to get this value in the Controller after the database changes are saved.

Here is my (pseudo) code in the controller:

```
var model = new model();

model.column1 = abc;
model.column2 = xyz;
model.column3 = "CC";

// db object below is a model inheriting DbContext

db.table.Add(model);
db.SaveChanges();

// Do some operations not related to this table

// Try retrieving value of column3 
// which should have been updated by the after insert trigger

var column3Value = db.table.find(model.id).column3; 
```

What aspects of EF5 do I miss here?

Below is my trigger code:

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TRIGGER [dbo].[SetColumn3]
ON [dbo].[Table]
AFTER INSERT
AS
BEGIN
    SET NOCOUNT ON
    UPDATE Table
    SET Column3 = RTRIM(inserted.Column3) + CAST(inserted.Id + 100 AS nvarchar(10))
    FROM inserted
    WHERE Table.Id = inserted.Id;
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:31:18.817

`Column3``DatabaseGeneratedOption.Identity`如果要取回触发器在插入期间创建的数据，则必须定义属性。此声明告诉 EF 该值是在插入期间在数据库中创建的，并且它必须查询该值。

# php - Faster way to read and output images in browser with PHP

> ID：15451026
> 
> 赞同：1
> 
> 时间：2013-03-16T15:26:15.657
> 
> 标签：php, gd, fopen, file-get-contents, imagecreatefrompng

I am reading images from minimum of `1x1` pixel to maximum of `1600x1600` pixels. I have written three PHP methods and are working perfectly.

```
// using FGC
function output_fgc($filename)
{
    header("Content-Type: image/png");
    echo file_get_contents($filename);
}

// using fopen
function output_fp($filename)
{
    $handle = fopen($filename, 'rb');

    header("Content-Type: image/png");
    header("Content-Length: " . filesize($filename));

    fpassthru($handle);
}

// using GD
function output_gd($filename)
{
    $im = imagecreatefrompng($filename);

    header('Content-Type: image/png');

    imagepng($im);
    imagedestroy($im);
} 
```

It seems performance is same for all methods. Just want to know which uses more server resources? Are there any better methods than this? Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:46:31.747

> 当用户请求 200x100 像素占位符图像时，第一次使用 GD 创建，保存和输出，下一次如果请求相同大小，我只是读取保存的文件并输出到浏览器，而不是再次创建新文件。

如果您可以使用 Apache 的 mod_rewrite 模块，那么还有一种更有效的方法，即在创建图像后根本不需要 PHP。请参阅[创建调整大小的图像缓存但防止滥用](https://stackoverflow.com/questions/11169069/create-resized-image-cache-but-prevent-abuse)

从那里偷来的：

HTML：

```
<img src="images/cache/200x150-picture_001.jpg" /> 
```

.ht 访问代码：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ images/image.php?f=$1 [L] 
```

此技术检查“缓存”文件夹中是否存在正确大小/文件名的图像，只有在不存在时，它才会调用您的 PHP 脚本。您的脚本必须解析尺寸信息（如`200x100`您所说）、调整大小并输出图像。下次有人请求图像时，Apache 将静态地为它提供服务，从而在此过程中节省资源。

唯一的缺点是 PHP 脚本只会被调用一次，所以如果原始图像更改，更改将永远不会传播到调整大小的版本。您可能需要偶尔擦除所有调整大小的图像以防止这种情况发生，或者如果原始图像发生更改，则删除所有调整大小的图像。

在使用 PHP 输出图像时，请务必发送缓存信息。参见例如[如何在 PHP 中使用 HTTP 缓存标头](https://stackoverflow.com/q/1971721)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-09T21:57:32.947

使用`readfile($filename)`. 这是在 php.ini 中读取任何文件的最佳选择。

```
function output_rf($filename)
{
    header("Content-Type: image/png");
    readfile($filename);
} 
```

# ios - Delete/Edit album group in ALAssetsLibrary, is it possible?

> ID：15451032
> 
> 赞同：1
> 
> 时间：2013-03-16T15:27:00.603
> 
> 标签：ios, xcode, photos, alassetslibrary

If an app creates a group in ALAssetsLibrary via "addAssetsGroupAlbumWithName:", is there a way to delete it again from within that app or change its name ?

cheers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:52:16.647

现在没有可用的**删除**选项。

# ember.js - Ember JS: nested objects and architecture

> ID：15451034
> 
> 赞同：0
> 
> 时间：2013-03-16T15:27:14.290
> 
> 标签：ember.js

I am having a lot of (painful) problems with nested objects in Ember. I think I might be tackling things the wrong way since I suspect it is a fairly standard thing to do.

Say I have an Object A that "has many" B, and each B "has many" C, etc (this architecture basically matches my relational DB schema).

I don't need nested routes for these, so I thought a natural way to render an object like A was to use partials. Something like:

Template for A:

```
...A stuff...
{{#each Bs}}
    {{ partial "show_B" }}
{{/each}} 
```

and so on.

The problem is I would like the child objects to have their own controllers. I know that there is the new itemController since RC1 ([http://emberjs.com/blog/2013/02/15/ember-1-0-rc.html](http://emberjs.com/blog/2013/02/15/ember-1-0-rc.html)) which is useful, but somehow limited. Let's say that further down in the hierarchy, C objects each have a single D object. So C template would look like this:

```
... C stuff...
{{#with c.D}}
    {{ partial "show_D" }} // How do I get this partial to have its own controller? 
{{/with}} 
```

I guess the new `{{control}}` could help here, but I am having a lot of troubles using it (context not being set properly). In addition, it seems to me if it has just been added (and is still very much under development) it probably means there should be another way to do that. Lastly, it feels a bit weird to use two different APIs: "itemController" for list of items, and "{{control}}" for single items - at the end of the day, I am just trying to tie an object to a controller in both cases.

Could someone point me in the right direction here?

Thanks!

PJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:19:07.417

我相信你已经在正确的方向。你需要使用`control`. 我想这就是它被添加的原因。

在我看来，和之间的区别在于`itemController`不需要`control`相应`itemController`的视图/模板，因此您仍将处于同一视图中，并且您的模板继续内联，而`control`您需要单独的视图和模板。

如果其中一个`control`获胜`itemController`，我认为这是`control`因为它目前在两种情况下（数组和单个对象）都有效，并且当前可以替换`itemController`.

请注意，如果您使用`control`了`{{#each Bs}}`而不是`itemController`，则需要定义控制器、视图和模板而不是 a `partial`（或者让 Ember.js 为您生成它们）。

像这样：

```
{{#each Bs}}
  {{control "showB" this}}
{{/each}} 
```

对于 D：

```
{{control "showD" D}} 
```

但我同意你的观点，`control`仍然是错误的，并且`itemController`非常相似`control`，两者兼有是没有意义的。两者都相对较新，所以我认为这就是您遇到困难的原因。但这是对 github 或讨论的讨论[。ember.js.com](http://discuss.emberjs.com/)

一个荒谬的解决方法是创建一个由包含 D 和 use 的数组组成的计算属性，`each dArray`并且`itemController`:) 但尝试`control`为您工作显然更好。

在最坏的情况下，使用`{{view}}`帮助器并在视图中放置一些逻辑，使其充当控制器（尽管不推荐这样做）。

# java - Calling Repaint() on Java onPaint()

> ID：15451035
> 
> 赞同：0
> 
> 时间：2013-03-16T15:27:17.357
> 
> 标签：java, graphics, rendering, mouseover, graphics2d

I'm currently implementing a mousehover script in Java for a button with full graphics (no JButton). here's my piece of code:

```
@Override
public void mouseMoved(MouseEvent e){
    if (btnExit.getBound().contains(e.getX(), e.getY())){
        btnExit.setStatus(BUTTON_STATE.HOVER);
    } else {
        btnExit.setStatus(BUTTON_STATE.IDLE);
    }
    System.getInstance().repaint();
} 
```

the repaint method is always called when my mouse moves.

The question is > is it a good implementation for the hover action? or are there better implementations? because I thought that calling repaint() everytime my mouse move is quite heavy in computation.

THX b4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:12:37.857

调用[repaint()](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#repaint%28long%29)并不意味着组件将立即重新绘制。此调用只是将一个条目放入重绘请求队列中，在许多情况下该条目可能与其他条目合并。

如果您怀疑`repaint()`可能被调用的方式过于频繁，请使用接受最大时间的版本，之后应该重新绘制对象。例如，如果您`button.repaint(1000)`在同一秒内调用 100 次，则只会重新绘制一次。您还可以指定应该重新绘制的区域（而不是整个屏幕），但这只有在您的实现确实对这种部分重新绘制的工作量较少时才有效。

`btnExit`此外，您可以在整个应用程序框架上而不是在整个应用程序框架上调用重绘。

# listbox - ListBox 中的 AutoHotkey 类型条目

> ID：15451040
> 
> 赞同：1
> 
> 时间：2013-03-16T15:27:48.590
> 
> 标签：listbox, autohotkey, reusability

我是 AutoHotkey 的新手，没有编程经验，很抱歉问你们中的许多人可能是一个非常平凡的问题。我对 AutoHotkey 的主要用途之一是完成我从 AutoHotkey 列表框保存的记录中的数据。使用对其他论坛问题的回复，我有一个工作脚本如下：

```
:*:\lb::
Gui, Add, ListBox, h100 vLB, apple||bannana|cantaloup|kiwi|orange|pomegranate|strawberry
Gui, Add, Button, Default, Input
Gui, Show
return

ButtonInput:
Gui, Submit
SendInput, %LB%
Gui, Destroy
Return 
```

我想在上面的“Gui, Submit”之后包含“, NoHide”，但如果我这样做了，脚本就不再起作用了。有什么方法可以让我只使用一次热字串来启动 ListBox 然后让它留在桌面上，这样我就可以选择其他项目，当我到达记录中的其他地方时，我需要选择不同的条目从列表框？如果我从脚本中删除“Gui, Destroy”，该脚本也不再有效，因此这似乎不是解决方案。提前感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:08:00.207

我刚刚测试了这个修改后的脚本，它在启动时会一直保持在最前面，直到你关闭它。希望那是你想要的。如果关闭 Gui，AHK 脚本也会关闭。

```
SetTitleMatchMode, 2

;:*:\lb::
Gui, Add, ListBox, h100 vLB, apple||bannana|cantaloup|kiwi|orange|pomegranate|strawberry
Gui, Add, Button, Default, Input
Gui, +AlwaysOnTop
Gui, Show
return

ButtonInput:
Gui, Submit, NoHide
;MsgBox, %LB%
ControlSend,, %LB%, Part of your App title in the windows bar OR ahk_class ABCD (via AHK Windows Spy)
Return

GuiClose:
GuiEscape:
Gui, Destroy
ExitApp 
```

# 更新：

我忍不住，但不得不添加更多功能。您现在可以双击一个项目，它会自动移动到下一个单元格。

```
#SingleInstance Force
#installKeybdHook
#Persistent

Gui, Add, ListBox, h100 vMyListBox gMyListBox, apple|bannana|cantaloup|kiwi|orange|pomegranate|strawberry
Gui, Add, Button, Default, Input
Gui, +AlwaysOnTop
Gui, Show
return

MyListBox:
if A_GuiControlEvent <> DoubleClick
    return
GuiControlGet, MyListBox  ; Retrieve the ListBox's current selection.
Send, !{Esc}
Sleep, 200
SendInput, %MyListBox%{Tab}
return

ButtonInput:
Gui, Submit, NoHide
Send, !{Esc}
Sleep, 200
SendInput, %MyListBox%{Tab}
Return

GuiClose:
GuiEscape:
Gui, Destroy
ExitApp 
```

# c# - Double buffering doesn't work on a panel?

> ID：15451042
> 
> 赞同：3
> 
> 时间：2013-03-16T15:28:07.720
> 
> 标签：c#, graphics, doublebuffered

I'm working on a small painting program similar to ms paint. At the moment, I'm trying to implement 'select function'. I'm facing flickering problem so I've did some researches and I found out, that I should create my own Panel class.

```
public class MyDisplay : Panel
    {   
        public MyDisplay()
        {
            this.DoubleBuffered = true;            

            this.SetStyle(ControlStyles.UserPaint |
              ControlStyles.AllPaintingInWmPaint |
              ControlStyles.ResizeRedraw |
              ControlStyles.ContainerControl |
              ControlStyles.OptimizedDoubleBuffer |
              ControlStyles.SupportsTransparentBackColor
              , true);

            this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
            this.SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
            this.UpdateStyles();
        }
    } 
```

In main form there are fields:

```
MyDisplay panel1 = new MyDisplay();
Graphics graphics1 = panel1.CreateGraphics(); 
```

I use 3 events on a panel:

1.  MouseDown - I get here Point p1
2.  MouseMove - thats, where I get flickering problem, I'm calling `graphics1.drawRectangle(...)` and `graphics1.Clear()` everytime clicked mouse moves
3.  MouseUp - I just draw rectangle for the last time.

What's wrong with that? Why do I still face flickering problem even though whole panel is white and theres only 1 rectangle in there? Thank you.

edit:

I've overwrote OnPaint method but I still don't know what to do next.

```
 protected override void OnPaint(PaintEventArgs e)
    {
        // Call the OnPaint method of the base class.
        base.OnPaint(e);
        // Call methods of the System.Drawing.Graphics object.
        e.Graphics.DrawString(Text, Font, new SolidBrush(ForeColor), ClientRectangle);
    } 
```

edit2: Should I paint on bitmap/image and override OnPaint method to copy image from there and paste it to panel?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:03:15.573

删除定义*graphics1*字段的行。

使用通过 PaintEventArgs 对象传入的 Graphics 对象，在 OnPaint 的覆盖中执行所有绘制。使用方法 Invalidate()、Refresh() 和 Update() 来控制从其他代码重新绘制的时间。

如果您在此设计中遇到任何特定困难，请回调。

# xml - 如何将固定数字添加到 XML 文件中某行的特定属性？

> ID：15451047
> 
> 赞同：1
> 
> 时间：2013-03-16T15:28:52.957
> 
> 标签：xml, perl

我有一个 XML 文件，其中包含如下几行：

```
<Teste  Time="380643" TT="380592" Win="-2" Xl="28" Yl="55" />
<Teste  Time="380660" TT="380592" Win="-2" Xl="28" Yl="55" /> 
```

我需要为`Time`属性的每个实例添加一个固定数字，例如`380643 + 10000`，并获取一个带有新行的 XML 文件，例如`<Time="390643" TT="380592" Win="-2" Xl="28" Yl="55"/>`. 这可以使用 Perl 吗？如果是这样，怎么做？如果没有，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:41:07.897

使用[XML::Twig](http://search.cpan.org/~mirod/XML-Twig-3.42/Twig.pm)和`twig_roots`：

```
my $twig=XML::Twig->new(   
  twig_roots => 
    { Time => sub { $_->set_att( TT => $_->att('TT')+10000 )->flush; } 
    },
  twig_print_outside_roots => 1 
);
$twig->parsefile('myXmlFile.xml'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:36:29.417

你可以这样做：

```
#!/usr/bin/perl

# use module
use XML::Simple;

# create object
$xml = new XML::Simple;

# read XML file
$data = $xml->XMLin("data.xml");

# access XML data
$time = $data->{Time}->TT;
//do your stuff here 
```

更多： [这里](http://www.techrepublic.com/article/parsing-xml-documents-with-perls-xmlsimple/5363190)

# linux - 在linux上从一开始就设置进程的cpu亲和力

> ID：15451049
> 
> 赞同：14
> 
> 时间：2013-03-16T15:28:56.613
> 
> 标签：linux, linux-kernel, operating-system, taskaffinity

我想在linux启动时设置进程的cpu亲和力。

有sched_setaffinity、taskset等方法，但需要进程的processid。它们可能会导致潜在的迁移，就像一个进程在一个核心上启动但在使用 sched_setaffinity/taskset 之后，它们被迁移到另一个核心。

我想做的是从一开始就在特定核心上启动一个新进程。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-16T15:38:06.927

`taskset`既可用于设置正在运行的进程的亲和性，也可用于启动具有一定亲和性的进程，请参见

*   [如何在 Linux 中的特定 CPU 中启动您的应用程序（CPU 亲和性）？](https://web.archive.org/web/20200128140005/http://karuppuswamy.com/wordpress/2010/09/23/how-to-launch-your-application-in-a-specific-cpu-cpu-affinity-in-linux/).
*   [任务集的手册页](http://linux.die.net/man/1/taskset)

**概要**

```
taskset [options] mask command [arg]...
taskset [options] -p [mask] pid 
```

以下命令将在 CPU 1 和 2（或 0 和 1）中启动 Google Chrome 浏览器。掩码为 0×00000003，命令为“google-chrome”。

```
taskset 0×00000003 google-chrome 
```

# java - Java 2D MultiJPanel 图形

> ID：15451052
> 
> 赞同：0
> 
> 时间：2013-03-16T15:29:17.197
> 
> 标签：java, swing, graphics

`J2D.java`：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class J2D extends JFrame {
    int x, y = 0;

    public J2D() {
        setTitle("2D");
        setSize(613, 253);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setVisible(true);
            add(new panel ());
            add(new panel2());
            Thread th = new Thread(){
                @Override
                public void run() {
                    while(true){
                        x++;y++;
                        repaint();
                        try {
                            Thread.sleep(50);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }
            };
            th.start();
    }

    private class panel extends JPanel{
        public void paintComponent(Graphics g){
            //super.paintComponent(g);
            Graphics2D g2d = (Graphics2D)g;
            g2d.setColor(Color.DARK_GRAY);
            g2d.drawString("Fear", x, y);

        }
    }

    private class panel2 extends JPanel{
        public void paintComponent(Graphics g){
            //super.paintComponent(g);
            Graphics2D g2d = (Graphics2D)g;
            g2d.setColor(Color.RED);
            g2d.drawString("Fear2", x + 15, y);
        }
    }
} 
```

当我运行此代码时，它只显示`Fear2`标签。我需要 2 个类并想添加两个类，但它如何正常工作？我应该写`paint()`和`paintComponent()`方法吗？

# c# - 照片上传到 PHP 页面 C# Stream ReadTimeout

> ID：15451058
> 
> 赞同：1
> 
> 时间：2013-03-16T15:29:38.347
> 
> 标签：c#, httpwebrequest, timeout, windows-phone-8

我有与这里提到的相同的代码：[Photo upload with parameters to a PHP page](https://stackoverflow.com/questions/10373250/photo-upload-with-parameters-to-a-php-page)

在 Windows 手机上 8\. 我的网络服务器收到请求。转储 $_FILES 给出：

```
Array
(
    [media] => Array
        (
            [name] => pvkeumhbpt.jpg
            [type] => application/octet-stream
            [tmp_name] => /tmp/php4l8jVz
            [error] => 0
            [size] => 0
        )

) 
```

图像已创建，一切正常，但大小为 0B（黑色图像），在调试器中，我在处理 httpWebrequest 时有图片的 ReadTimeout。

想法赞赏...

# node.js - Node.js 0.4.12 中的集群模块问题

> ID：15451061
> 
> 赞同：1
> 
> 时间：2013-03-16T15:30:03.603
> 
> 标签：node.js

我正在设置一个 Vagrant 环境来对使用旧版本 Node.js 的项目进行一些工作。我一直在努力克服各种问题，并遇到了一个让我有点卡住的问题。该项目使用集群模块（我假设它是核心模块），当我尝试启动节点服务器时，我得到了这个：

```
$ node /vagrant/node/bin/server.js
  info - worker 0 spawned
  info - worker 1 spawned
  info - listening for connections
  info - master started
uncaughtException
{ stack: [Getter/Setter],
  arguments: undefined,
  type: undefined,
  message: 'Non-socket exists at  /vagrant/node/cluster.repl' }
  warning - kill(SIGKILL)
Error: Non-socket exists at  /vagrant/node/cluster.repl
    at net.js:1054:17
  debug - exit 
```

除非我的 Google Fu 在过去 24 小时内非常虚弱，否则 Google 没有什么可提供的。

下面是启动服务器的代码：

```
server = cluster(server)
 .use(cluster.repl(root + '/cluster.repl'))
 .use(cluster.stats({connections: true, requests: true}))
 .use(cluster.reload(root))
 .listen(port) 
```

有人知道会发生什么吗？

# php - 在站点页面之间切换时记住经过身份验证的用户

> ID：15451072
> 
> 赞同：-1
> 
> 时间：2013-03-16T15:31:11.650
> 
> 标签：php, javascript, ajax, cookies

当用户登录时，我发送一个 ajax 请求，如果密码和登录名正确，我会收到用户名和姓氏作为响应。所以我展示了用户的菜单，我在其中插入了他的名字和姓氏。但是如果用户点击指向我网站另一个页面的链接怎么办？所以我决定将用户的信息存储在 cookie 中。但我认为这不是一个好主意。是否有另一种方法可以做到这一点而不必干扰后端逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:34:21.117

使用它来设置密码：

```
session_start();
$_SESSION['password'] = $password; 
```

使用它来检索密码：

```
$password = $_SESSION['password']; 
```

当您网站的所有选项卡关闭时，所有会话变量都将被清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:39:43.177

使用会话在页面之间“记住”用户。像这样：

用户登录并且您有数据，例如 $_POST['username'];

因此，在每个页面上，您都需要添加

```
session_start(); 
```

这样会话就被初始化了。然后你可以像这样向你的会话添加一些数据：

```
$_SESSION['username'] = $_POST['username']; 
```

现在在下一页上，您需要做的就是引用会话变量来找出用户是谁：

```
session_start();
if (isset($_SESSION['username'])){
    echo "Welcome ". $_SESSION['username'];
}else{
    echo "Please log in!";
} 
```

希望能帮助您入门。有关会话的更多详细信息，请参见此处：[http ://www.php.net/manual/en/reserved.variables.session.php](http://www.php.net/manual/en/reserved.variables.session.php)

享受！

# html - Fancybox 2 图像不会出现在画廊和推特引导程序上

> ID：15451075
> 
> 赞同：0
> 
> 时间：2013-03-16T15:31:29.203
> 
> 标签：html, twitter-bootstrap, fancybox-2

好吧，我无法开始使用 fancybox 画廊示例的简单示例，单击时它只会进入图像页面并且 beforeLoad 事件激活，但不会在框中显示图像。

我正在使用 jquery 版本 1.8.3 和 twitter 2.3.1

脚本本身添加在页面末尾：

```
<script type="text/javascript">

  $(document).ready(function() {
    // $('ul.thumbnails').find('a.fancybox').click(function(e) {
    //   e.preventDefault();
    // });

    $('ul.thumbnails').find('a.fancybox').fancybox({
      beforeLoad : function() {
        console.log('Loaded');
      }
    });
    console.log('fancybox start');

     //This example works!!!
    // $.fancybox( '<div><h1>Lorem Lipsum</h1><p>Lorem lipsum</p></div>', {
    //   title : 'Custom Title'
    // });
  });
</script>

[
<a href=​"/​realestate/​image/​7150209096969e5da60a8e7283afc453.png/​800" class=​"thumbnail fancybox">​
<img style=​"width:​ 360px;​ height:​ 270px;​" alt src=​"/​realestate/​image/​7150209096969e5da60a8e7283afc453.png/​360">​
</a>​
, 
<a href=​"/​realestate/​image/​8f31e46f9ab617d00541f1bc60e2e3b1.png/​60" class=​"thumbnail fancybox">​
<img style=​"width:​ 60px;​ height:​ 60px;​" alt src=​"/​realestate/​image/​8f31e46f9ab617d00541f1bc60e2e3b1.png/​60">​
</a>​
, 
<a href=​"/​realestate/​image/​0a98662cc5df0c8b1bc97a9a7e8b9707.png/​60" class=​"thumbnail fancybox">​
<img style=​"width:​ 60px;​ height:​ 60px;​" alt src=​"/​realestate/​image/​0a98662cc5df0c8b1bc97a9a7e8b9707.png/​60">​
</a>​
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:12:41.037

为了解决这个问题，FancyBox 不喜欢像 /80 这样的 url 结尾，所以尝试制作不同的 img 路由。另一个问题是 Fancybox 假设没有 img 扩展的 url 是 html 内容，所以我将选项类型设置为仅图像。

{类型：'图像'}

# wpf - WPF 从后面的代码中选择应该播放情节提要动画的控件

> ID：15451079
> 
> 赞同：0
> 
> 时间：2013-03-16T15:31:46.650
> 
> 标签：wpf, vb.net, xaml, animation

我创建了一个 MainMenu 和两个动画：ZoomIn 和 ZoomOut。MainMenu 将充满 Canvas，每个都包含图标。我想要做的是单击一个按钮，当前可见面板会随着 ZoomOut 消失，而单击的面板会随着 ZoomIn 出现。

到目前为止，我已经设法使用以下代码从代码后面调用动画：

```
Dim ZoomOut As Storyboard = DirectCast(FindResource("storyZoomOut"), Storyboard)
    ZoomOut.Begin() 
```

但现在我想让特定的控件设置动画。是否可以同时为两个不同的控件设置动画？同时像 Canvas1 ZoomOut 和 Canvas2 ZoomIn 一样？

```
<Storyboard x:Key="storyZoomOut">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="pnlCompras">
            <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="0.8"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="0.6"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0.4"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0.2"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0.0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="pnlCompras">
            <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="1.04"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1.09"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1.15"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="1.3"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="pnlCompras">
            <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="1.04"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1.09"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1.15"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="1.3"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="pnlCompras">
            <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="pnlCompras">
            <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard> 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:33:05.913

您可以从 Storyboard 中的所有动画中删除该`Storyboard.TargetName="pnlCompras"`设置，然后通过[Storyboard.Begin(FrameworkElement)](http://msdn.microsoft.com/en-us/library/ms605709.aspx)在任何控件上运行 Storyboard 。

```
Dim ZoomOut As Storyboard = DirectCast(FindResource("storyZoomOut"), Storyboard)
ZoomOut.Begin(someControl) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-06T00:54:08.470

您也可以在活动中使用这些行

```
Dim ZoomOut As Storyboard = DirectCast(FindResource("storyZoomOut"), Storyboard)
ZoomOut.Begin( --Control-- ) 
```

或者

用这条线测试

```
DirectCast(FindResource("storyZoomOut"), Animation.Storyboard).Begin() 
```

# ruby-on-rails - 如何在 Facebook 页面标签应用程序中添加用户身份验证并要求更多 FB 用户权限？

> ID：15451081
> 
> 赞同：1
> 
> 时间：2013-03-16T15:31:50.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, facebook, omniauth, facebook-page

我正在设计一些需要 FB 用户信息的 FB Page Tab 应用程序。一旦用户点击页面上安装的应用程序的选项卡，我想请求用户许可。然后，如果我得到用户和页面的信息，我可以继续使用我的应用程序。

问题是我希望用户在点击选项卡后立即被引导到 oauth 对话框，而不是单击按钮。这就是为什么我不使用弹出方案来获得用户许可的原因。大多数浏览器都不允许出现没有点击的弹出窗口。到目前为止我所做的是使用“使用 CANVAS APPS 登录”的说明

[https://developers.facebook.com/docs/howtos/login/login-for-canvas/](https://developers.facebook.com/docs/howtos/login/login-for-canvas/)

这使我可以在用户点击选项卡后立即将用户引导到 oauth 对话框，并且还有回调让我获得用户许可并将应用程序作为 Canvas 应用程序运行，这是我真正不想要的。问题是当用户点击选项卡时我得到页面 ID，但是当用户返回回调 URL 时，请求对象包含用户信息而不是页面 ID。我曾尝试将页面 id 存储在会话中，但是当应用程序在回调 url 上返回时，它会以某种方式被破坏。我可能会将它存储在数据库中并再次访问它，但我不确定我应该这样做。

我已经研究过，一种方法是通过存储页面链接和 id 然后重新生成链接并将其用作回调来将用户回调到您的页面选项卡应用程序。也不太热衷于此。所有这些问题都是因为您无法在 iframe 中运行 oauth 对话框。

我正在为此使用 Rails 及其omniauth-facebook gem。

这里有一些链接，其中讨论了一些相同的问题并提出了一些建议。

[用户身份验证后重定向回页面选项卡？](https://stackoverflow.com/questions/8158657/redirect-back-to-page-tab-after-user-authenticates)

[在 Facebook 页面选项卡应用程序上为未登录用户自动调用 FB.login](https://stackoverflow.com/questions/11972450/automatically-invoking-fb-login-on-facebook-page-tab-app-for-non-logged-in-user)

我已经开始了这个新线程，因为上面的那些已经很老了。我知道我的困境可能是微不足道的，我可能会遗漏一些小问题。但任何帮助将不胜感激。

请务必告诉您是否需要任何代码来使我的问题更清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:43:35.723

> 问题是我希望用户在点击选项卡后立即被引导到 oauth 对话框，而不是单击按钮。这就是为什么我不使用弹出方案来获得用户许可的原因。大多数浏览器都不允许出现没有点击的弹出窗口。

在画布/页面选项卡应用程序中，您可以在调用时设置参数`display: "async"`（在用于传递`scope`参数的同一对象中）`FB.login`- 这样，它不会打开弹出窗口，而是一种模式对话框，在整个 Facebook 页面；并且因为它不是一个*真正的*弹出窗口，所以即使在页面加载时直接调用它也不会被阻止，到目前为止没有任何用户交互。

# javascript - 使用 2D 渲染上下文的 HTML5 Canvas 转换问题

> ID：15451089
> 
> 赞同：8
> 
> 时间：2013-03-16T15:33:04.607
> 
> 标签：javascript, html, canvas, 2d, transformation

我正在尝试使用 2D 渲染上下文在 HTML5 Canvas 中制作一种相机。正如您在下面绘制的图片中看到的那样，这就是我想要实现的目标：

1.  假设黑色的是相机的眼睛，我希望它能够与画布一起移动（编辑:)（如图中的绿色箭头），并且看起来就像它在物体周围移动一样，就像红色的一样（我相信这是视差的东西）。
2.  每当我在物体周围旅行时，当我旋转相机时，我希望它旋转相机的中心（参见蓝色旋转）。

我已经做到了，每当我移动相机时，红色框可以在相机中心旋转，[编辑]，这是一个简化的例子：

```
*Within the requestAnimationFrame (game loop)*

...

ctx.canvas.width = window.innerWidth;
ctx.canvas.height = window.innerHeight;
ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

ctx.save();
    // draw camera eye.
    ctx.lineWidth = 3;
    ctx.fillStyle = "black";
    ctx.beginPath();
    ctx.moveTo(ctx.canvas.width / 2 - 50, ctx.canvas.height / 2);
    ctx.lineTo(ctx.canvas.width / 2 + 50, ctx.canvas.height / 2);
    ctx.moveTo(ctx.canvas.width / 2, ctx.canvas.height / 2 - 50);
    ctx.lineTo(ctx.canvas.width / 2, ctx.canvas.height / 2 + 50);
    ctx.stroke();

    // Rotate by camera's center.
    ctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2);
    ctx.rotate(worldRotate);
    ctx.translate(worldPos.x, worldPos.y);

    //
    // ADD WORLD ENTITIES BELOW to be viewed by the camera.
    //

    ctx.fillStyle = "red";
    ctx.fillRect(-5, -5, 10, 10);
ctx.restore();

... 
```

（编辑：将转换对象更改为 ctx 以进一步简化代码。）

变量 worldRotate 和 worldPos 可通过输入更改以进行测试。

编辑：**[这是一个真实的例子，这个例子让我更清楚地了解我想要实现的目标](https://dl.dropbox.com/u/53141171/samples/stackoverflow/index.html)**。

尝试将其向右或向左移动，看看会发生什么。并尝试向右旋转相机，使红色框与 x 轴对齐，然后移动相机，看看它如何完美地像我想要的相机一样工作。

（注：推荐的测试浏览器是IE10，最新的chrome，最新的firefox，最新的opera，以及桌面版safari 5+）。

**问题是**，当我移动相机（通过改变worldPos，使红色框远离相机），旋转（使用worldRotate），然后再次移动相机，红色物体总是朝着紫色箭头移动而不是橙色箭头。**无论相机中心是否旋转，我都希望红色框向橙色箭头移动。**

编辑：据我所知，很明显旋转会导致平移混乱，因为旋转会改变红框的坐标系，但我仍然不知道如何处理它，至少让无论红框的当前旋转坐标系如何，平移都像橙色箭头一样。

对此有任何解决方案吗？谢谢你。

![示例图片](../Images/571e20a4e1800df90262b9adbc43b4cd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T02:48:12.103

**[根据 OP 的进一步澄清进行编辑]**

好的，我现在对你的问题有了更好的理解。你想让你的相机镜头*透视*你世界中的物体。

如果您的相机**仅**在与您的世界对象相关的 X 方向上看，您可以简单地使用视差。为此，您可以在画布上应用 2 个图层，这些图层在 X 方向上以不同的速度滚动。这是全景视差。因此，对于每一帧，像这样的伪代码绘制 2 层：

```
// Move the back layer
backLayerX += 3;
ctx.save();
ctx.translate(backLayerX,backLayerY);
// draw the objects in your back layer now
ctx.translate(-backLayerX,-backLayerY);
ctx.restore();

// Move the front layer faster than the back layer
frontLayerX += 10;
ctx.save();
ctx.translate(frontLayerX,frontLayerY);
// draw the objects in your front layer now
ctx.translate(frontLayerX,frontLayerY);
ctx.restore(); 
```

如果您在 X 方向上移动相机本身，您还必须更改前后图层的平移速度。

如果您的相机也相对于您的世界对象在 Z 方向（相机更近）查看，则该过程要复杂得多 **。**

例如，如果您靠近一座雕像，雕像会显得更大——ctx.scale(2,2)。背景景物也变大了，但没那么快——ctx.scale(1.25,1.25)。

然后如果你也向左走一步，那么雕像的左侧比雕像的右侧略大——上下文倾斜。背景也偏斜，但非常非常轻微。

然后，如果你也站在椅子上（改变 Y 方向），你会得到另一种倾斜。

即使有雕像，您的相机也永远无法移动，因为您的雕像是 2D 的——只是雕像的纸板切口。从摄像机的角度来看，雕像实际上会消失！

我希望我已经让您开始了您的项目，但完整的答案是 waaaaaaaaaay 超出了 Stackoverflow 的答案——这是一门关于计算机图形学的大学课程。

我确实有一个在线教程推荐给你。Wolfgang Hurst有一个关于 Perspective 的**精彩**讲座。这是他的 13 部分在线大学课程中的第 7 讲。您可以通过两种方式查看他的讲座。广泛地查看以了解赋予相机视角所涉及的概念。或深入查看并获得数学算法： [http ://www.youtube.com/watch?v=q_HA-x5AujI&list=PLDFA8FCF0017504DE](http://www.youtube.com/watch?v=q_HA-x5AujI&list=PLDFA8FCF0017504DE)

祝你好运和学习...... :)

**[以下内容解决了 OP 的原始问题]**

这是有关如何在画布中成功旋转任何内容的快速教程

整个世界围绕一个 X/Y“注册点”旋转。

您可以通过在 ctx.rotate(angle) 之前执行 ctx.translate(X,Y) 来设置注册点。

在这个旋转空间中绘制“世界”对象后，您必须通过执行 translate(-X,-Y)**重新设置注册点。**

所以世界旋转是这样的：

*   上下文.save();
*   Context.translate(registrationX, registrationY);
*   上下文.旋转（角度）；
*   画东西。
*   Context.translate(-registrationX, -registrationY);
*   上下文.restore();

**这是理解旋转和注册点的好方法：**

*   拿一张纸，在纸上画一个字母。
*   拿一支铅笔并在页面上的任何位置按住它。
*   --铅笔点是注册点。
*   --铅笔点是平移（X，Y）。
*   围绕铅笔尖旋转纸张。
*   --纸张的旋转为rotate(angle)
*   ——注意字母是如何随着纸张移动而旋转的。
*   --您的红框将像字母一样旋转（围绕您的相机注册点）
*   将纸张重置为垂直旋转。
*   --这个“不旋转”就像翻译（**-X，-Y**）
*   将铅笔移动到纸上的另一个点
*   --再一次，这就像 translate(newX,newY)
*   再次旋转纸张，注意字母如何以不同的方式旋转。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/nj29x/](http://jsfiddle.net/m1erickson/nj29x/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:30px; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    var camX=100;
    var camY=100;
    var camRadius=40;
    var camDegrees=0;

    draw();

    function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
        drawWorldRect(75,75,30,20,0,"blue","A");
        drawWorldRect(100,100,30,20,15,"red","B");
        drawCamera();
    }

    function drawWorldRect(x,y,width,height,angleDegrees,fillstyle,letter){
        var cx=x+width/2;
        var cy=y+height/2;
        ctx.save();
        ctx.translate(cx, cy);
        ctx.rotate( (Math.PI / 180) * angleDegrees);
        ctx.fillStyle = fillstyle;
        ctx.fillRect(-width/2, -height/2, width, height);
        ctx.fillStyle="white";
        ctx.font = '18px Verdana';
        ctx.fillText(letter, -6, 7);
        ctx.restore();
    }

    function drawCamera(){
        ctx.save();
        ctx.lineWidth = 3;
        ctx.beginPath();
        // draw camera cross-hairs
        ctx.strokeStyle = "#dddddd";
        ctx.moveTo(camX,camY-camRadius);
        ctx.lineTo(camX,camY+camRadius);
        ctx.moveTo(camX-camRadius,camY);
        ctx.lineTo(camX+camRadius,camY);
        ctx.arc(camX, camY, camRadius, 0 , 2 * Math.PI, false);
        ctx.stroke();
        // draw camera site
        ctx.fillStyle = "#222222";
        ctx.beginPath();
        ctx.arc(camX, camY-camRadius, 3, 0 , 2 * Math.PI, false);
        ctx.fill()
        ctx.restore();
    }

    function rotate(){
        ctx.save();
        ctx.translate(camX,camY);
        ctx.rotate(Math.PI/180*camDegrees);
        ctx.translate(-camX,-camY);
        draw();
        ctx.restore();
    }

    $("#rotateCW").click(function(){ camDegrees+=30; rotate(); });
    $("#rotateCCW").click(function(){ camDegrees-=30; rotate(); });
    $("#camUp").click(function(){ camY-=20; draw(); });
    $("#camDown").click(function(){ camY+=20; draw(); });
    $("#camLeft").click(function(){ camX-=20; draw(); });
    $("#camRight").click(function(){ camX+=20; draw(); });

}); // end $(function(){});
</script>

</head>

<body>

    <canvas id="canvas" width=400 height=300></canvas><br/>
    <button id="camLeft">Camera Left</button>
    <button id="camRight">Camera Right</button>
    <button id="camUp">Camera Up.</button>
    <button id="camDown">Camera Down</button><br/>
    <button id="rotateCW">Rotate Clockwise</button>
    <button id="rotateCCW">Rotate CounterClockwise</button>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T03:47:55.330

将世界中心移动到的 x 和 y 点是使用旋转角度的正切计算的。我有一个展示这个概念的例子，它不是最终的解决方案，而是你可以工作的起点。将其视为“粗剪”（没有时间完全打磨它）。例如，如您所见，旋转的枢轴点不会移动到相机镜头正下方的点，因此旋转不会直接发生在相机下方。

这是解释几何/三角如何工作的图表：

![在此处输入图像描述](../Images/cdf0e5e0ef63b60a9b4433191f5dd348.png)

这是代码片段和指向功能齐全的 jsfiddle 的链接。键盘命令与您的示例相同。

[http://jsfiddle.net/ricksuggs/X8rYF/](http://jsfiddle.net/ricksuggs/X8rYF/)

```
 //s (down)
    if (keycode === 83) {

        event.preventDefault();
        canvas.getContext('2d').clearRect(-200,-200,400,400);
        canvas.getContext('2d').translate(2*Math.tan(rotationSum), -2); 
        drawGrid();
        drawCamera();

    }

    // <-- (rotate left)
    if (keycode === 37) {

        event.preventDefault();
        canvas.getContext('2d').clearRect(-200,-200,400,400);
        rotationSum += rotation;
        console.log('rotationSum: ' + rotationSum);
        canvas.getContext('2d').rotate(-rotation);        
        drawGrid();
        drawCamera();

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:59:11.917

顺序应该是这样的：

```
Ctx.save()
Ctx.translate(x, y) //to the center (Or top left of object to rotate)
Ctx.rotates(radian)
Ctx.translate(-x, -y) //important to move the context back!
Ctx.draw(...)
Ctx.restore() 
```

# perl - 使用 perl 模块的当前工作目录版本

> ID：15451091
> 
> 赞同：0
> 
> 时间：2013-03-16T15:33:14.103
> 
> 标签：perl, module

我正在尝试运行 perl 脚本并使其使用当前工作目录中的模块文件。我这样做是因为我最终需要在另一台机器上使用脚本和模块，而我无法控制安装模块的内容或位置。我的问题是我可以让它在某些机器上工作，但不能在其他机器上工作。

脚本是：

```
ubuntu@machine-5:/tmp/pig-local$ cat test.pl
#!/usr/bin/perl -w -I ./Text
use Text::CSV_XS ;
print "Hello World\n" 
```

执行时出现错误：

```
ubuntu@machine-5:/tmp/pig-local$ ./test.pl 
Can't locate loadable object for module Text::CSV_XS in @INC (@INC contains: ./Text  ./Text /home/ubuntu/perl5/lib/perl5/x86_64-linux-gnu-thread-multi /home/ubuntu/perl5/lib/perl5/x86_64-linux-g
nu-thread-multi /home/ubuntu/perl5/lib/perl5 /etc/perl /usr/local/lib/perl/5.14.2 /usr/local/share/perl/5.14.2 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.14 /usr/share/perl/5.14 /usr/local/
lib/site_perl .) at ./test.pl line 2
Compilation failed in require at ./test.pl line 2.
BEGIN failed--compilation aborted at ./test.pl line 2. 
```

当前工作目录确实包含`Text`目录和`CSV_XS.pm`模块。我已经检查了`md5sum`文件，它与脚本工作的机器相同。

```
ubuntu@machine-5:/tmp/pig-local$ ls Text/
CSV_XS.pm 
```

我的操作系统是：

```
ubuntu@machine-5:/tmp/pig-local$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04.1 LTS
Release:        12.04
Codename:       precise 
```

这些是机器上设置的不同 perl env 变量：

```
ubuntu@machine-5:/tmp/pig-local$ env | grep -i perl
PERL5LIB=/home/ubuntu/perl5/lib/perl5/x86_64-linux-gnu-thread-multi:/home/ubuntu/perl5/lib/perl5
PERL_MB_OPT=--install_base /home/ubuntu/perl5
PATH=/home/ubuntu/perl5/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
PERL_LOCAL_LIB_ROOT=/home/ubuntu/perl5
PERL_MM_OPT=INSTALL_BASE=/home/ubuntu/perl 
```

当我检查是否`perldoc`知道有问题的模块时，

```
ubuntu@machine-5:/tmp/pig-local$ perldoc -l Text::CSV_XS
./Text/CSV_XS.pm 
```

它认为该模块存在于当前工作目录中。

关于如何让它发挥作用的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T17:13:40.233

您没有正确安装模块。它包含多个 .pm 文件。不是它找不到的.pm，而是它的.dll/.so。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:51:54.810

看：

```
@INC contains: ./Text 
```

猜猜那个目录里*没有*什么？另一个名为“文本”的目录。因此，perl 在那里找不到 Text::CSV_XS （它只会找到普通的 CVS_XS ）。

尝试`-I .`或：

```
BEGIN { unshift @INC, '.' } 
```

# javascript - 如何在javascript中收集拖车号码？

> ID：15451093
> 
> 赞同：-2
> 
> 时间：2013-03-16T15:33:18.753
> 
> 标签：javascript, jquery

例子：

```
var x=1.5;
var y=1.5;
var r=x+y; 
```

必须是结果是 3 但结果给我 2

这是我的完整代码：

```
$("#TxtProgremPrice,#TxtAdditionalPrice").keyup(function () {
    var x=parseInt($("#TxtProgremPrice").val());
    var y = parseInt($("#TxtAdditionalPrice").val());
    if ($("#TxtProgremPrice").val() == "") {
        x = 0;
    }
    if ($("#TxtAdditionalPrice").val() == "") {
        y = 0;
    }
    var r = x + y;
    $("#TxtTotalPrice").val(r);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:39:07.293

如果使用 parseInt，`1+1`则添加`2`.

请改用[parseFloat](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)。

# list - Prolog - 两个列表

> ID：15451095
> 
> 赞同：0
> 
> 时间：2013-03-16T15:33:39.270
> 
> 标签：list, prolog

我有两个列表，例如：

```
L1=[1,0,1,0,1,1]
L2=[2,3,4,2,1,1] 
```

我想检查这样的事情

```
if (L1[k]==0)
sum=L2(k) 
```

有没有办法使用prolog来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:53:12.797

```
nth0(Ind, Lst, Elem) enables random access to the list elements under SWI-Prolog 
```

# android - 如何将按钮上的文本复制到 EditText

> ID：15451096
> 
> 赞同：0
> 
> 时间：2013-03-16T15:33:39.560
> 
> 标签：android

我有一个 EditText。然后我用四个按钮制作了一个布局xml，称为button.xml。当用户单击时，我加载了 button.xml。然后当用户单击其中一个按钮时，按钮上的文本将被复制到 EditText 中。我的问题是如何将按钮上的文本复制到 EditText 中？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:45:24.850

请在您想要为您执行此操作的所需事件/功能中尝试以下操作。

```
 Button btnTest = (Button) findViewById(R.id.myButton);
    EditText myTextBox = (EditText) findViewById(R.id.myEditBox);

    myTextBox.setText(btnTest.getText().toString()); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:34:21.013

尝试这个

```
String text= yourbutton.getText().toString();
youredittext.setText(text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:38:51.053

首先使用代码将Button的文本复制到String

字符串 btntext= BUTTON_ID.getText().toString();

然后使用粘贴编辑文本的内容

EDITTEXTID.setText(文本);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T16:11:37.310

```
Button b= (Button) findViewById(R.id.mybutton);
EditText ed= (EditText) findViewById(R.id.edittext);
ed.setText(b.getText().toString());// get text futtonrom button and set text 
```

# windows - 装配计数程序

> ID：15451099
> 
> 赞同：2
> 
> 时间：2013-03-16T15:33:44.077
> 
> 标签：windows, loops, assembly, x86, fasm

我是组装新手，我正在尝试制作一个计数高达 10,000 并退出的程序。我正在使用 fasm `

```
 include 'include/win32ax.inc'

   .data

   inchar     DB ?
   numwritten DD ?
   numread    DD ?
   outhandle  DD ?
   inhandle   DD ?
    strFormat  DB "Number %d ",0
   strBuff    RB 64

   .code
     start:

   ;set up console
    invoke  AllocConsole
    invoke  GetStdHandle,STD_OUTPUT_HANDLE
    mov [outhandle],eax
    invoke  GetStdHandle,STD_INPUT_HANDLE
    mov [inhandle],eax

    ;loop starts here
    mov eax, 0
    LoopStart:
    add eax,1

    invoke wsprintf, strBuff, strFormat, eax   ;convert number to String.

    ;the number eax is now in string form in strBuff

            ;find out the string length of strBuff
    mov ecx,-1
    mov al,0
    mov edi,strBuff
    cld
    repne scasb
    not ecx
    dec ecx
         ;ecx is now the length.

    invoke  WriteConsole,[outhandle],strBuff,ecx,numwritten,0   ;write to console
    ;loop
    cmp eax, 10000;loop compare
    jne LoopStart;jump to start of loop

    invoke  ReadConsole,[inhandle],inchar,1,numread,0 ;give the user a chance to read console output before exit
    invoke  ExitProcess,0

     .end start                                                                                                          ` 
```

它应该打印 Number 1 Number 2 Number 3 等，但它会打印 Number 2 Number 2 Number 2 Number 2 Number 2 等一段时间然后退出，无需等待用户输入。我的代码有什么问题？

编辑：我让它工作！工作代码：

```
 include 'include/win32ax.inc'

    .data

       inchar     DB ?
       numwritten DD ?
        numread    DD ?
      outhandle  DD ?
        inhandle   DD ?
         strFormat  DB "Number %d ",0
          strBuff    RB 64
         number DD ?

          .code
        start:

          ;set up console
         invoke  AllocConsole
          invoke  GetStdHandle,STD_OUTPUT_HANDLE
             mov [outhandle],eax
           invoke  GetStdHandle,STD_INPUT_HANDLE
            mov [inhandle],eax

         ;loop starts here
           mov eax, 0
         LoopStart:
              add eax,1
            mov [number],eax
             mov edi, eax
             push eax
             invoke wsprintf, strBuff, strFormat, edi  ;convert number to String.
            add     esp, 4 * 3

           pop eax
           ;the number eax is now in string form in strBuff

             ;find out the string length of strBuff
             mov ecx,-1
             mov al,0
              mov edi,strBuff
               cld
              repne scasb
             not ecx
              dec ecx
                ;ecx is now the length.

              push eax
       invoke  WriteConsole,[outhandle],strBuff,ecx,numwritten,0   ;write to console
    pop eax
    ;loop
    mov eax, [number]
    cmp eax, 10000;loop compare
    jne LoopStart;jump to start of loop

    invoke  ReadConsole,[inhandle],inchar,1,numread,0 ;give the user a chance to read console output before exit
    invoke  ExitProcess,0 
```

.end 开始

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:52:16.157

库函数根据自己的需要使用寄存器，并且不会将它们恢复为原始值。如果您不想失去它，则需要将价值保留在内存中。最简单的方法是使用堆栈：

```
push eax ; put value of eax on the top of stack

pop eax  ; remove value from top of stack, save it in eax. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:56:42.137

您不需要在调用后查找字符串的长度，`wsprintf`因为它返回复制到缓冲区的字符数。

接下来是所谓的[应用程序二进制接口（ABI）](http://en.wikipedia.org/wiki/Application_binary_interface)，它涵盖了许多细节，例如[调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)

当您处理 Windows API 或 C 运行时，它们遵循这些调用约定，其中`esi`, `edi`, `ebx`, `ebp`, 并`esp`在函数调用中保存。这意味着，如果您在其中一个寄存器中有一个值，然后调用 API 函数，则该值在调用后仍将相同。

`eax`, `ecx`, 并且`edx`不必保存，因此不能保证在调用之前您在这些寄存器中的任何内容都是相同的。如果您在这些寄存器中有某些内容，并且在调用后需要该值，则需要将其保存到变量或堆栈中`push`

`eax`用于返回值。

话虽如此，在此示例中，我将`ebx`其用作循环计数器，并`esi`用作要打印的当前数字，因为这些值在 API 调用中将保持不变。

这是 NASM，但它会给你和想法。

```
%include "externs.inc"

%define     STD_OUTPUT_HANDLE -11
%define     STD_INPUT_HANDLE - 10
%define     NULL 0

SECTION .data                           
strFormat  DB "Number %d ",13,10,0              

SECTION .bss
buf             resb 16
stdout          resd 1
stdin           resd 1
lpNumRead       resd 1
inChar          resb 1

global start2 

SECTION .text                   

start2:      

    push    STD_OUTPUT_HANDLE               
    call    GetStdHandle                    
    mov     [stdout], eax                       

    push    STD_INPUT_HANDLE               
    call    GetStdHandle                    
    mov     [stdin], eax   

    mov     ebx, 10000
    mov     esi, 1
CountOut:

    push    esi
    push    strFormat
    push    buf
    call    wsprintf
    add     esp, 4 * 3

    push    NULL                            
    push    lpNumRead                       
    push    eax                     
    push    buf                         
    push    dword [stdout]                  
    call    WriteConsole                        

    inc     esi
    dec     ebx
    jnz     CountOut

    push    NULL
    push    lpNumRead
    push    1
    push    inChar
    push    dword [stdin]
    call    ReadConsole

    push 0
    call ExitProcess 
```

# axapta - 在 AX 2009 中增加移动日志中描述字段的长度

> ID：15451100
> 
> 赞同：0
> 
> 时间：2013-03-16T15:33:44.477
> 
> 标签：axapta, dynamics-ax-2009, x++, aot

我们如何将 AX 2009 库存模块的运动日志中可用的描述字段的字段长度增加到 200 个字符？

该字段是 InventJournalTable_DescriptionInventJournalTable(InventJournalTable).Description

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T20:09:44.890

1.  创建一个字符串类型的新扩展数据类型。
2.  将数据类型的 StringSize 属性设置为 200。
3.  在 AOT 中找到 JournalDescription 扩展数据类型。
4.  将 JournalDescription 的 Extends 属性更改为新数据类型的名称。
5.  同步数据库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T22:08:22.703

您可以通过转到系统管理 - 设置 - 系统 - 修改数据类型来编辑标准 EDT。在那里您可以调整标准 EDT 的长度，否则无法调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:37:18.363

InventJournalTable[具有扩展数据类型](http://msdn.microsoft.com/en-us/library/aa656152%28v=ax.50%29.aspx)[JournalDescription](http://msdn.microsoft.com/en-us/library/aa599613%28v=ax.50%29.aspx)（字符串大小：60）的描述字段。因此打开 AOT、数据字典和扩展数据类型分支，找到 JournalDescription 实体，将其字符串大小增加到 200。Sincronize...

并记录您的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-05T06:20:41.530

即使在 AOT 中也不能编辑 JournalDescription，因为其他事务会受到影响。而且您也不想更改这些交易的记录。想想一旦更改字段的长度或任何属性，某些东西会受到影响的可能性。最好的事情是，尝试在系统的测试环境中进行。

# algorithm - 序列集 - 找到一起是给定序列的子集

> ID：15451107
> 
> 赞同：1
> 
> 时间：2013-03-16T15:34:27.097
> 
> 标签：algorithm

我有很多长度为 10 的序列，由 0 和 1 组成。例如：

```
1010100000 
1011000001
1011100010
1100000100
0011111011 
```

等等。

我想找到在每列中共同具有 0 的序列。例如，算法应该返回这两个：

```
1100000100
0011111011 
```

这三个：

```
1100110000
0011111111
1111001111 
```

等等

有这个算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:06:58.187

您所描述的问题是您想要找到所有解决方案的[精确覆盖问题的受限情况。](http://en.m.wikipedia.org/wiki/Exact_cover_problem)这个问题的一般版本是 NP-hard，所以对于这个更大的问题没有已知的有效的一般算法。

要找到所有可能的解决方案，您可以尝试列出位向量的所有子集，并测试每个子集的每一列中是否正好有一个 0。您还可以考虑实施回溯搜索算法来尝试选择所有子集，但这会停止搜索可能无法工作的路径（例如，包含两个位向量且同一列中有 0 的路径）。如果您愿意，您可以尝试实现[跳舞链接算法](http://en.m.wikipedia.org/wiki/Dancing_Links)，该算法专门用于列出此一般问题的所有解决方案。

希望这可以帮助！

# jquery - HTML表格中的堆叠和分组条形图

> ID：15451109
> 
> 赞同：2
> 
> 时间：2013-03-16T15:34:43.967
> 
> 标签：jquery, html, css, javascript

我有一组带有数字的 html 表格，其样式如下：

```
 <table border="1">
  <tr>
    <th>Day</th>
    <th>Time</th>
    <th>A</th>
    <th>B</th>
  </tr>
  <tr>
    <td>Monday</td>
    <td>0:00 - 8:00</td>
    <td>100</td>
    <td>120</td>
  </tr>
  <tr>
    <td></td>
    <td>8:00 - 18:00</td>
    <td>90</td>
    <td>100</td>
  </tr>
  <tr>
    <td></td>
    <td>18:00 - 0:00</td>
    <td>80</td>
    <td>60</td>
  </tr>
  <tr>
    <td>Tuesday</td>
    <td>0:00 - 8:00</td>
    <td>100</td>
    <td>120</td>
  </tr>
  <tr>
    <td></td>
    <td>8:00 - 18:00</td>
    <td>90</td>
    <td>100</td>
  </tr>
  <tr>
    <td></td>
    <td>18:00 - 0:00</td>
    <td>80</td>
    <td>60</td>
  </tr>
  </table> 
```

查看：http: [//jsbin.com/evakac/7/edit](http://jsbin.com/evakac/7/edit)

我想直接从该表中创建一个具有堆叠和同时分组的条形图的该表的漂亮可视化。

我用谷歌搜索了很多，那里有很多 jquery 可视化工具，但没有什么可以做到这一点。

更新：像这样，直接从桌子上出来会很好：[http ://bl.ocks.org/gencay/4629518](http://bl.ocks.org/gencay/4629518)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:00:18.603

d3.js 提供了类似的东西：http: [//bl.ocks.org/gencay/4629518](http://bl.ocks.org/gencay/4629518)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T16:08:19.570

检查这个 [magna 图表](https://github.com/alphagov/magna-charta)

演示[在这里](http://alphagov.github.com/magna-charta/)

可能这有帮助

# c# - 使用 GetTickCount 函数创建身份验证控制台应用程序

> ID：15451110
> 
> 赞同：0
> 
> 时间：2013-03-16T15:34:46.843
> 
> 标签：c#

我正在尝试制作一个简单的登录/身份验证控制台应用程序，例如我有一个字符串 testpwd 作为我的密码，我希望程序以毫秒为单位计算用户开始输入密码的时间，它应该输出多少每次用户在该`GetTickCount`功能的帮助下从键盘开始输入时，每个用户输入密码所需的秒数。

我不知道我该怎么做，但我唯一能做的就是下面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
namespace LoginSystem
{
    class LSystem
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Hello! This is simple login system!");
            Console.Write("Write your username here: ");
            string strUsername = Console.ReadLine();
            string strTUsername = "testuser";
            if (strUsername == strTUsername)
            {
                Console.Write("Write your password here: ");
                Console.ForegroundColor = ConsoleColor.Black;
                string strPassword = Console.ReadLine();
                string strTPassword = "testpwd";
                if (strPassword == strTPassword)
                {
                    Console.ForegroundColor = ConsoleColor.Gray;
                    Console.WriteLine("You are logged in!");
                    Console.ReadLine();

                }
                else
                {
                    Console.ForegroundColor = ConsoleColor.Gray;
                    Console.WriteLine("Bad password for user: {0}", strUsername);
                    Console.ReadLine();
                }
            }
            else
            {
                Console.WriteLine("Bad username!");
                Console.ReadLine();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:42:07.853

1-您可以使用 DateTime.Now 然后减去它们以获得时间跨度。

2- 调用 GetTickCount 但您需要先声明它，如下所示：

```
[DllImport("kernel32.dll")]
static extern uint GetTickCount(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:42:25.073

一个简单的[秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)？您的代码的相关部分可以用这种方式编写

```
...
Console.ForegroundColor = ConsoleColor.Black;
StopWatch sw = new Stopwatch();
sw.Start();
string strPassword = Console.ReadLine();
sw.Stop()
TimeSpan ts = sw.Elapsed;
string strTPassword = "testpwd";
if (strPassword == strTPassword)
{
    Console.ForegroundColor = ConsoleColor.Gray;
    Console.WriteLine("You are logged in after " + ts.Milliseconds.ToString() + " milliseconds");
    Console.ReadLine();
}
..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:46:15.083

首先，你的问题很难理解。如果我没看错，您希望在用户开始输入时开始计时并在用户按下回车时停止计时？使用[`System.Diagnostics.Stopwatch`类](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)怎么样？

在调用 Console.ReadLine() 之前，启动一个新的 Stopwatch()，然后调用 Start() 方法。

在 Console.ReadLine() 之后立即停止秒表：

```
 Console.Write("Write your username here: ");

        var stopwatch = new System.Diagnostics.Stopwatch();
        stopwatch.Start();

        string strUsername = Console.ReadLine();

        stopwatch.Stop();

        string strTUsername = "testuser"; 
```

# mod-rewrite - 如果查询与当前日期不匹配，则重定向

> ID：15451111
> 
> 赞同：1
> 
> 时间：2013-03-16T15:34:54.393
> 
> 标签：mod-rewrite, url-rewriting, rewrite

我运行一个基于图像的网站，我在下载插件 Image Host Grabber 以及直接链接到文件而不是 twitter/facebook 等上的网页时遇到问题（因为有推荐人，常见的热链接保护不起作用）。

我有一个解决方案（在其他网站上看到），即在媒体 file.jpg* *?1234545* *上使用查询字符串

我有 mod_rewrite 设置重定向到一个无用的模因，如果他们根本没有？查询：

```
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^(.*) http://www.my-site.com/grrrr.jpg 
```

如果查询与今天的数字格式日期不匹配，我还想重定向到我的 grrrr.jpg，例如今天 2013 年 3 月 16 日到 ?1632013

**到目前为止，这就是我所拥有的，这是行不通的**

```
RewriteCond %{QUERY_STRING}  ^%{TIME_DAY}%{TIME_MON}%{TIME_YEAR}
RewriteRule ^(.*) http://www.my-site.com/grrrr.jpg 
```

我什至无法用 ${TIME_YEAR} 对当前年份 ?2013 做出反应

谁能告诉我哪里出错了，我在 PHP 方面比较先进，但对 mod_rewrite 没用

提前致谢

# c# - 为什么 Lucene.NET 3.0.3 中的 BooleanQuery 不返回任何内容？

> ID：15451112
> 
> 赞同：-1
> 
> 时间：2013-03-16T15:35:09.347
> 
> 标签：c#, lucene, lucene.net, booleanquery

我正在使用 Lucene.NET 3.0.3 搜索两个字段（我有两个名为“Noidung”、“Dapa”的字段），我`BooleanQuery`在 C# 中使用它，但是当我运行此代码时没有返回结果，我确信要搜索的源没有问题，因为我对其进行了测试。那么使用 Lucene.NET 3.0.3 的人可以提供一些解释吗？

```
IndexReader indexreader = IndexReader.Open(directory, true);
Searcher indexsearch = new IndexSearcher(indexreader);

BooleanQuery bq = new BooleanQuery();

Query q1 = new TermQuery(new Term("Noidung", PhanSoSanh));
Query q2 = new TermQuery(new Term("Dapa", txtText.Text.ToString().Trim()));
bq.Add(q1, Occur.MUST);
bq.Add(q2, Occur.MUST);

TopDocs ketqua = indexsearch.Search(bq, null, 500);

var hits = ketqua.ScoreDocs;
foreach (var hit in hits)
{
    // Return result
} 
```

* * *

我在索引中有 2 个字段（“Noidung”、“Dapa”）。现在我想在“Noidung”字段中搜索，然后用“Dapa”搜索结果。我使用 booleanQuery 但没有返回结果？帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:54:21.847

你可以试试`QueryParser`吗？

```
BooleanQuery booleanQuery = new BooleanQuery();

var noidungQuery = new QueryParser(version, "Noidung", analyzer)
    .Parse(PhanSoSanh);
var dapaQuery = new QueryParser(version, "Dapa", analyzer)
    .Parse(txtText.Text.ToString().Trim());

booleanQuery.Add(noidungQuery, Occur.MUST);
booleanQuery.Add(dapaQuery, Occur.MUST); 
```

正如@SimonSvensson 所提到的，使用`TermQuery`会根据索引发送原始文本，这导致结果为零，如本[答案](https://stackoverflow.com/a/13401787/1250033)中进一步解释的那样。

# pdf - 编辑乳胶文件时自动重新加载pdf查看器

> ID：15451114
> 
> 赞同：5
> 
> 时间：2013-03-16T15:35:16.693
> 
> 标签：pdf, latex, inotifywait

我在编辑 LaTeX 文件时使用[llpp pdf 查看器。](http://repo.or.cz/w/llpp.git)为了让它在我编译时自动刷新 pdf 文件，我使用包装器来启动它（参见[this](https://github.com/pSub/configs/blob/master/.bin/pdfviewer)）。

处理等待和刷新的部分是这个：

```
inotifywait -m -e close_write $1 | while read; do
    kill -HUP $pid_llpp
done & 
```

我的问题如下：每当 tex 文件的编译发生错误时，不会产生 pdf 输出并且 llpp 正在关闭。我尝试过这样的事情：

```
inotifywait -m -e close_write $1 | while read; do
    if [ -a $1 ]
    then
        kill -HUP $pid_llpp
    fi
done & 
```

它部分工作：当编译期间发生错误时，llpp不会关闭但不再刷新......

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-11T12:55:55.653

**更新**：自发布 v26 llpp 以来，包装脚本以完善的版本发布！您可以在 llpp 发行版中找到它作为 misc/llpp.inotify。

* * *

我对您的问题进行了部分修复（[此处](https://github.com/pSub/configs/blob/master/bin/pdfviewer)为完整脚本）：

```
inotifywait -m -e close_write "$PWD" | while read dir ev file; do
if [ "$file" = "$pdf" ] && [ -e "$pdf" ]; then
    kill -HUP $pid_llpp
fi
done & 
```

这会检查当前的 pdf 文件是否仍然可用，然后才会触发更新事件。这与您所做的类似。但是，我仍然可能会关闭 llpp，因为文件可能会在检查后直接消失。我不知道如何解决这个问题。

通过查看包含pdf的文件夹并过滤掉pdf的事件来解决错误修复后不刷新的问题。如果直接在文件上调用 inotify，它似乎会错过`delete`.

如果您仍然对它感兴趣，请告诉我它是否适合您。

（附带说明：包装器现在还能够将标志传递给 llpp）

# mysql - MySQL删除唯一对

> ID：15451116
> 
> 赞同：0
> 
> 时间：2013-03-16T15:35:31.013
> 
> 标签：mysql, unique-constraint

在我的数据库表中，我犯了一个不幸的错误，即在创建数据库时使一对字段唯一

```
UNIQUE(A,B) 
```

我现在想删除这个约束。如何在 MySQL 语法中做到这一点？

我知道我可以做一个索引

```
ALTER TABLE MyTable DROP Index A 
```

但我不确定如何为配对做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:37:08.480

密钥仍然有一个名称，`A`除非您也先制作`A`了一个密钥或给它一个特定的名称，否则它可能是。

```
ALTER TABLE MyTable DROP INDEX A 
```

应该实际工作。查看表定义 ( `SHOW CREATE TABLE`) 以了解键的实际名称是什么。

# wordpress - Wordpress 获取没有父级的自定义帖子类型列表

> ID：15451119
> 
> 赞同：0
> 
> 时间：2013-03-16T15:35:52.320
> 
> 标签：wordpress, list, post, paging

我有一个带有自定义帖子类型食谱的 worpress，我通过为某种食谱（如鱼）制作父帖子来订购帖子，然后用食谱发布帖子。

我想列出所有帖子但没有父页面。没有那么多问题，但我需要一个可以处理它的分页。可能吗？

我尝试列出所有帖子并跳过父页面，但分页不适用于它。

任何想法？

我在这里先向您的帮助表示感谢。

这是代码

```
<?php 
    $args = array( 'post_type' => 'recipe', 'posts_per_page' => 3, 'paged' => $paged );
    $loop = new WP_Query( $args );
    while ($loop->have_posts()) : $loop->the_post(); 
       $args = array(
               'post_type' => 'recipe',
               'post_parent' => $post->ID
       );

       $hasChildQ = new WP_Query( $args );

       if( !$hasChildQ->have_posts() ){ 
          get_template_part( 'content', 'recipe' ); 
       }
    endwhile; // end of the loop. 
?> 
```

但我希望它在主查询中完成，以便分页可以使用它，任何建议都会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:21:08.990

我建议将该父页面设为自定义分类法。这样您就可以按分类查询。

因此，您的食谱将是 CPT，但您的食谱类别将是“食谱类型”分类。

网上帮助：

*   [http://codex.wordpress.org/Taxonomies](http://codex.wordpress.org/Taxonomies)
*   [http://themergency.com/generators/wordpress-custom-taxonomy/](http://themergency.com/generators/wordpress-custom-taxonomy/)

-d

# c++ - 使用 ALUT 时出现错误 LNK2019

> ID：15451120
> 
> 赞同：0
> 
> 时间：2013-03-16T15:35:53.290
> 
> 标签：c++, lnk2019

使用 Visual Studio 10，我未能编译提供的示例代码`openal`

[http://connect.creativelabs.com/openal/Downloads/Forms/AllItems.aspx](http://connect.creativelabs.com/openal/Downloads/Forms/AllItems.aspx)

我已经安装了 OpenAL11CoreSDK，正在执行`oalinst.exe`，还下载`freealut-1.1.0-bin`
了我已经将“OpenAL 1.1 SDK\ include”中的所有文件复制到“Microsoft Visual Studio 10.0\VC\include\AL”，我也在`alut.h`里面`freealut-1.1.0-bin`
放了 alut.lib 和 OpenAL32.lib在“Microsoft Visual Studio 10.0\VC\libs”中，我将 alut.dll 和 OpenAL32.dll 放在“C:\Windows\SysWOW64”和“C:\Windows\System32”
中，我已经包含了“Microsoft Visual Studio 10.0\ “项目->属性->VC++目录->包含目录”和“C/C++->常规->附加包含目录”中的“VC\include\AL”
“库目录”和“链接器->中的“VC\lib” General->Additional Library Directories” “alut.lib”的路径和“链接器->输入->附加依赖项”中的“OpenAL.lib”

我想我已经链接了所有库，但我仍然收到链接器错误：

```
1>test.obj : error LNK2019: unresolved external symbol __imp__alSourcePlay referenced in function _main
1>test.obj : error LNK2019: unresolved external symbol __imp__alSourcei referenced in function _main
1>test.obj : error LNK2019: unresolved external symbol __imp__alGenSources referenced in function _main<br>
1>C:\Users\SONY\Documents\Visual Studio 2010\Projects\test\Debug\test.exe : fatal error LNK1120: 3 unresolved externals 
```

```
#include <stdlib.h>
#include <AL/alut.h>

/*
  This is the 'Hello World' program from the ALUT
  reference manual.

  Link using '-lalut -lopenal -lpthread'.
*/

int
main (int argc, char **argv)
{
  ALuint helloBuffer, helloSource;
  alutInit (&argc, argv);
  helloBuffer = alutCreateBufferHelloWorld ();
  alGenSources (1, &helloSource);
  alSourcei (helloSource, AL_BUFFER, helloBuffer);
  alSourcePlay (helloSource);
  alutSleep (1);
  alutExit ();
  return EXIT_SUCCESS;
} 
```

我迷路了，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-04T05:06:21.337

让 OpenAL 和 ALUT 工作只花了三个人大约 5 个小时。我确信我的问题与你的不同，但我也确信在你解决了这个问题之后，你会遇到另一个问题。与其他海报不同，我不会用答案来解决你的问题——我不相信有一个适合所有人的。

第 1 步：安装`oalinst.exe`。这是 OpenAL 的安装程序。如果不使用安装程序，我们根本无法让 OpenAL 工作。这部分特别棘手，因为有多个版本在运行，所有版本都具有相同的文件名。您想要最新的版本。在撰写本文时，我使用的是`June 02, 2009`. 您可以通过右键单击文件并转至 找到这些日期`Properties->Digital Signature`。

在我们的例子中，oalinst 在 System32 和 SysWow64 中安装了一个 OpenAL32.dll；OpenAL CoreSDK 中还有一个 OpenAL32.dll -*所有这些都是不同的*。

第 2 步：确保您的程序尽可能简单。你的来自 OpenAL 的 hello world 很好。

第 3 步：确保您有 FreeALUT。

第 4 步：在 Visual Studio 中检查您的依赖项。右键单击 Visual Studio 中的项目（即解决方案资源管理器树中解决方案正下方的项目），然后转到

`Properties > Configuration Properties > C/C++ > General > Additional Include Directories (more)`.

```
STUFF\OpenAL\OpenAL 1.1\include
STUFF\OpenAL\freealut-1.1.0-bin\include
STUFF\OpenAL\OpenAL 1.1\include\AL 
```

确保`STUFF`与您拥有的目录结构相匹配。以后省去一些挫折，并检查您键入的路径是否可以复制粘贴到 Windows 资源管理器中，并将您带到正确的位置。

现在， `Properties > Configuration Properties > Linker > General > Additional Library Directories (more)`.

```
STUFF\OpenAL\OpenAL 1.1\libs\Win32
STUFF\OpenAL\freealut-1.1.0-bin\lib 
```

和上次一样的交易。

最后， `Properties > Configuration Properties > Linker > Input > Additional Dependencies`.

```
OpenAL32.lib
alut.lib 
```

.

5.  确保关闭 Visual Studio。使清洁。翻拍。跑。如果您从 Debug 切换到 Release，请记住您需要重做属性页。

剩下的就看你了。当您构建发布或调试版本时，`alut.dll`应该`alut.lib`会出现在相应的 Debug 或 Release 文件夹中。

不要害怕尝试在没有 Visual Studio 的情况下运行已编译的可执行文件（即，只需双击 hello_world.exe）

# javascript - 行动画和编号

> ID：15451121
> 
> 赞同：0
> 
> 时间：2013-03-16T15:36:10.607
> 
> 标签：javascript, jquery

有人能帮我吗：

1.  添加和删​​除行时添加淡入淡出动画
2.  为什么添加新行时行前的数字显示不正确？

html:

```
<table id="table">
  <thead>
    <tr>
        <th width="8" scope="col">&nbsp;</th>
        <th width="131" scope="col">Roba/Usluga</th>
        <th width="144" scope="col">Jmj</th>
        <th width="144" scope="col">Količina</th>
        <th width="144" scope="col">Jed. cijena</th>
        <th width="144" scope="col">Rabat</th>
        <th width="81" scope="col">&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
        <td></td>
        <td>
            <select name="sif_roba1" id="sif_roba1">
                <option value="">Please select</option>
                <option value="1">David Hasselhoff</option>
                <option value="2">Michael Jackson</option>
                <option value="3">Tina Turner</option>
            </select>
        </td>
        <td>
            <select name="idjmj1" id="idjmj1">
                <option value="">Please select</option>
                <option value="1">David Hasselhoff</option>
                <option value="2">Michael Jackson</option>
                <option value="3">Tina Turner</option>
            </select>
        </td>
        <td>
            <input name="cijena1" id="cijena1">
        </td>
        <td>
            <input name="track1" id="track1">
        </td>
        <td>
            <input name="rabat1" id="rabat1">
        </td>
        <td>
            <button class="remove_button">Remove</button>
        </td>
    </tr>
  </tbody>
</table>
<button type="button" class="add" onClick="clickMe();">Add</button> 
```

JS：

```
 $(document).ready(function ($) {
        // trigger event when button is clicked
        $("button.add").click(function () {
            // add new row to table using addTableRow function
            addTableRow($("table"));
            // prevent button redirecting to new page
            return false;

        });

        // function to add a new row to a table by cloning the last row and 
        // incrementing the name and id values by 1 to make them unique
        function addTableRow(table) {

            rowCount = 0;
            $("#table tr td:first-child").each(function () {
                rowCount++;
                $(this).text(rowCount);
            });

            // clone the last row in the table
            var $tr = $(table).find("tbody tr:last").clone();

            // get the name attribute for the input and select fields
            $tr.find("input,select").attr("name", function () {
                // break the field name and it's number into two parts
                var parts = this.id.match(/(\D+)(\d+)$/);
                // create a unique name for the new field by incrementing
                // the number for the previous field by 1
                return parts[1] + ++parts[2];

                // repeat for id attributes
            }).attr("id", function () {
                var parts = this.id.match(/(\D+)(\d+)$/);
                return parts[1] + ++parts[2];
            });
            // append the new row to the table
            $(table).find("tbody tr:last").after($tr);

            // remove rows
            $(".remove_button").live("click", function () {
                $(this).parents("tr").remove();

            })

        };
    }); 
```

[小提琴链接](http://jsfiddle.net/VNBzC/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:58:29.857

更新您的要求：

行号修复并添加淡入

```
 $tr.hide();
 $(table).find("tbody tr:last").after($tr);
 $(table).find("tbody tr:last").find('td:first').html(++rowCount).end().fadeIn(500); 
```

移除淡出：

```
 $("table").on("click", ".remove_button", function() {
   $(this).parents("tr").fadeOut(500, function(){ 
      $(this).remove();
 }); 
```

**[样本](http://jsfiddle.net/fppDa/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:51:13.863

1) 在 addTableRow() 函数中放置以下代码段：

```
$("#table tr td:first-child").each(function() {
    rowCount++;
    $(this).text(rowCount);   
}); 
```

不是在开头，而是在函数体的结尾——因为你在这里计算现有元素，而新元素在函数开头还没有到位——它是稍后创建的，所以上面必须是最后完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:46:48.993

解决您的第二个问题

**更新的js**

```
 $(document).ready(function($)
    {
        // trigger event when button is clicked
        $("button.add").click(function()
        {
            // add new row to table using addTableRow function
            addTableRow($("table"));
            // prevent button redirecting to new page
            return false;

        });

        // function to add a new row to a table by cloning the last row and 
        // incrementing the name and id values by 1 to make them unique
        function addTableRow(table)
        {

            // clone the last row in the table
            var $tr = $(table).find("tbody tr:last").clone();

            // get the name attribute for the input and select fields
            $tr.find("input,select").attr("name", function()
            {
                // break the field name and it's number into two parts
                var parts = this.id.match(/(\D+)(\d+)$/);
                // create a unique name for the new field by incrementing
                // the number for the previous field by 1
                return parts[1] + ++parts[2];

            // repeat for id attributes
            }).attr("id", function(){
                var parts = this.id.match(/(\D+)(\d+)$/);
                return parts[1] + ++parts[2];
            });
            // append the new row to the table
            $(table).find("tbody tr:last").after($tr);

            // remove rows
            $(".remove_button").live("click", function() {
           $(this).parents("tr").remove();

           })
  rowCount = 0;
    $("#table tr td:first-child").each(function() {
       rowCount++;
      $(this).text(rowCount);   
   });
        };
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T15:46:57.097

淡入淡出动画相当简单。在将行添加到表的下一行，添加以下代码：

```
$tr.hide().fadeIn('slow'); 
```

对于淡出，您只需要在动画完成后删除该行，因此将其放在动画函数的回调中：

```
// remove rows
$(".remove_button").live("click", function() {
    $(this).parents("tr").fadeOut('slow', function () { $(this).remove(); } );
}); 
```

最后，您的计数不正确，因为您将当前行的数字相加，然后克隆最后一个，因此将始终克隆最后一个数字。要解决此问题，您所要做的就是将用于添加行号的代码向下移动到克隆和添加行的代码下方。您可能还希望将相同的代码添加到 fadeOut 回调函数，以便在删除行后重置计数。

> **工作演示：http: [//jsfiddle.net/VNBzC/6/](http://jsfiddle.net/VNBzC/6/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T15:57:06.827

无需更改您的代码格式...对于

1）对于淡入效果..您可以只使用fadeIn（）（因为fadeIn效果仅对隐藏元素发生..先隐藏它然后使用fadeIn ...

```
$(table).find("tbody tr:last").after($tr).hide().fadeIn(); 
```

2）并且您的计数是这样的，因为您在`<tr><td>`单击添加后立即计算 s 计数..所以在附加文本时，一开始只有一个字段...所以将代码移到最后，这应该做

这个

```
rowCount = 0;
$("#table tr td:first-child").each(function() {
    rowCount++;
    console.log(rowCount);
    $(this).text(rowCount);   
}); 
```

在最后之前：

```
$("table").on("click",".remove_button", function() {.... 
```

**注意：`live()`在 jquery 1.9 中已弃用和删除 .... 所以使用`on`**

[在这里摆弄](http://jsfiddle.net/VNBzC/7/)

# javascript - onbeforeunload 也适用于刷新

> ID：15451122
> 
> 赞同：0
> 
> 时间：2013-03-16T15:36:11.097
> 
> 标签：javascript, ajax, refresh, onbeforeunload, page-refresh

几天前我做了这个问题（[页面刷新后Java会话被删除](https://stackoverflow.com/questions/15326562/java-session-deleted-after-page-refresh)），但我没有答案。可能是因为问题出在 onbeforeunload 事件中。和：

```
 <body onbeforeunload="chiudi()"> 
```

我想步枪会议。
问题是，如果用户刷新页面，这样会话也会被刷新。我该如何解决？

这是我的 javascript 函数 chiudi()

```
 function chiudi(){
 var xmlHttp = new XMLHttpRequest();
    xmlHttp.open("POST", "SvuotaSession", false);
    xmlHttp.setRequestHeader("Content-type",
            "application/x-www-form-urlencoded");
    xmlHttp.send(null);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:44:32.613

我不认为你可以。不允许您获取有关用户要去哪里的信息（根据[this](https://stackoverflow.com/questions/1686687/how-can-i-get-the-destination-url-in-javascript-onbeforeunload-event)），因此无法知道用户正在刷新当前页面。

# php - 对使用 git 在 openshift 服务器上部署应用程序感到困惑

> ID：15451123
> 
> 赞同：3
> 
> 时间：2013-03-16T15:36:11.420
> 
> 标签：php, git, openshift

我正在使用 openshift 服务器来托管我的 php 应用程序。我已使用 sftp 将文件添加到我的服务器到 ~/app-root/runtime/repo 目录。可以通过网络访问相同的文件。但是当我 git clone 我的存储库到我的本地机器时，我看不到我上传的文件。当我使用 git 添加和推送文件时，在我的 app-root 文件夹中都没有看到。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T21:03:58.400

git 不会跟踪直接在 gear 的 repo/dir 上所做的更改，当您将本地 git repo 推送到 gear 时，这些更改将被覆盖。要跟踪它们，请将它们 scp/sftp 发送回您的本地 git repo 并添加/提交/推送它们。

scp/sftp 的替代方法是运行“rhc snapshot {appName}”，它将备份您的所有文件（快照情况下的代码和数据），然后您可以将 repo/ 目录下的文件提取回本地git repo，然后添加/提交/推送它们。

随意张贴到我们的论坛： [https ://openshift.redhat.com/community/forums/openshift](https://openshift.redhat.com/community/forums/openshift)

# c# - 使用 QueryString 包含页面

> ID：15451130
> 
> 赞同：0
> 
> 时间：2013-03-16T15:36:29.813
> 
> 标签：c#, php, asp.net, .net, query-string

我用 PHP 编程并正在尝试学习 C#，但我遇到了一些困难。

在 PHP 中，我有一个函数 include_once() 使用全局 $_GET 来包含其他页面。

我在 PHP 中将此代码与 QueryString 一起使用（即：?param=add）：

```
if($_GET['param'] == 'add') {
    include_once('pages/caseAdd.php');
} else {
    include_once('pages/caseDefault.php');
} 
```

我想知道如何使用 C# (ASP.NET) 在 Visual Studio 中创建这样的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:53:38.493

代替 PHP，C# 编译代码，你不能做完全相同的事情。但是，您可以创建自定义用户控件（.ascx 文件），即 caseAdd.ascx 和 caseDefault.ascx，并将它们动态加载到页面。您还可以使用 MVC 根据查询字符串值提供不同的操作。

# android - 在android上读取和写入xml文件

> ID：15451134
> 
> 赞同：0
> 
> 时间：2013-03-16T15:36:52.180
> 
> 标签：android, xml

这是我正在尝试创建的应用程序上的 string.xml 文件的一部分：

```
<array name="users">
    <item>
        <user_name>u1</user_name>
        <password>p1</password>
        <email>aaa@aaa</email>
    </item>
    <item>
        <user_name>u2</user_name>
        <password>p2</password>
        <email>bbb@bbb</email>
    </item>
    <item>
        <user_name>u3</user_name>
        <password>p3</password>
        <email>ccc@ccc</email>
    </item>
</array> 
```

我在将“用户”二维数组读入 java 文件上的二维数组时遇到问题。我已经为数组创建了一个类名“User”。我被困在这里了。任何人都可以帮我一把吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T02:48:03.167

没关系。我已经解决了。这是我的代码：

```
String[] userArray = getResources().getStringArray(R.array.users);
User[] arr = new User[3];
for(int i=0 ; i<userArray.length ; i++)
arr[i] = new User(userArray[i]); 
```

这是我的“用户”类构造函数：

```
public User(String str)
{
    int num;
    str = str.substring(1);
    num = str.indexOf(' ');
    user_name = str.substring(0,num);
    String substr = str.substring(num+1);
    num = substr.indexOf(' ');
    password = substr.substring(0,num);
    email = substr.substring(num+1);
} 
```

这样我就得到了一个“用户”数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:01:30.850

strings.xml 不适合您在这里尝试做的事情。它应该具有向用户显示的所有字符串以提供多语言支持。

如果您想将应用程序的域数据存储到 XML 文件中，您可以在 assets 文件夹中创建一个并读取它。

# angularjs - 如何使用angularjs真正防止元素被放入DOM

> ID：15451138
> 
> 赞同：6
> 
> 时间：2013-03-16T15:37:25.750
> 
> 标签：angularjs

假设您有以下代码来显示一些产品图像：

```
<ul>
  <li ng-repeat="p in products">
    <img ng-src="/images/{{p.img}}"/>
  </li>
</ul> 
```

现在假设有些产品很遗憾没有图片，您可以通过以下方式解决：

```
<ul>
  <li ng-repeat="p in products">
    <img ng-hide="p.img==undefined" ng-src="/images/{{p.img}}"/>
  </li>
</ul> 
```

现在转到 firebug 或 chrome 开发人员工具的“网络”选项卡并检查图像下载——你会看到错误，因为浏览器仍然试图下载不存在的图像。它是隐藏的，用户不会注意到，但这当然是不好的：不好的做法，对服务器性能不好，坏坏坏...

什么是正确的“角度”解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T16:29:21.860

@Arun解决方案的替代方法是使用[ng-switch](http://docs.angularjs.org/api/ng.directive%3angSwitch)或[ng-if](http://code.angularjs.org/1.1.5/docs/api/ng.directive%3angIf)（在 v1.1.5 中可用），它们添加/删除 DOM 元素，这与 ng-hide/ng-show 不同：

```
<ul>
  <li ng-repeat="p in products">
    <span ng-switch="p.img==undefined">
      <img ng-switch-when="false" ng-src="/images/{{p.img}}"/>
    </span>
  </li>
</ul> 
```

有关使用 ng-if 的示例，请参阅@Rob 的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-05T23:11:02.457

使用 1.1.5 版，您可以使用 ng-if，正如@Abilash 建议的那样：

```
<img ng-if="p.img" ng-src="/images/{{p.img}}"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T15:50:37.900

你可以做类似的事情

```
<ul>
    <li ng-repeat="p in products | imgsrc">
        {{p.img}}
        <img ng-src="/images/{{p.img}}"/>
    </li>
</ul>

app.filter('imgsrc', function(){
    return function(data){
        var a = [];
        angular.forEach(data, function(v, i){
            if(v.img){
                a.push(v);
            }
        });
        return a;
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/MX7xm/2/)

# ruby-on-rails - Rails 基于角色的身份验证，角色存储在数据库中

> ID：15451140
> 
> 赞同：0
> 
> 时间：2013-03-16T15:37:36.300
> 
> 标签：ruby-on-rails, ruby, gem

是否存在 gem，它实现了以下内容：

*   用户可以有很多角色
*   每个角色都有一组权限
*   每个权限只是布尔值
*   存储在数据库中的角色和权限（最重要）

例如，我想要这样的东西：

```
if current_user.can?(:read_all, :list_of_orders)
...
end 
```

并且`can?`方法应该搜索，是否有任何角色允许它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:39:40.133

请参阅用户身份验证设计，您可以在那里定义您的角色：

```
https://github.com/plataformatec/devise 
```

甚至更好的是，将它与 cancan 轻松结合：

```
https://github.com/ryanb/cancan/wiki/Role-Based-Authorization 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:43:53.530

可以试试cancan gem，很强大

[https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)

例如：

```
<% if can? :update, @article %>
  <%= link_to "Edit", edit_article_path(@article) %>
<% end %> 
```

你可以定义能力`ability.rb`

```
can :manage, Article  # user can perform any action on the article
can :read, :all       # user can read any object
can :manage, :all     # user can perform any action on any object 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T15:44:19.407

在 Zippie 问题之后，我建议您使用 CanCan，但您也可以将其用于身份验证。请参阅以下链接，您会发现有用的[Rails 3 Authentication and Authorization with Devise and CanCan (Part 1)](http://starqle.com/articles/rails-3-authentication-and-authorization-with-devise-and-cancan-part-1/) & [Rails 3 Authentication and Authorization with Devise and CanCan (Part 2)](http://starqle.com/articles/rails-3-authentication-and-authorization-with-devise-and-cancan-part-2/)。

你可能会在你的`ability.rb`

```
class Ability
  include CanCan::Ability
  def initialize(user)
    user ||= User.new # guest user
   # raise user.role?(:administrator).inspect
    if user.role? :administrator

      can :manage, :all
      can :manage, User

    elsif user.role? :employee
      can :read, :all

    end

  end
end 
```

这样在您看来，您可以执行类似的操作

您也可以`can?`在控制器中使用 来创建必要的过滤器。

# amazon-ec2 - 是否可以从 openstack 图像创建 ami？

> ID：15451148
> 
> 赞同：3
> 
> 时间：2013-03-16T15:38:20.823
> 
> 标签：amazon-ec2, openstack, ec2-ami, ec2-api-tools

我正在从 OpenStack 中正在运行的实例创建映像

```
nova image-create <server-name> 
```

我只是想知道，这张图片可以上传到ec2吗？或者我需要从中创建一个 ami 吗？

有人可以指导我如何去做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:47:38.007

一目了然，openstack 图像服务能够存储多种图像类型：

```
Raw
Machine (kernel/ramdisk outside of image, a.k.a. AMI)
VHD (Hyper-V)
VDI (VirtualBox)
qcow2 (Qemu/KVM)
VMDK (VMWare)
OVF (VMWare, others) 
```

参考：[http ://www.openstack.org/projects/image-service/](http://www.openstack.org/projects/image-service/)

所以基本上。您可以直接将 AMI 上传到 openstack。

例子：

```
KERNEL_ID=`glance image-create --name="tty-linux-kernel" --disk-format=aki --container-format=aki < ttylinux-uec-amd64-12.1_2.6.35-22_1-vmlinuz | awk '/ id / { print $4 }'`
INITRD_ID=`glance image-create --name="tty-linux-ramdisk" --disk-format=ari --container-format=ari < ttylinux-uec-amd64-12.1_2.6.35-22_1-loader | awk '/ id / { print $4 }'`
glance image-create --name="tty-linux" --disk-format=ami --container-format=ami --property kernel_id=${KERNEL_ID} --property ramdisk_id=${INITRD_ID} < ttylinux-uec-amd64-12.1_2.6.35-22_1.img 
```

对正在运行的实例执行映像创建时

> 如果 Compute 配置为使用 qcow2 > images（这是默认设置），则只能从正在运行的实例创建图像。您可以通过在 nova.conf 中添加以下行来显式启用 qcow2 图像 >：

但是假设您是这样配置的，是的，它将以 AMI 格式输出。

参考：

[http://docs.openstack.org/trunk/openstack-compute/admin/content/creating-images-from-running-instances.html](http://docs.openstack.org/trunk/openstack-compute/admin/content/creating-images-from-running-instances.html)

# android - 冰淇淋三明治平板电脑的兼容模式？

> ID：15451155
> 
> 赞同：0
> 
> 时间：2013-03-16T15:39:09.407
> 
> 标签：android, android-4.0-ice-cream-sandwich, tablet

我读[了这个](http://developer.android.com/guide/practices/screen-compat-mode.html)关于兼容模式。我有一个 ICS 平板电脑，但找不到任何东西来启用或禁用它。

我的应用程序的布局看起来很乱。它没有放大。缩放更好，我不再在这个应用程序上工作（无法优化），而且更容易接受。

该链接有以下 2 个相关选项：

> *   您的应用程序已将 android:minSdkVersion 和 android:targetSdkVersion 设置为“10”或更低，并且未明确声明使用该元素支持大屏幕。
>     
>     
> *   您的应用程序已将 android:minSdkVersion 或 android:targetSdkVersion 设置为“11”或更高，并使用该元素明确声明它不支持大屏幕。

第一个对我来说是正确的。

我在清单中尝试了不同的东西：

```
 <uses-sdk android:minSdkVersion="7" 
        android:targetSdkVersion="7"
    /> 
```

这（也尝试删除此条目）：

```
<supports-screens android:largeScreens="false" /> 
```

没有什么帮助，布局看起来完全一样，我在设备上看不到有关它的选项。

我需要做什么？谢谢。

评论要求的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="x"
    android:versionCode="x"
    android:versionName="x.x.x" >

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 

    <uses-sdk android:minSdkVersion="7" 
        android:targetSdkVersion="7"
        />

<!--     <supports-screens android:largeScreens="false" /> -->

    <application
        android:name=".x"
        android:icon="@drawable/x"
        android:label="@string/x"
        android:debuggable="false"
        android:theme="@android:style/Theme.NoTitleBar" >
        <activity
            android:name="x"
            android:screenOrientation="portrait" >
                   <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="x"
            android:screenOrientation="portrait" >
        </activity>

    </application>

</manifest> 
```

# linqpad - 如何清除 Linqpad 中无用条目的服务器下拉列表？

> ID：15451156
> 
> 赞同：0
> 
> 时间：2013-03-16T15:39:12.083
> 
> 标签：linqpad

在 LINQ to SQL 连接窗口中，服务器下拉列表现在包含无用的项目，因为它们试图找到正确的实例以连接到 MS SQL 服务器。唯一有效的是（本地）或本地主机。认为既然 .\SQLEXPRESS 与 SQL express 版本一起使用，那么 .\MSSQLSERVER 将与完整版本一起使用，但我错了！无论如何，我离题了，您如何清除这些条目，因为按删除不会删除它们？如果有人还可以解释有关 .\SQLEXPRESS 和（本地）为快速版工作的其他相关部分，但在完整版本（企业版或标准版？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:25:08.680

删除`%appdata%\LINQPad\RecentServers.txt`

您安装了哪个版本的 SQL Express？最新版本称为 LOCALDB，`.\SQLEXPRESS`将无法使用。相反，您必须使用`(localdb)\v11.0`

# android - 安卓 google play 账号授权

> ID：15451159
> 
> 赞同：0
> 
> 时间：2013-03-16T15:39:35.903
> 
> 标签：android, authentication

有没有办法在 android 设备上检索当前的 google play 登录用户？

我想制作一个应用程序，该应用程序从 android 获取此用户名或用户 ID，并将其发送到我的一台服务器，并像这样在我的服务上验证用户。

我知道有多种方法可以通过 facebook、twitter、google 和许多其他提供商进行身份验证，但我想让它在不询问用户名和密码的情况下工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:42:25.683

是的，但是你在 manfiest 中添加了一个权限请求

```
<uses-permission android:name="android.permission.GET_ACCOUNTS"></uses-permission> 
```

然后您可以使用以下方法获取设备上配置的所有帐户的数组：

```
Account[] accounts = ((AccountManager) getSystemService(ACCOUNT_SERVICE)).getAccounts(); 
```

# c#-4.0 - 在asp.net c#的masterpage中插入注销按钮时出错

> ID：15451161
> 
> 赞同：-1
> 
> 时间：2013-03-16T15:39:41.867
> 
> 标签：c#-4.0, logout

'Button' 类型的控件 'ctl00_logout' 必须放在带有 runat=server 的表单标签内。

我在运行这段代码时遇到了这个问题。

```
<div align="center">
             <asp:Button ID="logout" runat="server" Text="Logout" Visible="false" 
                 onclick="logout_Click" />
            </div> 
```

我的代码隐藏文件代码是：

```
protected void logout_Click(object sender, EventArgs e)
{
    Session.Abandon();
    Session.Clear();
    Response.Redirect("~/Home Page.aspx");
} 
```

* * *

如果我将表单标签放在母版页中，那么我也会出错......请给出解决方案，谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:45:09.097

您拥有的每个内容都`MasterPage`必须包含在一个`<form runat="server">`标签中 - 开始标签将在`<body>`标签之后，而表单结束标签就在之前`</body>`

# java - 从 InputStream 读取直到双引号

> ID：15451164
> 
> 赞同：0
> 
> 时间：2013-03-16T15:39:51.927
> 
> 标签：java, byte, inputstream, quotes

需要帮助从 InputStream 读取到引号之前的字节列表。问题是， InputStream 读取字节，我不知道当它到达引号时如何停止读取......我想过这样的事情：

```
public static List<Byte> getQuoted(InputStream in) throws IOException {
    int c;
    LinkedList<Byte> myList = new LinkedList<>();
    try {
    while ((in.read()) != "\"") {   ?????
        list.add(c)
    ..... 
```

while 条件是有问题的，当然引号是`String`while`int`是意料之中的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:04:50.730

`"\""`是一个字符串。如果您只想要 的字符表示`"`，请`'"'`改用。

请注意，**如果您的文件不是 ASCII 格式**（并且不同字符集之间的行为将不一致），您的代码将无法按预期工作（它当然取决于您的预期）。

如果在 ASCII 中，每个字符将占用文件中的一个字节并[`InputStream::read()`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28%29)读取一个字节（因此是一个 ASCII 字符），所以一切都会正常工作。

如果在每个字符占用超过 1 个字节的字符集中（例如 Unicode），每次读取将读取不到一个字符，并且您的代码可能无法按预期工作。

[`Reader::read()`](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html#read%28%29)（并且使用`Character`而不是`Byte`）建议，因为它会读取一个字符，而不仅仅是一个字节。

另外，你错过了一个任务：

```
while ((in.read()) != '"') 
```

应该

```
while ((c = in.read()) != '"') 
```

# java - 创建方法按名称获取列表

> ID：15451165
> 
> 赞同：0
> 
> 时间：2013-03-16T15:40:01.877
> 
> 标签：java, oop

我有以下类，并提供带有键和值的实体名称`HashMap`：

```
import java.util.LinkedHashMap;

public class ObjectStructure {
private String entityName;
private LinkedHashMap<String, String> keyVal;

public String getEntityName() {
    return entityName;
}

public void setEntityName(String entityName) {
    this.entityName = entityName;
}

public LinkedHashMap<String, String> getKeyVal() {
    return keyVal;
}

public void setKeyVal(LinkedHashMap<String, String> keyVal) {
    this.keyVal = keyVal;
} 
```

}

我也列出如下

```
private static List<ObjectStructure> JsonObj = new ArrayList<ObjectStructure>(); 
```

因为我得到的`JSON`对象是哪个列表，所以我需要按名称提供列表的方法（即`entityName`可以有很多条目，我希望**特定实体**获取相应数据的列表）。我想我需要为它建立新的类，但我不知道如何设计它，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:54:30.190

我不太确定你在问什么，
但如果你问如何从 arraylist 中返回某个`ObjectStructure`by entityName ，那么只需循环`ArrayList`并比较你`searchString`的每个`ObjectStructure`'s `entityName`。

如果您在内部寻找一个值，`ObjectStructure`然后`ArrayList`搜索`ArrayList`右边`ObjectStructure`。找到后，搜索`ObjectStructure`您要查找的密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:26:28.467

您可以使用不同的地图：

```
Map<String, Map<String,String>> entities; 
```

外部映射的键是 entityName，内部映射是键/值对的集合。要获取命名实体的键/值对，只需执行以下操作：

```
Map<String, String> keyValueMap = entities.get("MyEntity"); 
```

# php - htaccess url重写包括多个参数

> ID：15451170
> 
> 赞同：0
> 
> 时间：2013-03-16T15:41:06.433
> 
> 标签：php, .htaccess

我正在尝试使用 htaccess 编写以下内容：-

```
main.php?section=message&page=inbox&f=20&id=1 
```

我希望将其更改为：-

```
message/inbox?f=20&id=1 
```

我试过： -

```
RewriteRule    ^message/inbox?f=$([A-Za-z0-9-]+)&id=$([A-Za-z0-9-]+)   main.php?section=message&page=inbox&f=$1&id=$2 
```

它给了我服务器错误。

我该如何改进重写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:51:12.507

尝试这个

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^(.*)/(.*)?f=(.*)&id=(.*)$ /main.php?section=$1&page=$2&f=$3&id=$4 [L] 
```

**或者**

```
RewriteRule ^message/inbox?f=20&id=1$ main.php?section=message&page=inbox&f=20&id=1 [L] 
```

# email - Amazon SES SPF 设置 - 使用 -all 时如何为服务器 IP 设置记录

> ID：15451172
> 
> 赞同：1
> 
> 时间：2013-03-16T15:41:26.903
> 
> 标签：email, amazon-web-services, spf

我一直在阅读此页面，了解如何为我的域设置 SPF，通过 Amazon SES 向我的订阅者发送电子邮件。

[http://docs.aws.amazon.com/ses/latest/DeveloperGuide/spf.html](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/spf.html)

我已按照建议添加了 SPF：

> “spf2.0/pra 包括：amazonses.com -all”

之后，它注意到以下内容：

> 如果您如上例所示使用“-all”，则 ISP 可能会阻止来自您的发件人 ID 记录中未列出的 IP 地址的电子邮件。因此，您必须为发送电子邮件的每个 IP 地址添加一条记录。作为调试辅助，您可以改用“~all”。当您使用“~all”时，ISP 通常会接受来自未列出的 IP 地址的电子邮件。但是，他们可能会标记它。为了最大限度地提高交付能力，请使用“-all”并为每个 IP 地址添加一条记录。

我所有的电子邮件都是从我知道 IP 地址的服务器发送的。因此，我想为我的服务器 IP 设置一个记录——我只是对我需要使用什么感到有点困惑。是不是简单的另一条记录如下：

> “spf2.0/pra 包括：127.0.0.1 -all”

在哪里 127.0.0.1 被我的服务器 IP 替换？

我查看了openspf 网站，但收效甚微——了解正确记录的基本概念会很棒。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T09:07:25.793

*   spf2.0/pra 是 SenderID 语法。虽然名称与 SPF 本身相似，但它们是不同的协议。有关 SPF 与 SenderID 的差异和争议的解释，请查看[此处](http://www.openspf.org/SPF_vs_Sender_ID)。

*   有关 SPF 记录语法，请查看[此处](http://www.openspf.org/SPF_Record_Syntax)。将您的服务器添加到记录中的最简单方法如下：`"v=spf1 ip:xxx.xxx.xxx.xxx include:amazonses.com -all"`，其中 xxx.xxx.xxx.xxx 应替换为您的服务器的 IP。另一种选择，如果您的域的 A 或 MX 记录指向您的邮件服务器的 IP，则为：`"v=spf1 a include:amazonses.com -all"`或`"v=spf1 mx include:amazonses.com -all"`. 也允许同时添加它们。

# actionscript-3 - AS3 鱼眼效果

> ID：15451175
> 
> 赞同：0
> 
> 时间：2013-03-16T15:41:47.863
> 
> 标签：actionscript-3, flash

我很难理解它是如何`DisplacementMapFilter`工作的。基本上，我正在尝试通过鱼眼/遮罩的组合来创建一个旋转的星球。

另外，我该如何通过时间线来做到这一点？我对其中的编码不太熟悉，但这更像是一个动画项目，所以类是不可能的。抱歉缺少代码-我只是卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:46:03.893

正如上面评论中所指出的，这可能只解决了一半的问题；

使用正确的工具生成置换贴图图像并不难。我假设您使用的是 Photoshop、GIMP、Fireworks 或类似工具。

最好使用此方法处理 128x128 或更小的图像。一些编辑器拥有更专业的工具，可以让您处理几乎任何大小的图像，但这是一个通用过程，不需要特殊工具。你总是可以放大最终结果，但质量会开始下降。

*   从渐变填充开始。它应该从左侧的纯黑色变为右侧的深红色（特别是 128,0,0）。添加从顶部的黑色到底部的深绿色（特别是 0,128,0）的垂直填充，并将它们与 LIGHTEN 或 ADD 过滤器组合。您现在应该有一个具有黑色、红色、绿色和黄色角的图像。将其压平。

*   将此图像复制到另一层/无论您的编辑器选择什么术语。应用你想要的任何置换过滤器（可能是鱼眼，可能是手动涂抹，可能是透视变换，任何东西）

*   在两者之间添加第三层。用深黄色（128,128,0）填充它并将其设置为添加/添加混合模式。将顶层设置为 SUBTRACT / SUBTRACTION 混合模式。

就是这样。您应该得到一个主要是黄色的图像，它将用作置换贴图。

更新：

要在示例程序 ( [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filters/DisplacementMapFilter.html#includeExamplesSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filters/DisplacementMapFilter.html#includeExamplesSummary) ) 中使用它，请将`createBitmapData`函数替换为：

```
private function createBitmapData():BitmapData {
    return myBitmapObject.bitmapData;
} 
```

`myBitmapObject`你的位移位图的实例名称（我认为）在哪里。有更整洁的设置方法，但这是最简单的。

# objective-c - 查找 Mac OSX 序列号

> ID：15451177
> 
> 赞同：6
> 
> 时间：2013-03-16T15:41:58.133
> 
> 标签：objective-c, macos, cocoa, uniqueidentifier

如何查找 Mac OSX 序列号。

有时需要获取 mac 的序列号，然后您对其进行验证。

几年前，当我为[OsiriX](http://www.osirix-viewer.com/)开发插件时，我也需要同样的东西。我被要求以这种方式发布它，只有少数系统可以使用该插件。

*如果我们得到比这更好的解决方案，那对我们所有人都会有很大帮助。*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-16T15:57:13.300

以下代码主要是从[Technical Note TN1103](http://developer.apple.com/library/mac/#technotes/tn1103/_index.html)复制而来，稍作修改以返回 an `NSString`并使其与 ARC 一起编译：

```
#include <IOKit/IOKitLib.h>

- (NSString *)getSerialNumber
{
    NSString *serial = nil;
    io_service_t platformExpert = IOServiceGetMatchingService(kIOMasterPortDefault,
                                     IOServiceMatching("IOPlatformExpertDevice"));
    if (platformExpert) {
        CFTypeRef serialNumberAsCFString =
        IORegistryEntryCreateCFProperty(platformExpert,
                                        CFSTR(kIOPlatformSerialNumberKey),
                                        kCFAllocatorDefault, 0);
        if (serialNumberAsCFString) {
            serial = CFBridgingRelease(serialNumberAsCFString);
        }

        IOObjectRelease(platformExpert);
    }
    return serial;
} 
```

您必须将 IOKit.framework 添加到您的构建设置中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-18T16:10:28.110

这是解决方案的 Swift 版本：

```
var serialNumber: String? {
  let platformExpert = IOServiceGetMatchingService(kIOMasterPortDefault, IOServiceMatching("IOPlatformExpertDevice") )

  guard platformExpert > 0 else {
    return nil
  }

  guard let serialNumber = (IORegistryEntryCreateCFProperty(platformExpert, kIOPlatformSerialNumberKey as CFString, kCFAllocatorDefault, 0).takeUnretainedValue() as? String) else {
    return nil
  }

  IOObjectRelease(platformExpert)

  return serialNumber
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-14T17:57:31.743

这是基于 Martin 上面提到的 TN1103 的 C++ 版本。

C++ 示例：

```
#include <CoreFoundation/CoreFoundation.h>
#include <IOKit/IOKitLib.h>

std::string example_class::getSerialNumber()
{
    CFStringRef serial;
    char buffer[64] = {0};
    std::string seriaNumber("");
    io_service_t platformExpert = IOServiceGetMatchingService(kIOMasterPortDefault,
                                                          IOServiceMatching("IOPlatformExpertDevice"));
    if (platformExpert)
    {
        CFTypeRef serialNumberAsCFString = IORegistryEntryCreateCFProperty(platformExpert,
                                                                       CFSTR(kIOPlatformSerialNumberKey),
                                                                       kCFAllocatorDefault, 0);
        if (serialNumberAsCFString) {
            serial = (CFStringRef)serialNumberAsCFString;
        }
        if (CFStringGetCString(serial, buffer, 64, kCFStringEncodingUTF8)) {
            seriaNumber = buffer;
        }

        IOObjectRelease(platformExpert);
    }
    return seriaNumber;
} 
```

# php - php file() 函数创建引号和逗号

> ID：15451182
> 
> 赞同：1
> 
> 时间：2013-03-16T15:42:14.357
> 
> 标签：php, file, csv, quotation-marks

我正在尝试编写一些将 $_GET-data 作为输入并将其保存到 csv 文件中的 php 代码。多次运行代码时，我的 csv 文件如下所示：

```
Date,Time,Temperature,"Air Humidity","Soil Humidity",Light,"Wind Direction","Wind Speed",Rain
2013-03-16,16:24:27,12,80,40,82,255,10,0
"2013-03-16,16:24:26,12,80,40,82,255,10,0
","""2013-03-16,16:24:26,12,80,40,82,255,10,0
",""",""""""2013-03-16,16:24:25,12,80,40,82,255,10,0
",""","""""",""""
",""",""""""
","""
" 
```

如您所见，该程序将引号和逗号添加到我不想要的数据中。这显然是由 'file("weather_data.csv")' 完成的，但我不知道如何禁用或解决此问题。

这是我现在的代码：

```
<?php

// Save received data into variables:
$temperature  = $_GET["t"];
$airHumidity  = $_GET["ha"];
$soilHumidity = $_GET["hs"];
$light        = $_GET["l"];
$windDir      = $_GET["wd"];
$windSpeed    = $_GET["ws"];
$rain         = $_GET["r"];

// Arrays for the column descriptor (first line in the csv-file) and the recent data:
$columnDescriptor = array("Date","Time","Temperature","Air Humidity","Soil Humidity","Light","Wind Direction","Wind Speed","Rain");
$recentData       = array(date("Y-m-d"),date("H:i:s"),$temperature,$airHumidity,$soilHumidity,$light,$windDir,$windSpeed,$rain);

$fileContents = file("weather_data.csv");
array_shift($fileContents); // removes first field of $fileContents

$file = fopen("weather_data.csv","w");

fputcsv($file,$columnDescriptor);
fputcsv($file,$recentData);
fputcsv($file,$fileContents);

fclose($file);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:08:22.097

$fileContents 被读取为字符串数组，CSV 文件每行一个条目，但不解析实际的 CSV 数据。最后一个 fputcsv 尝试将此数据写入 CSV 并将其转义（添加引号和内容）。您需要将旧文件内容 ($fileContents) 添加到您的文件中，`fwrite`而不是`fputcsv`：

```
fwrite($file, implode("\n", $fileContents)); 
```

# html - 如何在 nginx 中提供 html 文件而不在此别名设置中显示扩展名

> ID：15451191
> 
> 赞同：30
> 
> 时间：2013-03-16T15:42:41.017
> 
> 标签：html, nginx, alias

我在 nginx 中设置此别名以正确显示我的网站时遇到了很多麻烦。

我关心的网站应该可以从`mywebsite.com/mr`位于`mywebsite.com/`. 该网站位于`/fullpath`（为简单起见缩写）该网站需要提供三种内容：

1.  索引文件位于`/fullpath/index.html`.
2.  其他 html 文件（未`.html`在浏览器中显示扩展名）。
3.  位于`/fullpath`和子目录中的静态资产 (js/css/img)。

我试过改变比赛的顺序，`try_files`发现他们都工作的情况，只是不是同时：

```
location /mr {
  default_type "text/html";
  alias /fullpath;

  # with this one 1 and 3 work
  # try_files $uri/index.html $uri.html $uri; 

  # with this one 2 and 3 work
  # try_files $uri $uri.html $uri/index.html;

  # with this one 1 and 2 work
  try_files $uri.html $uri/index.html $uri;
} 
```

当一个不起作用时，它是 404 的。有人知道我如何正确地提供各种文件吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-17T01:34:35.683

显然 alias 和 try_files[不能一起工作](http://trac.nginx.org/nginx/ticket/97)。但是，我认为您不需要使用别名。

```
location /mr {
  default_type "text/html";
  try_files  /fullpath/$uri /fullpath/$uri.html /fullpath/$uri/index.html  /fullpath/index.html;
} 
```

哪个会尝试：

*   确切的文件。
*   添加了 .html 的文件。
*   路径中的索引。
*   默认索引。

我认为根指令确实适用于尝试文件，但无法测试。

```
server{
    location /mr {

        root /home/mysite/fullpath;

        default_type "text/html";
        try_files  $uri $uri.html $uri/index.html index.html;
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-11T15:04:19.587

我使用了@Danack 发布的内容的组合，这使我得到了我正在寻找的结果（直接提供 html 文件）：

```
location /health-check {
    default_type "text/html";
    alias /path/to/my/file.html;
} 
```

# php - 为什么我的“From”和“Reply-To”标题总是包含在我从 PHP 发送的邮件中？

> ID：15451193
> 
> 赞同：0
> 
> 时间：2013-03-16T15:42:48.133
> 
> 标签：php, email

我有这个用 PHP 发送邮件的代码：

```
$headers = "Content-type: text/html;\r\n";
$headers .= 'From: "Registration" <registration@site.com>' . "\r\n";
$headers .= "Reply-To: registration@site.com\r\n";
$headers .= "Return-Path: registration@site.com\r\n";

$mailresult = mail($to, $subject, $message, $headers, '-f registration@site.com'); 
```

邮件发送，发件人地址设置正确，并且工作几乎完美。

问题是邮件在邮件正文中包含`From:`、`Reply-To:`和`Return-Path:`字段。这是我的 Gmail 界面中的快照：

![email_example](../Images/aa3f756305191b7c73958b0e08b64e3f.png)

以下是原始标题的样子：

```
X-PHP-Originating-Script: 33:mailtest.php
Content-type: text/html;
Message-Id: <20130316153738.AA739118073@server.com>
Date: Sat, 16 Mar 2013 15:37:38 +0000 (UTC)
From: registration@site.com

From: Registration <registration@site.com>

Reply-To: registration@site.com

Return-Path: registration@site.com

<html> 
```

第一个`From:`似乎在实际标题中。第二个`From:`，以及之后的一切都`<html>`在体内。

如何将这些标题字段从电子邮件正文中取出并放入它们所属的标题中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:29:17.893

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

```
additional_headers (optional)
[...]
Note:
If messages are not received, try using a LF (\n) only. Some Unix 
mail transfer agents  (most notably qmail) replace LF by CRLF 
automatically (which leads to doubling CR if CRLF is used). This 
should be a last resort, as it does not comply with RFC 2822\. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:46:13.603

删除第一个标题 (text/html) 中的分号。

# html - 如何使用 % 定义的宽度但 px 定义的填充使两个 div 彼此相邻浮动

> ID：15451194
> 
> 赞同：0
> 
> 时间：2013-03-16T15:42:49.553
> 
> 标签：html, css

我试图将图像浮动到文本块的左侧并在两者之间保持微小的间隙，但是我不希望文本在图像下方蛇行。这就是我要的：

```
------- ------------
| pic | |   text   |
------- |          |
        |          |
        |          |
        ------------ 
```

如果所有元素的宽度和大小都是 px 定义的，这将很容易，但它们是 % 定义的：

```
<div id="container">
  <div class="theimage"><img src=img.jpg"></div>
  <div class="thetext">blah blah</div>
</div>

#container {width: 95%; overflow: auto}
.theimage {float: left; width: 20%}
.theimage img {width: 100%}
.thetext {float: left; width: 80%} 
```

以上工作正常。但是，如果我随后添加`padding-right: 10px`到`theimage`以在图像和文本之间创建一个间隙，则`thetext`下降`theimage`而不是漂浮在它旁边。

`theimage`有什么帮助可以在和之间找到一个间隙`thetext`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:51:08.773

尝试使用该属性`box-sizing: border-box`。在正常`content-box`模型下，元素的内边距不包括在高度计算中，因此您在图像的 20% 上加上 10px，因此图像和文本的总和将为 20% + 10px + 100%，即当然超过父宽度。

事实上，[Paul Irish 建议使用](http://paulirish.com/2012/box-sizing-border-box-ftw/)CSS 规则，`* { box-sizing: border-box; }`因为它可以让您免于计算尺寸的麻烦，而且对浏览器性能和页面呈现的影响微乎其微。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:51:30.237

`box-sizing: border-box`在您添加填充的元素上使用。这导致填充成为其宽度计算的一部分。

[http://jsfiddle.net/ExplosionPIlls/jqjqd/1/](http://jsfiddle.net/ExplosionPIlls/jqjqd/1/)

* * *

替代解决方案：

而不是在容器上使用`float: left`使用`display: inline-block`和。`white-space: nowrap`这将迫使元素保持在一行。

您还需要在各个元素上进行设置`white-space: normal`，以便它们可以随内容增长并保持与顶部对齐。`vertical-align: top`全部一起：

```
#container {
    width: 95%;
    overflow: auto;
    height: 50px;
    white-space: nowrap;
}
.theimage {
    display: inline-block;
    width: 20%;
    padding-right: 10px;
    white-space: normal;
    vertical-align: top;
}   
.thetext {
    display: inline-block;
    width: 80%;
    white-space: normal;
    vertical-align: top;
} 
```

这会导致水平滚动条打开`#container`（因为填充会导致其内容的总宽度超过 100%）。

[http://jsfiddle.net/ExplosionPIlls/jqjqd/](http://jsfiddle.net/ExplosionPIlls/jqjqd/)

# kernel - 侵入内核中的 sys_open 并将文件内容抓取到缓冲区

> ID：15451198
> 
> 赞同：0
> 
> 时间：2013-03-16T15:43:27.100
> 
> 标签：kernel, system-calls

我试图侵入 fs/open.c 中的系统调用“sys_open”并将文件内容抓取到 char* 缓冲区中。这是调用堆栈：sys_open -> filp_open -> dentry_open，我在dentry_open的末尾添加了以下代码，以便将文件内容读取到缓冲区但没有工作，有什么想法吗？

```
char *buf = kmalloc(sizeof(*f), GFP_KERNEL);
mm_segment_t fs;
fs = get_fs();
set_fs(get_ds());
f->f_op->read(f, buf, sizeof(*f), 0);
set_fs(fs); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:44:45.930

最后我自己解决了这个问题。

通过直接调用“kernel_read()”

# macos - 如何使用 tmux 向下滚动鼠标滚轮

> ID：15451204
> 
> 赞同：13
> 
> 时间：2013-03-16T15:44:09.533
> 
> 标签：macos, osx-lion, tmux, iterm2

我`mouse-mode on`在 tmux.conf 中使用鼠标滚轮向上滚动 tmux （[这是我的整个 conf](https://gist.github.com/mahemoff/5176921)）。

但我总是在再次向下滚动时遇到问题。一旦光标到达屏幕底部，它会立即滚动回整个缓冲区的底部，也就是提示所在的位置。不可能像向上滚动几行一样向下滚动几行。换句话说，整个中间部分只有在向上的路上才能看到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T01:21:36.877

我刚刚从 tmux 1.6 升级到新的 tmux 1.8（从源代码而不是 Homebrew 编译，以防万一），它现在又可以工作了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T16:34:18.420

如果您关闭鼠标模式并使用键盘会发生什么？试试看。您是否使用了burningTyger 的conf 设置？尝试删除缓冲区命令，也许它不会自动滚动到提示行。如果您可以禁用任何自动行为，您也许可以做您需要的事情。我不知道 OSX 术语，但希望这些概念可能会有所帮助。

# javascript - 如何使用 JavaScript 提交 Google 表单？

> ID：15451205
> 
> 赞同：0
> 
> 时间：2013-03-16T15:44:16.610
> 
> 标签：javascript, jquery, forms

我正在制作用户脚本，并希望使用 JavaScript填写并提交[此 Google 表单。](https://docs.google.com/forms/d/1-WzTl4ok_pwIxQo4Sy0cG-DUoj80bTTLy8juZuOEaz0/viewform)我是否必须将其嵌入网页中并不重要。

因此定义了变量（从页面元素获取值），但我无法使用此代码（仅示例）填写字段（将其嵌入页面后）：

```
var eRtime = $('span#live_time.time').text();
$('input#entry_1609489384.ss-q-short').val(eRtime); 
```

可以使用类似的代码填充本机页面字段，但不能使用嵌入表单。就像它以某种方式受到保护一样。

# java - 在 NEO4J 中添加多个评估器

> ID：15451207
> 
> 赞同：0
> 
> 时间：2013-03-16T15:44:27.800
> 
> 标签：java, neo4j

如何添加多个评估者？例如 -

```
TraversalDescription TRAVERSAL = Traversal.description()
.breadthFirst()
.evaluator(Evaluators.excludeStartPosition()); 
```

我也想补充

```
Evaluators.toDepth(2) 
```

我该怎么做？

换句话说，我想创建一个评估者列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:42:27.680

只需通过对 evaluator() 方法的另一个调用来添加评估器，例如：

```
TraversalDescription TRAVERSAL = Traversal.description()
.breadthFirst()
.evaluator(Evaluators.excludeStartPosition())
.evaluator(Evaluators.toDepth(2)); 
```

# graphics - 如何使用Blender使用粒子系统在OBJ文件中导出顶点法线（vn）

> ID：15451209
> 
> 赞同：1
> 
> 时间：2013-03-16T15:44:35.680
> 
> 标签：graphics, 3d, blender, wavefront

我有一个能够在 OpenGL 上下文中解析和解释 OBJ 文件格式的程序。

我在 Blender 中创建了一个小项目，其中包含一个带有“头发”粒子的简单球体。

转换后（从球体中分离粒子）我的粒子形成一个新的网格。所以我的项目中有两个网格（名为“Sphere”和“Hair”）。当我想在 OBJ 文件（文件/导出/Wavefront (.obj)）中导出网格“球体”时，选择“包含法线”，导出后，该文件包含有关法线的所有信息（例如：vn 0.5889 0.14501 0.45455， ...）。

当我尝试对粒子做同样的事情时，也选择“包含法线”，我在 OBJ 文件中没有法线。（在导出之前，我已经选择了正确的网格。）

所以，我不明白为什么不为类型粒子的网格导出法线属性。

这是我的头发颗粒的一般 Blender 渲染图。如您所见，所有粒子都会与光发生反应。所以 Blender 使用这些粒子的法线属性。

![在此处输入图像描述](../Images/5769fc9f8f4f7fdd21c3d3391ffd4940.png)

现在，上图显示（在 Blender 的“编辑模式”-> 转换后）粒子由几行组成。在我的 opengl 程序中，我使用 GL_LINES 来渲染相同的粒子。我只想拥有法线信息来管理我的粒子上的光属性。

![在此处输入图像描述](../Images/8d3d8fc21bffdfce504306a8435be1b2.png)

您知道如何导出粒子网格的法线属性吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:24:14.433

您正在尝试为线条提供法线。让我们想想这意味着什么。

当我们谈论表面上的法向量时，我们的意思是“指向表面之外”

![表面法线](../Images/3c7cdbe04953d43e72906a7d4e2c923b.png)

对于三角形，当我们将一侧定义为“正面”面时，正好有一个法线。对于线，任何垂直于线的向量都算作法线——有无限的，任何一个都会“做”。

我们关心图形中的法线的一些原因是什么？

*   照明：例如，漫射照明通过使用法线与入射光矢量的点积来近似。不过这不适用于头发！
*   得到一个变换矩阵：为此你可以选择任何法线（你想变换成头发空间吗？）

简而言之：您可以为您的法线选择任何垂直向量（这很容易计算），或者根本不为您的头发使用法线。这取决于你想要做什么。

# c# - 无法在类之间传递数据

> ID：15451211
> 
> 赞同：2
> 
> 时间：2013-03-16T15:44:46.287
> 
> 标签：c#, kinect

我正在使用 winform 开发基于 VS2012 的 Kinect 应用程序。在我尝试了几种方法之后，我仍然无法将值从一个类传递到另一个类。

基本上我有三个类，一个 public `MainWindow()`， public partial`FaceTrackingViewer()`和 public `SkeletonFaceTracker()`。最后一节课住在`FaceTrackingViewer()`课堂上。

在 SkeletonFaceTracker() 中，我有以下内容：

```
public bool lastFaceTrackSucceeded { get; set; }

internal void OnFrameReady(KinectSensor kinectSensor, ColorImageFormat colorImageFormat, byte[] colorImage, DepthImageFormat depthImageFormat, short[] depthImage, Skeleton skeletonOfInterest)
{
    // something else
    if (this.faceTracker != null)
    {
        this.lastFaceTrackSucceeded = frame.TrackSuccessful; //where it's set to be true.
        //something else
    }
} 
```

我还尝试将第一行更改为：

```
public bool lastFaceTrackSucceeded;

public bool LastFaceTrackSucceeded
{
    get { return lastFaceTrackSucceeded; }
    private set { lastFaceTrackSucceeded = value; }
} 
```

不过我觉得两者是一样的。

在 MainWindow() 中，我有：

```
public partial class MainWindow : Window
{
    //some other irrelevant code snippets

    private FaceTrackingViewer.SkeletonFaceTracker skeletonFaceTracker = new FaceTrackingViewer.SkeletonFaceTracker();

    private void button_faceOnly_Click(object sender, RoutedEventArgs e)
    {
        bool faceTrackSucceeded = skeletonFaceTracker.lastFaceTrackSucceeded;
        // if I use the second structure in SkeletonFaceTracker(), it should be:
        // bool faceTrackSucceeded = skeletonFaceTracker.LastFaceTrackSucceeded;

        if (faceTrackSucceeded == true )
        {
             //do something
        }
    }
} 
```

但是，即使 the或in是， the`bool faceTrackSucceeded`也始终是。我很困惑，不知道哪里出错了。`false``lastFaceTrackSucceeded``LastFaceTrackSucceeded``SkeletonFaceTracker()``true`

请注意，所有视频处理和面部跟踪操作都在`FaceTrackingViewer()`课堂上进行。我只是想将一些参数和结构传递给`MainWindow()`.

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:53:41.733

首先是一件事 - 我假设您将**变量** `lastFaceTrackSucceeded`公开纯粹是为了测试目的。在您的示例中，定义属性的两种方法在功能上是相同的。

`LastFaceTrackSucceeded`我能想到的唯一*另一*件事是您在`SkeletonFaceTracker`. 您没有提供足够的代码让我确定这一点，但是如果您有两个（或更多）实例，那么很容易将它们混淆。

# java - 如何使用 libgdx scene2d 创建多页屏幕？

> ID：15451217
> 
> 赞同：3
> 
> 时间：2013-03-16T15:45:21.783
> 
> 标签：java, user-interface, libgdx

我想创建一个多页面级别选择屏幕（就像在愤怒的小鸟级别选择中一样），用户可以通过在屏幕上水平拖动（滑动）他/她的手指来在页面之间导航。
我检查了scene2d 中的ui 小部件，所以我发现'ScrollPane' 可能有用，但它的功能与我想要的不同。
有人有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-31T20:48:17.870

[nEx.Software 有一个很好的小教程，在http://nexsoftware.net/wp/2013/05/09/libgdx-making-a-paged-level-selection-screen/](http://nexsoftware.net/wp/2013/05/09/libgdx-making-a-paged-level-selection-screen/)上解释了如何做到这一点。他的解决方案涉及扩展 ScrollPane 以添加分页功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T13:50:24.960

这更简单：

[http://moribitotechx.blogspot.co.uk/2012/09/23-tutorial-libgdx-mtx-test7levelscreen.html](http://moribitotechx.blogspot.co.uk/2012/09/23-tutorial-libgdx-mtx-test7levelscreen.html)

祝你好运

# css - 排列这些自定义复选框和标签

> ID：15451219
> 
> 赞同：1
> 
> 时间：2013-03-16T15:45:28.557
> 
> 标签：css, checkbox, vertical-alignment, sizing

CSS 将这些跨度设置为与包含标签相同的高度，`2vw`

```
input[type="checkbox"] + label {
        margin:0 auto;
        padding:0;
        padding-left:3vw;
        height:2vw;
        line-height:2vw;
}
input[type="checkbox"] + label span {
        background:lime;
        color:lime;
        position:absolute;
        margin-left:-3vw;
        text-align:center;
        width:2vw;
        height:2vw;
} 
```

![在此处输入图像描述](../Images/a6ffd39f52abdddb3ec1f9ae177bb960.png)

但他们显然不是。

此外，跨度不是垂直居中的。

为了使跨度与包含标签的*高度相同*并*垂直居中，缺少什么？*

摆弄你这个：http: [//jsfiddle.net/zLU8r/](http://jsfiddle.net/zLU8r/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:04:07.970

经过长时间的研究和反思

[这个答案有效](https://stackoverflow.com/a/9815560/907415)

给跨度 a `display: inline-block;`和垂直对齐可以工作。

# opencl - OpenCL RGB->HSL 并返回

> ID：15451224
> 
> 赞同：0
> 
> 时间：2013-03-16T15:45:52.340
> 
> 标签：opencl, rgb, brightness, hsl

我已经通过了所有资源并且无法解决我的问题。

我的主机代码调用 rgb2hsl 内核，然后调用 hsl2rgb 内核。我最终应该得到与我开始时相同的图像，但我没有。我的新图像色调在某些区域关闭。

红色区域不应该在那里。这是发生的情况的屏幕截图：

![在此处输入图像描述](../Images/2558e0758a70a72c6f66a1067c7023a1.png)

这是原图

![在此处输入图像描述](../Images/7b7757e3b0672ab8d8c4e919cdc0f3d0.png)

这是代码：

```
#define E .0000001f

bool fEqual(float x, float y)
{
    return (x+E > y && x-E < y);
}

__kernel void rgb2hsl(__global float *values, int numValues)
{
    // thread index and total
    int idx = get_global_id(0);
    int idxVec3 = idx*3;
    float3 gMem;
    if (idx < numValues)
    {
        gMem.x = values[idxVec3];
        gMem.y = values[idxVec3+1];
        gMem.z = values[idxVec3+2];
    }

    barrier(CLK_LOCAL_MEM_FENCE);

    gMem /= 255.0f; //convert from 256 color to float

    //calculate chroma
    float M = max(gMem.x, gMem.y);
    M = max(M, gMem.z);
    float m = min(gMem.x, gMem.y);
    m = min(m, gMem.z);
    float chroma = M-m; //calculate chroma
    float lightness = (M+m)/2.0f;
    float saturation = chroma/(1.0f-fabs(2.0f*lightness-1.0f));

    float hue = 0;
    if (fEqual(gMem.x, M))
        hue = (int)((gMem.y - gMem.z)/chroma) % 6;
    if (fEqual(gMem.y, M))
        hue = (((gMem.z - gMem.x))/chroma) + 2;
    if (fEqual(gMem.z, M))
        hue = (((gMem.x - gMem.y))/chroma) + 4;
    hue *= 60.0f;

    barrier(CLK_LOCAL_MEM_FENCE);

    if (idx < numValues)
    {   
        values[idxVec3] = hue;
        values[idxVec3+1] = saturation;
        values[idxVec3+2] = lightness;
    }
}

__kernel void hsl2rgb(__global float *values, int numValues)
{
    // thread index and total
    int idx = get_global_id(0);
    int idxVec3 = idx*3;
    float3 gMem;
    if (idx < numValues)
    {
        gMem.x = values[idxVec3];
        gMem.y = values[idxVec3+1];
        gMem.z = values[idxVec3+2];
    }

    barrier(CLK_LOCAL_MEM_FENCE);

    float3 rgb = (float3)(0,0,0);

    //calculate chroma
    float chroma = (1.0f - fabs( (float)(2.0f*gMem.z - 1.0f) )) * gMem.y;
    float H = gMem.x/60.0f;
    float x = chroma * (1.0f - fabs( fmod(H, 2.0f) - 1.0f ));

    switch((int)H)
    {
        case 0:
            rgb = (float3)(chroma, x, 0);
            break;
        case 1:
            rgb = (float3)(x, chroma, 0);
            break;
        case 2:
            rgb = (float3)(0, chroma, x);
            break;
        case 3:
            rgb = (float3)(0, x, chroma);
            break;
        case 4:
            rgb = (float3)(x, 0, chroma);
            break;
        case 5:
            rgb = (float3)(chroma, 0, x);
            break;
        default:
            rgb = (float3)(0, 0, 0);    
    }

    barrier(CLK_LOCAL_MEM_FENCE);

    rgb += gMem.z - .5f*chroma;
    rgb *= 255;

    if (idx < numValues)
    {   
        values[idxVec3] = rgb.x;
        values[idxVec3+1] = rgb.y;
        values[idxVec3+2] = rgb.z;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:46:34.563

问题是这一行：

色调 = (int)((gMem.y - gMem.z)/色度) % 6;

它应该是 hue = fmod((gMem.y - gMem.z)/chroma, 6.0f);

我做了一些更改以删除工件：

```
#define E .0000001f

bool fEqual(float x, float y)
{
    return (x+E > y && x-E < y);
}

__kernel void rgb2hsl(__global float *values, int numValues)
{
    // thread index and total
    int idx = get_global_id(0);
    int idxVec3 = idx*3;
    float3 gMem;
    if (idx < numValues)
    {
        gMem.x = values[idxVec3];
        gMem.y = values[idxVec3+1];
        gMem.z = values[idxVec3+2];
    }

    barrier(CLK_LOCAL_MEM_FENCE);

    gMem /= 255.0f; //convert from 256 color to float

    //calculate chroma
    float M = max(gMem.x, gMem.y);
    M = max(M, gMem.z);
    float m = min(gMem.x, gMem.y);
    m = min(m, gMem.z);
    float chroma = M-m; //calculate chroma
    float lightness = (M+m)/2.0f;
    float saturation = chroma/(1.0f-fabs(2.0f*lightness-1.0f));

    float hue = 0;
    if (fEqual(gMem.x, M))
        hue = fmod((gMem.y - gMem.z)/chroma, 6.0f);
    if (fEqual(gMem.y, M))
        hue = (((gMem.z - gMem.x))/chroma) + 2;
    if (fEqual(gMem.z, M))
        hue = (((gMem.x - gMem.y))/chroma) + 4;
    hue *= 60.0f;

    barrier(CLK_LOCAL_MEM_FENCE);

    if (M == m)
        hue = saturation = 0;

    barrier(CLK_GLOBAL_MEM_FENCE);

    if (idx < numValues)
    {   
        //NOTE: ARTIFACTS SHOW UP if we do not cast to integer!
        values[idxVec3] = (int)hue;
        values[idxVec3+1] = saturation;
        values[idxVec3+2] = lightness;
    }
} 
```

# c# - AjaxControlToolKit HTMLEditorExtender 在添加链接时添加锚标记作为普通文本

> ID：15451229
> 
> 赞同：7
> 
> 时间：2013-03-16T15:46:21.043
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit, htmleditorextender

我无法为这个主题写一个好的标题，因为我的问题有点奇怪。我在我的网站中使用 AjaxControlToolkit HTMLEditorExtender 来发送 HTML 格式的电子邮件。粗体、斜体、下划线等所有其他功能都可以正常工作，但是当我添加链接时，它会显示它的 HTML 代码，如下所示：

![在此处输入图像描述](../Images/b2cad94119db061c2519d4ad58be4fe7.png)

如您所见，**BOLD**正在工作，但锚标记以 HTML 代码格式显示。

扩展器和文本框的代码：

```
<asp:TextBox ID="TextBox2" runat="server" Height="376px" 
                TextMode="MultiLine" Width="795px"></asp:TextBox>
            <asp2:HtmlEditorExtender ID="TextBox2_HtmlEditorExtender" 
    runat="server" Enabled="True" TargetControlID="TextBox2">
</asp2:HtmlEditorExtender> 
```

谁能告诉我为什么会这样？这是扩展器的一些错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:21:30.007

考虑到我没有足够的声誉来评论这篇文章，我会在这里问一个后续问题。有什么方法可以让我们看到您在 C# 后端收到的文本？如果字符串有一些奇怪的格式，这可能是问题的根源。

另外，电子邮件客户端并不意味着是浏览器，并且电子邮件客户端可能无法正确呈现 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:57:05.613

该图像是编辑器本身的屏幕截图吗？我使用您的相同代码创建了自己的测试项目。

另外，您是如何创建链接的？我输入了一些突出显示文本的文本并单击了“创建链接”图标，然后我从那里输入了 URL。它按预期创建了链接。

唯一的区别是我没有费心实施消毒剂，看来你做到了。我会尝试禁用消毒剂（仅出于测试目的），看看这是否是您的问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:44:46.957

试试这个应该可以解决你的问题-

```
txtEmialMsg.Text=Server.HtmlDecode(ActualStringFromExtender.ToString()); 
```

或者，如果您收到（A href）文本，那么您需要在发送电子邮件时使用以下内容

```
Server.UrlDecode(link) 
```

# php - 使用 UTF-8 的 PHP preg_replace 不起作用

> ID：15451231
> 
> 赞同：1
> 
> 时间：2013-03-16T15:46:36.380
> 
> 标签：php, regex, utf-8, preg-replace

为什么这个 preg_replace 不起作用？

仅供参考，我将 PHP 脚本设置为没有 BOM 的 UTF8，并且我将此处的函数设置为删除模式的所有匹配项（而不是我实际要做的，即删除所有不匹配项），因为这样更容易测试。另请注意，该`ā`字符不在我的正则表达式中，因此这应该是唯一留下的字符。

```
$string='The Story of Jewād';
echo preg_replace('@([!"#$&’\(\)\*\+,\-\./0123456789:;<=>\?ABCDEFGHIJKLMNOPQRSTUVWXYZ\[\\\]\^_‘abcdefghijklmnopqrstuvwxyz\{\|\}~¡¢£⁄¥ƒ§¤“«‹›ﬁﬂ–†‡·¶•‚„”»…‰¿`´ˆ˜¯˘˙¨˚¸˝˛ˇ—ÆªŁØŒºæıłøœß÷¾¼¹×®Þ¦Ð½−çð±Çþ©¬²³™°µ ÁÂÄÀÅÃÉÊËÈÍÎÏÌÑÓÔÖÒÕŠÚÛÜÙÝŸŽáâäàåãéêëèíîïìñóôöòõšúûüùýÿž€\'])@u','',$string); 
```

我得到的结果是 $string 不变。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:08:51.213

这作为反向工作：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
<?php 

$string='The Story of Jewād';
echo preg_replace('@([ā])@','',$string);

?> 
```

所以，只是某处存在语法问题......将所有字符列为 RegExp 并不是一个好主意。你可以做这样的列表：

```
ltrChars : 'A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF'+'\u2C00-\uFB1C\uFDFE-\uFE6F\uFEFD-\uFFFF';
rtlChars : '\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC'; 
```

# android - new Thread 和 AsyncTask 的区别

> ID：15451243
> 
> 赞同：2
> 
> 时间：2013-03-16T15:49:10.193
> 
> 标签：android, multithreading

```
new Thread(new Runnable(){

}).run(); 
```

对比

```
new AsyncTask().execute(); 
```

我的印象是它们是同一件事，都启动了一个新的工作线程，但不是这样吗？

我问的原因是因为如果我尝试使用`new Thread()`我进行任何类型的网络连接`NetworkOnMainThreadException`，但当我将相同的代码放在异步任务中时，我没有得到。

这种差异的另一个例子是使用google maps api v2，其中所有的绘图/显示/隐藏都必须在上面完成`main thread`但是如果我`new Thread()`用来隐藏/显示标记看起来很好但是如果我尝试在异步任务中显示/隐藏我得到一个异常说它需要在主线程上完成。

真的`new Thread()`不启动工作线程吗？？

**编辑**

不知道为什么关闭，因为提供的链接我已经阅读并且没有回答我的问题并且没有提到使用`run()`vs`start()`确实回答了我的问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T15:53:53.143

如果您调用 run() 而不是 start()，它将在调用它的线程上运行。如果您调用 start()，那么它会创建一个新线程。这就是您收到错误的原因，因为您调用了 .run()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:03:49.670

NetworkOnMainThreadException exception occurs because you are making a network call on the main UI thread.

If you use AsyncTask you can get rid of that exception. From the documentation *AsyncTasks should ideally be used for short operations (a few seconds at the most.) If you need to keep threads running for long periods of time, it is highly recommended you use the various APIs provided by the java.util.concurrent pacakge such as Executor, ThreadPoolExecutor and FutureTask.*

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html).

[http://android-developers.blogspot.in/2009/05/painless-threading.html](http://android-developers.blogspot.in/2009/05/painless-threading.html). The article on the link has a good explanation on the topic.

An alternative to AsyncTask is RoboSpice.[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:50:29.183

基本上两者都是等价的，但`AsyncTask`在与 GUI 的集成方面，在 android 中是更简单和更好的方法。

如果`AsyncTask`您可以通过此方法从服务器下载数据`doInBackground()`并在`postExecute()`.

AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

# javascript - 单例 javascript appendChild

> ID：15451245
> 
> 赞同：1
> 
> 时间：2013-03-16T15:49:29.513
> 
> 标签：javascript, singleton, chat

我想在`DIV`标签中插入`DIV`标签；

我有 1 个主 DIV 标签，我需要在主 DIV 标签内插入许多 DIV 标签；

我想开发一个`CHAT`，所以最新的DIV标签，必须在所有旧的DIV标签之前，带有玩家发送的文字；

我使用了`singleton`javascript 模式；

所有新的 DIV 标签，必须插入带有 id 的 DIV 标签`chat_messages`

我尝试使用它，`elem[0].appendChild(div);`但它不起作用；

使用时插入新的DIV标签失败`elem[0].appendChild(div);`

使用`elem[0].appendChild(div);`它会插入 DIV 标签，但它始终是最后一个 div；

这就是我在控制台中测试功能的方式： Filcai.outBound('message');

```
<div id="chat" style="padding:10px 10px;background-color:#eeeeee;margin:10px 10px;">
    <div>CHAT</div>
    <div>
        <input id="chat_message" type="text" name="chat_message" />
    </div>
    <div id="chat_messages">
        <div>
            message 2
        </div>
        <div>
            message 1
        </div>
    </div>
</div>
<script type="text/javascript">
    var FilcaiClass = FilcaiClass ? FilcaiClass : function() {

        var f = function()
        {
            if (1 == 1) {
                console.log('1==1');
            }
        };
        function div1(displayTarget, div_id)
        {
            console.log('div1');
        }
        ;
        function createElementScript(src)
        {
            var script = document.createElement("script");
            script.type = 'text/javascript';
            script.src = src;
            //console.log("SRC: "+src);
            var header = document.getElementsByTagName("head");
            header[0].appendChild(script);
        }
        ;
        function create_message()
        {
            var div = document.createElement('div');
            div.innerText = 1;//document.getElementById('chat_message').value;
            var elem = document.getElementById('chat_messages');
            elem[0].appendChild(div);
        }
        ;
        f.prototype = {
            init: function() {
                console.log('init');
            },
            inBound: function(action, data)
            {
                try {
                    if (parseInt(data.code) < 0) {
                        alert('Internal error!');
                        return;
                    }
                    switch (action)
                    {
                        case 'message':
                            console.log('inBound message');
                            break;
                        default:
                            alert('Unknown inBound action: ' + action);
                            break;
                    }
                } catch (err) {
                    alert('Something went wrong, server returned invalid message!');
                }
            }, //end f inBound()
            outBound: function(action)
            {
                try {
                    switch (action)
                    {
                        case 'message':
                            create_message();
                            console.log('outBound message');
                            break;
                        default:
                            alert('Unknown outBound action: ' + action);
                            break;
                    }//end switch
                }
                catch (err) {
                    alert('Something went wrong, couldn\'t prepare data!');
                }

            }//end f outBound()
        }
        return f;
    }();
    var Filcai = new FilcaiClass();
    Filcai.init();
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:53:17.733

```
document.getElementById('chat_messages'); 
```

只返回一个元素，您不必使用`[0]`.

要在开始时包含子元素，您可以使用[insertBefore](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)：

```
elem.insertBefore(div, elem.firstChild); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T15:53:43.537

您还没有说它不起作用的原因是*什么*，但只是略过这些行是可疑的：

```
var elem = document.getElementById('chat_messages');
elem[0].appendChild(div); 
```

那里有两个问题：

1.  `getElementById`返回一个*元素*，而不是列表，因此不需要`[0]`.

2.  `appendChild` *附加*到元素（添加到它的*末尾*）。如果您希望新 div 位于顶部，则需要将其插入顶部，您可以通过以下方式进行[`insertBefore`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-952280727)：

所以：

```
elem.insertBefore(div, elem.firstChild); 
```

`elem`（如果一开始是空的，不用担心，`elem.firstChild`它将正确处理。）`null``insertBefore`

# filter - 比较和匹配图像

> ID：15451246
> 
> 赞同：0
> 
> 时间：2013-03-16T15:50:00.993
> 
> 标签：filter, image-recognition

我希望将新图像与图像数据库进行比较，然后输出更高的“相似性”。我想比较的图像是相似的，但问题是因为它们不是逐像素相等的。我已经尝试过使用 BoW (Bag Of Words) 模型（我在 Matlab 中实现了它，但我愿意学习 openCV），根据推荐，我尝试了各种实现但没有成功，我得到的最佳正确率是 30 ％，这是非常低的。

让我告诉你我在说什么：[带有 5 个示例图像的 imgur 画廊](http://imgur.com/a/ukf5E#0)。我想检测四个初始图像是相等的，而第五个是不同的。不过，我不介意**只**检测具有相同角度方向的那些是相等的。（在我的示例 2、3 和 4 中）

那么，话虽如此，有没有比 BoW 更好的方法呢？或者如果我以不同的方式实施，BoW 就足够了？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:59:20.513

我会尝试一些使用[随机树](http://cseweb.ucsd.edu/classes/fa06/cse252c/bbabenko1.pdf)的基于关键点的方法。具有点提取是本地的并且适应多种转换的优点（就像您的图片显示的那样）。本地化的优势在于，它们对场景中的光照变化、遮挡等具有更强的鲁棒性。

另外，看看[SURF](http://www.chrisevansdev.com/computer-vision-opensurf.html)算法。

# mysql - 如果可能，至少找到一个相似的标签

> ID：15451247
> 
> 赞同：0
> 
> 时间：2013-03-16T15:50:11.257
> 
> 标签：mysql, sql, tagging

我有一个数据库，其中包含**用户**、**兴趣**和**标签**等表格。

**用户**表是这样的：

```
user_id  |  name  |  city
   15       John     New York
   18       Helen    Virgina 
```

**兴趣**表是这样的：

```
interest_id  |  user_id  |  tag_id
    1              15         23
    2              15         24
    3              15         25
    4              18         23
    5              18         27 
```

**标签**表是这样的：

```
tag_id  |  description
   23        Skiing
   24        TV
   25        Movies
   26        Music
   27        Seinfeld 
```

表格显示约翰和海伦都对滑雪感兴趣。

我想做一个 sql 查询，这将导致 John 和 Helen 有 1 个相似的兴趣并回显它们，例如；

```
Helen 1 interest<br />
Jack 2 interests<br /> 
```

我怎样才能做到这一点？

而且，在数据库模式方面还有其他更好的方法吗？

作为一个新手，我环顾四周并尝试了不同的实现，但未能成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:10:04.283

要计算用户与其他人有多少共同兴趣：

```
SELECT u2.name, count(*)
FROM   interests AS i1 
       JOIN users AS u1 
         ON u1.user_id = i1.user_id 
       JOIN interests AS i2 
         ON i1.tag_id = i2.tag_id 
       JOIN users AS u2 
         ON u2.user_id = i2.user_id 
            AND u1.user_id <> u2.user_id 
       JOIN tags AS t 
         ON i1.tag_id = t.tag_id 
WHERE  u1.name = 'John'
GROUP BY u2.name; 
```

[http://sqlfiddle.com/#!2/80aad/1](http://sqlfiddle.com/#!2/80aad/1)

至于模式，如果将联结表命名为 users_tags，它会更有意义。此外，此模式中不需要有关兴趣的 id 列，组合 (user_id, tag_id) 是主键的自然候选者，无论如何您都需要在其上放置 UNIQUE 索引。

# sql - 将多对多关系转换为一对多关系

> ID：15451250
> 
> 赞同：1
> 
> 时间：2013-03-16T15:50:40.680
> 
> 标签：sql, database-design

我有以下表格（简化）：

```
create table dbo.Users
(
  User_Id int identity not null 
    constraint PK_Users_Id primary key clustered (Id),  
); 

create table dbo.UsersSeals
(
  UserId int not null, 
  SealId int not null,
    constraint PK_UsersSeals_UserId_SealId primary key clustered (UserId, SealId)
);

create table dbo.Seals
(
  Seal_Id int identity not null 
    constraint PK_Seals_Id primary key clustered (Id),  
);

alter table dbo.UsersSeals
add constraint FK_UsersSeals_UserId foreign key (UserId) references Users(Id) on delete cascade on update cascade,
    constraint FK_UsersSeals_SealId foreign key (SealId) references Seals(Id) on delete cascade on update cascade; 
```

所以我在用户和封印之间有一个多对多的关系。一个用户可以有多个印章，一个印章可以有多个用户。我需要一个一对多，一个用户可以有多个印章，但一个印章只有一个用户。

是的，我可以删除 UsersSeals 表并将 UserId 添加到 Seals 表中。但是，我以同样的方式将密封件与其他表一起使用。

我希望只有一个 Seals 表与用户表和其他表具有一对多关系。

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:59:28.243

在列上的表上添加单独[的唯一约束](http://msdn.microsoft.com/en-us/library/ms191166%28v=sql.105%29.aspx)`UsersSeals``SealID`

然后，您保证此表在 上是唯一的`SealID`，这意味着一个印章只能与一个用户关联，但一个用户可以有多个印章。

# string - 提取R中混合数字和字符的字符串的数字部分

> ID：15451251
> 
> 赞同：29
> 
> 时间：2013-03-16T15:50:47.080
> 
> 标签：string, r

我有很多字符串，每个字符串都倾向于具有以下格式：`Ab_Cd-001234.txt` 我想将其替换为`001234`. 我怎样才能在 R 中实现它？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-17T03:35:27.250

stringr包为这种工作提供了许多方便的快捷方式[：](http://cran.r-project.org/web/packages/stringr/index.html)

```
# input data following @agstudy
data <-  c('Ab_Cd-001234.txt','Ab_Cd-001234.txt')

# load library
library(stringr)

# prepare regular expression
regexp <- "[[:digit:]]+"

# process string
str_extract(data, regexp)

Which gives the desired result:

  [1] "001234" "001234" 
```

稍微解释一下正则表达式：

`[[:digit:]]`是 0 到 9 之间的任意数字

`+`表示前一项（在本例中为数字）将匹配一次或多次

这个页面对于这种字符串处理也非常有用：[http ://en.wikibooks.org/wiki/R_Programming/Text_Processing](http://en.wikibooks.org/wiki/R_Programming/Text_Processing)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-16T15:57:39.570

使用`gsub`或者`sub`你可以这样做：

```
 gsub('.*-([0-9]+).*','\\1','Ab_Cd-001234.txt')
"001234" 
```

你可以`regexpr`使用`regmatches`

```
m <- gregexpr('[0-9]+','Ab_Cd-001234.txt')
regmatches('Ab_Cd-001234.txt',m)
"001234" 
```

**编辑**这 2 种方法是矢量化的，适用于字符串向量。

```
x <- c('Ab_Cd-001234.txt','Ab_Cd-001234.txt')
sub('.*-([0-9]+).*','\\1',x)
"001234" "001234"

 m <- gregexpr('[0-9]+',x)
> regmatches(x,m)
[[1]]
[1] "001234"

[[2]]
[1] "001234" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-16T16:05:20.083

您可以`genXtract`从 qdap 包中使用。这需要一个左字符串和一个右字符串并提取它们之间的元素。

```
library(qdap)
genXtract("Ab_Cd-001234.txt", "-", ".txt") 
```

虽然我更喜欢 agstudy 的回答。

**编辑**扩展答案以匹配 agstudy 的：

```
x <- c('Ab_Cd-001234.txt','Ab_Cd-001234.txt')
genXtract(x, "-", ".txt")

# $`-  :  .txt1`
# [1] "001234"
# 
# $`-  :  .txt2`
# [1] "001234" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T13:54:19.600

**gsub** 删除前缀和后缀：

```
gsub(".*-|\\.txt$", "", x) 
```

**工具包** 使用`file_path_sans_ext`from tools 删除扩展名，然后使用`sub`删除前缀：

```
library(tools)
sub(".*-", "", file_path_sans_ext(x)) 
```

**strapplyc** 提取点之后和之前的数字。有关更多信息，请参见[gsubfn 主页](http://gsubfn.googlecode.com)：

```
library(gsubfn)
strapplyc(x, "-(\\d+)\\.", simplify = TRUE) 
```

请注意，如果希望返回一个数字，我们可以使用`strapply`而不是`strapplyc`这样：

```
strapply(x, "-(\\d+)\\.", as.numeric, simplify = TRUE) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-21T18:16:33.923

我添加了这个答案，因为无论您要清理的字符串中有哪些非数字字符，它都可以工作，并且因为 OP 说该字符串*倾向于*遵循格式“Ab_Cd-001234.txt”，我采用意味着允许变化。

请注意，此答案从字符串中获取所有数字字符并将它们保持在一起，因此如果字符串是“4_Ab_Cd_001234.txt”，您的结果将是“4001234”。

如果您想将解决方案指向您拥有的数据框中的列，

```
df$clean_column<-gsub("[^0-9]", "", df$dirty_column) 
```

这与此处的答案非常相似： [https](https://stackoverflow.com/a/52729957/9731173) ://stackoverflow.com/a/52729957/9731173 。

本质上，您对我的解决方案所做的是将任何非数字字符替换为“”，而我链接到的答案将替换任何非数字字符 - 或 .

# ios - NSMutable 数组在 Table View 尝试读取它时为空

> ID：15451252
> 
> 赞同：0
> 
> 时间：2013-03-16T15:50:49.697
> 
> 标签：ios, uitableview, nsmutablearray

现在，我收到有关尝试从对象读取数据的表视图单元格的错误。我正在访问一个数据库，将所有行作为对象存储到一个 NSMUtable 数组中，这似乎工作正常。但是当我希望表格视图读取该数组时，我不断得到“空”。任何帮助将不胜感激。

错误

> -[AttendeeData isEqualToString:]：无法识别的选择器发送到实例 0x751ca80 2013-03-16 11:40:52.499 ExpoRequestLite[39716:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，

```
@interface DashLandingViewController ()

@end

@implementation DashLandingViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{
        self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
        if (self){
            // Custom initialization
        }
        return self;
}

- (void)viewDidLoad {

       [super viewDidLoad];

        entries  = [[NSMutableArray alloc]init];
        _attendeeDataToPush = [[AttendeeData alloc]init];

        [self openDB];

        NSString *sql = [NSString stringWithFormat:@"SELECT * FROM data"];
        sqlite3_stmt *statement;

        if(sqlite3_prepare_v2(db, [sql UTF8String], -1, &statement, nil)== SQLITE_OK) {
            while(sqlite3_step(statement) == SQLITE_ROW){
                NSLog(@"got all attendees");

               NSString *firstName = [[NSString alloc] initWithUTF8String:(const char *)sqlite3_column_text(statement, 2)];

                _attendeeDataToPush.firstNameValue = firstName;

                [entries addObject:_attendeeDataToPush];
                NSLog(@"array has %@", [[entries objectAtIndex:0] firstNameValue]);

           }
      }

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
        return [entries count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
       NSLog(@"selected firstname is %@", [[entries objectAtIndex:0] firstNameValue]);
        cell.textLabel.text = [entries objectAtIndex:indexPath.row];
        return cell;
    }

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
        return 1;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:55:08.403

错误表明您的代码中的其他地方有错误，请发布您的完整代码。从您的错误看来，您正在调用 `isEqualToString:`不是字符串类型的对象。您的代码未显示您在哪里得到错误。For Using `isEqualToString:`both objects 应该是`NSString`类型。如果您将对象与字符串进行比较，请 `isEqual:`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:04:01.513

Errors may happening here

```
 NSLog(@"selected firstname is %@", [[entries objectAtIndex:0] firstNameValue]);
 cell.textLabel.text = [entries objectAtIndex:indexPath.row]; 
```

Modify these lines to,

```
 if([entries count] > indexPath.row){

     AttendeeData *attendeeData = [entries objectAtIndex:indexPath.row];
     NSLog(@"selected firstname is %@", attendeeData.firstNameValue);
    cell.textLabel.text = attendeeData.firstNameValue;
} 
```

# log4j - 可以用 2 个 ConsoleAppender 配置 log4j，每个都有不同的布局？

> ID：15451253
> 
> 赞同：0
> 
> 时间：2013-03-16T15:50:51.893
> 
> 标签：log4j

我想用不同的布局定义 2 个不同的 log4j ConsoleAppenders。我尝试了以下方法：

```
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

log4j.appender.stdoutMDC=org.apache.log4j.ConsoleAppender
log4j.appender.stdoutMDC.Target=System.out
log4j.appender.stdoutMDC.layout=org.apache.log4j.PatternLayout
log4j.appender.stdoutMDC.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L (hibernateLoadPlanWalkPath->%X{hibernateLoadPlanWalkPath}) - %m%n 
```

但是，当我尝试使用这些附加程序时，我遇到了问题。我将第一个附加程序附加到根目录，然后尝试将第二个附加程序附加到某些祖先记录器：

```
log4j.rootLogger=info, stdout

log4g.logger.org.hibernate.loader.plan=trace, stdoutMDC
log4g.additivity.org.hibernate.loader.plan=false

log4g.logger.org.hibernate.persister.walking=trace, stdoutMDC
log4g.additivity.org.hibernate.persister.walking=false 
```

我遇到的麻烦是，来自这两个祖先记录器的消息最终都进入了 stdout 附加程序*，而不是*stdoutMDC 附加程序。我尝试了禁用和不禁用可加性，但没有区别。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:53:50.330

请试试这个。

它可能会帮助你

注意：%X{userName} - 这是您从映射诊断上下文 (MDC) 获取数据的方式

# 注意 %X{userName} - 这是您从映射诊断上下文 (MDC) 获取数据的方式

log4j.appender.consoleAppender.layout.ConversionPattern = %-4r [%t] %5p %c %x - %m - %X{userName}%n

log4j.rootLogger = 调试，consoleAppender

# paypal - 使用自定义购物车实施 PayPal IPN

> ID：15451269
> 
> 赞同：0
> 
> 时间：2013-03-16T15:52:46.940
> 
> 标签：paypal, cart, paypal-ipn

我正在尝试设置 PayPal 的 IPN 以供自定义购物车使用。但不知何故，它不起作用。你们可以看看我正在使用的 PayPal 按钮代码吗？你注意到任何问题吗？单击“支付”按钮后，我将进入 PayPal 的页面，该页面包含以下消息：

我们检测到此购物车存在问题。如果问题仍然存在，请联系商家。

问题：

1.  命名这些变量的正确方法是什么：item_numberX 或 item_number_X？与负责的变量相同：价格、名称和数量。我需要添加下划线吗？

    ```
    <input type="hidden" name="item_number_1" value="1">
    <input type="hidden" name="item_name_1" value="Service 1">
    <input type="hidden" name="amount_1" value="148.00">
    <input type="hidden" name="quantity_1" value="1">
    <input type="hidden" name="mc_gross_1" value="148">

    <input type="hidden" name="item_number_2" value="2">
    <input type="hidden" name="item_name_2" value="Service 2">
    <input type="hidden" name="amount_2" value="30.00">
    <input type="hidden" name="quantity_2" value="1">
    <input type="hidden" name="mc_gross_2" value="30">

    <input type="hidden" name="return" value="http://www.sitename.com/thank-you/">
    <input type="hidden" name="notify_url" value="http://www.sitename.com/ipn.php">

    <input type="hidden" name="first_name" value="Peter"  />
    <input type="hidden" name="last_name" value="James"  />
    <input type="hidden" name="payer_email" value="alex111@gmail.com"  />
    <input type="hidden" name="item_number" value="144" / >

    <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif" 
        border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!"> 
    ```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:52:01.897

您拥有大部分按钮，我看到问题的唯一变量是“mc_gross_x”、“payer_email”和“item_number”。我不确定你在哪里得到 mc_gross_x，但这不会在按钮中使用，你可能会将它与 IPN 变量混淆。至于 payer_email，您可能又将其与 IPN 变量混淆了。如果您尝试在 PayPal 付款页面上填写买家电子邮件地址，则它只是“电子邮件”。此外，您不需要传递“item_number”，因为您使用的是购物车上传方法，您只需使用您在代码“item_number_x”中已经使用的格式。

如果按钮仍然对您不起作用，我需要查看底部代码的其余部分以了解它为什么不起作用。

# asp.net-mvc-4 - 使用 Web API 和 RavenDB 继承的自定义模型绑定器

> ID：15451270
> 
> 赞同：2
> 
> 时间：2013-03-16T15:52:48.680
> 
> 标签：asp.net-mvc-4, asp.net-web-api, ravendb, model-binding

我正在开发一个简单的网络应用程序，我需要绑定所有类型的实现和特定类型的接口。我的界面只有一个这样的属性

```
public interface IContent {
    string Id { get;set; }
} 
```

使用此接口的通用类如下所示

```
public class Article : IContent {
    public string Id { get;set; }
    public string Heading { get;set; }
} 
```

在这里要干净，文章类只是实现 IContent 的许多不同类之一，因此我需要一种通用的方法来存储和更新这些类型。

所以在我的控制器中，我有这样的 put 方法

```
public void Put(string id, [System.Web.Http.ModelBinding.ModelBinder(typeof(ContentModelBinder))] IContent value)
{
    // Store the updated object in ravendb
} 
```

和 ContentBinder

```
public class ContentModelBinder : System.Web.Http.ModelBinding.IModelBinder {
    public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext) {

        actionContext.ControllerContext.Request.Content.ReadAsAsync<Article>().ContinueWith(task =>
        {
            Article model = task.Result;
            bindingContext.Model = model;
        });

        return true; 
    }

} 
```

上面的代码不起作用，因为它似乎没有获取 Heading 属性，即使我使用默认模型绑定器它正确绑定了 Heading。

所以，在 BindModel 方法中，我想我需要根据 Id 从 ravendb 加载正确的对象，然后使用某种默认模型绑定器来更新复杂对象？这是我需要帮助的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:49:11.270

Marcus，以下是一个适用于 Json 和 Xml 格式化程序的示例。

```
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Net;
using System.Net.Http;
using System.Net.Http.Formatting;
using System.Net.Http.Headers;
using System.Runtime.Serialization;
using System.Web.Http;
using System.Web.Http.SelfHost;

namespace Service
{
    class Service
    {
        private static HttpSelfHostServer server = null;
        private static string baseAddress = string.Format("http://{0}:9095/", Environment.MachineName);

        static void Main(string[] args)
        {
            HttpSelfHostConfiguration config = new HttpSelfHostConfiguration(baseAddress);
            config.Routes.MapHttpRoute("Default", "api/{controller}/{id}", new { id = RouteParameter.Optional });
            config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;
            config.Formatters.JsonFormatter.SerializerSettings.TypeNameHandling = TypeNameHandling.Objects;

            try
            {
                server = new HttpSelfHostServer(config);
                server.OpenAsync().Wait();

                Console.WriteLine("Service listenting at: {0} ...", baseAddress);

                TestWithHttpClient("application/xml");

                TestWithHttpClient("application/json");

                Console.ReadLine();
            }
            catch (Exception ex)
            {
                Console.WriteLine("Exception Details:\n{0}", ex.ToString());
            }
            finally
            {
                if (server != null)
                {
                    server.CloseAsync().Wait();
                }
            }
        }

        private static void TestWithHttpClient(string mediaType)
        {
            HttpClient client = new HttpClient();

            MediaTypeFormatter formatter = null;

            // NOTE: following any settings on the following formatters should match
            // to the settings that the service's formatters have.
            if (mediaType == "application/xml")
            {
                formatter = new XmlMediaTypeFormatter();
            }
            else if (mediaType == "application/json")
            {
                JsonMediaTypeFormatter jsonFormatter = new JsonMediaTypeFormatter();
                jsonFormatter.SerializerSettings.TypeNameHandling = TypeNameHandling.Objects;

                formatter = jsonFormatter;
            }

            HttpRequestMessage request = new HttpRequestMessage();
            request.RequestUri = new Uri(baseAddress + "api/students");
            request.Method = HttpMethod.Get;
            request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue(mediaType));
            HttpResponseMessage response = client.SendAsync(request).Result;
            Student std = response.Content.ReadAsAsync<Student>().Result;

            Console.WriteLine("GET data in '{0}' format", mediaType);
            if (StudentsController.CONSTANT_STUDENT.Equals(std))
            {
                Console.WriteLine("both are equal");
            }

            client = new HttpClient();
            request = new HttpRequestMessage();
            request.RequestUri = new Uri(baseAddress + "api/students");
            request.Method = HttpMethod.Post;
            request.Content = new ObjectContent<Person>(StudentsController.CONSTANT_STUDENT, formatter);
            request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue(mediaType));
            Student std1 = client.SendAsync(request).Result.Content.ReadAsAsync<Student>().Result;

            Console.WriteLine("POST and receive data in '{0}' format", mediaType);
            if (StudentsController.CONSTANT_STUDENT.Equals(std1))
            {
                Console.WriteLine("both are equal");
            }
        }
    }

    public class StudentsController : ApiController
    {
        public static readonly Student CONSTANT_STUDENT = new Student() { Id = 1, Name = "John", EnrolledCourses = new List<string>() { "maths", "physics" } };

        public Person Get()
        {
            return CONSTANT_STUDENT;
        }

        // NOTE: specifying FromBody here is not required. By default complextypes are bound
        // by formatters which read the body
        public Person Post([FromBody] Person person)
        {
            if (!ModelState.IsValid)
            {
                throw new HttpResponseException(Request.CreateErrorResponse(HttpStatusCode.BadRequest, this.ModelState));
            }

            return person;
        }
    }

    [DataContract]
    [KnownType(typeof(Student))]
    public abstract class Person : IEquatable<Person>
    {
        [DataMember]
        public int Id { get; set; }

        [DataMember]
        public string Name { get; set; }

        // this is ignored
        public DateTime DateOfBirth { get; set; }

        public bool Equals(Person other)
        {
            if (other == null)
                return false;

            if (ReferenceEquals(this, other))
                return true;

            if (this.Id != other.Id)
                return false;

            if (this.Name != other.Name)
                return false;

            return true;
        }
    }

    [DataContract]
    public class Student : Person, IEquatable<Student>
    {
        [DataMember]
        public List<string> EnrolledCourses { get; set; }

        public bool Equals(Student other)
        {
            if (!base.Equals(other))
            {
                return false;
            }

            if (this.EnrolledCourses == null && other.EnrolledCourses == null)
            {
                return true;
            }

            if ((this.EnrolledCourses == null && other.EnrolledCourses != null) ||
                (this.EnrolledCourses != null && other.EnrolledCourses == null))
                return false;

            if (this.EnrolledCourses.Count != other.EnrolledCourses.Count)
                return false;

            for (int i = 0; i < this.EnrolledCourses.Count; i++)
            {
                if (this.EnrolledCourses[i] != other.EnrolledCourses[i])
                    return false;
            }

            return true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:56:10.053

我使用了@kiran-challa 解决方案并在 Json 媒体类型格式化程序的 SerializerSettings 上添加了 TypeNameHandling。

# android - 如何在android中对位图进行快速操作

> ID：15451272
> 
> 赞同：0
> 
> 时间：2013-03-16T15:53:15.513
> 
> 标签：android, android-ndk, opengl-es-2.0, renderscript

我需要对 android 中的位图进行一些操作，例如改变像素颜色、透明度、在第一个位图上用透明度绘制另一个位图、缩放、裁剪、应用蒙版等。现在我用java做，它真的很慢。在 nexus 4 上计算 600x600 像素的图像大约需要 5 秒。

什么技术适合这种操作？

我尝试了使用 OpenGL ES 2.0 的库 GPUImage，但是在尝试将蒙版应用于图像时遇到问题，蒙版大小为 600x600 作为原始图像，所以我应该传递一个 1440000 个颜色值的数组，而 GLSL 语言没有支持这么大的数组。360000 的 vec4 值也太大了。可能我可以将整个图像作为 texture2d 对象传递，但我找不到该怎么做。冷的人请给我一个教程？

第二个选项是渲染脚本。它不太适合，因为我希望 android 2.3 的手机具有快速的位图操作，但总而言之，在 3.0+ 设备上提高速度将是一件好事。它的问题是如何传递第二个位图的数据 - 360000 个 float4 值或位图本身。我也找不到有关它的信息，所以如果有人给我建议或教程，我将不胜感激。

第三种选择是使用 NDK。但我不知道它是否足够快，并且再次无法找到好的信息来从一般的 ndk 开始，特别是用 ndk 进行图像处理。所以我再次需要一个建议或教程。

所以，总而言之，请告诉我还有哪些其他的快速图像处理方法，并请给我一些关于这三种方法的建议或教程。什么是真正快速地对图像进行操作的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:36:03.433

如果您发现 GLES 合适，请将图像分成小图块，并一次对一个图块进行操作。（一些驱动程序以这种方式工作。）

# mysql - MySQL 在 WHILE 循环中使用变量

> ID：15451274
> 
> 赞同：1
> 
> 时间：2013-03-16T15:53:17.543
> 
> 标签：mysql, while-loop

我似乎无法找到为什么这会给我一个错误。它不能在循环中使用变量“art”。但是当我这样做的时候

```
 select art; 
```

它给了我正确数量的项目。

```
 drop procedure if exists bepaal_lijst_van_bij_te_bestellen_artikelen;

    delimiter //
    create procedure bepaal_lijst_van_bij_te_bestellen_artikelen()
    begin
        DECLARE art INT;
        DECLARE i INT;

        SELECT @art := COUNT(artikel_id) FROM artikelen;

        SET i = 1;
        WHILE i <= art DO

        END WHILE;
    end;
    //

    delimiter ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:58:29.923

我认为你应该这样做

```
SET art := SELECT COUNT(artikel_id) FROM artikelen 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:05:02.183

你可以这样做（注意：我知道任务是如何进行的）

```
SELECT count(*) from Items into art; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T16:08:36.150

显然 while 循环不能为空并且应该包含一些东西。通过添加修复它

```
SET i = 1 + i; 
```

# jquery - jQuery fadeIn.css()？

> ID：15451275
> 
> 赞同：3
> 
> 时间：2013-03-16T15:53:35.420
> 
> 标签：jquery, css, styles, fadein

如何使 .css() 属性淡入？页面：[http ://arnoldsktm.zxq.net/](http://arnoldsktm.zxq.net/)

```
 $(document).ready(function(){
        $('#1, #2, #3, #4').hide();
        $('#1').fadeIn(1000, function(){
            $('#2').fadeIn(500, function(){
                $('#3').fadeIn(1000, function(){
                    $('#4').fadeIn(1000, function(){
                        $('#4').css({
                            'text-shadow':'0px 0px 10px red',
                            'text-decoration':'underline'
                        });
                    });
                });
            });
        });
    }); 
```

这 $('#4').css({});

[http://jsfiddle.net/F9xkS/2](http://jsfiddle.net/F9xkS/2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:01:01.340

jQuery 无法根据[其文档](http://api.jquery.com/animate/#animation-properties)为非数字值设置动画。您可以尝试`.animate`代替`.css`，但我怀疑它不适用于这些。

相反，你最好依赖 CSS3 过渡并添加一个类：

```
#4 {
    -webkit-transition: text-shadow 1s;
    transition: text-shadow 1s;
}
#4.shown {
    text-shadow: 0px 0px 10px red;
    text-decoration: underline;
}

$("#4").fadeIn(... function () { $(this).addClass('shown'); 
```

请注意，`text-decoration`它[不是动画属性](http://www.w3.org/TR/css3-transitions/#animatable-properties)。为下划线设置动画是没有意义的。相反，也许你可以提前给它下划线，这样下划线也会淡入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T16:15:21.057

[http://jsfiddle.net/F9xkS/6/](http://jsfiddle.net/F9xkS/6/)

```
a {
    color: black;
    text-decoration: none;
    transition: text-shadow .3s;
    transition: text-decoration: .3s;
}
.glow {
    text-shadow:0px 0px 10px red;
    text-decoration: underline;
}

$('#1, #2, #3, #4').hide();

$('#1').fadeIn(1000, function () {
    $('#2').fadeIn(500, function () {
        $('#3').fadeIn(1000, function () {
            $('#4').fadeIn(1000, function () {
                $('#4').addClass('glow');
            });
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T15:57:55.710

尝试使用 CSS 过渡。例如：

```
#4
{
    -webkit-transition: all 200ms;
    -moz-transition: all 200ms;
    -o-transition: all 200ms;
    -ms-transition: all 200ms;
    transition: all 200ms;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T16:00:15.643

只需在褪色之前为其设置样式，请参阅[JS fiddle](http://jsfiddle.net/F9xkS/2/)

```
#4 {
    text-shadow: 0px 0px 10px red;
    text-decoration: underline;
} 
```

# backbone.js - 使用 .fetch() 查看不呈现

> ID：15451284
> 
> 赞同：0
> 
> 时间：2013-03-16T15:54:19.540
> 
> 标签：backbone.js, view, render

当我渲染这个视图

```
var MyView = Backbone.View.extend({
/* el : '.myview', used when rendered on router request */
    render : function () {
        var data = new Data(); /* a collection from ajax request */
        var that = this;

        data.fetch({
            success : function (bla, data) {
                var template = _.template( $('#temp').html(), {data: data.players} );
                that.$el.html(template);
            }
        });
    }
}); 
```

根据路由器请求，它可以工作：

```
var Router = Backbone.Router.extend({
    routes : {
        'bla' : 'bla'
    }
});

var myView = new MyView();

var router = new Router();
router.on('route:bla', function () {
    myView.render();
}); 
```

但是，当我只想让它随页面一起加载时，它不会：

```
var myView = new MyView({ el: $(".myview") }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:47:32.457

因为在您发布的最后一行中，您缺少对渲染函数的调用。

```
var myView = new MyView({ el: $(".myview") });
myView.render(); 
```

除此之外，我看到初始化的工作流程有点奇怪。即，请求`.render()`函数内部的数据，这违反了视图单一职责。我在我的应用程序中做的事情。

```
var Router = Backbone.Router.extend({
    routes : {
        'bla' : 'bla'
    },

    bla: function () {
        app.BlaApp();
    }
});

app.BlaApp = function () {
    var collection = new Collection();
    collection.fetch({
        success: function (collection) {
            var view = new app.BlaView({model: collection});
            view.render();
        }
    })
}

app.BlaView = Backbone.View.extend({
    render: function () {
        var template = // render template based on this.model;
        this.$el.html(template);

        return this;
    }
}); 
```

# c++ - iterator->second 是什么意思？

> ID：15451287
> 
> 赞同：176
> 
> 时间：2013-03-16T15:54:51.857
> 
> 标签：c++, stl, iterator

在 C++ 中， a 的类型是`std::map<>::iterator`什么？

我们知道一个`it`类型的对象有一个返回 a`std::map<A,B>::iterator`的重载对象，并且该对象有一个and成员。`operator ->``std::pair<A,B>*``std::pair<>``first``second`

但是，这两个成员对应的是什么，为什么我们必须访问存储在 map 中的值`it->second`？

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2013-03-16T16:04:19.040

我相信你知道 a`std::vector<X>`存储了一大堆`X`对象，对吧？但如果你有一个`std::map<X, Y>`，它实际上存储的是一大堆`std::pair<const X, Y>`s。这正是地图的本质——它将键和相关值配对在一起。

当您遍历 a`std::map`时，您将遍历所有这些`std::pair`s。当您取消引用其中一个迭代器时，您将获得`std::pair`包含键及其关联值的 a。

```
std::map<std::string, int> m = /* fill it */;
auto it = m.begin(); 
```

在这里，如果您现在这样做`*it`，您将获得`std::pair`地图中第一个元素的 。

现在，该类型[`std::pair`](http://en.cppreference.com/w/cpp/utility/pair)允许您通过两个成员访问其元素：`first`和`second`. 所以如果你有一个`std::pair<X, Y>`被调用的`p`,`p.first`是一个`X`对象并且`p.second`是一个`Y`对象。

所以现在您知道取消引用`std::map`迭代器会给您一个，然后您可以使用and`std::pair`访问它的元素。例如，会给你钥匙，会给你价值。这些等价于和。`first``second``(*it).first``(*it).second``it->first``it->second`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-16T16:00:31.123

an 的元素的类型`std::map`（也是通过取消引用该映射的迭代器获得的表达式的类型），其键是`K`，值`V`是`std::pair<const K, V>`- 键是`const`为了防止您干扰映射值的内部排序。

`std::pair<>`有两个名为`first`and的成员`second`（见[这里](http://en.cppreference.com/w/cpp/utility/pair)），具有相当直观的含义。`i`因此，给定一个特定映射的迭代器，表达式：

```
i->first 
```

这相当于：

```
(*i).first 
```

引用迭代器指向的对象的*第一个*( `const`) 元素——即它引用映射中的一个*键*。相反，表达式：`pair`

 *```
i->second 
```

这相当于：

```
(*i).second 
```

指的是*第二个*元素`pair`- 即映射中对应的*值*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-16T19:19:27.760

# 用于地图和无序地图。

### map 存储键值对，其中 i->first 用于键，i->second 用于反映值。

```
#include<bits/stdc++.h>
#define long long int
using namespace std;
int32_t main(){
  map<int,int> m;
  m.insert({1,2});
  m.insert({2,4});
  for(auto i:m){
      cout<<"key - "<<i.first<<" "<<" Value - "<<i.second<<endl;
  }
} 
```*

# python - python networkx：不能使用 current_flow_betweenness_centrality 函数

> ID：15451289
> 
> 赞同：0
> 
> 时间：2013-03-16T15:55:01.207
> 
> 标签：python, graph, networkx

我正在尝试使用 NetworkX 库的 current_flow_betweenness_centrality 函数，但它在调用时给了我这个错误：

```
Traceback (most recent call last):   File "D:\IVV\pcg\procsator\__init__.py", line 47, in <module>
    el_val_rel = graph.elements_values(elements, conn_graph, m)   File "D:\IVV\pcg\procsator\graph.py", line 46, in elements_values
    conn_val = metric_func(g)   File "C:\Python27\lib\site-packages\networkx\algorithms\centrality\current_flow_betweenness.py", line 233, in current_flow_betweenness_centrality
    solver=solver):   File "C:\Python27\lib\site-packages\networkx\algorithms\centrality\flow_matrix.py", line 15, in flow_matrix_row
    dtype=dtype, format='csc')   File "C:\Python27\lib\site-packages\networkx\algorithms\centrality\flow_matrix.py", line 135, in laplacian_sparse_matrix
    dtype=dtype, format=format)   File "C:\Python27\lib\site-packages\networkx\convert.py", line 790, in to_scipy_sparse_matrix
    for u,v,d in G.edges_iter(nodelist, data=True) ValueError: need more than 0 values to unpack 
```

这是我正在使用的代码：

```
import networkx as nx

g=nx.Graph()
a=object()
b=object()
c=object()
d=object()
g.add_edge(a,b,{'distance': 4.0})
g.add_edge(a,c,{'distance': 1.5})
g.add_edge(b,c,{'distance': 2.2})
g.add_edge(c,d,{'distance': 2.6})
result = nx.current_flow_betweenness_centrality(g, weight='distance') 
```

我哪里错了？在 Windows 7 x64 上尝试使用 NetworkX 1.7 和 Python 2.7 和 3.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:17:54.227

更新：

这是[https://github.com/networkx/networkx/pull/856中解决/修复的错误](https://github.com/networkx/networkx/pull/856)

原始（不正确）答案：

NetworkX 节点必须是 Python “可散列”对象。您的 object() 节点不是。（您收到的错误消息不是很有帮助）。

例如这有效

```
import networkx as nx

g=nx.Graph()
a=1
b=2
c=3
d=4
g.add_edge(a,b,{'distance': 4.0})
g.add_edge(a,c,{'distance': 1.5})
g.add_edge(b,c,{'distance': 2.2})
g.add_edge(c,d,{'distance': 2.6})
result = nx.current_flow_betweenness_centrality(g, weight='distance') 
```

# javascript - 从 JSON 对象中删除元素

> ID：15451290
> 
> 赞同：46
> 
> 时间：2013-03-16T15:55:05.137
> 
> 标签：javascript, jquery, json

我有一个看起来像这样的 json 数组：

```
 {
    "id": 1,
    "children": [
    {
        "id": 2,
        "children": {
            "id": 3,
            "children": {
                "id": 4,
                "children": ""
            }
        }
    },
    {
        "id": 2,
        "children": {
            "id": 3,
            "children": {
                "id": 4,
                "children": ""
            }
        }
    },
    {
        "id": 2,
        "children": {
            "id": 3,
            "children": {
                "id": 4,
                "children": ""
            }
        }
    },
    {
        "id": 2,
        "children": {
            "id": 3,
            "children": {
                "id": 4,
                "children": ""
            }
        }
    },
    {
        "id": 2,
        "children": {
            "id": 3,
            "children": {
                "id": 4,
                "children": ""
            }
        }
    },
    {
        "id": 2,
        "children": {
            "id": 3,
            "children": {
                "id": 4,
                "children": ""
            }
        }
    },
    {
        "id": 2,
        "children": {
            "id": 3,
            "children": {
                "id": 4,
                "children": ""
            }
        }
    }]
} 
```

我想要一个函数来删除“孩子”为空的元素。我该怎么做？我不求答案，只求建议

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-16T16:05:23.377

要遍历对象的键，请使用`for .. in`循环：

```
for (var key in json_obj) {
    if (json_obj.hasOwnProperty(key)) {
        // do something with `key'
    }
} 
```

要测试空子元素的所有元素，您可以使用递归方法：遍历所有元素并递归测试它们的子元素。

可以使用以下`delete`关键字来删除对象的属性：

```
var someObj = {
    "one": 123,
    "two": 345
};
var key = "one";
delete someObj[key];
console.log(someObj); // prints { "two": 345 } 
```

文档：

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)
*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)
*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T16:16:18.323

[JSfiddle](http://jsfiddle.net/fP7NS/)

```
function deleteEmpty(obj){
        for(var k in obj)
         if(k == "children"){
             if(obj[k]){
                     deleteEmpty(obj[k]);
             }else{
                   delete obj.children;
              } 
         }
    }

for(var i=0; i< a.children.length; i++){
 deleteEmpty(a.children[i])
} 
```

# python - python中for循环在哪里结束

> ID：15451296
> 
> 赞同：1
> 
> 时间：2013-03-16T15:55:37.103
> 
> 标签：python, if-statement, for-loop

如果我得到这个代码示例：

```
for s,d in grid_values(grid).items():
    if d in digits and not assign(values, s, d):
        return False ## (Fail if we can't assign d to square s.)
return values 
```

我怎么知道 for 结束的地方？因为据我所知，您可以将所有这些写在 1 行中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T15:57:11.473

`for`for 循环在缩进下降到与语句相同或更低的行结束。

在你的例子中，那是在`return values`声明中。

当`if`语句变为 True 并`return False`执行语句时，循环也将终止；该函数在该点返回“早期”，并忽略循环的其余部分。

正如所写，您不能将代码减少到一行，因为您不能在一行上组合多个复合语句（采用缩进代码块的语句）。`any()`您可以使用带有生成器表达式的函数调用将其减少到两行，替换`for`语句，但我认为它不会提高可读性：

```
if any(not assign(values, s, d) for s, d in grid_values(grid).items() if d in digits):
    return False
return values 
```

然后，您可以使用条件表达式将所有*内容*塞进一行，以进一步破坏可读性：

```
return False if any(not assign(values, s, d) for s, d in grid_values(grid).items() if d in digits) else values 
```

不要那样做。。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T15:57:14.603

`grid_values(grid).items()`循环在OR if `d in digits and not assign(values, s, d)`:if`d`的末尾结束，`digits`并且函数`assign(values, s, d)`返回`False`。

发生这种情况是因为`return`语句停止了函数，因此循环（必须在函数中，因为它有`returns`）在函数结束后被迫中断。

# mapping - Elastica 多字段设置

> ID：15451300
> 
> 赞同：0
> 
> 时间：2013-03-16T15:55:52.483
> 
> 标签：mapping, elasticsearch, elastica

我正在尝试将 elasticsearch 的 multi_field 语法与 Elastica 结合使用。我创建了一个索引和一个如下所示的映射：

```
$mapping->setProperties(array(
    'id'         => array('type' => 'string', 'include_in_all' => true),
    'title'      => array('type' => 'string', 'include_in_all' => true),
    'publisher'  => array('type' => 'multi_field', 'include_in_all' => TRUE, 'fields' => 
       array('publisherName' => array('type' => 'string', 'index' => 'analyzed'),
             'untouched'     => array('type' => 'string', 'index' => 'not_analyzed')
    )
)); 
```

到目前为止，一切都很好。我可以对标题字段运行查询。

[但是，当我尝试在http://example.com:9200/_plugin/head/](http://example.com:9200/_plugin/head/)中查询字段“发布者”时，我无法选择字段发布者或创建结构化查询。我看起来，字段发布者不在索引中。

但是我可以在 publisher.untouched 上构建方面，效果很好。我的映射有什么问题？我需要搜索发布者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T06:51:55.207

请参阅有关[multi_field 映射](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-multi-field-type.html)的文档。看起来您需要通过将“publisherName”更改为“publisher”来设置默认字段。

# matlab - 如何在matlab中创建留一交叉验证？

> ID：15451301
> 
> 赞同：1
> 
> 时间：2013-03-16T15:55:53.360
> 
> 标签：matlab, cross-validation

我仍然对我的代码感到困惑。我试图在matlab中实现留一交叉验证进行分类。所以在这里。我从训练中取出一个数据成为测试数据。我已经在matlab中编写了代码。但我不确定它是否正确，因为结果是错误的。有人可以帮我纠正吗？非常感谢您。

这是我的代码：

```
clc    
[C,F] = train('D:\fp\',...
    'D:\tp\');

for i=size(F,1)
testVal = i;      
trainingSet = setdiff(1:numel(C), testVal); % use the rest for training

Ctrain = C(trainingSet,:);
Ftrain = F(trainingSet,:);
test= F(testVal,:);
svmStruct = svmtrain(Ftrain,Ctrain,'showplot',true,'Kernel_Function','rbf');
result_class(i)= svmclassify(svmStruct,test,'showplot',true);
ax(i)=result_class;
i=i+1;
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:57:51.097

这是我通常用来创建留一交叉验证的方法。

```
[Train, Test] = crossvalind('LeaveMOut', N, M) 
```

在这里，`N`将是您在训练+测试集中拥有的总样本数。`M=1`在你的情况下。你可以把它放在一个 for 循环中。

此外，您可以使用随机数生成来执行留一交叉验证，而无需使用预定义的函数。

# php - Ajax 回调无响应

> ID：15451303
> 
> 赞同：0
> 
> 时间：2013-03-16T15:56:11.783
> 
> 标签：php, jquery, callback, validation

我使用下面的脚本来检索回调结果，但是提交表单时什么都没有返回，下面的代码有什么问题？以及如何使每个错误输出到 div 标签`id='msg'`？

这是我的注册表的完整脚本：

```
<script type="text/javascript">
$(document).ready(function() {

$('#wait').hide();
$('#wait').ajaxStart(function() {
    $(this).show();
}).ajaxComplete(function() {
    $(this).hide();
});

$('#btn_register').click(function(){
    var parameters = $('#register_form').serialize();
    //alert(parameters);
    $.ajax({
        url: 'request.php',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(output_str){
            if(output_str == "error"){
                alert('Error: '+ output_str);

            }else{
                alert(output_str);
                //$('#result_msg').html(output_str);
            }
        },
        error: function(){
            console.log(arguments);
        }
    });

});

});
</script>

<div class="content">
<div>
    <div class="title-bar" align="center"><h2 class="title">Registration Form</h2></div>

    <div class="inner-wrap pad">
        <div id="msg"></div>
        <div align="center">
        <form action="" method="post" id="register_form" enctype="multipart/form-data">
        <table width="60%" border="0" cellspacing="1" cellpadding="5" class="tb">
          <tr>
            <td width="30%" class="r"><label for="email">Email</label></td>
            <td width="70%"><input type="text" id="email" name="email" maxlength="50" value="" autofocus autocomplete="off" /></td>
          </tr>
          <tr>
            <td class="r"><label for="password">Password</label></td>
            <td><input type="password" id="password" name="password" style="width:150px;" value="<?php echo isset($_POST['password']) ? $_POST['password'] : '' ?>" /></td>
          </tr>
          <tr>
            <td class="r"><label for="rpassword">Retype Password</label></td>
            <td><input type="password" id="rpassword" name="rpassword" style="width:150px;" value="<?php echo isset($_POST['rpassword']) ? $_POST['rpassword'] : '' ?>" /></td>
          </tr>
          <tr>
            <td class="r"><label for="fname">Full Name</label></td>
            <td><input type="text" id="fname" name="fname" maxlength="50" value="<?php echo isset($_POST['fname']) ? $_POST['fname'] : '' ?>" /></td>
          </tr>
          <tr>
            <td class="r"><label for="contact">Contact Number</label></td>
            <td><input type="text" id="contact" name="contact" maxlength="15" value="<?php echo isset($_POST['contact']) ? $_POST['contact'] : '' ?>" /></td>
          </tr>
          <tr>
            <td class="r"><label for="dob">Date of Birth</label></td>
            <td>
            <input type="text" id="dd" name="dd" style="width:24px;" maxlength="2" value="<?php echo isset($_POST['dd']) ? $_POST['dd'] : '' ?>" placeholder="dd" />&nbsp;/
            <input type="text" id="mm" name="mm" style="width:24px;" maxlength="2" value="<?php echo isset($_POST['mm']) ? $_POST['mm'] : '' ?>" placeholder="mm" />&nbsp;/
            <input type="text" id="yy" name="yy" style="width:40px;" maxlength="4" value="<?php echo isset($_POST['yy']) ? $_POST['yy'] : '' ?>" placeholder="yyyy" />
            </td>
          </tr>
          <tr>
            <td class="r"><label for="capcha"></label></td>
            <td>
            <div style="padding-bottom:3px;">
            <img id="captcha" src="inc/securimage/securimage_show.php" alt="CAPTCHA Image" />
            <a href="#" onclick="document.getElementById('captcha').src='inc/securimage/securimage_show.php?' + Math.random(); return false" class="capcha">Refresh</a>
            </div>
            <div><input type="text" name="ct_captcha" size="12" maxlength="8" id="capcha" style="width:100px;" /></div>
            </td>
          </tr>
          <tr>
            <td></td>
            <td><a href="javascript:void(0);" class="btn" id="btn_register">Proceed</a>&nbsp;<span id="wait"><img src="images/ajax-loader.gif" /></span></td>
          </tr>
        </table>
        </form>
        </div>
    </div>

</div> 
```

请求.php

```
<?php
include('connectdb.php');
include('functions.php');

$email = mysql_real_escape_string(strtolower(trim($_POST['email'])));
$password = mysql_real_escape_string(trim($_POST['password']));

$error = NULL;
if(!check_email_address($email)){
    $error .= "<li>Invalid Email Address";
}
if(empty($password) || strlen($password) < 0){
    $error .= "<li>Invalid Password";
}

// if found invalid input
if(!empty($error)){
    $output_str = "error";
}else{
    $output_str = "No Error";   
}

echo json_encode($output_str);

?> 
```

谢谢。

**更新：**

控制台错误：

```
[Object { readyState=

4

,  responseText=

"<br />\n<b>Notice</b>:  ...<b>14</b><br />\n"error""

,  status=

200

,  more...}, 

"parsererror"

, 

SyntaxError: JSON.parse: unexpected character
[Break On This Error]   

return window.JSON.parse( data );

jquery-1.7.2.js (line 564)

]

0
Object { readyState=

4

, responseText=

"<br />\n<b>Notice</b>:  ...<b>14</b><br />\n"error""

, status=

200

, more...}

1

"parsererror"

2

SyntaxError: JSON.parse: unexpected character
[Break On This Error]   

return window.JSON.parse( data );

jquery-1.7.2.js (line 564) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:46:05.800

这是为您更新的 HTML。让我知道这是否对您有帮助。

**注册表单 HTML 和脚本**

```
<script type="text/javascript">
   $(document).ready(function() {
   $('#wait').hide();
   $('#wait').ajaxStart(function() {
      $(this).show();
   }).ajaxComplete(function() {
       $(this).hide();
   });

   $('#btn_register').click(function(){
       var parameters = $('#register_form').serialize();
      $('.error').empty();
      $.ajax({
        url: 'request.php',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(response){
           if (response.success == 'success') {
               //do the things you need on success
           } else {
               if (response.error.email != '') {
                   $('#email_error').html(response.error.email);
               }
               if (response.error.password != '') {
                   $('#password_error').html(response.error.password);
               }
           } 
        },
        error: function(){
            console.log(arguments);
        }
     });

   });

});
</script>

<div class="content">
<div>
    <div class="title-bar" align="center"><h2 class="title">Registration Form</h2></div>

    <div class="inner-wrap pad">
        <div id="msg"></div>
        <div align="center">
        <form action="" method="post" id="register_form" enctype="multipart/form-data">
        <table width="60%" border="0" cellspacing="1" cellpadding="5" class="tb">
          <tr>
            <td width="30%" class="r"><label for="email">Email</label></td>
            <td width="70%">
                <input type="text" id="email" name="email" maxlength="50" value="" autofocus autocomplete="off" />
                <span class="error" id="password_error"></span>
            </td>
          </tr>
          <tr>
            <td class="r"><label for="password">Password</label></td>
            <td><input type="password" id="password" name="password" style="width:150px;" value="<?php echo isset($_POST['password']) ? $_POST['password'] : '' ?>" />
                    <span class="error" id="email_error"></span>
            </td>
          </tr>
          <tr>
            <td class="r"><label for="rpassword">Retype Password</label></td>
            <td><input type="password" id="rpassword" name="rpassword" style="width:150px;" value="<?php echo isset($_POST['rpassword']) ? $_POST['rpassword'] : '' ?>" /></td>
          </tr>
          <tr>
            <td class="r"><label for="fname">Full Name</label></td>
            <td><input type="text" id="fname" name="fname" maxlength="50" value="<?php echo isset($_POST['fname']) ? $_POST['fname'] : '' ?>" /></td>
          </tr>
          <tr>
            <td class="r"><label for="contact">Contact Number</label></td>
            <td><input type="text" id="contact" name="contact" maxlength="15" value="<?php echo isset($_POST['contact']) ? $_POST['contact'] : '' ?>" /></td>
          </tr>
          <tr>
            <td class="r"><label for="dob">Date of Birth</label></td>
            <td>
            <input type="text" id="dd" name="dd" style="width:24px;" maxlength="2" value="<?php echo isset($_POST['dd']) ? $_POST['dd'] : '' ?>" placeholder="dd" />&nbsp;/
            <input type="text" id="mm" name="mm" style="width:24px;" maxlength="2" value="<?php echo isset($_POST['mm']) ? $_POST['mm'] : '' ?>" placeholder="mm" />&nbsp;/
            <input type="text" id="yy" name="yy" style="width:40px;" maxlength="4" value="<?php echo isset($_POST['yy']) ? $_POST['yy'] : '' ?>" placeholder="yyyy" />
            </td>
          </tr>
          <tr>
            <td class="r"><label for="capcha"></label></td>
            <td>
            <div style="padding-bottom:3px;">
            <img id="captcha" src="inc/securimage/securimage_show.php" alt="CAPTCHA Image" />
            <a href="#" onclick="document.getElementById('captcha').src='inc/securimage/securimage_show.php?' + Math.random(); return false" class="capcha">Refresh</a>
            </div>
            <div><input type="text" name="ct_captcha" size="12" maxlength="8" id="capcha" style="width:100px;" /></div>
            </td>
          </tr>
          <tr>
            <td></td>
            <td><a href="javascript:void(0);" class="btn" id="btn_register">Proceed</a>&nbsp;<span id="wait"><img src="images/ajax-loader.gif" /></span></td>
          </tr>
        </table>
        </form>
        </div>
    </div>

</div> 
```

此表单的主要更改是我已添加`<span class="error" id="password_error"></span>`并`<span class="error" id="email_error"></span>`保留错误内容，如果在提交密码和电子邮件时发生错误。

当您单击继续时，错误消息将被清空并将呼叫发送到服务器。服务器以 json 格式的成功或错误消息进行响应。在响应中，我们将检查服务器是否响应成功消息或错误消息。这是使用 `response.success == 'success'`. 如果响应成功，则表单已成功提交。

如果响应不成功，那么我们将检查服务器发送的错误类型，是电子邮件还是密码。`response.error.email != ''`我们将使用和检查错误响应的类型 `response.error.password != ''`。这些将检查电子邮件和密码错误。如果发现错误，则使用我们已经添加的 id 将错误消息响应插入到相应的错误消息标签中。

我已经完成了电子邮件和密码。同样，您可以对所有字段执行此操作。您只需将错误消息持有者添加到 html 的正确位置。

**请求.php**

```
<?php

include('connectdb.php');
include('functions.php');

$email      = mysql_real_escape_string(strtolower(trim($_POST['email'])));
$password   = mysql_real_escape_string(trim($_POST['password']));

$message = array();

if(!check_email_address($email)){
    $message['error']['email']  = "Invalid Email Address";
}
if(empty($password) || strlen($password) < 0){
    $message['error']['password'] = "Invalid Password";
}

// if there are no errors return success callback
if(!isset($message['error'])){
    $message['success'] = "success";
}

echo json_encode($message);

?> 
```

在 request.php 中，我更改的是删除`$error`变量并创​​建了一个新数组`$message`，并将错误消息添加到包含错误作为主键和字段名称作为数组的辅助键的多维数组中。

这样做的好处是我们可以轻松地在 ajax 回调中解析带有字段名称的错误消息。

如果没有找到错误消息，那么我们会将成功消息添加到`$message`带有成功键的数组中。

希望你清楚。让我知道这是否对您有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:58:05.057

您还应该提供错误回调。服务器可能会抛出错误

```
$('#btn_register').click(function(){
    var parameters = $('#reg_form').serialize();

    $.ajax({
        url: 'request.php',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(output_str){
            if(output_str == "error"){
                alert('Error: '+ output_str);
                //$('#msg').html(output_str);
            }else{
                alert(output_str);

            }
        },
        error:function(){
             console.log(arguments);
        }
    });

}); 
```

# serial-port - 跨平台串行输出

> ID：15451304
> 
> 赞同：1
> 
> 时间：2013-03-16T15:56:17.010
> 
> 标签：serial-port, cross-platform

我正在尝试找出编写小脚本以通过串行端口发送一些数据的跨平台方式的最佳选择。说真的，它可能只需要 10-20 行。但是，我真的很希望它可以重新分发到 Mac、Windows 和 Linux，而无需安装任何平台或运行时。我一直在研究的主要选项是 python，因为它应该已经在 Mac 和 Linux 上，我也许可以在 windows 上使用 py2exe。如果他们已经拥有它，我仍然会为 Windows 提供原始脚本。

有没有更好的选择？我所要做的就是获取当前系统时间和时区，做一些小的操作，然后将大约 10 个字节发送到任何需要的 COM 端口（可能由用户作为命令行参数提供）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:32:57.283

Real Studio 可以很好地完成这样的任务。它有一个内置的 Serial 类，可以从 Windows、OS X 和 Linux 的单一源代码创建本机可执行文件。无需运行时间。

[http://www.realsoftware.com](http://www.realsoftware.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:09:04.093

我知道您在谈论脚本，但我认为 Java 更适合，因为 RE 安装在大多数计算机上（Win、*Nix，我也认为在 Mac 上）。此外，应该不需要调整代码来获取不同系统上的系统时间和时区。对于 COM 端口的访问，我知道它们可以像 Windows 和 Linux 上的常规文件一样编写（例如 echo HELLO>com1 或 echo HELLO>/dev/com1）。这可能是命令行参数。Hth，菲利普

# android - Android 时区和 DST 问题

> ID：15451305
> 
> 赞同：5
> 
> 时间：2013-03-16T15:56:23.173
> 
> 标签：android, dst, timezone-offset

我有一个使用时间表的应用程序。用户选择时间表应该开始/结束的时间，然后我将开始/结束时间显示给用户。问题是，显示回来的时间是关闭的，因为 DST 改变了。

我可以解决我的时区（东部时间）的问题，或者我可以解决 GMT 的问题，如果我为 GMT 设置特定情况，阿拉斯加时间仍然是错误的。有什么建议么？

这是我的代码：

显示的时间：

```
long startTimeMillis = (startHour * 1000 * 60 * 60) + (startMin * 1000 * 60) - getTimeOffset(); 
```

获取时间偏移：

```
TimeZone tz = TimeZone.getDefault();

//deal with GMT weirdness
if (tz.getRawOffset() == 0)
    return tz.getRawOffset() + tz.getDSTSavings();
else
    return tz.getRawOffset(); 
```

我认为我需要类似的东西：

```
else if(tz.inDaylightTime(new Date()))
    return tz.getRawOffset() + tz.getDSTSavings(); 
```

但如果我这样做，那么东部时间显示的时间比它应该少 1 小时，而阿拉斯加时间显示的时间少 2 小时。如果我反其道而行之：（- 而不是 +）

```
else if(tz.inDaylightTime(new Date()))
    return tz.getRawOffset() - tz.getDSTSavings(); 
```

那么东部时间比它应该多 1 小时，但阿拉斯加时间是正确的。

**附录：**

我也尝试过`tz.getOffset(new Date().getTime())`在每种情况下使用而不是`tz.getRawOffset()`. 这实际上是我尝试的第一件事，因为根据谷歌的文档，这个函数应该为你处理 DST。

**结束附录**

我也尝试过使用日历，如下所示：

```
Calendar calendar = GregorianCalendar.getInstance();

return calendar.get(Calendar.ZONE_OFFSET); 
```

这给出了美国东部标准时间的正确时间，但格林威治标准时间提前 1 小时，阿拉斯加时间落后 1 小时。我试过这个：

```
if(tz.inDaylightTime(new Date()))
    return calendar.get(Calendar.ZONE_OFFSET) + calendar.get(Calendar.DST_OFFSET);
else
    return calendar.get(Calendar.ZONE_OFFSET); 
```

但这使 EDT 缩短了 1 小时。

我也试过这个：

```
return tz.getOffset(calendar.get(Calendar.ERA),
            calendar.get(Calendar.YEAR),
            calendar.get(Calendar.MONTH),
            calendar.get(Calendar.DAY_OF_MONTH),
            calendar.get(Calendar.DAY_OF_WEEK),
            calendar.get(Calendar.MILLISECOND)); 
```

这也使 EDT 缩短了 1 小时。

如果我使用，我会得到相同的结果

```
GregorianCalendar calendar = new GregorianCalendar(tz); 
```

代替

```
Calendar calendar = GregorianCalendar.getInstance(); 
```

我该如何正确地做到这一点？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T12:57:18.103

好的，我终于想出了如何正确地做到这一点。这就是我使它工作的方式：

```
long startTimeMillis = (startHour * 1000 * 60 * 60) + (startMinute * 1000 * 60);
startTimeMillis  -= getTimeOffset(startTimeMillis); 
```

获取时间偏移（）：

```
public static int getTimeOffset(long time)
{
    TimeZone tz = TimeZone.getDefault();

    return tz.getOffset(time);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:17:06.070

听起来您正在设置模拟器时区，您正在通过`tz.getDefault()`. 日历将在内部处理夏令时 - 如果它们设置为`TimeZone`完全遵守夏令时。一些 TimeZones，例如“America/Phoenix”和“MDT”不观察节省时间，而“America/Denver”有。

> 阿拉斯加时区通过从协调世界时 (UTC-9) 中减去九小时来观察标准时间。在夏令时期间，其时间偏移量为八小时 (UTC-8)。[https://en.wikipedia.org/wiki/Alaska_Time_Zone](https://en.wikipedia.org/wiki/Alaska_Time_Zone)

您可以使用`TimeZone.getAvailableIDs()`获取所有 TimeZone 名称/键的列表。查看 , , 之间`America/Anchorage`的`Etc/GMT+9`区别`America/Alaska`。

**编辑：更新的代码**这是一些示例代码，您可以通过几种方式来处理日期和 DST：

```
package com.codeshane.examples;

import java.text.DateFormat;
import java.util.Calendar;
import java.util.TimeZone;

public class Times {
public static final String[] yourZoneKeys =
  {"America/Anchorage", "America/Juneau", "America/Nome", "America/Yakutat",
   "Etc/GMT+9", "Pacific/Gambier", "SystemV/YST9", "SystemV/YST9YDT","US/Alaska"};

public static void main(String[] args){
    for (String timezoneKey: yourZoneKeys){
        TimeZone tz = getSelectedTimezone(timezoneKey);
        displayTimezoneInfo(tz);
        showTimeInNewCalendar(tz);
    }       
}

static void displayTimezoneInfo(TimeZone tz){
    System.out.println(
      "\n> TZ ID:" + tz.getID() +
      "  Display:" + tz.getDisplayName() +
      "  savings:" + tz.getDSTSavings() +
      "   offset:" + tz.getRawOffset() +
      ""
    );
}

static void showTimeInNewCalendar(TimeZone tz) {
    DateFormat df = DateFormat.getDateTimeInstance(DateFormat.FULL, DateFormat.FULL);

    /***** DST US 2013 = Mar 10 - Nov 3
     * Daylight Saving Time (United States) 2013
     * began at 2:00 AM on Sunday, March 10
     *  ends at 2:00 AM on Sunday, November 3
     **/

    //The Calendar method output the same results, but since both
    //methods went through the DateFormat, I went ahead and just
    //used the DateFormat's internal date via getCalendar().set(..)
    //but left the Calendar code (commented out) for you to compare.

    //Calendar gc = Calendar.getInstance();
    //gc.setTimeZone(tz);
    //gc.set(2013, 2, 10, 1, 30, 0);

    // Setting the Calendar's date and time
    df.getCalendar().set(2013, 2, 10, 1, 30, 0);

    // Display some times at 30 minute intervals
    for (int i =0;i<3;i++){

        df.setTimeZone(tz);
        System.out.println(
          "\n " + tz.getID() +
          " " + df.format(df.getCalendar().getTime()) +// sdf. .format(myDateFormat, gc) +
          //" gc date:" + df.format(gc.getTime()) +
          "  " + tz.inDaylightTime(df.getCalendar().getTime()) +
          ""
        );
        df.getCalendar().add(Calendar.MINUTE, 30);
        //gc.add(Calendar.MINUTE, 30);
    }
}

private static TimeZone getSelectedTimezone(String timezoneKey){
    if (null==timezoneKey) return TimeZone.getDefault(); // system/network-provided
    return TimeZone.getTimeZone(timezoneKey); // Gets specified tz, or "GMT" if tzKey is invalid
}

} 
```

**编辑：添加输出**您会注意到在我们刚刚在 2013 年 3 月 10 日观察到的“春季前进”时间添加 30 分钟时，一些时区会向前跳跃，而其他时区则不会。如果您选择这些遵守 DST 的时区，您将获得更改；而其他人不会。

> TZ ID：美国/安克雷奇显示：阿拉斯加标准时间节省：3600000 偏移量：-32400000

美国/安克雷奇 2013 年 3 月 10 日星期日 1:30:00 AM AKST false

美国/安克雷奇 2013 年 3 月 10 日星期日 3:00:00 AM AKDT true

美国/安克雷奇 2013 年 3 月 10 日星期日 3:30:00 AM AKDT true

> TZ ID：美国/朱诺显示：阿拉斯加标准时间节省：3600000 偏移量：-32400000

America/Juneau 2013 年 3 月 10 日星期日 1:30:00 AM AKST false

America/Juneau 2013 年 3 月 10 日星期日 3:00:00 AM AKDT true

America/Juneau 2013 年 3 月 10 日星期日 3:30:00 AM AKDT true

> TZ ID：美国/Nome 显示：阿拉斯加标准时间节省：3600000 偏移量：-32400000

America/Nome 2013 年 3 月 10 日星期日 1:30:00 AM AKST false

America/Nome 2013 年 3 月 10 日星期日 3:00:00 AM AKDT true

America/Nome 2013 年 3 月 10 日星期日 3:30:00 AM AKDT true

> TZ ID：美国/雅库塔特显示：阿拉斯加标准时间节省：3600000 偏移量：-32400000

America/Yakutat 2013 年 3 月 10 日星期日 1:30:00 AM AKST false

America/Yakutat 2013 年 3 月 10 日星期日 3:00:00 AM AKDT true

America/Yakutat 2013 年 3 月 10 日星期日 3:30:00 AM AKDT true

> TZ ID：Etc/GMT+9 显示：GMT-09:00 储蓄：0 偏移：-32400000

等/GMT+9 2013 年 3 月 10 日星期日 1:30:00 AM GMT-09:00 false

等/GMT+9 2013 年 3 月 10 日星期日 2:00:00 AM GMT-09:00 false

等/GMT+9 2013 年 3 月 10 日星期日 2:30:00 AM GMT-09:00 false

> TZ ID：Pacific/Gambier 显示：Gambier 节省时间：0 偏移量：-32400000

太平洋/甘比尔 2013 年 3 月 10 日星期日 1:30:00 AM GAMT 错误

太平洋/甘比尔 2013 年 3 月 10 日星期日 2:00:00 AM GAMT 错误

太平洋/甘比尔 2013 年 3 月 10 日星期日 2:30:00 AM GAMT 错误

> TZ ID：SystemV/YST9 显示：阿拉斯加标准时间节省：0 偏移量：-32400000

SystemV/YST9 2013 年 3 月 10 日星期日 1:30:00 AM AKST 错误

SystemV/YST9 2013 年 3 月 10 日星期日 2:00:00 AM AKST 错误

SystemV/YST9 2013 年 3 月 10 日星期日 2:30:00 AM AKST 错误

> TZ ID：SystemV/YST9YDT 显示：阿拉斯加标准时间节省：3600000 偏移量：-32400000

SystemV/YST9YDT 2013 年 3 月 10 日星期日上午 1:30:00 AKST 错误

SystemV/YST9YDT 2013 年 3 月 10 日星期日 2:00:00 AM AKST false

SystemV/YST9YDT 2013 年 3 月 10 日星期日 2:30:00 AM AKST 错误

> TZ ID：美国/阿拉斯加显示：阿拉斯加标准时间节省：3600000 偏移量：-32400000

美国/阿拉斯加 2013 年 3 月 10 日星期日 1:30:00 AM AKST false

美国/阿拉斯加 2013 年 3 月 10 日星期日 3:00:00 AM AKDT true

美国/阿拉斯加 2013 年 3 月 10 日星期日 3:30:00 AM AKDT true

我还推荐`http://www.worldtimeserver.com`，因为它可以让您将结果与*应有*的结果进行比较。

# android - 从 Listadapter 启动 ActionMode()

> ID：15451310
> 
> 赞同：1
> 
> 时间：2013-03-16T15:56:56.067
> 
> 标签：android, listview, android-actionbar, actionbarsherlock, actionmode

我有一个自定义 ListView-Adapter 的问题。因此，当检查一个复选框（每个ListItem都有一个）时，我正在尝试启动ActionBarsherlock的ActionMode。我直接在适配器中实现了一个 OnClickListener：

```
((CheckBox) holder.check_entry).setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
      //code
    }
}); 
```

如何正确启动 ActionMode？

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:34:20.393

获取对活动的引用并调用[`Activity#startActionMode(ActionMode.Callback callback)`](http://developer.android.com/reference/android/app/Activity.html#startActionMode%28android.view.ActionMode.Callback%29). 作为参数，您需要传递[`ActionMode.Callback`](http://developer.android.com/reference/android/view/ActionMode.Callback.html)接口的实现。查看 ActionBarSherlock 的[ActionMode 示例](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/ActionModes.java)。

顺便说一句，关于`ListView`with 复选框，我会看一下[`android:choiceMode`](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android%3achoiceMode)and [`ListView#isItemChecked(int position)`](http://developer.android.com/reference/android/widget/AbsListView.html#isItemChecked%28int%29)。

# ruby-on-rails - 初始保存后如何冻结用户属性？

> ID：15451311
> 
> 赞同：0
> 
> 时间：2013-03-16T15:56:57.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

对于我的网站，一旦用户选择了他/她的性别并保存了个人资料，我希望将性别属性冻结。这样恶意用户就无法返回并更改他/她的性别。我怎样才能做到这一点？现在用户模型`attr_accessor`包括`:gender`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T16:00:44.437

您可以像这样指定只读属性：

```
attr_readonly :gender 
```

这将允许最初保存性别属性，但永远不会更新。

# javascript - （已关闭）未捕获的类型错误：无法调用未定义的方法“下载”

> ID：15451313
> 
> 赞同：2
> 
> 时间：2013-03-16T15:57:00.293
> 
> 标签：javascript, api, google-chrome, download, typeerror

**重要提示：Google 在 Chrome 27.0.1448.0 dev-m 中修复了此问题**

我编写了一个 Chrome 扩展程序，它从当前查看的站点中提取某些 url，然后下载其中的一个子集。该扩展基于[https://developer.chrome.com/extensions/samples.html](https://developer.chrome.com/extensions/samples.html)上的“下载选定链接”示例。**在过去的 3 个月里，我的代码有效。**我上次使用它是 2 天前 - 今天我开始使用

**问题：**

*未捕获的类型错误：无法调用未定义的方法“下载”*

当试图下载一个 url 就行了

```
chrome.downloads.download(
    {url: visibleLinks[i],filename: visibleNames[i] + '.mp3'},
    function(id) { 
        pending = pending - 1;
        if (pending == 0) {
            window.close();
        };
    }
); 
```

清单文件中所需的权限似乎包括在内：

```
"permissions": [
    "downloads", "tabs", "https://*/*", "http://*/*"
] 
```

**我用什么：**

*   Chrome 的最新开发版本：27.0.1444.3 dev-m（同样的问题也出现在 27.0.1438.7 dev-m 中）

**我尝试了什么：**

*   记录 url 和文件名传递给 chrome.downloads.download 调用。两者都可以。
*   在论坛上搜索类似的问题。不幸的是，我在我的代码中找不到问题（或者至少是从哪里开始的线索）。
*   [从https://developer.chrome.com/extensions/samples.html](https://developer.chrome.com/extensions/samples.html)下载示例“下载所选链接”扩展并尝试使用它（在用其他图标替换其 0 字节 icon.png 之后）。结果：它只是重现了错误。

**同样的问题，不同的帖子：**

*   2012 年 12 月 10 日：[如何在开发或金丝雀频道上启用“chrome.downloads”api？](https://stackoverflow.com/questions/15431075/)
*   2013 年 3 月 15 日：[下载 url chrome 扩展](https://stackoverflow.com/questions/13806908/)

**发布到 Google 的问题：**

*   开始时间：2013 年 3 月 16 日，加勒特：[https](https://code.google.com/p/chromium/issues/detail?id=202178) ://code.google.com/p/chromium/issues/detail?id=202178 状态：合并（如下所示）
*   开始时间：16.03.2013 由 QuteBits：[https](https://code.google.com/p/chromium/issues/detail?id=221952) ://code.google.com/p/chromium/issues/detail?id=221952 状态：已修复 (21.03.2013)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:32:53.887

谷歌似乎在最新版本中使用了下载 API。自更新以来，我自己的扩展程序也遇到了类似的问题。唯一的解决方案是等到他们发布修复程序。对不起 ：（

**编辑：** 我已向 Google 提交了错误报告。你可以按照[这里](https://code.google.com/p/chromium/issues/detail?id=202178)

# objective-c - 声明 int 变量时链接器命令失败

> ID：15451317
> 
> 赞同：0
> 
> 时间：2013-03-16T15:57:12.720
> 
> 标签：objective-c, cocos2d-iphone

当我声明一个全局变量时，我得到了错误：

> 链接器命令失败，退出代码为 1（使用 -v 查看调用）

这是代码：

```
import "menuplay.h"

import "buttonmanager.h"

int  test; //<--------------when i  declare  it show  error Apple Mach-O Linker Error

@interface lessonone : CCLayer {
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:02:24.200

将其声明为静态：

```
static int test; 
```

或者 const 如果它的值永远不应该改变：

```
const int test = 10; 
```

# javascript - 如何使 Html5/Javascript 画布填充窗口屏幕？

> ID：15451321
> 
> 赞同：0
> 
> 时间：2013-03-16T15:57:27.927
> 
> 标签：javascript, html, css, browser, html5-canvas

我是 HTML 的初学者，用 Tululoo ( [http://www.tululoo.com/](http://www.tululoo.com/) ) 制作了一个 HTML5 游戏。这个“示例”( [http://trailsite555.eu.pn/game/](http://trailsite555.eu.pn/game/) ) 工作正常，但是有没有办法让画布填满浏览器窗口？（如 Chrome/Firefox），还有没有办法填充手机屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:22:20.753

画布标签不是百分比，而是像素。

所以你必须计算视口的实际尺寸并将其应用到你的画布上。您仍然必须在 CSS 中隐藏滚动条。

这是代码：

```
//return an obect with the dimension of the viewport of the browser
function getViewportDimension() {
var e = window, a = 'inner';
if (!( 'innerWidth' in window )) {
    a = 'client';
    e = document.documentElement || document.body;
}
return {w:e[a + 'Width'], h:e[a + 'Height']};
}

//apply the dimension to the canvas
var dim = getViewportDimension();
canvas.width = dim.w;
canvas.height = dim.h; 
```

隐藏滚动条的 CSS 代码：

```
html {
    margin: 0;
    padding: 0;
    overflow: hidden;
} 
```

请记住，调整画布大小会清除其内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T16:02:40.567

That line of code

```
<canvas id="[object Object]" width="640" height="360" style="background-color: rgb(46, 90, 65); border: 0px;"></canvas> 
```

Why did you make it `width="640"` and `height="360"` ?

change them both to 100%, it should fix it up.

# select - 在多个表上授予 SELECT oracle

> ID：15451325
> 
> 赞同：23
> 
> 时间：2013-03-16T15:57:51.100
> 
> 标签：select, oracle11g, grant

我有 3 个表 table1、table2、table3。我想将这些表授予（例如选择）用户 user1。

我知道我可以授予：

```
grant select on table1 to user1;
grant select on table2 to user1;
grant select on table3 to user1; 
```

我可以仅使用 1 个查询将 3 个表授予 user1 吗？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-16T16:39:32.813

不可以。如[文档所示](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9013.htm#SQLRF01603)，您一次只能授予对一个对象的访问权限。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-12T08:46:24.397

您可以使用动态查询来做到这一点，只需在 pl-sql 或 sqlplus 中运行以下脚本：

```
select 'grant select on user_name_owner.'||table_name|| 'to user_name1 ;' from dba_tables t where t.owner='user_name_owner' 
```

然后执行结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-16T18:00:48.710

我的建议是......使用在 oracle 中创建角色

```
create role <role_name>; 
```

然后使用

```
grant select on <table_name> to <role_name>; 
```

然后使用该角色将该组权限分配给任何用户

```
grant  <role_name> to <user_name>...; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-21T15:53:58.377

这对我的 Oracle 数据库有用：

```
SELECT   'GRANT SELECT, insert, update, delete ON mySchema.' || TABLE_NAME || ' to myUser;'
FROM     user_tables
where table_name like 'myTblPrefix%' 
```

然后，复制结果，将它们粘贴到您的编辑器中，然后像脚本一样运行它们。

如果您不想要额外的复制/粘贴步骤，您也可以编写一个脚本并使用“立即执行”来运行生成的 SQL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-10T15:09:29.077

如果您想同时授予表和视图，请尝试：

```
SELECT DISTINCT
    || OWNER
    || '.'
    || TABLE_NAME
    || ' to db_user;'
FROM
    ALL_TAB_COLS 
WHERE
    TABLE_NAME LIKE 'TABLE_NAME_%'; 
```

对于仅视图尝试：

```
SELECT
    'grant select on '
    || OWNER
    || '.'
    || VIEW_NAME
    || ' to REPORT_DW;'
FROM
    ALL_VIEWS
WHERE
    VIEW_NAME LIKE 'VIEW_NAME_%'; 
```

复制结果并执行。

# java - 我能做到：导入 java.* 吗？

> ID：15451326
> 
> 赞同：-2
> 
> 时间：2013-03-16T15:57:54.227
> 
> 标签：java, import

我很好奇我是否能够做到：在使用 java 时导入 java.*，并且几乎所有我需要的东西都导入了。这可能吗？我不需要这样做，这个问题刚刚掠过我的脑海，我很好奇。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T16:00:41.060

`import something.*`不是递归的。您只会获得指定包中的所有类，而不是子包。

[http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)

`java`由于根包中没有类，`import java.*;`因此不会做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:03:55.530

这没有任何意义，因为 java.* 包中没有类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:13:32.910

java中的包**不是**分层的，即使文件系统是分层的。包名只是一个命名空间。`java.lang.reflect`根本不相关`java.lang`。两者是完全不同的名称。

唯一的分层方面是命名空间可以映射到文件夹结构，并且此约定由最常见的类加载器使用，它期望来自`com.example.util`文件夹中的包的类`./com/example/util`。但仅此而已。

# nhibernate - NHibernate 问题从带有子选择的实体中删除

> ID：15451328
> 
> 赞同：0
> 
> 时间：2013-03-16T15:58:03.813
> 
> 标签：nhibernate, domain-driven-design, nhibernate-mapping

我有两个从同一个表中读取的连接子类，其中一个可空字段作为鉴别器。我已经能够使用这样的子选择读取两个实体：

```
<joined-subclass name="EntityA"
    table="t_entity"
    subselect="SELECT * FROM t_entity WHERE t_entity.discriminator is not null">
  <key column="t_uid"></key>
    <!-- more mapping -->
</joined-subclass>

<joined-subclass name="EntityB"
    table="t_entity"
    subselect="SELECT * FROM t_entity WHERE t_entity.discriminator is null">
  <key column="t_uid"></key>
    <!-- more mapping -->
</joined-subclass> 
```

一切都很好，但是当我尝试删除两个实体之一时，出现语法错误：

```
NHibernate.Exceptions.GenericADOException was unhandled
  HResult=-2146232832
  Message=could not delete: [EntityA#27]
  [SQL: DELETE FROM ( SELECT * 
        FROM t_entity 
        WHERE t_entity.discriminator is not null ) WHERE t_uid = ?]
Source=NHibernate 
```

关于如何通过可为空字段区分同一个表中的实体有更好的想法吗？

这里是堆栈跟踪：

```
 at NHibernate.Persister.Entity.AbstractEntityPersister.Delete(Object id, Object version, Int32 j, Object obj, SqlCommandInfo sql, ISessionImplementor session, Object[] loadedState)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Delete(Object id, Object version, Object obj, ISessionImplementor session)
   at NHibernate.Action.EntityDeleteAction.Execute()
   at NHibernate.Engine.ActionQueue.Execute(IExecutable executable)
   at NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
   at NHibernate.Engine.ActionQueue.ExecuteActions()
   at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
   at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   at NHibernate.Impl.SessionImpl.Flush()
   at NHibernate.Transaction.AdoTransaction.Commit()
   at Nephila.Toolkit.Data.Implementations.Transaction.Commit() in C:\Projects\Git\nephilaapiTFS\Toolkit\Nephila.Toolkit.Data.Implementations\Transaction.cs:line 48
   at Nephila.Dashboard.ServiceLayer.WidgetRegistrationService.UnregisterWidget(Widget widget) in C:\Projects\Git\nephilaapiTFS\Dashboard\Nephila.Dashboard.ServiceLayer\WidgetRegistrationService.cs:line 206
   at Nephila.Dashboard.WidgetRegistrationConsole.Instance.UnregisterWidget(String widgetUrlName) in C:\Projects\Git\nephilaapiTFS\Nephila.Dashboard.WidgetRegistrationConsole\Program.cs:line 254
   at Nephila.Dashboard.WidgetRegistrationConsole.Instance.Display(String[] args) in C:\Projects\Git\nephilaapiTFS\Nephila.Dashboard.WidgetRegistrationConsole\Program.cs:line 97
   at Nephila.Dashboard.WidgetRegistrationConsole.Program.Main(String[] args) in C:\Projects\Git\nephilaapiTFS\Nephila.Dashboard.WidgetRegistrationConsole\Program.cs:line 19
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()

   InnerException: System.Data.SqlClient.SqlException
   HResult=-2146232060
   Message=Incorrect syntax near '('.
   Incorrect syntax near the keyword 'WHERE'.
   Statement(s) could not be prepared.
   Source=.Net SqlClient Data Provider
   ErrorCode=-2146232060
   Class=15
   LineNumber=1
   Number=102
   Procedure=""
   Server=(local)
   State=1
   StackTrace:
        at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
        at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
        at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
        at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
        at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)
        at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
        at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
        at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
        at NHibernate.AdoNet.AbstractBatcher.ExecuteNonQuery(IDbCommand cmd)
        at NHibernate.Persister.Entity.AbstractEntityPersister.Delete(Object id, Object version, Int32 j, Object obj, SqlCommandInfo sql, ISessionImplementor session, Object[] loadedState) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:25:30.913

您可以使用基于鉴别器的继承映射，而不是使用子选择，并使用鉴别器的公式，即

```
<class name="BaseEntity" table="t_entity">
   <!-- base id and properties mapping -->

  <discriminator formula="CASE discriminator is not null 
                          WHEN true THEN 'EntityA' 
                          ELSE 'EntityB' 
                          END" />

  <subclass name="EntityA" discriminator-value="EntityA">
    <!-- more mapping -->
  </subclass>

  <subclass name="EntityB" discriminator-value="EntityB">
    <!-- more mapping -->
  </subclass>
</class> 
```

然后，您应该能够删除实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:39:43.427

对我来说，答案是将两个实体拆分在两个不同的表中，保持一个公共基表和公共字段，并在每个子表中设置它们自己的有价值信息。

```
<joined-subclass name="BaseEntity"
    table="t_entity_base"
    abstract="true">
      <key column="t_uid"></key>
        <!-- common mapping -->

    <joined-subclass name="EntityA"
        table="t_entity_a">
      <key column="t_uid"></key>
      <!-- specific fields, i.e.: -->
      <property name="discriminator" column="discriminator"/>

    </joined-subclass>

    <joined-subclass name="EntityB"
        table="t_entity_b">
      <key column="t_uid"></key>

    </joined-subclass>

</joined-subclass> 
```

谢谢你的帮助。

# c++ - c++ 是在参数化构造函数中调用的默认构造函数吗？

> ID：15451335
> 
> 赞同：0
> 
> 时间：2013-03-16T15:58:33.993
> 
> 标签：c++, templates, constructor, default-constructor

我有以下模板类：

```
template<typename T, int nSize> class Stack{
private:
    int m_nCurrentPos;
    Array<T> m_tArray;
public:
    Stack(int nCurrentPos = 0);
    ...
}; 
```

我希望默认构造函数如下工作：

```
template<typename T, int nSize> Stack<T,nSize>::Stack(int nCurrent){ 
    m_nCurrent = nCurrentPos;
    m_tArray = Array<T>::Array(nSize);
}; 
```

数组看起来像这样：

```
template <typename T> class Array{
private:
    T* m_cData;
    int m_nSize;
    static int s_nDefaultSize;
public:
    Array();
    Array(int nSize);
    ...
}; 
```

它的构造函数是：

```
template<typename T> Array<T>::Array(){
    m_nSize = s_nDefaultSize;
    m_cData = new T[m_nSize];
} 
```

而且，显然，

```
template<typename T> Array<T>::Array(int nSize){
    m_nSize = nSize;
    m_cData = new T[m_nSize];
} 
```

因此，Stack 由 Array 和一些额外的功能组成。**我的问题是**，当我在 Array 中定义`s_nDefaultSize`为 say`512`时，我尝试实例化`Stack<int,1024>`我从类 Array 中得到一个异常，说我正在尝试分配两个不同长度的数组。一旦我更改了代码`s_nDefaultSize=1024`（因此它与模板的非类型参数匹配`nSize`），一切都很好。因此，换句话说，异常一旦发生`s_nDefaultSize != nSize`。所以，我的猜测是，在上面的代码中，在 的默认构造函数中`Stack<T,nSize>`，即`m_tArray = Array<T>::Array(nSize);`由`m_tArray`Array 的默认构造函数（使用`s_nDefaultSize`）创建，然后编译器才会尝试将其分配给`Array<T>::Array(nSize)`（使用我的`nSize`价值）。那是对的吗？如果是，我该如何改变这种行为？[这是我昨天发布的另一个问题，尽管它是关于继承而不是组合的，但与这个线程中的问题非常相关。](https://stackoverflow.com/questions/15437784/c-how-does-a-class-derived-from-a-template-call-the-templates-constructor)干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:10:46.207

您需要使用带有以下构造函数的成员初始化列表`Stack`：

```
template<typename T, int nSize>
Stack<T,nSize>::Stack(int nCurrent)
  : m_tArray(nSize)
{ 
    m_nCurrent = nCurrentPos;
}; 
```

正如你所拥有的，`m_tArray`将首先被默认构造，然后分配给你的构造函数。在这里，我们使用成员初始化列表立即初始化`m_tArray`为正确的大小。

# c++ - 如何成功创建一个创建对象并返回指向该对象的指针的函数？

> ID：15451340
> 
> 赞同：0
> 
> 时间：2013-03-16T15:58:54.230
> 
> 标签：c++, oop, pointers, reference

使用 Direct2d 时存在此功能：

```
HRESULT WINAPI D2D1CreateFactory(
  _In_      D2D1_FACTORY_TYPE factoryType,
  _In_      REFIID riid,
  _In_opt_  const D2D1_FACTORY_OPTIONS *pFactoryOptions,
  _Out_     void **ppIFactory
); 
```

当上述方法返回时，ppIFactory 包含指向新工厂的指针的地址，因此可以使用该工厂。

我想做类似的事情，所以我在 MessageLog.h 中做了这个：

```
void CreateMessageLog(MessageLog**);

class MessageLog{
public:
    void PutToLog(WCHAR[]);

    WCHAR* GetLog();
    int GetLogLenght();
    int GetnLogLines();

private:
    WCHAR logHistory[MaxLogSize];
    int nLogLines;
}; 
```

这进入 MessageLog.cpp：

```
void CreateMessageLog(MessageLog** ppMessageLog)
{
    MessageLog mLog;
    MessageLog* pmLog=&mLog;
    ppMessageLog=&pmLog;
} 
```

现在完成了，我有一些问题。首先，一旦 CreateMessageLog 函数结束，创建的 MessageLog 对象将超出范围，指针将变为 NULL 对吗？这个问题的解决方案是什么？

顺便说一句，我猜我的 CreateMessageLog 函数不会像我期望的那样做。该问题的解决方案是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:01:35.460

使用动态分配：

```
MessageLog* CreateMessageLog()
{
    return new MessageLog;
} 
```

外部记住函数内部`delete`创建的指针`new`。您将能够随时访问指针指向的内存。完成后，您必须通过调用手动释放内存`delete a`：

例子：

```
MessageLog* a = createMessageLog();
// use `a` the way you want
// when done:
delete a; 
```

`MessageLog`如果对象不大，您也可以创建一个副本。即使效率较低，您也不必自己管理内存：

```
MessageLog CreateMessageLog()
{
    MessageLog a;
    return a;
} 
```

PS：确保复制构造函数可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:14:40.973

当你这样写

```
void CreateMessageLog(MessageLog** ppMessageLog)
{
    MessageLog mLog;
    MessageLog* pmLog=&mLog;
    ppMessageLog=&pmLog;
} 
```

MessaLog 在堆栈上创建并具有功能范围，在您离开 CreateMessageLog 的那一刻它就不再存在

改为使用堆创建 MessageLog

```
void CreateMessageLog(MessageLog** ppMessageLog)
{
    MessageLog* mLog = new MessageLog;
    *ppMessageLog=pmLog;
} 
```

不要忘记在不再需要时删除分配的堆。

# c - 定义结构数组的值

> ID：15451341
> 
> 赞同：1
> 
> 时间：2013-03-16T15:58:55.980
> 
> 标签：c, microcontroller, structure

当我通过以下方式声明 typedef 时：

```
typedef struct
{
  uint8 LastState;
  uint8 CurrentState;
  uint8 NextState;
  uint8 TaskEnabled;
  uint8 Counter;
  uint8 Status;
}SM_tstTaskStateStructure; 
```

我尝试为我尝试通过以下方式创建的数组定义内容：

```
#define xInitDataTable  \
{IDLE,IDLE,IDLE,YES,TIMED7SEG,IDLE},   \
{IDLE,IDLE,IDLE,YES,TIMELED1,IDLE},   \
{IDLE,IDLE,IDLE,YES,TIMELED2,IDLE},   \
{IDLE,IDLE,IDLE,YES,TIMELED3,IDLE},   \
{IDLE,IDLE,IDLE,YES,TIMEBTN,IDLE},   \
{IDLE,IDLE,IDLE,YES,BASETIME,IDLE},   \
{IDLE,IDLE,IDLE,YES,FREQUPDATE,IDLE} 
```

然后将其初始化为结构数组：

```
static const SM_tstTaskStateStructure   SM__astData[TASKMAX]=
{
    xInitDataTable  
}; 
```

这个编译器是特定的吗？富士通 mc 的 Softune 编译器允许我以这种方式初始化结构数组，而 Code Composer Studio 则不允许。如果是这样，是否有任何类似的方法可以做到这一点（如果可能，使用定义）？

** 这些只是数值，没有指针或任何东西。

编辑：没关系，在尝试使用前或后增量时发生在所有成员身上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:07:35.810

只要`TASKMAX`大于 7，这个初始化是完全标准的。

> ### C11 (n1570)，第 6.7.9 节初始化
> 
> ```
> initializer:
>     assignment-expression
>     { initializer-list }
>     { initializer-list , } 
> ```

如果在增加值时打印错误，那是因为`SM__astData`使用`const`限定符声明。

> ### C11 (n1570), § 6.5.3.1 前缀递增和递减运算符
> 
> 前缀递增或递减运算符的操作数应具有原子、合格或不合格的实数或指针类型，并且应是可修改的左值。

如果要执行此类操作，请使用以下声明：

```
static /* const */ SM_tstTaskStateStructure   SM__astData[TASKMAX]=
{
    xInitDataTable  
}; 
```

# android - 在按钮单击时显示 android 项目

> ID：15451344
> 
> 赞同：0
> 
> 时间：2013-03-16T15:59:09.217
> 
> 标签：android, layout

我是一名 android 初学者，我的活动 A 和 B 中有两个按钮。帮助我隐藏按钮 B 并在单击按钮 A 时显示它！

[![一只忙碌的猫](../Images/0794c4dc8e763a43ed53986cb9f7ad2f.png)](https://i.stack.imgur.com/vGPDi.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:03:47.467

Try this

```
buttonb.setVisibility(View.GONE); 

    buttona.setOnClickListener(new View.OnClickListener() {           

      @Override
      public void onClick(View v) 
      {
         buttonb.setVisibility(View.VISIBLE);
      }    
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:05:39.203

在 Create 方法中，您可以按如下方式设置可见性：

```
 button_b.setVisibility(View.GONE); 
```

并在 button_a 的 onclick 方法中使 button_b 可见，如下所示

```
 button_a.setOnClickListener(new View.OnClickListener() {           

      @Override
      public void onClick(View v) 
      {
         button_b.setVisibility(View.VISIBLE);
      }    
    } 
```

# android - Android设计：后台长时间运行的服务或AlarmManager？

> ID：15451347
> 
> 赞同：5
> 
> 时间：2013-03-16T15:59:27.217
> 
> 标签：android, alarmmanager, boot

我正在构建一个应用程序，它将定期监控电池状态、wifi 连接和位置数据，并将结果写入文件（然后将它们发送到服务器）。在安装应用程序监控时应该禁用 - 但启用它的用户应该在重新启动后仍然存在。经过大量阅读后，我意识到我基本上有两种选择：

*   子类化`Service`并从我的活动中删除它。将它设置在前台、STICKY 等等，并希望它不会被 android 杀死 - 如果 android 重新创建它，请注意（实际上应该有 3 个服务，因此它们之间的同步可能会很混乱）。在服务中启动一个线程（我猜不需要执行器）并拥有它`Thread.sleep(REGULAR_INTERVAL)`。醒来，收集数据将它们写入文件。广播收集的信息并在我的活动中显示它（如果它恰好正在运行）（它将注册一个广播接收器）。冲洗并重复`while(true)`。有办法打断这个
*   让我的活动向 AlarmManager 注册一个 PendingIntent - 这将运行每个 REGULAR_INTERVAL。我没有深入研究这种方法的技术细节 - 但我希望我能够让这个 PendingIntent 创建并运行一个 IntentService （这似乎是要走的路 - 拥有免费的线程机器以及关闭在其自己的）。这种方法的一些骨架代码将受到欢迎。

我想我必须在两种情况下都注册一个启动接收器来检查共享首选项（已经这样做了），如果 1 启动服务，而如果 2 为警报事件注册一个接收器并设置警报管理器- 那是我需要一些骨架代码的部分。

那么 - 在我开始构建这个之前 - 这将是首选方法吗？

回顾一下 - 应用程序应该监控一些手机属性并将它们写入文件，直到用户选择关闭它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T16:13:07.810

> 而在案例2中为警报事件注册一个接收器并设置警报管理器

您的接收器将已经通过清单注册。

> 哪种方法是首选方法？

`AlarmManager`，假设`REGULAR_INTERVAL`通常相当长（例如，超过几分钟）。理想情况下，该间隔是用户可配置的。

如果您打算在设备处于休眠状态时也这样做，那么您的选项 #1 根本不起作用，除非您一直保持`WakeLock`开启状态，这将导致您的用户想要用霰弹枪朝您的脸开枪。

> 这种方法的一些骨架代码将受到欢迎。

[这是一个示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/AlarmManager/Scheduled)，演示了`AlarmManager`用于非`_WAKEUP`警报的用途（即，您只需要在设备由于其他原因已经唤醒时发生这些事件）。

[这是一个示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/AlarmManager/Wakeful)，`AlarmManager`它`_WAKEUP`使用[我的`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful). `WakefulIntentService`（或类似的东西）是必要的，因为`AlarmManager`不会让设备保持清醒很长时间（刚好足够`onReceive()`a 的时间`BroadcastReceiver`），因此您需要采取额外的步骤来让设备保持足够长的清醒时间以便您完成工作。*从理论上讲*，您的工作可能很快就可以完成，`onReceive()`而`BroadcastReceiver`无需弄乱`WakefulIntentService`. 但是，您将每次都执行磁盘 I/O，理想情况下不应在`onReceive()`调用的主应用程序线程上执行此操作。而且，当您上传数据时，您可能需要一个`WakefulIntentService`那么，无论如何，如果您也想在后台执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:14:01.507

使用第二个选项，并且应该使用 intentService + AlarmManager 看到这个例子[http://www.dotkam.com/2011/01/10/android-prefer-alarms-and-intent-receivers-to-services/](http://www.dotkam.com/2011/01/10/android-prefer-alarms-and-intent-receivers-to-services/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:19:57.463

根据重复任务的长度，您可以选择多种方法之一。这个问题讨论了它们 -[在 Android 中调度重复任务](https://stackoverflow.com/questions/14376470/scheduling-recurring-task-in-android/14980699)

当任务休眠时间为 15 分钟或更长时，使用 AlarmManager 很方便。这种模式是众所周知的。

# c++ - 什么是意外宏替换？

> ID：15451351
> 
> 赞同：7
> 
> 时间：2013-03-16T15:59:36.253
> 
> 标签：c++, coding-style

什么是意外宏替换？

在[Vera++](https://bitbucket.org/ThArGos/vera) C++ linter 中，规则 T016 规定：

> 对 min 和 max 函数的调用应防止意外宏替换。
> 
> ```
> x = max(y, z); // wrong, vulnerable to accidental macro substitution
> 
> x = (max)(y, z); // OK
> 
> x = max BOOST_PREVENT_MACRO_SUBSTITUTION (y, z); // OK 
> ```

为什么这是一条好规则，需要这条规则的 min 和 max 函数有什么特别之处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T16:05:32.713

意外宏替换是无意使用名称与函数冲突的宏。

Vera++ 的检查旨在防止出现行为不端的系统头文件（最著名的是`<windows.h>`）定义`min`和`max`宏会干扰应用程序定义的同名函数，甚至干扰标准库函数，如[`std::min<T>`](http://www.cplusplus.com/reference/algorithm/min/)、[`std::max<T>`](http://www.cplusplus.com/reference/algorithm/max/)和[`std::numeric_limits<T>::min()`](http://www.cplusplus.com/reference/limits/numeric_limits/). （已知其他名称也会引起冲突。）

由于宏不支持命名空间，因此调用函数 as无济于事，因为预处理器仍会对其进行扩展。要解决此问题，必须将此类函数调用为，这将阻止宏扩展，前提是它被定义为，通常是和的情况。另一个可用的选项是在使用之前，但在包含行为不端的标头之后。Boost 提供了自己的替代预防标记，尽管它的自我描述性被它引入的混乱所抵消。**`std`**`::min(...)``min``(function)(args...)``#define function(arg1, arg2) ...``min``max``#undef`

如果您控制 的包含`<windows.h>`，您也可以`#define NOMINMAX`在它包含之前，这将指示`windows.h`不要定义`min`and`max`宏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:07:29.803

问题是讨厌的库（或愚蠢的程序员）通常会定义您可能没想到的 max 和 min 宏。如果您的代码假设评估将由一个不错的函数完成，那么您将得到不正确的结果（甚至是未定义的行为）。linter 指出这一点很有帮助，除非你真的确定你知道你正在使用的所有包含定义的所有宏，否则不要冒与这些常见宏名称发生冲突的风险更安全。

# java - Reducer node takes a long time to receive its records

> ID：15451353
> 
> 赞同：0
> 
> 时间：2013-03-16T15:59:42.470
> 
> 标签：java, hadoop, mapreduce, distributed-computing, elastic-map-reduce

When I checked the Hadoop GUI, I found that some of the reduce tasks have reached 66.66%, and they stay there for a long time. When I checked the counters, I found that the no. of input records is shown as zero.

After a long time, they get their input records, start processing them. Some show 0 input records in even for longer times and are killed by the Task Attempt failed to report status for 600 ms.

But some of the reducers show input records in their counters immediately and start processing them right away.

I do not know, why there is so much delay in the getting the input records for some reducers. This happens only with this program, and not the other programs.

In this mapreduce job, I have, in the configure method before the reduce method of the reduce, I read a lot of data from distributed cache. Is this the reason? I am not sure.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:58:59.523

是的，我相信从分布式缓存中读取是您延迟的原因。`configure()`但是如果你在 之前或之后保留它不会有什么不同`reduce()`，因为最终`configure()`方法必须首先被调用，如果你看到`run()`reducer 它看起来如下所示（新 API）：

```
public void run(Context context) throws IOException, InterruptedException {

    setup(context); // This is the counterpart of configure() from older API

    while (context.nextKey()) {
        reduce(context.getCurrentKey(), context.getValues(), context);
    }
    cleanup(context);
} 
```

如您所见，在较旧的 API 中`setup()`调用`reduce()`了类似的方法，除非`configure()`完成实际的 reduce 任务，否则不会启动（这说明您看不到任何输入记录计数）。

现在至于百分比 : `66%`，您会看到 reduce 阶段实际上具有以下子部分：

1.  复制
2.  种类
3.  减少

因此，由于您的前两个步骤已完成，第三个步骤已开始但正在等待`configure()`完成（要读取分布式缓存），因此您的减少百分比为 66%。

# java - How to use getAssets().open(filename) with FileWriter?

> ID：15451356
> 
> 赞同：1
> 
> 时间：2013-03-16T15:59:59.273
> 
> 标签：java, android, filewriter

This is the code I tried:

```
FileWriter outFile = new FileWriter(getAssets().open("USCOUNTIES"),append); 
```

But it gives this error while compiling: "The method getAssets() is undefined for the type class1"

What is the correct usage in this scenario?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:30:30.620

您不能写入资产。`open()`返回一个`InputStream`；你不能`InputStream`用 a`FileWriter`或其他任何东西写信给 an。这超出了您得到的错误（由尝试调用`getAssets()`不是 a 的东西引起的`Context`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:06:32.823

该方法`getAssets()`是[Context](http://developer.android.com/reference/android/content/Context.html#getAssets%28%29)的一部分，您可以在上下文本身或其子类上调用它`Activity`。您应该在需要的地方传递上下文

```
public void doSomethingRelatedToFiles(Context ctx){
    AssetManager am = ctx.getAssets();
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:06:48.403

getAssets() 方法在[Context](http://developer.android.com/reference/android/content/Context.html#getAssets%28%29)接口中定义。所以你遇到的错误意味着 class1 没有实现 Context 接口。

基本上，此方法可用于 Activity 和 Service 和 Resource 类。

因此，您需要将 Context 作为方法参数传递。做这样的事情：

```
public void myMethod(Context context){
    ...
    FileWriter outFile = new FileWriter(context.getAssets().open("USCOUNTIES"),append);
    ...
} 
```

并假设您是`myMethod`从活动中调用的，请执行以下操作：

```
class1Instance.myMethod(this); 
```

# python - what does "(python)program can exit when only daemonic children remain" mean?

> ID：15451358
> 
> 赞同：-1
> 
> 时间：2013-03-16T16:00:12.817
> 
> 标签：python, multithreading, multiprocessing, daemon

I've seen this many times,but still don't know the exact meaning.So anyone explains it? more specifically:

a. I know that if you set `daemon=True` the thread will become a daemon thread.But why do we need a daemon thread?

b. what's the meaning of "can exit"?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:05:06.993

守护线程是在父进程退出时被杀死的进程。如果你 fork 一个进程而不将其设置`daemon`为`True`，那么即使父进程被杀死/退出，它也会运行。这就是你使用`daemon`.

如果您可以发布一个呈现该错误消息的代码示例，我们可以更具体......

# python - 从棋盘的一个角到另一个角找到许多独特的路径，而无需回溯

> ID：15451366
> 
> 赞同：0
> 
> 时间：2013-03-16T16:00:37.427
> 
> 标签：python, algorithm, optimization

我被算法优化困住了。

目标是找出您可以使用多少种不同的方式从棋盘中的 A 点到 B 点，其中：

*   A是左下角的正方形。
*   B是右上角的正方形。
*   棋子每转只能向上或向右移动一个。

这是一个虚拟解决方案：

```
# -*- conding: utf-8 -*-
import time

def solution(n, m, x, y):
   ret = 0
   if x < n-1:
      ret += solution(n, m, x+1, y)
   if y < m-1:
      ret += solution(n, m, x, y+1)
   if x == n-1 and  y == m-1:
     ret = 1
   return ret

def wrapper(n, m):
    start = time.time()
    reponse = solution(n, m, 0, 0)
    stop = time.time()
    print "Response: %dx%d = %d\nTime : %f\n" % (n, m, reponse, stop-start)

if __name__ == "__main__":
    for i in range(10):
        wrapper(i+1,i+1)
    #wrapper(7,7)
    #wrapper(10,10)
    #wrapper(100,100)
    #wrapper(1000,1000)
    #wrapper(10000,10000) <- way too slow 
```

虽然我留在小棋盘上，但它工作得很好并且结果是相关的。但我的目标是为 10000x10000 板找到解决方案。

有什么男孩有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T16:10:07.800

可以这样想：由于你的点 A 和 B 在同一个地方，你必须移动相同数量的 UP 和 RIGHT，但顺序会有所不同。所以你需要找到不同组合的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T23:36:48.103

# 动态规划：O(N)

它已经提到，该问题通过使用[帕斯卡三角形](http://en.wikipedia.org/wiki/Pascal%27s_triangle)及其与[二项式系数](http://en.wikipedia.org/wiki/Binomial_coefficient)的关系有一个解决方案。[Catalan number](http://en.wikipedia.org/wiki/Catalan_number)的条目也很好地说明了*n* × *n*的情况。

# *n* × *n*例

通过利用上述资源，您可以得出结论，对于大小为*n* × *n*的网格，您需要计算 C(2n - 2, n - 1)。您可以通过将网格旋转 45 度并映射帕斯卡三角形来仔细检查它。

实际上，直接计算这个数字需要以一种幼稚的方式计算最多 3 个不同的阶乘，这是一项非常昂贵的任务。如果你可以预先计算它们，那么这里就没有讨论了，你可以说这个问题的复杂度为 O(1)。如果您对预先计算的方式不感兴趣，那么您可以继续阅读。

您可以使用动态规划 (DP) 来计算这样的不祥数字。这里的诀窍是以更小的步骤执行操作，这根本不需要您计算大的阶乘数。

也就是说，要计算 C(n, k)，您可以先将自己置于 C(n, 1) 处，然后步行到 C(n, k)。让我们首先根据 C(n, k - 1) 定义 C(n, k)。

```
C(n, k) = n! / k! * ( n - k )!                            ; k! = (k - 1)! * k
        = n! / (k - 1)! * k * (n - k)!                    ; (n - k)! = (n - k + 1)! / (n - k + 1)
        = n! * (n - k + 1) / (k - 1)! * k * (n - k + 1)!  ; C(n, k - 1) = n! / (k - 1)! * ( n - k + 1 )!
        = C(n, k - 1) * (n - k + 1) / k 
```

基于此，您可以在 Python 中定义一个计算 C(n, k) 的函数，如下所示：

```
def C(n, k):
    """
    Calculate C(n, k) using Dynamic Programming.
    C(n, k) = C(n, k - 1) * (n - k + 1) / k
    """
    C = 1
    for ki in range(1, k + 1):
        C = C * (n - ki + 1) / ki
    return C 
```

它以线性时间运行，O(N)。

对于*n* × *n*情况，您需要计算 C(2n - 2, n - 1)。

```
>> print "Response: %dx%d = %d" % (n, n, C(2 * n - 2, n - 1),)
Response: 10000x10000 = 5... 
```

# *n* × *m*情况

对于一般的*n* × *m*情况，您只需要计算 C(n + m - 2, m - 1)。

```
>> print "Response: %dx%d = %d" % (n, m, C(n + m - 2, m - 1),)
Response: 10000x10000 = 5... 
```

最后但并非最不重要的一点是，[您可以在此处查看 Ideone 的实时示例。](http://ideone.com/BVHNJT)

# 计时

我针对以下网格大小运行了算法。

```
 N x N      | Response's Length |   Time
-----------------+-------------------+-----------
      1 x 1      |           1 chars |  0.000001
     10 x 10     |           5 chars |  0.000004
    100 x 100    |          59 chars |  0.000068
   1000 x 1000   |         600 chars |  0.002207
  10000 x 10000  |        6018 chars |  0.163647
 100000 x 100000 |       60203 chars | 40.853971 
```

由于涉及的数量非常多，似乎超过 100 000 x 100 000 网格大小的操作变得异常昂贵。不过没什么好惊讶的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T16:11:42.723

您不需要为此使用算法。只是数学。这是需要考虑的事情：当您在右上角时，您没有任何不同的选择。让我们把它算为零。当你在右上角时，你唯一的选择就是向右走（一个选项），因为你不能回溯。当您位于右上角的下方时，您唯一的选择就是向上。让我们把它映射出来

```
... 1 0
..... 1 
```

目标角向左/向下的角呢？从那里，有两条路到拐角处（到达邻居的选项总和）：您可以向右走：

```
... 1 0
....2 1 
```

扩展我们总是用边缘扩展的边缘：一旦你在顶部，只有一种方法可以到达右上角：

```
...1 1 1 0
...... 2 1
........ 1
........=1 
```

但是每个非边缘选择都是北部和东部邻居的数字之和：

```
...1 1 1 0
.....3 2 1
.......3 1
........ 1 
```

等等。希望这能让您开始解决问题。

对此也有不同的思考方式。给定一个 NxN 棋盘，您必须进行 2N 次移动才能从一个角移动到另一个角。这些移动中的 N 个是向北移动，N 个是向东移动。问题是：在一个 2N 长的字符串中，可以有多少*种不同*的 N 东移和 N 北移组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T16:52:49.703

您正在寻找帕斯卡三角形。维基[百科链接](http://en.wikipedia.org/wiki/Pascal%27s_triangle)甚至提到了你的确切问题

# php - 作曲家不自动加载

> ID：15451371
> 
> 赞同：0
> 
> 时间：2013-03-16T16:01:20.573
> 
> 标签：php, namespaces, tumblr, autoload, composer-php

我按照作曲家的说明成功安装了作曲家。我想使用 tumblr 全新的[php api 客户端](https://packagist.org/packages/tumblr/tumblr)。

我的文件夹结构：

```
vendor/
composer.json
composer.lock
myfile.php 
```

`composer.json`：

```
{
    "require": {
        "tumblr/tumblr": "0.0.2"
    }
} 
```

`myfile.php`：

```
require 'vendor/autoload.php';
$client = new Tumblr\API\Client(CONSUMER_KEY, CONSUMER_SECRET); 
```

使用安装`php composer.phar install`也很有效。但是执行`myfile.php`的时候找不到类。

致命错误：在第 9 行的 [..]/htdocs/tumblr/myfile.php 中找不到类 'Tumblr\API\Client'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:52:35.647

一个新版本的 tumblr.php 已经发布，修复了这个问题。感谢@igorw。

# c# - wpf 等待动画加速 ColorAnimation

> ID：15451375
> 
> 赞同：2
> 
> 时间：2013-03-16T16:02:01.007
> 
> 标签：c#, wpf, animation

我发现非常不错的等待动画控件（[http://pastebin.com/HtVyNpxc](http://pastebin.com/HtVyNpxc)）。但是有一个问题是它对系统造成了沉重的负担。这是因为使用了许多 ColorAnimationUsingKeyFrames。有人知道如何改进吗？也许只使用 1 个 ColorAnimationUsingKeyFrames。

```
<UserControl
x:Class="LoadingControl.Control.WA"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
mc:Ignorable="d" 
IsHitTestVisible="False"
>
<UserControl.Resources>

    <Geometry x:Key="Block">
        M291.15499,85.897525
        C291.15499,85.897525
         301.88917,85.87921
         301.88917,85.87921
         301.88917,85.87921
         300.38339,94.355061
         300.38339,94.355061
         300.38339,94.355061
         292.85366,94.355042
         292.85366,94.355042
         292.85366,94.355042
         291.15499,85.897525
         291.15499,85.897525
        Z
    </Geometry>

    <!-- Animations for the individual blocks of the progress ring -->
    <Storyboard x:Key="ProgressAnimation" RepeatBehavior="Forever" Duration="00:00:03.6">

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block0" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#FF000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.4" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#FF000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block1" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:00.2" Value="#FF000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#00000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block2" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#0C000000"/>
            <LinearColorKeyFrame KeyTime="00:00:00.2" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:00.4" Value="#FF000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#0C000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block3" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#19000000"/>
            <LinearColorKeyFrame KeyTime="00:00:00.4" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:00.6" Value="#FF000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#19000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block4" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#26000000"/>
            <LinearColorKeyFrame KeyTime="00:00:00.6" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:00.8" Value="#FF000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#26000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block5" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#3D000000"/>
            <LinearColorKeyFrame KeyTime="00:00:00.8" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:01.0" Value="#FF000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#3D000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block6" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#56000000"/>
            <LinearColorKeyFrame KeyTime="00:00:01.0" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:01.2" Value="#FF000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#56000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block7" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#63000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:01.2" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:01.4" Value="#FF000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#63000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block8" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#72000000"/>
            <LinearColorKeyFrame KeyTime="00:00:01.4" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:01.6" Value="#FF000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#72000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block9" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#7F000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:01.6" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:01.8" Value="#FF000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#7F000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block10" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#8E000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:01.8" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:02.0" Value="#FF000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#8E000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block11" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#9B000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:02.0" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:02.2" Value="#FF000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#9B000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block12" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#AA000000"/>               
            <LinearColorKeyFrame KeyTime="00:00:02.2" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:02.4" Value="#FF000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#AA000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block13" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#B7000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:02.4" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:02.6" Value="#FF000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#B7000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block14" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#C6000000"/>
            <LinearColorKeyFrame KeyTime="00:00:02.6" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:02.8" Value="#FF000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#C6000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block15" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#D3000000"/>
            <LinearColorKeyFrame KeyTime="00:00:02.8" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.0" Value="#FF000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#D3000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block16" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#E2000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:03.0" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.2" Value="#FF000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#E2000000"/>
        </ColorAnimationUsingKeyFrames>

        <ColorAnimationUsingKeyFrames Duration="00:00:03.6" Storyboard.TargetName="block17" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
            <LinearColorKeyFrame KeyTime="00:00:00.0" Value="#EF000000"/>                
            <LinearColorKeyFrame KeyTime="00:00:03.2" Value="#00000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.4" Value="#FF000000"/>
            <LinearColorKeyFrame KeyTime="00:00:03.6" Value="#EF000000"/>
        </ColorAnimationUsingKeyFrames>

    </Storyboard>

</UserControl.Resources>

<UserControl.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
        <BeginStoryboard
            x:Name="ProgressAnimation_BeginStoryboard"
            Storyboard="{StaticResource ProgressAnimation}"
        />
    </EventTrigger>
</UserControl.Triggers>

<Canvas x:Name="LayoutRoot" VerticalAlignment="Top" Height="88" Width="88">

    <Grid Width="10.734" Height="10.004" Canvas.Left="38.614" Canvas.Top="0.331">

        <!-- Block 0 -->
        <Path x:Name="block0" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#00000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="180"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 1 -->
        <Path x:Name="block1" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#0C000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="-160"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 2 -->
        <Path x:Name="block2" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#19000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="-140"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 3 -->
        <Path x:Name="block3" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#26000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="-120"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 4 -->
        <Path x:Name="block4" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#3D000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="-100"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 5 -->
        <Path x:Name="block5" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#56000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="-80"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 6 -->
        <Path x:Name="block6" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#64000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="-60"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 7 -->
        <Path x:Name="block7" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#72000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="-40"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 8 -->
        <Path x:Name="block8" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#80000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="-20"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 9 -->
        <Path x:Name="block9" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" OpacityMask="#8E000000" RenderTransformOrigin="0.5,4.3689" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="0"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 10 -->
        <Path x:Name="block10" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#9C000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="20"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 11 -->
        <Path x:Name="block11" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#AA000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="40"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 12 -->
        <Path x:Name="block12" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#B8000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="60"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 13 -->
        <Path x:Name="block13" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#C6000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="80"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 14 -->
        <Path x:Name="block14" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#D4000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="100"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 15 -->
        <Path x:Name="block15" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#E2000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="120"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 16 -->
        <Path x:Name="block16" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="#F0000000" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="140"/>
            </Path.RenderTransform>
        </Path>

        <!-- Block 17 -->
        <Path x:Name="block17" Fill="#FF5482A1" Stretch="Fill" Data="{StaticResource Block}" RenderTransformOrigin="0.5,4.3689" OpacityMask="Black" VerticalAlignment="Top" Height="10.004">
            <Path.RenderTransform>
                <RotateTransform Angle="160"/>
            </Path.RenderTransform>
        </Path>

    </Grid>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:32:06.157

由于它只是一个加载`Animation`并且你在做后台工作，你可以尝试`Animation`使用`TimeLine` `AttachedProperty`. 这应该可以提高`Animation`后台任务运行时的速度/响应能力

```
 <Storyboard x:Key="ProgressAnimation" Timeline.DesiredFrameRate="30" ........... 
```

此外，将`Resource`所有常见的画笔`Brushes`合并到一个`StaticResource`画笔中也是一个好主意，因此不需要多次创建相同的画笔

# jquery - Redirect All the External Links Except Which I Don't Want To Redirect

> ID：15451377
> 
> 赞同：0
> 
> 时间：2013-03-16T16:02:04.180
> 
> 标签：jquery, http, https, httpwebrequest

Yesterday I asked the similar question, so I get to know how to redirects all the external links to my home page.

```
// when the document is ready
$(document).ready(function() {
    // iterate over all the anchor tags
    $("a").each(function() {
        // if the current link's href doesn't already contain 'www.kownleg.com'
        if (this.href.indexOf('www.kownleg.com') === -1) {
            // change current link to home page
            this.href = 'http://www.kownleg.com';
        }
    });
}); 
```

But now I want to exclude all the links which I don't want to redirect to my home page, like facebook.com & twitter.com, I tried to make another condition for the links which I don't want to redirect, but its not working. Then I tried to change `indexOf()` with `text()` but still not working.

* * *

Here is two codings which I tried, but I failed

```
// when the document is ready
$(document).ready(function() {
    // iterate over all the anchor tags
    $("a").each(function() {
        // if the current link's href doesn't already contain 'www.kownleg.com'
        if (this.href.indexOf('www.kownleg.com') === -1) {
            // change current link to home page
            this.href = 'http://www.kownleg.com';
        }
        if (this.href.indexOf('www.facebook.com') === -1) {
            // change current link to home page
            this.href = 'http://www.facebook.com';
        }
        if (this.href.indexOf('www.twitter.com') === -1) {
            // change current link to home page
            this.href = 'http://www.twitter.com';
        }
    });
}); 
```

Another One:

```
// when the document is ready
$(document).ready(function() {
    // iterate over all the anchor tags
    $("a").each(function() {
        // if the current link's href doesn't already contain 'www.kownleg.com'
        if (this.href.indexOf('www.kownleg.com') === -1) {
            // change current link to home page
            this.href = 'http://www.kownleg.com';
        }
        if (this.href.text('www.facebook.com') === -1) {
            // change current link to home page
            this.href = 'http://www.facebook.com';
        }
        if (this.href.text('www.twitter.com') === -1) {
            // change current link to home page
            this.href = 'http://www.twitter.com';
        }
    });
}); 
```

And all the similar possibilities... but still not work for me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:43:30.820

你可以试试这个：
在 Javascript

```
$(document).ready(function() {
  var allowed_links_array = [
    "www.kownleg.com",
    "www.twitter.com",
    "www.facebook.com"
  ];
  var replacement = [
    "http://www.kownleg.com",
    "http://www.twitter.com",
    "http://www.facebook.com"
  ];
  // iterate over all the anchor tags
  $("a").each(function() {
    var index;
    //get the index of the last part of the href attribute after the /
    index = jQuery.inArray(
      this.href.split('/')[this.href.split('/').length - 1],
      allowed_links_array
    );
    //if the link is in the allowed_links_array then set the href to the right link
    if(index !== -1){
      this.href = replacement[index];
    }
  });
}); 
```

[工作示例](http://plnkr.co/edit/ywM4Ukx8pFHj4Ve4goPJ?p=preview)，您可以检查锚标记以查看 href 更改。
我希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:48:31.800

您需要将其全部包裹在 if 语句中：

```
if(
    (this.href.indexOf('www.twitter.com')  !== -1) ||
    (this.href.indexOf('www.kownleg.com')  !== -1) ||
    (this.href.indexOf('www.facebook.com') !== -1)
  ){
  //do what you were doing.
} 
```

希望这有帮助。

# javascript - 为什么 javascript 行必须在函数中才能工作？

> ID：15451378
> 
> 赞同：2
> 
> 时间：2013-03-16T16:02:09.547
> 
> 标签：javascript, jquery, asp.net

如果我将此 javascript 放在我的 aspx 页面上，则面板会在按钮单击时按预期显示：

```
 <script type="text/javascript">
 function ShowPopUp() {
     $('#<%= upNewClient.ClientID %>').show();
 }
 </script>

 <asp:Button ID="btnNewClient" runat="server" OnClientClick="javascript: ShowPopUp(); return false;" /> 
```

但是，如果我尝试在不使用该功能的情况下执行此操作，则它不起作用：

```
<asp:Button ID="btnNewClient" runat="server" OnClientClick="javascript: $'(%<= upNewClient.ClientID %>'.show(); return false;"/> 
```

页面闪烁，我的 javascript 控制台中可能出现错误，但它来来去去太快，我无法阅读。

那么，为什么完全相同的代码行不能在函数之外工作呢？

**编辑：** 我已经多次重写了这段代码（我实际上是在后面的代码中尝试这样做），并且在我最初发布之前的时间我打错了它。实际的按钮标签是：

```
<asp:Button ID="btnNewClient" runat="server" Text="Add New Client" OnClientClick="javascript: $('#<%= upNewClient.ClientID %>').show(); return false;" /> 
```

这会在我的 javascript 控制台中快速闪现一个错误，我相信它会说：未捕获的错误：语法错误，无法识别的表达式：#<%= upNewClient.ClientID %>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:04:56.233

您缺少`#`内联的 id 选择器和错误放置的引号..缺少右括号

所以

```
$'(%<= upNewClient.ClientID %>'.show(); 
```

应该

```
$('#<%= upNewClient.ClientID %>').show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T16:06:30.897

您有语法错误。`$'(%<=`应该是`$('#<%=`，你忘记了右括号`$(...)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T16:22:26.553

`<%= ... %>`服务器端控件的属性不支持该语法，因此整个内容都会发送到浏览器：

```
<input type="submit" name="btnNewClient" value="Add New Client"
    onclick="javascript: $('#&lt;%= upNewClient.ClientID %>').show(); return false;"
    id="btnNewClient" /> 
```

因为 jQuery 无法解析表达式，所以会抛出异常。

相反，您可以`OnClientClick`从代码隐藏设置按钮的属性：

```
<asp:Button ID="btnNewClient" runat="server" Text="Add New Client" /> 
```

```
protected override void Render(HtmlTextWriter writer)
{
    this.btnNewClient.OnClientClick =
        "$('#" + this.upNewClient.ClientID + "').show(); return false;";
    base.Render(writer);
} 
```

（将属性设置为`Render`（而不是`OnInit`,`OnLoad`或`OnPreRender`）可防止值不必要地膨胀视图状态。）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-16T16:03:42.957

我认为问题出在语法上，尝试像这样更改它

```
<asp:Button ID="btnNewClient" runat="server" OnClientClick="$('#<%= upNewClient.ClientID %>').show(); return false;"/> 
```

# javascript - Change formatting in Javascript

> ID：15451379
> 
> 赞同：0
> 
> 时间：2013-03-16T16:02:22.630
> 
> 标签：javascript

Hello i am currently running a function in my javascript called 'save' which has the functionality of:

```
function save(){

var oldItems = JSON.parse(localStorage.getItem('itemsArray')) || [];

var newItem = {};
var num = document.getElementById("num").value;

newItem[num] = {
    "methv": document.getElementById("methv").value
    ,'q1': document.getElementById("q1").value,
    'q2':document.getElementById("q2").value,
    'q3':document.getElementById("q3").value,
    'q4':document.getElementById("q4").value,
    'comm':document.getElementById("comm").value
};

oldItems.push(newItem);

localStorage.setItem('itemsArray', JSON.stringify(oldItems)); 
```

and currently the format of this comes out like this:

```
[{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}}] 
```

is there any way i can change this to a format to something like:

{1173627548,dont know, -,-,U,-,} Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:23:00.733

您所要做的就是使用数组而不是对象：

```
newItem = [
    num,
    document.getElementById('methv').value,
    document.getElementById('q1').value,
    document.getElementById('q2').value,
    document.getElementById('q3').value,
    document.getElementById('q4').value,
    document.getElementById('comm').value
]; 
```

# c++ - 枚举类运算符的实现

> ID：15451382
> 
> 赞同：39
> 
> 时间：2013-03-16T16:02:33.967
> 
> 标签：c++, c++11, operator-overloading, enum-class

在讨论[了“枚举类”的递增和递减</a>之后，我想问一下`enum class`类型的算术运算符的可能实现。](https://stackoverflow.com/questions/15450914/incrementation-and-decrementation-of-enum-class)

 [原始问题的示例：

```
enum class Colors { Black, Blue, White, END_OF_LIST };

// Special behavior for ++Colors
Colors& operator++( Colors &c ) {
  c = static_cast<Colors>( static_cast<int>(c) + 1 );
  if ( c == Colors::END_OF_LIST )
    c = Colors::Black;
  return c;
} 
```

有没有办法实现算术运算符而不强制转换为已定义运算符的类型？我想不出来，但选角让我很困扰。演员表通常表明有问题，并且必须有一个很好的理由来使用它们。我希望该语言允许在不强制使用特定类型的情况下实现运算符的实现。](https://stackoverflow.com/questions/15450914/incrementation-and-decrementation-of-enum-class) 

[**2018 年 12 月更新**：一篇关于 C++17 的论文似乎通过允许枚举类变量和基础类型之间的转换至少部分解决了这个问题：](https://stackoverflow.com/questions/15450914/incrementation-and-decrementation-of-enum-class)[http ://www.open-std.org/jtc1/sc22/wg21/文档/论文/2016/p0138r2.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0138r2.pdf)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-16T23:38:40.620

无强制转换的解决方案是使用 switch。但是，您可以使用模板生成伪开关。原理是使用模板列表（或参数包）递归处理枚举的所有值。所以，这是我找到的3种方法。

测试枚举：

```
enum class Fruit
{
    apple,
    banana,
    orange,
    pineapple,
    lemon
}; 
```

## 香草开关[（住在这里）](http://ideone.com/VBZVum)：

```
Fruit& operator++(Fruit& f)
{
    switch(f)
    {
        case Fruit::apple:     return f = Fruit::banana;
        case Fruit::banana:    return f = Fruit::orange;
        case Fruit::orange:    return f = Fruit::pineapple;
        case Fruit::pineapple: return f = Fruit::lemon;
        case Fruit::lemon:     return f = Fruit::apple;
    }
} 
```

## C++03-ish 方法[（住在这里）](http://ideone.com/SYfZKv)：

```
template<typename E, E v>
struct EnumValue
{
    static const E value = v;
};

template<typename h, typename t>
struct StaticList
{
    typedef h head;
    typedef t tail;
};

template<typename list, typename first>
struct CyclicHead
{
    typedef typename list::head item;
};

template<typename first>
struct CyclicHead<void,first>
{
    typedef first item;
};

template<typename E, typename list, typename first = typename list::head>
struct Advance
{
    typedef typename list::head lh;
    typedef typename list::tail lt;
    typedef typename CyclicHead<lt, first>::item next;

    static void advance(E& value)
    {
        if(value == lh::value)
            value = next::value;
        else
            Advance<E, typename list::tail, first>::advance(value);
    }
};

template<typename E, typename f>
struct Advance<E,void,f>
{
    static void advance(E& value)
    {
    }
};

/// Scalable way, C++03-ish
typedef StaticList<EnumValue<Fruit,Fruit::apple>,
        StaticList<EnumValue<Fruit,Fruit::banana>,
        StaticList<EnumValue<Fruit,Fruit::orange>,
        StaticList<EnumValue<Fruit,Fruit::pineapple>,
        StaticList<EnumValue<Fruit,Fruit::lemon>,
        void
> > > > > Fruit_values;

Fruit& operator++(Fruit& f)
{
    Advance<Fruit, Fruit_values>::advance(f);
    return f;
} 
```

## C++11-ish 方法[（住在这里）](http://ideone.com/Htlg0G)：

```
template<typename E, E first, E head>
void advanceEnum(E& v)
{
    if(v == head)
        v = first;
}

template<typename E, E first, E head, E next, E... tail>
void advanceEnum(E& v)
{
    if(v == head)
        v = next;
    else
        advanceEnum<E,first,next,tail...>(v);
}

template<typename E, E first, E... values>
struct EnumValues
{
    static void advance(E& v)
    {
        advanceEnum<E, first, first, values...>(v);
    }
};

/// Scalable way, C++11-ish
typedef EnumValues<Fruit,
        Fruit::apple,
        Fruit::banana,
        Fruit::orange,
        Fruit::pineapple,
        Fruit::lemon
> Fruit_values11;

Fruit& operator++(Fruit& f)
{
    Fruit_values11::advance(f);
    return f;
} 
```

[（C++11-ish 旧版本）](http://ideone.com/1o91Fl)

您可以通过添加一些预处理器来扩展以消除重复值列表的需要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T17:22:04.393

C++ 中的每个枚举运算符都可以在不强制转换为基础类型的情况下编写，但结果会非常冗长。

举个例子：

```
size_t index( Colors c ) {
  switch(c) {
    case Colors::Black: return 0;
    case Colors::Blue: return 1;
    case Colors::White: return 2;
  }
}
Color indexd_color( size_t n ) {
  switch(n%3) {
    case 0: return Colors::Black;
    case 1: return Colors::Blue;
    case 2: return Colors::White;
  }
}
Colors increment( Colors c, size_t n = 1 ) {
  return indexed_color( index(c) + n );
}
Colors decrement( Colors c, size_t n = 1 ) {
  return indexed_color( index(c)+3 - (n%3) );
}
Colors& operator++( Colors& c ) {
  c = increment(c)
  return c;
}
Colors operator++( Colors& c, bool ) {
  Colors retval = c;
  c = increment(c)
  return retval;
} 
```

并且智能编译器将能够将这些转换为直接在基本整数类型上的操作。

*但是在您的接口中`enum class`*转换为基本整数类型并不是一件坏事。运算符是您的`enum class`.

如果你不喜欢这个循环`size_t`并认为它是一个假演员，你可以写：

```
Colors increment( Colors c ) {
  switch(c) {
    case Colors::Black: return Colors::Blue;
    case Colors::Blue: return Colors::White;
    case Colors::White: return Colors::Black;
  }
} 
```

和类似的递减，并实现递增`n`循环作为重复的循环`increment`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-19T05:13:37.857

```
enum class Colors { Black, Blue, White };

Colors operator++(Colors& color)
{
    color = (color == Colors::White) ? Colors::Black : Colors(int(color) + 1);
    return color;
} 
```

[签入 C++ Shell](http://cpp.sh/2phvn)

# python - error: couldn't open .png

> ID：15451387
> 
> 赞同：0
> 
> 时间：2013-03-16T16:03:08.277
> 
> 标签：python, pygame

Can someone help me identify where I went wrong? Thanks. I get: `pygame.error: Couldn't open space.png`. My code is as follows:

```
import random, math, pygame
from pygame.locals import *
pygame.init()
screen = pygame.display.set_mode((800,600))
pygame.display.set_caption("orbit demo") 

space = pygame.image.load("space.png").convert()

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            sys.exit()

    keys = pygame.key.get_pressed()
    if keys[K_ESCAPE]:
        sys.exit()

    #draw backgroud
    screen.blit(space, (0,0))
    pygame.display.flip() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:52:18.007

您可能必须执行以下操作：

```
import pygame
import os

try:
    # load from subfolder 'data' 
    background = pygame.image.load(os.path.join("data","background640x480_a.jpg"))
    ball = pygame.image.load(os.path.join("data","snake.gif"))
except:
    raise UserWarning, "Unable to find the images in the folder 'data' :-( " 
```

这是从 Python Game Book 网站获得的。基本上你告诉它在哪里看（在上面的代码中，它是数据文件夹。如果找不到它，它会报告用户警告。

因此，在我为游戏编写的示例中，我有一个图像文件夹，所以我这样做了

```
self.image = background = pygame.image.load(os.path.join("images","starship.png")).convert() 
```

我是这方面的新手，但阅读表明这就是你的做法。

编辑 - 另一个原因可能是。它是正确的格式（例如 png）还是您将文件命名为其他名称？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T19:38:28.977

尝试指定图像的完整路径，例如：C:/Python34/your_folder/file_name.png

注意：在你的python代码中引用路径不能使用“\”，必须使用“/”，“\”在python中有特定的含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-29T15:41:42.507

对我来说，答案是我没有从包含游戏文件的文件夹中运行命令。我的`.py`文件和`.png`文件都在顶层，所以我`cd`进入并运行并且它工作。

# arduino - Arduino IR door

> ID：15451390
> 
> 赞同：0
> 
> 时间：2013-03-16T16:03:16.420
> 
> 标签：arduino, infrared

i want to make an IR sensor door with DFRobot IRsensor (switch) and Servo. the problem is in the if statement because the digitalread is always changing when there's nothing in front of the IR sensor which is the way it suppouse to be... so it rapidly closing and opening. but i want the door to be open when there's something in front of the sensor and then some delay, then its gonna close if there's something (new) in front of the door.

mycode:

```
 #include <Servo.h> 

Servo myservo;// create servo object to control a servo 
            // a maximum of eight servo objects can be created 
int IRsensor =8;

int pos = 180;    // variable to store the servo position 
int d;
boolean kondisi;

void setup() 
{ 
  myservo.attach(9);  // attaches the servo on pin 9 to the servo object 
  pinMode (IRsensor,INPUT);
  Serial.begin (9600);
} 

void loop() 
 { 
  d = digitalRead (IRsensor);
  bukatutup (d);
  delay (15);
}

void bukatutup(int IR)
{
  Serial.println (IR);
  if (IR == 0 and (kondisi == false))
 {
   pos = 0;
   Serial.println ("terbuka");
  myservo.write (pos);
  kondisi == true;
  delay(1000);
  }
  else if ( IR == 0 and (kondisi == true))
{
   pos = 180;
   Serial.println ("tertutup");
   kondisi == false;
   myservo.write (pos);
   delay (1000);
  }
 } 
```

Thx,

# c++ - 有没有办法强制 OpenGL 标识符从 1 而不是 0 开始？

> ID：15451393
> 
> 赞同：1
> 
> 时间：2013-03-16T16:03:22.870
> 
> 标签：c++, opengl, coding-style, null, indexing

我将 OpenGL 标识符存储在类型的变量中`GLuint`。但我不知道我应该将这些变量初始化为什么值。我想将它们初始化为零，但不幸的是，这是 OpenGL 的有效标识符。

必须在存储 OpenGL 对象之前初始化变量，因为这是稍后异步完成的。那么我可以以某种方式强制 OpenGL 以 1 而不是 0 开始索引吗？或者我应该使用`GLint`并初始化为`-1`？

我想以一种干净的方式解决这个问题。当然，我可以存储一对变量和一个布尔标志或类似的东西。但这将是hacky。你如何看待这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T16:33:51.067

> 我想将它们初始化为零，但不幸的是，这是 OpenGL 的有效标识符。

不，不是。[对于大多数 OpenGL 对象类型，0 表示“不是对象”](http://www.opengl.org/wiki/OpenGL_Object#Object_zero)。唯一具有有效 0 对象的是 FBO（其中 0 表示[默认帧缓冲区](http://www.opengl.org/wiki/Default_Framebuffer)）、变换反馈对象和纹理（您应该将它们*视为*不是对象）。

So just use zero. It's legal to call any `glDelete*` with a zero, and nothing will happen, even if 0 is a valid object for that type.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T16:05:04.537

> 当然，我可以存储一对变量和一个布尔标志或类似的东西。但这将是hacky。你如何看待这个问题？

使用`boost::optional`，这是您所描述的基于模板的实现。[看这里。](http://www.boost.org/doc/libs/1_53_0/libs/optional/doc/html/index.html)

有了它，你可以做这样的事情：

```
boost::optional<GLuint> foo; // Uninitialised
if (foo) // foo evaluates to false
{
    Bar(*foo); // Doesn't execute
} 
*foo = 3; // Initialised
if (foo) // foo evaluates to true
{
    Bar(*foo); // Executes
} 
```

# ruby - Where does `singleton` methods reside in Ruby?

> ID：15451396
> 
> 赞同：2
> 
> 时间：2013-03-16T16:03:26.783
> 
> 标签：ruby, ruby-1.9.3, singleton-methods

I was playing with `singleton class` in my IRB. And doing so tried the below snippets.

```
class Foo ; end
#=> nil
foo = Foo.new
#=> #<Foo:0x2022738>

foo.define_singleton_method(:bar , method(:puts))
#=> #<Method: Object(Kernel)#puts> 
```

Here above I just created a `singleton` method on instance of class `Foo`.

```
foo.bar("hi")
hi
#=> nil
foo.singleton_methods
#=> [:bar]

foo_sing = foo.singleton_class
#=> #<Class:#<Foo:0x2022738
foo_sing.is_a? Class
#=> true
foo_sing.instance_of? Class
#=> true
foo_sing.inspect
#=> "#<Class:#<Foo:0x1e06dc8>>" 
```

In the above I tried to create a `singleton class` on instance of class `Foo`. And also tested if `foo_sing` holds reference to the `singleton class` on instance of class `Foo`.

```
foo_sing.methods(false)
#=> []
foo_sing.methods.include? :bar
#=> false 
```

In the above I was looking if `singleton_method` `bar` is in the `foo_sing` or not.But found it is not present there.Then my question is - ***where does those`singleton_method` reside in Ruby?***

```
foo_sing.new.methods(false)
#TypeError: can't create instance of singleton class
#        from (irb):10:in `new'
#        from (irb):10
#        from C:/Ruby193/bin/irb:12:in `<main>'
class Bas < foo_sing ; end
#TypeError: can't make subclass of singleton class
#        from (irb):16
#        from C:/Ruby193/bin/irb:12:in `<main>' 
```

In the above part I was checking if we can create,instance of `singleton class` or not and subclass of `singleton class`,like regular class. But the answers I found as NO. ***What is the concept or theory or purpose behind it ?***

Again in the following code I can see the that same name methods are being overridden inside a `singleton class`. But when I am searching that method inside the class not found as I asked above.

```
class Foo ; end
#=> nil
foo = Foo.new
#=> #<Foo:0x225e3a0>

def foo.show ; puts "hi" ; end
#=> nil

foo.show
#hi
#=> nil

class << foo ;def show ; puts "hello" ; end ;end
#=> nil

foo.show
#hello
#=> nil 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:31:13.160

你在正确的轨道上。

1）在单例类中查找方法时，您想使用`instance_methods`，而不是`methods`：

```
foo_sing.instance_methods.include? :bar # => true
# or
foo_sing.method_defined? :bar # => true 
```

这有点令人困惑，因为`method_defined?`真的意味着“定义了实例方法？”，而 `methods`真的意味着`singleton methods`......

2) 你不能继承或实例化一个单例类，因为它是一个单例，即只有一个实例。

无论如何，这并不重要，因为您应该将 mixins 用于您想要重用的代码。这些可以包含/添加到任意数量的单例类或普通类中：

```
foo.extend ResuableFunctionality
# or equivalently:
class << foo
  include ReusableFunctionality
end 
```

# php - Java "String... someStrings" equivalent in PHP

> ID：15451398
> 
> 赞同：0
> 
> 时间：2013-03-16T16:03:30.200
> 
> 标签：php, parameters

i was wondering if there is a "String...stringArray" equivalent in PHP, something that can build an array based on "stringArray" parameters, i.e.

Java:

```
public void method1(){
    int aNumber = 4;
    String string1 = "first string";
    String string2 = "second string";
    String string3 = "third string";

    processStrings(aNumber, string1, string2, string3);
    /*
       string1, string2 and string3 will become b = {string1, string2, string3}
       in function "processStrings"
    */
}

public void processStrings(int a, String...b){
    System.out.println(b[0]); //in this case it will print out "first string"
    System.out.println(b[1]); //in this case it will print out "second string"
    System.out.println(b[2]); //in this case it will print out "third string"
} 
```

Is there a way to do the same thing with PHP?

I know i can use

```
function processStrings($a, $b){} 
```

and then call it like this

```
function method1(){
    $myInt = 4;
    $strings = array("first string","second string","third string");
    processStrings($myInt, $strings);
} 
```

But i would like to know if there is a way to pass an undefined number of parameters like i do with Java

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:17:52.233

来自 php 手册：[func_get_args()](http://www.php.net/manual/en/function.func-get-args.php)

```
<?php
function foo()
{
    $numargs = func_num_args();
    echo "Number of arguments: $numargs<br />\n";
    if ($numargs >= 2) {
        echo "Second argument is: " . func_get_arg(1) . "<br />\n";
    }
    $arg_list = func_get_args();
    for ($i = 0; $i < $numargs; $i++) {
        echo "Argument $i is: " . $arg_list[$i] . "<br />\n";
    }
}

foo(1, 2, 3);
?> 
```

虽然你可以做到，但我建议不要在你的函数中定义任何参数，因为当任何已定义的参数被省略时，它会变得非常混乱。

# c# - Unexpected closing connection in transition data from wcf to client

> ID：15451401
> 
> 赞同：1
> 
> 时间：2013-03-16T16:03:41.343
> 
> 标签：c#, .net, wcf, entity-framework-5, ado.net-entity-data-model

I use `WCF` service for implementing getting data from database (using `Entity Framework` and `LINQ` on the service side). But when the service returns data I receive error: `The underlying connection was closed. The connection was closed unexpectedly`. How can I bypass it ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:15:16.683

如果不返回强类型对象，则必须将其更改为强类型对象。当您返回一个对象时，它必须被序列化为 XML。并且序列化器不知道如何序列化一个类型`object`或匿名类型的对象，因为它不知道它必须序列化什么类型的对象或类的属性是什么等。

# mapreduce - Is there a distributed data processing pipeline framework, or a good way to organize one?

> ID：15451408
> 
> 赞同：6
> 
> 时间：2013-03-16T16:04:18.407
> 
> 标签：mapreduce, go, distributed-computing

I am designing an application that requires of a distributed set of processing workers that need to asynchronously consume and produce data in a specific flow. For example:

*   Component A fetches pages.
*   Component B analyzes pages from A.
*   Component C stores analyzed bits and pieces from B.

There are obviously more than just three components involved.

Further requirements:

*   Each component needs to be a separate process (or set of processes).
*   Producers don't know anything about their consumers. In other words, component A just produces data, not knowing which components consume that data.

This is a kind of data flow solved by topology-oriented systems like [Storm](http://storm-project.net/). While Storm looks good, I'm skeptical; it's a Java system and it's based on Thrift, neither of which I am a fan of.

I am currently leaning towards a pub/sub-style approach which uses AMQP as the data transport, with HTTP as the protocol for data sharing/storage. This means the AMQP queue model becomes a public API — in other words, a consumer needs to know which AMQP host and queue that the producer uses — which I'm not particularly happy about, but it might be worth the compromise.

Another issue with the AMQP approach is that each component will have to have very similar logic for:

*   Connecting to the queue
*   Handling connection errors
*   Serializing/deserializing data into a common format
*   Running the actual workers (goroutines or forking subprocesses)
*   Dynamic scaling of workers
*   Fault tolerance
*   Node registration
*   Processing metrics
*   Queue throttling
*   Queue prioritization (some workers are less important than others)

…and many other little details that each component will need.

Even if a consumer is logically very simple (think MapReduce jobs, something like splitting text into tokens), there is a lot of boilerplate. Certainly I can do all this myself — I am very familiar with AMQP and queues and everything else — and wrap all this up in a common package shared by all the components, but then I am already on my way to inventing a framework.

Does a good framework exist for this kind of stuff?

Note that I am asking specifically about Go. I want to avoid Hadoop and the whole Java stack.

Edit: Added some points for clarity.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:40:00.247

因为 Go 有 CSP 通道，我建议 Go 提供了一个特殊的机会来实现一个简单、简洁但完全通用的并行框架。应该可以用更少的代码比大多数现有框架做得更好。Java 和 JVM 不能有这样的东西。

它只需要使用可配置的 TCP 传输来实现通道。这将包括

*   一个写入通道端 API，包括用于读取端的预期服务器的一些通用规范
*   一个读取通道端API，包括监听端口配置和支持`select`
*   编组/解编组胶水以传输数据 - 可能是[编码/gob](http://golang.org/pkg/encoding/gob/)

这种框架的成功验收测试应该是使用通道的程序应该可以跨多个处理器进行分割，并且保持相同的功能行为（即使性能不同）。

Go中有[很多](https://code.google.com/p/go-wiki/wiki/Projects#Networking)现有的传输层网络项目。值得注意的是[ZeroMQ (0MQ)](http://www.zeromq.org/) ( [gozmq](https://github.com/alecthomas/gozmq) , [zmq2](https://github.com/pebbe/zmq2) , [zmq3](https://github.com/pebbe/zmq3) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:06:27.083

我知道您想避免使用 Hadoop+Java，但与其花时间开发自己的框架，不如看看[Cascading](http://www.cascading.org/)。它为底层 MapReduce 作业提供了一层抽象。

[在 Wikipedia 上进行了最佳总结](http://en.wikipedia.org/wiki/Cascading)，*它 [Cascading]**遵循“源-管道-汇”范式**，其中数据从源捕获，遵循执行数据分析过程的可重用“管道”，结果存储在输出文件或“汇”中. 管道的创建独立于它们将处理的数据。一旦绑定到数据源和接收器，它就被称为“流”。这些流可以分组为“级联”，流程调度程序将确保给定的流在其所有依赖项都得到满足之前不会执行。管道和流可以重复使用和重新排序，以支持不同的业务需求。*

您可能还想看看他们的一些示例，[Log Parser](https://github.com/Cascading/cascading.samples/blob/master/logparser/src/java/logparser/Main.java)、[Log Analysis](https://github.com/Cascading/cascading.samples/blob/master/loganalysis/src/java/loganalysis/Main.java)、[TF-IDF](http://www.cascading.org/2012/08/07/cascading-for-the-impatient-part-6/)（**尤其是[这个流程图](http://www.cascading.org/files/2012/08/plumb6.png)**）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:51:58.070

我猜您正在寻找消息队列，例如[beanstalkd](http://kr.github.com/beanstalkd/)、[RabbitMQ](http://www.rabbitmq.com)或[ØMQ](http://www.zeromq.org)（发音为 zero-MQ）。所有这些工具的本质是它们为 FIFO（或非 FIFO）队列提供了 push/receive 方法，有些甚至有 pub/sub。

因此，一个组件将数据放入队列中，另一个组件读取。这种方法在添加或删除组件以及放大或缩小每个组件时非常灵活。

这些工具中的大多数已经拥有 Go（ØMQ 在 Gophers 中非常流行）和其他语言的库，因此您的开销代码非常少。只需导入一个库并开始接收和推送消息。

为了减少这种开销并避免对特定 API 的依赖，您可以编写一个瘦包，它使用其中一个消息队列系统来提供非常简单的推送/接收调用，并在您的所有工具中使用这个包。

# php - 在 php 中使用输出参数调用存储过程

> ID：15451416
> 
> 赞同：1
> 
> 时间：2013-03-16T16:04:46.193
> 
> 标签：php

如何通过php调用具有输出参数的存储过程？

```
$user="root";
$password="";
$database="phppractice";
mysql_connect('localhost:3306',$user,$password);
@mysql_select_db($database) or die( "Unable to select database");

$result = 10;
$query="call VerifyUserNPass(" . $user . "," . $result . ");";
$result = mysql_query($query); 
```

它没有给出正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:29:11.623

> **[调用语法](http://dev.mysql.com/doc/refman/5.0/en/call.html)**
> 
> 对于用提供 MySQL 接口的语言编写的程序， **没有本地方法可以直接从 CALL 语句中检索 OUT 或 INOUT 参数的结果。**要获取参数值，请将用户定义的变量传递给 CALL 语句中的过程，然后执行 SELECT 语句以生成包含变量值的结果集。要处理 INOUT 参数，请在 CALL 之前执行一条语句，将相应的用户变量设置为要传递给过程的值。

因此你需要这样做

```
mysql_connect('localhost:3306',$user,$password);
mysql_select_db($database, $link);

mysql_query("CALL VerifyUserNPass('$user', @result)", $link);
$result = mysql_query("SELECT @result result", $link);
$row = mysql_fetch_assoc($result);
echo $row['result'];
mysql_free_result($result); 
```

如果结果是一个`INOUT`参数，那么您需要在 SP 调用之前设置一个值

```
mysql_query($link, "SET @result = 10"); 
```

*为简洁起见，有意跳过所有错误检查*

# jsf - 如何在多个类实现中使用 CDI 限定符？

> ID：15451422
> 
> 赞同：10
> 
> 时间：2013-03-16T16:05:05.207
> 
> 标签：jsf, jakarta-ee, jsf-2, dependency-injection, cdi

我是 Java EE/JSF 的新手，现在阅读 CDI 限定符 - 更改类实现的可能性。这很好，但我有一个问题。据我了解，我可以使用限定符更改类实现，但我需要在使用此实现的任何地方更改它。在一个地方进行此操作的最佳解决方案是什么？凭借我对 Java EE 的一点了解，我发现了这一点。

假设我们正在创建简单的计算器应用程序。我们需要创建几个类：

1.  `Calculator`（计算器的基本实现）
2.  `ScientificCalculator`（计算器的科学实现）
3.  `MiniCalculator`（潜力最小）
4.  `MockCalculator`（用于单元测试）
5.  限定符`@Calculator`（将指示计算器的实际实现；我应该为每个实现创建限定符吗？）

这是问题。我有四种计算器实现，我想在少数地方使用其中一种，但每次只使用一种（在最初的项目阶段，我将使用`MiniCalculator`，然后`Calculator`以此类推）。如何在注入对象的每个地方更改实现而不更改代码？我是否应该创建负责注入并作为工厂工作的工厂`method injector`？我的解决方案正确且有意义吗？

工厂

```
@ApplicationScoped
public class CalculatorFctory implements Serializable {
    private Calculator calc;

    @Produces @Calculator Calculator getCalculator() {
        return new Calculator();
    }
} 
```

使用计算器的班级

```
public class CalculateUserAge {
    @Calculator
    @Inject
    private Calculator calc;
} 
```

这是正确的解决方案吗？如果我错了或者有更好的解决方案，请纠正我。谢谢！。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-16T16:58:17.233

这里有几个问题。

1.  在整个应用程序中更改所需实现的最佳方法是什么？调查[`@Alternatives`](http://docs.jboss.org/weld/reference/latest/en-US/html/specialization.html)。
2.  每个实现都需要一个限定符吗？不，请参阅[此](https://stackoverflow.com/questions/15231255/understanding-the-necessity-of-type-safety-in-cdi/15313148#15313148)答案以获得冗长而详细的解释。
3.  我应该使用生产者来决定注入哪个实现吗？可能是您想要的解决方案，但我对此表示怀疑。生产者通常用于执行某种无法在构造函数 / 中完成的初始化`@PostConstruct`。您还可以使用它来检查注入点并在运行时决定注入什么。有关一些线索，请参见链接 2。
4.  这个解决方案正确吗？这会起作用，但是您仍然必须弄乱代码才能更改实现，因此请首先考虑 1.。也`@Calculator Calculator`似乎高度冗余。同样，请参见 2 处的链接。

    ```
    @ApplicationScoped
    public class CalculatorFctory implements Serializable {
        private Calculator calc;

        @Produces @Calculator Calculator getCalculator() {
            return new Calculator();
        }
    } 
    ```

**更新：**

*除了*类型之外， CDI 还使用限定符来解决依赖关系。换句话说，只要只有一种类型与注入点的类型匹配，单独的类型就足够了，不需要限定符。当单独的类型还不够时，限定词可以用来消除歧义。

例如：

```
public class ImplOne implements MyInterface {
    ...
}

public class ImplTwo implements MyInterface {
    ...
} 
```

为了能够注入任一实现，您不需要任何限定符：

```
@Inject ImplOne bean; 
```

或者

```
@Inject ImplTwo bean; 
```

这就是为什么我说`@Calculator Calculator`是多余的。如果您为每个实现定义一个限定符，您不会获得太多，还不如只使用类型。说，两个限定符`@QualOne`和`@QualTwo`：

```
@Inject @QualOne ImplOne bean; 
```

和

```
@Inject @QualTwo ImplTwo bean; 
```

上面的例子没有任何收获，因为在前面的例子中已经不存在消除歧义了。

当然，您可以在无法访问特定实现类型的情况下执行此操作：

```
@Inject @QualOne MyInterface bean; // to inject TypeOne 
```

和

```
@Inject @QualTwo MyInterface bean; // to inject TypeTwo 
```

> 但是，当 OP 希望 Calculator 实现由 CDI 管理时，他不应该使用 @Produces。

~~@Avinash Singh - CDI 管理`@Produces`它们返回的任何东西，只要它是调用该方法的 CDI。如果您愿意，请参阅[规范的这一部分。](http://docs.jboss.org/cdi/spec/1.0/html_single/#producermethod)这包括返回 `@...Scoped bean，它将支持依赖注入、生命周期回调等。~~

我在这里忽略了一些细节，所以考虑以下两个：

```
public class SomeProducer {

    @Inject ImplOne implOne;
    @Inject ImplTwo implTwo;
    @Inject ImplThree implThree;

    @Produces
    public MyInterface get() {
        if (conditionOne()) {
            return implOne;
        } else if (conditionTwo()) {
            return implTwo;
        } else {
            return implThree;
        }
    }
} 
```

和

```
public class SomeProducer {

    @Produces
    public MyInterface get() {
        if (conditionOne()) {
            return new ImplOne();
        } else if (conditionTwo()) {
            return new ImplTwo();
        } else {
            return new ImplThree;
        }
    }
} 
```

然后，在第一个示例中，CDI 将管理从生产者返回的内容的生命周期（即`@PostConstruct`和`@Inject`支持），但在第二个示例中，它不会。

回到最初的问题 - 在无需修改源代码的情况下切换实现的最佳方式是什么？假设您希望更改适用于整个应用程序。

```
@Default
public class ImplOne implements MyInterface {
    ...
}

@Alternative
public class ImplTwo implements MyInterface {
    ...
}

@Alternative
public class ImplThree implements MyInterface {
    ...
} 
```

然后， any for any将被注入，`@Inject MyInterface instance`除非`ImplOne`

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
    <alternatives>
        <class>ImplTwo</class>
    </alternatives>
</beans> 
```

被指定，在这种情况下`ImplTwo`将被注入各处。

**进一步更新**

Java EE 环境中确实有一些东西不是由 CDI 管理的，例如 EJB 和 Web 服务。

如何将 Web 服务注入 CDI 托管 bean？真的很简单：

```
@WebServiceRef(lookup="java:app/service/PaymentService")
PaymentService paymentService; 
```

就是这样，您将获得对在 CDI 外部管理的支付服务的有效引用。

但是，如果您不想在`@WebServiceRef(lookup="java:app/service/PaymentService")`任何需要的地方使用完整版怎么办？如果你只想按类型注入呢？然后你在某个地方这样做：

```
@Produces @WebServiceRef(lookup="java:app/service/PaymentService")
PaymentService paymentService; 
```

并且在任何需要引用该支付服务的 CDI bean 中，您都可以`@Inject`像这样简单地使用 CDI：

```
@Inject PaymentService paymentService; 
```

请注意，在定义生产者字段之前，`PaymentService`将无法通过*CDI 方式*进行注入。但它总是可用的*旧方式*。此外，在任何一种情况下，Web 服务都不由 CDI 管理，但定义生产者字段只是使该 Web 服务引用可用于以 CDI 方式注入。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-16T18:12:56.733

如果您想使用工厂方法交换代码中的实现，那么您的工厂方法是管理 bean 而不是 CDI，因此实际上不需要`@Calculator`.

```
 @ApplicationScoped
     public class CalculatorFactory implements Serializable {
     enum CalculatorType{MiniCaculator,ScientificCaculator,MockCalculator};   
     Calculator getCalculator(CalculatorType calctype) {
                switch(calctype)
                  case MiniCaculator : return new MiniCalculator();
                  case ScientificCalculator : new ScientificCalculator();
                  case MockCalculator : new MockCalculator();
                  default:return null;
            }
        }
public class CalculatorScientificImpl {       
    private Calculator calc    =  
          CalculatorFactory.getCaclulator(CaclutorType.ScientificCalculator);
    doStuff(){}
}

public class CalculatorTest {       
    private Calculator calc    =
               CalculatorFactory.getCaclulator(CaclutorType.MockCalculator);
    doStuff(){}
} 
```

*但是 **，如果您希望**使用 @PostConstruct 等对 Caclulator bean 进行 CDI 管理以进行注入和生命周期管理，那么您可以使用以下方法之一。*

**方法1：**

*优点*：您可以避免使用创建注释`@Named("miniCalculator")`

*缺点*：如果名称从 say 更改为 ，编译器不会给出`miniCalculator`错误`xyzCalculator`。

```
@Named("miniCalculator")
class MiniCalculator implements Calculator{ ... }

@ApplicationScoped
public class CalculatorFactory implements Serializable {
    private calc;

    @Inject 
    void setCalculator(@Named("miniCalculator") Caclulator calc) {
        this.calc = calc;
    }
} 
```

**方法 2：推荐**（*如果任何注入失败，编译器会跟踪注入*）

```
@Qualifier
@Retention(RUNTIME)
@Target({FIELD, TYPE, METHOD})
public @interface MiniCalculator{
}

@ApplicationScoped
public class CalculatorFactory implements Serializable {
    private calc;

    @Inject 
    void setCalculator(@MiniCalculator calc) {
        this.calc = calc;
    }
} 
```

**方法 3：** *如果您使用工厂方法来生成对象*。它的生命周期不会由 CDI 管理，但使用 @Inject 注入将正常工作。

```
@ApplicationScoped
public class CalculatorFactory implements Serializable {
    private Calculator calc;    
    @Produces Calculator getCalculator() {
        return new Calculator();
    }
}    
public class CalculateUserAge {
    @Inject
    private Calculator calc;
} 
```

这三种方法都适用于测试，假设你有一个名为 CaculatorTest 的类，

```
class ScientificCalculatorTest{        
    Caclulator scientificCalculator;        
    @Inject 
    private void setScientificCalculator(@ScientificCalculator calc) {
                this.scientificCalculator = calc;
            }        
    @Test
    public void testScientificAddition(int a,int b){
      scientificCalculator.add(a,b);
      ....
    } 
    } 
```

如果您想在测试中使用模拟实现，请执行以下操作，

```
 class CalculatorTest{        
        Caclulator calc;        
        @PostConstruct 
                init() {
                    this.calc = createMockCaclulator();
                }
        @Test
        public void testAddition(int a,int b){
          calc.add(a,b);
          .....
        }
        } 
```

# flash - as3 Flex AIR 如何在 tel calURL 中暂停？

> ID：15451426
> 
> 赞同：1
> 
> 时间：2013-03-16T16:05:24.560
> 
> 标签：flash, apache-flex, air, actionscript-3

我有一些代码可以让我在按下应用程序中的按钮时自动在手机的本机拨号盘中输入电话号码：

```
// ---------------------- CALL SOMEONE!! ------------
 const callURL:String="tel:18002255288,1";
 var targetURL:URLRequest = new URLRequest(callURL);
     navigateToURL(targetURL);
// ------------------------------------------------------ 
```

我知道在手动拨号时插入一个逗号是可能的，它象征着“暂停”

真的，它适用于接听电话的机器。我希望它拨打号码，立即暂停，然后立即拨打电话应该去的地方的分机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:57:58.830

根据[tel: link w/ extension 适用于 iOS 但不适用于 Android](https://stackoverflow.com/questions/12646614/tel-link-w-extension-working-on-ios-but-not-android)，您可以将`p`其用作 iOS 和`,`Android 的暂停字符。

# php - 注销非活动用户

> ID：15451432
> 
> 赞同：0
> 
> 时间：2013-03-16T16:05:49.313
> 
> 标签：php, parameters, timeout, session-cookies

我的网站上有以下代码：

```
session_set_cookie_params(7200, '.website.com', '', false, true); 
```

如果我浏览我的网站，有时我会在两个小时后退出我的网站。例如，如果我要提交一个表单，那会非常令人沮丧。

我的问题是：我该如何解决这个问题？是否可以仅在用户处于非活动状态 2 小时时注销用户？第一个超时值应该是`session_set_cookie_params`多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:35:36.757

尝试这个：

```
$_SESSION['loginTime'] = time();
if($_SESSION['loginTime'] < time()+120*60){ logoutfunction(); } 
```

该`120`部分是您指定的 120 分钟（2 小时）。您可能真的很聪明，并询问用户他们想在注销之前等待多长时间：D

`logoutfunction();`如果用户应该注销（可能使用`session_destroy(); header("Location: http://yourwebsite.com/login.php");`） ，您还需要用您想要发生的任何事情替换

如果您需要更多帮助，请告诉我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:57:51.650

您需要将上次访问者在您的网站上移动的实际时间保存到 SESSION 中。

登录功能：

```
login_user();
save_actual_time_in_session(); 
```

当用户登录时，对于每个页面加载执行：

```
check_if_time_in_session_is_expired(); // if so, do some action, e.g. redirect to login form
save_actual_time_in_session(); 
```

（@Mattios550 解决方案将不起作用，因为在每个 HTTP 请求上`loginTime`，会话中的值都会刷新为实际时间，因此它永远不会过期......）

# eclipse - eclipse：Java ME SDK 插件不起作用

> ID：15451433
> 
> 赞同：1
> 
> 时间：2013-03-16T16:05:55.933
> 
> 标签：eclipse, plugins, java-me

我正在尝试在 Windows XP 上的 Eclipse Juno 中使用 Java ME Platform SDK。

我已按照[本教程](http://goo.gl/26OMv)进行操作：我为 Eclipse 安装了 Java ME SDK 3.2、MTJ 工具包和插件。一切都没有错误地完成，当然我已经重新启动了 Eclipse，但是我看不到任何效果：

说，在这一步从指令：`Select Window > Open Perspective > Other and choose Java ME, then click OK.`

“其他”列表中实际上没有“Java ME”透视图。

或者，这个：`Select Window > Preferences > Java ME and select Device Management, and click Manual Install.`

同样的：我去`Select Window > Preferences`，并且没有“Java ME”项目。

如果我去`Help -> About Eclipse -> Installation details`，那么我会在那里看到已安装的插件：Java ME SDK Demos、Java ME SDK Tools、Mobile Tools for Java Examples、Mobile Tools for Java SDK。

我已经阅读了很多次说明，但我仍然找不到我错过了什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T18:46:35.347

我有同样的问题。经过足够的阅读，我意识到在 Juno 版本中与 Mobile Tools for Java 发生了一些冲突。它适用于 Indigo。

或者，您可以使用 Eclipse Pulsar 为移动平台进行开发。它预装了移动应用程序开发所需的所有工具。

[从http://www.eclipse.org/downloads/packages/pulsar-mobile-developers/heliossr2](http://www.eclipse.org/downloads/packages/pulsar-mobile-developers/heliossr2)下载 Eclipse Pulsar (Helios SSR2) 。

# python - 无法使用 PyPDF 将具有“可流动”单元格的表格写入 PDF

> ID：15451439
> 
> 赞同：1
> 
> 时间：2013-03-16T16:06:31.980
> 
> 标签：python

我有以下代码。如何使其更具动态性：
- 我不必硬编码/指定单元格宽度
- HTML 单元格应该是“可流动的”，这意味着单元格长度会根据数据的大小自动调整。也应该应用“自动换行”
- 列数可以变化
- 我可以从数据库表中获取数据，将其转换为 html 并将表写入 PDF

我尝试搜索，看起来 PyFDF 支持 [http://python.6.n6.nabble.com/PyFPDF-1-54b-HTML-rendering-templates-and-web2py-integration-td2120415.html](http://python.6.n6.nabble.com/PyFPDF-1-54b-HTML-rendering-templates-and-web2py-integration-td2120415.html) 但是看来我必须使用 web2py。有没有办法在不使用 Web 框架的情况下做到这一点？

```
import fpdf as pyfpdf
from fpdf import FPDF, HTMLMixin

class MyFPDF(FPDF, HTMLMixin):
    pass

pdf=MyFPDF()

#First page
#pdf = pyfpdf.FPDF(format='letter')
pdf.add_page()
#set the font
pdf.set_font("Arial", size=10)

#define the html text
html = """<H1 align="center">Summary of Transactions</H1>
<h3>Date:</h3>
<h3>Branch:</h3>"""
html += """
<table border="1" align="center" width="100%">
<thead><tr><th width="20%">Date of Transaction</th><th width="20%">Name of Customer</th><th width="20%">Address</th><th width="20%">Contact Number</th><th width="20%">Status</th></tr></thead>
<tbody>
<tr><td>cell 1hgjhh jhjhjk jhjfsafsafsafsaf</td><td>cell 2</td><td>cell 3</td><td>cell 4</td><td>cell 5</td></tr>
<tr><td>cell 1</td><td>cell 2</td><td>cell 3</td><td>cell 4</td><td>cell 5</td></tr>
"""
html += '<tr><td>' + 'data' + '</td><td>' + 'data' +'</td> <td>' + 'data' +'</td> <td>' + 'data' +'</td><td>' + 'data' +'</td></tr>'
html += """</tbody></table>"""

#write the html text to PDF
pdf.write_html(html)
pdf.output('html.pdf','F') 
```

我想要实现的类似于这里的 Listings.pdf 演示[https://code.google.com/p/pyfpdf/wiki/Web2Py](https://code.google.com/p/pyfpdf/wiki/Web2Py)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:32:30.173

我不确定它是否会有所帮助，但您可能想查看[PyfPDF 模板](https://code.google.com/p/pyfpdf/source/browse/Templates.wiki?repo=wiki)

# php - 在使用基于 php 的 CMS 时确定要编辑的文件

> ID：15451442
> 
> 赞同：1
> 
> 时间：2013-03-16T16:06:45.120
> 
> 标签：php

我正在尝试对网站进行一些编辑。该网站基于 CMS 并在 PHP 上运行。

我有一些 html/css 经验，并且有一本厚厚的 PHP 指南来帮助我。

在我想对网站进行的许多不受 CMS 管理区域控制的编辑中，我想在主导航中添加一个 Facebook 链接。

现在，如果继承别人的 simpe HTMl/CSS 站点，我通常会使用 FF 的 Chrome 中的检查元素功能，然后查看编辑代码的下落。

可能是一个经典的菜鸟问题，但如何用 PHP 做到这一点？如果我右键单击我网站上的导航，我如何知道要编辑哪个 PHP 文件？这里有“最好的方法”吗？

如果它有帮助的话，顺便说一下这个网站。我想在主导航中的 RSS 图标旁边添加（除其他外）一个 Facebook 图标。我只是不知道要编辑哪个文件。

[http://tinyurl.com/byal33m](http://tinyurl.com/byal33m)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:11:57.367

这完全取决于您使用的 CMS。这就像在问 - 我有一个“文字处理器”，我该如何添加图像......

您应该阅读您正在使用的 CMS 附带的文档。它可能会解释文件的位置。

通常，CMS 通常有一个核心目录，其中包含使 CMS 自身工作的文件，您无需对其进行编辑。

然后是一个主题目录，其中包含构成 HTML 的文件，这些文件实际呈现并补充了来自 CMS 的数据。在管理区域，它通常会告诉您您正在使用哪个主题以及它的位置。

Wordpress 是一种流行的 CMS，他们的文档解释了基础知识：[http ://codex.wordpress.org/Using_Themes](http://codex.wordpress.org/Using_Themes)

- 更新

问题与 Ushahidi CMS 有关，该 CMS 的文档指示主题 HTML 位于“主题”子目录中。

[https://wiki.ushahidi.com/display/WIKI/Themes++-+Developers+Guide#Themes-DevelopersGuide-HowdoIinstallatheme%3F](https://wiki.ushahidi.com/display/WIKI/Themes+-+Developers+Guide#Themes-DevelopersGuide-HowdoIinstallatheme%3F)

# java - 显示财务数据的 GWT 表

> ID：15451443
> 
> 赞同：2
> 
> 时间：2013-03-16T16:06:45.087
> 
> 标签：java, validation, gwt, redraw

我需要创建一个具有以下特征的表：

*   13 列：第一列包含不可编辑的文本，其他列包含可编辑或不可编辑的数值，具体取决于行索引
*   3 行：第 1 行包含 int，第 2 行包含双格式为 #,##0.00，第 3 行包含双格式为 #,#0.0%

该表还必须具有可编辑单元格的以下数据验证选项：

*   boolean positive：如果允许正数，则为 true
*   布尔负数：如果允许负数则为真
*   boolean maxEnabled：如果单元格的值必须小于 maxValue，则为 true
*   double maxValue：最大允许值（如果 maxEnabled==true;）

我设法让桌子按照我的意愿行事，我唯一没能开始工作的是：

*   输入成功后，使用我的数字格式格式化新值
*   当用户点击重绘按钮时，获取要重绘的表格

对此的任何帮助将不胜感激。

这是我正在使用的代码：

单元格、列和 FieldUpdater

```
public class DataCell2 extends EditTextCell{
private TableDTO tableData;

public DataCell2(TableDTO tableData){
    this.tableData=tableData;
}

@Override
public void render(com.google.gwt.cell.client.Cell.Context context, String value, SafeHtmlBuilder sb){
    super.render(context,value,sb);

}

@Override
public void onBrowserEvent(Context context, Element parent, String value, NativeEvent event,
        ValueUpdater<String> valueUpdater){

    // If cell non editable exit
    if(!isEditable(context)){
        return;
    }else{
        super.onBrowserEvent(context,parent,value,event,valueUpdater);

    }

}

private boolean isEditable(Context context){
    int row=context.getIndex();
    // int column=context.getColumn();
    return tableData.isRowEditable(row);
}

public class DataColumn2<DataCell2> extends Column<RowDTO,String>{
public int col;

public DataColumn2(int col, Cell<String> cell){
    super(cell);
    this.col=col;
}

@Override
public String getValue(RowDTO object){
    // TODO Auto-generated method stub
    return null;
}

public class LabelColumn2 extends TextColumn<RowDTO>{
public LabelColumn2(){
    super();
}

@Override
public String getValue(RowDTO object){
    return object.getLabel();
}

public class DataUpdater2 implements FieldUpdater<RowDTO,String>{

private CellTable<RowDTO> table;
private DataCell2 dataCell;
// private ProvidesKey<DataItem> KEY_PROVIDER;
protected int col=0;

public DataUpdater2(int col, CellTable<RowDTO> table, DataCell2 dataCell){
    this.dataCell=dataCell;
    this.table=table;
    this.col=col;
}

public void clear(int index){
    // Clear invalid input
    dataCell.clearViewData(index);
    // Redraw the table.
    table.redraw();
}

@Override
public void update(int index, RowDTO object, String value){
    // TODO Auto-generated method stub

} 
```

包含标签的行类和行数据及其数据验证类

```
public class RowDTO{
private final int index;
private Vector<Object> rowData;
private RowValidation validation;
private boolean editable;

public RowDTO(int index, Vector<Object> rowData, int type){
    this.index=index;
    this.rowData=rowData;
    this.validation=buildValidation(index,type);
}

public int getIndex(){
    return index;
}

public Vector<Object> getRowData(){
    return rowData;
}

public RowValidation getValidation(){
    return validation;
}

public String getRowData(int column){
    return rowData.get(column).toString();
}

public String getLabel(){
    return rowData.get(0).toString();
}

public void setRowData(int column, String newVal){
    this.rowData.set(column,newVal);
}

/** Assign a vaildation and editing strategy based on the table type and the row */
private RowValidation buildValidation(int index, int type){
    switch(type){
        case TableDTO.FIXEDCOST:
            switch(index){
                case 0:
                    editable=true;
                    return RowValidation.getPositiveDouble();
                case 1:
                    editable=true;
                    return RowValidation.getPositiveInt();
                case 2:
                    editable=true;
                    return RowValidation.getPositivePercent();
                default:
                    editable=true;
                    return RowValidation.getPositiveDouble();
            }
        default:
            editable=true;
            return RowValidation.getPositiveDouble();
    }
}

public boolean isEditable(){
    return editable;
}

public class RowValidation{

/* Is double (else is int) */
private boolean digit=true;
/* Values permitted */
private boolean positive=true;
private boolean negative=true;
private boolean zero=true;
private boolean maxEnabled=false;
private double maxValue=2;

/** Default constructor: double number, can be positive, negative or zero, no maximum */
public RowValidation(){}

/**
 * @param digit: true if double, false if int
 * @param positive: true if can be positive
 * @param negative: true if can be negative
 * @param zero: true if can be zero
 * @param maxEnabled: true if can has maximum
 * @param maxValue: maximum value if has maximum
 */
public RowValidation(boolean digit, boolean positive, boolean negative, boolean zero, boolean maxEnabled,
        double maxValue){
    this.digit=digit;
    this.positive=positive;
    this.negative=negative;
    this.zero=zero;
    this.maxEnabled=maxEnabled;
    this.maxValue=maxValue;
}

public boolean isDigit(){
    return digit;
}

public boolean isPositive(){
    return positive;
}

public boolean isNegative(){
    return negative;
}

public boolean isZero(){
    return zero;
}

public boolean isMaxEnabled(){
    return maxEnabled;
}

public double getMaxValue(){
    return maxValue;
}

/** Positive or zero Integer */
public static RowValidation getPositiveInt(){
    return new RowValidation(false,true,false,true,false,2);
}

/** Positive or zero double */
public static RowValidation getPositiveDouble(){
    return new RowValidation(true,true,false,true,false,2);
}

/** Positive double belonging to [0,1] */
public static RowValidation getPositivePercent(){
    return new RowValidation(true,true,false,true,true,1);
} 
```

包含行列表的 Table 类：

```
public class TableDTO{
public static final int FIXEDCOST=0;
private ArrayList<RowDTO> rows;
private Vector<String> headers;

public TableDTO(Vector<Vector<Object>> roughData, Vector<String> headers, int type){
    this.headers=headers;
    rows=buildRows(roughData,type);
}

private ArrayList<RowDTO> buildRows(Vector<Vector<Object>> roughData, int type){
    int nb=roughData.size();
    ArrayList<RowDTO> result=new ArrayList<RowDTO>(nb);
    for(int i=0;i<nb;i++){
        result.add(new RowDTO(i,roughData.get(i),type));
    }

    return result;
}

public ArrayList<RowDTO> getRows(){
    return rows;
}

public RowDTO getRow(int index){
    return rows.get(index);
}

public boolean isRowEditable(int index){
    return getRow(index).isEditable();
}

public String getHeader(int column){
    return headers.get(column);
} 
```

将所有东西结合在一起的面板

```
public class TablePanel extends Composite{
private VerticalPanel main=new VerticalPanel();
private HorizontalPanel btns=new HorizontalPanel();
private Button commitButton=new Button("commit");
private Button redrawButton=new Button("redraw");
private List<DataChange> pendingChanges=new ArrayList<DataChange>();
private CellTable<RowDTO> table;
private TableDTO dataDTO;
/**
 * The key provider that allows us to identify data points even if a field changes.
 */
private static final ProvidesKey<RowDTO> KEY_PROVIDER=new ProvidesKey<RowDTO>(){
    @Override
    public Object getKey(RowDTO item){
        return item.getIndex();
    }
};

@SuppressWarnings({"unchecked"})
public TablePanel(Vector<Vector<Object>> roughData, Vector<String> headers, int type){
    dataDTO=new TableDTO(roughData,headers,type);

    // Create a CellTable with a key provider.
    table=new CellTable<RowDTO>(KEY_PROVIDER);
    table.setKeyboardSelectionPolicy(KeyboardSelectionPolicy.ENABLED);

    // Label
    LabelColumn2 nameColumn=new LabelColumn2();
    table.addColumn(nameColumn,"Label");

    redrawButton.addClickHandler(new ClickHandler(){
        @Override
        public void onClick(ClickEvent event){
            // Delete temporary changes
            pendingChanges.clear();
            // Redraw table
            table.setRowData(0,dataDTO.getRows());
            table.redraw();
        }
    });
    commitButton.addClickHandler(new ClickHandler(){
        @Override
        public void onClick(ClickEvent event){
            // Commit the changes.
            for(DataChange pendingChange: pendingChanges){
                pendingChange.doCommit();
            }
            pendingChanges.clear();

            // Push the changes to the views.
            table.setRowData(0,dataDTO.getRows());

            table.redraw();
        }
    });

    // myData.getCol();
    for(int i=1;i<5;i++){
        // Create cell
        DataCell2 dataCell=new DataCell2(dataDTO);
        // Add a column for every data points.

        @SuppressWarnings({"rawtypes"})
        DataColumn2<DataCell2> dataColumn=new DataColumn2(i,dataCell){
            @Override
            public String getValue(RowDTO object){
                String newVal=object.getRowData(col);
                return format(object,newVal);
            }
        };

        // Add a field updater to be notified when the user enters a new value.
        dataColumn.setFieldUpdater(new DataUpdater2(i,table,dataCell){

            @Override
            public void update(int index, RowDTO object, String value){
                // Called when the user changes the value.
                if(isValidValue(index,value)){
                    pendingChanges.add(new DataChange(this.col,object,value));

                    // TODO kill once ok
                    int s=pendingChanges.size();
                    String ss=object.getRowData(col);
                    Window.alert("Value in myData="+ss+", nb pending changes="+s);
                }else{
                    /* clear the view data and redraw the table */
                    this.clear(index);
                    // Alert user: TODO restablish once ok
                    // Window.alert("Invalid input");

                    // TODO kill once ok
                    int s=pendingChanges.size();
                    String ss=object.getRowData(col);
                    Window.alert("Value in myData="+ss+", nb pending changes="+s);
                }
            }
        });
        table.addColumn(dataColumn,dataDTO.getHeader(i));

    }

    // Set the total row count. This isn't strictly necessary, but it affects
    // paging calculations, so its good habit to keep the row count up to date.
    table.setRowCount(dataDTO.getRows().size(),true);

    // Push the data into the widget.
    table.setRowData(0,dataDTO.getRows());

    // Add it to the root panel.
    main.add(table);
    btns.add(commitButton);
    btns.add(redrawButton);
    main.add(btns);
    initWidget(main);
}

/* Formatting */

private String format(RowDTO row, String value){
    RowValidation rv=row.getValidation();
    if(rv.isDigit()){
        if(rv.isMaxEnabled()){
            return formatAsPercent(value);

        }else{
            return formatAsDouble(value);
        }
    }else{
        return formatAsInt(value);
    }
}

private static String formatAsDouble(String val){
    try{
        double value=Double.parseDouble(val);
        NumberFormat fmt=NumberFormat.getDecimalFormat();
        fmt.overrideFractionDigits(2,2);
        String formatted=fmt.format(value);
        return formatted;
    }catch(NumberFormatException e){
        // TODO
        return val;
    }
}

private static String formatAsInt(String val){
    try{
        double value=Double.parseDouble(val);
        NumberFormat fmt=NumberFormat.getDecimalFormat();
        fmt.overrideFractionDigits(0,0);
        String formatted=fmt.format(value);
        return formatted;
    }catch(NumberFormatException e){
        // TODO
        return val;
    }
}

private static String formatAsPercent(String val){
    try{
        double value=Double.parseDouble(val);
        NumberFormat fmt=NumberFormat.getPercentFormat();
        fmt.overrideFractionDigits(2,2);
        String formatted=fmt.format(value);
        return formatted;
    }catch(NumberFormatException e){
        // TODO
        return val;
    }
}

private boolean isValidValue(int index, String data){
    /* if data formatted as pct, convert into double */
    if(data.endsWith("%")){
        data=data.substring(0,data.length()-2);
        try{
            double v=Double.parseDouble(data);
            v=v/100;
            data=Double.toString(v);
        }catch(NumberFormatException e){
            return false;
        }
    }
    RowDTO row=dataDTO.getRow(index);
    RowValidation validation=row.getValidation();
    if(validation.isDigit()){
        double val;
        try{
            val=Double.parseDouble(data);
        }catch(Exception e){
            return false;
        }

        if(val>0&&!validation.isPositive()){ return false; }
        if(val<0&&!validation.isNegative()){ return false; }
        if(val==0&&!validation.isZero()){ return false; }
        if(validation.isMaxEnabled()&&val>validation.getMaxValue()){ return false; }
    }else{
        int val;
        try{
            val=Integer.parseInt(data);
        }catch(Exception e){
            return false;
        }

        if(val>0&&!validation.isPositive()){ return false; }
        if(val<0&&!validation.isNegative()){ return false; }
        if(val==0&&!validation.isZero()){ return false; }
        if(validation.isMaxEnabled()&&val>validation.getMaxValue()){ return false; }
    }

    return true;
}

private class DataChange{
    private final RowDTO object;
    private final String value;
    private final int col;

    public DataChange(int col, RowDTO object, String value){
        this.object=object;
        this.value=value;
        this.col=col;
    }

    public void doCommit(){
        object.setRowData(col,value);
    }
} 
```

以及入口点方法：

```
public class Mpp implements EntryPoint{

/** Entry point method. */

@Override
public void onModuleLoad(){
    int a=3;
    int b=13;

    Vector<Vector<Object>> roughData=new Vector<Vector<Object>>(a);
    Vector<String> headers=new Vector<String>(b);
    Vector<Object> r0=new Vector<Object>(b);
    Vector<Object> r1=new Vector<Object>(b);
    Vector<Object> r2=new Vector<Object>(b);

    r0.add("Amount (double)");
    r1.add("Credit (int)");
    r2.add("Advance (%)");
    headers.add("Col ");

    for(int i=1;i<b;i++){
        headers.add("Col "+(i));
        r0.add(i*1.2);
        r1.add(i);
        r2.add(i/100);
    }
    roughData.add(r0);
    roughData.add(r1);
    roughData.add(r2);

    TablePanel panel=new TablePanel(roughData,headers,TableDTO.FIXEDCOST);
    RootPanel.get().add(panel);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T21:05:41.313

据我所知，您的任务不是显示来自数据库之类的数据，您只是想要一个漂亮的 13 x 3 表中的数据，对吧？在这种情况下，我建议根本不要使用`CellTable`，而只是制作一堆小部件，然后你可以使用，比如`FlexTable`；这应该更容易控制。

# visual-studio-2008 - 错误的条件块被 Intellisense 灰显

> ID：15451447
> 
> 赞同：1
> 
> 时间：2013-03-16T16:06:57.587
> 
> 标签：visual-studio-2008, visual-c++

相当典型的设置：

```
#ifdef MSVC
 ...
#else
 ...
#endif 
```

我知道`MSVC`设置是因为代码运行但 IDE 将错误的部分变灰，所以 Intellisense 也搞砸了块中调用的 vars/methods。

这只是 2010 年前 VC++ 的另一个“删除 NCB”问题，还是有其他修复？

# ruby - attr_accessor 在写入时将 nil 转换为字符串

> ID：15451449
> 
> 赞同：5
> 
> 时间：2013-03-16T16:06:59.450
> 
> 标签：ruby

我有一个数据对象，其中包含用于各种输入的数十个 attr_accessor 字段。我可以以某种方式定义类，以便所有字段的所有设置器将例如将值设置为空字符串而不是尝试的 nil？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T16:26:13.303

这是一个小模块：

```
module NilToBlankAttrAccessor

  def nil_to_blank_attr_accessor(attr)
    attr_reader attr
    define_method "#{attr}=" do |value|
      value = '' if value.nil?
      instance_variable_set "@#{attr}", value
    end
  end

end 
```

只需将其混合：

```
class Foo
  extend NilToBlankAttrAccessor
  nil_to_blank_attr_accessor :bar
end 
```

并使用它：

```
foo = Foo.new
foo.bar = nil
p foo.bar        # => ""
foo.bar = 'abc'
p foo.bar        # => "abc" 
```

**这个怎么运作**

`NilToBlankAttrAccessor#nil_to_blank_attr_accessor`首先通常定义attr_reader：

```
 attr_reader attr 
```

然后它通过定义一个与访问器同名的方法来定义编写器，只是在末尾带有一个“=”。所以，对于属性`:bar`，方法被命名为`bar=`

```
 define_method "#{attr}=" do |value|
      ...
    end 
```

现在它需要设置变量。首先它将 nil 变成一个空字符串：

```
 value = '' if value.nil? 
```

然后使用 instance_variable_set，它执行实例变量赋值，其中实例变量在运行时才知道。

```
 instance_variable_set "@#{attr}", value 
```

Foo 类需要 nil_to_blank_attr_accessor 是类方法，而不是实例方法，因此它使用`extend`而不是`include`：

```
class Foo
  extend NilToBlankAttrAccessor
  ...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:25:43.187

而不是做

```
object.foo = given_input 
```

你应该做

```
object.foo = given_input.nil? ? "" : given_input 
```

或者如果你也想变成`false`，`""`那么

```
object.foo = given_input || "" 
```

# iis-7 - Zend Framework 2 IIS url 重写

> ID：15451455
> 
> 赞同：2
> 
> 时间：2013-03-16T16:07:42.077
> 
> 标签：iis-7, url-rewriting, zend-framework2

我将我的 zend 项目从 Apache 移动到 IIS 7 并设置了 URL Rewrite。主页显示得很好，但没有加载 css 和 javascript。

这是我的重写脚本

```
<?xml version="1.0" encoding="UTF-8"?>
    <configuration>
    <system.webServer>
        <defaultDocument>
            <files>
                <clear />
                <add value="index.php" />
            </files>
        </defaultDocument>
        <rewrite>
            <rules>
                <rule name="Imported Rule 1" stopProcessing="true">
                    <match url="^.*$" />
                    <conditions logicalGrouping="MatchAll">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="public/index.php" />
                </rule>
                <rule name="Imported Rule 1-1" stopProcessing="true">
                    <match url="\.(js|ico|txt|gif|jpg|png|css)$" ignoreCase="false" negate="true" />
                    <action type="Rewrite" url="public/index.php" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

这是原始的 mod_rewrite 规则

```
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]

RewriteCond %{REQUEST_URI}::$1 ^(/.+)(.+)::\2$
RewriteRule ^(.*) - [E=BASE:%1]
RewriteRule ^(.*)$ %{ENV:BASE}index.php [NC,L] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T18:45:28.330

梳理Zend2文档后，找到了这个例子。完美运行！我希望这对其他人有所帮助。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
     <rewrite>
         <rules>
             <rule name="Imported Rule 1" stopProcessing="true">
                 <match url="^.*$" />
                 <conditions logicalGrouping="MatchAny">
                     <add input="{REQUEST_FILENAME}"
                         matchType="IsFile" pattern=""
                         ignoreCase="false" />
                     <add input="{REQUEST_FILENAME}"
                         matchType="IsDirectory"
                         pattern="" ignoreCase="false" />
                 </conditions>
                 <action type="None" />
             </rule>
             <rule name="Imported Rule 2" stopProcessing="true">
                 <match url="^.*$" />
                 <action type="Rewrite" url="index.php" />
             </rule>
         </rules>
     </rewrite>
 </system.webServer>
</configuration> 
```

# algorithm - 红黑树插入：为什么插入时节点会变成红色？

> ID：15451456
> 
> 赞同：8
> 
> 时间：2013-03-16T16:07:52.830
> 
> 标签：algorithm, data-structures, tree, binary-search-tree, red-black-tree

在红黑树属性中不包含任何插入节点颜色的规则，但我们总是插入红色节点。

如果我们插入黑色节点，它是否违反任何属性（4 个规则中的任何规则）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T16:19:26.417

是的！假设您的树中有一个节点：

```
 5 (black) 
```

现在在树中插入一个新的黑色节点：

```
 5 (black)
     \
      9 (black) 
```

现在，树中的每个 root-null 路径都有相同数量的黑色节点的不变量被打破了，因为从左根开始的路径有一个黑色节点，而从右根开始的路径各有两个。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T17:41:19.737

你好像在问两个问题

1）为什么插入时（在标题中）使节点变红？

2）插入为黑色是否违反任何属性？

您似乎还误以为 2) 的“是”答案是 1) 的自动证明。

不是这样！将节点插入为红色*也*可能违反 RB 树属性之一。例如，如果你让红色节点成为另一个红色节点的子节点，你就违反了红色节点只能有黑色子节点的属性。

将其设置为红色的原因是修复子节点属性（通过旋转和重新绘制父/祖父）“更容易”，而不是尝试修复路径长度属性。也许另一个原因是，这就是作者想出的。

也可以通过插入黑色节点而不重新绘制红色来修复树。也许还没有人考虑过。

# c++ - 不正确的输出 RGB 到 HSI 转换

> ID：15451459
> 
> 赞同：1
> 
> 时间：2013-03-16T16:08:11.830
> 
> 标签：c++, opencv, image-manipulation

我正在尝试将 RGB 转换为给定图像的 HSI。但我似乎无法获得正确的输出。强度已经是正确的。但是，每当 R + G + B 不等于 765 时，色相和饱和度一直给出相同的结果，-2147483648。我使用这个计算器检查： [http ://www.had2know.com/technology/hsi-rgb-color- converter-equations.html](http://www.had2know.com/technology/hsi-rgb-color-converter-equations.html) 并使用了这个公式： [http](http://web2.clarkson.edu/class/image_process/RGB_to_HSI.pdf) ://web2.clarkson.edu/class/image_process/RGB_to_HSI.pdf 请指出我做错了什么......谢谢。

```
#include <iostream>
#include <cv.h>
#include <highgui.h>
#include "rgb.h"
#include <cmath>
#include <math.h>
#include <algorithm> 
using namespace std;

int main()
{
  char infname[256];

  cout << "Enter input image  : ";
  cin >> infname;
  IplImage *img = cvLoadImage(infname, 0);
  RgbImage pic(img);
  int H = img->height;
  int W = img->width;

 for (int j=0;j<H;j++) 
 for (int i=0;i<W;i++) {
            const double PI = 4.0*atan(1.0);
        double norm = 0;
        double R =(double) pic[j][i].r;
        double G =(double) pic[j][i].g;
        double B =(double) pic[j][i].b;
        double omega = 0;
        double intensity = 0;
        double hue = 0;
        double saturation = 0;
            double r = 0;
            double g = 0;
            double b = 0;

        //Intensity
        intensity = (double) (R + G + B) / (3.0*255);         

        //norm colours
        norm = sqrt(pow(r,2) + pow(g,2) + pow(b,2));
        r = (double) (R / norm);
        g = (double) (G / norm);
        b = (double) (B / norm);

        //Saturation and Hue
        if (R + G + B == 765) {
            saturation = 0;
            hue = 0;
        }

        else {
            double tmp = min(r, min(g, b));
            saturation = 1.0 - ((3.0 * tmp)/ (double)(r + g + b));
               if (saturation < 0.5 ){
                 saturation = 0;
                    }
                else if (saturation >= 0.5){
                 saturation = 1;
                  }
             }
        if (saturation != 0) {
            omega = 0.5 * ((r-g) + (r-b)) / sqrt(pow ((r-g),2) + (r-b)*(g-b));
            omega = acos(omega);
            if (B <= G) {
                hue = omega;
            }
            else if (B > G) {
                hue = 2 * PI - omega;
            }
        }

        //convert it to degrees
        int resultHue = (int) round((hue * 180.0) / PI);
        int resultSaturation = (int) (saturation*100.0);
        int resultIntensity = (int) round(intensity * 255);

cout<<"Red = "<<R<<", Green = "<<G<<", Blue =  "<<B<<endl;
cout<<"Hue  = "<<resultHue<<", Saturation = "<<resultSaturation<<", Intensity = "<<resultIntensity<<endl;

}

   return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:10:41.587

您`norm`使用`r`,`g`和进行计算`b`，但此时它们始终为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:31:58.283

```
#include <iostream>
#include <cv.h>
#include <highgui.h>
#include "rgb.h"
#include <cmath>
#include <algorithm> 
#include <fstream>
using namespace std;

int main()
{
  char infname[256];
  ofstream outputFile;
  outputFile.open("RGB_HSI.txt");

  cout << "Enter input image  : ";
  cin >> infname;
  IplImage *img = cvLoadImage(infname, 0);
  RgbImage pic(img);
  int H = img->height;
  int W = img->width;

 for (int j=0;j<H;j++) 
 for (int i=0;i<W;i++) {
        double norm = 0;
        double omega = 0;
        double R =(double) pic[j][i].r;
        double G =(double) pic[j][i].g;
        double B =(double) pic[j][i].b;
        double intensity = 0;
        double hue = 0;
        double saturation = 0;
            double r = 0;
            double g = 0;
            double b = 0;
            int resultHue = 0;
            int resultSaturation = 0;
            int resultIntensity = 0;

        //Intensity
        intensity = (double) (R + G + B) / (3.0*255);         

        //norm colours
        norm = sqrt((R*R) + (G*G) + (B*B));
        r = (double) (R / norm);
        g = (double) (G / norm);
        b = (double) (B / norm);

        //Saturation and Hue
        if (R + G + B == 765) {
            saturation = 0;
            hue = 0;
        }

        else {
            double tmp = min(r, min(g, b));
            saturation = 1.0 - ((3.0 * tmp)/ (double)(r + g + b));
               if (saturation < 0.5 ){
                 saturation = 0;
                    }
                else if (saturation >= 0.5){
                 saturation = 1;
                  }
             }
        if (saturation != 0) {
            omega = 0.5 * ((r-g) + (r-b)) / sqrt(((r-g) * (r-g)) + (r-b)*(g-b));
            omega = acos(omega);
            if (B <= G) {
                hue = omega;
            }
            else if (B > G) {
                hue = 2 * M_PI - omega;
            }
        }

        //convert it to degrees
         resultHue = (int) round((hue * 180.0) / M_PI);
         resultSaturation = (int) (saturation);
         resultIntensity = (int) round(intensity * 255);

           if ((R == 0) && (G == 0) && ( B== 0 )) {
              resultHue = 0;
              resultSaturation = 0;
              resultIntensity = 0;
            }

outputFile<<"Red = "<<R<<", Green = "<<G<<", Blue =  "<<B<<endl;
outputFile<<"Hue  = "<<resultHue<<", Saturation = "<<resultSaturation<<", Intensity = "<<resultIntensity<<endl;

}
outputFile.close();
cout << "\nRGB_HSI printed as text file: RGB_HSI.text\n";

   return 0;
    } 
```

# javascript - 为控制台日志格式化 ruby 哈希字符串

> ID：15451460
> 
> 赞同：1
> 
> 时间：2013-03-16T16:08:12.143
> 
> 标签：javascript, ruby-on-rails

我正在编写一个 Rails 应用程序，并且我有一些变量通过我的视图文件打印到我的浏览器控制台。特别是，我创建了一个具有以下格式的 ruby​​ 哈希：

```
{string: [array], string: [array]} 
```

因此，例如，我可能拥有的一个可能的数组是

```
{'nil': [1,2, 3], "124": [4,5], "124/125": [6]} 
```

当它被打印到浏览器控制台时，格式是关闭的。例如，现在我有：

```
{nil=&gt;[1, 2, 3], &quot;124&quot;=&gt;[4, 5], &quot;124/217&quot;=&gt;[6]} 
```

我怎样才能摆脱添加的额外字符？

这是我的实际代码：

```
<% allBranches = Hash.new %>
<% currentBranch = Array.new %>

<% (1..@ancestry.length-1).each do |index| %>
    <% if @ancestry[index] == @ancestry[index-1] %>
        <% currentBranch.push(index) %>
    <% else %>
        <% allBranches[@ancestry[index-1]]=currentBranch %>
        <% currentBranch = Array.new %>
        <% currentBranch.push(index) %>
    <% end %>
<% end %>

<script type="text/javascript">
    console.log("allBranches: <%=allBranches%>");
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:11:41.590

使用`html_safe`.

`console.log("allBranches: <%=allBranches.to_s.html_safe%>");`

如果`allBranches`已经是字符串，则该`to_s`部分是不必要且多余的。

# ios - 有条件地在 UITableViewCell 中显示图像

> ID：15451469
> 
> 赞同：2
> 
> 时间：2013-03-16T16:08:54.157
> 
> 标签：ios, objective-c, uitableview

我试图在 UITableView 的某些单元格中显示图像。这是我的 configureCell 方法：

```
-(void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    StoryInfo *info = [self.fetchedResultsController objectAtIndexPath:indexPath];
    UIImage *ribbon = [UIImage imageNamed:@"ribbon.png"];
    UIImageView *ribbonView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 15, 15)];
    [ribbonView setImage:ribbon];
    [cell addSubview:ribbonView];
    if([[NSNumber numberWithBool:NO] isEqualToNumber:info.visited]) {
        cell.textLabel.textColor = [UIColor colorWithRed:53/255.0 green:53/255.0 blue:52/255.0 alpha:1];
        ribbonView.hidden = NO;
    }
    else {
        cell.textLabel.textColor = [UIColor colorWithRed:128.0/255.0 green:128.0/255.0 blue:128.0/255.0 alpha:1.0];
        ribbonView.hidden = YES;
    }
} 
```

这是 cellForRowAtIndexPath：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // set up the cell...
    [self configureCell:cell atIndexPath:indexPath];

    return cell;
} 
```

这并不完全奏效，因为起初，所有单元格都将它们绘制为ribbonView，而不管`info.visited`. 我已经通过了 if/else 并且我看到了它被击中的隐藏代码。但是，如果我离开列表，然后返回，则可以看到正确的功能区状态。滚动表格视图会再次破坏它。

不过，字体颜色总是正确的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T16:41:59.847

如果您正在重用单元格，那么很可能您正在向`ribbonView`单元格添加多个子视图，因此即使`info.visited`当前`indexPath`为`NO`，单元格上仍有另一个ribbonView 剩余，您仍然可以看到。

要做的事情是确保您只有一个`ribbonView`子视图，这可以通过`ribbonViews`在配置方法中删除旧的来完成，或者通过子类化`UITableViewCell`并向单元格添加`ribbonView`属性来更好地完成，该属性被设置一次并添加到单元格的视图层次结构中一次，然后您可以访问并设置`hidden`为`NO`或`YES`在配置方法中。

编辑：单元格文本颜色将始终正确，因为您正在更改`UILabel`单元格视图层次结构中的一个实例的颜色。`UILabel`如果您的配置方法在每次配置时向单元格添加一个新的子视图，我希望您会看到相同的错误行为。

编辑：代码尝试

```
-(void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    static NSInteger ribbonTag = 12345;
    StoryInfo *info = [self.fetchedResultsController objectAtIndexPath:indexPath];
    // re-use a ribbonView if one's already been added to this cell
    UIImageView *ribbonView = [cell.contentView viewWithTag:ribbonTag];
    if (!ribbonView){
       ribbonView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 15, 15)];
       ribbonView.tag = ribbonTag;
       UIImage *ribbon = [UIImage imageNamed:@"ribbon.png"];
       [ribbonView setImage:ribbon];
       // add subviews to contentView
       [cell.contentView addSubview:ribbonView];
    }
    if([[NSNumber numberWithBool:NO] isEqualToNumber:info.visited]) {
        cell.textLabel.textColor = [UIColor colorWithRed:53/255.0 green:53/255.0 blue:52/255.0 alpha:1];
        ribbonView.hidden = NO;
    }
    else {
        cell.textLabel.textColor = [UIColor colorWithRed:128.0/255.0 green:128.0/255.0 blue:128.0/255.0 alpha:1.0];
        ribbonView.hidden = YES;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:20:41.717

如果你`dequeueReusableCellWithIdentifier:forIndexPath:`在`tableView:cellForRowAtIndexPath:`方法中使用。每次重新使用一个单元格时，您都会创建一个新的 UIImageView 并将其放在最后一个上。

但是要解决这个问题，您不需要子类化。还没有，因为你的细胞仍然很简单。如果你想添加更多的子视图，那么子类化是唯一的选择。

我能想到的一种解决方案是：

```
-(void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    StoryInfo *info = [self.fetchedResultsController objectAtIndexPath:indexPath];

    UIImageView *ribbonView = nil;

    //My code:
    for ( UIView *childView in cell.subviews ) {
        if([childView isKindOfClass:[UIImageView class]] {
            ribbonView = childView;
            break;
        }
    }
    //Note: this doesnt work if you have more than one UIImageView in your cell. 
    if(ribbonView == nil) {
        UIImage *ribbon = [UIImage imageNamed:@"ribbon.png"];
        ribbonView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 15, 15)];
        [ribbonView setImage:ribbon];
        [cell addSubview:ribbonView];
    }
    //Ends here.

    if([[NSNumber numberWithBool:NO] isEqualToNumber:info.visited]) {
        cell.textLabel.textColor = [UIColor colorWithRed:53/255.0 green:53/255.0 blue:52/255.0 alpha:1];
        ribbonView.hidden = NO;
    }
    else {
        cell.textLabel.textColor = [UIColor colorWithRed:128.0/255.0 green:128.0/255.0 blue:128.0/255.0 alpha:1.0];
        ribbonView.hidden = YES;
    }
} 
```

试试看，告诉我它是否有效。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:55:45.767

这绝对是实施中的一个问题

```
tableView:cellForRowAtIndexPath: 
```

你需要经常打电话

```
dequeueReusableCellWithIdentifier:forIndexPath: 
```

然后调用您的配置方法

```
configureCell:atIndexPath:(NSIndexPath *)indexPath 
```

**编辑：**

另外，我认为您还需要做`[cell.contentView addSubView:...]`而不是 [cell addSubView:...]

# windows - 具有多行主体的 for 循环

> ID：15451471
> 
> 赞同：1
> 
> 时间：2013-03-16T16:09:13.027
> 
> 标签：windows, for-loop, batch-file, cmd

是否可以定义目录列表，例如*“dir1”、“dir2”*，然后为每个目录执行几个操作，例如：

*   `xcopy C:\test\*.dll D:\%%le_dir%%\dll /Y`

*   `xcopy C:\test\*.exe D:\%%le_dir%%\exe /Y`

*   `le_dir`定义列表中的目录在哪里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T16:27:07.843

试试这个（列表在文本文件中）：

```
for /f "delims=" %%i in (list.txt) do (
xcopy "C:\test\*.exe" "D:\%%i\exe" /Y
xcopy "C:\test\*.dll" "D:\%%i\dll" /Y
) 
```

将目标文件夹放入文本文件中`list.txt`：

```
dir1
dir2
... 
```

Edit1（文件夹在脚本中定义）：

```
set "folders=dir1 dir2 dir3"
for %%i in (%folders%) do (
xcopy "C:\test\*.exe" "D:\%%i\exe" /Y
xcopy "C:\test\*.dll" "D:\%%i\dll" /Y
) 
```

Edit2（如果文件夹名称中有空格）：

```
set "folders="dir 1" "dir 2" "dir 3""
for %%i in (%folders%) do (
xcopy "C:\test\*.exe" "D:\%%~i\exe" /Y
xcopy "C:\test\*.dll" "D:\%%~i\dll" /Y
) 
```

Edit3：添加了“）”。

# python - 当比较不同的数据类型时，我可以让 Python 抛出异常吗？

> ID：15451472
> 
> 赞同：9
> 
> 时间：2013-03-16T16:09:16.203
> 
> 标签：python, exception, types, error-handling

假设我想比较 2 个具有不同数据类型的变量：字符串和整数。我已经在 Python 2.7.3 和 Python 3.2.3 中对其进行了测试，并且都没有抛出异常。比较的结果是`False`。在这种情况下，我可以使用不同的选项配置或运行 Python 以引发异常吗？

```
ks@ks-P35-DS3P:~$ python2
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> a="123"
>>> b=123
>>> a==b
False
>>> 
ks@ks-P35-DS3P:~$ python3
Python 3.2.3 (default, Apr 12 2012, 19:08:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> a="123"
>>> b=123
>>> a==b
False
>>> 
ks@ks-P35-DS3P:~$ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T16:14:43.697

不，你不能。这些项目不相等，那里没有错误。

一般来说，强制你的代码只接受特定类型是*不合常规的。*如果您想创建 的子类`int`，并让它在任何地方都能工作，该`int`怎么办？Python 布尔类型是 的子类`int`，例如 ( `True`== 1, `False`== 0)。

如果你必须有一个例外，你可以做以下两件事之一：

1.  测试它们的类型是否相等并自己引发异常：

    ```
    if not isinstance(a, type(b)) and not isinstance(b, type(a)):
        raise TypeError('Not the same type')
    if a == b:
        # ... 
    ```

    此示例允许 a 或 b 成为其他类型的子类，您需要根据需要缩小范围（`type(a) is type(b)`非常严格）。

2.  尝试*订购*类型：

    ```
    if not a < b and not a > b:
        # ... 
    ```

    在 Python 3 中，当将数值类型与序列类型（例如字符串）进行比较时，这会引发异常。比较在 Python 2 中成功。

    Python 3 演示：

    ```
    >>> a, b = 1, '1'
    >>> not a < b and not a > b
    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
    TypeError: unorderable types: int() < str()
    >>> a, b = 1, 1
    >>> not a < b and not a > b
    True 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:19:58.173

我想不出一种方法来完成它，它不会太难看而无法常规使用。这是 Python 程序员在没有语言帮助的情况下必须小心数据类型的一种情况。

谢天谢地，您没有使用数据类型在字符串和 int 之间静默强制转换的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:11:28.003

您可以定义一个函数来执行此操作：

```
def isEqual(a, b):
    if not isinstance(a, type(b)): raise TypeError('a and b must be of same type')
    return a == b # only executed if an error is not raised 
```

# c# - 获取异步GetReceiveData方法的消息

> ID：15451475
> 
> 赞同：2
> 
> 时间：2013-03-16T16:09:34.470
> 
> 标签：c#, wcf, silverlight, asynchronous, asyncsocket

我有`MainPage`：

```
private void AcceptCallBack(IAsyncResult ar)
{
    try
    {
        ((Service1)ar.AsyncState).EndAccept(ar);
    }
    catch
    {
    }
} 
```

在 service1 中：

```
private void ReceiveCallBack(IAsyncResult ar)
{
   try
   {
       if (buffer != null)
       {...
           string str = System.Text.UTF8Encoding.UTF8.GetString(buffer);
            strReceive = str;
        }                
       worker.BeginReceive(buffer, 0, buffer.Length, SocketFlags.None, new  
       AsyncCallback(ReceiveCallBack), worker);
   }
   catch (SocketException)
   {
   }
}

[OperationContract]
public void Accept(string Ip,int Port)
{
    try
    {
       bind and listen....
    }
    catch
    {                
    }
}

private void AcceptCallback(IAsyncResult ar)
{
    try
    {
      ...
        worker.BeginReceive(buffer, 0, buffer.Length, SocketFlags.None, new      
        AsyncCallback(ReceiveCallBack), worker);
    }
    catch (SocketException)
    {
    }
}

[OperationContract]
public string GetReceiveData()
{                     
    return strReceive;
} 
```

在`MainPage`，我想得到消息，`GetReceiveData`但我不知道如何。

# javascript - 了解 AJAX 历史

> ID：15451479
> 
> 赞同：0
> 
> 时间：2013-03-16T16:10:09.400
> 
> 标签：javascript, ajax

如果这是一个简单的问题，我提前道歉，但我正在阅读有关 Javascript 和 AJAX 的内容，并想进一步了解导致 AJAX 重要性的原因。

根据我的理解，在 AJAX 之前，如果一个网页想要修改它的内容，用户必须刷新/重新加载页面，这会触发一个 HTTP 请求被发送到 Web 服务器。但是，随着 AJAX 的出现，浏览器可以修改其内容，而无需用户实际手动刷新页面 - 相反，可以将 XMLHttpRequest 对象从浏览器发送到服务器以检索更新网页的数据。这可能过于简单化了，但我在高层次上是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:22:38.957

真的 。

Ajax 向服务器发送 XML 请求并根据事件获取 XML 输出。

Ajax 默认是异步的（意味着它不会等待结果到来，而是在结果可用时调用）。

不过，您始终可以使其同步。

它是`callback`获取数据和更新的函数:)

[您可以在此处](http://recurial.com/programming/understanding-callback-functions-in-javascript/)了解有关回调的更多信息

# java - 委托人内部的这个引用

> ID：15451485
> 
> 赞同：5
> 
> 时间：2013-03-16T16:10:56.370
> 
> 标签：java, constructor, stack, this

我正在观看Java 上的**Programming Methodology (Stanford) (CS106A)**课程。在 [第 14 课中，](https://www.youtube.com/watch?v=W8nNdNZ40EQ&list=EC84A56BC7F4A1F852) *Sahami*教授 讲述了 Java 中用于堆栈和堆上的函数和对象的内存分配。

他告诉说，对于在对象上调用的任何方法，都会分配一个堆栈和参数列表，并且**此引用**会在堆栈上分配空间。通过**存储**的引用，Java 能够引用对象的正确实例变量。

![堆栈——调用方法时](../Images/d75f5543ef727c220e3c6c3986a9c90d.png)

但是对于构造函数，在构造对象时，**此引用**与参数列表一起存储。![stack -- 当构造函数被调用时](../Images/0a49d8ada1745c8fa5a12e88e702c702.png)

我的问题是，如果构造函数没有这个引用，那么我们如何在构造函数中使用它

```
public class foo {
private int i;
public foo(int i)
{this.i = i;// where this reference came from}
                 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:14:57.043

`this`只是一个 Java 关键字，它允许您引用当前对象。它可以在任何课程中使用。

使用`this`关键字的目的是防止引用局部变量。

在您的示例中需要它，因为`i = i`它绝对不会做任何事情，因为两者都是对同一个局部变量（而不是类变量）的引用：

[从这里](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)：

> 在实例方法或构造函数中，this 是对当前对象的引用——调用其方法或构造函数的对象。您可以使用 this 从实例方法或构造函数中引用当前对象的任何成员。

**编辑：**

我意识到您可能一直在询问实际的内存地址。

我想

```
class Point
{
  int x, y;
  Point(int x, int y) { this.x = x; this.y = y; }
  void move(int a, int b) { x = a; y = b; }
}
Point p = new Point(3,4);
p.move(1,2); 
```

可能会被翻译成类似：（`this`明确）

```
class Point
{
  int x, y;
  static Point getPoint(int x, int y)
    { Point this = allocateMemory(Point); this.x = x; this.y = y; }
  static void move(Point this, int a, int b) { this.x = a; this.y = b; }
}
Point p = Point.getPoint(3,4);
Point.move(p, 1, 2); 
```

但这一切都在一个低得多的层次上，所以它实际上看起来不会像这样，但它可能只是你思考它的一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:15:44.810

所有这一切都是引用当前对象的类级别变量。
如果`this`不使用关键字，则该变量将存储在方法级别变量中。

```
public class foo {
    private int i;

    public foo(int i) {
        this.i = i; // stores the argument i into the class level variable i
    }

    public foo2(int i) {
        i = i;    // stores the argument i into the argument i
    }
} 
```

# symfony - 获取事件执行的 Symfony2 类的实例

> ID：15451488
> 
> 赞同：1
> 
> 时间：2013-03-16T16:11:10.337
> 
> 标签：symfony

我正在使用事件侦听器运行一些代码：

```
namespace Acme\Bundle\NewBundle\EventListener;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;

class RequestListener
{

    public $value;

    public function onKernelRequest(GetResponseEvent $event)
    {

        $this->value = 1;   

    }

} 
```

在这两种情况下，我需要能够访问类属性（在我的示例中只是 $value）：

(a) 在从路由执行的普通控制器中。

(b) 从 Twig 模板（使用 Twig 渲染命令）。我不想将任何东西传递给 Twig 来执行此操作，因为它会针对每个请求执行操作。

......我该怎么做？我想我需要获取对象的实例，但考虑到它是创建它的事件，我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:19:54.733

类的`attributes`字段`Request`通常用于填充要由代码的其他部分使用的内容。例如，其中一个 Symfony 侦听器在其中设置`_route`参数。

您可以从`$event`对象获取请求：

```
$request = $event->getRequest();
$request->attributes->set('value', 1); 
```

然后你会从控制器中得到它：

```
public function someAction(Request $request)
{
    $value = $request->attributes->get('value');

    // shorter but a bit less effective
    $value = $request->get('value');
} 
```

在树枝中：

```
{{ app.request.attributes.get('value') }} 
```

或者更短但效果稍差：

```
{{ app.request.get('value') }} 
```

PS如果你问你要解决什么而不是*如何**解决*实际上会更有效。您可能会想出一个复杂的非惯用解决方案来解决一个简单而常见的惯用解决方案。

# vb.net - Visual Basic：如何在变量中包含整数？

> ID：15451489
> 
> 赞同：0
> 
> 时间：2013-03-16T16:11:23.890
> 
> 标签：vb.net, string, variables

如果问题有点乏味，我深表歉意，但我想做的是从“R1”、“R2”、“R3”等文本文件中访问内容列表。我是否可以将该名称中的整数作为单独的变量？

所以如果我有...

```
Dim R0 As String = "Hello"
Dim R1 As String = "Goodbye"

Dim RCount As Integer = 0

MsgBox(R & RCount) 'Returns Hello 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:13:54.727

并非没有创建和评估[Expression Tree](http://msdn.microsoft.com/en-us/library/bb882536.aspx)，但您可以使用数组和数组的索引。

```
Dim R(6) as String

R(0) = "Hello"
R(1) = "Goodbye"

Dim RCount as Integer = 0

MsgBox(R(RCount)) 
```

# java - Java Double 获取点/逗号后的所有数字

> ID：15451492
> 
> 赞同：3
> 
> 时间：2013-03-16T16:11:36.640
> 
> 标签：java

这是一个简单的任务，但我无法自己解决它..

我有

```
 double digit1 = 12.1;
    double digit2 = 12.99; 
```

并且需要一种方法给我这个：

```
 anyMethod(digit1); //returns 10
    anyMethod(digit2); //returns 99 
```

我所拥有的是

```
public static void getAfterComma(double digit) {

    BigDecimal bd = new BigDecimal(( digit - Math.floor( digit )) * 100 );
    bd = bd.setScale(4,RoundingMode.HALF_DOWN);
    System.out.println(bd.toBigInteger()); // prints digit1=1 and digit2=99

} 
```

无论如何，我更喜欢整数作为返回类型..有人有快速的解决方案/提示吗？

亲切地

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T16:27:09.760

为什么不简单地使用：

```
int anyMethod(double a){
  //if the number has two digits after the decimal point.
  return (int)((a + 0.001) * 100) % 100;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-16T16:54:42.133

获取 a 的小数部分的一种简单方法`double`是使用模运算符`%`. 但是，您必须考虑浮点运算不精确的事实。例如，

```
System.out.println(12.1 % 1);   // outputs 0.09999999999999964
System.out.println(12.99 % 1);  // outputs 0.9900000000000002 
```

如果你想得到两个十进制数字`int`，这就是我认为你要问的，你可以做到这一点，掩盖浮点问题，如下所示：

```
System.out.println(Math.round((12.1 % 1) * 100));   // outputs 10
System.out.println(Math.round((12.99 % 1) * 100));  // outputs 99 
```

但是，您应该考虑`BigDecimal`沿着您开始的路径走得更远，它使用任意精度算术。你可以这样做：

```
System.out.println(new BigDecimal("12.1").remainder(BigDecimal.ONE));   // outputs 0.1
System.out.println(new BigDecimal("12.99").remainder(BigDecimal.ONE));   // outputs 0.99 
```

如果像以前一样，您想要两个十进制数字，您可以这样做：

```
System.out.println(new BigDecimal("12.1").remainder(BigDecimal.ONE).multiply(new BigDecimal(100)).setScale(2, RoundingMode.HALF_UP).intValue());   // outputs 0.1
System.out.println(new BigDecimal("12.99").remainder(BigDecimal.ONE).multiply(new BigDecimal(100)).setScale(2, RoundingMode.HALF_UP).intValue());   // outputs 0.99 
```

Note that there a couple of differences between these last two methods and the first two: they preserve the sign of the argument, so if you use the final example for -12.99, you'll get -99 back, and they treat the fractional part of an integer as 1, so if you use the final example for 12, you'll get 100 back.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T16:25:30.310

没有必要一直使用`Number`类型。您可以利用`String`作为调解员。

```
String mediator = Double.valueOf(d1).toString();
mediator = mediator.substring(mediator.indexOf('.') + 1);
Integer result = Integer.valueOf(mediator); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T16:21:21.877

试试这个

```
 public static void main(String args[]){
        double a=12.99;
        double b=12.1;

        System.out.println(method(a));
        System.out.println(method(b));
    }

    private static int method(double a) {
        return (int) ((a*100)%100);

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T16:25:23.590

`n`如果我理解正确，您需要在给定数字的点之后返回数字`double`。所以......让我们看看：

```
public int decimalDigits(double x, int n) {
    double ans;
    ans = (x - (int) x) * Math.pow(10, n);
    return (int) ans;
} 
```

完毕。希望这对您有所帮助。

* * *

对于您的具体示例， 'n = 2' 应该可以。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T16:37:24.487

sachin-pasalkar 做到了！小修复，但很好！

```
public static int anyMethod(double a){
      return (int) (a*100)%100;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-16T16:50:11.693

查看此代码在“。”之后返回数字 总是。除了双变量之外没有任何额外的参数。

```
public int anyMethod(double d)
{
    String numString = d+"";
    return Integer.parseInt(numString.substring(numString.indexOf('.')+1));
} 
```

# javascript - 在另一个网站上搜索元素

> ID：15451499
> 
> 赞同：1
> 
> 时间：2013-03-16T16:11:56.090
> 
> 标签：javascript, jquery, html

我想创建一个代码，如果提供的值（例如，在输入框中，通过单击按钮激活检查）已经在选项中（在选择菜单中），它将签入另一个网页源代码，并显示警报如果有的话。

我尝试在 jQuery 中这样做，但我以前从未尝试过，所以我失败了。:/ 也许你知道如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T16:13:44.017

如果您不维护另一个站点，则[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)会阻止它，除非另一个站点通过包含良好的[CORS 标头](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)明确允许它，并且唯一的解决方案是在服务器端进行，您可以在其中查询服务器随心所欲。

当您还维护另一个站点时，这很容易：您只需放置好的 CORS 标头即可让您的第一个站点查询它。

这是一个关于为各种服务器端技术启用跨源请求的好教程：http: [//enable-cors.org/](http://enable-cors.org/)

完成后，您只需查询服务器并分析页面：

```
$.get(otherserverurl, function(html) {
    var myInputVal = $('input[name=somename]', html).val();
    // use the value
}); 
```

# haskell - 为什么分配后签名会改变

> ID：15451501
> 
> 赞同：7
> 
> 时间：2013-03-16T16:11:59.963
> 
> 标签：haskell, ghci

玩弄`ghci`我得到以下表达式：`unlines . map (\(a,b) -> show a ++ " " ++ show b)`

现在，当我通过它检查时，`:t`我得到：

```
> :t  unlines . map (\(a,b) -> show a ++ " " ++ show b)
unlines . map (\(a,b) -> show a ++ " " ++ show b)
  :: (Show a, Show a1) => [(a, a1)] -> String 
```

所以完全符合预期。但是现在，如果我尝试将其分配给某个名称，我会得到一个比原始签名更具体的签名：

```
> let f = unlines . map (\(a,b) -> show a ++ " " ++ show b)
> :t f
f :: [((), ())] -> String 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T16:38:18.733

由于[单态限制](http://www.haskell.org/haskellwiki/Monomorphism_restriction)，形式`x = ...`（无参数）的定义被赋予单态（即非多态）类型，这通常涉及[其他答案中提到的](https://stackoverflow.com/a/15451531/98117)一些默认值。

为防止这种情况发生，请在定义中添加类型签名，或使用`:set -XNoMonomorphismRestriction`. 你可以把它添加到你的[`.ghci`文件](http://www.haskell.org/ghc/docs/latest/html/users_guide/ghci-dot-files.html)中，让它在启动时自动运行，直到[它在未来版本的 GHCi 中被默认禁用](http://hackage.haskell.org/trac/ghc/ticket/3202)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T16:14:52.447

违约规则。

当您在 GHCi 中键入内容时，它会尝试应用默认类型。IIRC，对于它选择的有`Num`约束的东西`Integer`，对于`Fractional`它选择`Double`的东西，以及它选择的所有其他东西`()`。

如果您将其写入 Haskell 源文件并将其加载到 GHCi 中，则不会发生这种情况（我相信）。

我想你也可以说像`default Int`在每个模块的基础上更改默认规则。

# php - cakephp 2.3.x 或 PHP 需要重命名目录中的所有视频文件 - 出现错误

> ID：15451505
> 
> 赞同：1
> 
> 时间：2013-03-16T16:12:32.033
> 
> 标签：php, file, cakephp, video, rename

我在 Mac OSX 上的 MAMP 服务器上使用 CakePHP 2.3.1。当我尝试使用 rename($oldname, $newname); 时遇到问题 因为我总是收到以下错误：

致命错误

错误：已用尽允许的 33554432 字节内存大小（尝试分配 9662464 字节）
文件：/Users/esjenkins/Sites/cakephp/app/View/Layouts/default.ctp
行：56

我尝试将文件夹的权限设置为每个人读/写。

如果我注释掉 rename($oldname, $newname); 对于每个循环中的这两个变量，我可以得到一个回声。举个例子：

$oldname = /Users/esjenkins/Sites/cakephp/app/webroot/files/asdfasf2929.mp4

$newname = /Users/esjenkins/Sites/cakephp/app/webroot/files/2929.mp4

这是我的 View 文件夹文件中名为 list_adjudication.ctp 的 PHP 代码

```
<div class="dances index">
    <h3><?php echo 'Adjudication Files'; ?></h3>
    <?php
    $adjudication_path = APP . 'webroot/files/'; 
    if ($handle = opendir($adjudication_path)) {

        /* This is the correct way to loop over the directory. */
        while (false !== ($entry = readdir($handle))) {
            if ($entry != "." && $entry != ".." && $entry != ".DS_Store" && $entry != "empty") {
            $adj_file_string = "$entry\n"; 
                //echo $adj_file_string . " <br /> <br /> ";
                $rename_adj_file_string = substr($adj_file_string, -9, 8);
                //echo $rename_adj_file_string . " <br /> <br /> ";
                $oldname = $adjudication_path . $adj_file_string;
                $newname = $adjudication_path . $rename_adj_file_string;
                echo $oldname . " | " . $newname . " <br /> <br /> "; 
                rename($oldname, $newname);
            }
        }

        closedir($handle);
    }
    ?> 
```

我有大约 750 个裁决文件需要在上传后重命名。

提前致谢。

更新：尝试在循环中重命名不起作用（根据 thaJeztah 的建议如下）。我能够成功使用 rename($oldname, $newname); 在循环之外。我将更多地尝试将文件名放入数组中，稍后我将报告结果。

解答：我无法让 rename() 在任何循环中工作，即使出于某种原因使用了数组也是如此。但是我确实通过将此代码放入控制器中来使事情正常进行：

```
public function list_adjudication() {
    $adjudication_path = APP . 'webroot/files/';
    $dir = new Folder($adjudication_path);
    $files = $dir->find('.*\.mp4');
    //print_r($files);
    foreach ($files as $file) {
        //$file = new File($dir->pwd() . DS . $file);
        echo $file . " <br /> ";  
        //$contents = $file->read();
        // // $file->write('I am overwriting the contents of this file');
        // // $file->append('I am adding to the bottom of this file.');
        // // $file->delete(); // I am deleting this file
    $newName = substr($file, -8, 8);
    //echo $newName; exit;
    rename($adjudication_path . $file, $adjudication_path . $newName); 
    }
        //$file->close(); // Be sure to close the file when you're done
} 
```

我不确定是否可以将这段代码放在控制器中，或者将它放在模型中是否合适。我对 CakePHP 和一般的编码非常陌生。一旦我过了一个主要的截止日期，我就会回去尝试从头开始学习博客教程，以更好地掌握基础知识。

非常感谢@thaJeztah 再次帮助克服了一个主要障碍。再次拯救我的屁股。非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-16T16:15:42.767

增加 php.ini 中的 memory_limit

您可以通过多种方式增加内存限制，

1.  直接php.ini文件，

    memory_limit = 2048M

2.  通过 .htaccess

    php_value memory_limit 2048M

3.  或使用

    ini_set('memory_limit', '2048M');

在您的应用程序中。

# sql - 查询多个DSN（域名来源名称）

> ID：15451513
> 
> 赞同：0
> 
> 时间：2013-03-16T16:13:11.423
> 
> 标签：sql, sql-server-2008, dsn

一般来说，我是 ODBC 和 DSN 的新手。

我们有一个产品 A，它通过已定义的 DSN D1 访问数据库“T”。

我现在正在编写一个测试应用程序 testA，它可以使用产品 A 的各种功能，并且还需要验证 A 所做的各种数据库条目。

为此，我试图访问相同的 DSN D1（为数据库 T 设置）以从 db 读取并进行必要的验证。

但是，我对此有疑问。我已经设置了 dsn，但是当我使用这个 dsn 执行 SQLConnect 时，我得到一个返回值 -1。（我也没有看到这个返回类型的任何对应值）n

关于这意味着什么以及我做错了什么的任何线索。我们可以让 2 个不同的进程或应用程序连接到同一个 DSN 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:48:12.810

You can test access using a "udl" file. These files are largly misunderstood IMHO. They are simply a script that is used to launch the (db) connection library. You can create them by creating an empty file in notepad and changing the extension to .udl from .txt. You then double click on the file and configuer access to your database. (they launch a build in configeration applet). In my experience if a .udl file connects then any application will connect or 100% there is a problem with the application. If the udl file will not connect, then 100% there is a firewall or something probibiting access to the account being used to try to connect.

# haskell - Haskell中的Websocket客户端？

> ID：15451518
> 
> 赞同：5
> 
> 时间：2013-03-16T16:13:41.583
> 
> 标签：haskell, websocket

我看到很多在 Haskell 中编写 websockets**服务器**的库和示例，但是客户端呢？周围有图书馆吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T16:59:25.570

websockets 包支持客户端应用程序

[http://hackage.haskell.org/packages/archive/websockets/0.7.0.0/doc/html/Network-WebSockets.html#g:12](http://hackage.haskell.org/packages/archive/websockets/0.7.0.0/doc/html/Network-WebSockets.html#g:12)

请参阅示例：

[https://github.com/jaspervdj/websockets/blob/master/example/client.hs](https://github.com/jaspervdj/websockets/blob/master/example/client.hs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T17:00:25.967

该[`websockets`](http://hackage.haskell.org/package/websockets-0.7.3.0)软件包还包含一个[websocket 客户端](http://hackage.haskell.org/packages/archive/websockets/0.7.3.0/doc/html/Network-WebSockets.html#g:12)。使用 启动连接后`connect`，您可以像为服务器编写客户端代码一样，使用[`WebSockets`](http://hackage.haskell.org/packages/archive/websockets/0.7.3.0/doc/html/Network-WebSockets.html#t%3aWebSockets)monad.

# xaml - 通过绑定分配按钮名称时应用程序崩溃

> ID：15451525
> 
> 赞同：0
> 
> 时间：2013-03-16T16:14:08.190
> 
> 标签：xaml, windows-phone-8

我在列表框中有按钮，对于每个按钮，我想提供不同的名称。这就是我在 XAML 中设置绑定的方式：

```
<Button Content="{Binding count}"
        x:Name="{Binding buttonName}"
        Width="55"
        Height="55"
        BorderThickness="3"
        FontSize="18.667"
        Padding="-1,-2,0,0"
        Margin="-400,0,0,0"
        FontWeight="Bold"
        Click="servingButtonClicked" /> 
```

`buttonName``LinkedList<string>`是一个字符串，它作为此列表框的 itemSource存储在 a 中的对象中。

为什么这行不通？

错误：

```
Object reference not set to an instance of an object. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:38:47.030

x:Name 不得通过 DataBinding 打赌 - 这是对象实例的名称，而不是动态名称。

# wpf - 存在多个同级容器时，WPF 如何识别附加属性？

> ID：15451527
> 
> 赞同：0
> 
> 时间：2013-03-16T16:14:34.667
> 
> 标签：wpf, attached-properties

我对 WPF 相当陌生，并且有一个关于附加属性的基本问题。考虑以下代码：

```
 Canvas.SetLeft(myRectangle, 20);
    Canvas.SetTop(myRectangle, 40); 
```

我知道上面调用了 Canvas 类的静态方法。我不明白的是：如果应用程序的主窗口包含两个并排的画布容器，即在层次结构中的同一级别，该怎么办？在这种情况下，WPF 运行时如何不混淆正在引用哪个画布的附加属性？

注意：我自己没有尝试过，因为我无法在主窗口中并排放置两个画布元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:17:37.473

正在设置的附加属性并不特定于单个`Canvas`实例。它只是`Canvas`在特定控件上设置一个已知的属性。所有`Canvas`实例都可以自由访问此属性。

# mongodb - MongoDB 的图形数据库构建器（如 MySQL 的 DBForge）

> ID：15451533
> 
> 赞同：2
> 
> 时间：2013-03-16T16:15:12.427
> 
> 标签：mongodb, database-design

我真的很喜欢 DBForge，因为它能够使用图形 UI 创建数据库方案。

MongoDB有这样的工具吗？

基本上，我正在寻找一种工具来帮助创建干净的 MongoDB 集合和文档。

几周后我将开始一个非常大的项目，需要设计一个包含大量集合的非常庞大的 MongoDB 数据库。因此，为了保持一切井井有条，我希望有一些图形可以查看，而不仅仅是对实体及其属性进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:52:43.100

试试 Mongo Explorer @ [http://mongoexplorer.com/](http://mongoexplorer.com/)，因为它有一些您正在寻找的选项。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:06:04.690

我不知道有任何特定的 MongoDB '模式'设计师。由于集合本身是*无模式的*，因此很难想象它会是什么样子。例如，您可能决定在您的数据库中存储`People`，`Cats`并且`Cars`全部存储在同一个集合中，因为它恰好使通过名称查询它们变得更容易。

通常，当我确实想查看将作为文档保存的对象的图形视图时，我只使用标准的类查看器或实体设计器。

关系对于图形工具来说也很棘手——有时你只有`ObjectId`一个目的。`Name``ObjectId`

您甚至可以想出在 MongoDB 中存储数据以模拟[多重继承的](http://blog.abodit.com/2011/09/dynamic-persistence-with-mongodb-look-no-classes-polymorphism-in-c/)方法。由于大多数图形实体设计器仅支持单继承，因此尝试将它们与 MongoDB 一起使用时会再次遇到问题。

总之，我建议您使用您将使用的语言的任何实体设计器对您的实体进行建模，然后担心如何将它们映射到集合以支持您的查询和更新模式，并根据需要调整它们以对部分数据进行非规范化您需要性能的地方，或者共享一个公共字段（通过接口或继承），以便能够轻松地跨实体类型（例如`string[] Tags`，或`string Name`）进行搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-09T15:20:33.093

[MongoDB 的 UI / GUI 管理工具](https://stackoverflow.com/questions/32085929/ui-gui-admin-tools-for-mongodb)

这在这篇文章中得到了回答。

我正在使用 robomongo，它很好。

最新版本也支持 3.0。

[http://mongodb-tools.com/tool/robomongo/](http://mongodb-tools.com/tool/robomongo/)

[http://robomongo.org/](http://robomongo.org/)

# java - -d 命令同时为 .class 文件创建文件夹

> ID：15451535
> 
> 赞同：0
> 
> 时间：2013-03-16T16:15:20.667
> 
> 标签：java, package, .class-file

我想创建一个文件夹来保存我项目的所有 .class 文件，但我希望它与使用 -d 命令的命令提示符有关。

我的项目目录是这样的：

```
MyProject
  src
    java1.java
    java2.java 
  database 
```

现在我想创建一个包含`.class`我的`src`文件的类文件夹，这个类文件夹应该是“myProject”文件夹的子目录

我可以使用`-d`标志来做到这一点吗？

# c# - 错误未处理异常：System.IndexOutOfRangeException？

> ID：15451541
> 
> 赞同：0
> 
> 时间：2013-03-16T16:15:56.497
> 
> 标签：c#, arrays, if-statement, for-loop, indexing

错误索引超出了数组的范围。程序是从数组中删除重复项我理解错误是第 32 行，在 for 循环的末尾创建了一个额外的元素，但我无法找到一种方法来显示没有重复项的整个数组。prog 要做的是将一个 5 数字输入到一个数组中，然后对它们进行排序，如果它们是重复的，则将其删除。我希望我说清楚了！

```
 using System;

     class duplicate 
     {
        static void Main() 
        {
            const int Array_Size = 5;
            int [] number = new int [Array_Size];
            int i;

    for ( i = 0; i < Array_Size; i++) 
    {
        number[i] = Int32.Parse(Console.ReadLine());
        if (number[i] < 9 || number[i] > 101)
        {
            Console.WriteLine("Enter Number between 10 - 100");
            number[i] = Int32.Parse(Console.ReadLine());
        }
    }

    Array.Sort(number);

    Console.WriteLine("Sorted Array : ");

    for (i = 0; i < Array_Size; i++)
    {
        Console.WriteLine("Element is " + number[i]);
    }

    Console.WriteLine("Duplicate Removed : ");

    for (i = 0; i < Array_Size; i++)
    { 
        if (number[i] != number[i+1])
            Console.WriteLine("Element is " + number[i]);
    }

    Console.ReadLine();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:19:21.487

异常发生在这一行：

```
if (number[i] != number[i+1]) 
```

在循环的最后一次迭代中，该行将解析为：

```
if(number[4] != number[5]) 
```

由于您的数组中只有 5 个项目并且是基于 0 的，因此`number[5]`会导致您的`IndexOutOfRange`异常。

如果您尝试将每个项目与其后的项目进行比较，只需不要检查最终迭代：

```
if(i != Array_Size && number[i] != number[i+1]) 
```

或者只循环到`Array_Size - 1`：

```
for (i = 0; i < Array_Size - 1; i++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:18:11.883

您可以使用 LINQ 从数组中获取不同的值：

```
var distinct = number.Distinct().ToArray(); 
```

您需要`using System.Linq;`在文件之上才能使其正常工作。

并且说清楚：您的异常来自这里：

```
for (i = 0; i < Array_Size; i++)
{ 
    if (number[i] != number[i+1])
        Console.WriteLine("Element is " + number[i]);
} 
```

何时`i == Array_Size -1`（这是最后一次通过）`number[i+1]`不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:24:41.943

当然 Linq 是今天要走的路，但你仍然可以使用老式循环

```
int prev = number[0];
Console.WriteLine("Element is " + prev);
for (int i = 1; i < Array_Size; i++)
{ 
    int cur = number[i];
    if (cur != prev)
    {
        Console.WriteLine("Element is " + cur);
        prev = cur;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T16:19:50.833

这种`if`说法根本不安全

```
for (i = 0; i < Array_Size; i++) {
   if (number[i] != number[i+1])
     ... 
```

因此`i`，循环中的最终值不是数组的合法索引。要解决此问题，只需更改循环上的约束，使其始终是合法索引`Array_Size - 1``i + 1``for``i + 1`

```
for (i = 0; i < Array_Size - 1; i++) 
```

# javascript - 如何使用 javascript 将网页转换为图像并使用 POST 消息将其发送到服务器

> ID：15451542
> 
> 赞同：0
> 
> 时间：2013-03-16T16:16:04.750
> 
> 标签：javascript, image, internet-explorer-8, jboss, solaris

服务器是solaris，它运行jboss。客户端是IE8。不允许使用插件，但如果是 MIT 许可证，则可以使用 jquery 之类的 js 库。我不能说我现在的所有限制，但几乎所有使用 java 和 javascript 的技术都是允许的。

我想做的是将网页转换为图像文件。但不允许打印屏幕和使用 ms paint 或使用免费软件。

我知道 javascript 不允许保存文件。但是在这个受限的环境中，我必须将 IE8 渲染的网页保存到图像文件中。

有没有办法完成如此棘手的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:23:40.953

不，如果没有任何类型的插件，您无法在 IE8 上使用 JavaScript 做到这一点。我认为您可以使用 IE9 来做到这一点`canvas`，但 IE8 没有`canvas`（而且我也不确定我是否可以使用它）。

您*可以*做的是将完整的 HTML`ajax`连同浏览器窗口的宽度和高度一起发送到服务器，然后使用服务器上的“无头”浏览器库来重建页面*可能*的样子并将其保存为图像文件（在服务器上）。但这将是一个近似值。

# mysql - 在 django 中实现 MySQL 年份类型的映射

> ID：15451543
> 
> 赞同：1
> 
> 时间：2013-03-16T16:16:11.053
> 
> 标签：mysql, django, sqldatatypes

MySQL中有[年份](http://dev.mysql.com/doc/refman/5.0/en/year.html)数据类型，django ORM中没有对应的数据字段类型。我可以提供一个自定义字段类来映射一个特定 RDBMS 的数据类型吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:56:34.100

我设法找到了满足我需求的以下解决方案（`models.py`）：

```
from django.core.exceptions import FieldError

class YearField(models.Field):
    def db_type(self, connection):
        if connection.settings_dict['ENGINE'] == 'django.db.backends.mysql':
            return 'year'
        else:
            raise FieldError 
```

然后在模型中使用列数据类型：

```
class Band(models.Model):
    """Music band"""
    class Meta:
        db_table = 'band'
    name = models.CharField(max_length=64)
    active_since = YearField()
    active_until = YearField(null=True)
    genres = models.ManyToManyField(Genre)
    def __unicode__(self):
        return self.name 
```

# java - 根据对象实例显示自定义编辑器的设计模式是什么？

> ID：15451546
> 
> 赞同：2
> 
> 时间：2013-03-16T16:16:38.203
> 
> 标签：java, design-patterns, strategy-pattern, visitor-pattern

我有几个对象都扩展了一个`Shape`基本类。对于我想要显示不同对象的每个对象`editor`，例如 a 与 a`Line`具有不同的要编辑的属性`Rectangle`。

```
class Shape;
class Line extends Shape;
class Rectangle extends Shape;

List<Shape> shapes;

void onEditEvent(Shape shape) {
    new ShapeEditorPopup(shape);
    //how to avoid instanceof checks here
} 
```

对于每个实现，`Shape`只有一个`Editor`实现。我可以在这里使用什么模式：根据形状实现类型 ( `instanceof`) 为形状显示正确的编辑器？

我不希望`Shapes`（域模型）自己知道哪个编辑器是正确的。

`StrategyPattern`不能在这里使用，因为`onEditEvent()`它必须知道形状是哪个实现，并相应地传递策略。

`VisitorPattern`不能在这里使用，因为我将`Shapes`实现某种`interface Visitable`强制他们实现`edit(IEditorVisitor)`方法的实现，并由此污染域模型，其中包含有关如何在 UI 中显示的信息。

我还能在这里做什么？

**更新：**

我如何使用访问者模式的示例（尽管我不喜欢它，因为我必须用`edit(editor)`方法之类的东西“污染”域模型。我想避免这种情况。

```
interface Editable {
    public void edit(IEditor editor);
}

public interface IEditor {
    public void edit(Shape shape);
}

class Line extends Shape implements Editable {  
    @Override
    public void edit(IEditor editor) {
        editor.edit(this);
    }
}

class EditorImpl implements IEditor {
    void edit(Line line) {
        //show the line editor
    }
    void edit(Rectangle rect) {
        //shwo the rectangle editor
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:34:12.373

> VisitorPattern 不能在这里使用，因为我会让 Shapes 实现某种接口 Visitable，这将迫使它们实现 edit(IEditorVisitor) 方法，并由此污染域模型，其中包含有关如何在 UI 中显示的信息。

好吧，不，它不必提供有关如何显示或编辑的域模型信息。它只需要给出它被访问的领域模型知识。

只是不要命名您的访问者界面`IEditorVisitor`，也不要命名`IVisitable`方法`edit`。

访客非常适合这类问题。

我会这样做更像：

```
public interface IVisitableShape {
    void accept(IShapeVisitor v);
}

public interface IShapeVisitor {
    void visit(Line line);
    void visit(Rectangle rectangle);
}

public class Line extends Shape implements IVisitableShape {

    @Override
    public void accept(IShapeVisitor v) {
        v.visit(this);
    }
}

public class EditorImpl implements IShapeVisitor {
    public void visit(Line line) {
        //show the line editor
    }
    public void visit(Rectangle rect) {
        //show the rectangle editor
    }
} 
```

请注意，这本质上相当于您的实现草图，只是更改名称，因此编辑功能仅在编辑器中。

函数名称`accept`和`visit`常用的描述这种模式，并反映模式。它们当然可以更改，但我认为没有必要，而且最好不要将它们明确绑定到编辑功能。

# amazon-web-services - 了解亚马逊产品

> ID：15451547
> 
> 赞同：1
> 
> 时间：2013-03-16T16:16:52.083
> 
> 标签：amazon-web-services, amazon-ec2

我正在做一个项目，并且正处于完成 POC 的阶段，现在想要转向真正的产品。我试图了解亚马逊云产品只是为了看看我是否需要在开发时了解它们。我有很多问题无法从亚马逊网站得到解答。这可能是因为我对整个 Web 服务的事情不熟悉，并且以前从未托管过网站。我希望有人在这里向我解释这一点，就像我是 C 程序员一样:)

我看到亚马逊有很多产品 -

*   EC2
*   弹性块存储
*   简单数据库
*   自动缩放
*   弹性负载平衡

我了解 EC2 是我可以使用的虚拟服务器实例，这些实例可以预装我想要的（比如 Apache + python）。我有以下问题-

*   如果我想要一个自定义实例（比如我为我的项目编写的自定义 apache 模块）。我可以使用确切的模块创建服务器实例，并在下次创建新实例或在 Autoscaling 中将其设为默认值吗？
*   我可以获得 IP 地址来访问它吗？我可以设置我自己的主机名吗？我的意思是我有DNS记录吗？还是 Elastic IP 是什么？
*   如何从外部访问它？SSH？远程桌面？还是完全取决于我如何配置实例？
*   区域间或区域内数据传输是什么意思？数据传输从什么开始？只是人们使用我的实例吗？因此，如果我使用它，那将是我必须为使用它的人支付的费用？
*   AutoScaling 和 Elastic Load Balancing 有什么区别？
*   什么是弹性块存储？是存储吗？如果是这样，我必须担心备份还是他们会照顾它？

关于简单数据库 -

*   看起来使用它的界面与我的常规 SQL 调用不同。我对么？
*   如果是这样，整个开发需要专门为亚马逊量身定制。哪种烂。有更好的选择吗？
*   我得到数据备份还是我必须自己担心？
*   我是否能够使用常规工具连接到数据库来检查数据库（在开发期间或之后）。或者我可以获得亚马逊为它制作的其他工具吗？
*   安全呢？数据库显然位于云场中远离 EC2 实例的某个位置。我的数据库密码通过网络传输，我的所有数据也完全未加密。我不用担心吗？出现这个问题只是因为我不拥有任何硬件。

我真的希望有人在这里指出我正确的方向。

感谢您花时间阅读。

磷

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T17:03:52.263

我刚刚解决了这个问题，在这里我试图回答其中的几个问题，1）AWS EC2 实例不发布预配置的实例，实际上它是由开发人员配置的，并公开提供给用户，以便他们可以使用它。可以是这些实例中的任何一个，或者您可以选择您想要的原始操作系统并相应地对其进行配置并创建它的快照，以便您可以将其用于自动校准。快照成为基础 AMI你的情况。2）您启动的每个实例都会附加一个公共 DNS，如果您是 linux 用户，则可以使用公共 DNS 连接到该实例，如果您是 linux 用户，则可以使用 putty；如果您是 Windows 用户，则可以使用 putty。除此之外，

3)AWS 在世界不同地区拥有数据库。例如，您根据您的客户群部署您的应用程序，如果您的目标客户位于印度以外，那么最近的可用区域是新加坡，AWS 将其称为 ap-southeast-1。每个区域将有多个可用区，例如 ap-southeast-1a 和 ap-southeast-1b，它们是两个不同的数据库和地理部分。Intre 地区是指从 ap-southeast-1a 到 ap-southeast-1b。Inter Region 是指从 ap-southeast-1 到 us-east-1，即北弗吉尼亚数据中心。AWS 从进出带宽中收取费用，相信我没什么。

他们收取每 GB 1/8 美分的费用。这是一件连想都想不到的事情。

4）弹性负载均衡器是集群，它将负载平均分配给跨可用区的所有区域（如果您在多可用区中运行） ELB 位于 AWS EC2 实例之上并定期监控实例运行状况并启用自动扩展

5）为了帮助您了解什么是自动缩放，请阅读此文档[http://aws.amazon.com/autoscaling/](http://aws.amazon.com/autoscaling/)

6）弹性块存储或 EBS 就像硬盘一样，它是可以附加到您的实例的持久数据存储。关于备份是取决于您的用例。我会定期备份 EBS。

7)Simple Db现在改名为dynamo DB是nosql DB，希望大家明白什么是nosql db，它是一个非RDMS db系统。请阅读一些文档以了解 nosql db 是什么。

8）如果你有mysql或oracle db你可以选择RDS，请阅读文档。

9）我个人觉得你是整个云生态系统的新手，你需要先了解云到底是做什么的。

10）您不必对开发进行大量更改，只需确保它在您的本地机器中正常工作，它可以毫不费力地部署到云端。

11）您不必为此使用任何额外的工具，将数据库端点更改为 RDS（如果您使用它），或者在您的 ec2 实例中安装 mysql 并连接到驻留在 ec2 实例中的本地数据库并连接到它,这和你的开发模式一样简单。

12）您不必担心任何安全问题，它是安全的。不要听信神话，我已经使用 AWS 运行 3 年了，我什至不记得有多少应用程序，例如（电子商务、移动商务、社交媒体应用程序）我从未遇到过任何类型的安全问题，而且 aws 允许随心所欲地设置您的安全性。

来吧，快乐的编码。如果您有任何问题，请与我联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T03:20:04.920

上面的答案是对 AWS 的一个很好的总结。只是想补充

AWS 提供完整的数据中心，因此这取决于您要实现的目标。对于初学者，您将需要，

*   EC2 - 这是你的服务器，它带有实例存储，重启时会丢失
*   EBS - 您安装的存储，数据在重新启动后保持不变
*   S3 - 提供存储（RESTful API 位于顶部，成本基于使用情况，而不是 EBS 中的“预置”）
*   数据库 - 可以从提供托管数据库服务的 Amazon RDS 开始，您可以在各种可用数据库之间进行选择。您还可以使用 EC2 + EBS 安装自己的数据库，您必须自己管理数据库。
*   弹性 IP：面向公众的 IP 地址，您可以将您的 DNS 服务器指向此地址。

一种计算价格的好工具， [http://calculator.s3.amazonaws.com/calc5.html](http://calculator.s3.amazonaws.com/calc5.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:11:11.577

需要考虑的其他一些服务包括：

VPC（虚拟私有云）。这是您自己的专用网络。您可以在那里定义子网、路由表和互联网网关。我强烈建议将 VPC 用于多个实例的任何严肃部署。

Glacier - 这将取代您的磁带库来存储备份。

Cloud Formation - 用于实例部署和自动化的绝佳工具。

# java - 数据库编程

> ID：15451548
> 
> 赞同：0
> 
> 时间：2013-03-16T16:16:58.243
> 
> 标签：java, database

如何在java中的SQLite数据库上更具体地限制与数据库的多个特定客户端的并发连接数，是否有我可以覆盖的特定java函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:18:25.870

SQLite 非常有限，但是您可以包装 SQLite 并创建自己的方法来阻止它或仅同步所有方法

# css - CSS - 保持元素的宽度

> ID：15451551
> 
> 赞同：0
> 
> 时间：2013-03-16T16:17:12.737
> 
> 标签：css, dynamic, width

缩放窗口后是否有一个 css 规则使父级`<div>`保持其大小（取决于元素）？为了更清楚，这里有一个例子：

```
<div style="width: 100%; height: 100%;">
    <div style="width: 30px; height: 30px;">
        text1
    </div>
    <div style="width: 60px; height: 30px;">
        text2
    </div>
    <div style="width: 30px; height: 30px;">
        text3
    </div>
</div> 
```

这段代码应该调出一个内部有 3 个较小 div 的 div。现在，当您调整窗口大小时，各个子项将被“分解”成新行。

我怎样才能防止这种行为？使用 a 是`min-width`行不通的，因为我想要动态的宽度，添加和删除子项应该是可能的。我想到的唯一选择是通过 javascript 计算孩子数，然后通过 javascript 设置`min-width`属性。但这应该可以用css处理，我认为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:20:56.343

添加：

```
white-space: nowrap; 
```

到父 div。我认为这将使他们保持在同一条线上。在您提供的示例中，您还需要：

```
display: inline; 
```

在子 div 上。

[http://jsfiddle.net/9dzBy/](http://jsfiddle.net/9dzBy/)

# java - 如何运行此文件删除 main

> ID：15451556
> 
> 赞同：-3
> 
> 时间：2013-03-16T16:18:02.517
> 
> 标签：java, swing, jframe

大家好，我正在从这个站点学习 java。我想在不放 main 的情况下制作 java 文件，以便与其他文件连接。我的意思是我想做这个子文件。那么你们能帮我从这个文件中删除主要内容并运行它吗？

这是我的代码

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;

import javax.swing.BorderFactory;
import javax.swing.JColorChooser;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

/* ColorChooserDemo.java requires no other files. */
public class jptborder extends JPanel{

protected JColorChooser tcc;
protected JLabel banner;

public jptborder() {
super(new BorderLayout());

//Set up the banner at the top of the window
banner = new JLabel("Welcome To this border Example",
JLabel.CENTER);
banner.setForeground(Color.red);
//banner.setBackground(Color.blue);
banner.setOpaque(true);
banner.setFont(new Font("Arial", Font.BOLD, 24));
banner.setPreferredSize(new Dimension(450, 65));

JPanel bannerPanel = new JPanel(new BorderLayout());
bannerPanel.add(banner, BorderLayout.CENTER);
bannerPanel.setBorder(BorderFactory.createTitledBorder("Welcome"));

add(bannerPanel, BorderLayout.CENTER);

}
public static void createAndShowGUI() {
//Create and set up the window.
JFrame frame = new JFrame("jptBorder");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

//Create and set up the content pane.
JComponent newContentPane = new jptborder();
newContentPane.setOpaque(true); //content panes must be opaque
frame.setContentPane(newContentPane);

//Display the window.
frame.pack();
frame.setVisible(true);
}

public static void main(String[] args) {
//Schedule a job for the event-dispatching thread:
//creating and showing this application's GUI.
javax.swing.SwingUtilities.invokeLater(new Runnable() {
public void run() {
createAndShowGUI();
}
});
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:32:26.037

在另一个文件中创建另一个类并将 main 方法移入其中。

要了解更多信息：[JLS 12\. 执行](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html)和[Java 教程](http://docs.oracle.com/javase/tutorial/getStarted/application/index.html)。

**JPTBorderLauncher.java**

```
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class JPTBorderLauncher extends JFrame {
   public JPTBorderLauncher() {
      super( "jptBorder" );
      setDefaultCloseOperation( EXIT_ON_CLOSE );
      add( new jptborder());
      pack();
      setVisible( true );
   }
   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         @Override public void run() { new JPTBorderLauncher(); }});
   }
} 
```

**jptborder.java**

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;

import javax.swing.BorderFactory;
import javax.swing.JColorChooser;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingConstants;

public class jptborder
   extends
      JPanel
{
   protected JColorChooser tcc;
   protected JLabel        banner;

   public jptborder() {
      super( new BorderLayout() );
      banner = new JLabel( "Welcome To this border Example",
                           SwingConstants.CENTER );
      banner.setForeground( Color.red );
      banner.setOpaque( true );
      banner.setFont( new Font( "Arial", Font.BOLD, 24 ) );
      banner.setPreferredSize( new Dimension( 450, 65 ) );
      JPanel bannerPanel = new JPanel( new BorderLayout() );
      bannerPanel.add( banner, BorderLayout.CENTER );
      bannerPanel.setBorder( BorderFactory.createTitledBorder( "Welcome" ) );
      add( bannerPanel, BorderLayout.CENTER );
   }
} 
```

结果：

![在此处输入图像描述](../Images/c202d3991b39da59c940aadb44c63e1d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:27:29.147

要实现您想要的，您应该将 main 方法保留在另一个类中。那里你可以打电话`jptborder createAndShowGUI`。例如：

```
public class MainClass
{
  public static void main(String st[])
  {
   javax.swing.SwingUtilities.invokeLater( new Runnable()
   {
     @Override
     public void run()
     {
       jptborder.createAndShowGUI();
     }
   });
  }
} 
```

然后编译运行`MainClass`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T16:27:35.130

为你的主文件和你的类创建一个文件，`jptborder`然后从你的主文件中引用你的类。确保它们在同一个包中并且彼此可见。

```
public static void main(String args[]) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            JptBorder border = new JptBorder(); // To use your constructor
            JptBorder.createAndShowGUI(); to use your static method
        }
    });
} 
```

其他所有内容都将在您的`JptBorder`类文件中。

# javascript - JQmobi - 动态切换页面

> ID：15451557
> 
> 赞同：1
> 
> 时间：2013-03-16T16:18:04.050
> 
> 标签：javascript, html, mobile, swipe, jqmobi

我在这里有一段我​​的 JQMobi 代码。问题是它不会动态切换页面：

```
<div title='Whatever' id="main" class="panel" selected="true" data-tab="navbar_home" data-footer="none">
        <div class="swipe_area">
            <!-- nothing here, just for swiping to not disturb other elements -->
            <- Swipe me ->
        </div>
        <script>
            var init_swipe = function () {
            $(".swipe_area").swipeListener({
                    vthreshold: 30,
                    hthreshold: 80,
                    callBack: function (dir) {
                        if(dir.left) {
                            window.location.href = "#menulink3";
                            alert("go to menulink3");
                        }
                        else if(dir.right) {
                            window.location.href = "#menulink2";
                            alert("go to menulink2");
                        }
                    }
                });
            };
            window.addEventListener("load", init_swipe, false);
        </script>
</div>
<div title='Whatever' id="menulink2" class="panel" selected="true" data-tab="navbar_home" data-footer="none">
    content of menulink2
</div>
<div title='Whatever' id="menulink3" class="panel" selected="true" data-tab="navbar_home" data-footer="none">
    content of menulink3
</div> 
```

浏览器中的 url 确实发生了变化，它会发出警报（只是为了确定），但页面中没有切换。此外，正常的 a href 链接也可以正常工作。是否有一个 jqmobi 函数我必须调用以使其刷新或什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:19:40.910

您无需更改`window.location`导航。看看以`$.ui.loadContentDiv`编程方式进行。

# c++ - 从库文件的代码中启用打印

> ID：15451559
> 
> 赞同：0
> 
> 时间：2013-03-16T16:18:05.187
> 
> 标签：c++, debugging, shared-libraries, soundtouch

是否有任何问题或方法可以在库文件 (libSoundTouch.so) 的代码中使用打印。我正在研究库 - SoundTouch，只是在它的 c++ 代码中添加了一些打印，从而创建了上述和其他一些库文件。虽然它可以编译并且一切正常，但我看不到屏幕上的打印输出（我也检查了 dmesg 日志，但也看不到那里的输出）

我错过了什么吗？或者，有没有办法在那里启用打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T04:13:45.893

终于搞定了

问题和我做了什么：

当我们运行 soundstretch 实用程序时，它会查找共享库 libSoundTouch.so.0

我有 soundtouch 库和 soundstretch 实用程序的源代码。我在 soundtouch 源代码中添加了 printfs，并编译和安装了 soundtouch 和 soundstretch。soundtouch 库安装在 /usr/local/lib 中

我正在使用 Ubuntu，显然，您可以直接从 Ubuntu 软件中心安装 soundstretch 实用程序，该实用程序安装在正确的路径中（soundstretch 在运行时查找）

现在，当我运行 soundstretch 实用程序时，它正在调用从 Ubuntu 软件中心安装的库，因为它位于默认路径中。这就是为什么我无法看到我在 soundtouch 库源代码中添加的任何打印，因为这些函数从未被调用过。

所以，我删除了 Ubuntu soundtouch 库并在 LD_LIBRARY_PATH 变量中添加了 /usr/local/lib 的一件事，我现在可以看到 printf 正在工作。

# php - Couchbase + PHP SDK 建立连接缓慢

> ID：15451560
> 
> 赞同：3
> 
> 时间：2013-03-16T16:18:08.027
> 
> 标签：php, database, couchbase

我在使用 SDK for PHP 时遇到问题。

如果我尝试建立连接，则需要很长时间...

这里有一些代码：

```
$old = microtime (true);
$db = new Couchbase(...);
echo microtime (true)-$old."
";
$old = microtime (true);
$db->get(...);
echo microtime (true)-$old; 
```

输出是这样的：2.2835459709167（couchbase建立）0.0011978149414062（获取命令）

为什么连接到 couchbase 需要这么长时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:23:51.090

初始连接确实需要一段时间，但有一个标志用于使用与 Couchbase() 对象的持久连接。这是最后一个参数。通常，将其设置为 true 是个好主意。

该项目正在考虑在未来的版本中将其默认设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:20:46.060

检查您为服务器主机使用的值，如果您使用，例如：

```
$cb = new Couchbase("couchbase_hostname:8091", "user", "pass", "default" , true); 
```

问题可能是“couchbase_hostname”的DNS解析，尝试传递主机IP，你没有粘贴整个脚本代码，所以我不知道你传递的是哪个值。

# xna - 检查并防止碰撞 - TileEngine 但单位未绑定到瓷砖

> ID：15451561
> 
> 赞同：0
> 
> 时间：2013-03-16T16:18:08.553
> 
> 标签：xna, collision-detection

该地图是由我制作的名为 Tile 的类的二维数组制作的。每个图块内部都有较小的图块，它们要么与单位发生碰撞，要么不与单位发生碰撞。

但是我怎样才能检测和防止碰撞呢？假设玩家是 6x6 小（上面提到的）瓷砖大，一个普通瓷砖是 8x8。我怎么知道当玩家向右移动时我知道那里有一块瓷砖，并且移动得足够多，以至于它们不会重叠？

按照规则的要求..我需要表现出努力，所以这就是我目前所拥有的：如果玩家是 6x6 并且一块瓷砖是 8x8，那么这意味着玩家要么在一个瓷砖上，要么在 2 个瓷砖之间; 当他站在瓷砖之间时（单位不绑定到瓷砖）。所以假设玩家在两个瓷砖之间，并且想要向右移动：我检查第一个（玩家所在的两个瓷砖）瓷砖右侧的瓷砖碰撞，然后检查第二个。为了能够向右移动，两者都必须是空的。

但是如果一个单位是 10x10 大，那么它可以是 2 个格子，或者最多 3 个格子。如果我知道每个单元的大小不同并且不是恒定的，我如何不断检查碰撞。

基本上，我需要关于上述内容的帮助，或者一种新的碰撞方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:31:11.263

如果我正确理解您的问题，则较小的瓷砖会导致碰撞，而不是较大的瓷砖。在这种情况下，您可以简单地遍历该单位在给定移动中将穿过的所有小图块，如果遇到会阻止该单位前进的小图块，则停止。举个例子，下面是一个处理向右移动单元的方法：

```
void moveUnitRight(Unit unit, int tilesRight)
{
    for(int col = unit.Right + 1 ; col <= unit.Right + tilesRight ; col++)
        {
            for(int row = unit.Top ; row <= unit.Bottom ; row++)
            {
                 if (tiles[row,col].Collides)  //stop unit here
                 {
                     unit.Right = col - 1;    //set position to tile left of collision
                     return;   //search no further
                 }
            }
     }
     //if you reach this point, no collision was detected
     unit.Right += tilesRight;    //move the full distance
} 
```

一旦你理解了这一点，你就可以编写一个更健壮的方法来处理任何方向的移动以及检查地图边界。

# canvas - 围绕点旋转的方法，html画布

> ID：15451564
> 
> 赞同：0
> 
> 时间：2013-03-16T16:18:17.837
> 
> 标签：canvas, rotation

我正在尝试围绕中心点旋转球`(cx, cy)`。当我做：

```
 (function keepDrawing(){
    context.clearRect(0, 0, w, h);

    ball.x = cx+Math.cos(angle);
    ball.y = cy+Math.sin(angle);

    angle += 0.1;
    ball.draw(context);
    setTimeout(keepDrawing, 40);
 }()); 
```

它有效，但由于我刚刚开始学习这个，我尝试了另一种方法，它并没有产生我想的那样

```
 (function keepDrawing(){
    context.clearRect(0, 0, w, h);

    var x1 = ball.x - cx,
        y1 = ball.x - cy,
        x2 = x1*Math.cos(angle) - y1*Math.sin(angle),
        y2 = y1*Math.cos(angle) + x1*Math.sin(angle);

    ball.x = cx + x2;
    ball.y = cy + y2;
    ball.draw(context);
    setTimeout(keepDrawing, 40);
}()); 
```

球从左上角 45 度角传来并停止？[http://jsfiddle.net/MmjZk/](http://jsfiddle.net/MmjZk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:58:30.763

哎呀，你有一个错字：

```
y1 = ball.x - cy, 
```

应该：

```
y1 = ball.y - cy, 
```

但是你让球几乎在画布内旋转（注意球只在画布的 4 个角上旋转进入视野）

这是一些替代代码，可以使球旋转更紧密。这是一个小提琴：http: [//jsfiddle.net/m1erickson/dFctW/](http://jsfiddle.net/m1erickson/dFctW/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){
    function Ball(radius, color){
      this.radius = radius || 25;
      this.color = color || '#'+(Math.random()*0xFFFFFF<<0).toString(16);
      this.startingX;
      this.startingY;
      this.x = 0;
      this.y = 0;
      this.rotation = 0;
    }

    Ball.prototype.draw = function(context){
      context.save();
      context.fillStyle = this.color;
      context.beginPath();
      context.arc(this.x, this.y, this.radius, 0, Math.PI*2)
      context.fill();
      context.restore();
    };

    var canvas = document.getElementById('canvas'),
          log = document.getElementById('log'),
      context = canvas.getContext('2d'),
      w = canvas.width,
      h = canvas.height,
          ball = new Ball(),
          angle = 3*Math.PI/180,
          cx = w/2,
          cy = h/2;
          ball.startingX=cx;
          ball.startingY=cy-60;

      (function keepDrawing(){

          context.clearRect(0, 0, w, h);    

          // increase the angle of rotation
          angle+=6*Math.PI/180;

          // calculate the new ball.x / ball.y
          var x1 = ball.startingX - cx;
          var y1 = ball.startingY - cy;
          ball.x =cx+ x1*Math.cos(angle) - y1*Math.sin(angle);
          ball.y =cy+ y1*Math.cos(angle) + x1*Math.sin(angle);
          ball.draw(context);

          setTimeout(keepDrawing, 40)
      }());

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

# c# - C#将双数组传递给构造函数重载方法

> ID：15451565
> 
> 赞同：1
> 
> 时间：2013-03-16T16:18:19.590
> 
> 标签：c#, arrays, multidimensional-array, constructor, overloading

我正在从一本书中学习 c#，作为练习的一部分，我必须自己编写代码。要做的一件事是将双精度数组传递给将进一步处理它的构造函数重载方法之一。问题是我不知道该怎么做。

这是完整的代码（直到现在）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace assignment01v01
{

    public class Matrix
    {
        int row_matrix; //number of rows for matrix
        int column_matrix; //number of colums for matrix
        int[,] matrix;

        public Matrix() //set matrix size to 0*0
        {
            matrix = new int[0, 0];
            Console.WriteLine("Contructor which sets matrix size to 0*0 executed.\n");
        }

        public Matrix(int quadratic_size) //create quadratic matrix according to parameters passed to this constructor
        {
            row_matrix = column_matrix = quadratic_size;
            matrix = new int[row_matrix, column_matrix];
            Console.WriteLine("Contructor which sets matrix size to quadratic size {0}*{1} executed.\n", row_matrix, column_matrix); 
        }

        public Matrix(int row, int column) //create n*m matrix according to parameters passed to this constructor
        {
            row_matrix = row;
            column_matrix = column;
            matrix = new int[row_matrix, column_matrix];
            Console.WriteLine("Contructor which sets matrix size {0}*{1} executed.\n", row_matrix, column_matrix);
        }

        public Matrix(int [,] double_array) //create n*m matrix and fill it with data passed to this constructor
        {
            matrix = double_array;
            row_matrix = matrix.GetLength(0);
            column_matrix = matrix.GetLength(1);
        }

        public int countRows()
        {
            return row_matrix;
        }

        public int countColumns()
        {
            return column_matrix;
        }

        public float readElement(int row, int colummn)
        {
            return matrix[row, colummn];
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Matrix mat01 = new Matrix();

            Matrix mat02 = new Matrix(3);

            Matrix mat03 = new Matrix(2,3);

            //Here comes the problem, how should I do this?
            Matrix mat04 = new Matrix ( [2,3] {{ 1, 2 }, { 3, 4 }, { 5, 6 }});           

            //int [,] test = new int [2,3] { { 1, 2, 3 }, { 4, 5, 6 } };

        }
    }
} 
```

困扰我的部分代码标有“//问题来了，我该怎么做？”。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:21:49.740

看起来您正在为如何创建具有一组初始值的多维数组而苦苦挣扎。其语法如下

```
new [,] {{ 1, 2 }, { 3, 4 }, { 5, 6 }} 
```

因为在这种情况下您正在初始化数组，所以您不需要指定大小或类型。编译器将从提供的元素推断它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T16:22:13.503

可以按如下方式创建多维数组。

```
 new Matrix(new int[,] {{1, 2, 3,}, {1, 2, 3}}); 
```

甚至是多余的`int`，因此您可以使它更容易（或者，至少，它应该更容易阅读:)）

```
 new Matrix(new [,] {{1, 2, 3,}, {1, 2, 3}}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T16:22:30.380

您只是切换了索引，并且缺少`new`关键字。这应该有效：

```
Matrix mat04 = new Matrix ( new [3,2] {{ 1, 2 }, { 3, 4 }, { 5, 6 }}); 
```

或者，正如@JaredPar 指出的那样，您可以完全省略数组大小并让编译器为您推断它：

```
Matrix mat04 = new Matrix ( new [,] {{ 1, 2 }, { 3, 4 }, { 5, 6 }}); 
```

# android - Android 在 XML ClassNotFound 错误中膨胀自定义视图

> ID：15451571
> 
> 赞同：1
> 
> 时间：2013-03-16T16:18:44.327
> 
> 标签：android, android-layout, android-preferences, android-xml, dialog-preference

我的 XML 代码有一些问题，希望您能帮助我。

我在这个包中有这个类：

```
package com.example.myview

public class CustomDialog extends DialogPreference {

    public CustomDialog(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    public CustomDialog(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
    }
} 
```

然后我有这个偏好 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <com.example.myview.CustomDialog
        android:dialogMessage="Are you sure you wish delete you account"
        android:key="deleteAccountPreference"
        android:negativeButtonText="Cancel"
        android:positiveButtonText="Okay"
        android:summary="@string/preferences_deleteaccount_summary"
        android:title="@string/preferences_deleteaccount_title" />

</PreferenceScreen> 
```

当我运行代码时，出现此错误：

```
03-16 17:03:18.032: E/AndroidRuntime(20224): android.view.InflateException: Binary XML file line #4: Error inflating class com.example.myview.CustomDialog
...
03-16 17:03:18.032: E/AndroidRuntime(20224): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.myview.CustomDialog" on path: . 
```

**总结一下我的问题，我想知道如何更改 xml 文件正在查看的路径，或者弄清楚为什么它不能扩展我的自定义视图。**

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:56:21.447

我遇到了您上面提到的基本相同的问题。我假设您尝试在图形布局和偏好 xml 文件的 xml 视图之间来回切换，对吗？这是我克服初始化问题的廉价方法（应该类似于您的 ClassNotFoundException 问题）：

1.  复制在 xml 中类似引用的现有类（在 xml 中也有类似 com. *.* ClassName ... 的内容，并将“ClassName”重命名为 CustomDialog（在您的特定情况下）
2.  完成此操作后，我仍然遇到“找不到类”错误 - 我只是重建了整个项目，这个错误就消失了。我新创建的小部件在图形布局中相应呈现。

我还没有看到我是否遇到了你所做的膨胀错误，但我希望我的回答仍然有所帮助。抱歉，如果没有，这实际上是我在 stackoverflow 上的第一篇文章，而且在谈到 Android 时，我无疑是一个 n00b。我也在学习:)

# d3.js - d3 js如何从轴位置检索时间

> ID：15451575
> 
> 赞同：2
> 
> 时间：2013-03-16T16:18:58.413
> 
> 标签：d3.js, scale

我目前正在学习一些精彩的 d3.js 库。让我们用一个简单的例子来解决我的问题。

我有一个日期，我想在 ax Axis 上表示。

```
 var startDate = new Date();
    var x         = d3.time.scale().range([0, 1000]); //range of x axis will be 1000px

    var xPos      = x(startDate); // return the scaled date as a x position on x axis 
```

问题是：如何从那里获取原始值……换句话说，如何将 x 位置转换为日期？换句话说，我如何从 xPos 获得 startDate ？

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:34:48.533

每个秤都有一个`invert()`功能，可以满足您的需求。请参阅[文档](https://github.com/mbostock/d3/wiki/Time-Scales#wiki-invert)。

# c - 递归函数中的分段错误

> ID：15451578
> 
> 赞同：0
> 
> 时间：2013-03-16T16:19:20.833
> 
> 标签：c, segmentation-fault

我正在实施[Strassen 的矩阵乘法算法](http://en.wikipedia.org/wiki/Strassen_algorithm)作为分配的一部分。我已经正确编码，但我不知道为什么它会给出分段错误。我将 strassen() 称为***strassen(0,n,0,n);*** 主要。n 是用户给定的数字，它是 2 的幂，它是矩阵（2D 数组）的最大尺寸。对于 n = 4，它没有给出段错误，但对于 n = 8、16、32，它给出了段错误。代码如下所示。

```
 void strassen(int p, int q, int r, int s)
    {
        int p1,p2,p3,p4,p5,p6,p7;   
        if(((q-p) == 2)&&((s-r) == 2))
        {
            p1 = ((a[p][r] + a[p+1][r+1])*(b[p][r] + b[p+1][r+1]));
            p2 = ((a[p+1][r] + a[p+1][r+1])*b[p][r]);
            p3 = (a[p][r]*(b[p][r+1] - b[p+1][r+1]));
            p4 = (a[p+1][r+1]*(b[p+1][r] - b[p][r]));
            p5 = ((a[p][r] + a[p][r+1])*b[p+1][r+1]);
            p6 = ((a[p+1][r] - a[p][r])*(b[p][r] +b[p][r+1]));
            p7 = ((a[p][r+1] - a[p+1][r+1])*(b[p+1][r] + b[p+1][r+1]));
            c[p][r] = p1 + p4 - p5 + p7;
            c[p][r+1] = p3 + p5;
            c[p+1][r] = p2 + p4;
            c[p+1][r+1] = p1 + p3 - p2 + p6;
        }
        else
        {
            strassen(p, q/2, r, s/2);
            strassen(p, q/2, s/2, s);
            strassen(q/2, q, r, s/2);
            strassen(q/2, q, s/2, s);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:39:37.627

else 块中的某些条件是无限递归的（至少第二个和第四个，没有检查另一个）。这可以很容易地用笔和纸证明：例如
`strassen(p, q/2, s/2, s)`，对于 `0,8,0,8 将在每次迭代中产生：

```
1) 0, 4, 4, 8

2) 0, 2, 4, 8

3) 0, 1, 4, 8

4) 0, 0, 4, 8

5) 0, 0, 4, 8 
```

...

and since none of those results pass your

```
if(((q-p) == 2)&&((s-r) == 2)) 
```

test, the function will run (and I suspect branch, as the 4th function has the same problem...) until the end of the stack is hit, causing a Segmentation Fault.

Anyway, *if* what you are trying to do in the else block is to recursively bisect the matrix, a better attempt would be something like:

```
strassen(p, (q+p)/2, r, (r+s)/2);                                               
strassen(p, (q+p)/2, (r+s)/2, s);                                               
strassen((q+p)/2,q, (r+s)/2, s);                                                
strassen((q+p)/2,q, r, (r+s)/2); 
```

(keep in mind that I didn't check this code, though)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:48:45.607

```
void strassen(int p, int q, int r, int s)
{
    int p1,p2,p3,p4,p5,p6,p7;   
    if(q-p == 2 && s-r == 2)
    {
        p1 = (a[p][r] + a[p+1][r+1])   * (b[p][r] + b[p+1][r+1]);
        p2 = (a[p+1][r] + a[p+1][r+1]) * b[p][r];
        p3 = a[p][r]                   * (b[p][r+1] - b[p+1][r+1]);
        p4 = a[p+1][r+1]               * (b[p+1][r] - b[p][r]);
        p5 = (a[p][r] + a[p][r+1])     * b[p+1][r+1];
        p6 = (a[p+1][r] - a[p][r])     * (b[p][r] +b[p][r+1] );
        p7 = (a[p][r+1] - a[p+1][r+1]) * (b[p+1][r] + b[p+1][r+1]);
        c[p][r] = p1 + p4 - p5 + p7;
        c[p][r+1] = p3 + p5;
        c[p+1][r] = p2 + p4;
        c[p+1][r+1] = p1 + p3 - p2 + p6;
    }
    else
    {
        if (q/2-p >= 2 && s/2-r >= 2) strassen(p, q/2, r, s/2);
        if (q/2-p >= 2 && s-s/2 >= 2) strassen(p, q/2, s/2, s);
        if (q-q/2 >= 2 && s/2-r >= 2) strassen(q/2, q, r, s/2);
        if (q-q/2 >= 2 && s-s/2 >= 2) strassen(q/2, q, s/2, s);
    }
} 
```

But an easier recursion stopper would be at the beginning of the function, like:

```
{
    int p1,p2,p3,p4,p5,p6,p7;   
    if(q-p < 2 || s-r < 2) return;
    if(q-p == 2 && s-r == 2)
    { ... 
```

# php - PHP reCAPHTCHA，完全迷路了

> ID：15451584
> 
> 赞同：1
> 
> 时间：2013-03-16T16:19:56.387
> 
> 标签：php, html, recaptcha

我正在努力将 reCAPTCHA 实施到联系表格中，但我无法弄清楚我做错了什么。reCAPTCHA 字段未显示在页面上，它已删除我的 php 页脚包括以及提交/重置按钮。另外，我不确定我是否在我的 send-mail.php 文件中正确地进行了验证。

**联系表**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<head>
<link rel="icon" href="/bp/images/favicon.ico" type="image/x-icon" />
<title>San Diego Ministries | 3223232323.com</title>

<meta name="keywords" content="Jesus Christ, Ministries, Salvation, Church San Diego, Small Group, Christian" />
<meta name="description" content="... is a San Diego based Ministry." />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

 <script type="text/javascript">
 var RecaptchaOptions = {
    theme : 'clean'
 };
 </script>

<!--/ CSS-->

<!--/ Events CSS-->
<link rel="stylesheet" href="/bp/css/prayer-request.css" type="text/css" media="screen" />

</head>

<body>

<?php include 'header.php'; ?>

<!--/ Title-->

<div class="prayer-title"><img src="/bp/images/prayer-title.jpg"></img></div>

<!--/ Prayer Request Description-->

<div id="prayer-desc">

<p>
If you have a prayer request or question for one of our pastors, fill out the form below and one of our pastors will receive it and personally pray for you.
Thanks for sharing and giving us the opportunity to pray for you!
</p>

<p>
<b>Please note:</b> All contact fields are optional and your prayer requests are kept strictly confidential.
</p>

</div>

<!--/ Show Prayer Request Form-->

<div id="prayer-form">

<form name="prayer-form" action="send-mail.php" method="POST">

<label for="field_name">Name:</label> <input type="text" id="field_name" name="sender_name" placeholder="First Name, Last Name"> 
<br>
<label for="field_email">Email:</label> <input type="text" id="field_email" name="sender_email" placeholder="example@domain.com">
<br>
<label for="field_phone">Phone:</label> <input type="text" id="field_phone" name="sender_phone" placeholder="(444) 444-4444">
<br>
<label for="field_message">Prayer Request:</label>

<textarea id="field_message" name="sender_message" placeholder="How can we pray for you?"></textarea>
<br>

    <?php
          require_once('/bp/recaptchalib.php');
          $publickey = "********************Po3UtfoqR1AzBk";
          echo recaptcha_get_html($publickey);
        ?>

<br>        
<input type="submit" name="send_message" value="Submit"> <input type="reset" value="Reset">

</form>

</div>

<div class="bottom-block"><img src="/bp/images/white-block.jpg"></img></div>        

</body>
</html>

<?php include 'footer.php'; ?> 
```

**发送邮件.php**

```
 <?php
  require_once('/bp/recaptchalib.php');
  $privatekey = "*******************yfYWTRW0hG7CrJ8hItb";
  $resp = recaptcha_check_answer ($privatekey,
                                $_SERVER["REMOTE_ADDR"],
                                $_POST["recaptcha_challenge_field"],
                                $_POST["recaptcha_response_field"]);

  if (!$resp->is_valid) {
    // What happens when the CAPTCHA was entered incorrectly
    die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
         "(reCAPTCHA said: " . $resp->error . ")");
  } else {
    // Your code here to handle a successful verification
  }
  ?>

<?php     

$mail_to = "hel344323@gmail.com"; // specify your email here

// Assigning data from the $_POST array to variables

$name = $_POST['sender_name'];

$mail_from = $_POST['sender_email'];

$phone = $_POST['sender_phone'];

$web = $_POST['sender_web'];

$company = $_POST['sender_company'];

$addy = $_POST['sender_addy'];

$message = $_POST['sender_message'];

// Construct email subject

$subject = 'Email Web Prayer Request from ' . $name;

// Construct email body

$body_message = 'From: ' . $name . "\r\n";

$body_message .= 'E-mail: ' . $mail_from . "\r\n";

$body_message .= 'Phone: ' . $phone . "\r\n";

$body_message .= 'Prayer Request: ' . $message;

// Construct email headers

$headers = 'From: ' . $name . "\r\n";

$headers .= 'Reply-To: ' . $mail_from . "\r\n";

$mail_sent = mail($mail_to, $subject, $body_message, $headers);

if ($mail_sent == true){ ?>

<script language="javascript" type="text/javascript">
alert('Your prayer request has been submitted - thank you.');

window.location = 'prayer-request.php';

</script>

<?php } else { ?>

<script language="javascript" type="text/javascript">
alert('Message not sent. Please, notify the site administrator admin@lsdlsdection.com');

window.location = 'prayer-request.php';
</script>

<?php

    }

?> 
```

**[链接到网站](http://helmblanc.com/bp/prayer-request.php)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:26:53.917

您的 PHP 代码中有错误。可能是这一行的致命错误，

`require_once('/bp/recaptchalib.php');`

我怀疑文件路径`recaptchalib.php`是错误的。我建议打开 PHP 错误并重试。

您可以通过在文件开头添加此 PHP 代码来打开错误，

`ini_set('display_errors', TRUE);`

我希望这对现在有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:31:58.423

检查您的错误日志。从它的声音来看，您的脚本正在触发一个致命错误（很可能是由于 reCAPTCHA 库的路径不正确），这会停止脚本执行，因此您的站点的页脚不再显示。

# ios - MVC 模型 - 控制器应该直接访问视图的控件吗？

> ID：15451589
> 
> 赞同：4
> 
> 时间：2013-03-16T16:20:39.520
> 
> 标签：ios, objective-c, model-view-controller, design-patterns

我正在学习 iOS 开发的东西，我在教程和书籍中发现控制器层通常可以直接访问视图的控件（文本字段、标签等）。让我们考虑这样一个例子：

假设该视图有一个名为的标签`lblResult`和一个名为 的文本字段`txtDataToAnalyze`。比在控制器界面中我们有这样的东西：

```
@property (nonatomic, retain) IBOutlet UILabel* lblResult;
@property (nonatomic, retain) IBOutlet UITextField* txtDataToAnalyze; 
```

以及实现文件中的一些`@synthesize`语句。

我在 JavaSwing 开发方面有一些经验，大多数人认为我是在没有任何 GUI 构建器的情况下手动编写的，而我通常在 MVC 中做的是通过 getter/setter 访问 View 的控件。例如：`void setResult(String resString);`或`String getDataToAnalyze();`。这样，控制器只知道视图中显示了*哪些*信息，而不*知道*它们是如何显示的。我认为它更灵活（以后更改视图层更容易）。

我知道 iOS 有一些特定的规则，引入了 XIB/NIB 文件等，所以也许我的怀疑在 iPhone/iPad 开发的情况下完全没用。但我将为 iOS 编写一些更严肃的应用程序（实际上是从 Java Swing 中“重写”它），这就是我想问你的原因：

你认为，我应该改变我的思维方式并习惯这种新的（对我来说）方法（xib 文件，使用拖放创建 GUI 并**为控制器提供有关如何在视图中显示数据的信息**）？你在入手 iOS 时有过类似的疑惑吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T18:19:51.180

简短的回答：

是的，我认为您绝对应该花一点时间来习惯使用 Interface Builder (IB) 来制作 NIB 和故事板，并让 IB为您创建需要与之交互的控件的引用`IBOutlet`。`IBAction`一旦您精通它，您就会对生成易于维护的代码的生产力印象深刻。不要过快地解雇 IB。

就让控制器直接与`IBOutlet`和`IBAction`引用交互而言，这是简单用户界面的常见做法。如果您有一些真实世界的示例，请发布一个带有屏幕快照的新问题，我们可以提供更实用的指导。

长答案：

1.  您的部分问题似乎是由于担心看到正在与视图控件进行详细交互的视图控制器。问题是，如果你想将你的控制器与视图的一些实现细节隔离开来，那么继续对视图进行子类化并将视图特定的东西放在那里。IB 可以与视图控制器子类以及视图子类交互。因此，您可以愉快地使用 IB 并且仍然将您的视图控制器与其中一些实现细节隔离开来。

    就我个人而言，我只`UIView`在视图达到某个主观复杂度阈值时进行子类化（例如，对我而言，该阈值是当我发现自己在做一些复杂的动画时，例如使用`CADisplayLink`复杂的手势识别器等）。我还将那些属于它们自己的逻辑实体的子视图子类化（例如`UITableViewCell`，或`UICollectionViewCell`）。但是对于我与模型交互以设置控件属性、与文本字段交互等的简单视图，我认为将其放在视图控制器中很好。话虽如此，如果我的控制器中有很多特定于视图的代码与我的模型与我的视图的集成无关，那么开始子类化`UIView`并将仅视图代码转移到其中。

2.  您的问题中隐含的是以编程方式构建视图而不是使用 NIB/故事板的概念。在我看来，使用 Interface Builder (IB) 来构建你的 UI 更容易开发和维护。做一个以编程方式构建视图的测试项目可能有一些教学价值，所以你真的了解发生了什么，但在那之后，我想你会发现自己很快就会被故事板所吸引。当您开始做超出标准 IB 控件功能（例如复杂的自定义容器视图等）的事情时，您将有很多机会编写自己的非 IB 代码。肯定有人更喜欢以编程方式开发视图，但我认为您无法超越 IB 生成的 UI 的开发速度和易于维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:19:40.153

我一般来说，控制器不知道视图，但视图知道控制器。

四本书的帮派说：

“MVC 还允许您更改视图响应用户输入的方式，而无需更改其视觉呈现。例如，您可能想要更改它响应键盘的方式，或者让它使用弹出菜单而不是命令键。 MVC 将响应机制封装在一个 Controller 对象中。控制器有一个类层次结构，可以很容易地创建一个新的控制器作为现有控制器的变体。

视图使用 Controller 子类的实例来实现特定的响应策略；要实现不同的策略，只需用不同类型的控制器替换实例即可。甚至可以在运行时更改视图的控制器，让视图改变它响应用户输入的方式。例如，可以禁用视图，使其不接受输入，只需给它一个忽略输入事件的控制器。

View-Controller 关系是 Strategy (315) 设计模式的一个例子。策略是表示算法的对象。当您想要静态或动态替换算法时，当您有很多算法变体时，或者当算法具有要封装的复杂数据结构时，它非常有用。”

# javascript - 使用 Jasmine 和 Angular 设置睾丸的问题

> ID：15451592
> 
> 赞同：0
> 
> 时间：2013-03-16T16:20:48.710
> 
> 标签：javascript, unit-testing, angularjs, jasmine, karma-runner

我正在尝试为我的项目设置单元测试环境，但遇到了一些问题。我正在尝试将 Testacular 与 Jasmine 一起使用来测试我的 AngularJS 代码。

我有一个模块`Services`，它有一个名为 KeepAlive 的工厂方法。这是它的设置。

```
angular.module('services', []).factory('KeepAlive', ['$rootScope', function($rootScope){
    //My Code
}]); 
```

该模块附加到一个名为`MainModule`. 这是它的代码。

```
angular.module('MainModule', ['filters', 'services', 'directives', 'ui'])
.config(['$httpProvider', function($httpProvider){
    //My Code
}]).run(['$rootScope', '$timeout', '$routeParams', 'KeepAlive', function($rootScope, $timeout, $routeParams, KeepAlive){
    //My Code
}]); 
```

所以现在我想为我的测试添加这段代码。所以这是我的睾丸文件设置。

```
 JASMINE,
     JASMINE_ADAPTER,
     'assets/lib/jquery/jquery-1.7.1.js',
     'assets/lib/angular/angular.js',
     'assets/lib/angular/angular-ui.js',
     'jsTests/MockingLib/angular-mocks.js',
     'assets/scripts/modules/Admin.js',
     'assets/scripts/modules/MainModule.js',
     'assets/scripts/services/KeepAlive.js',
     'assets/scripts/services/Admin.js',
     'assets/scripts/filters.js',
     'assets/scripts/directives.js',
     'assets/scripts/controllers/admin/*.js', 
```

现在这在我的睾丸控制台中引发了错误。这是我得到的错误。

```
Error: Unknown provider: KeepAliveProvider <- KeepAlive
     at Error (<anonymous>)
     at d:/Work/Workspace/TalentNetwork/assets/lib/angular/angular.js:2627:8
     at Object.getService [as get] (d:/Work/Workspace/TalentNetwork/assets/lib/angular/angular.js:2755:32)
     at d:/Work/Workspace/TalentNetwork/assets/lib/angular/angular.js:2632:38
     at getService (d:/Work/Workspace/TalentNetwork/assets/lib/angular/angular.js:2755:32)
     at Object.invoke (d:/Work/Workspace/TalentNetwork/assets/lib/angular/angular.js:2773:6)
     at d:/Work/Workspace/TalentNetwork/assets/lib/angular/angular.js:2637:71
     at Array.forEach (native)
     at forEach (d:/Work/Workspace/TalentNetwork/assets/lib/angular/angular.js:110:11)
     at Object.createInjector [as injector] (d:/Work/Workspace/TalentNetwork/assets/lib/angular/angular.js:2637:3) 
```

这是我的 Jasmine 测试用例。

```
beforeEach(function () {
    admin = module("MainModule");
    module("services");
}); 
```

我错过了什么？我是睾丸的新手。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T22:02:33.360

该错误表明有人要求提供名为“KeepAlive”的服务，但注入器不知道如何创建它（没有提供者）。

这意味着，您可能没有加载该模块。

当你在生产环境中引导你的应用程序时，你给它`ng-app="something"`，它告诉 Angular 要加载哪个模块。同样，您需要指定在测试期间要加载哪些模块。

**这应该可以解决您的问题：**

```
beforeEach(module('services')); 
```

# html - 链接在 LI 中不起作用

> ID：15451594
> 
> 赞同：0
> 
> 时间：2013-03-16T16:21:04.027
> 
> 标签：html, css, hyperlink, html-lists

天哪，我正在努力弄清楚为什么某些链接在 UL 中不起作用。但是，如果您右键单击在新选项卡中打开有效。我不明白为什么有些无法点击。前两个链接有效，但它们是 jQuery 使用的事件。第 3 和第 4 个链接是实际页面，它们不起作用，并且最后一个 javascript/jquery 链接永远不会。只是前两个使用 jQuery。其他人没有。我已经重新格式化了我的 CSS 几次，没有任何区别。不寻常的标签是因为我使用 Smarty。顺便说一句，使用 Chrome。

这是 HTML

**编辑：渲染标记**

```
<div id="phomenu" class="photoMenu">
    <ul>
    <li><a id="avatar_13885_10028" class="set_avatar" href="#13885">Use This Photo As Avatar</a></li>
    <li><a id="cover_13885_10028" class="set_cover" href="#13885">Use This Photo As Album Cover</a></li>
    <li><a href="/page-13885-k4cjGSDSG4K.html">Page Photo</a></li>
    <li><a href="/?page=photo&amp;section=desc&amp;pho_id=13885">Edit Photo Information</a></li>
    <li><a id="remove_k4cjGSDSG4K_13885" class="remove_photo" href="javascript:void(0)">Delete this photo</a></li>
    <li><a id="feature_13885" class="feature_photo" href="javascript:void(0)">Feature Photo</a></li>
    </ul>
</div> 
```

这是CSS

```
.photoMenu ul{
        list-style-type: none;
        list-style-position: outside;
        margin: 0;
        padding: 0;
        font-size:9pt;
        border-top: 2px solid #ffa449;
    }
    .photoMenu li {
        margin: 0;
    }
    .photoMenu li a {
        color: #FFFFFF;
        border-bottom: 1px solid #e6e6e6;
        display:block;
        min-height:25px;
        padding-top:10px;
        background-color:#C6711B;
        text-decoration: none;

    }
    .photoMenu li a:hover {
        color: #FFF;
        background-color: #f2a83a;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:40:14.380

到目前为止您显示的代码没有任何问题。问题出在其他地方，可能是您的脚本干扰了链接。

`[Proof](http://jsfiddle.net/DZD25/)`

`javascript:void(0)`如果浏览器是针对你的，它可能会对这个部分生气

虽然没有必要，但`;`最后可能需要 a

```
<li><a id="remove_k4cjGSDSG4K_13885" class="remove_photo" href="javascript:void(0);">Delete this photo</a></li>
<li><a id="feature_13885" class="feature_photo" href="javascript:void(0);">Feature Photo</a></li> 
```

# javascript - jQuery 链接函数任务

> ID：15451596
> 
> 赞同：-1
> 
> 时间：2013-03-16T16:21:12.303
> 
> 标签：javascript, jquery, function, callback, chaining

我想使用 jQuery 构建一系列六个按钮，其值为 A、B、C、1、2、3。每次用户单击按钮时，其值都会附加到文本字段中。但是，用户不能连续添加两个字母或两个数字。因此，如果按下 A、B 或 C，则只有数字有效，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:50:39.333

这应该这样做：

```
function createButton(target, val, fn) {
    var btn = document.createElement("button");
    btn.value = val;
    btn.onclick = function() {
        fn(val);
    };
    target.appendChild(btn);
}

var state = null,
    values = [];
function addLetter(l) {
    if (state == "letter") return false;
    state = "letter";
    values.push(l);
    update();
}
function addNumber(n) {
    if (state == "number") return false;
    state = "number";
    values.push(n);
    update();
}

createButton(inputs, "A", addLetter);
createButton(inputs, "B", addLetter);
createButton(inputs, "C", addLetter);
createButton(inputs, 1, addNumber);
createButton(inputs, 2, addNumber);
createButton(inputs, 3, addNumber);

function update() {
    // do something with values
} 
```

[jsfiddle.net 上的演示](http://jsfiddle.net/n83ae/1/)

# sql - PostgreSQL函数选择拆分记录的最大值

> ID：15451598
> 
> 赞同：0
> 
> 时间：2013-03-16T16:21:16.417
> 
> 标签：sql, function, postgresql, greatest-n-per-group, plpgsql

我有许多表“App_build”、“Server_build”，其中有一列名为“buildid”，它包含大量记录。IE：

```
buildid
-----------
Application1_BLD_01
Application1_BLD_02
Application1_BLD_03
Application2_BLD_01
Application3_BLD_01
Application3_BLD_02
Application4_1_0_0_1 - old format to be disregarded
Application4_1_0_0_2
Application4_BLD_03 
```

我想编写一个名为`getmax(tablename)`ie的函数`getmax('App_build')` ，它将返回一个仅列出最高值的记录集。IE：

```
buildid
--------
Application1_BLD_03
Application2_BLD_01
Application3_BLD_02
Application4_BLD_03 
```

我是 SQL 新手，所以不知道如何开始 - 我想我可以使用 split 命令然后使用`MAX`函数，但我不知道从哪里开始。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:09:02.330

由于缺少信息，假设当前版本为 PostgreSQL 9.2。

### 纯 SQL

简单的查询可能如下所示：

```
SELECT max(buildid)
FROM   app_build
WHERE  buildid !~ '\d+_\d+_\d+_\d+$'  -- to exclude old format
GROUP  BY substring(buildid, '^[^_]+')
ORDER  BY substring(buildid, '^[^_]+'); 
```

*   条件使用`WHERE`了正则表达式：

    ```
    buildid !~ '\d+_\d+_\d+_\d+$' 
    ```

    不包括`buildid`以 4 个整数除以`_`.

    `\d`.. 数字的字符类简写。`\`现代 PostgreSQL 中 只有一个反斜杠和[`standard_conforming_strings = ON`](http://www.postgresql.org/docs/current/interactive/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS).
    `+` .. 1 个或多个前面的原子。 `$` .. 作为最后一个字符：锚定到字符串的末尾。

    可能有更便宜/更准确的方法，您没有正确指定格式。

*   `GROUP BY`并`ORDER BY`提取第一次出现`_`with[`substring()`](http://www.postgresql.org/docs/current/interactive/functions-string.html)作为应用程序名称之前的字符串以进行分组和排序。正则表达式解释：

    `^`.. 作为第一个字符：将搜索表达式锚定到字符串的开头。
    `[^_]`.. 字符类：任何*不是* `_`.

    与`split_part(buildid, '_', 1)`. 但[`split_part()`](http://www.postgresql.org/docs/current/interactive/functions-string.html)可能更快..

### 功能

如果要编写表名可变的函数，则需要**动态 SQL**。这是一个 plpgsql 函数[`EXECUTE`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)：

```
CREATE OR REPLACE FUNCTION getmax(_tbl regclass) 
  RETURNS SETOF text AS
$func$
BEGIN

RETURN QUERY
EXECUTE format($$
   SELECT max(buildid)
   FROM   %s
   WHERE  buildid !~ '\d+_\d+_\d+_\d+$'
   GROUP  BY substring(buildid, '^[^_]+')
   ORDER  BY substring(buildid, '^[^_]+')$$, _tbl);

END
$func$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM getmax('app_build'); 
```

或者，如果您实际上是在使用*混合大小写标识符*：

```
SELECT * FROM getmax('"App_build"'); 
```

[**->SQLfiddle 演示。**](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)

有关此相关问题[中对象标识符类](http://www.postgresql.org/docs/current/interactive/datatype-oid.html) 的更多信息：[表名作为 PostgreSQL 函数参数](https://stackoverflow.com/questions/10705616/table-name-as-a-postgresql-function-parameter/10711349#10711349)**`regclass`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:01:32.997

你想要的是一个 groupwise_max。它可以完成，`MAX()`但通常的方法是左连接：

```
SELECT b1.buildid
FROM builds AS b1
LEFT JOIN builds AS b2 ON 
split_part(b1.buildid, '_', 1)=split_part(b2.buildid, '_', 1)
AND
split_part(b1.buildid, '_', 3)::int<split_part(b2.buildid, '_', 3)::int
WHERE b2.buildid IS NULL; 
```

但是由于您使用的是PG，因此可以使用`DISTINCT ON ()`

```
SELECT DISTINCT ON (split_part(buildid, '_', 1)) buildid
FROM builds 
ORDER BY split_part(buildid, '_', 1),split_part(buildid, '_', 3)::int DESC 
```

[http://sqlfiddle.com/#!12/308bf/9](http://sqlfiddle.com/#!12/308bf/9)

# symfony - 使用注释添加路由要求

> ID：15451601
> 
> 赞同：3
> 
> 时间：2013-03-16T16:21:30.013
> 
> 标签：symfony

我正在使用 SensioFrameworkExtraBundle 并尝试添加对特定参数的要求。我希望参数匹配特定的字符串集合。

Symfony 文档中的这个示例显示了我想要做什么。我想做与文化和 _format 相同的事情。

```
article_show:
    path:     /articles/{culture}/{year}/{title}.{_format}
    defaults: { _controller: AcmeDemoBundle:Article:show, _format: html }
    requirements:
        culture:  en|fr
        _format:  html|rss
        year:     \d+ 
```

这是我的代码：

```
 /**
  * @Route("/{type}", requirements={"type" = {html|json|xml} }, name="adm_grid")
  * @Template
 */ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T16:25:51.307

您忘记了引号，`{html|json|xml}`并且不需要花括号：

```
 requirements={"type" = "html|json|xml"} 
```

# sql-server - 复制数据库和设置快照代理

> ID：15451602
> 
> 赞同：1
> 
> 时间：2013-03-16T16:21:31.390
> 
> 标签：sql-server, authentication, replication

我有一个与可更新订阅的事务发布相关的小问题。

我使用这种类型在 PCA Publication 上创建，选择数据库、表，但配置快照代理有问题。我不知道在字段 Process account 中输入什么（在 Snapshot Agent 中）。我很无助，但我不知道想法......

计算机名称：Frankly 数据库：Frankly-PC\Frankly (SQL Server 10.50.1600 - test)

我通过 log=test, pass=test 登录到数据库。

我打招呼。

PS。这是屏幕：

[http://postimage.org/image/lr4o0thbn/](http://postimage.org/image/lr4o0thbn/)

帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:50:30.177

根据[Replication Agent 安全模型](http://msdn.microsoft.com/en-us/library/ms151868.aspx)：

> 快照代理
> 
> 当代理与分发服务器建立连接时，将使用代理运行所用的 Windows 帐户。此帐户必须：
> 
> *   至少，是分发数据库中 db_owner 固定数据库角色的成员。
> *   对快照共享具有读取、写入和修改权限。
> 
> 用于连接到发布服务器的帐户必须至少是发布数据库中 db_owner 固定数据库角色的成员。

# c++ - 如何声明指向另一个数组元素的指针数组

> ID：15451603
> 
> 赞同：1
> 
> 时间：2013-03-16T16:21:33.200
> 
> 标签：c++, arrays, pointers

我有一个数组。

`char tab[200];`

然后我想创建包含指向先前数组元素的指针的数组

```
char** t = new (char*)[LENGTH]; 
```

但我确实得到

```
C:\Users\Duke\Desktop\PJC3\main.cpp|37|error: array bound forbidden after parenthesized type-id| 
```

我应该如何动态声明***它***？

`EDIT`: 指向`tab`数组的相应元素是否正确？

```
char** t = new char*[dlugoscTab];

for(int i = 0; i < dlugoscTab; i++){
   *(t + i*sizeof(char)) = (tab + i*sizeof(char));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:27:14.853

```
char** t = new (char*)[LENGTH]; 
```

应该：

```
char** t = new char*[LENGTH]; 
```

如果您希望 in 中的每个`i`元素`t`都指向in 中的`i`第 th 元素`tab`，您可以简单地这样做：

```
for(int i=0; i<LENGTH; i++ )
    t[i] = & tab[i]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T16:27:46.193

要按照您尝试的方式进行操作，您只需去掉括号：

```
char** t = new char*[LENGTH];
for (i = 0; i < LENGTH; i++) {
  t[0] = &tab[i];
} 
```

但是，似乎没有太多理由在这里使用动态分配，所以只需使用一个数组`char*`：

```
char* t[LENGTH];
for (i = 0; i < LENGTH; i++) {
  t[0] = &tab[i];
} 
```

或者更好的是，使用标准容器，如`std::array`or `std::vector`。

您编辑中的分配不正确：

```
*(t + i*sizeof(char)) = (tab + i*sizeof(char)); 
```

在这种情况下它*会*起作用，但只是因为`sizeof(char)`是 1。你不应该`sizeof`在这里参与。向指针添加 1 不会将其移动 1 个字节，而是将其移动到指向它所指向的类型的下一个对象。你应该这样做：

```
*(t + i) = (tab + i); 
```

但正如我在上面的示例中所写，这确实更容易理解：

```
t[i] = &tab[i]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:28:34.837

正确的语法是：

```
char (*t)[LENGTH] = new char(*)[LENGTH]; 
```

**但是用new**分配它没有多大意义，因为它只分配一个指针，而不是一个数组。

# java - 在工作区刷新之前，在 ajax 函数之后不显示图像

> ID：15451604
> 
> 赞同：0
> 
> 时间：2013-03-16T16:21:34.217
> 
> 标签：java, javascript, jquery, ajax, eclipse

**背景：**我刚刚在本地主机上完成了我的网站的注册表单。在表单中，用户上传他们的第一张个人资料图片。表单用ajax提交，在服务器端验证，图片在服务器端写入一个文件夹。一旦图像被写入，我将用户名返回给 ajax 成功，然后他们被重定向到他们新创建的主页。

**问题：**当我在本地主机上测试表单时，他们的所有数据都按预期导入到数据库中。但是，这些文件被写入我的 eclipse 工作区中的一个文件夹，并且它没有注意到新数据。我已经调整了我的 Eclipse 工作区首选项，但是当新图像命中文件时它拒绝刷新。所以不幸的是，当用户被重定向到他们的主页时，他们会看到一个 404，他们的图像应该在哪里。它会一直保持这种状态，直到我进入 Eclipse 并刷新我的工作区，然后它才会出现。我发现在调用 ajax 成功之前图像已完全写入文件，因此函数运行速度不会太快，服务器（或 eclipse 工作区）不会刷新。

**问题：**当我将网站转移到 Godaddy VPS 时，我应该担心这一点吗？我担心当用户上传图片时会发生同样的事情，他们将不得不等待服务器需要多长时间才能意识到有新内容。如果我向第一次使用该网站的用户显示 404 图像，这可能会对网站的受欢迎程度造成毁灭性的影响。那么我应该做些什么来防止我的本地主机上出现这个问题。但更重要的是，您认为这会发生在实时服务器上吗？如果是，我该怎么办？

**代码：**这是我的 javascript 代码。那么我应该在我的成功领域做些什么来检查这个问题吗？

```
function addNewUser()
{
    var form = new FormData();
    var ajaxObject = getAjaxObject();
    var gender = (getElement('registerMale').checked) ? "his" : "her";
    form.append("userName", getValue('registerUserName'));
    form.append("email", getValue('registerEmail'));
    form.append("password", getValue('registerPassword'));
    form.append("fName", getValue('registerFName'));
    form.append("lName", getValue('registerLName'));
    form.append("displayName", getValue('registerFName') + " " + getValue("registerLName"));
    form.append("location", getValue('registerLocation'));
    form.append("gender", gender);
    form.append("currentDefault", getElement("registerCurrentDefault").files[0]);
    form.append("discipline", getValue("registerDiscipline"));
    form.append("birthDay", getValue("registerBirthDay"));
    form.append("birthMonth", getValue("registerBirthMonth"));
    form.append("birthYear", getValue("registerBirthYear"));

    ajaxObject.open("POST", "addNewUser", true);
    ajaxObject.send(form);

    ajaxObject.onreadystatechange = function()
    {
        if(ajaxObject.readyState == 4 && ajaxObject.status == 200)
        {
            divLink("profile?user=" + ajaxObject.responseText);
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:55:52.570

这不是一个值得担心的问题。尝试从您正在使用的应用程序服务器运行该应用程序。你会得到预期的结果。

# ruby-on-rails - rails 和 ajax 请求

> ID：15451605
> 
> 赞同：0
> 
> 时间：2013-03-16T16:21:40.560
> 
> 标签：ruby-on-rails, ajax, controller

我已经开始学习rails和javascript。我如何使用 jquery 向 Rails 控制器发出正确的 ajax 请求？我写在js文件中

```
$.get('http://localhost:3000/take/show',{},function(s){
           alert(s);
          },'text'); 
```

在控制器中：

```
class FirstController < ApplicationController
  def show 
    render :json => "Hi!"
  end
end 
```

但相反，我只看到空白警报对话框。我做错了什么？在所有教程中，我看到 $.get 中的 URL 应该是这样的“take/show”，但在我的情况下它不起作用，那为什么呢？

# prolog - Prolog for Quantum Logic Gate Simulator

> ID：15451608
> 
> 赞同：2
> 
> 时间：2013-03-16T16:22:23.670
> 
> 标签：prolog, quantum-computing

我不知道`Prolog`，但我想知道它是否是构建[量子门](http://en.wikipedia.org/wiki/Quantum_gate)模拟器的好选择？

`Prolog`我的主要问题是在这样的项目中使用的利弊是什么？其他建议也受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T15:12:56.053

我用 C++ 和 Python 编写了量子逻辑模拟器。我的第一个编程语言是 Prolog，但那是很久以前的事了。我的回忆并没有让我认为这是理想的选择：IIRC，返回值被限制为 True/False，在我看来，人们希望在值上有更多的灵活性。虽然确实可以使用 True/False 值来查看，例如，表面代码是否保护电路免受错误影响，但您可能想真正了解某些值的量子幅度，并且更通用的编程语言可能会有所帮助你。

在我编写模拟器的方式中，我使用了很多 2x2 和 4x4 矩阵乘法，我发现[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page) C++ 库对很多较小的情况进行了缓存优化，速度快得令人难以置信。在这些模拟中，您通常需要运行**大量**统计数据，以便在输入错误率相当小的情况下查看代码的保护能力。Eigen 的速度让事情变得非常好。

# android-layout - 如何正确显示 SeekBar？（布局重量）

> ID：15451610
> 
> 赞同：0
> 
> 时间：2013-03-16T16:22:29.483
> 
> 标签：android-layout

我正在尝试创建以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </TextView>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </TextView>

    <SeekBar
        android:id="@+id/seekbar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </TextView>

</LinearLayout> 
```

我想将父布局的 80% 给 textView1 和 textView2，尽可能将 SeekBar 包裹起来，其余的空闲空间给 textView3。

我试图：

*   使用 layout_weight 属性（分别为 - 4、4、1、1），但最后一个视图与 SeekBar 重叠
*   仅对 textView1 和 textView2 使用 layout-weight，将 SeekBar 的高度设置为“wrap_content”并为最后一个视图设置“match_parent”

现在我没有更多的想法了。你有过这样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:45:38.050

很好地创建这个布局，我会尝试：

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="4" >
</TextView>

<TextView
    android:id="@+id/textView2"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="4" >
</TextView>

<SeekBar
    android:id="@+id/seekbar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1">
</TextView> 
```

改变重量调整尺寸。让搜索栏包裹内容，赋予其他视图权重。

告诉我这是否有帮助。

# javascript - 在 javascript 中使用 web 天气服务

> ID：15451614
> 
> 赞同：1
> 
> 时间：2013-03-16T16:22:48.473
> 
> 标签：javascript, service, weather

我想使用 javascript 来消费 cdyne 提供的网络天气服务。这是我的代码：

```
<html>  
<head>  
    <title>weather app</title>  
</head>  
<body>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script language="JavaScript">
    function CallService() {
        var DTO = "{ 'ZIP': '85281' }";

        $.ajax({

            type: "POST",
            url: "wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityWeatherByZIP",
            data: JSON.stringify(DTO),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            processData: true,
            success: function (msg) {       
                alert(msg);
            },
            error: function (req, status, error) {
                alert(req + "# " + status + "@ " + error);
            },
            complete: function (req, status) {
                alert(req + "% " + status);
            }
        });
    }
    CallService();
    </script>
</body>  
</html> 
```

当我运行代码时，它会在警报中显示 [object Object]#error@ 和 [object Object]%error，这意味着调用了 error: function() 和 complete: function 而不是 success: function()。有没有人使用 javascript 来消费这个天气服务？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T16:30:17.203

那里有几个问题：

1.  您的网址应以`http://`. 没有它，您拥有的 URL 将相对于代码所在的文档进行解析。

2.  您在 POST 中发送 JSON。服务不希望收到包含 JSON 的 POST 的可能性非常高。

3.  您期望从服务*返回*JSON ，但它似乎以 XML 回复。

4.  您正在尝试进行跨域调用，但这被[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)所阻止，并且您尝试使用的服务似乎不支持[Cross Origin Resource Sharing](http://www.w3.org/TR/access-control/)。（当我尝试解决上述问题时，我收到错误消息，指出不允许来自我的来源 [这是] 的跨域请求`http:/jsbin.com`）。

查看您尝试使用的页面的[服务描述](http://wsf.cdyne.com/WeatherWS/Weather.asmx?op=GetCityWeatherByZIP)，它看起来也不支持[JSON-P](http://en.wikipedia.org/wiki/JSONP#JSONP)，这意味着您不能从不同的域使用它。您必须使用服务器端进程来查询它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:27:28.200

您不能对不同的域进行 ajax 请求，请拨弄[http://jsfiddle.net/wAt45/](http://jsfiddle.net/wAt45/)

```
XMLHttpRequest cannot load 
http://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityWeatherByZIP. Origin 
http://fiddle.jshell.net is not allowed by Access-Control-Allow-Origin. 
```

# ios - 不能在我的框架中包含 libxml2，我可以包含它的源代码吗？

> ID：15451615
> 
> 赞同：2
> 
> 时间：2013-03-16T16:22:48.957
> 
> 标签：ios, objective-c, xcode, frameworks, libxml2

我正在使用 X-Code 在 Objective-C 中为 iOS 创建一个框架。这个框架使用了我不能包含在框架本身中的库 libxml2（只是框架不可能）。然后想要使用我的框架的用户需要包含该库，因为编译器看到该框架使用了不可用的代码。

我可以编译从 Internet 上免费下载的源文件，而不是使用适用于 iOS 的库吗？这样我就可以将 libxml2 包含到我的框架中！

这里是 libxml2 库的官方网站：http: [//xmlsoft.org/](http://xmlsoft.org/)

# iphone - 如何在 iPhone 中使用 userAcceleration

> ID：15451617
> 
> 赞同：0
> 
> 时间：2013-03-16T16:22:56.380
> 
> 标签：iphone, ios, accelerometer

嗨，我想获得 iPhone 的加速度，但我不希望在 iPhone 倾斜时改变加速度值。我认为答案是用户加速。但我不知道如何获取 userAcceleration 值。我知道我必须使用核心运动并使用 CMdeviceMotion 但我不知道如何初始化和设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:00:48.120

我知道这个问题是不久前提出的，但如果您仍然感兴趣，我希望我能提供一些有趣的观点。

userAcceleration 将提供由加速度和陀螺仪信息集组成的稀释（非原始）数据。[您可以使用 -accelerometerData 方法从CMMotionManager](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html "CMMotionManager 类参考")获取原始加速度数据：

不幸的是，iOS 设备上的加速度计的目的是确定 3 维轴上的运动和方向：X、Y 和 Z 坐标。iOS 系统不区分“倾斜”和“移动”——它们是一回事。我不知道你也有什么目的，但这就是我们在 CoreMotion 框架中为我们制定的内容。

# c# - 继续运行 C# 应用程序

> ID：15451621
> 
> 赞同：0
> 
> 时间：2013-03-16T16:23:29.167
> 
> 标签：c#

我不知道如何以及从哪里开始解决这个问题。我已经使用 C# 创建了一个应用程序，我希望该应用程序在计算机启动并继续运行时启动，关闭应用程序的唯一方法是关闭计算机。

最好的方法是什么？我们可以隐藏我们的应用程序并继续在后台运行而不弹出给用户吗？

我可以使用始终正确的循环来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:25:45.160

您所描述的通常是使用[Windows 服务](http://msdn.microsoft.com/en-us/library/d56de412.aspx)处理的，设置为在启动时启动。请注意，机器管理员可以通过多种方式停止/重新启动服务，因此服务需要能够优雅地处理这种类型的交互。同样，拥有足够特权的人可以随时终止任何正在运行的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:25:47.423

您可以将其作为 Windows 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:26:14.980

en.wikipedia.org/wiki/Windows_service 只要用户不需要与程序交互，您就可以尝试将其创建为服务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T16:27:51.287

除了已经提到的 Windows 服务之外，您还可以将其设置为系统托盘应用程序，该应用程序可以在计算机启动例程的后台运行。好处是，如果您的应用程序在任何时候都需要用户交互，则可以使用系统托盘应用程序完成，但不能使用 Windows 服务。

查看此问题和接受的答案以获取更多信息 -[启动时将程序放入系统托盘](https://stackoverflow.com/questions/283632/put-a-program-in-the-system-tray-at-startup)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T12:15:47.630

通过在开始菜单搜索栏中键入“任务”或打开所有程序 - 附件 - 系统工具来打开任务计划程序。

*   从右侧窗格中选择“创建基本任务”，“创建基本任务向导”将打开。

*   为您的新任务输入“名称”和“描述”，然后单击“下一步”

*   选择您希望事件/任务运行的时间，然后单击下一步。我每天都在选择。

*   选择要运行应用程序的确切时间，然后单击下一步。

*   选择操作并单击下一步。我在这里选择启动程序。

*   单击“浏览”并从文件夹中选择 exe 文件，然后单击下一步。单击完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T16:29:41.487

您可以使用 Windows 调度程序在启动或登录时启动应用程序，至少在更新版本的 Windows 中是这样。我不知道引入了哪个版本的 Windows。

使用其他答案所建议的服务也是一种选择。Visual Studio 有一个用于创建 Windows 服务的项目模板，然后您可以使用`sc create`Windows 命令提示符来创建服务，或者如果您喜欢，可以创建一个安装程序项目。

# mysql - 根据产品和付款表列出用户及其财务余额

> ID：15451622
> 
> 赞同：1
> 
> 时间：2013-03-16T16:23:33.420
> 
> 标签：mysql, sql, select, join

我有一个用户表：

**用户表**

```
╔════╦══════╗
║ ID ║ NAME ║
╠════╬══════╣
║  1 ║ A    ║
║  2 ║ B    ║
║  3 ║ C    ║
╚════╩══════╝ 
```

**付款表**

```
╔════╦═════════╦════════╗
║ ID ║ USER_ID ║ AMOUNT ║
╠════╬═════════╬════════╣
║  1 ║       1 ║   2000 ║
║  2 ║       1 ║   1000 ║
║  3 ║       1 ║   1000 ║
║  4 ║       2 ║   1000 ║
╚════╩═════════╩════════╝ 
```

**产品表**

```
╔════╦═════════╦════════╗
║ ID ║ USER_ID ║ AMOUNT ║
╠════╬═════════╬════════╣
║  1 ║       1 ║   1000 ║
║  2 ║       1 ║   1000 ║
║  3 ║       1 ║   1000 ║
║  4 ║       2 ║    500 ║
║  5 ║       2 ║    500 ║
║  6 ║       3 ║   1000 ║
╚════╩═════════╩════════╝ 
```

现在我想得到这样的结果：

```
╔════╦══════╦═════════════════╗
║ ID ║ NAME ║     BALANCE     ║
╠════╬══════╬═════════════════╣
║  1 ║ A    ║ +1000 (or 1000) ║
║  2 ║ B    ║ 0               ║
║  3 ║ C    ║ -1000           ║
╚════╩══════╩═════════════════╝ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:17:14.383

```
 DROP TABLE  IF EXISTS user;
 CREATE TABLE user
 (user_id INT NOT NULL PRIMARY KEY,name CHAR(1) NOT NULL);

 INSERT INTO user VALUES (1 ,'A'),(2,'B'),(3,'C');

 DROP TABLE IF EXISTS payment;
 CREATE TABLE payment
 (payment_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
 ,user_id INT NOT NULL
 ,amount INT NOT NULL
 );

 INSERT INTO payment VALUES
 (1 ,1 ,2000),
 (2 ,1 ,1000),
 (3 ,1 ,1000),
 (4 ,2 ,1000 );

 DROP TABLE IF EXISTS product;

 CREATE TABLE product
 (product_id INT NOT NULL PRIMARY KEY
 ,user_id INT NOT NULL
 ,amount INT NOT NULL
 );

 INSERT INTO product VALUES
 (1 ,1 ,1000 ),
 (2,1 ,1000 ),
 (3,1 ,1000),
 (4,2 ,500 ),
 (5,2 ,500 ),
 (6,3 ,1000);

 SELECT x.*
      , SUM(y.amount) ttl 
   FROM user x 
   JOIN 
      ( SELECT user_id
             , amount 
          FROM payment 
     UNION ALL 
        SELECT user_id
             , amount*-1 
          FROM product
      ) y 
     ON y.user_id = x.user_id 
  GROUP 
     BY user_id;
 +---------+------+-------+
 | user_id | name | ttl   |
 +---------+------+-------+
 |       1 | A    |  1000 |
 |       2 | B    |     0 |
 |       3 | C    | -1000 |
 +---------+------+-------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:26:26.197

您不能直接加入表，因为表上的记录在`users`另一个表上有多个匹配项，而有些记录没有导致无效结果。我能想到的最好方法是计算每个用户在不同表上的总和，并将结果加入表中`user`。

```
SELECT  a.*,
        COALESCE(b.totalPayed,0) - COALESCE(c.total,0) balance
FROM    user a
        LEFT JOIN
        (
            SELECT  user_ID, SUM(amount) totalPayed
            FROM    payment
            GROUP   BY user_ID
        ) b ON a.ID = b.user_ID
        LEFT JOIN 
        (
            SELECT  user_ID, SUM(amount) total
            FROM    product
            GROUP   BY user_ID
        ) c ON a.ID = c.user_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/10a37/2)

输出

```
╔════╦══════╦═════════╗
║ ID ║ NAME ║ BALANCE ║
╠════╬══════╬═════════╣
║  1 ║ A    ║    1000 ║
║  2 ║ B    ║       0 ║
║  3 ║ C    ║   -1000 ║
╚════╩══════╩═════════╝ 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# javascript - TypeScript - 模块在运行时未定义

> ID：15451626
> 
> 赞同：11
> 
> 时间：2013-03-16T16:23:49.410
> 
> 标签：javascript, visual-studio-2012, typescript

我不明白我做错了什么。我在 VS2012 中创建了一个 TypeScript 项目，并在名为“Physics”的子目录中创建了一个名为“Vector.ts”的文件：

```
// Module
module Physics {

    // Class
    export class Vector {
        constructor(public x: number) { }
    }

} 
```

另外，我有以下 app.ts 文件：

```
/// <reference path="Physics/Vector.ts" />

window.onload = () => {
    var vector = new Physics.Vector(6);
}; 
```

该项目已成功编译，但是当我启动它时，出现以下异常：

> 0x800a1391 - JavaScript 运行时错误：“物理”未定义

我不明白我在做什么错...

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T16:40:21.920

如果您将 AMD 样式的模块与 Require.Js 等模块加载器一起使用，则需要导入语句。在此处查看史蒂夫接受的答案：[https](https://stackoverflow.com/a/14919495/1014822) ://stackoverflow.com/a/14919495/1014822 您的代码将类似于：

```
import Physics = module("Physics/Vector");

var vector = new Physics.Vector(6); 
```

...而且你不需要这个：`/// <reference path="Physics/Vector.ts" />`

如果你没有使用模块加载器，你只需要确保你的`Vector.js`输出文件包含在你的 html 页面的某个地方，并确保它在你的应用程序文件之前加载。在这种情况下，您`/// <reference path="Physics/Vector.ts" />`可以告诉 TS 在哪里可以找到您的模块，以便智能感知等工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-09T08:08:38.497

只是为了完整起见，如果您正在使用，`System`那么您将使用`import` `function`：

```
System.import("Physics/Vector"); 
```

如果你这样做，`Angular 2`那么你会想在你之前这样做`bootstrap` `import`

# php - 新闻和用户之间的多对多关系

> ID：15451628
> 
> 赞同：1
> 
> 时间：2013-03-16T16:23:53.403
> 
> 标签：php, symfony

我有一个名为的实体`News`，其中包含`ManyToMany`与`User`实体的关系。这意味着一篇文章可以由多个作者撰写。

```
/**
* @ORM\ManyToMany(targetEntity="GW2\UserBundle\Entity\User")
*/
private $authors; 
```

问题是我想以我用来添加的形式动态添加作者`News`，但我不知道如何**存储数据**，并**保持**我的两个实体之间的关系。作者的数量不固定，也不受限制。

我对该`collection`类型进行了一些研究并将其添加到我的`NewsType`中，但我真的不知道如何使用它。

* * *

**编辑：**这是我当前的 NewsType（没有作者`collection`）：

```
<?php
namespace GW2\SiteBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class NewsType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('title', 'text', array('error_bubbling' => true))
            ->add('introduction', 'textarea', array('attr' => array('class' => 'input-block-level redactor_content'), 'error_bubbling' => true))
            ->add('content', 'textarea', array('attr' => array('class' => 'input-block-level redactor_content'), 'error_bubbling' => true))
            ->add('publication', 'checkbox', array('required' => false, 'error_bubbling' => true))
            ->add('categories', 'entity', array(
                'class' => 'GW2SiteBundle:Category',
                'property' => 'name',
                'required' => false,
                'multiple' => true
            ))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'GW2\SiteBundle\Entity\News'
        ));
    }

    public function getName()
    {
        return 'gw2_sitebundle_newstype';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:31:00.207

我最终通过添加`collection`FOSUB 类型的 a 来解决我的问题，同时指定`allow_add`and`allow_delete`选项。

```
->add('authors', 'collection', array(
    'type'=> 'fos_user_username',
    'allow_add' => true,
    'allow_delete' => true
)) 
```

然后，我使用 JavaScript 添加了[添加-删除解决方案](http://symfony.com/doc/current/reference/forms/types/collection.html#adding-and-removing-items)，以在表单中动态添加字段（感谢[Thomas Potaire](https://stackoverflow.com/users/2155387/thomas-potaire)）。

# c++ - how to input a string of charater(100,101,102.....)(number of character is unlimited) and store numbers in array in C

> ID：15451630
> 
> 赞同：-2
> 
> 时间：2013-03-16T16:24:06.693
> 
> 标签：c++

i'm new member. And now, i'm having a exercise: "input a string of character(100,101,102...)(number of character is unlimited) and store numbers in array". My teacher provide us a function. It is ReadWord to read a number in the string. But i still have 2 issues. 1st, in the "for" loop, when i put the "puts" command to print the array's elements, i can't print the last element. And if i put the "puts" command outside of "for" loop, i can't print any element. Please tell me why and how to fixed it. Thanks you very much!

```
#include <stdio.h> 
#include <string.h> 
#include<conio.h>
const int MAX_NUM_LEN = 7; 
const int MAX_LINE_LEN = 50; 

int IsComma(int ch) { 
return (ch == ','); 
}
int ReadWord(char *num) {  
int ch, pos = 0; 
ch = getchar(); 
while (IsComma(ch)) 
   ch = getchar(); 
while (!IsComma(ch) && (ch != EOF)) {  
  if (pos < MAX_NUM_LEN) {  
     num[pos] = (char)ch;  
     pos++;  
 }  
  ch = getchar();  
 }  
num[pos] = '\0';  
return pos;  
}  

int main()
{
int i,j;
int count;
char **ds;
ds=new char *[50];
for (i=0;i<50;i++) ds[i]=new char [3];
char  num[MAX_NUM_LEN + 1]; 
int numLen;  
    char line[MAX_LINE_LEN + 1]; 
    int lineLen = 0;  
    i=0;count=0; 
    for (;;) { 
       numLen = ReadWord(num); 
       if (numLen == 0) break; 
       strcpy(ds[i],num);
   puts(ds[i]);
       i++;
} 
    j=i;
    printf("\n %d",j);
    for(i=0;i<j;i++) printf("%s ",ds[i]);
    for(i=0;i<j;i++) delete ds[i];
    delete []ds;
    getch();    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:01:59.220

I just tried your code and confirmed that the readword function is not recognizing EOF as a method of terminating. I changed it to 10 (LF) and it now recognizes the enter key and prints out all numbers. The problem is that getchar does not handle EOF the way one would expect. There are plenty of examples here on SO that talk about that.

Also, john is right, you have a few other bugs floating around that will cause you grief.

# iphone - iPhone 的 Phonegap 构建 - 说明

> ID：15451633
> 
> 赞同：0
> 
> 时间：2013-03-16T16:24:22.797
> 
> 标签：iphone, phonegap-build

如果我错了，我理解并纠正我：

为了使用 phoegap build 创建 iPhone 应用程序，我可以选择以下两个选项之一：

1.  通过 Apple Store-code-QR 分发应用程序不起作用，必须将文件 .ipa 上传到商店。

2.  使用 Ad Hoc 模式分发应用程序 - 我必须提前指定可以下载应用程序的设备。

有一种方法可以生成对所有人开放但不在商店中的有效应用程序？

如何创建类似于 ad hoc 模式但对所有人开放的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:31:50.610

如果不上传到应用商店，您将无法向所有人打开您的应用。

**Ad hoc**限制为 100 台设备。

**Enterprise** 适用于员工人数超过 500 人的公司的内部分发。

**应用商店**是共享任何拥有 iPhone 的人都可以访问该应用程序的选项。

**出于测试目的**，您不想将应用上传到 Appstore。

> 注册 iPhone 开发者计划
> 
> 生成证书签名请求
> 
> 登录 iPhone 开发者计划门户
> 
> 创建开发者证书、APP ID、添加设备（它必须包括您要运行的设备的所有设备唯一 ID）、配置文件。
> 
> 下载并使用开发人员证书和配置文件在注册设备中创建和测试您的应用程序

对于分发，对分发模式执行相同的操作。

[请在此处](http://docs.phonegap.com/en/2.4.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)阅读更多内容以开始使用 iOS

# c# - WebSecurity.ConfirmAccount(Id) 始终为 false

> ID：15451634
> 
> 赞同：0
> 
> 时间：2013-03-16T16:24:39.620
> 
> 标签：c#, asp.net-mvc-4, security, simplemembership

我有一个问题：我的网络安全总是在确认时抛出错误。我究竟做错了什么？这是我的验证操作（我已经调试过了，收到的 id 是正确的确认令牌：

```
 public ActionResult Validate(String Id)
    {
        if (String.IsNullOrEmpty(Id))
        {
            return View();
        }
        bool b = WebSecurity.ConfirmAccount(Id);
        if (b)
        {
            return View("ConfirmationSuccess");
        }
        return View("ConfirmationFailure");
    } 
```

这是我的注册操作：

```
 public ActionResult Register(RegisterModel model, string ReturnUrl)
    {
        if (ModelState.IsValid)
        {
            // Попытка зарегистрировать пользователя
            try
            {
                string confirmationToken = WebSecurity.CreateUserAndAccount(model.rEmail.ToLower(), model.rPassword, null, true);
                dynamic email = new Email("~/Views/Emails/RegisterConfirmation.cshtml");
                email.To = model.rEmail;
                email.ConfirmationToken = confirmationToken;
                email.Send();
                return RedirectToAction("EmailValidation", new { Email = model.rEmail.ToLower() });
            }
            catch (MembershipCreateUserException e)
            {
                string field = string.Empty;
                switch (e.StatusCode)
                {
                    case MembershipCreateStatus.DuplicateUserName:
                        field = "rEmail";
                        break;
                    case MembershipCreateStatus.InvalidPassword:
                        field = "rPassword";
                        break;
                    default:
                        field = "RegisterForm";
                        break;
                }
                ModelState.AddModelError(field, ErrorCodeToString(e.StatusCode));
            }
        }
        ViewBag.RegisterModel = model;
        ViewBag.ReturnUrl = ReturnUrl;
        ViewBag.LoginModel = new LoginModel();
        //ModelState.AddModelError("rEmail", "Пользователь с таким e-mail уже зарегистрирован");
        // Появление этого сообщения означает наличие ошибки; повторное отображение формы
        return View("Login");
    } 
```

注册后发送电子邮件，链接是正确的链接，但是当它转到 WebSecurity.ConfirmAccount(Id) 时，它总是抛出 false....

感谢您的宝贵时间，并为我糟糕的英语感到抱歉。

UPD：在我的 IIS 服务器上有一个用于降低所有 url 的转换器。可能是这样，它比较区分大小写的键吗？我该如何解决这个问题？

UPD：好的，问题出在小写 url 上。WebSecurity.ConfirmAccount 区分大小写......我在我的操作中做了一些解决方法，以便我可以获得正确的 ConfitmtionToken，但这不是完全正确的方法，虽然我认为可能有两个相同的 ConfirmationToken.ToLower()，所以，请有人给我指出正确的方法。这是我的解决方法：

```
public ActionResult Validate(String Id)
    {
        if (String.IsNullOrEmpty(Id))
        {
            return View();
        }
        //bool b = WebSecurity.ConfirmAccount(Id);
        using (var ctx = new DBContext())
        {
            Id = ctx.wpMembership.Where(s => s.ConfirmationToken.Equals(Id, StringComparison.InvariantCultureIgnoreCase)).FirstOrDefault().ConfirmationToken;
        }

        if (WebSecurity.ConfirmAccount(Id))
        {
            return View("ConfirmationSuccess");
        }
        return View("ConfirmationFailure");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T18:38:43.387

这是因为您传递的是帐户 ID 而不是确认令牌。您需要传递确认令牌。

确认令牌由 CreateAccount(String, String, Boolean)、CreateUserAndAccount(String, String, Object, Boolean) 和 GeneratePasswordResetToken(String, Int32) 方法生成。令牌通常作为电子邮件消息中的链接发送给用户，用户单击该链接以验证他或她的身份。

# ruby-on-rails - 在请求期间设置 Time.zone：线程安全？

> ID：15451637
> 
> 赞同：14
> 
> 时间：2013-03-16T16:25:12.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, thread-safety, singleton

我想让我的应用程序的用户指定一个时区，然后在每个请求开始时设置他们的时区。在 Rails，AFAICT 中，这是通过设置单例对象来完成的：

```
Time.zone = "America/Los_Angeles" 
```

我对最佳实践的理解是，一般来说，单例应该设置一次。例如在应用程序配置中。

从对类似问题的回答中，有人建议将其设置在 ApplicationController

```
class ApplicationController < ActionController::Base
  before_filter :set_timezone
  def set_timezone
    # current_user.time_zone #=> 'London'
    Time.zone = current_user.time_zone if current_user && current_user.time_zone
  end
end 
```

这安全吗？还是我冒着让一个线程影响另一个线程的风险？我将尝试对此进行测试，但这不是最简单的测试场景，所以我想我应该看看是否有人已经这样做了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-16T16:37:47.503

如果您查看实现此功能的[代码](https://github.com/rails/rails/blob/3-2-stable/activesupport/lib/active_support/core_ext/time/zones.rb)，您可以看到当前区域存储在线程局部变量中，因此每个线程都可以设置 Time.zone 而不会干扰其他线程。

# java - 来自两个不同 JVM 的 GUID

> ID：15451639
> 
> 赞同：1
> 
> 时间：2013-03-16T16:25:27.877
> 
> 标签：java, unique, guid

我正在编写一个软件，我的代码在两台不同的机器上运行。如果我在多个 JVM 上具有生成逻辑，我的 GUID 在整个集群中是否仍然是唯一的。在我的特定用例中发生冲突的可能性是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:34:07.347

如果您的“GUID”是 a[`UUID.randomUUID()`](http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html#randomUUID%28%29)那么[概率很低](http://en.wikipedia.org/wiki/Universally_unique_identifier#Random_UUID_probability_of_duplicates)。否则，这取决于[您生成 GUID](https://www.rfc-editor.org/rfc/rfc4122#section-4.2.2)的方式，但它们背后的一般原则是您有足够的随机位，因此不太可能发生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:45:46.013

万一您的分布式系统的所有实例都使用一个公共数据库，那么您可以在该数据库上创建一个序列并使用该序列中的值来避免重复的 ID。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T16:37:00.737

全球唯一 ID，在这种情况下，全球意味着通用。

保证生成的每个 GUID 在 Universe 中都是唯一的。这就是 GUID 的全部目的。

# mysql - mysql_install_db 给出致命错误：找不到 my-default.cnf

> ID：15451640
> 
> 赞同：10
> 
> 时间：2013-03-16T16:25:27.847
> 
> 标签：mysql, database, installation

我已经下载了 MySQL，我正在尝试设置 MySQL 授权表，但是当我输入：

```
scripts/mysql_install_db --basedir=/usr/local 
```

我得到上面的错误。

我不确定如何修复它，就像`my-default.cnf`在`support_files`目录中一样，我相信我设置`basedir`正确。

（这是在mac上）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T17:59:58.357

（我假设你正在使用 Homebrew，因为我在我的 macbook 上尝试在 Homebrew 上做同样的事情时遇到了同样的问题）

我相信你需要将它指向地窖中的实际 mysql 目录作为它的 basedir，而不是 /usr/local （因为这只是从地窖目录符号链接的东西）。

所以，就我而言，我不得不使用：

```
$ mysql_install_db --basedir=/usr/local/Cellar/mysql/5.6.10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-23T06:19:02.557

需要复制 /usr/share/my.cnf
试试这个：

```
sudo cp /etc/mysql/my.cnf /usr/share/mysql/my-default.cnf
sudo mysql_install_db 
```

它对我在 Ubuntu 14.04 和 mysql 5.6.33 上的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-20T19:10:10.667

为了扩展到 rascalking 的答案，当前的 mysql 通过 brew 安装到 /usr/local/mysql/ 。

但是要解决时间戳问题和权限问题，完整的命令将是：

```
sudo mysql_install_db --basedir=/usr/local/mysql --explicit_defaults_for_timestamp 
```

如果您跳过了说明，请不要忘记先设置密码：

```
/usr/local/mysql/bin/mysqladmin -u root password 'new-password' 
```

# arrays - 计算平均数组值的高效并行调度算法

> ID：15451641
> 
> 赞同：3
> 
> 时间：2013-03-16T16:25:28.640
> 
> 标签：arrays, multithreading, parallel-processing, multiprocessing, average

我试图在单台机器上使用多个线程来查找浮点值数组的平均值。我不关心数组的大小或内存限制（假设一个中等大小的数组，大到足以保证多个线程）。特别是，我正在寻找最有效的***调度算法***。在我看来，*静态块*方法将是最有效的。

因此，鉴于我有 x 个机器核心，将数组分块为 array.size/x 值并让每个核心对它们各自的数组块的结果求和似乎是合理的。然后，将每个核心的总和结果相加，最终结果是这个值除以数组元素的总数（注意：在数组元素的 # 不能被 x 整除的情况下，我知道优化在线程中尽可能均匀地分布元素）。

该数组显然将在线程之间共享，但由于不涉及写入，我不需要涉及任何锁定机制或担心同步问题。

我的问题是：这实际上是解决***这个问题***的最有效方法吗？

相反，例如，考虑静态交错方法。在这种情况下，如果我有四个核心（线程），那么线程一将对数组元素 0、4、8、12 进行操作……而线程二将对元素 1、5、9、13 进行操作……这将看起来更糟，因为每个核心都会不断地获得缓存未命中，而静态块方法意味着每个核心都在成功值上运行并利用数据局部性。我运行的一些测试似乎支持这一点。

那么，谁能指出比静态块更好的方法，或者确认这很可能是最好的方法？

**编辑：**
我正在使用 Java 和 Linux (Ubuntu)。我尽量不要过多考虑所涉及的语言/平台，而只是从调度的角度抽象地看待问题，涉及手动将工作负载分配给多个线程。但我知道语言和平台是重要因素。

**编辑2：**
这里有一些时间（纳米时间/ 1000）具有不同的数组大小（双打）。
顺序计时使用单个 java 线程。其他人使用并行工作的所有可用 (4) 内核实现了各自的调度策略。

***百万元素：***
---连续
5765
1642
1565
1485
1444
1511
1446
1448
1465
1443
---静块
15857
4571
1489
1529
1547
1496
1445
1415
1452
1661
---静态交错
9692
4578
3071
7204
5312
2298
4518
2427
1874
年1900

***50000000个元素：***
---顺序
73757
69280
70255
78510
74520
69001
69593
69586
69399
69665
---静块
62827
52705
55393
53843
57408
56276
56083
57366
57081
57787
---静态交错
179592
306106
239443
145630
171871
303050
233730
141827
162240
292421

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:58:22.257

您的系统似乎没有足够的内存带宽来利用 4 个线程来解决这个问题。对元素进行浮点加法不足以使 CPU 保持在内存可以传输数据的速率下忙碌……您的 4 个内核共享相同的内存控制器/DRAM……并且正在等待内存。如果您使用 2 个线程而不是 4 个线程，您可能会看到相同的加速。

正如您所说并确认，交错是一个坏主意，为什么要浪费宝贵的内存带宽将数据带入核心，然后只使用其中的四分之一。如果幸运并且线程在某种程度上同步运行，那么您将在 2 级或 3 级缓存中重用数据，但您仍会将数据带入 L1 缓存并且只使用一小部分。

**更新：**当添加 5000 万个元素时，一个问题是精度损失，5000 万的 log base 2 约为 26 位，双精度浮点有 53 个有效位（52 个显式和 1 个隐含）。最好的情况是所有元素都具有相似的指数（幅度相似）。如果数组中的数字具有大范围的指数，情况会变得更糟，在最坏的情况下，范围很大并且它们按数量级降序排序。通过对数组进行排序并按升序添加，可以提高最终平均值的精度。请参阅此 SO 问题，以更深入地了解添加大量项目时的精度问题：[Find the average within variable number of doubles](https://stackoverflow.com/questions/10516287/find-the-average-within-variable-number-of-doubles)。

# clojure - Clojure 弹性搜索 API Elastisch 不返回结果或文档

> ID：15451648
> 
> 赞同：0
> 
> 时间：2013-03-16T16:25:49.327
> 
> 标签：clojure, elasticsearch, elastisch

我正在尝试 clojure 弹性搜索 API [Elastisch](http://clojureelasticsearch.info/articles/getting_started.html)。

我正在关注文档中给出的演示代码，我正在为以下代码获取文档/索引创建的输出

```
(defn demo-search-connect []
  (esr/connect! "http://127.0.0.1:9200")
  (let [mapping-types {:person {:properties {:username   {:type "string" :store "yes"}
                                         :first-name {:type "string" :store "yes"}
                                         :last-name  {:type "string"}
                                         :age        {:type "integer"}
                                         :title      {:type "string" :analyzer
                                          "snowball"}
                                         :planet     {:type "string"}
                                         :biography  {:type "string" :analyzer   "snowball" :term_vector "with_positions_offsets"}}}}
    doc {:username "happyjoe" :first-name "Joe" :last-name "Smith" :age 30 :title "Teh Boss" :planet "Earth" :biography "N/A"}]

 (esi/create "myapp2_development" :mappings mapping-types)
;; adds a document to the index, id is automatically generated by ElasticSearch
;= {:ok true, :_index people, :_type person, :_id "2vr8sP-LTRWhSKOxyWOi_Q", :_version 1}
(println (esd/create "myapp2_development" :person doc :settings {"number_of_shards" 1}))
))

;Supposed to return an output for the search query 
(defn demo-search-index [] 
  (esr/connect! "http://127.0.0.1:9200")
  (esd/search "myapp2_development" "person" :query {:term {:last_name "Smith"}})
  )

;Supposed to return the document with the given id
(defn get-document [id]
  (esr/connect! "http://127.0.0.1:9200")
  (esd/get "myapp2_development" "person" id)
  ) 
```

我得到的第一个函数的输出为：

```
{:ok true, :_index myapp2_development, :_type :person, :_id GzNdzrqhQECQDlkSbq-GHA, :_version 1} 
```

从输出中，我相信该文档已正确编入索引

问题是第二个和第三个函数返回：

```
{:took 153, :timed_out false, :_shards {:total 5, :successful 5, :failed 0}, :hits {:total 0, :max_score nil, :hits []}} 
```

和`nil`分别。

我在这里想念什么？

PS：我是clojure和弹性搜索的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:31:37.887

`esd/get`失败，因为您的映射类型`:person`不是`"person"`（关键字与字符串）。

您的代码`esd/search`也有同样的问题，但除此之外，您应该更改`last_name`为`last-name`小写字母`"Smith"`，以使`"smith"`一切正常。

# opencv - Sobel算子的顺序是什么？

> ID：15451653
> 
> 赞同：3
> 
> 时间：2013-03-16T16:26:07.520
> 
> 标签：opencv

OpenCV 文档说，(order == 0) 意味着不会在这个方向上应用导数，即不会对该内核执行任何计算。

(Order == 1) 意味着这个方向的图像和内核的简单卷积。

但是 (order == 2) 是什么意思？它如何影响计算？

我正在实现自写的 Sobel 运算符，它适用于 order == 1，但我无法获得与 OpenCV 的二阶 Sobel 运算符类似的任何东西，称为 cv::Sobel(src, dest, 0, 2, 0)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:31:44.727

是的。一阶估计特定方向的一阶导数。二阶估计二阶导数（强度变化率的变化率）。等等。

考虑位置（强度）、速度（阶数 = 1）、加速度（阶数 = 2）、加加速度（加速度变化率 - 阶数 3）

通常高阶导数不太有用，特别是由于图像的离散化和图像操作通常使用的有限尺寸模板。

理论上，两次应用 Sobel 一阶应该会给您二阶 Sobel，但实际上由于图像和 Sobel 算子的离散化，这不是真的。

# prolog - GNU序言，打印到控制台？

> ID：15451654
> 
> 赞同：2
> 
> 时间：2013-03-16T16:26:10.553
> 
> 标签：prolog, gnu

我很难用 gprolog 调试我的代码，有人知道在我编译后如何将变量的值打印到控制台吗？我尝试在我的代码中使用打印、写入和跟踪，但没有任何后果，甚至没有错误。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:35:21.230

会话示例：在控制台中启动 gprolog

```
GNU Prolog 1.3.0
By Daniel Diaz
Copyright (C) 1999-2007 Daniel Diaz
| ?- [user].
compiling user for byte code...
test_pos(P) :- P > 0 -> true ; format('~w is invalid', [P]).

user compiled, 2 lines read - 762 bytes written, 180411 ms

(8 ms) yes
| ?- trace,test_pos(-3).
The debugger will first creep -- showing everything (trace)
      1    1  Call: test_pos(-3) ? 
      2    2  Call: -3>0 ? 
      2    2  Fail: -3>0 ? 
      2    2  Call: format('~w is invalid',[-3]) ? 
-3 is invalid
      2    2  Exit: format('~w is invalid',[-3]) ? 
      1    1  Exit: test_pos(-3) ? 

yes
{trace}
| ?- 
```

在消息之前`user compiled,...`我输入 Ctrl-D 强制编译

高温高压

# android - 在安卓系统应用上启用数据连接

> ID：15451656
> 
> 赞同：1
> 
> 时间：2013-03-16T16:26:12.733
> 
> 标签：android, 3g

我正在尝试制作一个 android**系统**应用程序（为我和朋友），让我通过我的服务器控制我的 android 手机。实际上我在启用/禁用数据连接时遇到了问题。当我搜索时，我发现主题说不可能，或者给出不再支持的方式（通过使用违反）。这对于 GPS 控制来说是完全一样的，但我找到了一种方法，因为我的应用程序是系统应用程序。

所以我想知道是否有人知道在未经用户同意的情况下在系统应用程序上启用和禁用数据连接的方法。我没有在api上找到任何东西。

谢谢 ！

# matlab - 发布功能与应用示例

> ID：15451666
> 
> 赞同：1
> 
> 时间：2013-03-16T16:26:49.507
> 
> 标签：matlab

我一直在尝试发布我在 matlab 中编写的函数。如何输入变量以向读者展示函数适用于这些数字？我尝试使用

```
publish(passage3([1 2 3 4;2 3 4 5])) 
```

但我收到以下消息：

```
Error in LocateFile elseuf (length(dir(file))==1) Error in publish (line 87) fullPathtoScript=LocateFile(file) Error using passage3 not enough input arguments" 
```

当我在同一个示例中激活该功能时，它工作得很好，但关于发布......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T04:00:10.103

好吧，我发现文件 func.m 的正确命令是 `publish('func.m', struct('codeToEvaluate', 'func(matA,matB,...)', 'showCode', true))`

# binding - Ember：绑定布尔元素属性不起作用？

> ID：15451667
> 
> 赞同：2
> 
> 时间：2013-03-16T16:26:50.280
> 
> 标签：binding, attributes, ember.js

尝试从[指南](http://emberjs.com/guides/templates/binding-element-attributes/)中执行布尔“绑定元素属性”的事情。

javascript是：

```
window.App = Ember.Application.create();

window.App.NumberTextField = Ember.TextField.extend({
  valueChanged: (function() {
    return this.get("controller").set("isNotCompleteId", this.get("value").length !== 6);
  }).observes("value")
});

window.App.LandingController = Ember.ObjectController.extend({
  isNotCompleteId: true
});

window.App.Router.map(function() {
  return this.route("landing", {
    path: "/"
  });
}); 
```

模板是：

```
<h3>Example:</h3>
<script type="text/x-handlebars">    
<p>
    <a href="#"
       {{bindAttr disabled="isNotCompleteId"}}>
         Join number:
    </a>
    {{view App.NumberTextField valueBinding="idEntered" size="8"}}

    <p>{{idEntered}}</p>
</p>

</script> 
```

这个 jsfiddle 显示（我认为是）不良行为：http: [//jsfiddle.net/csterritt/AaTpd/11/](http://jsfiddle.net/csterritt/AaTpd/11/)

检查“结果”窗格中的“加入编号：”链接。它没有“禁用”属性（我相信它应该）。更改文本框中的文本直到它有六个字符不会更改属性（它应该在六个字符处）。

如果我将 HTML 的第 7 行更改为 {{bindAttr class="isNotCompleteId:foo:bar"}} 它按预期工作（尽管类以“bar”开头，因此，即使我设置了控制器属性也以 false 开头它是真的......？？？）。

漏洞？我的困惑？

谢谢！

# javascript - window.location.href.match 不工作

> ID：15451672
> 
> 赞同：1
> 
> 时间：2013-03-16T16:27:14.803
> 
> 标签：javascript, jquery

这是代码：

```
$(function() {

    var pathname = (window.location.href.match(/[^\/]+$/)[0]);

    $('#menu dl dd a#toparrow').each(function() {
        if ($(this).attr('href') == pathname) {
            $(this).addClass('currenttop');
        }
    });
}); 
```

这是我网站的链接：http: [//bluraymoviestore.com](http://bluraymoviestore.com)

该脚本的目的是使箭头图像停留在当前页面上，就像您第一次单击类别时所做的那样。

当我单击父页面时，该脚本有效，但是当我单击同一类别下的下一页时，该脚本不再有效（例如：适用于`/bluraynewreleases`但不适用`/bluraynewreleases-2625374011-rc-2-new_releases.html`）。我需要在代码中添加什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:42:24.087

您的正则表达式不匹配任何内容，因此当您尝试访问`[0]`它时会引发错误。假设您的正则表达式是正确的，这应该可以解决问题。

```
$(function(){
    var matches = window.location.href.match(/[^\/]+$/);
    if (matches && matches.length) {
        var pathname = (matches[0]);

        $('#menu dl dd a#toparrow').each(function() {
            if ($(this).attr('href') == pathname) {
                $(this).addClass('currenttop');
            }
        });
    }
}); 
```

# javascript - Objective C检查元素是否存在于Web视图中

> ID：15451674
> 
> 赞同：1
> 
> 时间：2013-03-16T16:27:26.227
> 
> 标签：javascript, ios, webview, element

回答：这就是你的做法，因为我无法让以下任何解决方案发挥作用。基本上，您必须使用 javascript，检查文档是否准备就绪，然后将值返回给目标 c。简单优雅。在目标 C 中，webviewdidfinishload：

```
 NSLog(@"Didload:Check if webview %d loading or loaded", X);
        // The JS File
        NSString *filePath = [[NSBundle mainBundle] pathForResource:@"UIWebViewSearch" ofType:@"js" inDirectory:@""];
        NSData *fileData = [NSData dataWithContentsOfFile:filePath];
        NSString *jsString = [[NSMutableString alloc] initWithData:fileData encoding:NSUTF8StringEncoding];
        [webView stringByEvaluatingJavaScriptFromString:jsString];
        NSString *result1 = [webView stringByEvaluatingJavaScriptFromString:@"uiWebview_ReturnDocStatus()"];
        NSLog(@"docread= %@", result1);
        int RREsult = [result1 intValue];
        if (RREsult == 0) {
            NSLog(@"Didload: webview %d not yet loaded", X);
        }
        else if (RREsult == 1){
            NSLog(@"Didload: webView %d loaded", X);
        } 
```

然后，在 javascript 中，在我的 UIWebViewSearch.js 文件中：

```
function uiWebview_ReturnDocStatus() {
alert ("check");
if(document.readyState == 'complete'){
    return 1;
}
else {
    return 0;
}
} 
```

下面是我的代码。我正在尝试确定我的 Web 视图中是否存在某个元素。我不想使用 document.body 等将整个 html 文本提取到目标 c，因为这会占用太多内存。我想要快点的东西。但以下选项均无效。请帮忙。

```
NSString *oneString = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('moodlez_documentnotyetloaded').value"];
BOOL test = [webView stringByEvaluatingJavaScriptFromString:@"return !!document.getElementById('moodlez_documentnotyetloaded');"]; 
```

编辑1：

这是我的目标 C 代码，后跟 javascript。这段代码在 didfinishload 中。

```
 if (1 ==1 ) {
    //doesn't work
    NSString *exists = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('moodlez_documentnotyetloaded');"];
    NSLog(@"exists value=%d", [exists intValue]);

}
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"UIWebViewSearch" ofType:@"js" inDirectory:@""];
NSData *fileData = [NSData dataWithContentsOfFile:filePath];
NSString *jsString = [[NSMutableString alloc] initWithData:fileData encoding:NSUTF8StringEncoding];
[webView stringByEvaluatingJavaScriptFromString:jsString];
[webView stringByEvaluatingJavaScriptFromString:@"uiWebview_InjectJSToTellIfLoading()"]; 
```

.JS 代码：

```
 function uiWebview_InjectJSToTellIfLoading() {
  if(document.readyState == 'complete'){
var element = document.createElement('input');
element.setAttribute('type','hidden');
element.setAttribute('id','moodlez_documentloaded');
document.body.appendChild(element);

   }
   else {
if (1 == 1) {
    var element = document.createElement('input');
    element.setAttribute('type','hidden');
    element.setAttribute('id','moodlez_documentnotyetloaded');
    document.body.appendChild(element);
} 
```

} }

编辑2：好的，有两种方法可以解决这个问题。第一种是使用 javascript 从 webview 中获取 html 代码并手动搜索 moodlez 标签。这种方法是不可取的，因为对于大型网页可能需要 1-2 秒，但它确实有效。第二个是创建一个 javascript 函数来检查文档是否准备好，如果是，则修改一个 javascript 变量，然后可以从目标 c 中检查该变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:39:52.747

这是我的目标 C 代码，后跟 javascript。这段代码在 didfinishload 中。

```
 if (1 ==1 ) {
        //doesn't work
        NSString *exists = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('moodlez_documentnotyetloaded');"];
        NSLog(@"exists value=%d", [exists intValue]);

    }
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"UIWebViewSearch" ofType:@"js" inDirectory:@""];
    NSData *fileData = [NSData dataWithContentsOfFile:filePath];
    NSString *jsString = [[NSMutableString alloc] initWithData:fileData encoding:NSUTF8StringEncoding];
    [webView stringByEvaluatingJavaScriptFromString:jsString];
    [webView stringByEvaluatingJavaScriptFromString:@"uiWebview_InjectJSToTellIfLoading()"]; 
```

.JS 代码：

```
function uiWebview_InjectJSToTellIfLoading() {
if(document.readyState == 'complete'){
    var element = document.createElement('input');
    element.setAttribute('type','hidden');
    element.setAttribute('id','moodlez_documentloaded');
    document.body.appendChild(element);

}
else {
    if (1 == 1) {
        var element = document.createElement('input');
        element.setAttribute('type','hidden');
        element.setAttribute('id','moodlez_documentnotyetloaded');
        document.body.appendChild(element);
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:06:23.020

其实这两种说法都是无效的。

```
NSString *oneString = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('moodlez_documentnotyetloaded').value"]; 
```

您不应该为不存在的元素调用 .value 以防万一它不存在。

```
BOOL test = [webView stringByEvaluatingJavaScriptFromString:@"return !!document.getElementById('moodlez_documentnotyetloaded');"]; 
```

`stringByEvaluatingJavaScriptFromString`返回 NSString 不是 BOOL

正确的方法可能是这样的

```
NSString *exists = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('moodlez_documentnotyetloaded');"]; 
```

然后检查`exists`变量的值。

# c# - 单击按钮时将数据从一个 asp.net 页面发布到另一个页面

> ID：15451679
> 
> 赞同：0
> 
> 时间：2013-03-16T16:27:40.080
> 
> 标签：c#, asp.net

我有 2 个名为 webform1.aspx、webform2.aspx 的 ASP.Net WebForm。Webform1.aspx 包含带有姓名、地​​址、年龄等文本框的注册区域，用于注册学生资料。Webform2.aspx 包含一个消息区域，以确保已注册的学生有效。

我在 webform1.aspx 中有一个提交按钮。点击后，它会将注册数据发布到 Webform2.aspx 的消息区域，如果有效则发布到数据库。那么，如何才能将详细信息从一种形式传递到另一种形式？我想要 C#.net 中的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:02:34.337

拥有 2 个 aspx 页面来完成这个简单的注册任务并不是真正应该如何进行 ASP.net 编程。

这样做的标准 ASP.net 方法是：从一页 aspx 开始，它具有：

*   姓名、地址、密码输入
*   提交按钮
*   留言区

将消息区域设置为不可见（在 IDE 中右键单击它并选择属性）。

向提交按钮添加一个 onclick 函数（在 IDE 中双击该按钮），并在该函数中放置所有验证代码，以及使名称、地址、密码和提交输入不可见并使消息区域可见的代码。

# php - 找出 CLI Phalcon 脚本中的任务和操作

> ID：15451680
> 
> 赞同：1
> 
> 时间：2013-03-16T16:27:44.870
> 
> 标签：php, phalcon

我正在尝试创建一个调试实用程序，它打印出脚本花费的时间、它使用的实际任务名称和它运行的实际操作

```
<?php
$di = new Phalcon\DI\FactoryDefault\CLI();

$console = new \Phalcon\CLI\Console();
$console->setDI($di);
$console->handle($argv);

// something like this maybe???
$d = $console->getDI();
$d->get('dispatcher')->getTaskName();
?> 
```

我如何获取任务和操作名称（我不想从 argv 中获取）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T23:40:19.917

```
$dispatcher = $console->getDI()->getShared('dispatcher');
$task       = $dispatcher->getTaskName();
$action     = $dispatcher->getActionName(); 
```

应该做的伎俩。

# javascript - 如何使用 Javascript 获取 textarea 的值并将其放入另一个 textarea？

> ID：15451682
> 
> 赞同：0
> 
> 时间：2013-03-16T16:27:50.577
> 
> 标签：javascript, html, textarea

我正在尝试使用 Javascript 开发一个 url 解码器，但我的代码不起作用，谁能告诉我怎么做，thx

```
<textarea id="input"></textarea>
<br />
<button id="yes" align="center" onclick="getInput(document.getElementById('input')">Click to transfer</button>
<p>The decoded URL：&lt;/p>
<textarea id="decode"></textarea>
<script>
    function getInput(inputElement) {

        var decoded = "";

        if inputElement == 0 {

            document.write("You didn't input anything");

        } else if {

            var uri = inputElement;
            var uri_decode = decodeURIComponent(uri);
            var uri_encode = encodeURIComponent(uri)

            document.getElementById("decode").innerHTML = uri_decode;
            document.getElementById("encode").innerHTML = uri_encode;

            decoded = uri_decode;

        }
        return decoded;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:32:42.550

假设逻辑在您的原始代码中正确完成。

由于它是文本区域，因此您必须使用`value`

尝试 ：

```
document.getElementById("decode").value = uri_decode; 
```

更多房产在[这里](http://www.w3schools.com/jsref/dom_obj_textarea.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T11:12:29.663

尽管我对此还很陌生，但我想我发现了一些错误，我不确定它是否能解决你的问题，但你应该试一试。

1. `<script>`

需要是：

`<script type="text/javascript">`

否则你的浏览器不知道它需要什么类型的脚本。

2.`if inputElement == 0 {`

需要是：“ `if (inputElement == 0) {`

3.`} else if {`

应该`} else {`

关闭脚本保持不变： `</script>`

我希望这有效，如果没有，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:36:01.950

我的建议是使用 jQuery Api。

单击按钮后，您可以使用

```
$('#transfer').click(function() { } 
```

然后简单地使用从第一个文本框中收集文本

```
var url = $('#urlToDecode').val(); 
```

然后使用将“url”变量写入第二个文本框中

```
$("#decodedURL").val = url; 
```

希望有帮助！:) 注意：您需要链接到由 Google 托管的 jQuery API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T16:31:19.190

在您的*else if*中，您没有指定 if 语句。猜你的意思是*别的*

# c# - 如何将变量值保存在内存中？

> ID：15451688
> 
> 赞同：1
> 
> 时间：2013-03-16T16:28:35.123
> 
> 标签：c#, windows-phone-8, restsharp

每个用户都必须登录才能访问我的应用程序。之后，我需要使用用户的登录名进行几次`RestSharp`请求。如何在应用退出之前保留此登录信息？我想把它保存在`AppResources.resx`文件中，但我不知道如何在这个文件中设置值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:05:23.047

将其保存在独立存储中

[http://www.geekchamp.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage](http://www.geekchamp.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:25:17.007

最简单的解决方案 - 在[IsolatedStorageSettings中保存数据](http://msdn.microsoft.com/ru-ru/library/system.io.isolatedstorage.isolatedstoragesettings%28v=vs.95%29.aspx)

# php - PHP Foreach 循环 + PDO

> ID：15451689
> 
> 赞同：-2
> 
> 时间：2013-03-16T16:28:39.587
> 
> 标签：php, email, pdo, foreach

我正在尝试为我正在编写的网络应用程序设置电子邮件“系统”。如果您在用户表中的角色是

> 3

并且您的帐户状态是

> '活性'

然后当新用户注册或发送登录请求时，所有管理员都会收到电子邮件。到目前为止，我只是对电子邮件进行硬编码，但在营销应用程序时，公司不希望必须编写代码来更改电子邮件。所以我试图“动态地”做到这一点

我的模型在很大程度上要感谢 Thomas！：

```
 {
        $sql = "SELECT * from users WHERE status = 'Activated' and role = 3";
        $admin_email = $this -> db -> conn_id -> prepare($sql);
        $admin_email -> execute();
        $emails = array();

        if ($admin_email)
        {
            if ($admin_email -> rowCount() > 0)
            {
                foreach ($admin_email -> fetchall() as $row)
                {
                    $emails[] = $this -> encrypt -> decode($row['email']);
                }
                return $emails;
            }
        }
    } 
```

和控制器：

```
 {

        $this -> load -> model('login_model');
        $this -> load -> library('email');
        $this -> load -> library('encrypt');

        $emails = $this -> login_model -> admin_email();

        $first = $this -> input -> post('fname');
        $last = $this -> input -> post('lname');
        $email = $this -> input -> post('email');

        $this -> email -> from($email);
        $this -> email -> to($emails);
        $this -> email -> reply_to($email);
        $this -> email -> subject('' . $first . ' ' . $last . ' Account Request');
        $this -> email -> message('{unwrap}Hello this is ' . $first . ' ' . $last . ', I am requesting to be added to the staff log-in.{/unwrap}');

        if (!$this -> email -> send()) 
        {
            $this -> session -> set_flashdata('email', 'Email Was Not Sent!');
            $this -> request_account();
        } else 
        {
            $this -> session -> set_flashdata('login', 'Request Sent!');
            redirect('login_controller/index', 'location');
        }
    } 
```

只是从我的观察中更深入地研究这一点：

1.  返回的第一行工作得很好，但出于测试目的，我有两个管理员帐户，就像我刚才说的，第一行只收到电子邮件。并说如果我删除第一行（第一个管理员），那么第二行会得到它。所以我觉得我的 foreach 失败了，但我不知道为什么甚至如何纠正我的错误。

如果有人能告诉我我在这里做错了什么，那就太好了，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:34:49.457

无论如何，您的函数只会返回一封电子邮件，因此您可能想尝试一下

```
 $sql = "SELECT email from users WHERE status = 'Activated' and role = 3";
    $admin_email = $this -> db -> conn_id -> prepare($sql);
    $admin_email -> execute();

    $emails = array(); // initialize empty array

    if ($admin_email)
    {
        $encryptedEmails = $admin_email->fetchAll();
        foreach ($encryptedEmails as $row)
        {
            $emails[] = $this->encrypt->decode($row['email']); // insert the email at the end of the array
        }
    }

    return $emails; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T18:40:48.960

（编辑：删除了我的第一个答案......）

也许（我不确定）你不应该在你的 foreach 循环中使用两个变量。
参考： http: [//php.net/manual/fr/control-structures.foreach.php](http://php.net/manual/fr/control-structures.foreach.php)

如果你这样做：

```
 foreach ($admin_email -> fetch() as $row)
            {
                $row = $row['email'];
            }

            $email = $this -> encrypt -> decode($admin_email); 
```

您的编码电子邮件现在应该在 $admin_email 数组中......因为 foreach 处理 $admin_email 数组项一项一项并必须将其返回到数组（而不是简单的字符串变量）

然后检查您的解码功能可以处理数组。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-16T16:40:58.723

您的 admin_email 函数看起来有点奇怪

*   您正在调用 PDO 语句变量`$admin_email`，而它不包含任何电子邮件。它使您的代码非常自我混淆。
*   您正在以不应使用的方式使用 try..catch 运算符。
*   太多过度`if`s
*   什么都没做`$row['email']`
*   有一些奇怪的`decode()`功能，我怀疑它是无用的或基于一些错误的假设。

所以，我决定用更明智的方式重写这个函数

```
function admin_email() 
{
    $sql = "SELECT email from users WHERE status = 'Activated' and role = 3";
    $stm = $this->db->conn_id->prepare($sql);
    $stm->execute();
    return $stm->fetchAll();
} 
```

它将返回一个包含管理员电子邮件的数组。

# php - 我如何通过 .htaccess 更改我的网站地址

> ID：15451692
> 
> 赞同：1
> 
> 时间：2013-03-16T16:28:51.157
> 
> 标签：php, .htaccess

**我如何通过 .htaccess 更改我的网站地址，我的 url 结构是：

```
http://mydomain.com/portfolio.php?page=3 
```

其中，portfolio.php 是一个页面，页面 id 的活动导航是 3，我用来创建这个 url 来对 seo 友好

```
http://mydomain.com/page/portfolio/ 
```

但是当创建这个 id 不起作用或页面显示内部错误时。请帮助解决这个问题，我找不到这个问题可以解决的任何地方。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:31:00.783

尝试这个...

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^(.*)/portfolio/$ /portfolio.php?page=$1 [L] 
```

您可以`page 3`通过访问此 URL 访问

```
http://mydomain.com/3/portfolio/ 
```

**或者**

只需更改`RewriteRule`为

```
RewriteRule ^page(.*)/portfolio/$ /portfolio.php?page=$1 [L] 
```

现在`page 3`将开启

```
http://mydomain.com/page3/portfolio/ 
```

# javascript - 当定义为百分比时，如何获得 div 的物理大小？

> ID：15451694
> 
> 赞同：3
> 
> 时间：2013-03-16T16:28:53.907
> 
> 标签：javascript, asp.net, .net

当的高度和宽度属性最初定义为百分比时，我正在寻找一种方法来收集`<div>`以像素为单位的物理大小。`<div>`

将 's 的大小保持为一个百分比是很重要的，因为我需要找到一种方法来在后面的代码（ASP.NET）或 javascript 中获取像素大小。

提前致谢，

亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:32:33.760

以下是使用 JavaScript 的方法。

[jsFiddle](http://jsfiddle.net/Tyriar/pvUC7/1/)

```
var div = document.getElementById('div-id');
alert(div.offsetWidth);
alert(div.offsetHeight); 
```

当页面调整大小时，通过处理 onresize 来捕获它。

[jsFiddle](http://jsfiddle.net/Tyriar/fdTqX/)

```
window.onresize = function () {
    var div = document.getElementById('div-id');
    alert(div.offsetWidth);
    alert(div.offsetHeight);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:33:46.927

您可以利用 jQuery 的 'resize' 事件和 width()/height() 方法，例如：

```
$('#yourElement').resize(function()
{
    var w = $(this).width();
    var h = $(this).height();

    // Do something with the data
    // ...
}); 
```

# google-app-engine - 部署后 AppEngine 500 服务器错误 - 代码错误？

> ID：15451696
> 
> 赞同：3
> 
> 时间：2013-03-16T16:29:07.077
> 
> 标签：google-app-engine

我知道已经有很多关于这个错误的帖子，但我的问题似乎很独特，至少从我的角度来看是这样。请证明我错了！我正在使用 Python 2.7，导入 jinja2，并通过`from google.appengine.ext import db`. 我的其他不导入这些包的更简单的应用程序部署得很好，但是这个会抛出一个`Error: Server Error`. 这可能与我的代码有关，还是 Google 的问题？似乎这是这些天常见的错误，但似乎也有很多诊断。但是，由于我的一些应用程序部署而不是其他应用程序，这是可疑的。谢谢。

--一些额外的信息--

正如我在评论中所说，本地运行正常，部署引发服务器错误。

**本地运行后的日志输出：

```
*** Running dev_appserver with the following flags: --admin_console_server= --port=8080
Python command: /usr/local/bin/python2.7
WARNING  2013-03-17 03:06:52,527 dev_appserver.py:3578] The datastore file stub is 
deprecated, and will stop being the default in a future release.
Append the --use_sqlite flag to use the new SQLite stub.

You can port your existing data using the --port_sqlite_data flag or
purge your previous test data with --clear_datastore.

WARNING  2013-03-17 03:06:52,550 dev_appserver.py:3682] Could not initialize images API;
you are likely missing the Python "PIL" module. ImportError: No module named _imaging
INFO     2013-03-17 03:06:52,572 dev_appserver_multiprocess.py:656] Running application
dev~app1 on port 8080: http://localhost:8080
INFO     2013-03-17 03:06:52,572 dev_appserver_multiprocess.py:658] Admin console is
available at: http://localhost:8080/_ah/admin 
```

**部署后的日志输出：

```
*** Running appcfg.py with the following flags:
--no_cookies --email=***@gmail.com --passin update
08:02 PM Host: appengine.google.com
08:02 PM Application: app1; version: 1
08:02 PM 
Starting update of app: app1, version: 1
08:02 PM Getting current resource limits.
08:02 PM Scanning files on local disk.
08:02 PM Cloning 1 static file.
08:02 PM Cloning 4 application files.
08:02 PM Compilation starting.
08:02 PM Compilation completed.
08:02 PM Starting deployment.
08:02 PM Checking if deployment succeeded.
08:02 PM Deployment successful.
08:02 PM Checking if updated app version is serving.
08:02 PM Completed update of app: app1, version: 1
Password for ***@gmail.com: If deploy fails you might need to 'rollback' manually.
The "Make Symlinks..." menu option can help with command-line work.
*** appcfg.py has finished with exit code 0 *** 
```

--UPDATE-- 原来我有一个变量命名错误，当它被清除后，不再出现 500 服务器错误。我希望抛出的错误更能说明问题，因为它们通常不包括这种特殊情况。经验教训 - 如果您发现自己处于这种情况，那肯定是您的代码中的错误。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T16:34:13.563

App Engine 500（内部服务器错误）几乎总是意味着您的 Python 代码引发了运行时捕获的未经处理的异常。当它捕获到一个时，它会返回一个 500 作为响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-15T18:02:09.740

我在 Django 视图中调用的 html 模板中引用了 js 和 css 文件。我的应用程序中不存在那些 css 和 js 文件。在本地主机上工作正常。但是`server error 500`在 GAE 上。

进入 App Engine 仪表板并查找错误 - 客户端错误、服务器错误。我看到那里提到了我的 css 和 js 文件错误。当您通过以下方式查看终端中的日志时，这些错误不会显示`gcloud app logs tail -s default`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-06T05:06:55.650

当启动应用程序出现问题时会发生这种情况，因此查看日志的最佳方法是，

检查日志的一种方法是打开

```
 App Engine >> Services 
```

> 您将看到列出所有服务的表格，因此，在“诊断”列下有一个“工具”下拉列表，打开下拉列表并选择“日志”。

也许您可以找到“为什么应用程序没有启动？”的根本原因。

# c# - 获得一个没有很多 if 语句的课程

> ID：15451697
> 
> 赞同：3
> 
> 时间：2013-03-16T16:29:08.343
> 
> 标签：c#, class, xna

我有一定数量的类继承自抽象类：

```
abstract public class baseClass
{
    //logics
}

public class child1 : baseClass
{
}

public class child2 : baseClass
{
} 
```

现在我有一些管理类，它们必须根据一个枚举创建这些类之一，该枚举的值将具有相同的名称，如下所示：

```
public enum ClassType
{
    child1,
    child2
}

public class Manager
{
    private List<baseClass> _workers;

    public void Initialize(ClassType type)
    {
        //what logics to put here? (resulting in correctChild)
        _workers.Add(correctChild);
    }
} 
```

我在考虑 typeof 但不知道如何实现它。注意：在这个例子中它是 2 个类，但在实际情况下它是任意数量的类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T16:42:20.873

看看[Activator.CreateInstance()](http://msdn.microsoft.com/en-us/library/d133hta4.aspx)

> 使用命名程序集和默认构造函数创建指定名称的类型的实例。

所以代码看起来像

```
Activator.CreateInstance(type.ToString(),assemblyName); 
```

我实际上熟悉这样的实现，我自己也使用过。我还建议查看[这篇文章](http://blogs.msdn.com/b/paulwhit/archive/2008/03/31/use-the-descriptionattribute-with-an-enum-to-display-status-messages.aspx)，该文章解释了如何实际使用枚举值的属性来存储实际的类名。您甚至可以将其用作扩展程序。

```
 public static string Description(this Enum enumValue) {
        Type enumType = enumValue.GetType();
        FieldInfo field = enumType.GetField(enumValue.ToString());
        object[] attributes = field.GetCustomAttributes(typeof(DescriptionAttribute), false);
        return attributes.Length == 0 ? enumValue.ToString() : ((DescriptionAttribute)attributes[0]).Description;
} 
```

然后代码看起来像

```
Activator.CreateInstance(classType.Description(), assemblyName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:53:32.870

如果您不需要属性的开销并且您从同一个程序集中运行它 - 您可以只使用正在执行的程序集通过反射加载类型。`Activator.CreateInstance`可以动态地为您构建对象。

```
public class Manager
{
    private List<baseClass> _workers = new List<baseClass>();

    public void Initialize(ClassType type)
    {
        string assemblyName = Assembly.GetExecutingAssembly().GetName().Name;
        Type objType = Type.GetType(string.Format("{0}.{1},{0}", assemblyName, type.ToString()));
        var correctChild =  (baseClass)Activator.CreateInstance(objType);
        _workers.Add(correctChild);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:36:47.367

有很多方法可以区分类型。

您可以使用`is`运算符

```
var o = ...;
if (o is Child1) {} 
```

或者你可以使用`as`运算符

```
var child = o as Child1;
if (child != null) {} 
```

或者您已经描述过自己的内容，`typeof`操作员。

不过，我感觉到的是，如果您对类型转换有强烈的需求，那么手头可能还有其他东西。[也许您可以通过Polymorphism](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)解决您的问题。然后您不必区分冗长`if-else`或`case-switch`构造中的所有不同类型，但您可以将“不同行为”委托给您的子类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T16:39:56.667

如果你不想使用 if 语句，你可以使用 case 语句吗？喜欢：

```
public class Manager
{
    private List<baseClass> _workers;

    public void Initialize(ClassType type)
    {
        switch (type)
        {
            case child1:
              _workers.Add(correctChild);
              break;
            case child2:
              _workers.Add(correctChild);
              break;
        }
    }
} 
```

# sql - 输出注释列而不是列名

> ID：15451704
> 
> 赞同：0
> 
> 时间：2013-03-16T16:30:09.797
> 
> 标签：sql, oracle, plsql

我在**all_col_comments**表中有表和对该表列的注释。如何代替我的表中的列名输出选择查询中 all_col_comments 中的列注释？

例子：

```
SELECT column1 AS 'comment for column1 from all_col_comments table'
     , column2 AS 'comment for column2 from all_col_comments table',
  FROM my_table; 
```

**问题 V2**我想做什么

```
SQL> create table myTable(
  2    id           NUMBER(2),
  3    value        NUMBER(6,2)
  4  )
  5  /
Table created.

SQL>
SQL> -- prepare data
SQL> insert into myTable(ID,  value)values (1,9)
  2  /

1 row created.

SQL> insert into myTable(ID,  value)values (2,2.11)
  2  /

1 row created.

SQL>
SQL> select * from myTable
  2  /

        ID      VALUE
---------- ----------
         1          9
         2       2.11

2 rows selected.

SQL>
SQL> COMMENT ON COLUMN myTable.id IS
  2  'id stores the id';

Comment created.

SQL> COMMENT ON COLUMN myTable.value IS
  2  'value stores the some comment for value';

Comment created. 
```

然后我需要做一些选择并得到这个

```
SQL>
SQL> select ??? ...

id stores the id      value stores the some comment for value
      ----------                                   ----------
               1                                            9
               2                                         2.11

    2 rows selected. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:00:53.903

如果没有动态 SQL，我认为没有任何方法可以满足您的要求。无法参数化列别名（ 之后的位`AS`），因此您必须使用连接构建 SQL 字符串。

当您使用连接构建 SQL 字符串时，您需要考虑如何缓解 SQL 注入。（风险很低；如果您有权更改数据库表上的评论，那么您可能有足够的权限直接访问数据库，而无需构建适当的恶意列评论。）至少，您的 SQL 字符串需要用`"`字符包围列别名（不像`'`您的问题那样），并且在将列注释连接到 SQL 字符串之前，您必须验证注释不包含该`"`字符。

**编辑**：从您的评论看来，您正在使用 Perl 与数据库通信。以下是一个未经测试的草图，希望能展示一种构建 SQL 字符串的方法。我将由您来填补空白：

```
# The list of columns to select from the table.
# Must exactly match the names of columns returned from user_col_comments
my @columns = qw/COLUMN1 COLUMN2 COLUMN3 COLUMN4/;

# Are we adding the first column?
my $first = 1;

my $sql = 'SELECT ';

# Hash that maps column names to comments.
my %commenthash = ();

# TODO query user_col_comments and add to %commenthash the column names and comments.

for my $col (@columns) {

    my $comment = $commenthash{$col};

    unless (defined $comment) {
        # Use the column name if no comment was found.
        $comment = $col;
    }

    if ($comment =~ /"/) {
        die "can't use double-quotes in column comment: $comment";
    }

    # Add separating comma if this is not the first column.
    $sql .= ', ' if !$first;

    $sql .= qq!"$col" AS "$comment"!;

    $first = 0;
}

$sql .= ' FROM my_table';

# TODO execute SQL. 
```

请注意，您需要查询数据库两次：一次获取列注释，一次获取实际数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:34:58.533

[您可以使用 user_col_comments 获取有关您的列的评论](http://www.java2s.com/Tutorial/Oracle/0600__System-Tables-Data-Dictionary/GettingColumnComments.htm)。

```
SELECT *
FROM user_col_comments
WHERE table_name = 'MYTABLE'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T17:43:22.870

使用动态查询（未测试）：

```
begin
 s := ' select ';
 for i in ( select column_name, column_comment from user_tables where table_name = 'MyTable' )
 loop
  s := i.column_name ||' AS ' ||'"'|| i.column_comment || '", '; 
 end loop;
s := s || ' from ' || 'MyTable';

dbms_output.put_line( 'SQL: ' || s ); -- SHOW
execute immediate ... -- execute
end;
/ 
```

# android - 从 ListView 中检索位图

> ID：15451705
> 
> 赞同：0
> 
> 时间：2013-03-16T16:30:10.417
> 
> 标签：android, android-layout, android-intent

我的应用程序从 Web 下载数据（图像和文本），并将其显示为 ListView。在 ListView 适配器中，我实现了内存缓存来存储位图。从 ListView 中检索图像的主要目的是在单击行后将其传递给新的 Activity。我知道我可以将图像 URL 传递给新的 Activity，然后再次下载，但我不想那样做。是否可以从 ListView 中检索位图？如果是，哪种方式最容易实施？提前致谢

编辑：

```
public class CinemasAdapter extends ArrayAdapter<Cinemas> {

    private ArrayList<Cinemas> movieDataItems;  
    private Activity context;

    private LinkedHashMap<String, Bitmap> bitmapCache = new LinkedHashMap<String, Bitmap>();

    public CinemasAdapter(Activity context, int textViewResourceId, ArrayList<Cinemas> movieDataItems) {
        super(context, textViewResourceId, movieDataItems);
        this.context = context;
        this.movieDataItems = movieDataItems;
    }

     @Override
    public View getView(int position, View convertView, ViewGroup parent) { 
        ViewHolder holder = new ViewHolder();
        if (convertView == null) {
            LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
            convertView = vi.inflate(R.layout.movie_data_row, null);
            holder.poster = (ImageView) convertView.findViewById(R.id.movie_thumb_icon);
            holder.bitmap = BitmapFactory.decodeResource(holder.poster.getResources(), R.drawable.no_image);
            convertView.setTag(holder);         
        }
        else{
            holder = (ViewHolder) convertView.getTag();
        }

        Cinemas movie = movieDataItems.get(position);

        if (movie!=null){
                    String url = movie.poster();

                        if (url != null) {
                            Bitmap bitmap = fetchBitmapFromCache(url);
                            if (bitmap == null) {
                                loadBitmap(url,holder.poster,holder.bitmap);
                            }
                            else {
                                holder.poster.setImageBitmap(bitmap);
                            }
                        }
                        else {
                            holder.poster.setImageResource(R.drawable.no_image);
                        }
            }
        else {
            holder.poster.setImageResource(R.drawable.no_image);
            } 

        return convertView;

    }           

    private void addBitmapToCache(String url, Bitmap bitmap) {

        if (bitmap != null) {
            synchronized (bitmapCache) {
                bitmapCache.put(url, bitmap);
            }
        }
    } 

    private Bitmap fetchBitmapFromCache(String url) {
        synchronized (bitmapCache) {
            final Bitmap bitmap = bitmapCache.get(url);
             if (bitmap != null) {
                bitmapCache.remove(url);
                bitmapCache.put(url, bitmap);
                return bitmap;
            } 
        }
        return null;
    } 

    private class BitmapDownloaderTask extends AsyncTask<String, Void, Bitmap> {

        private String url;
        private final WeakReference<ImageView> imageViewReference;
        private Cinemas movie;

        public BitmapDownloaderTask(ImageView imageView, Cinemas mov) {
            imageViewReference = new WeakReference<ImageView>(imageView);   
            movie = mov;
        }

        @Override
        protected Bitmap doInBackground (String... source) {
            url = source[0];
            Bitmap image;
            try{
                image = BitmapFactory.decodeStream(new URL(url).openConnection().getInputStream());
                return image;
                }
            catch(Exception e){Log.e("Error", e.getMessage()); e.printStackTrace();}
            return null;
            } 

         @Override
        protected void onPostExecute(Bitmap bitmap) { 
            if (isCancelled()) {
                 bitmap = null;
             }
            if (imageViewReference != null && bitmap != null) {
                 final ImageView imageView = imageViewReference.get();
                 final BitmapDownloaderTask bitmapWorkerTask =
                         getBitmapWorkerTask(imageView);
                 if (this == bitmapWorkerTask && imageView != null) {
                     imageView.setImageBitmap(bitmap);
                     addBitmapToCache(url);
                     movie.setBitmap(bitmap);
                 }
             }
        } 
    } 

    private static class ViewHolder{
    ImageView poster;
    Bitmap bitmap;
}

    static class AsyncDrawable extends BitmapDrawable {
    private final WeakReference<BitmapDownloaderTask> bitmapWorkerTaskReference;

    public AsyncDrawable(Resources res, Bitmap bitmap,
            BitmapDownloaderTask bitmapWorkerTask) {
            super(res, bitmap);
            bitmapWorkerTaskReference = new WeakReference<BitmapDownloaderTask>(bitmapWorkerTask);
    }

    public BitmapDownloaderTask getBitmapWorkerTask() {
        return bitmapWorkerTaskReference.get();
    }
}

    private static BitmapDownloaderTask getBitmapWorkerTask(ImageView imageView) {
       if (imageView != null) {
           final Drawable drawable = imageView.getDrawable();
           if (drawable instanceof AsyncDrawable) {
               final AsyncDrawable asyncDrawable = (AsyncDrawable) drawable;
               return asyncDrawable.getBitmapWorkerTask();
           }
        }
        return null;
    }

    public static boolean cancelPotentialWork(String data, ImageView imageView) {
    final BitmapDownloaderTask bitmapWorkerTask = getBitmapWorkerTask(imageView);

    if (bitmapWorkerTask != null) {
        final String bitmapData = bitmapWorkerTask.url;
        if (bitmapData != data) {
            bitmapWorkerTask.cancel(true);
        } else {
            return false;
        }
    }
    return true;
}

    public void loadBitmap(String resId, ImageView imageView, Bitmap bitmap) {
    if (cancelPotentialWork(resId, imageView)) {
        final BitmapDownloaderTask task = new BitmapDownloaderTask(imageView);
        final AsyncDrawable asyncDrawable = new AsyncDrawable(imageView.getResources(), bitmap, task);
        imageView.setImageDrawable(asyncDrawable);
        task.execute(resId);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:40:32.733

这将为您从 Imageview 中获取位图。

```
image_view.buildDrawingCache();
Bitmap bmap = image_view.getDrawingCache(); 
```

现在您可以将位图发送到另一个活动，如下所示：

Bitmap 实现 Parcelable，因此您始终可以在意图中传递它：

```
Intent intent = new Intent(this, NewActivity.class);
intent.putExtra("BitmapImage", bmap); 
```

并在另一端检索它：

```
Bitmap bitmap = (Bitmap) intent.getParcelableExtra("BitmapImage"); 
```

# android - setTextColor() 的性能问题

> ID：15451709
> 
> 赞同：0
> 
> 时间：2013-03-16T16:30:29.553
> 
> 标签：android, performance, textview

我做了一个使用`xml`布局定义和以编程方式实现的部分的活动。该以*编程方式实现的部分*经常调用`setTextColor(color)`其​​中一个`TextView`s 并导致许多不需要的方法，例如 onMeasuer()。它只改变颜色，但占用过多的 CPU 时间。

由于每秒 25 次调用，它占用了总 CPU 时间的 40%。如何避免这种性能下降？

# ember.js - Ember.js 应用离线行为

> ID：15451712
> 
> 赞同：5
> 
> 时间：2013-03-16T16:30:45.987
> 
> 标签：ember.js, ember-data

我有一个使用 ember-rails gem 与 rails 应用程序交互的 ember 应用程序。

我想使用 localStorage 适配器来存储产品列表，一旦它们通过 rest api 从服务器下载。

然后，如果应用程序离线，ember 可以使用 localStorage 数据，而不是向 rails 应用程序请求数据。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:55:32.920

我已经按照这些思路做了一些事情。这不处理何时刷新缓存，以及类似的事情。但是，它将为您提供一种从 localStorage 初始加载项目的方法，然后如果网络不可用，则内容将保留为本地数据。您当然可以大大扩展它来满足您的需求。

```
App.PhotoCategories = Ember.Object.extend

  init: ->
    @_super()
    @loadPhotoCategories

  loadPhotoCategories: () ->
    # load cached categories from local storage
    @set 'content', @getFromCache("photoCategories")

    if @content?
      if @content.length == 0
         $.ajax
           type: "POST"      
           url: "/api/getCategories"
           success: (data) =>
             if !data.error
             @set 'content', []

             for category in data
               @pushObject category

              # save categories to local storage
              @saveToCache("photoCategories", @content)             

  saveToCache: (key, data) ->
    if @supportsHtml5Storage()
      localStorage.setItem(key + '_LastUpdatedAt', new Date())
      localStorage.setItem(key, JSON.stringify(data))
      true
    else
      false

  getFromCache: (key) ->
    if @supportsHtml5Storage()
      data = localStorage[key]

      if data?
        JSON.parse(localStorage[key])
      else
        null
    else
      null

  supportsHtml5Storage: ->
    try
      return "localStorage" of window and window["localStorage"] isnt null
    catch e
      return false 
```

# java - 在设置菜单中的 onClickEvent 之后打开关于对话框

> ID：15451714
> 
> 赞同：0
> 
> 时间：2013-03-16T16:30:57.790
> 
> 标签：java, android, android-activity, dialog

单击设置“关于”按钮后，我试图打开一个关于对话框（从 DialogFragment 扩展）。

这是我的课程

```
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.DialogFragment;
import android.content.DialogInterface;
import android.os.Bundle;

public class AboutDialog extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setMessage(R.string.about_message)
               .setPositiveButton(R.string.btn_accept, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // FIRE ZE MISSILES!
                   }
               })
               .setNegativeButton(R.string.btn_cancel, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // User cancelled the dialog
                   }
               });
        // Create the AlertDialog object and return it
        return builder.create();
    }

} 
```

我需要将它添加到清单中吗？我相信我不应该

这是我的 SettingsActivity，目前可以完美运行

```
import android.content.Intent;
import android.os.*;
import android.preference.*;
import android.view.MenuItem;

public class SettingsActivity extends PreferenceActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        getFragmentManager().beginTransaction().replace(android.R.id.content, new MyPreferenceFragment()).commit();
    }

     public static class MyPreferenceFragment extends PreferenceFragment
    {
        @Override
        public void onCreate(final Bundle savedInstanceState){
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.prefs);
        }
    }

} 
```

如何从 SettingsActivity 调用此对话框？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:04:22.680

简单地打电话给你`DialogFragment`，你可以使用以下

```
 AboutDialog newFragment = new AboutDialog();
    newFragment.show(getFragmentManager(), "dialog"); 
```

开发人员站点中有详细示例。请参阅[此处](http://developer.android.com/reference/android/app/DialogFragment.html)了解详细信息

**NB** `DialogFragment`仅在 api 级别 11 或更高版本中可用。所以如果你在较低的api中使用它会出现错误。在这种情况下使用[SupportLibrary](http://developer.android.com/tools/extras/support-library.html)

# javafx-2 - 如何在 javafx 的 SplitPane 中加载不同的 AnchorPane

> ID：15451715
> 
> 赞同：1
> 
> 时间：2013-03-16T16:31:01.033
> 
> 标签：javafx-2, fxml

很简单：我创建了一个包含两个 AnchorPanel 的“垂直”SplitPanel。我想在右窗格中加载不同的 fxml，但我似乎无法这样做。我从 FXMLLoader 得到一个窗格：

```
AnchorPane pane = (AnchorPane) FXMLLoader.load(MainMenuController.class.getResource("ContactGrid.fxml")); 
```

如何在右侧面板中加载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:46:52.217

splitpane.getItems().set(1, 窗格); getChildren 被 getItems 取代

# mysql - 在 EBS 卷上配置 MySQL 时出错

> ID：15451718
> 
> 赞同：0
> 
> 时间：2013-03-16T16:31:07.163
> 
> 标签：mysql, ubuntu, amazon-web-services, amazon-ec2, symlink

我正在配置 MySQL 以将其数据存储在 Amazon EBS 卷上。我已将卷安装在`/data`，将配置和数据文件移动到卷中，并对 MySQL 文件进行符号链接：

```
ln -s /data/mysql/lib/mysql /var/lib/mysql
ln -s /data/mysql/etc/mysql/my.cnf /etc/mysql/my.cnf
ln -s /data/mysql/log/mysqld.log /var/log/mysqld.log 
```

数据库服务器运行但在几个小时后崩溃并出现以下错误：

```
130316  9:59:04  InnoDB: Database was not shut down normally! 
InnoDB: Starting crash recovery. 
InnoDB: Reading tablespace information from the .ibd files... 
130316  9:59:04  InnoDB: Operating system error number 40 in a file operation. 
InnoDB: Error number 40 means 'Too many levels of symbolic links'. 
InnoDB: Some operating system error numbers are described at 
InnoDB: http://dev.mysql.com/doc/refman/5.5/en/operating-system-error-codes.html 
InnoDB: File name ./ln 
InnoDB: File operation call: 'stat'. 
InnoDB: Error: os_file_readdir_next_file() returned -1 in 
InnoDB: directory . 
InnoDB: Crash recovery may have failed for some .ibd files! 
```

有人理解这个错误以及如何解决它吗？我试图了解更多信息，但没有太多文档。我正在运行一个 Ubuntu AMI（微型）。

这是我格式化和安装卷（8 GB）的方式：

```
sudo mkfs.ext4 /dev/xvdf
mkdir -m 000 /data
echo "/dev/xvdf /data auto noatime 0 0" | sudo tee -a /etc/fstab
sudo mount /data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:09:51.790

这是我可以给出的几个提示，1）删除符号链接并提供绝对路径，可能是因为系统链接抛出错误。如果它不起作用，请卸载 mysql db 并重新安装并确保您提供附加卷的路径。在将所有文件移动到新卷之前，您是否停止了 mysql 服务器？尝试重新启动一次mysql服务器，希望对您有帮助！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:49:47.957

每次看到这样的问题，我都会问“为什么不用RDS”？

[http://aws.amazon.com/rds/](http://aws.amazon.com/rds/)

您想要使用基于云的服务就像这样的问题 - 这样您就无需担心管理/配置硬件、数据库等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:42:35.893

看起来我粗手指了一个名为`ln`in的文件`/data/mysql/lib/mysql/`。该文件被符号链接到自身，这显然创建了符号链接的无限循环，因此错误`'Too many levels of symbolic links'`。

但我不明白为什么 MySQL 一开始会尝试访问这个文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T00:58:30.703

以下程序每次都适用于我。

`#mkfs.ext4 /dev/xvdf`

`#mkdir /mnt/data`

`#mount /dev/xvdf /mnt/data`

`#/etc/init.d/mysql stop`

编辑`/etc/mysql/my.cnf`文件并查找“datadir”条目，并将路径（应为“/var/lib/mysql”）更改为新数据目录（/mnt/data）。

`#/etc/init.d/mysql restart`

# android - 无论我给它什么参数，我都有一个溢出的文本视图

> ID：15451720
> 
> 赞同：0
> 
> 时间：2013-03-16T16:31:17.237
> 
> 标签：android

这是一个文本视图，其中可能有很长的文本。它溢出并将一半的评级栏推离屏幕。

我怎样才能让它剪掉文字而不把评级栏推开？

```
<LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="5dp"
        android:weightSum="2" >

        <TextView
            android:id="@+id/rest_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal"
            android:paddingLeft="3dp"
            android:singleLine="true"
            android:text="long text goes goes here long text goes goes here long text goes goes here"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <RatingBar
            android:id="@+id/myRatingBar"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dp"
            android:layout_weight="1"
            android:numStars="5" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:33:39.550

您可以检查字符串的长度，如果它大于设定的长度，并`...`在字符串的末尾执行类似的操作

但是您将 textview 设置为`wrap_context`您也可以将其设置为硬宽度，因此它不会改变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:33:57.380

您可以在文本视图中使用以下属性

```
android:layout_toLeftOf="@id/myRatingBar" 
```

您还可以在 xml 中为您的 textview 指定特定宽度

```
 android:layout_width="wrap_content" 
```

您还可以使用以下属性来限制文本视图的长度

```
android:maxLength="" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:45:36.877

使用`android:maxLines="1"`. 如果 TextView 中的文本很长，这将切断文本，并且不会关闭评级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T16:50:06.993

既然你已经设置了`android:layout_weight="1"`两个视图，那么我认为你可以做到`android:layout_width="match_parent"`

这将使两个视图具有相同的宽度，即父宽度的一半。或者您可以根据您想要的任何值修改权重字段。

# clojure - 比较和设置！无条件地重置clojure中的原子？

> ID：15451721
> 
> 赞同：1
> 
> 时间：2013-03-16T16:31:17.537
> 
> 标签：clojure

考虑 clojure repl 中的以下代码序列

```
(def elems (atom {}))
(swap! elems assoc 42 [:a 7])
elems 
```

产生预期`{42 [:a 7]}`。现在试试

```
(compare-and-set! elems elems (atom {})) 
```

生产`false`，意味着`compare-and-set!`操作没有成功。我很惊讶，因为我期望`elems`测试与`elems`内部`compare-and-set!`操作相同。我知道我可以`reset!`用来完成无条件重置原子的目标，但我想知道为什么`compare-and-set!`不完全一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T16:50:22.510

`compare-and-set!`作用于原子引用的值，而不是原子本身。

```
clojure.core/compare-and-set!
([atom oldval newval])
  Atomically sets the value of atom to newval if and only if the
  current value of the atom is identical to oldval. Returns true if
  set happened, else false 
```

你可能想要这个：

```
(compare-and-set! elems @elems {}) 
```

# java - Play 框架中的 POJO 到 JSON

> ID：15451726
> 
> 赞同：5
> 
> 时间：2013-03-16T16:31:46.713
> 
> 标签：java, json, playframework-2.0

试图让 Play 2.0 从 POJO 返回 JSON。但我收到错误

```
The method toJson(Writes<A>) in the type Json is not applicable for the arguments (Product) 
```

我的代码是：

```
public static Result index(String date) {
     Product item = new Product();
    return ok(Json.toJson(item));

   } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-16T17:36:42.637

确保`Json`使用`import play.libs.Json`.

您可能使用`play.api.libs.Json`的是针对 Scala API，而不是 Java API 的。

# google-chrome - 如何在 Chrome 应用中发布广告？

> ID：15451728
> 
> 赞同：1
> 
> 时间：2013-03-16T16:31:57.617
> 
> 标签：google-chrome, adsense, ads

我有一个 Chrome 应用程序，它目前只是一个 Web 应用程序的链接。我想让它成为一个打包的应用程序，所以它可以离线使用。但是有一个问题：我在 Web 应用程序上有一个 Adsense 广告，而 Chrome 应用程序中不允许有 Adsense 广告。

如何在打包的 Chrome 应用中启用广告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T13:04:02.893

该公司为应用程序/扩展程序提供广告： [http ://www.bumblead.com/](http://www.bumblead.com/)

这另一个有一个有趣的应用程序/扩展横幅交换计划：http: [//factory.extensionfactory.com/promo/](http://factory.extensionfactory.com/promo/)

还有一些证据表明谷歌正在研究他们自己的解决方案，但还没有官方公告：https: [//plus.google.com/100132233764003563318/posts/hqHFwvZhbDS](https://plus.google.com/100132233764003563318/posts/hqHFwvZhbDS)

# php - PHP 命名空间，use 和 \ 是什么意思，它们会自动加载类吗？

> ID：15451730
> 
> 赞同：4
> 
> 时间：2013-03-16T16:32:02.853
> 
> 标签：php, namespaces

我正在尝试使用 PHP 5.3/PHP 5.4 OOP 功能自学。

我试图编写这样的代码。但是，它不起作用。

索引.php

```
namespace Website;

use Website\Database as Database;

class Website extends Database
{
    function __construct()
    {
        echo "Test";
    }
}

$website = new Website(); 
```

./网站/数据库.php

```
namespace Website\Database;

class Database
{
    function construct()
    {
        echo "Hello from Database";
    }
} 
```

我知道如何创建类，将它们相互关联等等。但是每当我将命名空间添加到顶部时，一切都会被破坏。

所以我想问一些基本的事情；

**Q1**：是否`use ClassName;`意味着它自动加载/包含类？

**Q2**`\` ：左侧没有任何东西是什么意思。（例如新的 \Database();)

**Q3** :`\`是指 PHP 中的目录，还是只是开发人员如何看待它？

**Q4**：我的脚本需要做哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:38:27.960

回答您的前三个问题：

Namespacing !== 自动加载，命名空间是一种简化类结构的方法，并允许在不同的命名空间中“重载”类；自动加载是在需要时自动加载文件：它们不是一回事。如果您使用命名空间，您可能还想使用自动加载器。

“领先”`\`是命名空间的全局范围；然后`\`作为命名空间分隔符

`\`是命名空间分隔符；目录分隔符是`/`或`\`在文件规范中，具体取决于平台；但`/`无论如何都适用于所有平台，因此应该真正用于所有跨平台开发。还有`DIRECTORY_SEPARATOR`常数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T16:45:44.037

**A1：**如果您`use`的类尚未加载，自动加载器将启动。但您需要编写自己的自动加载器以确保（命名空间）类将被加载。

未经测试的例子：

```
function autoloader($className){
    $fileName = str_replace('\\', DIRCTORY_SEPARATOR, $className);
    include __DIR__ . $fileName;
}
spl_autoload_register(autoloader); 
```

这假设加载器位于应用程序根目录中。而且它不做错误检查，它可能需要在某处添加另一个目录分隔符。

**A2：**前导`\`表示全局命名空间，表示类名不在当前命名空间中。

**A3：**命名空间不需要匹配目录结构，但大多数开发者会更喜欢它。它还使自动加载更容易。

# c# - 是什么导致 Guid 改变分配值？

> ID：15451731
> 
> 赞同：1
> 
> 时间：2013-03-16T16:32:03.247
> 
> 标签：c#, .net

我在 vs2010 中有一个解决方案，其中包含 3 个项目 - 业务对象、API、Web 应用程序。

业务对象使用原始 ADO 从 SQLServer 填充，并使用 CSLA 在各个层上进行序列化。Web 应用程序和 API 都具有对业务对象的项目引用。

一个特定的业务对象包含一个 Guid，从 ADO 填充到一个私有字段并通过公共 getter 访问，即只读。当我通过网络应用程序使用它时，它可以正常工作，当我通过 api 访问它并尝试用它做任何事情时，它总是填充 value `00000000-0260-0251-6002-510200000000`。

调试服务调用显示属性正确填充了我期望从数据库中获得的值（悬停在属性上，使用即时窗口，快速监视等）但是如果我尝试将此 guid 分配给另一个变量或将其作为参数传递给另一个方法传递或分配的值总是变成`00000000-0260-0251-6002-510200000000`.

业务对象（有很多）上的所有其他 guid 都可以正常工作，它们都以相同的方式被检索和访问。不管我加载哪个对象，甚至我连接到哪个数据库，这个总线对象上的这个属性总是分配这个值。

这是在开发和调试模式下，不是调试器感到困惑。我什至在我们的 TFS 构建服务器上构建了它，并将生成的 API dll 部署在单独的应用程序服务器上。结果相同，因此与在我的开发机器上专门构建或运行无关。

我在各种 Guid 构造函数中处理了字符串和字节数组的解析。结果相同。我已经进入了 MSIL，分配 guid 的调用看起来与分配 Guid 的所有其他调用相同。没有什么不寻常的。从数据库调试业务对象负载看起来不错，正如我所说，在我尝试用它做某事之前，该值是我所期望的。该属性非常简单——实际上只是一个返回_privateField，没有特殊处理或任何东西。它可以通过网络应用程序正常工作，并且它们指向同一个 dll！

谷歌搜索“ `00000000-0260-0251-6002-510200000000`”一无所获——它似乎没有任何特殊含义。

几乎我的智慧就此结束，我想不出更多的选择来探索。谁能想到这里可能发生的事情或对`00000000-0260-0251-6002-510200000000`任何人都意味着什么？

# ajax - 为什么我的 Ajax 调用的“等待”长度如此之长？（Chrome 网络面板）

> ID：15451732
> 
> 赞同：5
> 
> 时间：2013-03-16T16:32:13.387
> 
> 标签：ajax, codeigniter, jquery, knockout.js

我在请求一些 json 内容的页面上有几个 ajax 调用。在所有这些电话中，我在响应完成时等待了很长时间。对于这些呼叫中的每一个，呼叫中有几秒钟的“等待”时间，如下面的 Chrome 网络面板所示。我附上了一张图片：

![等待 Ajax 调用 - 截图 1](../Images/98cbece2bd159102ffb8129de48c227d.png)

我不确定是什么原因造成的，因为我对查询数据库的 php 代码进行了一些基准测试，据此，查询和处理 json 以发送回的调用在 0.001 秒左右运行。

那么，这只是网络延迟的事情吗？这是我没有正确执行数据库查询的问题吗？也许我正在淹没每个浏览器窗口的最大连接数？不知道。其他请求的移动速度也一样慢，所以看起来它可能是一致的。

这是其余请求时间的另一张照片（其他主要 ajax 调用所用的时间与 get_usergames_simple 调用一样多： ![所有的请求](../Images/800f6cce5dea80ffb90dd3db491f2c59.png)

作为参考，这里是 ajax 调用：

```
self.getGamesContent = function()
{
  var userID = "<?php echo $userID; ?>";

  var post_data = {
    userID: userID
  };

  $.post("https://mydomain.com/games/get_usergames_simple/", post_data, function(result)
  {
    var json = $.parseJSON(result);

    var mappedGames = $.map(json.games, function(item) {
      return new GameItem(item)
    });
    self.gameitems(mappedGames);
  });
}; 
```

这是运行查询的控制器中的 php 代码：

```
$userID = $this->input->post('userID');
$this->benchmark->mark('code_start');

$userGames = $this->cache->model('games', 'getGamesSimpleByUserID', array($userID), 120); // keep for 2 minutes

$returnString = "{";

$returnString .= '"user_id": "' . $userID . '",';

$gameCount = 0;

$returnString .= '"games": [';
foreach ($userGames as $ug)
{
  $returnString .= "{";
  $returnString .= '"user_id" : "' . $userID . '",';
  $returnString .= '"game_id" : "' . $ug->GameID . '",';
  $returnString .= '"game_name" : "' . $ug->GameName . '",';
  $returnString .= '"game_image" : "' . $ug->GameImage . '",';
  $returnString .= '"description" : "' . htmlspecialchars($ug->GameDescription) . '",';
  $returnString .= '"genre_id" : "' . $ug->GameGenreCatID . '",';
  $returnString .= '"genre_name" : "' . $ug->GameGenreName . '",';
  $returnString .= '"publisher_id" : "' . $ug->GamePublisherID . '",';
  $returnString .= '"publisher_name" : "' . $ug->GamePublisherName . '",';
  $returnString .= '"developer_id" : "' . $ug->GameDeveloperID . '",';
  $returnString .= '"developer_name" : "' . $ug->GameDeveloperName . '",';
  $returnString .= '"active_flag" : "' . $ug->GameIsActive . '",';
  $returnString .= '"create_date" : "' . $ug->GameCreateDate . '",';
  $returnString .= '"remove_date" : "' . $ug->GameRemoveDate . '",';
  $returnString .= '"last_update_date" : "' . $ug->GameLastUpdateDate . '",';
  $returnString .= '"user_syncing_game" : "' . $ug->UserSyncingGame . '"';
  $returnString .= "},";
  $gameCount++;
}

if ($gameCount > 0)
  $returnString = substr($returnString, 0, strlen($returnString) - 1);

$returnString .= "]}";

$this->benchmark->mark('code_end');

//echo $this->benchmark->elapsed_time('code_start', 'code_end');

echo $returnString; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:53:52.187

控制器的构造函数中肯定有一些缓慢的动作。

在 Codeigniter 中使用内置分析器要好得多：

[http://ellislab.com/codeigniter/user-guide/general/profiling.html](http://ellislab.com/codeigniter/user-guide/general/profiling.html)

# javascript - 循环后执行砌体

> ID：15451737
> 
> 赞同：0
> 
> 时间：2013-03-16T16:32:38.520
> 
> 标签：javascript, reload, cycle

单击图像以显示以下内容后，似乎无法重新排序我的图像。

但是，当我调整浏览器大小时，图像会正确重新排序。

我已经尝试了很多，但我被卡住了，我只想在点击下一张图片后再次点燃砖石。

[链接到网站](http://degrafischeprofeet.be/website/index2.html)

```
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/jquery.masonry.min.js"></script>
<script src="js/jquery.cycle.all.js"></script>

<script>
  $(function(){

    $('#container').masonry({
      itemSelector: '.box',
      columnWidth: 20,
      isAnimated: !Modernizr.csstransitions,
      isFitWidth: true
    });

  });
</script>

<script>
$(document).ready(function(){
    $('#projectslide').cycle({ 
        fx:     'fade',
        speed:  0, 
        next:   '#projectslide',
        timeout: 0,
        fit: 1,
        slideResize: 1,
        reshape: 1,
    });
});

    $('#container').masonry({
      itemSelector: '.box',
      columnWidth: 20,
      isAnimated: !Modernizr.csstransitions,
      isFitWidth: true,
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:05:10.150

在 Cycle 插件 ( [http://jquery.malsup.com/cycle/int2.html](http://jquery.malsup.com/cycle/int2.html) ) 的文档中，作者展示了如何定义回调函数，因此您可以执行以下操作：

$('#projectslide').cycle({ fx: 'fade', speed: 0, next: '#projectslide', timeout: 0, fit: 1, slideResize: 1, reshape: 1, **after: function() { $('#container').masonry('reload'); }** });

# php - 检索 Magento 子类别名称和链接

> ID：15451738
> 
> 赞同：0
> 
> 时间：2013-03-16T16:32:40.477
> 
> 标签：php, magento, magento-1.7

因此，在产品视图页面上，我想创建一个链接，说明“查看所有子类别产品”范围内的内容，我知道我需要在 /app/design/frontend/default/{my 中进行编辑的一般位置主题}/template/catalog/product/view.phtml

但是我不确定如何检索产品的子类别名称和链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:42:50.730

$_category = 法师::registry('current_category');

回声 $_category->getURL()

这组代码将为您获取类别。

使用 getName 获取类别名称。

进一步补充： $cats = $_product->getCategoryIds(); foreach ($cats as $category_id) { $_cat = Mage::getModel('catalog/category')->load($category_id) ; 回声 $_cat->getName(); 回声 $_cat->getUrl(); }

# c++ - Cython/C++ - 共享 PXD 文件中的头文件路径

> ID：15451740
> 
> 赞同：1
> 
> 时间：2013-03-16T16:33:04.230
> 
> 标签：c++, python, cython

我有一个项目，由不同文件夹中的几个 Cython 模块组成：

```
clibs
  File.cpp
  File.hpp
module
  module/folder
    __init__.py
    file1.pyx
    file1.pxd
  __init__.py
  file2.pyx 
```

在`module/folder/file1.pxd`我有这样的事情：

```
cdef extern from "../../clibs/File.hpp":
    cdef cppclass MyCppClass:
        int _data
        MyCppClass(int arg)

cdef class MyPyClass:
    cdef MyCppClass* cpp_obj 
```

然后在`module/file2.pyx`我`cimport`的声明中`module/folder/file1.pxd`：

```
from module.folder.file1 cimport MyCppClass, MyPyClass 
```

现在，当我尝试构建它时，cython 会生成该行

```
#include "../../clibs/File.hpp" 
```

读取时`module/folder/file1.pxd`，将其放入新生成`module/file2.cpp`的路径中，这显然是一条无效路径！

我该如何解决这个问题？我可以在我的`extern`子句中指定相对于项目根目录的路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:35:33.463

`clibs`我的（临时）解决方案是在每个 python 文件夹中创建一个指向目录的符号链接。

为了阻止这成为版本控制的问题，我在我的顶部和底部添加了以下内容`setup.py`：

```
# at the top:
import os
pwd = os.getcwd()

folders = [
    "module",
    "module/folder"
]

for f in folders:
    os.system("ln -s " + pwd + "/clibs " + f + "/clibs")

try:
    # setup commands...
finally:
    # used here so that if setup raises a compilation exception, we 
    # still tidy up:

    for f in folders:
        os.system("rm " + f + "/clibs") 
```

*注意：*您需要完整的`pwd`- 如果您只指定存储在符号链接中的所有本地文件夹名称，并且您会收到 ELOOP 符号链接过多错误。

我仍然想要一个更好的解决方案，这只是一个肮脏的黑客，只有在何时何地`ln -s`有效`rm`！如果没有发布任何其他内容，我最终会将其标记为“已接受”，但这根本没有必要。

更新：另一个错误是，当代码在网络文件系统上时（例如在 VirtualBox 中的共享文件夹中），您不允许在来宾上创建符号链接 - 非常令人沮丧！

# ruby-on-rails - 格式化相关的 Rails 路线

> ID：15451744
> 
> 赞同：0
> 
> 时间：2013-03-16T16:33:33.830
> 
> 标签：ruby-on-rails, routing, routes, single-page-application, singlepage

如何在rails中实现如下路由：

*   如果请求需要`html`，而不是路由到特定操作，比如说 application#index

*   在`json`格式请求的情况下，将资源路由到正常情况下产生请求的操作`json`

显然，这是单页应用程序的用例，其中 rails 主要仅用于服务`json`s。大多数页面只是非常简单的布局，其中一些值是自举的。

感谢您的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:46:23.473

在 Rails 中解决此问题的方式可以在控制器中通过单个操作进行处理。在路由文件中，您只需声明资源：

```
resources :posts 
```

控制器看起来像这样：

```
def index
  @posts = Post.all

  respond_to do |format|
    format.html  # index.html.erb
    format.json  { render :json => @posts }
  end
end 
```

如您所见，响应的类型取决于请求的类型。

但是，如果你真的想根据类型进行路由，我想你可以尝试这样的事情：

```
match 'posts/:id.:format' => 'posts#html_respond', :constraints => {:format => "html"}
match 'posts/:id.:format' => 'posts#json_respond', :constraints => {:format => "json"} 
```

# php - 制作自己的行时如何从wordpress post表中获取数据

> ID：15451745
> 
> 赞同：-3
> 
> 时间：2013-03-16T16:33:37.207
> 
> 标签：php, wordpress

## 标题

我已经很好地设置了我的 wordpress 网站，但是我在我的数据库的 wp-post 表中做了一些额外的行。我添加了一个名为“periode”的行，但我不知道坐在 Dreamweaver 中时如何显示该行。

我在用着

```
<?php get_header(); ?> 
```

```
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

        <h2><?php the_title(); ?></h2>

            <?php the_content(); ?>

            <?php wp_link_pages(array('before' => 'Pages: ', 'next_or_number' => 'number')); ?>

        <?php edit_post_link('Edit this entry.', '<p>', '</p>'); ?>

    <?php endwhile; endif; ?> 
```

我想在标题和内容之间显示“句号”的行数据。any1 知道任何 php 代码来获取单页信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:53:44.687

好吧，您必须使用 post meta 来获取更多信息，但是如果您想这样做，那么这里是从 sql 获取数据以显示的完整方法。

必需：运行 PHP 和 MySQL 的服务器。如果您没有通过网络使用或测试，则需要在您的 PC 上安装 WAMP，在您的 Mac 上启用 Apache，或者在您的 Linux 机器上安装 Apache。所需技能：

**创建 MySQL 数据库和表 基本 HTML：创建表单和表单元素 基本 PHP：创建变量 echo 语句**

我们将通过创建一个真实世界的应用程序来探索这个主题。我们的目标是访问车辆（汽车）的 MySQL 数据库，通过它们的制造和/或出售/租赁可用性动态选择它们。创建你的 MySQL 数据库

您应该已经熟悉在服务器上创建 MySQL 数据库。请参阅其他教程和参考资料以获取具体帮助。w3schools.com 是一个很好的信息来源。

将您的数据库命名为“myDatabase”或您选择的任何其他名称。跟踪用于设置此数据库的用户名以及使用的密码。您还需要通常是 localhost 的服务器名称，但这取决于您的服务器/网络主机。如果您不确定，请查看他们的文档。创建一个新表

在此数据库中创建一个新表。将其命名为车辆或您选择的任何其他名称。现在，创建一个包含 5 个字段和 7 行的表。我创建了这样的 5 个字段：

```
field: increment, Type: int(1), Extra: auto_increment, Primary Key
field: make, Type: varchar(15), Index
field: model, Type: varchar(15)
field: year, Type: year(4)
field: availability, Type: varchar(5), Index 
```

'make' 和 'availability' 字段已编入索引，以提高搜索效率。对于这种大小的表来说，这并不重要，但对于一个大表来说，它可以帮助提高性能。将数据插入字段。对于此示例，我的表如下所示：

**增量 制造 车型年 可用性**
1 福特嘉年华 2011 销售
2 福特野马 2011 销售
3 福特野马 2010 租赁
4 福特嘉年华 2010 租赁
5 雪佛兰伏特 2011 销售
6 雪佛兰伏特 2011 租赁
7 雪佛兰伏特 2010 租赁

**创建您的网页**

创建、命名和保存网页为 .html 或 .php，无论您喜欢哪个。此页面将包含一个带有单选按钮的表单，允许用户根据品牌（在本例中为福特或雪佛兰）和/或可用性（车辆是出售还是租赁）缩小对汽车的搜索范围. 创建带有单选按钮的表单

这将是一个简单的表格，有 2 个单选按钮组 - 一个选择车辆制造商，另一个选择车辆可用性。该表单将有一个提交按钮，该按钮将作为其发布到 php 页面“vehicles.php”的操作。您可以使用 CSS 随意设置样式。这是代码：

```
<form name="input" action="vehicles.php" method="post">
<fieldset>
<legend>Make you are looking for:</legend>
<input type="radio" name="make" value="ford" /> Ford
<input type="radio" name="make" value="chevy" /> Chevy
<input type="radio" name="make" value="all" checked /> All
</fieldset>
<fieldset>   
<legend>Looking to:</legend>    
<input type="radio" name="availability" value="sale" /> Buy
<input type="radio" name="availability" value="lease" /> Rent 
<input type="radio" name="availability" value="all" checked /> All 
</fieldset>
<input type="submit" value="Submit" />   
</form> 
```

我们来看看表格

此提交的表单将发送值并触发文件“vehicles.php”。该文件将处理在此表单上单击的项目，并将查询 MySQL 数据库以返回请求的信息。

第一个单选按钮组被命名为“make”，以对应数据库表中的相同字段，可以选择的值与数据库表的“make”字段中的数据相同。换句话说，由于我们在数据库中有数据为“ford”和“chevy”，然后我们对按钮使用相同的区分大小写的值。'All' 按钮的值为 'all' 并且是一种特殊情况，我们稍后会看到。第二个单选按钮组名为“availability”，对应数据库表中的相同字段，其值与数据库表的“availability”字段中的数据相同（“sale”、“lease”和特殊情况“全部”）。

由于此表单将发布到“vehicles.php”，接下来让我们创建它。PHP 文件

创建一个新的空 php 文件并将其命名为“vehicles.php”。这个页面/文件需要完成几件事：

从单选按钮接收值 连接到数据库 根据从单选按钮传递的值查询数据库 打印出正确的信息

编写 PHP

为了访问数据库，我们需要用户名、密码、数据库名、服务器名和数据库表名。让我们首先将用户名、密码和数据库名称放入 php 变量中：

```
$username="myUserName";
$password="myPassWord";
$database="myDatabaseName"; 
```

我们可以通过将这些信息放在它自己的单独的 php 文件中，例如命名为“config.php”，从而使其更加安全。然后我们通过在主 php 文件中包含或要求它来访问它。如果放置在根文件夹之外，它会增加另一层安全性。

```
ob_start();
require("config.php");
ob_end_clean(); 
```

包装在命令中开始，然后结束并擦除（清理）输出缓冲（ob），我们也增加了一些安全问题。请查阅 PHP 资源以最好地满足您的安全需求。为请求创建一些变量

接下来我将创建一些变量以用作请求。这些将是从表单的 2 个单选按钮组发送的值。所以第一个，'$req' 将等于我们从'make'按钮组获得的值。第二个 $req2' 将等于从“可用性”单选按钮组中获得的值。

```
$req=$_REQUEST['make'];
$req2=$_REQUEST['availability']; 
```

连接到数据库

我们接下来可以连接到数据库。任何打开的连接都必须在某个时候关闭！如果您需要复习 PHP 的这个或其他细节，请查阅其他 PHP 文档和手册。

```
mysql_connect("localhost",$username,$password);
mysql_select_db($database) or die( "Unable to select database"); 
```

“localhost”是数据库所在服务器的名称。这将因您的服务器而异。许多服务器将其定位为“本地主机”。其他将是特定地址，例如“sql28e8d34f.carrierzone.com”或其他内容。请咨询您的网络主机或服务器管理员以了解您的具体设置。

如果连接出现问题，您将看到消息“无法选择数据库”。选择要使用的表

在一个简单的场景中，您只需说明要在哪个数据库表中工作。在我们的例子中，我们正在使用“车辆”表。选择此表的简单代码（遍历每一行）如下所示：

```
$query="SELECT * FROM vehicles"; 
```

我们想要做的比这复杂一点。让我们来复习。我们想先看看选择了哪个“品牌”。如果选择了“ford”，我们只想将填写“make”字段的行视为“ford”。同样，如果选择了“chevy”，我们只想选择值为“chevy”的“make”字段。但是如果选择了“all”，那么我们确实要考虑所有行。

同样，如果选择了“购买”或“租赁”按钮，我们只想显示“购买”或“租赁”的行，如果选择了“全部”，则我们要考虑所有行。

仅从一个字段中进行选择也相当简单。例如，要只考虑'ford'的行，我们可以要求我们的查询从车辆表中选择所有行，其中字段'make'是'ford'。看起来像这样：

```
$query="SELECT * FROM vehicles WHERE make='ford'"; 
```

由于我们不知道将选择哪个“品牌”，因此我们无法对值进行硬编码。我们希望使用从表单中选择的按钮传递的值。请记住，我们将此值存储为 '$req'，因此现在我们可以将此查询设为：

```
$query="SELECT * FROM vehicles WHERE make='$req'"; 
```

没那么糟糕。但是由于我们想检查 make 和可用性，我们可以使用一个查询，它使用 '$req' 来查找 'make' 和 '$req2' 来查找可用性：

```
$query="SELECT * FROM vehicles WHERE make='$req' AND availability='$req2'"; 
```

好的。仍然没有那么糟糕。但是现在如果为“全部”选择​​一个或两个按钮会发生什么？基本上，对于这 2 个单选按钮组，可能会发生 4 种不同的情况：

选择了特定的品牌并选择了特定的可用性 为“品牌”选择了“全部”，并选择了特定的可用性 为“可用性”选择了“全部” “制造”和“可用性”

可能还有其他方法可以处理这个问题。我选择将其作为一系列“if/else”条件句。这是处理这4个条件的代码：

```
if ($req!="all" && $req2!="all")  $query="SELECT * FROM vehicles WHERE make='$req' AND availability='$req2'";
else if($req=="all" && $req2!="all" ) $query="SELECT * FROM vehicles WHERE availability='$req2'";
else if($req!="all" && $req2=="all" ) $query="SELECT * FROM vehicles WHERE make='$req'";
else if($req=="all" || $req2=="all" ) $query="SELECT * FROM vehicles"; 
```

您可能会注意到所有这些条件实际上只是检查一个值是否设置为“全部”：

```
if(&req=='all') 
```

或者它是否被设置为其他东西（因此它不等于“全部”）：

```
if(&req!='all') 
```

完成查询并关闭连接

以下 4 行标准代码用于完成查询并关闭连接。从中，我们了解哪些行包含我们要求的信息，哪些信息存储在变量“$result”中，以及该信息所在的行数，该信息存储在变量“$num”中。另外，请注意连接现在已关闭。请参阅 PHP 手册以进行进一步讨论。

```
$result=mysql_query($query);
$num=mysql_numrows($result);
mysql_query($result);
mysql_close(); 
```

使用此信息

我们现在可以实际使用这些信息了！我们需要做的是迭代（循环）包含所请求数据的行，并将其打印出来（'echo' it，用 php 行话）。我们将使用“for”循环来完成此操作。您将看到其他人使用“while”循环来执行此操作。根据手头的情况，两者之间的差异可能是微妙的或深刻的。在这种情况下，这并不重要，所以任何一个都可以。

```
$i=0;
for ($i; $i < $num; $i++){
$f12=mysql_result($result,$i,"model");
$f13=mysql_result($result,$i,"year");
$f14=mysql_result($result,$i,"availability"); 
```

请注意，在第 2 行的左大括号中尚未关闭。它很快就会关闭。解释

创建了一个变量“$i”，并将其初始值设置为整数零。'for' 循环从 $i 等于 0 开始，并在 $i 小于 '$num' 的值（即来自查询的正确行数）时继续。每次迭代后，$i 增加 1($i++)。变量 $f12 设置为查询行中值为 $i 的“模型”的值。变量 $f13 设置为查询行中值为 $i 的“年”值。变量 $f14 设置为查询行中值为 $i 的“可用性”值。

将此打印到页面

剩下要做的就是将此信息打印到页面上。我们将通过连接（组合）三个变量（包括每个变量之间的空格）并在第三个变量之后添加换行符来做到这一点。第二行代码用一个右大括号来关闭“for”循环。

```
echo $f12." ".$f13." ".$f14." ";
} 
```

这是完整的html代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Untitled Document</title>
</head>

<body>
<form name="input" action="vehicles.php" method="post">
<fieldset>
<legend>Make you are looking for:</legend>
<input type="radio" name="make" value="ford" /> Ford
<input type="radio" name="make" value="chevy" /> Chevy
<input type="radio" name="make" value="all" checked /> All
</fieldset>
<fieldset>   
<legend>Looking to:</legend>    
<input type="radio" name="availability" value="sale" /> Buy
<input type="radio" name="availability" value="lease" /> Lease 
<input type="radio" name="availability" value="all" checked /> All 
</fieldset>
<input type="submit" value="Submit" />   
</form>
</body>
</html> 
```

这是“vehicle.php”的完整代码

```
<?php
ob_start();
require("config.php");
ob_end_clean();

$req=$_REQUEST['make'];
$req2=$_REQUEST['availability'];

mysql_connect("localhost",$username,$password);
mysql_select_db($database) or die( "Unable to select database");

if ($req!="all" && $req2!="all")  $query="SELECT * FROM vehicles WHERE make='$req' AND availability='$req2'";
else if($req=="all" && $req2!="all" ) $query="SELECT * FROM vehicles WHERE availability='$req2'";
else if($req!="all" && $req2=="all" ) $query="SELECT * FROM vehicles WHERE make='$req'";
else if($req=="all" || $req2=="all" ) $query="SELECT * FROM vehicles";

$result=mysql_query($query);
$num=mysql_numrows($result);

mysql_query($result);
mysql_close();

$i=0;

for ($i; $i < $num; $i++){
$f12=mysql_result($result,$i,"model");
$f13=mysql_result($result,$i,"year");
$f14=mysql_result($result,$i,"availability");

echo $f12." ".$f13." ".$f14."<br />";
}
?> 
```

这是“config.php”的完整代码，其中包含您的数据库密码等：

```
<?php

$username="myUserName";
$password="myPassWord";
$database="myDatabaseName";

?> 
```

# android - 通过串行连接从 iOS 和 android 设备发送控件

> ID：15451755
> 
> 赞同：0
> 
> 时间：2013-03-16T16:34:25.757
> 
> 标签：android, iphone, ios, ipad, serial-port

我正在构建一个假设控制某些设备的应用程序，我想通过串行连接从移动设备（iPad 或 android）串行发送命令到接收器上的 USB 连接。那可能吗？两个平台上都有 API 吗？在 iPad 上，我猜它是一个 30 针到 USB 和 Android 上的连接可用。

# mysql - mysqlslap phpmyadmin

> ID：15451756
> 
> 赞同：2
> 
> 时间：2013-03-16T16:34:36.810
> 
> 标签：mysql

我已经下载了 mysqlslap，我想在 phpmyadmin 中的数据库上执行性能基准测试，当我打开 mysqlslap.exe 时，它​​只是打印连接到 mysqlslap 数据库的错误，不存在这样的数据库，但它没有提供任何选项来选择特定的数据库。任何人都可以帮我解决这个问题。我想输入我的数据库的名称并使用 mysqlslap 执行性能基准测试。提前致谢。我收到以下错误：

```
error when connecting to server 1049 unknown database mysqlslap 
```

如何更改此数据库名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:02:52.473

`mysqlslap`默认情况下，使用**mysqlslap**的模式名称。

要修复您的错误，您可以在运行之前创建它

```
CREATE SCHEMA `mysqlslap` ; 
```

或者你可以使用

```
--create-schema=mysqlslap 
```

作为 mysqlslap 的参数来指定不同的名称。

# sorting - 按任意值对 lua 表进行排序

> ID：15451758
> 
> 赞同：1
> 
> 时间：2013-03-16T16:34:42.660
> 
> 标签：sorting, lua, lua-table

我有一个具有以下结构的表：

```
table = {
    [1] = {"something", "high"}
    [2] = {"something else", "low"}
    [3] = {"something further", "medium"},
    [4] = {"yet more something", "medium"},
} 
```

我想要做的是使用委托函数使用 table.sort() 对该表进行排序，以便优先级变量（高、低、中等）对列表进行排序，列表中紧随其后的是高，然后是中然后低。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T16:56:30.393

你似乎知道如何`table.sort`工作，所以你卡在哪里了？只需创建一个查找表，将优先级名称转换为整数并进行比较：

```
priorities = {high = 2, medium = 1, low = 0}
table.sort(t, function(e1, e2)
    return priorities[e1[2]] > priorities[e2[2]]
end) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:21:49.733

```
table.sort(t, 
  function(e1, e2)
    return e1[2]:sub(-1) < e2[2]:sub(-1)
  end
) 
```

# windows - 多个批处理脚本的共享配置

> ID：15451763
> 
> 赞同：1
> 
> 时间：2013-03-16T16:35:00.657
> 
> 标签：windows, batch-file, cmd

是否可以有一个包含一些公共变量的批处理文件，然后将此脚本包含在其他脚本中，以便在那里可以看到变量？

对此的常用方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:27:05.580

简单地说，在需要查看“共享”值的脚本中

```
CALL yourbatchthatsetsthecommonvariables.bat 
```

**但是**对这些变量的更改将被隔离到特定`CMD`实例 - 它们不会在实例之间进行通信。

**并且**由此为任何实例返回的值`COMMON.BAT`将是与当前实例相关的值。

所以：假设你有`COMMON.BAT`

```
set mytime=%time%
set myval=abc123 
```

然后实例 1... 或实例 2

```
...
call COMMON.BAT
... 
```

将设置`myval`为每个调用的`abc123`时间`mytime``COMMON.BAT`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:52:57.240

试试这个（在第一个脚本中）：

```
set>variables.txt 
```

..在第二个脚本中：

```
for /f "delims=" %%i in (variables.txt) do set %%i 
```

编辑：要对一组变量（第一个文件）执行此操作：

```
::define some variables
set "_myvar1=value1"
set "_myvar2=value2"
set "_myvar3=value3"
::save them to a text file
set _myvar>variables.txt 
```

这会将所有变量标题保存`_myvar`到文本文件中。第二个脚本的代码没有改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T18:52:26.867

当然，这也很常见。

假设您的变量在`config.bat`：

```
set PATH=c:\opt\tools\jdk1.6;%PATH%
set CLASSPATH=c:\opt\projects\myproject\jars;%CLASSPATH% 
```

然后你可以有例如`start-dev.bat`：

```
call common.bat
javaw -cp %CLASSPATH% -Denv=dev 
```

并且`start-prod.bat`：

```
call common.bat
javaw -cp %CLASSPATH% -Denv=prod 
```

# html - HTML 5 音频 - 按钮反馈

> ID：15451766
> 
> 赞同：0
> 
> 时间：2013-03-16T16:35:22.277
> 
> 标签：html, button, click, html5-audio

我编写了一些代码来使用`html5 audio`.

缓慢单击时效果很好，但是快速单击按钮时却无法跟上。

我遇到的问题是让声音在单击按钮时播放多次，我的第一个想法是在触发下一个单击事件时声音还没有完成播放。

* * *

**我如何再次`stop`和`start`mp3 确保它被用户听到？**

* * *

**HTML：**

```
<div id="count">0</div> 
<button>Click</button>
<audio class='mp3click' src='https://dl.dropbox.com/u/14037764/Development/jsfiddle/click2.mp3'></audio> 
```

**Javascript：**

```
 var count = 0;
    $("button").click(function () {
        $(".mp3click").each(function () {
            this.play()
        });
        count++;
        $("#count").text(count);
        return false;
    }); 
```

**JsFiddle：** 你可以在这里看到它的实际效果。 [http://jsfiddle.net/blowsie/ckUbL/](http://jsfiddle.net/blowsie/ckUbL/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:55:44.643

试试这个：

[jsFiddle](http://jsfiddle.net/Tyriar/G8RYt/)

```
var count = 0;
$("button").click(function () {
    $(".mp3click").each(function () {
        this.pause()
        this.currentTime = 0;
        this.play()
    });
    count++;
    $("#count").text(count);
    return false;
}); 
```

# lua - 如何在 Lua 代码上创建新的数据类型？

> ID：15451769
> 
> 赞同：2
> 
> 时间：2013-03-16T16:35:47.057
> 
> 标签：lua, roblox

我在网上搜索过，但没有教程让我很清楚，所以我需要对此进行简要说明：

我想为 lua（在**C**语言编译器中）创建新的数据类型，以创建如下值：

```
pos1 = Vector3.new(5, 5, 4) --Represents 3D position

pos2 = CFrame.new(4, 2, 1) * CFrame.Angles(math.rad(40), math.rad(20), math.rad(5)) --Represents 3D position AND rotation 
```

这些是我可以在名为 Roblox 的游戏引擎上通常使用的一些代码。我想重新创建它们以在 Roblox 外部使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T04:49:50.080

```
local Vector3 = {} 
setmetatable(Vector3,{
    __index = Vector3;
    __add = function(a,b) return Vector3:new(a.x+b.x,a.y+b.y,a.z+b.z); end;
    __tostring = function(a) return "("..a.x..','..a.y..','..a.z..")" end
}); --this metatable defines the overloads for tables with this metatable
function Vector3:new(x,y,z) --Vector3 is implicitly assigned to a variable self
    return setmetatable({x=x or 0,y=y or 0,z=z or 0},getmetatable(self)); #create a new table and give it the metatable of Vector3
end 

Vec1 = Vector3:new(1,2,3)
Vec2 = Vector3:new(0,1,1)
print(Vec1+Vec2) 
```

输出

```
(1,3,4)
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T23:50:23.667

metatables 和 loadstring 是我以与此类似的方式得出的结论：

```
loadstring([=[function ]=] .. customtype .. [=[.new(...)
return loadstring( [[function() return setmetatable( {...} , {__index = function() return ]] .. ... .. [[ ) end )() end]] ]=] )() 
```

这只是我的意思的要点。对不起，它不整洁和完美，但至少它可以继续下去（我昨晚没睡多少）。

# android - Android setTheme 与运行时来自另一个应用程序的资源

> ID：15451770
> 
> 赞同：1
> 
> 时间：2013-03-16T16:35:49.287
> 
> 标签：android, themes

我希望能够使用“主题 apk”（另一个 Android 应用程序）中的资源在运行时设置我的应用程序的主题。我很确定这是不可能的，因为 Activity.setTheme(int resid) 没有获取足够的信息来从另一个包文件加载资源。但是，我问这个问题是为了节省别人我花在搜索上的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:13:03.330

您可以`Context`使用`Context.createPackageContext(String, int)`. 但是，即使您可以访问该包的资源，也不能直接使用 id 来访问，而只能使用全名。

# java - 使用 zxing 连续扫描条码

> ID：15451773
> 
> 赞同：0
> 
> 时间：2013-03-16T16:36:20.573
> 
> 标签：java, android, zxing

我目前正在使用 ZXing 在我的应用程序中扫描条形码。我可以扫描条形码，保存结果并再次打开扫描仪以扫描多个条形码，但我希望扫描仪保持打开状态，以便我可以一个接一个地扫描多个产品。

到目前为止，我遵循了这个（[https://code.google.com/p/zxing/wiki/ScanningViaIntent ）教程，但它没有提供有关如何通过将扫描仪保持在屏幕上来扫描它们的信息。](https://code.google.com/p/zxing/wiki/ScanningViaIntent)

在 iOS 上，可以使用 ZBar SDK。

感谢您的意见和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:06:10.243

这是不可能的。您可以使用应用程序本身而不是 Intent 来执行此操作。

# bash - 打印第一个匹配行

> ID：15451776
> 
> 赞同：2
> 
> 时间：2013-03-16T16:36:32.187
> 
> 标签：bash, sed

使用`sed`，我想打印文件的第一个匹配行。我只想要匹配线本身，没有其他线。这是一个类似的命令，将打印最后匹配的行

```
$ sed '/while/h; $!d; g' foo.sh
while read video 
```

受[aragaer's answer的](https://stackoverflow.com/a/15451819)启发，这似乎做到了

```
$ sed '/while/q;d' foo.sh
  while sleep 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T16:40:54.273

```
sed -n '/LINE TO MATCH/{p;q}' 
```

*   -n 表示“不打印任何东西，除非被告知”
*   p - 打印
*   q - 停止并退出

p 和 q 都将在匹配线上触发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T09:12:15.763

这可能对您有用（GNU sed）：

```
sed '/while/!d;q' file 
```

# c# - 遍历解决方案文件夹中的项目并获取属性

> ID：15451780
> 
> 赞同：1
> 
> 时间：2013-03-16T16:37:13.983
> 
> 标签：c#, asp.net-web-api

**概括：**

是否可以遍历某个解决方案文件夹中的每个项目并从每个项目具有的类或接口中获取属性？如果是这样，我可以要求每个项目都包含这个特定的类吗？

**解释：**

我有一个 ASP.NET Web API 项目。

该项目的一部分是 API 框架，例如：

*   验证
*   日志记录
*   帮助页面生成

这部分可能不会随着时间的推移而发生太大变化，如果它发生变化，则可能是破坏性更改或根本不影响 Api 接口的更改。

另一部分是 API 端点，例如：

*   用户
*   关系
*   反应
*   喜欢

这部分会相对经常变化，所以我想实现版本控制。我的想法是在新项目中制作每个新版本，例如：

*   Api.Endpoints.V1
*   Api.Endpoints.V2
*   Api.Endpoints.V3

我希望这些项目都有一个接口，我可以在主 Api 项目中调用它来添加新版本。

例如，我希望所有`Api.Endpoints.V*`项目都公开一个（Odata）`IEdmModel`属性，我可以循环访问并在我的主项目中注册。在代码中，这看起来像：

**Api.Endpoints.V1：**

```
namespace Api.Endpoints.V1
{
    public class DataModel
    {
        public Model IEdmModel { get; private set; }

        public DataModel()
        {
            ODataModelBuilder modelBuilder = new ODataConventionModelBuilder();
            modelBuilder.EntitySet<Users>("Users");
            modelBuilder.EntitySet<Relations>("Relations");
            modelBuilder.EntitySet<Reactions>("Reactions");
            modelBuilder.EntitySet<Likes>("Likes");
            this.IEdmModel = modelBuilder.GetEdmModel();
        }
    }
} 
```

**主要Api项目（伪代码）：**

```
namespace Api
{
    public static void Register(HttpConfiguration configuration)
    {
       foreach(project in VersionsFolder)
       {
           configuration.Routes.MapODataRoute(routeName: project.Version, routePrefix: project.Version, model: project.Model);
       }    
    }
} 
```

是否可以让这些 Endpoint 项目确认某个接口，例如始终包含一个`DataModel`实现某个接口的类，并在 Main 项目的 Register Method 中循环这个类？还是我在这里出错了，我应该用另一种方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:42:38.687

有一些工具可以保持不同的版本，例如简单的一个是[svn](http://subversion.apache.org/)，你也可以使用[github](https://github.com/)在线，在一个解决方案中保持不同的版本是不好的，你应该自动处理版本控制。此外，我更喜欢使用 TFS 来保存分支和不同的版本。

# javascript - 如何处理两个函数

> ID：15451786
> 
> 赞同：1
> 
> 时间：2013-03-16T16:37:48.693
> 
> 标签：javascript, jquery

我有两个功能`searching`和`searchhistory`. 目前这两个函数正在我的代码中运行，但值`nbofimages`没有更新。

在搜索历史功能完成后，它也只显示一条警报消息。

```
$.when(searching(searchkwd, check_st, check_sf, '31', '1', filter, ori, colorcheck))
 .then(searchhistory(user_search,search_pars,search_username,nbofimages));

var nbofimages;

function searching(searchkwd, check_st, check_sf, '31', '1', filter, ori, colorcheck)
{
    nbofimages = "3";
    alert(nbofimages);
}

function searchhistory(user_search,search_pars,search_username,nbofimages)
{
    alert(nbofimages);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:44:29.057

传递给的函数`$.when`需要返回一个承诺。

```
function searching(searchkwd, check_st, check_sf, '31', '1', filter, ori, colorcheck)
{
    nbofimages = "3";
    alert(nbofimages);
    return true;
} 
```

# iphone - FreeMyApps 是如何工作的？

> ID：15451788
> 
> 赞同：3
> 
> 时间：2013-03-16T16:38:03.230
> 
> 标签：iphone, ios

FreeMyApps 在 iOS 设备上安装一个 mobileconfig 文件来注册这个设备，并获取这个设备的信息（尤其是 UDID）。

然后在 FreeMyApps 中下载并在此设备上安装推荐的应用程序，添加积分。

我猜当下载的应用程序打开时，设备的信息也已发送到 FreeMyApps 的服务器。但是应用程序无法获取设备的UDID，应用程序向服务器发送了什么？服务器如何确定这个安装了应用程序的设备是否与使用 mobileconfig 注册的设备相同？

并建议不胜感激！此致

# java - 命令行中的 Java NoClassDefFoundError

> ID：15451789
> 
> 赞同：1
> 
> 时间：2013-03-16T16:38:04.800
> 
> 标签：java, linux, command-line, classpath, noclassdeffounderror

当我尝试从命令行运行我的程序时，我得到了 NoClassDefError。它在 Netbeans 中运行良好，并且 javac 可以正确编译。

我有一个名为 DistributedSystem 的类，到目前为止它只应该打印“你好”。目录为 src/distributedsystem/，其中包含 DistributedSystem.java 和编译后的 DistributedSystem.class。

如果我在 src/distributedsystem/ 里面并运行

```
java DistributedSystem 
```

然后我得到

```
Exception in thread "main" java.lang.NoClassDefFoundError: DistributedSystem (wrong name: distributedsystem/DistributedSystem)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

如果我在 src/distributedsystem/ 中并运行，我也会得到完全相同的错误

```
java -cp . DistributedSystem 
```

这就是我认为可以解决问题的方法。我还尝试确保没有在其他地方设置类路径，即使 -cp 应该覆盖它。有人有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:42:04.480

类路径应该指向基目录。看起来好像您正在尝试运行`DistributedSystem`package`distributedsystem`中的类，但您的类路径设置为`project/bin/distributedsystem`而不是`project/bin`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:47:05.657

转到文件夹 src 然后从那里编译然后运行

# symfony - 在任何 Symfony2 控制器中获取 Yaml 中的配置数据（定制变量）

> ID：15451791
> 
> 赞同：3
> 
> 时间：2013-03-16T16:38:13.723
> 
> 标签：symfony

我想在主 app/config/config.yml 文件中执行此操作：

```
variables:
    a: 1
    email: jim@email.com
    variable2: hello 
```

这在任何控制器中：

```
$variables = **get Yaml config data**
echo $variables['email']; 
```

我当然不能，但是这样的事情可能吗？

我已经看到您可以在哪里设置全局变量以供 Twig 访问，但没有看到 Symfony2 控制器如何获取它们。

当然，如果还有更好的方法，请提一下，因为这对我来说似乎是一种很好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:42:36.710

用于：`parameters`_`parameters.yml`

```
parameters:
    email: boss@acme.com 
```

这样你就可以通过这种方式在控制器中获取它：

```
$email = $this->container->getParameter('email'); 
```

您还可以创建一个 Twig 全局输入，`config.yml`以便使用相同的参数从 Twig 访问它：

```
twig:
    globals:
        email: %email% 
```

在树枝中：

```
{{ email }} 
```

# php - 更改字符串的格式

> ID：15451792
> 
> 赞同：2
> 
> 时间：2013-03-16T16:38:18.923
> 
> 标签：php

你好我的问题是我将有一个文本区域，我想粘贴以下内容

```
[{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}}] 
```

有什么办法可以运行一个循环，允许我单独操作数据，以便我可以将其更新到数据库。所以我第一次运行循环是得到这个：

```
{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}} 
```

如果可能的话，我想去掉 {'s 和 :'s 和 "s 所以我只剩下逗号和数据。例如：

1173627548，methv，不知道..等

抱歉，如果我以任何方式不清楚我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:45:18.983

```
$myhugejson = 'blah...';

$array = json_decode($myhugejson, true);

foreach($array as $sub) {
    print_r($sub);

    echo $thing = $sub[0]['methv'];
    echo $second = $sub[0]['q1'];
} 
```

在每次迭代中，`$sub`都应该包含你的列表。

所有这一切都假设您使用的是 JSON，我认为是这样。

参考我

# c# - 插入选择查询

> ID：15451799
> 
> 赞同：2
> 
> 时间：2013-03-16T16:39:01.393
> 
> 标签：c#, sql, sql-server, sql-insert

大家好，我希望有人能帮助我，我正在学习 c# 到目前为止，我已经编写了几个有用的程序，但是现在我被一个特定的问题难住了，我已经用谷歌搜索了我认为我需要的查询。这是我的代码

```
 try
        {
            con.Open();
            cmd = new SqlCommand("SELECT * from LMNormal", con);
            cmd.CommandText = ("INSERT INTO LMNormal (upc,cert_code,description,cost,normal_price,pricemethod,groupprice,quantity,special_price,specialcost,specialpricemethod,specialgroupprice,specialquantity,start_date,end_date,pack,size,unitofmeasure) SELECT (upc,cert_code,description,cost,normal_price,pricemethod,groupprice,quantity,special_price,specialcost,specialpricemethod,specialgroupprice,specialquantity,start_date,end_date,pack,size,unitofmeasure) from products where (modified >= @now) and (advertised=@false)");
            cmd.Parameters.AddWithValue("@now", now);
            cmd.Parameters.AddWithValue("@false", selected);
            cmd.Connection = con;
            cmd.ExecuteNonQuery();
            timer1.Start();
            con.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);

        } 
```

当程序执行时，它会捕获我的错误并在''附近说不正确的语法，我很难弄清楚这个逗号在哪里。

感谢您的任何意见

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T16:42:15.427

您唯一需要做的就是**删除在您的选择语句中包含列的括号**，例如

```
INSERT INTO LMNormal (upc, cert_code, description, ..., unitofmeasure)
SELECT upc, cert_code, description, ..., unitofmeasure
FROM   products 
WHERE  (modified >= @now) and (advertised = @false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:53:06.943

从您的选择查询中删除“（”和“）”

```
 cmd.CommandText = ("INSERT INTO LMNormal (upc,cert_code,description,cost,normal_price,pricemethod,groupprice,quantity,special_price,specialcost,specialpricemethod,specialgroupprice,specialquantity,start_date,end_date,pack,size,unitofmeasure)
SELECT upc,cert_code,description,cost,normal_price,pricemethod,groupprice,quantity,special_price,specialcost,specialpricemethod,specialgroupprice,specialquantity,start_date,end_date,pack,size,unitofmeasure from products where modified >= @now and advertised=@false");
            回答 #3

赞同：-1

时间：2013-03-16T16:43:33.103

我相信你失踪了`cmd.CommandType = CommandType.Text`。

```

# iphone - 屏幕分辨率和浏览器分辨率的区别

> ID：15451800
> 
> 赞同：5
> 
> 时间：2013-03-16T16:39:04.427
> 
> 标签：iphone, resolution

iPhone 4s 的分辨率为 640 x 960 像素，但[http://www.whatismyscreenresolution.com/](http://www.whatismyscreenresolution.com/)显示为320 x 480 像素。谁能描述一下这个区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T16:42:48.953

当然，该网站实际上并不知道您设备的物理分辨率。它通过 JavaScript 要求操作系统检索分辨率。在 iOS 上，这有点奇怪：所有与图形相关的框架和库都以“点”为单位测量大小，在非视网膜设备上一个点是一个像素，但**在视网膜设备上一个点是两个像素。**

例如，如果你问`UIKit`同样的事情，你会得到相同的结果。在 iPhone 4 和 4S 上，`[[UIScreen mainScreen] bounds].size`也将返回 320 x 480 - 以磅为单位的大小。

在 JavaScript 中，您可以通过乘以`window.devicePixelRatio`属性来获得正确的分辨率：

```
var scale = window.devicePixelRatio;
window.alert(screen.width * scale + "px x " + screen.height * scale + "px"); 
```

在本机代码中，您可以通过乘以得到物理尺寸`[UIScreen mainScreen].scale`：

```
CGSize size;
size.width = [UIScreen mainScreen].scale * [UIScreen mainScreen].bounds.size.width;
size.height = [UIScreen mainScreen].scale * [UIScreen mainScreen].bounds.size.height;
NSLog(@"%@", NSStringFromCGSize(size)); 
```

此外，您还要求用于检测 Retina 显示器的 CSS3 媒体查询：

```
<link rel="stylesheet" type="text/css" href="foo.css" media="only screen and (-webkit-min-device-pixel-ratio: 2)" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:10:15.970

首先是屏幕分辨率每个现代 LCD 屏幕都使用像素（即微小的方形或矩形点）来显示屏幕信息（文本、图片等）。每个显示器都有一个分辨率，即像素的度量。通常分辨率显示为“640×480”，这意味着有 640 像素，向下 480 像素。将这些数字相乘，您将得到像素总数。有一组标准分辨率，由一系列字母指定，例如 VGA、WVGA、XGA 等

一种分辨率比另一种更好吗？这取决于。作为一般规则，如果您查看两个相同尺寸的屏幕，其中一个的分辨率比另一个高，则分辨率较高的屏幕看起来会更清晰，因为它有更多的像素构成您看到的图像。但是，除非对系统字体大小进行了更改，否则所述高分辨率屏幕上的文本会显得更小。HTC 已确保在其所有更高分辨率的设备（如 Touch Diamond、Pro 和 HD）上提高系统字体大小，以提高可读性，简单的人可以通过[描述黑白屏幕和浏览器差异的最佳方式来理解解析度](http://www.techperday.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T16:42:41.037

它的分辨率为 640 x 960 像素，分辨率为 320 x 480**点**。这与 Retina 显示屏有关。在 Retina 显示器上，每点有 4 个像素 (2x2)，而在普通屏幕上，每点只有 1 个像素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-15T04:50:08.397

**报告比较**

**浏览器宽度/高度和监视器分辨率：**这些报告不一样，因为浏览器宽度/高度只是浏览器窗口中的可视区域。显示器分辨率是整个屏幕，与滚动条或浏览器窗口大小无关。单击以下按钮以查看您的浏览器宽度/高度和显示器分辨率：

[**测试分辨率**](https://www.pakainfo.com/what-is-my-screen-resolution-whatismyscreenresolution/)

**浏览器宽度/高度和屏幕宽度/高度：**这些报告相互排斥，因为浏览器宽度/高度专门针对非移动设备，而屏幕宽度/高度专门针对移动设备。显示器分辨率和屏幕尺寸：虽然这两个报告在本质上显示相同的东西，但它们也是相互排斥的。监视器分辨率专门针对非移动设备报告，屏幕尺寸专门针对移动设备报告。

**在线工具**

**浏览器宽度：**浏览器可视区域的宽度（以像素为单位）。它考虑了滚动条，并且会在窗口大小发生变化时发生变化。这个数字是使用 IE 的 javascript 方法 document.body.offsetWidth 和所有其他浏览器的 window.innerWidth 计算的。

**浏览器高度：**浏览器可视区域的高度（以像素为单位）。它考虑了标题栏和书签栏，并且可以在更改窗口大小时进行更改。这个数字是使用 IE 的 javascript 方法 document.body.offsetHeight 和所有其他浏览器的 window.innerHeight 计算的。

**监视器分辨率：**整个监视器的宽度和高度（以像素为单位），与浏览器大小无关。它是使用 javascript 方法 screen.width 和 screen.height 计算的。

**屏幕尺寸：**仅用于移动报告。它基于移动设备的用户代理字符串，其中引用包含每个设备的屏幕尺寸的查找表。

**屏幕宽度：**仅用于移动报告。与屏幕尺寸相同，只是此报告仅引用设备的屏幕宽度。

**屏幕高度：**仅用于移动报告。与屏幕尺寸相同，只是此报告仅引用设备的屏幕高度。

# java - 类无法识别 Java 中的方法

> ID：15451808
> 
> 赞同：0
> 
> 时间：2013-03-16T16:39:45.683
> 
> 标签：java, methods, arraylist

我在使用以下代码时遇到了几个问题：

```
private ArrayList<TemperatureSensor> sensors = new ArrayList<TemperatureSensor>();

//[...]

private double getAverageTemperature() {
    double addition = 0;
    for(TemperatureSensor sensor : this.sensors)
        addition += sensor.getTemperature();
        return addition / this.sensors.size();
    }
} 
```

getTemperature 方法在 TemperatureSensor 类中，它被定义为：

```
public int getTemperature() {
    // random number [5,40]
    return new Random(System.currentTimeMillis()).nextInt(36)+5;
} 
```

在 getAverageTemperature() 方法中，我收到一条错误消息，指出“方法 getTemperature() 未针对温度传感器类型定义”

另外，如何从抽象类调用两个类具有的特定方法，并且它们的对象存储在 ArrayList 中？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:42:19.767

代码看起来没问题。一切都编译了吗？一切都是新编译的吗？根据您的描述，我假设您的类路径中有一个旧版本的类还没有该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:58:22.810

再次清理并编译您的代码，因为代码看起来不错。对于您的第二个问题，请在下面找到示例

```
public abstract class A {

    public abstract void method();

}

public class B extends A{
    public  void method(){
        //code
    }
}

public class C extends A {
    public  void method(){
        //code
    }
}

public class Main{

    public static void main(String args[]){
        ArrayList<A> obj=new ArrayList<A>();
        obj.add(new B());
        obj.add(new C());
        for (A a : obj) {
            a.method(); // it will call respective method of B and C class
        } 
    }        

} 
```

# php - 在理解连接到 mongoDb 的两个单例 Php 代码时遇到问题

> ID：15451809
> 
> 赞同：1
> 
> 时间：2013-03-16T16:39:50.170
> 
> 标签：php, oop, mongodb

我有这两个代码用于连接到 mongodb。

首先我使用了这段代码，但这似乎不起作用。我不知道为什么。

```
class DbConnection
{
    static $db = NULL;

    static function getMongoCon()
    {
        if (self::$db === null)
        {
            try {
                $m = new Mongo("mongodb://username:password@localhost:27017");

            } catch (MongoConnectionException $e) {
                die('Failed to connect to MongoDB '.$e->getMessage());
            }
            self::$db = $m;
        }
        else
        {
            return self::$db;
        }
    }
} 
```

在此之后我用这种方式在另一个类中连接 mongo

```
 $db=DbConnection::getMongoCon();
   $database=$db->databasename;
     $collection=$db->users; 
```

但这似乎并不总是有效。我总是收到错误 $db not defined 或其他一些未定义的错误。

第二个密码是这样的。我曾经连接到 mongodb 而无需创建多个连接。这工作正常，没有问题。

```
class DbConnection{

    static protected $_instance;

    protected $db = null;

    final protected function __construct() {
        $m = new Mongo("mongodb://username:password@localhost:27017");
        $this->db = $m->selectDB( "databasename" );
    }

    static public function getInstance() {
        if (!(self::$_instance instanceof self)) {
            self::$_instance = new self();
        }
        return self::$_instance;
    }

    public function getConnection() {
        return $this->db;
    }

    final protected function __clone() { }
} 
```

要在我使用的另一个类中使用此代码

```
 $db=DbConnection::getInstance()->getConnection();

         $collection=$db->users; 
```

我不知道为什么第二个有效但第一个代码无效。如果我在 mysql 中同时使用两者都可以正常工作。这也可能是问题，而不是在第二个代码中我创建了到 mongodatabase 的连接并保持它打开并直接在另一个类中使用。

请简单描述为什么第二个代码工作正常而第一个代码没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:58:14.047

在第一段代码中，当`$db`变量是`null`并且您创建新连接时，您的`getMongoCon`函数**不会返回任何内容**，因此当您尝试在示例中使用它时，`$db=DbConnection::getMongoCon();`最终会分配`null`给`$db`变量。

要使其正常工作，您应该执行以下操作：

```
...
static function getMongoCon()
{
    if (self::$db === null)
    {
        try {
            $m = new Mongo("mongodb://username:password@localhost:27017");

        } catch (MongoConnectionException $e) {
            die('Failed to connect to MongoDB '.$e->getMessage());
        }
        self::$db = $m;
    }

    return self::$db;
}
... 
```

# objective-c - XCode 构建期间的错误：不能同时指定“-fobjc-arc”和“-fobjc-gc”

> ID：15451818
> 
> 赞同：0
> 
> 时间：2013-03-16T16:40:49.560
> 
> 标签：objective-c, xcode4.5

我看到以前有人问过这个问题，但是该线程似乎没有解决我的情况。

我刚刚从 SF 下载了一个新的代码库，产品设置为目标 10.8。它是在 GC 时代编写的。

当我构建时，我得到了上面的错误。

ARC 在目标和项目设置中均已关闭。所有文件在构建阶段都没有任何标志。

那么这个标志在哪里打开呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:00:04.493

您可以根据下图禁用或启用 ARC。

![启用/禁用 ARC](../Images/458406fcf7f61e786f6ab2cab62e3206.png)

要启用 ARC，请将其添加`f-objc-arc`到实现文件的编译器标志或`fno-objc-arc`禁用它！

希望能帮助到你！

# grails - Ubuntu 12.10 上的 Grails

> ID：15451820
> 
> 赞同：1
> 
> 时间：2013-03-16T16:40:57.910
> 
> 标签：grails

我正在使用[此处](http://grails.org/download/ubuntu)的说明在 Ubuntu 12.10 上安装 Grails ，但在第 3 步时出现错误，如下所述。

*   sudo add-apt-repository ppa:groovy-dev/grails
*   sudo apt-get 更新
*   **sudo apt-get install grails-ppa**

我得到的错误如下所示。我安装了 Sun JDK，并设置了**JAVA_HOME**，并且**JAVA_HOME/bin**在路径上。

有人可以建议一些事情来解决这个问题吗？

```
/home/edgecase> $ sudo apt-get install grails-ppa
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 default-jre-headless:i386 : Depends: openjdk-7-jre-headless:i386 (>= 7~u3-2.1) but it is not going to be installed
 openjdk-7-jre:i386 : Depends: openjdk-7-jre-headless:i386 (= 7u7-2.3.2a-1ubuntu1) but it is not going to be installed
E: Error, pkgProblemResolver::Resolve generated breaks, this may be caused by held packages.

/home/edgecase> $ java -version
java version "1.6.0_39"
Java(TM) SE Runtime Environment (build 1.6.0_39-b04)
Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01, mixed mode) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:37:02.893

我们需要从网站上删除这些说明，因为 PPA 没有得到维护。请改用[http://gvmtool.net/](http://gvmtool.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T16:34:41.700

是的，请用 GVM 删除 PPA 说明，我浪费了很多时间才找到这个

# css - 字体大小 10px 无法应用，始终为 12px

> ID：15451823
> 
> 赞同：4
> 
> 时间：2013-03-16T16:41:05.847
> 
> 标签：css, internet-explorer, google-chrome, pixel, em

简单的代码，但在 chrome 中字体大小始终为 12px，在 IE 中为 10px。对于大于 12 的 px，可以更改。但是对于 12 岁以下的 px，它不能更改....如何解决这个问题？

```
<html>
<head>
    <style type="text/css" >
    body{
        font-size: 10px;
    }
    div{
        margin: 0 auto;
        border: 1px solid #000;
        width: 60em;
    }
    </style>
</head>
<body>
    <div>
        wrapper
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T16:43:56.923

在 chrome://settings/fonts 中，有一个“最小字体大小”的设置。您可能已将其设置为 12px。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:47:46.923

您可以调整 chrome 中文本的大小。

```
Click  Chrome menu on the browser toolbar.
Select Settings.
Click Show advanced settings.
In the "Web Content" section, use the "Font size" drop-down menu to make adjustments. 
```

[看这里](http://support.google.com/chrome/bin/answer.py?hl=en&answer=96810)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T17:51:44.833

尝试像这样更改大小：

```
body {
        font-size: 10px !important;
} 
```

如果它仍然不起作用，您可能需要一些 javascript 即时更改它（您的项目是否加载了一些 javascript 插件或代码？

或者可能来自其他插件/模块/代码等的css。

或者，也许您真的在 chrome 设置中设置了一些最小字体大小。试着检查一下。

# c++ - c++ 警报计时器，cpu 负载很小

> ID：15451827
> 
> 赞同：0
> 
> 时间：2013-03-16T16:41:46.117
> 
> 标签：c++, windows, performance, timer

我想使用 c++ 和 msvc2010 在 Windows 上编写一个小的警报计时器。计时器需要在几分钟后触发状态消息。我知道如何使用 c++ 检查系统时间，并且我知道 windows api 中有睡眠功能。如何实现一个 CPU 负载很少的定时器？例如，我不想每隔几毫秒检查一次系统时间以在达到触发时间时触发状态消息。当在额外的线程中使用 sleep(600000) 之类的东西时，我是否会创建 cpu 负载，或者是否有更有效的方法来等待几分钟然后执行一些代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:44:09.137

您确实可以忙于等待并轮询时间。即使 a`Sleep(1)`也足以使您的程序几乎无法测量。

我曾经在“过去”这样做，即使在我的 PII 233 Mhz 上运行多个线程，这样做也几乎不会降低 CPU 使用率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:45:42.447

您可以创建一个线程，编写一个连续循环，在其中您只需在触发器需要运行的时间间隔内休眠，然后打印您的消息。如果需要在 2 分钟内运行它，为什么要选择多个小的睡眠值并检查时间？那会浪费CPU时间。

# php - 在启动控制器对象之前预定义要求。它被称为DI容器吗？

> ID：15451828
> 
> 赞同：0
> 
> 时间：2013-03-16T16:41:48.437
> 
> 标签：php

我已经使用注册表模式很长时间了。基本上，我使用主对象加载所有类（即使控制器本身不需要它们）并且控制器可以访问它们。

它目前加载了 20 个类，我想改变我的方法。

我想为我的控制器定义依赖项。例如，我的注册控制器只依赖于数据库类、recaptcha 类和过滤器类。

所以，我想创建一个这样的解决方案：

```
//dependencies 
$registerDependencies = array(new Database(), new Recatpcha(), new Filter());

//load register controller
$this->loadController->('register', $this->loadDependencies($registerDependencies)); 
```

它被称为 DI/DI 容器吗？这是比我目前的系统更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:20:56.143

我可能会使用这种方法：

```
$this->loadController->register('database.main', 'Database')
                     ->register('database.user', 'Database')
                     ->register('recaptcha', 'Racatpcha'); 
```

注册函数看起来像这样

```
public function register($serviceName, $serviceClass)
{
    // you can inject options to your class via a config array or a conf file
    $this->registry[$serviceName] = new $serviceClass();
} 
```

如果你给你的服务一个别名，你可以有多个服务共享同一个类但具有不同的参数。服务“database.main”可以连接到数据库，“database.user”可以连接到另一个数据库。

Symfony2 使用依赖注入，您可以[在其网站上找到有关该组件的文档](http://symfony.com/doc/master/components/dependency_injection/introduction.html)。

# java - “未找到活动”错误

> ID：15451830
> 
> 赞同：1
> 
> 时间：2013-03-16T16:41:52.120
> 
> 标签：java, android, compiler-errors

这是我的主页代码：

```
package com.example.splasher;
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.view.View;
import android.view.View.OnFocusChangeListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {
public static String text;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    // hide statusbar of Android
    // could also be done later
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main);
    Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click
        EditText field= (EditText) findViewById (R.id.editText1);
        field.setOnFocusChangeListener(new OnFocusChangeListener(){
            public void onFocusChange(View v, boolean hasFocus){
                if (hasFocus)    ((EditText)v).selectAll();
            }
        });
        text=field.getText().toString();
        try{
            startActivity(new Intent("com.example.splasher.View"));
            }
       catch(ActivityNotFoundException e){
       }
      }
     });
}
} 
```

这是我调用的活动的代码：

```
package com.example.splasher;

import android.os.Bundle;
import android.app.Activity;
import android.view.Window;
import android.view.WindowManager;
import android.widget.TextView;

public class View extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        // hide statusbar of Android
        // could also be done later
    //  getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    //          WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.view);
    //  TextView textview=(TextView) findViewById (R.id.textView1); 
    //  textview.setText(MainActivity.text);
        }} 
```

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.splasher"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".View"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.splasher.View" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我无法弄清楚为什么会出现此错误。有任何想法吗？名称都是相同的，并且具有相同的大写、小写字母。它们也都在清单中进行了描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:59:44.820

在您的清单中，以大写字母键入活动操作。

<action android:name="COM.EXAMPLE.SPLASHER.VIEW" />

这适用于除主要活动之外的所有活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:49:15.107

不需要您在 View 活动中应用的意图过滤器。只需在 MainActivity 中保留一个意图过滤器

将开始活动行代码替换为以下内容：

```
startActivity(new Intent(MainActivity.this,View.class)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T17:07:06.547

尝试在 MainActivity中替换您的`startActivity`呼叫。`MainActivity.this.startActivity`我认为存在范围问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T22:00:27.153

有`MainActivity.this.startActivity(new Intent(MainActivity.this, Views.class));`'s' 的 Views 类！

# c# - 创建一个选项卡式 WPF 菜单，“ESET Antivirus” - 样式

> ID：15451838
> 
> 赞同：0
> 
> 时间：2013-03-16T16:42:13.003
> 
> 标签：c#, wpf, xaml, layout

我正在寻找一种方法来为一个看起来像 ESET Antivirus UI 的小工具创建应用程序布局：

![ESET 防病毒用户界面](../Images/a23d13e1d9134e70aea309667afb632b.png)

我想，我需要一个 TabControl 并对整个事情进行完整的重新设计。我创建了一个基本的选项卡布局：

```
<Grid Background="White" Grid.Row="1" >
        <TabControl TabStripPlacement="Left">
            <TabItem Header="Dashboard">
                <Grid>

                </Grid>
            </TabItem>
            <TabItem Header="Projects">
                <Grid>

                </Grid>
            </TabItem>
            <TabItem Header="Settings">
                <Grid>

                </Grid>                
            </TabItem>
            <TabItem Header="Help &amp; Info">
                <Grid>

                </Grid>
            </TabItem>
        </TabControl>
    </Grid> 
```

但是，我一点也不知道如何以我希望的方式获取标签。我用 Blend 做了很多尝试，让选项卡看起来像上面的图像，但我不明白。三角形会很好，但应该调整突出显示。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:53:40.017

每当您在尝试使 WPF UI 元素看起来完全符合您的要求时遇到问题，您应该`<style>`从 microsoft 找到默认的 XAML，并尝试直接在您的项目中修改它，直到获得所需的结果。

如果不清楚，您需要按照下面的链接，从页面复制样式并将它们放入窗口的资源部分（或 App.xaml，这完全取决于您）。然后摆弄它们，直到你让它看起来像你想要的那样。

您需要使用的两种样式是[TabControl](http://msdn.microsoft.com/en-us/library/ms754137%28v=vs.85%29.aspx)和[TabItem](http://msdn.microsoft.com/en-us/library/ms752032%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:05:24.853

相反，我会考虑采用 MVVM 方法。

首先，塑造数据的模型，以及业务层（命令、函数等）。然后，您可以将您的模型（通过利用 ViewModel）与左侧选择器的 ListBox 和主要部分的简单 ContentControl 一起“佩戴”。ListBox 的选定项应输入正文的内容，DataTemplateSelector（例如）将选择适当的可视片段。

这只是一个建议。就个人而言，我发现 TabControl 有点棘手，我很少使用它。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T20:23:02.820

一个老技巧是拥有两组不同的图像——一组用于单击，一组用于被动（可能一组用于鼠标悬停），但单击的图像中会包含三角形。这使用静态图像作为按钮，非常易于使用，但很难动态修改。

# c++ - 为什么我们不能在声明时初始化类成员？

> ID：15451840
> 
> 赞同：32
> 
> 时间：2013-03-16T16:42:15.970
> 
> 标签：c++, class, constructor, initialization, member

我想知道我们不能在声明时初始化成员是否有原因。

```
class Foo
{
    int Bar = 42; // this is invalid
}; 
```

相当于使用构造函数初始化列表。

```
class Foo
{
    int Bar;
public:
    Foo() : Bar(42) {}
} 
```

我个人的理解是，上面的例子更具表现力和意图。此外，这是一个较短的语法。而且我看不到与其他语言元素混淆的任何可能性。

对此有官方澄清吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-16T16:59:17.310

在 C++11 之前，不能像这样初始化非静态成员。如果您使用 C++11 编译器进行编译，它应该很乐意接受您提供的代码。

我想首先不允许它的原因是因为数据成员声明不是定义。没有引入对象。如果您有一个数据成员，例如`int x;`，`int`则在您实际创建类类型的对象之前不会创建任何对象。因此，这个成员的初始化器会产生误导。只有在构造过程中才能为成员分配值，这正是成员初始化列表的用途。

在添加非静态成员初始化之前，还有一些技术问题需要解决。考虑以下示例：

```
struct S {
    int i(x);
    // ...
    static int x;
};

struct T {
    int i(x);
    // ...
    typedef int x;
}; 
```

在解析这些结构时，在解析 member`i`时，它是数据成员声明（如`S`）还是成员函数声明（如`T`）是模棱两可的。

使用添加的功能，这不是问题，因为您无法使用此括号语法初始化成员。您必须使用*大括号或相等初始化器*，例如：

```
int i = x;
int i{x}; 
```

这些只能是数据成员，所以我们没有问题了。

请参阅提案[N2628](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2628.html)，以更全面地了解在提出非静态成员初始化程序时必须考虑的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T16:55:14.083

主要原因是初始化适用于对象或实例，而在类中的声明中没有对象或实例；在你开始建造之前你没有那个。

在这方面有一些演变。已经在 C++98 标准化的最后阶段，委员会增加了对整数类型的静态 const 成员执行此操作的可能性——主要是因为这些可以在编译器必须能够看到初始化的上下文中使用. 在 C++11 中，该语言已扩展为允许在声明中指定初始化程序，但这只是一种简写方式——实际初始化仍然发生在构造函数的顶部。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-12-28T06:21:21.067

当声明两个或多个对象（类的实例）时，这些对象共享这些数据成员。因此可以在构造函数的帮助下初始化值。所以我们不能在声明期间初始化类成员。

# c - GNU C 扩展文档：它在哪里？

> ID：15451841
> 
> 赞同：1
> 
> 时间：2013-03-16T16:42:18.460
> 
> 标签：c, gnu

**我知道GNU C 编译器**（又名 gcc）中添加了几种语言扩展。[我可以在这里](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/index.html#toc_C-Extensions)读到一些关于它的东西。

我正在寻找的是关于这些主题的更深入和更广泛的文档。

例如，我想了解更多关于 _Static_assert()、typeof 等的信息。

也许这只是我的错，但我找不到这样的官方文档。有什么提示吗？蒂亚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T21:58:43.790

答案是 [http://gcc.gnu.org/onlinedocs/gcc/C-Extensions.html](http://gcc.gnu.org/onlinedocs/gcc/C-Extensions.html)并且您没有找到关于静态断言的信息，因为它不是 C 语言的扩展，它是核心、内置、标准化语言的一部分并在语言国际标准中描述。在这种情况下，请参阅 C 规范：

[http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

请参阅第 6.7.10 节静态断言，特别是第 3 段：

“常量表达式应为整数常量表达式。如果常量表达式的值比较不等于 0，则声明无效。否则，违反约束，实现应生成包含字符串文本的诊断消息字面量，除了不在基本源字符集中的字符不需要出现在消息中。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:07:25.297

这里： http: [//gcc.gnu.org/onlinedocs/gcc/C-Extensions.html](http://gcc.gnu.org/onlinedocs/gcc/C-Extensions.html)。

使用 Google 在 gnu.org 中搜索。通过在 Google 中输入以下搜索找到它：`c extensions site:gnu.org`。

# android - Android：Costum laucher 在屏幕的一部分显示应用程序

> ID：15451849
> 
> 赞同：0
> 
> 时间：2013-03-16T16:42:46.037
> 
> 标签：android

我想创建一个自定义启动器，以便在屏幕右侧显示应用程序图标列表，当用户单击应用程序图标时，它将在主屏幕左侧打开应用程序（这是我仍然怀念的部分）。那可行吗？如果是这样，我应该从哪里开始？任何建议的链接或资源？

提前致谢。

# scheme - 方案中语法对象的目的到底是什么？

> ID：15451852
> 
> 赞同：6
> 
> 时间：2013-03-16T16:43:17.300
> 
> 标签：scheme, eval, racket, hygiene, syntax-object

我正在尝试在 python 中编写一种类似于方案的小型语言，以便更好地理解方案。

问题是我被困在语法对象上。我无法实施它们，因为我并不真正了解它们的用途以及它们的工作方式。

为了理解它们，我在 DrRacket 中使用了一些语法对象。

从我能够找到的情况来看，评估`#'(+ 2 3)`与评估没有什么不同`'(+ 2 3)`，除非在`+`顶级命名空间中有一个词法变量遮蔽了该变量，在这种情况下`(eval '(+ 2 3))`仍然返回`5`，但`(eval #'(+ 2 3))`只是抛出一个错误。

例如：

```
(define (top-sym)
  '(+ 2 3))
(define (top-stx)
  #'(+ 2 3))
(define (shadow-sym)
  (define + *)
  '(+ 2 3))
(define (shadow-stx)
  (define + *)
  #'(+ 2 3)) 
```

`(eval (top-sym))`, `(eval (top-stx))`, and `(eval (shadow-sym))`all return `5`, while`(eval (shadow-stx))`抛出错误。*他们都没有*回来`6`。

如果我不知道更好，我会认为语法对象的唯一特别之处（除了它们存储代码位置以便更好地报告错误的微不足道的事实）是它们在某些情况下抛出错误符号对应项将返回一个可能不需要的值。

如果故事就这么简单，那么使用语法对象相对于常规列表和符号将没有真正的优势。

所以我的问题是：我错过了什么让它们如此特别的语法对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T22:35:59.727

语法对象是底层 Racket 编译器的词法上下文的存储库。具体来说，当我们进入如下程序时：

```
#lang racket/base
(* 3 4) 
```

编译器接收代表该程序全部内容的语法对象。这是一个示例，让我们看看该语法对象的样子：

```
#lang racket/base

(define example-program 
  (open-input-string
   "
    #lang racket/base
    (* 3 4)
   "))

(read-accept-reader #t)
(define thingy (read-syntax 'the-test-program example-program))
(print thingy) (newline)
(syntax? thingy) 
```

请注意，`*`程序中的 具有编译时表示，作为 中的语法对象`thingy`。目前，`*`in`thingy`不知道它来自哪里：它还没有绑定信息。正是在*扩展*过程中，在编译过程中，编译器将其关联`*`为对`*`of的引用`#lang racket/base`。

如果我们在编译时与事物交互，我们可以更容易地看到这一点。（注意：我故意避免谈论，`eval`因为我想避免混淆在编译时和运行时发生的事情的讨论。）

这是一个示例，让我们更多地检查这些语法对象的作用：

```
#lang racket/base
(require (for-syntax racket/base))

;; This macro is only meant to let us see what the compiler is dealing with
;; at compile time.

(define-syntax (at-compile-time stx)
  (syntax-case stx ()
    [(_ expr)
     (let ()
       (define the-expr #'expr)
       (printf "I see the expression is: ~s\n" the-expr)

       ;; Ultimately, as a macro, we must return back a rewrite of
       ;; the input.  Let's just return the expr:
       the-expr)]))

(at-compile-time (* 3 4)) 
```

我们将在这里使用一个宏`at-compile-time`，来让我们在编译期间检查事物的状态。如果你在 DrRacket 中运行这个程序，你会看到 DrRacket 首先编译程序，然后运行它。在编译程序时，当它看到使用 of 时`at-compile-time`，编译器将调用我们的宏。

所以在编译时，我们会看到类似：

```
I see the expression is: #<syntax:20:17 (* 3 4)> 
```

让我们稍微修改一下程序，看看我们是否可以检查[`identifier-binding`](http://docs.racket-lang.org/reference/stxcmp.html#%28def._%28%28quote._~23~25kernel%29._identifier-binding%29%29)标识符：

```
#lang racket/base
(require (for-syntax racket/base))

(define-syntax (at-compile-time stx)
  (syntax-case stx ()
    [(_ expr)
     (let ()
       (define the-expr #'expr)
       (printf "I see the expression is: ~s\n" the-expr)
       (when (identifier? the-expr)
         (printf "The identifier binding is: ~s\n" (identifier-binding the-expr)))

       the-expr)]))

((at-compile-time *) 3 4)

(let ([* +])
  ((at-compile-time *) 3 4)) 
```

如果我们在 DrRacket 中运行这个程序，我们将看到以下输出：

```
I see the expression is: #<syntax:21:18 *>
The identifier binding is: (#<module-path-index> * #<module-path-index> * 0 0 0)
I see the expression is: #<syntax:24:20 *>
The identifier binding is: lexical
12
7 
```

（顺便说一句：为什么我们会从`at-compile-time`前面看到输出？因为编译完全是在运行时之前完成的！如果我们预编译程序并使用[raco make](http://docs.racket-lang.org/raco/make.html)保存字节码，我们将*不会*在运行时看到编译器被调用该程序。）

当编译器使用 时`at-compile-time`，它知道将适当的词法绑定信息与标识符相关联。当我们`identifier-binding`在第一种情况下检查时，编译器知道它与特定模块相关联（在这种情况下，`#lang racket/base`，这就是该`module-path-index`业务所涉及的）。但是在第二种情况下，它知道它是一个*词法*绑定：编译器已经遍历了`(let ([* +]) ...)`，因此它知道使用`*`引用回到由`let`.

Racket 编译器使用语法对象将这种绑定信息传递给客户端，例如我们的宏。

* * *

尝试用它`eval`来检查这类东西充满了问题：语法对象中的绑定信息可能不相关，因为当我们评估语法对象时，它们的绑定可能会引用不存在的东西！这就是您在实验中看到错误的根本原因。

不过，这里有一个例子展示了 s 表达式和语法对象之间的区别：

```
#lang racket/base

(module mod1 racket/base
  (provide x)
  (define x #'(* 3 4)))

(module mod2 racket/base
  (define * +) ;; Override!
  (provide x)
  (define x  #'(* 3 4)))

;;;;;;;;;;;;;;;;;;;;;;;;;;;

(require (prefix-in m1: (submod "." mod1))
         (prefix-in m2: (submod "." mod2)))

(displayln m1:x)
(displayln (syntax->datum m1:x))
(eval m1:x)

(displayln m2:x)
(displayln (syntax->datum m2:x))
(eval m2:x) 
```

这个例子是精心构造的，因此语法对象的内容只涉及到模块绑定的东西，这些东西在我们使用的时候就存在`eval`。如果我们稍微改变一下这个例子，

```
(module broken-mod2 racket/base
  (provide x)
  (define x  
    (let ([* +])
      #'(* 3 4)))) 
```

然后当我们尝试`eval`从. 是一只困难的野兽。`x``broken-mod2``eval``eval`

# javascript - 新添加的 DOM 元素返回 null

> ID：15451859
> 
> 赞同：1
> 
> 时间：2013-03-16T16:43:46.333
> 
> 标签：javascript, dom, tinymce, getelementbyid

我在运行时向 tinymce 文档添加跨度。

```
ed.onKeyUp.add(function (ed, e) {
   sendText(ed, e);
   ed = tinyMCE.get('editor');
   range = ed.selection.getRng();

   var newNode = ed.getDoc().createElement("span");
   newNode.id = "caret";
   ed.getDoc().body.appendChild(newNode);

   newNode.innerHTML = "|";
   newNode.style.color = "black";
   range.insertNode(newNode);
}); 
```

如您所见，我正在使用 createElement 方法添加节点，并通过使用 append child 将其添加到 DOM 到我想要的元素。

问题是我无法使用以下方法找到新添加的元素：

```
document.getElementById("caret"); 
```

它返回空值。为什么会这样？知道我能做什么吗？

**编辑**：我正在使用 document.getElementById("caret"); 在初始化 tinyMCE 文档时调用的函数中，因为我需要此函数来闪烁自定义插入符号。

这是功能：

```
function blink() {
        var caret = document.getElementById("caret");

        if (caret.style.color == "transparent") {
            caret.style.color = "black"
        } else {
            caret.style.color = "transparent";
        }
    } 
```

我称它为 oninit: setInterval("blink()", 700) 其中 oninit 是 tinyMCE 的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:51:17.177

TinyMCE 使用包含自己的文档的 iframe 来允许编辑。

因此，当您使用 时`document.getElementById`，您正在搜索错误的 DOM。

如果您有权访问 TinyMCE 编辑器对象，则可以`ed.getDoc().getElementById()`改用。

如果您需要全局访问，您可以使用[`TinyMCE.editors`](http://www.tinymce.com/wiki.php/API3%3aproperty.tinymce.editors)集合来访问特定的编辑器。

# php - 查找要编辑的正确 PHP 文件

> ID：15451860
> 
> 赞同：1
> 
> 时间：2013-03-16T16:43:46.500
> 
> 标签：php

这篇文章遵循研究和最近的另一篇 SO 帖子。该问题类似于“在任何 PHP 站点上是否有办法识别包含您在网页上查看的 html 的文件？” 使用例如“检查元素”功能。

看来不是。美好的。有没有解决这个问题的传统方法？从研究来看，这似乎是一个安全问题，所以使用 PHP 你不能。

我可以使用 Filezilla 登录主机。我想编辑我的主导航菜单。因此，我想搜索导航、导航、主菜单等内容，但这些内容似乎没有搜索功能。

开发人员通常在这里做什么（我对 PHP 很陌生）。当他们在不是他们创建的网站上工作时，他们通常如何识别要进行编辑的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:50:00.347

这可能会有所帮助：进入源代码并找到为您的导航生成的特定 HTML 片段的开头。可能是（我不包括结束标签，因为它可能是动态生成的）：

```
<nav id="main" 
```

或者

```
<ul class="navigation" 
```

获取类似 Sublime Text 的内容并将项目文件夹拖入其中。然后执行 Find -> Find in Files (Ctrl-Shift-F) 并搜索该 HTML 片段。

希望你能找到你要找的东西。

# iphone - Cocos2d 输入层只接收精灵顶部的触摸

> ID：15451862
> 
> 赞同：0
> 
> 时间：2013-03-16T16:43:54.897
> 
> 标签：iphone, cocos2d-iphone

我正在使用 Cocos2d for iPhone 构建游戏，现在我正在尝试让 Touch 输入正常工作。我已经在多层场景中的独立控制层上启用了触摸响应，并且它工作正常 - 除了它仅在触摸位于我在单独层上的精灵顶部时触发触摸方法（单独层是实际上只是一个节点）。除了那个精灵之外，我没有任何其他屏幕内容。

这是我的控制层实现：

```
#import "ControlLayer2.h"

extern int CONTROL_LAYER_TAG;
@implementation ControlLayer2
+(void)ControlLayer2WithParentNode:(CCNode *)parentNode{
    ControlLayer2 *control = [[self alloc] init];
    [parentNode addChild:control z:0 tag:CONTROL_LAYER_TAG];
}

-(id)init{
    if (self=[super init]){

        [[[CCDirector sharedDirector]touchDispatcher] addTargetedDelegate:self priority:0    swallowsTouches:YES];
    }
    return self;
}

-(BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{
    CCLOG(@"touchbegan");
    return YES;
}

@end 
```

这是带有子节点的图层，其中有一个精灵：

```
extern int PLAYER_LAYER_TAG;

int PLAYER_TAG = 1;

@implementation PlayerLayer
//reduces initializing and adding to the gamescene to one line for ease of use
+(void)PlayerLayerWithParentNode:(CCNode *)parentNode{
    PlayerLayer *layer = [[PlayerLayer alloc] init];
    [parentNode addChild:layer z:1 tag:PLAYER_LAYER_TAG];
}

-(id)init{
    if(self = [super init]){
        //add the player to the layer, know what I'm sayer(ing)?
        [Player playerWithParentNode:self];
    }
    return self;
}

@end 
```

最后，包含它们的场景：

```
int PLAYER_LAYER_TAG = 1;
int CONTROL_LAYER_TAG = 2;
@implementation GameScene

+(id)scene{
    CCScene *scene = [CCScene node];
    CCLayer *layer = [GameScene node];
    [scene addChild:layer z:0 tag:0];
    return scene;
}

-(id)init{
    if(self = [super init]){
        //[[[CCDirector sharedDirector]touchDispatcher] addTargetedDelegate:[self getChildByTag:0] priority:0 swallowsTouches:YES];
        //add the player layer to the game scene (this contains the player sprite)
        [ControlLayer2 ControlLayer2WithParentNode:self];
        [PlayerLayer PlayerLayerWithParentNode:self];

    }
    return self;
}

@end 
```

如何使控制层响应所有触摸输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:48:06.823

在 init 方法中添加此代码。

```
self.touchEnabled = YES; 
```

并使用这个 ccTouchesBegan

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    //handle touch
} 
```

删除代码中的这一行：

```
 [[[CCDirector sharedDirector]touchDispatcher] addTargetedDelegate:self priority:0    swallowsTouches:YES]; 
```

**更新：** [这里是完整的代码](http://pastebin.com/4MuENv0c)

# android - NetworkInterface.getHardwareAddress() 的替代方法？

> ID：15451864
> 
> 赞同：3
> 
> 时间：2013-03-16T16:43:58.607
> 
> 标签：android, networking

我已经使用这个 API 来选择设备的 mac 地址，

NetworkInterface.getHardwareAddress()

但这是针对 API 级别 9 及更高版本的，我应该使用什么来选择 API 级别 8 的 MAC 地址？froyo 设备。

可能这是一件非常简单的事情，但我尝试谷歌搜索并找不到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:49:23.907

[WifiInfo.getMacAddress()](http://developer.android.com/reference/android/net/wifi/WifiInfo.html#getMacAddress%28%29)从 API 级别 1 开始可用。

```
WifiManager wifiMan = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
WifiInfo wifiInf = wifiMan.getConnectionInfo();
String macAddr = wifiInf.getMacAddress(); 
```

您需要添加：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

到你的清单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T21:12:55.860

WifiInfo.getMacAddress() 始终为您提供 Wi-Fi MAC 地址，尽管您的活动接口当前可能是蜂窝网络。如果预期目的是获取关联的硬件地址（例如从蜂窝连接），则应从 rmnet0 接口等检索 MAC（如果需要 IP/MAC 关联）。

# excel - 如何将一个单元格中的文本计算为microsoft excel另一个单元格中的公式？

> ID：15451868
> 
> 赞同：0
> 
> 时间：2013-03-16T16:44:16.157
> 
> 标签：excel

这是我希望电子表格的样子。

```
 COLUMN A        COLUMN B        COLUMN C        COLUMN D
ROW1   hello           1               hello+hi        10
ROW2   hi              9               hello*hi        9 
```

我希望能够在单元格 A1 中的文本之后命名单元格 B1，在单元格 A2 中的文本之后命名单元格 B2。然后我希望能够计算 C 列中的方程并将答案放在 D 列中。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:50:24.173

EVALUATE 在所有当前版本的 VBA 中都可用

您可以将它包含在您的 VBA 代码中，或者将其包装到一个简单的 UDF 中以使其可用作工作表函数

```
Function ev(r As Range) As Variant
    ev = Evaluate(r.Value)
End Function 
```

它基本上将传递的参数的值视为excel公式，就像在单元格中输入一样

`"11+5"`并将`"=11+5"`产生相同的结果

参考：[https ://superuser.com/questions/253353/excel-function-that-evaluates-a-string-as-if-it-were-a-formula](https://superuser.com/questions/253353/excel-function-that-evaluates-a-string-as-if-it-were-a-formula)

# django - 在模板中格式化 django form.non_field_errors

> ID：15451869
> 
> 赞同：8
> 
> 时间：2013-03-16T16:44:17.700
> 
> 标签：django, django-templates

如何在模板中格式化 django form.non_field_errors.as_text 而不将它们作为无序列表或`*`附加到前面？

`{{ form.non_field_errors.as_text }}``*`在文本前面显示错误。

这张[django 票](https://code.djangoproject.com/ticket/4471)也有助于解释为什么`*`不会被删除，但这对我没有帮助。我不想要了`*`。

{{ form.non_field_errors }} 和 {{ form.non_field_errors.as_ul }} 都显示为无序列表，我不想要无序列表。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-17T16:49:14.587

```
{% for error in form.non_field_errors %}
    {{error}}
{% endfor %} 
```

当您将错误列表作为文本调用时，它会尝试将其显示为列表。只需遍历列表以自行获取错误，以便您可以应用自己的样式。

有关它的更多信息，请访问 django 项目[网站](https://docs.djangoproject.com/en/dev/topics/forms/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T10:48:32.130

好吧，默认情况下，Django 表单使用[ErrorList](https://github.com/django/django/blob/75d03c775553b9778db513213376d335d23819a8/django/forms/util.py#L48)作为`error_class`（[证明链接](https://github.com/django/django/blob/75d03c775553b9778db513213376d335d23819a8/django/forms/forms.py#L80)）。如您所见，它的`as_text`方法格式通过在值前面加上星号来列出。

`error_class`因此，您可以使用自己的方法创建一些自定义，`as_text`并以合适的方式将其传递给您的表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-19T16:33:05.977

迭代`form.non_field_errors`并不总是最好的方法，例如，在我的情况下，我想使用[Django Widget Tweaks](https://github.com/jazzband/django-widget-tweaks)在相关字段旁边显示[此屏幕截图中](https://i.stack.imgur.com/O7GY6.png)的工具提示。

**项目/应用程序/模板/模板.html**

```
{% render_field field class="form-control is-invalid" data-toggle="tooltip" title=field.errors.as_text %} 
```

我没有乱用模板代码来一次性传递 HTML`title`属性，而是按照[@oblalex](https://stackoverflow.com/a/25642386/7192373)的提示编写了我自己的修改[`ErrorList`类](https://github.com/django/django/blob/master/django/forms/utils.py#L80)，并使用了一个`as_text`不带星号的方法。

**项目/应用程序/utils.py**

```
from django.forms.utils import ErrorList

class MyErrorList(ErrorList):
"""
Modified version of the original Django ErrorList class.

ErrorList.as_text() does not print asterisks anymore.
"""
    def as_text(self):
        return '\n'.join(self) 
```

现在该`as_text()`函数已被覆盖，您可以将您的类`MyErrorList`作为您的or或类似的`error_class`参数传递给我的一些表单集：`Form``ModelForm``ModelForm`

**项目/应用程序/views.py**

```
from django.forms import formset_factory
from .forms import InputForm
from .utils import MyErrorList

def yourView(request):
    InputFormSet = formset_factory(InputForm)
    formset = InputFormSet(error_class=MyErrorList)

    context = {'formset': formset}
    return  render(request, 'template.html', context) 
```

[现在工具提示看起来像这样，没有星号。](https://i.stack.imgur.com/9wQ3T.png)

`error_class`而不是每次在视图中实例化表单时都传递，您可以将此单线添加到您的表单类中（请参阅[@Daniel](https://stackoverflow.com/a/2138924/7192373)的此答案）：

**项目/应用程序/forms.py**

```
from django import forms
from .utils import MyErrorList

class InputForm(forms.ModelForm):

    def __init__(self, *args, row, **kwargs):
        super(InputForm, self).__init__(*args, **kwargs)
        self.error_class = MyErrorList 
```

# cocoa - cursorUpdate 调用，但游标未更新

> ID：15451872
> 
> 赞同：4
> 
> 时间：2013-03-16T16:44:33.333
> 
> 标签：cocoa, cursor, nstextview, nscursor

我已经为此工作了几个小时，不知道出了什么问题。我想要一个按钮的自定义光标，它是 NSTextView 的子视图，我添加了一个跟踪区域并在鼠标输入按钮时发送 cursorUpdate 消息。

每次鼠标进入跟踪区域时，确实会调用 cursorUpdate 方法。但光标停留在 IBeamCursor。

有任何想法吗？

Apple Docs 参考：[管理光标更新事件](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/EventOverview/TrackingAreaObjects/TrackingAreaObjects.html#//apple_ref/doc/uid/10000060i-CH8-SW1)

```
- (void)cursorUpdate:(NSEvent *)event {
    [[NSCursor arrowCursor] set];
}

- (void)myAddTrackingArea {
    [self myRemoveTrackingArea];

    NSTrackingAreaOptions trackingOptions = NSTrackingCursorUpdate | NSTrackingMouseEnteredAndExited | NSTrackingActiveInKeyWindow;
    _trackingArea = [[NSTrackingArea alloc] initWithRect: [self bounds] options: trackingOptions owner: self userInfo: nil];
    [self addTrackingArea: _trackingArea];
}

- (void)myRemoveTrackingArea {
    if (_trackingArea)
    {
        [self removeTrackingArea: _trackingArea];
        _trackingArea = nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-11T16:46:11.673

我遇到了同样的问题。

问题是，`NSTextView`每次收到`mouseMoved:`事件时都会更新其光标。该事件由 的自我更新触发`NSTrackingArea`，它始终跟踪 .内部的`NSTextView`可见部分。所以我能想到的可能有两种解决方案。`NSTextView``NSScrollView`

1.  覆盖`updateTrackingAreas`删除 Cocoa 提供的跟踪区域，并确保您始终创建一个新的而不是排除按钮的跟踪区域。（我不会这样做！）

2.  覆盖`mouseMoved:`并确保当光标在按钮上时它不会调用 super 。

    ```
    - (void)mouseMoved:(NSEvent *)theEvent {
        NSPoint windowPt = [theEvent locationInWindow];
        NSPoint superViewPt = [[self superview]
              convertPoint: windowPt  fromView: nil];
        if ([self hitTest: superViewPt] == self) {
            [super mouseMoved:theEvent];
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-14T21:58:29.943

我遇到了同样的问题，但是使用了一个简单`NSView`的子类，它是窗口的子类，`contentView`并且不位于`NScrollView`.

`cursorUpdate`标志的文档`NSTrackingArea`听起来好像您只需要处理鼠标进入跟踪区域矩形。但是，我必须手动检查鼠标位置，因为`cursorUpdate(event:)`当鼠标进入跟踪区域的矩形**和**离开跟踪矩形时都会调用该方法。因此，如果`cursorUpdate(event:)`实现只设置光标而不检查它是否位于跟踪区域矩形内，则在进入**和离开**矩形时都会设置它。

状态的文档`cursorUpdate(event:)`：

> 覆盖此方法以设置光标图像。如果光标矩形当前有效，则默认实现使用光标矩形。如果不是，它会调用 super 将消息发送到响应者链。
> 
> 如果响应者实现了这个方法，但决定不处理特定事件，**它应该调用这个方法的超类实现**。

```
override func cursorUpdate(with event: NSEvent) {
    // Convert mouse location to the view coordinates
    let mouseLocation = convert(event.locationInWindow, from: nil)

    // Check if the mouse location lies within the rect being tracked
    if trackingRect.contains(mouseLocation) {
        // Set the custom cursor
        NSCursor.openHand.set()
    } else {
        // Reset the cursor
        super.cursorUpdate(with: event)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T00:13:11.363

我刚刚通过谷歌搜索遇到了这个问题，所以我想我会发布我的解决方案。

1.  子类化 NSTextView/NSTextField。
2.  按照文档[中的步骤创建一个 NSTrackingArea](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/EventOverview/TrackingAreaObjects/TrackingAreaObjects.html)。应该如下所示。把这段代码放在子类的init方法中（同时添加`updateTrackingAreas`方法）：

    ```
    NSTrackingArea *trackingArea = [[NSTrackingArea alloc] initWithRect:self.bounds options:(NSTrackingMouseMoved | NSTrackingActiveInKeyWindow) owner:self userInfo:nil];
    [self addTrackingArea:trackingArea];
    self.trackingArea = trackingArea; 
    ```

3.  现在您需要将`mouseMoved:`方法添加到子类：

    ```
    - (void)mouseMoved:(NSEvent *)theEvent {
        NSPoint point = [self convertPoint:theEvent.locationInWindow fromView:nil];
        if (NSPointInRect(point, self.popUpButton.frame)) {
            [[NSCursor arrowCursor] set];
        } else {
            [[NSCursor IBeamCursor] set];
        }
    } 
    ```

注意：`self.popUpButton`按钮是 NSTextView/NSTextField 的子视图。

而已！它最终不会太难 - 只需要使用`mouseMoved:`而不是`cursorUpdate:`. 我花了几个小时才弄清楚这一点，希望有人可以使用它。

# php - php获取最旧的记录并添加1周

> ID：15451874
> 
> 赞同：-1
> 
> 时间：2013-03-16T16:44:43.503
> 
> 标签：php, datetime, time, increment

我正在考虑每周自动发布一次博客，这样我就可以创建更多帖子，然后让它们每周发布一次。我在获得最好的时间并增加 1 周时遇到了一些麻烦。

我的数据库我正在使用“日期时间”。所以字符串在“2013-03-20 09:42:41”中。

我可以获得 best post 的值`blog_date`，但是如何在字符串中添加 1 周？

```
date('$blog_date', strtotime("+1 week")); 
```

谢谢你的时间^^

答案工作：

```
$blog_date = date('Y-m-d h:i:s', strtotime("+1 week", strtotime($newest))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:54:24.820

您可以使用 Datetime 对象轻松添加一周

[http://php.net/manual/en/book.datetime.php](http://php.net/manual/en/book.datetime.php)

```
$date = new DateTime('2013-03-20 09:42:41');
$date->modify('+1 week'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:09:38.710

试试这个..

```
$blog_date = "2013-03-20 09:42:41";
$date2 = strtotime(date("Y-m-d", strtotime($blog_date)) . "+1 week");
echo date('Y-m-d', $date2); 
```

**输出**

```
2013-03-27 
```

# google-app-engine - 内部错误应用引擎端点

> ID：15451875
> 
> 赞同：1
> 
> 时间：2013-03-16T16:44:46.597
> 
> 标签：google-app-engine

所以我在 Eclipse 中创建了一个 App Engine Connected Android 应用程序并部署得很好。示例代码也可以正常工作。

但现在我想添加新的端点。我创建它们，添加@Api 标记、方法，并从 Javascript 和 Android 调用它们。

当我调用本地部署的服务器时工作正常，但在调用部署的应用程序引擎时却不行。

基本上我得到的只是“内部错误”，并且应用引擎日志中没有任何内容，除了调用 api 方法的注释。

所以两个问题：

1）为什么它在本地工作而不是在应用程序引擎上工作。该方法所做的只是返回一个硬编码的字符串列表。

2) 更一般地说，如何在获取内部错误时获取更多信息？

似乎很难调试应用程序引擎错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:47:59.157

我在端点上也遇到了奇怪的错误，调试确实非常困难。我认为您必须遵循几条规则，即：

*   您的 api 和方法名称不能使用“_”，所以**@Api(name="my_api")**是错误的，**@Api(name="myApi")**是正确的。
*   您的 api 方法不能返回简单类型，因此返回**String**是错误的，但返回**MyString**是正确的。您的方法也可以返回**void**。

自定义端点的示例应如下所示：

```
import com.google.api.server.spi.config.Api;
import com.google.api.server.spi.config.ApiMethod;

@Api(name="myApi",
     path="my_api")
public class MyEndpoint {

    @ApiMethod (name="myMethod", 
                path="my_method",
                method="httpMethod = HttpMethod.POST")
    public MyCustomObject myMethod () {
        ...
    }
} 
```

请注意，所有注释属性都是可选的。

# iphone - 为什么我的网格不绘制？

> ID：15451877
> 
> 赞同：1
> 
> 时间：2013-03-16T16:45:01.230
> 
> 标签：iphone, objective-c, cocos2d-iphone

我正在尝试在 box2d 环境中设置用于路径查找的网格。是我的绘图方法导致没有绘制它们之间的节点和链接吗？这是我绘制世界的主要课程：

```
@interface HelloWorldLayer()
@end

@implementation HelloWorldLayer

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    HelloWorldLayer *layer = [HelloWorldLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

-(id) init
{
    if( (self=[super init]))
    {
        [self createGrid];
        [self drawGrid];
    }
    return self;
}

-(void) dealloc
{   
    [super dealloc];
}

-(void) createGrid
{    
    //Create 2D array (grid)
    nodeSpace = 50.0f;
    gridSizeX = 500;
    gridSizeY = 500;
    grid = [[NSMutableArray alloc] initWithCapacity:(gridSizeX)];

    for(int x=0; x<gridSizeX; x++){
        [grid addObject:[[NSMutableArray alloc] initWithCapacity:(gridSizeY)]];
    }

    //Create AStar nodes
    for(int x=0; x<gridSizeX; x++){
        for(int y=0; y<gridSizeY; y++){
            //Add a node
            AStarNode *node = [[AStarNode alloc] init];
            node.position = ccp(x*nodeSpace + nodeSpace/2, y*nodeSpace + nodeSpace/2);
            [[grid objectAtIndex:x] addObject:node];
        }
    }

    //Add neighbors
    for(int x=0; x<gridSizeX; x++){
        for(int y=0; y<gridSizeY; y++){
            //Add a node
            AStarNode *node = [[grid objectAtIndex:x] objectAtIndex:y];

            //Add self as neighbor to neighboring nodes
            [self addNeighbor:node toGridNodeX:x-1 Y:y-1]; //Top-Left
            [self addNeighbor:node toGridNodeX:x-1 Y:y]; //Left
            [self addNeighbor:node toGridNodeX:x-1 Y:y+1]; //Bottom-Left
            [self addNeighbor:node toGridNodeX:x Y:y-1]; //Top

            [self addNeighbor:node toGridNodeX:x Y:y+1]; //Bottom
            [self addNeighbor:node toGridNodeX:x+1 Y:y-1]; //Top-Right
            [self addNeighbor:node toGridNodeX:x+1 Y:y]; //Right
            [self addNeighbor:node toGridNodeX:x+1 Y:y+1]; //Bottom-Right
        }
    }
}

/* Add neighbor helper method */
-(void) addNeighbor:(AStarNode*)node toGridNodeX:(int)x Y:(int)y {
    if(x >= 0 && y >= 0 && x < gridSizeX && y < gridSizeY){
        AStarNode *neighbor = [[grid objectAtIndex:x] objectAtIndex:y];
        if(![AStarNode isNode:neighbor inList:node.neighbors]){
            [node.neighbors addObject:neighbor];
        }
    }
}

-(void) drawGrid
{
        for(int x=0; x<gridSizeX; x++){
            for(int y=0; y<gridSizeY; y++){
                //Draw node
                AStarNode *node = [[grid objectAtIndex:x] objectAtIndex:y];
                ccDrawColor4F(16, 16, 16, 8);
                ccDrawPoint(node.position);

                //Draw neighbor lines (there is going to be a lot of them)
                for(int i=0; i<node.neighbors.count; i++){
                    AStarNode *neighbor = [node.neighbors objectAtIndex:i];
                    ccDrawColor4F(16, 16, 16, 8);
                    ccDrawLine(node.position, neighbor.position);
                }
            }
        }
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:21:36.347

您只能在 draw 或 visit 方法中使用 OpenGL 进行绘制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:14:35.400

我不认为绘图会在 init 中起作用。尝试将其放入 onEnter

```
-(void) onEnter {
    // at this point, the node has been added, is running
    // and will be visited as appropriate (i think)
    [super onEnter];   // dont forget to super any 'onMethod' override of cocos2d
    [self drawGrid];
} 
```

# java - SimpleDateFormat 以获得所需的输出

> ID：15451882
> 
> 赞同：-1
> 
> 时间：2013-03-16T16:45:29.743
> 
> 标签：java, simpledateformat

我想要一个像下面这样的输出

```
Nov 4, 2003 8:14 PM 
```

我如何使用 simpleddateformat 实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:49:05.590

这应该可以解决问题：

```
SimpleDateFormat format = new SimpleDateFormat("MMM d, YYYY hh:mm a"); 
```

请阅读[文档](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#month)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:04:33.480

您可以简单地使用：

```
Date date = new Date(); //expected date to display
SimpleDateFormat format = new SimpleDateFormat("MMM d, yyyy hh:mm a");
System.out.print(format.format(date)); 
```

谢谢！

# google-chrome-app - 如何制作一个在启动时全屏运行的 chrome 打包应用程序？

> ID：15451888
> 
> 赞同：10
> 
> 时间：2013-03-16T16:45:55.327
> 
> 标签：google-chrome-app

目前似乎只能通过用户操作（鼠标/键盘事件）激活全屏功能。有没有办法绕过这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-06T18:26:10.350

现在，您可以`state:"fullscreen"`在主 .js 中添加该属性：

```
chrome.app.runtime.onLaunched.addListener(
    function() {
        chrome.app.window.create('index.html',
            {
                state: "fullscreen",
            }
        );
    }
); 
```

确保您不添加`resizable: false`或`bounds`属性，并`"fullscreen"`在`manifest.json`.

```
{
    ...
    "permissions": [
        ...
        "fullscreen"
    ]
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-29T18:48:19.497

您可以使用需要用户操作的 HTML5 Fullscreen API：

```
button.addEventListener('click', function() {
  document.body.webkitRequestFullscreen();
}); 
```

或者使用 AppWindow 对象的更“app-y”方式，不需要用户操作：

```
chrome.app.window.current().fullscreen(); 
```

`"fullscreen"`两者都需要`manifest.json`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T10:04:45.330

我已经使用下面的代码

```
chrome.app.runtime.onLaunched.addListener(function() {
    chrome.app.window.create('index.html', {
    'width': 1024,
    'height': 768
},
function(win) {
    win.maximize();
});
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T03:44:04.700

查看[https://plus.google.com/100132233764003563318/posts/2SuD7MVd8mG](https://plus.google.com/100132233764003563318/posts/2SuD7MVd8mG)参考最近登陆的变更列表[https://chromiumcodereview.appspot.com/12205002](https://chromiumcodereview.appspot.com/12205002)。您可以从以下任一来源提取示例代码：

```
document.body.addEventListener('click', function() {
  document.body.webkitRequestFullscreen();
}); 
```

确保在您的清单中请求“全屏”权限，并且您正在测试足够新的 Chrome 版本（测试版通道现在应该具有此功能，开发人员肯定有）。

您的问题专门针对打包的应用程序，但如果阅读此答案的人错过了这一点，**这仅适用于 Chrome 打包的应用程序**。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-27T18:54:01.583

main.js

```
chrome.app.runtime.onLaunched.addListener(function() {
  chrome.app.window.create('index.html',{},function(window) {
    window.fullscreen();
  });
}); 
```

清单.json

```
{
  ...
  "manifest_version": 2,
  "minimum_chrome_version": "23",
  "app": {
    "background": {
      "scripts": ["main.js"]
    }
  },
  "permissions": ["fullscreen"]
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T19:04:15.120

编辑：根据 BeardFist 的评论，我最初的答案在两个方面都是错误的。您可以在 Chrome 扩展程序（标记为）上执行此操作，但可能无法在打包的应用程序上执行此操作。

对于**扩展**，您可以使用 state:"fullscreen" 选项使其进入全屏状态，该选项可以与`chrome.window.update`. `chrome.windows.create`下面的代码通过with链接了窗口的创建`chrome.window.update`。在我的实验中，您无法直接通过创建窗口来设置全屏状态。

```
chrome.windows.create(
  {url:"PATH/TO/POPUP"}, 
    function(newWindow) {
        chrome.windows.update(newWindow.id, {state:"fullscreen"})
}); 
```

# ember.js - 为什么 Ember.js 身份验证解决方案使用令牌而不是服务器会话？

> ID：15451890
> 
> 赞同：4
> 
> 时间：2013-03-16T16:46:11.973
> 
> 标签：ember.js

我为 Ember 看到的每个身份验证系统都是基于令牌的。是否有充分的理由这样做而不是依赖服务器端会话？考虑到 ajax 只是常规的 HTTP 请求，我看不到服务器端会话维护身份验证状态的缺点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T17:41:03.000

Ember.js 使用 REST 与服务器通信。REST 要求服务器是无状态的。令牌身份验证不需要服务器具有状态，而服务器端会话则需要。

编辑：这是使用 REST 会话的详细回复：[https ://stackoverflow.com/a/6068298/1765925](https://stackoverflow.com/a/6068298/1765925)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:49:32.750

[这](http://say26.com/using-rails-devise-with-ember-js)是进行身份验证的另一种方法的示例。

# php - 高尔夫联赛支付给六个完成位置

> ID：15451891
> 
> 赞同：0
> 
> 时间：2013-03-16T16:46:12.007
> 
> 标签：php

我有一个 40 人的高尔夫联赛。我们都把钱扔进一个底池，然后根据最终得分支付前 6 名。

如果没有平局，支付将很简单，但我们经常有，例如，2 人并列第一，3 人并列第二，1 人单独获得第三，等等。变化似乎无穷无尽。

我一直在尝试使用 PHP 自动计算每个地方的支出，但没有成功。任何建议、帮助或指向正确方向将不胜感激。我注意到其他人试图在这个网站上提出类似的问题，但未能成功地提出问题。我会努力做得更好。

这是我一直在玩的一些数据：

```
$playerNumber=40;
$totalPoints=100; 
```

支出：

```
$pointsFirst=0.6*$totalPoints;
$pointsSecond=0.2*$totalPoints;
$pointsThird=0.15*$totalPoints;
$pointsFourth=0.03*$totalPoints;
$pointsFifth=0.02*$totalPoints;
$pointsSixth=0.01*$totalPoints; 
```

对于上面给出的示例并支付六个位置，我们将按如下方式计算支付：如果两个人并列第一名，我们将第一名和第二名的分数相加并除以 2。如果三个人并列第二名，我们将第三名、第四名和第五名的分数相加并除以三。如果一个人单独排在第三，这个人将获得第六名。

我可以计算在某个位置上或并列的玩家数量。

```
$countFirst=2;
$countSecond=3;
$countThird=1;
$countFourth=2;
$countFifth=1;
$countSixth=2; 
```

在此示例中，玩家得分为 72、72、73、73、73、74、75、75、76、77、77。

起初我以为这是嵌套数组的应用程序。然后我想也许使用数组、数组切片等可能是一种方法。每次我都在树林里结束。我没有看到逻辑。

我使用条件语句来支付三个地方，但用这种方法支付六个地方让我陷入困境。

使用条件语句向三个地方支付的示例：

```
$pointsFirst=0.5*$totalPoints;
$pointsSecond=0.3*$totalPoints;
$pointsThird=0.2*$totalPoints;          

if($countFirst>2) {  

    $ptsA=round($totalPoints/$countFirst,2);
}
elseif($countFirst==2) {

    $ptsA=round(($pointsFirst+$pointsSecond)/2,2);

    if($countSecond>1) { 

        $ptsB=round($pointsThird/$countSecond,2);                   
    }
    elseif($countSecond==1) {

        $ptsB=round($pointsThird,2);                    
    }
}
elseif($countFirst==1) { 

    $ptsA=round($pointsFirst,2);

    if($countSecond>1) {

        $ptsB=round(($pointsSecond+$pointsThird)/2,2);                  
    }
    elseif($countSecond==1) {

        $ptsB=round($pointsSecond,2);                   

        if($countThird>1) {

            $ptsC=round($pointsThird/$countThird,2);                        
        }
        elseif($countThird==1) {

            $ptsC=round($pointsThird,2);                        
        }
    }
} 
```

我希望我的要求已经很清楚了。我很乐意澄清任何事情。如果有人对如何有效地将支付计算自动化到六个地方有任何想法，我将永远感激不尽。谢谢！麦克风

根据请求：

```
$scores=array();
$scores[0]=72;
$scores[1]=72;
$scores[2]=73;
$scores[3]=73;
$scores[4]=73;
$scores[5]=74;
$scores[6]=75;
$scores[7]=75;
$scores[8]=76;
$scores[9]=77;
$scores[10]=77;

$payout=array();
$payout[0]=0.6*$totalPoints;
$payout[1]=0.2*$totalPoints;
$payout[2]=0.15*$totalPoints;
$payout[3]=0.03*$totalPoints;
$payout[4]=0.02*$totalPoints;
$payout[5]=0.01*$totalPoints;

$countScores=array();
$countScores[0]=$countFirst;
$countScores[1]=$countSecond;
$countScores[2]=$countThird;
$countScores[3]=$countFourth;
$countScores[4]=$countFifth;
$countScores[5]=$countSixth; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:06:59.637

**首先**，您的付款有问题。如果你把它们加起来，你就`1.01`不会`1`
`0.6 (1st) + 0.2 (2nd ) + 0.15 (3rd) + 0.03 (4th) + 0.02 (5th) + 0.01 (6th) = 1.01`

**其次**，如果你把你的`Payouts`和`Counts`变成数组会更容易-
改变这些-

```
$pointsFirst=0.6*$totalPoints;
$pointsSecond=0.2*$totalPoints;
$pointsThird=0.15*$totalPoints;
$pointsFourth=0.03*$totalPoints;
$pointsFifth=0.02*$totalPoints;
$pointsSixth=0.01*$totalPoints;

$countFirst=2;
$countSecond=3;
$countThird=1;
$countFourth=2;
$countFifth=1;
$countSixth=2; 
```

对这些

```
$payout=array();
$payout[0]=0.6*$totalPoints;
$payout[1]=0.2*$totalPoints;
$payout[2]=0.15*$totalPoints;
$payout[3]=0.03*$totalPoints;
$payout[4]=0.02*$totalPoints;
$payout[5]=0.01*$totalPoints;

$count=array();
$count[0]=2;
$count[1]=3;
$count[2]=1;
$count[3]=2;
$count[4]=1;
$count[5]=2; 
```

这是一种方法的开始。虽然我最终会将其更改为一个函数，以便我可以通过不同的支出和位置数再次使用它（参见下面的 phpfiddle 示例），但我在 4 个步骤中看到了这一点-

**第1步**

```
// Add together the payments if there are ties - ie. 2 tied for first $payout[0]+$payout[1], etc
$payout_groups = array();  // start a payout array
$payout_groups_key = 0;   // array key count
$payout_groups_count = 0;  // array counter, use to match the $count array values
for($w=0;$w<count($payout);$w++){  // 
    if(array_key_exists($payout_groups_key,$payout_groups)){
        $payout_groups[$payout_groups_key] += $payout[$w];  // if there are ties, add them together
    }
    else{
        $payout_groups[$payout_groups_key] = $payout[$w];  // else set a new payout level
    }
    $payout_groups_count++;  // increase the counter
    if($payout_groups_count == $count[$payout_groups_key]){   // if we merged all the ties, set a new array key and restart the counter
       $payout_groups_key++; 
       $payout_groups_count = 0;
    }

} 
```

**第2步**

```
// basic counter to get how many placers/winners. This makes it possible to have ties for 6th (last) place
$x = 0;
$y = 0;
while($y < count($payout)){ 
   $y += $count[$x];  // the $count array values until we reach the amount of places/payouts
   $x++;
} 
```

**第 3 步**

```
// Create array for winnings per placing
$winnings = array();  // start an array
$placings_count = 0;  // 
$placings_counter = 0;
for($z=0;$z<$y;$z++){
    $winnings[$z] = $payout_groups[$placings_count]/$count[$placings_count];

    $placings_counter++;

    if($placings_counter == $count[$placings_count]){
       $placings_count++;
       $placings_counter = 0;
    }
} 
```

**第4步**

```
// Assign winnings to scorecard
$scoreboard = array();
for($t=0;$t<count($winnings);$t++){
$scoreboard[$t]['score'] = $scores[$t]; 
$scoreboard[$t]['payout'] = $winnings[$t];
} 
```

[您可以在 - http://phpfiddle.org/main/code/a1g-qu0](http://phpfiddle.org/main/code/a1g-qu0)使用您定义的值看到这一点

使用上面相同的代码，我更改了支付金额，并将其增加到第 7 位 - [http://phpfiddle.org/main/code/uxi-qgt](http://phpfiddle.org/main/code/uxi-qgt)

# phpmyadmin - phpMyAdmin 升级后登录失败

> ID：15451895
> 
> 赞同：0
> 
> 时间：2013-03-16T16:46:36.467
> 
> 标签：phpmyadmin

我刚刚升级到 phpMyAdmin 3.5.7，我无法登录。当我尝试时，我没有收到错误，但我返回到登录页面，我的“管理员”用户名乱码（我认为这是字符集问题，但不知道如何解决）；附件是正在发生的事情的屏幕截图：

![PMA 截图](../Images/83eb791833e508e75ffe0d94879b83e7.png)

无论如何，任何建议都会很棒！

PS当我说升级时，我只是指干净安装更高版本（即它是一个全新的配置）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:41:07.723

这个问题与基于文件的会话处理程序以及我在负载均衡器后面有多个服务器的事实有关。我现在更改了我的 NGINX 配置以将 PMA 转发到主服务器，但是当我开始使用它时，我只会将其更改为 MySQL 会话处理程序。

# extjs - ExtJS 网格删除行 - 获取选定的行

> ID：15451898
> 
> 赞同：6
> 
> 时间：2013-03-16T16:46:44.637
> 
> 标签：extjs

尝试获取所选行时出现以下错误：

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'getView' 
```

当我无法获取视图并因此无法获取 SelectionModel 时，如何获取当前选定的行？

我的查看代码：

```
Ext.define('MyLodge.view.content.MemberGrid', {
extend: 'Ext.grid.Panel',
alias: 'widget.membergrid',

initComponent: function(){

    var rowEditing = Ext.create('Ext.grid.plugin.RowEditing');

    var store = Ext.create('MyLodge.store.Members');

    Ext.apply(this, {
        height: this.height,
        plugins: [rowEditing],
        store: store,
        stripeRows: true,
        columnLines: true,
        columns: [{
            id       :'id',
            text: 'ID',
            width: 40,
            sortable: true,
            dataIndex: 'id'
        },{
            text   : 'Name',
            flex: 1,
            sortable : true,
            dataIndex: 'name',
            field: {
                xtype: 'textfield'
            }
        },{
            text   : 'E-Mail',
            width    : 150,
            sortable : true,
            dataIndex: 'email',
            field: {
                xtype: 'textfield'
            }
        },{
            text   : 'Href',
            width    : 200,
            editable: false,
            sortable : true,
            dataIndex: 'href'
        }],
        dockedItems: [{
            xtype: 'toolbar',
            items: [{
                text: 'Add',
                iconCls: 'icon-add',
                handler: function(){
                    // empty record
                    store.insert(0, new MyLodge.model.Member());
                    rowEditing.startEdit(0, 0);
                }
            }, {
                text: 'Delete',
                iconCls: 'icon-delete',
                handler: function(){
                    var selection = grid.getView().getSelectionModel().getSelection()[0];
                    if (selection) {
                        store.remove(selection);
                    }
                }
            },'-',{
                text: 'Save',
                iconCls: 'icon-save',
                handler: function(){
                    store.sync({
                        success: function(response){
                            store.load()
                        }
                    });

                }
            },{
                text: 'Refresh',
                handler: function(){
                    store.load();
                }
            }]
        }]
    });

    this.callParent(arguments);
    }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T21:13:27.857

一种选择是将`scope`作为变量添加到闭包中：

```
initComponent: function () {
    var me = this;
    .
    . 
```

因此，在您的处理程序中，您可以使用`me`来引用网格：

```
{
    text: 'Delete',
    iconCls: 'icon - delete ',
    handler: function () {
        var selection = me.getView().getSelectionModel().getSelection()[0];
        if (selection) {
            store.remove(selection);
        }
    }
} 
```

**工作示例：http:** [//jsfiddle.net/Sn4fC/](http://jsfiddle.net/Sn4fC/)

* * *

第二个选项可以设置 a`click` `listener`而不是 the`handler`并指定`scope`:

```
{
    text: 'Delete',
    iconCls: 'icon - delete ',
    listeners: {
        click: {
            scope: this,
            fn: function () {
                var selection = this.getView().getSelectionModel().getSelection()[0];
                if (selection) {
                    store.remove(selection);
                }
            }
        }
    }
} 
```

**工作示例：http:** [//jsfiddle.net/XyBbF/](http://jsfiddle.net/XyBbF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:03:45.207

问题是“网格”在处理函数范围内不可用，或者它不是您实际期望的那个。

```
handler: function(){
      //.... keep the debug point here in browser developer tool and verify the value of grid in console. It is definitely not an instance of the grid u expected hence it wont have getView() method.
      var selection = grid.getView().getSelectionModel().getSelection()[0];

} 
```

尝试获取网格的引用并在处理程序中使用它，如下所示：

```
Ext.define('MyLodge.view.content.MemberGrid', {
  extend: 'Ext.grid.Panel',
  alias: 'widget.membergrid',
  id: 'membergrid',
  ......

handler: function(){
   var grid = Ext.getCmp('membergrid'); // where 'membergrid' is the id defined in grid config
   var selection = grid.getView()...... 
```

# javascript - 为多个 nodejs 应用程序配置 nginx

> ID：15451899
> 
> 赞同：2
> 
> 时间：2013-03-16T16:46:46.780
> 
> 标签：javascript, node.js, proxy, nginx

你好我必须使用nginx配置多个nodejs应用程序......

这是我的实际配置

```
upstream domain.com.ar {
    server 127.0.0.1:9000;
}
server {
listen   80;
server_name  www.domain.com.ar;
rewrite ^/(.*) http://domain.com.ar/$1 permanent;
}
server {
    listen 80;
    listen [::]:80 ipv6only=on;
    server_name domain.com.ar;
    #access_log /var/log/nginx/domain.com/access.log;
    location / {
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_set_header X-NginX-Proxy true;
      proxy_pass http://domain.com.ar;
      proxy_redirect off;
    }
} 
```

当我使用 ip 190.213.125.17:9000 （它只是我的 ip 的一个例子）时，应用程序工作正常但是当我尝试使用 domain.com.ar nginx 重定向到这个页面

```
http://domain.com.ar/cgi-sys/defaultwebpage.cgi 
```

所以应用程序响应我在 app.js 中配置的 404 错误，就像中间件一样

```
app.use(function(req, res, next){
    res.render('404.jade',
      {
        title: "404 - Page Not Found",
        showFullNav: false,
        status: 404,
        url: req.url
      });
  }); 
```

nginx配置有问题？？？

# django - 在 Jython 上安装 Django

> ID：15451900
> 
> 赞同：2
> 
> 时间：2013-03-16T16:47:01.897
> 
> 标签：django, installation, jython

我正在尝试使用 Jython 安装 Django。

系统 - Windows 7、64 位 Jython - 2.5.4rc1（安装成功） Django - 1.5（尚未安装）

当我在解压后的 Django-1.5 目录并尝试运行命令行指令时

'jython setup.py 安装'

我收到错误消息：

```
Traceback (most recent call last):  
  File "setup.py", line 84, in (module)  
    version = __import__('django').get_version()  
  File "E:\jython2.5.4rc1\bin\Django-1.5\django\__init__.py", line 6, in get_version  
    from django.utils.version import get_version  
  File "E:\jython2.5.4rc1\bin\Django-1.5\django\utils\version.py", line 1  
SyntaxError: future feature unicode_literals is not defined 
```

我可以想象这是一件非常简单的事情，只有绝对新手才会出错。所以我们都知道我是什么:)

非常感谢您在迈出我摇摇晃晃的第一步时提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:48:17.887

Django 1.5 已放弃对 Python 2.5 的支持。因此，如果您想将 Django 1.5 与 Jython 一起使用，则必须使用 Jython 2.7 alpha 版本。如果您想在稳定的 Jython 版本上继续使用 Django，请使用 Django 1.4。

[https://docs.djangoproject.com/en/dev/howto/jython/](https://docs.djangoproject.com/en/dev/howto/jython/)

# html - 为什么长链接的宽度会扩大到 100%？

> ID：15451902
> 
> 赞同：0
> 
> 时间：2013-03-16T16:47:22.113
> 
> 标签：html, html-table

这是我的桌子：

```
<table width="600px">
    <tr>
        <td width="75%">
            <p style="line-height: 140%; font-size: 15px; padding: 0 0 28px 0; margin: 0;">
                <a href="http://#SERVER_NAME#/auth/index.php?confirm_registration=yes&confirm_user_id=#USER_ID#&confirm_code=#CONFIRM_CODE#" style="color: #ca0049 !important;">
                     http://#SERVER_NAME#/auth/index.php?confirm_registration=yes&confirm_user_id=#USER_ID#&confirm_code=#CONFIRM_CODE#
                </a>
            </p>
        </td>
        <td width="25%"></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:22:19.697

链接的“文本”没有允许在所有浏览器中换行的字符，因此浏览器可能会感到被迫将其保持在一行并扩展单元格的宽度。现代浏览器通常将某些特殊字符视为允许在其后换行，但它们以不一致且未记录的方式执行此操作。

最自然的解决方案是使用合理的链接文本，由自然语言单词组成，例如“确认注册”。

如果您确实必须将 URL 作为链接“文本”（出于教学目的？），那么最好将 URL 用引号括起来（或按照[STD 66](http://tools.ietf.org/html/std66)附录 C 中的建议进行分隔）并插入换行机会（零宽度空格或`<wbr>`标签，请参阅[http://www.cs.tut.fi/~jkorpela/html/nobr.html](http://www.cs.tut.fi/~jkorpela/html/nobr.html)）在 STD 66 可接受的位置，例如

```
http://#SERVER_NAME#/<wbr>auth/<wbr>index.php?<wbr>confirm_registration=yes&<wbr>confirm_user_id=#USER_ID#&<wbr>confirm_code=#CONFIRM_CODE# 
```

# wpf - 在主窗口中定位画布

> ID：15451903
> 
> 赞同：1
> 
> 时间：2013-03-16T16:47:27.217
> 
> 标签：wpf, canvas

我有以下代码可以动态创建画布：

```
 public MainWindow()
    {
        InitializeComponent();

        Canvas canvas = new Canvas();
        canvas.Height = 300;
        canvas.Width = 275;
        canvas.Background = Brushes.Blue;

        this.AddChild(canvas);
        ...
    } 
```

除了 Visual Studio 生成的样板 MainWindow 定义之外，相应的 XAML 中没有任何内容（我已删除 VS 默认提供的 Grid 条目）：

```
<Window x:Class="canvas2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Background="Gray">
</Window> 
```

代码将画布居中在应用程序主窗口的中间。如何通过代码自己定位画布？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:15:18.090

您通常会在 Window 中有某种顶级容器，也许是另一个 Canvas：

```
<Window ...>
    <Canvas Name="root"/>
</Window> 
```

现在您将 Canvas 添加到根 Canvas：

```
Canvas canvas = new Canvas();
canvas.Height = 300;
canvas.Width = 275;
canvas.Background = Brushes.Blue;

// set child canvas position
Canvas.SetLeft(canvas, ...);
Canvas.SetTop(canvas, ...);

// add child canvas to root
root.Children.Add(canvas); 
```

* * *

关于Grid、Canvas 等[WPF 面板](http://msdn.microsoft.com/en-us/library/ms754152.aspx)，最重要的一点可能是它们可以嵌套。例如，您可以将 Canvas 放入 Grid 中，然后将其放入另一个 Grid 中，只要您喜欢就可以。

然而，顶级面板，无论是网格还是画布或其他任何东西，都设置为`Content`窗口的属性。在代码中你可以像下面显示的那样做，但几乎没有任何理由这样做。

```
public MainWindow()
{
    InitializeComponent();

    var rootPanel = ...;
    Content = rootPanel;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:15:06.287

首先，您应该指定“位置”的含义。

您可以指定 Canvas 的 Margin 属性，以便将其定位到容器（窗口）。但是，还要考虑与 Margin 一起使用的 Horizo​​ntalAlignment 和 VerticalAlignment 属性。

相反，也许您的意思是“绝对”定位。例如，将画布放置在某个点/大小，独立于容器大小。在这种情况下，最简单的方法是将一个 Canvas 放置在另一个 Canvas 中，然后通过设置 Canvas.Left 和 Canvas.Top 属性来定位内部的一个。当然你也应该指定宽度和高度。

干杯

# java - 以编程方式刷新挂起的 AWT 事件

> ID：15451907
> 
> 赞同：1
> 
> 时间：2013-03-16T16:47:40.740
> 
> 标签：java, swing

交叉发布：[https ://forums.oracle.com/forums/thread.jspa?threadID=2512538&tstart=0](https://forums.oracle.com/forums/thread.jspa?threadID=2512538&tstart=0)

大家好。

有没有办法以编程方式刷新挂起的 AWT 事件？我希望能够在这样的代码中使用它：

```
if (comp.requestFocusInWindow())
{
    // flush pending AWT events...
    KeyboardFocusManager focusManager = KeyboardFocusManager.getCurrentKeyboardFocusManager();
    if (focusManager.getPermanentFocusOwner() == comp)
    {
        // do something...
    }
} 
```

谢谢你。

马科斯

PS：我知道我可以在 comp 中使用 FocusListener，但在我的情况下它不是一个选项。

**更新：**

我的问题的本质是：在开始编辑的键被分派给它**之前集中 JTable 的实际编辑器组件。**所以我想出了这个解决方案：

```
private class TextFieldColumnEditor extends MyCustomTextField
{
    // TODO
    private static final long serialVersionUID = 1L;

    private FocusListener _keyDispatcher;

    @Override
    protected boolean processKeyBinding(final KeyStroke ks, final KeyEvent e, int condition, boolean pressed)
    {
        InputMap bindings = getInputMap(condition);
        ActionMap actions = getActionMap();
        if (bindings != null && actions != null && isEnabled())
        {
            Object binding = bindings.get(ks);
            final Action action = binding == null ? null : actions.get(binding);
            if (action != null)
            {
                if (!isFocusOwner() && requestFocusInWindow())
                {
                    // In case something went wrong last time and the
                    // listener wasn't unregistered.
                    removeFocusListener(_keyDispatcher);

                    _keyDispatcher =
                         new FocusListener()
                         {
                             @Override
                             public void focusGained(FocusEvent evt)
                             {
                                 removeFocusListener(this);
                                 SwingUtilities.invokeLater(
                                     new Runnable()
                                     {
                                         @Override
                                         public void run()
                                         {
                                             SwingUtilities.notifyAction(action, ks, e, CampoTextoDadosEditorColuna.this, e.getModifiers());
                                         }
                                     }
                                 );
                             }

                             @Override
                             public void focusLost(FocusEvent e)
                             {
                             }
                         };

                    addFocusListener(_keyDispatcher);

                    return true;
                }
                else
                {
                    return SwingUtilities.notifyAction(action, ks, e, this, e.getModifiers());
                }
            }
        }
    return false;
} 
```

TextFieldColumnEditor 类是我在自定义单元格编辑器中使用的组件。如您所见，由于很多原因，该解决方案并不完美：

*   我不得不从 JComponent 复制 processKeyBinding 代码并进行更改。
*   我不知道 SwingUtilities.notifyAction 是否成功，因为它是在另一个代码块中执行的，我无法从 processKeyBinding 方法返回它。我想它有。这就是为什么我需要某种同步焦点处理。

我暂时坚持使用这个解决方案。您的意见和建议将不胜感激。

马科斯

**更新 2**

在@VGR 建议后的最终（简化）版本：

```
private class CellEditorTextField extends JTextField
{
    @Override
    protected boolean processKeyBinding(final KeyStroke ks, final KeyEvent e, int condition, boolean pressed)
    {
        InputMap bindings = getInputMap(condition);
        ActionMap actions = getActionMap();
        if (bindings != null && actions != null && isEnabled())
        {
            Object binding = bindings.get(ks);
            final Action action = binding == null ? null : actions.get(binding);
            if (action != null)
            {
                if (e.getSource() == YourJTable.this && action.isEnabled() && requestFocusInWindow())
                {
                    SwingUtilities.invokeLater(
                        new Runnable()
                        {
                            @Override
                            public void run()
                            {
                                SwingUtilities.notifyAction(action, ks, e, CellEditorTextField.this, e.getModifiers());
                            }
                        }
                    );
                    return true;
                }
                else
                {
                    return SwingUtilities.notifyAction(action, ks, e, this, e.getModifiers());
                }
            }
        }
        return false;
    }
} 
```

评论和改进表示赞赏。

# c++ - QNetworkAccessManages::get() 性能不佳

> ID：15451910
> 
> 赞同：0
> 
> 时间：2013-03-16T16:47:48.330
> 
> 标签：c++, performance, qt, networking

QNetwotkAccessManages::get() 函数会持续一段时间（大约 7-10 秒），获取在任何浏览器中都可以立即打开的页面。

实际上，我尝试获取[http://suggestqueries.google.com/complete/search?client=chrome&q=myrequest](http://suggestqueries.google.com/complete/search?client=chrome&q=myrequest)。

这是简化的代码：

```
void ApiGoogleSearch::getSuggestions()
{
    QNetworkAccessManager *manager = new QNetworkAccessManager(this);
    connect(manager, SIGNAL(finished(QNetworkReply*)),
            SLOT(getSuggestionsFinished(QNetworkReply*)));

    QUrl url("http://suggestqueries.google.com/complete/search"
             "?client=chrome&q=myrequest");
    manager->get(QNetworkRequest(url));
    qDebug() << "get() started";
}

void ApiGoogleSearch::getSuggestionsFinished(QNetworkReply *reply)
{
    qDebug() << "ApiGoogleSearch::getSuggestionsFinished() started";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:08:33.423

好吧，Google 不知何故会在很长一段时间内为我的应用返回该页面。任何其他网页加载都非常快。

# php - 在 Powerpoint 中插入来自 MySQL 或 PHP 的数据

> ID：15451916
> 
> 赞同：0
> 
> 时间：2013-03-16T16:48:35.843
> 
> 标签：php, mysql, powerpoint

在一个活动中，我有一个持续运行的 powerpoint 演示文稿。

有没有办法使用 MySQL 数据库或网站中的数据自动更新此演示文稿的幻灯片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:50:38.647

是的。您可以通过 ODBC 和一个简短的 VBA 脚本连接到 MySQL 数据库。

请参阅[此示例](http://forums.codeguru.com/showthread.php?331453-Using-ODBC-in-VBA-%28Excel%29)。

您可以使用`Connection String`，这样参数（如服务器的名称用户名密码）可以驻留在您的文件中，并且不会有外部依赖项。（您不需要创建*数据源*）。

**安全注意事项**

我建议为此目的创建一个不同的用户和一个对该用户可见的[视图。](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)- 这样，如果有人从文件中获取凭据，就不会做恶意的事情。

另一方面：仅与 LAN 或 VPN 上的友好用户（如同一公司的员工）共享此内容。MySQL 服务器通常不向广阔的世界开放，尤其是没有公共用户/通行证。

# asp.net-mvc-4 - 在 web asp.net mvc 4 / JavaScript 中使用带有 Google API 的服务帐户，例如 youtube、picasa

> ID：15451918
> 
> 赞同：1
> 
> 时间：2013-03-16T16:48:44.937
> 
> 标签：asp.net-mvc-4, oauth-2.0, youtube-javascript-api, google-api-dotnet-client, service-accounts

我来是为了了解有关 Google API 的一些信息，尤其是身份验证“服务帐户”

我和[这个人](https://groups.google.com/forum/#!msg/google-calendar-api/W3I8E49wuCU/zpSLIjz289EJ)有同样的问题，虽然这涉及另一个 API，但他很好地解释了这个问题。

几天来，我已经阅读了一些文章：

*   [谷歌开发者](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Installed_Applications_Flow)

*   [.Net 的 DrEdit](https://developers.google.com/drive/examples/dotnet)

*   [C# 示例](https://groups.google.com/forum/#!topic/google-search-api-for-shopping/4uUGirzH4Rw)

我已经注册了一个 Google API 帐户，并且正在使用提供给我的客户端密钥和秘密。然后我下载了以下库：

*   google-api-dotnet-client-1.2.4737-beta.source.zip
*   youtube-api-samples
*   google-youtube-v3-rev35-csharp-1.2.0-beta

到目前为止，没有什么对我有帮助...

我想知道是否可以使用`Picasa web`，因为我找不到任何相关信息。我目前正在使用，我发现它真的很容易使用，但我想迁移到.`Youtube API v2 or v3``oAuth2.0 Service account``Picasa Web oAuthv1.0``Google Youtube API v3/Picasa web API`

基本工作流程思想：

*   私人图片和视频是专门为网站创建的。
*   用户将登录该站点（不是 Google 用户）并查看图片和视频 -> 所有成功登录该站点的用户都可以访问所有 youtube 视频和 picasa 图片，并且此媒体在 Google 中是私有的

我在任何地方发现的唯一一个显示如何使用身份验证的示例是在一个 ASP.NET MVC 项目中，不幸的是它需要用户交互，我不希望那样做。

有人可以取悦我吗？是否有人编写了一段代码`Javascript`或`C#`用于使用服务帐户连接到 API，或者现在使用 oAuthv1.0 进行身份验证是否更好？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:12:44.203

看看[哪些 Google API 可以通过服务帐户授权访问？](https://stackoverflow.com/questions/13736394/which-google-apis-can-be-accessed-with-service-account-authorization)它包含支持服务帐户的所有 API 的列表。

据我所知，Picasa 和 Youtube 不支持服务帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:56:55.393

根据 peleyal 发布的文章，我认为 YouTube 应该支持服务帐户。在相关文章的答案中，它指出“所有支持 OAuth 2.0 的 Google API 都应与服务帐户一起使用”。

假设 YouTube 是一个 Google API，它也应该可以工作。

不幸的是，我对这个答案不是 100% 有信心，因为我在其他地方看到过服务帐户的文档：“几个 Google API 代表应用程序行事，不访问用户信息。” [https://developers.google.com/accounts/docs/OAuth2#serviceaccount](https://developers.google.com/accounts/docs/OAuth2#serviceaccount)

访问 YouTube API 是否构成“用户信息”？这个问题的答案是我不尝试就不能 100% 自信的原因。一个昂贵的时间提议。

# coldfusion - 使用应用程序范围的 UDF 扩展 ColdFusion

> ID：15451925
> 
> 赞同：11
> 
> 时间：2013-03-16T16:49:28.587
> 
> 标签：coldfusion, cfc, railo, cfml

我一直在探索构建我的 ColdFusion 应用程序的不同方法，并且我正在寻找一些关于提供应用程序范围的 UDF 的最佳方式的意见。

对于我的每个应用程序，我通常会使用一些不属于任何特定对象的额外功能。主要是数据操作的东西。我希望这些函数在我的整个应用程序中都可用，既可用于 CFM 模板，也可用于应用程序实例化的 CFC。

在我看来，有多种方法可以实现这一点，但它们都有自己的局限性：

1.  在 Application 范围内实例化一个基本的 Utils CFC。这是我最常用的方法。所有功能都可以在应用程序范围内使用，但是如果我从多个应用程序实例化相同的 CFC，那么它们每个都有自己的应用程序范围 - 这意味着每个函数都必须实例化自己的基本 Utils CFC。这没有什么问题，但感觉就像我对 CFC 的封装不够好。我不热衷于从 CFC 中引用应用程序范围。

2.  创建一个基本的 Utils CFC 并使所有其他 CFC 扩展它。这工作正常，这意味着 CFC 可以直接从 CFC 的 THIS 范围引用 Utils 函数 - 但是这意味着 Utils 函数保存在每个 CFC 的内存中。它在概念上也不正确，因为我的其他 CFC 与 Utils CFC 没有关系。

3.  将我的基本 Utils CFC 注入我的其他 CFC。我一直在使用的另一种方法是在应用程序范围内实例化我的基本 Utils CFC，然后将其作为对象传递给我的其他 CFC 中的参数。这在概念上和封装上对我有用。就像我将在我的 init 方法中设置我的数据源一样，我可以对我的 UDF 做同样的事情。这与 UDF 包含在每个 CFC 中的问题相同。当我转储所有 CFC 时，我多次获得每个 UDF - 但是当我传递一个实例化对象时，我假设它不会占用任何额外的内存空间。如果有人能证实这一点，那会很有帮助——我只是假设！我对这种方法唯一真正的问题是它看起来有点复杂。

4.  让我的应用程序 CFC 扩展我的 Utils CFC。这似乎是很多框架所做的。我没有使用过这种方法，但我确信有利有弊。

5.  CF 直接在 Application.cfc 中包含来自单独模板的我的 UDF 这在功能上类似于在 Application 范围内实例化。

6.  将我的 UDF 添加到服务器的`Components.cfc` 理论上这是一个好主意 - 我可以维护基本 Utils 的一个副本并确保服务器上的所有内容都可以访问它们 - 但是，如果我想跨多个服务器运行应用程序，那么它们将全部需要这些功能。此外，对服务器的任何更新都可能覆盖组件。感觉就像破解核心一样——我相信我们都可以从痛苦的经历中证明这一点，是不好的。

所以 - 我的问题是：以优雅和可重用的方式使用 UDF 扩展 CF 的最佳实践是什么？上述任何选项还是我没有想到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:38:15.047

如果你真的关心结构和保持独立，甚至不要从扩展功能的单例或继承开始。而是通过在运行时/请求上附加非组件库来扩展 ColdFusion 中的基本功能，[请参阅 ColdFusion 开发人员指南](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=UDFs_16.html)。这并不能神奇地解决所有问题，但至少这是实现通用功能的正确方法。

# ios - iOS：registerDefaults 导致崩溃

> ID：15451927
> 
> 赞同：1
> 
> 时间：2013-03-16T16:49:42.940
> 
> 标签：ios

我的应用程序在启动时崩溃。请给我指路。非常感激。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
NSDictionary *temp = @{@(0): NSStringFromCGPoint(CGPointZero),
                       @(1): NSStringFromCGPoint(CGPointZero),
                       @(2): NSStringFromCGPoint(CGPointZero),
                       @(3): NSStringFromCGPoint(CGPointZero),
                       };

// Pro
NSDictionary *defaults = @{ // ... other PrefKeys 

                           // No crash if I comment out this line
                           GMListVCOffsetsPrefKey:temp,
                           };

[[NSUserDefaults standardUserDefaults] registerDefaults: defaults];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T16:57:03.480

plist 中的键必须是字符串。这里有数字。

请参阅[属性列表文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/AboutPropertyLists/AboutPropertyLists.html#//apple_ref/doc/uid/10000048i-CH3-SW2)：“虽然 NSDictionary 和 CFDictionary 对象允许它们的键是任何类型的对象，但如果键不是字符串对象，则集合不是属性列表对象”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T16:57:17.303

您正在为导致崩溃的临时数组使用非 NSString 键。下面的代码不会崩溃。

```
NSDictionary *temp = @{@"0": NSStringFromCGPoint(CGPointZero),
                       @"1": NSStringFromCGPoint(CGPointZero),
                       @"2": NSStringFromCGPoint(CGPointZero),
                       @"3": NSStringFromCGPoint(CGPointZero),
                       };

// Pro
NSDictionary *defaults = @{ // ... other PrefKeys

                           // No crash if I comment out this line
                           GMListVCOffsetsPrefKey:temp,
                           };

[[NSUserDefaults standardUserDefaults] registerDefaults: defaults]; 
```

# php - PHP - 如果我知道 session_id，如何获取会话变量

> ID：15451954
> 
> 赞同：0
> 
> 时间：2013-03-16T16:52:08.397
> 
> 标签：php, cakephp-1.3

我有一个 PHP 站点，但其中一部分使用 Flash 上传 swf 将文件和一些参数发布到 PHP 脚本。

当该 swf 发布参数时，我的 PHP 脚本不知道任何会话变量。Flash 和它发送的 cookie 一定很时髦。

无论如何，我可以尝试在 flash 中修复它，但我认为更简单的方法是简单地传递`session_id`post 参数。但是，一旦我`session_id`在我的 PHP 脚本中收到这个，我不知道如何使用它来查找我真正想要的会话变​​量（例如`$_SESSION['username']`）。我不想`$_SESSION['username']`作为 POST 参数传递，因为我认为这会带来太大的安全风险。长随机`session_id`似乎要好得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:02:01.250

您可以使用[session_id()](http://php.net/session_id)：

> `string session_id ([ string $id ] )`
> session_id() 用于获取 **或设置**当前会话的会话 ID。

普通 PHP 中的代码大致如下所示：

```
<?php

if( isset($_POST['session_id']) ){
    session_id($_POST['session_id']);
    session_start();
} 
```

不确定与 CakePHP 集成是否容易。

# python - 创建随机数矩阵的简单方法

> ID：15451958
> 
> 赞同：117
> 
> 时间：2013-03-16T16:52:38.893
> 
> 标签：python, random, coding-style

我正在尝试创建一个随机数矩阵，但我的解决方案太长而且看起来很难看

```
random_matrix = [[random.random() for e in range(2)] for e in range(3)] 
```

这看起来不错，但在我的实现中是

```
weights_h = [[random.random() for e in range(len(inputs[0]))] for e in range(hiden_neurons)] 
```

这是非常不可读的，不适合一行。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-03-16T16:57:09.183

您可以删除`range(len())`：

```
weights_h = [[random.random() for e in inputs[0]] for e in range(hiden_neurons)] 
```

但实际上，您可能应该使用 numpy。

```
In [9]: numpy.random.random((3, 3))
Out[9]:
array([[ 0.37052381,  0.03463207,  0.10669077],
       [ 0.05862909,  0.8515325 ,  0.79809676],
       [ 0.43203632,  0.54633635,  0.09076408]]) 
```

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2013-03-16T16:57:07.897

看看[numpy.random.rand](https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.random.rand.html)：

> 文档字符串：rand(d0, d1, ..., dn)
> 
> 给定形状的随机值。
> 
> 创建一个给定形状的数组，并使用来自均匀分布的随机样本传播它`[0, 1)`。

* * *

```
>>> import numpy as np
>>> np.random.rand(2,3)
array([[ 0.22568268,  0.0053246 ,  0.41282024],
       [ 0.68824936,  0.68086462,  0.6854153 ]]) 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2018-02-03T10:30:36.733

不推荐使用`np.random.randint()`as`np.random.random_integers()`

```
random_matrix = np.random.randint(min_val,max_val,(<num_rows>,<num_cols>)) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-17T20:10:50.860

看起来您正在执行 Coursera 机器学习神经网络练习的 Python 实现。这是我为 randInitializeWeights(L_in, L_out) 所做的

```
#get a random array of floats between 0 and 1 as Pavel mentioned 
W = numpy.random.random((L_out, L_in +1))

#normalize so that it spans a range of twice epsilon
W = W * 2 * epsilon

#shift so that mean is at zero
W = W - epsilon 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-22T17:12:21.113

首先，创建`numpy`数组，然后将其转换为`matrix`. 请看下面的代码：

```
import numpy

B = numpy.random.random((3, 4)) #its ndArray
C = numpy.matrix(B)# it is matrix
print(type(B))
print(type(C)) 
print(C) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-04-16T06:54:19.130

为了创建一个随机数数组，NumPy 使用以下方法创建数组：

1.  **实数**

2.  **整数**

使用随机**实数创建数组：** 有 2 个选项

1.  random.rand（用于生成的随机数的均匀分布）
2.  random.randn（用于生成的随机数的正态分布）

随机数

```
import numpy as np 
arr = np.random.rand(row_size, column_size) 
```

随机.randn

```
import numpy as np 
arr = np.random.randn(row_size, column_size) 
```

使用随机**整数创建数组：**

```
import numpy as np
numpy.random.randint(low, high=None, size=None, dtype='l') 
```

在哪里

*   low = 要从分布中提取的最低（有符号）整数
*   high(optional)= 如果提供，则高于要从分布中提取的最大（有符号）整数
*   size(optional) = 输出形状，即如果给定的形状是，例如，(m, n, k)，则绘制 m * n * k 个样本
*   dtype(optional) = 结果的所需 dtype。

例如：

给定的示例将生成一个介于 0 和 4 之间的随机整数数组，其大小为 5*5，有 25 个整数

```
arr2 = np.random.randint(0,5,size = (5,5)) 
```

# 为了创建 5 x 5 矩阵，应将其修改为

arr2 = np.random.randint(0,5,size = (5,5))，将乘法符号*改为逗号，#

> [[2 1 1 0 1][3 2 1 4 3][2 3 0 3 3][1 3 1 0 0][4 1 2 0 1]]

例2：

给定的示例将生成一个介于 0 和 1 之间的随机整数数组，其大小将为 1*10，并且将包含 10 个整数

```
arr3= np.random.randint(2, size = 10) 
```

> [0 0 0 0 1 1 0 0 1 1]

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-07T11:11:42.203

```
x = np.int_(np.random.rand(10) * 10) 
```

对于 10 中的随机数。对于 20 中的随机数，我们必须乘以 20。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-03-13T15:55:34.473

当您说“随机数矩阵”时，您可以将 numpy 用作上面提到的 Pavel [https://stackoverflow.com/a/15451997/6169225](https://stackoverflow.com/a/15451997/6169225)，在这种情况下，我假设您与这些分布无关（伪) 随机数坚持。

但是，如果您需要特定的分布（我想您对均匀分布感兴趣），`numpy.random`有非常有用的方法对您来说。例如，假设您想要一个 3x2 矩阵，其具有以 [low,high] 为界的伪随机均匀分布。你可以这样做：

```
numpy.random.uniform(low,high,(3,2)) 
```

请注意，您可以替换`uniform`为此库支持的任意数量的发行版。

进一步阅读：[https ://docs.scipy.org/doc/numpy/reference/routines.random.html](https://docs.scipy.org/doc/numpy/reference/routines.random.html)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-04-05T18:58:49.200

创建随机整数数组的一种简单方法是：

```
matrix = np.random.randint(maxVal, size=(rows, columns)) 
```

以下输出 0 到 10 的随机整数的 2 x 3 矩阵：

```
a = np.random.randint(10, size=(2,3)) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-16T17:00:21.403

使用 map-reduce 的答案：-

```
map(lambda x: map(lambda y: ran(),range(len(inputs[0]))),range(hiden_neurons)) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-12-22T08:15:05.967

```
random_matrix = [[random.random for j in range(collumns)] for i in range(rows)
for i in range(rows):
    print random_matrix[i] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-12T19:13:53.333

```
#this is a function for a square matrix so on the while loop rows does not have to be less than cols.
#you can make your own condition. But if you want your a square matrix, use this code.

import random

import numpy as np

def random_matrix(R, cols):

        matrix = []

        rows =  0

        while  rows < cols:

            N = random.sample(R, cols)

            matrix.append(N)

            rows = rows + 1

    return np.array(matrix)

print(random_matrix(range(10), 5))
#make sure you understand the function random.sample 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-01T14:57:41.367

numpy.random.rand(row, column) 根据给定的指定 (m,n) 参数生成 0 到 1 之间的随机数。所以用它来创建一个 (m,n) 矩阵并将矩阵乘以范围限制并将其与上限相加。

分析：如果生成零，则保持下限，但如果生成一，则保持上限。换句话说，使用 rand numpy 生成限制，您可以生成所需的极端数字。

```
import numpy as np

high = 10
low = 5
m,n = 2,2

a = (high - low)*np.random.rand(m,n) + low 
```

输出：

```
a = array([[5.91580065, 8.1117106 ],
          [6.30986984, 5.720437  ]]) 
```

# javascript - 识别函数javascript的元素

> ID：15451959
> 
> 赞同：0
> 
> 时间：2013-03-16T16:52:40.297
> 
> 标签：javascript, facebook, html, facebook-like

我得到了 facebook 为类似按钮插件代码自动生成的功能。但是，我不太确定函数中的变量，如果有人帮助我找出每个变量的含义，我将不胜感激。

该`html`函数从以下位置收集数据：

```
 <div class="fb-like" data-href="https://www.facebook.com/yanntiersen.official"   
data-send="true" data-width="450" data-show-faces="true" data-font="arial"></div> 
```

实际的javascript函数：

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=123456789";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

我看到这个函数被调用了`(document, 'script', 'facebook-jssdk')`，但我真的不明白事情是如何工作的。谁能给我解释一下，好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:00:56.183

```
(function ( d , s , id) {

}(document, 'script', 'facebook-jssdk)); 
```

将意味着以下情况为真

```
d = document;
s = 'script';
id = 'facebook-jssdk'; 
```

有了这些知识

```
// Get the first <script> tag in the document
var fjs = document.getElementsByTagName(s)[0]

// Return void from this function if '#facebook-jssdk' exists
if ( document.getElementById('facebook-jssdk') ) return ;

// Create a new script tag
var js = d.createElement(s)

// Assign the id to the script tag
js.id = id;

// Assign a source to load asyncrounously into this tag
js.src = '//connect...';

// Insert the script element into the DOM BEFORE the first script tag
fjs.parentNode.insertBefore( js , fjs ) 
```

希望有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T17:00:28.613

```
//Create a function taking arguments `d`, `s` and `id`
(function(d, s, id) {

    //Initialise variable js, initialise variable fjs to the first element with the tag 
    //name s
    var js, fjs = d.getElementsByTagName(s)[0];

    //If the element with id = id exists already, escape from the function.
    if (d.getElementById(id)) return;

    //Create a new element of type s ('script') and set it's id to id ('facebookjssdk')
    js = d.createElement(s); js.id = id;

    //Set the script's src attribute to the path specified.
    js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=123456789";

    //Insert the new element immediately before the first <script> on the page.
    fjs.parentNode.insertBefore(js, fjs);

//Call the function immediately with document for d, 'script' for s and 'facebook-jssdk' 
//for id.
}(document, 'script', 'facebook-jssdk')); 
```

如果您不熟悉该模式`(function () {})();`，它只是一个封装其代码并按照定义调用自身的函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T17:03:46.003

基本上它是这样做的：

```
Gets the first "<script>" element in the document
If an object exists with the id of "facebook-jssdk" than
    return (dont process the rest of the code)
EndIf
Create a "<script>" element
Set the new "<script>" element's id to 'facebook-jssdk'
Set the new "<script>" element's src location to "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=123456789"
(this loads a javascript file from facebook's server onto the client)
Insert the new "<script>" tag before the first "<script>" tag in the page 
```

希望有帮助:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T16:58:01.487

该脚本正在查找标记名为“script”的元素，然后获取对第一个脚本对象的引用。

然后它会查找 id 为“facebook-jssdk”的元素。如果它找到这个 id，它就会停止处理。

然后它创建一个新的脚本标签，将 id 设置为“facebook-jssdk”，将源设置为“//connect.facebook.net/en_GB/all.js#xfbml=1&appId=123456789”，并在第一个之前插入脚本页面上的脚本。

# maven-3 - 无法使用 Jboss 7.0.2 部署战争专家项目

> ID：15451960
> 
> 赞同：0
> 
> 时间：2013-03-16T16:52:40.623
> 
> 标签：maven-3, jboss7.x

我正在尝试部署一个 WAR maven 项目，其中包含一个简单的托管 Bean 和一个 xhtml 页面。早些时候，我创建了一个包含实体和会话 Bean 的 EJB maven 项目。在部署 rjb 项目后，我得到了一个 JAR 可执行文件，我将其添加为 WEB 项目的依赖项。但是在部署我的 WAR 时出现问题我整天都在搜索解决方案的网络项目..头疼得厉害，我很快就要放弃了..这是错误：

```
17:48:07,781 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC00001: Failed to start service jboss.deployment.unit."GestionReclamationWEB-1.0-SNAPSHOT.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."GestionReclamationWEB-1.0-SNAPSHOT.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "GestionReclamationWEB-1.0-SNAPSHOT.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:121) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [:1.6.0_38]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [:1.6.0_38]
    at java.lang.Thread.run(Unknown Source) [:1.6.0_38]
Caused by: java.lang.UnsupportedClassVersionError: com/GestionReclamation/services/EmployeBean : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method) [:1.6.0_38]
    at java.lang.ClassLoader.defineClassCond(Unknown Source) [:1.6.0_38]
    at java.lang.ClassLoader.defineClass(Unknown Source) [:1.6.0_38]
    at java.security.SecureClassLoader.defineClass(Unknown Source) [:1.6.0_38]
    at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:397) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:261) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:76) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.Module.loadModuleClass(Module.java:590) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:183) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:361) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:310) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.as.ejb3.deployment.processors.BusinessViewAnnotationProcessor.getEjbClass(BusinessViewAnnotationProcessor.java:201)
    at org.jboss.as.ejb3.deployment.processors.BusinessViewAnnotationProcessor.deploy(BusinessViewAnnotationProcessor.java:83)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:115) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    ... 5 more

17:48:07,783 INFO  [org.jboss.as.server.controller] (DeploymentScanner-threads - 1) Deployment of "GestionReclamationWEB-1.0-SNAPSHOT.war" was rolled back with failure message {"Failed services" => {"jboss.deployment.unit.\"GestionReclamationWEB-1.0-SNAPSHOT.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"GestionReclamationWEB-1.0-SNAPSHOT.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"GestionReclamationWEB-1.0-SNAPSHOT.war\""}}
17:48:07,824 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) Stopped deployment GestionReclamationWEB-1.0-SNAPSHOT.war in 41ms
17:48:07,825 ERROR [org.jboss.as.deployment] (DeploymentScanner-threads - 2) {"Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"Failed services" => {"jboss.deployment.unit.\"GestionReclamationWEB-1.0-SNAPSHOT.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"GestionReclamationWEB-1.0-SNAPSHOT.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"GestionReclamationWEB-1.0-SNAPSHOT.war\""}}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:50:28.793

看起来您的代码是使用 JDK7 编译的，而 JBoss 使用 JDK6 运行。这是行不通的，因为 JDK6 不能执行用 JDK7 编译的类文件。

[这](https://stackoverflow.com/questions/10382929/unsupported-major-minor-version-51-0)可能有助于理解问题。

# mysql - Mysql 中的事务和自动提交

> ID：15451964
> 
> 赞同：0
> 
> 时间：2013-03-16T16:53:01.390
> 
> 标签：mysql, transactions, innodb

据我所知 MySQL 中的 InnoDB 表，所有事务都用 START TRANSACTION 包装；并以 COMMIT 结束；除非明确声明不这样做。

如果我要明确定义事务块，这样做是否正确：

```
SET AUTOCOMMIT = 0;
START TRANSACTION;
[SQL STATEMENTS]
COMMIT;
SET AUTOCOMMIT = 1; 
```

之后的下一个事务会回到 InnoDb 默认处理事务的方式吗？我的意图是有时在我的应用程序中明确定义事务，但所有其他事务将由引擎处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T15:16:29.947

在您的情况下，您不需要将 autocommit 设置为 0。隐含地定义一个事务会为您做到这一点。来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/commit.html)：“要为单个语句系列隐式禁用自动提交模式，请使用 START TRANSACTION 语句：”

# c++ - 支持硬件覆盖？

> ID：15451970
> 
> 赞同：-2
> 
> 时间：2013-03-16T16:53:41.330
> 
> 标签：c++, overlay, direct3d9

我在 Windows 8 上运行，我的 VGA 是 Geforce 8200m G。我正在编写 C++ 程序并使用 d3d9 创建硬件覆盖。我想问的问题是 - Windows 8 是否仍然支持硬件覆盖以及如何确定我的 VGA 是否支持它们。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:24:43.730

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd797814%28v=vs.85%29.aspx)：

> 创建硬件覆盖表面
> 
> 要查询覆盖支持，请致电 [`IDirect3D9::GetDeviceCaps`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174320%28v=vs.85%29.aspx)。如果驱动程序支持硬件覆盖，`D3DCAPS_OVERLAY`则在 D3DCAPS9.Caps 成员中设置标志。

# html - 有未读邮件时如何让屏幕闪烁

> ID：15451979
> 
> 赞同：5
> 
> 时间：2013-03-16T16:55:12.057
> 
> 标签：html, css, windows, google-chrome, firefox

当有未读电子邮件时，我正在寻找使**整个屏幕闪烁红色或任何颜色的任何方法。**它可能适用于任何电子邮件客户端。我做了很多谷歌搜索，找不到任何东西。雷鸟有一个插件可以创建一个小闪烁通知，但它只在屏幕的右下角显得非常小。

我在考虑可能会在 Firefox 或 Chrome 上添加一些插件，这样我就可以编写自定义 css 和 javascript 来在 Gmail 上运行并实现闪烁。任何想法都非常感谢。

我知道这不是你经常问的问题，但你们都很棒，我不知道还能去哪里。如果有更好的论坛来解决这类问题，你也可以告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:51:18.503

我在搜索时发现了这个程序，还没有尝试过。但它说它可以在电子邮件到达时执行外部程序。因此，您似乎可以编写一个小的 C# 应用程序，该应用程序可以执行您想要的任务并在新电子邮件到达时执行。

[http://www.jsonline.nl/Content/Poppy/Poppy.htm](http://www.jsonline.nl/Content/Poppy/Poppy.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:03:36.430

获取当前的 google 邮件检查器扩展示例 ( [https://developer.chrome.com/extensions/samples.html](https://developer.chrome.com/extensions/samples.html) )。将其转换为打包的应用程序（获取您想要的部分），打开一个非常大的窗口并快速关闭它。这应该够了吧。可悲的是全屏似乎是不可能的。但我不知道这是否有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T17:28:54.400

我不会制作 Chrome 插件，而是让窗口标题闪烁或使用 HTML5 通知。创建一个简单的页面来轮询您的 IMAP Gmail 以获取新邮件，并将 gmail 包含在一个大 iFrame 中。如果发现新消息，您的外部窗口可以发出通知。

**HTML5 通知**：[http ://www.html5rocks.com/en/tutorials/notifications/quick/](http://www.html5rocks.com/en/tutorials/notifications/quick/)

**闪烁的标题**（采用[自此](https://stackoverflow.com/a/156274/353802)）：

```
var newMailBlinker = (function () {
    var oldTitle = document.title,
        msg = 'New Mail!',
        timeoutId,
        blink = function() { 
            document.title = document.title == msg ? ' ' : msg; 
        },
        clear = function() {
            clearInterval(timeoutId);
            document.title = oldTitle;
            window.onmousemove = null;
            timeoutId = null;
        };

    return function () {
        if (!timeoutId) {
            timeoutId = setInterval(blink, 1000);
            window.onmousemove = clear;
        }
    };
}()); 
```

**PHP Poll Gmail IMAP**（从[this](https://stackoverflow.com/a/5015051/353802)采用）：

```
$t1=time();//mark time in
$tt=$t1+(60*1);//total time = t1 + n seconds

do{
    if(isset($t2)) unset($t2);//clean it at every loop cicle
    $t2=time();//mark time
    if(imap_num_msg($imap)!=0){//if there is any message (in the inbox)

        $mc=imap_check($imap);//messages check
        //var_dump($mc); die;//vardump it to see all the data it is possible to get with imap_check() and them customize it for yourself
        echo 'New messages available';

    }else echo 'No new messagens';

    sleep(rand(7,13));//Give Google server a breack
    if(!@imap_ping($imap)){//if the connection is not up
        //start the imap connection the normal way like you did at first
    }

}while($tt>$t2);//if the total time was not achivied yet, get back to the beginning of the loop 
```

**jQuery AJAX 轮询到您的 IMAP 脚本**（从此 采用[）](https://stackoverflow.com/a/1406603/353802)：

```
// make the AJAX request
function ajax_request() {
  $.ajax({
    url: '/path/to/gmail/imap/checkMessages.php',
    dataType: 'json',
    error: function(xhr_data) {
      // terminate the script
    },
    success: function(xhr_data) {
        console.log(xhr_data);
        if (xhr_data.status == 'No new messages') {
            setTimeout(function() { ajax_request(); }, 15000); // wait 15 seconds than call ajax request again
        } else {
            newMailBlinker(); // blink the title here for new messages
        }
    }
    contentType: 'application/json'
  });
} 
```

显然你不会使用 jQuery 和 PHP 来投票。选择一个进行投票。我建议让客户端进行轮询，并让 PHP 在每次连接时检查 IMAP。话虽这么说，这些片段应该让你开始:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T17:30:23.200

假设你爸爸总是打开客户端页面，你可以写一个扩展并用 JS 操作屏幕。

例如，您可以：

1.  在 chrome 中使用 gmail 客户端
2.  编写一个 chrome 扩展程序来检查收到的新电子邮件。您可以通过识别新电子邮件来实现这一点。我相信 gmail 对新电子邮件使用特定的 css 类。所以你的 JS 只需要检查那个类。

3.  让扩展程序将页面从白色变为红色，然后再变回白色几次（或直到阅读电子邮件）。

当新电子邮件到达时，您还可以让 chrome 扩展程序播放声音吗？

我发现 chrome 扩展比 FF 更容易使用，特别是如果你只是打算使用 JS。

# xml - 使用 XSL 重复 XML 文件中的第一个节点

> ID：15451985
> 
> 赞同：4
> 
> 时间：2013-03-16T16:55:33.630
> 
> 标签：xml, xslt, xslt-2.0

我对此束手无策，想知道这是否可以通过 XSL 实现。假设我有这个 XML 数据：

```
<?xml version="1.0" standalone="yes"?>
<Data>
  <Row>
    <F1>Created By</F1>    
    <F2>City</F2>
  </Row>
  <Row>
    <F1>John Doe</F1> 
    <F2>Los Angeles</F2>   
  </Row>
  <Row>
    <F1>Jane Doe</F1> 
    <F2>San Diego</F2>   
  </Row>
</Data> 
```

我想在遍历其余数据时重复第一行元素。简而言之，我希望输出为：

```
[Created By] [City]
-----------  ------------
[John Doe]   [Los Angeles]

[Created By] [City]
----------   ------------
[Jane Doe]   [San Diego] 
```

最好的方法是什么？我尝试将第一个元素“创建者”设置为变量，但是当我尝试使用它时它不会呈现。我是 XSL 的新手，任何帮助都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T18:41:47.633

**这是一个解决方案，与当前接受的答案不同，它可以*正确*处理具有各种未知提前长度的数据——进一步参见处理无限数量列的更新**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:variable name="vMax1">
  <xsl:call-template name="maxLength">
   <xsl:with-param name="pNodes" select="/*/*/*[1]"/>
  </xsl:call-template>
 </xsl:variable>
 <xsl:variable name="vMax2">
  <xsl:call-template name="maxLength">
   <xsl:with-param name="pNodes" select="/*/*/*[2]"/>
  </xsl:call-template>
 </xsl:variable>

 <xsl:variable name="vLongest1" select=
  "/*/*/*[1][string-length() = $vMax1][1]"/>
 <xsl:variable name="vLongest2" select=
  "/*/*/*[2][string-length() = $vMax2][1]"/>

 <xsl:variable name="vUnderscores1" select=
  "concat('__',
          translate($vLongest1,translate($vLongest1, '_', ''),
                    '_________________________________________________________')
          )"/>
 <xsl:variable name="vUnderscores2" select=
  "concat('__',
          translate($vLongest2,translate($vLongest2, '_', ''),
                    '_________________________________________________________')
          )"/>
 <xsl:variable name="vBlanks1"
   select="translate($vUnderscores1,'_', ' ')"/>
 <xsl:variable name="vBlanks2"
   select="translate($vUnderscores2,'_', ' ')"/>

 <xsl:variable name="vTitle1" select=
 "concat('[',/*/*/*[1],']',
        substring($vBlanks1,1,
                  string-length($vBlanks1)-string-length(/*/*/*[1]))
        )"/>
 <xsl:variable name="vTitle2" select=
 "concat('[',/*/*/*[2],']',
        substring($vBlanks2,1,
                  string-length($vBlanks2)-string-length(/*/*/*[2]))
        )"/>

 <xsl:template match="Row">
  <xsl:value-of select=
   "concat('&#xA;', $vTitle1, $vTitle2)"/>
  <xsl:value-of select=
   "concat('&#xA;',$vUnderscores1, '  ', $vUnderscores2, '&#xA;')"/>
  <xsl:value-of select=
   "concat(F1,
           substring($vBlanks1,1,
                     string-length($vBlanks1)-string-length(F1)),
           '  ',
           F2,
           substring($vBlanks1,1,
                     string-length($vBlanks1)-string-length(F2)),
           '&#xA;'
          )"/>
 </xsl:template>

 <xsl:template name="maxLength">
  <xsl:param name="pNodes" select="/.."/>

  <xsl:for-each select="$pNodes">
   <xsl:sort select="string-length()"
        data-type="number" order="descending"/>
   <xsl:if test="position() = 1">
    <xsl:value-of select="string-length()"/>
   </xsl:if>
  </xsl:for-each>
 </xsl:template>
 <xsl:template match="Row[1]|text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Data>
  <Row>
    <F1>Created By</F1>
    <F2>City</F2>
  </Row>
  <Row>
    <F1>John Doe</F1>
    <F2>Los Angeles</F2>
  </Row>
  <Row>
    <F1>Jane Doe</F1>
    <F2>San Diego</F2>
  </Row>
</Data> 
```

**产生了想要的正确结果：**

```
[Created By]  [City]         
____________  _____________
John Doe      Los Angeles 

[Created By]  [City]         
____________  _____________
Jane Doe      San Diego 
```

**更有趣的是，当应用于这个 XML 文档时：**

```
<Data>
    <Row>
        <F1>Created By</F1>
        <F2>City</F2>
    </Row>
    <Row>
        <F1>John Doe</F1>
        <F2>La Villa Real de la Santa Fe de San Francisco de Asis</F2>
    </Row>
    <Row>
        <F1>Josiah Willard Gibbs</F1>
        <F2>San Diego</F2>
    </Row>
</Data> 
```

**再次产生正确的结果**：

```
[Created By]            [City]                                                   
______________________  _______________________________________________________
John Doe                La Villa Real de la Santa Fe de San Francisco de Asis

[Created By]            [City]                                                   
______________________  _______________________________________________________
Josiah Willard Gibbs    San Diego 
```

**将此正确结果与当前接受的答案产生的结果进行比较：**

```
Created By  City        
----------- ----------- 
John Doe    La Villa Real de la Santa Fe de San Francisco de Asis

Created By  City        
----------- ----------- 
Josiah Willard GibbsSan Diego 
```

* * *

**II 相同解决方案的 XSLT 2.0 变体：更短且更易于编写**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output method="text"/>

 <xsl:variable name="vMax" as="xs:integer*" select=
  "for $i in 1 to 2
    return
      max(/*/*/*[$i]/string-length(.))"/>

 <xsl:variable name="vUnderscores" select=
  "for $i in 1 to 2
    return
           concat('__',
                  string-join((for $len in 1 to $vMax[$i]
                                            return '_'), '')
                  )"/>

 <xsl:variable name="vBlanks" select=
  "for $i in 1 to 2
     return
       translate($vUnderscores[$i],'_', ' ')

  "/>

 <xsl:variable name="vTitle" select=
  "for $i in 1 to 2
    return
       concat('[',(*/*/*)[$i],']',
        substring($vBlanks[$i],1,
                  $vMax[$i]+2 -string-length((/*/*/*)[$i]))
        )

  "/>
 <xsl:template match="Row">
  <xsl:value-of select=
   "concat('&#xA;', $vTitle[1], $vTitle[2])"/>
  <xsl:value-of select=
   "concat('&#xA;',$vUnderscores[1], '  ', $vUnderscores[2], '&#xA;')"/>
  <xsl:value-of select=
   "concat(F1,
           substring($vBlanks[1],1,
                     $vMax[1]+2 -string-length(F1)),
           '  ',
           F2,
           substring($vBlanks[2],1,
                     $vMax[1]+2 -string-length(F2)),
           '&#xA;'
          )"/>
 </xsl:template>
 <xsl:template match="Row[1]|text()"/>
</xsl:stylesheet> 
```

* * *

**三、处理不确定的列数**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output method="text"/>

 <xsl:variable name="vNumCols" select="max(/*/*/count(*))"/>

 <xsl:variable name="vMax" as="xs:integer*" select=
  "for $i in 1 to $vNumCols
    return
      max(/*/*/*[$i]/string-length(.))"/>

 <xsl:variable name="vUnderscores" select=
  "for $i in 1 to $vNumCols
    return
       concat('__',
              string-join((for $len in 1 to $vMax[$i]
                            return '_'), '')
             )"/>

 <xsl:variable name="vBlanks" select=
  "for $i in 1 to $vNumCols
     return
       translate($vUnderscores[$i],'_', ' ')

  "/>

 <xsl:variable name="vTitle" select=
  "for $i in 1 to $vNumCols
    return
       concat('[',(*/*/*)[$i],']',
        substring($vBlanks[$i],1,
                  $vMax[$i]+2 -string-length((/*/*/*)[$i]))
        )

  "/>
 <xsl:template match="Row">
  <xsl:value-of separator="" select=
   "'&#xA;', string-join($vTitle, '')"/>
  <xsl:value-of separator="" select=
   "'&#xA;', string-join($vUnderscores, '  '), '&#xA;'"/>

  <xsl:value-of select=
   "string-join((for $i in 1 to $vNumCols,
               $vChild in *[$i]
            return
              ($vChild,
               substring($vBlanks[$i],1,
                         $vMax[$i]+2 -string-length($vChild)
                        ),
              '  '
                     ),
                 '&#xA;'
                 ),
                 ''
               )"/>
 </xsl:template>
 <xsl:template match="Row[1]|text()"/>
</xsl:stylesheet> 
```

**应用于此 XML 文档（3 列）时**：

```
<Data>
  <Row>
    <F1>Created By</F1>
    <F2>City</F2>
    <F3>Region</F3>
  </Row>
  <Row>
    <F1>Pablo Diego Ruiz y Picasso</F1>
    <F2>Los Angeles</F2>
    <F3>CA</F3>
  </Row>
  <Row>
    <F1>Jane Doe</F1>
    <F2>La Villa Real de la Santa Fe de San Francisco de Asis</F2>
    <F3>NM</F3>
  </Row>
</Data> 
```

**产生了想要的正确结果：**

```
[Created By]                  [City]                                                   [Region]  
____________________________  _______________________________________________________  ________
Pablo Diego Ruiz y Picasso    Los Angeles                                              CA        

[Created By]                  [City]                                                   [Region]  
____________________________  _______________________________________________________  ________
Jane Doe                      La Villa Real de la Santa Fe de San Francisco de Asis    NM 
```

* * *

**四。第 III 部分（上）的 XSLT 1.0 的翻译：**

**请注意**：

JLRishe 提供的解决方案作为对他的初始答案的更正，如果有 100 行，每行有 4 列，则将执行 400 次排序。

**下面的代码中没有这样的低效率**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common">
<xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="vMaxCols">
  <xsl:call-template name="maxChildren">
   <xsl:with-param name="pNodes" select="/*/*"/>
  </xsl:call-template>
 </xsl:variable>

 <xsl:variable name="vrtfMax">
  <xsl:for-each select="(/*/*/*)[not(position() > $vMaxCols)]">
   <xsl:variable name="vPos" select="position()"/>
   <length>
     <xsl:call-template name="maxLength">
       <xsl:with-param name="pNodes" select="/*/*/*[position()=$vPos]"/>
     </xsl:call-template>
   </length>
  </xsl:for-each>
 </xsl:variable>

 <xsl:variable name="vMax" select="ext:node-set($vrtfMax)/length"/>

 <xsl:variable name="vrtfUnderscores">
  <xsl:for-each select="(/*/*/*)[not(position() > $vMaxCols)]">
    <xsl:variable name="vPos" select="position()"/>
    <xsl:variable name="vLongestDataNode" select=
     "/*/*/*[position()=$vPos
           and string-length() = $vMax[position() = $vPos]][1]"/>
    <t>
       <xsl:value-of select=
       "concat('__',
                   translate($vLongestDataNode,translate($vLongestDataNode, '_', ''),
                             '_________________________________________________________')
               )"/>
    </t>
  </xsl:for-each>
 </xsl:variable>

 <xsl:variable name="vUnderscores" select="ext:node-set($vrtfUnderscores)/t"/>

 <xsl:variable name="vrtfBlanks">
  <xsl:for-each select="$vUnderscores">
   <xsl:variable name="vPos" select="position()"/>
   <t><xsl:value-of select=
           "translate($vUnderscores[position()=$vPos],'_', ' ')"/>
   </t>
  </xsl:for-each>
 </xsl:variable>

 <xsl:variable name="vBlanks" select="ext:node-set($vrtfBlanks)/t"/>

 <xsl:variable name="vrtfTitle">
  <xsl:for-each select="/*/*[1]/*">
   <xsl:variable name="vPos" select="position()"/>
   <t>
     <xsl:value-of select=
     "concat('[',.,']',
        substring($vBlanks[position()=$vPos],1,
                  2+$vMax[position()=$vPos]-string-length())
        )
     "/>
   </t>
  </xsl:for-each>
 </xsl:variable>

 <xsl:variable name="vTitle" select="ext:node-set($vrtfTitle)/t"/>

 <xsl:template match="Row">
  <xsl:text>&#xA;</xsl:text>
  <xsl:for-each select="$vTitle">
      <xsl:value-of select="."/>
  </xsl:for-each>

  <xsl:text>&#xA;</xsl:text>
  <xsl:for-each select="$vUnderscores">
      <xsl:value-of select="."/>
      <xsl:text>  </xsl:text>
  </xsl:for-each>
  <xsl:text>&#xA;</xsl:text>

  <xsl:for-each select="*[not(position() > $vMaxCols)]">
    <xsl:variable name="vPos" select="position()"/>

    <xsl:value-of select=
     "concat(.,
           substring($vBlanks[position()=$vPos],
                     1,
                     string-length($vBlanks[position()=$vPos])
                     -string-length()),
           '  '
           )"/>
  </xsl:for-each>
  <xsl:text>&#xA;</xsl:text>
 </xsl:template>

 <xsl:template name="maxChildren">
  <xsl:param name="pNodes" select="/.."/>

  <xsl:for-each select="$pNodes">
   <xsl:sort select="count(*)"
        data-type="number" order="descending"/>
   <xsl:if test="position() = 1">
    <xsl:value-of select="count(*)"/>
   </xsl:if>
  </xsl:for-each>
 </xsl:template>

 <xsl:template name="maxLength">
  <xsl:param name="pNodes" select="/.."/>

  <xsl:for-each select="$pNodes">
   <xsl:sort select="string-length()"
        data-type="number" order="descending"/>
   <xsl:if test="position() = 1">
    <xsl:value-of select="string-length()"/>
   </xsl:if>
  </xsl:for-each>
 </xsl:template>
 <xsl:template match="Row[1]|text()"/>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T17:14:12.097

这是否足够：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="text"/>
  <xsl:key name="kColumn" match="Row/*" use="count(preceding-sibling::*) + 1" />

  <xsl:param name="columnWidth" select="13" />

  <xsl:variable name="firstRow" select="/Data/Row[1]" />
  <xsl:variable name="spaces" 
                select="'                                                                           '" />
  <xsl:variable name="separatorChars"
                select="'---------------------------------------------------------------------------'" />

  <xsl:template match="/*">
    <xsl:apply-templates select="Row[position() > 1]" />
  </xsl:template>

  <xsl:template match="Row">
    <xsl:apply-templates select="$firstRow/*" />
    <xsl:text>&#xA;</xsl:text>
    <xsl:apply-templates select="$firstRow/*" mode="separator" />
    <xsl:text>&#xA;</xsl:text>
    <xsl:apply-templates select="*"/>
    <xsl:text>&#xA;&#xA;</xsl:text>
  </xsl:template>

  <xsl:template match="Row/*" name="Cell">
    <xsl:param name="value" select="concat('[', ., ']')" />
    <xsl:param name="width">
      <xsl:call-template name="FindWidth" />
    </xsl:param>

    <xsl:variable name="numSpaces"
                  select="$width + 1 - string-length($value)" />
    <xsl:variable name="trailingSpace" select="substring($spaces, 1, $numSpaces)" />
    <xsl:value-of select="concat($value, $trailingSpace)"/>
  </xsl:template>

  <xsl:template match="Row/*" mode="separator">
    <xsl:variable name="width">
      <xsl:call-template name="FindWidth" />
    </xsl:variable>
    <xsl:call-template name="Cell">
      <xsl:with-param name="value" select="substring($separatorChars, 1, $width)" />
      <xsl:with-param name="width" select="$width" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="FindWidth">
    <xsl:apply-templates select="key('kColumn', position())" mode="findLength">
      <xsl:sort select="string-length()" data-type="number" order="descending" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="Row/*" mode="findLength">
    <xsl:if test="position() = 1">
      <xsl:variable name="len" select="string-length() + 2" />
      <xsl:value-of select="$len * ($len > $columnWidth) + $columnWidth * ($columnWidth > $len)"/>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

在此输入上运行时：

```
<Data>
  <Row>
    <F1>Created By</F1>
    <F2>City</F2>
    <F3>Region</F3>
  </Row>
  <Row>
    <F1>Pablo Diego Ruiz y Picasso</F1>
    <F2>Los Angeles</F2>
    <F3>CA</F3>
  </Row>
  <Row>
    <F1>Jane Doe</F1>
    <F2>La Villa Real de la Santa Fe de San Francisco de Asis</F2>
    <F3>NM</F3>
  </Row>
</Data> 
```

它产生：

```
[Created By]                 [City]                                                  [Region]      
---------------------------- ------------------------------------------------------- ------------- 
[Pablo Diego Ruiz y Picasso] [Los Angeles]                                           [CA]          

[Created By]                 [City]                                                  [Region]      
---------------------------- ------------------------------------------------------- ------------- 
[Jane Doe]                   [La Villa Real de la Santa Fe de San Francisco de Asis] [NM] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T17:20:16.370

试试这个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!-- Output HTML - as an example -->
  <xsl:output method="html" indent="yes"/>

  <!-- Template that skips the first row, so it does not get processed -->
  <xsl:template match="Row[position()=1]">
  </xsl:template>

  <!-- Template that process all rows except the first one -->
  <xsl:template match="Row[position()>1]">
    <!-- Copy the first row-->
    <tr>
      <xsl:for-each select="../Row[1]/*">
        <td>
          <xsl:value-of select="."/>
        </td>
      </xsl:for-each>
    </tr>
    <!-- Process this row -->
    <tr>
      <xsl:for-each select="*">
        <td>
          <xsl:value-of select="."/>
        </td>
      </xsl:for-each>
    </tr>
  </xsl:template>

  <!-- Root template: output the HTML scaffolding and then processes the individual rows -->
  <xsl:template match="/">
    <html>
      <head></head>
      <body>
        <table>
          <xsl:apply-templates/>
        </table>
      </body>
    </html>
  </xsl:template>

</xsl:stylesheet> 
```

它输出一个 HTML 表格作为示例 - 它应该很容易适应其他输出。

# css - 容器 div 未由包含的表填充

> ID：15451986
> 
> 赞同：0
> 
> 时间：2013-03-16T16:55:42.197
> 
> 标签：css, html, css-float

我有一个`div`包含其他两个 div，一个浮动到右侧，一个浮动到左侧，并且这两个内部 DIV 都有一个表。我需要最外层的 div 来包含其中的 div，但事实并非如此。似乎内部 div 不包含内部表。因为最外面的 div 有一个边框，所以我可以看到它的高度比包含的内容要短很多。

```
<style>
.bluebox{ border:1px solid blue; }
.floatleft
{
float:left;
}
.floatright
{
float:right;
}
</style> 
```

这是我的 HTML：

```
<div class='bluebox'>

  <div class='floatleft'>
    <table cellspacing=10>
     <tr><td class='head'> Qty ordered: </td><td> 100</td> </tr> 
     <tr><td class='head'> Description: </td><td> Business Card</td></tr>
     <tr><td class='head'>Stock: </td><td> SPRONDIGRLE WHITE</td></tr>
     <tr><td class='head'>Lamination: </td><td> XXX</td></tr>
    </table>
  </div>

  <div class='floatright'>
    <table cellspacing=10>
      <tr><td class='head'> Parent A3 Sheets: </td><td>XXX </td></tr>
      <tr><td class='head'>Finish Size: </td><td> 9 x 5cm</td></tr>
      <tr></tr>
      <tr><td class='head'>Finishing touches: </td><td> Rounded corners</td></tr>
   </table>
  </div>

</div> 
```

因为我需要显示边框，所以我不能做类似`padding-bottom:-5000px; overflow:hidden`的事情，因为这样边框会将页面拉伸数英里！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:59:40.783

你需要清除你的浮动。最简单的方法是这样的：

```
.bluebox{ border:1px solid blue; overflow: hidden } 
```

[http://jsfiddle.net/LBfxY/](http://jsfiddle.net/LBfxY/)

还有其他方法可以做到这一点，但使用溢出是最简洁的。以下是有关其他 clearfix 技术的一些演示：

[http://codepen.io/cimmanon/pen/qDjdr](http://codepen.io/cimmanon/pen/qDjdr)

# macos - 如何为 Mac 设置 SublimeLinter

> ID：15451989
> 
> 赞同：6
> 
> 时间：2013-03-16T16:55:50.607
> 
> 标签：macos, sublimetext2, sublimelinter

我一直在尝试设置 SublimeLinter (Mac)，但肯定有问题，因为 php lint 根本不起作用。我已经安装和删除了很多次包，尝试按照我找到的不同教程添加/删除对 php 的支持，但没有一个有效。我认为 Sublime 软件包在安装和使用时是直截了当的。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T00:31:50.513

我相信 Sublime 默认将 PHP 的语法设置为 HTML。如果您希望将其作为 PHP 进行 lint，请将语法更改为 PHP。

# jquery - jQuery替换href并更改每个url

> ID：15451990
> 
> 赞同：0
> 
> 时间：2013-03-16T16:56:26.407
> 
> 标签：jquery, url, replace, href

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:57:33.013

试试这个

```
 $("a").each(function() { 

          var newUrl =  $(this).attr('href')+ textOfNew + " ";

              $(this).attr('href',newUrl);

    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T17:04:50.890

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T17:02:36.180

```
$("a").each(function() { 

    newUrl += $(this).attr("href") + textOfNew + " ";

    $(this).attr("href", newUrl);

}); 
```

# asp.net - ASP.net 4.5 / 表单身份验证

> ID：15451992
> 
> 赞同：2
> 
> 时间：2013-03-16T16:56:38.200
> 
> 标签：asp.net, asp.net-mvc, forms-authentication

我想在我的 asp.net 站点中设置表单身份验证。我已经从 Visual Studio 中的空白模板创建了一个。我已经有一个数据库设置，但它没有任何用户表。我能在网上找到的所有参考资料要么是针对非常旧的 asp 版本（我假设情况已经改变），要么是告诉您使用 Visual Studio 模板。我想知道如何将这些东西添加到我当前的项目中，并希望有人有好的参考建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:03:10.297

查看 Jon Galloway 的[SimpleMembership、Membership Providers、Universal Providers 以及新的 ASP.NET 4.5 Web 窗体和 ASP.NET MVC 4 模板](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

# cakephp - CakePHP 在两个模型之间进行连接，但不在另外两个模型之间进行连接

> ID：15451994
> 
> 赞同：0
> 
> 时间：2013-03-16T16:56:49.403
> 
> 标签：cakephp

我有四个非常简单的模型。提议、雇主、雇员和回应。

```
Offer hasOne Employer
Employer hasMany Offer
Response hasOne Employee
Employee hasMany Offer 
```

现在，当我进行`find()`on 时`Offer`，它会很好地进行 JOIN 查询并返回 Employer 详细信息。

但是当我做一个`find()`on 时`Response`，它不会尝试检索员工的数据。

我多次查看代码，将模型从任何其他属性等中剥离出来，但仍然一无所获。这些模型现在几乎相同，它们的 SQL 表也是，但 Response 的行为就像它与定义的 Employee 无关。

我可能会陷入其中的任何陷阱吗？我现在准备将此报告为错误。

如果有帮助，我可以在这里发布完整的（无论如何都很短）模型定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:10:17.100

## 检查模型实例的类

IE

```
debug(get_class($this->Response)); 
```

如果它输出`AppModel`- 您的代码似乎没有被使用的原因是因为：它没有被使用。在这种情况下，请检查模型文件的文件名/位置中的拼写错误——因为如果您的模型文件不存在，CakePHP 将默默地使用 AppModel 实例。