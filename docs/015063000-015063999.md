# StackOverflow 问答 15063000-15063999

# javascript - 将 html 5 画布图像保存在本地硬盘上

> ID：15063002
> 
> 赞同：5
> 
> 时间：2013-02-25T08:40:19.763
> 
> 标签：javascript, html, html5-canvas, kineticjs

我使用 kineticjs 库在 html 5 画布上创建了形状。现在我想将画布保存为本地系统硬盘上的图像。请告诉我如何使用 KineticJS 库来实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:44:09.047

选择画布后（我猜使用类似 document.getElementById 的东西），您应该能够调用以下命令将画布转换为 dataURL。

获得该 URL 后，在另一个浏览器窗口中打开它并执行标准的右键单击->将图像另存为，然后将其另存为 JPG/PNG/等。

```
var canvas = document.getElementById("mycanvas");
var img    = canvas.toDataURL("image/png"); 
```

无论您是否能够以编程方式将图像保存到驱动器，我都不确定，尽管由于安全限制我非常怀疑它。

有关以编程方式访问文件系统的更多信息，请查看此 HTML5 文件系统参考站点。

[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

有关检索 KinectJS Stage 画布元素的 dataURL 的更多信息，请参阅下面的代码片段/url。

```
<script>
  stage.toDataURL({
    callback: function(){
      // do something with the data url
    },
    mimeType: 'image/jpeg',
    quality: 0.5
  });
</script> 
```

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-stage-data-url-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-stage-data-url-with-kineticjs/)

# validation - 如何在 magento 中提供或自定义注册验证

> ID：15063003
> 
> 赞同：1
> 
> 时间：2013-02-25T08:40:34.977
> 
> 标签：validation, magento

在我的 magento 应用程序中有一个像 customer 这样的模块。

此模块中的注册工作正常。

我想对注册表单进行验证。

我的模块中有其他字段。

我怎样才能做到这一点？

目前只有 firstnmae、lastname、email 验证工作，其他人无效。

我怎样才能做到这一点？

这是我的注册表单代码：

```
<form action="<?php echo Mage::getUrl('professional_registration/index/createpost') ?>"  method="post" id="form-validate" enctype="multipart/form-data">
        <ul class="form-list">
            <li>
                <label>First Name:<span>*</span></label>
                <input type="text" name="firstname" id="firstname" value="" title="UserFirstname" class="input-text">
            </li>
            <li>
                <label>Last name:<span>*</span></label>
                <input type="text" name="lastname" id="lastname" value="" title="UserLastname" class="input-text">
            </li>
            <li>
                <label>Credential/Degree (If applicable):<span>*</span></label>
                <input type="text" name="credentialdegree" id="credentialdegree" value="" title="Credential" class="required-entry">
            </li>
            <li>
                <label for="name">Company name:</label>
                <input type="text" name="company" id="company" value="" title="Company" class="input-text">
            </li>
             <li>
                <label for="name" class="required">Address:<span>*</span></label>
                <textarea name="address" id="address"></textarea>
            </li>
            <li>
                <label>Phone:<span>*</span></label>
                 <input type="text" name="telephone" id="telephone" value="" title="Telephone" class="input-text">
                <div class="clear"></div>
            </li>
            <li>
                <label>City:<span>*</span></label>
                <input type="text" name="city" id="city" value="" title="City" class="input-text">
           </li>  
               <li> 
               <label>State:<span>*</span></label>
                <select size="1" id="state" name="state" class="shipping_state float_lft">
                    <option selected="" value="">Select a State</option>
                    <option value="AK">Alaska</option>
                    <option value="AL">Alabama</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DC">District of Columbia</option>
                    <option value="DE">Delaware</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="PR">Puerto Rico </option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option></select>
                </select>
             </li>
             <li>
                 <label>Postal Code:<span>*</span></label>
                 <input type="text" name="postcode" id="postcode" value="" title="Zip/Postal Code" class="input-text">
                 <div class="clear"></div>
             </li>    
              <li>
                 <label>Email:<span>*</span></label>
                 <input type="text" name="email" id="email" value="" title="Email" class="input-text">
            </li>
            <li>
                 <label for="email" class="required">Confirm Email:<span>*</span></label>
                 <input type="text" name="confirmemail" id="confirmemail" value="" title="Confirmemail" class="input-text">
            </li>            
            </ul>
                <p class="margin-top-3 margin-bottom-2 defult">
                   If you have proof of qualification for wholesale pricing (e.g. resale certificate, license) available in PDF, JPG, or BMP format, you can upload it here.
                </p>
                <div class="browse_div">
                    <div id="FileUpload" class="margin-top-1 float_lft">
                    <input type="file" size="24" id="BrowserHidden" onchange="getElementById('FileField').value = getElementById('BrowserHidden').value;"  />
                    <div id="BrowserVisible">
                    <input type="text" id="FileField" class="font_size" />
                    </div>
                    </div>
                </div>                

             <div class="clear"></div>
            <br clear="all" />
            <ul style="margin-top:5px">
            <li>
            <label>Please enter any additional information or questions here:</label>
            <div>
              <textarea name="additionalinfo" id="additionalinfo" value="" title="Additional Information"></textarea>
            </div>
            </li>
            </ul>

            <div class="submit_div">
            <input type="hidden" readonly="readonly" id="password" class="input-text " title="Password" value="123456" name="password">
            <input type="hidden" readonly="readonly"  id="confirmation" class="input-text " title="Confirmation" value="123456" name="confirmation">
            <input type="hidden" readonly="readonly" id="usertype" class="input-text " title="usertype" value="0" name="usertype">
            <input type="hidden" readonly="readonly" id="group_id" class="input-text " title="group_id" value="5" name="group_id">
            <input type="submit" class="submit margin-top-2" value="Submit" id="send">
            </div>
        </form> 
```

更新：

我在脚本中添加了这段代码：

```
//<![CDATA[
    var contactForm = new VarienForm('form-validate', true);
//]]> 
```

然后给出验证：

```
<li>
                <label>Credential/Degree (If applicable):<span>*</span></label>
                <input type="text" name="credentialdegree" id="credentialdegree" value="" title="Credential" class="required-entry">
            </li> 
```

但没有效果，它只显示：

![在此处输入图像描述](../Images/267a4d3f091db3649a4eff834e3f685e.png)

# jquery - jQuery.Ajax 与 MVC

> ID：15063011
> 
> 赞同：4
> 
> 时间：2013-02-25T08:40:57.880
> 
> 标签：jquery, asp.net-mvc

我正在尝试使用 jQuery ajax 将用户在文本框中输入的值保存到数据库中。但我很震惊如何进行。到目前为止我做了什么：

用户单击按钮，我调用 jQuery 函数并调用控制器

```
comments = $("#txtComments").val();
var request = $.ajax({
                url: "/Home/SaveCommentsData",
                type: "POST",
                data: { comment: comments },
                dataType: "json"
            }); 
```

而且我不确定如何在控制器中获取此注释值并在成功时将值发送回 jQuery。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T08:45:23.330

试试这样的数据

数据：{'评论'：评论}

并在控制器操作中使用与字符串类型相同的变量

```
comments = $("#txtComments").val();
var request = $.ajax({
                url: "/Home/SaveCommentsData",
                type: "POST",
                data: { 'comment': comments },
                dataType: "json"
            }); 
```

控制器

```
[AcceptVerbs(HttpVerbs.Post)]
        public ActionResult SaveCommentsData( string comment)
        {

//
} 
```

问候

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T08:47:54.513

脚本

```
$.ajax({
   url: "/Home/SaveCommentsData",
   type: "POST",
   data: { comment: comments },
   dataType: "json",
   success: function (data) {  
       // data is returning value from controller
       // use this value any where like following
       $("#div_comment").html(data);
   }
}); 
```

控制器

```
[HttpPost]
public ActionResult SaveCommentsData(string comment)
{
    // save comment
    var result = someData; // maybe saved comment
    return Json(result);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T08:53:02.327

**客户端脚本-jQuery**

```
$.ajax({
   url: "/Home/SaveCommentsData",
   type: "post",
   data: { comment: comments },
   dataType: "application/json",
   success: function (data) {  
       if(data.Success)
       {
          alert('Done');
       }
   }
}); 
```

**控制器端代码**

```
[HttpPost]
public ActionResult SaveCommentsData(string comment)
{
    // save comment
    return Json(new {Success:true});
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T08:53:37.130

试试这个

```
comments = $("#txtComments").val();
var request = $.ajax({
    url: '@Url.Action("SaveCommentsData","Home")',
    type: "POST",
    data: JSON.stringyfy({ 'comment': comments }),
    dataType: "json",
    success: function(data){
      alert(data.status);
    }
}); 
```

控制器

```
[HttpPost]
public JsonResult SaveCommentsData(string comment)
{
   //Do something
   return Json(new
            {
                status = false
            });
} 
```

# objective-c - 在 Core Data 中保存后的字符串长度变化

> ID：15063013
> 
> 赞同：5
> 
> 时间：2013-02-25T08:41:01.653
> 
> 标签：objective-c, core-data, nsstring, nsstringencoding

所以这里有一个问题。

我有一个字符串

```
 Белый Клык-0.fb2 
```

NSString 方法长度返回 16

在核心数据中保存字符串后（后端 - sqlite）

NSString 方法长度返回 17，但视觉上字符串保持不变

```
 Белый Клык-0.fb2 
```

显然方法 isEqualToString: return NO

在花了很多时间进行实验之后，我确定问题出在这封信上：

```
 й 
```

删除这封信可以解决问题。

但它一直让我发疯，为什么会发生这样的事情？

这里的解决方法有效，但不满足我：

1.  stringByReplacingPercentEscapesUsingEncoding: - 需要在数据库查询中和之后转换字符串
2.  音译整个字符串 - 有点黑客

这里是 dosnt 有效的解决方法：

1.  stringWithUTF8String
2.  [将转义的 UTF8 字符转换回其原始形式](https://stackoverflow.com/questions/7860867/converting-escaped-utf8-characters-back-to-their-original-form-in-ios-objective/7861345#7861345)

请帮助我了解在 Core Data 中保存后字符串发生了什么。

还有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:26:35.207

该问题可能与[unicode normalization](http://unicode.org/reports/tr15/)有关。所以 Coredata 似乎存储了分解后的字符串（所以`й`计数为 2 - 一个用于字母，一个用于重音），这就是为什么你得到长度差异的原因。如果您在将原始字符串与 Coredata 返回的内容进行比较之前尝试分解原始字符串，它应该可以工作：

```
[yourOriginalString decomposedStringWithCanonicalMapping] 
```

现在，这背后的原因超出了我的专业领域。我经常使用 coredata 来管理我的模型，并且多次使用希腊/俄语字符串，从未遇到过这样的问题。如果有人可以对此进行扩展并阐明一些观点，我也会对这个主题非常感兴趣。

# asp.net - 如何在 ASP.NET 中基于复选框访问 GridView 行的估值器

> ID：15063016
> 
> 赞同：0
> 
> 时间：2013-02-25T08:41:08.363
> 
> 标签：asp.net, mysql, asp.net-mvc, vb.net

嗨，我有一个包含多行和多列的 GridView。我还在网格视图中添加了一个复选框..

但是现在我在访问检查了复选框的特定行的值时遇到了麻烦。

因为按下按钮后，我想将一列的值从未注册更改为已注册。

另一个按钮 应该将选中行的帐户 ID 转发到另一个页面，该页面将输出条目的所有详细信息。

有谁知道这是怎么做到的吗？

这是我正在使用的代码段：

Tis 是 GridView 和 Button 的代码：

```
<asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" 
        GridLines="None" Width="1500px">
        <Columns>

                    <asp:TemplateField >
                        <ItemTemplate>
                            <asp:CheckBox ID="myCheckBox" runat="server" />
                        </ItemTemplate>
                    </asp:TemplateField>

              </Columns>
        <AlternatingRowStyle BackColor="White" />
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView>

     <asp:Button ID="DetailsBtn" runat="server" Text="See Details" />
     &nbsp; &nbsp; &nbsp; &nbsp;
     <asp:Button ID="RegBtn" runat="server" Text="Mark Registered" /> 
```

这是填充 GridView 的代码

```
Try
        myconn.Open()
        Dim sqlstring As String = "SELECT a.account_id AS 'No', a.accountid_number .BLA BLA BLA"
        Dim smd As MySqlCommand
        smd = New MySqlCommand(sqlstring, myconn)
        smd.CommandType = CommandType.Text

        Dim da As New MySqlDataAdapter(smd)
        Dim cb As New MySqlCommandBuilder(da)
        Dim ds As New DataSet()
        da.Fill(ds)

        GridView1.DataSource = ds.Tables(0)
        GridView1.DataBind()

        myconn.Close()
    Catch ex As Exception
        'System.Diagnostics.Debug.WriteLine(ex.ToString())
        Dim exmess As String = "alert('" & ex.Message.ToString() & "')"
        Page.ClientScript.RegisterStartupScript(Me.GetType(), "ErrorAlert", exmess, True)
        myconn.Close()
    End Try 
```

我应该为这里的按钮做什么？

```
Protected Sub RegBtn_Click(ByVal sender As Object, ByVal e As EventArgs) Handles RegBtn.Click

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:48:24.417

要在 gridview 中查找选中的行：

```
foreach (DataGridViewRow row in GridView1.Rows)
{
 Checkbox cbox = (Checkbox)row.FindControl("myCheckBox");
 if(cbox.Checked)
 {
   // do your stuff ...
 }
 else
 { // do your other stuff ... }
} 
```

# java - 如何在 WAS v8.0 联合存储库的 LDAP 存储库中添加和查看其他 AD LDAP 属性？

> ID：15063017
> 
> 赞同：1
> 
> 时间：2013-02-25T08:41:09.797
> 
> 标签：java, jakarta-ee, security, websphere-8

在 WebSphere Application Server v8.0.0.5 中，我设置了一个安全域。在该安全域中，我创建了一个联合存储库，其中包括：

```
- an LDAP repository
- a JDBC Custom User Registry that's read-only (uses a Registry Bridge) 
```

我已经能够创建和配置存储库，并且可以通过“管理用户”按钮显示用户。我不知道如何创建然后查看/确认一个名为“title”的新 LDAP 存储库属性，并将其映射到也名为“title”的现有 LDAP 属性。从我的域中的联合存储库中查看我的用户列表时，我希望能够看到这个“标题”属性。我已按照此处概述的步骤操作： [http ://www14.software.ibm.com/webapp/wsbroker/redirect?version=matt&product=was-base-dist&topic=twim_ldap_attributes](http://www14.software.ibm.com/webapp/wsbroker/redirect?version=matt&product=was-base-dist&topic=twim_ldap_attributes)

由于“title”是现有的 LDAP 属性，我将其指定为“supported”并将其分配给 PersonAccount EntityType。

重新启动 WAS 后，导航到我的域，然后单击“管理用户”，我没有看到列出的“标题”属性。我只看到列出的用户 ID、名字、姓氏、电子邮件和唯一名称列。如何查看“title”属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:05:14.537

我的期望是不可行的。您无法通过“管理用户”在 WAS 管理控制台中查看诸如“标题”之类的 LDAP 属性。

最终，我意识到我可以指定搜索库和过滤器，从而解决了我的问题，这使我能够检索到我想要的确切用户群和组。

# java - PDFBox 如何检测列？

> ID：15063021
> 
> 赞同：1
> 
> 时间：2013-02-25T08:41:25.333
> 
> 标签：java, pdfbox, multiple-columns, text-extraction, identity-column

我正在尝试从 pdf 文档中提取文本。我已经测试了几个工具，如、`PDFBox`等，但它们都不适用于提取波斯语多列 pdf 文档的文本。`TET``PDFTextStream`

目前，我正在尝试结合此工具的良好功能并对其使用一些技巧。现在我想知道如何检测页面的列数以及如何拆分这些列的文本。

特别是我想知道哪个类`PDFBox`或`PDFTextStream`负责列检测以及它是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T02:34:24.443

我只能说`PDFTextStream`，但为了理解它是如何工作的，你想大致了解`PDFTextStream`一下 PDF 文档的外观。

每个文档由 组成`Pages`，由 组成`Blocks`（其中可以有很多并且嵌套）。`Blocks`最终将包含`Lines`，它将包含`TextUnits`。

这些单位中的每一个都有一个、`x`和`y`属性。所有 PDF 都是基于它们的坐标布局的这些基本单位。当您要求“阅读”一个页面或一个区域时，它会查看对象以及它们在 X、Y 平面上的布局方式，并使用将其转换为文本的近似值。这就是为什么会出错，因为没有 100% 万无一失的方法可以将此结构转换为机器可读的结构化数据。`width``height``PDFTextStream`

在`PDFTextStream`中，你应该看看`getRegionText` [函数和例子](http://downloads.snowtide.com/javadoc/PDFTextStream/2.6.0/com/snowtide/pdf/RegionOutputTarget.html)。PDFTextStream 是专有的（我转向 PDFBox 的原因），因此我无法向您提供有关用于获取文本的算法的详细信息，但它们基于上述过度简化。

祝你好运。

# android - 使用 ArrayAdapter 填充 ListView 并导航

> ID：15063024
> 
> 赞同：0
> 
> 时间：2013-02-25T08:41:31.293
> 
> 标签：android, android-arrayadapter

例如，如果我有一堂课：

```
class Folder {
    public String name;
    public ArrayList<Folder> subFolders;
    public ArrayList<Folder> subFolders;
} 
```

我正在尝试填充`ListView`自定义`ArrayAdapter`，然后浏览这个`ArrayList`充满数据的“文件夹”。我尝试这样的事情来展示`subFolders`：

```
private OnItemClickListener listlistener = new OnItemClickListener() {

    @Override
    public void onItemClick(int position, long arg3) {
        currentFolder = (Category) parent.getItemAtPosition(position);
        folders = currentFolder.subFolders;
        folderAdapter.notifyDataSetChanged();
    }
}; 
```

但它不起作用。有什么建议可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:47:07.857

在您的自定义 ArrayAdapter 创建一个公共方法

```
public void setList(List<Item> items){
   this.items = items;
} 
```

现在

```
private OnItemClickListener listlistener = new OnItemClickListener() {

    @Override
    public void onItemClick(int position, long arg3) {

        currentFolder = (Category) parent.getItemAtPosition(position);

        folders = currentFolder.subFolders;
        folderAdapter.setList(folders);
        folderAdapter.notifyDataSetChanged();

    }
}; 
```

# eclipse - 在 Eclipse 中打开 html 时不支持的内容类型

> ID：15063029
> 
> 赞同：9
> 
> 时间：2013-02-25T08:41:48.180
> 
> 标签：eclipse

所有，我发现 Eclipse IDE 中的默认 html 编辑器没有显示概述的结构。[似乎IDE只是将html视为简单文本，所以在我按照https://stackoverflow.com/questions/54868/what-is-the-best-html-editor-for](https://stackoverflow.com/questions/54868/what-is-the-best-html-editor-for-eclipse)的答案安装了网页编辑器插件之后[-eclipse](https://stackoverflow.com/questions/54868/what-is-the-best-html-editor-for-eclipse)成功，当我打开 html 文件时`Web Page Editor`，出现错误：

无法打开编辑器：引发了意外的异常。

```
java.lang.NullPointerException
    at org.eclipse.wst.sse.ui.StructuredTextEditor.createModelDependentFields(StructuredTextEditor.java:1305)
    at org.eclipse.wst.sse.ui.StructuredTextEditor.update(StructuredTextEditor.java:2836)
    at org.eclipse.jst.pagedesigner.editors.HTMLEditor.sash_createAndAddDesignSourcePage(HTMLEditor.java:278)
    at org.eclipse.jst.pagedesigner.editors.HTMLEditor.createPages(HTMLEditor.java:439)
    at org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:357)
    at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:662)
    at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:462)
    at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
    at org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:286)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2857)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2762)
    at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2754)
    at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage.java:2705)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2701)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2685)
    at org.eclipse.ui.actions.OpenWithMenu.openEditor(OpenWithMenu.java:344)
    at org.eclipse.ui.actions.OpenWithMenu$2.handleEvent(OpenWithMenu.java:192)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3910)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3503)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2405)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2369)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2221)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:500)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:493)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:194)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:368)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:559)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:514)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1311)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1287) 
```

并且还弹出一个错误说：

```
Unsupported content type in editor.
To associate file extension with a supported content type,
Please see Content Type Preference Page. 
```

我仍然检查了`Content Type Preference Page`. 以下是设置。请查看它。 ![在此处输入图像描述](../Images/25ca88c82d281e402cba4ca4563d0d84.png)

有没有人遇到过这个问题？谢谢。

# jquery - 使用 Jquery 和 jgestures 在 Cordova 中滑动

> ID：15063030
> 
> 赞同：4
> 
> 时间：2013-02-25T08:41:48.383
> 
> 标签：jquery, swipe-gesture

当谈到使用 jQuery/jQuery 移动时，Stackoverflow 中有很多主题。但是，它们似乎都没有以我想要的方式工作。以下是我的 phonegap 应用程序的索引页面的结构。正如[本](https://stackoverflow.com/questions/10978279/android-phonegap-swipe-type)主题所推荐的，我尝试了 jgestures 插件。

```
<html>
<head>
<title>App</title>
<script type="text/javascript" src="lib/cordova-2.2.0.js"></script>
<script type="text/javascript" src="lib/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="lib/jgestures.js"></script>
</head>
<body>
<div id="home">
    <div id="headersec">
        <!-- some elements like images here-->
    </div>
    <div id="screen1">
        <!-- three 80x80 images go here -->
    </div>
    <div id="screen2">
        <!-- three other 80x80 images go here-->
    </div>
</div>
</body>
</html> 
```

我想在我的 deviceready 活动中做的就是这个

```
document.addEventListener("deviceready",onDeviceReady,false);

function onDeviceReady() {
    $('#screen1').bind('swipeleft',showNext); //show next hides screen1, shows screen2 
    $('#screen2').bind('swiperight',showPrev);//show prev hides screen2, shows screen1
} 
```

但这不适用于我尝试过的任何示例代码。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T00:06:06.603

看起来[这个](https://stackoverflow.com/questions/8982728/deviceready-not-working-in-phonegap-application-how-to)问题有类似的问题。解决方案是这样做：

```
document.addEventListener("deviceready", function(){
    $('#screen1').bind('swipeleft',showNext); //show next hides screen1, shows screen2 
    $('#screen2').bind('swiperight',showPrev);//show prev hides screen2, shows screen1
},false); 
```

或者，您可能只需要`onDeviceReady`在调用事件侦听器之前定义函数。

# c# - 未提交的 sql 语句会发生什么？

> ID：15063031
> 
> 赞同：0
> 
> 时间：2013-02-25T08:41:51.533
> 
> 标签：c#, sql, oracle, transactions

我正在做一个要求我执行一个包，执行 sql 然后提交的语句。

sql的执行决定了它是否成功，我正在检查受影响的sql代码行的数量。如果它不是 1，则提交（单独的命令）永远不会运行。

其他两个命令会发生什么，正如我所说的，我执行了一个执行包的命令，两个命令中的 sql 本身？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:44:28.953

如果没有`COMMIT`or`ROLLBACK`语句，则在会话结束时将回滚工作。

您可以在[交易管理文档中找到一些详细的解释](http://docs.oracle.com/cd/B10501_01/server.920/a96524/c17trans.htm)

**UPDATE** APC 是对的，文档比我更具体：

> 当发生以下任何一种情况时，交易结束：
> 
> 用户发出不带 SAVEPOINT 子句的 COMMIT 或 ROLLBACK 语句。
> 
> 用户运行 DDL 语句，例如 CREATE、DROP、RENAME 或 ALTER。如果当前事务包含任何 DML 语句，Oracle 数据库首先提交事务，然后将 DDL 语句作为新的单语句事务运行并提交。
> 
> 用户断开与 Oracle 数据库的连接。当前事务已提交。
> 
> 用户进程异常终止。当前事务被回滚。
> 
> **注意：**应用程序应始终在程序终止之前显式提交或撤消事务。

所以，我并没有真正回答你的问题。这取决于您的连接器在断开时的作用。

# jquery - 使用 jquery 从下拉列表中检索值到文本框

> ID：15063033
> 
> 赞同：2
> 
> 时间：2013-02-25T08:41:57.403
> 
> 标签：jquery, html

这里我试图根据用户从下拉列表中选择值来更改文本框的值，但是下拉列表中选择的值没有在文本框上更新..请帮助我。

这是我的代码。

```
<script type="text/javascript" src="resources/javascripts/jquery-1.8.3.js"></script>
<script type="text/javascript">  
     $(document).ready(function() {                                       
        $("#name").live("change", function() {
          $("#firstname").val($(this).find("option:selected").attr("value"));
        })
     });                                     
</script>

<select id="name" name="name"> 
<option value="">Please select...</option> 
<option value="Elvis">India</option> 
<option value="Frank">Us</option> 
<option value="Jim">China</option> 
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:43:38.427

这个适用于我的..

```
<html>
<head>
<script type="text/javascript" src="resources/javascripts/jquery-1.8.3.js"></script>
<script type="text/javascript">  
     $(document).ready(function() {                                       
        $("#name").live("change", function() {
          $("#firstname").val($(this).find("option:selected").attr("value"));
        });
     });                                     
</script>

<script type="text/javascript">
</script>
</head>
<body>
<div>
<select id="name" name="name"> 
<option value="">Please select...</option> 
<option value="Elvis">India</option> 
<option value="Frank">Us</option> 
<option value="Jim">China</option> 
</select><br />
<input type="text" id="firstname" name="firstname" value="" readonly="readonly">
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:47:09.957

**要检索选定的值：**

```
$("#name").change(function() {
      $("#firstname").val($(this).val());
}); 
```

**要检索选定的文本：**

```
$("#name").change(function() {
      $("#firstname").val($(this).find('option:selected').text());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:48:44.033

你缺少一个文本框，你不应该使用`live()`. （在较新版本的 jquery 中显然缺少它）

```
<script type="text/javascript" src="resources/javascripts/jquery-1.8.3.js"></script>
<script type="text/javascript">  
     $(document).ready(function() {                                       
        $("#name").on("change", function() {
          $("#firstname").val($(this).find("option:selected").attr("value"));
        })
     });                                     
</script>
<input id=firstname type=text>
<select id="name" name="name"> 
<option value="">Please select...</option> 
<option value="Elvis">India</option> 
<option value="Frank">Us</option> 
<option value="Jim">China</option> 
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:59:17.223

```
<select id="name" name="name"> 
<option value="">Please select...</option> 
<option value="India">India</option> 
<option value="Us">Us</option> 
<option value="China">China</option> 
```

在两个地方输入相同的值

我觉得这就是你想要的

请检查这里

```
http://jsfiddle.net/francisstalin/wnyKq/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T08:53:32.953

除了就绪函数中缺少分号外，您的代码没有问题

```
 $(document).ready(function() {                                       
        $("#name").live("change", function() {
          $("#firstname").val($(this).find("option:selected").attr("value"));
        });
     }); 
```

这行得通！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T08:43:58.170

`.val()`用于获取当前元素（dom）值。[看更多](http://api.jquery.com/val/)

`.attr()`用于获取 element(dom) 的某个属性的值。[看更多](http://api.jquery.com/attr/)

```
$("#name").on("change", function() {
      $("#firstname").attr('value',$(this).val());
}); 
```

更改`.live`为，`.on`因为 .live 已被弃用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T08:45:43.603

尝试这个：

```
$("#firstname").val($('select[name="name"]').val()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-25T08:46:46.560

而不是现场使用更改功能：

```
 <script type="text/javascript">  
    $(document).ready(function() {
       $("#button").click(function() {
           $("#firstname").val($("#name").val());
       });
    });                                     
</script>

<input type="text" name="firstname" id="firstname"/>

<select id="name" name="name"> 
   <option value="">Please select...</option> 
   <option value="Elvis">India</option> 
   <option value="Frank">Us</option> 
   <option value="Jim">China</option> 
</select>

<input type="button" name="button" id="button" value="button" /> 
```

这将在文本框中设置选定的值。测试代码。

# c# - 没有在另一台电脑上运行窗口应用程序的 exe 文件

> ID：15063034
> 
> 赞同：-4
> 
> 时间：2013-02-25T08:42:02.587
> 
> 标签：c#

我在我的电脑上开发了一个 x86 的 Windows 应用程序。当我在 x64 的另一台 PC 上运行项目的 exe 时，不会执行 exe 文件。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:44:45.160

1）尝试将平台设置为“任何CPU”

2) 为 x64 编译一个单独的 EXE

# android - 在我自己看来，我应该在哪里取消注册接收器？

> ID：15063039
> 
> 赞同：0
> 
> 时间：2013-02-25T08:42:23.860
> 
> 标签：android, broadcastreceiver, android-custom-view

我的观点必须`registerReceiver`采取`ACTION_TIME_TICK`行动，但我不知道应该在哪里取消注册。

如果我不这样做，我将有泄漏。

以下是一些相关代码：

```
public class TimeIndicator extends ViewSwitcher {

    private void build(final Context context) {

        this.addView(View.inflate(context, R.layout.time_indicator, null));

        IntentFilter filter = new IntentFilter();
        filter.addAction(Intent.ACTION_TIME_TICK);
        context.registerReceiver(this.receiver, filter);
    }

    public final BroadcastReceiver receiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            Log.i("onReceive", intent.getAction());
        }
    };
} 
```

在我自己看来，我应该在哪里取消注册接收器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-21T08:08:50.973

```
@Override
protected void onDetachedFromWindow() {
    super.onDetachedFromWindow();
    //add your code.
    getContext().unregisterReceiver(mReceiver);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:23:57.993

这不是一个好的行为，您的视图不代表上下文（没有明确的生命周期，也没有生命周期回调方法 -onPause, onCreate .... - ）

因此，您应该做的是在您的视图所属的第一个父上下文对象中注册该接收器。如果它是活动的片段。

然后您可以在`onCreate()`父级的 : 处注册接收器。并在您不想再接收更新或在`onStop()`

# c# - 错误无法解析程序集 MediaCapture

> ID：15063040
> 
> 赞同：0
> 
> 时间：2013-02-25T08:42:26.647
> 
> 标签：c#, windows, windows-runtime, ms-media-foundation

我已经制作了这个[Microsoft 示例](http://msdn.microsoft.com/en-us/library/vstudio/jj872764.aspx)。C++ 库已成功编译。当我编译应用程序 Windows RunTime 时，问题就开始了。我有下一个错误：

```
Error   1   Cannot resolve Assembly or Windows Metadata file 'Windows.Media.winmd'  C:\...\MediaCapture.csproj  MediaCapture 
```

有什么问题？这是微软的官方示例，应该可以正常运行。

# magento - 将magento从子域移动到子文件夹后，我的帐户并登录重定向错误

> ID：15063041
> 
> 赞同：0
> 
> 时间：2013-02-25T08:42:30.907
> 
> 标签：magento

将 magento 安装从 mysubdomain.mydomain.com 移动到 www.mydomain.com/magento 后，客户帐户链接将重定向到 www.mydomain.com/customer/account 而不是 www.mydomain.com/magento/customer/account。其他一切都很好，但是这些链接不起作用。有没有办法在不完全重新安装的情况下更改这些链接？不起作用的链接是我的帐户，登录，注册。令人惊讶的是，注销按钮工作得很好。这是我的网上商店[http://www.ivankamoda.hr/webshop/](http://www.ivankamoda.hr/webshop/)。我已经在网上搜索了两天，但我没有找到任何可以解决我的问题的东西。我希望这里有人会知道答案。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:40:07.250

首先，我可以确认更改域后不需要重新安装magento。您的问题可能是由模板设计器硬编码链接引起的。

这是我更改域的步骤：

1.  更新 core_config_data 表中的 unsecure_url、secure_url。
2.  清除所有缓存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:42:09.507

您网站的 url 应在“core_config_data”表中存储两次。将其更改为新路径，它应该可以正常工作。

# android - 在库项目中膨胀 ListView 时出现 Nullpointer 异常

> ID：15063042
> 
> 赞同：0
> 
> 时间：2013-02-25T08:42:30.890
> 
> 标签：android

目前我正在开发一个供我自己使用的库。我在这个库中的类被称为`BaseWindow`，我的库项目也将该`SlidingMenu`项目作为库包含在内。`NullPointerException`当我尝试`listView`从我的布局文件夹中获取一个时，我得到一个。我的班级是这样构造的：

```
public class BaseWindow extends SlidingFragmentActivity {

    private String windowTitle; 
    private int menuResourceId;

    /**
     * @param layoutResourceId identificator of the layout to inflate(R.layout.your_layout)
     * @param menuResourceId identification of the menu to inflate(R.layout.your_menu)
     * @param windowTitle title of this window
     */
    public void InitializeWindow(int layoutResourceId, int menuResourceId, String windowTitle)  {

     ...........
     ListView lv = (ListView)findViewById(R.id.menu_listview); 

    }   

} 
```

我知道这样的事情应该用一种`onCreate`方法来完成。但是有可能像我一样在外面这样做吗？当我将鼠标指针放在该`findViewById`方法上时，它实际上确实引用了我的超类中的方法

```
View com.slidingmenu.lib.app.SlidingFragmentActivity.findViewById(int id) 
```

该类`SlidingFragmentActivity`扩展了 `SherlockFragmentActivity`

有人知道导致问题的原因吗？我的就是我的`lv`对象。空值？如何从这个库类中获取正确的 ListView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:49:38.097

您应该先膨胀一个包含以下内容的 xml `menu_listview`：

```
LayoutInflater inflater = LayoutInflater.from(context);

View view = inflater.inflate(R.layout.xml_containing_listview);

ListView lv = (ListView) view.findViewById(R.id.menu_listview); 
```

这只是概念，我没有对此进行测试，所以它可能不起作用。您还需要有一个上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:52:42.763

in的`setContentView()`方法很重要，因为它用于扩展布局并在对象中收集其视图和资源。但是，虽然创建一个单独的类并直接使用 id 不会使您的布局膨胀，所以有 3 种方法可以做到这一点`onCreate``activity`

1) 将列表视图直接传递给非活动方法的方法

2）膨胀布局

```
LayoutInflater inflater = LayoutInflater.from(context);
View externalView = inflater.inflate(R.layout.your_layout_containing_listview);
ListView listView = (ListView) externalView .findViewById(R.id.menu_listview); 
```

3）直接膨胀布局并使用它

```
LayoutInflater mInflater= (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View externalView = mInflater.inflate(R.layout.your_layout_containing_listview, null);
 ListView listView = (ListView) externalView .findViewById(R.id.menu_listview); 
```

选择最适合您的代码的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:54:42.597

可能有几个原因：

1.  `InitializeWindow()`之前被调用`setContentView()`，Activity 还没有布局。

2.  Id`menu_listview`不存在于`R.layout.***`Activity 膨胀的布局中。

3.  您指`R`的是错误的包（应用程序与库）。

# networking - 使用远程机器 IP 地址获取远程机器的 IP 地址

> ID：15063046
> 
> 赞同：0
> 
> 时间：2013-02-25T08:43:00.920
> 
> 标签：networking, ip, remote-access

如果您只有远程计算机的 IP 地址，是否可以获得远程计算机连接的 IP 地址列表。您没有任何其他详细信息，没有用户名或密码。

（我 99% 确定这是不可能的，但我想要确认。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:44:22.210

不，但是如果您可以在远程机器上实现 RMI，您可以这样做。无论如何，它是断章取义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:31:37.293

您可以通过在远程计算机所在的同一子网上捕获所有 ARP 广播数据包来收集此信息。

1.  远程机器想要解析的所有 IP 地址都是远程机器想要连接的 IP 地址。
2.  所有想要解析远程机器IP地址的主机都是想要连接到远程机器的主机。

# iphone - 如何在 iPhone 的 tableview 的不同行中获取相同的元素和属性值

> ID：15063049
> 
> 赞同：-1
> 
> 时间：2013-02-25T08:43:17.063
> 
> 标签：iphone, objective-c

我知道如何做到这一点，但我的元素名称是相同的 prakesh 并且所有属性名称也相同所以如何获取 prakesh 元素属性值`tableview`请解释我：

```
<?xml version="1.0" encoding="UTF-8"?>
    <prakesh ConfigVersion="1">
        <prakesh ProductId="{ec8e531b-6873-4819-8ade-501f6dc6ff42}" ProductVersion="1.0" ProductLogo="" ProductName="4x6_Glossy" ProductRefImage="4x6_Glossy.png" CustomerType="1" Dpi="300" Unit="0" CoverType="1" CoverWidth="16.5" CoverHeight="12" CoverTopMargin="0.3" CoverBottomMargin="0.3" CoverLeftMargin="0.3" CoverRightMargin="0.3" PageWidth="4" PageHeight="6" PageTopMargin="0.3" PageBottomMargin="0.3" PageLeftMargin="0.3" PageRightMargin="0.3" Comments="4 x 6 Inches" BasePrice="10" PricePerPage="0" BasePriceWithDesign="0" PricePerPageWithDesign="0" FixQuantity="0" Finish="Glossy" ServiceName="Photoprints"/>
        <prakesh ProductId="{6e5b2453-f0e2-43c8-a7d6-1900346b9f83}" ProductVersion="1.0" ProductLogo="" ProductName="4x6_Matt" ProductRefImage="4x6_Matt.png" CustomerType="1" Dpi="300" Unit="0" CoverType="1" CoverWidth="16.5" CoverHeight="12" CoverTopMargin="0.3" CoverBottomMargin="0.3" CoverLeftMargin="0.3" CoverRightMargin="0.3" PageWidth="4" PageHeight="6" PageTopMargin="0.3" PageBottomMargin="0.3" PageLeftMargin="0.3" PageRightMargin="0.3" Comments="4 x 6 Inches" BasePrice="10" PricePerPage="0" BasePriceWithDesign="0" PricePerPageWithDesign="0" FixQuantity="0" Finish="Matt" ServiceName="Photoprints"/>
</prakesh> 
```

并做到了这一点，但我只得到了第一个 prakesh productid 和所有。如何获得第二个？这是我的代码：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    NSLog(@"Name:%@",elementName);
    _forecastInfo.ProductId = [attributeDict objectForKey:@"ProductId"];
    _forecastInfo.ProductName = [attributeDict objectForKey:@"ProductName"];
    _forecastInfo.ProductRefImage=[attributeDict objectForKey:@"ProductRefImage"];
    _forecastInfo.CustomerType=[attributeDict objectForKey:@"CustomerType"];
    _forecastInfo.Dpi=[attributeDict objectForKey:@"Dpi"];
    _forecastInfo.Unit=[attributeDict objectForKey:@"Unit"];
    _forecastInfo.CoverType=[attributeDict objectForKey:@"CoverType"];
    _forecastInfo.CoverWidth=[attributeDict objectForKey:@"CoverWidth"];
     _forecastInfo.CoverHeight=[attributeDict objectForKey:@"CoverHeight"];

    if(_forecastInfo.ProductId||_forecastInfo.ProductName||_forecastInfo.ProductRefImage||_forecastInfo.CustomerType||_forecastInfo.Dpi|| _forecastInfo.Unit||_forecastInfo.CoverType||_forecastInfo.CoverWidth||_forecastInfo.CoverHeight)
    {
        //[productIdArray addObject:productId];
        [parser abortParsing];
        NSLog(@"%@",[_forecastInfo description]);
        if(delegate)
            [delegate forecastInfoParser:self parsed:_forecastInfo];
        [_forecastInfo release];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:04:29.057

请执行下列操作：

*   创建一个globle `NSMutableArray`（让我们命名它`dataArray`）
*   现在像这样启动它

    > dataArray = [[NSMutableArray alloc] init]; //（如果您使用的是非 ARC 环境，请释放它。）

*   现在在你的方法中：

    ```
    -(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *) attributeDict
     {
         NSLog(@"Name:%@",elementName);
         _forecastInfo.ProductId = [attributeDict objectForKey:@"ProductId"];
         _forecastInfo.ProductName = [attributeDict objectForKey:@"ProductName"];
         _forecastInfo.ProductRefImage=[attributeDict objectForKey:@"ProductRefImage"];
         _forecastInfo.CustomerType=[attributeDict objectForKey:@"CustomerType"];
         _forecastInfo.Dpi=[attributeDict objectForKey:@"Dpi"];
         _forecastInfo.Unit=[attributeDict objectForKey:@"Unit"];
         _forecastInfo.CoverType=[attributeDict objectForKey:@"CoverType"];
         _forecastInfo.CoverWidth=[attributeDict objectForKey:@"CoverWidth"];
         _forecastInfo.CoverHeight=[attributeDict objectForKey:@"CoverHeight"];
         if(_forecastInfo.ProductId||_forecastInfo.ProductName||_forecastInfo.ProductRefImage||_forecastInfo.CustomerType||_forecastInfo.Dpi|| _forecastInfo.Unit||_forecastInfo.CoverType||_forecastInfo.CoverWidth||_forecastInfo.CoverHeight)
         {
             //[productIdArray addObject:productId];
             //[parser abortParsing];
            [dataArray addObject:[_forecastInfo copy]];
             NSLog(@"%@",[_forecastInfo description]);
            if(delegate)
                [delegate forecastInfoParser:self parsed:_forecastInfo];
            [_forecastInfo release];
         }
    }

    - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
        if ([elementName isEqual:@"prakesh"]){
            [parser abortParsing];
        }
    } 
    ```

*   `tableView`现在在使用中填充数据`dataArray`。

# c++ - LoadLibrary() 相对于 dll 的地址

> ID：15063058
> 
> 赞同：3
> 
> 时间：2013-02-25T08:44:00.027
> 
> 标签：c++, windows, visual-studio-2010, winapi, dll

我正在尝试在 Windows 的代码中加载 dll，我使用 LoadLibrary() 函数成功加载了我的 dll，但我有一个问题，我给出了我的 dll 的路径，例如：

```
LoadLibrary(C:\\path\\to\\my\\dll); 
```

我想知道是否可以提供我的 dll 的相对路径。我的意思是例如：

```
LoadLibrary(.\my dll directory\my dll.dll) 
```

是否可以？如果没有，我如何开发我的项目，它可以在不改变不同机器中的 dll 路径的情况下移植？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T09:00:49.837

它很可能会失败，因为您在第二次调用 LoadLibrary 时忘记转义反斜杠。写你的问题时，也许这是一个错字，因为你也忘记了文件名的引号。;) 也就是说，改变这一行：

```
LoadLibrary(.\my dll directory\my dll.dll); 
```

要这样：

```
LoadLibrary(L".\\my dll directory\\my dll.dll"); 
```

（而且我不确定是否`.\\`需要领先）

如果那不能解决它，那么这很可能会满足您的需要：

```
wchar_t szFullPath[MAX_PATH] = {};
GetCurrentDirectory(MAX_PATH, szFullPath);
PathCchAppend(szFullPath, MAX_PATH, L"my dll directory\\my dll.dll");
HMODULE hDLL = LoadLibrary(szFullPath); 
```

最后，LoadLibrary 具有不同的搜索依赖 DLL 的行为。它会根据您指定路径的方式而有所不同。这可能会影响您从相对搜索路径加载 DLL 的能力。[阅读上面的 MSDN 页面，](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)并考虑查看各种选项调用，例如[LoadLibraryEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684179%28v=vs.85%29.aspx)和[SetDllDirectory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686203%28v=vs.85%29.aspx)可以使搜索路径更易于处理。[这个页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)也是关于 DLL 搜索路径的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:22:36.030

首先，我假设您打算写：

```
LoadLibrary(".\\my dll directory\\my dll.dll"); 
```

该[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms684175.aspx)回答了您的问题：

> 如果指定了相对路径，则整个相对路径将附加到 DLL 搜索路径列表中的每个标记。要从相对路径加载模块而不搜索任何其他路径，请使用 GetFullPathName 获取非相对路径并使用非相对路径调用 LoadLibrary。

所以是的，你可以指定一个相对路径。但它的解释方式可能不是你所期望的。DLL 搜索将依次获取 DLL 搜索路径中的每个路径，将其与您的相对路径结合，并尝试加载该 DLL。

因此，如果您希望您的相对路径相对于当前工作目录，请调用`GetFullPathName`以将其扩展为绝对路径，然后加载它。如果您希望相对于某个其他目录解释您的相对路径，请结合该目录并使用绝对路径加载 DLL。

# android - Android GCM 获取注册用户 Google 帐户凭据

> ID：15063059
> 
> 赞同：1
> 
> 时间：2013-02-25T08:44:00.340
> 
> 标签：android, google-cloud-messaging

在我的应用程序中，我已成功集成 GCM api 来注册用户设备并将通知从 web 服务发送到移动设备。我想知道是否可以在注册过程中为用户获取 Google 帐户凭据。即：如果用户有多个与设备同步的 Google 帐户，那么我想确定在这种情况下哪个帐户用于获取 GCM 用户 ID。有没有办法确定这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:06:31.643

GCM 使用主帐户 - 您使用设备设置的第一个帐户。但您无法确定 GCM 的关闭代码。

# php - 根据 sum(value) 设置字段

> ID：15063074
> 
> 赞同：-1
> 
> 时间：2013-02-25T08:44:50.987
> 
> 标签：php, mysql

为含糊的标题道歉

鉴于以下数据..

```
 +------+------------+--------+
  |  ID  |  value     | used   |
  +------+------------+--------+
  | 1001 |    1       |   0    |
  +------+------------+--------+
  | 1002 |    1       |   0    |
  +------+------------+--------+
  | 1003 |    2       |   0    |
  +------+------------+--------+
  | 1004 |    4       |   0    |
  +------+------------+--------+
  | 1005 |    1       |   0    |
  +------+------------+--------+
  | 1006 |    1       |   0    |
  +------+------------+--------+
  | 1007 |    1       |   0    |
  +------+------------+--------+
  | 1008 |    6       |   0    |
  +------+------------+--------+ 
```

我想设置 8 的总和值，所以结果将是....

```
 +------+------------+--------+
  |  ID  |  value     | used   |
  +------+------------+--------+
  | 1001 |    1       |   1    |
  +------+------------+--------+
  | 1002 |    1       |   1    |
  +------+------------+--------+
  | 1003 |    2       |   1    |
  +------+------------+--------+
  | 1004 |    4       |   1    |
  +------+------------+--------+
  | 1005 |    1       |   0    |
  +------+------------+--------+
  | 1006 |    1       |   0    |
  +------+------------+--------+
  | 1007 |    1       |   0    |
  +------+------------+--------+
  | 1008 |    6       |   0    |
  +------+------------+--------+ 
```

我会这样做，通过每个项目将其添加到总价值，类似于这个

```
 $goal = 8;
  $select = "SELECT ID, value FROM table WHERE !used";
  $result = mysql_query($select);
  while ($row = mysql_fetch_array($result))
     {
     $total = $total + $row['value'];
     if ($total => $goal) 
         { 
         $over = $goal - $total
         if ($over)
            {
            $id = $row['id'];
            mysql_query("INSERT INTO table(value,used) VALUES('$over',0)");         
            mysql_query("update table SET used = 1 WHERE id = '$id'")                 
            }  
          break;
         }
     $id = $row['id'];
     mysql_query("update table SET used = 1 WHERE id = '$id'")  
     } 
```

所以，很丑。更好的方法的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:02:58.830

试一试：

```
 $goal = 8;
      $used = Array()
      $select = "SELECT ID, value FROM table WHERE !used";
      $result = mysql_query($select);
      while ($row = mysql_fetch_array($result))
         {
         $total = $total + $row['value'];
         $used[] = $row['ID'];
         // Check for exact march
         if ($total == $goal) {
             // Loop through all used ID's to get an exact match
             foreach($used as $usedId) {
                mysql_query("update table SET used = 1 WHERE id = " . $usedId);                 
             }
             break;
         } elseif ($total > $goal) { // If over then insert as a new record
             $leftOver = $total - $goal;
             mysql_query("INSERT INTO table(value,used) VALUES($leftOver, 0)");         
             break;
         }
      } 
```

这没有回答的是，如果总数低于您的目标 - 那么会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:24:02.447

试试这个查询 -

```
SELECT t1.ID, t1.value, IF(SUM(t2.value) > 8, 0, 1) used FROM used t1
  JOIN used t2
    ON t1.ID >= t2.ID
  GROUP BY t1.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:40:07.607

首先，您不应该使用旧的和不推荐使用的`mysql_*`功能。使用`MySQLi`或`PDO`代替。

```
$goal=13;
$cache=0;
$idCache=0;
$result=$mysqli->query("SELECT id,value FROM [table] WHERE used=0 ORDER BY id ASC");
while($row=$result->fetch_assoc())
{
    $idCache=intval($row["id"]);
    $cache+=intval($row["value"]);
    if($cache>=$goal) break;
}
$result->free();
$stmt=$mysqli->prepare("UPDATE [table] SET used=1 WHERE used=0 AND id<=?");
$stmt->bind_param("i",$idCache);
$stmt->execute();
$stmt->close();
if($cache>$goal)
{
    $stmt=$mysqli->prepare("INSERT INTO [table] (value,used) VALUES (?,0)";
    $cache=$goal-$cache;
    $stmt->bind_param("i",$cache);
    $stmt->execute();
    $stmt->close();
} 
```

解释：

1.  从您的演示数据中，我假设您想要获取按 id 升序排序的数据，所以我用一个`ORDER BY`子句查询它们；

    （`$mysqli->query`部分）

2.  将结果相加，`$cache`直到它不小于`$goal`;

    （`while`部分）

3.  由于我们以 id-ascending 顺序获取值，因此我们可以安全地标记所有不大于我们“使用”的最后一行的 ID；

    （`$mysqli->prepare`前`if`块）

4.  如果总和大于目标，我们会将“溢出”值添加回表中，并`used`标记为`0`，正如您在代码中所暗示的那样。

    （`if`块）

请注意，上面的代码没有考虑“如果没有足够的值来总结`$goal`”的情况。如果它可能是一个真实的案例，你将不得不处理它。

# c++ - 仅清除部分控制台输出

> ID：15063076
> 
> 赞同：4
> 
> 时间：2013-02-25T08:44:56.930
> 
> 标签：c++, windows, visual-c++, console, output

**我想做的事：**

光标最初在屏幕的左上角闪烁：

> 剩余 160 个字符
> _

当我按“i”时：

> 剩余 159 个字符
> 
> 一世

当我按'a'时：

> 剩余 158 个字符
> 
> 我

当我按“m”时：

> 剩余 157 个字符
> 
> 我是

等等。

**需要做什么（根据我）：**

1.  只需要清除屏幕的前三个字符。
2.  更新屏幕上新按下的键

**我试过的：**

我试图清除整个屏幕并将之前的所有内容写回它。

**为什么我对我所做的不满意：**

因为它给人一种生涩的外观。而且入口并不顺利。

**我需要你帮助我：**

某些内置功能或其他技术仅清除部分屏幕。

**我的规格：**

视窗 XP SP 3

IDE：Visual C++ 2010 Express

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T09:05:51.630

首先要理解的是，C++ 没有屏幕的概念，作为语言的标准部分。标准输出可能是文件，打印机和 cout 不知道区别。

然而，屏幕“设备”本身通常更智能一些，并且可以识别一些命令。其中应用最广泛的是 '\r' - 回车和 '\n' - 换行。'\r' 将光标移动到行首，'\n' 前进到下一行，但这不符合您的需求，因为您已经尝试过。

似乎这里唯一的前进方式是使用curses（其中ncurses只是一种实现，尽管Linux中的标准实现）。它为您提供了一个虚拟屏幕，其中包含用于更新它们的各种命令。然后它只采用更改的部分，并以优化的方式更新终端。

这只是使用 ncurses 的典型 C 程序的一个示例，值得一看：

```
#include <ncurses.h>

int main()
{   
    int ch;

    initscr();              /* Start curses mode        */
    raw();                  /* Line buffering disabled  */
    keypad(stdscr, TRUE);   /* We get F1, F2 etc..      */
    noecho();               /* Don't echo() while we do getch */

    printw("Type any character to see it in bold\n");
    ch = getch();           /* If raw() hadn't been called
                             * we have to press enter before it
                             * gets to the program      */

    printw("The pressed key is ");
    attron(A_BOLD);
    printw("%c", ch);
    attroff(A_BOLD);

    refresh();          /* Print it on to the real screen */
    getch();            /* Wait for user input */
    endwin();           /* End curses mode        */

    return 0;
} 
```

printw() 函数写入“虚构”屏幕。它将内容放入缓冲区并更新一些标志并进行其他一些内部 ncurses 簿记。它实际上不会向您的真实屏幕（控制台窗口）写入任何内容。

您可以根据需要编写尽可能多的 printw() ，但是这些内容不会显示在真实屏幕上，直到您的程序执行其他操作以使“虚构的”屏幕缓冲区内容进入真实屏幕。

导致从 printw() 缓冲区更新真实屏幕的一件事是 refresh() （正如上面的源代码示例所做的那样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:30:11.940

`Win32`控制台不支持转义序列。您可以使用[控制台 API](http://msdn.microsoft.com/en-us/library/ms682087%28v=vs.85%29.aspx)。

从控制台清除 (0, 0) 的前 3 个字符的小示例

```
#include <windows.h>

int main()
{
   HANDLE hOutput = ::GetStdHandle(STD_OUTPUT_HANDLE);

   COORD coord = {0,0};
   ::SetConsoleCursorPosition(hOutput, coord);

   char buff[] = "   ";
   ::WriteConsoleA(hOutput, buff, 3, NULL, NULL);

   return 0;
} 
```

如果您不喜欢`Console API`并希望使用`ncurses`模拟，请参见[此处](https://stackoverflow.com/questions/138153/is-ncurses-available-for-windows)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T09:14:15.960

如果要管理完整的屏幕，`curses`是要走的路。否则，您只需使用转义序列就可以做很多事情；例如，参见[http://en.wikipedia.org/wiki/ANSI_escape_code 。](http://en.wikipedia.org/wiki/ANSI_escape_code)（从历史上看，这样的序列从一个终端到另一个终端是不同的，curses 最初是一种解决这个问题的方法。今天，ANSI 转义码对于窗口系统下的控制台窗口非常普遍，被 Windows 控制台窗口和 xterm 使用.)

除了封装实际序列外，还`curses` 支持面向字符的输入，无论有无回显。这在没有诅咒的情况下更难做到，而且仍然非常不便携。

# iphone - 如何从另一个视图控制器访问视图控制器的属性？苹果手机

> ID：15063078
> 
> 赞同：1
> 
> 时间：2013-02-25T08:45:00.923
> 
> 标签：iphone, properties, uiviewcontroller

我在视图控制器 A 中定义了一个属性

```
 @property (nonatomic) BOOL updateOnServer; 
```

并合成它，给它赋值，然后我尝试从另一个视图控制器 B 访问这个变量，就像这样

```
 A * view = [[A alloc] init];

  if (view.updateOnServer) 
```

但它不起作用。updateOnServer 始终为“否”。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:47:18.990

您`updateOnServer`在 viewControllerA 中设置，并在 viewControllerB 中创建一个`updateOnServer`您没有设置任何内容的新实例。所以它采用BOOL的默认值，即NO。

请[在这里](https://stackoverflow.com/questions/658697/how-can-i-access-variables-from-another-class)寻找可能的解决方案。

你有很多方法可以做：使变量成为全局变量、静态变量、单例变量、作为参数传递、作为通知发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T08:58:34.547

NSUserDefaults 是一种保存和检索变量信息的简单方法，虽然有时不受欢迎。
使用 NSUserDefaults 查看[链接](http://mobile.tutsplus.com/tutorials/iphone/nsuserdefaults_iphone-sdk/)了解如何使用 NSUserDefaults。或者您可以声明全局变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T09:27:26.970

您始终可以使用单例类，如下所示：

创建一个新类，如下所示：

```
ServerCheck.h

#import <Foundation/Foundation.h>

@interface ServerCheck : NSObject
{
    BOOL updateOnServer;
}
@property (nonatomic) BOOL updateOnServer;

+ (id)sharedSingletonController;
@end

ServerCheck.m

#import "ServerCheck.h"

@implementation ServerCheck
@synthesize updateOnServer
+(ServerCheck*)sharedSingletonController{

    static ServerCheck *sharedSingletonController;

    @synchronized(self) {
        if(!sharedSingletonController){
            sharedSingletonController = [[ServerCheck alloc]init];
        }
    }

    return sharedSingletonController;
}

-(id)init{
    self = [super init];
    if (self != nil) {

        }
    return self;
}

@end 
```

您可以按如下方式访问 BOOL 值：

```
ServerCheck *serverData = [ServerCheck sharedSingletonController];
serverData.updateOnServer = YES; 
```

# emacs - speedbar - 如何修复基本目录（不随着缓冲区切换而改变）

> ID：15063081
> 
> 赞同：7
> 
> 时间：2013-02-25T08:45:09.750
> 
> 标签：emacs, emacs-speedbar

使用speedbar一段时间后，我发现它会根据当前显示的缓冲区更改基本目录。

如何禁用它？我只是希望速度条在切换到另一个缓冲区时什么都不做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T18:46:08.500

这个有可能。将此添加到您的 .emacs 文件中：

```
(set 'speedbar-update-flag nil) 
```

您还可以切换更新

```
M-x speedbar-toggle-updates 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-25T09:06:44.167

我认为这种行为在普通的 Speedbar 中是不可能的（在查看变量、函数和自定义窗口之后）。

但是，如果您查看[SrSpeedbar](http://www.emacswiki.org/emacs/SrSpeedbar)包，我会看到一个选项：“sr-speedbar-refresh-turn-off”。一旦调用，它应该禁用刷新；坚持它在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-26T03:09:04.427

除了正确的@PascalVKooten 答案之外，当您在速度条树中导航时还有一个烦人的问题：您丢失了开始目录。以下代码有助于使用快速栏框架中的“h”键返回初始目录：

```
 (setq var_start-path default-directory)

  (define-key speedbar-file-key-map (kbd "h")
                  (lambda() (interactive)
                    (when (and (not (equal var_start-path
                                           sr-speedbar-last-refresh-dictionary))
                               (not (sr-speedbar-window-p)))
                      (setq sr-speedbar-last-refresh-dictionary var_start-path))
                    (setq default-directory var_start-path)
                    (speedbar-refresh))
                  ) 
```

此代码是从[projectile-speedbar](https://github.com/anshulverma/projectile-speedbar/blob/master/projectile-speedbar.el)包代码中提取的。这个包很有趣，但对我不起作用。

# variables - Google Analytics - 跟踪应用程序 ID

> ID：15063082
> 
> 赞同：0
> 
> 时间：2013-02-25T08:45:16.550
> 
> 标签：variables, google-analytics, analytics, tracking

我的网站上有一个申请表，成功完成后，数据将添加到数据库中，并为每个应用程序提供一个唯一的 applicationId。我想在 Google Analytics 中跟踪这个 applicationId，所以尝试在申请表的最后一步添加一个自定义变量，将 applicationId 作为值传递，但它似乎没有准确跟踪。自定义变量是最好的方法吗？

这是我的分析：

```
<script type="text/javascript"> var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www."); document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E")); </script>

<script type="text/javascript"> try { var pageTracker =
_gat._getTracker("UA-xxxxxxx-x");
    pageTracker._setDomainName('xx.co.uk'); 
<?php if($_SESSION['application'] && $_SESSION['application']->getStage() == 8){
    echo 'pageTracker._setCustomVar(3, "applicationId", "'.$_SESSION['application']->applicationId.'");'; 
}?>

    pageTracker._trackPageview(); 
} catch(err) {}</script> 
```

# c - g_slice_alloc 中的段错误

> ID：15063085
> 
> 赞同：1
> 
> 时间：2013-02-25T08:45:31.093
> 
> 标签：c, segmentation-fault, glib, gstring

我正在使用以下几行调用一个函数：

```
void call_system_command(const char *command_params)
{
    GString *cmd = g_string_sized_new(1024);
    g_string_append_printf(cmd, "/bin/bash /path/to/my/script '%s'", command_params);
    system(cmd->str);
    g_string_free(cmd, TRUE);
} 
```

我在 g_string_sized_new 的行中遇到了段错误。来自 gdb 的回溯显示：

```
(gdb) bt
#0  0x000000320ce56264 in g_slice_alloc () from /lib64/libglib-2.0.so.0
#1  0x000000320ce5c3db in g_string_sized_new () from /lib64/libglib-2.0.so.0
.... 
```

我曾尝试导出 G_SLICE=always-malloc，以便使用 malloc 代替 glib 自己的分配器。但是问题仍然相同。我仍然在 g_slice_alloc 中遇到段错误。我也从多个线程调用这个函数'call_system_command'。这会是个问题吗？

该函数是 cron 每 15 分钟调用一次的插件的一部分。段错误不是每次执行插件时都会发生，而是每 3-4 天发生一次。

有关进一步调试的任何指示都会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:13:39.373

你的`pthread_join`陈述在哪里？您的 main 函数实际上可以在您的线程函数返回之前完成 - 这可能会破坏线程对象本身。据我所知`pthread_exit`，应该*只*在生成的线程中使用，而不是在主线程中[使用](http://man7.org/linux/man-pages/man3/pthread_exit.3.html)（[http://cs.gmu.edu/~white/CS571/Examples/pthread_examples.html，http://man7.org](http://cs.gmu.edu/~white/CS571/Examples/pthread_examples.html) [/linux/man-pages/man3/pthread_exit.3.html](http://man7.org/linux/man-pages/man3/pthread_exit.3.html)）所以您的演示（可能）不是最佳的，并且可能包含与您的程序相同的问题原因。

您是否尝试手动`malloc`使用相同大小的一堆内存并使用 valgrind 和 gdb 再次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:36:08.097

我发现了问题。编写了以下测试程序来确定问题。

```
#include <stdio.h>
#include <glib.h>
#include <pthread.h>

#pragma GCC optimize("O0")

#define NUM 20
void* run(void *d)
{
    int i;
    for (i = 0; i < 1000000; i++) {
        GString *str = g_string_sized_new(1024);
        g_string_append_printf(str, "%s", "hello hello\n");
        fprintf(stdout, "%s", str->str);
        g_string_free(str, TRUE);
    }
    pthread_exit(NULL);
}

int main()
{
    pthread_t threads[NUM];
    int j;
    for (j = 0; j < NUM; j++) {
        pthread_create(&threads[j], NULL, run, (void*) NULL);
    }
    pthread_exit(NULL);

    return 0;
} 
```

以下段错误始终发生

程序收到信号 SIGSEGV，分段错误。[切换到线程 0x7fffecdfa700 (LWP 11277)] 0x000000320ce56257 in g_slice_alloc () from /lib64/libglib-2.0.so.0 缺少单独的调试信息，使用：debuginfo-install glib2-2.22.5-6.el6.x86_64 glibc-2.12- 1.47.el6.x86_64 libgcc-4.4.6-3.el6.x86_64

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:14:19.773

你应该在 Valgrind 下运行你的应用程序来帮助解决这个问题，这听起来像是堆损坏。

您提到线程，这当然是很好的信息，因为它可以更容易最终陷入困境。

glib 文档指出：

> GLib 本身在内部是完全线程安全的（所有全局数据都被自动锁定），但出于性能原因，个别数据结构实例不会自动锁定。

而且由于 slice API 不公开任何数据结构实例，因此从多个线程调用应该是安全的。

# python - Python：单击按钮

> ID：15063091
> 
> 赞同：4
> 
> 时间：2013-02-25T08:45:44.060
> 
> 标签：python, button, python-2.7, urllib2, urllib

我在单击这个在 HTML 代码中看起来像这样的按钮时遇到问题：

```
<form method="post">
<br>
<input type="hidden" value="6" name="deletetree">
<input type="submit" value="Delete Tree" name="pushed">
</form> 
```

并且需要生成的url如下所示： [http ://mysite.com/management.php?Category=2&id_user=19&deteletree=6&pushed=Delete+Tree](http://mysite.com/management.php?Category=2&id_user=19&deteletree=6&pushed=Delete+Tree)

更新：我试过这个，但它不起作用：

```
form_data = urllib.urlencode({'Category' : '2', 'suid' : '19', 'deletetree' : '6', 'pushed' : 'Delete+Tree' })
urllib2.urlopen("management.php", form_data) 
```

这是我登录的方式：

```
cj = cookielib.CookieJar() 
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj)) 
opener.addheaders = [('User-agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.2.149.29 Safari/525.13')] 
username = "user" 
password = "pass" 
USER_ID = '6'

    loginonsite = login("http://mysite.com/myprofile.php",
                        "login_username=%s&login_password=%s&suid=%s".format(username, password, USER_ID) 
```

)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T09:03:22.107

您可以使用请求来发帖。

```
import requests
data = {'Category' : '2', 'suid' : '19', 'deletetree' : '6', 'pushed' : 'Delete+Tree' }
response = requests.post('http://mysite.com/management.php', data=data)

print response.text 
```

随着越来越多的网页内容是用 JavaScript 生成的，当我现在进行这种自动化时，我发现自己使用 Selenium 的 webdriver 直接驱动像 Chrome 这样的真实浏览器......

**更新：听起来你需要先登录**

现在，请求也可以通过 cookie。所以你发送一个登录请求你会这样做

```
login_data = data={'username': 'user', 'password': 'pass'
post_data = {
    'Category' : '2', 'suid' : '19', 'deletetree' : '6', 'pushed' : 'Delete+Tree'
}
login_response = requests.get('http://mysite.com/myprofile.php', data=login_data)
form_response = requests.post(
    'http://mysite.com/management.php',
     data=post_data, 
     cookies=login_response.cookies
) 
```

因此，您进行登录，然后在下一个请求的响应中使用 cookie。应该管用。但显然我无法针对您的确切情况测试该代码。

# javascript - ckeditor 404 未找到错误

> ID：15063094
> 
> 赞同：1
> 
> 时间：2013-02-25T08:46:09.273
> 
> 标签：javascript, jquery, html, codeigniter, ckeditor

我按照ckeditor网站上的安装和集成指南进行操作，但仍然出现错误，请帮助。我正在使用代码点火器。

这些是错误：

```
GET http://dev.website.com/config.js?t=D08E 404 (Not Found) 
GET http://dev.website.com/skins/moono/editor.css?t=D08E 404 (Not Found) 
GET http://dev.website.com/lang/en.js?t=D08E 404 (Not Found) 
Uncaught TypeError: Cannot read property 'options' of undefined 
```

# sql - 年龄区间组计为 SQL 中的列变量

> ID：15063095
> 
> 赞同：0
> 
> 时间：2013-02-25T08:46:10.707
> 
> 标签：sql

我正在尝试转换出生年份列表

```
 Id  | Birthyear 
 ------------------
   1  |   1984
   2  |   1945
   3  |   1996       
   4  |   1921
   5  |   1977
   6  |   1996
   7  |   1988
   8  |   1956
   9  |   1961
   10 |   1987 
```

将特定年龄区间的组计数作为列变量

```
 0-20  |  21-40  |  41-60 |  61 - 100
 -------------------------------------
   1    |    4    |    2   |     2 
```

但我的努力是徒劳的

```
 declare @datum datetime
 set @date = convert(datetime, '20130225')      

 SELECT
 SUM(CASE WHEN datediff(d, Birthyear, @date)/365.25) < 20 THEN 1 ELSE 0 END) [0-20], 
```

这有什么诀窍吗？

[SQLFiddle](http://sqlfiddle.com/#!6/1a475)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:51:13.133

由于看起来您只有一年，因此我将与当前年份作为整数进行比较：

```
;WITH Ages AS 
(
  SELECT YEAR(getdate()) - Birthyear AS Age
  FROM people
)
SELECT SUM(CASE WHEN Age BETWEEN 0 AND 20 THEN 1 ELSE 0 END) AS [0-20],
    SUM(CASE WHEN Age BETWEEN 21 AND 40 THEN 1 ELSE 0 END) AS [21-40],
    SUM(CASE WHEN Age BETWEEN 41 AND 60 THEN 1 ELSE 0 END) AS [41-60],
    SUM(CASE WHEN Age BETWEEN 61 AND 100 THEN 1 ELSE 0 END) AS [61-100]
FROM Ages 
```

[SQL小提琴](http://sqlfiddle.com/#!6/1a475/4)

# ios6 - 从命令行运行 ios 仪器

> ID：15063096
> 
> 赞同：1
> 
> 时间：2013-02-25T08:46:11.550
> 
> 标签：ios6, instruments, xcode-instruments

到目前为止，我只使用真正的 iphone 设备从仪器 gui 运行仪器。当尝试从终端命令行 shell 运行它时，我遇到了一些困难。

我正在运行的命令是：instruments -t myphone.trace -w mydidnumber myapplicationname -e Testcases.js -e results

命令的响应是： Instruments Trace Error : (null)

任何帮助appriciated谢谢

# java - 使用java分割文件

> ID：15063100
> 
> 赞同：1
> 
> 时间：2013-02-25T08:46:25.627
> 
> 标签：java, file, split

我有一个 4Gb 的文件。

```
path = "D:\Try\FourGBFile.txt" 
```

说，

```
File file = new File(path); 
```

我想将此文件的内容拆分为 4 个文件。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T09:00:33.203

1.  获取文件长度：

    ```
    long len = file.length(); 
    ```

2.  打开`FileInputStream`你的源文件

3.  尽可能多`FileOutputStream`地打开你想要/需要

4.  通过使用文件的长度从输入流中读取并写入相应的输出流来写入文件的每个部分

# c# - Windows Phone 中的 MPNS 有什么替代方案吗？

> ID：15063101
> 
> 赞同：0
> 
> 时间：2013-02-25T08:46:25.450
> 
> 标签：c#, windows-phone-7, push-notification, mpns

我想支持我的 Windows Phone 应用程序的推送通知。Microsoft 推送通知服务是否有任何替代方案？像 MQTT 等。我在 Android 中有一个类似的应用程序，其中 MQTT 用于发送推送通知。我需要为 Windows Phone 实施相同的服务。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:53:44.573

WP 不允许您的应用程序在您处于后台时保持套接字连接处于活动状态。所以这是不可能的。

> 您唯一的选择是让后台代理在每次运行时（大约每半小时）联系您的服务器并检查新消息。如果有消息，请使用本地 toast 通知来提醒用户。如果用户点击 toast，它将启动您的应用程序。
> 
> 如果您只需要拉下新数据，那么推送通知永远不会起作用，因为它们所能做的就是显示一个 toast，而用户必须点击 toast 来启动应用程序才能执行任何操作。后台代理仍然是您最好的选择，每次运行时都会轮询新数据。如果数据需要一段时间才能下拉，请使用后台文件传输将数据下拉到隔离存储，然后在代理或应用程序下一次运行时对其进行处理。

# c++ - rapidjson writer 生成额外的大括号

> ID：15063105
> 
> 赞同：1
> 
> 时间：2013-02-25T08:46:38.147
> 
> 标签：c++

我只是尝试使用rapidjson。并编写一些代码将代码转换为字符串。

```
Document dd;
dd.SetObject();

Value num(kNumberType);
num.SetInt(23);

dd.AddMember("number", num, dd.GetAllocator());

GenericStringBuffer< UTF8<> > buffer;
Writer<GenericStringBuffer< UTF8<> > > writer(buffer);

dd.Accept(writer);

// use writer
writer.StartObject();
writer.EndObject();

printf("%s\n", buffer.GetString()); 
```

输出是

```
{"number":23}{} 
```

在对象主体之后获得额外的大括号很奇怪。但它适用于漂亮的作家。

```
StringBuffer buffer;
PrettyWriter<StringBuffer> writer(buffer);
dd.Accept(writer);
printf("%s\n", buffer.GetString()); 
```

我得到这样的结果：

```
{
"number": 23
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:02:53.220

当`dd.Accept(writer)`被调用时，DOM 被字符串化到 writer。

之后，调用`writer.StartObject()`并`writer.EndObject()`使用类似 SAX 的 API 编写另一个空对象（即编写“额外的大括号”）。

所以输出包含 DOM 输出和 SAX 输出。这是预期的输出。

# list - Haskell 列表的内部表示？

> ID：15063115
> 
> 赞同：19
> 
> 时间：2013-02-25T08:47:08.813
> 
> 标签：list, haskell, data-structures

Haskell 支持通过列表进行递归的一些基本操作，例如`head`、和。我想知道，在内部，Haskell 如何表示其列表数据？如果它是一个单链表，那么随着列表的增长，操作可能会变得昂贵。如果它是一个双向链表，那么所有四个操作都可以很容易地完成，尽管会以一些内存为代价。无论哪种方式，知道这一点对我来说很重要，这样我才能编写适当的代码。（虽然，函数式编程的精神似乎是“问它做什么，而不是它是怎么做的”）。`tail``init``last``init``last`**`O(1)`**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-25T08:51:56.550

列表表示为 ... 单链表。定义由下式给出：

```
data [] a = [] | a : [a] 
```

你可以写成：

```
data List a = Empty | Cons a (List a) 
```

内存布局完全由此定义。

*   构造函数是堆分配的
*   内部多态字段是指向其他已分配节点的指针
*   脊椎很懒

所以你最终会得到这样的结果：

![在此处输入图像描述](../Images/f08bdf571ed21043a6a95b17b4c06d4e.png)

`head`在这个结构上*O(1)*也是如此，而`last`or`(++)`是*O(n)*

Haskell 中的数据结构没有魔法——它们直接的定义完全清楚地说明了复杂性是什么（模惰性）。如果您需要不同的复杂度，请使用不同的结构（例如 IntMap、Sequence、HashMap、Vector 等）...

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-25T08:50:22.753

Haskell 列表是单链接的，所以`cons`和`head`是`tail`O(1)，而`init`和`last`是 O( *n* )。

如果您需要更好的性能，请考虑使用[Data.Sequence](http://hackage.haskell.org/packages/archive/containers/0.2.0.1/doc/html/Data-Sequence.html)`Seq`中的类型，它提供对列表两端的 O(1) 访问。在内部它使用[2-3 个手指树](http://www.soi.city.ac.uk/~ross/papers/FingerTree.html)。

# awk - 如何计算字符串在列中出现的次数？

> ID：15063117
> 
> 赞同：0
> 
> 时间：2013-02-25T08:47:14.413
> 
> 标签：awk

我有 3 列的文本文件，我想计算每个字符串出现在第 2 列中的数量。

file1 的第二列：

```
SAM
MATHEW
ALAN
NEELA
JOHN 
```

file2的第二列：

```
ALAN
NEELA
KAREEM
MOHA 
```

期望的输出：

```
SAM-1
MATHEW-1
ALAN-2
NEELA-2
JOHN-1
KAREEM-1
MOHA-1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:51:31.710

```
$ awk '{a[$2]++}END{for(k in a)print k"-"a[k]}' file1 file2
MOHA-1
NEELA-2
JOHN-1
KAREEM-1
ALAN-2
MATHEW-1
SAM-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:51:09.133

这将完成它，尽管输出是无序的：

```
awk '{ h[$2]++ } END { for(k in h) print k " - " h[k] }' file1 file2 
```

一个计数保存在`h`关联数组中，当所有文件都已处理后，结果将打印在`END`块中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:51:45.437

```
awk '{a[$2]++;next}END{for(i in a)print i"-"a[i]}' file1 file2 
```

测试：

```
> cat file1
10993   item    0
11002   item    6
693661  item    7
> cat file2
10993   item    0
11002   item1   6
693661  item2   7
> awk '{a[$2]++;next}END{for(i in a)print i"-"a[i]}' file1 file2
item1-1
item2-1
item-4
> 
```

# android - 如何在默认的 android 设置上添加我的键盘设置活动

> ID：15063120
> 
> 赞同：1
> 
> 时间：2013-02-25T08:47:25.797
> 
> 标签：android, android-softkeyboard, preferenceactivity

我正在努力创建自己的键盘，它有`Settings Activity`. 现在我希望设置应该显示在默认`keyboard`设置中。找到了一些设置活动应该扩展的地方，`PreferenceActivity`但仍然没有运气。

里面有没有flag`Manifest.xml`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T06:43:51.403

自己管理...

在 method.xml 中设置一个标志`android:settingsActivity="your settings activity"`

```
<?xml version="1.0" encoding="utf-8"?>

<!-- The attributes in this XML file provide configuration information -->
<!-- for the Search Manager. -->

<input-method xmlns:android="http://schemas.android.com/apk/res/android" 
    android:settingsActivity="com.menny.android.anysoftkeyboard.MainSettings"/> 
```

[在这里找到[https://stackoverflow.com/a/3528859/730600](https://stackoverflow.com/a/3528859/730600) [1](https://stackoverflow.com/a/3528859/730600)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:50:32.190

这是一个清单文件，可以帮助您解决这个问题。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="org.pocketworkstation.pckeyboard" android:versionName="v1.20" android:versionCode="1020">

    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.READ_USER_DICTIONARY" />
    <uses-permission android:name="android.permission.WRITE_USER_DICTIONARY" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-feature android:name="android.hardware.microphone" android:required="false" />
    <uses-feature android:name="android.hardware.faketouch" android:required="false" />
    <uses-feature android:name="android.hardware.touchscreen" android:required="false" />

    <uses-sdk android:targetSdkVersion="11" android:minSdkVersion="8"></uses-sdk>

    <application android:label="@string/english_ime_name"
            android:backupAgent="LatinIMEBackupAgent"
            android:hardwareAccelerated="true"
            android:killAfterRestore="false" android:icon="@drawable/icon">

        <service android:name="LatinIME"
                android:label="@string/english_ime_name"
                android:permission="android.permission.BIND_INPUT_METHOD">
            <intent-filter>
                <action android:name="android.view.InputMethod" />
            </intent-filter>
            <meta-data android:name="android.view.im" android:resource="@xml/method" />
        </service>

        <activity android:name="Main" android:label="Hacker's Keyboard">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>

        <activity android:name="LatinIMESettings" android:label="@string/english_ime_settings">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
            </intent-filter>
        </activity>

        <activity android:name="LatinIMEDebugSettings" android:label="@string/english_ime_debug_settings">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
            </intent-filter>
        </activity>

        <activity android:name="InputLanguageSelection"
                android:label="@string/language_selection_title">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <action android:name="org.pocketworkstation.pckeyboard.INPUT_LANGUAGE_SELECTION"/>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

# django - 很多类别。如果我想为每个类别提供不同的形式，如何设计模型？

> ID：15063121
> 
> 赞同：0
> 
> 时间：2013-02-25T08:47:26.530
> 
> 标签：django, database-design, models

我有很多类别：

*   家园
*   土地
*   公寓

如果我想要每个类别的不同形式，如何设计模型（最佳）？每个类别都有不同的字段（有些重复）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:57:11.787

模型.py

```
class model_abstract(models.Model):
     //repeat fields here

     class Meta:
         abstract = True             

class Home(model_abstract):

     //fields here

class Lands(model_abstract):

     //fields here

class Apartments(model_abstract):

     //fields here 
```

表格.py

```
class HomeForm(forms.ModelForm): 
    class Meta:
        model = Home

class LandForm(forms.ModelForm): 
    class Meta:
        model = Lands

class ApartmentForm(forms.ModelForm): 
    class Meta:
        model = Apartments 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:17:50.563

1.  真的，这些应该是凯瑟琳的表演，每个类别都有单独的模型，但是：

2.  这可能不是您想要的，因为您似乎对所有类别都有 1 个表，根据类别显示不同的字段。

3.  这是一个非常不优雅的设计，但如果类别与其他对象相关联并且您不想处理将多个不同模型与同一可能领域中的另一个模型绑定的复杂性，我可以看到它很方便（抽象关系很有趣，但很脏）。

**在你自己的看法**

只需为每个类别编写不同的表格，并在需要的地方使用适当的表格。

```
from forms HouseForm, LandForm, ApartmentForm

if category.name == 'homes':
    form = HouseForm()
elif category.name == 'lands':
    form = LandForm()
else:
    form = ApartmentForm() 
```

**管理员更棘手**

您需要为每个类别类型定义一个模型表单，重载模型表单的字段属性以仅显示您关心的字段。然后，您可以覆盖 ModelAdmin 的表单方法以显示不同的表单。*像*这样的东西：

```
class AdminHouseForm(forms.ModelForm):
    class Meta:
        model = Category
        fields = ['field_one']

class AdminLandForm(forms.ModelForm):
    class Meta:
        model = Category
        fields = ['field_two']          

class AdminApartmentForm(forms.ModelForm):
    class Meta:
        model = Category
        fields = ['field_two']

class CatgeoryAdmin(admin.ModelAdmin):
    form = property(lambda cat: AdminLandForm if cat.name == 'lands' else AdminApartmentForm if cat.name == 'apartment' else AdminHouseForm) 
```

我不是 100% 的表单覆盖，但这应该是一个开始。

你会遇到问题，因为在创建时，类别的类型直到保存后才知道。不过应该有办法解决这个问题。

# java - 让 MouseListener 本身改变他正在听的对象

> ID：15063122
> 
> 赞同：1
> 
> 时间：2013-02-25T08:47:33.770
> 
> 标签：java, swing, user-interface, jlabel, mouselistener

我有一个游戏框架，其中包含一组 JLabels，我在开始时为其中两个（最后一个和第一个）添加了现有的（扩展的）MouseListener。现在，每次单击带有 MouseListener 的 JLabel 时，我都希望它不再“拥有”该 MouseListener，而是将 MouseListener 转到 JLabel 数组中的下一个/上一个索引。

我找不到可以处理该算法的机制。

```
public class NumberGameFrame extends javax.swing.JFrame {
    ...
    JLabels[] numbers;
    int left, right;
    public void playPVC() {
        ...
        left = 0; right = numbers.legth - 1;
        PVCMouse pvc_mouse = new PVCMouse(); // MouseListener
        setPlaybleNumbers(left,right,pvc_mouse);
        ...
    }

    public void setPlaybleNumbers(int left, int right, MouseListener mouse){
        for(int i = 0; i < numbers.length; i++){ // "kill" other numbers first
            if (i != left && i != right){
                if (numbers[i].getMouseListeners() != null){
                    numbers[i].removeMouseListener(mouse);
                }
               ...
            }
        }
        numbers[left].addMouseListener(mouse);
        ...
        numbers[right].addMouseListener(mouse);
        ...
    }
    ...
} 
```

我的想法是 pvc_mouse.mouseClicked() 如何调用 this.setPlaybleNumbers(++left,..) 或 (--right,...)，但 MouseListener 无法处理 JLabel 数组和 setPlaybleNumbers 方法，因为它们是不是静态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:03:58.717

我看到了 2 个解决方案：

1.  制作. `PVCMouse`_ `NumberGameFrame`它将允许您使用所有非静态方法和变量。
2.  将标签数组传递给它，`PVCMouse`以便它可以在不知道`NumberGameFrame`. `left`在这种情况下，您必须`right`在`PVCMouse`.

# jquery - 使用 jquery addclass 和 removeclass

> ID：15063123
> 
> 赞同：-3
> 
> 时间：2013-02-25T08:47:46.727
> 
> 标签：jquery

我正在制作一个灯箱代码，它需要我使用 jquery `addClass`，我也需要使用`removeClass`，但我不能这样做。我的代码是

```
 var d = this.buttons;
        if (c("body").find("#lightbox-buttons").length < 1) {
            this.list = c(a.template || this.template).addClass(a.position || "top").prependTo(g.utility.find("> div"));
            d = {
                prev: this.list.find(".btnPrev").click(g.prev),
                next: this.list.find(".btnNext").click(g.next),
                play_fast: this.list.find(".btnFast").click(g.play_fast).addClass(g.player_fast.isActive ? "btnPlayOn" : "")
            } 
```

就像在这一行中，我还需要使用 removeClass 从另一个按钮中删除一个类。

`play_fast: this.list.find(".btnFast").click(g.play_fast).addClass(g.player_fast.isActive ? "btnPlayOn" : "")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:34:03.527

我想你想要的是这样的：

```
var d;
if (c("body").find("#lightbox-buttons").length < 1) {
    this.list = c(a.template || this.template).addClass(a.position || "top").prependTo(g.utility.find("> div"));
    d = {
        prev: this.list.find(".btnPrev").click(g.prev),
        next: this.list.find(".btnNext").click(g.next),
        play_fast: this.list.find(".btnFast").click(g.play_fast).addClass(g.player_fast.isActive ? "btnPlayOn" : "")
    };
    //this assumes that the buttons you need to remove the class from all have the same class, in this example 'btnToRemoveClassFrom'
    this.list.find('.btnToRemoveClassFrom').removeClass('classToRemove');
} 
```

或者，如果您需要从中删除类的按钮不在列表中，则最后一行很简单：

```
c('.btnToRemoveClassFrom').removeClass('classToRemove'); 
```

`btnPlayOn`如注释中所述，要首先检查类的存在，请使用：

```
if (this.list.find('.btnPlayOn').length > 0) {
    c('.btnToRemoveClassFrom').removeClass('classToRemove');
} 
```

顺便说一句，为什么在地球上`c`被用作 jQuery 的速记变量？在很多情况下，把它做成一些其他的东西是有意义的，`$`但至少是挑选`$j`或一些远程有意义的东西。

编辑：我认为这个版本更具可读性：

```
var d;
if (c("body").find("#lightbox-buttons").length < 1) {
    this.list = c(a.template || this.template).addClass(a.position || "top").prependTo(g.utility.find("> div"));
    var btnFast = this.list.find(".btnFast");
    d = {
        prev: this.list.find(".btnPrev").click(g.prev),
        next: this.list.find(".btnNext").click(g.next),
        play_fast: btnFast.click(g.play_fast)
    };

    btnFast.addClass(g.player_fast.isActive ? "btnPlayOn" : "");
    //this assumes that the buttons you need to remove the class from all have the same class, in this example 'btnToRemoveClassFrom'

    if (this.list.find('.btnPlayOn').length > 0) {
        this.list.find('.btnToRemoveClassFrom').removeClass('classToRemove');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:56:32.063

尝试类似的东西

```
this.list.find(".btnFast").click(function() {
  g.play_fast(); 
  $('#el_id_here').removeClass('class_name_to_remove');
}).addClass(g.player_fast.isActive ? "btnPlayOn" : ""); 
```

或者

```
this.list.find(".btnFast").click(function() {
  $('#el_id_here').removeClass('class_name_to_remove');
  g.play_fast(); 
}).addClass(g.player_fast.isActive ? "btnPlayOn" : ""); 
```

# jquery - jQuery 替换元素 w/ 向左滑动效果

> ID：15063125
> 
> 赞同：5
> 
> 时间：2013-02-25T08:47:51.460
> 
> 标签：jquery, jquery-animate

目前我使用淡出动画效果替换元素的内容`div`。

```
$('#divID').fadeOut('slow', function(){
    $(this).replaceWith( $div );
}); 
```

`slide to left`替换元素内容时如何实现效果`div`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T08:53:00.460

不知道有没有具体的效果，我曾经`$().animate({left: val})`实现过。

```
var width = $(window).width();

$('#divID').animate({left : -width}, 500, function(){ $div.hide() });
$div.css({left: width}).show().animate({left: 0}, 500); 
```

您需要将元素的 css 设置为`position: absolute`，并调整容器和其他项目。

这是一个[jsfiddle](http://jsfiddle.net/e3m7K/2/)

# spring-mvc - 速度与瓷砖 2 和 spring-mvc

> ID：15063131
> 
> 赞同：1
> 
> 时间：2013-02-25T08:48:26.637
> 
> 标签：spring-mvc, velocity, tiles2

我正在寻找一种使用速度与瓷砖 2 的方法：

最后我想像这样从 jsp / vm 切换：

```
<tiles-definitions>
    <definition extends="default" name="view1">
        <put-attribute name="body" value="/WEB-INF/views/view1.jspx"/>
    </definition>

    <definition extends="default" name="view2">
        <put-attribute name="body" value="/WEB-INF/views/view2.vm" type="velocity"/>
    </definition>

</tiles-definitions> 
```

我想做的是在这里解释：

[http://tiles.apache.org/framework/tutorial/integration/velocity.html](http://tiles.apache.org/framework/tutorial/integration/velocity.html)

前 2 点很简单，但不清楚第三点该怎么做：我必须重写方法：registerAttributeRenderers()

但是要扩展的类是什么？那我该怎么处理这个类，我想它必须在春天的某个地方引用......

我当前的 spring-mvc 配置：

```
<bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" id="tilesViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView" />
</bean>
<bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" id="tilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/layouts/layouts.xml</value>
            <value>/WEB-INF/views/**/views.xml</value>
        </list>
    </property>
</bean> 
```

感谢帮助 ！

# wcf - 如何保护对 Web 服务的调用不被看到

> ID：15063132
> 
> 赞同：2
> 
> 时间：2013-02-25T08:48:27.260
> 
> 标签：wcf, https, ssl-certificate, fiddler, man-in-the-middle

我正在使用 silverlight 5 和 WCF .. 并且该站点使用 HTTPS 保护。但是，如果我使用 fiddler，我可以在标题中看到： GET /ClientBin/XXXX-Web-MyService.svc/binary/GetUsers

如果我把它直接放在我的域之后：[https ://www.mydom.com/ClientBin/XXXX-Web-MyService.svc/binary/GetUsers](https://www.mydom.com/ClientBin/XXXX-Web-MyService.svc/binary/GetUsers)

它将从表格​​用户那里下载所有数据。我怎样才能隐藏和保护这些信息不被看到！！没有使用 SSL 吗？如果我使用 https，为什么这仍然可见！？

谢谢你。

编辑：我最初的问题是一种“未受过教育”的问题，对此我深表歉意，

我找到了有关该主题的更多信息并进行了更多研究。在这个关于 SO 的 Q 中，解释了为什么提琴手能够解密和查看通过 https 发送的请求和响应。
[如果提琴手 2 可以解密所有通过 HTTPS 的调用，那么 SSL 有什么意义？](https://stackoverflow.com/questions/10808930/what-is-point-of-ssl-if-fiddler-2-can-decrypt-all-calls-over-https)

为了让事情变得更加困难，这个问题的常见解决方案是使用 [“证书固定”](http://www.pcreview.co.uk/forums/net-ssl-tls-and-certificate-pinning-t4044162.html) ，这需要使用 System.Net.ServicePointManager，它不包含在 System.Net 命名空间的 silverlight 实现中。

所以在这里我坚持使用 SSL 证书。任何具有 Web 调试基本知识的人都可以“破解”我为此付出的代价。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T14:09:18.733

从纯粹的理论计算机科学的角度来看，您所要求的几乎是不可能的，实际上是不可能的。您需要实施一个受信任的平台来防止攻击。

**现在对于科学位，集中注意力**

好的，让我们从一些基本理论开始。SSL 以及由此扩展的 HTTPS 解决了一个非常非常具体的问题。您如何通过不安全的 NETWORK 机密信息与您以前从未联系过的一方交流信息。在这种情况下，重点是网络。它通过解决两个问题来做到这一点，

1.  服务器的身份验证（服务器就是它所说的那个人）
2.  密钥交换的非对称加密

有一些重叠，以确保这是一个步骤。我将专注于第一个，因为这是提琴手“攻击”您的系统的地方。

SSL 身份验证基于信任网络的概念。您的计算机有一个受信任的验证者列表。这些是 Verisign、Thawte、Geotrust 等公司。这些公司通过签署证书来验证证书（复杂的非对称加密术语，但它非常像手写签名，难以伪造，易于验证）。

Fiddler 通过将新的受信任 CA（验证程序）插入您的计算机来工作。从那时起，当您访问一个 HTTPS 站点时，它会代表您发送请求，读取它，然后将其转发给您，并带有自己的签名。由于您的计算机完全信任此签名，因此它认为没有任何问题。

现在，您要实现证书固定。这个恕我直言“非常糟糕”。它通过告诉您的软件需要特定的 SSL 证书来工作。这是不好的两个原因。

1.  如果我可以使用 Fiddler，我可以使用 dotPeek 并在没有证书固定的情况下重新编译。
2.  当您的证书被吊销时，您的客户端将无法连接。

为什么你的证书会被吊销？如果您的 CA 丢失了他们的私钥，那么他们将有义务确保其被撤销并向您发送替换密钥。此外，每张证书也都有销售日期，并且必须在它们开始闻起来之前更换。

**所以最后你能做什么？**

SSL 不是为防止您在计算机上执行的操作而设计的。执行您所要求的最简单的方法是将 WCF 调用简单地包装在额外的对称（甚至非对称）加密层中。但又一次。密钥必须存在于某个地方，因此您的客户端将能够从您的二进制文件的简单反汇编中获取密钥，并能够构建自己的代理。

**综上所述**

这与 DRM 问题几乎完全相同。你想让你的客户访问他们机器上的东西，但不向他们展示它是如何工作的。如果您确实设法解决了这个问题，请发布后续信息，因为索尼、任天堂和微软（仅举几例）会对您的发现非常感兴趣。

# css - 在css中制作连续动画？

> ID：15063133
> 
> 赞同：1
> 
> 时间：2013-02-25T08:48:27.490
> 
> 标签：css

我想要一个背景图像扩大然后在悬停时收缩。

```
a:hover{
  background-size: 80%;

}

a:hover{
  background-size: 85%; 
  transition: background-size 0.05s ease;
  //This is where I want the size to shrink back to it's original size.
} 
```

我知道有一个延迟属性，但是是否可以添加具有不同延迟等的多个转换？

我想出的一个解决方案是添加一个额外的属性

```
a.workaround:hover{
  background-size: 80%; 
  transition-delay: 0.05s;
} 
```

然而，这似乎是一个相当混乱的解决方案。例如，它不支持循环并且扩展性很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:08:02.773

你可以改为定义一个 CSS-Animation

请参阅此 jsFiddle 以获取演示：http: [//jsfiddle.net/qDppZ/](http://jsfiddle.net/qDppZ/) （仅 -moz 为清晰起见）

代码：

```
a {
    display: inline-block;
    background: url(http://openclipart.org/image/800px/svg_to_png/95329/green_button.png) no-repeat;
    background-size: 80%;
    width: 100px;
    height: 60px;
}
a:hover {
    -moz-animation: anim 0.2s; /* Firefox */
}

@-moz-keyframes anim /* Firefox */
{
    0% { background-size: 80%;} 
    50% { background-size: 85%;}
    100% { background-size: 80%;}
} 
```

# java - Flex 或 Actionscript 中的 Java 语法荧光笔

> ID：15063138
> 
> 赞同：1
> 
> 时间：2013-02-25T08:48:47.483
> 
> 标签：java, actionscript-3, apache-flex, syntax-highlighting

我正在寻找在 flex 中使用的 Java 语法荧光笔。是否有任何可用的开源库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:31:52.973

## 已编辑

我推荐[as3syntaxhighlight](https://code.google.com/p/as3syntaxhighlight/)。另见这篇文章[flex-syntax-highligher](http://www.nbilyk.com/blog/1/71/flex-syntax-highlighter)

# solr - Solr：将索引存储在不同的服务器上

> ID：15063142
> 
> 赞同：2
> 
> 时间：2013-02-25T08:49:20.740
> 
> 标签：solr, amazon-web-services, amazon-elastic-beanstalk

有没有办法在服务器上运行 Solr 并将其索引存储在不同的位置？

我的用例是：使用 AWS EC2 作为 Solr 服务器，使用 S3 作为索引存储（用于持久性目的）

谢谢

洛朗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:30:51.077

AWS Beanstalk EC2 实例由 EBS 卷支持。但是，每次 EC2 实例终止（手动或发生故障时）时（默认情况下）都会删除此卷。

解决方案：创建一个附加的 EBS 卷，将其附加到 EC2 实例（使用 AWS 控制台）并挂载它并格式化它（使用 ssh）。完成后，Solr 配置文件 ($SOLR_HOME) 及其 dataDir（保存索引）将存储在此 EBS 卷上，并在 EC2 实例停止时持续存在。

# node.js - node.js / socket.io 聊天的某种超时问题

> ID：15063150
> 
> 赞同：0
> 
> 时间：2013-02-25T08:49:55.260
> 
> 标签：node.js, socket.io, chat

我们从一个示例聊天文档构建了简单的 node.js socket.io 聊天。这是我们一直坚持的问题；

*   当 A 人点击 B 人进行聊天时，它会显示“已准备好开始对话”
*   当他们发送消息时，没有任何反应，按 Enter 键只会清除 A 和 B 人都看不到的消息。
*   但是，如果他们同时执行 f5，它会再次显示“已准备好开始对话”，现在他们可以毫无问题地聊天了。
*   有了这个第一个触发器，每个聊天都可以在没有 f5 的情况下进行。例如，1-5 小时后，如果 C 人点击 D 人，他们可以毫无问题地开始对话。
*   但是，如果一天没有任何对话，那一天开始第一次对话的人必须按 f5 来触发某种触发。然后他们之后的任何人都可以毫无问题地开始。

服务器进入某种超时或屏幕保护模式..！第一次交谈的人总是必须做出 f5。然后它工作了一天。我没有发送任何代码或我们需要指导的东西。节点.js？套接字.io？什么会导致这个愚蠢的问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:27:59.380

> 但是，如果一天没有任何对话，那一天开始第一次对话的人必须按 f5 来触发某种触发。然后他们之后的任何人都可以毫无问题地开始。

这听起来像您试图保持 websocket 连接打开几天而没有任何客户端进行任何重新连接？

如果是这种情况，那么可能是客户端问题。也许浏览器在很长一段时间后关闭了 websocket 连接。您的 Web 应用程序无法识别缺少连接，但仍显示“已准备好开始对话”。但是浏览器不再向服务器发送任何消息。检查此线程：[如何重新建立连接](https://stackoverflow.com/questions/11667516/how-to-reconnect-socket-io-client-on-activity-after-auto-reconnect-times-out)

如果您向我们展示一些代码，它将有很大帮助。

此致

# database - 没有任何数据库的 Infinispan 持久性？

> ID：15063152
> 
> 赞同：4
> 
> 时间：2013-02-25T08:50:00.187
> 
> 标签：database, datagrid, jboss, datastore, infinispan

作为 Infinispan 的新手，我正在探索将 Infinispan 5.1.5 用于分布式缓存和数据存储的选项。

因此，我们的想法是不要有一个单独的数据存储即。数据库，而不是仅使用“Infinispan 缓存存储”将应用程序数据保存到磁盘文件中。

应用数据应包括但不限于事件、流程等的历史数据。

我可以只使用 Infinispan 进行数据持久性而不使用数据库吗？Infinispan 上的数据量、检索、排序等是否有任何限制？

任何输入都会有很大帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:23:49.123

您可以这样做，但要准备好管理序列化格式的更改。如果您自己的类定义发生更改（假设您存储 Java 对象），您要么必须定义知道如何处理类更改的自定义 *Externalizer*s，要么必须转储数据并在升级后恢复它。此外，如果您需要升级 Infinispan 本身，您可能需要转储数据并恢复或查看[滚动升级](https://docs.jboss.org/author/display/ISPN/Rolling+upgrades)，目前需要 Hot Rod 客户端并至少使用 5.2 版。

它可以通过*Infinispan Query*进行排序，但请记住您没有 Join 或类似操作：适用于某些问题集，但不适用于所有问题。此外， *Infinispan Query*使查询方面非常强大，但在更新索引的写入操作上会降低性能：如果您可以重新考虑您的模型以使用 put/get 操作，它会更快地工作。

你可以看看[Hibernate OGM](http://ogm.hibernate.org)来映射 Infinispan 中的结构化实体，包括关系，只使用 put/get 操作。这应该是最实用的接口，因为它使用众所周知的 JPA 映射，并且可以通过[Hibernate Search](http://search.hibernate.org)使用查询（尽管与 Infinispan Query 的限制非常相似，因为它们使用基于 Lucene 的相同索引技术）。

# combobox - radcombobox 中的 selectedindexchanged 事件

> ID：15063153
> 
> 赞同：1
> 
> 时间：2013-02-25T08:50:04.347
> 
> 标签：combobox, selectedindex, rad-controls, radcombobox

我有一个 radcombobox：

```
<telerik:RadComboBox ID="SelectInitiative" runat="server" AutoPostBack="true" 
                    DataSourceID="SqlInitiative" DataTextField="Initiative_Name" 
                    DataValueField="ID"  EmptyMessage="Select Initiative" Height="200px" 
                      OnSelectedIndexChanged="SelectInitiative_SelectedIndexChanged" Width="300px">
                </telerik:RadComboBox></td>
            <td>
                <asp:Label ID="Label1" runat="server" Text=""></asp:Label>

            </td>`

<asp:SqlDataSource ID="SqlInitiative" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ProjectPlanningConnectionString %>" 
        SelectCommand="SELECT * FROM [Initiative]"></asp:SqlDataSource> 
```

该事件的代码如下：

```
 protected void SelectInitiative_SelectedIndexChanged(object sender, RadComboBoxSelectedIndexChangedEventArgs e)
    {
        if (SelectInitiative.SelectedValue.ToString() != "")
        {
            Session["InitiativeID"] = SelectInitiative.SelectedValue.ToString();
        }
        Label1.Text = "You selected " + e.Value + " item";

    } 
```

问题是它既没有拾取“selectedvalue”或“e.Value”的值，两个值都是空的......请帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:04:09.247

你可以试试这个吗？

```
protected void SelectInitiative_SelectedIndexChanged(object sender, RadComboBoxSelectedIndexChangedEventArgs e)
{
    if(!IsPostBack)
    {
        if (SelectInitiative.SelectedValue.ToString() != "")
        {
            Session["InitiativeID"] = SelectInitiative.SelectedValue.ToString();
        }
        //Or change this line 
        //Label1.Text = "You selected " + e.Value + " item";
        //To this sample
        Label1.Text = "You selected " + SelectInitiative.SelectedValue + " item";

    }

} 
```

或者从 RadComboBoxSelectedIndexChangedEventArgs 属性中查看/检查此变量的内容：

-Text ：是刚刚选择的项目的文本。

-Value ：是刚刚选择的项目的值。

-OldText ：是先前选择的项目的文本

-OldValue ：是先前选择的项目的值

或者试试这个：

```
Label1.Text = "You selected " + SelectInitiative.SelectedValue + " item"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-19T12:07:33.963

我有一个类似的问题，对我来说，来源是我在每个 AutoPostBack 上设置数据源。确保在事件触发之前您没有重新初始化组合框中的项目。

# maven - 声纳跳过除根之一以外的所有模块

> ID：15063154
> 
> 赞同：10
> 
> 时间：2013-02-25T08:50:08.760
> 
> 标签：maven, sonarqube

我正在尝试使用 maven 在整个项目上运行声纳，但由于某种原因，它会跳过子模块并仅分析根模块。这种奇怪的行为有什么解释吗？

任何帮助是极大的赞赏！

这是Maven的最终输出：

![这是Maven最终输出](../Images/c2c37605031464d7392ee70cbb5e1814.png)

* * *

## 添加

mvn clean install 不会跳过任何内容，但 mvn sonar:sonar 会。

* * *

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-09-02T11:47:38.497

SonarQube Maven 插件是一个聚合器插件。它仅在根模块上执行。这就是 Maven 将子模块标记为 SKIPPED 的原因，即使它们被正确分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T06:21:16.157

我没有找到完整的描述，但你试过 sonar.includedModules=rootModule 吗？

[来源](http://docs.codehaus.org/display/SONAR/Analysis+Parameters)

# java - HttpServlet 的 doPost() 中的请求阻塞

> ID：15063155
> 
> 赞同：1
> 
> 时间：2013-02-25T08:50:16.170
> 
> 标签：java, multithreading, servlets, blocking

我定义了一个 servlet（将其映射到 /index）并像这样重写 doPost 方法：

```
private Object lock = new Object();
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        System.out.println("start");
        synchronized(lock) {
            try {
                lock.wait(15000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            lock.notifyAll();
        }
    } 
```

当第一个请求进来时，它会打印“开始”然后等待，`lock.wait(15000);` 然后第二个请求来了，它应该`synchronized(lock);`像我想的那样被阻止。但事实是第二个请求被方法阻止了`doPost`。在第一个请求`lock.notifyAll();`之后，第二个请求进入`doPost`方法并打印“开始”。

我发现只有当两个请求查询完全相同的 url 时才会发生这种情况。这是Tomcat处理多线程的方式吗？我感到很困惑..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:56:09.117

只有 servlet 的`doPost`and`doGet`方法是线程安全的，这意味着对于每个线程它们都是独立调用的。类本身只实例化一次。
在上面的代码中，您正在获取将在所有请求中共享的类变量的锁定，因此您将获得每个请求的锁定。

要获得您的预期行为，请移动您的“Object `instantiation inside`doPost”方法。

# php - 从 json 到 UiTableViewControll

> ID：15063156
> 
> 赞同：0
> 
> 时间：2013-02-25T08:50:21.083
> 
> 标签：php, objective-c, xcode, json

我的计划是从 web 服务中获取一个 json，并将结果显示在一个分组的 tableview 中，其中包含来自 json 的部分。

我的json到目前为止：

```
{
"Building 1":[{"title":"Room 1","id":"1"},{"title":"Room 2","id":"11"},{"title":"Room 3","id":"12"}],
"Building 2":[{"title":"Room 1","id":"37"},{"title":"Room 2","id":"23"}],
"Building 3":[{"title":"Room 1","id":"9"},{"title":"Room 2","id":"3"}]
} 
```

我可以通过以下方式获取并写出来

```
-(void)connectionDidFinishLoading: (NSURLConnection *)connection
{
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:nil];
    NSLog(@"array contains %@",json);

    [self.tableView reloadData];
} 
```

但是如何做剩下的并在带有部分标题的表格视图中显示它：Building 1 Room 1 Room 2 Room 3 Building 2 Room 1

等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:48:04.443

创建一个动态原型 UITableviewcell（或具有所需部分的静态单元格）并将数据从数组加载到 UITableviewCells。我们可以使用 Tableview 委托方法将数据加载到 uitableviewcells 中。

示例代码：

```
 - (NSInteger)numberOfSectionsInTableView: (UITableView *)tableView
    {
        return 1;
    }

    - (NSInteger)tableView: (UITableView *)tableView numberOfRowsInSection: (NSInteger)section
    {
        //NSLog(@"inputplayerslist count=%d",[playerPositionList count]);
        return [playerPositionList count];
    }

    - (UITableViewCell *)tableView: (UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath
    {
        AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
        UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"ChooseAPlayer"];

        NSString *ImagName =[[appDelegate.userSelection objectForKey:@"sportValue"] stringByAppendingString:@"Player.png"];
        UIImageView *playerGraphicImage = (UIImageView *)[self.view viewWithTag:31];
        [playerGraphicImage setImage:[UIImage imageNamed:ImagName]];

        UILabel *lblName = (UILabel *)[cell viewWithTag:101];
        [lblName setText:[playerPositionList objectAtIndex:[indexPath row]]];
        UILabel *Teams = (UILabel *)[cell viewWithTag:103];
        [Teams setText:[playerTeamidList objectAtIndex:[indexPath row]]];

        UILabel *AwayTeams = (UILabel *)[cell viewWithTag:104];
        [AwayTeams setText:[playerOPTeamidList objectAtIndex:[indexPath row]]];

        UILabel *PlayersPrice = (UILabel *)[cell viewWithTag:105];
        [PlayersPrice setText:[playerPriceList objectAtIndex:[indexPath row]]];
} 
```

# objective-c - 如何知道 - (void)connectionDidFinishLoading:(NSURLConnection *)connection 的响应？

> ID：15063159
> 
> 赞同：0
> 
> 时间：2013-02-25T08:50:31.287
> 
> 标签：objective-c

`- (void)connectionDidFinishLoading:(NSURLConnection *)connection`只有一个参数。

联系。

但是，我看不到任何连接成员可以判断资源返回的数据是什么。

我检查了 [http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURLConnection](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURLConnection)

如果我们执行 sendSynchronousRequest:returningResponse:error: 我们会得到一些回报。

```
 NSData * response= [NSURLConnection sendSynchronousRequest:URLRequest returningResponse:&URLResponse error:&error];
    NSString * result = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding]; 
```

在这里，结果是实际返回的。

但是如果我们异步发送这个请求呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:02:41.010

您需要实现的不仅仅是一个回调（对于异步调用）。

**在didReceiveData**中构建一个缓冲区，然后在完成的事件上您可以使用该缓冲区。

像这样：

```
// in .h NSMutableData *_data;    

-(void)connection:(NSURLConnection*)connection didReceiveResponse:(NSURLResponse*)response
{
    _data = [[NSMutableData alloc] init]; // _data being an ivar
}

-(void)connection:(NSURLConnection*)connection didReceiveData:(NSData*)data
{
    [_data appendData:data];
}

-(void)connection:(NSURLConnection*)connection didFailWithError:(NSError*)error
{
    // handle connection error
}

-(void)connectionDidFinishLoading:(NSURLConnection*)connection
{
    // do something with _data

} 
```

# sharepoint-2013 - Sharepoint 2013 查询非常慢

> ID：15063162
> 
> 赞同：0
> 
> 时间：2013-02-25T08:50:37.917
> 
> 标签：sharepoint-2013

我们设置了一个新的 SharePoint 2013 Server 来测试它如何作为文档存储工作。问题是，它非常慢，我不知道为什么..我改编自 msdn：

```
 ClientContext _ctx;

    private void btnConnect_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            _ctx = new ClientContext("http://testSP1");
            Web web = _ctx.Web;

            Stopwatch w = new Stopwatch();
            w.Start();

            List list = _ctx.Web.Lists.GetByTitle("Test");
            Debug.WriteLine(w.ElapsedMilliseconds); //24 first time, 0 second time
            w.Restart();

            CamlQuery q = CamlQuery.CreateAllItemsQuery(10);

            ListItemCollection items = list.GetItems(q);
            _ctx.Load(items);
            _ctx.ExecuteQuery();
            Debug.WriteLine(w.ElapsedMilliseconds); //1800 first time, 900 second Time
        }
        catch (Exception)
        {
            throw;
        }
    } 
```

测试列表中的文档不多。只有 3 个文件夹和 1 个 Word 文件。有什么建议/想法为什么这么慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:06:37.647

在 SharePoint 的 SQL 内容数据库中存储非结构化内容（Word 文档、PDF、除元数据之外的任何内容）将导致上传和检索速度比将文件存储在文件系统上时更慢。这就是为什么微软创建了远程 BLOB（二进制大对象）存储接口，以使文件能够在 SharePoint 中进行管理，但存在于文件系统或云中。文件越大，性能影响越大。

有几个第三方解决方案利用了这个接口，包括我公司的产品 Metalogix StoragePoint。如果您想了解更多信息或访问[http://www.metalogix.com/Products/StoragePoint/StoragePoint-BLOB-Offloading.aspx ，可以通过 trossi@metalogix.com 与我联系](http://www.metalogix.com/Products/StoragePoint/StoragePoint-BLOB-Offloading.aspx)

# php - codeigniter 回调不起作用？

> ID：15063163
> 
> 赞同：1
> 
> 时间：2013-02-25T08:50:39.627
> 
> 标签：php, codeigniter

这是 codeigniter 中的一个简单的登录验证脚本。我无法理解这个问题。我已经阅读了用户指南，但回调不起作用。

```
public function form_validation()
{
    $this->load->library('form_validation');
    $this->form_validation->set_rules('username', 'Username', 'required|trim        |alpha_numeric');
    $this->form_validation->set_rules('password', 'Password', `enter code here` 'required|trim |xss_clean');
    $this->form_validation->set_rules('email', 'Email', 'required|trim|valid_email|xss_clean|callback_validate');
    if ($this->form_validation->run()) {
        echo "validated but not logged";
    } else {
        $this->load->view('errors/formerror');

    }
}

public function validate()
{
    $this->load->model('model_users');
    if ($this->model_users->can_login()) {
        echo "Logged";
    } else {
        $this->form_validation->set_message('validate', "Incorrect username/password");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:52:38.160

```
public function form_validation()
{
    $this->load->library('form_validation');
    $this->form_validation->set_rules('username', 'Username', 'required|trim|alpha_numeric');
    $this->form_validation->set_rules('password', 'Password', 'required|trim |xss_clean');
    $this->form_validation->set_rules('email', 'Email', 'required|trim|valid_email|xss_clean|callback_email_check');
    if ($this->form_validation->run()) {
        echo "validated but not logged";
    } else {
        $this->load->view('errors/formerror');
    }
}

public function email_check($email)
{
    $this->load->model('model_users');
    if ($this->model_users->can_login($email)) {
        echo "Logged";
        return true;
    } else {
        $this->form_validation->set_message('email_check', "Incorrect username/password");
        return false;
    }
} 
```

添加`_check`后缀like`callback_email_check`和回调方法`email_check`并检查。在这里找到更多[CodeIgniter 回调](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:02:58.563

我把自己弄得一团糟，几乎淹死了一整天。这就是问题所在。我正在使用模型，结果发现回调所需的函数在模型中不起作用。要解决这个问题：

**确保您用于回调的函数在控制器中而不是模型中。**

它像魔术一样工作。我不知道为什么，但它解决了我的回调案例。

添加*检查后缀并没有太大的区别，因为手册没有特别提到后缀。前缀回调*是我知道不应该被遗漏的。我有几个没有 _check 后缀的回调。

以下是手册的内容：

> 要调用回调，只需将函数名称放入规则中，并以“callback_”作为规则前缀。如果你需要在你的回调函数中接收一个额外的参数，只需在方括号之间的函数名之后正常添加它，如：“callback_foo[bar]”，然后它将作为回调函数的第二个参数传递

我注意到的是手册中的示例在控制器中而不是模型中具有回调函数。

# hibernate - hibernate分布式查询/L2缓存

> ID：15063167
> 
> 赞同：0
> 
> 时间：2013-02-25T08:51:02.950
> 
> 标签：hibernate, caching, memcached, ehcache

我正在为我的分布式应用程序服务器缓存 sql 结果。我发现 ehcache 和 memcached 是休眠 L2 缓存的 2 个流行选项。ehcache 似乎比 memcached 快得多，并且具有更容易操作的优势（ehcache 很好地支持与 hibernate 集成）。

但是，我关心的是如何为应用服务器集群设置 ehcache 并同步它们？似乎 ehcache 集群支持不是开源的，而且非常非常昂贵。有没有办法在不支付任何费用的情况下使用它的集群应用服务器支持？这是它的配置文档：[http ://ehcache.org/documentation/configuration/distributed-cache-configuration](http://ehcache.org/documentation/configuration/distributed-cache-configuration)

休眠查询缓存也有同样的问题。

有人有经验吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:53:57.387

Ehcache 提供免费的集群化，请参阅[与复制缓存相关的文档](http://ehcache.org/documentation/replication)。

或者您可以自己实现复制（我已经成功完成，正在实时企业系统中使用实现）。您需要的是在本地节点上实现`CacheEventListener`和/或监听缓存刷新事件。`CacheEventListenerFactory`如果条目被刷新、更新或删除，您需要将其传播到其他节点，这样它们就不会提供过时的数据。

# c++ - 如何在 C++ 中使用 getopt_pp？

> ID：15063171
> 
> 赞同：0
> 
> 时间：2013-02-25T08:51:12.923
> 
> 标签：c++, getopt

我知道这是一个菜鸟问题。[我从这里](https://code.google.com/p/getoptpp/wiki/HelloWorld)使用了这个示例代码。它应该如何工作？我以为你可以为谁输入一些东西，但它会立即关闭。

```
#include <iostream>
#include "getopt_pp_standalone.h"

using namespace GetOpt;
using namespace std;

 int main(int argc, char* argv[])
 {
    string who;

    GetOpt_pp ops(argc, argv);

    ops >> Option('n', "name", who, "world" );              /* the default name is 'world' */

    cout << "Hello " << who << "!" << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:57:09.280

*从命令行*`getopt`获取选项的变体，而不是用户输入。

 *您将需要使用以下内容运行您的程序：

```
myprog -n Pax 
```

如果您想要用户的*交互式*输入，请完全摆脱这些`getopt`东西并只使用流，例如：

```
std::cout << "Identify yourself, interloper!\n";
std::cin >> who;
std::cout << "Hello, " << who << ", my name is Pax.\n"; 
```

* * *

其他几件事要传授：

首先，如果您在关闭执行窗口而不是等待的 IDE 中运行，您可能需要在 if 之前放置一个`getchar()`（或`cin >> who`） 。`return`否则，输出将转到窗口并立即消失。

其次，虽然对于小型程序来说可能没`using namespace std`问题，但可能会导致更重要的项目出现问题（就污染标准命名空间而言，请参阅[此处](https://stackoverflow.com/questions/1265039/using-std-namespace)以获得良好的解释）。我更喜欢完全限定我的电话，例如：

```
std::cout << "blah, blah, blah\n"; 
```

第三，大多数开发人员过于频繁地*使用*`endl`它。大多数情况下，您应该直接使用，或者只是添加到字符串的末尾，例如. 那是因为这种方式不会像这样做那样强制可能低效的流冲洗。[此处](https://stackoverflow.com/questions/5492380/what-is-the-c-iostream-endl-fiasco)已介绍。*`'\n'``\n``"Hello, world!\n"``\n``endl`**

# php - 致命错误：在 c 中调用未定义的函数 form_open()

> ID：15063174
> 
> 赞同：12
> 
> 时间：2013-02-25T08:51:19.800
> 
> 标签：php, codeigniter

我收到了这个错误，我很害怕知道我哪里出错了，我是 codeigniter 的新手，所以我敢肯定它有些愚蠢，任何人都可以提前弄清楚 tnx。

create_view.php

```
 <body>
        <?php echo form_open('create'); ?>
        <ul id="accordion">
 <li>
   <a>Survey Creation</a>
     <ul id="survay">  
       <li>Enter a question:<?php echo form_input('Question')?></li>
       <li>Answer A: <?php echo form_input('qA' );?></li>
       <li>Answer B: <?php echo form_input('qB' );?></li>
       <li>Answer C: <?php echo form_input('qC' );?></li>
       <li><?php echo form_submit('submit', 'Set This Question' );?></li>
      </ul>  
  </li> 
```

创建.php

```
 <?php

class Create extends CI_Controller{

    function index(){

        $this->load->view('create_view');
    }
    // insert data
    function create1()
    {   
     $data = array(
         'Question' => $this->input->post('Question'),
         'qA' => $this->input->post('qA'),
         'qB' => $this->input->post('qB'),
         'qC' => $this->input->post('qC'),

         );

          $this->create_model->add_record($data);
          $this->home();

    }

 }

?> 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-25T08:54:23.777

好像你忘了加载[表单助手](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)。在加载视图之前，使用`application/config/autoload.php`或将以下行添加到控制器中：

```
$this->load->helper('form'); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-07-05T19:09:36.110

您也可以在所有控制器上加载此帮助程序。转到您的配置文件夹并在任何编辑器中打开 autoload.php，然后加载所需的帮助程序，如下所示：

```
$autoload['helper'] = array('url','form'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T09:02:43.880

在控制器中加载 CI 助手 $this->load->helper('form');

```
class Create extends CI_Controller{

    function index(){

        $this->load->view('create_view');
        $this->load->helper('form'); 
```

或在所有控制器上制作自动加载助手。打开应用程序/config/autoload.php

```
 $autoload['helpers'] = array('form','myhelper'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-13T09:55:32.447

在使用此功能之前，您需要加载 Helper 'Form'。添加这一行：

```
$this->load->helper('form'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-22T09:09:31.567

确保在控制器中调用视图上方的以下行：

```
$this->load->library('form_validation'); //make sure to have it, before view call 

$this->load->view('profile'); 
```

# php - 任何编程语言的分布式并行编程模型 - 类似于 apache hadoop 但支持 windows 机器

> ID：15063178
> 
> 赞同：3
> 
> 时间：2013-02-25T08:51:54.773
> 
> 标签：php, python, perl, parallel-processing, distributed

我有兴趣了解任何编程语言（Java/Perl/Python/PHP）中的分布式并行编程模型——类似于 Apache Hadoop，但它支持 Windows 机器（我不想安装 Cygwin）。

另外，我并不热衷于高可用性和容错。

示例：创建一个作业“sum”并从客户端提交，以便它在许多工作节点中运行（包括没有 cygwin 的 windows 机器）

```
sum(int a, int b)
{
   return a+b;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:33:35.430

您可能需要考虑[JPPF](http://www.jppf.org)或[GridGain](http://www.gridgain.com)，它们都是 Java 分布式框架，可以在任何平台上运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:23:56.370

您所需要的只是 [ZeroMQ](http://www.zeromq.org/) ...您可以在没有 cygwin 的情况下在 Windows 上简单地实现多个工作人员

这是 PHP 中一个简单的并行任务工作者，它接收一条消息，休眠该秒数，然后发出完成的信号

```
$context = new ZMQContext();

// Socket to receive messages on
$receiver = new ZMQSocket($context, ZMQ::SOCKET_PULL);
$receiver->connect("tcp://localhost:5557");

// Socket to send messages to
$sender = new ZMQSocket($context, ZMQ::SOCKET_PUSH);
$sender->connect("tcp://localhost:5558");

// Process tasks forever
while ( true ) {
    $string = $receiver->recv();
    $json = json_decode($string,true);

    // Do the work
    echo sum($json['left'], $json['right']), PHP_EOL;  // <--- call SUM
    usleep(strlen($string) * 1000);

    // Send results to sink
    $sender->send("");
} 
```

[这是一个很好的起点](http://zguide.zeromq.org/php%3aall)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:06:45.560

请考虑 Gearman：[http://gearman.org/](http://gearman.org/)

perl gearman 服务器在 windows 下运行，没有 cygwin：[http ://code.activestate.com/ppm/Gearman/](http://code.activestate.com/ppm/Gearman/)

[http://www.phpvs.net/2010/11/30/installing-gearman-and-gearmand-on-windows-with-cygwin/](http://www.phpvs.net/2010/11/30/installing-gearman-and-gearmand-on-windows-with-cygwin/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T09:54:35.833

尝试使用[IPython](http://ipython.org/ipython-doc/stable/parallel/index.html)进行并行计算！

# objective-c - 将 GUID 转换为 NSNumber

> ID：15063179
> 
> 赞同：0
> 
> 时间：2013-02-25T08:51:55.340
> 
> 标签：objective-c, guid, nsnumber

我想将`string`带有 guid 的 a 转换为 a`NSNumber`或任何其他能够处理 guid 的数字数据类型。

我只找到了将其转换为`double / int`等不符合我要求的方法。

# javascript - 如何每 n 秒运行一次 jQuery load() 请求？

> ID：15063182
> 
> 赞同：0
> 
> 时间：2013-02-25T08:51:58.383
> 
> 标签：javascript, jquery

我有以下代码

```
$('document').ready(function() {
  reload(); 
}); 

function reload() {
  $('div#info').load('http://somesite.ru/script.php');
  setInterval(reload(), 10000);   
} 
```

但似乎方法 reload() 运行得太快了。Firefox 向我显示消息，关于 jquery.min.js 似乎很忙。如何使部分页面每 10 秒刷新一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:53:12.640

您应该删除`()`, 并将函数放在`setInterval`函数的上下文之外`reload`。

```
function reload() {
   $('#info').load('http://somesite.ru/script.php');
}
$(document).ready(function() {
   setInterval(reload, 10000);   
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:53:25.193

代替：

```
setInterval(reload(), 10000); 
```

和：

```
setInterval(reload, 10000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T08:56:38.320

使用 setTimeout() 代替它比 setInterval() 安全且性能好，可以满足您的要求。

```
var time= setTimeout(reload,1000); 
```

检查 reload() 方法中的某些条件后，再次调用其中的 setTimeout

```
function reload()
{
 /// your logic
setTimeout(reload,1000);
} 
```

每当您不想再重新加载时，使用上述变量来破坏间隔

```
clearTimout(time); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T08:59:08.580

```
 Refer: http://www.w3schools.com/js/tryit.asp?filename=tryjs_setinterval

     setInterval(function(){reload();},10000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T01:11:18.823

另一种方法是使用

```
$('document').ready(function() {
  setInterval(function() { 
    $('div#info').load('http://somesite.ru/script.php'); 
  }, 10000);
}); 
```

一切正常。非常感谢你的回答。

# facebook - 如何使用 API 获取 Facebook 赞助的故事？

> ID：15063184
> 
> 赞同：0
> 
> 时间：2013-02-25T08:52:10.413
> 
> 标签：facebook, facebook-graph-api

有没有可能使用图形 API 或任何 facebook API 在 facebook 新闻源中获取赞助故事的方法。我没有通过新闻提要 API 获得建议的故事。

[https://graph.facebook.com/me/home?access_token=AAA####](https://graph.facebook.com/me/home?access_token=AAA####)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:20:57.500

赞助故事由广告商创建，但 fb 算法决定需要向谁展示。所以我相信，使用 Fb Ad Api 的广告商可以对他们的赞助故事有所了解。除此之外，您无法从新闻源中获得赞助故事。

**什么是赞助故事？**

赞助故事是围绕用户活动构建的。广告商只需付费突出用户已经在社交网络或与 Facebook 连接的应用程序中采取的行动。该操作会在侧边栏或新闻提要中显示给用户的朋友。

广告商对这些广告类型没有任何创意控制权，因为它们是由自然用户操作生成的。

最常见的赞助故事是“页面赞”故事，但广告商可以赞助签到、提供声明、对单个帖子的赞或任何自定义 Open Graph 操作。

公司还可以赞助有关用户何时共享其域中的链接的故事。例如，当用户在 Facebook 上发布亚马逊链接时，亚马逊会付费向更多用户的朋友展示该故事，如右图所示。

赞助故事的目标是让更多用户采取与朋友相同的行动。如果页面想要点赞，它可以显示页面点赞赞助故事。如果零售商希望更多用户领取优惠，它可以显示优惠声称的赞助商故事。如果公司希望在其自定义 Open Graph 应用程序中获得更多抽奖条目，它可以创建有关用户“参加抽奖”的赞助故事。</p>

大多数赞助故事可以通过自助广告工具、Power Editor 或 API 创建，但是，Open Graph 赞助故事要求广告商与有权访问 API 的第三方提供商合作。

查看此[原始来源](http://www.insidefacebook.com/2013/01/11/understanding-the-difference-between-facebook-sponsored-stories-page-post-ads-promoted-posts-and-marketplace-ads/)以获取更多详细信息（*了解 Facebook 赞助故事、主页帖子广告、推广帖子和市场广告之间的区别*）

我希望这有帮助 ！

# python - 事件发生时如何分配变量的值？

> ID：15063185
> 
> 赞同：0
> 
> 时间：2013-02-25T08:52:22.797
> 
> 标签：python, python-3.x, tkinter

在 Tkinter 中，如何在事件发生时为变量赋值？

```
from Tkinter import *

def on_Click(event):
    print(event.x, event.y)
    return 'hello world !'

root = Tk()
root.bind("<Button-1>", on_Click)
myVariable = on_Click()
# rest of the program
root.mainloop() 
```

如何将值分配给触发时`myVariable`的值（通过单击小部件）？`on_Click()``on_Click`

只有当一个值被成功分配给 时，程序的其余部分才会被执行`myVariable`。在没有记录点击的情况下阻止程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:28:40.370

事情是整个程序在您启动脚本时运行，不在函数中的所有内容都会在开始构建 UI 时被加载......并且真正的工作在加载函数时开始，例如您编写的那个（`on_Click`）。

您需要做的是引用`myVariable`函数内部，然后将变量发送到另一个函数，该函数将成为您程序的其余部分。

```
from Tkinter import *

variable = None

def on_Click(event):
    print(event.x, event.y)
    variable = 'hello world !'
    main(variable)

root = Tk()
root.bind("<Button-1>", on_Click)

def main(x):
# rest of the program

root.mainloop() 
```

这就是我让它工作的方式，不要忘记每次您要单击小部件时，程序都会再次加载。

# jquery - jquery 部分选择器如何工作？

> ID：15063186
> 
> 赞同：1
> 
> 时间：2013-02-25T08:52:22.887
> 
> 标签：jquery, jquery-selectors

我的页面呈现这样的评论：

```
<div class="ReadComment comment#1">
    First comment
    <br>
    <span>posted by vi vi on 2/25/2013</span>
    <p>My first comment</p>
</div> 
```

我用“comment#”类枚举我的评论的顺序。

我尝试使用 jquery 选择器来选择类以'comment#'开头的所有元素：

> var comments = $("div[class^='comment#']");

但它不是这样工作的。反而

> ```
> var comments = $("div[class*='comment#']"); 
> ```

工作得很好。

我认为 jquery 会单独检查每个元素的类。所以如果我写`[class^='comment#']`它会先检查 `ReadComment`班级然后`comment#`班级。

但似乎它只检查类的行。是这样吗？有人可以解释它是如何工作的吗？我无法寻找解释）谢谢）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T08:54:56.183

这些是属性选择器。在您的情况下，您检查该`class`属性是否从字面上以 string 开头`comment#`，它不是（我认为这也不`#`是类名的有效字符）。

`*=`之所以有效，是因为它检查是否`comment#`在属性的值内，它是。

如果你想做更高级的过滤，你必须自己使用`.filter()`和编写一个函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T08:55:58.473

在 jQuery`#`中保留用于 DOM`id`选择。

`comment#`这段代码的作用是寻找注释标签 whth `id`。

这是不正确的，`$("div[class*='comment#']")`这个 select DOM with class contains`comment#`意味着查找包含`comment#`在 end 或 beginnig 或类名中的任何位置的类。

# c# - 为 Stroke.Color 属性多次使用 ColorAnimationUsingKeyFrames

> ID：15063192
> 
> 赞同：1
> 
> 时间：2013-02-25T08:52:41.987
> 
> 标签：c#, wpf, xaml, stroke, coloranimation

我喜欢用这个 ColorAnimationUsingKeyFrames

```
<Color x:Key="HighlightedColor">Yellow</Color>

<ColorAnimationUsingKeyFrames BeginTime="00:00:00.0000000"
              Duration="00:00:00.1000000"
              Storyboard.TargetName="HighlightAnimatedColorBrush"
              Storyboard.TargetProperty="Color"
              FillBehavior="HoldEnd">
    <ColorAnimationUsingKeyFrames.KeyFrames>
        <LinearColorKeyFrame Value="{StaticResource HighlightedColor}" KeyTime="00:00:00.5000000"/>
    </ColorAnimationUsingKeyFrames.KeyFrames>
</ColorAnimationUsingKeyFrames> 
```

多次。

目前我有这个解决方法

```
<shapes:MirrorTile InnerXRadius="5.0" 
                   InnerYRadius="5.0" 
                   OuterXRadius="57.0" 
                   OuterYRadius="57.0" 
                   MirrorTileAngle="45.0"
                   Fill="Green" 
                   StrokeThickness="2" 
                   CentrePoint="181.0, 181.0">
    <shapes:MirrorTile.Stroke>
        <SolidColorBrush x:Name="HighlightAnimatedColorBrush" Color="{StaticResource DefaultColor}"/>
    </shapes:MirrorTile.Stroke>

    <shapes:MirrorTile.Triggers>
        <EventTrigger RoutedEvent="MouseEnter">
            <BeginStoryboard>
                <Storyboard>
                    <ColorAnimationUsingKeyFrames BeginTime="00:00:00.0000000"
                                  Duration="00:00:00.1000000"
                                  Storyboard.TargetName="HighlightAnimatedColorBrush"
                                  Storyboard.TargetProperty="Color"
                                  FillBehavior="HoldEnd">
                        <ColorAnimationUsingKeyFrames.KeyFrames>
                            <LinearColorKeyFrame Value="{StaticResource HighlightedColor}" KeyTime="00:00:00.5000000"/>
                        </ColorAnimationUsingKeyFrames.KeyFrames>
                    </ColorAnimationUsingKeyFrames>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </shapes:MirrorTile.Triggers>
</shapes:MirrorTile>

<shapes:MirrorTile InnerXRadius="5.0" 
                   InnerYRadius="5.0" 
                   OuterXRadius="57.0" 
                   OuterYRadius="57.0" 
                   MirrorTileAngle="45.0"
                   StrokeThickness="2" 
                   Fill="Green" 
                   CentrePoint="181.0, 181.0"
                   OffsetAngle="45.0">
    <shapes:MirrorTile.Stroke>
        <SolidColorBrush x:Name="HighlightAnimatedColorBrush2" Color="{StaticResource DefaultColor}"/>
    </shapes:MirrorTile.Stroke>

    <shapes:MirrorTile.Triggers>
        <EventTrigger RoutedEvent="MouseEnter">
            <BeginStoryboard>
                <Storyboard>
                    <ColorAnimationUsingKeyFrames BeginTime="00:00:00.0000000"
                                  Duration="00:00:00.1000000"
                                  Storyboard.TargetName="HighlightAnimatedColorBrush2"
                                  Storyboard.TargetProperty="Color"
                                  FillBehavior="HoldEnd">
                        <ColorAnimationUsingKeyFrames.KeyFrames>
                            <LinearColorKeyFrame Value="{StaticResource HighlightedColor}" KeyTime="00:00:00.5000000"/>
                        </ColorAnimationUsingKeyFrames.KeyFrames>
                    </ColorAnimationUsingKeyFrames>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </shapes:MirrorTile.Triggers>
</shapes:MirrorTile> 
```

我喜欢将动画移动到资源中，只想将它绑定到任何对象（最后会有 40 个 MirrorTile）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:20:02.850

我不确定你指的是哪个 ResourceDictionary，但你应该能够写出这样的东西。请注意，没有`Storyboard.TargetName`更多了。

```
<!-- somewhere in Resources -->
<Storyboard x:Key="HighlightedColorStoryboard">
    <ColorAnimationUsingKeyFrames Duration="0:0:0.1"
                                 Storyboard.TargetProperty="Stroke.Color">
        <ColorAnimationUsingKeyFrames.KeyFrames>
            <LinearColorKeyFrame Value="{StaticResource HighlightedColor}"
                                 KeyTime="0:0:0.5"/>
        </ColorAnimationUsingKeyFrames.KeyFrames>
    </ColorAnimationUsingKeyFrames>
</Storyboard> 
```

然后像这样使用它（没有绑定）：

```
<shapes:MirrorTile.Stroke>
    <SolidColorBrush Color="{StaticResource DefaultColor}"/>
</shapes:MirrorTile.Stroke>

<shapes:MirrorTile.Triggers>
    <EventTrigger RoutedEvent="MouseEnter">
        <BeginStoryboard
            Storyboard="{StaticResource HighlightedColorStoryboard}"/>
    </EventTrigger>
    ...
</shapes:MirrorTile.Triggers> 
```

# mysql - sql查询区别

> ID：15063196
> 
> 赞同：2
> 
> 时间：2013-02-25T08:52:50.067
> 
> 标签：mysql, sql, tsql

我想知道这两个版本的结果是否相同，出于性能原因哪个更好，为什么？选择版本中的嵌套选择

```
select 
 t1.c1, 
 t1.c2, 
 (select Count(t2.c1) from t2 where t2.id = t1.id) as count_t 
from 
 t1 
```

**VS**

```
select t1.c1,t1.c2, Count(t2.c1)
from t1,t2
where t2.id= t1.id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T08:57:37.570

第一个查询类似于此查询 -

```
SELECT
  t1.c1,
  t1.c2,
  COUNT(t2.c1)
FROM t1
  LEFT JOIN t2
    ON t2.id = t1.id; 
```

它从第一个表中选择所有记录，并从第二个表中选择所有匹配的记录（它是**LEFT JOIN**条件）。

第二个是这个查询的模拟 -

```
SELECT
  t1.c1,
  t1.c2,
  COUNT(t2.c1)
FROM t1
  JOIN t2
    ON t2.id = t1.id; 
```

它只选择两个表中的匹配记录（它是**INNER JOIN**条件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T08:56:59.973

好吧，它们是不同的查询。如果表 t2 中没有匹配的 id，则顶部将选择 t1 中返回 0 的所有行作为计数。

第二个查询将只返回 t1 和 t2 都具有相同 id 的行的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:04:04.183

第一个查询可能会遇到大型数据集的性能问题。第二个查询可能存在笛卡尔问题。如果表 2 没有相关记录，我会根据您的意图使用连接或左连接来获取表 1 中的记录，然后添加一个 group by 语句来控制笛卡尔。

# tomcat - 将 JSTL 1.1 升级到 1.2 失败并出现 java.lang.AbstractMethodError: javax.servlet.jsp.PageContext.getELContext()Ljavax/el/ELContext

> ID：15063197
> 
> 赞同：0
> 
> 时间：2013-02-25T08:52:51.560
> 
> 标签：tomcat, jstl, tomcat7

使用 JSTL 时出现错误。请帮助我。

我在我的 tomcat 7 中使用 jstl-impl-1.2.jar 和 jstl-api-1.2.jar，我取出了 standard.jsp 和 jstl.jsp 但仍然遇到这个错误。

错误代码

```
java.lang.AbstractMethodError: javax.servlet.jsp.PageContext.getELContext()Ljavax/el/ELContext;
javax.servlet.jsp.jstl.core.LoopTagSupport.unExposeVariables(LoopTagSupport.java:624) 
```

Web.xml

```
<web-app 
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
version="3.0"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:29:59.513

你的`/WEB-INF/lib`，或者更糟的是，你的`JRE/lib`or`JRE/lib/ext`被特定于 servletcontainer 的库所污染，例如`jsp-api.jar`不同的旧版本的 servletcontainer make/version。您需要在 webapp 的`/WEB-INF/lib`. 这些库应该已经由 servletcontainer 本身提供，在您的情况下是 Tomcat。

在您的特定示例中，[`javax.servlet.jsp.PageContext.getELContext()`](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/JspContext.html#getELContext%28%29)Tomcat 的内部类请求该方法仅从 JSP 2.1 开始存在，但在 JSP API 中找不到它，因为您的webapp 在类加载方面优先于 Tomcat 自己的。

换句话说，在您将 JSTL 升级到与 Tomcat 6 兼容的版本之前，您的 Tomcat 7 一直像 Tomcat 5.5 或更早版本一样运行。

### 也可以看看：

*   [如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project/4076706#4076706)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:26:08.510

Sounds like versioning problem,maybe a conflicting jar file of some sort. See [this](http://www.coderanch.com/how-to/java/JstlTagLibDefinitions) may help.

# java - Java：将私钥从 Windows-my 写入文件 .pem

> ID：15063200
> 
> 赞同：3
> 
> 时间：2013-02-25T08:53:00.800
> 
> 标签：java, windows, certificate, keystore, pem

我正在尝试从 Windows-MY 密钥库获取证书和私钥并将它们写入文件，但我有一些问题使我认为 Java 不允许将 PrivateKey 从 Windows 密钥库写入文件：

```
try {
  KeyStore ks = KeyStore.getInstance("Windows-MY", "SunMSCAPI");
  ks.load(null, null) ;
  java.util.Enumeration en = ks.aliases() ;

while (en.hasMoreElements()) {
    String aliasKey = (String)en.nextElement() ;
    Certificate c = ks.getCertificate(aliasKey) ;       

    if (aliasKey.equals("myKey") ) {
          PrivateKey key = (PrivateKey)ks.getKey(aliasKey, "monPassword".toCharArray());
          Certificate[] chain = ks.getCertificateChain(aliasKey);

          //write key on PEM file
          wr1 = new FileWriter(directory.getPath() + "\\" + "key.pem");
          PemWriter pWr = new PemWriter(wr1);

          pemWr = new PEMWriter(wr1);           
        try {
             pemWr.writeObject(key);

        } catch (Exception e) {
            e.printStackTrace();
        }
        pemWr.flush();
        pemWr.close();

    }
}

 } catch (Exception ioe) {
System.err.println(ioe.getMessage());
 } 
```

我在文件中写入密钥时遇到异常：

```
org.bouncycastle.util.io.pem.PemGenerationException: unknown object passed - can't encode. 
```

使我对某种安全保护感兴趣的是：

1.  key != null 和 key.getAlgorithm() != null
2.  key.getEncode() == null 和 key.getFormat() == null
3.  如果我从文件中读取密钥，然后将其写入另一个文件，则代码有效，并且没有任何方法返回 null

如何在文件 .pem 上写入密钥？谢谢丹尼尔

# django - 为 gunicorn 创建 supervisord 脚本的正确方法？姜戈 1.6

> ID：15063206
> 
> 赞同：4
> 
> 时间：2013-02-25T08:53:30.873
> 
> 标签：django, nginx, gunicorn, supervisord

这是我的 gonicorn.conf，但我似乎无法正确使用命令。当我在命令行中键入它时，我尝试的命令正在工作，但不是作为主管命令。

```
[program:gunicorn]
directory = /home/USER/.virtualenvs/SITE/myApp/
command=/home/USER/.virtualenvs/SITE/bin/python /home/USER/.virtualenvs/SITE/myApp/manage.py run_gunicorn myApp.wsgi:application -c /home/USER/.virtualenvs/SITE/myApp/gunicorn.conf.py
user = USER
autostart = true
autorestart = true
redirect_stderr = true
stdout_logfile = /home/USER/logs/gunicorn.log
stderr_logfile = /home/USER/logs/gunicorn_err.log 
```

gunicorn 的正确命令是什么？

这是我尝试启动 gunicorn 时遇到的错误：

```
/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/sorl/thumbnail/helpers.py:5: DeprecationWarning: django.utils.simplejson is deprecated; use json instead.
  from django.utils import simplejson

2013-02-25 13:46:55 [3975] [INFO] Starting gunicorn 0.17.2
2013-02-25 13:46:55 [3975] [INFO] Listening at: http://127.0.0.1:8000 (3975)
2013-02-25 13:46:55 [3975] [INFO] Using worker: sync
2013-02-25 13:46:55 [3988] [INFO] Booting worker with pid: 3988
2013-02-25 13:46:55 [3988] [ERROR] Exception in worker process:
Traceback (most recent call last):
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/arbiter.py", line 485, in spawn_worker
    worker.init_process()
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/workers/base.py", line 100, in init_process
    self.wsgi = self.app.wsgi()
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/app/base.py", line 103, in wsgi
    self.callable = self.load()
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/app/djangoapp.py", line 133, in load
    return mod.make_command_wsgi_application(self.admin_media_path)
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py", line 113, in make_command_wsgi_application
    reload_django_settings()
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py", line 109, in reload_django_settings
    logging_config_func(settings.LOGGING)
  File "/usr/lib/python2.7/logging/config.py", line 777, in dictConfig
    dictConfigClass(config).configure()
  File "/usr/lib/python2.7/logging/config.py", line 503, in configure
    raise ValueError("dictionary doesn't specify a version")
ValueError: dictionary doesn't specify a version
Traceback (most recent call last):
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/arbiter.py", line 485, in spawn_worker
    worker.init_process()
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/workers/base.py", line 100, in init_process
    self.wsgi = self.app.wsgi()
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/app/base.py", line 103, in wsgi
    self.callable = self.load()
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/app/djangoapp.py", line 133, in load
    return mod.make_command_wsgi_application(self.admin_media_path)
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py", line 113, in make_command_wsgi_application
    reload_django_settings()
  File "/home/USERNAME/.virtualenvs/SITE/local/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py", line 109, in reload_django_settings
    logging_config_func(settings.LOGGING)
  File "/usr/lib/python2.7/logging/config.py", line 777, in dictConfig
    dictConfigClass(config).configure()
  File "/usr/lib/python2.7/logging/config.py", line 503, in configure
    raise ValueError("dictionary doesn't specify a version")
ValueError: dictionary doesn't specify a version 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-15T01:43:15.743

可以通过将此变量添加到您的设置文件来修复该特定错误。我在将 Django 项目从 Django 1.3 升级到 Django 1.5 时遇到了这个问题。（有关更多信息，请参阅[https://docs.djangoproject.com/en/dev/topics/logging/](https://docs.djangoproject.com/en/dev/topics/logging/)）

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:03:48.390

```
[program:projectname_gunicorn_live]
command=/home/myusername/projectname-live/bin/django run_gunicorn -b 127.0.0.1:1559
directory=/home/myusername/projectname-live/
user=myusername
autostart=True
autorestart=True
redirect_stderr=True 
```

链接：[https ://gist.github.com/oaksakal/1143612](https://gist.github.com/oaksakal/1143612)

另一个链接：[Gunicorn Supervisor 启动错误](https://stackoverflow.com/questions/14464533/gunicorn-supervisor-startup-error)

# c# - 网络服务是独立的还是可以使用外部类

> ID：15063207
> 
> 赞同：0
> 
> 时间：2013-02-25T08:53:32.113
> 
> 标签：c#, web-services

Web 服务可以使用我在项目中拥有的其他类，还是应该是独立的并且只使用它自己的方法？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:54:35.743

您可以创建其他类的实例并使用它们来执行工作。

同一项目或引用项目中的任何类都应该可用，但须遵守通常的访问修饰符。

您要么需要包含 using 语句。以下示例假设您要使用`SomeClass`位于`MyAssembly.SomeLibrary`：-

```
using MyAssembly.SomeLibrary;

// in code block somewhere
var thing = new SomeClass(); 
```

或完全限定类的名称。

```
 var thing = new MyAssembly.SomeLibrary.SomeClass(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:54:40.983

> Web 服务是否可以使用我在项目中拥有的其他类？

是的，它可以。您还可以在序列化后返回您的自定义类对象。*您会看到 web 服务仅（内部）*与原始类型交互，这是非常不寻常的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T09:05:10.370

听起来您是在询问最佳实践，而不是“这在技术上是否可行”。答案取决于您想使用的类，但一般来说，在 Web 服务中使用您想要的任何其他类或库是可以接受的，因为这不会影响客户端能够使用该服务（即在服务端并不意味着客户端 1 也必须安装 LibraryA 才能使用您的服务）。

可以在服务端重用这些类（在 Visual Studio 中，这是通过在配置服务引用时勾选“在引用的程序集中重用类型”框然后添加对适当项目/dll 的引用来完成的），但我通常会建议不要这样做，因为它可能会混淆问题 - 并非所有客户端在使用您的服务时都可以访问这些 dll。

# java - 将json文件写入磁盘的快速方法

> ID：15063211
> 
> 赞同：2
> 
> 时间：2013-02-25T08:53:38.180
> 
> 标签：java, json, performance, io, twitter

我有一个从 Twitter API 获取推文的项目，我需要尽快将它们**（JSON）**写入磁盘。所有推文都进入同一个文件，但每 10 分钟创建一个新文件来存储下一条推文。在 Java 中，这是最好的方法吗？一个简单的 FileWriter？一个缓冲的？映射到内存？

# javascript - 从 htmlgreasemonkey 中提取信息

> ID：15063216
> 
> 赞同：2
> 
> 时间：2013-02-25T08:53:58.100
> 
> 标签：javascript, regex, greasemonkey, information-extraction

所以我正在尝试编写一个greasemonkey 脚本来为我在在线游戏中放置瓷砖。我已经弄清楚了放置图块，但是为了扩展脚本，我需要将循环限制为移动次数。我想不出从页面的 html 中提取此信息的最佳方法：

```
<h2>5</h2>Level:<font size="4px" color="red"> 1455</font><br><br>Moves:<font size="4px" color="red"> 0</font><br>Total:<font size="4px" color="red"> 688</font><br><br><a href="logout.php"> 
```

我只是在寻找有关如何对付这种野兽的指示。正则表达式？

编辑：这个 div 的完整代码是

```
 <div id="info">

<img src="images/mmosbg_title.png" onclick = "getinfo('boardinfo.php', 'info')"; height="48" width="138" border="0"><br><br><a href="board5.php?size=5&border=0"><img src="boxes/990000.gif" border="0" width="5 px" height="5 px" onmouseover="Tip('Micro Board Size', BGCOLOR, '#FFCC00', WIDTH, -200, OPACITY, 95, SHADOW, true, SHADOWWIDTH, 7)" onmouseout="UnTip()"></a><a href="board5.php?size=10&border=0"><img src="boxes/990000.gif" border="0" width="10 px" height="10 px" onmouseover="Tip('Small Board Size', BGCOLOR, '#FFCC00', WIDTH, -200, OPACITY, 95, SHADOW, true, SHADOWWIDTH, 7)" onmouseout="UnTip()"></a><a href="board5.php?size=16"><img src="boxes/990000.gif" border="0" width="16 px" height="16 px" onmouseover="Tip('Medium Board Size', BGCOLOR, '#FFCC00', WIDTH, -200, OPACITY, 95, SHADOW, true, SHADOWWIDTH, 7)" onmouseout="UnTip()"></a><a href="board5.php?size=32"><img src="boxes/990000.gif" border="0" width="32 px" height="32 px" onmouseover="Tip('Large Board Size', BGCOLOR, '#FFCC00', WIDTH, -200, OPACITY, 95, SHADOW, true, SHADOWWIDTH, 7)" onmouseout="UnTip()"></a><h2>5</h2>Level:<font size="4px" color="red"> 1455</font><br><br>Moves:<font size="4px" color="red"> 0</font><br>Total:<font size="4px" color="red"> 688</font><br><br><a href="logout.php"><img src="images/logout.png" border="0" onmouseover="Tip('Logout', BGCOLOR, '#FFCC00', WIDTH, -200, OPACITY, 95, SHADOW, true, SHADOWWIDTH, 7)" onmouseout="UnTip()"></a><a href="history.php"><img src="images/pastwinners.png" border="0" onmouseover="Tip('Past Winners', BGCOLOR, '#FFCC00', WIDTH, -200, OPACITY, 95, SHADOW, true, SHADOWWIDTH, 7)" onmouseout="UnTip()"></a><br><br><font color="red" font="5px">Current Rankings</font><img src="images/questionsmall.png" onmouseover="Tip('Current Rankings<br>(rank)(name)(total)(moves)', BGCOLOR, '#FFCC00', WIDTH, -300, OPACITY, 95, SHADOW, true, SHADOWWIDTH, 7)" onmouseout="UnTip()"></a><br><br><font color="red">1530</font> of 1600 (96 %)<br><br>1 <font color="red">iannis5</font> <font color="red">795</font> <font color="black">292</font><br><img src="boxes/0000CD.gif" width="16" height="16" ><br>2 <font color="black">5</font> <font color="red">688</font> <font color="black">0</font><br><img src="boxes/990000.gif" width="16" height="16" ><br>3 <font color="darkred">yellowfestiva5</font> <font color="red">47</font> <font color="black">6</font><br><img src="boxes/FFDAB9.gif" width="16" height="16" ><br>
</div> 
```

我知道这很丑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:26:09.443

问题 HTML 看起来格式不正确且不完整。所有这些的包含节点是什么？

无论如何，为了从糟糕的 HTML 中提取信息，您可以使用钝力正则表达式来获得快速而肮脏的解决方案：

```
var moves       = 0;

var movesMatch  = document.body.textContent.match (/Moves:\s*(\d+)(?:\D)/);
if (movesMatch  &&  movesMatch.length > 1) {
    moves       = parseInt (movesMatch[1], 10);
}
console.log ("The number of moves left is: ", moves); 
```

在这种情况下这可能有效，但除了最简单的页面之外，所有页面都很脆弱（可能“找到”错误信息）。

* * *

**最好的过程**是使用 DOM 技术尽可能地缩小文本范围：

1.  如果可能的话，识别独特且持久的节点，这些节点理想地包含所需的信息或以稳定的方式靠近它。

    寻找`id`属性（最好），或`class`名称（好），或属性（可以）。您希望获得所需信息的良好“CSS 路径”。这可以提供给`querySelector`jQuery 或 jQuery。请注意，Firebug 将为您提供一个原始 CSS 路径，您可以将其用作开始。

    例如，对于这样的 HTML：

    ```
    <div id="dress-sizes">
        <ul>
            <li>
                <span class="dSize" data-color="green">13</span>
            </li>
            <li>
                <span class="dSize" data-color="green">8</span>
            </li>
        </ul>
    </div> 
    ```

    找到绿色连衣裙尺寸的一个很好的选择器是：

    ```
    "#dress-sizes ul li span.dSize[data-color='green']" 
    ```

2.  如果找不到好的 CSS 路径，您可能不得不求助于 XPath（firebug 或 Chrome 会为您提供）。但我只需要那一次

3.  一旦您找到了选择确切节点（理想）、父节点或可靠兄弟节点的好方法；使用 RegEx 过滤的额外内容要少得多（或没有）。这减少了错误命中的可能性。

* * *

在这种情况下，唯一给出的唯一节点是注销链接`<a href="logout.php">`。这看起来很耐用。也就是说，当网站被修改时，它不太可能发生太大变化。但可能有不止一个注销链接。

因此，关闭该节点，这是迄今为止我们可以用给出的 HTML 做的最好的事情：

```
var anchorNode  = document.querySelector ("a[href='logout.php']");
var siblingText = anchorNode.parentNode.textContent;
var moves       = 0;

var movesMatch  = siblingText.match (/Moves:\s*(\d+)(?:\D)/);
if (movesMatch  &&  movesMatch.length > 1) {
    moves       = parseInt (movesMatch[1], 10);
}
console.log ("The number of moves left is: ", moves); 
```

* * *

* * *

**更新：** 现在容器是已知的，并且它很好地有一个`id`，使用：

```
var containerNode   = document.querySelector ("#info");
var siblingText     = containerNode.textContent;
var moves           = 0;

var movesMatch      = siblingText.match (/Moves:\s*(\d+)(?:\D)/);
if (movesMatch  &&  movesMatch.length > 1) {
    moves           = parseInt (movesMatch[1], 10);
}
console.log ("The number of moves left is: ", moves); 
```

# jquery - 如何在 .jsp 文件中接收 Ajax 发送的数据

> ID：15063218
> 
> 赞同：0
> 
> 时间：2013-02-25T08:54:23.120
> 
> 标签：jquery, ajax, jsp

我在 JQuery 中使用 Ajax 调用将一些数据发送到 JSP 文件。这是代码：

```
$.post("myscript.jsp",
    { sg: data1, st: data2 },
    function(data){
       alert("Data Loaded: " + data);
    }
); 
```

我的问题是，如何接收 myscript.jsp 中的数据？我需要数据在jsp中执行一些计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:57:57.627

您可以从请求中获取参数，例如：

```
String data1 = request.getParameter("sg");
String data2 = request.getParameter("st"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:00:48.187

试试这个

```
 var params ="your parameters to send";

            var resultStringX = $.ajax({
            type: "POST",
            url:"myscript.jsp",//jsp,servlet,struts action
            data: params,
            async: false
            }).responseText;
            resultStringX=$.trim(resultStringX);

            //here the result will be stored in resultStringX 
```

或者

```
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#call').click(function ()
            {
                $.ajax({
                    type: "post",
                    url: "myscript.jsp", //here you can use servlet,jsp, etc
                    data: "input=" +$('#ip').val()+"&output="+$('#op').val(),
                    success: function(msg){      
                            $('#output').append(msg);
                    }
                });
            });

        });
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    input:<input id="ip" type="text" name="" value="" /><br></br>
    output:<input id="op" type="text" name="" value="" /><br></br>
    <input type="button" value="Call JSP" name="Call JSP" id="call"/>
    <div id="output"></div>
</body> 
```

# javascript - 从 touchstart 事件 javascript 获取图像 ID

> ID：15063221
> 
> 赞同：0
> 
> 时间：2013-02-25T08:54:30.157
> 
> 标签：javascript, image, touchstart

我正在开发一个应用程序，其中有 5 张图像，并且我想在 touchstart 事件开始时获取图像的 ID，因为我想将这些图像移动到某个位置。我正在使用 JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:01:15.863

如果您使用 jQuery，并假设您已将 touchstart 事件绑定到图像

```
$('img').bind('touchstart', function() {
    var imageId = this.id;    
}); 
```

# php - PHP Cron 作业 windows 和 linux

> ID：15063228
> 
> 赞同：2
> 
> 时间：2013-02-25T08:55:01.047
> 
> 标签：php, linux, windows, cron

*我需要在 windows(shared)/linux(shared)/ wamp*服务器上设置 cron/automatic taks 。

问题是该项目在多个环境中运行。

那么设置 cron/scheduled taks 的最佳方法是什么？

实际上，我需要做的是检查电子邮件服务器是否有新电子邮件，如果发现某些内容，请将其保存到本地数据库。如果您除了 cron 工作之外还有其他选择，请告诉我。

谢谢。

编辑：

正如我在问题中提到的，我有多个电子邮件/过滤，所以我需要在后台运行一些东西来**定期**获取数据。`CRON`在 linux 和`Scheduled Tasks`Windows 上。但真正的问题是我是在**共享主机**上做的（或者它取决于客户端）所以我**不能使用** `CRON`/ `Scheduled Tasks`。

例如：项目安装在 GOdaddy windows 共享主机上，它是一个 windows 服务器，因此（通常）不支持`CRON`并且他们不允许使用`Scheduled Tasks`。

> 问题是：CRON/ 有什么替代方案`Scheduled Tasks` 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:55:28.767

# 简答

我不知道可以满足您需求的 CRON/ScheduledTask 的替代品。
我建议您将时间表外包给另一台服务器，请参阅下面的可能性。

我想出了以下几种可能性：

## 与 CRON 作业共享主机（最简单）

寻找允许您添加 cron 作业（例如通过网络空间管理）的共享托管服务提供商。HostEurope（德语）就是这样的东道主。

## 您拥有一个专用（虚拟）服务器

假设您将此项目部署到多个共享服务器但自己拥有专用（虚拟）服务器：
使您的脚本公开可用，但使用强大的授权机制保护它。（难以猜测的请求令牌，将某些 IP 列入白名单作为被调用者，...）。在您自己的服务器上设置一个 cron 作业，该作业调用客户端虚拟主机上的脚本。

## 您没有服务器

作为最后一种可能性，但您没有专用服务器。
在某个云提供商（例如 OpenShift）上设置一个虚拟机并在那里添加 cronjob。不要将此实例用于其他工作，它应该可以完美满足您的需求（参考：[https](https://openshift.redhat.com/community/blogs/getting-started-with-cron-jobs-on-openshift) ://openshift.redhat.com/community/blogs/getting-started-with-cron-jobs-on-openshift ）

## 要求不符合基础设施（可能！）

您的客户/项目有不适合共享托管环境的要求。强烈建议您获得满足您真正需求的托管计划。共享主机和第一台虚拟服务器或专用主机之间的价格差异并没有那么大，以至于调查是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:44:41.280

正如其他人所建议的那样，如果这是一个网页，您可以使用 wget 来运行它。如果它是 CLI 脚本，则必须使用 php /directory/filepath.php 运行它。如果实际问题是如何定期运行它，则必须在 *NIX 上使用 cron 并在 windows 服务器上使用计划任务。如果要自动安装 cron，则必须检查操作系统并根据操作系统是 windows 还是 *NIX 采取行动。谷歌搜索将为您提供有关如何在两种环境中执行此操作的结果。

**在红色澄清后编辑** 正如塞缪尔赫尔佐格所说的那样，在共享主机上，您（通常）有一个控制面板。最知名的 Linux 有：

面板：[http ://www.siteground.com/tutorials/cpanel/cron_jobs.htm](http://www.siteground.com/tutorials/cpanel/cron_jobs.htm)

Plesk： http: [//www.hosting.com/support/plesk/crontab](http://www.hosting.com/support/plesk/crontab)

Webmin：[使用 Webmin 设置 cron 作业](https://stackoverflow.com/questions/5832511/setting-up-a-cron-job-with-webmin)

对于 Windows，我只对 plesk 有一些熟悉，其过程与以前相同。

如果您没有控制面板但有 shell 访问权限（linux），您可以按照[本](http://www.thesitewizard.com/general/set-cron-job.shtml "这个")教程进行操作。

如果您没有控制面板但有远程桌面（Windows），您可以按照[本](http://www.hosting.com/support/windows-server-2003/create-a-scheduled-task-in-windows-server-2003 "这个")教程进行操作。

如果您没有上述任何一项，您应该遵循 Samuel Herzog 关于云提供商上的 vm 的建议，或者考虑升级到 VPS 或专用服务器。

# mysql - 一个 mysql 查询给出 6 个重复值而不是 1 个重复值的输出

> ID：15063234
> 
> 赞同：0
> 
> 时间：2013-02-25T08:55:27.313
> 
> 标签：mysql, unique

我无法从我的查询中获得独特的结果。这里提到的查询显示重复值 6 次，而不是给出唯一答案。我怎样才能只得到一次结果？

```
SELECT step1 . * , TIME_FORMAT( step2.insert_time,  '%H:%i:%s' ) AS insert_time, 
 DATE_FORMAT( step2.insert_time, '%d-%b-%Y %h:%i:%s' ) tradate, b.batch_name, 
 a.student_rollno, a.student_name, sf.bif_code, sb.subject_name, s.stream_code, 
 c.class_code, dv.division_code, 
 CONCAT( faculty_fname,  ' ', faculty_lname ) facultyname
FROM csm_batch b, csm_step1 step1
INNER JOIN csm_class c ON c.class_code = ClassID
LEFT JOIN csm_stream s ON s.stream_code = StreamID
LEFT JOIN csm_subject sb ON sb.subject_code = SubjectID
LEFT JOIN csm_subject_bif sf ON sf.bif_code = BifID
LEFT JOIN csm_division dv ON dv.division_code = DivID
LEFT JOIN csm_faculty ad ON ad.faculty_id = FacultyID
INNER JOIN csm_step2 step2 ON step2.SessionID = step1.SessionID
LEFT JOIN csm_student a ON a.student_nfc_code = step2.StudentID
WHERE 0 =0
AND step2.SessionID =  '17f32204f8fe4c'
LIMIT 0 , 30 
```

# asp.net - 提交时 ASP.NET MVC 3 模型为空

> ID：15063235
> 
> 赞同：1
> 
> 时间：2013-02-25T08:55:39.180
> 
> 标签：asp.net, asp.net-mvc-3

**看法**

```
@model Survey.Models.TakeSurveyViewModel
@{    
    Layout = "~/Views/Shared/_SiteLayout.cshtml";
}

<h2>SURVEY : @Model.Title</h2>
<h3>@Model.Description</h3>
<hr />

@using (Html.BeginForm("SubmitSurvey", "HomePage", FormMethod.Post, new { id = "surveyForm" }))
{
    for (int index = 0; index < Model.SurveyQuestions.Count; index++)
    {
        @* Editor Template - Null result *@ 
        @*SurveyQuestionModel item = Model.SurveyQuestions[index];
        @Html.EditorFor(x => item);*@

        <p>@Model.SurveyQuestions[index].QuestionText</p>
        @Html.DropDownListFor(item => Model.SurveyQuestions[index].OptionId, new SelectList(Model.SurveyQuestions[index].Options, "OptionId", "OptionText"), string.Empty)
    }
    <input type="submit" value="SubmitSurvey" />
} 
```

**视图模型**

```
public class TakeSurveyViewModel
    {
        public string Title { get; set; }
        public string Description { get; set; }
        public int SurveyId { get; set; }

        public List<SurveyQuestionModel> SurveyQuestions { get; set; } 

        public TakeSurveyViewModel() { }

        public TakeSurveyViewModel(int surveyId)
        {
            //Populate data - works ok.
        }
    } 
```

**下拉列表模型**

```
public class SurveyQuestionModel
    {
        public int QuestionId { get; set; }
        public string QuestionText { get; set; }

        [Required(ErrorMessage = "Please select an option.")]        
        public int OptionId { get; set; }

        public IEnumerable<QuestionOption> Options { get; set; } 
    } 
```

该页面呈现良好，所有下拉菜单都带有正确的选项。每个 select 的 id 和 name 也是唯一的 -
`id="SurveyQuestions_3__OptionId" name="SurveyQuestions[3].OptionId"`

**控制器动作**

```
[HttpPost]
public ActionResult SubmitSurvey(TakeSurveyViewModel model)
{
     return !ModelState.IsValid ? TakeSurvey(model.SurveyId) : null;
} 
```

但是点击提交按钮，控制器动作模型为空。

编辑：删除了 2x HTML.BeginForm

编辑 2：SurveyQuestions 现在有公共设置器。问题似乎仍然存在。请看这张图片：

![在此处输入图像描述](../Images/af155568f2bfd7c11611448f674709e8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:59:07.590

问题是您将 SurveyQuestions 设为私有集吗？

- 旧答案-
*你有 2 x (Html.BeginForm(Html.BeginForm 我曾经忘记将我的表单放在一个`using`做同样事情的语句中。*

# database - 生成 Wordpress 帖子

> ID：15063247
> 
> 赞同：0
> 
> 时间：2013-02-25T08:56:19.670
> 
> 标签：database, wordpress

有没有办法为 Wordpress 生成帖子/页面？我有一个单独的数据库，其中包含我想使用的信息。例如，我想用我自己的数据库中的 ID 创建帖子作为 Wordpress 中的链接。

我认为这是方式：[http](http://codex.wordpress.org/Function_Reference/wp_insert_post) ://codex.wordpress.org/Function_Reference/wp_insert_post虽然我不知道把它放在哪里。functions.php 还是 post.php？是否可以间隔调用它？也许通过cronjob。

如果有人能指出我正确的方向/确认我走在正确的道路上，那将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T21:00:35.853

是的，`wp_insert_post`是正确的功能，但代码应该在[你自己的 Plugin](http://codex.wordpress.org/Writing_a_Plugin)中。

然后设置一个 WP Cron 作业[`wp_schedule_event`](http://codex.wordpress.org/Function_Reference/wp_schedule_event)

# php - PHP 表单数据，UTF-8 编码，符号被破坏

> ID：15063250
> 
> 赞同：0
> 
> 时间：2013-02-25T08:56:41.423
> 
> 标签：php, html, utf-8

我的任务是制作一个简单的“密码”脚本。密码是通过随机替换提供的字符串中的其他字符来构造的，然后在密文末尾将替换作为附加字符串发出。

这似乎适用于字母数字字符和一些符号。但是，我尝试向脚本发出英镑符号 (£)，但它停止工作。

现在，我检查了我在每一步都使用了 UTF-8 编码。

该脚本由 1 页组成。在我的 PHP 文件的顶部，我有：

```
<?php header("content-type: text/html; charset=utf-8"); ?> 
```

在我的 HTML 页面中，我在该`<head>`区域有这个：

```
<meta charset="utf-8" /> 
```

在我的“密码”和“解密”形式中，我有：

```
accept-encoding="utf-8" 
```

当我在 Chrome 中加载页面时，当我签入工具 -> 编码时，它似乎正在使用 UTF-8 编码。

问题似乎是，当我的脚本逐个遍历每个字符时，它认为 GBP 符号的长度为 2 个字符。即使我使用`strlen`or也是如此`mb_strlen`。

是否有某种方法可以将 GBP 符号和其他符号（尚待测试）缩减为一个字符的长度？或者我是否需要编写一些额外的逻辑来检测当前字符是长度为 2 的特殊字符，并相应地推进我的迭代器？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:37:36.093

我找到了解决方案，所以不想让我的问题悬而未决，以防其他人遇到类似问题。

我正在创建一个非常简单的随机替换密码。密文应随机将字母替换为字符串中的其他字母。因此，您拥有的字母越多，它看起来就越模糊。但密文还以随机方式在字符串末尾包含替换表。所以，这里有几个例子：

`Hello, World!`

变成

`Ho,,!lrd! ,We rl,HHWd,l!eeor dWo!`, 或`,Wlle!Hoe lrd Hr eW!doeWoH,lldr,!`, 或`W,HHodleorH !d lH,doorr lHW!!e,We`.

我正在遍历原始字符串，在循环中的位置找到字母，并存储原始字符和替换字符。Unicode 字符的问题在于，它们似乎以 Unicode 翻译字符为前缀，实际上将其转换为 2 字节字母。为了解决这个问题，我简单地检测了当前在循环中该位置使用的字符是否是字符代码 194，如果是，则将下一个字符添加为同一“字母”的一部分。

为了找到字符代码，我使用了以下 PHP 代码：`if(ord($letter) == 194){ ... }`

这成功地帮助我处理了我可能扔给它的所有角色。

# php - PHP 同步数组键

> ID：15063257
> 
> 赞同：-1
> 
> 时间：2013-02-25T08:57:09.097
> 
> 标签：php, arrays, csv

假设我们有动态生成的数组。

```
 $arr[1]["a"] = "value";
    $arr[1]["b"] = "value";
    $arr[1]["c"] = "value";

    $arr[2]["a"] = "value";
    $arr[2]["b"] = "value";
    $arr[2]["c"] = "value";
    $arr[2]["d"] = "value";

    $arr[3]["a"] = "value";
    $arr[3]["g"] = "value"; 
```

生成Array是可以操作的，所以不要把这个例子当成核心线。如您所见，有不同的键，但最后我们必须得到：

```
$arr[1]['a'] = 'value';
$arr[1]['b'] = 'value';
$arr[1]['c'] = 'value';
$arr[1]['d'] = 'empty value';
$arr[1]['g'] = 'empty value';

$arr[2]['a'] = 'value';
$arr[2]['b'] = 'value';
$arr[2]['c'] = 'value';
$arr[2]['d'] = 'value';
$arr[2]['g'] = 'empty value';

$arr[3]['a'] = 'value';
$arr[3]['b'] = 'empty value';
$arr[3]['c'] = 'empty value';
$arr[3]['d'] = 'empty value';
$arr[3]['g'] = 'value'; 
```

非空值是不同的，所以 array_merge 不是很好用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:12:08.013

我想你想要这个（这非常低效，但我的大脑正在挣扎）

```
$keys = array();
foreach($arr as $array){
   $keys = array_merge($keys, array_keys($array));
}
//$keys now has all unique keys
foreach($arr as $array){
   foreach($keys as $key){
      if(!isset($array[$key])){$array[$key] = null}
   }
} 
```

这是未经测试的，但我认为它应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:05:58.707

我猜你想用默认值填充你的数组......你可以用它`array_fill`来做到这一点

```
$keys = array("a","b","c","d","g");
$arr[1] = array_combine($keys,array_fill(0, 5, 'empty value'));

$arr[1]["a"] = "value";
$arr[1]["b"] = "value";
$arr[1]["c"] = "value";

print_r($arr[1]); 
```

输出

```
Array
(
    [a] => value
    [b] => value
    [c] => value
    [d] => empty value
    [g] => empty value
) 
```

# node.js - 有没有办法通过 Express + Node.js 使用多个视图引擎

> ID：15063262
> 
> 赞同：27
> 
> 时间：2013-02-25T08:57:20.583
> 
> 标签：node.js, express, handlebars.js, pug, viewengine

**场景：我使用**[Node.js](http://nodejs.org)、[Express](http://expressjs.com) + [Handlebars](http://handlebarsjs.com/)作为视图引擎和[MongoDB](http://www.mongodb.org/)开发了一些事务性页面。

现在的问题是在模块集成期间，我得到了一些基于[Express](https://github.com/visionmedia/express) + [Jade](http://jade-lang.com/)作为视图引擎的页面。

**问题**：如何集成基于*Handlebars*的页面和一些基于*Jade*的页面？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-25T10:05:36.780

1.  在**package.json**中添加引擎和[consolidate.js](https://github.com/visionmedia/consolidate.js)
***   在**你的app.js**

    var engine = require('consolidate');

    app.engine('jade',engines.jade);

    app.engine('车把'，engines.handlebars);** 

 **更多信息[在这里](http://expressjs.com/api.html#app.engine)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-02-26T04:57:35.393

> Express 4.0 及更高版本的解决方案（直到再次更改）

1.  NPM 安装你需要的引擎。

    ```
    // some examples
    npm install ejs
    npm install pug
    npm install handlebars 
    ```

2.  设置要在您的`app.js`.

    ```
    app.set('view engine', 'pug');
    app.set('view engine', 'ejs'); 
    ```

3.  渲染您的模板，请务必设置文件扩展名。

    ```
    // forces usage of the respective render engine by setting the file extension explicitly.
    res.render( 'about.ejs', { title: 'About' } );
    res.render( 'about.pug', { title: 'About' } ); 
    ```

4.  更多使用示例的文档。

    *   [https://expressjs.com/en/guide/using-template-engines.html](https://expressjs.com/en/guide/using-template-engines.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-02T14:01:26.737

**编辑**

在与 Amol M Kulkarni 下面的评论讨论之后，我又回来分析了这些。

事实证明，这比我想象的要容易得多，我必须回到这里分享我的解决方案。使用巩固，这样做：

首先做要求。

```
var engines = require('consolidate'); 
```

然后你可以删除或设置引擎并查看引擎......
我已经尝试删除所有`app.engine`并且`app.set('view engine', '...');`它确实有效。但是，将其设置为 not`'html'`仅适用于一个引擎。所以我只是确定了它。
我已经这样设置了：

```
app.engine('html', engines.swig); // take note, using 'html', not 'ejs' or 'pug'..
app.set('view engine', 'html'); // also 'html' here. 
```

然后稍后当您执行 . 时`app.render`，只需确保它具有文件扩展名并且它会很好地工作。

```
res.render( 'theme.ejs', {}); // will render with ejs
res.render( 'theme.pug', {}); // will render with pug 
```

只需确保安装了这些引擎（pug、ejs 等），然后 consolidate 将完成剩下的工作。

* * *

**老答案**。
关于@Sergii 的回答，它对我没有 100% 的作用。有时我正在使用的模板中会出现错误。但是有一个错误的错误消息说在这个目录中查找这个模板失败。

我尝试了@azariah 解决方案，但仍然没有用。

```
app.set('view engine', 'pug'); // does not make sense.
app.set('view engine', 'ejs'); // overriding the last .set() 
```

如前所述，对我有用的是使用 consolodate.js。像往常一样
添加。 然后，在每次调用 render 时，我都会设置.`app.set('view engine', 'pug');`
`'view engine'`

像这样：

```
req.app.set('view engine', 'ejs');
res.render( 'theme', theme ); 
```

我对此的担忧是，当更多同时用户访问具有不同引擎的页面时，不确定这是否会发生冲突并返回我遇到的错误查找。

但我猜渲染速度太快了，应该在`req.app.set`调用另一个渲染时完成。**

# clojurescript - clojurescript 高级编译 - 大小

> ID：15063265
> 
> 赞同：6
> 
> 时间：2013-02-25T08:57:33.650
> 
> 标签：clojurescript

我是clojurescript的新手。

高级编译后有“77 KB”的javascript文件是否正常？

我有一个 clojurescript 文件：

我正在使用 leinigen：lein cljsbuild 一次

```
(ns my-staff.core)
 (defn ^:export main []
   (.write js/document "<p>Hello from my_staff.core.main()</p>")) 

(defproject my-staff "0.1.0-SNAPSHOT"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.clojure/clojurescript "0.0-1586"]]
  :source-paths ["src-clj"]; source path for clojure
  :plugins [[lein-cljsbuild "0.3.0"]]
  :cljsbuild {
     :builds [{
          :source-paths ["src-cljs"]
          :compiler {
          :output-to "public/javascripts/main.js"
          :optimizations :advanced
          :pretty-print false}}]}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T13:56:09.243

是的，这很正常。Google Closure 编译器无法优化 clojurescript 编译器当前发出的一些代码。预计这将随着时间的推移而改善。检查[CLJS-257](http://dev.clojure.org/jira/browse/CLJS-257)的进度。

# c++ - 让 doxygen 知道 cpp 中的命名空间

> ID：15063270
> 
> 赞同：8
> 
> 时间：2013-02-25T08:57:47.650
> 
> 标签：c++, doxygen

我们有一个使用 doxygen 记录的 c++ 项目，只将 doxygen 注释放在类的标题中，我们在 cpp 中记录静态函数。

我们的 doxygen 配置文件收集项目内的任何头文件 /hpp) / implementation /cpp) 文件。此外，我们有相当多的独立组件（和外部组件）被隔离在命名空间内。

该项目以我们使用多态的方式完成（由于代理模式的广泛使用）

由于这是一种常见的做法，我们禁止在头文件中*使用 using*指令，并在实现文件中使用它。

通常，我们在标题中：

```
/**
 * @brief
 *   test from A
 */
void f(N1::N2::A);
/**
 * @brief
 *   test from A
 */
void f(N1::N2::B); 
```

在实现内部，我们有

```
using namespace N1::N2;

void f(A) { }
void f(B) { } 
```

运行 doxygen 时，他似乎很困惑并产生错误消息：

```
warning: no uniquely matching class member found for f(A)
possible candidates:
void f(N1::N2::A)
void f(N1::N2::B) 
```

知道如何摆脱这些错误并使 doxygen 了解“使用”指令吗？

**编辑**

*   坏消息，似乎在错误跟踪器上打开：[https](https://bugzilla.gnome.org/show_bug.cgi?id=617285) ://bugzilla.gnome.org/show_bug.cgi?id=617285 ，[https](https://bugzilla.gnome.org/show_bug.cgi?id=154880) ://bugzilla.gnome.org/show_bug.cgi?id=154880 ：看起来像我'正在寻找一种解决方法，而不是一个干净的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:46:58.113

没有找到解决方法，我们恢复为在实现中使用完整的命名空间以与标头定义完全匹配。将其标记为已关闭，我的损失:-(查看问题中的评论/编辑可能会对读者有所帮助

# php - 更改 PHP 网站中每个页面的元数据

> ID：15063273
> 
> 赞同：1
> 
> 时间：2013-02-25T08:57:59.510
> 
> 标签：php, html, web, meta-tags, meta

看看这个：[如何制作具有相同设计的网页](https://stackoverflow.com/questions/13141074/how-to-make-webpages-with-the-same-design)。我用它制作了一个名为[X Phoenix](http://www.xphoenix.co.in/)的网站。当我在谷歌上输入 X Phoenix 时，它并没有排在首位，尽管我已经把它放在谷歌网站管理员上并且已经 4 个月了。它没有出现在我在 Google 搜索中可以看到的任何地方。在[这个 pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//webmasters/docs/search-engine-optimization-starter-guide.pdf)中，所有页面都使用不同的关键字、标题和描述。但是在我的网站中，我使用了将头部和正文中的其他一些东西放在一个名为 header.php 的文件中的方法，并将我的内容下面的东西放在 footer.php 中，然后放在一个页面中。home.php，我把：

```
<?php include('header.php'); ?>
my text
<?php include('footer.php'); ?> 
```

我的元数据在标题中，所以我如何在每个页面中更改它。
如何编写关键字，即 xphoenix、x、phoenix、f1 等。
还告诉我其他方法可以使我的网站在 google 之上并使其看起来更好。
请给我一些关于站点地图的信息以及如何制作它们。
如果我有名字：team x phoenix，我应该在关键字中写 team,x,phoenix 还是 team x phoenix。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T09:01:13.283

例如，您可以这样做：

在你家.php

```
$meta1 = 'My meta tag text';
include('header.php');
echo 'my text';
include('footer.php'); 
```

在您的 header.php 中，您可以这样做：

```
<meta name="description" content="<?php echo $meta1; ?>"> 
```

*   对于 seo，您可以查看此链接：[SEO](http://katemats.com/what-every-programmer-should-know-about-seo/)
*   对于站点地图生成器，您可以在这里查看：[站点地图](http://www.xml-sitemaps.com/)

但我认为最好只使用谷歌。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T09:00:57.000

您可以通过以下方式在每个页面上定义不同的元标记：

```
$meta['keywords'] = "Keyoword, more words, ...";
$meta['description'] = "...";
<?php include('header.php'); ?>
my text
<?php include('footer.php'); ?> 
```

在你的 header.php 文件中，你可以为你定义的所有不同的元标记做到这一点：

```
<meta name="keywords" content="<?php echo $meta['keywords']; ?>" />
<meta name="description" content="<?php echo $meta['description']; ?>" />
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:04:23.207

根据我自己的经验，我将数据库中的元描述和关键字分别存储到包含它的页面中。然后我动态地将它调用到标题中。

```
- page_id             int(11) auto increment
- page_title          varchar(250)  Not Null
- name                varcar(250)  Not Null
- meta_description    text
- meta_keywords       text
- is_published        tinyint(1)  Not Null
- is_deleted          tinyint(1)  Not Null 
```

# ios - 在横向 iPhone 中全屏显示背景图像

> ID：15063278
> 
> 赞同：1
> 
> 时间：2013-02-25T08:58:29.483
> 
> 标签：ios, objective-c, cocos2d-iphone

我想在横向 iPhone 中全屏显示背景图像。在 iPhone 模拟器中，图像出现，但不是全屏。这是我的代码

```
CGSize size=[[CCDirector sharedDirector] winSize];
[self addChild:backgroundImage z:0 tag:0];
NSLog(@"size.height %f,size.width %f,image.width %f,image.height %f",size.height,size.width,backgroundImage.contentSize.width,backgroundImage.contentSize.height); 
```

Xcode输出size.height 480.000000,size.width 320.000000,image.width 480.000000,image.height 320.000000 我知道iPhone是480*320点。为什么图片不是全屏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:56:17.803

确保您为视网膜显示和正确的位置放置了高清图像。

```
backgroundImage.anchorPoint = ccp(0.5f, 0.5f);
backgroundImage.position = ccp(size.width*0.5f, size.height*0.5f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:31:44.627

iPhone 4s 及更高版本的视网膜显示屏是您提到的分辨率的两倍。你可以在你的 appdelegate 中的 cocos2d 中禁用它，但所有这一切都会自动拉伸你的所有图像以加倍。最好的办法是拥有所有图像的视网膜大小版本，并将“-hd”附加到文件名。cocos2d 将完成其余的工作。还请注意，新的 iphone 5 还具有您必须考虑的第 3 号屏幕尺寸。

# java - 将图像放在线性布局中的绝对位置

> ID：15063282
> 
> 赞同：0
> 
> 时间：2013-02-25T08:59:05.613
> 
> 标签：java, android, android-linearlayout, css-position, android-2.2-froyo

我有一个使用菜单创建的 android 应用程序，其中包含一组依次排序的按钮。

我有一个徽标图标，我想将其固定在页面的右下角并为其添加边距。我怎样才能做到这一点 ？

页面本身位于 LinearLayout 中。但我希望可以添加一个绝对位置的元素！:)

我使用 android 2.2 sdk

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:05:54.453

使用嵌套布局..

```
<RelativeLayout>
  <LinearLayout>
    Place your elements and menu here.
  </LinearLayout>
  <ImageView
    android:layout_alignParentBottom="true" />
</RelativeLayout> 
```

# r - 添加误差线以在 R 中的绘图上显示标准偏差

> ID：15063287
> 
> 赞同：32
> 
> 时间：2013-02-25T08:59:27.540
> 
> 标签：r, plot, statistics, standard-deviation, errorbar

对于每个`X`值，我计算了每个 Y 值的平均值`Y`和标准差 ( )`sd`

```
x  = 1:5
y  = c(1.1, 1.5, 2.9, 3.8, 5.2)
sd = c(0.1, 0.3, 0.2, 0.2, 0.4)

plot (x, y) 
```

如何使用标准偏差将误差线添加到绘图的每个数据点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-25T09:06:48.477

一个解决方案`ggplot2`：

```
qplot(x,y)+geom_errorbar(aes(x=x, ymin=y-sd, ymax=y+sd), width=0.25) 
```

![在此处输入图像描述](../Images/27a3aee56005fc4cbf1230afc6899103.png)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-25T10:39:59.927

除了@csgillespie 的回答，`segments`也被矢量化以帮助解决此类问题：

```
plot (x, y, ylim=c(0,6))
segments(x,y-sd,x,y+sd)
epsilon <- 0.02
segments(x-epsilon,y-sd,x+epsilon,y-sd)
segments(x-epsilon,y+sd,x+epsilon,y+sd) 
```

![在此处输入图像描述](../Images/25e176bf42c1bfa811753442edc75a1e.png)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-03-04T07:34:37.877

您可以使用`arrows`：

```
arrows(x,y-sd,x,y+sd, code=3, length=0.02, angle = 90) 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-02-25T09:04:01.217

您可以使用`segments`在基础图形中添加条形图。这里`epsilon`控制线的顶部和底部。

```
plot (x, y, ylim=c(0, 6))
epsilon = 0.02
for(i in 1:5) {
    up = y[i] + sd[i]
    low = y[i] - sd[i]
    segments(x[i],low , x[i], up)
    segments(x[i]-epsilon, up , x[i]+epsilon, up)
    segments(x[i]-epsilon, low , x[i]+epsilon, low)
} 
```

正如@thelatemail 指出的那样，我真的应该使用矢量化函数调用：

```
segments(x, y-sd,x, y+sd)
epsilon = 0.02
segments(x-epsilon,y-sd,x+epsilon,y-sd)
segments(x-epsilon,y+sd,x+epsilon,y+sd) 
```

![在此处输入图像描述](../Images/21321cb700782c42a88c3d65914ddbea.png)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2013-09-06T14:21:27.407

当您有对数 X 轴时，会出现 csgillespie 解决方案的问题。您将在右侧和左侧有不同长度的小条（epsilon 遵循 x 值）。

您应该更好地使用包中的`errbar`功能`Hmisc`：

```
d = data.frame(
  x  = c(1:5)
  , y  = c(1.1, 1.5, 2.9, 3.8, 5.2)
  , sd = c(0.2, 0.3, 0.2, 0.0, 0.4)
)

##install.packages("Hmisc", dependencies=T)
library("Hmisc")

# add error bars (without adjusting yrange)
plot(d$x, d$y, type="n")
with (
  data = d
  , expr = errbar(x, y, y+sd, y-sd, add=T, pch=1, cap=.1)
)

# new plot (adjusts Yrange automatically)
with (
  data = d
  , expr = errbar(x, y, y+sd, y-sd, add=F, pch=1, cap=.015, log="x")
) 
```

# iphone - 在 xcode 中加载 3d 模型和人脸检测

> ID：15063288
> 
> 赞同：1
> 
> 时间：2013-02-25T08:59:30.803
> 
> 标签：iphone, xcode, 3d, augmented-reality

我一直在关注本教程[http://www.trappers.tk/site/2012/05/02/face-detection-with-core-image-on-live-video/](http://www.trappers.tk/site/2012/05/02/face-detection-with-core-image-on-live-video/)用于在面部实时视频中添加图像位置，但是，现在我想加载一个 3d 对象而不是图像，你能给我一些提示吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:30:21.247

您可以使用 NinevehGL 视图，请参阅[此链接](http://nineveh.gl/) 它在视图中加载 3D 模型

# javascript - jQuery 到 JavaScript：相当于 javascript 中的 $(".className tagName") 选择器

> ID：15063295
> 
> 赞同：1
> 
> 时间：2013-02-25T09:00:22.807
> 
> 标签：javascript, jquery, selector

我想知道这个 jQuery 选择器的等价物是什么：`$(".className tagName")`在 javascript 中？任何人都可以帮助我吗？Thnaks提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:01:57.250

在[现代浏览器](http://caniuse.com/#search=querySelectorAll)中，您可以使用`document.querySelectorAll`完全相同的字符串选择器。此函数[返回](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)集合（准确地说是 NodeList 集合），但您不应将其与 jquery 集合混淆。

在任何情况下，如果出于某种原因不想使用 jquery，但想集中使用选择器，更好的解决方案是使用像[Sizzle](http://sizzlejs.com)这样的选择器库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:06:37.950

可能是传统方式，但您可以在 javascript 中使用**document.getElementByTagName**，然后遍历以获取具有匹配类名的确切元素。

请在一个函数中使用整个逻辑，然后在不使用 jQuery 的情况下重新使用它来获得快速结果。将 document.getElementByTagName() 的结果保存在全局变量中将为您带来性能优势。

干杯

# cordova - Phonegap API 通知和 InAppBroswer 不能一起工作

> ID：15063297
> 
> 赞同：0
> 
> 时间：2013-02-25T09:00:24.893
> 
> 标签：cordova, push-notification

我现在使用 phonegap 2.4.0，它提供了一个新的[InAppBroswer](http://docs.phonegap.com/en/2.4.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser) API。

InAppBroswer 工作得很好，但它使[通知](http://docs.phonegap.com/en/2.4.0/cordova_notification_notification.md.html#Notification)API 无法工作。

我也在使用推送通知插件，我确认它收到了消息，但如果 InAppBroswer 打开，它只是无法在 phonegap 中调用 javascript。

有没有人也面临这个问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:04:45.413

InAppBrowser 没有 PhoneGap 视图中可用的本机集成。

# linux - 如何在 Makefile 中检查内核版本

> ID：15063298
> 
> 赞同：0
> 
> 时间：2013-02-25T09:00:31.027
> 
> 标签：linux, makefile, kernel

如何在我的 Makefile 中检查我的内核版本？

根据内核版本，我想相应地选择一些头文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-17T07:37:56.407

```
KVER = $(shell uname -r)
KMAJ = $(shell echo $(KVER) | \
sed -e 's/^\([0-9][0-9]*\)\.[0-9][0-9]*\.[0-9][0-9]*.*/\1/')
KMIN = $(shell echo $(KVER) | \
sed -e 's/^[0-9][0-9]*\.\([0-9][0-9]*\)\.[0-9][0-9]*.*/\1/')
KREV = $(shell echo $(KVER) | \
sed -e 's/^[0-9][0-9]*\.[0-9][0-9]*\.\([0-9][0-9]*\).*/\1/')

kver_ge = $(shell \
echo test | awk '{if($(KMAJ) < $(1)) {print 0} else { \
if($(KMAJ) > $(1)) {print 1} else { \
if($(KMIN) < $(2)) {print 0} else { \
if($(KMIN) > $(2)) {print 1} else { \
if($(KREV) < $(3)) {print 0} else { print 1 } \
}}}}}' \
)

ifeq ($(call kver_ge,3,8,0),1)
echo great or equal than 3.8.0
else
echo less than 3.8.0
endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:17:58.257

如果您正在编写一些应用程序，您可能会这样做

```
 KERNELVERSION=$(shell uname -a) 
```

或其他一些shell命令，也许`cat /proc/version`

对于内核模块，请参阅[cnicutar 的回答](https://stackoverflow.com/a/15063313/841108)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T00:00:57.327

我没有 50 名声望，所以我无法在评论中回答 voght 先生的评论（请给我投票，这样我就可以了！）但我可以这样做，就像另一个答案一样，所以就这样吧。

该代码使用内置的 shell 来输出（*bash*）命令，如*uname*和*echo*，并为结果分配类似变量的宏`KVER`。*uname*提供内核版本，代码继续使用 unix *sed*（流编辑器；*man sed*更多）从结果中提取每个主要、次要和 rev 号，并将它们分配给离散变量类宏。然后他为测试内核版本是否大于作为参数提供的版本`kver_ge`的进程（使用*awk*、*test*和*if* shell 内置函数）分配一个宏名称。很酷，对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-11T12:32:53.667

一个简单的方法是首先通过 Makefile 中的测试分配一个变量 true/false（在下面的示例中实际上是 1/0），然后使用 ifeq 命令，就像 goodgoodstudydaydayup 的答案一样，这是一个更简单的方法：

```
KERNEL_GT_5_4 = $(shell expr `uname -r` \> "5.4.0-0-generic")
all:
ifeq (${KERNEL_GT_5_4},1)
    echo greater than 5.4.0-0-generic
else
    echo less than 5.4.0-0-generic
endif 
```

# c++ - 如何根据类属性在向量中找到对象？

> ID：15063301
> 
> 赞同：4
> 
> 时间：2013-02-25T09:00:46.053
> 
> 标签：c++, vector, find

我有一个`Attribute`属性类`std::string attributeName`。我想开发一个简单的函数，它返回与提供的字符串匹配的`Attribute`索引`attributeName`。不幸的限制包括：我没有 c++0x 可供使用，而且我已经`Attribute`为更复杂的东西重载了 == 运算符。任何帮助将不胜感激，谢谢！

编辑-非常抱歉，我意识到尚不清楚我正在搜索的属性向量`vector<Attribute> aVec`。。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T09:05:11.847

[`std::find_if`](http://en.cppreference.com/w/cpp/algorithm/find)与自定义[函数对象](http://www.cprogramming.com/tutorial/functors-function-objects-in-c++.html)一起使用：

```
class FindAttribute
{
    std::string name_;

public:
    FindAttribute(const std::string& name)
        : name_(name)
        {}

    bool operator()(const Attribute& attr)
        { return attr.attributeName == name_; }
};

// ...

std::vector<Attribute> attributes;
std::vector<Attribute>::iterator attr_iter =
    std::find_if(attributes.begin(), attributes.end(),
        FindAttribute("someAttrName"));
if (attr_iter != attributes.end())
{
    // Found the attribute named "someAttrName"
} 
```

* * *

要在 C++11 中做到这一点，实际上并没有什么不同，除了你显然不需要函数对象，或者必须声明迭代器类型：

```
std::vector<Attribute> attributes;

// ...

auto attr_iter = std::find_if(std::begin(attributes), std::end(attributes),
    [](const Attribute& attr) -> bool
    { return attr.attributeName == "someAttrName"; }); 
```

或者，如果您需要使用不同的名称多次执行此操作，请将 lambda 函数创建为变量，并[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)在调用中使用`std::find_if`：

```
auto attributeFinder =
    [](const Attribute& attr, const std::string& name) -> bool
    { return attr.attributeName == name; };

// ...

using namespace std::placeholders;  // For `_1` below

auto attr_iter = std::find_if(std::begin(attributes), std::end(attributes),
    std::bind(attributeFinder, _1, "someAttrName")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-06T08:00:34.270

您可以简单地使用 for 循环来达到此目的：

```
for (int i = 0; i<aVec.size();i++)
{
    if(aVec[i].attributeName == "yourDesiredString")
    {
        //"i" is the index of your Vector.      
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:59:13.427

您还可以使用 boost 库中的绑定函数：

```
std::vector<Attribute>::iterator it = std::find_if(
     aVec.begin(),
     aVec.end(),
     boost::bind(&Attribute::attributeName, _1) == "someValue"
); 
```

或 C++11 绑定函数：

```
std::vector<Attribute>::iterator it = std::find_if(
    aVec.begin(),
    aVec.end(),
    std::bind(
        std::equal_to<std::string>(),
        std::bind(&Attribute::attributeName, _1),
        "someValue"
    )
); 
```

不声明谓词类或函数

# android - Android - 从 LocationListener.onLocationChanged() 调用 startActivity()，这真的是我想要的吗？

> ID：15063306
> 
> 赞同：0
> 
> 时间：2013-02-25T09:01:06.513
> 
> 标签：android, service, start-activity

我正在编写一个前台服务来接收 GPS 通知、发送系统通知和拨打电话。该应用程序没有`Activity`附加到它，只有一个从引导接收器启动的服务。当我试图从服务的 onLocationChanged() 中启动调用活动时，我得到：

> 从 Activity 上下文外部调用 startActivity() 需要 FLAG_ACTIVITY_NEW_TASK 标志。这真的是你想要的吗？

害怕这个怀疑的问题，我决定看看 stackOverFlow，在那里我发现了这些： [Calling startActivity() from outside of an Activity context](https://stackoverflow.com/questions/3918517/calling-startactivity-from-outside-of-an-activity-context)，[Android: Make phone call from service](https://stackoverflow.com/questions/11915086/android-make-phone-call-from-service)，[android start activity from service](https://stackoverflow.com/questions/3606596/android-start-activity-from-service) - 所有这些都建议做这件事。

所以，我的问题是：为什么不建议使用这个标志（关于历史堆栈的东西）？在我的情况下可以这样做吗？

一个简化的代码：

```
public class CallService extends Service implements LocationListener {

    @Override
    public void onCreate() {
        super.onCreate();
        startForeground(1, NotificationGenerator.getNotification());
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return START_STICKY;
    }

    @Override
    public synchronized void onLocationChanged(Location loc) {
        String url = "tel:xxxxxxxxxx";
        Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse(url));
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent);
    }

    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:08:23.577

答案完全在于用户体验 ( **UX** ) 领域。Android 设备通常是个人设备，在编写应用程序时应牢记这一点。

用户可能正在玩游戏或打电话，在没有任何通知的情况下启动您的活动是不礼貌的，我会卸载任何会这样做的应用程序。

此外，如果手机被锁定，您的活动将不会真正启动，而是会等到用户解锁手机。

另一方面，通知是为了告诉用户该应用程序想要向您展示一些东西。因此，请改用它们。

除非您正在构建一个私有应用程序，否则您知道什么更适合您的要求。

# c# - 通过 ibm db2 驱动程序将 derby 与 .net c# 连接起来

> ID：15063311
> 
> 赞同：0
> 
> 时间：2013-02-25T09:01:25.967
> 
> 标签：c#, .net, db2, derby

我正在尝试通过 IBM DB2 将 derby 数据库与 C# 应用程序连接起来。

起初，我安装了 IBM Data Server Driver Package，根据以下 url 中给出的文档，

[http://www.ibm.com/developerworks/data/library/techarticle/dm-0410ng/index.html。](http://www.ibm.com/developerworks/data/library/techarticle/dm-0410ng/index.html)

然后我安装了IBM Data Server Client，它在“bin”目录中有这个dll，我将它添加到系统路径中。并按照该文件执行每个步骤

但我收到错误

```
{System.Data.Odbc.OdbcException (0x80131937): ERROR [08001] [IBM][CLI Driver] SQL30081N  A communication error has been detected. Communication protocol being used: "TCP/IP".  Communication API being used: "SOCKETS".  Location where the error was detected: "xx.xx.xx.xx".  Communication function detecting the error: "selectForRecvTimeout".  Protocol specific error code(s): "0", "*", "*".  SQLSTATE=08001 
```

和错误堆栈跟踪为

```
 at System.Data.Odbc.OdbcConnection.HandleError(OdbcHandle hrHandle, RetCode retcode)
   at System.Data.Odbc.OdbcConnectionHandle..ctor(OdbcConnection connection, OdbcConnectionString constr, OdbcEnvironmentHandle environmentHandle)
   at System.Data.Odbc.OdbcConnectionOpen..ctor(OdbcConnection outerConnection, OdbcConnectionString connectionOptions)
   at System.Data.Odbc.OdbcConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.Odbc.OdbcConnection.Open() 
```

等待您的宝贵回复和意见！！！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:41:27.213

嗯，您意识到您引用的 DeveloperWorks 文章已有 10 年历史了，对吧？那个版本的 IBM ADO.Net 软件只能访问非常旧的 Derby 数据库版本，我相信是 10.0 到 10.2 版本。

您没有提及您尝试运行的 Derby 版本，但除非它是非常旧的版本，否则您将无法使用此技术。

# html - 将下拉菜单列表项设置为相同宽度

> ID：15063312
> 
> 赞同：2
> 
> 时间：2013-02-25T09:01:35.623
> 
> 标签：html, css

为了让您理解我的意思，我[在这里](http://jsfiddle.net/Relborg/mZhqp/3/)创建了一个 JSfiddle 。基本上，如果您查看“产品”和“联系我们”的下拉菜单，每个列表项都足够宽以适应内容。这使下拉菜单看起来“破碎”。我希望所有列表项都与列表中最宽的列表项一样宽。（要了解我的意思，请查看随附的模型）。

此外，因为“主要链接”（例如“主页”和“关于我们”）在您将鼠标悬停在它们上方时有一个底部边框，当您继续并将鼠标悬停在下拉项目上时也会产生一点刺激，即下拉菜单向上移动 5 像素。我不知道如何解决这个问题。

非常重要：**我不想为列表项设置静态宽度！**

它应该是什么样子的样机：

![在此处输入图像描述](../Images/ac01be31f4b6ce43d4c1eb1f0a895a9c.png)

```
//Ignore this comment 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:11:10.933

尝试设置

```
li a {
    border-bottom: 5px solid rgba(255,255,255, 0);
}
.secondary-list li {
    float: none;
} 
```

[jsFiddle](http://jsfiddle.net/mZhqp/5/)

通过在锚点上设置不可见边框，悬停只会更改颜色，而不是添加边框并将以下元素向下移动 5px。

删除二级`li`元素的浮动使它们使用列表的整个宽度（=最宽的宽度`li`）。

# objective-c - iPhone 5 (4") 后屏幕在点击按钮时出现在屏幕底部

> ID：15063315
> 
> 赞同：0
> 
> 时间：2013-02-25T09:01:58.820
> 
> 标签：objective-c, uiimageview, uibutton, iphone-5, ios6.1

嘿，这可能是一个重复的问题，但相信我，我已经尝试了之前回答过类似问题的每一个选项，但结果没有任何用处。我正在制作一个与 iPhone 5 兼容的应用程序。一切正常，直到我点击 UIButton。黑色视图出现在屏幕底部。这是一个屏幕截图。

*   在点击按钮之前

    [http://i.stack.imgur.com/ACBUr.png](http://i.stack.imgur.com/ACBUr.png)

*   点击后出现黑屏

    [http://i.stack.imgur.com/7wKNX.png](http://i.stack.imgur.com/7wKNX.png)

我没有使用 window.xib 因此我设置

> self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];

我正确添加了默认屏幕。除了这部分，一切都很好。知道我哪里错了。

# asp.net - Visual Studio 2008 中的数据绑定属性错误

> ID：15063316
> 
> 赞同：-1
> 
> 时间：2013-02-25T09:02:02.977
> 
> 标签：asp.net, visual-studio-2008, knockout.js

```
<script type='text/javascript' src='Script/v1.0.js'></script>
<script type="text/javascript" src="Script/jquery-1.6.2.min.js"></script> 
```

这是一个简单的*视图模型*- 定义 UI 数据和行为的 JavaScript：

```
function AppViewModel() {
    this.firstName = ko.observable("Bert");
    this.lastName = ko.observable("Bertington");
    this.fullName = ko.computed(function() {
        return this.firstName() + " " + this.lastName();    
    }, this);
} 
```

激活 knockout.js：

```
 ko.applyBindings(new AppViewModel());
</script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
          <p>First name: <strong data-bind="text: firstName"></strong></p>
          <p>Last name: <strong data-bind="text: lastName"></strong></p>

          <p>First name: <input data-bind="value: firstName" /></p>
          <p>Last name: <input data-bind="value: lastName" /></p>

          <p>Full name: <strong data-bind="text: fullName"></strong></p>

        </div>
</form>
</body> 
```

> 数据绑定不起作用。
> 
> 错误：数据绑定不是有效的属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:06:26.673

愿你的问题是绑定ko。

**尝试为特定的 div id 绑定您的 viewModel，如下面的代码。它可能会解决您的问题**

**html**

```
<form id="form1" runat="server">
<div id="test">
...
<div>
</form> 
```

**脚本：-**

```
ko.applyBindings(new AppViewModel(), document.getElementById('form1')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T07:45:19.550

首先检查您是否选择了上面的 HTML5 选项卡。然后在您的视图中添加脚本文件：从您的脚本文件夹中的 knockout-2.1.0.js、knockout-2.1.0.debug.js。

# matlab - 根据matlab中的一列对整个矩阵进行排序

> ID：15063321
> 
> 赞同：22
> 
> 时间：2013-02-25T09:02:24.847
> 
> 标签：matlab, sorting, matrix

我的矩阵如下

```
a =

 1     3
 2     5
 3     2
 4     8
 5     9 
```

我想对`a`矩阵中的第二列进行排序。我希望按如下方式打印第一列的相应行：

```
a =

 3     2
 1     3
 2     5
 4     8
 5     9 
```

我试过`sort(a)`了，但它只对矩阵的第二列进行排序`a`。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-25T09:05:02.403

试试这个：

`sortrows(a,2)`

这应该根据第二列进行排序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T09:07:17.493

或使用：

```
[val idx]=sort(a(:,2));
ans = [a(idx,1) val] 
```

# linux - 如何在脚本中使用循环读取完整路径直到目录结构结束

> ID：15063322
> 
> 赞同：0
> 
> 时间：2013-02-25T09:02:29.763
> 
> 标签：linux, bash, unix, scripting

我有以下目录结构 **/home/ABCD/apple/ball/car/divider.txt**，**/home/ABCD**这就像我的应用程序的根目录，我可以很容易地得到它，并且从那里所有子文件夹可能每种情况都不同，所以我正在寻找一个通用程序，我可以通过一些循环提取路径

我想将目录结构提取到一个单独的变量中，如**“/home/ABCD/apple/ball/car/”** 谁能帮帮我

第二个例子：**/home/ABCD/adam/nest/mary/user.txt** 变量应该得到以下值 - **“/home/ABCD/adam/nest/mary/”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:09:50.397

采用`dirname`

```
$ dirname /home/ABCD/apple/ball/car/divider.txt
/home/ABCD/apple/ball/car 
```

分配给变量做

```
var=$(dirname /home/ABCD/apple/ball/car/divider.txt)
echo "$var" 
```

前后没有空格`=`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:16:14.047

如果需要结束斜线`/`，您可以选择一个：

```
kent$  echo "/home/ABCD/adam/nest/mary/user.txt"|grep -Po '.*/'        
/home/ABCD/adam/nest/mary/ 
```

或者

```
kent$  echo "/home/ABCD/adam/nest/mary/user.txt"|sed -r 's#(.*/).*#\1#'
/home/ABCD/adam/nest/mary/ 
```

或者

```
kent$  echo $(dirname /home/ABCD/adam/nest/mary/user.txt)"/" 
/home/ABCD/adam/nest/mary/ 
```

# android - 使用 ImageView 和矩阵在图像上绘制形状

> ID：15063323
> 
> 赞同：1
> 
> 时间：2013-02-25T09:02:33.910
> 
> 标签：android, imageview

我们已经经历了大约一周的以下问题：我们正在绘制一个我们希望能够在用户屏幕上重新缩放和“移动”的图像。为了实现这一点，我们使用了 ImageView 和 Matrix：效果很好。

但是，现在我们正在寻找在背景图像上绘制一些矩形。这些矩形必须与背景图像一起重新缩放和平移......我们遇到的问题是，当我们创建形状并使用以下代码绘制它时，它被绘制在图像的左上角，非常像如果整个用户的屏幕只是被解释为其真实尺寸的一部分......？

**我的自定义 ImageView**

```
public class EnvironmentView extends ImageView {
Matrix matrix;

// We can be in one of these 3 states
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// Remember some things for zooming
PointF last = new PointF();
PointF start = new PointF();
float minScale = 1f;
float maxScale = 3f;
float[] m;

int viewWidth, viewHeight;
static final int CLICK = 3;
float saveScale = 1f;
protected float origWidth, origHeight;
int oldMeasuredWidth, oldMeasuredHeight;

public static boolean EDIT_RISKYZONE = false;
static boolean SAVE = false;
ScaleGestureDetector mScaleDetector;

Context context;

@Override
protected void onDraw(Canvas canvas){
    super.onDraw(canvas);

    Paint paint = new Paint();

    paint.setColor(Color.RED);
    paint.setStrokeWidth(3);
    paint.setAlpha(80);

    float left = 0;
    float top = 0;
    float right = getWidth();
    float down = getHeight();
    RectF origRect = new RectF(left, top, right, down);

    matrix.mapRect(origRect);
    canvas.drawRect(origRect, paint);

}

public EnvironmentView(Context context) {
    super(context);
    sharedConstructing(context);
}

public EnvironmentView(Context context, AttributeSet attrs) {
    super(context, attrs);
    sharedConstructing(context);
}

private void sharedConstructing(Context context) {
    super.setClickable(true);
    this.context = context;
    matrix = new Matrix();
    m = new float[9];
    setImageMatrix(matrix);
    setScaleType(ScaleType.MATRIX);
}

public void setMaxZoom(float x) {
    maxScale = x;
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    viewWidth = MeasureSpec.getSize(widthMeasureSpec);
    viewHeight = MeasureSpec.getSize(heightMeasureSpec);

    //
    // Rescales image on rotation
    //
    if (oldMeasuredHeight == viewWidth && oldMeasuredHeight == viewHeight
            || viewWidth == 0 || viewHeight == 0)
        return;
    oldMeasuredHeight = viewHeight;
    oldMeasuredWidth = viewWidth;

    if (saveScale == 1) {
        //Fit to screen.
        float scale;

        Drawable drawable = getDrawable();
        if (drawable == null || drawable.getIntrinsicWidth() == 0 || drawable.getIntrinsicHeight() == 0)
            return;
        int bmWidth = drawable.getIntrinsicWidth();
        int bmHeight = drawable.getIntrinsicHeight();

        Log.d("bmSize", "bmWidth: " + bmWidth + " bmHeight : " + bmHeight);

        float scaleX = (float) viewWidth / (float) bmWidth;
        float scaleY = (float) viewHeight / (float) bmHeight;
        scale = Math.min(scaleX, scaleY);
        matrix.setScale(scale, scale);

        // Center the image
        float redundantYSpace = (float) viewHeight - (scale * (float) bmHeight);
        float redundantXSpace = (float) viewWidth - (scale * (float) bmWidth);
        redundantYSpace /= (float) 2;
        redundantXSpace /= (float) 2;

        matrix.postTranslate(redundantXSpace, redundantYSpace);

        origWidth = viewWidth - 2 * redundantXSpace;
        origHeight = viewHeight - 2 * redundantYSpace;
        setImageMatrix(matrix);
    }
}
} 
```

**画面输出**

下面是用户在屏幕中心绘制矩形后屏幕上显示的屏幕截图，它们应该是屏幕宽度和高度的 3/4 左右。

![](../Images/16df1a5e5fb747e91dbe6eaffac2b97b.png)

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:38:13.470

图像需要从原点开始（左上角——0,0）。矩形应该从屏幕中心开始一半宽度和一半高度。

```
int x = (widthOfScreen - widthOfRect)/2;
int y = (heightOfScreen - heightOfRect)/2; 
```

所以我认为你需要另一个矩阵。首先平移第二个矩阵，使其将矩形放置在屏幕的中心，然后对另一个矩阵应用相同的操作。尝试在应用任何其他矩阵运算之前执行此操作（即全部注释掉）并查看它是否将矩形放置在正确的位置。那么如果是正确的，它应该可以缩放。

# javascript - 检查文档是否有鼠标移动或触摸屏幕保护程序

> ID：15063327
> 
> 赞同：0
> 
> 时间：2013-02-25T09:02:43.443
> 
> 标签：javascript, jquery, html

正如标题所说，我想知道javascript（jquery）中是否有可能检查文档中是否有任何操作，如果没有。应该弹出屏幕保护程序之类的东西！如果有人在页面上看这里，看那里，过了一会儿他没有做任何事情，鼠标（或触摸手指）静止不动，我想说一分钟后没有活动的文档......

```
function noactivity() { //after 60000ms start something here } 
```

我想要整个文档的全局！谢谢泰德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:23:39.643

它可以在 jquery 中相对简单地使用：

```
setTimeout(); 
```

[http://jsfiddle.net/bernie1227/hNkTy/1/](http://jsfiddle.net/bernie1227/hNkTy/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:32:45.787

我在处理 iframe 大小调整问题时遇到了这个问题。我想要的是在`document`.

我发现 jQuery 并没有直接提供这样的功能。主要原因是 DOM 发生了太多的活动，当你在看它时是不可见的（`bind`）。但是，您可以观察特定属性，例如鼠标在文档上移动。

```
$(document).mousemove(function(e){
    console.log(e.pageY);
    console.log(e.pageX);
}); 
```

但是话又说回来，这并不意味着用户正在与您的页面进行交互。这仅表示用户在您的页面上并且他的鼠标正在移动。用户也可能没有移动鼠标而只是使用他的键盘与您的页面进行交互。因此，现在您还必须注意键盘交互。

```
$(document).keyup(function(e){
    console.log('active');
}); 
```

使用这些，您可以创建一个倒计时功能，该功能在设定的时间间隔后检查标志。如果用户进行活动，您可以设置标志。并且在该函数“noactivity()”函数 id 的设定时间后，该标志尚未设置。

观察文档活动的另一种方法是观察被修改的 DOM 子树。

```
jQuery(document).bind('DOMSubtreeModified', function() {
    console.log('active');
}); 
```

这适用于 Chrome/FireFox/IE8+，但不适用于 Opera（任何版本）。主要原因是该操作对浏览器资源的占用太大。而且我不鼓励使用这种方法，因为监听 DOM 突变事件可能会损害性能，并且相关的 W3C 工作组正试图找到一种更好的方法来做到这一点并因此弃用 DOM 突变事件 - 很难或不可能做好和高性能的实现。

我并不是说我上面提到的其他选项也很好。如果您正在观看，它们也是昂贵的操作`document`，应该避免。这些选项的另一个问题是 iframe 内容不是您的特别部分，`document`如果用户正在与 iframe 内容交互，这些选项将不起作用。

因此得出的结论是，W3C 还没有最终确定一种用户可以观察文档子树变化的廉价方式。

# unix - 在 Solaris 上持久化环境变量

> ID：15063333
> 
> 赞同：-1
> 
> 时间：2013-02-25T09:02:56.377
> 
> 标签：unix, environment-variables, solaris

我需要为 Oracle 编码配置更改环境变量 $NLS_LANG。我按照以下步骤操作：

1.  打开 /etc/profile 文件。
2.  在文件中添加了“export NLS_LANG=AMERICAN_AMERICA.WE8ISO8859P9”行

当我尝试时；

> 回声 $NLS_LANG

但是控制台在执行后打印了旧变量：

> . /etc/profile

控制台正确打印了变量的最后分配值。

这种情况的主要问题是，当我打开一个新控制台并执行 echo 命令时，控制台仍会打印 $NLS_LANG 变量的旧值。

**那么，在 Solaris 上持久化环境变量的正确方法是什么？**
谢谢...

ps: Solaris 版本是-> 5.10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:47:24.500

`.profile` 只能由登录 shell 读取。因此，您必须使用`-` as 第一个参数启动您的 shell 以强制登录 shell（或者，如@cnicutar 建议的那样，注销/登录）。

作为替代方案，您可以将分配放入在“正常”（交互式）调用时读取的文件中，例如，`.kshrc`在 Korn Shell 的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:48:29.320

`/etc/profile`使用用户登录时会加载其中的环境变量。因此，如果您不注销并再次登录，`$NLS_LANG`则不会加载。

如果您现在不想登录，您可以做的是`EXPORT`使系统加载新值：

```
NLS_LANG="new value"
export $NLS_LANG 
```

或直接

```
export NLS_LANG="new value" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:54:21.313

您需要`.profile`在主目录中添加导出文件。请 `export NLS_LANG=AMERICAN_AMERICA.WE8ISO8859P9`在您的`/home/folder/.profile`文件中使用。这样每次登录时，都会配置变量。

# view - Lotus Notes - 多个 IF 公式语句

> ID：15063336
> 
> 赞同：1
> 
> 时间：2013-02-25T09:03:04.550
> 
> 标签：view, if-statement, lotus-notes

我是 Lotus Notes 编程的新手，我需要您的建议和帮助。

我的主要形式包含一个`table`with`8 rows`和`2 columns`。（有`16 cells`）每个单元格都有一个`numeric field`。我的字段名称是：

`txt_n1`和`txt_i1`（第一行）

`txt_n2`和`txt_i2`（第二行）

……

`txt_n8`和`txt_i8`（第 8 行）

我想做的是：

我有一个`vwMarketing`只用一列调用的视图。我希望这个视图只显示那些文档。其中至少有一行或多行，其单元格包含相等的值。

所以，如果让我们说 txt_n4 = txt_i4 => OK

row(k)（其中 k=1..8）：如果单元格 1 的值为 5，单元格 2 的值为 5 => OK。

该属性可能不止一行，重要的是至少存在一行，并且值不能为空。我希望我很清楚，谢谢！

PS：实际上，我想在列中的公式语句，所以如果它是OK =>“A”，如果不是=>“”（在视图属性中，我检查了`Don't show empty categories`：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:51:22.253

1.  如果视图中有少量文档，那么建议您使用选择公式排除条件错误的文档。
2.  您可以在文档中添加计算项/标志，该字段将计算文档是否应显示在视图中。那么你不会有性能问题。IE

但是您需要的代码应该看起来像那样（这将检查文档是否可以在视图中显示），如果您在视图中使用它 - 毕竟选择 _res = 1 否则如果您决定在文档中使用标志（以提高性能）然后选择您的项目 = 1

```
 _res := 0;
    @For(i:=1;i<=8;i:=i+1;
        _post := @Text(i);
        _txt_n := @GetField("txt_n"+_post);
        _txt_i := @Text(@GetField("txt_i"+_post));
        @If(    (_txt_n=_txt_i) & (_txt_n!=""); 
                @Do(    _res := 1; i:=9);
                0
        )
    );
    _res 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:24:47.583

我会稍微不同地解决它：

1.  在表单上创建一个名为“DisplayInView”（或类似名称）的隐藏文本字段。
2.  修改视图选择：SELECT DisplayInView="Yes"
3.  将以下代码添加到表单的 PostSave 事件中：

    ```
    Dim thisdoc As NotesDocument
    Dim isSame As Boolean
    isSame = False
    Set thisdoc = source.Document
    '*** Loop through all fields in document and compare the field pairs
    Forall i In thisdoc.Items
        If Left(i.Name,5) = "txt_n" Then
            If i.Text = thisdoc.GetItemValue( Replace(i.Name,"txt_n","txt_i") )(0) Then
                isSame = True
                Exit Forall
            End If
        End If
    End Forall
    If isSame Then
        Call doc.ReplaceItemValue("DisplayInView","Yes")
        Call doc.Save(True,False)
    End If 
    ```

我还没有测试过它，但我相信它应该可以工作。

# jsf - EJB 转换器和丢失的 bean 注入

> ID：15063339
> 
> 赞同：0
> 
> 时间：2013-02-25T09:03:12.903
> 
> 标签：jsf, ejb, converter

我有一个用 EJB 和 JSF 用 Ja​​va EE 编写的应用程序。我想创建一个注入 EJB 的 JSF 转换器：

```
@ManagedBean(name="addressConverter")
@RequestScoped
public class AddressConverter implements Converter {

    @EJB(name = "AddressDao")
    private AddressDao addressDao;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        return addressDao.find(Long.valueOf(value));
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        return String.valueOf(((Address) value).getId());
    }
} 
```

当在应用程序中出现任何异常时，注入`AddressDao`的内容丢失并且我得到“...env.../AddressDao”丢失的消息（对不起，我现在无法得到确切的错误）。

我该如何处理？

# javascript - 何时使用 this.var 和 var = ; 在 javascript 函数 obj 中？

> ID：15063340
> 
> 赞同：0
> 
> 时间：2013-02-25T09:03:15.503
> 
> 标签：javascript, variables

当我在 javascript 中创建对象时，我发现自己设置了不会`var = 'sjdksjka';`随`this.x = 0;`.

什么时候用最好

```
function a() {
    var b = 0; // var =
      this.c = 0; // this.
} 
```

我应该在何时何地选择一个而不是另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:06:55.047

第一个在函数范围内，仅在函数本身内可见。第二个绑定到调用函数的对象。这种情况只有在函数是对象的成员并且您想要修改对象本身时才有用。第一个变体用于函数调用期间的临时结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:12:10.063

`var`将变量粘贴在函数范围内。完成执行的那一刻，`a()`变量`b`将被销毁。

```
 a()
 console.log(b) //will print "undefined" 
```

`this.c`创建一个对象属性。这是当您`a()`用作对象构造函数时：

```
 d=new a()
 console.log(a.c) //will print 0
 console.log(b)   //will print "undefined"
 console.log(a.b) //will print "undefined" 
```

如果您设置`a`为另一个构造函数的成员函数（通过`.prototype.`） ，它也将起作用

# javascript - window.location.replace() 不起作用

> ID：15063341
> 
> 赞同：1
> 
> 时间：2013-02-25T09:03:16.173
> 
> 标签：javascript, asp.net, redirect

只是想问为什么 window.location.replace 在我的页面中不起作用。我已经为此工作了好几个星期。它在我的其他页面上运行良好，虽然这些页面有 DevExpress 组件，但是在这个我只使用普通 html 和 asp 标签和组件的特定页面中它不起作用。它似乎只是令人耳目一新而不是重定向。这是我的按钮代码：

```
<asp:Button ID="btnCancelValidatePassword" runat="server" 
                        CausesValidation="False" ClientIDMode="AutoID" CssClass="ButtonControl" 
                        Height="30px" OnClientClick="window.location.replace('../Account/Settings.aspx')" Text="CANCEL" Width="100px" /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T09:32:20.970

**在Chrome**中重新加载同一页面时，我遇到了它无法正常工作的问题。执行以下操作：

```
 window.location.replace("/mypage1.aspx?type=abc"); //redirect to fake page
   window.location.replace("/mypage.aspx?type=abc");  //redirect to same page 
```

这有点像 hack，但这似乎是唯一在 Chrome 中强制重新加载同一页面的东西。IE 和 FF 无需重定向到虚假页面即可工作。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-02-25T09:19:42.150

`.replace()`是`String`对象的方法

`window.location`不是字符串。改为使用`window.location.href`并调用`.replace()`.`window.location.href`

```
window.location.href.replace(/string_to_be_replaced/, 'string_to_replace'); 
```

# php - is this possible for radio button? or I misunderstood what he wants

> ID：15063345
> 
> 赞同：0
> 
> 时间：2013-02-25T09:03:26.830
> 
> 标签：php, colors, radio, if-statement

I'm told to do this

If the user has entered both names and checked a radio button, show a greeting `Hello <firstname> <lastname>`. Change the background color of the Web page to the selected color. You do this by using the echo statement as follows:

```
echo "<body bgcolor =\” $color\”&gt; Hello $firstname $lastname"; 
```

and my other php file I have

```
elseif(!(empty($_GET["fname"])) && (!(empty($_GET["lname"]))) && ($_GET["bgcolor"] == "red"))
{
echo "<body bgcolor='red'>" . "Hello " . $_GET["fname"] . " ". $_GET["lname"] . "!<br/>" . "Background color changed to the selected color";
} 
```

is it possible if I put the the `$_GET["bgcolor"]`'s value into the `<body bgcolor=''>`? so I don't have to use another `elseif` statement...

because seeing this

```
echo "<body bgcolor =\” $color\”&gt; Hello $firstname $lastname"; 
```

lets me think it's possible but if with just one variable `$color` how is that possible O.o

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:15:49.310

好吧，当然是。但是你为什么不自己尝试一下呢？将花费更少的时间来发布这个问题。:)

例如这样的：

```
$default_color = "white";
[...]
if(!(empty($_GET["fname"])) && (!(empty($_GET["lname"])) && (!(empty($_GET["bgcolor"])))
{
  echo "<body bgcolor=". $_GET["bgcolor"] .">" . "Hello " . $_GET["fname"] . " ". $_GET["lname"] . "!<br/>" . "Background color changed to the selected color";
}
else
{
  echo "<body bgcolor=". $default_color .">" . "Hello " . $_GET["fname"] . " ". $_GET["lname"] . "!<br/>" . "Background color changed to the default color";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:08:33.197

使用这样的东西

```
 <input type="hidden" value="your-color" name="bgcolor"/>

       if($_GET["bgcolor"] == 'color'){
        $color = 'color'
        }else {
        $color = 'other color'
        }
    echo '<body bgcolor='.$color.'>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:09:26.093

假设每种可用颜色都有一个单选按钮，您可以通过将颜色保存在单选按钮的 value 属性中来做到这一点。该值将在 POST 上传递。

```
<input type="radio" value="red" name="bgcolor"/> 
```

结果是

```
$_POST["bgcolor"] === "red" 
```

# jenkins - 发布到从 Jenkins 中的另一个项目工件复制的工件

> ID：15063348
> 
> 赞同：1
> 
> 时间：2013-02-25T09:03:32.923
> 
> 标签：jenkins, artifactory, artifacts

所以我在 Jenkins 得到了一些独立的工作。第一个从 Git 存储库获取项目，构建它并生成工件。另一个人必须从第一份工作中复制证书并将其发布到 Artifactory（尝试使用 Artifactory 插件制作）。但问题是 Artifactory 插件仅在 Build 作业中可用，在第二个作业的配置中没有像“Generic-Artifactory 集成”这样的东西。有谁知道使插件在发布作业中工作的要求是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:21:43.960

[您可以利用Artifactory REST API](http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API)编写一个小型 shell 脚本，并在您的第二个非构建作业中执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T11:58:54.480

我用 maven 和一个 zip 文件做了类似的事情。我在 Maven 中部署了一个带有构建步骤的 zip，调用 deploy:deploy-file 并在 settings.xml 中设置我的 Artifactory 存储库并直接部署在我的 artifactory 存储库上。

# image-processing - Imagemagick on linux to convert EMF to PNG

> ID：15063349
> 
> 赞同：9
> 
> 时间：2013-02-25T09:03:38.790
> 
> 标签：image-processing, imagemagick, libreoffice

I am trying to convert an image in EMF format to PNG using Imagemagick on Red Hat Enterprise Linux Server release 5.5 (Tikanga), but I am running into the following error:

> convert: no decode delegate for this image format `thumbnail.emf' @ error/constitute.c/ReadImage/550. convert: no images defined `1.png' @ error/convert.c/ConvertImageCommand/3068.

How might I fix this?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-02-26T18:10:21.950

安装 libreoffice 并在 emf 文件所在的文件夹上运行此命令：

```
libreoffice --headless --convert-to png *.emf 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-26T12:10:02.683

另一种方法是使用inkscape：

```
inkscape -o file.png source.emf 
```

有关`inkscape --help`更多导出选项（要导出的区域、dpi、图像分辨率、背景颜色等），请参阅。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-25T12:39:43.023

根据这个页面：[http ://www.imagemagick.org/script/formats.php](http://www.imagemagick.org/script/formats.php)

> EMF R Microsoft 增强型元文件（32 位） 仅在 Microsoft Windows 下可用。

# c# - 在 C# 中创建自己的集合类

> ID：15063366
> 
> 赞同：-3
> 
> 时间：2013-02-25T09:04:23.610
> 
> 标签：c#, collections

我是一名新的 c# 开发人员，我正在学习 c#。现在，我有一个非常小的项目，我应该编写自己的通用列表类来存储数据。我不允许使用任何 .NET 集合类。我的班级应该有添加/删除列表中项目数量的项目和属性的方法。由于我不允许使用任何 .NET 集合类，我的列表应该存储在我的类中的一个数组中。

那么，到目前为止我做了什么？由于我不知道如何开始，我只是写下了用于了解下一步应该做什么的方法：

```
public class myList
{
    public void addItem()
    {

    }

    public void removeItem()
    {

    }
} 
```

现在，我很迷茫，接下来我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:19:18.740

我建议您在 MSDN 上阅读如何使用数组：http: [//msdn.microsoft.com/en-us/library/aa288453](http://msdn.microsoft.com/en-us/library/aa288453(v=vs.71).aspx) (v=vs.71).aspx 。一般来说，要求社区为您编写代码是一种不好的形式，但这里有一些提示：

*   编写一个构造函数来用一个对象数组初始化列表，例如`public myListClass(object[] items)`
*   您的 addItem 类应该传递您尝试添加的对象，因此：`public void addItem(object newItem)`
*   您的 removeItem 应该有几个不同的重载，以便您可以确定要删除的内容。例如`remoteItem(int itemIndex)`，`removeItem(string itemKey)`或`removeItem(object item)`
*   您可能希望将数组的当前大小存储为私有变量，并在每次添加项目时将其递增 1。然后，您声明一个更大尺寸的新数组并将原始项目复制到其中。最后复制新项目。
*   您可能还需要一个排序方法，但这完全取决于将存储在数组中的对象的复杂程度。
*   尽管您可能会发现有必要计算项目的数量等，但在删除项目时您可能不必减小数组的大小。如果每次删除项目时不减小数组的大小，请务必添加项目时要考虑到这一点（因为它可能已经足够大了）。
*   编写一个 count() 方法来返回数组中的项目数 - 如果在删除项目时不减小数组的大小，请使用它来检查空值。

还有很多其他的考虑，尤其是使用泛型来允许存储多种类型。我建议围绕这个主题阅读一点：http: [//msdn.microsoft.com/en-gb/library/512aeb7t.aspx](http://msdn.microsoft.com/en-gb/library/512aeb7t.aspx)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:11:05.603

您需要将“列表”中的项目存储在数组中（您班级的私人成员）。

问题是数组具有固定大小（您不能只向其中添加项目）。所以你需要给它一些初始大小并记住它有多“满”。当您需要更多空间时，您需要创建一个新的、更大的数组并从原始数组复制项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T09:30:38.630

给你，不是特别优雅，但仍然是一个起点，它不使用 .net 集合类

```
public class Program
{
    public static void Main()
    {
        myList<int> lst = new myList<int>();
        lst.addItem(10);
        lst.addItem(20);
        lst.addItem(30);

        foreach (var i in lst.getItems())
        {
            Console.WriteLine(i);
        }

        lst.removeItem(20);

        foreach (var i in lst.getItems())
        {
            Console.WriteLine(i);
        }

        Console.ReadLine();

    }
}

public class myList <T>
{
    private T[] items = new T[0];

    public void addItem(T item)
    {
        Array.Resize(ref items, items.Count() + 1);
        items[items.Count()-1] = item;
    }

    public void removeItem(T item)
    {
        items[Array.IndexOf(items, item)] = items[items.Count() - 1];
        Array.Resize(ref items, items.Count() -1);
    }

    public IEnumerable<T> getItems()
    {
        return items;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T09:07:18.073

一个简单的集合并不难实现，但您需要执行以下操作：

保存数据的数组。使用泛型，它可能类似于`private T[] data = new T[10];`.
这当然会将大小限制为 10，但这可以更改:-)

通用方法。就像是`public T GetItem(int index){...}`

此外，如果您知道如何操作，拥有一个索引器可能会很棒。你可以用谷歌搜索:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T09:09:28.457

您需要`linked list`在 C# 中实现 a 。

看看这个： [http ://csharp-algos.blogspot.com/2010/09/blog-post.html](http://csharp-algos.blogspot.com/2010/09/blog-post.html)

这是在没有任何 .NET 库的情况下执行此操作的标准方法

# javascript - 在 CSS 中控制省略号样式

> ID：15063369
> 
> 赞同：2
> 
> 时间：2013-02-25T09:04:33.473
> 
> 标签：javascript, html, css, highlighting, ellipsis

我在一个看起来类似于浏览器的“查找”功能的 Web 应用程序中实现了搜索。我想突出显示页面上搜索到的字符串。搜索字符串通常是较长字符串的子字符串，用省略号显示。

我想在搜索字符串出现的任何地方突出显示它，如果在被省略号替换的文本部分中找到它，那么我想突出显示省略号本身。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T02:04:52.973

使用以下组件来实现它：

*   一个`overflow:hidden`容器元素

*   内容`overflow:auto`元素

*   一个`position:absolute`亮点元素

*   获取/设置状态的类属性

    以下是一些包含上述要求的演示：

*   [区分大小写的搜索书签](http://dpatrickcaldwell.blogspot.com/2010/09/regular-expression-search-bookmarklet.html)

*   [CSS 溢出亮点](http://www.cssplay.co.uk/menu/text-overflow.html)

# jquery - 使用 html 放置 Jquery 错误

> ID：15063370
> 
> 赞同：0
> 
> 时间：2013-02-25T09:04:36.547
> 
> 标签：jquery, html

我在我的表单中使用验证器插件。我有 3 组单选按钮和 1 组复选框。我正在为收音机和复选框使用错误放置，这样如果发生错误，它将错误类放在特定错误元素旁边。

```
 errorElement: "div",
        wrapper: "div",  // a wrapper around the error message
        errorPlacement: function(error, element) {
            if(element.is(":radio")){
                error.insertAfter('ul.radio');
                error.addClass('error_class');
            }else if(element.is(":checkbox")){
                error.insertAfter('ul.checkbox');
                error.addClass('error_class');
            } else{
                error.insertAfter(element);
                error.addClass('error_class');
            }
        }, 
```

如果我有单个复选框和无线电组，但如果我有 3 个无线电组并且这会在每个具有无线电类的无线电组旁边生成 3 个错误集，则它工作正常。像这样...

我的下一个 CSS 是这样的......

```
<div class="sgnup-cnt-inpt1">
                    <h3>Type of Classes *</h3>
                    <ul class="lst1 radio">
                        <li>
                            <span><input type="radio" class="required error" value="Academic" id="type_of_class_a" name="type_of_class"></span>
                            <label>Academic</label>
                        </li><li>
                            <span><input type="radio" class="required error" value="Non-Academic" id="type_of_class_n" name="type_of_class"></span>
                            <label> Non-academic</label>
                        </li>
                    </ul>
<div><div htmlfor="teaching_exp" generated="true" class="error" style="display: block;">Required.</div></div>
<div><div htmlfor="type_of_class" generated="true" class="error" style="display: block;">Required.</div></div>
<div><div htmlfor="gender" generated="true" class="error" style="display: block;">Required.</div></div><div style="display: none;"><div htmlfor="type_of_class_insti" generated="true" class="error" style="display: none;">Required.</div></div>
                    <div id="radio"></div>
                </div> 
```

**注意**我不希望在每种情况下都使用 if else 无线电的错误放置。我想在全球范围内使用`:radio`. 我不想将它与名称和其他属性进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:27:41.127

您在`ul`具有指定类的每个元素之后插入发生的错误，而不仅仅是对应的。尝试：

```
errorPlacement: function(error, element) {
    if(element.is(":radio")){
        error.insertAfter(element.closest('ul.radio'));
        error.addClass('error_class');
    } else if(element.is(":checkbox")){
        error.insertAfter(element.closest('ul.checkbox'));
        error.addClass('error_class');
    } else {
        error.insertAfter(element);
        error.addClass('error_class');
    }
}, 
```

所以错误只会附加到`ul`与错误元素相关的元素上。

# maven - Jenkins + selenium 使用故障安全插件进行测试

> ID：15063375
> 
> 赞同：2
> 
> 时间：2013-02-25T09:05:04.847
> 
> 标签：maven, selenium, jenkins, integration, maven-failsafe-plugin

我有一个 Jenkins 平台，它调用 maven 来进行单元测试（使用 surefire 插件）和集成测试（使用故障安全插件）。当集成测试出现错误时，Jenkins 认为构建成功。这种行为正常吗？我希望它认为构建不稳定。更一般地说，您知道 Jenkins 如何读取和解释构建结果以将构建视为成功或不稳定吗？我在网上某处读到故障安全报告必须重定向到万无一失的报告路径。我做了id，但问题仍然存在。

pom.xml：

```
[...]
    <plugin>
      <artifactId>maven-surefire-plugin</artifactId>
      <version>2.10</version>
      <configuration>
        <disableXmlReport>false</disableXmlReport>
      </configuration>
      <executions>
        <execution>
          <id>default-test</id>
          <phase>test</phase>
          <configuration>
            <includes>
              <include>**/tests/**</include>
            </includes>
            <excludes>
              <exclude>**/testsIntegration/**</exclude>
            </excludes>
          </configuration>
        </execution>
      </executions>
    </plugin>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-failsafe-plugin</artifactId>
      <version>2.7.2</version>
      <configuration>
        <disableXmlReport>false</disableXmlReport>
        <reportsDirectory>${basedir}/target/surefire-reports</reportsDirectory>
        <includes>
          <include>com/acelys/conventionsJuridiques/*.java</include>
          <!-- ... inclure les tests Selenium  -->
        </includes>
      </configuration>
      <executions>
        <execution>
          <id>integration-test</id>
          <phase>integration-test</phase>
          <goals>
            <goal>integration-test</goal>
          </goals>
          <configuration>
            <includes>
              <include>**/testsIntegration/**</include>
            </includes>
            <excludes>
              <exclude>**/tests/**</exclude>
            </excludes>
          </configuration>
        </execution>
      </executions>
    </plugin> 
[...] 
```

詹金斯的输出：

```
[...]
mojoStarted org.apache.maven.plugins:maven-failsafe-plugin:2.7.2(integration-test)
[INFO] 
[INFO] --- maven-failsafe-plugin:2.7.2:integration-test (integration-test) @ BaseContrats ---
[INFO] Failsafe report directory: C:\jenkins_home\workspace\Base Contrats EXT JS MAVEN\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.acelys.conventionsJuridiques.testsIntegration.connexion.TestConnexion

Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 23.971 sec <<< FAILURE!

Results :

Failed tests: 
  testHomePage(com.acelys.conventionsJuridiques.testsIntegration.connexion.TestConnexion)

Tests run: 1, Failures: 1, Errors: 0, Skipped: 0

[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!
mojoSucceeded org.apache.maven.plugins:maven-failsafe-plugin:2.7.2(integration-test)
mojoStarted org.apache.tomcat.maven:tomcat6-maven-plugin:2.1-SNAPSHOT(tomcat-shutdown)
[INFO] 
[INFO] --- tomcat6-maven-plugin:2.1-SNAPSHOT:shutdown (tomcat-shutdown) @ BaseContrats ---
25 févr. 2013 09:32:08 org.apache.coyote.http11.Http11Protocol destroy
INFO: Stopping Coyote HTTP/1.1 on http-8080
25 févr. 2013 09:32:08 org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
25 févr. 2013 09:32:08 org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc

mojoSucceeded org.apache.tomcat.maven:tomcat6-maven-plugin:2.1-SNAPSHOT(tomcat-shutdown)
projectSucceeded BaseContrats:BaseContrats:1.0-SNAPSHOT
sessionEnded
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2:07.408s
[INFO] Finished at: Mon Feb 25 09:32:08 CET 2013
[INFO] Final Memory: 13M/51M
[INFO] ------------------------------------------------------------------------
Projects to build: [MavenProject: BaseContrats:BaseContrats:1.0-SNAPSHOT @ C:\jenkins_home\workspace\Base Contrats EXT JS MAVEN\pom.xml]
[JENKINS] Archiving C:\jenkins_home\workspace\Base Contrats EXT JS MAVEN\pom.xml to C:\jenkins_home\jobs\Base Contrats EXT JS MAVEN\modules\BaseContrats$BaseContrats\builds\2013-02-25_09-29-58\archive\BaseContrats\BaseContrats\1.0-SNAPSHOT\BaseContrats-1.0-SNAPSHOT.pom
[JENKINS] Archiving C:\jenkins_home\workspace\Base Contrats EXT JS MAVEN\target\ConventionsJuridiques.war to C:\jenkins_home\jobs\Base Contrats EXT JS MAVEN\modules\BaseContrats$BaseContrats\builds\2013-02-25_09-29-58\archive\BaseContrats\BaseContrats\1.0-SNAPSHOT\BaseContrats-1.0-SNAPSHOT.war
channel stopped
Finished: SUCCESS 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T15:16:28.410

根据[文档](http://maven.apache.org/surefire/maven-failsafe-plugin/)：

> failsafe:verify 验证应用程序的集成测试是否通过。

您需要将目标添加到 maven-failsafe-plugin 执行中：

```
<goals>
   <goal>integration-test</goal>
   <goal>verify</goal>
</goals> 
```

这将允许 Jenkins 解释测试结果并将构建标记为不稳定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:24:27.077

您可以看到 maven 以 SUCCESS 完成。这将使詹金斯也取得成功。

要将构建标记为不稳定，您需要一个构建后操作来分析您的测试结果并将构建标记为失败或不稳定。我建议您搜索有关 Jenkins 构建后操作的更多详细信息，以处理测试结果并根据需要标记构建。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-14T01:13:11.243

在构建后操作下，发布 JUnit 测试结果报告会更改要搜索的报告 XML。

假设是使用标准的万无一失和故障安全插件输出目录。

[![在此处输入图像描述](../Images/f65e98ad6cfd4c4a7c8f2215ee0c2dfd.png)](https://i.stack.imgur.com/818Te.png)

更改为

[![在此处输入图像描述](../Images/7645bcc60f7e5a8398302959e4e7c5d7.png)](https://i.stack.imgur.com/iCDAZ.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T14:23:30.867

As said by [https://stackoverflow.com/users/709863/stephane-piette](https://stackoverflow.com/users/709863/stephane-piette): Add a post build action 'Publish Performance test result report'. This action is provided by the plugin named 'Performance plugin'. You probably do not have this plugin installed, which is why it does not exist in the list.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T11:16:17.857

您应该在构建中添加一个步骤：“发布 Junit 报告”您将获得显示所有测试结果的图表，但如果测试失败，它也会设置正确的构建结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-18T13:44:21.033

当测试失败时，故障安全插件的目标“集成测试”不会将构建标记为错误。

您必须在插件执行中添加目标“验证”以在“集成测试”之后运行。这将查找错误或失败并将构建标记为“错误”。然后 Jenkins 会看到 Maven 没有成功。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-12T15:34:26.657

您必须设置插件的配置，以便在测试失败时构建失败：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    ....
    <configuration>
        <testFailureIgnore>false</testFailureIgnore>
    </configuration>
    <executions>
        ....
    </executions>
</plugin> 
```

# sql - 获取最接近变量的日期

> ID：15063376
> 
> 赞同：0
> 
> 时间：2013-02-25T09:05:07.617
> 
> 标签：sql, oracle, oracle11g

我正在研究旋转设备的报告应用程序。我们每 3 小时计算一次设备的状态，并将计算结果存储在 Oracle 数据库中。

在报告之前只显示“当前状态”（我们只检索到最新的计算）。但现在用户可以选择及时回滚并查看之前的计算。

```
SELECT *
FROM G_RunningHoursEvent
WHERE GRTE_TagName='#!VARIABLE_TAGNAME#' AND
      GRTE_ValuesUpdate IN (SELECT MAX(GRTE_ValuesUpdate)
                            FROM G_RunningHoursEvent
                            WHERE GRTE_TagName='#!VARIABLE_TAGNAME#') 
```

SQL 不是我的强项，大多数同事都在放假。我需要一些关于如何提取最接近新变量的最新计算的提示`#!VARIABLE_TIME#`

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:41:21.040

如果我理解正确，用户将选择一个日期时间值，您需要选择最接近该时间的事件记录。

以下查询在子查询中做了一些魔术，以建立最接近该`#!VARIABLE_TIME#`值的记录。

```
select 
from g_runninghoursevent
where grte_tagname = '#!VARIABLE_TAGNAME#'
and grte_valuesupdate in 
     ( select grte_valuesupdate 
       from ( with data as 
                   ( select grte_valuesupdate 
                            , abs(grte_valuesupdate  -  #!VARIABLE_TIME#) tdiff
                     from g_runninghoursevent
                     where grte_tagname = '#!VARIABLE_TAGNAME#` )
              select grte_valuesupdate 
                     , rank() over (order by tdiff asc) rnk
              from data )
       where rnk = 1 ) 
```

**笔记**

*   ABS() 调用意味着子查询将在输入参数之前或之后返回差异最小的记录。
*   子查询使用 IN 而不是相等，因为您可能会因为最小的差异而打成平手
*   我假设`#!VARIABLE_TIME#`是一个日期时间；如果它是一个字符串，则需要使用适当的掩码将其转换为日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:09:34.343

此查询应该可以解决您的问题：

```
SELECT *
FROM G_RunningHoursEvent
WHERE GRTE_TagName='#!VARIABLE_TAGNAME#' AND
      TRUNC(GRTE_ValuesUpdate) = (SELECT TRUNC(GRTE_ValuesUpdate)
                                  FROM (SELECT GRTE_ValuesUpdate
                                        FROM G_RunningHoursEvent
                                        WHERE GRTE_TagName='#!VARIABLE_TAGNAME#'
                                        ORDER BY GRTE_ValuesUpdate DESC)
                                  WHERE ROWNUM = 1); 
```

这样做，您将按日期对 G_RunningHoursEvent 记录进行排序，在第一行中具有最接近的记录（及时）。使用另一个 SELECT，您只需提取第一条记录。

# javascript - javascript是否在每个浏览器上连续加载？

> ID：15063383
> 
> 赞同：1
> 
> 时间：2013-02-25T09:05:30.677
> 
> 标签：javascript, serial-processing

如果我在一个页面上有多个 javascript 文件，它总是会在浏览器中连续加载吗？

```
<script src='test1.js'></script>
<script src='test2.js'></script>
<script src='test3.js'></script> 
```

例如，如果 test*.js 将使用 console.log 写入 1,2 和 3，它是否总是在每个浏览器上写入 1,2,3？

如果不是，有没有办法让它同步/串行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:17:24.670

我实际上在以下浏览器中测试了您的示例，每个浏览器都是串行加载的：

*   火狐
*   即 7-9
*   铬合金
*   歌剧
*   苹果浏览器

[请阅读这个详尽的答案以获取有关原因的更多信息。](https://stackoverflow.com/a/8996894/944301)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:12:21.360

> 例如，如果 test*.js 将使用 console.log 写入 1,2 和 3，它是否总是在每个浏览器上写入 1,2,3？

是的。

浏览器可以并行加载脚本，但总是按顺序执行它们。一个例外是您在标签上设置了`async`or`defer`属性。`script`动态创建的脚本（通过 JS）本质上也是异步的。

请注意，在页面中放置太多脚本可能会减慢渲染速度。如果服务器花费太长时间来提供文件之一作为下面的标记，`script`则在脚本加载并执行之前不会呈现。将所有 JS 文件压缩成一个用于生产环境的文件并使用更多脚本标签是一种很好的做法，并且有充分的理由（例如，使用 CDN 托管的库）。

# jquery - 加载所有 jquery 函数后如何启用提交表单？

> ID：15063384
> 
> 赞同：0
> 
> 时间：2013-02-25T09:05:35.750
> 
> 标签：jquery, asp.net-mvc, form-submit

我在部分视图中有一个带有剃刀语法的 MVC 项目。每个视图都有一些 jquery 函数，它们在表单中加载一些数据。由于函数的异步加载，加载表单中的所有函数可能需要几秒钟的时间。如果用户在加载所有 jquery 函数之前单击提交按钮，则会发生数据丢失。

请问什么是最好的解决方案？

我的观点是这样的：

```
<input type="submit" id="save" />
...
<script type="JavaScript/text">
...
$.getJSON(actionUrl1, function (data) {...});
...
$.getJSON(actionUrl2, function (data) {...});
...
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:06:31.927

想到的一种可能性是在执行 AJAX 请求期间阻止提交按钮，然后在成功处理程序中取消阻止它。你也可以看看[`jQuery blockUI plugin`](http://www.malsup.com/jquery/block/)你可能会觉得有用的。

# image - 强制在 Codeigniter 中上传 1 张同名图片

> ID：15063386
> 
> 赞同：0
> 
> 时间：2013-02-25T09:05:43.610
> 
> 标签：image, codeigniter, upload, multiplication

我做了一个图片上传页面。这一切都很顺利。

我的问题是当我上传一个名为 filename.jpg 的图像并且我再次上传它时，相同的图像上传但将名称更改为 filename1.jpg

我该如何强制执行此操作并使用诸如“您上传的图像已上传”之类的信息

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:11:06.603

文件名的更改是由服务器计算机的操作系统发起的，以产生提示，您必须在 使用 php 脚本
上传时检查文件名是否重复 如果您有一个存储文件名的数据库，那么这很容易

# java - 透明图像在透明面板上的旋转

> ID：15063390
> 
> 赞同：2
> 
> 时间：2013-02-25T09:05:54.660
> 
> 标签：java, swing, rotation, transparency, paintcomponent

我一直在研究一个程序，该程序涉及在透明表单上旋转部分透明的图像。图像的绘制最初效果很好，我还将自定义面板的背景颜色设置为透明的浅蓝色，效果也很好。当我尝试旋转图像时，我的问题就开始了。

为了旋转它，我必须将 panel.getGraphics() 转换为 Graphics2D。当我这样做时，透明度消失了，所以我完成了我的轮换代码，然后阅读了透明度。我发现我可以设置 Graphics2D 的合成，这正是我在这里看到的：

```
@Override
public void paintComponent(Graphics g) 
{
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D)g;

    g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC));
    g2d.setColor(new Color(0, 0, 200, 90));
    g2d.fillRect(0, 0, this.getWidth(), this.getHeight());
    g2d.rotate(radians);
    g2d.drawImage(img, 0, 0, null);

    repaint();
} 
```

当我运行它时，我得到如下表格（请注意，这不是我的正常图像）：

[旋转前](http://oi49.tinypic.com/259cor4.jpg)

这几乎是我想要的，除了它不显示透明的蓝色背景。但是，如果我旋转图像，蓝色显示：

[旋转后](http://oi47.tinypic.com/33p4pqr.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:39:18.150

问题部分出在您指定的复合材料中：AlphaComposite.SRC
我真的不知道您使用它的目的是什么，但它会覆盖源像素数据。这就是为什么在面板背景上绘制图像时会覆盖面板背景的原因。

如果您还没有阅读，我建议您阅读有关图形复合的内容：http: [//docs.oracle.com/javase/tutorial/2d/advanced/compositing.html](http://docs.oracle.com/javase/tutorial/2d/advanced/compositing.html)

无论如何，请参阅示例如何完成类似的操作：（
这只是其中一种可能性 - 您可以通过其他十种方式来实现）

```
public class SmileyTest
{
    private static Color bg = new Color ( 0, 0, 255, 128 );
    private static float angle = 0f;

    public static void main ( String[] args )
    {
        final ImageIcon icon = new ImageIcon ( SmileyTest.class.getResource ( "icons/smiley.png" ) );

        JDialog frame = new JDialog ();
        frame.setLayout ( new BorderLayout () );

        // We should not use default background and opaque panel - that might cause repaint problems
        // This is why we use JPanel with transparent background painted and opacity set to false
        JPanel transparentPanel = new JPanel ( new BorderLayout () )
        {
            protected void paintComponent ( Graphics g )
            {
                super.paintComponent ( g );
                g.setColor ( bg );
                g.fillRect ( 0, 0, getWidth (), getHeight () );
            }
        };
        transparentPanel.setOpaque ( false );
        frame.add ( transparentPanel );

        // Image in another component
        final JComponent component = new JComponent ()
        {
            protected void paintComponent ( Graphics g )
            {
                super.paintComponent ( g );

                Graphics2D g2d = ( Graphics2D ) g;

                // For better image quality when it is rotated
                g2d.setRenderingHint ( RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR );

                // Rotating area using image middle as rotation center
                g2d.rotate ( angle * Math.PI / 180, getWidth () / 2, getHeight () / 2 );

                // Transparency for image
                g2d.setComposite ( AlphaComposite.getInstance ( AlphaComposite.SRC_OVER, 0.5f ) );

                // Draing image
                g2d.drawImage ( icon.getImage (), 0, 0, null );
            }
        };
        transparentPanel.add ( component );

        // Rotation animation (24 frames per second)
        new Timer ( 1000 / 48, new ActionListener ()
        {
            public void actionPerformed ( ActionEvent e )
            {
                angle += 0.5f;
                component.repaint ();
            }
        } ).start ();

        frame.setUndecorated ( true );
        AWTUtilities.setWindowOpaque ( frame, false );
        frame.setSize ( icon.getIconWidth (), icon.getIconHeight () );
        frame.setLocationRelativeTo ( null );
        frame.setVisible ( true );
    }
} 
```

只需运行它并查看结果： ![在此处输入图像描述](../Images/0ad66c807899544febc8b181c0f427a2.png)

还有一些关于代码的注释为什么你应该或不应该做某事。
确保您仔细阅读它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:43:25.467

还有另一种方法：

```
import java.awt.AlphaComposite;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.geom.AffineTransform;
import java.awt.geom.NoninvertibleTransformException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.SwingUtilities;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestTransparentRotatedImage {

    private static class TransparentRotatedImage extends JPanel {
        private final Image image;
        private double rotation;

        public TransparentRotatedImage(Image image) {
            this.image = image;
            setOpaque(false);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2 = (Graphics2D) g;
            g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER));
            g2.setColor(new Color(0, 0, 200, 90));
            g2.fillRect(0, 0, getWidth(), getHeight());
            g2.setTransform(getTransformation());
            g2.drawImage(image, 0, 0, this);
        }

        protected AffineTransform getTransformation() {
            try {
                AffineTransform translateInstance = AffineTransform.getTranslateInstance(+image.getWidth(this) / 2,
                        +image.getWidth(this) / 2);
                AffineTransform inverse = translateInstance.createInverse();
                AffineTransform rotateInstance = AffineTransform.getRotateInstance(Math.toRadians(rotation));
                AffineTransform at = translateInstance;
                at.concatenate(rotateInstance);
                at.concatenate(inverse);
                return at;
            } catch (NoninvertibleTransformException e) {
                e.printStackTrace();
                return null;
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(image.getWidth(this), image.getHeight(this));
        }

        public void setRotation(double rotation) {
            this.rotation = rotation;
            repaint();
        }
    }

    protected void initUI() throws MalformedURLException {
        final JFrame frame = new JFrame(TestTransparentRotatedImage.class.getSimpleName());
        frame.setUndecorated(true);
        frame.setBackground(new Color(0, 0, 0, 0));
        frame.getContentPane().setBackground(new Color(0, 0, 0, 0));
        // com.sun.awt.AWTUtilities.setWindowOpacity(frame, 0);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final TransparentRotatedImage rotatedImage = new TransparentRotatedImage(new ImageIcon(new URL(
                "http://files.myopera.com/supergreatChandu8/albums/5466862/smiley-transparent.png")).getImage());
        frame.add(rotatedImage);
        final JSlider slider1 = new JSlider(0, 360);
        slider1.setValue(0);
        slider1.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                rotatedImage.setRotation(slider1.getValue());
            }
        });
        frame.add(slider1, BorderLayout.SOUTH);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new TestTransparentRotatedImage().initUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

![在此处输入图像描述](../Images/532d14598f025f13c4942035830941a7.png)

# qt - OpenGL纹理速率太慢？

> ID：15063393
> 
> 赞同：1
> 
> 时间：2013-02-25T09:05:59.647
> 
> 标签：qt, opengl, pixel, texture-mapping, pixel-manipulation

我有一个 5 兆像素的纹理，我无法更新。纹理显示在与视频流相似的矩形上。

OpenGL 命令执行速度很快，但实际的纹理更新速率并不理想，可能只有每秒 3 个实际帧。有一些变化，但在使用较小的纹理 (500x500) 时变化不大。

该机有NVIDIA gtx 570

我最初的努力是使用`glTexSubImage2D`and `glBufferSubData`，但这些表现比内存映射方案稍差。

有没有办法强制显卡更新贴图？视频流媒体软件是如何编写的？

**渲染循环**

```
void glStream::paintGL()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
    program1.bind();
    program1.setUniformValue("texture", 0);
    program1.enableAttributeArray(vertexAttr1);
    program1.enableAttributeArray(vertexTexr1);
    program1.setAttributeArray(vertexAttr1, vertices.constData());
    program1.setAttributeArray(vertexTexr1, texCoords.constData());
    //
    glECheck();
    glBindTexture(GL_TEXTURE_2D, textures[0]);
    glBindBuffer(GL_PIXEL_UNPACK_BUFFER_ARB,pbos[0]);
    void* memory = glMapBuffer(GL_PIXEL_UNPACK_BUFFER_ARB,GL_WRITE_ONLY);
    device->fillBuffer((unsigned char *)memory,heightGL,widthGL); // takes 2ms (not long)
    glUnmapBuffer(GL_PIXEL_UNPACK_BUFFER_ARB);
    glTexSubImage2D(GL_TEXTURE_2D,0,0,0,widthGL,heightGL,GL_LUMINANCE,GL_UNSIGNED_BYTE, NULL);
    glDrawArrays(GL_TRIANGLES, 0, vertices.size());
    glBindBuffer(GL_PIXEL_UNPACK_BUFFER_ARB,0);
    glBindTexture(GL_TEXTURE_2D,0);
    //
    program1.disableAttributeArray(vertexTexr1);
    program1.disableAttributeArray(vertexAttr1);
    program1.release();
    glECheck();//no errors
} 
```

**纹理保留**

```
void glStream::reserveTextures()
{
    assert(numGLFrames>0);
    assert(glGenBuffers);
    displayBuff = (GLubyte*) calloc(numGLFrames*widthGL*heightGL,sizeof(GLubyte));//GL_RGB8
    memset(displayBuff,100,numGLFrames*widthGL*heightGL*sizeof(GLubyte));
    glGenBuffers(1,&pbos[0]);
    glBindBuffer(GL_PIXEL_UNPACK_BUFFER_ARB, pbos[0]);
    glBufferData(GL_PIXEL_UNPACK_BUFFER_ARB,
                 numGLFrames*widthGL*heightGL*sizeof(GLubyte),
                 &displayBuff[0], GL_STREAM_DRAW);
    glBindBuffer(GL_PIXEL_UNPACK_BUFFER_ARB, 0);
    glGenTextures(1,&textures[0]);
    glBindTexture(GL_TEXTURE_2D,textures[0]);
    glTexImage2D(GL_TEXTURE_2D,0,GL_LUMINANCE,
                 widthGL,heightGL,0,GL_LUMINANCE,GL_UNSIGNED_BYTE,NULL);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP, GL_FALSE);
    glBindTexture(GL_TEXTURE_2D,0);
} 
```

**初始化**

```
void glStream::initializeGL()
{
    GLenum err = glewInit();
    if (GLEW_OK != err)
    {
        const char * emssage = (const char*)glewGetErrorString(err);
        QMessageBox::information(0, "OpenGL 3.x Context Example",
                                 emssage);
        exit(20);
    }
    glDisable(GL_DEPTH_TEST);
    QGLShader *vshader1 = new QGLShader(QGLShader::Vertex, this);
    const char *vsrc1 =
        "attribute vec2 coord2d;   \n"
        "attribute mediump vec4 texCoord;\n"
        "varying mediump vec4 texc;\n"
        "void main()                  \n"
        "{                            \n"
        "   gl_Position = vec4(coord2d, 0.0, 1.0); \n"
        "   texc = texCoord;\n"
        "}                          \n";
    vshader1->compileSourceCode(vsrc1);
    QGLShader *fshader1 = new QGLShader(QGLShader::Fragment, this);
    const char *fsrc1 =
        "uniform sampler2D texture;\n"
        "varying mediump vec4 texc;\n"
        "void main(void)\n"
        "{\n"
        "    gl_FragColor = texture2D(texture, texc.st);\n"
        "}\n";
    fshader1->compileSourceCode(fsrc1);
    program1.addShader(vshader1);
    program1.addShader(fshader1);
    program1.link();
    vertexAttr1 = program1.attributeLocation( "coord2d");
    vertexTexr1 = program1.attributeLocation( "texCoord");
    // Create the vertex buffer.
    vertices.clear();
    float u=1;
#define AVEC -u,u
#define BVEC -u,-u
#define CVEC u,u
#define DVEC u,-u
    vertices << QVector2D(AVEC);vertices << QVector2D(BVEC);
    vertices << QVector2D(CVEC);vertices << QVector2D(BVEC);
    vertices << QVector2D(DVEC);vertices << QVector2D(CVEC);
    // Create the texture vertex buffer
#define TAVEC 0,1
#define TBVEC 0,0
#define TCVEC 1,1
#define TDVEC 1,0
    texCoords << QVector2D(TAVEC);texCoords << QVector2D(TBVEC);
    texCoords << QVector2D(TCVEC);texCoords << QVector2D(TBVEC);
    texCoords << QVector2D(TDVEC);texCoords << QVector2D(TCVEC);
    glECheck();
    reserveTextures();
} 
```

**编辑 1**

我相信填充缓冲区会产生新的纹理，因为在代码的其他部分中，我将此纹理写入文件，并且确实有所不同。当我的文件 IO 比 OpenGL 纹理更快时，这是一个悲伤的日子。

**编辑 2** 我尝试了 FRAPS，并验证了渲染循环的速度约为 18 FPS，但可见更新速度较慢（可能为 3 FPS）。什么可以解释这种差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:53:35.253

在对 glBufferData 的调用中，PBO 比纹理大得多：

```
numGLFrames*widthGL*heightGL*sizeof(GLubyte) 
```

您正在为多个纹理（帧）分配足够大的 PBO，但只能读取/写入一帧的数据。

如果将 PBO 设置为与纹理相同的大小并使用 glTexImage2D 而不是 glTexSubImage2D，是不是更快？

# c++ - 获取时间作为文件名

> ID：15063396
> 
> 赞同：0
> 
> 时间：2013-02-25T09:06:21.460
> 
> 标签：c++, c, directshow

我有一个使用 Direct-show 抓取视频的程序。我的问题是我希望保存的视频以时间作为名称。这是我所做的：

```
CoInitialize(NULL);
CComPtr<IGraphBuilder> graph;
graph.CoCreateInstance(CLSID_FilterGraph);
time_t rawtime;
struct tm * timeinfo;
time (&rawtime);
timeinfo = localtime (&rawtime);
wchar_t pathstuff[50];
swprintf(pathstuff, L"D:\\BMDvideos\\%hs.avi", asctime(timeinfo));
LPCOLESTR x = pathstuff;
HRESULT hr = BuilGraph(graph,x);
.......... 
```

这不起作用，知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:28:24.233

格式化时间的函数是`strftime`，所以你可以这样做：

```
char filename[1000];
size_t l = strftime( filename,
                     sizeof(filename),
                     "D:/BMDvideos/%Y-%m-%dT%Hh%Mm%S.avi",
                     timeinfo );
assert( l != 0 ); 
```

几条评论：

*   您*不*想要宽字符文件名。它们不是标准的，也没有得到广泛支持。（Unicode 文件名的通用标准是 UTF-8，它适用于任何地方。事实上，您不希望在程序之外的任何地方使用宽字符。）

*   您不能使用任何标准格式化函数，例如 `asctime`，因为它们几乎肯定会`':'`在时间格式中使用冒号 ( )，并且冒号是 Windows 下文件名中的非法字符。您必须自己指定确切的格式，使用`strftime`.

*   您可能还应该避免使用许多其他字符。我倾向于将我的文件名限制为字母数字、下划线、连字符和点，而且我不太确定连字符的可移植性，或者带有多个点的名称。如果名称不是供人类使用的，我只会使用 `"%Y%m%d%H%M%S"`，没有分隔符。

*   最后，对日期使用 ISO 排序（年、月、日）很有用，因为这意味着字典排序对应于日期排序。

编辑：

既然你说你*必须*使用`wchar_t`文件名（这是一个非常糟糕的策略）：你仍然可以使用上面的来生成文件名，然后`std::wstring`通过简单地使用 `std::wstring( filename, filename + strlen( filename ) )`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:35:34.380

asctime 在返回的字符串末尾添加*'\n'*字符，这对于文件名无效

> 调用 ctime(t) 等价于 asctime(localtime(t))。它将日历时间 t 转换为形式为 null 的字符串
> 
> ```
>  "Wed Jun 30 21:49:08 1993\n" 
> ```

尝试使用 strftime istead

```
char name[100]
strftime(name, 100, "%F_%R", timeinfo); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T09:55:21.640

`wchar_t *`并且`LPCOLESTR`在运行时不是兼容的类型。你读过[这本 BSTR 手册](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221069%28v=vs.85%29.aspx)吗？它将告诉您如何正确分配 BSTR。

# html - 具有背景图像和背景颜色以及阴影的 SVG 元素

> ID：15063398
> 
> 赞同：2
> 
> 时间：2013-02-25T09:06:28.497
> 
> 标签：html, svg, background-image, svg-filters

我正在使用[这个答案](https://stackoverflow.com/a/6094674/517193)在 SVG 元素（如圆形）上应用投影。我的元素上有一个`fill`属性可以在其上应用背景颜色，现在我想将所有这些与圆圈上的背景图像结合起来。

我试过使用 a`<pattern>`但我只能拥有背景图像，或者添加`<feImage>`到我的过滤器阴影但过滤器不再起作用。

基本上，知道我的图像可以在 /public/images/... 中找到，我应该在此代码中添加什么：

```
<filter id="dropshadow" width="130%" height="130%">
  <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
  <feOffset dx="0" dy="4" result="offsetblur"/>
    <feComponentTransfer>
    <feFuncA type="linear" slope="0.1"/>
  </feComponentTransfer>
  <feMerge> 
    <feMergeNode/>
    <feMergeNode in="SourceGraphic"/>
  </feMerge>
</filter>
<circle cx="50%" cy="50%" r="49%" filter="url(#dropshadow)" fill="#f8f8f8" stroke="#e7e7e7" stroke-width="1px"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:37:44.190

好吧，我不知道你在 feImage 上做了多少努力。但这段代码完美无缺。您想拉入 feImage，然后使用 feComposite “in”将其剪辑到源。然后您可以在该结果下合成阴影。

```
<svg>
<defs>

<filter id="dropshadow" width="130%" height="130%">
<feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
<feOffset dx="0" dy="4" result="offsetblur"/>
<feComponentTransfer in="offsetblur" result="dropshadow">
<feFuncA type="linear" slope="0.1"/>
</feComponentTransfer>

<feImage result="bgpic" xlink:href="http://www.sencha.com/img/sencha-large.png" /> 
<feComposite operator="atop" in="bgpic" in2="SourceGraphic" result="coikelwimg"/>

<feMerge> 
<feMergeNode in="coikelwimg"/>
<feMergeNode in="dropshadow"/>
</feMerge>
</filter>

</defs>
<circle cx="50%" cy="50%" r="49%" filter="url(#dropshadow)" fill="#f8f8f8" stroke="#e7e7e7" stroke-width="1px"/>

</svg> 
```

# php - 常规 URL 解析不适 用于 @ 符号

> ID：15063401
> 
> 赞同：0
> 
> 时间：2013-02-25T09:06:32.733
> 
> 标签：php, regex

我有这个常规例外：

```
(?:([^\:]*)\:\/\/)?(?:([^\:\@]*)(?:\:([^\@]*))?\@)?(?:([^\/\:]*)\.(?=[^\.\/\:]*\.[^\.\/\:]*))?([^\.\/\:]*)(?:\.([^\/\.\:]*))?(?:\:([0-9]*))?(\/[^\?#]*(?=.*?\/)\/)?([^\?#]*)?(?:\?([^#]*))?(?:#(.*))? 
```

1）如果解析网址：[http](http://test.ru/long/path/file.ext?queryparam=123&more=234) ://test.ru/long/path/file.ext?queryparam=123&more=234 - 没关系

[http://viper-7.com/QNCAQu](http://viper-7.com/QNCAQu)

2) 如果解析 url: [ftp://admin:pass@server.com/long/path/file.ext](ftp://admin:pass@server.com/long/path/file.ext) -没问题

[http://viper-7.com/jkQHpP](http://viper-7.com/jkQHpP)

3) 但是，如果 GET 参数中存在 [AT] (@)，它就不能正常工作！

示例：[http ://test.ru/long/path/file.ext?queryparam=123&mail=test@domain.com](http://test.ru/long/path/file.ext?queryparam=123&mail=test@domain.com)

[http://viper-7.com/9qIdcj](http://viper-7.com/9qIdcj)

PS。在stackoverflow上发现常规异常，但不记得主题。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:13:52.673

这是正确的，它失败了，因为它是一个格式错误的 url。

网址应为

```
http://test.ru/long/path/file.ext?queryparam=123&mail=test%40domain.com 
```

而不是格式错误的 test@domain.com。

javascript函数`encodeURIComponent('@');`是你的朋友：D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:25:23.860

如果您尝试解析 URL，则 regex 不是方法。[PHP 有一个名为parse_url()](http://us3.php.net/parse_url)的内置函数，可以将 URL 分解为多个段以便于访问。更高效，更少的代码。此外，您可以使用[parse_str()](http://us3.php.net/manual/en/function.parse-str.php)进一步分解查询段。最后，如果要分解路径，也可以使用[pathinfo()](http://us3.php.net/manual/en/function.pathinfo.php)。PHP 拥有所有这些现成的，您只需要开始使用它们。

# android - 如何通过用户交互在地图上旋转标记

> ID：15063404
> 
> 赞同：3
> 
> 时间：2013-02-25T09:06:38.210
> 
> 标签：android, google-maps

我将在 Android 上的 Google Maps API v2 上放置一个标记。我可以通过将 draggable 设置为 true 来拖动它。知道如何用手指旋转它吗？（我需要用户设置旋转 - 我应该在程序中保存角度）可以`onTouchEvent()`通过在普通类中扩展视图来处理触摸手势。但在 Google Maps API v2 Android 中，我们扩展了 Activity。

# algorithm - 计算给定大小的具有非循环路径的不同矩形网格迷宫

> ID：15063411
> 
> 赞同：4
> 
> 时间：2013-02-25T09:06:57.277
> 
> 标签：algorithm, maze

我试图解决以下问题：

> mn 迷宫是一个 mn 矩形网格，其墙壁放置在网格单元之间，这样从左上角的正方形到任何其他正方形都只有一条路径。以下是 912 迷宫和 1520 迷宫的示例：
> 
> ![在此处输入图像描述](../Images/e0308ccaf46d994c405f8bd1a0c42e3c.png)
> 
> 令 C(m,n) 为不同的 mn 迷宫的数量。可以通过旋转和从另一个迷宫反射形成的迷宫被认为是不同的。
> 
> 可以验证 C(1,1) = 1, C(2,2) = 4, C(3,4) = 2415, 和 C(9,12) = 2.5720e46（科学计数法四舍五入到 5 位有效位数）。
> 找到 C(100,500)

现在，有一个明确的公式可以给出正确的结果，并且它是完全可计算的。但是，据我了解，欧拉计划问题的解决方案应该更像是聪明的算法，而不是显式的公式计算。试图将解决方案表述为递归，我只能得到一个线性系统，其中变量的数量随着迷宫的大小呈指数增长（更准确地说，如果有人试图为 mxn 迷宫的数量编写一个递归，并且 m 保持固定，到达一个线性系统，其变量的数量随着 m 呈指数增长：其中一个变量是 mxn 迷宫的数量，具有问题 380 声明中给出的属性，而其他变量是 mxn 迷宫的数量在某些特定的“

我还想将问题简化为可以更容易解决的子问题，然后在构造更大的子问题的解决方案时重用子问题解决方案（动态编程方法），但在这里我偶然发现了子问题似乎涉及不规则迷宫的事实形状，同样，这种迷宫的数量是 m,n 的指数。

如果有人知道一种可行的方法（m=100，n=500），而不是使用显式公式或一些特别定理，并且可以提示在哪里寻找，对我来说这将非常有趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T15:15:04.933

这基本上是一个[生成树](http://en.wikipedia.org/wiki/Spanning_tree)计数问题。具体来说，它是计算网格图中生成树的数量。

## 计算网格图中的生成树

从维基百科条目的“计算生成树”部分：

> 连通图的生成树数量 t(G) 是一个经过充分研究的不变量。在某些情况下，直接计算 t(G) 很容易。例如，如果 G 本身是一棵树，则 t(G)=1，而如果 G 是具有 n 个顶点的循环图 C_n，则 t(G)=n。对于任何图 G，数字 t(G) 可以使用[基尔霍夫矩阵树定理](http://en.wikipedia.org/wiki/Kirchhoff%27s_theorem)来计算...

## 相关算法

以下是一些与计算网格图中的生成树数量相关的论文或帖子：

*   “[计算网格图中的生成树](http://othello.alma.edu/~molina/papers/pdf%20papers/spantree.pdf)”，Melissa Desjarlais 和 Robert Molina，阿尔玛学院数学与计算机科学系，2012 年 8 月 17 日？（发布日期不确定）
*   “[计算图中生成树的数量 - 一种光谱方法](http://www.cbcb.umd.edu/confcour/CMSC858W-materials/counting_spanning_trees.pdf)”，来自 Univ。马里兰州 CMSC858W 课堂笔记：生物序列分析算法，2010 年 4 月 29 日
*   “[自动生成用于计算固定（但任意！）宽度的网格图（和更一般的生物）的生成树数量的生成函数](http://www.math.rutgers.edu/~zeilberg/mamarim/mamarimhtml/etzim.html)”，作者 Shalosh B. Ekhad 和 Doron Zeilberger

Ekhad 和 Zeilberger 的后者提供了以下内容，其答案与手头的问题相匹配：

> 如果您想查看形式幂级数的显式表达式（作为 z 中的有理函数），其 Maclaurin 展开式中的 zn 系数（相对于 z）将为您提供 m x n 网格图的生成树数（对于 m=2 到 m=6，m 个顶点的路径和长度为 n) 的路径的笛卡尔积，[输入](http://www.math.rutgers.edu/~zeilberg/tokhniot/inKamaEtzim1) 给出[输出](http://www.math.rutgers.edu/~zeilberg/tokhniot/oKamaEtzim1)。

具体来说，请参见[输出](http://www.math.rutgers.edu/~zeilberg/tokhniot/oKamaEtzim1)。

*旁注：如果没有提供的解决方案值表明其他情况，一个有效的解释可能是迷宫的外部结构很重要。在这种情况下，两个或多个具有相同路径的迷宫将不同且截然不同，因为在拐角处进入和退出迷宫可能有 3 个选项，其中左上角将在顶部打开，左上角在左侧打开，或在左侧和顶部都打开，对于拐角出口也类似。如果试图将这些迷宫的可能性表示为一棵树，两个节点可能会在入口处收敛，而不仅仅是从开始到结束发散，并且会有一个或多个额外的节点用于退出可能性。这将增加 C(m,n) 的值。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T21:46:25.957

这里的见解来自问题（强调我的）

> .. 迷宫是一个矩形网格，其墙壁放置在网格单元之间，因此**从左上角的正方形到任何其他正方形只有一条路径**。

如果你想到迷宫的对偶，即一个人可以占据的空间，很明显迷宫必须形成一个图形。也不只是任何图，因为要存在单一路径，该图不能包含任何使其成为[树](http://en.wikipedia.org/wiki/Tree_%28graph_theory%29)的循环。这种对组合问题的简化表明了一种算法。本着 Project Euler 的精神，其余部分留给读者作为练习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T08:02:04.600

前方剧透

我错了，在其中一条评论中说“现在，有一个关于在图中生成树的一般定理，但它似乎没有给出一种计算上可行的方法来计算所寻求的数字”。“一般定理”，即矩阵树定理，归因于 Kirchhoff，并在此处的答案之一中提到，不仅给出了图拉普拉斯算子的非零特征值除以图的阶数的乘积，但也作为拉普拉斯算子的任何辅因子的绝对值，在这种情况下，它是 49999x49999 矩阵的行列式的绝对值。但是，尽管矩阵非常稀疏，但在我看来它仍然遥不可及。

然而，参考

[http://arxiv.org/pdf/0712.0681.pdf](http://arxiv.org/pdf/0712.0681.pdf)

（Luca Guido Molinari 的“块三对角矩阵的行列式”）允许将问题简化为对整数 100x100 密集矩阵的行列式的评估，该矩阵具有非常大的整数作为其条目。

此外，参考

[http://www.ams.org/journals/mcom/1968-22-103/S0025-5718-1968-0226829-0/S0025-5718-1968-0226829-0.pdf](http://www.ams.org/journals/mcom/1968-22-103/S0025-5718-1968-0226829-0/S0025-5718-1968-0226829-0.pdf)

作者：Erwin H. Bareiss（通常只说“Bareiss 算法”，但我使用的递归在参考文献中被称为公式（8），似乎是由于 Charles Dodgson，又名 Lewis Carroll :)） ，然后允许我评估最后一个决定因素，从而获得原始问题的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:38:27.490

我想说找到一个明确的公式是解决欧拉问题的正确方法。它会很快，可以扩展。去吧：）

# sql - 使用正则表达式获取选择字段

> ID：15063416
> 
> 赞同：-1
> 
> 时间：2013-02-25T09:07:15.670
> 
> 标签：sql, regex

我们正在寻找一个返回 SQL-Select 字段名称的正则表达式： **1 fixedValue Custno CustName**（可以用 , ; 等分隔）

```
select 
1, 
'test' as fixedvalue , 
tbl.s_no as custno , 
ltrim(rtrim(isnull(tbl.s_name1, '') + ' ' + isnull(tbl.s_name2, ''))) as custname 
from tbl 
```

提前致谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:16:07.027

看看这是否适合你

```
\w*\s*as\s([a-zA-Z]*) 
```

# c# - 如何创建自定义日历以在单击按钮时仅显示特定月份，而没有周六和周日？

> ID：15063417
> 
> 赞同：1
> 
> 时间：2013-02-25T09:07:15.237
> 
> 标签：c#, asp.net, sql-server, button, calendar

我有一个文本框和一个按钮。**当我在文本框中输入月份和年份（例如：2013 年 4 月）并单击按钮时，应显示该特定月份的自定义日历。**

**注意：日历中没有星期六或星期日。日子只会从星期一到星期五。**

它应该是**使用 C# 的基于 Web 的 ASP.NET 应用程序。**

我怎样才能做这个定制的日历？**提供实现上述功能的示例代码。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T10:58:55.673

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;

public partial class Default2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

  protected void Button1_Click(object sender, EventArgs e)
  {
    string month = txtMonth.Text;// should be in the format of Jan, Feb, Mar, Apr, etc...
    int yearofMonth = Convert.ToInt32(txtYear.Text);
    DateTime dateTime = Convert.ToDateTime("01-" + month + "-" + yearofMonth);
    DataRow dr;
    DataTable dt = new DataTable();
    dt.Columns.Add("Monday");
    dt.Columns.Add("Tuesday");
    dt.Columns.Add("Wednesday");
    dt.Columns.Add("Thursday");
    dt.Columns.Add("Friday");
    dr = dt.NewRow();
    for (int i = 0; i < DateTime.DaysInMonth(dateTime.Year, dateTime.Month); i += 1)
    {
        txtMonth.Text = Convert.ToDateTime(dateTime.AddDays(0)).ToString("dddd");
        if (Convert.ToDateTime(dateTime.AddDays(i)).ToString("dddd") == "Monday")
        {
            dr["Monday"] = i + 1;
        }
        if (dateTime.AddDays(i).ToString("dddd") == "Tuesday")
        {
            dr["Tuesday"] = i + 1;
        }
        if (dateTime.AddDays(i).ToString("dddd") == "Wednesday")
        {
            dr["Wednesday"] = i + 1;

        }
        if (dateTime.AddDays(i).ToString("dddd") == "Thursday")
        {
            dr["Thursday"] = i + 1;
        }
        if (dateTime.AddDays(i).ToString("dddd") == "Friday")
        {
            dr["Friday"] = i + 1;
            dt.Rows.Add(dr);
            dr = dt.NewRow();
            continue;
        }
        if (i == DateTime.DaysInMonth(dateTime.Year, dateTime.Month) - 1)
        {
            dt.Rows.Add(dr);
            dr = dt.NewRow();

        }

    }

    GridView1.DataSource = dt;
    GridView1.DataBind();

  }
} 
```

和

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default2.aspx.cs" Inherits="Default2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:TextBox ID="txtMonth" runat="server">Mon</asp:TextBox>
        <asp:TextBox ID="txtYear" runat="server"></asp:TextBox>
        <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
        <br />
        <br />
        <asp:GridView ID="GridView1" runat="server">
        </asp:GridView>

    </div>
    </form>
</body>
</html> 
```

谢谢...

# unit-testing - 是否有任何带有 BDD 规范的 MVC 示例应用程序可用作参考？

> ID：15063421
> 
> 赞同：1
> 
> 时间：2013-02-25T09:07:25.953
> 
> 标签：unit-testing, bdd

我正在学习 BDD：如何编写有效的测试、测试什么以及留下什么。我也在为 BDD 中“行为”的确切定义而苦苦挣扎。

是否有任何带有 BDD 规范的 MVC 示例应用程序可用作参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:24:08.747

[CodeCampServer 在 NBehave 中](http://codecampserver.codeplex.com/)使用 BDD 风格的“测试”。例如，这是他们的[控制器测试类](http://codecampserver.codeplex.com/SourceControl/changeset/view/4755c1386bff#src/UnitTests/UI/Controllers/AdminControllerTester.cs)之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:29:30.433

BDD 通常特指“Given, When, Then”语法。这是 SpecFlow、NBehave 以及基本上任何支持[Gherkin 语言](https://github.com/cucumber/cucumber/wiki/Gherkin)的框架都提供的风格。那就是，

```
Given the system is in some state.
When I perform some action.
Then the system does x -or- is in some new state. 
```

像 MSpec 这样的工具提供了所谓的“上下文规范”语法。这看起来像

```
(Establish your initial state... not technically a part of the grammar)
When I perform some action
It (the system) should do x -or- be in some state 
```

这种命名/语法论点之前已经由 Scott Bellware 等大人物在[Herding Code 播客](http://herdingcode.com/?p=176)和[各种文章](http://www.code-magazine.com/article.aspx?quickid=0805061&page=1)中提出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:13:32.620

[Steve Sanderson](http://blog.stevensanderson.com/)在示例 ASP.NET MVC 应用程序中使用 SpecFlow撰写[了一篇关于 BDD 的长篇博文。](http://blog.stevensanderson.com/2010/03/03/behavior-driven-development-bdd-with-specflow-and-aspnet-mvc/)

# python - 输入值以进入小部件 tkinter

> ID：15063422
> 
> 赞同：0
> 
> 时间：2013-02-25T09:07:27.043
> 
> 标签：python, tkinter

如何为 tkinter 的条目小部件设置值？

```
Label (text='Directory').grid(row=1,column=0)
E2 = Entry(root, width=20)
E2.grid(row=1,column=1)
# Browse Button
blackbutton = Button(root, text="Browse", fg="black", command=sel_Browse)
blackbutton.grid(row=1,column=2) 
```

在函数中我有目录

```
def sel_Browse():
    global filename
    filename = filedialog.askdirectory() 
```

我的问题是如何将五个文件名显示在 E2 中？

谢谢，布里杰什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:43:14.380

您只需清除小部件的内容并插入新文本：

```
def sel_Browse():
    global filename, E2
    filename = filedialog.askdirectory()
    E2.delete(0, END)
    E2.insert(0, filename) 
```

或者，您也可以[将条目小部件与 a 绑定`StringVar`](http://effbot.org/tkinterbook/entry.htm#patterns)，但我认为出于您的目的，这更简单

# ibm-datapower - 灾难恢复是否开启？

> ID：15063425
> 
> 赞同：0
> 
> 时间：2013-02-25T09:07:38.003
> 
> 标签：ibm-datapower

我在哪里可以检查灾难恢复是否在 XI52 DataPower 设备上打开/关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:20:22.870

`show system`从 CLI使用并检查`backup mode`属性。您也可以使用 WebGUI`Administration->Device->System Settings`

> xi50(config)# 显示系统
> 
> ```
>  product id: 92354BX [Rev 01]
>          OID: 1.3.6.1.4.1.14685.1.3
>       uptime: 105 days 10:39:08
>      contact: contact
>         name: XXXXXXX
>     location: Location
>     services: 72
>  backup mode: secure
> product mode: normal 
> ```

# ios - 使用 AFNetworking 的 PUT 方法

> ID：15063430
> 
> 赞同：0
> 
> 时间：2013-02-25T09:08:04.157
> 
> 标签：ios, networking, afnetworking, nsurlrequest, put

我想用 put 请求实现 afnetworking，但是当我运行它时它总是显示错误。它适用于 post 方法，但是当我将其更改为 PUT 时，它显示错误。

```
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:urls];
    [httpClient defaultValueForHeader:@"Accept"];

    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"345", @"page_id",
                            @"john",@"username",
                            nil];

    NSMutableURLRequest *request = [httpClient requestWithMethod:@"PUT"
                                                            path:@""
                                                      parameters:params];

    //Add your request object to an AFHTTPRequestOperation
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]
initWithRequest:request];

    [httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];

    [operation setCompletionBlockWithSuccess:
     ^(AFHTTPRequestOperation *operation,
       id responseObject) {
         NSString *response = [operation responseString];
         NSLog(@"response: [%@]",response);
     } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
         NSLog(@"error: %@", [operation error]);
     }];

    //call start on your request operation
    [operation start]; 
```

错误说：

错误域 = AFNetworkingErrorDomain 代码 = -1011 “预期状态代码在 (200-299)，得到 404” UserInfo = 0x75a9d40 {NSLocalizedRecoverySuggestion = {“状态”：假，“错误”：“未知方法。”}

# c# - 为什么不允许在 .net 中创建日期时间常量？

> ID：15063431
> 
> 赞同：27
> 
> 时间：2013-02-25T09:08:05.953
> 
> 标签：c#, .net

我想在 .net 中创建一个日期时间常量，但收到错误消息

```
const DateTime dt = Convert.ToDateTime("02/02/2014"); 
```

'System.DateTime' 不能声明为 const。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-25T09:11:55.003

即使您*可以将*a 声明`DateTime`为 const （您不能，正如其他答案所表明的那样），您也必须使用*编译时常*量作为值 - 而且`DateTime.Now`肯定不是编译时常量。

这是有效的：

```
static readonly DateTime dt = DateTime.Now(); 
```

请注意，这将是“无论何时运行该类型的类型初始化程序”。这很少是一个特别有用的值，除非你确保它在启动时被初始化，假设这是你想要测量的......

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-25T09:09:58.760

DateTime 不是 C# 语言中的本机类型 - 它是来自 .Net 库的结构。

在 C# 中，您只能从本地语言类型创建 const，并且只能使用可以在编译时计算的值来初始化它们。DateTime.Now 无法在编译时计算。

（您可以与 const 一起使用的唯一引用类型是字符串，这是因为字符串是经过特殊处理的。）

请参阅[http://msdn.microsoft.com/en-gb/library/e6w8fe1b%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-gb/library/e6w8fe1b%28v=vs.71%29.aspx)

# c# - 使用带有 Json 的 EASYUI 创建数据网格，其中数据类型为布尔值

> ID：15063433
> 
> 赞同：1
> 
> 时间：2013-02-25T09:08:11.783
> 
> 标签：c#, javascript, json, asp.net-mvc-3, jquery-easyui

如何在 Data Grid 中一次显示两个布尔字段？示例：我想在网格的第一行和第二行显示**“真”**和**“假” ？**但 Grid 将由 JSON 加载。

```
<table id="tblDirection"> 
   <thead> 
     <tr> 
        <th field="ck" checkbox="true"></th> 
        <th field="name" width="120">Direction</th> 
      </tr> 
    </thead> 
</table> 
```

这是javascript代码：

```
function RefreshDirection() { 
     $('#tblDirection').empty(); 
     data = [{ id: 0, name: 'Uni Directional' 
}, { id: 1, name: 'Bi Directional'}]; 
data = { "total": "" + data.length + "", "rows": data }; 
$('#tblDirection').datagrid('loadData', data); } 
```

但我想动态地做这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:35:41.403

您可以对复选框字段使用格式化程序，而不是使用 type=checkbox，如下所示，

```
//column defintion in html tags
<th field="checkfieldId" width="80" formatter="formatCheckbox" >

//formatter function
function formatCheckbox(value,row,index)
{
 if(value)
    return "<input type='checkbox' checked=true onChange=checkChecked("+index+",this);>";
 else
    return "<input type='checkbox' onChange=checkChecked("+index+",this);>";
} 
```

# javascript - Javascript“关闭按钮”不起作用

> ID：15063435
> 
> 赞同：0
> 
> 时间：2013-02-25T09:08:24.967
> 
> 标签：javascript, jquery, popup

今天我尝试在javaScript中制作最简单的关闭按钮。不幸的是，它不起作用。这是它的样子：

```
<div id="popup_bg">
<div id="popup_window">
<span id="popup_close">
</span>
</div>
</div> 
```

js代码是：

```
<script type=”text/javascript”&gt;
        $("#popup_close").click(function() {
        $("#popup_bg").fadeOut();
        event.stopPropagation();
        });
</script> 
```

我还想让它适用于任何这些“弹出窗口”，所以我可能会将其更改为类似 $(this).parent().parent().fadeOut(); - 可以这样做吗？

谢谢你们的帮助！:)

@编辑

由于您的解决方案都不起作用，因此我将按字面意思放置我的代码：D 也许您会发现一些使其出错的错误：

```
<?php if(isset(errors['user'])) : ?>    
<script type="text/javascript">
    $(function()
    {
        $("#popup_close").on('click', function() {
        $("#popup_background").fadeOut();
        //event.stopPropagation();
        });
    });
</script>
<div id="popup_background" >
    <div class="popup_window">
        <span class="title">
        error
        </span>
        <span class="message"><?php echo errors['user']; ?>
        </span>
        <span id="popup_close" class="button">OK</span>
    </div>
</div>
<?php endif; ?> 
```

我希望这将帮助您发现任何错误。它显示正确，我单击“确定”跨度，没有任何反应：p 我讨厌 js：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:40:53.610

我看到了你的代码，代码的 jquery 部分正在工作。检查这里：Jsfiddle -> [http://jsfiddle.net/Zahinize/7YD4D/13/](http://jsfiddle.net/Zahinize/7YD4D/13/)

你应该像这样重写你的条件**If**语句，

```
 <? ini_set('error_reporting', E_ALL); ?>

 <script type="text/javascript">
  $(function()
  {
    $("#popup_close").on('click', function() {
    $("#popup_background").fadeOut();
    //event.stopPropagation();
    });
   });
  </script>

 <div id="popup_background" >
  <div class="popup_window">
    <span class="title">
    error
    </span>
    <span class="message">

    <?php 
     if(isset(errors['user'])){      
      echo errors['user']; 
      }
    ?>
     </span>
    <span id="popup_close" class="button">OK</span>
  </div>
</div> 
```

在顶部设置 error_reporting ..

在此处查看更多信息：http: [//php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

也许这会有所帮助，但坦率地说，我还没有看到像这样的错误处理： **error['user']**任何地方......你应该看到错误处理以编写更好的代码;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:10:36.470

ID 必须是唯一的，您应该使用类来代替：

```
<div class="popup_bg">
   <div class="popup_window">
      <span class="popup_close"></span>
   </div>
</div> 
```

然后为了选择被点击元素的目标父元素，你可以使用`closest`方法：

```
$(function() { 
    $(".popup_close").click(function(event) {
       $(this).closest(".popup_bg").fadeOut();
       // event.stopPropagation();
    });
}); 
```

请注意，在您的代码`event`中，`undefined`您应该将事件对象传递给您的处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T09:12:07.213

添加`document.ready`和/或使用`.on`功能

```
<script type=”text/javascript”&gt;
    $(function(){
        $("#popup_close").on('click', function() {
            $("#popup_bg").fadeOut();
            event.stopPropagation();
        });
    });
</script> 
```

此外，ID 可能不会在您的文档中重复，请使用其他选择器，例如类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T09:12:32.093

如果有多个弹出窗口，最好使用 class 而不是 id。

**例子。**

```
$(function()
{
    $(".popup_close").on('click',(function()
    {
        $(this).parents("div.popup_bg").fadeOut();
    });
}); 
```

和**html**

```
<div class = "popup_bg">
    <div class = "popup_window">
        <span class = "popup_close"></span>
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T09:17:16.650

您需要一些内容在您的跨度或设置高度和与。然后你就可以点击它，它就会工作。`parent().parent()`如果您更改 div 结构，请避免使用可能会破坏的技巧。正如其他人所说，如果您打算重用代码，请使用准备好的 jquery 文档（阅读教程）并使用类而不是 ids（阅读 CSS 教程）......

# java - 关于'new'关键字的Java内存问题

> ID：15063440
> 
> 赞同：8
> 
> 时间：2013-02-25T09:08:35.810
> 
> 标签：java, memory, heap-memory, stack-memory

如果您运行以下代码会发生什么..

```
while (true) {
    String x = new String("ABC");
} 
```

在内存方面？

String x 是分配在栈上还是堆上？程序最终会因为内存溢出而崩溃，还是垃圾收集会阻止这种情况？new 关键字是否总是在堆上创建对象？什么时候在堆栈上创建对象？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T09:14:52.203

> String x 是分配在栈上还是堆上？

`x`不是一个`String`。它是对 a 的引用`String`。引用是一个局部变量，所以在堆栈上。是`String`一个对象，所以在堆上。

> 程序最终会因为内存溢出而崩溃吗

可能不是。

> 还是垃圾收集会阻止这种情况？

它应该。

> new 关键字是否总是在堆上创建对象？

是的。

> 什么时候在堆栈上创建对象？

从不……除非 JVM 决定它不能逃脱当前范围并因此决定这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:12:16.530

是的，使用 new 将对象放在堆上。任何线程都不能再访问的对象可以被垃圾回收。是否内存不足取决于程序使用的数据大小，如果您擅长“释放”不再需要的对象（想想：内存泄漏是不好的）。

在您的示例中，您将疯狂地运行垃圾收集器，我认为这就是您要演示的内容。

局部变量进入堆栈。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T09:13:25.340

理论上，在堆上创建`new`，非对象（即`int`s、`char`s等）在栈上创建。唯一的例外 afaik 是在堆栈上创建的字符串。在实践中，许多现代 JVM 的 JIT 编译器会发现，在某些情况下，`new`可以在堆栈上创建使用创建的对象（例如，在当前函数之外未引用的本地对象）。

垃圾收集器将为您处理释放，这就是它的目的，但是如果您同时创建并保留太多对象的引用，当然您可能会耗尽内存（尝试创建一个包含十亿个字符串的列表，例如例子）。

# listview - 制作菜单栏时的 ExpandableListView 问题（与 facebook 类似）

> ID：15063442
> 
> 赞同：1
> 
> 时间：2013-02-25T09:08:50.397
> 
> 标签：listview, expandable

```
// class that defines events on clicking menu button
class NaviClickListener implements OnClickListener {
    @Override
    public void onClick(View v) {
        MainFrame me = MainFrame.this;
        Context context = me;
        Animation anim;

        if(isMenuOpened){
            Log.d("On NAVICLICKLISTENER CALLED", "true");
        }else{
            Log.d("On NAVICLICKLISTENER CALLED", "false");
        }

        int w = parentLinearLayout.getMeasuredWidth();
        int h = parentLinearLayout.getMeasuredHeight();
        int left = (int) (parentLinearLayout.getMeasuredWidth() * 0.55);

        if (!isMenuOpened) {
            // anim = AnimationUtils.loadAnimation(context, R.anim.push_right_out_80);
            anim = new TranslateAnimation(0, left, 0, 0);
            mainNaviLayout.setVisibility(View.VISIBLE);
            animParams.init(left, 0, left + w, h);

        } else {
            // anim = AnimationUtils.loadAnimation(context, R.anim.push_left_in_80);
            anim = new TranslateAnimation(0, -left, 0, 0);
            animParams.init(0, 0, w, h);
        }
        anim.setDuration(400);
        anim.setAnimationListener(me);
        //Tell the animation to stay as it ended (we are going to set the app.layout 
     first than remove this property)
        anim.setFillAfter(false);

        // Only use fillEnabled and fillAfter if we don't call layout ourselves.
        // We need to do the layout ourselves and not use fillEnabled and fillAfter 
  because when the anim is finished
        // although the View appears to have moved, it is actually just a drawing effect and the View hasn't moved.
        // Therefore clicking on the screen where the button appears does not work, but clicking where the View *was* does
        // work.
        // anim.setFillEnabled(true);
        // anim.setFillAfter(true);

        parentLinearLayout.startAnimation(anim);
    }
    }
  ///////////////

//about animation methods
 void layoutApp(boolean menuOut) {
        parentLinearLayout.layout(animParams.left, animParams.top,     
    animParams.right, animParams.bottom);
        //Now that we've set the app.layout property we can clear the animation, 
   flicker avoided :)
        parentLinearLayout.clearAnimation();

  }
@Override
public void onAnimationEnd(Animation animation) {
    // TODO Auto-generated method stub
    Log.d("On ANIMATIONEND CALLED", "ASDFASDFASDF");
    isMenuOpened = !isMenuOpened;
    if (!isMenuOpened) {
        mainNaviLayout.setVisibility(View.INVISIBLE);
    }
    layoutApp(isMenuOpened);
}
@Override
public void onAnimationRepeat(Animation animation) {
    Log.d("On ANIMATION repeat CALLED", "ASDFASDFASDF");
    // TODO Auto-generated method stub

}
@Override
public void onAnimationStart(Animation animation) {
    // TODO Auto-generated method stub

    Log.d("On ANIMATION start CALLED", "ASDFASDFASDF");
}
static class AnimParams {
    int left, right, top, bottom;

    void init(int left, int top, int right, int bottom) {
        this.left = left;
        this.top = top;
        this.right = right;
        this.bottom = bottom;
      }
  } 
```

////////////////////////////////////// HI，我有一个问题制作菜单栏。

它的工作原理类似于 Facebook 菜单栏-

（当我按下按钮时，会出现包含可扩展列表视图的菜单，并且主布局移动到页面的右侧）。

问题是，当我单击列表视图以展开父行（查看子行）时，

菜单消失，主布局回到主侧。

我试图弄清楚，当我使用 expandGroup() 方法强制扩展父行时，

它再次发生。

我想解决它，但我不能自己解决。请帮帮我~（对不起我的英语不好）

-> 我是通过使用 AnimationListener 实现的。

# c# - C# Selenium 或 WebBrowser 替代模仿人类

> ID：15063448
> 
> 赞同：5
> 
> 时间：2013-02-25T09:09:17.600
> 
> 标签：c#, .net, selenium-webdriver

大家好，我前段时间使用 Selenium 创建了一个程序来在我喜欢使用的网站上执行自动化操作。

我设法使用 Selenium 来做我以前想做的事，没有太多麻烦，唯一的问题是在后台使用它。

如果它不影响我在 PC 上做的其他事情，我就无法使用它，我确实想过使用虚拟机，但我想尽量避免这种情况。

昨晚我在玩 C# 中的 WebBrowser 类，它很好但有限，我喜欢它是如何在 Windows 窗体应用程序中自包含的，所以这就是我要找的。

剂量任何人都知道在 Windows 窗体应用程序中集成浏览器的视觉表示的最佳方式，但仍然允许我模仿键输入等，但会在后台运行。

我听说过 WaitN、GekoFX、MozNet 等，但从我所读到的内容中，我不确定这些是否可行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T16:53:57.293

通常，当您尝试使用浏览器自动化网页时，您有两种选择来模拟用户事件。您可以通过 JavaScript 模拟它们，也可以使用操作系统级别的机制（所谓的“本机事件”）来模拟鼠标和键盘事件。这两种方法都有其缺陷。

仅使用 JavaScript 模拟事件可能会允许自动窗口保持在后台，无需系统焦点，同时执行您想要的任务。Selenium RC 使用了这种方法，而 Selenium WebDriver 提供了为 Firefox 和 IE 使用模拟事件的能力。但是，这种方法有一些缺点。模拟事件可能缺乏您需要的保真度和准确性。例如，通过 CSS 伪选择器工作的页面上的“下拉菜单”`:hover`无法通过 JavaScript 触发，因此这种方法在这些情况下注定会失败。此外，由于您使用的是 JavaScript，因此您被限制在 JavaScript 沙箱中，这意味着跨域框架等可能会严格超出范围。

另一方面，本机事件更能代表用户的实际鼠标和键盘操作。一般来说，它们会允许正确的事件以正确的顺序在网页上触发，而无需您猜测在哪些元素上触发哪些事件。使用它们的缺点是要正确实现它们，被自动化的窗口**必须**具有系统焦点才能正确接收事件。如果你在 Windows 上，你可以尝试使用`SendMessage`API 解决这个问题，但这是[错误的做法](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/30/423202.aspx)，因为它容易出错并且绝对不能保证工作。使用原生事件的正确方法是使用[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)API，但该 API 将输入发送到具有系统焦点的窗口。WebDriver 默认使用本地事件来模拟用户输入，但它默认使用有缺陷的`SendMessage`方法。至少对于 IE，它确实提供了使用更正确`SendInput`方法的选项。

如果您不希望在前台使用浏览器窗口，那么您真的应该考虑使用无头选项。[PhantomJS](http://phantomjs.org/)是一个很好的选择，WebDriver 也有一个驱动程序，这意味着你仍然可以用 C# 编写你的自动化代码。否则，您只能使用上述其他方法之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:21:51.777

应用程序是否需要托管在窗口中？

我已经使用 selenium，W​​atin 进行自动化，不幸的是它们确实干扰了你正在做的事情，我还没有设法解决这个问题。

我也使用过 .Net`WebBrowser`类，但是对于在其中运行的 JavaScript 而言，如果不测试它是否是一个功能齐全的 IE，我就不确定它是否是一个功能齐全的 IE。我认为它确实会执行 JavaScript，但您需要检查一下。

如果您不需要查看正在发生的事情，那么也有可用的无头选项，即使对于 Selenium，我认为： [是否可以在 Selenium RC 中隐藏浏览器？](https://stackoverflow.com/questions/1418082/selenium-can-i-hide-the-browser)

如果这对您可行，以下是无头版本的列表：

[https://gist.github.com/evandrix/3694955](https://gist.github.com/evandrix/3694955)

# scala - 是否可以实例化一个类的实例，作为参数传递给 Scala 中的泛型特征？

> ID：15063451
> 
> 赞同：1
> 
> 时间：2013-02-25T09:09:25.383
> 
> 标签：scala, reflection, traits, scala-2.10

我有以下代码，用 Scala 2.10.0 编写：

```
trait A[T <: B] {
  self : { def foo() } =>

  val action : ()=>Unit = this.foo _
  //wanna make default for this
  val construction : String=>T

  def bar()(implicit x : String) : T = {
    action()
    val destination = construction(x)
    destination.baz()
    destination
  }
}

trait B { def baz() {} }

class Xlass { def foo() {} }

class Klass(a : String)(implicit val x : String) extends B {
    val f = new Xlass with A[Klass] {
        //boilerplate!
        val construction = new Klass(_)
    }
}

implicit val x = "Something"
val destination = new Klass("some a").f.bar() 
```

我想知道，是否可以为 设置默认值`construction`，例如`val construction = new T(_)`？我现在已经尝试了几个选项，但它们都不能与这段代码的所有特性一起工作，例如使用类型边界、隐式和结构类型。据我所知，这是这样的，但它失败了`scala.ScalaReflectionException: free type T is not a class`：

```
import reflect.runtime.universe._
val tT = weakTypeTag[T]
...
val privConstruction = 
  x : String => 
    runtimeMirror(tT.mirror.getClass.getClassLoader)
    //fails here with scala.ScalaReflectionException: free type T is not a class 
    .reflectClass(tT.tpe.typeSymbol.asClass) 
    .reflectConstructor(tT.tpe.members.head.asMethod)(x).asInstanceOf[T] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T11:23:12.090

所以，最后，我做到了：

```
trait A[T <: B] {
  self : { def foo() } =>

  val action : ()=>Unit = this.foo _
  def construction(x: String)(implicit tag : reflect.ClassTag[T]) : T = {
    tag.runtimeClass.getConstructor(classOf[String], classOf[String]).newInstance(x, x).asInstanceOf[T]
  }

  def bar()(implicit x : String, tag : reflect.ClassTag[T]) : T = {
    action()
    val destination = construction(x)
    destination.baz()
    destination
  }
}

trait B { def baz() {} }

class Xlass { def foo() {} }

class Klass(a : String)(implicit val x : String) extends B {
    val f = new Xlass with A[Klass]
}

implicit val x = "Something"
val destination = new Klass("some a").f.bar() 
```

# bash - 获取实际提示长度

> ID：15063455
> 
> 赞同：4
> 
> 时间：2013-02-25T09:09:33.843
> 
> 标签：bash, prompt, ps1

我想在我的 gnome 终端上打印这样的东西

```
[abc@host pwd]$ ************************************************************ 
```

在 PS1 中使用了一些操作，但星星的数量是动态的，取决于 PS1 和终端宽度。所以任何人都可以建议我找出 PS1 长度的方法，即将显示的实际字符串。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-02-25T09:20:12.217

它不能便携地完成 IMO，因为它`PS1`可以包含颜色代码的转义序列，也可以包含（多个）新行。

是可以计算的。但这是一项非常艰巨的任务。如果用户在变量名称中编码颜色代码（这是一种常见情况），如何决定（在评估/计算长度期间）这是用户想要显示的内容还是只是样式信息？

# c# - 创建文件的安全问题是什么

> ID：15063459
> 
> 赞同：0
> 
> 时间：2013-02-25T09:09:41.917
> 
> 标签：c#, asp.net

我在一条路径上为我的应用程序写日志：-

> “C:\Folder1\Folder2\Myfile.txt”（可配置）

如果此文件不存在，我将在我的代码中创建文件夹结构和文件（如果没有 C 驱动器，我会弹出一条消息说日志目录不存在）。

在代码审查中，一位同事说我不应该使用代码创建文件夹和文件，而应该要求客户端创建文件并且只对该文件执行写操作。

他说这有安全问题，但不确定是什么，所以我想把它贴在这里。

请帮助我决定是否应该创建文件（如果不存在）或要求客户端在每次安装时创建。

第一种方法的安全隐患是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:23:19.630

是的，可能有问题。您的程序很可能在交互式用户帐户下运行，因此受制于对其施加的任何 UAC 条件。

如果这只是一个日志文件，一种方法是使用临时文件，因此使用：

[http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)

这应该在允许写入文件的登录用户的本地区域中创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:37:47.707

我看到的安全问题是您的 Web 应用程序能够访问和写入目录中的文件（可配置，如您所述）。

通过检查授予您的应用程序池运行的帐户的权限来验证访问权限

或通过代码[看到这个](https://stackoverflow.com/questions/3456397/checking-file-folder-access-permission)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:23:52.277

没有代码本质上是不安全的。这一切都取决于其余代码的外观，但作为一般经验法则，您应该限制应用程序可以访问哪些文件以及如何访问它们。尽可能限制这一点，而不会损坏您的应用程序功能。

可能由此产生的安全漏洞允许用户读取他不应该读取的文件，或写入重要文件并以这种方式损坏它。例如，如果使用用户输入创建文件路径，则用户可以修改路径以便他访问不允许访问的文件。如果您创建这样的路径：

```
string filePath = "c:\\mysafefolder\\" + fileName; 
```

并且用户输入一个相对路径，例如`..\Windows\Passwords.txt`他将有效地访问`c:\windows\passwords.txt`.

如果您将应用程序配置为阻止访问除 之外的文件系统的任何部分，`mysafefolder`则读取机密文件的尝试将失败。

这只是可能发生的情况的一个示例，以及为什么限制您的应用程序权限是一个好主意。此时您的代码可能非常安全，但限制权限是提前考虑的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T09:19:26.517

写入问题是尝试在`C`根文件夹中创建的用户可能没有在那里创建它的权限。永远不要假设用户总是管理员。

这也是 Windows 的 UAC 的问题，这将是一个问题。

# c++ - 为什么启动项目不执行依赖项目

> ID：15063460
> 
> 赞同：0
> 
> 时间：2013-02-25T09:09:43.547
> 
> 标签：c++, visual-studio-2010, static-libraries

我创建了一个新的 C++ 解决方案 (Test.sln) 来获取`static lib`我需要的文件`add in my main solution (Main.sln)`。我已经添加`Test.lib`了`debug folder`. `Main.sln`提供所有路径 ( `like include and .lib`)。但是在构建/运行项目时`Main.sln`不是在构建/执行`Test.sln or Test.lib`。

请帮助我哪里出错了？我正在使用`visual studio 2010`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:12:20.913

创建一个包含两个项目（“主”项目和“测试”项目）的单一解决方案。使“主”项目依赖于“测试”项目。当您构建“主”项目时，“测试”项目将自动构建。

将“main”项目的项目属性设置为与“test”项目中的库链接，无需复制文件。

# webdriver - 如何为数据提供者 @Test 方法创建 WebDriver 实例

> ID：15063461
> 
> 赞同：0
> 
> 时间：2013-02-25T09:09:48.270
> 
> 标签：webdriver, testng

我在 @Test(dataprovider .. 方法中运行浏览器实例。但我无法将驱动程序实例传递给 Test 方法，

这是我的代码，在最后一条语句中我得到一个空点异常。

我的问题是，如何将驱动程序实例传递给测试方法

```
@Test (dataProviderClass=GetData.class)

public class createUserPageTest {

private WebDriver driver;
private String baseUrl;
private StringBuffer verificationErrors = new StringBuffer();
private MailCode openMail;

@BeforeMethod
public void setUp() throws Exception {
driver = new FirefoxDriver();
baseUrl = “http://demo.mysite.com”;
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
driver.get(baseUrl + “/pageLink/Home.action”);
}
@Test(dataProvider=”RegisterUserStage1″)
public void NewUsrStage1(String name,String email,String password)
{
CreateUserPage createuser = PageFactory.initElements(driver, CreateUserPage.class);
createuser.CreateUserStage1(driver,name,email,password);
try {
openMail.testValidateEmail(driver);
——-
——- 
```

显示的错误信息是

```
java.lang.NullPointerException
    at demoname.org.createUserPageTest.NewUsrStage1(createUserPageTest.java:38)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
    at org.testng.TestNG.run(TestNG.java:1036)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175) 
```

我的 DataProvider 名称如下

```
@DataProvider(name="RegisterUserStage1")
    public static Object[][] getTestData() throws Exception
    {
        Object retObject[][]=getTableArray("src\\resource\\TestData.xls", 0, "NewUserStage1");
        return retObject;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:06:22.573

那里有多个代码问题。正如 AJ 正确指出初始化的对象。

# ios - UITableViewCell 内的 UIScrollView - 没有 didSelect 调用

> ID：15063464
> 
> 赞同：5
> 
> 时间：2013-02-25T09:09:54.770
> 
> 标签：ios, objective-c, uikit

我有一个`tableviewCell`，用户可以在其中`scroll`水平。由于几乎`scrollView`涵盖了整个内容`cell`，因此如果用户单击.`tableView``didSelectRow``cell`

所以我想，我可以将触摸事件传递`UIScrollView`给`cell`，但仍然`didSelectRow`没有被调用。`UIScrollView`如果触摸不是拖动，我将子类化为仅传递触摸事件：

```
- (void) touchesEnded: (NSSet *) touches withEvent: (UIEvent *) event
{
    NSLog(@"touch scroll");
    // If not dragging, send event to next responder
    if (!self.dragging)
        [self.superview touchesEnded: touches withEvent:event];
    else
        [super touchesEnded: touches withEvent: event];
} 
```

关于如何将点击传递给表格、调用委托方法并将滚动保持在`scrollview`?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-01-08T23:12:34.223

您实际上可以在没有子类化的情况下做到这一点`UIScrollView`。无论您有自定义单元格，还是在 中设置属性`cellForRowAtIndexPath`，`UITableView`您都可以执行以下操作：

```
[cell.contentView addSubview:yourScrollView];
yourScrollView.userInteractionEnabled = NO;
[cell.contentView addGestureRecognizer:yourScrollView.panGestureRecognizer]; 
```

您可以这样做的原因是因为 scrollView 有自己的 panGestureRecognizer 可供程序员访问。因此，只需将其添加到单元格的视图中就会触发滚动视图的手势委托。

这种方法的唯一缺点是滚动视图的子视图无法接收任何触摸输入。如果你需要这个，你将不得不选择不同的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T14:59:35.517

我刚刚遇到了同样的问题。
在您的子类中确保包含完整的方法集：

```
-(void) touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    if (!self.dragging)
        [self.superview touchesCancelled: touches withEvent:event];
    else
        [super touchesCancelled: touches withEvent: event];
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    if (!self.dragging)
        [self.superview touchesMoved: touches withEvent:event];
    else
        [super touchesMoved: touches withEvent: event];
}

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    if (!self.dragging)
        [self.superview touchesBegan: touches withEvent:event];
    else
        [super touchesBegan: touches withEvent: event];
}

-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    if (!self.dragging)
        [self.superview touchesEnded: touches withEvent:event];
    else
        [super touchesEnded: touches withEvent: event];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-05T06:13:14.710

选择的答案是正确的，但我根据我得到的错误更新了代码。

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    if (self.dragging) {
        [super touchesMoved:touches withEvent:event];
    } else {
        if ([self.delegate isKindOfClass:[UITableViewCell class]]) {
            [(UITableViewCell *)self.delegate touchesCancelled:touches withEvent:event];
        }

        [self.superview touchesMoved:touches withEvent:event];
    }
} 
```

如果您`self.delegate`不是`UITableViewCell`，则将该属性替换为您的单元格的属性。

单元格需要在移动过程中检索取消触摸事件，以防止出现不希望的结果。它可以很容易地重现如下。

*   突出显示单元格（假设滚动视图在整个单元格上，如果不突出显示滚动视图）
*   当单元格突出显示时，拖动表格视图
*   选择任何其他单元格，现在之前突出显示的单元格将检索`didSelectCell`状态

还有一点要提的是顺序很重要！如果在`self.delegate`之前没有调用，`self.superview`则突出显示的状态不会发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-24T08:39:52.933

**斯威夫特 3**

```
scrollView.isUserInteractionEnabled = false
contentView.addGestureRecognizer(scrollView.panGestureRecognizer) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-25T09:16:47.857

尝试设置这个

```
_scrollView.canCancelContentTouches = NO 
```

此外，部分转发触摸事件也很糟糕

# android - NfcV - 如何获取历史字节，就像在 NfcA 中一样？

> ID：15063472
> 
> 赞同：1
> 
> 时间：2013-02-25T09:10:12.110
> 
> 标签：android, nfc, rfid, iso-15693

在`NfcA`标准中有一个`android.nfc.tech.IsoDep`类。它有一个方法叫做：`getHistoricalBytes()`. 如何在`NfcV`标准中获得此功能？`IsoDep`类在这里不起作用。有任何想法吗？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:20:05.930

NfcV (ISO15693) 技术没有 HistoricalBytes 之类的东西。HistoricalBytes 仅存在于 NfcA (ISO14443-A) 标准中。

您可以从 NfcV 标签中读取的唯一静态内容是 UID 和 DSF-ID（数据结构格式标识符，通常不使用）。您可以通过将标签对象转换为 NfcV 对象来获取它，然后调用 getDsfID()

[http://developer.android.com/reference/android/nfc/tech/NfcV.html](http://developer.android.com/reference/android/nfc/tech/NfcV.html)

# android - AutoCompleteTextView 和建议之间的宽度不同

> ID：15063475
> 
> 赞同：2
> 
> 时间：2013-02-25T09:10:19.473
> 
> 标签：android, autocompletetextview

我的应用中有一个`AutoCompleteTextView`项目`layout`。我想在 中为它保留一个很小的空间`layout`，以便用户可以触摸它并开始书写。相反，我希望弹出的建议单词列表更宽，例如整个屏幕。实际上，弹出的单词列表与`textView`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:15:08.173

我找到了一个简单的解决方案。属性`android:dropDownWidth`。例如，我可以设置`android:dropDownWidth="match_parent"`. 请原谅我发布一个问题，然后立即找到答案。

# c# - 桌面用户控制与 Web 用户控制

> ID：15063483
> 
> 赞同：0
> 
> 时间：2013-02-25T09:10:44.590
> 
> 标签：c#, user-controls, webusercontrol

我已经制作了一个可以在桌面应用程序中正常工作的用户控件，但现在我也想在 Web 应用程序中使用它。我使用 C# 作为编程语言。有人可以建议我怎么做吗？任何形式的帮助都非常感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:16:49.123

请看下面的链接，它显示了如何在 aspx 页面中添加 windows 窗体控件。 [http://weblogs.asp.net/spano/archive/2007/09/19/hosting-a-windows-form-control-in-a-web-page.aspx](http://weblogs.asp.net/spano/archive/2007/09/19/hosting-a-windows-form-control-in-a-web-page.aspx)

您还可以看到：[http ://www.beansoftware.com/ASP.NET-Tutorials/Place-Windows-Control-To-Web-Form.aspx](http://www.beansoftware.com/ASP.NET-Tutorials/Place-Windows-Control-To-Web-Form.aspx)

# asp.net - wsdl 肥皂异常

> ID：15063487
> 
> 赞同：1
> 
> 时间：2013-02-25T09:10:52.527
> 
> 标签：asp.net, web-services, soap

遇到肥皂异常问题。我在 asp.net Web 服务中抛出了肥皂异常，并且必须以某种方式让该异常（以 xml 的形式）显示在浏览器中，如下所示：

```
SOAP 1.1
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<soap:Fault><faultcode>soap:Client</faultcode>
<faultstring></faultstring>
<detail>
<Error>
<ErrorNumber>1</ErrorNumber>
<ErrorMessage>Error...</ErrorMessage>
</Error>
</detail>
</soap:Fault>
</soap:Body>
</soap:Envelope> 
```

从 Web 服务抛出异常：

```
XmlDocument doc = new XmlDocument();
XmlNode detailNode = doc.CreateNode(XmlNodeType.Element, SoapException.DetailElementName.Name, SoapException.DetailElementName.Namespace);
XmlElement details = doc.CreateElement("Error");

XmlElement detailchild1 = doc.CreateElement("ErrorNumber");
detailchild1.InnerText = "1";
XmlElement detailchild2 = doc.CreateElement("ErrorMessage");
detailchild2.InnerText = "Error...";
details.AppendChild(detailchild1);
details.AppendChild(detailchild2);

detailNode.AppendChild(details);

throw new SoapException("Fault", SoapException.ClientFaultCode, "", details); 
```

如果我使用调用该服务的 Windows 应用程序对其进行测试，我可以捕获异常并提取所有详细信息，因此似乎一切都适用于创建 xml 并引发异常。但我从浏览器得到的只是内部错误 500，这是根据我发现正常行为的其他答案。我可以通过更改 web.config、IIS 设置以某种方式在浏览器中获取该 xml 而不是内部错误 500...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:47:51.503

这不应该

```
throw new SoapException("Fault", SoapException.ClientFaultCode, "", details); 
```

是

```
throw new SoapException("Fault", SoapException.ClientFaultCode, "", detailNode); 
```

?

# iphone - 在重大位置更改时重新加载/刷新视图控制器（来自 App Delegate）

> ID：15063489
> 
> 赞同：2
> 
> 时间：2013-02-25T09:10:53.953
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试使用更改的重要位置来刷新我的视图。位置管理器在我的应用程序委托中，我正在尝试使用 NSNotificationCenter 告诉视图控制器在用户更改位置时刷新。我不确定如何刷新以刷新视图。我目前将其设置如下。我做了一个“视图控制器（刷新视图）”块，我认为刷新的代码会发生。任何人都知道如何使这项工作？谢谢！

**App Delegate（监听重要的位置变化）：**

```
- (void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation  
*)newLocation fromLocation:(CLLocation *)oldLocation {

[[NSNotificationCenter defaultCenter] postNotificationName:@"refreshView" object:nil];

} 
```

**视图控制器（监听 NSNotificationCenter）：**

```
- (void)viewDidLoad {

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(refreshView:) 
name:@"refreshView" object:nil];

} 
```

**视图控制器（刷新视图）：**

```
-(void)refreshView:(NSNotification *) notification {

//CODE TO REFRESH THE VIEW HERE

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T09:15:01.063

```
-(void)refreshView:(NSNotification *) notification {

[self viewDidLoad];
[self viewWillAppear]; // If viewWillAppear also contains code

} 
```

# python - SURF 未绑定在 opencv-python 中？

> ID：15063490
> 
> 赞同：1
> 
> 时间：2013-02-25T09:10:55.327
> 
> 标签：python, opencv, surf

尝试使用 cv.ExtractSURF 时出现此错误：

> cv2.error: OpenCV 是在没有 SURF 支持的情况下构建的

我在这个主题中找到了 c++ 的解决方案：

[OpenCV SURF 功能未实现](https://stackoverflow.com/questions/11175794/opencv-surf-function-is-not-implemented)

但是我如何在 python 中使用它？

* * *

- -编辑 - -

* * *

当我尝试运行使用 cv2.SURF(800) 的示例 find_obj.py 时，出现以下错误：

```
AttributeError: 'module' object has no attribute 'SURF' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:51:19.850

好的，这是因为我使用 Fedora 18（并且我使用 yum 安装了它）： http://forums.fedoraforum.org/showthread.php?t= [287847](http://forums.fedoraforum.org/showthread.php?t=287847)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:22:17.140

似乎某些功能已移至“非自由”模块，并且该模块已从 FC18 上的最新 OpenCV 包中删除。在解决这个问题之前，我将我的 64 位 FC18 上的 OpenCV 库从 2.4.3 版降级到 2.3.1 版。使用降级的库，我所有的 python 代码都开始像在 FC17 上一样工作。这是我的帖子的链接，我在其中描述了完整的“降级”程序：

[http://www.redips.net/linux/downgrade-opencv-fedora18/](http://www.redips.net/linux/downgrade-opencv-fedora18/)

# image - 将内容类型更改为 image/png - cakephp

> ID：15063491
> 
> 赞同：1
> 
> 时间：2013-02-25T09:10:58.710
> 
> 标签：image, cakephp, content-type

我有一个 cakephp 应用程序。我知道我的应用程序使用 default.ctp 作为其布局。在默认布局中，我的标题设置为 html/text。我想将标题类型更改为 image/png。我应该在哪里更改它？请有人帮助我

代码：

```
$this->layout=NULL; 
$this->autoRender=false; 
$this->RequestHandler->respondAs('image/jpg');

      View Coding :(index.ctp)
           <?php 
           session_start(); 
           $text = rand(10000,99999); 
           $_SESSION["vercode"] = $text; 
           $height = 25; 
           $width = 65; 

           $image_p = imagecreate($width, $height); 
           $black = imagecolorallocate($image_p, 0, 0, 0); 
            $white = imagecolorallocate($image_p, 255, 255, 255); 
            $font_size = 14; 
            imagestring($image_p, $font_size, 5, 5, $text, $white); 
            imagejpeg($image_p, null, 80); 
                  ?>
           Controller coding :

                public function index() 
                {
                      $this->layout=false;
                      $this->response->type('png');
                } 
```

注意：CakePHP 版本 2.3.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-29T05:40:24.867

## 使用 CakePHP 3

您应该始终尝试使用 CakePHP 的方式，而不是使用 PHP 的 header() 函数手动设置标题。在这种情况下，文档不是很清楚。我必须弄清楚。

这就是我使用 CakePHP 3.3 使其工作的方式：

*   首先，将图像的内容放入一个变量中，因为我们希望 CakePHP 渲染该内容，而不仅仅是输出和死亡。

*   然后销毁图像资源以释放内存。

*   **可选：**您可以设置缓存标头。（在下面的代码中注释）

*   将响应对象类型设置为“jpg”或“png”等。[参见文档](http://book.cakephp.org/3.0/en/controllers/request-response.html#dealing-with-content-types)

*   将布局设置为：“ *false* ”

*   将图像输出到响应正文并将 autoRender 设置为 false 以避免创建不必要的模板文件 (.ctp)。

```
// Controller method
public function image($id = null) {
    // Create an image resource: $image ...
    ob_start();
    imagejpeg($image);
    $buffer = ob_get_clean();
    imagedestroy($image);

    // $this->response->cache('-1 minute', '+1 days');
    $this->response->type('jpg');
    $this->viewBuilder()->layout(false);
    $this->response->body($buffer);
    $this->autoRender = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:06:13.867

如果您真的必须将视图/布局的内容作为图像返回（我非常怀疑）：

```
$this->response->type('png'); // as documented in the 2.x docs 
```

将自动设置`image/png`为标头的响应类型。

如果您需要在没有布局的情况下渲染视图，请尝试

```
$this->layout = false;
// OR
$this->render('my_view', false); // false should not render a layout 
```

您不能使用“null”，因为它呈现默认布局。

无论哪种方式，永远不要在你的视图中调用 header() 东西，总是通过响应对象在你的控制器中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-29T18:25:34.650

（是的，旧线程，但我刚刚遇到了这个问题。）

```
$this->autoRender = false;
header('Content-Type: image/png'); 
```

控制器的方法对我有用。

# scala - Tomcat 7 中的 Scala - HttpServletRequest.getHeaderNames 返回 java.util.Collection 而不是枚举？

> ID：15063497
> 
> 赞同：2
> 
> 时间：2013-02-25T09:11:31.083
> 
> 标签：scala, tomcat7, scala-collections

在 Tomcat 7 中使用 Scala 时，HttpServletRequest.getHeaderNames() 显然返回 java.util.Collection 而不是 java.util.Enumeration，如[docs 中所示](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getHeaderNames%28%29)。

这里是否发生了一些隐式转换？

更具体地说，以下 servlet：

```
import java.io._
import javax.servlet._
import javax.servlet.http._

class TomcatScalaExample extends HttpServlet {
    override def doGet (req: HttpServletRequest, res: HttpServletResponse): Unit = {
        val out = res.getWriter()
        out.println(res.getHeaderNames.getClass.getCanonicalName)
        out.close()
    }
} 
```

在浏览器中打印以下内容：

```
java.util.ArrayList 
```

虽然我希望有一些与 java.util.Enumeration 相关的东西。

作为参考，下面是使用 -Xprint:typer 编译的代码：

```
 [scalac] package pl.kamituel.tomcatscalaexample {
   [scalac]   import java.io._;
   [scalac]   import javax.servlet._;
   [scalac]   import javax.servlet.http._;
   [scalac]   class TomcatScalaExample extends javax.servlet.http.HttpServlet {
   [scalac]     def <init>(): pl.kamituel.tomcatscalaexample.TomcatScalaExample = {
   [scalac]       TomcatScalaExample.super.<init>();
   [scalac]       ()
   [scalac]     };
   [scalac]     override def doGet(req: javax.servlet.http.HttpServletRequest, res:     javax.servlet.http.HttpServletResponse): Unit = {
   [scalac]       val out: java.io.PrintWriter = res.getWriter();
   [scalac]       out.println(res.getHeaderNames().getClass().getCanonicalName());
   [scalac]       out.close()
   [scalac]     }
   [scalac]   }
   [scalac] }
   [scalac] 
```

# javascript - 如何添加 preventDefault() 主干.js

> ID：15063498
> 
> 赞同：3
> 
> 时间：2013-02-25T09:11:40.593
> 
> 标签：javascript, backbone.js

如何将 preventDefault() 添加到`<button>`事件中？我下面的东西不起作用..谢谢

```
var View = Backbone.View.extend({

    initialize: function () {
        //console.log('initializing ' + this.options.blankOption);
        this.template = $('#list-template').children();
    },
    el: '#container',
    events: {
        'click button' : 'render'
    },
    render: function(){

        this.events.preventDefault(); // not working ????

        var data = this.model.get('data');

        $.each(data,function (i,v) {
            console.log(data.text + " " + data.href);
        });

    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T09:14:14.183

this.events 不是事件对象。所以它不起作用

尝试这个：

```
render: function(event){
    event && event.preventDefault();

    var data = this.model.get('data');

    $.each(data,function (i,v) {
        console.log(data.text + " " + data.href);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T16:02:09.573

您可以通过添加重新激活操作

```
this.delegateEvents();  // Re-activates the events for all the buttons 
```

如果将其添加到主干 js 视图的渲染函数中，则可以根据需要使用 event.preventDefault() 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T09:14:57.257

接收事件对象作为参数

```
render: function(evt){

    evt.preventDefault();

    var data = this.model.get('data');

    $.each(data,function (i,v) {
        console.log(data.text + " " + data.href);
    });

} 
```

# ruby-on-rails - SimpleForm maxlength 扩展的工作原理

> ID：15063500
> 
> 赞同：4
> 
> 时间：2013-02-25T09:11:45.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我想在 SimpleForm gem 的帮助下创建的表单上设置输入的 maxlength html 属性。我知道我可以通过在创建表单时手动传递 maxlength 属性来做到这一点，例如：

```
<%= f.input :username, input_html: { maxlength: 20 } %> 
```

但这不是我想要的，因为根据 SimpleForm 配置文件中的注释，您应该启用 maxlength 扩展，当给出最大长度验证时，它会自动将此 html 属性添加到字符串属性的输入标记。

```
## Optional extensions
# They are disabled unless you pass `f.input EXTENSION_NAME => :lookup`
# to the input. If so, they will retrieve the values from the model
# if any exists. If you want to enable the lookup for any of those
# extensions by default, you can change `b.optional` to `b.use`.

# Calculates maxlength from length validations for string inputs
b.use :maxlength 
```

不幸的是，上述两种可能性都不起作用。我完全误解了 maxlength 扩展的使用吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T08:54:37.127

这是正确的，当编辑 simple_form.rb 配置文件时

```
b.use :maxlength 
```

表格中的最大长度将使用模型中的值。

我将 simple_form 与 Twitter Bootstrap 结合使用。为了对表单产生这种影响，我还必须在配置文件 simple_form_bootstrap.rb 中插入这一行

```
# Use this setup block to configure all options available in SimpleForm.
SimpleForm.setup do |config|
   config.wrappers :bootstrap, :tag => 'div', :class => 'control-group', :error_class => 'error' do |b|

   # Calculates maxlength from length validations for string inputs
   b.use :maxlength
   ... 
```

# autonomy - 自治 - 强制重新索引而不丢失数据

> ID：15063501
> 
> 赞同：0
> 
> 时间：2013-02-25T09:11:48.717
> 
> 标签：autonomy

我需要在我的 Autonomy HTTP 获取配置中添加一个新参数。

```
ImportFieldOp2=Expand
ImportFieldOpApplyTo2=AUTHOR
ImportFieldOpParam2=;;AUTHOR_M 
```

我停止了 HTTPFetch 服务，并在修改配置后启动了该服务。

问题是所做的更改仅适用于新文档。旧文档没有新参数。

如果我删除了所有被索引的文档，但它是一个生产环境，我不能这样做。

如何在不丢失数据的情况下强制对旧文档进行索引？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:40:12.477

查看内容引擎参数 KillDuplicates。

KillDuplicates=DREREFERENCE 应该做你想做的事。

将需要完全重新抓取以使用新文件更新现有文件。

# html - 如何检查是否在下拉列表中选择了项目并在选择/未选择列表项时启用/禁用文本框

> ID：15063503
> 
> 赞同：1
> 
> 时间：2013-02-25T09:12:04.717
> 
> 标签：html, asp.net-mvc-4

我有一个页面，我在其中创建了某种形式。我有 2 个下拉列表（个人资料列表和薪水列表）。

我在这个表单中有 3 个文本框。我想做的事：

我有 2 个盒子，我在其中创建了一个新的配置文件和一个新的薪水组，并且新的配置文件被添加到 profillist 和薪水组被添加到薪水列表中。

现在我希望禁用第三个框，直到选择了salalilis 和 profillist 中的一个项目。选择项目后，应启用文本框。

我的观点：

```
@model KUMA.Models.EmployeeCardAdminModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row bgwhite">
    <div class="twelve columns">
        <h2>Administration KUMA</h2>
        <div class="row bgwhite">@using (Html.BeginForm("Index", "Admin"))                   
           {
               <div class="three columns">
                   @Html.DropDownList("UserId", (SelectList)ViewBag.UserId, "--Välj anställd--") 
               </div>
               <div class="three columns" style="margin-right:457px !important;">
                    @Html.DropDownList("Salaryid", (SelectList)ViewBag.Salaryid, "--Välj LöneGrupp--")
                   <input style="float:left;" type="submit" value="Knyt" />
               </div>
           }

            @using (Html.BeginForm("Kompetens", "KumaAdmin"))
            {  
                <div class="three columns" style="margin-right: 627px;">
                    <h6>Kompetenser</h6>
                    <div style="width:456px;"> @Html.ListBox("kompetensId", (SelectList)ViewBag.KomId, new { placeholder = "Kompetenser" })</div><br/>
                    @Html.TextBoxFor(mm => mm.Kompetens, new { placeholder = "Ange Kompetens" })
                  @*@Html.TextBoxFor(mm => mm.KompetensTest, new { placeholder = "Kompetens" })
                    @Html.TextAreaFor(mm => mm.KompetensTest, new { placeholder = "Kompetens", rows="5", cols="80" })*@
                    <input type="submit" style="margin-right: 205px;" value="Skapa"/><br/><br/>
                </div>
             }
                 @using (Html.BeginForm("Index", "KumaAdmin"))
                 {
                     <div class="three columns" style="margin-right: 627px;">
                         @* <input  name="profileTxtBox"type="text" style="width:97px; height:28px;" value="" />*@
                         @Html.TextBoxFor(mm => mm.Profile, new { placeholder = "Ange Profil" })                    
                         @Html.TextBoxFor(mm => mm.SalaryGroup, new { placeholder = "Ange LöneGrupp" })
                         <input type="submit" value="Skapa"/>
                     </div>
                 }
           @*    <div class="one columns" style=" margin-left: 100px;margin-right: 164px; margin-top: -33px;">
                 <input  name="profileTxtBox"type="submit" style="width:100px;" value="Add" />
            </div>*@
            <div class="five columns"></div>
        </div>
    </div 
```

>

控制器：

```
 public class AAdminController : Controller
    {
        static List<Employee> list = new List<Employee>();
        //EmployeeCardAdminModel employee = new EmployeeCardAdminModel();
        //
        // GET: /Admin/
        //[Authorize(Roles = "Admin")]

        [HttpGet]
        public ActionResult Index()
        {
            ViewBag.UserId = new SelectList(list, "Id", "Profile");
            ViewBag.Salaryid = new SelectList(list, "Id", "SalaryGroup");
            ViewBag.KomId = new SelectList(list, "Id", "Kompetens");

            ModelState.Clear();

            return View("Index");   
        }

        [HttpPost]
        // submit for profile & salary box
        public ActionResult Index(Models.EmployeeCardAdminModel e)
        {
            if (string.IsNullOrEmpty(e.Profile) == false && string.IsNullOrEmpty(e.SalaryGroup) == false)
            {
                // adda a new employye to the list and set the values from the parameter to the model
                list.Add(new Employee
                    {
                        Id = e.Id + 1,
                        Profile = e.Profile,
                        SalaryGroup = e.SalaryGroup
                    });
            }
            return (Index());
        }

        [HttpPost]
        // submit for knowledge box
        public ActionResult Kompetens(Models.EmployeeCardAdminModel e)
        {
            if (string.IsNullOrEmpty(e.Kompetens) == false)
            {
                // adda a new employye to the list and set the values from the parameter to the model
                list.Add(new Employee
                {
                    Kompetens = e.Kompetens
                });
            }
            return (Index());
        } 
```

最后是我的模型（请注意，emplyee 类与我的模型相同，具有相同的属性，但我读到，为了获得最佳实践，最好将它们分开。）：

```
 public class EmployeeCardAdminModel
    {

        public string Profile { get; set; }
        public int Id  { get; set; }
        public string SalaryGroup { get; set; }
        public string Kompetens { get; set; }

    } 
```

我通常这样做的方法是调用所需的列表并检查所选索引是否大于空，但问题是我不知道如何以正确的方式从控制器访问列表，所以我可以访问里面的物品。另外我怎样才能在文本框上获得一个ID？我需要这个能够禁用/启用正确的文本框。

我对 mvc 很陌生，我通过做项目来学习，所以所有的建议都值得赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:05:51.870

过了一段时间，我意识到没有脚本就没有很好的方法。

所以我用这样的jquery解决了它：

```
$(function () {

    $(".list select").change(function () {
        if ($(".list1 select").val().length == 0 || $(".list2 select").val().length == 0) {

            $(".kompetensbox input").attr('disabled', 'disabled');
        }

        else {
            $(".kompetensbox input").removeAttr('disabled');
        }
    })
}); 
```

查看更改（添加的 css 类）：

```
 <div class="three columns list list1">
           @Html.DropDownList("UserId", (SelectList)ViewBag.UserId, "--Välj profilgrupp--") 
       </div>
       <div class="three columns list list2" style="margin-right:457px !important;">
            @Html.DropDownList("Salaryid", (SelectList)ViewBag.Salaryid, "--Välj LöneGrupp--")
           <input style="float:left;" type="submit" value="Knyt" />
       </div> 
```

希望它可以帮助其他尝试相同的人。

# c# - Java/C#中对同一对象调用多个方法的编码标准

> ID：15063513
> 
> 赞同：2
> 
> 时间：2013-02-25T09:12:22.693
> 
> 标签：c#, java, coding-style

这个代码片段可以

```
StringBuilder builder = new StringBuilder();
builder.Append("Have a ");
builder.Append("nice day!"); 
```

这样写更好吗？

```
 StringBuilder builder = new StringBuilder();
  builder.Append("Have a ")
         .Append("nice day!"); 
```

在 C# 和 Java 中，更好的编写方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:16:21.050

第二个例子中的模式是“fluent API”/“fluent interface”；坦率地说，两者都不是严格意义上的*更好*- 但如果存在第二个，那么不使用它可能会有点低效。在 .NET IL 术语中，第一种语法涉及额外的`ldloc`每次`pop`迭代，而第二种则避免了这种情况——但这很少有重大意义。要么工作正常。

就个人而言，除非您知道它处于性能关键位置，否则我会优化可读性和便利性。

事实上，你可以只使用：

```
string s = "Have a " + "nice day!"; 
```

编译器（至少在 C# 中——我不了解 java）将在编译时计算（因为它们都是常量）并编译成一个单一的`ldstr`（也自动实习）。

# python - “num - 1”与“num -= 1”

> ID：15063515
> 
> 赞同：1
> 
> 时间：2013-02-25T09:12:26.047
> 
> 标签：python

在第 4 行中，为什么我们必须在“-”之后添加“=”？

```
num = 5
if num > 2:
    print(num)
    num -= 1
print(num) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T09:14:22.620

`num - 1`：产生减一的结果`num`；`num`没有改变

`num -= 1`: 减一并`num`存储结果（相当于`num = num - 1`when`num`是一个数字）

请注意，您可以将`num - 1`其用作*表达式*，因为它会产生结果，例如`foo = num - 1`, 或`print(num - 1)`，但您不能`num -= 1`在 Python 中用作表达式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T09:13:38.747

```
num -= 1 
```

是相同的

```
num = num - 1 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-25T09:14:08.050

**需要将`=`减法的结果分配回`num`。**

以下：

```
num -= 1 
```

减去 1`num` *并将结果分配回`num`*.

另一方面，以下内容：

```
num - 1 
```

减去 1`num` *并丢弃结果*。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-25T09:14:08.707

因为`num - 1`什么都不做，只是`num -= 1`将 的值更改`num`减一。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-25T09:14:20.327

你本质上是在问之间的区别

```
num - 1 
```

和

```
num -= 1 
```

前者是一个计算结果为 的表达式`num - 1`。后者是分配给 的`num - 1`分配`num`。

所以，前者不修改`num`，后者修改。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-25T09:14:25.420

这是一个较短的写作版本：

```
num = num - 1 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-25T09:19:36.787

您不必*做*任何事情，除非您需要为程序正确运行做一些事情。有些事情是好的做法，但不要让编译器和规范以外的任何人或任何东西说服您*必须*以某种方式做某事。在这种情况下，`n -= 1`与 完全相同`n = n - 1`。因此，如果您不想将 放在`-`之前`=`，则不要。改为使用`n = n - 1`。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-25T09:15:53.683

`-=`是一个运算符。该运算符等于减法。

`num -= 1`手段是 `num = num - 1`

它用于从右侧减去具有给定值的自身。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-26T06:42:52.230

the`-=`是一个运算符，你写的会产生`num = num - 1`.

# javascript - 动态更改 twitter 引导模式的文本

> ID：15063520
> 
> 赞同：0
> 
> 时间：2013-02-25T09:12:50.617
> 
> 标签：javascript, twitter-bootstrap

我在页面上有一个 twitter 引导模式，它工作得很好。但是，有时我想在显示时动态更改其标题和正文。

我怎么做？

```
 function showModal(){
      $("#ajaxModal").modal({keyboard: false, show: true, backdrop: 'static'});
    }

    function hideModal(){
      $("#ajaxModal").modal('hide');
    }

   ///.............
   showModal();
   //.........
   hideModal(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:19:35.110

我曾在相同的情况下工作过..这是示例可能对您有用..

这只是示例场景..我找到了元素

**在模态**myModal**中并传递了我的值，我动态传递了**“alertMsg”****

 **```
$('#myModal').find('p').html('<span style="color:#4F2817;">'+alertMsg+'</span>'); 
```**

# image - How to get the the chosen image and show it on the same page using jquery ajax

> ID：15063522
> 
> 赞同：1
> 
> 时间：2013-02-25T09:13:01.110
> 
> 标签：image, jquery

I want to show the uploaded image on the same page without refreshing the page .

```
<form action='xyz.php' method='post' enctype='multipart/form-data'>
<input type='file' name='image' id='image'>
<input type='submit' name='ok' id='ok' value='upload'>
</form>

<div id='uploadedImage'></div>    

<script>

$(document).ready(function(){

    $('#ok').click(function (e) {
         e.preventDefault();
         // then should be the jquery ajax call and response ?
         // help with this code . 

    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:18:44.620

Check out [this jQuery File Upload plugin](http://blueimp.github.com/jQuery-File-Upload/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:22:32.083

By standart means you can't (you can, but in two words you have to write many code with hiding inputs and showing buttons). But there are several good plugins you can use. You can check [https://github.com/valums/file-uploader](https://github.com/valums/file-uploader). It is open-code, so you can either use it or you can see how ajax upload is implemented

# php - 为什么产品图片没有出现在 magento 前端

> ID：15063524
> 
> 赞同：0
> 
> 时间：2013-02-25T09:13:22.543
> 
> 标签：php, magento, e-commerce, magento-1.7

我是 Magento 的新手，我正在浏览它……我已经在 localhost 上安装了 1.7 社区版。

我已经添加了产品，我已经在产品中添加了图像。但是，该产品的图像没有显示在前端......我已经清除了缓存但它没有工作......有人知道吗该怎么办？

我还遇到了另一个问题。当我点击这个没有图片的产品时，它会进入产品页面，但页面没有任何样式......样本数据中的产品不会发生这种情况

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T11:24:50.347

试试这个——进入管理面板>目录>管理产品>点击列表中的产品>产品信息>图片——你可以在这里上传产品图片。如果您已经上传了图像，请单击标题“基本图像”、“小图像”、“缩略图”下的单选按钮。然后点击保存。

要将样式应用于产品页面，请转到产品信息 > 设计并从“自定义设计”和“页面布局”中选择您想要的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:09:41.830

哈……知道了……我需要为每个商店视图的图像选择单选按钮……我把它们放在前端。这个功能非常不直观......我希望他们在未来的版本中找到更好的方法

# android - 包括来自其他布局android的linearlayout

> ID：15063525
> 
> 赞同：0
> 
> 时间：2013-02-25T09:13:24.307
> 
> 标签：android, xml, layout

我有一个`layout.xml`面板`android(R.layout.items)`：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="textview1: " />

    <LinearLayout
        android:id="@+id/Panel1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="6dp"
        android:orientation="horizontal"
        android:padding="1dp" >

    <EditText
        android:id="@+id/agente2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.1"
        android:maxLength="5"
        android:singleLine="true" />

    <EditText
        android:id="@+id/agente2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.3"
        android:enabled="false"
        android:singleLine="true" >
    </EditText>
    <LinearLayout
        android:id="@+id/Panel2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="6dp"
        android:orientation="horizontal"
        android:padding="1dp" >
    <CheckBox
        android:id="@+id/cbTipoIncidente1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="CheckBox" />
..... 
```

在这个面板中，我有一些`linearlayout`我想以动态和编程方式添加到另一个面板`layout(r.layout.other)`：

使用 inflate 我只能添加`r.layout`资源而不是`r.id`. 我想将单个视图（例如 panel1）添加到`r.layout.other`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:17:38.093

将其另存`LinearLayout`为单独并使用以下标签`panel.xml`调用不同的`layout.xml`文件：`<include>`

```
 <LinearLayout ... >
         <include layout="@layout/panel" />
  </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:16:46.147

使用这个概念

```
LinearLayout global_panel = new LinearLayout (this);
        global_panel.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        global_panel.setGravity(Gravity.FILL);
        global_panel.setBackgroundResource(R.drawable.back); 
```

# php - 在 phpbb 中搜索为句子

> ID：15063529
> 
> 赞同：-3
> 
> 时间：2013-02-25T09:13:39.540
> 
> 标签：php, phpbb

我有一个PHPBB。在这里它的工作是明智的。我试过magento教程，它总是分开单词，因此搜索“magento”和“tutorial”。是否有可能按书面形式搜索整个句子？

我需要在我的网站上进行句子搜索。如果有人知道这一点，请帮助我。

有什么设置吗？或任何代码..

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:46:59.877

如果您使用 Google 搜索此特定问题，您将看到包含问题答案的第一个结果 ( [https://www.phpbb.com/community/viewtopic.php?p=12772555 )。](https://www.phpbb.com/community/viewtopic.php?p=12772555)如果我确实理解您的问题，那么关于 PHPBB 的“字眼”并不是很具描述性。

# prolog - Prolog祖父（i，i）

> ID：15063544
> 
> 赞同：1
> 
> 时间：2013-02-25T09:14:19.377
> 
> 标签：prolog

一个（非常）奇怪的故事：我娶了一个寡妇（W），她有一个女儿（D）。我的父亲（F）娶了我的继女（D）。我的妻子生了一个儿子（s1）。我父亲的妻子（继女）也有一个儿子（s2）。

该项目的目标是输入：

```
grandfather(i,i). 
```

并`yes`在序言中返回。

这是我到目前为止所拥有的：

```
%facts

father(f,i).

husband(i,w).

husband(f,d).

mother(w,d).

mother(w,s1).

father(i,s1).

mother(d,s2).

father(f,s2).

%rules

father(X,Y) :- f_in_law(X,Y).

father(X,Y) :- husband(X,Z),mother(Z,Y).

f_in_law(X,Y) :- husband(Z,Y),father(X,Z).

b_in_law(X,Y) :- husband(Z,Y),brother(X,Z).

%brother(X,Y) :- b_in_law(X,Y).

uncle(X,Y) :- father(Z,Y),brother(X,Z).

grandfather(X,Y) :- father(Z,Y),father(X,Z). 
```

我追踪它，看看出了什么问题。`father(f,i)`是真的，那很好！但`father(i,f)`被认为是假的。有关如何纠正此问题的任何建议/想法？我很感激任何输入，因为我对 prolog 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:24:09.680

谓词应该是

```
f_in_law(X,Y) :- husband(Y,Z),father(X,Z). 
```

代替

```
f_in_law(X,Y) :- husband(Z,Y),father(X,Z). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:02:39.487

我重新设计了这个谜语

```
father(i, s1).
father(f, i).
father(f, s2).

fatlaw(X, Y) :- husband(X, Z), mother(Z, Y).

mother(w, d).
mother(w, s1).
mother(d, s2).

motlaw(X, Y) :- husband(Z, X), father(Z, Y).

husband(i, w).
husband(f, d).

grandfather(X, Y) :-
    ( father(X, Z) ; fatlaw(X, Z) )
    , ( father(Z, Y) ; fatlaw(Z, Y) ; mother(Z, Y) ; motlaw(Z, Y) )
    . 
```

重点似乎是爷爷必须接受假生物后代（我希望这是合理的英语）。

接着就，随即

```
?- grandfather(X,X).
X = i ;
false. 
```

# assembly - Mips：“Hello World”遇到错误

> ID：15063553
> 
> 赞同：0
> 
> 时间：2013-02-25T09:14:39.617
> 
> 标签：assembly, mips, spim, qtspim

我正在尝试在 Mips 中显示“Hello World”（来自 Internet 上的示例）并查看它是如何工作的，但最终出现错误。我首先遇到以下错误：“spim: (parser) Label is defined for the第二次出现在文件 C:Program Files (x86) main: # Execution started at label "main" " 的第 6 行 ^ 为了修复它，我重新初始化并重新加载。然后我运行 Qtspim，最终出现以下错误：“指令在 0x00400028/Notepad++/test.asm [0x00400028] 0x3c010000 lui $1, 0 [Greetings] 处引用未定义符号；8:la $a0, Greetings # load address of string打印成 $a0

有人可以解释导致第一个和第二个错误的原因吗？我只是想测试我在网上找到的代码，并在尝试分配之前了解 Qtspim 的工作原理。我在 Windows 08 上使用 Notepad++。非常感谢您的帮助。下面是代码。

```
# Program: Hello, World!
.data               # data declaration section; specifies values to be stored
                    # in memory and labels whereby the values are accessed
Greeting: .asciiz "\nHello, World!\n"
.text               # Start of code section
main:               # Execution begins at label "main"
li $v0, 4            # system call code for printing string = 4
la $a0, Greetings    # load address of string to be printed into $a0
syscall             # call operating system to perform operation;
                    # $v0 specifies the system function called;
                    # syscall takes $v0 (and opt arguments)

                    #This illustrates the basic structure of an assembly language program. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:21:54.130

您标记了字符串`Greeting`，但在代码中引用它`Greetings`，无法识别。

此外，您似乎永远不会在之后从您的函数（例如`jr $ra`或类似函数）返回，`syscall`因此对未定义的数据继续执行。

# c# - System.Threading.Timer 回调未命中

> ID：15063554
> 
> 赞同：1
> 
> 时间：2013-02-25T09:14:41.743
> 
> 标签：c#, .net, timer, windows-services

我有一个 Windows 服务，除其他外，它需要每 24 小时进行一次数据库维护。（SQL express，所以不能在数据库里面调度）

为此，我创建了一个带有数据库维护方法回调的计时器，但它似乎只被命中一次（我假设在创建计时器时）。我认为这是由于计时器本身超出范围并被 GC，但我尝试过的所有解决方案似乎都没有奏效

服务的基本布局是这样的：

WindowsService.cs：

```
 protected override void OnStart(string[] args)
    {
        ThreadPool.QueueUserWorkItem(StartServices);
    }

    private void StartServices() { Manager.Start(); } 
```

经理.cs：

```
public class Manager
{
  private static Timer MaintenanceTimer;
  public static void Start()
  {
    MaintenanceTimer = new Timer(DoMaintenance);
    MaintenanceTimer.Change(new TimeSpan(0), new TimeSpan(24,0,0,0)); //I use 1 minute for testing
  }
} 
```

显然，这段代码被严重简化了，但这几乎就是发生的事情。如前所述，我认为 GC 是问题所在，这让我尝试了以下两件事：

*   使用构造函数 Timer(callback)，因此它将提供对回调的自引用。但是，这仍然不能阻止它超出范围，所以这是不行的。
*   将计时器定义为 Manager 类中的静态变量。这*应该可以*防止它被 GC，但似乎仍然没有每 24 小时调用一次。

在这件事上的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:34:27.757

最后，我使用了一个常规的 System.Timers.Timer 来解决我的问题。不过，我仍然不确定 System.Threading.Timer 哪里出了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:35:34.537

由于您无法在 SQL Server Express 中使用 SQL Server 代理，因此最好的解决方案是创建一个 SQL 脚本，然后将其作为计划任务运行。

我很容易验证和维护，您可以有多个计划任务以适应您的备份计划/保留。

我在计划任务中使用的命令是：

```
C:\Program Files\Microsoft SQL Server\90\Tools\Binn\SQLCMD.EXE" -i"c:\path\to\sqlbackupScript.sql 
```

# .net - 属性“RightToLeftLayout”

> ID：15063555
> 
> 赞同：1
> 
> 时间：2013-02-25T09:14:49.537
> 
> 标签：.net, c#-4.0

大家好，我制作了一个简单的应用程序，在某些表单中使用 RightToLeftLayout 属性，但问题是当我使用“ShowDialog()”方法打开一个表单并在此之后激活此代码

```
this.RightToLeftLayout = true;
this.RightToLeft = RightToLeft.Yes; 
```

表单将自动关闭..但是当我使用“Show()”方法时，它会正常影响。

请任何人在这个问题上帮助我，我需要在我的项目中以多种形式使用“ShowDialog（）”方法。

# javascript - YUIDoc/javascript - 如何记录模块属性

> ID：15063561
> 
> 赞同：2
> 
> 时间：2013-02-25T09:15:09.580
> 
> 标签：javascript, documentation

我从[这里](http://net.tutsplus.com/tutorials/javascript-ajax/documenting-javascript-with-yuidoc/)复制了一个例子。下面是示例代码，但问题是 Store.TAX_RATE 在文档中显示为 Item 的属性，而不是模块 Store 的属性。任何建议为什么？

示例代码：

```
/**
  * This module contains classes for running a store.
  * @module Store
  */
var Store = Store || {};

/**
  * `TAX_RATE` is stored as a percentage. Value is 13.
  * @property TAX_RATE
  * @static
  * @final
  * @type Number
  */
Store.TAX_RATE = 13;

/**
 * @class Item
 * @constructor
 * @param name {String} Item name
 * @param price {Number} Item price
 * @param quantity {Number} Item quantity (the number available to buy)
 */
Store.Item = function (name, price, quantity) {
  /**
    * @property name
    * @type String
    */
  this.name = name;
  /**
    * @property price
    * @type String
    */
  this.price = price * 100;
  /**
    * @property quantity
    * @type Number
    */
  this.quantity = quantity;
  /**
    * @property id
    * @type Number
  */
  this.id = Store.Item._id++;
  Store.Item.list[this.id] = this;
 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:13:35.720

那是因为根据 YUIDoc 术语，模块只是相关类的集合，因此它不能包含类以外的任何内容。

您可以做的是将 Store 和 Store.Item 都记录为类：

```
/**
 * This module contains classes for running a store.
 * @class Store
 */
var Store = Store || {};

/**
 * `TAX_RATE` is stored as a percentage. Value is 13.
 * @property TAX_RATE
 * @type Number
 */
Store.TAX_RATE = 13;

/**
 * @class Store.Item
 */
Store.Item = function (name, price, quantity) {
}; 
```

# asp.net-mvc-3 - 在 FireFox 中上传 SWF

> ID：15063570
> 
> 赞同：0
> 
> 时间：2013-02-25T09:15:50.983
> 
> 标签：asp.net-mvc-3, swfupload

我在我的 MVC3 程序中使用 SWFUpload。它在 IE 和 Chrome 中运行良好。但我的文件无法在 FireFox 中上传。它甚至没有进入上传操作。在我的程序中，用户应该先登录。当我在用户不必登录的测试程序中使用 SWFUpload 时，它也能正常工作。谁能告诉我如何解决这个问题？这是我的代码：

```
Js:
   swfupload1 = new SWFUpload({
        upload_url: '@Url.Action("Upload")',
        post_params: { "name": "value" },

        file_size_limit: "200000000",
        file_types: "*.jpg;*.gif;*.png;*.jpeg",
        file_types_description: "",
        file_upload_limit: "1",
        file_queue_limit: "1",

        file_queue_error_handler: fileQueueError,
        file_dialog_complete_handler: fileDialogComplete,
        file_queued_handler: fileQueued,
        upload_progress_handler: uploadProgress,
        upload_error_handler: uploadError,
        upload_success_handler: uploadSuccess, 
        upload_complete_handler: uploadComplete,
        upload_start_handler: uploadStart,

        button_image_url:'@Url.Content("~/Swfupload/images/XPButtonNoText2_160x22.png")', 
        button_placeholder_id: "spanButtonPlaceholder1", 
        button_width: 42,
        button_height: 22,
        button_text: '<span class="buttonCss">选择</span>', 
        button_text_style: ".buttonCss { font-family: Helvetica, Arial, sans-serif; font-size: 14pt; } .buttonSmall { font-size: 10pt; }", 
        button_text_top_padding: 1,
        button_text_left_padding: 5,
        button_cursor: SWFUpload.CURSOR.HAND,
        button_action: SWFUpload.BUTTON_ACTION.SELECT_FILE, 

        flash_url: '@Url.Content("~/Swfupload/swfupload.swf")',
        custom_settings: { upload_target: "divFileProgressContainer1" },

        debug: false
    }); 
```

控制器：

```
 [HttpPost]
    public ActionResult Upload(HttpPostedFileBase filedata)
    {
        if (null != filedata)
        {
           filedata.SaveAs(Server.MapPath("/File/Coverurl"+fileData.FileName));
        }
        return Json("");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:51:34.850

我建议有兴趣的人在这里看看解决方案：[http](http://www.cnblogs.com/rupeng/archive/2012/01/30/2332427.html) ://www.cnblogs.com/rupeng/archive/2012/01/30/2332427.html 。

# css - 使用 css 将 div 标签放在标签上

> ID：15063574
> 
> 赞同：0
> 
> 时间：2013-02-25T09:16:01.757
> 
> 标签：css

我有以下由两个标签组成的代码。`.nav`并且`.page`我想将其放在`.nav`顶部`position: fixed`和`.page`下方`.nav`。我如何在不使用`margin`属性的情况下做到这一点？

这是[jsfiddle](http://jsfiddle.net/HBxNr/)

这是代码

```
 <div class="nav">this is navigation</div>
 <div class="page">this is page</div> 
```

CSS

```
 .nav {
display: block;
position: fixed;
border: 1px solid red;
height: 50px;
width: 100%;
}

.page {
border: 1px solid green;
height: 300px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:18:48.507

那么，你可以使用相对定位吗？如果未设置，这会将“页面”元素定位为显示应该显示的位置的 50 像素。额外的好处是，“page”元素中的所有绝对定位元素都将引用“left:0px;top:0px”作为页面元素的左上角，而不是浏览器视口。

[请参阅http://jsfiddle.net/HBxNr/1/](http://jsfiddle.net/HBxNr/1/)上的小提琴

```
position:relative;
top:50px; 
```

# javascript - IE 问题的 window.unload 事件中的 ajax 调用

> ID：15063579
> 
> 赞同：0
> 
> 时间：2013-02-25T09:16:31.233
> 
> 标签：javascript, internet-explorer, events, browser

当用户关闭浏览器或刷新浏览器时（onbeforeunload 事件不适合我的场景，似乎用户可能无法离开），我想向服务器发送日志，所以我有以下代码，它在**chrome**和FireFox，但**不适**用于 IE8+：

```
 window.onunload = function(){
                   $.ajax({url:"http://localhost:8888/log",async:false})
               }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:23:54.113

尝试使用**onbeforeunload**事件
[https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)

# c# - 如何在c#中编写mysql创建表查询

> ID：15063580
> 
> 赞同：1
> 
> 时间：2013-02-25T09:16:39.433
> 
> 标签：c#, mysql, sql

如何在 C# 中为 mysql 数据库创建表查询..

```
MySqlConnection con = new MySqlConnection("Server=localhost;Database=demo_test;UID=root;Password= ");

MySqlCommand acmd = new MySqlCommand("CREATE TABLE first (" + a.Columns[0] + " int(20) NOT NULL auto_increment,'" + a.Columns[1].ToString() + "' varchar(100) NOT NULL default,PRIMARY KEY (" + a.Columns[0]+") 1", con); 
con.Open();

acmd.ExecuteNonQuery(); 
```

它给了我一个错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''name' varchar(100) NOT NULL default,PRIMARY KEY (id) 1' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-23T15:10:02.097

[您可以像这样使用Mig#](https://www.nuget.org/packages/MigSharp/)，而不是直接使用 SQL ：

```
 var schema = new DbSchema(ConnectionString, DbPlatform.MySql5);
        schema.Alter(db => db.CreateTable("first")
            .WithPrimaryKeyColumn(a.Colunns[0], DbType.Int32).AsIdentity()
            ...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:18:09.067

这是因为您使用单引号将列名包装起来，这会将值转换为字符串而不是标识符。删除单引号，它将起作用。

```
string query = @"CREATE TABLE first (" + a.Columns[0] + " int(20) NOT NULL auto_increment, " 
                     + a.Columns[1].ToString() + " varchar(100) NOT NULL default,
                     PRIMARY KEY (" + a.Columns[0]+")" 
```

# javascript - 如何动态加载谷歌client.js

> ID：15063581
> 
> 赞同：5
> 
> 时间：2013-02-25T09:16:40.277
> 
> 标签：javascript, jquery, api, dynamic

这是我第一次在 stackoverflow 上发帖。

我的问题很简单（我认为）。我的任务是允许用户使用 Facebook、Google Plus、LinkedIn 和 Twitter 进行注册。现在，我想要做的是当用户单击社交网络按钮时，它会将他们重定向到注册页面，并带有一个标志，该标志确定他们想要使用哪个社交网络。这里没问题。

我想根据他们选择的社交网络动态加载每个 API。

动态加载 Google JS API 时出现问题。[此处](https://code.google.com/p/google-api-javascript-client/source/browse/samples/authSample.html)的示例以简单的方式加载 client.js。如果我遵循示例代码，我没有问题。但我想动态加载它。

我尝试使用 $.ajax、$.getScript，甚至尝试将脚本添加到页面中，就像异步调用 Google Analytics 一样。以上都没有奏效。我的回调函数不会一直被调用。此外，如果我从 $.ajax 和 $.getScript 的回调函数调用 setApiKey，gapi.client 为 NULL。我不知道下一步该做什么。

无效的代码：

```
(function () {
var gpjs = document.createElement('script'); gpjs.type = 'text/javascript'; gpjs.async = false;
gpjs.src = 'https://apis.google.com/js/client.js?onload=onClientLoadHandler';
var sgp = document.getElementsByTagName('script')[0]; sgp.parentNode.insertBefore(gpjs, sgp);})(); 
```

使用 $.getScript

```
$.getScript("https://apis.google.com/js/client.js?onload=onClientLoadHandler", function () {
console.log("GP JS file loaded.");
SetKeyCheckAuthority();}); 
```

使用 $.ajax

```
$(document).ready(function () {
$.ajax({
    url: "https://apis.google.com/js/client.js?onload=onClientLoad",
    dataType: "script",
    success: function () {
        console.log("GP load successful");
        SetKeyCheckAuthority();
    },
    error: function () { console.log("GP load failed"); },
    complete: function () { console.log("GP load complete"); }
});}); 
```

我可以知道动态调用这个js文件的正确方法是什么吗？任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:08:04.593

好的，我只是想到了一个解决方案，但我认为这是一个糟糕的解决方案。请让我知道你的想法。

我使用 $.getScript 加载 js 文件

```
$.getScript("https://apis.google.com/js/client.js?onload=onClientLoadHandler", function () {
console.log("GP JS file loaded.");
SetKeyCheckAuthority();}); 
```

然后在我的 SetKeyCheckAuthority 函数上，当 gapi.client 为空时，我设置了一个条件，在 1 秒后调用自身。

```
function SetKeyCheckAuthority() {
if(null == gapi.client) {
    window.setTimeout(SetKeyCheckAuthority,1000);
    return;
}

//set API key and check for authorization here } 
```

# python - 关于如何显示需要执行计算的一行数据的建议

> ID：15063585
> 
> 赞同：0
> 
> 时间：2013-02-25T09:16:49.433
> 
> 标签：python, django, django-models

虽然这可能是初级的，但对我来说它证明超出了我的水平。我先谢谢了。

我想要实现的是我正在查询的一行数据，在根据 Liveroute 表中的字段值不活动进行查询后，我执行计算查找两组经度和纬度值之间的距离，我可以使用haversine公式来计算两点经度和纬度之间的距离。但我担心这个计算过程可能需要时间，而且我将无法按时显示表格中大量行的数据。所以我想我会将计算结果保存在另一个表中并从该表中获取数据并显示它。

我将对表中变为非活动的值执行计算。这是 Django 代码，它告诉 Liveroute 模型类中的路由该行是活动的还是非活动的。

```
class LiveRoutes(models.Model):
   user = models.ForeignKey(User)
   route = models.ForeignKey(UserRoutes)
   status = models.ForeignKey(LiveRoutesStatus)
   traveller = models.ManyToManyField(LiveRouteTravellers)
   datetime = models.DateTimeField()

 def __unicode__(self):
    return self.route.__unicode__()

 def isActive(self):
   utc = pytz.utc
   os.environ['TZ'] = 'UTC'
   local = pytz.timezone("Asia/Calcutta")
   now = utc.localize(datetime.datetime.today())
   now = now.astimezone(local)
   time_delta = (local.localize(self.datetime.replace(tzinfo=None)) +    datetime.timedelta(minutes=self.route.journey_time_day)) - now
   if time_delta.days == -1 and (24 - (time_delta.seconds / 3600)) <= 2:
     return True
   elif time_delta.days >= 0:
     return True
   else:
     return False 
```

基于 isActive 函数的这个值，我想执行如下计算

```
def carbonFootPrint(request):
if request.method != "GET":
   raise Http404

routes = LiveRoutes.objects.all();
routeDetailArr = []
for lroute in routes:
   routeDetail = dict()
   if lroute.isActive() == False:

      #Now I need to find out the start location and end location for the journey and the number of travellers. 
      routeDetail['travellers'] = lroute.traveller.all().count()
      routeDetail['start_loc_lat']= lroute.route.start_location.latitude
      routeDetail['start_loc_long'] = lroute.route.start_location.longitude
      routeDetail ['end_loc_lat'] = lroute.route.end_location.latitude
      routeDetail['end_loc_long'] =  lroute.route.end_location.longitude
      routeDetail['distance'] = haversine(start_loc_lat,start_loc_long,end_loc_lat,end_loc_long)
      routeDetailArr.append(routeDetail) 
```

我的问题是如何将所有这些数据插入到另一个表中，以便稍后我可以获取这些值。感谢任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:26:23.127

为了触发会话，它必须是这样的：

```
request.session['travellers'] = lroute.traveller.all().count()
//other session here 
```

要获取和使用数据，它必须是：

```
travellers = request.session.get('travellers') 
```

# iphone - 多线程核心数据和日志记录

> ID：15063591
> 
> 赞同：0
> 
> 时间：2013-02-25T09:17:25.357
> 
> 标签：iphone, ios, objective-c, core-data, logging

**背景资料**

我几乎完成了我的应用程序。一切都运行良好。然后客户要求登录应用程序（即必须记录所做的事情，响应是什么等的各个点......）。

该应用程序允许用户创建保存到核心数据中的“消息”。然后将消息单独上传到服务器。消息在主线程上创建并上传到`NSOperation`后台线程的子类中。

它与`NSOperation`我之前使用过的子类的模板相同并且有效。我正在为多线程核心数据做所有最佳实践。

应用程序的所有这方面工作正常。

我添加了应用程序的日志记录部分。我创建了一个名为的单例`MyLogManager`和一个`CoreData`名为`LogEntry`. 实体很简单，它只有一个`date`and `text`。

**代码**

MyLogManager 里面的函数是...

```
- (void)newLogWithText:(NSString*)text
{
    NSLog(@"Logging: %@", text);

    NSManagedObjectContext *context = [self context];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"LogEntry" inManagedObjectContext:context];

    LogEntry *logEntry = [[LogEntry alloc] initWithEntity:entity insertIntoManagedObjectContext:context];

    logEntry.text = text;
    logEntry.date = [NSDate date];

    [self saveContext:context];
} 
```

反过来运行...

```
- (NSManagedObjectContext*)context
{
    AppDelegate *appDelegate = (ThapAppDelegate*)[[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSConfinementConcurrencyType];
    [managedObjectContext setPersistentStoreCoordinator:appDelegate.persistentStoreCoordinator];

    return managedObjectContext;
} 
```

和

```
- (void)saveContext:(NSManagedObjectContext*)context
{
    MyAppDelegate *appDelegate = (MyAppDelegate*)[[UIApplication sharedApplication] delegate];

    [[NSNotificationCenter defaultCenter] addObserver:appDelegate
                                             selector:@selector(mergeChanges:)
                                                 name:NSManagedObjectContextDidSaveNotification
                                               object:context];

    NSError *error = nil;
    if ([context hasChanges] && ![context save:&error]) {
        NSLog(@"Unhandled error %@, %@", error, [error userInfo]);
        abort();
    }

    [[NSNotificationCenter defaultCenter] removeObserver:appDelegate name:NSManagedObjectContextDidSaveNotification object:context];
} 
```

NSOperation 主线程（它的一部分）......

```
- (void)main
{
    //create context and retrieve NSManagedObject using the NSManagedObjectID passed in as a parameter to operation

    self.message.lastSendAttempt = [NSDate date];

    [self startUpload];

    [self completeOperation]; //This doesn't get run because the startUpload method never returns
}

- (void)startUpload
{
    [[MyLogManager sharedInstance] logSendingMessageWithURLParameters:[self.event URLParameters]]; //this is a convenience method. It just appends some extra info on the string and runs newLogWithText.

    //Do some uploading stuff here...
    //The operation stops before actually doing the upload when logging to CoreData.
} 
```

**问题**

我`NSOperation`上传消息的子类（在后台线程上）调用此`newLogWithText`函数，但它也会更新它正在上传的消息。使用`NSOperation`相同的方法来获取和保存核心数据上下文。（即它更新最后发送的日期，如果发送成功也会更新）。

这是我第一次尝试处理同时写入和保存到核心数据。

我没有收到任何错误，并且该应用程序继续“工作”。但操作永远不会完成。我尝试使用断点对其进行调试，但是当我使用断点时它可以工作。没有断点，操作永远不会完成，上传也永远不会发生。然后它就坐在那里阻塞它所在的队列，并且无法发送其他消息。

在我的`appDelegate`（我知道这不是它的理想位置，但它是新项目的默认设置，我没有更改它）该`mergeChanges`方法只是......

```
- (void)mergeChanges:(NSNotification *)notification
{
    [self.managedObjectContext performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) withObject:notification waitUntilDone:NO];
} 
```

我试过将“newLogWithText”函数扔到另一个线程，甚至扔到主线程，但没有运气。

我现在正要尝试，但将合并的“waitUntilDone”更改为“是”。（刚刚注意到这一点）。（这不起作用）。

我有 90% 的把握这是由于同时写入不同的上下文和解决冲突，因为这是我第一次处理这个问题。如果我注释掉这个`newLogWithText`函数，那么一切都会正常运行。

目前唯一的选择是废弃`LogEntry`核心数据并将日志保存到内部的数组中，`NSUserDefaults`但这感觉不对。还有其他方法吗？

**编辑**

我现在已经改变了它，所以它的用户`NSUserDefaults`和它的工作没有问题。感觉就像一个 hacky 解决方案。

# c++ - Fortify SCA 在可执行文件或 .o 文件上构建

> ID：15063592
> 
> 赞同：0
> 
> 时间：2013-02-25T09:17:25.450
> 
> 标签：c++, fortify

我正在尝试对为创建二进制文件而编写的 C++ 代码进行强化静态分析。但是，此构建需要数小时（有时甚至超过一天）才能完成。

为了解决这个问题，我尝试通过创建一个假存档作为目标单独构建所有 .o 文件。我在这种方法中看到的优点是代码不属于我们的团队，不需要构建，也节省了链接时间。当我这样做时，我们在构建时间方面看到了巨大的收益。

然而，我团队中的一个人认为这可能会导致误报和漏报，因为它错过了与我们所有权之外的代码的交互。他举的一个例子是关于 API 调用之间的共享对象到我们所有权之外的库。换句话说，我们将无法知道您域之外的对象的操作。但是，当所有文件所有者都为他们的代码做同样的事情时，这不会被处理吗？

请告知我的方法是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:43:55.783

您的方法可能会导致误报，但更有可能是误报，这更糟，和/或风险评级过低。

数据流分析器使用全局的跨过程污点传播分析来检测**源**（用户输入）和接收**器**（危险的函数调用）之间的数据流。

如果数据流分析器找不到接收器，则分析器将停止跟踪此污点传播并转移到另一个，从而丢失漏洞（假阴性）。

以下伪代码是**PII 暴露**和**SQL 注入**的示例：

```
public static void main(String args[]) throws Exception {
  ResultSet results = SQLInj(args);
  System.out.println(results.Password);
}

public static ResultSet SQLInj(String args[]) {
  String query = "SELECT * FROM user_data WHERE last_name = '" + args[1] + "'";
  Statement statement = connection.createStatement();
  ResultSet results = statement.executeQuery(query);
} 
```

源是**main->args[]**，接收器是**SQLInj->executeQuery()**。

如果函数**SQLInj**驻留在未扫描的代码中（不是您团队的代码），则不会发现 SQL 注入问题，因为数据流分析器永远不会找到接收器。语义分析器可以通过查找“密码”一词来找到 PII 暴露，但给出的置信度要低得多。

# php - 用 PHP 计算经过的时间

> ID：15063595
> 
> 赞同：2
> 
> 时间：2013-02-25T09:17:28.013
> 
> 标签：php, time, datediff

我得到了这样的日期之间的时差：

```
$time1 = "2013-02-25 12:00:00";
$time2 = "2013-01-01 12:00:00";
$tdiff = strtotime($time1) - strtotime($time2); 
```

我想从中提取天、小时和分钟`$tdiff`。输出应该是：`35 days 6 hours 14 minutes`

我真的搜索并尝试自己做一些事情。但我无法获得真正的价值。

---- 编辑 ---- 我可以找到日期差异。我想从计算的时间中提取天、小时、分钟......

---- EDIT 2 ---- 这是我完整的mysql代码

```
select (
    select avg(UNIX_TIMESTAMP(tarih)) from table1 
    where action in (6) and who = '".$user."' and dates between '".$date1."' and '".$date."'
    ) - ( 
    select avg(UNIX_TIMESTAMP(tarih_saat)) from table2 
    where action in (6) and active = 1 and dates between '".$date1."' and '".$date2."
) 
```

这个查询返回给我时间的真实价值。这个查询对我来说工作正常。结果是这样的：`215922`。结果类型为 UNIX_TIMESTAPM。所以我想知道这个时间戳有多少天、多少小时和多少分钟。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T09:20:48.463

PHP 有一个 DateInterval 类，可以像这样使用：

```
$date1 = new DateTime('2013-02-25 12:00:00');
$date2 = new DateTime('2013-01-01 12:00:00');

$diff = $date2->diff($date1); // Get DateInterval Object

echo $diff->format('%d Day and %h hours and %i minutes'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T09:24:28.027

您可以使用日期对象来获得更准确。
默认的 var 类型不给出时差。
大多数情况下，当像您那样分配时，它们被视为字符串类型

# android - 安卓。用户访问 SharedPreferences

> ID：15063596
> 
> 赞同：1
> 
> 时间：2013-02-25T09:17:36.150
> 
> 标签：android, sharedpreferences

我想知道用户是否可以访问`SharedPreferences`我存储一些应用程序数据的地方。我打算做一个非常简单的计数器来计算用户在我的应用程序中使用某个功能的次数，如果该值通过某个预定义的值，那么我会阻止对该功能的访问。我不打算使用服务器来跟踪使用我的应用程序的每台设备上的每个此类计数器，但我更愿意将这些数据存储在本地。

`SharedPreferences`问题是用户访问和删除我存储的数据有多容易，从而重置计数器。究竟`SharedPreferences`存储在哪里？容易访问吗？

如果用户确实设法重置计数器并不重要，这不是关键的事情，但我更愿意实施一种简单的方法，至少阻止或让他/她更难这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:21:23.590

SharedPreferences 作为 XML 文件存储在设备中。除非设备已植根，否则用户将无法访问此内容。

# objective-c - 将相机拍摄的图像保存到ios中的文档目录中

> ID：15063608
> 
> 赞同：1
> 
> 时间：2013-02-25T09:18:24.240
> 
> 标签：objective-c, ios6

嗨，我是 iPhone 环境的新手。我正在使用 Xcode 4.5。我现在正在开发相机应用程序。我想将从相机拍摄的图像保存到文档目录中的单独文件夹以及照片库中的自定义相册中。我正在将图像保存到照片库中的自定义相册中，但我不知道如何保存它到文档目录...谁能告诉我该怎么做...？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T09:23:34.737

尝试

```
UIImage *image = [UIImage imageNamed:@"Image.jpg"];
NSString *stringPath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0]stringByAppendingPathComponent:@"New Folder"];
// New Folder is your folder name
NSError *error = nil;
if (![[NSFileManager defaultManager] fileExistsAtPath:stringPath])
    [[NSFileManager defaultManager] createDirectoryAtPath:stringPath withIntermediateDirectories:NO attributes:nil error:&error];

NSString *fileName = [stringPath stringByAppendingFormat:@"/image.jpg"];
NSData *data = UIImageJPEGRepresentation(image, 1.0);
[data writeToFile:fileName atomically:YES]; 
```

# jquery - 如何捕捉不同级别div的悬停？

> ID：15063610
> 
> 赞同：0
> 
> 时间：2013-02-25T09:18:35.270
> 
> 标签：jquery, css, html, hover

我有两个没有嵌套但似乎重叠的 div 元素。

当鼠标进入第二个 div 时，如何捕捉第一个 div 的悬停功能？

（当鼠标在橙色区域时，我希望鼠标也在灰色区域。）

请检查 [http://jsfiddle.net/tZFuX/2/][1]

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:45:00.877

使用纯 CSS，您可以使用[pointer-events](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)，只要您对结果[仅适用于 WebKit 和 Firefox](http://caniuse.com/#feat=pointer-events)感到高兴，并且还从其应用的元素中删除所有鼠标交互性（无点击、文本选择等） .

您可以按以下方式应用它：

```
.div2 {
    pointer-events: none;
} 
```

[http://jsfiddle.net/barney/Mcxf2/](http://jsfiddle.net/barney/Mcxf2/)

因此，将其与脚本解决方案联系起来变得非常容易。对于没有指针事件依赖项的完全脚本化解决方案，您必须将`mousemove`事件绑定到整个文档（或窗口或正文——或您知道将在视觉上包含这两个元素的任何元素），然后测试属性。这是相当昂贵的，因为无论您使用什么代码来测试元素的光标位置，都将在鼠标移动期间连续执行——jQuery 网站提供了一个[关于此的基本教程](http://docs.jquery.com/Tutorials%3aMouse_Position)：

[http://jsfiddle.net/barney/AmQhs/](http://jsfiddle.net/barney/AmQhs/)

代码一定要复杂一些，但你明白了要点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:27:10.443

尝试这个：[**`fiddle`**](http://jsfiddle.net/tZFuX/4/)

```
$('.div1').on({
   mouseenter: function(){
      alert('mouse entered at div1');
   }
});

$('.div2').on({
   mouseenter: function(){
     alert('mouse entered at div2');
     $('.div1').trigger('mouseenter');
   }
}); 
```

## 编辑：[小提琴](http://jsfiddle.net/tZFuX/5/)

警报将以这种方式工作，但您可以使用 addClass 进行试用：

```
 $('.div2').on({
    mouseenter: function () {
       $('.div1').addClass('active');
    }
 });

 $('.div1').on({
    mouseout: function () {
       $(this).removeClass('active');
    }
 }); 
```

# c++ - 输入和存储用户希望的任意长度的字符串

> ID：15063612
> 
> 赞同：1
> 
> 时间：2013-02-25T09:18:41.267
> 
> 标签：c++, string, memory, allocation

**我想做的事：**

将记录存储在文件中。这些记录有两点。

```
time_t rt; //which stores the time the record was entered by the user 
```

除此之外，我还想存储一个字符串。但我不知道字符串的长度。

这将取决于运行时间，并取决于用户输入的字符数。

**需要做什么（根据我）：**

我没有线索。我知道动态内存分配，但不知道如何将其应用于此类问题。

**我试过的：**

我试图一次从用户那里获取一个字符并将其存储在一个文本文件中（临时）。

```
ofstream fileObject;

fileObject.open("temp.txt");

for(int j=0;;j++)
{
  ch = _getche();

if( ch == 13)  break; //user has pressed the return key

  fileObject<<ch;
} 
```

然后我使用以下代码找出文件的大小：

```
fileObject.seekp(0,ios::end);

long pos = fileObject.tellg(); //this is the size of the file 
```

然后我声明了一个文件大小的动态数组。

```
char * entry;

entry = new char[pos] 
```

在“out”模式下关闭文件并在“in”模式下再次打开它。

```
fileObject.close();

ifstream fout;

fout.open("temp.txt"); //this is the name of the text file that i had given 
```

然后字符明智我将文本文件的内容复制到字符数组中：

```
for(int i=0;i<pos;i++)

  fout>>info[i];

info[i] = '\0';

fout.close(); 
```

但现在我不知道该怎么做。

**我需要你帮助我：**

帮助我将此记录作为类对象写入二进制“.dat”文件。

**我的规格：**

视窗 XP SP 3

IDE：Visual C++ 2010 Express

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:20:57.573

使用`std::string`and `std::getline`, 都来自`<string>`标题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:21:13.867

> 我想存储一个字符串。但我不知道字符串的长度。

然后你需要使用[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)而不是预先分配的`char`s 数组。

```
struct user_record
{
    time_t rt; //which stores the time the record was entered by the user
    std::string one_string;
}; 
```

* * *

> 帮助我将此记录作为类对象写入二进制“.dat”文件。

有许多序列化选项可供您使用。也许最简单的方法是使用标准流操作将其写为纯文本：

```
std::ostream& operator <<(std::ostream& os, user_record const& ur)
{
    return os << ur.rt << ' ' << ur.one_string;
}

std::istream& operator >>(std::istream& is, user_record& ur)
{
    return is >> ur.rt >> ur.one_string;
} 
```

对于比单行字符串更多的内容，也许您应该研究[Boost](http://www.boost.org/)的[序列化](http://www.boost.org/doc/libs/release/libs/serialization/doc/index.html)库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T09:21:43.160

如果您使用的是 c++，那么`std::string`最好。

```
std::string abc=""; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T09:42:12.537

对字符串有什么限制？以及如何识别用户在字符串中输入了他想要的所有数据？

如果字符串必须是单行，并且我们可以假设“合理”的长度（即它很容易放入内存中），那么您可以使用`std::getline`将字符串放入 `std::string`（用于输入），然后定义输出格式，说文件。如果用户字符串可以是多行，您必须定义一个协议来输入它们（这样您就可以知道单个记录何时完成），以及文件的更复杂格式：一个建议是通过分隔记录一个空行（这意味着输入不能包含一个空行），或者使用如下行的记录头：。（Subversion 使用它的一个变体作为它的消息。但是，有更多信息，但时间戳和行数都在那里。）`"%Y-%m-%d %H:%M:%S: *user string*\n"``"%Y-%m-%d %H:%M:%S *line_count*\n"``commit`

# c++ - 用 GLM 确定四元数前面的位置？

> ID：15063614
> 
> 赞同：0
> 
> 时间：2013-02-25T09:18:46.680
> 
> 标签：c++, visual-c++, quaternions, glm-math

有没有办法计算四元数（XYZW）旋转前的 XYZ 位置，最好使用[GLM](http://glm.g-truc.net/)？

我知道 Quat 旋转和我想计算前面位置的对象的位置。

我知道如何计算旋转矩阵前面的位置，其中你有一个前向量、上向量和右向量，但在这种情况下，我只有 XYZW 值（其中 W 始终为 0，我从未看到它变为 1.. ?)

简而言之：我拥有的数据：`Quat (X Y Z W)`并且`Position(X Y Z)`我想计算`PositionInFront(Position, Quat, Distance, &X, &Y, &Z)`

如何实现这个目标？

我尝试转换为 3x3matrix 并执行 Up,Right,Front（因为 3x3 矩阵转换是这些值，对吗？）计算，但它们没有返回正确的位置。

或者是否可以确定物体的 Z 角？（仅围绕世界 Z / 高度轴旋转）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:35:32.573

我忘记使用的车辆似乎还有 2 个四元数结构。而这 3 个是 Front,Right,Up 计算公式所需的完整集合：

```
 float offX = 10.0f;
    float offY = 0.0f;
    float offZ = 0.0f;

    float x = offX * info.Rotation.Front.x + offY * info.Rotation.Right.x + offZ * info.Rotation.Up.x + info.Pos.x;
    float y = offX * info.Rotation.Front.y + offY * info.Rotation.Right.y + offZ * info.Rotation.Up.y + info.Pos.y;
    float z = offX * info.Rotation.Front.z + offY * info.Rotation.Right.z + offZ * info.Rotation.Up.z + info.Pos.z;

    float Angle = (atan2(x-info.Pos.x, y-info.Pos.y) * 180.0f / PI); 
```

# winforms - 工作流4等待winforms点击事件

> ID：15063619
> 
> 赞同：0
> 
> 时间：2013-02-25T09:18:59.237
> 
> 标签：winforms, workflow

我目前正在设计一个工作流，它在 winforms 表单上显示用户控件，然后等待用户单击刚刚显示的用户控件上的按钮，以便它可以捕获用户输入的数据。我很难找到活动？（这是正确的词吗？） 等待在项目的按钮上发生单击事件。

有人知道如何做到这一点吗？

谢谢，

# objective-c - 如何在应用委托中访问 TableViewController？

> ID：15063621
> 
> 赞同：0
> 
> 时间：2013-02-25T09:19:09.147
> 
> 标签：objective-c, uisplitviewcontroller, appdelegate

目前，我有一个 SplitViewController 设置。其中 MasterViewController 有一个条形按钮，按下时会弹出一个 UITableViewController。

**我想将 UITableViewController 中的委托连接到 MasterViewController。**根据教程，大多数人在应用程序委托中执行此操作。

这是我在应用程序委托中的代码。我还没有添加 TableViewController 类。

```
UISplitViewController *splitViewController = (UISplitViewController *) self.window.rootViewController; 

splitViewController.delegate = [splitViewController.viewControllers lastObject];

DetailViewController *detailViewController =(DetailViewController *) [splitViewController.viewControllers lastObject];

MasterViewController *masterViewController = (MasterViewController *) [[splitViewController.viewControllers objectAtIndex:0] topViewController];

masterViewController.delegate = detailViewController; 
detailViewController.delegate = masterViewController; 
```

# functional-programming - SML/NJ - “有趣的行为（f，x）= f（x）；” 签名

> ID：15063622
> 
> 赞同：0
> 
> 时间：2013-02-25T09:19:11.953
> 
> 标签：functional-programming, smlnj

声明跟随功能 -

```
fun act(f,x) = f(x); 
```

制作签名 -

```
val act = fn : ('a -> 'b) * 'a -> 'b 
```

是什么`('a -> 'b) * 'a -> 'b`意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:36:30.390

这意味着这`act`是一个需要一对（2元组）的函数

```
('a -> 'b) * 'a 
```

其中第一个元素是 from `'a`to的函数`'b`，第二个是类型的东西`'a`。
它返回一个类型的东西`'b`。

# c# - 安排任务每天在特定时间刷新 HttpContext.Cache

> ID：15063624
> 
> 赞同：10
> 
> 时间：2013-02-25T09:19:19.983
> 
> 标签：c#, asp.net-mvc-3, caching, scheduled-tasks, httpcontext.cache

我有一个 MVC 3 c# 网站正在运行，它从 web 服务中提取记录。随着它从网络服务获得的数据集变得越来越大，我正在寻找一种方法，在没有当前缓存的情况下，第一个访问该站点的用户不会触发创建它的缓存，而是按每日计划（如 cron 作业、计划任务或其他东西）。

我该怎么做？我需要像[Quartz.net](http://quartznet.sourceforge.net/)这样的触发器库吗？（我宁愿使用更简单的解决方案）

我现在控制器中的内容是：

```
private List<DataSummary> GetSummaries()
    {
        //get summaries from cache if available
        List<DataSummary> summaries = (List<DataSummary>)HttpContext.Cache["SummariesCache"];
        if (summaries == null)
        {
            //cache empty, retrieve values
            summaries = _webservice.GetSummaries();
            //cache it
            HttpContext.Cache.Add("SummariesCache", summaries, null, DateTime.Now.AddHours(12), Cache.NoSlidingExpiration, CacheItemPriority.Normal, null);
        }
        return summaries;

    } 
```

**编辑**

使用`CacheItemRemovedCallback`导致超时错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:29:17.037

这是一个有点笨拙的解决方案，但您始终可以在运行可执行文件的服务器上创建计划任务。此可执行文件会访问您网站上的特定 URL，而该 URL 又会完全按照您在上面概述的方式填充缓存。要点击可执行文件中的 URL，您需要以下内容：

```
var req = (HttpWebRequest)WebRequest.Create(URL);
req.Timeout = 30000;        
req.KeepAlive = false;
req.Method = "GET";
var res = (HttpWebResponse)req.GetResponse();
if (res.StatusCode == HttpStatusCode.OK){
    // Your cache should be refreshed
} 
```

创建计划任务也非常简单 - 只需确保您在对您创建的 exe 具有执行权限的用户帐户中运行它，并且不需要用户登录即可启动任务。

*编辑：添加了在 Windows Server 2008 上设置计划任务的指南*

1.  打开开始菜单。
2.  在搜索框中键入“任务计划程序”（在旧版本的 Windows 中，我相信这是在管理工具中作为“计划任务”找到的）。打开任务计划程序结果。
3.  右键单击左侧树的根节点-“任务计划程序（本地）”-并选择“创建基本任务”。
4.  为任务命名和描述，以便您以后识别它。点击下一步。
5.  选择您的持续时间（在您的情况下，每天的声音大约是正确的）。点击下一步。
6.  如果您愿意，可以更改开始时间。点击下一步。
7.  将操作保留为“启动程序”。点击下一步。
8.  单击“浏览...”并找到您创建的可执行文件。点击下一步。
9.  在最后一个屏幕上，勾选“打开属性对话框...”框，然后完成。
10.  将安全选项更改为“无论用户是否登录都运行”。如有必要，将用户或组更改为适当的用户帐户（具有运行 exe 所需权限的用户帐户）。
11.  单击确定。系统将要求您输入将运行任务的帐户密码。执行此操作并单击确定。
12.  单击左侧的任务计划程序库。您的任务应该出现在右侧的列表中。您可以通过右键单击并选择运行来测试它。

# node.js - node.js中如何实现ajax实现部分回发

> ID：15063631
> 
> 赞同：0
> 
> 时间：2013-02-25T09:19:36.160
> 
> 标签：node.js, mongodb, node.js, mongodb, express, mongoose, npm

我正在使用[node.js](/questions/tagged/node.js "显示标记为“node.js”的问题")（express 框架和 hbs 引擎）和[mongodb](/questions/tagged/mongodb "显示标记为“mongodb”的问题")来开发应用程序。

我想实现对页面的 ajax 调用以进行部分回发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:44:25.497

[正如其他人在评论中提到的那样， Ajax 中描述了使用 express 和 JQuery 刷新部分视图](https://stackoverflow.com/questions/6317219/ajax-to-refresh-a-partial-view-using-express-and-jquery?rq=1)的最佳方法？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T09:12:12.330

**>**将你的 URL 和参数传递给这个函数：它工作正常....* ***

function ajaxRequest(url, succesCallBck, completeCallBck, errorCallBck)
{ $.ajax({
url: url,
type: "POST",
dataType: "json",
complete: completeCallBck,
success: succesCallBck,
error: errorCallBck
}); }

# java - java.sql.SQLException：不正确的字符串值：'\xAC\xED\x00\x05sr...'

> ID：15063635
> 
> 赞同：4
> 
> 时间：2013-02-25T09:19:56.097
> 
> 标签：java, mysql, jpa, sqlexception

我的代码看起来像这样：

```
 @Column(name = COLUMN_DESCRIPTION, columnDefinition = "LONGTEXT")
private Map<Locale, String> description = new HashMap<>(); 
```

在尝试向列添加内容后，我得到了

```
java.sql.SQLException: Incorrect string value: '\xAC\xED\x00\x05sr...' for column 'description' at row 1 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:23:34.453

当然这是一个 MYSQL 错误...更多可以在[http://bugs.mysql.com/bug.php?id=59456看到](http://bugs.mysql.com/bug.php?id=59456)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:46:38.960

我已经解决了，所以在这里，也许有人觉得它有用：

我试图`columnDefinition = "LONGTEXT"`在错误的地方使用。只有对 table 的引用`ProductLocalization`，其中存储了多语言描述。当我使用

```
@ManyToOne
@JoinColumn(name = AbstractLocalizingEntity.COLUMN_RELATED_ENTITY, nullable = false)
private Product entity;

@Column(name = Product.COLUMN_DESCRIPTION, columnDefinition = "LONGTEXT")
private String description; 
```

在`ProductLocalization`课堂上它开始工作正常。感谢你的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-09T21:54:17.907

这不是必须的错误。您可以尝试将此对象存储为 blob。这是例如mysql中的一种数据类型

# ios - 如何在 iOS 上制作垂直滚动视图？

> ID：15063636
> 
> 赞同：19
> 
> 时间：2013-02-25T09:20:01.767
> 
> 标签：ios, uiscrollview, vertical-scrolling

有人可以指导我学习如何在我的 iOS 应用程序上实现垂直滚动视图的教程吗？

我不敢相信过去 2 天，我在垂直滚动视图上找不到一个工作示例。所有的教程都是关于水平滚动、缩放等。

我正在寻找的内容类似于本教程[http://www.edumobile.org/iphone/iphone-programming-tutorials/scrollview-example-in-iphone-2/](http://www.edumobile.org/iphone/iphone-programming-tutorials/scrollview-example-in-iphone-2/)，它展示了如何制作 uiscrollView 和添加对象到它，从 Builder 而不是以编程方式。我发现的唯一缺陷是，当试图在滚动区域中向下添加地图时，地图会出现在我放置的位置而不是在我放置的位置。也许对此也有任何想法？

有什么想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-25T09:59:45.927

所以你想在 xib 中创建一个滚动视图。

1.  向 nib 文件添加滚动视图
2.  将其大小设置为您想要的任何大小

    ![在此处输入图像描述](../Images/ca306a21afb42926f3256e0279ea8cd0.png)

3.  添加您的控件（按钮，标签..）

    ![在此处输入图像描述](../Images/41d3c53ebdff7817182333837484e86b.png)

4.  将其添加为主视图的子视图

    ![在此处输入图像描述](../Images/ba7b9ebcfcc56cd054be1cd621fdbb12.png)

5.  最后创建滚动视图的属性并`viewDidLoad`设置滚动视图的内容大小

    ```
     self.scrollView.contentSize =CGSizeMake(320, 700); 
    ```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-25T09:34:57.100

它很简单，与水平滚动视图相同。在视图层次结构中添加滚动视图，

```
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
[self.view addSubview:scrollView]; 
```

现在要使滚动视图可滚动，请将其滚动视图内容大小设置为大于其边界。

```
[scrollView setContentSize:CGSizeMake(scrollView.bounds.size.width, scrollView.bounds.size.height*3)]; 
```

现在它可以滚动三倍于scrollView的高度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-11T02:25:49.223

我已经为这个简单的问题苦苦挣扎了一整天。更复杂的方法很可能有好处，但取消选中自动布局解决了我的问题。

对于快速修复，我相信这是最好的方法，并且会为您省去一个巨大的头痛。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T09:31:09.153

只需更改滚动视图的内容大小。假设您正在使用以下框架创建 UIScrollView

```
scl=[[UIScrollView  alloc]initWithFrame:CGRectMake(0, 0, 620, 172)]; 
```

现在调用滚动视图的内容大小属性，如下所示。

```
[scl setContentSize:CGSizeMake(700, 172)]; 
```

现在在视图/视图控制器等上添加滚动视图并检查它。

# solr - Solr 中消失的核心

> ID：15063641
> 
> 赞同：1
> 
> 时间：2013-02-25T09:20:09.950
> 
> 标签：solr

我是 Solr 的新手。

我从管理页面创建了两个核心，我们称它们为“书籍”和“图书馆”，并在那里导入了一些数据。在我重新启动服务器之前，一切正常。当我这样做时，其中一个核心消失了，管理页面中的日志记录屏幕包含：

```
SEVERE  CoreContainer  null:java.lang.NoClassDefFoundError: net/arnx/jsonic/JSONException
SEVERE  SolrCore       REFCOUNT ERROR: unreferenced org.apache.solr.core.SolrCore@454055ac (papers) has a reference count of 1 
```

我正在管理界面中测试我的查询；当我刷新它时，“库”核心消失了，尽管我通常可以提前一分钟查询它。solr.xml 的内容是完整的。即使我重新启动 Tomcat，它仍然消失。

此外，我试图构建一个类似于此的查询：“在亚特兰大或纽约的图书馆中查找与‘战争和平’相匹配的书籍”。所以给定核心“书籍”和“图书馆”，我会发出“书籍”以下查询（这可能是错误的，如果是请纠正我）：

```
(title:(war peace) blurb:(war peace))
AND _query_:"{!join
fromIndex=libraries from=libraryid to=libraryid
v='city:(new york) city:(atlanta)'}" 
```

当我这样做时，查询失败，“库”核心消失，出现上述症状。如果我重新添加它，我可以继续工作（只要我不重新启动服务器或发出另一个联接查询）。

我正在使用 Solr 4.0；如果有人知道发生了什么，我将不胜感激。我无法找到有关错误消息含义的任何信息，所以如果有人能建议在哪里寻找它，或者如何调试它，那就太好了。我什至找不到日志文件本身的位置......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:13:05.960

我会避免使用可能配置错误和古怪的 Debian 软件包。它包含（一个非常早期的版本？）solr 4.0，它本身可能有挥之不去的问题；是新主要版本的第一个版本。包维护者可能没有将最新和最安全的 Solr 版本合并到他的包中。

更好的方法是自己下载 Solr 4.1 并使用[Tomcat](http://wiki.apache.org/solr/SolrTomcat)或其他 servlet 容器自行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T19:48:03.877

如果您希望安装 SOLR 4.0 并进行配置，您可以按照[此处的安装过程进行操作](http://www.installationpage.com/solr/solr-installation-with-tomcat-guide/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-05T15:25:58.430

更新 solr 配置以使核心持久化。

在您的 solr.xml 中，更新`<solr>`或`<solr persistent="false">``<solr persistent="true">`

# hadoop - Mahout 集群崩溃

> ID：15063644
> 
> 赞同：0
> 
> 时间：2013-02-25T09:20:22.223
> 
> 标签：hadoop, mahout

在某些机器上运行 KMeans 时出现以下错误：

```
java.io.FileNotFoundException: File file:/home/daniel/Aimee/agent/big-data/mahout-clusters/target/output/clusters-0-final/_policy does not exist.
at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:371) ~[hadoop-core-0.20.204.0.jar:na]
at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:245) ~[hadoop-core-0.20.204.0.jar:na]
at org.apache.hadoop.fs.FileSystem.getLength(FileSystem.java:720) ~[hadoop-core-0.20.204.0.jar:na]
at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:1417) ~[hadoop-core-0.20.204.0.jar:na]
at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:1412) ~[hadoop-core-0.20.204.0.jar:na]
at org.apache.mahout.clustering.classify.ClusterClassifier.readPolicy(ClusterClassifier.java:223) ~[mahout-core-0.7.jar:0.7]
at org.apache.mahout.clustering.classify.ClusterClassificationMapper.setup(ClusterClassificationMapper.java:75) ~[mahout-core-0.7.jar:0.7]
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142) ~[hadoop-core-0.20.204.0.jar:na]
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764) ~[hadoop-core-0.20.204.0.jar:na]
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370) ~[hadoop-core-0.20.204.0.jar:na]
at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212) ~[hadoop-core-0.20.204.0.jar:na] 
```

似乎由于某种原因没有生成某个文件。我试图用谷歌搜索，但网络上没有关于此类问题的任何记录。我使用 mahout-core 0.7，它使用 hadoop-core 0.20.204.0。感谢您提供任何线索，这个问题正在浪费我的时间...... :-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:20:00.097

好的，这花了我一些时间来解决这个问题，所以我把这个答案留给任何可能遇到这个问题的人。原因是因为我使用 canopy 来计算 KMeans 的第一个中心，并且 canopy 没有配置 runClustering=true 它没有生成 _policy 文件。但是，这种行为是不一致的。在某些机器上，无论 runClustering 值如何，都会生成文件。

# jquery - jquery 表单克隆

> ID：15063645
> 
> 赞同：0
> 
> 时间：2013-02-25T09:20:25.250
> 
> 标签：jquery, forms, cloning

大家好，我试过克隆一个表格，效果很好。I a dropdownlist in the all the rows in the form and when one of the option is selected i have to create small box appearing right after the current row. 我也这样做了，但真正的问题是，当我添加一个新行（即克隆）然后我在我的情况下选择一个选项（即资产）时，我的小框看起来很好，但之后如果我点击ADD ROW 没有添加新行。这是我的代码和工作演示：

[http://jsfiddle.net/kkAM6/](http://jsfiddle.net/kkAM6/) 帮助将不胜感激

```
<table id="expense_table" class="">
    <thead>
        <tr>
            <th>Sl. No</th>
            <th>Particulars</th>
            <th>Type</th>
            <th>Qty</th>
            <th>Rate</th>
            <th>Amount</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        <tr id="row_1">
            <td>1</td>
            <td>
                <input type="text" name="particulars" />
            </td>
            <td>
                <select id="expense_type" name="expense_type" class="exp_type span2">
                    <option value="">---Select---</option>
                    <option value="asset">Asset</option>
                    <option value="non_asset">Non Asset</option>
                </select>
            </td>
            <td>
                <input type="text" name="qty" class="input-small" />
            </td>
            <td>
                <input type="text" name="rate" class="input-small" />
            </td>
            <td>
                <input type="text" name="amount" class="input-small" />
            </td>
            <td>X</td>
        </tr>
        <tr id="row_2">
            <td>2</td>
            <td>
                <input type="text" name="particulars" />
            </td>
            <td>
                <select id="expense_type" name="expense_type" class="exp_type span2">
                    <option value="">---Select---</option>
                    <option value="asset">Asset</option>
                    <option value="non_asset">Non Asset</option>
                </select>
            </td>
            <td>
                <input type="text" name="qty" class="input-small" />
            </td>
            <td>
                <input type="text" name="rate" class="input-small" />
            </td>
            <td>
                <input type="text" name="amount" class="input-small" />
            </td>
            <td>X</td>
        </tr>
        <tr id="row_3">
            <td>3</td>
            <td>
                <input type="text" name="particulars" />
            </td>
            <td>
                <select id="expense_type" name="expense_type" class="exp_type span2">
                    <option value="">---Select---</option>
                    <option value="asset">Asset</option>
                    <option value="non_asset">Non Asset</option>
                </select>
            </td>
            <td>
                <input type="text" name="qty" class="input-small" />
            </td>
            <td>
                <input type="text" name="rate" class="input-small" />
            </td>
            <td>
                <input type="text" name="amount" class="input-small" />
            </td>
            <td>X</td>
        </tr>
    </tbody>
</table>
</div> <span id="add">Add Row</span> 
```

jquery代码是：

```
 $('#add').click(function(){

                    var last_row_id = $('#expense_table tr:last').attr('id').split('_')[1];
                    //alert(last_row_id);
                    $('tr[id="row_1"]').clone().insertAfter('#expense_table tr:last');
                    $('#expense_table tr:last').attr('id','row_'+(parseInt(last_row_id) + 1));

            });// end of #add click event

            var $in = new Array();
            $('.exp_type').live('change',function(){
                var id = $(this).closest('tr').attr('id').split('_')[1];

                if($(this).val() == 'asset'){

                    var div = "<tr id=\"asset_"+id+"\"><td colspan=\"7\"><td></tr>"; 
                    $('#row_'+id).after(div);
                    var $box = $('<div/>').attr('class','asset_details');

                    $in[0] = "<tr><td><label>Assest Type:</label></td><td><select name=\"asset_type\" id=\"asset_type\"><option value=\"\">---Select---</option></select></td></tr>";
                    $in[1] = "<tr><td><label>Name:</label></td><td><input type=\"text\" id=\"name\" name=\"name\"/></td></tr>";
                    $in[2] = "<tr><td><label>Description:</label></td><td><input type=\"text\" id=\"asset_description\" name=\"asset_description\" /></td></tr>";
                    $in[3] = "<tr><td><label>Serial No:</label></td><td><input type=\"text\" id=\"asset_serial_num\" name=\"asset_serial_num\" /></td></tr>";

                    $('#asset_'+id).find('td:first').append($box);
                    $box.append($in);

                } else {

                    $('#asset_'+id).fadeOut(500, function() { $('#asset_'+id).remove(); });
                }

            });//end of #expense_type 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:12:23.087

当您将资产添加到表的最后一行时，`$('#expense_table tr:last')`没有 id。最后一个`tr`是你的`#asset_x`，而不是它`#asset_x`本身。

Try adding `class` to your rows, for example `class='input-row'` for standard row (so you can follow the number of rows for naming ids, and `class='table-row'` for every row including ASSET rows, so you can add a row after the last one.

Here's a fiddle: [http://jsfiddle.net/kkAM6/](http://jsfiddle.net/kkAM6/)

Here's HTML amended:

```
<table id="expense_table" class="">
        <thead>
            <tr>
            <th>Sl. No</th>
            <th>Particulars</th>
            <th>Type</th>
            <th>Qty</th>
            <th>Rate</th>
            <th>Amount</th>
            <th>Action</th>
        </tr>
        </thead>

    <tbody>
        <tr id="row_1" class="input-row table-row">
            <td>1</td>
            <td><input type="text" name="particulars" /></td>
            <td>
                <select id="expense_type" name="expense_type" class="exp_type span2">
                    <option value="">---Select---</option>
                    <option value="asset">Asset</option>
                    <option value="non_asset">Non Asset</option>
                </select>
            </td>
            <td><input type="text" name="qty" class="input-small" /></td>
            <td><input type="text" name="rate" class="input-small"  /></td>
            <td><input type="text" name="amount" class="input-small"  /></td>
            <td>X</td>
        </tr>
        <tr id="row_2" class="input-row table-row">
            <td>2</td>
            <td><input type="text" name="particulars" /></td>
            <td>
                <select id="expense_type" name="expense_type" class="exp_type span2">
                    <option value="">---Select---</option>
                    <option value="asset">Asset</option>
                    <option value="non_asset">Non Asset</option>
                </select>
            </td>
            <td><input type="text" name="qty" class="input-small" /></td>
            <td><input type="text" name="rate" class="input-small"  /></td>
            <td><input type="text" name="amount" class="input-small"  /></td>
            <td>X</td>
        </tr>

        <tr id="row_3" class="input-row table-row">
            <td>3</td>
            <td><input type="text" name="particulars" /></td>
            <td>
                <select id="expense_type" name="expense_type" class="exp_type span2">
                    <option value="">---Select---</option>
                    <option value="asset">Asset</option>
                    <option value="non_asset">Non Asset</option>
                </select>
            </td>
            <td><input type="text" name="qty" class="input-small" /></td>
            <td><input type="text" name="rate" class="input-small"  /></td>
            <td><input type="text" name="amount" class="input-small"  /></td>
            <td>X</td>
        </tr>
    </tbody>
    </table>
</div>
<span id="add">Add Row</span> 
```

Here's JS amended:

```
 $('#add').click(function(){

                var last_row_id = $('#expense_table .input-row:last').attr('id').split('_')[1];
                console.log(last_row_id);
                $('tr[id="row_1"]').clone().insertAfter('#expense_table .table-row:last');
                $('#expense_table tr:last').attr('id','row_'+(parseInt(last_row_id) + 1)).addClass('input-row table-row');

        });// end of #add click event

        var $in = new Array();
        $('.exp_type').live('change',function(){
            var id = $(this).closest('tr').attr('id').split('_')[1];

            if($(this).val() == 'asset'){

                var div = "<tr class=\"table-row\" id=\"asset_"+id+"\"><td colspan=\"7\"><td></tr>"; 
                $('#row_'+id).after(div);
                var $box = $('<div/>').attr('class','asset_details');

                $in[0] = "<tr><td><label>Assest Type:</label></td><td><select name=\"asset_type\" id=\"asset_type\"><option value=\"\">---Select---</option></select></td></tr>";
                $in[1] = "<tr><td><label>Name:</label></td><td><input type=\"text\" id=\"name\" name=\"name\"/></td></tr>";
                $in[2] = "<tr><td><label>Description:</label></td><td><input type=\"text\" id=\"asset_description\" name=\"asset_description\" /></td></tr>";
                $in[3] = "<tr><td><label>Serial No:</label></td><td><input type=\"text\" id=\"asset_serial_num\" name=\"asset_serial_num\" /></td></tr>";

                $('#asset_'+id).find('td:first').append($box);
                $box.append($in);

            } else {

                $('#asset_'+id).fadeOut(500, function() { $('#asset_'+id).remove(); });
            }

        });//end of #expense_type 
```

# wso2 - 错误 {org.apache.synapse.mediators.transform.XSLTMediator} - 无法执行 XSLT 转换

> ID：15063647
> 
> 赞同：1
> 
> 时间：2013-02-25T09:20:37.797
> 
> 标签：wso2, wso2esb

我正在尝试执行此[url](http://wso2.org/library/articles/2011/04/integrate-rules-soa)中提供的示例，但我从 xslt 收到错误消息：

```
TID: [0] [ESB] [2013-02-25 13:08:55,280] 
ERROR {org.apache.synapse.mediators.transform.XSLTMediator} -  Unable to perform XSLT transformation using : Value {name ='null', keyValue ='conf:/repository/synapse/default/local-entries/CustomerOrderInputTransfer.xslt'} 
against source XPath : s11:Body/child::*[position()=1] | s12:Body/child::*[position()=1] {org.apache.synapse.mediators.transform.XSLTMediator}

org.apache.synapse.SynapseException: Error creating XSLT transformer using : Value {name ='null', keyValue ='conf:/repository/synapse/default/local-entries/CustomerOrderInputTransfer.xslt'}
    at org.apache.synapse.mediators.AbstractMediator.handleException(AbstractMediator.java:293)
    at org.apache.synapse.mediators.transform.XSLTMediator.createTemplate(XSLTMediator.java:389)
    at org.apache.synapse.mediators.transform.XSLTMediator.performXSLT(XSLTMediator.java:232)
    at org.apache.synapse.mediators.transform.XSLTMediator.mediate(XSLTMediator.java:191)
    at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:60)
    at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMediator.java:114)
    at org.apache.synapse.core.axis2.ProxyServiceMessageReceiver.receive(ProxyServiceMessageReceiver.java:144)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.synapse.transport.nhttp.ServerWorker.processEntityEnclosingMethod(ServerWorker.java:416)
    at org.apache.synapse.transport.nhttp.ServerWorker.run(ServerWorker.java:268)
    at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.synapse.SynapseException: Cannot convert null to a StreamSource
    at org.apache.synapse.config.SynapseConfigUtils.handleException(SynapseConfigUtils.java:576)
    at org.apache.synapse.config.SynapseConfigUtils.getStreamSource(SynapseConfigUtils.java:77)
    at org.apache.synapse.mediators.transform.XSLTMediator.createTemplate(XSLTMediator.java:379)
    ... 13 more
TID: [0] [ESB] [2013-02-25 13:08:55,282]  WARN {org.apache.synapse.core.axis2.ProxyServiceMessageReceiver} -  Exception encountered but no fault handler found - message dropped {org.apache.synapse.core.axis2.ProxyServiceMessageReceiver} 
```

我对如何纠正这个错误一无所知。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:02:46.960

您收到的 WARN 消息意味着您的 xslt 中介**无法**在 'conf:/repository/synapse/default/local-entries/CustomerOrderInputTransfer.xslt' 位置找到文件。如果您从本地条目文件夹访问它，您可以尝试仅指定`CustomerOrderInputTransfer.xslt`为键属性。

# sql - SQL Server 查询：如何将一个 SELECT 与另一个 SELECT 相加？

> ID：15063648
> 
> 赞同：0
> 
> 时间：2013-02-25T09:20:38.987
> 
> 标签：sql, sql-server-2008

我的 SQL Server 查询有问题，希望您能帮助我

主选必须输出日期和重量总和

如何将一个选择与另一个选择相加？数据取自一张表`Tbreport`，条件是 - 将具体日期和前一个日期的权重相加（具体日期减去 1 天）

例如：

```
CONCRETE DATE  WEIGHT 
  Jan 1         100                 
  Jan 2         150         
  Jan 3         210         

PREVIOUS DATE   WEIGHT 
  Jan 1          100 
  Jan 2          250 (Jan 1 + Jan 2)
  Jan 3          460 (Jan 1 + Jan 2 + Jan 3) 
```

在真实表格中，我有几秒钟的格式。例如：1358892000 秒是 2013 年 1 月 23 日 0:00:00，1358978400 是 2013 年 1 月 23 日 23:59:00。而且每次都是自己的重量

询问：

```
SELECT CONVERT(varchar, DATEADD(s, TBreport.date, 25568), 102)  AS DATE,
    SUM(TBreport.weight) 
+ 
(
SELECT SUM(TBreport.weight) AS WEIGHT 
FROM         TBreport INNER JOIN TBway ON TBreport.id_way = TBway.id 
WHERE     (SUBSTRING(TBway.name, 5, 8) LIKE 'to warehouse')  
AND ... ???
GROUP BY CONVERT(varchar, DATEADD(s, TBreport.date, 25568), 102)  
)  
FROM         TBreport INNER JOIN TBway ON TBreport.id_way = TBway.id 
WHERE     (SUBSTRING(TBway.name, 5, 8) LIKE 'to warehouse')  
GROUP BY CONVERT(varchar, DATEADD(s, TBreport.date, 25568), 102) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:27:14.260

我假设`date`是独一无二的`TBreport`

```
SELECT this.date, SUM(upToThis.weight)
FROM TBreport this
INNER JOIN TBreport upToThis ON upToThis.date <= this.date
GROUP BY this.date 
```

# .net - .net 1.1 的验证码控制

> ID：15063650
> 
> 赞同：0
> 
> 时间：2013-02-25T09:20:51.750
> 
> 标签：.net, captcha, asp.net-1.1

请任何人都可以为 .net 1.1 中的验证码提出好的免费解决方案，

请不要将我指向 google ，要求您检查和测试解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:30:31.933

这是我使用的（它独立于服务器端技术）。

[http://www.google.com/recaptcha/captcha](http://www.google.com/recaptcha/captcha)

# jquery - 如何对 html 元素使用 Load 方法？

> ID：15063651
> 
> 赞同：0
> 
> 时间：2013-02-25T09:20:54.690
> 
> 标签：jquery, asp.net-mvc

我有一个如下所示的下拉列表，其中仅显示用户名及其值的列表：

```
@Html.DropDownListFor(m => m.SelectedUser,
                                  Model.UsersSelectList,
                                  "-- Select One --",
                                  new { onChange = "users_onchange();" }) 
```

并且 javascript 如下，当项目更改时会调用一个动作：

```
 function users_onchange() {

        var selectedUserId = $('#SelectedUser').val();

        if (selectedUserId == "") {
            selectedUserId = 0;
        }

        $('#EmailAccountsContainer')
            .load('/MyEntityController/EmailAccounts', { userId: selectedUserId });
   } 
```

而 EmailAccountsContainer 只是一个 div：

```
<div id="EmailAccountsContainer"></div> 
```

并且 EmailAccounts Action 接受 userId 并返回显示另一个下拉列表的部分视图。

问题是对 Action 的调用仅在第一次更改用户下拉列表后发生。如果选择了第二个用户，则不会调用该操作。

我也拒绝了控制器上的缓存：

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
public class MyEntityController : Controller 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:25:28.667

使用带有 Body 标签**[的 on Event](http://api.jquery.com/on/)**绑定您的 onchange 事件

```
$(document).ready(function(){

$('body').on('change', '#SelectedUser', function(){
  var selectedUserId =$(this).val();
   if (selectedUserId == "") {
        selectedUserId = 0;
    }
   $('#EmailAccountsContainer')
        .load('/MyEntityController/EmailAccounts', { userId: selectedUserId });
 });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:27:35.240

问题是响应缓存在您的浏览器中。

请参阅此以了解如何使用 Jquery 解决此问题：

[停止缓存 jQuery .load 响应](https://stackoverflow.com/questions/168963/stop-jquery-load-response-from-being-cached)

# ruby-on-rails - 如何简化这种方法？

> ID：15063652
> 
> 赞同：0
> 
> 时间：2013-02-25T09:20:56.020
> 
> 标签：ruby-on-rails

在reports.rb 中，我有：

```
has_and_belongs_to_many :elements 
```

在 elements.rb 中，我有：

```
has_and_belongs_to_many :reports 
```

以下方法有效，但似乎比应有的更长：

```
@elements = []
Element.all.each do |element|
  @elements << element if element.reports.empty?
end 
```

我尝试了以下方法，但它不起作用，因为没有报告列：

```
@element = Element.where(reports.empty?) 
```

不幸的是，我尝试在 Rails API 参考中使用的所有词——find 等——都太通用了，以至于我找不到一种可以按照这种方式工作的方法，你可以看到我什么时候`where`工作。有吗？还是有其他方法可以简化此方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:29:35.057

我可以想到一种以低级方式执行此操作的方法。

```
Element
  .joins("LEFT OUTER JOIN element_reports")
  .group("elements.id")
  .having("element_reports.id IS NULL") 
```

这至少将过滤的责任推给了数据库，而不是获取所有记录。这应该是一场胜利，特别是如果有很多记录，或者如果它们特别胖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:59:41.573

答案竟然是：

```
@elements = Element.all.keep_if {|e| e.reports.empty?} 
```

# javascript - 如何使用d3js强制布局生成graphviz dot生成的默认分层布局

> ID：15063654
> 
> 赞同：0
> 
> 时间：2013-02-25T09:21:06.483
> 
> 标签：javascript, d3.js, graphviz

而不是示例中显示的示例弹簧布局 [http://bl.ocks.org/mbostock/4062045](http://bl.ocks.org/mbostock/4062045) 我想让 d3js 打印类似： [http ://www.graphviz.org/content/profile](http://www.graphviz.org/content/profile)

我是 javascript 或任何类型的网络编程的新手。一个简单的代码示例，它生成一个包含三个节点和两个连接的图形来打印

一个
|
乙
|
C

真的会有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:23:32.707

如果您使用力方向，那么您的“树状”结构肯定会破裂。如果您需要的是有向无环图，那么您最好增加一棵树。

检查树 [http://mbostock.github.com/d3/talk/20111018/tree.html的示例](http://mbostock.github.com/d3/talk/20111018/tree.html)

和圈子集群： http: [//mbostock.github.com/d3/talk/20111018/cluster.html](http://mbostock.github.com/d3/talk/20111018/cluster.html)

您在图表下方有代码。

# qt - QMainWindow 中的分辨率处理

> ID：15063656
> 
> 赞同：0
> 
> 时间：2013-02-25T09:21:13.960
> 
> 标签：qt, screen-resolution, qmainwindow

我有一个`QMainWwindow`，我已经固定了它的大小。

即我已将窗口的最小和最大大小设置为相同的数字。

如果我要在另一个分辨率不同的屏幕上使用它，谁能告诉我这是否会成为问题，如果是，我该如何处理？

请告知，如果有另一种方式（也许更优雅）来设置`QMainWindow`.

***更新 ：***

我有一个`QMainWindow`with a`QTableView`作为小部件，等等。当我展开主窗口时，tableview 没有，它留下了一个难看的空白空间，所以我固定了大小。

如果要使其可调整大小，如何扩展`QTableView`小部件以及`QMainWindow`. 我有一个中央小部件，这个小部件有一个垂直框布局，我在这个布局中添加了 3 个小部件，一个带有`QGridlayout`，一个水平线，另一个`QTableView`。QTableView 本身并不在布局内。

我想这也足以扩展表格，一旦`QMainWindow`扩大或缩小，但它不会发生。

我该怎么做，即，扩大`QTableView`以及？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:02:09.467

如果您将尺寸固定为大于屏幕可以处理的尺寸，那将是一个问题。有多种方法可以根据屏幕大小缩放窗口大小。我建议使用`QApplication::desktop()`，它将返回桌面小部件（您可能需要`#include <QDesktopWidget>`。请注意，此小部件实际上可以包含多个屏幕，因此如果您只想要当前屏幕，您可以这样做：

```
QRect screenGeometry = QApplication::desktop()->screenGeometry(); 
```

您也可以使用`QDesktopWidget::availableGeometry()`.

值得一提的是，在 Qt 用户中，我认为普遍不喜欢固定大小的窗口。大多数人建议充分利用 Qt 布局系统，它为调整窗口大小提供了很大的灵活性。我并不是说你绝对应该这样做，因为所有项目都是不同的，但它可能值得研究。

# java - java.sql.SQLException: ORA-12505, TNS:listener 目前不知道连接描述符中给出的 SID

> ID：15063657
> 
> 赞同：1
> 
> 时间：2013-02-25T09:21:23.303
> 
> 标签：java, hibernate, jdbc, oracle11g

我试图在我的应用程序中通过休眠连接到 oracle 11g XE。当我在 tomcat(7.0) 中部署应用程序时，我收到以下消息。

> java.sql.SQLException：侦听器拒绝连接并出现以下错误：ORA-12505，TNS：侦听器当前不知道连接描述符中给出的 SID

当我运行应用程序并通过 UI 调用对 Dao 类的请求时，我得到以下异常消息。

> org.springframework.jdbc.support.MetaDataAccessException：无法获取用于提取元数据的连接；嵌套异常是 org.springframework.jdbc.CannotGetJdbcConnectionException: 无法获取 JDBC 连接；嵌套异常是 java.sql.SQLException：侦听器拒绝连接并出现以下错误：ORA-12505，TNS：侦听器当前不知道连接描述符中给出的 SID

我的数据库属性文件是

```
jdbc.driverClassName=oracle.jdbc.driver.OracleDriver 
jdbc.url=jdbc:oracle:thin:@localhost:1522:XE
jdbc.username=system
jdbc.password=oracle 
```

我已经安装了 oracle11g XE，这些是我的 tnanames.ora 和 listener.ora 文件。我应该在哪里进行更改。

监听器.ora

```
SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PLSExtProc)
      (ORACLE_HOME = D:\oracleXE\app\oracle\product\11.2.0\server)
      (PROGRAM = extproc)
    )
    (SID_DESC =
      (SID_NAME = CLRExtProc)
      (ORACLE_HOME = D:\oracleXE\app\oracle\product\11.2.0\server)
      (PROGRAM = extproc)
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
      (ADDRESS = (PROTOCOL = TCP)(HOST = SIPLDT0019-PC)(PORT = 1522))
    )
  )

DEFAULT_SERVICE_LISTENER = (XE) 
```

tnsnames.ora

```
XE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = SIPLDT0019-PC)(PORT = 1522))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = XE)
    )
  )

EXTPROC_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
    )
    (CONNECT_DATA =
      (SID = PLSExtProc)
      (PRESENTATION = RO)
    )
  )

ORACLR_CONNECTION_DATA = 
  (DESCRIPTION = 
    (ADDRESS_LIST = 
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1)) 
    ) 
    (CONNECT_DATA = 
      (SID = CLRExtProc) 
      (PRESENTATION = RO) 
    ) 
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:31:10.190

SID 是“您的 DDBB 的唯一名称”。

您必须在连接 url 中提供它，如下所示：

```
jdbc:postgresql://<IP-PORT>/<your_SID>?useUnicode=true&amp;characterEncoding=ISO-8859-1 
```

在这种情况下，这是一个 postgres 数据库，并且 url 在 apache-tomcat 服务器 (server.xml) (Inside) 的数据源定义中。

（也可以配置hibernate的池添加：

```
<property name="connection.url">jdbc:postgresql://<IP-PORT>/<your_SID></property> 
```

)

不一样，但您可以认为您应该在 url 规范中的某处插入 DDBB SID。

希望这可以帮助。

# javascript - 保留 html o/p 中的空白

> ID：15063664
> 
> 赞同：0
> 
> 时间：2013-02-25T09:21:49.577
> 
> 标签：javascript, html

我正在从富文本框中获取文本

例如：“abc def”。

我应该在这些空白处显示一个下拉框，但浏览器会自动消除这些空白。

我试过这段代码：

```
var text = div.innerHTML;    
var regex = new RegExp(" ", "g");  
text = text.replace(regex, " &nbsp; ");  
div.innerHTML = text;  ' 
```

这与 2 个额外的空格保持正确对齐

有什么办法可以让我用文本替换空格，`&nbsp;`但如果文本出现在标签前。`<font size="10"`那么字体和大小之间的空间将不会被替换

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:23:36.647

将 div 的样式设置为

```
white-space: pre; 
```

而且你不必用javascript做所有的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:23:10.493

用于`&nbsp;&nbsp;`双倍空间。浏览器默认会消除多余的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T09:38:24.460

您可以在 html 中使用 pre 标记`"<pre>string</pre>"` 或制作一个类似 pre 的 css 类：

```
.wspaces{
    white-space: pre;
    white-space: pre-wrap;       /* css-3 */
    white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
    white-space: -pre-wrap;      /* Opera 4-6 */
    white-space: -o-pre-wrap;    /* Opera 7 */
    word-wrap: break-word;       /* Internet Explorer 5.5+ */
} 
```

# java - 将 EditText 文本绑定到变量？

> ID：15063668
> 
> 赞同：3
> 
> 时间：2013-02-25T09:22:14.240
> 
> 标签：java, android, android-edittext

我正在尝试将`EditText`对象的文本绑定到视图变量的本地，但可能我不明白如何。

*   如何将`EditText`对象与`Java`-中的变量绑定`Android 4.0.3`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T09:26:03.803

[像这样](https://stackoverflow.com/questions/7157123/in-android-how-do-i-take-an-action-whenever-a-variable-changes)制作一个 variableChangedListener

在侦听器中，`setText(variable)`为 EditText添加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:25:53.160

您可以将 EditText 绑定到 EditText 类型的局部变量

```
EditText text=new EditText(this);

text=youredittex; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T09:30:35.087

你可以这样做：

```
EditText bindText=new EditText(context);

bindText=anyThingHere; 
```

# javascript - 我怎么能不使用 underscoreJS 做到这一点？

> ID：15063669
> 
> 赞同：0
> 
> 时间：2013-02-25T09:22:17.677
> 
> 标签：javascript, underscore.js

我想知道如何在不使用 undercoreJS 的情况下使用 JUST javascript 来做到这**一点**？我一直在尝试不同的方法，但我无法实现！：（ 谢谢！

我想要做的是检查基本上是选中还是未选中。

```
myArray =[
        {text: 'lean something', done: false},
        {text: 'what ever', done: false }

    ];

function clearCompleted = function(){
        myArray = _.filter(myArray, function(todo){
                    return !todo.done;
                }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:25:37.447

如果您只支持现代浏览器（即任何比 IE8 更新的浏览器），您可以使用`.filter()`：

```
myArray.filter(function(todo){
    return !todo.done;
}); 
```

如果要支持旧版浏览器，请使用循环：

```
var temp = [];

for (var i = 0; i < myArray.length; i++) {
    if (!myArray[i].done) {
        temp.push(myArray[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:24:57.830

您可以使用[`Array.filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

```
myArray = myArray.filter(function(todo) {
    return !todo.done;
}); 
```

如果您使用的是不包含该方法的旧浏览器，则上述链接中提供了一个 shim。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:24:47.933

您可以使用本机[`filter`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

```
myArray = myArray.filter(function(todo){
    return !todo.done;
}); 
```

# javascript - 在 JavaScript 中将字符串与今天的日期进行比较

> ID：15063670
> 
> 赞同：24
> 
> 时间：2013-02-25T09:22:31.477
> 
> 标签：javascript, date, date-comparison

我从输入字段中获得了一个字符串，我将其用于日期，格式类似于 25-02-2013。现在我想将字符串与今天的日期进行比较。我想知道字符串是否比今天的日期更旧或更新。

有什么建议么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-25T09:38:03.087

```
 <script type="text/javascript">

var q = new Date();
var m = q.getMonth()+1;
var d = q.getDay();
var y = q.getFullYear();

var date = new Date(y,m,d);

mydate=new Date('2011-04-11');
console.log(date);
console.log(mydate)

if(date>mydate)
{
    alert("greater");
}
else
{
    alert("smaller")
}

</script> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-28T12:18:21.613

确切日期比较并从已接受的答案中解决了错误

```
var q = new Date();
var m = q.getMonth();
var d = q.getDay();
var y = q.getFullYear();

var date = new Date(y,m,d);

mydate=new Date('2011-04-11');
console.log(date);
console.log(mydate)

if(date>mydate)
{
    alert("greater");
}
else
{
    alert("smaller")
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-05-07T03:11:39.080

您可以使用简单的比较运算符来查看日期是否大于另一个日期：

```
var today = new Date();
var jun3 = new Date("2016-06-03 0:00:00");

if(today > jun3){
    // True if today is on or after June 3rd 2016
}else{
    // Today is before June 3rd
} 
```

我添加`0:00:00`到第二个变量的原因是因为没有它，它将与 UTC（格林威治）时间进行比较，这可能会给您带来不希望的结果。如果您将时间设置为 0，那么它将与用户的本地午夜进行比较。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-25T09:31:40.360

使用 Javascript`Date`对象对您来说会更容易。但是由于该`Date`对象不支持您的格式，我认为您必须使用“-”解析您的输入字符串（例如：25-02-2013）以获取`date` `month`然后`year`使用`Date`对象进行比较。

```
var x ='23-5-2010';
var a = x.split('-');
 var date = new Date (a[2], a[1] - 1,a[0]);//using a[1]-1 since Date object has month from 0-11
 var Today = new Date();
 if (date > Today)
    alert("great");
 else
    alert("less"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T09:30:22.623

如果您的日期输入格式为“25-02-2013”​​，您可以使用 split() 方法将字符串拆分为 DD、MM 和 YYYY：

```
var date_string="25-02-2013";

var day  = parseInt(date_string.split("-")[0]);
var month= parseInt(date_string.split("-")[1]);
var year = parseInt(date_string.split("-")[2]); 
```

parseInt() 函数用于将字符串转换为整数。然后可以将这 3 个变量与 Date() 对象的属性进行比较。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-14T11:18:36.697

进行日期比较时需要记住的最重要的点

> *   两个日期应采用相同的格式以获得准确的结果。
> *   如果您使用日期时间格式并且只想进行日期比较，请确保将其转换为相关格式。

这是我使用的代码。

```
 var dateNotifStr = oRecord.getData("dateNotif");
           var today = new Date();       
           var todayDateFormatted = new Date(today.getFullYear(),today.getMonth(),today.getDate());

           var dateNotif=new Date(dateNotifStr);
           var dateNotifFormatted = new Date(dateNotif.getFullYear(),dateNotif.getMonth(),dateNotif.getDate()); 
```

好吧，这可以进一步优化，但这应该让您清楚地了解以统一格式制作日期所需的内容。

# c# - C#：访问冲突异常错误未处理

> ID：15063672
> 
> 赞同：1
> 
> 时间：2013-02-25T09:22:33.363
> 
> 标签：c#

我正在使用 api / dll 方法。当我运行我的应用程序时，我总是收到此错误“尝试读取或写入受保护的内存。这通常表明其他内存已损坏。”

这是我的代码

```
charge.CommMethod = PSCharge.CommMethod.TCPIP;
            charge.Port = 31419;
            charge.IPAddress = "192.168.21.139";
            charge.Command = command;
            charge.User = csConfig.pccuser;
            charge.Processor = csConfig.pccprocessor;
            charge.MerchantNumber = csConfig.pccmerchantnum;
            charge.Manual = manual;
            charge.Track = trackdata;
            charge.Amount = amount;
            charge.Card = cardnum;
            charge.ExpDate = expdate;
            charge.member = cardholder;
            charge.Ticket = ticketnumber;
            charge.TroutD = troutd;
            charge.XMLTrans = true;

            PSCharge.FileType filetype = (PSCharge.FileType)3;
            charge.Send(ref filetype); 
```

错误位于这行代码中`PSCharge.FileType filetype`

PSCharge.FileType

```
using System;
using System.Runtime.InteropServices;

namespace PSCharge
{
    [Guid("E42FAC74-F294-4FC3-B0BC-89B48BAD769C")]
    public enum FileType
    {
        TTYPE_CLR = 0,
        TTYPE_INP = 1,
        TTYPE_PRO = 2,
        TTYPE_XML = 3,
        TTYPE_INF = 4,
        TTYPE_BCH = 5,
        TTYPE_DUP = 6,
    }
} 
```

# javascript - JayData 创建对象未按预期工作

> ID：15063674
> 
> 赞同：0
> 
> 时间：2013-02-25T09:22:35.037
> 
> 标签：javascript, entity, wcf-data-services, odata, jaydata

我发现很难找到有关此的任何信息，所以我在 SO 上询问它。

我想用 JayData Entity API 创建一个新的“连接”。一个连接有 2 个设备端口，都与一个设备和一个端口链接。所以：

```
Connection(Sender: DevicePort(Device, Port), Receiver: DevicePort(Device, Port)) 
```

我已经有 2 个 DevicePort（ID：1 和 2）

我想与那些作为发送者和接收者的人创建一个新的连接。所以我这样做：

```
var devPort1 = previouslyFetchedDevicePortEntity1;
var devPort2 = previouslyFetchedDevicePortEntity2;
var con = DataLayer.context.ConnectionSet.add({ Sender: devPort1, Receiver: devPort2 });
DataLayer.context.saveChanges(); 
```

这是有效的，并且一个新的连接被添加到数据库中。但也有新的设备端口、新设备和新端口。似乎它克隆了以前的 DevicePorts 等，但我想要一个新的 Connection，它与我给它作为参数的相同 DevicePorts 相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:54:00.063

我认为缺少以下两行来初始化先前加载的项目的 entitySet：

```
DataLayer.context.Ports.attach(devPort1);
DataLayer.context.Ports.attach(devPort2); 
```

我只是假设您有一个 Port 实体的 EntitySet，请在此处替换您的集合名称。

这能解决问题吗？

# php - mysql数据中的双引号不适用于json

> ID：15063676
> 
> 赞同：-1
> 
> 时间：2013-02-25T09:22:40.150
> 
> 标签：php, json

我有类似的代码

```
 $m_strOutput= "{\"success\":true,\"results\":" . $m_objQuery->num_rows() . ",\"rows\":";
    $m_strOutput = $m_strOutput . json_encode($m_objQuery->result());
    $m_strOutput = $m_strOutput . "}"; 
```

但有些数据中已经有双引号。所以它打破了我试图解析它的观点。我如何解决这个双引号问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:34:56.313

两件事情：

1.  这不是双引号的问题。将值放入没有键的 JSON 对象时会出现语法错误。

2.  您应该让 json_encode 为您完成所有工作。

可能适合您的情况的代码：

```
<?php

$m_strArr = array(
  'success' => true,
  'results' => $m_objQuery->num_rows(),
  'rows' => $m_objQuery->result(),
);

$m_strOutput = json_encode($m_strArr);
?> 
```

# tomcat - testacular e2e 测试和角度的跨站点脚本问题

> ID：15063678
> 
> 赞同：4
> 
> 时间：2013-02-25T09:22:45.043
> 
> 标签：tomcat, angularjs, karma-runner

我正在构建一个 webapp，在服务器上使用 java，在前端使用 angular。我正在尝试使用 testacular 设置 e2e 测试。测试失败是因为我认为是跨站点脚本问题。由于我使用 java 构建后端，因此我有一个运行托管我的 Web 应用程序的 tomcat 服务器。如果我`http://localhost:8087/angular`在浏览器中导航到，页面会加载。（端口 8087 用于我的 tomcat 7 安装，因为我的计算机上有 tomcat 6 和 7）。

当我运行时，`testacular start 'path/to/config/file`我收到此错误：

```
http://localhost:9876/adapter/lib/angular-scenario.js?1360780804000:25281: 
Error: Permission denied to access property 'document' 
```

这是我的配置文件：

```
basePath = '../../';

files = [ 
  ANGULAR_SCENARIO,
  ANGULAR_SCENARIO_ADAPTER,
  'test/js/tests/e2e/scenarios.js'
];

autoWatch = false;

browsers = ['firefox'];

singleRun = true;

proxies = { 
  '/': 'http://localhost:8087/angular'
};

junitReporter = { 
  outputFile: 'test_out/e2e.xml',
  suite: 'e2e'
}; 
```

这是我的测试文件：

```
describe("E2E Test", function() {

    it("should load the document and be able to read from it", function() {
        browser().navigateTo("/");
        expect(element("body", "The body element").count()).toBe(1); 
    }); 

}); 
```

有没有办法解决？使用：节点 v0.8.20 testacular 0.5.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T07:35:49.710

首先我建议你升级[Karma](http://karma-runner.github.io/0.8/index.html)

您共享的配置应该与[此处示例](http://steve-mosley.com/blog/2013/3/29/karma-testacular-angularjs-e2e-test-configuration)中的配置一样有效。事实并非如此，要么是由于您使用的是旧版本的 testacular，要么是由于您的应用程序本身存在问题。

当我使用 Nginx 从端口 80 提供所有内容时，我对旧版本的 testacular/angular 有一些运气，但如果我是你，我会先升级。

# delphi - 触发 TDBGrid Columns 调整大小事件的位置

> ID：15063680
> 
> 赞同：2
> 
> 时间：2013-02-25T09:22:48.930
> 
> 标签：delphi, delphi-xe, tdbgrid

我有一个 TDBGrid 组件。我需要捕捉在调整网格列大小时触发的事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:11:00.870

获得事件的唯一地方似乎是覆盖 ColWidthChanged ...

```
type
  TDBgrid=Class(DBGrids.TDBGrid)
       private
       FColResize:TNotifyEvent;
       procedure ColWidthsChanged; override;
       protected
       Property OnColResize:TNotifyEvent read FColResize Write FColResize;
  End;

  TForm1 = class(TForm)
    Panel1: TPanel;
    Button1: TButton;
    DBGrid1: TDBGrid;
    ADODataSet1: TADODataSet;
    DataSource1: TDataSource;
    procedure FormCreate(Sender: TObject);
  private
    procedure ColResize(Sender: TObject);
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TDBgrid }

procedure TDBgrid.ColWidthsChanged;
begin
  inherited;
  if Assigned(FColResize) then  FColResize(self);

end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  DBgrid1.OnColResize := ColResize;
end;

procedure TForm1.ColResize(Sender:TObject);
begin
  Caption := FormatDateTime('nn:zzz',now)  ;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T10:19:41.783

您需要创建 TDBGrid 的后代并自己实现事件。像这样的东西：

```
unit MyDBGrid;

interface

type
  TMyDBGrid = class(TDBGrid)
  private
    FOnColResize: TNotifyEvent;
  protected
    procedure ColWidthsChanged; override;
  public
  published
    property OnColResize: TNotifyEvent read FOnColResize write FOnColResize;
  end;

implementation

{ TMyDBGrid }

procedure TMyDBGrid.ColWidthsChanged;
begin
  inherited;
  if (Datalink.Active or (Columns.State = csCustomized)) and
    AcquireLayoutLock and Assigned(FOnColResize) then
    FOnColResize(Self);
end;

end. 
```

这应该可以，我现在没有时间测试它。

# html - html画布儿童计数

> ID：15063690
> 
> 赞同：1
> 
> 时间：2013-02-25T09:23:22.767
> 
> 标签：html, canvas

有没有办法获取画布上元素的数量？我有一些将图像添加到画布的代码，有时某些图像会失败。只有当画布上有多个图像时，我才想在之后运行一些代码，我怎样才能计算画布上的图像数量？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:02:53.603

正确的答案是画布没有“记忆”，它会画出你扔给它的东西，但它不会“知道”那里有多少图像。画布所知道的就是您已经在其上放置了内容，无论是一张大图像还是几个较小的图像都由您决定。

这意味着如果您在画布上绘图，您必须跟踪并计算自己绘制的内容。也就是说，每当您在画布上绘制图像时，都会增加一个计数器，当您清除它所占用的区域时减少它，或者在您清除整个画布时重置它。如果这听起来很简单，那是因为它是，你只需要记住自己做。

# oop - 后期绑定类的设计模式（没有用于类分配的 switch case）

> ID：15063694
> 
> 赞同：0
> 
> 时间：2013-02-25T09:23:34.880
> 
> 标签：oop, design-patterns, c#-3.0

我有一个编写所有常用函数的基类。我有许多通过 virtual 关键字覆盖此功能的类。像，

```
public class Base
{
   public virtual void sample()
   {
     ..............
   }
}

public class a : Base
{
   public override sample()
   {

   }
}

public class implement
{

   public void ToSample()
   {
     Base baseclass = new Base();

     Switch(test)
     {
        case a: baseclass = a();
         break;

        case b: baseclass = b();
        break; 
     }

    baseclass.sample();
   }

} 
```

这是当前情况的完美代码，但现在我在 switch 案例中分配了更多类。添加大量案例并不是一个好习惯，所以我想要一些自动分配子类的东西。

有人知道要实施的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:35:10.433

如评论中所述，您可以使用[依赖注入](http://martinfowler.com/articles/injection.html)来解耦实现。但是请注意，在某些情况下，您别无选择，只能进行这种切换（例如，当您需要根据套接字中接收的文本创建类时）。在这种情况下，重要的是始终将 switch 语句封装在一种方法中，并使您的对象依赖它（或者，换句话说，不要在任何地方复制和粘贴它:)）。这里的想法是让您的系统与潜在有害代码隔离。当然，如果你添加一个新类，你将不得不去修改那个方法，但是你只需要在一个特定的时间和一个特定的地方进行。

我见过（有时也使用过）的另一种方法是在值和类之间建立映射。因此，如果您的类创建开关依赖于整数代码，那么您基本上创建了代码和类之间的映射。您在这里所做的是将“静态”开关转换为动态行为，因为您可以随时更改映射内容，从而改变程序的行为方式。典型的实现类似于（抱歉伪代码，我不熟悉 C#）：

```
public class implement
{

   public void ToSample()
   {
     class = this.mapping.valueForKey(test);
     Base baseclass = new class();
     baseclass.sample();
   }
} 
```

但是请注意，要使此示例正常工作，您需要[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)支持，这取决于您使用的语言（再次，抱歉，但我不知道 C# 细节）。

最后，您还可以查看[创建](http://www.oodesign.com/creational-patterns/)模式系列，以获取有关对象创建问题和一些众所周知的解决方法的灵感。

高温高压

# ruby-on-rails - 模型中的访问参数

> ID：15063697
> 
> 赞同：0
> 
> 时间：2013-02-25T09:23:44.813
> 
> 标签：ruby-on-rails, ruby

我知道这是您在 rails 内不能做或不应该做的事情，但我需要以某种方式获取用户在表单字段中输入的数量并使用该值。

这就是我的模型的样子

```
class Deposit < ActiveRecord::Base
  belongs_to  :credit_card
  belongs_to  :user

  validates   :credit_card,          presence: true
  validates   :user,                 presence: true
  validates   :tx_type,              inclusion: %w(debit credit)
  # validates   :amount,               presence: true, numericality: true

  before_create :add_transaction_to_merchant
  after_create  :update_user_balance
  attr_readonly :credit_card_id, :user_id, :fee_id, :tx_type, :status, :merchant_tx_id

  attr_accessible :tx_type, :amount, :status, :merchant_tx_id, :credit_card_id,
                  :user_id, :user

  def amount
    return attributes[:amount] if attributes[:amount]
    set_amount
  end

  def tx_type
    attributes[:tx_type] || 'debit'
  end

  def send_receipt
    Resque.enqueue(PaymentCompletedSender, self.id)
  end

  def update_user_balance
    user_balance =user.balance + set_amount
    user.balance = user_balance
    user.save
  end

  private

  def add_transaction_to_merchant
    set_amount
    return false if credit_card.nil?
    return true unless amount > 0
    result = Braintree::Transaction.sale(
      amount: amount,
      payment_method_token: credit_card.token,
      options: { submit_for_settlement: true }
    )

    if result.success?
      self.merchant_tx_id = result.transaction.id
      # status will be authorized or submitted_for_settlement
      self.status = result.transaction.status
    else
      errors.add(:base, result.message)
      if result.transaction.nil?
        # validation errors prevented transaction from being created
        logger.error(result.errors)
      else
        self.merchant_tx_id = result.transaction.id
        # status will be processor_declined, gateway_rejected, or failed
        self.status = result.transaction.status
      end
    end
  end

  def set_amount
    attributes[:amount]
  end

end 
```

控制器：

```
# POST /deposits
  # POST /deposits.json
  def create
    @deposit = Deposit.new(params[:deposit])
    @deposit.user = current_user
    @deposit.credit_card = current_user.credit_cards.try(:first)

    binding.pry
    respond_to do |format|
      if @deposit.save
        format.html { redirect_to "/", notice: 'Deposit was successfully created.' }
        format.json { render json: @deposit, status: :created, location: @deposit }
      else
        format.html { render action: "new" }
        format.json { render json: @deposit.errors, status: :unprocessable_entity }
      end
    end
  end 
```

这就是表单发送的参数

```
{"utf8"=>"✓",
 "authenticity_token"=>"r0M0sRr7QO9kl0IWrJSgvj45DFrC6mbbuA+ttgEaUI0=",
 "deposit"=>{"amount"=>"100"},
 "commit"=>"Pay Now"} 
```

关于如何从模型中的表单返回数量值的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:36:01.167

你这样做对吗？`@deposit = Deposit.new(params[:deposit])`如果您删除模型中的`amount`and`set_amount`方法，您应该可以只在模型中使用`amount`or`self.amount`所以以下内容就足够了

```
def add_transaction_to_merchant
  return false if credit_card.nil?
  return true unless amount > 0

  result = Braintree::Transaction.sale(
    amount: amount,
    payment_method_token: credit_card.token,
    options: { submit_for_settlement: true }
  ) 
```

# svn - SVNServer 上的 .\db\rep-cache.db 文件存在问题

> ID：15063698
> 
> 赞同：0
> 
> 时间：2013-02-25T09:23:47.043
> 
> 标签：svn, tortoisesvn

我正在 SVN 服务器上的 SVN 存储库上执行以下步骤。

1.  以我的存储库的转储，
2.  对我的存储库进行一些更改，
3.  采取进一步的增量转储，
4.  现在获取存储库的热拷贝，
5.  使我的工作存储库崩溃，
6.  从转储和增量转储文件中恢复。

在这里，我使用 WinDiff 比较了两个存储库：一个在步骤 4（热复制）中获取，另一个在步骤 6 中恢复后（使用转储文件）。

我发现 WinDiff 显示**.\db\rep-cache.db 在步骤 6 中恢复的存储库中更新。**

谁能告诉我为什么**.\db\rep-cache.db**有所不同，如果我使用热复制或转储存储库，它会产生任何影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:44:02.290

第`rep-cache.db`6 步中的时间戳比第 4 步中的时间戳更新，因为您在执行热复制*后*执行了恢复。唯一不正确的情况是您拥有高度修改的 DeLorean。

WinMerge 除了查看大小和时间戳之外无法比较这些文件，因为它们是二进制的。

# ios - 如何在 ios5 中使用邮政编码获取纬度和经度值？

> ID：15063703
> 
> 赞同：1
> 
> 时间：2013-02-25T09:23:59.913
> 
> 标签：ios, latitude-longitude, zipcode

我使用 [http://maps.google.com/maps/geo?output=csv&q=ZIPCODE](http://maps.google.com/maps/geo?output=csv&q=ZIPCODE) 这个 url 从邮政编码获取纬度和经度..但是我得到错误的纬度和经度值。是否有任何其他服务可用。 .

我只锁在这里...

谢谢你的建议。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:35:23.603

试试这个 API，它非常有用： [http ://maps.google.com/maps/api/geocode/json?address=tn-635113&sensor=false](http://maps.google.com/maps/api/geocode/json?address=tn-635113&sensor=false)

# unix - 如何在 Tcl/Expect 中用变量值替换字符串

> ID：15063711
> 
> 赞同：0
> 
> 时间：2013-02-25T09:24:40.630
> 
> 标签：unix, tcl, expect

我正在尝试`hostname`使用以下命令将主字符串中的特定字符串 () 替换为变量值，

```
set newVar [string map {`hostname` $theHost} 'lsnrctl status listener_`hostname`'] 
```

但是，它不是用`hostname`变量值替换，而是使用变量标识符来替换它，即“$theHost”。

newVar 是这样写的，

```
lsnrctl status listener_$theHost 
```

我要变成这样

```
lsnrctl status listener_theHostName 
```

其中“theHostName”是变量“$theHost”的值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:34:24.733

`list`使用以下命令构建替换列表：

```
set newVar [string map [list `hostname` $theHost] "lsnrctl status listener_`hostname`" 
```

或者你可以使用

```
set newVar "lsnrctl status listener_${theHost}" 
```

`'`在 Tcl 中没有特殊含义，因此您的代码段将引发错误。`"`如果您想要命令、变量和反斜杠替换，请使用，`{`如果您不想这样做。（`\`在行尾之前仍将被替换）。

所以 using`{`hostname` $theHost}`将被替换为``hostname` $theHost`，而不是你想要的东西。因此，如果 $theHost 是一个有效的列表元素（不包含空格等），最好用`list`,构建一个列表，但如果is的值会失败（将抛出错误）`"`hostname` $theHost"``$theHost``foo bar``string map`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:32:31.233

你不能就这样吗

```
set newVar 'lsnrctl status listener_'
append newVar $theHost 
```

# android - 如何对齐微调器等于edittext的宽度

> ID：15063712
> 
> 赞同：-3
> 
> 时间：2013-02-25T09:24:44.030
> 
> 标签：android, spinner

我如何对齐`spinner`以在所有屏幕上显示相等的宽度？在我的代码`spinner`中在不同的屏幕上显示不同的宽度我该怎么办？我给了固定长度

```
 android:layout_marginRight="45dp"
 android:layout_marginLeft="45dp" 
```

在`edittext`并且`spinner`但`spinner`在不同的屏幕中显示不同的宽度我该如何解决这个问题？我这是我的屏幕图像[http://imgur.com/RtWNgNI](http://imgur.com/RtWNgNI) ，下面是我的完整屏幕源代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000"
android:orientation="vertical"
android:weightSum="6" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="55dp"
    android:layout_weight="0.5"
    android:orientation="horizontal"
    android:weightSum="1" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:paddingBottom="10dp"
        android:src="@drawable/agappbg" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dp"
    android:layout_weight="0.2"
    android:orientation="horizontal"
    android:weightSum="1" >

    <EditText
        android:id="@+id/txtMobileNo"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="45dp"
        android:layout_marginRight="45dp"
        android:layout_weight="1"
        android:background="#ffffff"
        android:gravity="left"
        android:hint="@string/MobileNo"
        android:singleLine="true" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.2"
    android:orientation="horizontal"
    android:weightSum="1" >

    <EditText
        android:id="@+id/txtPinNo"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="45dp"
        android:layout_marginRight="45dp"
        android:layout_weight="1"
        android:background="#ffffff"
        android:gravity="left"
        android:hint="@string/PinNo"
        android:inputType="textPassword"
        android:singleLine="true" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.1"
    android:orientation="horizontal"
    android:weightSum="1" >

    <Spinner
        android:id="@+id/lgnspinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="-17dp"
        android:layout_marginLeft="45dp"
        android:layout_marginRight="45dp"
        android:layout_marginTop="-15dp"
        android:layout_weight="1"
        android:paddingBottom="12dp"
        android:paddingTop="12dp"
        android:prompt="@string/network_prompt" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:layout_weight="0"
    android:orientation="horizontal"
    android:weightSum="4" >

    <Button
        android:id="@+id/btnLogin"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="45dp"
        android:layout_weight="1"
        android:background="@drawable/curvedplanebutton_small"
        android:text="Login"
        android:textColor="@drawable/button_text_color" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:47:58.163

这不是你的错，默认背景`Spinner`有这种图像（它周围的透明填充）。您可以通过设置来查看自己`android:background="#ffffff"`，这样做会从' 的侧面`Spinner`移除填充，您的问题会解决，但您会松开箭头。我建议您创建自己的for （因为您正在更改 other 的背景），否则默认背景对于不同的操作系统版本是不同的，并且您的实现似乎会失败。`Spinner``Spinner``drawable``Spinner``View`

`LinerLayout`此外，您为这个简单的布局使用了很多s。考虑一下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000"
android:orientation="vertical"
android:weightSum="100" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_gravity="center_horizontal"
    android:layout_weight="30"
    android:paddingBottom="10dp"
    android:src="@drawable/ic_launcher" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="70"
    android:orientation="vertical"
    android:padding="16dp" >

    <EditText
        android:id="@+id/txtMobileNo"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_marginBottom="4dp"
        android:background="#ffffff"
        android:gravity="center_vertical"
        android:hint="MobileNo"
        android:padding="4dp"
        android:singleLine="true" />

    <EditText
        android:id="@+id/txtPinNo"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_marginBottom="4dp"
        android:background="#ffffff"
        android:gravity="center_vertical"
        android:hint="Pin no"
        android:inputType="textPassword"
        android:padding="4dp"
        android:singleLine="true" />

    <Spinner
        android:id="@+id/lgnspinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dp"
        android:background="#ffffff" />

    <Button
        android:id="@+id/btnLogin"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:text="Login" />
</LinearLayout>

</LinearLayout> 
```

再次调整您的引用，以防您复制粘贴我的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:38:05.710

实际上你的代码是对的。它看起来与 EditText 框的大小不同，因为您在微调器中使用了默认背景。

如果您更改了其背景颜色或图像，例如

```
android:background="@android:color/darker_gray" 
```

你可以改变它的背景图片

```
android:background="@drawable/spinnerDropDownBackground" 
```

并确保图像是 9 路径，这样它就不会在大屏幕上浆糊

[如何为微调器创建 9 个补丁？](http://www.mokasocial.com/2011/03/easily-create-a-default-custom-styled-spinner-android/)

你会发现你的代码是正确的。

如果你想使用默认背景，你必须改变你的代码

```
android:layout_marginRight="40dp"
android:layout_marginLeft="40dp" 
```

希望这会有所帮助

# sql-server - SQL Datediff 以秒为单位，带小数位

> ID：15063713
> 
> 赞同：3
> 
> 时间：2013-02-25T09:24:44.563
> 
> 标签：sql-server, sql-server-2008

我试图以秒为单位提取两个 SQL DateTime 值之间的差异，并使用小数位进行一些性能监控。

我有一个表“Pagelog”，它有一个“创建”和“结束”日期时间。在过去，我能够做到以下几点：

```
SELECT DATEDIFF(ms, pagelog_created, pagelog_end)/1000.00 as pl_duration FROM pagelog 
```

但是我已经开始收到以下错误：

```
Msg 535, Level 16, State 0, Line 1
The datediff function resulted in an overflow. The number of dateparts separating two date/time instances is too large. Try to use datediff with a less precise datepart. 
```

我已经看到许多对这个错误的回应，指出我应该使用不太精确的测量单位。但是当我需要区分 2.1 秒和 2.9 秒时，这几乎没有帮助，因为 DATEDIFF(s,..,..) 将返回 INT 结果并失去我需要的准确性。

我最初认为这是由于我的表中的一些值具有很大的范围但运行此：

```
SELECT DATEDIFF(s, pagelog_created, pagelog_end) FROM pagelog
ORDER BY DATEDIFF(s, pagelog_created, pagelog_end) DESC 
```

返回最大值 30837，即 8.5 小时或 30,837,000 毫秒，就我所知，在 SQL INT 的范围内？

任何帮助将不胜感激，据我所知，我有两个选择：

*   以某种方式解决数据问题，找到罪魁祸首值
*   找到计算值之间差异的不同方法

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:26:21.207

StackOverflow 的魔法似乎奏效了，尽管上周在这个问题上花了几个小时，但我重新阅读了我的问题，现在已经解决了这个问题。我想我会更新答案以帮助遇到此问题的其他人。

这里的问题不是有**很大**的范围，而是有一个**负**范围。这显然会导致负溢出。如果 SQL Server 错误更具描述性，但在技术上并没有错，那将会很有帮助。

所以就我而言，这是返回值：

```
SELECT * FROM pagelog
WHERE pagelog_created > pagelog_end 
```

要么删除这些值，要么从初始结果集中忽略它们！

感谢 Ivan G 和 Andriy M 的回复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:00:26.293

您可以尝试避免这样的溢出：

```
DECLARE @dt1 DATETIME = '2013-01-01 00:00:00.000'
DECLARE @dt2 DATETIME = '2013-06-01 23:59:59.997'

SELECT  DATEDIFF(DAY, CAST(@dt1 AS DATE), CAST(@dt2 AS DATE)) * 24 * 60 * 60
SELECT  DATEDIFF(ms, CAST(@dt1 AS TIME), CAST(@dt2 AS TIME))/1000.0

SELECT DATEDIFF(DAY, CAST(@dt1 AS DATE), CAST(@dt2 AS DATE)) * 24 * 60 * 60 
        + DATEDIFF(ms, CAST(@dt1 AS TIME), CAST(@dt2 AS TIME))/1000.0 
```

`DATE`首先，它从该部分获取一整天的秒数`DATETIME`，然后从该部分添加秒数`TIME`，之后，它只是添加它们。

不会有错误，因为数据类型`DATEDIFF`的最小和最大时间`TIME`不会产生溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:32:59.347

你当然可以这样做：

```
SELECT
  DATEDIFF(ms, DATEADD(s, x.sec, pagelog_created), pagelog_end) * 0.001
  + x.sec AS pl_duration
FROM pagelog
CROSS APPLY (
  SELECT DATEDIFF(s, pagelog_created, pagelog_end)
) x (sec)
; 
```

如您所见，首先计算和之间的秒数差`pagelog_created`，`pagelog_end`然后将秒数加回到`pagelog_created`该值之间的毫秒差值，并`pagelog_end`计算并添加到秒数中。

但是，由于根据您的调查，该表似乎没有可能导致溢出的行，因此我还要仔细检查该特定片段是否是*错误*的根源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-19T09:13:42.223

```
with cte as(
select rownum = row_number() over(partition by T.TR_ID order by T.[date]),
T.* from [dbo].[TR_Events] T 
)
select  cte.[date],nex.[date],convert(varchar(10),datediff(s, cte.[date], nex.[date])/3600)+':'+
convert(varchar(10),datediff(s, cte.[date], nex.[date])%3600/60)+':'+
convert(varchar(10),(datediff(s,cte.[date], nex.[date])%60)) 
from cte
left join cte prev on prev.rownum = cte.rownum - 1
left join cte nex on nex.rownum = cte.rownum + 1 
```

# java - 类或罐子，谁赢了？

> ID：15063716
> 
> 赞同：5
> 
> 时间：2013-02-25T09:24:57.497
> 
> 标签：java, web, classloader

是不是，如果有重复的课程，“课程”中的那个会被录取吗？

考虑在 Web 应用程序中，A 类将直接在

**WEB-INF/类**

和一个罐子的一部分

**WEB-INF/库**

上课的人总是会赢吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:30:08.190

这取决于类路径 - 首先出现的类路径条目将首先获胜。此外，如果有多个类加载器，将首先尝试加载了依赖类的类加载器。它不应该取决于类是否在 jar 中。记录[在这里](http://docs.oracle.com/javase/tutorial/ext/basics/load.html)。

一般来说，不要这样做，因为在同一个名称下拥有多个类是真正的灾难。

# java - 另一个“java.exe”不被识别为内部或外部命令

> ID：15063718
> 
> 赞同：2
> 
> 时间：2013-02-25T09:25:02.473
> 
> 标签：java, environment-variables, flashdevelop, haxe, nme

由于我已经为此苦苦挣扎了两个多小时，因此我拼命地发布了这个问题，

当我尝试在 FlashDevelop 中构建 NME 项目时，我收到此错误：

```
Running process: C:\Program Files (x86)\FlashDevelop\Tools\fdbuild\fdbuild.exe "C:\Users\KETAB\Desktop\SplashScreen\SplashScreen.hxproj" -ipc 41740bf7-6aa9-4825-9b1d-a8450386e5ad -version "2.10" -compiler "C:\Motion-Twin\Haxe" -library "C:\Program Files (x86)\FlashDevelop\Library" -target "android"
Building SplashScreen
haxelib run nme build C:\Users\KETAB\Desktop\SplashScreen\application.nmml android -debug
haxelib run hxcpp Build.xml haxe -Ddebug -Dandroid -Dcpp -Ddebug -Dhaxe_208 -Dhaxe_209 -Dhaxe_210 -Dmobile -Dnme -Dnme_install_tool -Dsys -Dtrue
'"java.exe"' is not recognized as an internal or external command,
operable program or batch file.
Build halted with errors (haxelib.exe). 
```

虽然，在终端中，如果我输入 java 我会得到友好的帮助行..

```
C:\Users\KETAB>java
Usage: java [-options] class [args...]
           (to execute a class)
   or  java [-options] -jar jarfile [args...]
           (to execute a jar file)
where options include:
    -d32          use a 32-bit data model if available
    -d64          use a 64-bit data model if available
    -server       to select the "server" VM
    -hotspot      is a synonym for the "server" VM  [deprecated]
                  The default VM is server.

    -cp <class search path of directories and zip/jar files>
    -classpath <class search path of directories and zip/jar files>
                  A ; separated list of directories, JAR archives,
                  and ZIP archives to search for class files.
    -D<name>=<value>
                  set a system property
    -verbose:[class|gc|jni]
                  enable verbose output
    -version      print product version and exit
    -version:<value>
                  require the specified version to run
    -showversion  print product version and continue
    -jre-restrict-search | -no-jre-restrict-search
                  include/exclude user private JREs in the version search
    -? -help      print this help message
    -X            print help on non-standard options
    -ea[:<packagename>...|:<classname>]
    -enableassertions[:<packagename>...|:<classname>]
                  enable assertions with specified granularity
    -da[:<packagename>...|:<classname>]
    -disableassertions[:<packagename>...|:<classname>]
                  disable assertions with specified granularity
    -esa | -enablesystemassertions
                  enable system assertions
    -dsa | -disablesystemassertions
                  disable system assertions
    -agentlib:<libname>[=<options>]
                  load native agent library <libname>, e.g. -agentlib:hprof
                  see also, -agentlib:jdwp=help and -agentlib:hprof=help
    -agentpath:<pathname>[=<options>]
                  load native agent library by full pathname
    -javaagent:<jarpath>[=<options>]
                  load Java programming language agent, see java.lang.instrument

    -splash:<imagepath>
                  show splash screen with specified image
See http://www.oracle.com/technetwork/java/javase/documentation/index.html for m
ore details. 
```

我在环境变量中试过这个：

```
PATH C:\Program Files (x86)\Java\jdk1.7.0_13\bin
JAVA_HOME C:\Program Files (x86)\Java\jdk1.7.0_13 
```

为什么我可以在终端内调用 java，而 FlashDevelop 却说这不是内部或外部命令？

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:22:59.980

我通过安装 Java Runtime 32 解决了这个问题，这在使用 FlashDevelop 时很重要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T10:16:27.837

如果您在 Windows Box 中安装了 cygwin，或者使用 UNIX Shell，那么

```
Issue bash#which java 
```

这将告诉您 java 是否在您的类路径中。

# ios - 如何在 iOS 中显示来自 IP 摄像机/CCTV 的 RTSP

> ID：15063720
> 
> 赞同：8
> 
> 时间：2013-02-25T09:25:03.643
> 
> 标签：ios, ios4, streaming, video-streaming, live-streaming

显然有一种方法可以做到这一点，因为很多应用程序已经在这样做了——NetCamViewer 和 iCamviewer 仅举一个例子。

我已经搜索和搜索，但我没有找到任何有价值的东西来暗示这是如何完成的。我伸出手希望有人能给我一个线索。

我正在尝试连接到支持 RTSP 协议的视频安全摄像头 (Y-CAM)，并显示来自我的 iPhone/iPad 应用程序的视频。摄像机有一个 IP 地址，我可以从网络浏览器和我的 Mac 上运行的 Quicktime 查看视频。问题是 iOS 不支持 RSTP，因此即使尝试在 iPad 上使用 Safari 进行连接也不起作用。

我读过有些人正在尝试使用 Live5555，但我还没有看到一篇文章描述它是否已成功完成以及如何完成。

另一种方法是在服务器上捕获 RTSP 流，将其转换为 HTTP Live 流，然后从 iOS 连接到 HTTP Live 流。不幸的是，事实证明这并不像听起来那么容易。

我更喜欢像我见过的其他应用程序一样直接进入相机。如果必须，RTSP to Live 是一个后备。

非常感谢任何提示。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T22:29:35.120

这是错误的 :) 或没有必要（另一种方法是在服务器上捕获 RTSP 流，将其转换为 HTTP Live 流，然后从 iOS 连接到 HTTP Live 流。不幸的是，事实证明这并不容易声音。）

您应该使用 ffmpeg 库，因为该库可以连接任何流媒体服务器（支持 rtsp、mms、tcp、udp 、rtmp ...），然后将图片绘制到屏幕上..（对于绘图，您可以使用 opengles 或 uiimage 也可以）

首先，使用 avformat_open_input 连接到您的 IP 地址，然后使用 avcodec_find_decoder 和 avcodec_open2 查找编解码器并打开它们（您应该为音频和视频调用它们）

然后，在while循环中使用av_read_frame方法从服务器读取数据包当你获取帧时，如果是音频则将其发送到AudioUnit或AudioQueue，如果是视频，则使用sws_scale方法将其从yuv转换为rgb格式并绘制图片到屏幕上。

就这样。

也看看这个包装器（[http://www.videostreamsdk.com](http://www.videostreamsdk.com)），它写在 ffmpeg 库上并支持 iOS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T17:44:07.143

您可以在 GitHub 上找到适用于 iOS的开源**FFMepg 解码器（和一些示例）：** [https ://github.com/mooncatventures-group](https://github.com/mooncatventures-group)

该库的示例使用：http: [//sol3.typepad.com/exotic_particles/](http://sol3.typepad.com/exotic_particles/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:02:35.160

你真的需要在发布之前搜索堆栈溢出，这个问题已经被问过很多次了。是的，有 555 种作品，我们中的一些人已经让它工作了。

还有其他玩家，包括我们的[http://www.streammore.tv/](http://www.streammore.tv/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-10T16:48:55.943

在 iOS Safari 上显示 RTSP 视频有两种通用技术：

*   RTSP / HLS (H.264+AAC)
*   RTSP / Websocket（H.264+AAC ==> MPEG+G.711 或 H.264+？）

对于 HLS，您可以考虑使用 Wowza 服务器。对于 iOS Safari 中的 Websocket 播放，您可以使用[WCS4 server](http://flashphoner.com/broadcasting-of-a-webrtc-stream-to-ios-safari-and-other-browsers-with-low-latency)。

websocket 播放的主要思想是直接将 HTML5 渲染到 HTML 页面 Canvas 元素和音频上下文。在 MPEG 播放的情况下，视频解码将在 iOS Safari 端使用纯 JavaScript 完成。

另一种选择 - 安装支持 getUserMedia 的 WebRTC 插件并通过 WebRTC 播放此流。无论如何，在这种情况下，您将需要一个服务器端 RTSP-WebRTC 转码器。

# sql - 将带有 Group by 和 Have 子句的 Sql 查询转换为 C# 中的 Linq To Sql 查询

> ID：15063724
> 
> 赞同：1
> 
> 时间：2013-02-25T09:25:12.010
> 
> 标签：sql, linq, linq-to-sql

我需要帮助将以下 ql 查询转换为 Linq to Sql 查询。

```
select Name, Address
from Entity
group by Name, Address
having count(distinct LinkedTo) = 1 
```

想法是找到只有 1 个不同的 LinkedTo 值的所有唯一名称、地址对。请记住，表中还有其他列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:33:52.897

我会尝试这样的事情：

```
Entity.GroupBy(e => new { e.Name, e.Address})
      .Where(g => g.Select(e => e.LinkedTo).Distinct().Count() == 1)
      .Select(g => g.Key); 
```

您应该在该行之后放置一个断点并检查生成的 SQL 以找到真正进入数据库的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:46:41.220

你可以使用：

```
from ent in Entities
group ent by new { ent.Name, ent.Address } into grouped
where grouped.Select(g => g.LinkedTo).Distinct().Count() == 1
select new { grouped.Key.Name, grouped.Key.Address } 
```

生成的 SQL 不使用`having`子句。我不确定 LINQ 是否可以生成它。

# mongodb - mongodb 查询 or 运算符

> ID：15063734
> 
> 赞同：-1
> 
> 时间：2013-02-25T09:25:59.633
> 
> 标签：mongodb

如在 ravendb 或操作不可用我们在 ravendb 中有查询。我希望使用 Query.Or 在 mongodb 查询中编写表达式

```
 var customerIdExpression = string.Format("CustomerId:({0})", string.Join(" OR "item.CustomerId)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:57:42.783

我拼凑了一个测试应用程序，它是我对您正在寻找的内容的解释：

```
var item = new {CustomerId = "123"};
var item2 = new { CustomerId = "123" };
var query1 = new QueryDocument("CustomerId", item.CustomerId);
var query2 = new QueryDocument("CustomerId", item2.CustomerId);
var logicalOrBetweenSubQueries = Query.Or(query1,query2); 
```

如果这是您要寻找的东西，我不能不认为可能有更好的方法来实现集合成员语义。像这样的东西可能有用：

```
var membership = Query.In("CustomerId", new[] { BsonValue.Create(item.CustomerId), BsonValue.Create(item2.CustomerId)}); 
```

这一切都取决于我对您问题的理解。

希望这可以帮助

ps一些链接

[http://docs.mongodb.org/manual/reference/operator/or/](http://docs.mongodb.org/manual/reference/operator/or/)

[http://docs.mongodb.org/manual/reference/operator/in/](http://docs.mongodb.org/manual/reference/operator/in/)

# objective-c - 如何从默认设置器名称中获取属性名称？

> ID：15063737
> 
> 赞同：1
> 
> 时间：2013-02-25T09:26:19.353
> 
> 标签：objective-c, properties

我试图从 setter 选择器中找出原始属性名称。例如，我知道 setter 被调用`setFoo:`并且想要获取`foo`. 这应该是一个非常简单的字符串处理任务（删除`set`第一个字母并将其更改为小写），但我想知道在 Objective-C 运行时的某个地方是否有任何开箱即用的解决方案。

我想这样使用它：

```
@interface MyClass : NSObject

@property (nonatomic, assign) BOOL foo;

@end

@implementation MyClass

@dynamic foo;

+(BOOL)resolveInstanceMethod:(SEL)sel
{
    const char* selectorName = sel_getName(sel);
    objc_property_t getterProperty = class_getProperty([self class], selectorName);
    objc_property_t setterProperty = class_getProperty([self class], getPropertyNameFromSetterName(selectorName));
    if (getterProperty) {
        // now I know that the property was declared and I should provide
        // the getter implementation
    } else if (setterProperty) {
        // I should provide the setter implementation
    }
}

@end 
```

# html - 如何在 html 表的一个列标题下包含 2 列？

> ID：15063738
> 
> 赞同：10
> 
> 时间：2013-02-25T09:26:20.600
> 
> 标签：html, asp.net, html-table

我想创建一个 html 表，它应该如下所示：

![在此处输入图像描述](../Images/b35f9fb6adbed26bba98b7746939366f.png)

我知道我将不得不使用 colspan/rowspan 属性，但如何？任何人都可以帮忙吗？

我试过以下：

```
<table>
<thead>
<tr>
<th>Evaluation</th><th>Approval</th>
<th colspan="2" >Points</th>
<th>Total</th>
<th>Date</th><th>Award Amount</th><th>Last Modified By</th>
</tr>
</thead>
<tbody>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
</tbody>
</table> 
```

但是给我的结果是：

![在此处输入图像描述](../Images/5cc729ab70dc4a560fd1a46165f5bb1c.png)

显然，我需要在第三个标题（点）中添加子标题，如何实现这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-25T09:30:03.467

像这样：

```
<table>
    <thead>
        <tr>
            <th rowspan="2">Evaluation</th>
            <th rowspan="2">Approval</th>
            <th colspan="2">Points</th> // <- note colspan here
            <th rowspan="2">Total</th>
            <th rowspan="2">Date</th>
            <th rowspan="2">Award Amount</th>
            <th rowspan="2">Last Modified By</th>
        </tr>
        <tr>
            <th>Tangible</th>
            <th>Intangible</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Al/GL</td>
            <td>Select</td>
            <td>col1</td>
            <td>col2</td>
            <td>col3</td>
            <td>col4</td>
            <td>col5</td>
            <td>col6</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T09:46:17.477

这是表格完整结构

```
<table>
    <tr>
        <td rowspan="2"></td>
        <td rowspan="2"></td>
        <td colspan="2"></td>
        <td rowspan="2"></td>
        <td rowspan="2"></td>
        <td rowspan="2"></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
    </tr>
</table> 
```

谢谢...

# sql - Oracle 查询中的 WITH AS

> ID：15063739
> 
> 赞同：-3
> 
> 时间：2013-02-25T09:26:20.740
> 
> 标签：sql, oracle

如果我的 oracle 查询中有不同的表，如何将它们分组到一个`WITH AS`查询中：

```
WITH A AS (
                SELECT A,B FROM TABLE1,
                SELECT C FROM TABLE2 ---> ??
     ) 
```

我想用“with as”函数翻译我的查询，包括不同的表。但似乎从其他表格中选择另一列表格不起作用。

```
Table1
A             B
data1        data1

Table2 
C
Data1 
```

我只想将它们查询到一个“With AS”语句中。:)

输出应该是

```
A            B          C
data1       data1     data1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:30:41.170

没有明显的理由需要使用子查询分解，但这里是如何做到的：

```
with data as ( select table1.A, table1.B, table2.C
               from table1 cross join table2 )
select * from data; 
```

显然，由于您的问题没有提供任何连接标准，因此您可以获得笛卡尔积。我怀疑这不是你想要的，但除非你能说出最充分的细节吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:01:00.887

```
WITH A AS (
    SELECT A, B  FROM TABLE1
    UNION/UNION ALL
    SELECT '','',C FROM TABLE2
) 
```

# asp.net-mvc - NotSupportedException - Membership.GetAllUsers

> ID：15063743
> 
> 赞同：0
> 
> 时间：2013-02-25T09:26:35.870
> 
> 标签：asp.net-mvc, membership, notsupportedexception

我的代码相当简单。

```
 var member = Membership.GetAllUsers(); 
```

执行此行时会抛出“NotSupportedExpcetion”。我正在尝试检索用户列表并填充 web ui。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:56:03.567

您可能正在使用 MVC4 中的默认 SimpleMembership 提供程序？它不支持 GetAllUsers() 等等。我的解决方案通常是自己动手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T22:28:45.883

尝试这个

```
public ActionResult GetUser()
    {

    UsersContext oModel = new UsersContext();

    return View(oModel.UserProfiles.ToList());

    } 
```

* * *

获取所有使用 simpleMemberShipProvider [ mvc 4] 注册的用户

# jquery - JQuery Ajax 调用 - 来自变量的参数

> ID：15063747
> 
> 赞同：0
> 
> 时间：2013-02-25T09:26:45.840
> 
> 标签：jquery, asp.net-mvc

我还有另一个问题:(我有 WS，wchich 是 VS 2010 MVC 应用程序的一部分。我可以调用它，它工作正常。我的问题是，我不能从变量（函数参数）传递参数

```
function test2(usr, art) {
    alert('start : ' + usr);

    var params = {user : usr, idArt : art}

    $.ajax({
        type: "POST",
        url: "/../WebServicePrzeczytany.asmx/Przeczytany",
        data: params,
        dataType: "json",
        success: function suc(msg) {
            alert("odebrane: ");
        },
        faild: fail
    });

    alert('stop : ' + art);
}; 
```

我从按钮调用它（用于测试）。有什么建议吗？

问题解决了 ：

再次非常感谢 Firebug 的 Anthony Grist（见评论）。这是一个强大的工具。

所以，Firebug 告诉我，我收到了来自 WS 的错误消息。它是：“请求格式无法识别，因为 URL 意外以“/Przeczytany”结尾”。

解决方案是添加

```
<webServices>
<protocols>
<add name="HttpGet"/>
<add name="HttpPost"/>
</protocols>
</webServices> 
```

到WS。就这样。朱皮！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:49:34.783

如果您为您的 Web 服务启用 JSON（通过使用`[ScriptService]`属性装饰方法），您将能够像这样调用它：

```
function test2(usr, art) {
    alert('start : ' + usr);

    var params = {user : usr, idArt : art}

    $.ajax({
        // TODO: never hardcode an url like that => use an url helper to generate that!
        url: '/../WebServicePrzeczytany.asmx/Przeczytany',
        type: 'POST',
        data: JSON.stringify(params),
        contentType: 'application/json',
        success: function suc(msg) {
            alert('odebrane: ');
        },
        error: fail
    });

    alert('stop : ' + art);
}; 
```

注意事项：

*   使用本`JSON.stringify`机方法将 javascript 对象转换为 JSON 字符串，然后再将其传递给 Web 服务
*   设置`contentType: 'application/json'`，因为这就是我们传递给服务的内容

留给你做：

*   将硬编码的 url 属性替换为从 url 助手生成的 url（例如`@Url.Content("~/WebServicePrzeczytany.asmx/Przeczytany")`）。

# database - 从另一个表中引用数据

> ID：15063749
> 
> 赞同：1
> 
> 时间：2013-02-25T09:26:59.233
> 
> 标签：database, database-design, foreign-keys

我正在创建一个数据库表，并希望确保其中一个列中的数据始终受另一个表的列中的数据限制。例如：

Table_1 有 Column_1
Column_1 可以有值：
v1
v2
v3
v4
v2
v3

现在我正在尝试使用 Column_3 创建 Table_2
并希望确保此列中的值始终是 Table_1:Column_1 的子集

有没有我可以应用的约束来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:31:26.160

在 Oracle 和 PostgreSQL 中，使用检查约束

例如，在 Oracle 中：

```
ALTER TABLE Table_3
ADD CONSTRAINT my_name
CHECK
    (column_3 in 
        (SELECT Column_1 FROM Table_1)) 
```

这也适用于 PostgreSQL

我相信在 SQL Server 和 DB2 中，您必须创建一个执行实际测试的函数，但除此之外都是一样的。该函数将有一个参数（column_3 的值）并返回 EXISTS（SELECT 1 FROM Table_1 WHERE Column_1 = argument）。

不幸的是，在 MySQL 中，您需要在插入和更新触发器上使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:21:13.193

是`Table_1.Column_1`独一无二的吗？

*   如果**是**，只需将其设为 PRIMARY KEY 或 UNIQUE，然后从`Table_2.Column_3`.
*   如果**否**（如您的示例显然暗示的那样），请从`Table_2`to`Table_1`的主键创建一个 FK。`Table_2.Column_3`甚至不存在，相反，您将通过 JOIN-ing 两个表来获得 的值`Table_1.Column_1`。您可以将该 JOIN 放在 VIEW 中，以使其（对客户端应用程序）看起来就像`Table_2.Column_3`实际存在一样。

# c# - 带外消息

> ID：15063750
> 
> 赞同：0
> 
> 时间：2013-02-25T09:27:02.560
> 
> 标签：c#, wcf

嗨，我必须在我的项目中实现双工绑定带外消息。是否有任何资源可以举例说明如何在 c# 中实现带外双工绑定消息？

# spring - Spring MVC REST的文件上传问题

> ID：15063755
> 
> 赞同：3
> 
> 时间：2013-02-25T09:27:11.267
> 
> 标签：spring, rest, spring-mvc, file-upload

我有基于 Spring MVC 的 REST 应用程序。正在尝试上传文件。这是代码片段。

*webmvc-config.xml*

```
<bean
    class="org.springframework.web.multipart.commons.CommonsMultipartResolver"
    id="multipartResolver">
    <property name="maxUploadSize" value="2000000" />
</bean>

<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="order" value="0" />
    <property name="defaultContentType">
        <ref bean="htmlMediaType" />
    </property>
    <property name="mediaTypes">
        <map>
            <entry key="json" value="application/json" />
            <entry key="xml" value="application/xml" />
            <entry key="file" value="multipart/form-data"/>
        </map>
    </property>
    <property name="defaultViews">
        <list>
            <bean
                class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
            <bean class="org.springframework.web.servlet.view.xml.MarshallingView">
                <property name="marshaller">
                    <bean class="org.springframework.oxm.castor.CastorMarshaller" />
                </property>
            </bean>
        </list>
    </property> 
```

*文件上传控制器.java*

```
@Controller
@RequestMapping("/appfiles")
public class FileUploadController {

private String saveDirectory = "C:/Downloads/"; 
@RequestMapping(value = "/appfiles", method = RequestMethod.POST, consumes="multipart/form-data", produces="application/json")
public ResponseEntity<List<Map<String, String>>> save(
        @RequestParam("file") MultipartFile file) {
    System.out.println("received file with original filename: " + file.getOriginalFilename());

    // List<MultipartFile> files = uploadForm.getFiles();
    List<Map<String, String>> response = new ArrayList<Map<String, String>>();
    Map<String, String> responseMap = new HashMap<String, String>();

    List<String> fileNames = new ArrayList<String>();

    if (null != file) {
        // for (MultipartFile multipartFile : files) {

        String fileName = file.getOriginalFilename();
        fileNames.add(fileName);

        try {
            file.transferTo(new File(saveDirectory
                    + file.getOriginalFilename()));
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    responseMap.put("displayText", file.getOriginalFilename());
    responseMap.put("fileSize", ""+file.getSize());
    response.add(responseMap);

    HttpHeaders httpHeaders = new HttpHeaders();
    httpHeaders.add("Accept", "application/json");
    return new ResponseEntity<List<Map<String, String>>>(response, httpHeaders, HttpStatus.OK);
}
} 
```

当我使用 chrome 扩展“邮递员”时出现以下错误

```
Could not parse multipart servlet request; nested exception is     org.apache.commons.fileupload.FileUploadException: the request was rejected because no multipart boundary was found
org.springframework.web.multipart.commons.CommonsMultipartResolver.parseRequest(CommonsMultipartResolver.java:163)
org.springframework.web.multipart.commons.CommonsMultipartResolver.resolveMultipart(CommonsMultipartResolver.java:139)
org.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:1020)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:883)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

postname 提交是通过以下详细信息完成的：

```
Headers
conent-type: multipart/form-data
Form-data:
file=<filename.txt>
Method=POST 
```

你能告诉我我的代码有什么问题吗？

感谢和问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-04T03:14:24.290

我也遇到了同样的问题，但是当我在没有任何 Header 值的情况下尝试它时它工作正常。

# javascript - Javascript：自我和这个

> ID：15063756
> 
> 赞同：7
> 
> 时间：2013-02-25T09:27:11.890
> 
> 标签：javascript, prototype, this, self

谁能解释为什么我会得到不同的自我价值和这个？self 是对此的引用。

```
function Parent(){
   var self = this;
   this.func = function(){
      // self.a is undefined
      // this.a is 'Test'
      console.log(self.a, this.a);
   }
}

function Child(x){
   this.a = x;
}

Child.prototype.__proto__ = new Parent;
var ch = new Child('Test');
ch.func(); 
```

我一直在项目中使用自我，这是我第一次遇到这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T09:34:06.610

这是因为`self`引用 的实例`Parent`，但只有 的实例`Child`具有`a`属性。

```
function Parent(){
   var self = this; // this is an instance of Parent
   this.func = function(){
      console.log(self.a, this.a);
   }
}

function Child(x){
    this.a = x; // Instances of Child have an `a` property
}

Child.prototype.__proto__ = new Parent;
var ch = new Child('Test');

ch.func(); // Method called in context of instance of Child 
```

因此，当您调用`func`的实例时`Child`，`this`指的是该实例。这就是为什么`this.a`在里面给你正确的值`func`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:43:28.700

在 内`func`，`this`指的是 的一个实例`Child`。

```
Child.prototype.__proto__ = new Parent; 
```

的原型`Child`设置为 的实例`Parent`。所以当`ch.func()`被调用时，`func()`是在 的原型链上`Child`，但是在其上下文中被调用的`ch`是 的实例`Child`

`self`仍然是指`Parent`没有属性的实例`a`

进一步说明：

```
var p = new Parent();

// this.a is undefined because this is an instance of Parent
p.func(); // undefined undefined 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-13T01:46:49.170

```
var myObject = {
    foo: "bar",
    func: function() {
        var self = this;
        console.log("outer func1:  this.foo = " + this.foo); //bar
        console.log("outer func2:  self.foo = " + self.foo); //bar
        (function() {
            console.log("inner func3:  this.foo = " + this.foo); //undefind
            console.log("inner func4:  self.foo = " + self.foo);//bar
        }());
    }
};
myObject.func();
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-13T02:22:51.523

```
function Foo() {
  this.bar = 'bar';
  return this;
}
Foo.prototype.test = function(){return 1;}

function Bar() {
  this.bro = 'bro';
  return this;
}
Bar.prototype.test2 = function(){return 2;}

function Cool2() {
  Foo.call(this);
  Bar.call(this);

  return this;
}
//console.log(Object.create(Bar.prototype));
var combine = Object.create(Foo.prototype);
//console.log(combine);

$.extend(combine, Object.create(Bar.prototype));
$.extend(combine, Object.create(Foo.prototype));

Cool2.prototype = Object.create(combine);
//Cool2.prototype.constructor = Cool2;

var cool = new Cool2();

console.log(cool.test()); // 1
console.log(cool.test2()); //2
console.log(cool.brow) //bro
console.log(cool.bar) //bar
console.log(cool instanceof Foo); //true
console.log(cool instanceof Bar); //false 
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.2.3/jquery.min.js"></script>
```

# c - 在 TCP 中检测到其他对等方已关闭

> ID：15063764
> 
> 赞同：0
> 
> 时间：2013-02-25T09:27:37.257
> 
> 标签：c, sockets, tcp

我正在通过 TCP 构建一个 APP 并检测另一端已关闭，我需要实现一个心跳机制，客户端不断发送伪 ping 数据包。我做了一些测试，看到当另一端宕机时，读取的字节数为0。

所以我可以不这样吗？：

```
If  FD is set, then 
read from fd
if read bytes is 0 then
Assume socket is closed, close fd and do a reconnect. 
```

这对我有用，所以我不明白保持活动的必要性，我对服务器有相同的逻辑，它对我有用。

我想得直吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:39:33.340

读返回0的原因是对端发送了FIN。如果您和对等方之间存在某些网络问题（网线已拔出），您的应用程序如何在没有 keepalive 的情况下检测到它？读取会阻塞很长时间（取决于您的操作系统环境）。

# ruby-on-rails - 由于 .gemrc 可能出现错误，无法运行 rails 命令

> ID：15063772
> 
> 赞同：0
> 
> 时间：2013-02-25T09:28:04.297
> 
> 标签：ruby-on-rails, gem, yaml, psych

当我键入诸如*"rails server"*或*"rails console" 之*类的命令时，我会收到一条很大的错误消息。

### 错误信息

> > 无法加载 /Users/user_name/.gemrc，因为它不包含有效的 YAML 哈希

### 大约一个小时前，当我运行这一系列命令时，麻烦就开始了。

> > sudo gem update --system
> > 9934 gem install gemcutter
> > 9935 gem tumble
> > 9936 gem update --system

根据我的研究，我推测这与我目前为空白的**.gemrc文件有关。**

我超出了我的深度，希望能提供任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:01:32.377

# 我解决了这个问题。

我在 rdoc 中做了一些额外的研究并找到了解决方案。我将 YAML 文件放置在错误的用户中。

谢谢##Kashyap。我现在了解系统安装和用户安装之间的区别。

# c - Photoshop CS5对Wintab驱动的使用

> ID：15063775
> 
> 赞同：1
> 
> 时间：2013-02-25T09:28:17.180
> 
> 标签：c, dll, wrapper, photoshop, wacom

Wacom 的驱动程序一直很糟糕，所以我目前正在研究一个 hack。

我遇到的主要问题是在平板电脑上进行校准。在你说什么之前：不，只是不。我已经尝试了几十个驱动程序，在少数可以工作的驱动程序中，没有一个允许校准 Wintab 输入。您可以校准 MS Ink，但这对于不支持 Ink API 的应用程序（如 Photoshop）没有任何作用。

在对这个问题进行了一些研究之后，我打算破解它的方法是为 wintab32.dll 编写一个包装器，该包装器在数据包发送到应用程序时对其进行调整，启用校准并可能调整压力敏感度以及我认为 Wacom 应该做的任何其他事情一直支持。

校准功能很简单，包装 wintab32.dll 并获取需要校准的数据也是如此。据我所知，大约有六个函数请求数据包数据，并且我在每个函数中都插入了代码来修改所述数据。

它也有效，至少如果我在一些 wintab 示例项目上测试它。

但是，Photoshop 是不同的。我可以确认它加载了打包的 DLL，打开了一个 wintab 上下文并使用 API 来请求数据包数据，然后在途中对其进行修改。但随后 Photoshop 会忽略修改，并*以某种方式*获取原始的、未校准的数据并使用它。我在 Wintab 文档中找不到任何东西来暗示这甚至是可能的。

我很困惑。有什么想法吗？

难道 Photoshop 只从 Wintab 请求数据包以清除数据包队列，然后执行其他操作来实际读取触控笔的状态？如果是这样，那会是什么？使用 WTInfo 轮询数据的一些秘密、晦涩的方法？Wintab 和底层驱动程序/串行端口之间的数据流挂钩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T11:01:44.537

我不太确定，但也许 Ink API 的输入也写在画布上。我的意思是，您现在正在使用两个输入进行编写，即 WinTab 和 Ink。知道了？
如果您可以忽略 Ink 输入，那将显示正确的结果。
P/S：这只是一种预感。

# c# - 在c#中的页面刷新中防止button_click事件

> ID：15063777
> 
> 赞同：0
> 
> 时间：2013-02-25T09:28:32.047
> 
> 标签：c#, asp.net

我想防止页面刷新中的 button_click 事件。我已经搜索过，但找不到任何与我相关的解决方案。我找到了这个： http:
[//www.dotnetspider.com/resources/42823-How-Avoid-Re-Submitting-Data-Page-Refresh.aspx](http://www.dotnetspider.com/resources/42823-How-Avoid-Re-Submitting-Data-Page-Refresh.aspx)

但我不需要在页面刷新中进入 button_click 事件。

Response.Redict("") 在这里也不相关，因为我在成功 button_click 后返回标签文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:35:03.430

你要找的不是那么简单。

您可以肯定使用的解决方案是[Post/Redirect/Get](https://stackoverflow.com/questions/5381162/post-redirect-get-with-asp-net)设计模式

或使用一些代码尝试检测页面的刷新：

[http://www.codeproject.com/KB/aspnet/DetectingRefresh_.aspx](http://www.codeproject.com/KB/aspnet/DetectingRefresh_.aspx)

[http://dotnetslackers.com/community/blogs/simoneb/archive/2007/01/06/Using-an-HttpModule-to-detect-page-refresh.aspx](http://dotnetslackers.com/community/blogs/simoneb/archive/2007/01/06/Using-an-HttpModule-to-detect-page-refresh.aspx)

# javascript - 如何使用 jquery 获取标签

> ID：15063779
> 
> 赞同：0
> 
> 时间：2013-02-25T09:28:32.983
> 
> 标签：javascript, jquery, zooming

她是我的html：

```
 <div class="product-img-box">
    <p class="product-image product-image-zoom">
        <a href='http://placehold.it/700x600' class='cloud-zoom' id='aMainImageZoom' rel="adjustX: 10, adjustY:-4">
            <asp:Image Style="max-height: 400px; width: 400px;" ImageUrl="http://placehold.it/300x350"
                runat="server" ID="imgProductImageLarge" />
        </a>
    </p>
    <div class="more-views">
        <div class=" jcarousel-skin-tango">
            <ul id="more_view">
                <li><a href='' class='cloud-zoom-gallery' title='Thumbnail 1'
                    rel="useZoom: 'zoom1', smallImage: './images/zoom2.jpg' ">
                    <asp:Image Style="max-height: 92px; width: 92px;" ImageUrl="http://placehold.it/300x351"
                        ID="imgFirst" runat="server" onmouseover='changeImage("thImg5");' /></a></li>
            </ul>
        </div>
    </div>
</div> 
```

这是我的脚本代码：

```
 <link href="css/cloud-zoom.css" rel="stylesheet" type="text/css" />
<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="js/cloud-zoom.1.0.2.js" type="text/javascript"></script>
$(document).ready(function () {
        $(function () {
            $("#imgFirst").on("mouseenter", function () {
                $("#<%=imgProductImageLarge.ClientID %>").attr("src", this.src);
                $("#aMainImageZoom").attr("href", "http://placehold.it/700x602");
            });
        });
    });
</script> 
```

这是我的 html 视图源：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" http://www.w3.org/TR/html4/loose.dtd>
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title><link href="css/cloud-zoom.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="js/cloud-zoom.1.0.2.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(function () {
                $("#imgFirst").on("mouseenter", function () {
                    $("#imgProductImageLarge").attr("src", this.src);
                    $("#aMainImageZoom").attr("href", "http://placehold.it/700x602e");
                });
            });
        });

    </script>
</head>
<body>
    <form method="post" action="WebForm1.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTUwNjA3NTE5MmRkpBlwGdNLH5SqyoT+HpJkrN3Qg3IyiI4/4Nchrs2wg+g=" />
</div>

    <div class="product-img-box">
        <p class="product-image product-image-zoom">
            <a href='http://placehold.it/700x600' class='cloud-zoom' id='aMainImageZoom' rel="adjustX: 10, adjustY:-4">
                <img id="imgProductImageLarge" class="mainImage" src="http://placehold.it/300x350" style="max-height: 400px; width: 400px;" />
            </a>
        </p>
        <div class="more-views">
            <div class=" jcarousel-skin-tango">
                <ul id="more_view">
                    <li><a href='' class='cloud-zoom-gallery' title='Thumbnail 1' rel="useZoom: 'zoom1', smallImage: './images/zoom2.jpg' ">
                        <img id="imgFirst" src="http://placehold.it/300x351" style="max-height: 92px; width: 92px;" /></a></li>
                </ul>
            </div>
        </div>
    </div>
    </form>
</body>
</html> 
```

我想在 imgFirst 的鼠标悬停时更改 aMainImageZoom href aMainImageZoom a。但我无法获得 MainImageZoom。你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:35:20.800

为什么不使用 jQuery，因为你加载它

[演示](http://jsfiddle.net/mplungjan/9j789/)

```
$(function() {
  $("#imgFirst").on("mouseenter",function () {
      $("#<%=imgProductImageLarge.ClientID %>").attr("src",this.src);
      $("#aMainImageZoom").attr("href","some other value");
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:31:57.147

你可以试试下面这个

```
$(document).ready(function(){

   $('#imgProductImageLarge').mouseenter(function(){

     $(this).parent("a").attr("href","new-val");
     return false;
   });

}); 
```

# regex - 逗号分隔列表

> ID：15063781
> 
> 赞同：-1
> 
> 时间：2013-02-25T09:28:40.413
> 
> 标签：regex

我正在寻找一个正则表达式，我需要一个逗号分隔列表，开头带有空格/逗号，以便对其进行验证，以便我可以删除字符串某些部分不需要的字符。

示例列表

```
,  Item1, Item2, Item3, Item4, Item5, 
```

但是我想去掉它的某些部分以像这样返回

```
Item1, Item2, Item3, Item4, Item5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:32:18.723

我认为最简单的方法是没有 Regex

```
 var input = ",     Item1, Item2, Item3, Item4, Item4,";
 var output = input.Trim(',',' '); 
```

# android - 我无法在 eclipse android 应用程序中访问库文件 JFUGUE.jar

> ID：15063790
> 
> 赞同：2
> 
> 时间：2013-02-25T09:29:21.670
> 
> 标签：android

我的 android 项目关于演奏钢琴音乐，所以我添加`jfugue.jar`到我的项目中。我的Java代码是：

```
 line no:29    Player player=new Player();
 line no:30    player.play("C D E F G A B"); 
```

上面的代码是用按钮 onclick 监听器编写的。当我点击`button`我得到`RunTimeEexception`的，如下：

```
 02-25 09:20:54.062: W/dalvikvm(846): VFY: unable to find class referenced in signature (Ljavax/sound/midi/Sequencer;)

   02-25 09:20:54.082: I/dalvikvm(846): Could not find method javax.sound.midi.MidiSystem.getSequencer, referenced from method org.jfugue.Player.<init>

   02-25 09:20:54.082: W/dalvikvm(846): VFY: unable to resolve static method 3600: Ljavax/sound/midi/MidiSystem;.getSequencer (Z)Ljavax/sound/midi/Sequencer;

    02-25 09:20:54.082: D/dalvikvm(846): VFY: replacing opcode 0x71 at 0x0011
    02-25 09:20:54.092: W/dalvikvm(846): VFY: unable to find exception handler at addr 0x1c
     02-25 09:20:54.102: W/dalvikvm(846): VFY:  rejected Lorg/jfugue/Player;.<init> (Z)V
    02-25 09:20:54.102: W/dalvikvm(846): Verifier rejected class Lorg/jfugue/Player;

     02-25 09:20:54.122: D/AndroidRuntime(846): Shutting down VM
    02-25 09:20:54.122: W/dalvikvm(846): threadid=1: thread exiting with uncaught exception (group=0x40a70930)

     02-25 09:20:54.152: E/AndroidRuntime(846): FATAL EXCEPTION: main
     02-25 09:20:54.152: E/AndroidRuntime(846): java.lang.VerifyError: org/jfugue/Player
    02-25 09:20:54.152: E/AndroidRuntime(846):  at com.example.xyz.MainActivity$1.onClick(MainActivity.java:29) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:02:10.980

我从未使用过 jFugue，但看起来你的问题是 Android 没有实现 javax.sound.midi。所以你需要找到/开发这个包的实现。

以下是讨论的一些选项：[除了 javax.sound.midi，Java 中一个简单的免费 MIDI 实现：有吗？](https://stackoverflow.com/questions/2758255/a-simple-free-midi-implementation-in-java-besides-javax-sound-midi-are-there-an)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:45:40.810

你在哪里插入你的jar文件。？另外请检查您是否已经构建了jar文件。

# knockout.js - cleanNode() 可以用来清理绑定吗？

> ID：15063794
> 
> 赞同：17
> 
> 时间：2013-02-25T09:29:37.473
> 
> 标签：knockout.js

使用下面的代码，input#p_in 将随着 input#s_in 的变化而更新。但我使用了 cleanNode(sec)。任何人都可以帮助理解为什么绑定没有被清除。

```
 <input id="p_in" data-bind="value: name"></input>
    <input id="s_in" data-bind="value: name"></input>
    <input id="cb" type="checkbox">same</input>

    <script type="text/javascript">
        function AddrDataSet (name) {
            this.name = ko.observable(name);
        };

        var primary_set = new AddrDataSet('p');
        var sec_set = new AddrDataSet('s');
        var pri = $('#p_in')[0];
        var sec = $('#s_in')[0];

        ko.applyBindings(primary_set, pri);
        ko.applyBindings(sec_set, sec);

        ko.cleanNode(sec); // clean it
        ko.applyBindings(primary_set, sec); // bind it to primary_set
        ko.cleanNode(sec); // clean it again

    </script> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-25T14:40:09.393

`ko.cleanNode`Knockout 在内部使用它来清理它创建的与元素相关的数据/计算。它不会删除任何由绑定添加的事件处理程序，也不会理解绑定是否对 DOM 进行了更改。这肯定会导致问题，例如在随后再次绑定元素时将多个处理程序附加到元素上。

所以，我不建议使用这种模式。更好的模式是在一个部分周围使用`with`或`template`绑定，并允许使用新的绑定重新渲染它。

# javascript - 如何每次检查用户会话是否在 JavaScript 中过期

> ID：15063795
> 
> 赞同：3
> 
> 时间：2013-02-25T09:29:37.913
> 
> 标签：javascript, session

每次检查会话是否已过期，如果是，则使用 JavaScript （如 facebook）重定向到主页，如果我按 `ctrl`+ `shift`+ `del`，则会显示登录窗口。我正在使用 .aspx 网页并使用 WCF 服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:37:12.790

我不知道这是否是最好的解决方案，但如果用户会话已过期，这是一个每 500 毫秒测试一次的解决方案

每 500 毫秒检查一次具有“setInterval”功能的会话变量：

```
 function CheckSession() {
                var session = '<%=Session["username"] != null%>';
                //session = '<%=Session["username"]%>';
                if (session == false) {
                    alert("Your Session has expired");
                    window.location = "login.aspx";
                }
            }

setInterval(CheckSession(),500); 
```

见这里：[http ://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/362898/check-for-session-timeout-in-javascript-and-redirect-to-login-page#](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/362898/check-for-session-timeout-in-javascript-and-redirect-to-login-page#)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T09:35:21.713

您可以编写一个 php 文件来检查会话是否已过期，如果已过期，则必须将标头作为 Location:homepage 提供参数，
该文件必须通过添加
“include'filename.php'”或“要求一次”包含在您的每个页面中“ 功能

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-03T09:26:42.620

如果您的任何应该具有值的会话变量是否为空，您基本上可以检查页面加载。如果会话变量为空，则重定向页面。

# objective-c - 带有 TextFields 的 iPhone TableView - 下一个，上一个按钮问题

> ID：15063798
> 
> 赞同：1
> 
> 时间：2013-02-25T09:29:55.973
> 
> 标签：objective-c, xcode, uitableview

我有一个表格视图，其中包含大量用于创建表单的单元格。我创建了一个自定义 TableViewCell。此单元格包含一个标签和一个文本字段，因此例如，每一行看起来像这样

![在此处输入图像描述](../Images/1330b5d63261e90c66474c2a07cd16a1.png)

我还有一个自定义表格单元格，其中包含一个标签和一个文本视图，看起来与上图相同，只是单元格更大以便为文本视图留出空间。

现在，这些文本字段和文本视图中的每一个都添加了一个工具栏，因此当文本字段成为第一响应者时，会显示一个工具栏，其中包含按钮、完成、上一个和下一个按钮。

```
 UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneWithTextField:)];

        UIBarButtonItem *nextButton = [[UIBarButtonItem alloc]initWithTitle:@"Next" style:UIBarButtonItemStyleDone target:self action:@selector(nextTableTextField:)];

        UIBarButtonItem *previousButton = [[UIBarButtonItem alloc]initWithTitle:@"Previous" style:UIBarButtonItemStyleDone target:self action:@selector(previousTableTextField:)];

        UIToolbar *numberToolbar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 50)];
        numberToolbar.barStyle = UIBarStyleBlackTranslucent;
        numberToolbar.items = [NSArray arrayWithObjects:
                               previousButton,
                               nextButton,
                               [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil],
                               doneButton,
                               nil];

        [numberToolbar sizeToFit];

        field.inputAccessoryView = numberToolbar; 
```

我遇到的问题是，假设我有 10 个这样的表格行，屏幕只能显示大约 5 个完整的行和第 6 行的一部分。我应该添加我还向文本字段委托添加了代码，以便当文本字段成为第一响应者时，屏幕滚动以允许文本字段完全显示。[有关代码，请参阅我的](https://stackoverflow.com/questions/12842085/xcode-textfield-keyboard-view-scroll-issue-when-home-button-is-pressed-while-edi)旧帖子。

因此，当屏幕加载时，我按下第一个单元格，然后单击下一步，工作正常，移动到下一个单元格中的第二个文本字段。然后我再次按下下一个按钮，它转到第 3 个单元格，然后是第 4 个单元格，然后是第 5 个单元格。现在问题出现了。当我在第 5 个单元格上并单击下一步时，第 6 个文本字段成为第一响应者，但由于某种原因屏幕不滚动。现在更大的问题是，当我再次单击下一步时，它不会移动到第 7 个文本字段，因为第 7 个单元格尚未在内存中，因为它在屏幕上不可见。所以如果我点击下一个，它不会做任何事情，文本字段 6 将保持作为第一响应者。所以我需要先向下滚动一点，以便在下一个按钮起作用并使下一个文本字段成为第一响应者之前可以看到单元格 7。

点击上一个按钮时也是同样的问题，如果点击上一个按钮并且前一个单元格不在屏幕中，那么它不会做任何事情，直到该单元格在屏幕上可见。

这让我很头疼，因为似乎无法解决这个问题。有没有其他人遇到过类似的问题？这个问题有什么好的解决方法吗？

提前致谢

编辑：

我还应该添加这使得保存数据成为一个问题，因为假设我有一个按钮，当单击该按钮循环遍历每个表格单元格并将数据保存在每个字段中时，它只会循环遍历屏幕上可见的表格单元格并忽略其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:32:48.303

它对我有用，我正在使用在按下键盘上的“完成”按钮将焦点移动到下一个文本字段单元格时触发的块：

```
FRTextFieldTableViewCell *textFieldCell = [tableView_ dequeueReusableCellWithIdentifier:[FRTextFieldTableViewCell reuseIdentifier]];
        if(textFieldCell == nil) {
            textFieldCell = [[FRTextFieldTableViewCell alloc] initWithStyle:
                             UITableViewCellStyleDefault reuseIdentifier:[FRTextFieldTableViewCell reuseIdentifier]];
        }

        [textFieldCell.textField initialize];
        textFieldCell.textField.secureTextEntry = (indexPath.row == 3);

        __weak FRSignUpViewController *self_ = self;
        __weak FRTextFieldTableViewCell *textFieldCell_ = textFieldCell;
        if(indexPath.row == 1) {
            textFieldCell.textField.placeholder = NSLocalizedString(@"name", @"");
            textFieldCell.object = self.regUser.name;
            textFieldCell.didChangedValueAction = ^(NSString *object) {
                [self_ setName:object];
            };
            textFieldCell.didEndOnExitAction = ^{
                [self_ setName:textFieldCell_.object];
                FRTextFieldTableViewCell *nextCell = (FRTextFieldTableViewCell *)[self_.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:2 inSection:0]];
                [nextCell.textField becomeFirstResponder];
            };
        }
        if(indexPath.row == 2) {
            textFieldCell.textField.placeholder = NSLocalizedString(@"email", @"");
            textFieldCell.didChangedValueAction = ^(NSString *object) {
                [self_ setLoginString:object];
            };
            textFieldCell.didEndOnExitAction = ^{
                [self_ setLoginString:textFieldCell_.object];
                FRTextFieldTableViewCell *nextCell = (FRTextFieldTableViewCell *)[self_.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:3 inSection:0]];
                [nextCell.textField becomeFirstResponder];
            };
        }
        if(indexPath.row == 3) {
            textFieldCell.textField.placeholder = NSLocalizedString(@"password", @"");
            textFieldCell.didChangedValueAction = ^(NSString *object) {
                [self_ setPasswordString:object];
            };
            textFieldCell.didEndOnExitAction = ^{
                [self_ setPasswordString:textFieldCell_.object];
                [self_ signUp];
            };
        }
        [textFieldCell reloadData];
        return textFieldCell; 
```

块类型定义：

```
/* type defenition for blocks, can be used by any app class */
typedef void (^CompletionBlock)(id, NSError *);
typedef void (^SimpleBlock)(void);
typedef void (^InfoBlock)(id);
typedef void (^ConfirmationBlock)(BOOL); 
```

TableViewCell 代码：

.h 文件：

```
#import "FRTableViewCell.h"
#import "BlocksTypedefs.h"
#import "FRTextFieldWithPadding.h"

@interface FRTextFieldTableViewCell : FRTableViewCell <UITextFieldDelegate>

@property (nonatomic, copy) SimpleBlock didEndOnExitAction;
@property (nonatomic, copy) SimpleBlock didEndEditingAction;
@property (nonatomic, copy) InfoBlock didChangedValueAction;
@property (nonatomic, strong) IBOutlet FRTextFieldWithPadding *textField;

@end 
```

米：

```
 #import "FRTextFieldTableViewCell.h"

@implementation FRTextFieldTableViewCell

- (void)awakeFromNib {
    [super awakeFromNib];
    self.backgroundColor = [UIColor clearColor];
}

- (void)reloadData {
    self.textField.text = self.object;
}

- (IBAction)textFieldValueDidChanged:(UITextField *)sender {
    self.object = sender.text;
    if (self.didChangedValueAction) {
        self.didChangedValueAction(self.object);
    }
}

- (IBAction)textFieldDidEndOnExit:(UITextField *)sender {
    self.object = sender.text;
    if (self.didEndOnExitAction) {
        self.didEndOnExitAction();
    }
}

#pragma mark - UITextFieldDelegate

- (void)textFieldDidEndEditing:(UITextField *)textField {
    self.object = textField.text;
    if (self.didEndEditingAction) {
        self.didEndEditingAction();
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:02:34.093

```
CGRect frame = CGRectMake(0.0, self.view.bounds.size.height, self.view.bounds.size.width, 44.0);
fieldAccessoryView = [[UIToolbar alloc] initWithFrame:frame];
fieldAccessoryView.barStyle = UIBarStyleBlackOpaque;
fieldAccessoryView.tag = 200;

[fieldAccessoryView setBarStyle:UIBarStyleBlack];

UIBarButtonItem *spaceButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone  target:self action:@selector(done:)];

UISegmentedControl* segmentedControl = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:NSLocalizedString(@"Previous", @""), NSLocalizedString(@"Next", @""), nil]];
[segmentedControl addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged];
segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
[segmentedControl setMomentary:YES];
UIBarButtonItem *segmentButton = [[UIBarButtonItem alloc] initWithCustomView:segmentedControl];

[fieldAccessoryView setItems:[NSArray arrayWithObjects:segmentButton, spaceButton, doneButton, nil] animated:NO];
[segmentButton release];
[spaceButton release];
[doneButton release];
[segmentedControl release]; 
```

# c# - 使用预定义的数组

> ID：15063800
> 
> 赞同：-6
> 
> 时间：2013-02-25T09:30:07.363
> 
> 标签：c#, arrays

我正在 C# 中创建一个自己的通用集合类，并且我正在处理一个数组，该数组存储一个应该具有预定义长度的列表（它应该从长度 2 开始）。现在我不知道如何让它以 2 的长度开始。例如，如果我创建一个数组：

私有 int[] 数字 = 新 int[20];

如何预定义它的长度，使其以 2 开头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:34:06.677

我认为没有理由这样做。但是，您可以创建长度为 2 的数组 ->

`private int[] numbers = new int[2];`.

此外，您可以使用它`List<T>`来做到这一点而忘记内存管理？:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:33:59.720

只需使用其中一个内置类。他们会为你避免错误的一切。

```
List<int> numbers = new List<int>();
        numbers.Add(123);
        int i = numbers[0];
        int[] asArray = numbers.ToArray(); 
```

# iphone - 大型 UITableViewCell 口吃

> ID：15063805
> 
> 赞同：1
> 
> 时间：2013-02-25T09:30:17.913
> 
> 标签：iphone, objective-c, uitableview, sdk

在我的应用程序中，我有一个 uiview，里面有一个 tableview。这个表格视图只包含一个相当高的单元格（约 750）并包含很多对象（uitextfields、uitextview、图像、按钮、uiscrollview、较小的 uitableview 等）。滚动似乎无法摆脱的 tableviewcell 时，我遇到了一点口吃。是一个单元格中的大量对象还是我应该将对象分配到多个单元格中以消除口吃？

如果有人遇到同样的问题并且可以在这里帮助我一点，那就太好了。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:23:16.027

我用 tableHeaderView 尝试了这个技巧 - 非常适合我！我也有很大的子视图层次结构。此外，如果您需要一些简单的自定义 UI 元素外观/消失动画，您可以将其划分为不同的单元格。我喜欢这样做，因为 UITextViews 和 UITextFields - UITableViewController 自动为键盘外观进行布局。

# javascript - 打印多维Javascript数组

> ID：15063814
> 
> 赞同：0
> 
> 时间：2013-02-25T09:30:53.257
> 
> 标签：javascript, jquery, json

发送字符串的代码如下所示，可能是 json 响应吗？

```
 $.getJSON(loadUrl, parameters, function (response) {
        callback(response.data);
    }) 
```

这是否意味着响应确实是 json？请参阅下面的屏幕截图，了解给出的实际响应（使用时`alert(data)`）：

![在此处输入图像描述](../Images/c2c2cfca483da978b7fb305fe0e7395a.png)

编辑：我认为返回的数据确实是 json。这是打印数据返回时控制台的样子： ![在此处输入图像描述](../Images/9d43d0b70f19403aa5b8d6cc611c3ed1.png)

编辑2：

响应确实是 json。我像下面这样循环它：

```
$(data).each(function(index, element){  
$('#scores').append('<tr><td> '+element[0]+' </td> <td> '+element[1]+' </td></tr>');       
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:39:12.813

正如 deceze 所说，您应该用逗号分隔字符串

```
var str="/startpage,147,/contact,97";
var n=str.split(","); //['/startpage','147',/contact','97' ] 
```

然后循环数组以创建html

```
for(i=0; i < n.length; i+=2)
{
  var title = n[i];
  var value = n[i+1];
} 
```

请注意，这是一个非常肮脏的解决方案。如果您可以控制字符串的来源，则应考虑更改为另一种格式，例如 JSON 或 XML

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:42:01.377

像之前一样拆分字符串并将其转换为 JSON 对象。然后你可以很容易地从中创建表..

ref :[使用 JSON 数据创建表的 jQuery 函数](https://stackoverflow.com/questions/7803171/jquery-function-to-create-table-using-json-data)

# mobile - 如何通过贝宝向商店业务帐户付款？

> ID：15063815
> 
> 赞同：0
> 
> 时间：2013-02-25T09:31:06.753
> 
> 标签：mobile, paypal, paypal-sandbox

我正在开发一个移动应用程序，我在其中展示来自不同商店的产品（项目），就像 ebay.com 一样。用户可以选择产品，可以添加到购物车，然后最终可以通过贝宝付款。

我在沙盒上创建了一个 Paypal 商业帐户。目前，用户支付的所有款项都汇入了我在代码中提到的这个企业账户。但是我的要求不一样。我希望付款应该转到商店（产品所有者）的帐户。

因此，我进行了更改，以便每当我拨打贝宝时，我都会将企业帐户电子邮件更改为商店所有者的电子邮件地址并成功完成付款。:) 付款张贴到店主业务。

我只在 paypal.recipient 电子邮件地址中进行了更改，但 paypal 对象仍然是由我的 paypal 应用程序 ID 创建的。这就是我所担心的。它可以在生产模式下工作吗？我真的很怀疑。

请大家帮帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:23:54.203

您使用什么 API 或服务来执行此操作？您只是在使用网站支付标准、Exprses Checkout 还是其他 API 之一？您提到了应用程序 ID，您使用的是自适应付款吗？如果您还没有这样做，您可以使用 Adative Payments 来做您想做的事情。这将允许您处理付款并在不同帐户之间拆分。在您的商业模式中，如果买家结账时包含来自不同商家/商店的商品，您可以在不同的店主之间分摊付款。

# c# - 通过静态属性组合具有不同导出名称的共享部件

> ID：15063818
> 
> 赞同：0
> 
> 时间：2013-02-25T09:31:16.213
> 
> 标签：c#, static, mef, .net-4.5, composition

需求——

1.  声明同一接口的共享导出。出口标有独特的出口名称，因此消费者可以进口特定风味的出口产品。
2.  将类的公共实例注入一组对象，但不跨对象集共享公共实例[这使我使用不同的键使用共享导出-一组对象可以使用单个键来满足它们的共享导入需要]

这是导出类

```
public interface IMyExport
{
    void Display();
}

public class MyExport : IMyExport
{
    private Guid _id = Guid.NewGuid();

    public void Display()
    {
        Console.WriteLine("Instance ID = "+_id);
    }
} 
```

这是我如何导出类的实例

```
public static class ExportInitialization
{
    [Export("Type A", typeof(IMyExport)),
    Export("Type B", typeof(IMyExport))]
    public static IMyExport IceCreamExport
    {
        get
        {
            return new MyExport();
        }
    }
} 
```

消费者可以通过以下方式导入特定实例

```
[Export]
public class ImporterA
{
    private readonly IMyExport _myExport;

    [ImportingConstructor]
    public ImporterA([Import("Type A")]IMyExport myExport)
    {
        _myExport = myExport;
    }

    public void Display()
    {
        _myExport.Display();
    }
}

[Export]
public class ImporterB
{
    private readonly IMyExport _myExport;

    [ImportingConstructor]
    public ImporterB([Import("Type B")]IMyExport myExport)
    {
        _myExport = myExport;
    }

    public void Display()
    {
        _myExport.Display();
    }
}

class Program
{
    [Import]
    public ImporterA ImporterA { get; set; }

    [Import]
    public ImporterB ImporterB { get; set; }

    static void Main(string[] args)
    {
        new Program().Run();
    }

    public void Run()
    {
        var container = new CompositionContainer(new AssemblyCatalog(Assembly.GetExecutingAssembly()));
        container.ComposeParts(this);

        ImporterA.Display();
        ImporterB.Display();

        Console.ReadKey();
    }
} 
```

这曾经与 .Net 4.0 一起正常工作，但是当安装 .Net 4.5 时 - 我得到以下输出

```
Instance ID = 78bba41a-0c48-44fc-ae69-f0ead96371f9
Instance ID = 78bba41a-0c48-44fc-ae69-f0ead96371f9 
```

请注意，两个导入都返回了相同的对象实例。我是否违反了一些关于通过静态属性导出的未记录规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:04:53.070

我发现从两个不同的静态属性导出特定实例可确保返回 2 个不同的实例。

```
 [Export("Type A", typeof(IMyExport))]
    public static IMyExport ExportA
    {
        get
        {
            return new MyExport();
        }
    }

    [Export("Type B", typeof(IMyExport))]
    public static IMyExport ExportB
    {
        get
        {
            return new MyExport();
        }
    } 
```

这令人费解，因为在未修改的版本中，静态 getter 在每次获取时都会创建一个新实例。不确定这是否是 4.5 引入的某些 C#/.Net 优化的结果，或者这是否是 MEF 问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:50:43.307

这与[MEF 部件的使用寿命](http://mef.codeplex.com/wikipage?title=Parts%20Lifetime)有关。

MEF 属性的默认设置是组件不会说明它们是否每次都关心获取新实例。

意思是：

*   您`ExportAttribute`没有指定是否可以或应该共享导出的实例；
*   两个`ImportAttribute`s 都没有指定是否应该共享它们的导入；

MEF 的默认行为是，如果不禁止共享实例，则它会。这意味着，根据文档，.NET 4.5 的行为是正确的：实例`MyExport`是共享的，因为双方都没有明确禁止共享。

我认为 .NET 4.0 存在每次调用静态属性的错误/差异，这导致了您观察到的情况，即非共享实例。而你依赖于那个错误。我认为这个错误的根源在于对属性的基本的、框架范围的期望——让静态属性为每个属性调用创建一个新的、语义上不同的实例是非常不寻常的。

我相信你应该：

1.  将您的静态属性导出替换为静态方法导出；
2.  在导出端或导入端将创建策略指定为非共享；

# c# - 如何在 C# (ASP.NET) 中以编程方式禁用 SSL CA 根证书的所有用途

> ID：15063819
> 
> 赞同：1
> 
> 时间：2013-02-25T09:31:16.693
> 
> 标签：c#, asp.net, cryptography, ssl-certificate, x509

由于 Thawte（和其他几个 CA）从 1024 位根转换为新的、更安全的 2048 位根，因此某些 SSL 证书（例如 Thawte 通配符证书）的验证变得复杂，因为它包含“thawte 主根 CA “在其证书链中。

这导致某些浏览器在 Windows 中安装时无法验证证书。可在[http://www.tbs-certificats.com/FAQ/en/608.html](http://www.tbs-certificats.com/FAQ/en/608.html)找到手动解决方案。

这里的挑战在于，对于某些托管环境，例如 Microsoft Azure，网站的底层操作系统实例可以随时更改，这种手动更改将毫无用处，因为根证书将不断“刷新”到其原始“错误”状态。

一些文章为我指出了正确的方向，以编程方式进行此更改（ [http://en-us.sysadmins.lv/Lists/Posts/Post.aspx?List=332991f0-bfed-4143-9eea-f521167d287c&ID=69](http://en-us.sysadmins.lv/Lists/Posts/Post.aspx?List=332991f0-bfed-4143-9eea-f521167d287c&ID=69)和[http ://forums.asp.net/t/1531893.aspx/1](http://forums.asp.net/t/1531893.aspx/1) )。似乎唯一的方法是使用 CryptoAPI。

以下是我尝试实现此目的的控制台应用程序代码：

```
class Program
    {
        [DllImport("Crypt32.dll", SetLastError = true, CharSet = CharSet.Auto)]
        public static extern bool CertGetCertificateContextProperty(
            IntPtr pCertContext,
            uint dwPropId,
            Byte[] pvData,
            ref uint pcbData
        );

        [DllImport("Crypt32.dll", SetLastError = true, CharSet = CharSet.Auto)]
        public static extern bool CertSetEnhancedKeyUsage(
            IntPtr pCertContext,
            IntPtr pUsage
        );

        static void Main(string[] args)
        {
            try
            {
                X509Store store = new X509Store(StoreName.Root, StoreLocation.LocalMachine);
                store.Open(OpenFlags.ReadWrite | OpenFlags.OpenExistingOnly);

                X509Certificate2 cert = store.Certificates.Find(X509FindType.FindBySerialNumber, "344ed55720d5edec49f42fce37db2b6d", false)[0];

                if (!cert.Equals(IntPtr.Zero))
                {
                    uint pcbData = 0;
                    // if the function returns True, then certificate purposes are either disabled or constrained
                    // otherwise (False) valid purposes are determined by certificate's EKU
                    if (CertGetCertificateContextProperty(cert.Handle, 0x9, null, ref pcbData))
                    {
                        // create a buffer for ASN.1 encoded byte array
                        byte[] pvData = new byte[pcbData];
                        // call the function again to write actual data
                        CertGetCertificateContextProperty(cert.Handle, 0x9, pvData, ref pcbData);
                        // instantiate AsnEncodedData object with ASN.1 encoded byte array
                        AsnEncodedData asn = new AsnEncodedData("", pvData);
                        // instaintiate X509EnhancedKeyUsageExtension to retrieve OIDs in a readable form
                        X509EnhancedKeyUsageExtension eku = new X509EnhancedKeyUsageExtension(asn, false);
                        // if none OIDs are defined, then all certificate purposes are explicitly diabled in the properties
                        if (eku.EnhancedKeyUsages.Count == 0)
                        {
                            Console.WriteLine("All purposes for this certificate are explicitly disabled.");
                        }
                        else
                        {
                            // constrained OIDs
                            OidCollection keyUsages = eku.EnhancedKeyUsages;

                            // disable all purposes by emptying EnhancedKeyUsages
                            IntPtr pUsage = Marshal.AllocHGlobal(0);
                            CertSetEnhancedKeyUsage(cert.Handle, pUsage);                           
                        }
                    }
                    else
                    {
                        Console.WriteLine("Valid purposes are determined by the certificate EKU extension.");
                    }
                }
                else
                {
                    throw new ArgumentException("An attempt was made to access an uninitialized object.");
                }

                store.Close();
            }
            catch (CryptographicException)
            {
                Console.WriteLine("Information could not be written out for this certificate.");
            }

            Console.ReadLine();
        }
    } 
```

这样做的结果似乎是积极的，因为在控制台应用程序的第二次运行中，所有目的似乎都已禁用，但需要注意的是，更改在 certmgr.msc 中不可见，目的看起来仍处于启用状态。

此外，当上面的代码放在我的 MVC 网站的 Global.asax 中时，它似乎对证书没有任何影响。

所以我的问题是2倍：

1.  如何禁用证书的所有用途，从而导致 Windows 证书管理单元显示证书更改？

2.  如何在 ASP.NET 中持续实现这一目标？

# php - 是否有资源/服务器超时测试？

> ID：15063822
> 
> 赞同：1
> 
> 时间：2013-02-25T09:31:32.717
> 
> 标签：php, http, timeout

我正在尝试重新创建 file_get_contents 的源超时时发生的问题。我正在尝试编写一些 PHP 来检查这一点，并在发生这种情况时在站点内显示错误消息，而不是默认的整页错误，不允许您使用站点的其余功能。

我尝试设置超时限制并使用睡眠，将标头作为超时状态代码返回，但两者都不会复制问题。

互联网上有没有为测试而设置的资源，或者有没有更好的方法来复制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:38:00.173

如果您使用的是 windows 盒子，那么 fiddler2 [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)将是一个好的开始。Fiddler2 可以很容易地编写脚本，它可以创建您想要的任何类型的超时条件。您可能想从这里开始：[http ://www.fiddler2.com/Fiddler/dev/ScriptSamples.asp](http://www.fiddler2.com/Fiddler/dev/ScriptSamples.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:36:06.463

您可以使用带有 'context' 值的[file_get_contents()来指定超时设置。](http://www.php.net/manual/en/function.file-get-contents.php)[您可以使用stream_context_create()](http://www.php.net/manual/en/function.stream-context-create.php)创建上下文资源，它允许指定各种流/文件选项，详见[此处](http://www.php.net/manual/en/context.php)。

对于超时，您需要设置“ [http](http://www.php.net/manual/en/context.http.php) ”选项，特别是“超时”参数。

# c++ - Qt QNetworkReply 连接关闭

> ID：15063824
> 
> 赞同：1
> 
> 时间：2013-02-25T09:31:38.247
> 
> 标签：c++, qt, network-programming

我尝试在 c++ 中对 url 执行 post 方法`https://...`，但收到连接关闭错误。

如果我使用另一个 url，我发现我的代码有效`https://www.google.gr`。

如果我删除端口`8181` ，我会收到错误：`server replied:not found`.

我的代码是

```
static const char *REQUEST_URL="https://...";
static const char *USER = "....";
static const char *PASSWORD = "....";

MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    finishedexecuted=0;
    QByteArray postData;
    postData.append("username=...");
    postData.append("password= ...");
    m_network = new QNetworkAccessManager(this);
    QNetworkRequest request;
    request.setHeader(QNetworkRequest::ContentTypeHeader, "application/json");
    QUrl url=QUrl(REQUEST_URL);
    request.setUrl(url);
    QSslConfiguration config = request.sslConfiguration();        
    QList<QSslCertificate> certs = 
                          QSslCertificate::fromPath("pistopoiitiko.crt");
    config.setCaCertificates(certs);        
    request.setSslConfiguration(config);
    QNetworkReply *reply = m_network->post(request,postData);

    downloadTime.start();
    QObject::connect(reply, SIGNAL(downloadProgress(qint64,qint64)),
                     SLOT(slotSetProgress(qint64,qint64)));
    QObject::connect(m_network, SIGNAL(finished(QNetworkReply *)),
                     SLOT(slotRequestFinished(QNetworkReply *)));

    connect(m_network, 
            SIGNAL(sslErrors(QNetworkReply *, const QList<QSslError> &)),
            this, 
            SLOT(sslError(QNetworkReply*, const QList<QSslError> &)));
    } 

void MainWindow::sslError(QNetworkReply* reply, 
                           const QList<QSslError> &errors )
{...}

void MainWindow::slotRequestFinished(QNetworkReply *reply)
{
 ...
    if (reply->error() > 0) {
    m_label->setText("Error number = " + reply->errorString());
   }
 ...
}

void MainWindow::slotSetProgress(qint64 received, qint64 total)
{...} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:48:00.953

我用这段代码克服了这个问题

```
QSslConfiguration config = QSslConfiguration::defaultConfiguration();
config.setProtocol(QSsl::SslV3); 
```

然后我收到了我通过 ignoresslerrors() 传递的 ssl 错误

# javascript - 具有空数据模型的 Knockout.js applyBindings

> ID：15063831
> 
> 赞同：2
> 
> 时间：2013-02-25T09:32:13.543
> 
> 标签：javascript, knockout.js

当 viewModel 的 dataModel 未知时，是否可以 applyBindings？我的问题是，在页面上的 ajax 调用之后首先知道 dataModel 结构，而我理解 knockout.js 的方式是 viewModel 应该在页面加载时初始化？

代码失败，nCustomerId 未定义。

我该如何处理？我可以等待调用 ko.applyBindings() 直到我知道 dataModel 结构（我在 ajax 调用之后执行），但是在使用 knockout.js 时这是正确的方法吗？

```
function initModel () {
var kunderModel = function () {
    var self = this;
    self.list = ko.observableArray();
    self.selectedItem = ko.observable();
    self.newItem = ko.observable();  

    self.add = function () {
        self.selectedItem(newItem(self.newItem));
        showInputContainer();
    };

    self.getList = function () {
        var nButikId = jQuery("#butikid").val();
        jQuery.ajax({
            url: "crm_service.wso/Dan_Butik_Kunder_Tabel/JSON/",
            data: { nButikId: nButikId },
            success: function (data) {
                self.list(data);
            },
            complete: function () {
                connectExt.UIElements().Loading(false);
            }
        });
    }
}
}

    _viewModel = new kunderModel();
    ko.applyBindings(_viewModel);

    jQuery(document).ready(function () {
        initModel();
    });

<div data-bind="template: { name: 'editTmpl', data: selectedItem }"></div>

<script id="editTmpl" type="text/html">      
    <div  class="opretContainer">
        <div class="opretContainerTitle">
            <span data-bind="visible: nCustomerId == 0">New</span>
            <span data-bind="visible: nCustomerId != 0">Edit</span>
        </div>
    </div>
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T10:10:52.750

你不需要**initFuction**。您应该做的是直接在 JQuery 文档回调中初始化**_viewModel 。**

您必须了解您的 ViewModel 本身已经是一个函数。初始化时，您可以直接在视图模型中调用**getList函数。**

我会做什么：

```
jQuery(document).ready(function () {
    _viewModel = new kunderModel();
    ko.applyBindings(_viewModel);    
}); 
```

而不是在 kunderModel 内部：

```
var kunderModel = function () {
   var self = this;
   self.list = ko.observableArray();

   self.getList = function () {
       var nButikId = jQuery("#butikid").val();
       jQuery.ajax({ ... });
   };

   self.getList();
} 
```

这样，**getList**方法在 ViewModel 创建结束时被调用。（我认为它是一种由“构造函数”调用的方法。由于一切都是可观察的，所以当执行回调时，您的 UI 将自动更新。

# css - 如何在 HTML 中包含 SCSS 文件

> ID：15063834
> 
> 赞同：50
> 
> 时间：2013-02-25T09:32:23.317
> 
> 标签：css, sass, scss-mixins

我不知道如何在我的网站中包含 SCSS 文件，但我已经使用记事本完全开发了 .scss 文件。请让我知道如何将其包含在我的网站中？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-25T16:13:08.033

您的 HTML 页面中不能有指向 SCSS 文件的链接。您必须先将其编译为 CSS。不，您可能想查看很多视频教程。Lynda 提供了关于 SASS 的精彩视频教程。还有免费的截屏视频，你可以用谷歌搜索...

有关官方文档，请访问此站点 [http://sass-lang.com/documentation/file.SASS_REFERENCE.html](http://sass-lang.com/documentation/file.SASS_REFERENCE.html) 为什么选择记事本来编写 Sass？您可以轻松下载一些免费的文本编辑器，以便更好地处理代码。

# sql-server - SQL Server 对称密钥丢失，如何解密数据？

> ID：15063836
> 
> 赞同：0
> 
> 时间：2013-02-25T09:32:39.203
> 
> 标签：sql-server, encryption-symmetric

我们处于删除对称密钥和证书的情况，有什么办法可以解密数据？

我们尝试使用用于创建主密钥、证书和对称密钥的相同脚本解密数据。

谢谢维韦克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:40:51.790

## 根据定义：**否**

如果可能的话，这将意味着 SQL Server 中的整个加密功能将毫无用处。你能定义什么`we lost the symmetric key and database certificate`意思吗？您唯一的机会是，如果您对“丢失”的理解不正确，并且您仍然在*某处*拥有钥匙。如果仍然有使用密钥加密的数据，SQL Server 将拒绝丢弃密钥。此外，通过“数据库证书”定义您所理解的内容也是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T09:24:17.803

使用对称密钥加密数据时，它使用 GUID 进行加密。GUID 在创建对称密钥时自动生成。因此，如果您尝试使用新生成的对称密钥（与旧对称密钥相同）解密数据，它将使用新`GUID`的，因此您无法解密它。

您可以使用以下查询看到这一点：（Key_Guid 正在更改）

```
CREATE SYMMETRIC KEY KeyTest WITH ALGORITHM = TRIPLE_DES  ENCRYPTION BY PASSWORD = 'EncryptPwd'

select * from sys.symmetric_keys

DROP SYMMETRIC KEY KeyTest 

CREATE SYMMETRIC KEY KeyTest WITH ALGORITHM = TRIPLE_DES  ENCRYPTION BY PASSWORD = 'EncryptPwd'

select * from sys.symmetric_keys 
```

# java - 如何在 java 中获取带注释的值？

> ID：15063838
> 
> 赞同：2
> 
> 时间：2013-02-25T09:32:42.380
> 
> 标签：java, hibernate, validation, annotations

我正在尝试[`@Pattern`](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/Pattern.html)验证输入的注释

```
 @Pattern(regexp="[A-Za-z0-9_.]*", message="Name can only contain alphanumeric characters and underscores and dots")
    public String getName() {
        return name;
    } 
```

我还希望错误包含传递`message`的实际值。`name`如何在注释调用中访问它？例如，我想要类似的东西：

```
 @Pattern(regexp="[A-Za-z0-9_.]*", message="Name can only contain alphanumeric characters and underscores and dots. Provided name: " + name + " is not valid") 
```

我试过这个并得到一个错误说`The value for annotation attribute Pattern.message must be a constant expression`。有什么方法可以在注释定义中获取实际变量值（特别是错误消息）？我想通过显示实际提供的值来使错误消息更有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:42:58.650

您可能需要一个自定义约束来覆盖@Pattern 生成的默认错误消息。[在此处](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html_single/#validator-customconstraints-simple)查看相关文档。

# c# - Firefox：图像不会加载到 aspx 代码上

> ID：15063842
> 
> 赞同：-1
> 
> 时间：2013-02-25T09:32:56.687
> 
> 标签：c#, asp.net, firefox

我只是使用简单的代码在 asp.net 图像控件中加载图像，它在 IE 中工作正常，但 Firefox 不显示图像。代码行是：

```
 string path = "F:\\Image\\";
    string img = "header-firefox.PNG";
    Image1.ImageUrl = path + img; 
```

错误是：

地址不明白

Firefox 不知道如何打开这个地址，因为协议 (f) 没有与任何程序相关联。

甚至 file:///F:/Image/header-firefox.PNG 路径在代码中也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:36:09.357

您是说这是您在 HTML 中看到的路径吗？我知道反斜杠在 C# 中被转义，但在 HTML 中肯定路径应该是`"\\192.172.60.05\Users\4133.Png"`？

您是否尝试过在 Firefox 中直接导航到 \192.172.60.05\Users\4133.Png？

# facebook - 某些用户的 facebook oauth 令牌已过期

> ID：15063845
> 
> 赞同：0
> 
> 时间：2013-02-25T09:33:12.650
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

为什么 facebook 令牌会过期，我看到有些人看到它，有些人没有看到。我正在使用以下范围

```
public static string _FacebookExtendedPermissions = "user_about_me,publish_stream,read_stream,user_photos"; 
```

我还需要添加更多内容吗？听说“offline_access”已被弃用。

谢谢苏吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:39:08.020

得到了解决方案。您可以通过以下代码将您的令牌延长 60 天

```
https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=CLIENT_ID&client_secret=CLIENT_SECRET&fb_exchange_token=SHORT_LIVED_ACCESS_TOKEN 
```

谢谢。苏吉特

# javabeans - 将类命名为与其包相同的名称是否违反 Java 标准？

> ID：15063847
> 
> 赞同：0
> 
> 时间：2013-02-25T09:33:28.987
> 
> 标签：javabeans

如果我有一个名为 xx.yy.product 的包将所有与产品相关的 bean 组合在一起，那么在同一个包中还有一个名为 Product 的 bean 是否违反 Java 标准？

```
xx.yy.product 
      |
      |-> Product.java
      |-> ProductCategory.java
      |-> ProductAlert.java
       ... 
```

谢谢，
稻田

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:34:57.343

不，它不会破坏任何 Java 标准。

在您的示例中，这是正确的，包是用小写字母编写的。所以你有了`com.xxx.product`

根据 Java 标准类应该以大写字母开头。在这种情况下，产品。所以很明显，`com.xxx.product`引用包和`com.xxx.product.Product`引用类。

# android - 为什么在启动应用程序之前就出现“不幸的是 APP_NAME 已停止”的错误？

> ID：15063853
> 
> 赞同：-1
> 
> 时间：2013-02-25T09:33:49.500
> 
> 标签：android

我有这个问题，我无法弄清楚原因。我知道 Stack Overflow 中有很多关于此错误的类似问题，但我找不到任何解决我的问题的方法，因为我没有任何 logcat 错误**，因为即使在我启动我的应用程序之前就发生了错误。**

我的应用程序运行良好，但不知何故，重新启动手机后，没有启动应用程序，出现错误“不幸的是 APP_NAME 已停止”。谁能告诉我可能是什么原因，我该如何调试和解决这个问题？

提前致谢。

**更新：** 链接到我的清单：[http ://pastie.org/pastes/6332771/text?key=ay9snpcgwce9cgoxsl5tzg](http://pastie.org/pastes/6332771/text?key=ay9snpcgwce9cgoxsl5tzg)

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.test.honey"
android:versionCode="1"
android:versionName="1" >

<uses-sdk android:minSdkVersion="9" android:targetSdkVersion="17" />  

  <permission android:name="com.test.honey.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="com.com.test.honey.permission.C2D_MESSAGE" /> 

    <!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.VIBRATE" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS"></uses-permission>
<uses-permission android:name="android.permission.CAMERA"></uses-permission>
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
<uses-permission android:name="android.permission.READ_CONTACTS"></uses-permission>
<uses-permission android:name="android.permission.SEND_SMS"></uses-permission>
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>  
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.READ_FRAME_BUFFER"/> 
<uses-permission android:name="android.permission.SET_ALARM" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />

<application
    android:icon="@drawable/mj_icon"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Light.NoTitleBar"
    android:largeHeap="true">

<uses-library android:name="com.google.android.maps" /> 

    <activity android:name="com.test.honey.Splash" android:label="@string/app_name" android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

 <!--ACTIVITIES HERE-->

  <receiver android:name="com.test.honey.MyReceiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <category android:name="android.intent.category.HOME" />
        </intent-filter>
    </receiver>

    <receiver android:name="test.honey.AlertReceiver" />
    <receiver android:name="test.honey.SchedulerReceiver" />

    <provider android:name="test.honey.database.DataProvider1" android:authorities="test.mycare1" />

   <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>

            <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.test.honey" />
        </intent-filter>
    </receiver>

    <service android:name=".GCMIntentService" />

</application>

</manifest> 
```

*我无法透露整个代码，因为这是出于工作目的。而且我无法决定内容，因为这是项目的要求。希望大家理解。

无论如何，经过一些调试，我得到了这个 logcat，尽管我的应用程序运行良好。

```
java.lang.RuntimeException: Unable to instantiate receiver
com.test.honey.MyCareStartupReceiver:
java.lang.ClassNotFoundException:
com.fireworks.momsapp.MyCareStartupReceiver
at android.app.ActivityThread.handleReceiver(ActivityThread.java:2251)
at android.app.ActivityThread.access$1500(ActivityThread.java:140)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1303)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4898)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException:
com.test.honey.MyCareStartupReceiver
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at android.app.ActivityThread.handleReceiver(ActivityThread.java:2246)
... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:38:39.853

您可以使用 Eclipse 调试透视图来使用断点调试应用程序，如何在此链接[使用 DDMS + Android Mob 进行调试中进行了说明](https://stackoverflow.com/questions/10819276/using-ddms-android-mob-for-debug)

将断点放在 oncreate() 中，然后根据需要动态添加断点:)

**编辑**：我认为可以使用`adb shell am`命令发送 BOOT_COMPLETE 广播，谷歌它以获取更多信息。这是我得到的链接到这个[How To Test BOOT_COMPLETED Broadcast Receiver In Emulator](https://stackoverflow.com/questions/11325920/how-to-test-boot-completed-broadcast-receiver-in-emulator)它也适用于我希望的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:03:14.333

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS"></uses-permission>
<uses-permission android:name="android.permission.CAMERA"></uses-permission>
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
<uses-permission android:name="android.permission.READ_CONTACTS"></uses-permission>
<uses-permission android:name="android.permission.SEND_SMS"></uses-permission>
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>  
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.READ_FRAME_BUFFER"/> 
<uses-permission android:name="android.permission.SET_ALARM" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

因此，您希望能够写入外部存储、安装和卸载 SD 卡、访问相机、发送短信、拨打电话、设置闹钟、读取所有用户的联系人和访问互联网。我想不出任何需要所有这些权限的有用应用程序。

我可以知道您要制作哪种恶意软件吗？

无论如何，这可能与您正在使用的事实有关`android.permission.RECEIVE_BOOT_COMPLETED`，并且您还没有设置适当的广播接收器。请允许我将您重定向到[这里](https://stackoverflow.com/questions/2784441/trying-to-start-a-service-on-boot-on-android)。

# bash - IntelliJ 中的 zsh

> ID：15063855
> 
> 赞同：37
> 
> 时间：2013-02-25T09:33:53.810
> 
> 标签：bash, shell, intellij-idea, zsh

我想在 IntelliJ 中运行一个 zsh 终端，我设置了一个外部工具，它只是 zsh 并将工作目录设置为我的主目录。但是，当我运行它时，立即出现了两个问题：

1.  我的 .zprofile 尚未加载
2.  Tab 没有自动完成任何内容

有谁知道我是否可以让 zsh 在 IntelliJ 中正常工作？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2014-03-24T18:04:39.487

确认的！在 IntelliJ 13 中可用

![zsh 终端](../Images/fa2fa50047925b1aa7e2bafa86bd4cdf.png)

# mysql - 如何提高 ColdFusion MySQL 查询时间？

> ID：15063856
> 
> 赞同：3
> 
> 时间：2013-02-25T09:33:57.113
> 
> 标签：mysql, coldfusion, query-timeout

我有 15 个查询为页面上的表格动态生成数据以用于报告。每个查询需要 250 到 900 毫秒，这意味着页面加载时间为 4 到 13 秒，具体取决于服务器负载。加载时间导致一些用户认为页面根本不会加载。

我想知道是否有某种方法可以简化查询以提供更可接受的加载时间。这是查询之一：

```
 <cfquery datasource="MeetingDB"  name="One">
              SELECT COUNT( meetingID ) AS countatron
              FROM case_meeting
              WHERE meetingID
              IN (

              SELECT DISTINCT a.meetingID
              FROM case_meeting a
              INNER JOIN meeting b ON a.meetingID = b.meetingID
              WHERE b.categoryID =  '1' 
              AND SUBSTRING( meetingCode, 5, 2 ) 
              BETWEEN 12 
              AND 22 
              AND SUBSTRING( meetingCode, 7, 2 ) 
              BETWEEN 01 
              AND 12 
              AND SUBSTRING( meetingCode, 9, 2 ) 
              BETWEEN 01 
              AND 31
              )
              AND caseID
              IN (
              '1',  '2',  '3', '28',  '29',  '30', '39', '40', '45'
              )
              GROUP BY meetingID
              HAVING COUNT( caseID ) > 0 AND COUNT( caseID ) < 2
              </cfquery>

              <td><cfoutput> #One.recordcount# </cfoutput></td> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T09:39:18.587

试试这个查询

```
SELECT COUNT( a.meetingID ) AS countatron
          FROM case_meeting a, case_meeting b
          WHERE a.meetingID = b.meetingID 
          AND b.categoryID =  '1' 
          AND SUBSTRING( b.meetingCode, 5, 2 ) 
          BETWEEN 12 
          AND 22 
          AND SUBSTRING( b.meetingCode, 7, 2 ) 
          BETWEEN 01 
          AND 12 
          AND SUBSTRING( b.meetingCode, 9, 2 ) 
          BETWEEN 01 
          AND 31
          AND b.caseID
          IN (
          '1',  '2',  '3', '28',  '29',  '30', '39', '40', '45'
          )
          GROUP BY a.meetingID
          HAVING COUNT( a.caseID ) = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:46:35.107

可能值得尝试对子选择进行连接而不是使用 IN。

像这样的东西： -

```
SELECT COUNT( case_meeting.meetingID ) AS countatron
FROM case_meeting
INNER JOIN (
SELECT DISTINCT a.meetingID
FROM case_meeting a
INNER JOIN meeting b ON a.meetingID = b.meetingID
WHERE b.categoryID =  '1' 
AND SUBSTRING( meetingCode, 5, 2 ) BETWEEN 12 AND 22 
AND SUBSTRING( meetingCode, 7, 2 ) BETWEEN 01 AND 12 
AND SUBSTRING( meetingCode, 9, 2 ) BETWEEN 01 AND 31
) Sub1
ON case_meeting.meetingID = Sub1.meetingID
INNER JOIN (
SELECT meetingID, COUNT( caseID ) AS MeetingCaseCount
FROM case_meeting
WHERE  caseID IN ('1',  '2',  '3', '28',  '29',  '30', '39', '40', '45')
GROUP BY meetingID
) Sub2
ON case_meeting.meetingID = Sub2.meetingID
WHERE  Sub2.MeetingCaseCount > 0 AND Sub2.MeetingCaseCount < 2
GROUP BY case_meeting.meetingID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T13:10:06.970

如果您有很多不依赖于彼此的查询，请查看 cfthread。这将允许您同时运行查询。

确保彻底测试它。我有过使用 cfthread 对数据库服务器产生不利影响的经历。

尽管如此，它仍然值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T09:39:11.260

我想在 MySql 中创建一个过程并使用我的 sql 中的参数调用它是最合适的。您还可以使用动态参数创建视图

# php - imagecopyresampled 在 ie/ff 中调整 chrome 裁剪的大小

> ID：15063861
> 
> 赞同：0
> 
> 时间：2013-02-25T09:34:06.193
> 
> 标签：php, image, gd, image-resizing

我遇到了以下问题。我用 gd 制作了一个缩略图，当我在 chrome 中运行它时，它就是这样做的：

这正是我期望它做的（调整它的大小）

[用 chrome 截取的屏幕截图](http://i.stack.imgur.com/w9dFd.png)

可悲的是，这就是 Firefox 和 ie 所做的：（裁剪）

[ff拍摄的图片](http://i.stack.imgur.com/SEd1L.png)

我有以下代码来处理我的调整大小：

```
// this image is created by another php file when text is filled in
$file = "hidden.png";
$size = GetImageSize($file);
if($size !== false){
$w = $size[0];
$h = $size[1];
//set new size
$nw = $_GET['width'];
$nh = ($nw*$h)/$w;
}
else{
//set new size
$nw = 400;
$nh = 200;
} 
//draw the image
$src_img = imagecreatefrompng($file);
$dst_img = imagecreatetruecolor($nw,$nh);
imagecopyresampled($dst_img, $src_img, 0, 0, 0, 0, $nw, $nh, $w, $h);
//resizing the    image
imagepng($dst_img);
imagedestroy($src_img);
imagedestroy($dst_img); 
```

我已经在堆栈和谷歌上搜索了 abit，我唯一能找到的是使用 css 的解决方案，因为我的图像不是这样构建的，所以我不需要。

我需要在代码方面做些什么（与 css 无关）才能让它在所有浏览器中正常工作？

如果需要，我可以发布更多代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:50:43.920

它绝对与浏览器无关，因为这不是 php 的工作方式。首先，php 代码在服务器上进行解释，然后将结果传递给客户端（浏览器）。

所以在我看来，您应该首先检查图像生成是否正常工作。意味着它每次都产生相同的图像。然后你应该检查这部分：

```
if($size !== false){
   $w = $size[0];
   $h = $size[1];
   $nw = $_GET['width']; // <---- For Debugging set here a static number
   $nh = ($nw*$h)/$w;
} 
```

尝试为调试部分设置每个可能在每个请求上更改为固定值的变量。

我希望我能帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:31:34.043

我通过将上述脚本与我已经存在的脚本合并以生成图像来解决了这个问题。

```
/* Get image info */
if(!isset($_POST['width']) && !isset($_POST['height']))
{
$width = '200';
$height = '100';
}
else
{
$width  = $_POST['width'] ;
$height = $_POST['height'];  
}
$Image = imagecreatetruecolor($width,$height) ;
$sx = imagesx($Image) ;
$sy = imagesy($Image) ;
/*Check if RGB values have been set*/
if(!isset($_POST['r'])) {     $R = 255; } else {     $R = $_POST['r']; } 
if(!isset($_POST['g'])) {     $G = 255; } else {     $G = $_POST['g']; } 
if(!isset($_POST['b'])) {     $B = 255; } else {     $B = str_replace(")" , "" ,  $_POST['b']); }

/*Check if the text value is set   */
if(!isset($_POST['text'])) {$Text = "Uw tekst hier";}
else if($_POST['text'] == '') {$Text = "Uw tekst hier";}
else {$Text = $_POST['text'];}

/*Check if the font is set */
if(!isset($_POST['font'])) {$Font="./Fonts/arial.ttf" ;}
else{$Font= "./fonts/".$_POST['font'].".ttf";}

$FontColor = ImageColorAllocate ($Image,$R,$G,$B) ;    //TextColor
$FontShadow = ImageColorAllocate ($Image,0,0,0) ;   //BackGroundColor
$Rotation = 0 ;
/* Iterate to get the size up */
$FontSize=1 ;
do
    {
    $FontSize *= 1.1 ;
    $Box = @ImageTTFBBox($FontSize,0,$Font,$Text);
    $TextWidth = abs($Box[2] - $Box[6]) ;
    $TextHeight = abs($Box[3] - $Box[7]) ;
    }
while ($TextWidth < $sx*0.94) ;
/*  Awkward maths to get the origin of the text in the right place */ 
$x = $sx/2  - cos(deg2rad($Rotation))*$TextWidth/2;
$y = $sy/2  + sin(deg2rad($Rotation))*$TextWidth/2 + cos(deg2rad($Rotation))*$TextHeight/2 ;

imagefilledrectangle($Image, 0, 0, $sx , $sy , $FontShadow);
ImageTTFText ($Image,$FontSize,$Rotation,-$Box[6] ,-$Box[7],$FontColor,$Font,$Text);

if(isset($_POST['resize']) && $_POST['resize'] == 1)
{
    $nw = 400;
    $nh = 200;        

    $src_img = $Image;
    $dst_img = imagecreatetruecolor($nw,$nh);
    imagecopyresampled($dst_img, $src_img, 0, 0, 0, 0, $nw, $nh, $sx, $sy);//resizing    the image
    imagepng($dst_img, "hidden.png");
    imagedestroy($src_img);
    imagedestroy($dst_img); 
}
else
{
  //header('Content-type: image/png');
  Imagepng($Image, "hidden.png") ; 
} 
```

# android - 如何将动画添加到 DialogFragment？

> ID：15063863
> 
> 赞同：12
> 
> 时间：2013-02-25T09:34:07.173
> 
> 标签：android, animation

如何将动画添加到 DialogFragment。我的动画是：

出动画：

```
<scale
    android:duration="200"
    android:fillAfter="false"
    android:fromXScale="1.0"
    android:fromYScale="1.0"
    android:interpolator="@android:anim/linear_interpolator"
    android:pivotX="50%"
    android:pivotY="-90%"
    android:startOffset="200"
    android:toXScale="0.5"
    android:toYScale="0.5" />

<translate
    android:duration="300"
    android:fromXDelta="0"
    android:fromYDelta="0"
    android:toXDelta="-200"
    android:toYDelta="-200" /> 
```

在动画中：

```
<scale
    android:duration="200"
    android:fillAfter="false"
    android:fromXScale="0.5"
    android:fromYScale="0.5"
    android:interpolator="@android:anim/linear_interpolator"
    android:pivotX="50%"
    android:pivotY="-90%"
    android:toXScale="1.0"
    android:toYScale="1.0" />

<translate
    android:duration="300"
    android:fromXDelta="-200"
    android:fromYDelta="-200"
    android:toXDelta="0"
    android:toYDelta="0" /> 
```

和我的代码：

```
FragmentTransaction ft = getFragmentManager().beginTransaction();
                ft.setCustomAnimations(R.anim.jump_in, R.anim.jump_out, R.anim.jump_in, R.anim.jump_out);
                ft.add(layer_frag, "layer frag");
                ft.show(layer_frag).commit();//layer_frag is a class whitch extends DialogFragment 
```

我必须错过一些东西，因为它看起来就像以前一样。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-26T11:52:04.383

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) 
{
    final Dialog dialog = super.onCreateDialog(savedInstanceState);
    dialog.getWindow().getAttributes().windowAnimations = R.style.detailDialogAnimation;
    return dialog;
} 
```

答案来自[stackoverflow.com/a/13537234/969325](https://stackoverflow.com/a/13537234/969325)但您必须在`onCreateDialog`函数中设置样式。

# c# - 在第一个下拉列表中选择后自动填充第二个下拉列表项

> ID：15063864
> 
> 赞同：3
> 
> 时间：2013-02-25T09:34:07.707
> 
> 标签：c#, jquery, asp.net, dotnetnuke-6

我在我们的 Intranet 上使用 DNN。我们已配置表单和列表模块来跟踪/更新库存记录。

目前我有两个名为 MainCompany 和 SubCompany 的字段。MainCompany 有 15 个项目，MainCompany 的每个项目都有许多子项目（最多 50 个）。

DotNetNuke (DNN) 将 MainCompany 和 SubCompany 呈现为下拉列表（这很好）。但是，我找不到自动填充 SubCompany 上的项目的方法。

例如; 您将从国家下拉列表中选择美国，然后将显示美国的地区。在我们的例子中，无论第一次选择列表中的选择如何，都会显示所有项目。

我们的 html 渲染项目如下：

```
<select name="MainCompany" id="MainCompany">
<option value="0" class="DNNRadioButton">Not Specified</option>
<option value="1" class="DNNRadioButton">Company A</option>
<option value="2" class="DNNRadioButton">Company B</option>

<select name="SubCompany" id="SubCompany">
<option value="0" class="DNNRadioButton">Not Specified</option>
<option value="1" class="DNNRadioButton">SubCompany A</option>
<option value="2" class="DNNRadioButton">SubCompany B</option>
<option value="3" class="DNNRadioButton">SubCompany c</option>
<option value="4" class="DNNRadioButton">SubCompany D</option> 
```

子公司A和子公司B是主公司A的子公司；主公司 B 的子公司 C 和子公司 D 的子公司。

清单很长，但我试图简短地解释一下。

在 MSSQL 数据库中，所有值和标题（例如 SubCompany A）都存储在 InputSettings 列中名为 FieldSettings 的表中，格式如下：

对于 MainCompany：`None Specified|0;Company A|1;Company B|2;.....Company Z|n` 对于 SubCompany：`None Specified|0;SubCompany A|1;SubCompany B|2;.....SubCompany Z|n`

由于值在数据库级别没有连接，因此我正在寻找在 HTML 级别连接它们的方法，如果不是使用代码的话。

我们使用的模块是表单和列表模块，源代码可以从 [http://dnnfnl.codeplex.com/releases/view/93728下载](http://dnnfnl.codeplex.com/releases/view/93728)

提交表单后，记录（例如 SubCompany A 和 Company A）记录在 UserDefinedTable 表中，如下所示：

```
字段ID || 行 ID || 字段值
----------------------------------
113 2323 主营A公司
114 2324 子公司A

```

我在限制性 Intranet 工作，无法提供更多信息。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T20:57:01.673

好的，不确定我是否理解正确。值之间必须存在某种关系才能确定哪些子公司属于哪个主公司。因此，例如，当用户从主公司列表中选择一个选项时，您将对一个函数进行 ajax 调用，该函数将返回该主公司的子公司。这是它的工作方式吗？

# android - 适用于 Android 的 Instagram 自定义 URL 方案

> ID：15063868
> 
> 赞同：6
> 
> 时间：2013-02-25T09:34:34.893
> 
> 标签：android, iphone, html, api, instagram

我需要使用 HTML 链接运行 Instagram 应用程序。对于 iPhone，我使用 iPhone Hooks（[Instagram iPhone Hooks](http://instagram.com/developer/mobile-sharing/iphone-hooks/# "Instagram iPhone 挂钩")）。

我怎样才能为 Android 做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T19:00:19.930

Google Groups 上的 Instagram API Developers group 中有一个[关于此主题的主题。](https://groups.google.com/forum/#!topic/instagram-api-developers/7XUKm9HSAdg)

据 Instagram 开发人员之一 Mike Krieger 所说，您已经可以使用 Intents 在 Android 上实现文档交互。如果这是您需要的，您应该查看有关[与意图共享](http://android-developers.blogspot.co.uk/2012/02/share-with-intents.html)的 Android 文档。

共享图像的基本代码（应弹出 Instagram 作为您的共享选项之一）如下所示：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
intent.setType("image/*");
Uri uri = Uri.fromFile(getFileStreamPath(pathToImage));
intent.putExtra(Intent.EXTRA_STREAM, uri);
startActivity(Intent.createChooser(intent, "How do you want to share?")); 
```

`pathToImage`显然是您要共享的图像的文件名。

不幸的是，目前似乎不支持任何自定义 URL 功能。因此，如果这就是您所追求的，我建议您在该 Google Groups 线程中提供反馈，具体说明您需要哪些功能。

# javascript - 这是指使用主干的每个循环

> ID：15063869
> 
> 赞同：0
> 
> 时间：2013-02-25T09:34:36.250
> 
> 标签：javascript, backbone.js

使用backbone.js - `this.template.clone();`不起作用，因为这指的是我认为的每个循环。我如何编写它以使其引用模板？谢谢

```
model = new Backbone.Model({

    data: [

        { text: "site 1", href: "link1.htm" },
        { text: "site 2", href: "link2.htm" },
        { text: "site 3", href: "link3.htm" },
        { text: "site 4", href: "link4.htm" },
        { text: "site 4", href: "link4.htm" },
        { text: "site 4", href: "link4.htm" },
        { text: "site 4", href: "link4.htm" },

    ]
});

var View = Backbone.View.extend({

    initialize: function () {
        //console.log('initializing ' + this.options.blankOption);
        this.template = $('#list-template').children();
    },
    el: '#container',
    events: {
        'click button' : 'render'
    },
    model:model,
    render: function(event){
        event.preventDefault();
        var data = this.model.get('data');

        $.each(data,function (i,v) {
            //console.log(v.text + " " + v.href);
            //var li = this.template.clone().find('a').attr('href', v.href).text(v.t.text);
            var li = this.template.clone(); /// this refers to the each loop
        });

    }
});

//var view = new View({blankOption:"emptySTring"});
var view = new View({}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:36:59.670

使用另一个变量引用`this`您想要的：

```
var that = this;

$.each(data,function(i, v) {
    var li = that.template.clone();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:37:36.797

使用自定义变量来保存对函数`this`内部的引用`render`：

```
...
render: function(event){
  var self = this;
  event.preventDefault();
  var data = this.model.get('data');

  $.each(data,function (i,v) {
    //console.log(v.text + " " + v.href);
    //var li = this.template.clone().find('a').attr('href', v.href).text(v.t.text);
    var li = self.template.clone(); /// this refers to the each loop
  });
}
... 
```

查找 JS 的作用域是如何工作的。

# java - JTidy java API toConvert HTML to XHTML

> ID：15063870
> 
> 赞同：3
> 
> 时间：2013-02-25T09:34:37.003
> 
> 标签：java, html, xhtml, jtidy

我正在使用 JTidy 从 HTML 转换为 XHTML，但我在我的 XHTML 文件中找到了这个标签`&nbsp;`。我能阻止它吗？
这是我的代码

```
 //from html to xhtml
   try   
    {  
        fis = new FileInputStream(htmlFileName);  
    }  
    catch (java.io.FileNotFoundException e)   
    {  
        System.out.println("File not found: " + htmlFileName);  
    }  
        Tidy tidy = new Tidy(); 
        tidy.setShowWarnings(false);
        tidy.setXmlTags(false);
        tidy.setInputEncoding("UTF-8");
        tidy.setOutputEncoding("UTF-8");
        tidy.setXHTML(true);// 
        tidy.setMakeClean(true);
        Document xmlDoc = tidy.parseDOM(fis, null);  
    try  
    {  
        tidy.pprint(xmlDoc,new FileOutputStream("c.xhtml"));  
    }  
    catch(Exception e)  
    {  
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T12:35:03.503

当输入也被视为 XML 时，我只有成功。所以要么将 xmltags 设置为 true

```
 tidy.setXmlTags(true); 
```

并忍受错误和警告或进行两次转换。第一次转换以清理 html（html 到 xhtml），第二次转换从 xhtml 到 xhtml 并设置了 xmltags，因此不会发生错误和警告。

```
 String htmlFileName = "test.html";
    try( InputStream in = Thread.currentThread().getContextClassLoader().getResourceAsStream(htmlFileName);
         FileOutputStream fos = new FileOutputStream("tmp.xhtml");) {
        Tidy tidy = new Tidy();
        tidy.setShowWarnings(true);
        tidy.setInputEncoding("UTF-8");
        tidy.setOutputEncoding("UTF-8");
        tidy.setXHTML(true);
        tidy.setMakeClean(true);
        Document xmlDoc = tidy.parseDOM(in, fos);
    } catch (Exception e) {
        e.printStackTrace();
    }

    try( InputStream in = new FileInputStream("tmp.xhtml");
         FileOutputStream fos = new FileOutputStream("c.xhtml");) {
        Tidy tidy = new Tidy();
        tidy.setShowWarnings(true);
        tidy.setXmlTags(true);
        tidy.setInputEncoding("UTF-8");
        tidy.setOutputEncoding("UTF-8");
        tidy.setXHTML(true);
        tidy.setMakeClean(true);
        Document xmlDoc = tidy.parseDOM(in, null);
        tidy.pprint(xmlDoc, fos);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

我使用了最新的 jtidy 版本 938。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:12:28.403

我创建了一个函数来解析 xhtml 代码并删除不受欢迎的标签并添加指向 css 文件“tableStyle.css”的链接

```
 public static  String xhtmlparser(){ 
    String Cleanline="";

    try { 
        // the file url
        FileInputStream fstream = new FileInputStream("c.xhtml");
        // Use DataInputStream to read binary NOT text.
        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
        String strLine = null;
        int linescounter=0;
        while ((strLine = br.readLine()) != null)   {// read every line in the file             
            String m=strLine.replaceAll("&nbsp;", "");
            linescounter++;
            if(linescounter==5)
                m=m+"\n"+ "<link rel="+ "\"stylesheet\" "+"type="+ "\"text/css\" "+"href= " +"\"tableStyle.css\""+ "/>";
            Cleanline+=m+"\n";
        }

    }
    catch(IOException e){}

    return Cleanline;
} 
```

但作为一个性能问题，它好吗？

顺便说一句，它的工作方式将

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T14:23:34.473

可以使用下面的方法从html中获取xhtml

```
public static String getXHTMLFromHTML(String inputFile,
            String outputFile) throws Exception {

        File file = new File(inputFile);
        FileOutputStream fos = null;
        InputStream is = null;
        try {
            fos = new FileOutputStream(outputFile);
            is = new FileInputStream(file);
            Tidy tidy = new Tidy(); 
            tidy.setXHTML(true); 
            tidy.parse(is, fos);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }finally{
            if(fos != null){
                try {
                    fos.close();
                } catch (IOException e) {
                    fos = null;
                }
                fos = null;
            }
            if(is != null){
                try {
                    is.close();
                } catch (IOException e) {
                    is = null;
                }
                is = null;
            }
        }

        return outputFile;
    } 
```

# c - 我不是在某处释放内存吗？

> ID：15063871
> 
> 赞同：1
> 
> 时间：2013-02-25T09:34:38.753
> 
> 标签：c, memory-leaks, valgrind

我有一个程序，它从文件中读取并将项目存储在队列中，然后将它们打印出来。我从 valgrind 得到这个：

```
 HEAP SUMMARY:
     in use at exit: 302 bytes in 14 blocks
   total heap usage: 30 allocs, 16 frees, 1,230 bytes allocated

 302 bytes in 14 blocks are definitely lost in loss record 1 of 1
    at 0x4A05FDE: malloc (vg_replace_malloc.c:236)
    by 0x372167FB41: strdup (strdup.c:43)
    by 0x400A6A: addtoqueue(main.c:30)
    by 0x400B5A: addfiletoqueue(main.c:45)
    by 0x400C27: main (main.c:62)

 LEAK SUMMARY:
    definitely lost: 302 bytes in 14 blocks
    indirectly lost: 0 bytes in 0 blocks
      possibly lost: 0 bytes in 0 blocks
    still reachable: 0 bytes in 0 blocks
         suppressed: 0 bytes in 0 blocks 
```

main.c 第 62 行

```
addfiletoqueue (queue, argv[argi]); 
```

main.c 的第 45 行

```
addtoqueue (queue, file, filename); 
```

main.c 第 30 行

```
readline = strdup (buffer);
assert (readline != NULL);
queue_add (queue, readline); 
```

我需要免费阅读线吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T09:36:05.147

是的，[`strdup()`](http://linux.die.net/man/3/strdup)动态分配你必须的内存`free()`。从链接的参考页面：

> strdup() 函数返回一个指向新字符串的指针，该字符串是字符串 s 的副本。**新字符串的内存使用 malloc(3) 获得，并且可以使用 free(3) 释放。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T09:36:10.947

> 我需要免费阅读线吗？

是的。[手册页](http://linux.die.net/man/3/strdup)`strdup`声明它为其返回值动态分配内存。因此，您必须`free`稍后在程序中的某个地方调用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T09:36:27.640

是的，您需要在使用完毕后释放它。

这可能不在 中`addfiletoqueue()`，而是在程序退出时。但是，诊断说内存“肯定丢失”意味着可能存在更多问题，也许您在此过程中丢失了指针。

基本上`strdup()`只是为你调用`malloc()`，所以它是在你完成使用时`strcpy()`从堆中分配内存。`free()`

此外，`readline`这是一个非常糟糕的变量名，因为它也是一个非常标准化的[函数名](http://unixhelp.ed.ac.uk/CGI/man-cgi?readline+3)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T09:38:00.187

strdup() 函数返回一个指向新字符串的指针，该字符串是字符串 s 的副本。新字符串的内存使用 malloc(3) 获得，并且可以使用 free(3) 释放

[http://www.kernel.org/doc/man-pages/online/pages/man3/strdup.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/strdup.3.html)

Valgrind“绝对丢失丢失记录”显示您的代码泄漏内存！因此，您需要注意 valgrind 的此类错误...

# ruby-on-rails-3 - 访问延迟作业 Rails 的失败方法中的 last_error

> ID：15063873
> 
> 赞同：1
> 
> 时间：2013-02-25T09:34:45.317
> 
> 标签：ruby-on-rails-3, runtime-error, delayed-job, airbrake

我在 Rails 应用程序中使用延迟作业。每当延迟作业失败时，我想通知错误以进行空气烘烤。我在[github](https://github.com/collectiveidea/delayed_job)上查看并了解了**失败**的方法。

我想将延迟作业失败的 last_error 属性发送到 airbrake。像这样的东西：

```
class ParanoidNewsletterJob < NewsletterJob
   def perform

   end

   def failure
     Airbrake.notify(:message => self.last_error, :error_class => self.handler)
   end
 end 
```

但它给了我以下运行时错误：

```
undefined method `last_error' for #<struct ParanoidNewsletterJob> 
```

**请帮我弄清楚如何将延迟作业失败的 last_error 通知 Airbrake。**

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T12:04:38.840

您应该能够将作业传递给失败方法，然后从作业中提取 last_error。IE

```
def failure(job)
  Airbrake.notify(:message => job.last_error, :error_class => job.handler)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-19T04:04:14.947

有两种方法可以实现您想要的：

1.  一种特定于作业的方法，它仅适用于您想要的作业类型，方法是实现以**作业**为参数的失败方法。该作业将包含**error**和**last_error**。这就是其他答案的意义所在。
2.  一个全局选项，可以开发插件以将其应用于创建的任何作业类型。如果需要监视所有作业，则需要这样做。该插件可以注册并围绕作业生命周期中的各种事件执行操作。例如，如果我们想在存储到数据库之前对其进行处理，下面是一个更新 last_error 的插件

下面的一个例子：

```
require 'delayed_job'

class ErrorDelayedJobPlugin < Delayed::Plugin
  def self.update_last_error(event, job)
    begin
      unless job.last_error.nil?
        job.last_error = job.last_error.gsub("\u0000", '')  # Replace null byte
        job.last_error = job.last_error.encode('UTF-8', invalid: :replace, undef: :replace, replace: '')
      end
    rescue => e
    end
  end

  callbacks do |lifecycle|
    lifecycle.around(:failure) do |worker, job, *args, &block|
      update_last_error(:around_failure, job)
      block.call(worker, job)
    end
  end
end 
```

基本上，当任何作业发生任何故障时都会调用它。有关此回调如何工作的详细信息，您可以参考[A plugin to update last_error in Delayed Job](https://www.pixelstech.net/article/1511026455-A-plugin-to-update-last_error-in-Delayed-Job)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-02T12:14:29.070

这应该可以正常工作

```
def failure(job)
 Airbrake.notify(:message => job.error, :error_class => job.error.class, :backtrace => job.error.backtrace)
end 
```

# javascript - Windows 应用商店应用程序：动态加载 JavaScript 以便于更新？

> ID：15063881
> 
> 赞同：1
> 
> 时间：2013-02-25T09:35:04.897
> 
> 标签：javascript, html, windows-store-apps

最近我接手了一个编写的 Windows Store 应用程序项目`C#/XAML`，它的要求之一是，

将项目迁移到`Javascript/HTML5`，并通过从我们的网站动态加载 javascript，我们可以根据需要随时更新代码逻辑，而无需提示用户下载我们的应用程序的新版本。部署的应用程序非常简单，不需要更新，每次应用程序启动时，它都会尝试从 Web 加载 javascript 和内容。

这个需求来自市场营销，他们认为如果可以以这种方式更新应用程序，那就太棒了。我不知道这是否是一个好主意，甚至是否可行。

我的问题

1.  如果这不是一个好主意/不可行，请给我一些理由
2.  如果javascript可以动态加载，那么html和css文件呢？

**编辑**

当我问这个问题时，我还没有听说过[Cordova](https://cordova.apache.org/)，当时混合应用程序的想法还很新鲜。使用 Cordova，我们可以编写以这种方式运行的应用程序。Web 内容 (HTML/JS/CSS) 在 WebView 控件中呈现，并且每次都可以从 Web 更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:38:55.327

总之，我不相信app可以这样写。

部署应用程序时，应用程序代码是 appx 包的一部分，如果您希望通过商店访问它，它必须通过 MS 的应用程序认证检查。

这可确保应用程序代码质量合适，并勾选相应的安全框等。

我不相信您可以从远程源动态加载应用程序代码，否则您可能正在加载任何旧的未经验证的 cack，并且不会检查此代码。

但是，据我了解，更新机制非常简单，将您的应用程序代码的新版本推送到商店将允许用户在闲暇时更新应用程序并为您处理该过程。

我认为在动态加载方面你能得到的最好的东西是在你的应用程序中远程加载一个网页（网页可以根据你的需要进行更新）。这将不允许您从网页运行应用程序代码，并且网页是远程的，从安全角度来看，它将在“Web 上下文”下运行，因此您将无法使用很多本机功能可以在本地运行。如果在 JS/HTML 中重新开发应用程序的原因是动态加载代码，我建议不要这样做。C# 实现和 JS 实现之间没有很大的差异，因此用不同的语言重做所有现有工作似乎效率低下。

# php - 当控制器类扩展父控制器时，为什么我们仍然需要父构造函数？

> ID：15063890
> 
> 赞同：13
> 
> 时间：2013-02-25T09:35:43.637
> 
> 标签：php, codeigniter, class, inheritance

我是 CodeIgniter 和 OOP 的初学者。[我在这里](http://ellislab.com/codeigniter/user-guide/tutorial/news_section.html)阅读了一页 CI 教程。我发现了一些在我脑海中产生疑问的东西。
看看这段代码：

```
<?php
class News extends CI_Controller {
    public function __construct()
    {
        parent::__construct();
        $this->load->model('news_model');
    } 
```

我认为如果我们创建了一个扩展 CI_Controller 的类，我们假设它必须在其父类中具有所有方法和属性（尽管我们可以覆盖它们）。那么，为什么`parent::__construct();`在代码中有呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-25T09:44:51.397

`__construct()`是类的构造方法。如果您从中声明一个新的对象实例，它就会运行。然而，如果一个类实现了它自己的`__construct()`，PHP 将只运行它自己的构造函数，而不是它的父类的构造函数。例如：

```
<?php

class A {
  public function __construct() {
    echo "run A's constructor\n";
  }
}

class B extends A {
  public function __construct() {
    echo "run B's constructor\n";
  }
}

// only B's constructor is invoked
// show "run B's constructor\n" only
$obj = new B();

?> 
```

在这种情况下，如果您需要在声明 $obj 时运行类 A 的构造函数，则需要使用`parent::__construct()`：

```
<?php

class A {
  public function __construct() {
    echo "run A's constructor\n";
  }
}

class B extends A {
  public function __construct() {
    parent::__construct();
    echo "run B's constructor\n";
  }
}

// both constructors of A and B are invoked
// 1\. show "run A's constructor\n"
// 2\. show "run B's constructor\n"
$obj = new B();

?> 
```

在 CodeIgniter 的例子中，该行运行 CI_Controller 中的构造函数。该构造函数方法应该以某种方式帮助您的控制器代码。你只希望它为你做所有事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T17:09:25.947

要直接从 Code Iginiter 文档中回答您的问题：

> 之所以需要这一行，是因为您的本地构造函数将覆盖父控制器类中的构造函数，因此我们需要手动调用它。

[http://ellislab.com/codeigniter/user-guide/general/controllers.html#constructors](http://ellislab.com/codeigniter/user-guide/general/controllers.html#constructors)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T09:42:49.070

用于所有类的扩展。__construct() 用于您使用的那个类。

具有构造函数方法的类在每个新创建的对象上调用此方法，因此它适用于对象在使用之前可能需要的任何初始化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-29T10:26:54.210

我相信调用父构造函数/方法的需要是一种**代码气味**，称为**Call super**。除了错误敏感性（忘记这个调用，你可能会得到意想不到的结果），它是程序性的，而不是 OOP。毕竟，语句的顺序也会导致意想不到的结果。

在此处阅读更多信息：[https ://martinfowler.com/bliki/CallSuper.html](https://martinfowler.com/bliki/CallSuper.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-06T02:07:17.637

通过关键字使用继承`extends`。父类在调用其构造函数时可能正在设置一些值。如果未调用父构造函数，则未设置值，子类将不会获取这些值。

例子：

```
class Super {
    protected $a;

    public function __construct(){
        $this->a = 'Foo';
    }
}

class Child extends Super{
    protected $b = 'Bar';

    public function __construct() {
        parent::__construct();
        echo $this->a;
    }
}

$x = new Child(); 
```

在这里，如果不调用父构造函数，则该类`Child`将不会发出任何声音。

因此，在 Codeigniter 中，父类可能会在您调用其构造函数时设置一些对其子类有帮助的值，并且这些值仅在调用父构造函数时对其子类可用。

# php - php向变量添加两个选项

> ID：15063892
> 
> 赞同：0
> 
> 时间：2013-02-25T09:35:51.357
> 
> 标签：php, joomla, joomla2.5

我有这个代码->

```
<?php

$savearray = $this->savedlist;
$selectdata = new stdClass;
$selectdata->id='';
$selectdata->title=JText::_('BLA_BLA_BLA');
array_push($savearray, $selectdata);
$savearray = array_reverse($savearray);
echo JHTML::_('select.genericlist',$savearray,'savedlist','class="inputbox"','id','title','');

?> 
```

我想添加到`$selectdata->title=JText::_('BLA_BLA_BLA');`

这段代码`echo count($this->savedlist)`

所以我想要实现的是->

```
$selectdata->title=JText::_('BLA_BLA_BLA') . echo count($this->savedlist); 
```

它不起作用`$selectdata->title=JText::_('BLA_BLA_BLA') . echo count($this->savedlist);`，有人可以帮助我吗，我怎样才能在“BLA_BLA_BLA”文本附近添加“计数”代码..？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:42:37.013

您不能使用`echo`内部字符串连接。`echo`将输出字符串，并且您不会将函数返回值分配给另一个变量。

`$selectdata->title = JText::_('BLA_BLA_BLA') . count($this->savedlist);`

# javascript - 如何确保函数 a 已在函数 b 之前运行？

> ID：15063898
> 
> 赞同：1
> 
> 时间：2013-02-25T09:36:07.003
> 
> 标签：javascript, cordova

我在使用以下 javascript 代码时遇到了一些问题。

```
 var returnValue = false;
        function hasItem(id) {
            //I want this entire function to run first
            db.transaction(function(tx) {
                tx.executeSql("SELECT * FROM library WHERE id == "+id,[],function(tx, results) {
                    returnvalue = results.rows.length>0; 

                },errorCB);
            },errorCB,successCB);

            //then this
            return returnvalue;
        } 
```

但是 sql 函数似乎在一个单独的线程中运行，使函数一直返回 false .. 有没有办法“强制等待”..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:37:17.353

> 有什么办法“强制等待”..？

不，你必须做的是改变你的`hasItem`函数，让它接受一个提供信息的回调，而不是返回一个值。

不知道你`errorCB`和`successCB`回调做什么有点棘手，但有一些类似的东西：

```
function hasItem(id, callback) {
    var returnValue = false;
    db.transaction(function(tx) {
        tx.executeSql("SELECT * FROM library WHERE id == "+id,[],function(tx, results) {
            returnValue = results.rows.length > 0; 
        },failed);
    },failed,function() {
        successCB();
        callback(returnValue);
    });

    function failed() {
        errorCB();
        callback(null); // Or whatever you want to use to send back the failure
    }
} 
```

然后，而不是这个

```
if (hasItem("foo")) {
    // Do something knowing it has the item
}
else {
    // Do something knowing it doesn't have the item
} 
```

你像这样使用它：

```
hasItem("foo", function(flag) {
    if (flag) {
        // Do something knowing it has the item
    }
    else {
        // Do something knowing it doesn't have the item
        // (or the call failed)
    }
}); 
```

如果你想在回调中告诉调用是否*失败*：

```
hasItem("foo", function(flag) {
    if (flag === null) {
        // The call failed
    }
    else if (flag) {
        // Do something knowing it has the item
    }
    else {
        // Do something knowing it doesn't have the item
    }
}); 
```

# cordova - Web SQL 数据会保留多长时间？

> ID：15063902
> 
> 赞同：2
> 
> 时间：2013-02-25T09:36:15.730
> 
> 标签：cordova, mobile, offline, web-sql

我开始研究依赖于 web sql 功能的混合应用程序。该应用程序与本地数据库（Web SQL）一起工作，如果设备在线，该数据库可能会同步到远程数据库。

当然，快速可用的应用程序很重要，因此在不需要在线交换的情况下尽可能长时间地使用其 Web SQL 数据。此外，一些数据只会是本地的，不应该丢失。

到目前为止，我使用 Chrome 对本地/远程同步和离线模式进行了成功的测试。HTML5/JS 文件将与 Android 和 Apple 市场的 PhoneGap/Cordova 一起打包。

所以这是我的问题：

*   web sql 数据将保持可用多长时间？
*   可以重启设备吗？
*   如果安装了更新版本的应用程序怎么办？
*   关于 websql 持久性问题，我应该注意什么具体做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T18:55:24.733

```
>How long will web sql data remain available ? 
```

直到被应用程序删除

```
>May the device be reboot ? 
```

是的

```
>What if a newer version of the app is installed ? 
```

数据库的存在性检查应该是安装过程的一部分

```
>Are there any specific practices I should be aware of, regarding websql persistence issues? 
```

* SQLite 的未来版本可能与当前版本不兼容

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T00:01:25.190

目前所有浏览器数据库都是临时存储，直到配额管理api可用。因此，您的数据随时可能丢失。

# java - 无法刷新注入 JSF 2 托管 Bean 的 JPA 2 实体

> ID：15063903
> 
> 赞同：2
> 
> 时间：2013-02-25T09:36:21.447
> 
> 标签：java, jsf-2, dependency-injection, jpa-2.0

我在会话范围中有一个 JSF 托管 bean，其中包含一个要跟踪的实体，例如，经过身份验证的用户：

```
@ManagedBean
@SessionScoped
public class LoginController implements Serializable {
  User user;

  public User getUser() {
    return this.user;
  }

  public void setUser(User user) {
    this.user = user;
  }
  /* ... */
} 
```

在另一个 bean 中，我必须注入用户以使用它来检索与其关联的角色列表，如下所示：

```
@ManagedBean
@ViewScoped
public class AnotherController implements Serializable {

  List<Role> roles;      

  @ManagedProperty(value="#{loginController.user}")
  User user;

  public someMethod() {
    /* Some stuff that insert other roles into database, referring the user as owner */
    roles = user.getRolesList();
  }
} 
```

如果我使用 ajax 更新页面`someMethod`，`roles`列表仍然不会重新加载。如果我在收到此错误`em.refresh(user)`之前插入：`user.getRolesList`

```
Can not refresh not managed object: model.User[ id=1 ]. 
```

谁能帮我理解这一点？如果注入另一个 bean，为什么会话范围的实体不受管理？我怎样才能解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T10:05:10.747

为了使实体能够刷新，需要对其进行管理，但您已经知道这一点。为了对其进行管理，它需要是

*   重取
*   合并然后刷新
*   通过扩展的持久性上下文保持管理

前两个选项需要交易。

由于既不`@ManagedBean`也不`@ViewScoped`暗示任何类型的事务管理，这些 bean 中的实体将始终是分离的，因此您遇到的行为是预期的 JPA 行为。

对于前两个选项，您可以将请求传递给后端启用事务的 EJB，该 EJB 将合并和更新实体或返回新获取的实体。如果您不使用 Java EE 应用程序服务器，则可以使用`UserTransaction`.

对于第三个选项，您可以使用扩展的持久性上下文，它不会在每次事务后关闭，因此实体仍然跨事务边界进行管理。

**编辑**修复此问题的最简单选项，使用`UserTransaction`并假设依赖注入。

```
@Inject
UserTransaction tx;

    //merging and refreshing
    tx.begin();
    User managedUser = em.merge(user);
    em.refresh(managedUser);
    tx.commit();
    user = managedUser;

    //refetching
    tx.begin();
    user = em.find(User.class, user.getId);
    tx.commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:25:21.057

First of all, you shall separate your concerns, which basically means that your backing bean **should not be performing any business logic directly** (which is implied by your comment `/* Some stuff that insert other roles into database, referring the user as owner */`). Instead, you could inject a `UserService` class in your managed bean with `@EJB` annotation and call its methods via actions of your commandComponents.

Next, when you get your entity from a database and **detach it from persistence context** (read: persistence context is closed at the end of the transaction) it means that the entity is not managed by your persistence service anymore and changes to your entity will not be reflected in the database. If you would want to do so, you will need to call `EntityManager.merge()`, to make the entity persistent. You will need to do so when you want the canges in your `LoginController.user` object to be *persisted* to the database.

So, what Kostja says is when you want to get an up-to-date correspondence between your user object and the row in the database you should make the object managed by your `EntityManager`, by following one of the ways that he proposed.

# facebook - Grails 应用程序中的 Facebook API

> ID：15063904
> 
> 赞同：-2
> 
> 时间：2013-02-25T09:36:24.300
> 
> 标签：facebook, grails

我在我的 grails 应用程序中添加了 facebook 登录可能性，但是我该怎么做，它也会自动发布到facebook fun page。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:16:10.480

首先，您需要将您的应用程序注册到 Facebook 开发者页面。然后，他们会借给你一个 app-id。这个 id 是签署所有对 facebook 的请求所必需的。

这里有网站：

> [https://developers.facebook.com/](https://developers.facebook.com/)

之后，您可以使用 grails 应用程序中的那些插件

> [http://grails.org/plugins/search?q=social](http://grails.org/plugins/search?q=social)

如您所见，您拥有**Spring Social Facebook**或**Spring Social Core**。第一个它就像一个仅适用于 Facebook 的独立插件。您还有另一个适用于 Twitter 或 Spring Social Core 的独立插件，这是 Spring 制作的插件，可让您有机会与两种服务（Fb 和 Tw）进行交互。

**更新 1**

这里有 Spring Social Facebook 插件参考指南

> [http://static.springsource.org/spring-social-facebook/docs/1.0.x/reference/html/](http://static.springsource.org/spring-social-facebook/docs/1.0.x/reference/html/)

**更新 2**

有关您评论的示例的更多信息

> [http://static.springsource.org/spring-social-facebook/docs/1.0.x/reference/html/apis.html#facebook-status](http://static.springsource.org/spring-social-facebook/docs/1.0.x/reference/html/apis.html#facebook-status)

**更新 3**

正如评论中所说，这是从 FB 检索联系人的方法。

> [http://static.springsource.org/spring-social-facebook/docs/1.0.x/reference/html/apis.html#facebook-friends](http://static.springsource.org/spring-social-facebook/docs/1.0.x/reference/html/apis.html#facebook-friends)

```
List<String> friendIds = facebook.friendOperations().getFriendIds();
FacebookProfile firstFriend = facebook.userOperations().getUserProfile(friendIds.get(0)); 
```

有很多方法可以做到这一点，请查看链接。

**更新 4**

正如评论中所说，这里是分享帖子或链接到用户个人资料的方式。

> [http://static.springsource.org/spring-social-facebook/docs/1.0.x/reference/html/apis.html#facebook-status](http://static.springsource.org/spring-social-facebook/docs/1.0.x/reference/html/apis.html#facebook-status)

发布状态更新

```
facebook.feedOperations().updateStatus("I'm trying out Spring Social!"); 
```

或者一个链接

```
FacebookLink link = new FacebookLink("http://www.springsource.org/spring-social", 
        "Spring Social", 
        "The Spring Social Project", 
        "Spring Social is an extension to Spring to enable applications to connect with service providers.");
facebook.feedOperations().updateStatus("I'm trying out Spring Social!", link); 
```

希望能帮助到你 ：）

# c++ - 在 C++ 中比较字符串对象和字符串文字：为什么没有编译错误？

> ID：15063906
> 
> 赞同：0
> 
> 时间：2013-02-25T09:36:26.673
> 
> 标签：c++, string, compiler-errors

我写了一些这样的代码：

```
#include<string>  
using namespace std;  
int main() {  
    string str;
    ...
    if(str=="test")    //valid????
        //do something
    ...
    return 0;
} 
```

后来重新阅读代码后，我很好奇编译器是如何没有错误的？
注意：我已经检查了参考，看起来应该存在某种类型不匹配错误（将字符串对象与 char 数组进行比较）

编辑：抱歉 = to == 拼写错误。它已经修复了

编辑2：问题：

*   参考文献中没有定义任何 operator==(string,char*) 或 operator==(string,char[]) 或类似的运算符（cppreference.com）
*   没有从 char* 或 char[] 到字符串的转换运算符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:40:42.180

正如其他人所提到的，单`=`号执行分配，而不是比较。

但是比较运算符和赋值一样，是通过[运算符重载](http://en.cppreference.com/w/cpp/language/operators)来定义的，这是 C++ 最基本的特性之一。

该表达式`str = "test"`被转换为一个函数调用`str.operator= ("test")`，并且该表达式`str == "test"`将被转换为`str.operator== ("test")`， 或`operator==(str,"test")`，无论哪个有效。

即使没有为`std::string`and的操作数定义重载函数`char *`，编译器仍会尝试查找函数以将参数转换为与此类函数匹配的类型。

**编辑：**哈，`std::string`不能转换为`bool`所以`if`条件仍然是错误的。我认为这是为问题制作一个很好的片段的人工制品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:39:33.647

```
if(str="test")  //it's an assignment not a comparison. 
```

将其更改为`if(str=="test")`

```
 why no compile errors? 
```

因为它是 c++ 而不是 c。`std::string`已定义此`==`运算符。

```
if(str="test")  //it's an error: because you can't convert string to boolean type. 
                  which is expected as condition.

error like :could not convert 's.std::basic_string<_CharT, _Traits, _Alloc>::operator=
<char, std::char_traits<char>, std::allocator<char> >(((const char*)"p"))' from 
'std::basic_string<char>' to 'bool' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:41:14.080

如果你这样做

```
if(str="test"){} 
```

您将“测试”分配给`str`. 由于这是一个有效的操作，赋值将返回`&str`对您的对象的引用，因此您的 if 条件将始终得到满足。当然，如果`str == 0`那样的话就会报错。所以最好这样做：

```
if(str == "test"){} 
```

感谢詹姆斯坎泽！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T09:52:01.677

如前所述，由于运算符重载，这不是编译错误（忽略您不是在比较而是在分配的事实）。如果您使用任何没有此运算符的对象，那么是的，这将是一个编译错误：

```
// Foo does not have comparision operator
struct Foo {};

// Bar have comparision operator
struct Bar
{
    // Next line is the operator overload.
    bool operator ==(const char *pstr) const { return true; };
};

// string have comparision operator
std::string Test("test");

if (Foo == "test")  // compilation error
if (Bar == "test")  // uses the Bar::operator ==
if (Test == "test") // uses the basic_string<char>::operator ==
{ /* do something */ } 
```

# ruby-on-rails - 如何在 Rails 3.2 中应用自动增量

> ID：15063908
> 
> 赞同：1
> 
> 时间：2013-02-25T09:36:29.053
> 
> 标签：ruby-on-rails, database, postgresql, ruby-on-rails-3.2, auto-increment

我正在用 ruby​​ on rails 做一个购物清单项目。在创建名为 products 的表时，我错误地从表 products 的 id 字段中删除了自动增量选项。

谁能告诉我，如何`autoincrement`通过迁移重新插入表中的选项。

我的产品表如下：-

```
 id serial NOT NULL,
  shopping_list_id integer NOT NULL,
  product_name character varying(255) DEFAULT 'null'::character varying,
  product_category character varying(255),
  quantity integer,
  status character varying(255) DEFAULT 'OPEN'::character varying,
  deleted integer NOT NULL DEFAULT 0,
  CONSTRAINT products_pkey PRIMARY KEY (id) 
```

我的产品表正在引用我的`shopping_list`表。

我正在使用`Postgresql`数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:50:39.763

虽然您可以通过简单地执行 SQL 语句来做到这一点，但是对于`Postgresql users`您需要在数据库中创建一个新的序列。

[这在这个 SO post](https://stackoverflow.com/questions/2182193/create-missing-auto-increment-attribute-with-rails-migration)中提到。

# iphone - 如何从 Puffin 浏览器打开应用程序

> ID：15063909
> 
> 赞同：0
> 
> 时间：2013-02-25T09:36:28.653
> 
> 标签：iphone, objective-c, flash

我希望在 iPad 应用程序中播放 Flash 内容，所以我搜索了很多，最后我知道`Puffin`浏览器会播放 Flash 内容。在我的应用程序中，当用户点击按钮时，应用程序重定向到海雀浏览器，然后它将播放 Flash 内容。然后再次尝试从海雀浏览器重新打开我的应用程序，我无法重新打开它。我为我的应用程序创建了 URL 方案。完成 Flash 视频后，我尝试使用`myApp://`海雀浏览器打开我的应用程序，但它没有重新打开我的应用程序。如果在 safari 中尝试相同的方式它的工作。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:56:31.403

下个版本将支持外部 URL 打开。您的意思是要在 Puffin 中手动键入“MyApp://SomeUrl”，然后使用 SomeUrl 打开 MyApp？您的应用程序可以免费下载吗？我想试一试。

ps：我在卖Puffin的CloudMosa工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T12:39:36.820

也许有点晚了，但是 Puffin 开发者页面上有几个文档化的 URL 方案：[https ://www.puffinbrowser.com/development/](https://www.puffinbrowser.com/development/)

> 适用于 iOS 的 Puffin Browser 处理以下 URL 方案。
> 
> http的海雀
> 
> https的海雀
> 
> puffin-x-callback 用于回调到调用应用程序（iOS 3.5 之后的版本）

iE 使用URL puffins://www.google.de代替[https://www.google.de](https://www.google.de)在 Puffin 浏览器中打开[https://www.google.de 。](https://www.google.de)

不幸的是，目前仅适用于不再维护的 iOS 版本 Puffin 和 Puffin Pro。新的浏览器 Puffin Lite 没有记录 URL 方案，还是没有？

# jquery - 使用一个按钮打开/关闭并使用 jQuery 在 clickOutside 上关闭

> ID：15063911
> 
> 赞同：0
> 
> 时间：2013-02-25T09:36:33.557
> 
> 标签：jquery, html

我的按钮有问题。我已经搜索了档案，但似乎找不到合适的解决方案。

我想要打开和关闭标题的按钮，同时在标题外部单击时我也不想关闭标题

正如您在我的示例中看到的那样：[http ://www.danieldoktor.dk/test/test.html](http://www.danieldoktor.dk/test/test.html)

我无法让它正常工作。

这是我无法工作的代码。

```
<div class="lists">
    <header class="box_header" id="box1">
        <h1>HEADER 1</h1>
        <div class="setting" id="btn1"></div>
        </header> 
```

```
$(document).ready(function(){  

    //When mouse rolls over
    $("#btn1").click(function () { 
        $("#box1").stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'})  
    });  

    //When mouse is removed
    $("#btn1").mousedown('', function(){  
        $("#box1").stop().animate({height:'30px'},{queue:false, duration:1000, easing: 'easeInBack'})  
    });

    $("#box1").hover('', function(){  
        $("#box1").stop().animate({height:'30px'},{queue:false, duration:1000, easing: 'easeInBack'})  
    }); 
```

你们中的任何人都可以帮忙吗？

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:43:34.013

只要按下鼠标按钮，就会触发 mousedown 事件。我认为您正在寻找的是`mouseleave`事件 :) 并且不需要 '' 作为第一个参数，只需执行以下操作：

```
$("#btn1").mouseleave(function(){  
        $("#box1").stop().animate({height:'30px'},{queue:false, duration:1000, easing: 'easeInBack'})  
    }); 
```

实际上，我建议您也使用该`.mouseenter()`事件，而不是`.hover()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:50:08.623

首先，您应该将点击事件的代码更改为如下所示：

```
$("#btn1").click(function () { 
    if(!$("#box1").hasClass('header-down')){
        $("#box1").stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'}).addClass('header-down'); 
    }
    else{
        $("#box1").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
    }

}); 
```

然后，通过在外部单击来关闭标题的代码可能如下所示：

```
$(document).click(function(){
    if($("#box1").hasClass('header-down')){
        $("#box1").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down'); 
    }
}

$("#box1").click(function(e){
    e.stopPropagation();
} 
```

有关如何通过单击元素外部来触发事件的信息，请参阅[此问题/答案。](https://stackoverflow.com/questions/714471/jquery-hide-element-when-clicked-anywhere-on-the-page)

# java - java中的“<>”有什么用？例如列表 sourceFileList = 新的 ArrayList

> ID：15063912
> 
> 赞同：-1
> 
> 时间：2013-02-25T09:36:35.010
> 
> 标签：java

我是java新手。我想知道`<>` java中的用途。

这是我感到困惑的一个例子： `List<File> sourceFileList = new ArrayList<File>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:38:18.463

`<>`是持有[**通用类型**](http://docs.oracle.com/javase/tutorial/java/generics/types.html)的占位符。您将类型参数嵌入尖括号中。

```
List<File> sourceFileList = new ArrayList<File> 
```

上面的代码描述了您的 List 只能具有**File**类型的实例。它提供编译时类型安全。您只能将文件/子类型的文件对象添加到列表中。

```
 sourceFileList.add(new File("test.txt"));
       sourceFileList.add("abc");// compiler error as your
                                  list only accepts File instances 
```

## 链接：

*   [**很棒的泛型教程**](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)
*   [**甲骨文官方文档**](http://docs.oracle.com/javase/tutorial/java/generics/types.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:38:58.957

它是 1.5 版中引入的 Java 泛型的一部分。

以下链接可能有用：[http ://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T09:40:06.870

<> 通常用于 java 中的通用数据类型。

所以这里的 List 意味着你有一个文件列表。

所以如果你写 List<Person> 它将成为人员列表。因此，您可以将 <> 中的文本替换为任何类的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T09:42:16.263

列表的数据类型。例子：

```
ArrayList<String> yourArrayList = new ArrayList<String>; 
```

它将你声明`ArrayList`为一个字符串。`yourArrayList.get(index).toString();`您可以使用`yourArrayList.get(index);`并将返回一个`String`（在此示例中）并且仅接受数据类型，而不是使用`String`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T09:39:05.470

Java[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)（不要与[C++ 模板](http://en.wikipedia.org/wiki/Template_%28C++%29)混淆）。它允许您在定义泛型类时定义类型。

在你的情况下，`List<File>`你有一个 List 包含类型的状态`File`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T09:39:47.530

你应该看看java泛型教程：

[http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

如果你真的喜欢它，请查看 java 语言规范，特别是关于泛型的部分：

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.2)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T09:40:10.320

在您的示例中， <> 用于实例化`ArrayList`对象`File`。<> 仅指定 ArrayList 包含的对象类型

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-25T09:40:16.000

泛型...

我们将 String 对象存储在数组列表中，为了检索对象，我们必须对它进行类型转换。只有程序员知道他在 ArrayList 中存储了哪些对象，因此他负责将其类型转换为所需的类型。如果，他错误地将其转换为错误的类型怎么办？

Java 代码：

```
System.out.println((Integer)myArrayList.get(3)); 
```

错误：线程“main”中的异常 java.lang.ClassCastException: java.lang.String

为了避免这种情况，泛型开始发挥作用。我们可以指定 List 的类型，以便 list 只能保存或存储该类型的对象。一些其他类型的对象不会存储到列表中，因此不需要类型转换。

Java 代码：

```
ArrayList<String> myArrayList = new ArrayList<String>(); 
```

myArrayList 不仅可以存储 'String 对象。确保了类型安全，现在程序员可以更好地控制数组列表。

当我们声明类或接口的实例时，类型在尖括号中指定。如果没有泛型，类型参数将被省略，但无论何时从列表中提取元素，都必须显式转换。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-25T09:37:51.483

它是告诉编译器什么样的数据要进入对象。例如，`List<File>`告诉 java 你要创建一个 List 来填充 File 类型的数据。再举一个例子：`Array<Integer>`告诉java你想要一个你将用整数数据填充的数组。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-25T09:40:58.753

如果你想把你的代码翻译成英文来阅读它，你可以在看到 <> 时说“of type”。

例如对于

```
List<File> sourceFileList 
```

说“文件类型列表，”sourceFileList“”

# html - 内容旁边的 HTML 位置侧边栏

> ID：15063913
> 
> 赞同：0
> 
> 时间：2013-02-25T09:36:38.400
> 
> 标签：html, web, screen, scale

我目前正在尝试将我的侧边栏从内容框下方移到它旁边的右侧。无论我尝试什么，它都会停留在某个点上，不会再上升。我的网站是[VAGUE LINES](http://www.vaguelines.com)，如果您向下滚动一点，您将能够准确地看到我在说什么。

下面是我的css代码，非常感谢：

```
 h1
{
    text-align:center;
    font-family:sans-serif;
    letter-spacing:12px;
    padding-bottom:6px;
    border-top:1px solid rgb;
    margin-top:35px;
    color:#544E4F;
    font-weight:lighter;
}

hr
{
display:overline-block;
width:200px;
}

#header
{
background: #FFFFFF;
text-align: center;
}

#navigation ul
{
margin: 0;
padding: 0;
list-style-type: none;
text-align: center;
}

#navigation ul li 
{
 display: inline; 
 padding-right: 30px;
}

#navigation ul li a
{
text-decoration: none;
padding: .3em 5em;
color: #000000;
background-color: #FFFFFF;
font-family: courier;
}

#navigation ul li a:hover
{
text-decoration: line-through;
}

.centeredImage
    {
    float: none;
    margin: 4% 0 2% 9%;
    text-align: center;
    padding-bottom: 25px;
    }

#main-content hr 
{
width :66%;
margin-left: 9%;
}

#main-content
{
width:80%;
padding-left: 113px;
padding-top: 20px;
}

#page-wrap {
    background: white;
    min-width: 780px;
    max-width: 1260px;
    margin: 10px auto;

    }
    #page-wrap #inside {
        margin: 10px 10px 0px 10px;
        padding-top: 10px;
        padding-bottom: 10px;
    }

#sidebar{
border-top: 1px solid #99CC33;
    border-left: 1px solid #99CC33;
    height: 300px;
    width: 200px;
    margin-right: 5px;
    padding: 5px 0 0 5px;
    position:absolute;
}

#main-content p
{
margin-left: 10%;
font-family: courier;
font-size: 14px;
}

#heading p
{
margin-left: 10%;
font-family: sans-serif;
font-size: 14px;
}

#sidebar p
{
margin-left: 10%;
font-family: courier;
font-size: 14px;
font-weight:bold;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:52:06.713

尝试这个：

```
#main-content
{
    float: left; // float element to the left side
    width:80%;
    padding-left: 113px;
    padding-top: 20px;
}

#sidebar{
    border-top: 1px solid #99CC33;
    border-left: 1px solid #99CC33;
    height: 300px;
    width: 200px;
    margin-right: 5px;
    padding: 5px 0 0 5px;
    position:absolute;
    right: 0; // position element to the right
} 
```

编辑：对不起。你想要右边的侧边栏。

# github - 编辑 *.md 文件时在 gedit 中转义“<”

> ID：15063914
> 
> 赞同：0
> 
> 时间：2013-02-25T09:36:39.630
> 
> 标签：github, syntax-highlighting, markdown, gedit

我正在编写要在 github 上使用的 *.md 格式的代码示例，但我目前还没有找到在代码块中转义`<`运算符的方法：`Python`

```
```Python
i = 0
while i < 10:
    print i
``` 
```

这会将之后的所有文本更改`< 10:\n`为紫色。下面的例子：

![在此处输入图像描述](../Images/65df730acc688276f002961302d43c27.png)

我试过用`\`这样的方式转义它：`while i <\ 10:`，但是这个斜杠在上传到 github 后仍然可见，这是无意的，因为它使代码无效。

你如何解决这个问题？

编辑：@Blender 建议缩进代码而不是使用 ```Python 块。这会从 gedit 产生类似的响应：

![在此处输入图像描述](../Images/51c258f27d009407e979c429edcfc7a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:46:11.550

如果你有多行代码，用四个空格缩进它（就像你在 StackOverflow 上做的那样，它使用 Markdown）：

```
Here is some sample Python code:

    def foo(bar, *args, **kwargs):
        print bar, args, kwargs

Here is some more text. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:04:42.960

因此，解决这个烦恼的唯一可行解决方案是在每次出现小于号“<”后强制注释关闭括号，如下所示：

```
```Python
i = 0
while i < 10: # >
    i += 1
```

Color stays the way it should be. 
```

1.  这解决了gedit上的颜色变化
2.  代码块保持无错误
3.  Github 渲染一切正常

我选择这是一个可接受的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T09:42:29.740

可能是一个 htmlentity 代码就可以了：`&lt;`

# xcode - NSMutableURLRequest 将 JSON 对象发布到 CakePHP 显示为一个数组

> ID：15063915
> 
> 赞同：1
> 
> 时间：2013-02-25T09:36:40.827
> 
> 标签：xcode, json, cakephp

我通过以下方式从 Xcode 发送 JSON 数据：

```
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
        @"Test title", @"title",
        @"Test option1", @"option1",
        @"Test option2", @"option2", nil];
NSError *error;
NSData* jsonData = [NSJSONSerialization dataWithJSONObject:dict options:kNilOptions error:&error];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
NSURL *url = [NSURL URLWithString:@"http://somedomain.com/posts/add"];
[request setURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setHTTPBody:jsonData];

[NSURLConnection connectionWithRequest:request delegate:self]; 
```

我通过以下方式将 CakePHP 中接收到的数据写入文件：

```
public function add()
{
    if ($this->request->is('post'))
        if ($this->RequestHandler->requestedWith('json')) {
            file_put_contents('debug.txt', print_r($this->request->data, true));
        }
    }
} 
```

文件（'debug.txt'）中的数据如下所示：

**数组（ [option2] => 测试 option2 [title] => 测试标题 [option1] => 测试 option1 ）**

我知道正在发送的数据是 JSON 格式，我希望收到的数据显示为 JSON 格式，而不是“debug.txt”中的数组。这是一个正确的假设吗？如果是，出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:44:02.423

我不确定这里的问题是什么，在您可以在 PHP 中对这些数据执行任何操作之前，您必须将其转换为数组，看来 CakePHP 请求处理程序会自动为您执行此操作。

如果您真的想要原始的 json ，请`json_encode()`再次返回。

# css - 优化手机的长链接

> ID：15063916
> 
> 赞同：0
> 
> 时间：2013-02-25T09:36:47.780
> 
> 标签：css, mobile

我有一个博客，我使用以下链接“<a href="http://static.opentok.com/webrtc/v2.0/js/TB.min.js" rel="nofollow">http:// static.opentok.com/webrtc/v2.0/js/TB.min.js”。

当我缩小浏览器时，它会很好地中断，一切看起来都很好。当我在 iPhone 上查看页面时，屏幕右侧有很多空白区域，唯一突出的就是这个长链接。我认为这是因为这个原因破坏了设计，尤其是当我的其他博客在手机上看起来都很完美时。

我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:40:04.733

您可以使用：

```
 .css { text-overflow: ellipsis; } 
```

这会将溢出的文本制动到最后的'...'

[https://developer.mozilla.org/en-US/docs/CSS/text-overflow](https://developer.mozilla.org/en-US/docs/CSS/text-overflow)

# php - 使用 PHP 和 Form 在 Sql UPDATE 查询中保留通过 $_files 上传的旧文件

> ID：15063919
> 
> 赞同：2
> 
> 时间：2013-02-25T09:37:07.583
> 
> 标签：php, file-upload

抱歉，如果标题不是很清楚，但想法是上传工作非常好，当我尝试进行发布更新时，数据库中的旧记录被清除，但文件（图像）被物理保存在主机上。

这是我使用的代码：

```
$marca = filter_input(INPUT_POST, 'marca', FILTER_SANITIZE_STRING);
$model = filter_input(INPUT_POST, 'model', FILTER_SANITIZE_STRING);
if (is_dir("/home/bahoy/public_html/panou/poze/{$marca}/{$model}"));
else
    mkdir("/home/bahoy/public_html/panou/poze/{$marca}/{$model}", 0755, true);
$director_poza = ("poze/{$marca}/{$model}/");
$numetmp_poza  = $_FILES['numepoza1']['name'];
$numepoza1     = $director_poza . $numetmp_poza;
$numetmp_poza  = $_FILES['numepoza2']['name'];
$numepoza2     = $director_poza . $numetmp_poza;
$numetmp_poza  = $_FILES['numepoza3']['name'];
$numepoza3     = $director_poza . $numetmp_poza;
if (move_uploaded_file($_FILES['numepoza1']['tmp_name'], $numepoza1))
    if (move_uploaded_file($_FILES['numepoza2']['tmp_name'], $numepoza2))
        if (move_uploaded_file($_FILES['numepoza3']['tmp_name'], $numepoza3)) {
            list($width, $height, $type, $attr) = getimagesize($numepoza1) and list($width, $height, $type, $attr) = getimagesize($numepoza2) and list($width, $height, $type, $attr) = getimagesize($numepoza3);
            switch ($type) {
                case 1:
                    $ext = ".gif";
                    break;
                case 2:
                    $ext = ".jpg";
                    break;
                case 3:
                    $ext = ".png";
                    break;
                default:
                    print "Format foto neacceptat";
            }
        } 
```

对于我正在使用的 SQL 记录`$numepoza1`，它们是文件路径`$numepoza2`，`$numepoza3` 我需要将旧文件记录保留在 sql 中，或者如果我想更改图像，以物理方式和 sql 记录替换它们。想法？

# stored-procedures - BACKUP DATABASE 异常终止

> ID：15063921
> 
> 赞同：0
> 
> 时间：2013-02-25T09:37:15.850
> 
> 标签：stored-procedures, sql-server-2008-r2, backup

我有一个存储过程，它为特定数据库执行数据库备份，如下所示：

```
 ALTER PROC [dbo].[SP_Backup]
    @DataBaseName NVARCHAR(500) = NULL 
    @fullPath NVARCHAR(500) OUTPUT
AS 
    BEGIN
        DECLARE @dbpath NVARCHAR(500);
            SELECT  @DataBaseName = DB_NAME()
            SELECT  @dbpath = physical_name
            FROM    sys.database_files
            WHERE   ( name = N'myDb' );
            SELECT  @fullPath = SUBSTRING(@dbpath, 0,
                                LEN(@dbpath) - CHARINDEX('\',
                                REVERSE(@dbpath)
                                + '\') + 1);
            SELECT  @fullPath = @fullPath + N'\Backups\' + @DataBaseName + N'.bak'
            BACKUP DATABASE @DataBaseName
        TO DISK = @fullPath;
    END; 
```

问题是，它可以在一台服务器上运行，而不能在另一台服务器上运行（服务器在同一台机器上。--sql 2008 r2）。我得到异常“备份数据库异常终止。”

备份文件夹具有相同的权限设置，如下所示：

```
C:\Program Files\Microsoft SQL Server\MSSQL10_50.Server1\MSSQL\DATA\Backup
C:\Program Files\Microsoft SQL Server\MSSQL10_50.Server2\MSSQL\DATA\Backup 
```

和 sql 用户也是一样的；

在日志文件中有以下信息：

```
Error: 18204, Severity: 16, State: 1.
BackupDiskFile::CreateMedia: Backup device 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.Server2\MSSQL\DATA\Backups\myDb.bak' failed to create. Operating system error 3(failed to retrieve text for this error. Reason: 1815).
Error: 3041, Severity: 16, State: 1.
BACKUP failed to complete the command BACKUP DATABASE myDb. Check the backup application log for detailed messages. 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:14:50.853

这是创建文件夹的问题。

```
SELECT  @fullPath = @fullPath + N'\Backups\' + @DataBaseName + N'.bak' 
```

server1有“Backups”文件夹，sql可以在上面保存备份，但是server2上没有这个文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:41:52.843

您可以尝试检查实例。

[http://community.spiceworks.com/topic/157143-sql-server-2008-r2-multiple-instances-on-one-server](http://community.spiceworks.com/topic/157143-sql-server-2008-r2-multiple-instances-on-one-server)

# svn - 仅为会话保存 SVN 身份验证信息

> ID：15063924
> 
> 赞同：2
> 
> 时间：2013-02-25T09:37:31.623
> 
> 标签：svn

UNIX 上的 SVN 命令行客户端，将密码保存在 ~/.subversion 文件夹中。第一次，客户端询问是否需要（p）永久保存密码。这也可以在 /.subversion/servers 中配置

```
store-passwords = no 
```

我们有一些常见的登录名，不希望永久保存密码。但是，为每个 SVN 命令输入密码是一件很痛苦的事情。有没有办法只为注销时清除的会话保存密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:50:47.493

如果您使用基于 SSH 的 Subversion 连接，您可以使用带有密码短语加密的私钥的公钥身份验证，并`ssh-agent`在会话开始时解锁您的密钥。因为`ssh-agent`将密钥保存在内存中，当它退出时，密钥不再可用。

```
$ ssh-agent /bin/bash 
```

现在启动了一个子shell，您可以在其中解锁密钥并使用Subversion：

```
$ ssh-add ~/.ssh/id_rsa_svn
$ svn co svn+ssh://svn.example.com/svn/code 
```

完成后，退出子shell：

```
$ exit 
```

代理现在不再运行，因此您的密钥不再可用。

```
$ 
```

（请注意，一些桌面环境提供了自己的 SSH 代理实现，这些可能会与“退出”将清除密钥的假设混淆——但是，这些通常也会在您登录时解锁密钥环，因此您的安全性应该是等效的。）

我不知道如何使用基于密码的身份验证来做到这一点。我想您可能会看到您的特定 Unix 风格是否支持`.logout`文件或类似文件，并尝试编写脚本从 Subversion 的密码存储中删除密码。但是，此解决方案有几个缺点：您依赖 shell 来运行脚本，您的脚本可能会失败，并且您将密码写入未加密的磁盘。

# c - 动态库中的全局变量

> ID：15063927
> 
> 赞同：0
> 
> 时间：2013-02-25T09:37:41.307
> 
> 标签：c, global

我在 C 中创建了一个动态库。这个库使用一个全局变量，如`static int a=1`. 现在我在我的应用程序中使用这个库。编译时，编译器会产生错误“未定义对 a 的引用”。

什么会导致这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:45:54.747

`static`对于全局变量，该变量仅在该编译单元中可用。换句话说，全局`static int a;`在库外是不可见的。

`static`如果您想允许图书馆用户访问它，请删除。

# url-rewriting - Intelligencia.urlrewriter：错误的请求错误

> ID：15063931
> 
> 赞同：1
> 
> 时间：2013-02-25T09:37:52.997
> 
> 标签：url-rewriting, clean-urls

我想用 intelligencia.urlrewriter 实现 url 重写。问题是当干净的 URL 包含特殊字符，如 % : * & 等等。在这种情况下，我收到一个错误的请求，因为清理的 url 不包含？符号。我使用 .net 3.5 。这个问题有解决方案吗？

谢谢朋友

# python - 在 PyGtk 中单击按钮时 GUI 冻结

> ID：15063932
> 
> 赞同：0
> 
> 时间：2013-02-25T09:37:59.100
> 
> 标签：python, user-interface, gtk

我知道这可能是一个反复出现的问题，但我不明白该问题的其他答案的意义。
首先，这是我的代码（如果你想要语法高亮）： http: [//pastebin.com/9uJah8t2](http://pastebin.com/9uJah8t2)

```
#!/usr/bin/python2.7
from mega import Mega
import pygtk
import gtk
import glib

class HelloWorld:
#def onSuccess(self, widget, data):

def test(self, widget, data):
    email = self.login.get_text()
    password = self.password.get_text()
    mega = Mega()
    m =  mega.login(email, password)
    details = m.get_user()
    print(details)
    #get account files
    files = m.get_files()
    print(files)

def hello(self, widget, data=None):
    print "Hello World"

def delete_event(self, widget, event, data=None):
    return False

def destroy(self, widget, data=None):
    gtk.main_quit()

def __init__(self):
    # Window Settings
    self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    self.window.set_title("Mega Connector") 
    self.window.connect("delete_event", self.delete_event)
    self.window.connect("destroy", self.destroy)
    self.window.set_border_width(5)
    self.window.set_resizable(False)

    # Vbox
    self.vbox = gtk.VBox(True, 0)

    # Login
    self.hboxlogin = gtk.HBox(True, 0)
    self.labellogin = gtk.Label("Login")
    self.hboxlogin.pack_start(self.labellogin, True, True, 0)
    self.labellogin.show()
    self.login = gtk.Entry(0)
    self.hboxlogin.pack_start(self.login, True, True, 0)
    self.login.show()
    self.hboxlogin.show()
    self.vbox.pack_start(self.hboxlogin, True, True, 0)

    # Password
    self.hboxpassword = gtk.HBox(True, 0)
    self.labelpassword = gtk.Label("Password")
    self.hboxpassword.pack_start(self.labelpassword, True, True, 0)
    self.labelpassword.show()
    self.password = gtk.Entry(0)
    self.password.set_visibility(False)
    self.hboxpassword.pack_start(self.password, True, True, 0)
    self.password.show()
    self.hboxpassword.show()
    self.vbox.pack_start(self.hboxpassword, True, True, 0)

    # Button
    self.button = gtk.Button("Connect")
    self.button.connect("clicked", self.test, None)
    self.vbox.pack_start(self.button, True, True, 0)
    self.button.show()

    self.window.add(self.vbox)
    self.vbox.show()
    self.window.show()

def main(self):
    gtk.main()

if __name__ == "__main__":
    hello = HelloWorld()
    hello.main() 
```

这是一个非常简单的 GUI，用于登录 MEGA 并检索有关您的帐户的信息（例如上传的文件和内容）。事实是，当我单击“登录”时，GUI 会冻结，直到检索到所有信息。你能告诉我我在这个程序中做错了什么吗？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:17:04.997

发生这种情况的原因是，只有当您让控制返回主循环时，UI 才会更新。当你的`test`回调被调用时，主循环运行回调并且只有当它完成时控制返回到主循环并且UI可以继续更新。你应该只在回调中做短暂的事情。有几种方法可以使长时间运行的函数工作：

如果 Mega 有函数的异步版本，您应该使用这些函数并在回调中更新详细信息。否则，您需要在线程中执行 Mega 功能。如果确实使用线程，则应注意仅在主线程上更新 UI。像许多 UI 工具包一样，GTK+ UI 函数只能从主线程调用，否则它们会中断。

# jquery - 折叠和展开 div

> ID：15063935
> 
> 赞同：0
> 
> 时间：2013-02-25T09:38:01.280
> 
> 标签：jquery

我做了一个 jquery 折叠和展开 div。它工作，但我面临一个问题，只有 [+] 和跨度 [-] 是可点击的，但我希望 li 意味着`<li>main link 1<span>[+]</span>`可点击

```
 <ul class="link">
  <li>main link 1<span>[+]</span>

    <ul class="inner_div">
        <li><a>test 1</a>
        </li>
        <li><a>test 2</a>
        </li>
        <li><a>test 3</a>
        </li>
    </ul>
 </li>
 </ul>
 <ul class="link">
  <li>main link 2<span>[+]</span>

     <ul class="inner_div">
        <li><a>test 1</a>
        </li>
        <li><a>test 2</a>
        </li>
        <li><a>test 3</a>
        </li>
    </ul>
     </li>
  </ul>
<ul class="link">
<li>main link 3<span>[+]</span>

    <ul class="inner_div">
        <li><a>test 1</a>
        </li>
        <li><a>test 2</a>
        </li>
        <li><a>test 3</a>
        </li>
    </ul>
  </li>
</ul>
<ul class="link">
 <li>main link 4<span>[+]</span>

    <ul class="inner_div">
        <li><a>test 1</a>
        </li>
        <li><a>test 2</a>
        </li>
        <li><a>test 3</a>
        </li>
    </ul>
</li> 
```

脚本是：-

```
 <script type="text/javascript"                  src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"> </script>
<script>
 $('.link span').click(function () {
var $ul = $(this).next();
$(".inner_div").not( $ul ).hide();
$( '.link span' ).html( '[+]' );
if( !$ul.is( ':visible' ) ) {
    $( this ).html( '[&ndash;]');
}
$ul.slideToggle();
});
$(document).ready(function(){
$( '.link' ).first().click();
});
 </script> 
```

CSS是： -

```
.inner_div{ display:none; }
.link span { float: right; cursor: pointer; } 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:21:32.983

试试这个：[**`checkout updated fiddle here`**](http://jsfiddle.net/jTUY9/3/)

```
 $(document).ready(function(){
    $('.link ul').hide();
    $('.link li').click(function () {
       ($('span', this).text() == '[+]') ? $('span', this).html('[-]') : $('span', this).html('[+]');
       $('> ul', this).slideToggle();
       $(this).parent().siblings().find('ul').slideUp();
       $(this).parent().siblings().find('span').html('[+]');
    });
    $('.link li').first().click();
}); 
```

和 css 应该是：

```
 .link li{cursor: pointer; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:04:19.233

**HTML 代码**

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>  <ul class="link">
  <li class="expan">main link 1<span>[+]</span>

    <ul class="inner_div">
        <li><a>test 1</a>
        </li>
        <li><a>test 2</a>
        </li>
        <li><a>test 3</a>
        </li>
    </ul>
 </li>
 </ul>
 <ul class="link">
  <li class="expan">main link 2<span>[+]</span>

     <ul class="inner_div">
        <li><a>test 1</a>
        </li>
        <li><a>test 2</a>
        </li>
        <li><a>test 3</a>
        </li>
    </ul>
     </li>
  </ul>
<ul class="link">
<li class="expan">main link 3<span>[+]</span>

    <ul class="inner_div">
        <li><a>test 1</a>
        </li>
        <li><a>test 2</a>
        </li>
        <li><a>test 3</a>
        </li>
    </ul>
  </li>
</ul>
<ul class="link">
 <li class="expan">main link 4<span>[+]</span>

    <ul class="inner_div">
        <li><a>test 1</a>
        </li>
        <li><a>test 2</a>
        </li>
        <li><a>test 3</a>
        </li>
    </ul>
</li> 
```

**jQuery 代码**

```
$('.expan').click(function () {
  var $ul = $(this).find('span').next();
  $(".inner_div").not($ul).hide();
  $( '.expan span' ).html( '[+]' );
  if( !$ul.is( ':visible' ) ) {
    $(this).find('span').html( '[&ndash;]');
  }
  $ul.slideToggle();
});

$(document).ready(function(){
    $('.expan').first().click();
}); 
```

**CSS 代码**

```
.inner_div{ display:none; }
.link span { float: right; cursor: pointer; }
.expan { cursor: pointer;} 
```

JS Bin 链接[在这里](http://jsbin.com/inexar/8/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:06:40.073

[在此处检查输出](http://jsbin.com/inexar/5)

我稍微改变了 CSS，这样你的宽度`.link span`就在主链接 1 上

```
.link span {position:absolute; width:80%; float: right; cursor: pointer; margin-left: -20%;} 
```

也使用了对齐标签`<span align="right">[+]</span>`因为CSS有变化

[在这里检查](http://jsbin.com/inexar/5/edit)

# python - _csv.Error：字段大于字段限制 (131072)

> ID：15063936
> 
> 赞同：303
> 
> 时间：2013-02-25T09:38:02.160
> 
> 标签：python, csv

我在一个包含非常大字段的 csv 文件中读取了一个脚本：

```
# example from http://docs.python.org/3.3/library/csv.html?highlight=csv%20dictreader#examples
import csv
with open('some.csv', newline='') as f:
    reader = csv.reader(f)
    for row in reader:
        print(row) 
```

但是，这会在某些 csv 文件上引发以下错误：

```
_csv.Error: field larger than field limit (131072) 
```

如何分析具有大字段的 csv 文件？跳过具有大字段的行不是一种选择，因为需要在后续步骤中分析数据。

* * *

## 回答 #1

> 赞同：423
> 
> 时间：2013-02-25T09:38:02.160

csv 文件可能包含非常大的字段，因此增加`field_size_limit`：

```
import sys
import csv

csv.field_size_limit(sys.maxsize) 
```

`sys.maxsize`适用于 Python 2.x 和 3.x。`sys.maxint`仅适用于 Python 2.x ( [SO: what-is-sys-maxint-in-python-3](https://stackoverflow.com/questions/13795758/what-is-sys-maxint-in-python-3) )

### 更新

正如 Geoff 指出的那样，上面的代码可能会导致以下错误：`OverflowError: Python int too large to convert to C long`. 为了避免这种情况，您可以使用以下*快速而肮脏*的代码（它应该适用于每个使用 Python 2 和 Python 3 的系统）：

```
import sys
import csv
maxInt = sys.maxsize

while True:
    # decrease the maxInt value by factor 10 
    # as long as the OverflowError occurs.

    try:
        csv.field_size_limit(maxInt)
        break
    except OverflowError:
        maxInt = int(maxInt/10) 
```

* * *

## 回答 #2

> 赞同：172
> 
> 时间：2013-08-23T17:52:10.650

这可能是因为您的 CSV 文件嵌入了单引号或双引号。如果您的 CSV 文件是制表符分隔的，请尝试将其打开为：

```
c = csv.reader(f, delimiter='\t', quoting=csv.QUOTE_NONE) 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2019-02-04T13:31:55.473

*.csv*字段大小通过[[Python.Docs] 控制： csv.field_size_limit([new_limit])](https://docs.python.org/library/csv.html#csv.field_size_limit)（**重点**是我的）：

> 返回解析器允许的当前最大字段大小。**如果给出了*new_limit*，这将成为新的 limit**。

它默认设置为***131072***或***0x20000*** ( *128k )，对于任何体面的**.csv*来说应该足够了：

> ```
> >>> import csv
> >>>
> >>>
> >>> limit0 = csv.field_size_limit()
> >>> limit0
> 131072
> >>> "0x{0:016X}".format(limit0)
> '0x0000000000020000' 
> ```

但是，当处理具有（至少）一个字段长于此大小的*.csv*文件（**具有正确的引用和分隔符**）时，会弹出错误。
为了消除错误，应该增加大小限制（为避免任何担忧，尝试最大可能值）。

在幕后（查看[[GitHub]: python/cpython - (master) cpython/Modules/_csv.c](https://github.com/python/cpython/blob/master/Modules/_csv.c)了解实现细节），保存这个值的变量是一个*C **long*** ( [[Wikipedia]: C data types](https://en.wikipedia.org/wiki/C_data_types) )，它的大小**取决于*CPU*架构和*操作系统***( *I **L** P* )。经典的区别：对于***064 位*** *操作系统*（和*Python*构建），*长*类型大小（**以位**为单位）为：

*   *尼克斯*：***64***
*   *赢*：***32***

当尝试设置它时，新值被检查是否在*长*边界内，这就是为什么在某些情况下会弹出另一个异常（因为*sys.maxsize*通常是*064位宽 - 在**Win*上遇到）：

> ```
> >>> import sys, ctypes as ct
> >>>
> >>>
> >>> "v{:d}.{:d}.{:d}".format(*sys.version_info[:3]), sys.platform, sys.maxsize, ct.sizeof(ct.c_void_p) * 8, ct.sizeof(ct.c_long) * 8
> ('v3.9.9', 'win32', 9223372036854775807, 64, 32)
> >>>
> >>> csv.field_size_limit(sys.maxsize)
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
> OverflowError: Python int too large to convert to C long 
> ```

为避免遇到此问题，请**使用技巧设置（最大可能）限制（** ***LONG_MAX***）（感谢[[Python.Docs]：ctypes - A foreign function library for Python](https://docs.python.org/library/ctypes.html#module-ctypes)）。它应该适用于*Python 3*和*Python 2*，在任何*CPU* / *OS*上。

 *****> ```
> >>> csv.field_size_limit(int(ct.c_ulong(-1).value // 2))
> 131072
> >>> limit1 = csv.field_size_limit()
> >>> limit1
> 2147483647
> >>> "0x{0:016X}".format(limit1)
> '0x000000007FFFFFFF' 
> ```

*064 位* *Python*在*Nix*之类的*操作系统*上：

> ```
> >>> import sys, csv, ctypes as ct
> >>>
> >>>
> >>> "v{:d}.{:d}.{:d}".format(*sys.version_info[:3]), sys.platform, sys.maxsize, ct.sizeof(ct.c_void_p) * 8, ct.sizeof(ct.c_long) * 8
> ('v3.8.10', 'linux', 9223372036854775807, 64, 64)
> >>>
> >>> csv.field_size_limit()
> 131072
> >>>
> >>> csv.field_size_limit(int(ct.c_ulong(-1).value // 2))
> 131072
> >>> limit1 = csv.field_size_limit()
> >>> limit1
> 9223372036854775807
> >>> "0x{0:016X}".format(limit1)
> '0x7FFFFFFFFFFFFFFF' 
> ```

对于*032 位* *Python*，事情应该运行顺利，没有技巧（因为*sys.maxsize*和*LONG_MAX*都是*032*位宽）。
如果这个最大值仍然不够，那么*.csv*将需要手动干预才能从*Python*处理。

查看以下资源以获取更多详细信息：

*   使用*Python中的**C*类型边界：[[SO]：Python 中 C 类型整数的最大值和最小值（@CristiFati 的回答）](https://stackoverflow.com/questions/52475749/maximum-and-minimum-value-of-c-types-integers-from-python/52485502#52485502)
**   *Python* *032 位* *与* *064 位的*区别：[[SO]：如何确定我的 python shell 是在 OS X 上以 32 位还是 64 位模式执行？（@CristiFati 的回答）](https://stackoverflow.com/questions/1405913/how-do-i-determine-if-my-python-shell-is-executing-in-32bit-or-64bit-mode-on-os/50053286#50053286)*

 ** * *

## 回答 #4

> 赞同：34
> 
> 时间：2018-03-20T14:28:37.893

下面是检查电流限制

```
csv.field_size_limit() 
```

出[20]：131072

下面是增加限制。将其添加到代码中

```
csv.field_size_limit(100000000) 
```

尝试再次检查限制

```
csv.field_size_limit() 
```

输出[22]：100000000

现在您不会收到错误“_csv.Error：字段大于字段限制 (131072)”

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-12T14:16:56.620

我刚刚在“普通”CSV 文件中遇到了这种情况。有些人可能会称其为无效的格式文件。没有转义字符，没有双引号，分隔符是分号。

此文件中的示例行如下所示：

> 第一个单元格；Second " 带有一个双引号和前导空格的单元格；'部分引用'单元格；最后一个单元格

第二个单元格中的单引号会使解析器偏离轨道。起作用的是：

```
csv.reader(inputfile, delimiter=';', doublequote='False', quotechar='', quoting=csv.QUOTE_NONE) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-14T14:51:52.233

有时，一行包含双引号列。当 csv 阅读器尝试阅读此行时，不理解列的结尾并触发此提升。解决方案如下：

```
reader = csv.reader(cf, quoting=csv.QUOTE_MINIMAL) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-10-10T11:03:40.510

您可以使用`read_csv`from`pandas`跳过这些行。

```
import pandas as pd

data_df = pd.read_csv('data.csv', error_bad_lines=False) 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-01-26T03:45:24.363

找到通常放在 .cassandra 目录下的 cqlshrc 文件。

在该文件中追加，

```
[csv]
field_size_limit = 1000000000 
```******

# android - 从android中的标签小部件中删除蓝线

> ID：15063937
> 
> 赞同：0
> 
> 时间：2013-02-25T09:38:02.133
> 
> 标签：android, qtabwidget

我都试过了

```
android:tabStripEnabled="false" 
```

和

```
tabHost.getTabWidget().setStripEnabled(false); 
```

用于从出现在 tabwidget 底部但没有运气的标签小部件中删除蓝线

有什么我想念的吗

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T09:43:29.487

`activity`在您的in上应用主题`AndroidManifest.xml`：

```
<application android:theme="@style/YourTheme"> 
```

并且在`style.xml`主题中可能是这样的：

```
 <style name="YourTheme">  
       <item name="android:textColor">#5DFC98</item>
 </style> 
```

# ios - 从类中设置和删除布局

> ID：15063942
> 
> 赞同：0
> 
> 时间：2013-02-25T09:38:05.033
> 
> 标签：ios, xcode

我有一个名为 Layout 的类，在这个类中有一些函数，例如 setTextView 等。在我的 FirstViewController 中，我需要在 viewcontroller 上设置该布局。

例如，我的 Layout.m 如下所示：

```
-(UITextView*) setTextView{

UITextView *textView1 =[[UITextView alloc]init];
textView1.frame=CGRectMake(0,50,282,210);
textView1.backgroundColor = [UIColor redColor];
[textView1 setReturnKeyType:UIReturnKeyDone];

return textView1;
} 
```

在我的 FirstViewController.m 中，我得到了类似的东西：

```
Layout *test;
UITextView *textView1 = [test setTextView];
[self.view addSubview:textView1];
[textView1 removeFromSuperview];
test = nil; 
```

但这不起作用，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:48:50.440

嗯......该代码没有多大意义。您正在做`[test setTextView];`，即向名为的对象发送消息，`test`并在下一行中将该对象定义为`Layout`。

然后，您从其超级视图中删除该测试对象，但您从未将其添加到任何视图中（无论如何都没有在显示的代码中）

我将在这里进行疯狂的猜测，但我认为这就是你想要做的：

```
Layout* test = [[Layout alloc] init]; //You should be calling here whatever initialization method this class has
UITextView *textView1 = [text setTextView];

[self.view addSubview:textView1];

test = nil; 
```

我仍然不确定你在这里想要完成什么。也许如果你试着解释一下，我可以更好地帮助你。

# asp.net-mvc-3 - MVC3 多用户/连接字符串

> ID：15063945
> 
> 赞同：0
> 
> 时间：2013-02-25T09:38:16.223
> 
> 标签：asp.net-mvc-3

我想确保我在这个正确的轨道上。

我有一个站点，它有两个后端区域，一个用于学校，一个用于管理。我想对这些区域进行身份验证，以便学校区域的数据库权限少于管理员。为此，我的想法是在 Sql Server Management Studio School 和 Admin 中有两个登录名，我可以将某些角色映射到它们。也许学校部分只有读取权限，而管理员读取和写入等。

请有人告诉我实施此操作的最佳方法。我是否需要多个连接字符串（一个用于管理员，一个用于学校）？这可以使用表单身份验证来完成吗？

我目前正在连接到我使用 Sql Server Management Studio 创建的现有数据库，并且已经有一种登录方式，可以设置 FormsAuthentication 并且在我可以将授权属性添加到我的学校后端控制器的意义上，这很有效除非学校已登录，否则将停止显示需要已登录学校的页面。问题实际上是如何使这一点更具体，以便仅允许学校登录名而不是已登录的管理员成员查看该区域因为他们也会设置 FormsAuthentication。

我已经做了很多谷歌搜索，但没有找到任何特定于我的问题的东西，因此这篇文章。

如果需要，我可以生成代码，而不是要求有人为我编写代码，而是对如何解决这种安全模型的理论解释。

在此先感谢您的帮助。

**使用自定义角色提供者的工作解决方案**

帐户控制器代码（现在一个用于管理员和学校）

```
[HttpPost]
public ActionResult LogOn(LogOn model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
            {
                return Redirect(returnUrl);
            }
            else
            {
                // Now it's our job to route the user to the correct place. Ask our DB Helper to tell 
                // us what kind of user they are and route accordingly.
                string sPage = "Index";
                string sController = "Home";

                var Role = DBHelperFunctions.Instance().GetRoleForUser(model.UserName);

                switch (Role.role_name)
                {
                    case LanguageSchoolsConstants.m_RoleAdministrator:
                        {
                            sController = "AuthorisedAdmin";
                        }
                        break;
                    case LanguageSchoolsConstants.m_RoleSchool:
                        {
                            sController = "AuthorisedSchool";
                        }
                        break;
                }

                return RedirectToAction(sPage, sController);
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    } 
```

上述方法中使用的 DB Helper 函数：

```
public role GetRoleForUser(string sUserName)
{
    // Should only ever have one role...
    role Role = (from roles in DBModel.roles
                 join userrole in DBModel.user_role on roles.role_id equals userrole.role_id
                 join users in DBModel.users on userrole.user_id equals users.user_id
                 where users.username == sUserName
                 select roles).FirstOrDefault();

    return Role;
} 
```

Web.config 更改以允许调用角色提供者：

```
<roleManager defaultProvider="RoleProvider" enabled="true" cacheRolesInCookie="true">
      <providers>
        <clear />
        <add name="RoleProvider" type="namespace.Models.Security.CustomRoleProvider" />
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="Entities" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager> 
```

我的角色提供者

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;

namespace neamsepace.Models.Security
{
    public class CustomRoleProvider : RoleProvider
    {
        public override void AddUsersToRoles(string[] usernames, string[] roleNames)
        {
            throw new NotImplementedException();
        }

        public override string ApplicationName
        {
            get
            {
                throw new NotImplementedException();
            }
            set
            {
                throw new NotImplementedException();
            }
        }

        public override void CreateRole(string roleName)
        {
            throw new NotImplementedException();
        }

        public override bool DeleteRole(string roleName, bool throwOnPopulatedRole)
        {
            throw new NotImplementedException();
        }

        public override string[] FindUsersInRole(string roleName, string usernameToMatch)
        {
            throw new NotImplementedException();
        }

        public override string[] GetAllRoles()
        {
            throw new NotImplementedException();
        }

        public override string[] GetRolesForUser(string username)
        {
            using (DB db = new DB())
            {
                string[] RolesForUser = null;

                user User = db.users.FirstOrDefault(u => u.username.Equals(username, StringComparison.CurrentCultureIgnoreCase) ||
                                                         u.email.Equals(username, StringComparison.CurrentCultureIgnoreCase));

                var roles = from dbroles in db.roles
                            join userroles in db.user_role on dbroles.role_id equals userroles.role_id
                            join users in db.users on userroles.user_id equals users.user_id
                            where users.user_id == User.user_id
                            select dbroles.role_name;

                if (roles != null)
                {
                    RolesForUser = roles.ToArray();
                }
                else
                {
                    RolesForUser = new string[] { };
                }

                return RolesForUser;

            }
        }

        public override string[] GetUsersInRole(string roleName)
        {
            throw new NotImplementedException();
        }

        public override bool IsUserInRole(string username, string roleName)
        {
            using (DB db = new DB())
            {
                bool bUserInRole = false;

                user User = db.users.FirstOrDefault(u => u.username.Equals(username, StringComparison.CurrentCultureIgnoreCase) || 
                                                         u.email.Equals(username, StringComparison.CurrentCultureIgnoreCase));

                var roles = from dbroles in db.roles
                            join userroles in db.user_role on dbroles.role_id equals userroles.role_id
                            join users in db.users on userroles.user_id equals users.user_id
                            where users.user_id == User.user_id
                            select dbroles.role_name;

                if (User != null)
                {
                    bUserInRole = roles.Any(r => r.Equals(roleName, StringComparison.CurrentCultureIgnoreCase));
                }

                return bUserInRole;
            }
        }

        public override void RemoveUsersFromRoles(string[] usernames, string[] roleNames)
        {
            throw new NotImplementedException();
        }

        public override bool RoleExists(string roleName)
        {
            throw new NotImplementedException();
        }
    }
} 
```

使用授权的控制器。

```
[Authorize(Roles = LanguageSchoolsConstants.m_RoleAdministrator)]
public class AuthorisedAdminController : Controller
{
    //
    // GET: /AuthorisedAdmin/

    public ActionResult Index()
    {
        return View();
    }

} 
```

我真的希望这可以帮助任何人，请随时发表评论！

感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:49:25.800

您可以将登录访问存储在 Session 中，并将您的项目存储在您认为的“if”语句中

> <% if (Convert.ToString(ViewData["access"]) == "School")
> 
> > ```
> > { %> 
> > ```
> 
> ```
>  //your controls here 
> ```
> 
> > ```
> >  <% } %> 
> > ```
> 
> 如果条件不满足，则不会显示其中的内容。

希望这可以帮助！问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:10:33.850

您不需要多个连接字符串（除非您有多个数据库。）您可以通过使用`[Authorize(Roles = "XYZ")]`属性装饰您的操作并定义角色以指定您想要保护的内容来轻松完成您需要的事情，除非在此上下文中*角色*意味着*任务*。例如：

```
public class ProfessorsController : Controller
{
    [Authorize(Roles = "Professors.List")]
    public ViewResult Index()
    {
        // TODO: List professors
    }

    [Authorize(Roles = "Professors.Create")]
    public ViewResult Create()
    {
        // TODO: Create professor
    }

    [Authorize(Roles = "Professors.Update")]
    public ViewResult Update(int id)
    {
        // TODO: Update professor
    }

    [Authorize(Roles = "Professors.Delete")]
    public ViewResult Delete(int id)
    {
        // TODO: Delete professor
    }
} 
```

然后，例如，用户 Van Driessen（教授）将被授予对所有四个操作的访问权限，而用户 Beavis（学生）将被授予对*Professors.List 的访问权限。*

# highslide - Highslide 中的按钮（锚标签）并非每次都有效

> ID：15063949
> 
> 赞同：1
> 
> 时间：2013-02-25T09:38:28.360
> 
> 标签：highslide

我正在使用带有按钮（锚标签）的高滑梯。当我第一次打开弹出窗口时，按钮工作正常（Onclcik 事件触发器）。但是在每次点击之后，或者如果我再次打开弹出窗口，Buttons dnt 工作。

PS-如果我删除 PreserveContent，它可以正常工作，但 highslide 不会始终在中心打开，如果我保持它为真，就会发生这个问题。

我希望我的弹出窗口总是在中心打开，按钮总是工作..

请帮忙

# sql - 正则表达式 - 注释掉 sql 约束

> ID：15063952
> 
> 赞同：2
> 
> 时间：2013-02-25T09:38:55.320
> 
> 标签：sql, regex, notepad++

使用正则表达式，我想通过匹配 'CONSTRAINT ... ( ))' 并将其替换为 '\*CONSTRAINT ... ( ))*\' 来注释掉约束。操作员 。notepad++ 中的 * 匹配整个文档，所以我不能使用它。

我正在考虑类似以下的内容，但是需要进行一些修改：

```
CONSTRAINT[\w\s]*\)\) 
```

输入：

```
 modified_date datetime NULL,
    etl_id int NULL,
    etl_date smalldatetime NULL,
 CONSTRAINT PK_WORK PRIMARY KEY CLUSTERED 
(
    work_id ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) 
) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:17:35.623

我会做 ：

搜索：`(,\s*CONSTRAINT.+?\)\s+\))`
替换为：`/*$1*/`

我没有英文版的记事本++，但我认为标签还可以。

验证是否`regex`已选中并且还`. includes \n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:11:19.487

您需要使您的正则表达式不贪婪：

```
 CONSTRAINT\([^)]+\)\) 
```

# php - 初始化一个巨大的数组（50000 个条目）

> ID：15063960
> 
> 赞同：1
> 
> 时间：2013-02-25T09:39:05.000
> 
> 标签：php, arrays, initialization

我正在初始化一个由 49605`key=>value`对组成的巨大数组）（该数组将永远不会再更改）$boardkey_to_values=Array(97031=>0,97531=>1,409531=>2,410031=>3,410131=>4, 472031=>5,472531=>6,472631=>7,472651=>7,484531=>8,485031=>9,485151=>10,485131=>10,...)

问题是编译器需要花费大量时间（平均 40 毫秒）

我想知道它们是否可以成为更快的解决方案。

我在我的程序中使用了很大一部分键（15-35k）。我之前在 where_in 中使用 MySQL，但它甚至更慢（平均 6 秒），我得到了硬编码的建议，确实，它快得多，但我想进一步优化它。请参阅原始帖子[字符串到值比较优化 MySQL 查询](https://stackoverflow.com/questions/14803628/string-to-value-compare-optimizing-mysql-query)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:45:23.673

对于这么大的阵列，40 毫秒并不是很慢。但是，如果这是在网络上并且有多个人正在调用 PHP 页面，这可能会降低服务器的速度。你有几个选择：

*   在页面呈现后，使用多个 Ajax 调用来填充您的数组，即每隔几秒设置 10000 个（这样您可以在页面上执行其他操作并让数组在自己的时间填充）

*   使用数据库，因为搜索/更新而不是将其存储在数组中会更快。

*   将程序逻辑更改为一次仅使用几个值，而不是 49K。（有点像分页，每页只显示一部分数据）

# ruby-on-rails - 在 Rails 中手动填充缓存

> ID：15063962
> 
> 赞同：1
> 
> 时间：2013-02-25T09:39:05.703
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, caching, fragment-caching

在 Rails 3.x 中，我想手动预编译我的缓存，并在模型实例和静态 HTML 的视图中使用片段缓存。

当页面被请求时，Rails 会延迟填充缓存，这会导致第一次加载时加载时间变慢。

所以给出这个示例代码：

```
 <% cache("index_chart") do %>
    <%= high_chart("chart", @h) %>  
  <% end %> 
```

如何使用 Ruby 手动填充缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:53:16.403

可能最简单的方法是编写一个 shell 脚本，向各种 URL 发出 GET 请求，这些 URL 将覆盖您的缓存，也称为缓存预热。

一个简单的设置是在您的应用程序中创建一个名为 scripts/cache_warmer 的 shell 脚本，然后您可以从服务器命令行、部署脚本或像 resque 这样的后台处理器手动触发它。

```
# Sample scripts/cache_warmer

GET http://localhost/
GET http://localhost/some_other_page 
```

如果您希望它更智能一点，则可以选择。例如能够点击资源的成员网址将是使用 rake 任务。

```
# lib/tasks/cache_warmer.rake

task :cache_warmer => :environment do
  Resource.all.each do |resource|
    Net::HTTP.get_response("http://localhost/resources/#{resource.id}")
  end
end 
```

这当然只是一个基本的例子。您的实际代码会根据您尝试访问的路线以及有多少路线而有所不同。您可能希望查看多线程选项以获得更高的并发性，或者使用备用“工作”服务器来执行请求。就复杂程度而言，天空是极限，这取决于您的设置。

# python - Python：线程还在 运行吗

> ID：15063963
> 
> 赞同：22
> 
> 时间：2013-02-25T09:39:06.033
> 
> 标签：python, multithreading

如何查看线程是否已完成？我尝试了以下操作，但 threads_list 不包含已启动的线程，即使我知道该线程仍在运行。

```
import thread
import threading

id1 = thread.start_new_thread(my_function, ())
#wait some time
threads_list = threading.enumerate()
# Want to know if my_function() that was called by thread id1 has returned 

def my_function()
    #do stuff
    return 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-25T10:05:25.713

关键是使用线程启动线程，而不是线程：

```
t1 = threading.Thread(target=my_function, args=())
t1.start() 
```

然后使用

```
z = t1.is_alive()
# Changed from t1.isAlive() based on comment. I guess it would depend on your version. 
```

或者

```
l = threading.enumerate() 
```

你也可以使用join()：

```
t1 = threading.Thread(target=my_function, args=())
t1.start()
t1.join()
# Will only get to here once t1 has returned. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-21T06:48:29.560

您必须使用 启动线程`threading`。

```
id1 = threading.Thread(target = my_function)
id1.start() 
```

如上所述，如果您没有`args`要提及的内容，则可以将其留空。

要检查您的线程是否存在，您可以使用`is_alive()`

```
if id1.is_alive():
   print("Is Alive")
else:
   print("Dead") 
```

**注意：** `isAlive()`不推荐使用，而是`is_alive()`按照 python 文档使用。

[Python 文档](https://docs.python.org/2/library/threading.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-09-24T10:14:10.817

这是我的代码，与您所要求的不完全一样，但也许您会发现它很有用

```
import time
import logging
import threading

def isTreadAlive():
  for t in threads:
    if t.isAlive():
      return 1
  return 0

# main loop for all object in Array 

threads = []

logging.info('**************START**************')

for object in Array:
  t= threading.Thread(target=my_function,args=(object,))
  threads.append(t)
  t.start()

flag =1
while (flag):
  time.sleep(0.5)
  flag = isTreadAlive()

logging.info('**************END**************') 
```

# ios - UICollectionView 与 UIWebView 大小问题

> ID：15063966
> 
> 赞同：4
> 
> 时间：2013-02-25T09:39:15.643
> 
> 标签：ios, uicollectionview, uicollectionviewcell, uicollectionviewlayout

我需要实现一个`UICollectionView`. 我使用的细胞`UIWebViews`在它们里面。主要问题是我想让单元格大小适应 webViews 中的实际内容。

我使用了以下两种方法：

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {

    CollectionViewCellDefault *cell = (CollectionViewCellDefault *)[collectionView cellForItemAtIndexPath:indexPath];

    NSLog(@"rect %@", NSStringFromCGRect(cell.wvDisplayValue.frame));
        CGSize retval = cell.wvDisplayValue.frame.size;
        retval.height += 135;
        retval.width += 135;
        return retval;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    CollectionViewCellDefault *cell = [collectionView dequeueReusableCellWithReuseIdentifier:detailColumnsCell forIndexPath:indexPath];

    NSURL *indexFileURL = [[NSBundle mainBundle] URLForResource:@"index" withExtension:@"html"];
    [cell.wvDisplayValue loadRequest:[NSURLRequest requestWithURL:indexFileURL]];
    cell.lblTitle.text = @"Description: ";
    cell.frame = cell.wvDisplayValue.frame;    
    return cell;

} 
```

问题当然是 webView 只有在加载后才知道它的大小：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
```

仅在 webview 加载其内容后，是否可以通过某种方式调整`UICollectionViewLayout`特定单元格的大小？

我发现的每个示例要么具有固定大小，要么不使用 webView，这需要时间才能计算出适合其内容的大小。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T19:55:54.890

您可以为 webViewDidFinishLoad 中的相应 webView 尝试此操作：

```
CGRect frame = webView.frame;
CGSize fittingSize = [webView sizeThatFits:CGSizeZero];
frame.size = fittingSize;
webView.frame = frame; 
```

这将调整 webView 的大小以适应其内容。然后计算新的布局并调用 invalidateLayout 来使用新的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T12:49:45.230

我被困在 WebView 和 CollectionView 组合中，你是对的，一方面，collectionview 需要先确定单元格的大小，即在显示 collectionView 本身之前，即

`- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath`

另一方面，WebView 可以确定它只需要的实际大小`webViewDidFinishLoad:`

如何解决此类问题？

好吧，就我而言，我只有一个部分包含 webView，所以我所做的是计算大小，`webViewDidFinishLoad:`然后在它之后重新加载该特定部分

```
- (void)webViewDidFinishLoad:(UIWebView *)aWebView {

    if (!_isArticleLoaded) {

        CGRect frame = aWebView.frame;
        frame.size.height = 1;
        aWebView.frame = frame;
        CGSize fittingSize = [aWebView sizeThatFits:CGSizeZero];
        frame.size = fittingSize;
        aWebView.frame = frame;

        NSMutableIndexSet *mutableIndexSet = [[NSMutableIndexSet alloc] init];
        [mutableIndexSet addIndex:2];

        NSLog(@"size: %f, %f", fittingSize.width, fittingSize.height);

        _height = [NSNumber numberWithFloat:fittingSize.height];

        _isArticleLoaded = YES;

        [_collectionView reloadSections:mutableIndexSet];

    }

} 
```

因此，最初，在`viewdidload:`localVariables 中分配了流动值：

```
_isArticleLoaded = NO;

_height = [NSNumber numberWithFloat:200.0]; 
```

对于 UICollectionView 我有以下内容：-

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 2)
    {
        return CGSizeMake(self.collectionView.frame.size.width,[_height floatValue]+35);
    }
} 
```

当我处理一个部分时，这几乎解决了我的问题。

在你的情况下，我的朋友，你不应该对每个单元格都使用 WebView，它会被证明是昂贵的

# arrays - Flex Spark List 仅显示数组的最后一个变量

> ID：15063970
> 
> 赞同：1
> 
> 时间：2013-02-25T09:39:36.777
> 
> 标签：arrays, actionscript-3, apache-flex, flash-builder

我想在 sparkList 上显示来自 Arraycollection 的变量。但是列表总是只显示最后一个变量。这是代码。

```
<fx:Script>
    <![CDATA[

[Bindable]private var arc:ArrayCollection;

private function price(event:Event):void {

  var arr:Array='[web response]';
  for(var i:int=0; i < arr.length; i++){
  if((arr[i]['SalesPrice'] >= 0) && (arr[i]['SalesPrice'] <= 100)) {

  var string:String=arr[i]['InventoryId'];
  var array:Array=new Array(string);
  arc=new ArrayCollection(array);
  trace(arc);
  }
  }
    }

  ]]>
  </fx:Script>

 <s:List id="myList" dataProvider="{arc}" /> 
```

得到了跟踪的输出，但我需要将它显示为一个列表。任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:09:28.667

看来你的逻辑不太对。在您的脚本中

> arc=new ArrayCollection(数组);

列表不正确；而不是只使用

> arc.addItem(array);

所以你的代码变成了；

```
var arr:Array = '[web response]';
arc = new ArrayCollection();
for(var i:int=0; i < arr.length; i++){
    if((arr[i]['SalesPrice'] >= 0) && (arr[i]['SalesPrice'] <= 100)) {
        var string:String=arr[i]['InventoryId'];
        var array:Array=new Array(string);
        arc.addItem(array);
        trace(arc);
    }
} 
```

# titanium - 在 Titan Studio 中部署移动 Web 没有显示任何内容

> ID：15063972
> 
> 赞同：0
> 
> 时间：2013-02-25T09:39:44.283
> 
> 标签：titanium

我是钛工作室的新手，我喜欢移动编程。在钛上创建新项目时，我选择了移动网络和安卓。该项目在 android 手机上运行良好，但在为 web 部署时它没有显示任何内容。我错过了什么吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:33:44.780

通常有一个集成服务器在浏览器中运行您的应用程序。[http://docs.appcelerator.com/titanium/latest/#!/guide/Deploying_and_Distributing_Mobile_Web_Apps](http://docs.appcelerator.com/titanium/latest/#!/guide/Deploying_and_Distributing_Mobile_Web_Apps)

否则，Titianium 会将您的应用程序部署到给定位置。在这种情况下，我认为您需要自己在浏览器中访问它。

[http://docs.appcelerator.com/titanium/latest/#!/guide/Mobile_Web](http://docs.appcelerator.com/titanium/latest/#!/guide/Mobile_Web)

您还可以查看：[http ://docs.appcelerator.com/titanium/latest/#!/guide/Mobile_Web_Platform_Overview](http://docs.appcelerator.com/titanium/latest/#!/guide/Mobile_Web_Platform_Overview)

# asp.net-mvc - OutputCache 客户端未按预期工作

> ID：15063974
> 
> 赞同：2
> 
> 时间：2013-02-25T09:39:49.997
> 
> 标签：asp.net-mvc, outputcache

我正在使用 MVC 和 OutputCache 属性进行客户端缓存。

当我将 OutputCache Location 设置为 Client 时，我期望看到的是第二个并继续请求，不应执行操作。如果不超过时间，OutputCache 需要发送 302 响应码。但实际上这不会发生，当我刷新页面操作正在运行时。为什么 outputCache 不发送 302 响应代码并阻止操作运行。

```
 [OutputCache(Location=OutputCacheLocation.Client,Duration=60)]
    public ActionResult Text()
    {
        return Content("text");
    } 
```

# java - Hadoop - 执行终端，mapreduce 中的命令

> ID：15063975
> 
> 赞同：-2
> 
> 时间：2013-02-25T09:39:54.360
> 
> 标签：java, hadoop, mapreduce

我想在执行作业后执行 hadoop delete 命令来删除处理过的输入文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:58:09.340

> hadoop fs -rm URI [URI …]
> 
> 删除指定为 args 的文件。仅删除非空目录和文件。有关递归删除，请参阅 rmr。例子：
> 
> ```
> `hadoop fs -rm hdfs://nn.example.com/file /user/hadoop/emptydir` 
> ```
> 
> 退出代码：
> 
> 成功返回 0，错误返回 -1。

更多信息请参考：[Hadoop 命令](http://hadoop.apache.org/docs/r0.18.2/hdfs_shell.html#rm)

# java - Java Mail 方法尚未实现 mimemessage

> ID：15063984
> 
> 赞同：0
> 
> 时间：2013-02-25T09:40:18.107
> 
> 标签：java, jakarta-mail

收到错误为“方法尚未实现的 mimemessage”

尝试发送电子邮件时

```
 protected static void addAtachments(String[] attachments, Multipart multipart) throws MessagingException, MessagingException {

    for (int i = 0; i <= attachments.length - 1; i++) {
    String filename = attachments[i];
    MimeBodyPart attachmentBodyPart = new MimeBodyPart();

    DataSource source = new FileDataSource(filename);
    attachmentBodyPart.setDataHandler(new DataHandler(source));

    attachmentBodyPart.setFileName(filename);
    multipart.addBodyPart(attachmentBodyPart);
}}

  protected static void sendMessage(List<String> recipients, String subject,
                              String messageContent, String from, String[] attachments)
    throws MessagingException, MessagingException {
boolean debug = false;

Properties props = new Properties();
props.put("mail.smtp.host", SMTP_HOST_NAME);
props.put("mail.smtp.auth", "true");
props.put("mail.debug", "true");
props.put("mail.smtp.port", SMTP_PORT);
props.put("mail.smtp.socketFactory.port", SMTP_PORT);
props.put("mail.smtp.socketFactory.fallback", "false");

Session session = Session.getDefaultInstance(props,
        new Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("xxxxx", "xxxxxx");
            }
        });

session.setDebug(debug);

Message message = new MimeMessage(session);
InternetAddress addressFrom = new InternetAddress(from);
message.setFrom(addressFrom);

for (String recipient : recipients) {
    message.addRecipient(Message.RecipientType.TO,
            new InternetAddress(recipient));
}

message.setSubject(subject);
BodyPart messageBodyPart = new MimeBodyPart();
messageBodyPart.setContent(messageContent, "text/html");
Multipart multipart = new MimeMultipart();
multipart.addBodyPart(messageBodyPart);
addAtachments(attachments, multipart);

message.setContent(multipart);
Transport.send(message);} 
```

**例外**

```
Exception in thread "main" java.lang.UnsupportedOperationException: Method not yet implemented
at javax.mail.internet.MimeMessage.<init>(MimeMessage.java:89)
at uk.co.newsint.bp.reg.report.Main.sendMessage(Main.java:84)
at uk.co.newsint.bp.reg.report.Main.main(Main.java:36)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-14T00:03:23.673

请确保java邮件依赖低于1，

```
<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4.7</version>`
</dependency> 
```

因为还有另一个 jar 包含该`javax.mail.*` 包低于 2，

```
<dependency>
    <groupId>geronimo-spec</groupId>
    <artifactId>geronimo-spec-j2ee</artifactId>
    <version>1.4-rc4</version>`
</dependency> 
```

解决方案是将第二个依赖项替换为第一个依赖项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T13:33:23.507

改用 message.addRecipients() ，它已实现。JAVAMAIL API REFERENCE IMPLEMENTATION 不实现末尾没有“s”的方法。查看从下载的源

[https://java.net/projects/javamail/downloads/directory/source](https://java.net/projects/javamail/downloads/directory/source)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:58:39.313

您已经犯了一些[常见的 JavaMail 错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)。JavaMail FAQ 也有其他示例可能对您有所帮助。

目前尚不清楚这是否与您遇到的异常有关。您使用的是什么版本的 JavaMail？

如果您在 IntelliJ 之外运行应用程序，它是否也会失败？

# c++ - 打开没有截断的二进制输出文件流

> ID：15063985
> 
> 赞同：8
> 
> 时间：2013-02-25T09:40:23.047
> 
> 标签：c++, visual-c++

我正在尝试打开一个需要附加一些数据的二进制输出文件。我不能顺序输出数据，所以我需要能够在文件流中寻找并且不能使用`std::ios::app`标志。

不幸的是，当打开没有标志的输出文件流时`std::ios::app`，文件在打开时会被截断。这是一些示例代码：

```
#include <iostream>
#include <fstream>

int main() {
    std::ofstream file("output.bin", std::ios::binary | std::ios::ate);

    std::streamoff orig_offset = file.tellp();
    std::cout << "Offset after opening: " << orig_offset << std::endl;

    file.seekp(0, std::ios::end);
    std::streamoff end_offset = file.tellp();
    std::cout << "Offset at end: " << end_offset << std::endl;

    file << "Hello World" << std::endl;

    std::streamoff final_offset = file.tellp();
    std::cout << "Offset after writing: " << final_offset << std::endl;

    return 0;
} 
```

我希望每次执行都将“Hello World”附加到文件中。但是，文件一打开就会被截断。

我究竟做错了什么？如果这是 Visual Studio 中的错误，是否有任何解决方法？

编辑：每次程序运行时，无论文件是否存在或已经有内容，程序都会输出：

```
Offset after opening: 0
Offset at end: 0
Offset after writing: 12 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T10:08:50.430

You have to open the file in both output **and** input mode:

```
std::fstream file("output.bin", std::ios::in | std::ios::out | std::ios::binary | std::ios::ate); 
```

# ios - 如何获取 iOS 通讯录联系人的 facebook 同步照片？

> ID：15063986
> 
> 赞同：0
> 
> 时间：2013-02-25T09:40:25.113
> 
> 标签：ios, facebook, abaddressbook

我想从 iOS 通讯录中获取联系人的图像：

```
NSData *contactImageData = ABPersonCopyImageData(person); 
```

这适用于本地图像，但不适用于与 Facebook 同步的图像。我怎样才能得到这些图像？我必须从 Facebook 手动加载它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:55:09.200

您需要使用*链接的联系人*`ABPersonCopyArrayOfAllLinkedPeople()`获取- 其中之一将是从 Facebook 同步的联系人，您可以从中获取图像。

不幸的是，我不知道有什么方法可以确定*哪个*链接的联系人来自 Facebook，因此没有可靠的方法来专门获取 Facebook 联系人图片——你只需要得到你找到的第一张图片，或者你的任何有意义的图片特殊案例。

# c++ - 带有友元运算符的模板类的嵌套类，编译错误

> ID：15063987
> 
> 赞同：0
> 
> 时间：2013-02-25T09:40:27.323
> 
> 标签：c++, templates, compiler-errors, nested-class

当我尝试编译这个（g++）时：

```
template<typename T>
struct A {

    struct B { };

    template<typename S>
    friend A<S>& operator +(A<S> const &, A<S> const &);
};

template<typename T>
A<T>& operator +(A<T> const &a, A<T> const &b) {
    A<T>::B *x;
    return a;
}

main() { } 
```

我明白了

```
test.cpp: In function "A<T>& operator+(const A<T>&, const A<T>&)":
test.cpp:12:11: error: "x" was not declared in this scope 
```

为什么？

[忽略：如果我不包括这一行，堆栈溢出说我保存时我的帖子中有太多代码]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:44:43.767

编译器不知道它`A<T>::B`表示一个类型，所以它试图在那里做乘法。

采用`typename A<T>::B *x;`

# django - 如何在django中的变量名中转义$

> ID：15063989
> 
> 赞同：0
> 
> 时间：2013-02-25T09:40:32.690
> 
> 标签：django, django-templates

在我的代码中，名为 data 的变量名称包含名称为 'username' 和 'user$id' 的 dict

如果我这样做 {{ data.username }} 一切正常。但如果我这样做 {{ data.user$id }} 什么都不会显示。

如何转义 $ 以使 Django 模板工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:19:56.313

Django模板不允许dollor字符在变量名中，[参考文档](https://docs.djangoproject.com/en/1.4/topics/templates/#variables)：

> 变量名称由字母数字字符和下划线（“_”）的任意组合组成。点（“.”）也出现...

在 Django 外壳中

```
>>> from django.template import *
>>> Template("{{ data.user$id }}").render(Context({'data':{'user$id':'foo'}}))
...
TemplateSyntaxError: Could not parse the remainder: '$id' from 'data.user$id'

# "{[" also does not work
>>> Template("{[ data.user$id }}").render(Context({'data':{'user$id':'foo'}}))
u'{[ data.user$id }}' 
```

因此，您需要将键明确表示为字符串

```
{% for k, v in data.iteritems %}
    {% if k == 'user$id' %}{{ v }}{% endif %}
{% endfor %} 
```

或者写一个模板标签作为`{% get_value data "user$id" %}`

# c# - 每秒调用一个 json web 服务

> ID：15063993
> 
> 赞同：0
> 
> 时间：2013-02-25T09:41:01.897
> 
> 标签：c#, json, web-services, windows-phone-7

我`json web service`在我的网站上创建了一个 & 使用。
现在我想在我的 Windows Phone 应用程序中使用它来显示该 Web 服务正在接收的数据。所以我写了下面的代码--->

```
 //// some code

StartThread();
        }

            void StartThread()
            {
                DispatcherTimer TradeThread = new DispatcherTimer();
                TradeThread.Interval = TimeSpan.FromMilliseconds(1000);
                TradeThread.Tick += new EventHandler(BindData);
                TradeThread.Start();
            }

            void BindData(object sender, EventArgs e)
            {
                WebClient wc = new WebClient();
                wc.DownloadStringAsync(new Uri("some URL"));
                wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
            }

            void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
            {
                JObject jsonObject = JObject.Parse(e.Result);
                ///// some code 
```

代码工作正常，但我认为我编写的 Web 客户端`BindData`每次（每 100 毫秒）都会实例化一次，这可能是我运行速度很慢的原因......

**有什么方法可以实例化它（网络客户端）一次并在每次调用时更新下载的字符串？？？**
因此，如果有人使用过网络服务而不是请检查我上面的代码，如果有任何错误，请进行评论或编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:55:55.697

你不是每秒钟都在调用它。您每 1/10 秒调用一次，这实在是太短的时间了。如果您想每秒调用一次，请确保指定正确的间隔：

```
TradeThread.Interval = TimeSpan.FromMilliseconds(1000); 
```

或者，如果您愿意：

```
TradeThread.Interval = TimeSpan.FromSeconds(1); 
```

a 的实例化`WebClient`不是您应该担心的昂贵操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:13:05.780

我不确定它是否是最好的解决方法（每秒盲目检查）你可能会遇到连接缓慢或间歇性的人。我认为即使线程暂停，DownloadStringComplete 也应该触发，所以也许你可以进行 json 调用，暂停线程，然后在 downloadComplete 事件中取消暂停。如果这不起作用，也许您可​​以设置一个内部变量，例如 _receivedData 并在发送请求之前将其设置为 false，然后在 downloadComplete 中将其设置回 true .. 类似...

```
 void StartThread()
        {
            DispatcherTimer TradeThread = new DispatcherTimer();
            TradeThread.Interval = TimeSpan.FromMilliseconds(1000);
            TradeThread.Tick += new EventHandler(BindData);
            TradeThread.Start();
        }

        Boolean _receivedData = true;
        void BindData(object sender, EventArgs e)
        {
            if(_receivedData)
            {
                _receivedData = false;
                WebClient wc = new WebClient();
                wc.DownloadStringAsync(new Uri("some URL"));
                wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
            }
        }

        void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
            _receivedData = true;
            JObject jsonObject = JObject.Parse(e.Result);
            ///// some code 
```

# google-maps - 谷歌地图集群

> ID：15063995
> 
> 赞同：0
> 
> 时间：2013-02-25T09:41:04.700
> 
> 标签：google-maps, cluster-computing

（对不起我的英语）我想做集群，但我有错误
Uncaught TypeError: Object [object Array] has no method 'getPosition' Coords i take from database

```
 function initialize() {
        var latlng = new google.maps.LatLng(56.323678, 44.0);
        var myOptions = {
          zoom: 7,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
        setMarkers(map, markers);
  }  

var markers = [ <? for ($i=0; $i<count($cords); $i++) 
{if((float)$cords["$i"]["location_lat"]<>0 AND (float)$cords["$i"]["location_lng"]<>0  ){echo "[".(float)$cords["$i"]["location_lat"].",
".(float)$cords["$i"]["location_lng"]." ,
 '".$cords["$i"]["image"]."', 
'".$cords["$i"]["name"]."']";
if ($i+1<count($cords))echo ",\n\r";}}?> ];
var infowindow = new google.maps.InfoWindow({
 });
function setMarkers(map, locations) {
var markerCluster = new MarkerClusterer(map, locations);
var latlngbounds = new google.maps.LatLngBounds();  
         for (var i = 0; i < markers.length; i++) {
            var myLatLng = new google.maps.LatLng(locations[i][0], locations[i][1]);

            latlngbounds.extend(myLatLng);
            var marker = new google.maps.Marker({
                position: myLatLng,
                map: map,   
                title: locations[i][3]
            });
 google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent("<img src='image/"+ locations[i][2] +"' height='150' width='300'> <br> <b>"+ locations[i][3] +"</b> " );
          infowindow.open(map, this);
        }
      })(marker, i));
           }
   map.setCenter( latlngbounds.getCenter(), map.fitBounds(latlngbounds));    
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T12:01:45.207

我认为您没有说明要执行“getPosition”的数组的索引，您的代码太乱了.. :)